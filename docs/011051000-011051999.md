# StackOverflow 问答 11051000-11051999

# jquery - AJAX 和发布数据：表单

> ID：11051005
> 
> 赞同：0
> 
> 时间：2012-06-15T12:51:56.053
> 
> 标签：jquery

我正在尝试使用 AJAX 发布一些数据。我正在发送一个序列化的表单，但没有发送任何内容。会出什么问题？我该如何解决？

```
$.ajax({
    url: 'postcreaorganisation',
    type: 'POST',
    data: $('#form').serializeArray(),
    processData: false,
    success: function(data) {
        //success action
    },
    error:function (xhr, ajaxOptions){
        //error action
    }  
}); 
```

提前致谢！

编辑：我应该指定我在对话框确认按钮的操作中使用该代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:04:33.010

确保您的表单元素具有`name`属性。jQuery`.serialize`仅适用于具有`name`s 的表单元素。

# iphone - 如何在 iPhone 应用程序上使用 Google Maps API 显示大量图钉，而不是用红色图钉填充屏幕 - 关于改进用户界面的建议

> ID：11051006
> 
> 赞同：1
> 
> 时间：2012-06-15T12:51:58.047
> 
> 标签：iphone, ios, api, google-maps, pins

我正在开发一个 iphone 应用程序，该应用程序涉及用英国各地的许多位置点填充谷歌地图。

有超过 10,000 个点，当用户滚动时，每个点都基于纬度/经度位置固定到地图上，每次用户更改缩放量时，都必须重新加载页面上的图钉。

正如您可以想象的那样，每次移动地图时都尝试在 iPhone 屏幕上加载 10,000 个图钉，加载需要时间并使应用程序无法使用。

这里是应用程序如何过度填充的屏幕截图：[http ://www.wreckfinder.co.uk/wp-content/uploads/2012/06/photo-8.png](http://www.wreckfinder.co.uk/wp-content/uploads/2012/06/photo-8.png)

我无法决定以更干净和友好的方式显示数据的好方法。

潜在的解决方案：

*   网格视图我认为这样的设计会起作用，但容易创建似乎很复杂：http: [//marinetraffic.com/ais/](http://marinetraffic.com/ais/)

这个网站对地图的各个区域进行分组并解释一个区域内有多少个图钉，然后一旦你放大到足够的程度，它就会在地图上填充用于查看的点。

*   显示最大数量的引脚我的另一个想法是在任何时候最多只显示 500 个引脚。因此，一旦用户放大到少于 500 个图钉的级别，它就会显示它们。但是有一个问题，我无法找到一种方法来随时知道 iphone 上显示了多少引脚，似乎您只能控制引脚数据库，您无法知道用户正在查看的缩放级别/位置在地图上。

*   将数据库拆分为多个部分，例如将屏幕拆分为 9 个框 - 3x3 并将数据库分成每个框约 1000 个引脚，然后当用户单击一个区域时，他们只会在该区域中显示这些引脚，然后必须返回为了查看任何其他引脚。

* * *

从上面看，我理想地希望使用 1\. 或 2\. 2\. 似乎最简单，

如果您能帮助解释如何实现 2\. 或有其他可能的简单解决方案来更好地显示这些引脚，我将不胜感激！

谢谢，肖恩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:00:43.927

将您的引脚分组为 1 个引脚。并且在不同的缩放级别上取消组合它们，例如在英国的缩放级别上，您将拥有例如 50 个引脚（例如区域）。放大到一个区域，将取消其引脚与其子引脚的组合。这是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:13:47.957

正如 Oleg Danu 所说，您可以对您的引脚进行分组。这是一篇谈论它的文章。还有一些库作为示例，以及我们在案例中使用的算法（请注意，该算法实现起来并不简单）：

[http://applidium.com/en/news/too_many_pins_on_your_map/](http://applidium.com/en/news/too_many_pins_on_your_map/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T13:46:46.633

过去，我为此使用过 Marker clusterer lib，您可以在以下位置找到它：

[http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.1.2/examples/simple_example.html](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.1.2/examples/simple_example.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:07:04.787

这是我在我的应用程序中为解决类似问题所做的：基本上，不要自动绘制图钉；让用户要求他们。

1.  用点或目标图标标记地图的中心。
2.  在地图中心的底部“查找 10 英里内的所有位置”添加一个按钮
3.  点击按钮会遍历您的数据库（最好是在后台线程中）；如果在中心 10 英里范围内，请放置一个图钉（希望您的数据库可以按纬度/经度排序，这样您就不必遍历所有 10,000 个）

很酷的额外功能是我会建立在那个图钉数据库上，所以当用户在地图上移动，然后询问更多位置时，我只需添加到屏幕上已有的内容。

摇动以重置引脚。=)

放大和缩小时，您可以更改英里半径（1、5、10、50），但关键是通过限制图钉数量来释放地图滚动。祝你好运！

编辑：我没有足够的代表来评论 Oleg/Zoleas 的方法，但如果你必须展示所有 10,000 分，那么分组别针绝对是要走的路。但作为一名 UX 设计师，我会问，对于用户来说，找到靠近他当前位置的位置是否比需要查看所有可能的位置更重要。

# jquery - 如何创建动态jPlayer？

> ID：11051011
> 
> 赞同：1
> 
> 时间：2012-06-15T12:52:09.890
> 
> 标签：jquery, jplayer

下面是 jPlayer 与 jQuery 的代码。我必须动态创建 jPlayer。

```
$("#jquery_jplayer_0").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                webmv: "http://....",
                poster: "http://...."
            });
        },
        play: function() { // To avoid both jPlayers playing together.
            $(this).jPlayer("pauseOthers");
        },
        repeat: function(event) { // Override the default jPlayer repeat event handler
            if(event.jPlayer.options.loop) {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerRepeat", function() {
                    $(this).jPlayer("play");
                });
            } else {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerNext", function() {
                    $("#jquery_jplayer_1").jPlayer("play", 0);
                });
            }
        },
        swfPath: "js",
        supplied: "webmv",
        size: {
            width: "640px",
            height: "360px",
            cssClass: "jp-video-360p"
        },      
        cssSelectorAncestor: "#jp_container_0"
    }); 
```

我在页面加载时有 20 个 jPlayers。所以我不想写这 20 次。

```
for(var i=1;i<=20;i++){

       $("#jquery_jplayer_"+i).jPlayer({
            ready: function () {
                $(this).jPlayer("setMedia", {
                    webmv: "http://..",
                    poster: "http://.."
                });
            },
            play: function() { // To avoid both jPlayers playing together.
                $(this).jPlayer("pauseOthers");
            },
            repeat: function(event) { // Override the default jPlayer repeat event handler
                if(event.jPlayer.options.loop) {
                    $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                    $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerRepeat", function() {
                        $(this).jPlayer("play");
                    });
                } else {
                    $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                    $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerNext", function() {
                        $("#jquery_jplayer_"+(i-1)).jPlayer("play", 0);
                    });
                }
            },
            swfPath: "jplayer/js",
            supplied: "webmv",
            size: {
                width: "640px",
                height: "360px",
                cssClass: "jp-video-360p"
            },      
            cssSelectorAncestor: "#jp_container_"+i
        });
    } 
```

我想应用上面的代码。但这对我不起作用。可能是它不创建动态对象。使用了 eval() 但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:42:24.387

我和你有同样的问题。[检查这个谷歌群组帖子](https://groups.google.com/forum/?fromgroups=#!topic/jplayer/iKpGhDfDSM4)，以及[这个](http://onyxmueller.net/testing/jplayer/)。您将要从代码中注释掉“就绪”事件，并在其他地方执行该逻辑。因此，在您的代码中：

```
$("#jquery_jplayer_"+i).jPlayer({
        play: function() { // To avoid both jPlayers playing together.
            $(this).jPlayer("pauseOthers");
        },
        repeat: function(event) { // Override the default jPlayer repeat event handler
            if(event.jPlayer.options.loop) {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerRepeat", function() {
                    $(this).jPlayer("play");
                });
            } else {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerNext", function() {
                    $("#jquery_jplayer_"+(i-1)).jPlayer("play", 0);
                });
            }
        },
        swfPath: "jplayer/js",
        supplied: "webmv",
        size: {
            width: "640px",
            height: "360px",
            cssClass: "jp-video-360p"
        },      
        cssSelectorAncestor: "#jp_container_"+i
    }); 
```

并在一个单独的函数中执行“setMedia”事件，您将希望从其他地方调用它。例如，这里：

```
<ul class="jp-controls">
                                <li><a href="javascript:;" class="jp-play" tabindex="1" onclick="playMedia(@itemCount)">play</a></li>
                                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                                <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                                <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                                <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                            </ul> 
```

其中 itemCount 是在动态生成标记的循环中确定的。然后有这样的功能：

```
function playMedia(itemDivId) {
    var podcastPaths = [@Html.Raw(String.Join(",", itemPodcastPaths.Select(s => "'" + s.Replace("\\", "\\\\") + "'")))];
    var url = getUrl(podcastPaths[itemDivId]);

    var stream = {
        mp3: url
    };
    var selector = "#jquery_jplayer_" + itemDivId;
    $(selector).jPlayer("setMedia", stream);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T23:38:12.263

我使用相同的环境，同一页面中的 5 个 jplayers 在 for(){} 中初始化，您需要为每个人实例化一个不同的“i”副本。这样做是这样的

```
for(var i=0;i<5;i++){

  (function(i){

   $("#jquery_jplayer_"+i).jPlayer({
     ready: function(event){
       $(this).jPlayer("setMedia",myMediaArray);
     },
     error: function (event) {
      console.log(event.jPlayer.error);
     },
     swfPath: "../jquery.jplayer.swf",
     cssSelectorAncestor: '#flash-'+i,
     cssSelector:{
     play: '.icon-play1',
     pause: '.icon-pause1',
     seekBar: '.jp-seek-bar',
     playBar: '.ui-slider-range',
     currentTime: '.jp-current-time',
     duration: '.jp-duration'
     },
     supplied: "mp3",
     solution_play: "flash, html",
     wmode: "window",
     mobile:true,
     preload: "metadata",
     volume: 1,
     duration:true,
     smoothPlayBar: true,
     keyEnabled: true,
     errorAlerts: true
   });

  })(i);

} 
```

如果你不使用

```
(function(i){
//
})(i); 
```

您最终将所有玩家都初始化为 las 玩家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:53:00.923

也许这可能会给你一些从哪里开始的方向：

**JS**

试试这个：创建一个创建 jplayer 的 javascript 文件，如下所示。我用 this.html = Ext.String.format(YourHtmlCodeForJplayer); 定义 html

最后你可以调用jquery来实例化它，我正在使用：on(afterrender, function(){YourJqueryCodeHereThatCallsTheJplayerLibrary})

不要忘记为每个玩家使用唯一的 ID。（我有一个组件、容器和接口 ID）音频文件没有播放也有问题，但这可能只是我正在使用的资源服务。使用普通的 mp4 文件没有太大问题。

在实例化 jquery 时尝试使用 jplayer CSSSelector 和 CSSSelectorAncestor 选项也可能很聪明。这些选项允许您更改预定义的 css 类/选择器/无论您如何称呼它。

**C＃**

如果您想使用 C# 来执行此操作，请执行完全相同的操作。唯一不同的是使用 HTMLgenericcontrol 而不是 javascript 呈现 HTML。在 htmlgenericcontrol 的末尾，您可以添加对 javascript 文件的调用，该文件又使用 jquery 来实例化播放器。请注意，您的唯一 ID 必须在 C# 中创建，并通过 javascript 调用传递给您的 jquery 实例化方法。

请注意，您的服务器/下载方法需要支持范围请求。否则播放文件可能会出现问题。

~

我知道这可能有点令人困惑，但我目前在某些框架和结构中工作，并且不能真正给出代码，这只会让事情更加混乱。所以我希望这对你有用！

随时问任何进一步的问题！

# android - 在XZ轴上进行游戏时如何将对象移动到触摸点？

> ID：11051014
> 
> 赞同：0
> 
> 时间：2012-06-15T12:52:13.400
> 
> 标签：android, opengl-es, 3d, libgdx, game-physics

我是游戏开发的新手，在我的游戏中，我需要将激光枪射击到我的触摸位置。问题是敌人在 XZ 轴而不是 XY 轴上移动。但是触摸一个点只能让我得到 XY 坐标。那么如何将 Y 轴坐标转换为 Z 轴坐标。或者广义地说，我如何计算到达 XY 轴上的接触点所需的速度。我可以假设 Z 轴上的速度恒定。

Y 坐标也不会改变，并且对于游戏中的每个元素都是相同的。

我正在使用 libgdx 和 opengl。

# vbscript - CDO CreateMHTMLBody 在 JScript 中锁定文件

> ID：11051019
> 
> 赞同：0
> 
> 时间：2012-06-15T12:52:45.897
> 
> 标签：vbscript, jscript

我正在制作一个通过 CDO 以 HTML 格式发送电子邮件的 JScript 脚本。我在 .html 文件中有一个消息模板，我将一些独特的数据放入每条发送的消息中。因此，我为每条消息创建了原始 .html 文件的副本。

问题是发送消息后我无法从脚本中删除这个临时文件。我已经检查了 ProcessExplorer，该进程锁定了文件，它是 cscript.exe/wscript.exe（用于运行脚本）。

这是示例（简化）代码：

```
//-------------------------------------------
var fso = new ActiveXObject("Scripting.FileSystemObject");
var BodyFileName = fso.GetAbsolutePathName(WScript.Arguments(3));
var BodyExtensionName = fso.GetExtensionName(BodyFileName)
var BodyFile = fso.OpenTextFile(BodyFileName, 1);
var Body = BodyFile.ReadAll();
BodyFile.Close();
//-------------------------------------------
// Replace something in Body here
//-------------------------------------------
BodyFileName = fso.BuildPath(fso.GetParentFolderName(BodyFileName), fso.GetTempName() + "." + BodyExtensionName);
var TmpBodyFile = fso.OpenTextFile(BodyFileName, 2, true);
TmpBodyFile.Write(Body);
TmpBodyFile.Close();
// Here ProcessExplorer shows that the file is closed
//-------------------------------------------
var objEmail = new ActiveXObject("CDO.Message");  
objEmail.From = WScript.Arguments(0);
objEmail.To = WScript.Arguments(1);  
objEmail.Subject = WScript.Arguments(2);  
objEmail.CreateMHTMLBody("file:///" + BodyFileName.replace("\\","/"));
// Here the file is open again
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2;  
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "192.168.0.1";
objEmail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25;  
objEmail.Configuration.Fields.Update();  
objEmail.Send();
objEmail = null;
//-------------------------------------------
// The following loop becomes endless
for (;;) {
  try {
    fso.DeleteFile(BodyFileName, true);
  } catch(e) {
    WScript.Sleep(100);
    continue;
  } finally {
  }
  break;
}
//------------------------------------------- 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:56:24.473

您是否尝试以编程方式终止邮件进程然后删除文件（除非您需要在发送邮件后运行邮件程序）

您是否安装了 IIS SMTP 服务，可能值得一试

CreateObject("cdonts.NewMail")

或者

CreateObject("outlook.application")

但是您可能必须在类似情况下终止相关进程。

# php - 为什么 phpunit 跳过了我的大部分测试，即使它们的依赖成功了？

> ID：11051020
> 
> 赞同：2
> 
> 时间：2012-06-15T12:52:46.143
> 
> 标签：php, phpunit

我有一个看起来像这样的 PHPUnit 测试：

```
/**
 * @dataProvider provideSomeStuff
 */
public function testSomething($a, $b, $c)
{
    ...
}

/**
 * @dataProvider provideSomeStuff
 * @depends testSomething
 */
public function testSomethingElse($a, $b, $c)
{
    ...
}

/**
 * @depends testSomething
 */
public function testMoreStuff()
{
    ...
}

// Several more tests with the exact same setup as testMoreStuff 
```

即使`testSomething`成功，所有依赖它的测试都会被跳过。[PHPUnit 手册](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html)中的一些注释告知测试可以依赖于使用数据提供者的其他测试：

> **注意**
> 当一个测试从@dataProvider 方法和它@depends 的一个或多个测试接收输入时，来自数据提供者的参数将在来自依赖测试的参数之前。
> 
> **注意**
> 当测试依赖于使用数据提供者的测试时，依赖的测试将在它依赖的测试对至少一个数据集成功时执行。使用数据提供者的测试结果不能注入到依赖测试中。

所以我不知道为什么它会跳过我所有的测试。我已经为此苦苦挣扎了几个小时，有人帮助我。[这是完整的测试代码](http://pastebin.com/smgAsAHV)，以防问题不能从上面的伪代码中得出

**测试结果截图：**

![测试结果](../Images/07fcba2b1f6cc4c84949d317f753fee4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:32:07.170

这似乎是 phpunit 3.4.5 中的一个错误，但在 phpunit 3.4.12 中已修复。

以下是基于手册中的示例的最小示例。*我在PHPUnit 3.4.5*中得到了与你相同的行为，但在*PHPUnit 3.6.11*中我得到了 4 次通过。缩小范围，[phpunit 3.4 变更日志](https://github.com/sebastianbergmann/phpunit/tree/3.4)说它已在 PHPUnit 3.4.12 中修复。

```
class DataTest extends PHPUnit_Framework_TestCase
{

/**
* @dataProvider provider
*/
public function testAdd($a, $b, $c)
{
$this->assertEquals($c, $a + $b);
}

/**
* @depends testAdd
*/
public function testAddAgain()
{
$this->assertEquals(5,3+2);
}

/** */
public function provider()
{
return array(
array(0, 0, 0),
array(0, 1, 1),
array(1, 0, 1),
);
}

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-29T20:19:53.320

您必须在主方法之后定义依赖方法。

```
public function testSomething()
{
    $foo = [];
    //test something
    return $foo;
}

/** 
 * @depends testSomething
 */
public function testBar(array $foo)
{
    //more tests 
} 
```

# android - Web 应用程序示例（ios 和 android）

> ID：11051024
> 
> 赞同：0
> 
> 时间：2012-06-15T12:53:02.603
> 
> 标签：android, ios, web-applications, iphone-web-app

我有一个不错的应用程序创意，必须决定是编写 2 个本机应用程序 - android 和 ios 还是编写一个 webapp，这将大大加快我的开发速度。

但是在对 Webapps（嵌入在 WebView 中）进行了一些研究之后，我遇到了一个小问题……我找不到任何 Web 应用程序的示例。

有人知道 webapps 的好例子吗？尤其是安卓和ios版本的应用。

**澄清（我认为以上内容有点误导）：我不搜索实际代码或类似的东西。我只搜索使用 html/css/javascript（+ phonegap 或任何东西）开发的应用程序的名称，以便我可以下载它们并检查它们的速度、它们的外观、与自编码的本机应用程序是否有任何差异等等上...**

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:05:45.130

这取决于您所说的“网络应用程序”是什么意思。

Apple 将拒绝任何只是 a 包装器的应用程序`UIWebView`，因此它必须包含比这更多的本机代码。某些应用程序（fx [The Atlantic ）是使用](http://itunes.apple.com/us/app/atlantic-magazine-digital/id397599894?mt=8)[RareWire](http://rarewire.com)等在线技术创建的，允许它们包含用于基于 Web 的技术的本机 UI。

所以你有几个选择：

1.  带有支持 Web 内容的服务器的本机应用程序（最常见）
2.  一个真正的网络应用程序，保存到 safari 中的用户主页（第二常见）
3.  一个`UIWebView`基于应用程序，具有对某些事物（地图、照片、GPS 等）的本机控件（最不常见）。

事实是，苹果对其应用商店中的应用程序指南非常严格，而您所指的内容在野外并不存在（但是，如果您正在寻找越狱应用程序，那就完全不同了）。

# ios - ios 的 CIHeightFieldFromMask 过滤器

> ID：11051025
> 
> 赞同：1
> 
> 时间：2012-06-15T12:53:06.363
> 
> 标签：ios, image-processing, core-graphics, quartz-graphics

如何创建与 MacOs 过滤器 CIHeightFieldFromMask 相同的效果？ [https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Art/CIHeightFieldFromMask.jpg](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Art/CIHeightFieldFromMask.jpg)

我找不到这个算法。在描述中说它是阁楼形高度场，但我不知道该怎么做。

# c - chroot和chdir后，对应的execv失败，返回EACCESS给父进程

> ID：11051028
> 
> 赞同：2
> 
> 时间：2012-06-15T12:53:21.587
> 
> 标签：c, linux, chroot

我正在尝试用 C 沙箱化一个实用程序。我按照以下步骤操作：

1.  `file,directory, sharpoint`在文件夹下为该实用程序创建沙箱资源`/sandbox/myutil`。
2.  来自“c”代码，称为`chdir("/sandbox/myutil")`, `chroot("/")`。
3.  确保实用程序可执行文件在 下可用`/sandbox/myutil/bin/util.bin`，并且所有依赖文件在 下可用`/sandbox/myutil`。
4.  调用实用`bin/util.bin`程序`execve("/bin/util.bin",arg, env);`

然而，`/bin/util.bin`没有按预期执行，进程接收到信号 18 并返回代码 13“EACCESS”。

但是，如果我使用从 shell 执行的命令而不是从 c 代码调用 , 则它可以正常工作`chroot()`。`chdir()``execve()``chroot /sandbox/myutil /bin/util.bin`

我正在使用内核 2.6.17。

# python - NDB：如何对实体组中的实体使用 get_by_id

> ID：11051029
> 
> 赞同：4
> 
> 时间：2012-06-15T12:53:22.840
> 
> 标签：python, google-app-engine, app-engine-ndb

我正在使用 get_by_id() 从 NDB 读取实体，但我无法让它适用于属于实体组的实体：

```
from google.appengine.ext import ndb

class Folder(ndb.Model):
    name = ndb.StringProperty()

parent_folder_key = Folder(name = 'Parent folder').put()    
sub_folder_key = Folder(name = 'Subfolder', parent=parent_folder_key).put() 

id_list = []
print 'All folders:'
for f in Folder.query():
  print f
  id_list.append(f.key.id())

print '\nFolders by id:'
for id in id_list:
  print Folder.get_by_id(id) 
```

输出：

```
All folders:
Folder(key=Key('Folder', 5814), name=u'Parent folder')
Folder(key=Key('Folder', 5814, 'Folder', 5815), name=u'Subfolder')

Folders by id:
Folder(key=Key('Folder', 5814), name=u'Parent folder')
None 
```

是设计使然还是错误？我看到以前使用命名空间时出现[了一些](https://stackoverflow.com/questions/1916579/in-python-how-can-i-test-if-im-in-google-app-engine-sdk)与 get_by_id() 相关的问题（我使用的是 SDK 1.6.6）。我怎样才能文件夹有来自 id 的父母？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T13:11:21.307

`get_by_id(id, parent=None)`接受一个父参数。
当您在实体组中按 id 查询时，您必须包含父键才能获得所需的实体。

[https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id)

# sql - 如何在日期和时间之间进行搜索

> ID：11051030
> 
> 赞同：-1
> 
> 时间：2012-06-15T12:53:23.027
> 
> 标签：sql, sql-server-2008, tsql

我有一张桌子，每天有人更新这张桌子。

我想创建一个视图，而不是像那个人那样手动更新这个视图，我想让它自动化。

例如，今天是 2012 年 6 月 15 日，并且表已更新，当该人更新表时，必须自动更新视图（运行时）。

我的麻烦是如何将一个月的第一天到最后一天更新表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:59:32.230

表更新的最后一天一定是今天，对吧？该表是否会包含比今天晚的数据？如果不是，那么您可以说“WHERE >= 本月初”，对吗？您可以使用各种字符串转换和连接技巧获得当月的开始，但我更喜欢的方法是坚持日期数学：

```
SELECT [First day of this month] = 
    DATEADD(MONTH, DATEDIFF(MONTH, '19000101', GETDATE()), '19000101'); 
```

因此，在您看来，您可以使用以下 where 子句将其限制为自本月初以来的数据：

```
WHERE date_col >= DATEADD(MONTH, DATEDIFF(MONTH, '19000101', GETDATE()), '19000101') 
```

如果您需要在现在之后排除数据，您可以添加：

```
AND date_col < CURRENT_TIMESTAMP 
```

**编辑**

您的问题说该表每天都会更新。如果这实际上不是真的，并且您需要从表实际更新的上个月开始，您可以将上面的内容更改为：

```
WHERE date_col >= (SELECT DATEADD(MONTH, 
  DATEDIFF(MONTH, '19000101', MAX(date_modified)), 
  '19000101') FROM dbo.your_table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:06:28.063

如果我正确理解了您的问题，您需要检查您的表格到最后修改日期并获得该月的第一天发生这种情况？

如果这是真的，你需要类似的东西：

```
DECLARE @maxdate DATETIME
SELECT @maxdate = MAX(ModifiedDate) FROM [yourTable]
SELECT DATEADD(DAY, (DAY(@maxdate) - 1)*(-1), @maxdate) 
```

# php - PHP 压缩类。压缩站点根目录中的所有目录，除了一个

> ID：11051032
> 
> 赞同：0
> 
> 时间：2012-06-15T12:53:29.297
> 
> 标签：php, class, function

我正在使用这个 PHP 类：[http ://www.phpclasses.org/browse/file/9524.html](http://www.phpclasses.org/browse/file/9524.html)

我使用此代码使其工作：

```
include('scripts/zip.php');

$directoryToZip = "./"; // This will zip all the file(s) in this present working directory 

$outputDir = 'backup/'; //Replace "/" with the name of the desired output directory. 
$zipName = 'backup_'.date('Y-m-d').'1.zip';

// If backup already exists, kill it
if(file_exists($outputDir.$zipName)){
    unlink($outputDir.$zipName);    
}

$createZipFile = new CreateZipFile; 

/* 
// Code to Zip a single file 
$createZipFile->addDirectory($outputDir); 
$fileContents=file_get_contents($fileToZip); 
$createZipFile->addFile($fileContents, $outputDir.$fileToZip); 
*/ 

//Code toZip a directory and all its files/subdirectories 
$createZipFile->zipDirectory($directoryToZip,$outputDir); 
$fd = fopen($outputDir.$zipName, "wb");
fwrite($fd,$createZipFile->getZippedfile()); 
fclose($fd); 
```

现在如您所见，我告诉它使用此变量 .zip 压缩所有目录和文件：

```
$directoryToZip = "./"; 
```

我需要做一个例外：我不希望脚本对备份目录进行 .zip 压缩。

如何添加例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:08:24.317

您应该重写“parseDirectory”方法，如下所示：

```
<?php

include('zip.php');  

class myCreateZipFile extends CreateZipFile {
  protected function parseDirectory($rootPath, $separator="/"){ 
    global $directoryToZip, $outputDir;

    $fileArray1 = parent::parseDirectory($rootPath, $separator);
    $prefix = $directoryToZip.$separator.$outputDir;
    $fileArray2 = array();
    foreach ($fileArray1 as $file) {
      if (strncmp($file, $prefix, strlen($prefix)) != 0) {
        $fileArray2[] = $file;
      }
    }
    return($fileArray2);
  }
}

$directoryToZip = "./";   
$outputDir = 'backup/';
$zipName = 'backup_'.date('Y-m-d').'1.zip';
@unlink($outputDir.$zipName);     

$createZipFile = new myCreateZipFile;   
$createZipFile->zipDirectory($directoryToZip, $outputDir);  
if ($fd = fopen($outputDir.$zipName, "wb")) {
  fwrite($fd,$createZipFile->getZippedfile());  
  fclose($fd); 
}

?> 
```

# c# - 将相同的属性应用于我的所有多边形

> ID：11051035
> 
> 赞同：2
> 
> 时间：2012-06-15T12:53:32.350
> 
> 标签：c#, wpf

我想将相同的属性应用于我的所有多边形：

```
Polygon polygon = new Polygon();
polygon.StrokeThickness = 2;
polygon.Stroke = Brushes.Black;
polygon.Fill = (Brush)FindResource("HatchBrush");
polygon.ToolTip = (Image)FindResource("GapImg"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:53:53.740

您可以使用该[`Style`属性](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.style.aspx)。

在资源字典中定义你的风格：

```
<Style x:Key="PolygonStyle" TargetType="Polygon">
    <Setter Property="Stroke" Value="Black" />
    <Setter Property="StrokeThickness" Value="2" />
    <Setter Property="Fill" Value="{StaticResource HatchBrush}" />
    <Setter Property="ToolTip" Value="{StaticResource GapImg}" />
</Style> 
```

然后对每个使用[FindResource](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findresource%28v=vs.90%29)`Polygon`：

```
Polygon polygon = new Polygon() 
{ 
    Style = FindResource("PolygonStyle") as Style,
}; 
```

如果您需要将样式**应用于所有**多边形，只需删除`x:Key`，您甚至不需要找到资源*run-time*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:04:47.287

将您在 XAML 中提供的样式放在 App.xaml 文件中。

```
<Application x:Class="WpfApplication10.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                 
             StartupUri="MainWindow.xaml">
    <Application.Resources>

        <!-- Demo resources -->
        <SolidColorBrush x:Key="HatchBrush" Color="Red"/>
        <Image x:Key="GapImg" Source=".."/>

        <Style x:Key="PolygonStyle" TargetType="Polygon">
            <Setter Property="Stroke" Value="Black" />
            <Setter Property="StrokeThickness" Value="2" />
            <Setter Property="Fill" Value="{StaticResource HatchBrush}" />
            <Setter Property="ToolTip" Value="{StaticResource GapImg}"/>
        </Style>
    </Application.Resources>
</Application> 
```

如果资源 HatchBrush 和 GapImg 是在运行时创建的，那么您需要将 StaticResource 行替换为 DynamicResource

# c# - 如何在 C# 上组织与应用程序交互的 Windows 服务？

> ID：11051040
> 
> 赞同：0
> 
> 时间：2012-06-15T12:54:03.130
> 
> 标签：c#, service, windows-services, communication

我需要组织 Windows 服务，该服务应该与应用程序进行交互：

应用程序生成消息，然后以某种方式将此消息发送到正在运行的服务（实际上存在问题。如何？套接字？其他？），然后服务对此消息做一些工作。

应用程序可能会使用一些中间层——一个可执行应用程序，它接受消息作为参数，然后将其发送给服务。

那么我的服务如何与应用程序交互呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:57:24.847

简短的回答：通过 TCP 绑定使用 WCF。这是一个例子。 [http://www.codeproject.com/Articles/14493/WCF-Basic-Client-Server](http://www.codeproject.com/Articles/14493/WCF-Basic-Client-Server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:01:36.300

一些建议：

*   在您的 Windows 服务中托管 WCF 服务。可以在[此处](http://www.codeproject.com/Articles/38160/WCF-Service-Library-with-Windows-Service-Hosting)找到详细示例。绑定（Http、Tcp、命名管道等）依赖于调用应用程序，所有这些都将无缝工作。WCF 是微软的统一编程模型，所以这是推荐的方法。

*   如果您受限于 .NET 2.0 或更早版本，您的 Windows 服务可以实施轮询机制来扫描来自应用程序的“消息”。例如，您的应用程序可以将新记录插入到由 Windows 服务监控的数据库中。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:06:12.633

只是为已经提到的选项添加另一个选项：我在类似的场景中使用过[MSMQ 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:13:50.360

你需要多解释一点你的场景。

消息传递是只通过一种方式还是两种方式？互动频率如何？两个应用程序都在同一个环境中？他们必须通过网络进行交互吗？

这个问题有一系列解决方案：使用简单的文件、套接字、数据库、Windows 注册表……

# debugging - 如何调试学说：模式：更新

> ID：11051051
> 
> 赞同：0
> 
> 时间：2012-06-15T12:54:24.270
> 
> 标签：debugging, symfony, doctrine-orm

我为 Symfony2 运行模式更新给出：

```
Warning: class_parents(): Class Tg\UserBunde\Entity\Person does not exist and could not be loaded in /vendor/doctrine/lib/Doctrine/ORM/Mapping/ClassMetadataFactory.php on line 223 
```

Person 类在一个包中，然后我将它移到一个新包中，并将它所具有的两个关联更新为正确的相关包，例如：

```
 * @ORM\OneToOne(targetEntity="\Tg\BlogBundle\Entity\Author", mappedBy="person")
 */
private $author; 
```

我知道一定有问题，但我完全不知道错误在哪里。在工厂类中获取线路显然是没有用的；那么我怎样才能找到错误的位置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:11:12.633

我假设 UserBundle 是*旧*的，而 BlogBu​​ndle 是*新*的（正确的）？

您是否清除了缓存并生成了新的代理（orm:generate-proxies）？缓存的元数据或过时的代理可能是它尝试寻找旧的不正确实体的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:37:03.383

此权限更改对我有用：

`chmod 777 app/console`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T20:24:49.610

我认为您覆盖`__construct`并忘记添加`parent::__construct`

# c++ - 数组的第二个整数

> ID：11051052
> 
> 赞同：0
> 
> 时间：2012-06-15T12:54:26.983
> 
> 标签：c++

这是我在这里编写的一个非常简单的程序，但遇到了问题。好吧，程序从文件中填充数组 [2000]，然后它应该 TYPE(cout) 不等于数组的第二个成员的数组 [i]。我不确定如何指向程序中数组的第二个成员。这是一段程序：

```
#include <iostream>
#include <fstream>

using namespace std;
const int N=2000;

int main() {
    int* array;
    array = new int[N];

    for (int i=0; i<N; i++){
        ifstream ifs("reals.txt");
        ifs>>array[i];
    }

    for (int i=0; i<N; i++){
        if(array[i] != array[1])   /// is this right? is array[1] second member? 
            cout<<array[i]<<'\t';
        if((i+1)%13) cout<<endl;
    }
    system("pause");
    return 0;
} 
```

如果我想从数组的最后一个元素中检查第二个元素，那会怎样？

PS对不起我的英语。如果有什么你不明白的，请随时评论，我会尽力解释。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:57:14.433

`array[1]` *是*第二个成员。但是，您的问题是您每次在循环中都重新打开文件：

```
for (int i=0; i<N; i++){
    ifstream ifs("reals.txt");
    ifs>>array[i];
} 
```

您需要在循环之前打开文件：

```
ifstream ifs("reals.txt");
for (int i=0; i<N; i++){
    ifs>>array[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:58:01.257

```
for (int i=0; i<N; i++){
    ifstream ifs("reals.txt");
    ifs>>array[i];
} 
```

应该

```
ifstream ifs("reals.txt");
for (int i=0; i<N; i++){        
    ifs>>array[i];
} 
```

> if(array[i] != array[1]) /// 这是对的吗？数组[1] 是第二个成员吗？

答案是肯定的。

> 数组 = 新的 int[N];

不要忘记

```
delete[] array; 
```

如果你想访问 prelast 元素，在标准库中有一个用于你的数组的替换：

```
#include <vector>

int main(){
  std::vector<int> array(1000);
  array[998]= 42;
  int prelast= *(array.end()- 2); // end() is an iterator to one-past the last element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:57:21.610

是的，这是正确的，因为数组是`0`基于的。例如，`5 elements`最后一个元素的数组将是`index 4 or array[4];`

# macos - 如何从歌曲文件中获取歌曲的歌词

> ID：11051055
> 
> 赞同：3
> 
> 时间：2012-06-15T12:54:46.423
> 
> 标签：macos, cocoa, itunes

![iTunes 从歌曲文件中获取歌词信息](../Images/e549a9870f3cd63481c7c19e1e1e04a2.png)

iTunes从歌曲文件中获取歌词信息，我想问一下是否有一些方法或API可以从歌曲文件中获取歌词（不使用网络！），在cocoa或carbon中。非常感谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:25:37.313

没有简单的方法可以做到这一点。

您将需要使用第三方库。而且，虽然有一些第三方库可以透明地处理读取各种不同格式的标签，但它们只能以这种方式处理“基本集”标签；对于其他任何事情，您必须真正了解格式。

例如，使用[TagLib](http://developer.kde.org/~wheeler/taglib.html "标签库")，要获取艺术家，您只需执行以下操作：

```
TagLib::FileRef f1("myfile.mp3");
cout << f1.tag()->artist();
TagLib::FileRef f2("myotherfile.aac");
cout << f2.tag()->artist(); 
```

但是对于歌词，它是这样的：

```
TagLib::MPEG::File f1("myfile.mp3");
TagLib::ID3v2::FrameList frames = f1.ID3v2Tag()->frameListMap()["USLT"];
if (!frames.isEmpty()) {
  TagLib::ID3v2::UnsynchronizedLyricsFrame *frame = 
    dynamic_cast<TagLib::ID3v2::UnsynchronizedLyricsFrame *>(frames.front());
  // There could be multiple frames here; you may want to look at language
  // and/or description, instead of just picking the first.
  if (frame) cout << frames->text;
}
TagLib::MP4::File f2("myotherfile.aac");
TagLib::MP4::Item item = f2.tag()->itemListMap()["\xa9lyr"];
TagLib::StringList strings = item.toStringList();
if (!strings.isEmpty()) {
  // As above, there could be multiple strings.
  cout << strings->front();
} 
```

这不是我的想法，所以不要指望它会完全按原样工作。当然，几乎没有错误处理。但是缺少的重要一点是它没有告诉您如何确定您正在处理的文件类型，以及您将从中得到什么类型的标签。（对于上面的两个示例，这很容易，但是名为“.flac”的文件可以是 OGG FLAC 或原始 FLAC，并且可以具有 VORBISCOMMENT、MetaFLAC、ID3 或 APE 标签。）TagLib 有一些帮助也是如此，但它仍然不是微不足道的。

幸运的是，如果您只关心获得与 iTunes 10.6.3 完全相同的歌词，那并不难；规则似乎是这样的：

*   如果扩展名是 MP2 或 MP3（不区分大小写），并且是带有 ID3v2.3 或 ID3v2.4 元数据的 MPEG 音频文件，则第一个 USLT 标记的内容（无论描述或语言）是歌词。
*   如果扩展名与 .m4?、.aac、.mp4 或其他一些文件匹配，并且它是一个 MPEG-4 文件，其中包含带有 IMTF 元数据的音轨，则第一个 ©lyr 块中的第一个字符串的内容就是歌词.
*   在任何其他情况下，没有歌词。

而且，由于您只处理 ID3v2 和 ITMF，因此为每个使用单独的库实际上可能更简单——例如，[libmp4v2](http://code.google.com/p/mp4v2/ "libmp4v2")处理 MPEG4 文件比 TagLib 更简单（因为它只处理*MPEG4*文件），一些像这样：

```
MP4FileHandle f = MP4Open("myotherfile.aac");
const MP4Tags *tags = MP4TagsAlloc();
MP4TagsFetch(tags, f);
cout << tags->lyrics;
MP4TagsFree(tags);
MP4Close(f); 
```

此外，如果不必使用本机代码（Cocoa 或 Carbon），则可以使用其他语言提供一些更简单的库。例如，在 Python 中，使用[Mutagen](http://code.google.com/p/mutagen/wiki/Tutorial "诱变剂")，您可以这样做：

```
def printlyrics(path):
  f = mutagen.File(path)
  for key in f.keys():
    if key.startswith('USLT') or key == u'\xa9lyr':
      print f[key]
      return
printlyrics("myfile.mp3")
printlyrics("myotherfile.aac") 
```

当然，我仍然必须知道 ID3v2 将歌词称为“USLT:my desc:'eng'”，而 ITMF 将它们称为“©lyr”，但由于 Python 的动态特性，Mutagen 可以隐藏所有其他细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:16:21.503

没有简单的方法？使用 ScriptingBridge 怎么样？问题被标记为“osx”，因此可以假定 iTunes 呈现和使用。如果由于某种原因你不能向 iTunes 询问这些数据，这当然行不通

`sdef /Applications/iTunes.app | sdp -fh --basename iTunes`获取 iTunes.h

当前的 iTunes 歌曲。

```
iTunes = [SBApplication applicationWithBundleIdentifier:@"com.apple.iTunes"];
iTunesTrack * currentTrack=[iTunes currentTrack];
NSString * lyrics=[currentTrack lyrics]; 
```

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html#//apple_ref/doc/uid/TP40006104-CH4-SW15](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/UsingScriptingBridge/UsingScriptingBridge.html#//apple_ref/doc/uid/TP40006104-CH4-SW15)上的一般 ScriptingBridge 指南

你可以遍历所有音乐等，如果这对你来说没问题

# java - 获取自己的 MBean 的所有注册实例

> ID：11051057
> 
> 赞同：0
> 
> 时间：2012-06-15T12:55:09.823
> 
> 标签：java, jmx, mbeans

我以这种方式注册了我的 MBean 应用程序：

```
ObjectName appName = new ObjectName("testpack.Application:name=myApp");
MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
mbs.registerMBean(this, appName); 
```

接下来我尝试通过以下方式获取所有已注册的实例：

```
for (ObjectInstance instance : mbs.queryMBeans(appName, null)) {
    System.out.println(instance.toString());
} 
```

但是即使我在同一个 JVM 上运行同一个应用程序的许多实例，它也只会打印一个实例。我误解了什么？如何正确执行此操作？

* * *

## 编辑

对不起，我误解了一些基本术语，如 MBean、JMX 代理、服务器和客户端。现在我现在我的应用程序必须是一个 JMX 客户端并公开通用 MBean 以在我的应用程序之间进行某种通信，并且将来可能还有自己的管理控制台。

@Gray 指出我在问一些我想要的不同。现在我从基础学习JMX，有些方面已经很清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:30:21.820

**编辑：**

所以现在您似乎在谈论在一个盒子上运行的多个 JVM。通过使用代码，您*只能*`ManagementFactory.getPlatformMBeanServer()`访问当前 JVM 中的 bean 。如果您尝试查看另一个 JVM 实例上的 bean，那么您将不得不使用 JMX 客户端连接到该远程进程。使用我的[SimpleJMX](http://256stuff.com/sources/simplejmx/)包，您可以执行以下操作：

 *```
JmxClient client = new JmxClient("localhost", somePortNumber);
Set<ObjectName> objectNameSet = client.getBeanNames();
... 
```

这是[我的 JmxClient 的 javadocs](http://256stuff.com/sources/simplejmx/javadoc/simplejmx/com/j256/simplejmx/client/JmxClient.html)。当然还有其他客户这样做。Java 6+ 甚至可能内置了它们。我知道有一些方法可以在 Java 6+ 中以编程方式列出当前计算机上的 JVM 实例。我的 SimpleJMX 包不这样做。

* * *

我不确定我是否理解这个问题，但我认为您是在说您的`myApp`课程有多个实例，但您在 JMX 中只看到其中一个。

`ObjectName`如果您想通过 JMX 分别查看它们，您将不得不为每个类创建唯一的。通常，我们使用文件夹和 bean 名称（有时甚至是`System.identityHashCode(obj)`）来为对象的每个实例获取唯一的名称。

例如，我们有大量的计时器工厂 bean。它们的对象名称如下：

```
mprew:00=timers,name=MailServerTimerFactory
mprew:00=timers,name=MysqlManagerTimerFactory
mprew:00=timers,name=PointsTimerFactory 
```

它们都是同一个类，我们使用 spring bean 来专门识别它们。*

# ios - 是否可以让 UIImagePickerController.cameraOverlay UIView 留在相机控件后面？

> ID：11051059
> 
> 赞同：0
> 
> 时间：2012-06-15T12:55:12.237
> 
> 标签：ios, camera, overlay, uiimagepickercontroller

我有一种情况需要向用户展示带有叠加层的 Camera Capture。覆盖它只是一个标记要捕获的区域的矩形，外部边界有阴影。

所以，我想在相机控件后面展示这个叠加层。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:45:25.083

根据[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)，无法让您的叠加视图显示在内置相机控件的后面。

他们建议调整覆盖视图的大小和位置，使其不会干扰相机控件或隐藏内置相机控件并在子视图中构建您自己的控件。

# .net - 如果没有我设置它们，Url.Action 怎么能知道路由值？

> ID：11051063
> 
> 赞同：2
> 
> 时间：2012-06-15T12:55:32.337
> 
> 标签：.net, asp.net-mvc

我正在对 MVC 操作进行 jquery 发布。该操作返回一个带有（例如）Id = 123 的 json 结果。代码仍处于早期阶段，但我很惊讶地发现 Url.Action("action", "controller") 正在构建一个完整的 url id 我从 Json 返回。这是魔法吗？我找不到说明它这样做的文档。

```
// how I assumed it would need to be accomplished
// redirects to "Controler/Action/123123" where data = { id = 123 }
$.post(saveUrl, json, function (data) {
    var detailsUrl = "@Url.Action("Action", "Control")" + data.id;
    window.location = detailsUrl;
});

// rewritten without adding id to the route, not sure how this works...
// redirects to "Controler/Action/123" where data = { id = 123 }
$.post(saveUrl, json, function (data) {
    var detailsUrl = "@Url.Action("Action", "Control")";
    window.location = detailsUrl;
}); 
```

仅供参考，以下是操作：

```
[HttpPost]
public ActionResult Save(Model model)
{
    return new JsonResult { Data = new { id = 123 }};
} 
```

所以我想我的问题是，这是设计使然吗？它怎么知道使用什么？

* * *

正如答案中所指出的， Url.Action 可以访问现有的路由值并将尝试重用它们。为了解决这个问题，我使用了下面稍微有点hacky的解决方案：

```
var detailsUrl = "@Url.Action("Action", "Control", new { id = ""})" + "/" + data.id; 
```

这会清除路由值，以便我可以在客户端附加新的值。不幸的是，将 null 或 new {} 作为 RouteValues 传递给 Url.Action 并不能解决这个问题。更好的方法可能是创建另一个 Action 帮助器，以保证不会附加任何路由值。或者，还有 Url.Content，但这样做会丢失 IDE 中的 Action/Controller 接线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:58:45.057

（这[`UrlHelper`](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.aspx)是 的类型`Url`）可以访问用于访问当前操作的路由数据。除非您另行指定，否则它将尝试并使用这些值来为您填写必要的路线值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:27:23.597

> 这是设计使然吗？

这种神奇的发生是因为**路由**基础设施。有些人认为 MVC 路由仅用于处理传入请求**，但也涉及生成传出 URL**。

**ActionLink**和**UrlHelper**等 html 助手都与路由模块集成，当您尝试创建传出 URL 时，它们会检查您在 Global.asax.cs 中定义的路由模式并相应地创建 URL。

当您在 Global.asax.cs 中定义的架构更改时，生成的 URL 会相应更改，因此当您在应用程序中创建链接时，请依赖此帮助程序，而不是直接在控制器或视图中硬编码它们。

# php - 从 bash 执行 php 脚本，将输出分配给 bash 变量

> ID：11051064
> 
> 赞同：14
> 
> 时间：2012-06-15T12:55:38.137
> 
> 标签：php, bash

我有一个 bash 脚本，它需要执行一些 php 脚本并取回结果，例如

```
#!/bin/bash
/usr/bin/php -f $HOME/lib/get_fifobuild.php 
```

脚本 get_fifobuild.php 返回一个我需要分配给 bash 变量的整数。如果有人帮助我，我将不胜感激。

谢谢 ：）

**编辑：** php show.php

```
<?php 
  echo phpinfo();
  exit;
?> 
```

bash脚本：

```
#!/bin/bash
HOME=`dirname $0`;
log(){
    NEW_LOG=$HOME/logs/cloud-`date +%d_%m_%Y`.log
    echo $1 >> $NEW_LOG
}
log "Date: `date`";
data=$(/usr/bin/php -f  $HOME/lib/show.php);
log $data; 
```

输出：

```
Date: Fri Jun 15 19:16:00 PKT 2012
phpinfo() 
```

还没有运气

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T12:59:47.257

```
myvariable=$(/usr/bin/php -f $HOME/lib/get_fifobuild.php) 
```

将您的 php 脚本的输出分配给一个名为“myvariable”的变量。

**更新**：

这会将命令的输出分配给变量，但是由于您仍然遇到问题，我也许可以提出一些建议：

1.  你在别处有'get_builds.php'和'get_fifobuild.php'。

2.  检查 $HOME 是否设置正确。在这里使用不同的变量名称可能会更好，因为该环境变量通常设置为您的主目录。但是，这不太可能是问题，因为您正在从脚本中获取输出。

3.  您提供的文本是否与您的 PHP 文件的**确切**内容一致？例如，如果您有引号`phpinfo()`，它将导致输出只是字符串“phpinfo()”。实际上，您根本不需要`echo`，并且可以使您的 PHP 文件的内容如下。

get_fifobuild.php：

```
<?php
    phpinfo();
?> 
```

**更新 2：**

尝试将脚本更改为：

```
#!/bin/bash
HOME=`dirname $0`;
log(){
    NEW_LOG=$HOME/logs/cloud-`date +%d_%m_%Y`.log
    echo "$1" >> $NEW_LOG
}
log "Date: `date`";
data=$(/usr/bin/php -f $HOME/lib/show.php);
log "$data"; 
```

基本上在“log”和“echo”行中的变量周围添加双引号。您遇到的问题是只记录了您的 php 输出的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:00:05.610

```
foobar=`/usr/bin/php -f $HOME/lib/get_fifobuild.php` 
```

注意：这些是反引号。

# c++ - Node.js C++ 插件：线程

> ID：11051070
> 
> 赞同：13
> 
> 时间：2012-06-15T12:55:57.873
> 
> 标签：c++, node.js

我正在为 Node.js (wxWidgets) 编写一个 GUI 插件，我想在自己的线程中运行 GUI 循环，因为我认为将它与 Node 的主线程和事件循环合并不是一个好主意。

但是我不确定如何创建一个新线程。我让它运行`uv_queue_work()`。但它不会为 GUI 创建一个独占线程，而是使用 Node 的线程池。这可能是一个坏主意，因为工作人员将在整个运行时停留。（不确定这个）

我也可以使用 wxWidgets' `wxThread`，也可以。我`uv_thread_create`在 libuv git master 中发现了一个新功能。不知道如何使用它，因为没有描述，此外它在 Node.js 稳定版本中尚不可用。

我的问题：如果有的话，创建多线程 Node.js 插件的“标准”方法是什么？我查看了其他项目，但只能找到使用 libuv 的短时间运行的工作线程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-08T19:06:39.497

答案是你通常希望通过将你的工作提交到 uv 事件队列来使用 Nodejs 管理的后台线程，然后让 nodejs 操心如何创建和管理线程。

下面是 node.js v0.10 手册中缺少的样板示例。

```
struct Baton
{
    // we need this structure to interact with the uv
    // the uv_work_t must be the initial element and should store 
    // the callback function to be useful, but the rest
    // is user defined depending on what is needed to actually do the work.
    uv_work_t                    request;
    v8::Persistent<v8::Function> callback;
    // Add more elements to the structure as needed
    int                          countdown;
};

static void AsyncTestWork (uv_work_t* req);
static void AsyncTestAfter(uv_work_t* req,int status);
static Handle<Value> AsyncTestPrep(const Arguments& args) 
{
    HandleScope scope;
    if (args.Length() != 1) {
        ThrowException(Exception::TypeError(String::New("Wrong number of arguments -- needs (callback)")));
        return scope.Close(Undefined());
    }

    if (!args[0]->IsFunction()) {
        ThrowException(Exception::TypeError(String::New("Wrong type of arguments -- needs (callback)")));
        return scope.Close(Undefined());
    }

    v8::Local<v8::Function> callback = v8::Local<v8::Function>::Cast(args[0]);

    Baton* baton = new Baton();
    baton->request.data = baton;
    baton->callback = v8::Persistent<v8::Function>::New(callback);
    baton->countdown = 3;

    uv_queue_work(uv_default_loop(), &baton->request, AsyncTestWork, AsyncTestAfter);

    return scope.Close(v8::Undefined());
}

static void AsyncTestWork (uv_work_t* req)
{
    // This method will run in a seperate thread where you can do 
    // your blocking background work.
    // In this function, you cannot under any circumstances access any V8/node js
    // valiables -- all data and memory needed, MUSt be in the Baton structure
    Baton* baton = static_cast<Baton*>(req->data);
    sleep(6); // some fictional work, delaying the return....
    baton->countdown -= 1;  // my actual work in this 
}

static void AsyncTestAfter(uv_work_t* req,int status)
{
    // This is what is called after the 'Work' is done, you can now move any data from 
    // Baton to the V8/Nodejs space and invoke call back functions

    Baton* baton = static_cast<Baton*>(req->data);

    v8::Handle<v8::Value> argv1[] = { v8::Null(), Number::New(baton->countdown) };
    v8::Handle<v8::Value> argv2[] = { v8::Null(), Number::New(23) };

    v8::TryCatch try_catch;
       // Call back to the JS function, you can make as many/few callbacks  
       // as you need, they just go on the event loop queue for now.
       // Note: that it is mostly customary to call the callback  
       // function just (exactly) which is probably what you want  
       // to do to avoid confusing your users if you make a public api
       baton->callback->Call(v8::Context::GetCurrent()->Global(), 2, argv1);
       baton->callback->Call(v8::Context::GetCurrent()->Global(), 2, argv2);
    if (try_catch.HasCaught()) {
        node::FatalException(try_catch);
    }

    if (baton->countdown > 0) {
        // resubmit the worker for yet more work
        uv_queue_work(uv_default_loop(), &baton->request, AsyncTestWork, AsyncTestAfter);
    } else {
        // we are finished, clean up and be done
        baton->callback.Dispose();
        delete baton;
    }
}

void init(Handle<Object> exports) 
{

  exports->Set(String::NewSymbol("myAsyncTestFunction"),
               FunctionTemplate::New(AsyncTestPrep)->GetFunction());

} 
```

# android - 如何从 Android 活动创建可运行的 jar 文件

> ID：11051071
> 
> 赞同：0
> 
> 时间：2012-06-15T12:55:59.887
> 
> 标签：android

我试图通过将 Android 活动和 ksoap2 库包装在一起来创建一个可运行的 jar 文件。但是当我选择 File >> Export >> Runnable jar “Launch Configuration” 字段为空时。我怎么解决这个问题 ？

活动

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;

public class FrameWork extends Activity {

public SoapPrimitive responseWebImplement;
private String SOAP_ACTION;
private String METHOD_NAME;
private String NAMESPACE;
private String URL;
SoapObject request;

public void webImplement(String soapAction,String methodName,String nameSpace,String url){
    SOAP_ACTION = soapAction;
    METHOD_NAME = methodName;
    NAMESPACE = nameSpace;
    URL = url;

      request = new SoapObject(NAMESPACE, METHOD_NAME); 
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);

        HttpTransportSE ht = new HttpTransportSE(URL);

        try {

              ht.call(SOAP_ACTION, envelope);
              responseWebImplement = (SoapPrimitive)envelope.getResponse();

             }

        catch(Exception e){

        }
}
} 
```

我想制作一个包含此活动和 ksoap2 的 jar 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:08:19.817

如果您的活动有一个 UI，因此可能使用资源，那么您不能“创建一个包含 ksoap2 和我的公共类的单个 jar 文件”，因为您不能将这些资源打包在 JAR 中。

相反，您可以[创建一个](http://developer.android.com/guide/developing/projects/projects-eclipse.html#SettingUpLibraryProject)“包含 ksoap2 和我的公共类”以及任何所需资源的 Android 库项目，并且您可以在主应用程序项目中[使用该 Android 库](http://developer.android.com/guide/developing/projects/projects-eclipse.html#ReferencingLibraryProject)项目。

# ruby-on-rails - 在模块中声明一个类

> ID：11051073
> 
> 赞同：11
> 
> 时间：2012-06-15T12:56:00.980
> 
> 标签：ruby-on-rails, ruby, oop, class

测量工作代码（在一个名为 Surveyor 的模块中，不少于），试图理解它。我遇到了这个部分，它包含一个模块中的一个类。这与包含模块相同吗？如果不是，这样做有什么好处？谢谢。（奖励积分：为什么我们将 self 附加到类，这不是已经暗示了吗？）

```
module Surveyor
  class Common
    RAND_CHARS = [('a'..'z'), ('A'..'Z'), (0..9)].map{|r| r.to_a}.flatten.join
    OPERATORS = %w(== != < > <= >= =~)

    class << self
      def make_tiny_code(len = 10)
        if RUBY_VERSION < "1.8.7"
          (1..len).to_a.map{|i| RAND_CHARS[rand(RAND_CHARS.size), 1] }.join
        else
          len.times.map{|i| RAND_CHARS[rand(RAND_CHARS.size), 1] }.join
        end
      end

      def to_normalized_string(text)
        words_to_omit = %w(a be but has have in is it of on or the to when)
        col_text = text.to_s.gsub(/(<[^>]*>)|\n|\t/su, ' ') # Remove html tags
        col_text.downcase!                            # Remove capitalization
        col_text.gsub!(/\"|\'/u, '')                   # Remove potential problem characters
        col_text.gsub!(/\(.*?\)/u,'')                  # Remove text inside parens
        col_text.gsub!(/\W/u, ' ')                     # Remove all other non-word characters      
        cols = (col_text.split(' ') - words_to_omit)
        (cols.size > 5 ? cols[-5..-1] : cols).join("_")
      end

      def equal_json_excluding_wildcards(a,b)
        return false if a.nil? or b.nil?
        a = a.is_a?(String) ? JSON.load(a) : JSON.load(a.to_json)
        b = b.is_a?(String) ? JSON.load(b) : JSON.load(b.to_json)
        deep_compare_excluding_wildcards(a,b)
      end
      def deep_compare_excluding_wildcards(a,b)
        return false if a.class != b.class
        if a.is_a?(Hash)
          return false if a.size != b.size
          a.each do |k,v|
            return false if deep_compare_excluding_wildcards(v,b[k]) == false
          end
        elsif a.is_a?(Array)
          return false if a.size != b.size
          a.each_with_index{|e,i| return false if deep_compare_excluding_wildcards(e,b[i]) == false }
        else
          return (a == "*") || (b == "*") || (a == b)
        end
        true
      end

      alias :normalize :to_normalized_string

      def generate_api_id
        UUIDTools::UUID.random_create.to_s
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T13:00:30.343

> 这样做有什么好处？

它用作[命名空间](https://practicingruby.com/articles/uses-for-modules-1)，因此具有相同名称的类不会发生冲突（因此它与 mixins 无关）。这是标准的。

> 为什么我们将 self 附加到类，这不是已经暗示了吗？

这只是[定义类方法](http://blog.jayfields.com/2007/10/ruby-defining-class-methods.html)的一种方式（另一种是`def self.method_name`）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-15T13:03:38.873

> 这与包含模块相同吗？

不，当你有`module Foo; end`然后做

```
class Bar
  include Foo
end 
```

您最终会得到一个`Bar`包含模块所有方法的类`Foo`。但是当我们这样做时

```
module Foo
  class Bar
  end
end 
```

我们最终得到一个`Foo::Bar`不包含任何方法的`Foo`类`Bar`

> 这样做有什么好处？

如果需要，它允许您组织代码。

> 为什么我们将 self 附加到类，这不是已经暗示了吗？

不，它还没有“暗示”。这样做相当于用`self.`like定义该块中的每个方法`def self.mymethod; end`。请参阅[Ruby 中的 class << self idiom](https://stackoverflow.com/questions/2505067/class-self-idiom-in-ruby)。

# php - 如何在 php 中使用 clickbank api？

> ID：11051074
> 
> 赞同：0
> 
> 时间：2012-06-15T12:56:02.803
> 
> 标签：php, api, clickbank

我正在尝试使用 clickbank 的沙盒 api 的准备方法。

我的代码

```
 $ch = curl_init(); 
       curl_setopt($ch, CURLOPT_URL, "https://sandbox.clickbank.com/rest/1.2/sandbox/prepare");
       curl_setopt($ch, CURLOPT_HEADER, true);
       curl_setopt($ch, CURLOPT_POST, true);`enter code here`
       curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
       curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml","Authorization:DEV-  9B0D426BC6C70C4618F37D41B7E01877E731:API-D34454EDE1D2D8F45A62588CBF1DDC6B29B2"));

       $result = curl_exec($ch);
       curl_close($ch);

      print $result;
   ?> 
```

但它给了我这个错误

> “HTTP/1.1 500 内部服务器错误日期：2012 年 6 月 15 日星期五 11:30:18 GMT 服务器：Apache/2.2.22 (FreeBSD) mod_jk/1.2.32 mod_ssl/2.2.22 OpenSSL/0.9.8q 内容长​​度： 409 连接：关闭内容类型：文本/html 内部服务器错误 1"

我尝试了很多其他方法，但它总是给我 404 或 403 或 500 http 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:12:59.537

尝试这个：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://sandbox.clickbank.com/rest/1.3/sandbox/prepare");

curl_setopt($ch, CURLOPT_HEADER, false);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept:application/json", "Authorization: DEV-9B0D426BC6C70C4618F37D41B7E01877E731"));

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');

$return = curl_exec($ch);

curl_close($ch); 
```

# android - 如何减少 odata4j 发送的 HTTP 请求的超时

> ID：11051075
> 
> 赞同：1
> 
> 时间：2012-06-15T12:56:04.917
> 
> 标签：android, odata4j

我正在尝试在移动 Android 应用程序中使用 odata4j 库。有时 HTTP 请求没有得到响应，因为设备在发送请求后就失去了移动连接。在几次尝试重现它并对其计时后，我注意到库大约需要 27 分钟才能抛出“java.net.SocketException: Connection timed out”。有什么办法可以减少这个超时，让我可以更快地处理故障？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T12:11:27.923

使用 jersey 消费者实现（这是默认设置）。在构建消费者时添加 JerseyClientBehavior [1]。这允许您修改 ClientConfig [2] - 您可以修改连接 + 读取超时。

[1] [http://code.google.com/p/odata4j/source/browse/odata4j-jersey/src/main/java/org/odata4j/jersey/consumer/behaviors/JerseyClientBehavior.java](http://code.google.com/p/odata4j/source/browse/odata4j-jersey/src/main/java/org/odata4j/jersey/consumer/behaviors/JerseyClientBehavior.java)

[2] [http://jersey.java.net/nonav/apidocs/1.1.5.1/jersey/com/sun/jersey/api/client/config/ClientConfig.html](http://jersey.java.net/nonav/apidocs/1.1.5.1/jersey/com/sun/jersey/api/client/config/ClientConfig.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T11:13:40.797

我想为[@John Spurlock answer](https://stackoverflow.com/a/11082575/624706)提供代码片段。通过类比此代码[http://code.google.com/p/odata4j/source/browse/odata4j-jersey/src/main/java/org/odata4j/jersey/consumer/behaviors/AllowSelfSignedCertsBehavior.java](http://code.google.com/p/odata4j/source/browse/odata4j-jersey/src/main/java/org/odata4j/jersey/consumer/behaviors/AllowSelfSignedCertsBehavior.java)：

```
private static ODataJerseyConsumer createOdataConsumer(final String odataServerUrl) {

    Builder builder = ODataJerseyConsumer.newBuilder(odataServerUrl);
    builder.setClientBehaviors(TimeoutBehavior.reduceTimeout());
    return builder.build();
}

private enum TimeoutBehavior implements JerseyClientBehavior {
    INSTANCE;

    @Override
    public ODataClientRequest transform(final ODataClientRequest request) {

        return request;
    }

    @Override
    public void modify(final ClientConfig clientConfig) {

        Map<String, Object> properties = clientConfig.getProperties();
        properties.put(ClientConfig.PROPERTY_CONNECT_TIMEOUT, 10 * 1000);
        properties.put(ClientConfig.PROPERTY_READ_TIMEOUT, 10 * 1000);
    }

    @Override
    public void modifyClientFilters(final Filterable filterable) {}

    @Override
    public void modifyWebResourceFilters(final Filterable filterable) {}

    public static OClientBehavior reduceTimeout() {

        return TimeoutBehavior.INSTANCE;
    }
} 
```

# mysql - 使用 MySQL LIKE 仅查找以数字开头的字符串

> ID：11051079
> 
> 赞同：4
> 
> 时间：2012-06-15T12:56:18.267
> 
> 标签：mysql

如何在第一个字符是数字的表中找到字符串？

我正在使用 MySQL LIKE 如下

```
SELECT   DISTINCT label_no_country
FROM     releases
WHERE    label_no_country LIKE '$letter%'  
ORDER BY label_no_country 
```

AZ之间的字母在哪里`$letter`（取决于输入）

因此，如果`$letter == 'A'`这样，它将显示第一个字母为 A 的所有条目。

如何运行此查询以显示以数字开头的记录？

例如

```
1st record 
```

干杯！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-15T12:59:14.160

您可能想使用正则表达式：

```
SELECT DISTINCT label_no_country FROM releases 
WHERE label_no_country 
REGEXP '^[0-9]' 
```

有关详细信息，请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:59:43.770

```
WHERE label_no_country >= '0' AND label_no_country <= '9zzzzzzzzzzzzz' -- Insert as many z:s as the field can hold 
```

**编辑：** 或者更好的是，只需在整理序列中放入 9 之后的字符：

```
WHERE label_no_country >= '0' AND label_no_country < ':' -- assuming : is the character after 9 in your collating sequence 
```

# android - Android中的类似UIPopoverViewController的元素

> ID：11051080
> 
> 赞同：1
> 
> 时间：2012-06-15T12:56:20.190
> 
> 标签：android, ipad, uipopovercontroller, android-4.0-ice-cream-sandwich, uipopover

我现在正在将一个 iPad 应用程序移植到 Android 平板电脑上，它使用了很多 UIPopoverViewController。我尝试创建一个“布局”以全屏显示在前面，并带有一个小的内容视图，效果很好，但我想知道这种功能是否有原生元素。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:01:39.513

为了帮助解决这个问题，我创建了一个类似于弹出视图的组件。一定要检查出来:)

[https://github.com/lupidan/PopoverView](https://github.com/lupidan/PopoverView) ![截屏](../Images/0a9964cafa8c51a4d399e2a7525dc45e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:57:41.607

我认为您在 Android 中要求 QuickActionController。而且我认为 Android 中没有可用的本机元素。但是下面的示例仍然使用带有一些动画的弹出对话框来使其看起来像 popoverviewController，这是一个开始的示例，

[http://www.edumobile.org/android/android-apps/quick-action-demo/](http://www.edumobile.org/android/android-apps/quick-action-demo/)

[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

![在此处输入图像描述](../Images/8823fc9a4665fd4a89a11b8b39696e8f.png)

# sql - BizTalk 是否支持子查询？

> ID：11051081
> 
> 赞同：0
> 
> 时间：2012-06-15T12:56:22.273
> 
> 标签：sql, oracle, biztalk, biztalk-2010

下面的查询在 Oracle 中有效，但在 BizTalk 中无效。一个快速的谷歌告诉我

> “多个语句不适用于 Oracle（其他数据库也可能阻止这种情况）。Oracle 阻止了所谓的 SQL 注入，这是黑客用来让数据库在数据库中运行代码的机制。”

这和子查询一样吗？是否可以在没有子查询的情况下编写此查询？

```
update order_header oh set uploaded = 'Y'
where oh.user_def_chk_3 = 'N' 
and oh.status in('Complete','Shipped') 
and oh.client_id in (select c.client_id from client c 
    where upper(c.notes) like 'BERGEN%'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:45:25.607

（基于来自猜测评论的反馈）：BizTalk 显然将尾随解释`;`为语句分隔符，因此它违反了多语句限制，即使它实际上只有一个。删除分号将防止这种情况发生。

请参阅[此答案](https://stackoverflow.com/a/10207695/266304)以了解为什么它经常在 SQL*Plus 和 SQL Developer 等中使用，即使对于单个语句也是如此。其他客户端和适配器的情况有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:10:45.243

您可以将查询放在存储过程或视图中。你没有说你是如何执行查询的。您使用的是 WCF 自定义适配器吗？

# r - 作用于多个列表

> ID：11051087
> 
> 赞同：0
> 
> 时间：2012-06-15T12:56:47.220
> 
> 标签：r, list, sapply

我不使用那么多函数，但是当我这样做时，我倾向于使用 anon 函数和某种形式的`apply`. 然而，我现在正在尝试编写一个适用于列表中项目的函数。

有两个列表，每个列表都有很多项目（我的意思是例如项目`mylist1[1]`）。所有项目都是数据框。我想从中获取第一个数据帧`mylist1`和第一个数据帧，`mylist2`并在这些数据帧中的列上运行一堆函数。然后拿第二个`mylist1`项目和第二个`mylist2`项目等等......

下面是我习惯写的那种东西，但在这种情况下显然不适用于两个列表。谁能帮助我快速找出我应该如何使用`sapply`似乎导致主要问题的方法以外的方法来解决这个问题。

```
a <- c(1:10)
b <- c(1:10)
z <- c(rep("x", 5), rep("y", 5))
df <- data.frame(cbind(a, b, z))
mylist1 <- split(df, z)
mylist2 <- split(df, z)

myfunction <- function(x, y) 
{

    a <- as.data.frame(x[1])
    b <- as.data.frame(y[1])
    meana <- mean(a[1])
    meanb <- mean(b[1])
    model <- lm(a[1]~b[1])
    return(c(model$coefficients[2], meana, meanb))
}

result <- sapply(mylist1, mylist2, myfunction) 
```

我也只是认为人们是否认为这样做会更好`subset`，`z`而不是`split`那样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:16:15.417

您正在准确描述`mapply`.

```
result <- mapply(myfunction,x=mylist,y=mylist2) 
```

不幸的是，您的示例似乎不喜欢传递两个 data.frames（x, y 的第一个元素都是 data.frames，这`x[1]`似乎`y[1]`相互矛盾）。

# xml - SOAP 规范是否允许标头和信封之间的非 xml 内容

> ID：11051088
> 
> 赞同：0
> 
> 时间：2012-06-15T12:56:48.230
> 
> 标签：xml, http, soap

根据 SOAP 规范是否允许以下​​内容？

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset="utf-8"

000 OK.
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
   <SOAP-ENV:Body>
       <m:GetLastTradePriceResponse xmlns:m="Some-URI">
            <Price>34.5</Price>
       </m:GetLastTradePriceResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

注意“000 OK”。我在官方规范中找不到任何关于它的信息：http: [//www.w3.org/TR/2000/NOTE-SOAP-20000508/](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:58:51.117

我不这么认为..但是您可以添加自定义标头来包含该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:39:46.857

我确定规范说有效负载需要是 XML。这不是 XML。

# asp.net - 使用 windows azure 时的开发差异

> ID：11051090
> 
> 赞同：3
> 
> 时间：2012-06-15T12:56:56.307
> 
> 标签：asp.net, asp.net-mvc, azure, cloud

我的问题有两个部分，我知道它们是基本的，但无法清除想法，所以发布了这个。

我们计划在 Windows azure 上构建一个新应用程序。在阅读了一些关于云的文章后，我在云上构建了一个示例应用程序，它执行像 CRUD 这样的基本操作。

1.  所以我想知道你们在使用 azure 应用程序时感受到的所有根本区别。我已经使用 MVC 作为框架构建了应用程序。在使用 MVC 的普通 Web 应用程序和使用 MVC 的云应用程序编写代码方面，我并没有感觉到太大的不同。构建云应用程序时有哪些待办事项？

2.  我们计划聘请一些有使用 Windows azure 的经验的人，市场上有几个猎头用成堆的简历轰炸你。虽然人们没有在 Windows azure 上工作过，但他们只是包含在简历中。如何评估候选人以判断他在云计算方面的潜力。对此的任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T01:03:37.387

**一、根本区别**

Windows Azure 将与 ASP.NET 一起正常工作。考虑到 VM 是 Windows Server 2008 R2/SP2，您无能为力。本地应用程序和 Windows Azure 应用程序之间的最大区别在于这些 VM 的行为方式、Windows Azure 如何管理 SLA 和可用性、如何完成底层来宾和主机操作系统维护等等。想到的几件事：

*   负载均衡。无法将流量定向到一组 Web 或 Worker 角色实例中的特定 VM 实例（除非您构建自己的请求路由器）。所以你需要为无国籍做计划
*   会话管理。与第一点有关。不能使用 inproc，需要使用缓存、表存储或 SQL 提供程序，它们可以提供无缝的会话体验。
*   服务。Windows Azure 提供身份管理、缓存、流量管理器（跨数据中心的负载平衡）、CDN（blob 边缘缓存）、blob 存储、表存储（无模式、NoSQL）等。您需要仔细查看这些服务，看看它们如何最适合您的应用程序。例如：表存储扩展到每个帐户 100TB 并且每 GB 成本非常低，但是您的程序员将需要学习一种新的内容持久性方法，特别是如果他们习惯于 SQL Server。
*   部署。您需要了解如何维护、监控、扩展和升级应用程序。
*   可用性。您需要了解 Windows Azure 如何管理您的操作系统（除非您使用自己管理的虚拟机），如何处理故障（例如硬件故障）
*   安全。Windows Azure SQL 数据库安全不同于 SQL Server 安全。

**2\. 面试**

架构技能至关重要。可以更轻松地学习编程技能，尤其是使用[Windows Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)或一些好书。这只是我在面试 Windows Azure 项目的候选人时会询问的事情的快速列表。经验丰富的 Windows Azure 开发人员将能够处理其中的大部分。

*   描述他们将组合（或分离）任务到相同（或分离）角色的场景
*   解释如何监控和扩展应用程序
*   了解升级应用程序的各个方面
*   了解如何安装和运行第 3 方工具和替代（非 .NET）语言
*   成本与性能与可用性的架构师
*   了解存储解决方案（SQL、3rd-party SQL & NoSQL、blob/tables/queues）
*   了解 Windows Azure 队列与服务总线队列的优缺点
*   SQL Server 和 Windows Azure SQL 数据库之间的差异，包括联合、安全性、瞬态故障、跨数据库查询和事务
*   了解内容交付网络边缘缓存的功能（和限制）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T15:31:46.763

1）如你所说；差别不大。我真的很喜欢队列，它们让构建异步进程变得轻而易举。在没有 OPS 帮助的情况下启动环境的能力可以节省大量时间。对我来说最大的不利因素是部署所需的时间。在内部，TeamBuild 可以在不到 1 分钟的时间内将其安装在我的测试服务器上。使用 Azure，它可能长达 30 分钟，具体取决于该数据中心的一天中的时间/使用情况。

2) 除了一些关于连接 ACS / ADFS 的特殊知识外，我不确定寻找具有 Azure 经验的人会给你带来什么。这真的就像编写一个内部应用程序一样。人们在简历上写了各种各样的废话，只是为了进门，希望你不会注意到。只是在他们说他们能做的所有你认为你需要他们能够做的事情上烧烤他们。也许让他们做一个场景，他们必须登录到 Azure 门户并启动一个新的主机/数据库。让他们部署一个包。让他们对云项目进行一些更改（连接字符串、虚拟机大小、实例）。让他们调试一个工人角色项目。如果他们不能做那件事，你就知道他们在撒谎。我今天正在采访一个在一项技能上使用形容词“巨大”的人。你可以打赌我会瞄准那个！

# c# - 每次单击按钮时如何添加新字段

> ID：11051091
> 
> 赞同：0
> 
> 时间：2012-06-15T12:56:57.627
> 
> 标签：c#, asp.net

每次单击按钮时，我都想创建一个新的文件上传字段。我在页面中有一个表单，我想将字段添加到该表单。我试图在会话中保存一组文件上传字段，但它似乎不起作用。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
        this.Session["fileUploadArray"] = new FileUpload[5];

}
protected void Button1_Click(object sender, EventArgs e)
{
    FileUpload[] flArray = ((FileUpload[])(this.Session["fileUploadArray"]));
    for (int i = 0; i < flArray.Length; i++)
    {
        if (flArray[i] == null)
        { 
            flArray[i] = new FileUpload();
            form1.Controls.Add(flArray[i]);
            this.Session["fileUploadArray"] = flArray;
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:08:11.503

必须在 Page_Init 事件中添加动态控件，请参阅我在以下帖子中的回答：

[动态生成的按钮，点击时未执行](https://stackoverflow.com/questions/11047371/dynamically-generated-buttons-on-click-not-being-executed/11047482#11047482)

# javascript - tinyMCE 选项

> ID：11051093
> 
> 赞同：4
> 
> 时间：2012-06-15T12:57:21.383
> 
> 标签：javascript, jquery, tinymce

如何`readonly`在初始化的 tinyMCE 容器中切换状态？

虽然 tinyMCE 在通用 javascript 文件中初始化，但我要更改的选项特定于单个页面的逻辑，并根据用户通过复选框的输入进行更改。

这是我尝试过的一些事情，但都导致失败： http: [//pastebin.com/JEn2fyE6](http://pastebin.com/JEn2fyE6)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T15:37:44.610

我只是设法这样做：

拥有`textarea`带有 id 的集合`intro`我这样做

```
if($('.disabled_check').is(':checked')) {
    $('#intro_ifr').contents().find('body').attr('contenteditable', false);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:01:41.187

所以你想 在初始化之后设置这个选项[http://www.tinymce.com/wiki.php/Configuration:readonly 。](http://www.tinymce.com/wiki.php/Configuration:readonly)根据这个线程：[http](http://www.tinymce.com/forum/viewtopic.php?id=15488) ://www.tinymce.com/forum/viewtopic.php?id= 15488 根据tinymce论坛的人不能这样做。

这个 SO 答案似乎有效：[Set TinyMCE Editor Param after Initialized](https://stackoverflow.com/questions/8946391/set-tinymce-editor-param-after-initialized)

```
tinymce.activeEditor.getBody().setAttribute('contenteditable', false); 
```

如果没有，本主题有**一个解决方法**：http : [//forum.morfik.com/posts/21058](http://forum.morfik.com/posts/21058)创建两个tinymce 实例，一个是只读的，一个是正常的，只显示所需的一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-06T16:05:33.940

请检查此代码

`setTimeout(function () { for (var i = 0; i < tinymce.editors.length; i++) { tinymce.editors[i].getBody().setAttribute('contenteditable', false); }; },1000);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:13:26.960

您可以在使用初始化后设置此设置

`tinymce.get('my_editor_id').settings.readonly = false;`

但这不会以您希望的方式影响编辑器的行为，因为相关部分是在初始化时处理的。

这里的工作方法是 JP Hellemons 已经说过的。

# android - 在类之间共享意图

> ID：11051098
> 
> 赞同：0
> 
> 时间：2012-06-15T12:57:30.363
> 
> 标签：android, android-intent, nfc, intentfilter, android-pendingintent

我正在开发一个读取和接收 Android NFC 标签的应用程序，特别是我想将意图 NFC.NDEF_DISCOVERED 用于管理的活动。Activity A 收到一个 NDEFMessage 并调用 Activity B 对 NDEF 消息执行操作。我该怎么办？我阅读了有关 Android Intent 的文档，但我不清楚。所以，请不要回答我“阅读 Android 文档”。

# iphone - 迁移到 ARC 后应用程序中的错误

> ID：11051103
> 
> 赞同：0
> 
> 时间：2012-06-15T12:57:54.830
> 
> 标签：iphone, ios, automatic-ref-counting

我有一个没有使用 ARC 编写的应用程序，现在我添加了 ARC，并且我不再打开一些运行良好的 ViewController。错误是：EXC_BAD_ACCESS、SIGBRT、ecc。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:59:51.133

如果您不需要在这些视图控制器上使用 ARC，您始终可以使用此问题的答案在它们上禁用 arc[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

# jsp - jsp如何向servlet发送请求参数

> ID：11051109
> 
> 赞同：0
> 
> 时间：2012-06-15T12:58:07.310
> 
> 标签：jsp

我是 jsp 新手，刚刚构建了我的第一个应用程序。我正在关注一本书。这本书使用了一个代码

```
<form name="addForm" action="ShoppingServlet" method="post">
    <input type="hidden" name="do_this" value="add">

    Book:
    <select name="book">                   

    <%  
        //Scriplet2: copy the booklist to the selection control
        for (int i=0; i<bookList.size(); i++) {

            out.println("<option>" + bookList.get(i) + "</option>");

         } //end of for
     %>                   
     </select>

     Quantity:<input type="text" name="qty" size="3" value="1">               
     <input type="submit" value="Add to Cart">

</form> 
```

在servlet中，代码是

```
else if(do_This.equals("add")) {

    boolean found = false;
    Book aBook = getBook(request);
    if (shopList == null) { // the shopping cart is empty

        shopList = new ArrayList<Book>();
        shopList.add(aBook);

    } else {...  }// update the #copies if the book is already there

private Book getBook(HttpServletRequest request) {

    String myBook = request.getParameter("book");   //confusion
    int n = myBook.indexOf('$');
    String title = myBook.substring(0, n);
    String price = myBook.substring(n + 1);
    String quantity = request.getParameter("qty");  //confusion
    return new Book(title, Float.parseFloat(price), Integer.parseInt(quantity));

} //end of getBook() 
```

我的问题是，当我单击添加到购物车按钮时，然后在 serverlt 行中`String myBook = request.getParameter("book");`我将 book 作为参数，但在我的 jsp 中我没有这么说`request.setAttribute("book", "book")`，对于`request.getParameter("qty");`. 我的 servlet 如何在没有在 jsp 代码中设置的情况下接收这些请求参数？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:00:12.210

你得到那个参数是因为在你的表单中你有这个：

```
<select name="book"> 
```

用户从不做`request.setParameter`（甚至没有定义这样的方法）

您还可以通过使用查询字符串调用 servlet 来设置参数。就像是：

```
http://localhost:8080/ShoppingServlet?name=abcd&age=20 
```

以上将创建两个名为的请求参数`abc`，`age`您可以使用它们访问`request.getParameter`

# perl - 访问同一网络上的计算机

> ID：11051113
> 
> 赞同：1
> 
> 时间：2012-06-15T12:58:19.150
> 
> 标签：perl, networking, command-line, network-programming, automation

在计算机 A（我的计算机）上，我有一个 Perl 脚本，它访问计算机 B 上的文件目录，计算机 B 是同一网络上的计算机。我的 Perl 脚本访问那台计算机，因为我已将它链接到我的 R:drive。

现在假设我希望计算机 C（专为自动化设计的计算机）运行此脚本。我**无法**将计算机 B 映射到驱动器，因为计算机 C 仅用于自动化。我可以访问计算机 C 的命令行，并在其上运行 Jenkins 以实现自动化。

更复杂的是，计算机 B 需要用户名和密码才能登录。

为了映射它，我输入了典型的 12.345.67.89 以及用户名和密码。同样，计算机 C 没有监视器，无法手动执行此操作。

所以这是我的问题：Perl**或**命令行是否有能力做到这一点？本质上，每次我想访问必要的文件时，我可以使用用户名和密码登录这台网络计算机进行单个会话吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:16:31.213

如果您只想从命令行映射驱动器，那很容易。

[净使用](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/net_use.mspx?mfr=true)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T14:01:46.813

您可以通过[UNC 路径](http://en.wikipedia.org/wiki/Path_%28computing%29)访问计算机 B 上的资源。无需映射/挂载磁盘。只需确保将运行代码的 AD 用户有权访问目标位置，您无需担心身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:17:09.120

您可以使用外部命令安装驱动器`net use x: \\computer name\share name`。要运行此命令，您可以使用`open(PIPE, "command|")`构造。

# jquery - jquery显示元素问题

> ID：11051116
> 
> 赞同：1
> 
> 时间：2012-06-15T12:58:38.860
> 
> 标签：jquery, css

我已经在网站上实现了 jquery（点击加号） [http://pligg.marsgibson.info](http://pligg.marsgibson.info) 问题是在页面加载它首先显示摘要然后隐藏它

我也没有显示；到我的 style.css .toggle_container

但是这样做完全隐藏了摘要（我想在单击加号时显示）这里是 jquery [http://pligg.marsgibson.info/templates/wistie/js/toggle.js](http://pligg.marsgibson.info/templates/wistie/js/toggle.js)的链接 什么可能修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:42:54.297

尝试这个

```
dd { display: none; } 
```

dd 不是一个类，因此 .dd 不起作用。如果您想在其他地方使用 dd ，可能更安全地定位 .headline dd 以获得更精确的隐藏

```
.headline dd { display: none; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:00:54.827

尝试隐藏在css `$('dd').hide();`而不是js中。因为js比较慢，隐藏元素需要一些时间

前任：

```
.dd{
 display:none;
} 
```

# android - 是否可以获得进程 TCP 连接的 5 元组？

> ID：11051122
> 
> 赞同：0
> 
> 时间：2012-06-15T12:59:08.860
> 
> 标签：android, ip

我有一个要监视的进程的 UID，为此我需要以编程方式获取 5 元组（源 IP 地址、目标 IP 地址、源端口号、目标端口号和使用的协议）并且没有root访问权限。

这甚至可能吗？（如果是，如何？）

先感谢您

//Q

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:27:20.843

由于 Android 是基于 Linux 的，因此 /proc/net/ 中有四个文件。TCP、TCP6、UDP 和 UDP6 的一个分别保存所有连接的信息及其对应的进程 ID。为了获得这些信息，我首先通过以下方式获得了所有已安装应用程序的列表

```
ActivityManager actvityManager = (ActivityManager)
this.getSystemService( ACTIVITY_SERVICE );
List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses(); 
```

然后只需将进程名称与您感兴趣的进程进行匹配以获取 proc id 并解析 tcp 文件以匹配与进程 id 的连接。

# jquery - 试图在 JQuery 中截断字符串并用 ... 替换

> ID：11051133
> 
> 赞同：1
> 
> 时间：2012-06-15T12:59:31.790
> 
> 标签：jquery, truncate

**编辑2：**

**我刚刚意识到我的 HTML 只显示艺术家和歌曲，而不是专辑，这就是为什么当我有**

```
alert(album); 
```

**在那里我得到了意想不到的结果。jQuery 修剪现在按预期工作。脸红感谢您的回答，我将保留其他脚本。**

我正在使用 JQuery 来获取 lastfm 用户播放的最后 10 首歌曲并显示它们。

我想将专辑名称截断为 x 个字符并替换为 ...

字符串是：

```
album = item.album['#text']; 
```

它显示在这里：

```
$current.find('[class=lfm_album]').append(album); 
```

我试过使用：

```
var shortText = jQuery.trim(album).substring(0, 10)
    .split(" ").slice(0, -1).join(" ") + "..."; 
```

但它只显示完整的专辑字符串，似乎没有多少摆弄或 javascript 工作。

**编辑：**

我刚试过

```
album = item.album['#text'];
alert(album); 
```

看看它的想法，我得到了一些与脚本生成的任何其他字符串都不匹配的结果，所以现在真的被卡住了！

完整的脚本如下：

```
/*---------------
 * jQuery Last.Fm Plugin by Engage Interactive
 * Examples and documentation at: http://labs.engageinteractive.co.uk/lastfm/
 * Copyright (c) 2009 Engage Interactive
 * Version: 1.0 (10-JUN-2009)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Requires: jQuery v1.3 or later
---------------*/

(function($){
    $.fn.lastFM = function(options) {

        var defaults = {
            number: 5,
            username: 'xxxxxxx',
            apikey: 'xxxxxxxx',
            artSize: 'medium',
            noart: 'images/noartwork.gif',
            onComplete: function(){}
        },
        settings = $.extend({}, defaults, options);

        var lastUrl = 'http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user='+settings.username+'&api_key='+settings.apikey+'&limit='+settings.number+'&format=json&callback=?';
        var $this = $(this);

        var container = $this.html();

        $this.children(':first').remove();

        if(settings.artSize == 'small'){imgSize = 0}
        if(settings.artSize == 'medium'){imgSize = 1}
        if(settings.artSize == 'large'){imgSize = 2}

        this.each(function() {

            $.getJSON(lastUrl, function(data){ 
                $.each(data.recenttracks.track, function(i, item){

                    if(item.image[1]['#text'] == ''){
                        art = settings.noart;
                    }else{
                        art = stripslashes(item.image[imgSize]['#text']);
                    }

                    url = stripslashes(item.url);
                    song = item.name;
                    artist = item.artist['#text'];
                    album = item.album['#text'];
// this is the part where I try to truncate "album"
var shortText = $.trim(album).substring(0, 10)
    .split(" ").slice(0, -1).join(" ") + "...";

                    $this.append(container);

                    var $current = $this.children(':eq('+i+')');

                    $current.find('[class=lfm_song]').append(song);
                    $current.find('[class=lfm_artist]').append(artist);
                    //$current.find('[class=lfm_album]').append(album);
                    $current.find('[class=lfm_album]').append(shortText);
                    $current.find('[class=lfm_art]').append("<img src='"+art+"' alt='Artwork for "+album+"'/>");
                    $current.find('a').attr('href', url).attr('title', 'Listen to '+song+' on Last.FM').attr('target', '_blank');

                    //callback
                    if(i==(settings.number-1)){
                        settings.onComplete.call(this);
                    }

                });
            });
        });
    };

    //Clean up the URL's
    function stripslashes( str ) {   
        return (str+'').replace(/\0/g, '0').replace(/\\([\\'"])/g, '$1');
    }
})(jQuery); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:03:52.153

```
if (album.length > 10) {
        album = album.substring(0, 10) + "...";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:31:02.883

如果您尝试在第 10 个字符后用空格截断专辑/标题，您可以使用该`indexOf`方法

```
var album = "   This is the're long title of the album    ";

album = $.trim(album); //make sure to trim the album first
if (album.length > 10) {
  //the indexOf will return the position of the first space starting from the 10th
   alert(album.substring(0, album.indexOf(' ',10)) + "...");
} 
```

来源[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/string/indexOf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:05:27.003

```
album = item.album['#text'];
var x = 10;

if(str.length > x) {
    album = str.substr(0,x) + "...";    
} 
```

# c# - 在 ASP.NET 中，如何设置需要授权的页面？

> ID：11051137
> 
> 赞同：0
> 
> 时间：2012-06-15T12:59:44.860
> 
> 标签：c#, xml, vba

我不是说形式认证。您知道某些网页是如何在浏览器中弹出一个带有“此网页需要授权”的内容的吗？您必须输入用户名/密码，否则会返回“HTTP 状态代码 - 401 未经授权”错误？你是怎么设置的？

我假设这是用帖子标题完成的，对吗？因为它没有表格。

* * *

在客户端。我使用以下代码使用 ServerXMLHTTP 发布：

```
Dim connection As ServerXMLHTTP
Dim inXML As MSXML2.DOMDocument
Dim outXMLstr, inXMLstr As String
Dim itemsList As IXMLDOMNodeList
Dim itemNode As MSXML2.IXMLDOMNode
Set connection = New ServerXMLHTTP
Set inXML = New DOMDocument
Dim name As String
connection.Open "POST", "http://localhost:46284/", False, CStr("user"), CStr("pass") 
```

换句话说，我如何通过上面的代码在服务器端验证“用户”和“通过”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:02:05.470

在 IIS 上为您的站点设置基本身份验证

> **使用用户界面**
> 
> 打开 IIS 管理器并导航到要管理的级别。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。有关导航到 UI 中的位置的信息，请参阅 IIS 管理器中的导航 (IIS 7)。
> 
> *   在功能视图中，双击身份验证。
> *   在身份验证页面上，选择基本身份验证。
> *   在“操作”窗格中，单击启用以使用具有默认设置的基本身份验证。
> *   或者，在“操作”窗格中，单击“编辑”以键入默认域和领域。
> *   在“编辑基本身份验证设置”对话框的“默认域”文本框中，键入默认域或将其留空。登录到您的站点时未提供域的用户将根据该域进行身份验证。
> *   在领域文本框中，键入领域或将其留空。通常，您可以对领域名称使用与默认域相同的值。
> 
> > 重要如果您在领域文本框中输入默认域名，您的内部 Microsoft Windows 域名可能会在用户名和密码质询期间暴露给外部用户。
> 
> *   单击“确定”关闭“编辑基本身份验证设置”对话框。

[配置基本身份验证 (IIS 7)](http://technet.microsoft.com/en-us/library/cc772009%28v=ws.10%29.aspx)

# apache - 带有 kerberos + mod_proxy + mod_rewrite 递归的 Apache

> ID：11051142
> 
> 赞同：4
> 
> 时间：2012-06-15T13:00:01.350
> 
> 标签：apache, mod-rewrite, kerberos, mod-proxy, splunk

我已经按照下面的配置配置了一个 Apache 服务器来为我们的 Splunk 安装提供 SSO 和反向代理。SSO 的工作方式与将运行在端口 8000 上的 Splunk 实例隐藏在 /splunk URL 后面的反向代理一样工作。

```
ProxyPass /splunk http://localhost:8000/splunk
ProxyPassReverse /splunk http://localhost:8000/splunk
<Location /splunk >
        # Kerberos Authentication
        AuthType Kerberos
        AuthName "Kerberos Login"
        KrbAuthRealms MYDOMAIN.COM
        Krb5KeyTab /etc/krb5.http.keytab
        KrbMethodNegotiate on
        KrbAuthoritative on
        KrbMethodK5Passwd off
        KrbLocalUserMapping on
        KrbSaveCredentials on
        require valid-user

        # SSO
        RewriteEngine On
        RewriteCond %{LA-U:REMOTE_USER} (.+)$
        RewriteRule . - [E=RU:%1]
        RequestHeader set REMOTE_USER %{RU}e
</Location> 
```

问题出在 Apache 日志中，我收到很多以下错误消息。

```
[client x.x.x.x] Request exceeded the limit of 10 subrequest nesting levels due to probable confguration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace., referer: http://splunk.mydomain.com/splunk/en-GB/debug/sso 
```

我不确定这个问题是否与 Splunk 有关。有没有其他人看到这个，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T09:49:24.773

尝试

```
RewriteRule . - [E=RU:%1,NS] 
```

确保 RewriteRule 不适用于内部子请求。

# entity-framework - 识别关系并插入子实体导致“无法在表中插入标识列的显式值”

> ID：11051155
> 
> 赞同：4
> 
> 时间：2012-06-15T13:00:35.720
> 
> 标签：entity-framework, entity-framework-4.3

我试图让识别关系在实体框架中工作，这样我就可以使用 Remove 从他们的集合中删除项目。

我创建了一个测试，如：

```
public class OrderLine{   
    [Key, Column(Order = 0)]
    public int OrderLineId { get; set; }

    [Key, ForeignKey("Order"), Column(Order = 1)]
    public int OrderId{ get; set; }

    public virtual Order Order{ get; set; }

    [ForeignKey("Product")]
    public int ProductId { get; set; }

    public virtual Product Product { get; set; }

    public int Number { get; set; }} 
```

当我尝试添加像这样的 OrderLine 时：

```
 var order=_orderRepository.Find(1);
        var NewOrderLine= new OrderLine()
                                            {
                                                Number = 1,ProductId= 2
                                            };
        order.OrderLines.Add(NewOrderLine);
        _orderRepository.InsertOrUpdate(order);
        _orderRepository.Save(); 
```

我得到错误

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“OrderLines”中插入标识列的显式值。

当我查看表时，SQL 在 OrderId 和 OrderLineId 上有一个主键。也只有 OrderLineId 被设置为身份。所以它必须尝试插入一个值，但它似乎试图插入的唯一值是 0。

我可以使用以下方法插入表格的任何想法：

```
INSERT INTO [OrderLines]
           ([ProductId ]
           ,[Number]
           ,[OrderId])
     VALUES
           (2
           ,1
           ,1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:16:56.250

我相信异常意味着表中的复合主键列之一`OrderLines`是数据库中的自动生成标识（我猜是列`OrderLineId`），但 EF 确实发送了一个值（`0`因为您在创建新主键时没有指定属性`OrderLine`） INSERT 语句中的此列到数据库，因为该属性未在 EF 模型中标记为标识。默认情况下 (= `IDENTITY_INSERT`is `OFF`) SQL Server 不允许将值显式插入标识列。

实际上，在您的映射中，键列不是身份，因为默认情况下，*复合*键中没有属性是身份。

我认为，解决方案是关闭数据库中的身份规范或将属性标记为模型中的身份：

```
public class OrderLine
{
    [Key, Column(Order = 0), DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int OrderLineId { get; set; }

    [Key, ForeignKey("Order"), Column(Order = 1)]
    public int OrderId { get; set; }

    public virtual Order Order { get; set; }

    // ...
} 
```

`DatabaseGeneratedOption.Identity`意味着 EF 期望在数据库中生成列值，因此在您尝试插入新实体时不会将该值发送到数据库。

# excel - Excel 图表名称字段自动编辑

> ID：11051163
> 
> 赞同：0
> 
> 时间：2012-06-15T13:01:21.723
> 
> 标签：excel

在某些图表上，我有一个链接到 .xls 的 .ppt。查看链接的路径，一些图表被命名为 XPTO-1，但是 excel 上的名称字段只是 XPTO。为什么excel要添加“-1”标签？我没有任何重复名称的图表。这发生在 2003 版和 2007 版上。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:22:10.150

我找到了答案伙计们。excel允许不同的图表在同一个工作表上具有相同的名称。这样，当您查看图表名称时，它是相同的，但路径看起来像 XPTO1 用于第一个图表，而 XPTO1-1 用于另一个。当这些文件在 Office 2007 版本上更新时，这会导致链接中断，因为 Office 2007 在某些情况下无法处理这些 ID。解决方案是手动编辑图表的名称，并确保名称不会在同一个工作表上重复。

# php - JSON 来自 URL 而不是来自 MySQL

> ID：11051164
> 
> 赞同：1
> 
> 时间：2012-06-15T13:01:23.923
> 
> 标签：php, mysql, database, json

好的，首先，感谢您阅读我的问题，我将尝试添加尽可能多的信息。我目前正在为 Garrysmod 游戏类型制作排行榜，我从游戏模式的编码人员那里获得了一个 API 密钥，并且使用该 API 密钥我可以使用 STEAM_ID 提取 JSON 编码的数组

**示例：** [http ://www.revoltgaming.com/api/?key=SENCORED_API_KEY&action=ajack_all&steamid=STEAM_0:0:5898349](http://www.revoltgaming.com/api/?key=SENCORED_API_KEY&action=ajack_all&steamid=STEAM_0:0:5898349)

如果我使用下面的代码一切正常：

```
$usr_url_everything = "http://www.revoltgaming.com/api/?key=114d788c3e40e91842f945f19c978e66&action=ajack_all&steamid=" . $_SESSION['STEAMID'];
$json_encoded = file_get_contents($usr_url_everything);
$json_decoded = json_decode($json_encoded, true); 
```

但我所做的是，当用户第一次加入时，我会提取他的 JSON 字符串并将其保存在 MySQL 数据库中：

```
$usr_url_everything = "http://www.revoltgaming.com/api/?key=114d788c3e40e91842f945f19c978e66&action=ajack_all&steamid=" . $_SESSION['STEAMID'];
$json_encoded = file_get_contents($usr_url_everything);
$query = "INSERT INTO vm_leaderboard (`txtUser`, `txtJson`) VALUES ('" . $_SESSION['STEAM64'] . "', '" . $json_encoded . "')"; 
```

但是从我尝试**解码**从数据库中提取的 json 字符串的那一刻起，它就不起作用了，它返回 NULL。我保存在数据库中的 json 字符串与我直接从 API 页面获取的字符串相同。

以下是从数据库中提取的字符串： [http ://www.ishots-cave.com/revolt_/lb_applejack.php](http://www.ishots-cave.com/revolt_/lb_applejack.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:33:46.323

因此，正如我在评论中发布的那样，将其转换为有用的答案 - JSON 字符串需要在插入数据库之前进行清理：

```
$usr_url_everything = "http://www.revoltgaming.com/api/?key=&action=ajack_all&steamid=" . $_SESSION['STEAMID'];
$json_encoded = file_get_contents($usr_url_everything);
// sanitize the JSON string
$json_encoded = mysql_real_escape_string($json_encoded);
// insert in common way
$query = "INSERT INTO vm_leaderboard (`txtUser`, `txtJson`) VALUES ('" . $_SESSION['STEAM64'] . "', '" . $json_encoded . "')"; 
```

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:26:28.150

JSON 文件中的反斜杠和引号可能会改变您的查询。所以再试一次代码如下：

```
$query = "INSERT INTO vm_leaderboard (`txtUser`, `txtJson`) VALUES ('" . $_SESSION['STEAM64'] . "', '" . mysql_real_escape_string($json_encoded) . "')"; 
```

# php - 在 PHP 应用程序中集成 Microsoft Outlook 标签

> ID：11051171
> 
> 赞同：0
> 
> 时间：2012-06-15T13:02:02.350
> 
> 标签：php, api, sharepoint, active-directory, exchange-server

我不知道从哪里开始。我的要求是为我指明正确的方向，并为我提供一些关键字来帮助寻找解决方案。请原谅我将在这里使用的最可能不准确的术语 - 我将尝试描述性地解释这个问题。

在 Microsoft Outlook 和 SharePoint 中，用户名前面有这个球，显示他们的在线/离开/任何状态：

![MSO 用户标签](../Images/40de285b315e034036f000e025c2a871.png)

用户名是一个超链接。当将鼠标光标悬停在名称上时，会弹出一个包含更多详细信息的标签：

![MSO 用户的详细信息](../Images/130467d47ce15105a6a7af3eeb4aa49e.png)

我想有一个 API 可以处理这个问题。如何将该行为实现到 PHP 应用程序中？使用什么 API？API 是否有完整的初学者指南？

* * *

编辑：
我想复制 Outlook 的功能。我希望 PHP 应用程序显示与 Outlook 和 SharePoint 相同的用户详细信息标签。PHP 应用程序在 Outlook 和 SharePoint 所在的同一 Intranet 中工作。我希望在与 Outlook 和 SharePoint 相同的来源中找到信息。

* * *

EDIT2：
在评论后重新标记，希望找到更多相关的信息来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:47:37.550

我假设此状态是从您将可用性设置为类似的 Exchange 日历分析的

*   周一至周五
*   08.00-12.00
*   13.00-17.00

有时超出该范围，您/用户将被视为不可用。此外，您预定参加会议的时间将被视为不可用。这是我在这个答案中的假设。

现在，有一个构建良好的 Web 服务 api 作为交换，您希望如何集成它取决于您，但是......我会说在 PHP 中构建它会非常复杂。

我会在单独的 Web 服务（WCF 或普通 Web 服务）中为此构建逻辑并将逻辑保存在 .net 中，该服务应该能够通过 SOAP 与 php 进行通信，并且具有易于 PHP 处理的专用方法. 例如，发送用户名和日期，以 xml 或 json 形式返回当天的可用性。

*   Exchange Web 服务参考 [http://msdn.microsoft.com/en-us/library/bb204119(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/bb204119(v=exchg.140).aspx)
*   示例：使用 Exchange Web 服务 (C#) 获取日历数据[http://blogs.msdn.com/b/jasonz/archive/2009/11/24/sample-get-calendar-data-using-exchange-web-services- c.aspx](http://blogs.msdn.com/b/jasonz/archive/2009/11/24/sample-get-calendar-data-using-exchange-web-services-c.aspx)

这是一种方式，如果你想通过共享点有这个[http://www.bendsoft.com/downloads/sharepoint-php-tools/](http://www.bendsoft.com/downloads/sharepoint-php-tools/)

干杯。

**=== 编辑 ===**

有一些方法可以从 Exchange Web 服务检索可用性，GetUserAvailabilityRequest 和（当然）GetUserAvailabilityResponse

*   [获取用户可用性请求](http://msdn.microsoft.com/en-us/library/aa563800%28v=exchg.140%29)
*   [获取用户可用性响应](http://msdn.microsoft.com/en-us/library/aa563496%28v=exchg.140%29)

笔记！检查 2010 和早期版本的交换之间的差异，我的参考是 2010

# android - ProgressDialog 和 AlertDialog 导致窗口泄漏

> ID：11051172
> 
> 赞同：10
> 
> 时间：2012-06-15T13:02:02.283
> 
> 标签：android

我有一个活动，如果第一次启动，它会显示一条欢迎消息：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    showWelcomeMessageIfNecessary();
}

private void showWelcomeMessageIfNecessary() {
    final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Editor edit = prefs.edit();

    if (!prefs.getBoolean("welcomemessage", false)) {
        edit.putBoolean("welcomemessage", true);
        edit.commit();

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.messages_welcome_content).setCancelable(false).setPositiveButton(R.string.errors_ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // Do nothing
            }
        }).setTitle(R.string.messages_welcome_title);
        AlertDialog alert = builder.create();
        alert.show();
    }
} 
```

这一切都很好，但是当我启动应用程序并立即旋转屏幕时，我得到了众所周知的泄漏窗口异常。

我将如何防止这种情况？有没有更好的方法来显示对话框？当我在s 中使用`ProgressDialog`s时也会发生这种情况。`AsyncTask``Fragment`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-15T13:10:45.443

您需要在活动的**onStop**或**onDestroy**方法中取消对话框。例如：

```
private AlertDialog diag = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    diag = showWelcomeMessageIfNecessary();

    if(diag != null)
        diag.show();
}

private AlertDialog showWelcomeMessageIfNecessary() {
    final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Editor edit = prefs.edit();
    AlertDialog alert = null;

    if (!prefs.getBoolean("welcomemessage", false)) {
        edit.putBoolean("welcomemessage", true);
        edit.commit();

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage(R.string.messages_welcome_content).setCancelable(false).setPositiveButton(R.string.errors_ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                // Do nothing
            }
        }).setTitle(R.string.messages_welcome_title);
        alert = builder.create();
    }

    return alert;
}

@Override
protected void onStop() {
    super.onStop();

    if(diag != null)
        diag.dismiss();
} 
```

# paypal - 托管付款

> ID：11051174
> 
> 赞同：0
> 
> 时间：2012-06-15T13:02:02.653
> 
> 标签：paypal, escrow

我的网站功能类似于 VWORKER.COM、ELANCE.COM、ODESK.COM 等。有人可以建议我使用任何支付网关（除了 paypal、moneybookers、alertpay 等）来处理货币交易吗？那么我能收到付款吗？从项目所有者那里通过支付网关将项目价格交付给项目开发商（扣除我的费用后）。是否有任何支付网关（除了 paypal、moneybookers、alertpay 等）能够处理这种类型的货币交易。如果是这样，请详细告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-28T10:55:12.180

您也可以在所有[escrow.com 中尝试最佳。](https://www.escrow.com/)

我提供`payment holding.` 买方支付托管的可扩展和额外设施，直到他得到他的服务或商品，付款将保留在托管方，当买方向卖方发送获得商品托管付款的确认时。

```
Escrow works like this:

   1.Entity A deposits money into Escrow Account for Entity B.
   2.Entity A and Entity B come to an agreement
   3.The Escrow account is deposited to Entity B. 
```

`Payment Holding`在托管网站上使其**与众不同**。

只需成为它的合作伙伴并尝试实施它，很棒的设施。

我已经用过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T22:21:48.327

您可以尝试 Transpact.com - 欧洲领先的托管服务。

他们的 API 只允许与一行 PHP 或 ASPX（或类似的）集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:25:30.697

嗯，这也因国家而异。例如，如果 PayU 在您所在的国家/地区很活跃，我可以建议它。谷歌钱包是另一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T10:59:39.277

如果商家在美国，您可以使用 Braintree 托管服务。该服务目前仅在美国可用。

# c++ - iOS下OpenGL ES 2.0初始化

> ID：11051176
> 
> 赞同：0
> 
> 时间：2012-06-15T13:02:06.373
> 
> 标签：c++, objective-c, ios, initialization, opengl-es-2.0

我已经在自己的游戏上工作了一段时间，它在 Windows 上运行良好。一切都旨在支持跨平台。为了让您理解我的问题，我将不得不解释一下一切是如何工作的：

有多个库：Platform、Video、XML、Image 和 Engine。它们中的每一个都编译为 Windows 下的 DLL 或 iOS 上的静态库。

库中的所有内容要么是普通函数（用 声明`extern "C"`），要么是具有接口的对象。

文件夹结构是这样组织的：Project、Include、Source。

在包含文件夹中，只有所有平台的通用代码，如接口和函数原型。在源文件夹中还有其他特定于每个平台的文件夹。

我设法将平台库移植到 iOS 上，没有任何问题，但现在我被困在视频库上。

它处理渲染 API（windows 下的 OpenGL 和 iOS 下的 Opengl-ES 2）。

要创建驱动程序，我必须使用以下函数：

```
IVideoDriver* CreateVideoDriver(void* container) 
```

容器是`HWND`windows下的。

问题是我不确定如何在 iOS 下使用这种初始化样式。

我已经阅读了一些教程，查看了示例源代码，但我无法弄清楚如何做到这一点。从我看到的 OpenGL 初始化必须在一个视图中完成，我不知道如何将所有这些与我的代码链接起来。我知道我必须使用一些objective-c 代码，但这不是问题。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:23:40.290

在 iOS 5.0 中，Apple 引入了 GLKit 视图，它提供了 OpenGL ES 感知视图的默认实现。您还可以使用管理 GLKit 视图的 GLKit 视图控制器。这些是您可以通过 XCode 直接拖入主 .xib 的对象，并将它们无缝连接到您的实现。

Ray Wenderlich 写了一篇出色的入门文章，它可能会帮助您将其全部连接起来。 [http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:45:53.107

使用许多 iOS 示例中提供的 EAGLView 和 ESRenderer（**请**参阅**GLEssentials**[或](https://developer.apple.com/library/ios/#samplecode/GLEssentials)GLES2Sample [）](http://developer.apple.com/library/ios/#samplecode/GLES2Sample)。

使用起来非常简单。只是不要忘记与 OGLES 框架的链接，你就完成了！

您的 VideoDriverIOS 将如下所示：

在 VideoDriverIOS.h/VideoDriverIOS.mm

```
class VideoDriverIOS : public IVideoDriver
{
public:
    ...
    // implement the pure virual here
protected:
    EAGLView* mView;
    ...
} 
```

并且您的方法可以直接使用 mView 对象。

# php - Symfony2 FOSUserBundle 未将经过身份验证的用户设置为会话？

> ID：11051179
> 
> 赞同：1
> 
> 时间：2012-06-15T13:02:28.660
> 
> 标签：php, symfony-2.1, fosuserbundle

我有一个安装了 FOSUserBundle 的非常基本的 Symfony2.1 设置。

当注册一切正常时，我被重定向到我的目标路径，调试栏显示我已通过自己的身份验证。

然而，当登录时，提交带有错误凭据的表单会反映这种情况，但如果我使用正确的凭据登录，我会被重定向到我的目标路径但我仍然是匿名的，因此身份验证成功但不会在会话中持续存在。

我错过了什么吗？我几乎完全按照基本配置进行了少量定制。不确定如何进行调试（Symfony1 的经验，Symfony2 的新手）。

FOSUserBundle 的 InteractiveLoginListener onSecurityInteractiveLogin 已经并正确更新了用户的上次登录日期，我不确定这会在什么时候绑定到 security.context，如果有的话，也不知道在哪里看。

我是要注册自己的听众还是有些东西不起作用？在整个捆绑包中搜索 security.context 似乎导致仅将其设置为注册和重置？

* * *

## 安全.yml

```
security:
    acl:
        connection: default

    providers:
        fos_userbundle:
            id: fos_user.user_manager

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER, ROLE_SONATA_ADMIN]
        ROLE_SUPER_ADMIN: [ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]
        # SONATA:
        #     - ROLE_SONATA_PAGE_ADMIN_PAGE_EDIT  # if you are using acl then this line must be commented

    firewalls:
        # -> custom firewall for the admin area of the URL
        admin:
            switch_user:        true
            context:            user
            pattern:            /admin(.*)
            form_login:
                provider:       fos_userbundle
                login_path:     /admin/login
                use_forward:    false
                check_path:     /admin/login_check

                # login success redirecting options (read further below)
                always_use_default_target_path: false
                default_target_path:            /admin/dashboard
                target_path_parameter:          _target_path
                use_referer:                    false

                failure_path:   null
                use_referer:    true
            logout:
                path:           /admin/logout
                target:         /admin/login
            anonymous:    true
        # -> end custom configuration

        # default login area for standard users
        main:
            switch_user:        true
            context:            user
            pattern:            .*
            form_login:
                provider:       fos_userbundle

                # the user is redirected here when he/she needs to login
                login_path:                     /login

                # if true, forward the user to the login form instead of redirecting
                use_forward:                    false

                # submit the login form here
                check_path:                     /login_check

                # login success redirecting options (read further below)
                always_use_default_target_path: false
                default_target_path:            /
                target_path_parameter:          _target_path
                use_referer:                    false

                # login failure redirecting options (read further below)
                failure_path:                   null
                failure_forward:                false

                # csrf token options
                csrf_parameter:                 _csrf_token
                intention:                      authenticate

            logout:             true
            anonymous:          true
        # -> end default configuration

    access_control:
        # URL of FOSUserBundle which need to be available to anonymous users
        - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/_profiler, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }

        # -> custom access control for the admin area of the URL
        - { path: ^/admin/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/logout$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/login-check$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        # -> end

        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }

        # Secured part of the site
        # This config requires being logged for the whole site and having the admin role for the admin part.
        # Change these rules to adapt them to your needs
        - { path: ^/admin, role: [ROLE_ADMIN, ROLE_SONATA_ADMIN] }
        - { path: ^/.*, role: IS_AUTHENTICATED_ANONYMOUSLY }

jms_security_extra:
    secure_all_services: false
    expressions: true 
```

* * *

## 日志

```
[2012-07-05 15:12:50] security.INFO: User "steve" has been authenticated successfully [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "security.interactive_login" to listener "FOS\UserBundle\Security\InteractiveLoginListener::onSecurityInteractiveLogin". [] []
[2012-07-05 15:12:50] doctrine.DEBUG: UPDATE fos_user_user SET last_login = ?, updated_at = ? WHERE id = ? ([{"date":"2012-07-05 16:12:50","timezone_type":3,"timezone":"Europe\/London"},{"date":"2012-07-05 16:12:50","timezone_type":3,"timezone":"Europe\/London"},1]) [] []
[2012-07-05 15:12:50] event.DEBUG: Listener "Symfony\Component\Security\Http\Firewall::onKernelRequest" stopped propagation of the event "kernel.request". [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\Security\Http\Firewall\ContextListener::onKernelResponse". [] []
[2012-07-05 15:12:50] security.DEBUG: Write SecurityContext in the session [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bridge\Monolog\Handler\FirePHPHandler::onKernelResponse". [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bundle\SecurityBundle\EventListener\ResponseListener::onKernelResponse". [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\CacheListener::onKernelResponse". [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\HttpKernel\EventListener\ResponseListener::onKernelResponse". [] []
[2012-07-05 15:12:50] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelResponse". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Bundle\WebProfilerBundle\EventListener\WebDebugToolbarListener::onKernelResponse". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.response" to listener "Symfony\Component\HttpKernel\EventListener\StreamedResponseListener::onKernelResponse". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.terminate" to listener "Symfony\Bundle\SwiftmailerBundle\EventListener\EmailSenderListener::onKernelTerminate". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". [] []
[2012-07-05 15:12:51] request.INFO: Matched route "sonata_admin_dashboard" (parameters: "_controller": "Sonata\AdminBundle\Controller\CoreController::dashboardAction", "_route": "sonata_admin_dashboard") [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2012-07-05 15:12:51] security.INFO: Populated SecurityContext with an anonymous Token [] []
[2012-07-05 15:12:51] event.DEBUG: Notified event "kernel.exception" to listener "Symfony\Component\Security\Http\Firewall\ExceptionListener::onKernelException". [] []
[2012-07-05 15:12:51] security.DEBUG: Access is denied (user is not fully authenticated) by "/var/www/motoratings/vendor/symfony/symfony/src/Symfony/Component/Security/Http/Firewall/AccessListener.php" at line 70; redirecting to authentication entry point [] []
[2012-07-05 15:12:51] security.DEBUG: Calling Authentication entry point [] [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:28:44.380

事实证明，答案只是清除浏览器的 cookie，出于某种原因，我设置了 2 个 PHPSESSID cookie。不知道这怎么可能？

我的假设是这是由于摆弄这个，也许是因为我有 2 个防火墙，后来我将其剥离为 1 个？

似乎 Symfony 正在循环 PHPSESSID cookie，每个页面都在改变，所以任何身份验证都在一个不会持续到下一个的会话上——因此给了我所描述的问题。

设置 2 个 cookie 是否有正当理由？.. 甚至不可能设置 2 个同名 cookie？在清除它们之前我没有对其进行适当的调查，我想那一定有不同的路径或其他东西？..但它们似乎都出现在每个请求中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:43:08.460

在黑暗中刺伤，但是您的用户类`getRoles()`方法是否在任何情况下都返回 ROLE_USER 因为如果此方法不返回任何内容，则用户将被视为匿名用户，因此未经过身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:40:46.520

黑暗中的另一个刺，似乎你正在重定向到`sonata_admin_dashboard`路由，它解析为`/admin/dashboard`url。根据您的`security.yml`说法，用户似乎需要具有`ROLE_ADMIN`或`ROLE_SONATA_ADMIN`角色才能访问该页面。

# c# - 如何对在 localhost 的不同端口上运行的 wcf 服务进行 ajax 调用

> ID：11051181
> 
> 赞同：1
> 
> 时间：2012-06-15T13:02:45.757
> 
> 标签：c#, jquery, wcf

我正在开发 jquery 移动应用程序，我必须从中调用 wcf 服务以获取我在 jsrender 模板中使用的 json 格式的响应。我正在本地机器上测试这个应用程序。在本地测试时，我没有从服务中获得结果它运行在与我的 Web 项目不同的端口上。这通过使用像 firebug 这样的调试器很明显。

我什至尝试了来自 ajax 的跨域调用的“jsonp”方法，它产生了相同的结果。我正在对服务进行如下调用：

```
var urlString = "http://localhost:50046/Security/ValidateUser?username="+encodeURIComponent(userId) + "&password=" + encodeURIComponent(password);

 $.ajax({
           url: urlString,
           dataType: "json",
           success: successFn,
           error: function (jqXHR, textStatus, errorThrown) {
           alert(errorThrown);
           console.log(errorThrown);
           console.log(jqXHR.responseText);
           if (errorFn) {
                errorFn();
            } else {
                alert("Unable ot connect to server, please try again.");
            }
        }
    }); 
```

而且我的页面运行在与运行服务的端口不同的端口号上。

任何人都可以帮助我我哪里出错了。是我形成的urlstring还是我应该使用jsonp回调来进行跨域调用。

我浏览了许多提倡使用 jsonp 的链接，但在我的情况下无法使用它。

等待回复。我希望我在上面的几行中明白了我的意思。

提前致谢

# python - 文本框中的值在使用 sendkeys 填充后消失

> ID：11051182
> 
> 赞同：1
> 
> 时间：2012-06-15T13:02:48.500
> 
> 标签：python, selenium, automation, webdriver

我的网页中有一个文本字段，我正在尝试使用`sendkeys`. 当我导航到另一个元素时，它的价值就消失了。我尝试长时间等待页面加载，但无济于事。当我手动尝试时，它工作正常；它仅在我使用脚本时失败。我搜索了同样的问题，但我找不到任何解决方案。

```
activeelem = driver.switch_to_active_element() 
time.sleep(2)
activeelem.send_keys("Employee Name")
time.sleep(3)
activeelem.send_keys(Keys.ENTER)
time.sleep(2)
driver.find_element_by_xpath("//span/input[@type='checkbox']").click() 
```

笔记：

1.  我正在使用当前的焦点元素。
2.  我也尝试了 keys.TAB 和其他选项。

对此的任何解决方案将不胜感激。

# list - 需要一个唯一的 JPA 实体列表

> ID：11051183
> 
> 赞同：0
> 
> 时间：2012-06-15T13:02:53.030
> 
> 标签：list, unique, openjpa

我正在尝试获取 JPA 实体的唯一列表...我无法通过在命名查询中添加 Distinct 子句来做到这一点，因为我会将这些实体添加到来自多个实体的列表中。所以我决定在代码中做唯一性......使用 eclipse 和一些 OpenJPA 工具，我向实体 Bean 添加了默认的 hashCode 和 Equlas 方法......

之后，我创建了一个 ArrayList，并向其中添加了所有实体对象，我执行以下操作...

```
return new ArrayList(new HashSet(personListRetVal)); 
```

我认为这应该返回一个唯一的列表......有什么建议吗？如何返回有序的唯一列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:03:08.730

也许您想使用[LinkedHashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashSet.html)？

# javascript - Firefox：三次单击的段落选择产生的行为不是我所期望的

> ID：11051184
> 
> 赞同：0
> 
> 时间：2012-06-15T13:03:08.650
> 
> 标签：javascript, firefox, selection, paragraph, getselection

三击鼠标选择段落设置`document.getSelection().leftOffset`为 0（这似乎是正确的），但`rightOffset`属性设置为 1，因此处理选择的代码产生的结果仅与所选段落中的第一个字符一致。这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:08:19.453

我假设您的意思是`anchorOffset`and`focusOffset`而不是`leftOffset`and `rightOffset`。

无论如何，是的，您缺少一些东西：`anchorOffset`并且`focusOffset`不一定与文本节点相关。它们可以改为相对于元素，在这种情况下，偏移量是相关选择边界之前的容器节点（`anchorNode`或）的子节点数。`focusNode`在您的情况下，选择从段落父项的第零个子项（即开始）的开始延伸到第一个子项（即段落本身）之后的点。

# r - 读取和使用自定义配置文件

> ID：11051187
> 
> 赞同：18
> 
> 时间：2012-06-15T13:03:27.683
> 
> 标签：r, configuration, readfile

我目前正在编写一个脚本，该脚本应该基于“配置”文件分析数据集。

该文件的输入例如是：

配置文件：

```
123456, 654321
409,255,265
1 
```

它也可以包含其他值，但它们都是数字的。在上述示例中，应按如下方式读取文件：

```
timestart <- 123456
timeend <- 654321
exclude <- c(409,255,265)
paid <- 1 
```

配置文件的布局不是固定的，但它应该包含一个开始时间 (unix) 一个结束时间 (unix) 一个数组，其中包含要排除的数字和其他字段。最后，它应该由用户在 GUI 中指定的字段构成。我不知道哪种格式最适合这种情况，但是一旦我掌握了这些基础知识，我认为这不会是一个大问题。

但这将使知道哪些值属于哪个变量变得更加困难。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T13:38:07.340

事实上，正如 Andrie 所建议的，使用 .r 配置文件是最简单的方法。我完全忽略了这个选项！

因此，只需创建一个包含变量的 .r 文件：

```
#file:config.R
timestart <- 123456
timeend <- 654321
exclude <- c(409,255,265)
paid <- 1 
```

在其他脚本中使用：

```
source("config.R") 
```

瞧。谢谢安德烈！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-19T12:03:25.880

另一种选择是使用[配置](https://cran.r-project.org/web/packages/config/)包。这允许根据运行环境（生产、测试​​等）执行设置配置值。所有参数都通过列表访问，并由 YAML 文本格式配置文件加载。

有关配置的更多详细信息和示例可以在这里找到：[https ://cran.r-project.org/web/packages/config/vignettes/introduction.html](https://cran.r-project.org/web/packages/config/vignettes/introduction.html)

如果要加载 JSON、TOML、YAML 或 INI 文本配置文件，另请参阅[configr](https://github.com/Miachol/configr)包。

# c# - 具有默认自定义引用、MSBuild 任务等的项目模板：GAX?

> ID：11051192
> 
> 赞同：0
> 
> 时间：2012-06-15T13:03:47.027
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0

我正在寻找为客户端-服务器平台创建两个 Visual Studio 2010、C# 项目模板，第三方开发人员可以为其开发自己的扩展。

这些项目模板不仅仅是代码，它们需要：

*   代码生成。即时创建一些类，然后轻松添加具有特定属性集的某种属性。

*   对自定义程序集的默认项目引用。

*   自定义 MSBuild 任务。

据我所知，因为我一直在阅读一些文档，所以**Guidance Automation Toolkit (GAT)**和**Guidance Automation Extensions (GAX)**似乎是要走的路。

但是，无论如何，如果我正在考虑 GAT/GAX，我想知道我的方法是否正确，或者有一些更简单、更容易的解决方案。

先感谢您！

**更新**：另一点似乎不再支持 GAT/GAX。*所以呢？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:30:37.053

Microsoft 不再维护 GAT/GAX。目前最好的继任者似乎是开源的 [Open GAX/GAT](http://opengax.codeplex.com/)项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:12:26.563

~~经过几天的研究，谷歌搜索，无论如何，我发现微软没有官方和支持的方法来做我在最初问题中所说的。~~

*在那种情况下，对我来说，“所以，什么？* ”的最终答案是**谁知道**的。

Visual Studio SDK 很难理解，网上有文档，但我相信我的可扩展性需求需要很多时间*手工*完成。

~~*注意* **如果将来有人发布一些有趣的答案来解决这个问题，我会改变主意。**~~

**答对了！** [当前的 Microsoft 方法是 VSPAT/Pattern Tookit Builder！](http://blogs.msdn.com/b/jezzsa/archive/2012/03/09/10280353.aspx)

这是官方支持的方法，它是 GAT/GAX 的继任者。

# windows - 带有黑色闪烁的 Windows 8 Metro App（网格应用程序）过渡

> ID：11051195
> 
> 赞同：2
> 
> 时间：2012-06-15T13:03:52.343
> 
> 标签：windows, windows-8, windows-runtime, winrt-xaml, microsoft-metro

我正在构建基于网格应用程序模板的 Windows 8 Metro 应用程序。一切都很顺利，直到我尝试更改应用程序的主题和背景。

我将图像背景应用于所有 3 个 XAML 页面的网格。另外，我在应用程序包清单中将主题更改为“Light”，但它没有做任何事情。

搜索后我找到了一个解决方案，在 App.xaml 中设置 RequestedTheme="Light"

现在，我有一个带有我想要的背景的 Light 主题应用程序，但是每次我导航到不同的页面时，它都会出现黑色闪烁。似乎过渡仍然具有黑色主题。

那是问题吗？我该如何改变呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T06:50:29.813

在 App.xaml.cs 中，设置应用根框架的背景属性。您可以在导航到初始页面之前在重写的 OnLaunch 方法中执行此操作。

> rootFrame.Background = new SolidColorBrush(Colors.White); //无论什么颜色

# html - CSS中的媒体查询条件

> ID：11051199
> 
> 赞同：0
> 
> 时间：2012-06-15T13:04:09.023
> 
> 标签：html, css

我已经为 3 个不同的维度编写了媒体查询。初始样式为 320px 宽度，另外 3 个查询为

1.  320px 及以上

2.  768像素

3.  1024像素

    css 对于初始大小 320px、320px n 高于 nad 768px 非常有效。但 1024px css 不适用。

这是我的 CSS 查询

```
@media (min-width: 320px) {
For above 320px 
}
@media (min-width: 1024px) {
For 1024px; this is not applying
}
@media (min-width: 768px) {
for 760px
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:06:20.767

第三个媒体查询中的规则总是覆盖第二个。

您需要交换最后两个的顺序，以便 1024px 在适用时覆盖 768px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:07:12.997

您想尝试按宽度递减顺序排列。例如：

```
@media (min-width: 320px) {
For above 320px 
}

@media (min-width: 768px) {
for 760px
}

@media (min-width: 1024px) {
For 1024px; this is not applying
} 
```

CASCADING 样式表从上到下读取。

# iphone - 保存过长的录制视频时，应用程序崩溃

> ID：11051202
> 
> 赞同：6
> 
> 时间：2012-06-15T13:04:21.847
> 
> 标签：iphone, ios, ipad, crash, uiimagepickercontroller

**问题：**

保存在我的应用程序中录制的视频时，如果视频大小/持续时间太大/太长，我的应用程序会崩溃而没有日志/异常。

**我的设置：**

在我的应用程序中，我使用 UIImagePickerController 来录制视频。现在我注意到，如果我制作的视频长度很长（例如，使用 UIImagePickerControllerQualityTypeMedium 时为 30 分钟，或者使用 UIImagePickerControllerQualityTypeIFrame1280x720 时超过一分钟），则在保存视频时，应用程序会崩溃。有时有警告，有时没有警告。现在我开始调试并注意到它与内存有关（malloc_error）。

我使用分析器实时检查分配，并注意到当它要保存视频时，分配突然变得非常大（我猜这与视频的临时内存使用有关？）在它最终崩溃之前。这是分析器的屏幕截图： ![分配截图](../Images/0e6c9507b0d56aa678b281e7aa47b0c3.png)

该应用程序必须能够录制最长持续时间为 1 小时的视频（以任何指定的质量）。

**我试过的：**

*   设置 picker.videoMaximumDuration 更短/更长
*   使用探查器/仪器进行调试
*   检查泄漏
*   关闭设备上所有打开的应用程序和已删除的应用程序（用于存储清理）以获取更多内存

**代码：**

```
- (void)openCamera:(id)sender context:(NSManagedObjectContext*)context {
    self.context = context;
    //Set self as delegate (UIImagePickerControllerDelegate)
    [self.picker setDelegate:self];
    //If the device has a camera
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
        self.picker.allowsEditing = YES;
        self.picker.videoQuality = [Settings videoQualitySetting];
        //If the camera can record video 
        NSString *desired = (NSString *)kUTTypeMovie;
        if ([[UIImagePickerController availableMediaTypesForSourceType:self.picker.sourceType] containsObject:desired]) {
            //Let the user record video
            self.picker.mediaTypes = [NSArray arrayWithObject:desired];
            self.picker.videoMaximumDuration = MaxDuration;
        }
        else {
            NSLog(@"Can't take videos with this device"); //debug
        }
        //Present the picker fullscreen/in popover
        if ([Settings shouldDisplayFullScreenCamera]){
            [self presentModalViewController:self.picker animated:YES];
            [self.masterPopoverController dismissPopoverAnimated:YES];
        }
        else {
            if (!_popover){
                _popover = [[UIPopoverController alloc] initWithContentViewController:self.picker];
            }
            [_popover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        }
    }
    else {
        NSLog(@"Does not have a camera"); //debug
    }    
} 
```

并在选择图像时编写代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];

    // Save the video, and close the overlay
    if (CFStringCompare ((__bridge CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) {

        self.tempVideoPath = [[info objectForKey:
                                UIImagePickerControllerMediaURL] path];
        [LocalVideoStorage saveVideo:[NSData dataWithContentsOfPath:self.tempVideoPath name:self.videoName];
        [_picker dismissModalViewControllerAnimated: YES];
        [[_picker parentViewController] dismissModalViewControllerAnimated:YES];
        [_popover dismissPopoverAnimated:YES];  
    }
} 
```

最后，当它被保存时：

```
+ (NSString*)saveVideo:(NSData*)video:(NSString*)videoName {
    NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it

    NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.MOV", videoName]]; //add our video to the path

    [fileManager createFileAtPath:fullPath contents:video attributes:nil]; //finally save the path (video)

    NSLog(@"Video saved!");
    return fullPath;

} 
```

我在 iOS 5.1.1 中使用 ARC

**更新：** 我在 malloc_error_break 上放了一个断点，在仪器中我可以看到它是从以下位置调用的：

```
#   Address Category    Timestamp   Live    Size    Responsible Library Responsible Caller
0   0x10900000  Malloc 473,29 MB    02:08.951.332   •   496283648   Foundation  -[NSData(NSData) initWithContentsOfFile:] 
```

**解决方案：** 正如lawicko & john.k.doe 所说，我试图将视频从它的路径加载到一个NSData 变量中。这导致整个视频被加载到内存中。而不是这样做，我现在只是移动文件（&重命名）**copyItemAtPath**

```
NSError *error = nil;
if (![fileManager copyItemAtPath:path toPath:fullPath error:&error])
    NSLog(@"Error: %@", error); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:26:56.297

你的问题是这一行：

```
[NSData dataWithContentsOfPath:self.tempVideoPath] 
```

您显然是想一次将这个文件的内容全部加载到内存中，但 iOS 永远不会让您一次加载那么多。您的`saveVideo`方法似乎只将文件从临时位置复制到文档目录。如果这是您唯一需要做的事情，请查看 NSFileManager 的[copyItemAtPath:toPath:error](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/copyItemAtPath:toPath:error:)方法。您可以更改`saveVideo`方法以将临时文件路径作为参数，而不是数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:27:53.230

为什么要费心将媒体流的全部内容从
`[[info objectForKey:UIImagePickerControllerMediaURL] path]`一个中拉`NSData*`出来，然后再写出来呢？您的媒体流将是巨大的！

保存时发生这种情况的原因是因为您正在记录数据，它将“磁盘”，然后您将其读入内存以将其写回另一个磁盘文件。

您是否考虑过使用`NSFileManager`将文件复制`[[info objectForKey:UIImagePickerControlMediaURL] path]`到您创建的名称（fullPath）？这应该避免将整个事情拉入内存；它应该是“文件到文件”传输。

# wpf - WPF ListBoxItem 样式动画

> ID：11051204
> 
> 赞同：0
> 
> 时间：2012-06-15T13:04:26.787
> 
> 标签：wpf, xaml, styles

我一直在为我的列表框设计一种新样式，但我遇到了一个问题。当我将鼠标悬停在列表框中的任何项目上时，我的动画会在所有项目上运行，而不仅仅是我悬停的项目。我一直在网上寻找，但似乎有很多不同的方法可以做到这一点，但没有一个可以为我解决这个问题。

```
<Color x:Key="BorderColor" A="255" R="216" G="217" B="220" />
<Color x:Key="ForegroundColor" A="255" R="40" G="40" B="40" />
<Color x:Key="BackgroundColor" A="255" R="240" G="241" B="241" />

<SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}" />
<SolidColorBrush x:Key="ForegroundBrush" Color="{StaticResource ForegroundColor}" />        
<SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}" />

<Color x:Key="Color_Red" A="255" R="235" G="103" B="103" />

<Style x:Key="Test" TargetType="{x:Type ListBoxItem}">
    <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListBoxItem">
                <Border x:Name="Border" Background="{StaticResource BackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,3" CornerRadius="0" Margin="0,0,2,3" Padding="0" SnapsToDevicePixels="true">
                    <Grid Height="Auto" Width="Auto">
                        <ContentPresenter Margin="3,3,0,0" VerticalAlignment="Top" />
                    </Grid>
                </Border>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="ListBoxItem.MouseEnter">
                        <EventTrigger.Actions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Duration="0:0:0.5"
                                                    Storyboard.TargetName="Border"
                                                    Storyboard.TargetProperty="BorderBrush.Color" To="{StaticResource Color_Red}" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="ListBoxItem.MouseLeave">
                        <EventTrigger.Actions>
                            <BeginStoryboard>
                                <Storyboard FillBehavior="Stop">
                                    <ColorAnimation Duration="0:0:0.3"
                                                    Storyboard.TargetName="Border"
                                                    Storyboard.TargetProperty="BorderBrush.Color" To="{StaticResource BorderColor}" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger.Actions>
                    </EventTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

任何帮助将不胜感激，我被困了一段时间......

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:27:11.347

在我的脑海中，我认为您正在为资源设置动画，而不仅仅是边框颜色，请尝试将边框声明更改为。

```
<Border x:Name="Border" Background="{StaticResource BackgroundBrush}"  BorderThickness="0,0,0,3" CornerRadius="0" Margin="0,0,2,3" Padding="0" SnapsToDevicePixels="true">
    <Border.Style>
        <Style TargetType="{x:Type Border}">
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
        </Style>
    </Border.Style>
    <Grid Height="Auto" Width="Auto">
        <ContentPresenter Margin="3,3,0,0" VerticalAlignment="Top" />
    </Grid>
</Border> 
```

基本上从边界线上移除边框笔刷并将其放在下面的样式设置器中。

# java - java.util.Random 和 java.security.SecureRandom 之间的区别

> ID：11051205
> 
> 赞同：218
> 
> 时间：2012-06-15T13:04:41.600
> 
> 标签：java, random, cryptography, security

我的团队收到了一些生成随机令牌的服务器端代码（Java），我对此有疑问 -

这些令牌的用途相当敏感 - 用于会话 ID、密码重置链接等。因此它们确实需要加密随机以避免有人猜测它们或暴力破解它们是可行的。令牌是“长”的，因此它是 64 位长。

该代码当前使用`java.util.Random`该类来生成这些标记。的[文档](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html)`java.util.Random`清楚地说明了以下内容：

> java.util.Random 的实例在密码学上不是安全的。考虑改为使用 SecureRandom 来获取加密安全的伪随机数生成器，以供安全敏感的应用程序使用。

但是，代码当前使用的方式`java.util.Random`是这样的 - 它实例化`java.security.SecureRandom`类，然后使用该`SecureRandom.nextLong()`方法获取用于实例化`java.util.Random`类的种子。然后它使用`java.util.Random.nextLong()`方法来生成令牌。

`java.util.Random`所以我现在的问题 - 考虑到正在使用 播种，它仍然不安全`java.security.SecureRandom`吗？我是否需要修改代码以使其`java.security.SecureRandom`专门用于生成令牌？

目前代码种子是`Random`启动时的一次

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2012-06-15T14:32:29.463

标准的 Oracle JDK 7 实现使用所谓的线性同余生成器在`java.util.Random`.

取自`java.util.Random`源代码（JDK 7u2），来自对方法的注释，该方法`protected int next(int bits)`是生成随机值的方法：

> 这是一个线性同余伪随机数生成器，由 DH Lehmer 定义并由 Donald E. Knuth 在 *计算机编程艺术，*第 3 卷： *半数字算法*，第 3.2.1 节中描述。

### 线性同余生成器的可预测性

Hugo Krawczyk 写了一篇关于如何预测这些 LCG 的非常好的论文（“如何预测同余生成器”）。如果您幸运且感兴趣，您仍然可以在网络上找到它的免费、可下载版本。还有更多研究清楚地表明，您**永远不**应该将 LCG 用于安全关键目的。这也意味着您的随机数现在*是*可预测的，这是您不希望会话 ID 等的东西。

### 如何打破线性同余生成器

攻击者必须等待 LCG 在一个完整周期后重复的假设是错误的。即使使用最佳循环（其递推关系中的模数 m），也很容易在比完整循环更短的时间内预测未来值。毕竟，这只是一堆需要求解的模方程，只要你观察到足够多的 LCG 输出值，就变得容易了。

“更好”的种子不会提高安全性。`SecureRandom`如果您使用由骰子生成的随机值或什至通过多次掷骰子产生该值来播种，这根本无关紧要。

攻击者将简单地根据观察到的输出值计算种子。在. *_* _ `java.util.Random`不信的人可以试试这个[实验](http://jazzy.id.au/default/2010/09/20/cracking_random_number_generators_part_1.html)，它表明你可以预测未来的`Random`输出，只观察两个（！）输出值大约 2^16。在现代计算机上，现在甚至不需要一秒钟来预测随机数的输出。

### 结论

替换您当前的代码。`SecureRandom`独占使用。那么至少你会有一点保证，结果是很难预测的。如果您想要加密安全 PRNG 的属性（在您的情况下，这就是您想要的），那么您`SecureRandom`只需要使用即可。聪明地改变它应该使用的方式几乎总是会导致一些不太安全的东西......

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-06-16T03:27:20.827

随机数只有 48 位，而 SecureRandom 最多可以有 128 位。因此，在安全随机中重复的机会非常小。

**随机**使用`system clock`作为种子/或生成种子。因此，如果攻击者知道种子的生成时间，它们可以很容易地被复制。但是**SecureRandom**`Random Data`从您那里获取`os`（它们可以是击键之间的间隔等 - 大多数操作系统收集这些数据并将它们存储在文件中 - `/dev/random and /dev/urandom in case of linux/solaris`）并将其用作种子。
因此，如果小令牌大小没问题（在 Random 的情况下），您可以继续使用您的代码而无需任何更改，因为您使用 SecureRandom 来生成种子。但是，如果您想要更大的令牌（不能受制于`brute force attacks`），请使用 SecureRandom -
如果需要随机`2^48`尝试，则使用当今先进的 cpu 可以在实际时间内打破它。但是为了安全`2^128`，将需要随机尝试，这将需要数年时间才能达到今天的先进机器的收支平衡。

有关更多详细信息，请参阅[此](http://resources.infosecinstitute.com/random-number-generation-java/)链接。
**编辑**
阅读@emboss提供的链接后，很明显，种子，无论它可能是随机的，都不应该与java.util.Random一起使用。通过观察输出很容易计算种子。

**选择 SecureRandom** - 使用本**机 PRNG**`/dev/random` （如上面的链接中所示），因为每次调用它都会从文件中获取随机值`nextBytes()`. 这样，除非他正在控制文件的内容（这不太可能） ，否则观察输出的攻击者将无法弄清任何内容`/dev/random`（这不太可能）**sha1 prng**算法仅计算一次种子，并且如果您的 VM 使用相同的程序运行了几个月种子，它可能被被动观察输出的攻击者破解。**注意**- 如果您调用的速度比您的操作系统能够将随机字节（熵）写入的速度更快，那么在使用**NATIVE PRNG**时您可能会遇到麻烦 。在这种情况下，使用 SecureRandom 的 SHA1 PRNG 实例，每隔几分钟（或某个时间间隔），使用来自
 ****`nextBytes()``/dev/random`**`nextBytes()`SecureRandom 的 NATIVE PRNG 实例。并行运行这两个将确保您使用真正的随机值定期播种，同时也不会耗尽操作系统获得的熵。******

 ******* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-15T13:10:37.163

如果您`java.util.Random.nextLong()`使用相同的种子运行两次，它将产生相同的数字。出于安全原因，您要坚持使用，`java.security.SecureRandom`因为它的可预测性要低得多。

这 2 个类是相似的，我认为您只需要使用重构工具进行更改`Random`，`SecureRandom`您现有的大部分代码都可以工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T13:11:57.007

如果更改现有代码是一项负担得起的任务，我建议您按照 Javadoc 中的建议使用 SecureRandom 类。

即使您发现 Random 类实现在内部使用 SecureRandom 类。你不应该想当然地认为：

1.  其他虚拟机实现做同样的事情。
2.  JDK未来版本中Random类的实现仍然使用SecureRandom类

因此，遵循文档建议并直接使用 SecureRandom 是更好的选择。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T14:49:49.037

的当前参考实现对*直接*公开 32 位当前种子的方法进行`java.util.Random.nextLong()`了两次调用：`next(int)`

 *```
protected int next(int bits) {
    long nextseed;
    // calculate next seed: ...
    // and store it in the private "seed" field.
    return (int)(nextseed >>> (48 - bits));
}

public long nextLong() {
    // it's okay that the bottom word remains signed.
    return ((long)(next(32)) << 32) + next(32);
} 
```

结果的高 32 位是`nextLong()`当时种子的位。由于种子的宽度是 48 位（javadoc 说），因此只需迭代剩余的 16 位（仅尝试 65.536 次）即可确定产生第二个 32 位的种子。

一旦知道种子，就可以轻松计算所有后续令牌。

**直接使用 PNG 的部分秘密的输出，`nextLong()`在某种程度上可以轻松计算整个秘密。危险的！**

* 如果第二个 32 位为负数，则需要付出一些努力，但可以发现这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-24T22:22:59.473

种子毫无意义。一个好的随机生成器在选择的素数上有所不同。每个随机生成器都从一个数字开始并遍历一个“环”。这意味着，您从一个数字到另一个数字，具有旧的内部值。但过了一会儿，你又回到起点，重新开始。所以你运行循环。（随机生成器的返回值不是内部值）

如果您使用质数来创建一个环，那么在您完成所有可能的数字的完整循环之前，该环中的所有数字都会被选中。如果您采用非素数，则不会选择所有数字并且您会获得更短的周期。

在您再次返回第一个元素之前，更高的素数意味着更长的周期。所以，安全随机发生器只是有一个更长的周期，在再次到达开始之前，这就是它更安全的原因。您无法像使用较短的周期那样容易地预测数字生成。

换句话说：您必须全部替换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-11T11:06:41.250

我将尝试使用非常基本的单词，以便您可以轻松理解 Random 和 secureRandom 之间的区别以及 SecureRandom 类的重要性。

有没有想过如何生成 OTP（一次性密码）？为了生成 OTP，我们也使用 Random 和 SecureRandom 类。现在为了使您的 OTP 更强大，SecureRandom 更好，因为它需要 2^128 次尝试才能破解当前机器几乎不可能的 OTP，但如果使用 Random 类，那么您的 OTP 可能会被可能损害您数据的人破解，因为它花了只需 2^48 次尝试即可破解。*******

# java - Android c2dm 未知权限

> ID：11051207
> 
> 赞同：0
> 
> 时间：2012-06-15T13:04:53.950
> 
> 标签：java, android, android-c2dm

我看到发布了一个非常相似的问题，但他的解决方案没有帮助。我在 logcat 的警告部分看到未知权限。

```
unknown permission com.google.android.c2dm.permission.C2D_MESSAGE in package com.upmc

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.upmc"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<permission android:name="com.upmc.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="com.google.android.c2dm.permission.C2D_MESSAGE" />

     <!-- registers the receiving class for a c2dm broadcast intent to be .C2DMBroadcastReceiver.-->

    <receiver android:name=".C2DMReceiver" android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <!--Action String being listened for, then calls parent registered receiver -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
            <!-- still don't understand this  -->
            <catagory android:name="com.upmc" />
            <!-- must unregister intent filter when app is not running -->
        </intent-filter>
        <intent-filter>
            <!-- change here...action string pre-set by google?-->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <!-- specify under what circumstances the action should be serviced -->
            <catagory android:name="com.upmc" />
        </intent-filter>
    </receiver> 
```

很难读我知道对不起！

我也没有从谷歌得到任何形式的回应。我已经注册了这个应用程序并登录了一个谷歌帐户。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:08:43.623

根据[本文](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#c2dm_permissions)，要在您的应用程序中使用 C2DM 必须注册以下权限

1.  com.google.android.c2dm.permission.RECEIVE
2.  android.permission.INTERNET

也可以参考这个问题：[C2DM: How to use C2D_MESSAGE permission？](https://stackoverflow.com/questions/5121061/c2dm-how-to-use-c2d-message-permission)

# .net - .NET App：涵盖 Windows XP 到 Vista 升级场景

> ID：11051214
> 
> 赞同：0
> 
> 时间：2012-06-15T13:05:11.793
> 
> 标签：.net, windows, windows-xp, windows-vista, upgrade

系统从 Windows XP 升级到 Windows Vista 后，.NET 4.0 应用程序需要正常运行。

在 XP 中安装应用程序时，快捷方式会添加到启动文件夹中，以便它与系统一起启动。系统升级后，首次系统启动时，应用程序因 .NET 初始化错误而崩溃。这是因为 .NET Framework 在首次系统启动时才开始升级。.NET 升级完成后，应用程序可以正常运行。

问题是：你能看到这个问题的一些聪明的解决方法吗？升级后应用程序不必在首次启动时启动，但它不得显示 .NET 初始化错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:09:52.303

聪明的工作？你可以有一个本地启动器应用程序来检测 .net 是否是正确的版本，如果它启动你的 .net 应用程序。[您可以像这个问题](https://stackoverflow.com/questions/199080/how-to-detect-what-net-framework-versions-and-service-packs-are-installed)一样简单地检查注册表。

# jquery - 如何向 img 标签添加一个新属性并且还需要更改现有属性的值

> ID：11051215
> 
> 赞同：0
> 
> 时间：2012-06-15T13:05:14.850
> 
> 标签：jquery

通过 jquery 代码，我尝试向 img 标签添加一个名为**delaySrc**的新属性，并尝试将 src 属性的值更改为 div 中的所有 img 标签。

```
<div class="diagnostic_picture"><img src="test1.gif" /></div>
<div class="diagnostic_picture"><img src="test2.gif" /></div>
<div class="diagnostic_picture"><img src="test3.gif" /></div>

$(".diagnostic_picture img").each(function () {
        var img = $(this);
        img.attr("delaySrc", function () { img.attr("src") })
        img.attr("src", 'images/ajax-loader.gif');
}); 
```

src 属性值正在发生变化，但新属性不会添加到 div 中的所有 img 标签。请建议我哪里错了。在代码中改变什么。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:08:32.433

尝试这个

```
$(function(){
$(".diagnostic_picture img").each(function () {
        var img = $(this);
        img.attr("delaySrc",img.attr("src"));
        img.attr("src", 'image_url');
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:08:11.083

```
$(".diagnostic_picture img").each(function () {
        var img = $(this);
        img.attr("delaySrc", img.attr("src"));
        img.attr("src", 'images/ajax-loader.gif');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:08:26.877

**[现场演示](http://jsfiddle.net/9mPm5/)**

```
 $(".diagnostic_picture img").each(function () {
      var img = $(this);
      img.attr("delaySrc", function () { return img.attr("src"); });
      img.attr("src", 'images/ajax-loader.gif');   
      alert(img.attr('delaySrc'));                                           
      alert(img.attr('src'));                                       
    });​ 
```

或者

**[现场演示](http://jsfiddle.net/9mPm5/1/)**

```
$(".diagnostic_picture img").each(function () {
        var img = $(this);
        img.prop("delaySrc", function () { return img.prop("src") })
        img.prop("src", 'images/ajax-loader.gif');                                           
        alert(img.prop('delaySrc'));                                           
        alert(img.prop('src'));     
});
​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T13:08:59.870

您必须从传递给的函数返回一个值`attr`：

```
img.attr("delaySrc", function() { return img.attr("src"); }); 
```

或者更简单地说，只需传递值：

```
img.attr("delaySrc", img.attr("src")); 
```

# java - 如何回滚测试

> ID：11051216
> 
> 赞同：5
> 
> 时间：2012-06-15T13:05:17.987
> 
> 标签：java, spring

这是我的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:repositoryContextTest.xml" })
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class SeasonITest {
@Autowired
private SeasonDao seasonDao;

@Test
public void createSeason() throws Exception {
    Season season = new Season();
    season.setName("2012");
    seasonDao.createSeason(season);
} 
```

以及我的 bean 配置文件中的 dataSource

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost/tournament_system" />
    <property name="username" value="root" />
    <property name="password" value="root" />
    <property name="defaultAutoCommit" value="false"/>
    <property name="poolPreparedStatements" value="false"/>
    <property name="maxOpenPreparedStatements" value="0"/>
 </bean>

<bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

当我运行此测试时，会在我的数据库中创建一条新记录。

我怎样才能回滚这个事务？

这是我看到的日志输出：

```
2012-06-15 15:00:02,173 [main] INFO  - ionalTestExecutionListener - 
 Rolled back transaction after test execution for test context 
 [[TestContext@76db09 testClass = SeasonITest, 
   locations = array<String>['classpath:repositoryContextTest.xml'], 
   testInstance = org.toursys.repository.dao.SeasonITest@1265109, 
   testMethod = createSeason@SeasonITest, testException = [null]]] 
```

**更新：**

下面的所有答案都想改变我不想要的逻辑或数据库引擎。所以我提供正确答案的声誉点：

为什么当我有这个时： `@TransactionConfiguration(defaultRollback = true)`在事务配置测试中没有回滚以及如何修复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:19:56.240

如果您使用 MySQL 和 MyISAM 引擎，请尝试切换到 InnoDB。

对于更复杂的测试，您可能需要一个模拟框架或数据库重建。

EDIT1：根据文档，InnoDB 是事务性的，具有完整的 ACID 支持，而 MyISAM 支持原子操作。更多阅读：[事务和原子操作的区别](http://dev.mysql.com/doc/refman/5.6/en/ansi-diff-transactions.html)

EDIT2：在@TransactionConfiguration 中，defaultRollback 的默认值为 true，因此您应该添加 @TransactionConfiguration(defaultRollback=false) 而不是注释该行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:30:03.177

从表面上看，您的代码和配置看起来是正确的。但是，能否请您发布您的 SeasonsDAO 对象。我们首先需要验证 SeasonsDAO 是否为交易正确配置。

SeasonsDAO 需要参与与您的测试用例相同的 TransactionContext，并且无法使用您发布的代码进行验证。

您是否将 SeasonsDAO 标记为 @Transactional ？

如果不是，我不确定 TransactionProxyFactoryBean 将如何代理和以声明方式管理事务。

在高层次上，spring 使用代理的概念来执行许多服务，例如事务管理。

如果您将某些内容标记为@Transactional，Spring 将动态创建一个代理，该代理将实现与您的目标类相同的接口。一旦被代理，事务拦截器将包​​装对目标类的方法调用，并根据您可能指定的默认值或规则决定是回滚还是提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:40:04.543

在您的测试用例逻辑之后尝试以下方法。

```
TransactionAspectSupport.currentTransactionStatus().setRollbackOnly(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T06:53:13.150

您的 Dao 需要标记为@Transactional。

还要注释您的测试：

```
@TestExecutionListeners(TransactionalTestExecutionListener.class)  //Rolls back transactions by default 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T15:54:22.773

*   尝试扩展`AbstractTransactionalJUnit4SpringContextTests`
*   请注意，MySql MISAM 表不是事务性的，您需要使用 INNODB 类型的表（请参见[此处](http://forum.springsource.org/showthread.php?16884-Transactional-test-not-rolling-back-as-I-expected)和[此处](http://www.rimple.com/tech/2010/8/29/spring-junit-tests-not-rolling-back-it-may-not-be-you.html)）
*   你的 DAO 是否也标有 @Transactional？这可能会导致问题（请参阅[此处](https://stackoverflow.com/questions/4989523/spring-unit-test-case-is-not-rolling-back-insertion-of-a-record)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T08:35:01.257

尝试使用 @Transactional 注释测试方法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T13:19:10.343

还有其他解决方案：

1.  使用模拟框架（即 Mockito）来模拟数据源。这样你只会测试你的 DAO 逻辑
2.  使用可以为每个测试设置的单独数据库进行测试。您可以使用 DBUnit 来执行此操作。
3.  使用内存数据库（即 HSQL），这样更改就不会持续存在。

这样您就不必回滚您的更改。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T14:08:01.790

请确保您必须声明：

```
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

在你的 spring 配置文件中，例如（applicationContext.xml）。

正如@Lieber 已经解释的，但更多解释是：MySQL 服务器（版本 3.23-max 和所有版本 4.0 及更高版本）支持使用 InnoDB 事务存储引擎的事务。InnoDB 提供完全的 ACID 合规性。请参阅第 14 章，存储引擎。有关 InnoDB 在处理事务错误方面与标准 SQL 的差异的信息，请参阅第 14.3.13 节，“InnoDB 错误处理”。

MySQL 服务器中的其他非事务性存储引擎（例如 MyISAM）遵循不同的数据完整性范式，称为“原子操作”。在事务方面，MyISAM 表实际上总是在 autocommit = 1 模式下运行。原子操作通常提供可比的完整性和更高的性能。所以，MyISAM 事务存储引擎总是自动提交事务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-19T15:23:30.160

哈哈，就像三天前一样，我也发生过同样的事情。尝试将 transactionManager ="transactionManager" 添加到您的 @contextConfiguration：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:PersistenceHelper-context.xml"})
@TransactionConfiguration(defaultRollback = true, transactionManager = "transactionManager")
@Transactional 
```

此外，我对此不是 100% 确定，但您的 XML 文件应遵循“*-context”格式。如果您想查看我的 PersistenceHelper-context.xml 文件，请告诉我。

# javascript - 无法从 JavaScript 访问除“sqlite_master”之外的表

> ID：11051217
> 
> 赞同：1
> 
> 时间：2012-06-15T13:05:23.750
> 
> 标签：javascript, sqlite

我正在尝试通过 JavaScript 访问 SQLite 数据库：

```
function executeQuery(query, callback) {
    try {
        db.transaction(function (tx) {
                tx.executeSql(query, [], function(tx, result) {
                        if (typeof(callback) == "function") callback(result);
                        else if (callback != undefined) eval(callback + "(result)");
                    }, function(tx, error) { console.log(error); });
                });
    } catch (e) {
        alert("Failed to execute query because of " + e);
    }
} 
```

但是尽管包含几个表，数据库让我只从“sqlite_master”读取数据。

```
"SELECT name, sql FROM sqlite_master;" 
```

[http://img593.imageshack.us/img593/646/sqlitemaster.png](http://img593.imageshack.us/img593/646/sqlitemaster.png) （由于缺少代表无法插入图片）

任何有关这里发生的事情的见解，将不胜感激。

# eclipse - 使用m2eclipse在eclipse中的maven目标列表

> ID：11051221
> 
> 赞同：0
> 
> 时间：2012-06-15T13:05:34.257
> 
> 标签：eclipse, maven

我正在通过eclipse（helios）中的maven运行一个简单的spring hello world项目。我已经安装了 m2eclipse 插件。

当我右键单击

> 我的项目>>>>运行方式>>>>运行配置>>>>并在“目标”前面按“选择”

它显示没有目标的空列表。为什么？？？我已经尝试 [了 m2Eclipse (MAVEN) 中的空目标列表中](https://stackoverflow.com/questions/5088929/empty-goals-list-in-m2eclipse-maven)给出的解决方案，但它没有奏效

实际上我想要做的是编译我的项目，因为我在命令行中使用

> mvn 编译器：编译

插入。

在 Eclipse 中，我可以使用干净的资源：资源，但我无法编译我的项目。

**编辑：** 它显示错误：

> 请确保您使用的是 JDK 1.4 或更高版本，而不是 JRE（需要 com.sun.tools.javac.Main 类）。在大多数情况下，您可以通过设置 JAVA_HOME 环境变量来更改 Java 安装的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:00:52.323

我的列表也是空的，但是如果您已经知道要执行的目标，您可以简单地输入它。因此，如果您想编译您的项目，只需在“Goals:”之后键入“compile”，然后单击 Run。

# html - html5中导航的CSS错位

> ID：11051222
> 
> 赞同：2
> 
> 时间：2012-06-15T13:05:35.610
> 
> 标签：html, css

我有这个代码：

```
<header>
    <div id="title">
        <h1><img alt="logo" src="/Content/logo.gif" />&nbsp;&nbsp;&nbsp;&nbsp;Choose your product</h1>
    </div>
    <nav>
        <ul id="menu">
            <li>Products</li>
            <li>Auctions</li>
            <li>Segmentation</li>
        </ul>
    </nav>
</header> 
```

这是CSS：

```
body {
    /*background-color: #5c87b2;*/
    font-size: .85em;
    font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969;
}

header,
footer,
nav,
section {
    display: block;
}

p, ul {
    margin-bottom: 20px;
    line-height: 1.6em;
}

h1, h2, h3, h4, h5, h6 {
    font-size: 1.5em;
    color: #000;
}

h1 {
    font-size: 2em;
    padding-bottom: 0;
    margin-bottom: 0;
}

header, #header {
    position: relative;
    margin-bottom: 0px;
    color: #000;
    padding: 0;
    overflow:auto;
}

header h1, #header h1 {
    font-weight: bold;
    padding: 5px 0;
    margin: 0;
    color: #999;
    border: none;
    line-height: 1em;
    font-size: 48px !important;
    text-shadow: 1px 1px 2px #111;
}

ul#menu {
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: right;
}

ul#menu li {
    display: inline;
    list-style: none;
}

ul#menu li#greeting {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    color: #fff;
}

ul#menu li a {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
}

ul#menu li a:hover {
    background-color: #fff;
    text-decoration: none;
}

ul#menu li a:active {
    background-color: #a6e2a6;
    text-decoration: none;
}

ul#menu li.selected a {
    background-color: #fff;
    color: #000;
}

nav, 
#menucontainer {
    margin-top: 40px;
}

div#title {
    display: block;
    float: left;
    text-align: left;
} 
```

生成这个：

![html问题](../Images/9db78be8ca9bea30ed696c501170bea7.png)

如您所见，有两个问题，右侧的小滚动条和导航与顶部对齐而不是底部对齐。我尝试了垂直对齐属性，但没有帮助。左边的图片有一个溢出：自动属性。

**编辑：**我已经删除了浮动：左；和文本对齐：左；它修复了，但现在它们是一个在另一个之下......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:26:50.557

从`header, #header`规则中删除`overflow:auto`<-它使滚动条可见。

第二件事是`&nbsp;`（请！）用一些`padding`规则替换；）

# objective-c - 如何为导航项设置动画（闪烁或闪烁）

> ID：11051229
> 
> 赞同：0
> 
> 时间：2012-06-15T13:06:01.137
> 
> 标签：objective-c, ios, uiscrollview, core-animation

我有一个 scrollView 应用程序。每个 scrollView 项目都有自己的标题（navigationItem 标题）。现在，当用户在特定的 scrollView 项目上做某事（我有一种捕获此事件的方法）时，我想为导航项目设置动画。

我在想可能会不断地改变它的背景颜色或其他东西，或者如果可能的话，可能会更好地增加/减少它的透明度。

有没有人做过类似的事情？这样做的正确方法是什么？我没有我需要做的脚本要求，只是当前的 scrollView 项目（视图）与其他项目不同。

感谢您的任何建议

我从收到的回复中得到了它：

```
CABasicAnimation *animation=[CABasicAnimation animationWithKeyPath:@"opacity"];
    animation.duration=1.5;
    animation.repeatCount=1000000;
    animation.autoreverses=YES;
    animation.fromValue=[NSNumber numberWithFloat:1.0];
    animation.toValue=[NSNumber numberWithFloat:0.3];
    [button addAnimation:animation forKey:@"animateOpacity"]; 
```

我希望它不会太快太密集而导致癫痫发作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:16:05.723

UIBarButtonItem（很烦人）不是从 UIView 继承的，所以如果你尝试一下，CoreAnimation 会很笨拙地蹲下。`UIButton`但是，如果您使用 a和 a`UIImageView`作为属性来滚动自己的导航项`customView`，那么使用 UIView 的块动画包装器完全可以实现动画：

```
[UIView animateWithDuration:1.0f animations:^{
    [myButton setAlpha:0.0f];
    //the button is now invisible
}]; 
```

至于彩色动画，不幸的是，只有 CGColors 可能是动画的，然后，只有在非常粗略的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T09:43:51.020

您可以执行以下操作，而不是尝试为整个按钮设置动画。对于导航项的闪烁或闪烁动画，您只需更改其 tintColor

```
 // call timer where you want to start the blinking or flash like animation

 [NSTimer scheduledTimerWithTimeInterval:0.65f target:self selector:@selector(animate) userInfo:nil repeats:YES];

 -(void)animate
  {

   if (flagAnimate == 0) {
   self.navigationItem.leftBarButtonItem.tintColor = [UIColor redColor];
     flagAnimate = 1;
  }
   else if (flagAnimate == 1)
  {
 self.navigationItem.leftBarButtonItem.tintColor = [UIColor grayColor];
     flagAnimate = 0;

  } 
```

# jenkins - 解决方法：聚合下游测试结果

> ID：11051235
> 
> 赞同：8
> 
> 时间：2012-06-15T13:06:24.273
> 
> 标签：jenkins

据我所知，“聚合下游测试结果”功能无法按预期工作（而且很难找到有用的文档）。我想实现非常相似的功能：

作业*构建*并行触发作业*T1*和*T2 （其中**T1*执行 FindBugs，*T2*执行 PMD）。

**场景 1：** 一旦*T1*和*T2*完成（我可以使用“加入”插件来实现），我想收集工件（*T1* /findbugs.xml 和*T2* /pmd.xml）。然后对这些进行分析并生成漂亮的统计数据。

**场景 2（我更喜欢这个）：** 与场景 1 类似，但分析是作为*T1*和*T2*的一部分进行的（并行进行！）。一旦*T1*和*T2*完成，分析结果就会组合成漂亮的统计数据。

**我的问题：** 对于场景 1，我不知道如何引用下游项目*T1*和*T2*。我可以使用最后一个成功的构建，但是在考虑许多并行作业时这似乎很奇怪。

对于场景 2，我不知道如何导入 FindBugs/PMD/Checkstyle/SLOCcount/... 插件所需的数据，以便相应的图形（也是？）出现在*T1* /*T2* 之外。

谢谢，卡斯滕

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T14:02:18.247

这是一个稍微简单的场景的大纲，但我认为您可以轻松地将其推广到多个下游作业的情况。诀窍是在下游作业中使用“标记”参数。

设*P*为父作业，*D*为下游作业。

1.  *P*的实例（构建）通过构建步骤（**而不是**构建后步骤）通过[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)调用*D*并等待*D*完成。连同其他参数，*P*将一个参数传递给*D* - 我们称之为*PARENT_ID* - 基于*P*的构建的*BUILD_ID*。
******   *D*执行测试并将它们存档为工件（连同 jUnit 报告 - 如果适用）。*   *然后P*执行一个外部 Python（或内部 Groovy）脚本，该脚本通过*PARENT_ID找到**D*的适当构建（您迭代*D*的构建并检查*PARENT_ID*参数的值）。然后，该脚本将工件从*D*复制到*P*，然后*P*发布它们。*****

 *****如果使用 Python（这就是我所做的） - 使用[Python JenkinsAPI wrapper](http://pypi.python.org/pypi/jenkinsapi)。如果使用 Groovy - 利用[Groovy 插件](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin)并将您的脚本作为系统脚本运行。然后，您可以通过其[Java API](http://javadoc.jenkins-ci.org/)访问 Jenkins 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-24T13:19:46.473

malenkiy_scot 的帖子有两个补充：

1.  您实际上不需要描述中第 3 步的脚本：“从另一个项目复制工件”构建步骤允许指定已经包含参数的源作业。

    例如，使用父符号，它可以`D`通过使用`D/PARENT_ID=EXPECTED_VALUE`作为“项目名称”从正确执行作业中复制工件。

2.  而不是手动连接`$JOB_NAME`，`$BUILD_ID`您可以使用预定义的`$BUILD_TAG`（本质上是相同的）。有关标准环境变量的完整列表，请参阅[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-05-06T12:15:01.970

Jenkins 插件[https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)应该有助于满足这些要求。*****

# javascript - 滚动查看ajax页面

> ID：11051237
> 
> 赞同：0
> 
> 时间：2012-06-15T13:06:55.357
> 
> 标签：javascript, jquery, html, scroll, overflow

情况是这样的：我有一个带有溢出自动的 div，其中包含一个表。包含此 div 的页面被 ajaxed 到主页面中。我想要一个javascript（jquery很好）方法在ajaxed页面加载上运行，它将div滚动到带有id的某个tr。最好的方法是什么？我在下面添加了一个小规模示例。

**尝试过**

*调整 ajax 调用以包含 scrolltoview (url#id) [结果：404 错误对象未找到]*

*jquery scrollTop [结果：当前正在测试。没有滚动发生]*

AJAX 页面

```
<%@ Page Language="C#" Inherits="APTEIT.scrolltest" %>
<script src="Utilities/Javascript/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#divy").scrollTop($("#25").position().top);
    });
</script> 
```

AJAX CS（只是为了轻松填充表格）

```
using System;
using System.Web;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;
using System.Web.UI.WebControls;

namespace APTEIT
{
    /*Codebehind for import.aspx*/
    public class scrolltest: Page
    {
        public scrolltest()
        {
        }

        protected void Page_Load()
        {
            Response.Write("<div style=\"overflow:auto;border-style:solid;border-width:2px;border-color:Black;height:200px;width:200px;\" id=\"divy\">");
            Response.Write("<table style=\"border-collapse:collapse\"><tr><th>Number</th><th>Thingy</th></tr>");
            for(int i = 0; i < 100; i++)
            {
                Response.Write("<tr id=\"" + i + "\"><td style=\"border-style:solid;border-width:1px;border-color:black;\">" + i + "</td><td style=\"border-style:solid;border-width:1px;border-color:black;\">thingy" + i + "</td></tr>");
            }
            Response.Write("</table></div>");
        }

    }
} 
```

主页（不包括ajax方法。简单地用ajax页面的异步加载填充“divy2”）

```
<%@ Page Language="C#" %>
<html>
<head>
<script src="Utilities/Javascript/Utilities.js"></script>
<script src="Utilities/Javascript/jquery-1.7.1.min.js"></script>
</head>
<body>
<script type="text/javascript">
    $(document).ready(function () {
        ajax("scrolltest.aspx", "divy2");
    });
</script>
<div id="divy2">

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:26:53.227

# hadoop - 使 Hive UDF 在会话中持续存在？

> ID：11051246
> 
> 赞同：0
> 
> 时间：2012-06-15T13:07:14.123
> 
> 标签：hadoop, user-defined-functions, hive

如何创建一个临时函数：

```
CREATE TEMPORARY FUNCTION function_name AS class_name 
```

坚持后续的 Hive 会话而不必每次都重新创建它？这是可能的还是有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:04:42.407

我发现的最好的方法是将此代码添加到 .hiverc

# iphone - 排序我的 nsmutabledictionary

> ID：11051248
> 
> 赞同：0
> 
> 时间：2012-06-15T13:07:17.987
> 
> 标签：iphone, objective-c, xcode, sorting, nsdictionary

对该字典进行排序的代码是什么：

```
{
        "a) Saudi Arabia" =     (
            "2012/06/04 Huge Sandstorm",
            "2011/03/30 Huge Sandstorm"
        );
        "b) Niger" =     (
            "2012/05/27 Huge Sandstorm"
        );
        "c) ****** QUATRE" =     (
            "2011/03/30 7Huge Sandstorm over niger",
            "2011/03/30 8Huge Sandstorm over niger",
        );
    } 
```

对于我的 UItableView ？

使用此代码，我的标题标题部分是有序的，但不是内容：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];
    return [allKeys objectAtIndex:section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";       
    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];           
    }

    NSArray *allKeys = [states allKeys] ;
    NSString *curKey = [allKeys objectAtIndex:indexPath.section];
    NSArray *curArray = [states objectForKey:curKey];
    curValue = [curArray objectAtIndex:indexPath.row];

    cell.textLabel.text = curValue; 
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;   
    [[cell textLabel] setFont:[UIFont systemFontOfSize:12.0]];
    return cell;  
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:02:50.450

//使用这段代码

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
     return [[states allKeys] count];//returns the number of key/object pairs
 }

 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
 {
      NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];
      return [allKeys objectAtIndex:section];
  }

  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
       NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];
       NSString *curKey = [allKeys objectAtIndex:section];
       NSArray *curArray = [states objectForKey:curKey];

       return [curArray count];
     }

     - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
          static NSString *CellIdentifier = @"Cell";

           UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

     }
     // Configure the cell...

     //---------- CELL BACKGROUND IMAGE -----------------------------
     UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
     UIImage *image = [UIImage imageNamed:@"LightGrey.png"];
     imageView.image = image;
     cell.backgroundView = imageView;
     [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
      [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

     NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];

     NSString *curKey = [allKeys objectAtIndex:indexPath.section];
    NSArray *curArray = [[states objectForKey:curKey]     sortedArrayUsingSelector:@selector(compare:)];
     NSString *curValue=@"";
     if([curArray count]>indexPath.row) 
         curValue = [curArray objectAtIndex:indexPath.row];

   if(curValue)
       cell.textLabel.text = curValue;

     cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

     [[cell textLabel] setFont:[UIFont systemFontOfSize:12.0]];
     return cell;

 }

  - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

     return 60;

   } 
```

可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:17:50.560

您正在对字典进行排序，`titleForHeaderInSection`但不在`cellForRowAtIndexPath`.

`UITableView`也许您可以在创建整个字典时对其进行排序，以节省每次刷新时都必须重新排序。这样，您只需要对其进行一次排序，然后键和值都将始终以正确的顺序填充您的部分标题和单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:18:01.630

它在这里可能有用。如果您有疑问，请告诉我。在调用 tableview 之前编写此代码。

```
 NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"birthDate" ascending:YES selector:@selector(compare:)]; //pass the key of your dictionary here
[allKeys sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:18:11.133

您将需要对`curKey`

```
NSArray *curArray = [states objectForKey:curKey];
//Add this line after currArray
NSArray *sorterCurArray = [curArray sortedArrayUsingSelector:@selector(compare:)];
//Use sorterCurArray instead
curValue = [sorterCurArray objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:21:15.510

```
 write the same code in your cellForRowAtIndexPath: too for accessing key

NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T13:50:27.477

```
//
//  ViewController.m
//  StoryboardTutorial
//
//  Created by Kurry Tran on 10/20/11.
//  Copyright (c) 2011 __MyCompanyName__. All rights reserved.
//

#import "ViewController.h"
#import "DetailViewController.h"
@implementation ViewController
@synthesize states,datasource,curValue,sortedArray,descriptor;
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [self setupArray];
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.
}

-(void)setupArray{

    NSURL *myUrl=[NSURL URLWithString:@"the link with the dictionary"];
  //  NSString *str = [NSString stringWithContentsOfURL:myUrl usedEncoding:nil error:nil]; //load above string here
    NSMutableDictionary *dict=[NSMutableDictionary dictionaryWithContentsOfURL:myUrl];

//    NSString *str =@"# 2012/20110930 Huge Sandstorm over niger# just for the test/20110330 AHuge Sandstorm over niger/20110330 BHuge Sandstorm over niger";

//    NSArray * firstArry = [str componentsSeparatedByString:@"#"];
//    NSMutableArray *secondArry = [[NSMutableArray alloc] init]; //Will hold the # titles
//    NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; //Will hold the strings related to # title
//    for(NSString *firstArryStr in firstArry)
//    {
//        NSArray *tempArry = [firstArryStr componentsSeparatedByString:@"\n"];
//        NSMutableArray *titleStingsArry = [[NSMutableArray alloc] init];
//        for (int i=0; i< [tempArry count];i++) {
//            if (i==0) {
//                NSString *title = [tempArry  objectAtIndex:i];
//                [secondArry addObject:title];
//                [dict setValue:titleStingsArry  forKey:title];
//            } else {
//                [titleStingsArry  addObject:[tempArry  objectAtIndex:i]];
//            }
//        } 
    NSLog(@"%@",dict);

//    }    

//    NSString *myString = @"20110330 AHuge Sandstorm over niger/20110330 BHuge Sandstorm over niger/20110330 CHuge Sandstorm over niger/20110330 1Huge Sandstorm over niger/20110330 2Huge Sandstorm over niger/20110330 3Huge Sandstorm over niger/20110330 4Huge Sandstorm over niger/20110330 5CHuge Sandstorm over niger/20110330 6Huge Sandstorm over niger";
//    NSArray *event = [myString componentsSeparatedByString:@"/"];
//    states = [NSMutableArray arrayWithArray:event];

    self.states = [NSMutableDictionary dictionaryWithDictionary: dict];
datasource = [dict allKeys];

    self.navigationItem.title = @"test";

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [states count];//returns the number of key/object pairs
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];

    return [allKeys objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSArray *allKeys = [states allKeys];
    NSString *curKey = [allKeys objectAtIndex:section];
    NSArray *curArray = [states objectForKey:curKey];

    return [curArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = (UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }
    // Configure the cell...

    //---------- CELL BACKGROUND IMAGE -----------------------------
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
    UIImage *image = [UIImage imageNamed:@"LightGrey.png"];
    imageView.image = image;
    cell.backgroundView = imageView;
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

    NSArray *allKeys = [[states allKeys] sortedArrayUsingSelector:@selector(compare:)];

    NSString *curKey = [allKeys objectAtIndex:indexPath.section];
    NSArray *curArray = [states objectForKey:curKey];

    if([curArray count]>indexPath.row) curValue = [curArray objectAtIndex:indexPath.row];

    cell.textLabel.text = curValue;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    [[cell textLabel] setFont:[UIFont systemFontOfSize:12.0]];
    return cell;

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    NSArray *allKeys = [states allKeys];
    NSString *curKey = [allKeys objectAtIndex:indexPath.section];
    NSArray *curArray = [states objectForKey:curKey];
    curValue = [curArray objectAtIndex:indexPath.row];

    DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
    // detail.state = [states objectAtIndex:indexPath.row];
    detail.state = curValue;
    [self.navigationController pushViewController:detail animated:YES];

}

//- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
//{
//    //normal cell acquisition code
//    
//    NSArray *allKeys = [states allKeys];
//    NSString *curKey = [allKeys objectAtIndex:indexPath.section];
//    NSArray *curArray = [states objectForKey:curKey];
//    NSString *curValue = [curArray objectAtIndex:indexPath.row];
//    //Do something with the string
//
//}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    return 60;

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

# c# - 在 calltask 启动器完成时收到通知

> ID：11051249
> 
> 赞同：2
> 
> 时间：2012-06-15T13:07:23.170
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我需要在我的 wp7 应用程序中启动呼叫任务。一旦我启动此任务，它就会拨打号码，但此任务不会强制我的应用程序在后台发送，因此一旦呼叫结束，我的应用程序就会返回。我如何在我的应用程序中通知此任务已完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:10:04.863

您应该查看 Unobscured 事件，不幸的是，它没有提供您希望的那么多上下文，但是如果您知道您调用了 PhoneCallTask​​，那么您几乎可以确定 Unobscured 事件发生是因为您从该任务返回：-

[http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationframe.unobscured(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationframe.unobscured(v=vs.92).aspx)

# java - JFormattedTextField 中的严格 24 小时制时间

> ID：11051250
> 
> 赞同：6
> 
> 时间：2012-06-15T13:07:25.270
> 
> 标签：java, swing, simpledateformat, jformattedtextfield

我正在尝试创建一个只接受 24 小时时间的 JFormattedTextField。

我非常接近解决方案，但有一种情况下以下代码示例不起作用。

如果您输入时间“222”并从字段中更改焦点，则时间将更正为“2202”。我希望它只接受完整的 4 位数 24 小时时间。这段代码几乎在所有情况下都能按我的意愿工作，除了我刚才提到的那个。有什么建议么？

```
 public static void main(String[] args) throws ParseException {
        DateFormat dateFormat = new SimpleDateFormat("HHmm");
        dateFormat.setLenient(false);

        DateFormatter dateFormatter =  new DateFormatter(dateFormat);

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JFormattedTextField textField = new JFormattedTextField(dateFormatter);
        frame.add(textField, BorderLayout.NORTH);

        frame.add(new JTextField("This is here so you can change focus."), BorderLayout.SOUTH);
        frame.setSize(250, 100);
        frame.setVisible(true);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:37:55.793

正如其他人所提到的，您最好的选择可能是验证输入字符串的长度。我首选的方法是子类化`SimpleDateFormat`以将所有解析逻辑保存在一个地方：

```
public class LengthCheckingDateFormat extends SimpleDateFormat {

  public LengthCheckingDateFormat(String pattern) { super(pattern); }

  @Override
  public Date parse(String s, ParsePosition p) {
    if (s == null || (s.length() - p.getIndex()) < toPattern().length()) {
      p.setErrorIndex(p.getIndex());
      return null;
    }
    return super.parse(s, p);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:26:50.130

我想知道，因为它`DateFormatter`似乎“几乎”完成了所有的把戏。

因此，为什么不覆盖其进行最终验证和格式化的方法一，以将所有输入`String`的太短的 s 视为 empty `String`。

```
 DateFormatter dateFormatter = new DateFormatter(dateFormat) {
            @Override
            public Object stringToValue(String text) throws ParseException {
                if(!getFormattedTextField().hasFocus())
                    if (text.length() != 4) {
                        return null;
                    }
                return super.stringToValue(text);
            }            
        }; 
```

**编辑：**

正如@nIcE cOw 所建议的，最简单的方法是在失去焦点时提供它：

```
 final JFormattedTextField textField = new JFormattedTextField(dateFormatter);
    textField.addFocusListener(new FocusAdapter() {
        @Override
        public void focusLost(FocusEvent e) {
            super.focusLost(e);
            if(textField.getText().length() != 4)
                textField.setText("");
        }
    }); 
```

# java - 在使用 baseadapter 的列表视图上设置点击事件时需要帮助

> ID：11051256
> 
> 赞同：0
> 
> 时间：2012-06-15T13:07:52.953
> 
> 标签：java, android, baseadapter

下面是我设置列表视图的代码。我想在列表视图上实现一个点击事件，但它不起作用。我已经在清单中为列表视图设置了可点击属性。此外，我的列表视图位于相对布局内，而此相对布局位于线性布局中。我的 list_details 在相对布局中有 textview 和 imageview。你能帮我解决这个问题吗？提前致谢。

```
public class ListImageBaseAdapter extends BaseAdapter {
...

public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.list_details, null);
        holder = new ViewHolder();
        holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

        System.out.println(titles.length);

        holder.txt_itemName.setText(titles[position]);
        holder.itemImage.setImageResource(imgid[position]);

            holder.itemImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("here1");
        }
    });

    holder.txt_itemName.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("here2");
        }
    });

    return convertView;
}
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:11:35.323

```
 I want to implement a click event on the listview, but it is not working. 
```

检查两件事

1-你有没有以这种方式实现列表点击？

```
 list.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                        // @todo
                }
        }); 
```

2-如果是的话，列表行中是否有任何可点击的项目，然后参考

[Android：具有多个可点击按钮的 ListView 元素](https://stackoverflow.com/questions/1709166/android-listview-elements-with-multiple-clickable-buttons)

[http://mylifewithandroid.blogspot.in/2011/08/focus-problems-with-list-rows-and.html](http://mylifewithandroid.blogspot.in/2011/08/focus-problems-with-list-rows-and.html)

用于处理对行中项目的点击：

```
1- Imaplent you activity with View.OnClickListener
2- Pass it to adpter 
3- holder.itemImage.setOnClickListener(mActivity)
4- override the View.OnClickListener in activity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:18:52.760

你有几个选择。

您可以在 getView() 方法中返回 convertView 之前应用侦听器。像这样：

```
public View getView(int position, View convertView, ViewGroup parent) {
    .....
    convertView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    return convertView;
} 
```

或者（正如@DheereshSingh 提到的）您可以在包含ListView 的Activity 内部从上一层完成此操作。

```
ListView lv = (ListView)findViewById(R.id.listView);
lv.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:52:25.177

如果您使用的是列表视图，您始终可以使用 Dheeresh 的方法。

如果您只是在寻找 onclick，您也可以使用

```
View view = convertView;
view.setTag(position);//Sets a position
view.setonclicklistener(new OnClickListener){//creates a onClicklistener for tag

public void onClick(View v){
//Do something
}

} 
```

您也可以将其用于网格视图。

如果您想做额外的事情，您实际上可以将 baseadapter 中的每个项目设置为每次都有点击事件来执行不同的操作。

# sql - 如何在 SQL Server 中实现 Used()

> ID：11051260
> 
> 赞同：0
> 
> 时间：2012-06-15T13:08:01.277
> 
> 标签：sql, sql-server, foxpro

请协助这个 foxpro 到 sql server 迁移要求..

我在 foxpro 中有这个函数 USED() ，它确定一个表是否在工作区中打开。SQL Server 中是否有任何此类功能可以完成相同的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:53:23.907

我很久以前就从 Foxpro 搬到了 SQL。快速了解它在 SQL Server 中的工作原理：

*   在 SQL Server 中，表（以及索引、视图、存储过程和其他东西的负载）是在数据库中定义/创建的。
*   整个表存储在单个数据库中；一个数据库可以包含很多表（和其他东西）。
*   数据库的所有内容都存储在文件中。文件不跨数据库共享。每个数据库至少有两个文件，1 个数据和 1 个日志。（它会很快变得复杂。）
*   当数据库“打开”时，其所有内容（所有表、视图等）都可供使用。把它想象成 Word 或 Excel：如果文件打开了，您就可以使用它（文件被锁定，无法通过操作系统或任何其他应用程序修改）；如果文件已关闭，则内容无法访问，您可以删除或重命名它们。在 SQL 中，始终保持数据库打开的效率要高得多。
*   SQL 有*很多*访问和权限控制。仅仅因为数据库是开放的并且可以使用并不意味着任何人都可以访问它。**登录**允许您打开SQL**连接；****用户**是在数据库中为登录定义的，用于控制给定登录可以访问数据库中的哪些对象（表等）。
*   所以：用户或应用程序通过登录打开与 SQL Server 的连接。登录被授予对指定数据库以及这些数据库中指定对象的访问权限。连接打开后，您/应用程序可以访问他们想要的任何内容。然而：
*   每个连接都有一个“当前数据库”上下文，感觉很像 Foxpro`USE`命令。示例如下。

假设我的登录名可以访问两个数据库，TestA 和 TestB。两个数据库都包含表 My​​Data，每个表包含不同的数据（A 数据和 B 数据）。当我登录时，我的上下文被设置为一个数据库，比如说 TestA。如果我运行`SELECT * from MyData`，我将从数据库 TestA 中获取该表的内容。如果我想从 TestB 获取数据，我要么必须运行`SELECT * from TestB.dbo.MyDta`——指定我从中获取数据的数据库——要么我必须更改数据库的上下文；以编程方式，这是通过**使用**命令完成的，例如“USE TestB”。

这是对“它是如何工作的”的非常简单的描述。这都是编程，这意味着有几十种方法可以执行给定的操作，具体取决于您使用的工具（应用程序）和您想要完成的任务。我强烈建议阅读 SQL 联机丛书中的所有内容，SQL Server 附带的文档——微软在记录这个产品方面做得非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:48:17.883

菲利普关于在 SQL 中“开放”的一切都是正确的。但是，我想我会以不同的方式表达它。当 SQL-Server 运行时（因为它通常是在服务器本身启动时启动的自动化服务），任何已“附加”的“数据库”都可用于查询，并且基本上无法从其他任何地方的操作系统访问，因为 SQL 具有打开文件的“句柄”，从而防止复制、删除、移动等......

如果您确实想复制/移动到其他位置甚至另一台服务器，则必须分离释放句柄的“数据库”，您可以做任何事情。

至于你可以在 SQL-Server 中做什么。您甚至不必显式打开数据库，但可以通过 database.table 引用限定您的查询......例如

```
select t1.field
   from YourDatabase.SomeTable t1
   where t1.SomeField = ?whatever 
```

As long as the database is attached, you should be good to go.

# android - ConnectivityManager.getBackgroundDataSetting() 已弃用，改用什么？

> ID：11051263
> 
> 赞同：2
> 
> 时间：2012-06-15T13:08:11.940
> 
> 标签：android

以前可以使用：

```
ConnectivityManager.getBackgroundDataSetting(); 
```

检查用户是否有后台数据设置 = true。现在不推荐使用此方法：

```
http://developer.android.com/reference/android/net/NetworkInfo.html 
```

文档说要使用：

```
ConnectivityManager.getActiveNetworkInfo(); 
```

相反，它返回一个 NetworkInfo 对象，但是 NetworkInfo 中的等效检查是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T16:18:24.343

如果`getActiveNetworkInfo()`是`null`，则您没有网络连接，或者是因为设备没有网络连接，或者是因为用户设置（例如，带宽上限）阻止您的应用程序建立网络连接。

# c# - 将 C# Winform 与 Outlook 2010 集成？

> ID：11051271
> 
> 赞同：0
> 
> 时间：2012-06-15T13:08:33.367
> 
> 标签：c#, winforms, outlook, outlook-addin, outlook-2010

我需要制作一个 C# Win Form 并将其附加到 Outlook 2010。我想通过单击一个按钮从 Outlook 内部工作。请指导我怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:24:55.940

这是一个非常笼统的问题。要总体了解带有 .NET 的 Outlook 加载项，请从[Office 开发中心的“](http://msdn.microsoft.com/en-us/office/default) [Outlook 和 Visual Studio](http://msdn.microsoft.com/en-US/office/hh128768.aspx) ”部分开始。

无论如何，查看如何将表单添加到 Outlook 是错误的开始方式，因为表单用于许多事情。

首先阅读与您尝试执行的特定 Outlook 工作相关的部分。如果您想自定义消息或任务的视图，您应该阅读如何自定义任务或消息。如果要添加新命令，则应检查如何自定义功能区。

# wordpress - 如何将此网址转换为代码（wordpress）？

> ID：11051276
> 
> 赞同：0
> 
> 时间：2012-06-15T13:08:53.000
> 
> 标签：wordpress

我有带有 url 字段的图像，如何使用 wordpress api 获取此条目？

![在此处输入图像描述](../Images/f8253fe01015a6ff58b6e51add259e26.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:25:42.613

如果您需要获取大图像的 url，可以使用以下代码：

```
if ( has_post_thumbnail() ) {
    full_image_url = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:14:24.373

您可以将其发送到输入字段（即使隐藏）。然后在 PHP 中使用该输入字段值 wordpress 本身使用的默认值是 jQuery ：

```
 window.send_to_editor = function(html) {
         imgurl = jQuery('img',html).attr('src');
         jQuery('#your_input_name').val(imgurl);
         tb_remove();
        } 
```

# ruby - ruby 小型 http 服务器（tcp 服务器）通过套接字发送图像

> ID：11051279
> 
> 赞同：2
> 
> 时间：2012-06-15T13:09:09.827
> 
> 标签：ruby, sockets, tcp

我创建了一个小型 HTTP 服务器，`TCPServer.new`原因是我没有使用任何服务器库，我只需要提供一个 HTML 页面、一个 JS 文件和一些图像。

我想知道当我收到文件请求时如何发送图像`/favicon.ico`或`/head.jpg`. 我应该使用`socket.send`吗？或者我应该使用缓冲区发送？

```
File.open('../Aimages/head.jpg', 'rb') do |file|
    while chunk = file.read(SIZE)
    socket.write(chunk)
  end
end 
```

发送图像时标题重要吗？

# git - 组织 git 分支

> ID：11051289
> 
> 赞同：23
> 
> 时间：2012-06-15T13:09:54.647
> 
> 标签：git, branch

我有一个使用 git 作为 VCS 的大型项目。在任何给定时间，我都在努力实现一些功能/错误修复等。对于任何给定的功能/错误，创建分支层次结构会很好——例如

```
$ git branch
  feature1
       sub-branch1
       sub-branch2
       sub-branch3
  feature2
       sub-brancha
      *sub-branchb  #<--currently checked out
       sub-branchc
  bugfix1
       sub-branch-foo

$ git checkout sub-brancha
$ git branch
  feature1
       sub-branch1
       sub-branch2
       sub-branch3
  feature2
      *sub-brancha  #<--currently checked out
       sub-branchb  
       sub-branchc
  bugfix1
       sub-branch-foo 
```

是否可以做这样的事情，还是我需要采用更原始的命名方案？

**编辑**

为了使我正在寻找的内容更加具体，如果 feature1 是一个 git 分支，那么在上面的示例中，sub-branch1 将全部由`git checkout -b sub-branch1`分支`feature1`（从 master 分支）创建。例如：

```
$ git checkout master
$ git checkout -b feature1
$ git checkout -b testing
$ git branch
master
   feature1
     *testing
$ git checkout master
$ git checkout -b feature2
$ git branch
master
   feature1
      testing
  *feature2 
```

让 git branch 简单地按分支的来源组织分支（带有一点额外的缩进）可能对我的目的来说已经足够了......虽然如果我能获得超级奖励积分：

```
$ git branch
  feature1
       testing
  feature2
       testing
  bugfix1
       sub-branch-foo 
```

通过某种方式来管理“feature1/testing”和“feature2/testing”之间的名称冲突

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T13:34:14.657

您可以使用命名模式，如 feature1/sub-branch、feature2/sub-branchb 等，名称中的斜线对 git 来说不是问题。但是，分支仍将作为普通分支处理（但我不知道如何以不同方式处理子分支）。git branch 命令当然会列出分支的全名，而不是示例中的方式。

有趣的是，包含斜杠的命名模式将在 .git/refs/heads/ 中创建目录层次结构。也许这对于使用一些低级命令处理子分支很有用？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:39:31.613

Git 中的分支实际上是 Git 对象存储中键的符号引用。引用文档[（“什么是分支”）](http://git-scm.com/docs/user-manual.html#what-is-a-branch)：

> > 当我们需要准确时，我们将使用“分支”一词来表示开发线，而“分支头”（或只是“头”）表示对分支上最近提交的引用。在上面的示例中，名为“A”的分支头是指向一个特定提交的指针，但我们将导致该点的三个提交的行都称为“分支 A”的一部分。

Git 仅管理存储在`.git/refs`. 这些引用根本没有设计为树状结构。

我建议使用传达层次结构的分支命名方案。

另一种可能性是编写一个为您处理分支树的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T21:32:35.083

我个人在早期版本的 Git 中使用过[这种](http://zanematthew.com/git-nested-branches-growth/)方法，但似乎 1.8+ 版本不再支持嵌套分支。

很高兴看到 Git Tower 中的 UI 支持。

![在此处输入图像描述](../Images/f139eb56fae79518334a062776d64918.png)

# wpf - 当 Content 不仅仅是字符串 WPF 时绑定到 ComboBoxItem 内容

> ID：11051293
> 
> 赞同：0
> 
> 时间：2012-06-15T13:10:05.627
> 
> 标签：wpf, binding, combobox

我有一个带有 3 个 ComboBoxItems 的 ComboBox，每个 ComboBoxItems 在堆栈面板中都包含一个图像和文本。我想将 SelectedValue 绑定到 TextBlock 文本，但不能只绑定到内容，因为这会返回堆栈面板。如何将 SelectedValue 绑定到子 TextBlock 控件？我不需要通知任何其他我只需要 SelectedValue 来返回字符串。

```
<ComboBox>
  <ComboBoxItem>
    <StackPanel Orientation="Horizontal">
        <Image Source="ImagePath/Image.bmp"/>
        <TextBlock Text="MyTextString"/>
    </StackPanel>
  </ComboBoxItem>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:22:05.677

SelectedValue 实际上是与绑定相关的属性。在您的情况下，您正在静态创建组合框项目。

检查这个

[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath.aspx)

在您的情况下，您可以在 ComboBoxItem 上添加 Tag 属性

```
<ComboBox Height="40" x:Name="cmb" SelectedValuePath="">
            <ComboBoxItem Tag="MyTextString">
                <StackPanel Orientation="Horizontal" >
                    <Image Source="ImagePath/Image.bmp"/>
                    <TextBlock Text="MyTextString"/>
                </StackPanel>
            </ComboBoxItem>
        </ComboBox> 
```

并在代码中访问它

```
 MessageBox.Show((cmb.SelectedItem as ComboBoxItem).Tag.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:31:18.410

一种简单的方法是将您的 coboboxitem 信息保存在包装器中，并将这些包装器的集合作为组合框的 itemssource。

```
public class MyComboboxData
{
    public string MyImagePath { get; set; }
    public string MyText { get; set; }
} 
```

在您的代码隐藏中：

```
 public ObservableCollection<MyComboboxData> MyData { get; private set; }

    public MyViewWithCombobox()
    {
        InitializeComponent();

        this.MyData = new ObservableCollection<MyComboboxData>()
                          {
                              new MyComboboxData(){MyImagePath = "ImagePath/Image.bmp", MyText = "MyTextString"},
                              new MyComboboxData(){MyImagePath = "ImagePath/Image2.bmp", MyText = "MyTextString2"}
                          };

        this.DataContext = this;
    } 
```

现在您可以简单地绑定到您想要的所有内容：

```
<Grid>
    <ComboBox Name="comboBox1" ItemsSource="{Binding MyData}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding ImagePath}"/>
                    <TextBlock Text="{Binding MyText}"/>
                </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>
    <TextBlock Text="{Binding ElementName=comboBox1, Path=SelectedItem.MyText}"/>
</Grid> 
```

ps: 看看MVVM with viewmodel and binding这些任务很容易实现

# c++ - 为什么打印机设备上下文比 MFC 中报告的要小？

> ID：11051297
> 
> 赞同：1
> 
> 时间：2012-06-15T13:10:23.063
> 
> 标签：c++, printing, mfc, gdi

我在使用 MFC 打印时遇到了问题。问题是我被告知可打印区域是 201x288mm，但我实际上发现它是 200.9x287.9mm。

为了说明这个问题，我使用向导在 Visual Studio 2008 中创建了一个空白的 TabbedDocument MFC 应用程序。在我的“视图”类（CPrintingExampleView - PrintingExample 是我给测试项目的名称）中，我将以下代码添加到 OnDraw(CDC* pDC) 方法中：

```
pDC->SetMapMode( MM_LOMETRIC );

int width = GetDeviceCaps( pDC->m_hDC, HORZSIZE );
int height = GetDeviceCaps( pDC->m_hDC, VERTSIZE );

// TODO: add draw code for native data here
RECT rect;
int result = pDC->GetClipBox( (LPRECT)&rect );

//draw a 201x288mm square
pDC->MoveTo( 0, 0 );
pDC->LineTo( 2010, 0 );
pDC->LineTo( 2010, -2880 );
pDC->LineTo( 0, -2880 );
pDC->LineTo( 0, 0 );

BOOL visible = pDC->PtVisible( 0, 0 );
visible = pDC->PtVisible( 0, -1 );
visible = pDC->PtVisible( 1, 0 );
visible = pDC->PtVisible( 1, -1 );
visible = pDC->PtVisible( rect.right, rect.bottom );
visible = pDC->PtVisible( rect.right-1, rect.bottom+1 );
visible = pDC->PtVisible( rect.right-1, rect.bottom );
visible = pDC->PtVisible( rect.right, rect.bottom+1 ); 
```

现在，忽略硬编码值等 - 这只是问题的一个说明 - 在打印对话框上单击“确定”后（当传递给 OnDraw 的 CDC* 是打印机的 DC 时），我得到的 rect 值为： left = 0, top = 0, right = 2010, bottom = -2880，这与 width 和 height 变量的值分别为 201 和 288 相符。接下来我绘制 201x288mm 的盒子，这个打印没有右手和底线，它们被剪裁了。然后为了确认问题，我调用 PtVisible 来检查各个点，唯一未通过此检查的点是：

```
 (rect.right, rect.bottom)
    (rect.right-1, rect.bottom)
    (rect.right, rect.bottom+1) 
```

我展示的代码是我对生成的程序所做的唯一编辑。谁能确认这确实是一个问题？如果是这样，任何人都可以建议处理这个问题的正确方法是什么？我的直觉是“调整”从 GetDeviceCaps() 检索到的信息，并假设宽度和高度比报告的小 0.1 毫米，但我觉得我错过了什么？

# vb.net - 如何唯一标识动态加载的控件

> ID：11051298
> 
> 赞同：3
> 
> 时间：2012-06-15T13:10:23.617
> 
> 标签：vb.net, winforms

我有一个动态创建控件并自行添加事件处理程序的表单（已经对那部分进行了编码）。至于现在，我有一个带有对象列表的隐藏表，它遍历控件并按名称找到它（使用 Me.Controls 集合）。但是，有谁知道动态创建的控件是否有特殊的唯一代码？

我相信有一个，但我不知道......

任何帮助将不胜感激！

多伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:13:12.400

所有控件都有一个`Handle`应该是唯一的属性。如果您想对其进行更多控制（请原谅双关语），您可以将`Tag`每个控件的属性设置为新的 GUID。然后你可以用它来唯一地识别它们。

```
Dim dynamicControl As Control = ...
dynamicControl.Tag = Guid.NewGuid().ToString() 
```

但是，我不明白为什么您用于`Name`属性的值还不是唯一的，因为这将是唯一标识控件的正常方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:10:53.527

我假设您在创建时设置 Control.Name 属性？
你可能在 Control.Handle 之后？

```
Public Class Form1
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        ' create controls
        For i As Integer = 1 To 5
            Dim t As New TextBox
            t.Name = "TextBox" & i
            Me.Controls.Add(t)
        Next

        ' list controls
        For Each c As Control In Me.Controls
            Debug.Print(c.Name & " has handle " & c.Handle.ToString)
        Next

        ' check fopr existence of controls
        For i As Integer = 0 To 7
            If Me.Controls.ContainsKey("TextBox" & i) Then
                Debug.Print("TextBox" & i & " exists")
            Else
                Debug.Print("TextBox" & i & " doesn't exist")
            End If
        Next

    End Sub
End Class 
```

该程序创建以下输出：

```
TextBox1 has handle 2361834
TextBox2 has handle 3739570
TextBox3 has handle 8130020
TextBox4 has handle 5048814
TextBox5 has handle 6425036
TextBox0 doesn't exist
TextBox1 exists
TextBox2 exists
TextBox3 exists
TextBox4 exists
TextBox5 exists
TextBox6 doesn't exist
TextBox7 doesn't exist 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:07:58.757

如果您使用的是自定义控件，那么这很容易实现，如果您尝试使用内置控件（标签、按钮、文本框等）来实现，那就有点棘手了。

我为其他做类似但[在这里](https://stackoverflow.com/questions/10321225/vb-net-visual-studio-2010-incrementing-control-names-at-runtime/10321569#10321569)使用自定义控件的人回答了这样的问题。

对于内置控件，您可以做几件事。您可以像 Steven Doggart 提到的那样在 Tag 属性中设置值，或者您可以创建自己的自定义类来继承您想要使用的控件并向其添加任何标识属性。

一旦您选择了一种存储 ID 的方法，您就可以在`Me.Controls`集合上实际使用 LINQ 并按类型/标签/其他方式获取所有控件。话虽如此，我认为表单上的每个单独控件都没有一个易于访问/可预测的唯一标识符。如果你想具体引用一个特定的控件，那么你需要给它一个你可以在运行时假设的标识符，否则没有人，包括你，将确切地知道你应该使用哪个控件。

# c# - Linq 合并列表

> ID：11051299
> 
> 赞同：2
> 
> 时间：2012-06-15T13:10:23.543
> 
> 标签：c#, linq

我的课：

```
 public class Foo
    {
        public int A { get; set; }
        public List<Bar> Bars { get; set; }
    } 
```

我有`IEnumerable<Foo>`。我想`List<Foo>`按 A 分组，并获得 Bars 列表，其中包含 Bars 中的所有元素进行分组。

所以最终的 Foo.Bars 应该包含组中 Bar 的所有元素

linq可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:14:25.037

```
var result = foos.GroupBy(f => f.A)
                 .SelectMany(grp => grp.Select(f => f.Bars)); 
```

正如 Rawling 所提到的，这不会返回 a `IEnumerable<Foo>`，所以试试这个：

```
IEnumerable<Foo> result = 
            foos.GroupBy(f => f.A)
            .Select(grp => new Foo() { 
                A = grp.Key,
                Bars = grp.SelectMany(ff => ff.Bars).Distinct().ToList()
            }); 
```

我不确定你是否想要一个不同的列表`Bars`。请注意，您可能需要覆盖`Equals` and `GetHashCode`in class `Bar`。

# jquery - 我的 jQuery 插件与 IE8 完全不兼容吗？

> ID：11051305
> 
> 赞同：0
> 
> 时间：2012-06-15T13:10:43.777
> 
> 标签：jquery, plugins, internet-explorer-8, compatibility

所以我使用了一个 jQuery 插件的模板，不幸的是它不能在 IE8 和 IE 兼容模式下工作。

我不确定我写它们的方式是否完全兼容，或者我只是错过了什么？

HTML：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>SuperHero Demo</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="Scripts/SuperSelect.js"></script>
</head>

<body>

<div class="test" style="border:1px solid #000;">
<p>Hello World!</p>
</div>
<div>
<p>Sup World</p>
</div>

<script>
$('.test').superHero({

});
</script>
</body>
</html> 
```

脚本：

```
// Utility
if ( typeof Object.create !== 'function' ) {
    Object.create = function( obj ) {
        function F(){};
        F.prototype = obj;
        return new F();
    };
}

(function( $, window, document, undefined ) {

    var Super = {
        init: function( options, elem ) {
            var self = this;

            self.elem = elem;
            self.$elem = $( elem );

            if ( typeof options === 'string' ) {
                self.duration = options;
            } else {
                // object was passed
                self.duration = options.duration;
            }                       

            self.options = $.extend({}, $.fn.superHero.options, options );

            self.replaceSelect();

        },

        replaceSelect: function( duration ) {
            var self = this;
            $('.test').hide();
            $('.test').after('<select><option value="volvo">Volvo</option><option value="saab">Saab</option><option value="mercedes">Mercedes</option><option value="audi">Audi</option></select>');

        },

    };

    $.fn.superHero = function( options ){
        return this.each(function() {
            var hero = Object.create( Super );

            hero.init( options, this );

            $.data( this, 'superHero', hero);

        });

    };

    $.fn.superHero.options = {
        duration:           5000,   //Milliseconds that each slide remains on screen. Default is 5 seconds.
        transition:         'fade', //How will the slides trascend?
    };

})( jQuery, window, document ); 
```

[http://jsfiddle.net/userdude/QWhPL/1/](http://jsfiddle.net/userdude/QWhPL/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:15:35.490

看起来当您设置选项时，在转换属性之后有一个尾随逗号。IE8 不喜欢尾随逗号，请将其更新为：

```
$.fn.superHero.options = {
        duration:           5000,   //Milliseconds that each slide remains on screen. Default is 5 seconds.
        transition:         'fade' //How will the slides trascend?
    }; 
```

...它应该工作。

在需要删除的 replaceSelect: 函数声明之后还有一个尾随逗号：

```
replaceSelect: function( duration ) {
            var self = this;
            $('.test').hide();
            $('.test').after('<select><option value="volvo">Volvo</option><option value="saab">Saab</option><option value="mercedes">Mercedes</option><option value="audi">Audi</option></select>');

        } 
```

# matlab - 在matlab中创建视频的方法

> ID：11051307
> 
> 赞同：29
> 
> 时间：2012-06-15T13:10:51.700
> 
> 标签：matlab, video

在 Matlab 中创建视频的可能性有哪些？我正在搜索并发现主要在该领域工作的 3 个工具箱，图像处理、图像采集和控制视觉......但是没有它们我怎么能做到，只是从头开始创建视频？我对各种概述的方法很感兴趣，但我无法在互联网上找到任何体面的教程或一致的信息来源。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-15T15:52:03.257

以下是在（核心）MATLAB 中创建电影的一些不同方法。

## MOVIE2AVI

（已弃用，请改用 VIDEOWRITER）

```
%# figure
figure, set(gcf, 'Color','white')
Z = peaks; surf(Z);  axis tight
set(gca, 'nextplot','replacechildren', 'Visible','off');

%# preallocate
nFrames = 20;
mov(1:nFrames) = struct('cdata',[], 'colormap',[]);

%# create movie
for k=1:nFrames
   surf(sin(2*pi*k/20)*Z, Z)
   mov(k) = getframe(gca);
end
close(gcf)

%# save as AVI file, and open it using system video player
movie2avi(mov, 'myPeaks1.avi', 'compression','None', 'fps',10);
winopen('myPeaks1.avi') 
```

## 视频文件

（已弃用，请改用 VIDEOWRITER）

```
%# figure
figure, set(gcf, 'Color','white')
Z = peaks; surf(Z);  axis tight
set(gca, 'nextplot','replacechildren', 'Visible','off');

%# create AVI object
nFrames = 20;
aviobj = avifile('myPeaks2.avi', 'fps',10);

%# create movie
for k=1:nFrames
   surf(sin(2*pi*k/20)*Z, Z)
   aviobj = addframe(aviobj, getframe(gca));
end
close(gcf)

%# save as AVI file, and open it using system video player
aviobj = close(aviobj);
winopen('myPeaks2.avi') 
```

## 录影人

```
%# figure
figure, set(gcf, 'Color','white')
Z = peaks; surf(Z);  axis tight
set(gca, 'nextplot','replacechildren', 'Visible','off');

%# create AVI object
nFrames = 20;
vidObj = VideoWriter('myPeaks3.avi');
vidObj.Quality = 100;
vidObj.FrameRate = 10;
open(vidObj);

%# create movie
for k=1:nFrames
   surf(sin(2*pi*k/20)*Z, Z)
   writeVideo(vidObj, getframe(gca));
end
close(gcf)

%# save as AVI file, and open it using system video player
close(vidObj);
winopen('myPeaks3.avi') 
```

## 写

（技术上不是电影，而是动画 GIF 图像）

```
%# figure
figure, set(gcf, 'Color','white')
Z = peaks; surf(Z);  axis tight
set(gca, 'nextplot','replacechildren', 'Visible','off');

%# preallocate
nFrames = 20;
f = getframe(gca);
[f,map] = rgb2ind(f.cdata, 256, 'nodither');
mov = repmat(f, [1 1 1 nFrames]);

%# create movie
for k=1:nFrames
    surf(sin(2*pi*k/20)*Z, Z)
    f = getframe(gca);
    mov(:,:,1,k) = rgb2ind(f.cdata, map, 'nodither');
end
close(gcf)

%# create GIF and open
imwrite(mov, map, 'myPeaks4.gif', 'DelayTime',0, 'LoopCount',inf)
winopen('myPeaks4.gif') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-15T13:20:27.830

有[http://www.mathworks.de/help/techdoc/ref/videowriterclass.html](http://www.mathworks.de/help/techdoc/ref/videowriterclass.html)

`print`我的方法是使用为它们提供文件名的函数将单个帧/图形打印到 png 文件`1.png, 2.png, ...`，然后我使用免费的 FFMPEG 转换器制作视频。

`ffmpeg -r 20 -i %d.png foo.avi`

当涉及到转换参数（比特率、编解码器、几何等）时，这允许进行大量微调。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-15T15:26:32.357

Matlab 有一个内置的“电影”命令来播放电影。我发现它很容易使用。我已经在情节上使用它来显示时间的变化，以及制作真实电影的单个图像。

[http://www.mathworks.com/help/techdoc/ref/movie.html](http://www.mathworks.com/help/techdoc/ref/movie.html)

我相信一般程序是：

```
for ii=1:100
   plot(something(ii))
   F = getframe;
end
movie(F) 
```

要保存电影，您可以使用与上述类似的过程，但使用

```
writeVideo 
```

命令。

[http://www.mathworks.com/help/techdoc/ref/videowriterclass.html](http://www.mathworks.com/help/techdoc/ref/videowriterclass.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-30T02:54:17.833

### QTWriter

要导出[QuickTime](http://www.apple.com/quicktime/)电影，可以使用我自己的 QTWriter：http: [//horchler.github.io/QTWriter/](http://horchler.github.io/QTWriter/)。它的工作方式与 Matlab 的类非常相似[`VideoWriter`](http://www.mathworks.com/help/techdoc/ref/videowriterclass.html)，但同时具有有损和无损静态图像编解码器（压缩格式），可以很好地处理 Matlab 图中的典型数据（即无帧间压缩）。值得注意的是，它还支持*alpha 通道透明度*（'Photo PNG' 编解码器）、*循环*（两种）和*连续可变帧速率*。QTWriter 是作为单个 Matlab 类文件编写的，应该可以在所有平台上运行，但我还没有在[Windows](http://support.apple.com/downloads/#quicktime)上测试过它。

下面是一些示例代码，说明了如何生成简单的循环、可变帧速率 QuickTime 电影：

```
% Prepare new movie file using the default PNG compression
movObj = QTWriter('peaks.mov');

% Create an animation
hf = figure; Z = peaks; surfc(Z); frames = 100;
axis tight; set(hf,'DoubleBuffer','on');
set(gca,'nextplot','replacechildren');

% Animate plot and write movie
for k = 0:frames
    hs = surfc(sin(2*pi*k/frames)*Z,Z);
    set(hs,'FaceColor','interp','FaceLighting','phong');
    light('Position',[0 0 4]);

    movObj.FrameRate = k;            % Vary the frame-rate
    writeMovie(movObj,getframe(hf)); % Write each frame to the file
end

movObj.Loop = 'backandforth'; % Set palindromic looping flag
close(movObj);                % Finish writing movie and close file 
```

[项目网站上提供了](http://horchler.github.io/QTWriter/)输出电影、另一个更复杂的演示以及更多详细信息。QTWriter 是开源的（[BSD 许可](https://github.com/horchler/QTWriter/blob/master/COPYRIGHT)），代码存储库[托管在 GitHub 上](https://github.com/horchler/QTWriter)。

# delphi - 如何跟踪应用程序的奇怪行为？

> ID：11051308
> 
> 赞同：1
> 
> 时间：2012-06-15T13:10:55.630
> 
> 标签：delphi, debugging, delphi-xe2, tracking, bug-tracker

我的一个客户遇到了我的应用程序的奇怪行为-第二次运行-它只是关闭-没有错误或任何东西。

在我没有任何堆栈跟踪或对远程机器的物理访问权限，也无法重新创建客户描述的行为的情况下，如何跟踪这种“heisenbugs”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:36:36.330

> 第二次运行 - 它只是关闭 - 没有错误或任何东西。

**With...Do...Try...Finally...Free...**中的错误...也许？最后它会关闭应用程序而不是释放作用域对象吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:15:15.650

[Windows 调试器工具](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063%28v=vs.85%29.aspx)提供了一个 DbgSrv 服务，该服务处理“第二次更改异常”，并且可以在检测到选定的可执行文件运行但在严重错误或可疑活动下关闭时生成广泛的报告。

# iis - RIA Services Web.config 默认配置

> ID：11051310
> 
> 赞同：0
> 
> 时间：2012-06-15T13:10:55.880
> 
> 标签：iis, web-config, wcf-ria-services, integrated-pipeline-mode

当我使用 NuGet（版本 4.1.60730）安装 RIA 服务时，默认的 Web.config 将域服务模块注册在 和 .

这适用于 Visual Studio 2010 中的开发服务器，但完整 IIS 的标准配置抱怨集成管道模式的设置不正确。

注释掉 system.web 下的注册可以解决那里的问题，但它不会在开发服务器下运行。

是否有适用于这两种情况的配置？如果没有，如何解决这个问题？

我知道我可以在整个系统范围内安装 RIA 服务，但我想远离它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:42:08.043

有一个选项可以禁用有关 system.web 中虚假条目的投诉。放

```
<validation validateIntegratedModeConfiguration="false" /> 
```

在 system.webServer 中。

# c# - C# 4 System.Threading.Tasks 性能询问

> ID：11051314
> 
> 赞同：2
> 
> 时间：2012-06-15T13:11:09.513
> 
> 标签：c#, asp.net-mvc-3, performance, iis-7

我目前正在开发一个 ASP.NET MVC 应用程序，其中一些页面加载了大量数据（在单独的 LINQ 查询中重新分区）。

为了提高这些页面的性能，我设想使用 C# 4 任务来允许同时进行查询并获得执行时间。

但我有一个主要问题：从服务器端来看，最好的情况是：

*   使用任务等的页面，在很短的时间内大量的服务器资源？
*   只使用同步代码的页面，更少的服务器资源但更多的时间？
*   没有发病？

我的页面的性能很重要，但服务器的稳定性更重要！预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:27:15.933

您没有说 LINQ 查询是否受 CPU 限制（例如，在内存中计算）或 IO 限制（例如，通过网络或从磁盘读取）。

如果它们受 CPU 限制，那么使用异步代码将提高公平性，但会降低吞吐量 - 但只有这样每个人都会受到影响。例如，假设您一次只能处理一个请求，每个请求需要 5 秒。两个请求几乎同时进入。对于同步代码，第一个将在 5 秒内完成，而第二个在排队，第二个将在 10 秒后完成。对于异步代码，两者将一起开始并在略多于 10 秒后完成（由于两者之间的交换开销）。这是假设的，因为您有许多线程同时处理请求。

实际上，您会发现异步代码仅在您有大量 IO 绑定操作需要足够长的时间以导致请求排队时才有帮助。如果队列已满，服务器将开始发出 Server Unavailable 503 错误。检查您的性能计数器 - 如果您在典型的实时负载下在 ASP.NET 中排队的请求很少或没有，那么不要为额外的复杂性而烦恼。

如果工作是 IO 绑定的，那么使用异步代码会将瓶颈推向网络/磁盘。这是一件好事，因为您不会将 Web 服务器的内存资源浪费在等待响应的空闲阻塞请求线程上 - 相反，您可以使请求吞吐量取决于下游性能，并且可以专注于优化它。即，您将保持这些请求线程空闲，以便从队列中获取更多工作。

编辑 - 这篇文章不错：http: [//blog.stevensanderson.com/2010/01/25/measuring-the-performance-of-asynchronous-controllers/](http://blog.stevensanderson.com/2010/01/25/measuring-the-performance-of-asynchronous-controllers/)

# c++ - 只改变常量的指针转换可以调用未定义的行为吗？

> ID：11051317
> 
> 赞同：4
> 
> 时间：2012-06-15T13:11:12.237
> 
> 标签：c++, pointers, reference

我偶然发现了一些似乎正确的代码。它应该提供一个公共的、不可变的指针，同时保持可修改的非常量指针私有。

奇怪的是，这段代码在 SN C++ 编译器（适用于 PlayStation 3）上崩溃了，但在 GCC 上运行良好。在 SN C++ 上，`data`将指向虚假值，而`m_data`将按预期工作。

有问题的代码：

```
#include <cstdint>

class Foo
{
   public:
      Foo() : data((const std::uint8_t* const&)m_data)
      {
         m_data = nullptr; // Set later in some other member function.
      }

      const std::uint8_t* const &data;

   private:
      std::uint8_t* m_data; 
}; 
```

此代码是否调用未定义的行为？据我所知，转换为这样的引用将转换`(const std::uint8_t* const&)m_data`为`*reinterpret_cast<const std::uint8_t* const*>(&m_data)`.

测试用例：

```
Foo* new_foo() { return new Foo; } 
```

并查看生成的反汇编。请注意，它是具有 32 位长整数和指针的 PowerPC 64 位。

SN C++：`ps3ppusnc -o test-sn.o -O3 -c test.cpp`

```
0000000000000000 <._Z7new_foov>:
   0:   f8 21 ff 81     stdu    r1,-128(r1)     # ffffff80
   4:   7c 08 02 a6     mflr    r0
   8:   f8 01 00 90     std     r0,144(r1)      # 90
   c:   fb e1 00 78     std     r31,120(r1)     # 78
  10:   38 60 00 08     li      r3,8
  14:   3b e0 00 00     li      r31,0
  18:   48 00 00 01     bl      18 <._Z7new_foov+0x18>
  1c:   60 00 00 00     nop
  20:   2c 03 00 00     cmpwi   r3,0
  24:   41 82 00 38     beq     5c <._Z7new_foov+0x5c>
  28:   30 81 00 70     addic   r4,r1,112       # 70
  2c:   93 e3 00 04     stw     r31,4(r3) <-- Set m_data to r31 (0).
  30:   60 7f 00 00     ori     r31,r3,0
  34:   90 83 00 00     stw     r4,0(r3)  <-- Set data to r4 (r1 + 112 (On stack)?!)
  38:   63 e3 00 00     ori     r3,r31,0
  3c:   e8 01 00 90     ld      r0,144(r1)      # 90
  40:   7c 08 03 a6     mtlr    r0
  44:   eb e1 00 78     ld      r31,120(r1)     # 78
  48:   38 21 00 80     addi    r1,r1,128       # 80
  4c:   4e 80 00 20     blr 
```

GCC 4.1.1：`ppu-lv2-g++ -o test-gcc.o -O3 -c test.cpp`

```
0000000000000000 <._Z7new_foov>:
   0:   38 60 00 08     li      r3,8
   4:   7c 08 02 a6     mflr    r0
   8:   f8 21 ff 91     stdu    r1,-112(r1)     # ffffff90
   c:   f8 01 00 80     std     r0,128(r1)      # 80
  10:   48 00 00 01     bl      10 <._Z7new_foov+0x10>
  14:   60 00 00 00     nop
  18:   7c 69 1b 78     mr      r9,r3
  1c:   38 00 00 00     li      r0,0
  20:   39 63 00 04     addi    r11,r3,4 <-- Compute address of m_data
  24:   78 63 00 20     clrldi  r3,r3,32        # 20
  28:   90 09 00 04     stw     r0,4(r9) <-- Set m_data to r0 (0).
  2c:   e8 01 00 80     ld      r0,128(r1)      # 80
  30:   38 21 00 70     addi    r1,r1,112       # 70
  34:   91 69 00 00     stw     r11,0(r9) <-- Set data reference to m_data.
  38:   7c 08 03 a6     mtlr    r0
  3c:   4e 80 00 20     blr 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:37:01.693

您必须在 4.4/4（C++11 的）中通过规范语言进行斗争，但我相信 3.10/10 允许这样做。它说对象可以别名为“类似于对象的动态类型的类型”。

在这种情况下，对象的动态类型是`std::uint8_t*`，相似类型是`const std::uint8_t* const`。我认为。自己检查 4.4/4。

[更新：C++03 没有提到 3.10/15 中的“相似”类型，所以你可能在 C++03 上遇到了麻烦，这可能是 SNC 使用的。]

还有第二件事需要检查，即是否可以通过将引用`data`绑定到尚未初始化的对象来初始化引用（`m_data`）。直觉上这似乎没问题，因为对未初始化的引用`m_data`永远不会转换为右值。无论如何，它很容易修复。

# asp.net - 将唯一 URL 绑定到 XML 站点地图 ASP.NET

> ID：11051322
> 
> 赞同：0
> 
> 时间：2012-06-15T13:11:26.027
> 
> 标签：asp.net, xml, data-binding

所以，我是 ASP.NET 和网站开发的新手。我在使用数据绑定到 XML 文件为 ASP.NET 应用程序构建站点地图时遇到了问题。这是站点地图的第一部分：

```
<Privo>
  <child display="Current Projects">
    <child display="Amifostin">
      <child display="Experiments">
        <leaf>HTT</leaf>
        <leaf>MTT</leaf>
        <leaf>HPLC</leaf>
        <leaf>UV-Spec</leaf>
      </child> 
```

以及来自 site.master 文件的数据绑定：

```
<DataBindings>                                                        
   <asp:TreeNodeBinding DataMember="child" TextField="display" />
   <asp:TreeNodeBinding DataMember="leaf" TextField="#InnerText" />
</DataBindings> 
```

我想做这样的事情：

```
 <leaf url="ExperimentsView.aspx/HTT">HTT<leaf> 
```

和

```
 <asp:TreeNodeBinding DataMember="leaf" TextField="#InnnerText" NavigateUrl="url"/> 
```

但是，问题出在：当我尝试绑定 NavigateUrl 时，我唯一能做的就是将一种节点绑定*到*一个 url - 意思是，每个叶子都会链接相同的 url。有没有办法将叶节点的字段绑定到（唯一的）url，或者我必须为每个唯一的 url 创建不同的 DataMembers？

注意：是的，我知道 Web.sitemap。当项目负责人告诉我他想使用 XML 数据绑定时，我正在使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:08:51.800

You will need to use the NavigateUrlField property to do this (see [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenodebinding.navigateurlfield.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenodebinding.navigateurlfield.aspx))

# android - 如何计算在 edittext 中输入的值并从一个活动转移到另一个活动？

> ID：11051323
> 
> 赞同：0
> 
> 时间：2012-06-15T13:11:34.200
> 
> 标签：android, android-intent

我正在开发一个屋顶计算器。我在第一个活动中有三个编辑文本和计算按钮。在第二个活动中，我有一个显示结果的文本视图。

```
 EditText editText1Değer1Kod;
    EditText editText2Değer2Kod;
    EditText editText3Değer3Kod;

    Button hesaplaKod; 
```

我想取这三个值，然后用公式计算，然后在第二个活动中将结果显示为文本视图。我如何计算（求和或添加这三个值）然后在第二个活动中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:19:45.990

`enter code here`只需通过计算数字并将使用意图传递给其他活动

在第一个活动中：

```
Intent intent=new Intent(IntentsDemo2.this,Activity2.class);
   intent.putExtra("result", result);
   startActivity(intent); 
```

在第二个活动中：

@覆盖

```
 public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main2);
         Intent sender=getIntent();
         int result =sender.getExtras().getInt("result");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:25:39.793

在第一个活动中使用

```
hesaplaKod.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                int value1= Integer.parseInt(EditText01.getText().toString());
                int value2= Integer.parseInt(EditText01.getText().toString());
                int value3= Integer.parseInt(EditText01.getText().toString());

                int add = value1+value2+value3;

                Intent intent = new Intent(FirstActivity.this,SecondActivity.class);
                intent.putExtra("AddValue", add);
                startActivity(intent);
            }
        }); 
```

并在第二个活动的 onCreate 中从中获取价值

```
int addvalue = getIntent().getExtras().getInt("AddValue"); 
```

# c# - .net windows form webservice调用慢/启动延迟

> ID：11051327
> 
> 赞同：0
> 
> 时间：2012-06-15T13:11:41.213
> 
> 标签：c#, .net, web-services

我有一个我最近被交给升级的 Windows 窗体应用程序。它进行两次 Web 服务调用（使用 .net Web 引用功能）。一个是 SSL，另一个不是。

打开客户端后请求的第一个 Web 服务大约需要 12 秒，任何其他请求大约需要 0.5 秒。- 无论您首先请求哪个 Web 服务，在您关闭客户端之前，任何未来的请求都会很快。再次打开客户端后，第一次点击再次需要 12 秒。

由于大量论坛帖子与 IIS 元数据一起发生的*服务器首次加载有关，我很难搜索此内容。*我对这个问题很熟悉，但这不是这里发生的事情。

此外，应用程序执行的数据库调用没有这种延迟。因此，我不倾向于网络问题。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:31:26.217

这么长的延迟可能与 I/O 相关，无论是磁盘（生成 XML 序列化程序）还是网络（DNS 解析、证书、强名称验证等）。检查资源监视器：CPU、磁盘或网络是否加载？如果不是，则可能是网络调用超时卡住了。

尝试使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)捕获数据，其中将包括所有磁盘和网络流量。

如果问题看起来与网络相关，那么[Wireshark](http://www.wireshark.org/)或[Fiddler](http://www.fiddler2.com/fiddler2/)可能会给出更清晰的画面。

# c# - 跳过无效元素的列表的 XML 反序列化？

> ID：11051328
> 
> 赞同：0
> 
> 时间：2012-06-15T13:11:43.727
> 
> 标签：c#, exception, xml-serialization, generic-list

我对通用列表的反序列化有一些问题。我的类实现了**IXmlSerializable**接口并将一些**MyFilter**对象存储在**Filters**属性中。它包含以下代码：

写XML：

```
XmlSerializer serializer = new XmlSerializer(typeof(List<MyFilter>));
serializer.Serialize(bodyWriter, Filters.ToList()); 
```

读取 XML：

```
XmlSerializer serializer = new XmlSerializer(typeof(List<MyFilter>));
Filters = (List<MyFilter>)serializer.Deserialize(reader); 
```

序列化或 xml 结构本身没有问题。MyFilter**类**还实现了**IXmlSerializable**接口。
反序列化 xml 时会出现此问题：在运行时，当过滤器依赖当前不可用的数据时，某些**MyFilter对象的反序列化可能会失败。**这是“按设计工作”，但当然会杀死整个过程，但有一个例外。

所以我的问题是：如何在反序列化期间跳过引发异常的**MyFilter对象？**
我想我必须手动反序列化集合，捕获异常并继续下一个元素。这是一个好方法吗？怎么做？

# java - Sorting through ArrayLists, Code issue

> ID：11051329
> 
> 赞同：2
> 
> 时间：2012-06-15T13:11:46.163
> 
> 标签：java, list, sorting

```
 // Find smallest year
 int pastMin=0;
 int currentMin=ontarioBankInfoInt.get(0);
 int currentMinIndex=0;
 int reps=(ontarioBankInfoInt.size()-1)/3;

 for(int x=0; x<=reps; x++){
   for (int i=0; i<ontarioBankInfoInt.size()-1; i++){
        if (ontarioBankInfoInt.get(i)<currentMin){
            if (ontarioBankInfoInt.get(i)>pastMin){
                currentMin = ontarioBankInfoInt.get(i);
                currentMinIndex = i;     
                pastMin = currentMin;
            }//If End
        }//If End       
   }//For End

   //Add other information  
   yearArray.add(currentMin);
 }//For End 
```

NOTE: reps is the number of years it needs to find. The pupose of this code is so search an arrayList for the smallest year then add it to the "yearArray" then it finds the next smallest add adds it to the say array, rinse and repeat until it works through the entire array.

My problem is that it always returns the same year and im not sure why any help?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:15:09.170

You aren't reinitializing `currentMin` and `currentMinIndex` so these will reach the minimum value, then they won't ever be reassigned.

You need to reinitialize them inside the loop.

```
for(int x=0; x<=reps; x++){

   int currentMin = Integer.MAX_VALUE;  // Do this here.
   //int currentMinIndex = -1;  // This is never used??

   for (int i=0; i < ontarioBankInfoInt.size() - 1; i++) {
        int value = ontarioBankInfoInt.get(i);
        if (value < currentMin && value > pastMin) {
            currentMin = value;
            //currentMinIndex = i;     
        }
   }

   pastMin = currentMin; // I also think you want this here.
   yearArray.add(currentMin);
} 
```

Or you could just sort the list and take the first `reps` elements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:14:42.693

Look at this part:

```
if (ontarioBankInfoInt.get(i)<currentMin){
    if (ontarioBankInfoInt.get(i)>pastMin){
        currentMin = ontarioBankInfoInt.get(i);
        currentMinIndex = i;     
        pastMin = currentMin;
    }
} 
```

The first time it gets into the inner part, it will set `pastMin` and `currentMin` to the same value. After that, how could any value be both *less* than `currentMin` and *more* than `pastMin`?

It's not really clear what you're trying to achieve, but that's why you'll only get into the middle part once.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:10:36.167

This is a quick and brutal way to get a list of lowest ints, one for each year.

```
Collections.sort(ontarioBankInfoInt);
List<Integer> yearArray = new ArrayList<Integer>(ontarioBankInfoInt.subList(0, reps)); 
```

You'd probably want to copy the contents of ontarioBankInfoInt into a new array before sorting (if you want to preserve your original order).

This of course assumes that there are no repeat values in ontarioBankInfoInt.
`{ 1,3,2,1,2 }` for 3 years would give you `{ 1,1,2 }` instead of `{ 1,2,3 }`

If you don't want duplicate values, and you don't want to use a loop (and performance is not an issue), then you could:

1.  copy ontarioBankInfoInt into a Set (thus removing duplicates).
2.  back into a List.
3.  sort the list.
4.  get a sublist for the number of years you require.

But seriously, use a loop as described in other answers... :)

# c - 禁用 DejaGnu 选项

> ID：11051331
> 
> 赞同：1
> 
> 时间：2012-06-15T13:11:53.623
> 
> 标签：c, testing, gcc, toolchain

有谁知道我如何禁用在文件源代码中写入的标志，而不更改此文件的源代码。也许我必须更改 .exp 文件之一？

我想在`-pthread`不更改此源代码的情况下禁用标志：

```
// { dg-do run { target *-*-linux* } }
// { dg-options "-pthread" }
#include <pthread.h>
#include <cxxabi.h>
extern "C" int printf (const char *, ...);
int main()
{
  try
    {
      pthread_exit (0);
    }
  catch (abi::__forced_unwind &)
    {
      printf ("caught forced unwind\n");
      throw;
    }
  catch (...)
    {
      printf ("caught ...\n");
      return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:08:23.320

我不认为你可以，但是因为`-pthread`*-*-linux 目标只是扩展为`-D_REENTRANT`，`-lpthread`也许你可以提供一个替换`libpthread`并将`-L` *dir*添加到测试标志，这样系统`libpthread.so`就不会链接到。

如果您不提供`pthread_exit`.

# django - 带有连接的 Django 查询？

> ID：11051333
> 
> 赞同：0
> 
> 时间：2012-06-15T13:11:57.133
> 
> 标签：django, django-models, django-queryset

我有两个模型：

```
class Contact(models.Model):
    name = models.CharField(max_length=255)

class Campaign(models.Model):
    contact = models.ForeignKey(Contact, related_name="campaigns")
    name = models.CharField(max_length=255) 
```

如何在 Campaign 表中选择所有具有 Campaign name='CampaignName' 的联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:17:14.593

```
Contact.objects.filter(campaign__name='CampaignName') 
```

# opencv - opencv中的K均值聚类

> ID：11051334
> 
> 赞同：2
> 
> 时间：2012-06-15T13:12:02.687
> 
> 标签：opencv, k-means

好的，所以我必须说 OpenCV 提供的示例 K-means 算法程序相当混乱。即使花了整个下午都没有得到完整的画面。这些是我想问的几个问题：

1）我如何将给定的图像转换为单列矩阵，因为 K-means 函数只接受这样的矩阵作为输入？我知道我必须使用 CvMat 函数，但无法弄清楚到底如何。

2）是否可以根据颜色强度进行聚类，使用一些预先确定的强度作为种子值？

最后但并非最不重要的一点，它会很高；如果有人可以提供任何详细解释 K-means 的链接，您将不胜感激。我已经经历了willowgarage和aishack的解释，仍然存在疑问。提前致谢 ！！

这正是我想要做的：假设这是提供的图像

![在此处输入图像描述](../Images/cce0cbce410118b5ef7b40da8b4e6eb1.png)

我的代码的输出应该有点像这样：

![在此处输入图像描述](../Images/0ef2e29c171f9617ca747c09cadbe234.png)

如您所见，在第二张图像中，由于阴影的影响被移除，我们得到了具有明确颜色层的图像。

现在为此我应用以下方法首先我根据图像的相应 LAB 值选择种子颜色。然后在获得种子值后，我尝试使用 K-means 聚类将相似的颜色聚类成一个确定的颜色层。（如上图所示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T05:27:45.383

```
 //Aim:To implement Kmeans clustering algorithm.
    //Program
    import java.util.*;
    class k_means
    {
    static int count1,count2,count3;
    static int d[];
    static int k[][];
    static int tempk[][];
    static double m[];
    static double diff[];
    static int n,p;

    static int cal_diff(int a) // This method will determine the cluster in which an element go at a particular step.
    {
    int temp1=0;
    for(int i=0;i<p;++i)
    {
    if(a>m[i])
    diff[i]=a-m[i];
    else
    diff[i]=m[i]-a;
    }
    int val=0;
    double temp=diff[0];
    for(int i=0;i<p;++i)
    {
    if(diff[i]<temp)
    {
    temp=diff[i];
    val=i;
    }
    }//end of for loop
    return val;
    }

    static void cal_mean() // This method will determine intermediate mean values
    {
    for(int i=0;i<p;++i)
    m[i]=0; // initializing means to 0
    int cnt=0;
    for(int i=0;i<p;++i)
    {
    cnt=0;
    for(int j=0;j<n-1;++j)
    {
    if(k[i][j]!=-1)
    {
    m[i]+=k[i][j];
    ++cnt;
    }}
    m[i]=m[i]/cnt;
    }
    }

    static int check1() // This checks if previous k ie. tempk and current k are same.Used as terminating case.
    {
    for(int i=0;i<p;++i)
    for(int j=0;j<n;++j)
    if(tempk[i][j]!=k[i][j])
    {
    return 0;
    }
    return 1;
    }

    public static void main(String args[])
    {
    Scanner scr=new Scanner(System.in);
    /* Accepting number of elements */
    System.out.println("Enter the number of elements ");
    n=scr.nextInt();
    d=new int[n];
    /* Accepting elements */
    System.out.println("Enter "+n+" elements: ");
    for(int i=0;i<n;++i)
    d[i]=scr.nextInt();
    /* Accepting num of clusters */
    System.out.println("Enter the number of clusters: ");
    p=scr.nextInt();
    /* Initialising arrays */
    k=new int[p][n];
    tempk=new int[p][n];
    m=new double[p];
    diff=new double[p];
    /* Initializing m */
    for(int i=0;i<p;++i)
    m[i]=d[i];

    int temp=0;
    int flag=0;
    do
    {
    for(int i=0;i<p;++i)
    for(int j=0;j<n;++j)
    {
    k[i][j]=-1;
    }
    for(int i=0;i<n;++i) // for loop will cal cal_diff(int) for every element.
    {
    temp=cal_diff(d[i]);
    if(temp==0)
    k[temp][count1++]=d[i];
    else
    if(temp==1)
    k[temp][count2++]=d[i];
    else
    if(temp==2)
    k[temp][count3++]=d[i]; 
    }
    cal_mean(); // call to method which will calculate mean at this step.
    flag=check1(); // check if terminating condition is satisfied.
    if(flag!=1)
    /*Take backup of k in tempk so that you can check for equivalence in next step*/
    for(int i=0;i<p;++i)
    for(int j=0;j<n;++j)
    tempk[i][j]=k[i][j];

    System.out.println("\n\nAt this step");
    System.out.println("\nValue of clusters");
    for(int i=0;i<p;++i)
    {
    System.out.print("K"+(i+1)+"{ ");
    for(int j=0;k[i][j]!=-1 && j<n-1;++j)
    System.out.print(k[i][j]+" ");
    System.out.println("}");
    }//end of for loop
    System.out.println("\nValue of m ");
    for(int i=0;i<p;++i)
    System.out.print("m"+(i+1)+"="+m[i]+"  ");

    count1=0;count2=0;count3=0;
    }
    while(flag==0);

    System.out.println("\n\n\nThe Final Clusters By Kmeans are as follows: ");
    for(int i=0;i<p;++i)
    {
    System.out.print("K"+(i+1)+"{ ");
    for(int j=0;k[i][j]!=-1 && j<n-1;++j)
    System.out.print(k[i][j]+" ");
    System.out.println("}");
    }
    }
    }
    /*
    Enter the number of elements
    8
    Enter 8 elements:
    2 3 6 8 12 15 18 22
    Enter the number of clusters:
    3

    At this step
    Value of clusters
    K1{ 2 }
    K2{ 3 }
    K3{ 6 8 12 15 18 22 }
    Value of m
    m1=2.0  m2=3.0  m3=13.5

    At this step
    Value of clusters
    K1{ 2 }
    K2{ 3 6 8 }
    K3{ 12 15 18 22 }
    Value of m
    m1=2.0  m2=5.666666666666667  m3=16.75

    At this step
    Value of clusters
    K1{ 2 3 }
    K2{ 6 8 }
    K3{ 12 15 18 22 }
    Value of m
    m1=2.5  m2=7.0  m3=16.75

    At this step
    Value of clusters
    K1{ 2 3 }
    K2{ 6 8 }
    K3{ 12 15 18 22 }
    Value of m
    m1=2.5  m2=7.0  m3=16.75

    The Final Clusters By Kmeans are as follows:
    K1{ 2 3 }
    K2{ 6 8 }
    K3{ 12 15 18 22 } */ 
```

# ruby-on-rails-3 - 用户/设置路由？

> ID：11051337
> 
> 赞同：0
> 
> 时间：2012-06-15T13:12:26.877
> 
> 标签：ruby-on-rails-3, routes

简单的问题：

我已将以下内容添加到我的路线中。rb

```
match 'settings' => 'users#edit' 
```

我正在尝试在 /settings 上创建一个用户设置页面（仅使用编辑表单和更新按钮）。

我在我的用户控制器中创建了编辑/更新方法，并添加了编辑视图和 _form。

出于某种原因，当我转到 /settings 时，我得到：

```
No route matches {:action=>"show", :controller=>"users"} 
```

（即使 users#show 存在）

奇怪的是，如果我更改我的 routes.rb，我可以让它正常工作以路由到 users#show - 但这不是我想要的！

我想我错过了一些明显的东西 - 有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:02:09.453

重新启动开发服务器后，此问题会消失吗？在服务器运行后创建的路由很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:45:43.017

结果注释掉我的link_to修复了它..

# java - EJB 依赖项在 GlassFish 2.1 上未正确连接（注入）

> ID：11051338
> 
> 赞同：0
> 
> 时间：2012-06-15T13:12:32.887
> 
> 标签：java, glassfish, jms, ejb-3.0

出于某种原因，我应该使用旧的 EJB 容器 GlassFish 2.1.1。（通过 Java EE 5 和 EJB 3.0 认证）。项目结构如下：

多边开发银行：

```
@MessageDriven(
   mappedName = "jms/Queue",
   activationConfig = {
      @ActivationConfigProperty(propertyName = "destinationType", 
                                propertyValue = "javax.jms.Queue")    
})
public class TriggerMBean implements MessageListener {
     @EJB
     private TriggerProcessor triggerService; 

     public void onMessage(Message message) {
          //.......
          triggerService.process();
          //.......
     }
} 
```

触发器处理器：

```
@Stateless
public class TriggerProcessor {
    public void proceess() {
        //....
    }
} 
```

我还没有创建部署描述符。据我了解，如果我从 3.0 开始使用注释和 EJB 版本，则没有必要

部署时，异常如下：

```
[#|2012-06-15T15:55:50.290+0300|SEVERE|sun-appserver2.1|javax.enterprise.system.container.ejb.mdb|_ThreadID=42;_ThreadName=p: thread-pool-1; w: 61;_RequestID=824fc411-7772-42cc-aeee-9a8d9b451dbf;|com.sun.enterprise.InjectionException
com.sun.enterprise.InjectionException: Exception attempting to inject Unresolved Ejb-Ref fi.prh.novus.sync.consumer.TriggerMBean/triggerService@jndi: fi.prh.novus.sync.service.TriggerProcessor@null@fi.prh.novus.sync.service.TriggerProcessor@Session@null into class fi.prh.novus.sync.consumer.TriggerMBean
        at com.sun.enterprise.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:387)
        at com.sun.enterprise.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:206)
        at com.sun.enterprise.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:127)
        at com.sun.ejb.containers.MessageBeanContainer.createMessageDrivenEJB(MessageBeanContainer.java:711)
        at com.sun.ejb.containers.MessageBeanContainer.access$100(MessageBeanContainer.java:109)
        at com.sun.ejb.containers.MessageBeanContainer$MessageBeanContextFactory.create(MessageBeanContainer.java:492)
        at com.sun.ejb.containers.util.pool.NonBlockingPool.getObject(NonBlockingPool.java:199)
        at com.sun.ejb.containers.MessageBeanContainer._getContext(MessageBeanContainer.java:555)
        at com.sun.ejb.containers.BaseContainer.getContext(BaseContainer.java:1731)
        at com.sun.ejb.containers.MessageBeanContainer.beforeMessageDelivery(MessageBeanContainer.java:1008)
        at com.sun.ejb.containers.MessageBeanListenerImpl.beforeMessageDelivery(MessageBeanListenerImpl.java:70)
        at com.sun.enterprise.connectors.inflow.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:135)
        at $Proxy86.beforeDelivery(Unknown Source)
        at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:245)
        at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:77)
        at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:555)
Caused by: javax.naming.NameNotFoundException: fi.prh.novus.sync.service.TriggerProcessor#fi.prh.novus.sync.service.TriggerProcessor not found
        at com.sun.enterprise.naming.TransientContext.doLookup(TransientContext.java:216)
        at com.sun.enterprise.naming.TransientContext.lookup(TransientContext.java:188)
        at com.sun.enterprise.naming.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:74)
        at com.sun.enterprise.naming.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:111)
        at com.sun.enterprise.naming.SerialContext.lookup(SerialContext.java:409)
        at javax.naming.InitialContext.lookup(InitialContext.java:392)
        at com.sun.enterprise.naming.NamingManagerImpl.lookup(NamingManagerImpl.java:951)
        at com.sun.enterprise.naming.java.javaURLContext.lookup(javaURLContext.java:173)
        at com.sun.enterprise.naming.SerialContext.lookup(SerialContext.java:407)
        at javax.naming.InitialContext.lookup(InitialContext.java:392)
        at com.sun.enterprise.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:287)
        ... 15 more
|#] 
```

我试图`private TriggerProcessor triggerService;`用`@EJB(beanName="TriggerProcessor")`和`public class TriggerProcessor {..`用注释，`@Stateless(name="TriggerProcessor")`但它没有帮助。

实际上，这在最新的 Glassfish 3.1 上完美运行，但正如我珍贵地告诉的那样，我应该使用 GF 2.1.1。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:18:04.583

因为 GlassFish 2 不支持 EJB 3.1，所以它不起作用。ony 提供了一个无接口视图，`TriggerProcessor`因为它没有实现任何接口。您必须提供一个`TriggerProcessor`与 EJB 3.0 兼容的接口。

只有 EJB 3.1 支持无接口视图。请参阅[http://docs.oracle.com/cd/E19776-01/820-4496/beahm/index.html](http://docs.oracle.com/cd/E19776-01/820-4496/beahm/index.html)和JSR 318 规范的第*1.2 章 EJB 3.1 中的新增功能。*

# sql-server - Sql Server SSIS 条件插入

> ID：11051341
> 
> 赞同：0
> 
> 时间：2012-06-15T13:12:44.443
> 
> 标签：sql-server, insert, ssis, conditional, bids

我正在尝试执行 OLE DB 命令，仅当同一个表中不存在主键字段时才向我的表中添加行。这是我到目前为止所拥有的：

```
insert into employee
   (employee_id, first_name, middle_initial, last_name)   /*fields of the employee table*/
   values (employeedID, firstName, mInitial, lastName)    /*columns from my input       */

 /* only insert into the table where employee_ID is not already in the table */
 where ((select employee_id from employee where employee_id = employeeID) = NULL); 
```

基本上我想要的只是一个条件插入语句。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:20:09.917

我不确定您的包是如何设置的，但您可能会考虑使用没有任何约束的临时表。首先将所有记录插入其中，然后在最后做出如下声明：

```
insert into employee (employee_id, first_name, middle_initial, last_name) 
select t.employee_id, t.first_name, t.middle_initial, t.last_name
from temp_employee AS t
left join employee ON t.employee_id = employee.employee_id
where employee.employee_id is null 
```

# linux - linux gpio c api

> ID：11051343
> 
> 赞同：5
> 
> 时间：2012-06-15T13:12:48.810
> 
> 标签：linux, gpio

我有一块运行 3.2 内核的 powerpc 板。使用 sysfs 访问 gpio 可以按预期工作，例如

```
> echo 242 > /sys/class/gpio/export
> cat /sys/class/gpio/gpio242/value
>  1 
```

是否没有 API 可以直接从用户空间访问 gpio 引脚？我必须处理基于文本的 sysfs 界面吗？

我寻找类似的东西： gpio_set(int no, int val);

谢谢克劳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-06T14:42:44.730

编辑：不推荐使用 sysfs 直接访问 GPIO，新方法是通过 libgpiod 编程

sysfs 是您能够在最近的内核中操作 GPIO 的最低级别。它可能有点乏味，但与旧式 API 相比，它提供了几个优点：

*   没有丑陋的ioctl
*   可以很容易地编写脚本（想想启动脚本）
*   对于输入，“值”文件可以很容易地轮询上升/下降/两个边沿，它对硬件中断非常敏感

目前我没有示例代码，但是当通过 C 代码访问它们时，我经常实现一个非常简单的包装器来操作文件描述符并具有以下接口的变体：

```
int gpio_open(int number, int out); /* returns handle (fd) */
int gpio_close(int gpio);
int gpio_set(int gpio, int up);
int gpio_get(int gpio, int *up);
int gpio_poll(int gpio, int rising_edge, int timeout); 
```

从那时起，实施就非常简单了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:59:18.823

在 vfs 树中创建设备后，您可以像典型文件一样打开它们，假设您编写了驱动程序并且在 makedev 文件中分配了正确的主要和次要编号，该文件在 vfs 树上创建了 gpio 引脚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-17T03:05:36.103

自 Linux 4.8 起，通过 sysfs 访问 GPIO 已被弃用。

用户空间访问的新方法是通过 libgpiod，它包括一个链接库（显然），以及一些可以从命令行运行的工具（为了方便编写脚本）。值得注意的是，GPIO 线是用线名字符串而不是整数标识符来引用的，就像 sysfs 一样。例如

```
gpioset $(gpiofind "USR-LED-2")=1 
```

[https://git.kernel.org/pub/scm/libs/libgpiod/libgpiod.git/tree/README](https://git.kernel.org/pub/scm/libs/libgpiod/libgpiod.git/tree/README)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-28T20:03:35.833

每个 GPIO 都被内存映射为寄存器，因此您可以通过 /dev/mem 访问它。见[这里](http://www.pieter-jan.com/node/15)。如果您想直接访问 GPIO，您必须在内核空间级别工作

# .net - 剃刀型 ViewEngine

> ID：11051344
> 
> 赞同：0
> 
> 时间：2012-06-15T13:12:49.823
> 
> 标签：.net, reflection, razor

简而言之，我想要一个看起来像这样的模板：

> 亲爱的@model.Firstname @model.Surname

我想将其与预填充模型一起提供给方法，例如：

```
private String Transform(String Template, object model)  
{

} 
```

然后，我想找到模板中以 @ 开头的所有位置，并将其替换为提供的模型中包含的数据。

该模型看起来像：

```
 public class Receipt
    {
        public String Firstname { get; set; }
        public String Surname { get; set; }
        ... 
```

我确信我应该能够使用反射来完成这项工作。如何将模型对象加载为模型类型，然后访问它保存的数据？

他们在 Razor 中做到这一点，所以我认为这一定是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:14:21.157

看看[MvcMailer](http://www.codeproject.com/Articles/145629/Announcing-MvcMailer-Send-Emails-Using-ASP-NET-MVC)，它使用 Razor 视图来撰写电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:28:32.940

好的，所以这个问题的答案是在 codeplex 上查看[RazorEngine](http://razorengine.codeplex.com/)。

```
 string template = "Hello @Model.Name! Welcome to Razor!";  
  string result = Razor.Parse(template, new { Name = "World" }); 
```

它真的很容易。

# xml-parsing - 在 Jquery 中解析 XML 文件

> ID：11051345
> 
> 赞同：1
> 
> 时间：2012-06-15T13:12:52.530
> 
> 标签：xml-parsing

我在同一目录中有一个 html 文件“search.html”和一个 xml 文件“videos.xml”，我使用以下代码对其进行解析：

```
$.ajax({
    type: "GET",
    url: "videos.xml",
    dataType: "xml",
    success: parseXml
});

function parseXml(xml) {
    $(xml).find("Video").each(function () {
        var id = $(this).find("id").text();
        alert(id);    
    }
} 
```

此代码在服务器中工作（当我作为 Web 应用程序运行时）即 localhost:8080/mysite/search.html

但它在没有服务器的情况下无法在本地工作。即 file:///D:/mysite/search.html

我认为它无法获取 xml 文件的路径，我尝试同时给出相对路径和绝对路径，但它不起作用。所以请帮我解决这个问题。

谢谢你，

纳雷什

# c - 是否可以在 C 中创建一个包含 10^13 个元素的浮点数组？

> ID：11051346
> 
> 赞同：1
> 
> 时间：2012-06-15T13:12:53.433
> 
> 标签：c

我正在用 C 编写一个程序来解决优化问题，为此我需要创建一个浮点类型的数组，其顺序为 10 ^(13 个)元素。是否可以在具有 20GB 内存的机器上执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:24:35.790

C 中的 A`float`占用 4 个字节（假设 IEEE 浮点算法，现在非常接近通用）。这意味着 10 ^(13 个)元素天真地需要 4×10 ^(13)字节的空间。这是相当多的（40 TB，也就是桌面系统的相当多的磁盘，而不是大多数人在 RAM 方面所能承受的）所以你需要找到另一种方法。

数据是否稀疏（即大部分为零）？如果是，您可以尝试使用哈希表或树来仅存储其他值；如果您的数据足够稀疏，那么您可以将所有内容都放入其中。还要注意处理 10 ^(13 个)元素将需要很长时间。即使你可以每秒处理十亿个项目（非常快，即使是现在），它仍然需要 10 ⁴秒（几个小时），我敢打赌，在任何不平凡的情况下，你都无法做到得到任何接近那个速度的东西。你能找到一些方法让数据存储稀疏而且处理，这样你就可以不理会大量的零吗？

当然，如果数据不是稀疏的，那么你注定要失败。在这种情况下，您可能需要找到一个更小、更易于处理的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:22:06.800

我想如果你有一个有很多交换空间的 64 位机器，你可以声明一个大小为 10^13 的数组，它可能会工作。

但是对于这种规模的数据集，仔细考虑问题的性质变得很重要。您真的需要对所有 10^13 个元素进行随机访问读写操作吗？数组是否稀疏？你能把它表达为一个 map/reduce 问题吗？如果是这样，对 10^13 个元素的顺序访问比随机访问更实用。

# svn - 按上次提交时间排序`svn --xml list`输出

> ID：11051353
> 
> 赞同：1
> 
> 时间：2012-06-15T13:13:15.953
> 
> 标签：svn, powershell, xml-parsing

如何获取`svn --xml list`命令的输出，并使用 PowerShell 将其转换为按提交日期时间排序的表？

我使用此命令输出工作区中每个文件的摘要：

```
svn --xml list svn://svn.example.com/Database 
```

我收到以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<lists>
<list
  path="svn://svn.skyscanner.co.uk/SkyscannerDatabase/INT/Flightstore">
<entry
  kind="dir">
<name>Assemblies</name>
<commit
  revision="10768">
<author>sam</author>
<date>2011-03-03T17:35:40.705575Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Data</name>
<commit
  revision="15118">
<author>yann</author>
<date>2012-06-07T17:52:46.028463Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Database Triggers</name>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Defaults</name>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="file">
<name>Filter.scpf</name>
<size>4396</size>
<commit
  revision="14955">
<author>yann</author>
<date>2012-05-30T10:08:54.064942Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Functions</name>
<commit
  revision="13994">
<author>sam</author>
<date>2012-03-12T10:41:18.173561Z</date>
</commit>
</entry>
<entry
  kind="file">
<name>RedGate.ssc</name>
<size>0</size>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="file">
<name>RedGateDatabaseInfo.xml</name>
<size>2491</size>
<commit
  revision="14546">
<author>david</author>
<date>2012-05-02T10:23:19.811375Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Rules</name>
<commit
  revision="10768">
<author>sam</author>
<date>2011-03-03T17:35:40.705575Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Security</name>
<commit
  revision="14956">
<author>yann</author>
<date>2012-05-30T10:11:38.387808Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Service Broker</name>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Storage</name>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Stored Procedures</name>
<commit
  revision="15194">
<author>sam</author>
<date>2012-06-12T16:50:16.105896Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Synonyms</name>
<commit
  revision="10764">
<author>sam</author>
<date>2011-03-03T16:31:50.399811Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Tables</name>
<commit
  revision="15224">
<author>yann</author>
<date>2012-06-13T15:38:11.018172Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Types</name>
<commit
  revision="10768">
<author>sam</author>
<date>2011-03-03T17:35:40.705575Z</date>
</commit>
</entry>
<entry
  kind="dir">
<name>Views</name>
<commit
  revision="15142">
<author>yann</author>
<date>2012-06-08T17:28:48.067359Z</date>
</commit>
</entry>
</list>
</lists> 
```

`svn --verbose list`该表应包含与命令输出相同的列。该命令输出五列：修订、用户、大小、日期时间和文件名。这是输出`svn --verbose list svn://svn.example.com/Database`：

```
15224 yann                  Jun 13 16:38 ./
10768 sam                   Mar 03  2011 Assemblies/
15118 yann                  Jun 07 18:52 Data/
10764 sam                   Mar 03  2011 Database Triggers/
10764 sam                   Mar 03  2011 Defaults/
14955 yann             4396 May 30 11:08 Filter.scpf
13994 sam                   Mar 12 10:41 Functions/
10764 sam                 0 Mar 03  2011 RedGate.ssc
14546 david            2491 May 02 11:23 RedGateDatabaseInfo.xml
10768 sam                   Mar 03  2011 Rules/
14956 yann                  May 30 11:11 Security/
10764 sam                   Mar 03  2011 Service Broker/
10764 sam                   Mar 03  2011 Storage/
15194 sam                   Jun 12 17:50 Stored Procedures/
10764 sam                   Mar 03  2011 Synonyms/
15224 yann                  Jun 13 16:38 Tables/
10768 sam                   Mar 03  2011 Types/
15142 yann                  Jun 08 18:28 Views/ 
```

我尝试了以下简单代码：

```
[Xml] $Output = svn --xml list svn://svn.example.com/Database
$Output.Lists.List.Entry 
```

它产生包含三列的输出：种类、名称和提交。这是输出：

```
kind           name                            commit
----           ----                            ------
dir            Assemblies                      commit
dir            Data                            commit
dir            Database Triggers               commit
dir            Defaults                        commit
file           Filter.scpf                     commit
dir            Functions                       commit
file           RedGate.ssc                     commit
file           RedGateDatabaseInfo.xml         commit
dir            Rules                           commit
dir            Security                        commit
dir            Service Broker                  commit
dir            Storage                         commit
dir            Stored Procedures               commit
dir            Synonyms                        commit
dir            Tables                          commit
dir            Types                           commit
dir            Views                           commit 
```

我错过了哪些转变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:36:09.070

你可以试试 ：

```
$a = $Output.lists.list.entry |  select  name,kind,@{N="author";E={$_.commit.author}},@{N="date";E={$_.commit.date}} 
```

然后

```
$a | Sort-Object -Property date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:46:26.207

我改编[了 JPBlanc 的答案](https://stackoverflow.com/a/11051710/111424)来获得这个解决方案：

```
([Xml] (svn list --xml svn://svn.example.com/Database)).Lists.List.Entry |
Select -Property @(
  @{N='revision';E={$_.commit.GetAttribute('revision')}},
  @{N='author'; E={$_.commit.author}},
  'size',
  @{N='date'; E={$_.commit.date}},
  'name'
) |
Sort -Property date |
Format-Table -Auto 
```

它产生以下输出：

```
revision author size date                        name                   
-------- ------ ---- ----                        ----                   
10764    sam  0    2011-03-03T16:31:50.399811Z RedGate.ssc            
10764    sam       2011-03-03T16:31:50.399811Z Storage                
10764    sam       2011-03-03T16:31:50.399811Z Service Broker         
10764    sam       2011-03-03T16:31:50.399811Z Defaults               
10764    sam       2011-03-03T16:31:50.399811Z Synonyms               
10764    sam       2011-03-03T16:31:50.399811Z Database Triggers      
10768    sam       2011-03-03T17:35:40.705575Z Rules                  
10768    sam       2011-03-03T17:35:40.705575Z Types                  
10768    sam       2011-03-03T17:35:40.705575Z Assemblies             
13994    sam       2012-03-12T10:41:18.173561Z Functions              
14546    david 2491 2012-05-02T10:23:19.811375Z RedGateDatabaseInfo.xml
14955    yann   4396 2012-05-30T10:08:54.064942Z Filter.scpf            
14956    yann        2012-05-30T10:11:38.387808Z Security               
15118    yann        2012-06-07T17:52:46.028463Z Data                   
15142    yann        2012-06-08T17:28:48.067359Z Views                  
15194    sam       2012-06-12T16:50:16.105896Z Stored Procedures      
15224    yann        2012-06-13T15:38:11.018172Z Tables 
```

# java - 将 JAVA 应用程序部署到 weblogic 11g 的问题

> ID：11051360
> 
> 赞同：0
> 
> 时间：2012-06-15T13:13:35.520
> 
> 标签：java, jsp, servlets, deployment, weblogic

我有一个简单的 JSP/Servlets 应用程序。该应用程序已部署到服务器并在 URL **http://www.servername:7001/myapp1/jsp/login.jsp**上运行。我对代码进行了一些重大更改，并将其重新部署为服务器中的**myapp2**。但是，如果我尝试通过此 URL 访问它，例如**http://www.servername:7001/myapp2/jsp/login.jsp**，这会给我一个“找不到资源错误”。URL 是否在某处映射到应用程序？我需要做什么才能访问新部署的项目。在确定新项目正常工作之前，我不想删除旧项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:01:40.833

您可能需要指定上下文根。有几个地方可能会出现这种情况。

1) 在 META-INF/application.xml 中的 EAR 文件中，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://java.sun.com/xml/ns/javaee" xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd"
  id="Application_ID" version="5">
  <display-name>myapp2</display-name>
  <module>
    <web>
      <web-uri>myapp2.war</web-uri>
      <context-root>/myapp2</context-root>
    </web>
  </module>
</application> 
```

2) 在 WAR 文件中，在 WEB-INF/weblogic.xml 中，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-web-app xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd http://xmlns.oracle.com/weblogic/weblogic-web-app http://xmlns.oracle.com/weblogic/weblogic-web-app/1.0/weblogic-web-app.xsd">
    <wls:weblogic-version>10.3.2</wls:weblogic-version>
    <wls:context-root>myapp2</wls:context-root>
</wls:weblogic-web-app> 
```

# asp.net - Windows Azure 中的滑动到期

> ID：11051365
> 
> 赞同：1
> 
> 时间：2012-06-15T13:13:53.817
> 
> 标签：asp.net, azure, session-state, session-timeout, azure-web-roles

我在 Widnows Azure 中部署了一个 webrole。在 webconfig 中我指定了会话状态模式，即 InProc 模式，超时为 120 分钟。

会话在 20 分钟后到期，并且没有滑动到期。

有人对此有解释吗？我知道 Windows azure 中超时的默认值为 20 分钟。但是 Windows Azure 中是否有滑动解释，或者他只是在 20 分钟后结束会话？

我不想为会话状态使用不同的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:07:58.340

在 1.7 版本中推出的 Windows Azure 的新缓存选项中，可以选择三种不同类型的到期时间之一：无、绝对和**滑动窗口**，您可以在最后两个上定义生存时间。

正如您所说您想使用 InProc 会话，您现在可以使用 Co-located Role 缓存机制，它是两全其美的：它基于内存且可扩展，并且没有额外成本，因为它使用了定义的百分比实例内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:31:28.967

AppPool 超时时间为 20 分钟（在其他答案中讨论，例如[这个](https://stackoverflow.com/a/10352397/272109)）。通常，会话状态管理应该与本地应用程序一样工作，因为 VM 是 Windows 2008 Server R2 / SP2。

我确实质疑您对进程内会话状态处理的使用：一旦您转到多个实例，您将不再具有会话状态一致性。负载均衡器不提供粘性：客户端将在您的所有实例之间进行负载均衡，无法强制流量流向特定实例（除非您启用 ARR 并设置自己的负载均衡）。

在 2012 年春季 Windows Azure 更新中，现在既有专用的缓存角色，也有在现有角色（例如 Web 角色）中运行缓存的能力。如果启用此功能，您将获得非常快速的内存缓存，可用作您的会话状态后备存储。

# controller - 控制器内部的钩子

> ID：11051366
> 
> 赞同：0
> 
> 时间：2012-06-15T13:14:00.150
> 
> 标签：controller, hook, codeigniter-2

好吧，我正在尝试创建一个基于钩子的插件系统，但我很困惑钩子如何改变特定的控制器功能，请看下面的示例：

```
class Article extends CI_Controller
{
 public function index()
 {
  $title = $this->input->post('title');
  $body = $this->input->post('body');

  //try to add a new line here using hooks
  //maybe to add a new property like:
  //$published = $this->input->post('date');

  $this->my_db->save($article);

 }
} 
```

如何在注释行之后添加新行？我尝试过使用钩子，但效果不佳。此外，我认为使用钩子是在不更改核心代码的情况下创建插件系统的最佳方式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:03:41.583

好的，我找到了答案（至少一个选项）。您需要根据需要设置“挂钩点”，在我的情况下，我是通过这种方式做到的：

```
class Article extends CI_Controller
{
 public function index()
 {
  $title = $this->input->post('title');
  $body = $this->input->post('body');

  $article = new Article();
  $article->setTitle($title);
  $article->setBody($body);

  do_action('before_persist', $article);

  $this->my_db->save($article);

 }
} 
```

最后，我的“before_persist”函数具有正确的代码，以便向 $article 对象添加新属性

```
register_hook('before_persist', 'add_date_article', $params); 
```

如果您使用 CI 挂钩，则可以在自定义类中声明 add_date_article 函数。

```
function add_date_article($params)
{
   $article = $params[0];
   $published = $this->input->post('date');
   $article->setPublished($publiched);
} 
```

# javascript - 输出变量onclick

> ID：11051367
> 
> 赞同：0
> 
> 时间：2012-06-15T13:14:11.727
> 
> 标签：javascript, html, variables

我是一个关于javascript的初学者，我对这种语言的变量有些怀疑。

例如，我有这个代码：

```
<html>
<head>
<title>Prova_Index</title>

<script language="javascript" type="text/javascript">
function stampa(){
var Name = document.name.utente.value;
document.Write(Name);
}
</script>

</head>

<body>
<form name="name">
<p> Write some text:</p>
<input type="text" id="utente">

</form>
<input type="submit" value="Click me" onClick="stampa()"> 
</body>
</html> 
```

这是代码，我的疑惑是如何用 id 'utente' 保存文本框的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:24:17.733

通过替换您的代码来编写此代码

```
function stampa()
            {
                var Name = document.getElementById('utente').value;
                alert(Name);
                return false;
            }
    <input type="text" id="utente">

    <input type="submit" value="Click me" onclick="return stampa();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:19:06.600

而不是`var Name = document.name.utente.value;`，您可能想要使用类似的东西`var Name = document.getElementById('utente').value;`

实际上，您可能需要考虑使用[jQuery](http://jquery.com/)。对于跨浏览器的怪事，它比使用普通的旧 DOM 操作要可靠得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:19:22.130

此 Javascript 应将该输入元素的值存储到变量“名称”中，然后将其写出。

```
var Name = document.getElementById("utente").value;

document.write(Name); 
```

我会预先警告您，当您使用 HTML`<form>`标签并尝试使用`submit`输入执行功能时，页面将提交，然后不会执行 onClick 功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T13:22:31.860

首先。请向我们解释您想做什么。我们不清楚。

其次。我建议您在开始使用 JavaScript 编程时使用 ID。

当您查看您的代码时。函数准备好后提交。所以你可以尝试使用这个：

```
<input type="submit" value="click me" onclick="stampa( ); return false;" /> 
```

它不会提交表单，您可以看到您的结果。你也可以使用alert()；用于调试或 console.log() 的函数；如果您将 Firefox 与 Firebug 或 Opera 与 Dragonfly 一起使用。

你可以在你的脚本中试试这个：

```
console.log( document.getElementById( 'something' ).value( ) ); 
```

# android-ndk - 使用 OpenSL ES 的 Android NDK 测试应用

> ID：11051371
> 
> 赞同：1
> 
> 时间：2012-06-15T13:14:26.920
> 
> 标签：android-ndk, opensl

我开发了一个 NDK 应用程序（我从控制台运行）并在使用 Android 4.0.3 的 TI AM37x 硬件上运行。这个应用程序正在使用 OpenSL API，我正在尝试在硬件上播放来自 SDCard 的歌曲。相同的路径正在使用 NDK 示例代码（URI 播放），但我无法从我的应用程序中听到音频。有人有什么主意吗？我的代码流程如下：

```
 result=slCreateEngine(&engineObject, 0, NULL, 0, NULL, NULL);
    ....
    result = (*engineObject)->Realize(engineObject, SL_BOOLEAN_FALSE);
    ....
    result = (*engineObject)->GetInterface(engineObject, SL_IID_ENGINE, &engineEngine);
    ....
    result = (*engineEngine)->CreateOutputMix(engineEngine, &outputMixObject, 1, ids, req);
    ....
    Realize, GetInterface ...
    ....
    SLchar path[] = "/mnt/sdcard/Audio/Msong.mp3" ;
    SLDataLocator_URI loc_uri = {SL_DATALOCATOR_URI, path};
    SLDataFormat_MIME format_mime = {SL_DATAFORMAT_MIME, NULL,   
    SL_CONTAINERTYPE_UNSPECIFIED};
    SLDataSource audioSrcuri = {&loc_uri, &format_mime};
    ...
    result = (*engineEngine)->CreateAudioPlayer(engineEngine, &uriPlayerObject, 
                                             &audioSrcuri,&audioSnkuri, 1, idsuri, requri);
    ...
    result = (*uriPlayerObject)->Realize(uriPlayerObject, SL_BOOLEAN_FALSE);
    ...
    result = (*uriPlayerObject)->GetInterface(uriPlayerObject, SL_IID_PLAY, 
                                                                  &uriPlayerPlay);
    ...
    result = (*uriPlayerObject)->GetInterface(uriPlayerObject, SL_IID_SEEK, 
                                                                   &uriPlayerSeek);
    ...
    result = (*uriPlayerPlay)->SetPlayState(uriPlayerPlay, SL_PLAYSTATE_PLAYING); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:56:44.580

你需要配置audioSnk

```
// create output mix
const SLInterfaceID ids[1] = {SL_IID_ENVIRONMENTALREVERB};
const SLboolean req[1] = {SL_BOOLEAN_FALSE};
result = (*engineEngine)->CreateOutputMix(engineEngine, &outputMixObject, 1, ids, req);

// realize the output mix
result = (*outputMixObject)->Realize(outputMixObject, SL_BOOLEAN_FALSE); 
```

...

```
// configure audio sink
SLDataLocator_OutputMix loc_outmix = {SL_DATALOCATOR_OUTPUTMIX, outputMixObject};
SLDataSink audioSnk = {&loc_outmix, NULL}; 
```

# python - python中的类型错误

> ID：11051373
> 
> 赞同：0
> 
> 时间：2012-06-15T13:14:46.757
> 
> 标签：python, types, absolute-value

我有一个整数列表（hitTableWord），我试图在整个列表的数字的绝对值上加 1，并且在 python 中不断收到此错误消息：metric = metric + 1/(abs(metricNumber)) TypeError : + 不支持的操作数类型：'type' 和 'float'。metric 被初始化为：metric = 0

事情是我是一个菜鸟程序员，不知道这意味着什么。

```
 for a in range (0, len(hitTableWord)):
         output_file.write('Hit Word: '+ str(hitTableWord[a]) +' ' + str(hitTableNear[a])+ ', ')
         metric = metric + 1/(abs(hitTableWord[a])) 
```

任何帮助，将不胜感激。像往常一样，我的问题肯定是我不知道的简单得可笑的事情。所以感谢大家的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:22:59.607

似乎`metric`是您在某处定义的类，而不是实例-即，您有类似的东西：

```
class metric(object):
    pass 
```

您需要调用`metric()`以获取它的实例。`metric`请注意，如果未定义，您将继续收到非常相似的错误`__add__`。

同样，您可能无意中做了：

```
metric = someclass 
```

当你的意思是：

```
metric = someclass() 
```

无论哪种方式，错误消息都说`metric`包含一个*class*，并且 Python 不知道如何将类添加到浮点数（或者，就此而言，添加到任何东西）。

还：

```
for a in range (0, len(hitTableWord)): 
```

是你通常不需要在 Python 中做的事情。在这里您使用它是因为您需要访问两者的相关元素`hitTableWord`并且`hitTableNear`- 您可以更惯用地执行此操作：

```
for word, near in zip(hitTableWord, hitTableNear): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:23:37.850

你用 0 初始化这个指标。但我想不是这样的。您`type`在`metric`变量中有一个类型的值。这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:23:07.867

我假设`hitTableWord`只包含数字，你能看看你定义指标的地方吗？该错误意味着您正在尝试将两种不同类型的变量添加在一起，并且 Python 无法对给定类型执行此操作，类似于您无法将字符串添加到整数或将整数连接到字符串。

举个例子：

```
5 + "abc" 
```

在这里，加号用作算术运算符，这不适用于字符串。

```
"abc" + 5 
```

在这里，加号表示字符串连接，这不适用于整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:25:13.423

怎么样

```
from itertools import izip

metric = 0.
for tw,tn in izip(hitTableWord, hitTableNear):
    output_file.write("Hit Word: {} {}".format(tw,tn))
    metric += 1./abs(tw) 
```

# php - ZF Doctrine 模型类 ext Base Class

> ID：11051378
> 
> 赞同：1
> 
> 时间：2012-06-15T13:15:15.640
> 
> 标签：php, zend-framework, model, doctrine

我显然处于深渊。我没有掌握 Doctrine ModelClass 和 Model Table Class 扩展基本模型的好处

例如

```
class StaffStaff extends Base_StaffStaff
{
    public function getStaffInformation($id_staff_staff){   // == getInformationsByStaff()

        $query = Doctrine_Query::create()
                        ->from("StaffStaff s")
                        ->innerJoin('s.StaffContract c')
                        ->where("s.id_staff_staff = ?", $id_staff_staff);
        $result = $query->execute();

        return $result;

    }
} 
```

并在控制器中

```
StaffController{

    public function readAction() {

        $id = $this->getRequest()->getParam("id_staff_staff");

        // Get information about a staff
        $model = new StaffStaff();
        $q = $model->getStaffInformation($id);

        $this->view->data = $q[0];

/**
*
* Why do you have to say $q[0] ?
* Is there no better way of doing it?
* How can we access the properties from other tables contained inside the BaseClass extended by the ModelClass
*
*/
} 
```

模型：

```
/**
 * Base_StaffStaff
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @property integer $id_staff_staff
 * @property integer $fk_id_staff_individual
 * @property integer $fk_id_staff_team
 * @property integer $fk_id_staff_function
 * 
 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:08:27.867

当使用 Query Builder API 时，这是您在`getStaffInformation()`函数中组装查询的方式，该`execute()`方法返回一个可迭代游标。这个游标本质上是一个数组，这就是 $q[0] 将访问第一个元素的原因。

如果您尝试只返回一个结果，则应`getSingleResult()`改用：

```
$query = Doctrine_Query::create()
   ->from("StaffStaff s")
   ->innerJoin('s.StaffContract c')
   ->where("s.id_staff_staff = ?", $id_staff_staff);
return $query->getSingleResult(); 
```

另一方面，可迭代光标很整洁，因为您可以执行以下操作：

```
$staff = $model->getStaffInformation($id);
foreach($staff as $person)
{
   // Assign all staff to view array
   $this->view->staff[] = $person;
} 
```

# jquery - 使用 jQuery-UI 使包含 SWF 对象的 DIV 在 IE9 中可拖动

> ID：11051379
> 
> 赞同：0
> 
> 时间：2012-06-15T13:15:16.470
> 
> 标签：jquery, jquery-ui, internet-explorer, internet-explorer-9, jquery-ui-draggable

正如标题所说，我有一个包含 SWF 对象（由 Uploadify 创建）的 div，我希望它是可拖动的，但 IE9 似乎拒绝让我这样做。初始化 SWF 对象后，您将看到文本“SELECT FILES”，您将无法在 IE9 中拖动该框。它适用于 FF 和 Chrome。这是代码：

[http://jsfiddle.net/axzdR/7/](http://jsfiddle.net/axzdR/7/)

控制台返回此错误消息： SCRIPT5007: Object expected jquery.min.js, line 2 character 22741（错误消息由 Wiry 提供）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:16:05.217

确保在其他库之前加载 jQuery。这是它现在在 IE9 中工作的小提琴。

[http://jsfiddle.net/axzdR/9/](http://jsfiddle.net/axzdR/9/)

# java - 如何使用 JFileChooser 在 Ubuntu 中浏览映射驱动器中的文件

> ID：11051381
> 
> 赞同：1
> 
> 时间：2012-06-15T13:15:20.947
> 
> 标签：java, ubuntu, jfilechooser

我有一个应用程序，我在其中使用 JFileChooser 选择文件。在 Windows 中，我可以从我的映射网络驱动器中查看和选择文件。

但在 Ubuntu 中，我看不到我的映射驱动器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:18:10.720

我也有这个问题。我找不到满意的答案，但最后，我创建了一个符号链接，指向我尝试使用的映射驱动器，并将其放在我可以访问的驱动器上。它工作得很好。

在 Unix 上，符号链接的命令是

```
ln -s "pathToFolder" "symLinkName" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:42:42.223

在 Unix 中，您看不到网络目录，因为您需要使用像 Samba 这样的协议来通过网络访问文件夹。

因此，如果您想从 FileChooser 访问这些文件夹，我建议您将它们安装在您自己的文件系统上，就像您可以像任何常规文件夹一样从 FileChooser 访问它们。

[这是在 Ubuntu 中安装网络驱动器的教程](http://www.automaticable.com/2008-01-18/how-to-mount-a-network-drive-in-ubuntu/)。

# ruby - 等待 webdriver 对象类型检测

> ID：11051387
> 
> 赞同：1
> 
> 时间：2012-06-15T13:15:36.687
> 
> 标签：ruby, watir-webdriver

我对 Watir 很陌生。

我正在寻找一种方法来检测子程序接收到的对象类型，以便应用正确的方法。最终结果应该是这样的：

```
sub clickOnElement (elementId, elementRef)
element= browser.(elementId.to_sym, elementRef)
case TypeOfElement (element)
   :link            element.click
   :radio           element.set
   :checkbox        element.set
   :list            ....
end
end 
```

我的问题是关于 TypeOfElement() 的实际实现。

任何建议或指针表示赞赏：提前谢谢你

塞尔吉奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:35:54.107

您可以根据元素变量的类（在将其转换为其子类型之后）执行 case 语句。这样您就不必实现自己的 TypeOfElement 方法。

就像是：

```
e = browser.element
case e.to_subtype
    when Watir::CheckBox
        e.set
    when Watir::Anchor #Link
        e.click
    else
        raise( e.class.to_s + ' not handled' )
end 
```

笔记：

*   browser.element 返回第一个元素，这将是 HTML 标记。因此，在上面的case语句中会引发异常。我假设 e 会更具体。
*   在 case 语句的开头，它只是 'e.to_subtype' 而不是 'e.to_subtype.class' （如[How to catch Errno::ECONNRESET class in "case when"? 中所述](https://stackoverflow.com/questions/3801469/how-to-catch-errnoeconnreset-class-in-case-when)）。

# c# - 如何使用来自 WinDbg 的调试信息

> ID：11051389
> 
> 赞同：0
> 
> 时间：2012-06-15T13:15:45.117
> 
> 标签：c#, .net-4.0, windbg, access-violation

当我尝试从发布文件夹运行它时，我的应用程序不断崩溃。

我将日志放在 try catch 块中并捕获它们，但它们都指向一种方法。详细问题在我[以前的帖子](https://stackoverflow.com/questions/11030423/getting-accessviolation-exception-when-returning-a-bool-from-c-to-c-sharp)中。

然后我决定使用 WinDbg 并附加可执行文件来检查究竟是什么导致了我的应用程序崩溃。现在来自 WinDbg 的信息似乎很神秘。

> (13e4.1444)：访问冲突 - 代码 c0000005（第一次机会）在任何异常处理之前报告第一次机会异常。可以预期并处理此异常。*** 错误：找不到符号文件。默认为 E:\VCS\DeskconWSP\Deskcon\bin\Release\tinyWRAP.dll 导出符号 - eax=0e7e1c00 ebx=0d83d918 ecx=0d835b70 edx=0cce8ce0 esi=0d835b70 edi=ffffffff eip=00000000 esp=0e4dfa4p ebp=0e =0 nv up ei pl nz na po nc cs=001b ss=0023 ds=0023 es=0023 fs=003b gs=0000 efl=00010202 00000000 ?? ？？？

有关如何使用此调试信息的任何参考或指示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:28:55.817

1.  我的意思是最好的方式，但您需要阅读 WinDbg（请参阅[WinDbg AZ](http://windbg.info/doc/2-windbg-a-z.html)）。它有一个巨大的学习曲线，但是一旦你习惯了它就会非常有用。

2.  您需要配置 WinDbg 以加载 tinyWRAP.dll 的调试信息。应该有一个名为 tinyWRAP.PDB 的文件，假设您是该文件的开发者。打开 File->Symbol Path 并根据需要添加。

3.  Microsoft 支持他们自己的二进制文件的符号服务器（即 PDB 文件）。将此“路径”添加到 WinDbg 符号服务器路径，WinDbg 将下载它可以从 MS 找到的任何内容：SRV*C:\SymbolServer\symserver*http://msdl.microsoft.com/download/symbols

4.  访问冲突只是意味着程序试图访问不应该的堆内存；即，分配给另一个进程的内存。

例如，如果您对指向整数的指针进行算术运算而不首先取消引用它，您最终会将变量指向进程可能无法访问的某个其他位置。

您几乎永远不会在纯托管程序中看到这一点，但如果您正在与本机 DLL 或代码进行交互，那么这可能会给您一些提示。

# reportlab - 有没有办法在 SimpleDocTemplate 的 onFirstPage 中使用表

> ID：11051392
> 
> 赞同：1
> 
> 时间：2012-06-15T13:15:51.780
> 
> 标签：reportlab

有没有办法在 SimpleDocTemplate 的 onFirstPage 中使用表。它是一个可流动的对象，应该是第一个参数。但我想显示应该在所有页面上显示的数据。

```
doc.build(flowables, onFirstPage=myFirstPage, onLaterPages=myFirstPage) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:56:23.973

那是不可能的。

你想达到什么目的？您应该能够使用 PageLayout 中的框架在第一页上获得一个表格，以便将其放置在您想要的任何位置。

# regex - 如何在 TCL/EXPECT 中使用 $expect_out 分配变量？

> ID：11051393
> 
> 赞同：8
> 
> 时间：2012-06-15T13:16:00.063
> 
> 标签：regex, tcl, expect

如果我想`DEF_23`使用以下正则表达式进行匹配：

```
expect {
    -re "DEF_\[0-9]*"
    set result $expect_out(1,string)
} 
```

为什么说`no such element in array`？它是如何`$expect_out`工作的，如何`DEF`使用正则表达式捕获并将其分配给变量`result`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T15:26:44.477

您正在寻找-如果您在正则表达式中捕获括号，则将填充`expect_out(0,string)`数组元素。`1,string`

[expect 手册页](http://www.tcl.tk/man/expect5.31/expect.1.html)在**expect**命令的文档中记录了*expect_out*的使用 ：

 **> 在匹配模式（或 eof 或 full_buffer）时，任何匹配的和以前不匹配的输出都保存在变量*expect_out(buffer)*中。最多 9 个正则表达式子字符串匹配保存在变量*expect_out(1,string)*到*expect_out(9,string)*中。如果在模式之前使用**-indices**标志，则 10 个字符串的开始和结束索引（以适合**lrange**的形式）存储在变量*expect_out(X,start)*和*expect_out(X,end)*中，其中 X 是数字，对应于缓冲区中的子字符串位置。0 是指匹配整个模式的字符串，并为 glob 模式和正则表达式模式生成。

手册页中有一个说明性示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-23T03:07:29.963

看来上面的解释不准确啊！检查这个例子：

```
$ cat test.exp
#!/usr/bin/expect

set timeout 5
log_user 0

spawn bash

send "ls -1 db*\r"
expect {
  -re "^db.*$" {
    set bkpfile $expect_out(0,string)
  }
}

send_user "The filename is: $bkpfile\n"

close
$ ls -1 db*
dbupgrade.log
$ ./test.exp
can't read "bkpfile": no such variable
    while executing
"send_user "The filename is: $bkpfile\n""
    (file "./test.exp" line 15)
$ 
```

使用 $expect_out(1,string) 或 $expect_out(buffer) 时测试结果相同。我错过了什么还是这是预期的行为？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T13:49:49.413

Aleksandar - 如果您将匹配更改为“\ndb.*$”，它应该可以工作。

如果您打开 exp_internal 1，您将看到缓冲区包含如下内容：“ls -1 db*\r\ndbupgrade.log\r\n08:46:09”

因此，插入符号 (^) 将取消您的模式匹配。**

# ios - 我在横向模式下设计了我的笔尖，但在模拟器中它以纵向模式显示？

> ID：11051405
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:17:01.773
> 
> 标签：ios, ipad

我用按钮和图像在横向模式下设计了我的笔尖，但在模拟器中它以横向模式显示，但按钮和图像不像笔尖上的那样，它们似乎在右侧而不是在顶部？请有任何指示。笔尖图片![模拟器](../Images/57a587b15f6e962a90b4e0d2f747d553.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:24:43.867

使用此代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
     if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
          NSLog(@"Landscape Mode");
          // your code when your sdk is in landscape mode
    }
    else
    {
          NSLog(@"Portrait Mode");
          // your code here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:21:16.530

如果您希望此视图控制器仅限于某个方向，请在您的视图控制器类中使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

请在此处阅读我的答案[保持 iPhone 横向旋转？](https://stackoverflow.com/questions/11039182/keep-iphone-rotation-in-landscape/11039282#11039282)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:00:39.080

您如何在界面构建器中设计视图（纵向/横向）不会影响它的实际显示方式。您需要在代码中（或可能在 p 列表中）进行设置。

# php - PHP如何将每个数组值与我指定的值进行比较？

> ID：11051406
> 
> 赞同：0
> 
> 时间：2012-06-15T13:17:02.320
> 
> 标签：php, mysql

例如，这是我的代码：

```
$query = "SELECT * FROM ...";
$exec_query = mysql_query($query, $db_connect);
$fetchdetails = mysql_fetch_array($exec_query); 
```

我正在使用这样的`if`条件：

```
if ($fetchdetails['field_name'] == 3) {
 do something;
}

else {
} 
```

但在此，仅比较`fetchdetails`数组中的 1 行。我该怎么做才能将该数组中的每一行与 3 进行比较？我不想要任何 OOP 的解决方案，我想坚持使用传统编码。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:19:28.650

你应该试试这个：

```
while($fetchdetails = mysql_fetch_array($exec_query)) {
 if ($fetchdetails['field_name'] == 3) {
  do something;
 }

 else {
 }

} 
```

那是因为，在`while(...)`条件下，您将遍历所有 db（选定）记录。一旦`mysql_fetch_array`完成记录，循环将自动停止。

我会记得你`mysql_fetch_array`

> 返回与获取的行相对应的字符串数组，如果没有更多行，则返回 FALSE。（来自[手册](http://php.net/manual/en/function.mysql-fetch-array.php)）

这将允许“你”停止迭代过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:23:29.400

如果您的意思是要比较 $fetchdetails 数组的每一行，那么

```
foreach($fetchdetails as $index => $value) {
    if($value == 3) { 
        // do something
    }
} 
```

应该这样做！如果要遍历每个 SQL 值，请参阅其他答案。

# javascript - 使用javascript重定向到html页面

> ID：11051413
> 
> 赞同：3
> 
> 时间：2012-06-15T13:17:24.510
> 
> 标签：javascript, jquery, html, redirect

我有 2 个 html 页面，第一个是登录页面，第二个，当我登录时我重定向到主页，必须在加载时执行，只有在登录后第一次加载页面时必须调用此方法。当我重新加载或刷新此方法时再次调用。

`1- can i refresh the page without calling the onload method? if yes how?`

或者

`2- can i redirect to a specific method in the page to avoid calling the onload method every time? if yes how`

或者

`3- can i write any thing in the onload method that keep me calling the method only at the first time? if yes how`

**注意：**我知道在 Web 应用程序中，每次重新加载页面时都必须调用 load 函数，但是我必须采取任何解决方案来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:21:49.027

您可以通过重定向到刷新页面

```
[urlOfCurrentPage] + "?redirected=true" 
```

然后在onLoad方法中检查URL中是否有GET“redirected”参数，如果有，跳过onload。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:24:13.487

两种选择：

1.  您可以使用 cookie。登录时设置一个 cookie，并在加载期间检查它。然后在执行初始化后清除它，以便下次加载检查将失败。
2.  您可以将地址用作参数，如`?justLoggedIn`，或哈希后的值`#justLoggedIn`。然后检查并重定向到相同的 url 减去`justLoggedIn`部分。该`#`版本的优点是它实际上并不重新加载页面，这与使用该`?`版本时不同。

# string - Lisp - 仅当还不是字符串时才将符号转换为字符串

> ID：11051415
> 
> 赞同：3
> 
> 时间：2012-06-15T13:17:42.543
> 
> 标签：string, recursion, lisp, symbols

只有当符号在lisp中还不是字符串时，有没有办法将符号转换为字符串？

它应该像这样工作：

（仅当转换'ABC）=>“ABC”

（仅当转换“ABC”）=>“ABC”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T21:59:40.070

使用功能`STRING`。

```
CL-USER > (string "FOO")
"FOO"

CL-USER > (string 'FOO)
"FOO" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T18:21:55.477

您可以使用 format 函数进行转换。当然它比列出的其他选项慢，但它可以处理其他数据类型，控制大写/小写等。因此，对于开发或代码的非内循环部分，这可能对您有用：

```
CL-USER>
(format nil "~a" "str")
"str"
CL-USER>
(format nil "~a" 'str)
"STR"
CL-USER> 
(format nil "~(~a~)" 'str)
"str"
CL-USER>
(format nil "~(~a~)" "str")
"str"
CL-USER> 
~ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:26:32.617

```
CL-USER> (defun symbol-or-string-to-string (x)
       (typecase x
         (symbol (symbol-name x))
         (string x)
         (otherwise (error "Wrong type"))))
SYMBOL-OR-STRING-TO-STRING
CL-USER> (symbol-or-string-to-string "foo")
"foo"
CL-USER> (symbol-or-string-to-string 'foo)
"FOO"
CL-USER> (symbol-or-string-to-string #())
; Evaluation aborted.
CL-USER> 
```

但是重复转换它的想法听起来很奇怪。你能说明你为什么需要这样做吗？

# php - PHP检测电话类型和回声

> ID：11051416
> 
> 赞同：1
> 
> 时间：2012-06-15T13:17:46.000
> 
> 标签：php, user-agent

我正在尝试根据访问者的 UserAgent 字符串来识别他们的电话类型。但是，我在我的代码中找不到错误。

```
<?php

//create an array to be filled with phone type
$arr = phones();

$iphone = strpos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$android = strpos($_SERVER['HTTP_USER_AGENT'],"Android");
$palmpre = strpos($_SERVER['HTTP_USER_AGENT'],"webOS");
$berry = strpos($_SERVER['HTTP_USER_AGENT'],"BlackBerry");
$ipod = strpos($_SERVER['HTTP_USER_AGENT'],"iPod");
$nokia = strpos($_SERVER['HTTP_USER_AGENT'],"Nokia");

if ($iphone || $android || $palmpre || $ipod || $berry || $nokia == true)
{
    echo "Specially for you as $iphone owner!";
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:21:08.857

考虑到其他评论，您不应该自己这样做。这些用户代理远不是一个详尽的列表。但是，如果您想自己进行实验，我建议您尝试以下方法。

此外，如果`"iPhone"`未找到，则条件自动为假，并且不会评估其他语句。

我喜欢做这样的事情：

```
$has_mobile_ua = FALSE;
$user_agents = array('iPhone', 'Android', 'webOS', 'BlackBerry', 'iPod', 'Nokia');

foreach ($user_agents as $user_agent) {
  if (strpos($_SERVER['HTTP_USER_AGENT'], $user_agent) !== FALSE) {
    $has_mobile_ua = TRUE;
    break;
  }
}

if ($has_mobile_ua) {
  // your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:26:43.380

对于这种情况，请尝试使用 stristr 更改 strpos..

```
$iphone = stristr("$_SERVER[HTTP_USER_AGENT]","iphone"); 
```

它对我有用，使用与您相同的代码..

# python - Python - 如果给定 GMT 偏移量和给定 UTC - 如何获取时区的当前时间？

> ID：11051421
> 
> 赞同：0
> 
> 时间：2012-06-15T13:18:09.697
> 
> 标签：python

我得到以下信息：

```
The offset of the user's time from GMT in minutes.  For example, GMT+10 is
timezone_offset = 600. 
```

我使用 pytz 来获取 UTC 的当前时间：

```
from datetime import datetime
from pytz import timezone
now_utc = datetime.now(timezone('UTC')) 
```

我如何获得用户的时间？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:19:56.170

您可以添加`timedelta(hours=10)`或添加`timedelta(minutes=600)`到包含 UTC 时间的日期时间对象。

但是，最好存储时区而不是偏移量，然后使用 Python 的时区函数来转换时间。

# url - pinterest 链接失效了？

> ID：11051425
> 
> 赞同：1
> 
> 时间：2012-06-15T13:18:16.397
> 
> 标签：url, urlencode, pinterest

试图用 javascript 创建一个 pinterest 链接。它会打开 pinterest，显示正确的图像和描述，但是当我单击 PIN IN 时，它只会刷新而不是固定它。

![一切看起来都很好，但没有被固定？！](../Images/06a0ea8d14df1879d07faab79842c692.png)

创建一个自定义链接并创建一个我认为应该可以工作的 URL -

```
http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fsandbox.modernactivity.co.uk%2Findependent_02%2F%3Fattachment_id%3D743&media=http%3A%2F%2Fsandbox.modernactivity.co.uk%2Findependent_02%2Fwp-content%2Fuploads%2F2012%2F06%2FBBC%20-%20MEAT-NEW%20WEBSITE%20TEST%204%3A3%20to%2016%3A9%20cropping-743-still-150x84.jpg&description=Independent%20Films%2C%20%E2%80%98Meat%E2%80%99&ref=http%3A%2F%2Fsandbox.modernactivity.co.uk%2Findependent_02%2Fdirectors%2Fdaniel-levi%2Fshowreels%2Flive-action%2Fvideo%2F743%2F%23 
```

有谁知道可能出了什么问题？

最好的，丹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T11:28:29.993

好的..让我从免责声明开始。这个答案甚至可能不正确，但它确实对我有用。我遇到了同样的问题，我的 URL 中有很多“+”。URL 编码等效于“”。所以，本质上 pinterest 似乎有“固定”它们的问题，尽管渲染它们似乎没有问题......你的 URI 似乎也有很多空格......

因此，如果 URI 在您的控制范围内，您可以

1.  在 URLEncoding 之后创建 uri
2.  确保 URI 上没有出现空格等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:15:10.827

查看我的 IIS 日志，我注意到 Pinterest 将用户重定向到我的网站，即使地址中指定了前导 http://，这似乎也是导致错误的原因。不确定如何在 IIS 中解决这个问题，但我想我会给你一个我找到的线索。

# range - 如何选择日期范围之间的所有日期？

> ID：11051427
> 
> 赞同：0
> 
> 时间：2012-06-15T13:18:28.877
> 
> 标签：range, common-table-expression

我有一个包含 2 列的 SQL 表，如下所示

> 第 1 列：生产日期 - 日期时间 - 非 NULL
> 
> 第 2 列：数量 - 整数 - 非 NULL

现在表中有 2 条记录

> 1-1-2012, 5
> 
> 1-3-2012, 7

如果我将日期范围 StartDate 指定为 1-1-2012 并将 EndDate 指定为 1-15-2012，则结果的输出应如下所示

> 2012 年 1 月 1 日 5
> 
> 2012 年 1 月 2 日 0
> 
> 2012 年 1 月 3 日 7
> 
> 2012 年 1 月 4 日 0
> 
> 2012 年 1 月 5 日 0
> 
> 2012 年 1 月 6 日 0
> 
> .
> 
> .
> 
> .
> 
> 2012 年 1 月 15 日 0

意味着查询应该返回给定范围内的所有日期，如果在表中没有条目，那么数量为 0。

怎么做？请通过查询提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:47:51.903

这是一份关于你可以使用什么的非常乐观的草案（来源 -[这里](https://stackoverflow.com/a/3946151/1113272)）

```
declare @startDate datetime;
declare @endDate datetime;

set @startDate = '2012-02-09';
set @endDate = '2012-02-15';

WITH span AS (
  SELECT @startDate AS dt
  UNION ALL
  SELECT DATEADD(dd, 1, dt)
    FROM span s
   WHERE DATEADD(dd, 1, dt) <= @endDate)

select s.dt, t.Quantity from span s
join table t
on s.dt = t.ProductionDate 
```

# wpf - 如何绑定到以'{'结尾的键的字典条目？

> ID：11051429
> 
> 赞同：1
> 
> 时间：2012-06-15T13:18:52.930
> 
> 标签：wpf, xaml, data-binding

我想绑定到对象的字典属性中的值。该值的字典键是以'{'结尾的字符串。如何在 XAML 中表达这一点？

我大概需要以某种方式逃避这个角色。

不起作用的示例 XAML：

```
<TextBlock Text="{Binding Attribs[test{]}" /> 
```

这`Attribs`是类型的 datacontext 对象的属性`IDictionary<string, object>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:45:52.897

通过避免使用绑定表达式而是使用 Binding 元素，此 XAML 起作用：

```
<TextBlock>
  <TextBlock.Text><Binding Path="Attribs[test{]"/></TextBlock.Text>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:55:29.913

我刚刚测试了以下 XAML 片段，它似乎工作正常：

```
<TextBlock Text="{Binding Attribs[test\{]}"/> 
```

\ 转义字符在[本文](http://msdn.microsoft.com/en-us/library/ms742451.aspx)中进行了解释。

# linux - Linux 命令 - 超时中止操作

> ID：11051432
> 
> 赞同：5
> 
> 时间：2012-06-15T13:19:09.683
> 
> 标签：linux, unix, scripting

我正在编写一个脚本，在某些时候我调用了“command1”，它在调用 CTRL+C 之前不会停止。

1.  有没有办法为命令声明超时？喜欢：command1 参数 -timeout 10
2.  如何以文本形式编写 CTRL+C 命令？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:24:36.247

您可以使用`timeout`来自 GNU coreutils 的命令（您可能需要先安装它，但它包含在大多数（如果不是全部）Linux 发行版中）：

```
timeout [OPTION] DURATION COMMAND [ARG]... 
```

例如：

```
timeout 5 ./test.sh 
```

将在执行 5 秒后终止脚本。如果要发送 KILL 信号（而不是 TERM），请使用`-k`flag。

[这里](http://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)有`timeout`命令的完整描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:24:20.960

我刚试过

```
jekyll -server & sleep 10;pkill jekyll 
```

可以为你的情况做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T13:25:34.233

在您的脚本中，您可以设置等待。`wait 10`将等待 10 秒，以及在不`CTRL + C`查看`exit`命令的情况下退出程序。如果你使用`exit 0`它意味着好的。有不同的版本，但我不知道它们到底是什么意思。

```
exit 1
exit 2..... so on and so forth 
```

更新

* * *

@塞拉达

没必要打。您可能只是说“也许您没有正确理解这个问题” Stackoverflow 在这里帮助人们学习，而不是拆毁他们。他们为此发明了 Reddit。至于退出代码，您可以通过发出带有代码的 exit() 命令来强制程序退出。直接来自[linux.die.net](http://linux.die.net/abs-guide/exitcodes.html)。

```
Exit Code Number Meaning Example Comments 
1 Catchall for general errors let "var1 = 1/0" Miscellaneous errors, such as "divide by zero" 
2 Misuse of shell builtins (according to Bash documentation)   Seldom seen, usually defaults to exit code 1 
126 Command invoked cannot execute   Permission problem or command is not an executable 
127 "command not found"   Possible problem with $PATH or a typo 
128 Invalid argument to exit exit 3.14159 exit takes only integer args in the range 0 - 255 (see footnote) 
128+n Fatal error signal "n" kill -9 $PPID of script $? returns 137 (128 + 9) 
130 Script terminated by Control-C   Control-C is fatal error signal 2, (130 = 128 + 2, see above) 
255* Exit status out of range exit -1 exit takes only integer args in the range 0 - 255 
```

# sqlite - BlackBerry OS 5.0 SQLite 内存不足

> ID：11051434
> 
> 赞同：2
> 
> 时间：2012-06-15T13:19:18.573
> 
> 标签：sqlite, blackberry, java-me

有时我无法将数据插入我的数据库。`out of memory`即使 db 文件为空，我也会遇到异常。

以下是我的代码，请看一下。在此先感谢您的任何建议。

```
public class ThreeptalkDAO {

private static ThreeptalkDAO service;
private static Database database;

public static ThreeptalkDAO getInstance() throws CustomException {
    if (service == null) {
        service = new ThreeptalkDAO();
        URI uri;
        try {
            uri = URI
                    .create("file:///SDCard/threeptalk/db/threeptalkdao.db");
            database = DatabaseFactory.openOrCreate(uri);
            // createMessagesTable();

        } catch (Exception e) {
            System.out.println("exp is:" + e.getMessage());
            Dialog.alert(e + e.getMessage());

            throw new CustomException(e.getMessage());

        } // here path is like
            // 'file:///SDCard/Databases/mytestApp/testdatabase.db'

    }
    return service;
}

public void createMessagesTable() throws CustomException {
    try {
        Statement statement = database
                .createStatement("CREATE TABLE IF NOT EXISTS messages(message_id INTEGER PRIMARY KEY,message,status,message_type_id,response,date_added,sender,office,sent_on,phoneno)");
        statement.prepare();
        statement.execute();
        statement.close();
    } catch (DatabaseException e) {
        // TODO Auto-generated catch block
        throw new CustomException(e.getMessage());
    }

}

public void insertMessages(Vector messages) throws CustomException {
    for (int i = 0; i < messages.size(); i++) {
        Messages m = (Messages) messages.elementAt(i);
        try {
            Statement statement = database
                    .createStatement("INSERT INTO messages (message_id,message,status,message_type_id, response,date_added,sender,office,sent_on,phoneno) VALUES ("
                            + m.getMessageID()
                            + ",'"
                            + m.getMessage()
                            + "','"
                            + "unread"
                            + "','"
                            + m.getMessageType()
                            + "','"
                            + "0"
                            + "','"
                            + m.getMdate()
                            + "','"
                            + m.getSender()
                            + "','"
                            + m.getOffice()
                            + "','"
                            + m.getSentOn()
                            + "','"
                            + WebserviceFactory.getInstance().getPhoneNo()
                            + "')");

            statement.prepare();
            statement.execute();
            statement.close();
        } catch (DatabaseException e) {
            // TODO Auto-generated catch block
            throw new CustomException(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T23:48:36.100

在 BlackBerry OS 5.0 中，Sqlite 的可用内存非常有限 - 512kb。这意味着构建大量语句或插入大量数据可以轻松消耗 Sqlite 可用的所有内存，即使设备报告大量可用内存也是如此。
看起来您正在自己构建插入语句字符串，并为每个新行执行此操作。通过使用准备好的语句，然后将值绑定到语句中，您可以节省大量内存。这还具有避免有意或无意的 sqlite 注入问题的优点。

不要直接输入字符串值，而是在循环外创建语句，然后在循环内重置并绑定相同的语句对象：

```
Statement statement = database.createStatement(
    "INSERT INTO messages (message_id,message,status,message_type_id,"+
    "response,date_added,sender,office,sent_on,phoneno) VALUES (?,?,?,?,?,?,?,?,?,?)");
statement.prepare();
for (int i = 0; i < messages.size(); i++) {
    Messages m = (Messages) messages.elementAt(i);    
    statement.reset();
    statement.bind(1, m.getMessageId());
    statement.bind(2, m.getMessage());
    // and so on, for all the arguments
    statement.execute();
} 
```

# jquery - jQuery 对话框未按预期工作

> ID：11051439
> 
> 赞同：1
> 
> 时间：2012-06-15T13:19:32.400
> 
> 标签：jquery

这可能是一个愚蠢的问题，但我对 jQuery 很陌生。我正在尝试创建一个单击时会弹出登录对话框的按钮。以某种方式显示表单而不是创建为对话框。下面是我的代码：

```
<head>
    <script src="js/jquery-ui-1.8.21.custom.min.js"></script>
    <script>
        $(function() {   
            $('#login').dialog({
                    autoOpen: false,
                    title: 'Login',
                    height: 300,
                    width: 350,
                    modal: true
            });

            $('#open').click(function() {
                $('#login_form').dialog('open');
                return false;
            });
        });
    </script>        
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div id="login">
        <form class="caption" action="Login.php" method="post">           

        <p>E-mail: <br><input type="text" name="email" maxlength="255" /></p>
        <p>Password:</p> <br><input type="password" name="pwd" /></p>
        <p><input type="submit" value="Login" /></p>

        </form>

    </div>
    <button id="open">Click</button>
</body> 
```

知道我做错了什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:31:43.647

亚历克斯 W 上面有：

来自[https://developers.google.com/speed/libraries/devguide#jqueryUI](https://developers.google.com/speed/libraries/devguide#jqueryUI)

> 注意：这个库依赖于 jquery。您还必须在加载此模块之前加载 jquery。

此外，您尝试的`open`是`#login_form`元素，而不是`#login`元素。您需要使用相同的 jQuery 集。请参阅下面的修改后的代码。

```
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script>
        $(function() {   
            $('#login').dialog({
                    autoOpen: false,
                    title: 'Login',
                    height: 300,
                    width: 350,
                    modal: true
            });

            $('#open').click(function() {
                $('#login').dialog('open');
                return false;
            });
        });
    </script>        
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div id="login">
        <form class="caption" action="Login.php" method="post">           

        <p>E-mail: <br><input type="text" name="email" maxlength="255" /></p>
        <p>Password:</p> <br><input type="password" name="pwd" /></p>
        <p><input type="submit" value="Login" /></p>

        </form>

    </div>
    <button id="open">Click</button>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:26:09.480

改变

```
$('#open').click(function() {
                $('#login_form').dialog('open');
                return false;
            }); 
```

至

```
$('#open').click(function() {
                    $('#login').dialog('open');
                    return false;
                }); 
```

由于您的对话框 div 的 id`login`不是`login_form`.

[工作小提琴](http://jsfiddle.net/joycse06/aZT5L/)

# xcode - 如何在 Xcode 4.5 的界面生成器中调整大小？

> ID：11051446
> 
> 赞同：3
> 
> 时间：2012-06-15T13:19:51.060
> 
> 标签：xcode

我最近下载了 Xcode 4.5 (Developer Preview) 并注意到当你拖入某些东西时，你无法通过单击并拖动已拖入元素的边缘来调整它的大小。如何调整 UITextView 的大小？

编辑：阻碍我的只是约束（Xcode 4.5 的一部分）。现在一切都好，无论如何感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:57:09.230

在 Interface Builder 中转到：Interface Builder -> Simulated Metrics -> Size -> Freeform

您现在可以调整视图的大小。

@Mustafa Ahmedani - 您可以通过以下方式关闭约束：Interface Builder -> File Inspector -> Interface Builder Document -> Use AutoLayout（取消选中）。

PS：也请点赞。谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:19:23.857

如果您安装 4.5 的完整版本，现在可以在应用商店中获得，它应该可以正常工作。

# javascript - 如何在Javascript中用视频标签替换音频标签或用另一个标签替换标签

> ID：11051451
> 
> 赞同：0
> 
> 时间：2012-06-15T13:20:04.117
> 
> 标签：javascript, html, tags

我想用html 文档中的标签替换所有`<audio>`标签。`<video>`我如何使用 javascript 函数来做到这一点？

请帮助我编写函数。我对此一无所知，并在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:29:24.717

例如：

```
function functionname(){
  document.body.innerHTML=document.body.innerHTML.replace('audio>','video>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:34:03.120

试试这个，应该可以的。

```
var aud = document.getElementsByTagName("audio");
while(aud[0]){
    var v = document.createElement("video");
    var a = aud[0].attributes;
    for(var i=0;i<a.length;i++) v.setAttribute(a[i].nodeName,a[i].nodeValue);
    v.innerHTML = aud[0].innerHTML;
    aud[0].parentNode.insertBefore(v,aud[0]);
    aud[0].parentNode.removeChild(aud[0]);
}​ 
```

那应该把所有东西都放在里面，但只需替换标签。

见这里： http: [//jsfiddle.net/8m59n/](http://jsfiddle.net/8m59n/) - 你必须用萤火虫或网络检查器检查它才能看到。

# msbuild - 使用 msbuild 删除空目录

> ID：11051454
> 
> 赞同：7
> 
> 时间：2012-06-15T13:20:20.570
> 
> 标签：msbuild

如何递归处理路径，以便处理完成后路径下没有空目录。

例如，假设我们有`C:\Dir1\Dir2\Dir3`并且这些目录中没有文件。结果应该是删除所有三个目录。

我想在不使用自定义任务的情况下完成此操作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T17:32:58.460

像这样的东西应该可以工作，虽然只是为了获得数组长度，但没有检查计算数千个文件的性能......

```
<Project DefaultTargets="Foo" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Target Name="Foo">
        <ItemGroup>
            <Directories Include="$([System.IO.Directory]::GetDirectories('D:\foo', '*', System.IO.SearchOption.AllDirectories))" />
            <Directories>
                <Files>$([System.IO.Directory]::GetFiles("%(Directories.Identity)", "*", System.IO.SearchOption.AllDirectories).get_Length())</Files>
            </Directories>
        </ItemGroup>        
        <RemoveDir Directories="@(Directories)" Condition="%(Files)=='0'" />
    </Target>
</Project> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T14:13:50.997

使用`Exec`运行 PowerShell 的任务：

**微软构建**

```
<Project DefaultTargets="DefaultTarget" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <CleanPath>C:\MyDirAboveDir1</CleanPath>
    </PropertyGroup>

    <Target Name="DefaultTarget">
        <Exec Command="PowerShell .\RemoveDir.ps1 '$(CleanPath)'" />
    </Target>
</Project> 
```

**PowerShell** *删除目录.ps1*

```
Param ([string]$folderpath = $(throw "provide folderpath"))

$folders = Get-ChildItem $folderpath -recurse -force | ? {$_.PSIsContainer}

if ($folders -ne $null)
{
    [array]::Reverse($folders)

    foreach($folder in $folders)
    {
        Write-Host "Examining contents of $($folder.fullname)"
        $childitems = Get-Childitem $folder.fullname -recurse -force | ? { $_.PSIsContainer -eq $false }

        if($childitems -eq $null)
        {
            "Remove folder: " + $folder.FullName
            Remove-Item $folder.FullName -Recurse -Force
        }
        else
        {
            Write-host "Files found in $folder, skipping delete"
        }

        $childitems = $null
    }
}
else
{
    Write-Host "no sub folders found"
} 
```

* * *

*由[Guy Ellis Rocks 提供：用于删除空目录的 Powershell 脚本](http://guyellisrocks.com/powershell/powershell-script-to-remove-empty-directories/)*

# windows-phone-7 - 在 Windows Phone 7 中创建自定义键盘

> ID：11051456
> 
> 赞同：0
> 
> 时间：2012-06-15T13:20:26.857
> 
> 标签：windows-phone-7, windows-phone-7.1

在 windows phone7 中为我的应用程序创建自定义键盘的最佳方法是什么？如果我这样做，它会在 Market 中接受吗？以及如何禁用 Windows phone 7 默认键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:23:34.110

[当我编写 Slydr（滑动键盘应用程序） http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)时，我以此为起点

**如您所知，您无法更换系统键盘。**

# selenium - Selenium IDE - 我可以根据列内容选择一行来验证其他列吗？

> ID：11051457
> 
> 赞同：4
> 
> 时间：2012-06-15T13:20:28.013
> 
> 标签：selenium, selenium-ide

我正在使用 Selenium IDE 测试应用程序。有一个行排序不稳定的表 - 这意味着我需要验证的元素在每次测试运行时位于不同的行中。

我想使用已知在第一列中的文本来查找行；然后验证同一行中的其他列。

测试看起来像这样：

```
store        || //form/table                    || tableXpath
store        || 3                               || initialsRow
verifyTable  || ${tableXpath}.${initialsRow}.0  || Initials
verifyTable  || ${tableXpath}.${initialsRow}.1  || MJ
verifyTable  || ${tableXpath}.${initialsRow}.2  || MH 
```

而不是硬编码“initialsRow”值；不能动态找到行索引吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:20:29.120

我找到的解决方案是使用 Selenium 的`storeElementIndex`命令。它获取 HTML 元素相对于其父元素的索引。

见[http://release.seleniumhq.org/selenium-core/1.0.1/reference.html](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)

我将测试更改如下：

```
store             || //form/table                                 || tableXpath
storeElementIndex || ${tableXpath}//tr/td[text() = "Initials"]/.. || initialsRow
verifyTable       || ${tableXpath}.${initialsRow}.1               || MJ
verifyTable       || ${tableXpath}.${initialsRow}.2               || MH 
```

XPath 查询`//form/table//tr/td[text() = "Initials"]/..`在包含文本“Initials”的“td”元素上方找到“tr”元素。Selenium 存储此“tr”元素相对于其父元素的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T09:44:31.620

好吧，现在我发现，selenium 可以计算。不幸的是没有含蓄地喜欢`${tableXpath}.${initialsRow + 1}.1`。所以我添加了一个额外的命令：

```
storeEval || ${ORBInitialPort} + 1 || ORBInitialPortRow 
```

并用作`ORBInitialPortRow`索引`ORBInitialPort`。

# sql - 在 SQL select 中进行计算

> ID：11051461
> 
> 赞同：0
> 
> 时间：2012-06-15T13:20:35.733
> 
> 标签：sql, sql-server, select

我想使用 SELECT Query 合并表中的值。我的表有 5 列：名称、日期 [最多三个日期（连续营业日）]，以及每天的三个值。

我想要这样的输出：**strName，Date0 的 SUM(Value1 + Value2 - Value3)，Date1 的 SUM(Value1 + Value2 - Value3)，Date2 的 SUM(Value1 + Value2 - Value3)。**

输入：

```
strName myDate  Value1  Value2  Value3
X4  2012-06-14  26300   0   0
X4  2012-06-15  0   4000    0
X4  2012-06-18  0   5600    0
X9  2012-06-14  764 0   0
A3  2012-06-14  7850    0   0
B   2012-06-14  5500    0   0
C3  2012-06-14  269100  0   0
D3  2012-06-14  395100  0   0
D3  2012-06-15  0   0   500 
```

理想输出：

```
X4, 26300, 4000,5600
X9, 760, 0, 0
A3, 7850
...
D3, 395100, 0, -500 
```

我的桌子：

```
USE [MyTestBD]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[tbX](
[strName] [varchar](max) NOT NULL,
[Value1] [float] NOT NULL,
[myDate] [date] NOT NULL,
[Value2] [float] NOT NULL,
[Value3] [float] NOT NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'X4', 26300, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'X4', 0, CAST(0xCC350B00 AS Date), 4000, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'X4', 0, CAST(0xCF350B00 AS Date), 5600, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'X9', 764, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'A3', 7850, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'B', 5500, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'C3', 269100, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'D3', 395100, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'D3', 0, CAST(0xCC350B00 AS Date), 0, 500)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'D4', 400, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'D4', 0, CAST(0xCC350B00 AS Date), 400, 6600)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'E3', 361349, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'F6', 45500, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'F6', 0, CAST(0xCC350B00 AS Date), 11600, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'G4', 55979, CAST(0xCB350B00 AS Date), 0, 0)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'G4', 0, CAST(0xCC350B00 AS Date), 0, 19100)
INSERT [dbo].[tbX] ([strName], [Value1], [myDate], [Value2], [Value3]) VALUES (N'G4', 0, CAST(0xCF350B00 AS Date), 0, 38300) 
```

PS：我没有为我的问题找到一个好的标题。随意编辑它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:27:34.117

尝试这个：

```
SELECT
    strName,
    SUM(CASE rn WHEN 1 THEN Value1 + Value2 - Value3 END),
    SUM(CASE rn WHEN 2 THEN Value1 + Value2 - Value3 END),
    SUM(CASE rn WHEN 3 THEN Value1 + Value2 - Value3 END)
FROM
(
    SELECT *, ROW_NUMBER() OVER (PARTITION BY strName ORDER BY mydate) AS rn
    FROM tbX
) AS T1 
```

结果：

```
A3  7850        (null)  (null)
B   5500        (null)  (null)
C3  269100      (null)  (null)
D3  395100      -500    (null)
D4  400         -6200   (null)
E3  361349      (null)  (null)
F6  45500       11600   (null)
G4  55979       -19100  -38300
X4  26300       4000    5600
X9  764         (null)  (null) 
```

[sqlfiddle](http://sqlfiddle.com/#!3/c1cb4/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:28:02.677

您的数据与您的解释不太一致，所以我将改为您的解释。

我还将假设 SQL Server 2005 或更高版本。

```
WITH
  sequenced_data
AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY strName ORDER BY MyDate) AS sequence_id,
    *
  FROM
    tbX
)
SELECT
  strName,
  SUM(CASE WHEN sequence_id = 1 THEN value1 + value2 - value3 ELSE 0 END) AS v1,
  SUM(CASE WHEN sequence_id = 2 THEN value1 + value2 - value3 ELSE 0 END) AS v2,
  SUM(CASE WHEN sequence_id = 3 THEN value1 + value2 - value3 ELSE 0 END) AS v3
FROM
  sequenced_data
GROUP BY
  strName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:13:38.553

在您的测试数据中，您有 3 个日期，因此您可以编写 2 个案例。如果您打算增加日期的种类，则此动态枢轴可能很有用

```
declare @col varchar(1000)
declare @sql varchar(2000)

select @col = COALESCE(@col + ', ','') + QUOTENAME(myDate) from (select distinct myDate from tbX) t

select @col

set @sql = 'select strName, ' + @col + '
from ( SELECT [strName],myDate,sum(Value1+Value2-Value3) as suma FROM tbX group by [strName],myDate)p
PIVOT(sum(suma) FOR myDate IN ( ' + @col + ' )
) AS pvt'

print @sql

exec (@sql) 
```

# c++ - g++：使用 ZIP 文件作为输入

> ID：11051464
> 
> 赞同：9
> 
> 时间：2012-06-15T13:20:43.413
> 
> 标签：c++, boost, annotations, g++

我们身边有 Boost 库。它由大量永不更改的文件组成，并且只使用了一小部分。如果我们要更改版本，我们会交换整个 boost 目录。目前，我们的 SVN 中有 Boost 源文件，这使得结帐操作非常缓慢，尤其是在 Windows 上。

如果有一个符号/插件来处理 ZIP 文件中的 C++ 文件，那就太好了，例如：

```
// @ZIPFS ASSIGN 'boost' 'boost.zip/boost'
#include <boost/smart_ptr/shared_ptr.hpp> 
```

g++ 中是否支持编译器挂钩？是否有任何关于 ZIP 支持的努力？其他想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T07:37:29.733

我假设`make`在构建软件的过程中涉及到或类似的构建系统。我将 zip 文件放在存储库中，并在 Makefile 中添加一条规则以在实际构建开始之前将其提取。

例如，假设您的 zip 文件位于“external/boost.zip”的源代码树中，它应该被提取到“external/boost”，并且它的顶层包含一个文件“boost_version.h”。

```
# external/Makefile
unpack_boost: boost/boost_version.h

boost/boost_version.h: boost.zip
    unzip $< 
```

我不知道`unzip`调用的确切语法，请询问您的手册页。

然后在其他 Makefiles 中，您可以让您的源文件依赖于`unpack_boost`目标，以便在`make`编译源文件之前解压 Boost。

```
# src/Makefile (excerpt)
unpack_boost:
    make -C ../external unpack_boost

source_file.cpp: unpack_boost 
```

如果您使用的是 Makefile 生成器（或完全不同的构建系统），请查看这些程序的文档以了解如何创建类似于自定义目标的内容`unpack_boost`。例如，在 CMake 中，您可以使用[add_custom_command](http://cmake.org/cmake/help/v2.8.8/cmake.html#command:add_custom_command)指令。

*细则：*该`boost/boost_version.h`文件不是 Makefile 工作所必需的。您可以将`unzip`命令放入`unpack_boost`目标中，但目标实际上是虚假的，即：它将在每次构建期间执行。中间的文件（当然您需要用 zip 存档中实际存在的文件替换）确保`unzip`仅在必要时运行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T14:48:38.463

一年前，我和你处于同样的位置。我们将源代码保存在 SVN 中，更糟糕的是，将 boost 包含在与我们自己的代码相同的存储库（相同的分支）中。尝试在多个分支上工作是不可能的，因为签出一个新的工作副本需要一天的大部分时间。将 boost 移到单独的供应商存储库中有所帮助，但仍需要数小时才能签出。

我将团队切换到 git。为了让您了解它比 SVN 好多少，我刚刚创建了一个包含 boost 1.45.0 版本的存储库，然后通过网络克隆了它。（克隆复制所有存储库历史记录，在这种情况下是一次提交，并创建一个工作副本。）

那个克隆花了六分钟。

在前六秒内，存储库的压缩副本被复制到我的机器上。剩下的时间都花在了编写所有这些小文件上。

我衷心建议您尝试 git。学习曲线很陡峭，但我怀疑你会在克隆 boost 副本所需的时间内完成很多预编译器黑客攻击。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T08:43:41.330

我们公司也遇到过类似的问题。在构建环境中管理 boost 版本绝非易事。拥有 10 多个开发人员，他们都在自己的系统上进行编码，您将需要某种自动化。

首先，我认为在 SVN 或任何 SCM 系统中存储大型库的副本并不是一个好主意，这不是这些系统的设计目的，除非您打算自己修改 boost 中的代码。但是让我们假设你没有这样做。

这是我们现在的管理方法，在尝试了许多不同的方法之后，这对我们最有效。

对于我们使用的每个版本的 boost，我们将整个树（解压缩）放在文件服务器上，并添加额外的子目录，每个架构/编译器组合都有一个子目录，我们将编译的库放置在其中。我们在每个构建系统上保留这些树的副本，并在全局系统环境中添加变量，例如：

```
BOOST_1_48=C:\boost\1.48 # Windows environment var 
```

或者

```
BOOST_1_48=/usr/local/boost/1.48 # Linux environment var, e.g. in /etc/profile.d/boost.sh 
```

此目录包含 boost 树 (boost/*.hpp) 和添加的预编译库 (例如 lib/win/x64/msvc2010/libboost_system*.lib, ...)

所有构建配置（vs 解决方案，vs 属性文件，gnu makefiles，...）定义一个内部变量，导入环境变量，例如：

```
BOOSTROOT=$(BOOST_1_48) # e.g. in a Makefile, or an included Makefile 
```

并且进一步的构建规则都使用 BOOSTROOT 设置来定义包含路径和库搜索路径，例如

```
CXXFLAGS += -I$(BOOSTROOT)
LFLAGS   += -L$(BOOSTROOT)/lib/linux/x64/ubuntu/precise
LFLAGS   += -lboost_date_time 
```

保留 boost 的本地副本的原因是编译速度。它占用了相当多的磁盘空间，尤其是编译后的库，但是存储很便宜，而且开发人员会浪费大量时间编译代码。另外，这只需要复制一次。

使用全局环境变量的原因是构建配置可以从一个系统转移到另一个系统，因此可以安全地签入您的 SCM 系统。

为了使事情变得更顺畅，我们开发了一个小工具来负责复制和设置全局环境。使用 CLI，这甚至可以包含在构建过​​程中。

不同的工作环境意味着不同的规则和文化，但相信我，我们已经尝试了很多东西，最后，我们决定定义某种约定。也许我们的可以启发你...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T18:44:56.680

这是您在 g++ 中不会做的事情，因为任何其他想要这样做的应用程序也必须进行修改。

将文件存储在压缩文件系统上。然后每个应用程序都会自动受益。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T07:55:29.700

在操作系统中应该可以允许对 ZIP 文件中的文件进行透明访问。我知道我很久以前（2004 年左右）将它放在我自己的操作系统的设计中，但从来没有达到它可以使用的地步。缺点是在 ZIP 内的文件中向后搜索会因为压缩而变慢（并且您无法倒回压缩器状态，因此您必须从头开始搜索）。这也使得使用 zip-inside-a-zip 慢速倒带和阅读。幸运的是，大多数情况只是顺序读取文件。

它还应该可以对当前的操作系统进行改造，至少在客户端空间中是这样。您可以挂钩使用的文件系统访问函数（fopen、open、...）并添加一组虚拟文件描述符，您自己的软件将为给定文件名返回这些描述符。如果它是一个真实文件，只需传递它，如果它没有打开底层文件（可能再次通过这个函数）并传递一个虚拟句柄。访问文件内容时，直接从 zip 文件中读取，无需缓存。

在 Linux 上，您可以使用 LD_PRELOAD 将其注入现有软件（在使用时），在 Windows 上，您可以挂钩系统调用或将 DLL 注入软件空间以挂钩相同的功能。

有人知道这是否已经存在吗？我看不出有什么明确的理由不会...

# wpf - 需要基本混合 WPF 的帮助（起点）

> ID：11051465
> 
> 赞同：0
> 
> 时间：2012-06-15T13:20:54.677
> 
> 标签：wpf, winforms, visual-studio-2010, c#-4.0, expression-blend

我正在努力学习 WPF，就像我做的任何编程一样，我总是尝试为自己创造一些有趣的东西，这样项目就不会无聊。

所以我想要一个程序，开始时三个盒子一个接一个地消失。当单击一个框时，所有框都淡出，我创建的单独的 WPF 用户控件淡入。然后有一个按钮将其淡出并再次让三个框淡入。

现在我确实有visual studio 2010和blend 4。我可以在blend中创建一个像上面那样的动画，但问题是它从一个动画到下一个动画没有停止。而且我无法在 Visual Studio 中对事件或其他任何内容进行编程，因为 Visual Studio 中的 WPF 表单看起来是白色的（我在 blend 中所做的任何事情都没有显示，它只能在 blend 中查看）。

我正在寻找一些好的教程或链接来帮助我完成上述工作。我认为这并不难，我只需要朝着正确的方向迈出一步。我不是在这里寻找代码，因为我不希望有人为我做这件事，而我只是想要帮助。如果您有任何其他相关的提示要分享，请这样做。

所以谢谢你，我知道这是一篇不同的帖子，但感谢你提供的任何见解以及你分享的任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:46:33.003

您必须先走路才能跑步，在这种情况下，这意味着在尝试使用时间线、触发器和点击事件之前学习一些 xaml 的基础知识。我将从此处找到的 Lynda 视频（它们是免费的）开始：[http ://www.lynda.com/Expression-Blend-tutorials/getting-started-with/384-2.html](http://www.lynda.com/Expression-Blend-tutorials/getting-started-with/384-2.html)

# f# - 是否可以在 Mac 上用 F# + mono 编写 GUI 桌面应用程序，并在 Windows 上无需修改即可运行？

> ID：11051466
> 
> 赞同：6
> 
> 时间：2012-06-15T13:20:59.467
> 
> 标签：f#, mono

我有兴趣为 Windows 开发桌面应用程序，但如果我可以在我的 Mac OS X Air 笔记本电脑上开发这些应用程序，而不运行虚拟化环境，那将是最方便的。在 OS X 上使用 mono 和 F# 开发 Windows GUI 桌面应用程序能走多远？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:25:19.357

如果您的目标是 WPF - 不远。遗憾的是，即使在虚拟化 Windows 环境中，您也会遇到 WPF 问题，因为它使用 3D 加速。

坚持“传统”的 Windows 窗体是可行的，但它们并不是当今创建新应用程序的首选方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:09:19.420

您可以使用跨平台 UI 工具包。Monodevelop 使用[GTK#](http://www.mono-project.com/GtkSharp)，可能还有其他的。它可以在任何地方运行而无需修改，但在任何地方都会显得有些陌生。这就是您不必为每个平台制作不同的 UI 而做出的权衡。

[此处](http://www.tryfsharp.org/Resources/GetMono.aspx)详细介绍了使用 Monodevelop 的 F# 的说明。希望有了它，您应该一切顺利！

# php - json 不能与 ajax 一起使用，但直接使用时可以正常工作

> ID：11051467
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:21:05.500
> 
> 标签：php, ajax, json

我正在使用 json 来读取记录。如果我像这样在javascript中使用它，它工作得很好

```
var events=[{eventId:"1", event_name:"wedding"},{eventId:"2", event_name:"interview"}] 
```

然后循环读取记录

```
for(var events_count=0;events_count<events.length;events_count++)
{
//read records and works perfectly fine
} 
```

但是当我使用 ajax 做同样的事情时，它不起作用。我什至把文字

```
{eventId:"1", event_name:"wedding"},{eventId:"2", event_name:"interview"} 
```

在ajax调用（ajax-get-events.php）页面中，它不会进入循环

```
 var xmlhttp;
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        //got data in same format as above in xmlhttp.responseText and used eval to parse it

         events = eval('(' + xmlhttp.responseText + ')');

        //I have tried to alert(events) and it shows [object object]

           for(var events_count=0;events_count<events.length;events_count++)
            {
                //loop doesn't work at all

            }
       }
    }
    xmlhttp.open("GET","ajax-get-events.php",true);
    xmlhttp.send(); 
```

请告诉我我错过了什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:26:35.350

这不是解析为 JSON 数组，而是解析为一个对象（第二个）：

```
{eventId:"1", event_name:"wedding"},{eventId:"2", event_name:"interview"} 
```

但这应该被解析（读取 eval'd）为正确的数组：

```
[{"eventId":"1", "event_name":"wedding"},{"eventId":"2", "event_name":"interview"}] 
```

由于您使用的是 PHP，因此用于`json_encode`生成 JSON 输出，它将是正确的 JSON。

# tridion - 智能目标 - 部署服务器找不到触发器类型

> ID：11051470
> 
> 赞同：5
> 
> 时间：2012-06-15T13:21:12.393
> 
> 标签：tridion, smarttarget

我在内容交付日志中收到以下错误消息：

```
com.tridion.smarttarget.utils.AmbientDataHelper - can't find defined 
trigger-types in claim store (check if your smarttarget cartridge is up and running) 
```

我检查了我的 smarttarget_conf.xml 并确认 Web 服务已启动并正在运行。失败的（或通过浏览器返回 404）如下：

```
<Endpoint>http://servername:8180/fredhopper/config/trigger-types</Endpoint> 
```

但是在阅读了文档和论坛后，我的印象是这是正确的，并且 url 没有响应 GET 请求。

所以我假设一切都设置正确，在我的 smarttarget_conf.xml 中，我希望有人有一些指示让我看看解决这个问题。

提前致谢。

**解决方案**

这里的问题是我的 trigger-types.xml 文件在 FAS（Fredhopper 服务器）上没有正确形成。当杰里米在幕后发现我的问题时，我在下面给出了成功的答案。

谢谢杰里米 - 我希望任何阅读这篇文章的人都对你的答案投赞成票

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:25:18.857

我本地 SmartTarget 实例的端口是 8180，而不是 8080。也许这对你来说是一样的？

# google-apps-script - 创建重定向警告的脚本

> ID：11051480
> 
> 赞同：0
> 
> 时间：2012-06-15T13:21:49.103
> 
> 标签：google-apps-script, google-sites

我正在使用谷歌脚本在我的第一个网站上工作。我嵌入了一个脚本，它创建了一个 UI 并引用了一个 Google 电子表格来链接到同一站点的页面。每当单击链接时，我都会得到一个临时页面，上面写着：

> 上一页将您发送到 [https://sites.google.com/site/gchromeat/xxxx](https://sites.google.com/site/gchromeat/xxxx)。
> 
> 如果您不想访问该页面，您可以返回上一页。

有没有办法解决这个问题？

该行为可以在此处复制：[https ://sites.google.com/site/gchromeat/home/access](https://sites.google.com/site/gchromeat/home/access)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:58:00.980

没有办法解决这个问题，因为它似乎是一种设计行为。但是有一个关于此的[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1405)，您应该为它加注星标以跟踪更新并为它投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:44:34.800

我假设您在 Google Apps 脚本中使用了 Anchor 对象。您收到重定向消息的原因是锚对象更改了链接。浏览器检测重定向并要求用户确认（可以更改浏览器设置以避免这种情况）。

另请参阅[问题 1376](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1376) - 已打开该问题以消除一些不良副作用。

# forms - IE 表单重定向到操作

> ID：11051482
> 
> 赞同：0
> 
> 时间：2012-06-15T13:22:00.287
> 
> 标签：forms

我有以下简单的形式：

```
<form id="MyForm" action="../webformmailer.php" method="post" >
<input type="hidden" name="subject" value="Submission" />
<input type="hidden" name="redirect" value="../sandbox/123/thanks.html" />
<input type="text" size="20" name="FirstName" />
<input type="text" size="20" name="LastName" />
<input type="text" size="20" name="email" />
<select name="comment">
<option value="yes">Yes</option>
<option value="no">No</option>
</select>
<input type="submit" name="submit" value="submit"/>      
</form> 
```

在用户提交信息后，我将他们重定向到一个简单的“thanks.html”页面。这适用于除 IE 8 之外的所有浏览器，它将用户重定向到 webformmailer.php 或表单的操作。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:34:25.743

在您的操作脚本中，处理请求，然后重定向到Thanks.html：

```
header('Location: ../sandbox/123/thanks.html'); 
```

**更新：**由于您无法控制动作脚本，并且所有其他浏览器都工作异常 IE8，那么问题一定出在 IE8 向服务器发送数据的方式上。尝试设置`enctype="application/x-www-form-urlencoded"`，看看它是否有效。

# java - AppEngine Blob 上传速度极慢

> ID：11051486
> 
> 赞同：1
> 
> 时间：2012-06-15T13:22:08.547
> 
> 标签：java, performance, google-app-engine, upload, blobstore

我看到 AppEngine 出现一个奇怪的减速问题：我的应用程序中的 blob 上传请求需要 2.5-3.5 秒，即使 blob 很小（只有几百字节）。我的应用程序中的所有其他请求都在 100-300 毫秒内得到处理，如果我查看日志，来自 blob 上传的回调请求也不例外。因此，blob 上传服务器似乎需要 2-3 秒来接受上传、存储它并回拨我的应用程序。看起来很长，不是吗？

抢占先机：我知道 blobstore 中的 100 字节条目是一个愚蠢的想法，应该将其存储在常规数据存储中以减少开销，但随着时间的推移，blob 中的数据会增长，然后我将不得不将它们保留在 blobstore无论如何...

谢谢，

马库斯

PS：以防万一：我正在使用Java API ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:33:09.070

你的应用是主从还是 HRD？

上传 blob 时会发生很多步骤 - 包括一些数据存储写入。您应该预计发送到您的应用程序的正常 http get 需要更长的时间。

# objective-c - @synthesize bar = __bar 有两个前导下划线？

> ID：11051489
> 
> 赞同：1
> 
> 时间：2012-06-15T13:22:16.133
> 
> 标签：objective-c, syntax

我了解到，（至少在大多数情况下）以这种方式在 Objective-C 中合成属性是一种很好的编程风格：

```
@synthesite foo = _foo; 
```

今天我遇到了这条线

```
@synthesite managedObjectContext = __managedObjectContext; 
```

`AppDelegate.m`在Xcode 自动生成的文件中。

***一个**和**两个**前导下划线之间的主要区别是什么？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:24:32.893

没有区别。这只是个人喜好问题（就像在 ivar 中添加下划线一样；很多人不喜欢它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:28:16.430

尽管在某些语言中有时使用双下划线来表明该变量是“系统”变量而不是应用程序变量，但实际上并没有什么区别。这是一个从未在广泛使用中流行起来的约定。

# html - SVG + CSS3 错误，多个浏览器？

> ID：11051498
> 
> 赞同：0
> 
> 时间：2012-06-15T13:22:56.337
> 
> 标签：html, css, webkit, svg, gecko

看看这个：http: [//jsfiddle.net/5fLtb/3/](http://jsfiddle.net/5fLtb/3/)

当您在 webkit 浏览器（Chrome/Safari）中将鼠标悬停在它上面时，它似乎会出现故障并变成浅蓝色，然后变成正确的颜色。

在 Gecko 浏览器 (Firefox) 中，它根本不会淡入。

有人可以告诉我这是一个错误还是有解决方法/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:04:53.090

我认为当你真正需要做的就是改变它的颜色时，加载一个全新的 svg 图像有点傻。

对于这么小的东西，您可以使用内联 svg，例如[http://jsfiddle.net/zuWGy/1/](http://jsfiddle.net/zuWGy/1/)。

# mysql - 如何在mysql中获取经理的员工层次结构？

> ID：11051506
> 
> 赞同：3
> 
> 时间：2012-06-15T13:23:21.463
> 
> 标签：mysql, join

我有一张`employee`桌子，上面有以下数据。对于特定的经理，我想按照经理的层次结构获取所有员工的列表。

```
id  name    manager

1   John    6
2   Gill    7
3   Ben     2
4   Roy     8
5   Lenin   6
6   Nancy   7
7   Sam     0
8   Dolly   3 
```

例如，我必须让经理**Sam** (7) 手下的员工。如您所见，**Sam**没有任何经理，但他是员工**Gill**和**Nancy**的经理，他们分别是员工**Ben**和**John, Lenin**的经理。

所以我运行了这样的查询：

```
select * from employee where manager=7; 
```

我得到的结果为 2 行，**Gill**和**Nancy**。

但是现在，我还想在输出中显示员工**Ben**和**John**，**Lenin**，因为他们都在经理**Gill**和**Nancy**的领导下，他们在**Sam**的领导下。

如何构建查询以分层显示经理的员工？换句话说，我怎样才能显示经理**Sam领导下的所有****Gill**、**Nancy**、**Ben**、**John**和**Lenin**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:26:38.100

将 IN 子查询添加到 WHERE 子句将处理该问题。例如：

```
SELECT * FROM employee WHERE manager = 7 OR manager IN (SELECT id FROM employee WHERE manager = 7) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:43:42.373

为了获得更好的视觉效果，您还可以使用以下查询：

```
select e1.name, e2.name, e3.name 
from employee e1 
left join employee e2 on e1.id = e2.manager
left join employee e3 on e2.id = e3.manager
where e2.manager = 7 
```

而您必须`left join`为每个层次结构添加另一个。一方面这是一个缺点，另一方面它比肖恩的回答更容易处理。

在专业方面，您会得到如下输出：

```
name        name1       name2
---------------------------------
Sam         Gill        Ben     
Sam         Nancy       John    
Sam         Nancy       Lenin 
```

这对眼睛更友好，您可以通过 PHP 或其他方式轻松地将其以更眼睛友好的形式呈现。**

# c# - 如何使用 c# 读取 csv 或文本文件并逐行计算该文件的字符并显示是否小于 1500？

> ID：11051508
> 
> 赞同：1
> 
> 时间：2012-06-15T13:23:26.413
> 
> 标签：c#, c#-4.0

我想使用 c# 读取 csv 或文本文件并逐行计算该文件的字符数并在行尾显示哪个字符数小于 1500？我可以计算字符总数，但我不能逐行计算字符......这对 C# 专家来说可能是一个愚蠢的问题，但我刚开始用 C# 编码，我也很想知道什么是成为精通 c# 编码器的最佳方法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:35:30.230

我会使用 LINQ：

```
var shortLines = File.ReadLines("file.csv")
                     .Where(line => line.Length < 1500);

foreach (var line in shortLines)
{
    // Do whatever you need to
} 
```

请注意，这只会在您迭代时读取文件`shortLines`，并且会对其进行流式传输 - 但这*确实*意味着如果您迭代`shortLines`两次，它将读取两次。如果您需要多次迭代这些行，请调用`ToList`after `Where`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:29:26.690

```
string completeFile = File.ReadAllText("c:\temp\somefile.txt");

string[] arrayOfLines = completeFile.Split('\n');

foreach(string singleLine in arrayOfLines)
{
    //count
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:53:26.827

我把你的问题的意思是你想知道哪一行是文档的总字符数小于 1500：

```
 string[] lines = File.ReadAllLines("filename.txt");
        int count = 0;
        int line = 0;

        for (; line < lines.Length; line++)
        {
            count += lines[line].Length;
            if (count >= 1500)
            {
                // previous line is < 1500
                Console.WriteLine("Character count < 1500 on line {0}", line - 1);
                Console.WriteLine("Line {0}: {1}", line - 1, lines[line - 1]);
                break;
            }
        } 
```

# iphone - 将 UIView 添加为 UIActionSheet 上的子视图

> ID：11051512
> 
> 赞同：1
> 
> 时间：2012-06-15T13:23:36.563
> 
> 标签：iphone, objective-c, ios, uiactionsheet

我正在做一个项目，我想用三个按钮显示 UIActionsheet 更改、取消和完成，在标题的地方我想放置带有一些标签的 UIView。我创建了动态 UIView 并将其添加到操作表中，但它隐藏在按钮后面我尝试了所有可能的方法来设置框架，边界但我无法找到解决方案。我想将此 UIView 放在 UIActionsheet 的顶部，然后是按钮。如果您有任何疑问，请随时发表评论。

**这是我的代码：**

```
-(IBAction)tapbutton:(id)sender
{
Lablesubview *view = [[Lablesubview alloc]init];
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                               delegate:self 
                                      cancelButtonTitle:@"Cancel" 
                                 destructiveButtonTitle:@"Change" 
                                      otherButtonTitles:@"Done",nil];

   [actionSheet addSubview:view];
   [actionSheet showInView:self.view];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:41:53.190

您可以使用此方法，它将所有按钮向下移动 100 像素，请注意这种类型的修改可能会导致您的申请被拒绝

```
-(IBAction)tapbutton:(id)sender
{   
    //create the view
    Lablesubview *view = [[Lablesubview alloc]init];
    //Set the frame
    view.frame = CGRectMake(0, 10, 320, 100);
    view.backgroundColor = [UIColor greenColor];

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                             delegate:self 
                                                    cancelButtonTitle:@"Cancel" 
                                               destructiveButtonTitle:@"Change" 
                                                    otherButtonTitles:@"Done",nil];

    [actionSheet showInView:self.view];

    CGRect rect;

    //expand the action sheet
    rect = actionSheet.frame;
    rect.size.height +=100;
    rect.origin.y -= 100;
    actionSheet.frame = rect;

    //Displace all buttons
    for (UIView *vButton in actionSheet.subviews) {
        rect = vButton.frame;
        rect.origin.y += 100;
        vButton.frame = rect;
    }    

    //Add the new view
    [actionSheet addSubview:view];
} 
```

# fluent-nhibernate - FluentNHibernate 在使用 IComponentConvention 映射 (v1.3.0.727) 时将 ColumnName 加倍？

> ID：11051515
> 
> 赞同：3
> 
> 时间：2012-06-15T13:23:44.853
> 
> 标签：fluent-nhibernate

这适用于 v.717 (IComponentConvention) ：

```
 public void Apply(IComponentInstance instance)
    {
        if (instance.Type == typeof(EmailAddress))
        {
            instance.Properties.First(property => property.Name == "FullAddress")).Column(instance.Name);
        }
    } 
```

使用上述约定，我可以将数据库列的名称映射到组件属性的名称。但是在 v.727 中，hbm 突然看起来像这样：

```
<component name="DefaultMailAddressForAlerts" class="EmailAddress"> 
    <property name="FullAddress" type="System.String"> 
        <column name="DefaultMailAddressForAlertsDefaultMailAddressForAlerts"/>          
    </property> 
</component> 
```

使数据库中的列名成为组件属性的名称 x 2\. fluent nhibernate v727 中是否有创建组件约定的新方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:27:16.560

这看起来像一个错误。我在我们的 bugtracker 中提出了一个问题，请参阅[Fluent NHibernate #161](https://github.com/jagregory/fluent-nhibernate/issues/161)。

# c++ - 静态链接到库但仍需要 dll 才能运行的程序

> ID：11051516
> 
> 赞同：23
> 
> 时间：2012-06-15T13:23:51.130
> 
> 标签：c++, dll, linkage

在链接方面有些事情我不明白......我正在使用第 3 方库（GEOS 库）编写程序。该程序依赖于 geos.lib，但仍需要 geos.dll 才能运行。

我读[了这个问题](https://stackoverflow.com/questions/913691/dll-and-lib-files-what-and-why)，我想我理解静态库和动态库之间的区别。我不明白的是为什么我在静态链接库时仍然需要 dll。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-15T14:19:21.557

Windows 上有 3 种库：

*   对象库 (*.lib)
*   导入库 (*.lib)
*   动态库 (*.dll)

对象库是静态链接的。它们包含由库抽象的代码的完整对象定义。

导入库是对象库的一种特殊形式。它们不包含代码，而是包含最终将可执行文件映射到动态链接库的链接器的信息。

动态链接库，如对象库，为您的程序提供代码。但是，此代码是在运行时加载的，而不是编译到您的 exe 中。

您并不总是需要链接导入库。相反，您可以调用 LoadLibrary() 并按名称或序号查找 API 入口点。（您总是必须告诉代码您要输入哪个 DLL 以及该 DLL 的 API 中的哪个位置。）

这里的其他评论是正确的，因为如果不重新编译库的代码，就无法将 DLL 制作成静态库——它是一种不同的输出。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-15T13:25:11.260

它不是静态链接的。.lib 只是一个绑定在 Windows 上的 .dll 中的存根库。也就是说，您在编译时与 .lib 链接，然后在运行时它会去寻找 .dll。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-08T16:08:07.313

如果 .lib 是由 Visual Studio 创建的，则检查项目属性 -> 链接器 -> 输入 -> 模块定义文件的值。如果它不为空，那么即使项目属性 -> 常规 -> 配置类型为“静态库 (.lib)”，link.exe 也会创建存根库而不是静态库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:29:03.367

当且仅当这是一个静态 lib 文件时，您才能静态链接该 lib 文件。因此，首先您需要将您的 dll 项目转换为静态库，构建它，然后使用您构建的产品，这将是一个静态 .lib 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:26:22.680

您正在定义链接到动态库。仅仅因为链接器需要 .lib 文件并不意味着您要链接到静态库。

# c# - 如何使用 asp.net 使 Excel 工作表只读？

> ID：11051519
> 
> 赞同：0
> 
> 时间：2012-06-15T13:23:56.377
> 
> 标签：c#, excel, worksheet

我的任务是使用 asp.net 将 Excel 表生成为只读（即，列数据不应该是可编辑的）？我从数据库中获取数据，然后为该数据生成 excel 表，但它是可编辑的。我想让我的 excel 表不可编辑。我应该怎么做？任何人都可以请帮助我吗？

我写过这样的代码..

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:41:04.430

试着看看这个话题——[第一](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.readonly%28v=vs.80%29.aspx)和[第二](http://social.msdn.microsoft.com/Forums/en/vsto/thread/f89fe6b3-68c0-4a98-9522-953cc5befb34)。第二个甚至为细胞提供了解决方案。

# c# - C#中数组没有计数方法

> ID：11051523
> 
> 赞同：1
> 
> 时间：2012-06-15T13:24:20.120
> 
> 标签：c#, arrays, count

我在 DataSet 中的 DataTable 上使用 select 方法来返回 DataRows 数组。这很好用，但是在我的数组上我**没有**Count 方法？

我不明白为什么，我在另一个应用程序中使用了几乎完全相同的语句，而且我确实有 Count 方法。

我检查了两个应用程序中对 System.Data 的引用，它们是相同的。我还检查了类顶部的 using 语句，它们都设置相同。即使用 System.Data；

这是我的代码：

```
DataRow[] selectedRecords = myDataset.Tables["Records"].Select(); 
```

现在我正在尝试做：

```
selectedRecords.Count() 
```

但我没有计数方法！？！？！

我正在使用 C# 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:25:41.580

数组使用`Length`. 但是，如果您导入 Linq 命名空间，则有一个`Count()`扩展方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T13:25:37.220

使用 Array.Length，而不是计数。数组没有 Count 属性。如果您尝试专门使用 LINQ 的 Count() 方法，则应导入 System.Linq 命名空间

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T13:25:45.367

您正在寻找

```
selectedRecords.Length; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T13:26:06.837

1.  为了能够`.Count()`数组，你需要一个`using System.Linq;`生效
2.  或者你可以只使用`.Length`...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:45:14.063

虽然您可以`Length`像其他人解释的那样使用该属性，但数组也实现了`IList`接口，该接口又实现`ICollection`了定义`Count`属性的接口。但是，它是在数组中显式实现的，这意味着您只能通过接口访问它

```
public int GetCountOf(ICollection coll) {
    return coll.Count;
}

...

int cnt = GetCountOf(myArray); 
```

或者

```
int cnt = ((ICollection)myArray).Count; 
```

`Count`这里返回数组的长度，而不是数组中包含的项目的计数，即数组可以包含所有`null`条目。

# objective-c - 了解 Objective-C 中选择器的唯一性

> ID：11051528
> 
> 赞同：2
> 
> 时间：2012-06-15T13:24:30.727
> 
> 标签：objective-c, selector, objective-c-runtime

如Apple指南中所述，我在理解“选择器”的部分功能时遇到问题。我已经将我感到困惑的部分加粗：

> 在 Objective-C 中，选择器有两种含义。当它用于对象的源代码消息中时，它可以用来简单地引用方法的名称。**但是，它也指的是在编译源代码时替换名称的唯一标识符。**编译的选择器是 SEL 类型的。**所有具有相同名称的方法都具有相同的选择器。**您可以使用选择器来调用对象上的方法——这为在 Cocoa 中实现目标-动作设计模式提供了基础。
> 
> 方法和选择器 为了提高效率，在编译代码中不使用完整的 ASCII 名称作为方法选择器。相反，编译器将每个方法名称写入表中，然后将该名称与表示运行时方法的唯一标识符配对。**运行时系统确保每个标识符都是唯一的：没有两个选择器是相同的，并且所有具有相同名称的方法具有相同的选择器。**

谁能解释这些位？此外，如果不同的类有相同名称的方法，它们是否也会有相同的选择器？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T14:36:20.783

所有选择器都是唯一的——无论是在编译时，还是动态的，在运行时通过`sel_getUid()`或首选`sel_registerName()`（后者在很大程度上是首选，前者由于历史原因仍然存在）——**为了*速度***。

背景故事：要调用一个方法，运行时需要一个选择器来标识要调用的内容和将要调用的对象。这就是为什么 Objective-C 中的每个方法调用都有两个参数：显而易见的和众所周知`self`的和不可见的、隐含的参数`_cmd`。 `_cmd`是当前执行的方法的 SEL。也就是说，您可以将此代码粘贴到任何方法中，以查看当前执行方法的名称——选择器：

```
NSLog(@"%@", NSStringFromSelector(_cmd)); 
```

注意`_cmd`不是全局的*；*这确实是您方法的一个论据。见下文。

通过使选择器唯一化，所有基于选择器的操作都使用指针相等测试而不是字符串处理或任何指针取消引用来实现。

特别是，每次您进行方法调用时：

```
[someObject doSomething: toThis withOptions: flags]; // calls SEL doSomething:withOptions: 
```

编译器生成此代码（或非常密切相关的变体）：

```
objc_msgSend(someObject, @selector(doSomething:withOptions:), toThis, flags); 
```

首先要做的`objc_msgSend()`是检查是否`someObject`为 nil，如果是则短路（nil-eats-message）。接下来（忽略标记的指针）是在`someObject`s 类中查找选择器（`isa`实际上是指针），**找到实现**并调用它（使用尾调用优化）。

**找到实现**的东西必须很快，并且要让它真正快速，你希望找到方法实现的关键尽可能快和稳定。为此**，**您希望密钥可直接使用并且对流程全局唯一。

因此，选择器是唯一的。

它也恰好节省内存是一个非常好的好处，但是如果消息传递速度可以提高 2 倍（但不是 10 倍 2 倍 - 甚至 2 倍内存 2 倍速度 - 而速度是关键，内存使用也很关键，当然）。

如果您真的想深入了解其`objc_msgSend()`工作原理，我写了[一些指南](http://www.friday.com/bbum/2009/12/18/objc_msgsend-part-1-the-road-map/)。请注意，由于它是在标记指针、块作为实现和 ARC 被公开之前编写的，所以它有点过时了。我应该更新文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T13:35:27.610

是的。类确实共享选择器。

我可以从源代码中举一个例子`objc-sel.mm`，但是当你使用`sel_registerUid()`（在幕后使用`@selector()`）时，它会将输入字符串复制到一个内部缓冲区（如果该字符串之前没有注册过），所有未来的 SEL 都指向该缓冲区.

这样做是为了减少内存使用和更轻松的消息转发。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T13:31:59.030

> 但是，它也指的是在编译源代码时替换名称的唯一标识符……所有具有相同名称的方法都具有相同的选择器。

为此，我参考了一篇关于选择器的优秀[博文：](http://www.wooji-juice.com/blog/cocoa-1-selectors.html)

> 对于具有相同名称和参数的所有方法，选择器都是相同的——无论是哪些对象定义了它们，这些对象是否在类层次结构中相关，或者实际上彼此无关。在运行时，Objective-C 进入类并直接询问它，“你响应这个选择器吗？”，如果响应，则调用结果函数指针。
> 
> 运行时系统确保每个标识符都是唯一的：没有两个选择器是相同的，并且所有具有相同名称的方法具有相同的选择器。

以一种搞砸的方式，这是有道理的。如果方法 A 和方法 B 具有完全相同的名称和参数，将它们的选择器存储为一个查找并查询接收器而不是在运行时在两个基本相同名称的选择器之间进行决策不是更有效吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:39:54.453

看 SEL 类型，你不必定义这个选择器来自哪个类，你只需给它一个方法名，例如：

```
SEL animationSelector = @selector(addAnimation:forKey:); 
```

例如，您可以将其想象为街道名称。许多城市可以有相同的街道名称，但没有城市的街道名称毫无价值。选择器也是如此，您可以定义一个选择器而不添加它所在的对象。但是如果没有合适的类，它完全没有价值。

# c# - C# 快速获取屏幕截图或应用程序框架

> ID：11051530
> 
> 赞同：0
> 
> 时间：2012-06-15T13:24:33.110
> 
> 标签：c#, screenshot, frame

我需要快速从游戏中获取图像。我尝试使用这样的简单屏幕截图：

```
 Rectangle bounds = Screen.GetBounds(Point.Empty);
        using (Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height))
        {
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
            }
            bitmap.Save("Screen.bmp");
        } 
```

但我不知道为什么如果我得到屏幕截图，我可以在 10 秒后得到另一个……需要一种方法来拍摄更快的图像。拿游戏帧会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:44:33.457

我会考虑把它关掉。

将位图保存在内存和单独的线程中，因为项目进入您的位图堆栈，您可以一次将它们弹出一个并保存到磁盘。

这样您就可以继续拍摄任意数量的屏幕截图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T05:27:08.763

避开这条线

```
using(Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height)) 
```

在每次通话时保存屏幕截图。只需将它初始化一次作为全局变量，然后看看它的神奇之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T12:56:12.690

如果您想抓取多个屏幕截图，您可能需要考虑一个“frameCounter”并在每个周期中添加它。

# python - 如何通过 mpylayer 将视频嵌入到 QWidget 框架中？

> ID：11051534
> 
> 赞同：2
> 
> 时间：2012-06-15T13:24:39.047
> 
> 标签：python, pyqt4

是否可以`PyQt4`通过将视频嵌入[`mpylayer`](http://code.google.com/p/mpylayer/)到`QWidget`（或它的子类）中。如果是这样，您能否提供一个最小的工作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:28:57.600

有关嵌入 MPlayer 的 Qt Widget 的完整示例，请尝试[qmpwidget](http://qmpwidget.sourceforge.net/)。

但这里有一个最小的 PyQt 演示，可以帮助您入门：

```
import mpylayer
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.container = QtGui.QWidget(self)
        self.container.setStyleSheet('background: black')
        self.button = QtGui.QPushButton('Open', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.container)
        layout.addWidget(self.button)
        self.mplayer = mpylayer.MPlayerControl(
            'mplayer', ['-wid', str(self.container.winId())])

    def handleButton(self):
        path = QtGui.QFileDialog.getOpenFileName()
        if not path.isEmpty():
            self.mplayer.loadfile(unicode(path))

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.resize(640, 480)
    window.show()
    sys.exit(app.exec_()) 
```

（**注意**：这个演示只在 Linux 上测试过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:54:48.670

您必须获取小部件的句柄（id）→ [http://qt-project.org/doc/qt-4.8/qwidget.html#winId](http://qt-project.org/doc/qt-4.8/qwidget.html#winId) 并将其传递给`-wid`MPlayer 的选项。

我无法为您提供 Qt 的示例，只是因为我不了解 Qt，但我已经为 wxPython 编写了 MplayerCtrl：[https ://bitbucket.org/dav1d/mplayerctrl](https://bitbucket.org/dav1d/mplayerctrl)

相关代码：[https ://bitbucket.org/dav1d/mplayerctrl/src/c680a1d99ad2/MplayerCtrl.py#cl-873](https://bitbucket.org/dav1d/mplayerctrl/src/c680a1d99ad2/MplayerCtrl.py#cl-873)

# google-analytics - Mandrill API 错误报告错误格式

> ID：11051537
> 
> 赞同：2
> 
> 时间：2012-06-15T13:24:52.440
> 
> 标签：google-analytics, mailchimp

如文档中所述，我必须为 google_analytics_domains 和 google_analytics_campaign 字段发送数组。

[http://mandrillapp.com/api/docs/messages.html#method=send](http://mandrillapp.com/api/docs/messages.html#method=send)

但是 mandrill 会生成一个带有错误 utm_campaign 的链接（Google 分析不喜欢 [0] 部分）：

```
utm_campaign[0]=test_campaign 
```

我试图发送字符串而不是数组，但是 mandralapi 把我踢了出去（请输入一个数组）......我错过了什么吗？谢谢你的帮助 ！

这是 mandrillapp 的请求示例：

```
{
   "key":"apikey",
   "message":{
      "html":"example html",
      "text":"example text",
      "subject":"example subject",
      "from_email":"from_email@example.com",
      "from_name":"example from_name",
      "to":[
         {
            "email":"email@example.com",
            "name":"example name"
         }
      ],
      "headers":{
         "...":"..."
      },
      "track_opens":true,
      "track_clicks":true,
      "auto_text":true,
      "url_strip_qs":true,
      "bcc_address":"bcc_address@example.com",
      "merge":true,
      "global_merge_vars":[
         {
            "name":"example name",
            "content":"example content"
         }
      ],
      "merge_vars":[
         {
            "rcpt":"rcpt@example.com",
            "vars":[
               {
                  "name":"example name",
                  "content":"example content"
               }
            ]
         }
      ],
      "tags":[
         "example tags[]"
      ],
      "google_analytics_domains":[
         "..."
      ],
      "google_analytics_campaign":[
         "..."
      ],
      "metadata":[
         "..."
      ],
      "attachments":[
         {
            "type":"example type",
            "name":"example name",
            "content":"example content"
         }
      ]
   }
} 
```

# c++ - 关于异常规范和应用程序设计的问题

> ID：11051540
> 
> 赞同：2
> 
> 时间：2012-06-15T13:25:11.233
> 
> 标签：c++, design-patterns, exception, exception-handling, try-catch

尽管该主题已在 SO 上进行了广泛讨论，但考虑到以下事实，我想澄清一些我仍然不清楚的事情：

1.  10 年前，Herb Sutter 告诉我们[不要使用此功能](http://www.gotw.ca/publications/mill22.htm)。

2.  指定函数/方法可能抛出的可能异常不会迫使编译器在您决定更改函数的主体并抛出新类型的异常时对您大喊大叫，从而错误地忘记更改函数声明中的异常规范。

3.  如果你有一个非常高级的函数调用其他几个高级函数，每个函数都运行大量代码来产生结果，那么我可以想象地狱噩梦的维护，当我必须指定第一个函数的所有错误时可能会抛出，并且这个列表必须包括内部函数可能抛出的所有异常等等，从而在高级和低级函数之间产生紧密耦合，这是非常不可取的。另一方面，我们从 std::runtime_error 派生所有异常，[我们知道这是一个好习惯](https://stackoverflow.com/a/1158134/1174378)我们可以指定高级函数只抛出 std::runtime_error 并完成它。但是等一下……我们实际上在哪里捕获异常？当高级函数应该只抛出 std::runtime_error 时，将对这些高级函数之一的调用包含在 try / catch 块中会不会很奇怪/讨厌/不好，该块会捕获 MyVerySpecific 异常？ ? 在较低级别的函数中捕获特定异常是否有好处，这些函数无法对它们做任何事情，而是将它们传递到更通用的容器中，并附加更多信息？我当然不想在我编写的每个函数中都编写 try / catch 块，只是为了格式化异常。这就像要求每个函数都验证它的参数，这会让人发疯，

问题：

1.  Herb Sutter 关于异常规范的咆哮今天仍然成立吗？从那以后有什么改变吗？我最感兴趣的是 pre-C++0x 标准。如果是，我想我们可以考虑关闭这个话题。

2.  由于编译器似乎大多忽略了这些异常规范，并且在捕获异常时，在 99% 的情况下，人们会使用`catch (const CustomException &ex)`，如何指定函数抛出 CustomException？`throw(CustomExecption)`或`throw (CustomException &)`或`throw (const CustomException &)`? 我已经看到了所有的变化，虽然我会选择第一个，但其他的有什么意义/增加任何好处吗？

3.  人们将如何实际使用此功能，同时避免上述第三个事实中说明的谬误？

4.  **编辑：**假设我们正在建立一个图书馆。如果我们不使用异常规范，它的用户将如何知道预期的异常？他们肯定不会看到 API 方法会在内部调用哪些函数……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:26:34.867

> 1/ Herb Sutter 关于异常规范的咆哮今天仍然成立吗？从那以后有什么改变吗？我最感兴趣的是 pre-C++0x 标准。如果是，我想我们可以考虑关闭这个话题。

是的，他们仍然坚持。

例外规范是：

*   中途实现（例如，函数指针未指定异常）
*   在编译时未检查，但在运行时导致终止！

一般来说，我会反对异常规范，因为它会导致实现细节的泄漏。查看 Java 异常的状态...

特别是在 C++ 中？异常规范就像是在踢自己的脚，因为文档中最微小的错误可能会导致`std::terminate`调用。请注意，几乎所有函数都可能抛出例如 a`std::bad_alloc`或 a `std::out_of_range`。

*注意：由于 C++11`throw()`已被弃用，现在使用 C++17 它已不复存在；相反，从 C++17 开始，`noexcept(false)`可以使用说明符。它在函数指针中得到更好的支持，但仍会导致运行时终止，而不是编译时出错。*

* * *

> 2/ 由于编译器似乎大多忽略了这些异常规范，并且在捕获异常时，在 99% 的情况下，人们会使用 catch (const CustomException &ex)，那么如何指定函数抛出 CustomException？throw(CustomExecption) 还是 throw (CustomException &) 还是 throw (const CustomException &)？我已经看到了所有的变化，虽然我会选择第一个，但其他的有什么意义/增加任何好处吗？

编译器不会忽略异常规范，它会设置非常警惕的看门狗（哪些轴）以确保在您错过某些内容时终止您的程序。

* * *

> 3/ 如何实际使用此功能，同时避免上述第三个事实中说明的谬误？

如果它保持非正式，您的客户会很感激，所以最好的例子是：

```
void func(); // throw CustomException 
```

这使您可以专注于也很重要的异常，并让“不重要”的异常溜走。如果消费者想要它们全部？`catch(std::exception const& e)`作品。

* * *

> 4/ 编辑：假设我们正在建立一个图书馆。如果我们不使用异常规范，它的用户将如何知道预期的异常？他们肯定不会看到 API 方法会在内部调用哪些函数……

他们必须吗？

记录重要的事情，`std::exception`或`...`处理意外情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:06:20.567

> 1.  Herb Sutter 关于异常规范的咆哮今天仍然成立吗？从那以后有什么改变吗？

我不会称之为咆哮。他只是指出了与异常规范相关的问题。

是的，它仍然成立。如文中所述，如果抛出未指定的异常，程序将终止，这对于 99% 的应用程序来说是不可接受的。

> 1.  如何指定一个函数抛出 CustomException？

```
class A
{
 //...
   void foo() throws( CustomException );
}; 
```

> 1.  人们将如何实际使用此功能，同时避免上述第三个事实中说明的谬误？

通过查看函数声明，用户知道可以抛出哪些异常。问题是当需要抛出新异常时，所有函数声明都需要更改。

> 1.  假设我们正在构建一个库。如果我们不使用异常规范，它的用户将如何知道预期的异常？

通过阅读文档。

# java - NoSuchMethodError

> ID：11051542
> 
> 赞同：2
> 
> 时间：2012-06-15T13:25:11.370
> 
> 标签：java, spring, jetty, drools, janino

我在网上发现了类似的问题，但发布的解决方案似乎都不起作用。

我试图在 jetty 下运行我的 web 应用程序，而不是总是在 tomcat 中构建和运行来测试，因为我们的构建需要 18 分钟。:(

这是一个 drools 项目，我在 Eclipse Indigo SR2 下运行。我正在尝试在 Jetty 6.1.26 和 Spring Framework 2.5.6 下运行。

[我在https://community.jboss.org/wiki/RulesTomcat](https://community.jboss.org/wiki/RulesTomcat)的 vm args 部分中使用以下系统参数创建了调试配置：

-Djava.naming.factory.initial=org.mortbay.naming.InitialContextFactory -Ddrools.compiler=JANINO

这是我遇到的许多类似错误之一：

```
2012-06-15 09:19:16.579:WARN::Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'strategyFactory' defined in ServletContext resource [/WEB-INF/conf/spring/beans.xml]: Cannot resolve reference to bean 'court' while setting bean property 'court'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'court' defined in ServletContext resource [/WEB-INF/conf/spring/beans.xml]: Cannot resolve reference to bean 'instanceConfig' while setting bean property 'config'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'instanceConfig' defined in ServletContext resource [/WEB-INF/conf/spring/beans.xml]: Cannot resolve reference to bean 'workflowManager' while setting bean property 'workflowMgr'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'workflowManager' defined in ServletContext resource [/WEB-INF/conf/spring/workflow.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.eclipse.jdt.internal.compiler.CompilationResult.getProblems()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem;:
java.lang.NoSuchMethodError: org.eclipse.jdt.internal.compiler.CompilationResult.getProblems()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem;
    at org.drools.commons.jci.compilers.EclipseJavaCompiler$3.acceptResult(EclipseJavaCompiler.java:321)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:335)
    at org.drools.commons.jci.compilers.EclipseJavaCompiler.compile(EclipseJavaCompiler.java:351)
    at org.drools.commons.jci.compilers.AbstractJavaCompiler.compile(AbstractJavaCompiler.java:51)
    at org.drools.rule.builder.dialect.java.JavaDialect.compileAll(JavaDialect.java:389)
    at org.drools.compiler.DialectCompiletimeRegistry.compileAll(DialectCompiletimeRegistry.java:56)
    at org.drools.compiler.PackageRegistry.compileAll(PackageRegistry.java:74)
    at org.drools.compiler.PackageBuilder.compileAll(PackageBuilder.java:677)
    at org.drools.compiler.PackageBuilder.addPackage(PackageBuilder.java:640)
    at org.drools.compiler.PackageBuilder.addPackageFromDrl(PackageBuilder.java:254)
    at com.acs.gs.io.DroolsUtil.getRuleBaseFromDrl(DroolsUtil.java:116)
    at com.acs.gs.io.DroolsUtil.getRuleBaseFromSpreadSheet(DroolsUtil.java:104)
    at com.acs.gs.io.DroolsUtil.getRuleBase(DroolsUtil.java:89)
    at com.acs.gs.juror.workflow.RulesBasedWorkflowManager.init(RulesBasedWorkflowManager.java:90)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1412)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1373)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1333)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:471)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1244)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1008)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:470)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1244)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1008)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:470)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:269)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:104)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1244)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1008)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:470)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:549)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1282)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at runjettyrun.Bootstrap.main(Bootstrap.java:97) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:29:50.010

问题是您正在使用不兼容的库组合。

org.drools.commons.jci.compilers.EclipseJavaCompiler 类正在尝试使用`org.eclipse.jdt.internal.compiler.CompilationResult.getProblems()[Lorg/eclipse/jdt/core/compiler/CategorizedProblem`，但您正在使用的 Eclsipe 库中不存在该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T09:09:31.070

我有一个类似的问题。我收到错误为 NoSuchMethodError: java.lang.NoSuchMethodError: org.apache.poi.ss.usermodel.Workbook.close()V

删除 apache poi jar 后，问题得到解决。

# operators - $ini =& eZINI::instance();

> ID：11051547
> 
> 赞同：0
> 
> 时间：2012-06-15T13:25:19.963
> 
> 标签：operators

我刚刚在 eZ 框架中的几个文件中遇到了这个问题：

```
$ini =& eZINI::instance(); 
```

=& 到底是做什么的。我以前没见过。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T15:53:00.700

我意识到这个线程很旧，但我在搜索 eZINI 类的参考资料时偶然发现了它，所以我不妨回答你的问题。

`$a =& $b`分配`$b`对 的引用`$a`。这实质上意味着`$a`并且`$b`将是同一内存位置的别名。因此，操纵`$a`也会操纵`$b`，反之亦然。

# jquery - 这个jQuery代码可以重构吗

> ID：11051548
> 
> 赞同：0
> 
> 时间：2012-06-15T13:25:21.223
> 
> 标签：jquery, refactoring, readability, code-readability

我正在努力提高我的 jQuery 技能，并且我有这段代码。它的基本目的是调整背景的大小和调整大小以使其与响应式滑块保持相同的高度，从而匹配窗口的大小；并跟踪它是否由用户调整大小。

是否可以更好地重构它，或者它是否良好。

```
$(window).load(function() {
var height = $('#display-area').css('height');
$('.skin-background')
    .css('display', 'block')
    .css('height', height);
});
$(window).resize(function() {
var height = $('#display-area').css('height');
$('.skin-background')
    .css('height', height);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:31:43.533

```
// Cache elements that get used more than once
var $background = $('.skin-background');
var $displayArea = $('#display-area');

// Don't repeat yourself, put recurring actions in functions
var resizeBackground = function() {
    $background.css({
        'display': 'block',
        'height': $displayArea.height() + 'px'
    });
};

$(window).load(resizeBackground).resize(resizeBackground); 
```

您还应该考虑“[限制](http://underscorejs.org/#throttle)”调整大小事件的事件处理程序，因为某些浏览器在调整窗口大小时会触发*很多事件处理程序。*使用 underscore.js，这将是：

```
$(window).load(resizeBackground).resize( _.throttle(resizeBackground, 100) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:30:32.663

您可以使用单个选择器来添加两个事件，并且可以像这样设置多个 css 属性

```
$(window).load(function() {
var height = $('#display-area').css('height');
$('.skin-background')
    .css('display' : 'block','height', height);

}).resize(function() {
var height = $('#display-area').css('height');
$('.skin-background')
    .css('height', height);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:27:59.280

```
$(window).on("load resize",function() {
var height = $('#display-area').height();
$('.skin-background')
    .css({'display':'block','height':height});
}); 
```

# android - LinkedIn ID 为 android 变空

> ID：11051551
> 
> 赞同：6
> 
> 时间：2012-06-15T13:25:32.693
> 
> 标签：android, linkedin

我正在使用以下代码片段来获取 userdetail，但从**profile.getId()获取 Id null**

```
@Override
    protected void onNewIntent(Intent intent) {
        String verifier = intent.getData().getQueryParameter("oauth_verifier");

        LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(
                liToken, verifier);
        client = factory.createLinkedInApiClient(accessToken);
        client.postNetworkUpdate("LinkedIn Android app test");
        Person profile = client.getProfileForCurrentUser();

        System.out.println("PersonID : " + profile.getId());
        System.out.println("Name : " + profile.getFirstName() + " "
                + profile.getLastName());
    } 
```

请给我任何建议来获得它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T06:07:27.787

我已经找到了解决方案，我使用了以下代码片段来为用户获取更多详细信息，现在它可以正确提供所有内容，

```
Person profile = client.getProfileForCurrentUser(EnumSet.of(
                ProfileField.ID, ProfileField.FIRST_NAME,
                ProfileField.LAST_NAME, ProfileField.HEADLINE,
                ProfileField.INDUSTRY, ProfileField.PICTURE_URL,
                ProfileField.DATE_OF_BIRTH, ProfileField.LOCATION_NAME,
                ProfileField.MAIN_ADDRESS, ProfileField.LOCATION_COUNTRY));
        System.out.println("PersonID : " + profile.getId());
        System.out.println("Name : " + profile.getFirstName() + " "
                + profile.getLastName());
        System.out.println("Headline : " + profile.getHeadline());
        System.out.println("Industry : " + profile.getIndustry());
        System.out.println("Picture : " + profile.getPictureUrl());
        DateOfBirth dateOfBirth = profile.getDateOfBirth();
        System.out.println("DateOfBirth : " + dateOfBirth.getDay() + "/"
                + dateOfBirth.getMonth() + "/" + dateOfBirth.getYear());
        System.out.println("MAin Address : " + profile.getMainAddress());
        Location location = profile.getLocation();
        System.out.println("Location:" + location.getName() + " - "
                + location.getCountry().getCode()); 
```

# .net - 选择重复组的正则表达式

> ID：11051558
> 
> 赞同：7
> 
> 时间：2012-06-15T13:26:02.073
> 
> 标签：.net, regex

我有一系列遵循特定格式的分组值，并希望使用单个表达式将它们捕获到组中。例如，我已经`-group1 -group2 -group3`并且正在尝试使用类似于`(-[\s\S]{1,}?)` This is基本上允许我将整个字符串捕获到一个组中的东西，但我希望能够分别反向引用每个值。我认为这`?`会迫使它成为非贪婪的，因此将模式匹配分成三个单独的组（例如）。现在我只是重复引用`(-[\s\S]*?)`，但似乎应该有一个更优雅的表达方式。
谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T13:51:14.673

你很幸运，因为 C# 是少数支持子表达式捕获的语言之一（如果不是唯一的话）

[https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture(v=vs.110)](https://msdn.microsoft.com/en-us/library/system.text.regularexpressions.capture(v=vs.110))

.NET API 可以看如下

```
 Matches
     Groups (most regex engines stop here)
         Captures (unique for .NET) 
```

从你的问题中不清楚你想要完全匹配什么，但这应该让你开始。再次询问您是否被卡住。

```
 string input = "-group1 -group2 ";
  string pattern = @"(-\S*\W){2}";
  foreach (Match match in Regex.Matches(input, pattern))
  {
     Console.WriteLine("Match: {0}", match.Value);
     for (int groupCtr = 0; groupCtr < match.Groups.Count; groupCtr++)
     {
        Group group = match.Groups[groupCtr];
        Console.WriteLine("   Group {0}: {1}", groupCtr, group.Value);
        for (int captureCtr = 0; captureCtr < group.Captures.Count; captureCtr++)
           Console.WriteLine("      Capture {0}: {1}", captureCtr, 
                             group.Captures[captureCtr].Value);
     }                      
  } 
```

这输出

```
Match: -group1 -group2 
   Group 0: -group1 -group2 
      Capture 0: -group1 -group2 
   Group 1: -group2 
      Capture 0: -group1 
      Capture 1: -group2 
```

如您所见， (Group 1, Capture 0) 和 (Group 1, Capture 1) 提供组的单个捕获（而不是大多数语言中的最后一个）

这个地址我认为你描述为“能够分别反向引用每个值”

（您使用术语反向引用，但我认为您的目标不是替换模式吗？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:35:58.183

使用 .NET 正则表达式（几乎只有 .NET），您可以使用：

```
(?:(-\S+)\s*)+ 
```

组 1 将包含所有匹配子字符串的列表。

或者，`Matches`在您的情况下，仅使用就足够了：

```
var re = new Regex(@"-\S+");
var matches = re.Matches(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:32:07.053

试试这个：

```
(-.+?)(\s|$) 
```

您的第一个捕获组将拥有您想要的（`-group1`、`-group2`等）。

如果您想更好地控制 之后允许的内容`-`，请更改`.+?`为，例如，`[a-zA-Z0-9]+?`仅匹配字母数字字符。

# c - 获取c信息的好方法是什么？

> ID：11051563
> 
> 赞同：3
> 
> 时间：2012-06-15T13:26:12.790
> 
> 标签：c, reference

这个问题的意思不同于其他编程语言，我可以简单地用谷歌搜索“实现可比较的接口java”或“图形绘制python”这个短语，每当我用谷歌搜索一个C问题时，似乎大部分结果都是关于C#或 C++

我试过改用 ANSI C 或 C99 来代替，但这并不太成功。我在大学时借给我的朋友我的 K&R C 圣经，是否有任何网站可以提供明确的 c 资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T13:28:48.340

[http://www.cprogramming.com/](http://www.cprogramming.com/)

此外，K & RC 书也有 pdf 格式 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:29:43.863

对我来说似乎很管用的是把我正在寻找的东西放在“in c programming”之后

因此，如果我想了解有关在 ci 中使用结构的信息，请将“结构在 c 编程中”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:31:07.000

我有一本很好的 C 参考书，叫做 C Programming FAQ。我找到了一个[类似的网站](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi)，可以帮助解决大多数常见问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:32:10.167

一旦你很好地掌握了 OO 的工作原理，你就可以轻松地将算法和模式转移到 C 语言中。

此外，目前最好的 C 参考恕我直言是 StackOverflow.com。

# android - IntentService 和 CursorLoader 同步问题

> ID：11051566
> 
> 赞同：3
> 
> 时间：2012-06-15T13:26:23.740
> 
> 标签：android, android-intent, android-contentprovider, android-cursorloader

我正在构建一个遵循[IOSched](http://code.google.com/p/iosched/)检索数据方式的应用程序，除了我认为我会使用`CursorLoader`而不是`ContentObserver`：

我也一直在参考 Reto 的[android-protips-location](http://code.google.com/p/android-protips-location/)它确实使用`CursorLoader`并且逻辑流程与 IOSched 非常相似，因此：

`initLoader → startService (serviceIntent) → handleIntent → insert into DB → notifyChange → onLoadFinished → update UI`

我期望看到的是在数据库上执行一次后`CursorLoader`返回 a 。`Cursor``insert`

目前，片段`onActivityCreated`调用`initLoader`并运行查询`ContentProvider`this 返回该`Cursor`时间点的当前数据。但是，当我执行刷新时似乎`onLoadFinished`没有被触发。日志显示`delete`并`insert`在`ContentProvider`执行时执行，但查看日志显示`notifyChange`在插入时调度。

```
// in my Fragment:

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getLoaderManager().initLoader(0, null, this);
    refreshWelcome();
}

public void refreshWelcome() {
    Intent i = new Intent(getActivity(), SyncService.class);
    i.setAction(SyncService.GET_WELCOME);
    getActivity().startService(i);
}

public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    Uri queryUri = AppContract.Welcome.CONTENT_URI;
    String[] projection = new String[] { Welcome.WELCOME_FIRST_NAME };
    String where = null;
    String[] whereArgs = null;
    String sortOrder = null;
    // create new cursor loader
    CursorLoader loader = new CursorLoader(getActivity(), queryUri, projection, where, whereArgs, sortOrder);
    return loader;
}

//in AppProvider (which extends ContentProvider)

@Override
public Uri insert(Uri uri, ContentValues values) {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    final int match = sUriMatcher.match(uri);
    switch (match) {
    case WELCOME: {
          long rowId = db.insertOrThrow(Tables.WELCOME, null, values);
          if (rowId > 0) {
             getContext().getContentResolver().notifyChange(uri, null);
             return uri;
          }
       }
    }
   return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T21:06:53.477

据我所知，您在 onLoadFinished 中收到光标；onCreateLoader 返回一个 Loader<Cursor>。

我这样做是在收到光标后立即为光标设置通知 Uri。这对我来说可以。

```
@Override
public void onLoadFinished(Loader<Cursor>loader, Cursor data) {
    Log.v(DEBUG_TAG, "onLoadFinished");
    data.setNotificationUri(getActivity().getContentResolver(),yourURI);
    ((SimpleCursorAdapter) getListAdapter()).swapCursor(data);
    if (data.getCount() == 0) {
        Toast.makeText(getActivity(), "no elements",Toast.LENGTH_SHORT).show();
    return;
    }
<} 
```

# c# - 访问另一个类库中的方法，如何？

> ID：11051572
> 
> 赞同：0
> 
> 时间：2012-06-15T13:26:36.753
> 
> 标签：c#

我有一个简单的问题：

如何从我的类访问另一个类库中的类及其方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:28:44.893

您需要添加对库的引用。然后你应该可以使用

```
MyLibrary.MyClass.MyMethod(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:33:32.070

假设您在名称空间 MyNamespace 中对库的公共类进行了静态数学运算，那么

```
MyNamespace.MyPublicClass.MyStaticMethod(); 
```

如果您有带有公共方法的课程，那么您可以访问它

```
new MyNamespace.MyPublicClass().MyStaticMethod(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:29:22.210

您需要将库添加到您的班级。

然后你应该能够调用这些方法。

因此，例如在你的班级顶部，你会写：

```
 using mylibrary.library; 
```

然后，您应该可以像访问其他方法一样访问您的方法。

# javascript - jquery文档功能问题

> ID：11051575
> 
> 赞同：0
> 
> 时间：2012-06-15T13:26:42.583
> 
> 标签：javascript, jquery, html

我有这样的html代码：

```
<ul class="myClass">
    <li><a href="url1.html">first link</a></li>
    <li><a href="url2.html">second link</a></li>
    <li><a href="url2.html">third link</a></li>
    <li><a href="url3.html">fourth link</a></li>
</ul> 
```

这个想法是，当我按下链接时，它应该写入按下的链接下一个属性字符串：class="active"。例如，如果我们有

```
<li><a href="url1.html">first link</a></li>` 
```

我按下它，jQuery 函数应该将其更改为：

```
<li><a class="active" href="url1.html">first link</a></li> 
```

但是我的 jQuery 函数并没有真正起作用。如果您能帮助我，我将不胜感激。这是jQuery函数的来源：

```
$(document).ready(function(){
   var currentUrl = document.location.pathname;
   $('#myClass').each(function() {
       if ( currentUrl == $(this).children('a').attr('href')) {
           $(this).children('a').addClass('active');
       }
   });
}); 
```

更新我放了日志`console.log(currentUrl +"=="+ $(this).children('a').attr('href'));` ，它说状态是未定义的。我认为“if”条件没有被执行，因为，我把和 else 条件放在了`alert`那里，所以任何紧迫的呼叫警报和`if`条件都不会被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:28:05.760

`#myClass`是一个**id**选择器，而不是一个类选择器。你要`.myClass`

`children()`只会选择`li`没有`href`属性且不匹配的子元素（元素） `a`。

您希望`#myClass`如此`.myClass > li`循环列表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:34:20.273

您要实现的目标可以简短地写成这样：

```
$(document).ready(function(){        
     var curl = document.location.pathname;  //current url
     curl = curl.substr( curl.lastIndexOf('/')+1 );
     $('.myClass a[href="'+curl+'"]').addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T13:35:17.433

使用[jQuery 点击事件](http://api.jquery.com/click/)

```
$(document).ready(function(){
     $('.myClass a').click(function() {
         $(this).addClass('active');
     });
}); 
```

这个答案解决了你的问题：

“这个想法是，当我按下链接时，它应该将下一个属性字符串写入按下的链接：class="active"。例如，如果我们有

```
<li><a href="url1.html">first link</a></li>` 
```

我按下它，jquery 函数应该将其更改为：

```
<li><a class="active" href="url1.html">first link</a></li> 
```

"

我猜你有一个不同的问题，但你的问题并不清楚。

# c# - 我可以阻止 .net 4.0 对单引号进行编码吗？

> ID：11051580
> 
> 赞同：7
> 
> 时间：2012-06-15T13:27:08.350
> 
> 标签：c#, javascript, .net, encoding, .net-4.0

切换到 .net 4.0 后，来自第三方 gridview 的一些 javascript 代码崩溃。它与[HtmlEncode 和 UrlEncode 有关，现在编码单引号](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770143)

所以在页面上的一些代码被这样插入之前： `DataItem.GetMember('Id').Value`

现在是这样的：`DataItem.GetMember(&#39;Id&#39;).Value`

gridview`eval`在那一行上做了一个，现在崩溃并出现语法错误。我无法更改该gridview 中的javascript 代码。

有没有办法解决这个问题，而不是像这样倒退？

```
<pages controlRenderingCompatibilityVersion="3.5" /> 
```

**编辑：页面 controlRenderingCompatiblityVersion 也不能解决这个问题。单引号仍然被编码。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:50:19.713

从我读到的内容来看，这是一项安全功能，微软对改变它保持沉默。我见过的唯一解决方法是您需要创建一个自定义编码器类。您可以使用以下方法关闭属性编码：

```
public class HtmlAttributeEncodingQuote : System.Web.Util.HttpEncoder
{
    protected override void HtmlAttributeEncode(string value, System.IO.TextWriter output)
    {
        output.Write(value);
    }
} 
```

然后将其添加到**system.web**下的 web.config ：

```
<httpRuntime encoderType="HtmlAttributeEncodingQuote"/> 
```

# c#-4.0 - 如何从 XSLT 文件中读取多个 CSV 文件并输出单个 XML 文件

> ID：11051591
> 
> 赞同：0
> 
> 时间：2012-06-15T13:27:53.160
> 
> 标签：c#-4.0, xslt-2.0, saxon

我计划使用 Saxon 来解决 XSLT 问题。我需要按计划运行我的程序。当它运行时，它需要从一个目录中选择所有 CSV 文件。文件的数量可以是随机的，但一旦处理完毕，它们就会被另一个进程从文件夹中清除。最初只有一个具有固定名称的 CSV 文件，因此在 XSLT 中引用它不是问题。我还可以在运行时以编程方式设置文件名，因此一切正常。我的 XSLT 现在需要了解所有文件，以便输出单个 XML。我不确定是否可以传入文件路径并让 XSLT 读取该位置的所有文件？是否有执行此操作的命令或有更好的方法来执行此操作？请记住，当 XSLT 运行时，我不知道文件夹中有多少 CSV 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:49:09.103

请参阅[www.saxonica.com/documentation/sourcedocs/intro.xml](http://www.saxonica.com/documentation/sourcedocs/intro.xml)，您可以使用该`collection`功能从目录中读取文件，例如

```
<xsl:for-each select="collection('file:///C:/dir/subdir?select=*.csv;unparsed=yes')/tokenize(., '\n')">
  <line><xsl:value-of select="."/></line>
</xsl:for-each> 
```

# graph - 表示节点与属性中的所有信息如何影响存储、计算？

> ID：11051597
> 
> 赞同：0
> 
> 时间：2012-06-15T13:28:23.903
> 
> 标签：graph, neo4j, graph-databases

在使用图数据库（我的案例 Neo4j）时，我们可以通过多种方式表示相同的信息。使每个实体成为节点并通过关系连接所有实体，或者只是将实体添加到 Node.diff 的属性列表中

以下是相同数据的两种不同表示形式。 ![所有信息都表示为节点](../Images/8e70d607f1f6fc2b24a32a3cf513fbd1.png) ![信息表示为特定节点的属性](../Images/25807baa1e63e0a396e0be1435e0aad7.png) 总体而言，哪种机制适用于哪些条件？

我的用例涉及从不同节点遍历数据库直到 4 个深度，并通过连接的节点或属性检查信息（基于它是哪种方法）。一个感兴趣的问题可能是，“谁是约翰去斯坦福的朋友？”

存储，计算方面有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:59:06.900

通常，属性是延迟加载的，并且在缓存中保存的成本更高，尤其是字符串。节点和关系对于遍历最有效，特别是因为关系类型与关系记录一起存储，因此在用于遍历时不会触发属性加载。

此外，平衡图（即，没有多少具有超过 10K 关系的密集节点）是最有效的遍历。

我会尝试将大多数重复出现的属性建模为连接到实体的节点，从而使用图形本身来索引这些值，而不必恢复过滤属性值或使用昂贵的索引查找来索引属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:09:09.647

第一个要好得多，因为您正在查询诸如斯坦福之类的实体，并且该实体与许多人员节点相关。我认为建模为节点更直观，更容易查询。在您的第二个模型中，“找到所有上过斯坦福的人”并不是一件容易的事，因为您没有地方可以开始遍历。我将主要使用属性来描述节点/实体，使用它们来过滤查询的结果，例如谁是 2010 年去斯坦福大学的约翰的朋友。在这种情况下，年份属性将仅用于修剪结果. 取决于您的用例 - 如果年份真的很重要并且驱动大量查询或用于表示时间线，您甚至可以将年份建模为连接到斯坦福的节点。

# iphone - 获取 CGPoint 与 app Window 的比较

> ID：11051598
> 
> 赞同：1
> 
> 时间：2012-06-15T13:28:25.553
> 
> 标签：iphone, xcode, uiimageview

我有一个表格视图。我想为 appDelegates 窗口找到 UIImageView 的中心。

```
MA_MobileAppDelegate *appDelegate = (MA_MobileAppDelegate *)[[UIApplication sharedApplication] delegate];

            UAModalPanel *modalPanel = [[MSPicturePreview alloc] initWithFrame:appDelegate.window.frame withimage:self.customImageView.image];

            [appDelegate.window addSubview:modalPanel];

            [modalPanel showFromPoint:[appDelegate.window.superview convertPoint:[self.customImageView center] toView:nil]]; 
```

下面的代码指出了左上角的点。有什么方法可以在窗口上获取图像的实际点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:35:10.867

像这样试试。我认为它会起作用。

```
[modalPanel showFromPoint:[self.view convertPoint:[self.customImageView center] toView:appDelegate.window.superview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:37:40.897

我用这个

```
[modalPanel showFromPoint:[self.contentView convertPoint:[self.customImageView center] toView:appDelegate.window]]; 
```

基本上我使用单元格 contentView 来转换 appDelegates 窗口的点......

# java - 读取大型文本文件，垃圾收集器和 Scanner 对象的问题

> ID：11051599
> 
> 赞同：0
> 
> 时间：2012-06-15T13:28:37.923
> 
> 标签：java, garbage-collection, java.util.scanner, heap-memory

我正在编写一个需要读取非常大的文件（大约 150Mb 的文本）的程序。当我尝试读取大于 50Mb 的文件时遇到内存不足错误。这是我的代码的摘录。

```
if (returnVal == JFileChooser.APPROVE_OPTION) {
        file = fc.getSelectedFile();
        gui.setTitle("Fluent Helper - " + file.toString());
        try{
            scanner = new Scanner(new FileInputStream(file));
            gui.getStatusLabel().setText("Reading Faces...");
            while(scanner.hasNext()){
                count++;
                if(count<1000000){
                    System.gc();
                    count = 0;
                }
                readStr = scanner.nextLine()+ "\n";
                if(readStr.equals("#\n")){
                    isFaces = false;
                    gui.getStatusLabel().setText("Reading Cells...");
                }else if(isFaces){
                    faces.add(new Face(readStr));
                }else{
                    cells.add(new Cell(readStr));
                }
            }
        }catch (Exception e){
            e.printStackTrace();
        }finally{
            try{
                scanner.close();
            }catch(Exception e){
                e.printStackTrace();
            }
        }
        System.out.println("flie selected");
    } else {
        System.out.println("file not selected");
    } 
```

每次任意读取次数调用垃圾收集器的小块是我为解决内存问题而添加的，但它不起作用。相反，程序挂起并且永远不会到达文件的单元格部分（这应该在不到一秒的时间内发生）。这里是块。

```
 if(count<1000000){
                    System.gc();
                    count = 0;
                } 
```

我的猜测是，也许扫描仪的指针正在收集垃圾或其他东西。我真的一点头绪都没有。用更大的堆启动程序对我来说并不是一个真正的选择。该程序应该可供没有太多计算机知识的人使用。

我想要一个解决方案来让文件没有问题，无论是内存管理还是修复扫描仪或更有效的读取文件的方法。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:32:39.010

GC 将在需要时自动调用，因此您自己调用它只会减慢您的应用程序的速度。

问题是您保留的数据量

```
 faces.add(new Face(readStr));
            }else{
                cells.add(new Cell(readStr)); 
```

这些超出了您作为最大堆的内存量。你可以尝试设置`-mx1g`看看这是否有影响吗？

顺便说一句：你为​​什么`\n`要在每行的末尾添加一个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:43:56.023

调用垃圾收集通常不是一个好主意，您可能想在这里看看为什么：[为什么调用 System.gc() 是不好的做法？](https://stackoverflow.com/questions/2414105/why-is-it-a-bad-practice-to-call-system-gc)

您是否尝试过增加最大堆大小，例如将 -Xmx:1g 用于 1 GB？

# webdriver - 如何为不同的 Windows 划分启动测试

> ID：11051604
> 
> 赞同：0
> 
> 时间：2012-06-15T13:28:48.357
> 
> 标签：webdriver, selenium-grid

我有在 Windows x64 和 Windows x86 上进行网络启动测试的任务。我已经设置了 Selenium Grid（1 个集线器和两个节点）。如何仅针对 Win x64 启动测试？

当我在 Node 上启动 selenium 服务器时，我没有找到 x64 或 x86 的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:03:16.347

您可以尝试使用不同的平台值

```
java -jar selenium.jar -role node -hub http://yourhubaddress:hubport/grid/register -browser browserName=iexplorer,platform=win7 
```

对于 x86

```
java -jar selenium.jar -role node -hub http://yourhubaddress:hubport/grid/register -browser browserName=iexplorer,platform=XP 
```

现在，在您的测试中，您只需要设置正确的 browserName。就像是

```
DesiredCapabilities customIECapability=DesiredCapabilities.internetExplorer();
if(propertywhichcontainsbrowseryouwanttorun=x64IE){
customIECapability.setPlatform("win7");
}
else
if(propertywhichcontainsbrowseryouwanttorun="x32IE"){
customIECapability.setPlatform("XP");
}
WebDriver driver = new RemoteDriver("huburl",customIECapability); 
```

这应该将您的测试重定向到适当的机器。

# iphone - 不想在旋转轮播时旋转轮播中的图像

> ID：11051613
> 
> 赞同：1
> 
> 时间：2012-06-15T13:29:21.070
> 
> 标签：iphone, rotation, carousel

我正在使用 Nick Lockwood 旋转木马，类型是 Wheel Carousel。我将图像用作轮播中的项目。问题是当我旋转旋转木马时，图像也会旋转，即考虑人物图像，然后人物图像会倾斜，这是我不想要的，即我不想在旋转整个旋转木马时旋转该特定图像。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T14:18:08.647

查看`- (CATransform3D)transformForItemView:(UIView *)view withOffset:(CGFloat)offset;`Find `case iCarouselTypeWheel:`and`case iCarouselTypeInvertedWheel:`块的实现。

更改生成最终变换的代码（对于垂直和水平情况）以反转应用的旋转：

```
transform = CATransform3DTranslate(transform, 0.0f, radius, 0.0f);
transform = CATransform3DRotate(transform, angle * offset, 0.0f, 0.0f, 1.0f);

// this is the transform the existing code returns...
transform = CATransform3DTranslate(transform, 0.0f, -radius, offset * 0.01f);

// instead you reverse the rotation before returning...
return CATransform3DRotate(transform, -(angle * offset), 0.0f, 0.0f, 1.0f); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:57:21.067

查看iCarousel.m文件，找到`- (CATransform3D)transformForItemView:(UIView *)view withOffset:(CGFloat)offset`方法；在里面你会发现这个块：

```
 case iCarouselTypeWheel:
    case iCarouselTypeInvertedWheel:
    {
        NSInteger count = [self valueForTransformOption:iCarouselTranformOptionCount withDefault:
                           MIN(numberOfVisibleItems, numberOfItems + numberOfPlaceholdersToShow)];

        CGFloat arc = [self valueForTransformOption:iCarouselTranformOptionArc withDefault:M_PI * 2.0f];
        CGFloat radius = [self valueForTransformOption:iCarouselTranformOptionRadius withDefault:itemWidth * (CGFloat)count / arc];
        CGFloat angle = [self valueForTransformOption:iCarouselTranformOptionAngle withDefault:arc / (CGFloat)count];

        if (type == iCarouselTypeInvertedWheel)
        {
            radius = -radius;
            angle = -angle;
        }

        if (vertical)
        {
            transform = CATransform3DTranslate(transform, -radius, 0.0f, 0.0f);
 /* this */     transform = CATransform3DRotate(transform, angle * offset, 0.0f, 0.0f, 1.0f);
            return CATransform3DTranslate(transform, radius, 0.0f, offset * 0.01f);
        }
        else
        {
            transform = CATransform3DTranslate(transform, 0.0f, radius, 0.0f);
  /* this */    transform = CATransform3DRotate(transform, angle * offset, 0.0f, 0.0f, 1.0f);
            return CATransform3DTranslate(transform, 0.0f, -radius, offset * 0.01f);
        }
    } 
```

尝试简单地注释掉这两行：

```
 transform = CATransform3DRotate(transform, angle * offset, 0.0f, 0.0f, 1.0f); 
```

看看会发生什么；我猜这个脸不会被旋转，但是你可能需要调整翻译......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:39:05.573

尝试根据设备方向有条件地旋转图像

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view; 
```

委托方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T17:08:44.803

使用上述答案中的代码，我无法真正解决问题。我重用了部分评论，但没有重用代码。对我有用的是这个。

```
 if (_vertical)
        {
            transform = CATransform3DTranslate(transform, -radius, 0.0, 0.0);
            transform = CATransform3DRotate(transform, angle * offset, 0.0, 0.0, 1.0);
            transform = CATransform3DTranslate(transform, radius, 0.0, offset * 0.01);
            return CATransform3DRotate(transform, -(angle * offset), 0.0, 0.0, 1.0);
        }
        else
        {
            transform = CATransform3DTranslate(transform, 0.0, radius, 0.0);
            transform = CATransform3DRotate(transform, angle * offset, 0.0, 0.0, 1.0);
            transform = CATransform3DTranslate(transform, 0.0, -radius, offset * 0.01);
            return CATransform3DRotate(transform, -(angle * offset), 0.0, 0.0, 1.0);
        } 
```

# c# - 查询以使用 OLEDB 读取列 excel 工作表

> ID：11051619
> 
> 赞同：0
> 
> 时间：2012-06-15T13:29:44.330
> 
> 标签：c#, excel, oledb, rowcount

我对 OleDB 和阅读 excel 文件完全陌生。我有一个包含 3 列（姓名 - 姓氏 - 电子邮件地址）的工作表，我需要：

*   知道行数
*   读取第三列中的所有地址
*   每个地址一一提取

我使用 OpenFileDialog 对象 (ofd) 和 TextBox (excel) 来显示所选文件。这是我的代码：

```
if (ofd.ShowDialog() == DialogResult.OK)
{
    excel.Text = ofd.FileName;
    connection = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excel.Text + ";Extended Properties=\"Excel 12.0 Xml;HDR=NO;IMEX=1\"";
    conn.ConnectionString = connection;
    conn.Open();
    string name_query = "SELECT A FROM[" + ofd.SafeFileName + "]";
    OleDbDataAdapter da = new OleDbDataAdapter(name_query, conn);
    da.Fill(table);
    conn.Close();
    j = table.Rows.Count;
} 
```

它不起作用，“FROM ...”中的查询问题。我通常阅读这种类型的查询：

```
"SELECT * FROM [Sheet1$]" 
```

但我找不到`Sheet1$`到底是什么。有人可以向我解释正确的查询吗？

2）要访问表的每个元素（它只包含第三列）并将其保存在字符串变量中我必须做什么？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:47:41.853

要获取工作表名称，您可以使用数据提供者 (connection.getschema) 提供的默认 getschema 功能。没有列标题（HDR=NO），列被命名为 F1、F2 等，所以你对于第三个字段，你可以在 F3 上查询。如果您想完全确定，您还可以使用getschema 来获取使用第一个getschema 找到的工作表/表格的列名。最后，要获取字符串列表中的值，您可以使用一些 Linq（参见示例中的字符串列表）。不确定您是否指的是单个字符串值，但如果是这种情况，您可以在 linq 选择上使用 string.join 。

组合代码起始形式连接打开：

```
conn.Open();
var tableschema = conn.GetSchema("Tables");
var firstsheet = tableschema.Rows[0]["TABLE_NAME"].ToString();
string name_query = "SELECT F3 FROM [" + firstsheet + "]";
OleDbDataAdapter da = new OleDbDataAdapter(name_query, conn);
da.Fill(table);
conn.Close();
j = table.Rows.Count;
var stringlist = table.Rows.Cast<DataRow>().Select(dr => dr[0].ToString()).ToList(); 
```

# java - 在 Maven 中仅编译选定的文件

> ID：11051620
> 
> 赞同：27
> 
> 时间：2012-06-15T13:29:45.800
> 
> 标签：java, maven

我只想编译源目录中选定的文件或目录（包括子目录）。我很确定我可以使用`<includes>`of`maven-compiler-plugin`的配置来做到这一点，但它似乎不像我预期的那样工作，因为它仍然将所有类编译成`target/classes`. 真正奇怪的是，Maven 输出表明该设置确实有效，因为：

```
 <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.5.1</version>
    <configuration>
      <includes>
        <include>com/example/dao/bean/*.java</include>
      </includes>
    </configuration>
  </plugin> 
```

我有：

```
[INFO] Compiling 1 source file to c:\Projects\test\target\classes 
```

但没有编译器的配置，我有：

```
[INFO] Compiling 14 source file to c:\Projects\test\target\classes 
```

然而，在这两种情况下，所有 14 个类都被编译成`target/classes`我提到的。您能否解释一下或建议另一种仅编译选定文件的解决方案？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-18T10:47:27.020

具有 3 个类的简单应用程序。

```
com/company/Obj1.java
com/company/Obj2.java
com/company/inner/Obj3.java 
```

`build`在`pom.xml`

```
<build>
         <plugins>
            <plugin>
               <groupId>org.apache.maven.plugins</groupId>
               <artifactId>maven-compiler-plugin</artifactId>
               <version>2.0.2</version>
               <configuration>
                  <source>1.6</source>
                  <target>1.6</target>
                  <includes>
                     <include>com/company/inner/*.java</include>
                  </includes>
               </configuration>
            </plugin>
          </plugins>

   </build> 
```

结果：编译了 1 个类。
并且包含的​​任何组合都运行良好
，或者您的意思是别的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-30T06:46:47.060

我也遇到过类似的情况。我们只需要将修改后的文件热交换到我们的远程 docker 容器中，以缩短更改部署时间。这就是我们解决它的方法。

在带有命令行参数的构建插件中添加包含选项。注意因为我们想添加多个文件，所以我们使用了**包含**而不是**包含**

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.7.0</version>
            <configuration>
                <compilerVersion>1.8</compilerVersion>
                <source>1.8</source>
                <target>1.8</target>
                <includes>${changed.classes}</includes>
            </configuration>
        </plugin> 
```

现在使用参数运行编译阶段，例如：

```
mvn compile -Dchanged.classes=com/demo/ClassA.java,com/demo/ClassB.java,com/demo2/* 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:14:12.810

maven-compiler-plugin 使用类似 Ant 的包含/排除表示法。您可以在 Ant 文档中查看示例[Ant FileSet Type](http://ant.apache.org/manual/Types/fileset.html#symlink "Ant 文件集类型”")

如果您只想包含一个目录中的文件，则需要像以前那样编写它：

```
<include>com/example/dao/bean/*.java</include> 
```

要包括路径中的子目录，它将是：

```
<include>com/example/dao/bean/**/*.java</include> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:10:11.850

使用 maven 编译器插件包含或排除用于编译的文件没有任何困难`2.5.1`。 [这](https://github.com/maruhgar/mvn-examples/tree/master/selective-compile)是我用于此目的的虚拟项目。也许`include`您使用的模式不同。

# linux - 如何在内核模块中捕获网络帧

> ID：11051625
> 
> 赞同：6
> 
> 时间：2012-06-15T13:29:56.407
> 
> 标签：linux, networking, linux-kernel

我想在某个 NIC 接收到帧时捕获它们；从中提取一些信息（目前我需要捕获源MAC和源IP地址）；将这些信息保存在一些公共数据结构中；并让帧向上到达 TCP/IP 堆栈。

我以前使用过 Netfilter，但显然它不提供链接层挂钩。
有什么办法可以做到这一点吗？

我把它写成一个内核模块；运行 Linux 内核 2.6.32

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T02:24:03.320

实际上，Netfilter 应该可以正常工作，因为它接收整个数据包（内部存储为包含链路层信息的 sk_buff）。这里有一些示例代码可以帮助您入门。此代码拦截给定设备的所有传入数据包并打印 src MAC 和 src IP。

```
static struct nf_hook_ops nfin;

static unsigned int hook_func_in(unsigned int hooknum,
            struct sk_buff *skb,
                            const struct net_device *in,
                            const struct net_device *out,
                            int (*okfn)(struct sk_buff *))
{
    struct ethhdr *eth;
    struct iphdr *ip_header;
    /* check *in is the correct device */
    if (in is not the correct device)
          return NF_ACCEPT;         

    eth = (struct ethhdr*)skb_mac_header(skb);
    ip_header = (struct iphdr *)skb_network_header(skb);
    printk("src mac %pM, dst mac %pM\n", eth->h_source, eth->h_dest);
    printk("src IP addr:=%d.%d.%d.%d:%d\n", NIPQUAD(ip_headr->saddr));
    return NF_ACCEPT;
}

static int __init init_main(void)
{
    nfin.hook     = hook_func_in;
    nfin.hooknum  = NF_IP_LOCAL_IN;
    nfin.pf       = PF_INET;
    nfin.priority = NF_IP_PRI_FIRST;
    nf_register_hook(&nfin);

    return 0;
}

static void __exit cleanup_main(void)
{
    nf_unregister_hook(&nfin);
}
module_init(init_main);
module_exit(cleanup_main); 
```

# jquery - Fancybox 2.0.6 - AfterClose 在fancybox 打开之前触发

> ID：11051632
> 
> 赞同：2
> 
> 时间：2012-06-15T13:30:18.973
> 
> 标签：jquery, asp.net, fancybox

我正在使用 Fancybox 2.0.6 和 jQuery 1.7.2。

我有一个带有两个更新面板的 asp.net 网页，一个在左侧，一个在右侧。在左侧有一个带有问卷结构的 Telerik RadTreeList 控件，选择一个问题会使用该问题的细节更新右侧面板。

还有一个按钮（称为 ActionButton，在更新面板之外）触发服务器端事件以生成问题答案的 id。然后，该事件使用答案 ID 更新隐藏链接，并通过将隐藏文字设置为可见来触发花式框。

```
<a href="action.aspx" id="hidden_link" class="actionbutton" style="visibility: hidden;" runat="server"></a>
<asp:Button ID="btnAction" runat="server" meta:resourcekey="btnOpenAction" CssClass="formbuttons" OnClick="btnAction_Click" />
<asp:Literal runat="server" Visible="false" ID="Literal1" Text="<script type='text/javascript' language='javascript'>jQuery(document).ready(function () { $('#MainContent_hidden_link').trigger('click'); });</script>" /> 
```

fancybox 是一个 iFrame，其中包含另一个网页，可将更多详细信息保存到数据库中。到目前为止，一切都很好。一切都按预期工作。但是，我现在要做的是更新左侧更新面板以显示已添加详细信息。

这是fancybox的代码：

```
 $("a.actionbutton").fancybox({
            'type': 'iframe',
            'openEffect': 'elastic',
            'closeEffect': 'elastic',
            'openSpeed': 600,
            'closeSpeed': 200,
            'padding': 10,
            'width': 800,
            'height': 600,
            afterClose: function () {
                $('#ctl00$MainContent$btnHiddenAction').trigger('click');
                alert('Ha!'); 
            }
        }); 
```

我在这里疯了，因为我无法在关闭*后*触发 afterClose 回调。我得到了我的“哈！” 当我单击 ActionButton 时会发出警报，然后单击 OK 后，fancybox 会弹出。我试过使用 beforeClose 但它根本不会触发。

将我的代码粘贴到[jsFiddle](http://jsfiddle.net/cTBvV/89/)时，它​​可以正常工作？！？

我究竟做错了什么？在穿着长臂衬衫的人出现之前帮助我...

问候，斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:04:32.330

我最终完全忽略了 afterClose 事件。

相反，我在fancybox 的关闭脚本中添加了一个javascript 调用，位于fancybox 中显示的action.aspx 页面的底部：

```
</body>
<script language="javascript" type="text/javascript">    function CloseMe() { parent.$.fancybox.close(); parent.document.getElementById('ctl00$MainContent$btnHiddenAction').click(); }</script>
</html> 
```

它对我有用，也许它对其他人有帮助...... :)

# powershell - 将 CSV 数据导入回 CSV

> ID：11051638
> 
> 赞同：2
> 
> 时间：2012-06-15T13:30:39.773
> 
> 标签：powershell

我是 Powershell 新手，有一个简短的问题。我正在使用的输出来自 sysinternals.com CSV 格式的 autorunsc 工具。该脚本的目的是在 CSV 中搜索某些二进制名称。

导入按预期进行，但我无法将其写入我的过滤信息

```
$IOCFiles = "es.dll", "null.sys" 

$data = import-csv "D:\autoruns.csv" -header("Entry_Location","Entry","Enabled","Category","Description","Publisher","Image_Path","Launch_String","MD5","SHA-1","SHA-256") 

foreach ($K in $data)  
{ 
    foreach($element in $IOCFiles) 
    { 
        if ($k.Image_Path -match $element) 
        { 
            $hits = $k.Entry + "          " + $K.Publisher + "          " + $K.Image_Path 
            $hits | export-csv -Path c:\HITS.csv -NoTypeInformation
        } 
   } 
} 
```

以上内容不会生成 CSV 中的实际数据，而是生成有关值长度的信息。有许多很好的导入/导出示例，但我没有看到一个包含导入列的示例。由于我正在玩类似的东西，我必须使用列导入方法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:27:06.663

Powershell 使这种事情变得非常容易：

```
Import-csv "D:\autoruns.csv" -header("Entry_Location","Entry","Enabled","Category" |
  Where-Object{($IOCFiles -match $_.Image_Path) -ne $null} | 
  Select-Object Entry, Publisher, Image_Path |
  Export-CSV -Path c:\HITS.csv -NoTypeInformation 
```

我现在没有时间测试它，所以它可能存在一些问题，但这就是它的要点。

# android - 如何从我的应用程序中选择浏览器？

> ID：11051644
> 
> 赞同：0
> 
> 时间：2012-06-15T13:31:04.443
> 
> 标签：android, browser, android-intent, google-play

我有一个应用程序，其中有一个 URL，我不想在 WebView 中加载它，而是使用

```
Intent i = new Intent(Intent.ACTION_VIEW, 
Uri.parse("http://VenomVendor.blogspot.com/search/label/Android"));
startActivity(i); 
```

我希望用户仅在特定浏览器中查看此站点，假设我只想在`Firefox`. 如果用户尚未安装，我必须告诉他下载 Firefox，下载后我必须加载此 URL。

注意：除非用户退出，否则我的应用程序不应退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:40:03.717

1-检查包裹的出口

```
public booleand isPackageExists(String targetPackage){
        List<ApplicationInfo> packages;
        PackageManager pm;
            pm = getPackageManager();        
            packages = pm.getInstalledApplications(0);
            for (ApplicationInfo packageInfo : packages) {
        if(packageInfo.packageName.equals(targetPackage)) return true;
        }        
        return false;
    } 
```

2-对特定浏览器使用操作或组件名（包名和类名）

```
 like for default ComponentName arg will be  "com.android.browser", "com.android.browser.BrowserActivity"

 public void onClick(View v) {
             Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
             myWebLink.setComponent(new ComponentName("pkg","cls"));
             myWebLink.setData(Uri.parse("http://google.com"));
             startActivity(myWebLink);
       } 
```

# ruby - 如何从 Nokogiri::XML::NodeSet 获取输入值？

> ID：11051649
> 
> 赞同：5
> 
> 时间：2012-06-15T13:31:19.243
> 
> 标签：ruby, nokogiri

我正在`input`使用 Nokogiri 的`xpath`方法寻找我的元素。它返回一个类对象`Nokogiri::XML::NodeSet`：

```
[#<Nokogiri::XML::Element:0x3fcc0e07de14 name="input" attributes=[#<Nokogiri::XML::Attr:0x3fcc0e07dba8 name="type" value="text">, #<Nokogiri::XML::Attr:0x3fcc0e07db94 name="name" value="creditInstallmentAmount">, #<Nokogiri::XML::Attr:0x3fcc0e07db44 name="style" value="width:240px">, #<Nokogiri::XML::Attr:0x3fcc0e07dae0 name="value" value="94.8">, #<Nokogiri::XML::Attr:0x3fcc0e07da18 name="readonly" value="true">]> 
```

`input`有没有比使用以下方法转换它更快更干净的方法来获得价值`to_s`：

```
"<input type=\"text\" name=\"creditInstallmentAmount\" style=\"width:240px\" value=\"94.8\" readonly>" 
```

并匹配正则表达式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-16T03:13:46.263

有几件事会有所帮助：

Nokogiri 有一个`at`方法，它相当于`search(...).first`, 并且，它不是返回 NodeSet，而是返回 Node 本身，从而可以轻松地从中获取值：

```
require 'nokogiri'

doc = Nokogiri::HTML('<input type="text" name="creditInstallmentAmount" style="width:240px" value="94.8" readonly>')
doc.at('input')['value'] # => "94.8"
doc.at('input')['value'].to_f # => 94.8 
```

另外，请注意我使用的是 CSS 表示法，而不是 XPath。Nokogiri 两者都支持，而且很多时候 CSS 更明显且易于阅读。为方便起见，该`at_css`方法是一个别名。`at`

请注意，Nokogiri 在`search`和中使用了一个小测试`at`来尝试确定选择器是 CSS 还是 XPath，然后相应地分支到特定方法。测试可能会被愚弄，此时您应该使用特定的 CSS 或 XPath 变体，或者如果您偏执，请始终使用它们。在使用 Nokogiri 的几年中，我只遇到过一次代码混乱的情况。如果您想更明确地了解`input`您想要的，您可以查看标签的参数：

```
doc.at('input[@name="creditInstallmentAmount"]')['value'] # => "94.8" 
```

熟悉和及其变体之间的区别`search`，`at`Nokogiri 将真正对您有用。了解如何访问参数和`text()`节点，您将了解解析 HTML 和 XML 所需了解的 99%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:36:17.950

好的，我找到了答案：

```
.map{|node| node["value"]}.first 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T17:35:01.773

好的，这对我有用

```
require 'nokogiri'
require 'open-uri'

html = open ARGV[0]

doc = Nokogiri::HTML(html)
inputs = doc.search 'input'
inputs.map{|node| node['name']} 
```

或多合一

```
inputs = Nokogiri::HTML(html).search('input').map{|node| node['name']} 
```

# javascript - stellar.js - 为垂直滚动网站配置偏移量/对齐元素？

> ID：11051650
> 
> 赞同：4
> 
> 时间：2012-06-15T13:31:21.770
> 
> 标签：javascript, jquery, html, jquery-plugins, offset

我已经找到并正在尝试使用一个名为[stellar.js](http://markdalgleish.com/projects/stellar.js/)的插件。主要是为网站创建视差效果，但是，我不追求这种效果——我追求的是它提供的另一种效果：

> Stellar.js 最强大的特性是它对齐元素的方式。
> 
> 当它们的偏移父元素与屏幕边缘相遇时，所有元素都将返回到它们的原始位置——加上或减去你自己的可选偏移量。

偏移定位示例：http: [//markdalgleish.com/projects/stellar.js/#show-offsets](http://markdalgleish.com/projects/stellar.js/#show-offsets)。当您滚动 div 时，它会捕捉/重新对齐到浏览器的边缘。我正试图让它适用于垂直网站。

由于我对 Javascript 和 jQuery 的新手了解，我运气不佳。我认为这只是将水平交换为垂直的情况。

有没有人玩过这个插件，或者在类似的场景中使用过它，并得到任何提示？

带有所有代码的 jsFiddle：http: [//jsfiddle.net/2SH2T/](http://jsfiddle.net/2SH2T/)

和Javascript代码：

```
var STELLARJS = {
    init: function() {
        var self = this;
        $(function(){
            self.$sections = $('div.section').each(function(index){
                $(this).data('sectionIndex', index);
            });

            self.highlightSyntax();
            self.handleEvents();

            self.debugOffsets.init();
            self.debugOffsetParents.init();

            self.initParallax();
        });
    },
    initParallax: function() {
        var isHomePage = $('body').hasClass('home'),
            $main = $('div.main');

        if (isHomePage) {
            $main.height($main.height() + $(window).height() - 1000);
        }

        if ($.browser.msie) {
            $('body').removeAttr('data-stellar-background-ratio').append('<div class="ie-bg" />');
        }

        $(window).stellar({
            horizontalOffset: !isHomePage,
            verticalScrolling: 40
        });
    },
    highlightSyntax: function() {
        $('pre').addClass('prettyprint');
        if (window.prettyPrint !== undefined) prettyPrint();
    },
    handleEvents: function() {
        var self = this,
            //Debounce function from Underscore.js
            debounce = function(func, wait) {
                var timeout;
                return function() {
                    var context = this, args = arguments;
                    var later = function() {
                        timeout = null;
                        func.apply(context, args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                }
            },
            handleScroll = function() {
                var scrollTop = $(window).scrollTop(),
                    sectionIndex = Math.round((scrollTop - 40) / self.$sections.first().outerHeight()),
                    $activeSection = self.$sections.eq(sectionIndex);

                if ($activeSection.length === 0) {
                    $activeSection = self.$sections.last();
                }

                if ($activeSection.length === 0) return;

                $(window).unbind('scroll.stellarsite');

                if (scrollLeft === 0) {
                    $(window).unbind('scroll.stellarsite').bind('scroll.stellarsite', debounce(handleScroll, 500));
                } else {
                    $('html,body').animate({
                        scrollLeft: $activeSection.offset().left - 40
                    }, 600, 'easeInOutExpo', function() {
                        setTimeout(function(){
                            $(window).unbind('scroll.stellarsite').bind('scroll.stellarsite', debounce(handleScroll, 500));
                        }, 10);
                    });
                }

                $(window).bind('mousewheel', function(){
                    $('html,body').stop(true, true);
                });

                $(document).bind('keydown', function(e){
                    var key = e.which;

                    if (key === 37 || key === 39) {
                        $('html,body').stop(true, true);
                    }
                });
            };

        if (window.location.href.indexOf('#show-offset-parents-default') === -1) {
            $(window).bind('scroll.stellarsite', debounce(handleScroll, 500));
        }
    },
    debugOffsets: {
        init: function() {
            this.$debug = $('#debugOffsets');

            if (window.location.href.indexOf('#show-offsets') > -1) {
                this.show();
            }
        },
        show: function() {
            this.$debug.fadeIn();
            $('body').addClass('debugOffsets');
            $('h2').append('<div class="debug-h2-label">Offset Parent (All parallax elements align when this meets the offsets)</div>');
        },
        hide: function() {
            this.debug.fadeOut;
            $('body').removeClass('debugOffsets');
        }
    },
    debugOffsetParents: {
        init: function() {
            this.$debug = $('#debugOffsets');

            if (window.location.href.indexOf('#show-offset-parents-default') > -1) {
                this.removeOffsetParents();
            }

            if (window.location.href.indexOf('#show-offset-parents') > -1) {
                this.show();
            }            
        },
        show: function() {
            this.$debug.fadeIn();

            $('body').addClass('debugOffsetParents');
            $('h2').append('<div class="debug-h2-label">New Offset Parent (All parallax elements align when this meets the offsets)</div>');
            $('h2').each(function(){
                $(this).find('div.constellation:last').append('<div class="debug-constellation-label">Default Offset Parents</div>');
            });
            $('body').addClass('debug');
        },
        removeOffsetParents: function() {
            $('body').addClass('debugOffsetParentsDefault');
            $('h2[data-stellar-offset-parent]').removeAttr('data-stellar-offset-parent');
        }
    }
};

STELLARJS.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:39:11.893

找了一段时间好的解决方案后，我找到了这个jQuery插件——Snappoint！

[https://github.com/robspangler/jquery-snappoint](https://github.com/robspangler/jquery-snappoint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:54:47.507

我想我已经用下面的代码实现了你所描述的。这是一个 JsFiddle：http: [//jsfiddle.net/E4uVD/7/](http://jsfiddle.net/E4uVD/7/)

查询：

```
$(function(){
    var _top = $(window).scrollTop();
    var individualDivHeight = 300;
    $(window).mousedown(function() {
        $('html, body').stop();
    });
    $(window).mouseup(function(){
        var _cur_top = $(window).scrollTop();
        var totalHeight = $('#container').height();
        var posToScroll = Math.round(_cur_top / individualDivHeight) * individualDivHeight;

        $('html, body').stop().animate({scrollTop: posToScroll}, 2000);
    });
}); 
```

HTML：

```
<div id="container">
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
    <div class="box">300px</div>
</div> 
```

CSS：

```
body {
    height:2000px;
}
.box
{
    color: #fff;
    height: 300px;
    width: 300px;
    border: 1px solid white;
}
#container {
    height:3000px;
    width:300px;
    background-color:blue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T21:00:09.373

我修改了原始代码并得出了与 stellarjs.com 一样的确切效果。相反，它是垂直的:)

看看：http: [//jsfiddle.net/E4uVD/38/](http://jsfiddle.net/E4uVD/38/)

# python - Python 3 字典没有 has_key() 方法

> ID：11051652
> 
> 赞同：5
> 
> 时间：2012-06-15T13:31:31.947
> 
> 标签：python, python-3.x

我阅读了“Python Cookbook”并查看了“查找两个字典的交集”的作者推荐使用这样的单行代码的方法：

```
filter(another_dict.has_key, some_dict.keys()) 
```

但是由于 Python 3 字典没有 has_key() 方法，我应该如何修改建议的代码？我想可能有一些内部 __ in__() 方法或类似的东西。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T13:32:48.500

Python 3 有字典键视图，这是一个更强大的概念。你的代码可以写成

```
some_dict.keys() & another_dict.keys() 
```

在 Python 3.x 中。这会将两个字典的公共键作为一个集合返回。

这在 Python 2.7 中也可用，使用方法`dict.viewkeys()`.

作为原始代码的更紧密匹配，您还可以使用列表推导：

```
[key for key in some_dict if key in another_dict] 
```

更接近原始代码的匹配是使用`dict.__contains__()`，这是与运算符对应的魔术方法`in`：

```
filter(another_dict.__contains__, some_dict.keys()) 
```

但请不要使用此代码。我建议使用第一个版本，它是唯一突出 和 之间对称性的`some_dict`版本`another_dict`。

# c - 文件处理程序在 C 中未按预期工作

> ID：11051653
> 
> 赞同：0
> 
> 时间：2012-06-15T13:31:33.067
> 
> 标签：c, linux, file, file-io

```
FILE *mails;
FILE *tempmails;
mails = fopen("mailer.txt", "r");
tempmails = fopen ("tempmailer.txt" , "a+");
char line[200],templine[200];
char blnklne[]="\n";        
while(fgets(line, sizeof line, mails) != NULL)
{       
    int flag=0;    
    while(fgets(templine, sizeof line, tempmails) != NULL)
    {               
        if((strcmp(line,templine)==0) || (strcmp(line,blnklne)==0))
        {               
            flag = 1;               
        }               
    }           
    if(flag == 0)
    {           
        fputs(line, tempmails);             
    }       
}       
fclose(mails);
fclose(tempmails);
tempmails = fopen ("tempmailer.txt", "r");
remove("mailer.txt");
FILE *newmails;
newmails = fopen("mailer.txt", "a");
while(fgets(templine, sizeof line, tempmails) != NULL)
{       
    fputs(templine, newmails);      
}       
fclose(newmails);
fclose(tempmails);
remove("tempmailer.txt"); 
```

我为以下目的编写了上述 C 代码：

1.  必须读取每一行`mailer.txt`并检查一行是否为空白或重复，如果两个条件都为假，则必须将其输入到临时文件中`tempmailer.txt`
2.  删除文件`mailer.txt`，然后新建一个并复制输入到新文件中，然后删除`tempmailer.txt`。

但是在运行时实际发生的是：

1.  无论给定的任何条件如何，都从所有行复制（不希望`mailer.txt`的）`tempmailer.txt`
2.  删除`mailer.txt`并创建一个新的`mailer.txt`（期望的）
3.  从原样复制`tempmailer.txt`到新文件（需要）
4.  删除`tempmailer.txt`（需要）

无论我做什么，我都无法根除这个问题。操作系统是linux。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:44:17.970

您需要在第二个 while 循环之前查找文件的开头。

就目前而言，您的第二个 while 循环永远不会找到任何匹配的行，因为它将始终指向文件的末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:55:29.933

在开始每个第二个循环之前重置`tempmails`到文件的开头。

```
while(fgets(line, sizeof line, mails) != NULL)
{
    int flag=0;
    rewind(tempmails);                              /* go back to the begining */
    while(fgets(templine, sizeof line, tempmails) != NULL)
    {
        /* ... */
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:37:23.173

重复检测代码很奇怪，它同时从两个文件中读取。您无法从为追加打开的文件中读取。试试模式`a+`。

这可以用一个简单的 shell 脚本来解决，你真的必须用 C 来写吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T13:54:04.720

也许这部分代码是您得到问题 1 的原因

```
while(fgets(line, sizeof line, mails) != NULL)
{       
     int flag=0;    
     while(fgets(templine, sizeof line, tempmails) != NULL)
    {               
        if((strcmp(line,templine)==0) || (strcmp(line,blnklne)==0))
       {               
            flag = 1;               /* this part may be not correct */
        }               
    }           
    if(flag == 0)
    {           
        fputs(line, tempmails);             
    }       
} 
```

如果程序找到使 if 条件为真的行，则标志设置为 1，但下一行可能不会使 if 条件为真，并且您的程序不能将标志设置为 0。因此，您永远不会放置不匹配的行在匹配行之后进入临时邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:38:33.563

*免责声明：这不是真正的答案，但绝对可以帮助调试！*

在以下行之后，您应该检查指针是否为 NULL：

```
mails = fopen("mailer.txt", "r");
tempmails = fopen ("tempmailer.txt" , "a+");

if (mails == NULL) printf("Error: could not open file");
if (tempmails == NULL) printf("Error: could not open file"); 
```

现在您至少可以知道它是否可以打开和读取文件。要检查是否`fgets`有效，并且没有给您错误，请使用`ferror`或`feof`。

每次调用`fopen`FILE 句柄时，都应该添加相同的 NULL 检查。

# c# - 从后面在sqldatabase中添加其他格式的日期值

> ID：11051657
> 
> 赞同：0
> 
> 时间：2012-06-15T13:31:49.060
> 
> 标签：c#, asp.net, sql

我有一个gridvieww 和sqldatasource。

我有一些专栏：`Name, Date TK (type DATE)`。

我有很多行要添加到数据表中。

例如：约翰 30.12.2012 。当我从 excel 复制行并将它们粘贴到数据表中时，日期列不允许这种日期格式。我需要让它允许。 ![在此处输入图像描述](../Images/bbc5cf6087c0e967986a20f5939801b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:41:12.873

您可以使用以下方式重新格式化您的日期：

```
DateTime time = DateTime.Now; // Or the date you have/need
String format = "mm.dd.yyyy";
String goodTime = time.ToString(format)); 
```

看看[这篇文章。](http://www.dotnetperls.com/datetime-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:42:10.467

设置日期字段等于

```
type.Date.ToString("MM.dd.yyyy"); 
```

但是，在我们公司，我们遇到了几个关于国际日期和保存到数据库的问题。我们发现效果最好的格式是：

```
type.Date.ToString("yyyy-MM-dd HH:mm:ss"); 
```

# ios - iOS - 如何允许用户从一系列数字中进行选择？

> ID：11051670
> 
> 赞同：1
> 
> 时间：2012-06-15T13:32:56.220
> 
> 标签：ios, user-interface

允许用户在 iOS 上选择数字的最佳方式是什么？基本上我有一个允许用户设置游戏的“表单”。其中一个选项要求他们指定团队的数量。

我的第一个想法是使用滑块，但我该如何布局呢？以下似乎不是很直观：

```
Select number of teams: 5
C=====O=================D 
```

但是话又说回来，这看起来也不是很好：

```
Select number of teams:
C========O==========D 5 
```

我的第二个想法是创建一个按钮，当按下该按钮时，会向用户显示带有 UIPickerview 的模态视图，但是这似乎有点过分，只是为了选择一个数字。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:38:17.937

两种方法都很好。如果您没有大量的数字可供选择，则滑块效果很好，因为这*可能*会使滑块有点不精确。我会选择您的第二个布局，并将数字放在滑块旁边和上面的标签上。

但是，滑块只能选择*一个*数字 - 在您的问题标题中，您指的是“选择*一系列*数字”。那是相当不同的。如果您需要一个滑块来选择一个范围（如 3 到 5），则需要一个[双向滑块](http://buildmobile.com/wicked-ios-range-slider-part-one)自定义组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:41:49.747

好吧，如果您只有很少的选择可供选择，您可能希望使用几个按钮，其中一个选择显示不同的颜色（并且文本将指示选择的值）。

另一种选择是有两个按钮 +/- 和文本框，这将增加和减少团队的数量。

最后，您可以使用其中一种自定义控件：

*   [http://blog.lemberg.co.uk/iphone-development/custom-dropdown-list/](http://blog.lemberg.co.uk/iphone-development/custom-dropdown-list/)
*   [http://cocoacontrols.com/platforms/ios/controls/cdpiemenu](http://cocoacontrols.com/platforms/ios/controls/cdpiemenu)

# php - 选择标记中的 Zend 表单空选项元素

> ID：11051673
> 
> 赞同：0
> 
> 时间：2012-06-15T13:33:23.600
> 
> 标签：php, zend-framework, zend-form, zend-form-element

在一个网站中，我想使用 zend 表单创建一个空选项标签。例如

```
<select>
<option></option>
<option>AAAAA</option>
<option>BBBBB</option>
<option>CCCCC</option>
</select> 
```

我试图用多选项数组来做到这一点

```
$this->addElement ( 'select', 'selection', array (
                'label' => 'Selection:',
                'multiOptions' => array(''='', 'a'=>'aaaa', 'b'='bbbb')
        ) ); 
```

但它给了我一个html如下

```
<select>
    <option **label="" value=""**></option>
    <option>AAAAA</option>
    <option>BBBBB</option>
    <option>CCCCC</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:42:09.643

这是什么`'multiOptions'=>array(''=>'', 'a'=>'AAAAA', b=>'BBBBB');` ？

您没有发布要检查的代码，但我假设有问题，请参阅下面的代码

```
//initiate form element
$selectElement = new Zend_Form_Element_Select('select-name', array(
       "label" => "label",
       "required" => true,
    ));
//add multiple options 
$selectElement->addMultiOptions(array(
        "" => "",
        "somethig" => "value",
    )); 
```

# mysql - 为什么mysql查询返回错误的结果？

> ID：11051675
> 
> 赞同：1
> 
> 时间：2012-06-15T13:33:32.597
> 
> 标签：mysql

我正在尝试在我的 MySQL 数据库中查找最新的日志条目。我昨晚深夜做了这个查询，但今天测试后它似乎没有返回正确的数据。

```
SELECT MAX(id), hostName, email, info, time 
FROM log
WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
GROUP BY hostName 
ORDER BY `time` DESC 
```

查询运行得很好，但似乎没有其他字段与 id 列匹配。它获取最大 id 号，但 hostName、email 和 info 与 id 不匹配，并且它们不是最新的。我花了几个小时在这上面旋转我的轮子（我是一个 MySQL 菜鸟，只是为了好玩）所以我现在很困惑..

谢谢你的帮助！

编辑：哇感谢所有的回复！对不起，我应该说“我想要每个主机名的最新日志！” <- 这正是我需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:40:28.343

你说：

> 我正在尝试在我的 MySQL 数据库中查找最新的日志条目

无需分组，也无需使用子查询。试试这个：

```
SELECT id, hostName, email, info, time FROM log
WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
ORDER BY `time` DESC 
```

现在你说：

> 我想要每个主机名的最新日志！

那么解决方案应该是这样的：

```
SELECT l1.id, l1.hostName, l1.email, l1.info, l1.time FROM log l1
LEFT JOIN log l2 on l1.hostName = l2.hostName AND l1.time < l2.time
WHERE l2.time IS NULL
ORDER BY l1.time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:39:22.487

如果您想要与每个 distinct 的最大 id 对应的完整行`hostName`，

```
SELECT id, hostName, email, info, time
FROM log
WHERE id IN 
    (SELECT MAX(id) FROM log WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
     GROUP BY hostName)
ORDER BY `time` DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:49:54.053

另一种做同样事情的方法是`GROUP BY`先到`JOIN`日志表：

如果*“最新”*表示最大值`id`，请使用`(hostname, time, id)`索引，并且：

```
SELECT log.id
FROM 
        log
    JOIN 
        ( SELECT MAX(id) AS id
          FROM log
          WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
          GROUP BY hostName
        ) AS grp
      ON grp.id = log.id ; 
```

**更新**：你可能想试试这个。它可能更有效（取决于主机名分布） - 并且会受益于 index: `(hostname, id, time)`index:

```
SELECT log.id
FROM 
        log
    JOIN 
        ( SELECT MAX(id) AS id
          FROM log
          GROUP BY hostName
        ) AS grp
      ON grp.id = log.id 
WHERE log.time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) ; 
```

* * *

如果*“最新”*是指最大值`time`（例如，如果`time`以后`insertion_time`更改并且未更改），请使用`(hostname, time)`索引，并且：

```
SELECT log.*
FROM 
        log
    JOIN 
        ( SELECT hostname, MAX(time) AS max_time
          FROM log
          WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
          GROUP BY hostname
        ) AS grp
      ON  grp.hostname = log.hostname
      AND grp.max_time = log.time ; 
```

* * *

最后，由于每个人都忘了回答***“为什么 mysql 查询返回错误的结果？”*** 问题，这里还有一个问题有一些有用的答案： [为什么 MySQL 会添加一个与 SQL 标准冲突的特性？](https://stackoverflow.com/questions/7594865/why-does-mysql-add-a-feature-that-conflicts-with-sql-standards)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:39:13.440

这是一个著名的：

```
SELECT *
FROM log
WHERE log.id IN (
    SELECT MAX(id)
    FROM log
    WHERE time >= DATE_SUB(NOW(), INTERVAL 1 HOUR) 
    GROUP BY hostName) T 
```

# javascript - 用鼠标移动旋转 div

> ID：11051676
> 
> 赞同：8
> 
> 时间：2012-06-15T13:33:43.117
> 
> 标签：javascript, jquery, jquery-ui, css

我有以下代码来旋转 div。通过同一 div 右上角的图像上的 mousedown 事件。我希望 div 旋转直到鼠标向上。从逻辑上讲，我相信代码很好，但点击后它就可以工作。当我单击其他项目时，旋转停止而不是 mouseup。我认为在鼠标向下拖动后，浏览器会尝试拖动图像，但我需要帮助..提前谢谢:)

```
fl_rotate: false,
rotdivs: function() {
    var pw;
    var oThis = this;
    $('.drop div img').mousedown(function(e) {
        oThis.destroyDragResize();
        oThis.fl_rotate = true;
        return;
    });
    $(document).mousemove(function(e) {
        if (oThis.fl_rotate) {
            var element = $(oThis.sDiv);
            oThis.rotateOnMouse(e, element);
        }
    });
    $(document).mouseup(function(e) {
        if (oThis.fl_rotate) {
            oThis.initDragResize();
            var ele = $(oThis.sDiv);
            ele.unbind('mousemove');
            ele.draggable({
                containment: 'parent'
            });
            ele = 0;
            oThis.fl_rotate = false;
        }
    });
},
rotateOnMouse: function(e, pw) {
    var offset = pw.offset();
    var center_x = (offset.left) + ($(pw).width() / 2);
    var center_y = (offset.top) + ($(pw).height() / 2);
    var mouse_x = e.pageX;
    var mouse_y = e.pageY;
    var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
    var degree = (radians * (180 / Math.PI) * -1) + 100;
    //            window.console.log("de="+degree+","+radians);
    $(pw).css('-moz-transform', 'rotate(' + degree + 'deg)');
    $(pw).css('-webkit-transform', 'rotate(' + degree + 'deg)');
    $(pw).css('-o-transform', 'rotate(' + degree + 'deg)');
    $(pw).css('-ms-transform', 'rotate(' + degree + 'deg)');
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T14:06:25.977

为此有一个库。独立工作或作为 jQuery 插件[https://github.com/PixelsCommander/Propeller](https://github.com/PixelsCommander/Propeller)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T22:18:23.553

我认为问题在于当本机拖动事件（拖动图像）被触发（鼠标按下）时，它阻止了鼠标向上事件被触发。所以你只需要阻止鼠标按下事件的默认动作。

这里有一个工作示例：

HTML：

```
<div class="drop">
    <div>
        <img src="http://www.belugerinstudios.com/image/picturethumbnail/FunnyCatFootballIcon.JPG"/>
    </div>
</div>​ 
```

Javascript：

```
$(document).ready(function() {
  // the same as yours.
  function rotateOnMouse(e, pw) {
      var offset = pw.offset();
      var center_x = (offset.left) + ($(pw).width() / 2);
      var center_y = (offset.top) + ($(pw).height() / 2);
      var mouse_x = e.pageX;
      var mouse_y = e.pageY;
      var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
      var degree = (radians * (180 / Math.PI) * -1) + 100;
      //            window.console.log("de="+degree+","+radians);
      $(pw).css('-moz-transform', 'rotate(' + degree + 'deg)');
      $(pw).css('-webkit-transform', 'rotate(' + degree + 'deg)');
      $(pw).css('-o-transform', 'rotate(' + degree + 'deg)');
      $(pw).css('-ms-transform', 'rotate(' + degree + 'deg)');
  }

  $('.drop div img').mousedown(function(e) {
    e.preventDefault(); // prevents the dragging of the image.
    $(document).bind('mousemove.rotateImg', function(e2) {
      rotateOnMouse(e2, $('.drop div img'));
    });
  });

  $(document).mouseup(function(e) {
    $(document).unbind('mousemove.rotateImg');
  });
}); 
```

演示：http: [//jsfiddle.net/rwBku/13/](http://jsfiddle.net/rwBku/13/)

我使用了 jquery 的[命名空间事件](http://docs.jquery.com/Namespaced_Events)，因此您可以只取消绑定您想要的 mousemove 事件。

请注意，图像的旋转是错误的，但我真的没有看那个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T09:36:57.630

我认为这个堆栈溢出问题回答了您的问题[如何在 mousemove 完成后触发 mouseup](https://stackoverflow.com/questions/1909760/how-to-get-mouseup-to-fire-once-mousemove-complete)

诀窍是在 mousedown 事件中“封装”mousemove 和 mouseup 事件。

# python - Python 语法错误：无效语法 - if-codesyntax 似乎是正确的

> ID：11051677
> 
> 赞同：0
> 
> 时间：2012-06-15T13:33:53.423
> 
> 标签：python, html, web-scraping, python-requests

我正在使用请求来抓取网站。html 的内容成功保存在变量 r 中，但在 if 语句中我得到了上述错误

```
[...]
for line in r:  
    link = re.findall(r ("""onclick="window.location.href='([^'])'""",line)
    if link: 
        print ('something')
        cmd = ('some commands to get info page') 
        call(cmd,shell=True)

        download = re.sub(something)
        cmd = ('some commands to download the file') 
        call(cmd,shell=True)
r.close() 
```

我在文档中查找了它，语法似乎是正确的。然后我怀疑错误是在之前的行中。这里我搜索带有短语*onclick="window.location.href='*的行，并希望处理它后面的链接（在之后的代码中）。 () 封装的部分应该是返回的内容，对吧？

有人看到错误吗？在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:37:08.167

也许是括号？

```
#                1  2                                                 2                   
link = re.findall(r ("""onclick="window.location.href='([^'])'""",line) 
```

您似乎忘记关闭 findall 的支架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:42:20.450

您似乎有不匹配的括号和不匹配的引号。下面，我把它们排成一行。这是否按预期工作？

```
#                1  2                                  3    3           21
#                    123        4                              4321
link = re.findall(r ("""onclick="window.location.href='([^'])'\"""",line)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:45:28.547

如果您将模式与自己的行分开，那么很明显问题实际上只是引用之一。尝试像这样分开它：

```
for line in r:
    pattern = r"onclick=\"window.location.href='([^'])'"
    link = re.findall(pattern, line) 
```

# c# - WCF：程序化设置端点

> ID：11051678
> 
> 赞同：0
> 
> 时间：2012-06-15T13:33:55.797
> 
> 标签：c#, .net, wcf

我正在尝试以编程方式设置 WCF 连接的端点。

我一直没能，下面是我正在使用的代码有人帮助识别出了什么问题？

```
 Uri wsBaseAddress = new Uri("http://localhost:27198/");

        ServiceHost host = new ServiceHost(typeof(ServiceClient), wsBaseAddress);

        WSHttpBinding wshttpbinding = new WSHttpBinding();

        host.AddServiceEndpoint(typeof(IService), wshttpbinding, "ServiceClient");
        host.AddServiceEndpoint(typeof(IService), wshttpbinding,
           "http://localhost:27198/Service.svc");

        host.Open(); 
```

**编辑：**

> 错误：HTTP 无法注册 URL“http://+:27198/”，因为 TCP 端口 27198 正在被另一个应用程序使用。”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:41:37.290

> HTTP 无法注册 URL“http://+:27198/”，因为另一个应用程序正在使用 TCP 端口 27198。”

这几乎说明了一切。当前有另一个应用程序正在侦听该端口，并且由于在给定时刻只有一个应用程序可以绑定到给定端口和 IP，因此您的程序不能。

执行`netstat -abn`进去`cmd`看看哪个程序最有可能是 ASP.NET Development Server。

如果没有其他程序绑定到该端口，您可以尝试以管理员身份运行 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:42:05.353

您下面的语句没有提供服务名称，尽管它没有在最后一条语句中使用添加端点

```
 Uri wsBaseAddress = new Uri("http://localhost:27198/"); 
```

它应该是

```
 Uri wsBaseAddress = new Uri("http://localhost:27198/Service"); 
```

您必须提供服务名称而不是带有扩展名的服务文件名

改变

```
host.AddServiceEndpoint(typeof(IService), wshttpbinding,
           "http://localhost:27198/Service.svc"); 
```

至

```
 host.AddServiceEndpoint(typeof(IService), wshttpbinding,
           "http://localhost:27198/Service"); 
```

# asp.net - 中继器中只有一个单选按钮选择

> ID：11051683
> 
> 赞同：4
> 
> 时间：2012-06-15T13:34:09.603
> 
> 标签：asp.net, radio-button, repeater

我只想选择一个单选按钮，但我不能这样做。这是我的代码：

```
<asp:Repeater ID="Repeater_secenekler" runat="server" DataSource='<%#Eval("Secenekler")%>'>
   <HeaderTemplate>
       <table>
   </HeaderTemplate>
   <ItemTemplate>
       <tr>
           <td style="margin-left: 20px;">
               <asp:CheckBox ID="CheckBox" runat="server" Text='<%#Eval("OptionName")%>' Visible='<%# Eval("TypeId").ToString() == "1" %>' />
               <asp:RadioButton ID="RadioButton" runat="server" Text='<%#Eval("OptionName")%>' Visible='<%# Eval("TypeId").ToString() == "2" %>'
                    GroupName="RadioButtonGrup" />
           </td>
       </tr>
   </ItemTemplate>
   <FooterTemplate>
       </table>
   </FooterTemplate>
</asp:Repeater> 
```

我可以选择所有具有相同组名的单选按钮，但我不想要这个。我只想要一个选择。

我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T13:40:42.947

这是使用 RadioButtons 的 ASP.NET 中继器的一个众所周知的错误：

[http://support.microsoft.com/default.aspx?scid=kb;en-us;Q316495](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q316495)

这里有一个修复：

[http://www.ifinity.com.au/Blog/EntryId/87/Simple-fix-for-Radio-Button-controls-in-an-ASP-NET-Repeater-using-jQuery](http://www.ifinity.com.au/Blog/EntryId/87/Simple-fix-for-Radio-Button-controls-in-an-ASP-NET-Repeater-using-jQuery)

```
jQuery("[name$='$optValue']").attr("name",jQuery("[name$='$optValue']").attr("name"));

jQuery("[name$='$optValue]").click(function (){ 
                //set name for all to name of clicked 
                jQuery("[name$='$optValue]").attr("name", this.attr("name")); 
            }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-13T08:20:53.247

只是对上述答案的快速修复，因此在执行脚本时不会出现任何错误。

```
 $(function () {
    $('[name$="$YourGroupName"]').attr("name", $('[name$="$YourGroupName"]').attr("name"));

    $('[name$="$YourGroupName"]').click(function () {
        //set name for all to name of clicked 
        $('[name$="$YourGroupName"]').attr("name", $(this).attr("name"));
    });
}); 
```

# facebook - 在沙盒模式下使用 Facebook Open Graph，我作为管理员发布的操作是否应该显示在我的墙上？

> ID：11051687
> 
> 赞同：0
> 
> 时间：2012-06-15T13:34:16.997
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试使用 Facebook Open Graph。我已经定义了一个应用程序。我已经设置了一个动作和一个对象（“cook”和“recipe”）。我已经为其中一个对象建立了一个网页，其中包括所需的所有元数据。我现在正在尝试使用 cURL 在我的墙上发布一些测试项目（使用打开图形设置页面上的操作单击获取代码时它为您提供的示例命令）。

当我只是发出一个命令来“烹饪”一个“食谱”，而不添加评论或任何内容时，该命令似乎有效，我可以在调试器中查看返回的 ID。在我的个人资料中，该项目出现在右侧边栏中，但没有出现在我的墙上或我自己的新闻源中。

当我发出命令来烹饪食谱并给它一张用户生成的照片时，该命令似乎再次起作用并返回一个 ID，我再次可以在调试器中查看该 ID，它看起来不错，但这个没有t 出现在任何地方：不在侧边栏中，不在新闻提要中，不在我的墙上。

权限方面，我使用的是我自己的用户帐户，这是应用程序的管理员帐户。在开发者网站的应用中心选项卡上，我的应用`publish_actions`在“权限”部分的“用户和朋友权限”下。

这是我正在使用的命令：

```
curl -F 'access_token=<token>' 
-F 'recipe=<urlOfRecipe>' 
-F 'image[0][url]=<urlOfUserImage>' 
-F 'image[0][user_generated]=true' 
-F 'message=Look at my cake!' 
'https://graph.facebook.com/me/mynamespace:cook' 
```

那么有什么关系呢？是不是因为我处于沙盒模式而无法正常工作？（我认为沙盒模式的东西仍然会显示给我，只是不会显示给其他任何人。）是因为该操作尚未获得批准吗？还是我做错了什么？

我的个人资料没有使用 Facebook 时间线是否会有所不同？

我怎么知道，当这一切都上线时，我的应用程序将能够发布将出现在用户新闻提要中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T23:55:19.460

我相信我刚刚遇到了这个问题-您是否遇到这样的错误？

```
{"error"=>{
  "code"=>1611165,
  "type"=>"Exception",
  "message"=>"Application with ID 179189035473500 has not been
              granted the capability to use the property message."}} 
```

如果您删除消息参数，它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:27:01.893

我认为您在这里寻找的功能是[显式共享](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)。

这是 Open Graph 功能的一个子集，允许您将提要故事作为一阶项目发布。就像页面说的那样，它并不适合所有东西，但似乎适合用户想要有意分享的照片。

据我了解，这些 Open Graph 故事实际上会比标准提要帖子获得*更多*可见性，因为它们可以被视为单独的对象。

如果发布是自动发生的（取决于 UI 流程），则特定操作可能不会被批准用于显式共享权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:19:52.233

它们都应该出现在您的活动日志中，但与动态发布（如提要故事）相比，Open Graph 操作的分布较低。

如果没有时间线，大部分分布可能会丢失，因为时间线上没有聚合单元，单个操作的新闻提要分布不太可能，但您的调用肯定会导致活动日志中出现某些内容，并且您返回的帖子 ID 应该可从 API 中检索以验证详细信息`/ACTION_ID`

# intellij-idea - 如何使从源滚动功能始终启用？

> ID：11051692
> 
> 赞同：130
> 
> 时间：2012-06-15T13:34:43.910
> 
> 标签：intellij-idea

如何在 IntelliJ IDEA 中启用“从源滚动”以使其始终处于打开状态，这意味着如果您打开任何文件，它会自动显示在项目视图中，同样它是在 Eclipse 中制作的？

可以单击 Project 中的按钮来查找所选文件，但每次打开另一个文件时单击它会很烦人。

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-06-15T13:43:15.110

您可以检查`Autoscroll from source`项目窗格的设置（在最新版本中可能是不同的图标）

![在此处输入图像描述](../Images/1d7c91eb32256882fee4b91f8b19a009.png)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-10-14T12:12:45.057

不幸的是，每次打开或创建新项目时都必须勾选此设置。

如果您希望此设置在项目之间保持不变，您可以使用此插件：

[AutoScroll 保存 IntelliJ 插件](https://plugins.jetbrains.com/plugin/7575?pr=idea)

免责声明：我是插件作者。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-24T05:54:47.030

从版本 2019.3.1 开始，选项的名称已更改如下：

自动滚动到源 - >单击打开文件

从源自动滚动 -> 始终选择打开的文件

功劳将归于[这篇文章](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006983339-Autoscroll-to-Source)。希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-31T04:24:51.650

我使用的是 2019.3，但在设置中找不到齿轮图标、自动滚动或打开文件。

经过 30 分钟的搜索，这就是我所做的。

1.  右键单击项目
2.  启用“单击打开文件”

[![在此处输入图像描述](../Images/3424aefcf91777046686e8fbd628dd16.png)](https://i.stack.imgur.com/QvMTm.jpg)

# arrays - PowerShell 排序字符串数组，其中每个元素由两个字段组成，按第二个字段

> ID：11051694
> 
> 赞同：1
> 
> 时间：2012-06-15T13:35:08.103
> 
> 标签：arrays, sorting, powershell

我有一个数组，里面填充了这样的字符串（SHA256 校验和和用分号分隔的相对路径）：

```
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855;./zzz.txt
d0c4c3e65c450251e44ec41c3c6ee0ea456d02bd74f041c9299934176ec325e6;./kkk.xlsx
9a1d469cdc7c2072b19a7e483a818c5e4e9de070298c60b34de29930e7b79209;./árvíztűrő tükörfúrógép/kkk - Shortcut.lnk 
```

我想按第二列对这些行进行排序。所以排序后的数组应该是这样的：

```
9a1d469cdc7c2072b19a7e483a818c5e4e9de070298c60b34de29930e7b79209;./árvíztűrő tükörfúrógép/kkk - Shortcut.lnk
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855;./zzz.txt
d0c4c3e65c450251e44ec41c3c6ee0ea456d02bd74f041c9299934176ec325e6;./kkk.xlsx 
```

没有标题和内容，唯一的就是`;`分隔字段的分号 ( ) 字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:12:23.447

在变量中使用数组：

```
 $a | sort  {$_  -replace  "(.*;\./)", ''} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:39:53.317

将内容转换为 csv 格式，通过分号分隔符解析内容，添加标题并按 Path 属性对输出进行排序：

```
@"
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855;./zzz.txt
d0c4c3e65c450251e44ec41c3c6ee0ea456d02bd74f041c9299934176ec325e6;./kkk.xlsx
9a1d469cdc7c2072b19a7e483a818c5e4e9de070298c60b34de29930e7b79209;./árvíztűrő tükörfúrógép/kkk - Shortcut.lnk
"@ | ConvertFrom-Csv -Header Checksum,Path -Delimiter ';' | Sort-Object Path

Checksum                                                                   Path                                                                      
--------                                                                   ----                                                                      
9a1d469cdc7c2072b19a7e483a818c5e4e9de070298c60b34de29930e7b79209           ./árvíztűrő tükörfúrógép/kkk - Shortcut.lnk                               
d0c4c3e65c450251e44ec41c3c6ee0ea456d02bd74f041c9299934176ec325e6           ./kkk.xlsx                                                                
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855           ./zzz.txt 
```

# mysql - 优化 MySQL NOT IN 查询

> ID：11051696
> 
> 赞同：1
> 
> 时间：2012-06-15T13:35:13.843
> 
> 标签：mysql

我有一个基于以下 sql 查询生成的下拉列表：

```
 SELECT * FROM product WHERE 
    product.id NOT IN (SELECT customer_1.product_id FROM customer_1 WHERE (customer_1.product_id != '$x'))
AND product.id NOT IN (SELECT customer_2.product_id FROM customer_2 WHERE (customer_2.product_id != '$x'))
AND product.id NOT IN (SELECT customer_3.product_id FROM customer_3 WHERE (customer_3.product_id != '$x')); 
```

这里出现的问题是执行时间。此查询本身需要大约 5.3 秒。我在同一页面上有几个其他类似的查询。

我的问题是：有没有更好更快的方法来达到同样的结果？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:38:42.800

您可能会从 s 获得更好的性能，在连接（表）`LEFT JOIN`的右侧寻找 NULL 。`customer_*`如果我理解你的目标，这应该可以完成工作：

```
SELECT
  products.*
FROM
  products
  LEFT JOIN customer_1 ON products.id = customer_1.product_id
  LEFT JOIN customer_2 ON products.id = customer_2.product_id
  LEFT JOIN customer_3 ON products.id = customer_3.product_id
WHERE
  products.id != '$x'
  AND customer_1.product_id IS NULL
  AND customer_2.product_id IS NULL
  AND customer_3.product_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:39:11.020

您可能应该使用`NOT EXISTS`. 使用正确索引的表，这种情况可以明显更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:40:07.023

```
 SELECT * FROM product Left join (SELECT customer_1.product_id FROM customer_1 WHERE (customer_1.product_id != '$x')) as t1 Left join (SELECT customer_2.product_id FROM customer_2 WHERE (customer_2.product_id != '$x')) as t2 left join (SELECT customer_3.product_id FROM customer_3 WHERE customer_3.product_id != '$x')) as t3
And t3.product_id is null and t1.product_id is null and t2.product_id is null 
```

# jsp - 使用 MVC 时如何防止用户直接访问 servlet

> ID：11051697
> 
> 赞同：0
> 
> 时间：2012-06-15T13:35:14.327
> 
> 标签：jsp

我正在使用带有玻璃鱼 v2 的 netbeans。我用两个jsp文件和一个servlet做了一个项目。这是我的文件结构

![项目结构](../Images/0863c70c2e8d8a59093e4d6e487efd0e.png)

这是我的 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
<servlet>
    <servlet-name>ShoppingServlet</servlet-name>
    <servlet-class>pk.mazars.basitMahmood.eBookShopping.ShoppingServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ShoppingServlet</servlet-name>
    <url-pattern>/ShoppingServlet</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

现在如果我在浏览器中写`http://localhost:11747/eBookShop/`，那么它会打开第一页，如果我写`http://localhost:11747/eBookShop/ShoppingServlet`，那么它仍然会打开第一页。如何防止用户直接访问我的 servlet。我试图通过右键单击它然后选择新包在WEB-INF中制作一个包，但它仍然在Source Packages中创建新包。如何防止直接访问 servlet？

谢谢

编辑

* * *

![在此处输入图像描述](../Images/468ea0aee5acdc4ca4577443d8d54f39.png)

# django - 如何整合脸书用户帐号？

> ID：11051699
> 
> 赞同：-5
> 
> 时间：2012-06-15T13:35:26.287
> 
> 标签：django, facebook

我正在建立一个新网站[在 django 中]，我想在其中将特定用户的 facebook 帐户集成到网站中 [当他/她正在注册时]。你能建议我如何将它集成到我的网站中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:11:23.293

如果您只在寻找 facebook，请查看[django-facebook](https://github.com/tschellenbach/Django-facebook)。它具有良好的FB集成。

# vb.net - VB.NET 如何强制 Asc 在非英文系统上使用英文代码页

> ID：11051700
> 
> 赞同：2
> 
> 时间：2012-06-15T13:35:27.233
> 
> 标签：vb.net, codepages

在 VB.NET 中，我想模拟一种“强制”ASC 函数使用英语代码页的方法，即使在“非 unicode 语言”与英语不同的系统上也是如此。

例如：

```
Asc("Œ") 
```

在将“非 unicode 语言”设置为英语的系统上，当前结果为 140

在将“非 unicode 语言”设置为斯洛伐克语的系统上，当前结果为 79

扭曲是我不能使用 AscW（因为我不能透露的原因）

在上面的特定示例中，我需要代码始终返回 140。

* * *

如果有办法强制整个程序使用英文代码页，我也可以使用它。

我试过玩 CurrentCulture：

```
Threading.Thread.CurrentThread.CurrentCulture = New Globalization.CultureInfo("en-US")
Threading.Thread.CurrentThread.CurrentUICulture = New Globalization.CultureInfo("en-US") 
```

就在 Asc 之前，甚至是 ApplicationEvent 启动的第一行，但没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:20:51.907

通过使用 ILSpy，看起来 Asc 使用 Encoding.Default 来获取操作系统的默认编码以确定如何获取字节。所以你必须自己动手：

```
 Dim enc As System.Text.Encoding = System.Text.Encoding.GetEncoding(1252)   '1252 is the default codepage on US Windows
    Dim arr() As Byte = enc.GetBytes("Œ")
    MessageBox.Show(arr(0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:12:46.353

我不确定如何控制 ASC 使用的代码页，因此这不能直接回答您的问题，但我建议您使用 Encoding 类来执行 ASCII 编码和解码。该`Asc`方法主要是为了向后兼容 VB6 代码。例如，要使用旧的 IBM 英语代码页 (437) 获取 ASCII 值，您可以这样做：

```
Public Function EnglishAsc(ByVal Text As String) As Byte
    Dim enc As Encoding = Encoding.GetEncoding(437)
    Dim bytes As Byte() = enc.GetBytes(Text)
    If bytes.Length > 0 Then
        Return bytes(0)
    Else
        Return 0
    End If
End Function

Public Function EnglishAsc(ByVal Character As Char) As Byte
    Dim enc As Encoding = Encoding.GetEncoding(437)
    Dim bytes As Byte() = enc.GetBytes(New Char() {Character})
    If bytes.Length > 0 Then
        Return bytes(0)
    Else
        Return 0
    End If
End Function 
```

# c# - How to view the values stored in a list?

> ID：11051704
> 
> 赞同：6
> 
> 时间：2012-06-15T13:35:31.827
> 
> 标签：c#, list, contains

I am trying to learn how to use lists in C#. There are a lot of tutorials out there, but none of them really explain how to view a list that contains a record.

Here is my code:

```
class ObjectProperties
{
    public string ObjectNumber { get; set; }
    public string ObjectComments { get; set; }
    public string ObjectAddress { get; set; }
}

List<ObjectProperties> Properties = new List<ObjectProperties>();
ObjectProperties record = new ObjectProperties
    {
        ObjectNumber = txtObjectNumber.Text,
        ObjectComments = txtComments.Text,
        ObjectAddress = addressCombined,
    };
Properties.Add(record); 
```

I want to display the values in a messagebox. Right now I am just making sure the information is going into the list. I also want to learn how to find a value in the list and get the other information that is related to it, such as, I want to find the item by the Object Number and if it is in the list then it will return the address. I am also using WPF, if that makes a difference. Any help will be appreciated. Thank You.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:43:22.450

The best way is to override `ToString` in your class and use [`string.Join`](http://msdn.microsoft.com/en-us/library/dd783876) to join all your records:

```
var recordsAsString = string.Join(Environment.NewLine, 
            Properties.Select(p => p.ToString()));
MessagBox.Show(recordsAsString); 
```

Here's a possible implementation of `ToString`:

```
class ObjectProperties
{
    public string ObjectNumber { get; set; }
    public string ObjectComments { get; set; }
    public string ObjectAddress { get; set; }

    public override string ToString() 
    {
        return "ObjectNumber: " 
              + ObjectNumber 
              + " ObjectComments: " 
              + ObjectComments 
              + " ObjectAddress: " 
              + ObjectAddress;
    }
} 
```

> I also want to learn how to find a value in the list and get the other information that is related to it, such as, I want to find the item by the Object Number and if it is in the list then it will return the address.

There are several ways to search a `List<T>`, here are two:

```
String numberToFind = "1234";
String addressToFind = null;
// using List<T>.Find method
ObjectProperties obj = Properties.Find(p => p.ObjectNumber == numberToFind);
//using Enumerable.FirstOrDefault method (add using System.Linq)
obj = Properties.FirstOrDefault(p => p.ObjectNumber == numberToFind);
if (obj != null)
    addressToFind = obj.ObjectAddress; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:42:24.427

To display the items in a list, you can iterate over the list and get the information out of it.

```
StringBuilder sb = new StringBuilder();

foreach (ObjectProperties op in Properties) 
{
    sb.Append(op.ObjectNumber + "\n");
}

sb.ToString(); // show this in messagebox 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:42:33.033

Depends on what you want to do.

If you want to try to find some data, use this code:

```
List<ObjectProperties> Properties = new List<ObjectProperties>();
var result = Properties.Where(n => n.ObjectNumber.Equals('yourVariableHere')); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:43:26.290

`List<T>` class implements `IEnumerable<T>`, which allows you to use a whole bunch of very useful methods for querying the list.

I'd recommend taking a look at the MSDN documentation of [`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) and [`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx). Go through available methods and see the examples. If you have any specific questions, come back to SO.

Here's how you can accomplish what you asked as an example:

```
string address = myList
                 .Where(x=>x.ObjectNumber=="A123")
                 .Select(x=>x.ObjectAddress)
                 .First(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T13:40:58.993

Once you have your list you can loop through it using a foreach loop and output the values that way.

You can also use linq to query your list and return the values you want.

For example:

```
 properties.Where(x=>x.ObjectNumber == 10).FirstOrDefault() 
```

This would return the first record where the ObjectNumber was 10.

Let me know if you need more clarification.

# php - 从PHP中的foreach中排除以'#'开头的数组键？

> ID：11051707
> 
> 赞同：2
> 
> 时间：2012-06-15T13:35:58.837
> 
> 标签：php, arrays, foreach

我有一个 Drupal 表单数组，它使用前缀“#”来表示给定的数组键包含元数据而不是实际值。除了键以“#”开头的元素之外，如何循环遍历所有数组元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:37:23.213

```
foreach( $array as $key => $value ) {
    if( $key[0] === "#" ) {
        continue;
    }

    //Do work
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:37:48.230

当当前键以 a 开头时，您可以使用[`continue`](http://php.net/manual/en/control-structures.continue.php)它跳到循环中的下一个迭代`#`。获取第一个字符的一种方法是使用[`substr()`](http://php.net/manual/en/function.substr.php).

```
foreach ($array as $key => $value) {
    if (substr($key, 0, 1) === '#') continue;
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:43:46.330

尝试这个：

```
<?php
function deleteElements(&$v, $k) {
   global $newArray;

   if(substr($k, 0, 1) !== '#') {
      $newArray[$k] = $v;
   }
}

$arr = array('as'=>'Test','#df'=>'this will not come','gh'=>'no test','#e'=>'again!');
$newArray = array(); // this will contain non-metadata keys
array_walk( $arr, 'deleteElements' );

//$newArrayis now..
$newArray = array('as'=>'Test','gh'=>'no test');
?> 
```

希望这可以帮助。

# django - 如何使用 django orm 获取消息的所有收件人？

> ID：11051708
> 
> 赞同：3
> 
> 时间：2012-06-15T13:35:59.907
> 
> 标签：django, orm

我正在努力处理一个无法转换为 django orm 的复杂查询。

我正在发送消息。每条消息都可以发送给收件人和/或收件人组。我需要获取给定消息的所有收件人的列表，并且我不希望列表中有任何重复项（同一用户可以在不同的组中）。

到目前为止，这是我的模型：

```
class Contact(models.Model):
    email = models.EmailField(_('Email'), null=True, blank=True)
    groups = models.ManyToManyField('Group', related_name='members', null=True,
                                    blank=True, verbose_name=_('Groups'))

class Group(models.Model):
    name = models.CharField(_('Name'), max_length=50)

class Message(models.Model):
    body = models.TextField(_('Body'))
    recipients = models.ManyToManyField('contacts.Contact',
                                        null=True, blank=True,
                                        related_name='messages',
                                        verbose_name=_('Recipients'))
    groups = models.ManyToManyField('contacts.Group',
                                    null=True, blank=True,
                                    related_name='messages',
                                    verbose_name=_('Groups')) 
```

你能想出一个聪明的方法来做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:42:31.590

使用[Q 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)，以便您可以选择作为组的一部分发送消息的联系人以及作为同一查询集中的单个收件人的联系人。

然后使用[`distinct()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)，以免重复。

如果您不熟悉双下划线表示法（例如），请参阅[有关“向后”关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)`groups__messages`的文档。

把它们放在一起，你有：

```
message = message.objects.get(id=message_id)
Contact.objects.filter(Q(groups__messages=message)|Q(messages=message)).distinct() 
```

您可能希望将上述查询封装在 Message 模型上的方法中：

```
class Message(models.Model):
    # field definitions

    def get_recipients(self):
        return Contact.objects.filter(Q(groups__messages=message)|Q(messages=message)).distinct() 
```

然后在您看来，您可以简单地编写`message.get_recipients()`.

# php - 解析sql查询PHP

> ID：11051711
> 
> 赞同：5
> 
> 时间：2012-06-15T13:36:11.240
> 
> 标签：php, sql, parsing

我想将 SQL 查询解析为数组。我无法弄清楚代码。

例子：

```
$sql_query = "SELECT id, login, pass FROM users WHERE id=3, login=faforty ORDER DESC LIMIT 3"'; 
```

这个sql查询应该如下：

```
$data = array();
$data['select'] = array('id', 'login', 'pass');
$data['from'] = array('id' => 3, 'login' => 'faforty');
$data['order'] = 'desc';
$data['limit'] = 3; 
```

查询可能不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T13:47:10.330

使用 SQL 解析器。[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)

[从此示例](http://code.google.com/p/php-sql-parser/wiki/ParserManual#simple_example)中复制粘贴：

```
<?php
  require_once('php-sql-parser.php');
  $parser=new PHPSQLParser('SELECT a FROM some_table an_alias WHERE d > 5;', true);

  print_r($parser->parsed); 
```

示例输出：

```
Array
(
    [SELECT] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [alias] => 
                    [base_expr] => a
                    [sub_tree] => 
                    [position] => 8
                )

        )

    [FROM] => Array
        (
            [0] => Array
                (
                    [expr_type] => table
                    [table] => some_table
                    [alias] => Array
                        (
                            [as] => 
                            [name] => an_alias
                            [base_expr] => an_alias
                            [position] => 29
                        )

                    [join_type] => JOIN
                    [ref_type] => 
                    [ref_clause] => 
                    [base_expr] => some_table an_alias
                    [sub_tree] => 
                    [position] => 18
                )

        )

    [WHERE] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [base_expr] => d
                    [sub_tree] => 
                    [position] => 45
                )

            [1] => Array
                (
                    [expr_type] => operator
                    [base_expr] => >
                    [sub_tree] => 
                    [position] => 47
                )

            [2] => Array
                (
                    [expr_type] => const
                    [base_expr] => 5
                    [sub_tree] => 
                    [position] => 49
                )

        )

) 
```

# java - 将 SelectionListener 添加到 SWT 浏览器

> ID：11051714
> 
> 赞同：0
> 
> 时间：2012-06-15T13:36:29.153
> 
> 标签：java, swt, listener, eclipse-rap

我正在我的 RAP 应用程序 (1.5M7) 中实现一个广告部分。为了展示广告，我使用了[SWT Browser](http://git.eclipse.org/c/rap/org.eclipse.rap.git/tree/bundles/org.eclipse.rap.rwt/src/org/eclipse/swt/browser/Browser.java?id=7302fa89b4e433f1d3d9f7934ce338e552966eee)。如何检测用户在浏览器（广告）上的点击，以便能够将他转发到链接页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:38:37.263

如果您从外部服务器加载 html，出于安全原因，您将无法获得点击。您必须创建一个 html 文档（作为字符串）直接加载 gif/flash 对象（不使用 iframe），并使用 setText 设置该文档。然后您可以使用 BrowserFunction 实例获得点击。对于 gif，这很简单：`<img src="your_ad.gif" onclick="your_browser_function();">`. 我不知道如何从 Flash 对象中获得点击。

# c#-4.0 - 如何从存储过程中获取数据表？

> ID：11051716
> 
> 赞同：1
> 
> 时间：2012-06-15T13:36:45.717
> 
> 标签：c#-4.0, stored-procedures, oracle10g

我有一个以下存储过程：

```
create or replace
PROCEDURE "SP_UTILITIES_LOG"
(
p_utility_name IN varchar2,
p_r_object_id IN varchar2,
p_platform_name IN varchar2,
p_exported_file_path IN varchar2,
p_Is_binary IN number,
p_extraction_status IN varchar2,
p_extraction_error IN varchar2,
p_extraction_datetime IN VARCHAR2,
p_schema_name IN varchar,
p_publication_path IN varchar,
p_schema_tcm_id IN varchar,
p_component_tcm_id IN varchar,
p_component_name IN varchar,
p_loading_status IN varchar,
p_transformed_file_path IN varchar,
p_transformed_status IN varchar,
p_import_status IN varchar,
p_loading_error IN varchar,
p_transform_error IN varchar,
p_import_error IN varchar,
p_loading_datetime IN TIMESTAMP,
p_transform_datetime IN TIMESTAMP,
p_import_datetime IN TIMESTAMP

)
   IS  
   BEGIN

    IF(p_utility_name ='EXTRACTION')
    THEN
    BEGIN
   INSERT INTO utilities_log(R_OBJECT_ID,
PLATFORM_NAME,
EXPORTED_FILE_PATH,
IS_BINARY,
EXTRACTION_STATUS,
EXTRACTION_ERROR,
EXTRACTION_DATETIME
)
   VALUES(p_r_object_id, p_platform_name,p_exported_file_path, p_is_binary, p_extraction_status, p_extraction_error, p_extraction_datetime); 

    END;
    END IF;

    IF(p_utility_name ='LOADING')
    THEN
    BEGIN

    UPDATE UTILITIES_LOG SET schema_name=p_schema_name,
    publication_path= p_publication_path,
    schema_tcm_id= p_schema_tcm_id,
    component_tcm_id= p_component_tcm_id,
    component_name= p_component_name,
    loading_status= p_loading_status,
    loading_error= p_loading_error,
    loading_datetime= current_timestamp
    WHERE
    r_object_id= p_r_object_id;

    END;
    END IF;

    IF(p_utility_name ='PRE-TRANSFORMATION')
    THEN
    BEGIN
    SELECT exported_file_path,component_tcm_id FROM utilities_log
    WHERE
    platform_name= p_platform_name and loading_status=p_loading_status
    and extraction_status=p_extraction_status;

    END;
    END IF;

    IF(p_utility_name ='TRANSFORMATION')
    THEN
    BEGIN
    UPDATE UTILITIES_LOG SET 
    transformed_file_path= p_transformed_file_path,
    transformed_status= p_transformed_status,
    transform_error= p_transform_error,
    transform_datetime= current_timestamp
    WHERE
    exported_file_path= p_exported_file_path;

    END;
    END IF;

    IF(p_utility_name ='RETRIEVE')
    THEN
    BEGIN
    execute immediate 'create global temporary table temp_import as SELECT transformed_file_path,publication_path
    FROM utilities_log
    WHERE
    platform_name= p_platform_name';

    END;
    END IF;

    IF(p_utility_name ='IMPORTER')
    THEN
    BEGIN
    UPDATE UTILITIES_LOG SET 
    import_status=p_import_status,
    import_error=p_import_error,
    import_datetime=current_timestamp
    WHERE
    publication_path= p_publication_path;
    END;
    END IF;

   END; 
```

我收到错误“选择”语句中缺少“Into”子句...有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:45:23.697

```
IF(p_utility_name ='RETRIEVE') THEN
BEGIN
  execute immediate 'create global temporary table temp_import 
  as SELECT transformed_file_path,publication_path     
     INTO temp_import
     FROM utilities_log     
     WHERE platform_name= p_platform_name'
END     
END IF 
```

我认为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:52:53.227

正确的方法是（将一组查询结果从 sp 返回到 c#），是使用 oracle 提供的 Ref Cursor 类型。[你可以在这里](http://oradim.blogspot.co.il/2007/05/odpnet-tip-ref-cursors-and-fetchsize.html)和[这里](http://www.oracle.com/technetwork/articles/dotnet/williams-refcursors-092375.html)看到它是如何实现的

**编辑：**
它应该看起来像这样（我这里没有甲骨文，但你可以很容易地检查这个）：

```
create or replace PROCEDURE "SP_UTILITIES_LOG" ( 
p_utility_name IN varchar2, 
p_r_object_id IN varchar2, 
/* your other parameters */
p_refcur out sys_refcursor /* notice the out parameter */
)
AS
BEGIN
/* one sample from your select*/
IF(p_utility_name ='PRE-TRANSFORMATION')
 THEN     
 BEGIN     
      OPERN p_refcur FOR 
      SELECT exported_file_path,component_tcm_id FROM utilities_log     
      WHERE     platform_name= p_platform_name 
     AND        loading_status=p_loading_status      
     AND extraction_status=p_extraction_status;       
 END;     
 END IF; 
END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T15:30:15.333

错误消息与此有关：

```
IF(p_utility_name ='PRE-TRANSFORMATION')
THEN
BEGIN
SELECT exported_file_path,component_tcm_id FROM utilities_log
WHERE
platform_name= p_platform_name and loading_status=p_loading_status
and extraction_status=p_extraction_status;
END;
END IF; 
```

在 PL/SQL 块中，必须将数据选择到某些内容中，因此您需要声明一些变量，然后执行以下操作：

```
SELECT exported_file_path,component_tcm_id
INTO <local_exported_file_path_var>, <local_component_tcm_id_var>
FROM utilities_log
... 
```

然后，您可以在 SP 的其他地方使用这些变量，目前您似乎不需要这些变量，因此完全不确定您为什么要选择这些变量。或者具有`OUT`可以选择它们的参数，以便调用者可以访问它们，但您也没有这样做。

不应在 Oracle 中动态创建临时表，因此整个概念似乎很混乱。如果您尝试将数据表返回给调用者，那么正如@YavgenyP 所说，请查看 ref 游标。不太确定你想要做什么。

# java - 如果关联组件未呈现，是否可以调用 JSF Bean 的 Setter？

> ID：11051724
> 
> 赞同：1
> 
> 时间：2012-06-15T13:37:24.710
> 
> 标签：java, security, jsf, jakarta-ee

我有一个关于 JSF 安全性的问题。如果相关组件未呈现（例如使用 curl 之类的工具），攻击者是否有可能调用 JSF Bean 的 setter？或者这是否由 JSF 检查，以便我可以认为这是安全的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:31:08.273

只有当`rendered`条件依赖于 HTTP 请求附带的数据（如参数、标头、cookie 等）时，它才是可攻击的。整个 HTTP 请求完全由用户控制。

例如，如果您只检查登录用户的角色，那么它是安全的——当然，除非最终用户猜到具有所需角色的用户的正确用户名/密码并使用它登录。

# jquery - 通过单击按钮添加多个 DropDownLists

> ID：11051728
> 
> 赞同：2
> 
> 时间：2012-06-15T13:37:42.893
> 
> 标签：jquery, asp.net, drop-down-menu

结合使用 ASP.NET（使用 C#）和 jQuery，我尝试`DropDownList`使用按钮创建 s。这些`DropDownList`s 将使用 SQL 查询进行填充。

我遇到困难的部分是只需单击按钮即可添加多个。

如果用户单击该按钮 5 次，`DropDownList`则应该再创建 5 个并填充相同的数据。理想情况下，每个`DropDownList`都包含在表格的新行中，或者以类似的方式组织。

我不想在 JavaScript 中做任何 SQL 连接。对此有何建议？

**编辑：**

我试过使用一个`<asp:PlaceHolder>`，然后用它来添加一个`DropDownList`. 但是，我不知道如何使用此方法并添加多个：

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server"/>

protected void Add_Dropdownlist()
{
   DropDownList DropDownList1 = new DropDownList();
   PlaceHolder1.Controls.Add(DropDownList1);
} 
```

我尝试使用 jQuery 复制原始`DropDownList`. 我遇到的问题是，`DropDownList`如果它是`<asp:DropDownList>`. 如果我将其更改为 a `<select>`，我无法弄清楚如何使用来自 ASP（服务器）端的 SQL 数据填充它。

```
<select id="DropDownList1">
  <option value="-1"></option>
</select>

<asp:DropDownList ID="DropDownList2" runat="server"></asp:DropDownList>

function copy_Dropdownlist()
{
  newDropdownlist = jQuey.extend({}, DropDownList2);
} 
```

简而言之，我已经走了好几条路，但我认为其中任何一条都不对。我是 ASP.NET（谷歌教育）的新手，我认为问题在于链接客户端 jQuery 和服务器端 ASP.NET。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:54:11.883

（这是参考您的`<asp:PlaceHolder>`方法。我实际上将使用 an `<asp:Panel>`，因为这里似乎更合适）

看起来您遇到的问题是`DropDownList`s 不会在回发中持续存在。因此，每次您创建一个新的并将其添加到您的`PlaceHolder`中时，您仍然只会得到一个。

要解决此问题，您需要跟踪已创建的那些。在您的 s`Page_Load`中，您想为您`DropDownList`的 s 创建一个存储容器（我`List<>`为此使用 a）并将其保存在用户的“ `Session`”中。注意`!Page.IsPostBack`; 您只想创建一次（页面第一次加载，而不是每次回发）：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        List<DropDownList> DDLList = new List<DropDownList>();
        Session["DDLs"] = DDLList;
    }
} 
```

现在，当您单击按钮时，您可以

*   从您的变量中获取当前存在`DropDownList`的 s（如果有） ，`Session`
*   为该按钮添加新的单击到该列表
*   将您的所有`DropDownList`s 添加到`Panel`,
*   并将更新的列表保存回您的`Session`变量。

像这样：

```
protected void Button1_Click(object sender, EventArgs e)
{
    DropDownList newDropDown = new DropDownList();
    List<DropDownList> existingDropDowns = (List<DropDownList>)Session["DDLs"];
    existingDropDowns.Add(newDropDown);

    foreach (DropDownList dropdown in existingDropDowns)
    {
        Panel1.Controls.Add(dropdown);
    }

    Session["DDLs"] = existingDropDowns;
} 
```

我不确切知道您要完成什么，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:19:37.240

@jadarnel27

非常感谢您的帮助，它让我到达了我需要去的地方。我不得不做更多的工作来处理选择更改的帖子。这就是我最终得到的。

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack)
  {
      List<DropDownList> DDLList = new List<DropDownList>();
      Session["DDLs"] = DDLList;
  }
  else
  {
    List<DropDownList> existingDropDowns = (List<DropDownList>)Session["DDLs"];
    //Add all existing DropDownLists to Panel
    foreach (DropDownList dropdown in existingDropDowns)
    {
      Panel1.Controls.Add(dropdown);
      dropdown.AutoPostBack=true;
      Panel1.Controls.Add(new LiteralControl("<br/>"));
    }
    Session["DDLs"] = existingDropDowns;
  }
}

protected void Button_Click(Object sender, EventArgs e) 
{
  List<DropDownList> existingDropDowns = (List<DropDownList>)Session["DDLs"];
  DropDownList newDropDown = new DropDownList();        
  newDropDown.ID = "DDL" + existingDropDowns.Count.ToString();
  //Bind DropDownList to SQL Table
  Populate_List("mySQLTable", newDropDown, "");
  existingDropDowns.Add(newDropDown);
  //Add only new DropDownList to Panel
  Panel1.Controls.Add(newDropDown);
  newDropDown.AutoPostBack=true;
  Panel1.Controls.Add(new LiteralControl("<br/>"));
  Session["DDLs"] = existingDropDowns;
}

protected void clickSubmit(Object sender, EventArgs e)
{
  List<DropDownList> existingDropDowns = (List<DropDownList>)Session["DDLs"];
  foreach (DropDownList dropdown in existingDropDowns)
  {
      //Insert each DropDownList selected value into SQL Table
      ETS.Core.Db.Database.ExecuteNoLog("INSERT INTO myNewTable (id,text) VALUES ('" + dropdown.SelectedValue + "', '" + dropdown.SelectedItem  + "')");
  }
} 
```

再次感谢。

# jquery - 循环遍历json并显示多行

> ID：11051730
> 
> 赞同：0
> 
> 时间：2012-06-15T13:37:48.497
> 
> 标签：jquery, json

我对 JSON DATA 所做的工作很少，并且已经为此苦苦挣扎了好几天。

我的应用程序的一部分 [使用 jquery 数据表] 显示有关服务合同可用资金数量的信息。当我向下钻取时，我想查看对合同的所有修改。我正在使用 ajax 调用来获取这些数据。我已经成功地显示了单行返回的信息，但没有显示多行。

这是我到目前为止所拥有的

我的 JSON 数据 - 我还没有看到在任何地方的任何示例中使用过这样的数据集。

```
{"SUCCESS":true,
 "ERRORS":[],
 "DATA":{
    "COLUMNS":["REQNUM_ID",
               "PORDER_ID",
               "REQNUM",
               "AWARD_DTE",
               "AWARD_AMNT",
               "DTE_ENTERED",
               "ENTERED_BY",
               "DTE_MOD",
               "MOD_BY",
               "VALID_FLAG",
               "MOD_NUM",
               "DESCRIPTION",
               "PROCRGN"],
    "DATA":[
           [2,35,"144-12DG-261","October, 25 2011 00:00:00",2155.02,"March, 28 2012 00:00:00",48317,null,null,"Y",1,null,"DG"],
           [3,35,"144-12DG-264","November, 14 2011 00:00:00",0,"March, 28 2012 00:00:00",48317,null,null,"Y",2,null,"DG"],
           [4,35,"144-12DG-268","December, 09 2011 00:00:00",1000.00,"March, 28 2012 00:00:00",48317,null,null,"Y",3,null,"DG"]
           ]
 }
} 
```

我的代码：下面的代码实际上给了我两行而不是 3 行，但是，它的第一组数据重复了两次。

```
// the table containing the index data
var oTable_2 = "";
// the select row
var nTargetRow = "";
// 
//var poid = #CntModVal.porder_id#; //should from + column
//
var aData = ""; // holds the text for selected row (column position is critical)
/* -----------------------------------------------------------------------
Jquery Ajax action scrpts
----------------------------------------------------------------------- */
// Method retrieves the selected row index id and executes the ajax call
function getModDetails() 
{   
//alert('getModDetails');

// retrieve the data from the selected row
aData = oTable_2.fnGetData( nTargetRow );
//alert('adata[1]  ' + aData[1]);
  // build the url for the ajax call to use
var cfcUrl = '#application.ajax_url#';
    cfcUrl +='RemoteModDetails.cfc?';
    cfcUrl += 'method=getPos';
    cfcUrl +='&porderid=' + aData[1] ; // contract id

// make the ajax call
$.ajax(
     {
        type: "GET",
        url: cfcUrl,
        cache: false,
        contentType: "application/json; charset=utf-8",
        data: "{}",
        dataType: "json",
        success: function (objResponse )
            {   //alert('retrieve the data step 3');
               if(objResponse.SUCCESS)
                {  // alert('success');
                    openModDetailRow(objResponse.DATA);

                }
                else
                {
                    ShowErrors(objResponse.ERRORS);
                }
            },
        error : function(jqXHR, textStatus, errorThrown ) {
                ajaxErrorHandler( jqXHR, textStatus, errorThrown );
            }
    });
}

// Function ajaxErrorHandler
//    DESCRITPION:  Error Handler fir the error message for failed ajax call'
//    PARAMETERS:
//      jqXHR       = The jqXHR (in jQuery 1.4.x, XMLHttpRequest) object,
//      textStatus  = a string describing the type of error that occurred 
//                    and an optional exception object, if one occurred. 
//                    Possible values for the second argument (besides null) are 
//                    "timeout", "error", "abort", and "parsererror". 
//      errorThrown = the textual portion of the HTTP status, such as "Not Found" 
//                    or "Internal Server Error."
function ajaxErrorHandler( jqXHR, textStatus, errorThrown) 
{
alert('Unable to retieve the requested information due to a server error');
}
// Handle the failed response error
function ShowErrors( statusMsg)
{
alert('Unable to retieve the requested information. Status: ' + statusMsg);
} 
// create the indormation row based on the data retruned by the ajax call
function openModDetailRow(indexInfo)
{
var sOut = '<table align="left" width="95%" cellpadding="2" cellspacing="0" border="1" class="hiddenTbl ui-widget-content">';   
$.each(indexInfo, function(index,data){
/* Assumes only one row returns; additional rows ignored */
var aReqNumID         = indexInfo.DATA [0][0]; //requisition number id  Award amount
var aPorderID         = indexInfo.DATA [0][1]; // purchase order id 
var aRequistionNum    = indexInfo.DATA [0][2]; //  Requisition number description
var aAwardDte         = indexInfo.DATA [0][3]; // award date date entered
var  aAwardAmount     = indexInfo.DATA [0][4]; //  date modifified
var aDteEntered       = indexInfo.DATA [0][5]; //  entered by
var aEnteredBy        = indexInfo.DATA [0][6]; //   modified by 
var aDteMod           = indexInfo.DATA [0][7]; //   mod number
var aModBy            = indexInfo.DATA [0][8]; //   
var aValidFlag        = indexInfo.DATA [0][9]; //  
var aModNum           = indexInfo.DATA [0][10]; //  
var aDescription      = indexInfo.DATA [0][11]; //  valid flag

//alert('pop details step 4 '  + aPorderID +  ' poid');

// create the additonal information table

// row 1
    sOut += '<tr><td><strong>Mod Number:</strong><br> <strong     style="color:##FF0;">&nbsp;' + aModNum + '</strong></td>';
    sOut += '<td><strong>Requsition Numbeer:</strong><br> ' + aRequistionNum + '</td><td><strong> Award Amount:</strong><br> <strong style="color:##FF0;">$' + aAwardAmount.toFixed(2) + '</strong></td></tr>';
    // row 2
    sOut += '<tr><td ><strong>Award Date:</strong><br>' + aAwardDte + ' </td><td ><strong>Description:</strong><br> ' + aDescription + '</td><td> </td></tr>';
});
// end of table
sOut += '</table>';

// display the row
//alert(sOut);

    //alert(index,data);
    oTable_2.fnOpen( nTargetRow, sOut, 'details' );

}
/* -----------------------------------------------------------------------
 * Jquery Display scrpt
 * ----------------------------------------------------------------------- */
$(document).ready(function()
{//alert('insert details step 1');
/*
 * Insert a 'details' column to the table
 */
var nCloneTh = document.createElement( 'th' );   // for header
var nCloneThF = document.createElement( 'th' );  // for footer
var nCloneTd = document.createElement( 'td' );   // for body
nCloneTd.innerHTML = '<img src="./images/details_open.png">';
nCloneTd.className = "center";
// add blank header
$('##MVW thead tr').each( function () {
    this.insertBefore( nCloneTh, this.childNodes[0] );
} );
// add blank footer header
$('##MVW tfoot tr').each( function () {
    this.insertBefore( nCloneThF, this.childNodes[0] );
} );
// add icon open/close info rowrow
$('##MVW tbody tr').each( function () {
    this.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
} );
// run the jquery data table script
    oTable_2 = $('##MVW');
    oTable_2.dataTable({
        "aoColumnDefs": 
            [ { "bSortable": false, "aTargets": [ 0 ] } ],
        "aaSorting": [[1, 'asc']],
        "iDisplayLength": 5,
        "aLengthMenu": [[5,10, 25, 50, 100, -1], [5,10, 25, 50, 100, "All"]],
        "bJQueryUI": true
        });/* end data table */

/* Add event listener for opening and closing details
 * Note that the indicator for showing which row is open is not controlled by DataTables,
 * rather it is done here
 */
$('##MVW tbody td img').live('click', function () {
    nTargetRow = this.parentNode.parentNode;
    if ( this.src.match('details_close') )
    {   //alert('close row');
        /* This row is already open - close it */
        this.src = "./images/details_open.png";
        oTable_2.fnClose( nTargetRow );
    }
    else
    {
        //alert('open row step 2');
        this.src = "./images/details_close.png";
        getModDetails();
    }
} );

}); 
/* end ready */ 
```

所以我错过了一些东西，无法弄清楚它是什么。如果我将 .each() 放在表格标签之外，它会破坏代码，我什么也得不到。

如果我把它包裹起来:: oTable_2.fnOpen(nTargetRow, sOut, 'details');

我得到一个单行

建议？？？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:15:32.723

您有各种各样的错误，但最大的错误是您错误地使用了*each*语句。您正在使用每个语句进行迭代，因此您得到三个循环，但在内部您从不使用索引或语句中的数据。

尝试以下任一解决方案：

在您的每个语句中，您都在参数中获取索引，但从不使用它们。

```
for(var index = 0; index < indexInfo.DATA.DATA.length ; index++) {
    var aReqNumID         = indexInfo.DATA.DATA [index][0]; //requisition number id  Award amount
    var aPorderID         = indexInfo.DATA.DATA [index][1]; // purchase order id 
    var aRequistionNum    = indexInfo.DATA.DATA [index][2]; //  Requisition number description
    ... 
```

或者

```
$.each(indexInfo.DATA.DATA, function(){
    var aReqNumID         = this[0]; //requisition number id  Award amount
    var aPorderID         = this[1]; // purchase order id 
    var aRequistionNum    = this[2]; //  Requisition number description
    ... 
```

在第二条语句中，*this*对象是数组中的当前对象。

**编辑**更新了循环项目

# .net - Google Adwords API 细分问题

> ID：11051737
> 
> 赞同：2
> 
> 时间：2012-06-15T13:38:12.923
> 
> 标签：.net, reporting, google-ads-api

我正在使用 adwords api .NET 客户端库从帐户列表中获取例如印象。我想使用 API 中的“每小时”分段来获取数据。我知道可以使用 ReportingService，但也可以使用对 CampaignService 'get' 方法的“正常”调用。我知道选择器是如何工作的，我使用谓词，但我认为不可能这样。

有人有什么想法吗？下面是我目前使用的一些示例代码。这给了我每天的印象，但我希望那天每小时都有。

```
AdWordsUser adWordsUser = <GET USER INFO>
CampaignService campaignService = (CampaignService)adWordsUser.GetService(AdWordsService.v201109_1.CampaignService);
campaignService.RequestHeader.clientCustomerId = <CUSTOMERID>

Selector selector = new Selector();
selector.fields = new string[] { "Id", "Name", "Impressions" };

Predicate predicate = new Predicate();
predicate.field = "Impressions";
predicate.@operator = PredicateOperator.GREATER_THAN;
predicate.values = new string[] { "0" };
selector.predicates = new Predicate[] { predicate };

DateRange dateRange = new DateRange();
dateRange.min = DateTime.Now.AddDays(-1).ToString("yyyyMMdd");
dateRange.max = DateTime.Now.AddDays(-1).ToString("yyyyMMdd");
selector.dateRange = dateRange;

selector.paging = new Paging();
int offset = 0;
int pageSize = 500;

CampaignPage page = new CampaignPage();
selector.paging.startIndex = offset;
selector.paging.numberResults = pageSize;
page = campaignService.get(selector); 
```

# jquery-mobile - 我怎么知道下载何时完成？

> ID：11051741
> 
> 赞同：0
> 
> 时间：2012-06-15T13:38:26.497
> 
> 标签：jquery-mobile, cordova

今天我的问题是知道是否有办法知道何时完成使用查询移动设备将某些文件下载到本地设备。这是我在 for 循环中插入的代码

```
for(var id=0; id<100; id++){
    var ft = new FileTransfer();
    var dlPath = DATADIR.fullPath + "/" +id+".jpg";
    ft.download(reconstitutedObject['immagine'], dlPath, function(e){
    }, onError);
 }
 window.location.href="settori.html"; 
```

我的问题是，使用此代码，它可以正确下载文件，但是当我下载时，它会转到 settori.html 页面。我需要等待所有文件都已下载，然后转到 settori.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:59:13.890

尝试使用[async.js](https://github.com/caolan/async)使用此代码：

```
var i = 0;
async.whilst(
    function () { return count < 100; },
    function (callback) {
        count++;
        var ft = new FileTransfer();
        var dlPath = DATADIR.fullPath + "/" +id+".jpg";
        ft.download(reconstitutedObject['immagine'], dlPath, function(entry){
           console.log("File downloaded to " + entry.fullPath);
           callback(); // resume to next download    
        }, function(err){
           console.log("download error");
           callback(); // resume to next download
        });
    },
    function (err) {
        // all download complete
        window.location.href="settori.html";
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T10:07:43.803

尝试这个

```
for(var id=0; id<100; id++){
  var ft = new FileTransfer();
  var dlPath = DATADIR.fullPath + "/" +id+".jpg";
  ft.download(reconstitutedObject['immagine'], dlPath, function(e){
    if(id == 99) {
      window.location.href="settori.html";
    }
 }, onError);
} 
```

这可能会在一定程度上帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:46:21.457

在此代码的情况下：

```
$(data).find("vettura").each(function () {
        var id=$(this).attr("id");
        var immag=$(this).find("immagine").first().find("grande").text();

        if(immag!=""){
              var ft = new FileTransfer();
              var dlPath = DATADIR.fullPath + "/" +id+".jpg";
              ft.download(immag, dlPath, function(e){
                      //renderPicture(e.fullPath);
                      console.log("Successful download of "+e.fullPath);
               }, onError);                                                                 
         }
 });               

 window.location.href="index.html"; 
```

使用此代码，应用程序在文件下载时转到 index.html。我需要确保当转到 index.html 时所有文件都已下载。

# java - JSF：如何使用 selectOneRadio 立即更新支持 bean？

> ID：11051742
> 
> 赞同：0
> 
> 时间：2012-06-15T13:38:32.983
> 
> 标签：java, jsf

我有四个位置可供选择，显示为“selectOneRadio”。当我选择一个位置时，当我单击命令链接之一时，bean 会得到更新。

```
<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
    <ui:define name="content">
    <h:form>
    <h:commandLink action="#{wrapper.goBack}" value="GESTERN"></h:commandLink>
    ---------
    <h:commandLink action="#{wrapper.goForward}" value="MORGEN"></h:commandLink>
    <br />
    <h:selectOneRadio id="locationSelection" value="#{wrapper.actualLocation}" >
        <f:selectItems value="#{wrapper.allLocations}" var="actualLocation" ></f:selectItems>
    </h:selectOneRadio>
</h:form>    
</ui:define>
</ui:composition> 
```

当我想在单击单选按钮时立即更改支持 bean 时，我必须更改什么？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:46:09.643

要在单击时执行提交，您需要使用 Ajax。

对于 JSF 1.2，这意味着您需要为 JSF 使用众多 ajax 框架之一（如带有 A4J 的 Richfaces）。

对于 JSF 2.x，它是内置的。

```
<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
    <ui:define name="content">
    <h:form>
    <h:commandLink action="#{wrapper.goBack}" value="GESTERN"></h:commandLink>
    ---------
    <h:commandLink action="#{wrapper.goForward}" value="MORGEN"></h:commandLink>
    <br />
    <h:selectOneRadio id="locationSelection" value="#{wrapper.actualLocation}" >
        <f:selectItems value="#{wrapper.allLocations}" var="actualLocation" ></f:selectItems>
        <f:ajax event="click" />
    </h:selectOneRadio>
</h:form>    
</ui:define>
</ui:composition> 
```

这将在单击单选按钮后立即提交表单。您还可以指定要处理的字段以及要重新呈现的字段。

见： http: [//mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/](http://mkblog.exadel.com/2010/04/learning-jsf-2-ajax-in-jsf-using-fajax-tag/)

# javascript - 经纬度 (WGS84) 到多锥变换的转换

> ID：11051749
> 
> 赞同：2
> 
> 时间：2012-06-15T13:38:58.247
> 
> 标签：javascript, geolocation, gis, latitude-longitude

我是一名新手程序员，正在为智能手机开发基于 JavaScript 的 Web 应用程序。

应用程序使用 navigator.geolocation API 获取经度和纬度。

我需要一个基于 JavaScript 的函数来使用 Polyconic Transformation 将获得的位置转换为 Easting & Northing 以及我需要支持的“Everest - India 1830”基准面。同样需要一个反函数来将东/北转换为经度/纬度。

在互联网上进行研究后，我遇到了[proj4js](http://trac.osgeo.org/proj4js/)。但是，我无法非常清楚地了解所需转换的程序，也没有找到足够的文档。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:44:38.400

好的，使用 Spatialreference.org 的 REST 服务，您可以获得此投影的定义 (http://spatialreference.org/ref/sr-org/7345/proj4/)，结果是

```
+proj=poly +lat_0=33.625 +lon_0=77.375 +x_0=0 +y_0=0 +a=6377301.243 +b=6356100.228368102 +units=m +no_defs 
```

要使其与 proj4 一起工作，请在 defs/ 文件夹中创建一个定义文件，`SRORG7345.js`其中包含以下内容：

```
Proj4js.defs["SRORG7345"] = "+proj=poly +lat_0=33.625 +lon_0=77.375 +x_0=0 +y_0=0 +a=6377301.243 +b=6356100.228368102 +units=m +no_defs"; 
```

然后执行此操作以从 EPSG:4236 转换为您的新投影：

```
<html>
<Script src='proj4js-compressed.js'></script>
<script src='defs/EPSG4236.js'></script>
<script src='defs/SRORG7345.js'></script>
<script>
// creating source and destination Proj4js objects
// once initialized, these may be re-used as often as needed
var source = new Proj4js.Proj('EPSG:4236');    //source coordinates will be in Longitude/Latitude
var dest = new Proj4js.Proj('SRORG7345');     //IndiaPolyConic

var p = new Proj4js.Point(-76.0,45.0);   //any object will do as long as it has 'x' and 'y' properties
Proj4js.transform(source, dest, p);      //do the transformation.  x and y are modified in place

console.log(p);
</script>
</html> 
```

我注意到，根据 proj4js 项目页面，多锥转换“尚未针对任何测试点进行验证”，因此您可能需要对这些结果进行一些检查。

# silverlight - 将 App.xaml 样式移动到资源字典

> ID：11051750
> 
> 赞同：1
> 
> 时间：2012-06-15T13:39:00.927
> 
> 标签：silverlight, xaml, resources, app.xaml, application-resource

我有一个自定义控件，它使用在 app.xaml 中链接的资源字典中的样式。如果我关闭链接并将链接添加到包含控件的页面，它将不起作用。这是为什么？为什么我的控件（一个 dll）需要将样式放在 app.xaml 中，而不仅仅是在包含控件的页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:59:30.547

> 为什么我的控件（一个 dll）需要将样式放在 app.xaml 中，而不仅仅是在包含控件的页面上？

自定义控件需要默认样式。此默认样式在构造函数中设置。例如：

```
public CustomControl()
{
    DefaultStyleKey = typeof(CustomControl);
} 
```

设置后，它会在包含该样式的程序集中查找。如果控件位于应用程序中，则它会在 App.xaml 中查找。如果控件在类库中，它会在必须放置在文件夹“Themes”中的文件 Generic.xaml 中查找。您不需要将样式放置在这些文件中的任何一个中。您可以创建一个包含样式的单独文件，并从 App.xaml 或 Themes/Generic.xaml（基于控件的定义位置）引用它。为此，您在其中一个文件中创建一个 MergedDictionary。如果您的控件是在您的应用程序中定义的，您会这样做

```
<Application x:Class="MyApp.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!--Application Resources-->
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Controls/CustomControl.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    <Application.Resources>
</Application> 
```

如果您的控件是在类库中定义的，则 Themes/Generic.xaml 应如下所示

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/My.Custom.Assembly;component/FolderLocationOfXaml/CustomControl.xaml" />
    </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

无论您的自定义控件放置在何处，xaml 都将始终相同

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:My.Custom.Assembly.Controls">
        <Style TargetType="local:CustomControl">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:CustomControl">
                    <Grid>
                        <! -- Other stuff here -->
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

如果未定义此默认样式，则无法确定要覆盖的样式。一旦定义了默认样式，您就可以在您的应用程序或任何其他使用控件的地方更改样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:22:47.017

尝试将样式移动到控件中，以验证所有必需的引用都已到位，以便您的控件使用字典中的项目。确保包含您的 UserControl 的项目具有对包含资源字典的项目的引用。验证字典的源路径：

`<ResourceDictionary Source="/AssemblyName;component/StylesFolderName/ResourceDictionaryName.xaml" />`

# iphone - iOS App 窗口未初始化

> ID：11051754
> 
> 赞同：0
> 
> 时间：2012-06-15T13:39:17.180
> 
> 标签：iphone, objective-c, ios, cocoa, uiwindow

因此，在花了上周仔细设计和规划我的应用程序之后，收到了一个稍微改变它的请求。为了进行此更改，我必须将所有内容都作为导航控制器的一部分，以便我可以更改视图（当前使用无法正常工作的子视图）。

我已经修改了我的 AppDelegate.h 和 AppDelegate.m 以引用新的窗口和视图，但是我只是在启动时出现黑屏。

使用调试器后，我注意到 AppDelegate 中的窗口指针仍指向内存地址 0，在它应该初始化到我使用界面生成器将其连接到的窗口之后。

显然我做错了什么，我不知道从哪里开始。我什至不知道我应该提供什么信息。为了安全起见，这里是我的 AppDelegate.h：

```
#import <UIKit/UIKit.h>
#import "InitialisationController.h"

@interface AppDelegate : NSObject <UIApplicationDelegate>

@property (strong, nonatomic) IBOutlet UIWindow *window;
@property (strong, nonatomic) IBOutlet UINavigationController *navigationController;
@property (strong, nonatomic) IBOutlet InitialisationController *initialisationController;

@end 
```

和 didFinishLaunchingWithOptions 方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self.window addSubview:navigationController.view];
    [self setInitialisationController:[[InitialisationController alloc] initWithNibName:@"InitialisationController" bundle:nil]]; 
    //self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];

    //[self.navigationController pushViewController:initialisationController animated:YES];
    [self.navigationController.view addSubview:[[self initialisationController] view]]; 

    return YES;  
} 
```

有没有人有一点想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:50:10.913

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.initialisationController = [[InitialisationController alloc] initWithNibName:@"InitialisationController" bundle:nil]];
    navigationController = [[UINavigationController alloc] initWithRootViewController:self.initialisationController];
    [self.window addSubview:[navigationController view]];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

我认为这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:44:50.943

当你初始化你的 UINavigationController 它应该是这样的

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:[self initialisationController]]; 
```

同时删除此行

```
[self.navigationController.view addSubview:[[self initialisationController] view]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:08:01.773

好吧，如果您使用除`UIWindow`. 只需进入 IB 并将右指向箭头拖动到`UINavigationController`故事板中的第一个。

现在，您`UIWindow`在 AppDelegate 中的导航控制器将作为其根视图。

之后你的 applicationDidDinishLaunching 方法应该是空白的。

不确定您的应用程序是如何设置的，但在我的大部分内容中，UIWindow 是由 AppDelegate 为我初始化的，所以我不必这样做。明智的做法是创建一个新项目并查看 AppDelegate 的样板代码。大多数方法都来自`UIApplicationDelegate`协议，只是为您提供有关应用程序执行中的关键事件的信息，而不是手动设置它，这是为您完成的。所以这些方法大多是空白的。

请参阅：UIApplicationDelegate 协议参考 [http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

# cakephp - Cakephp：如何将我的项目列表合并为一个列表

> ID：11051758
> 
> 赞同：-1
> 
> 时间：2012-06-15T13:39:32.297
> 
> 标签：cakephp

嗨，伙计们，我有一个代码，它列出了不同数组中的不同项目，但问题是我希望这些项目现在出现在单个选择选项上。目前我的代码只在选择选项上显示一个项目，当我调试它时显示所有东西。我怎样才能让我的选择选项显示所有项目。数组包含一个表中的数据。

我的代码是

```
 $list=$this->ProgrammeChoice->Programme->ProgrammeRequirementsSubject->find('list',
             array('fields'=> array('programme_code','programme_name'),
                   'conditions'=>array('subject_code'=>$s_code,
                                'compulsory'=>'true'))); 
```

在我看来，选择选项的代码是

```
echo $this->Form->select("ProgrammeChoice.programme_code.2",$list); 
```

它只显示一个选择选项，但我希望所有选项都可用

好的，当我回显上面的数组即 $list 时，它一分为二，结果如下

```
array(
    'BACC' => 'Bachelor of Accountancy'
)

array(
    'HEN' => 'Electrical Engineering'
) 
```

但我想要两个课程的一个数组，比如

```
 array(
    'BACC' => 'Bachelor of Accountancy'
        'HEN' => 'Electrical Engineering'

    ) 
```

我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:29:10.213

这行得通吗？我添加了一些行来合并不同的数组。

```
$list=$this->ProgrammeChoice->Programme->ProgrammeRequirementsSubject->find('list',
  array('fields'=> array('programme_code','programme_name'),
  'conditions'=>array('subject_code'=>$s_code,
  'compulsory'=>'true')));

/* Merge array */
$result = array();
foreach ($list as $l) {
  $result = array_merge ($result, $l);  
}
$list = $result;

echo $this->Form->select("ProgrammeChoice.programme_code.2",$list); 
```

# git - 为什么 git fetch 指定分支与不指定分支的 fetch 不匹配（出于差异目的）

> ID：11051761
> 
> 赞同：1
> 
> 时间：2012-06-15T13:39:35.590
> 
> 标签：git

如果我执行 git fetch origin master 执行 git diff ...origin 如果我执行 git fetch （不指定分支）然后执行 git diff ...origin （见下文），则不会有相同的结果。这是为什么？（请注意：git 版本 1.7.3.1.msysgit.0）

```
git init parent && cd parent

echo 'version1' > contents.txt
git add contents.txt
git commit -m "version1"

cd ..
git clone parent child
cd child

echo 'child' >> contents.txt
git commit -a -m "Child"

cd ../parent
echo 'parent' >> contents.txt
git commit -a -m "Parent"

cd ../child
git fetch origin master
git diff ...origin

echo Expected diff here and it wasn't there!

git fetch
git diff ...origin

echo Ok, diff appeared properly now! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:24:22.657

`git fetch origin master`不会将更新的提交指针存储在 中`.git/refs/remotes/origin/master`，而是将其存储在 中`.git/FETCH_HEAD`，如您的示例输出所示：

```
$ git fetch origin master
remote: Counting objects: 5, done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From /tmp/parent
* branch            master     -> FETCH_HEAD 
```

如果您想查看差异，只需发出`git diff ...FETCH_HEAD`：

```
$ git diff ...FETCH_HEAD
diff --git a/contents.txt b/contents.txt
index 5bdcfc1..1f428af 100644
--- a/contents.txt
+++ b/contents.txt
@@ -1 +1,2 @@
 version1
+parent 
```

您可以在手册页中看到原因：

```
The ref names and their object names of fetched refs are stored in .git/FETCH_HEAD. 
This information is left for a later merge operation done by git merge. 
```

`git fetch origin`另一方面，当您发出时，它会更新您所有的本地跟踪跟踪分支。从你的例子：

```
$ git fetch origin
From /tmp/parent
e23f025..4ea3d15  master     -> origin/master 
```

再次从手册页：

```
Update the remote-tracking branches:

       $ git fetch origin

   The above command copies all branches from the remote refs/heads/ namespace and stores them to the local refs/remotes/origin/ namespace, unless the
   branch.<name>.fetch option is used to specify a non-default refspec. 
```

# c++ - 在 C 程序中使用 C++ 代码，反之亦然

> ID：11051762
> 
> 赞同：0
> 
> 时间：2012-06-15T13:39:42.600
> 
> 标签：c++, c, gcc, g++, dynamic-linking

我目前正在编写一个非常低级的 C 程序与高级 C++ 程序之间的接口。它们的关联方式是通过链表：C 程序有一个链表，接口获取存储在链表中每个节点中的信息并将其转换为 C++ 向量。该过程本身不是程序。问题是如何从 C 程序中调用该 C++ 函数。让我给你一些启示：

```
int importData(List *head, char * source, char * dest); 
```

在 C++ 文件中声明，称为`import_helper.cpp`. 我定义了声明，如上所示，然后是实现，所以编译不会抱怨。在`import.c`C 程序中，我试图调用该函数：记住，List 是`import.c` 现在定义的结构，在`import.c`我有：

```
#if defined(_cplusplus)
extern 'C' {
#endif
typedef struct list{
   struct list *next
   .. other additional data goes here ...
}List;

int importData(List *head, char *source, char *dest);
#if defined(_cplusplus)
}
#endif 
```

在`import_helper.cpp`标题中我做了一个`#include "import.c"`. `import.c`没有 .h 文件（有人编写了该代码，我个人认为这本身就是一个错误）。

当我编译时，我得到：

```
error: expected unqualified-id before 'class'
error: conflicts with the new declaration with 'C' linking
error: previous declaration of 'void getPassword(char *)' with 'C++' linkage 
```

那只是一个样本。但是，我相信`import.c`是用编译的`gcc`，我的`Build`文件是`import_help.cpp`用`g++`. 这可能是原因吗？我有其他类似方法的文件，所以我不太确定。任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:42:11.527

解决方案是创建一个`import_helper.h`文件，然后`import_helper.cpp`我将它包含`#include "import_helper.h"`在 ( )`import_helper.cpp`和`import.c`. 在`import_helper.h`我有：

```
extern "C"{
   typedef struct list{
      ... /*some code goes here */
      struct list* next;
   }List;
   int importData(List *, char*, char*);
} 
```

所以 the`.c`和 the`.cpp`共享相同的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:05:55.977

您可以通过在后端编写使用 C++ 的 DLL 在两个项目之间共享公共代码。只要为 C 进行声明，您就应该能够从 C 或 C++ 程序调用定义的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:25:23.000

当您在 .cpp 文件中定义 importData 时，您还需要将其放在 extern "C" （注意双引号）块中：

```
extern "C"{
    int importData(List *head, char *source, char *dest){
        blah blah blah
        ...
    }
} 
```

并且从错误`void getPassword(char *)`中也需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:45:20.053

C++ 可以抛出异常。

确保 C++ 代码中的“C”接口捕获所有内容，并返回错误状态，并且可能返回某种 cstring 之类的消息，这样您就不会遇到任何意外的程序终止。

# c++ - 多维数组迭代效率

> ID：11051765
> 
> 赞同：2
> 
> 时间：2012-06-15T13:39:50.537
> 
> 标签：c++, arrays

> **可能重复：**
> [按行与按列访问矩阵的元素](https://stackoverflow.com/questions/4716125/accessing-elements-of-a-matrix-row-wise-versus-column-wise)

在 C++ 中，为什么像这样遍历多维数组更有效：

```
// Iterate through the highest dimention last (k)
int num[10][10][10];

for(int i = 0; i < 10; ++i)
{
    for(int j = 0; j < 10; ++j)
    {
        for(int k = 0; k < 10; ++k)
        {
            cout << num[i][j][k];
        }
    }
} 
```

比这样：

```
// iterate through the highest dimension first (k)
int num[10][10][10];

for(int k = 0; k < 10; ++k)
{
    for(int j = 0; j < 10; ++j)
    {
        for(int i = 0; i < 10; ++i)
        {
            cout << num[i][j][k];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:43:24.193

这是因为处理器缓存数据，并且像这样的数组`int array[n][m][k]`在内存中表示，所以首先有元素`array[0][0][0]`，`array[0][0][k - 1]`依此类推。因此，如果您像第一个示例中那样进行迭代，处理器可以在缓存中加载整块内存，但在第二个示例中，处理器无法“通过”内存进行复制。

# mysql - android中的tomcat apache + mysql连接

> ID：11051767
> 
> 赞同：0
> 
> 时间：2012-06-15T13:39:53.297
> 
> 标签：mysql, web-services, tomcat

我开发了一个 android 应用程序。在我的 tomcat 控制台窗口中出现以下错误：

```
Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException: com.mysql.jdbc.Driver
[ERROR] com/mysql/jdbc/Connection
 java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
  Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getLongitude_City(Travel_Ceylon_Web_Service.java:30)
... 29 more
    Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Connection
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
... 30 more
     Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException: com.mysql.jdbc.Driver
  [ERROR] com/mysql/jdbc/Connection
   java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
    Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getLatitude_City(Travel_Ceylon_Web_Service.java:47)
... 29 more
    Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException:   com.mysql.jdbc.Driver
    [ERROR] com/mysql/jdbc/Connection
    java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
    Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getLongitude_Im_Place(Travel_Ceylon_Web_Service.java:64)
... 29 more
   Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException: com.mysql.jdbc.Driver
   [ERROR] com/mysql/jdbc/Connection
    java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
     Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getLatitude_Im_Place(Travel_Ceylon_Web_Service.java:81)
... 29 more
    Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException: com.mysql.jdbc.Driver
   [ERROR] com/mysql/jdbc/Connection
    java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
    Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getCategory_Im_Place(Travel_Ceylon_Web_Service.java:98)
... 29 more
   Error - Unable to Connect to the Databasejava.lang.ClassNotFoundException: com.mysql.jdbc.Driver
 [ERROR] com/mysql/jdbc/Connection
  java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:212)
at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:117)
at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
   Caused by: java.lang.NoClassDefFoundError: com/mysql/jdbc/Connection
at org.web.travel_ceylon.ws.Travel_Ceylon_Web_Service.getDescription_Im_Place(Travel_Ceylon_Web_Service.java:115)
... 29 more 
```

我的网络服务编码部分是：

```
package org.web.travel_ceylon.ws;

import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.mysql.jdbc.Connection;
import com.mysql.jdbc.Statement;

public class Travel_Ceylon_Web_Service {
private String url;
private Connection con;
private Statement stmt;

public void connectToDB() {
url = "jdbc:mysql://localhost:3306/travel_ceylon";
try {
Class.forName("com.mysql.jdbc.Driver");
con = (Connection) DriverManager.getConnection(url, "root", "");
} catch (Exception e) {
System.out.println("Error - Unable to Connect to the Database" + e);

}
}

public float getLongitude_City(String city) {
connectToDB();
float lngt = 0;
try {
 stmt = (Statement) con.createStatement();
ResultSet rs = stmt
 .executeQuery("SELECT Longitude FROM city WHERE City_Name='"
   + city + "'");
rs.next();
lngt = rs.getFloat("Longitude");
} catch (SQLException e) {
 System.out.println("Error - Unable to get longitude of " + city
 + " :" + e);
}
return lngt;
 }

public float getLatitude_City(String city) {
connectToDB();
float latt = 0;
try {
stmt = (Statement) con.createStatement();
ResultSet rs = stmt
 .executeQuery("SELECT Latitude FROM city WHERE City_Name='"
   + city + "'");
  rs.next();
 latt = rs.getFloat("Latitude");
   } catch (SQLException e) {
   System.out.println("Error - Unable to get latitude of " + city
   + " :" + e);
   }
   return latt;
   }

   public float getLongitude_Im_Place(String place) {
  connectToDB();
float lngt = 0;
 try {
   stmt = (Statement) con.createStatement();
   ResultSet rs = stmt
   .executeQuery("SELECT Longitude FROM important_places WHERE Place_Name='"
   + place + "'");
   rs.next();
 lngt = rs.getFloat("Longitude");
 } catch (SQLException e) {
  System.out.println("Error - Unable to get longitude of " + place
 + " :" + e);
  }
 return lngt;
 }

  public float getLatitude_Im_Place(String place) {
  connectToDB();
  float latt = 0;
  try {
  stmt = (Statement) con.createStatement();
  ResultSet rs = stmt
 .executeQuery("SELECT Latitude FROM important_places WHERE Place_Name='"
   + place + "'");
  rs.next();
  latt = rs.getFloat("Latitude");
  } catch (SQLException e) {
  System.out.println("Error - Unable to get latitude of " + place
 + " :" + e);
  }
  return latt;
  }

 public String getCategory_Im_Place(String place) {
  connectToDB();
  String cat = "";
  try {
  stmt = (Statement) con.createStatement();
  ResultSet rs = stmt
 .executeQuery("SELECT Category FROM important_places WHERE Place_Name='"
   + place + "'");
  rs.next();
  cat = rs.getString("Category");
   } catch (SQLException e) {
  System.out.println("Error - Unable to get  Category of " + place
 + " :" + e);
  }
 return cat;
 }

 public String getDescription_Im_Place(String place) {
 connectToDB();
 String des = "";
 try {
  stmt = (Statement) con.createStatement();
  ResultSet rs = stmt
 .executeQuery("SELECT Description FROM important_places WHERE Place_Name='"
   + place + "'");
 rs.next();
 des = rs.getString("Description");
 } catch (SQLException e) {
System.out.println("Error - Unable to get Description of " + place
 + " :" + e);
}
return des;
}
} 
```

Dis是我的android应用程序编码：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/txtCityLongitude"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<TextView
    android:id="@+id/txtCityLatitude"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<TextView
    android:id="@+id/txtIMLon"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<TextView
    android:id="@+id/txtIMLat"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<TextView
    android:id="@+id/txtIMCat"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<TextView
    android:id="@+id/txtIMDes"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

 </LinearLayout> 
```

AndroidManifest.xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.web.frontend.calculator"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidFrontendActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    </application>

 </manifest> 
```

Dis 是我的 AndroidFrontendActivity.java 文件：

```
package org.web.frontend.calculator;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class AndroidFrontendActivity extends Activity {

private String METHOD_NAME = "";
// our webservice method name
private String NAMESPACE = "http://ws.travel_ceylon.web.org";
// Here package name in webservice with reverse order.
private String SOAP_ACTION = NAMESPACE + METHOD_NAME;
// NAMESPACE + method name
private static final String URL = "http://10.0.0.55:8085/Travel_Ceylon_Web_Service  /services/Travel_Ceylon_Web_Service?wsdl";

// you must use ipaddress here, don’t use Hostname or localhost

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String city = "Matara";
    String im = "Galle Face";

    METHOD_NAME = "getLongitude_City";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("city", city);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ((TextView) findViewById(R.id.txtCityLongitude)).setText(city
                + " Longitude is : " + result.toString());

    } catch (Exception E) {
        E.printStackTrace();
        ((TextView) findViewById(R.id.txtCityLongitude)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
    }
    METHOD_NAME = "getLatitude_City";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("city", city);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ((TextView) findViewById(R.id.txtCityLatitude)).setText(city
                + " Latitude : " + result.toString());

    } catch (Exception E) {
        E.printStackTrace();
        ((TextView) findViewById(R.id.txtCityLatitude)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
    }

    METHOD_NAME = "getLongitude_Im_Place";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("place", im);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ((TextView) findViewById(R.id.txtIMLon)).setText(im
                + " Longitude : " + result.toString());

    } catch (Exception E) {
        E.printStackTrace();
        ((TextView) findViewById(R.id.txtIMLon)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
    }

    METHOD_NAME = "getLatitude_Im_Place";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("place", im);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ((TextView) findViewById(R.id.txtIMLat)).setText(im
                + " Latitude : " + result.toString());

    } catch (Exception E) {
        E.printStackTrace();
        ((TextView) findViewById(R.id.txtIMLat)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
    }

    METHOD_NAME = "getCategory_Im_Place";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("place", im);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ((TextView) findViewById(R.id.txtIMCat)).setText(im
                + " Category : " + result.toString());

    } catch (Exception E) {
        E.printStackTrace();
        ((TextView) findViewById(R.id.txtIMCat)).setText("ERROR:"
                + E.getClass().getName() + ":" + E.getMessage());
    }

    METHOD_NAME = "getDescription_Im_Place";
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("place", im);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T21:12:44.347

将 Connector/J JAR 文件放入 Tomcat 的`lib`目录（如果您使用容器提供的数据源）或 webapp 的`WEB-INF/lib`目录（如果您的 webapp 正在管理自己的所有数据库连接。

请注意，这与 Android 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:59:01.503

如果你像这样添加库（项目-->构建路径-->配置构建路径-->添加外部jar-->添加mysql-connector-java-3.0.17.jar）。它只是在编译时考虑，但在导出或运行时它不会与项目一起导出，因此只需将此文件添加到此文件中`project_folder\WebContent\WEB-INF\lib`，就像 Christopher Schultz 手动所说的那样，它将起作用。

# php - (PHP/Zend) 致命错误：在 /foo/path 中找不到类 'fooClass'

> ID：11051770
> 
> 赞同：0
> 
> 时间：2012-06-15T13:39:55.607
> 
> 标签：php, zend-framework, models, bootstrapping

**已解决 - 向下滚动**

我正在尝试在 Zend 1.11.11 中使用 Zend_Db_Table 模型子类。我在模型文件夹中有模型类：

```
<?php

class fooTable extends Zend_Db_Table {

    protected $_name = 'foo';
    protected $_primary = 'id';

} 
```

在 bootstrap.php 中，我编写了以下代码：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    public function _initAutoloader()
    {

        $autoloader = new Zend_Loader_Autoloader_Resource(array(
            'basePath'    => APPLICATION_PATH,
            'namespace' => 'Application'
        ));

        return $autoloader;
    }
} 
```

当我声明一个 fooTable 对象时，我得到了致命错误：

```
Fatal error: Class 'fooTable' not found in /foo/path/application/controllers/IndexController.php on line 13 
```

但是，如果我将类 fooTable 声明到 IndexController 中，一切正常。任何人都有一些想法如何解决这个问题？

## 解决方案

我以一种简单的方式解决了这个问题：

*   称为文件 Modal_Foo.php；
*   更改了 AppNamespace_Modal_Foo 中的类名；进入 IndexController 将其声明为新的
*   AppNamespace_Modal_Foo；

我希望这会对某人有所帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:19:18.910

这似乎是一个自动加载问题。

您可以通过自动加载命名空间在引导程序或 application.ini 中自动加载模型。

# workflow-foundation-4 - 如何访问 BeginOnSave / PersistenceIOParticipant 中的工作流 ID？

> ID：11051774
> 
> 赞同：0
> 
> 时间：2012-06-15T13:40:08.303
> 
> 标签：workflow-foundation-4, appfabric

我正在使用 PersistenceIOParticipant 将工作流状态写入自定义数据库表。我需要工作流 ID - 知道如何从 BeginOnSave 中访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:29:00.800

据我所知，唯一的方法是从执行上下文中检索它并将其传递给您的服务。

# python - 如何仅转换数组的某些元素？

> ID：11051776
> 
> 赞同：0
> 
> 时间：2012-06-15T13:40:17.353
> 
> 标签：python, arrays

我有一个看起来像这样的数组：`['14', '43.8303', '13', '44.8114', '16', '45.6076', '7', '45.6762', '2', '45.8241', '18', '46.0605', '8', '47.7897', '4', '53.4238', '1', '53.5724', '15', '54.0245', '17', '54.1073', '9', '58.2705', '3', '61.0334', '5', '62.0799', '12', '70.6712', '11', '81.171', '10', '196.992', '6', '314.895']`

是否可以将偶数位置的元素转换为`int`奇数位置的元素`float`？

我试过这样：

```
for i in range(36):
        if i%2==0:
            items[i] = map(int, items[i])
        else:
            items[i] = map(float,items[i]) 
```

但是，我收到此错误：

> 错误消息：ValueError：float（）的无效文字：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T13:42:58.977

一个有趣的版本（请不要使用此代码！）：

```
from itertools import cycle
func = cycle((int, float))
new_items = [next(func)(i) for i in items] 
```

**编辑**：作为一个更严肃的答案，您可能真的不*想要*这种混合列表。使用对列表可能更有用，每对的第一项是整数，第二项是浮点数。这个数据结构可以从你的列表中使用

```
new_items = [(int(x), float(y)) for x, y in zip(*[iter(items)] * 2)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T13:42:52.540

```
new_items = [float(item) if index % 2 else int(item)
             for index, item in enumerate(items)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:52:17.630

使用切片，您可以就地更新列表。（与创建新列表的其他一些解决方案相比——差异是微妙的，在某些情况下并不重要，但无论如何最好知道你在做什么）。

```
a[::2]=map(int,a[::2])
a[1::2]=map(float,a[1::2]) 
```

`a[::2]`从 0 开始`a[1::2]`获取所有其他元素，从 1 开始获取所有其他元素。

或者，如果您愿意，可以使用列表理解...

```
a[::2]=[int(x) for x in a[::2]]
a[1::2]=[float(x) for x in a[1::2]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T13:44:32.270

我推荐迈克尔霍夫曼的解决方案，但了解代码中的错误可能对我有用：

```
for i in range(36):
    if i%2==0:
        items[i] = map(int, items[i])
        # should be: items[i] = int(items[i])
    else:
        items[i] = map(float,items[i])
        # should be: items[i] = float(items[i]) 
```

`map`对列表的每个元素调用一个函数，但在这种情况下，您希望在单个元素上调用`int`and ，因为您已经在循环。`float``items[i]`

（另外，`for i in range(26)`应该是`for i in range(len(items))`。请不要使用魔法常数。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:43:09.347

按照您的解决方案：

```
for i in range(36):
    if i%2==0:
        items[i] = int(items[i])
    else:
        items[i] = float(items[i]) 
```

# c# - WindowsFormsHost 中的 DateTimePicker 在窗口的其余部分之前加载

> ID：11051783
> 
> 赞同：0
> 
> 时间：2012-06-15T13:40:55.863
> 
> 标签：c#, wpf

我正在用 C# WPF .NET 3.5 开发一个程序。我有一个窗口，我在其中添加了日期时间选择器，如下所示：

```
<Window x:Class="ProcessData"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
Style="{StaticResource CustomWindow}"
Title="Process Data" Height="739" Width="576" WindowStartupLocation="CenterScreen" ResizeMode="CanMinimize">
<Grid>
    <Button HorizontalAlignment="Right" Margin="0,521,14,0" Name="buttonProcess" Width="106.5" Height="32" VerticalAlignment="Top" Click="buttonProcess_Click">Process</Button>
    <Label Height="28" HorizontalAlignment="Left" Margin="16,597,0,0" Name="labelDateAndTime" VerticalAlignment="Top" Width="120">Date and time</Label>
    <WindowsFormsHost Height="26" HorizontalAlignment="Left" Margin="16,625,0,0" Name="windowsFormsHostDateAndTime" VerticalAlignment="Top" Width="191">
        <wf:DateTimePicker x:Name="dtpickerDateAndTime" Format="Custom" CustomFormat="MM/dd/yyyy  hh:mm:ss tt"></wf:DateTimePicker>
    </WindowsFormsHost>
</Grid> 
```

我添加了 Loaded 事件处理程序，我在其中执行一些与 UI 相关的处理 5-6 秒。当窗口启动时，日期时间选择器首先出现并停留 5-6 秒。然后出现窗口的其余部分。如何防止日期时间选择器提前出现？

我提前感谢您的帮助。

极客

# mysql - 完全卡住试图更改 MySQL 服务器 root 密码

> ID：11051786
> 
> 赞同：0
> 
> 时间：2012-06-15T13:41:06.320
> 
> 标签：mysql, passwords, root, mysql-workbench

我一直收到错误消息：

操作失败：用户 'root'@'localhost 的访问被拒绝

我已经尝试过本指南但没有成功：

[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

我在第 5 步和第 6 步的命令行中的所有条目似乎都不起作用。例如，这是我对提示的最新条目：

```
C:\Documents and Settings\Charlie>"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld.exe" --defaults-file="C:\\Program Files\\MySQL\\MySQL Server 5.0\\my.ini" --init-file=C:\\mysql-init.txt 
```

> 无法打开所需的默认文件：C:\Program Files\MySQL\MySQL Server 5.0\my.ini
> 
> 默认处理中的致命错误。程序中止

为什么 MySQL Workbench 不能让我使用我在第一次安装时选择的密码？注意我用新密码重新安装了它，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:49:23.400

你是如何安装 MySQL 的？看起来不像 WAMP/LAMP 包...除非您没有很好的理由以“硬”方式安装它，否则请尝试使用标准的 wamp 堆栈包。无论如何，这对我有很多帮助（向下滚动到 mysql> shell 部分）：

[http://www.cyberciti.biz/faq/mysql-change-root-password/](http://www.cyberciti.biz/faq/mysql-change-root-password/)

**顺便说一句，我看到你的 shell 中同时有 mysql 5.0 和 mysql 5.5 ！！！**

# instance - Spring Batch：忽略可重启属性

> ID：11051788
> 
> 赞同：2
> 
> 时间：2012-06-15T13:41:09.063
> 
> 标签：instance, spring-batch, job-scheduling

我有一个批处理作业，我想每分钟运行一次。调度程序按计划每分钟启动一次作业，但在第一次启动后，将使用相同的作业实例。我的 ItemReader 中有一个标志，一旦代码执行一次就会触发，因此每次后续启动都使用相同的实例，在第一次运行后不会读取任何新内容。

我查看了文档（http://static.springsource.org/spring-batch/reference/html/configureJob.html），它说将作业bean的restartable属性设置为false。这应该强制每次调用都创建一个新实例（第 4.1.1 节可重启性）。

这并没有解决问题。如果我写出“this.hashCode()”，每次调用读取器类时都会得到相同的哈希 ID。

我尝试将可重启属性放在作业及其父级（SimpleJob 的扩展）上，但两者都没有帮助。

我还在作业启动器的 jobParameters 中附加了一个时间戳，因此每个作业都有唯一的参数。这仍然不能解决它。作业名称始终相同。

有什么我想念的吗？

```
 <bean id="simpleJob" class="CustomJob" abstract="true">
            <property name="jobRepository" ref="jobRepository"/>
            <property name="restartable" value="false"/>
        </bean>
<bean id="simpleStep" class="org.springframework.batch.core.step.item.SimpleStepFactoryBean" abstract="true">
    <property name="transactionManager" ref="transactionManager"/>
    <property name="jobRepository" ref="jobRepository"/>
    <property name="startLimit" value="100"/>
    <property name="commitInterval" value="1"/>
</bean>

<batch:job id="myJob" parent="simpleJob">
        <batch:step id="Step1" next="step2" parent="simpleStep">
            <batch:tasklet>
                <batch:chunk>
                    <batch:reader>
                        <bean class="myReader">
                            <property name="userName" value="***"/>
                            <property name="password" value="***"/>
                            <property name="url" value="***"/>
                        </bean>
                    </batch:reader>
                    <batch:writer>
                        <bean class="MyWriter">
                            <property name="dataSource" ref="dataSource"/>
                            <property name="updateOnKeyConflict" value="false"/>
                            <property name="table" value="myTable"/>
                        </bean>
                    </batch:writer>
                </batch:chunk>
            </batch:tasklet>
        </batch:step>
        <batch:step id="step2" next="step3" parent="simpleStep">
            <batch:tasklet>
                <bean class="queryTasklet">
                    <property name="dataSource" ref="dataSource"/>
                    <property name="sql" value="***"/>
                </bean>
            </batch:tasklet>
        </batch:step>
        <batch:step id="step3" parent="simpleStep">
            <batch:tasklet>
                <batch:chunk>
                    <batch:reader>
                        <bean class="mySeriesReader">
                            <property name="userName" value="***"/>
                            <property name="password" value="***"/>
                            <property name="url" value="***"/>
                        </bean>
                    </batch:reader>
                    <batch:writer>
                        <bean class="mySeriesWriter">
                            <property name="timeSeriesDAO" ref="timeSeriesDAO"/>
                            <property name="updateOnKeyConflict" value="false"/>
                        </bean>
                    </batch:writer>
                </batch:chunk>
            </batch:tasklet>
        </batch:step>
    </batch:job> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:38:10.177

做更多的研究，将属性 scope="step" 添加到我的阅读器类 bean 纠正了这个问题。您可以参考文档的第 5 章并阅读有关后期绑定的信息。

# html - 在可变大小的图像上垂直和水平对齐文本

> ID：11051794
> 
> 赞同：1
> 
> 时间：2012-06-15T13:41:33.187
> 
> 标签：html, css, alignment

我不是 CSS Ninja，没有你的天才解决方案，我需要为以下问题编写一些服务器端解决方案：

*   我有一个图像。图像的大小是可变的。它可以是 250x380 或 640x480 或任何尺寸。
*   我必须在图像的中心放置一些文本。它必须水平和垂直对齐。
*   我需要一个 HTML+CSS 解决方案……不管在客户端什么都行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:05:51.927

这是使用 HTML、CSS 和 JavaScript 完成您所要求的事情的一种方法：

1.  将您想要的标签放在图像的属性中，例如`alt`属性
2.  编写一个创建`div`元素标签并将其放置在图像顶部的函数
3.  在您希望在其上添加标签的所有图像上运行该功能

这是一个例子：http: [//jsfiddle.net/Codemonkey/YnMfM/2/](http://jsfiddle.net/Codemonkey/YnMfM/2/)

我的示例需要 JavaScript，但使用非强制性的 jQuery 库。您可以使用纯 JavaScript 或任何其他库

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T14:29:43.287

这是一种仅使用 HTML 和 CSS 来完成您所要求的事情的方法。它比我的其他解决方案更脏，但无论如何它有点酷。

1.  将图像放入`div`with`position: relative`
2.  在与图像相同的 div内放置一个`div`inside a `table`inside a`div`
3.  使用`div`_`position: absolute`
4.  将表格设置为 100% 宽度和高度，并将其文本对齐和垂直对齐设置为中间
5.  `div`将表格内部显示为`inline-block`并根据需要设置样式

这是一个例子：http: [//jsfiddle.net/Codemonkey/a52qx/1/](http://jsfiddle.net/Codemonkey/a52qx/1/)

我不能保证浏览器的兼容性。我敢打赌 Internet Explorer 会大吃一惊，但我无法测试它，因为我在 Ubuntu 机器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T08:21:59.603

Codemonkey/Hubro 的仅 HTML/CSS 解决方案有效，但您实际上并不需要使用表格。您可以将相关的 div 设置为`display:table`and `display:table-cell`。

这是他没有表格的例子：

[https://jsfiddle.net/aphidesign/cwosvp9b/](https://jsfiddle.net/aphidesign/cwosvp9b/)

# c# - 如何验证我的自签名证书

> ID：11051801
> 
> 赞同：1
> 
> 时间：2012-06-15T13:42:09.393
> 
> 标签：c#, security, cryptography, certificate

我的 Web 服务器使用的是自签名 SSL 证书。我可以通过自己实施验证检查来连接它：

```
private static Boolean ValidateCertificate(object sender,
     X509Certificate certificate, X509Chain chain,
     SslPolicyErrors sslpolicyerrors)
{
  return certificate.GetCertHashString().equals("ABCDEF");
}

private void Connect(String requestUrl)
{
    ServicePointManager.ServerCertificateValidationCallback = ValidateCertificate;
    var request = (HttpWebRequest) WebRequest.Create(requestUrl);
    var response = request.GetResponse();
    //...
} 
```

将返回的哈希`GetCertHashString()`值与硬编码值进行比较以验证这确实是预期的证书是否安全？

“真实”证书是链的一部分，必须验证到根证书，该根证书是自签名的。我猜该根证书的可验证部分被硬编码到每个应用程序中。这使我相信我的自签名证书将与其他任何证书一样安全，只要硬编码值没有被篡改，这意味着可以访问机器本身，在这种情况下，标准根证书可能会被篡改也。那是对的吗？

# jquery - jQuery mobile 预取通过 Ajax 加载内容的页面

> ID：11051806
> 
> 赞同：6
> 
> 时间：2012-06-15T13:42:18.163
> 
> 标签：jquery, jquery-mobile

我在单页模板中使用 jQuery mobile（每个页面都是一个单独的 html 文件）。我想预取一个通过 Ajax 加载内容的页面。我将预取代码放在第一页的 Document.ready() 函数中

```
$.mobile.loadPage("my-projects.html", { showLoadMsg: false }); 
```

我要预取的第二页的 Document.ready() 函数内部的 ajax 调用。当我们对该页面进行 preftech 时，不会发生此 ajax 调用。有没有办法做到这一点。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:58:36.407

jQuery Mobile 内置了预取功能，您所要做的就是将`data-prefetch`属性添加到链接到远程页面的链接中：

```
<a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html)*

一般来说，当您通过 AJAX 拉入页面时，该`document.ready`功能**不会**触发。但是，您可以使用 jQuery Mobile Page 事件，例如`pageinit`. 例如：

```
$(document).delegate('#my-page-id', 'pageinit', function () {
    $.mobile.loadPage("my-projects.html", { showLoadMsg: false });
}); 
```

# ajax - h:selectOneMenu 未在 jsf 中的 f:ajax 上填充

> ID：11051812
> 
> 赞同：1
> 
> 时间：2012-06-15T13:42:35.300
> 
> 标签：ajax, jsf, selectonemenu

当其他一些下拉列表更改其值时，我正在尝试填充下拉列表。即流行的例子：国家和城市。我为此尝试了 f:ajax。好吧，ajax 调用正在发生，但城市下拉列表没有被填充。

我的托管 Bean 代码本身存在一些问题，但我找不到。有人可以看看吗？

`register.xhtml`

```
 <h:selectOneMenu id="state" value="#{registerBean.state}" required="true">                    
          <f:selectItems value="#{registerBean.stateList}"/>
       <f:ajax render="outputDrop city" listener="#{registerBean.cityListener}"/>                                                            
     </h:selectOneMenu>                    
                <h:message for="state" />

                <h:outputText id="outputDrop" value="#{registerBean.state}" />

                <h:outputText value="#{msgbundle.reg_city}" />
      <h:selectOneMenu id="city" value="#{registerBean.city}" required="true">
                   <f:selectItems value="#{registerBean.cityList}"  />
                </h:selectOneMenu>
                <h:message for="city" /> 
```

托管豆

```
package org.droidaceapps.contractortimeflow;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import javax.faces.event.AjaxBehaviorEvent;
import javax.faces.model.SelectItem;

public class RegUserInfoBean {
   private String userName;
   private String city;   
   private String state;
   private String phone;
   private String sex;

   private ArrayList<SelectItem> stateList;
   private ArrayList<SelectItem> cityList;

   private enum stateKeys {AP,TN,MH};

   public ArrayList<SelectItem> getStateList(){
       stateList = new ArrayList<SelectItem>();
   stateList.add(new SelectItem(null,"Select state"));
   stateList.add(new SelectItem("AP","Andhra Pradesh"));
   stateList.add(new SelectItem("TN","Tamilnadu"));
   stateList.add(new SelectItem("MH","Maharastra"));
   return stateList;
}

  public ArrayList<SelectItem> getCityList(){
   cityList = new ArrayList<SelectItem>();
   cityList.add(new SelectItem(null,"Select"));
   return cityList;
   }

  public void cityListener(AjaxBehaviorEvent event){

   switch(stateKeys.valueOf(state)){
   case AP:
          cityList.add(new SelectItem("VIJ","Vijayawada"));
          cityList.add(new SelectItem("GUN","Guntur"));           
          break;
   case MH:
          cityList.add(new SelectItem("MUM","Mumbai"));
          cityList.add(new SelectItem("PUN","Pune"));             
          break;
   case TN:
          cityList.add(new SelectItem("CHE","Chennai"));
          cityList.add(new SelectItem("MAD","Madurai"));              
          break;
    default:
        cityList.add(new SelectItem("NA","No value"));
   }

}

public String getSex() {
return sex;
 }
public void setSex(String sex) {
this.sex = sex;
 }
public String getUserName() {
return userName;
 }
 public void setUserName(String userName) {
this.userName = userName;
}
public String getCity() {
return city;
}
public void setCity(String city) {
this.city = city;
 }

 public String getState() {
return state;
 }
 public void setState(String state) {
this.state = state;
 }
public String getPhone() {
return phone;
 }
public void setPhone(String phone) {
this.phone = phone;
}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:47:41.057

您每次都在 getter 方法中重新创建城市列表。你不应该那样做。getter 方法不应**包含**任何业务代码。他们只应归还财产。您应该在支持 bean 或`@PostConstruct`方法的构造函数中进行初始化。

所以，更换

```
public ArrayList<SelectItem> getCityList(){
    cityList = new ArrayList<SelectItem>();
    cityList.add(new SelectItem(null,"Select"));
    return cityList;
} 
```

经过

```
@PostConstruct
public void init() {
    cityList = new ArrayList<SelectItem>();
    cityList.add(new SelectItem(null,"Select"));
}

public ArrayList<SelectItem> getCityList(){
    return cityList;
} 
```

我也会`getStateList()`相应地改变方法。在每个 getter 方法调用上重新创建列表效率很低。

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times)

# java - JNLP 将 jar 下载到本地系统的位置。

> ID：11051815
> 
> 赞同：0
> 
> 时间：2012-06-15T13:42:43.693
> 
> 标签：java, jar, embedded-resource, jnlp, java-web-start

有没有办法在访问 JNLP 文件时确定 jar 的下载位置。它可以以编程方式进行管理吗？

我需要从 jar 中提取资源以将其用于进一步处理。

即使我可以将下载 jar 指定在与 JNLP 文件相同的位置也会更好。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:39:18.370

一种解决方法是将 zip 放入应用程序的 jar 中，将 zip 作为类加载器资源访问，然后将其解压缩到您选择的目录中。然后，您可以随意处理归档资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:39:39.370

> 我需要从 jar 中提取资源以将其用于进一步处理。

[使用嵌入式资源信息](https://stackoverflow.com/tags/embedded-resource/info)中提到的技术。[页面](https://stackoverflow.com/tags/embedded-resource/info)以获取 URL。要么提供 URL 以供进一步处理（例如，大多数接受输入资源的 J2SE 方法都将接受 URL）。或者从 URL 获取输入流并使用它。

> 它可以以编程方式进行管理吗？

不，或者更确切地说，不是客户端 JWS 应用程序。

> 即使我可以将下载 jar 指定在与 JNLP 文件相同的位置也会更好。是否可以？

你的意思是它缓存在本地磁盘上的位置吗？由于无法找到缓存 JNLP 的位置，我看不出这有什么帮助。但是要回答你的问题。再次，不。

# r - 删除少于完整观察的日期

> ID：11051819
> 
> 赞同：1
> 
> 时间：2012-06-15T13:42:58.710
> 
> 标签：r, xts, missing-data

我有一个 xts 对象，它涵盖了 169 天的高频 5 分钟定期观察，但在某些日子里缺少观察，即少于 288 个数据点。如何删除这些以便只有几天的完整数据点？

## 在数据中查找日期

```
ddx = endpoints(dxts, on="days");
days = format(index(dxts)[ddx], "%Y-%m-%d");

for (day in days) {
  x = dxts[day];
  cat('', day, "has", length(x), "records...\n");
} 
```

我试过

```
RTAQ::exchangeHoursOnly(dxts, daybegin = "00:00:00", dayend = "23:55:00") 
```

但这仍然返回了全套

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:17:53.373

按天分割。统计每天的行数，只保留超过288行的。

```
dxts <- .xts(rnorm(1000), 1:1000*5*60)
daylist <- lapply(split(dxts, "days"), function(x) {
    if(NROW(x) >= 288) x
})
do.call(rbind, daylist) 
```

以上`dxts`按“天”划分。然后，如果行数大于 288，则返回当天的所有数据，否则返回`NULL`. 所以，`daylist`将是一个列表。它的元素要么是`xts`对象，要么是`NULL`. 该`do.call`部分将`rbind`在列表中调用。这就像调用`rbind(daylist[[1]], daylist[[2]], ..., daylist[[n]])` The `NULL`s 不会被聚合，所以你会留下一个 xts 对象，它省略了少于 288 行的天数。

# c# - 一列中具有不同类型控件的未绑定网格

> ID：11051822
> 
> 赞同：4
> 
> 时间：2012-06-15T13:43:13.780
> 
> 标签：c#, wpf, winforms, treeview, grid

我正在寻找能够在同一列中显示不同控件（目前为文本框和组合框）的 WinForms 或 WPF 网格。它还必须具有树列表/树视图功能，以便行（节点）之间的层次结构可见。我需要能够在运行时将控件添加到单元格并以编程方式更改行高和列宽。
我一直在寻找一段时间，但到目前为止没有运气。有什么建议么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:20:39.357

这个答案的结果。

![在此处输入图像描述](../Images/273dc90660f8e0415a113a0748b528d9.png)

我会使用标准的WPF DataGrid，现在不需要花钱，你可以选择一个模板列，然后在里面做一些数据绑定，下面的例子有一个非常简单的类，我绑定到网格上.

```
public class ListItemType
{
    public int Type { get; set; }
    public string Text { get; set; }
} 
```

这个类显然可以是任何东西，但在示例中，我将类型设置为 1 或 2，绑定列表中类型为 1 的任何对象都会被赋予一个按钮来表示它，并且任何 Type=2 的对象都会被赋予一个CheckBox 来表示它。

数据网格的 XAML 如下所示。（缩进 ++）

```
<DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False" Height="200" HorizontalAlignment="Left" Margin="10,10,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200" >
    <DataGrid.Columns>

        <!-- The template coloumn -->
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>

                    <!-- Each cell is put in to a content presenter so I can change it's content -->
                    <ContentPresenter>
                        <ContentPresenter.Content>
                            <Binding Path="Type">
                                <Binding.Converter>
                                    <local:SwitchConverter>

                                        <local:SwitchConverterCase When="1">
                                            <Button Content="{Binding Text}"></Button>
                                        </local:SwitchConverterCase>

                                        <local:SwitchConverterCase When="2">
                                            <CheckBox Content="{Binding Text}" />
                                        </local:SwitchConverterCase>

                                    </local:SwitchConverter>
                                </Binding.Converter>
                            </Binding>
                        </ContentPresenter.Content>
                    </ContentPresenter>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

上面使用的开关转换器只是一个通用转换器，它稍微简化了 XAML 代码，你可以使用任何你想要的转换器，但这里是我使用的那个的代码。

```
/// <summary>
/// A converter that accepts <see cref="SwitchConverterCase"/>s and converts them to the 
/// Then property of the case.
/// </summary>
[ContentProperty("Cases")]
public class SwitchConverter : IValueConverter
{
    // Converter instances.
    List<SwitchConverterCase> _cases;

    #region Public Properties.
    /// <summary>
    /// Gets or sets an array of <see cref="SwitchConverterCase"/>s that this converter can use to produde values from.
    /// </summary>
    public List<SwitchConverterCase> Cases { get { return _cases; } set { _cases = value; } }
    #endregion
    #region Construction.
    /// <summary>
    /// Initializes a new instance of the <see cref="SwitchConverter"/> class.
    /// </summary>
    public SwitchConverter()
    {
        // Create the cases array.
        _cases = new List<SwitchConverterCase>();
    }
    #endregion

    /// <summary>
    /// Converts a value.
    /// </summary>
    /// <param name="value">The value produced by the binding source.</param>
    /// <param name="targetType">The type of the binding target property.</param>
    /// <param name="parameter">The converter parameter to use.</param>
    /// <param name="culture">The culture to use in the converter.</param>
    /// <returns>
    /// A converted value. If the method returns null, the valid null value is used.
    /// </returns>
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // This will be the results of the operation.
        object results = null;

        // I'm only willing to convert SwitchConverterCases in this converter and no nulls!
        if (value == null) throw new ArgumentNullException("value");

        // I need to find out if the case that matches this value actually exists in this converters cases collection.
        if (_cases != null && _cases.Count > 0)
            for (int i = 0; i < _cases.Count; i++)
            {
                // Get a reference to this case.
                SwitchConverterCase targetCase = _cases[i];

                // Check to see if the value is the cases When parameter.
                if (value == targetCase || value.ToString().ToUpper() == targetCase.When.ToString().ToUpper())
                {
                    // We've got what we want, the results can now be set to the Then property
                    // of the case we're on.
                    results = targetCase.Then;

                    // All done, get out of the loop.
                    break;
                }
            }

        // return the results.
        return results;
    }

    /// <summary>
    /// Converts a value.
    /// </summary>
    /// <param name="value">The value that is produced by the binding target.</param>
    /// <param name="targetType">The type to convert to.</param>
    /// <param name="parameter">The converter parameter to use.</param>
    /// <param name="culture">The culture to use in the converter.</param>
    /// <returns>
    /// A converted value. If the method returns null, the valid null value is used.
    /// </returns>
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
}

/// <summary>
/// Represents a case for a switch converter.
/// </summary>
[ContentProperty("Then")]
public class SwitchConverterCase
{
    // case instances.
    string _when;
    object _then;

    #region Public Properties.
    /// <summary>
    /// Gets or sets the condition of the case.
    /// </summary>
    public string When { get { return _when; } set { _when = value; } }
    /// <summary>
    /// Gets or sets the results of this case when run through a <see cref="SwitchConverter"/>
    /// </summary>
    public object Then { get { return _then; } set { _then = value; } }
    #endregion
    #region Construction.
    /// <summary>
    /// Switches the converter.
    /// </summary>
    public SwitchConverterCase()
    {
    }
    /// <summary>
    /// Initializes a new instance of the <see cref="SwitchConverterCase"/> class.
    /// </summary>
    /// <param name="when">The condition of the case.</param>
    /// <param name="then">The results of this case when run through a <see cref="SwitchConverter"/>.</param>
    public SwitchConverterCase(string when, object then)
    {
        // Hook up the instances.
        this._then = then;
        this._when = when;
    }
    #endregion

    /// <summary>
    /// Returns a <see cref="System.String"/> that represents this instance.
    /// </summary>
    /// <returns>
    /// A <see cref="System.String"/> that represents this instance.
    /// </returns>
    public override string ToString()
    {
        return string.Format("When={0}; Then={1}", When.ToString(), Then.ToString());
    }
} 
```

最后，对于您需要的树视图组件.. 实际上，您甚至可以在每个单元格内放置另一个数据网格，以实现您需要的任何深度级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:32:14.613

我想您会发现带有一些巧妙模板的标准 WPF TreeView 可以解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:54:52.730

如果为这样的组件付费是一种选择，我强烈推荐 Telerik 组件。他们有很多控件，技术支持很棒。

您可以查看一些示例，了解他们的产品是否适合您的需求：

[用于 WPF 的 Telerik GridView](http://www.telerik.com/products/wpf/gridview.aspx)

[用于 WPF 的 Telerik TreeListView](http://www.telerik.com/products/wpf/treelistview.aspx)

# php - 如何获取两个日期之间的行

> ID：11051825
> 
> 赞同：-3
> 
> 时间：2012-06-15T13:43:19.057
> 
> 标签：php, mysql

在我的 MySQL 数据库中，我有一个`startdate`和一个`enddate`字段。使用 PHP 中的今天日期，有没有办法只选择`startdate`今天日期之前和今天日期`enddate`之后的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:45:03.943

尝试

```
WHERE startdate >= todays_date AND enddate <= todaysdate 
```

或者

```
WHERE todays_date BETWEEN startdate and enddate 
```

[BETWEEN 的文档在这里](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

而不是使用 PHP 来获取当前日期，而是使用 MySQL 函数中的构建[`CURDATE()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_curdate)：

```
WHERE startdate >= CURDATE() AND enddate <= CURDATE() 
```

或者

```
WHERE CURDATE() BETWEEN startdate and enddate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:45:08.570

尝试`BETWEEN`：

```
WHERE today between START_DATE AND END_DATE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:45:27.047

您可以利用 SQL 的 between 子句：

```
$query = "SELECT colList FROM table WHERE CURDATE() BETWEEN startdate AND enddate"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:49:28.363

您没有提供任何代码，所以我假设您在 db 中的开始和结束日期具有`datetime`数据类型，

`$today = date("Y-m-d H:i:s")`会产生类似的东西`2012-06-14 14:46:00`，这是Mysql可以理解的格式，所以可以在你的查询中使用它

`select * from 'your-table' where $today BETWEEN 'start_date' AND 'END_DATE'`

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:54:17.707

我的 PHP 和 SQL 都生锈了，但以下应该可以工作，其中 $date 是您放置今天日期的变量。

```
$results = mysqli_query( $conn, 
    "select * from yourTable where startdate<'{$date}' AND enddate>'{$date}'" ); 
```

# c++ - 与 boost::interprocess_mutex 相比，为什么不在共享内存中使用 boost::mutex？

> ID：11051834
> 
> 赞同：2
> 
> 时间：2012-06-15T13:43:44.187
> 
> 标签：c++, shared-memory, boost-interprocess, boost-mutex

现在已经有一段时间在愤怒中学习和使用提升共享内存，我已经得出了一个心智模型，什么时候使用什么类型的互斥锁，看起来像这样：

```
class IntendedToResideInProcessMemory {
    boost::mutex mutex_for_this_process; // 1
    boost::interprocess::interprocess_mutex
        ok_but_pointless_to_use_interprocess_mutex_here; // 2
}

class IntendedToBeCreatedInSharedMemory {
    boost::mutex bad_mutex_at_a_guess_this_will_allocate_something_on_heap;// 3
    boost::interprocess::interprocess_mutex
        good_for_multiprocess_shared_lock; // 4
} 
```

我希望我原则上没有弄错，所以如果是这样，请纠正我。我的意图是推进和纠正现有代码以及我自己的不符合这张图片但我想确定的代码。

这个问题的两个部分：我认为它确实没问题，但使用 //2 毫无意义 - 在上下文中这不如 //1 好，但原因是什么？表现？

对于 //3，我猜对了吗？有人可以给出它不起作用的技术幕后原因，或者至少在什么情况下它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:50:34.103

关于第 3 点：您`boost::mutex`的其他进程将看不到您。进程间互斥锁使用系统全局命名的对象，该对象可以被另一个进程访问，afaik，a`boost::mutex`没有。

您`boost::mutex`在共享内存中创建的，例如在 Windows 中，可能有`HANDLE`一个 Windows Mutex 对象，该对象将在您的进程的私有堆上分配。此堆对其他进程不可见。

如果你看这个[`boost::mutex`](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.mutex)类，它有这个`typedef`

`typedef platform-specific-type native_handle_type;`这是特定于平台的。

另一个例子：POSIX互斥体由它们的地址标识，这在进程之间是不同的感谢@DeadMG的例子:)

# objective-c - 获取 UIManagedDocument 的 URL

> ID：11051836
> 
> 赞同：1
> 
> 时间：2012-06-15T13:43:55.227
> 
> 标签：objective-c, ios, core-data, uimanageddocument

目前，我确定文档目录并检索其中的 URL，保存到数组属性：

```
// Returns an array of all the Vacations on file.
- (void)findVacationsOnFile
{
    self.vacationURLs = [[NSArray alloc] init];

    // Identify the documents folder URL.
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSError *errorForURLs      = nil;
    NSURL *documentsURL        = [fileManager URLForDirectory:NSDocumentDirectory
                                                     inDomain:NSUserDomainMask
                                            appropriateForURL:nil
                                                       create:NO
                                                        error:&errorForURLs];
    if (documentsURL == nil) {
        NSLog(@"Could not access documents directory\n%@", [errorForURLs localizedDescription]);
    } else {

        // Retrieve the vacation stores on file.
        NSArray *keys = [NSArray arrayWithObjects:NSURLLocalizedNameKey, nil];
        self.vacationURLs = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:documentsURL
                                                          includingPropertiesForKeys:keys
                                                                             options:NSDirectoryEnumerationSkipsHiddenFiles
                                                                               error:nil];
    }
} 
```

当我随后想要 UIMangedDocument 的 URL 时，我引用了该数组。但我怀疑 UIManagedDocument 已经知道它的 URL。我发现与此最接近的是persistentStoreName，但这是一种用于设置持久存储名称的方法。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:52:51.007

是的，它`UIManagedDocument`是一个具体的子类，`UIDocument`并且必须使用 URL 进行初始化。URL 存储到属性 fileURL（从 UIDocument 继承），可以像这样访问：

```
NSURL* url = myUIManagedDocument.fileURL; 
```

# java - 找不到主类，java错误

> ID：11051838
> 
> 赞同：3
> 
> 时间：2012-06-15T13:44:02.870
> 
> 标签：java, swing, startup

我一直在测试我一直在制作的 java swing 程序。在我的一台计算机上，即我最初制作的那台计算机上，它运行良好。我已经在 3 台不同的计算机上测试了相同的程序，当我从 ide 中启动它时它运行，但是当我双击 jar 时，我得到一个名为“Java Virtual machien Launcher”的弹出错误窗口。错误是“找不到主类：xxxxxxx。程序将退出。”

我一生都无法弄清楚发生了什么。它以前工作过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:05:57.267

您需要在 jar 中包含一个清单文件。在此，您指定启动 jar 时将哪个类用作入口点。

创建一个名为 Manifest.txt 的文件，并添加：

```
 Main-Class: yourMainClass.class 
```

然后，创建 jar ：

```
jar cfm JarName.jar Manifest.txt yourMainClass/*.class 
```

要从命令行运行，请使用：java -jar JarName.jar

# android - 如何在活动之间传递信息

> ID：11051839
> 
> 赞同：1
> 
> 时间：2012-06-15T13:44:05.680
> 
> 标签：android, android-intent

我已经在这里问了几次这个问题，但仍然没有足够的信心开始将东西扔进我的代码中，因为我担心我会破坏它已经拥有的功能。

我想要做的是与我可以发送/接收数据的设备建立蓝牙连接，并能够从几个不同的活动中访问它。我知道可以使用 Intents，但是任何人都可以尝试解释 Intents 是如何工作的吗？

我不明白如果我从一个 Activity 开始，我如何在该 Activity 中构建一个对象，然后结束它，并且仍然拥有该对象。当我在以下 Activity 中调用意图时，如何访问它？

我找不到带有自定义对象的 Activity 的示例代码，该对象通过一个意图传递，在另一个 Activity 中打开，然后再次通过另一个 Activity，依此类推。我能找到的只是字符串、整数的东西，而且这些方法似乎是为特定对象硬编码的。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:08:38.073

如果您想将自定义对象从 Activity 传递给另一个，您的对象必须实现 Parcelable 接口。

[在这里](http://pastebin.com/MGXtE415)你可以找到一个实现 Parcelable 的对象的例子。一旦你有了这个对象的一个​​实例，你就可以将它添加到一个意图并将它传递给其他活动。

假设您有 2 个活动：A 和 B。如果您想将自定义对象从 A 发送到 B，请尝试将您的 parceable 对象放入一个意图中，然后在活动 B 中将其取回。

```
// Activity A
Notebook myNotebook = new Notebook(); // the "Parcelable" object
Intent intent = new Intent(A.this, B.class);
intent.putExtra("object", myNotebook);
startActivityForResult(intent);

// Activity B
// in onCreate method
Notebook notebook = intent.getParcelableExtra("object"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:57:14.617

您没有找到传输复杂对象的好例子是有充分理由的：您不会这么想。可以有意地转移任何对象，将要转移的类声明为实现 Serializable 或 Parcalable。

但是 - 不建议这样做，除非你有充分的理由。创建“跨活动”对象（数据库、单音、服务..）的方法有无限种，并且在意图中传递复杂的对象是繁重的操作。这样做也会造成糟糕的表现。

无论如何 - 如果你想这样做，那就是这样：

这是传递可序列化对象的方法：

```
Intent intent =  new Intent();
    intent.putExtra(name, someInstanceOfClassWhichImplementsSerializableInterface); 
```

这是如何在其他活动中实现它：

```
getIntent().getSerializableExtra(name); 
```

关于在完成活动后您不了解对象如何仍然存在的问题 - **finish() 活动不会触发干扰器!!!，但会触发 onDestoy() 回调**。系统决定何时调用活动 distracor ，即使它是干扰物 - 它不会阻止 Intent 对象保持活力 - 因为没有人说你的活动是唯一持有对它的引用的活动。系统持有的意图引用，目的是将其传递给与它一起打开的新活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T14:01:23.863

使用意图，您可以发送序列化对象，就像将您的对象转换为字节流一样。如果您想按原样发送对象，则可以使用处理程序。例如

1.  使用服务（安卓服务）创建蓝牙连接
2.  在您的活动中定义处理程序，这将是静态对象
3.  从服务发送对象添加到 msg.obj 将该 msg 发送到处理程序

# ruby - “资源”- ruby gem 的目录

> ID：11051840
> 
> 赞同：6
> 
> 时间：2012-06-15T13:44:08.443
> 
> 标签：ruby, gem, ruby-c-extension

我目前正在尝试在 Ruby 中创建自己的 gem。gem 需要一些静态资源（比如 ICO 格式的图标）。我应该将这些资源放在我的 gem 目录树中的什么位置，以及如何从代码中访问它们？

此外，我的扩展部分是本机 C 代码，我希望 C 部分也可以访问资源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:53:35.957

您可以将资源放在任何您想要的位置，除了在`lib`目录中。由于它将成为 Ruby 加载路径的一部分，因此唯一应该存在的文件是您希望人们访问的文件`require`。

例如，我通常将翻译后的文本存储在`i18n/`目录中。对于图标，我只是将它们放入`resources/icons/`.

至于如何*访问*这些资源......我遇到了这个问题，为了避免重复，[我写了一个小宝石。](https://github.com/matheusmoreira/jewel)

基本上，我一直在这样做：

```
def Your::Gem.root
  # Current file is /home/you/code/your/lib/your/gem.rb
  File.expand_path '../..', File.dirname(__FILE__)
end

Your::Gem.root
# => /home/you/code/your/ 
```

我把它包装成一个很好的 DSL，添加了一些额外的便利的东西，最后得到了这个：

```
class Your::Gem < Jewel::Gem
  root '../..'
end

root = Your::Gem.root
# => /home/you/code/your/

# No more joins!
path = root.resources.icons 'your.ico'
# => /home/you/code/your/resources/icons/your.ico 
```

至于在 C 中访问您的资源，`path`只是一个[`Pathname`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html). 您可以将其作为字符串传递给 C 函数，打开文件并执行您需要执行的操作。你甚至可以将一个对象返回给 Ruby 世界：

```
VALUE your_ico_new(VALUE klass, VALUE path) {
    char * ico_file = NULL;
    struct your_ico * ico = NULL;

    ico_file = StringValueCStr(path);
    ico = your_ico_load_from_file(ico_file); /* Implement this */
    return Data_Wrap_Struct(your_ico_class, your_ico_mark, your_ico_free, ico);
} 
```

现在您可以从 Ruby 访问它：

```
ico = Your::Ico.new path 
```

# php - PHP Mcrypt，它到底有多安全？

> ID：11051845
> 
> 赞同：7
> 
> 时间：2012-06-15T13:44:20.273
> 
> 标签：php, encryption, mcrypt

目前我正在开发一个项目，该项目将处理一些非常敏感的个人信息，虽然它不是回溯帐号，但它仍然是敏感的个人信息，我想尽我所能将这些信息加密并安全地存储在 mysql 中尽可能。所以现在我正在努力寻找一些可以处理这些敏感信息的安全措施。

我发现加密/解密字符串和文本块的一种简单方法是使用 mcrypt。但是当我在 stackoverflow 上搜索 mcrypt 时，我注意到很多人说 mcrypt 毕竟不是那么安全。

所以现在我想知道，它到底有多安全？如果密钥安全存储，是否需要大量的黑客技能，比如说专家技能，才能破解和解密存储的信息？我是否需要害怕一个没有什么技能的黑客可以解密我要存储在 mysql 服务器中的加密信息？那么破解mcrypt加密的加密信息需要什么技巧呢？

如果 Mcrypt 不够用，有什么好的替代方案不像使用 gnupg 扩展那么复杂？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T15:29:36.207

您可以遵循一个小指南，以避免一些陷阱并应用一些建议。

*   不要为两条不同的消息重复使用相同的加密密钥和初始化向量 (IV)。

> 如果对手在传输过程中使用相同的密钥和 IV 设法截获两条或更多条消息，这样做将有暴露明文的风险。

*   不要使用ECB模式；OFB 和 CTR 模式稍微好一些，但建议使用 CBC 或 CFB 模式。

> 不使用 ECB 的主要原因是因为这种模式会泄漏有关重复纯文本块的信息，这可能会破坏您的编码数据流。
> 
> OFB 和 CTR 更好，但它们会遇到上述安全问题，即多次使用相同的 IV+组合键。
> 
> CFB 和 CBC 对 IV+key 重用最有弹性，但是具有相同公共前缀的单独消息会泄漏所述前缀的长度。此外，CFB 会泄露第一个不相同的纯文本块的差异。

*   确保您拥有强大的加密密钥

    > 它*不*应该从可打印的 ASCII 中选择（例如，*不是*“我的超强密钥”）；PBKDF2 将是首选（很快就会被原生支持，直到那时谷歌它）。很明显，这把钥匙必须妥善保管；如果你丢失了，再见数据。

*   使用良好的熵源来生成初始化向量。

    > Mcrypt 可以选择在您调用 MCRYPT_DEV_RANDOM 或 MCRYPT_DEV_URANDOM 时使用`mcrypt_create_iv()`。

希望对你有帮助 ：）

# inheritance - 更少的 CSS 继承

> ID：11051848
> 
> 赞同：3
> 
> 时间：2012-06-15T13:44:32.470
> 
> 标签：inheritance, less, code-reuse

假设我有一堂这样的课：

```
.navigation{
    display: block;
    ul li{
        float: left;
        a{display: block;}
    }

} 
```

..和以下标记：

```
<nav>
    <ul>
        <li><a href="#">Link One</a></li>
        <li><a href="#">Link Two</a></li>
    </ul>
</nav> 
```

现在，我想用我刚刚制作的课程来格式化我的导航。所以我会这样做：

```
nav{.navigation;} 
```

我的问题是：我不能让“ul”及其子元素像我预期的那样继承属性。只有“nav”标签获得“display:block”属性，但其他元素保持无样式。

有没有办法使用 Lesscss 重用这样的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:43:44.570

这不是正确的用法。如果要使用LESS，那么.navigation 不是类，而是mixin (.navigation())

```
.navigation(){
    display: block;
    ul{
       li{
          float: left;
          a{
             display: block;
          }
       }
    }
} 
```

然后你称之为 mixin

```
nav{.navigation;} 
```

另一种选择是不使用类：

```
nav{
   display: block;
   ul{
      li{
        float: left;
        a{
           display: block;
        }
      }
   }
} 
```

或与类：

```
<nav class="navigation">
<ul>
    <li><a href="#">Link One</a></li>
    <li><a href="#">Link Two</a></li>
</ul> 
```

```
.navigation{
    display: block;
    ul{
       li{
           float: left;
           a{
               display: block;
           }
       }
    }
} 
```

# asp.net-mvc-3 - MVC 4 项目 - 模态弹出窗口

> ID：11051850
> 
> 赞同：0
> 
> 时间：2012-06-15T13:44:34.473
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有一个我目前正在处理的 MVC 4 项目，需要一些关于如何实现模式弹出窗口的建议，最好是在 jQuery 中。

例如，在我看来，我有一个邮政编码文本框，旁边有一个查找按钮。用户可以直接输入邮政编码，也可以点击查找按钮。如果用户单击按钮，我希望有一个模式弹出窗口，用户可以在其中输入城市和州并获取邮政编码列表，选择一个，然后将该值发布到原始表单上的邮政编码框中.

这只是一个例子，我对此观点有更多的看法，但这是最容易解释的。

有人有任何提示、链接或示例代码吗？

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:48:11.897

> 如何实现模态弹出窗口，最好是在 jQuery 中。

通常带有和处理的[jQuery 对话框](http://jqueryui.com/demos/dialog/)是您想要的`modal : true``beforeClose`

```
$(foo).dialog({ 
     modal: true,
     beforeClose: function(event, ui) { ... }
}) 
```

# crystal-reports-2008 - 在选择专家中使用数组，可以吗？

> ID：11051852
> 
> 赞同：1
> 
> 时间：2012-06-15T13:44:37.647
> 
> 标签：crystal-reports-2008

我目前在选择专家中有以下选择一堆领域：

```
{Order.OrderDate} in {?Start date} to {?End date} and
{Order.PostingCode} in ["j500", "j501", "j502"] 
```

我必须从 j500 一直添加到 j713。

是否可以将其指向字符串数组？

例如，在 java 中：

```
int count = 0;
int fieldnumber = 500;
String[] fieldarray = new String[214];

    while (count  < 214){
        System.out.println("j"+fieldnumber);
        fieldarray[count] = "j"+fieldnumber;
        fieldnumber++;
        count++;
    } 
```

所以在水晶中，我可以将水晶指向“fieldarray”字符串数组并说使用那里的所有东西。用水晶可以吗？如果是这样，怎么做？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:50:30.960

为什么不使用：

```
{Order.OrderDate} in {?Start date} to {?End date} and
{Order.PostingCode} >= "j500" and
{Order.PostingCode} <= "j713" 
```

# jquery - 如果数字匹配，则运行 jQuery 脚本

> ID：11051853
> 
> 赞同：1
> 
> 时间：2012-06-15T13:44:41.213
> 
> 标签：jquery, match

如果两行上的数字像这样匹配，我正在尝试找到一种触发 jQuery 脚本的方法：

```
CRC1: 82051E84
CRC2: 82051E84 
```

这些行将被粘贴到文本区域并使用提交按钮。如果 CRC1: 和 CRC2: 前缀之后的 8 位数字匹配，那么我需要在 textarea 下方的 div 中出现“匹配”一词。

小提琴：http: [//jsfiddle.net/Mobius1/6DdvV/1/](http://jsfiddle.net/Mobius1/6DdvV/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:52:31.303

你要走的路是使用这样的东西：

[http://jsfiddle.net/6DdvV/27/](http://jsfiddle.net/6DdvV/27/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:59:34.543

这个怎么样：

```
$('#submit').click(function() {
    var areaContent = $('#text').val();
    var lines   = areaContent.split(/^/m);

    var prefixLen = 'CRC1: '.length;
    var crc1 = lines[0].substr(prefixLen);
    var crc2 = lines[1].substr(prefixLen);

    $('#output').text( crc1 === crc2 ? 'Matched!' : 'Not matched!' );
    return false;
}); 
```

带有更新代码的[jsFiddle 。](http://jsfiddle.net/6DdvV/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:00:04.760

这是我快速破解的东西。它可能不是最有效的，但它可以完成工作。它还将匹配不止 2 个 CRC。

```
$('#submit').click(function() {
    var text = $("#text").val().split('\n'),
        crc = $.map(text, function(v) {
            v = /CRC\d+:\s(.*)/.exec(v);
            return v != null ? v[1] : null;
        }),
        match = $.grep(crc, function(v, i) {
            return $.inArray(v, crc) === i;
        });
    $('#output').text(match.length === 1 ? 'Match' : 'No Match');
}); 
```

演示：http: [//jsfiddle.net/6DdvV/31/](http://jsfiddle.net/6DdvV/31/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:00:35.587

这是答案

[http://jsfiddle.net/6DdvV/30/](http://jsfiddle.net/6DdvV/30/)

```
$(document).ready(function(){

    $('#submit').click(function() {

        var lines = $("#text").val().split("\n");
        var num_1=lines[0].split(": ")[1];
        var num_2=lines[1].split(": ")[1];
        if(num_1==num_2)
        {
           $("#output").html("Match");
        }
    });

    $("#clear").click(function() {;
        $("#output").text("");

    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:02:30.553

感谢小提琴，这应该对你有用：

```
$('#submit').click(function() {

    var str = $("#text").val();
    var lines = str.split("\n");

    if(lines[0].substr(4) == lines[1].substr(4)){
        $("#output").html("Matched");
    } else {
        $("#output").html("Not Matched");
    };

}); 
```

所以我们将字符串拆分成行，然后检查输出是否匹配。

# ruby-on-rails - Ruby on Rails - HABTM - 在一个控制器中将数据插入 2 个模型

> ID：11051858
> 
> 赞同：0
> 
> 时间：2012-06-15T13:44:59.020
> 
> 标签：ruby-on-rails, activerecord, has-and-belongs-to-many

我是 RoR 的初学者，在使用我的一些模型时遇到了问题。

基本上我在产品票预订之间有一个habtm关系。通过门票预订产品，反之亦然。

我还有一个供应商，它 has_many :products 和 has_many :reservations。

我想要做的是在用户选择供应商并看到它的产品后，他可以从该供应商那里选择他想要的产品。

在那个 reservations.new 中，我得到了一个表单，但是由于在“提交”操作之后我必须在 2 个模型中插入数据，所以我遇到了问题。

当我创建预订时，应该同时创建预订条目和票条目，票条目将具有reservation_id和product_id作为外键。

我的预订观点：

```
<%= form_for(@reservation) do |f| %>

Reservation Info
<div id="reservation_top"></div>
<div id="reservation">

<%= f.label :name %><br />
<%= f.text_field :name %>

<%= f.label :surname %><br />
<%= f.text_field :surname %>            

(...)

<%= f.hidden_field :supplier_id, :value => @reservation.supplier_id %> #to get the supplier ID

Products:

<%= f.fields_for :tickets do |t| %>     
<%= t.select("product_id",options_from_collection_for_select(@products, :id, :name))%>

#I also have another t.select and although this isn't my primary concern, I wanted this t.select option's to change according to what is selected on the previous t.select("product_id"). Something like a postback. How is it done in RoR? I've searched and only found observe_field, but I didn't understand it very much, can you point me in the right direction? thanks

<%end%>

<%= f.label :comments %>
<%= f.text_area :comments %>

<%= f.submit%>

<%end%> 
```

现在我认为问题出在我的控制器上，但我不明白该放什么，我目前有：

```
 def new
    @supplier=Supplier.find(params[:supplier_id])
    @reservation = Reservation.new(:supplier_id => params[:supplier_id])

    @ticket = Ticket.new(:reservation_id => params[@reservation.id])

    @products = Supplier.find(params[:supplier_id]).products
    @ticket = @reservation.tickets.build

    respond_to do |format|
           format.html 
           format.json { render :json => @reservation }
    end
  end

def create
  @reservation = Reservation.new(params[:reservation])

  respond_to do |format|             
      if @reservation.save
        @reservation.tickets << @ticket

      format.html { redirect_to @reservation, :notice => 'Reservation Successful' }
      else
      format.html { render :action => "new" }
      format.json { render :json => @reservation.errors, :status => :unprocessable_entity }
    end
  end 
```

我现在得到一个

```
Called id for nil, which would mistakenly be 4 
```

是因为它正在尝试创建票证并且没有reservation_id吗？

我以前从未处理过 habtm 关联。有小费吗？

提前致谢， 问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:13:08.743

查看日志中创建操作的 POST 参数。当需要保存数据时，这将准确地向您显示您必须从 params 处理哪些数据。

在

```
def create
  @reservation = Reservation.new(params[:reservation])
  respond_to do |format|
    if @reservation.save
      @reservation.tickets << @ticket 
```

那时@ticket 是什么？（我相信你的零）

我认为在生成响应之前看看你的@reservation 和@ticket 在你的新方法中看起来像什么也可能很有趣......记录每个对象的 .inspect 以确保你拥有你认为你拥有的东西。

在像您这样更复杂的保存中，我会将其全部包装在事务中。

# java - 没有同步或 volatile 关键字的延迟初始化

> ID：11051863
> 
> 赞同：15
> 
> 时间：2012-06-15T13:45:22.087
> 
> 标签：java, multithreading, concurrency

前几天 Howard Lewis Ship 发表了一篇名为[“我在 Hacker Bed and Breakfast 学到的东西”](http://tapestryjava.blogspot.com/2012/06/things-i-learned-at-hacker-bed.html)的博客文章，其中一个要点是：

> 通过延迟初始化只分配一次的 Java 实例字段不必是同步的或易失的（只要您可以接受跨线程的竞争条件以分配给该字段）；这是来自 Rich Hickey

从表面上看，这似乎与公认的关于跨线程内存更改可见性的智慧不一致，如果这在 Java Concurrency in Practice 一书或 Java 语言规范中有所涉及，那么我错过了它。但这是 HLS 在 Brian Goetz 出席的一次活动中从 Rich Hickey 那里得到的，所以看起来肯定有什么东西。有人可以解释一下这句话背后的逻辑吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T13:57:18.780

这句话听起来有点神秘。但是，我猜 HLS 是指您懒惰地初始化实例字段并且不在乎多个线程是否多次执行此初始化的情况。
例如，我可以指向类的`hashCode()`方法`String`：

```
private int hashCode;

public int hashCode() {
    int hash = hashCode;
    if (hash == 0) {
        if (count == 0) {
            return 0;
        }
        final int end = count + offset;
        final char[] chars = value;
        for (int i = offset; i < end; ++i) {
            hash = 31*hash + chars[i];
        }
        hashCode = hash;
    }
    return hash;
} 
```

如您所见，对`hashCode`字段（保存计算的 String 哈希的缓存值）的访问未同步，并且该字段未声明为`volatile`. 任何调用`hashCode()`方法的线程仍然会收到相同的值，尽管`hashCode`字段可能被不同的线程多次写入。

这种技术的可用性有限。恕我直言，它主要用于示例中的情况：一个缓存的原始/不可变对象，它是从其他最终/不可变字段计算出来的，但是它在构造函数中的计算是多余的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T13:47:13.310

人力资源管理系统。当我读到这篇文章时，它在技术上是不正确的，但在实践中还可以，但有一些警告。只有 final 字段可以安全地初始化一次并在多个线程中访问而无需同步。

延迟初始化的线程可能会以多种方式遭受同步问题。例如，您可以有构造函数竞争条件，其中类的引用已被导出*，而*类本身没有完全初始化。

我认为这在很大程度上取决于您是否拥有原始字段或对象。在您不介意多个线程进行初始化的情况下，可以多次初始化的原始字段可以正常工作。然而`HashMap`，以这种方式初始化样式可能会出现问题。甚至`long`某些架构上的值可能会在多个操作中存储不同的单词，因此可能会导出一半的值，尽管我怀疑 a`long`永远不会跨越内存页面，因此它永远不会发生。

我认为这在很大程度上取决于应用程序是否有*任何*内存障碍——任何`synchronized`块或对`volatile`字段的访问。魔鬼当然在细节中，执行延迟初始化的代码可能在具有一组代码的架构上正常工作，而不是在不同的线程模型或很少同步的应用程序中。

* * *

这是一个关于 final 字段的好文章作为比较：

> [http://www.javamex.com/tutorials/synchronization_final.shtml](http://www.javamex.com/tutorials/synchronization_final.shtml)
> 
> 从 Java 5 开始，final 关键字的一个特殊用途是并发武器库中非常重要且经常被忽视的武器。本质上，final 可用于确保在构造对象时，访问该对象的另一个线程不会看到该对象处于部分构造状态，否则可能会发生这种情况。这是因为当用作对象变量的属性时，final 在其定义中具有以下重要特征：

现在，即使字段被标记为final，如果是类，您可以修改类*内*的字段。这是一个不同的问题，您仍然必须为此进行同步。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T13:49:13.870

这在某些条件下工作正常。

*   可以尝试多次设置字段。
*   如果各个线程看到不同的值，那也没关系。

通常，当您创建未更改的对象时，例如从磁盘加载属性，在短时间内拥有多个副本不是问题。

```
private static Properties prop = null;

public static Properties getProperties() {
    if (prop == null) {
        prop = new Properties();
        try {
            prop.load(new FileReader("my.properties"));
        } catch (IOException e) {
            throw new AssertionError(e);
        }
    }
    return prop;
} 
```

在短期内，这比使用锁定效率低，但从长远来看，它可能更有效。（虽然属性有它自己的锁，但你明白了；）

恕我直言，它不是适用于所有情况的解决方案。

也许关键是在某些情况下您可以使用更宽松的内存一致性技术。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T13:51:49.843

我认为这种说法是不真实的。另一个线程可以看到一个部分初始化的对象，因此即使构造函数尚未完成运行，另一个线程也可以看到该引用。这在 Java Concurrency in Practice 中有所介绍，第 3.5.1 节：

```
public class Holder {

    private int n;

    public Holder (int n ) { this.n = n; }

    public void assertSanity() {
        if (n != n)
            throw new AssertionError("This statement is false.");
    }

} 
```

这个类不是线程安全的。

如果可见对象是*不可变*的，那么我就可以了，因为最终字段的语义意味着在其构造函数完成运行之前您不会看到它们（第 3.5.2 节）。

# javascript - 使用 jQuery 的链接事件监听器

> ID：11051867
> 
> 赞同：4
> 
> 时间：2012-06-15T13:45:34.020
> 
> 标签：javascript, jquery, jquery-ui

我有这个 HTML 结构

```
<div class="buttons">
    <button data-icon="ui-icon-disk" class="save">Save1</button>
    <button data-icon="ui-icon-check" class="ok">OK1</button>
    <button data-icon="ui-icon-trash" class="delete">Delete1</button>
    <button data-icon="ui-icon-close" class="close">Close1</button>
</div> 
```

页面中有很多像这样的块。
一些按钮带有点击处理函数（保存和删除按钮）。

我想要做的是：如果有人单击**确定**按钮，则应运行**相应的** **保存**按钮单击绑定功能。

我的代码：

```
$('.save').click(function(){
    alert('save');
});
$('.ok').click(function(){
    $('.save').click();
}); 
```

这是错误的，当我单击**确定**按钮时，**所有**保存按钮都会触发......不仅是同一按钮组中的那个。

[演示](http://jsfiddle.net/nMnm7/)说明我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:46:10.637

用于`$(this).siblings('.save').click()`仅选择单击按钮的同级，而不是整个文档中的所有匹配按钮。

演示： http: [//jsfiddle.net/ThiefMaster/nMnm7/2/](http://jsfiddle.net/ThiefMaster/nMnm7/2/)
文档： [http ://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T13:47:51.477

使用[兄弟姐妹](http://api.jquery.com/siblings/)

```
$('.ok').click(function(){
    $(this).siblings('.save').click();
}); 
```

[演示](http://jsfiddle.net/nMnm7/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:48:50.993

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

```
$('.ok').click(function(){
   $(this).siblings(".save").click();
}); 
```

# sql-server-2008 - SSIS OLE DB 条件“插入”

> ID：11051868
> 
> 赞同：2
> 
> 时间：2012-06-15T13:45:38.160
> 
> 标签：sql-server-2008, ssis

我不知道这是否可以完成，但基本上，我有以下数据流： ![SSIS 导入](../Images/4352bc161f909ecd612527816e96212c.png)

1.  从 XML 文件中提取数据（工作正常）
2.  只需根据封闭条件拆分记录（工作正常）
3.  由于某些字符集问题，不得不添加派生列对象（可能是更好的方法，但它有效）

现在“第 4 步”是我遇到的一个场景，我只想在我的数据库中插入具有相应匹配项的值，例如，XML 有大约 6000 条记录，从这些记录中，我可能有我需要匹配其中的 10 个并插入它们，而不是插入所有 6000 个并在事后进行比较（我也可以这样做，但希望有另一种方法）。我在想我可能能够在文件中的 ID 值匹配的 OLE DB DESTINATION 对象中执行 sql insert 命令，但这就是我不是 100% 清楚的，或者是否有可能。我应该简单地走临时表路线并在事后清理数据，还是可以直接在目标块中执行此操作？任何建议将不胜感激。

***编辑***

感谢 billinkc 的最后一条评论，我设法离得更近了一点，在那里我可以识别匹配项并使用该结果集，但不知何故，它似​​乎运行了两次数据流，这很奇怪....我进行了查找反对以查看它是否是导致它的原因，并且似乎是这种情况，为什么它会在添加查找的情况下运行整个流程两次？我应该总共有 8 个匹配项，我通过数据查看器输出确认了这一点，但是它似乎为同一个文件第二次运行它。

![在此处输入图像描述](../Images/1c5531861117665feeebac2d2c423dc1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:31:00.070

您是否有理由不能使用查找转换来查找现有记录。对其进行配置，以便将不匹配记录路由到不匹配输出，然后仅将找到的匹配连接器连接到“Navigator Staging Manager Funds”

我相信这回答了你的问题，但我想知道你是否表达了正确的愿望？我的假设是查找将与现有目标相反，因此查找返回 id 10 为一行。SSIS 中所有开箱即用的目标都只执行插入，因此找到匹配的行现在将加倍。当您正在寻找现有行时，这通常意味着您想要执行*更新*到现有行。如果是这种情况，则有一个专门设计的转换，即 OLE DB 命令。它是允许更新的组件。该组件存在性能问题，它对流经它的每行发出一个更新语句。对于10行，我认为没问题。否则，您将使用的模式是将所有新行（插入）写入目标表，然后将所有更改的行（更新）写入第二个暂存类型表。数据流完成后，使用 Execute SQL Task 执行基于集合的更新语句。

有处理组合 upserts 的第三方选项。我知道[Pragmatic Works](http://pragmaticworks.com/Products/Business-Intelligence/TaskFactory/Features.aspx)有一个选项，并且[任务和组件](http://ssisctc.codeplex.com/)站点上可能还有其他选项。

# nopcommerce - 如何更新 nopCommerce 2.5 (MVC) 中的现有实体？

> ID：11051869
> 
> 赞同：0
> 
> 时间：2012-06-15T13:45:43.550
> 
> 标签：nopcommerce

如何更新 nopCommerce 2.5 (MVC) 中的现有实体？

我确实对 Nop.Data > Mapping 文件夹下的类进行了更改。但是在我运行应用程序后，它并没有为数据库创建列。还有什么我需要做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T19:08:35.423

这是 Nop 团队创建的资源，用于指导您更新解决方案/实体

[http://www.nopcommerce.com/docs/73/updating-an-existing-entity-how-to-add-a-new-property.aspx](http://www.nopcommerce.com/docs/73/updating-an-existing-entity-how-to-add-a-new-property.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T07:58:38.047

在 Nop.Core\Domain 文件夹中添加新属性。

**注意：** Nop.Data > Mapping 用于表和实体类之间的映射。

手动在表中添加新列。 **需要在表中手动添加列。**

根据您的要求更改您的控制器和视图。

如果您想了解有关[在 NopCommerce 表中添加自定义字段的更多详细信息](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=20&cad=rja&uact=8&ved=0ahUKEwiLlJDc0PfOAhWMrI8KHXLWDf44ChAWCE8wCQ&url=http%3A%2F%2Fwww.lateshtclick.com%2Fblogpost%2Fhow-to-add-new-column-in-existing-table-in-nopcommerce&usg=AFQjCNEkDPFiH-otOP_9SaHCp9-UMwsI5w&sig2=j00kZ9povXzPnR5gnDcuMQ&bvm=bv.131783435,d.c2I "一步一步的解释")

# android - Android Maven：生命周期执行异常

> ID：11051874
> 
> 赞同：1
> 
> 时间：2012-06-15T13:46:01.380
> 
> 标签：android, exception, maven

这是我执行 mvn install 时引发的错误的堆栈跟踪：

```
 [INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 15.511s
[INFO] Finished at: Fri Jun 15 10:20:12 EDT 2012
[INFO] Final Memory: 14M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0:dex (default-dex) on project dp-marketplace: MojoExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /Users/dev/Workspace/App/dp-marketplace-android.git && /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -Xmx1024M -jar /Users/dev/Workspace/android-sdk-macosx/platform-tools/lib/dx.jar --dex --output=/Users/dev/Workspace/App/dp-marketplace-android.git/target/classes.dex /Users/dev/.m2/repository/org/ektorp/org.ektorp.android/1.3.1-SNAPSHOT/org.ektorp.android-1.3.1-SNAPSHOT.jar /Users/dev/.m2/repository/commons-codec/commons-codec/1.3/commons-codec-1.3.jar /Users/dev/.m2/repository/xpp3/xpp3/1.1.4c/xpp3-1.1.4c.jar /Users/dev/.m2/repository/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar /Users/dev/.m2/repository/com/actionbarsherlock/library/4.1.0/library-4.1.0.apklib /Users/dev/.m2/repository/com/google/guava/guava/10.0.1/guava-10.0.1.jar /Users/dev/.m2/repository/org/khronos/opengl-api/gl1.1-android-2.1_r1/opengl-api-gl1.1-android-2.1_r1.jar /Users/dev/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar /Users/dev/.m2/repository/com/google/android/android/4.0.1.2/android-4.0.1.2.jar /Users/dev/.m2/repository/org/ektorp/org.ektorp/1.3.1-SNAPSHOT/org.ektorp-1.3.1-SNAPSHOT.jar /Users/dev/Workspace/App/dp-marketplace-android.git/target/classes /Users/dev/.m2/repository/org/apache/commons/commons-lang3/3.0.1/commons-lang3-3.0.1.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar /Users/dev/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar /Users/dev/.m2/repository/commons-fileupload/commons-fileupload/1.2.2/commons-fileupload-1.2.2.jar /Users/dev/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.7/jackson-core-asl-1.9.7.jar /Users/dev/.m2/repository/org/json/json/20080701/json-20080701.jar /Users/dev/.m2/repository/xerces/xmlParserAPIs/2.6.2/xmlParserAPIs-2.6.2.jar /Users/dev/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar /Users/dev/.m2/repository/com/couchbase/android/couchbase-dp/2.0.0-31/couchbase-dp-2.0.0-31.jar /Users/dev/.m2/repository/com/google/android/support-v4/r7/support-v4-r7.jar /Users/dev/.m2/repository/com/couchbase/android/OtpErlang/r14b03/OtpErlang-r14b03.jar /Users/dev/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.7/jackson-mapper-asl-1.9.7.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpclient-cache/4.1.2/httpclient-cache-4.1.2.jar /Users/dev/.m2/repository/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar /Users/dev/.m2/repository/com/comp/press/dp-android-library/0.1-SNAPSHOT/dp-android-library-0.1-SNAPSHOT.apklib /Users/dev/.m2/repository/com/comp/couch-transfer/1.0-SNAPSHOT/couch-transfer-1.0-SNAPSHOT.jar, Result = 1 -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.2.0:dex (default-dex) on project dp-marketplace: 
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: 
    at com.jayway.maven.plugins.android.phase08preparepackage.DexMojo.runDex(DexMojo.java:232)
    at com.jayway.maven.plugins.android.phase08preparepackage.DexMojo.execute(DexMojo.java:116)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = /bin/sh -c cd /Users/dev/Workspace/App/dp-marketplace-android.git && /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -Xmx1024M -jar /Users/dev/Workspace/android-sdk-macosx/platform-tools/lib/dx.jar --dex --output=/Users/dev/Workspace/App/dp-marketplace-android.git/target/classes.dex /Users/dev/.m2/repository/org/ektorp/org.ektorp.android/1.3.1-SNAPSHOT/org.ektorp.android-1.3.1-SNAPSHOT.jar /Users/dev/.m2/repository/commons-codec/commons-codec/1.3/commons-codec-1.3.jar /Users/dev/.m2/repository/xpp3/xpp3/1.1.4c/xpp3-1.1.4c.jar /Users/dev/.m2/repository/commons-io/commons-io/2.0.1/commons-io-2.0.1.jar /Users/dev/.m2/repository/com/actionbarsherlock/library/4.1.0/library-4.1.0.apklib /Users/dev/.m2/repository/com/google/guava/guava/10.0.1/guava-10.0.1.jar /Users/dev/.m2/repository/org/khronos/opengl-api/gl1.1-android-2.1_r1/opengl-api-gl1.1-android-2.1_r1.jar /Users/dev/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar /Users/dev/.m2/repository/com/google/android/android/4.0.1.2/android-4.0.1.2.jar /Users/dev/.m2/repository/org/ektorp/org.ektorp/1.3.1-SNAPSHOT/org.ektorp-1.3.1-SNAPSHOT.jar /Users/dev/Workspace/App/dp-marketplace-android.git/target/classes /Users/dev/.m2/repository/org/apache/commons/commons-lang3/3.0.1/commons-lang3-3.0.1.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar /Users/dev/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar /Users/dev/.m2/repository/commons-fileupload/commons-fileupload/1.2.2/commons-fileupload-1.2.2.jar /Users/dev/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.7/jackson-core-asl-1.9.7.jar /Users/dev/.m2/repository/org/json/json/20080701/json-20080701.jar /Users/dev/.m2/repository/xerces/xmlParserAPIs/2.6.2/xmlParserAPIs-2.6.2.jar /Users/dev/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar /Users/dev/.m2/repository/com/couchbase/android/couchbase-dp/2.0.0-31/couchbase-dp-2.0.0-31.jar /Users/dev/.m2/repository/com/google/android/support-v4/r7/support-v4-r7.jar /Users/dev/.m2/repository/com/couchbase/android/OtpErlang/r14b03/OtpErlang-r14b03.jar /Users/dev/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.7/jackson-mapper-asl-1.9.7.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpclient-cache/4.1.2/httpclient-cache-4.1.2.jar /Users/dev/.m2/repository/org/slf4j/slf4j-api/1.6.4/slf4j-api-1.6.4.jar /Users/dev/.m2/repository/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar /Users/dev/.m2/repository/com/comp/press/dp-android-library/0.1-SNAPSHOT/dp-android-library-0.1-SNAPSHOT.apklib /Users/dev/.m2/repository/com/comp/couch-transfer/1.0-SNAPSHOT/couch-transfer-1.0-SNAPSHOT.jar, Result = 1
    at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:215)
    at com.jayway.maven.plugins.android.phase08preparepackage.DexMojo.runDex(DexMojo.java:230)
    ... 22 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我对 Maven 很陌生，我不确定到底是什么问题。有人对我应该如何着手解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:28:53.483

嗯..`android`依赖项应该有一个`provided`范围..添加`<scope>provided</scope>`解决了问题..

# javascript - 如何在 iPad 上打开 HTML 项目

> ID：11051878
> 
> 赞同：4
> 
> 时间：2012-06-15T13:46:13.223
> 
> 标签：javascript, html, ipad, safari

我有一个 HTML 项目（CSS/JS/jQuery），我想在 iPad（在 Safari 中）上进行测试。根据我的阅读，iOS 浏览器不支持该`file:///path/to/project`协议，即使支持，我也不相信您能够将文件系统导航到您的项目所在的位置。

如果我错了，请纠正我的任何信息，我是一个 Android 人，所以这对我来说是新的。尽管如此，我还是尝试使用一个名为 Fileapp 的应用程序来解决我的问题。我能够访问和加载我的项目，但它是在 Fileapp 的本机浏览器中，而不是 Safari（除非它实际上是 Safari 并且它只是被屏蔽了）。

有人知道我的问题的解决方案（最好是免费的）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T13:51:53.680

**2016 年更新**：

现在有几项服务使这变得容易。如果您没有自己的网络服务器，请查看以下免费服务之一，这些服务可以轻松地从您的 PC 更新实时网页：

[Heroku](https://devcenter.heroku.com/)

[Git 页面](https://pages.github.com/)

这两种服务都需要[使用 git，学习它](https://try.github.io/levels/1/challenges/1)，你不会后悔的。

FTP 或使用 Dropbox 向 iPad 提供 html 的日子已经一去不复返了。

如果您需要在未连接到 Internet 的情况下执行此操作，请查看这篇关于使用本地 IP 隧道的文章。这实际上会`localhost`在您的 PC 上打开 wifi 网络上的任何人都可以查看，无论 wifi 是否实际连接到 Internet。

[http://wesbos.com/localhost-mobile-device-testing/](http://wesbos.com/localhost-mobile-device-testing/)

我更喜欢 Heroku，因为我更有可能在位置和 PC 之间切换，而不是在没有 Internet 连接的 wifi 网络上。

***旧答案 2012***

获取一个[Dropbox](http://db.tt/yU240OS)帐户并将项目放在您的公共文件夹中。

右键单击以获取公共链接，然后在 iPad 上浏览到该位置。

* * *

当我从 iPad 应用程序获取链接时，它不起作用，它只显示带有 URL 结构的原始 html，如下所示

dropbox.com/s/...

当我访问网站并复制公共链接（仅当文件位于公共文件夹中时才可用）时，我得到了实际有效的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T22:58:44.563

Apache 可能不是用于本地项目的这种临时服务的最方便的网络服务器。相反，如果您使用的是 Mac 或安装了 Python 的 Linux 发行版（其中大部分），您可以启动一个网络服务器以在终端上使用单线服务您当前的工作目录：

```
python -m SimpleHTTPServer 
```

默认情况下，它将服务于端口 8000；您可以通过将另一个端口作为最终参数传递给命令来指定另一个端口。

要从其他设备（如 iPad 或手机）连接到此服务器，首先需要确保手机与 Mac 或 Linux PC 连接到同一本地网络。然后在电脑上运行

```
ifconfig 
```

并查看您的本地 IP 地址的输出，该地址将`inet addr`在输出中标记并列在“本地环回”以外的连接之一下。在我当前的 PC 上，我看到`inet addr:192.168.0.3`在连接下方列出`wlan0`。

现在，在您的手机上，打开您选择的浏览器并导航到您在`ifconfig`SimpleHTTPServer 所服务的任何端口上获得的 IP 地址。例如，[http://192.168.0.3:8000](http://192.168.0.3:8000)。您将看到与您启动服务器的目录相对应的目录列表，您可以从那里查看您感兴趣的任何文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-27T17:11:23.800

您的问题的答案是，即使使用 iPadOS，iPad 也不能替代 Windows、Linux 或 Mac。仍然有太多“无法从这里到达那里”的案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:28:18.463

正如 minitech 在原始问题的评论中指出的那样，该问题的一种解决方案是在我的本地网络上设置一个 apache 服务器并直接连接到它。这完全符合我的需要。

# sharepoint-2010 - 无法加载文件或程序集'Microsoft.Web.Design.Server

> ID：11051881
> 
> 赞同：0
> 
> 时间：2012-06-15T13:46:34.057
> 
> 标签：sharepoint-2010, tfsbuild

请帮忙，我在 TFS 上遇到错误。它抱怨它无法加载下面的程序集。该项目在我的电脑上运行良好。我通过没有这样的 dll 搜索 dll：Microsoft.Web.Design.Server。

有什么帮助吗？

System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Web.Design.Server，版本=14.0.0.0，文化=中性，PublicKeyToken=71e9bce111e9429c”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:19:52.047

构建服务器没有安装与本地计算机相同的软件。因此，当它去解决依赖关系时，它找不到它们。

当您的项目有 GAC 引用时，情况会更加复杂。

我建议将任何不是系统程序集的内容复制到文件夹并放入源代码管理中。然后，项目应将此程序集引用为文件引用，而不是 GAC 引用。

由于该文件现在处于源代码控制中，因此构建服务器可以使用它来在编译时解析程序集。

# android - 在安卓上创建数据库

> ID：11051882
> 
> 赞同：0
> 
> 时间：2012-06-15T13:46:34.573
> 
> 标签：android, database, sqlite

我必须使用四个表创建数据库，其中一个（命名为 table_file）具有来自其他表的外键，首先我尝试同时创建所有表，但 table_file 给了我与外键相关的错误，所以我评论了代码在我的 DBhelper 中创建此表，并且我成功创建了其他表，但是当我取消注释 tabe_file 创建代码 abd 尝试创建此表时，它说我：sqlite 返回：错误代码 = 1，msg = 没有这样的表：file_table 和我在logcat中有那个

```
06-15 13:26:19.841: E/Database(24784): Error inserting file_category_column=0 file_theme_column=0 file_name_column=priv_priv_222_2012-06-15.pdf file_date_creating_column=1
06-15 13:26:19.841: E/Database(24784): android.database.sqlite.SQLiteException: no such table: file_table: , while compiling: INSERT INTO file_table(file_category_column, file_theme_column, file_name_column, file_date_creating_column) VALUES(?, ?, ?, ?);
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1569)
06-15 13:26:19.841: E/Database(24784):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426) 
```

我该怎么做才能创建这个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:32:29.897

要将另一个表添加到现有数据库（假设您首先在应用程序中创建它），您可以更改您的`onUpgrade`方法。

`onUpgrade`每当需要升级数据库时调用。它通过检查您提供的版本号与上次打开数据库时存储的版本号来确定。您必须增加 VERSION_NUMBER 才能`onUpgrade`被调用。

```
@Override 
public void onUpgrade (SQLiteDatabase db, int oldVersion, int newVersion) { 
    db.executeSQL(DATABASE_CREATETABLE2); 
} 
```

DATABASE_CREATETABLE2 将是一个包含用于创建表的 sql 语句的字符串（大概就像您为其他表所做的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:57:41.473

请参阅 SQLite 上的本教程。

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

如果它抱怨没有这样的表，那么该表不存在。如果您正在升级当前架构，请确保您正在更新数据库版本，以便调用 onUpgrade()，并确保您正在执行 onUpgrade() 以便重新创建表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:59:09.253

我已经使用了一个类来实现某些功能，您可以尝试：

```
public PLSQLiteOpenHelper(Context context, String name, CursorFactory factory, int version, String tableNames[], String fieldNames[][], String fieldTypes[][]) {
    super(context, name, factory, version);
    TableNames = tableNames;
    FieldNames = fieldNames;
    FieldTypes = fieldTypes;
}

@Override
public void onCreate(SQLiteDatabase db) {
    if(TableNames == null){
        message = NO_CREATE_TABLES;
        return;
    }

    for(int i = 0; i < TableNames.length; i++){
        String sql = "CREATE TABLE " + TableNames[i] + "(";
        for(int j = 0; j < FieldNames[i].length; j++)
            sql += FieldNames[i][j] + " " + FieldTypes[i][j] + ",";
        sql = sql.substring(0, sql.length() - 1);
        sql += ")";
        db.execSQL(sql);
    }
} 
```

以上只是create函数。你可以试试看。

# android - 为单个字符串/整数解析 JSON 字符串数组

> ID：11051885
> 
> 赞同：0
> 
> 时间：2012-06-15T13:47:05.593
> 
> 标签：android, arrays, json, string, int

我正在通过 PHP 从 MySql DB 获取信息。信息在以下 JSON 数组中返回：

```
06-15 15:20:17.400: E/JSON(9865): {"tag":"get_game_state","success":1,"error":0,"GameState":{"monster":"Troll","qty":"1","exp":"0"}} 
```

解析 json 并使用`StringBuilder`. 现在我已经返回了信息，我想解析它包含的单个字符串/整数，以将它们放入本地 sqlite 数据库中。

这是有问题的两行

```
 userFunctions.getServerGameState(email, monster, qty, exp); //this line gets the JSON array and the above information is returned
            db.saveLocalGameSate(monster, qty, exp); //this line should take that information take String monster int exp and int qty and put them in the local db. 
```

我应该如何将返回的信息转换为单独的字符串和整数，以便它们可以在下一行代码中使用？对某些资源的任何指导都会非常有帮助。

**更新**

我在上面两行代码之间添加了以下行，输出是空指针异常

```
 try {
            JSONArray arr = new JSONArray(GameState);
            JSONObject jObj = arr.getJSONObject(0);
            String virtumon = jObj.getString("monster");
            Integer qty = jObj.getInt("qty");
            Integer exp = jObj.getInt("exp");

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:52:25.133

这实际上不是 JSON 数组；它是一个 JSON 对象（因为大括号而不是方括号。）

JSONObject() 的构造函数之一接受包含 JSON 的字符串，并将解析它并创建一个 JSON 对象。我还不能发布链接，但可以在 d.android.com 上查看 JSONObject 文档。

一旦你有了一个 JSONObject，你就可以使用 getString()、getInt()、optString() 和 optInt() 来提取你需要的数据。

* * *

假设 'responseString' 是完整的响应字符串：

```
try {
  JSONObject responseObj = new JSONObject(responseString);
  JSONObject gameStateObj = responseObj.getJSONObject("GameState");
  String monsterType = gameStateObj.getString("monster");
  int qty = Integer.parseInt(gameStateObj.getString("qty"));
  int exp = Integer.parseInt(gameStateObj.getString("exp");
} catch (JSONException ex) {
  e.printStackTrace();
} 
```

“qty”和“exp”是你的json中的字符串，所以你需要getString然后转换为int。我认为这段代码是正确的；没有测试过。

# java - 使用 Java 打开 Arduino 上的 LED

> ID：11051890
> 
> 赞同：2
> 
> 时间：2012-06-15T13:47:17.053
> 
> 标签：java, stream, serial-port, arduino, led

我安装了 Java 串行 RXTX 库并正确设置了我的 Arduino。我什至已经启动并运行了示例代码，但我似乎无法理解如何访问不同的 Arduino 引脚以例如打开 LED。如何使用 OutputStream 或任何其他方式访问引脚？

我是否需要向流发送一些特殊的东西才能告诉它特定的引脚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:55:06.653

开箱即用的 Arduino 不提供从串行链路控制 I/O 端口的任何方法。

您将需要获取或编写一个*在 Arduino 上运行*并侦听来自串行端口的命令以控制 I/O 引脚的程序。因为 Arduino 上面只有一个小型微控制器，所以你可能无法用 Java 编写这个程序。

这是一个在 Arduino 上运行的示例程序，它通过串行线路读取以十进制 ASCII 字符拼写的数字，然后使用这些数字来控制 RGB LED。您应该能够使用此示例来了解如何解决问题的 Arduino 方面，并且您的 Java RXTX 代码可以发送整数来控制它一旦工作。

[http://arduino.cc/en/Tutorial/ReadASCIIString](http://arduino.cc/en/Tutorial/ReadASCIIString)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:52:33.820

我不确定我的代码的可读性如何，或者安装它的难易程度，但我写了一个小项目通过 RXTX 与 Arduino 对话。你可以在这里看到我的代码：

[https://github.com/p90puma/SerialToIR](https://github.com/p90puma/SerialToIR)

它应该给你一些想法。

这三个文件应该为您提供所需的一切：

*   [RXTX 代码](https://github.com/p90puma/SerialToIR/blob/master/ArduinoWS/src/main/java/com/p90puma/arduinows/ArduinoSerialPortListener.java)

*   [界面](https://github.com/p90puma/SerialToIR/blob/master/ArduinoWS/src/main/java/com/p90puma/arduinows/ArduinoWS.java)

*   [阿杜诺素描](https://github.com/p90puma/SerialToIR/blob/master/ArduinoHardware/SerialToIR.pde)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T19:44:47.907

先前答案中的所有信息都是正确的。Arduino 本身并不与运行 Java 的计算机对话并做任何事情。您需要将代码放到 Arduino 上，该代码将使用某种协议与您的计算机对话。

事实证明，存在一套标准的代码。它被称为Firmata。有关Firmata 主页，请参见[http://firmata.org/wiki/Main_Page 。](http://firmata.org/wiki/Main_Page)有关Firmata 和处理的讨论，请参见[http://playground.arduino.cc/Interfacing/Processing 。](http://playground.arduino.cc/Interfacing/Processing)

Processing是一个基于Java的PC/Mac/Linux编程环境。Processing 和 Arduino 项目密切相关。

尝试各种示例。将 Processing 和 Arduino IDE 放在您的计算机上。将 Firmata 上传到您的 Arduino 并使用 Processing / Firmata 示例来尝试一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:52:11.723

不，Arduino 本身可以访问自己的引脚。您使用 Java 将串行数据发送到 Arduino，然后它决定使用哪个引脚/代码。

因此，在您的 Arduino 代码中，您可以从以下内容开始：

```
Serial.begin(9600);
...
... 
```

要从 Java 进行串行连接，您可以使用该`SerialPortEventListener`接口。

# java - 在 UI 级别或通过后端服务解析 xlsx 或 csv？

> ID：11051895
> 
> 赞同：0
> 
> 时间：2012-06-15T13:47:55.217
> 
> 标签：java, parsing

这两个选项中哪一个更好，在 UIlevel 级别解析 xlsx 或 csv，或者将其作为 blob 传递给后端服务，然后解析它？

# javascript - KnockoutJS 绑定到键/值对

> ID：11051896
> 
> 赞同：5
> 
> 时间：2012-06-15T13:47:57.487
> 
> 标签：javascript, mvvm, knockout.js

我正在尝试使用 KnockoutJS 绑定到键/值对数据：

```
this.personal = {
  "name" : "Chuck",
  "country" : "USA"
}; 
```

在我的 HTML 中，我使用 $data 绑定：

```
<ul data-bind="foreach: personal">

  <li data-bind="text: $data"></li>

</ul> 
```

这导致：

```
[object Object]

[object Object] 
```

如果我想看到这个，有谁知道我的绑定应该是什么样子：

```
name: Chuck

country: USA 
```

换句话说...我如何显示属性名称和属性值？

编辑：有人指点我：[https](https://github.com/jamesfoster/knockout.observableDictionary) ://github.com/jamesfoster/knockout.observableDictionary但我仍然希望在没有额外库的情况下绑定

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-23T19:27:58.700

有一种使用 Knockout.js 绑定到键值对的更简单方法。假设您有一个如下所示的键值对

```
myItems: [
            { Name: 'Item 1', Value: 1},
            { Name: 'Item 3', Value: 3},
            { Name: 'Item 4', Value: 4}
        ], 
```

只需使用以下 html 绑定到键值对。

```
<select data-bind="options: myItems, optionsText: 'Name', optionsValue: 'Value'></select> 
```

参考：

[http://knockoutjs.com/documentation/options-binding.html](http://knockoutjs.com/documentation/options-binding.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-21T03:03:36.580

尝试这样的事情：

```
<ul data-bind="keyvalue: properties">
    <li>
        <span data-bind="text: key"></span> :
        <span data-bind="text: value"></span>
    </li>
</ul> 
```

对于 JavaScript：

```
function AppViewModel() {
    this.properties = { b: 'c', d: 'e' };
}

ko.bindingHandlers['keyvalue'] = {
    makeTemplateValueAccessor: function(valueAccessor) {
        return function() {
            var values = valueAccessor();
            var array = [];
            for (var key in values)
                array.push({key: key, value: values[key]});
            return array;
        };
    },
    'init': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        return ko.bindingHandlers['foreach']['init'](element, ko.bindingHandlers['keyvalue'].makeTemplateValueAccessor(valueAccessor));
    },
    'update': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        return ko.bindingHandlers['foreach']['update'](element, ko.bindingHandlers['keyvalue'].makeTemplateValueAccessor(valueAccessor), allBindings, viewModel, bindingContext);
    }
};

ko.applyBindings(new AppViewModel()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-29T13:34:00.210

在视图模型中创建一个函数，将对象属性名称和值转换为对象数组，其键和值属性包含上述名称和值。

```
var ExampleViewModel = function () {
    var self = this;

    self.personal = {
        "name": "Loek",
        "country": "Netherlands"
    };

    self.personalList = function () {
        var list = [];

        for (var i in self.personal) if (self.personal.hasOwnProperty(i)) {
            list.push({
                "key": i,
                "value": self.personal[i]
            });
        }

        return list;
    };
}; 
```

您的 html 模板应如下所示：

```
<ul data-bind="foreach: personalList()">
    <li data-bind="text: $data.key + ': ' + $data.value"></li>
</ul> 
```

这将产生以下输出：

*   姓名：洛克
*   国家：荷兰

[这是一个工作示例的小提琴。](http://jsfiddle.net/DemonGenius/wxLhocw9/3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:58:33.280

我认为你应该这样做

```
<ul data-bind="foreach: personal">
  <li data-bind=" text: country"></li>
  <li data-bind=" text: name"></li>
</ul>​

// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {
    // Use an array here
    this.personal = [{
        "name": "Loek",
        "country": "Netherlands"
    }];
}

// Activates knockout.js
ko.applyBindings(new AppViewModel());​ 
```

小提琴[http://jsfiddle.net/Aw5hx/](http://jsfiddle.net/Aw5hx/)

PS在这篇文章之前我从未使用过knockoutJS，所以我不是世界专家。

# javascript - 任何人都可以推荐一个包含搜索框的选择选项？

> ID：11051897
> 
> 赞同：-2
> 
> 时间：2012-06-15T13:48:05.133
> 
> 标签：javascript, html, css, frameworks

我必须创建一个字段，我将能够在 200-300 个选项之间进行选择，并且我希望有一个搜索框以方便在我的选择选项中导航。

有什么推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:50:52.537

使用[本地源的](http://jqueryui.com/demos/autocomplete/#option-source)[jQuery 自动完成](http://jqueryui.com/demos/autocomplete/)

```
$( ".selector" ).autocomplete({ source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"] }); 
```

# symfony - 使用 Symfony2 多对一嵌入式表单添加的新实体未保存

> ID：11051906
> 
> 赞同：1
> 
> 时间：2012-06-15T13:48:47.333
> 
> 标签：symfony, annotations, one-to-many, twig

这与我[之前关于嵌入式表单的问题有关](https://stackoverflow.com/questions/11015952/using-jquery-in-symfony2-php-template#comment14431438_11015952)。按照建议，我切换到树枝模板，现在一切都按预期显示，添加新空表单的链接正常工作。问题是当我尝试保存新记录时，它不起作用（尽管保存了对现有实体的编辑）。

有几点我可能出错了，所以我会在进行过程中提出问题。

这里有一些背景：
一项研究可以有许多参与者（即，研究实体与实体参与者具有 OneToMany 关系）。在数据库中，每个 Participant 记录都有从“study”列到 Study 表中记录的“study_id”列的外键链接，使其成为关系的拥有方。类中的注释应该反映这种关系。

学习班：

```
namespace MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
* CRUK\MyBundle\Entity\Study
*
* @ORM\Table(name="study")
* @ORM\Entity
*/
class Study
{
    /**
    * @var integer $id
    *
    * @ORM\Column(name="study_id", type="integer", nullable=false)
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="IDENTITY")
    */
    private $id;

    /**
     * @var string $studyName
     *
     * @ORM\Column(name="study_name", type="string", length=50, nullable=false)
    */
    private $studyName;

    /*
     * @ORM\OneToMany(targetEntity="Participant", mappedBy="study", cascade={"persist"})
     * 
     * @var ArrayCollection $participants
     */
     protected $participants;

     public function __construct() 
    {
        $this->participants = new ArrayCollection();
    }

    public function setParticipants(ArrayCollection $participants)
    {
        foreach($participants as $participant)  {
            $participant->setStudy($this);
        }
        $this->participants = $participants;
    }

    /**
     * @return ArrayCollection A Doctrine ArrayCollection
     */
    public function getParticipants()
    {
        return $this->participants;
    }
} 
```

我的参与者班级：

```
namespace MyBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * CRUK\SampleTrackingBundle\Entity\Participant
 *
 * @ORM\Table(name="participant")
 * @ORM\Entity
 */
 class Participant
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="participant_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
    ...

   /**
    * @var study
    *
    * @ORM\ManyToOne(targetEntity="Study", inversedBy="participants") 
    * @ORM\JoinColumn(name="study", referencedColumnName="study_id")
    * 
    */
    private $study;

    //setters and getters...
} 
```

首先，这些注释是否正确？（我很确定我脑子里有整个拥有/反向多对一/一对多关系，但我可能弄错了）

我的控制器：

```
Class StudyController extends Controller
{
    ...
    public function addParticipantsAction($id)
    {
        $em = $this->getDoctrine()->getEntityManager();

        $entity = $em->getRepository('MyBundle:Study')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Study id='.$id);
        }
        $participantArray = $em->getRepository('MyBundle:Participant')->findByStudy($id);
        //this is supposed to return a Doctrine ArrayCollection, but for some reason, returns an array
        // This needs to be converted to an ArrayCollection
        $participants = new ArrayCollection();
        foreach ($participantArray as $participant) {
           $participants->add($participant);
        }
        $entity->setParticipants($participants);
        $form   = $this->createForm(new StudyType(), $entity);
        $request = $this->getRequest();

        if ('POST' === $request->getMethod()) {
            $form->bindRequest($request);
            if ($form->isValid()) {
                $em->persist($entity);
                $em->flush();
            }
        }

        return $this->render('MyBundle:Study:addParticipants.html.twig', array(
            'form' => $form->createView(),
            'entity' => $entity
        ));
    }
...
} 
```

此时我要问为什么需要显式获取参与者的集合并使用它来设置研究实体上的集合？在我添加该代码之前，$entity->getParticipants() 将返回 null（即使我知道有几个参与者为研究设置了外键）。我在多对多关系中还有另外两个表，其中集合似乎只是通过在实体类中具有正确的注释而自动出现。这是多对多映射与多对一之间的区别，还是我以某种方式弄乱了注释？

我不确定其余的代码是否会有所帮助，但还有更多：我的学习表格类：

```
class StudyType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('studyName', null, array('label'=> 'Study Name:'))
            ->add('participants', 'collection', array(
                'type'=> new ParticipantType(), 
                'allow_add'=>true,
                'by_reference'=>false
              ));
    }

    public function getName()
    {
        return 'study';
    }

    public function getDefaultOptions(array $options) 
    {
        return array(
            'data_class' => 'MyBundle\Entity\Study',
        );
    }
} 
```

我的嵌入式表单类：

```
class ParticipantType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
    $builder
        ->add('participantId','text', array('label'=>'Participant ID'))

        ));
    }

    public function getName()
    {
        return 'participant';
    }

    public function getDefaultOptions(array $options) 
    {
      return array(
          'data_class' => 'MyBundle\Entity\Participant',
      );
    }
} 
```

我的模板：

```
{% extends 'MyBundle::base.html.twig' %}

{% block body%}
  <form action="{{ path('study_addparticipants', { 'id': entity.id }) }}" method="POST" {{ form_enctype(form) }}>
    <!-- renders global errors -->
    {{ form_errors(form)  }}
    <h2>Study</h2>
    {{ form_label(form.studyName) }}
    {{ form_errors(form.studyName) }}
    {{ form_widget(form.studyName) }}

    <h3>Participants in this study</h3>
    <ul class="participants" data-prototype="{{ form_widget(form.participants.get('prototype')) | e }}">
        {% for participant in form.participants %}
            <li>{{form_row(participant) }}</li>
        {% endfor %}
    </ul>
    {{ form_rest(form) }}
    <button type="submit">Save Changes</button>
  </form> 
{% endblock%}

{% block javascripts %}
   {# parent block includes jQuery #}
   {{ parent() }}

  <script type='text/javascript'>
      jQuery(document).ready(function() {
        // keep track of how many participant fields have been rendered
        var collectionHolder = $('ul.participants');
        var $addLink = $('<a href="#" class="add_participant_link">Add new Participant</a>');
        var $newLinkLi = $('<li></li>'). append($addLink);
        collectionHolder.append($newLinkLi);
        $addLink.on('click', function(e) {
           e.preventDefault();
           addParticipantForm(collectionHolder, $newLinkLi);
        });
      });

      function addParticipantForm(collectionHolder, $newLinkLi) {
         // Get the data-prototype we explained earlier
        var prototype = collectionHolder.attr('data-prototype');

       // Replace '$$name$$' in the prototype's HTML to
       // instead be a number based on the current collection's length.
       var newForm = prototype.replace(/\$\$name\$\$/g, collectionHolder.children().length);

      // Display the form in the page in an li, before the "Add a tag" link li
      var $newFormLi = $('<li></li>').append(newForm);
      $newLinkLi.before($newFormLi);
    }
  </script>

{% endblock %} 
```

因此，表单正确显示，当我单击“添加新参与者”链接时，会附加一个空的参与者表单。保存对研究和现有参与者记录的更改。没有错误，但不会保存任何新参与者。

我已经阅读了许多与此问题类似的问题，据我所知，包含了应该使这项工作正常进行的所有内容。我显然错过了一些东西，所以如果有任何关于如何解决这个问题的建议，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T07:45:42.183

感谢@Luke 的建议。我通过遍历我的研究对象的参与者集合并将每个对象单独保存在我的控制器中解决了这个问题。新的控制器代码：

```
...
    if ('POST' === $request->getMethod()) {
        $form->bindRequest($request);
        if ($form->isValid()) {
            $em->persist($entity);
            foreach($entity->getParticipants() as $participant) {
              $em->persist($participant);
            }
            // flush once to commit all entities
            $em->flush();
        }
   }
... 
```

# android - 从 sqlite 检索数据并预览

> ID：11051907
> 
> 赞同：0
> 
> 时间：2012-06-15T13:48:48.700
> 
> 标签：android, sqlite

当我按下它时，我有一个按钮，我开始一个新的活动`myActivity`。`myActivity`我想要预览从中检索到的一些数据的布局`myDataBase`，但是当我更改`TextView`程序崩溃的文本时，这是我的代码。

```
public class myActivity extends Activity {

TextView tv1;
myDataBase DB;
String s;
String reqName
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.information);
    tv1 = (TextView)findViewById(R.id.testtest);

    Bundle bundle = getIntent().getExtras();
    reqName = bundle.getString("someKey");
        DB = new myDataBase(this);
    new GetSomeData().execute(reqName);
}
public class GetSomeData extends AsyncTask<String,Integer ,String>
{
@Override
protected String doInBackground(String... arg0) {
    // TODO Auto-generated method stub
    try
    {
    String name = reqName;
    DB.open();
    s = DB.getData(name);
    DB.close();
    }
    catch(Exception e)
    {
    e.printStackTrace();

    }

    tv1.setText(s);  // this line makes the program crash
    return s;

}   
}} 
```

我认为程序崩溃是因为跨线程（我不确定！），我该如何解决这个问题？预览数据库中的数据有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:52:53.033

不允许从后台线程修改 UI 元素。An`AsyncTasks`的`doInBackground()`方法在后台线程中运行，这就是您收到错误的原因。

相反，将`String`您希望设置为`TextView`从您的`doInBackground()`方法返回到该`onPostExecute()`方法，然后将其设置`String`为您的`TextView`那里。这是可行的，因为`onPostExecute()`在主线程中运行，也称为“UI 线程”。

```
public class GetSomeData extends AsyncTask<String,Integer ,String> {
   @Override
   protected String doInBackground(String... arg0) {
      // TODO Auto-generated method stub
      try {
         String name = reqName;
         DB.open();
         s = DB.getData(name);
         DB.close();
      } catch(Exception e) {
         e.printStackTrace();
      }
      return s;
   } 

   @Override
   protected void onPostExecute (String s) {
      tv1.setText(s);
   }
} 
```

# android - 是否可以检查 TabWidget 中的特定“TAB”是否在当前视图中可见？

> ID：11051909
> 
> 赞同：4
> 
> 时间：2012-06-15T13:48:52.243
> 
> 标签：android, view, tabs, tabwidget, horizontalscrollview

我有`TabWidget`5 个标签。**标签**：“一”、“二”、“三”、“四”、“五”。是`TabHost`在一个`HorizontalScrollView`. 现在，我在 的每一侧各有一个箭头（< 和 >）`TabWidget`，表示该方向上有更多选项卡（当前在视图中不可见）。

现在我想做的是，如果第一个选项卡不可见（**在当前视图中**），那么向左的箭头（<）应该是可见的，如果最后一个选项卡不可见（**在当前视图中**），那么向右的箭头应该可见，如果两个选项卡都不可见（**在当前视图中**），则两个箭头都应该可见。我尝试这样做：

```
if (horizontablscrollview.getLeft == 0)
{
   arrowRight.setVisiblity(View.VISIBLE)
   arrowLeft.setVisiblity(View.INVISIBLE)
}
else if( horizontablscrollview.getRight == 0)
{
   arrowLeft.setVisiblity(View.VISIBLE)
   arrowRight.setVisiblity(View.INVISIBLE)
}

else if ( horizontablscrollview.getRight == 0 && horizontablscrollview.getLeft == 0)
{
    arrowRight.setVisiblity(View.VISIBLE)
    arrowLeft.setVisiblity(View.VISIBLE)
} 
```

但这不起作用，我的两个选项卡在开始时都是不可见的：

**我的xml看起来像这样..**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff" >

    <RelativeLayout
        android:id="@+id/RL_Header"
        android:layout_width="fill_parent"
        android:layout_height="50dip"
        android:layout_marginBottom="3dip"
        android:background="@drawable/gradient" >

        <ImageButton
            android:id="@+id/btn_Home"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="3dp"
            android:background="@android:color/transparent"
            android:contentDescription="@string/description_home"
            android:onClick="onHomeButtonClick"
            android:src="@drawable/title_home" />

        <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginRight="5dip"
            android:layout_marginTop="5dip"
            android:background="@android:color/transparent"
            android:contentDescription="@string/description_about"
            android:onClick="onClickAbout"
            android:src="@drawable/title_about" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/FL_Tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/RL_Header" >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/FL_Tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/RL_Header" >

        <TabHost
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@android:id/tabhost"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#ffffff" >

                    <ImageView android:id="@+id/arrow_left"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/i_button"
                        android:layout_alignParentLeft="true"/>            

            <RelativeLayout
                android:id="@+id/rl_tabs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                    <ImageView android:id="@+id/arrow_left"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/i_button"
                        android:layout_alignParentLeft="true"
                        android:visibility="invisible"/>

                    <ImageView android:id="@+id/arrow_Right"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/i_button"
                        android:layout_alignParentRight="true"
                        android:visibility="invisible"/>                    

                <HorizontalScrollView
                    android:id="@+id/my_scrollView"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:fillViewport="true"
                    android:scrollbars="none" 
                    android:layout_toRightOf="@+id/arrow_left"
                    android:layout_toLeftOf="@+id/arrow_Right">

                    <TabWidget
                        android:id="@android:id/tabs"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:tabStripEnabled="true"/>
                </HorizontalScrollView>
            </RelativeLayout>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:paddingTop="65dip" >

                <RelativeLayout
                    android:id="@+id/myTabContent"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="50dip" >

                    <TableLayout
                        android:id="@+id/tabSubs"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="#ffffff"
                        android:shrinkColumns="*"
                        android:stretchColumns="*" >

                        <TableRow
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="20dip"
                            android:layout_marginTop="20dip"
                            android:gravity="center_horizontal" >

                            <Button
                                android:id="@+id/btntestno1"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 1"
                                android:textColor="#000000" />

                            <Button
                                android:id="@+id/btntestno2"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 2"
                                android:textColor="#000000" />
                        </TableRow>

                        <TableRow
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="20dip"
                            android:gravity="center_horizontal" >

                            <Button
                                android:id="@+id/btntestno3"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 3"
                                android:textColor="#000000" />

                            <Button
                                android:id="@+id/btntestno4"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 4"
                                android:textColor="#000000" />
                        </TableRow>

                        <TableRow
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="20dip"
                            android:gravity="center_horizontal" >

                            <Button
                                android:id="@+id/btntestno5"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 5"
                                android:textColor="#000000" />

                            <Button
                                android:id="@+id/btntestno6"
                                android:layout_weight="1"
                                android:gravity="center"
                                android:padding="20dip"
                                android:text="Test 6"
                                android:textColor="#000000" />
                        </TableRow>
                    </TableLayout>
                </RelativeLayout>
            </FrameLayout>
        </TabHost>
    </RelativeLayout>

</RelativeLayout> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:48:28.693

一种解决方案是让您拥有自己的`HorizontalScrollView`课程并`ImageViews`基于滚动显示（尽管我没有测试太多下面的代码应该可以工作）。您的布局将如下所示：

```
//...
           <RelativeLayout
                android:id="@+id/rl_tabs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                    <ImageView android:id="@+id/arrow_left"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/i_button"
                        android:layout_alignParentLeft="true"
                        android:visibility="gone"/>

                    <ImageView android:id="@+id/arrow_Right"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/i_button"
                        android:layout_alignParentRight="true"
                        />                    

                <com.your.package.here.SpecialScroll
                    android:id="@+id/my_scrollView"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:fillViewport="true"
                    android:scrollbars="none" >

                    <TabWidget
                        android:id="@android:id/tabs"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:tabStripEnabled="true"/>
                </com.your.package.here.SpecialScroll>
            </RelativeLayout>

//... 
```

该类`SpecialScroll`将如下所示：

```
public class SpecialScroll extends HorizontalScrollView {

    public interface PositionListener {

        public void onLeftArrowRequired(boolean required);

        public void onRightArrowRequired(boolean required);

        public View implementScrolledView();
    }

    private PositionListener listener;

    public void setPositionListener(PositionListener listener) {
        this.listener = listener;
    }

    public SpecialScroll(Context context) {
        super(context);
    }

    public SpecialScroll(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public SpecialScroll(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onScrollChanged(int l, int t, int oldl, int oldt) {
        super.onScrollChanged(l, t, oldl, oldt);
        if (l == 0) {
            listener.onLeftArrowRequired(false);
        } else {
            listener.onLeftArrowRequired(true);
        }
        View v = listener.implementScrolledView();
        Rect r = new Rect();
        v.getDrawingRect(r);
        if ((r.width() - l) == getWidth()) {
            listener.onRightArrowRequired(false);
        } else {
            listener.onRightArrowRequired(true);
        }

    }

} 
```

然后在您的活动`onCreate`方法中，您将执行以下操作：

```
SpecialScroll hsv = (SpecialScroll) findViewById(R.id.my_scrollView);
hsv.setPositionListener(this); // I made the activity implement the SpecialScroll.PositionListener interface 
```

并且活动对`PositionListener`接口的实现是：

```
@Override
    public void onLeftArrowRequired(boolean required) {
        if (required) {
            ((ImageView) findViewById(R.id.arrow_left))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.arrow_left))
                    .setVisibility(View.GONE);
        }
    }

    @Override
    public void onRightArrowRequired(boolean required) {
        if (required) {
            ((ImageView) findViewById(R.id.arrow_right))
                    .setVisibility(View.VISIBLE);
        } else {
            ((ImageView) findViewById(R.id.arrow_right))
                    .setVisibility(View.GONE);
        }
    }

    @Override
    public View implementScrolledView() {
        return findViewById(android.R.id.tabs);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:55:10.570

这不是一个优雅的解决方案，但是如果最左侧选项卡的 x 坐标小于零，则可以显示左箭头，如果最右侧选项卡的 x 加上其宽度大于屏幕宽度，则显示右侧选项卡。

# c# - 将多个视图绑定到多个视图模型

> ID：11051911
> 
> 赞同：5
> 
> 时间：2012-06-15T13:49:06.637
> 
> 标签：c#, wpf, user-interface, mvvm

我有一个显示不同自定义视图的 WPF 窗口。到目前为止，我能够使用我学到的关于 MVVM 的所有内容 :)

现在我遇到了一个新的“问题”：我在更大的视图中有 10 个相同视图的实体。这十个视图实体包含一组控件（文本框、组合框等），但都是一致的。

那么如何将这些 View 绑定到 ViewModel 呢？

我考虑在“更高级别”的 ViewModel 中有 10 个 ViewModel 实例，并给视图修复定义 VM 的实例作为数据上下文。

我现在的问题是 --> 是否有更简单（或更方便）的方式将许多（相同）视图绑定到它们的视图模型？

**代码示例：**

查看型号：

```
private PanelViewModel _panelViewModel1 = new PanelViewModel();
public PanelViewModel PanelVM1
{
   get { return _panelViewModel1; }
} 
```

查看示例：

```
<myControls:vwPanel HorizontalAlignment="Left" x:Name="vwPanel1" 
                    VerticalAlignment="Top" DataContext="{Binding Path=PanelVM1}"/> 
```

困扰我的是，十个视图需要十次这个逻辑？

**更新：** 回答一些问题：我想显示一个视图 10 次（在我的示例中）我通过从 UserControl 继承来定义我自己的视图。所以我的`vwPanel`继承自`UserControl`. 10 个 vwPanel 只是放置在 Grid 内的 StackPanel 内。

正如您所指出的，这与显示数据无关，列表视图或数据网格是一个更好的起点。这是我需要这么多输入控件的特殊情况：/

**UPDATE2：**我所希望的更像是定义一个 ViewModel 列表并将我的 10 个视图绑定到这个列表之一。但这行不通吗？至少我不知道如何在 XAML 列表中引用一个“特殊”实体......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T14:01:01.473

通常我使用隐式`DataTemplates`映射`Views`到`ViewModels`. 它们可以进入`<Application.Resources>`，`<Window.Resources>`甚至只能在特定元素下进入，例如`<TabControl.Resources>`

```
<DataTemplate DataType="{x:Type local:PanelViewModel}">
    <myControls:vwPanel />
</DataTemplate> 
```

这意味着每当 WPF 在类型的 VisualTree 中遇到对象时`PanelViewModel`，它将使用`vwPanel`

`VisualTree`对象通常通过`ItemsSource`属性放置

```
<ItemsControl ItemsSource="{Binding CollectionOfAllPanels}" /> 
```

或通过使用`ContentControl`

```
<ContentControl Content="{Binding PanelVM1}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:59:47.390

如果我正确理解了您的问题，那么您将收集一些可以在视觉上表示的东西。也就是说，您有多个要为其定义单个视图的视图模型，但要显示 X 次。您的示例显示您使用面板作为“PanelViewModel”的视图...vwPanel 的父项控件是什么？假设您使用的是 ListBox 之类的东西，您可以定义一个包含您的 vwPanel 的自定义 DataTemplate 并将该 DataTemplate 分配给您的 ListBox.ItemTemplate。

例如：

```
<Window.Resources>
    <DataTemplate x:Key="myVMTemplate" TargetType="{x:Type myViewModels:PanelViewModel}">
        <myControls:vwPanel HorizontalAlignment="Left" VerticalAlignment="Top"/>
    </DataTemplate>
</Window.Resources>

<ListBox ItemsSource="{Binding Path=MyCollectionOfPanelVMs}" 
         ItemTemplate="{StaticResource myVMTemplate}" /> 
```

我还没有验证这是否有效。

# php - 使用多列上的子句从 1/n 表中过滤字段

> ID：11051912
> 
> 赞同：1
> 
> 时间：2012-06-15T13:49:07.463
> 
> 标签：php, mysql

好的，首先对标题感到抱歉，但我找不到更好的 :(
这是问题所在：
我有两个表，`properties`并且`properties_rooms`，通过属性 ID 相互链接。

```
properties table:

+---------------+------------+
| id_properties | pr_title   |
+---------------+------------+
|             1 | test       |
|             2 | dummy      |
+---------------+------------+

properties_rooms table:
+---------------+-------------------+--------------+----------+
| id_prop_rooms | pro_id_properties | pro_id_rooms | pro_size |
+---------------+-------------------+--------------+----------+
|             1 |                 1 |            4 |     5.00 |
|             2 |                 1 |           18 |    17.00 |
|             3 |                 2 |            6 |    12.00 |
|             4 |                 2 |           24 |    11.00 |
|             5 |                 1 |            4 |    10.00 |
|             6 |                 1 |            6 |    10.00 |
|             7 |                 1 |            6 |    12.00 |
+---------------+-------------------+--------------+----------+ 
```

我正在进行高级搜索，用户可以在其中搜索具有多个相同类型房间（即两间卧室、三间浴室等）的房产。

可悲的是，我发现自己陷入了困境，因为我不能用多个子句“过滤”同一个数据集；如果我只需要过滤一个就没有问题，因为我可以使用一个`HAVING`子句。

我制定了这个选择：

```
SELECT id_properties, pro_id_rooms, COUNT(*) as total, 
        IF ((pro_id_rooms = 4 AND COUNT(*) >= 2) OR (pro_id_rooms = 6 AND COUNT(*) >= 2), 1, 0) as flag
FROM `properties`
INNER JOIN properties_rooms ON id_properties = pro_id_properties
WHERE id_properties IN (4,10)
GROUP BY id_properties, pro_id_rooms
ORDER BY id_properties 
```

在`IN`条款内有我知道他们至少有一个要求的房间的属性。它们来自先前的查询，因为我必须使用`GROUP BY`and `HAVING`。
选择中的`IF`部分是在运行时构建的，因为我从请求中获取信息。
这是结果：

```
+---------------+--------------+-------+------+
| id_properties | pro_id_rooms | total | flag |
+---------------+--------------+-------+------+
|             1 |            4 |     2 | 1    |
|             1 |            6 |     2 | 1    |
|             1 |           18 |     1 | 0    |
|             2 |            6 |     1 | 0    |
|             2 |           24 |     1 | 0    |
+---------------+--------------+-------+------+ 
```

我认为它可以工作，我只需要添加一个就`HAVING flag > 0`完成了。

我的问题是，有什么更好的吗？
桌子不是很大：一个可能是 1k 的属性，一个大约 10k 的房间。
恐怕如果用户放太多房间，查询会变成一个巨大的`IF`语句......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:50:09.830

```
SELECT id_properties, SUM(pro_id_rooms = 4) AS bedrooms, SUM(pro_id_rooms = 6) AS bathrooms
FROM `properties`
INNER JOIN properties_rooms ON id_properties = pro_id_properties
WHERE id_properties IN (4,10)
GROUP BY id_properties
HAVING bedrooms >= 3 AND bathrooms >= 2 
```

## 变化

```
SUM(pro_id_rooms = 4) AS bedrooms, SUM(pro_id_rooms = 6) AS bathrooms 
```

对于用户选择的每个复选框，您需要`SUM(pro_id_rooms = x) AS nrofx`在`WHERE`.

```
HAVING bedrooms >= 3 AND bathrooms >= 2 
```

您可以在此处查看特定房间的编号。

# php - 删除注释行会破坏我的代码

> ID：11051916
> 
> 赞同：0
> 
> 时间：2012-06-15T13:49:23.270
> 
> 标签：php, forms, debugging, function

此功能失败 -

```
function check_required_fields($required_array) {
    $field_errors = array(); 
    foreach($required_array as $fieldname) {
        if ($fieldname == "date_expires_input") {
                if ($fieldname == "Expiration Date (Y/M/D)" || $fieldname == "N/A" ) 
//print "here";
                    {
                    $field_errors[] = $fieldname;
                    }
                } if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && !is_numeric($_POST[$fieldname])))
                {
                $field_errors[] = $fieldname;
                }
            }
            return $field_errors; 
        } 
```

*但是*当我取消注释打印“这里”时，它起作用了！（虽然没有打印“这里”）。到底他妈发生了什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T13:51:30.370

如果你这样做

```
if ($fieldname == "Expiration Date (Y/M/D)" || $fieldname == "N/A" ) 
   print "here"; 
```

以下块不依赖于 if。

因此，取消注释`print "here";`实际上只是删除`if`以下代码块的。

注意牙套的压痕和连贯性，它有助于避免这种错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:56:15.933

你的内在条件从未得到满足：

```
if ($fieldname == "Expiration Date (Y/M/D)" || $fieldname == "N/A" ) ... 
```

只要您之前已经在整理一个闭包，就永远无法满足

```
if ($fieldname == "date_expires_input") ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:53:36.917

它失败了，因为`print "here";`它不在`if`语句的大括号内。这会导致 PHP 将此单个语句视为语句的主体`if`。

然后无条件执行以下用大括号分隔的块。基本上，它等效于以下代码

```
function check_required_fields($required_array) {
    $field_errors = array(); 
    foreach($required_array as $fieldname) {
        if ($fieldname == "date_expires_input") {
                if ($fieldname == "Expiration Date (Y/M/D)" || $fieldname == "N/A" )
                {
                    // Inside the if statement
                    print "here";
                }
                // Outside the if statement
                $field_errors[] = $fieldname;
                } if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && !is_numeric($_POST[$fieldname])))
                {
                $field_errors[] = $fieldname;
                }
            }
            return $field_errors; 
        } 
```

# .net - 控制在单个列下具有可编辑的多个字段？

> ID：11051922
> 
> 赞同：0
> 
> 时间：2012-06-15T13:49:46.143
> 
> 标签：.net, wpf, winforms, datagridview, controls

好的，我在问一些不传统的东西。我需要在有`users`和的地方创建视图`days of week`。如果我需要每个用户/每天只有一个值，我可以使用 datagridview。但是我需要为每个用户每天都有一个`wage`字段和一个字段。`hour`屏幕截图应该会有所帮助。

![在此处输入图像描述](../Images/e6879fca9bb3d61694c3792661f0a42d.png)

我需要两个值都是可编辑的。什么样的控制是去这里的方式？datagridview 单元格可以承载两个控件吗？这就是这样的要求；我还没有决定使用 Winforms 或 WPF，但前者是我习惯的（现在没有太多时间深入研究 WPF，但我只是知道）。

有一些变通方法，例如，有一个字段，例如`wage`在 dgv 中并显示`hour`在 dgv 外部的单独文本框中等。但这对我们的客户不可用。（我不介意任何 hacky/wacky 解决方案/解决方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:02:02.897

您应该有一个`Grid`标题区域的标准，然后“行”可能是每行`ItemsControl`的`ItemsTemplate`网格。`SharedSizeScope`然后，您可以在网格上使用对齐所有列。

这是我的意思的一个例子

```
<Grid Grid.IsSharedSizeScope="True">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid x:Name="header">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" SharedSizeGroup="col1" />
            <ColumnDefinition Width="Auto" SharedSizeGroup="col2" />
            <ColumnDefinition Width="Auto" SharedSizeGroup="col3" />
        </Grid.ColumnDefinitions>
        <TextBlock FontWeight="Bold" Text="Col1" />
        <TextBlock FontWeight="Bold" Text="Col2" Grid.Row="1" />
        <TextBlock FontWeight="Bold" Text="Col3" Grid.Row="2" />
    </Grid>
    <ItemsControl ItemsSource="{Binding Users}" Grid.Row="1" x:Name="rows">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" SharedSizeGroup="col1" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="col2" />
                        <ColumnDefinition Width="Auto" SharedSizeGroup="col3" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding Col1Data}" />
                    <TextBlock Text="{Binding Col2Data}" Grid.Row="1" />
                    <TextBlock Text="{Binding Col3Data}" Grid.Row="2" />
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

此方案允许您创建一个数据网格，如 UI，具有极易定制的终极水平。

# ruby-on-rails - 使用 rake 将轨道覆盖范围输出到控制台

> ID：11051925
> 
> 赞同：1
> 
> 时间：2012-06-15T13:50:10.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, continuous-integration, code-coverage, travis-ci

我的主要想法是在 Travis-CI 上运行测试后获得一些代码覆盖率报告。

目前我正在运行测试`rake travis`

```
task :travis do
  ["rspec spec", "rake cucumber"].each do |cmd|
    puts "Starting to run #{cmd}..."
    system("export DISPLAY=:99.0 && bundle exec #{cmd}")
    raise "#{cmd} failed!" unless $?.exitstatus == 0
  end
end 
```

现在我认为覆盖率可以在测试后输出到控制台，但我见过的所有覆盖率宝石都会生成 html 页面。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:58:12.167

您可以使用返回的数据`rake stats`。

如果你想自己做，这里是实现[https://github.com/rails/rails/blob/master/railties/lib/rails/code_statistics.rb](https://github.com/rails/rails/blob/master/railties/lib/rails/code_statistics.rb)。在这种情况下，我建议您创建自己的任务。

# wpf - 如何在 Bing Maps API 中显示完整地图并防止滚动

> ID：11051927
> 
> 赞同：1
> 
> 时间：2012-06-15T13:50:18.447
> 
> 标签：wpf, scroll, zooming, bing-maps

我有一个关于 Bing Maps API 的小而快的问题。当您将 API 加载到应用程序中时，它会加载世界并无限滚动，一遍又一遍地重复图块。我想知道的是，是否有办法将其设置为仅显示完整地图而不重复，并可能将其视图设置为任何人都可以缩小到的最大值。

换句话说，我不想看到任何重复的瓷砖，只是让它显示完整的地图。一旦完整的地图可见，我就想锁定滚动功能，这样就不会重复任何事情以及锁定缩小功能。

如果它有任何区别，我正在尝试使用 WPF 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:33:29.280

以下是用于限制地图视图的自定义地图模式。您可以调整字段和方法以将其限制为您希望的地图。

```
public class CustomMapMode : MercatorMode {

    // The latitude value range (From = bottom most latitude, To = top most latitude)
    protected static Range<double> validLatitudeRange = new Range<double>(39.479665, 39.486985);
    // The longitude value range (From = left most longitude, To = right most longitude)
    protected static Range<double> validLongitudeRange = new Range<double>(-87.333154, -87.314100);
    // Restricts the map view.

    protected override Range<double> GetZoomRange(Location center) {
        // The allowable zoom levels - 14 to 25.
        return new Range<double>(14, 25);
    }

    // This method is called when the map view changes on Keyboard and Navigation Bar events.
    public override bool ConstrainView(Location center, ref double zoomLevel, ref double heading, ref double pitch) {
        bool isChanged = base.ConstrainView(center, ref zoomLevel, ref heading, ref pitch);

        double newLatitude = center.Latitude;
        double newLongitude = center.Longitude;

        // If the map view is outside the valid longitude range,
        // move the map back within range.
        if(center.Longitude > validLongitudeRange.To) {
            newLongitude = validLongitudeRange.To;
        } else if(center.Longitude < validLongitudeRange.From) {
            newLongitude = validLongitudeRange.From;
        }

        // If the map view is outside the valid latitude range,
        // move the map back within range.
        if(center.Latitude > validLatitudeRange.To) {
            newLatitude = validLatitudeRange.To;
        } else if(center.Latitude < validLatitudeRange.From) {
            newLatitude = validLatitudeRange.From;
        }

        // The new map view location.
        if(newLatitude != center.Latitude || newLongitude != center.Longitude) {
            center.Latitude = newLatitude;
            center.Longitude = newLongitude;
            isChanged = true;
        }

        // The new zoom level.
        Range<double> range = GetZoomRange(center);
        if(zoomLevel > range.To) {
            zoomLevel = range.To;
            isChanged = true;
        } else if(zoomLevel < range.From) {
            zoomLevel = range.From;
            isChanged = true;
        }

        return isChanged;
    }
} 
```

# android - 显示一小部分数字，一个在另一个之上，就像在 Libreoffice 上一样

> ID：11051928
> 
> 赞同：2
> 
> 时间：2012-06-15T13:50:18.457
> 
> 标签：android, math, textview, formula, fractions

Libreoffice（和 Latex 等其他应用程序）允许您使用某种脚本语言来显示非常酷的数学公式。

我需要使用能够显示此类公式的视图（可能是 textView），尤其是分数。

例如“x over y”看起来像：

```
x
-
y 
```

等等。

Android上有没有这样的解决方案？也许是一个允许您编写此类东西的库（具有类似于 Apache 或更好的许可证）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:40:23.050

您可以轻松地扩展视图类并使用两个 TextView 和一个 ImageView 来复制它。可能不是最有效的方法，但肯定很容易。

一些 sudo 代码，但你明白了..

```
public class FractionView extends View {

  private TextView top;
  private Textview bottom;
  private ImageView line;

  public FractionView(Context context) {
   // instantiate the views
  }

  // TODO add methods to update the text, possibly update positions as well, more stuff?

} 
```

# android - 列表视图错误android

> ID：11051929
> 
> 赞同：0
> 
> 时间：2012-06-15T13:50:18.190
> 
> 标签：android

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ListView listView = (ListView) findViewById(R.id.mylist);

    final Button b=(Button)findViewById(R.id.b);
    b.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click
            while(i<30){
                String stringValue = Integer.toString(i);
            tt[i] = sendPostDataToInternet(stringValue);
            i++;
            }
            //TextView f=(TextView)findViewById(R.id.cc);
            //f.setText(tt[1]+tt[2]+tt[3]);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(v.getContext(),
                    android.R.layout.simple_list_item_1, android.R.id.text1, tt);
            listView.setAdapter(adapter);
        }

    });
       } 
```

我试图将数据设置为文本并且它有效，但是当我将它设置为列表视图时它给出

```
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

怎么回事谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:05:15.763

您应该使用`this`or`activity.this`甚至`getActivity()`在您实例化适配器时使用。

由于我经常使用片段，因此我通常最终会使用`getActivity()`，因此如果需要，我可以在多个活动中重用一个片段。

例子：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(), 
    android.R.layout.simple_list_item_1, android.R.id.text1, tt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:22:31.233

排队

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(v.getContext(),
android.R.layout.simple_list_item_1, android.R.id.text1, tt); 
```

使用`YOURActivityName.this`而不是`v.getContext()`

# image - Wordpress PHP - 最近的帖子在主页上显示图像

> ID：11051933
> 
> 赞同：0
> 
> 时间：2012-06-15T13:50:22.450
> 
> 标签：image, show

这是我页面顶部的 PHP

```
<?php
// Include WordPress 
define('WP_USE_THEMES', false);
require('./blog/wp-load.php');
query_posts('showposts=1');
?> 
```

然后我在我想在我的网站主页上显示最新帖子的地方有这个

```
 <div id="content"><?php while (have_posts()): the_post(); ?>
<?php
 $postslist = get_posts('numberposts=1');
 foreach ($postslist as $post) :
    setup_postdata($post);
 ?>
        <div class="post"><h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
<?php the_content() ?>
</div>
<?php endforeach ?> 
```

我希望能够看到与文本一起发布的图像，我怎样才能在我的主页上显示博客文章中的任何其他内容？

# css - 使用 FXML/CSS 在 JavaFX 中更改菜单控件的文本颜色

> ID：11051936
> 
> 赞同：6
> 
> 时间：2012-06-15T13:50:29.633
> 
> 标签：css, menu, javafx-2, fxml

我想更改**JavaFX中***Menu*控件的文本颜色。目前整个*Menu Bar*的背景色设置为白色，显示*Menu* -s的默认文字颜色也是白色，所以看不到实际的控件，所以我想设置*Menu*的文字颜色("File ") 变黑。我怎么做？

 *****这是**FXML**部分：

```
<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <MenuBar id="modBar" layoutX="176.0" layoutY="122.0" styleClass="modBar">
      <menus>
        <Menu id="modItem" mnemonicParsing="false" styleClass="modItem" text="File" />
      </menus>
      <stylesheets>
        <URL value="test.css" />
      </stylesheets>
    </MenuBar>
  </children>
</AnchorPane> 
```

这是**CSS**部分：

```
.modBar
{
    -fx-background-color: white;
}
.modItem
{
    -fx-color: black;
} 
```

这不起作用（“文件”仍然是**白色的**）。我究竟做错了什么？另外，另一件事是我似乎无法将*任何*带有 CSS 的东西应用于**.modItem** - 它在**Scene Builder中工作，但在预览后消失（在 SB 中的所有***Menu* -s上也缺少“样式表”选择器）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-16T14:53:19.130

好的，我想我已经找到了答案。我所做的是从**jfxrt.jar （** **JavaFX**使用的默认**CSS**主题）中提取**caspian.css**并检查与*Menu* -s 相关的所有内容：

 *******```
.menu .label
{
    -fx-text-fill: black;
} 
```

这将影响**所有** *菜单*控件。

* * *

By the way, there was a particular *build* of **Scene Builder** that might come of interest - **b42**, this had an additional **CSS** menu that exposed internal styles of controls/elements, so customizing turns into a straightforward operation (without the need of prior manual extraction of the applied style).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:24:04.040

I'm not sure, but you set the id attribute - doesn't that mean you can only access them via #modBar or #modItem ???

I'm also quite new to JFX2 (about a month) and unfortunatelly in all my years as a Java developer I never needed to play around with css, so it's just an assumption.************

# safari - 有没有办法在 Web Inspector 打开的情况下启动 Safari？

> ID：11051944
> 
> 赞同：2
> 
> 时间：2012-06-15T13:51:01.460
> 
> 标签：safari, webkit

为了开发目的，我必须关闭并重新打开它，例如每天 100 次，打开 Web 检查器禁用缓存、清除缓存、开始调试 javascript 以及偶尔清除本地数据库所花费的额外时间变得乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T23:21:58.783

这是我编写的用于启动 Safari Inspector 的 AppleScript。您可以将其导出为可执行应用程序，然后将其放在您的 Dock 中，只需单击一下即可进入 Inspector。您也可以在 Xcode 的构建阶段启动它，以便在您的应用程序发送到模拟器时运行它。根据需要将“iPad Simulator”更改为“iPone Simulator”或连接的设备。

```
tell application "Safari"
    activate
    delay 2
    tell application "System Events"
        tell process "Safari"
            set frontmost to true
            click menu item 2 of menu 1 of menu item "iPad Simulator" of menu 1 of menu bar item "Develop" of menu bar 1
        end tell
    end tell
end tell 
```

# opengl - GL.Rotate 和 Matrix4.CreateRotationX 不同的输出

> ID：11051945
> 
> 赞同：0
> 
> 时间：2012-06-15T13:51:02.840
> 
> 标签：opengl, opentk, rotational-matrices, glrotate

我尝试使用不同的旋转方式来旋转一些顶点——GL.Rotate、Matrix4.CreateRotationX 和 Matrix4.RotateX。令我惊讶的是，他们给出了不同的输出。这是创建三个矩阵并将它们输出到控制台的函数。

```
 private void for_debug()
    {
        Vector3 CubeRotationAnglesInDeg = new Vector3(15, 29, 84);

        Matrix4 XCubeRotationMatrix1 = Matrix4.CreateRotationX(Helper.ToRadians(CubeRotationAnglesInDeg.X)),
                YCubeRotationMatrix1 = Matrix4.CreateRotationY(Helper.ToRadians(CubeRotationAnglesInDeg.Y)),
                ZCubeRotationMatrix1 = Matrix4.CreateRotationZ(Helper.ToRadians(CubeRotationAnglesInDeg.Z));
        Matrix4 finalMatrixMine1 = XCubeRotationMatrix1 * YCubeRotationMatrix1 * ZCubeRotationMatrix1;

        Matrix4 XCubeRotationMatrix2 = Matrix4.RotateX(Helper.ToRadians(CubeRotationAnglesInDeg.X)),
                YCubeRotationMatrix2 = Matrix4.RotateY(Helper.ToRadians(CubeRotationAnglesInDeg.Y)),
                ZCubeRotationMatrix2 = Matrix4.RotateZ(Helper.ToRadians(CubeRotationAnglesInDeg.Z));
        Matrix4 finalMatrixMine2 = XCubeRotationMatrix2 * YCubeRotationMatrix2 * ZCubeRotationMatrix2;

        GL.MatrixMode(MatrixMode.Modelview);
        GL.LoadIdentity();
        GL.Rotate(CubeRotationAnglesInDeg.X, Vector3.UnitX);
        GL.Rotate(CubeRotationAnglesInDeg.Y, Vector3.UnitY);
        GL.Rotate(CubeRotationAnglesInDeg.Z, Vector3.UnitZ);
        Matrix4 finalMatrixOpen;
        GL.GetFloat(GetPName.ModelviewMatrix, out finalMatrixOpen);

        Console.WriteLine(finalMatrixMine1.Column0);
        Console.WriteLine(finalMatrixMine1.Column1);
        Console.WriteLine(finalMatrixMine1.Column2);
        Console.WriteLine(finalMatrixMine1.Column3);
        Console.WriteLine();

        Console.WriteLine(finalMatrixMine2.Column0);
        Console.WriteLine(finalMatrixMine2.Column1);
        Console.WriteLine(finalMatrixMine2.Column2);
        Console.WriteLine(finalMatrixMine2.Column3);
        Console.WriteLine();

        Console.WriteLine(finalMatrixOpen.Column0);
        Console.WriteLine(finalMatrixOpen.Column1);
        Console.WriteLine(finalMatrixOpen.Column2);
        Console.WriteLine(finalMatrixOpen.Column3);
        Console.WriteLine();

        Console.WriteLine();
        Console.WriteLine();
        Console.WriteLine();
        Console.WriteLine();
    } 
```

这是 ToRadians 函数

```
 public static float ToRadians(float degrees)
    {
        return degrees * (float)(Math.PI / 180f);
    } 
```

这是正常的吗？我该怎么做才能使结果相同？

编辑：这是输出

```
(0.09142262, -0.9475183, 0.3063508, 0) 
(0.8698285, 0.2257573, 0.4386708, 0) 
(-0.4848096, 0.2263682, 0.8448178, 0) 
(0, 0, 0, 1) 

(0.09142262, -0.9475183, 0.3063508, 0)
(0.8698285, 0.2257573, 0.4386708, 0)
(-0.4848096, 0.2263682, 0.8448178, 0)
(0, 0, 0, 1)

(0.09142266, -0.8698285, 0.4848096, 0)
(0.9737504, -0.02382383, -0.2263682, 0)
(0.2084515, 0.4927787, 0.8448178, 0)
(0, 0, 0, 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-04T13:56:36.700

我怀疑您应该以相反的顺序放置 GL.Rotate() 命令以获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:12:00.657

它们应该相同，至少 Matrix4.CreateRotationX 和 Matrix4.RotateX。函数的定义是相等的。在这里：[http](http://www.opentk.com/files/doc/struct_open_t_k_1_1_matrix4.html#ae9868e1bd3b8aa411abd848e107a55af) ://www.opentk.com/files/doc/struct_open_t_k_1_1_matrix4.html#ae9868e1bd3b8aa411abd848e107a55af 。

# javascript - 如何通过单击更改/交换 div 的背景图像？

> ID：11051947
> 
> 赞同：1
> 
> 时间：2012-06-15T13:51:13.737
> 
> 标签：javascript, jquery, html

我正在尝试使用带有背景图像的 div 在站点上创建静音按钮（它已经具有 onclick 功能）。我希望能够在单击后更改显示的图像（静音），但我还需要在第二次单击后将其更改回来（取消静音）。如何才能做到这一点？

该站点已经使用 jquery。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:57:28.530

看看[toggleClass()](http://api.jquery.com/toggleClass/)。您只需要两个 CSS 类，一个带有每个背景图像，例如：

```
.mute {
  background-image:url('mute.png');
}

.unmute {
  background-image:url('unmute.png');
} 
```

那么jQuery将是（假设你有一个名为“button”的div，类为“unmute”）：

```
$('#button').click(function() {
    $(this).toggleClass('mute');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T13:59:37.807

您需要 jQuery 的[.toggle()](http://api.jquery.com/toggle-event/)，它接受多个函数参数并在每次单击事件后依次调用每个参数。

```
$("#mutebutton").toggle(
    function() {
        $(this).css("background-image","url('on.jpg')");
        mySoundOn();
    },
    function() {
        $(this).css("background-image","url('off.jpg')");
        mySoundOff();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:56:27.487

如果`.removeAttr()`背景图像是内联应用的唯一想法，则使用。如果不是，则使用`.css()`并更改原始背景图像的路径。

```
 $(this).toggle(function() {
   $(this).removeAttr('style');
},
function() {
   $(this).css("backgroundImage", "url(mute_img_path)");
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T13:56:26.630

这简单

```
<div id="img-swap" /> 
```

你在哪里 xxxxxx_Off 是静音图像

```
$(function(){
  $("#img-swap").on('click', function() {
    if ($(this).attr("class") == "img-swap") {
      $(this).css("background-image","on.jpg");
    } else {
      $(this).css("background-image","off.jpg");
    }
    $(this).toggleClass("on");
  });
}); 
```

这会将点击时的图像从关闭切换到打开。您必须对包含 _off 和 _on 后缀的图像使用模式

# html - 如何垂直对齐段落中的文本？

> ID：11051951
> 
> 赞同：55
> 
> 时间：2012-06-15T13:51:31.153
> 
> 标签：html, css

我想知道将`p`元素中的文本对齐为垂直居中。

以下是我的风格：

```
p.event_desc {
     font: bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
     line-height: 14px;
     height: 35px;
     margin: 0px;
}
```

```
<p class="event_desc">Lorem ipsum.</p>
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-15T13:55:08.853

试试这些风格：

```
p.event_desc {
  font: bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 14px;
  height:75px;
  margin: 0px;
  display: table-cell;
  vertical-align: middle;
  padding: 10px;
  border: 1px solid #f00;
}
```

```
<p class="event_desc">lorem ipsum</p>
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-15T13:52:55.403

你可以使用`line-height`它。`p`只需将其设置为标签的确切高度即可。

```
p.event_desc {
  line-height:35px;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-07T03:23:13.503

如果涉及表格或设置行高的答案对您不起作用，您可以尝试将 p 元素包装在 div 中，并设置其相对于父 div 高度的定位样式。

```
.parent-div{
  width: 100px;
  height: 100px;
  background-color: blue;
}

.text-div{
  position: relative;
  top: 50%;
  transform: translateY(-50%);
}

p.event_desc{
  font: bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
  color: white;
  text-align: center;
}
```

```
<div class="parent-div">
  <div class="text-div">
   <p class="event_desc">
    MY TEXT
   </p>
  </div>
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-18T17:50:27.500

所以就我个人而言，我不确定最好的方法，但我发现垂直对齐效果很好的一件事是使用 Flex，因为你可以证明它的内容是合理的！

假设您有以下 HTML 和 CSS：

```
.paragraph { 
      font-weight: light;
      color: gray;
      min-height: 6rem;
      background: lightblue;
  }
```

```
<h1 class="heading"> Nice to meet you! </h1>
<p class="paragraph"> This is a paragraph </p>
```

我们最终得到一个不是垂直居中的段落，现在如果我们使用 Flex Column 并应用最小高度 + BG ，我们会得到以下结果：

```
.myflexbox {
    min-height: 6rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: lightblue;
}

.paragraph { 
      font-weight: light;
      color: gray;
  }
```

```
<h1 class="heading"> Nice to meet you! </h1>
<div class="myflexbox">
    <p class="paragraph"> This is a paragraph </p>
</div>
```

然而，在某些情况下，您不能轻易地将 P 标签包装在 div 中，在 P 标签上使用 Flexbox 是非常好的，即使这不是最好的做法。

```
.myflexparagraph {
    min-height: 6rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: lightblue;
}

.paragraph { 
      font-weight: light;
      color: gray;
  }
```

```
<h1 class="heading"> Nice to meet you! </h1>
<p class="paragraph myflexparagraph"> This is a paragraph </p>
```

我不知道这是好是坏，但是如果这仅对某个地方的一个人有帮助，那仍然是一个人，那就无济于事了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T15:09:55.477

你可以使用

```
 line-height:35px; 
```

您真的不应该在段落上设置高度，因为它不利于可访问性（如果用户增加文本大小等会发生什么）

而是使用具有高度的 Div 和其中的 p 具有正确的行高：

```
 <div style="height:35px;"><p style="line-height:35px;">text</p></div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-02T11:36:08.453

如果您使用 Bootstrap，请尝试将 margin-bottom 0 分配给段落，然后将属性 align-items-center 分配给容器，例如，如下所示：

```
<div class="row align-items-center">
     <p class="col-sm-1 mb-0">
          ....
     </p>
</div> 
```

Bootstrap 默认分配一个计算边距底部，所以 mb-0 禁用了这个。

我希望它有帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-31T09:43:20.577

用户`vertical-align: middle;`连同`text-align: center`财产

```
<!DOCTYPE html>
<html>
<head>
<style>
.center {
  border: 3px solid green;
  text-align: center;
}

.center p {
  display: inline-block;
  vertical-align: middle;
}
</style>
</head>
<body>

<h2>Centering</h2>
<p>In this example, we use the line-height property with a value that is equal to the height property to center the div element:</p>

<div class="center">
  <p>I am vertically and horizontally centered.</p>
</div>

</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-10T22:10:36.920

适用于多行文本的替代解决方案：

将垂直和水平填充设置为`(height - line-height) / 2`

```
p.event_desc {
    font: bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
    line-height: 14px;
    padding: 10.5px 0;
    margin: 0px;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-08T21:26:31.703

下面的样式将为您垂直居中。

```
p.event_desc {
 font: bold 12px "Helvetica Neue", Helvetica, Arial, sans-serif;
 line-height: 14px;
 height: 35px;
 display: table-cell;
 vertical-align: middle;
 margin: 0px;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-27T13:45:41.273

***准确地说，垂直对齐段落中的文本。***

**HTML**

```
<main>
    <p><span>TEXT to be centered in P tag</span></p>
</main> 
```

**CSS**

```
main {
        height: 400px;
        position: relative;
}

main>p {
        min-height: 128px;
        line-height: 128px;

        font-size: 48px;

        position: relative;

        top: 50%;
        transform: translateY(-50%);
        -webkit-transform: translateY(-50%);
        -moz-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
}

main>p>span {
        position: absolute;

        left: 0;
        right: 0;
        top: 64px;
        transform: translateY(-68px);
        -webkit-transform: translateY(-68px);
        -moz-transform: translateY(-68px);
        -ms-transform: translateY(-68px);

        text-align: center;
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-08-31T09:05:23.217

在我的情况下，保证金自动工作正常。

```
p {
    font: 22px/24px Ubuntu;
    margin:auto 0px;
} 
```

# php - codeigniter 中的图像类型验证

> ID：11051953
> 
> 赞同：1
> 
> 时间：2012-06-15T13:51:38.307
> 
> 标签：php, codeigniter

我是 Codeigniter 的新手。处理表单中包含图像的表单验证。在 CodeIgniter 中使用 Module MVC 扩展。

//对于上传图片，我找到了这个文件上传片段

```
 $config['upload_path'] = './uploads/audio_files/';
   $config['allowed_types'] = 'gif|jpg|jpeg|png';
   $config['max_size']  = '2048';

   $this->load->library('upload', $config);
  if ( ! $this->upload->do_upload($file_name))
   {
    $error = array('error' => $this->upload->display_errors());
    $file1 = '';
   }
 else
   {
    $upload_data =  $this->upload->data();
    $file1 = $upload_data['file_name'];
   } 
```

这工作正常。不是jpeg的文件| gif没有上传。但用户没有收到任何错误消息。我希望用户在上传其他图像类型时显示该特定错误。请帮忙

我试过这个但失败了。

```
 try 1 : $this->template->load_partial('admin/admin_master', 'admin/form', $error); 
    try 2\. : loading view with $error 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:57:37.667

您不能将视图与错误消息相关联吗？例如：

后

```
$file1 = ''; 
```

你把：

```
$this->load->view('error_view', $error, $file1); 
```

您必须创建一个名为“error_view.php”的单独视图页面。

# jquery - 是否可以自动滚动 iFrame？

> ID：11051954
> 
> 赞同：0
> 
> 时间：2012-06-15T13:51:39.023
> 
> 标签：jquery, iframe, autoscroll

自动滚动示例类似于[http://logicbox.net/jquery/simplyscroll/](http://logicbox.net/jquery/simplyscroll/)

我希望自动滚动内容宽度超出浏览器宽度的 iframe 的内容。这是可以通过查询实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:54:47.043

您可以将您的 iframe 内容放在一个`<marquee>`中，可能并不完美，但可以工作。

最好的选择可能是在您的 iframe 中制作一个滑块，或者在其中使用 jQuery 进行动画处理，让您隐藏滚动条。

# css - 带有圆形边框的多列 CSS 布局

> ID：11051955
> 
> 赞同：2
> 
> 时间：2012-06-15T13:51:44.220
> 
> 标签：css, layout, html, border

**问题：**

我正在尝试创建一个多列 CSS 布局，其边框看起来与这张图片一致：

![在此处输入图像描述](../Images/62fa1585da76b57b851f957364468736.png)

**代码：**

```
<div style="border-radius:4px; border: 1px solid #ddd;">

        <div style="display:block;float:left;width:50%;">
            <div><b>F&ouml;rfattare:</b> '.$authors.'<br></div>
            <b>Handledare:</b> '.$row['Supervisor'].'<br>
            <b>Examinator:</b> '.$row['Examiner'].'<br>
            <b>Design av studie:</b> '.$design.'
        </div>

        <div style="display:block;float:left;width:50%;">
            <b>Examinationsdatum:</b> '.$row['ExaminationDate'].'<br>
            <b>Niv&aring;:</b> '.$level.' ('.$credits.')<br>
            <b>Kommentar:</b> '.$row['Comments'].'<br>
            <b>&Ouml;vrigt:</b> '.$row['Participants'].' deltagare, '.$row['Reference'].' referenser
        </div>

</div> 
```

**上述代码将产生以下内容：**

![在此处输入图像描述](../Images/1e70e21a29ff2f49c740acce5b0d22a9.png)

**问题：**

需要修改什么以便我可以得到盒子的水平和垂直线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:20:48.527

您可以将 CSS 修改为如下所示：

```
.row {
    border: 1px solid #ddd;
    margin-bottom: -1px;
}

.left {
    display: inline-block;
    width: 50%;
    border-right: 1px solid #ddd;
}

.right {
    display: inline-block;
    width: 49%;
    border-left: 1px solid #ddd;
    margin-left: -1px;
}

.top {
    border-top-right-radius: 4px;
    border-top-left-radius: 4px;
}

.bottom {
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;
}

.outerBox {
    margin: 10px;
}​ 
```

然后让你的标记看起来像这样：

```
<div class="outerBox">
    <div class="row top">
        <span class="left"><b>F&ouml;rfattare:</b> '.$authors.'</span><span class="right"><b>Examinationsdatum:</b> '.$row['ExaminationDate'].'</span>
    </div>
    <div class="row">
        <span class="left"><b>Handledare:</b> '.$row['Supervisor'].'</span><span class="right"><b>Niv&aring;:</b> '.$level.' ('.$credits.')</span>
    </div>
    <div class="row">
        <span class="left"><b>Examinator:</b> '.$row['Examiner'].'</span><span class="right"><b>Kommentar:</b> '.$row['Comments'].'</span>
    </div>
    <div class="row bottom">
        <span class="left"><b>Design av studie:</b> '.$design.'</span><span class="right"><b>&Ouml;vrigt:</b> '.$row['Participants'].' deltagare, '.$row['Reference'].' referenser</span>
    </div>
</div> 
```

**警告：**如果您`span`在单独的行上的 s 之间放置一个空格，格式会中断，所以不要中断它们；否则，请采用此解决方案并找出不会破坏的东西=）​</p>

[您可以在http://jsfiddle.net/saluce/XhnBE/](http://jsfiddle.net/saluce/XhnBE/)看到一个工作示例

**编辑：**似乎 mPDF 不喜欢`inline-block`，所以更改这部分 CSS：

```
.left {
    display: block;
    float: left;
    width: 50%;
    border-right: 1px solid #ddd;
} 
```

[http://jsfiddle.net/saluce/XhnBE/1/](http://jsfiddle.net/saluce/XhnBE/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:59:59.113

您可以并排使用两个列表：

```
<div style="border-radius:4px; border: 1px solid #ddd;">

    <ul style="display:block;float:left;width:50%;">
        <li><b>F&ouml;rfattare:</b> '.$authors.'</li>
        <li><b>Handledare:</b> '.$row['Supervisor'].'</li>
        <li><b>Examinator:</b> '.$row['Examiner'].'</li>
        <li><b>Design av studie:</b> '.$design.'</li>
    </ul>

    <ul style="display:block;float:left;width:50%;">
        <li><b>Examinationsdatum:</b> '.$row['ExaminationDate'].'</li>
        <li><b>Niv&aring;:</b> '.$level.' ('.$credits.')</li>
        <li><b>Kommentar:</b> '.$row['Comments'].'</li>
        <li><b>&Ouml;vrigt:</b> '.$row['Participants'].' deltagare, '.$row['Reference'].' referenser</li>
    </ul>

</div> 
```

您需要添加一些样式以摆脱列表的默认样式，并将边框添加到`li`s 的顶部、底部和侧面。

不利的一面是，您必须提供`li`s 固定高度，以便边界对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:54:59.077

你必须改变你的标记。您需要一张桌子或更多盒子来执行此操作。我认为表格会更容易管理......而且不知何故，这是表格的用途。或者你拍一张背景图……但我*不*推荐这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T14:00:13.747

检查这个：http: [//jsfiddle.net/eNEzs/](http://jsfiddle.net/eNEzs/)

稍微纠正一下你的css并将项目包装在div中就足够了。

```
<div style="border-radius:4px; border: 1px solid #ddd; margin: 20px;">

        <div class="block">
            <div><b>F&ouml;rfattare:</b> '.$authors.'</div>
            <div><b>Handledare:</b> '.$row['Supervisor'].'</div>
            <div><b>Examinator:</b> '.$row['Examiner'].'</div>
            <div><b>Design av studie:</b> '.$design.'</div>
        </div>

        <div class="block">
            <div><b>Examinationsdatum:</b> '.$row['ExaminationDate'].'</div>
            <div><b>Niv&aring;:</b> '.$level.' ('.$credits.')</div>
            <div><b>Kommentar:</b> '.$row['Comments'].'</div>
            <div><b>&Ouml;vrigt:</b> '.$row['Participants'].</div>
        </div>
    <div style="clear:both"></div>        
</div>​ 
```

CSS

```
.block {
     display:block;
     float:left;
     width:50%; 
     -moz-box-sizing: border-box;
     -webkit-box-sizing: border-box;
     box-sizing: border-box;
 }
.block:first-child {
     border-right: 1px solid #ddd;
 }
.block div {
     border-bottom: 1px solid #ddd;
 }
.block div:last-child {
     border-bottom: 0px;
} 
```

但我**建议您简单地将元素更改为表格或列表（ul 或 ol）**。上面的解决方案只是针对这个特定的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T14:05:44.573

将每个单元格包裹在 a`div`而不是 using 中，并在适当的元素上`br`添加`border-left`and 。`border-bottom`如果您仍想使用`50%`宽度，请使用`box-sizing: border-box;`以防止其换行。

[请参阅此 jsfiddle 以了解一种方法](http://jsfiddle.net/sveinatle/GY8Fr/2/)，尽管您应该使用类来正确选择要应用不同样式的元素。

# ms-access - 在 Access 中操作链接表

> ID：11051956
> 
> 赞同：1
> 
> 时间：2012-06-15T13:51:48.767
> 
> 标签：ms-access, vba, linked-tables

我正在运行的进程需要能够删除一个表，然后用新数据重新创建它。我最近将它移到了一个不同的数据库中，该数据库在一个地方容纳了特定部门的所有流程。我被要求将原始数据库中的所有表都设置为新数据库中的链接表。现在，当它运行时，该过程会删除链接的表引用并在新数据库中创建一个新的（未链接的）表。我知道我可以通过链接删除表，但是我可以重新创建表然后自动将其重新链接到新数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:56:05.897

有多种链接表的方法，但您似乎只使用 MS Access，因此 [DoCmd.TransferDatabase 将](http://msdn.microsoft.com/en-us/library/bb214131%28v=office.12%29.aspx)Link 作为选项之一。

# java - 如何从 LazyDynaBean 转换为自定义类

> ID：11051962
> 
> 赞同：0
> 
> 时间：2012-06-15T13:52:18.837
> 
> 标签：java, dynamic

我必须将 LazyDynaBean 类的结果转换为 MyCustom 类。什么是从 LazyDynaBean 转换结果的最佳方法，我看到了一种通过 BeanUtil 类的方法，但它没有转换我自己的任何类型的类，

我的自定义类就像

```
public class Xyz {
  String name;
  Point point;
}

public class point {
  int x;
  int y; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:20:16.470

如果您的问题出在嵌套类（属性又是 bean 的 bean）上，那么您在使用`BeanUtilsBean.copyProperties()`. [JavaDoc](http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/BeanUtilsBean.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)确实提到它仅用于“浅拷贝” 。

您需要做的是编写自己的“转换器”类来处理嵌套 bean 变量类的转换并自己将它们拼接在一起。

如果您将顶级 bean 限制在非 bean 成员变量的使用上（即，如果有很多，则将它们下推到另一个 bean 中），您的转换代码至少能够`BeanUtilsBean.copyProperties()`用于那些“浅”的 bean。

# java - ApplicationError: 10 using Google Cloud Storage Java API to read a big zip file

> ID：11051963
> 
> 赞同：2
> 
> 时间：2012-06-15T13:52:21.670
> 
> 标签：java, google-app-engine, google-cloud-storage

我正在使用 Google Cloud Storage Java API 从 Google App Engine 应用程序读取存储在 Google Cloud Storage 存储桶中的 zip 文件。它适用于小文件，但是当我尝试读取我需要的真实文件（25Mb 压缩）时，我得到一个 ApplicationError: 10 异常。测试是在 GAE 上部署的应用程序完成的。

我可能已经理解 ApplicationError: 10 当文件打开时间过长（超过 30 秒）时抛出请参阅：[https](https://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/5XBVaVDKvvs) ://groups.google.com/forum/?fromgroups#!topic/google-appengine-java/5XBVaVDKvvs ，但我仍在努力让这件事发挥作用。

谢谢你的帮助。

有我使用的测试代码：

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile readableFile = new AppEngineFile("/gs/xxxx-my-bucket/xxx-bigfile.zip");
FileReadChannel readChannel = fileService.openReadChannel(readableFile, false);
ZipInputStream zis = new ZipInputStream(Channels.newInputStream(readChannel));
ZipEntry ze = null;
while ((ze = zis.getNextEntry()) != null) {
    resp.getOutputStream().println("Unzipping " + ze.getName());
    for (int c = zis.read(); c != -1; c = zis.read()) {
        resp.getOutputStream().print((char) c);
    }
    zis.closeEntry();
} 
zis.close(); 
```

我得到的堆栈跟踪是：

```
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:617)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:590)
    at com.google.appengine.api.files.FileServiceImpl.read(FileServiceImpl.java:539)
    at com.google.appengine.api.files.FileServiceImpl.read(FileServiceImpl.java:410)
    at com.google.appengine.api.files.FileReadChannelImpl.read(FileReadChannelImpl.java:73)
    at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:65)
    at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:109)
    at sun.nio.ch.ChannelInputStream.read(ChannelInputStream.java:103)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
    at java.io.FilterInputStream.read(FilterInputStream.java:133)
    at java.io.PushbackInputStream.read(PushbackInputStream.java:186)
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:238)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:158)
    at java.util.zip.ZipInputStream.read(ZipInputStream.java:163)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:122)
    at fr.heliorama.skylinewebapp.servlets.TestGSZip.doGet(TestGSZip.java:30)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 10: 
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:237)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:68)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:182)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:68)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:101)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:50)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:586)
    ... 48 more
Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 10: 
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.failure(ApiProxyImpl.java:546)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:784)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:824)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.failure(RpcStub.java:815)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:895)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:798)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1054)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:902)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2250)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2057)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:143)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3112)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:599)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseOneMessage(RpcClientTcpTransport.java:750)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseMessages(RpcClientTcpTransport.java:634)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport.access$100(RpcClientTcpTransport.java:37)
    at com.google.net.rpc3.impl.wire.RpcClientTcpTransport$1.dataReceived(RpcClientTcpTransport.java:295)
    at com.google.net.async3.SocketConnection.handleNetworkReadEvent(SocketConnection.java:900)
    at com.google.net.async3.SocketConnection.access$400(SocketConnection.java:43)
    at com.google.net.async3.SocketConnection$NetworkReadHandlerImpl.run(SocketConnection.java:929)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:575)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:999)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:881)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInf...(length 8282) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:10:48.657

好的，当使用谷歌应用引擎和谷歌云商店时，你会受到几个时间限制：

*   30s 读取 GS 上的文件。
*   使用 GAE URLFetch 服务时需要 10 秒
*   GAE 上的每个请求都需要 60 秒。

在我的特定情况下，我无法解决这些限制。

# excel - 从文件读取时出现 VBA ReadLine 错误

> ID：11051964
> 
> 赞同：0
> 
> 时间：2012-06-15T13:52:22.957
> 
> 标签：excel, runtime-error, excel-2003, filesystemobject, vba

我正在使用 Excel 2003，并且我的宏中有以下代码。

```
Dim fs, a, retstring
Set fs = CreateObject("scripting.filesystemobject")
Set a = fs.OpenTextFile("C:\file.txt", ForReading, False)
Do While a.AtEndofStream <> True
  retstring = a.ReadLine
Loop
a.Close 
```

当我执行此操作时，它显示

> “运行时错误：5”
> 
> OpenTextFile 中的过程调用或参数无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:32:24.600

您必须首先定义常量 ForReading。您还可以在使用时定义常量 ForWriting 和 ForAppending。

```
Dim fs, a, retstring
Const ForReading = 1, ForWriting = 2, ForAppending = 8
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.OpenTextFile("C:\file.txt", ForReading, False)

Do While a.AtEndofStream <> True
   retstring = a.readline
Loop
a.close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T16:27:07.417

fso 被认为很慢。这是读取文本文件的更快方法。

```
Sub Sample()
    Dim MyData As String, strData() As String
    Dim i as Long

    '~~> Read the entire file in 1 go
    Open "C:\MyFile.Txt" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)

    For i = LBound(strData) To UBound(strData)
        Debug.Print strData(i)
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:18:49.907

当我这样做时它起作用了。

```
 Dim fs, a, retstring
    Set fs = CreateObject("scripting.filesystemobject")
    Set a = fs.OpenTextFile("C:\Users\228319\Desktop\file.txt", 1, False)
    Do While a.AtEndofStream <> True
    retstring = a.readline
    Loop
    a.Close 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-14T13:59:37.827

我正在使用 Excel 2007，并且在几乎相同的代码段中遇到了同样的问题。启用“Microsoft Scripting Runtime”应该可以解决它（主菜单>工具>参考），它对我有用。

# android - 从源代码为 android 构建 libxml2 作为静态库

> ID：11051969
> 
> 赞同：1
> 
> 时间：2012-06-15T13:52:25.750
> 
> 标签：android, android-ndk, libxml2

我正在为 Android 编写简单的 C 库

我正在尝试从源代码构建 libxml2 作为静态库，所以我可以在我的代码中使用它。我正在使用 Eclipse，我想在我的 C 函数中使用 NDK 中的 libxml2。

我将源代码导入到名为 libxml 的新文件夹到项目中，并在 Android.mk 中输入：

```
include $(CLEAR_VARS)
LOCAL_MODULE    := libmyxml2
LOCAL_SRC_FILES := \
    ...  all c files from libxml .. \
    ...
include $(BUILD_STATIC_LIBRARY) 
```

在我的共享库部分： `LOCAL_MODULE := myxml2`

在项目 Properties -> Paths and Symbols -> Includes .. 我有 GNU C 下用于 libxml 的包含文件的目录

当我开始构建时，编译器告诉我错误：没有这样的文件或目录它找不到包含。

我在windows系统上。

是否有任何教程或一些建议如何以简单理解的方式在 NDK 的 C 代码中使用 libxml2？

如何自己为android构建libxml2并开始在Eclipse下使用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:03:55.807

这是如何将 libxml2 构建为 android 的静态库的答案。[为 Android 使用 libxml](https://stackoverflow.com/questions/12052089/using-libxml-for-android) 如果静态库成功构建，您可以轻松地将其链接到您正在编写的应用程序。您还可以下载 libxml2 以及已经为您编写的 Android.mk 文件并使用 NDK ( [https://github.com/android/platform_external_libxml2](https://github.com/android/platform_external_libxml2) ) 构建它。

# iphone - 使 UILocalNotifications 仅显示徽章

> ID：11051970
> 
> 赞同：1
> 
> 时间：2012-06-15T13:52:27.137
> 
> 标签：iphone, objective-c, xcode

我一直在查看 UILocalNotification 的 API。我想在被击中时只设置徽章编号。没有弹出窗口。我尝试将通知设置为仅具有 1 的徽章编号且没有警报正文。但这没有用。

```
//Add new local push notification
locationNotification.fireDate = date;
locationNotification.timeZone = [NSTimeZone defaultTimeZone];
//locationNotification.alertBody = [NSString stringWithFormat:body];
//locationNotification.alertAction = @"Ok";
//locationNotification.soundName = UILocalNotificationDefaultSoundName;
locationNotification.applicationIconBadgeNumber = 1; 
```

这可能吗？我只想在他们打开应用程序后显示消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:12:21.737

我为我从事的一个项目完成了类似的事情。我只需要显示一个徽章编号，没有警报。您可能需要在通知中添加“声音”，我所做的是添加`0.5`第二个静音文件。我的代码看起来像这样。

```
 UILocalNotification *notif = [[UILocalNotification alloc] init];
        notif.fireDate = [NSDate  date];
        notif.timeZone = [NSTimeZone defaultTimeZone];
        notif.soundName = @"silence.caf";
        notif.applicationIconBadgeNumber = 2;
        [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        [notif release]; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T05:55:42.577

这是一个老问题，但希望这会对某人有所帮助。我认为根本不可能安排静默本地通知，但似乎确实如此。

这有效：

```
 UILocalNotification* notification = [[UILocalNotification alloc] init];
    notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:10];
    notification.timeZone = [NSTimeZone systemTimeZone];
    notification.alertBody = nil;        
    notification.applicationIconBadgeNumber = 99;
    [[UIApplication sharedApplication] scheduleLocalNotification:notification]; 
```

我还尝试向 userInfo 属性添加一些信息，以便我可以在计划的通知中识别此通知，但这似乎阻止了通知被触发。

取而代之的是，我现在使用无声音频文件作为 soundName 属性，以便我可以对此进行测试。然而，静音音频文件似乎并不需要实际触发通知。

如果您想做的事情比将徽章更新为您在计划时知道的值更有用，那么您需要使用静默推送通知并设置“内容可用”标志。

# jquery - jquery中任何像android的webview这样的小部件

> ID：11051974
> 
> 赞同：0
> 
> 时间：2012-06-15T13:52:48.487
> 
> 标签：jquery, jquery-ui, jquery-mobile

嗨，我想点击一个在半页和剩余半页表格中显示图像的 URL。在android中，我为此使用了webview。但是如何在 jquery mobile 中做到这一点？有没有像android的webview这样的小部件？任何帮助将不胜感激。提前致谢。我当前的 html 文件如下：

```
<div data-role="page" id="findusPage" data-theme="e">

<div data-role="header">
    <h1>Find Us</h1>
</div>

<div data-role="content">    
<p>
Apex International Hotel, Edinburgh<br/>
31-35 Grassmarket<br/>
Edinburgh<br/>
EH1 2HS<br/>
Scotland<br/>
</p>

<p>
<img src="http://10.22.32.121/charts/mobilechart.asp">
</p>

<p>
<a data-role="button" id="drivingButton" data-theme="a">Get driving directions</a>
</p>

</div>

<div data-role="footer">
    <h4>Page Footer</h4>
</div> 
```

但它不显示图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:14:57.640

好的，我得到了答案，而不是 img 标签 iframe 标签解决了我的问题。

# c# - 设计：如何通知控制器有关跨应用程序的数据修改

> ID：11051978
> 
> 赞同：14
> 
> 时间：2012-06-15T13:52:54.383
> 
> 标签：c#, winforms, .net-3.5, data-synchronization

在基于 mvc 的大系统中，有负责编辑数据的视图和显示该数据的视图。

示例：`UserManagementView`和`UserSelectionView`。

每个子系统应该知道它是否需要数据更新，在另一个子系统对相同的数据进行了更改之后，以便它的控制器知道是否需要数据更新。

我对此的想法类似于观察者模式（有点集成在 c# 中），所有控制器都将是侦听器，最终会收到发生数据操作的通知。

`BindingList<>`例如提供一个`ListChanged`事件。类似地，可以为每个数据结构创建一个接口，并将更改通知控制器。这会增加开销（IMO），我发现这个解决方案很难在大型系统中维护，无论如何更新数据也不是解决方案。

哪种架构设计可以在这种情况下提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T06:45:39.593

这个问题听起来像你试图在没有模型部分的情况下使用 MVC。如果我误解了，编辑您的问题以包含实际用例（示例）可能有助于我们理解上下文。

但总的来说，没有什么应该真正持久/存储在您的控制器中。所以控制器中不应该有任何需要“更新”或“通知”的内容（即：没有数据）。相反，数据应该位于管理所有数据的单独“模型”层中。然后视图从模型层读取以获取该视图的任何数据。

如需快速复习，请查看[MVC 上的 wikipedia 页面，](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)该页面有一个很好的经典 MVC 流程图和关于组件交互的简单文章。

## 讨论示例

让我们试着设计一个例子来理解这个问题。

假设我的应用程序中有一个用户列表。此列表可能显示在：

*   主管理员列表视图
*   管理员编辑用户视图
*   用户的个人资料视图
*   也许更多？

这些视图中的每一个都将从您的模型层请求数据并在屏幕上显示一些内容。

现在假设对一个用户的配置文件进行了更改。这将通过一个控制器方法来完成，该方法执行任何必要的工作以将一些更改应用于模型。

我的理解是，您希望所有这些视图都更新以反映这种变化。这意味着视图需要从模型中重新加载数据。它不应该从控制器本身获取此数据，即使控制器触发此重新加载/刷新 - 或者更确切地说，控制器方法可能有助于从您的模型层进行查询。重要的是，您不会在整个应用程序的多个控制器中维护数据的多个副本。持久性集中在模型层。

在 winforms 的情况下，如果您的 UI 组件被构建为识别该接口并相应地刷新，模型层可能能够提供类似于提到的 INotifyPropertyChanged 接口的东西。但这是一种相当依赖平台的方法。

一种更加平台/上下文不可知的方法是已经提到的发布-订阅（发布-订阅）模式。在这种情况下，对模型进行更改的每个控制器方法也会发布其更改的通知。该数据的任何视图都可以通过从模型层刷新/重新加载视图数据来监听并响应此类通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T06:34:36.873

为什么不直接使用 .NET 中内置的事件模型？我没有正确理解这个问题吗？您的问题表明您认为这会增加很多“开销”（不清楚您是指性能还是开发），但从性能的角度来看，这个解决方案非常轻量级。

```
class YourModel
{
    //---- event class can contain data elements to update listeners
    public class DataChangedEventArgs : EventArgs
    {
        ...
    }

    //---- this is what the client callback need to look like
    public delegate void DataChangedDelegate(object oSender, DataChangedEventArgs args);

    //---- public event that clients subscribe to
    public event DataChangedDelegate evtDataChanged;

    //---- any changes in YourModel invoke this method to notify clients
    protected void OnChanged(DataChangedEventArgs args)
    {
        if (evtDataChanged != null)
            evtDataChanged(this, args);
    }

    //---- method(s) in your Model that change internal data
    public void ImaDataChanger(...) 
    {
        //---- stuff that changes the data

        OnChanged(args);    //-- notify clients
    }
}

class UserSelectionView
{
    //---- the event callback
    public void DataChangedHandler(object oSender, YourModel.DataChangedEventArgs args)
    {
        //---- process update or refresh data
        //---- UI updates will have to be marshalled to the UI thread
    }

    //---- sign up for events
    public void Subscribe(YourModel model)
    {
        model.evtDataChanged += new YourModel.DataChangedDelegate(DataChangedHandler);
    }
} 
```

您可以选择定义其他事件或将数据成员添加到 DataChangedEventArgs 以提供有关数据更改类型的信息。

此外，如下面的评论所示，如果您需要将视图放在不同的计算机上或同一台计算机上的不同进程中，您可以使用 .NET Remoting 来实现这一点，只需对代码进行很少的更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T12:42:13.037

我知道 WPF 与 MVVM 的结合在很大程度上依赖于`INotifyPropertyChanged`和额外的`INotifyCollectionChanged`. 也许这个简单的界面可能会为您解决问题。

[在此处](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)阅读有关此内容。Josh Smith 的一篇关于 MVVM 基础知识的文章，您可以在其中了解`INotifyPropertyChanged`. 虽然它在 WPF 环境中，但它也可以在 WinForms 中使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T03:18:37.330

我已经成功地使用了[发布-订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)来解决这类问题。每当有人修改某些人可能有兴趣知道的内容时，您就会引发“ObjectWasModified”事件，或者如果您想要更具体的事件，例如“NewUserAdded”等……然后，每个子系统或其他需要知道的事情何时发生发生时，它订阅该类型的事件。您可以将模板参数添加到 Event ObjectWasModified 或附加条件中，这样每个系统只接收它真正感兴趣的事件。

# git - git 可以忽略特定的注释调试代码吗？

> ID：11051980
> 
> 赞同：3
> 
> 时间：2012-06-15T13:52:56.837
> 
> 标签：git, comments, ignore

作为前端开发人员，我经常添加代码来隐藏后端开发人员的错误消息；）

有没有办法让 git 忽略以某种方式注释的代码？例如

```
.error { display:none; } // DEBUG-GIT-PLEASE-IGNORE 
```

或者有人为此写了一个插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:44:43.870

您可以创建一个干净的[过滤器](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)，它会删除所有包含`DEBUG-GIT-PLEASE-IGNORE`.

但更干净的方法是更改​​ Web 应用程序，以便可以在 Web 主机上配置此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:19:50.487

本质上，没有。Git 目前没有办法忽略文件​​的特定部分，只能忽略整个文件。

但是，可以编写一个脚本来修改 的输出`git diff`，并配置 git 以使用该脚本。我不确定这会有多有效，因为我不认为 git 使用 diff 来暂存文件，但它可能值得研究。

# asp.net-mvc-3 - 从另一个视图渲染视图的一部分

> ID：11051982
> 
> 赞同：0
> 
> 时间：2012-06-15T13:53:05.343
> 
> 标签：asp.net-mvc-3

我正在将我的 WebForms 项目移动到 MVC 并且很难设计东西。我的应用程序的基本显示在_Layout。该页面分为 4 个部分（例如 A、B、C 和 D 部分），其中 3(A,B,C) 仅包含 html，而一个(D) 是动态的。我曾使用@RenderBody 来引入 D 部分的内容。但是，现在其他部分正在发生变化，我需要为这些部分使用单独的控制器。将其内容显示到 _Layout 中的最佳方法是什么？

@Html.RenderPartial / @Html.Partial / @Html.RenderAction / @Html.Action ？

我目前正在尝试使用 - @Html.Action("Index", "CController") 替换 C 部分

但是，这是行不通的。

在 CController 的 Index.cshtml 中，我有 Layout = null，最初它被设置为指向 _Layout.cshtml，但我[在这里](https://stackoverflow.com/questions/4412197/asp-net-mvc-3-html-action-wont-render-return-any-html)读到这会产生问题。

将 C 部分放入 CControllers 视图后，它不会显示之前显示的基本 _Layout 页面。

### 这是 CController 的 Index.cshtml -

```
<div id="noteContainerDiv">
    Here goes all the data to display
</div> 
```

### 这是 CController.cs 的代码 -

```
public class CController : Controller
{        
    public ActionResult Index()
    {
        return PartialView();
    }

} 
```

任何人都可以提出正确的设计方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:23:41.710

您可以做的是为您的子视图（您称为 D 的视图模型）创建一个视图模型，并从您的布局视图中传入此视图模型。

即在你的_Layout中做这样的事情：

```
@Html.Partial("_SubviewD", Model.SubviewDModel) 
```

然后显然在您的控制器中，您需要初始化此子视图模型并将其包含在您的模型中（或者，在 ViewBag 中 - 对建议的邪恶表示歉意！）您甚至可以找到方法在不更改所有控制器的情况下执行此操作（例如通过基本 Controller 类和覆盖`OnActionExecuted`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:36:41.040

有很多方法可以做到这一点。但我会坚持你最初的方法。

让您的 CController Index 操作返回 PartialViewResult 而不是完整结果。

您没有为局部视图设置布局。因此，在您的 CController 索引操作中，您将拥有如下内容：

```
var model = ....
return this.PartialView("NameOfYourPartialView", yourModel); 
```

当你打电话时

```
@Html.Action("Index", "CController") 
```

一切都应该没问题，酷吗？

# c# - Visual Studio 2010：创建页面

> ID：11051983
> 
> 赞同：0
> 
> 时间：2012-06-15T13:53:08.040
> 
> 标签：c#, visual-studio-2010, datatable

我在 VS2010 中的一个网站上工作，我有一个数据表，其中包含超过 10,000 行，所有行都在一个列中。（这些条目是我公司所有员工的不同登录 ID）目前我在 gridview 的单个列中显示所有条目。

```
<asp:GridView ID="gvUsers" runat="server" BackColor="White" AutoGenerateColumns="False"    GridLines="Horizontal">       
<Columns>
< asp:HyperLinkField DataTextField = "NTlogin" HeaderText = "Users" DataNavigateUrlFields = "NTlogin" DataNavigateUrlFormatString = "FCS3UserInfo.aspx?user={0}" /> 
</Columns>
</asp:GridView> 
```

我想做的是将这些条目放在多个页面上。因此，如果在给定的一天数据表有 9,999 个条目，则有 5 个页面，但如果它有 10,001 个条目，则有 6 个用户页面，依此类推。如果可能的话，我希望页面之间有偶数个用户。

如果有人能指出我的教程方向，这将有助于我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:29:09.217

您要查找的内容称为[Paging](http://www.asp.net/web-forms/tutorials/data-access/paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs)。浏览该教程，它可能会将您推向正确的方向。

# windows - 文件重命名失败，访问被拒绝（共享冲突）

> ID：11051984
> 
> 赞同：1
> 
> 时间：2012-06-15T13:53:12.020
> 
> 标签：windows, multithreading, filesystems

我的程序创建一个文件，写入它，关闭它，将它重命名为其他东西。对于一位客户，重命名经常因共享冲突而失败，我无法重新创建此问题。

该程序是异步多线程的，在关闭和重命名时保证创建和写入已经完成，但关闭和重命名可能因处于不同线程中而以任意顺序发生。

客户向我保证没有安装任何 av 或备份程序，并且我们已尝试禁用 Windows Search。

当关闭发生在重命名之前或之后，一切正常（文件使用共享的读+写+删除标志打开）。然而，当它们发生的时间非常接近时，它有时会失败。使用 ProcessMonitor 运行时，不会发生错误。

我知道重命名是由几个文件操作（打开，设置信息，至少关闭）组成的，所以我假设文件关闭可能与文件重命名交错，这似乎是核心问题。

我将能够通过确保在重命名后关闭文件来解决这个问题。但我不明白究竟是什么导致了共享违规，我想知道更多为什么这是一个问题。**谁能给我更多关于发生了什么的信息？**

# node.js - express、jade、node.js、coffeescript，使用变量数组和 for 循环设置路由

> ID：11051989
> 
> 赞同：2
> 
> 时间：2012-06-15T13:53:33.250
> 
> 标签：node.js, coffeescript, express, pug

我刚刚继承了一个用coffeescript编写的node.js/express项目，并使用jade来渲染视图。在我的视图文件夹中，我有大约 20 个需要设置路由的玉文件。而不是像这样一遍又一遍地重复自己（目前工作得很好）：

```
app.get '/html/404.html', (req,res) ->
  res.render '404',

app.get '/html/503.html', (req,res) ->
  res.render '503', 

app.get '/html/foo.html', (req,res) ->
  res.render 'foo', 
```

我希望通过创建一个 url 数组并使用 for 循环对其进行迭代来减少混乱，如下所示：

```
urls = [
  "404"
  "503"
  "foo"
]

for url in urls
  app.get "/html/#{url}.html", (req,res) ->
    res.render "#{url}", 
```

不幸的是，这不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:57:08.557

这是在 JavaScript 循环中定义闭包时发生的经典问题：您希望`url`路由函数中的值与定义该函数时的值相同，但实际上，它与循环中的最后一个值相同曾是。`url`毕竟只有一个变量。

解决方法是在外部闭包中“捕获”该变量，这就是 CoffeeScript 具有以下`do`语法的原因：

```
for url in urls
  do (url) ->
    app.get "/html/#{url}.html", (req,res) ->
      res.render "#{url}" 
```

有关这方面的更多信息，请参阅我的 PragPub 文章[A CoffeeScript Intervention](http://pragprog.com/magazines/2011-05/a-coffeescript-intervention)。

（话虽如此，Arnaud 建议在路由中使用 Express 参数是一个更优雅的解决方案。如果您可以完全避免循环，请这样做！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:08:29.650

快速响应：

```
for url in urls
  app.get "/html/#{url}.html", (req,res) ->
    res.render req.params.url 
```

# c# - 同时分配和检查空值？

> ID：11051992
> 
> 赞同：7
> 
> 时间：2012-06-15T13:53:42.837
> 
> 标签：c#

我有以下情况：

```
if(xml.Descendants(ns + "Children").FirstOrDefault() != null)
{
    XElement children = xml.Descendants(ns + "Children").FirstOrDefault();
} 
```

有没有一种方法可以检查 null 并同时分配值，而不必两次搜索该值，类似于：

```
//Not sure if this is correct.
if (XElement children = xml.Descendants(ns + "Children").FirstOrDefault() != null)
{

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T13:56:18.703

[变量赋值也返回值](https://stackoverflow.com/questions/3807192/why-do-assignment-statements-return-a-value)。因此，以下形式的语法将执行：

```
SomeType someVariable;
if ((someVariable = valueToAssign) != null)
{
    // valueToAssign was not null
} 
```

在你的情况下：

```
XElement children;

if ((children = xml.Descendants(ns + "Children").FirstOrDefault()) != null)
{

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T14:00:24.613

我会这样做：

```
XElement children = xml.Descendants(ns + "Children").FirstOrDefault();
if(children != null)
{
    //use children
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:56:09.773

你可以做

```
XElement children = xml.Descendants(ns + "Children").FirstOrDefault(); 
```

然后检查 null

```
if (children != null) {...} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T13:56:32.213

您可以在单个语句中分配然后测试分配的值（但不能声明它）：

```
XElement children = null;

if ((children = xml.Descendants(ns + "Children").FirstOrDefault()) != null)
{    
} 
```

但这在功能上与之后的分配和测试相同：

```
var children = xml.Descendants(ns + "Children").FirstOrDefault();

if (children != null)
{      
} 
```

我倾向于后者，因为我认为它更具可读性（也可以让你使用`var`）。

将空值分配给变量本身永远不会产生错误（假设这只是一个标准的局部变量），随后使用该变量可能会这样做。`xml`因此，假设本身不为空，上述任一解决方案都是安全的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T13:56:16.703

你可以这样做：

```
null != children = xml.Descendants(ns + "Children").FirstOrDefault() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-29T17:48:19.267

您可以在 C# 7 中使用模式匹配

```
if(xml.Descendants(ns + "Children").FirstOrDefault() is XElement children)
{
    xml.Descendants(ns + "Children").FirstOrDefault();
} 
```

*这是一个迟到的回应，但这个问题出现在谷歌的顶部，它缺少 C# 7 的答案*

# java - 的值未正确提交

> ID：11051994
> 
> 赞同：2
> 
> 时间：2012-06-15T13:53:50.537
> 
> 标签：java, ajax, jsf-2, selectonemenu

在我的应用程序中，我有以下代码：

```
<h:form>
    <h:panelGrid id="initPanel" columns="3">
        <h:outputLabel for="type" value="*Type: " />
        <h:selectOneMenu label="type" id="type" value="#{createNews.type}"
                         required="true" requiredMessage="Type is required.">
            <f:ajax render="typePanel" />
            <f:selectItem noSelectionOption="true" itemLabel="Choose one..." />
            <f:selectItem itemValue="Article" itemLabel="Article" />
            <f:selectItem itemValue="Video"   itemLabel="Video" />
        </h:selectOneMenu>
        <p:message for="type" />

        <h:outputLabel for="title" value="*Title: " />
        <p:inputText label="title" id="title" 
                     value="#{createNews.news.title}" 
                     required="true" requiredMessage="Title is required." />
        <p:message for="title" />
    </h:panelGrid>

    <h:panelGroup id="typePanel">
        <h:panelGrid rendered="#{createNews.type == 'Article'}" columns="1">
            <h:panelGrid columns="2">
                <h:outputLabel for="content" value="*Content: " />
                <p:message id="contentMsg" for="content" />
            </h:panelGrid>

            <p:editor id="content" value="#{createNews.news.content}" width="580" />
        </h:panelGrid>

        <h:panelGrid rendered="#{createNews.type == 'Video'}" columns="3">
            <h:outputLabel for="embedCode" value="*Embed code: " />
            <p:inputText label="embedCode" id="embedCode" 
                         value="#{createNews.news.embedCode}" />
            <p:message for="embedCode" />
        </h:panelGrid>
    </h:panelGroup>

    <p:commandButton value="Confirm" update="initPanel typePanel" actionListener="#{createNews.createNews}" />

</h:form> 
```

这是托管bean：

```
@Named(value = "createNews")
@RequestScoped
public class CreateNews {
    private Integer type;
    private News    news;

    public void createNews() {...}

    // Getters and Setters
} 
```

当我选择`Article`or`Video`时，相应的部分会正确呈现在`typePanel`. 在下面的示例中，我选择`Video`并`Embed code`渲染了该部分。

![嵌入代码部分正确呈现。](../Images/e14ab28cc015136c3070a7416175534b.png)

但是，当我单击 时`Confirm`，之前渲染的部分突然消失了。

![嵌入代码部分消失了！](../Images/e899e34d764af39529de29f9eceaa7b6.png)

不知何故，`type`我的托管 bean 的属性没有收到`<h:selectOneMenu>`.

如果您能给我一个建议，我将不胜感激。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:14:34.570

这个问题是由以下两个事实引起的：

*   在每个请求（包括 ajax 请求）上都会创建一个请求范围的 bean。
*   在一般验证失败的情况下，模型值不会更新。

当您更改下拉列表时，您正在创建一个请求范围的 bean，其中`rendered`设置了属性的正确属性。但是请求范围的bean当然会在请求结束时被丢弃。当您提交确认按钮时，将创建一个全新的请求范围 bean，所有属性都设置为默认值，由于一般验证失败而未更新，这就是`rendered`属性评估回`false`.

将 bean 放在 JSF 视图范围或 CDI 会话范围中应该可以解决这个问题。

另一种方法是将下拉列表绑定到[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)当前视图范围中的 an 并通过其评估所选值[`UIInput#getValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html#getValue%28%29)。

```
<h:selectOneMenu ... binding="#{type}">
...
<h:panelGrid rendered="#{type.value == 'Article'}">
...
<h:panelGrid rendered="#{type.value == 'Embed'}"> 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# iphone - 如何在 iPhone 中将 UIImage 转换为 JSON 文件？

> ID：11051997
> 
> 赞同：4
> 
> 时间：2012-06-15T13:54:13.307
> 
> 标签：iphone, json, uiimage

我一直在使用**NSJSONSerialization**类将对象的字段转换为 JSON。遗憾的是，仅支持**NSString、NSNumber、NSArray、NSDictionary 或 NSNull**类型。

由于我的对象有一个额外的字段，即**UIImage**，我不知道如何处理它。我相信很多人都遇到过这个常见问题，那么解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:25:08.957

您可以通过 base64 对数据进行编码`UIImage`，并将其添加到 json 对象中。要从 UIImage 获取数据，您可以使用`UIImagePNGRepresentation`和`UIImageJPEGRepresentation`。

像这样的代码，

```
NSData *imageData = UIImagePNGRepresentation(image);
NSString *base64encodedStr = base64encode(imageData);
[dict setObject:base64encodedStr forKey:@"myImage"];
//then covert dict to json object. 
```

要恢复`UIImage`数据，只需解析 json 对象并通过 base64 解码数据。

希望这可以帮到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:57:43.977

您可以将图像数据转换为字符串，然后写入该字符串。

```
NSData *imageData = UIPNGRepresentation(image);
NSString *imageString = [[NSString alloc] initWithData:imageData encoding:NSUTF8StringEncoding];

//I don't know how to use NSJSONSerialization
//[NSJSONSerialization serializeString:imageString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-04T22:58:47.310

```
NSString *base64encodedStr = [imageData base64Encoding]; 
```

# fossil - 为外部目录添加化石

> ID：11051999
> 
> 赞同：3
> 
> 时间：2012-06-15T13:54:14.960
> 
> 标签：fossil

我在这里阅读了一些问题和答案，但与我的情况完全不符。

我想将我所有的化石存储库保存在一个地方。

所以我有

c:\Fossil_Repos\ 包含一个用于 WebPages_Repo 的存储库和另一个用于 Dev_repo 等的存储库等

我想将我的原始网页和开发页面保留在 Fossil_Repos 目录之外的单独目录中，这是我的结构

```
c:\Fossile_Repos\
c:\DevEnvironment\
c:\WebPageDevelopment\ 
```

这种结构似乎不无道理。

如果从我的 c:\Fossile_Repos\ 我运行命令

```
fossil open Dev_Repo
fossil add c:\DevEnvironment 
```

然后我看到 c:\DevEnvironment 下所有目录和文件的列表，但是我接着添加

```
fossil commit -m "first deposit" 
```

并在第一个文件上收到一条错误消息，说明该文件不存在。请注意，文件路径是正确的（但是它使用文件分隔符的 unix 方法将目录报告为 C:/DevEnvironment/firstFile.xml）

有人对我是否可以这样做有任何想法吗？

提前致谢

大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:56:25.917

您可以将存储库保存在任何您喜欢的地方。但是，您必须从结帐中向化石发出命令。

因此，在您的示例中：

```
cd c:\DevEnvironment
fossil open c:\Fossile_Repos\repo_file_name
.. edit the files ...
fossil commit -m "first deposit" 
```