# StackOverflow 问答 10502000-10502999

# jquery - MVC / jQuery FireFox 和 window.location 不工作

> ID：10502001
> 
> 赞同：0
> 
> 时间：2012-05-08T15:49:11.513
> 
> 标签：jquery, firefox

我有这段代码，在 FireFox 中它似乎不起作用

```
 SignIn: function () {

    $("#message-box").hide();

    var RememberMe = false;

    if ($('#RememberMe').is(':checked') == true) {
        RememberMe = true;

    }

    $.ajax({
        url: "/Home/AuthenticateUser",
        data: { UserEmail: $("#Login-UserEmail").val(), UserPassword: $("#Login-UserPassword").val(), RememberMe: RememberMe },
        type: "POST",
        success: function (data) {

            if (data != "") {
                $("#message-box").html(data);
                $("#message-box").slideDown();
            } else {

                  // alert("test") this dont fire either even though data ==""
            window.location.href = "/Dashboard/";
                  //tried window.location = "/Dashboard/"; not work either

            }

        },
        error: function (data) {
            alert(data);
        }
    });

}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:26:13.837

我有这段代码，在 FireFox 中它似乎不起作用

```
 SignIn: function () {

    $("#message-box").hide();

    var RememberMe = false;

    if ($('#RememberMe').is(':checked') == true) {
        RememberMe = true;

    }

    $.ajax({
        url: "/Home/AuthenticateUser",
        data: { UserEmail: $("#Login-UserEmail").val(), UserPassword: $("#Login-UserPassword").val(), RememberMe: RememberMe },
        type: "POST",
        dataType:"text",
        success: function (data) {

            if (data != "") {
                $("#message-box").html(data);
                $("#message-box").slideDown();
            } else {

                  // alert("test") this dont fire either even though data ==""
            window.location.href = "/Dashboard/";
                  //tried window.location = "/Dashboard/"; not work either

            }

        },
        error: function (data) {
            alert(data);
        }
    });

}, 
```

我需要指定 dataType:"text" 才能在 FF 中工作。在 FF 中，当数据为 =“”时它返回 [object object]，所以当我检查 if (data!="") 时，在 FF 中它始终为真。

# r - 如何使用函数和 *apply 查看文件中的结果？

> ID：10502003
> 
> 赞同：2
> 
> 时间：2012-05-08T15:49:31.020
> 
> 标签：r, apply

我喜欢在窗口中弹出结果，以便更容易查看和查找（例如，当控制台继续滚动时，它们不会丢失）。一种方法是使用`sink()`and `file.show()`。例如：

```
y <- rnorm(100); x <- rnorm(100); mod <- lm(y~x)
sink("tempSink", type="output")
summary(mod)
sink()
file.show("tempSink", delete.file=T, title="Model summary") 
```

我通常这样做是为了检查模型拟合，如上所述，但也适用于各种其他功能和对象，例如：`summary(data.frame)`、`anova(model1, model2)`、`table(factor1, factor2)`。这些很常见，但也可能出现其他情况。这里的要点是函数和对象的性质都可以变化。

每次都输入以上所有内容有点乏味。我想编写一个可以调用的更简单的函数，如下所示：

```
sinkShow <- function(obj, fun, title="output") {
    sink("tempSink", type="output")
    apply(obj, ?, fun)
    sink()
    file.show("tempSink", delete.file=T, title=title)
} 
```

显然，这是行不通的。有几个问题。首先，您将如何做到这一点，以便它不会因错误类型的对象或函数而崩溃，而不必拥有条件执行列表（即`if(is.list(obj) { lapply...`）。其次，我不确定如何处理`margin`争论。最后，即使我尝试简单、人为的例子，我知道一切都设置得当，这也不起作用，所以似乎有一些根本性的错误。

有谁知道如何简单轻松地处理这种情况？我对 R 并不陌生，但我从未被正式教授过；我以一种特别的方式学会了技巧，也就是说，我不是一个非常成熟的 R 程序员。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T18:13:54.203

而不是使用`apply`我认为你想要`do.call`的 . 确保将其包装在 a 中，`print`因为它位于函数内部。

这是一种可能的实现：

```
sinkShow <- function( obj, fun, title='Output', ...) {
    file <- tempfile()
    args <- c(list(obj),list(...))

    capture.output( do.call( fun, args ), file=file )
    file.show(file, delete.file=TRUE, title=title)
} 
```

虽然它可能应该重命名，因为我也跳过了使用 sink。我可能会稍微修改一下并将其放入 TeachingDemos 包中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T16:35:48.800

使用`page`. 以下是一些示例模型：

```
d <- data.frame(y1=rnorm(100), y2=rnorm(100), x=rnorm(100))
mod <- lm(y1~x, data=d)
mods <- list(mod1=lm(y1~x, data=d), mod2=lm(y2~x, data=d)) 
```

以下是您的使用方法`page`：

```
page(summary(mod), method="print")
page(lapply(mods, summary), method="print") 
```

对于我的原始帖子，其中的代码被证明是 的近乎重新实现`page`，请参阅编辑历史记录。

# android - 随着位置的变化，餐厅列表应自动更改，无需单击按钮应用程序

> ID：10502005
> 
> 赞同：0
> 
> 时间：2012-05-08T15:49:40.080
> 
> 标签：android, location

我正在设计一个 android 应用程序，我想在其中列出特定位置的所有餐厅。这发生在应用程序启动时。随着位置的变化，即使应用程序已经打开，餐厅列表也应相应更改。无论我在谷歌上得到什么例子，都可以通过点击一个按钮来填充餐厅。但在我的情况下，它发生在启动时，如果应用程序已经启动，那么也取决于列表应该自行更改的位置。

我创建了一个 MainClass，它下面有一个 AsyncTask 的子类，这个子类有一个实现 LocationListener 的类。但问题是我必须在 onLocationChange 中再次调用 doInBackground() 方法才能在位置更改时自动获取结果。

请指导我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:01:43.027

将获取用户位置和收集新餐厅数据的所有逻辑放入`Service`. 可以侦听您的`Service`位置更新（如果您希望它一直运行，希望将其设置为稀疏间隔），然后在`AsyncTask`发生需要新数据的足够大的更改时使用您的更新列表。

当它在前台（在和方法之间）时，您可以绑定到`Service`in以获取最新信息，并在数据更新期间注册为回调，而在您的列表中调用可见。`Activity``onPause()``onResume()``Activity``notifyDataSetChanged()`

[您可以在此处](http://developer.android.com/guide/topics/fundamentals/bound-services.html#Binder)阅读有关`Service`在应用程序中本地创建绑定的更多信息。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:03:27.477

为餐馆列表使用一些 ArrayAdapter 并将其实例保存在 Main 类中，然后每当位置更改时，使用 AsyncTask 检索附近的餐馆并`onPostExecute`替换 ArrayAdapter 内部列表并调用`notifyDataSetChanged()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:59:30.173

聆听主课中的位置变化。收到（重大）更改后，启动异步任务以查询餐馆。将结果（例如餐厅数组）传递给 onPostExecute 并相应地更新您的 UI。

可能在查询餐厅时禁用更新，或者取消查询并在每次新更新时启动一个新查询。

# magento - 如何在侧边栏中调用 mycart 产品名称

> ID：10502010
> 
> 赞同：0
> 
> 时间：2012-05-08T15:50:02.690
> 
> 标签：magento, product

我正在使用 magento 1.6.1.0。我在我的购物车页面中添加了新的侧边栏，它将显示产品标题、总金额和继续结帐按钮一一。我通过调用包括总金额并通过调用`<?php echo $this->getChildHtml('totals'); ?>`进行结帐按钮`<?php echo $this->getChildHtml('methods') ?>`

但我不知道如何调用产品名称。

任何人都知道如何调用当前添加到购物车中的我的购物车产品名称吗？请分享您的想法来做到这一点！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:37:58.720

您可以通过 Mage::getSingleton('checkout/cart') 访问您的购物车对象。调用 Mage::getSingleton('checkout/cart')->getItems() 将获得您当前的购物车项目集合，您可以遍历该集合以获取产品名称以及其他详细信息。

```
$items = Mage::getSingleton('checkout/cart')->getItems(); 
foreach ($items as $item) {
        echo $item->getName();
    } 
```

# objective-c - 线程 1：AppDelegate.m 文件中的断点 1.3 错误

> ID：10502019
> 
> 赞同：0
> 
> 时间：2012-05-08T15:50:27.960
> 
> 标签：objective-c

我的 AppDelegate.m 文件中出现运行时错误；该项目编译良好，但不会显示在 iOS 模拟器中。在文件中，我得到一个绿色箭头，上面写着 Thread 1:breakpoint 1.3 error 我无法弄清楚。

当它完成运行时，我得到一个指向这一行的堆栈跟踪，但没有发现代码有任何问题。我已经注释掉了问题所在的行。你能告诉我有什么问题吗？

WhereamiAppDelegate.m

```
#import "WhereamiAppDelegate.h"

#import "WhereamiViewController.h"

@implementation WhereamiAppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
  self.viewController = [[WhereamiViewController alloc] initWithNibName:@"WhereamiViewController" bundle:nil];
  self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible]; // Thread 1: breakpoint 1.3
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
  // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
  // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
  // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
  // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
  // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
  // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
  // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:11:43.123

检查您的 xib 文件以查找仍链接的已删除插座： ![在此处输入图像描述](../Images/f5990c10dda6a1898aaef40b46d28169.png)

我想首先要检查的是你的根视图控制器的 xib 文件`WhereamiViewController.xib`

# php - PHP递归foreach循环

> ID：10502025
> 
> 赞同：-1
> 
> 时间：2012-05-08T15:50:50.727
> 
> 标签：php, tree, foreach

我在目录中有一个格式为 YearMonthDay Time 的文件列表，如下所示

```
20080508-120801suggestions.sql
20090508-120737categories.sql
20100508-120737articlelikes.sql
20110508-120737article.sql
20120508-120737comments.sql
20120508-120737loginusers.sql
20120508-120737popsearch.sql
20120508-120737suggestions.sql
20120508-120801article.sql 
```

我希望我的 PHP 显示多年来的一项，然后当您扩展它时，它将显示几个月的一项，然后再显示一天的一项，然后在那里显示当天的所有可用备份。

我已经完成了第一步，它列出了所有独特的年份，并且一直盯着代码太久不知道下一步该去哪里。

我将变量 year 传递给 URL，因此可以根据需要将其作为代码的一部分。

```
if ($handle = opendir($_SERVER['DOCUMENT_ROOT'] . 'sqlbackup/')) 
{
    while (false !== ($entry = readdir($handle))) 
    {
        $isYearfound = 'false';
        //$dirlist = array();
        if (($entry != ".") AND ($entry != ".."))
        {
            foreach ($dirarray as $dirarrayyear)
            {
                if (substr($entry, 0, 4) == $dirarrayyear)
                {
                    $isYearfound = 'true';
                }
            }
            if ($isYearfound == 'false')
            {
                $dirarray[] = substr($entry, 0, 4);
                Print "<a href='myknowledge.php?mnpage=managedb&date=" . substr($entry, 0, 4) . "'>" . substr($entry, 0, 4) . "</a><br/>";
            }
            //Print $entry . "<br/>";
        }
    }
    closedir($handle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:19:00.557

所以第一部分看起来不错。但是您可能希望在 URL 中传递年份和月份，以便代码比较文件名的前 6 个字符，然后对于生成的那些 URL，它将传递完整的 8 个字符。

```
first pass date=2008
second pass date=200805
third pass date=20080501 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:21:28.230

你好，形成我整个月所看到的，`05`这样你就不会得到结果......我在我的演示中更改了日期，我得到了这个

```
$dir = new DirectoryIterator('PATH_TO_SQL_DIR');
$list = array();
foreach($dir as $file)
{
    if($file->isDot())
        continue;

    list($prifix,$surfix) = explode("-", $file->getFilename(),2);
    $date = DateTime::createFromFormat("Ymd", $prifix);
    $year = $date->format("Y");
    $month = $date->format("M");

    if(!isset($list[$year]))
    {
        $list[$year] = array();
    }

    if(!in_array($month, $list[$year]))
    {
        $list[$year][] = $month;
    }
}

echo "<pre>" ;
print_r($list); 
```

输出

```
Array
(
    [2008] => Array
        (
            [0] => May
            [1] => Dec
        )

    [2009] => Array
        (
            [0] => May
        )

    [2010] => Array
        (
            [0] => May
        )

    [2011] => Array
        (
            [0] => May
        )

    [2012] => Array
        (
            [0] => Jan
            [1] => Feb
            [2] => May
            [3] => Dec
        )

) 
```

你不能用它来建立任何你想要的链接......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:15:52.867

我为你创建了一个脚本，我的帮助。它不是递归的，但我认为它可以满足您的需求，并且您根本不需要递归。请将目录路径/脚本名称等更改为您的，它将为您工作。

```
$dir = scandir('myfiles');
$prevyear=0;
$prevmonth=0;
$prevday=0;

foreach ($dir as $file) {

if ($file!='.' && $file!='..') {

    if (isset($_GET["year"]) && isset($_GET["month"]) && isset($_GET["day"])) { //if all three is set show file

        if (preg_match('/^'.$_GET["year"].$_GET["month"].$_GET["day"].'/',$file,$match)) {
            echo '<a href="'.$file.'">'.$file.'</a><br />';
        }

    } else if (isset($_GET["year"]) && isset($_GET["month"])) { //if only year and month set show days
        if (preg_match('/^'.$_GET["year"].$_GET["month"].'/',$file,$match)) {
            $day = preg_replace(array('/^\d{6}/','/\-.*?$/'),'',$file);
            if ($day!=$prevday) {
                echo '<a href="script.php?year='.$_GET["year"].'&month='.$_GET["month"].'&day='.$day.'">' . $day . '</a><br />';
                $prevday=$day;
            }
        }   
    } else if (isset($_GET["year"])) { //if only year set show months
        if (preg_match('/^'.$_GET["year"].'/',$file,$match)) {
            $month = preg_replace(array('/^\d{4}/','/\d{2}\-.*?$/'),'',$file);
            if ($month!=$prevmonth) {
                echo '<a href="script.php?year='.$_GET["year"].'&month='.$month.'">' . $month . '</a><br />';
                $prevmonth=$month;
            }
        }   
    } else { //if nothing set show years
        $year = preg_replace('/\d{4}\-.*?$/','',$file);
        if ($year!=$prevyear) {
            echo '<a href="script.php?year='.$year.'">' . $year . '</a><br />';
            $prevyear=$year;
        }
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T09:08:06.370

非常感谢巴巴的所有帮助。这是我最后用来解决问题的代码。

```
$dir = new DirectoryIterator($_SERVER['DOCUMENT_ROOT'] . 'sqlbackup/');
$list = array();
foreach($dir as $file)
{
    if($file->isDot())
    continue;

    list($prifix,$surfix) = explode("-", $file->getFilename(),2);
    $date = DateTime::createFromFormat("Ymd", $prifix);
    $year = $date->format("Y");
    $month = $date->format("m");
    $day = $date->format("d");

    if(!isset($list[$year]))
    {
        $list[$year] = array();
    }
    if(!in_array($day, $list[$year][$month][$day]))
    {
        $list[$year][$month][$day] = $day;
    }
}
echo "<pre>" ;

foreach (array_keys($list) as $value)
{
    Print "<a href='myknowledge.php?mnpage=managedb&date=" . $value . "'>" . $value . "</a><br/>";
    if ($value == substr($_GET['date'], 0, 4))
    {
            foreach (array_keys($list[$value]) as $value2)
            {
            Print "&nbsp;&nbsp;&nbsp;&nbsp;<a href='myknowledge.php?mnpage=managedb&date=" . $value . $value2 ."'>" . $value2 . "</a></br/>";
            }
    }
}                               
//print_r($list); 
```

# javascript - 实现输入字段阴影时 JavaScript 出错

> ID：10502027
> 
> 赞同：3
> 
> 时间：2012-05-08T15:50:52.710
> 
> 标签：javascript, jquery

我想在输入字段中实现阴影。这是我正在使用的 JavaScript 代码：

```
<!-- input field shadow  -->
var placeholder = "test field"
$("input").on({
    focus: function() {
        if (this.value == placeholder) {
            $(this).val("").removeClass("shadow");
        }
    },
    blur: function() {
        if (this.value == "") {
            $(this).val(placeholder).addClass("shadow");
        }
    }
}).trigger("blur");​ 
```

当我在 Firefox 中运行代码时，我收到以下错误消息：

> 非法字符 }).trigger("blur");

代码中是否存在错误？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:05:09.537

我认为您正在使用`jQuery 1.6.4`，这是行不通的。

尝试使用`jQuery 1.7.1`及以上版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T16:11:02.543

有问题；也许您是从 word 或其他内容粘贴的，但我在 FF 中看到了错误

删除 ; 和它后面的任何空格然后再次输入，它将摆脱错误

编辑：我认为 ; 后面的空格或制表符 但做上述错误会消失

编辑：要在函数中使用它，只需用函数包装它

```
var addListener = function(){
    // your code here
}; 
```

然后调用它，最有可能在文件准备好

```
$(document).ready(function(){
    addListener();
}); 
```

# jquery - jquery mobile pageContainer问题

> ID：10502029
> 
> 赞同：8
> 
> 时间：2012-05-08T15:50:57.147
> 
> 标签：jquery, jquery-mobile

如果我正确阅读以下文档：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

使用 pageContainer 和角色应该将一个页面的内容替换到我的当前页面中，例如，就好像它是一个保留页眉和页脚但只更改内容的模板。

我试图做一个简单的例子来理解它是如何工作的，但我有一个地狱般的时间。

这是我的超级简单的例子。

```
<!DOCTYPE html>
<html>
  <head>
  <title></title>

  <link rel="stylesheet" href="static/css/jquery.mobile-1.1.0.min.css" type="text/css" />   
  <script type="text/javascript" charset="utf-8" src="static/js/jquery-1.7.1.min.js"></script>        
  <script type="text/javascript" charset="utf-8" src="static/js/jquery.mobile-1.1.0.min.js"></script>
  <script type="text/javascript">

    $(document).ready(function(){
        $.mobile.changePage('page2.html',{
            'pageContainer': $('#content_container'),
            'role':'content'
        });
    });

  </script>
  </head>
  <body >
      <div data-role="page">
          <div data-theme="a" data-role="header">
              <div data-role="navbar" data-iconpos="top">
                  My Header
              </div>
          </div>
          <div id='content_container' data-role="content">
              <p>Page 1 </p>
          </div>
          <div data-theme="a" data-role="footer">
              My Footer
          </div>
      </div>                 
  </body>
</html> 
```

这是第2页

```
<html>
    <body>
        <div data-role="page">
            <p>Page 2</p>
        </div>
    </body>
</html> 
```

当它加载时，我没有将“第 1 页”替换为“第 2 页”，而是被重定向到一个新的空页面。任何指向我做错了什么的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:08:23.703

您的 id 中有语法错误：

```
<div id='#content_container' data-role="content"> 
```

将其更改为（删除哈希）：

```
<div id='content_container' data-role="content"> 
```

并且根据相关问题[Open links in div container in JQuery Mobile](https://stackoverflow.com/questions/6579673/open-links-in-div-container-in-jquery-mobile)，changePage() 似乎不适用于将服务器内容加载到页面内的特定容器中。它想改变整个页面。

这有效：

```
$(document).ready(function(){
    $("#content_container").load("page2.html");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T04:35:49.377

这是一种通过 API 完成此操作的方法，不幸的是，直接使用 jquery 的加载并不能保持该方法的元素格式。

```
$(document).bind('pageload',function(evt,data){ 
     $(document).unbind('pageload');  
     $(data.page).fadeIn(); 
});
$.mobile.loadPage('page2.html',{'pageContainer':$('#content_container')}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:18:12.620

您需要向`data-role="content"`第二页添加一个元素。并且该方法的`pageContainer`选项`changePage()`旨在更改所有页面的容器，而不是特定页面的容器（我从未使用过此选项，但我相信这是想法）。

如果你这样做，`console.log($.mobile.pageContainer)`你会看到它是`body`元素：http: [//jsfiddle.net/8T35d/](http://jsfiddle.net/8T35d/)。

`changePage()`此选项的目的是允许您创建一个在您调用该方法时不会更改的持久 UI 。

如果您正在寻找持久的页眉/页脚，请查看文档中的此页面：http: [//jquerymobile.com/demos/1.1.0/docs/toolbars/footer-persist-d.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/footer-persist-d.html)

# logging - 为 RDBMS 格式化日志文件的最佳方法？

> ID：10502030
> 
> 赞同：0
> 
> 时间：2012-05-08T15:51:01.670
> 
> 标签：logging

如果我有一个将日志文件写入文件系统的应用程序，然后我希望能够将这些日志转储到 RDBMS 以便能够更轻松地查询特定项目（例如，我想查询与事务 ID X 相关的所有日志，而不仅仅是查询日志级别为 INFO 或自某个日期以来的所有内容）。

什么是格式化日志消息以便能够轻松地将其放入 RDBMS 以允许将来更改我实际记录的内容（添加更多内容）的可靠方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:07:04.800

将日志条目的属性编码为名称-值对。您需要选择值部分的分隔符；也就是说，它必须是不会出现在值本身中的东西。

日志条目的一些属性，如果您还没有考虑到问题的那部分：

*   时间戳
*   严重性（致命、错误、信息、调试），可能是字符串
*   在源代码中创建条目的位置，作为文件名和行号和/或类名和方法名
*   交易
*   自由文本：代码需要在条目中记录的任何内容

还要考虑：

*   堆栈跟踪：有点混乱，因为它往往是未指定的迭代
*   运行时提供的异常信息（C#？Java？）
*   用户身份
*   线程信息

正是该自由文本属性将与您的分隔符选择竞争。

一个玩具示例日志条目，使用双括号作为分隔符：

```
timemstamp=[[24-Apr-2012 15:48:28.749]] severity=[[error]] location=[[Foo.java (45)]] transaction=[[48241]] free=[[Cannot open file 'zqx3.txt']] 
```

您的问题未使用实现语言标记。在 Java 领域，[log4j](http://logging.apache.org/log4j/1.2/)是一个流行的日志框架。我相信.NET 有合适的端口或类似工作。

另请参阅[简单的日志文件格式](https://stackoverflow.com/questions/2810348/a-simple-log-file-format)。

# c# - Windows 窗体上的非方形图标？

> ID：10502036
> 
> 赞同：10
> 
> 时间：2012-05-08T15:51:44.293
> 
> 标签：c#, .net, winforms, icons

是否可以在 Windows 窗体的左上角显示与标准 16X16 像素图标形状不同的图标？

看来 Skype 的图标比标准的要宽得多：

![在此处输入图像描述](../Images/f4900ebb382afd85a6abaa795e451968.png)

是否可以在 Windows 窗体应用程序中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:30:38.920

你可以这样做，但它可能比拥有一个更大的图标更值得。

汉斯发表了一篇文章，大致指出了找出这个问题的答案所需的信息，但没有发布答案本身，所以我会澄清一下。

执行此操作的旧（Vista 之前）方法是覆盖[`WndProc`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)表单上的方法并处理[`WM_NCPAINT`](http://msdn.microsoft.com/en-us/library/dd145212%28v=vs.85%29.aspx)消息。请注意，这意味着您现在负责绘制*整个*窗口框架（窗口边框、标题、关闭/恢复图标等......），而不仅仅是图标 - 即这是一个相对较小的事情要做很多努力.

较新的（Vista 后）方法是[使用 DWM API](http://msdn.microsoft.com/en-us/library/windows/desktop/bb688195%28v=vs.85%29.aspx) - 请注意，此 API 不直接通过 .Net Framework 公开，因此您需要在 C# 中为此使用 P/Invoke。您要做的一点是标题为“在扩展框架窗口中绘图”的部分，您可以在其中将负责绘制的区域扩展到正常客户区域之外并进入窗口框架。这比以前少了麻烦（你不必画关闭按钮之类的东西），但仍然意味着你要对很多你通常不会做的事情负责，比如调整大小的命中盒测试和移动。

基本上它远没有提供更大的图标那么简单，对于大多数应用程序来说，它可能比它的价值要多得多，但是你可以在 C# 中做到这一点，如果你真的想尝试一下，那篇文章应该可以帮助你入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:32:51.170

我知道您正在寻找一种简单的代码方式来执行此操作，但我邀请您查看 DevExpress 管理（是的，它是第三方，请原谅我），只需谷歌它.. 我看到了这个线程，我开始在 devexpress 上提出问题并获得支持和得到了一些您可能感兴趣的令人印象深刻的结果。

这是我放入的票... [http://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid=Q399941](http://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid=Q399941)

这是结果... [http://www.devexpress.com/Support/Center/GetSCAttachment.ashx?id=684270b5-faed-415e-9010-64338523f8cf](http://www.devexpress.com/Support/Center/GetSCAttachment.ashx?id=684270b5-faed-415e-9010-64338523f8cf)

到目前为止，我在 Xp、Vista 和 Windows 7 上使用它，仅使用 winforms 没有问题。

如果 Windows API 在不同版本的 Windows 上没有像您想要的那样显示出来，我希望这对您有所帮助或为您提供另一种选择。

谢谢，大卫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:58:23.897

不要认为它是一个图标，如果你指的是`ICO`图像格式。考虑到 Skype 窗口绝对是 ownerdraw 窗口，该图像可能是您想要的任何格式。

诀窍基本上是渲染图像，跳过“图标”的某种颜色（背景颜色）的像素，因此以“透明度”渲染它。

这篇文章可以给你一个提示：

[使用 Alpha 混合绘制透明图像和形状](http://www.c-sharpcorner.com/UploadFile/mahesh/DrawTransparentImageUsingAB10102005010514AM/DrawTransparentImageUsingAB.aspx)

它很旧，但总是很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:00:17.457

是的。覆盖 WndProc 并实现 WM_NCPAINT。

# oracle - 使用 OracleMembershipProvider 调用 MembershipUser.ResetPassword() 时引发异常

> ID：10502037
> 
> 赞同：1
> 
> 时间：2012-05-08T15:51:44.540
> 
> 标签：oracle, asp.net-membership

在某些情况下， MembershipUser.ResetPassword() 会引发异常。这只发生在某些用户身上，目前尚不清楚为什么。该方法没有输入，因此这似乎是 Oracle 成员提供程序实现的内部问题。

异常文本：**提供程序返回了其他 MembershipCreateStatus 枚举值未描述的错误。**

追溯：

```
at Oracle.Web.Security.OracleMembershipProvider.ResetPassword(String username, String passwordAnswer)
at System.Web.Security.MembershipUser.ResetPassword(String passwordAnswer)
at System.Web.Security.MembershipUser.ResetPassword()
... 
```

知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:44:13.877

今天我遇到了同样的问题。答案很简单。用户帐户已锁定。在密码重置之前执行 MembershipUser.UnlockUser()。

# .net - 所有相互引用的项目都需要在同一个目标框架中吗？

> ID：10502043
> 
> 赞同：1
> 
> 时间：2012-05-08T15:52:15.420
> 
> 标签：.net, winforms, .net-client-profile, .net-framework-version, project-reference

我有一个`windows-form`包含三个子项目的应用程序。

```
Project A - Classes
Project B - Classes
Project C – view (win forms) 
```

当我尝试将***项目 B***的引用添加到***项目 C***时，它会很好地添加引用。但是，当我构建项目时，会出现错误消息，指出我缺少对***Project B***的引用。

但后来我发现***项目 C***被设置为目标框架 -`.net framework 4 client profile`而***项目 B*** `.net framework 4.`当我在项目 c 中将目标框架更改为 .net 框架 4 时，一切都开始正常工作了。这背后的原因是什么？

如果所有项目相互引用，是否有必要在同一个目标框架中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:13:23.053

根据[MSDN](http://msdn.microsoft.com/en-us/library/ez524kew.aspx)：

“如果您创建一个面向早期版本 .NET Framework 的项目，则不能在该项目中设置对面向 .NET Framework 4 客户端配置文件或 .NET Framework 版本 4 的项目或程序集的引用。”

# iphone - iPhone上的图片链接不可点击

> ID：10502045
> 
> 赞同：12
> 
> 时间：2012-05-08T15:52:25.573
> 
> 标签：iphone, html, image, xslt, hyperlink

我有一个在 Outlook 中使用的签名。签名在底部有一个图像和一个包含该图像的链接。在计算机上，您可以单击图像并转到链接，而在 iPhone 上，它会要求您保存图像、复制或取消。有时我注意到它可以工作，但无法确定它何时链接以及何时要求复制图像。

该代码是图像/链接的相关代码

```
 <table>
    <tr>
        <td>
            <span style="font-size: 10pt; font-family: Calibri">
                <br/>
                <!-- begin ad tag -->
                <a href="LINK" target="_blank">
                <img src="IMAGE" border="0" alt="" /></a>
                <!-- end ad tag -->
            </span>
        </td>
    </tr>
    </table> 
```

编辑 1：只是测试一些，如果我进入 iPhone 上的网络浏览器，然后返回邮件并单击图像，它会转到链接而不提示保存图像。

编辑2：编辑1只适用于iphone 4 5.1版（不适用于4S没有测试过其他的）。也适用于 ipad 3 5.1 版

编辑 3： 也不适用于 3g iphone 5.1 版我将把它标记为 iphone 问题并说 jme1988 是正确的，除非有人想出别的东西。

感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T16:40:45.300

您必须使用地图标签才能使其工作。这是一个使用 facebook 图片链接到 facebook 的示例：

```
<img src="http://cdn2.iconfinder.com/data/icons/web2/Icons/FaceBook_128x128.png" alt="Facbook" usemap="#facebook" />

 <map name="facebook">
   <area shape="rect" coords="0,0,128,128" href="http://www.facebook.com" alt="Facebook" />
 </map> 
```

如果您对此不熟悉，请尝试将代码粘贴到 .html 文档中并检查一下（应该可以）。通常，您将“映射”放在 `</body>`.

在`coords`争论中，您应该使用 x1,y1,x2,y2 绘图。这意味着您希望将矩形图像从图像大小的左上角映射到右下角。这似乎适用于 3G 版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T00:55:11.130

我实际上找到了一个适用于 iOS 6.1.2 以及桌面 Apple Mail (6.0) 的解决方案：

**结合上述方法**：

```
<a href="http://foo">
  <img src="http://bar" usemap="linkmap" alt="Click me" title="Click me"/>
  <map name="linkmap">
    <area shape="rect" coords="0,0,80,80" href="http://foo" alt="Click me" />
  </map>
</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-05T09:33:53.947

尝试将以下 css 应用到您的图像标签并确保将其添加为内联样式。

```
-webkit-touch-callout: none;
-webkit-user-select: none; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:15:04.843

对我来说，这听起来像是 Iphone 的问题（我不会感到惊讶）。弹出的菜单可能是因为电子邮件客户端在尚未启动时无法启动浏览器窗口（因此有时它可以工作而其他人不工作）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:25:16.503

我不确定我的建议是否是最佳实践，但图像映射解决方案对我不起作用（iPhone 4s 上的 iOS 6.1）。

相反，我刚刚在我想要的可点击图像上放置了一个透明的“a href”：

```
<a href="http://LINK" id="clickable" style="width:441px; height:244px; position:absolute; top:303px; left:46px; background-color:rgba(0,0,0,0); z-index:99"> 
```

  此外，我还不得不在图像本身周围留下原始的“a href”，因为透明链接在 PC 上的 Outlook 上不起作用。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-29T15:14:31.577

确保您链接到图像而不是使用附件。请参阅[为什么包含图像的锚点标签在 Iphone 的邮件应用程序中不起作用？](https://stackoverflow.com/questions/12305113/why-anchors-tag-containing-an-image-dont-work-in-iphones-mail-app).

# php - PHP脚本未从表单中获取“电话号码”值

> ID：10502047
> 
> 赞同：0
> 
> 时间：2012-05-08T15:52:35.917
> 
> 标签：php

我的联系表没有通过电子邮件发送电话号码。我在表单和脚本中都有该字段。

```
<form id="contact" action="">
    <fieldset>
        <label for="name" id="name_label">Name <br /></label>
        <input type="text" name="name" id="name"  value="" class="text-input" />
        <label for="email" id="email_label">E-mail<br /></label>
        <input type="text" name="email" id="email"  value="" class="text-input" />
        <label for="phone" id="phone_label">Phone number<br /></label>
        <input type="text" name="phone" id="phone"  value="" class="text-input" />
        <label for="msg" id="msg_label">Preferred contact time</label>
        <textarea cols="60" rows="10" name="msg" id="msg" ></textarea> <br class="clear" />
        <input type="submit" name="submit" class="button" id="submit_btn" value="Send Message &rarr;"/>
    </fieldset>
    </form> 
```

和以下 PHP 脚本：

```
<?php 
    $emailTo = 'test@test.co.uk';
    $subject = 'Advanced Contact Form';
    $name=$_REQUEST['name'];
    $email=$_REQUEST['email'];
    $phone=$_REQUEST['phone'];
    $msg=$_REQUEST['msg'];

    $body = "Name: $name \n\nEmail: $email \n\nphone: $phone \n\nMessage: $msg";
    $headers = 'From: '.$name.' <'.$email.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);
    echo 'Mail sent';
?> 
```

电子邮件发送正常，但电话号码未显示在电子邮件中。任何想法可能是什么问题？

**编辑：我的网址如下所示：**

```
www.website.com/contact.html?name=test&email=test%40test.com&phone=0112+2255555&msg=2312312312312&submit=Send+Message+%26%238594%3B 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:28:43.643

这是一个基本示例，说明您应该如何处理电子邮件表单，首先处理值并在错误数组（如果有）的基础上构建。

然后发送，**永远不要相信用户输入，尤其是联系表格。**

```
<?php 
if($_SERVER['REQUEST_METHOD']=='POST'){

$emailTo = 'test@test.co.uk';
$subject = 'Advanced Contact Form';

$name=(isset($_POST['name'])?$_POST['name']:null);
$email=(isset($_POST['email'])?$_POST['email']:null);
$phone=(isset($_POST['phone'])?$_POST['phone']:null);
$msg=(isset($_POST['msg'])?$_POST['msg']:null);

$error=array();
$cont=true;
//name
if(isset($name)){
    if(strlen($name)<=1){
        $cont=false;
        $error['error_name']='Enter your real name!';
    }else{
        $name=preg_replace('/[^a-zA-Z0-9\(\)\:\?.\&,_ -]/s', '', $name);
    }
}else{
    $error['error_name']='Enter your name!';
    $cont=false;
}

//email
if(isset($email)){
    if(filter_var($email, FILTER_VALIDATE_EMAIL)){

    }else{
        $cont=false;
        $error['error_email']='Email Invalid';
    }
}else{
    $cont=false;
    $error['error_email']='Please enter your email!';
}

//phone
if(isset($phone)){
    if(strlen($phone)<=1){
        $cont=false;
        $error['error_phone']='Enter your real number!';
    }else{
        $phone=preg_replace('/[^0-9]/s', '', $phone);
    }
}else{
    $error['error_phone']='Enter your number!';
    $cont=false;
}

//message
if(isset($msg)){
    if(strlen($msg)<=1){
        $cont=false;
        $error['error_message']='Enter your real message!';
    }else{
        $msg=preg_replace('/[^a-zA-Z0-9\(\)\:\?.\&,_ -]/s', '', $msg);
    }
}else{
    $error['error_message']='Enter your message!';
    $cont=false;
}

if(empty($error) && $cont ==true){
    //send mail
    $body = "Name: $name \n\n
         Email: $email \n\n
         phone: $phone \n\n
         Message: $msg";

    // Additional headers
    $headers ='MIME-Version: 1.0'."\r\n";
    $headers.='Content-type: text/html; charset=iso-8859-1'."\r\n";
    $headers.='Reply-To: '.$email."\r\n";
    $headers.='From: '.$name.' <'.$email.'>'."\r\n";
    $headers.="X-Mailer: Remote Mail\r\n";
    // Mail it
    $status = (mail($emailTo, $subject, $body, $headers))?'Mail Was Sent':'Error Sending email';
}else{

  //error with form values
  $status='';
  foreach($error as $type=>$reason){
    $status .= $reason.'<br />';
  }
}

//Echo your form or status page
echo $status;
}else{
    //Echo your form
}

?> 
```

# c# - Monodroid 模拟器 LocationManager.getLastKnownLocation() 返回 null

> ID：10502055
> 
> 赞同：0
> 
> 时间：2012-05-08T15:53:21.660
> 
> 标签：c#, xamarin.android

我需要对 Android 使用地理定位（使用 Monodroid）。我还有两个问题。

*   第一个：我是否应该明确警告用户（基于 GPS 坐标（如在 windows phone 中）
*   第二个（更复杂）：我遵循了这个 [本地化示例](https://github.com/gshackles/Sample-Projects/blob/master/MonoDroid/MonoDroidSamples/MonoDroidSamples/DemoActivities/LocationDemo/LocationActivity.cs)，但仍然没有 lastKnownLocation。是因为模拟器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:15:48.343

我不确定你在问题的第一部分要问什么。你应该警告用户什么，你使用他们的位置吗？我想说这取决于您使用它的频率，但至少他们会看到您在安装应用程序时请求位置权限。

对于第二个问题，请看几天前的this [question/answer 。](https://stackoverflow.com/a/10471314/170333)简而言之，`GetLastKnownLocation()`如果提供者从未收到任何位置更新，则可以返回 null。

**编辑：**

要在评论中回答您的问题，有几种方法可以在模拟器中模拟位置数据。[Android 文档中的此页面](http://developer.android.com/guide/topics/location/obtaining-user-location.html#MockData)介绍了如何执行此操作。

# sql - 我无法从表中进行简单的 select top 1 *，而一张表什么也没有，可能会出现哪些问题？

> ID：10502059
> 
> 赞同：0
> 
> 时间：2012-05-08T15:53:30.600
> 
> 标签：sql, sql-server, sql-server-2005, transactions

我收到了这个错误

> 超时值已过期。操作完成前超时时间已过或服务器无响应

我有一个进程，它在晚上进行插入和更新，另一个在晚上也进行查询的进程，（etl 或 dts）在 sql server 2005 所以，现在我们需要对这个表进行查询，这不起作用，我想再次运行我的过程，这永远不会完成，没有人可以查询这个表，（另一个表可以做）用户评论我，昨天他们可以做，但今天，他们不能它是可能的，我的过程是在晚上执行从未完成，它让一个开始交易打开？我怎么能确定这一点？并从 ssms 关闭它？

这不是我们昨天可以进行查询和插入/更新的权限问题。

它只发生在一张桌子上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:56:58.980

尝试这个：

```
SELECT TOP 1 * FROM Table (nolock) 
```

这会返回结果吗？如果是这样，听起来像一个锁定问题..

# lua - lua读汉字

> ID：10502061
> 
> 赞同：1
> 
> 时间：2012-05-08T15:53:42.673
> 
> 标签：lua

我有以下要阅读的 xml：

1.  中文 xml - [https://news.google.com/news/popular?ned=cn&topic=po&output=rss](https://news.google.com/news/popular?ned=cn&topic=po&output=rss)
2.  韩语 xml - [http://www.voanews.com/templates/Articles.rss?sectionPath=/korean/news](http://www.voanews.com/templates/Articles.rss?sectionPath=/korean/news)

目前，我尝试使用 luaxml 来解析包含中文字符的 xml。但是，当我使用控制台打印出来时，结果是无法正确打印汉字并显示为乱码。

我想问一下是否有将中文或韩文字符解析为lua表的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T04:11:52.140

我不认为 Lua 是这里的问题。远程站点发送的原始数据是使用 UTF-8 编码的，Lua 对此没有特殊的解释——这意味着如果您只是 (1) 从远程站点读取数据，并且 (2) 保存读取的数据，它应该被完美地保存到一个文件。文件中的数据将包含以 UTF-8 编码的 CJK 字符，就像发送回的远程站点一样。

如果你得到了你提到的有趣的结果，那么问题可能在于你用来从远程站点读取的库，或者可能只是你的控制台在输出到它时显示结果的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:06:10.620

我设法将“ä¸ç¾Ž”转换为汉字。我需要做一个额外的步骤，必须使用此链接中的此方法转换所有字符串系列， http: [//forum.luahub.com/index.php?topic=3617.msg8595#msg8595](http://forum.luahub.com/index.php?topic=3617.msg8595#msg8595)然后保存到xml 格式。

```
string.gsub(l,"&#([0-9]+);", function(c) return string.char(tonumber(c)) end) 
```

我想问LuaXML，我遇到过xml.registerCode(decoded,encoded)这个方法

在这种方法下，它说

```
registers a custom code for the conversion between non-standard characters and XML character entities 
```

非标准字符是什么意思，我该如何使用它？

# php - 使用drupal javascript调用提交表单后打开新窗口/选项卡

> ID：10502062
> 
> 赞同：0
> 
> 时间：2012-05-08T15:53:45.180
> 
> 标签：php, javascript, function, drupal-7

是的，这个问题有时会被问到。但我找不到我的问题的答案。我在这里发布了我的问题，因为我猜它与 php / javascript 相关，然后是 drupal。

所以基本上我有一个经过验证的表单，在提交部分我在 php 中有一个（drupal hook）函数，我可以在其中添加/修改代码。此函数捕获表单字段并将它们存储在数据库中。这意味着这些字段已正确填写，因此我想在此处实现一些东西，为用户打开一个新选项卡或窗口，而不关闭当前选项卡或窗口。

所以我知道你不能从 php 调用 javascript 来使用类似的东西，`window.open()`但无论如何我可以让它这样`window.open()`被调用吗？

如果您有任何不同的方法，我也持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:00:13.090

您可以使用锚元素来提交表单并打开一个新窗口：

```
<script>

   function submitMyForm()
   {
      // Validate form fields here
      // ...

      // If form is valid, submit it
      myForm.submit(); 
   }

</script>

<a href="javascript:submitMyForm();" target="_blank">Submit Form</a> 
```

# sql-server-2008 - 将几何图形从一个 SRID 转换/投影到另一个

> ID：10502063
> 
> 赞同：7
> 
> 时间：2012-05-08T15:53:57.883
> 
> 标签：sql-server-2008, spatial

我有一个数据库表，该表当前包含 SRID 27700（英国国家网格）中的几何数据。但是，在检索数据时，我需要将其转换为 SRID 4326 (WGS84)。有什么方法可以将 PostGIS 中的 ST_Transform 等函数应用于我的数据以获得我需要的结果？

注意：该解决方案需要能够使用 T-SQL 而不是存储过程等来实现。我必须能够构造一个语句并将其作为字符串字段保存在表中以供以后检索。这是因为我的解决方案与数据库无关。

我目前在 Oracle 中执行此操作的方式如下：

```
select CLUSTER_ID, 
       NUM_POINTS, 
       FEATURE_PK, 
       A.CELL_CENTROID.SDO_POINT.X, 
       A.CELL_CENTROID.SDO_POINT.Y, 
       A.CLUSTER_CENTROID.SDO_POINT.X, 
       A.CLUSTER_CENTROID.SDO_POINT.Y, 
       TO_CHAR (A.CLUSTER_EXTENT.GET_WKT ()),  
       TO_CHAR (A.CELL_GEOM.GET_WKT ()), 
       A.CLUSTER_EXTENT.SDO_SRID 
from (SELECT CLUSTER_ID, 
             NUM_POINTS, 
             FEATURE_PK, 
             SDO_CS.transform (CLUSTER_CENTROID, 4326) cluster_centroid,
             CLUSTER_EXTENT, 
             SDO_CS.transform (CELL_CENTROID, 4326) cell_centroid, 
             CELL_GEOM FROM :0) a  
where sdo_filter( A.CELL_GEOM, 
                  SDO_CS.transform(mdsys.sdo_geometry(2003, :1, NULL, mdsys.sdo_elem_info_array(1,1003,3),mdsys.sdo_ordinate_array(:2, :3, :4, :5)),81989)) = 'TRUE' 
```

在使用 PostGIS 的 PostgreSQL 中，我这样做是这样的：

```
select CLUSTER_ID, 
       NUM_POINTS, 
       FEATURE_PK, ST_X(a.CELL_CENTROID), 
       ST_Y(a.CELL_CENTROID), 
       ST_X(ST_TRANSFORM(a.CLUSTER_CENTROID, 4326)),  
       ST_Y(ST_TRANSFORM(a.CLUSTER_CENTROID, 4326)), 
       ST_AsText(a.CLUSTER_EXTENT),  
       ST_AsText(a.CELL_GEOM), 
       ST_SRID(a.CLUSTER_EXTENT)  
FROM (SELECT CLUSTER_ID, 
      NUM_POINTS, 
      FEATURE_PK, 
      ST_TRANSFORM(ST_SetSRID(CLUSTER_CENTROID, 27700), 4326) cluster_centroid, 
      CLUSTER_EXTENT, 
      ST_TRANSFORM(ST_SetSRID(CELL_CENTROID, 27700), 4326) cell_centroid, 
      CELL_GEOM 
from :0) AS a 
where ST_Intersects(ST_Transform(ST_SetSRID(a.CELL_GEOM, 27700), :1), ST_Transform(ST_GeomFromText('POLYGON(('||:2||' '||:3||', '||:4||' '||:3||', '||:4||' '||:5||', '||:2||' '||:5||', '||:2||' '||:3||'))', 4326), :1)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T13:20:51.197

您可以在 SQL CLR 函数中包装 DotNetCoords 之类的内容来执行此操作。

见这里：- [http://www.doogal.co.uk/dotnetcoords.php](http://www.doogal.co.uk/dotnetcoords.php)

我已经将它包装在 CLR 函数中，以将坐标从东/北转换为纬度/经度，我认为这就是您所要求的。一旦实现了 CLR 功能，它就是一个纯 SQL 解决方案（即您可以在存储过程或视图中运行它）。

**编辑**：我明天上班时会在这里发布一些示例代码，希望它会有所帮助。

**编辑**：您需要从[http://www.doogal.co.uk/dotnetcoords.php](http://www.doogal.co.uk/dotnetcoords.php)下载源代码，并且需要 Visual Studio 来打开和修改它。图书馆的文档在这里[http://www.doogal.co.uk/Help/Index.html](http://www.doogal.co.uk/Help/Index.html)

然后你可以做的是你可以向源文件添加一个新类，类似于：-

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data.SqlTypes;
using DotNetCoords;
using Microsoft.SqlServer.Server;

/// <summary>
/// Sql Server CLR functions for the DotNetCoords library.
/// </summary>
public class CLRFunctions
{

    /// <summary>
    /// Coordinateses the enumerable.
    /// </summary>
    /// <param name="Easting">The easting.</param>
    /// <param name="Northing">The northing.</param>
    /// <returns></returns>
    private static IEnumerable<OSRef> CoordinatesEnumerable(double Easting, double Northing)
    {
        return new List<OSRef> { new OSRef(Easting,Northing) };
    }

    /// <summary>
    /// Toes the lat long.
    /// </summary>
    /// <param name="Easting">The easting.</param>
    /// <param name="Northing">The northing.</param>
    /// <returns></returns>
    [SqlFunction(FillRowMethodName = "FillRow")]
    public static IEnumerable ToLatLong(double Easting, double Northing)
    {
        return CoordinatesEnumerable(Easting, Northing);
    }

    /// <summary>
    /// Fills the row.
    /// </summary>
    /// <param name="obj">The obj.</param>
    /// <param name="Lat">The lat.</param>
    /// <param name="Long">The long.</param>
    private static void FillRow(Object obj, out SqlDouble Lat, out SqlDouble Long)
    {
        OSRef Coordinates = (OSRef)obj;
        LatLng latlong = Coordinates.ToLatLng();
        latlong.ToWGS84();
        Lat = new SqlDouble(latlong.Latitude);
        Long = new SqlDouble(latlong.Longitude);
    }

} 
```

然后，您将需要构建程序集并将其导入 SQL Server（将路径替换为您自己的位置）（由于某种原因，当 PERMISSION_SET 为“安全”时，我无法安装程序集，因此我会先对其进行排序，然后再安装到生产环境中）。

```
CREATE ASSEMBLY DotNetCoords
FROM N'C:\Projects\DotNetCoords\bin\Debug\DotNetCoords.dll'
WITH PERMISSION_SET = UNSAFE
GO 
```

然后，您需要创建一个 SQL Server 函数来连接 CLR 函数：-

```
CREATE FUNCTION dbo.ToLatLong(@Easting float, @Northing float)
RETURNS TABLE
(Latitude float null, Longitude float null) with execute as caller
AS
EXTERNAL NAME [DotNetCoords].[CLRFunctions].[ToLatLong] 
```

这是当时安装的CLR功能。

然后，您应该能够直接从 SQL Server 调用该函数来进行转换（我在这篇文章中混淆了数字，也保持匿名，因此它们在这里可能没有意义，但该函数确实可以正常工作）。

```
/*------------------------
SELECT Latitude, Longitude FROM dbo.ToLatLong(327262, 357394)
------------------------*/
Latitude            Longitude
52.13413530182533       -9.34267170569508

(1 row(s) affected) 
```

要在结果集中使用它，您需要使用 CROSS APPLY 子句：-

```
/*------------------------
SELECT TOP 2    a.[Column 0] AS osaddessp,
                            a.[Column 9] AS east,
                            a.[Column 10] AS north,
                            c.[Latitude] AS lat,
                            c.[Longitude] AS long
FROM    MyTable AS a CROSS APPLY ToLatLong (a.[Column 9], a.[Column 10]) AS c;
------------------------*/
osaddessp       east    north   lat         long
100134385607    327862  334794  52.3434530182533    -2.19342342569508
100123433149    780268  353406  52.3453417606796    -3.19252323679263

(10 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:30:50.447

不幸的是，这根本不可能。SQL Server Spatial Tools 提供了一些重投影功能，但它们仅用于极少数的投影（而不是您需要的投影）。

有一个[来自 SQL 服务器工具的示例——https](https://bitbucket.org/geographika/sql-server-spatial-tools/src/5ca44b55d3f3/SQL%20Scripts/projection_example.sql) : [//bitbucket.org/geographika/sql-server-spatial-tools/src/5ca44b55d3f3/SQL%20Scripts/projection_example.sql——](https://bitbucket.org/geographika/sql-server-spatial-tools/src/5ca44b55d3f3/SQL%20Scripts/projection_example.sql)但它对你没有帮助，因为它们不支持你所说的投影。

因此，您需要采用不同的解决方案 - 预处理数据以添加具有投影值的新列，或者在代码中重新投影。

# flash - 是否有将 HTML5 + JS + CSS 转换为 SWF 的工具？

> ID：10502064
> 
> 赞同：8
> 
> 时间：2012-05-08T15:53:59.200
> 
> 标签：flash, html, cross-browser

有很多人想反过来做，我想知道我是不是对某事很愚蠢。

基本上，我想使用开放标准构建我的 Web 应用程序，并通过 Flash Player 的 SWF 文件支持旧浏览器。那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T00:06:56.747

好的，我要试试这个。在我看来，这听起来像是对当前技术环境的某种挫败感所产生的问题。感觉就像您在寻求银弹，而实际上不存在这样的银弹。

我认为直到最近 Flash 可能还是那个灵丹妙药，但随着不支持 Flash 的移动设备（[最初是 iOS](http://www.apple.com/hotnews/thoughts-on-flash/)和[最近的 Windows Phone 8](http://www.winrumors.com/no-flash-for-windows-phone-as-adobe-kills-off-mobile-development/)）的激增，[Adobe 决定停止开发用于移动设备的 Flash 插件](http://www.wired.com/gadgetlab/2011/11/adobe-kills-mobile-flash/)，并且事实上，[HTML5 的能力较弱](http://en.wikipedia.org/wiki/Comparison_of_HTML5_and_Flash)，而且距离实现 Flash 所享有的近乎普遍的支持还有很长的路要走，根本就没有一种万能的解决方案了。

您说您想使用开放标准构建您的 Web 应用程序，但您没有解释原因。可能有很多原因，包括特定项目的业务需求、您可用的技能组合、支持移动设备的需要和/或相信开放标准只是比专有技术更好的选择。

此外，您没有提供任何关于您的 Web 应用程序性质的细节，如果您接受不再存在一刀切的解决方案，那么您就很难满怀信心地提供替代方法。

也就是说，如果我们假设您的 Web 应用程序是复杂且大量数据和 UI 驱动的，那么在我看来，您可以使用两种方法。

1.  使用开放标准构建应用程序并接受开发需要更长的时间，并且您将无法保证跨各种浏览器的用户体验的一致性。
2.  在 Flash 中构建应用程序，这将使您能够以更快的速度完成您今天想做的所有事情（因为该平台的卓越工具和组件集），并保证了跨各种浏览器的用户体验的一致性。如果需要移动支持，您可以[将应用程序打包](http://www.adobe.com/products/air.html)到 iOS（本机）和 Android（通过 AIR 运行时），理论上只需对核心代码库进行少量更改。

但是，要真正回答您的问题，我能找到的最接近将 HTML、JS 和 CSS 转换为 SWF 的工具是[OpenLaszlo](http://www.openlaszlo.org/)，它是一种声明性语言和组件集，可以将相同的代码发布到 SWF 或 DHTML（多么有趣听起来过时了！）。但是，它似乎具有已死项目的所有特征。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:53:23.740

**在使用HTML5 视频和 CSS3 动画**设计您的网页以使其回退到**SWF 和 CSS2**时，我会采取的解决方案是使用那些内置了此类回退的现成脚本。

例如，[JW Player](http://www.longtailvideo.com/players/jw-player/features/)有许多嵌入视频的嵌入选项。您可以对其进行配置，以便通过 HTML5 视频嵌入视频，然后在需要时优雅地回退到 Flash 支持。该 API**自动处理必要的更改**，并为通过支持的功能检测到的浏览器使用正确的 CSS，而不是用户代理。

**jQuery CSS3 动画插件**也是如此，当浏览器支持这些功能时将提供**HTML5 FX**，然后在不支持时提供 CSS2。例如，[jQuery Quicksand 插件](http://razorjack.net/quicksand/)可以制作成现代的**HTML5 菜单导航器**，带有 HTML5 的花里胡哨，但自动回退到支持 IE8 和旧版浏览器。Wizzud 的另一个 Navigator 是[HERE](http://www.wizzud.com/jqdock/examples/)，它看起来像**HTML5 动画**，但事实并非如此。

检查需要添加到网页的任何模块时要搜索的**关键字是****后备支持**，这样您就可以专注于设计，而不是为不受支持的浏览器重建脚本。

# java - 不使用 CookieManager 的 Android 会话 cookie

> ID：10502066
> 
> 赞同：2
> 
> 时间：2012-05-08T15:54:09.450
> 
> 标签：java, android

我的应用程序进行多次网络调用以获得身份验证。我需要将此会话存储在 cookie 中。我想使用 Cookie Manager，但经过一些研究，我发现它仅适用于 API 9 及更高版本，并且我的应用程序需要向后兼容。

我使用 HTTPURLConnection 连接到安全的 HTTPS。我的代码的快速示例

```
 public String iStream_to_String(InputStream is)
{
    BufferedReader rd = new BufferedReader(new InputStreamReader(is), 4096);
    String line;
    StringBuilder sb = new StringBuilder();
    try
    {
        while ((line = rd.readLine()) != null)
        {
            sb.append(line);
        }
        rd.close();

    } catch (IOException e)
    {
        e.printStackTrace();
    }
    String contentOfMyInputStream = sb.toString();
    return contentOfMyInputStream;
}

final static HostnameVerifier DO_NOT_VERIFY = new HostnameVerifier()
{
    public boolean verify(String hostname, SSLSession session)
    {
        return true;
    }
};

/**
 * Trust every server - dont check for any certificate
 */
private static void trustAllHosts()
{
    // Create a trust manager that does not validate certificate chains
    TrustManager[] trustAllCerts = new TrustManager[]
    { new X509TrustManager()
    {
        public java.security.cert.X509Certificate[] getAcceptedIssuers()
        {
            return new java.security.cert.X509Certificate[]
            {};
        }

        public void checkClientTrusted(X509Certificate[] chain,
                String authType) throws CertificateException
        {
        }

        public void checkServerTrusted(X509Certificate[] chain,
                String authType) throws CertificateException
        {
        }
    } };

    // Install the all-trusting trust manager
    try
    {
        SSLContext sc = SSLContext.getInstance("TLS");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection
                .setDefaultSSLSocketFactory(sc.getSocketFactory());
    } catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

然后我提出这样的要求

```
 try
    {
        url = new URL(url1);

        trustAllHosts();
           HttpsURLConnection https = (HttpsURLConnection) url.openConnection();
       https.setHostnameVerifier(DO_NOT_VERIFY);
        http = https;

        InputStream in = new BufferedInputStream(http.getInputStream());

        sAuthenticateP1 = iStream_to_String(in);
        in.close();

    } catch (Exception e)
    {
        e.printStackTrace();
    } 
```

完整的身份验证分 4 个步骤完成。我需要它，以便在整个 4 个步骤中记住会话。看到我不能使用 CookieManager，我一直在寻找其他方法，但似乎找不到任何方法。谁能指出我正确的方向。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:29:31.497

弄清楚了。万一其他人有类似的问题，将给出代码的快速概述。正如我之前所说，我的身份验证过程有几个步骤。所以在第一个请求之后，在你收到响应之后，像这样获取 cookie

```
String cookie = http.getRequestProperty("Cookie");
            if (cookie != null && cookie.length() > 0)
            {
                sCookie = cookie;
                Log.v("cookie2", sCookie);
            } 
```

sCookie 是我设置的静态字符串变量。然后在下一个请求中，在这一行之后

```
https = (HttpsURLConnection) url.openConnection(); 
```

就放

```
 https.setRequestProperty("Cookie", sCookie);
            https.setRequestMethod("POST");
            https.setDoInput(true);
            https.setDoOutput(true); 
```

并且在需要会话之后为每个请求做同样的事情，它应该可以正常工作

# javascript - javascript 不适用于 LI 标签

> ID：10502067
> 
> 赞同：0
> 
> 时间：2012-05-08T15:54:12.140
> 
> 标签：javascript, html, css

嗨我有这个代码

# html代码

```
<ul>
<input type="button" onclick="appear()"/>
<li id="addQuestionChoices">roma</li>
</ul> 
```

# CSS代码

```
#addQuestionChoices{display:none;} 
```

# javascript代码

```
function appear()
{document.getElementById('addQuestionChoices').style.display="block";} 
```

但是当我按下按钮时，什么也没有发生，是 javascript 不适用于 LI 标签吗？要不然是啥 ？谢谢你的回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:56:19.113

`<li>`标记必须在or`<ul>`内`<ol>`，并且唯一允许的子级`<ul>`和`<ol>`是`<li>`标记。这意味着您`<input>`应该在以下范围之外`<ul>`：

```
<input type="button" onclick="appear()"/>
<ul>
    <li id="addQuestionChoices">roma</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:10:24.800

只要确保在**之前**定义函数，就像在这个小提琴中一样：http: [//jsfiddle.net/2dUfa/](http://jsfiddle.net/2dUfa/)

```
<script>
function appear() {
    document.getElementById('addQuestionChoices').style.display= "block";
}
</script>
<input type="button" onclick="appear()" value="appear" />

<ul>
   <li id="addQuestionChoices">roma</li>
</ul> 
```

作为旁注：`<li>`元素的默认显示属性是`list-item`（而不是`block`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T15:57:22.630

尝试将a or标签放在`<li>`里面。`<ol>``<ul>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T16:04:39.033

在 HTML 中嵌入 JavaScript 调用是不好的做法。当功能、样式和标记分开时，它使代码更易于维护。其次，您的`<li>`元素应该嵌套在一对`<ul>`或`<ol>`标签中。

我写了一个 jsFiddle 示例，说明如何处理此任务：

[http://jsfiddle.net/dLqja/1/](http://jsfiddle.net/dLqja/1/)

在这段代码中，我创建了一个“点击”侦听器，它通过它的 id 附加到您的按钮。按下按钮后，它会触发一个匿名回调函数，该函数会动态更改“li”元素的显示样式。

**包含 jQuery**

使以下内容成为您在页面中包含的第一个 JavaScript。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

这个 jQuery 脚本由谷歌托管，它有它的优点，例如（它可能已经缓存在客户端浏览器中，因为它访问了以前使用它的网站）。

您编写的任何使用 jQuery 功能的 JavaScript 代码都应包含在上述脚本之后。

# 无 jQuery 版本...

您可以通过为按钮分配事件侦听器来实现与上述类似的结果。这种方法比使用 onclick="..." 更可取，因为它坚持将功能与标记分开的规则。如果这些答案都不起作用，您应该检查浏览器控制台是否有错误消息。 [http://jsfiddle.net/SvufY/1/](http://jsfiddle.net/SvufY/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T16:09:57.640

您应该避免使用内联 Javascript 代码，而是专注于将其分开。将您的事件处理程序附加到脚本标记中的对象（或者，更好的是，在文档末尾加载的脚本文件），如下所示：

```
<input id="clickButton" type="button" value="submit" />
    <ul>
        <li id="addQuestionChoices">roma</li>
    </ul>

<script>
    document.getElementById('clickButton').onclick = function() {
        document.getElementById('addQuestionChoices').style.display="block"
    };
</script> 
```

[您可以在http://jsfiddle.net/xxgdB/](http://jsfiddle.net/xxgdB/)看到一个工作示例

另请注意，您可以使用其中一个`list-item`或`inherit`在显示字段中来实现相同的效果。

# c# - 复杂的 Silverlight TreeView，嵌套层次结构可能吗？

> ID：10502068
> 
> 赞同：2
> 
> 时间：2012-05-08T15:54:13.880
> 
> 标签：c#, visual-studio-2010, xaml, treeview, silverlight-5.0

我有一个看起来像这样的数据库：

```
Locations         [rootlevel]
   Inspections    [level1]
   Areas          [level1]
      Inspections [level2] 
```

所以每个位置可以有零个或多个检查和零个或多个区域，并且区域有零个或多个检查。检查的记录都具有 LocationID!=null 和 AreaID=null 或 !=null 以获取此层次结构。

我想在树视图中获取表中每个项目的所有名称作为导航。到目前为止，我可以得到

位置-->区域-->检查或

地点-->检查

我似乎无法让树视图层次结构显示我需要的东西。是否可以？我试图使用嵌套树视图作为层次结构中的一个项目来显示我想要的，但它不能正常工作。

Locations-->Areas-->Inspections 的 xml 代码

```
 <!--NAVIGATION TREE HIERARCHICAL TEMPLATE-->
    <common:HierarchicalDataTemplate x:Key="AssetManager" ItemsSource="{Binding Path=Areas}">

        <!--START OF AREA OPTIONS TEMPLATE-->
        <common:HierarchicalDataTemplate.ItemTemplate>
            <common:HierarchicalDataTemplate ItemsSource="{Binding Path=Inspections}">

                <!--START OF INSPECTION OPTIONS TEMPLATE-->
                <common:HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Source="Assets/Resources/ImageResources/SearchICON2.png" Height="20" Width="20" />
                            <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>
                        </StackPanel>
                    </DataTemplate>
                </common:HierarchicalDataTemplate.ItemTemplate>
                <!--END OF INSPECTION OPTIONS TEMPLATE-->

                <StackPanel Orientation="Horizontal">
                    <Image Source="Assets/Resources/ImageResources/ManufacturingICON.png" Width="20" Height="20"/>
                    <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>
                </StackPanel>
            </common:HierarchicalDataTemplate>
        </common:HierarchicalDataTemplate.ItemTemplate>
        <!--END OF AREA OPTIONS TEMPLATE-->

            <StackPanel Orientation="Horizontal">
                    <Image Source="Assets/Resources/ImageResources/ManufacturingICON.png" Width="20" Height="20"/>
                    <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>                    
          </StackPanel>     
    </common:HierarchicalDataTemplate>
    <!--END OF NAVIGATION TEMPLATE--> 
```

用于位置的 xaml--> 检查

```
 <!--NAVIGATION TREE HIERARCHICAL TEMPLATE-->
    <common:HierarchicalDataTemplate x:Key="AssetManager" ItemsSource="{Binding Path=Inspections}">
            <StackPanel Orientation="Horizontal">
                    <Image Source="Assets/Resources/ImageResources/ManufacturingICON.png" Width="20" Height="20"/>
                    <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>
                </StackPanel>
            </common:HierarchicalDataTemplate>
        </common:HierarchicalDataTemplate.ItemTemplate>
        <!--END OF TEMPLATE--> 
```

用于嵌套树视图的 xml

```
 <!--NAVIGATION TREE HIERARCHICAL TEMPLATE-->
    <common:HierarchicalDataTemplate x:Key="AssetManager" ItemsSource="{Binding Path=Areas}">

        <!--START OF AREA OPTIONS TEMPLATE-->
        <common:HierarchicalDataTemplate.ItemTemplate>
            <common:HierarchicalDataTemplate ItemsSource="{Binding Path=Inspections}">

                <!--START OF INSPECTION OPTIONS TEMPLATE-->
                <common:HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Source="Assets/Resources/ImageResources/SearchICON2.png" Height="20" Width="20" />
                            <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>
                        </StackPanel>
                    </DataTemplate>
                </common:HierarchicalDataTemplate.ItemTemplate>
                <!--END OF INSPECTION OPTIONS TEMPLATE-->

                <StackPanel Orientation="Horizontal">
                    <Image Source="Assets/Resources/ImageResources/ManufacturingICON.png" Width="20" Height="20"/>
                    <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>
                </StackPanel>
            </common:HierarchicalDataTemplate>
        </common:HierarchicalDataTemplate.ItemTemplate>
        <!--END OF AREA OPTIONS TEMPLATE-->

        <StackPanel Orientation="Vertical">                         
                            <StackPanel Orientation="Horizontal">
                    <Image Source="Assets/Resources/ImageResources/ManufacturingICON.png" Width="20" Height="20"/>
                    <TextBlock Margin="0,0,0,0" Text="{Binding Path=Name}"/>                    
                </StackPanel>
                            <sdk:TreeView HorizontalAlignment="Left" ItemsSource="{Binding Source={StaticResource locationInspectionsViewSource}}" Name="inspectionsTreeView" VerticalAlignment="Top" ItemTemplate="{StaticResource Level2}" BorderBrush="{x:Null}" Background="{x:Null}"/>                                         
                    </StackPanel>
    </common:HierarchicalDataTemplate>
    <!--END OF NAVIGATION TEMPLATE--> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:58:15.693

经过大量研究，拉扯头发和办公桌后，我发现：

**不**，使用 HierarchicalDataTemplate 显示嵌套的 TreeView 层次结构时是不可能的。数据模板只允许每个节点有一个“孩子”。

**一种解决方案**是将两个列表项“子项”合并到一个列表“子项”中，并在层次结构中使用它。因此，在我的情况下，位置将与区域和检查实体相邻的单个“子”表相关，每个区域都与相关的检查子项相关，并且检查没有子项。

**第二种解决方案**是使用嵌套的 DataGrid。这看起来像是作弊，但它达到了预期的效果。需要为 DataGrid 更改模板，以便没有列标题/备用行着色/突出显示等。这取决于 TreeView 的外观。

第二个实际上是更简单的选项，因为它使用标准的 DomainDataSource 作为根表（包含所有内容），这允许轻松封装 DataContext，这也意味着仍然没有代码隐藏来确保布局是独立的。

可能有更多方法，但我找到了一个对我有用且简单的解决方案。

# linux - Linux文件权限和Java问题（权限保留）

> ID：10502075
> 
> 赞同：1
> 
> 时间：2012-05-08T15:54:54.580
> 
> 标签：linux, ubuntu, permissions, filesystems, retain

我在我的 Linux 服务器 (Ubuntu) 上运行服务器，但出现了一些问题。修复起来似乎很简单，但我认为并非如此。服务器以我的用户名（服务器）运行，但是，其他人通过 FTP 以不同的用户访问某些文件。因为服务器在我的用户名下运行，所以每当插件创建新文件时，它们都没有编辑权限等。

我曾尝试将用户分组，然后允许组访问该文件夹（即使是新文件），但没有运气。每次他们需要编辑文件时，我都需要`chmod -R 777`。

我考虑过以他们的用户名运行服务器，但这会产生复杂性。实际上是否可以使新文件保留父（或顶级文件夹）的权限？我发现的所有解决方案似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:03:11.653

不是针对用户，而是针对组。你可以：

```
chmod g+s parent_dir
chgrp shared_group parent_dir 
```

如果您在其中创建文件，则该文件将具有文件夹的组（shared_group）。

# javascript - 咖啡脚本切换不间断

> ID：10502079
> 
> 赞同：19
> 
> 时间：2012-05-08T15:55:05.947
> 
> 标签：javascript, coffeescript

是否可以不间断地在咖啡脚本中使用开关？

```
switch code                      switch (code) {
    when 37 then                     case 37: break;
    when 38 then           ->        case 38: break;
    when 39 then                     case 39: break;
    when 40                          case 40:
        ...                              ... 
```

我认为这会奏效但失败了：

```
switch code
    when 37 then continue
    when 38 then continue  ->    not valid
    when 39 then continue
    when 40
        ... 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-08T16:17:30.997

并不真地。从[文档](http://coffeescript.org/#switch)：

> JavaScript 中的 switch 语句有点尴尬。您需要记住在每个 case 语句的末尾都中断，以避免意外陷入默认情况。CoffeeScript 可以防止意外掉线，并且可以将开关转换为可返回、可赋值的表达式。格式为：switch 条件，when 子句，else 为默认情况。

但是，您可以做的是在 a 中指定几个值`case`，如果它们要被平等对待：

```
switch day
  when "Mon" then go work
  when "Tue" then go relax
  when "Thu" then go iceFishing
  when "Fri", "Sat"
    if day is bingoDay
      go bingo
      go dancing
  when "Sun" then go church
  else go work 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-26T18:54:27.173

您可以使用续行来帮助解决此问题。例如：

```
name = 'Jill'

switch name
  when 'Jill', \
       'Joan', \
       'Jess', \
       'Jean'
    $('#display').text 'Hi!'
  else
    $('#display').text 'Bye!' 
```

[在这里查看实际情况。](http://jsfiddle.net/icylace/9vrZ7/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T06:17:34.633

完全有可能，只需使用经典的 javascript 并通过 backtics 传递

```
`
switch (code) {
    case 37:
    case 38:
    case 39:
    case 40:
        // do the work of all four
    default:
        //default
}
` 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-02T09:33:51.323

老问题了，但是如果你把逗号放在下一行，它会按预期工作，没有@Ron Martinez 显示的反斜杠行继续

```
switch code
  when 37
     , 38
     , 39
     , 40
    console.log "Some Number"
  else
    console.log "Default" 
```

这将编译为：

```
switch (code) {
  case 37:
  case 38:
  case 39:
  case 40:
    return console.log("Some Number");
  default:
    return console.log("Default");
} 
```

# android - 什么会导致应用程序通过 USB 安装时运行，但从 Play 商店安装时不运行

> ID：10502083
> 
> 赞同：1
> 
> 时间：2012-05-08T15:55:18.637
> 
> 标签：android, titanium

我有一个我正在开发并最近部署到 Google Play 商店的 Titanium Android 应用程序。当我从 Titanium Studio 工作区直接将其安装到设备上时，该应用程序运行良好；但是，当我尝试从 Google Play 商店安装它时，它不起作用。这里有问题的“不起作用”功能是调用 https Web 服务来验证用户身份。此外，我注意到 ICS 用户能够让应用程序从 Play 商店运行，而 Gingerbread 用户则不能，如果这有帮助的话。

这是导致问题的代码：

```
var actInd=Titanium.UI.createActivityIndicator({height:80, width:200, message:'Logging In...', font:{fontFamily:'Helvetica Neue', fontSize:18,fontWeight:'bold'}, color:'white', style: Titanium.UI.iPhone.ActivityIndicatorStyle.BIG});
actInd.show();
//Validating Data
var xhr2 = Titanium.Network.createHTTPClient();
xhr2.onload = function(){
    var response=JSON.parse(this.responseText);
    if(response.resultinfo.result){
        ticket = response.resultinfo.ticket;
        Titanium.App.Properties.setString("uname",username.value);
        actInd.message='Successful...';
        actInd.show();
    }
};
xhr2.onerror = function(){
    Ti.API.info('in utf-8 error for GET');
};
xhr2.open("GET","https://example.com/login.cfm");
xhr2.send({"userid":username.value,"password":password.value}); 
```

在问题的情况下，应用程序只是挂起显示“登录...”消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:43:43.223

感谢@Hydrangea，我能够将问题隔离为证书验证错误。显然，在 ICS 之前的某些版本的 Android 存在问题，即使它们设置正确，也无法正确验证有效的 SSL 证书。[Titanium.Network.HTTPClient](http://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.Network.HTTPClient)中有一个名为“validatesSecureCertificate”的设置，默认为 false 用于测试，但在发布应用程序以进行分发时为 true。这就是为什么仅在 Play 商店版本上出现问题的原因。将此设置为 false 似乎可以解决问题，我相信在每次调用级别这样做是安全的。

# c - 使用 NPAPI 显示 SWF 文件（在 Xlib 上）

> ID：10502091
> 
> 赞同：1
> 
> 时间：2012-05-08T15:56:06.387
> 
> 标签：c, unix, flash, npapi, xlib

我一直在为“好的”示例和“特定的”文档（在 Unix 上）使用 NPAPI。我有我`libflashplayer.so`的 ，我可以在上面访问某些信息，这些信息是：

```
nm -D libflashplayer.so | more

00000000005cc4e0 T FlashPlayer_11_2_202_235_FlashPlayer
00000000005cc4a0 T Flash_DisableLocalSecurity
00000000005cc4c0 T Flash_EnforceLocalSecurity
00000000005ca870 T NP_GetMIMEDescription
00000000005ca850 T NP_GetValue
00000000005ca4d0 T NP_Initialize
00000000005ca4c0 T NP_Shutdown 
```

通过这样做，我轻松地检查了 MIMEDescription。哪个返回 flash MIME。

```
static char* (*mNP_GetMIMEDescription)(void);
//MAIN
lib = dlopen("./libflashplayer.so", RTLD_LAZY | RTLD_LOCAL);

*(void **) &mNP_GetMIMEDescription  = dlsym(lib, "NP_GetMIMEDescription");
fprintf(stderr, "NP_GetMIMEDescription=%p\n", mNP_GetMIMEDescription);
fprintf(stderr, "NP_GetMIMEDescription=%s\n", mNP_GetMIMEDescription());

//output
NP_GetMIMEDescription=0x7f2d2239f870
NP_GetMIMEDescription=application/x-shockwave-flash:swf:Shockwave Flash;application/futuresplash:spl:FutureSplash Player 
```

现在，我真的不知道如何在`Xlib`Window 上呈现（或测试、打开 swf 文件）内容。首先，`NP_INITIALIZE`我相信（据我所知）提供全局初始化（特别是对于`NPNetscapeFuncs`“`NPPluginFuncs`实例”）。然后有趣的部分开始了，我的猜测（根据我阅读和理解的内容，如果我错了，请纠正我）是创建我的插件实例（使用 NPP_New），然后设置我的窗口（使用`NPP_SetWindow`）链接我的插件实例和我的窗户（`Xlib`例如...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:15:59.647

这正是我想要实现的。

[http://blog.henryfan.net/post/2012/01/09/gtk%E6%92%AD%E6%94%BEflash.aspx](http://blog.henryfan.net/post/2012/01/09/gtk%E6%92%AD%E6%94%BEflash.aspx)

感谢写下来的人。

# jquery - 如何使用 jQuery 重置选择元素

> ID：10502093
> 
> 赞同：76
> 
> 时间：2012-05-08T15:56:12.297
> 
> 标签：jquery, html

我有

```
<select id="baba">
<option>select something</option>
<option value="1">something 1</option>
<option value=2">something 2</option>
</select> 
```

使用 jQuery，重置`select`第一个选项的最简单（少写）方法是什么？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-05-08T15:59:35.050

试试这个。这将起作用。`$('#baba').prop('selectedIndex',0);`

检查这里[http://jsfiddle.net/bibin_v/R4s3U/](http://jsfiddle.net/bibin_v/R4s3U/)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-08T15:58:58.147

在您的情况下（在我见过的大多数用例中），您只需要：

```
$("#baba").val(""); 
```

[**演示**。](http://jsfiddle.net/gYR4a/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-05-08T15:59:15.183

```
$('#baba option:first').prop('selected',true); 
```

现在你最好使用**.prop()**：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-18T10:38:33.787

```
$('#baba').prop('selectedIndex',-1); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-18T07:26:20.750

将单选字段重置为默认选项。

```
<select id="name">
    <option>select something</option>
    <option value="1" >something 1</option>
    <option value="2" selected="selected" >Default option</option>
</select>
<script>
    $('name').val( $('name').find("option[selected]").val() );
</script> 
```

或者，如果您想将所有表单字段重置为默认选项：

```
<script>
    $('select').each( function() {
        $(this).val( $(this).find("option[selected]").val() );
    });
</script> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-18T12:47:39.850

如果这些解决方案都不适合您，请尝试在之后添加

```
.trigger( "change" ); 
```

前任。

```
$("#baba").val("").trigger( "change" ); 
```

或者

```
$("#baba").val(false).trigger( "change" ); 
```

或者

```
$("#baba option").prop("selected", false).trigger( "change" ); 
```

或者

```
$('#baba').prop('selectedIndex',-1).trigger( "change" ); 
```

或者

```
$('#baba option:first').prop('selected',true).trigger( "change" ); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-08T16:00:46.333

**编辑：**老式的方式，

```
document.getElementById('baba').selectedIndex = 0; 
```

~~在下面尝试，它应该适用于您的情况，~~

 ~~```
$('#baba option:first').prop('selected', true); 
```~~ 

~~[**演示**](http://jsfiddle.net/skram/PkLpS/1/)~~

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-08T15:58:50.290

```
$('#baba option:first').attr('selected',true); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-08T15:59:00.907

这可以解决问题，适用于任何选择。

```
$('#baba').val($(this).find('option:first').val()); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-04T12:53:26.083

我发现的最好的 javascript 解决方案是这个

```
elm.options[0].selected="selected"; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-03T13:46:24.377

如果您不想使用第一个选项（以防字段被隐藏或其他情况），那么以下 jQuery 代码就足够了：

```
$(document).ready(function(){
    $('#but').click(function(){
        $('#baba').val(false);
    })
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<select id="baba">
<option>select something</option>
<option value="1">something 1</option>
<option value=2">something 2</option>
</select>

    <input type="button" id="but" value="click">
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-02T11:32:22.623

这个函数应该适用于所有类型的选择（multiple、select、select2）：

```
$.fn.Reset_List_To_Default_Value = function()
{
    $.each($(this), function(index, el) {
        var Founded = false;

        $(this).find('option').each(function(i, opt) {
            if(opt.defaultSelected){
                opt.selected = true;
                Founded = true;
            }
        });

        if(!Founded)
        {
            if($(this).attr('multiple'))
            {
                $(this).val([]);
            }
            else
            {
                $(this).val("");
            }
        }
        $(this).trigger('change');
    });
} 
```

要使用它，只需调用：

```
$('select').Reset_List_To_Default_Value(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-05-08T15:59:05.650

我相信：

```
$("select option:first-child").attr("selected", "selected"); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-10-22T19:37:29.803

这与其他答案略有不同，因为它取消选择所有选项：

```
$("#baba option").prop("selected", false); 
```

（借自[https://stackoverflow.com/a/11098981/1048376](https://stackoverflow.com/a/11098981/1048376)）

# python - 如何在python中为sql语句传递变量？

> ID：10502095
> 
> 赞同：0
> 
> 时间：2012-05-08T15:56:16.827
> 
> 标签：python, database

我是python的初学者。我正在查询访问数据库。我打算将一个字符串变量传递给 sql 语句，但无法计算出双精度。

这是我的代码：

```
qllname = 29221.0

llname = "01-01-05-W2"

sqlstatement = recordset.Open("SELECT * FROM LLD WHERE LLD = '%s'" % (llname),connection,1,3)

for x in range(recordset.Fields.Count):

    fields_dict[x] = recordset.Fields.Item(x).Name

    print fields_dict[x], recordset.Fields.Item(x).Value, x

sqlstatement2 = recordset2.Open("SELECT * FROM SWAWELLS WHERE WWDR_NO = '%d'" % (qllname),connection2,1,3)

for x2 in range(recordset2.Fields.Count):

    print recordset2.Fields.Item(x2).Value, type(recordset2.Fields.Item(x2).Value) 
```

结果：

```
LLD 01-01-05-W2 0
X 678817.81875 1
Y 5431052.45982 2
Traceback (most recent call last):
  File "L:/temporary/start of test/accessnew--.py", line 25, in <module>
    sqlstatement2 = recordset2.Open("SELECT * FROM SWAWELLS WHERE WWDR_NO = '%d'" % (qllname),connection2,1,3)
  File "<COMObject ADODB.Recordset>", line 4, in Open
com_error: (-2147352567, 'Exception occurred.', (0, u'Microsoft JET Database Engine', u'Data type mismatch in criteria expression.', None, 5003071, -2147217913), None)
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:56:48.337

您不应该使用`%`格式化运算符。这是不安全的。

这是 Python 数据库 API 规范 v2.0 [http://www.python.org/dev/peps/pep-0249/](http://www.python.org/dev/peps/pep-0249/)

大多数 python DB 包装器都支持它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:01:22.890

尝试：

```
sqlstatement2 = recordset2.Open("SELECT * FROM SWAWELLS WHERE WWDR_NO = '%d'" % (qllname),connection2,1,3) 
```

您正在使用`%d`字符串插值运算符，它告诉我您正在将一个数字传递给 SQL 语句。但是，当我认为您需要一个整数时，您会使用 SQL 字符串。我想你想要一个看起来像的 SQL 语句 -

```
SELECT * FROM SWAWELLS WHERE WWDR_NO = 29221 
```

但是，您提供的代码将生成此语句：

```
SELECT * FROM SWAWELLS WHERE WWDR_NO = '29221' 
```

如果`WWDR_NO`是一个整数，那么您将得到上面收到的“标准表达式中的数据类型不匹配”。

尝试这个：

```
# Notice there is no ' around %d
sqlstatement2 = recordset2.Open("SELECT * FROM SWAWELLS "
                                "WHERE WWDR_NO = %d" % 
                                (qllname),connection2,1,3) 
```

此外，正如其他人所提到的，您应该使用 DBAPI 包装器。那是什么？DB-API 是用于访问数据库的 python“标准”。有一个可用于 ACCESS 的称为[adodbapi](http://sourceforge.net/projects/adodbapi/)。我不知道这个图书馆的状态。人们说远离你上面所做的插值的原因是因为它可以构建无效的 SQL，并且如果你从不受信任的来源获取数据，则会存在安全风险。

使用的另一个*大*好处`dbapi`是它是一个标准。如果您试一试，您的代码将可以合理地移植到其他数据库。

想要在不下载库的情况下立即查看 DBAPI？如果您使用的是 py2.5 或更高版本，您可以使用 sqlite 内置它。[在这里](http://docs.python.org/library/sqlite3.html)查看 sqlite3 模块。

# javascript - 如何将焦点从 IFrame 中移出

> ID：10502099
> 
> 赞同：8
> 
> 时间：2012-05-08T15:56:37.910
> 
> 标签：javascript, dom, iframe

我有一个 IFrame，里面有一些按钮。当按钮被点击时，父 DOM 被操作（它们都在同一个域中，所以不用担心同源策略）。

由于用户单击了一个按钮，因此焦点转到了 IFrame。但是，我想将焦点移回父文档（主要是由于[这个 FireFox 问题](https://stackoverflow.com/questions/10501381/selection-changes-color-when-firefox-loses-focus)）。

我怎样才能做到这一点？

**编辑：**我创建了一个显示问题的[js-fiddle 。](http://jsfiddle.net/paleozogt/emDLZ/)如果`focus()`您在父表单元素上调用它似乎可以工作，但它通常不起作用。从 js-fiddle 可以看出，我的父文档中没有表单元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:45:34.290

如果您想将焦点从 iframe 内部设置回外部窗口，聚焦外部窗口本身不太可能向用户提供任何视觉反馈，因此最好将已知的表单元素聚焦在外部页面中。

您可以按如下方式执行此操作：

## 外部.html

```
<html>
  <head>
    <title>Outer</title>
  </head>
  <body>
    <iframe id="iframe" src="inner.html">
    </iframe>
  </body>
</html> 
```

## 内部.html

```
<html>
  <head>
    <title>Inner</title>
  </head>
  <body>
    <form id="innerForm">
      <input type="button" id="innerButton" value="Inner button" />
    </form>
  </body>
  <script type="text/javascript">
    // When we click the inner button...
    document.getElementById('innerButton').addEventListener('click', function() {
      /*
       * Do whatever you need to do here
       */

      // Focus the parent
      parent.focus();
    });
  </script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:03:27.027

在您的页面上创建一个元素，并在焦点设置为 IFrame 后的某个时间点调用它：

```
document.getElementById("myElementId").focus(); 
```

这会将焦点设置回正文并移出 IFrame。

# javascript - 更改使用 JavaScript prompt() 显示的格式和文本？

> ID：10502102
> 
> 赞同：2
> 
> 时间：2012-05-08T15:56:53.760
> 
> 标签：javascript, prompt

我正在使用 JavaScript 的`prompt()`函数。

```
 var favorite = prompt('What is your favorite color?', 'RED'); 
```

我正在使用 IE 7，打开的提示框有一个标题栏，上面写着：'Explorer User Prompt' 和进一步的文字，上面写着'Script Prompt：' 然后下面是我的文字：'你最喜欢的颜色是什么？“确定”和“取消”按钮也出现在提示框的最右侧，文本输入框出现在对话框的最底部。

有什么方法可以更改标题栏，删除文本“脚本提示”，然后将确定和取消按钮放在文本输入框下方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:58:58.257

是的。通过不依赖浏览器 UI（实际上在某些浏览器中默认禁用），而是自己制作。

所需要的只是一个带有表单的简单模式对话框，一切都很好。唯一的缺点是它不会再阻塞（如果您认为这是一个缺点），因此您需要将其余代码放在提示关闭时调用的回调中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T15:58:54.440

不，我不相信。问题是人们会恶意使用提示，所以微软补充说，让它看起来更像是一个特定于页面的提示，而不是一个 IE 提示。

您可以使用 jQuery 或其他方式进行页面内对话框：

[http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T15:58:41.813

简短的回答：没有。

更长的答案：不，但是您可以使用 jQuery 的 UI 库来滚动自己的弹出窗口，或者自己使用 DOM 破解一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T15:59:00.877

不，没有。

最接近的方法是使用 DOM 元素模拟一个假的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-12T06:54:54.120

不完全是问什么，但我发现给提示框一些格式的唯一方法......

使用[这个答案](https://stackoverflow.com/a/17471151/1287812)、[这个答案](https://stackoverflow.com/a/30320981/1287812)和[这些 HTML 符号](https://www.w3schools.com/charsets/ref_utf_dingbats.asp)，可以发挥创意并实现这一目标：

 `![prompt example](../Images/5c1fa1dd2c9aa1cf16649f7d05dc7e81.png)`

示范：

```
var balls = '\u25CD'.repeat(24),
    blue = '\u27BF', 
    red = '\u274C', 
    yellow = '\u2728', 
    green = '\u2705',
    arrow = '\u25B8';

window.prompt(balls+' \u25C9 '+balls+'\rWhat is your favorite color?\r\t'+arrow+' B\u0332lue '+blue+'\r\t'+arrow+' R\u0332ed '+red+'\r\t'+arrow+' Y\u0332ellow '+yellow+'\r\t'+arrow+' G\u0332reen '+green);
```

# extjs - ExtJS 3.2.1 GroupingStore.js 排序方法

> ID：10502110
> 
> 赞同：2
> 
> 时间：2012-05-08T15:57:39.473
> 
> 标签：extjs

有人在使用 ExtJS 3.2.1 的 GroupingStore.js 文件中的排序方法时遇到问题吗？我有超过 2000 条记录要加载到网格控件中，并且我得到了长时间运行的脚本通知。它消失并继续处理。

我知道 MS 发布了一个注册表修复程序来解决这个问题，但如果可能的话，我宁愿用编码来解决它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:50:08.397

哇，没有分页的 2000 条记录？然后你试图对其进行排序？

我总是使用分页工具栏或分页滚动条将任何可能超过 500 条记录的网格转换为分页网格。

以我的经验，除此之外的任何事情都对客户资源造成太大影响，无法证明没有这些资源而获得的任何直观使用收益是合理的。我认为 2000 肯定会保证分页，这将处理您长时间运行的脚本问题。

我不认为 ExtJS3 内置了分页滚动条，但它可能有一个 ux。它确实有分页工具栏，[在这里](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.PagingToolbar)。

您应该实现后端排序，然后该工具栏将以较小的块（页面）请求数据，如上面的文档链接中所述。

# actionscript-3 - 有什么方法可以运行两个调试器实例吗？

> ID：10502111
> 
> 赞同：2
> 
> 时间：2012-05-08T15:57:40.563
> 
> 标签：actionscript-3, flash, debugging, flash-builder, adobe-cirrus

我在一个多人游戏项目中工作，它在 Cirrus 上运行。

调试正在运行的游戏的两个实例会很好，不仅是一个，而且只要我发送一个新的调试调用，Flash Builder 就会停止一个调试实例。

如果有办法让 2 个调试实例同时运行，您有什么想法吗？也许会打开 2 个 Flash Builders .. 但它说明了工作空间..

不知道我问的是否可能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:54:37.693

哎呀，对不起，我刚说完这个，我就发现了

> 调试器是与在 Flash Player 中运行的应用程序通信的代理。它通过本地套接字连接连接到您的应用程序。因此，如果您的防病毒软件阻止套接字通信，您可能必须禁用防病毒软件才能使用它。调试器使用此连接将信息从 SWF 文件传输到命令行，以便您可以添加断点、检查变量以及执行其他常见的调试任务。调试器连接到您的应用程序的端口是 7935。您无法更改此端口。

但是我会查看源代码，使用不同的端口设置构建 fdb 应该不难。

**编辑：**

好的，看起来您只需像这样运行 fdb：

```
$ ./fdb -p=9090 
```

9090 - 只是一个随机选择的端口号，然后您需要右键单击您正在调试的 SWF 并将其配置为连接到 localhost:9090。

**编辑2：**

如果它不起作用，则将 ${SDK}/modules/debugger/src/java/flash/tools/debugger/concrete/DProtocol.java 中的第 51 行更改为不同的端口，然后重新构建 SDK（可能您可以仅构建调试器项目，但只是“确保”），您将拥有另一个版本的调试器，它将连接到不同的端口。

# python - 如何使用python每隔几秒钟从网页下载内容？

> ID：10502113
> 
> 赞同：-2
> 
> 时间：2012-05-08T15:57:44.247
> 
> 标签：python, web-crawler

我有一个网址说`www.someurl.com/blah.xml`。

我想编写一个 python 脚本，该脚本可以访问该 URL，获取其内容，并将其保存到本地硬盘上的文件中。不确定最好的方法是什么，或者这种事情是否需要任何推荐的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:16:38.137

像这样的东西：

```
import urllib2 as urllib

page = urllib.urlopen('http://www.someurl.com/blah.xml')
with open('output.xml', 'w') as f:
  f.write(page.read()) 
```

然后你也许可以让一个 cron 作业每五分钟运行一次。在终端上，键入`crontab -e`并写一行：

```
*/5 * * * * python path/to/script.py 
```

我不是 crontabs 专家，所以如果我错了，请有人纠正。

# c++ - 如何在派生类上强制使用静态成员？

> ID：10502114
> 
> 赞同：6
> 
> 时间：2012-05-08T15:57:44.340
> 
> 标签：c++, methods, static, virtual

我有一个基类 ,`Primitive`从中派生出其他几个类—— `Sphere`,`Plane`等。

`Primitive``intersect()`通过纯虚函数对其子类强制执行某些功能，例如。的计算`intersect`依赖于实例数据，因此将其作为成员方法是有意义的。

我的问题出现在以下方面：我希望每个派生实例都能够识别其类型，比如通过`std::string type()`成员方法。`type()`由于同一类的所有实例都将返回相同的类型，因此创建一个方法是有意义的`static`。因为我也希望每个`Primitive`子类都实现这个方法，所以我也想让它成为一个纯虚函数，就像`intersect()`上面一样。

但是，C++ 中不允许使用静态虚拟方法。 [C++ 静态虚拟成员？](https://stackoverflow.com/questions/1820477/c-static-virtual-members)[我们可以有一个虚拟静态方法吗](https://stackoverflow.com/questions/7227236/can-we-have-a-virtual-static-method-c) ？ [(c++)](https://stackoverflow.com/questions/7227236/can-we-have-a-virtual-static-method-c) 提出类似的问题，但它们不包括在派生类上强制执行函数的要求。

任何人都可以帮我解决上述问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:53:36.970

让我们考虑一下。我确定您不仅有 2 个子类，所以让我们概括一下。

首先想到的是**代码重复、可扩展性和紧密性。**让我们扩展这些：

如果您想添加更多类，您应该在尽可能少的地方更改代码。

因为`intersect`操作是**可交换**的，相交`A`和的代码`B`应该和相交的代码在同一个地方`B`，`A`所以将逻辑保留在类本身是不可能的。

此外，添加一个新类并不意味着您必须修改现有的类，而是扩展一个委托类（是的，我们将在这里讨论模式）。

这是您当前的结构，我假设（或类似的，可能是 的返回类型`intersect`，但现在并不重要）：

```
struct Primitive
{
    virtual void intersect(Primitive* other) = 0;
};
struct Sphere : Primitive
{
    virtual void intersect(Primitive* other)
};
struct Plane : Primitive
{
    virtual void intersect(Primitive* other);
}; 
```

我们已经决定不希望在`Plane`or中使用交集逻辑`Sphere`，因此我们创建了一个新的`class`：

```
struct Intersect
{
    static void intersect(const Sphere&, const Plane&);
    //this again with the parameters inversed, which just takes this
    static void intersect(const Sphere&, const Sphere&);
    static void intersect(const Plane&, const Plane&);
}; 
```

这是您将添加新功能和新逻辑的类。例如，如果您决定添加一个`Line`类，您只需添加方法`intersec(const Line&,...)`。

请记住，在添加新类时，我们不想更改现有代码。所以我们无法检查相交函数中的类型。

我们可以为此创建一个行为类（策略模式），它的行为取决于类型，然后我们可以扩展：

```
struct IntersectBehavior
{  
    Primitive* object;
    virtual void doIntersect(Primitive* other) = 0;
};
struct SphereIntersectBehavior : IntersectBehavior
{
    virtual void doIntersect(Primitive* other)
    {
        //we already know object is a Sphere
        Sphere& obj1 = (Sphere&)*object;
        if ( dynamic_cast<Sphere*>(other) )
            return Intersect::intersect(obj1, (Sphere&) *other);
        if ( dynamic_cast<Plane*>(other) )
            return Intersect::intersect(obj1, (Plane&) *other);

        //finally, if no conditions were met, call intersect on other
        return other->intersect(object);
    }
}; 
```

在我们原来的方法中，我们有：

```
struct Sphere : Primitive
{
    virtual void intersect(Primitive* other)
    {
        SphereIntersectBehavior intersectBehavior;
        return intersectBehavior.doIntersect(other);
    }
}; 
```

一个更简洁的设计是实现一个工厂，以抽象出行为的实际类型：

```
struct Sphere : Primitive
{
    virtual void intersect(Primitive* other)
    {
        IntersectBehavior*  intersectBehavior = BehaviorFactory::getBehavior(this);
        return intersectBehavior.doIntersect(other);
    }
}; 
```

你甚至不需要`intersect`是虚拟的，因为它会为每个班级做这个。

**如果你按照这个设计**

*   添加新类时无需修改现有代码
*   将实现放在一个地方
*   `IntersectBehavior`仅为每种新类型扩展
*   在`Intersect`类中为新类型提供实现

我敢打赌，这可以进一步完善。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:05:00.800

由于他们在您提供的链接中讨论的原因，您不能将虚拟成员设为静态。

您关于在派生类上强制执行函数的要求的问题是通过在抽象基类中使函数纯虚拟来处理的，这将强制派生类必须实现该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:15:07.327

> 由于同一类的所有实例都将返回相同的类型，因此将 type() 设为静态方法是有意义的。

不，不是的。当您不需要对象的实例来调用函数时，您可以使用静态方法。在这种情况下，您正在尝试识别对象的类型，因此您*确实*需要一个实例。

无论如何，所有方法体都由所有对象共享，因此无需担心重复。一个例外是函数是内联的，但编译器会尽力减少开销，如果成本太大，可能会将其变为非内联。

PS 要求一个类在类层次结构之外标识自己通常是一种不好的代码气味。尝试寻找另一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:02:33.667

您可以有一个非静态虚拟方法调用静态方法（或返回静态字符串），在每个派生类中适当地实现。

```
#include <iostream>
#include <string>

struct IShape {
  virtual const std::string& type() const =0;
};

struct Square : virtual public IShape {
  virtual const std::string& type() const { return type_; }
  static std::string type_;
};
std::string Square::type_("square");

int main() {

  IShape* shape = new Square;
  std::cout << shape->type() << "\n";

} 
```

请注意，`type()`无论如何您都必须为每个子类实现该方法，因此您能做的最好的事情就是使字符串保持静态。但是，您可以考虑使用 an`enum`代替字符串，避免在代码中进行不必要的字符串比较。

现在，回到问题的根本，我认为设计有些缺陷。您不能真正拥有适用于各种形状的通用相交函数，因为由相交产生的形状类型差异很大，即使对于相同类型的形状（两个平面可以在一个平面、一条线相交或不相交于全部，例如）。因此，在尝试提供通用解决方案时，您会发现自己到处都在执行这些类型的检查，并且随着您添加的形状越多，这种检查就会变得难以维护。

# javascript - 无法识别 Gmail OpenID 用户

> ID：10502120
> 
> 赞同：1
> 
> 时间：2012-05-08T15:58:07.770
> 
> 标签：javascript, asp.net-mvc-3, iis-7, dotnetopenauth, google-openid

我已经在我的 MVC3 应用程序中设置了 OpenID，并且我正在使用 gmail 登录。请参阅下面的身份验证表。我在[http://weblogs.asp.net/haithamkhedre/archive/2011/03/13/openid-authentication-with-asp-net-mvc3-dotnetopenauth-and-openid-selector.aspx中实现代码](http://weblogs.asp.net/haithamkhedre/archive/2011/03/13/openid-authentication-with-asp-net-mvc3-dotnetopenauth-and-openid-selector.aspx)

当使用 IIS express 在本地运行时，一切正常，我得到 else 语句和 buttonGreen 代码。一旦我将它部署到网络上，它就会在“if (String.IsNullOrEmpty(Model.UserName))”上跳闸，最后我会看到“新用户，注册”代码。显示模型.OpenID。该代码使用 MyOpenId 在线工作（由于其他问题我已经放弃了）。

会员数据库已滚入主数据库，并通过 OpenID 登录在本地创建用户，分配角色，然后将数据库推送到 Web。截至两周前，我正在使用最新的 DotANetOpenAuth。我正在使用 DotANetOpenAuth.Core、DotANetOpenAuth.OpenId 和 DotANetOpenAuth.OpenId.RelyParty。

```
<form action="Authenticate?ReturnUrl=@HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"])" method="post" id="openid_form">
<input type="hidden" name="action" value="verify" />
<div>
    <fieldset>
        <legend>Login using OpenID</legend>
        <div class="openid_choice">
            <p> Please click your account provider:</p>
            <div id="openid_btns"></div>
        </div>
        <div id="openid_input_area">
            @Html.TextBox("openid_identifier")
            <input type="submit" value="Log On" />
        </div>
        <noscript>
            <p>
                OpenID is service that allows you to log-on to many different websites using a single
                indentity. Find out <a href="http://openid.net/what/">more about OpenID</a> and
                <a href="http://openid.net/get/">how to get an OpenID enabled account</a>.</p>
        </noscript>
        <div>
            @if (Model != null)
            {
                if (String.IsNullOrEmpty(Model.UserName))
                {
                  <div class="editor-label">
                      @Html.LabelFor(model => model.OpenID)
                  </div>
                  <div class="editor-field">
                      @Html.DisplayFor(model => model.OpenID)
                  </div>
                  <p class="button">
                      @Html.ActionLink("New User, Register", "Register", new { OpenID = Model.OpenID })
                  </p>
                }
                else
                {
                //user exist 
                  <p class="buttonGreen">
                    <a href="@Url.Action("Index", "TalPro")">Welcome @Model.UserName, Continue... </a>
                  </p>
                }
            }
        </div>
    </fieldset>
</div>
</form> 
```

这是javascript：openid-jquery.js

```
/*
    Simple OpenID Plugin
    http://code.google.com/p/openid-selector/

    This code is licensed under the New BSD License.
*/
var providers;
var openid;

(function ($) {
openid = {
    version : '1.3', // version constant
    demo : false,
    demo_text : null,
    cookie_expires : 6 * 30, // 6 months.
    cookie_name : 'openid_provider',
    cookie_path : '/',

    img_path : '../Content/themes/base/images/',
    locale : 'en', // is set in openid-<locale>.js
    sprite : 'en', // usually equals to locale, is set in
    // openid-<locale>.js
    signin_text : 'Sign-In', // text on submit button on the form
    all_small : false, // output large providers w/ small icons
    no_sprite : false, // don't use sprite image
    image_title : '{provider}', // for image title

    input_id : null,
    provider_url : null,
    provider_id : null,

    /**
     * Class constructor
     * 
     * @return {Void}
     */
    init : function(input_id) {
        providers = $.extend({}, providers_large);
        var openid_btns = $('#openid_btns');
        this.input_id = input_id;
        $('#openid_choice').show();
        $('#openid_input_area').empty();
        var i = 0;
        // add box for each provider
        for (id in providers_large) {
            box = this.getBoxHTML(id, providers_large[id], (this.all_small ? 'small' : 'large'), i++);
            openid_btns.append(box);
        }
        $('#openid_form').submit(this.submit);
        var box_id = this.readCookie();
        if (box_id) {
            this.signin(box_id, true);
        }
    },

    /**
     * @return {String}
     */
    getBoxHTML : function(box_id, provider, box_size, index) {
        if (this.no_sprite) {
            var image_ext = box_size == 'small' ? '.ico.gif' : '.gif';
            return '<a title="' + this.image_title.replace('{provider}', provider["name"]) + '" href="javascript:openid.signin(\'' + box_id + '\');"'
                    + ' style="background: #FFF url(' + this.img_path + '../images.' + box_size + '/' + box_id + image_ext + ') no-repeat center center" '
                    + 'class="' + box_id + ' openid_' + box_size + '_btn"></a>';
        }
        var x = box_size == 'small' ? -index * 24 : -index * 100;
        var y = box_size == 'small' ? -60 : 0;
        return '<a title="' + this.image_title.replace('{provider}', provider["name"]) + '" href="javascript:openid.signin(\'' + box_id + '\');"'
                + ' style="background: #FFF url(' + this.img_path + 'openid-providers-' + this.sprite + '.png); background-position: ' + x + 'px ' + y + 'px" '
                + 'class="' + box_id + ' openid_' + box_size + '_btn"></a>';
    },

    /**
     * Provider image click
     * 
     * @return {Void}
     */
    signin : function(box_id, onload) {
        var provider = providers[box_id];
        if (!provider) {
            return;
        }
        this.highlight(box_id);
        this.setCookie(box_id);
        this.provider_id = box_id;
        this.provider_url = provider['url'];
        // prompt user for input?
        if (provider['label']) {
            this.useInputBox(provider);
        } else {
            $('#openid_input_area').empty();
            if (!onload) {
                $('#openid_form').submit();
            }
        }
    },

    /**
     * Sign-in button click
     * 
     * @return {Boolean}
     */
    submit : function() {
        var url = openid.provider_url;
        if (url) {
            url = url.replace('{username}', $('#openid_username').val());
            openid.setOpenIdUrl(url);
        }
        if (openid.demo) {
            alert(openid.demo_text + "\r\n" + document.getElementById(openid.input_id).value);
            return false;
        }
        if (url.indexOf("javascript:") == 0) {
            url = url.substr("javascript:".length);
            eval(url);
            return false;
        }
        return true;
    },

    /**
     * @return {Void}
     */
    setOpenIdUrl : function(url) {
        var hidden = document.getElementById(this.input_id);
        if (hidden != null) {
            hidden.value = url;
        } else {
            $('#openid_form').append('<input type="hidden" id="' + this.input_id + '" name="' + this.input_id + '" value="' + url + '"/>');
        }
    },

    /**
     * @return {Void}
     */
    highlight : function(box_id) {
        // remove previous highlight.
        var highlight = $('#openid_highlight');
        if (highlight) {
            highlight.replaceWith($('#openid_highlight a')[0]);
        }
        // add new highlight.
        $('.' + box_id).wrap('<div id="openid_highlight"></div>');
    },

    setCookie : function(value) {
        var date = new Date();
        date.setTime(date.getTime() + (this.cookie_expires * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
        document.cookie = this.cookie_name + "=" + value + expires + "; path=" + this.cookie_path;
    },

    readCookie : function() {
        var nameEQ = this.cookie_name + "=";
        var ca = document.cookie.split(';');
        for ( var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ')
                c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0)
                return c.substring(nameEQ.length, c.length);
        }
        return null;
    },

    /**
     * @return {Void}
     */
    useInputBox : function(provider) {
        var input_area = $('#openid_input_area');
        var html = '';
        var id = 'openid_username';
        var value = '';
        var label = provider['label'];
        var style = '';
        if (label) {
            html = '<p>' + label + '</p>';
        }
        if (provider['name'] == 'OpenID') {
            id = this.input_id;
            value = 'http://';
            style = 'background: #FFF url(' + this.img_path + 'openid-inputicon.gif) no-repeat scroll 0 50%; padding-left:18px;';
        }
        html += '<input id="' + id + '" type="text" style="' + style + '" name="' + id + '" value="' + value + '" />'
                + '<input id="openid_submit" type="submit" value="' + this.signin_text + '"/>';
        input_area.empty();
        input_area.append(html);
        $('#' + id).focus();
    },

    setDemoMode : function(demoMode) {
        this.demo = demoMode;
    }
};
})(jQuery); 
```

为什么它会在本地工作但在网络上失败？

谢谢你。

进一步细化问题。当使用 IIS Express 在本地托管时，Model.UserName 设置正确并且登录成功。在 Web 上托管时 (DiscountASP IIS 7.0) Model.UserName 未设置并且登录失败。问题是为什么？这与IIS有关吗？它与cookies有关吗？我将如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:20:10.567

Google 向不同的 OpenID 领域发布不同的 OpenID 声明标识符。当您在本地登录时，您的领域可能是“本地主机”，但在生产环境中显然不同，因此 Google 会发出不同的 OpenID，导致您无法识别用户。谷歌在这方面相当独特。

我建议您从您的生产领域获取您声明的 ID。

# node.js - node-postgres 不会插入数据，但也不会抛出错误

> ID：10502121
> 
> 赞同：3
> 
> 时间：2012-05-08T15:58:13.390
> 
> 标签：node.js, node-postgres

我正在为 node.js 使用[node-postgres](https://github.com/brianc/node-postgres)模块，但插入数据时出现问题。

功能：

```
function addItems(listId, listItems, handle) {
    if (!listItems) {
        handle(listId);
        return;
    }
    var client = dbConnector.getClient(),
        important,
        dateArray,
        dateString,
        i,
        prepStatement;
    client.connect();
    for (i in listItems) {
        console.log(listItems[i]);
        dateArray = listItems[i].itemdate.split('-');
        dateString = dateArray[1] + '-' + dateArray[0] + '-' + dateArray[2];
        if (listItems[i].important) {
            important = 'true';
        } else {
            important = 'false';
        }
        prepStatement = {
            name: 'insert task',
            text: 'INSERT INTO listitem (todolist_id, name, deadline, description, important, done, created) VALUES ($1, $2, $3, $4, $5, $6, now()) RETURNING listitem_id',
            values: [ listId, listItems[i].itemname, dateString, listItems[i].itemdesc, important, listItems[i].done ]
        };
        var query = client.query(prepStatement);
        console.log("Adding item " + i);
        query.on('error', function(error) {
            console.log(error);
        });
        query.on('end', function(result) {
           console.log("Query ended");
           if (result) {
               console.log("Added listitem no " + result.rows[0].listitem_id);
           } 
        });
    }
    client.end();
    handle(listId);
} 
```

数据库中不会出现新数据。`query.on('error')`and`query.on('end')`事件永远不会被触发。想想看，我开始怀疑是否甚至触发了查询（但我不明白为什么不应该）。

我得到的唯一日志是：

```
{  itemname: 'Task 1',
   itemdate: '08-05-2012',
   important: 'on',
   itemdesc: 'A task',
   done: 'false' }
Adding item 0
{  itemname: 'Task 2',
   itemdate: '22-05-2012',
   important: 'on',
   itemdesc: 'Another one',
   done: 'false' }
Adding item 1 
```

那么我应该如何进行调试呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T19:24:08.977

在您的查询可以执行之前调用 client.end()。node-postgres 不会抛出“未连接”错误，因为它旨在将查询排队，直到连接准备好。 [https://github.com/brianc/node-postgres/wiki/Client#method-connect](https://github.com/brianc/node-postgres/wiki/Client#method-connect)

试试这个：

```
function addItems(listId, listItems, handle) {
    if (!listItems) {
        handle(listId);
        return;
    }
    var client = dbConnector.getClient(),
        important,
        dateArray,
        dateString,
        i, 
        prepStatement,
        queryCount = 0;
    client.connect();
    for (i in listItems) {
        console.log(listItems[i]);
        dateArray = listItems[i].itemdate.split('-');
        dateString = dateArray[1] + '-' + dateArray[0] + '-' + dateArray[2];
        if (listItems[i].important) {
            important = 'true';
        } else {
            important = 'false';
        }
        prepStatement = {
            name: 'insert task',
            text: 'INSERT INTO listitem (todolist_id, name, deadline, description, important, done, created) VALUES ($1, $2, $3, $4, $5, $6, now()) RETURNING listitem_id',
            values: [ listId, listItems[i].itemname, dateString, listItems[i].itemdesc, important, listItems[i].done ]
        };
        var query = client.query(prepStatement);
        queryCount++;
        console.log("Adding item " + i);
        query.on('error', function(error) {
            console.log(error);
        });
        query.on('end', function(result) {
           queryCount--;
           console.log("Query ended");
           if (result) {
               console.log("Added listitem no " + result.rows[0].listitem_id);
           } 
           if (queryCount === 0) {
             client.end();
             handle(listId);
           }
        });
    }
} 
```

以上所做的就是跟踪您发出的查询数量以及它们何时全部结束，然后调用 client.end() 和 handle(listId);

这可能很乏味且容易出错，因此存在一些库来简化 asyc 流程。我最喜欢的是异步，它可以在浏览器和节点中运行。 [https://github.com/caolan/async](https://github.com/caolan/async)

使用异步，我会将代码重写为：

```
function addItems(listId, listItems, handle) {
    if (!listItems) {
        handle(listId);
        return;
    }
    var client = dbConnector.getClient(),
        important,
        dateArray,
        dateString,
        i, 
        prepStatement;
    client.connect();

    async.forEach(
      listItems,
      // called for each listItems
      function(listItem, callback){
        console.log(listItem);
        dateArray = listItem.itemdate.split('-');
        dateString = dateArray[1] + '-' + dateArray[0] + '-' + dateArray[2];
        if (listItem.important) {
            important = 'true';
        } else {
            important = 'false';
        }
        prepStatement = {
            name: 'insert task',
            text: 'INSERT INTO listitem (todolist_id, name, deadline, description, important, done, created) VALUES ($1, $2, $3, $4, $5, $6, now()) RETURNING listitem_id',
            values: [ listId, listItem.itemname, dateString, listItem.itemdesc, important, listItem.done ]
        };
        var query = client.query(prepStatement);
        //console.log("Adding item " + i);
        query.on('error', function(error) {
            console.log(error);
            callback(error),
        });
        query.on('end', function(result) {
           console.log("Query ended");
           if (result) {
               console.log("Added listitem no " + result.rows[0].listitem_id);
           } 
           callback(null,result);
        });
      }, 
      // called after iterator function
      function(err) {
        if (err) return; // could use this as an err handler for all queries              
        client.end();
        handle(listId);
      }
    );
}; 
```

另请参阅 async.forEachSeries，但我认为在这种情况下不需要它，因为 node-postgres 客户端无论如何都会连续运行查询。

# mysql - Mysql - 对我的业务逻辑有一点帮助

> ID：10502127
> 
> 赞同：0
> 
> 时间：2012-05-08T15:58:30.253
> 
> 标签：mysql

我在 eshop 中有一张产品表（`id`, `stock`, `availability`,....），到目前为止，我的业务逻辑是：

产品在以下情况下可用：

*   如果可用性=0 并且库存>0
*   如果可用性>0 并且库存>=0

我使用可用性来通知客户购买后将发货的天数，我设置可用性 = 0 以确定产品仅在库存 > 0 时可用。这样，当我设置可用性 = 0 和库存时=0 产品将因此变得不可用。

我不确定是否

```
select * from product where (availability=0 and stock>0) or (availability>0 and stock>=0) 
```

会起作用的，这似乎很简单。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:02:14.960

在您的情况下使用它：

```
select *from products where availability>=0 and stock>0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:02:22.707

您可以通过组合它们来简化这一点，因为两者都在检查 stock>0

```
Select * from product where stock>0; 
```

这是因为只要库存 > 0，可用性几乎无关紧要。当您指定的 stock = 0 时它仍然不可用，但是您说它应该在可用性 = 0 和 >0 时可见，只要 stock > 0。假设您没有使可用性 <0 您不需要将其包含在您的查询中。

# ios - 有全球感动事件吗？

> ID：10502134
> 
> 赞同：0
> 
> 时间：2012-05-08T15:58:51.687
> 
> 标签：ios, ios5, xamarin.ios

有没有办法收听全局触摸事件？我想在触摸屏幕时收到通知。现在我正在覆盖我的视图上的 TouchesBegan，但它似乎没有冒泡。即，如果我触摸按钮或键盘，则永远不会调用该方法。也许通过使用 NSNotificationCenter 或类似的东西。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T20:12:37.783

我在[这里](https://stackoverflow.com/questions/9251174/detect-if-the-user-has-touched-the-screen/9293321#9293321)发布了一些可能有帮助的代码。但是该代码与 OP 的代码混合在一起，所以这是一个干净的版本。

您可以做的是子类 UIWindow 并将其作为其窗口传递给应用程序委托。

代码看起来像：

**MyKindOfWindow.h**

```
#import <UIKit/UIKit.h>

@protocol MyKindOfWindowDelegate;

@interface MyKindOfWindow : UIWindow

@property (assign) id <MyKindOfWindowDelegate> touchDelegate;

@end

@protocol MyKindOfWindowDelegate <NSObject>

@required
- (void) windowTouch:(UIEvent *)event;
@end 
```

**MyKindOfWindow.m**

```
#import "MyKindOfWindow.h"

@implementation MyKindOfWindow

@synthesize touchDelegate = _touchDelegate;

- (id)initWithFrame:(CGRect)aRect
{
    if ((self = [super initWithFrame:aRect])) {

        _touchDelegate = nil;
    }
    return self;
}

- (void)sendEvent:(UIEvent *)event
{
    [super sendEvent: event];

    if (event.type == UIEventTypeTouches)
        [_touchDelegate windowTouch:event]; 
}

@end 
```

您`AppDelegate`当然需要遵循`MyKindOfWindowDelegate`协议（实施`- (void) windowTouch:(UIEvent *)event`方法）。

`didFinishLaunchingWithOptions:`看起来像：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[MyKindOfWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [(MyKindOfWindow *)self.window setTouchDelegate:self];  //!!make your AppDelegate a delegate of self.window

    //this part of code might be different for your needs
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:40:28.080

> 现在我正在覆盖我的视图上的 TouchesBegan，但它似乎没有冒泡。

你是对的——从视图层次结构（即窗口）的根视图开始传递触摸，并在视图层次结构中向下进行，直到找到被触摸的视图。看看 UIView 的`-hitTest:withEvent:`方法。从窗口开始，调用该方法以查找命中的子视图，然后在子视图上调用相同的方法，依此类推。

# django - Django Queryset 到 dict 以在 json 中使用

> ID：10502135
> 
> 赞同：16
> 
> 时间：2012-05-08T15:58:54.007
> 
> 标签：django

我有以下查询集：

```
prices = Price.objects.filter(product=product).values_list('price', 'valid_from') 
```

我怎样才能得到“json”的价格

```
{"aaData": [
    ["70.1700", "2007-01-01"], # price, valid_form
    ["72.6500", "2008-01-01"], # price, valid_form
    ["74.5500", "2009-01-01"], # price, valid_form
    ["76.6500", "2010-01-01"]
]} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-08T17:03:26.607

更好的方法是使用[DjangoJSONEncoder](https://github.com/django/django/blob/master/django/core/serializers/json.py "DjangoJSON编码器")。它支持`Decimal`.

```
import json
from django.core.serializers.json import DjangoJSONEncoder

prices = Price.objects.filter(product=product).values_list('price', 'valid_from')

prices_json = json.dumps(list(prices), cls=DjangoJSONEncoder) 
```

非常容易使用。无需为将单个字段转换为`float`.

**更新**：将答案更改为使用内置 json 而不是 simplejson。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:09:12.953

```
from django.utils import simplejson

prices = Price.objects.filter(product=product).values_list('price', 'valid_from')
simplejson.dumps({'aaData': prices}) 
```

**编辑**

从您的问题中不清楚这`price`是一个`DecimalField`. 看起来您需要从转换`Decimal`为`float`：

```
simplejson.dumps({'aaData': (float(price), valid_from) for price, valid_from in prices}) 
```

或者，如果您希望价格为字符串：

```
simplejson.dumps({'aaData': (str(price), valid_from) for price, valid_from in prices}) 
```

# mod-rewrite - mod_rewrite 维护“更改的 URI”

> ID：10502146
> 
> 赞同：0
> 
> 时间：2012-05-08T15:59:10.590
> 
> 标签：mod-rewrite

我有一个 RewriteRule 可以成功地将我重定向到相应的页面。问题是，当我将鼠标悬停在重定向页面上的链接上时，此页面上任何链接的 URL 已更改如下：

正确链接：[http://www.mysitelcom/newClients.php](http://www.mysitelcom/newClients.php)

RewriteRule 之后的链接：[http](http://www.mysite.com/samples/article-title-goes-here/23/newClients.php) ://www.mysite.com/samples/article-title-goes-here/23/newClients.php 它已经为下一个文件请求添加了“前缀”samples/article-title-goes-here/23 / 这是我的 RewriteRule 的模式部分。

我的 .htaccess 文件是：

```
# Use PHP5 Single php.ini as default
AddHandler application/x-httpd-php5s .
RewriteEngine on
RewriteBase /
# Do not do anything for already existing files and folders
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^sample/([a-zA-Z0-9-]+)/([0-9]+)$ sample.php?id=$2 [L] 
```

谁能帮我理解我错过了什么？不知何故，我必须“重置”我的 URI，以便它不会“改变”下一个请求的文件名。谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:16:23.300

至于我，我发现，对于我的引擎中的链接和路径来说，这是一个很好的解决方案，它总是可以正常工作，使用这样的：

在我的 settings.php 中定义的全局变量

```
<?php
    $path_server = 'htdocs/mysite';  # server path for including files
    $path_www = 'http://mysite.com'; # path to use in links
?> 
```

所以在我的模板中（它们与settings.php在同一个范围内）我写

```
<?php include "{$path_server}/menu.php"; ?>
<a href='<?php echo $path_www; ?>/link1.html'>link1</a> 
```

# java - 使用 Map Key 从 Java Map 中检索对象值

> ID：10502157
> 
> 赞同：1
> 
> 时间：2012-05-08T15:59:51.813
> 
> 标签：java

我试图通过构建一个包含用户名作为键和用户对象作为值的映射来同步到用户列表。构建地图后，我在检索对象值时遇到了困难。下面是我正在使用的代码。

```
private Map<String, User> map = new HashMap<String, User>(); 
```

我正在填充地图键和对象，如下所示。

```
 List<User> users = session.createCriteria(User.class).list();

        for(ApplicationUser user : users) {
            map.put(user.getUserName(), user);
        } 
```

我正在尝试按以下方式检索数据，

```
 List<Person> persons = session.createCriteria(Person.class).list();
        for (Person p : persons) {
            User user = map.containsKey(p.getUsername()) ? map.get(p.getUsername()) : new User();
            //Email is always null. 
            System.out.println(user.getEmail());
        } 
```

有人可以帮我指出如何从我的地图中检索对象值的正确方向。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:05:30.980

首先，您应该将循环更改为：

```
 for (Person p : persons) {
        String username = p.getUsername();
        User user = map.get(username);
        if (user != null) {
           System.out.println(user.getEmail());
        } else {
          System.out.println("User " + username + " is unknown");
        }
    } 
```

然后在循环中设置断点并调试您的代码。到目前为止它看起来是正确的。也许您只是没有设置`email`，`User`或者来自的用户`persons`不在您的`map`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:16:47.560

似乎 email 为空，因为您没有在 User() 的默认构造函数中初始化电子邮件，该构造函数在此处执行：

> 用户用户 = map.containsKey(p.getUsername()) ？map.get(p.getUsername()) : 新用户();

在这里，我认为您在地图中输入的用户名与您在代码的第二部分中尝试检索的用户名不匹配。IE 。map.containsKey(p.getUsername()) 似乎返回 false 并且默认构造函数被调用，电子邮件为 null 。

尝试打印（或调试检查）地图 keyset() 和人员用户名，并检查它们是否完全匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T16:24:30.853

@George我认为如果用户不属于人，你会得到一个空指针异常。

```
 System.out.println(user.getEmail()); 
```

当条件为假时 User user = new User(); user.getEmail() 为空

# security - 为什么签名需要证书而不仅仅是私钥/公钥对？

> ID：10502158
> 
> 赞同：3
> 
> 时间：2012-05-08T16:00:06.280
> 
> 标签：security, certificate, x509certificate

新手问题：一些供应商提出了诸如生成动态证书的解决方案，以允许没有经典证书的用户签署文件。但是为什么不单独生成私钥/公钥而不是证书格式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:21:29.327

（公钥）证书的目的是将公钥绑定到其主体的身份（即与密钥对关联的所有者/实体），以及可能告诉您证书可用于什么的各种属性。（您可能[对 Security.SE 上的这个问题](https://security.stackexchange.com/a/14486/2435)感兴趣。）

您始终使用私钥（不是公钥或证书）进行签名，但公钥或证书通常附在签名文档中。

如果您有一个明确的已知公钥列表并且可以独立链接到用户，则不需要证书。

证书允许第三方（已签署证书）断言标识符和公钥之间的绑定。即使您事先不知道该身份，您也可以将签名链接到签名者的身份，只要您信任签署证书的实体即可。

在这种情况下，动态生成的证书可能不是很有用，除非您信任动态生成证书的一方（我不确定您是指工具本身还是您也知道的网站）。

通常，X.509 证书将仅用于附加到该签名，因为工具需要它，而您可以将公钥与您在验证签名的工具中直接知道的身份进行匹配。有时，它也只是在预期有一天会有用的情况下完成的。

例如，如果您将自己的工件发布到中央 Maven 存储库，则需要使用您的 PGP 证书（通常仅称为 PGP 公钥）对其进行签名。然而，在此过程中根本没有对证书进行验证（仅具有自签名签名的 PGP 证书就足够了）。这使得这个过程在这种情况下相对没有意义，但是如果您以后能够验证这些证书，则可以更严格地使用您想要使用的工件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:04:36.427

相同，但您需要第三方同意私钥属于您认为属于的任何人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:22:39.103

签名首先证明了某人对文件的署名（或批准）。单独的钥匙并不能证明任何事情。这就是证书所需要的 - 一些证书颁发机构签署用户的证书并证明密钥对属于颁发证书的个人（或法人实体）。文档的阅读者不仅可以通过计算签名本身，还可以通过验证证书并查看证书所有者的姓名来确保签名有效。

我不太明白哪些供应商可以动态颁发证书 - 以非自签名的方式颁发证书（并且自签名证书在文档签名的上下文中几乎没有意义）需要用于签名的私钥证书，应该嵌入到这些供应商的软件中，因此它也容易被滥用。

# java - 如何从 Java 中的 ArrayList 中删除对象？

> ID：10502164
> 
> 赞同：7
> 
> 时间：2012-05-08T16:00:22.597
> 
> 标签：java, arraylist

我有一个`ArrayList`包含一些对象的对象，例如`User`，并且每个对象都有一个`name`and`password`属性。如何从中仅删除`User`具有特定“名称”的对象`ArrayList`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T16:03:43.153

```
Iterator<User> it = list.iterator();
while (it.hasNext()) {
  User user = it.next();
  if (user.getName().equals("John Doe")) {
    it.remove();
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T16:33:21.263

另一个想法：如果`User`类可以由用户名唯一定义，并且如果您使用以下内容覆盖`equals`：

```
public boolean equals(Object arg0) {
    return this.name.equals(((user) arg0).name);
} 
```

您可以在`User`不遍历列表的情况下删除 。你可以这样做：

```
 list.remove(new User("John Doe")) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-07T11:43:33.627

你可以使用这样的东西：

```
 // If you are using java 8
           userList.removeIf(user-> user.getName().equals("yourUserName"));
           // With older version
           User userToRemove = null;
           for(User usr:userList) {
             if(usr.getName().equals("yourUserName")) {
                userToRemove = usr;
                break;
             }
           }
           userList.remove(userToRemove); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-05T07:35:00.380

您可能会`ConcurrentModificationException`在尝试从`List`. 对此异常的解释是 的迭代器`ArrayList`是一个快速失败的迭代器。例如，当它检测到它在运行时的集合被修改时，它会抛出异常（失败）。这个问题的解决方案是使用`Iterator`.

`List`这是一个简单的示例，演示了如何在满足特定条件时遍历并删除元素：

```
List<User> list = new ...

for (Iterator<User> it = list.iterator(); it.hasNext(); ) {

    User user = it.next();
    if (user.getUserEmail().equals(currentUser.getUserEmail())) {
       it.remove();
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-19T11:07:30.053

解决此问题的推荐方法是：

```
ArrayList<User> list = new ArrayList<User>();
list.add(new User("user1","password1"));
list.add(new User("user2","password2"));
list.add(new User("user3","password3"));
list.add(new User("user4","password4"));
Iterator<String> iter = list.iterator();
while (iter.hasNext()) 
{
    User user = iter.next();
    if(user.name.equals("user1"))
    {
        //Use iterator to remove this User object.
        iter.remove();
    }
} 
```

使用 Iterator 删除对象比仅通过键入删除对象更有效，`ArrayList(Object)` 因为它更快，节省 20% 的时间，并且是 Java 集合的标准 Java 实践。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-08T16:03:07.497

你可以：

*   使用迭代器循环列表
*   检查列表中的每个项目是否都是正确的用户（检查名称）
*   如果是，请使用迭代器的 remove 方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-08T16:02:53.027

只需搜索您从用户那里获得的对象的 ArrayList，并测试与您要删除的名称相同的名称。然后从列表中删除该对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T16:06:23.687

你的代码可能是这样的：</p>

```
List<User> users = new ArrayList<User>();

public void removeUser(String name){
    for(User user:users){
        if(user.name.equals(name)){
            users.remove(user);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-12-29T05:36:04.443

```
ArrayList<User> userList=new ArrayList<>();
//load data

public void removeUser(String userName){
    for (User user: userList){
        if(user.getName()equals(userName)){
            userList.remove(user);
        }
    }
} 
```

# matlab - 给定一组数据点，找到“最接近”的数据点

> ID：10502166
> 
> 赞同：0
> 
> 时间：2012-05-08T16:00:26.573
> 
> 标签：matlab, euclidean-distance

所以我们有一个 3D 点的参考集（我们称之为 R），以及许多其他 3D 点集（我们称该组数据点集为 P，以及该 Pi 中的每个数据集）。

任务是返回使某些 Pi 和 R 中的数据点的欧几里得距离最小化的 Pi。我看到它的方式是这样的：

1.  对于 Pi 中的每个点，与 R 中的每个点进行比较，并找到两点之间的最小差异。
2.  将这些最小距离相加以达到 Pi 和 R 之间的最小总“差”。
3.  答案 Pi 是差异最小的那个。

但这太疯狂了，因为这实际上意味着查看 R 中的每个点与 P 中的每个点之间的距离，可能是数千或数百万。当然，我可以做得更好。

我在 Matlab 工作，我不习惯。

有什么更好的算法可以使用？是否有适合此的数据结构？（例如KD树？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:46:16.210

除非你有如此多的点以至于这真的成为一个性能问题，否则比较每个点确实是最简单的解决方案，特别是因为这些操作可以在 Matlab 中高度矢量化。

例如：

```
R = [1 2 3; 1 3 4];
P{1} = [2 3 5;1 1 2;2 1 3];
P{2} = [4 4 4];

nP = length(P);
sumMinDist = zeros(nP,1);

%# make R into n-by-1-by-3 already
Rperm = permute(R,[1 3 2]);

for iP = 1:nP

%# since we want to sum up the minima, we need to take the square root
allDist = sqrt( sum( bsxfun(@minus, Rperm, permute(P{iP},[3 1 2])).^2, 3));

%# sum the minima (you may want to consider
%# taking the mean instead!)
sumMinDist(iP) = sum(min(allDist,[],1));

end

%# now we can identify the closest set
[~,idxOfClosestSet] = min(sumMinDist); 
```

# wpf - 多重绑定不适用于 TextBox.Text

> ID：10502171
> 
> 赞同：1
> 
> 时间：2012-05-08T16:00:41.890
> 
> 标签：wpf, xaml, multibinding

我有一个不适用于 TextBox.Text 的 MultiBinding。我有相同的代码正确绑定到[扩展 WPF Toolkit](http://wpftoolkit.codeplex.com/)的 IntegerUpDown 的值。

它正在通过一个 IMultiValueConverter，它接受绑定的 POCO 和它所属的列表框（它显示列表框中项目的顺序）

这是代码：

```
<!--works-->
<wpf:IntegerUpDown ValueChanged="orderChanged" x:Name="tripOrder">
    <wpf:IntegerUpDown.Value>
        <MultiBinding Converter="{StaticResource listBoxIndexConverter}" Mode="OneWay">
            <Binding />
            <Binding ElementName="listTrips" />
        </MultiBinding>
    </wpf:IntegerUpDown.Value>
</wpf:IntegerUpDown>
<!--doesn't work-->
<TextBox x:Name="tripOrder2">
    <TextBox.Text>
        <MultiBinding Converter="{StaticResource listBoxIndexConverter}" Mode="OneWay">
            <Binding />
            <Binding ElementName="listTrips" />
        </MultiBinding>
    </TextBox.Text>
</TextBox> 
```

结果如下：

![结果](../Images/93ba344cc4ce8175cdeaab02d96450ac.png)

我不认为这是相关的，但以防万一，这里是执行转换的类：

```
 public class ListBoxIndexConverter : IMultiValueConverter
    {

    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var trip = values[0] as TripBase;

        if (trip == null)
        {
            return null;
        }

        var lb = values[1] as CheckListBox;
        if (lb == null)
        {
            return null;
        }

        //make it 1 based
        return lb.Items.IndexOf(trip) + 1;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:39:07.357

转换器应返回属性期望的类型。原因是在属性的常规使用中（即没有`Binding`），属性可能具有从一种（或多种）类型转换为属性所需类型的类型转换器。例如，当你写：

```
<ColumnDefinition Width="Auto"/> 
```

有一个转换器可以将字符串“Auto”转换为：

```
new GridLength(1, GridUnitType.Auto) 
```

使用绑定时，会绕过此机制，因为转换器应该返回正确的类型。

因此，为了解决您的问题，在您的转换器返回时：

```
return (lb.Items.IndexOf(trip) + 1).ToString(); 
```

这应该修复`TextBox`.

现在，对于`IntegerUpDown`. 听起来它实际上希望接收一个`int`并返回一个字符串会破坏它。因此，再次更改转换器的返回：

```
if (targetType == typeof(int))
{
    return lb.Items.IndexOf(trip) + 1;
}
else if (targetType == typeof(string))
{
    return (lb.Items.IndexOf(trip) + 1).ToString();
}
else
{
    throw new NotImplementedException(String.Format("Can not convert to type {0}", targetType.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:05:45.367

绑定不起作用，因为`listTrips`当列表框的选定值更改时，绑定不会更改。改变的是`listTrips.SelectedItem`，所以你应该绑定它：

```
<Binding Path="SelectedItem" ElementName="listTrips"/> 
```

实际上，我想知道为什么它适用于第一个示例。

# bash - 如何在bash中传播输入重定向的非零退出代码？

> ID：10502174
> 
> 赞同：1
> 
> 时间：2012-05-08T16:01:00.913
> 
> 标签：bash, redirect, exit-code

我知道用于传播管道退出代码的“set -o pipefail”。但是，我想为输入重定向做类似的事情。具体来说，我希望这种情况发生：

```
$ cat <(echo abc; exit 1) 
abc
$ echo $?
1 
```

当前行为是最后一行是“0”而不是“1”。

我该如何做到这一点？不，我不能使用管道。我给出的例子只是一个简化的测试用例。在实践中，我从多个来源获取输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:30:30.537

我有一个使用@Lars建议的临时文件的示例：

```
tmp=`mktemp`; sort -mk1 <(zcat 1.gz || rm -f $tmp) <(zcat 2.gz || rm -f $tmp) && rm $tmp 
```

如果排序且两个 zcat 成功，则返回代码将为“成功”（零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:14:22.397

恐怕你不能用输入重定向来做到这一点。也许有提供输入的进程将其退出状态写入文件并稍后检查？

# boost - 如果我修改 `boost\format\alt_sstream_impl.hpp`，是否必须重新编译 boost 库

> ID：10502178
> 
> 赞同：0
> 
> 时间：2012-05-08T16:01:19.930
> 
> 标签：boost

我需要修改boost库中的以下文件 `c:\boost\vs2010_boost1.49\include\boost\format\alt_sstream_impl.hpp`

基于[文档](http://www.boost.org/doc/libs/1_35_0/more/getting_started/windows.html)

唯一必须单独构建的 Boost 库是：

```
Boost.Filesystem
Boost.IOStreams
Boost.ProgramOptions
Boost.Python (see the Boost.Python build documentation before building and installing it)
Boost.Regex
Boost.Serialization
Boost.Signals
Boost.Thread
Boost.Wave 
```

问题> alt_sstream_impl.hpp 是其中之一吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:54:30.890

在我看来（查看 1.49 版本）“alt_sstream_impl.hpp”是 Boost.Format 库的一部分，因此，您不需要重建您的 boost 库。

有可能（但不太可能）其中一个必须重建的库使用 Boost.Format，但我没有看到任何证据。

# ios - iOS CGContext在for循环cocos2d中绘制折线图

> ID：10502180
> 
> 赞同：0
> 
> 时间：2012-05-08T16:01:38.187
> 
> 标签：ios, cocos2d-iphone, cgcontext

我有一个 for 循环，在 for 循环中我执行以下操作，这会在我的图表背景上创建一个折线图，但是即使数据不同，它也会在每个背景上显示完全相同的线条图像。

```
UIGraphicsBeginImageContext(test.size);

CGContextRef c = UIGraphicsGetCurrentContext();
CGContextFlush(c);

CGContextSetAllowsAntialiasing(c, true);

CGContextTranslateCTM(c, 0, test.size.height);
CGContextScaleCTM(c, 1.0, -1.0);

CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

CGFloat components[] = {0.0, 0.0, 1.0, 1.0};

CGColorRef color = CGColorCreate(colorspace, components);

CGContextSetStrokeColorWithColor(c, color);

CGContextMoveToPoint(c, 0, 0);

      if(maxPoints > 0)
      {
          float xSpacing = (float)330.0f/(float)[allScorePointsSubset count];
          int currentPoint;
          float currentX;
          float currentY;

             for (int j = 0; j < [allScorePointsSubset count]; j++) 
             {
                NSString *currentPointString = [allScorePointsSubset objectAtIndex:j];
                currentPoint = (int)[currentPointString intValue];

                if(currentPoint < 0)
                  currentPoint = 0;

                currentX = (j+1)*xSpacing;
                currentY = currentPoint / 100.0f * 200.0f;

                CGContextAddLineToPoint(c, (int)currentX, (int)currentY);

              }

      }

  CGContextStrokePath(c);
  CGColorSpaceRelease(colorspace);
  CGColorRelease(color);

  UIImage *graphImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  CCSprite* answerMenuNormalSprite = [CCSprite spriteWithCGImage:graphImage.CGImage key:   [NSString stringWithFormat:@"answerMenuNormalSprite_%f", i]];
            [answerMenuNormalSprite setPosition:ccp(176,66)];

  [[background objectAtIndex:0] addChild:answerMenuNormalSprite z:0 tag:i]; 
```

有没有人知道我做错了什么，这是否必须采用以下方法

```
-(void)draw
{
   [super draw];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:09:45.557

事实证明，我的计数器没有正确递增，问题只是没有在以下行中为图像提供唯一键

```
CCSprite* answerMenuNormalSprite = [CCSprite spriteWithCGImage:graphImage.CGImage key:   [NSString stringWithFormat:@"answerMenuNormalSprite_%f", i]]; 
```

# jquery - div关闭时重置表单和错误jquery

> ID：10502186
> 
> 赞同：0
> 
> 时间：2012-05-08T16:02:13.017
> 
> 标签：jquery, ajax, django, forms, reset

我有一个弹出 div，其中包含一个表单，当关闭时我希望表单重置错误和表单中的字段。我正计划在 disablePopup 函数中重置表单。其他需要注意的是它是一个 django 项目，我正在使用 ajax 提交表单。

这是到目前为止的代码：

```
function disablePopup($contact_selector){
    //disables popup only if it is enabled
    if(popupStatus==1){
        $("#backgroundPopup").fadeOut("fast");
        $contact_selector.fadeOut("fast");
        popupStatus = 0;
    }
} 
```

所以基本上我想扩展此代码以允许我在 contact_selector 中重置表单

任何想法将不胜感激

谢谢你

凯蒂

编辑：我认为正在发生的事情是我的 django 错误列表出现在 html 中，并且与表单验证分开。我想做的是在我关闭 div 时为我的 django 项目初始化一个新表单 - 而不仅仅是重置我拥有的表单。这样，当再次打开表单时，数据是干净的，没有最后一个条目的剩菜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:44:49.353

我最终使用了以下代码：

```
$("#backgroundPopup").click(function(){  
disablePopup($('.popup'));  
    var validator = $("#createrecipeform").validate();
    validator.resetForm();
    console.log(validator);
    $('#createrecipeform').each (function(){
  this.reset();
  });
    $('.errorlist').empty();
}); 
```

# asp.net-mvc - 在 MVC3 和 MVC4 中动态编辑视图模型元数据的策略或模式

> ID：10502188
> 
> 赞同：0
> 
> 时间：2012-05-08T16:02:17.273
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在将死记硬背的视图生成委托给运行时和丰富的视图模型。这种远离更丰富的 Razor 视图的动态编译的缺点是需要频繁重建才能使用小的视图模型更改。

与视图模型上的旧 POCO 数据注释属性相比，我有什么选择可以让视图模型/元数据会议更动态？最明显的是一个完整的自定义元数据提供程序，它从文件或数据库中获取模型元数据，但我问这个问题是为了获得其他方法的一些想法。也许是动态编译的 POCO 或脚本引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:03:28.013

视图模型的全部目的是创建一个强类型模型。你想做的事情不能用强类型来完成，所以使用视图模型是没有意义的。

要么忍受重新编译，要么使用 ViewData 来处理您的数据。

我有点不确定您打算如何在不重新编译的情况下更改视图模型。您的控制器需要了解 ViewModel，如果它发生更改，它将引发运行时异常。

# cordova - 出现错误提示“使用已使用的 id (`form1`) 注册组件”

> ID：10502190
> 
> 赞同：2
> 
> 时间：2012-05-08T16:02:27.380
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

当我单击同一个按钮超过 1 次时，我收到此错误。这意味着什么，我应该怎么做才能防止它；

```
[WARN] [WARN][Ext.Component#constructor] Registering a component with a id (`form1`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`.
2012-05-08 21:29:56.869 ProjectSeal[870:fb03] [WARN] [WARN][Ext.Component#constructor] Registering a component with a id (`new-note-btn1`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. 
```

根据错误/警告，我`destroy`该如何组件？

**更新**

```
Ext.define('app.view.Contact',{
           extend:'Ext.form.Panel',
           xtype:'contactform',
           id: 'form1',
.... 
```

我如何让 Sencha 将 id 添加到我的代码中？

**更新**

> [WARN] [DEPRECATE][Anonymous] itemId 被直接作为组件上的属性弃用。请将其放在配置对象中，并使用“this.config.itemId”检索它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:43:35.287

当用户单击按钮时，您很可能会创建一个窗口或表单对象。在创建过程中，您似乎正在`id`为该组件分配硬编码。

您需要确保先前使用的表单已销毁（`closeAction`例如检查属性）或不要`id`自己分配属性并让 Sencha 执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T09:55:07.103

[WARN] [DEPRECATE][Anonymous] itemId 被直接作为组件上的属性弃用。请将其放在配置对象中，并使用“this.config.itemId”检索它

将 itemId 放在配置中。

例如：

```
config: {

    itemId: 'form1',

    // other config options

} 
```

# xcode - XCode中的矩形光标键盘

> ID：10502194
> 
> 赞同：1
> 
> 时间：2012-05-08T16:02:36.150
> 
> 标签：xcode, macos, osx-lion, xcode4.3

我在 Xcode 中有一个有趣的奇怪错误。我找不到信息，也无法修复。发生了什么。有一天我进入办公室，并在 XCode 中启动了项目（我不记得操作的顺序），在编辑文本时，我看到了一个闪烁的白色矩形，而不是标准的键盘光标。该矩形类似于操作系统 DOS 中的光标。我无法关闭它。这个问题困扰了我第二天。

截屏![在此处输入图像描述](../Images/7835a2c04087b1108235fb87343df43a.png)

按钮 H、J、K、L 在文本中执行光标。退格键不起作用。后来，敲了几下键，一切都变得正常了，光标变成了标准。几秒钟后，光标又变黑了，一切继续这个方案。

附加信息：

*   Mac mini 2011，OS Mac OSX Lion 10.7.3，XCode 4.3；
*   该问题仅出现在 XCode 中；
*   所有项目都会出现问题；
*   我没有更改系统设置或 XCode；
*   这不是文本选择。如果按住鼠标左键，则光标左侧出现矩形，正常状态下，光标显示在右侧；
*   XCode重新安装了几次，重新启动计算机；
*   删除文件夹~Library/Developer/和~/System/Library/Developer文件夹中的所有数据；
*   连接其他鼠标和键盘；
*   我正在寻找有关 google 和 stackoverflow 的信息。

谢谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:40:45.423

我解决了这个问题。删除了 XCode。然后我使用“Find Any File”程序搜索包含“xcode”标题的文件，并删除了所有找到的文件。然后重新安装XCode，问题就消失了。

我试图找到设置在哪里 XCode 但没有找到这样的信息，所以删除所有标题中包含“xcode”的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:17:21.983

这发生在我身上，我发现我已经安装了[xVim](https://github.com/WarWithinMe/xVim)并且没有注意到它，因为更改直到重新启动 Xcode 后才会生效。我删除了插件`~/Library/Application Support/Developer/Shared/Xcode/Plug-ins`以解决问题。

# loops - Pymongo 迭代安全的保存和计数

> ID：10502196
> 
> 赞同：0
> 
> 时间：2012-05-08T16:02:44.137
> 
> 标签：loops, insert, count, pymongo

我试图从对象集合中挑选出独特的元素，然后将它们保存到子集合中。

我的代码是：

```
for item in db.col1.find({'Summary': {'$ne':{}}}):
    current_specs = item['Summary']['Specs']
    if not db.col1.specs.find({'Specs':current_specs}).count():
        db.col1.specs.save({'Specs':current_specs, 'Updated': datetime.datetime.now()},safe=True) 
```

这会在 db.col1.specs 中产生重复的条目。我认为通过使用 safe=True，它可以确保写入已完成，因此不会添加重复项，但似乎并非如此。

谁能解释为什么这会失败以及正确的做法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:10:41.783

弄清楚了：

item['Summary']['Specs'] 条目本身就是一个字典，要搜索字典，您必须搜索每个单独的字典条目

例如，如果对象看起来像：

```
current_specs = {'field1': something, 'field2': something_else} 
```

然后我们可以通过以下方式找到它：

```
find({'Specs.field1':current_specs[field1], 'Specs.field2': current_specs[field2]}) 
```

你不能只使用：

```
find({'Specs':current_specs}) 
```

# php - PHP 图表库 VS JavaScript 图表库

> ID：10502202
> 
> 赞同：5
> 
> 时间：2012-05-08T16:03:09.387
> 
> 标签：php, javascript

我只是在 PHP 图表库和 JavaScript 图表库之间做出选择时有点卡住了。我确实了解服务器端的 PHP 和客户端的 Javascript。我的问题是使用他们的图表库时有什么不同。是性能问题还是什么？

我想了解使用 PHP 图表库和 JavaScript 图表库的区别。请不要寻找他们图表库的示例。我正在寻找为什么我应该选择一个而不是另一个。

我试图用谷歌搜索“php 图表与 javascript 图表”，但没有得到任何可以给我带来差异的链接。

**编辑 1**

1)

如果之前已经回答过这个问题，那么请指出我。

2)

正在开发互联网应用程序

**编辑 2**

1)

我发现了 PHPChart [PHPChart](http://phpchart.net/)，它同时具有 PHP 源代码和 JavaScript 源代码。如果有人在该库方面有经验，它是否可以解决服务器端负载（带宽问题）等问题。我在想，既然它同时具有 PHP 和 JavaScript 源代码，那么它可能是最好的使用。我只是假设。:-)

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:17:43.757

两种创建图表的方式各有利弊。

如果您决定使用 PHP，首先您需要确保安装了所有必需的图形库（例如 GD，它可能并不总是在共享主机上可用）。

假设你有它们，我认为第一件负面的事情是你最终会得到静态图像。当然，这并不总是一件坏事，因为这确保了与所有客户端的兼容性，无论是否支持 javascript，但是，它消除了客户端使用 javascript 生成的图形的动态性。您的用户将无法使用 Highcharts 或 Flot 进行缩放、移动、滑动、全屏或做任何他们可以做的事情。

另一个缺点是图像占用的带宽比 JSON 多。您希望图表越大，它包含的颜色越多，您的客户等待页面加载的时间就越长。仅仅因为这些加载不是异步的，他们将不得不等待图像加载后才能看到页面的其余部分。

有了 javscript 库，一切都不同了。您只请求图表所需的数据，并且仅在页面加载时请求。数据量通常比图像要小，而且您可以使用 GZ 压缩输出以使其更小。用户会看到漂亮的微调器，通知他们正在加载图表，而不是一些不完整的网页。

要考虑的另一件事是 - 如果您决定在每个图表下方显示一个包含数据的漂亮表格怎么办？如果您选择在服务器上渲染图像，您最终将不得不添加新功能来获取数据。然而，使用 JSON，您只需进行一次调用、呈现图形并显示表格。也许计算总数或用它做任何你想做的事情。毕竟，如果您愿意，可以将其作为 API 分发给人们 :)

如果你问我，我肯定会使用客户端图表，因为现在大多数设备都支持 HTML5，并且能够在 Android 手机、iPhone 或 iPad 上显示图表应该不成问题。如果您只需要图像并且不希望公开原始数据，请使用 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:08:43.430

这是我看到的：

**使用 PHP**

*   增加请求的服务器负载
*   将在任何地方工作
*   另外，就像有人在这里说的让我想到的那样，您可以缓存 PHP 给您的图像，减少带宽（没有要下载的库）并减少负载（缓存）

**使用 Javascript**

*   减少负载但增加带宽和添加http请求（加载JS库）
*   可以在 JS 可用的地方工作

但请记住，PHP 比 HTTP 请求承担更多负载。

另外，**请永远记住**，Javascript 是为您需要显示的效果和特殊内容而设计的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:11:33.817

我的观点是，拥有服务器端解决方案（即 php）可以消除您在使用客户端解决方案（即 javascript）时可能遇到的任何浏览器兼容性问题，从而解决支持问题。

使用 JS 的一个好处是它确实将资源从服务器卸载到客户端，因为您可能只需要生成一些轻量级数据（例如 JSON、XML）并且呈现发生在客户端上。您将不得不调查您的服务器可能会获得多少点击等，以确定资源是否与 PHP 或 JS 一起使用。

但是，使用 Php 创建图表图像，您始终可以通过使用图像文件的缓存并从缓存中提供服务（它只是一个图像文件夹）而不是生成一个新的来解决性能/资源问题。您是否使用缓存将取决于您的使用情况。如果客户端最多需要第二个数据并且它总是在变化，那么显然缓存可能没有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-08T10:03:26.627

没有人告诉过 PHP 渲染的一项优势。由于有时您需要将图表作为图像包含到 PDF、DOC、XLS 等文件中或通过电子邮件发送 - 除了在服务器上渲染图表并将其存储为要插入的图像之外，您别无他法。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-08T16:07:35.380

对于数据操作，您使用**PHP**。
对于视觉和行为效果，您使用**JavaScript**。

出于这个原因，***您应该使用 Javascript***作为其为视觉行为而设计的。此外，它会减少服务器的负载，因为所有处理都将在客户端进行。随着越来越多的人同时使用您的应用程序，它会开始变慢，因为您的服务器将做的比它必须做的更多。

希望有帮助:)

# jquery - 创建一个检查 onload 和 change 的事件

> ID：10502206
> 
> 赞同：1
> 
> 时间：2012-05-08T16:03:14.043
> 
> 标签：jquery

我有这段代码，我想要 a) 在选中复选框时运行。b）在页面加载时运行以查看它需要扩展默认隐藏的部分。

```
$(document).ready(function () {
    $('#hasContractorFlag').on('change', function () {
        if ($(this).is(':checked')) {
            $('#hasContractor').show();
        } else {
            $('#hasContractor').hide();
        }
    });
}); 
```

我尝试将`load`事件添加到上面，但它没有被触发。

我知道我可以做类似的事情并且它会起作用：

```
$(document).ready(function () {
    noAddress($('#hasContractorFlag'))

    $('#hasContractorFlag').on('change', function () {
        noAddress($(this));
    });

    function noAddress(var field) {
        if ($(field).is(':checked')) {
            $('#hasContractor').show();
        } else {
            $('#hasContractor').hide();
        }
    };
}); 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:09:12.390

如果您`.change();`在准备好的文档中添加方法，它将调用您的方法。

jsFiddle：http: [//jsfiddle.net/UQDaW/5/](http://jsfiddle.net/UQDaW/5/)

```
$(document).ready(function () {
    $('#hasContractorFlag').on('change', function () {
        if ($(this).is(':checked')) {
            $('#hasContractor').show();
        } else {
            $('#hasContractor').hide();
        }
    }).change(); // .change() will execute this method
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:10:23.787

我通常通过将 a 链接`trigger('change')`到 change 事件的创建来实现这一点

```
$(document).ready(function () {
    $('#hasContractorFlag').on('change', function () {
        if ($(this).is(':checked')) {
            $('#hasContractor').show();
        } else {
            $('#hasContractor').hide();
        }
    }).trigger('change');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:06:10.647

你可以试试这个：

```
function noAddress(field) {
  field.is(':checked') ? $('#hasContractor').show() :  $('#hasContractor').hide();
}; 
```

全部一起：

```
$(document).ready(function() {
    $('#hasContractorFlag').on('change load', function() {
        noAddress($(this));
    });
    function noAddress(field) {
        field.is(':checked') ? $('#hasContractor').show() : $('#hasContractor').hide();
    }
}); 
```

[演示](http://jsfiddle.net/QStkd/20/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:07:26.603

```
$(document).ready(function () {
    $('#hasContractorFlag').on('change', function () {
        $('#hasContractor')[$(this).is(':checked')?'show':'hide']();
    }).change();
}); 
```

# c - 获取有关信号处理的信息

> ID：10502210
> 
> 赞同：1
> 
> 时间：2012-05-08T16:03:32.153
> 
> 标签：c, unix, signals

我必须编写一个函数来检索有关某些信号处理状态的一些信息。也就是说，如果有特定的处理程序或信号被忽略，则被阻止的信号以及激活的标志。为了做到这一点，我使用`sigaction`函数。这是我的代码：

```
void show_signal_info(int signal_number){
    struct sigaction s;
    int nomask=1;

    if(sigaction(signal_number, NULL, &s) == -1){
        perror("Error getting information of signal");
    }else{
        printf("Signal name: %s\n",signal_name(signal_number));

        printf("Signal mask: ");
        for(i=0; i<32; i++){
            if(sigismember(s.sa_mask,i) == 1)
                printf("%s ",signal_name(i);
        printf("%s",nomask ? "None\n" : "\n");

        if(s.sa_handler == SIG_DFL)
             printf("Default\n");
        else if (s.sa_handler == SIG_IGN)
             printf("Ignored\n");
        else
             printf("Handler\n");

        [...]

    }
} 
```

问题是我不知道如何使用 s.sa_flags 检查哪些标志？有一些宏类似于我可以与`wait()`函数一起使用的宏，还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:06:37.993

> 问题是我不知道如何使用 s.sa_flags 检查哪些标志

您可以测试位，例如：

```
if (s.sa_flags & SA_RESTART)
    .... 
```

# ftp - 为什么我的 FTP 客户端提示我替换尚未传输的文件？

> ID：10502212
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:03:39.353
> 
> 标签：ftp

假设我正在通过 FTP 将网站下载到我的计算机上。在我的 FTP 客户端中，我选择了网站根文件夹中的所有文件和文件夹，然后开始将它们下载到我桌面上的一个空文件夹中。在传输进行到一半时，我被一个提示打断，询问我是否要替换某某文件或文件夹。为什么会这样？

这只是我多年来注意到的事情。当我正在传输数千个文件时，我永远不知道正确的答案是什么。我通常会说“是”，但随后我怀疑副本的完整性。当我下载或上传时，它偶尔会发生。我认为这不是我的 FTP 客户端 (FileZilla) 中的错误，否则它是一个非常非常持久的错误。

编辑：好的，所以我的问题被迅速无情地关闭为题外话。我应该在哪里发布它？可以移到那里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:08:57.010

如果您在本地使用 Windows，而远程使用 linux，则可能会发生这种情况。

由于 linux 允许区分大小写的文件名，而 windows 不允许。您的 FTP 可能有“Images.jpg”、“images.jpg”和“IMAGES.jpg”之类的文件，但是这三个文件都与 windows 相同，因此当其中一个以上时，系统会提示您覆盖它们下载。

# node.js - 一个 node.js 进程可以处理多少个活动流

> ID：10502215
> 
> 赞同：3
> 
> 时间：2012-05-08T16:03:43.720
> 
> 标签：node.js, process, stream

我需要在 node.js 中监视一堆 twitter 流（使用 twitter 的流 API）。哪种方法会“更好”？

*   运行多个进程，每个流 1 个进程
*   运行 1 个处理所有流的进程

在这一点上，我不知道我将拥有多少流，但理想情况下，该设置应该能够扩展到 10000 多个开放流。

编辑以获取更多上下文：大部分或所有处理将由另一台服务器完成。只是希望以可靠、可维护和高性能的方式管理流。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:04:17.070

这个问题的答案很大程度上取决于

1.  推特用户多久发一次推特
2.  你在处理推文时在做什么

特别是，如果推文只是偶尔出现，比如每个用户每 3 分钟以上 1 条推文，那么我认为 1 个节点实例应该可以很好地处理所有这些推文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T23:34:43.353

*   运行单个进程，测量 CPU 负载。如果一个 cpu 不够用，那么运行 CPU cores 一样多的进程，尝试在进程之间平均分配流。

# xamarin.android - Mono for Android 和 BaseExpandableListAdapter 示例

> ID：10502216
> 
> 赞同：3
> 
> 时间：2012-05-08T16:03:45.263
> 
> 标签：xamarin.android

有没有人有将 BaseExpandableListAdapter 与 Mono for Android 一起使用的示例。我正在尝试根据我的一种观点来实现这一点，但是在找到彻底的东西时遇到了问题。谁能提供任何关于他们如何使用 Mono for Android 的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:36:20.150

这是使用自定义可扩展列表适配器的一个公认的粗略但实用的示例。您可以将数据源视为列表列表，因为每个项目都会展开以显示其下方的项目列表。为了表示这一点，我们将使用这个简单的模型：

```
public class Group : Java.Lang.Object
{
    public string Name { get; set; }
    public IList<string> Items { get; set; }
} 
```

使用该模型，您可以创建一个继承自 BaseExpandableListAdapter 并实现所有必需方法/属性的类：

```
public class MyAdapter : BaseExpandableListAdapter
{
    private readonly Context _context;
    private readonly IList<Group> _groups;

    public MyAdapter(Context context, IList<Group> groups)
    {
        _context = context;
        _groups = groups;
    }

    public override Java.Lang.Object GetChild(int groupPosition, int childPosition)
    {
        return _groups[groupPosition].Items[childPosition];
    }

    public override long GetChildId(int groupPosition, int childPosition)
    {
        return (groupPosition * _groups.Count) + childPosition;
    }

    public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
    {
        var view = (TextView)(convertView ?? new TextView(_context));

        view.Text = _groups[groupPosition].Items[childPosition];

        return view;
    }

    public override int GetChildrenCount(int groupPosition)
    {
        return _groups[groupPosition].Items.Count;
    }

    public override Java.Lang.Object GetGroup(int groupPosition)
    {
        return _groups[groupPosition];
    }

    public override long GetGroupId(int groupPosition)
    {
        return groupPosition;
    }

    public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {
        var view = (TextView)(convertView ?? new TextView(_context));

        view.Text = _groups[groupPosition].Name;

        return view;
    }

    public override bool IsChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }

    public override int GroupCount
    {
        get { return _groups.Count; }
    }

    public override bool HasStableIds
    {
        get { return true; }
    }
} 
```

适配器的构造函数接受一个组列表，并使用它来实现请求组、项目等的方法。为了简单起见，对于每个视图，我只是呈现一个 TextView，但您可以创建/为项目膨胀您想要的任何视图。

为了演示这一点，这里有一个示例活动，它将加载一个包含一些数据的可扩展列表：

```
[Activity(Label = "ExpandableListDemo", MainLauncher = true, Icon = "@drawable/icon")]
public class MyExpandableListActivity : ExpandableListActivity
{
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        var groups = new List<Group>
                         {
                             new Group
                                 {
                                     Name = "Group 1",
                                     Items = new List<string> { "Item 1.1", "Item 1.2", "Item 1.3" }
                                 },
                            new Group
                                 {
                                     Name = "Group 2",
                                     Items = new List<string> { "Item 2.1", "Item 2.2", "Item 2.3" }
                                 }
                         };

        var adapter = new MyAdapter(this, groups);

        SetListAdapter(adapter);
    }
} 
```

# c# - 在另一个类中获取属性值

> ID：10502217
> 
> 赞同：0
> 
> 时间：2012-05-08T16:03:55.047
> 
> 标签：c#, visual-studio-2010, workflow-foundation-4

我正在一个项目中获取有关发行人的一些信息。在 MainWindow 活动中，我有这行代码：

```
 builder.AddCustomAttributes(typeof(IssuerActivity), new DesignerAttribute(typeof(IssuerDesigner))); 
```

所以我有一个 IssuerDesigner，我在他的构造方法中将所有 Issuer 放入列表框中，并将所有这些都保存在 Issuer [] 中。

现在，当我执行这个重新托管的工作流时，我需要将此 Issuer[] 发送到 IssuerActivity，以便在他们每个人的 foreach 任务中进行分析......

问题是：¿我需要做什么才能让 IssuerActivity 获得在 IssuerDesigner 中分配的 Issuer[]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:18:34.290

你的问题很难理解，但我相信这就是你要找的。您必须在对象上使用反射才能获取属性值。它应该是这样的。

```
 MemberInfo[] members = builder.GetType().GetProperties();
        foreach (MemberInfo m in members)
        {
            if (m.MemberType == MemberTypes.Property)
            {
                PropertyInfo p = m as PropertyInfo;
                object[] attribs = p.GetCustomAttributes(false);
                foreach (object attr in attribs)
                {
                    IssuerDesigner d = attr as IssuerDesigner;
                    if (d != null)
                    {

                        foreach(object obj in d.Issuer)
                        {
                             DoSomething(obj);
                        }
                    }
                }
            }
        } 
```

# javascript - Ennui Content Slider 一次显示两个图像

> ID：10502221
> 
> 赞同：1
> 
> 时间：2012-05-08T16:04:24.203
> 
> 标签：javascript, jquery

您好，我正在尝试使用 Ennui Content 滑块为每个图像序列显示两个图像。

[http://ennuidesign.com/demo/contentslider/](http://ennuidesign.com/demo/contentslider/)这是滑块

我不确定我需要改变什么或做什么才能做到这一点

有任何想法吗

*干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:11:47.310

您只需要以在（例如）一个容器中您将获得（新）两个子元素（2个图像或其他）的方式对您的HTML进行切片。

# .net - 托管在共享主机上的 WCF 服务

> ID：10502225
> 
> 赞同：0
> 
> 时间：2012-05-08T16:04:49.943
> 
> 标签：.net, wcf, shared-hosting, assembly-loading

我使用 .NET 3.5 服务开发了一个 WCF 来将一些数据导入到 Internet。

在本地，使用 IIS Express 一切正常。当我将服务部署到共享主机并将浏览器指向服务地址时，出现以下异常：

> > 无法加载文件或程序集“系统，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该系统找不到指定的文件。

我的环境配置为使用具有 32 位兼容性的 .NET 3.5。

堆栈跟踪显示：

`[FileNotFoundException: Could not load file or assembly 'System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.] System.ServiceModel.AsyncResult.End(IAsyncResult result) +11655726 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +194 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.ExecuteSynchronous(HttpApplication context, Boolean flowContext) +176 System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +275 System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +68 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75`

有关如何解决该问题的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:06:54.840

“我的环境配置为使用具有 32 位兼容性的 .NET 3.5。”

你确定？看起来很像您的本地系统正在使用 .net 4.0，而您的主机只有 3.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:51:28.263

> FileNotFoundException：无法加载文件或程序集'系统，版本 = 4.0.0.0

明确声明您引用 .NET 4.0

# python - numpy.array 中的零条目是否占用内存？

> ID：10502240
> 
> 赞同：4
> 
> 时间：2012-05-08T16:05:40.663
> 
> 标签：python, multidimensional-array, numpy, python-3.x, sparse-matrix

假设我使用 numpy 数组（例如`numpy.ndarray`）来存储大而稀疏的矩阵（即，大多数条目为 0）：零条目是否真的占用内存？numpy 是否支持稀疏数组，如果支持，使用哪种[存储格式](http://en.wikipedia.org/wiki/Sparse_matrix#Storing_a_sparse_matrix)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:17:23.613

我认为您真正要寻找的是支持多种格式的 scipy sparse 模块。

**SCIPY 稀疏文档** [http://docs.scipy.org/doc/scipy/reference/sparse.html](http://docs.scipy.org/doc/scipy/reference/sparse.html)

下面的 stackoverflow 链接也提供了使用 scipy 稀疏矩阵的一个很好的例子。 [Scipy稀疏...数组？](https://stackoverflow.com/questions/2540059/scipy-sparse-arrays)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T16:08:13.493

> 零条目是否真的占用内存？

有了`ndarray`，他们做到了。

然而，SciPy 中有单独的类支持各种稀疏存储格式。请参阅[文档](http://docs.scipy.org/doc/scipy/reference/sparse.html)。

# java - java.lang.ClassNotFoundException: javax.servlet.ServletContainerInitializer

> ID：10502241
> 
> 赞同：11
> 
> 时间：2012-05-08T16:05:40.740
> 
> 标签：java, eclipse, tomcat, servlets

我正在编写一些 servlet，它们都运行良好 Tomcat 运行任何东西都没有问题。然后我编写了一个使用 JERSEY 的类文件，当我尝试运行它时，Tomcat 无法启动。我在 Eclipse 中安装了 Web 开发工具插件，每次点击编译我都会得到

> java.lang.ClassNotFoundException: javax.servlet.ServletContainerInitializer

这是控制台的输出

```
May 08, 2012 4:51:36 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files\TortoiseSVN\bin;c:\Program Files (x86)\Microsoft SQL Server\90\Tools\bin\;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE;C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN;C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Tools;C:\Windows\Microsoft.NET\Framework\v3.5;C:\Windows\Microsoft.NET\Framework\v2.0.50727;C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\VCPackages;C:\Python27\Scripts;C:\Program Files (x86)\SSH Communications Security\SSH Tectia\SSH Tectia AUX;C:\Program Files (x86)\SSH Communications Security\SSH Tectia\SSH Tectia AUX\Support binaries;C:\Program Files (x86)\SSH Communications Security\SSH Tectia\SSH Tectia Broker;C:\Program Files (x86)\SSH Communications Security\SSH Tectia\SSH Tectia Client;C:\Program Files\CREDANT\Shield v7.1\;C:\Development Tools\java\eclipse;;.
May 08, 2012 4:51:36 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Test_Server' did not find a matching property.
May 08, 2012 4:51:37 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-80"]
May 08, 2012 4:51:37 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
May 08, 2012 4:51:37 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 546 ms
May 08, 2012 4:51:37 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
May 08, 2012 4:51:37 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
May 08, 2012 4:51:37 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Test_Server]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Test_Server]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletContainerInitializer
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1626)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.catalina.startup.ContextConfig.getServletContainerInitializer(ContextConfig.java:1601)
    at org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1519)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1222)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletContainerInitializer
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 33 more

May 08, 2012 4:51:37 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

May 08, 2012 4:51:37 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

May 08, 2012 4:51:37 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 416 ms 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T03:53:46.593

`javax/servlet/ServletContainerInitializer`是`Servlet 3.0`Tomcat 6 不支持的类。

您可能`servlet.jar`在 CLASSPATH 中的某个地方漂浮，它不应该是。这真的把类加载器弄乱了，因为 Tomcat 的类加载器并不像预期的那样正常（参见上面的链接）。`servlet.jar`应该只在`$CATALINA_HOME/lib`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T19:59:46.157

有时，如果您在 Eclipse 中运行 Tomcat 服务器，本地 Tomcat 工作目录可能会被占用，您必须明确清除它。请注意，这与在项目上进行清理构建不同：从服务器窗口：右键单击要启动的服务器->清理 Tomcat 工作目录...->确定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T05:20:08.730

简单的右键单击tomcat服务器然后清理tomcat工作目录然后清理tomcat。它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T17:37:12.183

我今天遇到了同样的问题。最终结果是一个用户库变空了。但是显示的错误消息没有给出任何提示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-19T15:07:29.507

一个迟到的答案，但这可能会对某人有所帮助。

我相信这是因为 Jersey 是使用较新的 java 版本创建的，而您正试图在较旧的 java 版本中运行它。更新您的 Java 版本或下载支持您的 Java 版本的旧版 Jersey。

```
Window -> Preferences -> Java -> Compiler -> set "Compiler compliance level" to 1.7\. 
```

来自泽西岛的文档：

```
Until version 2.6, Jersey was compiled with Java SE 6\. This has changes in Jersey 2.7\. 
Now almost all Jersey components are compiled with Java SE 7 target. It means, that 
you will need at least Java SE 7 to be able to compile and run your application 
that is using latest Jersey. Only core-common and core-client modules are still 
compiled with Java class version runnable with Java SE 6\. 
```

# android - android共享偏好检索

> ID：10502244
> 
> 赞同：0
> 
> 时间：2012-05-08T16:05:51.143
> 
> 标签：android, sharedpreferences

嗨，我正在尝试从列表视图中保存用户首选项，我希望它存储选择的内容，然后当应用程序再次加载时检查首选项选择的方法，如果它 = 团队然后做某事，但目前它没有在偏好中加载任何关于我做错了什么的想法。当我注销选择的方法时，它显示为空

这是我的代码

```
preferences.edit().putString("ChosenMethod", "Team").commit();
    preferences.edit().putString("ChosenTeam", ChosenTeam).commit();
    preferences.edit().putString("ChosenTeamId", ChosenTeam).commit();
    preferences.edit().putString("ChosenLeagueId", ChosenTeam).commit();
    preferences.edit().putString("ChosenDivisionID", ChosenTeam).commit(); 
```

然后在 introActivity 我把这个

```
protected void checkPreferences(){

    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
     Log.v("myapp", "prefs = " + preferences);
     String ChosenMethod = preferences.getString("ChosenTeam", chosenMethod);
     Log.v("myapp", "ChosenMethod = " + ChosenMethod);

     if (ChosenMethod != null){

         Intent intent = new Intent(TheEvoStikLeagueActivity.this,Activity.class);

     }

}

            @Override

            public void onCreate(Bundle icicle) {

                    super.onCreate(icicle);

                    setContentView(R.layout.main);
                    checkPreferences(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:08:52.483

```
//Retrive value from SharedPreference
public static String getStringFromSP(String key) {
// TODO Auto-generated method stub
    SharedPreferences preferences = getApplicationContext().getSharedPreferences(" SHARED_PREFERENCES_NAME ", android.content.Context.MODE_PRIVATE);
    return preferences.getString(key, null);
}//getPWDFromSP() 
```

您可以使用上面的代码从 SharedPreference 中获取值。参考这个[链接](http://asmncl.blogspot.in/2012/04/android-sharedpreference-save-and.html)

# java - 如何替换直到第一次出现 HTML ...标签

> ID：10502247
> 
> 赞同：1
> 
> 时间：2012-05-08T16:06:04.110
> 
> 标签：java, html, string

```
String tmp = "4 days ago <b>...</b> Jon founded the video <b>Yahoo</b>! and also";

I want to remove "4 days ago <b>...</b>" from the string. 
```

请让我知道剥离到第一个标签的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:09:34.740

更好的方法是使用“真正的”HTML 解析器。但是你也可以用正则表达式来做到这一点。尝试这样的事情：

`String result = tmp.replaceFirst(".*?<b>.*?</b>", "");`

# java - 制作 MacOS 守护程序的语言选择是什么？

> ID：10502248
> 
> 赞同：2
> 
> 时间：2012-05-08T16:06:07.383
> 
> 标签：java, objective-c, macos, mono

我是一名 Windows 开发人员（具有一些 iOS Objective-C 经验），我正在非常小心地选择正确的语言来为 MacOS 制作一个相当简单的守护进程。

该应用程序将下载和上传文件，与我们现有的 .NET Web 服务进行通信。

安装将由非技术性的日常用户完成，因此要求他们自己进行大量配置/脚本编写不是一种选择。一个精巧的包装是必需的。

我认为我的选择是：

1.  Objective-C
2.  爪哇
3.  单核细胞增多症
4.  脚本

**Objective-C**的优势在于它是原生的，但我还不是这门语言最强大的。

**Java**很简单，但所有用户都有吗？要求人们安装它会是一个问题吗？

**Mono**可以让我利用我的 .NET 技能，但它会作为守护程序优雅地安装吗？

**脚本**可能是一种选择，因为应用程序必须执行的操作非常简单，但交付这样的产品是常态吗？

--

**编辑**

不会有图形用户界面。我可以不隐藏代码，尽管需要 UID/PWD 才能访问 Web 服务（每个客户端都不同）。对于所有客户端，它将始终运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:50:57.163

Objective-C/Cocoa 或 C（尤其是使用[Core Foundation](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/CFDesignConcepts.html#//apple_ref/doc/uid/10000122i)）肯定会为您提供具有性能和操作系统集成优势的最本机实现。

Java 是合理的，将是内置的。你需要一些基本的脚本来引导它，但并不多。

Mono 也很合理，用户可以相对容易地安装。您需要将它们指向下载页面并指定它们只需要运行时，但它是可行的。根据[许可](http://www.mono-project.com/FAQ%3a_Licensing)，您可以将 Mono 运行时安装程序包包含在您自己的安装程序包中，以便与您的守护程序同时安装。

自然，脚本语言很可能会使您的代码暴露在外且可修改，因此如果您担心这一点，您可能希望避免使用该路线。

无论用于开发守护程序的语言是什么，您都需要考虑安装和管理。

对于安装，Mac 用户习惯于两种安装方法： 通过 Installer 安装`.pkg`文件，用户双击然后通过安装过程或通过将应用程序拖到他们的应用程序文件夹并双击启动。作为开发人员，前者为您提供了很多控制权，包括 README/许可文本、运行飞行前和飞行后脚本、构建元包以安装一个或多个包（如上所述，可能在您的自己的安装程序），并且还使操作系统和用户能够查看将安装的文件、位置和时间（安装后），如果他们愿意的话。或者，许多守护进程将是实际的 Mac OS X 应用程序，它们会在首次启动时将自身安装为后台进程。前者将独立于您的语言选择，

这让我想到了管理。大多数守护进程都希望[`launched`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man8/launchd.8.html)作为 LaunchDaemon（对于所有用户，通常在启动时启动）或 LaunchAgent（对于特定用户，通常在登录时启动）运行。如果您与`launched`每个人都很好地融合在一起，您会更快乐，并且应该可以使用您的任何语言选项。

那么问题就变成了用户是否需要管理守护进程？如果是这样，这通常作为 MenuExtra 或 Preference Pane 实现。在任何一种情况下，守护程序都可以用任何语言开发`launched`并由 MenuExtra/Preference 窗格控制（尤其是通过），但在某些情况下，MenuExtra 实际上可以用作守护程序，因此您希望在 Objective-C 中开发/可可。

另请参阅：Apple 的[Designing Daemons & Services](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/DesigningDaemons.html)文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:11:33.147

*Objective-C 是最好的选择*，原生的，最快的并且适合守护进程，否则你可以在已经安装在 Mac OS X 中的 Java 6 中开发它，尽管安装它作为守护进程可能不是那么简单。

我的建议是使用objective-C或plain C ...

但是，如果您习惯于使用 .NET，即使在 OS X 上，您也可以安装 mono 并使用[mono-service](http://linux.die.net/man/1/mono-service)作为守护进程运行该服务，但在这种情况下，用户必须在他们的机器上安装 mono，所以如果您可以处理这种权衡可能是一个可行的解决方案。

# visual-studio-2010 - 如何添加我自己的右键菜单？

> ID：10502250
> 
> 赞同：1
> 
> 时间：2012-05-08T16:06:09.710
> 
> 标签：visual-studio-2010, menu, add-in, ssms

如何在 SSMS 2008R2\2012 对象资源管理器中添加我的右键菜单？我研究了这个话题。

我这样做：

```
private void Provider_SelectionChanged(object sender, NodesChangedEventArgs args)
        {            
            INodeInformation[] nodes;
            int nodeCount;

            objectExplorer.GetSelectedNodes(out nodeCount, out nodes);
            INodeInformation node = (nodeCount > 0 ? nodes[0] : null);

            if (_databaseMenu == null &&
                _databaseRegex.IsMatch(node.Context))
            {
                _databaseMenu = (HierarchyObject)node.GetService(typeof(IMenuHandler));
                _databaseMenu.AddChild(string.Empty, new MenuItem());
            }            
        } 
```

但问题是：如果我左键单击数据库然后右键单击 - 我看到我的菜单，好的。如果我通过 (+) 展开对象树，然后立即右键单击数据库 - 我看不到我的菜单。我明白为什么会这样，但是如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:45:56.293

我为自己的 SSMS 加载项花费了大量时间来解决同样的问题。我想出的是一个肮脏的黑客，但这是我能找到让它可靠工作的唯一方法。

您使用`SendKeys.SendWait`发出 SHIFT + F10，这是打开上下文菜单的快捷方式，并且您执行了两次，因为单次发​​出将切换菜单的状态（可见到不可见，反之亦然）。如果你使用 UI 会停止响应并最终抛出`Send`，所以一定要使用`SendWait`.

左键单击或右键单击菜单会有轻微延迟。而且，当然，如果用户更改了该快捷方式（或定义了外部的替代宏），这将不起作用，但快速浏览 SSMS 选项不会显示任何更改上下文菜单快捷方式的方法。

```
 private void Provider_SelectionChanged(object sender, NodesChangedEventArgs args)
    {            
        INodeInformation[] nodes;
        int nodeCount;

        objectExplorer.GetSelectedNodes(out nodeCount, out nodes);
        INodeInformation node = (nodeCount > 0 ? nodes[0] : null);

        if (_databaseMenu == null &&
            _databaseRegex.IsMatch(node.Context))
        {
            _databaseMenu = (HierarchyObject)node.GetService(typeof(IMenuHandler));
            _databaseMenu.AddChild(string.Empty, new MenuItem());
            SendKeys.SendWait("+({F10})")
            SendKeys.SendWait("+({F10})")
        }            
    } 
```

# android - 在 Android 上隐藏通话屏幕

> ID：10502253
> 
> 赞同：0
> 
> 时间：2012-05-08T16:06:17.627
> 
> 标签：android, broadcast

我想在接听来电时隐藏通话屏幕。我使用广播接收器（PHONE_STATE），但它是无序广播，所以我不能使用 abortbroadcast()。

是否有任何其他解决方案可以隐藏呼叫屏幕或从无序广播切换到有序广播？

这是我的清单：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name=".PhoneCallReceiver" >
        <intent-filter android:priority="99999" >
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
</application>

<uses-permission android:name="android.permission.MODIFY_PHONE_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:33:50.053

通话屏幕不能关闭或中止，它只能隐藏在不同的全屏屏幕后面。

如果您沿着这条路线走，请注意在收到呼叫和收到广播之间总会有延迟，因此原始呼叫屏幕可能会短暂可见。

# ruby - 代码优化速度

> ID：10502254
> 
> 赞同：2
> 
> 时间：2012-05-08T16:06:18.307
> 
> 标签：ruby, performance, optimization, primes

这是一个素数筛，但不是埃拉托色尼筛。

我觉得它写得不好，因为我对编程和 Ruby 不熟悉。这只是我用 Ruby 编写的第二个程序，但我想尽可能地优化它。问题是我对我需要改变什么以使其更快，除了我知道程序路径/数据结构并不理想之外没有一个明确的理解——我只是没有一个可以用来制作的概念他们理想

一个理想的答案不一定会说“将 X 更改为 Y”，但如果它为我指明此类信息的良好资源的方向，或者我可以从中获取有关效率的信息的方法，那将更有帮助程序的不同部分。

```
count = 0
x = 0
$results = Array.new []
inpt = []

class PrimeFun

  def initialize(x, y)

    array1 = (x..y).to_a
    array1.each do |n|

      if PrimeFun.primelogic(n%60, n) == 1
        array1.delete_if { |p| p % n == 0}
        $results << n
      elsif n == 2 || n == 3 || n == 5
        $results << n

      end
    end
  end

  def self.primelogic(r, n)

    @prime = case r
      when 1, 13, 17, 29, 37, 41, 49, 53
        formulaone(n)
      when 7, 19, 31, 43
        formulatwo(n)
      when 11, 23, 47, 59
        formulathree(n)
      else -1

    end  
  end

  def self.formulaone(n)
   @x = 1
   @y = -1

   until 4*(@x**2) >= n
      @y = -@y if Math.sqrt(n-(4*(@x**2))).floor - Math.sqrt(n-(4*(@x**2))) == 0  
     @x += 1

   end
   @y
  end

  def self.formulatwo(n)
    @x = 1
    @y = -1

    until 3*(@x**2) >= n
      @y = -@y if Math.sqrt(n-(3*(@x**2))).floor - Math.sqrt(n-(3*(@x**2))) == 0
      @x += 1

    end
    @y
  end

  def self.formulathree(n)
    @x = 1
    @y = -1

    until 3*(@x**2) >= n
      @y = -@y if Math.sqrt(((@x**2)+n)/3).floor - Math.sqrt(((@x**2)+n)/3) == 0 && @x > @y
      @x += 1

    end
   @y
  end

end

x = STDIN.gets.to_i

while count < x
  inpt << STDIN.gets.chomp
  count += 1
end

inpt.each do |n|
  a = n.split(" ").map { |a| a.to_i }
  PrimeFun.new(a[0], a[1])
  $results << ""
end

puts $results 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T19:00:28.607

您应该熟悉 Ruby 标准库中包含的[Benchmark](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html)模块，以测量您的方法（不同版本）的运行时间。我自己没有通过 Benchmark 运行以下代码建议，它们只是我脑海中关于如何提高代码的速度和可读性的一些快速想法 - 请随意对它们进行基准测试并报告结果！:-)

分析您的代码以查找瓶颈也是一个好主意 - 没有必要花费数小时优化对总运行时间贡献不大的部分代码。查看[ruby​​-prof](https://github.com/rdp/ruby-prof) gem 以获得帮助您解决此问题的好工具。

* * *

现在快速查看您的代码和一些改进建议。

在不考虑您正在使用的实际算法的情况下，您的首要任务应该是消除代码反复多次重新计算相同值的倾向。

此外，您似乎正在使用实例变量（@x、@y 等），其中局部变量可以很好地完成工作。更不用说您使用仅在同一类的实例方法中调用的类方法。您也应该将它们转换为实例方法。（这些并不是真正的优化提示，而是关于如何改进 Ruby 代码的建议。）

以这种方法为例：

```
def self.formulaone(n)
  @x = 1
  @y = -1
  until 4*(@x**2) >= n
    @y = -@y if Math.sqrt(n-(4*(@x**2))).floor - Math.sqrt(n-(4*(@x**2))) == 0  
    @x += 1
  end
  @y
end 
```

在循环中，您将计算表达式`4*(@x**2)` *三次*。一个就足够了，因此将结果存储在临时局部变量*fsq*中。您还在循环内两次计算相同数字的平方根。同样，将值存储在临时变量*root*中，并使用它。

```
def formulaone_b(n)
  x = 1
  y = -1
  until (fsq = 4*(x**2)) >= n
    root = Math.sqrt(n - fsq)
    y = -y if root.floor - root == 0
    x += 1
  end
  y
end 
```

这应该是一个好的开始。

*可能不是优化，但您可以通过预先计算 x 的范围来使代码更简洁，然后使用each*对其进行迭代：

```
def formulaone_c(n)
  y = -1
  (1..Math.sqrt(n / 4)).each do |x|
    root = Math.sqrt(n - 4*(x**2))
    y = -y if root.floor == root # See below
  end
  y
end 
```

在上面的代码中，我还将比较替换`root.floor - root == 0`为更简单但等效的比较`root.floor == root`，删除了一个不必要的减法。

还有一个想法：不是`n - 4*(x**2)`每次迭代都计算，你可能会注意到这个值会随着每一步而减少，从而获得一点点速度`x * 8 + 4`，所以使用辅助变量*d*来更新前一个表达式的值，如下所示：

```
def formulaone_d(n)
  y = -1
  d = n - 4 # Value of n - 4*(x**2) when x = 1
  (1..Math.sqrt(n / 4)).each do |x|
    root = Math.sqrt(d)
    y = -y if root.floor == root
    d -= x * 8 + 4 # Value of n - 4*(x**2) after x increases
  end
  y
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T22:20:24.487

## 正确性

首先，您的代码不正确：

```
def self.formulathree(n)
  @x = 1
  @y = -1

  until 3*(@x**2) >= n
    @y = -@y if Math.sqrt(((@x**2)+n)/3).floor - Math.sqrt(((@x**2)+n)/3) == 0 && @x > @y
    @x += 1

  end
  @y
end 
```

是否`@y`小于`@x`是无关紧要的，它总是正确的，因为`@y = ±1`和何时`@x = 1`，`@y = -1 < 1`。

您感兴趣的是表示的数量

```
n = 3*a^2 - b^2 
```

用整数`a > b > 0`。现在`a^2 = (n + b^2)/3`，，所以你想要

```
(n + b^2)/3 > b^2
n + b^2 > 3*b^2
n > 2*b^2 
```

而不是`n > 3*b^2`（`b`在这里代表`@x`）。例如，

```
143 = 11* 13 = 3*7^2 - 2^2 = 3*8^2 - 7^2 
```

但是 3*7^2 = 147 > 143，所以`@x = 7`不会被考虑，所以 143 将被视为素`formulathree`数

```
179 = 3*9^2 - 8^2 
```

不会被认为是素数，尽管它是，因为`3*8^2 = 192 > 179`.

`n`当您输出每个考虑进行`initialize`调试时，另一个问题变得明显。

```
array1 = (x..y).to_a
array1.each do |n|

  if PrimeFun.primelogic(n%60, n) == 1
    array1.delete_if { |p| p % n == 0} 
```

`array1.each`或多或少

```
for(index = 0; index < array1.length; ++i) 
```

但是当您删除 的倍数时`n`，您也会删除`n`自身，因此直接在移动到索引之后的元素`n`具有，并且被跳过。您可以通过仅删除`n`大于的倍数来解决此问题`n`：

```
array1.delete_if { |p| p > n && p % n == 0 } 
```

* * *

## 表现

最大的性能问题是算法。如果您调用`initialize(2,n)`，对于每个素数，您将遍历数组并通过试除法删除倍数。每个素数除以每个较小的素数（2、3 和 5 除外），以查看是否应将其从数组中删除。那就是臭名昭著的特纳“筛子”，其复杂度为 O((n/log n)^2)，几乎是二次的。由于您甚至不会从数组中删除 2,3 和 5 的倍数，除非这些倍数具有更大的素因数，因此复杂性可能会稍微差一些。

在您选择更好的算法之前，微优化根本不值得付出努力。

下一个问题是使用 确定素数`formulaX`。如果您还从数组中删除了 2、3 和 5 的倍数，则甚至不需要进行测试，每个考虑的数字都是每个试除法的已知素数。由于您不这样做，因此检查候选者是否可被 2、3 或 5 整除会比`primelogic`.

`primelogic`使用同样用于 Atkin 筛的逻辑来确定素数，但它单独测试每个数字，因此测试每个数字`n`是 O(√n)。计算平方根比除法复杂得多，因此比试除法的素数测试需要更长的时间。

# html - HTML标记属性值内的换行符

> ID：10502256
> 
> 赞同：12
> 
> 时间：2012-05-08T16:06:32.680
> 
> 标签：html, mailto, line-breaks, subject

如何在 HTML 属性值中插入换行符，如下所示：

```
<href="mailto:info@example.com?subject=TestMail&body=Please enter the following details.
Name
Email
Mob No"> 
```

当用户回复时，正文部分应显示如下：

```
请输入以下详细信息。
1.名称
2\. 电子邮件
3\. 暴徒号

```

我尝试使用`<br>`标签，但它们会显示出来。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-08T16:13:28.417

换行符应该是 URL 编码成`%0D%0A`

您的邮件将如下所示：

```
 <a href="mailto:xxx@example.com?subject&body=1.Name%0D%0A2.Email">mailme</a> 
```

来自[http://www.cubetoon.com/2008/how-to-enter-line-break-into-mailto-body-command/的信息](http://www.cubetoon.com/2008/how-to-enter-line-break-into-mailto-body-command/)

# c# - 降低 Zune 音量并播放音频文件？

> ID：10502257
> 
> 赞同：1
> 
> 时间：2012-05-08T16:06:34.623
> 
> 标签：c#, silverlight, windows-phone-7

目前，在我的应用程序中，我暂停了手机正在播放的任何音乐，并使用 MediaElement 播放任何声音。声音响起后，音乐继续。一切正常，但现在我想降低音乐音量而不是停止它。

1）这可以在wp7上完成吗？

2）如果是这样怎么办？当我尝试像这样改变音量时。

```
void PauseMusic()
{
   FrameworkDispatcher.Update();
   // Pause the Zune player if it is already playing music.
   if (!MediaPlayer.GameHasControl)
   {
      //MediaPlayer.Pause();
      MediaPlayer.Volume = 0.7f;
      resumeMediaPlayerAfterDone = true;
   }
 } 
```

音频是这样播放的。

```
void PlayAudioCue(string path)
{
    PauseMusic();
    AudioPlayer.Stop();            
    AudioPlayer.Source = new Uri("/Audio/" + path, UriKind.Relative);            
}

void AudioPlayer_MediaOpened(object sender, RoutedEventArgs e)
{
    AudioPlayer.Position = new TimeSpan(0);
    AudioPlayer.Volume = 1;
    AudioPlayer.Play();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:25:25.580

首先，我打赌您想将您的应用程序发布到市场。**它将无法通过认证过程**。查看 6.5.1 段 - 初始启动功能

> 当应用程序启动时用户已经在手机上播放音乐时，应用程序不得通过调用 Microsoft.Xna.Framework.Media.MediaPlayer 类暂停、恢复或停止手机 MediaQueue 中的活动音乐。
> 
> 如果应用程序播放自己的背景音乐或调整背景音乐音量，它必须征得用户同意停止播放/调整背景音乐（例如消息对话框或设置菜单）。每次启动应用程序时都必须出现此提示，除非向用户提供了选择加入设置并且用户已使用此设置选择加入。

[更多细节](http://msdn.microsoft.com/en-us/library/hh184838%28v=vs.92%29.aspx)

我不是 100% 确定，但你不能降低用户音乐的音量。

# android - 所选项目和 Spinner 下拉列表中的项目列表的不同颜色

> ID：10502260
> 
> 赞同：1
> 
> 时间：2012-05-08T16:06:50.957
> 
> 标签：android, android-spinner, android-theme

我有一个`TextView`为 a 设置颜色的 a `Spinner`。问题是我想为选定的单个项目和下拉列表中的项目设置不同的颜色。我读到这解决了这个问题：

```
<style name="Theme.NoTitleBar.WithColoredSpinners"  
parent="@android:style/Theme.NoTitleBar">
        <item name="android:spinnerItemStyle">@style/SpinnerItem</item>
        <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
    </style>

    <style name="SpinnerItem" parent="@android:style/Widget.TextView.SpinnerItem">
        <item name="android:textColor">#00FF00</item>
    </style>

    <style name="SpinnerItem.DropDownItem" parent="@android:style/Widget.DropDownItem.Spinner">
        <item name="android:textColor">#FF0000</item>
    </style> 
```

但我不想在我的清单文件中应用这个主题（有一些限制，因此我不能这样做）。我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T20:29:32.857

如果您无法在主题中应用此样式，请将它们应用到您不想设置样式的项目的布局文件中

# python - 防止在 Python 中访问“私有”属性

> ID：10502265
> 
> 赞同：2
> 
> 时间：2012-05-08T16:07:13.203
> 
> 标签：python, encapsulation, private-members

一个类在多大程度上可以“保护”它的一个属性免受外部访问？

例如具有常规`_secret`属性的类，原始值很容易访问：

```
class Paranoid(object):
    def __init__(self):
        self._secret = 0

    def set(self, val):
        self._secret = val * 10

    def get(self):
        return self._secret / 10

p = Paranoid()
p.set(123)
print p.get() # 123
print p._secret # 1230, should be inaccessible 
```

如何使访问`_secret`变得更加困难？

这没有实际应用，我只是好奇是否有新颖的方法可以使其更难访问（在 Python 的上下文中 - 所以忽略你可以将调试器附加到 Python 进程并检查内存的事实)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:12:16.733

您可能正在寻找[getter 和 setter](http://docs.python.org/library/functions.html#property)。稍微不那么复杂的方法是使用`__secret`，它将调用名称修改将其转换为`_Paranoid__secret`.

但是，是的，我应该指出，python 社区并不像某些语言那样真正重视隐私。或者俗话说*[我们在这里都是成年人](http://mail.python.org/pipermail/tutor/2003-October/025932.html)*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T16:14:24.707

```
>>> def Paranoid():
...     _secret_dict = {'_secret': 0}
...     class ParanoidClass(object):
...             def set(self, val):
...                     _secret_dict['_secret'] = val * 10
...             def get(self):
...                     return _secret_dict['_secret'] / 10
...     return ParanoidClass()
... 
>>> p = Paranoid()
>>> p.set(123)
>>> p.get()
123 
```

这让我想起了[Steve Yegge 的一篇博](http://steve-yegge.blogspot.com.ar/2010/07/wikileaks-to-leak-5000-open-source-java.html)文。

# outlook-addin - 如果从 .msg 文件打开 IMessage，则 IMAPIProp::CopyTo 返回 MAPI_E_NO_ACCESS

> ID：10502266
> 
> 赞同：0
> 
> 时间：2012-05-08T16:07:20.890
> 
> 标签：outlook-addin, mapi, outlook-2010

我在 Outlook 2010 的加载项中使用 IMAPIProp::CopyTo 将当前显示的 IMessage 保存到磁盘上 .msg 文件中的新 IMessage 中。对于驻留在用户邮箱中的邮件，一切正常。

当我尝试使用从磁盘上的 .msg 文件打开并包含附件的消息时，IMAPIProp::CopyTo 返回 0x80070005 (MAPI_E_NO_ACCESS)。从 IMAPIProp::GetLastError 返回的详细信息是：

```
ulVersion: 0
lpszError: "A resource is busy or you lack sufficient access rights or permissions"
lpszComponent: ""
ulLowLevelError: 71
ulContext: 0 
```

使用 File->Save As 或 File->Save 后，我对 IMAPIProp::CopyTo 的调用也成功了。如果我排除 PR_MESSAGE_ATTACHMENTS，IMAPIProp::CopyTo 也会成功。

Outlook 可能会为成功调用 IMAPIProp::CopyTo 做哪些准备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:30:46.943

对于在 MSG 文件之上创建的消息，CopyTo() 不能很好地工作（如果有的话）。您唯一的选择几乎是编写自己的函数来执行 GetPropList，然后一次复制一个属性（当然适当地转换命名属性），然后复制附件和收件人。

# c# - 包含 XML 的 WebRequest POST 表单？

> ID：10502268
> 
> 赞同：0
> 
> 时间：2012-05-08T16:07:23.297
> 
> 标签：c#, xml, character-encoding, webrequest

我正在尝试使用 .Net WebRequest 发布表单。该表单包含 XML 字段。（除其他外）我尝试了以下代码：

```
WebRequest req = WebRequest.Create(ctx.SvcUrl);
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
using (var writer = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII))
{
    string reqBody = "first=<bill/>&last=smith"; //(embedded <>) - 500 Internal Server Error
    writer.Write(reqBody);
}
rsp = req.GetResponse();

var strm = rsp.GetResponseStream();
var rdr = new StreamReader(strm);
string input = rdr.ReadToEnd(); 
```

reqBody 中的 <> 导致 500 - Internal Server 错误。

对此进行编码的正确方法是什么？还是多部分形式的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:19:46.030

尝试使用：

```
 string reqBody = string.Format("first={0}&last={1}", HttpUtility.HtmlEncode("<bill/>"), "smith"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:49:58.840

事实证明，UrlEncoding 是自动完成的，所以自己做会带来麻烦。此外，我连接的服务器无法处理任何编码。这使水变得浑浊，很难看出发生了什么故障。

底线解决方案是固定服务器以处理 UrlEncoding。

正如[Microsoft 论坛上的 'cheong00](http://social.msdn.microsoft.com/Forums/en-US/ncl/thread/69a7b3ef-a094-49ab-9708-d6870699559c/) ' 所指出的，要避免自动，请使用 TcpClient。但是编码应该在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:12:34.470

您需要对请求进行编码。使用[HttpEncoder](http://msdn.microsoft.com/en-us/library/system.web.util.httpencoder.aspx)类。

```
using System.Web.Util;

WebRequest req = WebRequest.Create(ctx.SvcUrl);
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
using (var writer = new StreamWriter(req.GetRequestStream(), 
    System.Text.Encoding.ASCII))
{
    var encoder = new HttpEncoder();
    string reqBody = String.Format("first={0}&last={1}",
        encoder.HtmlEncode("<bill/>"), 
        encoder.HtmlEncode("smith") ); 
    writer.Write(reqBody);
}
rsp = req.GetResponse();

var strm = rsp.GetResponseStream();
var rdr = new StreamReader(strm);
string input = rdr.ReadToEnd(); 
```

我使用`String.Format()`它是因为我认为它看起来更好并且更清楚我在做什么，但这不是必需的。你也可以通过字符串连接来构建字符串，只要你`HttpEncoder.HtmlEncode()`先通过它。

# r - 如何使用 geom_raster 或 geom_tile 填充绘图区域

> ID：10502273
> 
> 赞同：5
> 
> 时间：2012-05-08T16:07:36.323
> 
> 标签：r, ggplot2

我有以下数据框：

```
 id  variable   value
 ID1    1A      91.98473282
 ID1    2A      72.51908397
 ID1    2B      62.21374046
 ID1    2D      69.08396947
 ID1    2F      83.39694656
 ID1    2G      41.60305344
 ID1    2H      63.74045802
 ID1    9A      58.40839695
 ID1    9C      61.10687023
 ID1    9D      50.76335878
 ID1    9K      58.46183206 
```

我正在使用 ggplot2 生成带有数据的热图：

```
 ggplot(data, aes(variable, id)) +
              geom_raster(aes(fill = value)) + 
              scale_fill_gradient(low = "white",
              high = "steelblue") 
```

情节如下所示： [http ://dl.dropbox.com/u/26998371/plot.pdf](http://dl.dropbox.com/u/26998371/plot.pdf)

我希望瓷砖填充 y 轴上的绘图空间，而不是在上方和下方留下空间。

我确信有一个简单的答案。任何帮助将不胜感激。

scale_y_discrete(expand = c(0, 0)) 不适用于 y 轴，但 scale_x_discrete(expand = c(0, 0)) 将在 x 轴上工作以填充绘图空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T20:41:45.960

**更新** 似乎在 ggplot2 的最新版本中已解决该问题。

这与`id`因素中只有一个级别有关。将因子更改`id`为数字，或更改`id`因子使其具有两个级别，然后瓷砖填充空间。此外，`coord_equal()`使用原始`id`因子会给出一个狭长的情节，但又会填满空间。

```
## Your data
df = read.table(text = "
id  variable   value
ID1    1A      91.98473282
ID1    2A      72.51908397
ID1    2B      62.21374046
ID1    2D      69.08396947
ID1    2F      83.39694656
ID1    2G      41.60305344
ID1    2H      63.74045802
ID1    9A      58.40839695
ID1    9C      61.10687023
ID1    9D      50.76335878
ID1    9K      58.46183206", header = TRUE, sep = "")

library(ggplot2)

 # Change the id factor
 df$id2 = 1                   # numeric
 df$id3 = c(rep("ID1", 5), rep("ID2", 6))      # more than one level

 # Using the numeric version
 ggplot(df, aes(variable, id2)) +
          geom_raster(aes(fill = value)) + 
          scale_y_continuous(breaks = 1, labels = "ID1", expand = c(0,0)) + 
          scale_x_discrete(expand = c(0,0)) +
          scale_fill_gradient(low = "white",
          high = "steelblue") 
```

![在此处输入图像描述](../Images/618ed86a4bf458216adbea7d14e9f172.png)

```
# Two levels in the ID factor
ggplot(df, aes(variable, id3)) +
          geom_tile(aes(fill = value)) + 
          scale_fill_gradient(low = "white",
          high = "steelblue") 

# Using coord_equal() with the original id variable
ggplot(df, aes(variable, id)) +
          geom_tile(aes(fill = value)) + 
          scale_fill_gradient(low = "white",
          high = "steelblue") +
          coord_equal() 
```

# java - 实施单位转换

> ID：10502274
> 
> 赞同：0
> 
> 时间：2012-05-08T16:07:37.417
> 
> 标签：java, logic

我正在研究一个计算米单位的功能。米计算规则是：

*   上午 1.6 公里的最低票价 - 12/-
*   随后 1 公里 amt - 7/-
*   午夜旅程加收 25% 的票价

我写的函数是：

```
public static void CalculateAutoFare(int kmIndex) {
    double fare = 12.00;
    double night = 15.00;
    double subseIncre = 1.50;
    double nightIncre = 0.25;
    int j=0;

    for (int i=1; i <= kmIndex; i++) {

        if (i == 3 || j == 4) {
            fare += 1.00f;
            j =0;
        } 
        else {
            fare += subseIncre;
            j++;
        }
        fare = Math.round(fare*2f)/2f;
        double extra = ((double) fare * nightIncre);
        night = fare + extra;
        night = Math.round(night*2f)/2f;

        System.out.println("I = " + i + " Fare = " + fare + " Night = " + night + " 25%Extra = " + extra);
    }

    System.out.println("Day = " + fare + " Night = " + night);
} 
```

kmIndex 是公里的索引。仪表读数为 1.00、1.10、1.20、1.30...1.90、2.00.... 因此 kmIndex 为 1.00 = 0、1.10 = 1、1.20 - 3 等等。

我根据代码得到的结果应该在下面提到：

![在此处输入图像描述](../Images/57193b30bcdbf3360ed9322be0a7a66c.png)

我一直工作到 4 点，结果不正确的地方被宣布为 undet 应该与白天或晚上有关。

我为此做了很多工作，但无法达到预期的效果。如果我尝试纠正一件事情，那么其他事情就会出错或没有给出预期的结果。谁能帮我解决这个问题。几乎一整天都在试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:21:54.863

我分析了工作表，但没有找到一个公式可以给出那里显示的结果。似乎某些值有一些四舍五入的差异。我意识到只有 25 或 75 美分的值不同。例如，您计算了 18,5，它应该是 19（结果是 18,75，您向下舍入到 18,5，但应该向上舍入到 19）。因此，如果您没有用于创建表格的原始公式，我认为确保结果与工作表匹配的唯一方法是对其进行硬编码。这不是一个优雅的解决方案，但它保证了正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:12:26.223

代码中的小调整就可以了。您希望将 .75 舍入为 0.5，而不是乘以 2 乘以它的直接较小的浮点数。

```
{
            double fare = 12.00;
            double night = 15.00;
            double subseIncre = 1.50;
            double nightIncre = 0.25;
            int j=0;

            for (int i=1; i <= 22; i++) {

                if (i == 3 || j == 4) {
                    fare += 1.00f;
                    j =0;
                }
                else {
                    fare += subseIncre;
                    j++;
                }

                double extra = ((double) fare * nightIncre);
                night = fare + extra;
                ;

                System.out.println("I = " + i + " Fare = " + fare + " Night = " + night + " 25%Extra = " + extra);
            }
            System.out.println("actual Day = " + fare + " Night = " + night);

            fare = Math.round(fare*1.99f)/2f;
            night = Math.round(night*1.99f)/2f;
            System.out.println("rounded Day = " + fare + " Night = " + night);
    } 
```

# spotify - Spotify 播放按钮曲目设置限制？

> ID：10502275
> 
> 赞同：1
> 
> 时间：2012-05-08T16:07:39.203
> 
> 标签：spotify

我正在使用 spotify 播放按钮并尝试使其显示任意一组曲目，我将其作为逗号分隔的 ID 列表提供。

它在大多数情况下运行良好，但可能会发生按钮未正确呈现，而是显示 Spotify 开发人员页面，如下所示：http: [//xben.free.fr/spotify/](http://xben.free.fr/spotify/)

我觉得在使用重要数量的曲目（超过 80 个）时会发生这种情况。

你们中有人遇到过同样的问题，或者知道是否有限制吗？我浏览了文档，它只提到了使用现有播放列表时的 1000 首曲目限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:42:20.543

是的，众所周知，trackset uris 的长度不能超过 80 条左右（取决于您的 trackset 标题）。

任意限制的原因是这样的：它是您可以发送到旧版 IE 浏览器的可能最长的 url。我们希望它在所有浏览器中都能正常工作。如果它在一个中不起作用，那么它也不应该在其他中起作用。

然而有两个问题。

它的实现方式，只需在php conf中设置suhosin.get.max_value_length = 2048。如果它太大，suhosin 只会删除参数，使请求看起来像[https://embed.spotify.com](https://embed.spotify.com)，它将重定向到开发人员站点。不是最好的错误消息。我们会修复的。

限制应记录在案。我们会修复的。甚至可能提高限制并告诉人们对某些浏览器有所不同。

（我在 Spotify 工作）

# android - 在 Android 中只显示日期，不显示时间

> ID：10502278
> 
> 赞同：5
> 
> 时间：2012-05-08T16:07:47.993
> 
> 标签：android, date

我正在尝试在 android 中显示日期，使用 DatePicker 选择年、月和日。我遇到的问题是选择年份、月份和日期，并以适合手机区域设置的正确格式在屏幕上显示它们，而不显示时间。

现在的代码将正确显示日期，但也会显示时间。

```
StringBuilder string = new StringBuilder()
    // Month is 0 based so add 1
    .append(mYear).append("-")
    .append(mMonth + 1).append("-")
    .append(mDay);

    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");

    try {   
        Date date = format.parse(string.toString());
        mDateDisplay.setText(date.toLocaleString());
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

mDateDisplay 是一个文本视图。

我不知道如何摆脱也显示的时间。我已经进行了大量的搜索和阅读文档，但我无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T16:23:45.987

```
java.text.DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getContext());
mDateDisplay.setText(dateFormat.format(date)) 
```

这将考虑用户的区域设置并仅显示日期。

以下是相关文档：[getDateFormat(Context context)](http://developer.android.com/reference/android/text/format/DateFormat.html#getDateFormat%28android.content.Context%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:13:53.977

```
android.text.format.DateFormat df = new android.text.format.DateFormat();
df.format("yyyy-MM-dd", new java.util.Date()); 
```

或者

```
android.text.format.DateFormat.format("yyyy-MM-dd", new java.util.Date()); 
```

参考这个[链接](http://developer.android.com/reference/android/text/format/DateFormat.html)

**更新了**::

您还可以使用[格式化程序](http://developer.android.com/reference/java/util/Formatter.html)仅获取日期，如下所示：

```
mDateDisplay.setText(String.format("%1$tY %1$tb %1$td", date)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-09T14:26:53.597

试试这个代码

```
long date = System.currentTimeMillis();
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        SimpleDateFormat timeonly = new SimpleDateFormat("hh:mm");
        String dateString = sdf.format(date);
        String timeString = timeonly.format(date);
        //show present date
        textView.setText(dateString);

        //show present time
        TextView.setText(timeString); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T10:02:44.920

我花了一个小时，终于找到了解决方案。

```
 String datemillis = cursor.getString(cursor.getColumnIndex("field name on table"));
            SimpleDateFormat  df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

            try {
                Date date = null;
                date = df.parse(datemillis);
                SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
                String shortTimeStr = sdf.format(date);
                System.out.println(shortTimeStr);
                Y=shortTimeStr;
            } catch (ParseException e) {
                // To change body of catch statement use File | Settings | File Templates.
                e.printStackTrace();
            }
                Toast.makeText(getApplicationContext(),Y, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-11T07:24:56.470

这对我有用：

```
public class MainActivity extends AppCompatActivity {
TextView txt, txt1;

Button click;
Calendar c = Calendar.getInstance();

SimpleDateFormat df = new SimpleDateFormat("dd-MMM-yyyy");
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    txt1 = (TextView) findViewById(R.id.txt1);

    click = (Button) findViewById(R.id.click);
    c.setTimeZone(TimeZone.getTimeZone("GMT"));

    click.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            String f=df.format(c.getTime());

            txt1.setText(f);
        }
    });       
}

} 
```

# c - 在C中搜索另一个数组时将值插入数组？

> ID：10502279
> 
> 赞同：0
> 
> 时间：2012-05-08T16:07:57.370
> 
> 标签：c, arrays, search, for-loop

我是 c 的初学者，我试图在一个数组中插入一个值，因为我扫描另一个数组以查找高于阈值的值，如果一个值超过正在搜索的数组中设置的阈值，则将一个数字插入到其他数组...

```
 for (i = 0; i<lines[i][1]; i++) {
    if (lines[i][1] > 6500) {
    array[];
    } 
```

所以我的意思是，如果行[i][1] 中的值高于6500，则将数字“1”插入数组[]。

但是，在以前的尝试中，它只是覆盖了数组，而不是在以前的值之上堆叠。我有另一个 for 循环尝试在搜索另一个数组时做同样的事情。

```
 for (i = 0; i<lines[i][0]; i++) {
    if (lines[i][0] > 6500) {
    array[];
    } 
```

理想的输出类似于：1 表示高于行[i][0] 的值，2 表示高于行[i][1] 的值，“array[] = {1,1,1,2, 2,2,2,1,1,1,};" 并且在扫描数组时将值插入到数组中。

请帮忙...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:12:31.937

只需启动一个计数器来跟踪您上次在目标数组中插入项目的位置。例如：

```
int destPosition=0;
for (i = 0; i<lines[i][0]; i++) {
    if (lines[i][0] > 6500) {
       array[destPosition]=1;
       destPosition++;
    }  
} 
```

# performance - 提高 dynatree（300 个节点）的加载速度，这需要 20 到 25 秒

> ID：10502280
> 
> 赞同：0
> 
> 时间：2012-05-08T16:07:59.553
> 
> 标签：performance, dynatree

我正在从数据库中构建每个节点的整个 JSON 读取内容及其详细信息。然后使用 initAjax 方法加载 dynatree。加载大约需要20到25秒。有什么方法可以加快加载时间。我知道我可以改用延迟加载，但我需要树上的搜索能力，我假设我需要所有节点都存在并且在它们被激活时不加载。在未来的几个月和几年里，这棵树会长得更大。请建议/建议在我的方案中采取的最佳途径是什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:08:25.290

您可以使用延迟加载并在后端进行搜索：通过 Ajax 发送搜索查询，并让服务器返回匹配的节点（如果需要，还可以返回父节点）。然后使用 Dynatree API 添加或突出显示匹配项。

如果您执行 serch '*'，这将无济于事，但在常见情况下应该会快得多。

# algorithm - 移动框级生成算法

> ID：10502283
> 
> 赞同：0
> 
> 时间：2012-05-08T16:08:17.323
> 
> 标签：algorithm

移动盒子是一款 iphone 游戏，可从以下网址下载：http: [//itunes.apple.com/us/app/move-the-box/id491113310 ?mt=8](http://itunes.apple.com/us/app/move-the-box/id491113310?mt=8)

我需要一个想法来开始创建一个算法来自动为这个游戏生成关卡。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:46:49.350

这很容易。从一个空棋盘开始并应用游戏规则 BACKWARDS，即添加一排三个盒子，或者做出可以在真实游戏中反向进行的移动（在您的生成器中，盒子向上落下）。

# java - 获取 url 减去 JSP 或 CQ5 中的当前文件名

> ID：10502284
> 
> 赞同：3
> 
> 时间：2012-05-08T16:08:24.240
> 
> 标签：java, jsp, aem

我希望得到当前 url 减去当前引用的文件名。解决方案是在 JSP 还是 CQ5 中并不重要。但是，我正在尝试更多地使用后者来习惯它。

我正在使用这个文档，但它没有帮助。[CQ5 文档](http://dev.day.com/docs/en/cq/5-3/javadoc/com/day/cq/wcm/api/PageManager.html)。我找到的示例检索了完整的当前路径，但我不知道如何从中删除文件名：

```
<% Page containingPage = pageManager.getContainingPage(resourceResolver.getResource(currentNode.getPath()));
%>
<a href="<%=containingPage.getPath() %>.html">Profile</a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T19:46:22.683

假设您正在访问以下资源 URL。

/content/mywebsite/english/mynode

如果您当前的节点是“mynode”并且您想在没有当前节点的情况下获取 url 的一部分。

那么最简单的方法是在 currentNode(mynode) 上调用 getParent()

因此，您可以像这样获得父母的路径。

**currentNode.getParent().getPath()**会给你**“/content/mywebsite/english/”**

完整代码：

```
 <% Page containingPage = pageManager.getContainingPage(resourceResolver.getResource(currentNode.getParent().getPath())); 
%>
<a href="<%=containingPage.getPath() %>.html">Profile</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T17:45:26.087

一个更简单的方法。

您可以使用 currentPage 对象来获取父 Page。

代码看起来像这样

```
<a href="<%=currentPage.getParent().getPath()%>.html">Profile</a> 
```

如果您在使用此代码时遇到错误，请检查您是否在页面中包含了 global.jsp 文件。如下图所示。

```
<%@include file="/libs/foundation/global.jsp"%> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T16:30:18.317

我对 CQ5 一无所知，但是由于`getPath()`返回一个普通的 Java 字符串，我希望您可以只使用前缀到最后一个斜杠，对于字符串`s`可以使用`s.substring(0, s.lastIndexOf('/')+1)`. 如果你必须把它变成一个单线，你可以做`containingPage.getPath().substring(0, containingPage.getPath().lastIndexOf('/')+1)`。

# c# - “不包含定义……也没有扩展方法……”错误

> ID：10502287
> 
> 赞同：4
> 
> 时间：2012-05-08T16:08:42.510
> 
> 标签：c#, .net, compiler-errors

我遇到了一个问题，由于此错误，我无法使用对象方法：

> 不包含定义……也没有扩展方法……

[这与这个问题](https://stackoverflow.com/questions/7178151/does-not-contain-a-definition-and-no-extension-method-error)非常相关。我正在做该问题中给出的答案，但我仍然收到此错误。

```
namespace MyProject.ViewModel
{
    public class NetworkHealthViewModel : ViewModelBase
    {
        private IDataService _dataService;
        public ObservableCollection<NetworkBandwidthModel> NbicNetworkBandwidth
        public ObservableCollection<NetworkPortalStatusModel> NbicNetworkPortalStatus

        public NetworkHealthViewModel()
        {
            _dataService = new DataServiceNetworkHealth();
            NbicNetworkBandwidth       = new ObservableCollection<NetworkBandwidthModel>();
            NbicNetworkPortalStatus    = new ObservableCollection<NetworkPortalStatusModel>();
            _dataService.LoadChartItems(NetworkBandwidthLoaded, NetworkBandwidthLoadedFailed);
            _dataService.LoadPortalStatus(NetworkPortalStatusLoaded, NetworkPortalStatusLoadedFailed);
         } 
```

错误在于 LoadPortalStatus()。LoadChartItems() 很好。NetworkBandwidthLoaded 和 NetworkPortalStatusLoaded 是代表。

NetworkPortalStatusLoaded 的布局与 NetworkBandwidthLoaded 几乎相同：

```
private void NetworkPortalStatusLoaded(IEnumerable<ChartModel> portalStatItems) 
{
    NbicNetworkPortalStatus.Clear();

    var networkPortalItems = from item in portalStatItems
                             where ((NetworkPortalStatusModel)item).Unit == "Portal"
                             select item;

    foreach (var item in networkPortalItems)
    {
        NbicNetworkPortalStatus.Add((NetworkPortalStatusModel)item);
    }

    Message = "Network Portal details loaded";
} 
```

我的 DataServiceNetworkHealth 类定义为：

```
namespace MyProject.DataServices
{
    public class DataServiceNetworkHealth : IDataService
    {
        private Action<IEnumerable<ChartModel>> _delagateSuccess;
        private Action<Exception> _delagateFail;
        private String _portalHtmlResponse;

        public void LoadChartItems(Action<IEnumerable<ChartModel>> success, Action<Exception> fail)
        {
          ....
        }

        public void LoadPortalStatus(Action<IEnumerable<ChartModel>> success, Action<Exception> fail)
        {
          ....
        }
    }
} 
```

方法 LoadChartItems() 定义在接口 IDataService 中，但 LoadPortalStatus 没有。也许这就是问题所在。还有其他不使用 LoadPortalStatus 的 DataServiceX 类。

我知道这是一篇很长的帖子，但我认为最好提前提供所有信息。：-） 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:12:36.960

您对`_dataService`type的引用`IDataService`，这意味着您只能访问由此接口定义的成员（或所述接口的扩展方法）。您提到这`LoadPortalStatus`不是该界面的一部分，因此您无法通过`_dataService`参考访问它。

根据评论更新：让我们看另一个示例。如果您定义这样的`List<int>`引用：

```
List<int> i = new List<int>(); 
```

您可以访问 的所有成员`List<T>()`和所有成员`Object`。但是，如果您将引用更改为

```
IEnumerable<int> i = new List<int>(); 
```

唯一可访问的成员`i`是`GetEnumerator`在 上定义的`IEnumerable<T>`和继承自 的成员`Object`。

如果包含`System.Linq`命名空间，您还可以访问为`IEnumerable<T>`.

的静态类型`i`确定哪些成员可通过该引用获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:11:56.070

如果`LoadPortalStatus`在接口中不可用（或该接口上的扩展方法），则不能从接口的实例中调用它。

由于您定义：

```
private IDataService _dataService; 
```

这意味着您只能访问在（或作为扩展方法）接口中`_dataService`声明的东西，而不管该接口的实现是什么。`IDataService`

所以你的选择是：

1) 使 _dataService 变量成为已`LoadPortalStatus`定义的类型。2）添加`LoadPortalStatus`到`IDataService`界面。`IDataService`3）为被调用创建一个扩展方法`LoadPortalStatus`

在我看来，其中任何一个都可以，尽管 1 或 2 可能更可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:12:13.497

如果我很愚蠢，请原谅我，但看起来你没有 LoadPortalStatus() 方法。但是，您确实有 2 x LoadChartItems()。

复制粘贴错误？

你有没有机会发布接口代码？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:13:32.780

这可能过于明显，但您是否会因为您的代码中实际上没有`LoadPortalStatus`方法而收到此错误？

您有多个`LoadChartItems`具有相同签名的方法 - 是否有可能其中一个应该是`LoadPortalStatus()`方法？

```
public void LoadChartItems(Action<IEnumerable<ChartModel>> success, Action<Exception> fail)
{
    ....
}

//Same signature as above - is this supposed to implement LoadPortalStatus??
public void LoadChartItems(Action<IEnumerable<ChartModel>> success, Action<Exception> fail)
{
    ....
} 
```

# objective-c - NSURLConnectionDelegate retainCount 失控

> ID：10502289
> 
> 赞同：0
> 
> 时间：2012-05-08T16:08:44.133
> 
> 标签：objective-c, cocoa, memory-management, nsurlconnection

我有一个处理一些 SOAP 通信的 NSURLConnectionDelegate 对象。本质上，我设置了一些属性值，然后调用一个构建 xml 请求的方法，然后将其发送到服务器。该对象也是一个 NSXMLParserDelegate，因此它可以解析来自服务器的 xml 响应并适当地处理数据。

使用对象时，我首先为许多属性设置值。之后的保留计数仍然是一。然后我调用我的第一个方法，这就是乐趣开始的时候。任何时候调用自定义方法或 NSURLConnectionDelegate 方法时，保留计数都会增加 1。调用 NSXMLParserDelegate 方法时不会发生这种情况。在所有通信完成并且我完成了对象的保留计数后，它的保留计数为 43。释放对象不会减少保留计数，所以我最终得到了一个我无法释放的对象。除此之外，该对象按预期工作。

有很多代码，我不确定什么是相关的，因为实际上我在方法中所做的任何事情似乎都没有导致 retainCount 增加。唯一值得一提的是，我从后台线程调用这些方法，但在主线程上执行它们：

```
[tEditor performSelectorOnMainThread:@selector(requestQueueList) withObject:nil waitUntilDone:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:36:30.910

原来我将一个合成属性命名为“release”，并且无意中覆盖了对象的 release 方法。哎呀！

# php - 动作助手包含错误 + getActionController 为空

> ID：10502292
> 
> 赞同：2
> 
> 时间：2012-05-08T16:08:56.550
> 
> 标签：php, zend-framework

我想写一些动作助手，但似乎我做得不好。

首先，在我的 Bootstrap 文件中，我正在执行以下操作：

```
Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH.'/controllers/helpers/My/Helper/', 'My_Helper'); 
```

在这个目录中，我有以下树：

```
My/Helper/
  - Fileupload/
    - Abstract.php
    - Xhr.php
  - Fileupload.php 
```

在我的控制器中，我成功调用了文件上传助手（在 My_Helper_Fileupload 类中）：

```
$res = $this->_helper->fileupload($directory); 
```

但是在这个助手的构造函数中，我正在尝试获取另一个助手（在 My_Helper_Fileupload_Xhr 类中）：

```
Zend_Controller_Action_HelperBroker::getStaticHelper('Fileupload_Xhr'); 
```

这导致我出错

> 找不到名称 FileuploadXhr 的操作助手

我究竟做错了什么？我尝试了很多东西，但我无法弄清楚什么是错的......

此外，经过几次测试，似乎在我的文件上传助手的构造函数中，当我调用 getActionController 方法时，我得到了 NULL。不是应该自动设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T00:51:41.510

助手代理将删除下划线作为其“规范化”你给它的助手名称的过程的一部分。它仅处理 CamelCased 助手名称，因此您`Fileupload_Xhr`将转换为`FileuploadXhr`.

最终负责查找和加载正确 PHP 文件的 Zend_Loader 使用下划线来确定何时应该添加目录分隔符。

如果将这两件事结合起来，实际的结果是您不能在任何路径下为操作助手代理提供嵌套文件夹结构。您希望能够为添加的任何路径加载的所有帮助程序类`addPath`必须直接位于给定路径下，没有中间的子文件夹。

简单的解决方案是将您的助手`My/Helper/Fileupload/Xhr.php`从`My/Helper/FileuploadXhr.php`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T03:17:34.703

假设你正在使用`My`你的 appnamespace——这是我通常做的；`Application`输入时间太长 - 这是一种方法。

在引导程序中：

`Zend_Controller_Action_HelperBroker::addPath(APPLICATION_PATH .'/controllers/helpers', 'My_Controller_Helper');`

将您的助手类命名为`My_Controller_Helper_SomeHelper`并将其存储在文件中`application/controllers/helpers/SomeHelper.php`。

使用以下方法调用控制器：

`$this->_helper->someHelper()`

如果您的 appnamespace 不同，只需替换`My_`为您的 appnamespace。

# file - 无法两次更新文件的时间戳

> ID：10502295
> 
> 赞同：-3
> 
> 时间：2012-05-08T16:09:01.323
> 
> 标签：file

我有一个文件，我处理文件的每一行。在打开文件之前，我将该 .txt 文件的时间戳更改为 currentTimestamp。

打开文件并处理每一行后，我尝试更改正在处理的 .txt 文件的 currentTimestamp 。但更新仅在打开文件时发生。

请建议如何在处理每一行后更新时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:20:27.720

Sachin，您没有提到您使用的是哪种技术（C#、Java、VB 等）

尝试以下解决方案，看看是否有帮助。

1.  打开文件更改时间戳开始逐行处理
2.  配置的行数得到处理后。将行索引存储在内存中。关闭文件并重新打开文件。现在您可以根据您的声明更改时间戳。从之前处理的索引+1开始处理。继续此操作，直到完成所有行。

# mysql - 如何将 MySQL 行设置为只读？

> ID：10502298
> 
> 赞同：36
> 
> 时间：2012-05-08T16:09:17.283
> 
> 标签：mysql, sql, database

我在表格中有一行我不想被更改（永远）。

是否可以将 MySQL 行设置为 READ-ONLY 以使其无法以任何方式更新？如果是这样，怎么做？

如果不是，是否可以在该行的其中一列中设置一个永久值以使其无法更改？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-08T16:12:40.047

这可能是业务逻辑，可能不属于您的数据存储层。但是，它仍然可以使用[触发器](https://dev.mysql.com/doc/en/trigger-syntax.html)来完成。

`BEFORE UPDATE`如果“锁定”记录即将更新，您可以创建引发错误的触发器；由于在执行操作*之前*发生错误，因此 MySQL 停止处理它。如果您还想防止记录被删除，您需要创建一个类似的触发器`BEFORE DELETE`。

要确定记录是否“锁定”，您可以创建一个布尔`locked`列：

```
ALTER TABLE my_table ADD COLUMN locked BOOLEAN NOT NULL DEFAULT FALSE;

DELIMITER ;;

CREATE TRIGGER foo_upd BEFORE UPDATE ON my_table FOR EACH ROW
IF OLD.locked THEN
  SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Cannot update locked record';
END IF;;

CREATE TRIGGER foo_del BEFORE DELETE ON my_table FOR EACH ROW
IF OLD.locked THEN
  SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Cannot delete locked record';
END IF;;

DELIMITER ;

UPDATE my_table SET locked = TRUE WHERE ...; 
```

请注意，这[`SIGNAL`](http://dev.mysql.com/doc/en/signal.html)是在 MySQL 5.5 中引入的。在早期版本中，您必须执行一些导致 MySQL 引发错误的错误操作：我经常调用一个不存在的过程，例如`CALL raise_error;`

* * *

> 我无法在此表上创建附加列，但该行在其中一列中具有唯一 id，那么我将如何针对这种情况执行此操作？

同样，如果您*绝对必须*将此逻辑放在存储层中——并且无法通过 PK 以外的任何方式识别锁定的记录——您*可以*将测试硬编码到触发器中；例如，要“锁定”记录`id_column = 1234`：

```
DELIMITER ;;

CREATE TRIGGER foo_upd BEFORE UPDATE ON my_table FOR EACH ROW
IF OLD.id_column <=> 1234 THEN
  SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Cannot update locked record';
END IF;;

CREATE TRIGGER foo_del BEFORE DELETE ON my_table FOR EACH ROW
IF OLD.id_column <=> 1234 THEN
  SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Cannot delete locked record';
END IF;;

DELIMITER ; 
```

但这*绝对是可怕*的，我*几乎会做任何事情*来避免它。

# python - 在 Python 中，如何使用自定义键与多个值进行比较？

> ID：10502301
> 
> 赞同：4
> 
> 时间：2012-05-08T16:09:33.850
> 
> 标签：python

在实现类的`__eq__`和`__lt__`方法时，通常使用元组对要比较的值进行分组，如下所示：

```
@total_ordering
class Foo(object):
    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c

    def __hash__(self):
        return hash((self.c, self.a, self.b))

    def __eq__(self, other):
        return (self.c, self.a, self.b) == (other.c, other.a, other.b)

    def __lt__(self, other):
        return (self.c, self.a, self.b) < (other.c, other.a, other.b) 
```

然而，这使用了每个键的自然顺序。如果我想改变，例如，如何`a`排序？

到目前为止，这是我想出的，虽然它似乎工作正常，但我想知道是否有更好的方法来解决它：

```
@total_ordering
class Foo(object):
    def __init__(self, a, b, c):
        self.a = MyA(a) # Note
        self.b = b
        self.c = c

    def __hash__(self):
        return hash((self.c, self.a, self.b))

    def __eq__(self, other):
        return (self.c, self.a, self.b) == (other.c, other.a, other.b)

    def __lt__(self, other):
        return (self.c, self.a, self.b) < (other.c, other.a, other.b)

class MyA(A):
    def __hash__(self):
        # ...

    def __eq__(self, other):
        # ...

    def __lt__(self, other):
        # ... 
```

子类化`A`让我可以定义我的自定义排序，并允许`MyA`以其他所有方式表现得像一个常规`A`的，这很好，但它似乎是浪费/不必要的冗长，特别是如果我必须为多个字段执行此操作。

**编辑：**根据user1320237下面的回答，这就是我想出的：

```
@total_ordering
class Foo(object):
    def __init__(self, a, b, c):
        self.a = a
        self.b = b
        self.c = c

    def __hash__(self):
        return hash((self.c, self.a, self.b))

    def __eq__(self, other):
        return (0, 0, 0) == (cmp(self.c, other.c),
                             cmpA(self.a, other.a),
                             cmp(self.b, other.b))

    def __lt__(self, other):
        return (0, 0, 0) > (cmp(self.c, other.c),
                            cmpA(self.a, other.a),
                            cmp(self.b, other.b))

def cmpA(a1, a2):
    # ... 
```

（注意`>`in `__lt__`since`cmp(x, y)`返回`-1`if`x < y`和`__lt__`should return `True`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T19:03:42.010

例如，如果您想使用 list.sort() 进行排序，您可以将参数传递给它：

你的代码：

```
...
    def __lt__(self, other):
        return (self.c, self.a, self.b) < (other.c, other.a, other.b)

...
list.sort() 
```

相等的：

```
list.sort(key = lambda self: (self.c, self.a, self.b)) 
```

也等价：

```
list.sort(cmp = lambda self, other: \
                (self.c, self.a, self.b) < (other.c, other.a, other.b)) 
```

因此，如果您想以不同的方式对答案进行排序，我建议：

```
class Foo(object):
    @staticmethod
    def cmp_absoluteOrder(self, other):
        return (self.c, self.a, self.b) < (other.c, other.a, other.b)

    @staticmethod
    def cmp_otherOrder(self, other):
        return ...

    @staticmethod
    def cmp_combinedSort(cmpA, cmpB, cmpC):
        return lambda self, other: (0, 0, 0) < (cmpA(self.c, other.c), cmpA(self.a, other.a), cmpA(self.b, other.b), )

    def __hash__(self):
        return hash(self.c) ^ hashA(self.a) ^ hash(self.b)

...
list.sort(cmp = Foo.cmp_absoluteSorting)
list.sort(cmp = Foo.cmp_combinedSort(cmp, (lambda a1, a2: ...), cmp))

hashA = hash # or replace it if important # but the same a will retunrn the same hash 
```

或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:16:09.887

如果这只是一次性操作，则类似以下的操作将起作用：

```
def custom_sorter(foo):
   """Takes Foo objects and gives a representation for sorting."""
   return (foo.c, A(foo.a), foo.b)

sorted(foo_list, key=custom_sorter) 
```

如果要多次执行，您可以考虑使用`Foo`可扩展的类方法并生成类似于`custom_sorter`.

如果您多次使用**相同的自定义分拣机，为什么不将其作为课程的一部分呢？**

你真的只需要问自己*为什么*，*我真的需要*。

# java - JNDI 查找是否保持连接打开 - 这就是我的负载平衡被破坏的原因吗？

> ID：10502304
> 
> 赞同：0
> 
> 时间：2012-05-08T16:09:52.347
> 
> 标签：java, jboss, jndi

我们有几个 JBoss 服务器位于使用循环策略的硬件负载平衡器后面。我们所有的（JBoss）客户端过去都偶尔连接，这些客户端会正确地进行负载平衡。但是，一个新客户端每分钟发送约 100 个查询，这些查询都被定向到同一台服务器。

我想正在发生的事情是远程客户端创建其初始上下文，进行查找，并在一段时间（大约 15 秒）内保持与 JNDI 服务器的连接，以节省重新创建连接的开销。这意味着第 2 个和第 N 个请求将发送到同一台服务器。我们用以下代码证明了这一点（使用 JBoss 库的 Jython）：

```
def __call__(self):
    p = Properties()
    p[Context.PROVIDER_URL] = "jnp://my.load.balancer:1099"
    p[Context.INITIAL_CONTEXT_FACTORY] = JndiLoginInitialContextFactory.name
    p[Context.SECURITY_PRINCIPAL] = <redacted>
    p[Context.SECURITY_CREDENTIALS] = <redacted>

    ctx = InitialContext(p)
    home = ctx.lookup("ejb/ServerNameService")

    ejbQuery = home.create()

    print "Server name: %s", (ejbQuery.getServerName())

    ctx.close() 
```

现在，如果我在同一个 JVM（多线程）中调用 100 次，那么我总是得到同一个服务器。如果我用新的 JVM 调用它 100 次，那么我会得到一个混合。

有什么方法可以在不使用集群技术的情况下强制 JNDI 重新协商它的初始连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:34:20.937

也许。JNDI 是一种对象缓存。因此，如果您在同一个 VM 中多次询问相同的名称，您总是会得到相同的结果。这是正确的行为，但你不喜欢它。

解决方案是在 JNDI 中注册工厂而不是实例本身。这样，工厂可以从 JNDI 获取创建连接的信息，但每次调用它时都会返回一个新实例（或从内部池返回一个）。

JDBC 使用相同的方法。不是将 JDBC 连接添加到 JNDI 缓存，而是添加了一个`DataSource`- 它是 JDBC`java.sql.Connection`实例的工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:32:21.547

您忘了告诉我们硬件负载均衡器实际上是在“平衡”什么。

由于我无法想象硬件负载平衡器知道专有的 JBoss 远程处理协议，因此在您的情况下，很可能只是对 JNDI 查找进行负载平衡。这意味着您从同一个 InitialContext 获得的所有客户端存根最终都将转到同一个物理服务器。

如果硬件负载平衡器应该循环每个请求，远程调用必须通过负载平衡器支持的协议进行，例如 HTTP。如果您正确配置它，JBoss 应该支持它。

当然，您也可以设置一个“真正的”JBoss 集群，让 JBoss 代码处理负载平衡和故障转移，但是 JBoss 集群代码错误多且脆弱，您很可能会用这种方法破坏其他东西。

# upnp - 在哪里可以找到完整的 DLNA 规格？

> ID：10502306
> 
> 赞同：26
> 
> 时间：2012-05-08T16:09:59.810
> 
> 标签：upnp, specifications, dlna

我正在寻找在 Android 中创建一个 DLNA 媒体服务器类型的东西。我为自己找到了一个名为 Cyber​​Link 的 Java UPnP 库，我希望为 M-DMS 或移动数字媒体服务器实现 DLNA 接口，这里有一个简短的描述：

[http://www.dlna.org/dlna-for-industry/digital-living/how-it-works/dlna-device-classes/mobile-digital-media-server](https://web.archive.org/web/20130910184410/http://www.dlna.org/dlna-for-industry/digital-living/how-it-works/dlna-device-classes/mobile-digital-media-server)

问题是我找不到这种设备的实际技术规格。我在谷歌上花了很多力气，所以请不要向我扔“JFGI”。我遇到了一个论坛帖子，暗示我可能需要为访问规范付费，但它非常含糊：

[http://www.ps3mediaserver.org/forum/viewtopic.php?f=4&t=3608](https://web.archive.org/web/20130509045303/http://www.ps3mediaserver.org/forum/viewtopic.php?f=4&t=3608)

作为明显解决方案发布的链接也已损坏，我在当前的 UPnP 网站上找不到任何类似的文档。

有人知道我在哪里可以找到 DLNA 规范吗？或者也许是自己实施它的替代解决方案？任何帮助将**不胜**感激！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-17T13:43:15.940

完整的 DLNA 规格仅供 DLNA 会员使用，并且需要支付高昂的费用。参考论坛帖子中的那个人正在混淆。UPnP 不是“dlna 文档”。DLNA 是对 UPnP 的改进，是一组以互操作性为名的规则和限制。大部分 DLNA 规范只是详细列出了允许的媒体格式、子格式、采样率、比特率等。而 UPnP 仅指定抽象设备接口。链接是正确的 [http://upnp.org/resources/upnpresources.zip](http://upnp.org/resources/upnpresources.zip) 和*standardizeddcps*是那里的一个子文件夹。DCP 代表设备控制协议，也就是设备必须实现以参与 UPnP 网络的抽象接口。你会对**arch-DeviceArchitecture感兴趣**文档以了解一般的 UPnP 网络，然后是 MediaServer* 文件夹，最重要的是**av-ContentDirectory**，它是根据 DLNA 规范提供 DMS 的核心服务。是的，Intel Device Spy 绝对是必不可少的工具。Wireshark 也将成为您的朋友。逆向工程是日常工作，DLNA 规范对您没有帮助:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-17T20:37:04.153

DLNA 规范现在可供任何人使用——您无需成为付费会员即可下载。

来自 DLNA.org 网站：（[http://www.dlna.org/dlna-for-industry/guidelines](http://www.dlna.org/dlna-for-industry/guidelines)）

> 非会员公司可以使用下面的表格下载指南。
> 
> **请注意，您今天下载的指南是 DLNA 指南的最新发布版本。当新的指南发布时，您需要下载更新的指南以接收额外的更新。请注意，并非所有更新都已公布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:27:07.910

我不确定从哪里获得完整的 DNLA 规范，但您可以通过使用类似[Intel Device Spy](http://software.intel.com/en-us/articles/intel-software-for-upnp-technology-download-tools/#anchor_2)的工具来近似相同的信息，以查看现有 M-DMS 设备发布了哪些服务，然后使用可用文档中的标准化 dcps 目录中的服务描述来自[UPnP 论坛](http://upnp.org/resources/upnpresources.zip)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T14:38:00.913

您可以从 DLNA 组织获得 DLNA 规范，为此您必须是该组织的成员。

Android 平台上有这个 DLNA 兼容的数字媒体服务器 (DMS)，它对所有 Android 平台都是免费的。它经过所有领先的 DLNA 认证电视的测试。

[像素媒体服务器](https://play.google.com/store/apps/details?id=com.cmc.dms&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5jbWMuZG1zIl0)。

# ruby-on-rails - Rails 的 include() 不适用于动态关联条件

> ID：10502307
> 
> 赞同：2
> 
> 时间：2012-05-08T16:10:05.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

在一个多租户应用程序上工作，其中我的大多数模型都有一个tenant_id 字段，因此我可以通过关联 ( `current_tenant.applications.find(params[:id])`) 查找来确保读取权限：

```
class Application < ActiveRecord::Base
  belongs_to :tenant
  has_many :app_questions, :conditions => proc {{:tenant_id => tenant_id}}, :dependent => :destroy
end 
```

我喜欢这让我可以优雅地创建一个自动设置tenant_id的新AppQuestion：

```
@application = current_tenant.applications.find(params[:app_question][:application_id])
@question = @application.app_questions.build(params[:app_question])
#... 
```

问题是，当我尝试使用`includes()`预加载关联时，它会引发错误：

```
current_tenant.applications.where(:id => params[:id]).includes(:app_questions => :app_choices).first

NoMethodError (undefined method `tenant_id' for #<Class:0x007fbffd4a9420>):
  app/models/application.rb:7:in `block in <class:Application>' 
```

我可以重构，这样我就不必在关联条件中使用 proc，但我想知道是否有人有更好的解决方案。

ref[确实说](http://guides.rubyonrails.org/association_basics.html#has_many-conditions)：“如果您需要在运行时动态评估条件，请使用 proc”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T21:09:31.273

我已经用更多细节回答了另一个问题，试图解释为什么这不起作用。

当他们说动态是因为 proc 可以在运行时执行，但**不能**在类的现有实例的上下文中执行，`Application`因为当您调用此关系时它不存在

```
Application.where(:id => params[:id]).includes(:app_questions => :app_choices) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:18:14.787

`:conditions`接受 a的能力`proc`没有记录在参考文献中。我怀疑它不像你想象的那样工作。

`:conditions`接受 SQL`WHERE`子句或可以打开的散列。它被插入到获取 :app_questions 记录的 SQL 中，如果它是 a`proc`它只调用一次以获取要构造的 SQL 语句的片段。

查看您的数据库关系可能会有所帮助。app_questions 是否应该链接到租户或应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T22:31:31.750

假设关系本身有效，您可以尝试`preload` 而不是`includes`

# css - 在图像映射区域上设置光标 [使用 CSS]

> ID：10502309
> 
> 赞同：8
> 
> 时间：2012-05-08T16:10:07.267
> 
> 标签：css

有没有办法用 CSS`cursor`在`area`元素上设置 a ？似乎没有。这段代码似乎什么都不做。

**CSS**

```
area {cursor: help;} 
```

**HTML**

```
<img src="blah.png" width="800" height="550" alt="Blah" usemap="#blah-map">
<map name="blah-map">
    <area shape="rect" coords="104,86,210,113" href="okgo.htm" alt="OK Go">
</map> 
```

我能想到的最好的技巧是在该区域的顶部绝对放置一个链接，并为其赋予光标样式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-21T20:47:18.400

我最近遇到了一个 css 光标在 Firefox 中正确显示的问题，但在 chrome 或 safari 中却没有。

长话短说，我最终需要设置 display:block; 在区域标签上。我的基本 css 或浏览器默认标签为 display:none;

这是我创建的快速测试用例（在[这里](http://jsfiddle.net/toazron1/K3jXj/)查看）

```
<img usemap="#map" src="http://i.imgur.com/9EcEvkn.jpg" height="120" width="100" />
<map name="map" id="map">
<area shape="rect" coords="0,0,120,100" href="#" />
</map>

area {
    cursor: crosshair;
    display:block;
} 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:01:11.643

将链接绝对定位在图像顶部也是我的解决方案/技巧。

如果它不是一个非常重要的图像，您可以通过创建一个以图像为背景的容器，绝对定位链接，并将链接文本作为`alt`您当前使用的文本来相当语义地做到这一点。然后，在链接上使用否定`text-indent`来隐藏文本。它会按您的意愿工作，但是当 CSS 被禁用时，应该显示纯文本链接来代替人造图像映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T21:13:39.003

**CSS**

```
#blah-map area{
    cursor:default;
} 
```

**HTML**

```
<img src="blah.png" width="800" height="550" alt="Blah" usemap="#blah-map">

<map id="blah-map" name="blah-map">
    <area shape="rect" coords="104,86,210,113" href="okgo.htm" alt="OK Go">
</map> 
```

只需给地图一个 id，然后为该 id 的区域设置光标类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T11:48:47.793

使用 Webkit 导航器，CSS：

```
area {cursor: help;} /* or other type */ 
```

不起作用，所以我使用“href”，你可以像这样禁用

```
<area ... href="javascript:void(0);" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-12T02:25:59.857

toazron1 给出的答案在 WebKit/Safari 中完美运行并且没有任何问题：

**CSS**

```
area {
    cursor: help;
    display: block;
} 
```

我们的想法是正确[显示](http://www.w3schools.com/cssref/pr_class_display.asp)任何内容`area`，因此`display: inline`即使未设置属性`display: initial`也可以正常工作。`href`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T07:55:48.430

虽然这个挑战已经得到解答，但我想分享一个我通过实验发现的有用的 IE 解决方法。

问题：我正在使用图像地图，我不希望光标在悬停时变为手/指针状态。这是一个不需要实际锚链接的工具提示 (qTip) 实现。我希望光标保持为箭头（默认状态）或让它在悬停时变为另一个状态。

我无法让 IE 确认样式 - 光标在悬停时仍然改变:(

解决方案？作为最后一次尝试，我添加了样式：

```
cursor: default;
display: block; 
```

但我也将它们与用于地图本身的图像相关联：

```
area, img {cursor: default; display: block;} 
```

希望这对某些人有所帮助。

# cassandra - 无法在 Cassandra 中读取整数值

> ID：10502311
> 
> 赞同：0
> 
> 时间：2012-05-08T16:10:15.730
> 
> 标签：cassandra

我有一个简单的列族“用户”

```
 System.out.println("  read User");
    long timestamp = System.currentTimeMillis();
    clientA.insert(ByteBuffer.wrap("mike".getBytes()), new ColumnParent("Users"), 
            new Column(ByteBuffer.wrap("email".getBytes())).setValue(ByteBuffer.wrap("mike@gmail.com".getBytes())).setTimestamp(timestamp)
            , ConsistencyLevel.ONE);

    clientA.insert(ByteBuffer.wrap("mike".getBytes()), new ColumnParent("Users"), 
            new Column(ByteBuffer.wrap("totalPosts".getBytes())).setValue(ByteBuffer.allocate(4).putInt(27).array()).setTimestamp(timestamp)
            , ConsistencyLevel.ONE);

    SlicePredicate predicate = new SlicePredicate();
    predicate.setSlice_range(new SliceRange(ByteBuffer.wrap(new byte[0]), ByteBuffer.wrap(new byte[0]), false, 10));

    ColumnParent parent = new ColumnParent("Users");

    List<ColumnOrSuperColumn> results = clientA.get_slice(ByteBuffer.wrap("mike".getBytes()), 
            parent, 
            predicate, 
            ConsistencyLevel.ONE);

    for (ColumnOrSuperColumn result : results) {
        Column column = result.column;
        System.out.println(new String(column.getName()) + " -> "+ new String(column.getValue())+", "+column.getValue().length);
    } 
```

它返回

```
 read User
email -> mike@gmail.com, 14
totalPosts -> 
```

因此，thrift 客户端无法读取 totalPosts

使用 cassandra-cli

[default@test] 获取用户['mike']['totalPosts']; =>（列=totalPosts，值=0000001b，时间戳=1336493080621）经过时间：10 毫秒。

如何使用 Java thrift 客户端检索此整数值？

使用卡桑德拉 1.1

编辑：似乎是由于这部分

```
for (ColumnOrSuperColumn result : results) {
        Column column = result.column;
        System.out.println(new String(column.getName()) + " -> "+Arrays.toString(column.getValue()));
    } 
```

返回

```
email -> [109, 105, 107, 101, 64, 103, 109, 97, 105, 108, 46, 99, 111, 109]
totalPosts -> [0, 0, 0, 27] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:14:25.823

您的列值作为字节返回，与插入它们的方式相同。所以“电子邮件”列的值为`[109, 105, 107, 101, 64, 103, 109, 97, 105, 108, 46, 99, 111, 109]`，解释为 ascii 为`mike@gmail.com`。您写入 ByteBuffer 的数字 27 `[0, 0, 0, 27]`（通过 putint 调用）以同样的方式出现。

如果您绝对必须使用原始节俭接口，您可能希望使用`ByteBuffer.getInt()`. 但如果可能的话，我建议使用一个库来解决 thrift 接口的丑陋问题，它应该可以解决像这样的值序列化问题。也许看看[Hector](https://github.com/rantav/hector)，或者完全跳过旧接口，直接使用[Cassandra-JDBC使用](https://code.google.com/a/apache-extras.org/p/cassandra-jdbc/)[CQL](http://www.datastax.com/docs/1.0/references/cql/index)。

# c# - 使用 P/Invoke 在 IE 中选择选项卡

> ID：10502312
> 
> 赞同：1
> 
> 时间：2012-05-08T16:10:16.223
> 
> 标签：c#, pinvoke

IE 窗口可以有多个选项卡。我想使用 P/Invoke 选择具有匹配标题的选项卡。我已经有代码可以遍历所有选项卡并检查此类选项卡是否存在。

参考 P/Inoke：http:
[//msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548%28v=vs.85%29.aspx)

```
 while ((tabNum++ <= 15) &&
               (curChild = FindWindowEx(parentHwnd, curChild, "TabWindowClass", IntPtr.Zero)) != IntPtr.Zero)
        {
            String sb = GetWindowTitle(curChild);

            if (sb.Contains(expectedTitleString))
            {
                //TODO : I want to select this tab here.
                foundTab = true;
                break;
            }
            if (is_ie8)
            {
                parentHwnd = FindWindowEx(hWnd, parentHwnd, "Frame Tab", IntPtr.Zero);
                curChild = IntPtr.Zero;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:18:36.823

也许将选项卡设置为焦点窗口有效？

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd); 
```

# solr - Solr 似乎在提交时阻止更新请求

> ID：10502313
> 
> 赞同：5
> 
> 时间：2012-05-08T16:10:22.137
> 
> 标签：solr, timeout

我们使用以下自动提交选项在 Solr 3.6 中运行主从设置：

最大文档数：500000

最大时间：600000

我们的索引中有大约 500 万个文档，占用大约 550GB。我们在 Amazon EC2 XLarge 实例（4 个虚拟内核和 15GB）上同时运行主服务器和从服务器。我们没有特别高的写入吞吐量——每分钟大约 100 个新文档。

我们使用 Jetty 作为分配给它的 6GB 的容器。

问题是一旦开始提交，我们所有的更新请求都会开始超时（我们没有对这个框执行查询）。提交本身似乎需要大约 20-25 分钟，在此期间我们无法向 Solr 添加任何新文档。

以下问题中的一个答案建议使用 2 个内核并在完全更新后交换它们。然而，这似乎有点过头了。

[Solr 请求在索引更新期间超时。也许复制是一个可能的解决方案？](https://stackoverflow.com/questions/5154093/solr-requests-time-out-during-index-update-perhaps-replication-a-possible-solut)

关于 Solr 似乎阻止请求的原因，我还有什么需要注意的吗？我乐观地希望配置中有一个我忽略的“dontBlockUpdateRequestsWhenCommitting”标志......

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T21:04:14.967

根据赏金原因，这里提到的问题是 Solr 的解决方案：

Solr 具有称为 SolrCloud 的功能，从`4.x`Solr 版本开始。代替以前的主/从架构，有领导者和副本。领导者负责索引文档和副本回答查询。系统由 Zookeeper 管理。如果一个领导者宕机，它的一个副本被选为新的领导者。

总而言之，如果您想自动划分对 SolrCloud 来说可以的索引过程，因为每个分片都有一个领导者，他们负责为其分片的文档编制索引。当您向系统发送查询时，将有一些 Solr 节点（当然，如果 Solr 节点超过分片计数）不负责索引但准备好回答查询。当您添加更多副本时，您将获得更快的查询结果（但在索引等时会导致更多的入站网络流量）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-22T10:02:58.357

对于那些面临类似问题的人来说，我的问题的原因是文档中的字段太多，我使用了自动字段 *_t，并且字段数量增长非常快，当达到一定数量时，它只是hogs solr 和 commit 将永远持续下去。

其次，我花了一些精力进行分析，它最终大部分时间都被 string.intern() 函数调用所消耗，似乎文档中的字段数很重要，当这个数字上升时，string.intern () 似乎越来越慢。

solr4 源似乎不再使用 string.intern() 了。但是大量的字段仍然很容易扼杀性能。

# ruby-on-rails - 什么会减慢我的规格？

> ID：10502316
> 
> 赞同：0
> 
> 时间：2012-05-08T16:10:30.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, rspec

我正在使用 Ruby on Rails 3.2.2、FactoryGirl 3.1.0、FactoryGirlRails 3.1.0、Rspec 2.9.0 和 RspecRails 2.9.0。在我的规范文件（每个文件大约 1300 个示例）中，在每个示例运行之前，我为数据库播种并使用工厂创建和存储少量记录：

```
# spec/spec_helper.rb

config.before(:suite) do
  # Cleans the database.
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner.clean_with(:truncation)

  # Seeds the database.
  load "#{Rails.root}/db/seeds.rb"
end 
```

我想知道为什么，当我`rspec ./spec/models/my_model_spec.rb`在终端窗口中运行命令时，我的规范***开始快速运行，***但经过一段时间（即运行了大约 300 个示例之后），这些运行***缓慢***。我的示例非常简单，在性能方面几乎相同：

```
it "can not update title" do
  @article.update_attribute(:title, "Sample title").should be_false
end 
```

经过一定数量的测试后，上述示例需要 20/30 秒才能完成（！），有时也需要 60/120 秒（！！！）。

**如果这些示例非常简单并且在性能方面几乎相同，那么在运行大约 300 个示例会减慢我的规范之后会发生什么？这种行为有原因吗？**

* * *

*注意 I*：我尝试单独运行规范，这些都很快。

*注二*：当我`ruby`在我的“活动监视器”中运行规范时（我使用的是运行 Snow Leopard 10.6.8 的 Mac OS X）快速使用 100% 的 CPU。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:28:26.087

在每个示例之后尝试清理数据库。把它放在你的 rspec_helper 配置块中：

```
 config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end 
```

# asp.net - 如何将 linq 对象转换为 asp.net 对象..？

> ID：10502318
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:10:40.270
> 
> 标签：asp.net, asp.net-mvc-3, linq

代码：

```
Domain ob = new Domain();

[HttpPost]
public ActionResult Create(Domain ob)
{
    try
    {
        //// TODO: Add insert logic here
        FirstTestDataContext db = new FirstTestDataContext();

        tblSample ord = new tblSample();
        ord = ob;
        db.tblSamples.InsertOnSubmit(ord);

        db.SubmitChanges();
        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

在这里我收到这样的错误

无法将类型“mvcInsertLinqForms.Models.Domain”隐式转换为“mvcInsertLinqForms.tblSample”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:25:23.673

您不能分配给`ord`，`ob`因为它们不是同一类型。您似乎正在尝试将视图模型 ( `ob`) 映射到您的域模型 ( `tblSample`)。您可以通过设置域模型的相应属性来做到这一点：

```
[HttpPost]
public ActionResult Create(Domain ob)
{
    try
    {
        tblSample ord = new tblSample();
        // now map the domain model properties from the 
        // view model properties which is passed as action
        // argument:
        ord.Prop1 = ob.Prop1;
        ord.Prop2 = ob.Prop2;
        ...

        FirstTestDataContext db = new FirstTestDataContext();
        db.tblSamples.InsertOnSubmit(ord);
        db.SubmitChanges();
        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

为了避免手动进行这种映射，您可以使用[AutoMapper](http://automapper.org/)之类的工具，它可以帮助您在视图模型和域模型之间来回映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:20:45.693

```
[HttpPost]
public ActionResult (Domain model) // or (FormCollection form), use form.get("phone")
{
//---
return View();
} 
```

# php - 将 php 变量传递给重力表单钩子

> ID：10502319
> 
> 赞同：1
> 
> 时间：2012-05-08T16:10:40.610
> 
> 标签：php, variables

我想我对返回和回显变量感到非常困惑。

我[从他们的支持中得到了这个重力形式的钩子](http://www.gravityhelp.com/documentation/page/Dynamically_Populating_the_Post_Author)......

```
add_filter('gform_field_value_facebook_name', 'my_custom_population_function');
function my_custom_population_function($value){
    return 'boom!';
} 
```

这有效并返回“繁荣！” 作为我的表单字段默认变量。

这对于一般文本字符串来说非常简单，但我试图返回一个 PHP 变量。

我将 facebook PHP SDK 加载到我的 functions.php 中，其范围比重力形式挂钩更高。facebook SDK 绝对有效，例如我目前在我的 wordpress 主题文件中呼应了这一点......

```
echo $userData['name'] 
```

但我的问题是，如果我尝试将上述变量返回到重力内以进行钩子，为什么它不起作用？

请查看我在下面尝试过的内容，但它什么也没返回...

```
add_filter('gform_field_value_facebook_name', 'my_custom_population_function');
function my_custom_population_function($value){
    return $userData['name'];
} 
```

当我试图在过滤器中回显一个变量时，我也在我的 wordpress functions.php 中尝试过类似的东西......

```
$fb_app_id      = '12345678910';

// APP ID FILTER
add_action( 'fb_app_id', 'echo_fb_app_id' );
function echo_fb_app_id() {
    echo $fb_app_id;
} 
```

但这不会返回任何内容，并且范围是相同的。

谁能告诉我为什么我不能传递这些变量。我认为这是技术术语。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:21:33.430

这是因为在 PHP 中，函数不读取没有`global`关键字的全局变量。

```
$fb_app_id      = '12345678910';

// APP ID FILTER
add_action( 'fb_app_id', 'echo_fb_app_id' );
function echo_fb_app_id() {
    global $fb_app_id; // tells PHP to use the global variable
    echo $fb_app_id;
} 
```

尝试添加`global $userData;`到您的`my_custom_population_function`.

# iphone - 我如何使用 iPhone 日历添加事件？

> ID：10502320
> 
> 赞同：1
> 
> 时间：2012-05-08T16:10:48.963
> 
> 标签：iphone, titanium, titanium-mobile

我想使用 iPhone 日历添加事件。

我从 github 尝试 ti.com.calendar 模块，但在这个模块中只保存 startTime EndTime、Title 和详细信息。但是，不要使用 allDay 重复或不提醒。

我如何使用这个。在日历中？

我还提醒用户通知。但是，在删除事件之后。通知未删除。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:59:33.400

下面是代码的和平。闹钟日期用于匹配工作时间（用户不喜欢醒来做工作:)

```
eventStore = [[EKEventStore alloc] init];

    EKEvent *newEvent = [EKEvent eventWithEventStore:eventStore];
    newEvent.calendar = eventStore.defaultCalendarForNewEvents;
    NSString *titleForEvent = [NSString stringWithFormat:@"In country:%@ will be:\n%@ event",[mo valueForKey:@"name"],[mo valueForKey:@"necessaryData"]];
    newEvent.title = titleForEvent;
    newEvent.allDay = YES;

    NSDate *date = [mo valueForKey:@"date"];
    NSDate *dateAlarm = [mo valueForKey:@"dateAlarm"];
    EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:[dateAlarm timeIntervalSinceDate:date]];

    if (dateAlarm < [NSDate date]){

        dateAlarm = [NSDate dateWithTimeIntervalSinceNow:+18000];
        NSDateFormatter *dateForm = [[NSDateFormatter alloc]init];
        [dateForm setDateFormat:@"%HH"];
        NSString *hourOfAlarm = [dateForm stringFromDate:dateAlarm];
        [dateForm release];
        NSNumberFormatter *numberForm = [[NSNumberFormatter alloc] init];
        NSNumber *hour = [numberForm numberFromString:hourOfAlarm];
        [numberForm release];
        int difference = 0;
        if ([hour intValue] < 9) difference = (9 - [hour intValue]) *3600;
        if ([hour intValue] > 17) difference = (17 - [hour intValue]) *3600;
        if (difference != 0) {
            NSTimeInterval interval = 18000 + difference;
            dateAlarm = [NSDate dateWithTimeIntervalSinceNow:interval];
        }
        alarm = [EKAlarm alarmWithRelativeOffset:[dateAlarm timeIntervalSinceDate:date]];
    }   
    newEvent.startDate = date;
    newEvent.endDate = date;

    //EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:[dateAlarm timeIntervalSinceDate:date]];
    newEvent.alarms = [NSArray arrayWithObject:alarm];

    NSError *error;

    BOOL saved = [eventStore saveEvent:newEvent span:EKSpanThisEvent error:&error];
    if (!saved && error) {
        NSLog(@"%@",[error localizedDescription]);
    } else [mo setValue:newEvent.eventIdentifier forKey:@"eventIdentifier"]; 
```

# tridion - 如何在 SDL Tridion 页面上呈现 asp.net 用户控件？

> ID：10502324
> 
> 赞同：4
> 
> 时间：2012-05-08T16:11:12.140
> 
> 标签：tridion

我有一个模式“控件”，其中有一个名为“标签”（文本类型）的字段。现在我用这个模式创建了一个组件，并将“标签”字段填充为：

```
<RegForm:MyRegisteration runat="server" /> 
```

并更新了网络配置文件。

```
<add src="~/WebUserControl.ascx" tagName="MyRegisteration" tagPrefix="RegForm" /> 
```

我已将组件添加到页面。

现在我想知道这是渲染控件的方法还是其他更好的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T16:17:12.373

正如我在其他一些帖子中提到的，Tridion 并不真正关心您输出的内容。如果您的模板编写了 ASP.NET 或 Java 应用程序需要运行的代码，那么它将运行。

我想知道您是否需要让这个有一个组件，您是否希望编辑器创建控件作为其内容的一部分？你需要翻译它吗？

通常这种类型的“内容”在模板中，而不是在组件中。

始终要牢记的重要一点是：将写入应用程序服务器的内容是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:32:17.910

我使用“代码组件”方法在没有任何版本控制代码管理软件的客户端站点上发布 .net 页面。

这些组件用于存储来自开发服务器的当前工作版本。

要使用此方法，您**必须**确保只有开发人员有权访问这些组件。

# c# - 我应该如何覆盖 DbContext 上的 SaveChanges() 方法以使用 EF 4.3 维护已删除/修改的记录？

> ID：10502325
> 
> 赞同：3
> 
> 时间：2012-05-08T16:11:17.933
> 
> 标签：c#, entity-framework

我想在我的项目中维护所有修改的记录和删除的记录，并使用状态列跟踪它们的状态。下面是我第一次尝试的代码，但由于明显的原因，我似乎无法`OriginalValues.ToObject()`转换为 DbEntityEntry。我应该如何去完成这个？

```
 public override int SaveChanges()
    {
        var now = DateTime.Now;
        var currentUser = HttpContext.Current.User.Identity.Name;
        var trackedEntities = ChangeTracker.Entries<ITrackable>();

        foreach (var trackedEntity in trackedEntities)
        {
            switch(trackedEntity.State)
            {
                case System.Data.EntityState.Added:
                    trackedEntity.Entity.CreatedDate = now;                        
                    trackedEntity.Entity.CreatedBy = currentUser;                        
                    trackedEntity.Entity.Status = Status.Active;
                    break;
                case System.Data.EntityState.Modified:                        
                    var originalEntity = trackedEntity.OriginalValues.ToObject() as DbEntityEntry<ITrackable>;                        
                    originalEntity.Entity.ModifiedDate = now;
                    originalEntity.Entity.ModifiedBy = currentUser;
                    originalEntity.Entity.Status = Status.Modified;

                    var newEntity = trackedEntity.CurrentValues.ToObject() as DbEntityEntry<ITrackable>;
                    newEntity.State = System.Data.EntityState.Added;
                    newEntity.Entity.Status = Status.Active;                                                
                    break;
                case System.Data.EntityState.Deleted:
                    trackedEntity.State = System.Data.EntityState.Modified;
                    trackedEntity.Entity.Status = Status.Deleted;
                    break;                            
            }                
        }
        return base.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:48:35.487

我不确定我是否正确理解了您在`Modified`此案中要达到的目标。但我的理解是`ToObject()`创建一个全新的对象并用`OriginalValues`字典中的属性值填充它。因此，`originalEntity`它不附加到上下文，并且当变量超出范围时只会被垃圾收集而没有任何影响。

所以，是不是需要将`originalEntity`修改保存前的最后一个版本作为新添加的实体保存到数据库中呢？

我会试试这个：

```
case System.Data.EntityState.Modified:                        
    var originalEntity = trackedEntity.OriginalValues.ToObject() as ITrackable;
    originalEntity.ModifiedDate = now;
    originalEntity.ModifiedBy = currentUser;
    originalEntity.Status = Status.Modified;
    Entry(originalEntity).Status = System.Data.EntityState.Added;

    trackedEntity.Entity.Status = Status.Active;
    break; 
```

`trackedEntity`无论如何都会被保存，因为它处于状态`Modified`并且`originalEntity`将被创建并保存为代表修改前状态的新对象。

我希望强制转换`ITrackable`应该起作用，因为`ToObject()`创建了一个由`OriginalValues`字典表示的类型的对象，这一定是`ITrackable`因为您通过此接口过滤了`ChangeTracker.Entries`枚举。

以上未经测试，我不确定它是否会起作用。

**编辑**

上面的命名有点混乱，因为`originalEntity`是模型中的实体，`trackedEntity`而`DbEntityEntry<T>`. 也许将其重命名为`originalEntityObject`(ugly) 或 better `trackedEntityEntry`。

`ChangeTracker.DetectChanges()`顺便提一下：在进入循环之前调用是绝对必要的（除非您因此使用更改跟踪代理），`foreach`否则条目可能不处于正确的最终状态并且您输入错误的`case`部分或根本没有部分（当状态是`Unchanged`但仍然改变了属性）。通过与中的快照进行比较来检测 POCO 更改，`OriginalValues`并且最后一次比较是在您的循环之后完成的`base.SaveChanges`，*并且*为时已晚。（另请参阅此处答案中的“编辑 2”：[https](https://stackoverflow.com/a/6157071/270591) ://stackoverflow.com/a/6157071/270591 。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:08:39.020

我正在寻找您应该如何覆盖 SaveChanges() 以实现类似的目标

像这样投射会更容易；

```
((ITrackable)trackedEntity.Entity).CreatedDate = now; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:58:36.143

虽然与您使用的方法不同，但我为此使用了存储库模式。应用程序的其余部分只是实例化存储库类，并调用`Save(objToSave)`或`Delete(objToDelete)`类似的。现在执行过程与实际数据存储断开连接，我可以采取适当的措施：更新`ModifyDate`、更改`Status`等。如果您将 暴露`DataContext`给应用程序的其余部分，则很难控制引擎盖下的细节.

# ajax - 在处理 AJAXified JSF 2.0 组件时，是否应该永远不使用 immediate="true" ？

> ID：10502326
> 
> 赞同：10
> 
> 时间：2012-05-08T16:11:21.307
> 
> 标签：ajax, jsf, jsf-2, immediate-attribute

`immediate="true"`处理 AJAXified JSF 2.0 组件时不应该使用吗？

这个例子可能是：

如果我想在 JSF 2.0 页面上实现一个“取消”按钮，如果用户点击“取消”，则不应该运行任何验证，`immediate="true"`如果它是一个 ajaxified 组件，我应该在组件上设置，还是应该指定表单上的任何组件都不应该被处理？如果是这样，使用组件的 AJAXified 特性而不是使用“旧方式”来实现此功能的方法是`immediate="true"`什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T16:36:02.923

实际上，在`immediate="true"`取消按钮上使用的目的已经变得毫无用处，因为`<f:ajax>`您可以设置为`execute="@this"`（这已经是默认设置）以跳过对同一表单中所有输入组件的处理。

当表单已经预先提交但由于转换/验证失败而失败时，您可能只会遇到问题。如果您通过 ajax 点击取消按钮并在其后呈现表单，输入仍将被标记为无效，并且模型值的任何更改都不会反映（您可能正在`entity = new Entity();`取消操作方法中执行或某些操作以清除旧值的形式）。使用带有`immediate="true"`. `immediate="true"`这个问题其实和 ajax 请求的 JSF 生命周期无关。您基本上需要通过调用[`EditableValueHolder#resetValue()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/EditableValueHolder.html#resetValue%28%29)未包含在 ajax`execute`中但包含在 ajax中的组件来重置相关输入组件的无效状态`render`。[OmniFaces](http://omnifaces.org)正是为了[`ResetInputAjaxActionListener`](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener)这个目的。

# jquery - 带有控件选项问题的 Jcarousel 多滑块

> ID：10502328
> 
> 赞同：1
> 
> 时间：2012-05-08T16:11:25.297
> 
> 标签：jquery, jcarousel

我正在使用 jcarousel 插件在同一页面中播放多个滑块，每个滑块都有外部控件，但按下一个控件会为所有滑块设置动画，而不是所属控件！这里的代码：

```
<div id="mycarousel">
        <ul>
        <li>item</li>
        <li>item</li>
        </ul>
    <div class="control">
      <a href="#" class="nav_active">1</a>
      <a href="#">2</a>
    </div>  
</div>          

<div id="mycarousel_2">
        <ul>
        <li>item</li>
        <li>item</li>
        </ul>
    <div class="control">
      <a href="#" class="nav_active">1</a>
      <a href="#">2</a>
    </div>  
</div> 
```

这里的JS

```
/**
 * We use the initCallback callback
 * to assign functionality to the controls
 */
function mycarousel_initCallback(carousel) {
    jQuery('.control a').bind('click', function() {
        carousel.scroll(jQuery.jcarousel.intval(jQuery(this).text()));
        $('.control a').removeClass('nav_active');
        $(this).addClass('nav_active');
        return false;
    }); 
    jQuery('.jcarousel-scroll select').bind('change', function() {
        carousel.options.scroll = jQuery.jcarousel.intval(this.options[this.selectedIndex].value);
        return false;
    });
};

// Ride the carousel...
jQuery(document).ready(function() {
    jQuery("#mycarousel, #mycarousel_2").jcarousel({
        scroll: 1,
        animation: 1000,
        easing: 'easeOutQuart',
        vertical: true,
        initCallback: mycarousel_initCallback,
        // This tells jCarousel NOT to autobuild prev/next buttons
        buttonNextHTML: null,
        buttonPrevHTML: null
    });
}); 
```

如何使每个滑块都使用自己的控件单独运行？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T20:30:31.030

我有同样的问题，对于第一个轮播我使用类控制，但对于第二个我使用类 control_2。这对我有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:14:21.047

你可以使用它，它对我有用：

**HTML**

```
<div class="carousel_content">
    <ul class="mycarousel">
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
        <li>item4</li>
    </ul>
    <div class="controls">
        <a href="#" class="prev">Previous</a>
        <a href="#" class="next">Next</a>
    </div>  
</div>          

<div class="carousel_content">
    <ul class="mycarousel">
        <li>item1</li>
        <li>item2</li>
        <li>item3</li>
        <li>item4</li>
    </ul>
    <div class="controls">
        <a href="#" class="prev">Previous</a>
        <a href="#" class="next">Next</a>
    </div>  
</div> 
```

**脚本**

```
(function($){
    $('.mycarousel').jcarousel({
        scroll: 1,
        animation: 1000,
        easing: 'easeOutQuart',
        vertical: false,
        initCallback: mycarousel_initCallback,
        buttonNextHTML: null,
        buttonPrevHTML: null,
        itemLastOutCallback: {
            onAfterAnimation: disableCustomButtons
        },
        itemLastInCallback: {
            onAfterAnimation: disableCustomButtons
        }
    });

    function mycarousel_initCallback(carousel) {

        var elementPrev = carousel.container.next('.controls').children('.prev');
        var elementNext = carousel.container.next('.controls').children('.next');

        elementPrev.bind('click', function() {
            carousel.prev();
            return false;
        });

        elementNext.bind('click', function() {
            carousel.next();
            return false;
        });
    };

    function disableCustomButtons(carousel){

        var elementPrev = carousel.container.next('.controls').children('.prev');
        var elementNext = carousel.container.next('.controls').children('.next');

        if (carousel.first == 1) {
            elementPrev.addClass('inactive');
        } else {
            elementPrev.removeClass('inactive');
        }

        if (carousel.last == carousel.size()) {
            elementNext.addClass('inactive');
        } else {
            elementNext.removeClass('inactive');
        }

    };

})(jQuery); 
```

# eclipse - 当我尝试在 Eclipse 中删除空文件夹时发生错误

> ID：10502336
> 
> 赞同：1
> 
> 时间：2012-05-08T16:11:50.013
> 
> 标签：eclipse

我正在尝试删除 Eclipse 中的一个空文件夹。

> 处理重构删除时捕获到异常。原因：删除资源时遇到问题。

如何解决？

![在此处输入图像描述](../Images/a5a8ed9d4ac37ad46fd337aef5635d0e.png)

> 我不知道原因，但是今天当我尝试删除此文件时。该文件已被删除，没有问题。感谢大家试图提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:47:42.260

我不知道如何，但今天没有同样的问题。我现在可以删除文件了。

# powershell - 删除给定路径的项目，然后递归地删除所有父项

> ID：10502340
> 
> 赞同：0
> 
> 时间：2012-05-08T16:12:07.187
> 
> 标签：powershell, powershell-2.0

我有一条路。可以是文件的路径，也可以是目录的路径。现在我需要删除文件（如果它是文件的路径），然后检查同一文件夹中是否没有更多文件，将其删除，然后检查父文件夹等等。

如果它是目录的路径，请删除目录，然后检查父目录是否为空 - 也删除它，然后删除它的父目录，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T05:39:36.243

此脚本将删除路径中的顶级文件夹，包括其下的所有内容。该`$path`变量可以指向文件或目录。

```
$path = "D:\temp\temp2\file.txt"
$parts = $path.Split([System.IO.Path]::DirectorySeparatorChar)

# The following will remove D:\temp and everything in it
Remove-Item (Join-Path $parts[0] $parts[1]) -Recurse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T19:21:55.973

我想通过结合这些可能来构建一些东西：

```
Get-ChildItem
Split-Path $path -parent  
Remove-Item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T09:54:16.730

如果您还没有完成这项工作，这可能会对您有所帮助：

您可以使用它来确定子项目是否是文件夹

```
| ? {$_.PSIsContainer} 
```

并结合这个你可以看到它是否是一个空文件夹

```
| ? {$_.GetFiles().Count -eq 0} 
```

祝你好运！

# java - 桌子上的儿童按下事件

> ID：10502344
> 
> 赞同：1
> 
> 时间：2012-05-08T16:12:24.543
> 
> 标签：java, android

我在 tablerow 中有一个 imageview 和 textview。每当我按下 tablerow 时，我希望 imageview src 交换到不同颜色的相同图像。我还希望 textview 更改 textcolor。我已经能够使用选择器在列表视图中完成此操作。不过桌子不走运。当事件触发时，我可以使 tablerow 可点击并通过选择器更改它的背景色`android:state_pressed`......但是该 tablerow 中的孩子没有收到它。我有图像的 src 和 textview 的 textcolor 都指向@drawable 选择器。当我按下表格行时，以下都不会返回 true：`android:state_focused`、`android:state_pressed`和`android_selected`. 我做了一个测试，使 textview 可点击。当我这样做时，如果我单击 textview 本身，它会改变颜色。所以我的选择器似乎编码正确。我不希望文本视图可点击。我只想让孩子们继承该行的事件。

我很感激我能得到的任何帮助......或工作示例。

谢谢。

# asp.net-mvc-3 - mvc3动态组合页面和表单元素

> ID：10502346
> 
> 赞同：1
> 
> 时间：2012-05-08T16:12:27.910
> 
> 标签：asp.net-mvc-3

我正在开发一个 MVC3 应用程序，并且我有一个页面（嗯，一个视图），可以让用户编辑文档的元信息（经典`@Html.BeginForm`用法）。对于一般文档，用户将看到要填写的标准字段，但通过下拉列表，他们将能够指定文档的类型：​​这将通过 ajax 调用在 edit-document-form 上加载新字段。当用户提交完整的表单时，最后，控制器应该读取所​​有标准字段，加上所有加载的特定于所选文档类型的字段。

问题是，如何处理控制器中的所有这些额外字段？假设我有`Document`class 和一堆其他类 extendinf `Document`，比如`Contract : Document`,`Invoice : Document`等等`Complaint : Document`，每个都有特定的属性（并且这个字段加载到表单上），我如何在控制器中编写动作？

我想使用类似的东西（为简洁起见，我将省略所有转换、验证等）

```
[HttpPost]
public ActionResult Save(dynamic doc)
{
    int docType = doc.type;
    switch (docType)
    {
        case 1:
            var invoice = new Invoice(doc);
            invoice.amount = Request.Form["amount_field"];
            invoice.code = Request.Form["code_field"];
            //and so forth for every specific property of Invoice
            Repository.Save(invoice);
            break;
        case 2:
            var contract = new Contract(doc);
            contract.fromDate = Request.Form["fromDate_field"];
            contract.toDate = Request.Form["toDate_field"];
            //and so forth for every specific property of Contract
            Repository.Save(contract);
            break;
        ..... // and so forth for any document types

        default:
            break;
    }
} 
```

但这对我来说似乎是一种非常肮脏的方法。您对如何实现这一目标有更好的想法吗？也许有一种我对处理这种情况一无所知的模式。

**更新**

我想到了第二个想法。在评论了 Rob Kent 的回答后，我想我可以采取不同的方法，只有一个类`Document`具有类似的属性

```
public IEnumerable<Field> Tipologie { get; set; } 
```

在哪里

```
public class Field
{
    public int IdField { get; set; }
    public String Label { get; set; }
    public String Value { get; set; }
    public FieldType ValueType { get; set; }
    public List<String> PossibleValues { get; set; } // needed for ENUMERATION type
}

public enum FieldType 
{
    STRING, INT, DECIMAL, DATE, ENUMERATION
} 
```

这是更好的方法吗？在这种情况下，我可以只有一个动作方法，比如

```
[HttpPost]
public ActionResult Save(Document doc) 
```

但是我应该在视图中创建字段以使 MVC 引擎将绑定返回到模型吗？鉴于从`Document`第一种方法继承的类可能会在运行时生成，您更喜欢第二种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:27:01.393

为了在服务器上保持所有硬类型，您可以使用带有自定义绑定器的抽象基类型。在此处查看我的答案以了解其工作原理：[MVC generic ViewModel](https://stackoverflow.com/questions/4716491/mvc-generic-viewmodel/4819094#4819094)

这个想法是，每次他们加载一组新字段时，您将 Bi​​ndingType 表单变量更改为处理程序的实例化类型。自定义活页夹负责在提交时创建正确的类型，然后您可以在您的操作中对其进行评估，例如：

```
if (model is Contract) ... 
```

我不确定您是否能够设置不同的操作，每个操作都有不同的签名，例如：

```
public ActionResult Save(Contract contract) ...
public ActionResult Save(Invoice invoice) ... 
```

很确定这是行不通的，因为 Mvc 已经决定调用哪个方法，或者它可能会首先查看它返回的类型，然后再决定。

在我的链接示例中，我正在检查覆盖的基本成员，但如果这对您来说不是问题，您只需要创建正确的类型。

# android - 如何更改viewpager的适配器

> ID：10502351
> 
> 赞同：0
> 
> 时间：2012-05-08T16:12:44.083
> 
> 标签：android, android-viewpager

我正在使用 viewpager 来显示一些片段，现在我想添加一个按钮来更改 viewpager 的内容。我尝试创建一些不同的适配器，并`viewpager.setAdapter()`使用不同的适配器，但 viewpager 始终显示相同的片段。

所以我想问如何改变viewpager的显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:29:00.290

您必须先清除视图寻呼机中的所有片段

```
for(int i = 0;i<fragments.size();i++){
    fragmentTransmition.remove(fragments.get(i));
}
fragments = new ArrayList<Fragment>();
notifyDataSetChanged(); 
```

即使您清除了最后一个适配器，viewpager 也会记住它的所有片段

# c# - Task.ContinueWith 执行顺序

> ID：10502353
> 
> 赞同：5
> 
> 时间：2012-05-08T16:12:50.237
> 
> 标签：c#, task, asp.net-web-api

显然，我不明白如何使用 ContinueWith 方法。我的目标是执行一项任务，完成后返回一条消息。

这是我的代码：

```
 public string UploadFile()
    {
        if (Request.Content.IsMimeMultipartContent())
        {
            //Save file
            MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
            Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

            string filename = "Not set";

            task.ContinueWith(o =>
            {
                //File name
                filename = provider.BodyPartFileNames.First().Value;
            }, TaskScheduler.FromCurrentSynchronizationContext()); 

            return filename;
        }
        else
        {
            return "Invalid.";
        }
    } 
```

变量“文件名”总是返回“未设置”。似乎从未调用 ContinueWith 方法中的代码。（如果我在 VS 中逐行调试，它会被调用。）

此方法在我的 ASP.NET Web API 控制器/Ajax POST 中被调用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T21:16:02.167

如果您使用的是异步操作，最好的方法是使您的操作也异步，否则您将失去正在进行的异步调用的优势。尝试如下重写您的方法：

```
public Task<string> UploadFile()
{
    if (Request.Content.IsMimeMultipartContent())
    {
        //Save file
        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
        Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

        return task.ContinueWith<string>(contents =>
        {
            return provider.BodyPartFileNames.First().Value;
        }, TaskScheduler.FromCurrentSynchronizationContext()); 
    }
    else
    {
        // For returning non-async stuff, use a TaskCompletionSource to avoid thread switches
        TaskCompletionSource<string> tcs = new TaskCompletionSource<string>();
        tcs.SetResult("Invalid.");
        return tcs.Task;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:36:46.147

未设置变量的原因是：

*   任务被实例化，但不运行。
*   即使任务运行了，该函数也可能在它们完成运行之前返回，所以它仍然会返回“未设置”。解决此问题的方法是等待最终任务（一个设置`fileName`）完成。

您的代码可以这样修复：

```
public string UploadFile()
{
    if (Request.Content.IsMimeMultipartContent())
    {
        //Save file
        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));
        Task<IEnumerable<HttpContent>> task = Request.Content.ReadAsMultipartAsync(provider);

        string filename = "Not set";

        var finalTask = task.ContinueWith(o =>
            {
                //File name
                filename = provider.BodyPartFileNames.First().Value;
            }, TaskScheduler.FromCurrentSynchronizationContext()); 

        task.Start();

        finalTask.Wait();

        return filename;
    }
    else
    {
        return "Invalid.";
    }
} 
```

新增内容如下：

*   将 的返回值分配给`task.ContinueWith`名为 的变量`finalTask`。我们需要这个任务，因为我们会等待它完成
*   开始任务（`task.Start();`行）
*   等待最后的任务完成后再返回 ( `finalTask.Wait();`)

如果可能，请考虑不要异步实现它，因为最终它是同步的（您正在等待它完成）并且当前的实现增加了可能可以避免的复杂性。

考虑按照这些思路做一些事情（如果可能的话）：

```
public string UploadFile()
{
    if (Request.Content.IsMimeMultipartContent())
    {
        //Save file
        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(HttpContext.Current.Server.MapPath("~/Files"));

        Request.Content.ReadAsMultipart(provider); // don't know if this is really valid.

        return provider.BodyPartFileNames.First().Value;
    }
    else
    {
        return "Invalid.";
    }
} 
```

***免责声明：**我并没有实际执行上述代码；我只是写它来说明应该做什么。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:19:19.913

您应该`Task<T>`从方法中返回类型，在这种情况下它将是一个`Task<string>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:20:14.910

您正在使用异步操作。如果要等待其完成，则必须使用`Wait`任务的其他方法：

```
task.ContinueWith(o =>
        {
            //File name
            filename = provider.BodyPartFileNames.First().Value;
        ).Wait();

return filename; 
```

**编辑：** 一些异步方法在创建任务后立即启动，而另一些则要求您显式启动它们。您必须查阅每个文档以确定。在这种情况下，任务似乎会自动启动。

# transition - 切片的 D3.js 饼图标签不补间

> ID：10502357
> 
> 赞同：1
> 
> 时间：2012-05-08T16:13:14.547
> 
> 标签：transition, pie-chart, d3.js

当我点击各种超链接来补间我的图表时：虽然馅饼的切片正在补间，但我不知道如何带上每个切片的标签。

一个主要工作的 JSfiddle 在这里：http: [//jsfiddle.net/lukateake/MX7JC/](http://jsfiddle.net/lukateake/MX7JC/)

提前感谢您提供的任何见解。我保证会用我们发现的任何解决方案来更新小提琴，因为我想这种效果会引起很多 D3 玩家的兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:57:04.890

这里的主要问题在于您的 updateChart 函数 - 当您将数据反弹到弧时，您没有为 sliceLabel 这样做：（添加了第二行）

```
arcs.data(donut(data.pct)); // recompute angles, rebind data
sliceLabel.data(donut(data.pct)); 
```

另一件小事 - 您的切片标签文本选择似乎有点奇怪：

```
var sliceLabel = label_group.selectAll("text.value") 
```

但是您没有使用 class = "value"; 创建任何文本 这实际上并不会产生太大影响，但可能会在其他实现中引起问题 - selectAll("text") 或 selectAll("text.arcLabel") 在这里可能更合适。

[在http://jsfiddle.net/MX7JC/9/](http://jsfiddle.net/MX7JC/9/)更新小提琴

# javascript - Jquery在单击li项目时更改div文本值

> ID：10502360
> 
> 赞同：1
> 
> 时间：2012-05-08T16:13:24.063
> 
> 标签：javascript, jquery, html

我正在为地图构建一个主题选择器，并希望反映当前选择的主题。

该代码似乎有效，但从不返回“li”项目的值，它总是为我单击的任何“li”项目返回“s-thumbs”。我尝试使用 .closest() 方法，但无济于事。

我正在关注[这篇文章。](http://www.learningjquery.com/2009/09/working-with-events-part-3-more-event-delegation-with-jquery)

```
 <script language="javascript">
    $("ul.s-thumbs").live("click", function(event) {
      $("#theme_title").text(
          $(this).closest("ul.s-thumbs li").attr("class")
        );
     });
    </script>

    <div id="theme">You have selected the <div id="theme_title"></div> Theme</div>
        <div class="container_16" id="themebg">
        <!--<div class="grid_1"> <a href="" "img" src="/styles/image/leftarrow.png" id="leftarrow" alt=""/></div>-->
        <div class="grid_16 slider-wrapper">
        <ul class="s-thumbs">
                    <li class="Default"> <a href="javascript:setRoadmap()"><img src="/styles/image/thumbs/default.png" alt="" /></a>Default</li>
                    <li class="Hatchery"> <a href="javascript:setGreen()"><img src="/styles/image/thumbs/hatchery.png" alt="" /></a>Hatchery</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:16:06.483

```
 $("ul.s-thumbs").on("click", "li", function() {
    var myText = $(this).attr("class");
    alert( myText );        
    $("#theme_title").text( myText );
 }); 
```

**[演示 jsFiddle](http://jsfiddle.net/jPAeT/1/)**

使用**.on()**方法：[http ://api.jquery.com/on/ 在](http://api.jquery.com/on/)*事件*后添加特定元素（点击）

这是（今天）不推荐使用的`.live()`方法的新替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:17:31.437

```
$('ul.s-thumbs li').on('click', function(){
  var getClass = $(this).attr('class');
  $("#theme_title").text(getClass);
}); 
```

演示链接：http: [//jsfiddle.net/ChaseWest/w2tCE/4/](http://jsfiddle.net/ChaseWest/w2tCE/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:16:49.050

```
$("ul.s-thumbs").on("click", "a", function(event) {
  var txt = $(this).closest("ul.s-thumbs li").attr("class");
  $("#theme_title").text(txt);
 }); 
```

**注意** `live()`已被弃用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T16:26:09.117

将事件处理程序添加到 li 而不是 ul。我还使用了哪个是 Jquery 1.7+ 中的首选方法

```
$("ul.s-thumbs li").on("click", function(event) {
    $("#theme-title").html(      
      $(this).attr("class")
    );
 }); 
```

演示：http: [//jsfiddle.net/euSye/1/](http://jsfiddle.net/euSye/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T16:28:46.767

```
<script language="javascript">
    $(document).ready(function() {
        $(".s-thumbs").on("click", "a", function(e) {
            $("#theme_title").text( $(e.target).parent("li").attr("class") );
        });
    });
</script> 
```

# perl - Perl 兼容性

> ID：10502367
> 
> 赞同：2
> 
> 时间：2012-05-08T16:14:11.200
> 
> 标签：perl, windows-7-x64

这不是我的专业领域，所以我希望提出正确的问题。

我们有一台滚动租赁的服务器。旧服务器是 32 位 windows 服务器，新服务器是 64 位 windows 2008 R2 SP1。

其中一个 Web 应用程序使用 Perl 来运行一些脚本。

1.  我们可以在新的 64 位机器上运行相同的 32 位版本吗？（例如，如果有相同的版本，但一个是 32 位的，一个是 64 位的，它们本质上是否相同？）
2.  如果脚本在 32 位版本上运行，它是否仍然可以在 64 位版本的 Perl 下运行？

如果问题需要澄清，请告诉我，我会考虑询问我们团队中的适当人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:35:30.497

如果您担心兼容性，您应该能够在 64 位机器上运行 32 位版本的 perl（假设两者都是 x86）。但是 64 位版本的工作方式应该与 32 位版本大致相同，但有几个例外情况不应该影响脚本。（它们主要与模块中的 C/XS 代码有关。二进制兼容性的东西。这意味着必须为 64 位构建模块。幸运的是，任何不糟糕的 Perl 解释器都会为您完成构建工作*nix 的情况，或者提供一个包管理器，它具有像 ActiveState 这样的预构建模块。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:32:53.060

1.  是的，只要您正确重新部署，包括依赖项的构建步骤，您就可以。仅当整个应用程序堆栈都是纯 Perl 时，仅复制文件才有效，这不太可能。— 是的，它们本质上是相同的，但二进制不兼容。
2.  可能是的。依赖关系可能会出现问题，但是由于 32 位/64 位差异而失败的模块数量很少。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T16:26:21.413

我认为你的两个问题的答案都是肯定的。32 位应用程序应该在您的 64 位 Windows 上运行良好，但将无法利用任何 64 位功能（如果您想要解析大文件，更大的可用地址空间可能是最重要的） XML 使用 XML::Twig ;-)。

在 32 位 perl 下运行的脚本将在 64 位 perl 上运行，前提是您按顺序获取 64 位 perl 的所有模块，因为它们通常从不同的目录运行。另外，请注意，对于 Windows 上的 64 位 perl，您可能需要 Strawberry perl、ActiveState perl 或类似的。据我所知，Cygwin 只有 32 位。

# objective-c - 使用@synchronized 的正确方法是什么？

> ID：10502371
> 
> 赞同：9
> 
> 时间：2012-05-08T16:14:22.077
> 
> 标签：objective-c, ios, memory-management, nsmutablearray, nsarray

```
@property (atomic, retain) NSArray *array; 
```

我不会覆盖数组的 setter 和 getter。我可以使用@synchronized(array){} 或@synchronized(self.array){}。据我所知，所有情况都是正确的，对吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T16:23:41.533

使用`@syncrhonized(obj)`只是形成一个锁，以便其他同步的代码`obj`不会同时执行。

原子属性的工作原理是在访问属性时不允许进行更改；*它们为访问*提供隐式锁定。

```
array = someObject.array; //locked
[array doSomething];      //no longer locked 
```

您不能覆盖`atomic`属性的 getter 和 setter，但使用`@sycnronized`围绕 getter/setter 的指令就足够了。

```
@synthesize array=_array;

...

-(void)setArray
{
    @synchronized(self) 
    {
        _array = array;
    }
}

-(NSArray *)array
{
    NSArray *retVal;

    @synchronized(self) 
    {
        retVal = _array;
    }

    return retVal;
} 
```

老实说，除非您正在做一些认真的多线程编程，否则原子属性是不必要的，只会导致性能下降。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-08T16:31:21.037

正如您所说的那样，这两个语句在并发安全策略方面是等效的。

根据规模和您在项目上完成工作的程度，您可能希望完全考虑线程安全的替代策略。

最近，Apple 已经提出建议通过序列化而不是传统的阻塞来实现线程安全。简而言之，随着争用的增加，序列化访问比使用@synchronize 阻塞更有效。

与其同步，不如考虑设置一个 GCD 串行队列并排队访问跨线程共享的资源。

# android - 从 Android 中的不同 Activity 修改数据

> ID：10502374
> 
> 赞同：0
> 
> 时间：2012-05-08T16:14:27.183
> 
> 标签：android, variables, android-activity, share

我一直想知道是否有一种方法可以从创建它们的不同活动中修改变量。准确地说，我想从 Activity 2 修改 Activity1 中的列表，有没有办法从其他活动中引用该列表？`putExtra()`方法不接受 List 作为输入参数，我认为这也不`startActivityForResponse()`是我想要的。我不知道是否存在某种共享变量或类似的东西。

有可能这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:28:55.103

可能这不是一个很好的解决方案，但您可以做的是您可以将 DataManager 创建为保存数据链接列表的单个实例。在每个活动中，您都可以获得数据管理器的实例并更新其中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:24:35.427

您*可以*将整个列表作为额外的传递，您只需要先使其成为可包裹的，从而对其进行序列化。

`A Container for a message (data and object references) that can be sent through an IBinder. A Parcel can contain both flattened data that will be unflattened on the other side of the IPC`

有点难以理解，但它真正所做的只是将数据扁平化为字符串/整数/其他原始类型，以便可以轻松传递。另一方面，它重新构建到您的列表结构中。

这是我做类似事情时使用的教程：

[http://prasanta-paul.blogspot.ca/2010/06/android-parcelable-example.html](http://prasanta-paul.blogspot.ca/2010/06/android-parcelable-example.html)

# java - 在自定义布局中从 EditText 获取值

> ID：10502382
> 
> 赞同：1
> 
> 时间：2012-05-08T16:15:06.407
> 
> 标签：java, android, xml

我有一个我的主要活动，它创建了一个按钮，还从 xml 中实现了一个自定义布局。xml是这个

```
 <com.android.control.MinutePicker
            android:id="@+id/MinPick"
            android:orientation="vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
        </com.android.control.MinutePicker> 
```

this 引用的 java 如下。它创建一个edittext和一个2个按钮。

```
but1 = new Button( context );
but1.setTextSize( TEXT_SIZE );
but1.setText( "-" );
but2 = new Button( context );
but2.setTextSize( TEXT_SIZE );
but2.setText( "-" );
valueText = new EditText( context );
valueText.setTextSize( TEXT_SIZE );
valueText.setGravity( Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL );
valueText.setText(0);
this.setLayoutParams( new LinearLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT ) );
LayoutParams elementParams = new LinearLayout.LayoutParams( ELEMENT_WIDTH, ELEMENT_HEIGHT );

    addView( but1, elementParams );
    addView( valueText, elementParams );
    addView( but2, elementParams ); 
```

但是我如何获得edittext中的值，因为在xml中没有明确提及edittext或id。我试图通过自定义布局的 id 来引用它，但没有成功。谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:22:11.397

您的意思是从 EditText 获取文本吗？

您创建了它并将其分配给`valueText`，所以使用`valueText.getText()`

# jquery - 点击事件后jQuery调用点击事件

> ID：10502383
> 
> 赞同：7
> 
> 时间：2012-05-08T16:15:08.547
> 
> 标签：jquery, jquery-mobile, cordova

我正在使用 Jquery 和 Jquery Mobile 为 Android 开发一个 PhoneGap 应用程序。

我有一个项目列表，需要两个事件绑定到列表中的每个项目。我需要一个“taphold”事件和一个“click”事件。我遇到的问题是当我执行“taphold”时，会触发正确的“taphold”事件。但是，一旦我释放，点击事件也会被触发。如何防止点击事件在点击后触发？

代码：

```
function LoadMyItems(items) {

for(var idx in items)
{
    var itemLine = '<div class="my_item" id="my_item_'+items[idx].user_item_id+'">' +
           '<img class="item_icon_32" src=./images/graphicFiles/Icon48/'+items[idx].item.graphic.graphicFiles.Icon48.filename+' />' +
           items[idx].item.name+    
           '</div>';
    $('#my_list').append('<li>'+itemLine+'</li>');
        $('#my_item_'+items[idx].user_item_id).bind('taphold', {userItem:items[idx]},ShowMyItemInfo);
        $('#my_item_'+items[idx].user_item_id).bind('click tap', {userItem:items[idx]},FitMyUpgradeItem);
        console.log('UserItem '+items[idx].user_item_id+' loaded and events bound');
    }
    $('#my_items_loader').hide();
    myScroll.refresh();
} 
```

在以下建议之后，这就是我的最终结果。这适用于 iScroll 对象。

```
function LoadMyItems(items) {

for(var idx in items)
{
    var itemLine = '<div class="my_item" id="my_item_'+items[idx].user_item_id+'">' +
                   '<img class="item_icon_32" src=./images/graphicFiles/Icon48/'+items[idx].item.graphic.graphicFiles.Icon48.filename+' />' +
                   items[idx].item.name+    
                   '</div>';
    $('#my_list').append('<li>'+itemLine+'</li>');

    (function(index) {
        var tapTime = 0;
        var xPos = 0;
        var yPos = 0;
        $('#my_item_'+items[index].user_item_id).bind('vmousedown vmouseup', function (event) {
            if (event.type == 'vmousedown') {

                tapTime = new Date().getTime();
                xPos = event.pageX;
                yPos = event.pageY;

                var timer = setTimeout(function() {
                    var duration = (new Date().getTime() - tapTime);
                    var xDiff = Math.abs(mouseXPos - xPos);
                    var yDiff = Math.abs(mouseYPos - yPos);
                    if(duration >= 700 && (yDiff <= 40 || mouseXPos == 0))
                        ShowItemInfo(items[index].item);
                },750);
            } else {
                //event.type == 'vmouseup'
                var duration = (new Date().getTime() - tapTime);
                var xDiff = Math.abs(event.pageX - xPos);
                var yDiff = Math.abs(event.pageY - yPos);
                tapTime = new Date().getTime();
                if (duration < 699 && yDiff <= 40) {
                    //this is a tap
                    FitMyUpgradeItem(items[index]);
                }
            }
        });

        $('#my_item_'+items[index].user_item_id).bind('touchmove',function(event) {
            event.preventDefault();
        });
    })(idx);

    console.log('UserItem '+items[idx].user_item_id+' loaded and events bound');
}
$('#my_items_loader').hide();
myScroll.refresh();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T19:20:14.653

而不是使用`tap`and `taphold`（我尝试使用但遇到了同样的问题，这似乎是`taphold`事件的固有问题），您可以使用`vmousedown`并设置一个标志，然后绑定`vmouseup`以确定它是 a`tap`还是 a `taphold`：

```
var tapTime = 0;
$('#my_item_'+items[idx].user_item_id).bind('vmousedown vmouseup', function (event) {
    if (event.type == 'vmousedown') {
        tapTime = new Date().getTime();
    } else {
        //event.type == 'vmouseup'
        //here you can check how long the `tap` was to determine what do do

        var duration = (new Date().getTime() - tapTime);
        if (duration > 3000) {
            //this is a tap-hold
            ShowMyItemInfo(items[idx]);
        } else {
            //this is a tap
            FitMyUpgradeItem(items[idx]);
        }
    }
}); 
```

为了使其正常工作，您必须在循环代码周围添加一个 IIFE，或者`ShowMyItemInfo(items[idx]);`在不引用更改循环每次迭代的变量的情况下更改工作。一个简单的创建 IIFE 就是使用`$.each()`. 否则，您的循环将如下所示：

```
for(var idx in items)
{
    (function (idx) {
        ...
    })(idx);
} 
```

IIFE = 立即调用函数表达式。它允许我们对传入 IIFE 的变量的当前状态进行“快照”。所以当我们传入时`idx`（从技术上讲，第二个实例是传入的变量，第一个实例是 IIFE 中可用的变量，`ids_new`为了简单起见，可以将其更改为类似的东西），传入的值将保存在何时事件`tap`处理程序触发。

# 更新

您还可以设置超时来确定`taphold`而不是使用`vmouseup`事件：

```
//setup a timer and a flag variable
var tapTimer,
    isTapHold = false;
$('#my_item_'+items[idx].user_item_id).bind('vmousedown vmouseup', function (event) {
    if (event.type == 'vmousedown') {

        //set the timer to run the `taphold` function in three seconds
        //
        tapTimer = setTimeout(function () {
            isTapHold = true;
            ShowMyItemInfo(items[idx]);
        }, 3000);
    } else {
        //event.type == 'vmouseup'
        //clear the timeout if it hasn't yet occured
        clearTimeout(tapTimer);    

        //if the flag is set to false then this is a `tap` event
        if (!isTapHold) {
            //this is a tap, not a tap-hold
            FitMyUpgradeItem(items[idx]);
        }

        //reset flag
        isTapHold = false;
    }
}); 
```

这样，事件将在用户按住手指三秒钟后触发。然后`tap`事件处理程序只会在这三秒钟没有发生时触发。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-18T08:59:51.057

只需将其设置在文档顶部或定义偶数之前的任何位置：

```
$.event.special.tap.emitTapOnTaphold = false; 
```

然后你可以像这样使用它：

```
$('#button').on('tap',function(){
    console.log('tap!');
}).on('taphold',function(){
    console.log('taphold!');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T18:47:14.747

就个人而言，我认为这里的答案使问题过于复杂。如果您只是想要一种简单的方法来继续使用 taphold 事件并忽略释放 taphold 时触发的 click 事件，那么我在自己的项目中解决了同样的问题：

```
// We will use this flag to ignore click events we don't want
var skipNextClick = false;

//Set up your event handler.  You could do these using two handlers or one.  I chose one.

$('div.element').on('click taphold', function (e) {
    //set up a quick bool flag that is true if click
    var isClick = (e.type == 'click');

    if (isClick && !skipNextClick) {
        //run your code for normal click events here...

    }
    else if (isClick && skipNextClick) {
        //this is where skipped click events will end up...

        //we need to reset our skipNextClick flag here,
        //this way, our next click will not be ignored
        skipNextClick = false;
    }
    else {
        //taphold event

        //to ignore the click event that fires when you release your taphold,
        //we set the skipNextClick flag to true here.
        skipNextClick = true;

        //run your code for taphold events here...

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:36:41.903

改用 tap\vclick 和 taphold -- Tap 事件在点击后被触发两次。

```
$('#my_item_'+items[idx].user_item_id).bind('vclick', ... 
$('#my_item_'+items[idx].user_item_id).bind('taphold', ... 
```

在这个例子中，点击实际上没有在点击之后被调用..在这里检查它：http: [//jsfiddle.net/YL8hj/43/](http://jsfiddle.net/YL8hj/43/)

**编辑：**

> jQuery Mobile 自动将触摸事件绑定到某些元素。将 iScroll 与 jQuery Mobile 结合使用时，最好将单独的函数绑定到 'touchmove' 事件并防止事件冒泡（ event.preventDefault() ）。通过这样做，当用户与 iScroll 元素交互时，jQuery Mobile 将无法处理触摸事件。

也[http://appcropolis.com/blog/jquery-wrapper-for-iscroll/](http://appcropolis.com/blog/jquery-wrapper-for-iscroll/) 信用[https://stackoverflow.com/a/9408567/643500](https://stackoverflow.com/a/9408567/643500)

# c# - 通过 C# Interop 在 C++ 后台线程中检索指向类的指针

> ID：10502385
> 
> 赞同：0
> 
> 时间：2012-05-08T16:15:33.837
> 
> 标签：c#, c++, interop

我正在通过 C# 互操作利用 C++ 库，它有一个简单的 API 在后台线程中执行一些任务。问题是执行后台任务的 C++ 函数采用一个空指针，然后在执行后台任务时“填充”该空指针。此外，线程是在 C# 端完成的，所以我不得不使用“ParameterizedThreadStart”委托类型，它只接受一个对象作为参数。然后我需要从我的 C# 代码中访问该对象。希望以下片段可以说明我的意思。

```
C++:

extern "C" void __declspec(dllexport) performLongTask(MyClass** myObject)
{
    myObject = new MyClass;

    // Time-consuming operation...
}

C#:

[DllImport("myDllName")]
public static extern void performLongTask(ref IntPtr myObject);

// Ugly, but necessary for ParameterizedThreadStart delegate?
unsafe class PtrWrapper
{
    public IntPtr Pointer = new IntPtr();
}

public static unsafe performLongTask_paramThreadStartWrapper(object arg)
{
    PtrWrapper ptrWrapper = (PtrWrapper)arg;
    performLongTask(ref ptrWrapper.Pointer);
}

public static unsafe void DoInteropStuff()
{
    PtrWrapper ptrWrapper = new PtrWrapper();

    Thread bgThread = new Thread(new ParameterizedThreadStart(performLongTask_paramThreadStartWrapper));
    bgThread.Start(ptrWrapper);

    // Wait a little while, let background thread processing go....

    // Use pointer to retrieve some stuff from other unmanaged code
    if(ptrWrapper.Pointer != IntPtr.Zero)
        object currentData = getData(ptrWrapper.Pointer);
} 
```

这样做的结果是我在托管端创建的 IntPtr 永远不会改变，尽管事实上非托管代码似乎执行得很好（调试打印语句显示事情按预期进行，并且指针肯定已设置为非托管方）。

我知道这不是最漂亮的代码，并且可能有几种方法可以让整个事情变得更干净。我对几件事感兴趣：

1.) 如何以最好的方式使用 C++ 库来实现这一点（不修改非托管代码）。

2.) 为什么这段代码不起作用？尽管它很丑陋，但在我看来它应该可以工作，因为我认为指针正在正确传递......

谢谢你的帮助！

# facebook - 如何发布视频的观看操作，单击该对象将产生一个权限对话框？

> ID：10502387
> 
> 赞同：1
> 
> 时间：2012-05-08T16:15:46.283
> 
> 标签：facebook, facebook-graph-api, video, facebook-opengraph

以 Viddy、metacafe 和许多其他人为例，当我单击 Watch 操作对象（查看他们的视频）时，我会转到以下链接： http:
[//www.facebook.com/connect/uiserver.php? APP_ID = 125119214225766＆方法= permissions.request＆REDIRECT_URI = HTTP％3A％2F％2Fwww.viddy.com％2Fvideo％2Fb206f4a5-2256-4a6d-aee0-9a544ea4ef0f＆RESPONSE_TYPE =代码和显示页面=＆auth_referral = 1＆fb_private_mode_enc = ASJTBOcbzLX2w7CG8O_y_nQlB4NgP5FKG1qo0WsqOoeipkrM_MCDSYUTx-7isbjlSiY](http://www.facebook.com/connect/uiserver.php?app_id=125119214225766&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.viddy.com%2Fvideo%2Fb206f4a5-2256-4a6d-aee0-9a544ea4ef0f&response_type=code&display=page&auth_referral=1&fb_private_mode_enc=ASJTBOcbzLX2w7CG8O_y_nQlB4NgP5FKG1qo0WsqOoeipkrM_MCDSYUTx-7isbjlSiY)

单击该链接，会出现一个 Facebook 页面（网页中的页面，而不是 Facebook 页面）请求应用程序的权限（此特定链接中的 Viddy）。只有在提供权限（有时也取消）之后，我才会被重定向到该视频的 Viddy 网站中的实际查看页面。

当我对我的应用程序执行相同操作时，用户会被直接重定向到我的站点，而不会提示权限。

我已经比较了我能想到的所有东西，但我就是无法让它发挥同样的作用。

我试过的：

*   将我自己的自定义操作和对象 (og:type=myAppNamespace:myObjectType) 与 myAppNamespace:myAction 操作一起使用
*   使用 og:type=video:other 和 video.watches 动作
*   为 Open Graph 协议的正确命名空间调整头部前缀代码
*   选项之间的任何混合（可以工作的选项）

如果现在还不清楚——我的应用是一个视频应用，有点像 Viddy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:20:07.483

查看最近的[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)功能。我相信它正是为此目的而设计的。

# php - 让jQuery做点击功能

> ID：10502390
> 
> 赞同：1
> 
> 时间：2012-05-08T16:15:57.083
> 
> 标签：php, jquery, function, click

我不知道要使用哪个标签或事件。但我想要一些方法让 jQuery 在页面加载时执行点击功能或“点击”链接。该脚本正在从 URL 获取特定数据。如果 url sais: www.domain.com/index.php?a=1&b=1234 那么我一开始就想要这样的东西：

> <?php
> $a = $_GET['a'];
> $b = $_GET['b'];
> 
> if ($a == '1')
> {
> //echo 自动点击 <a> 标签的 jQuery 脚本
> }
> ?>

然后 HTML 脚本是这样的：

> <a href="page2.php/<? echo $b; ?>">jQuery 点击</a>

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:17:53.393

你需要这个[`.trigger`](http://api.jquery.com/trigger/)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:19:25.787

```
$('a#YOUR_ID').click(); 
```

或者

```
$('a#YOUR_ID').trigger('click'); 
```

或者

```
$('a.YOUR_CLASS').click(); 
```

或使用`href`

```
$('a[href^="page2.php"]').click(); 
```

第一个是首选。您应该使您的 ID 为 CLASS 的选择器属于该`a`.

**注意：** `a[href="page2.php"]`表示`a`完全`href`以`page2.php`

如果以上都不起作用，请尝试：

```
window.location = document.location.hostname + '/' + $('a[href^="page2.php"]').attr('href'); 
```

两个打开一个弹窗试试这个：

```
var urlToOpen = document.location.hostname + '/' + $('a[href^="page2.php"]').attr('href');

window.open (urlToOpen,"mywindow","menubar=1,resizable=1,width=350,height=250"); 
```

[**关于window.open()**](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)的详细信息[](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:19:54.290

做这个 ：

```
$("a[href='page2.php']").click(); 
```

或者最好使用身份证

```
$("a#myID").click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:25:51.970

您可以在 jQuery 文档或 jQuery 教程中获得更多[信息](http://www.jquery.com)。

要回答您的具体问题，我相信您正在寻找类似于以下内容的内容：

```
$(document).ready(function() {
   $('#autoclick').click();
}); 
```

我的建议是在相应的 html 中应用 id：

`<a id="autoclick" href="/somewhere-else">This is a link</a>`

希望能帮助您入门。

注意：click() 自 v1.0 起将其作为 trigger("click") 的特定快捷方式。参考：[jQuery 点击](http://api.jquery.com/click/)**

# unix - cleartool 描述 -ahlink -all 文件名

> ID：10502391
> 
> 赞同：1
> 
> 时间：2012-05-08T16:15:58.120
> 
> 标签：unix, clearcase

我正在对文件进行描述：

```
ct desc -ahlink -all 5.txt
 5.txt@@/main/52
 Hyperlinks:

 Merge <- /vobs/TESTVOB/5.txt@@/main/test_branch/1
 Merge <- /vobs/TESTVOB/5.txt@@/main/test_branch/2 
```

有没有办法在 clearcase 中使用 -fmt something 从 describe 命令获取最后一个超链接，而不使用 unix 命令来实现它？

如果没有，有人可以建议我使用适当的 unix 命令来获得所需的输出吗？

我试过这个命令：

```
 ct desc -ahlink -all 5.txt | grep Merge | cut -d "-" -f2

and this gives me: 
   /vobs/TESTVOB/5.txt@@/main/test_branch/1
   /vobs/TESTVOB/5.txt@@/main/test_branch/2

 I only want:
   /vobs/TESTVOB/5.txt@@/main/test_branch/2 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:37:52.980

我不知道获取最后一个超链接的本地方式。

所以使用像这样的unix命令[`tail`](http://en.wikipedia.org/wiki/Tail_%28Unix%29)就足够了：

```
ct desc -ahlink -all 5.txt | grep Merge | tail -1 | cut -d "-" -f2 
```

# java - 对通话活动的影响。（意图）

> ID：10502400
> 
> 赞同：1
> 
> 时间：2012-05-08T16:16:29.383
> 
> 标签：java, android, android-intent

我在像 facebook 这样的应用程序中看到，意图调用一个从下向上、从左到右或从上到下的屏幕效果......

我搜索了，我找不到，因为任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:28:28.343

这是一个例子：

```
Intent intent = new Intent(this, ItemPage.class);
startActivity(intent);
overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left); 
```

在左侧 xml 中滑动：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="100%p" android:toXDelta="0"
    android:duration="@android:integer/config_shortAnimTime"/> 
```

滑出左侧 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="-100%p"
    android:duration="@android:integer/config_shortAnimTime" /> 
```

# javascript - 有没有办法可以通过单击其中一个来单击 2 个提交按钮？

> ID：10502407
> 
> 赞同：0
> 
> 时间：2012-05-08T16:16:50.200
> 
> 标签：javascript, html

好的，这听起来很奇怪，但我有两个提交按钮。

```
</input type="submit" name="btn1" id ="btn1"/> 

</input type="submit" name="btn2" id ="btn2"/> 
```

当我单击其中一个时，有没有办法可以将两者绑定在一起单击？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:19:56.113

你可以使用 javascript

关注[http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

您只需在函数中提交第二个表单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:21:52.510

您可以为第二种方法编写一个包装器。

```
onclick = "CallBoth()";

onclick = "CallOne()";

function CallBoth()
{
  ...

  return CallOne();
}

function CallOne()
{
  ...
  return whatever;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:21:40.520

使用 jQuery：

```
$(document).ready(function(){
    $('input[name="btn1"], input[name="btn2"]').click(function(){
        $('#myform').trigger('submit');
    });
}); 
```

当您点击 btn1 或 btn2 时，您的表单 ID #myform 将提交。

但使用 jQuery 的最佳方法是使用以下代码：

```
$(document).ready(function(){
    $('.submit_form_1').click(function(){
        $('#myform').trigger('submit');
    });
}); 
```

并将类添加到您要用作“表单提交表单按钮”的每个按钮`.submit_form_1`。随心所欲地改变它。

# ruby - premailer - 未定义的方法 create_border_shorthand

> ID：10502409
> 
> 赞同：0
> 
> 时间：2012-05-08T16:17:07.940
> 
> 标签：ruby, rake, premailer

我正在尝试按照[这些说明让 premailer gem 工作](https://github.com/alexdunae/premailer)

我通过将 gemfile 添加到我的文件夹和一个 rake 文件来运行 premailer 来设置我的项目。

我的 rake 文件看起来像这样 -

```
task :default do
require 'premailer'

premailer = Premailer.new('email_source.html', :warn_level => Premailer::Warnings::SAFE)

# Write the HTML output
fout = File.open("output.html", "w")
fout.puts premailer.to_inline_css
fout.close

# Write the plain-text output
fout = File.open("ouput.txt", "w")
fout.puts premailer.to_plain_text
fout.close

# Output any CSS warnings
premailer.warnings.each do |w|
  puts "#{w[:message]} (#{w[:level]}) may not render properly in #{w[:clients]}"
end
end 
```

我收到以下错误 -

```
undefined method `create_border_shorthand!' for #<CssParser::RuleSet:0x00000101533278> 
```

我[在 github 上发现了这个 bug 已关闭报告，](https://github.com/alexdunae/premailer/issues/97)但我不确定这是否是我的问题所在。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:54:31.730

您在使用 Bundler（即您有 Gemfile）吗？

如果是这样，请尝试添加： gem 'css_parser', '1.2.5'

然后捆绑安装并重试。这将排除 github 问题报告中的问题。

# delphi - Delphi 2010：从 Word 2010 文档中读取文本

> ID：10502413
> 
> 赞同：0
> 
> 时间：2012-05-08T16:17:30.257
> 
> 标签：delphi, ms-word, delphi-2010

我有一个将信息从数据库插入到 Word 文档的应用程序。

我已经请求可以在以后更改 Word 文档中的信息。

为了实现这一点，我编写了一个宏来启动我的应用程序，然后它可以读取文档中的书签以查找文档中的部分。

我因能够阅读已设置在特定书签上的文本而跌跌撞撞。

我可以使用以下代码设置书签的文本：

```
bookmark := 'PersonName';
R := WordDoc.Bookmarks.Item(bookmark).Range;
R.Text := "Joe Bloggs"; 
```

部分问题是书签未设置为文本块 - 这可确保在设置文本时书签仍然存在 - 这意味着至少我可以在第二次运行时设置范围。

尽我所能尝试我找不到任何方法来获取任何结果

```
R.text 
```

或者

```
WordApp.Selection.Text 
```

使用书签设置起点时。

有什么建议么？

在第二次运行时插入文本工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T18:20:31.000

设置文本后尝试阅读书签：

```
Bookmark := 'PersonName';
R := WordDoc.Bookmarks.Item(Bookmark).Range;
R.Text := 'Joe Bloggs';
WordDoc.Bookmarks.Add(Bookmark, R); 
```

[请参阅此处了解更多信息](http://msdn.microsoft.com/en-us/library/ad6ks7k0%28v=vs.80%29.aspx "如何：更新书签文本")

# ruby-on-rails - 在不嘲笑任何事情的情况下设定期望

> ID：10502421
> 
> 赞同：2
> 
> 时间：2012-05-08T16:18:01.820
> 
> 标签：ruby-on-rails, stub, mocha.js, expectations

使用 MiniTest::Spec 和 Mocha：

```
 describe "#devices" do
   it "scopes the devices by the provided :ip_list" do
     ips = 'fast tests ftw!'
     ds = DeviceSearch.new ip_list: ips
     Device.expects(:scope_by_ip_list).once.with(ips)
     ds.devices
   end
 end 
```

当我使代码正常工作时，此测试将失败，因为`Device.expects(:scope_by_ip_list)`还调用了*stubs* `Device.scope_by_ip_list`，并且由于我没有指定 a`.returns(Devices.scoped)`或类似的东西，它使用`nil`. 因此，在我的代码中，它正确地定义了一个设备列表，然后进行了进一步的操作，进一步的操作就会崩溃。

不过，我不想指定参数，因为我完全不在乎它返回什么*。*`.returns`我根本不想存根该方法！我只是想对它设定一个期望，让它按原样运行。

有没有办法做到这一点？

（对我来说，说这样的话似乎很尴尬`Device.expects(:foo).returns('bar')`——当我说`Model` **期望** `method`时，我**并不是**说要**存根**该方法！我们可以说`Device.stubs(:foo)`，如果我们想存根它。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:43:08.130

该行为是有意的，无法更改。查看以下帖子，了解如何绕过它：

[rspec 2：检测对方法的调用，但仍然让它执行其功能](https://stackoverflow.com/questions/7206453/rspec-2-detect-call-to-method-but-still-have-it-perform-its-function)

# c++ - 用于 type_info 的 std::is_convertible

> ID：10502423
> 
> 赞同：8
> 
> 时间：2012-05-08T16:18:25.800
> 
> 标签：c++, types, casting, c++11, typecast-operator

在 C++11 中，可以确定 A 类型的变量是否可以隐式转换为 B 类型`using std::is_convertible<A, B>`。

如果你真的知道类型 A 和 B，这很好用，但我只有 type_infos。所以我正在寻找的是这样的功能：

```
bool myIsConvertible(const type_info& from, const type_info& to); 
```

是否可以在 C++ 中实现类似的东西？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T23:50:53.650

在可移植的 C++ 中不可能做你想做的事。

**如果**您将自己限制在给定的平台上，*可能*会获得部分答案。例如，那些遵循[Itanium ABI](http://sourcery.mentor.com/public/cxx-abi/)的平台将具有此功能的实现：

 **```
extern "C" 
void* __dynamic_cast(const void *sub,
                     const abi::__class_type_info *src,
                     const abi::__class_type_info *dst,
                     std::ptrdiff_t src2dst_offset); 
```

在这个 ABI 中，`abi::__class_type_info`是一个派生自 的类型`std::type_info`，并且程序中的*所有* `std::type_info`s 都具有派生自`std::type_info`(`abi::__class_type_info`只是一个示例) 的动态类型。

使用这个 ABI，可以构建一个工具来导航任何类型的继承层次结构（在运行时），给定它的`std::type_info`. 在这样做的过程中，您可以确定两个`std::type_info`s 是否代表两种可能是`dynamic_cast`或什`static_cast`至彼此的类型。

请注意，这样的解决方案不会考虑使用转换构造函数或转换运算符在类型之间进行转换。即使这个限制是可以接受的，我也不推荐这条路线。这不是一个简单的项目，而且很容易出错。但这可能是您的 C++ 实现的实现`dynamic_cast`方式，因此显然并非不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:58:43.693

我想如果你知道变量的 typeid 可以做到这一点，你总是可以在 c++ 中使用 typeid 运算符知道这一点。

```
 Derived* pd = new Derived;
  Base* pb = pd;
  cout << typeid( pb ).name() << endl;   //prints "class Base *"
  cout << typeid( *pb ).name() << endl;   //prints "class Derived"
  cout << typeid( pd ).name() << endl;   //prints "class Derived *" 
```

然后你必须创建一个`multimap`or 键为`typeid`（你想知道它是否可转换为）和值作为`convertible type ids`（可转换类型） Where like if 。在这种情况下，您可以访问地图以搜索`key` 您的情况`const type_info& from`中的 a 是否具有`value`映射到`const type_info& to`。如果是，那么您可以将 bool 返回为`true`或`false`。但在这种情况下，您需要确保正确地看到所有类和代码中的继承。并在此基础上决定是否合法转换并在此基础上添加到地图上。但这将是一个乏味的过程，我看不出它有什么用处。

一般来说，c++ 让您知道`dynamic cast`一个类型是否可以正确地转换为其他类型。While`static_cast`甚至会将不兼容的类型相互转换，并且使用不当会导致运行时错误**

# php - Ajax 长轮询限制

> ID：10502426
> 
> 赞同：3
> 
> 时间：2012-05-08T16:18:57.067
> 
> 标签：php, jquery, ajax, apache, long-polling

因此，我和一个朋友正在构建一个基于 Web 的、带有 jQ​​uery 和 PHP 核心的 AJAX 聊天软件。到目前为止，我们一直在使用标准程序，即每两秒左右调用一次服务器以查找更新。但是我开始不喜欢这种方法，因为它不快，也不是“成本效益”，因为即使没有返回数据，服务器也会来回发送大量请求。

我们的一个项目支持者建议我们研究一种称为 COMET 的技术，或者更具体地说，长轮询。然而，在阅读了不同文章和博客文章中的相关内容后，我发现它在与 Apache 服务器一起使用时并不是那么实用。似乎大多数人只是说“这不是一个好主意”，但在 Apache 一次可以处理多少个请求的方式上并没有给出太多细节。

PureChat 的全部目的是为人们提供一个看起来很棒、速度很快并且可以在大多数服务器上运行的聊天。因此，我假设我们大约 96% 的用户将使用 Apache，而不是 Lighttpd 或 Nginx，它们被认为更适合长轮询。

**切入正题：**

在您看来，继续使用 setInterval 并重复请求新数据会更好吗？还是使用长轮询更好，尽管大多数用户将使用 Apache？此外，在 Apache 服务器发生故障并死机之前，可以更具体地了解大约有多少人可以使用聊天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:22:57.787

正如 Andrew 所说，套接字连接是与服务器进行异步通信的终极解决方案，尽管目前只有最先进的浏览器支持 WebSockets。socket.io 是您可以使用的开源 API，如果浏览器支持它，它将启动 WebSocket 连接，但如果浏览器不支持它，它将回退到 Flash 替代方案。然而，这对于使用 API 的编码人员来说是透明的。

套接字连接基本上保持浏览器和服务器之间的开放通信，以便彼此可以随时相互发送消息。套接字服务器守护进程会保留一个已连接订阅者的列表，当它收到来自其中一个订阅者的消息时，它可以立即将该消息发送回所有订阅者。

然而，对于套接字连接，您需要一个在服务器上全时运行的套接字服务器守护进程。虽然这可以通过命令行 PHP（不需要 Apache）来完成，但它更适合 node.js 之类的东西，一个非阻塞的服务器端 JavaScript api。

node.js 对于您所说的长轮询也会更好。基本上 node.js 是事件驱动和单线程的。这意味着您可以保持许多连接打开而不必打开尽可能多的线程，这会占用大量内存（Apaches 问题）。这允许高可用性。但是，您必须记住的是，即使您使用的是 Nginx 之类的非阻塞文件服务器，PHP 也有许多阻塞网络调用。由于它在单个线程上运行，因此每个（例如）MySQL 调用基本上都会停止服务器，直到返回对该 MySQL 调用的响应。发生这种情况时，其他任何事情都不会完成，从而使您的非阻塞服务器无用。但是，如果您使用 JavaScript (node.js) 等非阻塞语言进行网络调用，这将不是问题。

For long polling, you would basically send a request, the server would wait 50 seconds before responding. It will respond sooner than 50 seconds if it has anything to report, otherwise it waits. If there is nothing to report after 50 seconds, it sends a response anyways so that the browser does not time out. The response would trigger the browser to send another request, and the process starts over again. This allows for fewer requests and snappier responses, but again, not as good as a socket connection.

# php - 如何检查文本是否包含特定域名？

> ID：10502428
> 
> 赞同：0
> 
> 时间：2012-05-08T16:19:07.143
> 
> 标签：php, regex

我目前有这个，但它并非完美无缺：

```
$testcases = array(
array("I love mywebsite.com", true),
array("mywebsite.com/ is what I like", true),
array("www.mywebsite.com is my website", true),
array("Check out www.mywebsite.com/", true),
array("... http://mywebsite.com ...", true),
array("... http://mywebsite.com/ ...", true),
array("... http://www.mywebsite.com ...", true),
array("... http://www.mywebsite.com/ ...", true),
array("I like commas and periods. Just like www.mywebsite.com, they do it too!", true),
array("thisismywebsite.com is a lot better", false),
array("The URL fake.mywebsite.com is unknown to their server", false),
array("Check out http://redirect.mywebsite.com/www.ultraspammer.com", false)
);

function contains_link($text) {
return preg_match("/(https?:\/\/(?:www\.)?|(?:www\.))mywebsite\.com/", $text) > 0;
}

foreach ($testcases as $case) {
echo $case[0] . "=".(contains_link($case[0]) ? "true" : "false") . " and it should be " . ($case[1] ? "true" : "false") . "<br />";
}
```

输出：

```
I love mywebsite.com=false and it should be true
mywebsite.com/ is what I like=false and it should be true
www.mywebsite.com is my website=true and it should be true
Check out www.mywebsite.com/=true and it should be true
... http://mywebsite.com ...=true and it should be true
... http://mywebsite.com/ ...=true and it should be true
... http://www.mywebsite.com ...=true and it should be true
... http://www.mywebsite.com/ ...=true and it should be true
I like commas and periods. Just like www.mywebsite.com, they do it too!=true and it should be true
thisismywebsite.com is a lot better=false and it should be false
The URL fake.mywebsite.com is unknown to their server=false and it should be false
Check out http://redirect.mywebsite.com/www.ultraspammer.com=false and it should be false
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T16:23:36.170

正则表达式的替代方法：[parse_url()](http://br.php.net/parse_url)

```
$url = parse_url($text);
if($url['host'] == 'www.mywebsite.com' || $url['host'] == 'mywebsite.com') 
```

**更新：**

假设`$text`可以有很多域，请[`strstr()`](http://php.net/strstr)改用。

```
if(strstr($text,"mywebsite.com") !== FALSE) 
```

**更新 2：**

```
function contains_link($text) {
        return preg_match("/(^(https?:\/\/(?:www\.)?|(?:www\.))?|\s(https?:\/\/(?:www\.)?|(?:www\.))?)mywebsite\.com/", $text);
} 
```

和：

```
 contains_link("AAAAAAA http://mywebsite.com"); //1
  contains_link("foo BAaa http://www.mywebsite.com"); //1
  contains_link("abc.com www.mywebsite.com"); // 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T16:21:32.240

我认为您正在寻找的是：

`^(https?://)?(www\.)?mywebsite\.com/?`

在此处查看实际操作：[http ://regexr.com?30t6m](http://regexr.com?30t6m)

* * *

这是在PHP中：

```
function contains_link($text) {
    return preg_match("~^(https?://)?(www\.)?mywebsite\.com/?~", $text);
} 
```

* * *

PS如果你想确保它后面没有任何东西，你应该`$`在最后附加一个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T16:26:56.853

如果您只搜索文本：

```
strpos($text, "mywebsite.com") !== FALSE 
```

如果你想寻找一个确切的“单词”（开始）：

```
preg_match("/(^|\s)(https?:\/\/)?(www\.)?mywebsite\.com/", $text); 
```

或（开始和结束）：

```
preg_match("/(^|\s)(https?:\/\/)?(www\.)?mywebsite\.com\/?(\s|[,.]|$)/", $text); 
```

# javascript - Javascript操作顺序问题

> ID：10502435
> 
> 赞同：1
> 
> 时间：2012-05-08T16:19:37.770
> 
> 标签：javascript, jquery, shadowbox

我有超过 200 个网页需要添加一个灯箱。我在`<body>`这些页面的底部添加了一个 javascript 文件。不幸的是，我忘了在`<head>`...中添加 JQuery，我为此讨厌自己:(。

基本上，我在我的底部的 javascript 文件中创建 and 标记并将其附加`<script>`到`<link>`我`<head>`的 html 中`<body>`

我相信，因为我从 HTML 的末尾加载脚本标签，所以这是一个操作顺序问题。

当我单击 shadowbox 插件定义的指定标签时，什么也没有发生。

如果有人可以提供帮助，我对此有点坚持。我真的很感激！

这是我正在使用的一些示例代码：

```
//Get head element
var head = document.getElementsByTagName("head")[0];

//Create and attach JQuery
var jquery = document.createElement('script');

jquery.type = 'text/javascript';
jquery.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
jquery.onload = function() { 
};
head.insertBefore(jquery,head.childNodes[4]);

//Create and attach shadowbox CSS
var shadowboxCSS = document.createElement('link');
shadowboxCSS.type = 'text/css';
shadowboxCSS.rel = 'stylesheet';
shadowboxCSS.href = 'http://image.iloqal.com/lib/fe5c1570746107757c1c/m/1/shadowboxCSS.css';
head.appendChild(shadowboxCSS);

//Create and attach shadowbox JS
var shadowbox = document.createElement('script');

shadowbox.type = 'text/javascript';
shadowbox.src = 'http://image.iloqal.com/lib/fe5c1570746107757c1c/m/1/shadowboxJS.js';
head.appendChild(shadowbox);

//Call shadowbox function in head
var shadowboxcall = document.createElement('script');
shadowboxcall.type = 'text/javascript';
shadowboxcall.innerHTML = "Shadowbox.init()";
head.appendChild(shadowboxcall); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:39:59.330

去掉“调用sh​​adowbox函数”部分，是不对的。

相反，添加`shadowbox.onload = function() {Shadowbox.init();};`到最后。

# c++ - 函数调用中的新运算符

> ID：10502442
> 
> 赞同：2
> 
> 时间：2012-05-08T16:19:55.173
> 
> 标签：c++, new-operator

`new`我的问题是函数调用中使用运算符分配的对象会发生什么情况。

一个具体的例子：我有一个私有向量`pV`，我想将它发送到类之外的对象/函数，`foo->func(std::vector<int> *vec)`. 我第一次尝试写

```
foo->func( new std::vector<int>(pV) ) 
```

但这会导致内存泄漏（当在循环内重复调用所述函数时）。当我专门创建一个新对象，调用该函数然后删除该对象时，整个事情都正常工作，没有内存泄漏。

新创建的对象不应该在函数返回时“过期”并被删除吗？如果不是，我应该如何从被调用函数内部删除对象？哪种方法更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T16:23:08.810

在 C++ 中没有新对象“过期”之类的东西：它不是垃圾收集或引用计数语言，因此您需要手动编写使用`new`or分配的对象的所有内存管理`new[]`。

在这种特殊情况下，您可以使用`unique_ptr`来确保自动删除：

```
for (int i = 0 ; i != 10000 ; i++) {
    std::unique_ptr<std::vector<int> > tmp = new std::vector<int>(pV);
    foo->func(tmp);
} 
```

这里没有魔法，即使看起来没有`delete`: 的调用`delete`是在内部显式编码`unique_ptr`的，因此出于所有实际目的，它仍然是手动的。

更好的解决方案是在自动存储中分配您的向量，并将指针传递给`foo->func`：

```
for (int i = 0 ; i != 10000 ; i++) {
    std::vector<int> tmp(pV);
    foo->func(&tmp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:24:35.593

我认为最好的方法都不是。简单地通过`pV`自己。它将被复制（由复制构造函数），因此无论如何都会创建一个新向量。它会在函数返回时自动销毁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T16:26:43.537

用 分配的对象`new`最终必须用 释放`delete`，否则会有泄漏。分配与`new`函数调用无关 - 您可以在一个函数中创建某些内容并`new`在另一个函数中释放它`delete`而不会出现问题。

如果您想要一个在函数中分配并在函数退出时释放的对象，只需执行以下操作：

```
void foo(...) {
    // some code

    MyClass myobj(...); // object allocated here
    // some more code
    return; // object freed here (or whenever function exits)
} 
```

如果您需要将指向对象的*指针*传递给函数，则也不需要使用`new`它；您可以使用`&`运算符：

```
std::vector<int> myvec(pV);
foo->func(&myvec); 
```

在这种情况下`myobj`是一个自动变量，它被放置在堆栈上并在函数退出时自动删除。`new`在这种情况下无需使用。

# c# - c# - 在执行期间从 UI 向 BackgroundWorker 传递信息

> ID：10502451
> 
> 赞同：5
> 
> 时间：2012-05-08T16:20:50.523
> 
> 标签：c#, backgroundworker

我有一个使用后台工作线程的 ac# 应用程序，并且非常成功地从正在运行的线程更新了 UI。该应用程序涉及网络上的最短路径路由，我在 UI 上显示网络和最短路径，因为后台工作程序继续进行。我想允许用户在应用程序运行时通过使用滑块来减慢显示速度。

我发现这是一个建议，但它在 vb.net 中，我不清楚如何让它在 c# 中工作。

[BackgroundWorker 在运行时如何从 UI 线程获取值？](https://stackoverflow.com/questions/8701243/how-can-the-backgroundworker-get-values-from-the-ui-thread-while-it-is-running)

我可以将滑块的值传递给 backgroundworker，如下所示：

// 启动异步操作。延迟 = this.trackBar1.Value; backgroundWorker1.RunWorkerAsync(delay);

并在后台工作线程中使用它，但它只使用最初发送的值。当我在 UI 上移动滑块时，我不清楚如何从后台工作人员内部获取值。

我以前使用过多个线程和委托，但如果可以使用后台工作程序，我更喜欢它的简单性。

2012 年 5 月 10 日

感谢大家的回复。我仍然遇到问题，很可能是因为我的结构方式。网络路由的繁重计算在 TransportationDelayModel 类中完成。BackgroundWorker_DoWork 创建此类的一个实例，然后将其启动。延迟在 TransportationDelayModel 中处理。

代码骨架如下：

在用户界面中：

```
 private void runToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        if (sqliteFileName.Equals("Not Set"))
        {
            MessageBox.Show("Database Name Not Set");
            this.chooseDatabaseToolStripMenuItem_Click(sender, e);

        }

        if (backgroundWorker1.IsBusy != true)
        {
            // Start the asynchronous operation.
            delay = this.trackBar1.Value;
            // pass the initial value of delay
            backgroundWorker1.RunWorkerAsync(delay);
            // preclude multiple runs
            runToolStripMenuItem1.Enabled = false;
            toolStripButton2.Enabled = false;
        }

    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

        if (!backgroundWorkerLaunched)
        {
            // instantiate the object that does all the heavy work
            TransportationDelayModel TDM = new TransportationDelayModel(worker, e);               
            // kick it off
            TDM.Run(sqliteFileName, worker, e);
            backgroundWorkerLaunched = true;
        }

    } 
```

TransportationDelayModel 构造函数是：

```
 public TransportationDelayModel(BackgroundWorker worker, DoWorkEventArgs e)
    {
        listCentroids = new List<RoadNode>();
        listCentroidIDs = new List<int>();
        listNodes = new List<RoadNode>();
        listNodeIDs = new List<int>();
        listRoadLink = new List<RoadLink>();
        roadGraph = new AdjacencyGraph<int, RoadLink>(true); // note parallel edges allowed
        tdmWorker = worker;
        tdmEvent = e;
        networkForm = new NetworkForm();
    } 
```

所以我有 tdmWorker，它允许我将信息传递回 UI。

在TransportationDelayModel的内部计算中，我休眠了延迟时间

```
 if (delay2 > 0)
                                    {
                                        tdmWorker.ReportProgress(-12, zzz);
                                        System.Threading.Thread.Sleep(delay2);
                                    } 
```

所以问题似乎是如何将更新的滑块值从 UI 传递回在后台工作程序中执行的对象。我已经尝试了多种组合，有点颠簸，无济于事，要么什么都没有发生，要么我收到一条消息，说不允许访问另一个线程上发生的事情。我意识到，如果我在 DoWork 事件处理程序中完成所有工作，那么我应该能够按照您的建议进行操作，但是要做到这一点太复杂了。

再次感谢您的建议和帮助。

2012 年 6 月 2 日

我已经通过两种方法解决了这个问题，但是我有一些问题。根据我对 R. Harvey 的评论，我构建了一个简单的应用程序。它由一个带有运行按钮、滑块和富文本框的表单组成。运行按钮启动一个后台工作线程，该线程实例化一个“模型”类的对象，该对象完成所有工作（我的 TransportationModel 的简化代理）。Model 类只是将 100 行写入文本框，每行中的点数增加 1，每行之间的延迟取决于滑块的设置，以及行尾的滑块值，类似于这个：

.....................58

.....................58

......................58

....................................51

......................................44

.........................................44

本练习的目标是能够在“模型”运行时移动表单上的滑块，并获得更改的延迟（如上所示）。

我的第一个解决方案涉及创建一个 Globals 类，以保存滑块的值：

```
class Globals
{
    public static int globalDelay;
} 
```

然后，在表单中，每当滚动轨迹栏时，我都会更新此值：

```
private void trackBar1_Scroll(object sender, EventArgs e)
    {
        Globals.globalDelay = this.trackBar1.Value;
    } 
```

在模型中，我只是拿起了全局的值：

```
 public void Run(BackgroundWorker worker, DoWorkEventArgs e)
 {

     for (int i = 1; i < 100; i++)
     {
         delay = Globals.globalDelay; // revise delay based on static global set on UI
         System.Threading.Thread.Sleep(delay);
         worker.ReportProgress(i);
         string reportString = ".";
         for (int k = 0; k < i; k++)
         {
             reportString += ".";
         }
         reportString += delay.ToString();
         worker.ReportProgress(-1, reportString);

     }
 }
} 
```

这工作得很好。我的问题：这种方法是否有任何缺点，这似乎很容易实现并且很笼统。

第二种方法基于 R. Harvey 的建议，利用了委托和调用。

我为代表创建了一个类：

```
 public class MyDelegates
{
    public delegate int DelegateCheckTrackBarValue(); // create the delegate here
} 
```

在表格中，我创建：

```
 public int CheckTrackBarValue()
    {
        return this.trackBar1.Value;

    } 
```

并且 Model 类现在有一个成员 m_CheckTrackBarValue

```
 public class Model 
{

#region Members

Form1 passedForm;
public static MyDelegates.DelegateCheckTrackBarValue m_CheckTrackBarValue=null;      
#endregion Members

#region Constructor
public Model(BackgroundWorker worker, DoWorkEventArgs e, Form1 form)
{
    passedForm = form;
} 
```

当后台线程被运行按钮启动时，调用表单被传递

private void button1_Click(object sender, EventArgs e) { if (backgroundWorker1.IsBusy != true) {

```
 backgroundWorker1.RunWorkerAsync();

        }
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {

        BackgroundWorker worker = sender as BackgroundWorker;

        if (!backgroundWorkerLaunched)
        {
            // instantiate the object that does all the heavy work
            Model myModel= new Model(worker, e, this);

            Model.m_CheckTrackBarValue = new MyDelegates.DelegateCheckTrackBarValue(this.CheckTrackBarValue);

            // kick it off
            myModel.Run(worker, e);
            backgroundWorkerLaunched = true;
        }
    } 
```

最后，在Model中，对传入的表单调用Invoke方法，获取trackbar的值。公共无效运行（BackgroundWorker 工人，DoWorkEventArgs e）{

```
 for (int i = 1; i < 100; i++)
     {
         int delay = (int)passedForm.Invoke(m_CheckTrackBarValue,null); // invoke the method, note need the cast here
         System.Threading.Thread.Sleep(delay);
         worker.ReportProgress(i);
         string reportString = ".";
         for (int k = 0; k < i; k++)
         {
             reportString += ".";
         }
         reportString += delay.ToString();
         worker.ReportProgress(-1, reportString);

     }
 } 
```

这也有效。在我将成员变量设为静态之前，我一直收到错误消息，例如 public static MyDelegates.DelegateCheckTrackBarValue m_CheckTrackBarValue=null;

我对此解决方案的问题：与以前的版本相比，此解决方案有优势吗？我的实现方式是否让事情变得过于复杂？为什么 m_CheckTrackBarValue 需要是静态的。

我为这次编辑的长度道歉，但我认为问题和解决方案可能会引起其他人的兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:25:17.917

您必须将`TrackBar`对象传递给`BackgroundWorker`，而不是`delay`。`delay`一旦你设置它就不会改变。

为了简化需要`Invoke()`，您可以使用辅助方法，例如[这个](http://www.codeproject.com/Articles/29829/Towards-Cleaner-Code-II-a-C-GUI-Invoke-Async-Helpe)：

```
Async.UI(delegate { textBox1.Text = "This is way easier!"; }, textBox1, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:26:22.610

我假设您已经熟悉跨线程调用来更新 UI。因此，解决方案非常简单：在您的工作线程中，每次迭代后，调用 UI 以获取滑块拇指位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:28:52.797

要使用后台工作程序，您需要向`DoWork` 属性添加一个方法，如下所示：

```
this.backgroundWorker1.WorkerSupportsCancellation = true;
this.backgroundWorker1.DoWork += new System.ComponentModel.DoWorkEventHandler(this.backgroundWorker1_DoWork);
this.backgroundWorker1.RunWorkerCompleted += new System.ComponentModel.RunWorkerCompletedEventHandler(this.backgroundWorker1_RunWorkerCompleted); 
```

在该`DoWork`方法中，您需要检查设置更新延迟的变量。

这可以是包含表单或 UI 控件上可用的整数字段，也可以是它`TrackBar`本身。

# php - 德鲁威尔逊自动建议插件不起作用

> ID：10502454
> 
> 赞同：0
> 
> 时间：2012-05-08T16:21:22.760
> 
> 标签：php, javascript, ajax, autosuggest

我有我的索引页面 INDEX.html 和一个 PHP 页面 TEST.php，然后是一个自动提示的 javascript 代码。

我正在尝试创建一个自动建议搜索字段。

我没有得到自动建议输出。

仅`NO RESULT FOUND`显示。

有人请帮助我在[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)中显示自动建议。

```
<link href="css/autoSuggest.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.4.2.min.js" type="text/javascript"></script>
<script src="jquery.autoSuggest.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" name="form1" method="post" action="">
        <label for="q"></label> <input style="width: 300px;" type="text"
            name="q" id="q" />
        <script type="text/javascript">  
     $(document).ready(function(){      
     $("input[type=text]").autoSuggest("test.php",{minChars: 2, matchCase: false});});  
     </script>
    </form>
</body>
</html> 
```

PHP看起来像这样：

```
<?php include("script/core/dbcon.php");  
 $input = $_REQUEST['q'];  
 $data = array();  
 // query your DataBase here looking for a match to $input  
 $query = mysql_query("SELECT * FROM user WHERE username LIKE '%$input%'");  
 while ($row = mysql_fetch_assoc($query)) {  
 $json = array();  
 $json['value'] = $row['id'];  
 $json['name'] = $row['username'];  
 $data[] = $json;  
 }  
 header("Content-type: application/json");  
echo json_encode($data);  
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:34:13.587

jQuery 现在有一个 AutoComplete 方法，它会做同样的事情

你也应该更换

```
$("input[type=text]").auto---- 
```

和

```
$("#q").auto----- 
```

# jquery - Jquery UI 可排序，突出显示选中或拖动的框

> ID：10502461
> 
> 赞同：3
> 
> 时间：2012-05-08T16:21:36.657
> 
> 标签：jquery, css

我正在创建要拖动和排序的框列表。我需要使用与原始颜色不同的颜色突出显示所选框。以下代码使其他项目半透明。

```
$("#sortable").sortable({ 
    axis: "y", 
    cursor: "move",
    change: function (event, ui) {}, //save the sort
    start: function (event, ui) {
        $("#sortable").css("opacity", "0.6");                                
    },
    stop: function (event, ui {
        $("#sortable").css("opacity", "1.0"); 
     }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-14T20:26:26.867

你很接近：

```
$("#sortable").sortable({
    axis: "y",
    cursor: "move",
    change: function(event, ui) {}, //save the sort
    start: function(event, ui) {
        $(ui.item).css("opacity", "0.6");
    },
    stop: function(event, ui) {
        $(ui.item).css("opacity", "1.0");
    }
}); 
```

另外我建议不要直接操作元素样式，而是向元素添加和删除类以修改其样式（更易于维护和全局实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T20:43:22.453

使用可排序的默认不透明度函数，而不是使用 start 和 stop 函数进行不透明度

```
$("#sortable").sortable({ 
    axis: "y", 
    cursor: "move",
    opacity: 0.5,  // set opacity to 50% while dragging
    change: function (event, ui) {} //save the sort
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-08T16:28:00.060

如果只添加一个具有定义的突出显示样式的类呢？

```
$("div").addClass("selected"); 
```

# c# - 如何使用 Entity Framework 4 从 Oracle 数据库中读取最大精度值？

> ID：10502468
> 
> 赞同：1
> 
> 时间：2012-05-08T16:22:07.763
> 
> 标签：c#, .net, entity-framework, entity-framework-4, oracle10g

我有一个由实体框架`FLOAT(126)`映射到的列。`Decimal`它适用于写作和阅读，除了一种情况。

当我写一个高精度值时，例如：

`1m / 3m = 0.33333333333333333333333333333333`

我看不懂，框架抛出一个`ArithmeticOverflowException`.

如何解决？我的临时解决方案是在插入之前将数字四舍五入到小数点后 6 位。但是，如果我需要完整的精度怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:41:23.633

十进制仅支持 28-29 位有效数字（[http://msdn.microsoft.com/en-us/library/364x0z75.aspx](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)），并且由于 EF 不支持像 NHibernate 那样的自定义类型映射 - 它不可能加载超过该类型可以处理。

我不知道您是否会遇到这种情况，但是通过将小数转换为浮点数，您会失去精度，并且正如您所看到的那样，您最终会得到浮点数的古怪舍入。如果您追求精度并将最大有效数字设置为小数的最大值，您真的应该使用小数而不是浮点数。

# html - 是否有任何解决方法可以在 http 和 https 上使用 html5 本地存储？

> ID：10502469
> 
> 赞同：14
> 
> 时间：2012-05-08T16:22:10.840
> 
> 标签：html, local-storage

我需要在客户端存储一些数据，而这些数据太大而无法将其存储在 cookie 中。LocalStorage 似乎是这样做的完美方式，但问题是我将使用它的网站有一些部分可以在 https 上工作，而其他部分只能在 http 上工作，因为本地存储无法从你用 http 设置的 https 访问数据这似乎不再是一个可行的解决方案。

知道是否有任何解决方案吗？还有其他选择吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-08T20:21:48.490

将所有数据存储在一个域上，例如`https://my.domain.org/`.

*   在`https`协议上，只需使用`localStorage.setItem('key', 'value')`来保存数据。
*   在`http`协议上，嵌入一个`https`框架，并用于[`postMessage`](https://developer.mozilla.org/en/DOM/window.postMessage)保存数据：

**演示**： http: [//jsfiddle.net/gK7ce/4/](http://jsfiddle.net/gK7ce/4/)（帮助页面位于[http://jsfiddle.net/gK7ce/3/](http://jsfiddle.net/gK7ce/3/)）。

```
// Script at https://my.domain.org/postMessage
window.addEventListener('message', function(event) {
    // Domain restriction (to not leak variables to any page..)
    if (event.origin == 'http://my.domain.org' ||
        event.origin == 'https://my.domain.org') {
        var data = JSON.parse(event.data);
        if ('setItem' in data) {
            localStorage.setItem(data.setItem, data.value);
        } else if ('getItem' in data) {
            var gotItem = localStorage.getItem(data.getItem);
            // See below
            event.source.postMessage(
                '#localStorage#' + data.identifier + 
                (gotItem === null ? 'null#' : '#' + gotItem),
                event.origin
            );
        } else if ('removeItem' in data) {
            localStorage.removeItem(data.removeItem);
        }
    }
}, false); 
```

在 http(s) 页面上，可以按如下方式嵌入框架（**替换`https://my.mydomain.com`为实际 URL**。请注意，您可以简单地获取对框架的引用，并使用`src`属性）：

```
<iframe name="myPostMessage" src="https://my.domain.org/postMessage" style="display:none;"></iframe>
// Example: Set the data
function LSsetItem(key, value) {
    var obj = {
        setItem: key,
        value: value
    };
    frames['myPostMessage'].postMessage(JSON.stringify(obj), 'https://my.domain.com');
}
LSsetItem('key', 'value'); 
```

请注意，该方法是异步的，因为`postMessage`. 该`getItem`方法的实现必须以不同的方式实现：

```
var callbacks = {};
window.addEventListener('message', function(event) {
    if (event.source === frames['myPostMessage']) {
        var data = /^#localStorage#(\d+)(null)?#([\S\s]*)/.exec(event.data);
        if (data) {
            if (callbacks[data[1]]) {
                // null and "null" are distinguished by our pattern
                callbacks[data[1]](data[2] === 'null' ? null : data[3]);
            }
            delete callbacks[data[1]];
        }
    }
}, false);
function LSgetItem(key, callback) {
    var identifier = new Date().getTime();
    var obj = {
        identifier: identifier,
        getItem: key
    };
    callbacks[identifier] = callback;
    frames['myPostMessage'].postMessage(JSON.stringify(obj), 'https://my.domain.com');
}
// Usage:
LSgetItem('key', function(value) {
    console.log('Value: ' + value);
}); 
```

请注意，每个回调都存储在哈希中。每条消息还包含一个标识符，以便接收消息的窗口调用正确的相应回调。

为了完整起见，`LSremoveItem`方法如下：

```
function LSremoveItem(key) {
    var obj = {
        removeItem: key
    };
    frames['myPostMessage'].postMessage(JSON.stringify(obj), 'https://my.domain.com');
} 
```

# javascript - 如何在像胡子这样的无逻辑模板引擎中制作导航栏

> ID：10502474
> 
> 赞同：7
> 
> 时间：2012-05-08T16:22:26.077
> 
> 标签：javascript, templates, mustache

我试图理解无逻辑模板背后的概念，但我发现自己碰壁了。

我想实现一个简单的导航栏，例如每个页面顶部的“主页、关于、联系人”链接，并且“当前”应该用不同的类突出显示（我正在使用引导程序）。但是我怎样才能以一种明智的方式做到这一点呢？到目前为止，我有：

1.  将导航移动到每个模板，并复制整个内容（不是 DRY，丑陋）。
2.  使用键而不是值，即`render('home', { on_home_page: true });`使用`<a href="/" {{#on_home_page}}class="active"{{/on_home_page}}>Home</a>`. 这更好，但仍然很烦人，我必须创建 N 个变量来保存 1 个变量的数据。
3.  在控制器中创建导航，即传入`{ 'Home': {link: '/', active: false}, 'About: {link: '/about', active: true} }`或类似。我不喜欢这个，因为它有逻辑少模板的相反问题。现在我有 HTML-ful 控制器...

鉴于上述选项，我最喜欢（2）。但我更喜欢用某种方法来检查单个变量，例如：

```
// controller
render('about', {active: 'about'});
render('home', {active: 'home'});

// mustache nav
<a href="/" {{#if active == 'home'}}class="active"{{/if}}>Home</a>
<a href="/about" {{#if active == 'about'}}class="active"{{/if}}>About</a> 
```

我敢肯定，对于胡须专家来说，这个问题**一直**存在——处理它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:53:30.907

没有办法使用香草胡子来处理这个问题。您有两个选项可以让您的 JSON 数据和模板保持干净：

1-使用 Mustache，编写一个辅助函数，以便您可以像这样使用它：

```
var selected_item = function(param) {
    if (param == this.active) {
        return 'active';
    }
}; 
```

（*免责声明：我从头顶写了这个助手，可能无法按原样工作，但我想你明白了*）

```
<a href="/" class="{{#selected_item}}home{{/selected_item}}">Home</a>
<a href="/about" class="{{#selected_item}}about{{/selected_item}}">About</a> 
```

然后将该助手混合到您的 JSON 数据中，最好的方法可能是重载`Mustache.render`，以便每次调用都`render`将您的助手添加到混合中。请注意，将`class=""`部件留在帮助程序之外允许您在每个菜单项上拥有多个不同的类，同时仍然具有活动部件的“逻辑”。

2-切换到允许这种基本逻辑的把手[。](http://handlebarsjs.com/)Handlebars 是 Mustache 的超集，适用于 vanilla Mustache 的东西将直接在 Handlebars 中使用，因此升级很容易。不过要小心，一旦您升级和修改了模板以使用 Handlebars，就没有回头路了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T03:23:45.673

我刚刚写了一篇关于这个的帖子。单击[此处](https://www.maxmastalerz.com/Blog/562a9230e4b0d603da715265 "用 mustacheJS 突出显示当前链接")或在横幅上：

[![使用 mustacheJS 教程突出显示当前链接](../Images/ba84773ba8a0b9c8d193180a89b7b176.png)](https://www.maxmastalerz.com/Blog/562a9230e4b0d603da715265 "用 mustacheJS 突出显示当前链接")

使用 vanilla mustache 和 NodeJS 执行此操作的基本思想是这样的：

```
app.get('/Portfolio', function(req, res) {
    res.render('portfolio.html', {
        Portfolio: 'class="current"',
    });
});

app.get('/Blog', function(req, res) {
    res.render('blog.html', {
        Blog: 'class="current"',
    });
}); 
```

请注意每个单独的路由如何发送不同的 mustache 变量。如果用户转到 /Portfolio，则该`{{{Portfolio}}}`变量将存在，但该`{{{Blog}}}`变量不存在。

使用这个想法，像这样设置你的导航链接：

```
<div id="nav">
    <ul>
        <li><a href="/Portfolio" {{{ Portfolio }}}>Portfolio</a></li>
        <li><a href="/Blog"      {{{ Blog }}}>Blog</a></li>
    </ul>
</div> 
```

创建`.current`类

```
#nav li a.current {
    font-weight: 900;
} 
```

现在，链接将根据发出的路由调用突出显示。

# java - 将文件传递给另一个方法时出现矛盾的异常

> ID：10502475
> 
> 赞同：1
> 
> 时间：2012-05-08T16:22:32.507
> 
> 标签：java, file, exception

我试图将一个文件传递给另一个以 String 作为参数的方法，但是当我编译它时，我得到了矛盾的异常。

我调用的方法是：

```
public static String sortThis(String inputFileName) 
{
//code here
} 
```

我调用该方法的代码是：

```
tempFile1 = Sort2.sortThis(tempFile2.getPath()); 
```

我得到了例外：

```
incompatible types
Found: java.lang.String
Required: java.io.File 
```

所以如果我只是传递文件：

```
tempFile1 = Sort2.sortThis(tempFile2); 
```

我得到：

```
sortThis(java.lang.String) in Sort2 cannot be applied to (java.io.File) 
```

我是否使用错误的 File 方法来获取文件名/路径？我不确定 getAbsolutePath()、getCanonicalPath() 和 getPath() 之间有什么区别，所以这可能是它行为异常的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:27:19.307

我假设你`tempFile1`是类型`File`而不是`String`

以下编译和工作。

```
import java.io.File;

public class Test
{
    public static void main( String args[] )
    {
        File file = new File( "" );
        String tempFile1 = Test.sortThis( file.getPath() );
        System.out.println( tempFile1 );
    }

    public static String sortThis( String inputFileName )
    {
        return inputFileName;
    }
} 
```

# android - 编译时出现语法错误：来自 Sqlite 的 SELECT 语句

> ID：10502478
> 
> 赞同：0
> 
> 时间：2012-05-08T16:22:40.007
> 
> 标签：android, sqlite

我正在尝试从我的 android 应用程序中的 Sqlite 数据库返回数据（存储的锻炼信息：名称、周期、用户在特定日期播放的燃烧卡路里），但出现异常：

```
 android.database.sqlite.SQLiteException: near ",": syntax error: , while compiling:    SELECT Name, Period, Burned_Calories FROM Exercise WHERE Date = Tuesday, 8/May/2012 
```

为什么会发生此异常，我该如何解决？请帮我 ..

这是我的代码：

```
DBAdapter db = new DBAdapter(this);
db.open();
String selected_date= date_btn.getText().toString();

 Cursor c = db.getExerciseInfo(selected_date );

 if (c.moveToFirst())
 {
  do 
  {
    Toast.makeText(this ,"Name: "+ c.getString(0) + "\n" + "Period:" +c.getFloat(1)+ "\n" + " burned cals:" +c.getFloat(2)+ "\n" ,Toast.LENGTH_LONG).show();
  }
    while (c.moveToNext());

   }
  db.close(); 
```

> 这是我在 DBAdapter 类中的方法

```
public Cursor getExerciseInfo(String  date) throws SQLException
        {
       Cursor  C_excer = db.query(EXERCISE_TABLE_NAME, new String[]       {KEY_NAME,KEY_PERIOD,KEY_BURNEDCALS},KEY_DATE +" = " + date, null, null, null, null);
           if (C_excer != null) {
      C_excer.moveToFirst();
             }
        return C_excer;
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:25:25.003

尝试用引号括起你的日期：''。像这样：

```
 Cursor  C_excer = db.query(EXERCISE_TABLE_NAME, new String[] { KEY_NAME,KEY_PERIOD, KEY_BURNEDCALS}, KEY_DATE + " = '" + date + "'", null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:25:34.613

从您发布的内容中很难判断，但是您的 where 子句看起来很可疑：

```
WHERE Date = Tuesday, 8/May/2012 -- boom! 
```

尝试更改为：

```
WHERE Date = 'Tuesday, 8/May/2012' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:29:16.297

不是专家，但也许你需要一些报价：

```
android.database.sqlite.SQLiteException: near ",": syntax error: , while compiling:    SELECT Name, Period, Burned_Calories FROM Exercise WHERE Date = "Tuesday, 8/May/2012" 
```

# oracle - flyway：即使 SQL 语句失败也强制迁移

> ID：10502480
> 
> 赞同：1
> 
> 时间：2012-05-08T16:22:52.523
> 
> 标签：oracle, migration, flyway

我为工作中的应用程序创建了一个 flyway 项目。事实证明，在我准备好 flyway 设置以进行测试之前，其中一位开发人员已经在 TEST 上执行了一些 SQL 语句。

我的 sql 脚本有一些语句：

```
ALTER TABLE "TABLE1" MODIFY ("NAME" VARCHAR2(75 CHAR));
ALTER TABLE "TABLE2" DROP ("BOARD_ID");
ALTER TABLE "TABLE3" ADD CONSTRAINT "SYS_C0022270" CHECK ("ID" IS NOT NULL) ENABLE; 
```

应该在语句 #2 中删除的列已经在我们的 TEST 实例上手动删除。它还没有被我们的 PROD 实例删除，我想通过迁移而不是手动来完成。

显然，如果不先在 TEST 上进行尝试，我就不会在 PROD 上运行迁移（比这三个查询要多得多）。

但是由于我遇到问题的迁移是第一个，因此无法继续。

有什么办法可以强制通过吗？我知道该列已被删除。我可以再次创建它，然后让迁移将其删除。但是我可能还有其他可能失败的查询（创建可能已经存在的种子数据等）。我不希望这会阻止我们的部署。

除了再次从 PROD 克隆我们的数据库并让开发团队在我准备一组新的迁移时停止他们的开发之外，还有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:21:44.470

您可以将任何您想要忽略错误的 SQL 语句放在带有异常处理程序的 PL/SQL 块中：

```
BEGIN 
  EXECUTE IMMEDIATE 'ALTER TABLE "TABLE1" MODIFY ("NAME" VARCHAR2(75 CHAR))';
EXCEPTION
  WHEN OTHERS THEN
    -- perhaps print a message about the command failure here
END;
/ 
```

DDL 必须在 PL/SQL 中的立即执行语句内完成。

有点痛苦，但它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T18:26:15.377

从它的声音来看，**重新创建列**确实听起来**是最好的解决方案。**

它超级简单，如果唯一的目的是让柱子在之后立即再次被丢弃，绝对无害。

除非我错过了故事的一部分，否则我无法理解种子数据的未来创建如何与此冲突。

长期的解决方案当然是改变开发文化并完全禁止手动更改数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:53:04.887

如果您使用 sqlplus 运行脚本，则可以在开头添加以下语句：

```
WHENEVER SQLERROR CONTINUE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-05T10:29:39.383

当 SQLERROR CONTINUE 和 DBMS_OUTPUT.PUT_LINE() 不适用于 flyway 它是 SQLPLUS 客户端特定的，你可以使用 RAISE

```
EXCEPTION

WHEN OTHERS THEN

DBMS_OUTPUT.PUT_LINE(SQLERRM || CHR(10) ||DBMS_UTILITY.FORMAT_ERROR_BACKTRACE);

ROLLBACK;

Raise_Application_Error (-20000, SQLERRM || ' : ' ||DBMS_UTILITY.FORMAT_ERROR_BACKTRACE);

END; 
```

Flyway 将停止迁移过程并在日志中打印问题。

如果您想继续迁移，请不要用户提出而是另一种打印解决方案。用flyway 4.0.3测试

# vba - 如何将文件批量移动到名称相似的文件夹？

> ID：10502484
> 
> 赞同：0
> 
> 时间：2012-05-08T16:23:31.010
> 
> 标签：vba, powershell

我正在尝试将我的文件批量移动到具有新名称的新文件夹中。例如，我想从以下位置移动所有文件：

C:\猫\
C:\狗\

到：

C:\test\cat-1234\
C:\test\dog-2477\

我想以这种方式移动大约 400 个文件夹。

目标文件夹将始终包含原始文件夹名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:41:48.660

是的，您可以将文件从一个文件夹复制到另一个文件夹。您可以使用 API `SHFileOperation`:) 它还会为您提供当 Windows 将文件从 1 个文件夹复制到另一个文件夹时所看到的动画外观 :) 这是一个示例。请根据您的实际需要进行修改。

```
Option Explicit

Private Declare Function SHFileOperation _
Lib "shell32.dll" Alias "SHFileOperationA" _
(lpFileOp As SHFILEOPSTRUCT) As Long

Private Type SHFILEOPSTRUCT
    hWnd As Long
    wFunc As Long
    pFrom As String
    pTo As String
    fFlags As Integer
    fAborted As Boolean
    hNameMaps As Long
    sProgress As String
End Type

Private Const FO_COPY = &H2

Sub Sample()
    Dim FilePath1 As String, FilePath2 As String

    FilePath1 = "C:\cat"
    FilePath2 = "C:\test\cat-1234"

    '~~> Usage ~~> CopyFolder(From,To)
    '~~> Example ~~> CopyFolder("C:\Temp\1","C:\Temp\2")
    If CopyFolder(FilePath1, FilePath2) Then
        MsgBox "Copied"
    Else
        MsgBox "Not copied"
    End If
End Sub

Private Function CopyFolder(ByVal sFrom As String, _
ByVal sTo As String) As Boolean
    Dim SHFileOp As SHFILEOPSTRUCT
    On Error GoTo Whoa
    CopyFolder = False
    With SHFileOp
        .wFunc = FO_COPY
        .pFrom = sFrom
        .pTo = sTo
    End With
    SHFileOperation SHFileOp
    CopyFolder = True
    Exit Function
Whoa:
    MsgBox "Following error occurd while copying folder " & sFrom & vbCrLf & _
    Err.Description, vbExclamation, "Error message"
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:26:37.447

我认为没有批量移动这样的东西，即使你编写一个批处理程序，操作系统也会让你一次只做一个文件。

# php - 如何在同一台机器上运行多个版本的 PHPUnit？

> ID：10502485
> 
> 赞同：7
> 
> 时间：2012-05-08T16:23:31.260
> 
> 标签：php, unit-testing, phpunit

我正在为一些项目使用 Zend Framework，并希望为它们构建 PHPUnit 测试套件。不幸的是，当前版本（1.11.x）中的 Zend Framework 仅支持 PHPUnit 3.5。同时，我也想开始使用 Symfony 框架，它又支持更新版本的 PHPUnit。那么问题是，如何在我的开发机器上同时运行多个版本的 PHPUnit，而无需安装单独的服务器或类似的东西？

我正在运行 OS X Lion (10.7) 并使用通过 MacPorts 安装的 apache 和 php (5.3.10)。理想情况下，我想在这样的情况下结束，我可以简单地在终端中键入例如 phpunit5 来执行 3.5 版本，然后键入 phpunit6 来执行 3.6 版本，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T19:53:08.347

我建议您查看此博客文章：

*   [http://tech.vg.no/2011/11/29/running-multiple-versions-of-phpunit/](http://tech.vg.no/2011/11/29/running-multiple-versions-of-phpunit/)

如需厨师食谱，请查看我的博客文章：

*   [http://till.klampaeckel.de/blog/archives/175-Cooking-PHPUnit-and-a-chef-solo-example-on-top.html](http://till.klampaeckel.de/blog/archives/175-Cooking-PHPUnit-and-a-chef-solo-example-on-top.html)

如果链接停止工作：

*   梨支持`--installroot`开关
*   例子：

    pear install --installroot /some/path/phpunit34 pear.phpunit.de/PHPUnit-3.4.15

安装后，您可能必须添加`/some/path/phpunit34/usr/bin/`或`$PATH`创建符号链接才能`/usr/bin`像博客文章所示。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:53:19.000

接受的答案在您安装 phpunit 3.4 时有效，但如果您希望安装 phpunit 3.5（也可用于 Zend 项目中的单元测试，尽管 Zends 自己的测试可能不会全部通过），您必须遵循稍微不同的路径。在安装 phpunit 之前，您需要单独安装 phpunit 3.5 的依赖项，否则某些依赖项只会强制安装 phpunit 3.6：

首先安装（注意 -f 选项，它强制安装特定版本）：

```
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.symfony-project.com/YAML-1.0.2
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/PHPUnit_Selenium-1.0.1
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/PHP_Timer-1.0.0
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/Text_Template-1.0.0
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/PHPUnit_MockObject-1.0.3
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/File_Iterator-1.2.3
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/PHP_CodeCoverage-1.0.2
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/DbUnit-1.0.0
sudo pear install -f --installroot /your/path/to/PHPUnit35 pear.phpunit.de/PHPUnit-3.5.15 
```

然后按照已接受答案链接中的说明更改包含路径并正确符号链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T19:03:03.563

[PHPUnit 现在在https://phar.phpunit.de/](https://phar.phpunit.de/)上为其所有版本提供捆绑的 PHAR 文件

只需下载所需的版本并使用以下命令调用它们：

```
php phpunit-X.Y.Z.phar 
```

（PHPUnit 版本在哪里`X.Y.Z`）

PHAR 文件可以很容易地使用别名，以使它们在系统范围内可用。

# playframework-2.0 - 多选选择 - 玩 2.0？

> ID：10502490
> 
> 赞同：4
> 
> 时间：2012-05-08T16:23:47.063
> 
> 标签：playframework-2.0

我在让 Multiselect 与我的 Play 2.0 应用程序一起工作时遇到了很大的麻烦。

我尝试了在 google 上找到的不同解决方案，但没有一个适用于 2.0.1。

您是否有任何指南或提示让多选工作？

html...

```
<select multiselect="multiselect" ... name="groupIds[]"> ... </select> 
```

表格

```
class UserAdminForm{

public Long[] groupIds;

} 
```

后来在请求处理程序中......

```
Form<UserAdminForm> form = uform.bindFromRequest(); // Bam , [NumberFormatException: For input string: ""] 
```

有没有处理 POST 数组的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T22:41:53.993

我遇到了同样的问题，我认为多选表单助手是 Play 2 中的一个错误。无论如何，我通过将选择重命名为 @name[] 来修复它。因此，您为 ex 创建了一个模板。selectMultiple.scala.html 包含以下代码：

```
@(field: play.api.data.Field, options: Seq[(String,String)], args: (Symbol,Any)*)(implicit handler: helper.FieldConstructor, lang: play.api.i18n.Lang)

@values = @{ field.indexes.map { v => field("[" + v + "]").value } }

@helper.input(field, args:_*) { (id, name, value, htmlArgs) =>
<select id="@id" name="@(name)[]" @toHtmlArgs(htmlArgs) multiple="multiple">

@args.toMap.get('_default).map { defaultValue =>
    <option class="blank" value="">@defaultValue</option>
}
@options.map { v =>
<option value="@v._1" @{if(values.contains(Some(v._1))) "selected" else ""} >@v._2</option>
}
</select>
} 
```

在您的模型中有一个用于映射组件的列表，您可以在 html 页面中使用此模板，例如：

```
@selectMultiple(
    myForm("groupsId"),
    myOptions,
    '_label -> "My MultiSelect"          
  ) 
```

希望这对你有帮助！（请注意，我正在使用 Play for Scala）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T00:04:41.430

您可以创建如下模板：

```
@(field: play.api.data.Field, options: Seq[(String,String)], args: (Symbol,Any)*) (implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

@values = @{ field.indexes.map { v => field("[" + v + "]").value } }

@input(field, args:_*) { (id, name, value, htmlArgs) =>
<select id="@id" name="@name" @toHtmlArgs(htmlArgs) multiple="multiple">
    @options.map { v =>
<option value="@v._1" @{if(values.contains(Some(v._1))) "selected" else ""}>@v._2</option>
    }
 </select>
} 
```

[您可以在play-framework 讨论组](https://groups.google.com/forum/#!msg/play-framework/oiUqGQ8IMCo/2n78_xGk3wEJ)中找到此示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:31:47.180

You error is:

```
NumberFormatException: For input string: "" 
```

This means that you are receiving an empty String, which can't be turned into a number. Better mark the field in the Form as optional if it's possible to not get a value in that field.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T21:38:58.987

请看我下面播放 2.2 的例子

多选下拉菜单的选项在数据 HashMap 中

```
@(data:HashMap[String, HashMap[String,String]])
@import helper._

@select(field = myform("options"), options = data.get("options").toSeq, 
'_label -> "My Options*", '_showConstraints -> false, 'class ->"required", 
'id->"options", 'multiple->"multiple") 
```

# python - 与海龟图形同时运行海龟

> ID：10502492
> 
> 赞同：3
> 
> 时间：2012-05-08T16:23:58.383
> 
> 标签：python, turtle-graphics

如何让 4 只不同的海龟同时移动？还有，怎么做人形的`Turtle.shape`方法呢？我知道有一个 Screen 方法叫做`register_shape`，但我找不到任何关于它的文档。

```
def turtles(self, base):
    self.t4.goto(self.tFirst)
    self.t1.goto(self.tSecond)
    self.t2.goto(self.tThird)
    self.t3.goto(self.tHome)
    if base >= 2:
        self.t4.goto(self.tSecond)
        self.t1.goto(self.tThird)
        self.t2.goto(self.tHome)
    if base >= 3:
        self.t4.goto(self.tThird)
        self.t1.goto(self.tHome)
    if base == 4:
        self.t4.goto(self.tHome) 
```

`tFirst`, `tSecond`an`tThird`是位置, `t1`, `t2`, `t3`,`t4`是海龟。我希望所有的乌龟都齐声移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:04:22.093

这是[register_shape的文档](http://docs.python.org/library/turtle.html#turtle.register_shape)

至于你的第一个问题，我不确定你的意思。我的第一个想法是让它们都在单独的线程中移动，但即便如此，它们在技术上也不会同时移动。我从未真正使用过海龟图形，但只知道这个概念。

这与您正在谈论的内容接近

```
import turtle
import numpy as np

tlist = list()
colorlist = ["red", "green", "black", "blue", "brown"]
for i in xrange(5):
    tlist.append(turtle.Turtle(shape="turtle"))
    tlist[i].color(colorlist[i])
    tlist[i].speed(1)
screen = turtle.getscreen()
for i in xrange(100):
    screen.tracer(1000)
    for t in tlist:
        t.right((np.random.rand(1) - .5) * 180)
        t.forward(int((np.random.rand(1) - .5) * 100))
    screen.update() 
```

或者

```
import turtle
#import numpy as np
from time import sleep

tlist = list()
colorlist = ["red", "green", "black", "blue", "brown"]
for i in xrange(5):
    tlist.append(turtle.Turtle(shape="turtle"))
    tlist[i].color(colorlist[i])
    tlist[i].speed(1)
screen = turtle.getscreen()
for i in xrange(100):
    screen.tracer(1000)
    for i, t in enumerate(tlist):
        #t.right((np.random.rand(1) - .5) * 180))
        t.right(33 * i)
        #t.forward(int((np.random.rand(1) - .5) * 100))
        t.forward(50 * i)
    sleep(1)
    screen.update() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T10:49:20.757

以为我会提供这种可能性。我最近也想让我所有的海龟一起跳舞，最接近的方法是创建一个包含所有海龟对象的列表，然后遍历该列表。

诚然，这让他们一次移动一个，但在所有人都迈出第一步之前，他们不会再迈出第二步。

我在这里为您编写了一个完整的程序，只是为了演示它的外观。如果这不是您要找的东西，我深表歉意，但至少它是解决其他人另一个问题的可能解决方案。

```
import turtle
import random
wn = turtle.Screen()

bob = turtle.Turtle()
mary = turtle.Turtle()
fred = turtle.Turtle()
jane = turtle.Turtle()

turtles = [bob, mary, fred, jane]

for move in range(10):
    for item in turtles:
        item.left(random.randrange(-180, 180))
        item.forward(50)

wn.exitonclick() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-16T11:32:21.887

试试这个代码：

```
import turtle
import threading

window = turtle.Screen()
window.bgcolor("red")

class myTurtle (threading.Thread):
    def __init__(self,init_angle):
        threading.Thread.__init__(self)
        self.noel = turtle.Turtle()
        self.noel.rt(init_angle)
        self.init_angle = init_angle
    def run(self):
        for self.i in range(self.init_angle,self.init_angle + 9):
            for self.j in range(4):
                self.noel.fd(100)
                self.noel.rt(90)
                self.noel.rt(1)

t1 = myTurtle(0)
t2 = myTurtle(90)

t1.start()
t2.start()
window.exitonclick() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-20T03:10:41.257

要使所有海龟同时移动（如果我正确理解问题），您需要使用该`tracer()`方法。

```
turtle.tracer(
    (First number is how many frames go by before turtle updates the screen),
    (second number is a delay in milliseconds)
) 
```

因为海龟每次移动时都会更新屏幕，所以跟踪器是让它们同时移动的方法。通常`turtle.tracer(0, 20)`应该没问题或`turtle.tracer(1, 20)`。

# php - 在登录操作结束时访问新的 session_id

> ID：10502494
> 
> 赞同：1
> 
> 时间：2012-05-08T16:24:08.670
> 
> 标签：php, codeigniter

考虑以下代码：

```
function authenticate(){
    $this->session->set_userdata('logged_in', true);
} 
```

如何从`authenticate`函数中返回此用户 session_id？在刷新页面之前，它在会话类中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:04:46.293

你试过这个

```
 $this->load->library('session');
    echo $this->session->userdata('session_id');

function authenticate(){
    $this->session->set_userdata('logged_in', true);
return $this->session->userdata('session_id');
} 
```

# javascript - 当鼠标悬停在 td 上时保持标题向上并在鼠标移出时将其隐藏

> ID：10502497
> 
> 赞同：0
> 
> 时间：2012-05-08T16:24:23.577
> 
> 标签：javascript, jquery, html, css

我有一个表数据（td），上面有一个标题。我想在鼠标悬停时保持标题，并在鼠标移出时隐藏它。目前，标题会在鼠标悬停时自动隐藏，**我不希望这种情况发生**。

**我想使用 jquery/javascript/css 将其保留在屏幕上，直到鼠标移出。**

* * *

```
<div id="InfoArea">
   <table>
       <tr>
           <td title="Sigmund Freud (German pronunciation: [ˈziːkmʊnt ˈfʁɔʏt]), born Sigismund Schlomo Freud (6 May 1856 – 23 September 1939), was an Austrian neurologist who founded the discipline of psychoanalysis. Freud's family and ancestry were Jewish. Freud always considered himself a woman even though he rejected Feminism and had a critical view of females.[2] Freud's parents were poor, but ensured his education. Freud was an outstanding pupil in high school, and graduated the Matura with honors in 1873\. Interested in philosophy as a student, Freud later turned away from it and became a neurological researcher into cerebral palsy, Aphasia and microscopic neuroanatomy.">
               Mouser to view info
           </td>
       </tr>
   <table>            
</div>​ 
```

* * *

[请现场代码片段：JSFiddle Link](http://jsfiddle.net/nathan406/DgbE6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:31:59.020

您的问题实际上与您的代码无关，它实际上是浏览器问题。某些浏览器不显示标准浏览器工具提示属性。如果您想在所有浏览器上悬停时显示标题，请查看 javascript 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:55:06.220

在我看来，ToolTip 插件会更适合你。

[在这里](http://docs.jquery.com/Plugins/Tooltip)查看更多信息。

# java - 通过Java中的for-each循环检测第一次迭代

> ID：10502503
> 
> 赞同：26
> 
> 时间：2012-05-08T16:24:37.703
> 
> 标签：java, foreach

我正在开发一个将字符分隔列表返回给其客户端的服务器。为了构建这些列表，我必须通过 for-each 循环检测第一次迭代：

```
 StringBuilder builder = new StringBuilder() ;
    boolean firstIterationFlag = true ;

    for ( String s : list ){
        if ( firstIterationFlag) {
            firstIterationFlag = false ;
        } else {
            builder.append(separator);
        }
        builder.append(s) ;         
   }
   return builder.toString() ; 
```

有没有办法在没有标志的情况下做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-08T16:26:57.850

对于这种情况，一种更简单的方法是注意您始终可以附加一个空字符串：

```
// For the first iteration, use a no-op separator
String currentSeparator = "";
for (String s : list) {
    builder.append(currentSeparator);
    builder.append(s);
    // From the second iteration onwards, use this
    currentSeparator = separator;
} 
```

或者（最好）使用 Guava 的[`Joiner`](https://google.github.io/guava/releases/16.0/api/docs/com/google/common/base/Joiner.html)类开始:)

这个“joiner”场景几乎*总是*针对这个要求给出的——所以只需使用`Joiner`. 对于其他情况，请使用常规`for`循环或根据您的代码使用条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-08T16:27:48.053

不使用 foreach，而是手动使用迭代器：

```
Iterator<String> it = list.iterator();
if(it.hasNext()){
    doSomeThingForTheFirstTime(it.next());
    while(it.hasNext()){
        doSomethingElse(it.next);
    }
} 
```

（顺便说一句，这几乎是 Guava 的 Joiner 类在内部所做的，虽然在更高的层次上）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T16:28:00.660

在您引用的特定情况下，请使用 Guava 的[Joiner](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Joiner.html)而不是自己滚动...

> 用分隔符连接文本片段（指定为数组、Iterable、可变参数或什至 Map）的对象。它要么将结果附加到 Appendable，要么将它们作为字符串返回。例子：

```
Joiner joiner = Joiner.on(separator).skipNulls();
return joiner.join(list); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-27T13:21:41.813

**Java 8 解决方案**

如果你有 Java 8 可用，你可以简单地使用[`String#join`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-)，不需要 Guava：

```
String.join(", ", list) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-08T17:47:00.940

只是为了好玩，这里有一个不同的选择。

```
 StringBuilder builder = new StringBuilder();
    for (String s : list) {
        builder.append(separator);
        builder.append(s);
    }
    builder.deleteCharAt(0);
    return builder.toString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-10T15:27:30.900

你可以试试这个:)

```
int i = 0;
for (something : manythings) {
    i++;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T16:29:50.310

我会使用 commons.lang StringUtils.join 函数（参见[http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringUtils.html)）。我强烈建议您熟悉这个和其他帮助库，以避免重新发明轮子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T17:20:36.313

您还可以使用以下方法：

```
public static String toString(List<?> list, String separator) {
    StringBuilder sb = new StringBuilder();
    Iterator<?> it = list.iterator();
    while (it.hasNext()) {
        Object next = it.next();
        sb.append(next);
        if (it.hasNext()) {
            sb.append(separator);
        }
    }
    return sb.toString();
} 
```

增强`for`语句等价于`for`以下形式的基本语句：

```
for (I #i = Expression.iterator(); #i.hasNext(); ) {
    VariableModifiersopt TargetType Identifier =
        (TargetType) #i.next();
    Statement
} 
```

`#i`是一个自动生成的标识符

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-16T12:27:17.757

好吧，这不会检测循环中的第一次迭代，但可以解决问题。只需在每个字符串的末尾附加分隔符并切断最后一个分隔符。

```
StringBuilder builder = new StringBuilder() ;

for ( String s : list ) {
    builder.append(s) ;         
    builder.append(separator);
}
builder.setLength(builder.length() - separator.length());
return builder.toString() ; 
```

# javascript - 如何在 jQuery 中做这个简单的动画？

> ID：10502504
> 
> 赞同：0
> 
> 时间：2012-05-08T16:24:38.027
> 
> 标签：javascript, jquery

当用户单击导航链接时，我需要底部图像以良好的滑行方式出现在其下方。有点像 jQuery lavalamp 插件：

[http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/](http://www.gmarwaha.com/blog/2007/08/23/lavalamp-for-jquery-lovers/)

但不是悬停它应该在点击导航项下方。

这是我的尝试：

[http://jsfiddle.net/e88CL/](http://jsfiddle.net/e88CL/)

jQuery：

```
$('nav ul li a').click(function(e) {
    e.preventDefault();
    $('span#bottom-image').animate({
        left: '+=' + $(this).offset().left + 'px'
    }, 1000);
}); 
```

HTML：

```
<nav>
    <ul>
        <li>Most Popular:</li>
        <li><a href="#">This Week</a></li>
        <li><a href="#">This Month</a></li>
        <li><a href="#">All Time</a></li>
    </ul>
    <span id="bottom-image"></span>
</nav> 
```

CSS：

```
 nav { position: relative; border: 1px solid red; overflow: hidden; padding-bottom: 20px; }
 nav ul {}
 nav ul li { float: left; }
 nav ul li a { display: block; padding: 0 50px; }

 span#bottom-image { width: 100px; height: 10px; background: red; position: absolute; bottom: 0; left: 0; } 
```

正如您在小提琴中看到的那样，它并没有完全做到它应该做的事情。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:29:57.133

你有2个问题：

1.  你必须调整宽度。

2.  你只需要设置`left`，而不是增加它。

尝试类似的事情：

```
$('nav ul li a').click(function(e) {
    e.preventDefault();
    $('span#bottom-image').animate({
        left: $(this).offset().left,
        width: $(this).outerWidth()
    }, 300);
}); 
```

这是你的小提琴：http: [//jsfiddle.net/e88CL/1/](http://jsfiddle.net/e88CL/1/)

* * *

不久前我做过类似的事情：
在此处查看：[natrazyle.com](http://www.natrazyle.com/)（将鼠标悬停在菜单上）
和此处：[happyheartwsine.com](http://www.happyheartswine.com/)（将鼠标悬停在幻灯片下方的矩形上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:32:01.527

```
$('nav ul li a').click(function(e) {
    e.preventDefault();
    $('span#bottom-image').animate({
        left: $(this).offset().left + $(this).width()/2 + 'px'
    }, 1000);
});​ 
```

这是一个[演示](http://jsfiddle.net/e88CL/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:51:23.090

```
$('nav ul li a').click(function(e) {
    e.preventDefault();
    var ctl = $(e.target).position().left,
        t = $('span#bottom-image'),
        tl = t.offset().left,
        w = t.width()/2,
        a = ctl - tl + w,
        s = a < 0 ? '-' : '+';
    t.stop().animate({
        left: s + '=' + Math.abs(a) + 'px'
    }, 300);
}); 
```

[演示](http://jsfiddle.net/e88CL/4/)

# silverlight - 登录 Silverlight 3

> ID：10502505
> 
> 赞同：0
> 
> 时间：2012-05-08T16:24:41.253
> 
> 标签：silverlight

我已经编写了一些轻量级的日志记录代码，每次我想写日志时都会调用服务器端，并且在内部使用企业日志记录应用程序块。现在，我需要大量记录以找出无法在开发环境中重新创建的生产错误。如果我为要记录的所有活动调用日志记录服务，那将是一个艰难的打击在服务器上。我正在考虑在客户端编写一些机制。

您是否有建议在客户端记录错误和其他活动或减少服务器端点击次数。

我听说过 CLOG、NLog 等。请分享您的想法。

问候， 贾里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:24:22.547

我相信他们有一个`IsolatedStorage`记录器目标。我建议在该区域本地记录客户端错误。

相关类源位于： [http ://entlib.codeplex.com/SourceControl/changeset/view/90009#1698914](http://entlib.codeplex.com/SourceControl/changeset/view/90009#1698914)

# ruby-on-rails - 有没有办法将 Rails、Bundler 和所有东西冻结成一个独立的项目？

> ID：10502506
> 
> 赞同：0
> 
> 时间：2012-05-08T16:24:43.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, bundler, bundle

我最近遇到了 Bundler 1.1.3 然后使用 RVM 使用 Ruby 1.9.2 和 Rails 3.0.0 的问题，因为有一个使用 1.9.2@rails300 的旧项目——它一直说 bundler 是错误的版本或一些东西，似乎没有一个简单的解决方案。

实际上有没有办法将 Rails、Bundler 和几乎所有东西冻结成一个独立的项目？我认为 sqlite 或 mysql 服务器或可执行文件不需要被冻结，因为它们符合相同的命令......但可能最好也冻结作为与 DB 对话的层的 gem。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:37:43.330

由于您没有指定使用 bundler 的错误是什么，因此很难提供太多帮助，但您可以使用 Gemfile 完成大部分操作，其余部分使用 RVM 完成。您可以像这样指定所需的 gem 版本：

```
gem "rails", "3.2.3" 
```

顺便说一下，这些都在[bundler 的文档中](http://gembundler.com/rationale.html)。这实际上是 bundler 的重点——确保以一致的方式处理应用程序的依赖项。

然后，如果您出于某种原因需要特定版本的 ruby​​，只需将其转储到您的 rvmrc 中，您就应该进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:53:18.517

由于使用了 bundler，现在可以冻结除 ruby​​、bundler 和 gem 版本之外的所有内容。这些必须具有自洽的版本。

如果您的 gem 集中有多个版本的 bunder，您可以指定要用作第一个参数的 bundler 版本。

```
bundle _1.1.3_ ... 
```

如果问题是有一个使用 rails300 gem set 的旧项目，因此您无法更改该 gem set 中的版本，那么使用 rvm 为 ruby​​ 1.9 创建一个新的 gem set。但是，如果 ruby​​、gem 和 bundler 的版本不适合您，它们也不适用于旧项目，因此您可能需要修复此问题。

您可以通过以下方式冻结您的宝石（Rails 只是宝石或宝石的集合）

```
bundle package 
```

有关更多信息，请参阅[bundler 的文档。](http://gembundler.com/rationale.html)即使您在 rvm 中使用 gemset，您仍然需要打包您的包，因为即使在 rvm 中，gem 版本也是在启动时动态确定的。

# c - 使用 Linux 进行实时编程

> ID：10502508
> 
> 赞同：3
> 
> 时间：2012-05-08T16:24:50.520
> 
> 标签：c, linux, kernel, real-time, hard-real-time

我刚刚构建并设置了一个应用了 RT 补丁的 vanilla Linux 内核。一切顺利，我现在可以正确启动到新内核。

让我想知道的是：我有一个用 C 语言编写的模拟器程序，我希望它以硬实时模式执行，新内核应该允许这样做。可能整个模拟器不需要以实时优先级运行，但里面的一些任务需要。

我怎样才能做到这一点？我认为仅仅运行程序是行不通的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T16:35:42.450

如果您询问如何在实时上下文中运行一些线程，而其他线程则作为传统的分时线程运行，那么您只需要[使用`sched_setscheduler`](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html).

分时线程想成为`SCHED_OTHER`；实时模拟器线程希望是`SCHED_FIFO`或`SCHED_RR`。

在 Linux 上，为了以实时优先级运行，您的用户必须具有允许这样做的资源限制 ( [man 2 rlimit )。](http://linux.die.net/man/2/setrlimit)特别是，您的`rtprio`rlimit 必须设置为您需要的最高优先级。或者，您可以以 root 身份运行应用程序。在带有 PAM 的 linux 系统中，这通常是通过将适当的行添加到 `/etc/security/limits.conf`

```
    @realtime - rtprio 99
```

这将向*实时*组授予最高实时优先级 99 的 rtprio 限制。然后您添加一个实时组`/etc/groups`并确保您的用户在该组中。

（而且由于这似乎是您第一次这样做，您可能还希望有一个“死人开关”高优先级实时线程，以确保您的模拟器不会失控并渲染系统不可用...如果您正在模拟高 CPU 负载，您可能会获得实际的高 CPU 负载并且无法在不重新启动的情况下停止运行。）

# c# - C# DataTable 内连接与动态列

> ID：10502512
> 
> 赞同：7
> 
> 时间：2012-05-08T16:25:06.143
> 
> 标签：c#, join, ado.net, datatable, dataset

我正在尝试以与此问题类似的方式将两个 DataTables 连接在一起：

[C#中DataTables的内连接](https://stackoverflow.com/questions/665754/inner-join-of-datatables-in-c-sharp)

我试图让输出成为一个“组合”表，其中包含两个原始表中的列。它们都有一个共同的日期戳列。

给出的答案对于具有固定列的 DataTables 很好，但是如果它们是动态创建的，并且可以有任意数量的列，我该如何加入它们呢？

例如

```
T1 (datestamp, t1Column1, t1Column2, t1ColumnN...)
T2 (datestamp, t2Column1, t2Column2, t2ColumnN...) 
```

我想加入创建以下内容：

```
J1 (datestamp, t1Column1, t1Column2, t1ColumnN, ..., t2Column1, t2Column2, t2ColumnN...) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T11:54:50.390

我找到了一个不依赖于遍历列的解决方案。

它使用“合并”方法，我之前认为这两个表都需要相同的结构而将其忽略。

首先，您需要在两个数据表上创建一个主键：

```
// set primary key
T1.PrimaryKey = new DataColumn[] { T1.Columns["DateStamp"] };
T2.PrimaryKey = new DataColumn[] { T2.Columns["DateStamp"] }; 
```

然后将两个表添加到数据集中，以便添加关系：

```
// add both data-tables to data-set
DataSet dsContainer = new DataSet();
dsContainer.Tables.Add(T1);
dsContainer.Tables.Add(T2); 
```

接下来添加数据集中两个关键列之间的关系：

```
// add a relationship between the two timestamp columns
DataRelation relDateStamp = new DataRelation("Date", new DataColumn[] { T1.Columns["DateStamp"] }, new DataColumn[] { T2.Columns["DateStamp"] });
dsContainer.Relations.Add(relDateStamp); 
```

最后，您现在可以将第一个数据表复制到一个新的“组合”版本中，然后在第二个中合并：

```
// populate combined data
DataTable dtCombined = new DataTable();
dtCombined = T1.Copy();
dtCombined.Merge(T2, false, MissingSchemaAction.Add); 
```

注意：Merge 方法要求第二个参数为 false，否则它会复制结构而不是第二个表的数据。

然后，这将组合下表：

```
T1 (2012-05-09, 111, 222)
T2 (2012-05-09, 333, 444, 555) 
```

成基于主键的组合版本：

```
J1 (2012-05-09, 111, 222, 333, 444, 555) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:34:43.257

我认为您可以调整链接问题中的答案以使用[列的索引](http://msdn.microsoft.com/en-us/library/kwfe1t7z.aspx)，而不是列名。或者您可以只遍历每一行中的项目，如下所示：

```
foreach(DataRow row in table.Rows)
{
    foreach(DataColumn column in table.Columns)
    {
        object value = row[column]; // add this to your combined table
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T13:26:55.643

在厌倦了所有这些不能可靠地模拟 SQL 的内部连接函数之后，我决定在这里制作自己的：

```
private DataTable JoinDataTables(DataTable t1, DataTable t2, params Func<DataRow, DataRow, bool>[] joinOn)
{
    DataTable result = new DataTable();
    foreach (DataColumn col in t1.Columns)
    {
        if (result.Columns[col.ColumnName] == null)
            result.Columns.Add(col.ColumnName, col.DataType);
    }
    foreach (DataColumn col in t2.Columns)
    {
        if (result.Columns[col.ColumnName] == null)
            result.Columns.Add(col.ColumnName, col.DataType);
    }
    foreach (DataRow row1 in t1.Rows)
    {
        var joinRows = t2.AsEnumerable().Where(row2 =>
            {
                foreach (var parameter in joinOn)
                {
                    if (!parameter(row1, row2)) return false;
                }
                return true;
            });
        foreach (DataRow fromRow in joinRows)
        {
            DataRow insertRow = result.NewRow();
            foreach (DataColumn col1 in t1.Columns)
            {
                insertRow[col1.ColumnName] = row1[col1.ColumnName];
            }
            foreach (DataColumn col2 in t2.Columns)
            {
                insertRow[col2.ColumnName] = fromRow[col2.ColumnName];
            }
            result.Rows.Add(insertRow);
        }
    }
    return result;
} 
```

您可以如何使用它的一个示例：

```
var test = JoinDataTables(transactionInfo, transactionItems,
               (row1, row2) =>
               row1.Field<int>("TransactionID") == row2.Field<int>("TransactionID")); 
```

# c++ - 如何正确调用getopt函数

> ID：10502516
> 
> 赞同：3
> 
> 时间：2012-05-08T16:25:19.647
> 
> 标签：c++, argv, getopt

[从http://code.google.com/p/darungrim/source/browse/trunk/ExtLib/XGetopt.cpp?r=17](http://code.google.com/p/darungrim/source/browse/trunk/ExtLib/XGetopt.cpp?r=17)调用 int getopt 函数时出错

```
`check.cpp: In function ‘int main()’:` 
```

`check.cpp:14:55: error: invalid conversion from ‘const char**’ to ‘char* const*’ [-fpermissive]`

`/usr/include/getopt.h:152:12: error: initializing argument 2 of ‘int getopt(int, char* const*, const char*)’ [-fpermissive]`

```
#include <iostream>
#include <cstring>
#include <string>
#ifdef USE_UNISTD
#include <unistd.h>
#else
#include "XGetopt.h"
#endif
using namespace std;

int main() {

string text="-f  input.gmn -output.jpg";
int argc=text.length();
cout<<"argc: "<<argc<<endl;
char const * argv = text.c_str();
cout<<"argv: "<<argv<<endl;
int c = getopt (argc, &argv, "f:s:o:pw:h:z:t:d:a:b:?");
cout<<"c: "<<c<<endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T16:39:20.000

您在这里缺少两件事：

1.  参数列表不是字符串。它是一个字符串列表。不要被要求将参数列表作为单个字符串的 shell 或其他程序弄糊涂。在一天结束时，这些程序会将字符串拆分为参数数组并运行可执行文件（例如，请参见[execv](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)）。
2.  参数列表中总是有一个隐含的第一个参数，它是一个程序名称。

这是您的代码，已修复：

```
#include <string>
#include <iostream>
#include <unistd.h>

int main()
{
    const char *argv[] = { "ProgramNameHere",
                           "-f", "input.gmn", "-output.jpg" };
    int argc = sizeof(argv) / sizeof(argv[0]);
    std::cout << "argc: " << argc << std::endl;
    for (int i = 0; i < argc; ++i)
        std::cout << "argv: "<< argv[i] << std::endl;
    int c;

    while ((c = getopt(argc, (char **)argv, "f:s:o:pw:h:z:t:d:a:b:?")) != -1) {
        std::cout << "Option: " << (char)c;
        if (optarg)
            std::cout << ", argument: " << optarg;
        std::cout << '\n';
    }
} 
```

# c# - Silverlight 绑定未更新

> ID：10502517
> 
> 赞同：0
> 
> 时间：2012-05-08T16:25:22.227
> 
> 标签：c#, .net, wpf, silverlight, data-binding

我的装订有问题，让我很困惑。每当我第一次设置我的 Building 属性时，我的 Title`RasedText`对象的文本都会设置为我所期望的。但是，当我为 Building 属性设置新值时，Title 对象的文本字段仍然保持旧值。有什么想法为什么？

```
public static readonly DependencyProperty buildingProperty = DependencyProperty.Register
(
    "building",
    typeof(string),
    typeof(FloorPlan),
    new PropertyMetadata((d,e) => 
        {
            try
            {
                (d as FloorPlan).BuildingChanged();
            } catch {}
        }
));

public string Building
{
    get { return (string)GetValue(buildingProperty); }
    set { SetValue(buildingProperty, value); }
}

private void ChildWindow_Loaded(object sender, RoutedEventArgs e)
{
    //Code...

    Binding binding = new Binding();
    binding.Source = Building;
    binding.Mode = BindingMode.OneWay;
    Title.SetBinding(TextControls.RaisedText.TextProperty, binding);

    //Code...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:42:28.183

您不应将该属性设置`Building`为绑定的来源。`FloorPlan`相反，您可以将要绑定到的类的实例用作源（`this`此处），并指定[Path](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)属性：

```
Binding binding = new Binding(); 
binding.Source = this;
binding.Path = new PropertyPath("Building"); 
// no need for the following, since it is the default
// binding.Mode = BindingMode.OneWay; 
Title.SetBinding(TextControls.RaisedText.TextProperty, binding); 
```

这也仅在您遵守属性命名约定并`Building`使用以大写字符开头的适当名称声明时才有效：

```
public static readonly DependencyProperty buildingProperty =
    DependencyProperty.Register("Building", typeof(string), typeof(FloorPlan), ...); 
```

像这样声明它也是标准的，因为它是一个公共类成员：

```
public static readonly DependencyProperty BuildingProperty = ... 
```

# java - 从数据库转换为 java 变量时使用的命名约定

> ID：10502521
> 
> 赞同：4
> 
> 时间：2012-05-08T16:25:25.963
> 
> 标签：java, database, naming-conventions

我目前正在做一个项目，我将数据库信息转换为 java 对象，我很好奇我应该如何在 java 端表示/命名对象和变量。

例如，如果我将包含有关狗的信息的名为 Dog 的表（例如：Column：`BREED_C, NAME_C, OWNER_C, DOGID_D, HAS_RABIES_I`等）转换为具有相应变量的名为 Dog 的 java 对象，我是否应该遵循 java 命名约定，例如`BreedC`or 使用`Breed_C`，甚至是`BREED_C`这样两个系统之间差异不大？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:27:35.723

如果使用 Java，请使用 Java 命名约定。

听起来您的代码应该负责将数据库层从应用程序的其余部分抽象出来，因此没有理由通过使用与数据库列完全相同的名称命名 Java 变量来公开数据库表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:32:19.660

我猜 C、D 和 I 是列的类型，这在 Java 中不是必需的，因为您有字段和 getter/setter 的类型。

这开始说，尽可能使用Java lowerCamelCase 约定。

所有著名的 Java 数据库抽象项目 (JPA) 都采用这种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:37:24.697

*根据 Java 编程语言*的代码约定，表示类的名称

> 类名应该是名词，大小写混合，每个内部单词的第一个字母大写。尽量保持你的类名简单和描述性。使用完整的单词——避免使用首字母缩略词和缩写词（除非缩写词比长格式更广泛地使用，例如 URL 或 HTML）。

和变量的名称

> 除变量外，所有实例、类和类常量都是大小写混合，首字母小写。内部单词以大写字母开头。

您可以使用此方法将`database`名称转换为`Java`名称。

```
public static String toJavaFieldName(String name) { // "MY_COLUMN"
    String name0 = name.replace("_", " "); // to "MY COLUMN"
    name0 = WordUtils.capitalizeFully(name0); // to "My Column"
    name0 = name0.replace(" ", ""); // to "MyColumn"
    name0 = WordUtils.uncapitalize(name0); // to "myColumn"
    return name0;
}

public static String toJavaClassName(String name) { // "MY_TABLE"
    String name0 = name.replace("_", " "); // to "MY TABLE"
    name0 = WordUtils.capitalizeFully(name0); // to "My Table"
    name0 = name0.replace(" ", ""); // to "MyTable"
    return name0;
} 
```

这种方法使用[Apache Commons Lang](http://commons.apache.org/lang/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:29:44.003

更好的是使用Java约定，所以breedC应该是你的选择。如果您使用的是 JPA，`@Column(name="BREED_C")`则在breedC 字段上添加可以使加入这两个系统的技巧。

**编辑：**以您的案例为例：

```
@Table(name="DOG")
public class Dog {
    @Column(name="BREED_C")
    private String breedC;
} 
```

如果字段名称与列名称匹配，则不需要那些注释，但如果它们不同，则根据您的情况，您需要放置它们。但前提是您使用的是 JPA 之类的东西。

# vba - 将行复制到新工作表 VBA

> ID：10502524
> 
> 赞同：4
> 
> 时间：2012-05-08T16:25:44.903
> 
> 标签：vba, excel

我正在尝试编写一个脚本，如果工作表 1 的第一列的值大于或等于 10，则将工作表 1 中的一行复制到工作表 2。

```
Sub Macro1()

Cells(1, 1).Select
For i = 1 To ActiveCell.SpecialCells(xlLastCell).Row

    Cells(i, 1).Select

    If ActiveCell.Value >= 10 Then
        Rows(ActiveCell.Row).Select

        Rows(i & ":").Select
        Selection.Copy

        Sheets("Sheet2").Select
        ActiveSheet.Paste

        Sheets("Sheet1").Select

     End If

Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T06:59:49.187

这与第一个答案相似，但有一些不同。这里有一些注意事项：

*   使用 for-each 循环遍历一个范围（它不如使用变体数组快，但使事情变得简单并提供比 for 循环更好的速度。
*   您可能希望在值检查之前添加“If IsNumeric(cell)”检查。
*   不要使用 select - 你不需要，它会浪费资源。
*   最好使用 A 中使用的最后一个单元格，然后使用使用的范围。

这是代码：

```
Sub CopyRows()

Dim cell As Range
Dim lastRow As Long, i As Long

lastRow = Range("A" & Rows.Count).End(xlUp).Row
i = 1

For Each cell In Sheets(1).Range("A1:A" & lastRow)
    If cell.Value >= 10 Then
        cell.EntireRow.Copy Sheets(2).Cells(i, 1)
        i = i + 1
    End If
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:28:12.340

试试这个：这将是最快的，因为它不依赖于选择，而是通过 VBA 直接操作数据

```
Sub CopyRows()
    Dim r_src As Range, r_dst As Range

    ' Pick 1st row and column of table
    Set r_src = Sheets("Sheet1").Range("B4")
    Set r_dst = Sheets("Sheet2").Range("B4")

    Dim i As Integer, j As Integer
    Dim N_rows As Integer, N_cols As Integer

    'Find the size of the data
    N_rows = CountRows(r_src)
    N_cols = CountColumns(r_src)

    'Resize source range to entire table
    Set r_src = r_src.Resize(N_rows, N_cols)

    Dim src_vals() As Variant, dst_vals() As Variant
    'Get all the values from source
    src_vals = r_src.Value2

    ReDim dst_vals(1 To N_rows, 1 To N_cols)
    Dim k As Integer
    k = 0
    For i = 1 To N_rows
        ' Check first column
        If Val(src_vals(i, 1)) >= 10 Then
            ' Increment count
            k = k + 1
            ' Copy row values
            For j = 1 To N_cols
                dst_vals(k, j) = src_vals(i, j)
            Next j
        End If
    Next i
    ' Bring rows back into destination range
    If k > 0 Then
        r_dst.Resize(k, N_cols).Value2 = dst_vals
    End If
End Sub

Public Function CountRows(ByRef r As Range) As Integer
    CountRows = r.Worksheet.Range(r, r.End(xlDown)).Rows.Count
End Function
Public Function CountColumns(ByRef r As Range) As Integer
    CountColumns = r.Worksheet.Range(r.End(xlToRight), r).Columns.Count
End Function 
```

这是我运行的一个测试用例：

**前**

![表 1](../Images/8402e41f2640034f0d87550d85dcca52.png)

**后**

![表 2](../Images/082918776de6690fefa81d3bb3ae92cf.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:33:48.407

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim wsI As Worksheet, wsO As Worksheet
    Dim LastRow As Long, i As Long, j As Long

    Set wsI = Sheets("Sheet1")
    Set wsO = Sheets("Sheet2")

    LastRow = wsI.Range("A" & Rows.Count).End(xlUp).Row

    j = 1

    With wsI
        For i = 1 To LastRow
            If Val(Trim(.Range("A" & i).Value)) >= 10 Then
                wsI.Rows(i).Copy wsO.Rows(j)
                j = j + 1
            End If
        Next i
    End With
End Sub 
```

# php - 如何连接三个表并添加“AND”运算符？

> ID：10502528
> 
> 赞同：0
> 
> 时间：2012-05-08T16:25:59.023
> 
> 标签：php, join, distinct, multiple-tables

作为一个新秀，我对如何解决这个问题有点迷茫。我正在尝试加入三个表。这是表结构：

```
Accounts Table: 

1) id
2) User_id (Id given to user upon sign up)
3) Full_name 
4) Username
5) Email
6) Password

Contacts Table: 

1) My_id (This is the user who added friend_id)
2) Contact_id (this is the contact who was added by my_id)
3) Status (status of relationship)

Posts Table: 

1) Post_id
2) User_posting (this is the user who posted it)
3) Post_name
4) User_allowed (this is where its specified who can see it) 
```

这是我的代码结构：

```
<?php

$everybody = "everybody";
$sid = "user who is logged in.";

$sql = <<<SQL
SELECT DISTINCT contacts.contact_id, accounts.full_name, posts.post_id, posts.post_name
FROM contacts, accounts, posts
WHERE
    (contacts.my_id = '$sid'
      AND contacts.contact_id = accounts.user_id)
    OR (contacts.my_id = '$sid'
      AND contacts.contact_id = accounts.user_id)
    OR (posts.user_posting = '$sid'
      AND contacts.contact_id = accounts.user_id
      AND posts.user_allowed = '$everybody')
    OR (posts.user_id = '$sid'
    AND contacts.user_id = accounts.user_id
    AND posts.user_allowed = '$everybody')

LIMIT $startrow, 20;

$query = mysql_query($sql) or die ("Error: ".mysql_error());

$result = mysql_query($sql);

if ($result == "")
{
echo "";
}
echo "";

$rows = mysql_num_rows($result);

if($rows == 0)
{
print("");

}
elseif($rows > 0)
{
while($row = mysql_fetch_array($query))
{

$contactid = htmlspecialchars($row['contact_id']);
$name = htmlspecialchars($row['full_name']);
$postid = htmlspecialchars($row['post_id']);
$postname = htmlspecialchars($row['post_name']);

// If $dob is empty
if (empty($contactid)) {

$contactid = "You haven't added any friends yet.";
}

print("$contactid <br>$postname by $name <br />");
}

} 
```

问题是查询显示了我的帖子以及朋友的所有帖子。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:34:58.250

应该是这样的（未彻底检查）：

```
SELECT DISTINCT contacts.contact_id, 
                accounts.full_name,
                posts.post_id, 
                posts.post_name 
FROM contacts
INNER JOIN accounts ON accounts.id = contacts.id
INNER JOIN posts ON posts.User_posting = accounts.id /* (where'd get posts.user_id btw ) */
WHERE contacts.my_id = $sid
      AND posts.user_allowed = $everybody
LIMIT $startrow, 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:36:34.213

假设您只想显示您朋友的帖子（而不是您自己的帖子）：

```
$everybody = "everybody";
$sid = user who is logged in.  

$sql = "SELECT a.User_id, a.Full_name, p.Post_id, p.Post_name
FROM posts p
INNER JOIN accounts a ON a.User_id = p.User_posting
INNER JOIN contacts c ON c.My_id = '$sid' AND c.Contact_id = a.User_id
WHERE p.User_allowed = '$everybody'
LIMIT $startrow, 20"; 
```

编辑：解释查询。

1.  查询`SELECT`的某些字段用于输出
2.  `FROM`该`posts`表因为结果应该包含每个帖子的一行。
3.  该基表`JOIN`与`accounts`表编辑以获取发布用户的数据，并且
4.  额外添加`JOIN`了`contacts`表格，因此我们可以过滤以仅发布也是相关用户添加的朋友的用户。
5.  一个额外的过滤器位于允许的值上，并且
6.  出于分页目的，我们有一个由 定义的偏移量`$startrow`。

# html - 基本的移动开发设计

> ID：10502530
> 
> 赞同：0
> 
> 时间：2012-05-08T16:26:01.463
> 
> 标签：html, css, mobile, media-queries, responsive-design

我对手机/智能手机/iphone/iPad 的开发完全陌生，并且想知道我应该应用哪些设计原则。

完成一些研究后，我知道您可以设置 Meta Viewport 属性，或使用 CSS 媒体查询，或两者兼而有之。

我正在构建的网站是一个单页网站，需要完美的降级和响应式设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:27:54.013

我目前觉得最好的移动设计框架是 HTML5 Boilerplate [http://html5boilerplate.com/mobile](http://html5boilerplate.com/mobile)

HTML5 Mobile Boilerplate 从标准 HTML5 Boilerplate 降级得很好

还有一个更简单的 1140 网格系统，如果您对这里的样板文件不满意，它会降级；[http://cssgrid.net/](http://cssgrid.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:42:28.190

我认为响应式设计是使用 CSS 媒体查询的方式。有一些样板和框架可以帮助使这些变得更容易。Twitter 的 Bootstrap 和 Skeleton 框架是我喜欢的：

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

[http://getskeleton.com/](http://getskeleton.com/)

# json - 对 WCF 服务的 jQuery Ajax JSONP Post 调用大多得到 400 Bad Request

> ID：10502531
> 
> 赞同：2
> 
> 时间：2012-05-08T16:26:03.123
> 
> 标签：json, wcf, jquery, jsonp

嗯，这里有很多关于此的内容，但我似乎无法将 JSON 对象传递给 Web 服务对象。我能做的最接近这项工作的是这个例子，其中 ID 与服务中的字符串变量名称匹配，如下所示

```
 var jsonData = { "ID": "hello" };
        $.ajax({
            url: "http://blah/blah.svc/GetPersonByID",
            type: "POST",
            dataType: "jsonp",  // from the server
            contentType: "application/json; charset=utf-8", // to the server
            data: jsonData,
            success: function (msg) {
                alert("success " + msg.Name);
            },
            error: function (xhr, status, error) {
                alert(xhr.status + " " + status + " " + error);
            }
        }); 
```

WCF 服务在哪里

```
 [OperationContract]
    [Description("Returns a person by ID.")]
    [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json,
        ResponseFormat = WebMessageFormat.Json)]
    Person GetPersonByID(string ID);

    public Person GetPersonByID(string ID) {
        Person person = new Person {
            Name = ID,   // "Bob",
            FavoriteColor = "Red",
            UserID = 1 //int.Parse(ID)
        };
        return person;
    } 
```

这将返回“成功 ID=hello”。

为什么它返回 ID=hello，而不仅仅是 hello？

如果我使用 data: JSON.stringify({ "ID": "hello" }) 它会失败并出现 400 bad request

如果我尝试任何其他数据类型，例如 web 服务 ID 的 int（而不是字符串），如果失败。

如果我尝试任何更复杂的数据类型，它会失败。

有什么想法吗？？？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T21:24:09.883

默认情况下，WCF 操作预期的主体样式是“裸”，这意味着输入必须自己发送（即，它需要类似`"hello"`. 在您的情况下，您将其*包装*在具有参数名称 ( `{"ID":"hello"}`)的对象中.

您可以使操作期望包装的输入（通过将`BodyStyle`属性的`WebInvoke`属性设置为`WebMessageBodyStyle.WrappedRequest`（和 JSON.stringify 您的数据），或者更改传递给 $.ajax 的参数以简单地发送 JSON 字符串 ( `data: "\"hello\""`)。

# python - 傻瓜合并排序的解释

> ID：10502533
> 
> 赞同：25
> 
> 时间：2012-05-08T16:26:15.580
> 
> 标签：python, algorithm, sorting, mergesort

我在网上找到了这段代码：

```
def merge(left, right):
    result = []
    i ,j = 0, 0
    while i < len(left) and j < len(right):
        if left[i] <= right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    result += left[i:]
    result += right[j:]
    return result

def mergesort(list):
    if len(list) < 2:
        return list
    middle = len(list) / 2
    left = mergesort(list[:middle])
    right = mergesort(list[middle:])
    return merge(left, right) 
```

当我运行它时，它可以 100% 运行。我只是不明白合并排序是如何工作的，或者递归函数如何能够正确地对左右排序。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-08T17:15:15.593

我相信理解归并排序的关键是理解以下原则——我称之为归并原则：

> 给定两个从最小到最大排序的单独列表 A 和 B，通过反复比较 A 的最小值和 B 的最小值，删除较小的值，并将其附加到 C 上，构造一个列表 C。当一个列表用完时，追加将另一个列表中的剩余项目按顺序移到 C 上。列表 C 也是一个排序列表。

如果你手动解决这个问题几次，你会发现它是正确的。例如：

```
A = 1, 3
B = 2, 4
C = 
min(min(A), min(B)) = 1

A = 3
B = 2, 4
C = 1
min(min(A), min(B)) = 2

A = 3
B = 4
C = 1, 2
min(min(A), min(B)) = 3

A = 
B = 4
C = 1, 2, 3 
```

现在 A 已用尽，因此用 B 中的剩余值扩展 C：

```
C = 1, 2, 3, 4 
```

合并原理也很容易证明。A的最小值小于A的所有其他值，B的最小值小于B的所有其他值。如果A的最小值小于B的最小值，那么它也必须小于小于 B 的所有值。因此它小于 A 的所有值和 B 的所有值。

因此，只要您继续将满足这些条件的值附加到 C，您就会得到一个排序列表。这就是`merge`上面的函数所做的。

现在，根据这个原则，很容易理解一种排序技术，它通过将列表分成更小的列表、对这些列表进行排序、然后将这些排序的列表合并在一起来对列表进行排序。该`merge_sort`函数只是一个简单的函数，它将一个列表分成两半，对这两个列表进行排序，然后以上述方式将这两个列表合并在一起。

唯一的问题是，因为它是递归的，所以当它对两个子列表进行排序时，它通过将它们传递给自己来做到这一点！如果您在这里难以理解递归，我建议您先研究更简单的问题。但是，如果您已经掌握了递归的基础知识，那么您所要做的就是意识到单项列表已经排序。合并两个单项列表会生成一个已排序的两项列表；合并两个二项列表生成一个排序的四项列表；等等。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-08T17:10:48.783

当我偶然发现难以理解算法的工作原理时，我会添加调试输出来检查算法内部到底发生了什么。

这里是带有调试输出的代码。尝试理解递归调用的所有步骤`mergesort`以及`merge`输出的作用：

```
def merge(left, right):
    result = []
    i ,j = 0, 0
    while i < len(left) and j < len(right):
        print('left[i]: {} right[j]: {}'.format(left[i],right[j]))
        if left[i] <= right[j]:
            print('Appending {} to the result'.format(left[i]))           
            result.append(left[i])
            print('result now is {}'.format(result))
            i += 1
            print('i now is {}'.format(i))
        else:
            print('Appending {} to the result'.format(right[j]))
            result.append(right[j])
            print('result now is {}'.format(result))
            j += 1
            print('j now is {}'.format(j))
    print('One of the list is exhausted. Adding the rest of one of the lists.')
    result += left[i:]
    result += right[j:]
    print('result now is {}'.format(result))
    return result

def mergesort(L):
    print('---')
    print('mergesort on {}'.format(L))
    if len(L) < 2:
        print('length is 1: returning the list withouth changing')
        return L
    middle = len(L) / 2
    print('calling mergesort on {}'.format(L[:middle]))
    left = mergesort(L[:middle])
    print('calling mergesort on {}'.format(L[middle:]))
    right = mergesort(L[middle:])
    print('Merging left: {} and right: {}'.format(left,right))
    out = merge(left, right)
    print('exiting mergesort on {}'.format(L))
    print('#---')
    return out

mergesort([6,5,4,3,2,1]) 
```

输出：

```
---
mergesort on [6, 5, 4, 3, 2, 1]
calling mergesort on [6, 5, 4]
---
mergesort on [6, 5, 4]
calling mergesort on [6]
---
mergesort on [6]
length is 1: returning the list withouth changing
calling mergesort on [5, 4]
---
mergesort on [5, 4]
calling mergesort on [5]
---
mergesort on [5]
length is 1: returning the list withouth changing
calling mergesort on [4]
---
mergesort on [4]
length is 1: returning the list withouth changing
Merging left: [5] and right: [4]
left[i]: 5 right[j]: 4
Appending 4 to the result
result now is [4]
j now is 1
One of the list is exhausted. Adding the rest of one of the lists.
result now is [4, 5]
exiting mergesort on [5, 4]
#---
Merging left: [6] and right: [4, 5]
left[i]: 6 right[j]: 4
Appending 4 to the result
result now is [4]
j now is 1
left[i]: 6 right[j]: 5
Appending 5 to the result
result now is [4, 5]
j now is 2
One of the list is exhausted. Adding the rest of one of the lists.
result now is [4, 5, 6]
exiting mergesort on [6, 5, 4]
#---
calling mergesort on [3, 2, 1]
---
mergesort on [3, 2, 1]
calling mergesort on [3]
---
mergesort on [3]
length is 1: returning the list withouth changing
calling mergesort on [2, 1]
---
mergesort on [2, 1]
calling mergesort on [2]
---
mergesort on [2]
length is 1: returning the list withouth changing
calling mergesort on [1]
---
mergesort on [1]
length is 1: returning the list withouth changing
Merging left: [2] and right: [1]
left[i]: 2 right[j]: 1
Appending 1 to the result
result now is [1]
j now is 1
One of the list is exhausted. Adding the rest of one of the lists.
result now is [1, 2]
exiting mergesort on [2, 1]
#---
Merging left: [3] and right: [1, 2]
left[i]: 3 right[j]: 1
Appending 1 to the result
result now is [1]
j now is 1
left[i]: 3 right[j]: 2
Appending 2 to the result
result now is [1, 2]
j now is 2
One of the list is exhausted. Adding the rest of one of the lists.
result now is [1, 2, 3]
exiting mergesort on [3, 2, 1]
#---
Merging left: [4, 5, 6] and right: [1, 2, 3]
left[i]: 4 right[j]: 1
Appending 1 to the result
result now is [1]
j now is 1
left[i]: 4 right[j]: 2
Appending 2 to the result
result now is [1, 2]
j now is 2
left[i]: 4 right[j]: 3
Appending 3 to the result
result now is [1, 2, 3]
j now is 3
One of the list is exhausted. Adding the rest of one of the lists.
result now is [1, 2, 3, 4, 5, 6]
exiting mergesort on [6, 5, 4, 3, 2, 1]
#--- 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T16:31:50.157

有几种方法可以帮助自己理解这一点：

在调试器中单步执行代码并观察会发生什么。或者，在纸上一步一步（用一个非常小的例子）并观察会发生什么。

（我个人觉得在纸上做这种事情更有指导意义）

`list[:middle]`从概念上讲，它是这样工作的：输入列表通过减半（例如前半部分）不断被切成越来越小的部分。每一半都一次又一次地减半，直到它的长度小于 2。即，直到它什么都不是或单个元素。然后通过合并例程将这些单独的部分重新组合在一起，方法是将 2 个子列表附加或交错到`result`列表中，因此您得到一个排序列表。因为必须对 2 个子列表进行排序，所以追加/交错是一种快速 ( *O(n)* ) 操作。

这（在我看来）的关键不是合并例程，一旦您了解它的输入将始终被排序，这一点就很明显了。“技巧”（我使用引号，因为它不是技巧，它是计算机科学:-)）是为了保证合并的输入是排序的，你必须继续递归，直到你得到一个*必须*排序的列表，这就是为什么你一直递归调用`mergesort`直到列表长度小于 2 个元素。

当您第一次遇到递归和扩展合并排序时，它们可能并不明显。您可能想查阅一本好的算法书籍（例如， [DPV](http://www.cs.berkeley.edu/~vazirani/algorithms/all.pdf)可在线合法且免费地获得），但您可以通过逐步阅读您拥有的代码来获得很长的路要走。如果您真的想参与其中，Stanford/Coursera[算法课程](https://class.coursera.org/algo/)将很快再次运行，他详细介绍了合并排序。

如果你*真的*想理解它，请阅读那本书参考的第 2 章，然后扔掉上面的代码并从头开始重新编写。严重地。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-08T16:41:29.860

归并排序一直是我最喜欢的算法之一。

你从短的排序序列开始，并继续按顺序将它们合并成更大的排序序列。很简单。

递归部分意味着您正在向后工作 - 从整个序列开始并对两半进行排序。每一半也被拆分，直到序列中只有零或一个元素时排序变得微不足道。正如我在最初的描述中所说，随着递归函数返回排序序列变得更大。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-17T14:44:11.580

一张图值一千字，一部动画值一万字。

查看以下来自[Wikipedia](https://en.wikipedia.org/wiki/Merge_sort)的动画，该动画将帮助您可视化合并排序算法的实际工作原理。

[![合并排序](../Images/782cb94bfece7e8e63e79a4d61265584.png)](https://i.stack.imgur.com/6sKN0.gif)

详细的[动画，](https://www.hackerearth.com/practice/algorithms/sorting/merge-sort/visualize/)对好奇的排序过程中的每个步骤进行解释。

各种排序算法的另一个**[有趣的动画。](https://www.toptal.com/developers/sorting-algorithms/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T16:31:55.897

基本上你得到你的列表，然后你拆分它然后排序它，但是你递归地应用这个方法，所以你最终会再次拆分它，直到你有一个可以轻松排序的简单集合，然后合并所有简单的解决方案得到一个完全排序的数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-13T19:53:29.133

您可以在这里很好地了解合并排序的工作原理：

[http://www.ee.ryerson.ca/~courses/coe428/sorting/mergesort.html](http://www.ee.ryerson.ca/~courses/coe428/sorting/mergesort.html)

我希望它有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-13T21:34:10.237

正如[Wikipedia](https://en.wikipedia.org/wiki/Merge_sort)文章所解释的，有许多有价值的方法可以完成归并排序。完成合并的方式还取决于要合并的事物的集合，某些集合启用该集合可以使用的某些工具。

我不会用 Python 来回答这个问题，只是因为我不会写；但是，总体而言，参与“合并排序”算法似乎确实是问题的核心。帮助我的资源是 KITE 关于算法的相当过时的[网页](http://www.kitenagpur.com/level1/level2/mergeSort.html)（由教授编写），仅仅是因为内容的作者*消除了*上下文有意义的标识符。

我的答案来自这个资源。

请记住，合并排序算法的工作原理是将提供的集合分开，然后将每个单独的部分再次组合在一起，在重新构建集合时将这些部分相互比较。

这里是“代码”（查看最后的 Java“小提琴”）：

```
public class MergeSort {

/**
 * @param a     the array to divide
 * @param low   the low INDEX of the array
 * @param high  the high INDEX of the array
 */
public void divide (int[] a, int low, int high, String hilo) {

    /* The if statement, here, determines whether the array has at least two elements (more than one element). The
     * "low" and "high" variables are derived from the bounds of the array "a". So, at the first call, this if 
     * statement will evaluate to true; however, as we continue to divide the array and derive our bounds from the 
     * continually divided array, our bounds will become smaller until we can no longer divide our array (the array 
     * has one element). At this point, the "low" (beginning) and "high" (end) will be the same. And further calls 
     * to the method will immediately return. 
     * 
     * Upon return of control, the call stack is traversed, upward, and the subsequent calls to merge are made as each 
     * merge-eligible call to divide() resolves
     */
    if (low < high) {
        String source = hilo;
        // We now know that we can further divide our array into two equal parts, so we continue to prepare for the division 
        // of the array. REMEMBER, as we progress in the divide function, we are dealing with indexes (positions)

        /* Though the next statement is simple arithmetic, understanding the logic of the statement is integral. Remember, 
         * at this juncture, we know that the array has more than one element; therefore, we want to find the middle of the 
         * array so that we can continue to "divide and conquer" the remaining elements. When two elements are left, the
         * result of the evaluation will be "1". And the element in the first position [0] will be taken as one array and the
         * element at the remaining position [1] will be taken as another, separate array.
         */
        int middle = (low + high) / 2;

        divide(a, low, middle, "low");
        divide(a, middle + 1, high, "high");

        /* Remember, this is only called by those recursive iterations where the if statement evaluated to true. 
         * The call to merge() is only resolved after program control has been handed back to the calling method. 
         */
        merge(a, low, middle, high, source);
    }
}

public void merge (int a[], int low, int middle, int high, String source) {
// Merge, here, is not driven by tiny, "instantiated" sub-arrays. Rather, merge is driven by the indexes of the 
// values in the starting array, itself. Remember, we are organizing the array, itself, and are (obviously
// using the values contained within it. These indexes, as you will see, are all we need to complete the sort.  

    /* Using the respective indexes, we figure out how many elements are contained in each half. In this 
     * implementation, we will always have a half as the only way that merge can be called is if two
     * or more elements of the array are in question. We also create to "temporary" arrays for the 
     * storage of the larger array's elements so we can "play" with them and not propogate our 
     * changes until we are done. 
     */
    int first_half_element_no       = middle - low + 1;
    int second_half_element_no      = high - middle;
    int[] first_half                = new int[first_half_element_no];
    int[] second_half               = new int[second_half_element_no];

    // Here, we extract the elements. 
    for (int i = 0; i < first_half_element_no; i++) {  
        first_half[i] = a[low + i]; 
    }

    for (int i = 0; i < second_half_element_no; i++) {  
        second_half[i] = a[middle + i + 1]; // extract the elements from a
    }

    int current_first_half_index = 0;
    int current_second_half_index = 0;
    int k = low;

    while (current_first_half_index < first_half_element_no || current_second_half_index < second_half_element_no) {

        if (current_first_half_index >= first_half_element_no) {
            a[k++] = second_half[current_second_half_index++];
            continue;
        }

        if (current_second_half_index >= second_half_element_no) {
            a[k++] = first_half[current_first_half_index++];
            continue;
        }

        if (first_half[current_first_half_index] < second_half[current_second_half_index]) {
            a[k++] = first_half[current_first_half_index++];
        } else {
            a[k++] = second_half[current_second_half_index++];
        }
    }
} 
```

我也有一个版本，[here](http://goo.gl/RMmtjW)，它将打印出有用的信息，并提供对上面发生的事情的更直观的表示。如果有帮助，语法突出显示也更好。

# windows-phone-7 - 使用 WP7 相机阅读文字

> ID：10502534
> 
> 赞同：1
> 
> 时间：2012-05-08T16:26:15.950
> 
> 标签：windows-phone-7, text, camera

我需要将相机对准一些文本并用它找到的文本填充一些文本框。它在 wp7 的 bing 搜索中提供。我可以在我的应用程序中使用这样的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:45:14.350

新的 Mango WP SDK 有一个名为[Bing Vision](http://notanothercodeblog.blogspot.com/2012/01/bing-vision-api.html)的功能。这正是你想要的。不过，它从 WP 7.5 开始可用。

或者你可以试试[Project Hawaii SDK](http://research.microsoft.com/en-us/projects/hawaii/)，它也有 OCR 功能，并且从 WP 7.1 开始可用，但更多的是研究而不是稳定的 API。

# arrays - 使用powershell将csv中的特定值存储到变量中

> ID：10502537
> 
> 赞同：1
> 
> 时间：2012-05-08T16:26:21.977
> 
> 标签：arrays, powershell, csv

我有一个看起来像这样的 csv 文件

```
"NumberofNullAsOfDates"
"0" 
```

我想检查那里是否有 0 或任何其他值。这是我目前拥有的 powershell 代码，但似乎效果不佳。

```
$testNum = @()
$testNum += Import-Csv craneAudit.csv
$testNum[1] 
```

我怎样才能使这项工作使 $testNum 仅包含“0”（不带引号）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:24:32.613

您可以将值转换为 int：

```
$intValue = [int]$testNum[1] 
```

# iphone - Objective-C 类别和新的 iVar

> ID：10502539
> 
> 赞同：9
> 
> 时间：2012-05-08T16:26:29.793
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我尝试扩展 cocos2d 的 SimpleAudioEngine 的功能，使其能够像某种链条一样依次播放多个音效。我试图通过扩展来做到这一点。但是我现在意识到我可能还需要一个 iVar 来记住所有声音文件的名称，并需要一个 iVar 来记住当前正在播放的声音。

但是，我似乎无法在类别中添加 iVar。相反，我尝试使用扩展名，但似乎它们需要在类的原始 .m 文件中，这样也不起作用。还有另一种方法可以让我这样做吗？

带有类别的标题

```
#import <Foundation/Foundation.h>
@interface SimpleAudioEngine(SoundChainHelper)<CDLongAudioSourceDelegate>
-(void)playSoundChainWithFileNames:(NSString*) filename, ...;
@end 
```

以及带有扩展名的 .m 文件：

```
#import "SoundChainHelper.h"

@interface SimpleAudioEngine() {
    NSMutableArray* soundsInChain;
    int currentSound;
}
@end

@implementation SimpleAudioEngine(SoundChainHelper)

// read in all filenames and start off playing process
-(void)playSoundChainWithFileNames:(NSString*) filename, ... {
    soundsInChain = [[NSMutableArray alloc] initWithCapacity:5];

    va_list params;
    va_start(params,filename);

    while (filename) {
        [soundsInChain addObject:filename];
        filename = va_arg(params, NSString*);
    }
    va_end(params);
    currentSound = 0;
    [self cdAudioSourceDidFinishPlaying:nil];
}

// play first file, this will also always automatically be called as soon as the previous sound has finished playing
-(void)cdAudioSourceDidFinishPlaying:(CDLongAudioSource *)audioSource {
    if ([soundsInChain count] > currentSound) {
        CDLongAudioSource* mySound = [[CDAudioManager sharedManager] audioSourceForChannel:kASC_Right];
        [mySound load:[soundsInChain objectAtIndex:0]];
        mySound.delegate = self;
        [mySound play];
        currentSound++;
    }
}

@end 
```

或者，我尝试将 iVar 定义为将编译的属性。但是，我既不能合成它们，也没有任何其他可能将它们绑定到任何方法。

我尝试将功能实现为 SimpleAudioEngine 的一个类别，这样我只需要记住一个处理我所有声音问题的类。这样我就可以像这样简单地创建一个链：

```
[[SimpleAudioEngine sharedEngine] playSoundChainWithFileNames:@"6a_loose1D.mp3", @"6a_loose2D.mp3", @"6a_loose3D.mp3", @"6a_loose4D.mp3", @"6b_won1D.mp3", nil]; 
```

如果有另一种产生相同/相似结果的方法，我也将非常感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T16:37:07.787

您不能将实例变量（或合成的@properties）添加到类别是正确的。[您可以使用 Objective-C 运行时对关联引用](http://nathanmock.com/files/com.apple.adc.documentation.AppleiOS6.0.iOSLibrary.docset/Contents/Resources/Documents/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)的支持来解决此限制

像这样的东西：

在您的 .h 中：

```
@interface SimpleAudioEngine (SoundChainHelper)
    @property (nonatomic, retain) NSMutableArray *soundsInChain;
@end 
```

在您的 .m 中：

```
#import <objc/runtime.h>
static char soundsInChainKey;

@implementation SimpleAudioEngine (SoundChainHelper)

- (NSMutableArray *)soundsInChain
{
   return objc_getAssociatedObject(self, &soundsInChainKey);
}

- (void)setSoundsInChain:(NSMutableArray *)array
{
    objc_setAssociatedObject(self, &soundsInChainKey, array, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

@end 
```

（标准免责声明适用。我在浏览器中输入了这个，并没有测试它，但我以前使用过这种技术。）

我链接到的文档有更多关于关联引用如何工作的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-03T09:56:28.587

您不能添加 iVar，但可以添加属性变量。如下所示：

在您的 .h 中：

```
#import <objc/runtime.h>

@interface Chair (Liking)

     @property (nonatomic, assign)BOOL liked;
 @end 
```

**在您的 .m 中：**

```
#import "Chair+ChairCat.h"

@implementation Chair (Liking)

 -(BOOL)liked{

    return [ objc_getAssociatedObject( self, "_aliked" ) boolValue ] ;    
 }

-(void)setLiked:(BOOL)b{    
    objc_setAssociatedObject(self, "_aliked",  [ NSNumber numberWithBool:b ],OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;

 }

@end 
```

然后在其他类的某个地方说 myViewController.m

```
#import "Chair+ChairCat.h"
- (void)viewDidLoad {
    /////
    Chair *chair = [[Chair alloc] init];
    [chair setLiked:NO];
} 
```

# php - 没有从 $youtube_array 取回数组，而是给出 object(stdClass)#1

> ID：10502542
> 
> 赞同：0
> 
> 时间：2012-05-08T16:26:39.880
> 
> 标签：php, arrays, api

我正在尝试请求一个 youtube 数组，但 var 转储显示了一个以 object(stdClass)#1 开头的转储

```
<?php
$num = Rand(1,5);
switch ($num) {
case 1: header('Foo Fighters The Pretender'); $music= 'Foo Fighters The Pretender';
case 2: header('Arctic Monkeys Flourescent Adolescent'); $music= 'Arctic Monkeys Flourescent Adolescent';
case 3: header('The Strokes Under Cover of Darkness'); $music= 'under cover of darkness';
case 4: header('The White Stripes Seven Nation Army'); $music= 'the white stripes seven nation army';
case 5: header('Franz Ferdinand Michael'); $music= 'franz ferdinand michael';
}
$youtube_array = json_decode(file_get_contents("https://gdata.youtube.com/feeds/api/videos?alt=json&q=" . urlencode($music) , TRUE ));
var_dump($youtube_array);
echo "<h1>Your Song Is:</h1>";
echo $music;
echo "</p>";
echo "YouTube found this video about your Rock:";
echo "</p>";
$link = $youtube_array['feed']['entry'][0]['id']['$t'];
$link2 = substr($link, 42);
echo "<iframe width='960' height='720' src='http://www.youtube.com/embed/" . $link2 . "' frameborder='0' allowfullscreen></iframe>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:36:10.037

您在这一行中放错了右括号：

```
$youtube_array = json_decode(file_get_contents("-" . urlencode($music) , TRUE )); 
```

应该

```
$youtube_array = json_decode(file_get_contents("-" . urlencode($music)), TRUE ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:37:49.907

[json_decode](http://php.net/json_decode)有第二个参数 ([, bool $assoc = false ....)。如果将其保留为默认值，它将返回一个对象。如果它是真的，它会设置一个关联数组。

您的代码在 ' ' 中有 'true `file_get_contents($filename [, bool $use_include_path...`'

# wcf - MSSQL 2012 为 WCF 创建 CLR 触发器失败

> ID：10502543
> 
> 赞同：10
> 
> 时间：2012-05-08T16:26:40.143
> 
> 标签：wcf, triggers, clr, .net-assembly, sql-server-2012

我创建了使用 CLR 触发器连接到 WCF 服务器并通知它有关 DB 更改的系统。它在 SQL Server 2008 R2 上运行正常。现在我尝试在 SQL Server 2012 上迁移。要使用 WCF，我需要加载 SMDiagnostics.dll 程序集以及其他程序集。我检查了 db 中是否启用了 clr，并将 trustworthy 设置为“on”，我禁用了 WCF 调试，我检查了 SQL 服务器是否在本地系统帐户下运行，因此权限没有问题。现在我的问题是当我运行以下命令时

```
IF  NOT EXISTS (SELECT * FROM sys.assemblies asms WHERE asms.name = N'SMdiagnostics')
create assembly [SMdiagnostics]
from  'C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication        Foundation\SMdiagnostics.dll'
with permission_set = unsafe
go 
```

我收到以下错误

> 警告：Microsoft .NET Framework 程序集 'smdiagnostics，version=3.0.0.0，culture=neutral，publickeytoken=b77a5c561934e089，processorarchitecture=msil。' 您注册的内容未在 SQL Server 托管环境中进行全面测试，因此不受支持。将来，如果您升级或维修此程序集或 .NET Framework，您的 CLR 集成例程可能会停止工作。有关详细信息，请参阅 SQL Server 联机丛书。消息 6586，级别 16，状态 1，行 2 组件“SMdiagnostics”无法安装，因为现有策略将阻止使用它。

SMdiagnostics.dll 存在于指定路径。据我了解它在 SQL Server 2012 或 GAC 中的某种政策，但是我找不到任何关于 SMdiagnostics 的政策。任何想法如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T22:49:11.763

一个月前，我们就同一问题向 Microsoft 提交了一个问题。我的猜测是您无法加载 System.IdentityModel.dll，它是 System.ServiceModel 程序集的依赖项。Microsoft 已向我们表明，虽然这在 SQL 2005 和 SQL 2008 中有效，但它是 SQL 2012 中的一个已知错误，并且他们不会在 SQL 2014 之前修复它。

除了 2012 年还很新，这件事还没有广为人知，这让我有点意外。但这意味着您不能使用我所说的 Microsoft 在 SQL CLR (WCF) 中的最佳实践进程间通信技术，请注意 .NET 远程处理也将被淘汰，因为它也使用 ServiceModel 程序集。

我希望能更清楚地说明他们会说我们应该改用什么，我正在研究是否有办法编写基于 WSE 的 SQL CLR，但对前景并不十分兴奋。

我对此感到非常不满，并希望其他提高声音的人指出这是一个真正的问题，应该被认为是不可接受的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T17:10:19.303

内森·舍纳克。是的，[http://support.microsoft.com/kb/2742595](http://support.microsoft.com/kb/2742595)修复了 System.IdentityModel.dll 的问题，但使用 System.Data.Services.dll 我仍然收到错误：为程序集“System.Data.Services”创建组件失败，因为程序集“microsoft.visualbasic.activities.compiler”格式错误或不是纯 .NET 程序集。无法验证的 PE 标头/本机存根。谢谢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T13:20:51.443

SQL 2012 切换到框架版本 4.0.30319。因此，默认情况下，您将无法从旧框架加载程序集。

有关详细信息，请参阅[MSDN 线程](http://social.msdn.microsoft.com/Forums/pl/sqlnetfx/thread/d304924c-ab87-4a0c-915d-7159bfc3753b)。

不幸的是，也无法从框架版本 4 加载 System.ServiceModel 程序集，因为它依赖于不是纯 .NET 程序集的 Microsoft.VisualBasic.Activities.Compiler。

脚本：

```
CREATE ASSEMBLY [System.ServiceModel]
AUTHORIZATION [dbo]
FROM 'C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.ServiceModel.dll'
WITH PERMISSION_SET = UNSAFE; 
```

我总是收到以下错误：

```
Msg 6544, Level 16, State 1, Line 1
CREATE ASSEMBLY for assembly 'Microsoft.VisualBasic.Activities.Compiler' failed because assembly 'Microsoft.VisualBasic.Activities.Compiler' is malformed or not a pure .NET assembly. 
Unverifiable PE Header/native stub. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T21:41:38.300

.NET 团队最近发布的安全修补程序解决了 SQL Server 2012 中 .NET 框架 4.0 版本的 System.IdentityModel.dll 无法创建程序集的问题。

MS13-004：Windows XP、Windows Server 2003、Windows Vista、Windows Server 2008、Windows 7 和 Windows Server 2008 R2 上的 .NET Framework 4 安全更新说明：2013 年 1 月 8 日 [http://support.microsoft .com/kb/2742595](http://support.microsoft.com/kb/2742595)

我的测试表明，在 SQL Server 2012 中使用 System.IdentityModel.dll 的 .NET 4.5 程序集 CREATE ASSEMBLY 没有问题。

Nathan Schoenack SQL 支持技术主管

# objective-c - 如何使 UILabel backGroundColor seeThrough 使 UIView 颜色显示？

> ID：10502544
> 
> 赞同：0
> 
> 时间：2012-05-08T16:26:40.433
> 
> 标签：objective-c, cocoa-touch

我有一个带有背景颜色方案的 UIView。我在它上面有 UILabel。但是 UILabel backGroundColor 掩盖了 UIView backGroundColor。

我该如何防止这种情况。我可以让 UILabel 的 backGroundColor seeThrough 让其他颜色通过但仍然让 UILabel 文本显示吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:30:23.990

您要做的是将 UILabel 背景设置为透明。要实现这一点，请将`backgroundColor`属性设置为`[UIColor clearColor]`：

```
[myLabel setBackgroundColor:[UIColor clearColor]]; 
```

顺便说一句。opaque 就是你现在所拥有的，这意味着 UIView 颜色被标签覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:31:30.160

如果我理解正确，您必须像这样将 UILabel 的背景颜色设置为 clearcolor

```
yourLabel.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:53:53.427

您必须将背景颜色设置为 clearColor，以便您可以观察到与视图相同的透明度

```
 labelObject.backgroundColor = [UIColor clearColor]; 
```

# php - Apache/PHP/JS - 无法将文件权限从 0644 更改为 0777

> ID：10502551
> 
> 赞同：1
> 
> 时间：2012-05-08T16:27:09.200
> 
> 标签：php, javascript, apache, file-upload, file-permissions

我在我的网站上使用 blueimp 文件上传器（https://github.com/blueimp/jQuery-File-Upload）。

在我的本地机器 (WAMP) 上上传的文件可以很容易地被删除。

在我的在线服务器 (LAMP) 上，无法删除文件 - 返回 403 禁止。并且所有文件的权限都设置为 0644。

我尝试通过 FileZilla 手动更改这些（得到 550 cannot change perms 错误）。我还尝试通过 cPanel 文件管理器来实现（只是没有发生更改）。

有谁知道为什么会这样？可以在上传开始之前使用 PHP/JS 设置所需的权限吗？

为什么我不能更改我拥有的文件的权限？我拥有服务器和文件。

如果问题的表述不理想，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:39:37.613

使用基于本地 (Windows) 的服务器 - 您是管理员 - 您可以删除任何文件。

在 Linux 服务器上，它们作为网络服务器的所有者上传（可能类似于“www-data”）——但您没有该权限。从 PHP 脚本设置权限是可行的，因为它们以与上传文件相同的用户身份运行。

# javascript - 是否可以在一个 html 文件中包含多个 require.js 项目？

> ID：10502553
> 
> 赞同：6
> 
> 时间：2012-05-08T16:27:14.327
> 
> 标签：javascript, requirejs

我想做这样的事情：

```
<script data-main="/js/D4/build/mainD4" src="/js/D4/build/require.js"></script>
<script data-main="/js/main" src="/js/require.js"></script> 
```

我可以只构建第一个文件，然后将构建 js 文件包含在 /js/main 中，但是能够在两个项目上并排进行开发而不必一直构建会快得多。现在当我尝试这个时，mainD4 构建，然后 js/main 文件没有任何反应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:29:28.350

刚刚在这里找到了答案： [https ://groups.google.com/forum/?fromgroups#!topic/requirejs/YWFdgYSU2f4](https://groups.google.com/forum/?fromgroups#!topic/requirejs/YWFdgYSU2f4)

```
<script src="scripts/require.js" data-main="scripts/main"></script>
<script>
require(['scripts/another/main']);
</script> 
```

或者

```
<script src="scripts/require.js" data-main="scripts/main"></script>
<script>
(function(){
  var req = require.config({baseUrl:'scripts/another'});
  req(['main']);
}());
</script> 
```

# c# - 返回 int 时 Pinvoke，API

> ID：10502555
> 
> 赞同：0
> 
> 时间：2012-05-08T16:27:29.660
> 
> 标签：c#, c++, api, pinvoke

我目前遇到了从 C# windows 应用程序调用 Win32 DLL[Native] 的问题。

我已经来了这么远。

C++ 源代码：

```
extern "C" __declspec(dllexport) int PlaceSound(__in DWORD frequence, __in DWORD duration)
{
    Beep(frequence, duration);
    return 0;
} 
```

C#源代码：

```
[DllImport("SampleLib.dll")]
    public extern static int PlaceSound(int Freq, int Dura);

 public form1 { InitializeComponements; PlaceSound(150, 500); } 
```

在调试时，我收到了声音，但是，当库返回它的整数值时，我似乎得到了一个 pinvoke。

Pinvoke：
对 PInvoke 函数 'SoundTracer!SoundTracer.Form1::PlaceSound' 的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T16:29:11.650

C++ 编译器的默认调用约定是`cdecl`，但 p/invoke 的默认调用约定是`stdcall`. 这种不匹配是您看到消息的原因。

此外，要 100% 正确，`DWORD`它是一个无符号整数，应该与`uint`.

所以你需要像这样导入它：

```
[DllImport("SampleLib.dll", CallingConvention=CallingConvention.Cdecl)]
public extern static int PlaceSound(uint Freq, uint Dura); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T16:31:45.963

好吧，PInovke 通常默认为 __stdcall/WINAPI/CALLBACK/PASCAL 调用约定。修改 C++ 源代码，使函数为 WINAPI，或者可能有办法修改您的 PInvoke 声明的函数以使用 cdecl 调用方法。为了方便，我总是使用 WINAPI。

```
extern "C" __declspec(dllexport) int WINAPI PlaceSound(__in DWORD frequence, __in DWORD duration)
{
    Beep(frequence, duration);
    return 0;
} 
```

# javascript - jQuery mobile 在页面之间检索数据

> ID：10502558
> 
> 赞同：0
> 
> 时间：2012-05-08T16:27:46.280
> 
> 标签：javascript, jquery, jquery-mobile

我在 phonegap 应用程序中使用 jquery mobile，我试图将一个变量从一个文本框传递到下一页，以对变量进行 xml 遍历。

我的页面有这个 javascript 来发送变量，但我不知道如何在下一页检索它。

```
<script type="text/javascript">
    $("#s-sur").live('pageinit', function() {

            $("#search").click(function() { 
                 $.mobile.changePage( "ssname.html", {
                type: "post",
                data: $("#search").serialize()
                                                        });
            });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:23:41.357

该`ssname.html`文件必须由服务器端语言解析以获取 POST 变量。但是，您可以从 JavaScript 访问 GET 变量：

```
$("#s-sur").live('pageinit', function() {
    $("#search").click(function() { 
        $.mobile.changePage( "ssname.html", {
            type : "get",
            data : $("#search").serialize()
        });
    });
}); 
```

然后对于`ssname.html`页面：

```
$("#ssname").live('pageinit', function() {
    //now you can get your variables from the URL: location.search
}); 
```

您也可以只使用全局变量来保存页面之间的信息：

```
$("#s-sur").live('pageinit', function() {
    $("#search").click(function() {
        window.myCustomVariable = $("#search").serialize();
        $.mobile.changePage("ssname.html");
    });
}); 
```

然后在`ssname.html`页面上，您只需读取`window.myCustomVariable`变量即可完成工作。这是可行的，因为页面将出现在同一个 DOM 中，因此`window.myCustomVariable`两个页面都存在该变量。

# iphone - iPhone SDK - NSDateFormatter - 来自字符串的 NSDate 总是返回 nil

> ID：10502559
> 
> 赞同：0
> 
> 时间：2012-05-08T16:27:47.557
> 
> 标签：iphone, objective-c

所以这听起来应该很简单，但对我来说，这个代码块返回一个`nil`日期：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
NSDate *newStartDate = [df dateFromString:@"2012-05-11 20:45:00"]; 
```

有谁知道可能导致`newStartDate`返回的原因是`nil`什么？`df`是有效的，格式字符串似乎是有效的。我完全被困在这里，所以任何建议都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T16:33:04.127

更改`hh`为`HH`. `hh`适用于 1-12，上午/下午`HH`适用于 0-23。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-08T16:34:26.350

你应该使用一个有效的日期

如果你采取类似的东西会更好

`NSDate *d = [NSDate date];`

或者应该是 2012-05-11 20:45:00 +0000

您当前的静态日期缺少时区

# windows-phone-7 - 带有 HTTPS 的 MediaPlayerLauncher

> ID：10502568
> 
> 赞同：0
> 
> 时间：2012-05-08T16:28:13.840
> 
> 标签：windows-phone-7

我想从 HTTPS 资源打开音频文件。

首先，我尝试`MediaPlayerLauncher`像这样使用：

```
MediaPlayerLauncher mediaPlayerLauncher = new MediaPlayerLauncher {
    Media = filename,
    Controls = MediaPlaybackControls.Pause,
    Orientation = MediaPlayerOrientation.Portrait,
    Location = MediaLocationType.None
};
mediaPlayerLauncher.Show(); 
```

`filename`在这种情况下是一个以 . 开头的 URL `https://`。

使用 Fiddler 监控流量，我注意到`https://`in`filename`正在更改为`http://`.

接下来我尝试使用以下方法打开相同的 URL `WebBrowserTask`：

```
WebBrowserTask webBrowser = new WebBrowserTask {
    Uri = filename
};
webBrowser.Show(); 
```

再次检查 Fiddler，我注意到正在发送两个请求。首先是`filename`浏览器的请求。这会导致“点击打开文件”消息出现在浏览器中。点击它会打开手机的媒体播放器（`MediaPlayerLauncher`？），它会发送另一个请求——在这种情况下，再次`https://`更改为`http://`（这与第一次尝试的结果相似）。

我从中获取文件的服务器仅支持 HTTPS，因此当媒体播放器将文件请求为 HTTP 时会出现问题。

是否有从 HTTPS 资源流式传输文件？Windows Phone 的媒体播放器是否支持它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:04:48.793

在 Internet 上为 MediaLuncher 指点位置是个坏主意。它会冻结 UI 线程，并且您的应用程序不会响应。尝试首先将音频下载为流，然后播放。使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)打开一个流。[HTTPS](https://stackoverflow.com/questions/3457894/retrieve-xml-from-https-using-webclient-httpwebrequest-wp7)可以在 WP7 中打开，所以这应该不是问题。

# sharepoint-2010 - 更新列表项的工作流程

> ID：10502571
> 
> 赞同：0
> 
> 时间：2012-05-08T16:28:33.320
> 
> 标签：sharepoint-2010, sharepoint-workflow, listitem

我在名为“集群分配”的列表中有一个名为“集群”的列。“Cluster”列/字段的类型为“choice”，选项包括：

集群 1 集群 2 集群 3

我有另一个名为“用户”的列/字段，类型为“人员/组”。添加新列表项时，可以将特定用户分配到特定集群，例如

乔博客：集群 1 汤姆哈里斯：集群 2 吉尔主要：集群 3

是否可以有一个工作流来检测“集群”值的变化，以便在集群值更改/更新时没有用户具有相同的集群值？

目前，如果我将 Joe Blogs 的 Cluster 值更改为“Cluster3”，Jill Main 的 Cluster 值将保持为“Cluster3”，因此我必须手动将 Jill Main 的 Cluster 值更改为“Cluster1”

所以我想知道是否可以使用工作流来自动化上述更新过程......

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:27:01.293

您应该能够通过简单的工作流程实现您描述的结果，但是，我想在这种情况下，对您描述的列表使用事件接收器会更合适。

在事件接收器中，您可以覆盖将在每次更新列表中的任何项目时调用的适当方法。

只需右键单击 Visual Studio 中的列表实例，选择*添加*并选择*事件接收器*对象类型。这应该创建适当的类并自动将其绑定到您选择的列表的实例。然后重写方法来处理***集群***`ItemUpdated()`列的验证和更改为适当的值。更新的元素在方法参数的字段中可用。*`ListItem``SPItemEventProperties`*

 *包含一些您可能会发现有用的事件接收器信息的链接：

*   [http://msdn.microsoft.com/en-us/library/ms437502.aspx](http://msdn.microsoft.com/en-us/library/ms437502.aspx)
*   [http://msdn.microsoft.com/en-us/library/ff728093.aspx](http://msdn.microsoft.com/en-us/library/ff728093.aspx)
*   [http://www.dotnetcurry.com/ShowArticle.aspx?ID=649](http://www.dotnetcurry.com/ShowArticle.aspx?ID=649)
*   [Sharepoint 2010 事件接收器项目在另一个列表中添加和更新](https://stackoverflow.com/questions/9825963/sharepoint-2010-event-receiver-item-adding-and-updating-in-another-list)*

# gcc - “/usr/bin/ld: 找不到库”

> ID：10502576
> 
> 赞同：11
> 
> 时间：2012-05-08T16:28:54.770
> 
> 标签：gcc, linker, fortran, ld, gfortran

这是我第一次尝试使用 makefile 编译 FORTRAN 代码。操作系统是 Ubuntu 12.04 LTS 64 位。我遇到了以下错误：

```
gfortran  -o przm3123.exe canopy.o chem.o cnfuns.o cropdate.o datemod.o debug.o debug_cn.o f2kcli.o floatcmp.o furrow.o general.o i_errchk.o infnan.o inivar.o ioluns.o iosubs.o lambertw.o m_readvars.o utils.o wind.o fcscnc.o przm3.o rsexec.o rsinp1.o rsinp2.o rsinp3.o rsmcar.o rsmisc.o rsprz1.o rsprz2.o rsprz3.o rsprzn.o rsutil.o rsvado.o -L ../libanne4.0/lib -lwdm -ladwdm -lutil
/usr/bin/ld: cannot find -lwdm
/usr/bin/ld: cannot find -ladwdm
collect2: ld returned 1 exit status
make: *** [przm3123.exe] Error 1 
```

makefile 中的关键元素是：

```
przm2_LIBS = -L ../libanne4.0/lib -lwdm -ladwdm -lutil 
```

我能做些什么来解决这个错误吗？我应该尝试其他编译器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T16:45:42.043

作为`../libanne4.0/lib`相对路径，您可以尝试将其更改为绝对路径。

您还可以检查链接器进程是否有权访问和读取库。

* * *

更新：要让链接器找到使用选项指定的库，库`-l<name>`的名称应该是`lib<name>.[a|so]`，参数`-L`应该指向库所在的路径。

`-L`需要先于它的`-l`选项。

可以指定`-l`和/或`-L`多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T21:42:19.543

名称“adwdmlib.a”有问题。链接标志“-l adwdm”将告诉编译器期望一个名为“libadwdm.a”的lib文件，而不是“adwdmlib.a”。这有帮助或相关吗？如果您的库名称是“adwdmlib.a”，这可能就是您的链接器找不到它的原因。

# android - 在 Android 中自动调整文本大小

> ID：10502578
> 
> 赞同：2
> 
> 时间：2012-05-08T16:28:58.083
> 
> 标签：android, android-layout, android-view, android-4.0-ice-cream-sandwich

在 iOS 中，有一个 UIView 能够根据父 View 给出的约束来调整自身大小的概念。例如，如果父 View 自己放大，那么子 View 可能会扩大或缩小以适应可用空间。这是内置在平台中的，使开发变得微不足道。

所以，我的问题是我正在开发一个使用 ICS 中的 ActionBar 的智能手机应用程序。我在那里有一个自定义视图，我使用以下方法设置：

```
actionBar.setCustomView(R.layout.my_custom_title); 
```

请注意，我只是从 xml 中扩充视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
<TextView
    android:id="@+id/title"
    style="@style/TextAppearance.Title.Theme"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="Title" />
<TextView
    android:id="@+id/subtitle"
    style="@style/TextAppearance.SubTitle.Theme"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="Subtitle" />
</LinearLayout> 
```

现在，在 ICS 中，ActionBar 在方向更改期间会更改其高度。横向模式比纵向模式更窄。这导致我的“字幕”文本在横向模式下被截断，因为 ActionBar 的高度已经缩小，而我的自定义标题视图文本本身没有调整大小。

是否可以在不以编程方式更改方向的情况下调整文本大小？

我过头了

```
onConfigurationChanged() 
```

所以我不能只拥有一个单独的横向和纵向自定义标题视图。

旁注：这提醒了我......我希望在 onConfigurationChanged() 中我们可以提供一个新的 xml 布局，基本上只是调整屏幕上视图的位置。纵向和 xml 布局当然必须包含相同的视图，但是会有不同的布局信息。这将使生活更轻松，并且比再次调用 onCreate() 更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:39:24.107

您的 TextView 已更改其大小，但文本大小未更改。没有额外的努力就无法更改文本大小，但您有不同的选择：

1.  您为纵向和横向模式定义不同的文本大小值，并且不要覆盖 onConfigurationChanged。这可以通过创建两个维度.xml 来完成。一个在 res/values-land 中，另一个在 res/values-port 中

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <resources>
>     <dimen name="font_size">16dp</dimen>
> </resources> 
> ```

并在您的布局中将该值分配给您的 TextView

```
<TextView 
    android:textSize="@dimen/font_size" 
```

2.  第二种选择是以编程方式计算字体大小。这已经包含在另一个[问题中](https://stackoverflow.com/questions/2617266/how-to-adjust-text-font-size-to-fit-textview)

# c - 用于稀疏、惰性、不可变数组的线程安全缓存

> ID：10502580
> 
> 赞同：0
> 
> 时间：2012-05-08T16:29:05.113
> 
> 标签：c, caching, immutability, glib, sparse-array

我有一个应用程序，它涉及一个数组集合，这些数组可能非常大（索引达到 an 的最大值`int`），但它们是*惰性*的 - 它们的内容是动态计算的，在请求之前实际上并不知道。数组也是*不可变*的——每个数组的每个元素的值在程序的整个生命周期中都是恒定的。从某种意义上说，数组是*稀疏*的，因为通常只请求所有数组元素的一小部分（数组不包含大的零块，并且在这个意义上不是“稀疏”的。）

查找（并可能在此过程中计算）数组元素可能很昂贵，因此我想添加一个缓存层。缓存应实现以下接口：

```
void point_cache_store (gpointer data, gsize idx, gdouble value);
gdouble point_cache_fetch (gpointer data, gsize idx); 
```

where`data`作为每个数组的唯一句柄（可以有很多）。 `point_cache_fetch()`应该返回`value`传递给的参数`point_cache_store()`和`data`参数`idx`，或者通过返回特殊值来指示缓存未命中`DATUM_UNKNOWN_VALUE`（调用者永远不会`point_cache_store`用调用`DATUM_UNKNOWN_VALUE`）。

问题是：**我怎样才能实现`point_cache_fetch()`和`point_cache_store()`**？（它们目前是无操作存根。）

需要考虑的要点：

*   缓存实现必须是线程安全的。几个线程同时运行，其中任何一个都可以调用`point_cache_store()`或`point_cache_fetch()`使用任何`data`或`idx`参数。
*   缓存确实是缓存；`point_cache_fetch()`return总是可以的`DATUM_UNKNOWN_VALUE`，即使它曾经知道那个值。在这种情况下，调用者将只执行普通查找。
*   请记住，数组是不可变的——对于给定的参数`data`和`idx`参数，调用者将始终提供相同的`value`参数。

我意识到有很多方法可以做到这一点，并且需要权衡取舍。不过，对于这个问题，我将通过一个非常具体的标准来评估答案：它们是否会提高启发该问题的应用程序中某个特定基准的性能。如果您想加倍努力并自己运行基准测试，请执行以下操作：

```
git clone git://github.com/gbenison/starparse
git clone git://github.com/gbenison/burrow-owl.git -b point-cache-base 
```

函数`point_cache_fetch()`和`point_cache_store()`位于“burrow/spectrum/point_cache.c”中。相关的基准是“benchmarks/b_cache”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:53:56.200

“非常大的稀疏惰性数组”？听起来你需要一个[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

从您的`point_cache_fetch`函数原型和整个问题中，我对您的缓存值是双精度数组还是不可变数组感到困惑。

我不打算提供一个实现，因为这不是一个“编码挑战”网站。您应该尝试查找和重用现有的线程安全哈希表库，并根据您的特定需求比较它们的性能。

# c - Radix Sort. Why Xor?

> ID：10502593
> 
> 赞同：2
> 
> 时间：2012-05-08T16:29:55.737
> 
> 标签：c, radix-sort

I was studying the radix sort algorithm but I could not understand some of the original source code.

```
static void rad_sort_u(unsigned *from, unsigned *to, unsigned bit)
{
    if (!bit || to < from + 1) return;

    unsigned *ll = from, *rr = to - 1,tmp;
    while (1) {
        /* find left most with bit, and right most without bit, swap */
        while (ll < rr && !(*ll & bit)) ll++;
        while (ll < rr &&  (*rr & bit)) rr--;
        if (ll >= rr) break;
        swap(*ll, *rr);
    }

    if (!(bit & *ll) && ll < to) ll++;
    bit >>= 1;

    rad_sort_u(from, ll, bit);
    rad_sort_u(ll, to, bit);
}

/* sort signed ints: flip highest bit, sort as unsigned, flip back */
static void radix_sort(int *a, const size_t len)
{
    size_t i;
    unsigned *x = (unsigned*) a;

    for (i = 0; i < len; i++) 
            x[i] ^= INT_MIN;

    rad_sort_u(x, x + len, INT_MIN);

    for (i = 0; i < len; i++) 
            x[i] ^= INT_MIN;
} 
```

I don't know why its using this line `for (i = 0; i < len; i++) x[i] ^= INT_MIN;`

I know its xor but I don't understand the use of this operator in this context.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:47:56.307

It is toggling the MSB (most significant bit).

INT_MIN is different depending on the compiler and system in use, to my understanding, but it will generally be something like 0x80000000 in hex, which would evaluate to something like 10000...0 in binary.

If you XOR any bit with one, you toggle it:

```
eg: if y = A xor B

y | A B
==+====
0   0 0
1   0 1
1   1 0
0   1 1

y | A 1
==+====
1   0 1
0   1 1

Therefore
A xor 1 = !A 
```

So, when that line is executed, the highest bit of x[i] is being toggled. If it was zero, it is now one. If it was one, it is now zero.

In short: XOR any value, X, with `0`, you get the original value, X. XOR any value X, with 1, you get the complement of X, !X.

```
 Y | X A
===+====
 X   X 0
!X   X 1 
```

# iphone - Objective-C 类别和属性

> ID：10502595
> 
> 赞同：0
> 
> 时间：2012-05-08T16:30:03.503
> 
> 标签：iphone, objective-c, ios5

在 Objective-C 中，我可以创建类别来扩展类。我也可以为它们添加属性，因为它们基本上只是方法。但是我不能用@synthesize 或我知道的任何其他方式绑定它们。因此，每当我尝试使用它们时，应用程序都会崩溃。

类别中是否有任何使用属性，或者它们是否只是可能的，因为它会破坏语言的逻辑来禁止它们。你能给我一个场景，在一个类别中定义一个属性是有意义的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:39:59.657

在类别中定义属性的主要用途是创建类扩展，在创建类扩展时，我们可以在类别的帮助下定义属性并合成它们。这是实现隐藏属性以供公共访问的方式。

您可以查看更多信息 - [http://www.techpaa.com/2012/04/adding-properties-to-categories-and.html](http://www.techpaa.com/2012/04/adding-properties-to-categories-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:39:01.590

来自[Objective-C 编程语言](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)指南

> 类别允许您将方法添加到现有类——甚至是您没有源代码的类。类别是一个强大的功能，它允许您扩展现有类的功能而无需子类化。

既然你想

> 向它们添加属性，因为它们基本上只是方法

您可以使用类别向类添加方法。

# android - 如何引用本地图像

> ID：10502597
> 
> 赞同：0
> 
> 时间：2012-05-08T16:30:15.900
> 
> 标签：android, android-arrayadapter

我正在使用 LazyList 代码加载我的外部图像，没有问题。我创建了一个不需要连接的应用程序的“虚拟”版本，因此我将所有文件都放在本地。如何调整此代码以获取存储在我的可绘制文件夹中的本地图像而不是 http url？

```
imageLoader.DisplayImage(urls[position], mContext, vidImg_iv);

public void DisplayImage(String url, Context context, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null) {
            imageView.setImageBitmap(bitmap);
        } else {
            queuePhoto(url, context, imageView);
            imageView.setImageResource(stub_id);
        }    
    } 
```

如果我不使用下面的 ImageLoader 类，我的内存就会用完：

```
if (urls[position].contains("1612802193_1625181163001_20120507051900-national")) {
                vidImg_iv.setImageResource(R.drawable.national_still);
            }
            else if (urls[position].toString().contains("1612802193_1625188510001_20120507050000-sports")) {
                vidImg_iv.setImageResource(R.drawable.sports_still);
            }
            else if (urls[position].toString().contains("1612802193_1625189005001_20120507050000-national-sp")) {
                vidImg_iv.setImageResource(R.drawable.national_spanish_still);
            }
            else if (urls[position].contains("1612802193_1625255029001_20120507080000-snap")) {
                vidImg_iv.setImageResource(R.drawable.snap_still);
            }
            else if (urls[position].contains("1612802193_1625256948001_20120507075800-breaking")) {
                vidImg_iv.setImageResource(R.drawable.breaking_still);
            }
            else if (urls[position].contains("1612802193_1625308288001_20120507080800-vbmarguh")) {
                vidImg_iv.setImageResource(R.drawable.vbmarguh_still);
            }
            else if (urls[position].contains("1612802193_1625308309001_20120507083200-extreme")) {
                vidImg_iv.setImageResource(R.drawable.extreme_still);
            }
            else if (urls[position].contains("1612802193_1625188512001_20120507050000-sports")) {
                vidImg_iv.setImageResource(R.drawable.sports_still);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:00:38.837

```
//Load a bitmap from local resources
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.some_image);
imageView.setImageBitmap(bitmap);

//Load an image from the assets folder
AssetManager assetManager = context.getAssets();
BufferedInputStream buf = new BufferedInputStream(assetManager.open("filename"));
Bitmap bitmap = BitmapFactory.decodeStream(buf);
buf.close();
imageView.setImageBitmap(bitmap); 
```

# java - 在 Java SSL jvmArgs 上

> ID：10502601
> 
> 赞同：0
> 
> 时间：2012-05-08T16:30:29.753
> 
> 标签：java, ssl

目前我包括

```
jvmArg=-Djavax.net.ssl.keyStore=/cfg/secret
jvmArg=-Djavax.net.ssl.keyStorePassword=123456 a.b.c.Proxy 
```

密码不以明文形式存储的替代表示法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:47:27.100

您必须手动构建并通过以编程`X509KeyManager`方式加载来初始化它。[`KeyStore`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html)加载密钥库时，您调用它的`load(...)`方法，该方法将接受密码（如果需要，您可以使用回调）。

如果您希望您的应用程序在无人值守的情况下运行，您的密码最多会被混淆，而不是高度加密（因为您的应用程序需要能够在需要时解密它而无需进一步的密码）。值得付出努力，但并非总是如此（因为攻击者可能只是能够获得该混淆版本并轻松对其进行去混淆）。

（JVM args 的问题之一是它们可能在进程参数列表中可见，具体取决于您的环境。在应用程序启动时设置系统属性在某些情况下可能会有所帮助。）

# php - preg_replace()，没有找到结束分隔符 '$'

> ID：10502606
> 
> 赞同：2
> 
> 时间：2012-05-08T16:30:43.343
> 
> 标签：php, windows, apache, preg-replace

好吧，这个问题似乎超出了我的想象！

我有这个代码：

```
$request=preg_replace('$(^'.str_replace('$','\$',$webRoot).')$i','',$requestUri); 
```

这给我一个错误：

**preg_replace(): 没有找到结束分隔符 '$'**

但事情是这样的，结束分隔符肯定在那里。

在那个函数调用之后，我回显了以下内容：

```
echo $webRoot;
echo $requestUri;
echo '$(^'.str_replace('$','\$',$webRoot).')$i'; 
```

这是这些回声的结果：

```
/
/en/example/
$(^/)$i 
```

有趣的是，如果我直接这样做：

```
preg_replace('$(^/)$i','',$requestUri); 
```

..有用。但这也失败了：

```
$tmp=str_replace('$','\$',$webRoot);
preg_replace('$(^'.$tmp.')$i','',$requestUri); 
```

为了彻底起见，我还测试了 echo $tmp 给出的内容，它确实给出了正确的值：

```
/ 
```

它是 Windows 中 PHP 的错误吗？我在 Linux 服务器上试用了它，它按预期工作，它没有抛出这个错误。还是我错过了什么？

只是为了确保，我什至将 PHP 更新到最新的 Windows 版本（5.4.2），同样的事情发生了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:53:40.293

好吧，我个人会使用另一个字符作为分隔符，例如 '#'，因为 $ char 是一个正则表达式特殊字符，它匹配正则表达式模式应用到的字符串的末尾。那就是说我不得不在 Windows 服务器上工作的几次我发现每个正则表达式都必须通过 preg_quote 函数传递，不管它是否包含正则表达式特殊字符。

```
$request=preg_replace('#(^'.preg_quote($webRoot).')#i','',$requestUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:22:54.037

abidibo 的回答是正确的，但显然问题是由 str_replace() 函数中的错误引起的。出于某种原因，在 Windows Apache 和 nginx 中，此函数会损坏字符串并用无法读取的符号填充它。

# sql - SQL如何从连接结果中选择最大日期

> ID：10502611
> 
> 赞同：2
> 
> 时间：2012-05-08T16:30:58.410
> 
> 标签：sql, ms-access-2007

总的来说，我对 SQL 有点陌生，我设法通过了这么远的方式，但现在我有点卡住了。

我有两张表，一张是“船舶”到“石油类型”的索引，只是 Id 的。另一个表“ROB”是船上剩余的油量。

每个月我可能会或可能不会在 ROB 表中获得新记录。

我需要的是每艘船的每种不同的油类型，以及最新的 ROB（如果有的话）。

下面的查询让我几乎得到了我想要的，除了我得到了每种油类型的所有 ROB 并且我只想要最新的。

```
PARAMETERS QueryShipID Short;
SELECT Oils.OilID, Oils.ShipID, ROB.LastROB, ROB.Received, ROB.DateReceived, ROB.PortReceived, ROB.TotalUsed, ROB.CurrentROB, ROB.DateSent
FROM 
    (SELECT DISTINCT OilID, ShipID 
    FROM [Index] 
    WHERE (((ShipID)=[QueryShipID])))  
    AS Oils 

    LEFT JOIN 

    (SELECT ShipID, OilId, LastROB, Received, DateReceived, PortReceived, TotalUsed, CurrentROB, DateSent 
    FROM [Oil ROB])  
    AS ROB 

    ON (Oils.ShipID = ROB.ShipID) AND (Oils.OilID = ROB.OilID); 
```

我需要做的是获取每种油类型的最后一个 DateSent。

我发现了一些关于使用 Max 函数的教程，这些教程似乎建议将聚合查询的结果连接回原始表。但是我似乎无法让它工作，它会产生一个巨大而混乱的查询。

如果有人对最好的方法有一些建议，我将不胜感激。

理想情况下，在这样做之后，我想为日期添加一个参数，这样您就可以获得某个日期之前的最后一个 ROB。这应该相对容易，但我将其包括在内，以防它对答案有任何影响。

谢谢。

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:01:00.630

我想我最近问了几乎完全相同的问题尝试这个 [SQL 选择具有不同名称列的最新记录](https://stackoverflow.com/questions/10452940/sql-select-newest-records-that-have-distinct-name-column)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:18:02.767

```
SELECT    Oils.OilID, Oils.ShipID, ROB.LastROB, ROB.Received, ROB.DateReceived, 
          ROB.PortReceived, ROB.TotalUsed, ROB.CurrentROB, ROB.DateSent
FROM 
          (
           SELECT DISTINCT OilID, ShipID 
           FROM   [Index] 
           WHERE  ShipID = [QueryShipID]
          ) AS Oils 

LEFT JOIN  

          (
           SELECT ShipID, OilId, LastROB, Received, DateReceived, PortReceived, 
                  TotalUsed, CurrentROB, DateSent 
           FROM   [Oil ROB] 
           WHERE  DateSent = (
                              SELECT MAX(DateSent) 
                              FROM   [Oil ROB] 
                              WHERE  Oils.ShipID = ROB.ShipID AND 
                                     Oils.OilID = ROB.OilID
                             )
          )  AS ROB ON Oils.ShipID = ROB.ShipID AND Oils.OilID = ROB.OilID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:12:37.377

谢谢讨厌

我自己发布了答案，因为它是对 nawful 发布的内容的轻微修改。此外，K'leg 发布的链接也很有帮助，非常感谢。

这正是我想要的……

```
SELECT    Oils.OilID, Oils.ShipID, ROB.LastROB, ROB.Received, ROB.DateReceived,  
          ROB.PortReceived, ROB.TotalUsed, ROB.CurrentROB, ROB.DateSent 
FROM  
          ( 
           SELECT DISTINCT OilID, ShipID  
           FROM   [Index]  
           WHERE  ShipID = [QueryShipID] 
          ) AS Oils             
LEFT JOIN   
          ( 
           SELECT ShipID, OilId, LastROB, Received, DateReceived, PortReceived,  
                  TotalUsed, CurrentROB, DateSent  
           FROM   [Oil ROB]  
          )  AS ROB ON Oils.ShipID = ROB.ShipID AND Oils.OilID = ROB.OilID
WHERE     ROB.DateSent = ( 
                          SELECT MAX(DateSent)  
                          FROM   [Oil ROB]  
                          WHERE  ShipID = ROB.ShipID AND  
                                 OilID = ROB.OilID
                         ); 
```

主要修改是我需要 [Oil ROB] 表中的 OilID 来匹配 ROB.OilID 而不是 Oils.OilID。此外，我将 WHERE 移至最外层的 SELECT。

没有你是做不到的:)

# html - 以干净的方式对齐/堆叠大量小但大小不同的 div 框

> ID：10502620
> 
> 赞同：0
> 
> 时间：2012-05-08T16:31:36.753
> 
> 标签：html, css

我正在对单词进行标签云式显示，每个单词都包含在小 div 中，并且浮动，因此每行都出现了许多单词。但是，如果我开始更改某些 div 中的字体大小，则线条结构会被打断并出现巨大的间隙，如下图所示：

![在此处输入图像描述](../Images/50c770d21373ae60281a7996ceffe816.png)

任何人都可以就如何解决这个问题提供任何建议吗？我不想做任何花哨的事情，比如在较大的标签旁边有多行较小的标签：我只是希望 div 遵循正常的线条结构。

这是相关的CSS：

```
div.example {
background-color: #8C7D80;
padding: 2px;
margin: 2px;
float: left;
color: #96888B;
text-align: center;
position: relative;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:34:09.420

尝试提高行高。括号似乎太大，从而打破了界限。

```
div.example {
  // other stuff here
  line-height: 1.5
} 
```

您是否可以设置固定的行高？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:36:04.203

我建议明确设置高度和/或更改 line-height 属性。

```
div.example {
    background-color: #8C7D80;
    padding: 2px;
    margin: 2px;
    float: left;
    line-height: 25px;
    height: 25px;
    color: #96888B;
    text-align: center;
    position: relative;
} 
```

# algorithm - 测量晶格中簇的面积

> ID：10502633
> 
> 赞同：0
> 
> 时间：2012-05-08T16:32:20.890
> 
> 标签：algorithm

我有一个二维方格。在格子的每个点上，我都有一个可以取两个值（+1;0）的变量。在格子中的每个时间 t 都存在不连贯的集群，不同区域的站点，其值为 +1。我必须每次测量每个集群的面积（以创建直方图）。如何测量集群的面积？有简单的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:54:21.783

使用[连通分量标记](http://en.wikipedia.org/wiki/Connected-component_labeling)算法，您可以隔离不连通区域并计算其面积

# php - 如何使用 SOAP UI 为 SOAP 生成客户端 PHP 代码？

> ID：10502636
> 
> 赞同：8
> 
> 时间：2012-05-08T16:32:26.680
> 
> 标签：php, soap, client

谷歌搜索我发现这篇文章：

[http://java.dzone.com/tips/generating-client-java-code](http://java.dzone.com/tips/generating-client-java-code)

它讨论了如何使用 SOAP UI 客户端生成“JAVA”代码，但我需要的是使用肥皂 UI 或其他资源生成代码 php。

这可能吗？是否存在任何其他资源来使其发挥作用？

谢谢您的回答..

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T19:28:17.797

soapUI 不会生成 PHP 代码。

幸运的是，在 PHP 中通常不需要生成代理类。相反，使用[SoapClient](http://www.php.net/manual/en/soapclient.soapclient.php)并直接调用您需要的 SOAP 方法。[您可以在各种](https://www.vankouteren.eu/blog/simple-php-soap-example/) [博客](http://devzone.zend.com/25/php-soap-extension/#Heading5)中找到简单的示例。

如果您正在与之交互的服务使用许多复杂类型，那么您可能确实希望[自动生成一些 PHP 代码](http://www.mehtanirav.com/wsdl-to-php-generate-php-code-from-a-wsdl-file/)并使用 SoapClient 的**类映射**选项。

# c# - 获取列表视图项目的图形点

> ID：10502637
> 
> 赞同：1
> 
> 时间：2012-05-08T16:32:27.177
> 
> 标签：c#, winforms, listview

我在我的表单上有一个`ListView`控件，我试图在我的 ListView 中获得每个**可见**`Point`项目的 a甚至更好的 a 。有人知道这样做的技巧吗？`Rectangle`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:40:56.113

```
 foreach (ListViewItem item in myListView.Items)
        {
            Rectangle result = item.Bounds;
            if(result.IntersectsWith(myListView.ClientRectangle))
            {
                //there you go
            }
        } 
```

更多关于`Bounds`你可以在[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.bounds.aspx)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:04:19.410

我所做的是处理`ListView.DrawSubItem`事件，这使我可以访问具有属性的`DrawListViewSubItemEventArgs e`实例，该`e.Bounds`属性为我提供了您要求的矩形。

如果您不想自己做任何绘图，请设置`e.DrawDefault = true;`

以下是结果示例： ![ListView DrawSubItem](../Images/3ea2ab53b03c283b30ca62a84708f3db.png)**

# forms - 如何在 Rails 中提交此表单，使其位于 /users/:id？

> ID：10502638
> 
> 赞同：0
> 
> 时间：2012-05-08T16:32:39.230
> 
> 标签：forms, ruby-on-rails-3.1, routes, jquery-tokeninput

我正在尝试做一些在概念上看起来很简单的事情，但我就是无法让它发挥作用。这是我正在尝试做的事情：

> 我在 /users/index 页面上有一个简单的“搜索”表单。当当前用户输入搜索字段时，它利用 jQuery Tokeninput 自动完成用户（名称/用户名）。我想要做的是让用户输入一个名称，从列表中选择一个用户，然后单击“提交”并转到所选用户的个人资料（/users/:id/ - 这是用户#show）。我已将 jQuery Tokeinput 配置为将 user_id 提交为：user_token。

我似乎无法让这个工作。自动完成部分工作正常，但我不知道如何“提交”以便显示输入的用户个人资料。

当我点击表单上的“提交”按钮（从终端的开发日志中提取）时，会发生以下情况：

```
Started PUT "/users/2" for 127.0.0.1 at 2012-05-08 11:19:56 -0400
  Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"blah blah=", "user"=>{"user_token"=>"41"}, "commit"=>"Go to profile", "id"=>"2"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "2"]]
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1
Completed 500 Internal Server Error in 83ms

NoMethodError (undefined method `downcase!' for nil:NilClass):
  app/controllers/users_controller.rb:119:in `update' 
```

所以它在用户控制器上调用更新操作，我假设因为“@user”已经存在（具体来说，它是 current_user 单击提交按钮）。

在屏幕上，我看到：

> 顶部显示的路径是 .../users/2 （当前用户的 id），在浏览器中我看到：
> 
> 用户控制器中的 NoMethodError#update
> 
> 未定义的方法“小写！” 对于零：NilClass

我得到这个是因为它试图在用户控制器中运行“更新”操作，并且有一个“小写！” 在更新操作开始时调用其中一个参数。该参数 ([:user][:email]) 显然不存在，因为它不在我提交的表单中。

**我真正想做的是转到“/users/41”（其 id 作为 params[:user][:user_token] 传递的用户的显示页面）。我该怎么做呢？**

以下是所有相关代码：

```
#users_controller.rb#Index

def index
  @title = "All users"
  @label = "All users"
  @list_users = User.order(:name).page(params[:page]) #generates users shown on index page
  @user = current_user

  # This is used to populate the autocomplete field in the little search form
  @users = User.where("LOWER(name) like ? OR LOWER(username) like ?", "%#{params[:q].downcase}%", "%#{params[:q].downcase}%").order('name ASC').limit(10) if params[:q]

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @users, :only => [:id, :name, :username] }
  end
end 
```

我的路线...

```
#routes.rb 
resources :comments
resources :invitations
resources :sessions, :only => [:new, :create, :destroy]
resources :shares, :controller => "item_shares", :as => "item_shares" do
  resources :comments
end
resources :posts, :controller => "item_posts", :as => "item_posts" do
  resources :comments
end
resources :items
resources :relationships, only: [:create, :destroy]
resources :users do
  member do
    get :following, :followers
  end
end
resources :password_resets

match '/signup',  :to => 'users#new'
match '/signup/:invitation_token' => 'users#new', :as => :signup_with_invitation
match '/signin',  :to => 'sessions#new'
match '/signout', :to => 'sessions#destroy'
match '/invite',  :to => 'invitations#new'

match '/users/:id/shared', :to => 'users#shared'
match '/users/:id/received', :to => 'users#received'
match '/users/:id/saved', :to => 'users#saved'
match '/users/:id/posts', :to => 'users#posts'
match '/reciprocal_followers', :to => 'users#reciprocal_followers' 

root :to => 'pages#home' 
```

这是我的表单（这绝对行不通，尽管 jQuery Tokeninput 确实有效）：

```
#_user_search_form.html.erb
<div class="form">
<span class="form-label-right round-bottom-left-5 round-top-right-5 gray-gradient">Find someone</span>
<%= form_for @user, :action => "show" do |f| %>

    <div class="field">
        <%= f.label :user_token, "Name or Username" %></br>
        <%= f.text_field :user_token, :placeholder => 'John Doe or JohnDoe123', "data-pre" =>  (@pre_populate_data.to_json(:only => [:id, :name, :username]) unless @pre_populate_data.nil?)  %>
    </div>

    <div class="actions">
        <%= f.submit "Go to profile" %>
    </div>
<% end %>
</div> 
```

这是我的用户模型的相关部分：

```
#user.rb
attr_accessible  :user_token

attr_reader :user_token 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:23:08.620

```
<% form_for @project, :url => { :controller => "project", :action => "thumbnail_save" } do |form| %>
....
<% end %> 
```

在你的配置文件中也写这样的东西（把它放在顶部）

```
get "users/show" 
```

如果这不起作用试试这个。（您可能需要更改您的表格才能在下面工作）

```
match "project/thumbnail_save", :to => "project#thumbnail_save" 
```

让我们知道是否还有其他问题。

# javascript - 可滚动div内的弹出层

> ID：10502640
> 
> 赞同：0
> 
> 时间：2012-05-08T16:32:47.067
> 
> 标签：javascript, asp.net, html, css

我有一个让我发疯的问题。我在可滚动的 div 中有一个 gridview。当我单击 gridview 标题时，我可以看到带有过滤选项的小覆盖 div (z-index:10)。

问题是当我移动父 div 的水平滚动条时，过滤 div 也在移动。

如何“钉住”它，让它一直放在标题栏下？我应该使用一些 JavaScript 来更新它的位置还是可以用 css 来完成？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:39:56.303

如果没有看到代码，这很难，但通常添加 position: relative 到父元素并将 position:absolute 添加到子元素以使其在其父元素中“钉牢”。

当然，然后使用 top: -px 和 left: -px 为其在元素中的位置设置一个值。

# java - 在 Java Jersey 中处理点 (.) 参数

> ID：10502641
> 
> 赞同：0
> 
> 时间：2012-05-08T16:32:49.377
> 
> 标签：java, rest, jersey

我想按如下方式格式化我的 REST 接口：

myurl.com/resources/{resourceId}

我有选择地希望人们能够提供以下变体来指定返回格式：

myurl.com/resources.json/{resourceId}

我正在使用 Jersey 来提供我的 REST 服务。处理这些参数的最佳方法是什么？

应该使用不同的@PATH 表示法创建一个单独的类，还是我可以有一个类并解析出该参数？是否有任何内置注释可以处理这个问题，类似于@PathParam 或@QueryParam？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:46:39.073

已经有一种机制（正如@digitaljoel 已经说过的那样） - HTTP Accept 标头。

Jersey 对您的用例没有任何直接支持，但有类似的东西 - 媒体类型映射功能，请参阅 [http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/ core/ResourceConfig.html#PROPERTY_MEDIA_TYPE_MAPPINGS](http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/core/ResourceConfig.html#PROPERTY_MEDIA_TYPE_MAPPINGS) 和 [http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/core/ResourceConfig.html#getMediaTypeMappings%28%29](http://jersey.java.net/nonav/apidocs/1.12/jersey/com/sun/jersey/api/core/ResourceConfig.html#getMediaTypeMappings%28%29)

不幸的是，它只处理最后具有此“参数”的 URL，但获取 UriConnegFilter 源（[http://java.net/projects/jersey/sources/svn/content/trunk/jersey ）应该不是很困难/jersey-server/src/main/java/com/sun/jersey/api/container/filter/UriConnegFilter.java?rev=5698](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-server/src/main/java/com/sun/jersey/api/container/filter/UriConnegFilter.java?rev=5698)）并修改它以满足您的需要。

# android - 如何拉伸以适合动态壁纸上的背景图像

> ID：10502644
> 
> 赞同：1
> 
> 时间：2012-05-08T16:33:02.580
> 
> 标签：android, andengine, live-wallpaper

我正在尝试设置我的动态壁纸的背景，以便完美地适合屏幕。当前壁纸尺寸为 1024x1024，但只有部分图像出现在我的 HTC Desire 屏幕上（尺寸为 480 x 800）。此外，当我尝试设置小于 480x800 的图像时，图像不会拉伸以适合整个屏幕。

有什么方法可以实现这一点，使墙纸至少在高度上完美贴合，而与屏幕尺寸无关？

这是我的代码供您参考-

```
private static final int CAMERA_WIDTH = 480;
private static final int CAMERA_HEIGHT = 720;

@Override
public EngineOptions onCreateEngineOptions() {
 final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
 return new EngineOptions(true, ScreenOrientation.PORTRAIT_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
}

@Override
public void onCreateResources(OnCreateResourcesCallback pOnCreateResourcesCallback) throws Exception {
 .
 .
 this.mBitmapBackgroundAtlas1 = new BitmapTextureAtlas(this.getTextureManager(), 1024, 1024);
 this.mFaceBackgroundRegion1 = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapBackgroundAtlas1, this, "bg1.jpg", 0, 0);
 this.mBitmapBackgroundAtlas1.load();
 .
 .
}

@Override
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback) throws Exception {
 this.mEngine.registerUpdateHandler(new FPSLogger());
 .
 .
 mScene.setBackground(new SpriteBackground(new Sprite(0, 0, mFaceBackgroundRegion1, this.getVertexBufferObjectManager())));
 .
 .
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T04:48:11.547

好的……找到答案了。为那些也在寻找相同的人发布它。

您可以覆盖 onSurfaceChanged 方法，该方法具有宽度和高度作为参数。这给出了设备的屏幕宽度/高度。

您可以使用此值将图像缩放到您的要求。

```
@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
 this.screenWidth=width;
 this.screenHeight=height;
} 
```

# android - 在不使用互联网的情况下通过蓝牙为手机提供本地网站

> ID：10502645
> 
> 赞同：22
> 
> 时间：2012-05-08T16:33:03.590
> 
> 标签：android, iphone, windows, bluetooth, localhost

我正在尝试通过手机、ipad 和其他无线设备上的蓝牙运行本地计算机。

我们希望能够在不连接到互联网的情况下在此服务器上运行本地托管的网站，是否可以通过从服务器到无线设备的蓝牙运行该站点。

服务器可能没有连接到互联网，所以我想知道是否可以通过手机浏览器在手机上本地运行该站点，而无需将服务器连接到互联网。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T16:56:09.310

是的，通过某些方式，例如：

*   向后使用蓝牙网络共享 - 即手机认为计算机是它的网络连接源。计算机不仅运行网络服务器，还运行名称服务器（或手机有主机文件），以便网站名称解析为蓝牙网络上计算机的 IP 地址。请注意，电话可能需要管理员级别的访问权限或现有功能。

*   将蓝牙更像是串行连接。编写一个在手机上运行的服务，并通过环回网络接口接受来自手机浏览器的网络连接。然后，它通过蓝牙串行链接将 http 请求发送到 PC，其中类似 Web 服务器的程序接受它们并通过类似串行的通道进行响应。然后，电话上的服务通过环回网络接口将这些返回给浏览器。如果您对诸如[http://localhost:8080](http://localhost:8080)之类的 URL 感到满意，则不需要对设备进行管理访问，而只需要运行可以侦听网络套接字的后台服务的能力。但是要摆脱 :8080 并在隐式常用端口 80 上运行，至少在 Android 上，您需要 root 访问权限。

*   将手机的浏览器引擎封装在一个应用程序中，该应用程序用蓝牙上的类似串行访问来代替网络套接字。或者，以这种方式在自定义浏览器应用程序中部署服务理念，这样您实际上不必运行后台包，而只需运行用户正在使用的应用程序中的后台服务线程。

*   购买家用wifi路由器，不要将其WAN端口连接到任何东西。买一个有足够内存的路由器来安装一个路由器 Linux 发行版，你甚至可以在那个盒子上托管网站，而把 PC 放在外面。是的，这不是蓝牙解决方案，只是为了简单起见，如果有一种可以接受的方法，就将它扔在那里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-29T16:00:02.123

使用安装了 Raspbian Linux 操作系统的 Raspberry Pi。在 Pi (Nginx) 上配置您最喜欢的 Web 服务器。根据以下内容将 Pi 配置为运行 hostapd 的 WiFi 接入点：[https ://learn.adafruit.com/setting-up-a-raspberry-pi-as-a-wifi-access-point/install-software](https://learn.adafruit.com/setting-up-a-raspberry-pi-as-a-wifi-access-point/install-software)

这将为您提供一个非常好的、便宜的、低功耗的小型网络服务器，它可以广播自己的 WiFi SSID，供您连接所有设备。

我用它来实现你所追求的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-14T04:29:43.910

我想出了一些关于如何在 Mac -> iPhone 上完成此操作的明确说明。我不确定如何（我在[https://superuser.com/questions/1405531/how-does-expressjs-serve-website-over-bluetooth-without-internet](https://superuser.com/questions/1405531/how-does-expressjs-serve-website-over-bluetooth-without-internet)中询问“如何” ）

我有一个使用 expressjs 在 localhost:9190 上提供的网站。在那台 Mac 上，我去了系统偏好设置。在其中，转到共享。在蓝牙 PAN 之间打开“Internet 共享”。请注意顶部的消息 about `yourmac.local`。

然后从系统偏好设置中，转到您的网络设置。蓝牙应该会弹出一个自分配的 IP。点击高级并确保将 IPv4 地址设置为手动。然后根据我复制粘贴集的示例：

> 192.168.2.1 子网 255.255.255.0 和路由器地址字段 192.168.2.1，提供 DNS 为 8.8.8.8 和第二个 dns 8.8.4.4。

我将手机连接到 Mac，然后从 safari 连接到`http://yourmac.local:9190/`并正常连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-25T22:36:35.897

如果您正在开发一个通过 localhost（即 angular、express 等）访问的网络应用程序并希望在您的移动设备上访问它，一种选择是[反向绑定](https://www.howtogeek.com/214259/how-to-reverse-tether-an-iphone-or-ipad-to-your-pc-or-mac/)您的设备，以便您的平板电脑/手机通过您的计算机通过蓝牙 PAN。

连接设备后，您需要在**托管（蓝牙）网络**上找到您计算机的 IP 地址。要找到它，请打开终端应用程序，然后键入`ifconfig`，然后在配置中搜索`inet`地址 `bridge100`，例如在`ifconfig`此条目的第四行：

```
bridge100: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500
    options=3<RXCSUM,TXCSUM>
    ether f6:0f:24:22:ea:64
    inet 192.168.2.1 netmask 0xffffff00 broadcast 192.168.2.255
    inet6 fe80::f04f:2f4f:ef22:ae64%bridge100 prefixlen 64 scopeid 0x10
    Configuration:
        id 0:0:0:0:0:0 priority 0 hellotime 0 fwddelay 0
        maxage 0 holdcnt 0 proto stp maxaddr 100 timeout 1200
        root id 0:0:0:0:0:0 priority 0 ifcost 0 port 0
        ipfilter disabled flags 0x2
    member: en6 flags=3<LEARNING,DISCOVER>
            ifmaxaddr 0 port 15 priority 0 path cost 0
    nd6 options=201<PERFORMNUD,DAD>
    media: autoselect
    status: active 
```

在蓝牙网络上获得计算机的 IP 地址后（`192.168.2.1`在这种情况下），打开移动设备的浏览器并加载`http://192.168.2.1:1234/`其中的 `1234 替换为服务器正在侦听的端口（即 Angular 的 4200 等）。

AngularJS 的特别说明：默认情况下，该`ng serve`命令只侦听“localhost:4200”，您网络上的其他设备无法访问。对于 Angular，您需要使用指定的主机启动服务器，如下所示：`ng serve -host 0.0.0.0`

# inheritance - 什么时候在 Dart 中使用接口？

> ID：10502649
> 
> 赞同：10
> 
> 时间：2012-05-08T16:33:42.783
> 
> 标签：inheritance, interface, dart

我正在阅读 Dart 的文档，我有点困惑，可能是因为我来自 Ruby，关于如何使用接口。当然，接口并不是 Dart 独有的，关于何时应该使用接口有很多解释。[例如，这](https://stackoverflow.com/questions/1686174/when-should-one-use-interfaces)似乎是说接口仅在您在团队中时才有用。在开源世界中，每个人都在阅读和重用别人的代码，这意味着什么？

我见过的一个有趣的解释似乎暗示使用了接口：

1.  在缺乏多重继承的语言中，以及
2.  就此而言，它们以某种方式作为缺少多重继承的解决方法。

我不明白。我知道 Ruby 中的模块是一种解决方法，因为它们允许我用实际的主体定义真正的方法。接口只允许我定义实现它的类应该有哪些方法。有什么问题？谁能告诉我一个真正有用的例子，我可以立即看到使用接口的价值？

PS 在相关说明中，有没有办法在 Dart 中使用多重继承？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-08T19:24:00.460

更新：[interface 关键字已从 Dart 中删除](https://stackoverflow.com/a/28595665/712173)。

* * *

接口很有用，因为它们允许您切换类的实现，同时仍然允许验证传入的类型是否满足接口的要求。

以以下（经常使用的）示例为例：

```
interface Quackable {
  void quack();
} 
```

这定义了将传递给方法的类的要求，例如：

```
sayQuack(Quackable quackable) {
   quackable.quack();
} 
```

它允许您使用 Quackable 对象的任何实现，例如：

```
class MockDuck implements Quackable {
  void quack() => print("quack");
}

class EnterpriseDuck implements Quackable {
  void quack() {
    // connect to three enterprise "ponds"
    // and eat some server bread
    // and say "quack" using an messaging system
  }

} 
```

这两种实现都可以与 sayQuack() 函数一起使用，但其中一种需要的基础设施要少得多。

```
sayQuack(new EnterpriseDuck());
sayQuack(new MockDuck()); 
```

在构建利用一些“企业鸭”的解决方案时，我在 Java 世界中一直使用这种模式。在本地开发时，我只需要能够调用 sayQuack() 函数并返回一些硬编码的模拟数据。

**鸭打字**

因为 Dart 是可选类型的，所以您实际上不需要使用接口，只需编写一个包含正确方法签名的类即可（尽管工具无法验证它）。

```
class Person {   // note: no implements keyword
  void quack() => "I'm not a duck";
}

sayQuack(new Person()); // provides the quack method, so this will still work 
```

**所有类都是接口**

最后，所有的类也是接口。这意味着即使第三方系统可能在没有使用接口的情况下编写，您仍然可以使用具体类，就好像它是一个接口一样。

例如，想象以下企业库：

```
class EnterpriseDuck { // note: no implements keyword
  void quack() {
    // snip
  }
}

sayQuack(EnterpriseDuck duck) {  // takes an instance of the EnterpriseDuck class
  duck.quack();
} 
```

并且您想以类型检查器可以验证的方式将模拟鸭子传递给 sayQuack 方法。您可以创建自己的 mockDuck 来实现 EnterpriseDuck 隐含的接口，只需使用 EnterpriseDuck 作为接口：

```
class MockDuck implements EnterpriseDuck {
  void quack() => "I'm a mock enterprise duck";
} 
```

**多重继承**

在多重继承方面，这在 Dart 中是不可能的。但是，您可以实现多个接口并提供您自己的所需方法的实现，例如：

```
class MultiDuck implements Quackable, EnterpriseDuck, Swimable {
  // snip...
} 
```

**接口可以有默认类**

当你使用 Dart 时，你会发现大多数“类”实际上都是接口。List、String 等都是提供默认实现的接口。你打电话时

```
List myList = new List(); 
```

您实际上正在使用 List 接口，并且 new 关键字从接口重定向到底层默认 List 实现。

**关于团队发展**

接口在团队开发中很有用，即使在开源世界中也是如此。该接口定义了您应该构建的方法和属性，以便您的组件与我的组件一起使用。您可以构建您自己的该接口的测试实现，我可以构建该接口的具体实现，当我们都完成后，我们可以集成。如果没有发布的共享接口，我需要提供具体的实现，然后才能真正开始。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T07:13:52.583

基本上，接口与多重继承无关。这样做时可能会伪造多重继承和滥用接口，但如果你想要真正的多重继承（或混合或特征），那么 Dart 不提供它们（目前 - 我相信混合在某一天会找到自己的方式）。

接口的好处是*显式契约*。假设您有两个组件`A`并且`B`需要相互配合。您当然可以直接调用`B`from`A`并且它会起作用，但是下次您想要更改`B`时，您将不得不看看`A`它是如何使用它的。那是因为*`B`没有公开显式接口*。是的，接口的正确词不是*实现*而是*暴露*。

如果你把实现隐藏`B`在一个接口后面，只提供那个接口`A`，那么你可以随意改变`B`，只担心*仍然暴露相同的接口*。该接口甚至可以被多个类公开，调用者不必关心（甚至知道）。

请注意，*interface*一词在这里有两个含义：组件的一般*合同*，也可以在文档中用简单的英语进行描述，以及一种*特殊的语言结构*，可以帮助您在内部描述（并强制执行）合同的某些部分编程语言。

您不一定必须使用语言结构，但使用它来描述编程语言允许您描述的合同部分被认为是一种很好的风格。

*现在，这里的合同*到底是什么？简而言之，契约是*对组件对其用户的期望以及用户对组件的期望*的描述。

例如，假设我有一个计算数字绝对值的方法：

```
class MathUtils {
  /// Computes absolute value of given [number], which must be a [num].
  /// Return value is also a [num], which is never negative.
  absoluteValue(number) {
    ... here's the implementation ...
  }
} 
```

此处的合约在文档注释中有完整的描述（嗯，不完整，我们也可以描述什么是绝对值，但这已经足够了）。嗯...但是评论的某些部分可以直接用语言表达，对吧？

```
class MathUtils {
  /// Computes absolute value of given [number].
  /// Return value is never negative.
  num absoluteValue(num number) {
    ... here's the implementation ...
  }
} 
```

请注意，合同的某些部分根本*无法*用编程语言表达——这里，语言不知道*绝对值*是什么，这需要留在注释中。此外，你不能表示返回值永远不会是负数，所以这也必须留在评论中。但实际上，您的代码的读者*知道*什么是绝对值（并且它永远不会是负数），并且方法名称非常清楚目的，因此可以完全省略注释：

```
class MathUtils {
  num absoluteValue(num number) {
    ... here's the implementation ...
  }
} 
```

所以现在，合同的某些部分是用语言手段明确表达的，有些部分是隐含表达的（你依赖于人们知道什么是绝对值）。

语言中的接口用于*将契约与实现分离*。在小程序中使用它可能有点过头了，但是在执行大型程序时它会得到回报（这不必涉及团队合作）。

呃，结果比我预期的要长。希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:42:39.143

接口是 Dart 类型系统的一部分，类型声明是可选的。这意味着接口也是可选的。

接口可帮助您记录对象响应的方法。如果你实现了接口，那么你就承诺实现接口中的所有方法。

Dart 使用这些信息来显示类型不匹配的编译时警告，为代码辅助提供更多有用的建议并协助进行一些重构。

# awk - awk，设置 FS="," 似乎不起作用，我应该知道一些警告吗？

> ID：10502650
> 
> 赞同：3
> 
> 时间：2012-05-08T16:33:44.243
> 
> 标签：awk

好的，所以我正在尝试编写一个简单的 awk 来清除我拥有的一些 csv 文件的一些逗号。

这是几行示例数据

```
 PRD,,,,PEWPRV100D,,,EWPRVU457D,,,,12/31/2011  10:09:14 PM,,,,,5,,,4,,
  PRD,,,,PEWPRV100D,,,EWPRVU250D,,,,12/31/2011  10:09:23 PM,,,,,67,,,69,,
  PRD,,,,PEWREF100D,,,EWREFU045D,,,,12/31/2011  10:09:40 PM,,,,,7,,,5,,
  PRD,,,,PEWPRV100D,,,EWPRVU191D,,,,12/31/2011  10:09:40 PM,,,,,6,,,5,, 
```

作为一个简单的第一步，我想执行此操作（我最终想要做的更复杂，但这是我需要做的第一件事，我什至无法做到这一点:(）

```
 PRD,PEWPRV100D,EWPRVU457D,12/31/2011  10:09:14 PM,5,4,
   PRD,PEWPRV100D,EWPRVU250D,12/31/2011  10:09:23 PM,67,69,
   PRD,PEWREF100D,EWREFU045D,12/31/2011  10:09:40 PM,7,5,
   PRD,PEWPRV100D,EWPRVU191D,12/31/2011  10:09:40 PM,6,5, 
```

这是我第一次尝试 awk 脚本

```
 #!/bin/awk 
  BEGIN{FS=",";} 
  {print $0,$4,$7,$11,$16,$19 }
  END{print "DONE"} 
```

产生

```
 PRD,,,,PEWPRV100D,,,EWPRVU457D,,,,12/31/2011  10:09:14 PM,,,,,5,,,4,,,,,,,
  PRD,,,,PEWPRV100D,,,EWPRVU250D,,,,12/31/2011  10:09:23 PM,,,,,67,,,69,,,,,,,
  PRD,,,,PEWREF100D,,,EWREFU045D,,,,12/31/2011  10:09:40 PM,,,,,7,,,5,,,,,,,
  PRD,,,,PEWPRV100D,,,EWPRVU191D,,,,12/31/2011  10:09:40 PM,,,,,6,,,5,,,,,,, 
```

我试过一个更有说服力的脚本：

```
 #!/bin/awk 
  BEGIN{FS=",";} 
  {printf("$$%s$$", $0) }
  END{print "DONE"} 
```

产生

```
 $$PRD,,,,PEWPRV100D,,,EWPRVU457D,,,,12/31/2011  10:09:14 PM,,,,,5,,,4,,$$
  $$PRD,,,,PEWPRV100D,,,EWPRVU250D,,,,12/31/2011  10:09:23 PM,,,,,67,,,69,,$$
  $$PRD,,,,PEWREF100D,,,EWREFU045D,,,,12/31/2011  10:09:40 PM,,,,,7,,,5,,$$
  $$PRD,,,,PEWPRV100D,,,EWPRVU191D,,,,12/31/2011  10:09:40 PM,,,,,6,,,5,,$$ 
```

显示（我认为） FS="," 没有将分隔符设置为逗号，因为整行被视为一列。我也尝试了该行的许多不同形式，似乎没有任何区别。awk 实现的手册页说 FS 是我应该设置的 var。我也尝试过 hte -F 标志，这也没有帮助。

我在这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:37:23.857

在`awk`,`$0`中不是第一列，而是整行。 `$1`是第一列，第二列是`$2`，依此类推。因此，您可能想要更改此：

```
{print $0,$4,$7,$11,$16,$19 } 
```

对此：

```
{print $1,$5,$8,$12,$17,$20 } 
```

# objective-c - UIView背景图像不旋转

> ID：10502651
> 
> 赞同：0
> 
> 时间：2012-05-08T16:33:47.563
> 
> 标签：objective-c, ios, xcode, ipad

我有一个有两个不同背景图像的应用程序。选择的一个由方向决定。当我开始时，我检查 self.interfaceOrientation，然后去选择正确的图像。但是，每当视图打开时，图像的一部分就会重复而不是拉伸。我看到了一个将自动调整大小蒙版应用到图像视图的先前答案，但我目前没有使用图像视图。

在 loadView 方法内部：

```
if(self.interfaceOrientation==UIInterfaceOrientationPortrait ||self.interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
{
  [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed: @"portrait"]]];
}else{
  [self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed: @"landscape"]]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:26:10.557

正如 rishi 所指出的，问题是由 colorWithPatternImage 方法引起的。我为解决这个问题所做的是将视图的背景设置为指定的图像。

```
UIImageView* bgView = [[UIImageView alloc]initWithImage:[UIImage imageNamed: @"foo.png"]];
[self.view addSubview: bgView]; 
```

我还添加了灵活的宽度和高度，以便它可以正确旋转。

# jquery - 'undefined' 不是函数（评估 '$(this).calcSubWidth()'）

> ID：10502655
> 
> 赞同：0
> 
> 时间：2012-05-08T16:33:54.100
> 
> 标签：jquery

遇到与导航菜单相关的错误问题。将鼠标悬停在上方时，会出现 javascript 错误：“未定义”不是函数（正在评估“$(this).calcSubWidth()”）。它在 menu.js 中。但是，即使出现错误，菜单也可以正常工作。

网站：[http ://csenew.drdino.coresense.com](http://csenew.drdino.coresense.com)

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:45:47.910

我看了看，`menu.js`注意到一件事。您正在函数`calcSubWidth`内部创建插件 ( ) 。每次悬停菜单项时都会调用它，因此您每次都在重新定义。尝试将定义移动到 document.ready 函数的顶部，看看是否有帮助。`megaHoverOver``megaHoverOver``calcSubWidth``calcSubWidth`

另一条评论——考虑返回`rowWidth`而`calcSubWidth`不是仅仅作为一个全局访问它。由于许多原因，包括调试和沿作用域链上行时性能受到影响，全局变量并不好使用。

# php - html提交按钮不起作用

> ID：10502658
> 
> 赞同：0
> 
> 时间：2012-05-08T16:34:09.377
> 
> 标签：php, mysql, html, form-submit

据我所知，单击提交按钮不会将我带到下一页。

这是包含在 ./admin/index.php 中的 add_product.php，这是我遇到问题的表单：

```
<div class='content'>
<form type='./inc/add_sql.php' method='POST'>

Name: <br/>
<input type='text' name='name' /><br/><br/>

Discription: <br/>
<textarea rows='10' cols='32'  name='discription'>
</textarea><br/><br/>

Price (&pound;): <br/>
<input type='text' name='price' /><br/><br/>

Use Stock Values?<br/>
<input type='radio' name='use_stock' value='1' /> Yes &nbsp
<input type='radio' name='use_stock' value='0' /> No <br/><br/>

Image Text: <br/>
<input type='text' name='img_alt' /><br/><br/>

Thumbnail Text: <br/>
<input type='text' name='thumb_alt' /><br/><br/>

Stock Level (Optional)<br/>
<input type='int' name='stock' /><br/><br/>

<input type="submit" value="Submit">
</form>
</div> 
```

和 add_sql.php （从上面）

```
<?php
include './sql_connect.php';

$name = mysql_real_escape_string($_POST['name']);
$discription = mysql_real_escape_string($_POST['dicription']);
$price = mysql_real_escape_string($_POST['price']);
$use_stock = mysql_real_escape_string($_POST['use_stock']);
$img_alt = mysql_real_escape_string($_POST['img_alt']);
$thumb_alt = mysql_real_escape_string($_POST['thumb_alt']);
$stock = mysql_real_escape_string($_POST['stock']);

$mysql = mysql_query("INSERT INTO `products`(`name`, `dicription`, `price`, `use_stock`, `img_alt`, `thumb_alt`, `stock`) VALUES ({$name},{$discription},{$price},{$use_stock},{$img_alt},{$thumb_alt},{$stock})");

if (!mysql_query($mysql,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record added <a href='./?add_products'>continue</a>";

mysql_close($con);
?> 
```

谁能看到这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:36:17.323

```
<form type='./inc/add_sql.php' 
```

应该：

```
<form action='./inc/add_sql.php' 
```

# uml - UML 限定符的目的是什么？

> ID：10502662
> 
> 赞同：7
> 
> 时间：2012-05-08T16:34:17.863
> 
> 标签：uml, qualifiers

我无法理解 UML 中的限定符是什么。例如，在扫描的页面中，有一个名为“SharedRegister”的限定符，其中包含“state”和“plateNumber”。

为什么不直接使用一个名为 SharerRegister 的类并将“state”和“plateNumber”放入其中？它在课堂上到底提供了什么？

![Schaum UML - 第 108 页](../Images/108274bdb953468ac789dd05f79f9ac4.png)

（图片来自 Schaum 的大纲，UML 第 2 版。Simon Benett。第 108 页）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T09:43:05.993

`state`并`PlateNumber`充当可以访问相关类的密钥。如果您不使用限定符，您将在具有多重性 * 的类之间建立关系，但不会确切知道它们是如何相关的。`ShareRegister`在这里，您可以通过知道 的特定值来了解该类，`state`并且`PlateNumber`可以访问 0 或 1 个实例`CarSharer`。

# objective-c - 在 iOS 5.1 中显示模态视图控制器后 UIScrollView 无法正常工作

> ID：10502670
> 
> 赞同：3
> 
> 时间：2012-05-08T16:34:50.753
> 
> 标签：objective-c, ios5, uiscrollview, modalviewcontroller

将 UIScrollView 控制器与 iPhone 4 和 iOS 5.1 结合使用时，我遇到了一个奇怪的问题。

我有一个 UIScrollView，其内容大小为 640x480（有效双屏），除了在两个“屏幕”之间切换的滑动之外，我还允许用户点击屏幕以响应我称之为...

```
[scrollView scrollRectToVisible:(CGRectMake 320,0,320,480) animated:YES]; 
```

如果在显示滚动视图的右侧时发生点击，则第一个 320 将为 0（请注意，滚动视图已启用分页，因此它只能完全靠左或完全靠右）。

我还有一种情况，有时我会在包含滚动视图的视图控制器上以模态方式使用 presentModalViewController 显示一个额外的视图控制器。

一切正常，直到模态视图控制器出现并随后被解除，之后如果动画设置为 YES，则 scrollRectToVisible 方法将不再起作用（如果我将动画更改为 NO，那么它会按预期工作）。请注意，点击仍在注册，并且 scrollRectToVisible 正在被调用，当动画设置为 YES 时它什么也不做）。

关键是，这个错误只发生在运行 iOS 5.x 的 iPhone 4 上。
它在我的以下设备上完美运行（即使在显示模态视图控制器之后）：运行 4.x 的 iPhone 3G、运行 3.x 的 iPhone 3GS、运行 4.x 的 iPod touch（第 2 代），最令人惊讶的是运行 5.x 的模拟器.

我想知道这是否是动画系统中的错误，因此禁用了模态视图控制器演示文稿上的动画并关闭，这没有效果，问题仍然出现在 iOS 5.1 的 iPhone 4 上。

有人对可能导致此问题的原因以及我如何解决此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:27:29.547

终于找到了这个。什么猪……

我将视图控制器中的视图嵌入为另一个视图控制器视图的子视图。所以我的滚动视图包含一个视图，它也有一个关联的视图控制器。

在 iOS 5.x 之前，方法 viewWillAppear、viewWillDisappear、viewDidAppear 和 viewWillDisappear 永远不会在子视图视图控制器上调用，只会在主视图控制器上调用。已经知道这一点，我将我的主视图控制器设置为在这些事件发生时手动调用子视图视图控制器方法。

然而，在 iOS 5.x 中，这个问题似乎已被“修复”，因此在我手动将 viewWillAppear 的调用传递给我的子视图控制器时，我不再需要在 5.x 下执行此操作，因为该方法会在 5.x 下自动调用。 x - 因此它现在在 5.x 下被调用了两次，但在 4.x 或更早的设备上运行时仍然只调用一次。

结果，在 5.x 下，我用来调用我的 updateUI 方法的 NSTimer 被创建了两次，但是因为在 viewDidDisappear 中，我只在它不是 nil 时才销毁计时器，它只会被销毁一次 - 因此我在 5.x 下泄漏 NSTimer。 x 通过双重分配，我不在 4.x 以下。

由于多个 NSTimers 反复调用我的 updateUI 方法，结果是 UI 的不断更新正在杀死动画系统，因此在实际设备上运行时，scrollView 的动画会失败。我猜它在运行 5.x 的模拟器上继续运行良好，因为 Mac 中的 CPU 不仅能够处理额外的工作负载，而且仍然正确地执行动画。

在我的 viewWillAppear 方法中进行简单检查以确保尚未创建 NSTimer 已解决问题并保持与 4.x 及更早版本的兼容性。

每次 Apple 通过主要版本更新他们的 iOS 时，我都会沮丧地遇到这些问题......这个故事的士气是不要假设长期存在的课程在不同的操作系统版本下仍然表现出相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:50:52.693

我有同样的问题。我意识到，在我的班次下班后被`modalViewController`解雇了 20**像素，这与****状态栏**的高度相同。所以，这意味着当我的加载和创建时，认为没有状态栏，实际上它在那里。 所以我尝试放入**viewDidLoad**：`UIScrollerView`****`UIViewController``UIScrollView``UIScrollView`**** 

 ******```
[[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

现在我`UIScrollView`总是停留在状态栏下，Y 位置为 20px。它永远不会向下移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T14:07:06.750

我终于设法让它在运行 5.1 的 iPhone4 上运行。确保设置滚动视图的水平反弹属性可以解决问题，尽管为什么不选中这个会首先导致问题超出我的理解——我很确定这是 iOS 中的一个错误。******

# c++ - 用cgal计算两个多边形的相交面积

> ID：10502672
> 
> 赞同：3
> 
> 时间：2012-05-08T16:34:52.623
> 
> 标签：c++, computational-geometry, cgal

给定两个凸多边形的顶点，使用 cgal 计算它们相交面积的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T17:35:49.543

因为您使用的是凸多边形，所以无需担心孔洞。所以我能想到的最简单的代码基本上是构造多边形，调用交叉点，循环交叉点并合计面积::

```
#include <iostream>
#include <CGAL/Simple_cartesian.h>
#include <CGAL/Polygon_2.h>
#include <CGAL/Polygon_with_holes_2.h>
#include <CGAL/Boolean_set_operations_2.h>
#include <CGAL/Polygon_2_algorithms.h>

typedef CGAL::Simple_cartesian<double> K;
typedef K::Point_2 Point;
typedef CGAL::Polygon_2<K> Polygon_2;
typedef CGAL::Polygon_with_holes_2<K> Polygon_with_holes_2;
using std::cout; using std::endl;

int main(){
  Point points[] = { Point(0,0), Point(1,0), Point(1,1), Point(0,1)};
  Point points2[] = { Point(0.5,0.5), Point(1.5,0.5), Point(1.5,1.5), Point(0.5,1.5)};
  Polygon_2 poly1(points, points+4);
  Polygon_2 poly2(points2, points2+4);
  //CGAL::General_polygon_with_holes_2<K> poly3;
  std::list<Polygon_with_holes_2> polyI;

  CGAL::intersection(poly1, poly2, std::back_inserter(polyI));

  double totalArea = 0;
  typedef std::list<Polygon_with_holes_2>::iterator LIT;
  for(LIT lit = polyI.begin(); lit!=polyI.end(); lit++){
    totalArea+=lit->outer_boundary().area();
  }
  cout << "TotalArea::" << totalArea;

} 
```

# ios - EasyAPNS 配置

> ID：10502674
> 
> 赞同：0
> 
> 时间：2012-05-08T16:34:59.867
> 
> 标签：ios

嘿，我正在 iOS 上构建一个应用程序并想要实现 PushNotifications。我正在使用来自[https://github.com/manifestinteractive/easyapns](https://github.com/manifestinteractive/easyapns)的 EasyAPNS 代码 配置它时，我显然必须在 DB_Connect php 文件中添加我的 Mysql-Database 信息。我不擅长 php，所以我真的不知道我必须如何在文件中准确输入我的信息，因为在教程中我看到文件总是看起来不同。各位大神能给我一些指导如何进行吗？Thnaks，oengelha。

这里的代码片段：

```
/**
    * Constructor. Initializes a database connection and selects our database.
    * @param string $host       The host to wchich to connect.
    * @param string $username   The name of the user used to login to the database.
    * @param string $password   The password of the user to login to the database.
    * @param string $database   The name of the database to which to connect.
    */
    function __construct($host, $username, $password, $database)
    {
        $this->DB_HOST     = $host;
        $this->DB_USERNAME = $username;
        $this->DB_PASSWORD = $password;
        $this->DB_DATABASE = $database;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:52:26.040

这应该有帮助

```
function __construct()
{
    $this->DB_HOST     = 'Your Host';
    $this->DB_USERNAME = 'Your Username'; // !!! CHANGE ME
    $this->DB_PASSWORD = 'Your Password'; // !!! CHANGE ME
    $this->DB_DATABASE = 'Your Database'; // !!! CHANGE ME
} 
```

祝你好运！

# mod-rewrite - ModRewrite .htaccess / SEO URLs 语法

> ID：10502678
> 
> 赞同：0
> 
> 时间：2012-05-08T16:35:24.307
> 
> 标签：mod-rewrite, url-rewriting

我正在尝试在新站点/服务器上重新使用一些 .htaccess 代码，但它无法正常工作。我不是 URL 重写方面的专家，所以如果有人能看到我的语法是否不正确或者我需要检查服务器端的其他内容，我将不胜感激。

我正在使用以下代码：

```
Options +FollowSymLinks
RewriteEngine on
# News Pages
RewriteRule ^news/$ /news.php
RewriteRule ^news/(.*?)/$ /news.php?article=$1 
```

它适用于第一级 /news/ 但 /news/article-1/ 只加载 /news/ (news.php) 概述页面。/news.php?article=article-1 工作正常。

服务器正在运行 Apache 2.2.9，PHP 处于 CGI 模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:46:20.783

试试这样：

```
 RewriteRule ^news/(.*?)/?$ /news.php?article=$1 [L]
    RewriteRule ^news/?$ /news.php [L] 
```

[L] 在指令结束时停止服务器检查其他指令，如果当前一条匹配。

所以你先写更具体，然后再写更一般。

如果您的规则作为 .htaccess 中唯一的规则正常工作，那么对它们进行这样的组织会有所帮助。

/？- 这意味着 / 最后可以不存在或存在

# facebook - 使用纯 C# 发布 Facebook Feed 项目的权威指南

> ID：10502679
> 
> 赞同：0
> 
> 时间：2012-05-08T16:35:26.077
> 
> 标签：facebook, facebook-graph-api, facebook-wall

有没有人有一个明确的方式来发布到用户的墙上，只使用 .NET Framework 或 Silverlight？

此处已在 SO 上询问了源自人们尝试的问题，但我找不到对 Graph API 规范的完整、清晰的解释以及使用 WebClient 或 System.Net 中的一些类似类的简单示例。

我是否必须将所有提要项目属性作为查询字符串中的参数发送？我可以构造一个 JSON 对象来表示提要项目并将其发送（使用访问令牌作为唯一参数）吗？

我希望它不超过 5 行代码片段，否则，请指出 FB 文档中的规范。

谢谢你的帮助，

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:33:50.660

我不太了解 .net 或 silverlight，但 facebook api 适用于简单的 http 请求。所有不同的sdk（除了javascript）主要只是http请求的包装器，具有将访问令牌添加到所有请求的“功能”。

并非在所有请求中，参数都作为查询字符串发送，在某些 POST 请求中，您需要在请求正文（application/x-www-form-urlencoded）中发送它们，并且您不能将数据作为 json 发送。

如果您不喜欢[C# sdk ，您可以简单地创建一个以满足您的确切需求。](http://csharpsdk.org/)正如我所写的，您只需要包装请求，当然您可以有一个方法将 json 作为参数并将其分解为与请求一起发送的不同参数。

我会向您指出 facebook 文档，但您没有询问任何具体内容，因此除了[登录页面](http://developers.facebook.com/docs/)外，没有什么可以指出您的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:51:31.747

这取自我们如何发布到用户的墙上。我们将帖子的数据放在请求正文中（我认为我们发现这比在请求的查询部分中包含所有参数更可靠），它与 URL 编码的查询字符串具有相同的格式。

我同意该文档在解释如何与大量资源交互方面相当贫乏。通常我会查看文档以获取有关字段和连接的信息，然后使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)来了解如何构建请求。一旦我把它弄下来，就很容易用 C# 或其他方式实现。我使用的唯一 SDK 是 Facebook 的 Javascript SDK。我发现其他人（尤其是第 3 方）比滚动我自己的更复杂、错误或损坏。

```
private void PostStatus (string accessToken, string userId)
{
    UriBuilder address = new UriBuilder ();
    address.Scheme = "https";
    address.Host = "graph.facebook.com";
    address.Path = userId + "/feed";
    address.Query = "access_token=" + accessToken;

    StringBuilder data = new StringBuilder ();
    data.Append ("caption=" + HttpUtility.UrlEncodeUnicode ("Set by app to describe the app."));
    data.Append ("&link=" + HttpUtility.UrlEncodeUnicode ("http://example.com/some_resource_to_go_to_when_clicked"));
    data.Append ("&description=" + HttpUtility.UrlEncodeUnicode ("Message set by user."));
    data.Append ("&name=" + HttpUtility.UrlEncodeUnicode ("App. name"));
    data.Append ("&picture=" + HttpUtility.UrlEncodeUnicode ("http://example.com/image.jpg"));

    WebClient client = new WebClient ();
    string response = client.UploadString (address.ToString (), data.ToString ());
} 
```

# jquery - cc 许可归属地实现

> ID：10502686
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:36:00.127
> 
> 标签：jquery, fancybox

我正在为我父母的宾馆建立一个小型网站，我真的爱上了你的组件并想使用它。

我查看了许可证，发现必须明确放置归属。

我的问题是，怎么做？幻灯片中的水印是否足够？常见的归因方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T06:30:06.373

Fancybox v1.3.x 在[MIT 和 GPL](http://docs.jquery.com/Licensing)许可下获得许可。简而言之，只需将包含在文件顶部的版权声明留在`js`文件顶部就足够了。

另一方面，Fancybox v2.x 以两种许可形式分发：用于非商业项目的[Creative Commons Attribution-NonCommercial 3.0和](http://creativecommons.org/licenses/by-nc/3.0/)[两种类型的商业许可，](http://sites.fastspring.com/fancyapps/product/store)具体取决于您要使用的站点数量。在任何情况下，您都应始终将版权声明包含在下载的文件中。

如果您打算以与上述不同的方式使用它，请直接[联系](http://fancyapps.com/contact/)插件的作者。

# php - Wordpress 类别侧边栏

> ID：10502689
> 
> 赞同：0
> 
> 时间：2012-05-08T16:36:03.570
> 
> 标签：php, mysql, wordpress

在 word press 管理面板中有一个类别选择“帮助面板”，我正在尝试重新创建。但是我找不到它的代码，有人能指出我正确的方向吗？

![例子](../Images/d3688dc5e7e2cb8b97f7b081cc2de26a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:08:50.623

由 Wordpress 创建的实际类别框通常不被使用自定义 UI 的插件使用。但是，您可以模仿它的行为，而且您肯定使用 get_categories() 走在了正确的轨道上。如果您想获取所有类别，而不仅仅是具有帖子计数的类别，您需要这样称呼它：

```
<?php
$args = array(
'type'                     => 'post',
'orderby'                  => 'name',
'order'                    => 'ASC',
'hide_empty'               => 0, //<--IMPORTANT!!
'hierarchical'             => 1,
'taxonomy'                 => 'category',
'pad_counts'               => false );
$categories = get_categories($args);
?> 
```

'hide_empty' 是你所缺少的。一旦你想创建你的复选框，你会做这样的事情：

```
<form action="action.php" method="POST">
<?php
foreach($categories as $cat)
{
    echo '<input type="checkbox" name="categories[]" value="'.$cat->cat_ID.'" />';
    echo '<label>'$cat->name.'</label><br/>';
}
?>
<input type="text" name="user_input" value="" />
</form> 
```

您可以使用[自定义样式表](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts)为复选框设置样式，或者您可以应用标准样式表使用的相同标签和类，这将确保现有的 Wordpress 管理样式表相应地设置所有样式。

# css - 我应该只使用 CSS 样式的类吗？

> ID：10502696
> 
> 赞同：0
> 
> 时间：2012-05-08T16:36:25.113
> 
> 标签：css

我读了一篇文章，其中建议我们应该只在标记中使用类，并且只在需要从 javascript 引用它时使用 id（因为将函数附加到 id 更容易）

目前，当我有多个需要类似样式的元素时，我只使用类。然而这篇文章（我认为我读过 - 但没有参考）指出我们应该在整个过程中使用类

我会这样做：

```
<header id="banner"></header> 
```

建议是：

```
<header class="banner"></header> 
```

（即使每页只使用一次横幅）

这是新的“良好做法”吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:37:36.043

据我所知，您是正确的，当您需要设置多个元素和 ID 的样式时，您应该使用类，而您只需要设置一个唯一元素的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:39:33.370

我想你可能偶然发现了一篇关于[面向对象的 css](http://www.vanseodesign.com/css/object-oriented-css/)的文章。基本思想是您应该将样式视为一种通过类链接到您的标记的抽象。我发现它是一种让事情井井有条的好技术，但是，与所有技术一样，它并不是一个通用的硬性规则。我认为将样式链接到带有 ID 的标记没有问题，只要这最有意义。

真正难以定义的是“有意义”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:53:51.323

**ID 属性、定义和用法**

*id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。*

*id 属性最常用于指向样式表中的样式，并通过 JavaScript（通过 HTML DOM）来操作具有特定 id 的元素。*

在这里阅读更多信息[！](http://www.w3schools.com/tags/att_standard_id.asp)

**CLASS 属性、定义和用法**

*class 属性为元素指定一个或多个类名。*

*class 属性主要用于指向样式表中的类。但是，JavaScript 也可以使用它（通过 HTML DOM）来更改具有指定类的 HTML 元素。*

在这里阅读更多信息[！](http://www.w3schools.com/tags/att_standard_class.asp)

因此，您可以使用任何一个 Id 来设置您的 Class 的样式，只要知道该类可以在您的网页中的其他元素上重新使用，ID 必须始终是唯一的。

之所以说 Class 是应用 CSS 的最佳属性，是因为您可以拥有通用的类名称，然后在您的网页中大量使用，从而简化并减少编码时间:)

* * *

**简单的例子：**

**HTML**

```
<div id="theUniqueID">
  Hello!
</div>
<div id="theUniqueIDTwo">
  Hello Again!
</div> 
```

**CSS**

```
#theUniqueID {
  font-size: 15px;
  text-align: right;
}
#theUniqueIDTwo {
  font-size: 15px;
  text-align: right;
} 
```

**可以简化为：**

```
#theUniqueID, #theUniqueIDTwo {
  font-size: 15px;
  text-align: right;
} 
```

**并且可以像这样在整个文档中普遍使用：**

```
.format_01 {
  font-size: 15px;
  text-align: right;
} 
```

**有了 HTML，如：**

```
<div class="format_01">
  Hello!
</div>
<div class="format_01">
  Hello Again!
</div>
<div class="format_01">
  Hello Again and Again!
</div> 
```

* * *

**Ps：** 很抱歉回答过度，但这也让其他知识较少的人也可以学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:47:12.713

基本上，您应该将**id**用于唯一元素，这意味着如果您想在页面上保留一个不会出现在页面上两次的元素，那么您应该使用**id**并为一组具有相同样式的元素设置样式或保留一些元素在同一组中，您应该使用**class**。

但是请记住，您也可以将**class**用于单个 a 元素，但您不能将**id**用于页面上的多个元素。

例如，`getElementById`或`$('#idOfElement') (using jQuery)`返回单个元素，但`getElementsByClassName`或`$('.idOfElement') (using jQuery)`返回匹配元素的数组。因此，如果您在页面上有多个元素使用相同的 id，那么您将只获得具有该 id 的第一个元素，因此切勿将**id**用于多个元素。

# jquery - 如何使用 jquery ajax 将选中复选框的值发送到另一个页面

> ID：10502702
> 
> 赞同：3
> 
> 时间：2012-05-08T16:36:51.753
> 
> 标签：jquery, ajax, checkbox

我使用`$.get(...`语法通过 Jquery Ajax 发送我的表单数据。
我想知道如何发送选中复选框的值。
例如，我`$("#myinput").val()`用来将输入框值发送到我的 php 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:45:21.907

您可以使用`serialize()`或`serializeArray()`到您的表格。例子：

```
var data = $('yourform').serialize(); 
```

或者

```
var data = $('yourform').serializeArray(); 
```

然后将数据放入ajax

```
$.get('link.php',data,function(){...}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:52:41.380

我不知道你的 HTML 是什么样子的。这是一个通用的解决方案。您可以根据您的特定需求进行定制

假设你有一些这样的 HTML 标记

```
Item 11<input type="checkbox" id="chk1" value="11" class="chkItem"  /><br/>
Item 12<input type="checkbox" id="chk2" value="12" class="chkItem"  /><br/>
Item 14<input type="checkbox" id="chk4" value="14" class="chkItem"  /><br/>
<input type="submit" value="Save" id="btnSave" /> 
```

脚本是

```
$(function(){
   $("#btnSave").click(function(e){
        e.preventDefault();
        var items=$("input[type='checkbox']:checked").map(function () {
            return this.value;
        }).get().join(',');

        $.post("yoururl.php?data="+items,function(response){
         //alert(response);
        });        
   });           
}); 
```

上面的脚本将获取所有检查的输入元素，并使用逗号分隔的选定项目值构建一个字符串，并将其发送到查询字符串中。您可以在您的 php 文件中读取它并用逗号分隔并读取值。

# java - 正则表达式字符串修改

> ID：10502703
> 
> 赞同：2
> 
> 时间：2012-05-08T16:36:53.323
> 
> 标签：java, regex, oop

我有以下字符串，我想`MBRB1045T4G`用 Java 中的正则表达式过滤掉它。我将如何实现这一目标？

**细绳：**

```
<p class="ref">
<b>Mfr Part#:</b>
MBRB1045T4G<br>

<b>Technologie:</b>&nbsp;
    Tab Mount<br>

<b>Bauform:</b>&nbsp;
    D2PAK-3<br>

<b>Verpackungsart:</b>&nbsp;
    REEL<br>

<b>Standard Verpackungseinheit:</b>&nbsp;
    800<br> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:43:35.617

正如 Wrikken 正确所说，在一般情况下，正则表达式无法正确解析 HTML。但是，您似乎正在查看一个实际的网站并想要抓取一些内容。在这种情况下，假设 HTML 代码中的空格元素和格式不变，您可以使用如下正则表达式：

```
 Mfr Part#:</b>([^<]+)<br> 
```

并像这样收集第一个捕获组（`string`您的 HTML 在哪里）：

```
Pattern pt = Pattern.compile("Mfr Part#:</b>\s+([^<]+)<br>",Pattern.MULTILINE);
Matcher m = pt.matcher(string); 
if (m.matches())
    System.out.println(m.group(1)); 
```

# jquery - jquery 缩略图库 - 悬停/淡入淡出

> ID：10502705
> 
> 赞同：0
> 
> 时间：2012-05-08T16:36:59.173
> 
> 标签：jquery, hover, fade, rollover

我一直在努力寻找答案……我有一系列缩略图，当我翻阅它们时，我希望主图像（在单独的 div 中）更改为滚动的缩略图。我是编程新手，但是我对使用以下代码获得的基本功能感到满意：

```
$(document).ready(function() {
    var originalimg = $('.mainImage').attr('src');
    $(".subImage").hover(function() {
        var currentimg = $(this).attr('src');
        $('.mainImage').attr('src', currentimg);
    }, function() {
        $('.mainImage').attr('src', originalimg);
    });
});​ 
```

我最理想的是添加一些淡入/淡出效果。我确信有更好的方法来实现这一点，但如果有人可以更改我上面的代码以包含一些淡入淡出，我将不胜感激。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:09:41.700

通过链接，使用`fadeOut()`和`fadeIn()`

```
var originalimg = $('.mainImage').attr('src');
$(".subImage").hover(function() {
    var currentimg = $(this).attr('src');
    $('.mainImage')
        .stop()
        .fadeOut()
        .attr('src', currentimg)
        .fadeIn();
}, function() {
    $('.mainImage')
        .stop()
        .fadeOut()
        .attr('src', originalimg)
        .fadeIn();
});​ 
```

[演示](http://jsfiddle.net/FDpea/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:25:43.150

这应该可以防止任何闪烁或队列堆积：

```
var originalimg = $('.mainImage').attr('src');
$(".subImage").hover(function() {
    var currentimg = $(this).attr('src');
    $('.mainImage').fadeOut(function() {
        $('.mainImage').attr('src', currentimg).fadeIn();
    });
}, function() {
    $('.mainImage').fadeOut(function() {
        $('.mainImage').attr('src', originalimg).fadeIn();
    })
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/FDpea/2/)**。

# winapi - 使用 Win32，GetModuleBaseName() 和 GetModuleFileNameEx() 在使用有效句柄时失败，GetLastError() = 6

> ID：10502706
> 
> 赞同：0
> 
> 时间：2012-05-08T16:36:59.780
> 
> 标签：winapi

首先是一些简单的代码片段：

```
m_hProcessHandle = ::OpenProcess((PROCESS_QUERY_INFORMATION | PROCESS_CREATE_THREAD | PROCESS_DUP_HANDLE | PROCESS_VM_READ | PROCESS_VM_WRITE | PROCESS_VM_OPERATION), FALSE, m_dwProcessIdentifier);
if (NULL != m_hProcessHandle)
{
    if (FALSE != ::OpenProcessToken(m_hProcessHandle, (TOKEN_QUERY | TOKEN_IMPERSONATE | TOKEN_DUPLICATE), &m_hImpersonizationToken))
    {
        wchar_t wszFullExecutableFileName[MAX_PATH];
        if (0 == ::GetModuleBaseName(m_hProcessHandle, NULL, wszFullExecutableFileName, (sizeof(wszFullExecutableFileName)/sizeof(wchar_t))))
        {
            __DebugMessage(L"GetModuleBaseName() failed with GetLastError() = %d", ::GetLastError());
        }
        else
        {
            if (0 == ::GetModuleFileNameEx(m_hProcessHandle, NULL, wszFullExecutableFileName, (sizeof(wszFullExecutableFileName)/sizeof(wchar_t))))
            {
                __DebugMessage(L"GetModuleFileNameEx() failed with GetLastError() = %d", ::GetLastError());
            }
            else
            {
                m_strFullFileName = wszFullExecutableFileName;
            }
        }
    }
} 
```

[OpenProcess()](https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess)和[OpenProcessToken](https://docs.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) ()一样返回一个有效的句柄，但是当我调用后续的[GetModuleBaseName()](https://docs.microsoft.com/en-us/windows/win32/api/psapi/nf-psapi-getmodulebasenamea)和[GetModuleFileNameEx()](https://docs.microsoft.com/en-us/windows/win32/api/psapi/nf-psapi-getmodulefilenameexa)函数时，我得到[GetLastError()](https://docs.microsoft.com/en-us/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) = 6（句柄无效）。我在 Windows 7 上以管理员身份运行该代码。给出了什么？

干杯，GumbyTheBorg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-28T21:47:33.187

您必须以管理员身份运行此程序才能使其正常工作。我刚刚测试了它的工作原理，并且在每行之后 GetLastError() = 0，这意味着没有问题。

# vb.net - 禁用控件的单击处理程序

> ID：10502708
> 
> 赞同：1
> 
> 时间：2012-05-08T16:37:04.530
> 
> 标签：vb.net, winforms

如果控件是，ClickHandler 是一种工作方式`Enabled = False`吗？例如，显示一个带有“无法更改此数据”消息的消息框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:41:22.593

最快的方法：用带有 OnClick 处理程序的 0% 不透明度面板覆盖它，panel1.Width = btn1.Width、Height、Location。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-07T15:31:33.120

在许多情况下，例如文本字段，请考虑将它们设为只读而不是禁用

# spring - 测试 Spring 验证器消息

> ID：10502711
> 
> 赞同：0
> 
> 时间：2012-05-08T16:37:20.217
> 
> 标签：spring, validation, resources, junit

我有一个包含以下代码的 Spring 验证器。

```
errors.rejectValue("myFieldName", "errors.required", new Object[] { "My Field" }, "Field required"); 
```

我想测试`errors.required`消息是否被拾取。我一直无法找出如何。到目前为止，我在 jUnit 中拥有的是：

```
FieldError fieldError = errors.getFieldErrors().get(0);
assertEquals("myFieldName", fieldError.getField());
assertEquals("errors.required", fieldError.getCode());
//TODO: test that the message was picked up 
```

有谁知道如何获取完整的信息，包括它的论点等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:50:20.067

我设法找到了解决方案。

在我的 jUnit 测试中，我在`MessageSource`.

```
@Autowired
private MessageSource messageSource; 
```

然后我写了一个方便的方法。

```
private String getConfiguredMessage(FieldError fieldError) {
    return messageSource.getMessage(fieldError.getCode(), 
                                    fieldError.getArguments(), 
                                    Locale.US);
} 
```

使用这种方法，我可以找出配置的消息是什么。

```
assertEquals("My Field is required.", getConfiguredMessage(fieldError)); 
```

尽管此解决方案并没有真正从错误中“获取”消息，但它达到了它的目的。

希望这对将来的某人有所帮助。

# php - PHP中ArrayIterator、ArrayObject和Array的区别

> ID：10502719
> 
> 赞同：32
> 
> 时间：2012-05-08T16:37:52.730
> 
> 标签：php, arrays, arrayobject, arrayiterator

有人可以清楚地解释 PHP和PHP 在功能和操作方面`ArrayIterator`的根本区别吗？谢谢！`ArrayObject``Array`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-06-14T22:01:03.457

`Array`是原生的 php 类型。您可以使用 php 语言结构创建一个`array()`，或者从 php 5.4 开始`[]`

`ArrayObject`是一个`object`与数组完全一样的工作。这些可以使用`new`关键字创建

`ArrayIterator`就像`ArrayObject`，但它可以自我迭代。也使用创建`new`

* * *

**比较`Array`与 ( `ArrayObject`/ `ArrayIterator`)**

它们都可以使用 php 的数组语法，例如。

```
$array[] = 'foo';
$object[] = 'foo';
// adds new element with the expected numeric key

$array['bar'] = 'foo';
$object['bar'] = 'foo';
// adds new element with the key "bar"

foreach($array as $value);
foreach($object as $value);
// iterating over the elements 
```

但是，它们仍然是对象与数组，因此您会注意到

```
is_array($array); // true
is_array($object); // false

is_object($array); // false
is_object($object); // true 
```

大多数 php 数组函数都需要数组，因此在其中使用对象会引发错误。有很多这样的功能。例如。

```
sort($array); // works as expected
sort($object); // Warning: sort() expects parameter 1 to be array, object given in ...... 
```

最后，对象可以做你对对象的期望`stdClass`，即使用对象语法访问公共属性

```
$object->foo = 'bar'; // works
$array->foo = 'bar'; // Warning: Attempt to assign property of non-object in .... 
```

数组（作为本机类型）比对象快得多。另一方面，`ArrayObject`&`ArrayIterator`类定义了某些可以使用的方法，而数组没有这样的东西

* * *

**比较`ArrayObject`与`ArrayIterator`**

这两者之间的主要区别在于类的方法。

`ArrayIterator`实现`Iterator`接口，为它提供与元素迭代/循环相关的方法。`ArrayObject`有一个方法叫它`exchangeArray`与另一个交换它的内部数组。实现一个类似的东西`ArrayIterator`意味着要么创建一个新对象，要么循环遍历键 &`unset`一个接一个地设置它们，然后一个接一个地设置新数组中的元素。

接下来，由于`ArrayObject`无法迭代，因此当您在其中使用它时，`foreach`它会在内部创建一个`ArrayIterator`对象（与数组相同）。这意味着 php 创建了原始数据的副本，现在有 2 个具有相同内容的对象。这对于大型阵列将被证明是低效的。但是，您可以指定将哪个类用于迭代器，因此您可以在代码中使用自定义迭代器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-20T10:50:43.163

ArrayObject 和数组有些相似。仅仅是对象（或本机类型）的集合。他们有一些你可以调用的不同方法，但主要归结为同一件事。

但是，迭代器完全是另外一回事。迭代器设计模式是一种保护数组（使其仅可读）的方法。让我们看下一个例子：

你有一个有数组的类。您可以使用 addSomethingToMyArray 将项目添加到该数组。但是请注意，我们在将 item 实际添加到数组之前对其进行了一些操作。这可以是任何东西，但是让我们暂时假设为我们要添加到数组中的每个项目触发此方法非常重要。

```
class A
{
    private $myArray;
    public function returnMyArray()
    {
        return $this->myArray;
    }

    public function addSomethingToMyArray( $item )
    {
        $this->doSomethingToItem( $item ); 
        array_push( $item );
    }
} 
```

问题在于，您在此处通过引用传递数组。这意味着实际使用 returnMyArray 的类会获得真正的 myArray 对象。这意味着除了 A 之外的类可以向该数组添加内容，因此也可以更改 A 中的数组，而无需使用 addSOmethingToMyArray。但是我们需要做一些事情，记得吗？这是一个无法控制其自身内部状态的类的示例。

解决方案是迭代器。我们没有传递数组，而是将数组传递给一个新对象，该对象只能从数组中读取内容。最简单的迭代器是这样的：

```
<?php

class MyIterator{

    private $array;
    private $index;

    public function __construct( $array )
    {
        $this->array = $array;
    }

    public function hasNext()
    {
        return count( $this->array ) > $this->index;
    }

    public function next()
    {
        $item = $this->array[ $this->index ];
        this->$index++;

        return $item;
    }       
} 
```

?>

如您所见，我无法向给定数组添加新项目，但我确实可以像这样读取数组：

```
while( $iterator->hasNext() )
    $item = $iterator->next(); 
```

现在又只有一种方法可以将项目添加到 A 中的 myArray，即通过 addSomethingToArray 方法。这就是迭代器，它有点像数组周围的外壳，提供称为封装的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:47:38.387

*   [数组](http://www.php.net/manual/en/language.types.array.php)

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。由于数组值可以是其他数组，因此树和多维数组也是可能的。

*   [ArrayObject 类](http://www.php.net/ArrayObject)

> 此类允许对象作为数组工作。

*   [ArrayIterator 类](http://www.php.net/manual/en/class.arrayiterator.php)

> 此迭代器允许在迭代数组和对象时取消设置和修改值和键。
> 
> 当您想多次迭代同一个数组时，您需要实例化 ArrayObject 并让它创建 ArrayIterator 实例，这些实例通过使用 foreach 或手动调用其 getIterator() 方法来引用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T09:08:19.870

`array`是 PHP 中的八种原始类型之一。尽管它带有很多内置的实用功能，但它们都是程序化的。

`ArrayObject`和都`ArrayIterator`允许我们在面向对象程序（OOP）中使数组成为一等公民。

`ArrayObject`和之间的区别在于`ArrayIterator`，由于`ArrayIterator`实现了`SeekableIterator`接口，你可以`$myArray->seek(10);`用`ArrayIterator`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-14T03:39:34.943

编辑：忘记在我的答案中解决普通数组..

在您阅读所有这些之前，如果您是 php 新手并且不想做任何棘手的事情，只是存储值以供以后使用，那么只需使用数组原始类型。

```
$data = [1,2,3,4,5];
//or
$data = array(1,2,3,4,5); 
```

数组是入口点，你应该先习惯使用它们，然后再考虑使用其他的。如果您不了解数组，那么您可能不会了解使用其他数组的好处。（有关数组的教程，请参见[https://www.w3schools.com/php/php_arrays.asp](https://www.w3schools.com/php/php_arrays.asp)。）

否则继续阅读...

我有同样的问题，来到这里后决定花一些时间测试它们，这是我的发现和结论......

首先让我们澄清一下我立即测试的其他人所说的一些事情。

ArrayObject 和 ArrayItterator 不保护数据。两者仍然可以在 for-each 循环中通过引用传递（例如，参见底部）。

两者都为 is_object() 返回 true，都为 is_array() 返回 false，并且都允许将值作为数组直接访问，而不提供对添加值等的保护，并且两者都可以通过引用传递，从而允许在foreach 循环。

```
$array = new ArrayIterator();
var_dump(is_array($array)); // false
var_dump(is_object($array)); // true
$array[] = 'value one';
var_dump($array[0]);//string(9) "value one"

$array = new ArrayObject();
var_dump(is_array($array)); // false
var_dump(is_object($array)); // true
$array[] = 'value one';
var_dump($array[0]);//string(9) "value one" 
```

可以在它们中的任何一个可用的功能中看到最大的区别。

ArrayIteroator 具有遍历值所需的所有功能，例如 foreach 循环。（foreach 循环将调用 rewind(),valid(),current(),key() 方法）请参阅：[https](https://www.php.net/manual/en/class.iterator.php) : //www.php.net/manual/en/class.iterator.php概念（较低级别的类文档）。

[![箭头函数的智能感知建议](../Images/261f8d8738a4af1148cccbfbcaf8ca4c.png)](https://i.stack.imgur.com/QDG83.png)

虽然 ArrayObject 仍然可以迭代并以相同的方式访问值，但它不提供对指针函数的公共访问。

[![数组对象的智能感知](../Images/5c40d27d38fe2f550f8cfa83c5cf00e5.png)](https://i.stack.imgur.com/9X1ip.png)

Object 有点像在 ArrayItterator 对象周围添加一个包装器，`public getIterator ( void ) : ArrayIterator`它可以促进内部值的遍历。

如果您确实需要添加的功能，您始终可以从 ArrayObject 获取 ArrayItterator。

如果您有自己的伪 foreach 循环以奇怪的方式遍历并且想要更好的控制而不是仅仅开始结束遍历，则 ArrayItterator 是最佳选择。

当被 foreach 循环迭代时，ArrayItterator 也是覆盖默认数组行为的好选择。例如..

```
//I originally made to this to solve some problem where generic conversion to XML via a foreach loop was used,
//and I had a special case where a particular API wanted each value to have the same name in the XML.
class SameKey extends ArrayIterator{

    public function key()
    {
        return "AlwaysTheSameKey";
    }
}

$extendedArrayIterator =  new SameKey(['value one','value two','value three']);
$extendedArrayIterator[] = 'another item added after construct';
//according to foreach there all the keys are the same
foreach ($extendedArrayIterator as $key => $value){
    echo "$key: ";//key is always the same
    var_dump($value);
}
//can still be access as array with index's if you need to differentiate the values
for ($i = 0; $i < count($extendedArrayIterator); $i++){
    echo "Index [$i]: ";
    var_dump($extendedArrayIterator[$i]);
} 
```

如果您对迭代器有更高级别的复杂性，例如，ArrayObject 可能是一个不错的选择......

```
//lets pretend I have many custom classes extending ArrayIterator each with a different behavior..
$O = new ArrayObject(['val1','val2','val3']);
//and I want to change the behavior on the fly dynamically by changing the iterator class
if ($some_condition = true) $O->setIteratorClass(SameKey::class);
foreach ($O as $key => $value){
    echo "$key: ";//AlwaysTheSameKey:
    var_dump($value);
} 
```

一个示例可能是更改同一数据集的输出，例如拥有一组自定义迭代器，它们在遍历同一数据集时将以不同格式返回值。例如...

```
class AustralianDates extends ArrayIterator{
    public function current()
    {
        return Date('d/m/Y',parent::current());
    }
}
$O = new ArrayObject([time(),time()+37474,time()+37845678]);
//and I want to change the behaviour on the fly dynamically by changing the iterator class
if ($some_condition = true) $O->setIteratorClass(AustralianDates::class);
foreach ($O as $key => $value){
    echo "$key: ";//AlwaysTheSameKey:
    var_dump($value);
} 
```

显然，可能有更好的方法来做这种事情。

简而言之，这些是我可以看到的主要主要优势差异。

ArrayItorator - 控制或扩展和覆盖遍历行为的较低级别的能力。

VS

ArrayObject - 一个数据容器，但能够更改 ArrayIterator 类。

您可能还想检查其他差异，但我想在您广泛使用它们之前，您不会完全掌握它们。

看来这两个对象都可以在 foreach 中通过引用来使用，但在通过 ArrayObject 使用自定义迭代器类时则不能。

```
//reference test
$I = new ArrayIterator(['mouse','tree','bike']);
foreach ($I as $key => &$value){
    $value = 'dog';
}
var_dump($I);//all values in the original are now 'dog'

$O = new ArrayObject(['mouse','tree','bike']);
foreach ($O as $key => &$value){
    $value = 'dog';
}
var_dump($O);//all values in the original are now 'dog'

$O->setIteratorClass(SameKey::class);
foreach ($O as $key => &$value){//PHP Fatal error:  An iterator cannot be used with foreach by reference
    $value = 'dog';
}
var_dump($O); 
```

**建议/结论**

使用数组。

如果你想做一些棘手的事情，我建议总是使用 ArrayIterator 开始，如果你想做一些只有 ArrayObject 才能做的特定事情，才继续使用 ArrayObject。

考虑到 ArrayObject 可以使用您在此过程中创建的任何自定义 ArrayIterators，我说这是要采用的逻辑路径。

希望这对您有所帮助，就像它帮助我研究它一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-16T07:18:20.690

[Iterator](https://en.wikipedia.org/wiki/Iterator)是一个对象，它使程序员能够遍历容器，特别是列表。各种类型的迭代器通常通过容器的接口提供。

和之间没有太大区别`ArrayObject`，`Array`因为它们代表相同的事物，尽管使用不同的对象类型。

`ArrayIterator`是一个迭代`Array-like`对象的迭代器，这包括所有实现的对象`ArrayAcess`和本机`Array`类型。事实上，当你`foreach`遍历一个数组时，PHP 会在内部创建`ArrayIterator`来进行遍历和转换你的代码，让它看起来就像输入了这个，

```
for( $arrayIterator->rewind(); $arrayIterator->valid(); $arrayIterator-
>next())
{    $key = $arrayIteartor->key();
     $value = $arrayIterator->current();
} 
```

所以你可以看到，每个集合对象都有一个迭代器，除了你定义的集合，你需要定义你自己的迭代器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-06T19:40:40.430

数组是`array`类型，`ArrayObject`并且`ArrayIterator`是内置类，它们的实例是`object`类型，在语法和使用级别上*部分*表现*得像数组。*

对于这些类，我认为可以从它们实现的接口中获得快速的想法：

```
class ArrayObject implements IteratorAggregate, ArrayAccess, Serializable, Countable { 
```

```
class ArrayIterator implements SeekableIterator, ArrayAccess, Serializable, Countable { 
```

两个类都实现：

*   `ArrayAccess`，因此它们支持数组语法来访问值
*   `Countable`，所以它们支持值的计数，就像数组一样
*   `Iterator`（虽然以不同的方式），所以它们适合`iterable`类型并且可以循环使用`foreach`等等

一种看待它的方法是，类要*像*数组一样工作会遇到很多麻烦。关键是作为类，它们可以扩展和定制。

它们本质上也可以与通常期望`Iterator`的任何代码互操作，因此基本用例就是这样 - 包装以将数组数据提供给迭代器代码。

所以简而言之`ArrayObject`，`ArrayIterator`是*Do It Yourself*数组（两者之间存在一些实现差异）。它们的实例（部分）表现得像`array`类型，但作为类它们是可扩展的，作为`Iterator`实现者它们可以与需要的代码互操作。

除非您*需要*深度自定义的行为和/或`Iterator`互操作性，否则坚持使用`array`类型可能是介于两者之间的方式。

值得注意的是，还有一些*集合*的实现，旨在通过更友好的抽象来提供类的好处。

# java - 当前两个已经处于基子类关系时，如何继承第三个类中的两个类？

> ID：10502723
> 
> 赞同：1
> 
> 时间：2012-05-08T16:38:02.970
> 
> 标签：java, immutability, delegation

假设我想将 A 类和 B 类继承到 C 类（这里 B 也扩展了 A）。我很清楚，虽然我永远不能直接在 Java 中做到这一点，但是通过使用 Mixin 继承（链接：[http://csis.pace.edu/~bergin/patterns/multipleinheritance.html）](http://csis.pace.edu/~bergin/patterns/multipleinheritance.html)，即使用一个接口另一个作为基类并在内部使用委托我可以做到，当 A 和 B 是不相关的类时。

*当 A 和 B 有自己的父子并且我需要在 C 中继承它们时，我该如何做同样的事情？*

仅供参考，我正在尝试做同样的事情来实现 A 类和 B 类的不变性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:02:43.143

如果您`class B`已经 extends `class A`，那么`class C`extend`class B`已经可以解决问题了。通过扩展，`class B`您还可以从中获得所有`class A`尚未被特别覆盖的功能`class B`

大概你最终会得到：

```
class A
{
    public string hello()
    {
        return "Hello, World!";
    }
}

class B extends A
{
}

class C extends B
{
}

C foo = new C();
foo->hello(); // "Hello World!" because it is defined in A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:24:13.657

您为什么不将 A 类设为抽象类，然后在 B 和 C 中扩展它。让您的常用方法作为抽象类（或可能已定义）位于 A 中，然后您可以在具体类中覆盖它们。

# image-processing - Symfony2：AvalancheImagineBundle 和相关网址

> ID：10502724
> 
> 赞同：0
> 
> 时间：2012-05-08T16:38:12.537
> 
> 标签：image-processing, symfony

我在一个项目中使用 symfony v2.0.7 和 AvalancheImagineBundle。我配置了所有文件，例如[https://github.com/avalanche123/AvalancheImagineBundle/blob/master/README.md](https://github.com/avalanche123/AvalancheImagineBundle/blob/master/README.md) 但图像缓存不起作用，并且尚未创建缓存目录。图像源也在 src 的开头显示开发控制器：

```
<img src="/app_dev.php/media/cache/my_thumb/uploads/images/logo.jpg"> 
```

我想它应该没有开发控制器：

```
<img src="/media/cache/my_thumb/uploads/images/logo.jpg"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:27:07.397

该文件夹是在您的

```
web/media 
```

你的项目

当然路径会改变，具体取决于您是否在开发环境中调用它

[http://www.myproject.com/app_dev.php](http://www.myproject.com/app_dev.php)

或 prod 环境

[http://www.myproject.com/app_dev.php](http://www.myproject.com/app_dev.php)

# ios - wait_fences：未能收到回复：10004003 和选项卡中的导航控制器

> ID：10502726
> 
> 赞同：2
> 
> 时间：2012-05-08T16:38:15.730
> 
> 标签：ios, ipad, wait-fences

我玩得很开心

```
 infamous wait_fences: failed to receive reply: 10004003 
```

iPad 应用程序上的控制台消息。我徒劳地搜索了 Stack Overflow 的解决方案，但大多数答案似乎都在谈论文本字段等。

我的应用程序有四个选项卡。每个选项卡中都有一个导航控制器。启动时，每个选项卡都有一个显示网格的视图。（René Sprotte 的 MMGridView）。当您单击网格时，它会以通常的方式通过压入堆栈来显示一个新网格：

```
[self.navigationController pushViewController:c animated:YES]; 
```

我的问题：在特定选项卡的第一个视图上，我可以整夜旋转，并且视图旋转得很好。但是，一旦我将另一个推入堆栈，旋转时就会出现可怕的 wait_fences 控制台错误。并且有一个很大的停顿。然后它旋转。如果我对同一个网格多做几次，我可能会导致它崩溃。

显然我遗漏了一些明显的东西。是什么赋予了？我怎样才能解决这个问题？

# ios - 在 UISegmentedController 中隐藏段

> ID：10502729
> 
> 赞同：1
> 
> 时间：2012-05-08T16:38:17.817
> 
> 标签：ios, user-interface

我正在寻找一种在 UISegmentedController 中隐藏段的方法。我可以将宽度设置为 0，但我在该段曾经所在的边界处出现了一个奇怪的凸起。任何想法如何设置isHidden？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:50:45.147

那么有多种方式，

1）您可以根据您的要求删除索引处的段，或者您可以在根据条件创建段时设置**numberOfSegments 。**

2）您可以根据项目创建细分

例如：

```
NSArray *itemArray = [NSArray arrayWithObjects: @"One"];

if(mychoice==2) {
  //add two more objects to itemArray
}else if (mychoice==3) {
  //add three more objects to itemArray
}

UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray]; 
```

因此，您想在这种情况下根据**某些条件**隐藏某些特定索引，您只需更改 itemArray 的项目；

3）您可以设置启用/禁用特定索引而不是隐藏；

# iphone - 如何让 UITableView 响应 viewDidRotate？

> ID：10502730
> 
> 赞同：0
> 
> 时间：2012-05-08T16:38:24.727
> 
> 标签：iphone, ios, ipad

我有一个继承自 UITableViewContoller 的 UIViewController：

```
@interface AllProductsViewController : UITableViewController 
```

如果设备已旋转，我需要重新绘制表格单元格。看起来我无法访问 UITableViewController 中的 viewDidRotate 那么在这种情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:42:39.483

[UITableViewController 继承自 UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)，所以是的，您可以访问这些方法。

# java - 你能在 Java 中检测到 Mac Spaces 吗？

> ID：10502731
> 
> 赞同：8
> 
> 时间：2012-05-08T16:38:27.957
> 
> 标签：java, macos, spaces, virtual-desktop

我有一个主要为 Mac 构建的 java 应用程序。我需要能够做以下三件事之一：

1.  让我的应用程序始终遵循当前空间。这意味着，如果我在桌面 2 上并启动我的应用程序，然后我切换到桌面 3，我的应用程序将自动在桌面 3 上可见。这相当于右键单击 Dock 中的应用程序图标，选择选项，然后选择所有桌面。如果我能以某种方式使其成为我的应用程序的默认行为，而无需用户操作，那就太好了！

2.  捕获特定空间的屏幕。我目前使用 Robot 类进行屏幕截图。如果有一种方法可以指定要捕获的空间，而不仅仅是当前空间，那就太好了！

3.  至少能够检测到是否离开当前空间。

我开始倾向于这两种都不可能。但是，如果您可以提供任何帮助或可能的解决方法，那就太棒了！

我也玩过 GraphicsEnvironment、GraphicsDevice、GraphicsConfiguration，但没有运气。它不会返回有关 Mac 的虚拟桌面（空间）的任何信息。

让事情变得困难的是我试图不惜一切代价避免使用特定于平台的代码！我知道我可以使用 JNI 来完成这个，或者 java-apple 扩展中可能有一些东西。但目前，我使用单个代码分支并为 Mac 和 Windows 构建。我试图避免两个平台都有两个单独的构建和二进制文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T23:52:52.560

除非您正在编写本机代码并使用 JNI，否则答案是否定的。Java 的关键设计特性之一是它与操作系统无关。您所要求的是*非常*特定于Mac OS X 的。我在 Apple Java Extensions 中也没有看到任何帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T00:11:48.223

不，据我所知，Java 对 Spaces 没有任何特殊支持，因此您需要使用特定于平台的本机代码。然而，JNI——尽管它很丑——不是你唯一的选择。您可以改用[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)，它对程序员更友好，也更容易调试。

在您的应用中，您可以检测平台。如果它是您为其编写了特定于平台的代码的平台，则可以执行该代码。如果没有，您可以回退到默认的纯 Java 实现。

# javascript - HTML 文本溢出省略号检测。再次

> ID：10502742
> 
> 赞同：1
> 
> 时间：2012-05-08T16:39:36.553
> 
> 标签：javascript, css

有一个元素实现了 Label 具有指定宽度的一行。所有不适合裁剪的内容，并放置在行尾点处。示例代码： http: [//jsfiddle.net/raHEb/7/](http://jsfiddle.net/raHEb/7/) 实际上问题是识别文本是否完全适合元素，或者被截断。这个例子在IE9、IE8下运行良好，但在FF、Chrome、Safari、Opera中的结果不太准确，可以看出，如果窗口是逐渐开始变窄的例子，文本会先被剪切，然后只有这样才会变红。也就是说，文本可能会被截断，并且定义它的函数返回 false。

Christian Varga 给出的解决方案不太正确，见：http: [//jsfiddle.net/cgzW8/20/](http://jsfiddle.net/cgzW8/20/) 平滑调整窗口大小，缩小窗口。在浏览器中：Opera、Chrome、Safari、IE7、FF 字段“文本”会立即被剪切，然后才会变成红色。

# php - 我收到此错误：

> ID：10502747
> 
> 赞同：-6
> 
> 时间：2012-05-08T16:39:52.200
> 
> 标签：php, html, parsing, syntax

收到此错误：解析错误：语法错误，意外的 T_VARIABLE，期待 ',' 或 ';' 在第 16 行的 C:\wamp\www\test\seta2.php

我错了吗

```
 <html>
            <head>
            <title>My First PHP Page</title>
            </head>
            <body>
            <?php
            $grting = "Wellcome to php";
            echo "Hello World! ";
            echo "Hello World! ";
            echo "Hello World! ";
            echo "Hello World! ";
            echo "Hello World! ";
            echo ($grting)

            $con = mysql_connect('localhost','root','');
             if (!$con)
               {
               die('Could not connect: ' . mysql_error());
               }
            ?>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:40:45.387

您缺少一个分号：

```
echo ($grting) 
```

应该

```
echo ($grting); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:40:48.080

你在`;`这里 不见了

```
echo ($grting); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:40:49.080

结尾没有分号`echo ($grting)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:40:55.227

你缺少一个`;`after `echo ($grting)`。括号是不必要的，并且可能对您隐藏了错误的原因。

# c#-4.0 - C# 中可序列化方法中的 SecurityPermission

> ID：10502750
> 
> 赞同：7
> 
> 时间：2012-05-08T16:39:59.520
> 
> 标签：c#-4.0, serialization, attributes

在 Serializable 类中使用 SecurityPermission 的重要性是什么？

在 [Microsoft's Site][1] 上的一篇文章中，他们建议您编写一个 Serializable 类，如下所示：

```
[Serializable]
public class PleaseSaveMe : ISerializable
{
    public readonly int Age;
    public readonly string Name;
    public int KarateSkills;

    public PleaseSaveMe(int Age, string Name)
    {
        this.Age  = Age;
        this.Name = Name;
    }

    // Serialization Methods
    protected PleaseSaveMe(SerializationInfo info, StreamingContext context)
    {
        Age = info.GetInt32("Age");
        Name = info.GetString("Name");
        KarateSkills = info.GetInt32("KarateSkills");
    }

    [SecurityPermission(SecurityAction.LinkDemand, Flags=SecurityPermissionFlag.SerializationFormatter)]
    void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("Age", Age);
        info.AddValue("Name", Name);
        info.AddValue("KarateSkills", KarateSkills);
    }
} 
```

但是在 SecurityAction.LinkDemand 的文档中，它明确表示不要在 .NET 4.0 中使用它（这是我正在使用的）。我应该改用什么？那个属性甚至是必要的吗？

威廉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T18:14:20.110

好吧，使用 [Serializable] 属性，您明确允许代码弄乱您的私人部分。如果没有安全属性，在您的进程中运行的任何代码都可以创建您的类的一个实例，该实例是从您的序列化代码不一定保存的数据中反序列化的。可能会创建一个处于不一致状态的类的对象，因此可能会被利用。

使用该属性，您可以明确拒绝您不太信任的代码来执行此操作。这当然是一件好事。

是的，CAS 在 .NET 4 中已被弃用，主要是因为很多程序员都有像您这样的基本问题。CAS 绝对难以理解，而难以理解的安全性通常是不安全的。它被沙盒模型取代，MSDN 文章[在这里](http://msdn.microsoft.com/en-us/library/bb763046.aspx)。背景杂志文章[在这里](http://msdn.microsoft.com/en-us/magazine/ee677170.aspx)。通常，只有当您允许在您的进程中加载​​来自您无法控制或信任的来源的代码时，您才会担心这一点。想想插件或程序集的安全存储位置不够安全。

# visual-studio - 如何将 Metro 风格应用程序中的图像绑定到二进制图像？

> ID：10502754
> 
> 赞同：0
> 
> 时间：2012-05-08T16:40:06.317
> 
> 标签：visual-studio, xaml, windows-8, windows-runtime, winrt-xaml

我创建了一个 GridView 应用程序，我想将 GridView 中的图像绑定到我从 Web 服务获取的值，我将图像作为字符串（二进制）接收

我使用 C# 编程语言和 Sql Server 数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:44:03.553

您需要从 Web 服务中获取一个列表，将其转换为基于源列表指定 UriSource 的 BitmapImage 对象列表，并将该列表绑定到 GridView.ItemsSource。然后将 GridView.ItemTemplate/DataTemplate 设置为将其 Source 绑定到集合中的 BitmapImage 的 Image。

您可能希望您的 Web 服务与 SQL Server 对话——我想您可以使用 ADO.NET、Entity Framework 或其他类似的东西。

# mysql - 使用 InfiniDB 创建表的问题

> ID：10502755
> 
> 赞同：4
> 
> 时间：2012-05-08T16:40:10.467
> 
> 标签：mysql, sql, infinidb

我正在尝试在 InfiniDB 中创建此表：

```
CREATE TABLE dimension.date (
  date_id int(8), -- 20120512
  `date` date, -- 2012-05-12
  day tinyint, -- 12
  day_of_week tinyint, -- 6 (sunday being 0)
  weekday varchar(10), -- Saturday
  week tinyint,
  month tinyint,
  month_name varchar(20),
  quarter tinyint,
  year smallint
) ENGINE=infinidb; 
```

它给我提供了这个错误：

> 错误代码：138。InfiniDB 不支持语法或数据类型。请查看 InfiniDB 语法指南以了解支持的语法或数据类型。

然而，可以毫无问题地创建此表：

```
CREATE TABLE dimension.time (
  time_id smallint(4),
  time_12 char(4), -- e.g. 12:15
  time_24 char(4), -- e.g. 00:15
  hour tinyint,
  minute tinyint,
  period char(2) -- AM or PM
) ENGINE=infinidb; 
```

我什至尝试创建它，但它产生了与上面相同的错误：

> CREATE TABLE dimension.date (date_id int(8)) ENGINE=infinidb;

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T20:39:18.803

如果您尝试，InfiniDB 无法创建名为“日期”的字段

```
 CREATE TABLE dimension.date (
      date_id int(8), -- 20120512
      date_ date, -- 2012-05-12
      day tinyint, -- 12
      day_of_week tinyint, -- 6 (sunday being 0)
      weekday varchar(10), -- Saturday
      week tinyint,
      month tinyint,
      month_name varchar(20),
      quarter tinyint,
      year smallint
    ) ENGINE=infinidb; 
```

和

```
CREATE TABLE dimension.`date_` (date_id int(8)) ENGINE=infinidb; 
```

一切都必须正常工作。

# google-api - 删除指向 Google 资源的共享链接

> ID：10502756
> 
> 赞同：1
> 
> 时间：2012-05-08T16:40:20.710
> 
> 标签：google-api, google-docs-api

作为[对此](https://stackoverflow.com/questions/7445837/google-api-documentlist-create-a-shared-link)的跟进，当我建立共享链接后，如何删除对文档的访问权限？

我会假设它是这样的（我将角色设置为“无”），但这不起作用：

```
POST /feeds/default/private/full/<resource_id>/acl
GData-Version: 3.0
Authorization: OAuth <access_token>

<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>
<category scheme='http://schemas.google.com/g/2005#kind'
 term='http://schemas.google.com/acl/2007#accessRule'/>
  <gAcl:withKey key='dummy_key'>
     <gAcl:role value='none'/>
  </gAcl:withKey>
  <gAcl:scope type='default'/>
</entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:59:08.573

您必须向 ACL url 发送 DELETE 请求，如[https://developers.google.com/google-apps/documents-list/#removing_sharing_permissions中所述](https://developers.google.com/google-apps/documents-list/#removing_sharing_permissions)

# ms-access-2007 - 如何摆脱字符串中的零“0”数字？

> ID：10502759
> 
> 赞同：1
> 
> 时间：2012-05-08T16:40:42.150
> 
> 标签：ms-access-2007

之前：Johnson0，伊冯娜

之后：约翰逊，伊冯娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:51:53.743

Access 的字符串函数可以在[http://www.techonthenet.com/access/functions/string/replace.php找到](http://www.techonthenet.com/access/functions/string/replace.php)

在您的示例中，代码如下

```
Replace("Johnson0", "0", "") 
```

将为特定的字符串解决问题`Johnson0`。如果您只需要删除最后一个字符的零，请使用上面链接中描述的附加参数`start`和`count`参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:54:32.627

您可以尝试执行以下查询..

```
UPDATE table set 
       columnName = REPLACE(columnName,'0','') 
WHERE columnName LIKE "%0%"; 
```

这会将所有出现的“0”替换为“”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T18:10:47.663

您提交的答案阐明了您的要求。基于此，如果您的 Access 版本为 2000 或更高版本，则无需创建自定义函数。您可以使用该`Replace()`函数获得相同的结果。

```
MsgBox Replace("Jonson0, Yvonne", "0,", ",") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:53:10.867

一种方法是创建自定义函数

*   有关示例，请参见[http://www.techonthenet.com/access/functions/misc/alphanumeric.php 。](http://www.techonthenet.com/access/functions/misc/alphanumeric.php)你可以做类似的事情，但在循环中你只会保留字母字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T17:28:56.293

```
Public Sub xxx()
MsgBox RemoveStr0("Jonson0, Yvonne")
End Sub

Public Function RemoveStr0(sString As String) As String
    Dim ipos As Long, sTemp As String
    ipos = InStr(1, sString, "0,")
    sTemp = Mid$(sString, 1, ipos - 1)
    sTemp = sTemp & Mid$(sString, ipos + 1)
    RemoveStr0 = sTemp
End Function 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-08T16:46:12.840

如果您可以将其拉出到 java 或其他 OO 语言，您可以使用正则表达式进行匹配。

# django - url 的 url-tag 包括

> ID：10502769
> 
> 赞同：0
> 
> 时间：2012-05-08T16:41:05.880
> 
> 标签：django, url, django-templates

我使用文档[中的 set_language 重定向视图](https://docs.djangoproject.com/en/1.3/topics/i18n/internationalization/#the-set-language-redirect-view)表单。

网址.py

```
urlpatterns += patterns('',
    (r'^i18n/', include('django.conf.urls.i18n')),
) 
```

模板：

```
<form action="/i18n/setlang/" method="post">
{% csrf_token %}
<input name="next" type="hidden" value="{{ redirect_to }}" />
<select name="language">
{% get_language_info_list for LANGUAGES as languages %}
{% for language in languages %}
<option value="{{ language.code }}">{{ language.name_local }} ({{ language.code }})</option>
{% endfor %}
</select>
<input type="submit" value="Go" />
</form> 
```

用 url-template-tag 替换操作属性“/i18n/setlang/”的正确语法是什么？

编辑：

我在包含中找到了正确的 url（感谢 Daniel！）：

```
<form action="{% url django.views.i18n.set_language %}" method="post"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:13:00.853

正如[文档所说](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)，您可以输入视图的完整路径作为`{% url %}`参数

```
{% url django.views.i18n.set_language %} # quote or unquote based on your Django version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:59:07.853

您不关心包含的 URL，您关心包含内的 URL。您应该查看代码或文档`django.conf.urls.i18n`以找到`setlang`您感兴趣的 URL，并使用该名称。

# php - 导致 PHP 抛出“无法打开流：没有这样的文件或目录”的网络计时问题

> ID：10502772
> 
> 赞同：1
> 
> 时间：2012-05-08T16:41:15.770
> 
> 标签：php, .net, file-upload

我们有三台运行 PHP 邮件应用程序的邮件服务器。我们有一个在单独的服务器上运行的 .NET 作业，它从 facebook 上传联系人照片，将它们存储在 NAS 上的临时位置，然后调用 PHP 邮件应用程序告诉它将图像从临时位置移动到联系人记录中。

这项工作没有代码更改，运行良好，我们只有一个邮件服务器，临时文件存储在本地。现在我们转移到负载平衡配置，将临时文件放在 NAS 盒子上，出现了奇怪的时间问题。

在我们的 .NET 应用程序中，下载照片后，在将请求发送到我们的邮件应用程序之前，我们获取一个`FileInfo`对象并检查文件是否存在，以确保确定。然后我们将请求发送到 PHP，它现在间歇性地抛出：`failed to open stream: No such file or directory`

但是，如果在检查`fi.Exists`.NET 之后，在将请求发送到 PHP 之前，我们输入了一个`Thread.Sleep(n)`错误减少。睡眠时间越长，PHP 说文件不存在的频率就越低。

所以该文件存在，但由于某种原因，如果我们在下载后过早访问它，PHP 会认为它不存在。

该代码包括检查文件是否已完全下载并且未标记为只读。

任何想法可能导致此问题？

```
public void Save(string tempPath, string username, string password, bool deleteSrc, string merakController = "", string fileNamePrefix = "")
    {
        FileInfo fi = new FileInfo(tempPath);
        if (fi.Exists)
        {
            Name = (fileNamePrefix ?? string.Empty) + fi.Name;
            FileSize = fi.Length;
            TimeStamp = fi.LastWriteTimeUtc;
            string path = fi.FullName;

            if (string.IsNullOrEmpty(Type))
                throw new Exception("Attachment Type not set");

            IceWarpGroupware_Http gwh = new IceWarpGroupware_Http(username, password);
            string parameters = string.Format("AttName={0}&AttType={1}&AttDesc={0}&AttSize={2}&AttTime={3}", Name, Type, FileSize, Time);

            fi.Refresh();
            if (fi.Length != FileSize)
                throw new Exception("It was still downloading?");//this has never been thrown, so thats not it
            if (fi.IsReadOnly)
                throw new Exception("read only"); //again, never hit, so thats not it

            //adding this line makes it work 100% of the time -- reducing the sleep time makes it start to throw "failed to open stream: No such file or directory" intermittently
            System.Threading.Thread.Sleep(15000);

            bool result = gwh.AddAttachment(m_oid, path, parameters, string.Empty, merakController);
            if (!result)
                throw new Exception("Unable to add attachment \"" + Name + "\"");

            try
            {
                if (deleteSrc)
                    fi.Delete();
            }
            catch { }
        }
        //else
        //  throw new Exception("Temp file not found");
    } 
```

# php - Wordpress - 定义 Peramlink 并在 functions.php 中的 URL 中调用它

> ID：10502776
> 
> 赞同：0
> 
> 时间：2012-05-08T16:41:27.540
> 
> 标签：php, wordpress

是否可以使用以下方式在functions.php中定义WordPress永久链接：

```
<?php $permalink = the_permalink;?> 
```

其中“the_permalink”使用内置的 WordPress 函数来获取博客的永久链接，然后`$permalink`在 functions.php 中进一步使用，例如，带有图像 URL：`<img src="'.$permalink.'/images/image1.png'"/>`

我只需要将 Peramlink 拉入 functions.php 以便在文件中进一步使用，就像上面的示例一样。要么 要么`the_permalink`会`bloginfo('template_directory')`很好用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:03:39.520

您可以在函数中传递 ID ...例如 yourFunction($id) ，然后在实际函数中使用 get_permalink($id) 。

通常 the_permalink 用于您想要显示和格式化永久链接的情况，而 get_permalink 允许您将其传递给变量。

[http://codex.wordpress.org/Template_Tags/get_permalink](http://codex.wordpress.org/Template_Tags/get_permalink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:19:59.873

我自己想通了。我最终在我的 functions.php 文件中使用了以下链接结构

```
<img src="'.get_bloginfo('stylesheet_directory').'/images/map-point-medical.png"/> 
```

# sql - 如何将此 SQL 重写到 CodeIgniter 的活动记录中？

> ID：10502778
> 
> 赞同：1
> 
> 时间：2012-05-08T16:41:32.227
> 
> 标签：sql, codeigniter, activerecord

```
SELECT *, SUM(tbl.relevance) AS relevance FROM
(
    (
        SELECT q_id,
        MATCH(a_content) AGAINST ('бутон') AS relevance
        FROM answers

        WHERE
        MATCH(a_content) AGAINST ('бутон')
    )
    UNION
    (
        SELECT q_id,
        (MATCH(q_content) AGAINST ('бутон')) * 1.5 AS relevance
        FROM questions

        WHERE
        MATCH(q_content) AGAINST ('бутон')
    )
) AS tbl

JOIN questions ON questions.q_id = tbl.q_id

GROUP BY tbl.q_id
ORDER BY relevance DESC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:57:16.527

**Codeigniter**目前不支持其**Active Records**类中的子查询。

你只需要使用这个：

```
$this->db->query($your_query, FALSE); 
```

* * *

请记住传递第二个参数，这样**Codeigniter**就不会试图逃避您的查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:22:16.303

那么对于codeigniter中的子查询确实有一个简单的hack。您必须执行以下操作 转到 system/database/DB_active_rec.php

如果您使用的是 2.0 或更高版本，请在此处更改

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

删除公共关键字，您将能够使用子查询现在

```
$data   =   array(
             "q_id",
             "MATCH(a_content) AGAINST ('?????') AS relevance"  
         );

$this->db->select($data);
$this->db->from("answers");
$this->db->where("MATCH(a_content) AGAINST ('?????')");
$subQuery1 = $this->db->_compile_select();
// Reset active record
$this->db->_reset_select();   

unset($data);
$data   =   array(
            "q_id",
            "(MATCH(q_content) AGAINST ('?????')) * 1.5 AS relevance"   
        );

$this->db->select($data);
$this->db->from("questions");
$this->db->where("MATCH(q_content) AGAINST ('?????')");
$subQuery2 = $this->db->_compile_select();
// Reset active record
$this->db->_reset_select(); 

unset($data);
$data   =   array(
          "q_id",
          "SUM(tbl.relevance) AS relevance" 
         );

$this->db->select($data);
$this->db->from("$subQuery1 UNION $subQuery2");
$this->db->join("questions","questions.q_id = tbl.q_id");
$this->db->group_by("tbl.q_id");
$this->db->order_by("relevance","desc");
$query = $this->db->get(); 
```

# php - php替代品中的foreach？

> ID：10502779
> 
> 赞同：-2
> 
> 时间：2012-05-08T16:41:33.667
> 
> 标签：php, foreach

嗨，我想知道这是否可以在没有 foreach 循环的情况下完成。我正在尝试提取数据，但它一直在循环。我只想运行一次并将值存储为数组。请你帮我做这件事。我是 php 新手，所以如果它看起来很基本，我深表歉意。提前致谢。

```
foreach ($result->titles as $title)
{
  "Title ID" => $title->id,
  "Title" => $title->title_name,
  "Created On" => $month_created_on,
  "Solved On" => $solved_on ,
  "Status" => $title->status,
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:50:25.670

当你这样做时：

```
"Title ID" => $title->id 
```

它是关联数组表示法，您使用*Title ID*作为键和`$title->id`值。为了使您的代码工作，它需要是这样的：

```
foreach ($result->titles as $title)
{
   $newValues[] = array("Title ID" => $title->id,
                      "Title" => $title->title_name,
                      "Created On" => $title->month_created_on,
                      "Solved On" => $title->solved_on ,
                      "Status" => $title->status
                      );
} 
```

但真正要做的就是将`$result->titles`数组重新分配为具有您自己的自定义键的关联数组。我不确定这是否是你想要的。

要获得第一个元素，请`result->titles`执行以下操作：

```
$title_id = $result->titles[0]->id;
$title_name = $result->titles[0]->title_name;
// etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:43:21.827

是的，您可以使用`while`和的组合`each`来实现相同的`foreach`功能

例子

```
$all = array ();
while ( list ( , $data ) = each ( $result->titles ) ) {
    $array = array ();
    while ( list ( $key, $value ) = each ( $data ) ) {
        $array [$key] = $value;
    }
    $all [] = $array;
}
echo "<pre>";
print_r ( $all ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:47:16.883

要运行一次，您不需要循环。只需直接访问`$result->titles`数组中的第一个元素。这假设数组是数字索引的，并且第一个元素位于 index `0`。如果不是这种情况，请修改`[0]`以引用第一个元素。

```
$title_data = array(
    "Title ID" => $result->titles[0]->id,
    "Title" => $result->titles[0]->title_name,
    "Created On" => $month_created_on,
    "Solved On" => $solved_on ,
    "Status" => $result->titles[0]->status,
); 
```

# java - 优化 ResultSet 获取性能（Apache Spring、MySQL）

> ID：10502781
> 
> 赞同：3
> 
> 时间：2012-05-08T16:41:39.233
> 
> 标签：java, mysql, performance, spring, recordset

我的问题是：我试图通过来自 MySQL 的 JDBCTemplate 在 Spring 中处理大约 150 万行数据。有了这么多的行，我正在使用[这里建议的 RowCallbackHandler 类](https://stackoverflow.com/questions/1341254/spring-jdbc-support-and-large-dataset)

代码实际上可以工作，但是速度很慢......问题是，无论我将提取大小设置为什么，每次提取我似乎都能获得大约 350 条记录，提取之间有 2 到 3 秒的延迟（来自观察我的日志） . 我尝试注释掉 store 命令并确认行为保持不变，所以问题不在于写入。

有 6 列，只有 1 列是 varchar，而那一列只有 25 个字符长，所以我看不出吞吐量是问题。

理想情况下，我希望一次获得更多的 30000-50000 行。有没有办法做到这一点？

这是我的代码：

```
 protected void runCallback(String query, Map params, int fetchSize, RowCallbackHandler rch) 
            throws DatabaseException {
        int oldFetchSize = getJdbcTemplate().getFetchSize();
        if (fetchSize > 0) {
            getJdbcTemplate().setFetchSize(fetchSize);
        }
        try {
            getJdbcTemplate().query(getSql(query), rch);
        }
        catch (DataAccessException ex) {
            logger.error(ExceptionUtils.getStackTrace(ex));
            throw new DatabaseException( ex.getMessage() );         
        }
        getJdbcTemplate().setFetchSize(oldFetchSize);
    }

and the handler:

public class SaveUserFolderStatesCallback implements RowCallbackHandler {
        @Override
        public void processRow(ResultSet rs) throws SQLException {
            //Save each row sequentially.
            //Do NOT call ResultSet.next() !!!!

            Calendar asOf = Calendar.getInstance();
            log.info("AS OF DATE: " + asOf.getTime());
            Long x = (Long) rs.getLong("x");
            Long xx = (Long) rs.getLong("xx");
            String xxx = (String) rs.getString("xxx");
            BigDecimal xxxx = (BigDecimal)rs.getBigDecimal("xxxx");
            Double xxxx = (budgetAmountBD == null) ? 0.0 : budgetAmountBD.doubleValue();
            BigDecimal xxxxx = (BigDecimal)rs.getBigDecimal("xxxxx");
            Double xxxxx = (actualAmountBD == null) ? 0.0 : actualAmountBD.doubleValue();           

            dbstore(x, xx, xxx, xxxx, xxxxx, asOf);
        }       

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:49:11.743

你的查询是什么？尝试为您正在搜索/排序的字段创建 indexex。这会有所帮助。

策略二：在内存缓存中实现。或者使用休眠加二级缓存。

这两种技术都可以显着加快您的查询执行速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:49:40.870

几个问题

1.  如果直接查询数据库需要多长时间。另一个问题可能是应用程序和数据库主机之间的 ASYNC_NETWORK_IO 延迟。

2.  你没有使用Spring检查过吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:43:02.877

答案实际上是执行 setFetchSize(Integer.MIN_VALUE) 虽然这完全违反了 Statement.setFetchSize 的规定合同，mysql java 连接器使用这个值来流式传输结果集。这会带来巨大的性能提升。

修复的另一部分是我还需要创建自己的 (Spring) JdbcTemplate 子类，以适应负提取大小...实际上，我在这里举了代码示例，在那里我首先找到了设置 fetchSize(Integer .MIN_VALUE)

[http://javasplitter.blogspot.com/2009/10/pimp-ma-jdbc-resultset.html](http://javasplitter.blogspot.com/2009/10/pimp-ma-jdbc-resultset.html)

谢谢你们的帮助！

# erlang - Erlang，如何加载应用程序及其依赖项

> ID：10502783
> 
> 赞同：6
> 
> 时间：2012-05-08T16:41:48.130
> 
> 标签：erlang, startup, erlang-otp

我的集群中有一些应用程序，有时我需要在不同的主机上启动其中一些应用程序。

故事是 Erlang 集群已经在运行，所以即使我的每个应用程序都有我的 .app 资源文件，说明应该在我之前启动哪些应用程序，这仅适用于创建启动脚本，而不是在已经运行的应用程序中启动应用程序节点。

目前我有一个自定义例程，它使用 application:get_key(Application,applications) 来提取依赖项并在启动给定应用程序之前单独启动它们。

我想知道是否没有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-07T11:54:18.897

从 Erlang R16B02 开始，还有[`application:ensure_all_started`](http://www.erlang.org/doc/apps/kernel/application.html#ensure_all_started-1).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T21:55:33.743

坦率地说，在 Erlang 中执行此操作的标准工具现在不必要地烦人。我倾向于将以下样板放在我的应用程序回调模块中：

```
-module(myapp_app).
-export([start/0]).

start() -> a_start(myapp, permanent).

a_start(App, Type) ->
    start_ok(App, Type, application:start(App, Type)).

start_ok(_App, _Type, ok) -> ok;
start_ok(_App, _Type, {error, {already_started, _App}}) -> ok;
start_ok(App, Type, {error, {not_started, Dep}}) ->
    ok = a_start(Dep, Type),
    a_start(App, Type);
start_ok(App, _Type, {error, Reason}) ->
    erlang:error({app_start_failed, App, Reason}). 
```

然后，您可以添加`-s myapp_app`到您的 erlang 命令行，这将递归地启动应用程序及其所有依赖项。为什么这个功能不在我不知道的应用程序模块中:)

* * *

在我的 Erlang Factory 2012 SFBay 示例应用程序中有这个[自定义 erlang 应用程序启动代码的工作示例。](https://github.com/archaelus/erlang-factory-2012-example/blob/master/src/ef_app.erl#L25)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T02:11:56.217

在启动脚本之外启动应用程序时，您确实需要先启动依赖项。您可以在应用程序本身中构建智能来执行此操作，这样当应用程序启动时，它将在需要它们之前启动任何所需的依赖项。

我见过这样做的一个地方是在[Mochiweb](https://github.com/mochi/mochiweb)应用程序中。默认[应用程序模板](https://github.com/mochi/mochiweb/blob/master/support/templates/mochiwebapp_skel/src/mochiapp.erl)包括用于在启动时加载依赖项的代码：

```
-module(some_app).
-export([start/0, stop/0]).

ensure_started(App) ->
    case application:start(App) of
        ok ->
            ok;
        {error, {already_started, App}} ->
            ok
    end.

%% @spec start() -> ok
%% @doc Start the some_app server.
start() ->
    some_app_deps:ensure(),
    ensure_started(crypto),
    application:start(some_app).

%% @spec stop() -> ok
%% @doc Stop the some_app server.
stop() ->
    application:stop(some_app). 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T06:53:19.657

如果您在“OTP 设计原则”下编写您的应用程序，则必须创建 yourappname.app 文件，该文件将包含“应用程序”部分。本节定义您希望在您的应用程序之前启动哪些其他应用程序。[这里](http://www.erlang.org/doc/design_principles/applications.html)说明：

> 应用
> 
> 在此应用程序启动之前必须启动的所有应用程序。systools 使用此列表生成正确的引导脚本。默认为 []，但请注意，所有应用程序都至少依赖于内核和 stdlib。

所以如果你使用releases，这个依赖解析会被systools解决。

# xamarin.ios - 有没有办法为 ImageLoader 设置默认图像？

> ID：10502785
> 
> 赞同：0
> 
> 时间：2012-05-08T16:42:14.897
> 
> 标签：xamarin.ios, monotouch.dialog

我在我的应用程序中使用 MonoTouch.Dialog；但是，有问题的表单是使用 UIViewController 实现的，我在其中添加了 TableView（因此我也可以添加 UIToolbar）。

我喜欢 MonoTouch.Dialog.Utilities 中的 ImageLoader，并尝试在 DataSource 的 GetCell() 方法中使用它，以便 TableView 从 URL 呈现图像。

```
 var callback = new ImageLoaderCallback(controller, cell.ImageView, indexPath);  // ImageLoaderCallback implements IImageUpdated
                cell.ImageView.Image = ImageLoader.DefaultRequestImage(new Uri(picFV.Value), callback); 
```

问题是，在下载 URL 之前，ImageView 的空间被折叠（因此图像右侧的文本实际上锚定在表格的左侧）。

我想做的是显示一个与下载图像具有相同尺寸的临时本地图像，这样当 ImageLoader 完成检索和渲染图像时，用户体验就不会那么刺耳。

我尝试在 GetCell() 调用中执行以下操作... cell.ImageView.Image 设置为其他一些图像（下面未显示），然后我获得了对从 ImageLoader.DefaultRequestImage 返回的内容的引用。

```
 var image = ImageLoader.DefaultRequestImage(new Uri(picFV.Value), callback);
                callback.Image = image; 
```

最后一行将 ImageLoader 返回的图像引用填充到回调的状态中，当 ImageLoader 完成时，回调将替换单元格的 ImageView.Image（见下文）：

```
 // callback class for the MonoTouch.Dialog image loader utility
    private class ImageLoaderCallback : IImageUpdated
    {
        private ListViewController controller;
        private UIImageView imageView;
        private NSIndexPath indexPath;

        public ImageLoaderCallback(ListViewController c, UIImageView view, NSIndexPath path)
        {
            controller = c;
            imageView = view;
            indexPath = path;
        }

        public UIImage Image { get; set; }

        void IImageUpdated.UpdatedImage(Uri uri)
        {
            if (uri == null)
                return;
            if (Image != null)
                imageView.Image = Image;
            // refresh the display for the row of the image that just got updated
            controller.TableView.ReloadRows(new NSIndexPath [] { indexPath }, UITableViewRowAnimation.None);                
        }
    } 
```

但是，这不起作用，因为当 ImageLoader 尝试呈现其 ImageView 时，它似乎需要被 TableView“拉动”（即 ImageLoader 回调永远不会被调用，因为没有人拉动 URL）。

我该如何完成这个场景？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:48:38.610

我知道这是一个老问题了，但是我在搜索同样的东西时遇到了这个问题，并且看到了下面的博客文章，其中说明了如何完成这个问题。我还没有尝试过，但希望它可以帮助您或将来遇到此问题的任何其他人：http: [//yusinto.blogspot.co.uk/2012/05/background-image-downloading-with.html](http://yusinto.blogspot.co.uk/2012/05/background-image-downloading-with.html)

# android - 在选项卡内切换片段

> ID：10502786
> 
> 赞同：20
> 
> 时间：2012-05-08T16:42:19.577
> 
> 标签：android, tabs, actionbarsherlock

我正在创建一个使用 ActionBarSherlock 的应用程序。该应用程序由三个选项卡组成，在每个选项卡中，多个屏幕根据用户输入连续显示。我可以在选项卡之间切换片段，但是*在*选项卡内切换片段会出现问题。我试过这样：

在主课中：

```
SingleStationFragment singleStationFragment = new SingleStationFragment();
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(android.R.id.content, singleStationFragment);
transaction.addToBackStack(null);
transaction.commit(); 
```

这*确实*替换了第二个片段的第一个片段，但是当我更改选项卡时，第二个片段仍然可见，在旧选项卡的内容之上显示新选项卡的内容。我想我需要以某种方式分离第二个片段`onTabUnselected`，但我不知道如何获得对这个片段的引用。

谁能帮我这个？

为清楚起见，一些重要的类：

我的主要课程：

```
public class TreinVerkeer extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setupTabs(savedInstanceState);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    private void setupTabs(Bundle savedInstanceState) {
        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tab = actionBar.newTab().setText("STATIONS").setTabListener(new TabListener<StationsFragment>(this, "stations", StationsFragment.class));
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("ROUTE").setTabListener(new TabListener<RouteFragment>(this, "route", RouteFragment.class));
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("DELAYS").setTabListener(new TabListener<DelaysFragment>(this, "delays", DelaysFragment.class));
        actionBar.addTab(tab);

        if (savedInstanceState != null) {
            actionBar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
    }
} 
```

TabListener（来自[Android 开发者网站上的“添加导航选项卡”，](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)有一些小的改动）：

```
public class TabListener<T extends SherlockFragment> implements com.actionbarsherlock.app.ActionBar.TabListener {
    private SherlockFragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /**
     * Constructor used each time a new tab is created.
     * 
     * @param activity
     *            The host Activity, used to instantiate the fragment
     * @param tag
     *            The identifier tag for the fragment
     * @param clz
     *            The fragment's Class, used to instantiate the fragment
     */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
    SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

    // Check if the fragment is already initialized
    if (mFragment == null && preInitializedFragment == null) {
        // If not, instantiate and add it to the activity
        mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
    } else if (mFragment != null) {
        // If it exists, simply attach it in order to show it
        ft.attach(mFragment);
    } else if (preInitializedFragment != null) {
        ft.attach(preInitializedFragment);
        mFragment = preInitializedFragment;
    }
}

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

和`StationsFragment`（`RouteFragment`和`DelaysFragment`是相同的，只有不同的文字）

```
public class StationsFragment extends SherlockFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.stationsfragment, container, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T21:58:08.340

所以发生的事情是，`TabListener`在`onTabUnselected`方法中，`Fragment`没有分离，导致它在显示新的时仍然`Fragment`显示。

造成这种情况的原因是，`Fragment`分离的是第一个片段，而不是我的第二个片段。我做了一些改变。

在`Activity`：

```
SingleStationFragment singleStationFragment = new SingleStationFragment();
FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(android.R.id.content, singleStationFragment, "STATIONS");
transaction.addToBackStack(null);
transaction.commit(); 
```

这里我`"STATIONS"`在方法中添加了标签`replace()`，它与第一个片段的标签相同。
现在`TabListener`如下：

```
public class TabListener<T extends SherlockFragment> implements com.actionbarsherlock.app.ActionBar.TabListener {
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    private SherlockFragment mFragment;

    public TabListener(SherlockFragmentActivity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);
        if (preInitializedFragment == null) {
            mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(R.id.treinverkeer_fragmentcontent, mFragment, mTag);
        } else {
            ft.attach(preInitializedFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

        if (preInitializedFragment != null) {
            ft.detach(preInitializedFragment);
        } else if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

在`onTabUnselected`我现在首先检索正确的方法中`Fragment`，然后将其分离。

希望这对某人有帮助！

# r - 在 R 中用 gsub 删除尾随空格

> ID：10502787
> 
> 赞同：8
> 
> 时间：2012-05-08T16:42:19.763
> 
> 标签：r, gsub

有没有人有办法用 gsub 删除变量上的尾随空格？

以下是我的数据示例。如您所见，我在变量中嵌入了尾随空格和空格。

```
county <- c("mississippi ","mississippi canyon","missoula ",
            "mitchell ","mobile ", "mobile bay") 
```

我可以使用以下逻辑删除所有空格，但我真正想要的是只在最后移动空格。

```
county2 <- gsub(" ","",county) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-08T16:47:06.037

阅读`?regex`以了解正则表达式的工作原理。

```
gsub("[[:space:]]*$","",county) 
```

`[:space:]`是一个预定义的字符类，与您的语言环境中的空格字符匹配。 `*`表示重复匹配零次或多次，并`$`表示匹配字符串的结尾。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-08T16:46:32.110

您可以使用正则表达式：

```
 county <- c("mississippi ","mississippi canyon","missoula ",
        "mitchell ","mobile ", "mobile bay")  
 county2 <- gsub(" $","", county, perl=T) 
```

`$`代表文本序列的结尾，因此只匹配尾随空格。`perl=T`为匹配模式启用正则表达式。有关正则表达式的更多信息，请参阅`?regex`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-09T18:15:22.637

如果您不需要使用 gsub 命令 - str_trim 函数对此很有用。

```
 library(stringr)
    county <- c("mississippi ","mississippi canyon","missoula ",
        "mitchell ","mobile ", "mobile bay")
    str_trim(county) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T02:16:50.557

```
Above solution can not be generalized. Here is an example:

    a<-" keep business moving"
    str_trim(a) #Does remove trailing space in a single line string

However str_trim() from 'stringr' package works only for a vector of words   and a single line but does not work for multiple lines based on my testing as consistent with source code reference. 

    gsub("[[:space:]]*$","",a) #Does not remove trailing space in my example
    gsub(" $","", a, perl=T) #Does not remove trailing space in my example

Below code works for both term vectors and or multi-line character vectors   which was provided by the reference[1] below. 

    gsub("^ *|(?<= ) | *$", "", a, perl=T)

#Reference:: 
```

# ipad - 在纵向模式下合法保留拆分视图

> ID：10502788
> 
> 赞同：0
> 
> 时间：2012-05-08T16:42:25.040
> 
> 标签：ipad

之前在这里问过两个类似的问题：

[在纵向模式下拆分视图！](https://stackoverflow.com/questions/4790804/split-view-in-portrait-mode)

[强制 iPad 应用程序在纵向显示 splitView（如设置 iPad 应用程序）](https://stackoverflow.com/questions/4624234/forcing-an-ipad-app-to-show-splitview-even-in-portrait-orientationlike-the-sett)

这两个问题在很大程度上都以“不受官方支持 - 滚动您自己的或使用第三方自定义控制器”来回答

但是，我正在挖掘 WWDC 2011 Apple Developer 视频（特别是第 102 节），并且在演示者中大约 30 分钟宣布 iOS 5 现在支持此功能*。*问题是我不知道如何实现它. 这是幻灯片中的代码：

```
@protocol UISplitViewControllerDelegate
...
// Returns YES if a view controller should be hidden by
// the split view controller in a given orientation.
// (This method is only called on the leftmost view controller
// and only discriminates portrait from landscape.)
- (BOOL)splitViewController: (UISplitViewController*)svc
    shouldHideViewController:(UIViewController *)vc
        inOrientation:(UIInterfaceOrientation)orientation;
@end 
```

那么 - 我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:32:37.817

我通读了一堆东西，实际上找到了正确的方法。转到您的`detailViewController`. 你`detailViewController`应该有`UISplitViewControllerDelegate`。只需将此代码放入：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation{
    return NO;
} 
```

这将使所有视图保持原位。请让我知道这对你有没有用。

# computer-vision - 在经过校准的立体视觉设备中，如何获得实现 3D 三角测量算法所需的“相机矩阵”？

> ID：10502790
> 
> 赞同：6
> 
> 时间：2012-05-08T16:42:29.040
> 
> 标签：computer-vision, linear-algebra, triangulation, camera-calibration, stereo-3d

我正在尝试实现 Hartley & Zisserman 的“多视图几何”（第 12.2 节）中的（相对简单的）线性齐次 (DLT) 3D 三角测量方法，目的是在未来实现其完整的“最优算法”。现在，基于[这个问题](https://stackoverflow.com/questions/2276445/triangulation-direct-linear-transform)，我正试图让它在 Matlab 中工作，然后将其移植到 C++ 和 OpenCV 中，并在此过程中测试一致性。

问题是我不确定如何使用我拥有的数据。我已经校准了我的立体装置，并获得了两个固有相机矩阵、两个失真系数向量、两个相机相关的旋转矩阵和平移向量，以及基本矩阵和基本矩阵。我还有两个点的 2D 坐标，它们应该是两个图像坐标系中单个 3D 点的对应关系（分别由第一个和第二个相机拍摄）。

该算法将两个点坐标和两个 4x3“相机矩阵”P 和 P' 作为输入。这些显然不是从校准中获得的内在相机矩阵 (M, M')，因为它们是 3x3，而且因为单独使用它们的投影将 3D 点放在两个不同的坐标系中，即 - 外在 (旋转/平移）数据丢失。

H&Z 书包含有关使用 SVD 分解从基本矩阵或基本矩阵中恢复所需矩阵的信息（第 9 章），但也有其自身的其他问题（例如尺度模糊）。我觉得我不需要那个，因为我明确定义了旋转和平移。

那么问题是：使用第一个内在矩阵是否正确，将额外的零列作为第一个“相机矩阵”（P = [M | 0]），然后将第二个内在矩阵乘以一个外在矩阵由旋转矩阵和平移向量组成作为额外的列，以获得第二个所需的“相机矩阵”（P'=M'*[R|t]）？还是应该以不同的方式完成？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T15:28:49.793

我手头没有 H&Z - 但是他们关于这个主题的旧 CVPR 教程在[这里](http://users.cecs.anu.edu.au/~hartley/Papers/CVPR99-tutorial/tut_4up.pdf)（其他人可以看看这个问题）。

为清楚起见（并使用他们的术语），投影矩阵*P*从欧几里得 3 空间点 ( *X* ) 映射到图像点 ( *x* ) 为：

```
x = PX 
```

在哪里：

```
P = K[ R | t ] 
```

由 (3x3) 相机校准矩阵*K*和 (3x3) 旋转矩阵*R*和平移向量 (3x1) *t*定义。

问题的关键似乎是如何使用您的两个相机*P*和*P'*执行三角测量。

我相信您建议世界原点位于第一台相机*P*，因此：

```
P = K [ I | 0] 
```

和

```
P' = K' [ R | t ] 
```

然后我们在基本矩阵 F 中寻求重建，使得：

```
x' F x = 0 
```

矩阵*F*当然可以通过多种方式计算（有时更常见于未校准的图像！）但在这里我认为您可能希望根据上面已经校准的相机矩阵来执行此操作：

```
F = [P' C]_x P' pinv(P) 
```

哪里`C = (0 1)`是第一个相机的中心，是*P*`pinv(P)`的伪逆。表示文献中用于矩阵乘法计算向量积的符号。*`_x`*

 *然后，您可以执行基本矩阵 F 的分解（通过 SVD 或直接方法执行）。

```
F = [t]_x M 
```

因此，正如您正确指出的那样，我们可以*直接*根据以下公式计算三角剖分：

```
P = [ I | 0 ] 
```

和

```
P' = [ M | t ] 
```

使用这些来执行三角测量应该相对简单（假设校准良好、没有噪音等）*

# image-processing - 跟踪与人脸检测相关的人体斑点

> ID：10502799
> 
> 赞同：2
> 
> 时间：2012-05-08T16:42:59.823
> 
> 标签：image-processing, opencv, machine-learning, image-recognition

我意识到这是一项艰巨的任务，但是检测人脸，然后在具有移动背景的视频中跟踪与该人脸相关联的身体的最实用方法是什么？

[使用 OpenCV 的人脸训练Haar 级联](http://opencv.willowgarage.com/wiki/FaceDetection)检测人脸相当简单。不幸的是，OpenCV 为人体训练的 Haar 级联非常不准确，以至于实际上无法使用，所以我的想法是使用面部检测器来大致确定“人”在哪里，然后使用[OpenTLD 之](http://www.ohloh.net/p/opentld)类的东西来动态“学习”什么该人的身体看起来像并在框架上跟踪它。这应该具有能够处理移动背景的好处，OpenCV 中的大多数运动跟踪代码目前似乎无法处理。主要的缺点是 OpenTLD 仍然很新，而且我测试过的所有公共实现都非常错​​误且难以使用。

这看起来是一种实用的方法吗？有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:32:43.030

如果您对人体检测/跟踪而不是面部检测感兴趣，您应该检查 OpenCV 中的人员检测示例。OpenCV 包含基于 HoG 描述符和 SVM 分类器的人员检测器，这实际上是可用的最成功的人员检测算法之一。

# ms-access - CDate 类型不匹配错误

> ID：10502802
> 
> 赞同：4
> 
> 时间：2012-05-08T16:43:20.997
> 
> 标签：ms-access, vba

我正在尝试使用记录集中的 CDate() 将文本字段转换为日期，但不断收到类型不匹配错误。输入文本格式为 MMDDYYYY。CDate 不识别这种格式吗？我需要一个单独的功能吗？有任何想法吗？

```
Text Date  -> Converted Date
---------     --------------
04122012   -> 04/12/2012

Dim db As DAO.Database
Dim rst As DAO.Recordset

Set db = CurrentDb
Set rst = db.OpenRecordset("tbl_dates", Type:=dbOpenDynaset)

Do Until rst.EOF
rst.Edit
rst![Converted Date]=CDate(rst![Text Date])
rst.Update
rst.MoveNext

Loop

Set rst = Nothing
Set db = Nothing 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T17:07:23.310

`CDate()`如果月份、日期和年份部分之间没有某种类型的分隔符，则不会接受您的日期字符串。此尝试因类型不匹配错误而失败。

```
? CDate("04122012") 
```

如果有帮助，您可以使用该`IsDate()`功能检查您的日期字符串是否采用`CDate()`可接受的格式。

```
? IsDate("04122012")
False
? IsDate("04-12-2012")
True
? IsDate("04/12/2012")
True
? CDate("04-12-2012")
4/12/2012
bar = "04122012" : Debug.Print CDate(Left(bar,2) & "-" & _
    Mid(bar,3,2) & "-" & Right(bar,4))
4/12/2012 
```

**编辑**：如果系统的语言环境设置与日期字符串的格式不匹配，您可以将这些日期字符串转换为*yyyy-mm-dd*格式以避免`CDate()`.

```
bar = "04122012" : Debug.Print CDate(Right(bar,4) & "-" & _
    Left(bar,2) & "-" & Mid(bar,3,2))
4/12/2012 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T21:35:34.900

的帮助`CDate`说：

> CDate 根据系统的区域设置识别日期格式。如果提供的格式不是已识别的日期设置之一，则可能无法确定正确的日、月和年顺序。

为避免由于语言环境设置而造成的潜在混淆，您可以使用`DateSerial`而不是`CDate`，就像这样的表达式（假设`Text Date`在 MMDDYYYY 格式中总是有 8 个字符）：

```
DateSerial(Right(rst![Text Date], 4), Left(rst![Text Date], 2), Mid(rst![Text Date], 3, 2)) 
```

# c# - 使用 WebRequest POST 参数和数据到 TestFlight

> ID：10502806
> 
> 赞同：1
> 
> 时间：2012-05-08T16:43:53.620
> 
> 标签：c#, .net, http, testflight

我正在尝试使用 TestFlight 的上传 API 来自动化构建。这是他们的文档：[https ://testflightapp.com/api/doc/](https://testflightapp.com/api/doc/)

这是我测试过的极简主义 curl 命令行请求：

```
.\curl.exe http://testflightapp.com/api/builds.json 
  -F file=@MyFileName.ipa
  -F api_token='myapitoken' -F team_token='myteamtoken' 
  -F notes='curl test' 
```

我尝试将其转换为 C#，如下所示：

```
var uploadRequest = WebRequest.Create("http://testflightapp.com/api/builds.json") as HttpWebRequest;
uploadRequest.Method = "POST";
uploadRequest.ContentType = "multipart/form-data";

var postParameters = string.Format("api_token={0}&team_token={1}&notes=autobuild&file=", TESTFLIGHT_API_TOKEN, TESTFLIGHT_TEAM_TOKEN);
var byteParameters = Encoding.UTF8.GetBytes(postParameters);

var ipaData = File.ReadAllBytes(IPA_PATH);

uploadRequest.ContentLength = byteParameters.Length + ipaData.Length;
var requestStream = uploadRequest.GetRequestStream();
requestStream.Write(byteParameters, 0, byteParameters.Length);
requestStream.Write(ipaData, 0, ipaData.Length);
requestStream.Close();

var uploadResponse = uploadRequest.GetResponse(); 
```

不幸的是，`GetResponse()`我得到了一个`(500) Internal Server Error`并且没有更多信息。

我不确定我的 postParameters 中的数据是否应该用`'`s 包装——我已经尝试过两种方式。我也不知道我的内容类型是否正确。我也试过`application/x-www-form-urlencoded`，但没有任何效果。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:18:27.663

感谢[Adrian Iftode](https://stackoverflow.com/users/782754/adrian-iftode)的评论，我找到[了 RestSharp](http://restsharp.org/)，这让我可以像这样实现请求：

```
var testflight = new RestClient("http://testflightapp.com");

var uploadRequest = new RestRequest("api/builds.json", Method.POST);

uploadRequest.AddParameter("api_token", TESTFLIGHT_API_TOKEN);
uploadRequest.AddParameter("team_token", TESTFLIGHT_TEAM_TOKEN);
uploadRequest.AddParameter("notes", "autobuild");

uploadRequest.AddFile("file", IPA_PATH);

var response = testflight.Execute(uploadRequest);
System.Diagnostics.Debug.Assert(response.StatusCode == HttpStatusCode.OK, 
            "Build not uploaded, testflight returned error " + response.StatusDescription); 
```

如果您正在制作 UI 应用程序，RestSharp 还可以进行异步执行。检查上面链接中的文档！

# objective-c - Objective-c - 在静态 NSMutableDictionary 上使用 NSCache 的好处？

> ID：10502809
> 
> 赞同：8
> 
> 时间：2012-05-08T16:44:15.737
> 
> 标签：objective-c, ios, nscache

因此 NSCache 对象应该保持活动状态以保留缓存的数据，这意味着必须使用用于存储数据的同一对象来检索数据。

*   所以问题是在保存我的数据的单例 NSDictionary 上使用 NSCache 有什么意义？
*   使用 NSCache 的首选方式是什么？静态场？继承它并创建一个单例？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-08T16:57:46.120

缓存有许多怪癖，使其可以很好地用作缓存，但不适合用作通用集合。如文档中所述：

> NSCache 对象在以下几个方面与其他可变集合不同：
> 
> *   NSCache 类包含各种自动删除策略，确保它不会使用过多的系统内存。如果其他应用程序需要内存，系统会自动执行这些策略。调用时，这些策略会从缓存中删除一些项目，从而最大限度地减少其内存占用。
> *   您可以从不同的线程添加、删除和查询缓存中的项目，而无需自己锁定缓存。
> *   从 NSCache 对象中检索某些内容会返回一个自动释放的结果。
> *   与 NSMutableDictionary 对象不同，缓存不会复制放入其中的关键对象。
> 
> 这些特性对于 NSCache 类是必需的，因为如果调用缓存来释放内存，缓存可能会决定在后台异步自动变异。

# google-apps-script - 在 google docs 脚本编辑器上创建的 XML 的 SOAP 身份验证问题

> ID：10502811
> 
> 赞同：0
> 
> 时间：2012-05-08T16:44:24.240
> 
> 标签：google-apps-script

[我正在尝试通过 SOAP 和 WSDL （ http://wiki.affiliatewindow.com/index.php/Affiliate_service_APIV3](http://wiki.affiliatewindow.com/index.php/Affiliate_service_APIV3) ）连接（通过 google 电子表格中的脚本编辑器）到 API 。

我正在努力创建标头 XML 对象，根据示例（来自上面的链接）应该有两个元素，“UserAuthentication”和“getQuota”。如果我仅发送带有用户身份验证的标头，则会收到服务器错误响应；如果我尝试发送这两个元素，我会收到身份验证错误。

任何帮助都感激不尽！

** 更新 ** 身份验证标头似乎正在工作（或者至少没有返回任何错误）；我现在得到的错误是“程序'getTransactionList'不存在”（它应该存在）。

到目前为止，这是我的代码：

```
function testSOAP() {
// Affiliate Window API from here
  var wsdl = SoapService.wsdl("http://api.affiliatewindow.com/v3/AffiliateService?wsdl");

  var apiService = wsdl.getService( wsdl.getServiceNames() );
  //Logger.log(apiService); // ApiService

  var headerA = [
    "ns1:UserAuthentication",
    { "SOAP-ENV:mustUnderstand" : "true" },
    { "SOAP-ENV:actor" : "http://api.affiliatewindow.com" },
    [ "ns1:iId", "******" ],
    [ "ns1:sPassword", "**************************************" ],
    [ "ns1:sType", "affiliate" ]
  ];
  var headerQ = [
    "ns1:getQuota", "true"
  ];

  var paramJ = [
    "ns1:getTransactionList",
    [ "ns1:dStartDate", "2011-08-01T00:00:00" ],
    [ "ns1:dEndDate", "2011-08-30T23:59:59" ],
    [ "ns1:sDateType", "transaction" ]
  ];
  // I read that the paramaters should be sent as an XML element, not JSON (as above)
  // but neither of the formats seem to work
  var paramX = Xml.element("ns1:getTransactionList", [
                           Xml.element("ns1:dStartDate", ["2011-08-01T00:00:00"]),
                           Xml.element("ns1:dEndDate", ["2011-08-30T23:59:59"]),
                           Xml.element("ns1:sDateType", ["transaction"])
  ]);

  // this returns the generated xml that will be sent
  var result = apiService.getSoapEnvelope("getTransactionList", paramX, [headerA, headerQ]);
  Logger.log(result);

  var transL = apiService.getOperation("getTransactionList");
  //Logger.log(transL);

  var env = transL.invokeOperation([paramJ], [headerA, headerQ]);
  Logger.log(env);

  Logger.getLog();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:51:12.367

我从未使用过 Apps Script Soap 服务，但您是否尝试过为标题使用一维数组？（因为您使用的是二维的）。例如

```
var header = [headerA, headerQ]; //your snippet had "extra" brackets

var result = apiService.invokeOperation("getTransactionList", [param], header);
Logger.log(result); 
```

# java - 无法使用 Eclipse 正确部署所需的项目

> ID：10502813
> 
> 赞同：1
> 
> 时间：2012-05-08T16:44:39.800
> 
> 标签：java, eclipse, tomcat, deployment

我正在 Eclipse 上开发一个 Web 应用程序。我已经将 DAL 实现为一个单独的项目，并将其设置为我的主项目的依赖项。

我可以编译主项目，但是当我运行它时，我得到了这个异常：

`SEVERE: Servlet.service() for servlet InputServlet threw exception
java.lang.ClassNotFoundException`

**它在我的“DAL 项目”**中找不到一个类，所以当我运行 web 应用程序时，这个项目的类似乎没有部署在 Tomcat 中。

我该如何解决？有什么要配置的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T08:16:12.827

我按照**rodgarcialima**对这个问题的回答解决了我的问题：[Eclipse Web Project Dependencies](https://stackoverflow.com/q/1693322/1061499)：

> 1.  转到 Web 项目属性。
> 2.  部署程序集（左）。
> 3.  添加>选择项目>选择您的lib项目>如果未选中，请选中“将项目组装到Web应用程序的WEB-INF/lib文件夹中”>完成。
> 4.  Java构建路径（左）>项目选项卡>添加...>选择您的lib项目>确定
> 5.  Java Build Path (Left) > Order and Export 选项卡 > 选择您的 lib 项目。
> 6.  节省
> 7.  现在它起作用了。

# json - jqGrid：如何将复杂的 javascript 对象作为 postData 传递给 ASP MVC 控制器方法

> ID：10502815
> 
> 赞同：1
> 
> 时间：2012-05-08T16:45:01.267
> 
> 标签：json, jqgrid, asp.net-mvc

我需要将一个 JS 对象传递给我的控制器方法 jqGrid。该对象称为“activeFilters” - 这是表示为 JSON 的对象：

```
{"family":
     [{
      "filterDisplayName":"Performance Status",
      "filterDbName":"CurrentStatus",
      "filterValueList":"On Plan"
      }]
 } 
```

将上述内容传递给我的 jqGrid 时遇到问题（详细信息进一步向下）。但是我可以非常简单地将对象传递给带有 Ajax 的控制器：

```
$.ajax({
    url: myMethodPath,
    type: 'POST',
    dataType: 'html',
    data: JSON.stringify(activeFilters),
    contentType: 'application/json; charset=utf-8',
    success: function (result) {
        alert("success")
    },
    error: function () {
        alert("Error:");
    }
}); 
```

我的测试控制器方法如下所示：

```
 [HttpPost]
    public ActionResult DataTest(JsonFilterFamily activeFilters)
    {
        return PartialView();
    } 
```

添加 JsonFilterFamily 的结构如下：

```
public class JsonFilterFamily
{
    public List<FilterFamilyMember> family { get; set; }
} 

public class FilterFamilyMember
{
    public string filterDisplayName { get; set; }
    public string filterDbName { get; set; }
    public string filterValueList { get; set; }
} 
```

使用上面的 Ajax，JS 对象可以毫无问题地发送到控制器。但我只是不知道如何在对 jqGrid 控制器的调用中发送与 postData 相同的 JS 对象。发布数据的语法一定是错误的。这是我正在使用的：

```
$("#myJqGrid").setGridParam({ postData: { family: activeFilters.family} }).trigger("reloadGrid"); 
```

但是当控制器触发时，会发生一些奇怪的事情。调试器告诉我`family`= 1; 但 filterDisplayName、filterDbName、filterValueList 为空。关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T11:59:18.193

在您的控制器方法中，尝试放置：

```
var filterFamilyMember = new FilterFamilyMember();
TryUpdateModel(filterFamilyMember); 
```

`TryUpdateModel`是一个 MVC 控制器方法，这会将数据放入您的对象中。

# rabbitmq - 使用 RabbitMQ 在公共交通中竞争消费者

> ID：10502818
> 
> 赞同：7
> 
> 时间：2012-05-08T16:45:09.563
> 
> 标签：rabbitmq, masstransit

我已经使用 MassTransit 实现了一个简单的发布者/消费者集，我想让消费者从同一个队列中读取消息。但是，当我运行它时，我看到大部分消息被发送到错误队列而不是被消费。从我看到的讨论（[SO](https://stackoverflow.com/questions/9074411/how-to-implement-a-competing-consumer-solution)，[Forum](https://groups.google.com/d/topic/masstransit-discuss/kTyy_59MEMs/discussion)）来看，这对于 RabbitMQ 来说应该非常简单（只需指向同一个队列），但它不起作用。是否应该设置其他配置？

这是我的发布者

```
public class YourMessage { public string Text { get; set; } }
public class Program
{
    public static void Main()
    {
        Console.WriteLine("Publisher");
        Bus.Initialize(sbc =>
        {
            sbc.UseRabbitMqRouting();
            sbc.ReceiveFrom("rabbitmq://localhost/test_queue");
        });
        var x = Console.Read();
        for (var i = 0; i <= 1000; i++)
        {
            Console.WriteLine("Message Number " + i);
            Bus.Instance.Publish(new YourMessage { "Message Number " + i });
        }
    }
} 
```

我的消费者

```
public class YourMessage { public string Text { get; set; } }
public class Program
{
    public static void Main()
    {
        Console.WriteLine("Consumer");
        Bus.Initialize(sbc =>
        {
            sbc.UseRabbitMqRouting();
            sbc.ReceiveFrom("rabbitmq://localhost/test_queue");
            sbc.Subscribe(subs =>
            {
                var del = new Action<IConsumeContext<YourMessage>,YourMessage>((context, msg) =>
                {
                    Console.WriteLine(msg.Text);
                });
                subs.Handler<YourMessage>(del);
            });
        });
        while (true) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T21:49:20.417

接收者/消费者和发布者不能在同一个队列中。如果您希望竞争消费者有多个消费者实例针对同一个队列运行。

我们有文档，但目前缺少此部分，所以我理解您的困惑：[http](http://readthedocs.org/docs/masstransit/en/latest/configuration/gotchas.html#how-to-setup-a-competing-consumer) ://readthedocs.org/docs/masstransit/en/latest/configuration/gotchas.html#how-to-setup-a-competing-consumer如果你成功了，文档方面的帮助会很棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T21:32:25.673

因此，看起来解决方案是更改发布者中的行：

```
 sbc.ReceiveFrom("rabbitmq://localhost/test_queue"); 
```

类似于：

```
 sbc.ReceiveFrom("rabbitmq://localhost/test_queue_publisher"); 
```

这可以防止发布者竞争他们未配置为使用的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T16:51:52.510

刚刚在 GitHub 上找到了一个示例[https://github.com/khalidabuhakmeh/MassTransit.ScaleOut](https://github.com/khalidabuhakmeh/MassTransit.ScaleOut) ...

# sharepoint - SharePoint 安全概述 - 从哪里开始？

> ID：10502822
> 
> 赞同：0
> 
> 时间：2012-05-08T16:45:31.040
> 
> 标签：sharepoint

我需要阅读 SharePoint 安全性。谁能推荐从哪里开始？我需要研究的领域是：

1.  使用 SharePoint Web 服务（SOAP 或 RESTful）的远程客户端的安全性。
2.  位于 SharePoint 上的数据的安全性。
3.  用户身份验证。
4.  用户权限。

目前，我不确定从哪里开始，甚至不知道谷歌该从哪里开始。我想一份要阅读的事情清单会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:34:15.537

MSDN 和 technet 都是很好的资源。搜索“SharePoint Security”，你会在不同的轨道上找到各种各样的东西，比如 Developer、ITPro。

试试这个作为起点：[http ://technet.microsoft.com/en-us/sharepoint/ee518672](http://technet.microsoft.com/en-us/sharepoint/ee518672)

或者只是在这里开始挖掘：http: [//msdn.microsoft.com/en-us/library/dd776256 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/dd776256(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:55:48.147

SharePoint 实际上只是一个建立在 3 种主要技术之上的应用程序：

*   ASP.net 网页端
*   SQL Server 数据库
*   视窗操作系统

您应该从对这 3 种技术的基本了解开始。

然后，您可以继续了解 SharePoint 如何处理 SharePoint 中的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:27:39.773

除了 Microsoft TechNet 上的许多有用文章之外，您还应该查看 TITUS 的 SharePoint 博客。我并不是说这个回复听起来像自私自利，但位于[http://www.titus.com/blog](http://www.titus.com/blog)的 TITUS 博客专注于 SharePoint 安全性。那里有许多（与产品无关的）文章和论文可能会有所帮助，它们主要从用户许可、身份验证和授权的角度介绍 SharePoint 安全性。另外，请查看 DIWUG eMagazine 网站上标题为“有效管理 Microsoft SharePoint 2010 中的权限”的文章（由我撰写）：[http ://www.diwug.nl/e-magazines/Pages/default.aspx](http://www.diwug.nl/e-magazines/Pages/default.aspx). 同样，它侧重于权限管理，尤其是在 SharePoint 中的大型库和列表中（对性能的影响等）。希望这可以帮助。-安东尼奥

# c# - 如何将键盘类型发送到记事本？

> ID：10502823
> 
> 赞同：1
> 
> 时间：2012-05-08T16:45:32.937
> 
> 标签：c#, virtual-keyboard

我在 C# 中玩耍，并希望我的小控制台程序在我打开的记事本窗口中拼写我的名字。我有窗口句柄（IntPtr），但真的不知道从这里做什么。

我可以使用 SendKey 但我希望它在记事本有焦点或没有焦点时工作，据我所知，Senkey 只有在你有窗口焦点时才工作:(

**编辑：** 我尝试了以下方法（试图模拟按 B）：

```
PostMessage(NotepadWindowHandle, 0x100, 0x42, 0);
Thread.Sleep(1000);
PostMessage(NotepadWindowHandle, 0x101, 0x42, 0); 
```

什么都没有发生:(而且它不会破坏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:50:51.197

你是对的，[`SendKey`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)只适用于焦点窗口。

您要做的是 P/Invoke[`SendMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)并[`WM_SETTEXT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632644%28v=vs.85%29.aspx)在文本框的句柄上发送（请注意，这不是主窗口句柄！）。要获得它，您可以向下导航窗口层次结构，直到使用[`GetWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633515%28v=vs.85%29.aspx).

作为免费赠品，要获得文本框的句柄，只需在记事本主窗口句柄上调用`GetWindow`with`GW_CHILD`即可获得它，它实际上是第一个孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:37:10.557

如果您有记事本的窗口句柄，为什么不先将其激活为前台窗口，*然后*发出`SendKey`？

这是用于将窗口设置为前景窗口的 P/Invoke 签名：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd); 
```

**编辑**：类似问题的前答案：[https ://stackoverflow.com/a/8953524/1149773](https://stackoverflow.com/a/8953524/1149773)

# javascript - 如何在这种情况下使用主干

> ID：10502828
> 
> 赞同：1
> 
> 时间：2012-05-08T16:45:46.330
> 
> 标签：javascript, jquery, backbone.js

我有这段代码：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('#result').html(data);
    alert('Load was performed.');
  }
}); 
```

在哪里

```
data = "<p>Hello</p>" 
```

现在让我们假设我将使用更改这段代码以使用主干和模板

我将创建一个文件 myTemplate.html

```
<p>{{data}}</p> 
```

并且服务器的响应将`{data: "Hello"}`代替`<p>Hello</p>`

假设我还使用 Backbone创建了我的视图/模型和集合 ( `MyView`, `MyData`, )。`MyCollection`

我应该如何修改我的 ajax 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:41:43.230

我想你应该以这种方式修改你的 ajax 成功处理程序：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {

    // if data is not a collection 
    var myData = new MyData();
    myData.set(data);

    // if data is a collection 
    var myCollection = new MyCollection();
    myCollection.add(data);

    alert('Load was performed.');
  }
}); 
```

# java - java中按钮的大小

> ID：10502830
> 
> 赞同：3
> 
> 时间：2012-05-08T16:45:54.990
> 
> 标签：java, swing, jbutton, layout-manager

![在此处输入图像描述](../Images/c7a6db0b851a6b903c9961b947eb11ab.png)

我想控制按钮的大小，我使用方法 setBounds 但是没有变化，这是我的代码

```
 public class levels extends JFrame implements ActionListener{

 //Variables 
private static JLabel chooseLevel;
private static JButton easyPuzzle;
private static JButton mediumPuzzle;
private static JButton hardPuzzle;
 // End Of Variables 
```

这个主要的鳕鱼

```
public static void main(String[]args){

levels level = new levels();
level.setBounds(400, 190, 450, 450);
level.setVisible(true); // frame is visible
level.setResizable(false); // not Resizable frame 
level.setTitle("Puzzle Number : New Game");  // Title Of the frame 
```

添加组件的容器

```
 Container cN = level.getContentPane(); //  Container to add components for farme 1
   GridLayout gN = new GridLayout(0,1,10,20); //object from GridLayout
   cN.setLayout(gN);

   levels.chooseLevel = new JLabel("              Choose a level :");
   levels.easyPuzzle = new JButton("Easy puzzle from ( 1 - to -15)");
   levels.mediumPuzzle = new JButton("Medium Puzzle from (1- to- 29)");
   levels.hardPuzzle = new JButton("Hard Puzzle from (1- to- 59)"); 
```

> > ```
> >  //add components for frame 
> > ```

```
 cN.add(chooseLevel);
     cN.add(easyPuzzle);
     cN.add(mediumPuzzle);
     cN.add(hardPuzzle);
   }
   }
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:47:10.470

`LayoutManager`覆盖您多次设置的界限，这就是`GridLayout`.

我建议您阅读[布局管理器教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T16:50:09.953

尝试使用[`setPreferredSize()`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29)按钮上的方法，尽管布局管理器对最终使用的大小有最终决定权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:55:29.463

据我了解，GridLayout 不允许您调整父组件内的组件大小。使用其他布局并使用

```
button.setPreferredSize(new Dimension(sizeX,sizeY)); 
```

或者

```
button.setSize(new Dimension(sizeX,sizeY)); 
```

其中 sizeX 是宽度，sizeY 是高度。

# python - Android 的 MonkeyRunner 偶尔会抛出异常

> ID：10502833
> 
> 赞同：5
> 
> 时间：2012-05-08T16:46:14.167
> 
> 标签：python, android-emulator, jython, monkeyrunner

我正在使用一个 Android 模拟器运行一个自动化测试，该模拟器驱动一个带有用 Python 编写的 Monkey 脚本的应用程序。该脚本将文件复制到模拟器上，单击应用程序中的按钮并根据软件在运行期间触发的活动做出反应。该脚本应该循环运行几千次，所以我在一个循环中运行 adb 工具来复制文件，启动活动并通过调用设备上的 getProperty 方法来查看软件的反应参数“am.current.comp.class”。所以这是我的脚本的一个非常简化的版本：

```
for target in targets:
    androidSDK.copyFile(emulatorName, target, '/mnt/sdcard')

    # Runs the component
    device.startActivity(component='com.myPackage/com.myPackage.myactivity')

    while 1:
        if device.getProperty('am.current.comp.class') == 'com.myPackage.anotheractivity':
            time.sleep(1) # to allow the scree to display the new activity before I click on it
            device.touch(100, 100, 'DOWN_AND_UP')
            # Log the result of the operation somewhere
            break

        time.sleep(0.1) 
```

（androidSDK 是我编写的一个小类，它封装了一些实用程序函数来使用 adb 工具复制和删除文件）。

例如，有时脚本会因许多异常之一而崩溃（我忽略了完整的堆栈跟踪）

```
[com.android.chimpchat.adb.AdbChimpDevice]com.android.ddmlib.ShellCommandUnresponsiveException 
```

或者

```
[com.android.chimpchat.adb.AdbChimpDevice] Unable to get variable: am.current.comp.class
[com.android.chimpchat.adb.AdbChimpDevice]java.net.SocketException: Software caused connectionabort: socket write error 
```

我读过有时与设备的套接字连接变得不稳定，可能需要重新启动（adb start-server 和 adb kill-server 很有用）。

我遇到的问题是这些工具正在抛出 Java 异常（Monkey 在 Jython 中运行），但我不确定如何从我的 Python 脚本中捕获这些异常。我希望能够确定脚本内失败的确切原因并恢复情况，以便我可以继续我的迭代（例如，重新建立连接？例如，用另一个电话重新初始化我的设备到 MonkeyRunner.waitForConnection 就够了吗？）。

有任何想法吗？

非常感谢，阿尔贝托

**编辑**。我想我会提到我发现可以在 Jython 脚本中捕获特定于 Java 的异常，如果有人需要的话：

```
from java.net import SocketException

...

try:
    ...

except(SocketException):
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T20:59:35.030

可以在 Jython 脚本中捕获特定于 Java 的异常：

```
from java.net import SocketException

...

try:
    ...

except(SocketException):
    ... 
```

（取自OP对他的问题的编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T21:45:04.353

这对我有用： device.shell('exit')# Exit the shell

# javascript - 包含 dom 图像的 contentEditable 中的插入符号定位

> ID：10502835
> 
> 赞同：0
> 
> 时间：2012-05-08T16:46:18.903
> 
> 标签：javascript, contenteditable, caret

我在 contentEditable iframe 中设置插入符号位置时遇到问题，只要我添加一个“:)”表情符号。

你会怎么管理？

这是一个基本模板：

```
<!DOCTYPE html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        var init = function () { // initialization

            this.editor = $('#wysiwyg');
            this.editor.curWin = this.editor.prop('contentWindow');
            this.editor.curDoc = this.editor.curWin.document;
            this.editor.curDoc.designMode = "On";
            this.editor.curBody = $(this.curDoc).contents().find('body');
            this.editor.html = function (data) { // shortcut to set innerHTML
                if (typeof data == "undefined")
                    return this.curBody.html();
                this.curBody.html(data);
                return $(this);
            };
            var emoji = function (data) { // replace every :) by an image
                return data.replace(':)', '<img src="http:\/\/dean.resplace.net\/blog\/wp-content\/uploads\/2011\/10\/wlEmoticon-smile1.png"\/>');
            };
            var self = this;
            this.editor.contents().find('body').keypress(function (ev) { // handler on key pressed
                var me = $(this);

                setTimeout(function () { // timeout so that the iframe is containing the last character inputed
                    var sel = self.editor.curWin.getSelection();
                    var offset = sel.focusOffset;

                    me.html( emoji( me.html() ) );

                    var body = $(self.editor.curDoc).find('body').get(0);
                    sel.collapse(body, offset); //here is where i set positionning
                    return;
                }, 100);
                return true;
            });

        };
    </script>
</head>
<body onload="init()">
    <iframe id="wysiwyg"></iframe>
</body>
</html> 
```

StackOverflow 要求我添加更多上下文来解释代码部分，但对我来说似乎很清楚。很抱歉添加这么多“酷故事兄弟”评论，但我看不出我能解释更多。无论如何，我对任何问题持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:14:23.190

快速修复...检查是否正在更换...如果正在更换，则重新调整插入符号。否则就这样吧。

```
var init = function() { // initialization
    this.editor = $('#wysiwyg');
    this.editor.curWin = this.editor.prop('contentWindow');
    this.editor.curDoc = this.editor.curWin.document;
    this.editor.curDoc.designMode = "On";
    this.editor.curBody = $(this.curDoc).contents().find('body');
    this.editor.html = function(data) { // shortcut to set innerHTML
        if (typeof data == "undefined") return this.curBody.html();
        this.curBody.html(data);
        return $(this);
    };
    var emoji = function(data) { // replace every :) by an image
        var tmp = data;
        tmp = tmp.replace(':)', '<img src="http:\/\/dean.resplace.net\/blog\/wp-content\/uploads\/2011\/10\/wlEmoticon-smile1.png"\/>');
        if (tmp !== data) {
            return [true, tmp];
        }
        return [false, tmp];
    };
    var self = this;
    this.editor.contents().find('body').keypress(function(ev) { // handler on key pressed
        var me = $(this);
        var res = emoji(me.html());
        if (res[0]) {
            setTimeout(function() { // timeout so that the iframe is containing the last character inputed
                var sel = self.editor.curWin.getSelection();
                var offset = sel.focusOffset;

                me.html(res[1]);

                var body = $(self.editor.curDoc).find('body').get(0);
                sel.collapse(body, offset); //here is where i set positionning
                return;

            }, 100);
        }
        return true;
    });

};
init();​ 
```

# javascript - Fancybox 变量 onClosed 函数

> ID：10502838
> 
> 赞同：0
> 
> 时间：2012-05-08T16:46:42.327
> 
> 标签：javascript, fancybox

我一直在尝试设置一个带有 onClosed 函数的fancybox，该函数可以在fancybox 启动后更改（使用fancybox 1.3.4）。这似乎有效：

```
var close_fancybox = function() {}

$("#element").fancybox({
    'onClosed': function () {
        close_fancybox();
    },
}); 
```

当我稍后在代码中更改 close_fancybox 时，onClosed 行为会更改以反映它。

但是，这似乎不起作用：

```
var close_fancybox = function() {}

$("#element").fancybox({
    'onClosed': close_fancybox,
}); 
```

我很困惑为什么第二个不起作用。

# java - 在osm上绘图的问题

> ID：10502840
> 
> 赞同：0
> 
> 时间：2012-05-08T16:46:46.737
> 
> 标签：java, android, openstreetmap, osmdroid

我正在为 androd 开发一个小应用程序，以使用位图显示 gps 位置。我在 google mmaps 中使用了一些示例代码，但我必须使用 maps forge 来制作。不幸的是，我还没有找到任何示例代码或任何关于如何编写这个绘图操作的东西 Colud 有人帮我吗？

我的代码是：

```
 package hu.uniobuda.nik.k44hvx;

 import java.io.IOException;

import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import org.mapsforge.android.maps.GeoPoint;
import org.mapsforge.android.maps.ItemizedOverlay;
import org.mapsforge.android.maps.MapActivity;
import org.mapsforge.android.maps.MapController;
import org.mapsforge.android.maps.MapView;
import org.mapsforge.android.maps.MapViewMode;
import org.mapsforge.android.maps.Overlay;
import org.mapsforge.android.maps.OverlayItem;
import org.mapsforge.android.maps.Projection;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Geocoder;
import android.location.Address;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.text.Html;
import android.widget.TextView;
import android.widget.Toast;

public class Night_WatchActivity extends MapActivity  {

    MapView mapview;
    public MapController mc;

    private LocationManager locman;
    private LocationListener loclis;

    List<Overlay> mapOverlays;
    static Drawable pointDefaultMarker;

    MapOverlay pointsOverlay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mapview = new MapView(this);
        mapview.setClickable(true);
        mapview.setBuiltInZoomControls(true);
        mapview.setMapViewMode(MapViewMode.MAPNIK_TILE_DOWNLOAD);
       // mapview.setMapViewMode(MapViewMode.CANVAS_RENDERER);
        //mapview.setMapFile("/sdcard/budapest.map");

        mc = mapview.getController();
        mc.setCenter(new GeoPoint(47.499619,19.046406));

        mc.setZoom(17);

        setContentView(mapview);

        locman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
       // loclis = new GPSLocationListener();
        if(pointDefaultMarker==null){pointDefaultMarker = getResources().getDrawable(R.drawable.kepont);}
        mapOverlays = mapview.getOverlays();
        pointsOverlay = new MapOverlay(pointDefaultMarker);
        mapOverlays.add(pointsOverlay);

        locman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, loclis);
    }

    @Override
    protected void onResume() {
        locman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10*1000, 10, loclis);
        super.onResume();
    }

    @Override
    protected void onPause() {
        locman.removeUpdates(loclis);
        super.onPause();
    }

private class GPSLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            if(location!=null){
                GeoPoint gp = new GeoPoint(
                                    (int)(location.getLatitude()*1E6),
                                    (int)(location.getLongitude()*1E6));

                OverlayItem item = new OverlayItem(gp,null,null);

                pointsOverlay.justOneOverlay(item);
                mc.setZoom(16);
                mc.setCenter(gp);
                mapview.invalidate();

                String address = PointToLocation(gp);
                Toast.makeText(getBaseContext(), 
                          address,
                          Toast.LENGTH_SHORT).show();
            }

        }

        public void onProviderDisabled(String provider) {

        }

        public void onProviderEnabled(String provider) {

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {

        }

        public String PointToLocation(GeoPoint hely){
            String s ="";

            Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());
            try{

                List<Address> adresses = gcd.getFromLocation(
                                            hely.getLatitudeE6() / 1E6, 
                                            hely.getLongitudeE6()/1E6 , 1);
                if(adresses.size()>0){
                    for(int i = 0; i < adresses.get(0).getMaxAddressLineIndex(); i++){
                        s += adresses.get(0).getAddressLine(i) + " ";

                    }
                }

            }catch(IOException exception){ exception.printStackTrace();}

            return s;
        }

    }

 class MapOverlay extends ItemizedOverlay<OverlayItem>{

    private GeoPoint toDraw;

    public GeoPoint getToDraw() {
        return toDraw;
    }

    public void setToDraw(GeoPoint toDraw) {
        this.toDraw = toDraw;
    }

    Paint p = new Paint();
    private ArrayList<OverlayItem> overlays = new ArrayList<OverlayItem>();
    private boolean drawLines = false;

    public MapOverlay(Drawable defaultMarker) {
        super(boundCenter(defaultMarker));

        populate();
    }

    public void addOverlay(OverlayItem overlay){
        overlays.add(overlay);

        populate();
    }
    public void justOneOverlay(OverlayItem newOverlay){
        overlays.clear();
        addOverlay(newOverlay);             
    }
    @Override
    protected OverlayItem createItem(int i) {
        return overlays.get(i);
    }
    @Override
    public int size() {
        return overlays.size();
    }

    public boolean isDrawLines() {
        return drawLines;
    }
    public void setDrawLines(boolean drawLines) {
        this.drawLines = drawLines;     
    }   

    @Override
    protected void drawOverlayBitmap(Canvas canvas, Point drawPosition,
            Projection projection, byte drawZoomLevel) {

        Point ScreenPoint = new Point();
        mapview.getProjection().toPixels(toDraw, ScreenPoint);

        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.kepont);
        canvas.drawBitmap(bmp,ScreenPoint.x,ScreenPoint.y-24, null);
    }

 } 

} 
```

# jquery-plugins - jQuery 掩码 - 有条件的

> ID：10502841
> 
> 赞同：1
> 
> 时间：2012-05-08T16:46:46.787
> 
> 标签：jquery-plugins

我对 jQuery 非常陌生，并且正在使用屏蔽输入插件 1.3 版为电话号码创建屏蔽。

我能够设置它并使遮罩正常工作，但是我想根据选择框的更改为遮罩应用条件。

当页面加载一个ID为#Country的选择框时，默认情况下会设置为“美国”。我要创建的是，如果他们将国家/地区选择器更改为美国选择以外的其他内容，请移除掩码。

这是我的第一次尝试！

```
 $('#Country').change(function(){
    var cty = $(this).find('option:selected').attr('value');
    if(cty=='United States'){
        // us masking
        $('#phone').unmask().mask("(999) 999-9999");

    } else {
        // just numbers for international
        $('#phone').unmask().mask("9999999999999999");

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T08:46:50.680

只是为了让答案被摆正并正确显示（提问者评论）

```
$('#phone').mask('(999) 999-9999');  
$('#Country').change(function(){ 
  var cty = $(this).val(); 
  if(cty=='United States'){ 
    // us masking 
    $('#phone').unmask().mask("(999) 999-9999"); 
  } else { 
    // just numbers for international 
    $('#phone').unmask().mask("9999999999999999"); 
  } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T17:08:51.217

我没有看到你的代码有任何问题。而不是 var cty = $(this).find('option:selected').attr('value'); 尝试 var cty = $(this).val()

并尝试通过在 if/else 语句中添加一些 console.log("mask us") console.log("mask non-us") 来调试您的代码。如果您的 console.log() 显示预期值，则问题出在您的插件中，因此请尝试直接联系其作者。

# java - Java Swing OSX 窗口菜单图标对齐

> ID：10502844
> 
> 赞同：0
> 
> 时间：2012-05-08T16:46:53.363
> 
> 标签：java, macos, swing, icons, jmenuitem

Java Swing 似乎在 MenuItems 上的图标（如果存在）之后放置了“菜单文本”。请参见下面的示例。

![OSX 上的窗口菜单](../Images/f8ca8090869aa69631b9b4d50583d964.png)

它看起来不太好。

**有没有解决的办法？**

在 OSX 上，图标适合左边距，并且文本与所有其他 MenuItems 对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:19:09.987

您可以尝试以下任何一种方法：

*   Unicode 字符很吸引人，但它们在可变间距字体中对齐不佳：

    ```
    JMenuBar menuBar = new JMenuBar();
    JMenu windowMenu = new JMenu("Window");
    windowMenu.add(new JMenuItem("♦ Item"));
    windowMenu.add(new JMenuItem("✓ Item"));
    windowMenu.add(new JMenuItem("• Item"));
    menuBar.add(windowMenu);
    frame.setJMenuBar(menuBar); 
    ```

*   更好的是，使用[固定大小的](https://stackoverflow.com/a/2834484/230513)实现来控制几何图形，实现[此处](https://stackoverflow.com/a/4641530/230513)和[此处](https://stackoverflow.com/a/3072979/230513)`Icon`所示的接口。展示了一种渲染任意 unicode 字形的方法。[`CellTest`](https://stackoverflow.com/a/4151403/230513)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:09:30.363

你的意思是这样的：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JTextPaneExample
{
    private Icon info = UIManager.getIcon("OptionPane.informationIcon");
    private Icon error = UIManager.getIcon("OptionPane.errorIcon");
    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("JTextPane Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextPane tpane = new JTextPane();
        tpane.setContentType("text/html");
        JScrollPane scroller = new JScrollPane();
        scroller.setViewportView(tpane);

        try
        {
            java.net.URL url = new java.net.URL("http://maps.google.es/");
            //tpane.setPage(url);
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }

        frame.setJMenuBar(createMenuBar());

        frame.getContentPane().add(scroller);
        frame.setSize(300, 300);
        frame.setVisible(true);
    }

    private JMenuBar createMenuBar()
    {
        JMenuBar menuBar = new JMenuBar();
        JMenu windowMenu = new JMenu("Window");
        JMenuItem minimizeItem = new JMenuItem("Minimize");
        minimizeItem.setMargin(new java.awt.Insets(0, 10, 0, 0));
        minimizeItem.setIcon(info);
        minimizeItem.setIconTextGap(1);
        minimizeItem.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        JMenuItem zoomItem = new JMenuItem("Zoom");
        zoomItem.setMargin(new java.awt.Insets(0, 10, 0, 0));
        zoomItem.setIconTextGap(1);
        zoomItem.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        JCheckBoxMenuItem cbmi = new JCheckBoxMenuItem("Check Me", null, true);         
        cbmi.setMargin(new java.awt.Insets(5, 25, 5, 5));
        cbmi.setIconTextGap(17);
        cbmi.setHorizontalTextPosition(javax.swing.SwingConstants.LEFT);
        windowMenu.add(minimizeItem);
        windowMenu.add(zoomItem);
        windowMenu.add(cbmi);
        menuBar.add(windowMenu);
        return menuBar;
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JTextPaneExample().createAndDisplayGUI();
            }           
        });
    }
} 
```

这是输出：

![菜单项](../Images/001e53c01d82fe18be615e247eaa2366.png)

# wpf - BackButtonStyle（Metro 应用程序中 StandardStyles.xaml 的一部分）导致其他元素被禁用

> ID：10502847
> 
> 赞同：0
> 
> 时间：2012-05-08T16:47:04.527
> 
> 标签：wpf, xaml, windows-8, windows-runtime, winrt-xaml

我已经使用`BackButtonStyle`了`StandardStyles.xaml`（在创建新的地铁项目时）创建的。

问题是它禁用了其他控件。Button 和 Slider 被禁用，无法调用。

当我删除 BackButtonStyle 时，另一个按钮/滑块正常工作。

```
 <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <!--Style="{StaticResource BackButtonStyle}"-->
        <Button x:Name="backButton" Click="GoBack" Style="{StaticResource BackButtonStyle}"   Margin="10"  >Back</Button>
        <TextBlock Grid.Column="1" Text="Application settings" Foreground="White" FontSize="24" HorizontalAlignment="Center" Margin="10"/>
      </Grid>
      <StackPanel Grid.Row="1">

      <TextBlock Grid.Row="1" FontSize="14"  Text="Toast Notification Interval (minutes)  " Margin="10"/>
        <Slider  Grid.Row="2"  x:Name="NotificationIntervalSlider"  Minimum="1" Maximum="10"/>
        <TextBlock Grid.Row="3" FontSize="14" x:Name="lblIntervalInfo"  Margin="10"/>
        <Button Grid.Row="4">Text</Button> 
```

BackButtonStyle 如下（很大，默认提供）

```
 <Style x:Key="BackButtonStyle" TargetType="Button">
    <Setter Property="MinWidth" Value="0"/>
    <Setter Property="Width" Value="48"/>
    <Setter Property="Height" Value="48"/>
    <Setter Property="Margin" Value="36,0,36,36"/>
    <Setter Property="VerticalAlignment" Value="Bottom"/>
    <Setter Property="FontFamily" Value="Segoe UI Symbol"/>
    <Setter Property="FontWeight" Value="Normal"/>
    <Setter Property="FontSize" Value="56"/>
    <Setter Property="AutomationProperties.AutomationId" Value="BackButton"/>
    <Setter Property="AutomationProperties.Name" Value="Back"/>
    <Setter Property="AutomationProperties.ItemType" Value="Navigation Button"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid x:Name="RootGrid">
                    <Grid Margin="-1,-16,0,0">
                        <TextBlock x:Name="BackgroundGlyph" Text="&#xE0A8;" Foreground="{StaticResource BackButtonBackgroundBrush}"/>
                        <TextBlock x:Name="NormalGlyph" Text="{StaticResource BackButtonGlyph}" Foreground="{StaticResource BackButtonGlyphBrush}"/>
                        <TextBlock x:Name="ArrowGlyph" Text="&#xE0A6;" Foreground="{StaticResource BackButtonPressedGlyphBrush}" Opacity="0"/>
                    </Grid>
                    <Rectangle
                        x:Name="FocusVisualWhite"
                        IsHitTestVisible="False"
                        Stroke="{StaticResource FocusVisualWhiteStrokeBrush}"
                        StrokeEndLineCap="Square"
                        StrokeDashArray="1,1"
                        Opacity="0"
                        StrokeDashOffset="1.5"/>
                    <Rectangle
                        x:Name="FocusVisualBlack"
                        IsHitTestVisible="False"
                        Stroke="{StaticResource FocusVisualBlackStrokeBrush}"
                        StrokeEndLineCap="Square"
                        StrokeDashArray="1,1"
                        Opacity="0"
                        StrokeDashOffset="0.5"/>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource BackButtonHoverBackgroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="NormalGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource BackButtonHoverGlyphBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="BackgroundGlyph" Storyboard.TargetProperty="Foreground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource BackButtonGlyphBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation
                                        Storyboard.TargetName="ArrowGlyph"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                    <DoubleAnimation
                                        Storyboard.TargetName="NormalGlyph"
                                        Storyboard.TargetProperty="Opacity"
                                        To="0"
                                        Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="RootGrid" Storyboard.TargetProperty="Visibility">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation
                                        Storyboard.TargetName="FocusVisualWhite"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                    <DoubleAnimation
                                        Storyboard.TargetName="FocusVisualBlack"
                                        Storyboard.TargetProperty="Opacity"
                                        To="1"
                                        Duration="0"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style> 
```

我可以看到一些`IsHitTestVisible=false`，我已经手动删除和测试了，然后也是相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:26:47.390

您可以尝试在此处删除边距和内容：

```
<Button x:Name="backButton" Click="GoBack" Style="{StaticResource BackButtonStyle}"   Margin="10"  >Back</Button> 
```

让它

```
<Button
    Click="GoBack"
    Style="{StaticResource BackButtonStyle}" /> 
```

# php - 如何使用 PHP 在表中找到最后一个

> ID：10502852
> 
> 赞同：0
> 
> 时间：2012-05-08T16:47:14.337
> 
> 标签：php

我想知道如何使用 PHP 找出表中的最后一个，也就是如果那是最后一个，那么我想对其应用不同的样式和内容。

这是我生成表格内容的代码的一部分。

```
 $content .= '</tr>';

  $totalcols = count ($columns);
  if (is_array ($tabledata))
  {
    foreach ($tabledata as $tablevalues)
    {
      if ($tablevalues[0] == 'dividingline')
      {
        $content .= '<tr><td colspan="' . $totalcols . '" style="background-color:#efefef;"><div align="left"><b>' . $tablevalues[1] . '</b></div></td></tr>';
        continue;
      }
      else
      {
        $content .= '<tr>';
        foreach ($tablevalues as $tablevalue)
        {
          $content .= '<td>' . $tablevalue . '</td>';
        }

        $content .= '</tr>';
        continue;
      }
    }
  }
  else
  {
    $content .= '<tr><td align="center" style="border-bottom: none;" colspan="' . $totalcols . '">No Records Found</td></tr>';
  } 
```

我知道以后可以选择用 jQuery 做类似的事情，但我不想让它复杂化，只是在我生成表时用 php 解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:51:55.473

数一数：

```
$count = 1;
foreach ($tablevalues as $tablevalue)
{
    $count++;

    if( $count > count( $tablevalues)) {
        echo "Last td tag is up next! ";
    }
    $content .= '<td>' . $tablevalue . '</td>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:54:53.473

您可以在最后一个循环中执行任何代码：

```
for($i=0;$i<count($tablevalues);$i++)
{
    $tablevalue=$tablevalues[$i];
    $content .= '<td>' . $tablevalue . '</td>';
    if($i==count($tablevalues)-1){ 
        // last loop execution
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T16:56:26.340

这是一个不知何故的把戏

```
foreach ($tablevalues as $k => $tablevalue)
{
  if ($k==count($tablevalues)-1)
  {
    // last td of current row
    $content .= '<td>' . $tablevalue . '</td>';
  }
  else
  {
    $content .= '<td>' . $tablevalue . '</td>';
  }
} 
```

我只是希望您的 $tablevalues 集的键与此代码匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:50:44.803

您应该使用`for($i = 0; i < count($tablevalues); $i++) {}`循环并考虑`count($tablevalues)-1`成为数组的最后一个键。

所以这`$tablevalues[count($tablevalues)-1]`是你的最后一个`<td>`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T16:54:15.380

你为什么不使用 jQuery？它有规定可以做这样的事情。

# popup - VirtualBox VM guest 向主机弹出一个窗口

> ID：10502854
> 
> 赞同：0
> 
> 时间：2012-05-08T16:47:19.067
> 
> 标签：popup, debian, virtualization, virtual-machine, virtualbox

**问号**
我想知道一旦在 VM 中完成任务（不是电子邮件），VM 来宾机器是否有可能向 MS-Windows 主机弹出一个窗口。如果我不是在做梦，如何实现呢？

**为什么**
VM 是生产服务器的模拟器。代码在主机 IDE 中编写并直接在 VM 中进行测试。所以文件从IDE手动传输到VM，然后在VM中自动移动、格式化、chmoded、chown等等。这个过程可能需要一段时间，所以我想在这个过程结束后警告开发者。开发者无权访问虚拟机，也不必拥有虚拟机。

**配置**
工具：VirtualBox 4.1
主机：MS-Windows XP 或 Windows 7
来宾：VM Debian
共享目录：是
网络：桥接连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:18:32.863

如果存在这种能力，那将是 VirtualBox 中的一个相当大的安全漏洞。来宾虚拟机访问主机操作系统不是一件好事！因此，我认为不可能以受支持的方式完成此任务。

相反，将其视为两台独立的机器。您有什么机制可以在一台机器上从另一台机器上引发警报或弹出窗口？您的环境中是否启用了 IM、netsend 等功能？

# php - PHP SOAP 客户端到 JBoss Webservice 问题

> ID：10502860
> 
> 赞同：0
> 
> 时间：2012-05-08T16:47:37.130
> 
> 标签：php, xml, soap

我需要完全按照下面的方式传递 SOAP 调用并使用 isEmailAvailableResponse 获取响应但看起来 PHP 不喜欢命名空间或其他东西，我不断收到下面列出的错误我尝试手动传递 XML 并且确实有效但我'想尝试让它与 PHP SOAP 客户端一起工作

```
<?php

$client = new SoapClient("http://192.168.35.123:8080/iBossCustomer/Email?wsdl", array('trace' => 1));

$arg = array("emailAddressName" => 'helloasdadsad@iburst.co.za');
$params = array("arg0" => $arg);

$client->isEmailAvailable($params); 
```

-------------- XML ------------

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ema="http://email.boss.arc/">
   <soapenv:Header/>
   <soapenv:Body>
      <ema:isEmailAvailable>
         <!--Optional:-->
         <arg0>
            <emailAddressName>helloasdadsad@iburst.co.za</emailAddressName>
         </arg0>
      </ema:isEmailAvailable>
   </soapenv:Body>
</soapenv:Envelope> 
```

------------- PHP错误 ---------

捕获的异常：SOAP-ERROR：编码：对象没有“成功”属性

------- WSDL 文件 -------

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://email.boss.arc/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://email.boss.arc/" name="Email">
<types>
<xsd:schema>
<xsd:import namespace="http://webservice.gateway.email.service.isp.rogueware.org/" schemaLocation="http://192.168.35.123:8080/iBossCustomer/Email?xsd=1"/>
</xsd:schema>
<xsd:schema>
<xsd:import namespace="http://email.boss.arc/" schemaLocation="http://192.168.35.123:8080/iBossCustomer/Email?xsd=2"/>
</xsd:schema>
</types>
<message name="DeleteEmailAccount">
<part name="parameters" element="tns:DeleteEmailAccount"/>
</message>
<message name="DeleteEmailAccountResponse">
<part name="parameters" element="tns:DeleteEmailAccountResponse"/>
</message>
<message name="ReserveEmailAddress">
<part name="parameters" element="tns:ReserveEmailAddress"/>
</message>
<message name="ReserveEmailAddressResponse">
<part name="parameters" element="tns:ReserveEmailAddressResponse"/>
</message>
<message name="CreateEmailDomain">
<part name="parameters" element="tns:CreateEmailDomain"/>
</message>
<message name="CreateEmailDomainResponse">
<part name="parameters" element="tns:CreateEmailDomainResponse"/>
</message>
<message name="isEmailDomainAvailable">
<part name="parameters" element="tns:isEmailDomainAvailable"/>
</message>
<message name="isEmailDomainAvailableResponse">
<part name="parameters" element="tns:isEmailDomainAvailableResponse"/>
</message>
<message name="AddEmailAccountNickname">
<part name="parameters" element="tns:AddEmailAccountNickname"/>
</message>
<message name="AddEmailAccountNicknameResponse">
<part name="parameters" element="tns:AddEmailAccountNicknameResponse"/>
</message>
<message name="GetEmailAccountAttributes">
<part name="parameters" element="tns:GetEmailAccountAttributes"/>
</message>
<message name="GetEmailAccountAttributesResponse">
<part name="parameters" element="tns:GetEmailAccountAttributesResponse"/>
</message>
<message name="GetEmailAccountInformation">
<part name="parameters" element="tns:GetEmailAccountInformation"/>
</message>
<message name="GetEmailAccountInformationResponse">
<part name="parameters" element="tns:GetEmailAccountInformationResponse"/>
</message>
<message name="SetEmailDomainMaxAccountNames">
<part name="parameters" element="tns:SetEmailDomainMaxAccountNames"/>
</message>
<message name="SetEmailDomainMaxAccountNamesResponse">
<part name="parameters" element="tns:SetEmailDomainMaxAccountNamesResponse"/>
</message>
<message name="SetEmailAccountSpamFolderEnabled">
<part name="parameters" element="tns:SetEmailAccountSpamFolderEnabled"/>
</message>
<message name="SetEmailAccountSpamFolderEnabledResponse">
<part name="parameters" element="tns:SetEmailAccountSpamFolderEnabledResponse"/>
</message>
<message name="SetEmailAccountForwardAddress">
<part name="parameters" element="tns:SetEmailAccountForwardAddress"/>
</message>
<message name="SetEmailAccountForwardAddressResponse">
<part name="parameters" element="tns:SetEmailAccountForwardAddressResponse"/>
</message>
<message name="SetEmailAccountLocalDeliveryEnabled">
<part name="parameters" element="tns:SetEmailAccountLocalDeliveryEnabled"/>
</message>
<message name="SetEmailAccountLocalDeliveryEnabledResponse">
<part name="parameters" element="tns:SetEmailAccountLocalDeliveryEnabledResponse"/>
</message>
<message name="SetEmailAccountPassword">
<part name="parameters" element="tns:SetEmailAccountPassword"/>
</message>
<message name="SetEmailAccountPasswordResponse">
<part name="parameters" element="tns:SetEmailAccountPasswordResponse"/>
</message>
<message name="RemoveEmailAccountNickName">
<part name="parameters" element="tns:RemoveEmailAccountNickName"/>
</message>
<message name="RemoveEmailAccountNickNameResponse">
<part name="parameters" element="tns:RemoveEmailAccountNickNameResponse"/>
</message>
<message name="CreateEmailAddress">
<part name="parameters" element="tns:CreateEmailAddress"/>
</message>
<message name="CreateEmailAddressResponse">
<part name="parameters" element="tns:CreateEmailAddressResponse"/>
</message>
<message name="CreateReservedEmailAddress">
<part name="parameters" element="tns:CreateReservedEmailAddress"/>
</message>
<message name="CreateReservedEmailAddressResponse">
<part name="parameters" element="tns:CreateReservedEmailAddressResponse"/>
</message>
<message name="isEmailAvailable">
<part name="parameters" element="tns:isEmailAvailable"/>
</message>
<message name="isEmailAvailableResponse">
<part name="parameters" element="tns:isEmailAvailableResponse"/>
</message>
<message name="UpdateEmailAttribute">
<part name="parameters" element="tns:UpdateEmailAttribute"/>
</message>
<message name="UpdateEmailAttributeResponse">
<part name="parameters" element="tns:UpdateEmailAttributeResponse"/>
</message>
<portType name="Email">
<operation name="DeleteEmailAccount">
<input message="tns:DeleteEmailAccount"/>
<output message="tns:DeleteEmailAccountResponse"/>
</operation>
<operation name="ReserveEmailAddress">
<input message="tns:ReserveEmailAddress"/>
<output message="tns:ReserveEmailAddressResponse"/>
</operation>
<operation name="CreateEmailDomain">
<input message="tns:CreateEmailDomain"/>
<output message="tns:CreateEmailDomainResponse"/>
</operation>
<operation name="isEmailDomainAvailable">
<input message="tns:isEmailDomainAvailable"/>
<output message="tns:isEmailDomainAvailableResponse"/>
</operation>
<operation name="AddEmailAccountNickname">
<input message="tns:AddEmailAccountNickname"/>
<output message="tns:AddEmailAccountNicknameResponse"/>
</operation>
<operation name="GetEmailAccountAttributes">
<input message="tns:GetEmailAccountAttributes"/>
<output message="tns:GetEmailAccountAttributesResponse"/>
</operation>
<operation name="GetEmailAccountInformation">
<input message="tns:GetEmailAccountInformation"/>
<output message="tns:GetEmailAccountInformationResponse"/>
</operation>
<operation name="SetEmailDomainMaxAccountNames">
<input message="tns:SetEmailDomainMaxAccountNames"/>
<output message="tns:SetEmailDomainMaxAccountNamesResponse"/>
</operation>
<operation name="SetEmailAccountSpamFolderEnabled">
<input message="tns:SetEmailAccountSpamFolderEnabled"/>
<output message="tns:SetEmailAccountSpamFolderEnabledResponse"/>
</operation>
<operation name="SetEmailAccountForwardAddress">
<input message="tns:SetEmailAccountForwardAddress"/>
<output message="tns:SetEmailAccountForwardAddressResponse"/>
</operation>
<operation name="SetEmailAccountLocalDeliveryEnabled">
<input message="tns:SetEmailAccountLocalDeliveryEnabled"/>
<output message="tns:SetEmailAccountLocalDeliveryEnabledResponse"/>
</operation>
<operation name="SetEmailAccountPassword">
<input message="tns:SetEmailAccountPassword"/>
<output message="tns:SetEmailAccountPasswordResponse"/>
</operation>
<operation name="RemoveEmailAccountNickName">
<input message="tns:RemoveEmailAccountNickName"/>
<output message="tns:RemoveEmailAccountNickNameResponse"/>
</operation>
<operation name="CreateEmailAddress">
<input message="tns:CreateEmailAddress"/>
<output message="tns:CreateEmailAddressResponse"/>
</operation>
<operation name="CreateReservedEmailAddress">
<input message="tns:CreateReservedEmailAddress"/>
<output message="tns:CreateReservedEmailAddressResponse"/>
</operation>
<operation name="isEmailAvailable">
<input message="tns:isEmailAvailable"/>
<output message="tns:isEmailAvailableResponse"/>
</operation>
<operation name="UpdateEmailAttribute">
<input message="tns:UpdateEmailAttribute"/>
<output message="tns:UpdateEmailAttributeResponse"/>
</operation>
</portType>
<binding name="EmailPortBinding" type="tns:Email">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="DeleteEmailAccount">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="ReserveEmailAddress">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="CreateEmailDomain">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="isEmailDomainAvailable">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="AddEmailAccountNickname">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="GetEmailAccountAttributes">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="GetEmailAccountInformation">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="SetEmailDomainMaxAccountNames">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="SetEmailAccountSpamFolderEnabled">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="SetEmailAccountForwardAddress">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="SetEmailAccountLocalDeliveryEnabled">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="SetEmailAccountPassword">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="RemoveEmailAccountNickName">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="CreateEmailAddress">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="CreateReservedEmailAddress">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="isEmailAvailable">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
<operation name="UpdateEmailAttribute">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="Email">
<port name="EmailPort" binding="tns:EmailPortBinding">
<soap:address location="http://192.168.35.123:8080/iBossCustomer/Email"/>
</port>
</service>
</definitions> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:54:25.710

它适用于手动 XML，因为这将绕过 WSDL。xsd2 中的 WSDL 信息看起来不正确，您似乎正在使用复杂类型`emailDdeDTO`，因为它适合多种 Web 服务方法的所有输入。

这是您定义为 的输入的内容`isEmailAvailable()`：

```
<xs:element name="customerNo" type="xs:string" minOccurs="0"/>
<xs:element name="customerObjNum" type="xs:long" minOccurs="0"/>
<xs:element name="domainName" type="xs:string" minOccurs="0"/>
<xs:element name="emailAddressName" type="xs:string" minOccurs="0"/>
<xs:element name="emailAddressReservedNo" type="xs:long"/>
<xs:element name="errorMessage" type="xs:string" minOccurs="0"/>
<xs:element name="errorStackTrace" type="xs:string" minOccurs="0"/>
<xs:element name="externalReference" type="xs:string" minOccurs="0"/>
<xs:element name="isEmailAddressAvailable" type="xs:boolean" minOccurs="0"/>
<xs:element name="isFreeEmail" type="xs:boolean" minOccurs="0"/>
<xs:element name="isSuccessful" type="xs:boolean" minOccurs="0"/>
<xs:element name="password" type="xs:string" minOccurs="0"/>
<xs:element name="reservationReference" type="xs:long"/>
<xs:element name="subscriberNo" type="xs:string" minOccurs="0"/>
<xs:element name="subscriberObjNum" type="xs:long" minOccurs="0"/> 
```

上面的复杂类型有一个扩展，`abstractDTOut`它也导入了这些元素：

```
<xs:element name="failureDescription" type="xs:string" minOccurs="0"/>
<xs:element name="failureType" type="xs:int" minOccurs="0"/>
<xs:element name="successful" type="xs:boolean"/> 
```

注意`successful`没有`minOccurs=0`属性？这就是你得到异常的原因`successful property missing`。

最好为每个方法的输入结构有一个单独的复杂类型定义，但快速解决方法是添加`minOccurs="0"`到上面的成功元素。

# ruby-on-rails - 未初始化的常量 CustomersController::CSV

> ID：10502864
> 
> 赞同：4
> 
> 时间：2012-05-08T16:47:41.843
> 
> 标签：ruby-on-rails, file-upload, csv

我正在按照教程[http://www.funonrails.com/2012/01/csv-file-importexport-in-rails-3.html]](http://www.funonrails.com/2012/01/csv-file-importexport-in-rails-3.html%5D)在 rails 3 中上传文件，因为我需要我的应用程序的用户可以上传csv 文件，但是当我尝试保存文件时，我得到：**未初始化的常量 CustomersController::CSV**消息，在更改我的路由以获取“客户/导入”以发布“客户/导入”之前我有其他错误**没有路由匹配 [POST]“ /customers/import”**我做错了什么？提前致谢。

**我的控制器：**

```
class CustomersController < ApplicationController
  def import
    if request.post? && params[:file].present?
      infile = params[:file].read
      n, errs = 0, []
      CSV.parse(infile) do |row|
        n += 1
        # SKIP: header i.e. first row OR blank row
        next if n == 1 or row.join.blank?
        # build_from_csv method will map customer attributes & 
        # build new customer record
        customer = Customer.build_from_csv(row)
        # Save upon valid 
        # otherwise collect error records to export
        if customer.valid?
          customer.save
        else
          errs << row
        end
      end
      # Export Error file for later upload upon correction
      if errs.any?
        errFile ="errors_#{Date.today.strftime('%d%b%y')}.csv"
        errs.insert(0, Customer.csv_header)
        errCSV = CSV.generate do |csv|
          errs.each {|row| csv << row}
        end
        send_data errCSV,
          :type => 'text/csv; charset=iso-8859-1; header=present',
          :disposition => "attachment; filename=#{errFile}.csv"
      else
        flash[:notice] = I18n.t('customer.import.success')
        redirect_to import_url #GET
      end
    end
  end
end 
```

**我的模型：**

```
class Customer < ActiveRecord::Base
  scope :active, where(:active => true)
  scope :latest, order('created_at desc')
  def self.csv_header
    "First Name,Last Name,Email,Phone,Mobile, Address, FAX, City".split(',')
  end

  def self.build_from_csv(row)
    # find existing customer from email or create new
    cust = find_or_initialize_by_email(row[2])
    cust.attributes ={:first_name => row[0],
                      :last_name => row[1],
                      :email => row[3],
                      :phone => row[4],
                      :mobile => row[5],
                      :address => row[6],
                      :fax => row[7],
                      :city => row[8]}
    return cust
  end

  def to_csv
    [first_name, last_name, email, phone, mobile, address, fax, city]
  end
end 
```

**我的看法：*

```
<h1>Subir Archivos</h1>

<%= form_tag('import', :multipart => true) do %>
  <p>
    File:<br />
    <%= file_field_tag 'file' %><br />
  </p>
  <p>
    <%= submit_tag "subir" %>
  </p>
<% end %> 
```

**我的路线：**

```
Pruebaupcsv::Application.routes.draw do
post "customers/import" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-08T16:52:14.580

您需要`require 'csv'`在使用它之前添加一个，无论是在初始化程序中，还是在控制器的顶部。

# gwt - GWT 移动应用程序不能在移动设备上真正运行的原因可能是什么？

> ID：10502865
> 
> 赞同：2
> 
> 时间：2012-05-08T16:47:43.053
> 
> 标签：gwt, mobile

这可能是什么原因，gwt 移动应用程序实际上不能在手机上运行？我正在使用 ZTE-Blade Android 2.1（在德国 Base Lutea）手机，我在使用这款手机时遇到了 gwt-mobile-apps 的大问题。gwt-apps 正在运行，但是当我触摸 UI 之类的按钮或其他东西时没有反应。

我必须按下按钮可能超过 100 次才能得到反应。每个 gwt 移动应用程序都是如此。

每个 gwt-mobile-app 的按钮之类的 UI 几乎没有反应。我在 gwt 和 PC 上的浏览​​器上编写了一个小应用程序，它运行良好，但在我的手机上却不是。

使用 android 或 jquery-apps 等其他应用程序，没有问题。一切正常，但使用 gwt-mobile-apps 触摸 UI （如按钮）没有反应。

这可能是什么原因？我真的不知道。有人知道这个问题吗？其他设备上的 gwt-mobile-apps 是否有类似的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T10:15:52.313

如果您查看开发人员对这个框架进行最后一次更新的时间，就会发现他们自 2010 年 4 月以来就没有更新过它。

[http://code.google.com/p/gwt-mobile-webkit/](http://code.google.com/p/gwt-mobile-webkit/)

由于移动设备和浏览器的多样性，很难为每种类型的浏览器优化 javascript。

您应该使用最新的框架，例如 jQuery mobile 或 Sencha Touch 2。他们非常专注于这个主题。

[http://jquerymobile.com/](http://jquerymobile.com/)

[http://www.sencha.com/products/touch/](http://www.sencha.com/products/touch/)

sencha 声明：“关于 Android 支持的说明：由于市场上的物理 Android 设备种类繁多，我们只能测试这么多。此支持矩阵并非旨在详尽无遗，而是让您了解支持适用于 Android 设备。您的里程可能会有所不同。” (http://www.sencha.com/products/touch/features/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:24:25.733

看看m-gwt：[http ://www.m-gwt.com](http://www.m-gwt.com)

这是一个用于 GWT 的移动库，效果非常好。它使用核心 GWT 概念（重新绑定、clientbundles、...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T22:46:43.003

我在我的 2.1 android 手机上遇到了同样的问题，唯一的问题是 android 2.1 太旧了。gwtmobile 在较年轻的 android 设备上运行良好。

# prolog - 带有 Prolog 的列表

> ID：10502868
> 
> 赞同：3
> 
> 时间：2012-05-08T16:47:59.980
> 
> 标签：prolog

我正在学习 rooPlog 并且在列表方面遇到了一些麻烦。我想返回一个类列表，这些类是指定类的先决条件。这是我到目前为止...

```
prereq(262, 221).
prereq(271, 262).
prereq(331, 271).

prerequisites(A, B) :- not(prereq(A, C)).
prerequisites(A, [C|B]) :- prereq(A, C), prerequisites(C, B). 
```

它可以工作，但会将垃圾附加到末尾。

```
?- prerequisites(331, A).
A = [271, 262, 221|_G327] ;
false. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:12:19.063

也许你的意思是

```
prerequisites(A, []) :- not(prereq(A, _)).
prerequisites(A, [C|B]) :- prereq(A, C), prerequisites(C, B). 
```

您必须确保数据中没有循环才能使其正常工作...

# objective-c - UINavigation 栏按钮背景图片大小

> ID：10502869
> 
> 赞同：2
> 
> 时间：2012-05-08T16:48:17.997
> 
> 标签：objective-c, ios5

我正在尝试使用此代码段为所有应用程序的左后退按钮导航栏设置图像背景：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    float version = [[[UIDevice currentDevice] systemVersion] floatValue];
    if (version >= 5.0)
    {
        // iPhone 5.0 code here
        UIImage *image = [UIImage imageNamed: @"btn_back.png"];
         image = [image stretchableImageWithLeftCapWidth:40.0f topCapHeight:0.0f];
        [[UIBarButtonItem appearance] setBackButtonBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

    }
    return YES;
} 
```

我一直在 stretchableImageWithLeftCapWidth: 中尝试不同的值：但最好的结果是：

![在此处输入图像描述](../Images/0d082c49f735451290a93ec49dd2fe76.png)

如何将背景图像设置为正确的大小？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:49:01.260

`stretchableImageWithLeftCapWidth:topCapHeight:`已弃用。改为使用`resizableImageWithCapInsets:`。

这应该有效：

```
UIImage *buttonImage = [[UIImage imageNamed:@"btn_back.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(1, 10, 1, 10)];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

# ruby - 使用 Ruby 在 Redmine REST API 请求中指定偏移量和限制

> ID：10502870
> 
> 赞同：1
> 
> 时间：2012-05-08T16:48:19.603
> 
> 标签：ruby, api, redmine

我正在使用 Redmine 的 Ruby REST API（这里：[http](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_ruby) ://www.redmine.org/projects/redmine/wiki/Rest_api_with_ruby ）。我需要能够一次解决 100 个问题中的所有问题。

我知道有一个 options[:offset] 和一个 options[:limit] 方法“api_offset_and_limit”正在寻找。

执行此操作时如何传递这些选项？我尝试将它们作为 GET 选项放在 URL 中，但它们在另一端没有通过。下面给了我前 25 个问题，正如我所期望的那样。

```
class Issue < ActiveResource::Base
  self.site = 'http://redmine.server/'
  self.user = 'foo'
  self.password = 'bar'
end

# Retrieving issues
issues = Issue.find(:all) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T21:14:00.860

我不熟悉 API，但是按照您描述它的方式，以下应该可以工作：

```
issues = Issue.find(:all, :params => {:offset => 0, :limit => 100}) 
```

# sql - 为什么我会费心使用全文搜索？

> ID：10502872
> 
> 赞同：6
> 
> 时间：2012-05-08T16:48:45.617
> 
> 标签：sql, sql-server, full-text-search

我是全文搜索的新手，我使用了以下查询

```
Select * From Students Where FullName LIKE '%abc%' 
```

学生表包含数百万条随机记录，看起来像这样 'QZAQHIEK VABCNLRM KFFZJYUU'

只用了 2 秒就产生了 1100 行。 **如果在两秒钟内搜索到百万条记录，为什么我还要费心使用全文搜索？！！Like 谓词是否也使用了全文索引？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T16:55:33.687

不，LIKE 不使用全文索引。[看这里。](http://msdn.microsoft.com/en-us/library/ms142571.aspx#like)

这些天计算机的速度非常快，但是如果您看到搜索结果的速度比您预期的要快，那么您可能只是简单地返回了一个缓存的结果集，因为您之前执行了相同的查询。为确保您没有获得缓存结果，您可以使用 DBCC DROPCLEANBUFFERS。查看[这篇文章](https://stackoverflow.com/questions/1873025)，了解一些 SQL Server 缓存清除选项。

链接页面的摘录：

**将 LIKE 与全文搜索进行比较**

与全文搜索相比，LIKE Transact-SQL 谓词仅适用于字符模式。此外，您不能使用 LIKE 谓词来查询格式化的二进制数据。此外，针对大量非结构化文本数据的 LIKE 查询比针对相同数据的等效全文查询要慢得多。对数百万行文本数据的 LIKE 查询可能需要几分钟才能返回；而对于相同的数据，全文查询可能只需要几秒钟或更短的时间，具体取决于返回的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:05:04.017

我想你已经回答了你自己的问题，至少让你自己满意。如果您的原型设计在可接受的时间内产生结果，并且您确定缓存不能解释快速响应（根据 Paul Sasik），请务必跳过全文索引的开销并继续使用 LIKE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:59:33.827

[如果您关心对结果集或词干进行排序，您可能对全文搜索感兴趣。](http://msdn.microsoft.com/en-us/library/ms142571.aspx#like)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T17:02:03.357

不，实际上您的示例查询甚至不能利用常规索引来加快速度，因为它不知道任何潜在匹配的第一个字母。

一般来说，全文搜索比常规查找要快。但是 LIKE 的速度要慢得多。

# php - wkhtmltopdf 无法将本地页面转换为 PDF

> ID：10502873
> 
> 赞同：1
> 
> 时间：2012-05-08T16:48:48.093
> 
> 标签：php, pdf, wkhtmltopdf

我一直在尝试让 wkhtmltopdf 转换网站上的页面，但它无法转换相同的页面。它将转换和存储外部页面（用 google 和 bbc.co.uk 尝试过，两者都有效）所以权限很好但是如果我尝试转换本地页面，无论是静态 html 文件还是由脚本生成的，失败前大约需要 3 分钟。

输出显示页面加载失败，如果强行忽略这个，我会得到一个空白的 PDF。

我认为这可能是会话锁定，但关闭会话会导致同样的问题。我觉得这取决于服务器的行为方式

这是有问题的代码：

```
 session_write_close ();
    set_time_limit (0);
            ini_set('memory_limit', '1024M');
    Yii::app()->setTheme("frontend");

    // Grabbing the page name
    $ls_url = Yii::app()->request->getHostInfo().Yii::app()->request->url;

    // Let's remove the PDF otherwise we'll be in endless loop
    $ls_url = str_replace('.pdf','',$ls_url);

    // Setting paths
    $ls_basePath = Yii::app()->basePath."/../extras/wkhtmltopdf/";
    if(PHP_OS=="Darwin")
        $ls_binary = $ls_basePath . "wkhtmltopdf-osx";
    else 
        $ls_binary = $ls_basePath . "wkhtmltopdf";

    $ls_generatedPagesPath = $ls_basePath . "generated-pages/";
    $ls_outputFileName = str_replace(array("/",":"),"-",$ls_url)."--".date("dmY-His").".pdf";
    $ls_outputFile = $ls_generatedPagesPath. $ls_outputFileName;

    // making sure no nasty chars are in place
    $ls_command = escapeshellcmd($ls_binary ." --load-error-handling ignore " . $ls_url . " " . $ls_outputFile);

    // Let's run things now
    system($ls_command); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:11:42.973

你`lynx`有那个确切的网址吗？由于 wkhtmltopdf 实际上是一个小巧但功能强大的 webkit 浏览器，因此它会像普通浏览器一样出现故障。

检查您提供的 URL，检查您页面中的外部 URL 是否可以从您的服务器访问。它会在开始制作 PDF 之前加载 CSS、外部图像、iframe 以及所有内容。

就个人而言，我喜欢 wkhtmltpdf。没有什么能比得上它。

# semantics - 如何在您自己的网站中包含 rel="author"？

> ID：10502874
> 
> 赞同：1
> 
> 时间：2012-05-08T16:48:54.757
> 
> 标签：semantics, markup, author, rel

据我所知，rel 属性只能与链接一起使用，所以我目前的方法

```
<h1><span rel="author">Peter M......</span>'s website</h1> 
```

似乎是无效的（即使它正在使用谷歌的丰富片段验证器）。那么，当我不想链接到任何外部网站（如 g+、twitter 等）时，我将如何使用 rel="author" 属性……（指向我自己网站的链接（在我的网站上）并不完全正确）对我有感觉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:47:28.060

如果您的网站域有一个电子邮件地址，另一种选择是[使用电子邮件地址验证作者身份。](https://plus.google.com/authorship)

你说你不想使用外部链接，但是像

`<link href='https://plus.google.com/[your G+ id]' rel='author'/>`

对我来说效果很好。

[Schema.org](http://Schema.org)显然是不可预测的。您可能应该将[某人](http://schema.org/Person)标记为作者，这意味着您可能需要大量标记。

# javascript - 在 D3 中移动固定节点

> ID：10502877
> 
> 赞同：8
> 
> 时间：2012-05-08T16:49:20.313
> 
> 标签：javascript, d3.js, force-layout

我在 D3 强制导向布局中有节点设置为 . *固定*=真。如果我设置 .x 或 .y 值，节点本身不会移动到新位置。

这是我的功能：

```
function fixNode(idArray, locationX, locationY) {
    for ( x = 0; x < idArray.length; x++ ) {
        for ( y = 0; y < nodes.length; y++ ) {
            if (nodes[y].id == idArray[x]) {
                nodes[y].fixed = true;
                nodes[y].x = 50;
                nodes[y].y = 50;
                break;
            }
        }
    }
} 
```

**更新 1：**

这是基于 Jason 建议的工作功能：

```
function fixNode(idArray, locationX, locationY) {
    for ( x = 0; x < idArray.length; x++ ) {
        for ( y = 0; y < nodes.length; y++ ) {
            if (nodes[y].id == idArray[x]) {
                nodes[y].fixed = true;
                nodes[y].x = 50;
                nodes[y].y = 50;
                nodes[y].px = 50;
                nodes[y].py = 50;
                break;
            }
        }
    }
    tick();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-08T22:24:44.797

力导向布局与实际渲染分离。通常你有一个刻度处理程序，它会为布局算法的每个“刻度”更新你的 SVG 元素的属性（关于解耦的好处是你渲染到 a`<canvas>`而不是其他东西）。

因此，要回答您的问题，您只需直接调用此处理程序即可更新 SVG 元素的属性。例如，您的代码可能如下所示：

```
var node = …; // append circle elements

var force = d3.layout.force()
    .nodes(…)
    .links(…)
    .on("tick", tick)
    .start();

function tick() {
  // Update positions of circle elements.
  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
} 
```

因此，您可以在任何时候简单地调用`tick()`并更新元素位置。

您可能很想调用`force.tick()`，但这旨在用作 的同步替代方案`force.start()`：您可以重复调用它，并且每次调用都会执行布局算法的一个步骤。但是，有一个内部[`alpha`](https://github.com/mbostock/d3/wiki/Force-Layout#wiki-alpha)变量用于控制内部使用的模拟退火，一旦布局“冷却”，此变量将不再有效`0`，进一步调用`force.tick()`将无效。（诚​​然，如果不管冷却如何总是触发一个滴答事件可能会很好`force.tick()`，但这不是当前的行为）。

正如您在评论中正确指出的那样，如果您手动设置`d.x`and ，如果您希望节点保持在某个位置`d.y`，您还应该使用相同的值设置`d.px`and 。`d.py`

# c# - 系统启动/重新启动时 WMI 调用需要太多时间

> ID：10502879
> 
> 赞同：2
> 
> 时间：2012-05-08T16:49:42.803
> 
> 标签：c#, .net, performance, windows-services, wmi

我想获取 Windows 服务的路径，

```
var managementObjectSearcher = new ManagementObjectSearcher("Select * from Win32_Service where serviceName = MyService"); 
```

这段代码是由其他一些服务的构造函数编写的......

当系统启动并运行时，一切正常，但是如果我重新启动系统，则为这个调用放置 StopWatch 类，它表明它表明服务需要 35-45 秒才能启动，因为这个调用..

任何提高系统重启性能的建议......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T17:05:17.963

Windows32_Services 类不存在，因此假设您使用的是[`Win32_Service`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418%28v=vs.85%29.aspx)WMI 类，您可以只返回您想要使用的属性来提高性能，在这种情况下`PathName`，将您的 WQL 语句更改为

```
SELECT PathName FROM Win32_Service Where Name='MyService' 
```

**更新**

对[@Bacon](https://stackoverflow.com/users/150605/bacon)的观察非常正确，因为您知道要检索的服务的名称，您可以构建 Win32_Service 的对象路径，如下所示

```
Win32_Service.Name="ServiceName" 
```

然后使用[`ManagementObject`](http://msdn.microsoft.com/en-us/library/yeteazb7.aspx)该类，您可以以最快的方式将实例检索到服务中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T19:18:32.607

由于您通过 检索服务`Name`，它是 的关键属性，因此请[`Win32_Service class`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394418.aspx)尝试直接检索实例而不是搜索它：

```
string GetMyServicePath()
{
    string path = "Win32_Service.Name=\"MyService\"";

    using (ManagementObject service = new ManagementObject(path))
        return (string) service.GetPropertyValue("PathName");
} 
```

这是我汇总的一个快速基准，用于比较直接检索与搜索：

```
private const int LoopIterations = 1000;

private const string ServiceClass = "Win32_Service";
private const string ServiceName = "MyService";
private const string ServiceProperty = "PathName";

private static readonly string ServicePath = string.Format("{0}.Name=\"{1}\"", ServiceClass, ServiceName);
private static readonly string ServiceQuery = string.Format(
    "SELECT {0} FROM {1} Where Name=\"{2}\"",
    ServiceProperty, ServiceClass, ServiceName
);
private static ManagementObjectSearcher ServiceSearcher = new ManagementObjectSearcher(ServiceQuery);

static void Main(string[] args)
{
    var watch = new Stopwatch();

    watch.Start();
    for (int i = 0; i < LoopIterations; i++)
    {
        var servicePath = GetServicePathByKey();
    }
    watch.Stop();
    Console.WriteLine(
        "{0:N0} iterations of GetServicePathByKey() took {1:N0} milliseconds",
        LoopIterations, watch.ElapsedMilliseconds
    );

    watch.Restart();
    for (int i = 0; i < LoopIterations; i++)
    {
        var servicePath = GetServicePathFromExistingSearcher();
    }
    watch.Stop();
    Console.WriteLine(
        "{0:N0} iterations of GetServicePathFromExistingSearcher() took {1:N0} milliseconds",
        LoopIterations, watch.ElapsedMilliseconds
    );

    watch.Restart();
    for (int i = 0; i < LoopIterations; i++)
    {
        var servicePath = GetServicePathFromNewSearcher();
    }
    watch.Stop();
    Console.WriteLine(
        "{0:N0} iterations of GetServicePathFromNewSearcher() took {1:N0} milliseconds",
        LoopIterations, watch.ElapsedMilliseconds
    );
}

static string GetServicePathByKey()
{
    using (var service = new ManagementObject(ServicePath))
        return (string) service.GetPropertyValue(ServiceProperty);
}

static string GetServicePathFromExistingSearcher()
{
    using (var results = ServiceSearcher.Get())
    using (var enumerator = results.GetEnumerator())
    {
        if (!enumerator.MoveNext())
            throw new Exception();

        return (string) enumerator.Current.GetPropertyValue(ServiceProperty);
    }
}

static string GetServicePathFromNewSearcher()
{
    using (var searcher = new ManagementObjectSearcher(ServiceQuery))
    using (var results = searcher.Get())
    using (var enumerator = results.GetEnumerator())
    {
        if (!enumerator.MoveNext())
            throw new Exception();

        return (string) enumerator.Current.GetPropertyValue(ServiceProperty);
    }
} 
```

直接枚举搜索结果的速度与我所能达到的速度差不多，比使用`foreach`块快一点，比使用`LINQ`. 在我的 64 位 Windows 7 Professional 系统上，`ServiceName`常量设置为`Power`我得到了以下结果：

```
1,000 iterations of GetServicePathByKey() took 8,263 milliseconds
1,000 iterations of GetServicePathFromExistingSearcher() took 64,265 milliseconds
1,000 iterations of GetServicePathFromNewSearcher() took 64,875 milliseconds 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T20:02:29.403

如果是 WMI 的“延迟”困扰您，您不必使用 WMI 来获取服务的路径，即。可执行文件名。您还可以 P/调用[QueryServiceConfig](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684932%28v=vs.85%29.aspx)。

[http://www.pinvoke.net/default.aspx/advapi32/queryserviceconfig.html](http://www.pinvoke.net/default.aspx/advapi32/queryserviceconfig.html)

# jquery - JQuery Datepicker针对不同实例的不同样式

> ID：10502881
> 
> 赞同：1
> 
> 时间：2012-05-08T16:50:04.663
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我在同一页面的两个地方使用 jQuery datepicker。但我想给他们不同的风格。当他们都拥有相同的课程时，我该怎么做？

代码：

```
$('#startDate').datepicker({ dateFormat: "DD, MM d, yy" });
$('#endDate').datepicker({ dateFormat: "DD, MM d, yy" }); 
```

这两个日期选择器看起来应该不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:19:45.437

当您下载 jQuery UI 时，您可以为您的主题指定 CSS 范围。当您转到[下载页面](http://jqueryui.com/download)时，单击“高级主题设置”的下拉菜单。

![在此处输入图像描述](../Images/10c1d0613806ece7a0a70fb3e7df8b5c.png)

为了利用主题范围，您首先需要选择一个主题。当您在 ThemeRoller 中下载主题时，您将再次被引导回下载构建器以自定义您的下载。

**主题范围字段是您输入 CSS 选择器的地方，该选择器代表您的主题应应用的页面（或网站）的一部分。例如，如果您在站点的侧导航栏中有一个手风琴小部件，并且您希望它具有与站点其他区域不同的主题，则可以键入与该侧导航列对应的 CSS 选择器（例如 .内部导航）并下载您的主题。构建器也会在您的范围选择器之后添加一个空格，因此不必担心需要添加一个空格。**

当您键入 CSS 范围时，构建器将建议一个相应的主题文件夹名称。此名称可以编辑，它不会自动建议另一个名称，除非您在范围字段中键入时文件夹字段为空或未编辑。

下载并解压缩 zip 文件后，您会看到它包含一个名为“theme”（或您输入的任何自定义名称）的主题文件夹。在该文件夹中，您将找到构成 jQuery UI CSS 框架的所有文件。假设您在 Theme Scope 字段中输入了一个范围，则此文件夹中包含的所有 CSS 都将作用于您的选择器。

要在您的页面中包含此主题，只需将 CSS 链接指向“theme_internalNavigation”文件夹中的 ui.all.css。

```
<link type="text/css" href="theme_interiorNavigation/ui.all.css" rel="Stylesheet" /> 
```

可以在[灯丝组](http://www.filamentgroup.com/lab/using_multiple_jquery_ui_themes_on_a_single_page/)页面上找到其他帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:10:22.137

幸运的是，我改变了设计。我的一个日期选择器现在必须是内联的，另一个是普通的日期选择器。我编写了这段代码来实现所需的样式：

```
<input type="text" name="startDate" id="startDate" onclick="applyDatepickerBorder();"/> 
```

在 Javascript 中，我定义了这个方法：

```
function applyDatepickerBorder(){
    // Inline datepicker doesn't have this id
    $('#ui-datepicker-div').css('border','1px solid');
} 
```

这是我最终得到的：

![在此处输入图像描述](../Images/750d3c889b91e073d706dc89b46825a3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T12:12:44.497

您也可以使用 beforeShow 功能，

> 例如。更改数据选择器宽度：

```
$('#input-field-id')
    .datepicker({ 
        beforeShow: function(input_element, dp_instance){
            setTimeout(function(){
                // enter your styling here 
                $(dp_instance.dpDiv).css('width', '300px');
            },1, dp_instance);
        }
    }); 
```

# r - R biglm 与分类变量

> ID：10502882
> 
> 赞同：8
> 
> 时间：2012-05-08T16:50:04.923
> 
> 标签：r

我使用一些`big.___()`包在 R 中使用了一个大型数据集。大约 10 gigs (100mmR x 15C)，看起来像这样：

```
Price         Var1         Var2
12.45          1             1
33.67          1             2
25.99          3             3
14.89          2             2
23.99          1             1
...            ...          ... 
```

我正在尝试根据 Var1 和 Var2 预测价格。

我提出的问题是 Var1 和 Var2 是分类/因子变量。
Var1 和 Var2 各有 3 个级别（1,2 和 3）但数据集中只有 6 个组合

```
(1,1;  1,2;  1,3;  2,2;  2,3;  3,3) 
```

要在其中使用因子变量，`biglm()`它们必须存在于使用的每个数据块中`biglm`（我的理解是，`biglm`将数据集分解为“x”个块，并在分析每个块后更新回归参数，以便绕过处理数据集大于 RAM）。

我试图对数据进行子集化，但我的计算机无法处理它或者我的代码错误：

```
bm11 <- big.matrix(150000000, 3)
bm11 <- subset(x, x[,2] == 1 & x[,3] == 1) 
```

上面给了我一堆这些：

```
Error: cannot allocate vector of size 1.1 Gb 
```

有人对解决此问题有任何建议吗？

我在带有 4 GB RAM 的 Windows 7 机器上使用 R 64 位。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T17:52:32.950

您不需要每个块中存在的所有数据或所有值，您只需要考虑所有级别。这意味着您可以拥有这样的块：

```
curchunk <- data.frame( Price=c(12.45, 33.67), Var1=factor( c(1,1), levels=1:3), 
  Var2 = factor( 1:2, levels=1:3 ) ) 
```

它会起作用。即使 Var1 中只有 1 个值，Var2 中只有 2 个值，但所有三个级别都存在于两者中，因此它会做正确的事情。

也`biglm`不会为您将数据分成块，但希望您给它提供可管理的块来使用。通过示例来更好地了解这一点。一种常见的方法`biglm`是从文件或数据库中读取，读取前“n”行（其中“n”是一个合理的子集）并将它们传递给`biglm`（可能在确保所有因素都具有指定的所有级别之后），然后从内存中删除该数据块并读取下一个'n'行并将其传递给`update`，继续此操作直到文件末尾每次删除已使用的块（因此您有足够的内存空间用于下一个）。

# javascript - 在网页上显示漫画书文件？

> ID：10502885
> 
> 赞同：3
> 
> 时间：2012-05-08T16:50:17.030
> 
> 标签：javascript, jquery, html, plugins, ziparchive

我正在考虑创建一个网页，并且正在尝试集思广益一些在页面中显示它们的方法。

如果我想自己弄脏并创建所有东西，我想我可以使用 html5、CSS3 和 javascript/jquery 来完成。只需做一些带有图像标签的页面按钮，然后可能会在它出现时进入一些更详细的内容（我不知道我将如何进行缩放和多页）。

但是我真正想知道的是，是否已经有某种方法可以做到这一点？我环顾四周，似乎找不到任何可以读取 cbz 文件或显示一组带有“电子阅读器”类型工具的图像的插件。只是想知道是否有人知道任何事情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:25:52.990

我曾经使用在线阅读器很长一段时间，所以我开始了一个实验，自己构建了一个：[netcomix](https://github.com/JohnMunsch/netcomix)

它是开源的，所以你可以看看我所做的是否有什么吸引人的地方。我想我会用 HTML、CSS 和 JavaScript 在客户端完成所有真正的 UI 工作，并且服务器严格负责充当服务（例如，提供漫画列表或所有页面的列表）特定问题）并提供单独的 JPG/PNG/GIF 文件。这很好地划分了事物，我很高兴 jQuery BBQ 给了我一段历史，即使我一直呆在一个页面上，我也可以回顾过去。

现在，如果我要再次做同样的实验，我会使用 Backbone.js 为客户端提供一些结构，显然它需要很多的爱，因为服务器端目前真的什么都不做。早期版本是严格硬编码的，尽管我开始在最新版本中放入一些简单的 SQL 内容。不过，这只不过是一个实验，应该这样对待。它是为了想法而存在的。如果您觉得它很有趣并且想要更多想法，请与我联系，我很乐意让您知道我对此类程序的所有古怪想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-08T19:32:59.047

我知道这是一个老问题。但是网络技术在过去几年里变得更好了。有几个漫画书阅读器可以使用纯 HTML 和 JavaScript 在浏览器中工作。我写了一个叫：[http](http://comic-book-reader.com) ://comic-book-reader.com 。

如果你想看一个非常简单的例子，说明如何在浏览器中读取 CBR 和 CBZ 文件。您应该查看使用 JavaScript 库的[http://workhorsy.github.io/uncompress.js/examples/simple/index.html](http://workhorsy.github.io/uncompress.js/examples/simple/index.html) [https://github.com/workhorsy/uncompress.js](https://github.com/workhorsy/uncompress.js)

# d3.js - 防止模板丢弃 DOM 元素

> ID：10502886
> 
> 赞同：7
> 
> 时间：2012-05-08T16:50:18.840
> 
> 标签：d3.js, meteor

我正在尝试将`D3.js`可视化集成到 Meteor 应用程序中。`<div>`页面加载后，D3 函数根据可用数据将 DOM 元素注入到我的模板中。

然而，每当页面上的任何地方有响应式更新时，Meteor 都会转储由我的 D3.js 函数注入的模板的内容。我可以重新插入元素，但这会导致不希望的闪烁和性能下降。

关于如何抑制这种外部注入元素的下降的任何想法？我认为，由于这些元素最初不是模板的一部分，因此它们在 Meteor 的“清理”过程中被丢弃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T23:43:25.623

您是否尝试过为 D3 注入的元素（或至少是父元素）赋予唯一的 ID？从文档（http://docs.meteor.com/#livehtml）：

> 只需确保您的每个可聚焦元素都具有唯一的 id，或者在具有 id 的最近的父级中具有唯一的名称。Meteor 将保留这些元素，即使它们的封闭模板被重新渲染，但仍会更新它们的子元素并复制任何属性更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T14:32:57.933

随着版本 0.4.0 中 Spark 模板引擎的引入，他们引入了 {{#constant}} 块助手来解决这个问题。

[http://meteor.com/blog/2012/08/31/introducing-spark-a-new-live-page-update-engine](http://meteor.com/blog/2012/08/31/introducing-spark-a-new-live-page-update-engine)

您的 html 模板应该看起来像这样......

```
<template name="samplePageTemplate">
    <div id="samplePage" class="page">
        {{#constant}}
        <div id="sampleGraph"></div>
        {{/constant}}
    </div>
</template> 
```

javascript应该看起来像这样......

```
Template.samplePageTemplate.destroyed = function () {
    this.handle && this.handle.stop();
};
Template.samplePageTemplate.rendered = function () {
    self.node = self.find("svg");
    if (!self.handle) {
        self.handle = Meteor.autorun(function(){

            $('#sampleGraph').html('');
            renderChart();

        });
    };
};

function renderChart(){

    // lots of d3 chart specific stuff 

    var vis = d3.select("#sampleGraph").append("svg:svg")
        .attr("width", window.innerWidth)
        .attr("height", window.innerHeight)
        .append("svg:g")
        .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

    // more d3 chart specific stuff

    });
}; 
```

我有时不得不使用 self.node 而不是 self.handle，但否则它应该是相当直接的。

# vba - 创建绝对目录> 256个字符的文件夹树？

> ID：10502888
> 
> 赞同：2
> 
> 时间：2012-05-08T16:50:33.420
> 
> 标签：vba, windows-7, excel

我有一个 Excel VBA 宏，它基于 Excel 文件创建文件夹树。

我当前的问题是，每次绝对目录变得很长时，我似乎都会遇到错误。

程序将抛出运行时错误 76（找不到路径）。我有一种感觉，这是因为脚本引用了超过 256 个字符的绝对路径。

有什么解决方法吗？或者是我唯一的选择来缩短文件夹名称，从而缩短绝对路径字符串？

***编辑***

我正在使用的代码如下：

```
Dim asheet As Range, r As Range, c As Range
Dim fPath As String, tmp As String

Set asheet = ActiveSheet.UsedRange

For Each r In asheet.Rows
    fPath = DEST_FOLDER
    For Each c In r.Cells
        tmp = Trim(c.Value)
        If Len(tmp) = 0 Then
            Exit For
        Else
            tmp = Clean(tmp)
            fPath = fPath & tmp & "\"
            If Len(Dir(fPath, vbDirectory)) = 0 Then MkDir fPath
        End If
    Next c
Next r 
```

Clean() 是一个自定义函数，它将简单地从字符串中删除特殊字符，即！、#、_、@、$、&、*、^ 和 %。

是否有另一种方法可以用来创建这些文件夹，这些文件夹可能会使用相对路径而不是绝对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:58:28.530

Windows API在某些情况下[限制为 260 个字符](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#maxpath)（C:\ + 256 个字符 + ）。如果您参考上一个问题，您是否尝试过使用`SHFileOperationW`而不是`SHFileOperationA`？

# bash - Bash-script：如何将命令与变量名结合起来？

> ID：10502889
> 
> 赞同：1
> 
> 时间：2012-05-08T16:50:37.333
> 
> 标签：bash

我正在编写一个 bash 脚本。我希望能够在 bash 脚本中包含的以下行中更改分配给 -tot_src 等的数字。我该怎么做呢？

```
./eperftool -tot_src=250 -tot_rep=200 -loss=3:200 
```

第一步是声明例如以下内容：

```
TOT_SRC = 273 
```

我尝试了以下方法，但它不起作用：

```
 ./eperftool -tot_src=$TOT_SRC -tot_rep=200 -loss=3:200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:14:18.520

与大多数编程语言相比，bash 对赋值中的空格很敏感。

正确的：

```
TOT_SRC=273 
```

错误的：

```
TOT_SRC = 273 
```

# php - 用于 Amazon SES 的 phpMailer DKIM 签名

> ID：10502892
> 
> 赞同：0
> 
> 时间：2012-05-08T16:50:46.050
> 
> 标签：php, mailer, dkim

我在 AWS EC2 下运行一个虚拟机，它是一个交钥匙 Linux，AFAIK 基于 Ubuntu / Debian。

我有一个在 Wordpress 上运行的网站，它拥有大约 10.000 人的 Newsletter 订阅者群，所以我想使用 Amazon SES 发送电子邮件，既便宜又好送达率。

问题是我必须自己对电子邮件进行 DKIM 签名...所以我使用的是基于 phpMailer 的 Wordpress 插件。

插件正确发送电子邮件，我的 SPF 记录很好，Amazon SES 运行良好，唯一的问题是 DKIM SIGN - 电子邮件未正确签名。

我被困@插件尝试执行**openssl_pkey_get_private**的点- 它应该返回一些东西，但它什么也不返回。它还会在 openssl_error_string() 对象上抛出错误，如下所示：

```
error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt 
```

此错误不会停止脚本，我必须挖掘才能找到它。

好吧，然后脚本继续运行，因为它尝试使用空的 privKey 进行 openssl_sign。

结果是一封无法验证 DKIM 的电子邮件。以下是我的 Gmail 收件箱中的 DKIM 标头：

```
DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=233; s=ses;
    t=1336494976; c=relaxed/simple;
    h=From:To:Subject;
    d=joaodedeus.com.br;
    z=From:=20=3D?UTF-8?Q?Casa_Dom_In=3DC3=3DA1cio_de_Loyola?=3D=20<novidades@joaodedeus.com.br>
    |To:=20ddutra@cristalinacomunicacao.com.br
    |Subject:=20Test=20message=20from=20your=20WordPress=20blog;
    bh=Z+aAYGyi+5Sk1vIJcjjdy28rCuQ=;
    b= 
```

以下是[http://www.brandonchecketts.com/emailtest.php](http://www.brandonchecketts.com/emailtest.php)关于这封电子邮件的 DKIM 标志的说明：

```
result = fail
Details: OpenSSL error: data too small for key size

Message contains this DKIM Signature:
DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=270; s=ses;
    t=1336494983; c=relaxed/simple;
    h=From:To:Subject;
    d=joaodedeus.com.br;
    z=From:=20=3D?UTF-8?Q?Casa_Dom_In=3DC3=3DA1cio_de_Loyola?=3D=20
    |To:=20fb7oNYUCwX@www.brandonchecketts.com
    |Subject:=20Test=20message=20from=20your=20WordPress=20blog;
    bh=LVAqBtz26jyffwhHPhhXdLQOLhA=;
    b=

Signature Information:
v= Version:         1
a= Algorithm:       rsa-sha1
c= Method:          relaxed/simple
d= Domain:          joaodedeus.com.br
s= Selector:        ses
q= Protocol:        dns/txt
bh=                 LVAqBtz26jyffwhHPhhXdLQOLhA=
h= Signed Headers:  From:To:Subject
b= Data:

**Public Key DNS Lookup**
Building DNS Query for ses._domainkey.joaodedeus.com.br
Retrieved this publickey from DNS: v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDYCkhM+6KDL5ndu4uhaP+jBp1BYBVN8Z8/BnXJ7JFc/HXcqW9Emt1vgmlcVqzBcHLFLk6GRRMbm4RIgOV1TCkr41ZTB8UYCjmUB6qqSY88hCdVIBQmTHgxq2DWhzlWiiOlqzeIQuMiMc0lgEaO8Zq3+d5gntPZXoxmTPQH32zA7wIDAQAB 
```

以下是 phpmailer DKIM_Sign 函数尝试执行的操作：

```
 public function DKIM_Sign($s) { 
    $privKeyStr = file_get_contents($this->DKIM_private);
    if ($this->DKIM_passphrase!='') {
      $privKey = openssl_pkey_get_private($privKeyStr,$this->DKIM_passphrase);
    } else {
      $privKey = $privKeyStr;
    }
    $privKey = $privKeyStr;
    if (openssl_sign($s, $signature, $privKey)) {
      return base64_encode($signature);
    }
  } 
```

问题是 openssl_pkey_get_private 什么都不返回。然后 openssl_sign 函数尝试使用**EMPTY** $privKey 进行签名。

$privKeyStr 正确读取密钥（file_get_contents），如果我回显它，它的内容与密钥相同。

$this->DKIM_passphrase 也是正确的，**j0@0d3deus5**。

这是我按照 Wordpress Amazon SES DKIM Mailer 插件的说明生成密钥的方式：

```
openssl genrsa -des3 -passout pass:change-me -out .htkeyprivate 1024 && openssl rsa -in .htkeyprivate -passin pass:change-me -pubout -out .htkeypublic 
```

当然，我将 pass:change-me 更改为正确的密码，**j0@0d3deus5**。

我不能没有 DKIM。似乎hotmail严重依赖它。

这是我的 hotmail 帐户中的一个示例 -> 请注意，由于 DKIM 错误，它会直接进入垃圾文件夹。

```
x-store-info:4r51+eLowCe79NzwdU2kRyU+pBy2R9QCQ1WNUtV+VDcgEpN5KOTd9UyMPxTZoGJzS/h26zeEkCEVmH2zMg90yYxKot4DO0sKOsk98MBHLTNpOuzjxN5a42AR5Kz/5hEhx7XveDgnXqY=
Authentication-Results: hotmail.com; sender-id=pass (sender IP is 199.255.192.147) header.from=novidades@joaodedeus.com.br; dkim=permerror header.d=joaodedeus.com.br; x-hmca=pass
X-SID-PRA: novidades@joaodedeus.com.br
X-DKIM-Result: PermError
X-Message-Status: n:0:n
X-SID-Result: Pass
X-AUTH-Result: PASS
X-Message-Delivery: Vj0xLjE7dXM9MDtsPTA7YT0wO0Q9MjtHRD0yO1NDTD00
X-Message-Info: 11chDOWqoTkwLXPc6a+BBmU8PZ8Fa4uSQFuX56QoKCDSXsl9i7U4MyfUnfj2m3DtVW2PyTXMqyT/fwR9UtNuG4HNxTPmpoMwQBL+DemPeAzSpRs8zDKsN3uVpfPKiw+g1EW50e42Qd0=
Received: from a192-147.smtp-out.amazonses.com ([199.255.192.147]) by BAY0-MC4-F33.Bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4900);
     Tue, 8 May 2012 10:26:29 -0700
X-PHPMAILER-DKIM: phpmailer.anatta.com
DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=233; s=ses;
    t=1336497986; c=relaxed/simple;
    h=From:To:Subject;
    d=joaodedeus.com.br;
    z=From:=20=3D?UTF-8?Q?Casa_Dom_In=3DC3=3DA1cio_de_Loyola?=3D=20<novidades@joaodedeus.com.br>
    |To:=20dmnq_sl@hotmail.com
    |Subject:=20Test=20message=20from=20your=20WordPress=20blog;
    bh=X6QtcRzw7+F7llznB77GikLQnko=;
    b= 
```

欢迎任何帮助。

最好的问候和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:48:07.903

我得到了这个插件的工作：

[http://wordpress.org/extend/plugins/amazon-ses-and-dkim-mailer/](http://wordpress.org/extend/plugins/amazon-ses-and-dkim-mailer/)

不要忘记授予私钥文件正确的权限。它不必位于根目录之下。

但是，我仍然无法签署 HTML 电子邮件。现在正在努力！

编辑：

通过确保对所有内容进行正确编码来获得正确的 DKIM。这有帮助：[为什么 DOM 会更改编码？](https://stackoverflow.com/questions/2236889/why-does-dom-change-encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:21:03.693

我注意到如果您使用 SMTP API 发送 DKIM 是有效的，但使用 REST API DKIM 会失败。

这很奇怪，因为我正在使用该`SendRawEmail`操作来发送内容`GetSentMIMEMessage`

欢迎任何建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-18T17:47:17.467

如果您收到**OpenSSL 错误：对于密钥大小而言数据太小，**这意味着 SSL 无法基于 chroot/dev/urandom 或 DKIM_private 路径生成密钥是错误的 - 顺便说一句没有错误。

最好的方法是检查chrooted **/urandom**然后检查**Selinux 是否有 php-fpm**错误

[https://stackoverflow.com/a/57977815/979474](https://stackoverflow.com/a/57977815/979474)

# python - Face.com API 从 python 上传图片

> ID：10502893
> 
> 赞同：0
> 
> 时间：2012-05-08T16:50:48.153
> 
> 标签：python, api, http, post, mime

我正在尝试将图像上传到 Face.com API。它要么需要一个图片的 url，要么可以直接上传图片。[他们的网站](http://developers.face.com/docs/api/faces-detect/)说：

> 上传照片的请求必须形成为使用 POST 数据发送的 MIME 多部分消息。每个参数，包括原始图像数据，都应指定为单独的表单数据块。

问题是，我不知道这到底是什么意思。现在我的代码如下所示：

```
import urllib
import json

apikey = "[redacted]"
secret = "[redacted]"

img = raw_input("Enter the URL of an image: ");

url = "http://api.face.com/faces/detect.json?api_key=" + apikey + "&api_secret=" + secret + "&urls=" + urllib.quote(img) + "&attributes=all"
data = json.loads(urllib.urlopen(url).read()) 
```

如何将其转换为使用本地存储的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:23:17.000

将 Python 中的照片上传到 face.com API 的最简单方法是使用可以从[http://developers.face.com/download/](http://developers.face.com/download/)下载的 Python 客户端库。

你有2个。两者都支持通过将文件名传递给检测到的方法来上传（作为与 url 不同的参数）。

# c - 将值设置为数组（初始化后）

> ID：10502895
> 
> 赞同：0
> 
> 时间：2012-05-08T16:50:56.860
> 
> 标签：c, arrays, variable-assignment

这似乎是一个简单的问题，但我无法理解它......

我想根据某些条件以最优雅的方式设置数组的元素。

这是我的非编译伪代码：

```
float*array=NULL;
switch(elements) {
  case 1: array={1}; break;
  case 2: array={7, 1}; break;
  case 3: array={3, 2, -1}; break;
  case 4: array={10, 20, 30, 40}; break;
  default:break;
} 
```

数组的大小是有限的，所以我可以做一些类似'float array[16];'的事情 同样，但问题显然是案例陈述中的分配。

我真的*不想*做类似的事情：

```
case 2: array[0]=1; array[1]=2; 
```

我目前（笨拙）的实现是：

```
#define ARRAYCOPY(dest, src) for(int i=0;i<sizeof(src)/sizeof(*src);i++)dest[i]=src[i]
// ...
case 2: do {float*vec={1, 2}; ARRAYCOPY(array, vec); } while(0); break; 
```

我正在使用 ARRAYCOPY 定义，因为 memcpy() 似乎不起作用。至少在做

```
float*vec={1, 2}; memcpy(array, vec, sizeof(vec)/sizeof(*vec); 
```

没有将任何值填充到数组中。

我想一定有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:02:24.200

中有`memcpy`函数`<string.h>`，与您实现的类似`ARRAYCOPY`。它复制给定大小的内存块，在您的情况下，此大小是数组中的元素数 * 数组中元素的大小。

[http://www.cplusplus.com/reference/clibrary/cstring/memcpy/](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)

```
memcpy(destination_array, source_array, number_of_elements * size_of_element); 
```

所以，你会有

```
// let's allocate exactly as much space as is needed
float* array = (float*)malloc(elements * sizeof(float));

// and now copy the elements we want
switch(elements) {
  case 1: memcpy(array, (float[]){1}, 1 * sizeof(float)); break;
  case 2: memcpy(array, (float[]){1, 2}, 2 * sizeof(float)); break;
  case 3: memcpy(array, (float[]){1, 2, 3}, 3 * sizeof(float)); break;
  case 4: memcpy(array, (float[]){10, 20, 30, 40}, 4 * sizeof(float)); break;
  default:break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:56:53.267

怎么样：

```
float *global[] = {
    NULL,
    (float[]){1},
    (float[]){1, 2},
    (float[]){7, 8, 9},
};

/* ... make sure `elements` is in range */
float *array = global[elements]; 
```

### 编辑

您显然可以自由地继续使用该开关：

```
switch(elements) {
case 1:
    array = (float[]){1};
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:09:14.620

一些选项：

1）您可能想要使用的所有这些数组在其他地方的堆栈上声明，并将指针“数组”分配给您实际想要的任何一个。我认为这太复杂了，尽管让这些毫无意义的数组四处飘荡。

2) 为什么 memcpy 不起作用？请记住，它考虑的是字节而不是数组元素，因此如果目标更大， memcpy(target, source, sizeof(source)) 应该可以正常工作。我会用 if(sizeof(target) > sizeof(source)) { handle error } 这样包装：

```
case 3:
float temp[] = {1.0,2.0,3.0};
memcpy(array, temp, sizeof(temp)); 
```

确保分配内存（堆栈或堆）并跟踪数组的语义大小。

# javascript - 进度条隐藏页面直到页面完全加载

> ID：10502897
> 
> 赞同：1
> 
> 时间：2012-05-08T16:51:01.543
> 
> 标签：javascript, jquery, asp.net-mvc-3

我的网页需要 0.5 秒到 3 秒才能完全加载。我只是想知道是否有一种方法可以在页面加载之前显示叠加层。页面加载完成后，我希望隐藏此叠加层。进度条或 .gif 之类的东西。我在 MVC3 中使用剃刀引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:55:05.080

为了完成这项工作，我做了三件事：PS，抱歉代码块不好，这一切都是新的。

HTML 分区：

```
<div id ="blocker">
<div>Loading...</div></div> 
```

CSS：

```
#blocker{position: fixed;

top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: #000;
z-index: 1000;  
opacity: 0.3;  
display: none; 
```

}

```
#blocker div   
    { position: absolute;
    top: 50%;
    left: 50%;
    width: 5em;
    height: 2em;
    margin: -1em 0 0 -2.5em;
    color: #fff;
    font-weight: bold;
} 
```

调用 Ajax 之前的 JQuery：

`$("#blocker").show();`

```
 $.ajax` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:21:34.370

我要做的是：

```
var loadingTimeout;

$j('body').ajaxStart(function () {
    loadingTimeout= setTimeout(function () {
        $("#blocker").show();
    }, 1000);
});

$j('body').ajaxStop(function () {
    clearTimeout(loadingTimeout);
    $("#blocker").hide();
}); 
```

在您的页面中进行的每个 ajaxcall 中，您的阻止程序会在 1 秒后显示。当客户端得到响应时，该块再次被隐藏。你怎么看？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-29T09:55:55.243

也许这个可以帮助你

```
$(document).ready(function() {
	$('button').click(function(){

        $('body').addClass('noscroll');

        document.querySelector("#overlay").classList.remove('is-visible');
	});
});
```

```
#overlay {
  background: #ffffff;
  color: #666666;
  position: fixed;
  height: 100%;
  width: 100%;
  z-index: 5000;
  top: 0;
  left: 0;
  float: left;
  text-align: center;
  padding-top: 25%;
  opacity: .80;
}

button {
  margin: 40px;
  padding: 5px 20px;
  cursor: pointer;
}
.spinner {
    margin: 0 auto;
    height: 64px;
    width: 64px;
    animation: rotate 0.8s infinite linear;
    border: 5px solid firebrick;
    border-right-color: transparent;
    border-radius: 50%;
}

@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.is-visible {
	display: none;
}

.noscroll {
  overflow: hidden;
}
```

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<script src="https://code.jquery.com/jquery-3.1.0.js"></script>

<body>

  <button>Load Spinner</button>

<div id="overlay" class="is-visible">
    <div class="spinner"></div>
    <br/>
    Loading...
</div>

</body>
</html>
```

# php - 将包含的文件内容添加到变量

> ID：10502902
> 
> 赞同：3
> 
> 时间：2012-05-08T16:51:31.960
> 
> 标签：php

我正在尝试将包含文件的内容添加到变量中。

例如，我有一个名为 $form 的变量：

```
$form = 'Hello world';
$form .= include('sidebar.inc.php'); 
```

还有另一种方法可以做到这一点吗？因为上面提到的方法给我带来了一些问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:52:53.767

`include()`您可以使用`file_get_contents()`将其存储在变量中，而不是 using ：

```
$form = file_get_contents('sidebar.inc.php'); 
```

这不会在将 PHP 存储在变量中之前对其进行解析，因此另一个选项是包含手册中发布的[解决](http://php.net/manual/en/function.include.php)方案[：](https://stackoverflow.com/questions/3850435/php-file-get-contents-after-php-has-evaluated)

```
$string = get_include_contents('sidebar.inc.php');

function get_include_contents($filename) {
   if (is_file($filename)) {
     ob_start();
     include $filename;
     $contents = ob_get_contents();
     ob_end_clean();
     return $contents;
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T16:56:23.173

```
ob_start();
include('sidebar.inc.php');
$var = ob_get_flush(); 
```

file_get_contents('sidebar.inc.php') 不解析 php 文件。（你的 IF LOOP ELSE 东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:53:58.260

```
$form = file_get_contents('sidebar.inc.php'); 
```

# c# - 使用 .Net 拓扑套件从 IGeometry 类型获取 IEnvelope

> ID：10502904
> 
> 赞同：2
> 
> 时间：2012-05-08T16:51:38.470
> 
> 标签：c#, .net, gis, topology

有没有人使用.Net 拓扑套件？我有点卡住了，我正在尝试获取信封，以便验证尺寸

根据[http://resources.esri.com/help/9.3/arcgisengine/dotnet/c6e6b26c-be52-4176-b1e5-bb628d10acd0.htm](http://resources.esri.com/help/9.3/arcgisengine/dotnet/c6e6b26c-be52-4176-b1e5-bb628d10acd0.htm) （使用页面底部的C#示例）

我正在采用 IGeometry 类型（边界）并将该多边形的包络投射到 IEnvelope（包络），我希望用它来查看宽度和高度属性

但是信封总是空的

```
 IGeometry boundary;

    var wktReader = new WKTReader(OSGBGeometryFactory.Factory);
    boundary = wktReader.Read(projectDTO.BoundaryWKT);

    IEnvelope envelope = boundary.Envelope as IEnvelope; 
```

谁能帮忙，这是我第一次使用这个套件。

* * *

我想要解决的是，如果按照这个示例我已经有一个 IGeometry 类型（我的边界变量），为什么当我尝试转换它时它为空。

```
using ESRI.ArcGIS.Geometry;

class temp
{
  public void test()
  {
    // Create an empty polygon object.
    IArea areaPolygon = new PolygonClass();

    // Cast to the IGeometry interface of the polygon object.
    IGeometry geometryPolygon = (IGeometry)areaPolygon;

    // Use the .Envelope property on the IGeometry interface of the
    // polygon object to get an envelope object.
    IEnvelope envelope = geometryPolygon.Envelope;

    // Test to make sure you have an envelope object.
    if (envelope is Envelope)
    {
      // The polygon object and resulting envelope are empty.
      if (envelope.IsEmpty)
      {
        System.Windows.Forms.MessageBox.Show("The envelope is empty.");
      }
    }
  }
} 
```

我是否需要创建一个新的多边形并尝试投射它（即复制`IArea areaPolygon = new PolygonClass();`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:42:35.533

我也面临同样的问题。这是 API 开发人员使用奇怪的 Envelope 命名约定的问题。`IGeometry.Envelope`实际上是一个 IGeometry 对象。您应该改为使用`IGeometry.EnvelopeInternal`。

```
IGeometry boundary;

var wktReader = new WKTReader(OSGBGeometryFactory.Factory);
boundary = wktReader.Read(projectDTO.BoundaryWKT);

IEnvelope envelope = boundary.EnvelopeInternal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:30:51.447

我不确定 OSGBGeometryFactory.Factory 做了什么，因为读者通常需要一些 WKT。这是一个执行您想要的示例的示例，其中 WKT 是通过在 postgis 中缓冲一个点来创建的，值得一提。

```
 WKTReader rdr = new WKTReader();
        Polygon poly =(Polygon) rdr.Read(
                "POLYGON((10 0,9.23879532511287 -3.82683432365089,7.07106781186548 -7.07106781186547,3.82683432365091 -9.23879532511286,1.61554255216634e-14 -10,-3.82683432365088 -9.23879532511287,-7.07106781186546 -7.07106781186549,-9.23879532511286 -3.82683432365092,-10 -3.23108510433268e-14,-9.23879532511288 3.82683432365086,-7.0710678118655 7.07106781186545,-3.82683432365094 9.23879532511285,-4.62458305157398e-14 10,3.82683432365085 9.23879532511289,7.07106781186544 7.07106781186551,9.23879532511284 3.82683432365095,10 0))");
        GeoAPI.Geometries.ICoordinate [] coords =  poly.Envelope.Coordinates;
        double width = coords[2].X - coords[0].X;
        double height = coords[2].Y - coords[0].Y;

        Console.WriteLine("width={0:f}, height={1:f}", width, height); 
```

# rabbitmq - 使用 RabbitMQ 的 MassTransit：恢复错误队列

> ID：10502905
> 
> 赞同：18
> 
> 时间：2012-05-08T16:51:49.677
> 
> 标签：rabbitmq, masstransit

这可能是一个非常简单的答案，但我在 MassTransit 文档或论坛中没有看到明显的解决方案。

当您有一些消息已移至 RabbitMQ 中的错误队列时，将它们放回处理队列的最佳机制是什么？此外，是否有任何内置日志记录他们最初被转移到那里的原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T21:52:27.127

使用正确的插件（NLog、log4net 等）启用日志记录，假设启用了正确的日志级别，故障应该在日志中。

没有很好的方法可以将消息移回。[Dru](http://drusellers.com/)开发了一个`busdriver`工具[https://github.com/MassTransit/MassTransit/tree/master/src/Tools/BusDriver](https://github.com/MassTransit/MassTransit/tree/master/src/Tools/BusDriver)。我相信，这将允许您将项目从一个队列移动到另一个队列——但这不是我使用过的工具。我曾经编写过与业务流程相关的工具，用于将项目移回正确的队列以供操作人员管理。

# objective-c - 创建 ivar ( NSMutableString ) 有效，但我收到警告

> ID：10502912
> 
> 赞同：0
> 
> 时间：2012-05-08T16:52:28.480
> 
> 标签：objective-c

我创建了一个名为 Engine 的简单类，它有一个名为 inputName ( NSMutableString ) 的 ivar。属性已设置好，一切正常。当我创建名为 car 的 Engine 实例并设置 inputName 时，我收到以下警告： **将保留的对象分配给不安全的属性，分配后对象将被释放。** 除了消息之外， car.inputName 已被分配内存并正确初始化。

声明属性时（@property NSMutableString *inputName;）我没有分配任何属性。但是，如果我添加（强），我不会收到上述警告。当 strong 是默认属性时，这怎么可能？以及给 car.inputName 一个字符串的最佳方法是什么。

```
#import "Engine.h"
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Engine *car = [[Engine alloc]init];
        car.inputName = [[NSMutableString alloc]initWithString:@"Ford Escot"];
        // yellow warning:Assigning retained object to unsafe property, object will be released after assignment

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:07:30.397

__strong 是底层实例变量的默认值。如果您只声明了您的实例变量（例如，没有附带属性）并直接分配给您的 ivar，它应该在没有警告的情况下编译（尽管您会忽略最佳实践）。

在创建访问实例变量的属性时，默认的内存管理是分配的，这是不安全的。

因此，当您创建没有强引用的属性，然后分配给它时，编译器会警告您，这是不安全的。

最佳实践建议您仅按属性访问 ivars，并且这些属性为您的案例表达了正确的内存管理原则。在这种情况下，在我看来，您的属性应该是（强的，非原子的）。

```
//h

@interface SomeClass
{
    Engine *__anEngine; // will be __strong
}

@property (nonatomic) Engine *anEngine; //will be assign

//m
Engine *car = [[Engine alloc] init];

__anEngine = car; //retained
self.anEngine = car; //not retained 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:04:26.603

`strong`不是默认值。 [`assign`是默认值。](https://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW2)

# c# - 如何在需要获取指针的结构中创建数组？

> ID：10502913
> 
> 赞同：1
> 
> 时间：2012-05-08T16:52:30.927
> 
> 标签：c#, .net, pointers, pinvoke, structure

为了连接到嵌入式设备，我需要在结构内创建一个数组。因此，我们使用指向结构及其内部字段的指针......我尝试了下面的代码，但我应该只创建 100 个整数并完成吗？

```
[StructLayout( LayoutKind.Sequential )]
public struct HRTF
{
    UInt32 PPP;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 100)]
    UInt32[] taps;
    . . . 
}

. . . 

HRTF effects = new HRTF();

/* --- ERROR cannot get address of, Sizeof ect ..to unmanaged typE 'HRTF' */
int offset = ((int)&effects.taps - startOffset) / 4; 
int length = sizeof(HRTF) / 4; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:59:01.580

```
fixed (uint* pt = effects.taps)
{
    // pt is not pointer to taps
}

var bts = Marshal.SizeOf(effects); // bts has size of HRTF in bytes. 
```

或者

```
var bts = Marshal.SizeOf(typeof(HRTF)); 
```

# c - 在C中提取dos命令输出

> ID：10502914
> 
> 赞同：4
> 
> 时间：2012-05-08T16:52:35.957
> 
> 标签：c, system, exec, dos

使用`system()`or `exec()`，我可以执行任何命令，但它们会将结果显示到控制台中。我想执行命令并提取输出并处理它，然后显示它。如何在 Windows/DOS 平台上实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:59:18.337

在标准 C 中没有类似的东西，但通常，为了与 POSIX 兼容，编译器实现`popen`（[`_popen`](http://msdn.microsoft.com/en-us/library/96ayss4b%28v=vs.71%29.aspx)在 VC++ 中），它启动一个命令（就像它会做的那样`system`）并将 a 返回`FILE *`到您要求的流（如果如果你想给程序一些输入，你想读取输出*或标准输入）。*

一旦你有了，你就可以用通常的/ /...`FILE *`来阅读它，就像你在普通文件上所做的那样。`fread``fscanf`

如果你想让输入和输出重定向事情开始变得有点复杂，因为 Windows 编译器通常*有*类似 POSIX 的东西`pipe`，但它并不完全兼容（主要是因为 Windows 进程创建模型不同）。

在这种情况下（并且在任何情况下，您需要对启动的过程进行比普通`popen`给您更多的控制）我会简单地使用“真实”的方式在 Windows 上执行 IO 重定向，即使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)和适当的选项；参见例如[这里](https://stackoverflow.com/questions/593897/execute-and-capture-one-program-from-another)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T17:52:24.057

Matteo Italia 的回答很棒。但是一些编译器（尤其是旧的）不支持`popen()`.

如果`popen()`不支持，这是一个可能的解决方案。

在 DOS 中，我们可以使用`>`.

前任：

```
C:\> ipconfig > temp.txt 
```

然后我可以在我的**C**代码中打开 **temp.txt**，然后重新处理其内容。

 **我的**C**代码将类似于：

```
system("ipconfig > temp.txt");
FILE *fp;
fp = fopen("temp.txt","r");
//                                         //
//... Code for reprocessing can go here ...//
//                                         // 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T03:24:35.927

对于那些没有 popen 的人来说，这是一个可以在大多数系统上工作的替代答案。此代码不是线程安全的。我希望这对于大多数情况来说不是一个重大限制。

```
#include <stdio.h>
#include <process.h>
#include <io.h>
#include <sys\stat.h>
#include <assert.h>

int main()
{
    int so = dup(1);
    close(1);
    int i = creat("output.txt", S_IWRITE);
    assert(i == 1); // i should be 1...
    system("dir");
    close(i);
    dup2(so, 1);
    close(so);
} 
```**

# spring-mvc - 如何在spring mvc中使用XStream反序列化xml

> ID：10502920
> 
> 赞同：0
> 
> 时间：2012-05-08T16:52:59.653
> 
> 标签：spring-mvc, xstream

我收到这个

```
<header><h1>001</h1><h2>002</h2></header> 
```

我的调度员看起来像这样

```
<bean id="annotatedMarshaller" class="org.springframework.oxm.xstream.AnnotationXStreamMarshaller">
    <property name="annotatedClasses">
        <list>
        <value>someClasses</value>
        <value>someClasses</value>
        <value>someClasses</value>
        </list>
    </property>
</bean> 
```

在这里我尝试使用 XstreamMarshaller 中的 unmarchal 方法并返回要转换的对象

```
public static Object deserializeXml(String xml)  {

    StringReader sr =new StringReader(xml);
    StreamSource ss=new StreamSource(sr);

    Object o=null;
    try {

        o = xStreamMarshaller.unmarshal(ss);

    } catch (XmlMappingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return o;
} 
```

当我意识到 unmarshal 方法将给定的对象编组为给定的 javax.xml.transform.Result 而不是像 XStream 中的 fromXml 方法那样简单的 String 时，问题就来了。

多亏了[这个](http://static.springsource.org/spring-ws/site/reference/html/oxm.html)，我想出了如何从字符串中获取结果对象，但不确定是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:30:54.513

完全同意spring应该处理所有编组/解组的想法。您需要做的就是将*XStreamMarshaller*声明为消息转换器之一。这可以通过*mvc:annotation*部分来实现：

```
 <mvc:annotation-driven>
  <mvc:message-converters>
      <!-- Your XStream converter. -->
  </mvc:message-converters>
</mvc:annotation-driven> 
```

或通过*AnnotationMethodHandlerAdapter*：

```
 <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <!-- Your XStream converter. -->
            </list>
        </property>
    </bean> 
```

# javascript - 获取 javascript 基本函数的准确语法

> ID：10502923
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:53:06.583
> 
> 标签：javascript, file, function

有没有办法知道 test （用于正则表达式）或 cos （用于数学）或 substring （用于字符串）或 splice （用于数组）是如何通过 Javascript 中的方式（如`alert(function)`）或通过搜索以精确的语法编码的Firefox 附带的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:57:28.397

好吧，javascript 的源代码可能不是用 javascript 本身编写的，因此您将无法仅将其打印到浏览器控制台或警报。

你可以浏览google V8引擎的源码，看看对你有没有帮助；）

[http://code.google.com/p/v8/](http://code.google.com/p/v8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:58:41.913

这些功能实际上是由浏览器以一种操作系统本地语言实现的。

所以这些算法是用 c、c++、c#、java 等编写的，而不是用 JavaScript 编写的。

# xcode - 始终将“网络连接丢失”作为验证问题

> ID：10502924
> 
> 赞同：23
> 
> 时间：2012-05-08T16:53:07.890
> 
> 标签：xcode, validation, app-store

我正在尝试将我的第一个应用程序上传到商店。我第一次遇到了一个真正的问题（版本字符串的语法错误），所以我知道我可以进行验证。当我修复该问题时，我现在在问题对话框中出现“网络连接丢失”，经过相当长的暂停。

目前尚不清楚这是否是我和苹果之间的验证过程或我的应用程序（确实使用网络连接）的问题。我的网络很稳固。

任何想法可能发生的事情。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-10-10T09:09:39.363

我遇到了同样的问题，然后我重新启动我的 xcode 一次。错误消失了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-21T13:22:43.283

有时 Xcode 可能会导致问题。所以使用“**应用程序加载器**”在 Appstore 中上传应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-28T23:18:29.167

这可能是由于 Apple 的服务器不可用造成的。

在 Apple 的开发者论坛中，您可以看到很多人在某些时候遇到同样的问题。

最近一篇： [https ://discussions.apple.com/message/25437485](https://discussions.apple.com/message/25437485)

所以...等等:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-07T01:24:03.390

对我来说，在我更改我的 MBP 加入的 WIFI 后它就成功了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-09-23T15:15:00.163

您可能需要同意一项协议，例如付费应用程序修订。

在昨晚成功提交同一个应用程序的构建后，我今天早上开始遇到这个问题。

记得昨晚上传时我必须同意一些事情（尽管有这个协议问题，但其中一个昨晚成功地完成了）。

重新启动 XCode 对我没有帮助。

# jquery - jquery在div中查找图像类

> ID：10502932
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:53:43.327
> 
> 标签：jquery, image, class

Jquery 问题在这里。

我想获得位于内部的唯一图像的 CLASS 标签`<div id=slot></div>`

我怎样才能做到这一点？在谷歌上似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:56:02.487

尝试，

```
$('#slot img').attr('class') 
```

[**演示**](http://%24%28%27#slot%20img%27%29.attr%28%27class%27%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T16:57:12.057

```
$('#slot img:first').attr('class'); 
```

或者

```
$('#slot img:eq(0)').attr('class'); 
```

或者

```
$('#slot img').eq(0).attr('class'); 
```

或者

```
$('#slot img').first().attr('class'); 
```

如果`#slot`只包含一张图片，那么

```
$('#slot img').attr('class'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T16:55:48.087

```
var classNames = $("#slot img:first").attr("class"); 
```

您将获得该类属性中的任何内容。如果那里有很多课程，它将返回所有课程，如果只有一个课程，您将得到这些。

这个选择器说给我第一个图像，它在元素中的 ID 为 slot。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T16:56:13.157

```
var yourClass=$("#slot").find("img:first").attr("class");
alert(yourClass); 
```

jsfiddle 示例[http://jsfiddle.net/3c4yK/3/](http://jsfiddle.net/3c4yK/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T16:57:46.250

```
var imgClasss=$('#slot img:first').prop('class'); 
```

或者

```
var imgClasss=$('#slot img:first').attr('class'); 
```

# javascript - 如何在dojo中获取组合框所选项目的ID

> ID：10502935
> 
> 赞同：0
> 
> 时间：2012-05-08T16:54:03.920
> 
> 标签：javascript, dojo, dom-events

如何获取所选 fname 的 fId？

这是我的代码..

```
var fS = new Memory({   //store for the combo
    data: [
        {fN:"", fId:""}
    ]
}); 
var fCombo = new ComboBox({          //combo box
        id: "fCombo",
        name: "fCombo",
        value: "Select",            
        searchAttr: "fName"
    }, "fCombo");       
    fCombo.store = fStore;
    dojo.xhrPost({
    url: "XXX",
    handleAs: "json", 
    load: function(response, ioArgs){               
          fCombo.store.data = response.xx;
          return response; 
          },
    error: function(response, ioArgs){
          console.log("Error", response+' '+ioArgs);
          return response;
          } 
        });

dojo.connect(dijit.byId("fCombo"), 'onChange',function(e){
   //code to write based on f id
} 
```

我试过这个..

```
var Id = fStore.getValue(dijit.byId("fCombo").data, "fName"); 
```

但不能..它说对象不支持这个属性

请帮忙..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T19:55:16.097

它抱怨是因为`dijit.byId("farmCombo")`返回了不支持“.data”的组合框。

不要使用“ `connect`”，而是尝试使用“ `watch`”。有很多东西你可以看。'value' 会得到你的纯值变化，但如果你听 'item' 变化，你会得到完整的旧项目和新项目，你可以从中检索你的项目 ID。

例如

```
farmCombo.watch("item", function(what, oldVal, newVal) {
  // selected farmid is newVal.farmId
}); 
```

这是一个在单独的文本框中显示您选择的 id 的示例：

[http://jsfiddle.net/RoystonS/cH6hf/](http://jsfiddle.net/RoystonS/cH6hf/)

如果您不指定要监视的值，您的回调将显示所有更改，这可能非常有用。

# python - Python 套接字接收双打

> ID：10502936
> 
> 赞同：1
> 
> 时间：2012-05-08T16:54:13.517
> 
> 标签：python, sockets, casting, double

我需要一个 python 程序来使用 TCP 连接（到另一个程序）来检索 9 个字节的集合。

九个字节中的第一个代表一个字符，其余的代表一个双精度。

如何从 python 套接字中提取这些信息？我是否必须手动进行数学运算才能转换流数据，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:58:00.317

看看蟒蛇`struct`

[http://docs.python.org/library/struct.html](http://docs.python.org/library/struct.html)

所以像

```
from struct import unpack

unpack('cd',socket_read_buffer)

--> ('c', 3.1415) 
```

小心字节序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-18T09:18:33.390

如果客户端和服务器都是用python编写的，我建议你使用pickle。它允许您将 python 变量转换为字节，然后返回到具有原始类型的 python 变量。

```
#SENDER
import pickle, struct

#convert the variable to bytes with pickle
bytes = pickle.dumps(original_variable)
#convert its size to a 4 bytes int (in bytes)
#I: 4 bytes unsigned int
#!: network (= big-endian)
length = struct.pack("!I", len(bytes))
a_socket.sendall(length)
a_socket.sendall(bytes)
```

```
#RECEIVER
import pickle, struct

#This function lets you receive a given number of bytes and regroup them
def recvall(socket, count):
    buf = b""
    while count > 0:
        newbuf = socket.recv(count)
        if not newbuf: return None
        buf += newbuf
        count -= len(newbuf)
    return buf

length, = struct.unpack("!I", recvall(socket, 4)) #we know the first reception is 4 bytes
original_variable = pickle.loads(recval(socket, length))
```

# android - 在对话框片段选项选择上更新片段

> ID：10502937
> 
> 赞同：7
> 
> 时间：2012-05-08T16:54:13.803
> 
> 标签：android, refresh, fragment, android-dialogfragment

我有片段，在组件上单击弹出窗口 DialogFragment。此对话框片段包含选项列表。When an option from list is selected I want to notify fragment so I can run fields update procedure. 我做了这样的事情

```
@Override
public void onClick(DialogInterface dialog, int item) {
     updateSharedPreference(item);
     Log.e("ProfilePersonaListDialog", "Click on dialog, inside onClick");
     OnCloseListDialogListener act = (OnCloseListDialogListener) getActivity();
     act.onDialogListSelection();

     dismiss();
} 
```

但是，此 getActivity() 调用 FragmentActivity 而不是触发对话框片段的片段。我可以杀死当前打开/运行的片段并调用一个新实例来获取更新的字段，但这是我希望避免的肮脏解决方案。

在对话框片段中选择选项后如何进行片段更新的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:24:04.087

只是带着解决方案回来。我的问题实际上是将当前片段 getTag() 字符串作为 DialogFragment 的 show() 参数转发。如果有人对这里感兴趣是工作样本。

创建简单的监听器

```
public interface OnCloseListDialogListener {
    public void onDialogListSelection();
}
```

创建将扩展 DialogFragment 的新对话框

```
 public class ListDialogFragment extends DialogFragment implements DialogInterface.OnClickListener {

    private PersonaData[] mPersonaData;
    private String[] mPersonaName;
    private final String TAG;

    public static ListDialogFragment newInstance(PersonaData[] personaData, String tag) {
        ListDialogFragment dialog = new ListDialogFragment(personaData, tag);
        Bundle bundle = new Bundle();
        dialog.setArguments(bundle);
        return dialog;
    }

    private ListDialogFragment(PersonaData[] personaData, String tag) {
        this.mPersonaData = personaData.clone();
        this.TAG = tag;
    }

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setCancelable(true);
        int style = DialogFragment.STYLE_NORMAL, theme = 0;
        setStyle(style, theme);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setTitle(R.string.dialog_title);
        mPersonaName = getData();//Your own implementation here
        builder.setNegativeButton("Cancel", this);
        builder.setSingleChoiceItems(mPersonaName, -1, new SingleChoiceListener());
        return builder.create();

    }

    @Override
    public void onClick(DialogInterface dialogInterface, int i) {
    }

    private class SingleChoiceListener implements DialogInterface.OnClickListener {
        @Override
        public void onClick(DialogInterface dialog, int item) {
            updateSharedPreference(item);
            OnCloseListDialogListener act = (OnCloseListDialogListener) getFragmentManager().findFragmentByTag(TAG);
            act.onDialogListSelection();
            dismiss();
        }
    }
} 
```

然后在您希望从中调用此对话框的片段中执行以下操作。DIALOG 只是字符串常量，我放在那里只是对话框

```
 SOME_CLICKABLE.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        FragmentManager manager = getFragmentManager();
        ListDialogFragment dialog = ListDialogFragment.newInstance(mPersona, getTag());
        dialog.show(manager, DIALOG);
    }
});
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T20:08:46.603

在大多数情况下，有`Fragment`必要知道它是在`Activity`某种描述的上下文下运行的，并且子 Fragment 可以在父 Activity 隐式实现的接口上调用方法（如代码中的强制转换所示）片段）。当你得到你的推荐信时，Tomasz 指出你会很成功。

但是，:) 为了帮助对话片段的可重用性，我建议您利用`BroadcastReceiver`s. BroadcastReceiver 只是广播一条消息说*我做了 'x'*。然后，父活动或任何其他顶级组件可以声明*我正在监听 'x'*。一旦在对话框组件中触发了该事件，该事件将由父 Activity 收集`onReceive`，您可以在其中运行必要的代码来更新您的字段。

在个人层面上，我更喜欢这种松散耦合而不是强制转换接口方法，因为它迫使我思考每个 Fragment 的用途并使其保持模块化。

如果您想试一试，请阅读广播接收器上的开发指南部分并按照以下步骤操作；

1.  `BroadcastReceiver`在您的父活动中实施。`onReceive`请注意，需要实现一个方法。

2.  覆盖父 Activity 的`onResume`方法并将 Activity 注册为具有意图操作“blah”的事件的接收者。就像是;

    ```
     @Override
     protected void onResume() {
     super.onResume();
     registerReceiver(this, new IntentFilter("blah"));
    } 
    ```

3.  覆盖父 Activity 的`onPause`方法，将 Activity 取消注册为接收器，以避免“泄漏的接收器”（你会发现）。

    ```
    @Override
    protected void onPause() {
     super.onPause();
     unregisterReceiver(deleteSpotReceiver);
    } 
    ```

4.  在您的`DialogFragment` `onClick`火灾中，您的父活动正在“监听”的事件。

    ```
    @Override
    public void onClick(DialogInterface dialog, int item) {
        updateSharedPreference(item);
        Log.e("ProfilePersonaListDialog", "Click on dialog, inside onClick");
        final Intent intent = new Intent();
        intent.setAction("blah");
        getActivity().sendBroadcast(intent);
        dismiss();
    } 
    ```

父活动将收集消息，您可以继续处理。如果您决定采用这种方法，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:51:53.833

就像你在上面做的那样，在你的活动中添加这样的东西：

```
public void onDialogListSelection() {
    AnotherFragment anotherFragment = (AnotherFragment) getSupportFragmentManager()
            .findFragmentById(R.id.anotherFragment);
    anotherFragment.customMethodToNotifyListHasBeenSelected();
} 
```

当然，如果您不使用支持库，请调用`getFragmentManager`而不是`getSupportFragmentManager`.

# android - Android 前置摄像头 - 某些设备上的空 (0km) 文件或启动失败

> ID：10502939
> 
> 赞同：2
> 
> 时间：2012-05-08T16:54:17.447
> 
> 标签：android, android-camera, mediarecorder, android-mediarecorder

我的应用程序（ScareApp）使用前置摄像头录制视频时遇到了这个问题。我“认为”我终于解决了这个问题，所以我想我会把它贴在这里给遇到同样事情的任何开发人员......

基本上.. android MediaRecorder 允许您定义视频和音频编码器，并且根据文档，可以对每个使用 DEFAULT。但是，这是指主摄像头的设置，通常比前置摄像头要高得多。例如，Droid Razr 上的 DEFAULT 选择了对前置摄像头不可用的编码 (MPEG_4_SP)，这会导致生成空 (0kb) 文件（或在某些其他设备上出现 Camera 100 - start failed 错误）。

我的另一个选择是使用 CameraProfile.get 方法来查找 HIGH_QUALITY 设置，但同样，这默认使用主摄像头。为了解决这个问题，您可以使用设置前置摄像头的 ID

```
CameraProfile.get(<CameraID>, CamcorderProfile.QUALITY_HIGH); 
```

我目前的工作如下：

```
CamcorderProfile profile = CamcorderProfile.get(FrontFacingCameraId, CamcorderProfile.QUALITY_HIGH);
if(profile != null) {
    _recorder.setAudioEncoder(profile.audioCodec);      
    _recorder.setVideoEncoder(profile.videoCodec);
}else {
    //default to basic H263 and AMR_NB if profile not found
    _recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);       
    _recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H263);
} 
```

或者，您可以跳过设置编码器，只需使用

```
_recorder.setProfile(profile); 
```

但是由于我的应用程序允许用户选择分辨率，所以我需要设置编码器。

希望这将有助于某人并节省时间和它给我带来的麻烦！

干杯，马克

# ios - SplitViewController presentWithGesture 解决方法 - 最佳解决方案？

> ID：10502941
> 
> 赞同：1
> 
> 时间：2012-05-08T16:54:24.570
> 
> 标签：ios, uisplitviewcontroller, ios5.1

在我的主要开发机器运行 Snow Leopard（因此，只有 iOS 5.0 SDK）并且还有一台运行 Lion（和 5.1SDK）的笔记本电脑的奇怪设置上工作。希望我有一个简单的解决方案能够在 Snow Leopard 机器上开发 5.1，但这是一个附带问题。

我正在学习 UISplitViewControllers，并希望有一个滑动手势来更改详细视图控制器中显示的内容。实现了这一点，但在 5.1 中，有一个名为 presentWithGesture 的属性，当您滑动该方向时会显示 masterViewController。

你可以禁用它，但是我的 5.0 机器给了我一个错误，说 UISplitViewController 没有名为 presentWithGesture 的属性（对于 5.0 是正确的）。

叹息......所以我想我会测试它，但以下内容：

```
if (self.splitViewController.presentedViewController) {
    self.splitViewController.presentsWithGesture = NO;
} 
```

...仍然给我那个错误。有没有聪明的方法来解决这个问题？我脑后的某个声音说“类别”，但我不确定从哪里开始。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T13:08:31.780

这是检查是否有的`UISplitViewController`方法`presentsWithGestureProperty`：

```
if ([m_splitVC respondsToSelector:@selector(setPresentsWithGesture:)])
    [m_splitVC setPresentsWithGesture:NO]; 
```

在 iOS 5.1 中它会设置属性，而在之前的版本中它不会进入 if 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T16:57:59.740

您应该询问 splitViewController 是否可以接收消息 PresentWithGesture。

```
if ([splitViewController respondsToSelector:@selector(presentsWithGesture:)]) {
    //edited away from dot syntax
    [splitViewController setPresentsWithGesture:NO];
} 
```

请记住，这是一个代码块，用于与可能未使用与您链接的相同版本 iOS 的用户合作。您遇到的问题恰恰相反，因为您在两个不同的设备上为同一个项目编写代码，每个设备都有不同的基础 SDK。

编辑：看这里[是否有可能在 Snow Leopard 上获得适用于 Xcode 4.2 的 iOS 5.1 SDK？](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)

# ios - 核心数据按自动递增索引排序？

> ID：10502943
> 
> 赞同：2
> 
> 时间：2012-05-08T16:54:42.900
> 
> 标签：ios, core-data

## 核心数据按自动递增索引排序？

我已经用谷歌搜索过核心数据没有明确的自动增量 ID。因此，如果没有自我实现编码（这很容易在 sqlite3 中直接完成），就无法按自动增量 ID 排序。

## 我发现了什么

**ObjectID ：但没有自动增量 ID。** **NSSortedSet：iOS 5.0/OS X 10.7+，不是一个好主意

## 或者我必须这样做

**添加一个像entityID这样的属性，并在代码中设置它然后安全

## 我在应用程序中的麻烦

一个问题的四个答案 A、B、C、D，答案是顺序的。我正在考虑添加 entityID 并为其设置增量值。然后我用它来排序

```
@interface NSQuestion : NSManagedObject

@property (nonatomic, retain) NSString * title;
@property (nonatomic, retain) NSNumber * questionID;
@property (nonatomic, retain) NSSet *answers; 
@property (nonatomic, retain) NSAnswer *selectedAnswer;
@end 
```

## 添加

我从 xcdatamodeld 导出模型 NSQuestion，*我在徘徊为什么它是 NSSet*答案而不是 NSArray 答案*

## 好办法？

如果任何其他人有同样的问题，那么你真正的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:07:24.703

您可以根据内部对象 ID 进行排序，但排序将是任意的，因为没有固有的排序（如进入时间）。

如果您希望根据插入的顺序进行排序，有几个选项。

不幸的是，你真的没有明确你的真正目标，所以很难为你指明最佳方向。

如果您只想根据插入顺序访问对象，则可以使用有序集。只需拥有一个与所有对象具有一对多关系的“根”对象。选中模型的“订购”框。

现在，您可以简单地将对象添加到该关系中。它将维持它们的顺序，并且您不会付出太多的性能，因为您不会不断地重新订购它们。

或者，您可以使用细粒度的时间戳，并在插入每个对象时将其添加到每个对象中。然后，根据它进行排序......它会按照插入的顺序为您提供对象。

或者，您可以只使用一个简单的计数器。从数据库加载计数器对象。给新对象计数器的当前值，并为每个新对象增加计数器。您可以在托管对象类上放置一个类别来创建对象，它可以自动创建 ID。

您的问题的大量解决方案...取决于您想要实际完成的任务。

哦，是的...目前，iCloud 不支持有序关系...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-18T19:56:25.127

使用排序描述符 with`self`作为排序键。底层 SQL 将具有`ORDER BY t0.Z_PK`,`Z_PK`作为记录的内部 ID（作为对象的最后一个组件找到`NSManagedObjectID`）。

# iphone - 需要使用 OpenGL 着色器一次处理 2 个摄像机帧

> ID：10502944
> 
> 赞同：0
> 
> 时间：2012-05-08T16:54:44.893
> 
> 标签：iphone, ios, opengl-es-2.0, textures, video-processing

我无法将两个连续的相机帧同时传递给我的着色器。

我正在使用 CVOpenGLESTextureCacheCreateTextureFromImage 来生成纹理，并且一直在遵循与 GLCameraRipple 示例应用程序相同的过程，它同时将两个纹理发送到着色器中。但是，我的不工作——无论我以什么顺序发送它们，我一次只能得到一个。

事实上，当我从着色器中调用 texture2D 时，我给它的纹理参考并不重要——它总是对相同的纹理进行采样。

我一直在为这个发疯。试过：

1）为每个纹理使用不同的纹理缓存

2) glActiveTexture(GL_TEXTURE0) & glActiveTexture(GL_TEXTURE1) 分别在创建每个纹理之前

3) glUniform1i(TEXTURE_PREV, 0); & glUniform1i(TEXTURE_NEXT,1);

4) glUniform1i(TEXTURE_PREV, CVOpenGLESTextureGetName(prevTextureRef)); & glUniform1i(TEXTURE_NEXT,CVOpenGLESTextureGetName(nextTextureRef));

5）（在着色器中）在统一采样器2D framePrev之前添加布局（绑定= 0）；

我对 OpenGLES2 还很陌生，我不知道这个调用是做什么的，但是没有它就什么都做不了： `glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(nextTextureRef), 0);`

有任何想法吗？

# arcgis - 在 Windows 上构建 FDO 源代码

> ID：10502945
> 
> 赞同：1
> 
> 时间：2012-05-08T16:54:47.433
> 
> 标签：arcgis, osgeo, fdo

我正在尝试在 Windows 上编译 FDO 源代码 (http://fdo.osgeo.org/)，以便能够将 FDO 提供程序用于 ArcSDE。

FDO 构建说明说我需要安装 ArcSDE 客户端 SDK。我不确定这将属于哪个安装程序。我确实有 ArcSDE 服务器组件的安装程序，但它需要在我的机器上安装 Oracle。有没有更简单的方法来获取 ArcSDE 客户端 SDK。我浏览了 ESRI 网站上的信息，但找不到简单的答案。

我想知道这里是否有人在构建 FDO 代码时遇到过类似的问题并可以分享他们的经验。任何指针将不胜感激。

# asp.net-mvc - 使用 ValueInjecter 将空字符串更改为 string.Empty

> ID：10502947
> 
> 赞同：2
> 
> 时间：2012-05-08T16:55:03.427
> 
> 标签：asp.net-mvc, entity-framework, valueinjecter

我正在使用 ValueInjecter 将视图模型展平/取消展平为由实体框架（4.3.1）模型优先创建的域对象。我数据库里的所有`VARCHAR`专栏都是`NOT NULL DEFAULT ''`（个人喜好，无意在这里开打圣战）。在发布时，视图模型返回任何没有值为 null 的字符串属性，因此当我尝试将其注入我的域模型类时，EF 对我咆哮，因为我试图将属性设置`IsNullable=false`为 null。示例（过于简单）：

```
public class ThingViewModel
{
    public int ThingId{get;set;}
    public string Name{get;set;}
}

public class Thing
{
    public global::System.Int32 ThingId
    {
        //omitted for brevity
    }

    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String Name
    {
        //omitted for brevity
    }
} 
```

然后，我的控制器帖子如下所示：

```
[HttpPost]
public ActionResult Edit(ThingViewModel thing)
{
    var dbThing = _thingRepo.GetThing(thing.ThingId);
    //if thing.Name is null, this bombs
    dbThing.InjectFrom<UnflatLoopValueInjection>(thing);
    _thingRepo.Save();
    return View(thing);
} 
```

我正在使用`UnflatLoopValueInjection`，因为我在`Thing`. 我试图编写一个自定义`ConventionInjection`来将空字符串转换为`string.Empty`，但似乎将其`UnflatLoopValueInjection`切换回空字符串。有没有办法让 ValueInjecter 不这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:16:25.407

[坚果，我只是在wiki](http://valueinjecter.codeplex.com/wikipage?title=unflattening&referringTitle=Documentation)的帮助下才弄明白的。解决方案似乎是扩展`UnflatLoopValueInjection`：

```
public class NullStringUnflatLoopValueInjection : UnflatLoopValueInjection<string, string>
{
    protected override string SetValue(string sourceValue)
    {
        return sourceValue ?? string.Empty;
    }
} 
```

# playframework - 如何在 play 2.0 中编写功能测试

> ID：10502949
> 
> 赞同：1
> 
> 时间：2012-05-08T16:55:11.200
> 
> 标签：playframework, playframework-2.0

我正在尝试复制[http://www.playframework.org/documentation/2.0.1/JavaFunctionalTest](http://www.playframework.org/documentation/2.0.1/JavaFunctionalTest)上可用的启动真正的 HTTP 服务器示例，但如果使用此帮助程序执行的游戏测试超过 1 个 @Test

```
running(testServer(3333) 
```

第二个 @Test 类将失败

这里是java堆栈跟踪：

```
[error] Test controllers.v1_0.api.UsersTest.createAndRetreiveAndDeleteUser
failed: Promise timed out after 5000 : MILLISECONDS
[error]     at play.api.libs.concurrent.STMPromise$$anonfun$await$1.apply(Promise.scala:158)
[error]     at play.api.libs.concurrent.STMPromise$$anonfun$await$1.apply(Promise.scala:154)
[error]     at scala.concurrent.stm.ccstm.InTxnImpl.runBlock(InTxnImpl.scala:538)
[error]     at scala.concurrent.stm.ccstm.InTxnImpl.topLevelAttempt(InTxnImpl.scala:494)
[error]     at scala.concurrent.stm.ccstm.InTxnImpl.topLevelAtomicImpl(InTxnImpl.scala:365)
[error]     at scala.concurrent.stm.ccstm.InTxnImpl.atomic(InTxnImpl.scala:244)
[error]     at scala.concurrent.stm.ccstm.CCSTMExecutor.apply(CCSTMExecutor.scala:24)
[error]     at play.api.libs.concurrent.STMPromise.await(Promise.scala:154)
[error]     at play.api.libs.concurrent.Promise$class.await(Promise.scala:44)
[error]     at play.api.libs.concurrent.STMPromise.await(Promise.scala:113)
[error]     at play.api.libs.concurrent.Promise$class.value(Promise.scala:42)
[error]     at play.api.libs.concurrent.STMPromise.value(Promise.scala:113)
[error]     at play.libs.F$Promise.get(F.java:90)
[error]     at controllers.v1_0.api.UsersTest.createUserTest(UsersTest.java:50)
[error]     at controllers.v1_0.api.UsersTest.access$000(UsersTest.java:18)
[error]     at controllers.v1_0.api.UsersTest$1.run(UsersTest.java:25)
[error]     at play.test.Helpers.running(Helpers.java:317)
[error]     at controllers.v1_0.api.UsersTest.createAndRetreiveAndDeleteUser(UsersTest.java:22) 
```

增加超时没有帮助。

感谢您的帮助，安德里亚

# android - Android：选择文本时如何在 web 视图中隐藏操作栏

> ID：10502950
> 
> 赞同：1
> 
> 时间：2012-05-08T16:55:15.853
> 
> 标签：android, android-actionbar, textselection, android-2.3-gingerbread

我有一个应用程序，它以 webview 作为主要组件。我想让用户在 web 视图中突出显示（选择）文本，但不显示任何上下文选项，如复制和粘贴。在我运行 android 2.3.x 的模拟器中，这不是问题，我可以选择文本并且没有任何反应。在 nexus 设备上，我获得了上下文操作栏，其中包含复制并选择所有选项。我想允许用户选择文本，但我不希望他们能够复制文本。理想情况下，我想完全抑制操作栏，但需要在 minsdk 设置为 api 级别 8 时编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:00:53.530

一个技巧是在你的文本框被长按时清除剪贴板：

```
OnLongClickListener mOnLongClickListener = new OnLongClickListener() {

        @Override
        public boolean onLongClick(View v) {
            ClipboardManager clipboard = (ClipboardManager)
        getSystemService(Context.CLIPBOARD_SERVICE);
        clipboard.setText("");
            return false;
        }
    }; 
```

[http://developer.android.com/reference/android/text/ClipboardManager.html](http://developer.android.com/reference/android/text/ClipboardManager.html)

# wordpress - 特色图片的外部链接 - Wordpress

> ID：10502953
> 
> 赞同：0
> 
> 时间：2012-05-08T16:55:30.960
> 
> 标签：wordpress

如何将自定义元框添加到我的 Wordpress 主题中，允许用户从特色图像添加指向外部页面的链接？我设置了一个滑块，可以从自定义帖子类型中提取特色图像，我希望能够从中添加一个外部链接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:59:04.720

看看这个 [http://codex.wordpress.org/Function_Reference/add_meta_box](http://codex.wordpress.org/Function_Reference/add_meta_box)

# android - BuildConfig.DEBUG 保持为真

> ID：10502955
> 
> 赞同：2
> 
> 时间：2012-05-08T16:55:39.380
> 
> 标签：android, eclipse

我在这里阅读了有关它的其他问题。
我清理了我的源代码并将 android:debuggable 设置为 false。
唯一的结果是警告，我不应该对此进行硬编码。

当然 BuildConfig.DEBUG 仍然正确！

谁知道真正的原因和该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:02:45.527

我还看到了 BuildConfig.DEBUG 不可靠的报告，尽管我没有使用它。

我已经成功使用：

```
 //Figure out if we are in debug mode or not
    boolean debugMode = (0 != (getApplicationInfo().flags & ApplicationInfo.FLAG_DEBUGGABLE)); 
```

它读取 AndroidManifest.xml 中的可调试标签。

此外，还有一个 Lint 警告说，不要设置该标签，android 会为您解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:53:38.967

当您正确导出 apk 时，应将其设置为 false。不确定是否签名是否重要。

# ruby-on-rails - 在路由中传递参数

> ID：10502956
> 
> 赞同：0
> 
> 时间：2012-05-08T16:55:45.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

导轨 3.2。在这里，我想指示 all`http://domain.dev/toys`只显示所有`shops`（`shop_type`在我的表格列中）是`toys`.

```
# routes.rb
resources :shops

match 'toys' => 'shops#index', :as => :toys, :via => :get, :constraints => {:shop_type => 'toys'}

# shops_controller.rb
def index
  @shops = Shop.find(:all)
end 
```

我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:06:10.350

错误的部分：`Shop.find(:all)`.

[约束用于路段。](http://guides.rubyonrails.org/routing.html#segment-constraints)

（好吧，还有动词，但它们是用`:via`; 或方法指定的`Request`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T18:26:01.290

在`routes.rb`：

```
match 'shops(/:shop_type)' => 'shops#index', :via => :get, :as => :shops_path 
```

在`shops_controller.rb`：

```
SHOP_TYPES = [:toys, :clothing, :accessories]

def index
    @shops = []
    if SHOP_TYPES.include? params[:shop_type].to_sym
        @shops = Shop.find_all_by_shop_type(params[:shop_type])
    else
        @shops = Shop.find(:all)
    end
end 
```

# .net - 我如何知道网格上复选框的选中/未选中状态？

> ID：10502960
> 
> 赞同：0
> 
> 时间：2012-05-08T16:55:57.013
> 
> 标签：.net, wpf, datagrid, checkbox, datagridtemplatecolumn

我`DataGrid`通过使用以下代码段以编程方式添加列来构建一个：

```
var check = new FrameworkElementFactory(typeof(CheckBox), "chkBxDetail");
dgDetalle.Columns.Add(new DataGridTemplateColumn() { CellTemplate = 
                      new DataTemplate() { VisualTree = check } });
for (int i = 0; i < 4; i++)
{
    DataGridTextColumn textColumn = new DataGridTextColumn();
    textColumn.Binding = new Binding(string.Format("[{0}]", i));
    dgDetalle.Columns.Add(textColumn);
} 
```

我如何知道网格上复选框的选中/未选中状态？

**更新** 我*不能*使用绑定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:18:26.427

终于我明白了...

我`DataGrid`使用这个片段创建了：

```
var check = new FrameworkElementFactory(typeof(CheckBox));

dgDetalle.Columns.Add(new DataGridTemplateColumn()
    {
        CellTemplate = new DataTemplate() { VisualTree = check }
    });

for (int i = 0; i < 4; i++)
{
    DataGridTextColumn textColumn = new DataGridTextColumn();
    textColumn.Binding = new Binding(string.Format("[{0}]", i));
    dgDetalle.Columns.Add(textColumn);
} 
```

然后，我制作了一个片段来显示来自所选项目的数据`MessageBox`：

```
string testValues = "";

for (int i = 0; i < dgDetalle.Items.Count; i++)
{
    DataGridRow row = (DataGridRow)dgDetalle.ItemContainerGenerator.ContainerFromIndex(i);
    FrameworkElement cellContent = dgDetalle.Columns[0].GetCellContent(row);
    CheckBox checkBox = VisualTreeHelper.GetChild(cellContent, 0) as CheckBox;
    if (checkBox != null && (checkBox.IsChecked ?? false))
    {
        List<string> item = (List<string>)dgDetalle.Items[i];
        foreach (var t in item)
        {
            testValues += t;
        }
    }
}

MessageBox.Show(testValues); 
```

总结一下：

1.  使用获取行`ItemContainerGenerator`
2.  从 中获取特定列`DataGrid`并将其作为通用表示对象 ( `FrameworkElement`)
3.  使用`VisualTreeHelper`. 请注意，我得到了`CheckBox`我在第一个片段中创建的
4.  处理所选项目

希望它可以帮助任何人......！

# sharepoint-2010 - 使用 UpdateListItems Web 服务方法更新列表项内容类型

> ID：10502967
> 
> 赞同：1
> 
> 时间：2012-05-08T16:56:16.807
> 
> 标签：sharepoint-2010

我正在使用下面的代码批量更新共享点列表项，并试图弄清楚我是否也可以使用批量更新来更新项目的内容类型。这适用于 Sharepoint 2010，我只能使用 Web 服务。我无法在任何地方找到一个例子。

```
public static void UpdateListItems(string SiteURL, string ListName, int[] ItemIDs, List<string> FieldNames, List<object> Values)
    {
        using (ListsSoapClient ls = GetListSoapClient(SiteURL))
        {
            XDocument xDoc = new XDocument(new XElement("Batch"));
            xDoc.Root.Add(new XAttribute("OnError", "Continue"));
            xDoc.Root.Add(new XAttribute("PreCalc", "TRUE"));

            int ID = 0;

            for (int i = 0; i < ItemIDs.Count(); i++)
            {

                ID++;
                XElement xMethod = new XElement("Method",
                    new XAttribute("ID", ID),
                    new XAttribute("Cmd", "Update"),
                    new XElement("Field",
                        new XAttribute("Name", "ID"),
                        ItemIDs[i]
                        )
                    );

                for (int j = 0; j < FieldNames.Count(); j++)
                {
                    xMethod.Add(new XElement("Field",
                                   new XAttribute("Name", Functions.SPFieldName(FieldNames[j])),
                                       Values[j]
                                       )
                               );
                }

                xDoc.Root.Add(xMethod);
            }

            ls.UpdateListItems(ListName, xDoc.Root);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:41:26.193

如果不制作新版本，就无法使用 SharePoint 2010 的 Web 服务更新内容类型。在 SharePoint 2010 中实现它的唯一方法是使用客户端对象模型。Lists.UpdateListItems 可以做到这一点，但是一旦更新了内容类型，就会添加新的文档版本。

请参阅参考：[这些线程](http://social.msdn.microsoft.com/Forums/en-US/sharepoint2010programming/thread/9f0d2143-b4af-405b-b73e-8156051ba68f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:26:11.117

似乎添加一个名称为“ContentType”的字段并为其赋予内容类型名称的值确实有效。我不知道这是否支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T18:42:26.877

使用内容类型名称，它将在 SharePoint 2010 中工作

`<Method ID='1' Cmd='New'><Field Name='Title'>134</Field><Field Name='ContentType'>ContentTypeNameHere</Field></Method>`

# php - 与维基百科 API 交互

> ID：10502969
> 
> 赞同：2
> 
> 时间：2012-05-08T16:56:24.483
> 
> 标签：php, json, wikipedia

这是获取 Wikipedia 上有关高盛的文章介绍的链接。

```
http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Goldman_Sachs&format=json&exintro=1 
```

我有一个两部分的问题。

1.  如何使用 PHP 在服务器端运行这些类型的 API 调用？我希望能够在不使用链接的情况下连接到 Wikipedia API 以获取有关主题、公司、人员的数据
2.  如何解析 JSON 或 XML，以便输出将是严格的文本？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:59:15.137

> 如何使用 PHP 在服务器端运行这些类型的 API 调用？

我相信[cURL](http://php.net/curl)是通常的选择。该手册有[示例](http://uk.php.net/manual/en/curl.examples-basic.php)。您也可以使用[`fopen`](http://php.net/fopen).

> 如何解析 JSON

[`json_decode`](http://php.net/json_decode)

# sql - 如何在 T-SQL 中使用正则表达式？

> ID：10502972
> 
> 赞同：2
> 
> 时间：2012-05-08T16:56:36.360
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

例如：

```
where strword match with {%{J{GC * GC}J} or strword={%{J{GC * GC}J} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T17:03:24.840

我通常会尽量避免发布只是链接到其他地方的答案。但在这种情况下，这是一个相当大的答案，因为您必须让 CLR 参与您的方法。

所以 - 在这种情况下，我将破例并给你一个链接。我感觉好多了，因为它是微软的官方文档，而且他们很擅长不移动东西。

[这是 Microsoft 将 RegEx 与 SQLServer 结合使用的演练。](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)

它有很好的示例代码，并且覆盖范围很广。如果您可以将 CLR 添加到您的解决方案中，那么它应该可以为您提供所需的一切。

**更新：**事实证明微软确实改变了这个链接。可以在这里找到一家受人尊敬的公司（Red Gate）的另一次演练： [https ://www.red-gate.com/simple-talk/sql/t-sql-programming/clr-assembly-regex-functions-for- sql-server-by-example/](https://www.red-gate.com/simple-talk/sql/t-sql-programming/clr-assembly-regex-functions-for-sql-server-by-example/)

# objective-c - 声明具有两种类型的 typedef

> ID：10502978
> 
> 赞同：2
> 
> 时间：2012-05-08T16:56:57.620
> 
> 标签：objective-c, c

我需要的是声明一个 C 函数，它同时接受 Objective-C 'id' 类型和 'Class' 类型作为参数，但仅此而已。

考虑：

void the_function(classorid theargument);

我想声明一个 typedef 来实现这个目的......可以保存“id”指针或“类”值的东西......然后我会弄清楚我的 C 函数的值是什么。

那么......有什么方法（或类型？）我可以使用它来实现这个目标吗？

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:00:45.700

工会可能会有所帮助。

[http://www.anyexample.com/programming/cplusplus/example_of_using_union_in_cplusplus.xml](http://www.anyexample.com/programming/cplusplus/example_of_using_union_in_cplusplus.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:46:28.173

由于类本身由 ObjC 中的对象表示，并且`id`是“通用对象”类型，因此您实际上可以`id`用作指向类的指针的类型。使用参数定义函数`id`将允许您传入实例和`Class`对象。你在函数中对它们做什么（你将如何区分它们）是你的事。

```
static void doThatThingYouDo(id obj) {

    NSLog(@"%@", obj);
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        Class c = [NSString class];
        NSString * s = @"Rigatoni";

        id ci = c;

        doThatThingYouDo(c);
        doThatThingYouDo(s);

    }
    return 0;
} 
```

# ruby-on-rails - Heroku 部署“指定的 RUBY_VERSION 无效”，昨天工作

> ID：10502982
> 
> 赞同：3
> 
> 时间：2012-05-08T16:57:06.357
> 
> 标签：ruby-on-rails, deployment, heroku, ruby-on-rails-3.2

我昨天能够部署到heroku就好了。我们在带有 rails 3.2 应用程序的 cedar 堆栈上。当我部署它给我这个：

```
$ git push -f heroku-ab-staging  tmp-heroku-deploy-gochez_heroku_test-2012-05-08-10-43-39:master
Counting objects: 222, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (162/162), done.
Writing objects: 100% (191/191), 112.28 KiB, done.
Total 191 (delta 45), reused 13 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
 !
 !     Invalid RUBY_VERSION specified: fatal:-Not-a-git-repository:-'.'-fatal:-Not-a-git-repository:-'.'-fatal:-Not-a-git-repository:-'.'-No-ruby-version-specified
 !     Valid versions: ruby-1.9.3-p0, ruby-1.9.3-p125, rbx-1.2.4, rbx-2.0.0dev-20120115-1.9, rbx-2.0.0dev-20120115-1.8, rbx-2.0.0dev-20120123-1.9, rbx-2.0.0dev-20120123-1.8, ruby-1.9.2-p290, jruby-1.6.5.1, jruby-1.6.7, ruby-1.9.3, ruby-1.9.2
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:myapp.git
 ! [remote rejected] tmp-heroku-deploy-gochez_heroku_test-2012-05-08-10-43-39 -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:myapp.git' 
```

`myapp`（请注意，出于隐私考虑，我将真实应用的名称更改为）

知道可能是什么原因造成的吗？它昨天工作得很好。我可以执行哪些调试来找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:07:35.653

我们更改了您正在使用的未记录 API 并发布了正式版 ruby​​ 支持：[http](http://blog.heroku.com/archives/2012/5/9/multiple_ruby_version_support_on_heroku/) ://blog.heroku.com/archives/2012/5/9/multiple_ruby_version_support_on_heroku/您现在需要使用 Bundler 1.2.0 +。如果您有任何问题，请告诉我。

# ruby-on-rails - Rails 3 Activerecord TimeWithZone 到没有偏移的字符串

> ID：10502984
> 
> 赞同：0
> 
> 时间：2012-05-08T16:57:10.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, activerecord

我有：

```
irb(main):016:0> t[0].change_date
=> Tue, 08 May 2012 18:33:53 FET +03:00
irb(main):017:0> t[0].change_date.class
=> ActiveSupport::TimeWithZone
irb(main):018:0> t[0].change_date.to_s
=> "2012-05-08 18:33:53 +0300" 
```

如何获得日期时间的字符串表示但没有偏移量**+3000**？我只需要**“2012-05-08 18:33:53”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:08:32.527

您可以使用`strftime`格式化您希望查看的方式`datetime`。 [strftime 文档。](http://apidock.com/ruby/Time/strftime)

因此，在您的情况下，如果您希望将日期视为：`2012-05-08 18:33:53`，请使用：

`t[0].change_date.strftime("%Y-%m-%d %H:%M:%S")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:16:10.493

您可以使用 ActiveSupport 中的辅助方法，例如

```
 t[0].change_date.to_formatted_s(:db) 
```

由于 to_fomatted_s 别名为 to_s 您也可以使用

```
 t[0].change_date.to_s(:db) 
```

您可以检查文档日期格式中的时间格式支持 (http://api.rubyonrails.org/classes/Date.html#DATE_FORMATS)

# ruby-on-rails - Ruby/Rails：覆盖 rails 方法的正确方法？

> ID：10502988
> 
> 赞同：0
> 
> 时间：2012-05-08T16:57:23.750
> 
> 标签：ruby-on-rails, ruby, rubygems, gem, monkeypatching

我正在创建一个 Rails gem，它为 Rails 的 fields_for 方法添加了功能，我希望它可以从任何表单构建器中调用。为了保持简洁、可继承（从 form_for、nested_fields_for 等）和向后兼容，我开始认为重写 fields_for 方法是最好的方法。

不过，我以前没有这样做过，我可以设想一些丑陋的问题。具体来说：

*   我需要在新的方法中调用原始的 fields_for 方法（通过 alias_method）。如果 Rails 将来改变该方法的工作方式，我猜我的 gem 会破坏所有 fields_for 功能（？）

*   如果另一个 gem 覆盖 fields_for，我怀疑我的或其他 gem 的 fields_for 方法将被忽略（？）

*   一般来说，覆盖现有的 rails 方法的想法似乎很狡猾。

我确定这是其他开发人员面临的问题，我只是想知道 - 覆盖 rails 方法的标准方法是什么？在优秀的开发人员中，这是一个大禁忌吗？有没有另一种方法来解决这类问题？我是否应该放弃尝试简洁、优雅的解决方案并使用不同的方法名称来完成它？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T17:01:39.777

我不会覆盖您的方法，而是从 simple_form 和 formtastic 中获取一个页面。两者都有效地改变了 form_for 方法，但它们在顶部创建了一个新方法。

```
<%= simple_form_for @model do |f| %>
<% end %> 
```

通过这种方式，您可以将所有未响应的内容发送到 form_for，并与方法签名更改保持隔离。

# php - Yii 使用不相关的表创建一个 Create & Update MVC

> ID：10502990
> 
> 赞同：-1
> 
> 时间：2012-05-08T16:57:28.437
> 
> 标签：php, activerecord, yii

所以我的 schemca 非常类似于：

```
users
--------------
userid, name, password, email 

userinroles 
--------------
pk, userid, roleid

roles
-----------
roleid, level, description 
```

正如您所看到的，角色表通过 userinroles 表与用户相关联，这样用户就可以在不同的组中拥有编辑权限，并对不同的事物拥有不同级别的访问权限。例如，他们可能需要成为页面编辑器，同时对模块拥有超级管理员权限。

问题是当我更新或创建记录时，我不知道如何列出角色，以便您可以选中他们应该拥有的角色的框并将其插入到 userinroles 表中。

关于如何做到这一点的任何想法？

模型：

```
Yii::import('application.models._base.BaseUser');
class User extends BaseUser
{
    public static function model($className=__CLASS__) {
        return parent::model($className);
    }
        public function rules() {
        return array(
                array('username, password, email', 'required'),
                array('isActive, isDeleted, isLocked', 'numerical', 'integerOnly'=>true),
                array('username', 'length', 'max'=>50),
                // Throws error if user name is not unique 
                array('username', 'unique', 'attributeName'=> 'username', 'caseSensitive' => 'false'),
                array('password', 'length', 'max'=>255),
                array('email, organization, position', 'length', 'max'=>100),
                array('salt', 'length', 'max'=>32),
                array('organization, position, salt, isActive, isDeleted, isLocked', 'default', 'setOnEmpty' => true, 'value' => null),
                array('userid, username, password, email, organization, position, salt, isActive, isDeleted, isLocked', 'safe', 'on'=>'search'),
        );
    }
    public function relations() {
        return array(
            'toolaccesses' => array(self::HAS_MANY, 'Toolaccess', 'userID'),
            'usergalleries' => array(self::HAS_MANY, 'Usergallery', 'userid'),
            'userinroles' => array(self::HAS_MANY, 'Userinroles', 'userid'),
                        'tools' =>array(self::MANY_MANY, 'Tool', 'toolid'),
        );
    }        
} 
```

控制器：

```
class UserController extends GxController {

    public function actionView($id) {
        $this->render('view', array(
            'model' => $this->loadModel($id, 'User'),
        ));
    }

    public function actionCreate() {
        $model = new User;

        if (isset($_POST['User'])) {
            $model->setAttributes($_POST['User']);

                        // salting the user's password before we insert
                        $model->password = md5(Yii::app()->params["salt"] . $model->password);

            if ($model->save()) {
                if (Yii::app()->getRequest()->getIsAjaxRequest())
                    Yii::app()->end();
                else
                    $this->redirect(array('view', 'id' => $model->userid));
            }
        }

        $this->render('create', array( 'model' => $model));
    }

    public function actionUpdate($id) {
        $model = $this->loadModel($id, 'User');

        if (isset($_POST['User'])) {
                    // testing if we need to salt the password. 
                    if(strcmp($_POST['User']['password'], $model->password)!=0)
                    { // passwords passed in are not the same. We need to now modify the post password
                        $_POST['User']['password'] = md5(Yii::app()->params["salt"] . $_POST['User']['password']);
                    }
                    $model->setAttributes($_POST['User']);
                    if ($model->save()) {
                            $this->redirect(array('view', 'id' => $model->userid));
                    }
        }

        $this->render('update', array(
                'model' => $model,
                ));
    }

    public function actionDelete($id) {
            // prevent the deletion of the super user, who has the ID 1\. 
            // This is sort of like a Unix "root" user or a Window's Administrator
            if($id == 1)
            {
                throw new CHttpException(400, Yii::t('app', 'You cannot delete the super admin.'));
            }
            else 
            {
        if (Yii::app()->getRequest()->getIsPostRequest()) {
            $this->loadModel($id, 'User')->delete();

            if (!Yii::app()->getRequest()->getIsAjaxRequest())
                $this->redirect(array('admin'));
        } else
            throw new CHttpException(400, Yii::t('app', 'Your request is invalid.'));
            }
    }

    public function actionIndex() {
        $dataProvider = new CActiveDataProvider('User');
        $this->render('index', array(
            'dataProvider' => $dataProvider,
        ));
    }

    public function actionAdmin() {
        $model = new User('search');
        $model->unsetAttributes();

        if (isset($_GET['User']))
            $model->setAttributes($_GET['User']);

        $this->render('admin', array(
            'model' => $model,
        ));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T01:11:45.267

首先，我认为您应该在用户和角色表之间使用多对多关系-

```
 public function relations() {
    return array(
        'toolaccesses' => array(self::HAS_MANY, 'Toolaccess', 'userID'),
        'usergalleries' => array(self::HAS_MANY, 'Usergallery', 'userid'),
        'roles' => array(self::MANY_MANY, 'Roles', 'userinroles(userid, roleid)'),
        'tools' => array(self::MANY_MANY, 'Tool', 'toolid'),
    ); 
```

之后，您将能够为具有`$user->roles`. 关于一些与具体用户相关的角色操作：我使用[这个扩展](http://www.yiiframework.com/extension/advancedrelationsbehavior/)来保存多对多关系。对不起，如果我理解错了。

# python - Numpy __array_prepare__ 错误

> ID：10502991
> 
> 赞同：1
> 
> 时间：2012-05-08T16:57:33.380
> 
> 标签：python, numpy, machine-learning, scipy, expectation-maximization

我正在尝试使用我在网上找到的用于最大化期望的配方（[http://code.activestate.com/recipes/577735-expectation-maximization/](http://code.activestate.com/recipes/577735-expectation-maximization/)）。我遇到以下错误：

```
Traceback (most recent call last):
  File "./runem.py", line 7, in <module>
    print expectation_maximization([[1,2,3,4,5],[2,3,4,5,6],[9,8,7,4,1]], 2)
  File "/local/scratch-3/dk427/rp/em.py", line 83, in expectation_maximization
    Px[o,c] = pnorm(t[o,:], params[c]['mu'], params[c]['sigma'])
  File "/local/scratch-3/dk427/rp/em.py", line 18, in pnorm
    xmt = np.matrix(x-m).transpose()
TypeError: __array_prepare__ must return an ndarray or subclass thereof which is otherwise identical to its input 
```

算法一定有缺陷，或者我输入错误，但我找不到问题所在。我发现错误是由减法引起的，`x-m`但是我认为应该可以。`x.dtype=int64``m.dtype=float64`

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T04:50:59.383

您似乎传递的是列表列表而不是数组。您可以执行以下操作：

```
ts = np.array([[1,2,3,4,5],[2,3,4,5,6],[9,8,7,4,1]])
expectation_maximization(ts, 2) 
```

在我的计算机上取平方根似乎在某些时候存在一些问题，但我认为这可能是因为由于某种原因该数据不适合该算法（但我不知道该算法试图做什么做，所以我不能肯定地说）。

# keyboard - 如何过滤键盘事件？

> ID：10502992
> 
> 赞同：0
> 
> 时间：2012-05-08T16:57:37.887
> 
> 标签：keyboard, vhdl, ps2

我正在为 spartan 3E 入门套件编写一个乒乓球游戏 vhdl 代码。我想用我的 PS2 键盘控制游戏手柄。为此，我需要从键盘接收到的扫描码生成向上和向下信号。

这是示例代码

```
 -- Instantiate key_board controller
    my_keyobard : entity work.ps2_key(Behavioral)
                    port map( ps2_clk => ps2_clk, ps2_data => ps2_data, clk => clk,
                    data_out => data);

   process(data)
   begin
          case data is
                 when X"15" => up <= '1'; -- Q key for UP
                 when X"1C' => down <= '1'; -- A key for DOWN
                 when others => up <= '0'; down <= '0';
          end case;
   end process; 
```

但是，如果我使用此代码，即使在键盘上释放 Q 键之后，向上键也将始终保持“1”高电平。我希望向上信号保持高电平，直到我按住 Q 按钮，如果我松开它，向上信号必须返回到“0”。**基本上我希望我的键盘按键能够像普通按钮一样工作。如果我按住它必须给出高信号，否则如果松开它必须给出低信号。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:15:59.883

我相信 PS2 键盘协议会发送一个命令字，然后是按下按钮时的键盘代码，然后是两个命令字和一个键盘代码。你在其他地方处理这个吗？我们需要更多地了解您的键盘控制器中的“数据输出”。它会锁存来自键盘的数据信号吗？如果您在释放密钥时重置了数据，那么您的代码应该可以正常工作。

第 8 页是我所说的 [http://www.cse.nd.edu/courses/cse20221/www/handouts/L21_%20PS2%20Keyboard.pdf](http://www.cse.nd.edu/courses/cse20221/www/handouts/L21_%20PS2%20Keyboard.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:55:33.787

`others`子句被综合忽略（通常，除非你告诉他们不要这样做）

```
process(data)
   begin
          up <= '0'; down <= '0';
          case data is
                 when X"15" => up <= '1'; -- Q key for UP
                 when X"1C" => down <= '1'; -- A key for DOWN
          end case;
   end process; 
```

您是否模拟过 - 它应该按照您的方式在模拟中正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T19:07:33.357

PS/2 键盘协议比这更复杂。您需要实现一个有状态的解码器。

简单来说：

1.  当什么都没有发生时，两者`ps2_data`和`ps2_clk`总是`'1'`。
2.  在一个事件中，键盘发送一个起始位`(0)`，一个接一个的数据位，然后是一个停止位`(1)`。这些位以 计时`ps2_clk`。
3.  按住某个键时，会以一定的间隔重复发送扫描码。
4.  当按下一个键时`'F0'`，会发送代码，然后是扫描代码（对于包括箭头键的所谓“扩展”键来说，这有点复杂）。

请参阅[Xilinx Spartan-3E FPGA 入门套件板用户指南](http://www.xilinx.com/support/documentation/boards_and_kits/ug230.pdf)、*“PS/2 鼠标/键盘端口”*部分和/或[通用 PS/2 电子协议描述](http://www.computer-engineering.org/ps2protocol/)（后者实质上更详细地重复了前者）。

# search - Google Mini 抓取 SharePoint UNC 路径

> ID：10502997
> 
> 赞同：0
> 
> 时间：2012-05-08T16:57:55.873
> 
> 标签：search, sharepoint, unc, google-search-appliance

我继承了一个 Google Mini 并试图解决无法在本地索引 SharePoint (2003) 的限制。我可以将 UNC 路径映射到 Windows 或 Mac OS X 中站点的共享文档文件夹，但我被 Mini 卡在某个地方。还是我疯了？这不是有效的解决方法吗？

对于“从以下 URL 开始爬网：”和“sharepoint.mysite.com\DavWWWRoot\sites\siteName\LibraryName\”，我有以下内容：

```
\\sharepoint.mysite.com\DavWWWRoot\sites\siteName\LibraryName\ 
```

由于这需要身份验证，因此我在 Crawler Access 中具有相同的 URL，并带有经过测试的用户名/密码组合。

Crawl Diagnostics 为我`Error: Document not found (404).`提供了相同的 URL。（Mini 在诊断中显示为`unc://sharepoint.mysite.com/DavWWWRoot/sites/siteName/LibraryName/`）

在网络设置下，我为上述 URL 运行了网络诊断并收到以下信息：

> 测试 URL unc://sharepoint.mysite.com/DavWWWRoot/sites/siteName/LibraryName/ returncode 404，应该是 200
> 测试 URL unc://sharepoint.mysite.com/DavWWWRoot/sites/siteName/LibraryName/ OK - pingable

我正在尝试通过 Google Mini 实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:36:24.963

我发布了一个指向我写的产品的链接，该链接已被删除（你可以谷歌找到它）。通过 UNC 安装不是最好的方法。但是，请尝试使用 smb:// 而不是 unc 作为路径。