# StackOverflow 问答 11108000-11108999

# c# - 项目运行时在 MVC 项目中重复代码

> ID：11108003
> 
> 赞同：3
> 
> 时间：2012-06-19T19:28:45.840
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, timer

我想知道是否可以在您的 Web 项目启动时循环一些代码（我正在使用 MVC4 RC 和 C#）。例如，您有一个实体工厂。这家工厂每小时制造一把椅子。因此，该项目应该在服务器上运行时执行此操作。无论用户是否在网站上。这可能吗？你会怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:38:07.413

是的，有一种方法可以做到这一点：将某些内容放入具有特定生命周期的缓存中，然后向 OnCacheRemovedCallback 注册。在此回调中执行您想要执行的操作并将新项目插入缓存。您需要在启动时插入 6 以启动链。这是由 SO 完成的（参见[https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)），所以它可以工作。它显然有效，可以称为务实的解决方案。

*有些人会认为这有点“骇人听闻”，如果不确切知道您在做什么或为什么要这样做，我往往不会这样做。这绝对不是完成此类任务的艺术。*

* * *

另一种选择（user1308743 提到过这一点）：创建一个可执行您需要的 exe，并让它每小时从任务计划程序中调用一次。

* * *

一个稍微不同的选择：编写一个 Windows 服务并实现一个计时器或使用 Quartz.NET 之类的东西来以这种方式安排你的工作。也许是工作最多、最受企业欢迎的解决方案，但它确实有效（已经实现了类似的东西，并且对我需要做的事情很有魅力）。作为附加值，您可以以可配置的方式编写您的日程安排。

* * *

在 SO 上找到另一个选项：[Recurring tasks in ASP .NET](https://stackoverflow.com/questions/8667062/recurring-tasks-in-asp-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:31:54.043

这可能不是正确的方法，但您可以创建一个 EXE 来处理您的任务并让它在服务器上运行。

# php - 在 PHP 中使用 ImageMagick 倾斜移动图像

> ID：11108004
> 
> 赞同：2
> 
> 时间：2012-06-19T19:28:50.467
> 
> 标签：php, imagemagick, imagick

我有一个可以在命令行上运行的命令，以使用 Imagemagick 倾斜移动图像：

```
转换 \( myimage.jpg -gamma 0.75 -modulate 100,130 -contrast \) \( +clone -sparse-color Barycentric "0,0 black 0,%h white" -function polynomial 4,-4,1 -level 0,50 % \) -compose blur -set 选项：compose:args 5 -composite myimage.jpg

```

我希望能够使用 PHP 的 imagemagick 库重现此命令的效果。该命令的第一部分很容易重现，但我无法弄清楚 sparse-color 及其后面的参数。到目前为止，我有：

```
$image = new imagick("myimage.jpg") 

$image->gammaImage(0.75); 

$图像->调制图像（100,130,100）；

$图像->对比度图像（1）；

```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:17:53.057

祝你好运 Vijay - 我建议你坚持使用 exec()

无论如何只是试了一下，我的代码如下；您可以看到我所做的一些更改并放弃了一行错误： $new->functionImage ( FUNCTION_POLYNOMIAL, $functionImagearray );

```
// Did not like the %h
// $sparseColorarray = array( 0, 0, black, 0, %h, white );
$sparseColorarray = array( 0, 0, black, 0, 20, white );
$functionImagearray = array( 4, -4, 1 );
$image = new imagick("output3.jpg");
$image->gammaImage(0.75);
$image->modulateImage(100,130,100);
$image->contrastImage(1);
//$new = $image->clone(); 
$new = clone $image; 
$new->sparseColorImage( Imagick::SPARSECOLORMETHOD_BARYCENTRIC, $sparseColorarray );
$new->functionImage ( Imagick::FUNCTION_POLYNOMIAL, $functionImagearray );
// Did not like the %
// $new->levelImage( 0, 50% );
$new->levelImage( 0, 50 );
// Can not find any options for this blur
$image->setImageCompose ( BLUR );
$image->setOption( args, 5);
$image->compositeImage( $new, COMPOSITE_BLEND, 0, 0 );
$image->writeImage( "tilt.jpg" );
$image->destroy(); 
```

阅读文档并遵循您的示例代码，这就是我想出的。我也找不到 $image->setImageCompose ( BLUR ); 的选项。

看看你是否让它工作起来会很有趣。

**刚刚发现我的 Imagick 版本对于 functionImage 来说太旧了**

更改了 $new->functionImage 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:05:59.187

我对 ImageMagick 没有丰富的经验，但我相信有一个与稀疏颜色重心等效的功能，可以在[此处](http://www.php.net/manual/en/imagick.constants.php#imagick.constants.channel)的文档中找到。

它应该看起来像：

```
$image -> sparseColorImage(int SPARSECOLORMETHOD_BARYCENTRIC (integer), 
                           array $arguments [, int $channel = CHANNEL_DEFAULT ]) 
```

可以在[此处](http://www.php.net/manual/en/imagick.constants.php#imagick.constants.channel)找到 FUNCTION_POLYNOMIAL 和其他方法常量/通道常量以供将来参考！

[高斯模糊](http://www.php.net/manual/en/imagick.gaussianblurimage.php)通过添加处理：

```
$image -> gaussianBlurImage ( float $radius , 
                              float $sigma [, int $channel = CHANNEL_ALL ] ) 
```

当然，这些都是非常通用的，但您可以随意使用以获得您想要的外观和感觉。

希望这可以帮助！

石匠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T17:09:46.957

我假设您指的是此处找到的示例：

[http://www.imagemagick.org/Usage/photos/](http://www.imagemagick.org/Usage/photos/)

话虽如此，我一直在尝试用 PHP Imagick 完成同样的事情。我在 Linux 中使用 PHP Imagick 3.0.1 和 ImageMagick 6.7.4-4 2012-01-09 Q16。

模糊合成模式似乎没有记录。我通过查看`magick/composite.h`在线下的 ImageMagick 源代码找到了它`88`。

此代码完成您正在寻找的内容：

```
$im = new Imagick();
$im->readImageBlob(file_get_contents($src));
$qr = $im->getQuantumRange();
$qr = $qr['quantumRangeLong'];
$im->sigmoidalContrastImage(true, 10, $qr / 2, Imagick::CHANNEL_ALL);
$blurmap = new Imagick();
$blurmap->setOption('compose:args', '5');
$blurmap->newPseudoImage($im->getImageWidth(), $im->getImageHeight(), 'gradient:black-white');
$blurmap->functionImage(Imagick::FUNCTION_POLYNOMIAL, array(4.5, -4.5, 1));
$blurmap->levelImage(0, 1, $qr / 2);
$im->compositeImage($blurmap, 57, 0, 0);
$blurmap->destroy(); 
```

如果您需要更多模糊，只需更改`compose:args`为`10`或其他内容。我发现的一件事是，我必须在创建/加载任何东西到魔杖本身之前设置选项。

我无法让`SparseColorImage()`函数像在命令行上那样运行，尽管我确信如果其他人弄明白了，他们可以贡献那部分。以上满足我的需求。

**编辑：**在进一步检查生成的图像后，我注意到即使是模糊贴图的黑色部分也被模糊了。经过一番搜索，这似乎源于 ImageMagick 中引入的错误。我切换到版本 6.7.8-1 2012-07-05 Q16，现在模糊贴图似乎可以正常工作。如果您发现模糊合成出现不必要的模糊，我建议您升级您的 ImageMagick。

# javascript - 在外部调用javascript不起作用

> ID：11108007
> 
> 赞同：0
> 
> 时间：2012-06-19T19:28:59.990
> 
> 标签：javascript, jquery, external

我正在尝试从外部加载此 javascript，但它似乎无法正常工作？是否有一个原因？

我一直在阅读，我在一切之前先加载 jquery。但是当调用这些函数时，它们不会加载。

```
$(document).ready(function () {
  //add span to numbers
  var elem = document.getElementById('passage');
  elem.innerHTML = elem.innerHTML.replace(/\b(\d+)\b/g, '<span>$1</span>');

  //menu toggle     
  $("#social-wrap li:nth-child(6)").click(function () {
    $("#phone-nav").slideToggle("slow");
  });

  //nav slideDown      
  $('#main-nav li').hover(function () {
    //show its submenu
    $('ul', this).slideDown(100);
  }, function () {
    //hide its submenu
    $('ul', this).slideUp(100);
  });

  //show/hide countdown  
  $('#show').click(function () {
    $('#countdown').slideDown('slow');
    return false;
  });

  $('#hide').click(function () {
    $('#countdown').slideUp('fast');
    return false;
  });

  $('#hide,#show').click(function () {
    $('#hide,#show').toggle();
  })

}); 
```

*编辑*

这是我正在构建的 wordpress 主题的链接：[http](http://beta.revival.tv/)
://beta.revival.tv/ 以及 JS 文件：[http ://beta.revival.tv/wp-content/themes/revival-theme/lib /scripts/main.js?ver=1.1](http://beta.revival.tv/wp-content/themes/revival-theme/lib/scripts/main.js?ver=1.1)
很抱歉该网站有多乱，仍在努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:16:18.753

一方面，我听说 Wordpress 与 JQuery 的 $ 简写混淆了。您可以将您的代码包装成这样，以便能够使用 $ 速记。否则请尝试使用完整的 jQuery() 而不是 $()。

```
( function( $ ) {
   // allows you to use $ inside of this wrapper.

} )( jQuery ); 
```

另外，您如何将 jQuery 添加到您的主题中？

[http://wordpress.org/support/topic/how-do-you-get-jquery-to-work-in-wordpress](http://wordpress.org/support/topic/how-do-you-get-jquery-to-work-in-wordpress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:32:55.250

包含外部脚本的一件非常奇怪的事情是，如何关闭它很重要。这个：

```
<script type='blah' src='path'></script> 
```

工作，这：

```
<script type='blah' src='path' /> 
```

没有。我不知道为什么，我只知道这可能会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:35:45.983

```
 $('#hide,#show').click(function () {
    $('#hide,#show').toggle();
}) 
```

这里缺少分号。

现在再试一次。希望它有效。即使没有，也要在您调用它的地方发布您的主 html 页面。

# wpf - XAML 中从形状到路径的转换

> ID：11108008
> 
> 赞同：4
> 
> 时间：2012-06-19T19:29:02.877
> 
> 标签：wpf, xaml, path, expression-blend

如何将 XAML 代码（代表一组形状）更改为 PATH 呈现的单个图形？

假设我们有 XAML 代码，例如：

```
 <Ellipse Fill="#FF0A0A0E" HorizontalAlignment="Left" Margin="192,184,0,0" 
           Stroke="Black" Width="8" Height="8" VerticalAlignment="Top"/>
  <Rectangle Fill="Black" HorizontalAlignment="Left" Margin="152,187.5,0,0" 
             Stroke="Black" Width="89.5" Height="1" VerticalAlignment="Top"/> 
```

并需要将其转换为单个路径对象？

我尝试使用 Blend 4，它允许您将形状转换为路径，但上面的代码被转换为：

```
<Path Data="M7.5,4 C7.5,5.9329966 5.9329966,7.5 4,7.5 C2.0670034,7.5 0.5,5.9329966 0.5,4 C0.5,2.0670034 2.0670034,0.5 4,0.5 C5.9329966,0.5 7.5,2.0670034 7.5,4 z" 
      Fill="#FF0A0A0E" HorizontalAlignment="Left" Height="8" Margin="192,184,0,0" 
      Stretch="Fill" Stroke="Black" VerticalAlignment="Top" Width="8"/>
<Path Data="M0.5,0.5 L89,0.5 z" Fill="Black" HorizontalAlignment="Left" Height="1" 
      Margin="152,187.5,0,0" Stretch="Fill" Stroke="Black" VerticalAlignment="Top" 
      Width="89.5" /> 
```

我问这个问题的原因是因为我只能定义一个路径。如我错了请纠正我。如果是这样，那么我怎样才能在一种样式中嵌入 2 条或更多条路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:10:07.510

`Path`您可以使用 Expression Blend 4将两种形状合二为一。

为此，请按住 ctrl 或 shift 选择它们

![在此处输入图像描述](../Images/14948cc4328f640db3549fd2651d8513.png)

之后，选择对象 -> 组合 -> 联合

在你的情况下，它会输出这个

```
<Path Data="M44,0.5 C45.932995,0.50000024 47.5,2.0670036 47.5,4.0000002 L89,4.0000002 89,4.0100003 47.499496,4.0100003 47.48193,4.3578544 C47.302696,6.122751 45.812183,7.5000002 44,7.5000002 42.187817,7.5000002 40.697304,6.122751 40.51807,4.3578544 L40.500504,4.0100003 0.5,4.0100003 0.5,4.0000002 40.5,4.0000002 C40.5,2.0670036 42.067005,0.50000024 44,0.5 z"
      Fill="Black"
      HorizontalAlignment="Left"
      Height="8"
      Margin="152,184,0,0"
      Stretch="Fill"
      Stroke="Black"
      VerticalAlignment="Top"
      Width="89.5"/> 
```

请注意，如果 Rectangles`Height`正好为 1，则存在一个错误。然后它就会消失。要解决此问题，只需设置`Height`为 1.00001

```
<Rectangle Fill="Black" HorizontalAlignment="Left" Margin="152,187.5,0,0"  
         Stroke="Black" Width="89.5" Height="1.00001" VerticalAlignment="Top"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:42:10.843

可以使用一个数据字段执行多个单独的路径。例如：

```
<Path Data="M0,0 L 10,10 L 20, 10 L 20,0 z M 100,5 L 110,15 L 120,15 L 120,5 z" 
      Stroke="Black" Fill="Red" /> 
```

但是，这假设您在两个部分中都需要相同`Fill`的 ,`Stroke`等，而在您的示例中并非如此。

# c++ - 如何在运行时检索#pragma 评论数据？

> ID：11108010
> 
> 赞同：2
> 
> 时间：2012-06-19T19:29:08.380
> 
> 标签：c++, visual-studio-2008, visual-c++, comments, pragma

今天晚上我在 MSDN 上看到了一个关于`#pragma`选项的部分。具体来说，[`#pragma comment`](http://msdn.microsoft.com/en-us/library/7f0aews7%28v=vs.80%29.aspx)定义。

是否可以在运行时将这些信息提取出来（例如，确定在哪台机器上生成了某些源代码）？如果是这样，怎么做？

例如，如果要添加以下内容，如何检索编译日期`#pragma`：

```
pragma comment( user, "Compiled on " __DATE__ " at " __TIME__ ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:45:35.163

字符串“Compiled on” ...实际上在二进制文件中，但不能直接访问。您需要做的是实际扫描可执行映像以找到该字符串。这带来了自己的一系列问题（即，您如何在大海捞针中找到作为代码的字符串的针），而没有一些“标记”来告诉您“啊哈！就在这里！”

为什么不做这样的事情来让你的生活更轻松呢？

```
static const char *sCompileInfo = "Compiled on " __DATE__ " at " __TIME__ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:49:31.047

根据您引用的 MSDN 页面，`#pragma comment`只有当*注释类型*为`exestr`. 您的示例是 type `user`，并且文档非常清楚地表明它不会被链接。此外，甚至类型`exestr`不再被处理（同样，文档指出了这一点）。

* * *

对于存储在二进制文件中的注释，以后无需执行程序即可检索，请尝试使用 rc.exe 将 VERSIONINFO 资源嵌入到可执行文件中，并使用[`GetFileVersionInfoEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969434%28v=vs.85%29.aspx)函数读取它。STRINGTABLE 资源类型也可能是有效的。

# ruby - 是否有可以在列中打印 Ruby 数组的内置方法或 gem？

> ID：11108011
> 
> 赞同：2
> 
> 时间：2012-06-19T19:29:09.583
> 
> 标签：ruby, pretty-print

我有一个大型 Rub​​y 数组，我想在列中打印，就像 Unix' 'ls' 命令的默认输出（至少在 OS X 上）。是否有可以做到这一点的 gem 或内置方法？我知道 awesome_print gem。它有一些性感的输出，但似乎没有提供列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T20:29:14.380

[Enumerable#each_slice](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)可能是你的朋友。

```
$ irb
irb> a = (0..18).to_a
=> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18]
irb> a.each_slice(5) { |row| puts row.map{|e| "%5d" % e}.join("  ") }
    0      1      2      3      4
    5      6      7      8      9
   10     11     12     13     14
   15     16     17     18 
```

如果您希望它们在列中排序，您可以使用 slice 和[Enumerable#zip](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-zip)

```
irb> cols = a.each_slice((a.size+2)/3).to_a
=> [[0, 1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12, 13], [14, 15, 16, 17, 18]]
irb> cols.first.zip( *cols[1..-1] ).each{|row| puts row.map{|e| e ? '%5d' % e : '     '}.join("  ") }
    0      7     14
    1      8     15
    2      9     16
    3     10     17
    4     11     18
    5     12       
    6     13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:39:36.430

除了我的第一个完整的可配置解决方案之外，还有一个基于元素最大字符串长度的更短的解决方案

```
class Array
  def to_table l = []
    self.each{|r|r.each_with_index{|f,i|l[i] = [l[i]||0, f.length].max}}
    self.each{|r|r.each_with_index{|f,i|print "#{f.ljust l[i]}|"};puts ""}
  end
end

[["on", "two", "three", "a loooooooooooooooonger field"],["four","five","looooooooooonger","short one"]].to_table 
```

给

```
on  |two |three           |a loooooooooooooooonger field|
four|five|looooooooooonger|short one                    | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:55:32.540

我同意评论者 Sean 的观点，但我只是无法控制自己，而是抱着我的小便来给这个可爱的小便，我在 Windows 上，所以不知道 ls 的输出是如何相似的，但我相信有足够的选择在这里为您提供所需的输出

```
cm = {'headers' => ['first', 'second', 'third', 'fourth'], 'width' => [5, 5, 16, 30], 'separator' => '|', 'align' => [:left,:right,:left,:right]}
a = [["on", "two", "three", "a loooooooooooooooonger field"],["four","five","looooooooooonger","short one"]]
cm['headers'].each_with_index{|header, index|w = cm['width'][index];print "#{cm['align'][index]==:left ? header.ljust(w)[0..w-1]:header.rjust(w)[0..w-1]}#{cm['separator']}"}
puts ""
a.each do |record|
  record.each_with_index do |field, index|
    w = cm['width'][index]
    print "#{cm['align'][index]==:left ? field.ljust(w)[0..w-1]:field.rjust(w)[0..w-1]}#{cm['separator']}"
  end
  puts ""
end 
```

给

```
first|secon|third           |                        fourth|
on   |  two|three           | a loooooooooooooooonger field|
four | five|looooooooooonger|                     short one| 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:53:32.307

我认为使用`hirb`更有用：

```
require 'hirb'

Hirb.enable :output=>{"Array"=>{:class=>Hirb::Helpers::Table}}  #=> true

[[1,2], [2,3]]
+---+---+
| 0 | 1 |
+---+---+
| 1 | 2 |
| 2 | 3 |
+---+---+
2 rows in set

[[5,6,3,4]]
+---+---+---+---+
| 0 | 1 | 2 | 3 |
+---+---+---+---+
| 5 | 6 | 3 | 4 |
+---+---+---+---+
1 row in set 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-14T17:42:59.793

@peter 解决方案的一些改进：

1.  如果调用者不是数组数组，则引发异常；
2.  类型转换为字符串任何值都将适用于包含字符串和数字混合的数组；
3.  任何列分隔符字符串都可以指定为参数；
4.  输出是一个格式化为表格的字符串，因此可以进一步处理它，并且如果不需要输出，也不会破坏任何内容。

```
class Array

  # Convert an Array of arrays into a String, formatted as a table.
  def columnize(sep="  ")
    each{|r| r.is_a? Array or raise NoMethodError, "Must be called on an Array of arrays."}
    s = ""
    l = []
    each{|r|r.each_with_index{|f,i| l[i] = [l[i]||0, f.to_s.length].max}}
    each{|r|r.each_with_index{|f,i| s << "#{f.to_s.ljust l[i]}#{sep}"}; s << "\n"}
    return s
  end

 end 
```

称为

```
puts [["field", 2, 3, "another field"],[4,5,"looooooooooonger","short one"]].columnize(" | ") 
```

产生这个输出

```
field | 2 | 3                | another field | 
4     | 5 | looooooooooonger | short one     | 
```

# for-loop - 解析html文件

> ID：11108012
> 
> 赞同：3
> 
> 时间：2012-06-19T19:29:16.150
> 
> 标签：for-loop, batch-file, cmd

我想解析 html 文件并在 html 的某些部分中**查找数字。**此脚本的目标是为每个令牌获取一个数字。此脚本必须找到属于正确 IP 地址的号码。

数字是IP的一部分，但IP不完整，而是分隔成html标签。这就是为什么这项工作很复杂。直到现在我有这个代码：

```
@echo off
Setlocal EnableDelayedExpansion
SET proxy_3=hide_2.htm         

FOR %%Z IN (hide_2.htm) DO (
FOR /F "tokens=1-20 delims=<>" %%A IN ('grep -B 1411 -E "</table>" %%Z ^| grep -E ^"^(display^|^^\d\d{1,3}^|country^|^<td^>HTTP^|rightborder^).*$^" ') DO (
echo A:%%A + B:%%B + C:%%C + D:%%D + %%E + %%F + %%G + %%H + %%I + %%J + %%K + %%L
FOR %%? in ( "%%~A", "%%~B", "%%~C", "%%~D", "%%~E", "%%~F", "%%~G", "%%~H", "%%~I", "%%~J") DO (
SET $=%%~?
echo $:!$!
)
pause
)
) 
```

我在这里给出了带有颜色格式的代码链接：http: [//codepaste.net/iaf4zr](http://codepaste.net/iaf4zr)

然后，这是我解析 的**html 源代码：参见第 581-585 行：** [http](http://codepaste.net/11bqxd) ://codepaste.net/11bqxd （请耐心等待，加载需要一些时间。但如果您不想等待，我将源代码粘贴在这里没有格式化的html： [http://codepaste.net/wdkcdr](http://codepaste.net/wdkcdr)）

如果您想查看缩短版 - 这是**相关部分**L.581-585： [http ://codepaste.net/e1t61n](http://codepaste.net/e1t61n)

现在我做了一些**调试**：

```
A:          + B:td + C:span + D:span + 41 + /span + span style="display: none;"
+ 111 + /span + div +  +
$:
$:td
$:span
$:span
$:41
$:/span
$:span style="display:
$:none
$:
$:111
$:/span
$:div
Press any key to continue...
A: style="display: none;" + B:190 + C:/div + D:span class="" style="" + . + /spa
n + span + 197 + /span + span +  +
$: style="display:
$:none
$:
$:190
$:/div
$:span class="" style=""
$:.
$:/span
$:span
$:197
$:/span
$:span
Press any key to continue...
A: style="display: none;" + B:24 + C:/span + D:span + /span + . + span style="di
splay:  +  +  +  +  +
$: style="display:
$:none
$:
$:24
$:/span
$:span
$:/span
$:.
$:span style="display:
$: "" "" "
Press any key to continue...
A:inline;" + B:132 + C:/span + D:span style="display: none;" + 39 + /span + . +
span  +  +  +  +
$:inline;"" "132" "/span" "span
$:style
$:display: none;"" "39" "/span" "." "span
$: "" " 
```

美元 - $: 标记 $ 变量的值，它应该是来自第二个循环的派生列/标记，不带引号。在这里，我寻找不带引号的数字值。这在最后一种情况下失败。

字符 B：... D：标记前 4 个标记/列，其余标记不标记...

第 581-585 行的相关/相关部分是：

```
A:inline;" + B:132 + C:/span + D:span style="display: none;" + 39 + /span + . +
span + + + +
$:inline;"" "132" "/span" "span
$:style
$:display: none;"" "39" "/span" "." "span
$: "" " 
```

如果你想看这部分**的颜色**，请看这个链接： [http ://www.dostips.com/forum/viewtopic.php?f=3&t=3435](http://www.dostips.com/forum/viewtopic.php?f=3&t=3435)

所以第二个循环中的令牌 B 是 132，没有引号。看起来不错。但在第三个循环中，它变为 ... **style**。

而第二个循环中的第一个标记是 inline;"，第三个循环显示：**inline;"" "132" "/span" "span**

你能解释一下这是怎么可能的吗？我想在收到第二个成员时看到 132。我可以成功解析前 3 个数字，但这是我无能为力的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T18:11:15.997

您的问题在于解析引号。当线

```
FOR /F "tokens=1-20 delims=<>" %%A IN 
```

执行时，您的许多变量都被分配了包含一个或多个双引号的值。例如，第一次通过循环时，G 等价于：

```
(set G=span style="display: none;") 
```

然后在内部循环中，你有

```
FOR %%? in ( "%%~A", "%%~B", "%%~C", "%%~D", "%%~E", "%%~F", "%%~G", "%%~H",... 
```

"%%~G" 被替换为

“跨度样式=“显示：无；”“

这被解析为两个标记：

“跨度样式=”显示：

和

没有任何;””

（因为“ between = 和 display 在开头终止了”，所以 none; 之前的空格变得重要）

同样，在第三次循环中，也就是你遇到问题的地方，A、B、C 和 D 被等价地分配给

```
set A=inline;"
set B=132
set C=/span
set D=span style="display: none;"
set E=39
set F=/span
set G=. 
```

现在，很容易错过 H 的值。仔细检查“A:...”输出行显示 H 等效于：

```
(set H=span ) 
```

或者

```
set "H=span " 
```

即 H 是字符串跨度后跟一个空格，所以现在你的内部循环

```
FOR %%? in ( "%%~A", "%%~B", "%%~C", "%%~D", "%%~E", "%%~F", "%%~G", "%%~H", "%%~I", "%%~J") 
```

等同于（shell 在替换 %% vars 并解析标记之前删除 , 尾随 "）

```
FOR %%? in ( "inline;"" "132" "/span" "span style="display: none;"" "39" "/span" "." "span " "" "" ) 
```

并仔细看看它是如何解析的。“排队;” 是一个字符串，那么 " " 是一个字符串并且嵌入的空格不被视为标记分隔符，然后是 132 还没有空格，" " 再次是一个字符串并且嵌入的空格不被视为标记分隔符，然后是/span 和 " " 再次嵌入的空格不被视为标记分隔符，然后最后 span 和空格，因此第一个标记变为

```
set ?="inline;"" "132" "/span" "span 
```

接下来，我们得到“for”解析的一个未记录的特征：引号外的 = 被视为空格，因此第二个标记是

```
set ?=style 
```

然后是第三个标记，从“display: none;”开始 然后是 " " 然后 39 然后 " " 然后/span 然后 " " 然后 . 然后 " " 然后 span，当我们最终遇到一个重要的空格时，所以

```
set ?="display: none;"" "39" "/span" "." "span 
```

那么最后一个记号是 " " 后跟 " " 后跟一个未终止的 "，所以

```
set ?=" "" "" 
```

简而言之，您需要做的是在适当的位置去掉引号。从根本上说，您的问题是第一个标记 %%A 包含一个不匹配的双引号，这完全搞砸了 For 循环中文本行的解析。

# c# - 确定一个类是否被引用 C#

> ID：11108020
> 
> 赞同：5
> 
> 时间：2012-06-19T19:30:35.707
> 
> 标签：c#, reflection, .net-assembly

我很好奇是否可以确定一个程序集是否引用了一个特定的类。我目前正在使用反射来加载程序集，然后我确定从我正在加载的程序集中引用了哪些程序集：

```
foreach (var vReferencedAssembly in vSomeAssembly.GetReferencedAssemblies()) 
```

既然我知道引用了哪些程序集，我想深入研究这些 vReferencedAssembly 并确定是否发生类似情况：

```
File.Create(vSomeFile); 
```

简单来说，我不想从提供给我的可能包含我认为威胁的列表中加载程序集。所以我可能想阻止可能操纵文件等的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:35:14.230

我相信您正在寻找的是将程序集加载到仅反射上下文中。这允许您将它们加载到安全区域，在您检查它们之前不会执行任何代码。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms172331.aspx](http://msdn.microsoft.com/en-us/library/ms172331.aspx)

更新：您可以使用反射来查看变量、属性、参数、返回类型等内容，~~但这仍然无法帮助您检测完全包含在方法中的恶意代码~~。据我了解，区分安全代码和不安全代码最好留给系统管理员。这些应用程序与 PC 上的安全位置具有隐式信任关系。IE：全局程序集缓存，当前工作目录或您的应用程序确定的某个固定路径。然后，PC 仅授予管理员管理此位置的程序集的能力。

更新 2：您也可以考虑在它自己的应用程序域中运行这个潜在不安全的代码。在这里你可以设置什么是允许的，什么是不允许的。请参阅[http://msdn.microsoft.com/en-us/library/bb763046.aspx](http://msdn.microsoft.com/en-us/library/bb763046.aspx)。

更新 3：虽然我仍然认为在其自己的应用程序域中以适当的权限加载不受信任的代码是最干净的方法，但可以确定一个方法在运行时内部引用的内容，正如这个[问题](https://stackoverflow.com/questions/1435474/how-can-i-get-fields-used-in-a-method-net/1821857#1821857)所问的那样。它的要点是使用反射来获取方法的原始 IL 字节[(MethodBody.GetILAsByteArray)](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.getilasbytearray.aspx)并使用您选择的 IL 解析器对其进行分析。

# jquery - jQuery：在选中复选框旁边显示提交按钮 被点击

> ID：11108022
> 
> 赞同：1
> 
> 时间：2012-06-19T19:30:42.767
> 
> 标签：jquery, html, checkbox, label

我在无序列表（ul li）中列出了一个时间段，其中也有一个复选框。当用户点击复选框时，提交按钮会出现在时间段旁边。我已经设法在这里执行了第一步。

我要做的下一件事是当用户点击我没有成功的时间段的任何部分（不一定是复选框）时显示提交按钮

为了说明这一点，我设置了一个**演示** [http://jsfiddle.net/hz2t4/46/](http://jsfiddle.net/hz2t4/46/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:33:38.477

在标签之间放置**复选框**和**文本**`label`

```
<ul class="timeSlot clearfix">
    <li><label>12:00am - 01:00am <input type="checkbox"></label><input type="submit" value="Continue to Step 2"  style="display:none;"></li>
    <li><label>01:00am - 02:00am <input type="checkbox"></label></li>
</ul>​ 
```

**演示**：http: [//jsfiddle.net/hz2t4/49/](http://jsfiddle.net/hz2t4/49/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:34:20.970

将您的复选框输入包装在标签中，它将执行您想要的操作：

```
<label><input type="checkbox"></label> 
```

这是一个更新的[jsfiddle](http://jsfiddle.net/hz2t4/48/)来演示。

# eclipse - 在 Eclipse 中创建 java/c++ 项目

> ID：11108023
> 
> 赞同：1
> 
> 时间：2012-06-19T19:30:50.537
> 
> 标签：eclipse, ubuntu, eclipse-cdt, ubuntu-12.04

我刚刚升级到 ubuntu 12.04 64 位（全新安装）。当我安装 Eclipse 时，我只能创建一个通用或 CVS 项目。我安装了 build-essential、eclipse-cdt、eclipse-jdt、openjdk-7-jdk 但仍然只能创建这些类型的项目。此外，当进入 eclipse 安装软件部分时，我可以清楚地看到 CDT 和 java SDK 已安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:45:47.893

我也在 Ubuntu 12.04 64bit 上使用 eclipse，在创建不同的项目时我没有任何问题（见截图）。

![Eclipse 项目](../Images/ccfb787ddfd99188d33df5937003477c.png)

但是，我从不使用 eclipse 的存储库版本，我总是从[eclipse 网站](http://www.eclipse.org/)下载包。只需提取存档并启动 eclipse 可执行文件即可。

另一个提示，确保您为要创建的项目使用正确的透视图 ( `window`-> `open perspective`)。从屏幕截图中，您可以在右上角看到打开的透视图是`Java`。

# python - 使用按钮刷新 tk 窗口

> ID：11108027
> 
> 赞同：0
> 
> 时间：2012-06-19T19:31:10.690
> 
> 标签：python, tkinter

当我按下按钮时，我想刷新 tk 窗口，但我一直在删除。帮助将不胜感激。以下是我尝试过的。当我更改输入框并点击刷新时，我希望 tk.Label 行更新，但它没有发生。

```
import Tkinter as tk

class MAIN(object):
    def __init__(self, master, **kwargs):
        frame = tk.Frame(master, borderwidth=5)
        frame.grid()
        et1 = tk.Entry(frame)
        et1.insert(0, '10')
        et1.grid(row=0,column=0,sticky=tk.W)
        tk.Label(frame, text = et1.get()).grid(row=1, column=0, sticky=tk.W)
        refresh = tk.Button(frame, text='Refresh', command = frame.update())
        refresh.grid(row=2, column=0, sticky=tk.W)

root=tk.Tk()
app=MAIN(root)
root.mainloop() 
```

任何帮助将不胜感激。谢谢

编辑：

我也尝试过使用 update_idletasks()，但这也没有用。

sc0tt的帮助回答：

```
import Tkinter as tk

class MAIN(object):
    def __init__(self, master, **kwargs):
        frame = tk.Frame(master, borderwidth=5)
        frame.grid()
        self.et1 = tk.Entry(frame)
        self.et1.insert(0, 10)
        self.et1.grid(row=0,column=0,sticky=tk.W)
        self.label_contents = tk.StringVar()
        self.label_contents.set(self.et1.get())
        tk.Label(frame, textvariable=self.label_contents).grid(row=1, column=0, sticky=tk.W)
        refresh = tk.Button(frame, text='Refresh', command = self.refresh_hit)
        refresh.grid(row=2, column=0, sticky=tk.W)

    def refresh_hit(self):
        self.label_contents.set(self.et1.get())

root=tk.Tk()
app=MAIN(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:54:10.657

调用 update/update_idletasks 不会为您做到这一点。这是一种在按钮命令中使用简单 lambda 的方法。它获取文本框的值并更改与标签关联的变量。将 Tkinter 导入为 tk

```
class MAIN(object):

    def __init__(self, master, **kwargs):
        frame = tk.Frame(master, borderwidth=5)
        frame.grid()
        et1 = tk.Entry(frame)
        et1.insert(0, 10)
        et1.grid(row=0,column=0,sticky=tk.W)
        label_contents = tk.StringVar()
        label_contents.set(et1.get())
        tk.Label(frame, textvariable=label_contents).grid(row=1, column=0, sticky=tk.W)
        refresh = tk.Button(frame, text='Refresh', command = self.refresh_clicked)
        refresh.grid(row=2, column=0, sticky=tk.W)

    #per comments:
    def refresh_clicked(event):
        #update labels here
root=tk.Tk()
app=MAIN(root)
root.mainloop() 
```

**编辑：** lambda 替换为函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-17T09:10:40.737

```
remove_button.grid(row=0, column=2)
refresh_button = tk.Button(master=buttons_frame, width=7, text='Refresh', 
command=seeTodo) 
```

要刷新窗口，请使用按钮再次调用该窗口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-14T02:51:26.527

这是我让这个脚本工作的唯一方法，否则我会在未定义的“self”上得到一个错误。还有其他方法可以在 refresh_clicked 上添加功能吗？

`

```
class MAIN(object):

    def __init__(self, master, **kwargs):
        global label_contents
        global et1
        frame = tk.Frame(master, borderwidth=5)
        frame.grid()
        et1 = tk.Entry(frame)
        et1.insert(0, 10)
        et1.grid(row=0,column=0,sticky=tk.W)
        label_contents = tk.StringVar()
        label_contents.set(et1.get())
        tk.Label(frame, textvariable=label_contents).grid(row=1, column=0, sticky=tk.W)
        refresh = tk.Button(frame, text='Refresh', command = self.refresh_clicked)
        refresh.grid(row=2, column=0, sticky=tk.W)

    #per comments:
    def refresh_clicked(event):
         global label_contents
         global et1
         label_contents.set(et1.get())

root=tk.Tk()
app=MAIN(root)
root.mainloop() 
```

`

# perl - CPAN shell 内存不足。如何在 Unix 上给它更多内存？

> ID：11108029
> 
> 赞同：6
> 
> 时间：2012-06-19T19:31:12.487
> 
> 标签：perl, unix, cpan, aix

我收到`Out of memory!`所有安装的消息。我以前从未使用过 cpan，我不确定它是如何工作的。我`ulimit`在 /.cpan 目录上做了一个，结果是无限的。这是我正在查看的内容：

```
[/usr/bin]# perl -MCPAN -e shell
终端不支持 AddHistory。

cpan shell -- CPAN 探索和模块安装 (v1.7602)
提供 ReadLine 支持（尝试“安装 Bundle::CPAN”）

cpan> 安装 Term::Readline
CPAN：可存储加载正常
去阅读/.cpan/Metadata
去阅读/.cpan/sources/authors/01mailrc.txt.gz
去阅读/.cpan/sources/modules/02packages.details.txt.gz
  数据库于 2012 年 6 月 19 日星期二 11:51:03 GMT 生成
CPAN: HTTP::Date 加载正常

  有一个新的 CPAN.pm 版本 (v1.9800) 可用！
  [*当前版本为 v1.7602* ]
  你可能想试试
    安装包::CPAN
    重新加载cpan
  不退出当前会话。应该是无缝升级
  在我们跑步的时候...

记不清！
终端不支持 GetHistory。
已删除锁定文件。
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T22:37:45.017

这与增加内存无关，但可能是您的解决方案。

你可以尝试用 use[`cpanm`](http://search.cpan.org/perldoc/App%3a%3acpanminus)代替 cpan，所以：

这将为`cpanm`您安装

```
$ curl -L http://cpanmin.us | perl - --self-upgrade
```

在您可以安装模块之后，例如：

```
$ cpanm 任务::Plack
```

`cpanm`需要更少的内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T17:32:59.470

另一个原因是您用来运行的用户`cpan`对其可以使用的内存量有限制。发出以下命令以使用所有可用内存：

```
ulimit -m unlimited
ulimit -d unlimited 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T15:20:31.473

在 AIX 服务包和维护级别更新后，我们遇到了同样的错误（内存不足！）。将 perl 重新安装到最新版本（从源代码编译）后，错误消失了。我们注意到 AIX SP+ML 更新覆盖了指向 /usr/bin 中我们自安装工具的链接（make 和 iconv）。我们假设 AIX SP+ML 更新对自安装的 perl 做了类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T23:50:13.720

在 AIX（如已标记）上，罪魁祸首可能是未设置或 LDR_CNTRL 环境变量太小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T12:14:40.300

我发现 CPAN Out of Memory 错误的一种解决方案是安装交换，假设你没有。这里有一个很好的分步教程，介绍如何在 Ubuntu 14.04（具有更广泛的 Linux 适用性）上做到这[一点](https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-27T06:22:16.437

如果问题是在使用 CPAN 时内存不足（我有一个服务器我执行 perl dev，我专门在其上安装了 512 兆字节的 RAM），如上所述，cpanm 是你的救星。这个特定的服务器会破坏 perl 内容文件，所以我不能使用 cpan 来更新自己。然而 cpanm 在我第一次使用它时就修复了所有问题，并且由于它易于使用和稳定性，是我维护我的 perl 服务器的唯一方法。

罗恩

# c# - Gridview：如何使标题文本多行？

> ID：11108031
> 
> 赞同：2
> 
> 时间：2012-06-19T19:31:15.383
> 
> 标签：c#, asp.net

我有一个gridview 和sqldatasource。

每列的默认标题文本为单行。有没有办法制作标题 *multiline 以便我可以在第一行下添加另一行文本。？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:54:39.267

> 谢谢，它工作！

为了结束，我将在这里添加我的评论：

您可以添加一个`<br />`. 标头支持 html。

# javascript - 在对象数组元素jquery中循环

> ID：11108034
> 
> 赞同：0
> 
> 时间：2012-06-19T19:31:29.440
> 
> 标签：javascript, jquery

您好，我正在使用 map() jquery 创建一个新的对象数组 [DEMO](http://jsfiddle.net/minagabriel/BKDLt/)，但此代码不起作用

我需要为所有对象创建一个具有相同名称但编号不同的新对象数组，所以我们如何指向旧数组中的每个元素并更改其值，我使用过，`value[0].number`但它没有成功

**代码**

```
 var x =[
 {name : 'mark' , number : '10'},
 {name : 'mina' , number : '15' } ,
 ]; 

 var newObject = $.map(x,function(value,index){

value.name = 'mon';
value[0].number = 12 ;
value[1].number = 11 ; 
return value ; 

  });
 console.log(newObject) ; 
```

**问题** 是我如何指向旧对象数组中的每个数字并更改它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:35:21.907

旧对象还在这里，仍然被称为`x`

```
var newObject = $.map(x,function(value,index){

    value.name = 'mon';
    x[0].number = 12 ;
    x[1].number = 11 ; 
    return value ; 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:39:43.357

尝试类似这样的东西（[http://jsfiddle.net/BKDLt/1/](http://jsfiddle.net/BKDLt/1/)），生成一个新对象而不是重用旧对象。

```
var x = [
    {
        name: 'mark',
        number: 10
    },
    {
        name: 'mina',
        number: 15
    }
];

var newObject = $.map(x, function(value, index) {
    return {
        name: value.name + 'mon',
        number: value.number + 1
    };
});
console.log(newObject);​ 
```

# jquery - 相对于另一个元素定位 div

> ID：11108045
> 
> 赞同：1
> 
> 时间：2012-06-19T19:32:05.653
> 
> 标签：jquery, css

我想用另一个元素定位一个 div，但在垂直滚动页面时让它保持原位。父元素比屏幕高度长。可以只用 CSS 完成还是我需要使用 jQuery（这是我通常使用的）？我会使用固定位置，但不确定如何将它与父 div 相关联...

```
<div id="veryHighDiv">
   <div id="positionMe"></div>
</div> 
```

所以，我需要它在水平位置方面相对于父级的位置，但在垂直滚动时是“固定的”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:43:50.513

由于您最终希望它处于固定位置，因此无需将其作为相对位置开始，因为将其动态更改为固定位置会破坏您在相对（或通常也是绝对）定位中所做的任何 CSS 工作。

如果是我，我会编写一个函数来计算固定元素的位置，然后确保在所有窗口事件（如加载和调整大小）上调用它，以使其保持原位。这是一个示例，但您可能需要根据 CSS 的其余部分对其进行更改：

```
<script>

$(window).load(function() {
    positionElem();
});
$(window).resize(function() {
    positionElem();
});

function positionElem() {
    var padFromDiv = 30; // amount of padding you want from your div
    var newX = 0; // initialize newX at 0

    // get difference in window and veryHighDiv if window is larger
    if ($(window).width() > $('#veryHighDiv').width()) {
        newX = ($(window).width()-$('#veryHighDiv').width());
    }

    newX+=padFromDiv;

    $('#positionMe').css('left',newX);
}

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:46:19.233

如果您将绝对样式的 div 附加到相对 div，我相信它将保持在相对 div 所在的位置。

```
<div id="veryHighDiv">
       <div id="positionmMe"> </div>
    </div>

#veryHighDiv {
  position: relative;
}

#positionMe {
  position: absolute;
  top: 50px;
  left: 100px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:50:53.967

使用 jQuery 非常简单 - [http://jsfiddle.net/zA3mq/](http://jsfiddle.net/zA3mq/)

```
$(window).scroll(function() {
    $("#positionMe").css('position', 'fixed');
}); 
```

# python - 倒带迭代

> ID：11108048
> 
> 赞同：2
> 
> 时间：2012-06-19T19:32:10.443
> 
> 标签：python, iteration

我一直在以简单的方式遍历列表的内容以获取用户输入：

```
for n in [ 1, 2, 3, 4 ]:
 command = raw_input ( "%d >> " % (n) )
 ... 
```

我想实现一个撤消功能，这意味着将迭代“倒回”回之前的值。这是一种天真的方法，它确实减少了 n 的值，但随后跳过了原始值，因为指向列表的内部指针没有改变：

```
for n in [ 1, 2, 3, 4 ]:
 if f(n):
  n -= 1
 ... 
```

在文档中，我看到了 iterator.next()，但没有看到 iterator.last()。我想我可以切换到通过整数索引访问列表成员，并通过自己操作索引来手动滚动循环，这并不是那么危险，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T20:17:30.887

在现有的 Python 中没有明显的方法可以做到这一点，但是制作自己的支持回溯的迭代器很容易。例如，后面是一个“可搜索”的迭代器。寻求相对 0 重复相同的元素，或相对 -1 回到前一个元素。

注意，因为这种迭代方式不享受“保证前进的进步”，它可以说更容易出现无限循环。

```
class SeekableIterator(object):
    """An iterator that supports seeking backwards or forwards."""

    def __init__(self, iterable):
        """Make a SeekableIterator over an iterable collection."""

        self.iterable = iterable
        self.index = None

    def __iter__(self):
        """Start the iteration."""

        self.index = 0
        return self

    def next(self):
        """Return the next item in the iterator."""

        try:
            value = self.iterable[self.index]
            self.index += 1
            return value
        except IndexError:
            raise StopIteration

    def seek(self, n, relative=False):
        """Adjust the loop counter, either relatively or to an absolute index.
        Note that seeking 0 replays the current item. Seeking -1 goes to
        the previous item. If the adjustment pushes the index outside the
        iterable's bounds, raise an index error."""

        if relative:
            self.index += n - 1
            # NB index already advanced one in next(), so subtracting one here
        else:
            self.index = n
        if self.index < 0 or self.index >= len(self.iterable):
            raise IndexError

if __name__ == '__main__':

    import random

    def prob(percent):
        """Return True with roughly the given probability, else False"""
        return random.random() <= (percent * 1.0 / 100.0)

    seeker = SeekableIterator([1, 2, 3, 4])
    for n in seeker:
        print "n:", n

        if prob(50):
            if prob(50):
                print "\tREDO - seeking 0"
                seeker.seek(0, relative=True)
            elif n > 1:
                print "\tUNDO - seeking -1"
                seeker.seek(-1, relative=True) 
```

这是一个示例输出：

```
n: 1
n: 2
n: 3
n: 4
    REDO - seeking 0
n: 4
    REDO - seeking 0
n: 4
    UNDO - seeking -1
n: 3
n: 4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:44:08.347

使用`While`循环：

```
lis = [1, 2, 3, 4]
i = 0
while i < len(lis):
    if some_condition:
        print(lis[i])
        i += 1
    elif some_other_condition:
        print(lis[i])
        i -= 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:45:22.340

共识是不，没有办法让 python 迭代器回溯。这个线程有更多信息：

[让python迭代器倒退？](https://stackoverflow.com/questions/2777188/making-a-python-iterator-go-backwards)

但是，您可能会幸运地将循环重组为稍微不同的格式。考虑以下类似 python 的伪代码：

```
unprocessed = [1,2,3,...]
processed = []

traverse(unprocessed, processed, processor_function):
    item = unprocessed.head()
    unprocessed = unprocessed.tail()
    processed.prepend(item)
    if processor_function != None:
        processor_function(item) 
```

如有必要，您的主循环逻辑可以按任意顺序调用 traverse，切换已处理和未处理以模拟向后迭代。你可以传递你想要的任何处理函数，包括传递`None`给简单地跳过处理。处理完所有元素后，列表将如下所示：

```
unprocessed = []
processed = [...,3,2,1] 
```

这有点像图灵机式的。“读头”总是在第一个列表的第一个元素之上，读头“右边”的所有元素都在第一个列表中，索引随距离递增，读头“左边”的所有元素都在在第二个列表中，索引随距离递增。“最接近”读取头的元素是靠近每个列表开头的元素。

# html - 将水平列表显示为块

> ID：11108055
> 
> 赞同：0
> 
> 时间：2012-06-19T19:33:07.617
> 
> 标签：html, css, html-lists

我有一个水平无序列表，我想在 div 容器中水平居中（比列表任意大）。我正在考虑将 ul 显示为一个块并使用自动边距将列表置于其父容器中的中心。但是......我似乎无法让 ul 显示为一个块并且不占用 100% 的宽度。

据我了解，块元素采用所需的宽度来包裹子元素（除非它们没有被清除浮动或绝对定位），所以我认为将 ul 和 li 作为块放置应该可以解决问题。不幸的是，它没有，我不明白为什么。

任何的想法？

这是代码：http: [//jsfiddle.net/kccbg/1/](http://jsfiddle.net/kccbg/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:39:02.517

尝试`display: inline-block`改用，并`text-align: center`像这样设置容器：

**HTML：**

```
<div class="container">
    <ul>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
    </ul>
</div>​ 
```

**CSS：**

```
.container{
    width:100%;
    background-color:#CCC;
    height:20px;
    text-align: center;
}
ul{
    display:inline-block;
    margin:0 auto;
}
li{
    display:inline-block;
} 
```

[例子](http://jsfiddle.net/kccbg/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:41:51.763

更新：（基于gmeben的评论）

将css更改为：

```
.container{width:100%; background-color:#CCC; text-align:center}
li{display:inline;} 
```

并删除

```
<li class="clear"></li> 
```

来自 html。

没有浮动和清除，也没有内联块（不是所有浏览器都支持/正确渲染）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:40:06.320

如果您知道列表项的总宽度，则可以设置宽度，`<ul>`然后将其边距设置为 0 auto。**[jsFiddle 示例](http://jsfiddle.net/j08691/kccbg/5/)**。

**CSS**

```
.container{
    width:100%; 
    background-color:#CCC; 
    height:20px;
}
ul{
    list-style:none;
    width:200px;
    margin:0 auto;
}
li{
    float:left; 
} 
```

​</p>

# sql-server-2005 - Reporting Services - 多值参数查询不返回任何结果

> ID：11108060
> 
> 赞同：2
> 
> 时间：2012-06-19T19:33:19.147
> 
> 标签：sql-server-2005, reporting-services, parameters, multivalue

使用 SSRS (SQL Server 2005) 我设置了两个报告。为了便于解释，我们称它们为`MAIN_REPORT`and `SUB_REPORT`。

`MAIN_REPORT`运行一个返回一组区域的查询，每个区域有多个标记名：

```
AREA    Tagname
----------
A1        T1
A1        T2
A2        T3
A3        T4 
```

如果您选择其中一个区域单元格，它会打开`SUB_REPORT`并将参数传递给`@ParentTagNames`using `Join(Parameters!ResultsOfSearch.Value,",")`。`ResultsOfSearch`等于上面的标记名列（还没有想出如何将标记名限制为仅在选定区域中的标记名，但我稍后会担心）。

`SUB_REPORT`获取传递的参数并在海量数据库中查询标记名，并返回可用值的最小值、最大值和平均值：

```
SELECT
h.TagName as TagName,
Minimum = convert(decimal(38, 2), Min(h.Value)), 
Maximum = convert(decimal(38, 2), Max(h.Value)), 
Average = convert(decimal(38, 2), Avg(h.Value)) 
FROM INSQL.Runtime.dbo.History h 
WHERE h.TagName in (@ParentTagNames)
AND h.wwVersion = 'LATEST'
AND h.wwRetrievalMode = 'Cyclic'
AND h.wwResolution = '60000'
AND h.Value > '-1.0'
AND h.DateTime >= '2009-09-01 12:00:00'
AND h.DateTime <= '2009-09-02 16:00:00'
GROUP BY h.TagName 
```

但是，如果`@ParentTagNames`等于多个值，则不返回任何数据。如果它等于单个标签，则返回数据。我认为它一定与`@ParentTagNames`从中传递的数据格式有关`MAIN_REPORT`，但这似乎并不重要。

我尝试了以下格式：

```
T1,T2,T3,T4,T5,T6
'T1','T2','T3','T4','T5','T6' 
```

我确保检查了参数的多值`@ParentTagNames`。谷歌成功地让我失望了。

任何人？

编辑：探查器魔术！

```
exec sp_executesql N'SELECT
    h.TagName as TagName,
    Minimum = convert(decimal(38, 2), Min(h.Value)), 
    Maximum = convert(decimal(38, 2), Max(h.Value)), 
    Average = convert(decimal(38, 2), Avg(h.Value)) 
FROM INSQL.Runtime.dbo.History h 
WHERE h.TagName in (@ParentTagNames)
AND h.wwVersion = ''LATEST''
AND h.wwRetrievalMode = ''Cyclic''
--AND h.wwResolution = @Resolution
AND h.wwResolution = ''60000''
AND h.Value > ''-1.0''
--AND h.DateTime >= @StartTime
--AND h.DateTime <= @EndTime

AND h.DateTime >= ''2009-09-01 12:00:00''
AND h.DateTime <= ''2009-09-02 16:00:00''

GROUP BY h.TagName',N'@ParentTagNames nvarchar(46)',@ParentTagNames=N'M12_CPM_Filling_250.Value,M8_Filling_391.Value' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:54:40.650

我认为您可能需要对 MAIN_REPORT 进行 SPLIT 调用，以强制 SSRS 获取传入参数并将其放入数组中。

参考： http: [//www.stuffthatjustworks.com/HowToPassMultivalueReportParametersToSubreportsInReportBuilder.aspx](http://www.stuffthatjustworks.com/HowToPassMultivalueReportParametersToSubreportsInReportBuilder.aspx)

# android - 进度对话框未完成 - Android

> ID：11108065
> 
> 赞同：0
> 
> 时间：2012-06-19T19:33:34.823
> 
> 标签：android, mysql, android-asynctask, progressdialog

问题：

简而言之，我的进度对话框持续显示“正在下载数据”，而不是打开从我正在连接的 MySQL 数据库（通过 php）填充的 ListView。

这是我的代码：

```
 public class Main extends ListActivity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb = null;
List<String> cats = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    cats = new ArrayList<String>();
    new task().execute();

    setListAdapter(new ArrayAdapter<String>(this, R.layout.list, cats));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long id) {

            int cat_id = ((int) id);
            Intent itemIntent = new Intent(getApplicationContext(), Items.class);
            Bundle d = new Bundle();
            cat_id = cat_id +1;
            d.putString("category_id", String.valueOf(cat_id));

            itemIntent.putExtras(d);
            startActivity(itemIntent);

        }
    });

}

class task extends AsyncTask<String, String, Void> {
    private ProgressDialog progressDialog = new ProgressDialog(Main.this);
    InputStream is = null;
    String result = "";

    protected void onPreExecute() {
        progressDialog.setMessage("Download data...");
        progressDialog.show();
        progressDialog.setOnCancelListener(new OnCancelListener() {

            public void onCancel(DialogInterface dialog) {
                task.this.cancel(true);

            }
        });
    }

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "http://www.--.com/---/master.php";

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {
            // TODO: handle exception
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;

    }

    protected void onPostExecute(Void v) {

        String cat;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                cat = json_data.getString("category");

                cats.add(cat);

            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No Categories Found",
                    Toast.LENGTH_LONG).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:40:04.680

你应该在你的`onPostExecute()`方法中关闭进度对话框。例如：`progressDialog.dismiss()`;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:36:49.440

我没有看到你打电话的任何地方`dismiss()`

# java - 运行 Play 1.2.1 时无法执行 java 可执行文件

> ID：11108067
> 
> 赞同：0
> 
> 时间：2012-06-19T19:33:41.080
> 
> 标签：java, macos, playframework

每当我尝试在我的系统中运行 Play 1.2.1 时，我都会遇到这个问题。以前我的系统中有Play2.0。我导出了 PATH 变量，因此 PATH 包含 Play 2.0 目录的路径。

现在，我正在尝试在 Mac OS X 10.7.4 中运行 Play 1.2.1。

我的 PATH 变量看起来像，

```
-bash: /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/usr/local/mysql/bin:/Users/sabya/Documents/Play_Framework/play-2.0: No such file or directory 
```

导出 PATH 进行播放 1.2.1 后，我的 PATH 看起来像

```
-bash: /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/usr/local/mysql/bin:/Users/sabya/Documents/Play_Framework/play-2.0:/Users/sabya/Downloads/Work/play-1.2.1: No such file or directory 
```

我通过`play new test_app`.

但是每当我想做的时候`play run`，它都会向我展示

```
Could not execute the java executable, please make sure the JAVA_HOME environment variable is set properly (the java executable should reside at JAVA_HOME/bin/java). 
```

在同一目录中键入 javac/java 会给我正确的输出。

我的 $JAVA_HOME 输出`-bash: /Library/Java/Home: No such file or directory`

在 Ubuntu 中一切正常。

在这种情况下可以解决什么问题？我已经广泛搜索了。没有得到任何合适的东西。

JAVA_HOME 中的尾随“：”有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:41:45.413

实际上，该`No such file or directory`消息意味着指定的路径不正确，它实际上并不存在。您可能想检查它是否在此期间没有（重新）移动，例如通过发出简单的`ls -al /Library/Java/Home`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:49:36.627

小心，您似乎在您的路径中混合了 Play 1 和 Play 2。

此外，JAVA_HOME 应该指向系统中安装 Java 的目录。我对此表示怀疑`/Library/Java/Home`（尝试用 Finder 打开这个目录，看看它是否存在）。

# symfony - FOSUserBundle , 法语翻译被忽略

> ID：11108075
> 
> 赞同：3
> 
> 时间：2012-06-19T19:34:09.957
> 
> 标签：symfony, fosuserbundle

我是 symfony 的新用户，我目前正在学习一门课程（全日制），我的问题：

```
# app/config/config.yml

framework:
    translator:      { fallback: %locale% } 
```

app/config/parameters.ini：我设置了法语 traduction(fr)：

```
; These parameters can be imported into other config files
; by enclosing the key with % (like %database_user%)
; Comments start with ';', as in php.ini
[parameters]
    database_driver   = pdo_mysql
    database_host     = localhost
    database_port     =
    database_name     = blog
    database_user     = root
    database_password =

    mailer_transport  = smtp
    mailer_host       = localhost
    mailer_user       =
    mailer_password   =

    locale            = fr

    secret            = ThisTokenIsNotSoSecretChangeIt 
```

但是标签表单注册/登录，仍然是英文...我使用版本`FriendsOfSymfony-FOSUserBundle-1.2.0-0`，因为最新的错误`FriendsOfSymfony-FOSUserBundle-1.2.0-57-g72e8023`

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:43:29.390

编辑文件parameters.ini 后，需要：

1.  断开连接（如果您已登录）
2.  重新连接
3.  ...
4.  如果它不起作用，则重新加载页面（/登录），然后清除缓存并重新加载

如果您打算自定义翻译语言，您可以复制/粘贴 `vendor\bundles\FOS\UserBundle\Resources\translations` 在您自己的 Bundle`src\Mysite\UserBundle\Resources\translations`或下`app\Resources`（不要修改原始翻译！）。

# android - 如何禁用 AdMob 日志？

> ID：11108078
> 
> 赞同：2
> 
> 时间：2012-06-19T19:34:11.990
> 
> 标签：android, admob, logcat

我知道发布带有日志的应用程序不是一个好习惯，所以我禁用了所有的日志调用。

现在每次显示广告时 AdMob 都会记录，我该如何取消呢？我似乎没有在文档中找到有关此主题的任何信息，并且我读过您可以使用[ProGuard](http://proguard.sourceforge.net/)，但这似乎是一个糟糕的解决方案。

难道没有办法禁用第 3 方日志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:41:19.570

幸运的是，这已经得到了回答。最好的办法就是在您的应用程序中打开 proguard。

打开 Proguard：[使用属性打开/关闭 Proguard](https://stackoverflow.com/questions/10642030/turning-proguard-on-off-using-properties)

然后只需在此处将其添加到 proguard.cfg 中：

添加到 proguard.cfg：[在发布之前删除所有调试日志记录调用：是否有工具可以做到这一点？](https://stackoverflow.com/questions/2446248/deactivate-any-calls-to-log-before-publishing-are-there-tools-to-do-this)

一个 Proguard 已打开，您将其添加到 proguard.cfg，您只需导出已签名的应用程序，它就会消失。我昨天刚刚测试了这个。

问候，

# mpi - 使用 MPI 在顺序和并行之间切换

> ID：11108085
> 
> 赞同：1
> 
> 时间：2012-06-19T19:34:35.713
> 
> 标签：mpi

我有一个代码可以计算一些导体中的热传递。一个导体中发生的事情不会影响模型中的其他导体。所以我试图让这些导体的解决方案并行运行，每个处理器采用一组不同的导体。现在，我认为代码可以在一个核心上运行，直到它进入我放置命令的循环：

```
MPI_INIT 
```

然后在我请求的许多内核上运行这部分代码，然后在命令之后返回在一个内核上运行：

```
MPI_FINALIZE 
```

遇到。但我看到的是输入文件被两个核心读取（如果我使用 2 个核心），并且所有输出也被打印两次。MPI 不像我想的那样工作吗？如果没有，那么我怎样才能实现我想要的行为？我只希望该代码段的代码在多个内核上运行，而不是在 MPI_INIT 和 MPI_FINALIZE 之外的任何其他子例程或部分代码中运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T19:52:57.967

这是一个常见的误解，尤其是在有过 OpenMP 之类的经验的人中，线程在程序的不同点被分叉和连接。

在 MPI 中，`MPI_Init`初始化`MPI_Finalize`并完成你的 MPI 库；就是这样。尽管该标准故意对 Init 之前和 Finalize 之后发生的事情保持沉默，但实际上，您`mpirun`或您的`mpiexec`命令通常会创建和启动进程。如果你输入

```
mpirun -np 4 hostname 
```

例如，启动了四个进程，每个进程都运行`hostname`命令——这绝对不是 MPI 可执行文件，并且其中没有任何`MPI_Init`或`MPI_Finalize`调用。这些进程中的每一个都运行可执行文件，从头到尾，所以你得到四个输出。启动进程的是 mpirun（或 mpiexec），而不是程序内部的任何 MPI 函数调用。

然后，在您的程序中，整个程序将由您请求的多个进程运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:50:04.120

我不认为我完全理解这个问题，但首先要注意的是 MPI 最多可以初始化一次。如此反复做

```
MPI_Init
...
MPI_Finalize 
```

不允许。此外，`MPI_Init`和`MPI_Finalize`是昂贵的操作；您不想循环调用它们。

MPI 最初是围绕静态流程模型设计的，这意味着一组流程启动、完成工作并退出。听起来您希望在运行时更改进程数。这在 MPI-2 中是可能的（参见 参考资料`MPI_Comm_spawn`）。

另一方面，不断启动和关闭进程会很慢。仅仅因为一个进程已经调用`MPI_Init`并不意味着它必须参与所有的通信。这是我解决问题的方法：

1.  启动进程池。在程序开始时调用`MPI_Init`所有进程，即使是那些只能在本地工作的进程。
2.  在每个循环迭代中，为需要使用 进行通信的进程创建一个新的通信器`MPI_Comm_create`，并将其用于所有通信而不是`MPI_COMM_WORLD`.
3.  在程序结束时，所有进程调用`MPI_Finalize`.

# linux - 在 Mercurial 存储库中，将工作文件夹更改为子文件夹

> ID：11108088
> 
> 赞同：0
> 
> 时间：2012-06-19T19:34:52.247
> 
> 标签：linux, apache, mercurial

我认为这个问题的答案是你不能，但我想问这个问题，以防我找不到答案。

另外，我想知道是否有更好的方法来处理这种情况。

我有一个存储库，其中有一个名为 website 的子文件夹。问题是在网站上工作的开发人员想要检查文件进出 linux /var/www/html 文件夹。

问题是 hg repo 的根不是网站。如果我在 html 中签出，那么您最终会得到 /var/www/html/website （加上我们在 repo 根目录中的任何其他文件和文件夹现在位于 html 文件夹中）。

如果这是 SVN，那么我可以检查网站子文件夹。

我的一个想法是，可能有一种方法可以将此克隆的工作文件夹更改为网站文件夹（有点像 SVN 交换机）。由于实际的存储库存放在 .hg 文件夹中，因此在技术上似乎应该是可行的，但我在文档中没有看到类似的内容。

另一方面，有没有更好的方法来处理这种情况？一种想法是将 hg 存储库克隆到中性位置并配置 Apache 以从那里加载网站，但从事此工作的开发人员有理由说明这不是最佳解决方案。

还有其他方法可以处理这个吗？使用 Apache 网站和 HG 的正常工作流程/模式是什么？配置apache是​​不是比较正常。我通常在 Windows/IIS 中工作，这就是我会做的。

HG 是否还有其他情况，您真的只想在子文件夹中工作。那里的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:15:15.647

我会为此使用符号链接，例如：

ln -s /path/to/repo/website /var/www/html

这种方法允许您设置一次系统（apache 等），并快速切换到不同的代码库。有更复杂的方法可以做到这一点，但这非常简单。

# c# - 如何实施服务条款页面？

> ID：11108089
> 
> 赞同：1
> 
> 时间：2012-06-19T19:34:53.217
> 
> 标签：c#, asp.net, .net

我试图弄清楚如何实施服务条款页面。目的是有一个复选框，如果未选中，用户将无法通过在地址栏中键入另一个页面 url 导航到任何其他页面。

我尝试存储一个 TOSNotChecked 会话变量，但到目前为止效果不佳。

我还尝试在 Global.asax 中进行重定向，但它会陷入循环。

任何人都有一个万无一失的方法来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:43:35.603

我建议将数据存储在数据库表中。根据您拥有的用户数量会影响存储类型。如果他们已登录并同意，那么将其放在他们的个人资料表中的某个位置会很简单。

但是，在我看来，您是在要求未经身份验证的人同意 ToS，这意味着您可能需要不同的方法。我认为当他们同意时，应该在 Session 内部存储一个带有 GUID 的变量，也许还有他们的 IP 地址。然后，在他们机器上的一个 cookie 中，存储一个镜像。如果他们匹配，那么他们已经同意了 ToS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:42:59.017

通过检查“未检查”状态，您基本上是在测试不存在的东西，这些东西总是有问题的。从另一端接近它并存储一个“已检查”会话变量并在让它们打开之前对其进行测试。

您还可以将其存储在数据库中并检查登录到站点，如果它不存在，则登录身份验证失败，并且没有身份验证阻止访问站点的其余部分。

# java - 捕获文件的高效搜索算法

> ID：11108092
> 
> 赞同：2
> 
> 时间：2012-06-19T19:35:06.683
> 
> 标签：java, algorithm, search, packet-capture, jpcap

我目前正在用 java 开发一个工具，它将帮助跟踪和解释通过以太网连接发送的数据。我已经成功开发了数据包嗅探器和数据包数据解释器。

尝试导航到跟踪文件中的特定数据包时遇到问题。每个数据包都有一个相关的时间戳，我希望能够导航到特定的时间窗口。我目前的方法如下。

```
public ArrayList<Packet> getTimeWindow(double time, int window) {
    ArrayList<Packet> packets = new ArrayList<Packet>();
    double start = time - window;
    double end = time + window;

    JpcapCaptor captor = null;
    try {
        captor = JpcapCaptor.openFile(this.traceFile); 
    } catch (IOException e) {e.printStackTrace();}

    Packet p = captor.getPacket();
    while(packet != null) {
        if(f.timestamp > end) return packets;
        if(p.timestamp >= start) packets.add(p);    
        packet=captor.getPacket();
    }
    return packets;
} 
```

这适用于小跟踪，但当我们处理数百万个数据包时会变得非常慢。我想实现某种形式的二进制搜索算法，但我想不出一种方法来导航到数据包的中间而不对其进行预处理。数据包没有按行整齐地组织，即使我跳到文件中的一个随机点，我也不能保证我在一个数据包的开头。

**总之：**我正在寻找一种有效的方法来搜索捕获（.pcap 或 .cap）文件中的特定数据包。我已经搜遍了网络，但我找不到任何可以完全满足我要求的东西。

如果有人有您可以提出的任何想法/解决方案，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:33:52.083

一个简单的小型解决方案是为相关文件建立一个简单的索引。例如，您可以在文件中记录每 1000 个数据包开始的偏移量。将此信息（只是原始跟踪文件中的 64 位索引序列）存储在一个小型索引文件中。然后，当您进行二分查找时，您可以使用该索引和原始文件一起找到（1000 个数据包内）开始读取的正确点。

当然，这需要对跟踪文件进行预处理（或在生成时进行处理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:56:27.130

这只是一个猜测，但[间隔树](http://en.wikipedia.org/wiki/Interval_tree)或[段树](http://en.wikipedia.org/wiki/Segment_tree)可能是一个不错的选择。假设您可以将所有数据包放入内存。如果您遵循 Cormen 等人的算法，则可以很容易地创建区间树。Segment Tree 在内存方面可能会更昂贵，但应该会给您更快的 stabling 查询。

如果数据包不适合内存。您可以使用捕获文件时间戳作为最广泛的时间间隔，如果有人导航到该时间间隔，则可以深入了解每个文件。

# c++ - 从（声明）标头将参数写入文件

> ID：11108093
> 
> 赞同：0
> 
> 时间：2012-06-19T19:35:08.817
> 
> 标签：c++, boost-filesystem

我希望将用于当前运行的所有参数值的列表写入`parameterFile.txt`输出目录中的 a。

我在其中一个头文件中声明了所有参数，例如`constants.hpp`. 我正在尝试将`boost::filesystem copy_file`整个标题“按原样”复制到文本文件的方法。然而问题是，如果在远程机器上运行，头文件显然不可用于复制。而且我同意以这种方式转储参数值是愚蠢的（当我可以将标题放在输出中时）。

有更好的方法吗？

TIA，尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:46:05.677

不是将参数值存储在头文件中，而是考虑在运行时传递它们？

我看到你已经在使用 boost。Boost 程序选项可能特别适合您的需求，因为除了允许您在命令行上指定选项外，您还可以将所有选项放在配置文件中，然后针对此运行代码。

见这里： http: [//www.boost.org/doc/libs/1_49_0/doc/html/program_options.html](http://www.boost.org/doc/libs/1_49_0/doc/html/program_options.html)

# javascript - 如何在提交表单之前更改表单元素的 ID？

> ID：11108096
> 
> 赞同：0
> 
> 时间：2012-06-19T19:35:14.947
> 
> 标签：javascript

我有一个有很多行的表，每一行都有选择列表。像这样的东西：

```
| USER    | MANAGER            | DEPARTMENT   |

| Rob     | [John Smith |V]    | [Sales |V]   | 

| Sue     | [Bob Jones |V]     | [Support |V] | 
```

用户可以自由添加新行，行数多，列表内容复杂。

我通过给每个经理选择器 id 'manager' 和每个部门选择器 id 'department' 来大大简化了事情。

提交表单后，我编写了一些 javascript 来循环遍历每一行，定位每一行，并更改 id 'manager_[rownumber]' 和 'department_[rownumber]'。

然后我提交表格。我的javascript代码如下。

基于使用警报弹出窗口进行的调试，ID 正在按照我想要的方式进行更改，但 servlet 只接收一个“经理”参数和一个“部门”行号。

为什么没有提交所有输入（'manager_1'、'manager_2' 等）？更改 ID 后我需要做些什么以确保更改在提交表单之前生效？

谢谢！

抢

这是我的代码：

```
function submitForm() {
  correctInputIDs();
  document.myform.submit();
}

function correctInputIDs() {
  var rows = document.getElementsByTagName("tr");
  for (var i=0; i<rows.length; i++) {
    var row = rows[i];
    selectElements = rows.getElementsByTagName("select");
    for (var j=0; j<selectElements.length; j++) {
      var selectElement = selectElements[j];
      if (selectElement.id == "manager") {
        selectElement.id = "manager_"+i;
      }
      if (selectedElement.id == "department") {
        selectElement.id = "department_"+i;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:36:51.390

因为 ID 与表单提交无关，所以`name`确实如此。

**[快乐阅读](http://www.w3.org/TR/2012/WD-html5-20120329/forms.html#forms)**

# c# - 只有 1 个实例使用 Mutex 的误解？

> ID：11108099
> 
> 赞同：0
> 
> 时间：2012-06-19T19:35:23.810
> 
> 标签：c#, .net, multithreading, .net-4.0, mutex

```
class OneAtATimePlease
{
    static void Main()
    {

        using (var mutex = new Mutex(false, "oreilly.com OneAtATimeDemo"))
        {
            if (mutex.WaitOne(TimeSpan.FromSeconds(3), false))
                RunProgram();
            else
            {
                Console.WriteLine("Another instance of the app is running. Bye!");
                return;
            }
        }
    }
    static void RunProgram()
    {
        Console.WriteLine("Running. Press Enter to exit");
        Console.ReadLine();
    }
} 
```

但是这些行等待有人调用`Set()`函数：

```
 if (mutex.WaitOne(TimeSpan.FromSeconds(3), false))
                RunProgram(); 
```

谁`set`在这儿打电话？这个线程*永远不会*被释放......（或者会？）

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:48:18.297

如果有人没有运行 WaitOne()，它会立即返回 true。否则，它会阻塞！然后完成的程序导致等待程序之一立即返回真值。

# c# - VBScript 的 C# 变量

> ID：11108100
> 
> 赞同：0
> 
> 时间：2012-06-19T19:35:35.743
> 
> 标签：c#, variables, vbscript, sap, arguments

使用此 C# 应用程序选择开始和结束日期范围，然后 SAP 将使用该范围进行查询。我制作了一个传递一个参数的应用程序，它就像那样工作，但是在做两个参数时它不起作用。任何人都可以帮忙吗？

C＃

```
 private void button1_Click(object sender, EventArgs e)
        {
            String startDate = dateTimePicker1.Value.ToString("MM/dd/yyyy");
            String finishDate = dateTimePicker2.Value.ToString("MM/dd/yyyy");
            Process processbefore = new Process();
            processbefore.StartInfo.FileName = "C:\\Program Files\\SAP\\FrontEnd\\SAPgui\\saplogon.exe";
            processbefore.Start();
            processbefore.WaitForExit(1000 * 5 * 1);
            Process process = new Process();
            process.StartInfo.FileName = "C:\\Script2.vbs";
            process.StartInfo.Arguments = startDate;
            process.StartInfo.Arguments = finishDate;
            process.StartInfo.ErrorDialog = true;
            process.StartInfo.WindowStyle = ProcessWindowStyle.Minimized;
            process.Start();
            process.WaitForExit(1000 * 60 * 10);    // wait up to 5 minutes.
        }
    }
} 
```

Script2.vbs - VBScript（缩写）

```
startDate = WScript.Arguments.Item(0)
finishDate = WScript.Arguments.Item(1) 
```

我得到的下标超出了 finishDate = WScript.Arguments.Item(1) 的范围

之后的其余代码。我需要知道如何添加另一个参数以传递给 VBScript。如果我只添加另一条同一行，我会收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:46:09.860

代替：

```
process.StartInfo.Arguments = startDate;
process.StartInfo.Arguments = finishDate; 
```

你要：

```
process.StartInfo.Arguments = startDate + " " + finishDate; 
```

这是因为参数在 Windows 上是空格分隔的，并且`process.StartInfo.Arguments`是包含所有参数的单个字符串。

注意：如果其中一个参数中有空格，则需要在其周围加上引号，否则它将被解释为多个参数。例如：

```
process.StartInfo.Arguments = "\"" + startDate + "\" \"" + finishDate "\""; 
```

# grails - 带有“喜欢”的 Grails 搜索列表

> ID：11108107
> 
> 赞同：0
> 
> 时间：2012-06-19T19:36:16.960
> 
> 标签：grails, grails-orm

所以我有域类

```
class SalesRep {
   SalesTerritory territory
}
class SalesTerritory {
   hasMany=[accounts: AccountCustomer]
   String territoryCode
}

class AccountCustomer {
   String accountName
   String accountCode
   belongsTo = SalesTerritory
   hasMany=[salesTerritories: SalesTerritory]
} 
```

在控制器中，我可以通过以下方式获取帐户：

```
def salesRep = SalesRep.findBy... // 
def accounts = salesRep.territory.accounts 
```

我想做两件事：

1) 搜索带有一些字符串的帐户（例如 '%My Account%'），如下所示：

```
def accounts = salesRep.territory.accounts.find("accountName like '%My Account%'") 
```

2) 对账户进行排序

```
def accounts = salesRep.territory.accounts.sort("accountName") 
```

我知道我可以在域类中添加静态映射 = { sort accountName }，但是如果我想使用不同的字段（例如 accountCode）进行排序怎么办。谢谢，我尝试使用 createCriteria，但无法正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:17:51.297

感谢你的回答。我无法让它工作，但我必须工作的一个解决方案如下，基本上使用正则表达式。

```
def myAccount = "My Account"
accounts = salesRep.territory.accounts.findAll {
   it.accountName ==~ /(?i).*${myAccount}.*/
} 
```

(?i) 使匹配忽略大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:33:32.377

尝试

```
def accounts = salesRep.territory.accounts.findAllByAccountNameLike("%${MyAccount}%") 
```

Like 区分大小写，但如果您想忽略大小写，请使用 iLike。

对于排序，您可以使用

```
def accounts = salesRep.territory.accounts.list(sort:'accountName', order:'asc') 
```

您还可以通过静态映射在域类中定义排序

```
static mapping = {
     sort accountName:"asc"
} 
```

但是我认为，如果您想按照自己的方式进行排序，则需要添加一个比较器并确保您的类实现了 Comparable。

```
class YourClassName implements Comparable{

 String accountName
 ...

 @Override
 public int compareTo(Object o) {
     if (o == null || this == null) {
         return 0;
     } else {
         return value.compareTo(o.value)
     }
 }
} 
```

然后，当您调用 .sort 时，它将使用您域中的 compareTo 方法。

# javascript - Uncaught ReferenceError: i is not defined (匿名函数)

> ID：11108111
> 
> 赞同：1
> 
> 时间：2012-06-19T19:36:39.317
> 
> 标签：javascript, function

我有一段简单的 Javascript 代码，我得到这个错误：

> Uncaught ReferenceError: i is not defined (匿名函数)

代码如下 -

```
 function xyz(i){
    ....
    ....

    if(i==5) {  // do something }
    else {
      i=i+1;
    setTimeout("xyz(i)",10)

    }

   xyz(1); 
```

有人可以帮帮我吗 ？我需要在某处声明“我”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:38:32.590

错误在`setTimeout`函数中。试试这个，而不是：

```
setTimeout(function(){
    xyz(i);
},10) 
```

始终选择匿名函数而不是“字符串函数”

# math - 在已知长度的向量末端计算 3D 顶点

> ID：11108112
> 
> 赞同：1
> 
> 时间：2012-06-19T19:36:40.377
> 
> 标签：math, 3d

我正在尝试将一个向量从所述顶点投影到该向量末尾的未知顶点。

已知：向量的长度、起始顶点坐标、角度（偏航、滚动、俯仰）。未知数：在向量末尾终止顶点坐标。

在 2D 中，我可以通过以下方式完成它：

```
 Target.X = Source.X + (sin(Facing*DEG2RAD)*Distance);
 Target.Y = Source.Y - (cos(Facing*DEG2RAD)*Distance); 
```

矩阵似乎是矫枉过正。我有一些对 3D 来说效果不佳的东西，但它不准确，这让我相信我没有整体公式的所有适当元素。

```
 Target.Z = Source.Z - (sin(Pitch*DEG2RAD)*Distance); 
```

参考：面对/俯仰以度为单位（乘以 DEG2RAD，即 pi/180）。

任何/所有帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:38:35.463

您必须更正 x 和 y 坐标（将它们投影回 x/y 平面）：

```
Target.X = Source.X + Distance * cos(Pitch * DEG2RAD) * sin(Facing * DEG2RAD);
Target.Y = Source.Y - Distance * cos(Pitch * DEG2RAD) * cos(Facing * DEG2RAD);
Target.Z = Source.Z - Distance * sin(Pitch * DEG2RAD); 
```

# iphone - NSTimer 和非活动/睡眠状态

> ID：11108115
> 
> 赞同：3
> 
> 时间：2012-06-19T19:36:44.763
> 
> 标签：iphone, objective-c, mobile

我在[iPhone 中找到了答案：Detecting user inactivity/idle time since last screen touch](https://stackoverflow.com/questions/273450/iphone-detecting-user-inactivity-idle-time-since-last-screen-touch)但是当设备进入非活动/睡眠状态时会发生什么？计时器停止触发对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:45:51.423

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。如果在长时间调用期间或运行循环处于不监视计时器的模式下发生计时器的触发时间，则计时器不会触发，直到下一次运行循环检查计时器。因此，定时器触发的实际时间可能是计划触发时间之后的一个重要时间段。

因此，当您的应用程序进入非活动状态时 - 计时器将停止触发。当您的应用程序恢复到活动状态时 - 计时器将再次恢复触发。

# objective-c - 我在我的 iPad 应用程序中注释掉了代码，但它仍然会被执行……这怎么可能？

> ID：11108118
> 
> 赞同：0
> 
> 时间：2012-06-19T19:36:52.983
> 
> 标签：objective-c, xcode4

我有一个日历程序，我正在尝试将其转换为 iPad（使用 XCode4，没有情节提要，但在模拟器上运行）。

当我移到上个月时，它目前的行为不正确（在重新绘制视图之前我得到一个空白屏幕）。所以我把实际创建和绘制屏幕的代码注释掉了，屏幕仍然是重新绘制的！我注释掉其他代码，同样的事情发生了……就好像它忽略了注释的语句！

我对为什么会发生这种情况感到目瞪口呆......我已经完成了多次清理，直接构建然后运行......同样的事情发生了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:45:17.440

您是否尝试过清除模拟器的缓存？

从模拟器菜单：

`IOS Simulator > Reset contents & settings`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:01:35.967

尝试从 Xcode 中删除代码。如果它仍然运行，那么就出现了严重错误。还可以尝试在 finder 中复制项目文件夹并运行新项目，它为我解决了一些奇怪的 xCode 行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:42:29.580

不匹配的大括号、括号或其他语法错误可能导致您描述的两个问题。

# php - 使用数组插入mysql和php

> ID：11108119
> 
> 赞同：1
> 
> 时间：2012-06-19T19:36:55.667
> 
> 标签：php, mysql, arrays

我有下面的部分代码：

```
while($array = $result->fetch_assoc() ){

    $second_query = "INSERT INTO".TBL_USERSDONTPAY."VALUES ($array[\"username\"], $array[\"password\"], '0',$array[\"userid|\"], )";

$second_result = $database->query($second_query);

} 
```

查询似乎不起作用。有什么线索吗？我认为这是引号或其他东西的问题。如何才能真正传递数组元素？

这是我的整个代码我想将一行移到另一个表

```
$q = "SELECT * FROM ".TBL_USERS." WHERE username = '$subuser'"; 
          $result = $database->query($q); 

          if($result && $result->num_rows == 1){
              while($array = $result->fetch_assoc() ){
                  $second_query = "INSERT INTO" . TBL_USERSDONTPAY . "VALUES ('" . $array['username'] . "', '" . $array['password'] . "', '0', '" . $array['userid'] ."')";

                  $second_result = $database->query($second_query);
                  if($second_result){
                      // it worked!
                      $q = "DELETE FROM ".TBL_USERS." WHERE username = '$subuser'";
                      $database->query($q);
                  }
            }
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:40:06.850

您需要清理该查询并删除最后的逗号。

```
$second_query = "INSERT INTO " . TBL_USERSDONTPAY . " VALUES ('" . $array['username'] . "', '" . $array['password'] . "', '0', '" . $array['userid'] . "')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:09:49.113

我发现您的查询代码有几个问题

1.  转义字符串中的数组索引：

    您可以结束字符串并将各部分连接在一起：

    ```
    $second_query = "INSERT INTO " . TBL_USERSDONTPAY . 
                    " VALUES ('" . $array['username'] . "', '" . $array['password'] . "', '0', '" . $array['userid'] . "')"; 
    ```

    或使用以下`{$var}`语法：

    ```
    $second_query = "INSERT INTO " . TBL_USERSDONTPAY . 
                    " VALUES ('{$array['username']}', '{$array['password']}', '0', '{$array['userid']}')"; 
    ```

2.  缺少空格（请参阅上面的示例代码..您缺少表名前后的空格）

3.  缺少字段名称。如果您以正确的顺序指定所有字段，您的查询可能会起作用，但是当您稍后更改表时（例如，向表中添加字段）会失败

    ```
    $second_query = "INSERT INTO " . TBL_USERSDONTPAY . 
                    " (username, password, foo, user_id)".
                    " VALUES ('{$array['username']}', '{$array['password']}', '0', '{$array['userid']}')"; 
    ```

    请注意，您实际上应该在上面示例的第二行中插入正确的字段名称。您可以在[MySQL docs for INSERT中找到更多信息](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# c# - 调用图像样式

> ID：11108121
> 
> 赞同：0
> 
> 时间：2012-06-19T19:37:01.613
> 
> 标签：c#, wpf, xaml, reference, styles

有什么方法可以创建可调用的图像样式吗？我在用户控件上有多个按钮，它们具有相同的按钮和按钮图像样式。我可以设置按钮样式，以便可以从按钮的样式（动态资源）中调用它。这是我的代码和图像样式代码的示例：

```
<Grid.Resources>
    <Style TargetType="Button"
           x:Key="ButtonEditSaveStyle">
        <Setter Property="IsEnabled"
                Value="False" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding CanEdit}"
                         Value="True">
                <Setter Property="IsEnabled"
                        Value="True" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Grid.Resources>

<Button Width="32"
        Height="22"
        HorizontalAlignment="Left"
        VerticalAlignment="Center"
        Name="gdEmployeeInfo_btnUpdateRecord"
        Click="gdEmployeeInfo_btnUpdateRecord_Click" 
        Style="{DynamicResource ResourceKey=ButtonEditSaveStyle}"/> 
```

我想设置我的代码，以便我可以在上面的调用中进行附加调用或组合调用来设置图像样式。我知道我可以在按钮中使用图像样式（如下面的代码所示），但我希望有一个地方可以使用相同的样式设置更新多个按钮。图片样式代码：

```
<Image>
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Setter Property="Source"
                    Value="edit_32.png" />
            <Setter Property="Stretch"
                    Value="Uniform" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsEditing}"
                             Value="True">
                    <Setter Property="Source"
                            Value="save_smallest.png" />
                    <Setter Property="Stretch"
                            Value="Uniform" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:00:54.760

想出了我的问题的答案。这组代码允许我使用双重样式设置，同时只为按钮样式创建一个调用：

```
<!--SaveEditImageSwitch-->
<Image x:Key="SaveEditImage" x:Shared="False">
    <Image.Style>
        <Style TargetType="{x:Type Image}">
            <Setter Property="Source"
                    Value="edit_32.png" />
            <Setter Property="Stretch"
                    Value="Uniform" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsEditing}"
                             Value="True">
                    <Setter Property="Source"
                            Value="save_smallest.png" />
                    <Setter Property="Stretch"
                            Value="Uniform" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Image.Style>
</Image>

<!--ButtonEditSaveStyle-->
<Style TargetType="Button"
       x:Key="ButtonEditSaveStyle">
    <Setter Property="IsEnabled"
            Value="False" />
    <Setter Property="Content"
            Value="{DynamicResource ResourceKey=SaveEditImage}" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding CanEdit}"
                     Value="True">
            <Setter Property="IsEnabled"
                    Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style>

<Button Width="32"
        Height="22"
        HorizontalAlignment="Left"
        VerticalAlignment="Center"
        Name="gdEmployeeInfo_btnUpdateRecord"
        Click="gdEmployeeInfo_btnUpdateRecord_Click" 
        Style="{DynamicResource ResourceKey=ButtonEditSaveStyle}"> 
```

# algorithm - 摊销复杂度和最坏情况时间复杂度之间的联系

> ID：11108123
> 
> 赞同：0
> 
> 时间：2012-06-19T19:37:09.253
> 
> 标签：algorithm, complexity-theory, amortized-analysis

我有一组 n 个连续操作，每个操作都以 O(1) 摊销复杂度运行。我可以说整个集合以 O(n) 最坏情况时间复杂度运行吗？我该如何证明呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:42:43.197

您没有提供代码示例，因此我将*n 连续操作*视为算法 for 循环。所以任务是估计最坏情况的复杂度

```
for(int i=1; i<n; i++)
{
   f(x) // O(f(x)) = O(1)
} 
```

换句话说

```
Sum(1,n) 1 = O(1) + O(1) + ... O(1) //n-times 
```

或者

```
O(1) + O(1) + ... O(1) = O(n)O(1) = O(n) 
```

# maven - Maven无法在jar中找到包

> ID：11108125
> 
> 赞同：6
> 
> 时间：2012-06-19T19:37:11.157
> 
> 标签：maven

我有两个项目。项目 A 将项目 B 作为其 pom 中的依赖项。

```
 <dependency>
        <groupId>my.package.abc</groupId>
        <artifactId>abc-common</artifactId>
        <version>0.0.1-SNAPSHOT</version>
    </dependency> 
```

项目 B 的 pom：

```
<groupId>my.package.abc</groupId>
<artifactId>abc-common</artifactId>
<version>0.0.1-SNAPSHOT</version> 
```

但是，当我尝试使用 Maven 构建项目 A 时（通过 eclipse 使用参数“clean install -X”），我得到编译错误：

```
[ERROR] ...\src\main\java\my\package\abc\client\Myclass.java:[3,37] error: package my.package.abc.common.client does not exist 
```

对于来自项目 B 的每个包，我得到包 * 不存在错误。我检查了本地 Maven 存储库，并且 jar 存在并且在 jar 中编译的文件在那里。根据调试输出，在开始编译项目 A 时，项目 B 已成功添加到类路径中。

```
[DEBUG] Classpath:
...
[DEBUG]  ...\.m2\repository\my\package\abc\abc-common\0.0.1-SNAPSHOT\abc-common-0.0.1-SNAPSHOT.jar 
```

那么，如果 Maven 正在寻找项目 B，并且项目 B 中确实包含它应该找到的所有类，为什么它在编译阶段无法找到这些类中的任何一个？

编辑：项目 A 上“clean install -X”的总输出太大，所以这是一个更大但仍然是删节的版本。

```
 [INFO] Deleting directory ..\workspace\abc-bci-web\target\classes\my\package
    [INFO] Deleting directory ..\workspace\abc-bci-web\target\classes\my
    [INFO] Deleting directory ..\workspace\abc-bci-web\target\classes\gov
    [INFO] Deleting directory ..\workspace\abc-bci-web\target\classes
    [INFO] Deleting directory ..\workspace\abc-bci-web\target
    [INFO] 
    [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ abc-bci-web ---
    [DEBUG] org.apache.maven.plugins:maven-resources-plugin:jar:2.4.3:
    [DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-project:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-profile:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-artifact-manager:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-plugin-registry:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-core:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-plugin-parameter-documenter:jar:2.0.6:compile
    [DEBUG]       org.apache.maven.reporting:maven-reporting-api:jar:2.0.6:compile
    [DEBUG]          org.apache.maven.doxia:doxia-sink-api:jar:1.0-alpha-7:compile
    [DEBUG]       org.apache.maven:maven-repository-metadata:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-error-diagnostics:jar:2.0.6:compile
    [DEBUG]       commons-cli:commons-cli:jar:1.0:compile
    [DEBUG]       org.apache.maven:maven-plugin-descriptor:jar:2.0.6:compile
    [DEBUG]       org.codehaus.plexus:plexus-interactivity-api:jar:1.0-alpha-4:compile
    [DEBUG]       classworlds:classworlds:jar:1.1:compile
    [DEBUG]    org.apache.maven:maven-artifact:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-settings:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-model:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-monitor:jar:2.0.6:compile
    [DEBUG]    org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
    [DEBUG]       junit:junit:jar:3.8.1:compile
    [DEBUG]    org.codehaus.plexus:plexus-utils:jar:2.0.5:compile
    [DEBUG]    org.apache.maven.shared:maven-filtering:jar:1.0-beta-4:compile
    [DEBUG]       org.sonatype.plexus:plexus-build-api:jar:0.0.4:compile
    [DEBUG]    org.codehaus.plexus:plexus-interpolation:jar:1.13:compile
    [DEBUG] Created new class realm plugin>org.apache.maven.plugins:maven-resources-plugin:2.4.3
    [DEBUG] Importing foreign packages into class realm plugin>org.apache.maven.plugins:maven-resources-plugin:2.4.3
    [DEBUG]   Imported:  < maven.api
    [DEBUG] Populating class realm plugin>org.apache.maven.plugins:maven-resources-plugin:2.4.3
    [DEBUG]   Included: org.apache.maven.plugins:maven-resources-plugin:jar:2.4.3
    [DEBUG]   Included: org.apache.maven.reporting:maven-reporting-api:jar:2.0.6
    [DEBUG]   Included: org.apache.maven.doxia:doxia-sink-api:jar:1.0-alpha-7
    [DEBUG]   Included: commons-cli:commons-cli:jar:1.0
    [DEBUG]   Included: org.codehaus.plexus:plexus-interactivity-api:jar:1.0-alpha-4
    [DEBUG]   Included: junit:junit:jar:3.8.1
    [DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:2.0.5
    [DEBUG]   Included: org.apache.maven.shared:maven-filtering:jar:1.0-beta-4
    [DEBUG]   Included: org.sonatype.plexus:plexus-build-api:jar:0.0.4
    [DEBUG]   Included: org.codehaus.plexus:plexus-interpolation:jar:1.13
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-project:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-profile:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-artifact-manager:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-registry:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-core:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-parameter-documenter:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-repository-metadata:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-error-diagnostics:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-descriptor:jar:2.0.6
    [DEBUG]   Excluded: classworlds:classworlds:jar:1.1
    [DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-settings:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-model:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-monitor:jar:2.0.6
    [DEBUG]   Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1
    [DEBUG] Configuring mojo org.apache.maven.plugins:maven-resources-plugin:2.4.3:resources from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-resources-plugin:2.4.3, parent: sun.misc.Launcher$AppClassLoader@3d882ea9]
    [DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-resources-plugin:2.4.3:resources' with basic configurator -->
    [DEBUG]   (f) buildFilters = []
    [DEBUG]   (f) encoding = UTF-8
    [DEBUG]   (f) escapeWindowsPaths = true
    [DEBUG]   (s) includeEmptyDirs = false
    [DEBUG]   (s) outputDirectory = ..\workspace\abc-bci-web\target\classes
    [DEBUG]   (s) overwrite = false
    [DEBUG]   (f) project = MavenProject: my.package.abc:abc-bci-web:0.0.1-SNAPSHOT @ ..\workspace\abc-bci-web\pom.xml
    [DEBUG]   (s) resources = [Resource {targetPath: null, filtering: true, FileSet {directory: ..\workspace\abc-bci-web\src\main\resources, PatternSet [includes: {**/*}, excludes: {}]}}]
    [DEBUG]   (f) session = org.apache.maven.execution.MavenSession@71f15b67
    [DEBUG]   (f) useBuildFilters = true
    [DEBUG]   (s) useDefaultDelimiters = true
    [DEBUG] -- end configuration --
    ...
    [INFO] Using 'UTF-8' encoding to copy filtered resources.
    [DEBUG] resource with targetPath null
    directory ..\workspace\abc-bci-web\src\main\resources
    excludes []
    includes [**/*]
    [DEBUG] ignoreDelta true
    [INFO] Copying 5 resources
    [DEBUG] file applicationContext.xml has a filtered file extension
    [DEBUG] filering ..\workspace\abc-bci-web\src\main\resources\my\package\abc\server\config\applicationContext.xml to ..\workspace\abc-bci-web\target\classes\my\package\abc\server\config\applicationContext.xml
    [DEBUG] file log4j-at-info.xml has a filtered file extension
    [DEBUG] filering ..\workspace\abc-bci-web\src\main\resources\log4j-at-info.xml to ..\workspace\abc-bci-web\target\classes\log4j-at-info.xml
    [DEBUG] file log4j-debug.xml has a filtered file extension
    [DEBUG] filering ..\workspace\abc-bci-web\src\main\resources\log4j-debug.xml to ..\workspace\abc-bci-web\target\classes\log4j-debug.xml
    [DEBUG] file log4j-info.xml has a filtered file extension
    [DEBUG] filering ..\workspace\abc-bci-web\src\main\resources\log4j-info.xml to ..\workspace\abc-bci-web\target\classes\log4j-info.xml
    [DEBUG] file SystemSettings.properties has a filtered file extension
    [DEBUG] filering ..\workspace\abc-bci-web\src\main\resources\SystemSettings.properties to ..\workspace\abc-bci-web\target\classes\SystemSettings.properties
    [INFO] 
    [INFO] --- maven-compiler-plugin:2.3.1:compile (default-compile) @ abc-bci-web ---
    [DEBUG] org.apache.maven.plugins:maven-compiler-plugin:jar:2.3.1:
    [DEBUG]    org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
    [DEBUG]       junit:junit:jar:3.8.1:compile
    [DEBUG]       classworlds:classworlds:jar:1.1-alpha-2:compile
    [DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-artifact:jar:2.0.6:compile
    [DEBUG]    org.apache.maven:maven-core:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-settings:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-plugin-parameter-documenter:jar:2.0.6:compile
    [DEBUG]       org.apache.maven.reporting:maven-reporting-api:jar:2.0.6:compile
    [DEBUG]          org.apache.maven.doxia:doxia-sink-api:jar:1.0-alpha-7:compile
    [DEBUG]       org.apache.maven:maven-profile:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-model:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-repository-metadata:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-error-diagnostics:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-project:jar:2.0.6:compile
    [DEBUG]          org.apache.maven:maven-plugin-registry:jar:2.0.6:compile
    [DEBUG]       commons-cli:commons-cli:jar:1.0:compile
    [DEBUG]       org.apache.maven:maven-plugin-descriptor:jar:2.0.6:compile
    [DEBUG]       org.codehaus.plexus:plexus-interactivity-api:jar:1.0-alpha-4:compile
    [DEBUG]       org.apache.maven:maven-artifact-manager:jar:2.0.6:compile
    [DEBUG]       org.apache.maven:maven-monitor:jar:2.0.6:compile
    [DEBUG]    org.codehaus.plexus:plexus-utils:jar:2.0.5:compile
    [DEBUG]    org.codehaus.plexus:plexus-compiler-api:jar:1.8:compile
    [DEBUG]    org.apache.maven:maven-toolchain:jar:1.0:compile
    [DEBUG]    org.codehaus.plexus:plexus-compiler-manager:jar:1.8:compile
    [DEBUG]    org.codehaus.plexus:plexus-compiler-javac:jar:1.8:runtime
    [DEBUG] Created new class realm plugin>org.apache.maven.plugins:maven-compiler-plugin:2.3.1
    [DEBUG] Importing foreign packages into class realm plugin>org.apache.maven.plugins:maven-compiler-plugin:2.3.1
    [DEBUG]   Imported:  < maven.api
    [DEBUG] Populating class realm plugin>org.apache.maven.plugins:maven-compiler-plugin:2.3.1
    [DEBUG]   Included: org.apache.maven.plugins:maven-compiler-plugin:jar:2.3.1
    [DEBUG]   Included: junit:junit:jar:3.8.1
    [DEBUG]   Included: org.apache.maven.reporting:maven-reporting-api:jar:2.0.6
    [DEBUG]   Included: org.apache.maven.doxia:doxia-sink-api:jar:1.0-alpha-7
    [DEBUG]   Included: commons-cli:commons-cli:jar:1.0
    [DEBUG]   Included: org.codehaus.plexus:plexus-interactivity-api:jar:1.0-alpha-4
    [DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:2.0.5
    [DEBUG]   Included: org.codehaus.plexus:plexus-compiler-api:jar:1.8
    [DEBUG]   Included: org.codehaus.plexus:plexus-compiler-manager:jar:1.8
    [DEBUG]   Included: org.codehaus.plexus:plexus-compiler-javac:jar:1.8
    [DEBUG]   Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1
    [DEBUG]   Excluded: classworlds:classworlds:jar:1.1-alpha-2
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-core:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-settings:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-parameter-documenter:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-profile:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-model:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-repository-metadata:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-error-diagnostics:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-project:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-registry:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-plugin-descriptor:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-artifact-manager:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-monitor:jar:2.0.6
    [DEBUG]   Excluded: org.apache.maven:maven-toolchain:jar:1.0
    [DEBUG] Configuring mojo org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-compiler-plugin:2.3.1, parent: sun.misc.Launcher$AppClassLoader@3d882ea9]
    [DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile' with basic configurator -->
    [DEBUG]   (f) basedir = ..\workspace\abc-bci-web
    [DEBUG]   (f) buildDirectory = ..\workspace\abc-bci-web\target
    [DEBUG]   (f) classpathElements = [..\workspace\abc-bci-web\target\classes, ..\.m2\repository\my\dps\frameworks\dps-gwt-framework\2.13-SNAPSHOT\dps-gwt-framework-2.13-SNAPSHOT.jar, ..\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar, ..\.m2\repository\com\allen-sauer\gwt\log\gwt-log\3.1.8\gwt-log-3.1.8.jar, ..\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar, ..\.m2\repository\commons-lang\commons-lang\2.4\commons-lang-2.4.jar, 
...
..\.m2\repository\my\package\abc\abc-domain\0.0.1-SNAPSHOT\abc-domain-0.0.1-SNAPSHOT.jar, ..\.m2\repository\my\package\abc\abc-common\0.0.1-SNAPSHOT\abc-common-0.0.1-SNAPSHOT.jar]
    [DEBUG]   (f) compileSourceRoots = [..\workspace\abc-bci-web\src\main\java]
    [DEBUG]   (f) compilerArgument = -implicit:none
    [DEBUG]   (f) compilerId = javac
    [DEBUG]   (f) debug = true
    [DEBUG]   (f) encoding = UTF-8
    [DEBUG]   (f) failOnError = true
    [DEBUG]   (f) fork = false
    [DEBUG]   (f) generatedSourcesDirectory = ..\workspace\abc-bci-web\target\generated-sources\annotations
    [DEBUG]   (f) optimize = false
    [DEBUG]   (f) outputDirectory = ..\workspace\abc-bci-web\target\classes
    [DEBUG]   (f) outputFileName = abc-bci-web
    [DEBUG]   (f) projectArtifact = my.package.abc:abc-bci-web:war:0.0.1-SNAPSHOT
    [DEBUG]   (f) session = org.apache.maven.execution.MavenSession@71f15b67
    [DEBUG]   (f) showDeprecation = false
    [DEBUG]   (f) showWarnings = false
    [DEBUG]   (f) source = 1.6
    [DEBUG]   (f) staleMillis = 0
    [DEBUG]   (f) target = 1.6
    [DEBUG]   (f) verbose = false
    [DEBUG] -- end configuration --
    [DEBUG] Using compiler 'javac'.
    [DEBUG] Source directories: [..\workspace\abc-bci-web\src\main\java]
    [DEBUG] Classpath: [..\workspace\abc-bci-web\target\classes
     ..\.m2\repository\my\dps\frameworks\dps-gwt-framework\2.13-SNAPSHOT\dps-gwt-framework-2.13-SNAPSHOT.jar
     ..\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar
     ..\.m2\repository\com\allen-sauer\gwt\log\gwt-log\3.1.8\gwt-log-3.1.8.jar
     ..\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar
     ..\.m2\repository\commons-lang\commons-lang\2.4\commons-lang-2.4.jar
     ...
     ..\.m2\repository\my\package\abc\abc-domain\0.0.1-SNAPSHOT\abc-domain-0.0.1-SNAPSHOT.jar
     ..\.m2\repository\my\package\abc\abc-common\0.0.1-SNAPSHOT\abc-common-0.0.1-SNAPSHOT.jar]
    [DEBUG] Output directory: ..\workspace\abc-bci-web\target\classes
    [DEBUG] Classpath:
    [DEBUG]  ..\workspace\abc-bci-web\target\classes
    [DEBUG]  ..\.m2\repository\my\dps\frameworks\dps-gwt-framework\2.13-SNAPSHOT\dps-gwt-framework-2.13-SNAPSHOT.jar
    [DEBUG]  ..\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar
    [DEBUG]  ..\.m2\repository\com\allen-sauer\gwt\log\gwt-log\3.1.8\gwt-log-3.1.8.jar
    [DEBUG]  ..\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar
    [DEBUG]  ..\.m2\repository\commons-lang\commons-lang\2.4\commons-lang-2.4.jar
    ...
    [DEBUG]  ..\.m2\repository\my\package\abc\abc-domain\0.0.1-SNAPSHOT\abc-domain-0.0.1-SNAPSHOT.jar
    [DEBUG]  ..\.m2\repository\my\package\abc\abc-common\0.0.1-SNAPSHOT\abc-common-0.0.1-SNAPSHOT.jar
    [DEBUG] Source roots:
    [DEBUG]  ..\workspace\abc-bci-web\src\main\java
    [DEBUG] Command line options:
    [DEBUG] -d ..\workspace\abc-bci-web\target\classes -classpath ..\workspace\abc-bci-web\target\classes;..\.m2\repository\my\dps\frameworks\dps-gwt-framework\2.13-SNAPSHOT\dps-gwt-framework-2.13-SNAPSHOT.jar;..\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;..\.m2\repository\com\allen-sauer\gwt\log\gwt-log\3.1.8\gwt-log-3.1.8.jar;..\.m2\repository\commons-logging\commons-logging\1.1.1\commons-logging-1.1.1.jar;..\.m2\repository\commons-lang\commons-lang\2.4\commons-lang-2.4.jar;..\.m2\repository\my\package\abc\abc-domain\0.0.1-SNAPSHOT\abc-domain-0.0.1-SNAPSHOT.jar;..\.m2\repository\my\package\abc\abc-common\0.0.1-SNAPSHOT\abc-common-0.0.1-SNAPSHOT.jar; -sourcepath ..\workspace\abc-bci-web\src\main\java; C:...\src\main\java\my\packge\abc\client\AbcBciWeb.java C:...\src\main\java\my\packge\abc\client\review\ch\ChDetailEntryPanel.java C:...\src\main\java\my\packge\abc\client\review\sww\SwwDetailCell.java C:...\src\main\java\my\packge\abc\client\AbcMainPanel.java C:...\src\main\java\my\packge\abc\client\review\sww\SwwDetailEntryPanel.java C:...\src\main\java\my\packge\abc\client\review\sww\SwwReviewTab.java C:...\src\main\java\my\packge\abc\client\review\ReviewComposite.java C:...\src\main\java\my\packge\abc\client\review\juvenile\JuvReviewTab.java C:...\src\main\java\my\packge\abc\client\review\ch\ChDetailCell.java C:...\src\main\java\my\packge\abc\client\review\sww\SwwNameList.java C:...\src\main\java\my\packge\abc\client\AbcMenuPanel.java C:...\src\main\java\my\packge\abc\client\review\events\NameSelectionChangeEvent.java C:...\src\main\java\my\packge\abc\client\review\sww\SwwDetailCellList.java C:...\src\main\java\my\packge\abc\client\review\ReviewTabController.java C:...\src\main\java\my\packge\abc\client\review\ReviewMenuPanel.java C:...\src\main\java\my\packge\abc\client\review\ch\ChReviewTab.java C:...\src\main\java\my\packge\abc\client\review\ch\ChNameList.java C:...\src\main\java\my\packge\abc\client\review\ncic\NcicReviewTab.java C:...\src\main\java\my\packge\abc\client\review\fbi\FbiReviewTab.java C:...\src\main\java\my\packge\abc\client\review\events\NameSelectionChangeHandler.java C:...\src\main\java\my\packge\abc\client\review\ch\ChDetailCellList.java C:...\src\main\java\my\packge\abc\client\review\ReviewTabHandler.java -s ..\workspace\abc-bci-web\target\generated-sources\annotations -g -nowarn -target 1.6 -source 1.6 -encoding UTF-8 -implicit:none
    [INFO] Compiling 22 source files to ..\workspace\abc-bci-web\target\classes
    [INFO] -------------------------------------------------------------
    [ERROR] COMPILATION ERROR : 
    [INFO] -------------------------------------------------------------
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[3,37] error: package my.package.abc.common.client does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[4,52] error: package my.package.abc.common.client.view.incidents does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[5,37] error: package my.package.abc.common.shared does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[6,51] error: package my.package.abc.common.shared.authorization does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[17,31] error: cannot find symbol

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[3,44] error: package my.package.abc.common.client.events does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[4,44] error: package my.package.abc.common.client.events does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[5,44] error: package my.package.abc.common.client.events does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[6,44] error: package my.package.abc.common.client.events does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[7,49] error: package my.package.abc.common.client.view.header does not exist

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,47] error: type BaseMainPanel does not take parameters

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,75] error: cannot find symbol

    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,103] error: cannot find symbol
    ...

    [INFO] 100 errors 
    [INFO] -------------------------------------------------------------
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 32.497s
    [INFO] Finished at: Tue Jun 19 13:20:24 MDT 2012
    [INFO] Final Memory: 21M/123M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project abc-bci-web: Compilation failure: Compilation failure:
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[3,37] error: package my.package.abc.common.client does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[4,52] error: package my.package.abc.common.client.view.incidents does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[5,37] error: package my.package.abc.common.shared does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[6,51] error: package my.package.abc.common.shared.authorization does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcBciWeb.java:[17,31] error: cannot find symbol
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[3,44] error: package my.package.abc.common.client.events does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[4,44] error: package my.package.abc.common.client.events does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[5,44] error: package my.package.abc.common.client.events does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[6,44] error: package my.package.abc.common.client.events does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[7,49] error: package my.package.abc.common.client.view.header does not exist
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,47] error: type BaseMainPanel does not take parameters
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,75] error: cannot find symbol
    [ERROR] 
    [ERROR] ...\src\main\java\my\packge\abc\client\AbcMainPanel.java:[17,103] error: cannot find symbol
    ...
    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project abc-bci-web: Compilation failure
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
    Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
        at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:656)
        at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:107)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
    [ERROR] 
    [ERROR] 
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:09:35.193

您在项目 B 中的包名称有拼写错误 (my.packge.abc => my.package.abc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:45:21.403

您是否首先对项目 b 进行了成功的“mvn clean install”？

由于项目 a 依赖于 b ，因此构建必须首先进行，并且 .jar 文件必须在您的本地存储库中。

如果它在 eclipse 中工作，您可能只是使用 eclipse 项目依赖项配置了类路径，这不会影响 maven 的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T09:02:26.653

你是从命令行做所有这些吗？我建议你从 Maven 的缓存（~/.m2/repository）中擦除所有的工件，然后重新{clean，安装}项目 B，然后是 A。也许缓存中的版本有问题。你试过了吗

```
jar tvf [your jar] 
```

检查里面有什么？

也许您使用了两个具有两个不同缓存目录的 Maven 二进制文件。通常是 eclipse maven 构建（带有插件的 maven）和命令行 maven 构建（外部二进制文件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T21:33:55.840

当我在寻找完全相同的场景的答案时，这是最热门的作品之一。不幸的是，线程中没有答案。

这花费了很多时间，但在我的情况下，项目 B（依赖项）的 pom.xml 将 .java 文件复制到 .jar 而不是 .class 文件中。相应地更改 pom.xml 中的资源部分可以进行干净的构建和运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T09:07:16.393

可能是项目 B 尚未构建（快照版本不存在 jet），或者已过时。

因此，如果您首先在项目 B 上进行全新安装，然后在项目 A 上进行全新安装，它应该按预期运行。

我建议使用子项目 A 和 B 创建一个项目，然后父项目将构建这两个项目

# python - 什么时候在 python 中使用 class 和 dict？

> ID：11108128
> 
> 赞同：34
> 
> 时间：2012-06-19T19:37:24.420
> 
> 标签：python

在考虑设计时，在哪些情况下使用 class 与 dict 有意义？优点和缺点也会很有用。

例如，

```
class AlbumState:
    """ AlbumState class, tracks photos shown, etc"""

    def __init__ (self, album):
        """ album for this object will track state"""
        self.album = album

        self.photos_shown = []
        self.photos_notshown = range(album.size()) 
```

相对

```
albumstate['album'] = album
albumstate['photos_shown'] = []
albumstate['photos_notshown'] = range(album.size()) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-19T19:41:02.933

我想说区分是使用类还是字典的第一个也是最重要的标准是您是否只想拥有一些数据存储或者您还想要一些逻辑（即方法）。

如果您只需要将多个数据保存在一起，那么字典可能是您的最佳选择。另一方面，如果您需要对该数据执行操作，并且数据和操作之间存在非常紧密的关系（形成一种实体），那么这确实需要使用类。

正如@Ben 所建议的那样，当您拥有一堆相关数据时，您可以开始只使用字典，并且如果在某个时候您意识到您还需要一些逻辑来处理该数据，您可以将字典变成一个类。

您还可以查看[统一建模语言 (UML)](http://en.wikipedia.org/wiki/Unified_Modeling_Language)及其[类图](http://en.wikipedia.org/wiki/Class_diagram)，以更好地了解如何使用类。如果您只是在编写一些脚本或编写一个小型应用程序，您可能不需要使用 UML，但如果您正在设计一个更大、更复杂的系统，它确实可以帮助您预先决定需要什么以及需要多少类。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T21:29:05.217

A`dict`可以使用任何可散列值作为键，而`class`实例需要具有合法标识符的字符串作为其“键”。因此，您可以将任意数据捆绑在一个`dict`.

`dict`当您的键值无论如何都是有效的标识符字符串时，使用普通类作为更方便的方法是很常见的：

```
class Box:
    pass

x = Box()

x.a = 0
x.b = 1

d = {}
d["a"] = 0   # "x.a" is easier to type than this
d["b"] = 1

print("Current value for 'a' is: {}".format(x.a)) 
```

一旦您开始进行正确的面向对象设计，并且您拥有与数据一起使用的方法函数，您希望将数据放在适当的类中，以便将方法函数捆绑在其中。只有一个 dict 是合法的以及一些对其进行操作的全局函数，但如果它们都是相关的，那么将它们捆绑到一个`class`.

最后，请注意 a`dict`是用于实现 a 的构建块`class`。如果您将值存储在类中，它们实际上存储在内部`dict`，并且只有一些方便的语法来访问它们。

```
print(x.a)  # prints 1

print(x.__dict__["a"])  # does exact same thing as previous line 
```

# python - 以编程方式打开网页给出意外结果

> ID：11108132
> 
> 赞同：0
> 
> 时间：2012-06-19T19:37:37.290
> 
> 标签：python, html, ruby, nokogiri, urllib2

我正在尝试从该站点获取信息：

[http://www.gocrimson.com/sports/mbkb/2011-12/roster](http://www.gocrimson.com/sports/mbkb/2011-12/roster)

如果您在浏览器中查看该页面，您会看到一个`<table>`包含所有球员信息的漂亮页面，下面是教练的信息。

当我将该页面拉入 python 程序（使用`urllib2`）或 ruby​​ 程序（使用`nokogiri`）时，表格表示为一堆`div`元素。我认为可能有一些 javascript 正在运行，所以我在浏览器上禁用了 javascript 并重新访问了该页面。它仍然加载了`table`s 到位。

如果我使用`Selenium`拉入页面源，我会得到`table`格式。

关于为什么页面与 div 一起出现的任何想法？

Python：

```
page = urllib2.urlopen(url)
html = page.read() 
```

`print html`输出（我将其中一个`div`s 放在最后一行以引起注意。那是`tr`浏览器页面中的 a 。缩短以保持字符限制）：

```
'\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n<?xml version="1.0" encoding="iso-8859-1"?>\r\n<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">\r\n<html xmlns="http://www.w3.org/1999/xhtml">
<head> 
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=iso-8859-1"/> <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/>\r\n<meta forua="true" http-equiv="Cache-Control" content="must-revalidate" />\r\n<meta http-equiv="Pragma" content="no-cache, must-revalidate" />\r\n        
<title>The Official Website of Harvard University Athletics:  Harvard Athletics - GoCrimson.com  : Men\'s Basketball - 2011-12 Roster </title>\r\n<link rel="stylesheet" href="/info/mobile/mobile.css" type="text/css"></link>\r\n<link rel="stylesheet" href="/mobile-overwrite.css" type="text/css"></link>\r\n</head>\r\n
<body class="classic">\r\n\r\n\r\n\t<strong><a href="/landing/index">News</a></strong>\r\n | \r\n\t<a href="/landing/index?c=scores">Scores</a>\r\n<br /><br />\r\n\r\n<p class="goBack-link"><a href="javascript:history.go(-1)"><<< Back</a></p>\r\n\r\n\r\n<div class="roster ">\r\n\t\t\t<div class="title">Men\'s Basketball - 2011-12 Roster</div>\r\n\t\t<div class="table">\r\n\t\t<div class="titles">\r\n\t\t\t
<div class="number">No.</div>\r\n\t\t\t<div class="name">Name</div>\r\n\t\t\t<div class="positions">Position</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t\t\t\t<div class="item  even  clearfix">\r\n\t\t\t\t<div class="data">\r\n\t\t\t\t\t<div class="number">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t3\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="name"> 
```

红宝石：

```
doc = Nokogiri::HTML(open("http://www.google.com/search?q=doughnuts"))
doc.css('tr').each do |node|
  puts node.text
end 
```

找不到`tr`s，但是

```
doc.css('div').each do |node|
  puts node.text
end 
```

找到`div`s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:10:21.327

通过添加 User-Agent 标头，我能够得到 a`<table>`而不是s 。`div`具体来说，我假装自己是一个知名的流行浏览器。

```
opener = urllib2.build_opener()
opener.addheaders = [('User-agent',
    ('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_7) '
     'AppleWebKit/535.1 (KHTML, like Gecko) '
     'Chrome/13.0.782.13 Safari/535.1'))
]
response = opener.open('http://www.gocrimson.com/sports/mbkb/2011-12/roster')
print response.readlines() # divs are now a table 
```

# wordpress - 会员资格的WordPress插件？

> ID：11108133
> 
> 赞同：1
> 
> 时间：2012-06-19T19:37:38.350
> 
> 标签：wordpress

我正在寻找一个以会员为基础的网站，而且我是 Wordpress 的新手，所以试图寻找可以

*   创建 3 个会员级别（非会员、会员和高级会员）
*   限制会员/高级会员访问网站的某些页面/功能
*   也找不到可定制注册表单的好插件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T02:05:08.243

看看付费会员专业版，它是 100% 开源的，可在 WordPress 存储库中找到： [http ://wordpress.org/extend/plugins/paid-memberships-pro/](http://wordpress.org/extend/plugins/paid-memberships-pro/)

这是一些使用插件中的钩子向结帐页面添加字段的代码。这需要一点 php 技巧和编程： [https ://gist.github.com/1389944](https://gist.github.com/1389944)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-28T12:12:19.910

如果您尝试使用 WordPress 创建会员网站，那么您应该了解 memberpress 插件。它允许您限制某些区域，甚至为您的 WordPress 网站添加会员等级。它是可用于会员网站的最佳插件之一，您可以从此链接查看会员新闻网站

[https://memberpress.com/myohoguy/home](https://memberpress.com/myohoguy/home)

# c# - 我认为 Dapper 可以像这样合并多个查询

> ID：11108134
> 
> 赞同：1
> 
> 时间：2012-06-19T19:37:40.080
> 
> 标签：c#, sqlite, dapper

我正在使用 Dapper 微型 ORM。我认为它可以处理这样的枚举：

```
string sql = @"SELECT * FROM Events WHERE TimestampTicks <= @TimestampTicks AND TelemetryId = @TelemetryId ORDER BY TimestampTicks DESC LIMIT 1";
var events = _connection.Query<ReplayEvent>(sql, telemetryIds.Select(ti => new { TimestampTicks = startTime.Ticks, TelemetryId = ti })); 
```

唉，它给出了一个毫无价值的错误。Query 方法没有合并多个结果的方法吗？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:18:52.233

我相信您可以使用子查询并使用[Dapper](http://code.google.com/p/dapper-dot-net/)页面上引用的“列表支持”中的构建来做到这一点：

```
string sql = @"SELECT * FROM Events e WHERE TimestampTicks = 
    (SELECT MAX(TimestampTicks) FROM Events WHERE TimestampTicks <=@TimestampTicks AND TelemetryId = e.TelemetryId ) 
    AND e.TelemetryId IN @TelemetryIds;"
var events = _connection.Query<ReplayEvent>(sql, new {TelemtryIds = telemetryIds, TimestampTicks = startTime.Ticks}); 
```

# php - 用于捕获分号分隔的数据库查询的正则表达式模式

> ID：11108137
> 
> 赞同：0
> 
> 时间：2012-06-19T19:37:49.580
> 
> 标签：php, regex, pcre

我有一个执行数据库查询的脚本，我使用分号 + 换行符 ( `\n`) 将一个查询与另一个查询分开。见下文：

```
CREATE TABLE `moxedo`.`mox_config` (`;`, `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT , `group_id` INT(3) UNSIGNED NOT NULL , `is_enabled` INT(1) UNSIGNED NOT NULL , `tag` VARCHAR(255) NOT NULL , `name` VARCHAR(80) NOT NULL , `value` VARCHAR(255) NOT NULL , `description` TEXT NOT NULL , `init_params` TEXT NOT NULL , `datetime_added` DATETIME NOT NULL , `datetime_lastmodified` DATETIME NOT NULL , `timestamp_univ` BIGINT(14) NOT NULL , PRIMARY KEY ( `id` ) )
ENGINE = INNODB; 
ALTER TABLE `moxedo`.`mox_config` ADD UNIQUE `ix_u_tag_ge` ( `tag` ); 
```

我正在寻找可以帮助我捕获每个数据库查询的正则表达式模式。但是，我还需要适应查询正文中出现的分号，如上面的代码所示。

我会很感激一些帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:00:57.107

你可以试试这个：

```
(.*?;)(?!`)(?:\s|$) 
```

*   `(.*?;)`- 匹配后跟分号的所有内容...
*   (?!`) - ... 后面没有单引号
*   `(?:\s+|$)`- 后跟空白字符或字符串结尾

如果存在分号可以出现在不同位置的其他用例，则需要相应地更新正则表达式。

# java - 是否可以在不使用 bufferedImage 类的情况下将 zxing qrcode byteMatrix 转换为 bytearray？

> ID：11108139
> 
> 赞同：0
> 
> 时间：2012-06-19T19:37:51.800
> 
> 标签：java, html, servlets, bytearray, zxing

我需要将我从zxing的qrcode函数得到的byteMatrix数据转换为byte[]，然后在servlet中将这些数据发送到html页面进行图像显示。

我在 java1.3 中运行这个应用程序，它不支持 bufferedImage 类。

我在网上搜索了将近 4~5 天，仍然找不到任何东西。

所以我想知道是否可以在不使用 bufferedImage 的情况下实现这一点？

非常感谢您的帮助。

艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:17:02.700

你为什么不想使用`BufferedImage`？它当然在 Java 1.3 环境中可用。

你是什​​么意思-以某种格式`byte[]`表示*图像的字节？*设置响应内容类型后，用于`ImageIO`将其写入`BufferedImage`servlet 输出流等流。

# matlab - MATLAB - 在子图中的一些选定图旁边添加图例 - for 循环

> ID：11108143
> 
> 赞同：0
> 
> 时间：2012-06-19T19:38:02.997
> 
> 标签：matlab, for-loop, legend, matlab-figure, subplot

我想在子图中添加图例，但仅适用于某些图。这是我的代码：

```
for j = 1:length(FL)
  for i = 1:length(index_list)
    pos=pos+1;
    subplot(size(FL,1),length(index_list), pos)
    legend(num2str(ms_list(i)), 'Location', 'NorthOutside');
    imagesc(imread(FL{j,:},index_list(i)))
    if i==1
        legend(FL(j),'Location', 'WestOutside')

  end 
end 
```

子图包含从多帧 .tif 文件中提取的帧。所需帧的索引位于 index_list（列）中。所需文件的路径位于 FL（行）中。我想在图中添加的是每行左侧的文件名和绘制的每个图像的帧索引。ms_list 包含以毫秒为单位的等效索引，这实际上是我想要显示的。这样做会在循环中的每个段落返回“Plot empty”。

任何的想法 ？

谢谢

JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:44:09.470

从您的描述和代码来看，这似乎`legend`不是您想要的；相反，您需要一个标题（在图上方）和 ylabel（在某些图的左侧）。 `legend`是为绘图内的特定对象提供标签，例如线条系列。

```
for j = 1:length(FL)
  for i = 1:length(index_list)
    pos=pos+1;
    subplot(size(FL,1),length(index_list), pos)
    title(num2str(ms_list(i))); %#<---title here
    imagesc(imread(FL{j,:},index_list(i)))
    if i==1
        ylabel(FL(j)) %#<---ylabel here    
    end 
  end
end 
```

您收到错误的原因是您正在应用`legend`一组空的轴。 `legend`标记轴的孩子；没有孩子，没有标签，因此错误。

# api - Foursquare API 查询搜索词的 OR 语句

> ID：11108145
> 
> 赞同：0
> 
> 时间：2012-06-19T19:38:08.397
> 
> 标签：api, foursquare

有没有办法在“explore”端点[https://developer.foursquare.com/docs/venues/explore](https://developer.foursquare.com/docs/venues/explore)中为“query”参数使用“OR”语句？例如，如果我想在单个 API 请求中探索“wifi”或“wi-fi”场所。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:10:52.853

Foursquare 的查询字段仅支持关键字——它不包括对“OR”等运算符的支持。

# null - Teradata：如何在不使用合并的情况下比较潜在的空字段？

> ID：11108148
> 
> 赞同：0
> 
> 时间：2012-06-19T19:38:19.253
> 
> 标签：null, teradata, coalesce

我们正在使用一个使用合并的查询来比较潜在的空值。我想摆脱这种情况，因为它不仅使查询更难维护，而且非常难看。想象一下：

`where coalesce(tbl1.field,'~') <> Coalesce(tbl2.field,'~')`

...在 where 子句中重复 30 多次。哎呀。

我一直以为 EXISTS 可以让我绕过这种笨拙，但事实证明我错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T12:40:21.753

最好的替代方法是将合并后的值作为列默认值驱动到物理数据模型中，而不是 NULL。这要求企业接受并理解令牌值将在数据模型中替换为企业当前接受 NULL 表示的任何内容。NULL 的棘手之处有时是在元数据和逻辑数据模型中准确描述 NULL 代表什么。从纯粹主义者的角度来看，不应该允许它表示多种事物。其他替代方法是解决 NULL 不能与另一个值（NULL 或非 NULL）进行比较的事实。

COALESCE 在 Teradata（以及其他数据库）中被视为内联 CASE 语句。WHERE 子句中有大量 COALESCE 语句的问题是优化器可能无法准确估计结果基数，因为 COALESCE 允许进行两次以上的比较。`COALESCE(A.Col1, B.Col2, C.Col3, '~')`将返回它遇到的第一个非 NULL 值。

如果 NULLS 是参考表在其域中没有 NULL 值的维度，则可以将其排除在考虑之外。换句话说，NULL 不是有效的主键。但是，您会在优化器中发现，它可能会在表中插入一个条件，在该表中允许 NULLS 仅假脱机那些`A.Col1 IS NOT NULL`. 因此，在您的数据模型中允许使用 NULL 会产生一些开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:46:47.820

我总是使用 CASE 语句。它更清晰。NULLS 搞砸了一切。我想它们是必要的，但我发现它们通常可以被消除。我们的数据建模师说“朋友不要让朋友使用 NULL。我喜欢这样。

# c# - 使用反射获取对象属性的属性

> ID：11108150
> 
> 赞同：2
> 
> 时间：2012-06-19T19:38:28.223
> 
> 标签：c#, .net, reflection

假设我有一个带有 FreezerPack 属性的午餐盒类，该类具有名称属性。

```
public class LunchBox
{
    public FreezerPack FreezerPack { get; set; }
}

public class FreezerPack
{
    public string Name { get; set; }
} 
```

使用反射，我可以像这样得到 FreezerPack：

```
var lunchBox = new LunchBox
{
    FreezerPack = new FreezerPack
    {
        Name = "I'm so cool"
    }
};

var freezerPack = typeof(LunchBox)
                    .GetProperty("FreezerPack")
                    .GetValue(lunchBox, null); 
```

但是，当我只有作为 T 的午餐盒和属性路径为“FreezerPack.Name”的字符串时，如何从午餐盒中的 FreezerPack 中获取名称？`.GetProperty("FreezerPack.Name")`似乎没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:42:10.613

不，您需要反思以下结果`FreezerPack`：

```
var lunchBox = new LunchBox() { FreezerPack = new FreezerPack() { Name = "I'm so cool" } };
var freezerPack = typeof(LunchBox).GetProperty("FreezerPack").GetValue(lunchBox, null);
var freezerPackName = freezerPack.GetType().GetProperty("Name").GetValue(freezerPack, null);
Console.WriteLine(freezerPackName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:45:52.773

`dynamic`在这种情况下可能有意义：

```
dynamic lunchBox = new LunchBox() { FreezerPack = new FreezerPack() { Name = "I'm so cool" } };
string name = lunchBox.FreezerPack.Name; 
```

# php - 循环动态输入框并插入mysql数据库

> ID：11108158
> 
> 赞同：1
> 
> 时间：2012-06-19T19:38:47.833
> 
> 标签：php, mysql, forms, for-loop, foreach

我的表格需要你的帮助。我正在尝试构建一个动态表单，其中在以前的表单 sp1.php 中输入的特定整数用于显示输入框的数量。

第一种形式的变量是 $state 和 $number。然后在处理页面sp2.php上，将$number的值放入for循环中，显示输入框。

我现在要做的是将输入到 tinput 框中的值插入到 mysql 表中。

我得到的错误是

1) 未定义索引：DISTRICT 2) 为 foreach() 提供的参数无效

请问我怎样才能使这项工作。谢谢你。

我的代码如下。如果需要，我将非常乐意展示代码的其他部分。谢谢你。

```
<?php 

 $state=htmlspecialchars(($_POST['state']))       ; 
 $number = intval(($_POST['number']));

  for ($i = 0; $i < $number ; $i++ ) { 

  echo "
  <form action='sd2.php' method='post'>
    <label for='name'>Districts</label>
    <input type='text' name='district[]'>
    <br/><br/>
  </form>"; 

    }
    ?>   
    <?php     

 foreach($_POST['district'] as $senatorial) {
     $query = "INSERT INTO  state  ( `state_id`, `state`, `senatorial`)
     VALUES (NULL, '".$state."', '".$senatorial."') "; 
     mysql_query($query) or die (mysql_error());  
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:49:20.563

这必须有效：

```
$count = count($_POST['district']);
for ($i=0; $i<$count; $i++){
    $district = $_POST['district'][$i];
    //do this
    //do that
} 
```

# python - Matplotlib 缩放工作与 wxPython ScrolledWindow 结合使用

> ID：11108160
> 
> 赞同：4
> 
> 时间：2012-06-19T19:38:52.280
> 
> 标签：python, image, matplotlib, scrolledwindow

我有一个在 wx.ScrolledWindow 内显示的 Matplotlib 画布 (FigureCanvasWxAgg)。问题是我想让 Matplotlib 的默认缩放和平移功能与 ScrolledWindow 一起工作，这样当用户在画布内缩放图像时，ScrolledWindow 应该变大以适应缩放（滚动条变成更小）。同样对于平移，我希望默认的 matplotlib 平移工具与我们的 ScrolledWindow 一起工作，这样当用户在画布上平移图像时，ScrolledWindow 的滚动条应该相应移动。

我已经搜索了一段时间，甚至没有看到有人提到这是否可能。谁能指出我正确的方向？

感谢您提供任何帮助/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T13:21:28.503

问题是默认值`Zoom`并且`Pan`不调整图形大小，它们只是更改限制并重绘绘图。

您想要的是`Zoom`调整大小（保持相同的限制）并`Pan`像在普通滚动窗口中一样工作。我从来没有试过这个，`fig.set_size_inches(w,h)`应该做的伎俩。

# sql - 限制 2 列的组合记录

> ID：11108164
> 
> 赞同：2
> 
> 时间：2012-06-19T19:39:09.580
> 
> 标签：sql, oracle

在查询两列之间的组合时寻求一些帮助来限制结果。这是我正在使用的那种表的示例..

```
id  name  group  state
1   Bob   A      NY
2   Jim   A      NY
3   Dan   A      NY
4   Mike  A      FL
5   Tim   B      NY
6   Sam   B      FL
7   Brad  B      FL
8   Glen  B      FL
9   Ben   C      FL 
```

我正在尝试显示“组”和“状态”的所有组合的所有记录，但仅限于每个组合最多显示 2 条记录。结果应如下所示。

```
id    name  group   state
1     Bob   A       NY
2     Jim   A       NY
4     Mike  A       FL
5     Tim   B       NY
6     Sam   B       FL
7     Brad  B       FL
9     Ben   C       FL 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:44:48.770

假设您总是想要每行的两行`group`并`state`与最低的组合`id`

```
SELECT *
  FROM (SELECT a.*,
               row_number() over (partition by group, state
                                      order by id asc) rnk
          FROM your_table a)
 WHERE rnk <= 2 
```

当然，由于`group`是保留字，我假设您的列实际上被命名为其他名称......您需要调整我的查询以使用正确的列名。

# cordova - 如何使用 window.openDatabase 访问 phonegap 中的旧数据库？

> ID：11108165
> 
> 赞同：2
> 
> 时间：2012-06-19T19:39:12.327
> 
> 标签：cordova

我在 PhoneGap 开发页面中阅读了存储教程。在示例中，它使用了 window.openDatabase 两次。但是文档说openDatabase返回一个新的数据库对象，我猜这个例子的目标是生成一个新的数据库然后访问它来取回数据。但是为什么它会两次创建一个新的数据库对象呢？

```
<!DOCTYPE html>
<html>
  <head>
    <title>Storage Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Populate the database 
    //
    function populateDB(tx) {
        tx.executeSql('DROP TABLE IF EXISTS DEMO');
        tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
        tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
        tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
    }

    // Query the database
    //
    function queryDB(tx) {
        tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
    }

    // Query the success callback
    //
    function querySuccess(tx, results) {
  console.log("Returned rows = " + results.rows.length);
  // this will be true since it was a select statement and so rowsAffected was 0
  if (!results.rowsAffected) {
    console.log('No rows affected!');
    return false;
  }
  // for an insert statement, this property will return the ID of the last inserted row
  console.log("Last inserted row ID = " + results.insertId);
    }

    // Transaction error callback
    //
    function errorCB(err) {
        console.log("Error processing SQL: "+err.code);
    }

    // Transaction success callback
    //
    function successCB() {
        var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000); //Why create a new DB again??
        db.transaction(queryDB, errorCB);
    }

    // Cordova is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);     //upon the success of create a database, jump to successCB
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Database</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:44:45.033

对 window.openDatabase 的调用将返回一个新的 db 对象，但如果您要求相同的数据库名称，在本例中为“Database”，则每个 db 对象将引用同一个物理数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:14:23.217

另一个好问题是：为什么要打开数据库两次？只需执行一次并将返回的对象全局存储。

```
var db;
document.addEventListener("deviceready", function() {
    db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
}, false); 
```

# javascript - 在 Raphael SVG 中，翻译路径是否意味着“移动中心”而不是“移动原点”？

> ID：11108169
> 
> 赞同：0
> 
> 时间：2012-06-19T19:39:39.657
> 
> 标签：javascript, svg, raphael

这是代码：

```
Raphael('holder', 400, 400, function() {
    this.circle(200, 200, 100)
    this.circle(200, 200, 140)

    this.circle(0, 0, 1).translate(300, 200).scale(10).attr({fill: 'green'})
    this.circle(300, 200, 5).attr({fill: 'red'})
    this.path('M300,200 L400, 200').attr({stroke: 'red', 'stroke-width': 3})
    this.path('M0,0 L1,0').attr({stroke: 'blue'}).translate(300, 200).scale(100, 100)
}) 
```

这是 Chrome 中的结果：

![这是 Chrome 中的结果](../Images/b15affa815eca35e062ad06a69c063c0.png)

请注意，蓝线`M0 0`不在 300,200 处！

我期望的是这两条路径会重合。当我`translate(300, 200)`预计这`M0, 0`会将笔放在 300,200 时。但它没有！它将笔放置在其他位置，使得生成路径的中心最终达到 300,200。

那么，我怎样才能`M0 0`在纸上创建一条路径并将其定位？

（或者，我是否必须计算路径的中心并将所有路径值偏移该中心？请不要说“是”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:59:34.907

您的问题是您`.scale(100, 100)`在蓝线上使用从 (300, 200) 的中心点在两个方向上水平调整整条线的大小；

只需将您的最后一行替换为：

```
this.path('M0,0 L100,0').attr({stroke: 'blue'}).translate(300, 200); 
```

让蓝线覆盖红线

这是解决方案的小提琴：http: [//jsfiddle.net/QfAsY/](http://jsfiddle.net/QfAsY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:11:10.423

[您可以使用 center 进行缩放，](http://raphaeljs.com/reference.html#Element.scale)解决方案也是如此`scale(100, 100, 0, 0)`。

# google-app-engine - GAE 和 JDO：与持久性管理器一起使用的任何推荐技术？

> ID：11108172
> 
> 赞同：0
> 
> 时间：2012-06-19T19:39:57.710
> 
> 标签：google-app-engine, jdo

App Engine 文档中使用 JDO 的基本示例非常简单：

```
PersistenceManager pm = PMF.get().getPersistenceManager();

Employee e = new Employee("Alfred", "Smith", new Date());

try {
    pm.makePersistent(e);
} finally {
    pm.close();
} 
```

但在我看来，每次我想访问存储时获取和关闭持久性管理器有点烦人，有很多冗余代码。那么你会建议什么来避免这种情况呢？

例如，我遇到了一个解决方案，它建议将 PM 放入过滤器并将其附加到过滤器中，`request`这样我就可以直接从任何 servlet 访问它。PM 也会被过滤器自动关闭。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:41:17.307

1.  在 DAO 层中执行此操作，您可以将样板代码排除在业务逻辑之外
2.  真的有*那么*大吗？我的意思是，打字并不是编程的难点：）
3.  我个人不会使用 JDO。Objectify 更容易，因为它是专为 appengine 设计的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T09:53:19.993

将 PM 放入过滤器并在工作完成后关闭该 PM（doFilter 中的 finally 子句）是一个好方法。如果将来您要迁移到 JPA，这可以使代码保持干净、易于维护且易于更改

# c# - 如何限制 C# 应用程序的使用

> ID：11108173
> 
> 赞同：1
> 
> 时间：2012-06-19T19:39:57.660
> 
> 标签：c#

我想将任何 exe 文件的使用限制为特定的迭代次数，比如说 10。达到该限制后，用户将无法运行 exe 文件，或者在第 11 次运行 exe 文件时，他/她将收到一条消息“超出试运行”。

这在 C 语言中很有可能，就像这样 - [http://www.gidforums.com/t-22362.html](http://www.gidforums.com/t-22362.html)

访问 PE 标头的示例在这里 - [http://code.cheesydesign.com/?p=572](http://code.cheesydesign.com/?p=572)，但它检查时间戳，而我想要应用程序已启动的出现次数。

我不想更改注册表。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:56:27.900

防止用户超过一定数量的试运行的最可靠方法是向他们发出注册码（GUID 可以很好地工作），然后在您自己的数据库服务器上跟踪剩余的试运行。猜测另一个用户的 GUID 是非常困难的，而且他们不可能破解剩余的试验（除了入侵您的服务器）。

当应用程序运行时，它可以简单地访问一个返回软件状态的小型 Web 服务。如果无法访问 Web 服务，则应用程序会要求用户连接到 Internet 并重试。

除此之外，没有多少选择是不容易被黑客入侵的。即使您加密了剩余的试验次数，用户所需要做的就是将文件复制到其他地方，然后当他们达到限制时删除原始文件并用副本替换它......无限重复。

这个模型的好处是，当用户购买完整版时，您需要做的就是更新您的数据库并授予他们完全访问权限。

如果您想让完全付费的用户继续使用该软件而不需要连接到互联网，那么在支付软件后第一次连接到 Web 服务器时，可以在某处存储一个确认用户付费订阅的密钥文件。您甚至可以根据用户的注册号创建一个哈希，以确保一个用户不能使用另一个用户的密钥文件。

如果订阅是年度订阅，则付费用户的应用程序可以在互联网连接可用时重新查询服务器并重新检查以确保他们的注册仍然有效。或者您的密钥文件可能包含一些加密日期，在该日期将不再有效。

编辑：基于日期的试运行会更容易实施。您可以提供带有加密日期的密钥文件。由于日期不会改变，用户将很难破解密钥文件。即使他们借用或偷了别人的，他们也只会在此之前获得一到两周的额外时间（取决于您的试用期），也会失效。不同之处在于基于日期的密钥文件是静态的，因此很难进行欺骗。

现在，另一种选择是将这两种方法结合起来。您可以在同一个密钥文件中使用加密日期进行倒计时。这将确保，即使用户尝试复制/替换密钥文件，试用仍将最终结束（可能 10 次使用/1 个月，以先到者为准）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:46:32.290

除了关于是否应该这样做的现有评论之外，除了不修改注册表之外，唯一的其他选择是以加密方式将某些内容保存到文件中。安装应用程序或 exe 将创建文件，并且应用程序的每次启动都会解密、更新、加密文件。但即便如此，这也是用户在您不想要的情况下更改事物的主题。通过默默无闻的安全总是一种痛苦。

# cocos2d-iphone - Cocos2D 2.0 - 改变 CCSprite 的矩形/拉伸精灵

> ID：11108180
> 
> 赞同：0
> 
> 时间：2012-06-19T19:40:42.670
> 
> 标签：cocos2d-iphone

我已经创建了一个包含我将在课堂上使用的所有图像的图集。如果这是从图像创建的精灵，我会像这样创建它

```
mySprite = [CCSprite spriteWithFile:@"white.png" rect:frame]; 
```

“white.png”是一个 1x1 像素的图像，我正在拉伸它以覆盖整个 CCSprite 大小，由该 API 上的 rect:frame 定义。

但为了优化 I/O 和内存，我将 white.png 放在了图集中，我的想法是使用

```
mySprite = [CCSprite spriteWithSpriteFrameName:@"white.png"]; 
```

但这将创建一个 1x1 像素的精灵。所以，我的想法是创建一个类别来用这些行扩展 CCSprite

```
@implementation CCSprite (CCSprite_Resize)

-(void)resizeTo:(CGSize) theSize
{
    CGFloat newWidth = theSize.width;
    CGFloat newHeight = theSize.height;

    float startWidth = self.contentSize.width;
    float startHeight = self.contentSize.height;

    float newScaleX = newWidth/startWidth;
    float newScaleY = newHeight/startHeight;

    self.scaleX = newScaleX;
    self.scaleY = newScaleY;

} 
```

所以我可以这样做

```
mySprite = [CCSprite spriteWithSpriteFrameName:@"white.png"];
[mySprite resizeTo:frame.size]; 
```

并且 1x1 精灵将被拉伸以覆盖我想要的大小。

问题是这不起作用。

任何线索？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:10:19.187

让岸边你不是压倒一切的东西`- (CGAffineTransform)nodeToParentTransform`。我将 Box2d 物理与 cocos2d 一起使用，并提供了模板类 PhysicsSprite（CCSprite 的子类）覆盖了它，并且有一个错误：比例属性没有改变任何东西。我这样修复它：

```
- (CGAffineTransform)nodeToParentTransform
{
    b2Vec2 pos = body_->GetPosition();

    float x = pos.x * PTM_RATIO;
    float y = pos.y * PTM_RATIO;

    // Make matrix
    float radians = body_->GetAngle();
    float c = cosf(radians);
    float s = sinf(radians);

    if (!CGPointEqualToPoint(anchorPointInPoints_, CGPointZero))
    {
        x += c * -anchorPointInPoints_.x * scaleX_ + -s * -anchorPointInPoints_.y * scaleY_;
        y += s * -anchorPointInPoints_.x * scaleX_ + c * -anchorPointInPoints_.y * scaleY_;
    }

    // Rot, Translate Matrix
    transform_ = CGAffineTransformMake( c * scaleX_, s * scaleX_,
    -s * scaleY_, c * scaleY_,
    x, y );

    return transform_;
} 
```

原来，没有`scaleX_`和`scaleY_`成倍增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:05:45.273

在您的情况下，您似乎可以使用 CCLayerColor 创建单色图层。无需为此使用精灵。

关于您的问题 - 确保 frame.size 不为零（CGSizeZero）

# jquery - 我的滑块点击事件来制作动画？

> ID：11108183
> 
> 赞同：0
> 
> 时间：2012-06-19T19:40:55.120
> 
> 标签：jquery, events, click, jquery-animate, slide

此代码等待动画回调单击下一张或上一张图像。如何点击这个插件[http://slidesjs.com/](http://slidesjs.com/)不等待回调。非常感谢。（如果我的英语不好，我很抱歉这是我的第一篇文章）

```
$(document).ready(function(){

var current         =   0;
var next            =   0;
var image_width     =   $("#slide>div>img").width();
var next_position   =   image_width * 2;
var clicked         =   false;  

$("#slide").css('left','-'+image_width+'px');

$("#slide>div").css({'left':+image_width+'px','z-index':'0','display':'none'});
$("#slide>div").eq(0).css({'left':+image_width+'px','z-index':'5','display':'block'});
$("#thumbs>li").eq(0).attr('id', 'current');

$("#slide>div img").each(function(i){

$("#thumbs>li").eq(i).click(function(event){

event.preventDefault();

if(event.currentTarget.id != "current"){

if(!clicked){

clicked = true;

next = i;

$("#slide>div").eq(next).css({'left':+next_position+'px','z-index':'0','display':'block'});

$("#slide").animate({"left":"-="+image_width+"px"},3000,"easeInOutBack",function(){

$("#slide>div").eq(current).css({'left':+image_width+'px','z-index':'0','display':'none'}); 
$("#current").removeAttr("id");

$("#slide>div").eq(next).css({'left':+image_width+'px','z-index':'5','display':'block'});
$("#thumbs>li").eq(next).attr('id','current');

$("#slide").css('left','-500px');    

clicked = false;
current = next;

                   });
                }
            }
        });
    });
}); 
```

我的 HTML 代码

```
<div id="containner">
<div id="slide">
<div><img src="images/1.jpg" /></div>
<div><img src="images/2.jpg" /></div>
<div><img src="images/3.png" /></div>
<div><img src="images/4.jpg" /></div>
</div>

<ul id="thumbs">
<li><a href="#"><img src="images/1.jpg" /></a></li>
<li><a href="#"><img src="images/2.jpg" /></a></li>
<li><a href="#"><img src="images/3.png" /></a></li>
<li><a href="#"><img src="images/4.jpg" /></a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:28:29.537

我不太确定你在问什么，但考虑不要编写已经存在的代码。对于类似幻灯片的功能，我对[jQuery Tools Scrollable](http://jquerytools.org/demos/scrollable/index.html)有很好的体验。

# html - HTML 5 应用程序缓存 - 获取更新日期

> ID：11108186
> 
> 赞同：0
> 
> 时间：2012-06-19T19:41:12.343
> 
> 标签：html, application-cache

我们计划在我们的应用程序中使用`HTML 5`'s`Application cache`来存储静态内容和一些文档，如时间表。这个时间表每周都会更新。现在在我们的应用程序中，我们需要显示此时间表的*最后更新日期*。是否可以通过编程方式获取应用程序缓存中文件的创建日期或下载日期？或者有没有更好的方法（我们不想在服务器端保存任何信息）？你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T01:35:12.460

这种方法怎么样。使用常规的 AJAX`GET`并查看`Last-Modified`标题：

```
function getTimeStamp(url) {
    var xmlHttpReq = false;
    var self = this;
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    self.xmlHttpReq.open('GET', url, true);
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            log(self.xmlHttpReq.getResponseHeader("Last-Modified"));
        }
    }
    self.xmlHttpReq.send(null);
} 
```

我的[测试页面](http://www.boogdesign.com/examples/offline-timestamp/index.html)似乎可以正常工作，但为时已晚，我可能把它搞砸了。

# compression - 压缩算法魔术签名

> ID：11108188
> 
> 赞同：0
> 
> 时间：2012-06-19T19:41:23.823
> 
> 标签：compression

参考数据压缩算法的“魔术签名”是什么意思？例如：[http ://disktype.sourceforge.net/doc/ch03s15.html](http://disktype.sourceforge.net/doc/ch03s15.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:16:23.037

文件签名，通常是两个或几个前导字节，用于许多文件格式——不仅仅是压缩数据。他们在那里让软件被要求处理数据，以便能够检查他们是否得到了正确的输入。这样，例如，gzip 可以立即告诉它没有得到一个 gzip 文件（比如给它一个 bzip2 文件）。然后它可以立即停止并给出一个有用的错误消息，表明这不是一个 gzip 文件。与稍后检测问题并给出某种神秘消息相反，例如“无效的位长度序列”。

八字节 PNG 签名不仅用于识别 PNG 文件，还用于检测常见错误，例如无意中应用于二进制 PNG 文件的行尾转换。PNG 签名包含行尾序列，这些序列会被弄乱并使其不是 PNG 签名，从而提供文件损坏的早期指示，否则稍后会检测到，再次带有更神秘的消息。

请参阅此[维基百科条目](http://en.wikipedia.org/wiki/List_of_file_signatures)以获取良好的签名列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:46:19.427

这些是压缩流开头的字节，用于标识所使用的压缩器。例如，bzip2 将在开头有字符“BZ”（参见[此处](https://en.wikipedia.org/wiki/Bzip2)的文件格式部分），而 gzip 将有字节 1F 8B。有关其他文件类型的更多信息，请参阅[http://www.garykessler.net/library/file_sigs.html](http://www.garykessler.net/library/file_sigs.html)。

# ruby-on-rails-3 - Rails 设计多客户端应用程序

> ID：11108194
> 
> 赞同：0
> 
> 时间：2012-06-19T19:41:38.143
> 
> 标签：ruby-on-rails-3, multi-tenant

我需要一些参考资料来创建每个客户/公司都有自己的数据库并使用一些控制面板来管理他的参数的 Rails 应用程序。我使用了 setler gem，但我需要一些设计建议。伙计们，这样做的最佳做法是什么？

（分离数据库的决定是由它们存储的大量数据决定的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:27:14.023

看看这个：

[http://www.rollcallapp.com/blog](http://www.rollcallapp.com/blog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:50:41.067

多客户端也称为多租户。另请参阅此问题的答案：

[多租户 Rails 应用：不同技术的优缺点是什么？](https://stackoverflow.com/questions/7003024/multi-tenant-rails-application-what-are-the-pros-and-cons-of-different-techniqu)

# php - 获取请求实际来自何处的更好方法

> ID：11108195
> 
> 赞同：1
> 
> 时间：2012-06-19T19:41:38.490
> 
> 标签：php

我知道它`$_SERVER[REFERRER]`可用于检测请求的来源，但事实证明它可能会被愚弄，甚至浏览器也可能不会将其作为请求的一部分发送。

任何人都可以提出一种更好的方法来检测或更确切地说允许来自自己域的请求，以避免欺骗、DoS 等安全攻击吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:58:20.723

我可能是错的，但我认为您指的是[CSRF 攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)。我发现的第一个教程就是[这个](http://codeutopia.net/blog/2008/10/16/how-to-csrf-protect-all-your-forms/)。

正如@afuzzyllama 所指出的，DoS 包括发送比您的服务器/网络连接可以处理的更多的数据。在这种情况下，您的 PHP 脚本将无法再访问，因此您无法在 PHP 应用程序中实施 DoS 保护。这必须由您的网络管理员或托管公司完成。

# java - 分布式文本聚类框架

> ID：11108197
> 
> 赞同：0
> 
> 时间：2012-06-19T19:41:45.667
> 
> 标签：java, cluster-analysis, hazelcast, knn

我需要一个分布式文本聚类框架来支持包含一组完整文档的算法。像carrot2 [http://project.carrot2.org/](http://project.carrot2.org/)这样的应用程序在内存计算中处理一组文档，因此非常耗时且非常高效。如果像 lingo、STC、knn 等这种文本聚类算法可以在分布式环境中运行，它们会更快。是否有任何框架使用像 hazelcast [http://www.hazelcast.com/](http://www.hazelcast.com/)这样的开源工具，或者是否有任何更快速和性能效率更高的特定方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:21:33.257

很少有工具可以做到这一点，Mahout 就是其中之一。Mahout 支持 3 种机器学习算法，推荐、聚类和分类。**曼宁的行动**书中的 Mahout 很好地解释了这一点。请参阅有关[Mahout 和 Hadoop 分布式文件系统如何工作](https://krishnasblog.com/2012/06/29/implementing-a-recommender-engine-using-hadoop-and-mahout/)的用例的博客，该示例更侧重于推荐引擎，但它也可以应用于集群，如**mahout in action**第 7 章所述。作为这方面的先驱，我还编写了一个[组件架构](https://krishnasblog.com/2012/06/24/hadoop-and-mahout-in-data-mining/)，说明这些工具中的每一个如何组合在一起解决数据挖掘问题。

Mahout 将在独立模式下以及与 Hadoop 一起工作。使用其中任何一个的决定归结为需要挖掘的历史数据的大小。如果数据大小为 TB 和 PB 量级，则通常将 Mahout 与 Hadoop 结合使用。Weka 是另一个类似的开源项目。所有这些都属于称为机器学习框架的类别。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:52:00.473

[Apache Mahout](http://mahout.apache.org/)是您正在寻找的。

# restkit - restkit 和 RKManagedObjectSearchEngine

> ID：11108198
> 
> 赞同：0
> 
> 时间：2012-06-19T19:41:50.843
> 
> 标签：restkit

我正在寻找使用 RKManagedObjectSearchEngine 的示例代码。类可用，但没有测试用例，API 上没有可用的文档我已经在论坛上发布了这个问题，但没有支持:(

欢迎任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T01:29:09.263

RestKit 托管对象搜索引擎已经过大修并完全记录在案。请参阅：[https ://github.com/RestKit/RestKit/tree/development/Code/Search](https://github.com/RestKit/RestKit/tree/development/Code/Search)

# php - PHP：找不到包含文件

> ID：11108201
> 
> 赞同：0
> 
> 时间：2012-06-19T19:42:05.293
> 
> 标签：php, include-path

我正在处理一个奇怪的 PHP 问题。

在我的脚本中，我有以下内容：

```
$includeRoot = '/home/mydomain/include/';
include_once $includeRoot."table_names.inc";

echo $usersTbl; 
```

输出什么也不产生。$usersTbl 在 table_names.inc 中定义如下：

```
$usersTbl = 'users'; 
```

此代码在另一个脚本中运行良好。我尝试了以下方法：

将 include_once 更改为 require_once

问题似乎不是代码找不到文件。如果我执行以下操作：

```
echo (file_get_contents($includeRoot."table_names.inc")); 
```

它实际上回显了文件内容。我在这里没有看到什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:48:59.357

为了帮助调试问题，请尝试以下操作：

```
if( file_exists( $includeRoot . "table_names.inc" ) ) {
    die( "Include file exists!" ) ;
} else {
    die( "Include file does not exist!" ) ;
} 
```

这至少会告诉您文件和文件路径是否实际存在。如果该文件确实存在，那么问题可能出在您的实际包含文件中。如果它不存在，请仔细检查您的路径。

您可能还想确保错误报告完全打开并转储到屏幕上：

```
error_reporting(E_ALL);
ini_set('display_errors','On'); 
```

# javascript - 这是多少元素？

> ID：11108202
> 
> 赞同：3
> 
> 时间：2012-06-19T19:42:07.633
> 
> 标签：javascript, jquery

我怎么知道元素的数量？（使用 Javascript 或 jQuery）假设我有一个带有多个 LI 的 UL，我怎么知道点击的 LI 是第 4 个还是第 6 个？

```
$('li').click(function(){
    nth = $(this).nth();
    alert(nth);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T19:46:44.210

[`.index`](http://api.jquery.com/index/)您可以为此使用 jQuery 。

```
​$("li").click(function() {
    var nth = $("ul li").index($(this));
    alert(nth);
});​ 
```

[**活生生的例子**](http://jsfiddle.net/kvzLC/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:46:37.100

```
$('li').click(function(){
    alert($(this).index());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:45:33.307

您可以使用索引方法：

```
var nth = $(this).index()+1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:44:08.537

你可以试试`nth = $(this).prevAll().count() + 1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T19:47:47.610

我做类似的事情

```
$('li').each(function (i) {
  $(this).data("pos", i);
}).click(function() {
  var nth = $(this).data("pos");
  alert(nth);
}); 
```

总是，我最终需要这个职位来做其他事情，所以我把它留了下来。

# java - 如何使用字符串调用方法

> ID：11108205
> 
> 赞同：3
> 
> 时间：2012-06-19T19:42:11.467
> 
> 标签：java, string, oop

我正在尝试使用字符串来调用方法？

假设我有一个名为的类`Kyle`，它有 3 个方法：

```
public void Test();
public void Ronaldo();
public void MakeThis(); 
```

我有一个字符串，其中包含我需要调用的方法的名称：

```
String text = "Test()"; 
```

现在我需要调用名称在此字符串中的方法：

```
Kyle k = new Kyle(); 
```

`k.text;`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:43:50.860

您需要使用 java`Reflection`来执行此操作。

请参阅：[Class.getMethod()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)

使用您的具体示例：

```
String text = "Test";
Kyle k = new Kyle();
Class clas = k.getClass();

// you'll need to handle exceptions from these methods, or throw them:
Method method = clas.getMethod(text, null);
method.invoke(k, null); 
```

`getMethod()`这没有and所需的异常处理`Method.invoke()`，并且仅涵盖调用不带参数的方法的情况。

也可以看看：

*   [方法文档](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html)
*   [类文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)
*   [这篇带有示例的反思文章](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:51:48.957

反射是 Java 中一个有趣的特性。它允许基本的内省。这里使用`k.getClass().getMethod()`

例如

```
String text = "Test";
Kyle k = new Kyle();
Method testMethod = k.getClass().getMethod(text, new Class<?>[] { 
    /*List parameter classes here eg. String.class , Kyle.class or leave empty for none*/} 
Object returnedValue = testMethod.invoke(k, new Object[] { 
    /* Parameters go here or empty for none*/}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:43:20.283

你需要使用一种叫做[**Reflection**](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:49:14.057

尝试反射。

```
import java.lang.reflect.Method;
class Kyle {
    public void Test(){System.out.println("invoking Test()");}
    public void Ronaldo(){System.out.println("invoking Ronaldo()");}
    public void MakeThis(){System.out.println("invoking MakeThis()");}

    public static void main(String[] args) throws Exception{
        Kyle k=new Kyle();
        String text = "Test";
        Class c=k.getClass();
        Method m=c.getDeclaredMethod(text);
        m.invoke(k);
    }
} 
```

输出

`invoking Test()`

# r - 在 quantmod::chart_Series() 中使用 xlim/ylim 或 xrange/yrange 覆盖 y-scale 和 x-scale - 不可能？

> ID：11108206
> 
> 赞同：5
> 
> 时间：2012-06-19T19:42:16.243
> 
> 标签：r, finance, quantmod

我正在尝试在 quantmod::chart_Series() 之上绘制一些支撑/阻力线。问题是有趣的支撑/阻力线在当前时间的系列数据范围之外（低于或高于）（我还想将图表向右扩展一点，超出数据的最后一个时间戳）。

查看 quantmod::chart_Series() 的源代码，我看不到指定 ylim/xlim 的方法，或者在“过去”中使用 quantmod::chartSeries 使用 yrange 覆盖 y-scale 是可能的。在这里评论[https://r-forge.r-project.org/scm/viewvc.php?view=rev&root=quantmod&revision=520](https://r-forge.r-project.org/scm/viewvc.php?view=rev&root=quantmod&revision=520)也证实了我的预感......

我的诊断是否正确，或者是否有一种方法可以在 quantmod::chart_Series 中启用 y 比例覆盖？任何想法如何做我想要的高度赞赏。

谢谢。

最好的，萨摩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T20:46:56.273

笔记的帮助页面`chart_Series()`——三遍！——它是实验性的，所以大概最终的抛光版本将有很好的句柄来设置这些限制。

在那之前，这里有一个技巧（？），它可以让你设置限制**，并且**可以教你一些关于如何`chart_Series()`工作的东西（即通过创建一个环境/类的闭包`"replot"`，它存储了创建图表所需的所有信息）。

```
## Create an example plot
getSymbols("YHOO")
myChob <- chart_Series(YHOO)

## Plot it, with its default xlim and ylim settings
myChob

## Get current xlim and ylim settings for `myChob` (chob = chart object)
myxlim <- myChob$get_xlim()
myylim <- myChob$get_ylim()

## Alter those limits
myxlim <- c(1, 2000)
myylim[[2]] <- structure(c(0, 50), fixed=TRUE)

## Use the setter functions in the myChob environment to set the new limits.
## (Try `myChob$set_ylim` and `ls(myChob$Env)` to see how/where these are set.)
myChob$set_ylim(myylim)
myChob$set_xlim(myxlim)

## Plot the revised graph
myChob 
```

# c++ - 使用模板的 C++ 链表

> ID：11108207
> 
> 赞同：0
> 
> 时间：2012-06-19T19:42:25.977
> 
> 标签：c++, templates, generics

我想使用模板在 C++ 中制作我自己的链表实现。但是，我遇到了几个编译器错误。这是代码：

```
template <class T>
class Node{
T datum;
Node _next = NULL;
 public:
 Node(T datum)
{
    this->datum = datum;
}
 void setNext(Node next)
 {
     _next = next;
 }
 Node getNext()
 {
     return _next;
 }
 T getDatum()
 {
     return datum;
 }          
};
template <class T>
class LinkedList{
Node<T> *node;
Node<T> *currPtr;
Node<T> *next_pointer;
int size;
public:
LinkedList(T datum)
  {
      node = new Node<T>(datum);
      currPtr = node;  //assignment between two pointers.
      size = 1;
  }
void add(T datum)
 {
   Node<T> *temp = new Node<T>(datum);
   (*currPtr).setNext((*temp));
   currPtr = temp;       
   size++;
 }
T next()
{
   next_pointer = node;
   T data = (*next_pointer).getDatum();
   next_pointer = (*next_pointer).getNext();
   return data;
}
int getSize()
{
   return size;
}   
}; 
```

当我尝试实例化此类时，出现以下错误：

```
LinkedList.cpp: In instantiation of `Node<int>':
LinkedList.cpp:35:   instantiated from `LinkedList<T>::LinkedList(T) [with T = int]'
LinkedList.cpp:60:   instantiated from here
LinkedList.cpp:7: error: `Node<T>::_next' has incomplete type
LinkedList.cpp:5: error: declaration of `class Node<int>'
make[2]: *** [build/Debug/Cygwin-Windows/LinkedList.o] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2 
```

我正在使用 NetBeans IDE。有人可以给我一些改进它的建议吗？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:47:50.060

除了语法错误：

```
class Node{
T datum;
Node _next = NULL;
//.... 
```

您不能拥有与成员相同类型的成员。您可以使用指针：

```
template <class T>
class Node{
T datum;
Node<T>* _next; 
```

并将其设置在构造函数中（因为`=NULL`在那里不合法）。

相关：[为什么一个类允许有一个自己的静态成员，而不是一个非静态成员？](https://stackoverflow.com/questions/8517609/why-is-a-class-allowed-to-have-a-static-member-of-itself-but-not-a-non-static-m/8517644#8517644)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:48:07.423

您的`Node`类应该包含**指向**next的指针`Node`，而不是`Node`直接的 a。在这里，您有一个编译器无法处理的递归类型。

另一个错误是你不能像这样初始化一个成员。您必须在构造函数中执行此操作。

因此，替换`Node _next = NULL;`并`Node *_next;`初始化构造函数中的`_next`指针`nullptr`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:48:28.640

它可能只是这一行：

```
Node _next = NULL; 
```

你真的需要它是一个指针（`Node<T>* _next`）。如果一个类包含其自己类型的实例，那么该实例将具有其自己的该类型实例，*依此类推*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:51:49.310

就像你在课堂上做`Node<T> *node;`的`LinkedList`一样，你也需要在`Node`课堂上做同样的事情

```
template <class T>
class Node{
    T datum;
    Node<T> *_next;//template parameter
                   //also, need to make this a pointer and initialized in constructor
public:

//...
    void setNext(Node<T> next) //template parameter
    {
        _next = next;
    }
    Node<T> getNext() //template parameter
    {
        return _next;
    }
//...
}; 
```

# gwt - 具有远程 Windows 身份验证的 GWT RPC Java 服务器

> ID：11108210
> 
> 赞同：0
> 
> 时间：2012-06-19T19:42:36.333
> 
> 标签：gwt, authentication, kerberos

我的 GWT 客户端 - 服务器应用程序有以下设置：

GWT 客户端 -(RPC)- 服务器 - MSSQL 数据库。

客户端在各种平台和设备（Web 应用程序、手机等）上运行。Java 服务器（和 Web 应用程序文件）托管在 Jetty 上。MSSQL 数据库在不同域的不同服务器上运行。

我需要找到一种方法让用户在 MSSQL DB 的域上进行身份验证，之后我可以允许客户端访问其余的服务器服务。

我可以将加密的用户名和密码对传递给服务器，但我该如何从那里继续？我今天花了很多时间弄清楚这一点，但我越来越困惑了。我确实设法使用服务器上的 Kerberos 检查本地身份验证，但我需要远程验证到另一个域。在我试图避免的远程域上没有为它设置服务甚至可能吗？

# ios - iOS 上的 CSS3 动画缓慢

> ID：11108214
> 
> 赞同：1
> 
> 时间：2012-06-19T19:42:53.603
> 
> 标签：ios, html, css, webview, css-animations

CSS3 动画一直是移动 safari 中的一个持续问题，我四处寻找解决方案，但找不到适合我情况的任何东西。

这是我的设置：我有三个页面，每个页面都动态加载到 DOM 中，页面显示为淡入淡出（使用 css3 动画不透明度）。淡入淡出效果在模拟器和设备中效果很好

现在，在其中一个页面上，我添加了另一个 CSS3 动画，该动画在单击按钮时触发。我基本上有一个 css 类，它添加了 -webkit-animation-name: anim; 到元素。动画效果很好，但是从那个页面离开到另一个突然的功能是非常不稳定/缓慢/糟糕的淡入淡出动画。

我什至不必通过单击按钮来启动动画，只需将所有 css 样式放入会导致页面褪色变得非常缓慢。如果我删除所有与动画相关的样式，淡入淡出将再次顺利工作......

我已经尝试了所有常用的方法，添加了 translate3d(0,0,0)、-webkit-perspective 或 -webkit-backface-visibility。全部没有效果，当页面上有另一个动画的css时，淡入淡出动画变得非常缓慢！

关于为什么会这样的任何想法？

多谢你们！高度赞赏帮助！

# facebook - 应用内对象只能通过 opengraph 操作发布吗？

> ID：11108218
> 
> 赞同：0
> 
> 时间：2012-06-19T19:43:02.590
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-opengraph

我在 facebook 应用程序中有一个页面，它是一个 opengraph 对象，当我从我的应用程序向 facebook 发布对该对象的自定义操作时，它会正确发布，但是当我使用 facebook 社交插件（例如喜欢和喜欢该对象）时，它是没有作为该对象发布，而是我的 facebook 应用程序的对象发布在时间轴上......所以我的问题是只能通过 opengraph 操作发布应用内对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:21:42.197

不，一旦 Facebook linter 抓取您的页面以获取数据，将创建新的 OpenGraph 对象或更新现有对象的数据，这将在以下几种情况下发生：

*   OpenGraph 动作引用对象已发布
*   单击特定 URL 的“赞”按钮
*   链接到您在 Facebook 上共享的页面（以直接方式或通过使用等的任何[对话框）。](https://developers.facebook.com/docs/reference/dialogs/)`link`

您的 Like 按钮可能不是链接到您的真实应用程序 URL，而是链接到 Facebook 内的 URL，从而导致 Facebook 在 Like 按钮单击和 OpenGraph 操作发布时解析不同的页面。

我假设您的点赞按钮指向应用程序选项卡画布或应用程序页面，因为 Facebook 正确解析了指向常规应用程序画布的链接。

**更新：**
似乎 OpenGraph 标签的问题与您的应用程序返回`404`（**未找到**状态代码）为您提供的 URL 并且仅返回 HTTP（但不是 HTTPS）请求的数据这一事实有关。如果返回错误代码，则缓存数据将被保留，并且在返回正确的状态代码之前不会更新。

**更新 2：**
当您提供真实的 URL 时，很明显您获得了应用程序的详细信息，而不是实际页面，因为所有未经授权的用户都重定向，这导致 Facebook linter 无法丰富真实的 OpenGraph 数据。

顺便说一句，您应该知道**每个 OpenGraph 对象都必须具有可公开访问的 URL**。

# windows-phone-7 - 看起来像气泡弹出窗口的 Windows Phone MessageBox

> ID：11108221
> 
> 赞同：1
> 
> 时间：2012-06-19T19:43:23.027
> 
> 标签：windows-phone-7, windows-phone

我需要一个像控件一样的消息框，它看起来像一个冒泡的弹出窗口。就像电话中的语音气泡消息一样。

有人可以推荐这样的控制吗？如何在 Windows Phone 中实现这种效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:18:59.733

查看 Coding4Fun windows phone 工具包。他们有聊天气泡控件，您可以轻松地将其添加到您的项目中。它们还具有提示控件，可将您指定的事件通知用户。coding4fun.codeplex.com

# wpf - 启动 citrix 应用程序时仅出现灰屏

> ID：11108222
> 
> 赞同：2
> 
> 时间：2012-06-19T19:43:34.697
> 
> 标签：wpf, citrix

最近我们在 citrix 上安装了一个 .net WPF 应用程序。当我使用 RES powerfuse 从 citrix 启动它时，我只看到一个灰色的屏幕，并且屏幕上没有呈现任何控件。

该应用程序已打开，可以看到主窗口，但其中的所有内容都是灰色的。鼠标指针也消失在应用程序后面。

有趣的是，当运营团队的人启动应用程序时，它运行良好。但不适用于普通用户。这让我怀疑这可能与权限有关，但我们已经向所有用户授予了打开程序的权限，这就是为什么图标首先出现在 citrix 中的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:32:30.657

您在哪个服务器上运行应用程序？我记得我们在某些版本的 Windows Server (+ XenApp) 上遇到了 WPF 呈现错误，该应用程序只能为管理员正确呈现。这是一个 .NET 错误 - 与 Citrix 无关。据我所知，WPF 渲染引擎试图访问一些普通用户无法访问的系统资源。我相信我们只在 2003 年的服务器上看到过这种情况。

只是做了一些进一步的挖掘，我认为这是问题所在：

[http://support.microsoft.com/kb/955692](http://support.microsoft.com/kb/955692)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T05:56:05.130

对于快速 n 临时分辨率：检查您的本地计算机分辨率和 Citrix 桌面/应用程序分辨率。

平衡两者它会起作用。例如：**1024/762**是正确的分辨率。测试：做最大化 n 最小化屏幕你会看到变化。

# nhibernate - 使用 nhibernate 投影查询仅过滤负值

> ID：11108226
> 
> 赞同：0
> 
> 时间：2012-06-19T19:43:44.463
> 
> 标签：nhibernate, nhibernate-criteria, nhibernate-projections

我正在尝试使用 nhibernate 投影查询仅过滤负值。下面是我的代码

```
SearchTemplate RefundTemplate = new SearchTemplate();
            RefundTemplate.Criteria = DetachedCriteria.For(typeof(AirBilling), "Ab");
            RefundTemplate.Criteria.Add(NHibernate.Criterion.Expression.Eq("PaymentType", "CK"));
            RefundTemplate.Criteria.Add(NHibernate.Criterion.Restrictions.Lt("Gross",0)); 
```

基本上，我想从 AirBilling 表中获取所有具有 PaymentType CK 且总值小于零的记录。但不知何故，代码不起作用。它不会抛出任何错误，但它根本不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:46:31.210

这可能是因为您为实体提供了别名（“Ab”），因此当您引用属性时，您需要在它们前面加上别名，例如：Expression.Eq("Ab.PaymentType", "CK")

试试这个：

```
SearchTemplate RefundTemplate = new SearchTemplate();
RefundTemplate.Criteria = DetachedCriteria.For(typeof(AirBilling), "Ab");
RefundTemplate.Criteria.Add(NHibernate.Criterion.Expression.Eq("Ab.PaymentType", "CK"));
RefundTemplate.Criteria.Add(NHibernate.Criterion.Restrictions.Lt("Ab.Gross",0)); 
```

# kanban - 使用看板的前提条件

> ID：11108227
> 
> 赞同：4
> 
> 时间：2012-06-19T19:43:48.423
> 
> 标签：kanban

看板可以用于什么样的软件开发（项目），实现它的要求是什么？我读了很多关于看板的文章，以及它有多棒。但是现在我必须写一篇关于它的论文，重点关注看板的要求，特别是看板不适合什么样的项目。我还想不通。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T03:59:58.993

KarlM 给出了很好的概述。

我认为看板可以在任何项目中使用，因为它采用您现有的流程并将其可视化，引入 WIP（多任务）限制，并使用拉动来最大化流程并最小化交付周期。我的团队最近迁移到 Scrum，到目前为止过渡非常顺利。

看板特别适用于标准迭代没有意义的情况。

例如，您可能没有频繁发布。也许您想将您的一个或多个计划、演示、回顾或发布计划解耦。

很好的例子：

*   维修项目。即使您可能希望召开为期 2 周（或其他任何时间）的会议来讨论优先级、回顾等，但您可能不会每 2 周进行一次演示或发布，而且您也不太可能致力于无论如何，在接下来的 2 周内一切都会发生。像这样的情况是如此动态，以至于随着新的反馈来自客户，每天的优先事项都会发生变化。在这种情况下，Scrum 或其他迭代过程没有意义。
*   确实需要比您的迭代长度更长的故事。与 Scrum 一样，看板在小故事中蓬勃发展（更好的流程、松弛等），但与 Scrum 不同的是，它至少在确实需要时允许大故事。
*   发展速度极快。持续部署。迭代不再有意义，因为也许您正在快速响应更改照明，并且可能一天发布多次！

请参阅 code.flickr.com：

> Flickr 上次部署是 4 小时前，包括 2 人进行的 8 次更改。上周有 19 人部署了 588 次更改的 85 次。

你认为 Flickr 是在进行 2 周的迭代，还是 1 天的迭代？我对此表示怀疑。看起来他们处于超高速动态流动模式……也许是看板，但绝对看起来他们在精益保护伞中。（看板属于精益思想的范畴，持续部署因 Eric Ries 去年的著作《精益创业》而流行起来。）

它可能不适合以下环境：

*   组织文化无法摆脱预先计划、过度工作/承诺、推动而不是拉动、固定所有时间表、范围和成本等。看板将开始激发组织的持续改进，许多人只是反对除了他们所知道和喜爱的传统的过度工程、过度文档化、孤立、非精益、非敏捷方法（即瀑布式）之外的任何东西。一些政府合同也可能属于这一类，尽管我相信至少国防部现在正试图在其项目中推进敏捷。但是有些公司，如果你告诉他们他们需要做 LESS（即，限制正在进行的工作、有更清晰的愿景、更快地完成更少的工作，但因此总体上完成的工作更多），就会心脏病发作。许多（大多数？）公司都沉迷于过度工作，并认为 SLACK（这是基本的精益原则）是一个 4 个字母的词。不幸的是，排队论和约束论很难被一些人理解。:) 所以看板可能不适合那些地方。;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T06:48:23.727

要求是，项目中的每个人都同意使用这些原则和实践：

```
Principles

1\. Start with what you do now
2\. Agree to pursue incremental, evolutionary change
3\. Initially, respect current processes, roles, responsibilities and job titles
4\. Encourage acts of leaderships at all levels

Practices
1\. Visualise what you do / knowledge discovery
2\. Limit work in progress
3\. Measure and manage flow
4\. Make policies explicit
5\. Develop feedback mechanisms
6\. Improve collaboratively using models and the scientific method 
```

如果他们不同意这样做，他们就不能使用看板。很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:23:31.960

看板是一种可视化和改进现有流程的工具。如果有一个场景不起作用，那么该场景可能具有两个属性中的一个或两个。

1) 没有现有的流程，或者现有的流程是如此灾难，以至于它根本无法工作和/或以混乱的方式不断变化。

2) 没有改善的意愿或机会。

缺少第二个并不是交易破坏者。看板仍然可以帮助进行沟通和协调，并且提高清晰度可能会导致提高改进或帮助建立授权改进实验所需的信任的愿望。这将是一个低成熟度看板实施的例子，它会导致更高水平的团队成熟度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T23:09:17.240

看板是一种简单的流程工具。应用得当，它适用于任何项目，而不仅仅是软件 - 任何项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T13:11:13.577

在我看来，看板可以在任何类型的组织和任何行业中实施。

但...

1.  团队必须为改变做好准备
2.  变化必须具有进化特征
3.  该组织必须专注于合作，而不是执行日常工作。

# php - 使用多个值的内连接查询

> ID：11108230
> 
> 赞同：2
> 
> 时间：2012-06-19T19:43:51.887
> 
> 标签：php, mysql, sql

我的表结构如图所示：

```
table:App
|AppID|AppName|AppType|
   1    test     new

table:AppRelease
|AppReleaseID|AppID|ReleaseDate|ReleaseVersion|
   1            1   2012-06-20        2.2
   2            1   2012-06-19        2.3 
```

我写了一个查询，如下所示：

```
SELECT A.*,B.ReleaseDate,B.ReleaseVersion 
FROM App as A 
  LEFT JOIN AppRelease as B ON A.AppID=B.AppID 
```

此查询适用于 AppRelease 表中的单个值，但 AppRelease 表中的多个值我想获得最后一个附加值。是否可以在单个查询中进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:32:18.197

```
SELECT aa.*, bb.AppReleaseID, bb.ReleaseDate
FROM App aa LEFT JOIN (
            SELECT a.AppID, a.AppReleaseID, a.ReleaseDate
            FROM AppRelease a INNER JOIN (
                        SELECT AppID, MAX(ReleaseDate) mx FROM AppRelease 
                        GROUP BY AppID
                    ) b ON a.AppID = b.AppID AND a.ReleaseDate = b.mx
        ) bb ON bb.AppID = aa.AppID 
```

小提琴：[http ://sqlfiddle.com/#!2/befa2/3](http://sqlfiddle.com/#!2/befa2/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:58:41.200

要在单个查询中实现这一点，您需要首先在子查询中获取最大值：

```
SELECT A.*,B.ReleaseDate,B.ReleaseVersion 
FROM App as A 
    LEFT JOIN AppRelease as B ON A.AppID = B.AppI
WHERE B.ReleaseDate = (
    SELECT MAX(ReleaseDate)
    FROM AppRelease
    WHERE AppID = A.AppID GROUP BY AppID
    LIMIT 0, 1
) OR B.ReleaseDate IS NULL; 
```

我认为还有另一种方法可以将子查询用作连接表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:05:27.597

使用 JOIN 我认为您能做的最好的事情就是从 AppRelease 中选择最大值。

```
SELECT A.*,MAX(B.ReleaseDate),MAX(B.ReleaseVersion)
FROM App as A
LEFT JOIN AppRelease as B ON A.AppID=B.AppID
GROUP BY A.AppID 
```

如果您想从语义上获取最后添加的值，您可能最好使用子查询，例如

```
SELECT A.*,
(SELECT B.ReleaseDate FROM AppRelease as B
WHERE B.AppID=A.AppID ORDER BY B.AppReleaseID DESC LIMIT 1)
as ReleaseDate,
(SELECT B.ReleaseVersion FROM AppRelease as
B WHERE B.AppID=A.AppID ORDER BY B.AppReleaseID DESC LIMIT 1)
as ReleaseVersion
FROM App as A 
```

# asp.net - ASMX Web Service 仅在从浏览器单击调用时显示请求

> ID：11108231
> 
> 赞同：0
> 
> 时间：2012-06-19T19:43:55.743
> 
> 标签：asp.net, iis, asmx

我有 web 服务（在 .net 4.0 中开发）并在本地 IIS 7.0 中发布当我转到浏览器时，我可以看到 asmx 调用操作。传递值并单击“调用”时，我只获得请求的 XML，但传递的值为 0，如下所示：

```
<H_Receptores xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://mywebsite.com/app">
<UserID>0</UserID>
<ReceptorID>0</ReceptorID>
</H_Receptores> 
```

这应该是值 1 和 2（我在 Web 服务表单中输入的值）。

我应该怎么做，或者我在做什么？

顺便说一句，在 Visual Studio 2010 中，如果我右键单击并选择浏览器上的视图，它会在端口：41089 上打开一个本地开发临时 IIS，并且操作非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:50:45.183

首先，如果您使用的是 .NET 4.0，为什么要创建 ASMX 服务。ASMX 是一项遗留技术，仅支持向后兼容。所有新的 SOAP Web 服务开发都应该使用 WCF。

其次，不用担心它在浏览器中是如何工作的！您不会从“帮助页面”调用应用程序，是吗？为了测试您的服务，请创建某种形式的客户端来使用该服务。一个示例是创建一个小型控制台应用程序，使用“添加服务引用”来引用服务，然后让控制台应用程序调用该服务。

顺便说一句，我发现为此目的使用单元测试项目更方便，因为我可以创建一组测试并一次执行它们。

# c++ - 为什么我的 OpenGL Radar 实现没有在屏幕上呈现？

> ID：11108236
> 
> 赞同：0
> 
> 时间：2012-06-19T19:44:19.563
> 
> 标签：c++, opengl

我想使用 openGL 为我的 3D 游戏实现雷达。我一直在尝试以多种方式完成它，但没有一个被批准是正确的。这是我的代码片段如下：

```
int xi, yi;
GLfloat x,z;
glPushMatrix();
{
    glTranslatef(-0.8f, 0.2f, -3.0f);

    glColor3f(0.0f, 0.0f, 1.0f);
    x = playerTank->givePosX();
    z = playerTank->givePosZ();
    xi = (int)((x + 1000) / 20) + 5;
    yi = (int)(((z + 1000) / 20) + screenHeight - 105);
    glPushMatrix();
    {
        glScalef(xi,yi,1.0f);
        glBegin(GL_QUADS);
        glVertex2i(xi-5, yi-5);
        glVertex2i(xi+5, yi-5);
        glVertex2i(xi+5, yi+5);
        glVertex2i(xi-5, yi+5);
        glEnd();
    }
    glPopMatrix();

    glColor3f(1.0f, 0.0f, 0.0f);
    glPushMatrix();
    {
        glScalef(xi,yi,1.0f);
        for (int i = 0; i < tanks.size(); i++)
        {
            x = tanks[i]->givePosX();
            z = tanks[i]->givePosZ();
            xi = (int)((x + 1000) / 20) + 5;
            yi = (int)(((z + 1000) / 20) + screenHeight - 105);
            if (xi > 0 && xi < 110 && yi > (screenHeight - 110) && yi < screenHeight)
            {
                if (tanks[i] != playerTank)
                {
                    glBegin(GL_TRIANGLES);
                    glVertex2i(xi, yi-5);
                    glVertex2i(xi+5, yi+5);
                    glVertex2i(xi-5, yi+5);
                    glEnd();
                }
            }
        }
    }
    glPopMatrix();

    glColor3f(0.0f, 1.0f, 0.0f);
    glPushMatrix();
    {
        glScalef(xi,yi,1.0f);
        for (int i = 0; i < obstacles.size(); i++)
        {
            x = obstacles[i]->givePosX();
            z = obstacles[i]->givePosZ();
            xi = (int)((x + 1000) / 20) + 5;
            yi = (int)(((z + 1000) / 20) + screenHeight - 105);

            glBegin(GL_LINE_LOOP);
            glVertex2i(xi-3, yi-3);
            glVertex2i(xi+3, yi-3);
            glVertex2i(xi+3, yi+3);
            glVertex2i(xi-3, yi+3);
            glEnd();
        }
    }
    glPopMatrix();
}
glPopMatrix(); 
```

为什么屏幕上什么都没有出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:30:33.460

一些事情要尝试：

1.  确保您已正确设置渲染器 - 您为设置场景所做的调用是什么？看看[关于 nehe](http://nehe.gamedev.net/)的一些课程以获得一些提示。
2.  制作一个屏幕大小的简单正方形。您正在按照顶部的这些线（蓝色四边形对吗？）做一些事情，但要确保它居中 - 看起来您可能会将它向上和向右推 1000 个单位。
3.  Check you're winding the correct way. Looks like you are from my somewhat rusty OGL memories.
4.  Try translating in different directions. Looks to me like you might be translating the wrong way with your first `translatef`.

# c++ - 将文本和行添加到文件的开头 (C++)

> ID：11108238
> 
> 赞同：6
> 
> 时间：2012-06-19T19:44:31.387
> 
> 标签：c++, cross-platform

我希望能够在文件的开头添加行。

我正在编写的这个程序将从用户那里获取信息，并准备将其写入文件。那么，该文件将是一个已经生成的差异文件，并且添加到开头的是描述符和标签，使其与 Debian 的 DEP3 补丁标记系统兼容。

这需要是跨平台的，所以它需要在 GNU C++ (Linux) 和 Microsoft C++（以及任何 Mac 附带的）中工作

（其他地方的相关主题：[http](http://ubuntuforums.org/showthread.php?t=2006605) ://ubuntuforums.org/showthread.php?t=2006605 ）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T19:52:10.183

请参阅[trent.josephsen 的](http://ubuntuforums.org/showpost.php?p=12039232&postcount=2)回答：

> 您不能在磁盘上文件的开头插入数据。您需要将整个文件读入内存，在开头插入数据，然后将整个内容写回磁盘。（这不是唯一的方法，但鉴于文件不是太大，它可能是最好的。）

您可以通过使用[`std::ifstream`](http://www.cplusplus.com/reference/iostream/ifstream/)输入文件和[`std::ofstream`](http://www.cplusplus.com/reference/iostream/ofstream/)输出文件来实现这一点。之后，您可以使用[`std::remove`](http://www.cplusplus.com/reference/clibrary/cstdio/remove/)并[`std::rename`](http://www.cplusplus.com/reference/clibrary/cstdio/rename/)替换旧文件：

```
#include <iostream>
#include <fstream>
#include <string>
#include <cstdio>

int main(){
    std::ofstream outputFile("outputFileName");
    std::ifstream inputFile("inputFileName");

    outputFile << "Write your lines...\n";
    outputFile << "just as you would do to std::cout ...\n";

    outputFile << inputFile.rdbuf();

    inputFile.close();
    outputFile.close();

    std::remove("inputFileName");
    std::rename("outputFileName","inputFileName");

    return 0;
} 
```

另一种不使用`remove`或`rename`使用 a 的方法`std::stringstream`：

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>

int main(){
    const std::string fileName = "outputFileName";
    std::fstream processedFile(fileName.c_str());
    std::stringstream fileData;

    fileData << "First line\n";
    fileData << "second line\n";

    fileData << processedFile.rdbuf();
    processedFile.close();

    processedFile.open(fileName.c_str(), std::fstream::out | std::fstream::trunc); 
    processedFile << fileData.rdbuf();

    return 0;
} 
```

# java - Java JFileChooser 无限循环

> ID：11108239
> 
> 赞同：0
> 
> 时间：2012-06-19T19:44:32.667
> 
> 标签：java, loops, libgdx, infinite-loop, jfilechooser

当我关闭我的`JFileChooser`对话框时，它会再次打开。我正在使用 libgdx 更新来检查输入。

这是输入代码...

```
if(!SaveDialog.open) {
    if(input.isKeyPressed(Input.Keys.S)) {
        SaveDialog.Save(pixmap);
    }
} 
```

如果我按`S`得很快，对话框只会打开一次，但如果我按 2 秒，就会有无数个（我认为）`JFileChooser`对话框。

这是我的代码...

```
public class SaveDialog {
    private static boolean inited = false;
    private static JFileChooser fc;
    public static boolean open = false;

    public static void Init() {
        fc = new JFileChooser();

        fc.setFileFilter(new FileFilter() {
            public String getDescription() {
                return ".png";
            }
            public boolean accept(File f) {
                return f.getName().endsWith(".png");
            }
        });

        inited = true;
    }

    public static void Save(Pixmap pixmap) {
        open = true;

        if(!inited) {
            Init();
        }

        fc.showSaveDialog(null);

        byte[] data;
        try {
            data = PNG.toPNG(pixmap);
            FileHandle fh = new FileHandle(fc.getSelectedFile() + ".png");
            fh.writeBytes(data, false);
            open = false;
        }
        catch (IOException e) {
            open = false;
            e.printStackTrace();
        }
    }
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:22:06.737

isKeyPressed(Input.Keys.S) 确定*当前*是否按下 S 键并没有帮助。

如果您在第二次调用 isKeyPressed() 之前没有给 libgdx 再次轮询输入的机会，那么我怀疑它仍然会认为它被按下了。

如果这不是问题，请尝试记录键的状态，并仅在将状态从未按下变为按下时打开对话框。

例如：

```
if(!SaveDialog.open) {
    boolean isSPressed = input.isKeyPressed(Input.Keys.S);
    if(!wasSpressed && isSPressed) {
        SaveDialog.Save(pixmap);
    }
    wasSPressed = isSPressed;
} 
```

# php - .htaccess mod_rewrite - 保留文件夹名称

> ID：11108240
> 
> 赞同：1
> 
> 时间：2012-06-19T19:44:35.147
> 
> 标签：php, .htaccess, mod-rewrite

我正在使用 mod_rewrite 重写用户配置文件的 url，如下所示：domain.com/users/JohnSmith。

我在想也许跳过用户文件夹并简单地把它写成：domain.com/JohnSmith 会更整洁。

我的问题：如何做到这一点并保留我的系统和站点文件夹？如果我查找 domain.com/browsersupport，profile.php 页面将检查名称并在数据库中查找它，并且由于没有用户具有该名称，因此不会显示任何页面。

我知道它可以通过 PHP 代码中的一些 if 语句来修复。此外，需要保留文件夹名称，以便用户无法注册这些名称。但是对于配置文件查找 - 有没有更简洁的方法？也许要排除 .htaccess 文件中的系统文件夹，以便 profile.php 不会去寻找那个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:49:33.433

这就是这两个条件发挥作用的地方：

```
 # if the request does NOT map to a file
  RewriteCOnd %{REQUEST_FILENAME} !-f
  # and the request does NOT map to a directory
  RewriteCOnd %{REQUEST_FILENAME} !-d
  # only THEN use this rewriterule
  RewriteRulle ....etc... 
```

如果您同时拥有*“*动态”页面和动态用户，则 RewriteRule 应该以检查该名称的页面是否存在的过程结束，并且只有在不存在时才为用户页面提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:48:44.040

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule #insert user rewrite rule here 
```

如果该给定名称的文件夹或文件不存在，这只会应用重写规则（您的问题似乎暗示`browsersupport`文档根目录中确实存在类似的内容）。

是的，您必须努力让用户知道他们不能像这样注册某些名称。如果他们这样做，他们将无法通过该路由访问他们的用户名。

我已经这样做了，但我有一个自我强加的规则，它可能不适合所有人，但对我有用：用户名必须至少为 5 个字符，控制器为 4 个或更少。

# javascript - 如何从 JavaScript 中的函数参数调用函数？

> ID：11108242
> 
> 赞同：0
> 
> 时间：2012-06-19T19:44:47.080
> 
> 标签：javascript

所以我从一些网络上阅读了教程，他们做了这样的事情。

```
function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
}

function successCB() {
    alert("success!");
}

var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
db.transaction(populateDB, errorCB, successCB); 
```

最后一行，他们从object db调用了方法transaction，argument字段中有3个函数，但是函数populateDB，errorCB不是都需要一个参数吗？这个论点在哪里被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:47:26.970

数据库运行时会在需要时调用这些函数，并传入参数。在“db.transaction”函数调用中，您传递对函数的**引用**。此时，不需要函数参数，因为您只是确定要调用哪些函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:52:58.590

这些是回调，这意味着该`transaction`方法将根据成功或失败调用一个或其他 CB 函数。

该方法可能像这样工作：

```
db.transaction = function(populateDB, errorCB, successCB) {
    // Try to do the requested action
    var tx = performTransaction(populateDB);

    // If the action failed, call the error callback, 
    // otherwise call the success callback
    if (tx==false) {
        var err = new TransactionError();
        return errorCB(err);
    } else {
        return successCB(tx);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:47:33.990

这些函数根据回调的设计方式自动接收参数。您传入对函数的引用，当回调使用该引用时，它会根据整个机制的构建方式填充参数。基本上，事务对象知道调用您提供了引用的方法并传入它打算传入的任何内容。确保收集它取决于您（就像您正在做的那样）。

这有点令人困惑的唯一原因是因为您还没有破解打开事务功能。如果你这样做了，你会看到它调用这些函数并传入你稍后收集的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:48:56.220

javascript 有几种方法可以在函数内部获取/设置数据，请参阅：方法 -*调用*、*应用*和*参数*var

# c# - 优先级默认值或其他功能？（过载）

> ID：11108246
> 
> 赞同：2
> 
> 时间：2012-06-19T19:45:15.270
> 
> 标签：c#, .net, function

为什么返回 5，我很好奇正常函数比默认参数 1 具有更高的优先级。有人可以向我解释一下吗？提前致谢

```
static void Main(string[] args)
{
        Console.WriteLine(add());

        Console.ReadLine();
}

public static int add(int x=4,int y=5)
{
        return x+y;
}

public static int add()
{

        return 5;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:06:55.713

我认为这只能通过查看 C# 语言规范来回答。第 7.5.3.2 节说，在确定“更好”的函数成员时，如果不需要可选参数，则将它们丢弃：

> 从参数列表中删除没有对应参数的可选参数

这有效地使这两个功能等效。然后，当两个函数等效时，它具有以下决胜规则：

> 否则，如果 MP 的所有参数都有对应的参数，而默认参数需要替换 MQ 中的至少一个可选参数，则 MP 优于 MQ。

这意味着没有默认参数的那个将是被调用的那个 - 正如您在代码中看到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:08:49.893

它返回 5，因为您调用了一个`add()`没有参数的方法。编译器应该如何根据带有默认参数的那个来知道你想要哪个？它必须选择一个。这就是它的设计方式。

如果您想了解更多关于可选参数的信息，我建议您阅读 Eric Lippert 的系列文章。你可以从[这里](http://blogs.msdn.com/b/ericlippert/archive/2011/05/09/optional-argument-corner-cases-part-one.aspx)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:05:18.490

以我的经验，方法要么被重载，要么使用默认参数。这是一个设计选择，尽管我发现自己编写重载方法而不是默认参数化方法。

在这种情况下，编译器必须决定调用哪个方法，并且没有任何参数的方法优先。

# linux - SYSTEM: denied request 44 in Minix

> ID：11108247
> 
> 赞同：0
> 
> 时间：2012-06-19T19:45:15.660
> 
> 标签：linux, bsd, minix

I get "SYSTEM: denied request 44 from 109894" when trying to execute my own code in Minix 3.2\. I typed over the code and the makefile so there could be some typos. The program compiles fine however.

My c file:

```
#include <stdio.h>
#include <stdlib.h>
#include <minix/syslib.h>

int main(int argc, char **argv) {
 printf("test");
return EXIT_SUCCESS;
} 
```

My makefile:

```
PROG = helloproc
SRC = helloproc.c

MAN=

.include <bsd.prog.mk> 
```

Minix uses the BSD compilation platform (hence the tag).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:03:28.263

Apparently running the application somewhere other than /usr/srcs/drivers let it be run as a normal program instead of a driver.

# c# - 如何分解成员访问表达式链？

> ID：11108254
> 
> 赞同：22
> 
> 时间：2012-06-19T19:45:37.613
> 
> 标签：c#, lambda, expression-trees, nullreferenceexception, lifting

# 短版（TL；DR）：

假设我有一个表达式，它只是一个成员访问运算符链：

```
Expression<Func<Tx, Tbaz>> e = x => x.foo.bar.baz; 
```

您可以将此表达式视为子表达式的组合，每个子表达式都包含一个成员访问操作：

```
Expression<Func<Tx, Tfoo>>   e1 = (Tx x) => x.foo;
Expression<Func<Tfoo, Tbar>> e2 = (Tfoo foo) => foo.bar;
Expression<Func<Tbar, Tbaz>> e3 = (Tbar bar) => bar.baz; 
```

我想要做的是分解`e`成这些组件子表达式，以便我可以单独使用它们。

# 更短的版本：

如果我有表情的话`x => x.foo.bar`，我已经知道怎么打断了`x => x.foo`。我怎样才能拉出另一个子表达式，`foo => foo.bar`？

# 为什么我要这样做：

我正在尝试在 C# 中模拟“提升”成员访问运算符，例如[CoffeeScript 的存在访问运算符`?.`](http://coffeescript.org/#operators)。Eric Lippert 曾表示[曾考虑为 C# 使用类似的运算符，](https://stackoverflow.com/a/8244140/399649)但没有预算来实施它。

如果 C# 中存在这样的运算符，您可以执行以下操作：

```
value = target?.foo?.bar?.baz; 
```

如果链的任何部分`target.foo.bar.baz`结果为 null，那么整个事情将评估为 null，从而避免 NullReferenceException。

我想要一个`Lift`可以模拟这种事情的扩展方法：

```
value = target.Lift(x => x.foo.bar.baz); //returns target.foo.bar.baz or null 
```

# 我试过的：

我有一些可以编译的东西，它有点工作。但是，它是不完整的，因为我只知道如何保留成员访问表达式的左侧。我可以`x => x.foo.bar.baz`变成`x => x.foo.bar`，但我不知道如何保持`bar => bar.baz`。

所以它最终会做这样的事情（伪代码）：

```
return (x => x)(target) == null ? null
       : (x => x.foo)(target) == null ? null
       : (x => x.foo.bar)(target) == null ? null
       : (x => x.foo.bar.baz)(target); 
```

这意味着表达式中最左边的步骤会被一遍又一遍地评估。如果它们只是 POCO 对象的属性，可能没什么大不了的，但是将它们转换为方法调用，效率低下（和潜在的副作用）变得更加明显：

```
//still pseudocode
return (x => x())(target) == null ? null
       : (x => x().foo())(target) == null ? null
       : (x => x().foo().bar())(target) == null ? null
       : (x => x().foo().bar().baz())(target); 
```

# 编码：

```
static TResult Lift<T, TResult>(this T target, Expression<Func<T, TResult>> exp)
    where TResult : class
{
    //omitted: if target can be null && target == null, just return null

    var memberExpression = exp.Body as MemberExpression;
    if (memberExpression != null)
    {
        //if memberExpression is {x.foo.bar}, then innerExpression is {x.foo}
        var innerExpression = memberExpression.Expression;
        var innerLambda = Expression.Lambda<Func<T, object>>(
                              innerExpression, 
                              exp.Parameters
                          );  

        if (target.Lift(innerLambda) == null)
        {
            return null;
        }
        else
        {
            ////This is the part I'm stuck on. Possible pseudocode:
            //var member = memberExpression.Member;              
            //return GetValueOfMember(target.Lift(innerLambda), member);
        }
    }

    //For now, I'm stuck with this:
    return exp.Compile()(target);
} 
```

这是受到[这个答案](https://stackoverflow.com/a/8408092/399649)的粗略启发。

* * *

# 提升方法的替代方法，以及为什么我不能使用它们：

### [也许单子](http://mikehadlow.blogspot.com/2011/01/monads-in-c-5-maybe.html)

```
value = x.ToMaybe()
         .Bind(y => y.foo)
         .Bind(f => f.bar)
         .Bind(b => b.baz)
         .Value; 
```

优点：

1.  使用在函数式编程中流行的现有模式
2.  除了提升会员访问权限外，还有[其他用途](https://github.com/AndreyTsvetkov/Functional.Maybe)

缺点：

1.  它太冗长了。每次我想向下钻取几个成员时，我不想要大量的函数调用链。即使我实现`SelectMany`并使用查询语法，恕我直言，这看起来会更混乱，而不是更少。
2.  我必须手动将`x.foo.bar.baz`其重写为各个组件，这意味着我必须在编译时知道它们是什么。我不能只使用来自变量的表达式，例如`result = Lift(expr, obj);`.
3.  不是为我想要做的事情而设计的，而且感觉不是完美的契合。

### 表达访客

我[将 Ian Griffith 的 LiftMemberAccessToNull 方法](http://www.interact-sw.co.uk/iangblog/2008/04/13/member-lifting)修改为通用扩展方法，可以按照我的描述使用。代码太长，无法在此处包含，但如果有人感兴趣，我会发布 Gist。

优点：

1.  遵循`result = target.Lift(x => x.foo.bar.baz)`语法
2.  如果链中的每个步骤都返回引用类型或不可为空的值类型，则效果很好

缺点：

1.  如果链中的任何成员是可为空的值类型，它就会窒息，这确实限制了它对我的用处。我需要它为`Nullable<DateTime>`会员工作。

### 试着抓

```
try 
{ 
    value = x.foo.bar.baz; 
}
catch (NullReferenceException ex) 
{ 
    value = null; 
} 
```

这是最明显的方式，如果找不到更优雅的方式，我会使用它。

优点：

1.  这很简单。
2.  代码的用途很明显。
3.  我不必担心边缘情况。

缺点：

1.  它丑陋而冗长
2.  try/catch 块是一个[不平凡的*](http://jonskeet.uk/csharp/exceptions.html)性能影响
3.  这是一个语句块，所以我不能让它为 LINQ 发出表达式树
4.  感觉像是认输

我不会说谎；“不认输”是我这么固执的主要原因。我的直觉认为必须有一种优雅的方式来做到这一点，但找到它一直是一个挑战。**我不敢相信访问表达式的左侧如此容易，但右侧却几乎无法访问。**

我在这里真的有两个问题，所以我会接受任何可以解决任何一个问题的方法：

*   保留双方的表达式分解，具有合理的性能，适用于任何类型
*   空传播成员访问

* * *

### 更新：

空传播成员访问[计划~~包含~~ **在**C# 6.0](https://msdn.microsoft.com/en-us/magazine/Dn802602.aspx)中。不过，我仍然想要表达式分解的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T09:51:52.107

如果它只是一个简单的成员访问表达式链，有一个简单的解决方案：

```
public static TResult Lift<T, TResult>(this T target, Expression<Func<T, TResult>> exp)
    where TResult : class
{
    return (TResult) GetValueOfExpression(target, exp.Body);
}

private static object GetValueOfExpression<T>(T target, Expression exp)
{
    if (exp.NodeType == ExpressionType.Parameter)
    {
        return target;
    }
    else if (exp.NodeType == ExpressionType.MemberAccess)
    {
        var memberExpression = (MemberExpression) exp;
        var parentValue = GetValueOfExpression(target, memberExpression.Expression);

        if (parentValue == null)
        {
            return null;
        }
        else
        {
            if (memberExpression.Member is PropertyInfo)
                return ((PropertyInfo) memberExpression.Member).GetValue(parentValue, null);
            else
                return ((FieldInfo) memberExpression.Member).GetValue(parentValue);
        }
    }
    else
    {
        throw new ArgumentException("The expression must contain only member access calls.", "exp");
    }
} 
```

**编辑**

如果要添加对方法调用的支持，请使用此更新的方法：

```
private static object GetValueOfExpression<T>(T target, Expression exp)
{
    if (exp == null)
    {
        return null;
    }
    else if (exp.NodeType == ExpressionType.Parameter)
    {
        return target;
    }
    else if (exp.NodeType == ExpressionType.Constant)
    {
        return ((ConstantExpression) exp).Value;
    }
    else if (exp.NodeType == ExpressionType.Lambda)
    {
        return exp;
    }
    else if (exp.NodeType == ExpressionType.MemberAccess)
    {
        var memberExpression = (MemberExpression) exp;
        var parentValue = GetValueOfExpression(target, memberExpression.Expression);

        if (parentValue == null)
        {
            return null;
        }
        else
        {
            if (memberExpression.Member is PropertyInfo)
                return ((PropertyInfo) memberExpression.Member).GetValue(parentValue, null);
            else
                return ((FieldInfo) memberExpression.Member).GetValue(parentValue);
        }
    }
    else if (exp.NodeType == ExpressionType.Call)
    {
        var methodCallExpression = (MethodCallExpression) exp;
        var parentValue = GetValueOfExpression(target, methodCallExpression.Object);

        if (parentValue == null && !methodCallExpression.Method.IsStatic)
        {
            return null;
        }
        else
        {
            var arguments = methodCallExpression.Arguments.Select(a => GetValueOfExpression(target, a)).ToArray();

            // Required for comverting expression parameters to delegate calls
            var parameters = methodCallExpression.Method.GetParameters();
            for (int i = 0; i < parameters.Length; i++)
            {
                if (typeof(Delegate).IsAssignableFrom(parameters[i].ParameterType))
                {
                    arguments[i] = ((LambdaExpression) arguments[i]).Compile();
                }
            }

            if (arguments.Length > 0 && arguments[0] == null && methodCallExpression.Method.IsStatic &&
                methodCallExpression.Method.IsDefined(typeof(ExtensionAttribute), false)) // extension method
            {
                return null;
            }
            else
            {
                return methodCallExpression.Method.Invoke(parentValue, arguments);
            }
        }
    }
    else
    {
        throw new ArgumentException(
            string.Format("Expression type '{0}' is invalid for member invoking.", exp.NodeType));
    }
} 
```

# c++ - 对游戏引擎定义感到困惑

> ID：11108256
> 
> 赞同：-2
> 
> 时间：2012-06-19T19:45:42.963
> 
> 标签：c++, opengl

我是游戏开发新手，我已经用 SDL/C、Canvas/Js 构建了一个游戏 .. 全 2D 现在我想学习 3D 游戏，每个人都告诉我使用引擎，我的问题是：

*   什么是引擎，它像 Unity、UDK.. 还是像 OpenGL、DirectX.. 因为我找到了两个答案是哪个？
*   我如何制作像 OpenGL/SDL 这样的东西，我使用 C，但我不知道如何操作屏幕的像素和低级的东西？（我只需要知道如何与图形卡通信以及它是如何工作的，而不需要汇编代码或类似代码）
*   你能推荐任何解释如何使用 OpenGL/C++、导入对象、动画等的书吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:52:24.010

图形层（DirectX、OpenGL 等）是游戏引擎的一个组件。显然需要将对象绘制到屏幕上，但引擎不止于此。它定义了通常用于构建某种类型的游戏的数据结构和函数/操作。它为您奠定了基础，这样您就可以专注于实现那些特定于您的游戏的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:53:59.610

OpenGL 和 DirectX 是 API，您可以在其中指定渲染图形的每个步骤。

Unity 和 UDK 是游戏引擎 - 负责处理许多更底层的功能，因此您不必自己编写。这使您可以更专注于游戏玩法，同时它会处理幕后的大部分图形操作。

除了许多其他任务之外，游戏引擎还将使用图形 API 来帮助您简化开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:29:30.367

游戏引擎是用于开发游戏的开发框架。Unity 和 UDK 是游戏引擎。OpenGL 和 DirectX 是渲染引擎。游戏引擎可能有自己的渲染引擎。

[Jason Gregory 的Game Engine Architecture](https://rads.stackoverflow.com/amzn/click/com/1568814135)是一本好书

# ruby - 数值计算锁定了红宝石

> ID：11108258
> 
> 赞同：0
> 
> 时间：2012-06-19T19:45:49.517
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试实现一个 id 混淆方案，在别处借用一个简单的哈希。我在应用程序助手上添加了一个方法：

```
 @@M_ID = 2**31-1
  @@PRIME = 1580030173
  @@PRIME_INVERSE = 59260789 # (calculated from MAXID and PRIME offline)

  def obfuscate_id(x)
    if x
      return ((x * @@PRIME) & @@M_ID)
    else
      x
    end
  end 
```

出于某种原因，每当调用它时，ruby 都会锁定，并开始占用我的 mac 上的磁盘空间......就像它的演出一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:14:31.913

你确定`x`是数字吗？`x`如果是字符串，我可以看到这种情况发生- 在 Ruby 中，字符串乘以数字会为您提供重复的字符串连接：

```
irb(main):004:0> "hi" * 32
=> "hihihihihihihihihihihihihihihihihihihihihihihihihihihihihihihihi" 
```

而且你`@@PRIME`的内存肯定大到可以吃掉大量的内存。如果是这种情况，添加`to_i`应该可以解决它（并且您的条件可能会消失）：

```
irb(main):007:0> "hi".to_i * 32
=> 0
irb(main):008:0> "32".to_i * 32
=> 1024 
```

希望有帮助！

# cassandra - TimeUUID 列上的切片查询

> ID：11108268
> 
> 赞同：1
> 
> 时间：2012-06-19T19:46:19.203
> 
> 标签：cassandra, uuid, slice

我有一个带有 TimeUUIDType 比较器的 cassandra 数据库和列系列。我使用 Hector 并使用 RandomPartitioner 拥有密钥空间。

我想进行切片查询以获取按 TimeUUID 排序的可分页结果。

```
SliceQuery<String, UUID, UserLike> query = HFactory.createSliceQuery(getKeyspace(), StringSerializer.get(), TimeUUIDSerializer.get(), UserLikesSerializer.get());
query = query.setKey(username);
query.setColumnFamily(SOME_CF); 
```

当我使用此代码配置查询时：

```
 query.setRange(new UUID(UUIDGen.createTime(Long.MAX_VALUE),UUIDGen.getClockSeqAndNode()), null, true, maxResults); 
```

我检索的数据顺序不正确（可能是因为我使用了 RandomPartitioner - 正确吗？）当我使用以下代码配置查询时：

```
query.setRange(new UUID(UUIDGen.createTime(Long.MAX_VALUE),UUIDGen.getClockSeqAndNode()), new UUID(UUIDGen.createTime(0),UUIDGen.getClockSeqAndNode()), true, maxResults); 
```

我收到一个错误：

```
InvalidRequestException(why:range finish must come after start in the order of traversal)
at me.prettyprint.hector.api.exceptions.HInvalidRequestException 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T11:14:55.433

此错误是因为开始范围大于您使用的查询中的结束范围值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:12:36.990

首先，您看到此错误是因为您需要使用`getTimeUUIDBytes`, 而不是`new UUID`; 后者只是从你给它的两个 long 中组成一个 uuid，这两个都不是“时间戳”本身。所以：

```
query.setRange(UUIDGen.getUUID(UUIDGen.getTimeUUIDBytes(Long.MAX_VALUE)), null, true, maxResults); 
```

更一般地，当您只需要说“给我结果的第一页”而不必担心这一点时，您可以将 null、null 作为范围的开始/结束传递。

# c# - 仅选择父元素的属性

> ID：11108269
> 
> 赞同：0
> 
> 时间：2012-06-19T19:46:22.837
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有以下 XML：

```
<data name="zzz_AbsenceReportDR" time="2012-06-19 13:36:40Z" xmlns="">
    <row conf="88945498" date="6/19/2012" employee_identifier="mickeymouse" school_name="City Academy" substitute_identifier="" start_time_absence="7:15:00 AM" end_time_absence="3:00:00 PM" filled="No" school_external_id="309" school_dbkey="83235" notes_to_administrator="My lesson plans are in my mailbox." notes_only_for_administrators="" last_update="6/18/2012 6:00:24 PM" notes="We have PE on Monday." last_approval_action="" created="6/18/2012" cancelled="No" absence_last_update="6/18/2012 6:00:24 PM" absence_reason="Personal" approval_status="Unapproved" approved_by="" needs_approval="Yes" />
    <row conf="88946034" date="6/19/2012" employee_identifier="AntwanTeacher" school_name="College Academy" substitute_identifier="" start_time_absence="7:30:00 AM" end_time_absence="3:30:00 PM" filled="No" school_external_id="213" school_dbkey="83244" notes_to_administrator="" notes_only_for_administrators="" last_update="6/18/2012 7:00:24 PM" notes="Lesson Plan on Desk" last_approval_action="" created="6/18/2012" cancelled="No" absence_last_update="6/18/2012 7:00:24 PM" absence_reason="Personal" approval_status="Unapproved"approved_by="" needs_approval="Yes" />
    <row conf="88946035" date="6/19/2012" employee_identifier="vinnieteacherman" school_name="Oakland Academy" substitute_identifier="" start_time_absence="7:35:00 AM" end_time_absence="3:10:00 PM"filled="No" school_external_id="207" school_dbkey="83242" notes_to_administrator="" notes_only_for_administrators="" last_update="6/18/2012 7:00:24 PM" notes="" last_approval_action="" created="6/18/2012" cancelled="No" absence_last_update="6/18/2012 7:00:24 PM" absence_reason="Personal" approval_status="Unapproved" approved_by="" needs_approval="Yes" /> 
```

这些行是动态生成的，并且（在将来的某个时间点）可能有一个名为“name”的属性。仅从数据（父）元素中选择名称属性值的 LINQ 表达式是什么？我正在使用以下代码，但担心它还会返回名为“name”的行属性。

```
var xElems = from x in xmlDoc.Descendants()
             where x.Name.LocalName == "data"
             select x;

foreach (var xElem in xElems)
{
    Console.WriteLine(xElem.Attribute("name"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:48:49.797

```
var elems = xmlDoc.Descendants("data")
                  .Select(e => (string)e.Attribute("name"))
                  .ToList(); 
```

如果只有`data`元素始终位于文件结构的顶部，则可以替换`Descendants`为`Elements`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:07:33.640

```
var r = from d in doc.Elements("data")
        let name = (string)d.Attribute("name")
        select name; 
```

# javascript - jQuery 等价于 JavaScript 函数

> ID：11108273
> 
> 赞同：0
> 
> 时间：2012-06-19T19:46:36.130
> 
> 标签：javascript, jquery, html

我试图在一个项目中比较 jQuery 和 JavaScript 之间的差异，但我似乎无法弄清楚如何重写一个函数，因为我不确定我应该如何引用 jQuery 对象。我正在连接一个字符串以作为 AJAX 参数传递。这是JavaScript：

```
function getSelectValues(select) {
  var values = "";
  var sep = "";
  for(var i = 0; i < select.length; i++) {
    if (select.options[i].selected) {
      values += sep + (select.options[i].value);
      sep = ", ";
    }
  }
  return values;
} 
```

我认为下面可能是 jQuery 等价物，传入 $(this)，但我似乎无法让它工作。如果没有选择任何内容，我希望它返回空字符串，但它返回 null 。

```
function getSelectValues(select) {
  var values = "";
  var sep = "";
  $("option:selected", select).each(function(){
    values += sep + ($(this.val()));
    sep = ", ";
  });
  return values;
} 
```

我也试过：

```
$(select).each(function(){
  $("option:selected", this).each(function(){
    values += sep + ($(this.val()));
    sep = ", ";
  });
}); 
```

那也没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:49:47.703

您只需`.val()`打开多个选项即可使用 for select：

该`.val()`方法主要用于获取input、select、textarea等表单元素的值。在`<select multiple="multiple">`元素的情况下，该`.val()`方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null。

[http://api.jquery.com/val/](http://api.jquery.com/val/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:57:10.407

对于`select`元素`$(select).val()`返回选定的值（对于单选）或数组`null`或多选。我假设你有一个多选的问题，所以你可能想要：

```
var vals = $(select).val();
return vals ? vals.join(', ') : ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:49:03.663

当你使用`each`,`this`是原始的 HTML 元素。在调用 jQuery 方法之前，您需要包装 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:52:54.293

您没有阅读任何文档或[教程](http://jquery-howto.blogspot.de/2009/11/create-callback-functions-for-your.html)，是吗？

```
$.extend({
    myFunc : function( someArg ) {
        /* …function code… */
    }
});
$.myFunc( args ); 
```

请参阅：http: [//jquery-howto.blogspot.de/2009/11/create-callback-functions-for-your.html](http://jquery-howto.blogspot.de/2009/11/create-callback-functions-for-your.html)

# iis - 我必须指定什么“名称”参数才能使用 Powershell 中的 Remove-WebConfigurationProperty 删除 IIS 自定义错误？

> ID：11108275
> 
> 赞同：1
> 
> 时间：2012-06-19T19:46:42.977
> 
> 标签：iis, powershell

尝试使用 Powershell 编写脚本以从 IIS 网站中删除特定的自定义错误。

我已经做到了这一点：

```
Remove-WebConfigurationProperty -Filter "/system.webServer/httpErrors/error[@statusCode='403' and @subStatusCode='4']" -Location IIS:\Sites\www.mysite.com 
```

但运行失败并发出警告：

```
Remove-WebConfigurationProperty : Cannot bind argument to parameter 'Name' because it is an empty string. 
```

我不知道在`Name`这里为参数指定什么 - 并且 Remove-WebConfigurationProperty 的文档严重不足......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:48:48.030

啊……破解了。它不是 Remove-WebConfigurationProperty，而是在此上下文中使用的 Clear-WebConfiguration：

```
Clear-WebConfiguration -Filter "/system.webServer/httpErrors/error[@statusCode='403' and @subStatusCode='4']" -Location IIS:\Sites\www.mysite.com 
```

# terminology - 什么是“协议相关”// 调用（即，而不是 http:// 或 https://）？

> ID：11108283
> 
> 赞同：1
> 
> 时间：2012-06-19T19:47:31.250
> 
> 标签：terminology, rfc

你可以写`//google.com`而不是`http://google.com`和`https://google.com`where`//`是相对于你当前的协议。但是这个词是什么意思`//`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:54:40.743

分层分区？段分隔符？[http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax](http://en.wikipedia.org/wiki/URI_scheme#Generic_syntax)

# sql - 从字符串中解析特定的短语（T-Sql）

> ID：11108286
> 
> 赞同：0
> 
> 时间：2012-06-19T19:47:45.270
> 
> 标签：sql, tsql, parsing

我在数据库中有一个字段，结构如下：

**文件编号：** XXXXXXX
**用户名：** XXXXXXXXX
**支票号码：** XXXXXXXXX
**打印机位置：** XXXXXXXXXXXXX

上例中的 X 可以是任意字符集

我需要从该字符串中提取 Check Number 和 Printer Location 值（X）。

我很茫然，有人接盘吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:55:33.313

不幸的是，我需要去开会，但我可以给出一些方向。以下内容让您了解如何处理支票号码：

```
select (case when fcn > 0
             then substring(f, fcn+21, charindex('<BR>', f, fcn)-fcn)
        end) as checknumber
from (select t.*, charindex('Check Number(s):</B>', f) as fcn
      from t
     ) t 
```

子查询仅查找标识符的位置（如果有）。外部查询从字段中提取适当的字符。复杂之处在于计算子字符串的长度。

注意：由于我现在无法对其进行测试，因此可能会出现偏离 1 的错误。

# apache-flex - 如何不完全折叠折叠式面板 - 一次打开多个

> ID：11108288
> 
> 赞同：0
> 
> 时间：2012-06-19T19:47:47.863
> 
> 标签：apache-flex, adobe, accordion

我需要开发一个有 2 个滑块的手风琴。一个包含标题信息，另一个包含子相关信息。我正在使用 Flex 3，它应该是垂直的而不是水平的。我找到了一种垂直的方法。

但问题是标题“面板”在导航到子项时不应完全折叠。因此，我需要设置特定面板需要折叠到的最小宽度/高度。如果未设置，则面板应完全折叠。

我在网上查看了许多论坛，但似乎无法找到在哪里/如何去创建这样一个不会完全折叠面板的组件。

如果有人能指出我正确的方向，请

面板 1 打开时的示例 - 标题信息

```
P---------------------------P
A---------------------------A
N-------PANEL 1 OPEN--------N
E---------------------------E
L---------------------------L
1---------------------------2 
```

面板 1 打开时的示例 - 标题信息

```
P----P-----------------------
A----A-----------------------
N----N---PANEL 2 OPEN--------
E----E-----------------------
L----L-----------------------
1----2----------------------- 
```

谢谢

# jboss - JBoss 消息传递和 XA 事务：JMS 消息丢失

> ID：11108296
> 
> 赞同：3
> 
> 时间：2012-06-19T19:48:42.620
> 
> 标签：jboss, transactions, jms, xa

我对分布式 JMS 进行了一些测试，但目前遇到以下问题。

我有两台服务器。第一个是带有 JBoss Messaging 1.4.3 的 JBoss 5.1，第二个是带有两个 MDB 的 JBoss 5.1。一个 MDB 正在将消息从队列 A 路由到 B。另一个正在做相反的事情 - 从 B 路由到 A。因此队列 A 和 B 上的消息总和应该是恒定的。只要我正确关闭服务器。

但是，如果我使其中一台服务器的进程崩溃（使用`kill -9`），我可以观察到消息丢失（不多但可见）。我不明白为什么。看来它毕竟没有使用 XA。

我在JBM服务器上尝试了HSQLDB和Oracle作为持久化，但是效果是一样的。

我用`JmsXA`as `ConnectionFactory`。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T13:36:01.213

据我了解您的问题，您正在尝试跨多个服务器 (JVM) 协调 XA 事务，这需要您的服务器配置 JTS，而 JBoss 服务器通常仅默认配置为 JTA。只是为了确保我们在这里讨论的是相同的版本，当我在启动 JBoss AS 5.1 时查看控制台日志时，它会报告以下 JBossTS 版本：

> 08:46:59,678 INFO [TransactionManagerService] JBossTS 事务服务（**JTA**版本 - 标签：**JBOSSTS_4_6_1_GA_CP07**）

假设这与您正在运行的版本大致相同，您应该查看此下载中可用的 JBossTS 文档中包含的所有文档：[jbossts-full-4.6.1.GA.zip](https://www.jboss.org/jbosstm/downloads/4.6.1.GA/src/jbossts-full-4.6.1.GA-src.zip)。具体来说，查看名为**JBossTS 4.6.0 Server Integration Guide**的 PDF ，其中将 Arjuna 事务管理器的不同特性定义为*：*

> JBossTS 由一个事务引擎 ArjunaCore 组成，它周围有多个“个性”。
> 
> **JBossTS JTA**为 Java Enterprise Edition 应用程序提供符合 JTA 1.1 的事务管理器。事务范围仅限于单个 JVM。这适用于不需要在 JVM 之间的业务方法调用上进行事务上下文传播的应用程序。例如，仅使用单个应用程序服务器实例或多个此类实例仅用于负载平衡的部署，它们之间没有事务通信。
> 
> **JBossTS JTS**提供基于 CORBA 的分布式事务管理，可以通过 JTS 本地 API 或通过 JTA 接口驱动。适用于事务上下文必须跨越多个 JVM 的情况，例如部署在应用服务器集群上的 Java EE 应用程序，或者异构 Java 应用程序服务器之间的事务性业务方法调用需要互操作性的情况，或者 Java 和遗留应用程序编写的另一种具有 CORBA 绑定的语言。

并且还断言：

> 对于涉及多个 JVM 的事务用例，需要 JBossTS JTS。

还请查看有关**JBoss Messaging XA Configuration**的此附带条件。确保遵循 JTA 文档中标题为[JBoss Messaging XA Recovery Configuration](http://docs.jboss.org/jbossmessaging/docs/userguide-1.4.0.SP3/html_single/index.html#recovery)的部分中概述的配置说明。

该文档对您需要做的事情提供了一个不错的总结，但是独立 JBossTS 实例的安装和配置的详细信息在标题为**JBoss Transactions 4.6.0 安装指南**的文档中，同时用 JTS 替换 AS 5.1 JTA 事务服务服务在**<jboss-home>\docs\examples\transactions\README.txt**中的 AS 5.1 发行版本身的文档中进行了概述

 *** * *

说了这么多，如果有任何方法可以使用一台服务器实现您的解决方案，我怀疑您会发现这是更可取的方法。

干杯。

//尼古拉斯

PS 正确安装 JTS 后，控制台日志将在启动时显示如下内容：

**09:41:03,558 INFO [TransactionManagerService] JBossTS 事务服务（**JTS**版本 - 标签：JBOSSTS_4_6_1_GA_CP07）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:13:36.117

经过一些研究（及时延长），我发现 XA 恢复配置不正确并且消息无法访问，因为全局事务从未完成。尼古拉斯的回答指出了这一点，非常感谢。 [http://docs.jboss.org/jbossmessaging/docs/userguide-1.4.0.SP3/html_single/index.html#recovery](http://docs.jboss.org/jbossmessaging/docs/userguide-1.4.0.SP3/html_single/index.html#recovery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T05:36:24.557

单独启用 XA 的连接工厂不能保证事务性。发送者和接收者都应该声明他们正在使用事务，如本 Java EE 6 文档中关于[Container-managed transactions docs](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html)所示。

此外，请确保您的消息是持久发送的。我建议对事务管理器进行一些跟踪/调试日志记录，以确保您的事务在应该正确提交时正确提交。**

# javascript - 带有 href 的 JavaScript appendChild() a 会导致浏览器崩溃

> ID：11108308
> 
> 赞同：1
> 
> 时间：2012-06-19T19:49:12.523
> 
> 标签：javascript, appendchild, createelement

我有这个对象有几个方法，它们创建了一个新的

```
<li><a href="?">http://www.domain.com</a></li> 
```

对于在页面内容中找到的每个链接，并将它们附加到先前生成的

```
<ul id="container"></ul> 
```

这是它的样子：

```
var linkObject = {
    parseUrl : function(url) {

        "use strict";

        var thisATag = document.createElement('a');
        thisATag.href = url;
        var thisHostName = thisATag.hostname;
        return thisHostName;

    },
    displayLinkContainer : function() {        

        "use strict";

        var thisWrapper = document.getElementById("contentWrapper");

        var thisDiv = document.createElement("div");
        thisDiv.setAttribute('id', 'wrapper');
        thisWrapper.appendChild(thisDiv);

        var thisHeading = document.createElement("h2");
        var thisHeadingTextNode = document.createTextNode("The list of links");
        thisHeading.appendChild(thisHeadingTextNode);
        thisDiv.appendChild(thisHeading);

        var thisUl = document.createElement("ul");
        thisUl.setAttribute('id', 'container');
        thisDiv.appendChild(thisUl);    

    },
    displayLink : function(thisLink, thisActualUrl) {

        "use strict";

        var thisContainer = document.getElementById('container');        
        var thisLiTag = document.createElement('li');
        var thisATag = document.createElement('a');

        thisATag.setAttribute('target', '_blank');        
        thisATag.setAttribute('href', encodeURI(thisActualUrl));    

        var thisTextNode = document.createTextNode(thisLink);

        thisATag.appendChild(thisTextNode);        
        thisLiTag.appendChild(thisATag);        
        thisContainer.appendChild(thisLiTag);

    },
    findLinks : function() {

        "use strict";

        var thisHrefs = [];
        var thisLinks = document.getElementsByTagName('a');

        if (thisLinks.length > 0) {

            for (var i = 0; i < thisLinks.length; i++) {

                var thisAHref = thisLinks[i].getAttribute('href');

                if (thisAHref !== '#') {
                    var thisAUrl = linkObject.parseUrl(thisAHref);
                    thisHrefs.push(thisAUrl);
                    linkObject.displayLink(thisAUrl, thisAHref);

                }

            } 
        }
    }
};
linkObject.findLinks(); 
```

html：

```
<div id="contentWrapper"><a href="http://www.google.co.uk/">Google</a> <a href="http://yahoo.com">Yahoo</a></div> 
```

如果我删除`<a>`标签元素的创建，那么它可以正常工作，但是当它按原样运行时，浏览器就会卡住并崩溃。知道我在做什么错吗？

经过一些调试后，我发现问题出在**thisActualUrl**上，因为当我评论它并用 hash 替换时，如下所示：

```
thisATag.setAttribute('href', '#' /* encodeURI(thisActualUrl) */); 
```

代码运行正常，但是当它与 thisActualUrl 一起运行时，它会显示在页面上找到的链接，然后在长循环中显示指向当前页面 url 的链接 - 最终导致浏览器崩溃。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T20:03:15.353

无法重现错误：

[http://jsfiddle.net/ENXwY/](http://jsfiddle.net/ENXwY/)

所以，问题可能是你的`thisActualUrl`参数

# c# - Response.Redirect 导致在 asp.net 中的自定义 Error.aspx 页面

> ID：11108310
> 
> 赞同：1
> 
> 时间：2012-06-19T19:49:15.830
> 
> 标签：c#, asp.net, response.redirect

我有一个 Web 应用程序，我在 button_click 事件中执行 Response.Redirect("Register.aspx") 页面。但是，当我逐步执行此代码时，当 Response.Redirect("Register.aspx") 语句执行时......浏览器成为活动窗口，下面的状态栏显示“等待来自 localhost 的响应......”和然后在 5 秒后显示自定义错误页面。

如何调试它以查看导致显示错误页面的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:51:45.923

既然你说有一个暂停，我假设重定向正在工作并且你在 Register.aspx 页面上遇到了这个问题。

1.  暂时关闭自定义错误以查看真正的异常消息。
2.  将异常处理放在 Register.aspx 页面中并记录错误，以便您可以查看异常消息。
3.  将异常处理放在 Global.asax`Application_Error`方法中以捕获所有应用程序错误并记录它。
4.  检查事件查看器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:54:22.233

您有几种方法可以检查正在发生的事情。首先，您可以关闭 web.config 中的自定义错误（如果尚未完成），并添加（如果尚未存在）全局应用程序文件 Global.asax。该文件定义了 Application_Error 方法，您可以在其中设置断点以查看发生了什么。

另请参阅：http: [//msdn.microsoft.com/en-us/library/24395wz3.aspx](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:51:58.920

您应该在计算机的某处以文本文件的形式存在日志，该日志已生成运行时错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:01:29.657

你可以试试`Response.Redirect("~/Register.aspx",false);`

第二个参数防止当前线程中断。

# php - 使用 CURL 的 cronjob 的 PHP 多处理

> ID：11108317
> 
> 赞同：1
> 
> 时间：2012-06-19T19:49:43.600
> 
> 标签：php, multithreading, curl, cron, multiprocessing

我需要做的是使用 PHP 处理数据库中待处理的多个请求。

我目前正在尝试做的是：当我的 cronjob 运行时。我想立即调用文件“process_a.php”10 次，而无需等待它完成处理（process_a.php 可能需要几分钟）。

我尝试使用 CURL 来做到这一点。但是当我的 cronjob 调用 process_a.php 时，它会等待它完成处理并在调用另一个 process_a.php 文件之前返回。

我什至尝试将代码放入 process_a.php 以立即关闭连接，然后在后台继续处理。但 cronjob 仍在等待它完成。

我只希望同一个文件一次执行 10 次，你知道的，就像 10 个不同的用户请求我网站的 index.php 页面......有什么想法！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:54:17.927

分叉成 10 个进程：

```
 <?php
 for($i = 0; $i < 10;$i++){
     $pid = pcntl_fork():
     if ($pid == -1) {
          trigger_error('could not fork');
     } else if (!$pid) {
          //we are the child now
           require 'process_a.php';
     } else {
         // we are the parent, you could do something here if need be.
     }
 } 
```

...但是 process_a.php 可以做您的网站所做的任何事情，所以，与其调用页面，为什么不做页面请求会导致的实际工作呢？让网络服务器继续成为网络服务器，而不是臃肿的脚本存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:03:38.070

正如@Brad curl-multi-exec 所说，应该是一个选项。

[http://php.net/manual/en/function.curl-multi-exec.php](http://php.net/manual/en/function.curl-multi-exec.php)

```
 <?php
//create the multiple cURL handle
$mh = curl_multi_init();

// create both cURL resources
for($i = 0; $i < 10;$i++){
     $ch[$i] = curl_init();
     curl_setopt($ch[$i], CURLOPT_URL, "http://urhost//path/to/process_a.php");
     curl_setopt($ch[$i], CURLOPT_HEADER, 0);
     curl_multi_add_handle($mh,$ch[$i]);//add the handles
}

$active = null;

//execute the handles
do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
}

//close the handles
for($i = 0; $i < 10;$i++){
     curl_multi_remove_handle($mh, $ch[$i]);
}
curl_multi_close($mh);

?> 
```

我通过调用下面的另一个脚本来测试这个脚本：

```
<?php 
print microtime();//Return current Unix timestamp with microseconds 
print '<br>';
?> 
```

这是结果，每个句柄的执行时间相差微秒。

```
0.27085300 1340214659
0.44853600 1340214659
0.46611800 1340214659
0.48201000 1340214659
0.50209400 1340214659
0.48233900 1340214659
0.52274300 1340214659
0.54757800 1340214659
0.57316900 1340214659
0.59475800 1340214659 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:54:43.333

你有完整的 cron 可用，还是只能指定 php 文件？

您也许可以使用 xargs 通过`-P`参数分叉 10 个进程

```
seq `1 10`|xargs -n1 -P10 php /path/to/file.php 
```

# ms-office - microsoft office 对象模型层次结构中是否有用户子程序和函数？

> ID：11108322
> 
> 赞同：1
> 
> 时间：2012-06-19T19:49:57.687
> 
> 标签：ms-office, excel-2007, outlook-2007, outlook-object-model

我是一位经验丰富的 Excel VBA 程序员，他正在尝试在 Excel 中编写一个宏，该宏在 Outlook 中使用函数和子程序。我做了一些搜索，发现标准答案看起来像：

```
objApp = CreateObject("Outlook.Application")
call objApp.UserSubName(argument1, argument2) 
```

其中 UserSubName 是 Outlook 中子的名称。我已经看到了这方面的几个细微变化，并且在每个之后的评论中，通常至少有一个海报写着“这对我不起作用”。我试图更好地理解这个问题，所以虽然我很乐意回答为什么这不起作用，但我要问的真正问题是：

用户编写的子程序或函数是否放置在对象模型层次结构中？换句话说，我可以使用“Application.something.somethingelse.UserSubName”“深入”到子或函数吗？对此的任何反馈将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:22:46.877

不，您不能在 Outlook 中执行此操作。

# javascript - mouseover.js 在 wordpress 中不起作用

> ID：11108327
> 
> 赞同：0
> 
> 时间：2012-06-19T19:50:38.843
> 
> 标签：javascript, wordpress

我在某处有错误，但我可以弄清楚。我有一个 mouseover.js 脚本，它应该在页面上创建一个很好的效果 - 在将鼠标悬停在图像上时，图像将从灰度切换到彩色版本。

该脚本在 header.php 中加载，如下所示：

```
<script src="<?php bloginfo( 'stylesheet_directory' );?>
    /js/mouseover.js" type="text/javascript"></script> 
```

完整的脚本在这里： http: [//pastebin.com/yeBtedcg](http://pastebin.com/yeBtedcg)

这个脚本应该起作用的页面在这里： http: [//www.capital-restaurants.com/web/menu](http://www.capital-restaurants.com/web/menu)（菜单图像应该都是灰度的，只有在鼠标悬停时才会显示颜色）。

我知道该脚本工作正常，因为我以前使用过它，但现在我似乎无法找出我缺少的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:14:17.727

该页面是 www.domain.com 并且您的图像是从 domain.com 加载的，因此出于安全原因 canvas.getImageData 无法工作，请将您的图像更改为同一域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:07:35.043

mouseover.js 正在加载，所以你的问题不在于 WordPress 集成。但是，我想我会注意到，您并没有真正以 WordPress 插件的正确方式添加脚本。看看[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)。

这是一个辅助函数：

```
function add_static_js_asset( $asset_name, $asset_path, $dependencies = false, $version = null, $in_footer = false ) {

        $dependencies = ( is_bool( $dependencies ) ) ? $dependencies : false;
        $version = ( !empty( $version ) ) ? $version : '0.1';
        $in_footer = ( is_bool( $in_footer ) ) ? $in_footer : false;

        if ( empty( $asset ) ) {
                return false;
        }                                                                                                      

        wp_enqueue_script( "{$asset_name}_script", $asset_path), $dependencies, $version, $in_footer );

} 
```

# c++ - 双重对齐

> ID：11108328
> 
> 赞同：9
> 
> 时间：2012-06-19T19:50:44.960
> 
> 标签：c++, c, structure, memory-alignment

根据[这篇文章](https://stackoverflow.com/questions/11099477/why-favour-data-structure-alignment)的讨论，我了解到结构成员对齐的主要原因是性能（以及一些架构限制）。

如果我们在为 32 位 x86 编译时研究 Microsoft (Visual C++)、Borland/CodeGear (C++-Builder)、Digital Mars (DMC) 和 GNU (GCC)：对齐为`int`4 个字节，如果`int`未对齐，则可能会读取 2 行内存库。

我的问题是为什么不使`double`4 个字节也对齐？对齐的 4 个字节`double`也会导致读取 2 行内存库....

例如在下面的示例中，由于`double`是 8 对齐的，因此结构的实际大小将为`sizeof(char) + (alignment for double padding) + sizeof(int) = 20 bytes`.

```
typedef struct structc_tag{
    char        c;
    double      d;
    int         s;
} structc_t; 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T22:15:24.467

扩展评论：

根据关于 GCC 的文档`-malign-double`：

> `double`在两个字边界上对齐变量会产生在奔腾上运行得更快的代码，但会消耗更多内存。
> 
> 在 x86-64 上，`-malign-double`默认启用。
> 
> 警告：如果您使用`-malign-double`开关，包含上述类型的结构与已发布的 386 应用程序二进制接口规范的对齐方式不同，并且与未使用该开关编译的代码中的结构不兼容。

这里的一个字表示 i386 字，即 32 位。

即使在 32 位模式下， Windows 也使用 64 位对齐`double`值，而符合 SysV i386 ABI 的 Unices 使用 32 位对齐。32 位 Windows API Win32 来自 Windows NT 3.1，与当前的 Windows 版本不同，它针对 Intel i386、Alpha、MIPS 甚至是不起眼的 Intel i860。由于像 Alpha 和 MIPS 这样的原生 RISC 系统要求`double`值是 64 位对齐的（否则会发生硬件故障），可移植性可能是 Win32 i386 ABI 中 64 位对齐的基本原理。

64 位 x86 系统，也称为 AMD64 或 x86-64 或 x64，要求`double`值是 64 位对齐的，否则会发生未对齐错误，并且硬件会进行昂贵的“修复”，这会大大减慢内存访问速度。这就是为什么`double`在所有现代 x86-64 ABI（SysV 和 Win32）中值都是 64 位对齐的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T20:16:21.603

大多数编译器会自动将数据值与平台的字长或数据类型的大小对齐，以较小者为准。绝大多数消费者和企业处理器使用 32 位字长。（即使是 64 位系统通常也使用 32 位作为本机字长）

因此，结构中成员的排序可能会浪费一些内存。在你的具体情况下，你很好。我将在评论中添加已用内存的实际占用空间：

```
typedef struct structc_tag{
          char        c; // 1 byte
                         // 3 bytes (padding)
          double      d; // 8 bytes
          int         s; // 4 bytes
} structc_t;             // total: 16 bytes 
```

此规则也适用于结构，因此即使您重新排列它们以使最小的字段位于最后，您仍将拥有相同大小（16 字节）的结构。

```
typedef struct structc_tag{
          double      d; // 8 bytes
          int         s; // 4 bytes
          char        c; // 1 byte
                         // 3 bytes (padding)
} structc_t;             // total: 16 bytes 
```

如果您要声明更多小于 4 字节的字段，如果按大小将它们分组在一起，您可能会看到一些内存减少。例如：

```
typedef struct structc_tag{
          double      d1; // 8 bytes
          double      d2; // 8 bytes
          double      d3; // 8 bytes
          int         s1; // 4 bytes
          int         s2; // 4 bytes
          int         s3; // 4 bytes
          short       s4; // 2 bytes
          short       s5; // 2 bytes
          short       s6; // 2 bytes
          char        c1; // 1 byte
          char        c2; // 1 byte
          char        c3; // 1 byte
                          // 3 bytes (padding)
} structc_t;              // total: 48 bytes 
```

声明一个愚蠢的结构可能会浪费大量内存，除非编译器重新排序您的元素（通常不会，除非被明确告知）

```
typedef struct structc_tag{
          int         s1; // 4 bytes
          char        c1; // 1 byte
                          // 3 bytes (padding)
          int         s2; // 4 bytes
          char        c2; // 1 byte
                          // 3 bytes (padding)
          int         s3; // 4 bytes
          char        c3; // 1 byte
                          // 3 bytes (padding)
} structc_t;              // total: 24 bytes 
                          // (9 bytes wasted, or 38%)
                          // (optimal size: 16 bytes (1 byte wasted)) 
```

双精度大于 32 位，因此根据第一节中的规则，是 32 位对齐的。有人提到了一个改变对齐方式的编译器选项，并且默认编译器选项在 32 位和 64 位系统之间是不同的，这也是有效的。所以关于双打的真正答案是它取决于平台和编译器。

内存性能由单词控制：从内存加载取决于数据的位置。如果数据包含一个字（即字对齐），则只需加载该字。如果它没有正确对齐（即 0x2 处的 int），处理器必须加载 2 个字才能正确读取其值。这同样适用于双精度，通常占用 2 个字，但如果未对齐，则占用 3。在 64 位系统上，可以本地加载 64 位数量，它们的行为类似于 32 位系统上的 32 位整数，如果正确对齐，它们可以一次加载，但否则，它们将需要 2 个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-30T16:42:51.837

首先是架构强加了对齐要求，有些会容忍未对齐的内存访问，有些则不会。

让我们以 `x86-32bit`windows平台为例，在这个平台上分别对和`int`的`long`对齐要求。`4 bytes``8 bytes`

很清楚为什么`int`对齐要求是`4 bytes`，只是为了让 cpu 只能通过一次访问来读取它。

`doulbe`is`8 bytes`和 not的对齐要求的原因是`4 bytes`，如果是，`4 bytes`那么考虑如果这个 double 位于该地址`60`并且高速缓存行大小是会发生什么`64bits`，在这种情况下，处理器需要从内存中加载 2 个高速缓存行。缓存，但如果这`double`是对齐的，则不会发生这种情况，因为在这种情况下，`double`它将始终是一个缓存行的一部分，而不是在两个缓存行之间划分。

```
 ...58 59|60 61 62 63    64 65 66 67|68 69 70 71...
     -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
 ----------+  +  +  +  .  .  +  +  +  +--------------
           |           .  .           |
 ----------+  +  +  +  .  .  +  +  +  +-------------- 
                       .  .         
      Cache Line 1     .  .  Cache Line 2
     -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:57:45.420

就 CPU 架构而言，这个问题是高度特定于平台的。例如，在对非 4 字节对齐地址进行操作的体系结构中，将变量（实际上是它们的地址）对齐到 4 字节可以避免这种惩罚。

编译器非常适合这类东西，尤其是当您为他们提供要优化的目标 CPU 架构时，他们可以为您完成大部分工作，以及许多其他优化。以 GCC 的`-march`flag 为例，它可以让您以 CPU 架构为目标。

# java - 我正在尝试使用 android 界面登录 php 站点，但我不知道如何发送数据

> ID：11108330
> 
> 赞同：0
> 
> 时间：2012-06-19T19:50:51.187
> 
> 标签：java, php, android, post, get

我正在尝试登录网站并取回代码，但我收到“无效密码或登录名”，但我确定它们都可以

这是我的代码的一部分：

```
 HttpPost httppost = new HttpPost("http://www3.mackenzie.com.br/tia/index2.php");
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("username", username));
        nameValuePairs.add(new BasicNameValuePair("password", password));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        String str = inputStreamToString(response.getEntity().getContent()).toString(); 
```

我正在尝试访问此页面： [http ://www3.mackenzie.com.br/tia/index2.php](http://www3.mackenzie.com.br/tia/index2.php)

我不确定是否应该输入“用户名”和“密码”或其他内容？我怎么能识别呢？我的问题可能是什么？

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:27:02.183

对 Maxwell Weru 的回答稍作修改，我相信他的网址是错误的。& 添加了一个参数。

```
HttpPost httppost = new HttpPost("http://www3.mackenzie.com.br/tia/verifica.php");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("alumat", username));
nameValuePairs.add(new BasicNameValuePair("pass", password));
nameValuePairs.add(new BasicNameValuePair("unidade", "001"));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:09:08.413

根据您提供的网站，我认为这是您应该编写代码的方式

```
HttpPost httppost = new HttpPost("http://www3.mackenzie.com.br/tia/index2.php");
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("alumat", username));
nameValuePairs.add(new BasicNameValuePair("pass", password));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

特别强调增加的价值对

# wcf - 解耦异步调用——WCF 或 WF

> ID：11108331
> 
> 赞同：1
> 
> 时间：2012-06-19T19:50:51.150
> 
> 标签：wcf, workflow-foundation, asynchronous-wcf-call

我正在开发一个客户端/服务项目，其中客户端将位于防火墙后面，其 IP 不是静态的。客户端将调用该服务。然后，服务将在稍后的某个时间（可能是数小时后）在拥有客户数据时联系客户。每个服务会有很多客户。

我查看了一些 WCF 示例，它们似乎使连接保持打开状态，我不想这样做。在我看到的几个 WF 示例中，看起来服务可以在超时到期后联系客户端，大概是在不同的连接上。

我对这些技术非常陌生，但花了无数时间研究和测试样品。似乎我读的越多，我对最佳解决方案的了解就越少。WF 对我来说是最好的解决方案，还是可以使用 WCF 实现我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:46:15.897

如果您想联系客户端，但不保持连接打开，客户端将不得不发布一个端点供您使用。这可能不是直接的客户端，而是您可能让客户端向内部服务器注册自身，然后该服务器公开端点，并在接收到您的数据时将调用路由到客户端。

但是，如果客户没有在某处暴露端点，您将无法联系到他们。

那有意义吗？

**WF vs. WCF** 另外，请记住，WCF 是可以公开和使用端点的通信框架。WF 是一个工作流框架，可以通过 WCF 端点公开自己。它们是完全不同的技术，一种不​​依赖于另一种——因为 WF 可以在没有 WCF 的情况下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:01:24.897

更好的解决方案是在这种情况下使用队列。我会使用 ServiceBus 并将消息发布到客户端准备就绪时可以接收的队列。您也可以使用 MSMQ 来执行相同的操作，甚至数据库也可以用作队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:23:54.063

请记住，WF 仍然通过 WCF 暴露于外部世界。考虑到它的“几个小时后”方面，它实际上有两个方面：客户端和 WCF 服务之间的来回如何工作以及处理本身的过程如何（需要几个小时的部分）。作为一个漫长的过程，第二个可能对 WF 有意义。使用 SignalR 之类的框架可能会更好地处理第一个问题。

# php - 无法打开流，include()，是什么原因造成的？

> ID：11108333
> 
> 赞同：0
> 
> 时间：2012-06-19T19:50:58.613
> 
> 标签：php, include

我正在安装脚本并收到以下错误

> 警告：include() [function.include]: Unable to access ../GameEngine/config.php in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 20
> 
> 警告：include(../GameEngine/config.php) [function.include]：无法打开流：第 20 行 /home/freetrav/public_html/travian/GameEngine/Admin/database.php 中没有此类文件或目录
> 
> 警告：include() [function.include]: Unable to access ../GameEngine/config.php in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 20
> 
> 警告：include(../GameEngine/config.php) [function.include]：无法打开流：第 20 行 /home/freetrav/public_html/travian/GameEngine/Admin/database.php 中没有此类文件或目录
> 
> 警告：include() [function.include]: 未能打开 '../GameEngine/config.php' 以包含 (include_path='.:/usr/lib/php:/usr/local/lib/php') 在 /第 20 行的 home/freetrav/public_html/travian/GameEngine/Admin/database.php
> 
> 警告：include() [function.include]: Unable to access ../GameEngine/Data/buidata.php in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 21
> 
> 警告：include(../GameEngine/Data/buidata.php) [function.include]：无法打开流：/home/freetrav/public_html/travian/GameEngine/Admin/database.php 中没有这样的文件或目录在线21
> 
> 警告：include() [function.include]: Unable to access ../GameEngine/Data/buidata.php in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 21
> 
> 警告：include(../GameEngine/Data/buidata.php) [function.include]：无法打开流：/home/freetrav/public_html/travian/GameEngine/Admin/database.php 中没有这样的文件或目录在线21
> 
> 警告：include() [function.include]: 未能打开 '../GameEngine/Data/buidata.php' 以包含 (include_path='.:/usr/lib/php:/usr/local/lib/php')在第 21 行的 /home/freetrav/public_html/travian/GameEngine/Admin/database.php
> 
> 警告：无法修改标头信息 - 标头已由 /home/freetrav/public_html/travian/install/include/multihunter 中的（输出开始于 /home/freetrav/public_html/travian/GameEngine/Admin/database.php:20）发送。第 29 行的 php

该文件位于`http://www.freetravian.com/travian/install/include/multihunter.php`

是什么导致了这些错误？可能是因为我没有设置一些文件夹权限吗？文件 config.php 确实存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:55:34.463

这些文件在给定的 phat 上不存在。

这是错误显示的内容（检查双点）：

```
Warning: include() [function.include]: Unable to access ../GameEngine/config.php in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 20

Warning: include(../GameEngine/config.php) [function.include]: failed to open stream: No such file or directory in /home/freetrav/public_html/travian/GameEngine/Admin/database.php on line 20

/home/freetrav/public_html/travian/GameEngine/Admin/database.php <- This is the file doing the include
/home/freetrav/public_html/travian/GameEngine/GameEngine/config.php <- This file doesn't exist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:00:26.773

尝试将整个*GameEngine*文件夹移动到*安装*文件夹中。

或者修改您的*multihunter.php文件并在您的**包含*语句中添加一个额外的“../” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:06:38.223

谢谢各位，修好了 问题是调用所有其他文件的文件位于两个文件夹而不是一个文件夹中，因此您必须调用 up-directory(..) 两次。所以我添加了另一组带斜线的点，它起作用了。

```
include("../../GameEngine/config.php");
include("../../GameEngine/Data/buidata.php"); 
```

ty +1 为所有人

# jquery - 获取 jquery 插件的托管 url

> ID：11108334
> 
> 赞同：0
> 
> 时间：2012-06-19T19:50:58.577
> 
> 标签：jquery, plugins, hostname

我目前正在编写一个 jQuery 插件，我想将它托管在我的网站上供其他人使用和包含。

如何获取插件位置的主机名根目录？

```
<script type="text/javascript" src="http://myhost.com/scripts/myplugin.js"></script> 
```

我想知道 myplugin.js 如何能够检索它的 OWN 位置的主机名，尽管它可能包含在另一个网站上。因此，如果有人在他们的网站上包含该脚本源，myplugin.js 仍然能够检索[http://myhost.com](http://myhost.com)

这会让。window.location 一个无效的选择对吗？

# ios - 根据调用方法的方式，块的行为会有所不同

> ID：11108338
> 
> 赞同：0
> 
> 时间：2012-06-19T19:51:18.450
> 
> 标签：ios, xcode, core-data, objective-c-blocks

我有以下代码对数据库进行一些整理：

```
-(void)housekeepDataBase{

    NSLog(@"gets called");

    UIView *translucentView=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
    translucentView.backgroundColor=[UIColor blackColor];
    translucentView.alpha=0.65;

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.frame=CGRectMake(110, 221.5, 100, 37);
    [translucentView addSubview:spinner];

    [spinner startAnimating];

    [self.view.window addSubview:translucentView];

    dispatch_queue_t fetchQueue = dispatch_queue_create("fetch stuff", NULL);

    dispatch_async(fetchQueue, ^{

        [self deleteBlank];

        [self housekeepHnmr];

        [self housekeepCnmr];

        dispatch_async(dispatch_get_main_queue(), ^{

            [translucentView removeFromSuperview];

            [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"house"];
            [[NSUserDefaults standardUserDefaults] synchronize];

            NSLog(@"gets also called");

        });

    });

    dispatch_release(fetchQueue);

} 
```

因为在设备上执行需要一段时间（25 秒），所以我添加了半透明视图和一个微调器，以便用户知道他/她必须稍等片刻。

问题是，如果这个方法是通过一个按钮的 taget 动作调用的，它就可以正常工作。但是，如果我直接从 调用该方法`viewDidLoad`，则数据库会更新，但视图不会显示。另一方面，如果我在内部实现微调器的创建，`fetchQueue`反之亦然。可以，`viewDidLoad`但不能来自按钮/目标操作。

使用我并不真正需要的块，我可能做错了。实际上，我不希望用户在数据库更新期间能够触摸任何东西。但我发现它被剪断了，因为它在测试中有效，所以我保留了它。

有关如何以更适当的方式进行操作的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:54:40.320

使用 viewDidAppear 代替 viewDidLoad（但要确保它只运行一次）。该视图尚未显示，因此您无法在 viewDidLoad 中添加微调器。

# django - 在 django 中管理多对多关系的内联编辑

> ID：11108339
> 
> 赞同：1
> 
> 时间：2012-06-19T19:51:19.050
> 
> 标签：django, django-models, django-admin

我在 Django 中开发的模型有些复杂。基本思想是网站上的用户可以给人们奖励，但我也想跟踪用户和奖励获得者之间的关系。一个用户可以给同一个人多个奖励，但他们之间只有一种关系。模型看起来像这样（用户是标准的 auth_user 模型）：

```
class Recipient(models.Model):
    name = models.CharField(max_length=255)
    senders = models.ManyToManyField(User, through='Relationship')

class Relationship(models.Model):
    user = models.ForeignKey(User)
    recipient = models.ForeignKey(Recipient)
    relationship = models.CharField(max_length=255, blank=True, default='')
    class Meta:
        unique_together = (('user', 'recipient'),)

class Award(models.Model):
    recipient = models.ForeignKey(Recipient)
    user = models.ForeignKey(User)
    relationship = models.ForeignKey(Relationship)
    award_name = models.CharField(max_length=255) 
```

在管理员中我有类似的东西

```
class RelationshipInline(admin.StackedInline):
    model = Relationship

class AwardAdmin(admin.ModelAdmin):
    inlines = [RelationshipInline]
    exclude = ['relationship']

admin.site.register(Recipient)
admin.site.register(Award, AwardAdmin) 
```

当我尝试在管理员中添加奖励时，我收到错误“<class 'Relationship'> has no ForeignKey to <class 'Award'>”。我意识到这是因为当我编辑 Award 时，Django 不知道应该内联编辑哪个关系，但事实上（对人类而言）很明显它是具有相同用户/收件人对的关系。我不能指定关系中的用户/收件人是一个键，因为 Django 不支持多列键（所以我所能做的就是将它们指定为 unique_together）。同样，我不能指定 Award 中的用户/收件人是关系的多列外键。

有什么办法可以得到我想要得到的东西吗？当 Award 与关系存在多对一关系时，必须在管理员中单独编辑关系似乎是一个巨大的不便。有没有更好的方法来组织模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:23:06.877

导致您描述的错误的基本问题是因为您不能在“奖励”中包含“关系”的内联，它应该反过来才能正常工作。这是有道理的，因为内联旨在提供一种创建任意数量的相关记录（在本例中为关系）绑定到您正在编辑的父记录（一个奖项）的方法，但奖项只能与一个关系相关，所以使用内联不起作用。

无论如何，我将建议进行一些简化...

我建议`Recipient`完全放弃模型并切换到这样的东西：

```
class Relationship(models.Model):
    user1 = models.ForeignKey(User)
    user2 = models.ForeignKey(User)
    relationship = models.CharField(max_length=255, blank=True, default='')
    class Meta:
        unique_together = (('user1', 'user2'),)

class Award(models.Model):
    recipient = models.ForeignKey(User)
    user = models.ForeignKey(User)
    relationship = models.ForeignKey(Relationship)
    award_name = models.CharField(max_length=255) 
```

而且，我不会专门管理 Award 模型上的“关系”值，而是重写`save()`获取或创建 2 个用户的关系并保存它的方法。这看起来像这样（未经测试）：

```
...
from django.db.models import Q
...
class Award(models.Model):
    ...
    def save(self, *args, **kwargs):
        try:
            # Query for an existing relationship between the 2 users in question...
            relationship = Relationship.objects.get(
                (Q(user1=self.recipient) & Q(user2=self.user)) | (Q(user1=self.user) & Q(user2=self.recipient))
            )
        except:
            relationship = Relationship.objects.create(user1=self.recipient, user2=self.user, relationship='Pals')
        self.relationship = relationship
        super(Award, self).save(*args, **kwargs) 
```

# facebook - FB.Event.subscribe 不适用于方法：“发送”

> ID：11108341
> 
> 赞同：1
> 
> 时间：2012-06-19T19:51:29.963
> 
> 标签：facebook

我正在使用`FB.ui`创建发送对话框...我试图在用户发送消息后获得回调，但由于某种原因它无法正常工作。

我试着用`FB.event.subscribe`

```
 FB.ui({                                                                                                                                                                   
     method: 'send',                                                                                                                                                         
     name: 'You\'re invited to join!',                                                                                                                          
     link: 'http://anexample.com',                                                                                                                                                              
   }); 

   FB.Event.subscribe('message.send',                                                                                                                                          
      function(response){                                                                                                                                                      
       alert('You sent a message from the URL ' + response);                                                                                                                                 
     }                                                                                                                                                                         
  ); 
```

谁能告诉我订阅可能有什么问题？发送工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:01:41.390

使用以下回调：

```
FB.ui({ 
       method:'send',
       name: 'You\'re invited to join!',                                    
       link: 'http://anexample.com',
    },
    function(response) {
      //callback
    }
); 
```

您正在使用的回调用于[发送](https://developers.facebook.com/docs/reference/plugins/send/)按钮。

# python - 在python中将子子列表更改为元组

> ID：11108344
> 
> 赞同：1
> 
> 时间：2012-06-19T19:51:43.233
> 
> 标签：python, list, python-2.7, tuples

我有一个代表具有以下结构的 bmp 图像的变量：

```
image=[line1, line2, ... linen] 
line=[pix1,pix2,...,pixn]
pix=[r,g,b] 
```

因此，例如这个变量的内容可能看起来像

```
[[[0,0,0],[1,0,1],[2,4,5]],[[3,4,5],[1,7,4],[1,3,5]],[[2,4,2],[1,6,7],[1,9,0]]] 
```

现在我想将每个行项的像素列表转换为元组，所以内容会变成这样：

```
[[(0,0,0),(1,0,1),(2,4,5)],[(3,4,5),(1,7,4),(1,3,5)],[(2,4,2),(1,6,7),(1,9,0)]] 
```

我可以这样做

```
for i in range(0,len(image)-1):
   for j in range(0,len(image[0])-1):
      image[i][j] = tuple(image[i][j]) 
```

但这似乎不是最“pythonesque”的方式，我需要最快的计算方法，上面似乎远非如此。

我试过了

```
[tuple(pix) for pix in line for line in image] 
```

因为我虽然这应该更快，但当然以上失败了。

那么有没有人可以帮助我以最快的方式将我的 pix 子列表转换为元组？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:54:33.267

这个怎么样：

```
[map(tuple, line) for line in image] 
```

并包含完整的评论。在 Python 3.x 中，map 是一个生成器，您可以使用：

```
[list(map(tuple, line)) for line in image] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:57:16.990

```
[[tuple(pix) for pix in line] for line in image] 
```

# ruby - 如何从 ruby gem 的类中调用方法？

> ID：11108345
> 
> 赞同：0
> 
> 时间：2012-06-19T19:51:43.240
> 
> 标签：ruby, ruby-on-rails-3, rubygems

如何从 ruby​​ gem 的类中调用方法？

IE

> 宝石安装[心灵](http://rubygems.org/gems/mindbody)

在 gem 的[文档](http://rubydoc.info/gems/mindbody/0.1.7/frames)中，我看到了各种类。但是没有关于如何从代码中调用这些类的指南。

例如，我想在`ClassService`类中调用一个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T12:40:49.830

对于 MindBody，请查看根模块 Mb。

您可以列出使用声明的所有类型：

```
require 'rubygems'
require 'mindbody'
Mb.constants 
```

它为您提供：

`["AppointmentService", "SourceCredentials", "Meta", "StaffService", "Options", "SiteService", "StaffOptions", "Credentials", "ClientService", "ClassService", "SaleService", "Service"]`

之后你可以打电话`Mb::ClassService.new`或`include Mb; ClassService.new`

给你一点元编程

# spotify - Web API 中的高级搜索？

> ID：11108354
> 
> 赞同：2
> 
> 时间：2012-06-19T19:52:12.257
> 
> 标签：spotify

有没有在元数据 Web API 上构建高级搜索（艺术家、曲目、专辑）？

根据我从文档中收集到的信息，该 API 允许进行艺术家/曲目/专辑搜索，但不能将它们组合起来，即使在“**相关主题**”下的[介绍](https://developer.spotify.com/technologies/web-api/#introduction)页面中有一个**[高级搜索语法](http://www.spotify.com/us/about/features/advanced-search-syntax/)**链接

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:24:39.753

你真的试过了吗？据我所知，使用您链接的语法的高级搜索应该可以正常工作。**

# jquery - Fancybox 内联内容弹出窗口不会滚动？

> ID：11108355
> 
> 赞同：-1
> 
> 时间：2012-06-19T19:52:15.127
> 
> 标签：jquery, fancybox

前往：[http](http://blog.raceramps.com/resources/press-releases/) ://blog.raceramps.com/resources/press-releases/ 点击赛道和拖车坡道

弹出窗口不允许我滚动？在各种浏览器上试过。仅适用于单击/拖动滚动条，或间歇性地工作。

[http://fancybox.net/](http://fancybox.net/)内联弹出窗口工作得很好 - 我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:26:04.207

您使用的是 jQuery 1.7+，但您的`mousewheel`插件版本是 3.0.4，这对于 jQuery 1.7+ 可能有点过时。

尝试从这里[https://github.com/brandonaaron/jquery-mousewheel/downloads](https://github.com/brandonaaron/jquery-mousewheel/downloads)`mousewheel`将插件升级到最新版本（3.0.6）

顺便说一句，fancybox.net 仍在使用 jQuery v1.4.4，所以这就是旧`mousewheel`插件没有问题的原因。

# windows - 用于检查远程 Windows 硬盘驱动器是否有可用空间的脚本

> ID：11108360
> 
> 赞同：0
> 
> 时间：2012-06-19T19:52:35.977
> 
> 标签：windows, vba, vbscript

我正在尝试检查办公室的一些远程服务器上的硬盘空间。下面的文件可以正常调试，但文本文件中没有输出。我已经尝试过 PS 和其他 VB 代码，它们似乎可以工作，但我需要或至少希望将数据保存在文本文件中以便保存。

想法？

```
arrServers = Array("server.domain.net", "server2.domain.net", "server3.domain.net")
strFilePath = "freespace.txt"

On Error Resume Next
Set objFso = CreateObject("Scripting.FileSystemObject")
Set oFile = objFso.OpenTextFile(strFilePath, 2, vbTrue)

If Not IsNothing(oFile) Then
For Each strComputer In arrServers
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

    If objWMIService Then
        Set colDiskDrives = objWMIService.ExecQuery _
            ("Select * from Win32_PerfFormattedData_PerfDisk_LogicalDisk Where " _
                & "Name <> '_Total'")

        For Each objDiskDrive In colDiskDrives
            oFile.WriteLine "Drive", objDiskDrive.Name, "on", strComputer, "has", _
            objDiskDrive.FreeMegabytes & "MB (" & objDiskDrive.PercentFreeSpace & "%) Free"
        Next

    Else
        oFile.WriteLine "Could not connect to " & strComputer
    End If

Next

Else
    WScript.Echo "Could not open text file."

End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:18:06.300

删除 on error resume next 并运行它。你看到了什么？

我认为这可能是你的问题：

```
If Not IsNothing(oFile) Then 
```

应该是

```
If Not oFile Is Nothing Then 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:02:21.580

虽然在蒂姆的回答中正确识别了 EVIL Global OERN，但检查“oFile Is Nothing”的“应该”是误导性的。

这段代码

```
 Dim goFS      : Set goFS  = CreateObject( "Scripting.FileSystemObject" )
  Dim sBadFSpec : sBadFSpec = ".\nix\nix.txt"
  Dim tsOut, bIsNothing
 On Error Resume Next
  Set tsOut = goFS.OpenTextFile(sBadFSpec, ForWriting, True)
  If 0 <> Err.Number Then WScript.Echo "Bingo!", Err.Description 
 On Error GoTo 0
  WScript.Echo "tsOut:", VarType(tsOut), TypeName(tsOut)
 On Error Resume Next
  bIsNothing = tsOut Is Nothing
  If 0 <> Err.Number Then WScript.Echo "Bingo!", Err.Description 
 On Error GoTo 0 
```

及其输出：

```
Bingo! Path not found
tsOut: 0 Empty
Bingo! Object required 
```

显示：

1.  如果 .OpenTextFile() 失败，则您尝试分配给 (tsOut) 的变量不变，即空（如果我们排除重复使用变量）
2.  将 Is Nothing 应用于非对象（例如 Empty）变量会引发错误
3.  检查 Is Nothing 不是检查 .Open/CreateTextFile() 结果的正确方法。

**更新**

Tim 的评论让我意识到上述内容仅适用于 VBScript（这里未初始化的变量是空子类型的普通变体）。我对 VBA 一无所知，但我相信 Tim 对 oFile Is Nothing 的测试是该语言的有效策略。

# iphone - UITableview 单元格的 NSMutable Array 数据源

> ID：11108361
> 
> 赞同：1
> 
> 时间：2012-06-19T19:52:40.123
> 
> 标签：iphone, ios, xcode, nsmutablearray

```
NSString *myMessage=messageField.text;
[messageArray addObject:myMessage]];
messageContentArray=[[NSMutableArray alloc] initWithArray:messageArray];

[_tableView reloadData]; 
```

我有一个 UITableview 并且我使用了一个 NSMutable 字符串数组作为数据源，然后它工作正常。但是现在我想在单击上面的按钮时在此数组中添加另一个字符串，但是一旦我触摸按钮，应用程序就会崩溃并给出

> 'NSInvalidArgumentException'，原因：'-[NSCFString count]：无法识别的选择器发送到实例 0x4e11cf0'

我怎么能做到这一点我的表格视图如下请帮助我

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

                 return [messageContentArray count];
             }
#pragma mark -
#pragma mark UITableView Delegaates
static CGFloat padding = 20.0;
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
                 static NSString *CellIdentifier = @"messagesCellIdentifier";

                 SMMessageViewTableCell *cell = (SMMessageViewTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

                 if (cell == nil) {
                     cell = [[[SMMessageViewTableCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
                 }
                 NSString *usrid=[useridArray objectAtIndex:indexPath.row];
                NSData *imgData1 = (NSData*)[[NSUserDefaults standardUserDefaults] objectForKey:@"lisnerImage"];
                 UIImage *img1 = [UIImage imageWithData: imgData1];

                // CGRect imageFrame=CGRectMake(5,20,25,30);
                 //CGRect imageFrame1=CGRectMake(250,20,25,30);
                 //self.cellimage=[[[UIImageView alloc] initWithFrame:imageFrame] autorelease];
//               self.cellimage1=[[[UIImageView alloc] initWithFrame:imageFrame1] autorelease];
                 if ([usrid caseInsensitiveCompare:friend_Id] == NSOrderedSame) {

                     [cell.usrImage setFrame:CGRectMake(250, 
                                                           20, 
                                                           25, 
                                                          30)];
                     cell.usrImage.image = userImage.image;
                    // self.cellimage1.image=userImage.image;
//                    [cell.contentView addSubview:self.cellimage1];
                     NSString *messages1 = [messageContentArray objectAtIndex:indexPath.row];
                     CGSize  textSize = { 260.0, 10000.0 };
                     CGSize size = [messages1 sizeWithFont:[UIFont systemFontOfSize:13]
                                         constrainedToSize:textSize 
                                             lineBreakMode:UILineBreakModeWordWrap];
                     size.width += (padding/2);
                     cell.messageContentView.text = messages1;
                     cell.accessoryType = UITableViewCellAccessoryNone;
                     cell.userInteractionEnabled = NO;
                     UIImage *bgImage = nil;
                     bgImage = [[UIImage imageNamed:@"aqua.png"] stretchableImageWithLeftCapWidth:24  topCapHeight:15];

                     [cell.messageContentView setFrame:CGRectMake(45 , 
                                                                  20, 
                                                                  190, 
                                                                  size.height)];

                     [cell.bgImageView setFrame:CGRectMake(45, 
                                                           17, 
                                                           190, 
                                                           size.height+padding)];
                     cell.bgImageView.image = bgImage;
                 }else {
                     //self.cellimage.image=img1;
//                   [cell.contentView addSubview:self.cellimage];
                     [cell.usrImage setFrame:CGRectMake(5, 
                                                        20, 
                                                        25, 
                                                        30)];
                     cell.usrImage.image = img1;
                         NSString *messages1 = [messageContentArray objectAtIndex:indexPath.row];
                     CGSize  textSize = { 260.0, 10000.0 };
                     CGSize size = [messages1 sizeWithFont:[UIFont systemFontOfSize:13]
                                         constrainedToSize:textSize 
                                             lineBreakMode:UILineBreakModeWordWrap];
                     size.width += (padding/2);
                     cell.messageContentView.text = messages1;
                     cell.accessoryType = UITableViewCellAccessoryNone;
                     cell.userInteractionEnabled = NO;
                     UIImage *bgImage = nil;
                     bgImage = [[UIImage imageNamed:@"orange.png"] stretchableImageWithLeftCapWidth:24  topCapHeight:15];

                     [cell.messageContentView setFrame:CGRectMake(45, 20, 190, size.height)];

                     [cell.bgImageView setFrame:CGRectMake( 45, 
                                                           17, 
                                                           190, 
                                                           size.height+padding)];
                                         cell.bgImageView.image = bgImage;

                 }

                 return cell;
             }
             - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
                             }
             -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
                // return 65;

                 NSString *text = [messageContentArray objectAtIndex:[indexPath row]];

                 CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

                 CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

                 CGFloat height = MAX(size.height+20, 44.0f);

                 return height + (CELL_CONTENT_MARGIN * 2);
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:04:11.800

如果您的数据源数组是 messageContentArray 并且已经实例化，那么您可以简单地执行此操作

```
- (IBAction)clicked:(id)sender {
  NSString *myMessage = messageField.text;
  [messageContentArray addObject:myMessage];
  [_tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)_tableView numberOfRowsInSection:(NSInteger)section
{
    return [messageContentArray count];
}

    // Customize the appearance of table view cells.
-(UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{    
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    NSString *str =  [messageContentArray objectAtIndex:indexPath.row];
    [cell.textLabel str];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:03:26.373

`dataSource`of`UITableView`不是一个数组，而是一个对象（最常见的是）`UIViewController`，它实现了`UITableViewDataSource`协议。这是[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T19:58:55.923

我永远不会将 NSMutableArray 用于您的数据源。

我只需执行以下操作：（messageContentArray 现在是 NSArray，因此是不可变的）

```
NSString *myMessage=messageField.text;
NSMutableArray *tempArray = [NSMutableArray arrayWithArray:messageArray]; 
[tempArray addObject:myMessage];
self.messageContentArray = [NSArray arrayWithArray:tempArray];
[_tableView reloadData]; 
```

这个错误说的一件事是，您正试图从 NSString 获取计数……所以请确保无论您在何处调用计数，它都在 NSArray 上，而不是在未实现此方法的 NSString 上。

# expressionengine - 如何在表达式引擎中找到基于 URL 的页面？

> ID：11108362
> 
> 赞同：0
> 
> 时间：2012-06-19T19:52:41.053
> 
> 标签：expressionengine

我是 EE 的菜鸟。我们使用的是 1.6.6 版本，我需要对以下页面进行更改：

[http://www.mysite.com/contact/thanks](http://www.mysite.com/contact/thanks)

有没有一种简单的方法可以在 EE 中搜索您的网站以找到您知道存在的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:19:28.063

有几种可能性，但最有可能的是您有一个名为“contact”的模板组，并且在该模板组中您有一个名为“thanks”的模板。

因此，在您的 EE 控制面板中，转到“模板”选项卡，然后在左侧查找名为“联系人”的模板组。然后在右边你应该看到一个模板列表。希望有一个叫做“谢谢”。

# java - java中的一组模板cals

> ID：11108365
> 
> 赞同：0
> 
> 时间：2012-06-19T19:52:53.380
> 
> 标签：java, templates, collections, set

我正在尝试创建一个包含“Vertex3<T>”实例的集合。我对创建集合的行有一点问题：

```
public Set<Vertex3<Integer>> verticies = new Set<Vertex3<Integer>>(); 
```

Eclipse 在等号右侧的“Set”部分用红色下划线，并带有错误消息“**无法实例化类型 Set<Vertex3<Integer>>** ”。

'Vertex3<T>' 定义如下：

```
public class Vertex3 <T> {
    public T x;
    public T y;
    public T z;

    public Vertex3() {
        // do nothing
    }

    public Vertex3(T x, T y, T z) {
        this.x = x;
        this.y = y;
        this.z = z;
    }

    public Vertex3(T x, T y) {
        this.x = x;
        this.y = y;
    }
} 
```

可以提供的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:54:45.783

Set 是一个接口，这就是为什么你不能实例化它。您必须实例化一个具体的类型，例如 HashSet（或 TreeSet，或 LinkedHashSet）：

```
public Set<Vertex3<Integer>> verticies = new HashSet<Vertex3<Integer>>(); 
```

HashSet 和 LinkedHashSet 存储唯一值... HashSet 的性能优于 LinkedHashSet，你可能想使用 HashSet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:54:43.473

正如javadoc所建议的那样，Set是一个接口：http: [//docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)，因此它不能被实例化

您应该查看`All Known Implementing Classes`并选择最适合您的实现并使用`new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:55:05.647

Set是一个接口。你不能实例化它。将右侧部分替换为 HashSet 或 TreeSet。

# android - Android：刷新地图并清除所有itemizedoverlay

> ID：11108368
> 
> 赞同：0
> 
> 时间：2012-06-19T19:52:58.303
> 
> 标签：android, android-asynctask, android-mapview

我试图从我的地图中删除我所有的 itemizedoverlay，但我不能，我也不知道为什么。我已经阅读了许多教程，并且在所有教程中都有以下解决方案：

```
 itemizedoverlay.clear();            
        mMapView.invalidate(); 
```

但它不起作用！

我试图在 AsyncTask 中执行此操作，首先我执行（在 onPreExecute() 中）：

```
 itemizedoverlay.clear();            
        mMapView.invalidate(); 
```

然后我从服务器获取所有地理点，创建 myitemizedoverlay 对象列表（在 doInBackground() 中），然后像这样将它们放在地图中（在 onPostExecute() 中）：

```
 for (int i = 0; i < myListOfOverlayItem.size(); i++) {
                itemizedoverlay.addOverlay(myListOfOverlayItem.get(i));
            }
            overlays.add(itemizedoverlay); 
```

为什么我的代码没有更新我的地图？：-/

这是明确的代码：

```
public void clear(){
    this.m_overlays.clear();
    setLastFocusedIndex(-1); 
    populate();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:57:36.287

尝试

```
mMapView.getOverlays().clear(); 
```

[更多信息](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)/javadocs：https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:50:52.403

您是否在程序开始时执行overlays.clear() 并在最后执行mMapView.invalidate()？

# seam - CDI中同一类的多个观察者

> ID：11108370
> 
> 赞同：0
> 
> 时间：2012-06-19T19:53:14.687
> 
> 标签：seam, java-ee-6, cdi

我有一个事件观察者类。这是一个通用的邮件程序。它接受事件并创建它的电子邮件。我想像这样创建这个观察者类的多个实例：

```
<m:Mailer
resource="WEB-INF/email/adminConfirmation.ftl" 
emailNotificationAddress="admin@xxxx.com">
    <order:onOrderChange>
        <s:parameters>
        <order:StateChange>
           <s:Observes />
        </order:StateChange>
        </s:parameters>
    </order:onOrderChange>
</m:Mailer>
<m:Mailer
resource="WEB-INF/email/userConfirmation.ftl" 
emailNotificationAddress="${order.user.email}">
    <order:onOrderChange>
        <s:parameters>
        <order:StateChange>
           <s:Observes />
        </order:StateChange>
        </s:parameters>
    </order:onOrderChange>
</m:Mailer> 
```

此外，我希望它继承它的基于注释的信息，所以我不必每次都声明这个 order:onOrderChange 方法。我试图用 s:modifies 声明两个实例。但无论我做什么，都只附加了一个监听器实例。

我非常想将同一类的多个不同配置的实例附加为事件观察者。而且还没有找到任何解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:16:49.613

如果您发布课程，而不是Seam 3 xml-configuration，可能对每个人都更容易...... :-)

您正在搜索的是一个通用邮件程序，它监听不同的事件并根据事件发送不同的电子邮件，对吧？我不确定我是否看到了要求的通用部分，您可能希望在您的问题中添加更多信息以明确这一点。

相反，我建议使用一个，它监听一个使用不同限定符（, ）注释`MailSender`的单个事件（例如）。我会在一个地方从完整的电子邮件逻辑开始——如果它变得太复杂，你仍然可以将它重构为更多的 bean。`RegistrationMailEvent``@Admin``@User`

这符合您的需求吗？

哦，顺便说一句：**事件是同步的**- 所以你必须知道你正在停止执行线程，直到事件处理完成。如果邮件服务器速度较慢，则可能不希望这样做。

# php - PHP：显示图表和图表之外的一些数据

> ID：11108375
> 
> 赞同：1
> 
> 时间：2012-06-19T19:53:51.800
> 
> 标签：php

我正在尝试编写在同一网页上生成图形和一些数据的代码，个别代码工作正常，有人可以帮我编码，我正在尝试显示图形然后尝试打印 yaxis 或 sql 列的平均值。

e->autoOutput("图片/example.drawBarChart.spacing.png");

# cocos2d-iphone - Ccocs2d-Durations 中的操作 withDurations

> ID：11108380
> 
> 赞同：0
> 
> 时间：2012-06-19T19:54:21.337
> 
> 标签：cocos2d-iphone, action, duration

让我们看下面的代码：

```
 CCTintTo *tint1 = [CCTintTo actionWithDuration:4 red:255 green:0 blue:0];
    CCTintTo *tint2 = [CCTintTo actionWithDuration:4 red:0 green:0 blue:255];
    CCTintTo *tint3 = [CCTintTo actionWithDuration:4 red:0 green:255 blue:0];
    CCSequence *sequence = [CCSequence actions:tint1, tint2, tint3, nil];
    CCRepeatForever *repeat = [CCRepeatForever actionWithAction:sequence];
    CCSpeed *speedAction = [CCSpeed actionWithAction:repeat speed:10]; 
```

如您所见，前三个动作是在 4 秒内分别着色为红色、蓝色和绿色的动作。然后，这些动作的顺序被传递给速度为 10 的 CCSpeed 动作。现在我完全不明白这些持续时间是如何工作的？我的意思是，前三个应该在 4 秒内完成，但速度方法很快，不会让它们持续那么久。在这种情况下，就行动的持续时间而言，我应该注意什么原则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:23:46.763

据我所知，CCSpeed 动作只是改变了其中 CCActionInterval 的整个时间。这意味着，如果您的序列的持续时间是 12 秒，通过将此序列传递给速度为 10 的 CCSpeed 动作，此序列的持续时间将从 12 秒增加到 120 秒。

另一点是CCSpeed动作在`actionWithAction:speed:`方法中等待CCActionInterval子类。因此，您不能将 CCRepeatForever 操作传递给它。如果你想永远重复这个动作，你应该打电话给

```
CCSequence *sequence = [CCSequence actions:tint1, tint2, tint3, nil];
CCSpeed* speedAction = [CCSpeed actionWithAction:sequence speed:10];
CCRepeatForever* repeat = [CCRepeatForever actionWithAction:speedAction]; 
```

# html - IE中DIV的位置错误

> ID：11108383
> 
> 赞同：0
> 
> 时间：2012-06-19T19:54:32.330
> 
> 标签：html, css

我知道IE有时是不可能的。我有 6 个 div 向右对齐，使用浮点数。这是代码：http: [//jsfiddle.net/jcay3/1/](http://jsfiddle.net/jcay3/1/)。问题是，在 IE 中，它位于栏的下方，应将其定位到该栏。

有什么解决办法吗？我听到很多开发人员谈论评论，尤其是针对 IE 的评论。他们会解决问题吗？我在兼容模式（IE9）下试了一下。如果在 IE 6 中正确呈现而在 IE 7 中呈现错误怎么办？我应该只为 IE 7 添加特殊代码吗？还是没有这种风险？

还有其他解决方案吗？一个更简单的？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:06:32.593

你的问题是 img 标签。
如果你摆脱它，div 将是它们所属的地方。
如果可以的话，将 img 放在一个 div 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:07:35.600

您不应该相信兼容模式恕我直言。如果您的操作系统具有 IE9，则只有[每个具有不同 IE 的 MS 虚拟机是可以的。](http://www.microsoft.com/en-us/download/details.aspx?id=11575)
我已经看到（错误的是我的同事已经看到）IE8-as-IE7、IE Tester 等不存在的错误

是的，它们很大，但它可以让您免于调试不存在的错误数小时。（旧）IE 中已经有足够多的真正错误！;)

至于您的问题，它存在于 IE6 和 IE7 中，我可以解决它，`img { float: left; }`但我不确定它是否是最佳解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:04:12.783

IE 条件标签可以提供帮助，但我不认为您的问题是由于 IE 错误造成的。

试试这个变化：http: [//jsfiddle.net/jcay3/5/](http://jsfiddle.net/jcay3/5/)

不同之处在于`overflow: hidden`容器上的一个`.menuBar`，它会导致一个元素自我清除浮动元素。

我还固定了高度以适应边框并将`.menuBarContainer`元素设置为 100% 宽度以防止它溢出 JSFiddle。

我没有在这台机器上运行 IE，但我很确定这至少可以向后运行到 IE7。让我知道我是否错了，我会再看一遍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:08:44.080

为了在旧 Internet Explorer 版本上正确显示以及更好的跨浏览器支持，您需要浮动相反的元素：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/dy6K8/)示例！

**添加这个 CSS**

```
.menuBar .menuBarContainer img {
    float: left;
} 
```

此外，您需要考虑一个只包含浮动元素的元素将折叠在 中`height`，因为子浮动元素不再在正常的文档流中。

这意味着您`.menuBarContainer`将没有`height`，从而导致其之后的元素可能出现视觉问题。解决此问题的最佳方法是`clear`在关闭此元素之前使用 CSS：

**CSS**

```
.clear {
    clear:both;
} 
```

这意味着您的底部边框`.menuBarContainer`将位于浮动元素占用的空间之后，允许您`.menuBarContainer`保持其高度，确保正常的文档流。

* * *

作为旁注，您`</div>`的小提琴示例有一个额外的结尾。

# sql - 为什么我的 SQL Server 查询没有返回正确的数据？

> ID：11108385
> 
> 赞同：-1
> 
> 时间：2012-06-19T19:54:34.660
> 
> 标签：sql, sql-server, sql-server-2008

我需要帮助弄清楚为什么我没有得到这个查询的任何结果。

我的老板已经提取了数据，所以我知道它在那里。但由于某种原因，我没有得到任何东西：

```
SELECT SessionSID as 'ResponseID'
    , TargetID
    , TargetName
    , SurveyNumber
    , ABCSurveyName
    , SurveyID as 'RedirectedSurveyID'
    , SupplierID
    , SupplierName
    , RespondentID
    , PID
    , IPAddress
    , IsLive
    , EntryDate
    , LastDate
    , LK_ResponseStatusID as 'Response Status Code'
    , ClientLK_ResponseStatusID as 'Client Response Status Code'
    , LK_SupplierLinkTypeName
    , ProjectID
    , ParentSID 
    , TargetCPI
    , SupplierCPI
    , DefaultCPI 
FROM BI_Sessions (nolock) 
WHERE EntryDate BETWEEN   '06-07-2012'  AND '06-08-2012'  
    AND ABCSurveyName  like  'EBAY4263-718184%' 
    AND SupplierID =  42 
```

更新数据在这里（我知道我很抱歉，它很长）：

```
ResponseID  TargetID    TargetName  SurveyNumber    ABCSurveyName   RedirectedSurveyID  SupplierID  SupplierName    RespondentID    PID IPAddress   IsLive  EntryDate   LastDate    Response Status Code    Client Response Status Code LK_SupplierLinkTypeName ProjectID   ParentSID   TargetCPI   SupplierCPI DefaultCPI
6dd94974-9e1b-44ce-8a3e-e1680f921a2e    -1  NULL    13958   Tracking NO_Kund_Cint4005   12963   42  EBAY    31962330    08a945eb-d780-4baa-892a-d4132e59afb5    80.213.119.232  1   2012-06-07 00:01:51.420 2012-06-07 00:02:05.327 3   1   Targeted / Reuse Supplier-Account Only  4637    c847ad2f-9a9f-4a81-8da3-a74d49f8143e    3   10  10
c2d53463-f81b-4156-87a7-e70203a4fc0e    -1  NULL    12200   Tracking NO_Kund_Cint4002   11205   42  EBAY    2513971 0e9d0e01-9009-40a8-a42e-65e1e6d4b1f8    85.167.23.63    1   2012-06-07 00:03:38.220 2012-06-07 00:03:55.143 3   38  Targeted / Reuse Supplier-Account Only  3857    4f74bbaf-0bb3-4430-9529-72c5dff36d3a    3   10  10 
```

编辑：你如何使用索引来加速查询？

更新：更多：

```
SessionID   int no  4   10  0   no  (n/a)   (n/a)   NULL
SessionSID  nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
AccountID   int no  4   10  0   yes (n/a)   (n/a)   NULL
RespondentID    int no  4   10  0   yes (n/a)   (n/a)   NULL
SurveyID    int no  4   10  0   yes (n/a)   (n/a)   NULL
SurveyNumber    int no  4   10  0   yes (n/a)   (n/a)   NULL
ABCSurveyName   nvarchar    no  256                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
SupplierID  int no  4   10  0   yes (n/a)   (n/a)   NULL
SupplierName    nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
TargetID    int no  4   10  0   yes (n/a)   (n/a)   NULL
TargetCPI   float   no  8   53  NULL    yes (n/a)   (n/a)   NULL
ClientCPI   float   no  8   53  NULL    yes (n/a)   (n/a)   NULL
QuotaCPI    float   no  8   53  NULL    yes (n/a)   (n/a)   NULL
SupplierCPI float   no  8   53  NULL    yes (n/a)   (n/a)   NULL
DefaultCPI  float   no  8   53  NULL    yes (n/a)   (n/a)   NULL
EntryDate   datetime    no  8                   yes (n/a)   (n/a)   NULL
LastDate    datetime    no  8                   yes (n/a)   (n/a)   NULL
LK_RespondentPathID int no  4   10  0   yes (n/a)   (n/a)   NULL
LK_ResponseStatusID int no  4   10  0   yes (n/a)   (n/a)   NULL
IsLive  bit no  1                   yes (n/a)   (n/a)   NULL
PID nvarchar    no  256                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
IPAddress   nvarchar    no  32                  yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
ClientLK_ResponseStatusID   int no  4   10  0   yes (n/a)   (n/a)   NULL
ParentSID   nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
SurveyQualificationID   int no  4   10  0   yes (n/a)   (n/a)   NULL
TargetName  nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
SupplierLinkID  int no  4   10  0   yes (n/a)   (n/a)   NULL
LK_SupplierLinkTypeID   int no  4   10  0   yes (n/a)   (n/a)   NULL
LK_SupplierLinkTypeName nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
EntryType   int no  4   10  0   yes (n/a)   (n/a)   NULL
ExitType    int no  4   10  0   yes (n/a)   (n/a)   NULL
ProjectID   int no  4   10  0   yes (n/a)   (n/a)   NULL
ProjectName nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
CreateUserID    int no  4   10  0   yes (n/a)   (n/a)   NULL
CreateDate  datetime    no  8                   yes (n/a)   (n/a)   NULL
UpdateUserID    int no  4   10  0   yes (n/a)   (n/a)   NULL
UpdateDate  datetime    no  8                   yes (n/a)   (n/a)   NULL
LK_RecordStatusID   bit no  1                   yes (n/a)   (n/a)   NULL
LK_CountryLanguageID    int no  4   10  0   yes (n/a)   (n/a)   NULL
LK_CountryLanguageName  nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
SurveyAccountName   nvarchar    no  128                 yes (n/a)   (n/a)   SQL_Latin1_General_CP1_CI_AS
SurveyAccountID int no  4   10  0   yes (n/a)   (n/a)   NULL 
```

编辑：我需要老板的帮助，现在一切都解决了。还有另一个有用的表可以从中提取 ID，因此使用索引很有帮助。

在 MSSQL Server 管理工作室中，我只是运行了一个这样的查询来获取该 ID #：

```
select * from Surveys (nolock) where ABCSurveyName = '718184 Multicultural Shop ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:56:53.513

感谢您发布您的数据 - 您的年份错误：

询问：

```
WHERE EntryDate BETWEEN   '06-07-2011 00:00:01'  AND '06-07-2011 10:00:01' 
```

样本数据：

```
2012-06-07 00:01:51.420 2012-06-07 00:02:05.327 3 
2012-06-07 00:03:38.220 2012-06-07 00:03:55.143 3 
```

哎呀；）

我猜这可能是整个问题。请让我们知道更改查询的年份是否有效！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:25:04.393

假设您在没有 where 子句的情况下获得结果，问题就在那里。我现在不知道在哪里没有数据可以查看。但在类似情况下，最佳做法是逐一评论您的过滤器并检查结果。无论如何，我的感觉是问题出在日期范围内。尝试：

```
WHERE EntryDate BETWEEN   '2011-06-07 00:00:01'  AND '2011-06-07 10:00:01' 
```

或者

```
WHERE EntryDate BETWEEN   '2011-07-06 00:00:01'  AND '2011-07-06 10:00:01' 
```

因为你知道 06 和 07 代表什么（dd-MM-yyyy 或 MM-dd-yyyy）。

（不太可能）如果这是大约 13 天前，请将年份更改为 2012 年（??? 按小时检查一些 - 相当 - 最近的东西是有意义的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:56:43.583

查看您的输入日期格式（在您的示例数据中）。一个是 31:52.4 42:26.6。或者 31:52.4 而 LastDate 是 42:26.6（目测）。日期似乎有问题。**出现输入日期的数据是“31:52.4”**

这些数据是从哪里来的？

您是在没有 where 子句的情况下运行查询还是提供给您的？

最重要的是，它在表中的数据类型是什么？

***编辑 - 添加 *** 感谢您修复数据 - 如果您希望通过查询返回示例数据，则日期范围内的年份错误。

```
WHERE EntryDate BETWEEN   '06-07-2012 00:00:01'  AND '06-07-2012 10:00:01' 
```

此外，您的查询和数据之间的日期格式不同，它仍然会返回并且不是实际问题，但可能更容易发现您的错误。

此查询也不会根据调查名称条件返回样本数据。ABCSurvey 列名称在之前的数据中，我不再看到。我现在看到 FEDSUrveyname，所以我不确定要谈论哪个 - 但是在您的编辑“718184”被列为名为 ABCSurveyName 的字段中的数据之前，就像在单独的字段中列出的“EBAY”一样。数据没有将这两个放在一个字段中，但您的查询条件显示 - ABCSurveyName like 'EBAY4263-718184%'

我不确定实际的表结构是什么。我猜这个条件应该被打破。ABCSurveyName LIKE '%718184%' SuplierId 似乎是 42，所以我认为您不需要包含 EBAY 部分。

我的猜测是您需要将`WHERE`CLause 更改为

```
WHERE EntryDate BETWEEN   '06-07-2012 00:00:01'  AND '06-07-2012 10:00:01' --but i reccomend 'YYYY-MM-DD ...'  format for consistency
AND ABCSurveyName  like  '%718184%' --this is may even be ABCSurveyName = 718184 
AND SupplierID =  42 
```

同样，我关于 42 是 EBAY 的假设可能是错误的，因为我没有看到结构，所以您可能需要添加 SupplierName = 'EBAY'。

因此，如果这不起作用，为了帮助您进一步了解，我需要查看表结构，因为我在这里做了很多推论。样本数据是来自数据库，还是从文件中复制？如果来自文件，则从数据库表中发布实际数据。让我知道它是否有效。:)

***从OP的新信息中编辑添加**

看起来您可能缺少另一张桌子。示例数据具有未包含在架构中的“ResponseID”。我觉得你需要加入。

请回答这些问题：样本数据是什么？它从哪里来的？您希望从查询中返回此数据吗？谢谢

并尝试这样做：（从子句中删除调查名称部分，查看结果，看看是否需要进一步缩小）

```
WHERE EntryDate BETWEEN   '06-07-2012'  AND '06-08-2012'  
    --AND ABCSurveyName  like  'EBAY4263-718184%' 
    AND SupplierID =  42 
```

# c# - 在 C# 上创建时如何向 ImageButton 添加事件？

> ID：11108393
> 
> 赞同：0
> 
> 时间：2012-06-19T19:54:50.163
> 
> 标签：c#, asp.net

我正在尝试在每一行上生成一个带有 ImageButton 的表。

这些行取决于我从日历对象制作的查询。

我的问题是当我生成图像按钮时，我无法设置“onClick”事件来触发类中的方法。

这是我的代码：

```
ImageButton test = new ImageButton();
test.Click += new ImageClickEventHandler(borraCita);
test.ImageUrl = "~/Images/jumo.png";
test.Attributes.Add("runat", "server"); 
```

再次，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:12:53.840

您的服务器端点击处理程序已设置为`borraCita`，使用该[`Click`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.click.aspx)事件。此外，您不需要为`runat=server`.

```
ImageButton test = new ImageButton();
// this is your server side click handler:
test.Click += new ImageClickEventHandler(borraCita); 
test.ImageUrl = "~/Images/jumo.png";

// add the image to the appropriate control:
someControl.Controls.Add(test); 
```

如果您需要添加客户端事件处理程序，您可以使用[`OnClientClick`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.onclientclick.aspx)：

```
test.OnClientClick= "someJavascriptFunction();"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:00:35.233

我不明白为什么这行不通。你把它添加到页面了吗？

```
this.form1.Controls.Add(test); 
```

另外，您是否看到任何 JS 错误？你用 Firebug 评估过吗？我们可能需要更多代码来为您提供帮助，因为我认为没有理由不这样做。

您是否在页面代码隐藏的 PreInit 方法中执行此操作？如果不是，您可能希望将逻辑放在那里，因为之后的任何动态都会被忽略。

# r - 函数中的术语是什么意思？

> ID：11108404
> 
> 赞同：2
> 
> 时间：2012-06-19T19:55:42.023
> 
> 标签：r, function, arguments

嗨，对不起，仍然在这里学习并且学习代码参数很慢。

只是想知道任何人都可以解释函数的某个部分是什么意思：

```
x = sum(abs(apply(embed(y, 4), 1, prod))) 
```

它确实在纸上给出了以下信息：

```
#sum(y|{j}|*y|{j-1}|*y|{j-2}|*|y{j-3}|) 
```

我想知道这是`1`做什么的？因为我认为`(y, 4)`y 加上 3 滞后意味着 y`prod`我知道是产品

这个特定的函数是由我试图将其修改为等于编写的：

```
#sum((|y{j}|^3/2)*(|y{j-1}|^3/2)*(|y{j-2}|^3/2)*(|y{j-3}|^3/2)) 
```

所以基本上我想知道我的修改后的函数是否应该将 y 提高到 ^3/2 我应该计算：

```
x = sum(abs(apply(embed((y^3/2), 4), 1, prod))) 
```

或者：

```
x = sum(abs(apply(embed(y, 4), 3/2, prod))) 
```

或其他？

有什么帮助吗？

预先感谢您的意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:14:58.220

`1`是`apply`称为参数的函数的一部分`MARGIN`。这就是为什么我提倡指定参数名称的原因。无论如何，`apply`函数将“循环”通过数据框、数组、矩阵的行 (1) 或列 (2)... 表达式或评估对象应该作为`X`第一个参数传递，或者如果您更喜欢函数裸露的话。如果你想加注`y`一些金额，你将不得不像你在其中一行中展示的那样做：`y^(3/2)`。

换句话说，此命令将对行中的所有元素求和：

```
apply(X = my.object, MARGIN = 1, FUN = sum) 
```

或跨列：

```
apply(X = my.object, MARGIN = 2, FUN = sum) 
```

# symfony - 我可以使 Symfony2 表单无效吗？

> ID：11108405
> 
> 赞同：1
> 
> 时间：2012-06-19T19:55:43.113
> 
> 标签：symfony, doctrine-orm

我有一个问题，Symfony2 表单可以通过验证，但在提交表单时仍会生成由唯一约束引起的 Doctrine2 异常。我可以捕捉到这个 PDOException，但我想做的是使表单无效并设置一个表单错误，指示实体的特定属性是重复的。我的代码是：

```
 $entity = new Tag();
    $request = $this->getRequest();
    $form    = $this->createForm(new \Acme\AdminBundle\Form\Tag(), $entity);
    $form->bindRequest($request);
    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        try {
            $em->persist($entity);
            $em->flush();
            return $this->redirect($this->generateUrl('tag_edit', array('id' => $entity->getTagId())));
        } catch( ORM\PDOException $e) {
            if ($e->getCode() === '23000') {
                    // What do I do here??
            }
        }

    }
    return array(
            'entity' => $entity,
            'form'   => $form->createView()
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:15:23.293

我认为您正在寻找[UniqueEntity 注释](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)。如果使用它，则不需要 try/catch 块，因为在尝试插入之前会执行检查。

# java - 仅使用 ProGuard 重命名类

> ID：11108406
> 
> 赞同：0
> 
> 时间：2012-06-19T19:55:44.933
> 
> 标签：java, proguard

是否可以仅使用 ProGuard 重命名类，而其余部分保持不变？

# c++ - 是否有可用于 OpenAL 的 Qt 包装器

> ID：11108408
> 
> 赞同：1
> 
> 时间：2012-06-19T19:56:01.897
> 
> 标签：c++, qt, openal

要移除 Qt 应用程序中的 OpenAL 依赖项，需要 Qt 包装器（如 QtOpenGL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:03:18.087

我不相信 Qt 的 OpenAL 有任何“官方”包装器，但您可能想看看这个：

[http://projects.developer.nokia.com/qt_openal_soft](http://projects.developer.nokia.com/qt_openal_soft)

正如 JamWaffles 所指出的，这不会消除您对 OpenAL 的依赖；它只是包装了 OpenAL 以使集成到 Qt 应用程序中更容易一些。

# javascript - 通过 JavaScript 检测移动操作系统

> ID：11108409
> 
> 赞同：1
> 
> 时间：2012-06-19T19:56:04.230
> 
> 标签：javascript, mobile, operating-system, google-gadget

我正在开发一个谷歌小工具，如果它正在移动/智能手机操作系统（例如 Android、iPhone 或任何使用移动 iGoogle 页面的设备）上查看，它需要以一种方式显示。但我只希望它在操作系统使用移动 iGoogle 时以这种方式显示。

我只需要 JavaScript 代码来检测操作系统（如果这可以从谷歌小工具中完成）。我做了一些研究，但没有一个代码很简单。

有人有想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:59:00.350

您可以使用以下命令找出您正在使用的操作系统：

`navigator.appVersion`或者`navigator.userAgent`

# java - 流式 URL 编码器

> ID：11108410
> 
> 赞同：3
> 
> 时间：2012-06-19T19:56:04.773
> 
> 标签：java

在我的 Java 应用程序中，我正在寻找[URLEncoder.encode(String s, String enc)](http://docs.oracle.com/javase/7/docs/api/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)的流式传输版本。我想使用“application/x-www-form-urlencoded”内容类型流式传输大型 HTTP 发布请求。这样的东西是否存在于图书馆或开源项目中？或者有没有简单的方法来实现它？

这是一个早期的尝试，但不正确，因为它不处理大于一个字节的 UTF 代码点：

```
// Incorrect attempt at creating a URLEncoder OutputStream
private class URLEncoderOutputStream extends FilterOutputStream
{
    public URLEncoderOutputStream(OutputStream out)
    {
        super(out);
    }

    @Override
    public void write(int b) throws IOException
    {
        String s = new String(new byte[] { (byte)b });
        String enc = URLEncoder.encode(s, "UTF-8");
        out.write(enc.getBytes("UTF-8"));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:59:05.863

问题是 OutputStreams 对字符一无所知，只知道字节。你真正想要的是一个*作家*，例如

```
public class URLEncodedWriter extends FilterWriter {
    public void write(int c) {
        out.write(URLEncoder.encode((char)c, "UTF-8"));
    }
    ... // Same for 2 other write() methods
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:37:04.833

我认为答案是我不应该尝试这样做。根据[HTML 规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)：

> 内容类型“application/x-www-form-urlencoded”对于发送大量二进制数据或包含非 ASCII 字符的文本效率低下。内容类型“multipart/form-data”应用于提交包含文件、非 ASCII 数据和二进制数据的表单。

大多数服务器在任何情况下都会拒绝超过一定长度的 HTTP 标头。

# c# - AppendLine 没有插入新行？

> ID：11108411
> 
> 赞同：1
> 
> 时间：2012-06-19T19:56:08.277
> 
> 标签：c#, asp.net, stringbuilder

我有以下内容：

```
StringBuilder errors = new StringBuilder();

if(IsNullOrEmpty(value))
{
errors.AppendLine("Enter value");
}

if(IsNullOrEmpty(value2))
{
errors.AppendLine("Enter value 2");
} 
```

我希望这会显示：

`Enter value`
`Enter value 2`

但它显示：

`Enter value Enter value 2`

我也试过： `AppendFormat("Enter value{0}",Environment.NewLine);`

以及与`\n`性格。

错误字符串输出到 asp:Label，如：

```
lblErrors.Text = errors.ToString(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T20:01:01.763

正如一些评论中提到的，HTML 不尊重换行符`\n`。你需要`<br/>`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:02:47.933

如果您想保留所有格式（包括制表符、连续空格等），您可以将[white-space:pre](http://www.w3.org/TR/CSS21/text.html#white-space-prop)样式应用于您的标签或使用[html pre 元素](http://www.w3.org/wiki/HTML/Elements/pre)。

[样品小提琴](http://jsfiddle.net/rTdxA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:04:42.283

我会尝试做类似的事情

```
if(value.Empty == null){
   errors.AppendLine("Enter Value");
} 
```

通过您显示的代码，它似乎没有进入 if 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:05:38.487

你也可以制作成串`errors.Append(Enviroment.NewLine);`

@Brian in c# new line is not "\n" "\r\n" 是换行符的正确语法:)

# c# - 远程控制 GUI 应用程序

> ID：11108412
> 
> 赞同：0
> 
> 时间：2012-06-19T19:56:20.830
> 
> 标签：c#, user-interface, remote-access

有一个用 C# 编写的应用程序没有任何远程控制方式。唯一可能的使用场景是用鼠标单击按钮以获得一些结果。

我想创建一个服务器，该服务器将使用预定义的点击逻辑公开一些常见的使用场景。例如，应用程序有一个“做事”按钮，我愿意制作一个 HTTP（或其他）服务器，当加载某个 URL 时会单击它。

该应用程序旨在在 Windows 上使用，尽管它应该可以在 wine 上正常工作 - 我的主要操作系统是 Ubuntu，但我认为在 VM 中运行该应用程序是一个更好的选择。要对其余的逻辑进行编程，我可以使用 java、python、ruby、php 或 node.js（我不懂 C#）。

处理此问题的最佳方法是什么？我宁愿不依赖点击屏幕上预定义的 X*Y 位置。理想情况下，该解决方案还允许读回数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:08:49.300

您可以使用 ui 自动化 api 轻松自动化 gui。例如检查 codeplex 上的 White 框架

[http://white.codeplex.com/](http://white.codeplex.com/)

但是，我不确定 yiu 是否能够轻松地从应用服务器公开此类自动化应用程序。如果没有具有可见桌面界面的显式用户会话，自动化是不可能的，因此将您的服务器处理一次限制为一个活动会话。

# mysql - MySQL - 其他表中的平均最新列

> ID：11108415
> 
> 赞同：6
> 
> 时间：2012-06-19T19:56:36.343
> 
> 标签：mysql, join, greatest-n-per-group

我有两个表：“服务器”和“统计”

服务器有一个名为“id”的列，它会自动递增。stats 有一个名为“server”的列对应于服务器表中的一行，一个名为“time”的列表示它被添加的时间，还有一个名为“votes”的列，我想获得平均值。

我想获取所有服务器 ( `SELECT * FROM servers`) 以及与每个服务器对应的最近 24 行的平均投票。我相信这是一个“每组最大的”问题。

这是我试图做的，但它总共给了我 24 行，而不是每组 24 行：

```
SELECT servers.*,
       IFNULL(AVG(stats.votes), 0) AS avgvotes
FROM servers
LEFT OUTER JOIN
  (SELECT server,
          votes
   FROM stats
   GROUP BY server
   ORDER BY time DESC LIMIT 24) AS stats ON servers.id = stats.server
GROUP BY servers.id 
```

就像我说的，我想获得每台服务器的 24 个最近的行，而不是 24 个最近的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:46:05.070

感谢这篇很棒***[的帖子](http://www.xaprb.com/blog/2006/12/07/)***。

```
alter table add index(server, time)
 set @num:=0, @server:='';
select servers.*, IFNULL(AVG(stats.votes), 0) AS avgvotes
from servers left outer join (
select server, 
       time,votes, 
       @num := if(@server = server, @num + 1, 1) as row_number, 
       @server:= server as dummy 
from stats force index(server) 
group by server, time 
having row_number < 25) as stats 
on servers.id = stats.server
group by servers.id 
```

# 编辑 1

我刚刚注意到，上面的查询为每个组提供了最旧的 24 条记录。

```
 set @num:=0, @server:='';
select servers.*, IFNULL(AVG(stats.votes), 0) AS avgvotes
from servers left outer join (
select server, 
       time,votes, 
       @num := if(@server = server, @num + 1, 1) as row_number, 
       @server:= server as dummy 
from (select * from stats order by server, time desc)  as t
group by server, time 
having row_number < 25) as stats 
on servers.id = stats.server
group by servers.id 
```

这将给出每组 24 个最新实体的平均值

# 编辑2

@DrAgonmoray 您可以先尝试内部查询部分，看看它是否返回每个组的最新 24 条记录。在我的 mysql 5.5 中，它可以正常工作。

```
select server, 
       time,votes, 
       @num := if(@server = server, @num + 1, 1) as row_number, 
       @server:= server as dummy 
from (select * from stats order by server, time desc)  as t
group by server, time 
having row_number < 25 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T23:27:04.080

这是另一种方法。

此查询将遇到与此处返回正确结果的其他查询相同的性能问题，因为此查询的执行计划将需要对 stats 表中的每一行执行 SORT 操作。由于时间列上没有谓词（限制），因此将考虑统计表中的每一行。对于一个非常大的`stats`表，这将在它可怕的死亡之前耗尽所有可用的临时空间。（下面有更多关于性能的说明。）

```
SELECT r.*
     , IFNULL(s.avg_votes,0)
  FROM servers r
  LEFT 
  JOIN ( SELECT t.server
              , AVG(t.votes) AS avg_votes
           FROM ( SELECT CASE WHEN u.server = @last_server 
                           THEN @i := @i + 1
                           ELSE @i := 1 
                         END AS i
                       , @last_server := u.server AS `server`
                       , u.votes AS votes
                    FROM (SELECT @i := 0, @last_server := NULL) i
                    JOIN ( SELECT v.server, v.votes
                             FROM stats v
                            ORDER BY v.server DESC, v.time DESC
                         ) u
                ) t
          WHERE t.i <= 24
          GROUP BY t.server
       ) s
    ON s.server = r.id 
```

该查询所做的是按服务器和按时间列的降序对统计表进行排序。（内联视图别名为`u`。）

使用排序后的结果集，我们为每个服务器的每一行分配一个行号 1、2、3 等。（内联视图别名为`t`。）

使用该结果集，我们过滤掉所有行号 > 24 的行，并计算`votes`每个服务器的“最新”24 行的列的平均值。（内联视图别名为`s`。）

作为最后一步，我们将它加入到服务器表中，以返回请求的结果集。

* * *

**笔记：**

对于表中的大量行，此查询的执行计划将非常昂贵`stats`。

为了提高性能，我们可以采取几种方法。

最简单的可能是在查询中包含一个谓词，从表中排除大量行`stats`（例如，`time`值超过 2 天或超过 2 周的行）。这将显着减少需要排序的行数，以确定“最新”的 24 行。

此外，使用 on 索引`stats(server,time)`，MySQL 也有可能对索引进行相对有效的“反向扫描”，从而避免排序操作。

我们还可以考虑在 上的 stats 表上实现索引`(server,"reverse_time")`。由于 MySQL 尚不支持降序索引，因此实现实际上将是派生`rtime`值上的常规（升序）索引`time`（对于 (例如，`-1*UNIX_TIMESTAMP(my_timestamp)`或`-1*TIMESTAMPDIFF('1970-01-01',my_datetime)`.

另一种提高性能的方法是为每台服务器保留一个包含最近 24 行的影子表。如果我们可以保证不会从`stats`表中删除“最新行”，那将是最简单的实现。我们可以使用触发器维护该表。基本上，每当向表中插入一行时`stats`，我们检查`time`新行上的 是否晚于`time`影子表中为服务器存储的最早行，如果是，我们将影子表中最早的行替换为新行，确保在每个服务器的影子表中保留不超过 24 行。

而且，另一种方法是编写一个获得结果的过程或函数。此处的方法是遍历每台服务器，并针对 stats 表运行单独的查询以获得`votes`最近 24 行的平均值，然后将所有这些结果收集在一起。（这种方法实际上更像是一种解决方法，以避免对巨大的临时集进行排序，只是为了使结果集能够被返回，而不一定使结果集的返回速度非常快。）

在 LARGE 表上执行此类查询的底线是限制查询考虑的行数并避免对大集合进行排序操作。这就是我们如何执行这样的查询。

* * *

**附录**

要获得“反向索引扫描”操作（`stats`使用不使用文件排序操作的索引从排序中获取行），我必须在 ORDER BY 子句中的两个表达式上指定 DESCENDING。上面的查询以前有`ORDER BY server ASC, time DESC`，并且 MySQL 总是想做一个文件排序，甚至指定`FORCE INDEX FOR ORDER BY (stats_ix1)`提示。

**如果要求仅在 stats 表中至少有 24 个关联行时才**返回服务器的“平均票数” ，那么我们可以进行更有效的查询，即使它有点混乱。（嵌套 IF() 函数中的大部分混乱是处理 NULL 值，这些值不包含在平均值中。如果我们有一个`votes`不为 NULL 的保证，或者如果我们排除任何行，它可以少得多NULL在哪里`votes`。）

```
SELECT r.*
     , IFNULL(s.avg_votes,0)
  FROM servers r
  LEFT 
  JOIN ( SELECT t.server
              , t.tot/NULLIF(t.cnt,0) AS avg_votes
           FROM ( SELECT IF(v.server = @last_server, @num := @num + 1, @num := 1) AS num
                       , @cnt := IF(v.server = @last_server,IF(@num <= 24, @cnt := @cnt + IF(v.votes IS NULL,0,1),@cnt := 0),@cnt := IF(v.votes IS NULL,0,1)) AS cnt
                       , @tot := IF(v.server = @last_server,IF(@num <= 24, @tot := @tot + IFNULL(v.votes,0)      ,@tot := 0),@tot := IFNULL(v.votes,0)      ) AS tot
                       , @last_server := v.server AS SERVER
                    -- , v.time
                    -- , v.votes
                    -- , @tot/NULLIF(@cnt,0) AS avg_sofar
                    FROM (SELECT @last_server := NULL, @num:= 0, @cnt := 0, @tot := 0) u
                    JOIN stats v FORCE INDEX FOR ORDER BY (stats_ix1)
                   ORDER BY v.server DESC, v.time DESC
                ) t
          WHERE t.num = 24
       ) s
    ON s.server = r.id 
```

使用覆盖索引时`stats(server,time,votes)`，EXPLAIN 显示 MySQL 避免了文件排序操作，因此它必须使用“反向索引扫描”来按顺序返回行。如果没有覆盖索引和“(server,time) `, MySQL used the index if I included an index hint, with the`FORCE INDEX FOR ORDER BY (stats_ix1)”提示上的索引，MySQL 也避免了文件排序。（但由于我的表少于 100 行，我不认为 MySQL 非常重视避免文件排序操作。）

time、votes 和 avg_sofar 表达式被注释掉（在别名为 的内联视图中`t`）；它们不是必需的，但它们用于调试。

查询的方式是，每个服务器至少需要 24 行统计数据，才能返回平均值。（这可能是可以接受的。）但我在想，一般来说，我们可以返回一个运行总计、到目前为止的总计 (tot) 和一个运行计数 (cnt)。

（如果我们将 替换为`WHERE t.num = 24`， `WHERE t.num <= 24`我们可以看到运行平均值。）

要返回统计信息中没有至少 24 行的平均值，这实际上是确定 num 最大值 <= 24 的行（对于每个服务器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T09:39:51.827

试试这个解决方案，子选择中的*top-n-per-group*技术`INNER JOIN`归功于[Bill Karwin](https://stackoverflow.com/users/20860/bill-karwin)和他在[此处](https://stackoverflow.com/a/1442867/1446794)的帖子。

```
SELECT 
    a.*,
    AVG(b.votes) AS avgvotes
FROM
    servers a
INNER JOIN
    (
        SELECT 
            aa.server, 
            aa.votes
        FROM 
            stats aa
        LEFT JOIN stats bb ON 
            aa.server = bb.server AND
            aa.time < bb.time
        GROUP BY
            aa.time
        HAVING
            COUNT(*) < 24
    ) b ON a.id = b.server
GROUP BY
    a.id 
```

# r - 难以理解 igraph 中的 count.multiple 和简化

> ID：11108416
> 
> 赞同：0
> 
> 时间：2012-06-19T19:56:49.537
> 
> 标签：r, matrix, igraph

`count.multiple`我正在处理网络数据，并且在 R的`igraph`包中遇到了一个奇怪的（或者至少我没想到的）行为。

```
library(igraph)
library(plyr)

df <- data.frame( sender = c( "a", "a", "a", "b", "b", "c","c","d" ),
              receiver = c( "b", "b", "b", "c", "a", "d", "d", "a" ) ) 
```

我想要的是计算所有边缘并将倍数用作权重。

当我这样做时，`ddply(df, .(sender, receiver), "nrow")`我的结果是：

```
 sender receiver nrow
1      a        b    3
2      b        a    1
3      b        c    1
4      c        d    2
5      d        a    1 
```

这是我所期望的。

但是，我无法使用 igraph's 重现这一点`count.multiple`，这是我期望在 igraph 中执行此操作的

```
df.graph <- graph.edgelist(as.matrix(df))
E(df.graph)$weight <- count.multiple(df.graph) 
```

`E(df.graph)$weight`产生：

```
3 3 3 1 1 2 2 1 
```

然后我使用了`simplify`命令：

```
df.graph <- simplify(df.graph) 
```

产生

```
9 1 1 4 1 
```

我明白这里发生了什么，简化只是添加权重，但我不明白为什么/何时使用它而不是`ddply`做什么......？

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:21:51.120

的默认行为`simplify`是添加多条边的权重。

为避免重复计算，您可以将初始权重设置为 1

```
g <- graph.edgelist(as.matrix(df))
E(g)$weight <- 1
g <- simplify( g )
E(g)$weight 
```

或更改它们的聚合方式。

```
g <- graph.edgelist(as.matrix(df))
E(g)$weight <- count.multiple(g)
g <- simplify( g, edge.attr.comb = list(weight=max, name="concat", "ignore") )
E(g)$weight 
```

# visual-c++ - 如何在 mfc 的静态文本控件中编写多行文本？

> ID：11108417
> 
> 赞同：7
> 
> 时间：2012-06-19T19:56:55.307
> 
> 标签：visual-c++, mfc

我的静态文本控件有一个简单的问题。我想用两行写两个句子。

我到处搜索，他们回答说它的风格不应该简单，它应该足够大，然后可以用\n或\r\n来完成。另一个人写道，它有效！

我这样做了，但它不起作用！标题是“欢迎使用遗传算法模拟器应用程序。\n请选择一个函数：”但它只是忽略 \n 并显示：欢迎使用遗传算法模拟器应用程序。请选择一个函数：”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-03T16:37:30.197

还要记住，如果应用了“中心图像”样式 (SS_CENTERIMAGE)（让您垂直居中文本），则忽略“\r\n”字符序列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T23:23:34.710

您不应该为静态控制设置 SS_SIMPLE 样式。这就是导致控件只显示单行而忽略换行符的原因。摆脱这种风格，它会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T04:35:12.363

我在 VS2008 中使用 MFC 进行了尝试，在静态文本控件属性中将属性“No Wrap”设置为 False，文本应该自动换行到控件的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-23T02:36:23.427

center image/no wrap/simple 所有这三个选项都应该设置为false！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T12:11:59.650

只需应用样式`SS_EDITCONTROL`。

# c++ - C++ 双下标运算符重载

> ID：11108418
> 
> 赞同：2
> 
> 时间：2012-06-19T19:56:56.827
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [运算符 [] [] 重载](https://stackoverflow.com/questions/6969881/operator-overload)

我在互联网上查看过，但找不到这个问题的明确答案，所以我在这里。

我知道：`operator[][]()`不是有效的运算符重载，而是它们重载 [][] 运算符的一种方式（`vector<vector<typename>>`例如，用于）。

我需要这个，因为我正在做一种包含向量向量的包装类，我本来希望

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T19:58:03.310

是的，但这取决于`operator []`. 您可以返回一个本身支持的类型`operator []`。

比方说：

```
struct Matrix
{
   vector<vector<int> > x;
   vector<int>& operator[] (int i)
   {
      return x[i];
   }
}; 
```

因为`x[i]`返回一个`vector`，你可以`[]`再次使用，因为`vector`有一个`operator[]`。

# iphone - CLPlacemark - 州缩写？

> ID：11108424
> 
> 赞同：19
> 
> 时间：2012-06-19T19:57:18.380
> 
> 标签：iphone, ios, clgeocoder

我想知道是否可以从 CLPlacemark 获得州缩写？

在 Apple 的 CLPlacemark Reference 中，它指出：

行政区域 与地标相关的州或省。（只读）@property(nonatomic, readonly) NSString *administrativeArea 讨论 例如，如果地标位置是 Apple 的总部，则此属性的值将是字符串“CA”或“California”。

但每当我使用它时，我只会得到完整的州（即加利福尼亚）而不是缩写（即 CA）。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-01T19:39:56.487

对于其他需要解决方案的人，我为 CLPlacemark 创建了一个类别类，它返回短状态字符串。您需要做的就是打电话`myPlacemark shortState`

CLPlacemark+ShortState.h

```
#import <CoreLocation/CoreLocation.h>
#import <Foundation/Foundation.h>

@interface CLPlacemark (ShortState)

- (NSString *)shortState;

@end 
```

CLPlacemark+ShortState.m

```
#import "CLPlacemark+ShortState.h"

@interface CLPlacemark (ShortStatePrivate)

- (NSDictionary *)nameAbbreviations;

@end

@implementation CLPlacemark (ShortState)

- (NSString *)shortState {

    NSString *state = [self.administrativeArea lowercaseString];

    if (state.length==0)
        return nil;

    return [[self nameAbbreviations] objectForKey:state];

}

- (NSDictionary *)nameAbbreviations {

    static NSDictionary *nameAbbreviations = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{

        nameAbbreviations = [NSDictionary dictionaryWithObjectsAndKeys:
                             @"AL",@"alabama",
                             @"AK",@"alaska",
                             @"AZ",@"arizona",
                             @"AR",@"arkansas",
                             @"CA",@"california",
                             @"CO",@"colorado",
                             @"CT",@"connecticut",
                             @"DE",@"delaware",
                             @"DC",@"district of columbia",
                             @"FL",@"florida",
                             @"GA",@"georgia",
                             @"HI",@"hawaii",
                             @"ID",@"idaho",
                             @"IL",@"illinois",
                             @"IN",@"indiana",
                             @"IA",@"iowa",
                             @"KS",@"kansas",
                             @"KY",@"kentucky",
                             @"LA",@"louisiana",
                             @"ME",@"maine",
                             @"MD",@"maryland",
                             @"MA",@"massachusetts",
                             @"MI",@"michigan",
                             @"MN",@"minnesota",
                             @"MS",@"mississippi",
                             @"MO",@"missouri",
                             @"MT",@"montana",
                             @"NE",@"nebraska",
                             @"NV",@"nevada",
                             @"NH",@"new hampshire",
                             @"NJ",@"new jersey",
                             @"NM",@"new mexico",
                             @"NY",@"new york",
                             @"NC",@"north carolina",
                             @"ND",@"north dakota",
                             @"OH",@"ohio",
                             @"OK",@"oklahoma",
                             @"OR",@"oregon",
                             @"PA",@"pennsylvania",
                             @"RI",@"rhode island",
                             @"SC",@"south carolina",
                             @"SD",@"south dakota",
                             @"TN",@"tennessee",
                             @"TX",@"texas",
                             @"UT",@"utah",
                             @"VT",@"vermont",
                             @"VA",@"virginia",
                             @"WA",@"washington",
                             @"WV",@"west virginia",
                             @"WI",@"wisconsin",
                             @"WY",@"wyoming",
                             nil];
    });

    return nameAbbreviations;
}

@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T20:35:30.940

我认为您无法获得各州的缩写，但您可以为此创建自己的课程..

*   列出所有状态（状态是标准）
*   比较这些状态并返回缩写

**代码..**

类状态缩写

状态缩写.h

```
@interface StateAbbreviation : NSString {

}

+ (NSString *)allStates:(int)index;
+ (NSString *)abbreviatedState:(NSString *)strState;

@end 
```

州缩写.m

```
@implementation StateAbbreviation
+ (NSString *)allStates:(NSString *)strState {
   // Remove all space on the string
   strState = [strState stringByReplacingOccurrencesOfString:@" " withString:@""];
   //Sample states
   NSArray *states = [[NSArray alloc] initWithObjects:
                       @"ALABAMA",                      
                       @"ALASKA",        //AK
                       @"AMERICANSAMOA", //AS
                       @"ARIZONA",       //AZ
                       @"ARKANSAS",      //AR
                       @"CALIFORNIA",    //CA
                       nil];
  NSUInteger n = [states indexOfObject:strState];
  if (n > [states count] - 1) {
     strAbbreviation = @"NOSTATE";
  }
  else {
     strAbbreviation =[self abbreviatedState:n];
  }
  [states release];
  return strAbbreviation;
}

+ (NSString *)abbreviatedState:(int)index {
    NSArray *states = [[NSArray alloc] initWithObjects:
                       @"AL",
                       @"AK",
                       @"AS",
                       @"AZ",
                       @"AR",
                       @"CA",
                       nil];
       NSString *strAbbreviation = [states objectAtIndex:index];
       [states release];
       return strAbbreviation;
}
@end 
```

当你打电话给班级时，它应该是这样的

```
NSString *upperCase = [@"California" uppercaseString]; // California could be from (NSString *)placemark.administrativeArea;
NSString *abbr = [StateAbbreviation allStates:upperCase];
NSLog(@"%@", abbr); // Result should be CA 
```

这只是您可以研究所有类似这样的状态的示例，[状态及其缩写](http://state.1keydata.com/state-abbreviations.php)也喜欢这种[状态及其缩写](http://www.hamariplace.com/50-states-of-america-usa-capitals-and-largest-city/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T20:30:38.547

我相信文档是不正确的。行政区域总是要返回美国地方的全州名称。要获得州缩写，您很可能必须创建一个字典查找表，以便搜索键“California”将返回值“CA”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T04:00:08.267

这是另一个使用 FormattedAddressLines 的类别，它返回类似加利福尼亚州的结果

```
-(NSString *) stateWithAbbreviation {
if ([[self.addressDictionary objectForKey:@"CountryCode"] isEqualToString:@"US"] && self.addressDictionary) {
    NSDictionary *addressLines = [self.addressDictionary objectForKey:@"FormattedAddressLines"];
    for (NSString* addressLine in addressLines) {
        NSRange stateRange = [addressLine rangeOfString:self.postalCode options:NSCaseInsensitiveSearch];
        if (stateRange.length > 0) {
            NSRange lastSpace = [addressLine rangeOfString:@" " options:NSBackwardsSearch];
            if (lastSpace.length > 0) {
                NSString *state = [[addressLine substringToIndex:lastSpace.location] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
                lastSpace = [state rangeOfString:@" " options:NSBackwardsSearch];
                if (lastSpace.length > 0) {
                    NSString *abbr =  [[state substringFromIndex:lastSpace.location] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
                    return  [NSString stringWithFormat:@"%@, %@", self.administrativeArea, abbr];
                }
            }
        }
    }
}
return self.administrativeArea;
} 
```

不完美，但只要 Apple 改变我认为的地址行格式，它就可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-17T23:50:18.950

对于需要交换对象和键的状态列表的人（例如，在 iOS 7 上，我从 得到“CA” `placemark.administrativeArea`）：

```
NSDictionary *nameAbbreviations = [NSDictionary dictionaryWithObjectsAndKeys:
    @"alabama",@"AL",
    @"alaska",@"AK",
    @"arizona",@"AZ",
    @"arkansas",@"AR",
    @"california",@"CA",
    @"colorado",@"CO",
    @"connecticut",@"CT",
    @"delaware",@"DE",
    @"district of columbia",@"DC",
    @"florida",@"FL",
    @"georgia",@"GA",
    @"hawaii",@"HI",
    @"idaho",@"ID",
    @"illinois",@"IL",
    @"indiana",@"IN",
    @"iowa",@"IA",
    @"kansas",@"KS",
    @"kentucky",@"KY",
    @"louisiana",@"LA",
    @"maine",@"ME",
    @"maryland",@"MD",
    @"massachusetts",@"MA",
    @"michigan",@"MI",
    @"minnesota",@"MN",
    @"mississippi",@"MS",
    @"missouri",@"MO",
    @"montana",@"MT",
    @"nebraska",@"NE",
    @"nevada",@"NV",
    @"new hampshire",@"NH",
    @"new jersey",@"NJ",
    @"new mexico",@"NM",
    @"new york",@"NY",
    @"north carolina",@"NC",
    @"north dakota",@"ND",
    @"ohio",@"OH",
    @"oklahoma",@"OK",
    @"oregon",@"OR",
    @"pennsylvania",@"PA",
    @"rhode island",@"RI",
    @"south carolina",@"SC",
    @"south dakota",@"SD",
    @"tennessee",@"TN",
    @"texas",@"TX",
    @"utah",@"UT",
    @"vermont",@"VT",
    @"virginia",@"VA",
    @"washington",@"WA",
    @"west virginia",@"WV",
    @"wisconsin",@"WI",
    @"wyoming",@"WY",
    nil]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-21T17:20:40.400

至少从 iOS 8 开始，`CLPlacemark`'`administrativeArea`返回美国各州的两个字母缩写。

只要您的目标是 iOS 8 和更高版本（您现在应该是），您就不需要使用已接受答案中的类别来扩展 CLPlacemark。

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder geocodeAddressString:@"1 Infinite Loop, Cupertino, CA" completionHandler:^(NSArray *placemarks, NSError *error) {
    CLPlacemark *placemark = [placemarks firstObject];
    NSLog(@"State: %@", placemark.administrativeArea);
}]; 
```

运行这个，你会得到：

```
State: CA 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-07T14:42:35.553

字典的 SWIFT 变体

```
let states = [
    "AL":"alabama",
    "AK":"alaska",
    "AZ":"arizona",
    "AR":"arkansas",
    "CA":"california",
    "CO":"colorado",
    "CT":"connecticut",
    "DE":"delaware",
    "DC":"district of columbia",
    "FL":"florida",
    "GA":"georgia",
    "HI":"hawaii",
    "ID":"idaho",
    "IL":"illinois",
    "IN":"indiana",
    "IA":"iowa",
    "KS":"kansas",
    "KY":"kentucky",
    "LA":"louisiana",
    "ME":"maine",
    "MD":"maryland",
    "MA":"massachusetts",
    "MI":"michigan",
    "MN":"minnesota",
    "MS":"mississippi",
    "MO":"missouri",
    "MT":"montana",
    "NE":"nebraska",
    "NV":"nevada",
    "NH":"new hampshire",
    "NJ":"new jersey",
    "NM":"new mexico",
    "NY":"new york",
    "NC":"north carolina",
    "ND":"north dakota",
    "OH":"ohio",
    "OK":"oklahoma",
    "OR":"oregon",
    "PA":"pennsylvania",
    "RI":"rhode island",
    "SC":"south carolina",
    "SD":"south dakota",
    "TN":"tennessee",
    "TX":"texas",
    "UT":"utah",
    "VT":"vermont",
    "VA":"virginia",
    "WA":"washington",
    "WV":"west virginia",
    "WI":"wisconsin",
    "WY":"wyoming"
] 
```

# c# - 如何将一个文件同时复制到多个位置

> ID：11108427
> 
> 赞同：5
> 
> 时间：2012-06-19T19:57:28.737
> 
> 标签：c#, file-io, copy, memorystream, file-copying

我想找到一种方法将一个文件**同时**复制到多个位置（使用 C#）。

意味着我不希望原始文件只被读取一次，并将文件“粘贴”到另一个位置（在本地网络上）。

据我的测试显示，

```
File.Copy() 
```

总是会再次阅读源代码。

据我了解，即使在使用内存时，该内存块也会被锁定。

所以基本上，我想将“复制粘贴”模仿为一个“副本”和多个“粘贴”的形式，**而无需**再次从硬盘驱动器中重新读取。

为什么 ？因为最终，我需要将一个文件夹（超过 1GB）复制到多台计算机上，而瓶颈是我需要读取源文件的部分。

那么，是否有可能实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T20:01:13.127

除了使用`File.Copy`实用程序方法，您可以将源文件`FileStream`作为`FileStreams`.

**更新**将其更改为使用 Parallel.ForEach 写入文件以提高吞吐量。

```
public static class FileUtil
{
    public static void CopyMultiple(string sourceFilePath, params string[] destinationPaths)
    {
        if (string.IsNullOrEmpty(sourceFilePath)) throw new ArgumentException("A source file must be specified.", "sourceFilePath");

        if (destinationPaths == null || destinationPaths.Length == 0) throw new ArgumentException("At least one destination file must be specified.", "destinationPaths");

        Parallel.ForEach(destinationPaths, new ParallelOptions(),
                         destinationPath =>
                             {
                                 using (var source = new FileStream(sourceFilePath, FileMode.Open, FileAccess.Read, FileShare.Read))
                                 using (var destination = new FileStream(destinationPath, FileMode.Create))
                                 {
                                     var buffer = new byte[1024];
                                     int read;

                                     while ((read = source.Read(buffer, 0, buffer.Length)) > 0)
                                     {
                                         destination.Write(buffer, 0, read);
                                     }
                                 }

                             });
    }
} 
```

用法：

```
FileUtil.CopyMultiple(@"C:\sourceFile1.txt", @"C:\destination1\sourcefile1.txt", @"C:\destination2\sourcefile1.txt"); 
```

# ruby - 为什么Array的pop方法没有感叹号？

> ID：11108432
> 
> 赞同：5
> 
> 时间：2012-06-19T19:57:48.550
> 
> 标签：ruby

我认为按照惯例，只有带有感叹号的方法才会改变对象。

```
> array = [1, 2, 3]
 => [1, 2, 3] 
> array.pop
 => 3 
> array
 => [1, 2] 
```

**为什么不调用`Array`'s方法？`pop``pop!`**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T20:10:12.420

这不太正确。

来自[Ruby 风格指南](https://github.com/bbatsov/ruby-style-guide)

***如果存在该危险的安全版本，**则潜在“危险”方法的名称（即修改 self 或参数的方法，exit！（不像 exit 那样运行终结器）等）应该以感叹号结尾**方法**。*

pop 方法的名称准确地说明了它在做什么，因此无需用感叹号对其进行签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:37:40.740

“第二个约定是，任何名称以感叹号结尾的方法都应谨慎使用。(...) 通常，以感叹号结尾的方法是*mutators*，它改变对象的内部状态。但这是并非总是如此；有许多不以感叹号结尾的突变体，以及许多以感叹号结尾的非`Array.fill`突变体。没有非突变变体的突变方法（例如 ）通常没有感叹号（原文如此）。 "

（Ruby 编程语言，Flanagan 和 Matsumoto，第 180 页）

本书继续以示例`exit`与`exit!`（均为非变异；`exit!`跳过所有 at_exit 挂钩。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:00:46.507

这个约定仍然有效，但`pop`它是所有堆栈实现中众所周知的方法，如果您`pop`从堆栈中删除某些内容，那么您实际上是在删除它。

这只是数据结构中的常识，ruby 家伙只是错过了添加`!`符号。

# slider - 整个滑块在加载时跳跃-AnythingSlider

> ID：11108435
> 
> 赞同：0
> 
> 时间：2012-06-19T19:58:04.683
> 
> 标签：slider, anythingslider

我正在使用 AnythingSlider 将内容放置在此开发人员的新站点上：

[http://sitedev.lcadfiles.com/interactive_barrett.html](http://sitedev.lcadfiles.com/interactive_barrett.html)

当滑块第一次加载到给定页面上时，会有轻微的跳跃（整个滑块、箭头等移动几个像素，然后才进入正确的位置）。着陆后，一切似乎都正常。这种转变似乎不是特定于浏览器的，因为它发生在具有 4 种不同浏览器（以及各种浏览器版本）的旧机器和新机器上。

有什么我设置错了吗？我认为它可能在全球某个地方，比如anythingSlider.js（或者可能是.css——尽管这似乎不太可能），但没有看到任何突出的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:49:48.613

有同样的问题。一个快速的解决方法（对我有用）。

例如。你有如下的 html 代码，添加一个 style="visibility:hidden;" 到您的anythingslider 容器。

```
<div id="slider_nest" style="visibility:hidden;">
    <ul id="your_anythingslider">
    ...
    </ul>
</div> 
```

在 js 代码中，将样式更改为文档准备好时可见。例如（JQuery）

```
jQuery(document).ready(function($) {
    $('#slider_nest').css('visibility', 'visible');
    ...
    $('#your_anythingslider').anythingslider();
    ...
} 
```

希望能帮助到你！

**更新：**添加带有加载器 gif 的滑块蒙版。

例如。在 html 中，您将有如下内容：

```
<div id="slider_mask" style="background: #000 url('ajax-loader.gif') no-repeat center;     display:block; height:568px; width:1050px; margin:0 auto;">
</div>
<div id="slider_nest" style="display:none; height:568px; width:1050px; margin:0 auto;">
    <ul id="your_anythingslider">
    ...
    </ul>
</div> 
```

现在在 js (JQuery) 中：

```
jQuery(document).ready(function($) {
    $('#slider_mask').hide();
    $('#slider_nest').css({'display':'block'});
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:12:10.667

OMG，这终于解决了我们的问题！谢谢你。

因为我在自定义主题上使用 Wordpress 插件，所以我不得不像这样调整它：

在**header.php**文件中的短代码之前添加：

```
<div id="slider_mask" style="background: #FFF url('ajax-loader.gif') no-repeat center;display:block; height:323px; width:940px; margin:0 auto;">
</div> 
```

**在header.php**文件的部分添加：

```
<script type="text/javascript"> 
    $(document).ready(function(){
    $('#slider_mask').hide();           
    $('.anythingSlider').css({'display':'block'});
} 
```

将此添加到**CSS**文件中：

```
.anythingSlider {display:none;} 
```

# css - 我的小箭头上的 CSS 过渡效果

> ID：11108436
> 
> 赞同：1
> 
> 时间：2012-06-19T19:58:05.647
> 
> 标签：css, css-transitions, jsfiddle

[http://jsfiddle.net/pCeGu/](http://jsfiddle.net/pCeGu/)

请参阅上面的 JsFiddle。请注意按钮下方弹出的小箭头。是否有可能使该事物与其他元素一起淡入/淡出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:05:00.723

根据这个问题：[CSS :after hover Transition](https://stackoverflow.com/questions/7306765/css-after-hover-transition)

显然 Firefox 4 是目前唯一支持伪元素过渡的浏览器：（

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:07:41.217

考虑使用带有绝对定位的 unicode 图形字符作为链接的一部分，而不是使用`:after`.

请参阅：[哪些字符可用于在 HTML 中显示的上/下三角形（没有茎的箭头）？](https://stackoverflow.com/questions/2701192/ascii-character-for-up-down-triangle-arrow-to-display-in-html)

# javascript - {} 对 var ShopLogicOptions = {} 意味着什么？

> ID：11108439
> 
> 赞同：-1
> 
> 时间：2012-06-19T19:58:21.840
> 
> 标签：javascript, object

这是什么`{}`意思`var ShopLogicOptions = {};`

我一直在网上搜索，但很难找到！

它是否声明`ShopLogicOptions`为对象？

```
var ShopLogicOptions = {};
ShopLogicOptions.params = {orderId: '" + SS_JS_OrderNo + "', cartItems:[''], subTotal:'',
grandTotal:'', shippingTotal:'', discount:'', discountCode:'', productSku:'',
productName:'', productCategory:''}; 
```

另外，如何正确插入我的`SS_JS_OrderNo`javascript 变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:59:51.483

`{}`表示空的`Object`。在代码中，这意味着 let`ShopLogicOptions`成为一个没有任何内容的对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T20:05:06.517

德里克有正确的答案。它是 JSON（javascript 对象表示法），你是对的，很难用谷歌搜索。有关 JSON 语法的更多信息，请查看此参考：http: [//www.w3schools.com/json/json_syntax.asp](http://www.w3schools.com/json/json_syntax.asp)

# android - 在我的 android 应用中以全屏模式播放 youtube 视频

> ID：11108441
> 
> 赞同：2
> 
> 时间：2012-06-19T19:58:25.627
> 
> 标签：android, youtube

我正在使用以下代码在我的应用程序中播放 youtube 视频。

```
startActivity(new Intent(Intent.ACTION_VIEW, 
                         Uri.parse("http://www.youtube.com/watch?v=videoid"))); 
```

我希望 youtube 视频以全屏模式打开。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T20:04:00.833

今天找到了这个解决方案：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=VIDEOID"));
intent.putExtra("force_fullscreen",true); 
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:07:39.293

尝试使用

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube://" + video_id);
startActivity(intent); 
```

原因是不同的Uri。您当前使用的只是通过 http: 提供内容，这恰好是视频并被解析到 youtube。带有“vnd.youtube”的那个实际上是在告诉系统您有视频内容，您希望使用其中一个本地应用程序来处理。

啊，如果您想在不使用 youtube 应用程序（您无法控制）的情况下实际播放全屏视频，您不尝试制作自己的 VideoView 吗？查看此链接 [播放视频全屏](https://stackoverflow.com/questions/1574654/playback-video-full-screen)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T17:59:31.123

虽然我最初在这方面失败了，但我最终按照这个链接上的说明成功了 [http://keyeslabs.com/joomla/projects/youtube-player/244-open-youtube-activity-project-launched-by-keyes-labs](http://keyeslabs.com/joomla/projects/youtube-player/244-open-youtube-activity-project-launched-by-keyes-labs)

在这里您可以创建自己的视频播放器并在其中播放视频

# c# - 当我在表单 onsubmit 中具有功能时，Ajax 不起作用

> ID：11108443
> 
> 赞同：2
> 
> 时间：2012-06-19T19:58:37.147
> 
> 标签：c#, javascript, .net, ajax, onsubmit

我正在使用 .NET 2 和 ASP.NET AJAX 1.0。但是当我在 form 中有一个函数时，Ajax 不起作用`onsubmit`。

AJAX UpdatePanel 中只有一个文本框，其余表单包括提交按钮不在 UpdatePanel 部分。

```
<form id="form1" runat="server" onsubmit="preSubmit();disableAllButton();"> 
```

这些是功能：

```
function preSubmit()
{
    var divWait = document.getElementById('divWait');
    divWait.style.display = "block";
}
function disableAllButton()  {
    var inputs = document.getElementsByTagName('input');
    for (var i = 0; i < inputs.length; i++) 
        if ((inputs[i].type == 'button') || (inputs[i].type == 'submit')) 
            inputs[i].disabled = true;          
} 
```

我在失去焦点时通过 ajax 检查一个文本框的有效性，它工作正常，但是当我在表单标签中添加上面的这些功能时，ajax 停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:10:52.000

在您的 javascript 方法之后返回 true 以允许部分 ajax 回发：

```
<form id="form1" runat="server" onsubmit="preSubmit();disableAllButton(); return true;"> 
```

# spring - Spring MVC - 如何将数据从过滤器传递到控制器

> ID：11108449
> 
> 赞同：1
> 
> 时间：2012-06-19T19:58:57.897
> 
> 标签：spring, model-view-controller

我在我的 Web 应用程序中使用**Spring MVC 。**对于我想*准备环境的*每个请求，例如从数据存储中加载一些数据并保存它，以便每个控制器都可以访问该信息。我认为这就是过滤器的用途（除其他外）。我可以将信息附加到`request`过滤器中的变量，但是如何从控制器访问它？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:04:50.427

我不明白为什么这是一件好事，过滤与否。

如果您确实拥有每个控制器所需的只读数据，我认为在启动时加载的缓存解决方案是一个更好的主意。我不会用过滤器来做这件事，我不会用这样的东西给每个请求增加负担。一旦完成，为什么还要重复这个动作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T05:09:05.393

我认为您目前的问题是如何在您的过滤器中获取请求中的数据集（您已经完成），然后在您的控制器的 hamdlerMapping 方法中访问它（您想要实现）。

我同意前面的两个答案，但是如果您决定这样做，那么我认为您应该遵循我的答案。

在处理程序方法中，您已将请求映射到控制器中，您可以在方法签名中有一个参数，`HttpServletRequest request`它将包含您在过滤器中设置的请求参数。你可以从你的控制器中的这个请求对象中得到它。

希望这对您有所帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:07:44.223

@duffymo 是对的，但如果你真的想这样做，我建议你使用拦截器 [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc -handlermapping-interceptor](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)

# php - 表单到 PHP_SELF 但不传递帖子值

> ID：11108450
> 
> 赞同：1
> 
> 时间：2012-06-19T19:58:59.400
> 
> 标签：php, forms, iis, pdo, sql-server-2012

我正在尝试创建一个“报告”，可以使用页面顶部的表单进行过滤。过滤结果的选项是会计年度，默认情况下是当前财政年度和多个类别（复选框），默认情况下都选中。该页面使用默认数据正确生成，但是当提交表单时，页面将“刷新”但没有生成 POST 数据。我尝试创建页面的副本并将其设置为操作 URL，但它仍然没有任何 POST 数据并使用默认值。我将在下面包含我的代码，并尝试将其缩小到必要的部分以使其更容易，但如果需要，可以共享所有代码。提前感谢您提供的任何帮助。

```
<body>
    <?php 
    if(isset($_POST['submit'])){echo"SET";} else{echo"NOT SET";}
// Establish Connection and Variables       
// Connection   
        include "./include/class/DBConnection.php";
        DBConnection::$dsn;
        DBConnection::$user;
        DBConnection::$pass;
        DBConnection::getDBConnection();
// The Current Fiscal Year
        $today = getdate();
        $month = $today['month'];
        // seperate first and second half of fiscal year
        $old = array('January','February','March','April','May','June');    
        if (in_array($month,$old)) {
            $year = $today['year'] + 1;
        }
        else {
            $year = $today['year'];
        }                       
// Create SQL Query Variables - Removed for post
// Set filter criteria
// Retrieve array of possible categories and create SQL WHERE statment  
        $catAllCxn = DBConnection::$cxn->prepare($SQL_Categories);
        $catAllCxn->execute();
        $catAllCxn->setFetchMode(PDO::FETCH_ASSOC);
        $catAllArray = array();
        while($catAllRow = $catAllCxn->fetch()) {
            $cat = $catAllRow['Category'];
            array_push($catAllArray, $cat);
        }
        $catAllInQuery = implode(',',array_fill(0,count($catAllArray),'?'));
// Create array for category filter IF form was submitted to itself
        if (isset($_POST['submit'])){  // if page is submitted to itself

            $catFilterArray = $_POST['Category'];
            $catFilterInQuery = implode(',',array_fill(0,count($catFilterArray),'?'));

        }
// Switch for ALL or Filtered report
        if(!isset($_POST['submit'])) { // if page is not submitted to itself 

            $FiscalYear = $year;
        //  $DiscludedDepartmentNumbers = "21117";
            $catArray = $catAllArray;
            $IncludedCategories = $catAllInQuery;
        }
        else {
            $FiscalYear = $_POST["FiscalYear"];
        //  $DiscludedDepartmentNumbers = "21117";
            $catArray = $catFilterArray;
            $IncludedCategories = $catFilterInQuery;
        }               
    ?>
<!-- Filter Form -->        
    <div id="filters" style="border: 1px solid;"> 
        <form name="filter" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="POST"> 
            Fiscal Year: <input type="text" name="FiscalYear" value="<?php echo $FiscalYear; ?>" /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php if(isset($_POST['submit'])){echo"SET";} else{echo"NOT SET";}?>
            <br />
            <fieldset>
                <legend>Select Categories</legend>
                <?php 
                    foreach($catAllArray as $catAllRow) {
                        if (!isset($_POST['submit'])) {
                            echo "<input type=\"checkbox\" name=\"Category\" value=\"".$catAllRow."\" checked=\"checked\" />".$catAllRow."&nbsp;&nbsp;\n";
                        }   
                        else if(in_array($catAllRow,$catArray)) {
                            echo "<input type=\"checkbox\" name=\"Category\" value=\"".$catAllRow."\" checked=\"checked\" />".$catAllRow."&nbsp;&nbsp;\n";
                        }
                        else {
                            echo "<input type=\"checkbox\" name=\"Category\" value=\"".$catAllRow."\" />".$catAllRow."&nbsp;&nbsp;\n";
                        }   
                    }   
                ?>
            </fieldset> <br />
            <input type="submit" value="submit" />
        </form> <!-- End: filter -->
    </div>  <!-- End: filters --> 
```

从这里开始，原始代码继续将结果输出到表格中，但这可以正常工作，我认为这不是问题。如果被问到，我可以分享更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:07:13.590

我认为您检查是否有 _POST 值是错误的。试试这个：

```
if(isset($_POST['FiscalYear'])) 
```

看看这是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:13:21.560

如果你想检查它，你需要命名你的提交按钮

```
<input type="submit" value="submit" name="submit" /> 
```

否则 php 不会把它放在 $_POST 数组中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:14:24.107

您需要为提交按钮命名，如果这是您用来检查表单是否已提交的名称...

```
<input type="submit" value="submit" name="submit" /> 
```

或者，如果您不想更改提交按钮，则可以在类别输入中检查 isset

```
if(isset($_POST['Category'])){echo"SET";} else{echo"NOT SET";} 
```

# perforce - Perforce P4V 将新文件添加到软件仓库

> ID：11108452
> 
> 赞同：3
> 
> 时间：2012-06-19T19:59:22.390
> 
> 标签：perforce

我是 Perforce 的新手，但我能够成功地创建一个包含整个目录树的软件仓库。现在我正在尝试将一个文件添加到该树中的一个文件夹中，但我无法找到如何做到这一点。当我浏览我的计算机时，我可以在“工作区”选项卡中看到该文件，但是当我右键单击该文件时，没有选项可以将其添加到 Pending Changelist。感谢任何建议。谢谢。

托尼

编辑：我觉得我在做这件事。因此，我创建了一个新工作区并找到了包含我要添加的文件的文件夹。然后我右键单击该文件并选择“标记为添加”。然后我去提交并得到这个错误：

//depot/main/SSRS/1 SQL Code/Voucher Query.docx - 警告：无法从非流客户端提交 没有要提交的文件。提交失败——修复上述问题，然后使用“p4 submit -c 5”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:08:54.933

上一个答案显示了如何从命令行添加文件，但您询问的是如何使用 P4V 执行此操作。

如果您在工作区视图中右键单击该文件，您应该会看到“标记为添加”选项。您还可以使用带有小红色 + 符号的工具栏按钮，左数第 4 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T22:12:32.683

在我的情况下，它只是通过注销、在任务管理器中终止任务并最终重新启动我的 Perforce 来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:23:07.320

您的仓库是一个流仓库（图标中应该有“波浪”......）

建立一个新的仓库，一个“本地”仓库，然后使用那个仓库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:02:42.667

如果文件在文件夹中，请运行：

```
p4 add foldername/file 
```

那么你也能

```
p4 submit 
```

# apache - htaccess 允许通过内部文件夹而不是父文件夹导航

> ID：11108453
> 
> 赞同：1
> 
> 时间：2012-06-19T19:59:25.273
> 
> 标签：apache, .htaccess, authentication

文件夹结构

```
A 
|- AA
|- AB
\- AC 
```

我不想让任何人在没有用户身份验证的情况下进入 A。虽然，我希望能够允许任何人查看 AC 中的内容

我怎么能这样做，使用我的 .htaccess ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:41:20.013

您必须创建 3 个文件：

文件夹“A”中的一个 .htaccess 文件

```
AuthType Basic
AuthName "Protected Area"
AuthUserFile path/to/.htpasswd-file/relative/to/your/server's/root/directory
require valid-user 
```

带有用户名和密码的 .htpasswd 文件（也在文件夹“A”中）

文件夹“AC”中的一个 .htaccess 文件将该文件夹排除在保护之外：

```
Order Deny,Allow
Allow from all
Satisfy any 
```

特别是对于 .htpasswd 文件，我会使用这样的在线生成器：[http ://tools.dynamicdrive.com/password/](http://tools.dynamicdrive.com/password/)

# c# - 在 C# 中使用 REST PUT

> ID：11108457
> 
> 赞同：0
> 
> 时间：2012-06-19T19:59:33.217
> 
> 标签：c#, rest

我正在使用 REST API，并且正在尝试对其进行`PUT`处理。我发现这段代码我要试一试：

```
 static void Main()
    {
            string xml = "<xml>...</xml>";
            byte[] arr = System.Text.Encoding.UTF8.GetBytes(xml);
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("http://localhost/");
            request.Method = "PUT";
            request.ContentType = "text/xml";
            request.ContentLength = arr.Length;
            Stream dataStream = request.GetRequestStream();
            dataStream.Write(arr, 0, arr.Length);
            dataStream.Close();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            string returnString = response.StatusCode.ToString();
            Console.WriteLine(returnString);
    } 
```

如果可能的话，我想做一件事，但似乎找不到任何关于它的东西。我想传递文本字段的数据 so, `txtEmail.Text`,`txtFirstName.Text`等。这可能吗？如果，那我该怎么做呢？这段代码看起来会起作用吗？不幸的是，我正在使用的 API 的文档非常少。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:03:23.417

代码行

```
Stream dataStream = request.GetRequestStream();
dataStream.Write(arr, 0, arr.Length);
dataStream.Close(); 
```

向远程网站写一些东西。请求流是向服务器提供数据的方式，因此您将创建一个字符串/对象，将其写入流以传输到服务器。在您的示例`<xml>...</xml>`中被发送到服务器。

# ruby-on-rails - 测试此密码对于当前登录的用户是否正确

> ID：11108459
> 
> 赞同：1
> 
> 时间：2012-06-19T19:59:41.157
> 
> 标签：ruby-on-rails, authlogic

我正在为使用这些字段构建的用户构建“更改密码”表单：

*   旧密码
*   新密码
*   确认密码

我需要一种方法来检查当前登录的用户密码是否与“旧密码”字段相同，是否有可能使用 authlogic 执行此操作？我找不到测试密码的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:09:12.097

Authlogic 有一个有效的密码？方法。见：[http ://rubydoc.info/github/binarylogic/authlogic/master/Authlogic/ActsAsAuthentic/Password/Methods/InstanceMethods#valid_password%3F-instance_method](http://rubydoc.info/github/binarylogic/authlogic/master/Authlogic/ActsAsAuthentic/Password/Methods/InstanceMethods#valid_password%3F-instance_method)

所以你可以

```
if @user.valid_password?(params[:old_password])
  @user.password = params[:new_password]
  @user.password_confirmation = params[:new_password_confirmation]
end 
```

（或类似的）

# python - ImportError：没有名为 Cython.Distutils 的模块

> ID：11108461
> 
> 赞同：61
> 
> 时间：2012-06-19T19:59:52.950
> 
> 标签：python, importerror, enthought

我在尝试`zenlib`使用其`setup.py`文件安装 Python 库时遇到了一个奇怪的问题。当我运行`setup.py`文件时，我收到一个导入错误，说

> ImportError：没有名为 Cython.Distutils 的模块

但我确实有这样的模块，我可以在 python 命令行上导入它而没​​有任何麻烦。为什么我会收到此导入错误？

我认为问题可能与我使用的是预先安装的[Enthought Python Distribution](https://www.enthought.com/product/enthought-python-distribution/)而不是使用 Ubuntu 12.04 附带的 Python 2.7 的事实有关。

更多背景：这正是我在尝试运行 setup.py 时得到的：

```
enwe101@enwe101-PCL:~/zenlib/src$ sudo python setup.py install
Traceback (most recent call last):
  File "setup.py", line 4, in <module>
    from Cython.Distutils import build_ext
ImportError: No module named Cython.Distutils 
```

但它可以从命令行工作：

```
>>> from Cython.Distutils import build_ext
>>> 
>>> from fake.package import noexist
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named fake.package 
```

请注意，第一个导入有效，第二个引发错误。将此与 setup.py 的前几行进行比较：

```
#from distutils.core import setup
from setuptools import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import os.path 
```

我确保 Enthought Python Distribution 而不是 Ubuntu 附带的 python 是默认运行的，方法是在我的 bash $PATH 环境变量之前添加 editor `~/.bashrc`，并将其添加为最后一行：

```
export PATH=/usr/local/epd/bin:$PATH 
```

确实`which python`吐出来了`/usr/local/epd/bin/python`......不知道还能尝试什么，我进入了我的站点包目录 ( `/usr/local/epd/lib/python2.7/site-packages`) 并授予对`Cython`、`Distutils`、`build_ext.py`和`__init__.py`文件的完全权限 (r、w、x)。尝试可能很愚蠢，但它没有任何改变。

想不出接下来要尝试什么！？有任何想法吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-11-01T08:38:09.487

安装 Cython：

```
pip install cython 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-10T09:25:42.210

你的 sudo 没有得到正确的 python。这是 sudo 在 Ubuntu 中的已知行为。有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/257616/sudo-changes-path-why)。您需要确保 sudo 调用正确的 python，或者使用完整路径：

```
sudo /usr/local/epd/bin/python setup.py install 
```

或通过执行以下操作（在 bash 中）：

```
alias sudo='sudo env PATH=$PATH'
sudo python setup.py install 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-11-16T04:19:19.403

对于 python3 使用

```
sudo apt-get install cython3 
```

对于 python2 使用

```
sudo apt-get install cython 
```

详细信息可以在[这里阅读](https://superuser.com/questions/388750/install-cython-on-python-3-x)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-12-12T16:54:50.467

跑

> `which python`

那就是您的系统也默认的python的路径，然后转到@tiago的方法：

> `sudo <output of which python> setup.py install`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-12T12:36:09.573

我只给你一个建议：创建一个 virtualenv。这将确保您只有一个版本的 python 和本地安装的所有包（而不是在整个系统上）。
应该是解决方案之一。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-20T14:38:05.337

在 CLI-python 中，导入 sys 并查看 sys.path 里面的内容
然后尝试使用`export PYTHONPATH=whatyougot`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-14T07:03:10.767

在 ubuntu 14.04 中运行以下命令为我解决了这个问题：

```
sudo apt-get install python-dev    
sudo apt-get install libusb-1.0-0-dev
sudo apt-get install libsystemd-daemon-dev
sudo pip install cython 
```

这个链接帮助了我：[https ://github.com/trezor/python-trezor/issues/40](https://github.com/trezor/python-trezor/issues/40)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-01T17:08:20.000

在现代又遇到了这个问题。解决方案很简单：

```
pip uninstall cython && pip install cython 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-03T07:07:31.127

读了一千个这样的线程，最后得到了 Python 3。（如果你有这种安装，请用 pip3 替换 pip，如果你`pip uninstall cython`在运行任何这些之前尝试过其他解决方案，请运行）

苹果电脑：

```
brew install cython
pip install --upgrade cython 
```

Ubuntu

```
sudo apt-get install cython3 python-dev  
pip install --upgrade cython 
```

Windows（必须有 conda，并且 MinGW 已经在路径中）

```
conda install cython
conda install --upgrade cython 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-28T04:00:11.610

这很容易。

你可以`install cython`先试试打包。

它将升级您在 python 中内置的**easy_install 。**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-07T11:31:51.343

我依赖于 Cython 上的第三方库，由于 ImportError，我没有设法在 Travis 上构建项目。如果有人需要它 - 在安装 requirements.txt 之前运行这个命令：

> pip install Cython --install-option="--no-cython-compile"

安装 GCC 也可能有所帮助。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2013-08-12T12:06:57.273

[只需从http://cython.org/#download](http://cython.org/#download)安装 Cython 并使用此命令安装它

```
sudo python setup.py install 
```

然后运行命令

```
sudo python -c 'import Cython.Distutils' 
```

它将被安装并且错误消息将消失。

# django - 多种类型的Django-MPTT叶节点

> ID：11108462
> 
> 赞同：3
> 
> 时间：2012-06-19T19:59:58.677
> 
> 标签：django, hierarchical-data, django-mptt

我正在开发一个hierchical 应用程序，其中叶节点可以是不同模型的实例。我不知道如何使它与 django-mptt 应用程序一起工作。在那个应用程序中这甚至可能吗？如果是，我做错了什么？如果没有，有什么我想做的吗？

以下是模型的基本结构：

```
class FolderItemBase(MPTTModel):
    order = models.PositiveIntegerField()

    class Meta:
        abstract = True

    class MPTTMeta:
        parent_attr = 'folder'
        order_insertion_by = ['order']

class Folder(FolderItemBase):
    folder = TreeForeignKey('Folder', related_name='folders', blank=True, null=True)
    ...

class Image(FolderItemBase):
    folder = TreeForeignKey('Gallery', related_name='images') # cannot be null since leaf has to be inside of a folder
    ... 
```

当我尝试执行以下操作时，我只能获得文件夹子项，而没有图像。当我尝试获取图像的祖先时也是如此

```
>>> folder1 = Folder.objects.create(title='Folder 1', order=0)
>>> folder2 = Folder(title='Folder 2', order=0)
>>> folder2.insert_at(folder1, save=True)
>>> image = Image(...)
>>> image.insert_at(folder1, save=True)
>>> folder1.get_children()
[<Folder: Folder 2>]
>>> image.get_ancestores()
[] 
```

在这一切之后，这就是事物在数据库中的存储方式：

```
Folder table
----------------
+----+-------+-----+------+---------+-------+-----------+----------+
| ID | order | lft | rght | tree_id | level | folder_id | title    |
+----+-------+-----+------+---------+-------+-----------+----------+
| 1  | 0     | 1   | 4    | 1       | 0     |           | Folder 1 |
+----+-------+-----+------+---------+-------+-----------+----------+
| 2  | 0     | 2   | 3    | 1       | 1     | 1         | Folder 2 |
+----+-------+-----+------+---------+-------+-----------+----------+

Images Table
------------
+----+-------+-----+------+---------+-------+-----------+
| ID | order | lft | rght | tree_id | level | folder_id |
+----+-------+-----+------+---------+-------+-----------+
| 1  | 1     | 2   | 3    | 1       | 1     | 1         |
+----+-------+-----+------+---------+-------+-----------+ 
```

如您所见，它计算了图像的级别编号和正确的（至少看起来是）左右编号，但是它不会更新文件夹表中的任何内容，因此当您尝试进行查询时, 没有被选中。

任何指针表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T14:43:55.150

AFAIK，这是不可能的；`django-mptt`背负着 Django 的`QuerySet`，它只适用于一种类型的东西。您可以使用 contenttypes 框架将“真实”项目与类似的东西相关联`FolderItem`，这将仅用于层次结构，例如

```
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class FolderItem(MPTTModel):
    folder = TreeForeignKey('Folder', related_name='folders', blank=True, null=True
    order = models.PositiveIntegerField()
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    class Meta:
        abstract = True

    class MPTTMeta:
        parent_attr = 'folder'
        order_insertion_by = ['order'] 
```

然后，当您使用 django-mptt 管理器方法等时，您将返回一个`FolderItem`s 的查询集，并且您可以通过通用外键在迭代集合时访问每个查询集`Folder`。`Image`

但是，请注意，这在数据库查询方面可能会很昂贵，因为每次访问通用外键时，都必须发出新查询。

# ruby-on-rails - Twitter ruby gem 速率限制

> ID：11108464
> 
> 赞同：0
> 
> 时间：2012-06-19T20:00:21.193
> 
> 标签：ruby-on-rails, ruby, twitter

我正在构建一个使用 Twitter Ruby gem 调用 Twitter API 的 rails 应用程序。我自己授权了这个应用程序，所以我每小时接到的电话超过了正常的 150 个（我想我会接到 350 个），但在生产中这可能还不够。除了缓存（已经这样做）和要求用户自己登录之外，我还有哪些选择可以避免速率限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:16:10.827

您需要获取用户**oauth_token**和用户**oauth_token_secret**，然后代表他执行请求（因此您没有限制）。

所以，假设你有**token**和**secret_token**，你可以这样做：

```
@client_twitter = Twitter::Client.new(
      :oauth_token => token,
      :oauth_token_secret => secret_token
    ) 
```

只需使用该@client_twitter 执行请求。例如：

`@client_twitter.profile_image(uid)`

所以，你可能会问：我如何获得 oauth_token 和 oauth_token_secret？他们需要授予您的应用程序执行此操作的权限。您可以使用[OmniAuth](https://github.com/intridea/omniauth)，您将在经过身份验证后返回的哈希中看到令牌和秘密令牌。

# sql - 简单的动态 TSQL 查询语法

> ID：11108465
> 
> 赞同：8
> 
> 时间：2012-06-19T20:00:23.533
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, dynamic-sql

这可能是一个简单的答案，但我已经盯着它太久了......

我有以下查询，它将存储过程输入参数作为变量名并计算该表中的记录。我想将动态语句 (@toStartStr) 的结果检索到变量 (@toStart) 中。

```
-- @tempTableName = SProc input parameter
DECLARE @toStartStr nvarchar(150);
DECLARE @toStart int;
SET @toStartStr = 'SELECT @toStart = COUNT(ID) FROM ' + @tempTableName;
EXEC(@toStartStr); 
```

现在，一个错误表明@toStart 不能与字符串 SELECT 连接，但这是我想要的要点。谁能看到我做错了什么？或者提出替代方案？仅供参考 SQL 2008 R2。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T20:04:04.887

```
DECLARE @sql NVARCHAR(255);

DECLARE @toStart INT;

SET @sql = N'SELECT @toStart = COUNT(ID) FROM ' + QUOTENAME(@tempTableName);

EXEC sp_executesql @sql, N'@toStart INT OUTPUT', @toStart OUTPUT;

PRINT @toStart; 
```

但是，如果您可以忽略当前正在进行的事务（并且您使用的是 SQL Server 2005 或更高版本 - 请在提问时指定版本！），那么有一种更简单、更有效的方法可以做到这一点。

```
DECLARE @toStart INT;

SELECT @toStart = SUM(rows) 
  FROM sys.partitions
  WHERE [object_id] = OBJECT_ID(@tempTableName)
  AND index_id IN (0,1);

PRINT @toStart; 
```

为了完整起见，这里有一个 SQL Server 2000 的解决方案，它也不需要任何特殊权限（只需连接和公众成员）：

```
DECLARE @toStart INT;

SELECT @toStart = [rows] 
  FROM sysindexes
  WHERE id = OBJECT_ID(@tempTableName)
  AND indid IN (0,1);

PRINT @toStart; 
```

也就是说，如果您使用计数来确定下一个 ID 可能是什么，或者类似的东西，我认为您正在以错误的方式处理这个问题，因为可以删除行并且如果它是标识列值可以跳过由于回滚。

# php - 如何分离获取数据库返回的多个数组？

> ID：11108467
> 
> 赞同：1
> 
> 时间：2012-06-19T20:00:32.877
> 
> 标签：php, database, arrays, pdo

我正在使用 PDO 的 FETCH_ASSOC 从数据库中获取数据。不幸的是，它为每一行创建了一个新数组。

```
Array (
  key => value
)

Array (
  key2 => value2
) 
```

有没有办法分离数组？我想创建一个数组数组，但如果我能够分离数组，我知道该怎么做。

```
$q = $DBH->query($sql) or die("failed!");
$q->setFetchMode(PDO::FETCH_ASSOC);
while($r = $q->fetch()){
    print_r($r);
} 
```

编辑：这就是我不希望大数组看起来的样子： `Array( [0] => Array(...), [1] => Array(...) ... [n] => Array(...) )`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:37:20.810

确实是这样的意思吗？

编辑：

```
$result = $q->fetchAll();
print_r($result); 
```

来自： [http ://www.php.net/manual/en/pdostatement.fetchall.php](http://www.php.net/manual/en/pdostatement.fetchall.php)

# rest - JPA 2.0 元模型能否用于确定双向关联的双方

> ID：11108473
> 
> 赞同：2
> 
> 时间：2012-06-19T20:00:54.663
> 
> 标签：rest, jpa, orm, metamodel

我正在构建一个库，该库通过 REST 接口直接公开持久性单元中的实体，以包含在 JAX-RS 或标准 Web 应用程序中。

为了方便这个库的可用性，我希望库本身在必要时管理双向关联的设置/取消设置，以便使用简单的状态表示来实现复杂实体关系的持久化和修改。

*例如，考虑典型的“项目和员工”模型，并假设项目*与*员工*之间存在一对多的关系——一个*项目*可以包含多个*员工*实体，而一个*员工*可能只“属于”一个*项目*一次。

还假设这种关系是双向的 - *Employee*有一个*project*属性，而*Project*有一个*employees*属性，它返回当前“属于” *Project的**Employee*实体的集合。*Employee.project*和*Project.employees*属性 映射了双向关联的两侧。

 ***考虑以下网址：

```
PUT /Project/1/employees 
```

以及伴随的（JSON）状态表示

```
//Employee representation
{
   firstName: "some", 
   lastName:  "guy",
   salary: 1000000.01,
   ...
   ...
} 
```

此 URL/状态表示组合指示我的库构建*Employee*实体并将其添加到其标识属性产生值“1”的*项目的**Project.employees* 集合中。

 *我需要做的是，给定**标准**的Metamodel API，确定*Employee*是否有一些属性可以满足该关联的双向方面（如果存在），以便我可以将该属性设置为有问题的*Project*实体.

换句话说，我需要能够确定*Employee*具有 满足*Project.employees*关联的双向组件的*Employee.project属性。*

 *因此状态/URL 组合本质上执行以下任务：

```
EntityManager em = ....;

//this is the Employee represented by the state representation    
Employee employee = ..... ;

Object id = 1;
Project project = em.find( Project.class, id );
project.getPersons().add( employee ); 
```

我需要知道**何时**执行以下操作

```
employee.setProject( project ); 
```

我当前的实现依赖于模仿 JPA 2.0 映射中的 'mapped-by' 属性的自定义注释，并且我计划在 JPA 2.0 注释中实现对 'mapped-by' 属性值的检查。这可行，但它需要专有配置（我试图摆脱）或 JPA 2.0 注释（如果有人专门使用映射文件怎么办？）。

如果在给定 Entity java 类型和 Metamodel API 时，任何人都可以指出我确定双向关联双方所涉及的属性的正确方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:32:52.053

我得出的结论是，没有办法从标准持久性元模型中获得这样的双向数据。我已经通过使用现有的 JPA 2.0 注释解决了我的问题，如果正在使用 XML 映射，则回退到自定义 @Bidirectional 注释。*****

# php - 关闭 Firefox 后 PHP 会话变量保持设置

> ID：11108476
> 
> 赞同：0
> 
> 时间：2012-06-19T20:00:59.210
> 
> 标签：php, mysql

> **可能重复：**
> [Firefox 会话 cookie](https://stackoverflow.com/questions/777767/firefox-session-cookies)

我正在创建一个网站，仅允许用户在登录时查看某些页面。为此，我检查是否设置了 $_SESSION['uid'] ，如果没有，我将用户发送回主页而不是私人页面。但是，在用户关闭他的浏览器后，$_SESSION['uid'] 保持设置状态，因此允许用户查看私人页面而无需再次登录。为什么是这样？为什么 $_SESSION['uid'] 变量在浏览器会话中保持设置？该网站在 Chrome 中正常运行，但在 FF 中无法正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:26:04.367

您可以尝试更改 PHP 设置以强制过期时间：

```
ini_set('session.cookie_lifetime', 0);
ini_set("session.cache_expire", 0); 
```

这也可以工作（关闭浏览器时自动使 cookie 过期）：

```
ini_set('session.use_only_cookies', 0); 
```

# xml - 如何将 ((a|b)|(a,b)) 转换为 XSD？

> ID：11108478
> 
> 赞同：0
> 
> 时间：2012-06-19T20:01:07.020
> 
> 标签：xml, xsd

如何将 ((a|b)|(a,b)) 转换为 XSD？

此代码违反“唯一粒子归属”规则：

```
<xs:choice> 
  <xs:choice> 
    <xs:element ref="a"/> 
    <xs:element ref="b"/> 
  </xs:choice> 
  <xs:sequence> 
    <xs:element ref="a"/> 
    <xs:element ref="b"/> 
  </xs:sequence> 
</xs:choice> 
```

# javascript - jQuery Slider UI 值与用于乘法计算的输入混合

> ID：11108482
> 
> 赞同：1
> 
> 时间：2012-06-19T20:01:15.670
> 
> 标签：javascript, jquery, jquery-ui

第一次在这里发帖。我很感激任何帮助。我计划积极参与并提供帮助！

我查看了其他帖子，并没有发现任何完全相关的内容。

这很接近：[从 jQuery UI 滑块中获取值](https://stackoverflow.com/questions/5307325/getting-the-value-from-a-jquery-ui-slider)

有人有使用 jQuery Slider UI 的经验吗？

我能够将滑块的初始值传递给我编写的脚本，但我想在每次滑块移动到#total 字段的变量“a”时传递该值。

有什么帮助吗？

[http://jsbin.com/ebahur/21/edit#javascript,html,live](http://jsbin.com/ebahur/21/edit#javascript,html,live)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:44:54.980

像这样：**[jsFiddle示例](http://jsfiddle.net/j08691/9sLFy)**

我将该函数从您的输入更改中移出，因此您可以在输入更改和滑块移动时调用它。

**jQuery**

```
$("#slider").slider({
    range: "min",
    value: 35,
    min: 20,
    max: 95,
    step: 5,
    slide: function(event, ui) {
        $("#amount").val("$" + ui.value);
        calc();
    }
});

$("#amount").val("$" + $("#slider").slider("value"));

$('#total').css('color', 'red');

$('input').change(calc);
function calc() {
    var n = $('#n').val();
    var y = $('#y').val() / 100; /*var a = $('#a').val() / 100;*/
    var a = $('#slider').slider('value') / 100;
    var x = $('#x').val();
    var total = n * y * a * x * 0.35;
    if (!isNaN(total)) {
        $('#total').attr('value', total);
    } else {
        alert('Opps Error! Please only numbers');
    }
} 
```

​</p>

# svn - 通过过滤器命令编辑 svn 属性

> ID：11108484
> 
> 赞同：1
> 
> 时间：2012-06-19T20:01:25.637
> 
> 标签：svn, shell

我想`sed -e 's/OLD/NEW/g'`递归地对 svn 属性值应用过滤器（例如）。

**首先**，在单个目标上，我可以执行以下操作之一：

1.  `svn propget --strict PROPNAME TARGET | sed -e 's/OLD/NEW/g' | svn propset PROPNAME --file=- TARGET`
2.  `svn propset PROPNAME --file=<(svn propget --strict PROPNAME TARGET | sed -e 's/OLD/NEW/g') TARGET`
3.  `SVN_EDITOR="sed -i -e 's/OLD/NEW/g'" svn propedit PROPNAME TARGET`
4.  `svn propedit --editor-cmd "sed -i -e 's/OLD/NEW/g'" PROPNAME TARGET`

哪一个是最好的？

我不喜欢 1 或 2 的是，即使`svn propget ... | sed ...`管道失败，`svn propset`仍会执行，可能在空的标准输入上，重置属性。

另一方面，我不喜欢 3 或 4 的地方是整个过滤命令行应该被引用并制成一个字符串，这有时会使引用和参数扩展变得棘手。并注意选项`-i`- 过滤命令应该采用文件参数并就地编辑它，这意味着这些方法不能应用于不提供这种就地编辑功能的命令，例如`tr`甚至`awk`.

有没有更好的选择，或者对其中之一有任何可能的改进？

**其次**，我如何递归地执行此操作 - 即在给定 TARGET 下具有指定属性 PROPNAME 的每个目标上？我不能只添加`-R`到`svn propget`，因为它将所有内容连接到一个文本流中，`svn propedit`甚至没有`-R`. 看来我必须做类似的事情：

```
svn proplist -R --only-with PROPNAME TARGET | while read target
do
    # do one of the above on "$target"
done 
```

但是`svn proplist`没有这样的东西`--only-with`，我不能轻易地解析它的输出并只获取那些具有该属性的目标的名称。

有什么好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T20:17:43.290

的输出`svn propget -R`不容易解析，但`svn propget -v -R`是，所以我决定运行一次并解析它的输出。

首先，我尝试了进程替换`>(...)`，但正如在[这个线程](https://stackoverflow.com/questions/11130354/bash-how-do-i-ensure-termination-of-process-substitution-used-with-exec)中所问的那样，我无法强制或等待此类子进程的终止，因此输出消息是一团糟，尽管它确实有效。因此，正如在[同一个线程](https://stackoverflow.com/questions/11130354/bash-how-do-i-ensure-termination-of-process-substitution-used-with-exec)中回答的那样，我使用了协同进程：

```
#!/bin/bash
set -o errexit -o pipefail

if [ $# -le 2 ]; then
    echo "usage: $0 PROPNAME TARGET COMMAND [ARGS...]" >&2
    exit 1
fi
PROPNAME=$1; shift
TARGET=$1; shift
COMMAND=$1; shift

cleanup_and_wait() {
    if [[ ${COPROC[1]} =~ ^[0-9]+$ ]]; then
        eval "exec ${COPROC[1]}<&-"
        wait $COPROC_PID
    fi
}

unset curr_target
unset prev_line
while IFS= read -r line; do
    case "$line" in
    "    "*)
        line=${line:4}
        if declare -p prev_line >/dev/null 2>&1; then
            echo "$prev_line" >&${COPROC[1]}
        fi
        prev_line=$line
        ;;
    "  "*)
        line=${line:2}
        if [ "$line" != "$PROPNAME" ]; then
            echo "Unexpected property: $line" >&2
        fi
        cleanup_and_wait
        coproc { "$COMMAND" "$@" | svn propset "$PROPNAME" --file=- "$curr_target"; } >&2
        unset prev_line
        ;;
    "Properties on '"*"':")
        line=${line%"':"}
        line=${line#"Properties on '"}
        curr_target=$line
        ;;
    esac
done < <(svn propget --verbose --recursive "$PROPNAME" "$TARGET")
cleanup_and_wait 
```

我不喜欢的一件小事是，即使给定的过滤器没有更改属性值，`svn propset`仍然会执行并打印`property 'PROPNAME' set on 'TARGET'`；最好只看到那些属性值实际发生变化的目标的消息。

# java - 报告生成器 Java

> ID：11108489
> 
> 赞同：1
> 
> 时间：2012-06-19T20:01:40.817
> 
> 标签：java, reporting

我正在寻找一个嵌入到**java应用程序中的****报告**生成器。

 **我想使用一些**文本**语言（例如 XML）来定义报告。

布局相当简单（没有流程）。我想打印带有图形、条形码和文本的标签。

我有哪些选择？哪些开源/免费生成器可用于 java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:10:28.490

[Jasper Reports](http://jasperforge.org/projects/jasperreports)（[维基百科](http://en.wikipedia.org/wiki/JasperReports)）可能是您正在寻找的东西。它也是开源的，并且具有适用于 IDE 的插件，例如[iReport](http://plugins.netbeans.org/plugin/4425/ireport) for NetBeans。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:08:52.963

[BIRT](http://www.eclipse.org/birt/)应该是合适的。它提供了一个完整的系统（设计引擎、报告引擎、图表引擎）。基础报告文件格式是 XML（[示例](http://download.eclipse.org/birt/downloads/examples/reports/2.1/highlighting/ProductListAfter.rptdesign)）。有一个 GUI 报表设计器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:05:32.030

这是各种转贴：

[对于简单的数据库/爱好者设置，什么是好的报告服务？](https://stackoverflow.com/questions/2541128/what-is-a-good-reporting-service-for-a-simple-database-hobbyist-setup)

先搜索一下，有很多意见。Jasper 是我的选择，不一定是最好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T11:19:45.523

[使用 Jasper Reports 的Dynamic Reports](http://dynamicreports.sourceforge.net/)可能是一个很好的解决方案。**

# c# - 产量模式，状态机流程

> ID：11108491
> 
> 赞同：1
> 
> 时间：2012-06-19T20:01:41.407
> 
> 标签：c#, .net, linq, yield

我有以下文件，我正在使用迭代器块来解析文件中某些重新出现的节点/部分。我最初使用正则表达式来解析整个文件，但是当节点中不存在某些字段时，它将不匹配。所以我正在尝试使用收益模式。文件格式如下与我使用的代码一致。我从文件中想要的只是将复制节点作为单独的部分，因此我可以使用键字符串获取其中的字段并存储在对象集合中。我可以开始解析第一个复制发生的位置，但无法在复制节点结束的地方结束它。

**文件格式：**

```
X_HEADER
{
    DATA_MANAGEMENT_FIELD_2     NA
    DATA_MANAGEMENT_FIELD_3     NA
    DATA_MANAGEMENT_FIELD_4     NA
    SYSTEM_SOFTWARE_VERSION     NA
}
Y_HEADER
{
    DATA_MANAGEMENT_FIELD_2     NA
    DATA_MANAGEMENT_FIELD_3     NA
    DATA_MANAGEMENT_FIELD_4     NA
    SYSTEM_SOFTWARE_VERSION     NA
}
COMPLETION
{
    NUMBER          877
    VERSION         4
    CALIBRATION_VERSION 1
    CONFIGURATION_ID    877    
}
REPLICATE
{
    REPLICATE_ID            1985
    ASSAY_NUMBER            656
    ASSAY_VERSION           4
    ASSAY_STATUS            Research
    DILUTION_ID         1
}
REPLICATE
{
    REPLICATE_ID            1985
    ASSAY_NUMBER            656
    ASSAY_VERSION           4
    ASSAY_STATUS            Research
} 
```

**代码：**

```
static IEnumerable<IDictionary<string, string>> ReadParts(string path)
{
    using (var reader = File.OpenText(path))
    {
        var current = new Dictionary<string, string>();
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            if (string.IsNullOrWhiteSpace(line)) continue;

            if (line.StartsWith("REPLICATE"))
            {
                yield return current;
                current = new Dictionary<string, string>();
            }
            else
            {
                var parts = line.Split('\t');
            }

            if (current.Count > 0) yield return current;
        }
    }
}

public static void parseFile(string fileName)
    {
        foreach (var part in ReadParts(fileName))
        {
           //part["fIELD1"] will retireve certain values from the REPLICATE PART HERE
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:10:07.007

好吧，听起来您只需要在获得右大括号时“关闭”一个部分，并且仅`yield return`在那时。例如：

```
static IEnumerable<IDictionary<string, string>> ReadParts(string path)
{
    using (var reader = File.OpenText(path))
    {
        string currentName = null;
        IDictionary<string, string> currentMap = null;
        while ((line = reader.ReadLine()) != null)
        {
            if (string.IsNullOrWhiteSpace(line))
            {
                continue;
            }
            if (line == "{")
            {
                if (currentName == null || currentMap != null)
                {
                    throw new BadDataException("Open brace at wrong place");
                }
                currentMap = new Dictionary<string, string>();
            }
            else if (line == "}")
            {
                if (currentName == null || currentMap == null)
                {
                    throw new BadDataException("Closing brace at wrong place");
                }
                // Isolate the "REPLICATE-only" requirement to a single
                // line - if you ever need other bits, you can change this.
                if (currentName == "REPLICATE")
                {
                    yield return currentMap;
                }
                currentName = null;
                currentMap = null;
            }
            else if (!line.StartsWith("\t"))
            {
                if (currentName != null || currentMap != null)
                {
                    throw new BadDataException("Section name at wrong place");
                }
                currentName = line;
            }
            else
            {
                if (currentName == null || currentMap == null)
                {
                    throw new BadDataException("Name/value pair at wrong place");
                }
                var parts = line.Substring(1).Split('\t');
                if (parts.Length != 2)
                {
                    throw new BadDataException("Invalid name/value pair");
                }
                currentMap[parts[0]] = parts[1];
            }                
        }
    }
} 
```

老实说，现在这是一个非常可怕的功能。我怀疑我会将它放在它自己的类中（可能是嵌套类）来存储状态，并使每个处理程序都有自己的方法。哎呀，这实际上是状态模式可能有意义的情况:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:30:38.620

```
private IEnumerable<IDictionary<string, string>> ParseFile(System.IO.TextReader reader)
{
    string token = reader.ReadLine();

    while (token != null)
    {
        bool isReplicate = token.StartsWith("REPLICATE");
        token = reader.ReadLine(); //consume this token to either skip it or parse it

        if (isReplicate)
        {     
            yield return ParseBlock(ref token, reader);
        }
    }
}

private IDictionary<string, string> ParseBlock(ref string token, System.IO.TextReader reader)
{
    if (token != "{")
    {
        throw new Exception("Missing opening brace.");
    }

    token = reader.ReadLine();

    var result = ParseValues(ref token, reader);

    if (token != "}")
    {
        throw new Exception("Missing closing brace.");
    }

    token = reader.ReadLine();

    return result;
}

private IDictionary<string, string> ParseValues(ref string token, System.IO.TextReader reader)
{
    IDictionary<string, string> result = new Dictionary<string, string>();

    while (token != "}" and token != null)
    {
        var args = token.Split('\t');

        if (args.Length < 2)
        {
            throw new Exception();
        }

        result.Add(args[0], args[1]);

        token = reader.ReadLine();
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:09:42.587

如果`yield return current;`在 while 循环结束后添加 a，您将获得最终字典。

我相信最好检查'}'作为当前块的结尾，然后把它放在`yield return`那里。尽管您不能使用正则表达式来解析整个文件，但您可以使用正则表达式来搜索行内的键值对。以下迭代器代码应该可以工作。它只会返回 REPLICATE 块的字典。

```
 // Check for lines that are a key-value pair, separated by whitespace.
// Note that value is optional
static string partPattern = @"^(?<Key>\w*)(\s+(?<Value>\.*))?$";

static IEnumerable<IDictionary<string, string>> ReadParts(string path)
{
    using (var reader = File.OpenText(path))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            // Ignore lines that just contain whitespace
            if (string.IsNullOrWhiteSpace(line)) continue; 

            // This is a new replicate block, start a new dictionary
            if (line.Trim().CompareTo("REPLICATE") == 0)
            {
                yield return parseReplicateBlock(reader);
            }
        }
    }
}

private static IDictionary<string, string> parseReplicateBlock(StreamReader reader)
{
    // Make sure we have an opening brace
    VerifyOpening(reader);
    string line;
    var currentDictionary = new Dictionary<string, string>();
    while ((line = reader.ReadLine()) != null)
    {
        // Ignore lines that just contain whitespace
        if (string.IsNullOrWhiteSpace(line)) continue;

        line = line.Trim();

        // Since our regex used groupings (?<Key> and ?<Value>), 
        // we can do a match and check to see if our groupings 
        // found anything. If they did, extract the key and value. 
        Match m = Regex.Match(line, partPattern);
        if (m.Groups["Key"].Length > 0)
        {
            currentDictionary.Add(m.Groups["Key"].Value, m.Groups["Value"].Value);
        }
        else if (line.CompareTo("}") == 0)
        {
            return currentDictionary;
        }
    }
    // We exited the loop before we found a closing brace, throw an exception
    throw new ApplicationException("Missing closing brace");
}

private static void VerifyOpening(StreamReader reader)
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        // Ignore lines that just contain whitespace
        if (string.IsNullOrWhiteSpace(line)) continue;

        if (line.Trim().CompareTo("{") == 0)
        {
            return;
        }
        else
        {
            throw new ApplicationException("Missing opening brace");
        }
    }
    throw new ApplicationException("Missing opening brace");
} 
```

**更新：**我确保正则表达式字符串包含没有值的情况。此外，组索引全部更改为使用组名称，以避免在修改正则表达式字符串时出现任何问题。

# java - 如何在 FaultMessageResolver 中解组 SOAP 错误？

> ID：11108495
> 
> 赞同：13
> 
> 时间：2012-06-19T20:02:00.110
> 
> 标签：java, web-services, jaxb, spring-ws

我是 Spring-WS 的新手，并且慢慢地开始思考它。现在，我正在编写一个简单的客户端来与现有的 WS 进行通信。我正在使用 WebServiceTemplate 和 marshalSendAndReceive 方法。一切正常。

但是，当发生 SOAP 故障时，WST 会引发 SoapFaultClientException。我注意到我可以创建自己的 FaultMessageResolver 来检查 SOAP 错误中包含的内容。但是，当我尝试在 FaultMessageResolver 中解组 WebServiceMessage 时，我收到以下错误消息：

```
JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: unexpected element (uri:"http://schemas.xmlsoap.org/soap/envelope/", local:"Fault"). Expected elements are .... 
```

显然，我的解组器配置不正确。我是否必须自己使用 xjc 生成 JAXB 故障模型才能解组错误？我有点惊讶这还不存在。

有没有更好的方法从我的 soap:fault 响应中额外添加我的自定义错误信息？我的错误如下所示，我正在尝试提取/访问 serviceErrors 项。

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Server</faultcode>
         <faultstring>Blaze Data Error</faultstring>
         <detail>
            <ns14:serviceErrors xmlns="http://www.nb.com/ClientServices/LendingSimulation/CalculateProfitabilityRequest" xmlns:ns13="http://www.nb.com/fw/errorMgmt" xmlns:ns14="http://www.nb.com/ClientServices/LendingSimulation/V1" >
               <ns13:faultstring>ServiceExecutionError</ns13:faultstring>
               <ns13:serviceError>
                  <ns13:errorCode>C10F1013</ns13:errorCode>
                  <ns13:errorType>B</ns13:errorType>
                  <ns13:errorMessage>Unable to retreive additional data</ns13:errorMessage>
                  <ns13:fieldName>Message error received from PHClient :  [An unexpected error code was received : system=PH context=[empty]]</ns13:fieldName>
                  <ns13:systemId>Calculator</ns13:systemId>
                  <ns13:time>2012-06-19 14:45:10.151-0400</ns13:time>
               </ns13:serviceError>
            </ns14:serviceErrors>
         </detail>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

谢谢！

埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-09-06T09:13:20.053

我正在使用`org.springframework.ws.client.core.WebServiceTemplate`. 我在解组时遇到了同样的问题`Fault`。我通过将`WebServiceTemplate`属性设置`checkConnectionForFault`为`false`. 所以在我的情况下，这很可能是由于服务器没有为故障返回状态 500 引起的。

然后`spring-ws`解析故障并将其传递给默认值`FaultMessageResolver`，我得到了一个常规`SoapFaultClientException`捕获。

但这只是让我得到了错误的消息，所以我还必须添加一个自定义`FaultMessageResolver`并按照相同的行提取消息：

```
SoapFaultDetail faultDetail = ((SoapMessage) message).getSoapBody().getFault().getFaultDetail();
Iterator<SoapFaultDetailElement> detailEntries = faultDetail.getDetailEntries();
StringBuilder errorMessage = new StringBuilder();

while (detailEntries.hasNext()) {
    SoapFaultDetailElement detailElement = detailEntries.next();
    Node node = ((DOMResult) detailElement.getResult()).getNode();
    CustomServiceFault serviceFault = (CustomServiceFault) marshaller.unmarshal(new DOMSource(node));
    errorMessage.append(serviceFault.getErrorCode() + ": " + serviceFault.getErrorMessage());
}
throw new CustomException(errorMessage.toString()); 
```

编组器与用于`WebserviceTemplate`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T17:22:06.083

根据您收到的错误，您似乎正在尝试从`<soap:Fault>`节点开始解组 XML 源。如果没有看到您的 Java 代码，这意味着您可能正在尝试从`message.getSoapBody().getFault()`

您实际上需要更深入才能到达`<ns14:serviceErrors>`节点。您应该能够通过以下路径达到此目的......也许不是一次全部：）

```
message.getSoapBody().getFault().getFaultDetail().getDetailEntries().next() 
```

# javascript - 在 Leaflet 中创建自定义图层控件

> ID：11108499
> 
> 赞同：2
> 
> 时间：2012-06-19T20:02:18.743
> 
> 标签：javascript, leaflet, mapping, dom-events

我一直在制作带有许多静态图层的传单地图，这些静态图层可以使用传单的标准图层控件关闭和打开。

最近，我一直在尝试使用 onclick 方法运行函数，以在用户单击（当前静态）图例中的图像之一时从地图中添加和删除图层。我尝试了许多不同的方法来让它工作，我认为它与 javascript 和网页元素的加载顺序有关（但我对此很陌生，所以我可能是错的）。

无论如何，没有粘贴太多我的代码 - 我正在将所有脚本加载到文档的头部，如下所示：

```
<html>
<head>
<title>St. Louis River Estuary Deep Map</title>
<link rel="stylesheet" href="css/leaflet.css" />

<!--[if lte IE 8]>
<link rel="stylesheet" href="http://code.leafletjs.com/leaflet-0.3.1/leaflet.ie.css" />
<![endif]-->
<script type="text/javascript" src="js/leafletcopy.js"></script>
<script type="text/javascript" src="http://gettopup.com/releases/latest/top_up-min.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script type= "text/javascript" src="js/googlemaps.js"></script>

<script type="text/javascript"src='js/wax.leaf.min.js'></script>

<script type='text/javascript' src='js/htmlswitch.js'></script>
<link rel='stylesheet' href='css/webmapstylesheet1.css'/>
<!--[if lte IE 8]>
<link rel="stylesheet" href="leaflet.ie.css" />
<![endif]-->

<script type="text/javascript" src="js/hearding.js"></script>
<script type="text/javascript" src="js/boundaries.js"></script>
<script type="text/javascript" src="js/bath1.js"></script>
<script type="text/javascript" src="js/bath2.js"></script>
<script type="text/javascript" src="js/bath3.js"></script>
<script type="text/javascript" src="js/monitoring.js"></script> 
```

功能 removeRecreation() { map.removeLayer(recreationLayer); }; window.onload = function () { //创建全局映射变量 var map; var 娱乐层；我想我只是不确定要全局定义哪个变量，以使 removeRecreation 函数在我从附加到的图像上单击时调用该函数时有效运行。如以下代码所示：可以在以下位置找到实时版本：https://mywebspace.wisc.edu/axler/SLRE_Deep_Map/index2.html

```
</head>

<body>
    <div id ="divHeader">
        <h1>St. Louis River Deep Map</h1>
        <div class="navHome"><a href="http://stlre.pebbleonline.com/">return home</a></div>
    </div>

    <div id="legend">
        <h2>Legend:</h2>
        <hr>

        <p class ="legend"><img onclick = "removeRecreation();" src ="images/recreation1.png">Exploring</p>` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:25:46.307

当你在做“var map”时，你实际上是在声明一个局部变量（相对于你传递给 window.onload 的函数），所以 removeRecreation 函数看不到它。要解决这个问题，只需将“var map”移动到顶部（在 removeRecreation 定义之前）。

# javascript - 可以在文本字段中操作“自动完成浏览器数据”吗？

> ID：11108508
> 
> 赞同：1
> 
> 时间：2012-06-19T20:03:19.610
> 
> 标签：javascript, jquery, html, forms, xhtml

今天我阅读了一些关于在文本字段中生成的“自动完成”浏览器的帖子，我想知道是否可以使用 jQuery 操作这些结果，比如突出显示结果的某些部分或更改 bg 颜色（不是那个黄色的）或类似的东西。

我不是在谈论任何插件“自动完成”。

[这是我正在谈论的示例](http://jsfiddle.net/LM3nE/)（在文本输入中双击，可能会显示一些“电子邮件”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:05:31.950

浏览器处理自动完成。您的页面无法编辑。例如，我将其禁用，因此我在下拉列表中看不到任何内容。

排序相关：

您可以通过将`autocomplete="off"`属性添加到输入元素来禁用它。

# asp.net - 强类型视图下拉列表中缺少模型

> ID：11108509
> 
> 赞同：0
> 
> 时间：2012-06-19T20:03:20.030
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, views

首先，如果这个问题不清楚，我深表歉意，我将尝试尽可能清楚。

我的解决方案有 2 个项目：模型和视图/控制器。View/Controller 项目知道 Models 项目中有什么，但反之亦然。

我创建了一些文本模板来自动创建 CRUD 页面，这些页面在我使用“添加视图”对话框添加新视图时起作用。这显然发生在 View/Controller 项目中。很长一段时间以来，我一直在毫无问题地使用它。

我能够在没有语法错误或运行时错误的情况下运行该项目，但是当我使用“添加视图”对话框尝试创建一个新页面时，我选择了强类型选项，并且在 Models 项目中看不到任何内容。

我尝试过的事情：重新附加模型的 DLL 作为对视图/控制器项目的引用。Build and Rebuild 以及 Cleans 在对话框中手动键入所有内容（失败）。

我不想手动创建此页面，因为它很可能会产生错误/错误，而模板会减少我可能遇到的错误数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:54:32.373

不知道它是怎么做到的，但我再次清理了项目（在尝试失败后），它终于可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T08:04:11.367

在添加视图之前，只需构建解决方案，然后添加视图即可。如果它不起作用，那么你可以再次关注我，我会给你另一个解决方案

# javascript - JavaScript 函数声明与对象字面量

> ID：11108512
> 
> 赞同：1
> 
> 时间：2012-06-19T20:03:28.580
> 
> 标签：javascript

> **可能重复：**
> [使用文字创建 Javascript 对象与自定义构造函数](https://stackoverflow.com/questions/9995100/javascript-object-creation-using-literals-vs-custom-constructor-functions)
> [函数与对象文字符号 - 哪个更好，还是偏好问题？](https://stackoverflow.com/questions/10079544/function-vs-object-literal-notaion-which-is-better-or-is-it-a-matter-of-pref)

谁能告诉我以下两种在 JavaScript 中创建对象的方法之间的区别，或者更具体地说是它们的缺点/优点：

```
Function Foo() {
   function bar () {...}
} 
```

和

```
var Foo = {
   bar : function() {}
} 
```

另外因为在后一种方式中，没有`this`关键字，我怎样才能使它成为对象**实例**成员？

# javascript - jQuery UI - 多个动态生成的滑块和函数的变化

> ID：11108513
> 
> 赞同：2
> 
> 时间：2012-06-19T20:03:29.227
> 
> 标签：javascript, jquery, jquery-ui, slider, dynamically-generated

我正在使用 jQuery 和 jQuery UI 根据用户配置的数字动态构建滑块。但是我遇到了麻烦，当我创建滑块时，它似乎使所有滑块都变成了最后一个滑块。例如，我有八个滑块，每个滑块在滑动时都会将相应文本区域的值更改为我需要的值。然而，现在所有的滑块都改变了第八个文本区域，而不是它们对应的一个。

代码：

```
function buildSliders() {

 for(b = 0; b < bankCount; b ++)
 {
    $( "#slider"+b ).slider({
     value:20,
     min: 0,
     max: 254,
     step: 1,
     change: function( event, ui ) {
      sendDimCommand(b);
     }
    });
 }
};

function sendDimCommand(dimmerChannel) {
 var targetChannel = "sliderValue"+dimmerChannel;
 alert(targetChannel);
 document.getElementById(targetChannel).innerHTML = "blue";
} 
```

我很确定有办法解决这个问题，我已经研究过 .clone 和 .each 之类的东西，但是它们对我来说是不熟悉的概念，我不知道它们如何或是否会起作用。正如你所看到的，当滑动值改变时的功能都非常相似，它们只需要改变目标。

任何帮助将不胜感激，谢谢。

**编辑

这是我用来解决这个问题的代码：

函数 buildSliders() {

```
 for(b = 0; b < bankCount; b ++)
 {
    $( "#slider"+b ).slider({
     value:20,
     min: 0,
     max: 254,
     step: 1,
     change: function( event, ui ) {
      sendDimCommand(this.attributes["value"].value);
     }
    });
 }
};

function sendDimCommand(dimmerChannel) {
 var targetChannel = "sliderValue"+dimmerChannel;
 alert(targetChannel);
 $( "#"+targetChannel ).text($( "#slider"+dimmerChannel ).slider( "value" ) )
} 
```

当我创建 div 时：

```
for(r = 0; r < bankCount; r ++)
{
    var trTag = document.createElement("tr");
 tableTag.appendChild(trTag);
 var sliderLabelTag = document.createElement("td");
 sliderLabelTag.className = "RelayLabel";
 sliderLabelTag.colSpan= 2;
 sliderLabelTag.innerHTML = relayNames[r] + ": Slider Value";
 trTag.appendChild(sliderLabelTag);

 var sliderValueTag = document.createElement("td");
 sliderValueTag.id = "sliderValue" + r;
 sliderValueTag.innerHTML = "Waiting to Query";
 trTag.appendChild(sliderValueTag);

    var trTag = document.createElement("tr");
 tableTag.appendChild(trTag);
 var sliderCell = document.createElement("td");
 sliderCell.id = "Slider" + r;
 sliderCell.className = "sliderCell";
 sliderCell.colSpan = 3;
 sliderCell.innerHTML = "<div id=\"slider" + r + "\" value=\"" + r + "\" class=\"" + r + "\" name=\"" + r + "\"></div>";
 trTag.appendChild(sliderCell);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:46:39.207

似乎滑块对象未正确绑定。像下面这样的东西可能会做..

```
function buildSliders(divName) {
   //divName - container for the sliders
        $(divName).each(function() {
            $(this).empty().slider({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:21:53.477

我记得，将变量从 for 循环传递到回调时存在问题。在您的 .slider 行上方，尝试添加

`var c = b;`

然后在你的回调中做

```
sendDimCommand(c); 
```

我在使用 jQuery.each 时遇到了类似的问题，并且能够通过执行`$that = $(this);`然后`$that`在回调中使用来引用 jQuery 对象来解决这个问题。我认为类似的方法可能会对您有所帮助。

# r - 带有 colClasses 的 read.csv 中的错误：scan() 预期 'a real' 得到 'NULL'

> ID：11108514
> 
> 赞同：6
> 
> 时间：2012-06-19T20:03:37.627
> 
> 标签：r, csv, import

我正在使用 .csv 文件读取大型 csv 文件`read.csv`。一些网站建议使用 colClasses 为每一列定义类，以加快导入过程。

```
t = read.csv("pca.csv",header=TRUE,colClasses = classes)
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
scan() expected 'a real', got 'NULL'

classes = c("numeric","integer") 
```

我的一些数据中显然有空值。有没有办法在“数字”或“整数”包含空值的情况下使用 colClasses？此外，有关将大型数据集更快地导入 R 的任何其他技巧都会非常有帮助。我在 SQL 数据库中拥有所有数据，并且我尝试使用 RODBC，它比 read.csv() 慢得惊人。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T20:06:28.907

`na.strings='NULL'`在您的呼叫中使用`read.csv`.

# php - 使用 MySQL 和 PHP 创建可编辑的条目数据库

> ID：11108517
> 
> 赞同：0
> 
> 时间：2012-06-19T20:03:43.267
> 
> 标签：php, mysql

我的目标是创建一个条目表单 (addnew.php)，它允许我稍后使用不同的表单 (edit.php) 编辑条目。

目前 addnew.php 使用了一些文本字段和 2 个复选框，而我正在尝试做的是将表单中的信息插入 MySQL 数据库。来自文本字段的信息被插入到一个表中，来自复选框的信息被插入到另一个表中。

不过，现在，我正在尝试使用第三张表（如果需要）来制作一个交集表，这将允许我在编辑表单中使用 addnew.php 中使用的相同格式。

因此，换句话说，addnew.php 将有一些文本字段和复选框，edit.php 也会有，不同之处在于 edit.php 将填充信息，对于复选框，它们将是选中，用户可以选择选中更多框或取消选中已选中的框。

我现在拥有的三张桌子是：

```
articles:
id - articletitle - articleorganization - articledate - articleurl

tags:
id - tag_contents

articles_tags:
id - article_id - tag_id 
```

addnew.php 的代码是：

```
 <?php
 function renderForm($articletitle, $articleorganization, $articledate, $articleurl, $articletags )
 {
 ?>
. . .
            <td width="20%" align="right"><span class="field">Article Title:</span></td>
            <td width="80%" align="left"><span class="field">
              <input name="articletitle" type="text" value="<?php echo $articletitle; ?>" size="50"/>
            </span></td>
          </tr>
          <tr>
            <td align="right"><span class="field">Article Author:</span></td>
            <td align="left"><span class="field">
              <input name="articleorganization" type="text" value="<?php echo $articleorganization; ?>" size="50"/>
            </span></td>
          </tr>
          <tr>
            <td align="right"><span class="field">Access Date:</span></td>
            <td align="left"><span class="field">
              <input name="articledate" type="text" value="MM/DD/YYYY" size="50"/>
            </span></td>
          </tr>
          <tr>
            <td align="right"><span class="field">Article URL:</span></td>
            <td align="left"><span class="field">
            <input name="articleurl" type="text" value="<?php echo $articleurl; ?>" size="50"/>
            </span></td>
          </tr>
          <tr>
            <td align="right"><span class="field">Article Tags:</span></td>
            <td align="left"><span class="field">
              <input type="checkbox" name="articletags[]" value="geology" id="articletags_0" />
              <input type="checkbox" name="articletags[]" value="astronomy" id="articletags_1" />
            </span>
            </td>
          </tr>
          <tr>
            <td colspan="2" align="center" valign="middle"><input type="submit" name="submit" value="Add this Article" /></td>
          </tr>
        </table>
        . . .
</html>
<?php 
 }

 include('settings.php');

 if(count($articletags) > 0)
{
 $articletags_string = implode(",", $articletags);
}

 if($_SERVER['REQUEST_METHOD'] == 'POST')
 { 

 $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
 $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
 $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
 $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
 $articletags = implode(',', $_POST['articletags']);

 if ($articletitle == '' || $articleorganization == '')
 {

 $error = 'ERROR: Please fill in all required fields!';

 renderForm($articletitle, $articleorganization);
 }
  else
 {

 mysql_query("INSERT INTO articles SET articletitle='$articletitle',
      articleorganization='$articleorganization',
      articledate='$articledate',
      articleurl='$articleurl' ")

$article_id = mysql_insert_id();

mysql_query("INSERT INTO tags SET articletags='$articletags' ");

$tag_id = mysql_insert_id();

mysql_query("INSERT INTO articles_tags SET article_id='$article_id',
      tag_id='$tag_id' ")

 or die(mysql_error()); 

 header("Location:addsuccess.php"); 
 }
  }
    else

  {
   renderForm('','','','','');
  }
?> 
```

我现在遇到的麻烦是弄清楚下一步该做什么（在第二次插入之后）。我知道我需要建立一段关系，但我这辈子都不知道该怎么做。

我假设我需要将标签存储在`tags`表格中？但如果是这种情况，我如何获取他们的 ID 并将它们作为标签插入到文章中？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:13:39.343

如果您决定使用此模式，您应该使用表作为表中条目之间的`articles_tags`关系(1..*)。这意味着表中将有多个条目，与给定文章关联的每个标签具有相同和不同的条目。`articles``tags``articles_tags``article_id``tag_id`

`article_id`或者，您可以通过向表中添加字段来保持对标签所属文章的引用`tags`。

例子：

```
articles      |        tags          |        articles_tags
id  title         id  tag_text              a_t_id   a_id   t_id
4  Title1         8 Tagblahblah              1        4      8
5  title2         9  tagccccc                2        4      9
                                             3        5      8 
```

所以这些articles_tags 条目意味着ID 为4 的文章具有ID 为8 和9 的标签。标签8 也用于ID 为5 的文章。

这是 SQL 处理多对多关系的标准方式`(*..*)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:10:01.147

您可以使用 mysql_insert_id() 来获取最后插入的记录 ID。

# paperclip - Ckeditor 3.7.1 + Paperclip（电子邮件中的绝对路径）

> ID：11108526
> 
> 赞同：2
> 
> 时间：2012-06-19T20:04:26.683
> 
> 标签：paperclip, ckeditor, ruby-on-rails-3.2, email-attachments, image-upload

我按照 github 上发布的说明（https://github.com/galetahub/ ckeditor）。这一切似乎都在工作，除了当我尝试使用从 ckeditor 生成的 html（包含上传的图像）向 AccountMailer 发送电子邮件时，它给了我这个：

```
<img alt=3D"logo" src=3D"/assets/logo= .png" /> 
```

当我想要这个时：

```
<img alt=3D"logo" src=3D"www.mydomain.com/assets/logo= .png" /> 
```

我发现文档非常混乱，并且 gem 不提供对 config.js 的访问以修改 baseHref。我尝试更改模型/ckeditor 中的 attachment_file.rb 和 picture.rb 以使 url 包含域，但这会破坏上传功能。我也尝试过 ckeditor_rails 但这会删除上传功能，我没有时间创建自定义浏览器和上传器。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T13:53:54.020

**在你的 Ckeditor::Picture 模型中添加函数**

```
 def url_content
    if Rails.env.production?
        host_url="http://your_domen"
     else
        host_url="http://localhost:3000"
     end
    host_url+url(:content)
  end 
```

# xaml - Metro XAML 应用程序 - DependencyProperty.AddOwner

> ID：11108531
> 
> 赞同：1
> 
> 时间：2012-06-19T20:04:56.633
> 
> 标签：xaml, windows-runtime, microsoft-metro

我在 Metro XAML 中编写了一些自定义控件，我注意到`DependencyProperty`不再有该`AddOwner`方法。有谁知道 Metro 是否有新的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T16:51:32.210

添加所有者 API 也已从 Silverlight 和 Metro XAML 中删除。不再有等效的 API。

您应该能够通过定义新的依赖属性和数据绑定它们来产生类似的能力。但我知道它不能完全取代添加所有者。如果您发布添加所有者的潜在动机，我们可能会提供帮助。

# android - R生成的类android中的重复条目

> ID：11108534
> 
> 赞同：3
> 
> 时间：2012-06-19T20:05:06.347
> 
> 标签：android

我有这条线

```
 public static final int text_view222=0x7f060077; 
```

在我的`R.java`文件重复并导致我的 android 应用程序出错，任何人都知道如何解决这个问题。
更新 ：

当我将它们添加为库项目时，我还有来自另一个项目的其他 R 文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T21:10:15.993

我在花了 1 个小时之前和之后都遇到了这个问题，我发现我有一个`TextView`它的 id `space`在名称之前有一个字符，`id`而另一个`TextView`没有空格。所以在你的情况下，你的布局文件中有一些地方。查看 id 名称前的空格。

```
<TextView android:id="@+id/ text_view222"
...
...
..
/> 
```

另一个没有空间

```
<TextView android:id="@+id/text_view222"
...
...
..
/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-10T16:09:43.240

我有同样的问题。我的错误是在两个 xml 中。文件我放了以下

```
android:id="@+id/ETclienteNuevoDireccion" 
```

另一个：

```
android:id="@+id/ETclienteNuevoDireccion " 
```

我在行尾只有一个空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:06:14.020

尝试删除文件，然后清理项目。项目 > 清洁...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:07:56.480

1.  删除您的`R.java`文件。

2.  做一个`Project`-->`Clean`

3.  重启日食。

4.  `R.java`应该自动重新构建（假设您的项目中没有错误）。

# php - PHP 响应与先前的响应混合并以纯文本形式输出

> ID：11108537
> 
> 赞同：2
> 
> 时间：2012-06-19T20:05:23.600
> 
> 标签：php, apache, http-headers

我们使用 DomPDF 运行 Apache 2.2.16 和 PHP 5.3.3 来生成 PDF。生成 PDF 后，后续请求偶尔会返回纯文本响应，其中部分包含用于生成 PDF（即来自先前请求）的 HTML，以及 HTTP 标头和请求页面的响应。

Apache 以某种方式将对先前请求的部分响应与新响应混合在一起。这似乎是一个输出缓冲问题，尽管我无法使用相同的代码在本地复制它。它似乎也与 gzip 无关，因为禁用它仍然会出现问题。我也在 Firefox 和 Chrome 中进行了尝试，并获得了相同的结果。

**更新：**如果我关闭keep-alive，它可以解决问题。但是，我不一定要保持活动状态。输出缓冲区或响应没有被清除显然仍然存在潜在问题。

以下是请求标头：

```
Request URL:https://asdf.com/checkout/5d86a9bdf455cdfd334494183559bf
Request Method:GET
Status Code:200 OK
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:APP=636c8e6b58e991476ed7d38849bde0d4; _
Host:asdf.com
Referer:https://asdf.com/get_pdf/33711
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.34 Safari/536.11 
```

浏览器中显示的截断响应：

```
<!-- truncated HTML from the previous page (i.e. PDF) -->
    </p>
</div>

</body>
</html>HTTP/1.1 200 OK
Date: Tue, 19 Jun 2012 18:06:13 GMT
Server: Apache
P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 6457
Keep-Alive: timeout=7, max=96
Connection: Keep-Alive
Content-Type: text/html; charset=UTF-8

‹í]ksÛ¸’ýìü
Œfvm×ÆzP/?µëØNâÄI<‘’ìL*å‚HHBD
Z–gæ¿o7@I-BNrkë~ÐÜ;c‰&lt;xtŸF£›lŠÇ¿œ¿;ëüq}Aj’ëÏ®.ÏHa¯TúT=+•Î;çä_vÞ\‘J±L:’F1W\D4,•.ÞHa Ôø°TšL&ÅIµ(d¿Ôy_ºÃ¾*Ø8ý¸§¬–Å@…Ö“c=àÝ(Œâ“ÝTLke4h=Ù:V\…¬õ{"‹Éßä2RLR_ñ[FN}_$‘âQÿ¸d`€1E  v¾Ç¾%üö¤p& I¤ö:Ó1+ß|;)(v§J8ØñTÆL$ª··_ ¥ÖqìK>VDA“ù•ÞRs´@bé›ùÇ ýJïŠ}!ú!£c}1ÒÇJ!ïÆ¥¯ß&§¥J±™~,ŽxTüZÇ
<!-- followed by a bunch more gzipped gibberish --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:16:53.727

这听起来确实像是网络服务器的问题，部分是由`keep-alive`连接引起的。可能的补救措施：

*   `Content-Length`如果您还没有，请发送带有 PDF 的标题。*另外，请*确保`Content-Length`正确：即：之后不再有输出。
**   `KeepAlive`在apache中禁用。问题是，据我所知，这不能在每个请求甚至每个目录的基础上完成，所以这意味着如果为您禁用整个站点（不推荐），或者从不同的虚拟主机提供 pdf。*

 *如果可以解决，我的首选*肯定是第一个选项，第二个很麻烦。**

# data-structures - 从字典中获取字谜列表

> ID：11108541
> 
> 赞同：7
> 
> 时间：2012-06-19T20:05:36.080
> 
> 标签：data-structures, hash, anagram

基本上，Anagrams 就像 string.Eg 的排列一样，都是`stack`anagrams的（认为上面的词没有意义）。无论如何，您本可以理解我的基本意思。`sackt``stakc``stack`

现在，我想要一个`anagrams`给定数百万个单词的列表，或者只是从字典中说出来。

我的基本问题是`Find total number of unique anagrams in a dictionary?`

排序和比较不起作用，因为它的时间复杂度非常糟糕。

我想到了使用哈希表，字符串作为键。

但问题是散列函数应该是什么？如果提供一些伪代码会很有帮助。比上述方法更好的其他一些方法也会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T10:07:19.440

显而易见的解决方案是将每个字符映射到一个素数并乘以这些素数。所以如果 'a'' -> 2 和 'b' -> 3，那么

*   'ab' -> 6
*   'ba' -> 6
*   'bab' -> 18
*   “阿巴”-> 36
*   “爸爸”-> 36

为了最大限度地减少溢出的机会，可以将最小的素数分配给更频繁的字母（e，t，i，a，n）。注意：第 26 个素数是 101。

更新： [可以在这里找到一个实现](https://stackoverflow.com/a/14739948/905902)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:17:21.730

一个可能的散列函数可以是（假设只有英文单词）每个字母出现次数的排序计数。因此，对于“字谜”，您将生成 [('a', 3), ('g', 1), ('n', 1), ('m', 1), ('r',1)]。

或者，您可以通过从您的单词生成位掩码来获得不精确的分组，其中对于位 0-25，每个位表示该字母的存在或不存在（位 0 表示“a”到位 25 表示“z”）。但是你必须做更多的处理来进一步拆分每个散列组以区分例如“to”和“too”。

这些想法中的任何一个都有帮助吗？考虑到任何特定的实现语言（我可以使用 C++、python 或 Scala）？

**编辑：添加了一些示例 Scala 代码和输出：**

好的：我目前处于 Scala 模式，所以我已经敲定了一些东西来满足你的要求，但是（咳咳）如果你对 Scala 或函数式编程不太熟悉，可能不太清楚。

从这里使用大量英语单词：http: [//scrapmaker.com/data/wordlists/twelve-dicts/2of12.txt](http://scrapmaker.com/data/wordlists/twelve-dicts/2of12.txt)

我在它们上运行这个 Scala 代码（在脚本模式下使用 Scala 2.9 大约需要 5 秒，包括编译时间，字典大约有 40,000 个单词。不是最有效的代码，但首先想到的）。

```
// Hashing function to go from a word to a sorted list of letter counts
def toHash(b:String) = b.groupBy(x=>x).map(v => (v._1, v._2.size) ).toList.sortWith(_._1 < _._1)

// Read all words from file, one word per line
val lines = scala.io.Source.fromFile("2of12.txt").getLines

// Go from list of words to list of (hashed word, word)
val hashed = lines.map( l => (toHash(l), l) ).toList

// Group all the words by hash (hence group all anagrams together)
val grouped = hashed.groupBy( x => x._1 ).map( els => (els._1, els._2.map(_._2)) )

// Sort the resultant anagram sets so the largest come first
val sorted = grouped.toList.sortWith( _._2.size > _._2.size )

for ( set <- sorted.slice(0, 10) )
{
    println( set._2 )
} 
```

这会导出前 10 组字谜（首先是成员最多的组）：

```
List(caret, cater, crate, react, trace)
List(reins, resin, rinse, risen, siren)
List(luster, result, rustle, sutler, ulster)
List(astir, sitar, stair, stria, tarsi)
List(latrine, ratline, reliant, retinal)
List(caper, crape, pacer, recap)
List(merit, miter, remit, timer)
List(notes, onset, steno, stone)
List(lair, liar, lira, rail)
List(drawer, redraw, reward, warder) 
```

请注意，这使用了第一个建议（字母计数列表），而不是更复杂的位掩码方法。

**编辑 2：您可以用对每个单词的字符进行简单排序来替换散列函数（如 JAB 所建议的那样），并使用更清晰/更快的代码获得相同的结果：**

```
def toHash(b:String) = b.toList.sortWith(_<_) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:33:06.700

如果你对每个字符的哈希码值进行异或，然后通过输入长度对结果进行异或，无论单词的顺序如何，你都会得到相同的值，这意味着所有的字谜都会产生相同的哈希值。（按长度异或可防止 'boss' 和 'bo' 返回相同的值，因为 's' 与自身的哈希值始终为 0。）

例子：

```
int AnagramHash(string input)
{
    int output = 0;

    foreach(char c in input)
        output ^= c.GetHashCode();

    return output ^ input.Length;
} 
```

您仍然需要搜索所有具有相同 AnagramHash 的单词。我会用哈希字段更新字典表（无论您的算法如何）以减少整体计算。

编辑：另外，作为旁注，XOR 是 ALU 执行的最简单的操作，所以如果你最终使用它，你应该能够相当快地生成你的哈希。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:18:59.390

> 排序和比较不起作用，因为它的时间复杂度非常糟糕。

将时间复杂度换成额外的内存，只需将单词中的字母计数存储为 26- `char`（或您使用的任何语言的等价物，并假设您使用的是罗马字母表且仅使用字母字符）数组和哈希数组。相对于单词长度，您会遇到 O(n) 时间，但大多数英语单词并没有那么长。

例如`stack`, `sackt`, 和`stakc`都会有一个数组，其中 , , , , == 1 的位置`s`，`t`其余`a`的`c`都`k`设置为 0。

* * *

根据您的评论，这意味着只要您不对单词本身进行排序，您确实可以对单词的字符进行排序，您可以做一些比 Alex 的回答更简单的事情，只需对单词字符串中的字符进行排序并散列结果。（larsmans 先说，但没有将其发布为答案，所以...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:52:00.883

使用带有字符串作为键和列表（字符串）作为值的哈希图，其中字符串列表包含键字符串的所有字谜。

该问题类似于“在文件中查找单词的所有字谜”

在此处查看算法和代码[http://justprogrammng.blogspot.com/2012/06/determine-anagrams-of-word-in-file.html](http://justprogrammng.blogspot.com/2012/06/determine-anagrams-of-word-in-file.html)

# jquery - css jquery div在IE中悬停

> ID：11108543
> 
> 赞同：0
> 
> 时间：2012-06-19T20:05:38.583
> 
> 标签：jquery, css, internet-explorer

我正在尝试制作一个基于有序列表的手风琴图片库。标记如下：

```
<ol>
    <li class="slide">
        <div class="header"></div>
        <div><img src="/some/path/" /></div>
    </li>
</ol> 
```

舞台网址：[http ://host3.webdrafter.com/majesticbuildersmn.com/](http://host3.webdrafter.com/majesticbuildersmn.com/)

`slide`类旨在成为悬停状态（如红色边框所示）。当然，除了在 IE 中，这一切都很好——悬停状态只有在可以抓取文本时才会悬停。我认为这是 IE 的一个已知问题，所以有可行的解决方法吗？

**编辑**：需要为 IE 8+ 工作 & 将文本添加到标题 div 允许 IE 捕获悬停状态，但只能在文本上，没有 div 的其他区域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:20:30.313

查看 IE 的宽度和高度

我在 IE9 上尝试过，看起来如果你将鼠标悬停在顶部区域，它可以工作但不会更低。顶部是指顶部附近，我也不确定你是如何定义这个滑块（js）的，但是当我改变标题的高度时，视觉宽度似乎发生了变化

编辑：对于 IE 9，我将鼠标悬停在红色边框上，但它会移动，但它不起作用。也许这是一个 z-index 问题或什么的。我不确定，但我希望它可以帮助您解决问题

# java - 如何从字符串返回方法？

> ID：11108544
> 
> 赞同：0
> 
> 时间：2012-06-19T20:05:39.513
> 
> 标签：java, string, reflection

```
public AbstractImagePrototype getIcon(ModelData model) {
    if (model.get("icon") != null) {
        return Resources.ICONS.lock();
    } else {
        return null;
    }
} 
```

在这行代码中：

```
return Resources.ICONS.lock(); 
```

我需要更改`lock()`一个字符串，例如

```
String text = "lock()";
return Resources.ICONS.text; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:11:12.597

你可以做

```
Resources.ICONS.getClass().getMethod("lock").invoke(Resources.ICONS); 
```

至少如果 ICONS 是一个对象。如果它是一个类，它可能是

```
Resources.ICONS.class.getMethod("lock").invoke(null); 
```

（未经测试）。

我希望您知道自己在做什么，因为这可能会产生许多您不想要的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:08:34.823

我建议使用接受字符串作为输入的单一方法。然后它将比较字符串，然后调用该函数。

```
if (command.equals("lock()"))
    lock();
// etc. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:14:21.670

如果您尝试获取稍后需要调用的某种对象，您应该查看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)

# javascript - 链接是否可以调用它指向的页面上存在的 javascript？

> ID：11108548
> 
> 赞同：1
> 
> 时间：2012-06-19T20:05:59.270
> 
> 标签：javascript, iframe

我的情况是我有一个视频库，当用户单击视频缩略图时，Javascript 会显示视频并隐藏所有其他视频。因此，一次只能显示一个视频，但它们都在那里，只是被隐藏了。问题是我想链接到视频库，并在他们从此链接点击视频页面时调用特定视频。但是由于 javascript 都在该页面本身上，而该页面上的链接有效，对于指向的外部链接，我不知道如何激活该 javascript。

我有另一个视频库，它的设置不同但有同样的问题。当用户单击外部页面上的链接时，我在各个页面上嵌入了视频，这些视频显示在 iframe 中。但是链接我不知道如何更改我链接到的页面中的 iframe。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:10:55.403

你可以检查一下[`window.location.hash`](https://developer.mozilla.org/en/DOM/window.location)。例如，如果指向视频的链接是 `http://www.example.com/#myCoolVidNr1`，则`window.location.hash`包含`#myCoolVidNr1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:11:08.953

您可以在 URL 中指定视频 ID。

```
http://mysite.com/videos?videoId=xxxxxx 
```

然后你可以使用JS从URL中获取ID。我喜欢使用这个[`gup()`](http://www.netlobo.com/url_query_string_javascript.html)函数来获取 URL 参数并相应地显示视频。

# r - Matlab、Mathematica 或 R 中的最佳多元多项式拟合

> ID：11108554
> 
> 赞同：0
> 
> 时间：2012-06-19T20:06:20.363
> 
> 标签：r, matlab, wolfram-mathematica, linear-regression

我有一个数据集 (x,y)，其中 x 是 n 维向量，y 是 m 维向量。(m=3, n>2) 我的目标是在 x 中找到适合 (x,y) 数据集的最佳多项式。

x 的维度相当大（现在是 25），我不想手动输入所有可能性（即 x1*x3*x5、x1*x4*x6、...）。我可以使用 Matlab、Mathematica 和 R。我该怎么做？

另外，我很想听听您对以下问题的建议：如何从结果中选择最相关的系数？（也许 x1*x2 比 x2*x3 更相关）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:45:57.393

这个问题实际上不是关于任何分析平台，而是关于如何正确地进行多变量分析。因此，它应该增加对主题领域的描述。还需要适当考虑正在发生的隐式多重测试以及应该执行什么样的惩罚以避免推论统计数据的膨胀。底线：您应该阅读 Frank Harrell 的“回归建模策略”，其中每个句子都被扩展为一个完整的章节。（我也认为这个问题过于宽泛，应该关闭或迁移到 stats.stackexchange。）它还没有准备好进行黄金时段的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:07:59.123

除了 DWin 的回答：

关于您的多项式，您可以通过对范德蒙德矩阵的线性回归来表达，然后使用多元线性回归。但是，对于许多变量，您可能会发现您更需要限制模型而不是允许更大的自由度。

> 另外，我很想听听您对以下问题的建议：如何从结果中选择最相关的系数？（也许 x1*x2 比 x2*x3 更相关）

这归结为变量选择，这是一个众所周知的难题。我认为埃夫隆将其命名为未解决的大问题之一......

# javascript - 将多个谷歌地图绘制到页面

> ID：11108555
> 
> 赞同：0
> 
> 时间：2012-06-19T20:06:21.167
> 
> 标签：javascript, jquery, google-maps

我正在尝试将多个 Google 地图附加到一个页面。但我好像遇到了一些麻烦。

这将是我用来（使用 Handlebars.js ）多次创建相同块的模板，大约 50 次：

```
<script type="text/x-handlebars-template">
{{#each productListing}}
    <div class="product-listing-wrapper">
        <div class="product-listing">
            <div class="left-side-content">
                <div class="thumb-wrapper" data-image-link="{{ThumbnailUrl}}">
                    <i class="thumb">
                        <img src="{{ThumbnailUrl}}" alt="Thumb">
                        <span class="zoom-image"></span>
                    </i>
                </div>
                <div class="google-maps-wrapper">
                    <div class="google-coordonates-wrapper">
                        <div class="google-coordonates">
                            <p>{{LatLon.Lat}}</p>
                            <p>{{LatLon.Lon}}</p>
                        </div>
                    </div>
                    <div class="google-maps-button">
                        <a class="google-maps" href="#">Google Maps</a>
                    </div>
                </div>
            </div>
            <div class="right-side-content">
                <div class="map-canvas-wrapper">
                    <div id="map-canvas" class="map-canvas" data-latitude="{{LatLon.Lat}}" data-longitude="{{LatLon.Lon}}"></div>
                </div>
                <div class="content-wrapper"></div>
            </div>
        </div>
    </div>
{{/each}} 
```

我正在尝试将地图附加到`#map-canvas`id。使用以下代码块，我正在绘制：

```
Cluster.prototype.initiate_map_assembling = function() {
    return $(this.map_canvas_wrapper_class).each(function(index, element) {
        var canvas = $(element).children();
        var latitude = $(canvas).attr('data-latitude');
        var longitude = $(canvas).attr('data-longitude');

        var coordinates = new google.maps.LatLng(latitude, longitude);

        var options = {
            zoom: 9,
            center: coordinates,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map($(canvas), options);

        var marker = new google.maps.Marker({
            position: coordinates,
            map: map
        });
    });     
}; 
```

这样，我将“循环”通过我试图将地图附加到的 id 的所有父类，但地图只会附加到第一个 id。我试图以其他方式将其附加到所有 id，但结果相同。

那么你会建议我怎么做才能让它像我期望的那样工作，将地图附加到每个 id 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:11:25.423

假设您正在使用像 jQuery 这样的库，然后更改

```
var map = new google.maps.Map($(canvas), options); 
```

至

```
var map = new google.maps.Map($(canvas)[0], options); 
```

这可能会起作用，否则指向您的演示的链接会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:51:36.427

在 HTML 中，您不能`ID`对多个节点使用相同的。（实际上你可以，但你不能选择第一个之后的那些。）所以一个简单的解决方案来了：只需省略`id`canvas 的`div`，或者在它之后追加`index`。

# python - 如何在python中打印颜色/颜色？

> ID：11108559
> 
> 赞同：16
> 
> 时间：2012-06-19T20:06:40.530
> 
> 标签：python, windows

Python 和 StackOverflow 的新手，我需要一点帮助。我想在 Python 中打印颜色并用谷歌搜索，但运气不佳:(我每次都很困惑，没有一个工作。这是我输入的代码。

```
answer = input ("Wanna go explore? OPTIONS : Yes or No")
if answer == "no":
    print("Awww, come on, don't be like that, lets go!")
elif answer == "yes":
    print ("Great! Lets go!")
else: 
    print("Whats that? I couldn't hear you!") 
```

现在，我想要 OPTIONS 为绿色，Yes 为蓝色，No 为红色。一个人将如何实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-23T16:40:54.617

如果您想在 IDLE shell 中打印颜色，则使用 ASCI 转义码不会对您有所帮助，因为它没有实现此功能。

有一个特定于 IDLE 的 hack，可让您直接写入它的`PyShell`对象并指定 IDLE 已经定义的文本标签，例如`"STRING"`默认情况下将显示为绿色的文本标签。

```
import sys

try:
    shell = sys.stdout.shell
except AttributeError:
    raise RuntimeError("you must run this program in IDLE")

shell.write("Wanna go explore? ","KEYWORD")
shell.write("OPTIONS","STRING")
shell.write(" : ","KEYWORD")
shell.write("Yes","DEFINITION")
shell.write(" or ","KEYWORD")
shell.write("No","COMMENT")
answer = input() 
```

在 IDLE 中运行时会出现以下提示：

[![在此处输入图像描述](../Images/e1bf2e5858ef063295b34405783cff47.png)](https://i.stack.imgur.com/lknQJ.png)

以下是所有可用标签的列表：

```
print("here are all the valid tags:\n")

valid_tags = ('SYNC', 'stdin', 'BUILTIN', 'STRING', 'console', 'COMMENT', 'stdout',
              'TODO','stderr', 'hit', 'DEFINITION', 'KEYWORD', 'ERROR', 'sel')

for tag in valid_tags:
    shell.write(tag+"\n",tag) 
```

请注意，`'sel'`它表示被选中的文本是特殊的，因此一旦单击其他内容，它将被取消选中。它也可用于开始选择要复制的一些文本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-19T20:14:03.853

如果您只是想要一种非常简单直接的方式在终端中打印 ansi 颜色，您可以查看[ansicolor 包模块](http://pypi.python.org/pypi/ansicolors/1.0.2)：

**通过 pip 安装**

```
$ pip install ansicolors 
```

**用法片段**

```
from colors import red, green, blue
print red('This is red')
print green('This is green')
print blue('This is blue')

from colors import color
for i in range(256):
    print color('Color #%d' % i, fg=i) 
```

*关于点子的注意事项*

pip 是一个 python 包管理器。如果你还没有`pip`安装，你可以安装它`easy_install pip`

如果你发现你没有`easy_install`，然后下载这个： http: [//peak.telecommunity.com/dist/ez_setup.py](http://peak.telecommunity.com/dist/ez_setup.py)并执行：

```
python ez_setup.py
easy_install pip 
```

**Windows 命令外壳的颜色**

上面的 ansi 颜色在 windows 命令 shell 中对你不起作用。尝试查看这个[activestate 代码片段](http://code.activestate.com/recipes/496901-change-windows-console-character-attribute-color/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-19T20:24:30.433

如果您使用的是支持 ANSI 转义序列的终端和/或 shell，则应该可以使用以下内容：

```
print("Blah blah \033[0;32mthis part will be green\033[00m blah blah.")
print("Blah blah \033[0;31mthis part will be red\033[00m blah blah.") 
```

我可以确认它确实可以在`bash`Linux 上运行。有关更多详细信息，请参阅[有关 ANSI 转义码的 Wikipedia 页面](http://en.wikipedia.org/wiki/ANSI_escape_code)，包括描述不同字符序列/值的影响的综合表格。我不主张将此作为规范的解决方案，但它可能足以满足您的目的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-19T20:10:43.290

检查[`curses`](http://docs.python.org/library/curses.html)模块。这将替换`print`语句并让您完全控制屏幕上的文本定位和属性。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-20T07:56:26.503

### **python中的颜色**

一种使用python很好地打印文本或设置文本样式的简单方法，无需任何插件或包。

```
 # the ANSI codes are stored in variables, making them easier to use
black = "\033[0;30m"
red = "\033[0;31m"
green = "\033[0;32m"
yellow = "\033[0;33m"
blue = "\033[0;34m"
magenta = "\033[0;35m"
cyan = "\033[0;36m"
white = "\033[0;37m"
bright_black = "\033[0;90m"
bright_red = "\033[0;91m"
bright_green = "\033[0;92m"
bright_yellow = "\033[0;93m"
bright_blue = "\033[0;94m"
bright_magenta = "\033[0;95m"
bright_cyan = "\033[0;96m"
bright_white = "\033[0;97m"

print(black + "Hello world")
print(red + "Hello world")
print(green + "Hello world")
print(blue + "Hello world")
print(yellow + "Hello world")
print(magenta + "Hello world")
print(cyan + "Hello world")
print(bright_black + "Hello world")
print(bright_red + "Hello world")
print(bright_green + "Hello world")
print(bright_blue + "Hello world")
print(bright_cyan + "Hello world")
print(bright_magenta + "Hello world")
print(bright_yellow + "Hello world") 
```

### **输出**：

[查看：彩色输出](https://i.stack.imgur.com/zpx3y.jpg)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-15T01:27:35.843

我建议使用这个新库**Printy**，它带有 print() 和 input() 的替代函数。刚刚发布了 1.2.0 版作为跨平台库。

它基于标志，因此，对于您的使用情况，您可以执行以下操作：

```
from printy import inputy
# with inline formats, this will apply a green(n)
# to the word 'OPTIONS', blue (b) to the word 'Yes', and red (r) to 
# the word No
inputy("Wanna go explore? [n]OPTIONS@ : [b]Yes@ or [r]No@") 
```

[![在此处输入图像描述](../Images/4be6461f633a4de2fca5b2fe78178ab8.png)](https://i.stack.imgur.com/TKBpk.png)

您还可以应用一些验证，并且返回的值已经转换为布尔值（或取决于指定的类型）

[![在此处输入图像描述](../Images/6d61137987a6003b0626a72fee9eb70d.png)](https://i.stack.imgur.com/Jglaj.png)

它可以让你做更多有趣的事情，看看： [Printy on github](https://github.com/edraobdu/printy)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-02-20T23:52:24.877

[Clint](https://pypi.org/project/clint/)（**命令**行**输入**接口工具）是我用过的一个很好的**库****。**这是一个与终端有关的多功能库。那里有颜色、是/否提示、进度条等功能。

 ****使用 Clint 进行彩色输出如下所示：

```
>>> from clint.textui import colored, puts
>>> puts(colored.red('red text'))
red text 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-19T20:17:14.320

如果要以彩色打印到终端，则必须为正在使用的终端使用转义码。对于 unix/linux 系统，您可以使用该`curses`模块 - 或者直接使用[bash 颜色代码](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)作为输出字符串的一部分。[根据这个问题](https://stackoverflow.com/questions/2048509/how-to-echo-with-different-colors-in-the-windows-command-line)，在 Windows 中似乎没有一种简单的方法可以做到这一点。****

# jquery - 相同的代码在不同的环境中不起作用

> ID：11108561
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:06:49.680
> 
> 标签：jquery

我在[生产](http://mitpachat.com/c/73/%D7%AA%D7%95%D7%A1%D7%A4%D7%95%D7%AA-%D7%9C%D7%9E%D7%98%D7%A4%D7%97%D7%AA)和[测试](http://mitpachattest19.com.yew.arvixe.com/c/53/%D7%9E%D7%98%D7%A4%D7%97%D7%95%D7%AA)环境中使用以下jQuery代码

```
$(document).ready(function() {
    $(this).find('div.description:contains("חדש")').each(function() {
        $(this).closest(".item-box").find(".picture a").addClass("SaleProduct");;
        $('div.description:contains("מבצע")').each(function() {
            $(this).closest(".item-box").find(".picture a").addClass("NewProduct");
        });
    });
});​ 
```

但是有些相同的代码不起作用的是prod env。我确定 jQuery 正在被调用，但我不知道它为什么不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:12:40.827

一个。这可能与文件的编码有关。验证测试和生产中的文件都是相同的时间编码。您可以使用 Notepad++ 之类的东西以预期的编码重新保存文件。

湾。你用的是火狐吗？获取 firebug，然后导航到生产站点。使用检查器并搜索您要查找的文本。验证它确实存在。

C。分解 javascript，然后使用 firebug 调试器单步执行 javascript 调用以查看失败的位置：

```
$(document).ready(function () {
  var divs = $(this).find('div.description:contains("חדש")');
   divs.each(function(){
    var clostedItemBox = $(this).closest(".item-box");
    var picture = clostedItemBox.find(".picture a");
    picture.addClass("SaleProduct");;
   $('div.description:contains("מבצע")').each(function(){
    $(this).closest(".item-box").find(".picture a").addClass("NewProduct");
  });
});

}); 
```

在每一行上放置断点，看看它在哪里失败。

# https - 获取安全网站的公钥

> ID：11108562
> 
> 赞同：1
> 
> 时间：2012-06-19T20:06:50.277
> 
> 标签：https, public-key-encryption

除了使用浏览器，如何获取使用 https 协议的网站的公钥？还有其他方法吗？就像从终端一样。

更新 - 我想要所有方式，以便我可以选择最适合我的方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:16:17.830

```
openssl s_client -connect example.com:443 
```

证书介于 -----BEGIN CERTIFICATE----- 和 -----END CERTIFICATE----- 之间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:16:53.040

这是您要查找的[OpenSSL 命令吗？](http://www.madboa.com/geek/openssl/#cert-retrieve)

`openssl s_client -connect ${REMHOST}:${REMPORT}`

# java - 试图在 Ecplise 中以类的形式运行程序 × 259989

> ID：11108563
> 
> 赞同：0
> 
> 时间：2012-06-19T20:06:53.667
> 
> 标签：java

我是 Java 世界的新手，这是我的第一个程序之一（很明显，Hello World！）。问题是当我尝试从带有播放图标的菜单中将这个程序作为一个类运行时，会显示一个空白窗口，上面没有“Hello World”（只有白色填充窗口）。在这个窗口的底部边框有一条黑色粗线。但是当我从同一个菜单将这个程序作为一个小程序运行时，一切都很好，“Hello World”显示在正确的位置，一切都很好。但是我怎样才能让程序作为一个班级定期运行？？？

这是我的代码...

```
import acm.graphics.*;
import acm.program.*;
import java.awt.*;

public class HelloProgram extends GraphicsProgram {

    private static final long serialVersionUID = 1L;

    public void run() {
        GLabel label = new GLabel("hello, world", 100, 75);
        label.setFont("SansSerif-36");
        label.setColor(Color.RED);
        add(label);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:16:12.060

我不知道 acm，但查看了此页面：http: [//jtf.acm.org/tutorial/Introduction.html](http://jtf.acm.org/tutorial/Introduction.html)

如您所见，GraphicsProgram 是 JApplet 的子类，因此它应该作为小程序而不是桌面应用程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:15:53.560

尝试这个。这将是一个单独的类，但您将能够从该类运行您的程序。如果您感到困惑，请告诉我。

```
public class Runner{
   public static void main(String[] args){
   HelloProgram p = new HelloProgram();
   p.run();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:44:40.453

我同意 publ1c_stat1c，您的程序缺少“main”方法，因此它被视为独立应用程序。

1.  创建应用程序的实例

    `HelloProgram hello = new HelloProgram();`

2.  调用实例的run方法

    `hello.run();`

主方法不必在不同的类中，尝试在“运行方法”和“ `private static final long serialVersionUID = 1L;`”之间添加以下代码

```
public static void main(String[] args){
    HelloProgram hello = new HelloProgram();
    hello.run();
} 
```

# apacheds - 如何从 Eclipse 中签出的源代码将 apacheds 作为 Windows 服务运行

> ID：11108569
> 
> 赞同：0
> 
> 时间：2012-06-19T20:07:36.103
> 
> 标签：apacheds

我需要有关 apacheds 服务器的帮助。我试图构建 apache ds 并将其作为 Windows 服务从我工作区中签出的代码中运行。（我想调试 n 看看 apacheds 是如何工作的）。以下是链接 - [http://svn.apache.org/repos/asf/directory/apacheds/trunk-with-dependencies](http://svn.apache.org/repos/asf/directory/apacheds/trunk-with-dependencies)。结帐后，我在将项目作为现有 maven 项目导入工作区之前使用了以下命令， cd apacheds 1\. mvn clean install -DskipTests 2\. mvn eclipse:eclipse 3\. mvn clean install -DskipTests

现在的问题是文档是 apacheds 网站上的“正在进行的工作”，并且目录结构与记录的目录结构有很大不同（例如，在 apacheds 目录下没有“bootstrap-extract”、“bootstrap-partition”之类的目录, 'bootstrap-plugin' 等如文档所示）

以下是 ApacheDS 高级用户指南的链接 - [http://svn.apache.org/repos/asf/directory/apacheds/trunk-with-dependencies](http://svn.apache.org/repos/asf/directory/apacheds/trunk-with-dependencies)

在 apacheds\service\src\main\java\org\apache\directory\server 下，有一个类 UserjarMain。我尝试将此类作为“Java 应用程序”运行，并将目标目录的路径作为参数。它启动成功，但我看不到 Windows 服务中运行的任何服务。

请让我知道构建它的正确方法是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:52:21.167

我可以弄清楚如何从源代码构建 apache ds 并运行它。将项目作为“现有 maven 项目”导入工作区后，我在 apacheds\service 文件夹下运行 apacheds.bat 文件，并对 .bat 文件进行了细微更改，例如将 jar 文件的名称更改为目标目录中的名称，更改来自 cp 的命令复制 %cd%\target\instance 并将其括在引号中。

或者，可以使用参数 .\target\instance 运行 UberjarMain.java 类，并且服务应该开始运行。

# c# - 如何从 kinect 深度数据中确定“真实世界”x、y 坐标？

> ID：11108575
> 
> 赞同：4
> 
> 时间：2012-06-19T20:07:47.400
> 
> 标签：c#, kinect

kinect 传感器返回的深度值对应于与 xy 平面的真实世界 z 距离（以 mm 为单位）。到目前为止，我在最新的 sdk 中找不到任何返回 x 和 y 坐标类似的东西。这是在sdk中提供的吗？如果做不到这一点，那么计算 x 和 y 的好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T19:26:54.473

您可以使用返回 SkeletonPoint 的 KinectSensor.MapDepthToSkeletonPoint 方法。示例代码可以是

```
using (DepthImageFrame depthimageFrame = e.OpenDepthImageFrame())
        {
            if (depthimageFrame == null)
            {
                return;
            }

            pixelData = new short[depthimageFrame.PixelDataLength];

            depthimageFrame.CopyPixelDataTo(pixelData);

            for (int x = 0; x < depthimageFrame.Width; x++)
            {
                for (int y = 0; y < depthimageFrame.Height; y++)
                {
                        SkeletonPoint p = sensor.MapDepthToSkeletonPoint(DepthImageFormat.Resolution640x480Fps30, x, y, pixelData[x + depthimageFrame.Width * y]);                        
                }
            }

        } 
```

# ios - iOS 中的语音服务

> ID：11108578
> 
> 赞同：4
> 
> 时间：2012-06-19T20:08:07.087
> 
> 标签：ios, voiceover

我有一个关于在启用 VoiceOver 时理解 iOS 中的事件变化的问题。我正在为盲人开发一些应用程序。

不幸的是，iOS 上不支持 TTS，这与可以使用 NSSpeechSynthesizer 对象的 Mac OS SDK 不同。

我发现 VoiceService 不是公开的。因此，总而言之，iOS 上似乎没有用于语音文本的 API。

问题是：如何通知用户数据处理结束？

这是一个用户案例：用户按钮，应用程序进行一些演算/过程，而不是应该返回结果。在 Mac 中，这很容易使用 speakString:@"Result"。

但是我怎样才能告诉 VoiceOver 宣布结果呢？

对不起，如果我太扭曲了:-)

非常感谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T22:51:17.937

你可以用这个

```
if (UIAccessibilityIsVoiceOverRunning()) {
   UIAccessibilityPostNotification(UIAccessibilityAnnouncementNotification,
                                   @"Result has been computed.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:29:50.090

VSSpeechSynthesizer 适用于 iOS - 但它是一个私有 API，因此可能会被应用商店拒绝。但是，您仍然可以制作应用程序供私人消费。

*   [http://iphone-dev-kitchan.blogspot.co.uk/2010/08/text-to-speech-using.html](http://iphone-dev-kitchan.blogspot.co.uk/2010/08/text-to-speech-using.html)

我认为它是一个私有 API 是一个错误，因为它使得为例如有视力障碍的人创建可访问的应用程序变得更加困难。我已提交错误 ID #：9451650 错误标题：VSSpeechSynthesizer 是私有的

您可以使用免费且易于集成的 FliteTTS，并且仍在 iOS5+ 中工作。

*   [https://bitbucket.org/sfoster/iphone-tts](https://bitbucket.org/sfoster/iphone-tts)

您还可以将通用消息“可用结果”记录为 wav 文件并播放。如果您的消息是静态的（或来自可能结果的简短列表），则不需要 TTS。

WWDC2012 主题演讲中提到了 iOS6 VoiceOver / Accessibility。

在这里查看以前的答案（我在上面重申过）

*   [如何添加 NSSpeechSynthesizer 类参考？](https://stackoverflow.com/questions/6264958/how-can-i-add-nsspeechsynthesizer-class-reference/7308803#7308803)

*   [是否有允许我直接在我的应用程序中使用 VoiceOver 的 iPhone API？](https://stackoverflow.com/questions/2830176/is-there-an-iphone-api-that-allows-me-to-use-voiceover-directly-in-my-app/5921187#5921187)

# perl - 使用 Perl 将 8 位以外的 GIF 图像添加到 PDF

> ID：11108579
> 
> 赞同：1
> 
> 时间：2012-06-19T20:08:07.007
> 
> 标签：perl, pdf, gif, bit-shift, lzw

我正在尝试将 8 位以外的非隔行 GIF 图像添加到 PDF 文档**，而**不必使用[`PDF::Create`](http://search.cpan.org/~markusb/PDF-Create/)Perl 完全解码比特流。

[作为PDF 标准](http://partners.adobe.com/public/developer/en/pdf/PDFReference13.pdf)`LZWDecode`一部分的算法要求所有图像的最小 LZW 代码大小为 8 位，并且硬编码为仅嵌入 8 位图像。`PDF::Create`

到目前为止，我已经调整了[图像加载器](http://cpansearch.perl.org/src/MARKUSB/PDF-Create-1.06/lib/PDF/Image/GIF.pm)以`PDF::Create`读取 5 位图像并完全解码 LZW 流。然后我可以使用编码器算法`PDF::Create`将图像重新打包为 8 位。

我想做的是消除内存密集型解码/编码步骤。[该线程](http://forums.adobe.com/thread/285529)表明，这可以通过“加宽或移位位”来使 LZW 代码适合`LZWDecode`.

我联系了线程作者，他提供了一些额外的细节，特别是颜色索引的代码保持不变，但用零填充（例如，`[10000]`变为`[000010000]`），代码分别更改为`<Clear>`和，所有其他代码偏移256 - 原始代码。`<End>``<256>``<257>``<Clear>`

但是，由于雇主的限制，他无法进一步详细说明。`<4095>`特别是，当修改值超过（LZW代码表的最大索引）时，我不确定如何处理代码。我也不确定如何将修改后的代码重新打包成比特流。

我目前使用的算法如下。

```
# Read 5-bit data stream

sub ReadData5 {

    my $data = shift;

    my $c_size = 6;                # minimium LZW code size
    my $t_size = 33;               # initial code table size
    my ($i_buff,$i_bits) = (0,0);  # input buffer
    my ($o_buff,$o_bits) = (0,0);  # output buffer

    my $stream = '';               # bitstream
    my $pos    = 0;

    SUB_BLOCK: while (1){
        my $s = substr($data, $pos++, 1);

        # get sub-block size
        my $n_bytes  = unpack('C', $s) or last SUB_BLOCK;
        my $c_mask   = (1 << $c_size) - 1;

        BYTES: while (1){
            # read c_size bits
            while ($i_bits < $c_size){

                # end of sub-block
                !$n_bytes-- and next SUB_BLOCK;

                $s = substr($data, $pos++, 1);
                my $c = unpack('C', $s);

                $i_buff |= $c << $i_bits;
                $i_bits += 8;
            }

            # write c_size bits
            my $code   = $i_buff & $c_mask;

            my $w_bits = $c_size;
            $i_buff  >>= $c_size;
            $i_bits   -= $c_size;
            $t_size++;

            if ($o_bits > 0){
                $o_buff |= $code >> ($c_size - 8 + $o_bits);
                $w_bits -= 8 - $o_bits;
                $stream .= pack('C', $o_buff & 0xFF);
            }

            if ($w_bits >= 8){
                $w_bits -= 8;
                $stream .= pack('C', ($code >> $w_bits) & 0xFF);
            }

            if (($o_bits = $w_bits) > 0){
                $o_buff = $code << (8 - $o_bits);
            }

            # clear code
            if ($code == 32){
                $c_size   = 6;
                $t_size   = 33;
                $c_mask   = (1 << $c_size) - 1;
            }

            # end code
            if ($code == 33){
                $stream .= pack('C', $o_buff & 0xFF);
                last SUB_BLOCK;
            }

            if ($t_size == (1 << $c_size)){
                if (++$c_size > 12){
                    $c_size--;
                } else {
                    $c_mask = (1 << $c_size) - 1;
                }
            }
        }
    }

    # Pad with zeros to byte boundary
    $stream .= '0' x (8 - length($stream) % 8);

    return $stream;
}

#---------------------------------------------------------------------------

# Decode 5-bit data stream

sub UnLZW5 {
    my $data = shift;

    my $c_size = 6;                 # minimium LZW code size
    my $t_size = 33;                # initial code table size
    my ($i_buff,$i_bits) = (0,0);   # input buffer

    my $stream = '';                # bitstream
    my $pos    = 0;

    # initialize code table
    my @table  = map { chr($_) } 0..$t_size-2;
    $table[32] = '';
    my $prefix = '';
    my $suffix = '';

    # get first code word
    while ($i_bits < $c_size){
        my $d     = unpack('C', substr($data, $pos++, 1));
        $i_buff   = ($i_buff << 8) + $d;
        $i_bits += 8;
    }

    my $c2     = $i_buff >> ($i_bits - $c_size);
    $i_bits   -= $c_size;
    my $c_mask = (1 << $i_bits) - 1;
    $i_buff   &= $c_mask;

    # get remaining code words
    DECOMPRESS: while ($pos < length($data)){
        my $c1 = $c2;

        while ($i_bits < $c_size){
            my $d     = unpack('C', substr($data, $pos++, 1));
            $i_buff   = ($i_buff << 8) + $d;
            $i_bits  += 8;
        }

        $c2      = $i_buff >> ($i_bits - $c_size);
        $i_bits -= $c_size;
        $c_mask  = (1 << $i_bits) - 1;
        $i_buff &= $c_mask;

        # clear code
        if ($c2 == 32){
            $stream  .= $table[$c1];
            $#table   = 32;
            $c_size   = 6;
            $t_size   = 33;
            next DECOMPRESS;
        }

        # end code
        if ($c2 == 33){
            $stream .= $table[$c1];
            last DECOMPRESS;
        }

        # get prefix and suffix
        $prefix = $table[$c1] if $c1 < $t_size;
        $suffix = $c2 < $t_size ? substr($table[$c2], 0, 1) : substr($prefix, 0, 1);

        # write prefix
        $stream .= $prefix;

        # write multiple-character sequence
        $table[$t_size++] = $prefix . $suffix;

        # increase code size
        if ($t_size == 2 ** $c_size){
            if (++$c_size > 12){
                $c_size--;
            }
        }
    }

    return $stream;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:08:14.263

一次做一个很慢。一次完成所有这些会占用您太多的内存。一次做一大块。

```
my $BUFFER_SIZE = 5 * 50_000;  # Must be a multiple of 5.

my $in_bytes = ...;
my $out_bytes = '';
while (my ($bytes) = $in_bytes =~ s/^(.{1,$BUFFER_SIZE})//s) {
   # Unpack from 5 bit fields.
   my @vals = map { pack('B*', "000$_") } unpack('B*', $bytes) =~ /(.{5})/g;

   # Transform @vals into 8 bit values here.

   # Pack to 8 bit fields.
   $out_bytes .= pack('C*', @vals); 
```

}

由于您根本没有转换值（只是它们的存储方式），因此简化为：

```
my $BUFFER_SIZE = 5 * 50_000;  # Must be a multiple of 40.

my $in_bytes = ...;
my $out_bytes = '';
while (my ($bytes) = $in_bytes =~ s/^(.{1,$BUFFER_SIZE})//s) {
   # Unpack from 5 bit fields.
   my $bits = unpack('B*', $bytes);
   $bits =~ s/(.{5})/000$1/g;
   $out_bytes .= pack('B*', $bits); 
```

}

你没有说如何处理额外的位。我只是忽略了他们。

* * *

不创建位串的替代方法：

```
my $in_bytes = ...;
my $out_bytes = '';
while (my ($bytes) = $in_bytes =~ s/^(.{1,5})//s) {
    my @bytes = map ord, split //, $bytes;

    # 00000111 11222223 33334444 45555566 66677777

    $out_bytes .= chr(                            (($bytes[0] >> 3) & 0x1F));
    last if @bytes == 1;
    $out_bytes .= chr((($bytes[0] << 2) & 0x1C) | (($bytes[1] >> 6) & 0x03));
    $out_bytes .= chr(                            (($bytes[1] >> 1) & 0x1F));
    last if @bytes == 2;
    $out_bytes .= chr((($bytes[1] << 4) & 0x10) | (($bytes[2] >> 4) & 0x0F));
    last if @bytes == 3;
    $out_bytes .= chr((($bytes[2] << 1) & 0x1E) | (($bytes[3] >> 7) & 0x01));
    $out_bytes .= chr(                            (($bytes[3] >> 2) & 0x1F));
    last if @bytes == 4;
    $out_bytes .= chr((($bytes[3] << 3) & 0x18) | (($bytes[4] >> 5) & 0x07));
    $out_bytes .= chr(                            ( $bytes[4]       & 0x1F));
} 
```

上述解决方案的优点是它在 C 语言中特别有效。

```
STRLEN in_len;
const char* in = SvPVbyte(sv, in_len);

STRLEN out_len = (in_len * 8 / 5) * 8;
char* out = (char*)malloc(out_len);

char* out_cur = out;
char* in_end = in + in_len;

while (in != in_end) {
    *(out_cur++) =                          ((*in >> 3) & 0x1F));
    if (++in == in_end) break;
    *(out_cur++) = ((in[-1] << 2) & 0x1C) | ((*in >> 6) & 0x03));
    *(out_cur++) =                          ((*in >> 1) & 0x1F));
    if (++in == in_end) break;
    *(out_cur++) = ((in[-1] << 4) & 0x10) | ((*in >> 4) & 0x0F));
    if (++in == in_end) break;
    *(out_cur++) = ((in[-1] << 1) & 0x1E) | ((*in >> 7) & 0x01));
    *(out_cur++) =                          ((*in >> 2) & 0x1F));
    if (++in == in_end) break;
    *(out_cur++) = ((in[-1] << 3) & 0x18) | ((*in >> 5) & 0x07));
    *(out_cur++) =                          ( *in       & 0x1F));
}

return newSVpvn(out, out_len); 
```

# ruby-on-rails - Rails未定义ni的方法：NilClass错误？

> ID：11108583
> 
> 赞同：0
> 
> 时间：2012-06-19T20:08:19.690
> 
> 标签：ruby-on-rails, null, rails-models

我有一个 rails 应用程序，其中有 has_many 和 belongs_to 关联。但是我在尝试检索元素时遇到了问题。我的模型是事件、评论和投票。事件有多个评论和投票。当然评论和投票属于一个事件。

我的架构是

```
 create_table "events",
        t.string   "etime"
        t.integer  "eid"
      end
    create_table "votes",
        t.integer  "eventid"
        t.string  "userid"
        t.integer  "event_id"
    end 
```

协会：

```
 class Event < ActiveRecord::Base
    has_many :comments
    has_many :votes
    end
    class Votes < ActiveRecord::Base
        belongs_to :event
    end 
```

我正在尝试查看对这些事件的所有投票。控制器动作是：

```
 @events = Event.all
@events.each do |event|
    event.votes.each do |vote|
        respond_to do |format|
            format.html
        end
    end 
end 
```

查看和错误行：

```
 <%= @vote.userid %> 
```

我收到一个错误“未定义的方法”用户 ID“投票”。在我的控制器中，我渲染了我的 eventid 并且它起作用了。因此，当我在视图中执行此操作时，这似乎是一个问题。知道我可能做错了什么吗？我完全迷失了这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:20:48.327

在某个地方你搞错了，你的表迁移，就像你的 foreign_key 名称一样，你的主键也是错误的。

在标准情况下，所有模型都有主键作为**id**，只是**id**。

例如，为了与其他模型`belongs_to :event`关联，您的投票模型需要一个**event_id**列。这些是导轨标准

让我们假设，您的关联/列是正确的，您得到的错误是因为您的`**@vote**`对象是**nil**，在您的控制器中，您需要分配/初始化`@vote`变量以使用您似乎没有做的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:10:29.363

可能就像使用`event_id`而不是`eventid`.

`rails console`在那里跑步和玩耍总是值得的。您通常可以自动完成方法。

```
v = Vote.new
v.event<tab to get options> 
```

# mysql - MySQL - 加入一个 VIEW 到它自己

> ID：11108584
> 
> 赞同：1
> 
> 时间：2012-06-19T20:08:20.470
> 
> 标签：mysql, join, views, self-join

我正在使用 MySQL 5.0。

我想根据视图中的前一行执行计算。这可能吗？我假设不是因为在查询实际运行之前视图不存在，所以是否有解决方法，或者创建和更新表是我最好的选择？

这是我不正确的编码，缺乏逻辑，我知道，但它显示了我想要完成的事情：

```
CREATE VIEW `Master Facebook Data` tt1 AS SELECT
    t1.id AS `Client ID`, 
    t1.name AS `Client Name`,
    t1.`Date`,
    avg(t1.`Daily People Talking About This`) AS `Avg Daily Talk`,
    (((tt1.`Avg Daily Talk`-IFNULL(tt2.`Avg Daily Talk`, 0)))/tt1.`Avg Daily Talk`) AS `Change in Talk`,
    avg(t1.`Weekly Total Reach`) AS `Avg Weekly Reach`,
    (((tt1.`Avg Weekly Reach`-IFNULL(tt2.`Avg Weekly Reach`, 0)))/tt1.`Avg Weekly Reach`) AS `Change in Reach`,
    avg(t1.`Daily Viral Reach`) AS `Avg Daily Viral`,
    (((tt1.`Avg Daily Viral`-IFNULL(tt2.`Avg Daily Viral`, 0)))/tt1.`Avg Daily Viral` AS `Change in Viral`

FROM `clients` t1
JOIN `FB Exports - Key Metrics` t2
ON t1.`id` = t2.`client`

LEFT OUTER JOIN `Master Facebook Data` tt2
ON tt1.`Client ID` = tt2.`Client ID` 
AND month(tt1.`Date`)-month(tt2.`Date`)=1

GROUP BY t2.`client`, month(t2.`Date`)
ORDER BY t2.`client`, t2.`Date` 
```

非常感谢！=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:47:58.590

视图和表格没有什么不同。SQL 将常规视图理解为如何计算它的秘诀；因此它可以将它连接到相同的视图或任何其他视图，就像它可以将复杂的表连接连接在一起一样。

无论哪种方式，都没有前一行这样的东西。表和视图本质上是一组行，而不是有序的行序列。如果您`ORDER BY`在查询中指定，则强制执行该排序在概念上是应用的最后一个操作。

这并不意味着您的问题无法解决。您没有指定您的数据模型是什么，对数据分布的假设等等，但笼统地说：

让我们`A`成为一个视图。让`col`成为您想要排序的不可为空的唯一约束列（用于定义“前一行”）。现在看看这种查询。

```
A AS a
LEFT JOIN A AS b ON b.col < a.col
LEFT JOIN A AS c ON c.col < a.col AND c.col > b.col
...
WHERE c.col IS NULL 
```

因为`col`不可为空，WHERE 子句有效地表示“ *and**之间没有任何内容`b``a`*”。并且因为`b.col`被要求小于`a.col`，这意味着这是您想要`b`的唯一记录。`a`

我重复一遍，确保`col`是`NOT NULL`and `UNIQUE`（in 可能是主键），否则这种方法将失败。

由于潜在的性能问题，此方法不适用于非常大的数据。在这种情况下，您可能应该分配一个正确排序的连续序列，这样您就可以像上面的问题一样使用新的整数列简单地减去 1。

# c++ - 为什么abs(复杂 ) 总是返回零？

> ID：11108587
> 
> 赞同：18
> 
> 时间：2012-06-19T20:08:38.927
> 
> 标签：c++, math, stl, std, complex-numbers

VS2010 打印的以下代码与`0`我的预期相反：

```
#include <complex>
#include <iostream>

using namespace std;

int main(void)
{
    complex<int> z(20, 200);
    cout << abs<int>(z) << endl;
    return 0;
} 
```

当类型为`double`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T20:11:58.807

根据 C++ ISO 规范，§26.2/2：

> 为除或`complex`以外的任何类型`float`实例化模板的效果是未指定的。`double``long double`

换句话说，编译器可以在您实例化`complex<int>`. 从语言的角度来看，您在这里得到 0 的事实是完全明确定义的行为。

作为比较 - 在[​​ ideone 的 gcc 版本上](http://ideone.com/5c0B4)，此代码甚至无法编译。这是另一个完全有效的选择。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T20:13:01.217

在 MinGW 4.6.2 上打印`200`.

但是，在 C++ ISO 标准第 26.2.2 节中：

> 为除或`complex`以外的任何类型`float`实例化模板的效果是未指定的。`double``long double`

因此，您的构建环境表现出未定义的行为`complex<int>`，这并不违反标准。

正如所`templatetypedef`指出的，[ideone 的 C99 编译器](http://ideone.com/5c0B4)(GCC 4.3.4) 拒绝完全编译它。

# ssis - 在 ssis 中加载平面文件的最快方法

> ID：11108599
> 
> 赞同：2
> 
> 时间：2012-06-19T20:09:38.597
> 
> 标签：ssis, bids

我有一个需要加载到 SQL Server 中的平面文件。为此，我必须使用 SSIS。现在我想知道可以帮助我以最快的方式加载这些文件的事情：

1.  我应该使用平面文件管理器还是脚本任务来加载平面文件？（*因为在我的一个[问题](https://stackoverflow.com/questions/11090632/how-to-add-progress-counter-in-ssis)中，我得到了一个答案，指出脚本任务加载速度更快*）
2.  目标（ADO.NET 或 SQL Server）？
3.  平面文件的任何其他设置/最佳实践，我可以以更快的方式加载文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:04:43.777

这是 Microsoft 如何使用 SSIS 在 30 分钟内加载 1TB 的参考资料。

当您说脚本编写速度更快时，我感到很惊讶，因为微软使用平面文件源和 OLEDB 目标来完成同样的壮举。他们还通过将加载过程分解为更小的块和对目标表进行分区以及使用经过良好调整的硬件来优化加载。但是，如果我必须从 SSIS 加载大型数据集，我会使用他们在 SSIS 包中使用的技术。

[(Microsoft) 我们使用 SSIS 在 30 分钟内加载了 1TB，您也可以](http://msdn.microsoft.com/en-us/library/dd537533%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:29:10.803

我认为对于您要完成的工作，SSIS 将是一个不错的选择。它允许更大的灵活性。至于使用平面文件管理器/脚本，脚本总是会给你更好的性能，但我使用 SSIS，因为它使事情更容易导航（或修复）。我敢肯定，许多顽固的 SQL 开发人员会告诉您编写脚本，但我发现任何一种方式都有效。

至于目的地，我专门使用 SQL Server，所以我不能回答你的那部分问题。

在我看来，最佳实践是尽可能简单。你做的事情越容易，你就会得到更好的性能。在 SSIS 工作的 3 年中，我总是尽我所能优化任何查询，然后将其放入 SSIS。

听起来您只是在这些文件上做一个简单的 ETL，如果是这种情况，我根据我的经验推荐 SSIS。加载完所有内容后，您可以针对 char、varchar 和 int 的不同情况修改数据类型。

希望这可以帮助！

# c# - 如何简化 LINQ to WCF 数据服务中的组合谓词？

> ID：11108603
> 
> 赞同：2
> 
> 时间：2012-06-19T20:09:55.147
> 
> 标签：c#, wcf-data-services, predicatebuilder

我正在使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)和[Colin Meek 的](http://blogs.msdn.com/b/meek/archive/2008/05/02/linq-to-entities-combining-predicates.aspx)等价物以 WCF 数据服务友好（即没有调用表达式等）的方式编写谓词。这些适用于某些查询，但随着查询复杂性的增加，“递归达到允许的限制”失败。不幸的是，这个限制低于我在代码中正常情况下的预期。我也无法事先确定何时达到此限制。

有可能：

*   **在访问 WCF 数据服务之前简化谓词？**
*   **确定查询复杂性何时超过 WCF 数据服务的限制？**

在我的代码中，我正在为接受“州”和“城市”参数的 Azure 数据市场服务构建谓词。我没有为每个城市*州配对发出调用，而是按照以下方式编写谓词：

```
((city eq City11 or city eq City12 ...or city eq City1N) and (state eq State1))
...
or
((city eq CityM1...) and (state eq StateM)) 
```

由于表达式树，实际上谓词会更像这样：

```
((false or (((false or (City eq City11)) or (City eq City12)) and (State eq State1))) or (((false or (City eq City21)) or (City eq City22)) and (State eq State2))) 
```

使用 LINQPad，我可以捕获请求，手动简化它并证明这些工作一旦简化。因为我的代码没有尝试简化，所以命中 Azure 数据服务的 OData 查询过于复杂/递归并生成异常。在上面的概述中，我应用了诸如 (x 或 y) 或 z == x 或 y 或 z 之类的简化，这具有充分降低查询复杂性以使其通过集合的效果。因此我上面的两个问题。

任何帮助/指针将不胜感激！

# azure - Windows Azure - 设置 Blob 服务属性 REST API 调用身份验证参数

> ID：11108605
> 
> 赞同：2
> 
> 时间：2012-06-19T20:09:59.393
> 
> 标签：azure, azure-storage, azure-blob-storage

我正在尝试对 Set Blob Properties API (http://msdn.microsoft.com/en-us/library/windowsazure/hh452235) 进行简单的 REST 调用，以关闭/打开日志记录。我已获得 REST API 调用以成功检索 Blob 属性，因此我知道我的散列算法、标头设置和身份验证签名创建工作，但我似乎无法让它在设置属性方面工作。我一直在 Authentication Header 上收到错误，所以我知道我没有在那里做某事。

我在下面复制了正在创建的内容并最终散列并放入 auth 标头字符串中。在线文档 (http://msdn.microsoft.com/en-us/library/windowsazure/dd179428) 并不能真正帮助确定这种特定类型的 Blob 请求绝对需要哪些字段，所以我试过了填写其中的大多数，但无论我填写什么，我似乎都没有得到不同的响应。我还尝试了 Shared Key Lite 身份验证，因为它更轻量级，所以它是首选，但这并没有当我填写所有 5 个字段时，似乎也可以工作。

**Blob 服务的共享密钥身份验证：**

`PUT\n \n \n 130\n (MD5_CONTENT_HASH) \n \n \n \n \n \n \n x-ms-date:Tue, 19 Jun 2012 19:53:58 GMT\n x-ms-version:2009-09-19\n /(MY_ACCOUNT)/\n comp:properties\n restype:service`

我在这里有什么明显的遗漏吗？当我发出请求调用时，值 (MD5_CONTENT_HASH) 和 (MY_ACCOUNT) 当然会被填写，并且当我发送它时，对“GET”属性的类似请求调用工作正常。那个和这个之间的唯一区别是我发送了 MD5_content 以及内容长度。不过，我可能在这里遗漏了一些明显的东西。

任何建议将不胜感激！提前致谢。-文森特

**编辑更多信息：**

我正在使用的编程语言：Objective-C (iOS iPhone)

我也在使用 ASIHTTPRequest 来发出请求。我简单地定义了请求，setRequestMethod:@"PUT"，然后我创建请求体并将其转换为 NSData 以计算长度。我通过 appendPostData 方法将请求正文数据附加到请求中。然后，我构建上面的身份验证字符串，对整个内容进行哈希处理，并将其作为名为“授权”的标头附加到请求中。

我正在使用的请求正文字符串：

 `````
<?xml version=\"1.0\" encoding=\"utf-8\"?><StorageServiceProperties><Logging><Version>1</Version></Logging></StorageServiceProperties> 
```` 

`我知道这是一个不完整的请求正文，但我计划等待它在“缺少请求正文元素”或类似的东西上失败，直到我继续在那里创建完整的 XML。（这可能是我的问题吗？）`

 `我从服务器得到的错误：

 `````
<?xml version="1.0" encoding="utf-8"?><Error><Code>AuthenticationFailed</Code><Message>Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:accc4fac-2701-409c-b1a7-b3a528ce7e8a
Time:2012-06-20T14:36:50.5313236Z</Message><AuthenticationErrorDetail>The MAC signature found in the HTTP request '(MY_HASH)' is not the same as any computed signature. Server used following string to sign: 'POST

130

x-ms-date:Wed, 20 Jun 2012 14:36:50 GMT
x-ms-version:2009-09-19
/(MY_ACCOUNT)/
comp:properties
restype:service'.</AuthenticationErrorDetail></Error> 
````  `奇怪的是，无论我将多少参数传递给身份验证签名，我从服务器返回的错误似乎都是这样。

谢谢你的尽心帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T16:12:16.060

比较您的签名字符串和错误消息表明您正在发送一个 POST 请求，但就像您发送一个 PUT 一样进行签名。````

# python - 遍历python中每个嵌套列表的第二个值

> ID：11108610
> 
> 赞同：1
> 
> 时间：2012-06-19T20:10:08.317
> 
> 标签：python, list, loops, nested

可能是一些非常简单的事情，但我遇到了一些真正的麻烦。我有一个这样的列表：

```
[[1, 2500],[3,4319],[8,3292],[3,34590]] 
```

其中每个嵌套列表中的第一个值是某种分数，第二个值是该分数对应的用户 ID。

我正在尝试对列表进行一些简单的算术运算，以删除第二个列表中的所有用户 ID。但是，我发现我不能只处理每个嵌套列表的第二个元素。

```
newlist = list(set(oldlist[][1]) - set(to_be_removed)) 
```

我是想用括号变得太有创意，还是我只是错过了一些非常简单的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:12:42.410

使用列表理解将是这里最简单的解决方案：

```
new_list = [x for x in old_list if x[1] not in to_be_removed] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:14:31.080

像这样的东西？

```
old_list = [[1, 2500],[3,4319],[8,3292],[3,34590]]
removals = set([2500, 34590])
new_list = [[x, y] for x, y in old_list if y not in removals] 
```

# c++ - 套接字可以在关闭时发送信号吗？

> ID：11108618
> 
> 赞同：3
> 
> 时间：2012-06-19T20:10:33.903
> 
> 标签：c++, sockets, network-programming, signals

我正在编写某种服务器应用程序（在 C++ 中），它包含服务器正在与之通信的套接字的 fd_set 文件描述符，我想知道其中一个何时关闭\在另一侧关闭而无需阅读\写信给它。我经常阻塞 select() （没有超时），等待我提供的两个 fd_set 的读取准备和异常条件。

我开始认为在另一侧关闭的任何套接字都会出现在 exceptfds 中，但是当我继续阅读时，我开始明白情况并非如此。[select() 手册页](http://linux.die.net/man/2/select)并没有真正说明正在监视哪些异常 exceptfds。[此外，据我了解，从操作系统到操作系统](https://stackoverflow.com/questions/1342712/nix-select-and-exceptfds-errorfds-semantics)（我自己正在使用 Ubnubt 11.10），什么被视为异常情况会发生变化，并且我没有在任何地方找到对正在关闭\关闭的套接字的引用（在另一边）作为一个例外。

此外，[socket(7) 手册页](http://linux.die.net/man/7/socket)提到了套接字可能发送的两种信号：

1.  SIGPIPE - 在写入关闭的套接字时发送。
2.  SIGIO - 在发生 I/O 事件时发送。

不幸的是，没有提到什么构成 I/O 事件，而且无论如何关闭可能不会被每个人视为 I/O 事件（我自己就是一个很好的例子）。

所以我要问的是 - 我可以让套接字在关闭时发送信号或将其自身插入到 exceptionfds 中，还是以其他方式主动提示我？

谢谢， 谢伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:15:41.187

通常，当远程对等方关闭套接字时，它变得*可读*（出于 的目的`select()`），并且当您从中读取时，您会得到*零*字节。这个零字节读取表明另一端正常关闭了套接字。这不被视为例外情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:17:36.160

在我自己的应用程序中，当我的`select()`调用（用于读取事件）返回我的文件描述符时，我调用`ioctl()`以查看缓冲区中有多少可供读取。如果有零字节，那么我用它来表示连接已关闭。

[实际上，当我在堆栈溢出](https://stackoverflow.com/questions/283375/detecting-tcp-client-disconnect)时从这里的答案开始编写 linux 套接字时，我发现了这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T22:54:56.010

您还可以使用“适配器”在许多其他事件中抽象出这个事件。

例如，从我的一个项目中......

```
 #region Copyright
    /*
    This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/      
 */
#endregion

namespace Media.Sockets
{
    #region NetworkConnection

    /// <summary>
    /// Represents a <see cref="Connection"/> specific to the Network.
    /// </summary>
    public class NetworkConnection : Connection, Common.ISocketReference
    {
        #region NetworkConnectionState

        [System.Flags]
        protected enum NetworkConnectionState : long
        {
            None = 0,
            Initialized = 1,
            Bound = 2,
            Connected = 4,
        }

        #endregion

        #region Fields

        /// <summary>
        /// Created in <see cref="CreateWaitHandle"/>, Disposed in <see cref="Dispose"/>.
        /// </summary>
        Common.Extensions.WaitHandle.DisposableWaitHandle WaitHandle;

        /// <summary>
        /// The date and time when the Connection was started.
        /// </summary>
        protected System.DateTime LasRemoteConnectionStartedDateTime;

        /// <summary>
        /// The date and time when the Connection was started.
        /// </summary>
        protected System.DateTime LastRemoteConnectionCompletedDateTime;

        #endregion

        #region Properties

        /// <summary>
        /// Gets the amount of time taken to connect to the <see cref="RemoteEndPoint"/>
        /// </summary>
        public System.TimeSpan RemoteConnectionTime { get { return LastRemoteConnectionCompletedDateTime - LasRemoteConnectionStartedDateTime; } }

        /// <summary>
        /// The <see cref="System.Net.NetworkInformation.NetworkInterface"/> assoicated with the NetworkConnection.
        /// </summary>
        public System.Net.NetworkInformation.NetworkInterface NetworkInterface { get; protected set; }

        /// <summary>
        /// The <see cref="System.Net.Sockets.Socket"/> assoicated with the NetworkConnection.
        /// </summary>
        public System.Net.Sockets.Socket ConnectionSocket { get; protected set; }

        /// <summary>
        /// Indicates if the NetworkConnection has a <see cref="NetworkInterface"/> which is not null.
        /// </summary>
        public bool HasNetworkInterface { get { return NetworkInterface != null; } }

        /// <summary>
        /// The <see cref="System.Net.EndPoint"/> from which this NetworkConnection connects to the <see cref="RemoteEndPoint"/>
        /// </summary>
        public System.Net.EndPoint LocalEndPoint { get; protected set; }

        /// <summary>
        /// Indicates if this NetworkConnection has a <see cref="LocalEndPoint"/> which is not null.
        /// </summary>
        public bool HasLocalEndPoint { get { return LocalEndPoint != null; } }

        /// <summary>
        /// The <see cref="System.Net.EndPoint"/> from which this NetworkConnection is connected to via the <see cref="LocalEndPoint"/>
        /// </summary>
        public System.Net.EndPoint RemoteEndPoint { get; protected set; }

        /// <summary>
        /// Indicates if this NetworkConnection has a <see cref="RemoteEndPoint"/> which is not null.
        /// </summary>
        public bool HasRemoteEndPoint { get { return RemoteEndPoint != null; } }

        /// <summary>
        /// Indicates the <see cref="NetworkConnectionState"/> assoicated with this NetworkConnection
        /// </summary>
        protected NetworkConnectionState NetworkConnectionFlags
        {
            get { return (NetworkConnectionState)Flags; }
            set { Flags = (long)value; }
        }

        #endregion

        #region Constructor

        public NetworkConnection()
            : base() { }

        public NetworkConnection(string name, bool shouldDispose)
            : base(name, shouldDispose) { }

        public NetworkConnection(System.Net.Sockets.Socket existingSocket, bool ownsHandle, bool shouldDispose)
            : this("System.Net.Socket-" + ownsHandle.ToString(), shouldDispose)
        {
            if (existingSocket == null) throw new System.ArgumentNullException("existingSocket");

            //Assign the ConnectionSocket
            ConnectionSocket = existingSocket;

            //Flag Initialized.
            FlagInitialized();

            //Assign the NetworkInterface
            NetworkInterface = Common.Extensions.NetworkInterface.NetworkInterfaceExtensions.GetNetworkInterface(ConnectionSocket);

            //Create a WaitHandle 
            CreateWaitHandle(ConnectionSocket.Handle, ownsHandle);

            //Check IsBound
            if (ConnectionSocket.IsBound)
            {
                //Flag Bound.
                FlagBound();

                //Serialize and Assign LocalEndPoint
                LocalEndPoint = existingSocket.LocalEndPoint;
            }

            //Check Connected
            if (ConnectionSocket.Connected)
            {
                //Sample the clock
                LasRemoteConnectionStartedDateTime = System.DateTime.UtcNow;

                //Serialize and Assign RemoteEndPoint
                RemoteEndPoint = existingSocket.RemoteEndPoint;

                //Call Connect to FlagConnected and call base logic.
                Connect();

                //Sample the clock
                LastRemoteConnectionCompletedDateTime = System.DateTime.UtcNow;
            }
        }

        #endregion

        #region NetworkChange Event Handlers

        void NetworkChange_NetworkAvailabilityChanged(object sender, System.Net.NetworkInformation.NetworkAvailabilityEventArgs e)
        {
            Refresh();
        }

        void NetworkChange_NetworkAddressChanged(object sender, System.EventArgs e)
        {
            Refresh();
        }

        #endregion

        #region Bound

        protected void FlagBound()
        {
            //Indicate Bound
            Flags |= (long)NetworkConnectionState.Bound;
        }

        protected void UnFlagBound()
        {
            //Indicate not Bound
            Flags &= (long)NetworkConnectionState.Bound;
        }

        #endregion

        #region Initialize

        protected void FlagInitialized()
        {
            //Indicate Connected
            Flags |= (long)NetworkConnectionState.Initialized;
        }

        protected void UnFlagInitialized()
        {
            //Indicate Not Connected
            Flags &= (long)NetworkConnectionState.Initialized;
        }

        public virtual void Initialize(bool registerForEvents)
        {
            //Check not already Initialized.
            if (false == NetworkConnectionFlags.HasFlag(NetworkConnectionState.Initialized))
            {
                //Indicate Initialized
                FlagInitialized();

                if (registerForEvents)
                {
                    //Attach events
                    System.Net.NetworkInformation.NetworkChange.NetworkAddressChanged += NetworkChange_NetworkAddressChanged;

                    System.Net.NetworkInformation.NetworkChange.NetworkAvailabilityChanged += NetworkChange_NetworkAvailabilityChanged;
                }
            }
        }

        #endregion

        #region Refresh

        public override void Refresh()
        {
            base.Refresh();
        }

        #endregion

        #region CreateConnectionSocket

        public void CreateConnectionSocket(System.Net.Sockets.AddressFamily addressFamily, System.Net.Sockets.SocketType socketType, System.Net.Sockets.ProtocolType protocolType)
        {
            if (ConnectionSocket == null)
            {
                ConnectionSocket = new System.Net.Sockets.Socket(addressFamily, socketType, protocolType);

                CreateWaitHandle(ConnectionSocket.Handle, true);
            }
        }

        #endregion

        #region CreateWaitHandle

        public void CreateWaitHandle(System.IntPtr handle, bool ownsHandle)
        {
            if (WaitHandle == null)
            {
                WaitHandle = new Common.Extensions.WaitHandle.DisposableWaitHandle(handle, ownsHandle);
            }
        }

        #endregion

        #region Connect

        protected void FlagConnected()
        {
            //Indicate Connected
            Flags |= (long)NetworkConnectionState.Connected;
        }

        protected void UnFlagConnected()
        {
            //Indicate Not Connected
            Flags &= (long)NetworkConnectionState.Connected;
        }

        public override void Connect()
        {
            //Check not already Connected.
            if (false == NetworkConnectionFlags.HasFlag(NetworkConnectionState.Connected))
            {
                //Check IsEstablished
                if (IsEstablished) return;

                if (NetworkInterface == null) throw new System.InvalidOperationException("NetworkInterface must be assigned before calling Connect.");

                if (LocalEndPoint == null) throw new System.InvalidOperationException("LocalEndPoint must be assigned before calling Connect.");

                if (RemoteEndPoint == null) throw new System.InvalidOperationException("RemoteEndPoint must be assigned before calling Connect.");

                //Set established
                base.Connect();

                //Indicate Connected
                FlagConnected();

                //Refresh the connection
                Refresh();
            }
        }

        /// <summary>
        /// Creates the <see cref="CreateConnectionSocket"/> using the specified options and connects the socket.
        /// Assigns <see cref="LocalEndPoint"/> and <see cref="RemoteEndPoint"/>
        /// </summary>
        /// <param name="addressFamily"></param>
        /// <param name="socketType"></param>
        /// <param name="protocolType"></param>
        /// <param name="addressList"></param>
        /// <param name="port"></param>
        public virtual void Connect(System.Net.Sockets.AddressFamily addressFamily, System.Net.Sockets.SocketType socketType, System.Net.Sockets.ProtocolType protocolType, System.Net.IPAddress[] addressList, int port)
        {
            try
            {
                //Create the socket
                CreateConnectionSocket(addressFamily, socketType, protocolType);

                //Sample the clock
                LasRemoteConnectionStartedDateTime = System.DateTime.UtcNow;

                //Connect the socket
                ConnectionSocket.Connect(addressList, port);

                //Sample the clock
                LastRemoteConnectionCompletedDateTime = System.DateTime.UtcNow;
            }
            finally
            {
                //Assign the NetworkInterface
                NetworkInterface = Common.Extensions.NetworkInterface.NetworkInterfaceExtensions.GetNetworkInterface(ConnectionSocket);

                //Assign the LocalEndPoint
                LocalEndPoint = (System.Net.IPEndPoint)ConnectionSocket.LocalEndPoint;

                //Assign the RemoteEndPoint
                RemoteEndPoint = (System.Net.IPEndPoint)ConnectionSocket.RemoteEndPoint;

                //Call Connect to FlagConnected and call base logic.
                Connect();
            }
        }

        #endregion

        #region Disconnect

        public virtual void Disconnect(bool allowReuse = false)
        {
            //Check not already Connected.
            if (((NetworkConnectionState)Flags).HasFlag(NetworkConnectionState.Connected))
            {
                ConnectionSocket.Disconnect(allowReuse);

                base.Disconnect();

                UnFlagConnected();

                Refresh();
            }
        }

        public override void Disconnect()
        {
            Disconnect(false);
        }

        #endregion

        #region Dispose

        protected override void Dispose(bool disposing)
        {
            base.Dispose(disposing);

            using (WaitHandle)
            {
                System.Net.NetworkInformation.NetworkChange.NetworkAddressChanged -= NetworkChange_NetworkAddressChanged;

                System.Net.NetworkInformation.NetworkChange.NetworkAvailabilityChanged -= NetworkChange_NetworkAvailabilityChanged;

                ConnectionSocket = null;

                LocalEndPoint = RemoteEndPoint = null;

                NetworkInterface = null;
            }
        }

        #endregion

        System.Collections.Generic.IEnumerable<System.Net.Sockets.Socket> Common.ISocketReference.GetReferencedSockets()
        {
            yield return ConnectionSocket;
        }
    }

    #endregion
} 
```

如果您需要“连接”基类，您可以参考这个

```
#region Copyright
/*
This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/

 Julius.Friedman@gmail.com / (SR. Software Engineer ASTI Transportation Inc. http://www.asti-trans.com)   
 * v//
 */
#endregion

namespace Media.Sockets
{
    #region Connection

    /// <summary>
    /// Provides a base class to facilitate the concept of a Connection.
    /// </summary>
    public abstract class Connection : Common.BaseDisposable
    {
        #region Statics

        /// <summary>
        /// A string with the format of:
        ///     `TypeName Id Flags Name`
        /// </summary>
        const string FormatString = "{0} {1} ({2}) {3}";

        #endregion

        #region Properties

        /// <summary>
        /// The unique identifier assoicated with this instance.
        /// </summary>
        public readonly System.Guid Id = System.Guid.NewGuid();

        /// <summary>
        /// The date and time the instance was created.
        /// </summary>
        public readonly System.DateTime Created = System.DateTime.UtcNow;

        /// <summary>
        /// The name assigned to this instance.
        /// </summary>
        public readonly string Name;

        /// <summary>
        /// Indicates if <see cref="Disconnect"/> will be called when disposing.
        /// </summary>
        public bool IsPersistent
        {
            get
            {
                return ShouldDispose == false;
            }
            set
            {
                ShouldDispose = value == false;
            }
        }

        /// <summary>
        /// Provided for derived implementations
        /// </summary>
        protected long Flags { get; set; }

        /// <summary>
        /// Indicates if the Connection is established.
        /// </summary>
        public virtual bool IsEstablished { get; protected set; }

        /// <summary>
        /// The date and time the Connection was established.
        /// </summary>
        public System.DateTime EstablishedDateTime { get; protected set; }

        /// <summary>
        /// The amount of time the connection has been established.
        /// </summary>
        public System.TimeSpan TimeEstablished { get { return IsEstablished ? System.DateTime.UtcNow - EstablishedDateTime : System.TimeSpan.Zero; } }

        #endregion

        #region Connect

        /// <summary>
        /// If <see cref="IsDisposed"/> is false, Sets <see cref="IsEstablished"/> to true.
        /// </summary>
        public virtual void Connect()
        {
            if (IsDisposed) return;

            EstablishedDateTime = System.DateTime.UtcNow;

            IsEstablished = true;
        }

        #endregion

        #region Disconnect

        /// <summary>
        /// If <see cref="IsDisposed"/> is false, Sets <see cref="IsEstablished"/> to false.
        /// </summary>
        public virtual void Disconnect()
        {
            if (IsDisposed) return;

            IsEstablished = false;
        }

        #endregion

        #region Refresh

        /// <summary>
        /// Refreshes the details of the Connection.
        /// Throws a <see cref="System.ObjectDisposedException"/> if <see cref="IsDisposed"/> is true.
        /// </summary>
        public virtual void Refresh()
        {
            CheckDisposed();
        }

        #endregion

        #region Dispose

        /// <summary>
        /// If <see cref="IsDisposed"/> is True the call returns immediately.
        /// Calls <see cref="Disconnect"/> if <see cref="IsPersistent"/> is False and calls <see cref="Common.BaseDisposable.Dispose"/>
        /// </summary>
        public override void Dispose()
        {
            if (IsDisposed) return;

            if (false == IsPersistent) Disconnect();

            base.Dispose();
        }

        #endregion

        #region Constructor

        public Connection(string name, bool shouldDispose)
            : base(shouldDispose)
        {
            Name = name;
        }

        public Connection()
            : this(string.Empty, true) { }

        #endregion

        #region ToString

        public override string ToString()
        {
            return string.Format(FormatString, GetType().Name.ToString(), Id.ToString(), Flags, Name);
        }

        #endregion

    }

    #endregion
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T22:56:49.037

您可以参考此代码以获取实现其他类的 IPNetworkConnection 示例。

```
#region Copyright
/*
This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/      
 * v//
 */
#endregion

namespace Media.Sockets
{
#region IPNetworkConnection

/// <summary>
/// Represents a <see cref="NetworkConnection"/> which utilizes the IP Protocol.
/// </summary>
public class IPNetworkConnection : NetworkConnection
{
    #region Statics

    public static System.Net.NetworkInformation.IPGlobalProperties IPGlobalProperties
    {
        get { return System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties(); }
    }

    #region CreateIPHostEntry

    public static System.Net.IPHostEntry CreateIPHostEntry(System.Net.IPAddress address, string hostName, params string[] aliases)
    {
        return CreateIPHostEntry(Common.Extensions.Object.ObjectExtensions.ToArray<System.Net.IPAddress>(address),
            hostName,
            aliases);
    }

    public static System.Net.IPHostEntry CreateIPHostEntry(string hostName, params System.Net.IPAddress[] address)
    {
        return CreateIPHostEntry(address, hostName, null);
    }

    public static System.Net.IPHostEntry CreateIPHostEntry(System.Net.IPAddress[] addresses, string hostName, params string[] aliases)
    {
        return new System.Net.IPHostEntry()
        {
            AddressList = Common.Extensions.Array.ArrayExtensions.IsNullOrEmpty(addresses) ? Common.Extensions.Object.ObjectExtensions.ToArray<System.Net.IPAddress>(System.Net.IPAddress.None) : addresses,
            Aliases = Common.Extensions.Array.ArrayExtensions.IsNullOrEmpty(aliases) ? Common.Extensions.Object.ObjectExtensions.ToArray<string>(string.Empty) : aliases,
            HostName = hostName ?? string.Empty
        };
    }

    #endregion

    #endregion

    #region Properties

    /// <summary>
    /// Gets the <see cref="System.Net.NetworkInformation.IPInterfaceProperties"/> assoicated with the <see cref="NetworkInterface"/>
    /// </summary>
    public System.Net.NetworkInformation.IPInterfaceProperties IPInterfaceProperties
    {
        get { return HasNetworkInterface ? NetworkInterface.GetIPProperties() : null; }
    }

    /// <summary>
    /// Indicates if the <see cref="RemoteIPEndPoint"/> has a <see cref="System.Net.NetworkInformation.NetworkInterface"/> on this computer.
    /// </summary>
    public bool IsLocalConnection { get { return HasRemoteIPEndPoint && Common.Extensions.NetworkInterface.NetworkInterfaceExtensions.GetNetworkInterface(RemoteIPEndPoint) != null; } }

    /// <summary>
    /// Indicates if the <see cref="RemoteIPEndPoint"/> is from within the same network as this computer.
    /// </summary>
    public bool IsIntranetConnection
    {
        get { return false == IsLocalConnection && Common.Extensions.IPAddress.IPAddressExtensions.IsOnIntranet(RemoteIPEndPoint.Address); }
    }

    #region Local        

    /// <summary>
    /// The <see cref="System.Net.IPHostEntry"/> assoicated with the <see cref="LocalIPEndPoint"/>
    /// </summary>
    public System.Net.IPHostEntry LocalIPHostEntry { get; protected set; }

    /// <summary>
    /// Indicates if the <see cref="LocalIPHostEntry"/> is not null.
    /// </summary>
    public bool HasLocalIPHostEntry { get { return LocalIPHostEntry != null; } }

    /// <summary>
    /// Gets or sets the <see cref="LocalEndPoint"/>.
    /// 
    /// If the <see cref="LocalEndPoint"/> is not a <see cref="System.Net.IPEndPoint"/> a <see cref="System.InvalidOperationException"/> will be thrown.
    /// </summary>
    public System.Net.IPEndPoint LocalIPEndPoint
    {
        get { return (System.Net.IPEndPoint)LocalEndPoint; }
        set
        {
            if (false == LocalEndPoint is System.Net.IPEndPoint) throw new System.InvalidOperationException("LocalEndPoint is not a System.Net.IPEndPoint");

            LocalEndPoint = value;
        }
    }

    /// <summary>
    /// Indicates if the <see cref="LocalIPEndPoint"/> is not null.
    /// </summary>
    public bool HasLocalIPEndPoint { get { return LocalIPEndPoint != null; } }

    #endregion

    #region Dhcp

    /// <summary>
    /// Gets the <see cref="System.Net.NetworkInformation.IPAddressCollection"/> assoicated with the <see cref="IPInterfaceProperties"/>
    /// </summary>
    public virtual System.Net.NetworkInformation.IPAddressCollection DhcpServerAddresses
    {
        get
        {
            return IPInterfaceProperties.DhcpServerAddresses;
        }
    }

    /// <summary>
    /// Indicates if the IPNetworkConnection utilized Dhcp
    /// </summary>
    public bool UsesDhcp
    {
        get
        {
            return DhcpServerAddresses.Count > 0; /* && DhcpLeaseLifetime != System.TimeSpan.MinValue;*/
        }
    }

    //Could make a Superset class of to unify paths..
    //System.Net.NetworkInformation.IPAddressInformationCollection ipAddressCollection;

    /// <summary>
    /// If <see cref="UsesDhcp"/> the amount of time of the IPAddress is leased according the <see cref="System.Net.NetworkInformation.IPAddressInformation"/> assoicated with the <see cref="LocalIPEndPoint"/>.
    /// 
    /// If the <see cref="LocalIPEndPoint"/> is not found in the leased <see cref="System.Net.NetworkInformation.IPAddressInformation"/> then <see cref="Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan"/> is returned.
    /// </summary>
    public System.TimeSpan DhcpLeaseLifetime
    {
        get
        {
            //If there is no Dhcp server the DhcpLeaveLifeTime is 0
            if (false == UsesDhcp) return System.TimeSpan.Zero;

            //Check Multicast if the address IsMulticast
            if (Common.Extensions.IPAddress.IPAddressExtensions.IsMulticast(LocalIPEndPoint.Address))
            {
                System.Net.NetworkInformation.MulticastIPAddressInformationCollection multicastIPAddressInformationCollection = IPInterfaceProperties.MulticastAddresses;

                foreach (System.Net.NetworkInformation.MulticastIPAddressInformation multicastIPAddressInformation in multicastIPAddressInformationCollection)
                {
                    if (multicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(multicastIPAddressInformation.DhcpLeaseLifetime);
                    }
                }
            }
            else //Check Unicast otherwise
            {
                System.Net.NetworkInformation.UnicastIPAddressInformationCollection unicastIPAddressInformationCollection = IPInterfaceProperties.UnicastAddresses;

                foreach (System.Net.NetworkInformation.UnicastIPAddressInformation unicastIPAddressInformation in unicastIPAddressInformationCollection)
                {
                    if (unicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(unicastIPAddressInformation.DhcpLeaseLifetime);
                    }
                }
            }

            //Could not find a an IPAddress which matched the LocalIPEndPoint, indicate infinite timeout.
            return Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan;
        }
    }

    /// <summary>
    /// If <see cref="UsesDhcp"/> Gets the number of seconds remaining during which this address is valid.
    /// 
    /// If the <see cref="LocalIPEndPoint"/> is not found in the leased <see cref="System.Net.NetworkInformation.IPAddressInformation"/> then <see cref="Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan"/> is returned.
    /// </summary>
    public System.TimeSpan DhcpAddressValidLifetime
    {
        get
        {
            //If there is no Dhcp server the DhcpLeaveLifeTime is 0
            if (false == UsesDhcp) return System.TimeSpan.Zero;

            //Check Multicast if the address IsMulticast
            if (Common.Extensions.IPAddress.IPAddressExtensions.IsMulticast(LocalIPEndPoint.Address))
            {
                System.Net.NetworkInformation.MulticastIPAddressInformationCollection multicastIPAddressInformationCollection = IPInterfaceProperties.MulticastAddresses;

                foreach (System.Net.NetworkInformation.MulticastIPAddressInformation multicastIPAddressInformation in multicastIPAddressInformationCollection)
                {
                    if (multicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(multicastIPAddressInformation.AddressValidLifetime);
                    }
                }
            }
            else //Check Unicast otherwise
            {
                System.Net.NetworkInformation.UnicastIPAddressInformationCollection unicastIPAddressInformationCollection = IPInterfaceProperties.UnicastAddresses;

                foreach (System.Net.NetworkInformation.UnicastIPAddressInformation unicastIPAddressInformation in unicastIPAddressInformationCollection)
                {
                    if (unicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(unicastIPAddressInformation.AddressValidLifetime);
                    }
                }
            }

            //Could not find a an IPAddress which matched the LocalIPEndPoint, indicate infinite timeout.
            return Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan;
        }
    }

    /// <summary>
    /// If <see cref="UsesDhcp"/> Gets the number of seconds remaining during which this address is the preferred address.
    /// 
    /// If the <see cref="LocalIPEndPoint"/> is not found in the leased <see cref="System.Net.NetworkInformation.IPAddressInformation"/> then <see cref="Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan"/> is returned.
    /// </summary>
    public System.TimeSpan DhcpAddressPreferredLifetime
    {
        get
        {
            //If there is no Dhcp server the DhcpLeaveLifeTime is 0
            if (false == UsesDhcp) return System.TimeSpan.Zero;

            //Check Multicast if the address IsMulticast
            if (Common.Extensions.IPAddress.IPAddressExtensions.IsMulticast(LocalIPEndPoint.Address))
            {
                System.Net.NetworkInformation.MulticastIPAddressInformationCollection multicastIPAddressInformationCollection = IPInterfaceProperties.MulticastAddresses;

                foreach (System.Net.NetworkInformation.MulticastIPAddressInformation multicastIPAddressInformation in multicastIPAddressInformationCollection)
                {
                    if (multicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(multicastIPAddressInformation.AddressPreferredLifetime);
                    }
                }
            }
            else //Check Unicast otherwise
            {
                System.Net.NetworkInformation.UnicastIPAddressInformationCollection unicastIPAddressInformationCollection = IPInterfaceProperties.UnicastAddresses;

                foreach (System.Net.NetworkInformation.UnicastIPAddressInformation unicastIPAddressInformation in unicastIPAddressInformationCollection)
                {
                    if (unicastIPAddressInformation.Address.Equals(LocalIPEndPoint.Address))
                    {
                        return System.TimeSpan.FromSeconds(unicastIPAddressInformation.AddressPreferredLifetime);
                    }
                }
            }

            //Could not find a an IPAddress which matched the LocalIPEndPoint, indicate infinite timeout.
            return Common.Extensions.TimeSpan.TimeSpanExtensions.InfiniteTimeSpan;
        }
    }

    #endregion

    #region Remote

    /// <summary>
    /// Provides information about the <see cref="RemoteEndPoint"/>.Address
    /// </summary>
    public System.Net.NetworkInformation.IPAddressInformation RemoteAddressInformation { get; protected set; }

    /// <summary>
    /// Indicates if the <see cref="RemoteAddressInformation"/> is not null.
    /// </summary>
    public bool HasRemoteAddressInformation { get { return RemoteAddressInformation != null; } }

    /// <summary>
    /// The <see cref="System.Net.IPHostEntry"/> assoicated with the <see cref="RemoteIPEndPoint"/>
    /// </summary>
    public System.Net.IPHostEntry RemoteIPHostEntry { get; protected set; }

    /// <summary>
    /// Indicates if the <see cref="RemoteIPHostEntry"/> is not null.
    /// </summary>
    public bool HasRemoteIPHostEntry { get { return RemoteIPHostEntry != null; } }

    /// <summary>
    /// Gets or sets the <see cref="RemoteEndPoint"/>.
    /// 
    /// If the <see cref="RemoteEndPoint"/> is not a <see cref="System.Net.IPEndPoint"/> a <see cref="System.InvalidOperationException"/> will be thrown.
    /// </summary>
    public System.Net.IPEndPoint RemoteIPEndPoint
    {
        get { return (System.Net.IPEndPoint)RemoteEndPoint; }
        set
        {
            if (false == RemoteEndPoint is System.Net.IPEndPoint) throw new System.InvalidOperationException("RemoteEndPoint is not a System.Net.IPEndPoint");

            RemoteEndPoint = value;
        }
    }

    /// <summary>
    /// Indicates if the <see cref="RemoteEndPoint"/> is a <see cref="System.Net.IPEndPoint"/>
    /// </summary>
    public bool HasRemoteIPEndPoint { get { return RemoteIPEndPoint != null; } }

    #endregion

    #endregion

    #region Constructor

    /// <summary>
    /// Creates a new NetworkConnection with the given.
    /// </summary>
    /// <param name="remoteIPHostEntry">given</param>
    public IPNetworkConnection(System.Net.IPHostEntry remoteIPHostEntry)
        : base()
    {
        if (remoteIPHostEntry == null) throw new System.ArgumentNullException("remoteIPHostEntry");

        RemoteIPHostEntry = remoteIPHostEntry;            
    }

    /// <summary>
    /// Creates a new NetworkConnection by resolving the given using <see cref="System.Net.Dns.GetHostEntry"/>
    /// </summary>
    /// <param name="hostNameOrAddress">given</param>
    public IPNetworkConnection(string hostNameOrAddress) :
        this(System.Net.Dns.GetHostEntry(hostNameOrAddress))
    {
        RemoteAddressInformation = new IPAddressInformation(System.Net.IPAddress.None, true, false);
    }

    /// <summary>
    /// Creates a new NetworkConnection and <see cref="new System.Net.IPHostEntry"/> using the given address.
    /// </summary>
    /// <param name="address">The address</param>
    public IPNetworkConnection(System.Net.IPAddress address) :
        this(CreateIPHostEntry(string.Empty, address))
    {
        RemoteAddressInformation = new IPAddressInformation(System.Net.IPAddress.None, false, false);
    }

    public IPNetworkConnection(System.Uri uri) : this(uri.DnsSafeHost) { }

    #endregion

    #region Refresh

    /// <summary>
    /// If <see cref="HasNetworkInterface"/> is True And <see cref="HasLocalIPEndPoint"/> then <see cref="NetworkInterface"/> is updated using <see cref="Common.Extensions.NetworkInterface.NetworkInterfaceExtensions.GetNetworkInterface"/>
    /// </summary>
    public void RefreshNetworkInterface()
    {
        if (HasNetworkInterface && HasLocalIPEndPoint)
        {                
            NetworkInterface = Common.Extensions.NetworkInterface.NetworkInterfaceExtensions.GetNetworkInterface(LocalIPEndPoint);
        }
    }

    /// <summary>
    /// If <see cref="HasRemoteAddressInformation"/> is True And <see cref="RemoteAddressInformation.IsDnsEligible"/> then the <see cref="RemoteIPHostEntry"/> is updated using <see cref="System.Net.Dns.GetHostEntry"/>
    /// </summary>
    public void RefreshRemoteIPHostEntry()
    {
        if (HasRemoteAddressInformation && RemoteAddressInformation.IsDnsEligible)
        {
            RemoteIPHostEntry = System.Net.Dns.GetHostEntry(RemoteIPEndPoint.Address);
        }
    }

    public override void Refresh()
    {
        if (IsDisposed) return;

        base.Refresh();

        RefreshNetworkInterface();

        RefreshRemoteIPHostEntry();
    }

    #endregion

    #region Connect

    public void Connect(int addressIndex, System.Net.NetworkInformation.NetworkInterface networkInterface, int port = 0)
    {
        if (ConnectionSocket == null) throw new System.InvalidOperationException("There must be a ConnectionSocket assigned before calling Connect.");

        if (addressIndex < 0) throw new System.IndexOutOfRangeException("addressIndex must be > 0 and < HostEntry.AddressList.Length");

        if (networkInterface == null) throw new System.ArgumentNullException("networkInterface");

        NetworkInterface = networkInterface;

        RemoteEndPoint = new System.Net.IPEndPoint(RemoteIPHostEntry.AddressList[addressIndex], port);

        Connect();

        LocalEndPoint = ConnectionSocket.LocalEndPoint;

        RemoteAddressInformation = new IPAddressInformation(RemoteIPEndPoint.Address, RemoteAddressInformation.IsDnsEligible, RemoteAddressInformation.IsTransient);
    }

    #endregion

    #region Dispose

    public override void Dispose()
    {
        base.Dispose();

        RemoteIPHostEntry = null;

        LocalEndPoint = RemoteEndPoint = null;

        NetworkInterface = null;
    }

    #endregion
}

#endregion
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T23:03:25.393

这只是许多可能的实现之一，还应该概述如何创建“翻译器”以及随后的“翻译连接”。显然（或不这样）可以在基类中以及在接口中概述 Send 和 Receive 方法，以便在需要时允许跨网络通信。

“连接”类为任何类型的连接定义了一个合适的基础。'NetworkConnection' 增加了对网络的要求，最后是一个 'IPNetworkConnection' 来实现 IP 协议所需的逻辑。这也可以扩展到“TcpNetworkConnection”，然后扩展到“TcpIpNetworkConnection”或以任何其他所需的方式，例如“SerialConnection”或“EthernetConnection”，然后构建一个类以允许跨媒体通信，例如“SerialToEthernetNetworkConnection”等。

例如：

```
 #region Copyright
/*
This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/

 Julius.Friedman@gmail.com / (SR. Software Engineer ASTI Transportation Inc. http://www.asti-trans.com)

Permission is hereby granted, free of charge, 
 * to any person obtaining a copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, 
 * including without limitation the rights to :
 * use, 
 * copy, 
 * modify, 
 * merge, 
 * publish, 
 * distribute, 
 * sublicense, 
 * and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * 
 * JuliusFriedman@gmail.com should be contacted for further details.

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 * 
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, 
 * ARISING FROM, 
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * v//
 */
#endregion

namespace Media.Sockets
{
    #region TcpNetworkConnection

    public class TcpNetworkConnection : NetworkConnection
    {
        #region Statics

        public static System.Net.NetworkInformation.TcpConnectionInformation[] TcpConnectionInformation
        {
            get { return IPNetworkConnection.IPGlobalProperties.GetActiveTcpConnections(); }
        }

        #endregion

        public TcpNetworkConnection(string name, bool shouldDispose) : base(name, shouldDispose) { }
    }

    #endregion
}

#region Copyright
/*
This file came from Managed Media Aggregation, You can always find the latest version @ https://net7mma.codeplex.com/

 Julius.Friedman@gmail.com / (SR. Software Engineer ASTI Transportation Inc. http://www.asti-trans.com)

Permission is hereby granted, free of charge, 
 * to any person obtaining a copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, 
 * including without limitation the rights to :
 * use, 
 * copy, 
 * modify, 
 * merge, 
 * publish, 
 * distribute, 
 * sublicense, 
 * and/or sell copies of the Software, 
 * and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 * 
 * 
 * JuliusFriedman@gmail.com should be contacted for further details.

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 * 
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, 
 * TORT OR OTHERWISE, 
 * ARISING FROM, 
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * v//
 */
#endregion

namespace Media.Sockets
{
    #region TcpNetworkConnection

    public class TcpIPNetworkConnection : IPNetworkConnection
    {
        #region Statics

        public static System.Net.NetworkInformation.TcpConnectionInformation[] TcpConnectionInformation
        {
            get { return IPNetworkConnection.IPGlobalProperties.GetActiveTcpConnections(); }
        }

        #endregion

        public TcpIPNetworkConnection() : base(string.Empty) { }
    }

    #endregion
} 
```

都是有效的实现，但用于不同的目的。

# objective-c - 如何将 .txt 文件中的信息读取到 Xcode 中的 NSMutable 数组中（第一行包含字符串、第二个整数、第三个另一个字符串等）

> ID：11108619
> 
> 赞同：0
> 
> 时间：2012-06-19T20:10:37.567
> 
> 标签：objective-c, xcode, for-loop, nsstring, nsscanner

我需要帮助将`.txt`文件读入`NSMutableArray`Xcode 中。我想以特定顺序读取包含许多不同字符串和整数的大文件，然后我想使用读取的信息创建一个新的人员对象，并将每个对象添加到人员对象数组中。

所以如果这是我的文本文件：

> 理查德·
> 史密斯
> richardsmitha@gmail.com
> 18
> www.richardsmith.com
> 史蒂夫·
> 乔布斯
> stevejobs@apple.com
> 12
> www.stevejobs.com

我想要一种方法来分配以下内容：

```
firstName = Richard
lastName = Smith
email = richardsmith@gmail.com
age = 18
website = www.richardsmith@gmail.com 
```

然后应该使用这些值创建对象。

```
PersonObject *person = [[PersonObject alloc] init];
temp = [PersonObject createPerson:firstName:lastName:email:age:website];

NSMutableArray *people = [[NSMutableArray alloc] initWithObjects:PersonObject];
[people addObject:temp]; 
```

然后，无论文件中有多少人，它都应该重复`.txt`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:29:56.830

这是您阅读文件的方式

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"filename" 
                                                 ofType:@"txt"];
NSString* content = [NSString stringWithContentsOfFile:path
                                              encoding:NSUTF8StringEncoding
                                                 error:NULL]; 
```

解析出来的东西就像

```
NSString * emailAddress = [content substringToIndex:[content rangeOfString:@".com"].location]

emailAddress = [content substringFromIndex:[content rangeOfString:@" "].location] 
```

在您上次更新后，您可能想要查找 \n 而不是“”。但是，您也可以只 nslog 出内容以准确查看分隔符的外观

# python - Python：动态“从”导入

> ID：11108628
> 
> 赞同：10
> 
> 时间：2012-06-19T20:11:17.367
> 
> 标签：python

所以我试图把一堆“从 x 导入 x”语句，看起来像这样：

```
from class_foo import class_foo 
```

变成动态的东西。我正在尝试将路径传递给目录并让它导入其中的所有模块。

```
def dynamicImport(dirPath):
    filez = os.listdir(dirPath)
    for file in filez:
        if "class" in file:
            oname = file[:-3] #cut off the file extension, trivial

            imp_statement = "from " + oname + " import " + oname
            #when I print imp_statement, I can verify it's being concatenated correctly

            exec(imp_statement) 
```

当我运行这个函数并传递一个路径时，语句字符串被正确创建并且它**不会产生任何错误**，但是稍后我将尝试访问一个导入的对象，并且会发生这种情况：

```
foo = class_foo()

NameError: name 'class_foo' is not defined 
```

显然我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T20:17:01.123

您正在`exec`函数的本地命名空间中使用 import 语句，因此这是定义名称的地方。当函数结束时，这个命名空间就消失了，你什么都没有了。您可能想要的是类似`exec imp_statement in globals()`.

为什么不直接使用[`__import__()`](http://docs.python.org/library/functions.html#__import__)而不是字符串处理？然后你会得到对你的模块的引用。然后，您可以在模块对象上使用类引用`getattr()`并将其插入`globals()`（或者只是将字典传递回调用者，然后调用者可以`globals().update()`使用它）。

```
import sys, os

def getClasses(directory):
    classes = {}
    oldcwd = os.getcwd()
    os.chdir(directory)   # change working directory so we know import will work
    for filename in os.listdir(directory):
        if filename.endswith(".py"):
            modname = filename[:-3]
            classes[modname] = getattr(__import__(modname), modname)
    os.setcwd(oldcwd)
    return classes

globals().update(getClasses(r"C:\plugin_classes")) 
```

类似的东西。或者不要`globals()`使用可能破坏您关心的全局变量的模块进行更新，只需将类留在字典中并从那里引用它们：

```
classes = getClasess(r"C:\plugin_classes")
for clas in classes.itervalues():
    instance = clas(1, 2, 3)       # instantiate
    instance.dosomething_cool(42)  # call method 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-11T23:15:34.370

Python >= 2.7 有[importlib](https://docs.python.org/2.7/library/importlib.html)（你可以[pip install importlib](https://pypi.python.org/pypi/importlib)在早期版本的 python 中使用 importlib）

```
module = importlib.import_module("path.to.module")
MyClass = module.MyClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T14:39:44.767

假设您的目录结构如下所示：

```
./   <- you are here
- main.py
- my_package/
    - __init__.py
    - my_module.py 
```

并且您想动态导入`my_module.py`，以使用它的一些功能、类等。然后，使用`importlib`，您可以在 中使用以下代码`main.py`：

```
import importlib

pack = "my_package"
mod = "my_module"

module = importlib.import_module("." + mod, pack)
# or, alternatively
module = importlib.import_module(".".join(pack, mod))

module.func("hello") # if my_package/my_module.py defines function "func"
obj = module.MyClass("world") # if my_package/my_module.py defines class "MyClass" 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-19T20:15:56.037

自从我使用 Python 以来已经有很长时间了。但我认为你的问题可能在于“oname”是一个字符串。该行 `from class_foo import class_foo`不是字符串。一个艰苦的选择是让您的代码创建一个全新的 .py 文件，该文件将包含所有导入。因此，您可以将所有当前文件以及新的导入基本上写入以 .py 结尾的文本文件

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-19T20:15:35.823

看一下[__import__](http://docs.python.org/library/functions.html#__import__)函数

# excel - Excel - 删除两列之间的所有一对一行

> ID：11108631
> 
> 赞同：2
> 
> 时间：2012-06-19T20:11:36.620
> 
> 标签：excel, vbscript, xls, xlsx

问题：我有 A 列和 B 列。A 列是可预测的，A 列有数千行。B 列的每个 A 列都有不同的行。例如，A 列的值 REQ_000021 可能在 B 列中有 5 行。这些都可以。我需要删除的行是每个 A 列只有一个 B 列的行。

我知道这不是人们做的典型事情，所以我找不到一个 VB 脚本来做这件事。如果网站允许，我会发布图片。首先需要15个代表点。

编辑：
我刚刚学会了如何在 stackoverflow 上换行，所以这里是：

```
Col A Col B 

---------------------------------- 

Scott Us

         德国

         西班牙

-------- --------------------------

布赖恩美国

---------- ------------ 

Mark US 

----------------------------------

         意大利

Tim葡萄牙

         爱尔兰

----------------------------------

```

删除 brian 和 Mark，因为 A 列和 B 列各有一行。
让 Scott 和 Tim 一个人呆着，因为每列 A 行有不止一个 B 列行。请记住，Scott 和 Tim 的 A 列是大的合并行。
这就是我想要完成的。

编辑：
根据斯科特的回答，这是输出：
为了让其他正在查看此内容的人清楚起见，我为一些标记加上了标题。
![斯科特解决方案的输出](../Images/e39eaceb1b72a15e2e3bce74614a0045.png)

编辑：以下 VB 脚本将删除 C 列中具有“DELETE”值的任何行。
我在 Excel 中将其用作宏。对于那些刚接触宏的人，请在 Excel 2007 中启用开发人员视图以访问可让您切换到 VB 屏幕的视图。

```
子 deleteDeleteString()
变暗为范围，单元格为范围，删除为范围
将 strCellValue 调暗为字符串
设置 rng = Intersect(Range("C:C"), ActiveSheet.UsedRange)
对于每个单元格

strCellValue = (cell.Value)
'如果在 C 列的单元格中发现 DELETE 大于 0 次，则删除它的整行
如果 InStr(strCellValue, "DELETE") > 0 那么
如果 del 什么都不是，那么
设置 del = 单元格
否则：设置 del = Union(del, cell)
万一
万一
下一个单元格
出错时继续下一步
del.EntireRow.delete
结束子

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:41:13.033

这是基于您对数据格式的编辑的新公式。

将以下公式放在 C1 中并沿列向下运行以获取要删除的行：

```
=IF(OR(ISBLANK(A1),ISBLANK(A2)),"","DELETE") 
```

您可能希望也可能不希望首先取消合并 A 列中的单元格，但考虑到 Excel 如何处理合并单元格的规则，这无关紧要。我在您提供的数据集上对此进行了测试，无论是否合并单元格都有效。

我不提供 VBA 解决方案，因为您在这里不需要。运行此公式，而不是在 C 列上过滤“删除”并删除您的行。

# ruby-on-rails - 在控制台之外运行 Rails 命令

> ID：11108632
> 
> 赞同：49
> 
> 时间：2012-06-19T20:11:42.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, console

对于我的大型应用程序，Rails 控制台需要一段时间才能加载。有没有办法更容易地单个命令？

我还希望能够使事情自动化，但这`echo "query" | rails console`不是做事的好方法。

想法？

编辑：我可以在需要时对查询进行 ping 查询的长时间运行的过程怎么样？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-20T00:07:36.450

在控制台之外运行命令有两种主要方式：

1.  依赖于 :environment 的 Rake 任务

2.  rails runner（以前是 script/runner），例如：

    ```
    $ rails runner "query" 
    ```

两者都在 Rails 指南中有很好的记录：[https ://guides.rubyonrails.org/command_line.html#bin-rails-runner](https://guides.rubyonrails.org/command_line.html#bin-rails-runner)

顺便说一句：这两种方法仍然需要与控制台相同的时间来启动，但它们对于非交互式任务很有用。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-08-04T21:54:40.650

只需通过管道输入：

```
echo 'puts Article.count' | bundle exec rails c 
```

[由于Spring](https://github.com/rails/spring)，它现在应该比最初提出问题时快得多。这不是立即的，但仍然比启动整个应用程序快得多。将此用于快速通道，它应该在一秒钟内运行（假设您所需的命令很快）：

```
echo 'puts Article.count' | spring rails c 
```

如果你真的想要一个长时间运行的进程，你可以通过创建一个简单地运行你发布给它的任何内容的控制器操作来轻松地做到这一点，然后使用别名后面的 curl 向它发送命令。这个动作当然是完全不安全的，应该三重防范在生产附近的任何地方运行，但它很容易设置。

# php - PHP> 引用数组 [0]

> ID：11108633
> 
> 赞同：1
> 
> 时间：2012-06-19T20:11:45.087
> 
> 标签：php

我如何引用 [0]？

```
object(GetClassSchedulesResult)#8 (6) { 
["ClassSchedules"]=> object(stdClass)#9 (1) { 
["ClassSchedule"]=> array(20) { 
[0]=> object(ClassSchedule)#10 (21) { 
["Classes"]=> string(18) "Rails" 
```

这有效：

```
$classes = $service->GetClassSchedules($parameters)->
             GetClassSchedulesResult->ClassSchedules->ClassSchedule; 
```

我正在尝试进入“课堂”。我在引用 [0] 时遇到问题：这不起作用：

```
$classes = $service->GetClassSchedules($parameters)->
             GetClassSchedulesResult->ClassSchedules->ClassSchedule->0->Classes; 
```

**更新**：一旦我正确引用它，输出总是包含以下内容：

`string(18) "the data i want here" ?>`

`string(18)`有什么简单的方法可以在没有and的情况下获取数据`?>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:15:13.233

这应该有效：

```
$classes = $service->GetClassSchedules($parameters)->
   GetClassSchedulesResult->ClassSchedules->ClassSchedule[0]->Classes; 
```

# jquery - 来自 Flash 的 jQuery .load()

> ID：11108635
> 
> 赞同：0
> 
> 时间：2012-06-19T20:11:47.833
> 
> 标签：jquery, actionscript

我需要`.load()`从 flash 中调用一些 jQuery 函数。

我用这个：

```
import flash.external.*;

on (release){
    ExternalInterface.call('show_alert','teste.asp');
} 
```

在我的页面上：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

      function show_alert(){

          $("#conteudo").load(msg);

          //alert("qualquer");

       };

     });

</script> 
```

但是`teste.asp`div 内没有加载`#conteudo`。我正在使用 AS2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:14:54.337

将函数移动到全局范围。

```
<script type="text/javascript">
  function show_alert(msg){

      $("#conteudo").load(msg);

      //alert("qualquer");

   };
</script> 
```

在这种情况下，您不应该需要`$(document).ready()`，但是，如果您发现需要，请将其放在函数内部而不是外部。

编辑：另外，您不接受函数的 msg 参数，在我的代码中已修复。

# iphone - 自定义 initWithNibName

> ID：11108637
> 
> 赞同：2
> 
> 时间：2012-06-19T20:11:50.190
> 
> 标签：iphone, objective-c, ios, ipad, initialization

我想要一个 custom `initWithNibName`，基本上将另一个`NSString`作为类型传入，以根据类型确定其中的一些逻辑`UIViewController`。所以我设置如下：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andFeedType:(NSString *)feedType
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

这甚至有意义吗？因为我不经常看到这种类型的初始化。如果没有，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:16:41.483

这对我来说很有意义。这是您在 Objective-C 中覆盖初始化程序以添加一些自定义初始化的方式。你认为它有什么问题？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:21:17.483

是的，这是有道理的。此外，如果你想保持你的 init 干净，你可以执行以下操作：

```
- (id)initWithFeedType:(NSString *)feedType
{
    self = [super initWithNibName:@"YourNibName" bundle:nil]; // nil is ok if the nib is included in the main bundle
    if (self) {

        // Set your feed here (copy it since you are using a string)

        // see the edit
        myFeedType = [feedType copy];
    }
    return self;
} 
```

**有关详细信息，请参阅Ole Begemann**的帖子[initWithNibName-bundle-breaks-encapsulation 。](http://oleb.net/blog/2012/01/initWithNibName-bundle-breaks-encapsulation/)

 **希望有帮助。

**编辑**

如果外部对象无法访问该提要属性，请为您的控制器创建一个类扩展，如下所示：

```
//.m
@interface YourController ()

@property (nonatomic, copy) NSString* myFeedType;

@end

@implementation YourController

@synthesize myFeedType;

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:16:12.060

这确实有道理。您正在创建自己的初始化程序，根据您的需求量身定制。此外，您正在做您应该做的事情，即`UIViewController` `initWithNibName:bundle:`在您的自定义 init 方法中调用指定的初始化程序（在 的情况下）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:19:59.747

等待！它可能不是最好的原因有一个：从情节提要加载视图控制器时**不会调用此方法。**出于这个原因，我建议使用`viewDidLoad:`自定义逻辑，并将自定义字符串设置为属性。**

# ruby-on-rails - Ruby/Rails：检查用户是否有 Q 答案的最佳方法

> ID：11108639
> 
> 赞同：0
> 
> 时间：2012-06-19T20:11:59.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以我在我的用户模型中有一个方法试图确定用户是否回答了问题。一个用户`has_many`回答和一个问题`has_many`回答（`through`选择）。这是我到目前为止所拥有的：

```
 def has_answered(question)
    has_answered_question = false
    answers.each { |answer| 
      has_answered_question = true if answer.question == question
    }
    has_answered_question
  end 
```

我想知道是否有任何方法可以清理它。似乎应该有某种方法可以在没有布尔值的情况下做到这一点，并且可能比我目前正在做的行更少。这样做的建议/方法越多越好。欢迎所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:16:53.977

```
answers.any? { |answer|  answer.question == question } 
```

或者

```
Answer.where('user_id = ?', user.id).where('question_id = ?', question.id).limit(1).count > 0 
```

# php - phpmyadmin 提供文件以供下载

> ID：11108642
> 
> 赞同：1
> 
> 时间：2012-06-19T20:12:14.230
> 
> 标签：php, apache, phpmyadmin, spdy

我有一个问题：在我的服务器上 phpmyadmin 不再工作了。它提供文件 db_structure.php 供下载而不是对其进行解析。

下载后有0KB

我已经用 atp-get purge 删除了它并重新安装了它，但还是一样，可能出了什么问题？

也许缺少 phpmyadmin 正在使用的模块？导致所有其他 php 文件在我的服务器上工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T06:48:44.747

我有同样的问题。

尝试以下命令。这解决了我的问题。

```
sudo apt-get install libapache2-mod-php5 
```

通常，下载而不是运行是由未安装/启用的 php 模块引起的。

您还可以使用以下方法启用 php apache 模块：

```
sudo apt-get install php
sudo a2enmod php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:00:35.893

我发现了原因：

我的服务器上包含了 googles spdy:// 协议的测试版，这导致了错误。

我禁用了它

```
/etc/apache2/mods-enebled/ 
```

一切都又好了

# java - Struts 2 ajax验证找不到拦截器类jsonValidationWorkflowStack

> ID：11108644
> 
> 赞同：4
> 
> 时间：2012-06-19T20:12:17.817
> 
> 标签：java, ajax, validation, struts2, dojo

我正在尝试在我的 Struts 2 应用程序中实现 ajax 验证。我在构建路径中包含了 struts2-json-plugin。每当我在 Eclipse 中启动服务器时，都会出现以下错误：

> 无法找到 ref-name jsonValidationWorkflowStack -interceptor-ref -file:/C:/path/struts.xml:15:60 引用的拦截器类

这就是我的 struts.xml 的样子：

```
<struts>
<constant name="struts.url.includeParams" value="all" />
<constant name="struts.devMode" value="true" />
<package name="default" extends="struts-default">
    <action name="submitForm" class="action.FormAction" >
        <interceptor-ref name="jsonValidationWorkflowStack"/>
        <result>results.jsp</result>
        <result name="input">index.jsp</result>
        <result name="error">index.jsp</result>
    </action>
</package>  
</struts> 
```

为什么会这样？我正在关注官方的 struts2 ajax 验证教程[。](http://struts.apache.org/2.1.8/docs/ajax-validation.html.)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T20:25:00.150

您需要扩展`"json-default"`包。

该`"struts-default"`软件包不知道`"jsonValidationWorkflowStack"`.

# php - 如何根据用户信息显示数据

> ID：11108645
> 
> 赞同：1
> 
> 时间：2012-06-19T20:12:17.847
> 
> 标签：php, mysql

我有两个用于用户登录的 sql 表，根据用户 ID 存储和检索数据。

```
$result = mysql_query("SELECT *FROM users u JOIN requests r ON (r.uid = u.id) WHERE r.request_id = ?"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:15:38.847

不不不，不要那样做！！！你会很容易被黑的！

使用[PDO](http://php.net/manual/en/book.pdo.php)或[准备语句](http://php.net/manual/en/pdo.prepared-statements.php)

```
SELECT r.*,u.* FROM users u JOIN requests r ON (r.uid = u.id) WHERE r.request_id = ? 
```

（你错过了 * 和 FROM 之间的空格）

看来您没有使用 OOP，我强烈建议您学习快速教程来学习 OOP 的基础知识，或者如果您有时间想学习，我会告诉您使用一些框架之王，例如 Codeigni.ter 或 CakePHP学习很多关于类和函数的知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:29:55.530

如果您不想使用 PDO 或准备语句，请准备和过滤 SQL 语句和变量。永远不要相信任何用户输入！

见[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)

# javascript - 如何让窗口“正确”？

> ID：11108646
> 
> 赞同：0
> 
> 时间：2012-06-19T20:12:30.703
> 
> 标签：javascript, jquery

我正在尝试在我的网页上放置一个浮动工具提示，并且我想要它，以便如果工具提示要挂在窗口的右边缘，它应该以另一种方式翻转它。这是我所拥有的：

```
$('[data-tooltip]').mousemove(function(e) {
    var left = e.pageX + 1;
    if(left + $kewtip.outerWidth() > ?????) {
        left = e.pageX - $kewtip.outerWidth() - 1;
    }
    var top = e.pageY - $kewtip.outerHeight() - 1;
    $kewtip.css({
        left: left,
        top: top
    });
}); 
```

问号不知道填什么。`left + $kewtip.outerWidth()`应该给我工具提示的右边缘，我想检查它是否大于窗口的右边缘。

`$(window).width()`不起作用，特别是当您水平滚动一点时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:16:43.837

您是否尝试过添加滚动位置？

```
$(window).width() + $(document).scrollLeft() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:17:44.650

不确定您是否可以使用 jQuery UI，但有一个 Position 实用程序可以用来执行此操作。该实用程序有一个名为的属性`collision`，在您的情况下，可以设置`flip`为实现所需的行为。

# r - 为 R 环境中当前加载的每个对象添加一列

> ID：11108647
> 
> 赞同：1
> 
> 时间：2012-06-19T20:12:35.837
> 
> 标签：r

我想为我的 R 环境中的每个数据框添加一列，它们都具有相同的格式。我可以通过这样的简单分配创建我想要的列：

```
x[,8] <- x[,4]/(x[,4]+x[,5]) 
```

当我尝试将其放入将遍历环境中每个对象的 for 循环中时，出现错误。

> 控制数据 <- ls()
> 
> for (i in control_data) {(i[,8] <- i[,4]/(i[,4]+i[,5]))}
> 
> 错误：“for（i in control_data）{[”中出现意外的“[”

这是输入文件的样子：

```
ENSMUSG00000030088  Aldh1l1 chr6:90436420-90550197  1.5082200   3.130860    0.671814    0.0000000
ENSMUSG00000020932  Gfap    chr11:102748649-102762226   7.0861500   44.182700   20.901700   0.2320750
ENSMUSG00000024411  Aqp4    chr18:15547902-15562193 3.4920400   3.474880    2.463230    0.0331238
ENSMUSG00000023913  Pla2g7  chr17:43705046-43749150 1.5105400   24.275600   11.422400   1.5111100
ENSMUSG00000035805  Mlc1    chr15:88786313-88809437 1.9010200   7.147400    5.313190    0.6358940
ENSMUSG00000007682  Dio2    chr12:91962993-91976878 1.7322900   12.094200   6.738320    1.0736900
ENSMUSG00000017390  Aldoc   chr11:78136469-78141283 55.4562000  199.958000  91.328300   22.9541000
ENSMUSG00000005089  Slc1a2  chr2:102498815-102630941    63.7394000  130.729000  103.710000  10.0406000
ENSMUSG00000070880  Gad1    chr2:70391128-70440071  2.6501400   14.907500   13.730200   1.3992200
ENSMUSG00000026787  Gad2    chr2:22477724-22549394  3.9908200   11.308600   28.221500   1.4530500 
```

感谢您提供的任何帮助。有没有更好的方法使用 apply 函数来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:19:40.497

正如评论中提到的，您的错误发生是因为调用的结果`ls`不是对象本身，而是它们作为字符串的名称。

~~要使用 for 循环，您将沿着这`eval(parse(...))`条路走下去。~~你也可以用`apply`一个函数来做到这一点。

```
myfun <- function(x) {
  df <- get(x)
  df[,8] <- df[,4] / (df[,4] + df[,5])
  return(df)
}

control_data <- ls()

lapply(control_data, myfun) 
```

根据评论：

```
for(i in control_data) {
  df <- get(i)
  df[,8] <- df[,4] / (df[,4] + df[,5])
  assign(i, df)
} 
```

# .net - 如果我只知道要从中获取数据的表名和列名，如何从实体框架中获取数据？

> ID：11108654
> 
> 赞同：1
> 
> 时间：2012-06-19T20:13:08.957
> 
> 标签：.net, linq, frameworks, entity

我有一个表，`Parameters`其中包含`Id`、`Name`、等列。该数据库还包含多个“系列数据”表，这些表有几个，可能是数百个列，包括一个列。我不拥有 db 架构。所以我无法改变这一点。`TableName``ColumnName``Timestamp`

用户必须通过 GUI提供`Name`、`Parameter`a`StartTime`和 an的 。`EndTime`业务逻辑必须返回一系列数据。

如何获取名称为`param.TableName`and的列和表中的数据`param.ColumnName`？

我目前正在使用这样的 switch 语句：

```
public List<double> GetData
                    (string paramName, DateTime startTime, DateTime endTime)
{
    using (var context = new MyEntities())
    {
        var param =
            (from p in context.Parameters where p.Name == paramName select p)
            .FirstOrDefault();

        switch (param.TableName)
        {
             case "Table1":
                 return GetTable1Data(columnName, startTime, endTime);
                 break;
             case "Table2":
                 return GetTable2Data(columnName, startTime, endTime);
                 break;
             default:
                 throw new Exception();
        }
    }
}

private List<double> GetTable1Data
   (MyEntities context, string columnName, DateTime startTime, DateTime endTime) {

    List<double> data = new List<double>();

    switch (columnName)
    {
        case "Parameter1":
            (from d in context.Table1 where d.Timestamp >= startTime && d.Timestamo <= endTime
            order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter1));
            break;
        case "Parameter2":
            (from d in context.Table1 where d.Timestamp >= startTime && d.Timestamo <= endTime
            order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter2));
            break;
       case "Parameter3":
           (from d in context.Table1 where d.Timestamp >= startTime && d.Timestamo <= endTime
           order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter3));
           break;
       default:
           throw new Exception("");
    }

    return data;
}

private List<double> GetTable2Data(MyEntities context, string columnName, DateTime startTime, DateTime endTime)
{
    List<double> data = new List<double>();

    switch (columnName)
    {
        case "Parameter1":
            (from d in context.Table2 where d.Timestamp >= startTime && d.Timestamo <= endTime
            order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter1));
            break;
        case "Parameter2":
            (from d in context.Table2 where d.Timestamp >= startTime && d.Timestamo <= endTime
            order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter2));
            break;
        case "Parameter3":
            (from d in context.Table2 where d.Timestamp >= startTime && d.Timestamo <= endTime
            order by d.Timestamp select d).ForEach(x => data.Add(d.Parameter3));
            break;
        default:
             throw new Exception("");
    }

    return data;

} 
```

这种重复似乎非常错误。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:51:44.143

您可以使用字符串形式的信息构建查询，然后像这样执行它：

```
return db.ExecuteStoreQuery<double>(
    "SELECT {0} FROM {1} WHERE [Timestamp] BETWEEN {2} AND {3}",
    columnName,
    tableName,
    startTime,
    endTime).ToList(); 
```

皮特

# c# - 将图像拆分为几块 silverlight windows phone

> ID：11108661
> 
> 赞同：2
> 
> 时间：2012-06-19T20:13:40.983
> 
> 标签：c#, silverlight, image, windows-phone-7, split

我想使用 windows phone 7.5 的 silverlight 将图像拆分为几个较小的图像。

首先，我想知道这是否可能（我最近对 ​​Windows Phone API 有一些不愉快的惊喜），如果是，请给我一些例子，因为我完全找不到。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:34:34.810

[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)与 Windows Phone 兼容，并且有一种`Crop`方法可以做到这一点。您只需要进行数学计算即可确定要裁剪的宽度/高度和 X/Y 坐标。

```
//this creates the four quadrants of sourceBitmap as new bitmaps

int halfWidth = sourceBitmap.PixelWidth / 2;
int halfHeight = sourceBitmap.PixelHeight / 2;

WriteableBitmap topLeft = sourceBitmap.Crop(0, 0, halfWidth, halfHeight);
WriteableBitmap topRight = sourceBitmap.Crop(halfWidth, 0, halfWidth, halfHeight);
WriteableBitmap bottomLeft = sourceBitmap.Crop(0, halfHeight, halfWidth, halfHeight);
WriteableBitmap bottomRight = sourceBitmap.Crop(halfWidth, halfHeight, halfWidth, halfHeight); 
```

在上面的示例中，我可能偏离了一个像素（未测试），但它应该演示 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:18:08.860

您可以将您的 silverlight 项目与 XNA 结合使用 spritebatch.Draw()。它有一个源矩形参数，可让您从图像中绘制一部分。

MSDN 对如何结合 silverlight 和 XNA 有一些帮助。 [http://msdn.microsoft.com/en-us/library/hh202938(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202938(v=vs.92).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:27:11.477

结合 ScaleTransform 和 TranslateTransform 来渲染正确的部分。

ScaleTransform (numXTiles,numYTiles)

翻译（xTileIndex / numXTiles，yTileIndex / numYTiles）；

将 ImageControl 放在 Grid 内以进行剪辑

# php - 这是一个带有foreach的数组吗？

> ID：11108664
> 
> 赞同：0
> 
> 时间：2012-06-19T20:14:10.470
> 
> 标签：php

我有三个变量（$var、$var2 和 $var3），我希望它在它们有值时输出。

例如，如果`$var = "Data";`那么：

```
<ul>
<li>Data</li>
</ul> 
```

如果任何其他变量具有值，则：

```
<ul>
<li>Data</li>
<li>Data2</li>
</ul> 
```

或者

```
<ul>
<li>Data</li>
<li>Data3</li>
</ul>

<ul>
<li>Data</li>
<li>Data3</li>
<li>Data2</li>
</ul> 
```

考虑到每个人都有不同的方式来编写他们的 php 代码，我不确定如何创建它以及使用什么方法。有人知道我怎么能创造这个吗？

另外：我在测试某些 php 代码时使用[http://writecodeonline.com/php/ 。](http://writecodeonline.com/php/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:18:13.667

```
<ul>
    <?php foreach (array($var1, $var2, $var3) as $var) : ?>
        <?php if (!empty($var)) : ?>
            <li><?php echo $var; ?></li>
        <?php endif; ?>
    <?php endforeach; ?>
</ul> 
```

您可以在[此处查看输出](http://writecodeonline.com/php/)`writecodeonline.com`。

* * *

或者，也许您更喜欢这个：

```
<ul>
    <?php
    foreach (array($var1, $var2, $var3) as $var) {
        if (!empty($var)) {
            echo '<li>' . $var . '</li>';
        }
    }
    ?>
</ul> 
```

（其实没关系，用你觉得好看的就行）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:18:00.140

你可以试试：

```
<ul>
<?php foreach(array($var, $var2, $var3) as $value) : ?>
    <?php if (!empty($value)) : ?>
        <li><?php echo $value; ?></li>
    <?php endif; ?>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:18:19.687

使用数组和 foreach 打印变量。

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

或者你可以使用这个（我不推荐）：

```
if(isset($var)) {
    echo $var;
}
if(isset($var1)) {
    echo $var1;
}
if(isset($var2)) {
    echo $var2;
} 
```

在我看来，最好的是 var-args。

```
function funcName() {
    for ($i = 0;$i < func_num_args();$i++) {
        echo '<li>'.func_get_arg($i).'</li>';
}
echo funcName($var,$var1,$var2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:19:16.817

我想从标题中你的变量在一个数组中。

如果是这样，只需执行一个 foreach 循环

```
foreach($arrayVars as $var)
{
  if(isset($var))
  {
   echo '<li>'.$var.'</li>
  }
} 
```

无论如何，你应该清楚地解释你的问题是什么。我在这里做出假设是因为您对您的问题不是很明确。

# python - 比较两个 csv 文件并获得差异

> ID：11108667
> 
> 赞同：7
> 
> 时间：2012-06-19T20:14:19.817
> 
> 标签：python, csv

我有两个 csv 文件需要比较，然后吐出差异：

CSV 格式：

```
 Name   Produce   Number
 Adam   Apple     5
 Tom    Orange    4
 Adam   Orange    11 
```

我需要比较两个 csv 文件，然后告诉我工作表和工作表 2 上的亚当斯苹果之间是否存在差异，并对所有名称执行此操作并生成数字。两个 CSV 文件的格式相同。

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-23T12:48:00.677

我用过 csvdiff

```
$pip install csvdiff
$csvdiff --style=compact col1 a.csv b.csv 
```

[链接到 pypi 上的包](https://pypi.python.org/pypi/csvdiff)

[我发现这个链接很有用](https://media.readthedocs.org/pdf/csvdiff/latest/csvdiff.pdf)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T20:40:12.743

如果您的 CSV 文件不是那么大，如果您将它们加载到内存中，它们会使您的机器瘫痪，那么您可以尝试以下操作：

```
import csv
csv1 = list(csv.DictReader(open('file1.csv')))
csv2 = list(csv.DictReader(open('file2.csv')))
set1 = set(csv1)
set2 = set(csv2)
print set1 - set2 # in 1, not in 2
print set2 - set1 # in 2, not in 1
print set1 & set2 # in both 
```

对于大文件，您可以将它们加载到 SQLite3 数据库中并使用 SQL 查询来执行相同操作，或者按相关键排序，然后进行匹配合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:37:59.660

```
import csv

def load_csv_to_dict(fname, get_key, get_data):
    with open(fname, 'rb') as inf:
        incsv = csv.reader(inf)
        incsv.next()  # skip header
        return {get_key(row):get_data(row) for row in incsv}

def main():
    key = lambda r: tuple(r[0:2])
    data = lambda r: int(r[2])
    f1 = load_csv_to_dict('file1.csv', key, data)
    f2 = load_csv_to_dict('file2.csv', key, data)

    f1keys = set(f1.iterkeys())
    f2keys = set(f2.iterkeys())

    print("Keys in file1 but not file2:")
    print(", ".join(str(a)+":"+str(b) for a,b in (f1keys-f2keys)))

    print("Keys in file2 but not file1:")
    print(", ".join(str(a)+":"+str(b) for a,b in (f2keys-f1keys)))

    print("Differing values:")
    for k in (f1keys & f2keys):
        a,b = f1[k], f2[k]
        if a != b:
            print("{}:{} {} <> {}".format(k[0],k[1], a, b))

if __name__=="__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T20:21:14.647

比较两个不同文件的最佳实用程序之一是[`diff`](http://docs.python.org/library/difflib.html).

请参阅此处的 Python 实现：[Comparing two .txt files using difflib in Python](https://stackoverflow.com/questions/977491/comparing-2-txt-files-using-difflib-in-python)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T13:00:33.710

如果您想将 Python 的 csv 模块与函数生成器一起使用，您可以使用嵌套循环并比较大型 .csv 文件。下面的示例使用粗略的比较来比较每一行：

```
import csv

def csv_lazy_get(csvfile):
    with open(csvfile) as f:
        r = csv.reader(f)
        for row in r:
            yield row

def csv_cmp_lazy(csvfile1, csvfile2):
    gen_2 = csv_lazy_get(csvfile2)

    for row_1 in csv_lazy_get(csvfile1):
        row_2 = gen_2.next()

        print("row_1: ", row_1)
        print("row_2: ", row_2)

        if row_2 == row_1:
            print("row_1 is equal to row_2.")
        else:
            print("row_1 is not equal to row_2.")

    gen_2.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T20:26:04.283

这里是一个不使用的开始`difflib`。这实际上只是一个构建点，因为也许亚当和苹果在纸上出现了两次；你能确保不是这样吗？应该将苹果相加，还是这是一个错误？

```
import csv
fsock = open('sheet.csv','rU')
rdr = csv.reader(fsock)
sheet1 = {}
for row in rdr:
    name, produce, amount = row
    sheet1[(name, produce)] = int(amount) # always an integer?
fsock.close()
# repeat the above for the second sheet, then compare 
```

你明白吗？

# jquery - jQuery：如何在 jQuery 中编辑附加的输入值？

> ID：11108668
> 
> 赞同：0
> 
> 时间：2012-06-19T20:14:20.563
> 
> 标签：jquery, input, save, append, edit

我在左边有一些输入值（我们称之为输入面板）。单击添加按钮时，这些输入值将附加到右侧边栏的一个名为 bluebox 的 div 中

这是上面的一个jsfiddle：[jsfiddle](http://jsfiddle.net/s6Yxz/)

现在我希望用户能够单击其中一个 div 并编辑附加的输入值并保留更改。我更喜欢输入再次出现在输入面板中，而不是使用“保存/保持更改按钮”

我想了一些方法来做到这一点，但我是初学者，所以可能是非常错误的；）：

**示例 1**

*   使 bluebox div 类可单击，如下所示：`$(".bluebox").click(function(){}`

*   我应该将输入面板中的值附加到每个它自己的输入标签上，而不是使用 .html

您对我的目标有何建议？为什么我的例子会成功或失败？

非常感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:52:37.080

我建议您添加一个保存按钮、一个隐藏的 blueboxid div 来跟踪单击了哪个 bluebox，以及一个稍微模块化的设计，以便您可以更轻松地考虑更改（并使事情更容易阅读）。

我在这里为你准备了一个完整的 jsfiddle [http://jsfiddle.net/s6Yxz/26/](http://jsfiddle.net/s6Yxz/26/) :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:30:33.957

几个一般的想法 - 你可以像这样将数据添加到 bluebox div：

```
$('<div>').addClass('bluebox').data({ field1: field1.val(), /* field 2 etc.. */ }); 
```

然后检索如下值：

```
$('.bluebox').click(function() {
  field1.val( $(this).data('field1') );
  // field 2 etc..
}); 
```

或者，您可以在蓝盒中创建跨度结构：

```
bluebox = $('<div>').addClass('bluebox');
bluebox.append($('<span>').attr('data-name', 'field1').text(field1.val()));
// field 2 etc.. 
```

然后检索如下值：

```
$('.bluebox').click(function() {
  field1.val( $(this).find('span[data-name=field1]').text() );
  // field 2 etc..
}); 
```

随着这变得更加复杂，您可能希望在字段名称上使用循环，并针对不同类型的字段进行区分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T20:30:11.333

如果**添加**按钮没有将数据发布到服务器，您可以使用内联编辑器`.bluebox`，最后使用**保存**按钮可以将数据发布`#sidebar`到服务器。

# css - 导航栏在不同浏览器中呈现不同

> ID：11108672
> 
> 赞同：0
> 
> 时间：2012-06-19T20:14:46.257
> 
> 标签：css, html

我正在开发[一个新网站](http://www.miafurnishings.com)。

在不同的浏览器中测试页面，我发现导航栏的呈现方式因浏览器而异。在 Chrome 和 Safari 中它看起来是正确的，但在 Opera、IE 和 Firefox 中，导航栏的呈现方式不同。我已经验证了 HTML，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:19:48.500

看起来您在未浮动内容后遇到浮动问题 - 与我刚刚回答的问题非常相似：

[IE8 的 CSS 问题](https://stackoverflow.com/questions/11089945/css-issue-with-ie8/11090111#11090111)

让我知道复习这个问题是否能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:42:42.523

您的 UL 样式位于右上角。在 IE 中按 F12 并开始浏览代码的 +，您可以在 nav 角色下找到，UL 位于右侧。我将首先在 nav 角色和 ul 中开始编辑 CSS。

# windows-7 - 安装Shield-2008 + Windows 7

> ID：11108676
> 
> 赞同：1
> 
> 时间：2012-06-19T20:14:54.697
> 
> 标签：windows-7, installshield-2008

我们正在使用 Install Shield 2008（根据 Install Shield 标准，我知道它已经很老了）为我们的应用程序创建设置，并且到目前为止它一直运行良好。

最近我们遇到了一个问题，在执行重大升级时，它只会在 Windows 7 64 位机器上创建多个实例。它就像 Windows XP SP3 机器的魅力。

可能是什么原因？我检查了产品代码和升级代码，它似乎是正确的。

# javascript - 可以将 AngularJS 用于 Chrome 扩展的选项页面吗？

> ID：11108679
> 
> 赞同：5
> 
> 时间：2012-06-19T20:15:13.950
> 
> 标签：javascript, google-chrome, google-chrome-extension, angularjs

对于我的 Chrome 扩展的选项页面，我想使用 Angular.js（仅用于选项页面，而不是用于扩展的背景 JS 或内容脚本），但将其包含在我的页面中并执行以下操作：

```
<!doctype html>
<html ng-app>
<head>
  <title>Shortkeys Options</title>
  <script src="../js/jquery.min.js" type="text/javascript"></script>
  <script src="../js/angular.min.js" type="text/javascript"></script>
  <script src="../js/options.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../css/options.css" />
</head>

<body>
  <div ng-controller="OptionsCtrl">
    <div ng-repeat="key in keys"></table>
  </div>
</body>
</html> 
```

...在开发工具控制台中引发此错误并且没有运行：

```
Error: Code generation from strings disallowed for this context 
```

我认为这是因为 Angular 试图将标签写入页面或分配内联事件处理程序或运行内联 JS 的东西，这[在 Chrome 扩展中是不允许的](https://code.google.com/chrome/extensions/contentSecurityPolicy.html#H3-1)，那么有什么办法解决这个问题吗？例如，我可以告诉 Angular 以某种方式避免使用内联 JS 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-20T17:03:12.857

您可以`manifest_version: 2`通过在符合 CSP 的模式下指定该角度运行来使用。只需将`ng-csp`属性添加到`<html>`面板页面中。

所以你的 HTML 会是这样的：

```
<!doctype html>
<html ng-csp ng-app>
<head>
  <title>Shortkeys Options</title>
  <script src="../js/jquery.min.js" type="text/javascript"></script>
  <script src="../js/angular.min.js" type="text/javascript"></script>
  <script src="../js/options.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../css/options.css" />
</head>

<body>
  <div ng-controller="OptionsCtrl">
    <div ng-repeat="key in keys"></table>
  </div>
</body>
</html> 
```

# iphone - 广告和活动

> ID：11108687
> 
> 赞同：0
> 
> 时间：2012-06-19T20:15:52.390
> 
> 标签：iphone, objective-c, ios5, uiscrollview, uiimageview

所以我有一个`UIScrollView` 多重`UIImageViews` 我必须生成我自己的滚动视图类才能利用它`touchesEnded`

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
//    [super touchesEnded:touches withEvent:event];

    UITouch  *touch = [touches anyObject];
    CGPoint   point = [touch locationInView:self];

    if ((int)(point.x / 100) < [[self items] count] ) {
        NSLog(@" ENDED  D    File Selected is   %@     %d   " , [[self items]  objectAtIndex:(int)(point.x / 100) ]   ,  (int)(point.x / 100)   );
    }
//    [[self nextResponder] touchesEnded:touches withEvent:event];
} 
```

items 是`NSMutableArray` 我在其中存储每个子视图指向的文件的名称，所以基本上 `subview[0] === item[0]` 等等......

`subview[0]`是图像视图并且`item[0]`是该`fileName`图像的

我的问题是我现在如何“做广告”提醒原始呼叫者选择了文件 xyz ？相对于`NSLog`行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:50:49.923

“原始呼叫者”是什么意思？ `-touchesEnded:withEvent:`由框架事件处理子系统调用。

您可能会做的（但不要！见下文）是将您自己的一些委托方法添加到现有委托（显然已经有一个`UIScrollViewDelegate`协议和相应的`-[UIScrollView delegate]`属性）并调用您定义的委托方法来代替你的`NSLog()`. 我在[最近的回答](https://stackoverflow.com/questions/11091975/how-does-a-delegate-method-know-when-to-be-called/11092095#11092095)中讨论了这样做的禁忌。

**但是**，这一切都没有实际意义，因为您实际上是在倒退并为自己创造了许多不必要的工作。我将首先说某些类的子类化应该是您需要重新考虑您的设计的触发器。并且`UIScrollView`是这样的一类。

你已经承认你有一个`UIImageView`对象的集合。你应该让*他们*处理交互。一般的想法是：

1）向每个实例发送类似`[imageView setUserInteractionEnabled:YES];`. 这是使用交互式图像视图时最常被忽视的一个错误。

2) 为每个图像视图添加适当的具体`UIGestureRecognizer`实例并实现手势识别器回调。除非您绝对必须支持古老的 iOS 版本，否则您应该***始终***尝试使用手势识别器来代替显式触摸处理。

3) 在手势识别器回调中，添加您的逻辑代码，该代码根据发送手势识别器的`-view`. （例如，您可以检查相应的视图`-image`或`-frame`并使用该信息来确定触摸了哪个图像。）

由于手势识别器回调可能在您的视图控制器中，因此与您的其余代码“交谈”会容易得多。

# actionscript-3 - Flash Player 11.2 视频事件 addEventListener

> ID：11108691
> 
> 赞同：0
> 
> 时间：2012-06-19T20:16:08.897
> 
> 标签：actionscript-3, video, flash

有没有人能够让 addEventListener 与 Flash Player 11.2 一起使用？我总是收到这个错误：

> 场景 1，图层“动作”，第 1 帧，第 104 行 1119：通过静态类型 Class 的引用访问可能未定义的属性 COMPLETE。

如果我将我的 Flash 播放器切换到输出到这里是我的代码：

```
 import flash.events.Event;
 import fl.video.VideoEvent;
 import fl.video.*;

 myVideo.source ="videoName.flv";
 myVideo.play();
 myVideo.addEventListener(VideoEvent.COMPLETE, vidComplete)

 function vidComplete(event:VideoEvent) {
      trace("done");
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:22:46.797

出于某种原因，Flash CS6 中 Flash Player 11 的 AS3 编译器似乎忽略了 fl.video.* 的导入语句；

来源：[http ://forums.adobe.com/message/4699000](http://forums.adobe.com/message/4699000)

这个人的解决方案意味着在代码中指定整个类包内联应该可以缓解这个问题：

```
myVideo.source ="videoName.flv";
myVideo.play();
myVideo.addEventListener(fl.video.VideoEvent.COMPLETE, vidComplete)

function vidComplete(event:fl.video.VideoEvent) {
    trace("done");
} 
```

# c++ - 函数内用户提供的代码

> ID：11108695
> 
> 赞同：-3
> 
> 时间：2012-06-19T20:16:13.197
> 
> 标签：c++, c

假设我为 windows 和 mac 定义了相同的函数，但返回值不同，如下所示：

```
#ifdef _WIN32

// Windows code
int porting(int input){
  return input + 360;
}

#endif

#ifdef __APPLE__

// Mac code
int porting(int input){
  return input + 180;
}

#endif 
```

有没有办法让用户指定代码在里面运行`porting()`，而不是有多个定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:25:16.550

C++ 作为一种编译语言，没有[`eval()`](http://php.net/manual/en/function.eval.php)许多解释语言（如 PHP 或 Javascript）所具有的功能。无法在运行时执行用户提供的*文本*代码。

也许回调就足以满足您的需求？

例子：

```
typedef int (*userfunction)(int);

userfunction thefunction;

void set_user_function(userfunction uf)
{
    thefunction = uf;
}

int porting(int input)
{
    return thefunction(input);
} 
```

# c++ - 在这种情况下循环指针可以吗？

> ID：11108698
> 
> 赞同：0
> 
> 时间：2012-06-19T20:16:20.597
> 
> 标签：c++, pointers

我有A、B和C班。

A 有成员 B 和 C。

C 有 B 想要访问的数据。

我正在考虑做这样的事情，并想问这是否是好的设计。

```
class A{
B* m_b;
C* m_c;
};

class B{
A* m_a; // so that i can get access to C->m_data
};

class C{
vector<Obj*> m_data;
} 
```

您将如何设计 B 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:19:00.220

循环指针几乎总是一个坏主意。您可能不需要`C->m_data`从整个班级访问`B`；只需将它作为参数传递给`B`需要查看它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:19:12.467

您没有提供有关您实际想要实现的目标的足够信息，但您不需要`m_a`（匈牙利符号，等等）从`C`. 你可以直接在`C`里面有一个成员`B`。

*另外，访问数据*是什么意思？请注意`C`，无论是通过 getter 方法还是直接访问元素，都会破坏封装。

> C 有 B 想要访问的数据。

您确定`C`（或`A`）必须是 的成员`B`吗？似乎您可以将其作为参数传递。

# excel - 随机发生的值分布的可能性

> ID：11108702
> 
> 赞同：0
> 
> 时间：2012-06-19T20:16:29.827
> 
> 标签：excel, statistics

我有一个数据矩阵，描述了从一部电话到另一部电话的电话数量，所有电话都是单向的。行代表天，列代表小时。数据不是样本 - 它是全部人口。行是星期几，列是 24 小时制的一小时块。单元格中的值表示在特定时间从电话 A 到电话 B 的电话呼叫数。

我想有一个可重复的度量，使我能够告诉我的听众这种分布随机发生的可能性是 < *x*。

我想要 Excel 2007 的公式，或者，作为最后的手段，VBA 代码。

我已经搜索并找到了答案，这些答案告诉我如何从统计上确定两个不同数据集之间差异的显着性，而不是如何针对随机结果测量一个数据集。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:29:43.520

如果给定小时内的总呼叫次数为T，总呼叫人口为P；那么如果“随机”，从 A 到 B 的调用次数应该约为 T/P。要测试这是否真的如此，您将使用卡方检验。恐怕我没有时间给你完整的答案 - 但它是你检查的 testvalue=sum((observed_i/P - (T/P))^2/(T/P))针对卡方表的测试值，您也可以选择概率。Excel 可以计算这些值。有关详细信息，请参阅[卡方检验](http://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test)。

# r - 根据另一个矩阵对一个矩阵进行排序

> ID：11108713
> 
> 赞同：5
> 
> 时间：2012-06-19T20:17:04.320
> 
> 标签：r, matrix

我试图将一个矩阵的行与另一个具有相同维度的矩阵的行的顺序相同。但是，如果没有显式循环，我无法弄清楚如何做到这一点。看来我应该能够通过子集和应用或映射函数来做到这一点，但我不知道该怎么做。

这是一个玩具示例：

```
sortMe <- matrix(rnorm(6), ncol=2)
sortBy <- matrix(c(2,1,3, 1,3,2), ncol=2)

sorted <- sortMe 
for (i in 1:ncol(sortMe)) {
  sorted[,i] <- sortMe[,i][sortBy[,i]]
} 
```

使用此方法，生成的`sorted`矩阵包含按与矩阵`sortMe`相同的顺序排序的值`sortBy`。知道我如何在没有循环的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T20:26:00.637

这（使用两列整数矩阵来索引矩阵的二维）应该可以解决问题：

```
sorted <- sortMe
sorted[] <- sortMe[cbind(as.vector(sortBy), as.vector(col(sortBy)))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:22:24.333

使用`lapply`会起作用。

```
matrix(unlist(lapply(1:2, function(n) sortMe[,n][sortBy[,n]])), ncol=2) 
```

但可能有一种更有效的方法......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T01:21:09.033

我会建议你坚持你原来的版本。我认为您编写的原始循环比提供的其他解决方案更容易阅读和理解（也可能更容易编写）。

此外，该循环几乎与其他解决方案一样快：（在他将其从帖子中删除之前，我借用了 @Josh O'Brien 的计时代码。）

```
set.seed(444)
n = 1e7
sortMe <- matrix(rnorm(2 * n), ncol=2)
sortBy <- matrix(c(sample(n), sample(n)), ncol=2)

#---------------------------------------------------------------------------
# @JD Long, original post.
system.time({
    sorted_JD <- sortMe
    for (i in 1:ncol(sortMe)) {
        sorted_JD[, i] <- sortMe[, i][sortBy[, i]]
    } 
})
#   user  system elapsed 
#  1.190   0.165   1.334 

#---------------------------------------------------------------------------
# @Julius (post is now deleted).
system.time({
    sorted_Jul2 <- sortMe
    sorted_Jul2[] <- sortMe[as.vector(sortBy) + 
        rep(0:(ncol(sortMe) - 1) * nrow(sortMe), each = nrow(sortMe))]
})
#   user  system elapsed 
#  1.023   0.218   1.226 

#---------------------------------------------------------------------------
# @Josh O'Brien
system.time({
    sorted_Jos <- sortMe
    sorted_Jos[] <- sortMe[cbind(as.vector(sortBy), as.vector(col(sortBy)))]
})
#   user  system elapsed 
#  1.070   0.217   1.274 

#---------------------------------------------------------------------------
# @Justin
system.time({
    sorted_Just = matrix(unlist(lapply(1:2,
        function(n) sortMe[,n][sortBy[,n]])), ncol=2)
})
#   user  system elapsed 
#  0.989   0.199   1.162 

all.equal(sorted_JD, sorted_Jul2)
# [1] TRUE
all.equal(sorted_JD, sorted_Jos)
# [1] TRUE
all.equal(sorted_JD, sorted_Just)
# [1] TRUE 
```

# javascript - Sitecore Javascript 压缩/缩小和 LESS 编译

> ID：11108716
> 
> 赞同：1
> 
> 时间：2012-06-19T20:17:20.263
> 
> 标签：javascript, sitecore, sitecore6, assets, dotless

目前，我一直在尝试将 Cassette 放入我们的 Sitecore 项目中，但它只是失败了。我已经在项目中使用了 dotLess，但想要一个更可靠的解决方案，用于捆绑时的缓存清除。

我可以在普通的 .Net4 项目中使用 Cassette，但无法在我们的 Sitecore 项目中使用它。(Ed) 我们无法让它实际构建任何类型的捆绑包（选中`/_cassette`），并且它没有向页面输出任何内容。对我们来说，该项目不是构建的，而是使用 CodeFile 的，我不确定这是否是问题的一部分。一般来说，`No bundle with path 'xxx'`无论我们尝试什么，我们都会不断收到异常。这是一个遗憾，因为我真的不介意将 CoffeeScript 融入解决方案。

**是否有压缩/缩小 javascript 并可以使用 Sitecore 呈现 dotLess 文件的解决方案？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T15:35:48.567

在任何 Sitecore 客户端界面中工作时来自 Cassette 的空响应流是由`rewriteHtml`它实现的功能引起的。

默认情况下，Cassette 将缓冲和重写页面 HTML 输出。这允许部分视图在标签被渲染`<link>`后插入引用样式表的标签。`<head>`重写功能作为`PostRequestHandlerExecute`事件处理程序被调用。

您看到的空响应流是由于已重写的输出流没有被刷新。解决此问题的方法是在类上调用 Close 时刷新输出流`Cassette.AspNet.PlaceholderReplacingResponseFilter`，如下所示：

```
 void WriteUncompressedOutput()
    {
        var output = GetOutputWithPlaceholdersReplaced(bufferStream);
        var outputBytes = outputEncoding.GetBytes(output);
        if (outputBytes.Length > 0)
        {
            outputStream.Write(outputBytes, 0, outputBytes.Length);
            outputStream.Flush();
        }
    } 
```

如果您不需要重写功能，现在可以使用解决方法。只需禁用 Cassette HTML 重写功能，无论是在`web.config`：

```
<configuration>
    <configSections>
        ....
        <section name="cassette" type="Cassette.CassetteConfigurationSection, Cassette"/>
    </configSections>
    <cassette rewriteHtml="false"/> 
```

或在代码中：

```
public class CassetteSettingsConfiguration : IConfiguration<CassetteSettings>
{
    public void Configure(CassetteSettings configurable)
    {
        configurable.IsHtmlRewritingEnabled = false;
    }
} 
```

[此信息包含在我关于将 Cassette 与 Sitecore 结合使用](http://kevinobee.wordpress.com/2013/04/13/cassette-bundling-with-sitecore-mvc/)的博客文章中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:38:42.487

We ended up getting `SquishIt` to work rather easily and without much hassle besides getting the JavaScript files to play nicely together.

# vba - 在 excel 中的列中搜索特定字符串，其中每个单元格中的字符串是随机的

> ID：11108719
> 
> 赞同：3
> 
> 时间：2012-06-19T20:17:35.613
> 
> 标签：vba, excel

我正在使用 1000 行和 15 列的数据表在 excel 中工作。目前，在其中一列中，我有很多数据与人名混合在一起（参见下面的示例）。我想看看每个人的名字在数据表中出现了多少次，所以我可以在数据透视表中使用它。名称出现的方式没有特定的格式或顺序。这是随机的。有没有办法在 excel 中编写代码来搜索整个列并计算每个人的名字出现的次数？

```
Column D
21421Adam14234
2323xxx Bob 66
23 asjdxx Jacob 665
43 Tim 5935539
2394Bob 88 
```

经过反复试验，我可以生成一个名称列表，每行一个，并将它们放在不同的列中以进行比较，如果这样更容易的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T03:32:35.420

我知道你有你的答案，但为什么不使用`COUNTIF`通配符？你不需要 VBA :)

看这个例子

```
=COUNTIF($A$1:$A$5,"*"&C1&"*") 
```

**快照**

![在此处输入图像描述](../Images/a0af30b1933a7f9fd859409753078874.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:30:47.357

你没有标记 VBA，但我不知道没有它是否有办法做到这一点。我在下面构建了一个自定义函数。要实施它，请执行以下步骤。

1) 从 E1 列开始列出所需的名称。

2) 将此函数插入​​ VBA 编辑器 A) 按 Alt + F11 B) 从菜单栏中单击插入 > 模块 C) 将此代码复制到模块中

```
Option Explicit

Function findString(rngString As Range, rngSearch As Range) As Long

Dim cel As Range
Dim i As Integer

i = 0

For Each cel In rngSearch
    If InStr(1, cel.Text, rngString.Value) > 0 Then 
        cel.offset(,-1) = rngString.Value 'places the name in cell to right of search range
        i = i + 1
    End If
Next

findString = i

End Function 
```

3) 在 F1 中输入以下公式

```
=findstring(E1,$D$1:$D$5) 
```

4) 沿 F 列运行公式以获取每个所需名称的计数。

# ember.js - Ember.Select 什么是正确的 OptionValuePath 和 OptionLabelPath？

> ID：11108722
> 
> 赞同：1
> 
> 时间：2012-06-19T20:17:41.870
> 
> 标签：ember.js

例如这里 [http://jsfiddle.net/tobikko/ysFC6/10/](http://jsfiddle.net/tobikko/ysFC6/10/)

我如何真正找出 OptionValuePath 和 OptionLabelPath 的内容？如您所见，下拉列表中有一个列表，但值不可见。

在这种情况下，我知道它应该是 OptionLabelPath: "content.firstName" 但如果我不知道怎么办？

我创建了 focusOut 函数来检查视图的内容，它看起来像这样 [![内容](../Images/a10bfa499f8cdeb12c49e8dc877e1fe8.png)](https://i.stack.imgur.com/7wql5.png)

在我遇到问题的真实应用程序中，内容中的每个对象都不包含**ember1340135889380_meta 对象或 __proto**部分。那是问题吗？我如何解决它？

```
<script type="text/x-handlebars">
  {{view App.SelectView }}

  <p>Selected: {{App.selectedPersonController.person.fullName}}
    (ID: {{App.selectedPersonController.person.id}})</p>
</script> 
```

```
window.App = Ember.Application.create();

App.SelectView = Ember.Select.extend({
    contentBinding: "App.peopleController",
    selectionBinding: "App.selectedPersonController.person",
    optionLabelPath: "firstName",
    optionValuePath: "id",
    prompt: "select",

  focusOut: function () {
        var test = this.get('content');
   }  
})

App.Person = Ember.Object.extend({
    id: null,
    firstName: null,
    lastName: null,

    fullName: function() {
        return this.get('firstName') + " " + this.get('lastName');
    }.property('firstName', 'lastName').cacheable()
});

App.selectedPersonController = Ember.Object.create({
    person: null
});

App.peopleController = Ember.ArrayController.create({
    content: [
        {
        id: 1,
        firstName: 'Yehuda',
        lastName: 'Katz'},
    {
        id: 2,
        firstName: 'Tom',
        lastName: 'Dale'},
    {
        id: 3,
        firstName: 'Peter',
        lastName: 'Wagenet'},
    {
        id: 4,
        firstName: 'Erik',
        lastName: 'Bryn'}
    ]
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T21:24:22.193

如[文档](https://github.com/emberjs/ember.js/blob/fe22710101954fb1b9b8af2df4dc294f125f59b7/packages/ember-handlebars/lib/controls/select.js#L33-51)中所述，您始终必须`content.`将用作`id`and的属性的路径放在前面`label`，请参阅[http://jsfiddle.net/pangratz666/B2rJN/](http://jsfiddle.net/pangratz666/B2rJN/)。

您提到`ember1340135889380_meta`的对象上的类似属性表明它是`Ember.Object`. 但是`Ember.Select`'s中的条目`content`不需要是 an 的实例`Ember.Object`，该路径也适用于“普通”对象，正如您在示例中使用的那样。

* * *

***背景***：

`Ember.View`基本上呈现如下：

```
<select>
  {{#if view.prompt}}
    <option value>{{view.prompt}}</option>
  {{/if}}
  {{#each view.content}}
    {{view Ember.SelectOption contentBinding="this"}}
  {{/each}}
</select> 
```

因此，在每次迭代中，当前项目也可用于`Ember.SelectOption`视图`content`。这就是为什么`content.`在指定`id`/`label`属性的路径时必须预先添加的原因。说得通？

# sql - 将国家名称排序为最后一个选项

> ID：11108727
> 
> 赞同：0
> 
> 时间：2012-06-19T20:17:53.600
> 
> 标签：sql, sorting

我有结果集对象，它包含一些国家名称。例如

rs={India, Japan, USA, Options, Quatar..etc}

现在我想在排序后显示选项应该排在最后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:23:54.457

假设您想要对所有国家/地区名称进行排序，但`Options`在最后，您可以添加一个`ORDER BY`专门针对 的子句`Options`，即

```
SELECT CountryName
FROM myTable
ORDER BY
    CASE WHEN CountryName = 'Options' THEN 1 ELSE 0 END,
    CountryName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:26:32.990

```
ORDER BY IF(`rs` = 'Options', 1, 0), `rs` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:29:44.567

如果您打算重用相同的排序顺序，另一个选项是创建一个包含两列的表：varchar country 和 int order。然后将您的结果与该表连接并按顺序排列。

# ruby-on-rails - NameError 未初始化常量

> ID：11108728
> 
> 赞同：0
> 
> 时间：2012-06-19T20:17:54.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, associations, simple-form

在尝试呈现我得到的表单时：

```
NameError in Deals#new

Showing /Users/nelsonkeating/Desktop/ReminDeal1/app/views/deals/_form.html.erb where line #8 raised:

uninitialized constant Deal::Interests
Extracted source (around line #8):

5:  <li><%= f.input :name %></li>
6:  <li><%= f.input :copy %></li>
7:  <li><%= f.association :city %></li>
8:   <li><%= f.association :interests, :label => false, :as => :check_boxes %></li>
9:  </ul>
10: 
11:   <div class="form-actions"> 
```

该应用程序的相关部分附在下面：

楷模：

```
class Deal < ActiveRecord::Base
   attr_accessible :title, :body
   belongs_to :interests
   belongs_to :city
end

class Interest < ActiveRecord::Base
  attr_accessible :name
  has_many :person_interests
  has_many :deals
end 
```

控制器：

```
deals_controller.rb
  def new
    @deal = Deal.new
end 
```

看法：

```
<%= simple_form_for(@deal) do |f| %>
  <%= f.error_notification %>
<ul class="testss1">

    <li><%= f.input :name %></li>
    <li><%= f.input :copy %></li>
    <li><%= f.association :city %></li>
    <li><%= f.association :interests, :label => false, :as => :check_boxes %></li>
 </ul>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:20:00.390

应该是`belongs_to :interest`。

如果您需要多种兴趣，您可能需要一个`has_many:through`.

# unit-testing - 我应该在一个类中添加特性只是为了使其可测试吗？

> ID：11108733
> 
> 赞同：0
> 
> 时间：2012-06-19T20:18:08.923
> 
> 标签：unit-testing, testing, automated-tests

我仍在尝试掌握单元测试的窍门，我有一个简单的问题。今天我想为一个非常简单的函数写一个测试。这个函数就是这样做的：

```
void OnSomething()
{
   increment++;

   if (increment == 20)
     SaveIt();
} 
```

我说，这个功能是可以测试的。我可以编写一个调用它 20 次的测试，然后验证 SaveIt 是否已被调用。

然后我的疑惑就出现了。如何测试 SaveIt 是否已被调用？我的第一个答案是添加一个布尔值，但后来我想：添加类功能只是为了使其可测试是否正确？

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:53:22.180

我建议让 SaveIt 返回一个成功或失败的结果，这只是让整体测试更容易。你可以做一些简单的事情，比如让它返回一个布尔值，或者如果你需要报告它是通过还是失败，你可以创建一个包含设置消息能力的通用结果类。

一个简单的例子

```
public class Result
{
   public bool IsSuccess;
   public List<string> Messages;
} 
```

在单元测试中，您尝试仅测试 OnSomething 行为——不应测试“SaveIt”内部发生的情况。因此，理想情况下，您希望 SaveIt() 出现在另一个类中，以便您可以模拟它的响应。

我为此目的使用最小起订量。起订量是免费的，您可以在这里获取：[http ://code.google.com/p/moq/](http://code.google.com/p/moq/)

我的方法会变成

```
Result OnSomething()
{
    Result result=null;
    increment++;
    if(increment == 20)
    {
         result = saver.SaveIt();
    }
    return result;
} 
```

您的类构造函数将采用一个实现 ISaver 接口的对象（定义 SaveIt() 方法）（理想情况下由 DI 框架注入，但如果必须，您可以手动生成它）。

现在在您的单元测试中，您将创建一个模拟版本的 ISaver 并告诉它在调用时返回什么：

```
 Mock<ISaver> mock = new Mock<ISaver>();
 mock.Setup(x=> x.SaveIt()).Returns(new Result{IsSuccess=true}); 
```

您将在构造函数 ISaver 参数中实例化传递 mock.Object 的类。

前任。

```
 MyClass myClass = new MyClass(mock.Object);  
 //(assuming it didn't have other parameters) 
```

然后，您可以断言结果是否为空——如果它从未被调用，它将为空，因为您在上面所做的设置永远不会触发。

```
 (in nunit)
 Result result = myClass.OnSomething();
 Assert.IsNotNull(result); 
```

如果您真的不希望 OnSomething() 返回结果，或者因为它是一个事件而不能返回结果，那么我会让 OnSomething() 调用一个方法来为您完成工作：

```
 void OnSomething()
 {
      Result result = DoTheWork();
 }

 Result DoTheWork()
 {
    Result result=null;
    increment++;
    if(increment == 20)
    {
         result = saver.SaveIt();
    }
    return result;
 } 
```

然后在 DoTheWork() 而不是 OnSomething() 上运行单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:24:20.177

当然不！生产代码根本不应该依赖于测试，但测试应该验证实际代码的正确行为。这可以通过多种方法来实现，例如[IOC](http://en.wikipedia.org/wiki/Inversion_of_control)和使用[mocks](http://en.wikipedia.org/wiki/Mock_object)。你可以看看一些现有的框架，它们可以大大简化你的生活：

*   [http://code.google.com/p/mockito/](http://code.google.com/p/mockito/)
*   [http://code.google.com/p/jmockit/](http://code.google.com/p/jmockit/)
*   [http://www.easymock.org/](http://www.easymock.org/)

# linux - 在 Linux 中重命名多个文件 shell

> ID：11108735
> 
> 赞同：-3
> 
> 时间：2012-06-19T20:18:19.547
> 
> 标签：linux, file, bash

我有许多文件，例如 file_022.bmp、file_023.bmp...file_0680.bmp。我需要将它们重命名为更方便的名称，例如 file_1.bmp、file_2.bmp...file_658.bmp。

是否有我可以编写的 bash 脚本来为我执行此操作？感谢您的帮助和建议。

卢克 H

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:20:19.297

如果您使用的是基于 debian 的 linux 系统，那么您可以使用接受[正则表达式](http://www.cs.tut.fi/~jkorpela/perl/regexp.html)的重命名脚本来重命名文件。更多[信息](http://www.debian-administration.org/articles/150)，因为我发现很难找到手册页。

例如

```
harald@Midians_Gate:~$ ls p*.php

parse.php  pd.php  pgrep.php  preg_based.php  proc.php 
```

假设我想将扩展名更改为 .perl 并在名称前加上 file_ 然后我使用命令：

```
rename -n 's/([a-z]*)\.php/file_$1.perl/' p*.php 
```

会给

```
parse.php renamed as file_parse.perl
pd.php renamed as file_pd.perl
pgrep.php renamed as file_pgrep.perl
preg_based.php renamed as preg_file_based.perl
proc.php renamed as file_proc.perl 
```

我选择并捕获基本文件名`([a-z]*)`，然后在替换中使用它，并使用常规字符串`$1`附加`.perl`和前置 $1`file_`

-n 选项使其在不更改任何内容的情况下测试运行

正如您从这个示例中看到的那样，您需要正确考虑选择正则表达式，或者您会遇到类似上述 preg_based.php 的情况，您希望在其中使用 file_preg_based.perl :) 来补偿我需要在`([a-z_]*)`这里使用的情况

这是我一直坚持使用 debian 的众多原因之一，不过我很想找到其他非 debian 系统的等价物：-/

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T21:35:16.287

如果您有文件 a.bmp、b.bmp、c.bmp 并且您希望以 file_1.bmp、file_2.bmp、file_3.bmp 结尾

使用 bash：

```
mkdir result
index=1
for i in *.bmp
do
  mv "$i" "result/file_"$((index++)).bmp
done 
```

注意：建议使用子目录以避免意外覆盖看起来像 file_xx.bmp 的文件

如果扩展后有太多文件无法放入命令行，则可以使用以下内容：

```
mkdir result
index=1
find . -name "*.bmp" | while read i
do
  echo mv "$i" "result/file_"$((index++)).bmp
done 
```

检查输出后删除“回声”

# dojo - 当事件发生并且它不是活动选项卡时，如何使 dojo dijit 选项卡闪烁或闪烁？

> ID：11108738
> 
> 赞同：1
> 
> 时间：2012-06-19T20:18:20.433
> 
> 标签：dojo, tabcontainer

我有一个 dojo dijit 选项卡容器，我希望选项卡在发生事件并且它不是选定的选项卡时闪烁几次。例如，当我收到一条聊天消息时，我希望“聊天标签”闪烁几次，作为已收到聊天的视觉通知。我很难找到要修改的正确控件（选项卡）。这是代码：

的HTML：

```
<div data-dojo-type="dijit.layout.TabContainer" data-dojo-props="region:'center',splitter: true">
<div id="tabChat" title="Chat" data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="iconClass:'i-chat', design: 'sidebar'">
    <div id="pnlChatLog" style="background-color:#FFF; padding:0px;" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'center', splitter:true">
        <div id="divChatLog" style="width:100%; height:100%; overflow-y:scroll; overflow-x:hidden;">
        </div>
    </div>
    <div id="pnlChatMessage" style="background-color:#FFF; padding:0px; overflow:hidden;" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'bottom', splitter:false">
        <input id="txtChatMessage" style="width:100%; margin:0px; border:0px;" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="intermediateChanges:false,placeholder:'Enter Message'" />
    </div>
</div>
<div id="tabQuestions" title="Questions" data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="iconClass:'i-help', design: 'sidebar'">
    <div data-dojo-type="dijit.layout.BorderContainer" data-dojo-props="region:'center', splitter:false, gutters:false">
        <div style="background-color:#FFF; padding:0px; border-top:0px;" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'center', splitter:true">
            <div id="gridQuestions"></div>
        </div>
    </div>
</div> 
```

javaScript：

```
//Chat message Event
chat.on("message", function(e) {
    //Message code is here...

    //TODO: Make the tab flash if it is not the current tab
}); 
```

**注意：**消息代码（此处未显示）有效。我只需要知道什么 javaScript 将替换 TODO 部分，因此此时选项卡会闪烁/闪烁几秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:29:03.570

要访问选项卡按钮，您必须使用选项卡元素的“controlButton”，然后修改 domNode。这是一个例子：

```
//A method for the blinking using setInterval. The top line shows
//how to  get the actual tab that you want to modify. Then add and remove the
//Hover classes for a nice flashing/blinking effect.
function blinkTab(tabId, count, interval) {

    var tabbutton = dijit.byId(tabId).controlButton.domNode;

    var interval = setInterval(function(){            
        if(count % 2 == 0) {
            tabbutton .className += " dijitTabHover";
            tabbutton .className += " dijitHover";
        }
        else {
            //Not sure this is the best way to remove a class but I couldn't find
            //a "clean" way to do it with dojo.
            tabbutton .className = tabbutton .className.replace( /(?:^|\s)dijitTabHover(?!\S)/ , '');
            tabbutton .className = tabbutton .className.replace( /(?:^|\s)dijitHover(?!\S)/ , '');
        }

        if(count == 0) {
            tabbutton .className = tabbutton .className.replace( /(?:^|\s)dijitTabHover(?!\S)/ , '');
            tabbutton .className = tabbutton .className.replace( /(?:^|\s)dijitHover(?!\S)/ , '');
            clearInterval(interval);
        }
        count--;
    }, interval);
}

//Now make the calls where desired

//Chat message Event
chat.on("message", function(e) {
    //Message code is here...

    blinkTab("tabChat", 10, 500);
});

//Question Event
questions.on("message", function(e) {
    //Question code is here...

    blinkTab("tabQuestions", 10, 500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:15:48.663

您可能只想更改选项卡标题跨度的“类”（或者它是一个 div？不记得了）。最简单的方法是使用 firebug，检查用于标签标题的元素，在节点层次结构中识别它，然后在标签上放置一个 id，例如 tabMsg 或其他东西，然后您只需使用 dijit.byId 即可获得正确的标签，然后到标题节点每隔几秒或0.5秒addClass/removeClass使其“闪烁”。

您可能希望在选项卡中添加“闪烁”属性，以便在此为 true 时切换类，并在单击选项卡时将其设置为 false 并禁用闪烁。

# sql - 在辅助 group by 子句中包含所有值

> ID：11108739
> 
> 赞同：0
> 
> 时间：2012-06-19T20:18:24.647
> 
> 标签：sql, oracle10g, group-by

我正在尝试编写一条 SQL 语句来获取父级中所有子级的值的总和：

```
SELECT parent, child, sum(val)
FROM table_a
GROUP BY parent, child
ORDER BY parent, child 
```

这给了我：

```
Parent1  Child1  123 
Parent1  Child2  456
Parent2  Child1  789
Parent3  Child1   12
Parent3  Child2  345 
```

我想要的是获取所有孩子，而不仅仅是每个父母的父母下方的孩子，如果它没有记录，则为其分配值 0。例如：

```
Parent1  Child1  123 
Parent1  Child2  456
Parent2  Child1  789
Parent2  Child2    0
Parent3  Child1   12
Parent3  Child2  345 
```

我可以用 GROUP BY 子句做到这一点吗？还是我需要使用子查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:05:06.733

您将不得不交叉连接 table_a 本身，然后跨合成行进行分组。我不确定Oracle的语法，否则我会写一些实际的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:06:54.300

您可以使用内联视图蛮力解决问题，但这可能效率低下

```
SQL> ed
Wrote file afiedt.buf

  1  with t as (
  2    select 1 parent, 1 child, 123 val from dual union all
  3    select 1, 2, 456 from dual union all
  4    select 2, 1, 789 from dual union all
  5    select 3, 1, 12 from dual union all
  6    select 3, 2, 345 from dual
  7  )
  8  select p.parent, c.child, nvl(sum(val),0)
  9    from (select distinct parent from t) p
 10         cross join (select distinct child from t) c
 11         full outer join t on (t.parent = p.parent and t.child = c.child)
 12*  group by p.parent, c.child
SQL> /

    PARENT      CHILD NVL(SUM(VAL),0)
---------- ---------- ---------------
         2          1             789
         1          2             456
         3          1              12
         1          1             123
         2          2               0
         3          2             345

6 rows selected. 
```

# vim - 试图改变光标，对终结者不起作用

> ID：11108740
> 
> 赞同：3
> 
> 时间：2012-06-19T20:18:25.130
> 
> 标签：vim, terminal

这段 .vimrc 用于更改光标形状。它可以在 xterm 中显示下划线光标，但在终止符中不显示...知道吗？我尝试通过终止符更改 xterm 但它不起作用..

```
if &term =~ '^xterm'
  " solid underscore
  let &t_SI .= "\<Esc>[4 q"
  " solid block
  let &t_EI .= "\<Esc>[2 q"
  " 1 or 0 -> blinking block
  " 3 -> blinking underscore
endif 
```

哈维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:03:01.730

`CSI 4 SP q`是 xterm 识别的用于更改光标形状的特定序列。如果它不适用于您的终端，则很可能您的终端根本无法识别它。

# reporting-services - SSRS XML 数据源如何查询具有多个父子层次结构的 XML

> ID：11108741
> 
> 赞同：3
> 
> 时间：2012-06-19T20:18:25.677
> 
> 标签：reporting-services, xmldatasource

如何在 SSRS 中查询 XML 数据源，以便返回两个父子层次结构？例如

```
<parent>
    <child1>
        <child2>
            <child3>
                <a1>1</a1>
                <b1>2</b1>
            </child3>
            <child4>
                <c1>1</c1>
                <d1>2</d1>
            </child4>
        </child2>
    </child1>
</parent> 
```

如何查询此 XML 以获得 a1,b1,c1,d1 作为结果集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-19T12:30:04.687

下面的示例应该为您提供您正在寻找的结果：

```
<Query>
<ElementPath IgnoreNamespaces="True">
parent{}/child1{}/child2{child3 {a1,b1}, child4{c1,d1}}
</ElementPath>
</Query> 
```

# html - jQuery 工具和另一个 jQuery 脚本之间的冲突

> ID：11108742
> 
> 赞同：1
> 
> 时间：2012-06-19T20:18:25.993
> 
> 标签：html, conflict, jquery

我在我网站的一页上使用[jQuery 工具](http://jquerytools.org/)（特别是表单验证器）和一个[与 Facebook 相关的 JQuery 脚本。](http://archives-mike.brevoort.com/2010/08/10/introducing-the-jquery-facebook-multi-friend-selector-plugin/index.html)

每个脚本都需要在我的 HTML 的“head”中引用一个外部文件，以及在我的 HTML 的“body”中引用一个单独的脚本。

这是我的 HTML（简化）“正文”中的脚本代码：

**第一个脚本（Facebook 脚本）** `

```
 function init() {
                  FB.api('/me', function(response) {
                    $(".s_name").replaceWith('<input type="hidden" name="s_name" id="' + response.name + '" value="' + response.name + '" />');
                    ..do more replaceWith stuff
                  });
                }
                //Live update of page as user selects recipient and gift options
                $(".jfmfs-friend").live("click", function() {
                  var friendSelector = $("#jfmfs-container").data('jfmfs');             
                  ...do stuff});  
              ` 
```

**第二个脚本（jQuery 工具 - 验证器）** `

```
 $("#form").validator({
              position: 'top left',
              offset: [-5, 0],
              message: '<div><em/></div>',
              singleError: true
            });
          ` 
```

一切正常，直到第一个脚本的 .click 功能被激活。此时，验证器脚本停止工作。我相信这个问题与 jQuery $ 冲突有关，但我不知道如何解决它。我已经尝试`jQuery.noConflict()`在各个领域使用，但我没有成功，我不确定我应该如何使用它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:32:55.653

尝试使用`'jQuery'`代替所有`'$'`这样的：

`jQuery(document).ready(function() {});`作为反对`$(document).ready`...

在利益“冲突”的情况下，我被迫使用长版本。

# c++ - 为什么 C++ 要求仅针对 float、double 或 long double 实例化该复数？

> ID：11108743
> 
> 赞同：41
> 
> 时间：2012-06-19T20:18:30.627
> 
> 标签：c++, math, language-design, complex-numbers

根据 C++ ISO 规范，§26.2/2：

> 为除或`complex`以外的任何类型`float`实例化模板的效果是未指定的。`double``long double`

为什么标准作者会明确添加此限制？这使得它变得不确定，例如，如果你做出`complex<int>`或 a`complex<MyCustomFixedPointType>`和看起来像是一个人为的限制会发生什么。

这种限制有原因吗？`complex`如果您想使用自己的自定义类型进行实例化，是否有解决方法？

我主要是因为[这个早先](https://stackoverflow.com/q/11108587/501557)的问题而问这个问题，其中 OP 对为什么`abs`给出奇怪的输出感到困惑`complex<int>`。也就是说，这仍然不太有意义，因为我们可能还想用`complex`定点类型、更高精度的实数等来制作数字。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-19T20:27:32.693

您无法正确实现`std::complex`对整数的许多操作。例如，

```
template <class T>
T abs(const complex<T> &z); 
```

当复数表示为 (real,imag) 对时，for a`complex<long>`不能有返回值，因为它返回 的值。只有少数操作是有意义的。`T = long``sqrt(pow(z.real(), 2) + pow(z.imag(), 2))`

更糟糕的是，[`polar`](http://en.cppreference.com/w/cpp/numeric/complex/polar)如果不破坏默认构造函数，就无法使命名构造函数变得可靠，反之亦然。该标准必须指定“复整数”是[高斯整数](https://en.wikipedia.org/wiki/Gaussian_integer)才能使它们有任何用途，并且其中一个构造函数被严重破坏。

最后，你希望你的“复整数除法”如何服务，你想要一个“复余数”吗？:)

总而言之，我认为指定一个`gaussian_int<T>`仅包含几个操作的单独类型比对集成`T`到的移植支持更明智`std::complex`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-19T20:27:10.150

可能是为了与辅助函数兼容。例如：

```
template<class T> T abs (const complex<T>& x); 
```

如果`T == int`,`abs`将返回`int`，这将意味着精度的巨大损失。

# javascript - 如何为 Greasemonkey 脚本创建切换按钮？

> ID：11108745
> 
> 赞同：1
> 
> 时间：2012-06-19T20:18:33.730
> 
> 标签：javascript, button, greasemonkey

所以我试图弄清楚如何为运行和导航到各个页面的greasemonkey扩展制作一个切换按钮。

所以这就是我到目前为止

```
var keepgoing = true 
```

*if 语句的开头和这里的东西*

```
else if keepgoing == true
  { newsearch(); } 
```

按钮点击：

```
 if keepgoing == true { keepgoing = false }
 else if keepgoing == false { keepgoing = true } 
```

所以基本上我需要帮助在网页上放一个按钮。并且它需要在浏览页面时记住 var。

谢谢，雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:18:45.907

如果你想要一个持久按钮（或任何数据），你需要使用某种存储。如果涉及多个域，请使用[GM_setValue()](http://wiki.greasespot.net/GM_setValue)。如果一切都在同一个域上，请使用[localStorage](https://developer.mozilla.org/en/dom/storage#localStorage)。

我自己添加了这种持久性按钮，这是一个精简的脚本，显示了我使用的内容。它不只是添加一个按钮，它使按钮 UI 更加用户友好，IMO。

**笔记：**

1.  按钮状态在页面加载和站点之间保持不变。
2.  按钮停留在左上角（由 CSS 设置）并且在没有鼠标悬停时淡化到接近不透明。
3.  我使用一个对象，因为有时我有多个添加到页面的控件。
4.  您可以[**在 jsFiddle 看到按钮如何显示和行为的演示**](http://jsfiddle.net/YGuLN/)。（除非值不能在演示中的页面加载中持续存在。它们在 GM 脚本中存在。）

```
// ==UserScript==
// @name     _Keep going button
// @include  http://YOUR_SERVER_1.COM/YOUR_PATH/*
// @include  http://YOUR_SERVER_2.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

//--- Add the button.
$("body").append (
      '<div class="gmPersistentButton">'
    + '<button id="gmContinueBtn">Init failed!</button></div>'
);

//--- Define and init the matching control object:
var btnControl  = new PersistentButton (
    "gmContinueBtn",        //-- HTML id
    "StopContinueBtn",      //-- Storage label
    ["Stop", "Continue"],   //-- Text that the button cycles through
    [false, true]           //-- Matching values for the button's states
);

//--- Activate the button click-handler.
$("#gmContinueBtn").click ( function () {
    var btnValue    = this.value;
    keepgoing       = btnValue
    btnControl.SetNextValue ();

    if (keepgoing == "true") {
        // CALL YOUR FUNCTION HERE.
    }
} );

//--- The button will fade when we aren't using it.
var zDisplayPanel   = $('div.gmPersistentButton');
zDisplayPanel.hover (
    function () { $(this).stop (true, false).fadeTo (50,  1  ); },
    function () { $(this).stop (true, false).fadeTo (900, 0.1); }
);
zDisplayPanel.fadeTo (2900, 0.1);

//--- CSS styles to make it work and to improve appearance.
GM_addStyle ( (<><![CDATA[
    .gmPersistentButton {
        background:         orange;
        color:              black;
        position:           fixed;
        top:                1em;
        right:              1em;
        z-index:            6666;
        padding:            1em;
        border:             3px double gray;
        border-radius:      1ex;
        opacity:            0.8;
    }
    .gmPersistentButton button {
        cursor:             pointer;
    }
    .gmPersistentButton button:hover {
        color:              red;
    }
]]></>).toString () );

//--- Button object
function PersistentButton (htmlID, setValName, textArry, valueArry) {
    //--- Initialize the button to last stored value or default.
    var buttonValue     = valueArry[0];
    fetchValue ();
    storeValue ();      //-- Store, in case it wasn't already.
    setButtonTextAndVal ();

    //--- DONE with init.  Set click and keyboard listeners externally.

    //***** Public functions:
    this.Reset          = function () {
        buttonValue     = valueArry[0];
        storeValue ();    
        setButtonTextAndVal ();
    };

    this.SetNextValue   = function () {
        var numValues   = valueArry.length;
        var valIndex    = 0;

        for (var J = numValues - 1;  J >= 0;  --J) {
            if (buttonValue == valueArry[J]) {
                valIndex    = J;
                break;
            }
        }
        valIndex++;
        if (valIndex >= numValues)
            valIndex    = 0;

        buttonValue     = valueArry[valIndex];

        storeValue ();    
        setButtonTextAndVal ();
    };

    //***** Private functions:
    function fetchValue () {
        buttonValue     = GM_getValue (setValName, buttonValue);
    }

    function storeValue () {
        GM_setValue (setValName, buttonValue);
    }

    function setButtonTextAndVal () {
        var buttonText  = "*ERROR!*";

        for (var J = valueArry.length - 1;  J >= 0;  --J) {
            if (buttonValue == valueArry[J]) {
                buttonText  = textArry[J];
                break;
            }
        }

        var theBtn      = document.getElementById (htmlID);
        if (theBtn) {
            theBtn.textContent  = buttonText;
            theBtn.setAttribute ("value", buttonValue);
        }
        else
            alert ('Missing persistent button with ID: ' + htmlID + '!');
    }
} 
```

# optimization - GHC的-O和-O2的区别

> ID：11108746
> 
> 赞同：8
> 
> 时间：2012-06-19T20:18:53.883
> 
> 标签：optimization, haskell, compiler-construction, ghc

`cabal dist`不鼓励您使用，`-O2`因为它会产生更长的编译时间，并且 GHC 手册说：

> 目前，`-O2`不太可能产生比`-O`.

我知道我总是可以对库进行基准测试，看看是否能`-O2`提供更好的性能，但我想知道是否有人可以解释有什么`-O2`不同，`-O`这样我就可以直观地了解为什么他们认为它不太可能产生更好的代码。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T21:03:42.693

`-O2`执行构造函数特化。还有一些仅在 -O2 时启用的其他优化，包括`-fliberate-case`, `-fstatic-argument-transformation`,

我怀疑 -O2 现在总能生成更好的代码，因为该建议可以追溯到大约 10 年前。

# ms-access - 关闭前提示

> ID：11108759
> 
> 赞同：3
> 
> 时间：2012-06-19T20:19:54.900
> 
> 标签：ms-access, vba

在用户关闭表单之前，我想用一个确认框进行提示。

我不知道该怎么做。我已经尝试了下面的代码，它会提示用户，但是单击“否”后它仍然会关闭表单：

```
Private Sub Form_Close()
    If MsgBox("Test", vbYesNo + vbExclamation, "Confirm close") = vbYes Then
    Else
        Cancel = True
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T20:23:29.917

您不能取消关闭事件，但可以取消卸载事件

```
Private Sub Form_Unload(Cancel As Integer)

    If MsgBox("Test", vbYesNo + vbExclamation, "Confirm close") <> vbYes Then
         Cancel = True
    End If

End Sub 
```

# windows-phone-7 - 如何使用故事板

> ID：11108763
> 
> 赞同：0
> 
> 时间：2012-06-19T20:20:04.490
> 
> 标签：windows-phone-7, storyboard

我希望停止使用 DispatcherTimer 来显示动画，因为这是非常不可预测的。相反，我想开始使用 Storyboard，因为这显然是动画控件的最佳和最有效的方式。

我曾尝试搜索教程，但不幸的是，我还没有偶然发现一个。

谁能告诉我从哪里开始？例如，“在屏幕上移动图像”，然后“在旋转图像的同时同时移动许多图像”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:27:59.013

有很多关于 windows phone 7 中 Storyboard 动画的信息。这里有几个链接：

[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard(v=vs.95).aspx)

[http://www.silverlight.net/learn/creating-ui/animation-and-easing/animations-(silverlight-quickstart](http://www.silverlight.net/learn/creating-ui/animation-and-easing/animations-(silverlight-quickstart) )

**这是一些帮助您入门的代码**

这将为一个简单的矩形设置动画，在屏幕上来回移动它。

```
<phone:PhoneApplicationPage 
    x:Class="PhoneApp1.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <Rectangle x:Name="rect" Height="25" Width="25" Fill="Red" HorizontalAlignment="Left" VerticalAlignment="Top">
                <Rectangle.RenderTransform>
                    <TranslateTransform x:Name="transform" />
                </Rectangle.RenderTransform>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation
                                    Storyboard.TargetName="transform"
                                    Storyboard.TargetProperty="X"
                                    From="0" To="100" Duration="0:0:1" AutoReverse="True" RepeatBehavior="Forever" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>
        </Grid>
    </Grid>

</phone:PhoneApplicationPage> 
```

# android - Android：setText onItemClick NPE

> ID：11108765
> 
> 赞同：0
> 
> 时间：2012-06-19T20:20:09.060
> 
> 标签：android, nullpointerexception, settext, onitemclick

我不明白为什么在设置文本视图字符串时会得到 NPE。我全部使用这些，但为什么在这个 onItemClick() 方法上使用 NPE？

谢谢你的帮助。

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        . . .
        TextView title = (TextView) view.findViewById(R.id.navigationTitle);
        String navTitle = ((TextView) view.findViewById(R.id.listLabel)).getText().toString();
        title.setText(navTitle);//<--NPE AT THIS LINE - NO OTHER INFO FROM LOGCAT THAT IS FROM MY CLASSES!!
        . . . 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:26:50.913

99% 'title' 对象为空，因为它不存在于 onItemClick 方法传入的 'view' 对象中。

尝试将 view.findViewById 更改为仅 findViewById，假设 textview R.id.navigationTitle 存在于活动中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:28:38.610

`TextView title`为空，如果 navigationTitle 在您的主活动布局中，请尝试以下操作：

```
 TextView title = (TextView)findViewById(R.id.navigationTitle);
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        . . .
        String navTitle = ((TextView) view.findViewById(R.id.listLabel)).getText().toString();
        title.setText(navTitle);
        . . . 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:44:12.030

@imran khan 和 @azgolfer 的 Thnx 让我思考：

我变了：

```
TextView title = (TextView) view.findViewById(R.id.navigationTitle); 
```

至：

```
TextView title = (TextView) getActivity().findViewById(R.id.navigationTitle); 
```

现在它不是空的！

# javascript - 从实例中获取主干视图的父类

> ID：11108768
> 
> 赞同：3
> 
> 时间：2012-06-19T20:20:25.300
> 
> 标签：javascript, oop, backbone.js

我正在实现一个管理视图切换的系统，以便在渲染另一个视图之前清除该视图携带的任何事件。但是，我需要使用视图的实例在数组中查找视图。如何获取视图实例的视图类？

例如：

```
var myView = new MyView;
return myView.parent(); // this should return MyView 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:54:01.977

听起来您正在寻找该[`constructor`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)物业：

> 返回对创建实例原型的 Object 函数的引用。

所以如果你这样做：

```
var v = new View; 
```

然后`v.constructor`会`View`。如果你这样做：

```
var views = [
    Backbone.View.extend({}),
    Backbone.View.extend({}),
    Backbone.View.extend({})
];

var v = new views[1];
for(var i = 0; i < views.length; ++i)
    if(v.constructor === views[i])
        console.log(i) 
```

您将进入`1`控制台。演示：http: [//jsfiddle.net/ambiguous/EgURK/](http://jsfiddle.net/ambiguous/EgURK/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T21:09:56.997

我解决这个问题的方法是`this`作为构造函数的一部分传入并在视图内设置一个“实例变量”。

然后，您将连接一个名为“parent”的 getter 函数，以将其返回为您的示例代码：

```
var myView = new MyView( this );
return myView.parent(); 
```

# iis - ISAPI 重定向到 IIS 6.0 中的外部站点

> ID：11108770
> 
> 赞同：0
> 
> 时间：2012-06-19T20:20:41.837
> 
> 标签：iis, iis-6, isapi, isapi-rewrite

我正在使用[ISAPI Rewrite 3](http://www.helicontech.com/isapi_rewrite/)，而我的服务器正在运行 IIS 6。我以前从未使用过 ISAPI Rewrite，所以我对如何使用它有点不知所措。

我正在尝试做一个简单的重定向，这样如果有人点击

> [http://www.mysite.com/page.aspx](http://www.mysite.com/page.aspx)

在我的服务器上，它们被重定向到

> [http://externalsite.com/dir/file.htm](http://externalsite.com/dir/file.htm)

这是一个不属于我的外部站点。有没有办法做到这一点，或者有一个教程可以告诉我如何做？我在上面找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:28:53.833

这个模块有很多教程。您可以使用这些链接作为开始：

*   [爆破关于 mod_rewrite 的神话。第一部分](http://www.helicontech.com/articles/exploding-myths-about-mod_rewrite-part-i/)
*   [爆破关于 mod_rewrite 的神话。第2部分。](http://www.helicontech.com/articles/exploding-myths-about-mod_rewrite-part-2/)
*   [Helicon Ape - mod_rewrite 文档](http://www.helicontech.com/ape/doc/mod_rewrite.htm)
*   [ISAPI_Rewrite 示例](http://www.helicontech.com/isapi_rewrite/doc/examples.htm)

除了 ISAPI_Rewrite 之外，Helicon Ape 和 mod_rewrite 是不同的产品，重写语法是相同的，因此您可以使用任一产品的文档。

对于您要问的重定向，我猜它应该是 www.mysite.com .htaccess 文件中的以下规则：

```
RewriteEngine on

RewriteRule ^page.aspx http://externalsite.com/dir/file.htm [NC, R] 
```

# iphone - 语义问题和解析问题：缺少方法声明和预期方法主体的上下文

> ID：11108774
> 
> 赞同：2
> 
> 时间：2012-06-19T20:21:05.333
> 
> 标签：iphone

获取语​​义问题和解析问题：缺少方法声明的上下文和用于暂停和恢复 UIImageviewanimation 方法的预期方法主体。在 MainViewController.h 文件中声明了这两个方法

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

- (void)resumeLayer:(CALayer *)layer;
- (void)PauseLayer:(CALayer *)layer;

@interface MainViewController : UIViewController
@property (nonatomic, retain) UIToolbar *toolbar;
@property (strong)AVAudioPlayer *audioPlayer;
@property (nonatomic, retain) NSTimer * timer; 
```

m 文件中的方法

```
-(void)pauseLayer:(CALayer*)layer
{
CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
layer.speed = 0.0;
layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer
{
CFTimeInterval pausedTime = [layer timeOffset];
layer.speed = 1.0;
layer.timeOffset = 0.0;
layer.beginTime = 0.0;
CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
layer.beginTime = timeSincePause;
 } 
```

我对我在这里没有定义的东西感到困惑。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:34:48.553

您应该将方法定义放在 @interface 和 @end 块中

```
@interface MainViewController : UIViewController

@property (nonatomic, retain) UIToolbar *toolbar;
@property (strong)AVAudioPlayer *audioPlayer;
@property (nonatomic, retain) NSTimer * timer;

- (void)resumeLayer:(CALayer *)layer;
- (void)PauseLayer:(CALayer *)layer;

@end 
```

# c# - 绑定dataGridView中的未绑定列不包含单元格值

> ID：11108778
> 
> 赞同：2
> 
> 时间：2012-06-19T20:21:19.107
> 
> 标签：c#, winforms, datagridview, bindingsource, datagridviewcheckboxcell

我有一个datagridview，除了一个复选框列之外，所有列都绑定了。在我的表单的 OnLoad 中，我浏览了我的 dataGridView 中的行并`DataGridViewCheckBoxCell.Value = true`为每一行设置。

我在 OnLoad 结束时验证了我设置的所有 DataGridViewCheckBoxCells 仍然具有我给它们的值，但是一旦显示 dataGridView，我设置的所有选定值和复选框值都会重置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:10:40.837

显然，当 DataGridView 变得可见时（`Visible = true`），`OnBindingContextChanged`被调用导致内部数据连接被重置并重置所有单元格上的值。

因此，我没有在表单中设置单元格的值，而是在我的数据网格上`OnLoad`设置`VirtualMode = true`并覆盖`OnCellValueNeeded`我可以按需提供复选框单元格值的位置。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Collections;

namespace MyControls
{
public class SelectedItemsGridView : DataGridView
{
    private IList _SelectedItems;
    public IList SelectedItems 
    {
        get { return _SelectedItems; }
        set
        {
            _SelectedItems = value;
            ClearSelection();
            Refresh();
        }
    }

    public SelectedItemsGridView()
        : base()
    {
        SelectionMode = DataGridViewSelectionMode.FullRowSelect;
        RowHeadersVisible = false;
        VirtualMode = true;
        ////Columns.Add(new DataGridViewCheckBoxColumn(false) { 
        //    AutoSizeMode = DataGridViewAutoSizeColumnMode.ColumnHeader,
        //    HeaderText = "Select"});
    }

    protected override void OnCreateControl()
    {
        base.OnCreateControl();
        if (DesignMode == true) { return; }
        Columns.Insert(0, new DataGridViewCheckBoxColumn(false)
        {
            AutoSizeMode = DataGridViewAutoSizeColumnMode.ColumnHeader,
            HeaderText = "Select"
        });
    }

    public bool IsItemSelected(object obj)
    {
        if (SelectedItems == null) { return false; }
        return SelectedItems.Contains(obj);
    }

    protected override void OnCellValueNeeded(DataGridViewCellValueEventArgs e)
    {
        base.OnCellValueNeeded(e);
        if (e.ColumnIndex == 0)
        {
            e.Value = IsItemSelected((this.DataSource as IList)[e.RowIndex]);
        }
    }

    protected override void OnCellContentClick(DataGridViewCellEventArgs e)
    {
        base.OnCellContentClick(e);
        if (e.RowIndex == -1) { return; }
        Object item = ((IList)DataSource)[e.RowIndex];
        if(e.ColumnIndex == 0)
        {
            var cellValue = this[e.ColumnIndex, e.RowIndex].Value;
            if (cellValue != null && (bool)cellValue == true)
            {
                SelectedItems.Remove(item);

            }
            else if (cellValue != null && (bool)cellValue == false)
            {
                SelectedItems.Add(item);
            }
        }
    }
} 
```

}

# android - android应用程序打开后如何启动服务？

> ID：11108782
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:21:30.733
> 
> 标签：android, scheduling, android-service, android-alarms

我需要在后台做一些事情，但是一旦应用程序打开，我就需要这项服务

虽然，即使手机处于睡眠模式，我也需要在后台进行操作？？

我尝试提供服务，但在手机进入睡眠模式后这项服务仍然存在，但我附加的内容不起作用。

使用这个

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/AlarmService_Service.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/AlarmService_Service.html)

我看到这个 [链接](https://stackoverflow.com/questions/1396133/android-how-to-do-something-on-app-launch)，**但我不明白！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:26:55.033

为什么不能使用

```
Intent intent = new Intent(MyActivity.this, Myservice.class);
startService(intent); 
```

如果您在 Activity 的 onCreate 方法中执行此操作，那么它将在您的 Activity 运行后立即启动该服务。从那里，它应该在后台运行。你有什么问题？

# sql - 如何实现双向引用表？

> ID：11108783
> 
> 赞同：1
> 
> 时间：2012-06-19T20:21:31.057
> 
> 标签：sql, sql-server, database, tsql

我有一个表 School 和一个表 Teacher 具有一对多的关系。但是，一位老师是校本，只有一位老师可以是校本。于是想到了在 School 表中保存教师 id（原理）如下：

```
CREATE TABLE School (
    ID INT PRIMARY KEY,
    Name VARCHAR(40),
    PrincipleID INT FOREIGN KEY REFERENCES Teacher.ID
)

CREATE TABLE Teacher (
    ID INT PRIMARY KEY,
    Name VARCHAR(40),
    SchoolID INT FOREIGN KEY REFERENCES School.ID
) 
```

我知道我可以在学校表中丢失外键引用，但这不是一个选择。

我应该在创建表后进行引用吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:32:20.327

另一种解决方案是创建一个新表，假设 SchoolsPrinciples 只有两个字段：

```
CREATE TABLE SchoolsPrinciples
(
  SchoolId int,
  TeacherId int,
  CONSTRAINT uc_SchoolTeacher UNIQUE (SchoolId, TeacherId)
) 
```

一个 UNIQUE 约束让您每所学校只获得一名教师。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:27:42.757

构建表时，您需要将约束添加为单独的 alter 语句。另请注意，在创建外键时，您应该只指定表名，而不是引用的列（该列由主键隐含）。

```
CREATE TABLE School (
    ID INT PRIMARY KEY,
    Name VARCHAR(40),
    PrincipleID INT);

CREATE TABLE Teacher (
    ID INT PRIMARY KEY,
    Name VARCHAR(40),
    SchoolID INT 
      CONSTRAINT FK_Teacher_School 
      FOREIGN KEY REFERENCES School);

ALTER TABLE School add
    CONSTRAINT FK_School_Teacher 
    FOREIGN KEY (PrincipleID) REFERENCES Teacher; 
```

添加数据时，您需要将 PrincipleID 字段设置为单独的更新：

```
insert into School (ID, Name)
values (1, 'Blarg Elementary');

insert into Teacher (ID, Name, SchoolID)
values (1, 'John Doe', 1),
       (2, 'Bob Smith', 1),
       (3, 'Adam Walker', 1);

update School set PrincipleID = 2 where ID = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:23:36.097

而是`IsPrincipal`在桌子上放一个布尔值。`Teacher`或者添加第三个关系表

```
CREATE TABLE SchoolPrincipals (
  INT SchoolID PRIMARY KEY FOREIGN KEY REFERENCES School.ID,
  INT TeacherID FOREIGN KEY REFERENCES Teacher.ID
) 
```

保持一切整洁，没有痛苦的删除逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T20:27:32.853

您可以将教师表中的一列作为

1.  `IsPrincipal`其中只有一行具有 jonnyGold 所指的 true 值，

    ```
     This can be checked by triggers.
                        OR
          You can use filtered index if using Sql Server 2008.
               Create unique filtered index where SchoolID, IsPrincipal 
               is NOT NULL and are unique 
    ```

2.  老板，这将包含主体 ID，因此`employee manager relationship`在您的情况下创建不适合。

CREATE TABLE EmpManager ( TeacherID int SchoolID int IsPrincipal bit ) 并使用过滤索引或触发器来处理场景。

**编辑：**

```
CREATE TABLE [dbo].[Teacher](
    [ID] [int] NOT NULL primary key,
    [Name] [varchar](40) NULL,
    [SchoolID] [int] NULL,
) 
GO

CREATE TABLE [dbo].[School](
    [ID] [int] NOT NULL primary key,
    [Name] [varchar](40) NULL,
    [PrincipleID] [int] NULL,
)
GO

ALTER TABLE [dbo].[Teacher]  WITH CHECK ADD  CONSTRAINT [FK_Teacher_School] FOREIGN KEY([SchoolID])
REFERENCES [dbo].[School] ([ID])
GO

ALTER TABLE [dbo].[School]  WITH CHECK ADD  CONSTRAINT [FK_School_Teacher] FOREIGN KEY([PrincipleID])
REFERENCES [dbo].[Teacher] ([ID])
GO 
```

![在此处输入图像描述](../Images/71e3f27d4df345ea3b1620d55b2575de.png)

更好的设计应该是ADC建议的

![在此处输入图像描述](../Images/68ec448758af86faacb76aeb45cc2fbe.png)

# c++ - Pantheios 和 boost::thread

> ID：11108788
> 
> 赞同：0
> 
> 时间：2012-06-19T20:21:56.613
> 
> 标签：c++, boost, boost-thread, pantheios

我在使用带有 boost::threads 的 pantheios 日志库时遇到了一些问题。似乎如果我在创建线程之前使用任何 pantheios 日志记录，我会得到一个段错误。

例如，以下将起作用：

```
thread_ = new boost::thread(&foo);
pantheios::log(pantheios::debug, "Hello world"); 
```

但是如果切换语句的顺序，堆栈跟踪会显示我`start_thread`在 boost 中崩溃了。

```
pantheios::log(pantheios::debug, "Hello world");
thread_ = new boost::thread(&foo);
// SEGFAULT! 
```

有任何想法吗？

编辑：更多上下文

```
int main()
{
    pantheios::log(...);
    MyClass myClass(/* some arguments, which are all literals */);

    // Do some more work

    return 0;
}

// MyClass constructor
MyClass::MyClass(/* args */)
    : member1_(arg1)
    , member2_(arg2)
{
    thread_ = new boost::thread(&MyClass::workerLoop, this);
}

// Destructor
MyClass::~MyClass()
{
    thread_->join();
    delete thread_;
} 
```

这将在`start_thread`. 如果我再次交换其中的两条线，`main`它将毫无问题地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:13:40.113

看来我想通了。我正在链接到不同版本的`boost`. 我的系统有 boost 版本 1.40，而我也在使用我下载的更新版本的 boost，1.49。值得注意的是，我链接的 boost 线程是旧版本的。

一旦我使链接保持一致，一切都按预期工作。

# c# - 将字符串转换为双精度

> ID：11108789
> 
> 赞同：0
> 
> 时间：2012-06-19T20:22:04.367
> 
> 标签：c#, .net, string, double

我需要帮助将字符串转换为带有 7 位小数的双精度。我有一个字符串`"00000827700000"`，需要将其转换为 82.77

尝试使用带有 {0:N7} 的 String.Format() 没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T20:25:21.123

看起来你*可以*使用：

```
decimal x = decimal.Parse(text.Substring(0, 7) + "." +
                          text.Substring(7),
                          CultureInfo.InvariantCulture); 
```

这实际上会将其解析为 82.7700000，因为`decimal`保留尾随零（在一定程度上），但也许这已经足够好了？不是，您可以将第二个参数更改为

```
text.Substring(7).TrimEnd('0') 
```

请注意，我强烈建议您至少*考虑*使用`decimal`而不是`double`. 你还没有解释这个值代表什么，但是如果它被*存储*为你需要保存的十进制数字，它对我来说更像是一个`decimal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:29:50.427

根据编辑，它可以简化为

```
var text = "00000827700000";
var x = decimal.Parse(text, CultureInfo.InvariantCulture) / 10000000;
Console.Write(String.Format("{0:N7}", x)); 
```

# c# - 在 DataGridView 中编辑一个 TextBox 单元格，就像它是一个普通的 TextBox 一样（按下箭头时不会跳跃）

> ID：11108791
> 
> 赞同：0
> 
> 时间：2012-06-19T20:22:06.237
> 
> 标签：c#, winforms, datagridview

我在 DataGridView 中有“多行”（自动换行）文本框列。能够像普通文本框一样编辑它们会很棒，也就是说，**当我按下向下箭头时，我希望插入符号在文本框中向下一行，我不希望它跳到下一行，因为它通常会**。同样，**我希望按 Enter 在文本框单元格中创建一个新行，但它会完成编辑**.

否则说：我想覆盖某些按键（或按键）的正常行为，以便用户可以像编辑普通文本框一样编辑文本框单元格，并使用箭头在其中导航并使用 enter 创建新行。

我尝试在 DataGridView 中操作 keydown 事件，但没有成功。

感谢您的任何想法或意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:07:11.957

[这个问题在这里](https://stackoverflow.com/questions/9290203/c-sharp-datagridview-key-handling)向我展示了解决它的方法。这是代码：

```
class MyDataGridView : DataGridView
{

    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if ((keyData == Keys.Enter) && (this.EditingControl != null))
        {
            //new behaviour for Enter
            TextBox tb = (TextBox)EditingControl;
            int pos = tb.SelectionStart;
            tb.Text = tb.Text.Remove(pos, tb.SelectionLength);
            tb.Text = tb.Text.Insert(pos, Environment.NewLine);
            tb.SelectionStart = pos + Environment.NewLine.Length;
            tb.ScrollToCaret();
            //and do nothing else
            return true;
        }
        else if ((keyData == Keys.Up) && (this.EditingControl != null))
        {
            //programmatically move caret up
            //(look at related question to see how)
            return true;
        }
        else if ((keyData == Keys.Down) && (this.EditingControl != null))
        {
            //programmatically move caret down
            //(look at related question to see how)
            return true;
        }
        //for the rest of the keys, proceed as normal
        return base.ProcessCmdKey(ref msg, keyData);
    }
} 
```

所以这是对 DataGridView 的简单更改，它可以工作。我只需要

*   **创建这个新类**，并且
*   **将 DesignerClass 中的两行更改**为使用 MyDataGridView 而不是 DataGridView（声明和初始化）

其他一切都按预期工作。

相关问题：[如何以编程方式将插入符号上下移动一行](https://stackoverflow.com/questions/11123067/programmatically-move-caret-in-textbox-line-up-and-line-down)。

# php - 使用 php linux 服务器解析大文件

> ID：11108793
> 
> 赞同：-2
> 
> 时间：2012-06-19T20:22:16.393
> 
> 标签：php, linux, perl, file, shell

我是一名 php 程序员，目前我正在处理文件。我必须解析数据并将其插入 mysql 数据库。由于其数据量很大，php 无法加载或解析文件。即使我将 memory_limit 增加到 1500MB，我也会遇到内存泄漏错误。

```
 FATAL:  emalloc():  Unable to allocate 456185835 bytes 
```

我的文本文件包含文本和 xml 数据。我必须从文本文件中解析 xml 数据。

```
 eg: <ajax>some text goes here</ajax> non relativ text <ajax>other content</ajax> 
```

在上面的示例中，我必须解析标签内的内容。如果有人可以提供一些建议将每个标签分成单独的文件（例如：1.txt、2.txt），那将是很棒的（perl 或 c 或 shell scripting..etc）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:36:51.753

*咳*... 1500 MB 的内存限制是一个明确的迹象，你已经偏离了轨道。

你从哪里得到你的文件？我假设（给定大小）这是一个本地文件。如果您尝试使用将文件加载到字符串中`file_get_contents()`，请注意文档是*错误*的，并且该函数实际上并未使用内存映射 I/O（参见[错误 52802](https://bugs.php.net/bug.php?id=52802)）。所以这对你不起作用。

您可能会尝试回退到更多类似 C（但仍然是 PHP）的结构，特别是`fopen()`,`fseek()`和`fread()`. 如果文件是带有换行符的已知结构，您也可以考虑`fgets()`.

这些应该允许您将块中的字节读入一个*合理*大小的缓冲区，您可以从中进行处理。由于看起来您正在处理标记的字符串，因此您将不得不玩通常的游戏，即保留多个缓冲区，您可以在其中积累数据直到可处理。这是大多数介绍中所涵盖的相当标准的内容，例如 C 中的流处理。

请注意，在 PHP（或任何其他语言）中，您还必须潜在地考虑字符串编码问题，因为通常情况下，1 字节 == 1 字符（参见 Unicode）不再是这种情况.

正如您所暗示的那样，PHP 很可能不是完成这项任务的最佳语言（尽管它确实可以做到）。但是您的问题实际上并不是特定于语言的问题。您遇到了在没有内存映射的情况下处理大文件的基本限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:10:32.727

您实际上可以一次用 PHP 解析 XML 一个小块，因此您实际上根本不需要太多 ram：

```
set_time_limit(0);
define('__BUFFER_SIZE__', 131072);
define('__XML_FILE__', 'pf_1360591.xml');

function elementStart($p, $n, $a) {
  //handle opening of elements
}

function elementEnd($p, $n) {
  //handle closing of elements
}

function elementData($p, $d) {
  //handle cdata in elements
}

$xml = xml_parser_create();

xml_parser_set_option($xml, XML_OPTION_TARGET_ENCODING, 'UTF-8');
xml_parser_set_option($xml, XML_OPTION_CASE_FOLDING, 0);
xml_parser_set_option($xml, XML_OPTION_SKIP_WHITE, 1);

xml_set_element_handler($xml, 'elementStart', 'elementEnd');
xml_set_character_data_handler($xml, 'elementData');

$f = fopen(__XML_FILE__, 'r');
if($f) {
  while(!feof($f)) {
    $content = fread($f, __BUFFER_SIZE__);

    xml_parse($xml, $content, feof($f));

    unset($content);
  }
  fclose($f);
} 
```

# javascript - 我应该如何对对象中的项目进行排序？

> ID：11108797
> 
> 赞同：0
> 
> 时间：2012-06-19T20:22:41.683
> 
> 标签：javascript

> **可能重复：**
> [按属性值对 JavaScript 对象进行](https://stackoverflow.com/questions/1069666/sorting-javascript-object-by-property-value)
> [排序 javascript sort object of objects](https://stackoverflow.com/questions/6686365/javascript-sort-object-of-objects)

我有一个对象。每个对象都有一个键：

```
{
    name: {key: value,
           key1:BBB},
    name2: {key: value,
            key1:AAA},
    name3: {key: value,
            key1:CCC}
} 
```

稍后我将选择键的子集（例如 name2 和 name3）：之后我想根据 key1 的值对剩余的项目进行排序。我该怎么做呢？

# eclipse - Erlide：如何在运行配置中设置启动模块？

> ID：11108800
> 
> 赞同：1
> 
> 时间：2012-06-19T20:22:42.730
> 
> 标签：eclipse, erlang, erlide

我在“运行配置”中设置启动模块和功能有问题我这样做：“运行 - >运行配置”和“开始”部分我正在设置模块：mod，功能：你好

我的代码：

```
-module(mod).
-export([hello/0]).
hello()-> io:format("42"). 
```

现在，当我点击“运行”时，我希望 mod:hello() 自动执行，但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:43:34.723

**代码确实被执行了......**

当你点击“运行”时，`mod:hello()`会被执行。问题是，执行`mod:hello()`是为了系统初始化，比如加载库代码和初始化循环状态。的副作用`mod:hello()`，即作为标准输出的字符串“42”将不会反映在您的 Eclipse 控制台中。为了证明我的观点，我们可以创建一些**更明确和更持久的副作用**，比如在文件系统中创建一个名为`output_file.txt`. 更改`mod.erl`为这样的内容：

```
-module(mod).
-export([hello/0]).

hello() ->
    os:cmd("touch output_file.txt"). 
```

点击“运行”，你会发现`output_file.txt`在你的目录下创建了一个文件`workspace`。这是执行死刑的证据`mod:hello()`。

**为了达到你想要的...**

在 Unix shell 中：

```
$ erlc mod.erl 
$ erl -noshell -s mod hello -s init stop
42 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:32:48.230

根据您要执行的内容，上面的答案还有另一种选择：“实时表达式”。在与控制台相同的位置有一个具有此名称的视图，您可以在其中输入表达式并在每次重新编译模块时启用它以进行评估。

这非常适用于评估不重且没有副作用的表达式，可以用作拥有测试套件的替代形式。

# mysql - 我们可以安装 PDO 并保持旧的 MySQL 扩展没有任何冲突吗？

> ID：11108803
> 
> 赞同：0
> 
> 时间：2012-06-19T20:22:52.510
> 
> 标签：mysql, pdo, installation

我开始注意到 MySQL 中的大多数功能都已被弃用，并建议我们迁移到 MySQLi 或 PDO。

唯一的问题是我们的服务器上有很多客户端都有遗留的 MySQL 代码，我们无法全部更改。

是否可以在 CentOS / cPanel 中运行这两个驱动程序而没有任何问题？如果我通过 WHM 中的 EasyApache 安装 PDO，它会破坏什么吗？

我需要一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:24:17.347

是的，他们可以毫无问题地并肩工作。

# asana - 如何在 Asana API 文档中运行“hello”示例

> ID：11108804
> 
> 赞同：0
> 
> 时间：2012-06-19T20:23:05.693
> 
> 标签：asana

如何在 Asana API 文档中运行“hello”示例？

```
C:\Users\Desktop\ruby helloTask.rb
C:/Ruby193/lib/ruby/1.9.1/net/http.rb:799:in `connect': SSL_connect returned=1 e
rrno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL
::SSL::SSLError)
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:799:in `connect'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:744:in `start'
        from helloTask.rb:38:in `<main>' 
```

我尝试运行 Asana API 文档中提到的示例，错误在上面。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:51:08.307

（我在 Asana 工作）

如果您使用的是 Ruby 1.9，则可能无法正确找到 CA 证书。如果您使用的是 Mac OS X，请尝试（重新）安装 curl-ca-bundle：

```
sudo port install curl-ca-bundle 
```

`http.ca_file`在某些情况下您可能还需要设置。[在http://martinottenwaelter.fr/2010/12/ruby19-and-the-ssl-error/](http://martinottenwaelter.fr/2010/12/ruby19-and-the-ssl-error/)上对此问题有更详尽的描述

禁用 SSL 验证当然也可以，尽管这会放弃 SSL 提供的很多安全性，因为您无法确定您是直接与 Asana 的服务器通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:29:24.590

谷歌后我遇到了同样的问题，我不得不换行：

```
http.verify_mode = OpenSSL::SSL::VERIFY_PEER 
```

至

```
http.verify_mode = OpenSSL::SSL::VERIFY_NONE 
```

希望有帮助

# javascript - 带有websocket接口的数据库？

> ID：11108805
> 
> 赞同：4
> 
> 时间：2012-06-19T20:23:07.893
> 
> 标签：javascript, node.js, mongodb, couchdb, socket.io

CouchDB 有一个 http 接口，可以从服务器和客户端访问它。websocket接口是否存在类似的东西？

在此先感谢您的任何信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T04:25:43.493

一般来说，您不希望通过公共接口直接公开您的数据库服务器，因此在提供身份验证和 websockets 等服务之间会有一个服务器应用程序。通常这将是类似 node.js 或 Tornado .. 但由于您根据您的问题标签知道这一点，您正在寻找的实际解决方案是什么？

CouchDB 目前不直接支持 websocket 接口，但下一个版本 (1.3) 显然包括对除了 IE 之外的广泛支持的[服务器发送事件协议的支持（请参阅：](https://issues.apache.org/jira/browse/COUCHDB-986)[浏览器兼容性](http://caniuse.com/#feat=eventsource)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-23T07:25:47.357

看起来 CouchDB 支持*以下的 EventSource 提要类型`_changes`*：

[https://issues.apache.org/jira/plugins/servlet/mobile#issue/COUCHDB-986](https://issues.apache.org/jira/plugins/servlet/mobile#issue/COUCHDB-986)

> 描述
> 
> 我将为 _changes API (feed="eventsource") 实现 EventSource 协议提要。
> 
> 关于它的一些信息：http: [//dev.w3.org/html5/eventsource/](http://dev.w3.org/html5/eventsource/)它比 websocket 更有用，因为它是只读的。

另外：考虑[https://github.com/nolanlawson/socket-pouch](https://github.com/nolanlawson/socket-pouch)：

> SocketPouch 一个自定义的 PouchDB 适配器，它将所有 PouchDB API 调用代理到另一个在 Node.js 中的服务器上运行的 PouchDB。通信机制是Engine.io，著名的Socket.io核心。
> 
> 这意味着 SocketPouch 不是通过 HTTP 同步，而是通过 WebSockets 同步。感谢 Engine.io，它在不支持 WebSockets 的浏览器中回退到 XHR 轮询。

PouchDB 是 JavaScript 中 CouchDB 的一个端口，旨在在浏览器中运行（用于在浏览器中运行 CouchDB 数据库）或/和 Node.js（作为 CouchDB 的轻量级替代品或补充品）

# c++ - 循环和调用堆栈

> ID：11108815
> 
> 赞同：1
> 
> 时间：2012-06-19T20:23:32.993
> 
> 标签：c++

如果我在循环中使用以下内容：

```
 ostringstream glob;
    glob << "some words";
    cout<< "this is bob"<<glob.str()<<endl; 
```

每次迭代都会重置 glob。但是，如果我在循环之外声明 glob，那么每次迭代都会不断添加“一些单词”，从而导致字符串越来越长。

我试图理解为什么。这是因为每次循环循环时都会从堆栈中弹出这个变量吗？

我认为如果我在每个循环中“重新定义”glob，那么我会得到一个错误，但我没有......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:25:04.613

如果您在范围内声明变量，则每次进入循环时都会创建（构造）它（它在堆栈上）。如果您在循环之外声明它，那么它就是您不断重用的单个实例。

也可以看看：

*   [C++ 范围](http://msdn.microsoft.com/en-us/library/b7kfh662%28v=vs.80%29.aspx)
*   [构造函数和析构函数概述](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr374.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:28:44.300

为了澄清，您在询问这之间的区别：

```
ostringstream glob;
for ( int i = 0; i < 100; ++i )
{
    glob << "some words";
    cout<< "this is bob"<<glob.str()<<endl;
} 
```

还有这个：

```
for ( int i = 0; i < 100; ++i )
{
    ostringstream glob;
    glob << "some words";
    cout<< "this is bob"<<glob.str()<<endl;
} 
```

首先，“glob”在循环之前被初始化一次，因为它的范围在循环体之外。第二个“glob”在循环体中（在定义循环范围的大括号内），因此新放置在堆栈上并在每次迭代时初始化（并在每次迭代结束时销毁）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:26:10.103

当 glob 在循环内时，它的作用域是循环的每次迭代。因此，它将在超出范围时被删除（从堆栈中弹出），并在下一次迭代中重新创建（推入堆栈）。

当 glob 在循环之外时，它的作用域是方法，并且在方法完成之前不会被删除。

# ruby-on-rails - 什么是在开发环境中自动生成资产文件夹？

> ID：11108818
> 
> 赞同：2
> 
> 时间：2012-06-19T20:23:54.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline

我正在使用 rails 3.2.6 而我的 development.rb 文件有

```
# Do not compress assets
config.assets.compress = false

# Expands the lines which load the assets
config.assets.debug = true 
```

并且由于某种原因，每当我查看我的公用文件夹时，我都有一个不断出现的资产文件夹....我一直在删除它，但它不断重新出现....有没有办法阻止这种情况

主要问题是资产被声明了两次，一次在资产文件夹中，一次在公用文件夹中，这是完全重复的……这对我来说是一团糟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:51:07.490

解决了......我是我的保护文件编译资产

我注释掉了

```
 guard 'rails-assets' do
   watch(%r{^app/assets/.+$})
   watch('config/application.rb')
 end 
```

一切都很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:25:59.297

在应用程序.rb

```
config.assets.enabled = false 
```

# python - python - 如何创建一个在python中给出答案时关闭的循环？

> ID：11108820
> 
> 赞同：3
> 
> 时间：2012-06-19T20:23:57.593
> 
> 标签：python, loops, control-flow

我想要做的是随机生成两个等于给定数字的数字。然而，为了让它得到想要的答案，我希望它是随机的。那就是问题所在。

```
a=(1,2,3,4,5,6,7,8,9,)
from random import choice
b=choice(a)
c=choice(b)
d= c+b
if d == 10:
#then run the rest of the program with the value's c and b in it
#probably something like sys.exit goes here but I am not sure to end \/
else:
# i have tryied a few things here but I am not sure what will loop it around* 
```

* * *

（感谢您的帮助：D）

我知道创建了一个名为“正确”的列表，并且知道尝试将值 a 和 b 附加到列表中，但这是行不通的。因为我知道运行程序*'in for trail in range(100)'*，所以我得到了答案。然而，这些值并没有附加到新的列表中。这是问题所在。然后我要做的是读取列表中的值 0 和 1，然后使用它们。（对不起，它在学校做得不是很好） **这是针对不添加到给定变量的分数。这一点倒是。**

```
import sys
right=(0)
y=x+x
from trail in range(y)
a=(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20)
from random import choice 
A=choice(a)
B=choice(a)
d=A/B
if d==1:
    right.append(A)
    right.append(B)
else:
    x.append(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:27:06.937

```
 from random import choice

 a = range(1, 10)
 b = c = 0
 while b + c != 10:
     b = choice(a)
     c = choice(a)  # You meant choice(a) here, right? 
```

但这完成了同样的事情：

```
 b = choice(a)
 c = 10 - b 
```

对于 0 到 10 之间的十进制数：

```
from random import uniform

b = uniform(0, 10)
c = 10 - b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:29:06.473

也许我错过了重点，但不需要循环来选择两个相加的随机数。一个随机数和简单的减法就可以完成这项工作：

```
from random import randint

def random_sum(given_number):
    a = randint(1, given_number)
    return a, given_number - a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:38:58.093

这符合*您*的描述，但其他两个答案可能符合您的*要求*，因为对于任何给定的数字 d，将只有一个其他数字 d'，st d+d'=10。所以我的方式是不必要的慢。

```
goal = 10 #the number you're trying to add up to
sum = 0 
min = 1
max = 9
b = c = 0 # initialize outside your loop so you can access them afterward
while (sum != goal) 
    b = random.randint(min, max) 
    c = random.randint(min, max)
    sum = b+c 
```

但是要回答您实际提出的问题，在 python 中，“继续”将跳出条件块或循环的*一次*迭代，而“中断”将完全退出循环。sys.exit() 将退出 python，所以这不是你想要的。

# .net - AntiXSS 4.2.1 使用说明

> ID：11108822
> 
> 赞同：2
> 
> 时间：2012-06-19T20:24:06.317
> 
> 标签：.net, xss

所以我花了将近 30 分钟寻找 AntiXSS 4.2.1 说明（Microsoft 文档已过时）并且找不到任何..

我发现在旧版本中，他们使用，但那已经过时了。

```
AntiXss.HtmlEncode(string) 
```

有人能告诉我如何让 AntiXSS 4.2.1 工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:42:02.843

好的，我发现了这个，似乎可以正常工作

[使用 AntiXSS 增强 ASP.NET 输入卫生](http://gruntbuggly.blogspot.com/2011/01/enhanced-aspnet-input-sanitation-with.html)

# c# - 来自 global.asax 与quartz.net 的运行计时器

> ID：11108825
> 
> 赞同：4
> 
> 时间：2012-06-19T20:24:18.623
> 
> 标签：c#, asp.net, scheduled-tasks, global-asax, quartz.net

我正在开发一个 asp.net 网站，该网站需要每天访问一些社交媒体网站以获取全面的朋友/关注者数据。我选择了 arvixe 商务舱作为我的主机。将来，如果我们发展壮大，我很想进入专用服务器并运行 Windows 服务，但是由于目前还没有这种可能性，我需要另一种可靠的方式来运行计划任务。我熟悉从 app_code(global.aspx) 运行线程计时器。但是，应用程序池回收会导致计时器出现一些问题。我从来没有使用过像quartz这样的任务调度，但是在stackoverflow上读过很多关于它的内容。我正在寻找一些关于如何实现我的目标的建议。我在使用这两种方法时遇到的一个大问题是，由于 api 调用限制，我需要爬虫线程定期休眠长达一个小时。我的第一个想法是使用数据库来保存工作的开始和结束。当应用程序池回收时，我会清除所有未完成的部分，只启动当天没有运行记录的部分。这里的专家怎么看？这种调度的示例架构有什么好的链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:56:28.933

使用哪种方法并不重要，无论您是自己滚动还是使用 Quartz。您受 ASP.NET/IIS 的支配，因为那是您想要托管它的地方。

您是否有一台可以运行计划任务并将数据上传到托管数据库的备用计算机？老实说，这样做可能更安全（取决于您的用例），然后尝试在 ASP.NET 中运行调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:23:15.107

有点像布莱恩的帖子；

找一台备用电脑。

与其允许 DB 访问，不如让它在您的站点上调用 Web 服务。此服务调用应该是您尝试执行的过程的发起者。不要尝试将参数放入其中，就像“StartProcess()”之类的东西应该可以正常工作。

至于睡觉和稍后恢复，请查看[Workflow Foundation](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)。有一些很好的内置功能可以保持状态。

不要将您的数据库暴露给外界，而是暴露该页面或 Web 服务并围绕它进行一些安全保护。WCF 有一些很好的内置安全功能。

最好的部分是当您决定离开时，您可以保留您的 Web 服务并以相同的方式从 Windows 服务调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:25:05.783

只要您使用持久性作业存储（如数据库）并编写和安排作业，以便他们可以处理诸如中途被杀死的事情，让 IIS 回收您的进程并不是什么大问题。

更大的问题是，如果没有流量，IIS 会关闭您的站点。如果您可以保持您的网站正常运行，那么只需确保您适当地设置了失火策略，并且您的工作存储了从中断的地方恢复所需的任何状态数据，您应该能够完成它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-22T14:24:49.333

如果您与语言无关并且不介意用您最喜欢的 Linux 支持的语言编写“工作激活脚本”...

对我来说效果很好的一种解决方案是：

1.  获得相对便宜、稳定的 Linux 主机（来自知名公司），
2.  在您的 .Net 托管平台上创建一个 WCF 服务，该服务将包含您想要定期运行的逻辑（RESTfully 或 SOAP 或 XMLRPC ......无论哪个适合您），
3.  通过 Linux 托管的[cron 作业](http://en.wikipedia.org/wiki/Cron)处理调用，使用您选择的语言编写（我使用 PHP）。

工作得很好，就像我说的。无 VPS 费用，可配置和外部激活。我有一个中心位置可以激活我的工作，正常运行时间为 99% 到 100%（从未发生过任何故障）。

# ios - 如何重新开始 ios 开发？

> ID：11108827
> 
> 赞同：0
> 
> 时间：2012-06-19T20:24:34.177
> 
> 标签：ios, provisioning, provisioning-profile

不久前，我在 Mac 上使用 iOs。由于事故，机器丢失了，我无法从中恢复任何东西。我买了一个新的并安装了xcode。尝试为设备编译时，我收到一条错误消息，提示“默认钥匙串中没有有效的证书/私钥对”。

我去了供应门户，获得了我的开发人员证书并将其添加到钥匙串（登录）中。我还将之前使用的配置文件添加到了 mac（它已经在 iOs 设备上）。

在状态下的管理器选项卡中，我看到一条警告：“未找到有效的签名身份”。

我对整个苹果开发的事情还是新手，我不知道我应该做什么。

你们能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:28:16.887

您需要折腾现有的开发证书，并从钥匙串提供新的签名请求。您缺少的是您的私钥，因为您无法通过制作一个新密钥来获得它。

将来，使用 Time Machine……它是无价的。您还可以导出私钥以保存到 U 盘以进行额外备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:29:21.467

转到[https://developer.apple.com/ios/manage/overview/index.action](https://developer.apple.com/ios/manage/overview/index.action)（或 iOS 配置门户！）

然后转到配置。然后单击新配置文件并创建您的配置文件，然后下载它。然后打开配置文件，然后您的计算机会询问您是否要将其添加到库中。接受它，然后你应该把它放在你的电脑里。接下来打开 Xcode 并打开管理器，然后单击您用于测试的设备并单击 Provisioning Profiles。然后单击导入并选择您刚刚下载的配置文件。然后在您的项目中在构建设置中选择适当的配置文件！然后尝试，它应该工作！你不能使用你的旧证书，所以把那个扔掉。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:30:06.110

如果您没有备份密钥，则无法使用从开发者门户下载的相同证书。没有密钥就不能使用证书。您应该已经在以前的机器上备份了密钥，现在您只需下载证书并将其与备份的密钥配对。

如果您没有备份密钥，则必须吊销旧证书并创建一个新证书。完成后记得备份您的证书密钥。

发生在我身上，所以我知道做错了；）

# php - 在某些 PHP 页面上禁用 cookie

> ID：11108830
> 
> 赞同：2
> 
> 时间：2012-06-19T20:24:54.893
> 
> 标签：php, api, cookies

有没有办法在通常使用 cookie 的服务器上禁用 PHP 在特定页面的标题中发送 cookie？

场景是我有一个使用 cookie 的服务器，但有些页面实际上是在编写不需要 cookie 的 API 调用，实际上通过发送这些不相关的数据来减慢用户的 API 请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:29:12.380

许多站点用来提供静态资源而没有 cookie 开销的方式是使用不同的域。例如，对于 Stack Overflow，该域是[http://sstatic.net](http://sstatic.net)

在 Web 应用程序中，您可以将 cookie 限制为特定路径。默认情况下，它们将被限制在设置它们的目录中。您也可以使用`$path`in 中的参数显式指定它[`setcookie()`](http://php.net/setcookie)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:38:21.563

我同意 Pekka 的回答和 Dagon 的评论。如果您使用 firebug 之类的工具查看 http 请求中的内容，您会发现只有在调用 setcookie 时才会发送 cookie，但是，浏览器将始终发送它对域的有效 cookie。

解决此问题的方法是为您的 api 使用单独的域或子域。您还可以配置支持 api 的 Web 服务器以禁用对 cookie 的任何支持，但是，如果您的域已在任何地方实现了域 cookie，则您无法阻止客户端在其请求的标头中发送所有 cookie 数据。因此，最好为 api 使用完全不同的域，并在此过程中完全避免使用 cookie。如果您可以确保不存在域 cookie，那么子域是下一个最佳解决方案。

# java - 我应该为每个通过 Socket 读/写的线程创建一个新线程吗？

> ID：11108836
> 
> 赞同：1
> 
> 时间：2012-06-19T20:25:09.077
> 
> 标签：java, android, multithreading, sockets, android-asynctask

我正在为 Android 手机编写一个简单的应用程序，以通过套接字连接与 PC 进行通信。

手机可以随时写或接收信息，计算机也可以。到目前为止我使用的解决方案是这样的：

```
Create a thread and call READ in it.
Run an infinte loop.
    Check if thread has finished,
        If so grab the READ and process,
        Then start a new thread also calling read.
    Check to see if another object working in another thread wants to write,
        If so grab and write. 
```

具体来说，我使用 Android API 中的 AsyncTask 来运行线程。

一切正常，但我想知道为每个 READ 创建一个新线程是否性能太重和/或编码不好，如果是这样，我如何重用相同的线程以具有相同的行为。

或者，有没有更好的方法来处理这种情况？

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:30:55.170

是的，为每次读取创建一个新线程对于您描述的需求来说效率非常低。

相反，考虑创建一个线程，一个`List<your data type>`用于保存读取，一个信号量来标记数据可用。您的线程读取每条消息，将其放入列表中，并将信号量发布到等待数据的任何地方。'whatever' 然后接收列表中的任何内容，直到将其清空，然后返回等待信号量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:52:56.273

你需要一个读线程和一个写线程。两者都应该使用 BlockingQueue 与应用程序的其余部分交互。虽然我不明白为什么你会有多个线程想要写。

# c#-4.0 - 哪一种是 csproj 文件中程序集引用的正确方法？

> ID：11108838
> 
> 赞同：4
> 
> 时间：2012-06-19T20:25:17.110
> 
> 标签：c#-4.0, csproj

在我的一个 MSI 安装程序中，我正在以编程方式更新程序集和项目参考相对路径。我的应用程序文件夹中的所有参考程序集。

我尝试实现路径相对路径和绝对路径。两者都工作正常。

相对路径

```
 <Reference Include="log4net">
      <HintPath>..\..\..\..\log4net.dll</HintPath>
 </Reference> 
```

绝对路径

```
 <Reference Include="log4net">
          <HintPath>C:\Program files\Myapplication\log4net.dll</HintPath>
 </Reference> 
```

当我从 Reference Assemblies Path 或 GAC 文件中获取程序集的引用时，我只看到了绝对路径引用。

```
C:\Program Files (x86)\Reference Assemblies

 <Reference Include="System.Management.Automation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>C:\Program Files (x86)\Reference Assemblies\Microsoft\WindowsPowerShell\v1.0\System.Management.Automation.dll</HintPath>
    </Reference> 
```

哪一种是将路径更新为`.Csproj`文件的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:38:33.790

正如您所说：两者都可以正常工作。

在某些极端情况下，实际上在`.csproj`文件中使用相对路径还是绝对路径很重要：

*   当您计划移动`.csproj`文件时。引用的程序集是否也会移动，然后使用相对路径，否则使用绝对路径。
*   当您的文件夹结构中有极端嵌套时，相对路径可能会超过 260 个字符的路径名限制。这是因为完整路径是通过简单地连接项目目录路径和相对路径（包括所有`..\`. 然后，连接路径可能会超过上面提到的characters-in-path-name-limit，而绝对路径不会。

# .net - MonoTouch .Net 4.0 框架

> ID：11108841
> 
> 赞同：2
> 
> 时间：2012-06-19T20:25:28.407
> 
> 标签：.net, c#-4.0, xamarin.ios

我正在创建一个 MonoTouch 项目，我需要使用一些仅存在于 .Net 3.0（及更高版本）库中的属性，但是 MonoTouch 创建一个默认设置为 2.0 框架的项目。我试图寻找可以更改的设置，我已经干净地安装了 MonoTouch 5.2，我什至尝试将架构属性更改为 4.0，但没有任何效果。有没有人对我如何做到这一点有任何建议或指示？它应该很简单，但我在任何地方都找不到任何东西。另外，我已经查看了有关此问题的 SO 问题，但没有一个对我有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:50:25.193

> 有没有人对我如何做到这一点有任何建议或指示？

**简短回答：**您不能使用**每个**4.0 功能

**长答案**

MonoTouch 目前附带一个配置文件，它是 Silverlight（又名 2.1）基类库 (BCL) 的超集。* *super* *set 的一部分是一些新的 4.0 功能也可用。请参阅[文档网站](http://iosapi.xamarin.com/)以了解当前可用的内容。

然而，大多数新的 4.0 BCL 仅在 MonoTouch 重新基于（即将推出的）Mono 2.12 后才可用。在那之前，MonoTouch 使用 Mono 2.10（当前稳定版本）作为它的基础，并且可用的 4.0 功能的数量有点有限。

因此，您喜欢使用的某些东西可能已经存在于 MonoTouch 中。您也可以直接从 Mono 源代码重用一些 4.0 代码（在某些情况下非常容易，在其他情况下几乎不可能）。否则，您将需要等待今年晚些时候支持 4.0 的 MonoTouch 版本。

# python - 使用 Numpy 对行进行切片？

> ID：11108842
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:25:28.200
> 
> 标签：python, numpy, slice

有表想使用 numpy 切片

```
table = ['212:3:0:70.13911:-89.85361:3', '212:3:1:70.28725:-89.77466:7', '212:3:2:70.39231:-89.74908:9',  '212:3:3:70.48806:-89.6414:11', '212:3:4:70.60366:-89.51539:14', '212:3:5:70.60366:-89.51539:14', '212:3:6:70.66518:-89.4048:16']

t = np.asarray (table, dtype ='object') 
```

想用 numpy 来切片所有........... `212:3:0, 212:3:1`as k。想要一切`'212:3:0:70.13911:-89.85361:3','212:3:1:70.28725:-89.77466:7'`如v

成字典任何字典（k，v）。我不想使用 for 循环来做到这一点......我已经这样做了，因为 for 循环很慢。

注意：该行有“：”，但“：”确实表示字典“：”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:42:58.250

### dict理解的基础

要将某些内容转换为 dict，您需要将其转换为生成 2 序列（生成两个元素序列的任何内容）的可迭代对象，例如`[[1,2],[3,4]]`or`[(1,2),(3,4)]`或`zip([1,2,3,4], [5,6,7,8])`）

例如

```
>>> mylst = [(1,2), (3,4), (5,6)]
>>> print dict(mylst)
{1:2, 3:4, 5:6} 
```

因此，您需要以生成元组的方式拆分每个字符串。假设您已经编写了一个执行此操作的函数，调用 `split_item`它接受两个字符串并返回一个元组。然后，您可以编写如下所示的生成器表达式，这样您就不需要在创建 dict 之前将所有内容加载到内存中。

```
def generate_tuples(table):
    length = len(table)
    for i in range(1, length - 1):
        yield split_item(table[i-1], table[i]) 
```

然后只需调用`dict`生成器函数上的内置函数。

```
>>> dict(generate_tuples(table)) 
```

既然你说你已经用 for 循环写了这个，我猜你已经`split_items`写了一个函数。

### 让它快速

这是Ian Ozsvald 编写[的高性能 Python](http://ianozsvald.com/HighPerformancePythonfromTrainingatEuroPython2011_v0.2.pdf)指南，它可以帮助您尝试其他方法来提高处理速度。（感谢@AndrewWalker[在此处的 SO 帖子](https://stackoverflow.com/questions/11108869/optimizing-python-distance-calculation-while-accounting-for-periodic-boundary-co)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:51:11.627

这就是你所追求的吗？

```
dict( (t.rsplit(':', 3)[0], t) for t in table ) ) 
```

# jquery - 使用 jQuery 仅显示当前项目 div

> ID：11108843
> 
> 赞同：1
> 
> 时间：2012-06-19T20:25:33.693
> 
> 标签：jquery

我的 jQuery：

```
$(document).ready(function() {
    $('li').hover(function () {
        $(this).children('div:first-child').show();
    }, function () {
            $( this ).find('div').hide();
    });
}); 
```

我的 HTML：

```
<ul>
    <li>Item 1</li>
    <li>Item 2 <div class="action hide">New | Delete</div>
        <ul>
            <li>Item 2.1</li>
            <li>Item 2.1 <div class="action hide">New | Delete</div></li>
        </ul>
    </li>   

</ul> 
```

当我在第 2.1 节中移动鼠标时，它也显示了`<div class="action hide"> New | Delete </ div>`第 2 项，我不想显示，我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:36:07.540

根据您的整体情况，这样的事情相当有效：

```
var $last_action;
$('li').hover(function() {
    $last_action = $('div.action:visible').length ? 
                   $('div.action:visible') : 
                   $last_action;
    $last_action && $last_action.hide();
    $(this).children('div:first-child').show();
}, function() {
    $last_action && $last_action.show();
    $(this).find('div').hide();
});​ 
```

## [看演示](http://jsfiddle.net/BChT9/)

# ruby-on-rails-3 - Rails respond_with -- 为什么 POST 返回 URL 而不是数据？

> ID：11108844
> 
> 赞同：19
> 
> 时间：2012-06-19T20:25:34.830
> 
> 标签：ruby-on-rails-3, json, rest, respond-to

这是一个“为什么它会这样工作”的问题，而不是“我如何让这个工作”。

我的应用程序正在调用返回 JSON 的第三方 REST API，并将结果作为我*自己的*JSON API 的一部分返回。

我使用的是 Rails 3`respond_to`和`respond_with`方法；在`GET`请求的情况下，这可以按我的预期工作，只是通过 JSON。

在 的情况下`POST`，它会做更多的事情，包括从返回的对象中创建一个 URL 以传递一个`:location`选项。但由于我的对象只是 JSON（不是 ActiveRecord），我得到一个错误。

例如...

```
# POST /api/products.json with params id=:id
def create
  query_string = "#{user_id}&id=#{params[:id]}"
  @products = third_party_api_wrapper.products(query_string, 'POST')
  respond_with @products
end 
```

我的第 3 方 API 包装器发出一个 POST 请求，该请求返回正常，然后 Rails 返回一个 500 错误，记录如下：

```
NoMethodError (undefined method `{"response":{"message":"product 4e1712d9ec0f257c510013f8 selected"}}_url' for #<MyController> 
```

Rails 希望我的 @products 对象知道如何创建位置 URL。

澄清：`@products`第三方 API 返回的对象是纯 JSON —— 一个字符串，您可以看到嵌入在上面的错误日志消息中。发生此错误是因为 Rails 似乎希望对象更多——在 Rails 内部 API 支持中，它是一个 ActiveRecord 对象。

如果我用`respond_with`旧样式的 sytax 替换新的

```
respond_to do |format|
  format.json { render :json => @products }  # note, no :location or :status options
end 
```

然后一切正常。这就是我所做的，所以我没有“如何”的问题，而是有一个“为什么”的问题。

[Ryan Daigle](http://archives.ryandaigle.com/articles/2009/8/10/what-s-new-in-edge-rails-default-restful-rendering)关于介绍的帖子解释说，正在发生的事情是意料之中的。

我的问题是：**为什么**`respond_with`除了数据（和 HTTP 状态？）之外还有其他东西，而且显然只是为了`POST`.

我并不是说这是错误的，只是**想了解**Rails 实施的基本原理。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T04:46:23.893

**简介：Rails 的基本原理来自 HTTP 和 REST。**

（感谢您更新的问题。现在我理解了您的核心问题：“我并不是说这是错误的，只是想了解 Rails 实施的基本原理。”）

现在解释一下。Rails 行为的基本原理植根于接受 HTTP 和 REST 约定。

只是为了从您所读到的内容与我将要详细说明的内容联系起来，我想提一下[Ryan Daigle 关于默认 RESTful Rendering 的文章中](http://archives.ryandaigle.com/articles/2009/8/10/what-s-new-in-edge-rails-default-restful-rendering)的相关部分：

> 如果请求 :html 格式：
> 
> [删除了一些文字]
> 
> *   [在 PUT 或 POST 之后并且没有验证错误] 重定向到资源位置（即 user_url）

（[括号中的]文字是我添加的。）

> 如果请求了另一种格式（即 :xml 或 :json）
> 
> [删除了一些文字]
> 
> *   如果是 POST 请求，请在资源上调用 :to_format 方法并将其与 :created 状态和新创建资源的 :location 一起发送回”

让我用我的话说，Rails 认为是好的做法：

*   对于人类内容（例如 HTML），在 POST 或 PUT 之后，服务器应该告诉浏览器通过[303](http://en.wikipedia.org/wiki/HTTP_303)重定向到新创建的资源。这是一种常见的做法——非常有用，因为用户希望看到他们的编辑产生的更新。

*   对于机器内容（例如 JSON、XML），在 PUT 之后，服务器应该只呈现[201](http://en.wikipedia.org/wiki/HTTP_201#2xx_Success)。客户端，在这种情况下，是一个使用 API 的程序，可能决定停在那里。（毕竟，客户端指定了请求并得到了 201，所以一切都是 honky dory。）这就是为什么使用 201（成功）而不是 303（重定向）的原因。如果客户端想要请求新创建的资源，它可以使用 Location 标头查找它——但不应强制重定向。

在任何一种情况下，请注意新创建资源的位置是必需的。这就是为什么`@products`在上面的示例中需要同时包含数据和位置。

作为背景，我[在 201 Created 上的 W3C 页面上](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)分享了一些内容：

> 10.2.2 201 创建
> 
> 请求已完成并导致创建新资源。新创建的资源可以被响应实体中返回的 URI 引用，资源的最具体的 URI 由 Location 头字段给出。响应应该包含一个实体，其中包含资源特征和位置列表，用户或用户代理可以从中选择最合适的一个。实体格式由 Content-Type 标头字段中给出的媒体类型指定。源服务器必须在返回 201 状态码之前创建资源。如果无法立即执行该操作，则服务器应该使用 202（已接受）响应来响应。

我希望这有助于解释基本原理。我的（天真的？）理解是这个基本原理在 Web 框架中被广泛接受。从历史上看，我怀疑 Rails 是许多狂热的 REST 和面向资源的架构支持者的狂热实施基础（新词警报！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T23:55:47.987

@david-james 很好地回答了“为什么”。这只是一个简短的“如何”回答`respond_with`：

```
class Api::V1::UsersController < ApplicationController

  respond_to :json

  def create
    @user = User.create(...)
    respond_with @user, location: url_for([:api, :v1, @user])
  end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T20:39:44.780

要回答这个问题：“为什么 API 应该返回除数据（和 HTTP 状态？）以外的任何内容。我并不是说这是错误的，只是想了解其中的原理。”

我想不出什么好的理由。**更重要的是，除了**数据结构之外，我看不到 API 可以返回任何东西的任何方式！（这个问题对我来说没有意义！）

根据定义，API 调用*必须*返回一个数据结构。（它可能像字符串一样简单。它可能是 JSON。它可能是 XML。）它可以使用内容协商来决定格式。它可能是也可能不是严格的模式，但至少客户端库必须能够解析它。在任何情况下，API 文档都应该清楚地说明这一点并坚持下去。客户端库还能如何互操作？

我想我在这里错过了重点，这似乎太明显了。（我怀疑您在上面的代码中遇到了另一个问题。）

# mysql - 识别或非识别关系中的子表是哪个？

> ID：11108846
> 
> 赞同：5
> 
> 时间：2012-06-19T20:25:42.727
> 
> 标签：mysql

在表之间的识别和非识别关系的上下文中，MySQL 的文档将很多表称为父表和子表。

如何确定哪个表是父表，哪个表是子表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:26:23.030

子表（AKA[弱实体](http://en.wikipedia.org/wiki/Weak_entity)）是主键属性***依赖***于另一个表的表，因此子表由它所依赖的表（父表）中的行*标识*或*部分标识。*如果没有父表中的相应行，子表中的行就不能存在。

为了说明，让我们举一个我们都熟悉的简单且完全相关的例子：*家庭背景下的父母和孩子*。我们可以用这样的表来模拟这种关系：

![父子识别关系](../Images/c94ab561e85c432fada81cf3a2fc99f4.png)

在上面的模型中，`Parents`表中的每一行都由一个***唯一标识***`SSN`。是每个父级的`SSN`固有且唯一的属性，因此它是独立的或“强”实体，因为它不依赖另一个表来定义其身份。

但是，子*项需要*父项才能存在（`Parent_SSN` ***必须***`SSN`引用表中的现有`Parents`项）。

请注意表中的复合主键 ( `Parent_SSN, Name`) `Children`。这意味着通过 和 的**组合***来*唯一***标识***子项。您不能仅根据该字段查询单个孩子，因为多个父母可能有同名的孩子。同样，您不能仅根据字段查询单个子项，因为一个父项可能有多个子项。考虑到这一点，孩子被他们的父母部分识别，从而***识别***关系。*`Parent_SSN` **`Name``Name``Parent_SSN`***

 ****但是，SSN 也不能唯一标识儿童吗？为什么是的，当然。让我们继续调整我们的模型以包括：

![父子非识别关系](../Images/ad70a94ab4ae75f0f2d14f15bdb5ed0b.png)

在这个版本的模型中，请注意我们已经`SSN`为`Children`. 儿童的**独特身份**现在由他们自己内在和独特的定义`SSN`。他们的身份**不再依赖**于`Parents`桌子。尽管该`Parent_SSN`字段仍然引用表`SSN`的，但它与孩子的*唯一身份*无关，因此父母与其孩子有***非识别关系，现在两个表都可以被认为是“强”独立实体。***`Parents`

 **顺便说一句，这个版本的模型比第一个版本有一些优势：

*   一个父级现在可能有两个或多个同名的子级，而先前模型中的[实体完整性](http://en.wikipedia.org/wiki/Entity_integrity)约束不允许这样做。
*   您可以允许该`Parent_SSN`字段包含`NULL`以说明您拥有有关孩子的数据但不知道他/她的父母是谁的事件。

在上述两种模型中，`Parents`表都被认为是表的父`Children`表。但是，在第二个模型中的**非标识**关系中，`Parents`它只是外键上下文中的父表，`Parent_SSN`因为在表中`Parent_SSN` *引用/依赖*，但在定义子项的实际身份时*没有*任何作用。`SSN``Parents`

 *为了说明为什么在决定哪些表是父/子表时上下文很重要，请考虑以下涉及循环依赖的示例：

![员工部门关系](../Images/756eef43800084776f8a5667771672a6.png)

在此示例中，员工和部门由他们自己的属性唯一标识，并且不会从其他表中派生其身份的任何部分。

在这里，我们有两个非标识关系：一个员工为一个部门工作（`DeptNo`在`Employee`表中），一个部门由一个员工管理（`ManagerSSN`在`Department`表中）。哪个是父表？...儿童桌？

这取决于上下文——你在说哪个外键关系？Department 表将被视为表上下文中的父表，`DeptNo`因为`Employee`它`DeptNo`引用*/依赖*于`Department`表。

但是，Employee 表将被视为表上下文中的父表，`ManagerSSN`因为`Department`它`ManagerSSN`引用*/依赖*于`Employee`表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:31:33.630

没有严格的规则可以确定表在关系中的角色。事实上，这就是关系模型的美妙之处和创新之处：没有层次结构。

通常，如果从某个表到另一个表存在硬依赖关系，则子角色或父角色由表的语义确定。示例：在 a `order`,`order_details`关系中，很明显那`order`是父母和`order_details`孩子。

在其他情况下，不清楚关系在关系中扮演什么角色。例子：`orders`和`customers`关系。如果您执行查询以获取`orders`属于某个特定的所有内容，`customer`则父级可能是`customers`并且`orders`是子级。但是您也可以进行查询以获取`customers`特定 的所有装运信息（以相关方式存储）`order`，在这种情况下，您可能会争辩说在此查询中它`order`是父节点，而子节点是子节点。`customers`

正如我之前所说，当关系模型在 70 年代后期被发明时，它相对于一种主流范式（分层数据模型）的主要优势之一是能够查找相关数据而不管它们的依赖关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:01:00.033

[这里](https://stackoverflow.com/a/762994/1446005)提出了一个很好的定义：

> 标识关系是子表中的行的存在依赖于父表中的行。(...) 形式上，“正确”的做法是使外键*[即父主键]*成为子主键的一部分。*******

# java - 弹出窗口上的android谷歌地图按钮

> ID：11108847
> 
> 赞同：1
> 
> 时间：2012-06-19T20:25:43.787
> 
> 标签：java, android, google-maps

好的。到目前为止，我所拥有的是一个带有谷歌地图的 Android 应用程序，我在上面放置了一堆图标，当点击这些图标时，会创建一个带有一些文本的弹出窗口。有没有办法在该弹出窗口上放置一个按钮？If this is not possible, is there some way to make a button appear when an icon on Google Maps is selected?

如果您想知道，我现在使用的代码如下所示。

```
itemizedOverlay.addOverlay(new OverlayItem(point, title, text));
//actually a whole bunch of OverlayItems, each with their own location and text
//but this is the general shape of it.
mapOverlays.add(itemizedOverlay); 
```

* * *

**编辑：**

GoogleMaps 应用程序的不同版本（在模拟器版本中检查自己）使用了不同类型的弹出窗口。第一个弹出窗口简单显示位置的标题（Android 2.3.3）。

![谷歌地图弹出窗口](../Images/1a27fa0536b8eaf86ff2384a0bfc2359.png)

第二个弹出窗口显示标题和箭头指示符。(安卓 4.0.3)

![带有箭头的 GoogleMaps 弹出窗口](../Images/55203c1b122ddcb6fbf723bb3bb57b3a.png)

足够有趣：我注意到两个弹出窗口都是**可点击**的，并启动了另一个显示该位置详细信息的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:48:49.823

项目[https://github.com/jgilfelt/android-mapviewballoons/](https://github.com/jgilfelt/android-mapviewballoons/)允许您为这些弹出窗口使用自己的自定义布局`mapviewballon`。

我没有使用按钮进行测试，但我不明白为什么我不会工作。

示例项目显示了以下类型的弹出气球。

![带箭头的弹出气球](../Images/3ab0b34bbd8baba42bda5406101ffb1d.png)

![带有图片的弹出气球](../Images/c3af24e9ec83997e2113bb5da34c5587.png)

![带有 X 的弹出气球](../Images/79a59daf599a4116b11783047bd0443a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:03:44.110

这是[另一个](http://crazyandroidian.blogspot.de/2011/10/custom-mapview-popup-in-android.html)创建自定义弹出气球的项目。该项目可以在文末下载。

![弹出气球](../Images/c0dd48fcaf288cda8ef596974fd67c9f.png)

# c# - 在 C# 中扩展 Int 以实现接口

> ID：11108848
> 
> 赞同：2
> 
> 时间：2012-06-19T20:25:52.603
> 
> 标签：c#

是否可以在 C# 中（我认为不是）扩展`int`以实现接口（不创建包装类）？

我有一个这样的界面

```
public interface IActionLoggerObject
{
    string GetForLogging();
} 
```

我希望（从概念上）能够做到这一点：

```
public class int:IActionLoggerObject
{
    string IActionLoggerObject.GetForLogging() { return "s"; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T20:27:17.737

> 是否有可能（我认为不可能）（在 c# 中）扩展“int”来实现接口（不创建包装类）？

不，您永远无法更改现有类型实现的接口。

目前尚不清楚您为什么要这样做，但几乎可以肯定的是，创建一个包装类是前进的方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:51:41.743

正如 MNGwinn 在他对 Jon Skeet 回答的评论中提到的那样，如果它们满足您的所有要求，您可以使用扩展方法。

所以，像这样：

```
public static class ExtensionMethods
{
    public static string GetForLogging(this int @this)
    {
        return "s"; // or maybe return @this.ToString();
    }
} 
```

会让你这样做。

```
string val = 3.GetForLogging(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T21:30:07.133

另一种扩展方法的可能性：

```
public interface IActionLoggerObject
{
    string GetForLogging();
}

public class ActionLoggerObjectInt : IActionLoggerObject
{
    public string GetForLogging()
    {
        return "s";
    }
}

public static class ExtensionMethods
{
    public static IActionLoggerObject AsActionLoggerObject(this int i)
    {
        return new ActionLoggerObjectInt();
    }
} 
```

用法：

```
Console.WriteLine(32.AsActionLoggerObject().GetForLogging());
LoggingMethod(32.AsActionLoggerObject()); 
```

# html - 固定导航栏在滚动时被图像滑块重叠

> ID：11108858
> 
> 赞同：0
> 
> 时间：2012-06-19T20:26:48.937
> 
> 标签：html, css, image, navigation, slider

我目前有一个顶部带有固定导航栏的网页。一切正常，除了我在网站内容中的图像滑块在向下滚动时与固定导航栏重叠，与网站的其余部分相反，在滚动时它会在栏下方重叠。我有位置：附加到滑块的相对样式和位置：固定到导航栏。我还尝试添加 z-index:1; 导航和 z-index:2 到滑块，这是有人在另一篇文章中推荐的 - 没有运气。

感谢您的帮助！

这是我的问题的 URL：[http ://www.kyniko.com/golf/](http://www.kyniko.com/golf/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:32:12.923

将导航栏的 z-index 更改为大于图像滑块上的 z-index。我去了你的网站，向下滚动直到图像位于导航栏的顶部，将导航栏上的 z-index 更改为 99，然后图像在它下方。

# jquery-mobile - Backbone.js 路由

> ID：11108860
> 
> 赞同：0
> 
> 时间：2012-06-19T20:26:52.710
> 
> 标签：jquery-mobile, backbone.js

我的html代码如下

```
<a href="#users/<%= id %>/History">hello</a> 
```

在骨干网我的路线如下

```
"users/:id/History": "historyPage", 
```

但是，当我单击链接时，该函数永远不会被调用，并且我不断收到错误加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:28:59.010

您是否使用 Backbone.history.start() 启动了历史系统？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:59:29.153

更改`href="#users/<%= id %>/History"`为`href="#/users/<%= id %>/History"`（即添加`/`后`#`） [http://jsfiddle.net/GX8WJ/3/](http://jsfiddle.net/GX8WJ/3/)

# python - 如何安装 pyodbc 64 位？

> ID：11108862
> 
> 赞同：8
> 
> 时间：2012-06-19T20:26:56.577
> 
> 标签：python, mysql, odbc, pyodbc

我的计算机上安装了 Python 2.7、MySQL 5.5、MySQL ODBC 连接器 5.1 和 pyodbc，运行 Windows 7、64 位...

唯一的问题是除了 32 位的 pyodbc 之外，所有东西都安装为 64 位。

使用easy_install下载pyodbc时，会自动下载32位版本。因此，当我尝试使用以下方式连接到我的数据库时：

```
cnxn = pyodbc.connect('DRIVER={MySQL ODBC 5.1 DRIVER};SERVER=localhost;DATABASE=test;UID=root;PWD=password') 
```

我得到错误：

```
Data source name not found and no default driver specified (0) (SQLDriverConnect) 
```

当我尝试使用以下命令指定 DSN 时：

```
cnxn = pyodbc.connect('DSN=dsn_name;etc...') 
```

我得到错误：

```
The specified DSN contains an architecture mismatch between the Driver and Application (0) (SQLDriverConnect) 
```

此链接告诉我这是由于 32/64 位不匹配，正如预期的那样：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms712362 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms712362(v=vs.85).aspx)

所以我有两个问题：

1）是否可以强制easy_install下载64位pyodbc，还是可以手动下载64位pyodbc？

2) 如果上述不可行，是否可以使用 Microsoft ODBC 数据源管理器窗口配置 DSN 以允许这样做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:30:46.403

[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/)有一个“非官方”的 Python 模块列表

PyODBC 是为 64 位编译的其中之一。

此外，请确保您使用的是正确版本的 ODBC 管理器。默认为 64 位驱动程序，但您可以使用 32 位驱动程序`%windir%\SysWOW64\odbcad32.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-15T07:04:35.593

I spend a lot time to find out why **pyodbc** can't see 64 bit ODBC driver because I confused between bitness of Windows. So I will make it clear that

Python 32 bit + pyodbc 32 bit (default when install from pip) will read driver from `%windir%\SysWOW64\odbcad32.exe`

Python 64 bit + pyodbc 64 bit (you have to download from [here](http://www.lfd.uci.edu/~gohlke/pythonlibs/)) will read driver from `%windir%\System32\odbcad32.exe`

# python - 在考虑周期性边界条件的同时优化 Python 距离计算

> ID：11108869
> 
> 赞同：12
> 
> 时间：2012-06-19T20:27:12.557
> 
> 标签：python, optimization, list-comprehension

我编写了一个 Python 脚本来计算 3D 空间中两点之间的距离，同时考虑周期性边界条件。问题是我需要对很多很多点进行这个计算，而且计算速度很慢。这是我的功能。

```
def PBCdist(coord1,coord2,UC):
    dx = coord1[0] - coord2[0]
    if (abs(dx) > UC[0]*0.5):
       dx = UC[0] - dx
    dy = coord1[1] - coord2[1]
    if (abs(dy) > UC[1]*0.5):
       dy = UC[1] - dy
    dz = coord1[2] - coord2[2]
    if (abs(dz) > UC[2]*0.5):
       dz = UC[2] - dz
    dist = np.sqrt(dx**2 + dy**2 + dz**2)
    return dist 
```

然后我这样调用函数

```
for i, coord2 in enumerate(coordlist):
  if (PBCdist(coord1,coord2,UC) < radius):
      do something with i 
```

最近我读到我可以通过使用列表理解来大大提高性能。以下适用于非 PBC 案例，但不适用于 PBC 案例

```
coord_indices = [i for i, y in enumerate([np.sqrt(np.sum((coord2-coord1)**2)) for coord2 in coordlist]) if y < radius]
for i in coord_indices:
   do something 
```

有没有办法为 PBC 案做同样的事情？有没有更好的替代方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T20:58:26.580

您应该`distance()`以一种可以对 5711 点上的循环进行矢量化的方式编写函数。以下实现接受点数组作为`x0`or`x1`参数：

```
def distance(x0, x1, dimensions):
    delta = numpy.abs(x0 - x1)
    delta = numpy.where(delta > 0.5 * dimensions, delta - dimensions, delta)
    return numpy.sqrt((delta ** 2).sum(axis=-1)) 
```

例子：

```
>>> dimensions = numpy.array([3.0, 4.0, 5.0])
>>> points = numpy.array([[2.7, 1.5, 4.3], [1.2, 0.3, 4.2]])
>>> distance(points, [1.5, 2.0, 2.5], dimensions)
array([ 2.22036033,  2.42280829]) 
```

结果是作为第二个参数传递的点`distance()`与 中的每个点之间的距离数组`points`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T20:52:15.400

```
import numpy as np

bounds = np.array([10, 10, 10])
a = np.array([[0, 3, 9], [1, 1, 1]])
b = np.array([[2, 9, 1], [5, 6, 7]])

min_dists = np.min(np.dstack(((a - b) % bounds, (b - a) % bounds)), axis = 2)
dists = np.sqrt(np.sum(min_dists ** 2, axis = 1)) 
```

这里`a`和`b`是您希望计算距离的向量列表， 和`bounds`是空间的边界（所以这里所有三个维度都从 0 到 10 然后换行）。`a[0]`它计算和`b[0]`、`a[1]`和之间的距离`b[1]`，以此类推。

我相信 numpy 专家可以做得更好，但这可能会比你正在做的快一个数量级，因为现在大部分工作都是在 C 中完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T17:35:34.220

我发现这`meshgrid`对于生成距离非常有用。例如：

```
import numpy as np
row_diff, col_diff = np.meshgrid(range(7), range(8))
radius_squared = (row_diff - x_coord)**2 + (col_diff - y_coord)**2 
```

我现在有一个数组 ( `radius_squared`)，其中每个条目都指定与数组位置的距离的平方`[x_coord, y_coord]`。

要循环数组，我可以执行以下操作：

```
row_diff, col_diff = np.meshgrid(range(7), range(8))
row_diff = np.abs(row_diff - x_coord)
row_circ_idx = np.where(row_diff > row_diff.shape[1] / 2)
row_diff[row_circ_idx] = (row_diff[row_circ_idx] - 
                         2 * (row_circ_idx + x_coord) + 
                         row_diff.shape[1])
row_diff = np.abs(row_diff)
col_diff = np.abs(col_diff - y_coord)
col_circ_idx = np.where(col_diff > col_diff.shape[0] / 2)
col_diff[row_circ_idx] = (row_diff[col_circ_idx] - 
                         2 * (col_circ_idx + y_coord) + 
                         col_diff.shape[0])
col_diff = np.abs(row_diff)
circular_radius_squared = (row_diff - x_coord)**2 + (col_diff - y_coord)**2 
```

我现在用矢量数学循环了所有的数组距离。

# c# - 使用 MVC 3 查询和显示数据连接到 Oracle

> ID：11108871
> 
> 赞同：0
> 
> 时间：2012-06-19T20:27:16.467
> 
> 标签：c#, asp.net, database, asp.net-mvc-3, oracle

我应该创建一个 MVC 3 页面（使用 Telerik）。
我之前在 C# .aspx 4.0 中创建了应用程序并且工作得很好，但我的公司更愿意将它作为 MVC 页面。

我从未使用过 MVC，但我认为我掌握了它的一般窍门；但是，我似乎在最简单的步骤上失败了。

我想连接到 oracle 数据库，查询数据库并最终在网格中显示数据。我不明白如何连接到数据库。（我通读了大约 50 个教程，但在这里找不到任何帮助我的东西）

在网络表单中，我会在后面的代码中写下这样的内容：

```
OleDBConnection dbConnection = new OleDbConnection();
dbConnection.ConnectionString = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;
dbConnection.Open();

OleDbCommand dbCommand = new OleDbCommand();
dbCommand.CommandText = "select * from table where id > 500"; 
```

等等。然后将数据写入数据表，例如。

所以我的问题是：我将如何在 MVC 中做到这一点？我知道我会把它放在模型中的某个地方，但这就是我到目前为止所得到的。

* * *

进一步讨论：

部分菜单：

```
...
.Items(item =>
{
item.Add().Text("Run Table Statistics").Action("Standard", "TableStatistics");
... 
```

现在我将创建一个文件夹 DLA 并向其添加一个新类：

```
public static IList<Tiles> GetTiles()
{
   //Write code to get data from your favorite db.(Oracle/SQLServer/..?) 
   //All you want to do is return a list of customer objects
} 
```

<- 你所说的对象是什么意思？我怎样才能检索对象？我打算通读数据库并将其添加到 DataTable 或类似的。

现在我将创建一个名为“TableStatisticsController.cs”的空控制器，并在其中放置：

```
public ViewResult Standard()
{
  Object Tiles=**YourDataAccessClass**.GetTiles().ToList();
  return View(Tiles);
} 
```

YourDataAccessClass 是什么意思，那是我在 DLA 中创建的类吗？

你说在我的强类型视图中？我想使用 Telerik Grid View，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:48:32.730

您的数据访问方法不必与**MVC Architecture**做任何事情。它（数据访问方法）可以是任何东西。`MVC`不关心您是否正在查询 SQLServer 数据库/Oracle 数据库。只需将您的数据访问方法包装到一个方法中，然后让您的代码（控制器中的操作方法）调用它。使用 viewModels/Models 左右将数据传递回您的视图...

假设您要包装您的数据访问代码，该代码返回这样的客户对象列表

```
public static IList<Customer> GetCustomers()
{
   //Write code to get data from your favorite db.(Oracle/SQLServer/..?) 
   //All you want to do is return a list of customer objects
} 
```

您可以像这样从您的 Action 方法调用它

```
public ActionResult GetCustomerList()
{
  var customers=YourDataAccessClass.GetCustomers().ToList();
  return View(customers);
} 
```

并在绑定到客户列表的强类型视图中

```
@model IList<Customer>    
@foreach(var item in Model)
{
    <p>@item.FirstName</p>
} 
```

**编辑：基于问题编辑**

> 你说的对象是什么意思？我怎样才能检索对象？我打算通读数据库并将其添加到 DataTable 或类似的。

您的模型/实体类的对象，例如客户/订单等。我不会返回数据表，而是返回一个填充的客户/订单对象。

> YourDataAccessClass 是什么意思，那是我在 DLA 中创建的类吗？

是的。那是对的。

> 你说在我的强类型视图中？我想使用 Telerik Grid View，可以吗？

是的，这是可能的。但我从来没有用过。您需要查看他们的文档。

我建议您下载一些[示例 MVC 应用程序](http://mvcmusicstore.codeplex.com/)并了解它是如何工作的。

# javascript - 如何从 .erb 视图文件中更新 ruby 变量？

> ID：11108873
> 
> 赞同：1
> 
> 时间：2012-06-19T20:27:28.703
> 
> 标签：javascript, jquery, ruby, sinatra, keyboard-shortcuts

我有一个非常简单的视图来显示“任务”。

用户输入输入后，我基本上想更新任务值。但是，我无法执行 ruby​​ 语句来更新 .erb 中的任务。

我不确定如何在输入输入后更新 .rb 文件中的值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:26:39.203

Ruby 代码在向用户提供页面之前运行，Javascript 代码在用户访问页面时在用户客户端中运行，因此您不能完全从 Javascript 运行 Ruby 代码。您可以做的是使用 Javascript 向您的 ruby​​ 服务器发送异步请求，这将获取变量并执行您想做的保存。

由于您使用的是 jQuery，请看一下它的 post() 和 ajax() 函数。( [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/) )

你可以做类似的事情

```
$.post("/my/handler", { name: "John" }, function(data) {
/* Do the updates on the page according to the data received from the server */ 
} ); 
```

然后你只需要设置你的 Rails 路由来处理到 /my/handler 的 POST 申请。（[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)可能有用）。

您将渲染的网页将是 $.post 回调函数（数据）上使用的数据，它不需要是“普通”网页，您可以渲染任何类型的文本数据，例如json。

查看[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)的“渲染 json”部分，因为它可能是在 js 上渲染您需要的数据的最有用的选项。

但请记住，如果这是一个用户会经常敲击键盘的应用程序，并且您需要快速处理它，那么每次他这样做时，您都将向您的服务器发出一个请求（这就像打开一个每次页面，只会更轻，因为您将只返回一小段文本而不是整个网页数据，但如果它有很多请求，它会增加您的服务器负载）。如果是这种情况并且会有很多同时用户，您可以考虑使用套接字构建您的应用程序以实现持久连接。

# javascript - 如何在 MVC 视图中呈现 XML 输出

> ID：11108876
> 
> 赞同：0
> 
> 时间：2012-06-19T20:27:32.727
> 
> 标签：javascript, xml, asp.net-mvc, razor

```
<header>
    <div class="content-wrapper">
        <div class="float-left">
            <p class="site-title">
                <a href="~/">ASP.NET Web API</a></p>
        </div>
    </div>
</header>
<div id="body">
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>
                    Calculator</h1>
            </hgroup>
        </div>
    </section>
    <section class="content-wrapper main-content clear-fix">
    <input id="id" type="text" />
    <p />
    <input id="Plus" type="button" value="+" /><input id="Minus" type="button" value="-" />
    <p />
    <input id="id2" type="text" />
    <p />
    ________________________________

    <p />
    <label id="answer"></label>
    </section>
</div> 
```

这是我的 cshtml 文档，我需要让标签答案显示一个值，从我单击加号开始，然后它会转到我的 api 并获取`/api/add?id=value&id2=value`，然后它只是获取 XML 文档，我对此 XML 文档无能为力。如何显示 XML 文档中的值以获取答案并且它不能使用 JSON，它必须是 XML 输出并且使用 javascript 是可以的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:59:17.400

如果你使用 jquery 你可以做

```
<script>

 $('#buttonID').click(function(e){
 e.preventDefault();
 $.ajax({

  url : "url/to/api?params=1",
  dataType : "xml",
  success : function(data){

   var dataAsXml = $.parseXml(data);

   var answer = $(dataAsXml).find("answerNode");

    $('#answerLabelID').text(answer);

  });   // end Ajax call added paren and semi
}); // end button click

</script> 
```

# javascript - typeof 函数修复/替代

> ID：11108877
> 
> 赞同：5
> 
> 时间：2012-06-19T20:27:37.200
> 
> 标签：javascript

`typeof`不能很好地工作，例如返回`typeof null`。`object`这种改进的内置或定制替代品有没有更好的替代品？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T20:29:19.543

请参阅[修复 JavaScript typeof 运算符](https://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/)。

简而言之，您可以使用此功能：

```
var toType = function (obj) {
  return ({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
}

toType(null);   // -> "null"
toType({});     // -> "object"
toType([]);     // -> "array"
toType("asdf"); // -> "string"
toType(/asdf/); // -> "regexp"
// etc. 
```

您应该查看这篇文章，详细了解它为何以这种方式工作以及您可以从中获得什么。它总是会返回一个字符串，就像`typeof`.

# javascript - 如何使用 div resize (jquery ui) 滚动文档？

> ID：11108879
> 
> 赞同：0
> 
> 时间：2012-06-19T20:27:42.100
> 
> 标签：javascript, jquery, jquery-ui, scroll, jquery-ui-resizable

我正在使用带有自定义句柄的 jquery 可调整大小的插件。我想在句柄到达窗口底部时向下滚动站点 - 理想情况下，当将 div 拖动到文档的可见区域之外时，可拖动插件的工作方式。我只沿 y 轴调整大小，使用“s”句柄。

**更新：** jsfiddle在这里可用：http: [//jsfiddle.net/yazgY/10/](http://jsfiddle.net/yazgY/10/)

到目前为止调整大小工作正常：

```
$(function() {
    $("#mask_container").resizable({handles: {'s': '#button'}});
}); 
```

html的基本结构是这样的：

```
<div id="mask_container" class="ui-widget-content">
    <div id="mask"></div>
    <div id="button" class="ui-resizable-handle ui-resizable-s"></div>
</div> 
```

我试图从负责滚动的可拖动代码中实现部分代码，但到目前为止没有运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:21:31.403

`scrollTop`在调整大小事件停止后，您可以使用该方法来实现该效果。尝试这个：

**JS**

```
$("#mask_container").resizable({
    handles: {
        's': '#button'
    },
    stop: function(event, ui) {
        var viewportHeight = $(window).height();
        var masContainerHeight = ui.size.height;

        if (masContainerHeight > viewportHeight) {
            $("html, body").animate({
               scrollTop: $(document).height() - $(window).height()
            });
        }
    }
}); 
```

演示：http: [//jsfiddle.net/yazgY/11/](http://jsfiddle.net/yazgY/11/)

# list - 如何在 Sharepoint 中获取为单个用户分配的所有任务（报告）

> ID：11108882
> 
> 赞同：1
> 
> 时间：2012-06-19T20:27:45.190
> 
> 标签：list, sharepoint, report, task

我在 windows server 2003 上运行 sharepoint 2007 服务器。

此 Sharepoint 包含多个站点，每个站点代表一个项目。在每个项目中都有任务列表

我需要获得一份报告或列表，关于在所有项目（站点）中为任何用户分配的任务

反正有这个吗？

# java - Spring 中的动态 Apache log4j

> ID：11108883
> 
> 赞同：0
> 
> 时间：2012-06-19T20:27:45.547
> 
> 标签：java, spring, spring-mvc, log4j

我有一个 Spring 3.1 MVC Web 应用程序在 Tomcat 7 和 Java 7 上运行。我现在有一个非常简单的日志记录设置。我正在使用`logging.xml`如下所示的配置文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="console" class="org.apache.log4j.ConsoleAppender"> 
        <param name="Target" value="System.out" /> 
        <layout class="org.apache.log4j.PatternLayout"> 
            <param name="ConversionPattern" value="%-5p %c{1} - %m%n" /> 
        </layout> 
    </appender>

    <logger name="org.springframework">
        <level value="warn" />
        <appender-ref ref="console" /> 
    </logger>

    <logger name="org.apache">
        <level value="warn" />
        <appender-ref ref="console" /> 
    </logger>

    <logger name="org.apache.jasper">
        <level value="warn" />
        <appender-ref ref="console" /> 
    </logger>

    <logger name="org.apache.catalina">
        <level value="info" />
        <appender-ref ref="console" /> 
    </logger>

    <root> 
        <priority value ="info" /> 
        <appender-ref ref="console" /> 
    </root>
</log4j:configuration> 
```

在我的代码中，我这样做：

```
Logger log = LoggerFactory.getLogget (ClassName.class);
log.info ("Info Message"); 
```

我现在要做的是能够即时更改日志记录级别，而无需重新启动 Tomcat 容器。我正在寻找可以放入 MVC 控制器并在我的 Web 应用程序中向某些用户公开的 Java 代码。我知道那里有很多，我正在寻找一个您认为对我有用的链接。如您所见，我的日志记录非常简单，我并不完全理解这些东西，所以我不确定什么对我有用，甚至从哪里开始。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:31:14.720

也许[此线程](https://stackoverflow.com/questions/4415467/can-we-change-the-logging-level-of-log4j-at-runtime)中描述的解决方案是您正在寻找的解决方案？

# css - SASS 多文件输出

> ID：11108887
> 
> 赞同：1
> 
> 时间：2012-06-19T20:28:00.513
> 
> 标签：css, sass

有没有办法从一个 scss 文件中输出多个 css 文件？

例子：

我有 default.sass，但我也想创建一个未缩小的 default.css 和缩小的 default.min.css。

我知道我可以通过打开两个命令提示符来做到这一点，但我希望我可以用命令将其淘汰。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T02:20:00.300

如果您使用的是 Windows，我有一个解决方案，虽然它有点笨拙。

制作 3 个批处理文件，都在同一个文件夹中。第一个将是您实际运行的文件，另外两个是它将使用`START`命令运行、抑制的程序。

```
@echo off
START "Regular CSS" /D%~dp0 /B "core.css.bat"
START "Minified CSS" /D%~dp0 /B "core.min.css.bat" 
```

“* CSS”将是窗口标题。必要的，但在这种情况下未使用。"/D%~dp0" 将工作目录设置为执行目录。“/B” 禁止创建新窗口并在当前控制台中运行它。“*.bat”是要运行的批处理文件。

第二个是您的普通 CSS 文件。

```
@echo off
sass --watch ./core.scss:../css/core.css --style expanded --cache-location ./.core.css-cache 
```

第三，你的缩小 CSS。

```
@echo off
sass --watch ./core.scss:../css/core.min.css --style compressed --cache-location ./.core.min.css-cache 
```

您*必须*指定单独的缓存位置，否则编译器会爆炸。

因为`START`除非用 标记，否则不会等待执行终止`/WAIT`，这将在一个控制台内同时分离两个批处理文件。`Ctrl`+`C`还会提示您分别终止两个会话。

显然，随意玩弄细节，但这个一般概念对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T01:20:28.127

我是用jetbrain做的。拥有不同风格的多个输出很简单。只需通过不同的参数添加其他文件观察器。

对于参数输入的标准输出：

```
--no-cache --update $FileName$:css\$FileNameWithoutExtension$.css --style expanded 
```

并在参数输入处缩小输出：

```
--no-cache --update $FileName$:css\$FileNameWithoutExtension$-min.css --style compressed 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-03T15:59:27.223

我遇到了同样的问题，在 Windows 上运行。我解决它的最简单方法是打开两个命令提示符。与`style=compressed`和 另一个与`style=expanded`。不是最舒适的解决方案，但它是最简单的解决方案。

# java - 将参数传递给方法的一种奇怪的方式

> ID：11108890
> 
> 赞同：7
> 
> 时间：2012-06-19T20:28:13.960
> 
> 标签：java, generics, parameters

我正在浏览[Exchange Web Services Java API](https://github.com/buckett/ews-java)代码，并看到了开发人员将参数传递给他们的方法的设计选择。愿你能帮助解释这项技术的好处——

方法要处理的类型在传递给方法之前由 Generic Wrapper 类封装，例如，如果方法要处理字符串，则将 new Param() 传递给定义为 Param 的方法跟随

```
class Param<T> {
  private T param; 
  public T getParam() { return param; }
  public void setParam(T param) { this.param = param }
} 
```

这是源代码的片段——该方法适用于 HttpWebRequest 对象。
调用者创建Param 的一个实例，即受HttpWebRequest 类的限制。然后将该实例传递给方法，正如您在方法签名中看到的那样——

```
protected HttpWebRequest emit(OutParam<HttpWebRequest> request) 
throws Exception {
   request.setParam(this.getService().prepareHttpWebRequest()); 
   OutputStream urlOutStream = request.getParam().getOutputStream();
   EwsServiceXmlWriter writer = new EwsServiceXmlWriter(this.service,urlOutStream);
   this.writeToXml(writer);
   urlOutStream.flush();
   urlOutStream.close();
   writer.dispose();

   request.getParam().executeRequest();
   if(request.getParam().getResponseCode() >= 400)
   {
      throw new Exception("The remote server returned an error:("+request.getParam().getResponseCode()+")"+request.getParam().getResponseText());
    }
    return request.getParam();
} 
```

那么为什么不直接传递 HttpWebRequest 对象呢——开发人员在整个代码库中反复使用这种模式，这让我认为这是有充分理由的。但我只是看不到好处......请赐教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:58:36.330

在方法入口处，包装的 HttpWebRequest 实例预计为空。这是一种通过 return 语句以外的方式返回实例的方法，即使在方法调用期间出现问题（例如，如果抛出异常）。这种模式在某种程度上等同`out`于 C# 中的关键字。它也可以用于返回一个对象 + 一个错误状态：

```
bool getGreetings(OutParam<Greetings> greetings) {
  if (aCondition) {
     greetings.setParam(new Greetings("Hello");
     return true; // everything's fine
   }
   return false;
} 
```

而不是写：

```
Greetings getGreetings() {
  if (aCondition) {
     return new Greetings("Hello");
  }
  return null; // caller will have to test a null condition to know it the operation was ok
} 
```

# php - 使用 array_multisort 对数组进行排序

> ID：11108891
> 
> 赞同：7
> 
> 时间：2012-06-19T20:28:15.600
> 
> 标签：php, arrays, multidimensional-array

我有以下数组：

```
$array = array(
        'note' => array(),
        'year' => array('2011','2010', '2012'),
        'type' => array('conference', 'journal', 'conference'),
    ); 
```

我使用以下函数使用字段类型和另一个数组对数组进行排序：

```
function array_multisort_by_order(array $array, $by, array $order)
{
    $order = array_flip($order);
    $params[] = $array[$by];
    foreach($params[0] as &$v) $v = $order[$v];
    foreach($array as &$v) $params[] = &$v; unset($v);
    call_user_func_array('array_multisort', $params);
    return $array;
} 
```

当我调用以下函数时，出现以下错误：

```
$array = array_multisort_by_order($array, 'type', array('conference', 'journal'));

print_r($array['type']); 
```

错误：

```
Warning: array_multisort(): Array sizes are inconsistent. 
```

我知道数组是不一致的。有没有更好的功能可以使用？

请检查：[键盘](http://codepad.org/fzXeORqq)

期望的输出：

```
Array
(
[note] => Array
    (
        [0] => 
        [1] => 
        [2] => 
    )

[year] => Array
    (
        [0] => 2011
        [1] => 2012
        [2] => 2010
    )

[type] => Array
    (
        [0] => conference
        [1] => conference
        [2] => journal
    )

) 
```

示例 2：

**大批**

```
 $array = array(
        'note' => array([0]=>'test1', [1]=>'test2'),
        'year' => array([0]=>'2011', [2]=>'2012'),
        'type' => array([0]=>'conference',[1]=>'journal', [2]=>'conference'),
    ); 
```

**期望的结果 2**

```
Array
(
[note] => Array
    (
        [0] => test1
        [1] => 
        [2] => tes2
    )

[year] => Array
    (
        [0] => 2011
        [1] => 2012
        [2] => 
    )

[type] => Array
    (
        [0] => conference
        [1] => conference
        [2] => journal
    )

) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:12:27.590

好的，所以，想到的第一个解决方案之一是添加空值以使它们保持一致：

```
function array_multisort_by_order(array $array, $by, array $order)
{
     $max = max(array_map('count',$array));
    //or, alternatively, depending on input (if there are no 'complete' subarrays):
    //$max = max(array_map(function($arr){return max(array_keys($arr));},$array))+1;

    //ADDITION: negative numeric keys:
    $min = min(array_map(function($arr){return min(array_keys($arr));},$array));
    $width = $max - min(0,$min);

    foreach($array as &$sub){
        // $addin = array_diff_key(array_fill(0,$max,null),$sub);
        // $addin changed for negative keys:
        $addin = array_diff_key(array_combine(range($min,$max),array_fill(0,$width,null)),$sub);
        $sub = $addin + $sub;
        ksort($sub);
    }
    $order = array_flip($order);
    $params[] = $array[$by];
    foreach($params[0] as &$v) $v = $order[$v];
    foreach($array as &$v) $params[] = &$v; unset($v);
    call_user_func_array('array_multisort', $params);
    //no closeures here:
    //foreach($array as &$sub) $sub = array_filter(function($a){return !is_null($a);},$sub);
    $filter = create_function('$a','return !is_null($a);');
    foreach($array as &$sub) $sub = array_filter($sub,$filter);
    return $array;
} 
```

# asp.net - ASP.NET：Request.Form 和中继器

> ID：11108896
> 
> 赞同：0
> 
> 时间：2012-06-19T20:28:32.070
> 
> 标签：asp.net, request.form

我在页面 A 上有文本框。这些文本框位于转发器内。我想在 B 页上访问它们的值。但是，使用 Request.Form 返回 Null。

```
 Dim condition4 As String = Request.Form("condition4")
        Dim condition3 As String = Request.Form("condition3")
        Dim condition2 As String = Request.Form("condition2")
        Dim condition1 As String = Request.Form("condition1")
        ''''''''''''''''''''''''''''''
        hcondition4.Value = condition4
        hcondition3.Value = condition3
        hcondition2.Value = condition2
        hcondition1.Value = condition1

        For ii As Integer = 1 To 4

            Dim CurrentCondition As HiddenField = FindControl("hcondition" & ii)
            Dim CurrentConditionValue As Decimal = CurrentCondition.Value
            Dim CurrentPrice As Integer = UsedPrice * CurrentConditionValue 
```

我已经尝试过作为字符串和作为十进制。仍然返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:36:05.653

Request.Form("[name"]) 将始终返回一个字符串。

ASP.Net 控件会自动分配唯一的 ID；您用于从 Form 集合中请求值的名称将不同于您为控件提供的 ID。

为确保您使用的是正确的名称，请检查 Request.Form.ToString() 以查找与您为每个文本框命名的名称相似的名称。

作为替代方案，您还可以在 Visual Studio 调试器中检查 Request.Form.AllKeys。

# android - 如何更改我的自定义 ContentProvider 在查询时使用的表？

> ID：11108897
> 
> 赞同：0
> 
> 时间：2012-06-19T20:28:33.270
> 
> 标签：android, android-contentprovider

所以我有我的习惯`ContentProvider`。目前只有`onCreate()`方法和`query()`方法可以做任何事情，所以我只会展示它。

* * *

```
@Override
public boolean onCreate() {
    openHelper = new SmartCalOpenHelper(getContext());
    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    database = openHelper.getWritableDatabase();
    return database.query("events_info", projection, selection, selectionArgs, null, null, null);
} 
```

* * *

当然，我有一个内部类来设置所有数据库信息。我不明白的部分是如何`events_info`根据哪个类使用它来动态更改表名，就像上面一样。我目前有它调用那个表，但我需要能够更改它才能重用它。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:38:58.477

解析`Uri`并提取您需要的任何信息，以确定呼叫者要求的信息类型。请参阅[相关文档](http://developer.android.com/guide/topics/providers/content-provider-creating.html#ContentURI)以获取更多指导。

# git - Git更新/替换文件夹和内容

> ID：11108902
> 
> 赞同：0
> 
> 时间：2012-06-19T20:28:56.047
> 
> 标签：git

我有一个包含文件和子文件夹的文件夹，我创建了一个分支，我一直在编辑这个文件夹并实际提交了这个（但尚未与主文件夹合并）。

但是，我认为如果我合并可能会遇到问题。

假设我的文件夹结构是这样的：

```
Folder 
  - Sub-Folder A 
    - File A1
    - File A2
    - File A3
  - Sub-Folder B
    - File B1
    - File B2
    - File B3 
```

现在我已经编辑成为：

```
Folder 
  - Sub-Folder A 
    - File A2 (Edited)
    - File A3
    - File A4
  - Sub-Folder C
    - File C1
    - File C2
    - File C3 
```

IE，文件A1已删除，文件A2已编辑，新文件A4，子文件夹B和所有内容已删除，新子文件夹C。

我担心提交似乎只是添加了新的和编辑的东西，并且当我合并时，删除/删除的东西仍然存在。

是这样吗？如果是这样我该如何解决？

我在想我应该从 master 创建一个临时分支， git rm -f 文件夹，将其合并回 master 以删除文件夹，然后将编辑合并到分支中。

这是一种有效/可行的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:37:18.087

您需要告诉 git 您已删除的文件。如果您执行 git status，它应该列出：A/A1、B/B1、B/B2、B/B3 已被删除。在本地重新创建了您的情况，然后删除了文件， git status 给出：

```
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   A/A4
#   new file:   C/C1
#   new file:   C/C2
#   new file:   C/C3
#
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    A/A1
#   deleted:    B/B1
#   deleted:    B/B2
#   deleted:    B/B3 
```

如果您对 A/A1、B/B1、B/B2 和 B/B3 中的每一个执行“git rm”（尽管文件不再存在于磁盘上）并提交这些更改，那么一切都应该没问题。

这有帮助吗？让我知道是否需要澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:20:47.570

您的主人的工作/更改分支是一个参考。如果您在工作分支中删除、更改、重命名并提交任何内容。Git 将以适当的方式合并所有内容。但重要的是你的工作和主分支喊我干净。

要进行清理，您只需要“git add”。和“git提交”。没有必要使用“git rm”进行正确的合并。

git status 像这样喊，在这个例子中我在我的删除分支中工作）：

```
git status
# On branch remove
nothing to commit (working directory clean) 
```

现在您可以切换到主分支：

```
git checkout master 
```

检查主人是否干净：

```
git status
# On branch master
nothing to commit (working directory clean) 
```

现在是合并到你的主分支的时候了

```
git merge remove
Updating 7989dd1..d28cdee
Fast-forward
 {B => A}/demo2 |    0
 1 files changed, 0 insertions(+), 0 deletions(-)
 rename {B => A}/demo2 (100%) 
```

git status say 有相同的输出（合并前）

```
git status
# On branch master
nothing to commit (working directory clean) 
```

如果你愿意，你可以踢旧分支：

```
git branch -d remove
Deleted branch remove (was d28cdee). 
```

# css - 将 div 内的元素设置为 100% 高度

> ID：11108904
> 
> 赞同：6
> 
> 时间：2012-06-19T20:29:03.320
> 
> 标签：css

我想将 div 内的元素设置为 100% 的高度。元素（一个 ul 元素）必须设置为相对的。列表项设置为绝对值，但参考父元素。

见例子：http: [//jsfiddle.net/mbecker/ee78G/2/](http://jsfiddle.net/mbecker/ee78G/2/)

如何将绿色 ul 元素设置为 100% 高度？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T20:36:16.947

我删除了`height: auto !important`on `#main`。然后，我可以设置`height: 100%`为`#list`.

我不确定是否`height: auto`有必要。

[http://jsfiddle.net/KBHcs/](http://jsfiddle.net/KBHcs/)

为了给出更多解释，`height: auto !important`使内容定义了元素的高度，而 !important 覆盖了`height: 100%`. 在这种情况下，“sd”是唯一的东西，`ul`因为它们`li`是绝对定位的，因此不是文档流的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:34:29.913

您可以将#list 元素设置为使用绝对定位，然后设置顶部和底部坐标。这是您修改的 jsfiddle 的示例：

[http://jsfiddle.net/ee78G/11/](http://jsfiddle.net/ee78G/11/)

# azure - 尽管有连接字符串，SQL Azure 连接仍试图打开“master”

> ID：11108908
> 
> 赞同：3
> 
> 时间：2012-06-19T20:29:12.160
> 
> 标签：azure, connection-string, azure-sql-database

我正在尝试运行默认的“欢迎使用 ASP.NET MVC！” Azure 上的 MVC3 应用程序，通过 ASP.NET 通用提供程序将 SQL Azure 用于 ASP.NET 成员存储。我有一个名为“MyDatabase”的 SQL Azure 数据库，其中有一个新的登录名和用户，都称为“MyUser”。用户与登录绑定，并被赋予了 MyDatabase 的 dbo_owner 角色。MyDatabase 设置为管理门户中 Web 角色的链接资源。

该站点在 Azure 上显示良好，但尝试任何数据库操作时，我的数据库连接失败：

> 无法打开登录请求的数据库“master”。登录失败。用户“MyUser”登录失败。

寻找答案，通常的反应是在连接字符串中设置“数据库”参数。我确实做到了这一点，但它仍然在不断尝试“大师”。就好像它被忽略了：

```
Server=tcp:myserver.database.windows.net,1433;Database=MyDatabase;User ID=MyUser@myserver;Password=mypassword;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;MultipleActiveResultSets=True 
```

我已经排除的其他事情：

*   我 RDP 加入我的 Web 角色并确认此连接字符串出现在我的 Web.config 中。
*   我尝试了“初始目录”而不是“数据库”，但结果相同。
*   可能很重要：当我将“连接到数据库：”设置为“MyDatabase”时，SSMS 连接到我的数据库，但如果我将其保留为默认设置并输入“Database=MyDatabase;”，则会失败并出现相同的错误。在附加连接参数中。我不确定那是什么意思？

这里可能是一些新手错误 - 我还应该检查什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T13:22:53.230

查看异常的堆栈跟踪有助于解决这个问题：

> ...在 System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(...) 在 System.Data.SqlClient.SqlProviderServices.DbDatabaseExists(...) 在 System.Data.Objects.ObjectContext.DatabaseExists() 在 System.Web。 Providers.Entities.DatabaseCreationHelper.DatabaseExists(...) 在 System.Web.Providers.ModelHelper.CreateMembershipEntities(ConnectionStringSettings 设置) 在 System.Web.Providers.DefaultMembershipProvider.Membership_CreateUser(...) ...

由于我使用的是新数据库，因此 ASP.NET 通用提供程序正在尝试创建成员/角色表，并且由于某种原因实际上确实需要使用主数据库来完成此操作。我向 master 添加了一个新用户，绑定到我的登录名，并确保它具有“dbmanager”角色，以便它可以在需要时创建表。

我不是 100% 确定它为什么需要通过 master，但是堆栈跟踪使它看起来这样做是为了检查你给它的数据库是否真的存在。（如果您知道最终答案，请继续评论！）

# android - 避免在 TextView 中回车

> ID：11108915
> 
> 赞同：0
> 
> 时间：2012-06-19T20:29:30.043
> 
> 标签：android, textview, width

我有一个简单的 TextView，我希望它自动定义字体大小以防止返回。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:31:41.870

这是我过去使用过的一个组件：

[自动缩放 TextView 文本以适应边界](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)

此文本视图将根据其中文本的大小调整字体大小。尝试一下

# windows - Cygwin cygdrive 与文件系统不同步

> ID：11108927
> 
> 赞同：-1
> 
> 时间：2012-06-19T20:30:01.053
> 
> 标签：windows, cygwin

我正在尝试使用 cygwin bash 将文件复制到 C:\Windows\System32。当我将文件复制到此文件夹时，它们会在我`ls`在目录中运行时出现，但 explorer.exe 不显示这些文件，并且 cmd.exe 也不显示这些文件。

发生了什么？我觉得这会导致未定义的行为，因为我正在玩 DLL。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:35:01.350

试着把它们放在这里：

```
/cygdrive/c/Windows/Sysnative 
```

它可能与系统重定向有关。见[http://cygwin.com/ml/cygwin/2011-03/msg00842.html](http://cygwin.com/ml/cygwin/2011-03/msg00842.html)

# performance - 加速使用 WHERE IN 过滤的动态 SQL 查询

> ID：11108928
> 
> 赞同：1
> 
> 时间：2012-06-19T20:30:01.413
> 
> 标签：performance, tsql, join

考虑以下数据表：

```
CREATE TABLE Person
(
    PersonId int PRIMARY KEY
)

CREATE TABLE PersonData 
(
    PersonId int, -- with foreign key to person table
    DateKey Date,
    Fact1 int,
) 
```

我可以执行这样的查询，它将聚合 Fact1，按 DateKey 分组

```
SELECT DateKey, SUM(Fact1) 
FROM PersonData
GROUP BY DateKey 
```

现在假设我想按 personId 过滤并显示 id 为 1 2 和 3 的人的数据。我可以这样做：

```
SELECT DateKey, SUM(Fact1) 
FROM PersonData
WHERE PersonId IN (1, 2, 3)
GROUP BY DateKey 
```

如果我有大量要过滤的 personId，这会分崩离析。即 WHERE T2.PersonId IN (1, 2, 3, 4, 5 ... 1000+)

考虑到要过滤的大量 PersonId，如何提高性能？

**更新**

虽然上面的例子是我的数据结构的简化，但希望它是一个准确的类比。

示例查询和时间影响，给定大约 3200 万行 PersonData 和 2000 个唯一人员：

*   过滤单个 PersonId：100ms
*   完全没有过滤器：750 毫秒
*   过滤 1500 个 PersonId：**2300 毫秒**

注意：对于所有查询，我还执行 WHERE 子句以将 DateKey（日期维度表的外键）限制为 1 个月的时间跨度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:19:58.693

难道大部分时间实际上都花在了“group by”子句上吗？

看看执行计划就知道了。

我想知道增加人员 ID 列表是否实际上导致 DateKey 排序成本线性增加。如果是这样，请在 DateKey 列上添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:03:53.160

尝试这个：

```
declare @beginValue int = 1,
        @endValue int = 87;

--Only work if you need a interval of numbers (example: 1 to 87, in Person table)
SELECT pdt.DateKey, SUM(pdt.Fact1)
FROM PersonData AS pdt
     INNER JOIN Person AS per ON pdt.PersonId = per.PersonId
WHERE per.PersonId BETWEEN @beginValue AND @endValue
GROUP BY pdt.DateKey; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T21:07:09.227

您可以尝试将所有 PersonID 加载到 SQL 中的表中。然后使用：

```
SELECT DateKey, SUM(Fact1) 
FROM PersonData D
WHERE exists (SELECT 1 from PersonIDTable I where d.PersonID = I.PersonID)
GROUP BY DateKey 
```

这通常会使查询运行得更快！

# r - 不透明图例框

> ID：11108935
> 
> 赞同：6
> 
> 时间：2012-06-19T20:30:32.240
> 
> 标签：r, plot, transparency, legend

我想知道如何在 R 中为我的情节创建一个不透明的图例框？我试过使用 bg="grey"，但图表上的线条仍然覆盖了图例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T20:33:25.473

您必须使用 bg="white" （或任何其他颜色，就像您已经做过的那样）*并且*您必须在绘制线/点/网格/等之后绘制图例。

例如：

```
plot(...)
lines(...)
grid(...)
legend(...) # legend has to be the last command! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-28T10:31:46.480

我知道这是一个老问题，但除了迄今为止提出的方法之外，还有另一种方法可以做到这一点。

创建图例时只需使用以下语句：

```
bg=make.transparent("red",0.8) 
```

# ruby-on-rails - 带有分类器 gem 的无效编码符号

> ID：11108942
> 
> 赞同：7
> 
> 时间：2012-06-19T20:30:55.410
> 
> 标签：ruby-on-rails, ruby

当我将项目添加到我的 Postgres 数据库时，一切似乎都运行良好。在不进行任何更改的情况下，每当我的应用程序中的任何地方启动 Madeleine 时，我的 Rails 应用程序都会开始失败：

```
EncodingError in EventsController#update
  invalid encoding symbol
  app/controllers/events_controller.rb:137:in `update' 
```

137是问题行：

```
135 def update
136   @event = Event.find(params[:id])
137   m = SnapshotMadeleine.new("bayes_data")
      ....
    end 
```

不过，我可以在控制台中对事物进行分类，这也是让我感到困惑的部分原因。在控制台中，这工作正常：

```
m = SnapshotMadeleine.new("bayes_data") {}
   => #<Madeleine::DefaultSnapshotMadeleine:0x000...
m.system
   => #<Classifier::Bayes:0x000...
m.system.classify "test" 
```

我正在使用最新的分类器 gem 和 Madeleine。

我认为它试图加载的快照中的某些内容已损坏，因此我将其删除，但这并没有解决问题。这是我的倒数第二张快照（现在是最近的一张）：

```
a = File.read('bayes_data/000000000000000000041.snapshot')
a.encoding
   => #<Encoding:UTF-8>
a.valid_encoding?
   => true 
```

不知道这里发生了什么。我看到一些使用 Ruby 1.9.3-p125 的人也有类似的问题，所以我升级到了最新的稳定版本 1.9.3-p194，但这也没有帮助。

这是 Classifier 文档的链接，其中还提到了如何使用 Madeleine：[http ://classifier.rubyforge.org/](http://classifier.rubyforge.org/)

我真的很感激对这里发生的事情的任何见解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T03:43:20.080

我不知道为什么标准的 Marshal 课程不起作用，但我使用效果很好

```
m = SnapshotMadeleine.new("bayes_data", YAML) do 
  b = Classifier::Bayes.new "Positive", "Negative
end 
```

接着

```
m = SnapshotMadeleine.new("bayes_data", YAML) 
```

与元帅有什么关系？不太确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:49:47.297

我在使用 mysql 适配器的 rails_admin gem 时遇到了问题，它不知道编码，也许你可以检查你的 postgres 适配器是否是，如果不是，试试另一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T11:00:33.407

您必须确保用于训练数据的字符串是 UTF-8 编码的。如果你正在训练数据集，一个丑陋的黑客是有

```
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8 
```

在你的脚本中。

# sql-server - 在while循环中将图像从硬盘插入SQL Server

> ID：11108943
> 
> 赞同：1
> 
> 时间：2012-06-19T20:30:55.280
> 
> 标签：sql-server, tsql, bulkinsert, varbinarymax

我在硬盘上的特定驱动器中有一些照片，这些照片都有`*.jpg`扩展名和数字名称。

例如 ：`1.jpg , 2.jpg , 5.jpg , ...`

我正在尝试将这些照片插入到具有此架构的表中：

```
CREATE TABLE Employees
(
    Id int NOT NULL,
    Photo varbinary(max)NULL
) 
```

第一步，我不知道这有什么问题：

```
DECLARE @i INT
SET @i = 1
WHILE (@i <=100)
    BEGIN
        INSERT INTO Employees (Id, Photo) 
            SELECT @i,  BulkColumn 
            FROM Openrowset( Bulk 'C:\Pictures\'+convert(nvarchar(5),@i)+'.jpg', Single_Blob) as EmployeePicture
            SET @i = @i + 1
    END
GO 
```

因为我得到一个错误：

> '+' 附近的语法不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:40:23.390

OPENROWSET(BULK ... ) 的 'data_file' 参数必须是带引号的字符串文字，不能是变量或表达式。我担心你必须使用动态 sql。

```
DECLARE @i INT
SET @i = 1
WHILE (@i <=100)
BEGIN
    DECLARE @SQL VARCHAR(MAX)
    SELECT @SQL = 'INSERT INTO Employees (Id, Photo)
        SELECT ' + convert(nvarchar(5), @i) + ', BulkColumn FROM OpenRowSet ( Bulk ''C:\Pictures\' +
        convert(nvarchar(5), @i) + '.jpg'', Single_Blob) as EmployeePicture'

    exec (@SQL)

    SET @i = @i + 1
END
GO 
```

# php - 更新数据库中的客户信息不起作用

> ID：11108945
> 
> 赞同：0
> 
> 时间：2012-06-19T20:30:59.463
> 
> 标签：php, mysql

我正在构建一个页面，管理员用户可以在其中更新客户的信息。我首先查询客户信息并将其显示在文本字段中。然后我可以为该客户输入我想要的任何新信息。当我在 sql 中执行更新命令时，它会将我带到显示更新成功的页面，但是当我回顾数据库时，客户信息并没有改变。

Edit-client.php（显示客户信息的页面）

```
<?php

//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//define username variable and sanitize
$username = clean($_POST['username']);

//Run query for selected user and store in an array
$result = mysql_query("select * from members where username='".$username."'");
$row = mysql_fetch_array($result);

//display all clients information in a form to edit
echo '<h1>'.$username.'</h1>';
echo '<form name="update-client" action="update-client.php" />';
echo '<table>';
echo '<tr><td>';
echo '<input type="hidden" name="member_id" value="'.$row['member_id'].'"';
echo '</td></tr>';
echo '<tr><td>';
echo 'Username: <input name="username" type="text" value="'.$username.'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Password: <input name="password" type="text" value="'.$row['password'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Business Name: <input name="bizname" type="text" value="'.$row['bizname'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Phone: <input name="phone" type="text" value="'.$row['phone'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Email: <input name="email" type="text" value="'.$row['email'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Website Address: <input name="url" type="text" value="'.$row['url'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Contact: <input name="contact" type="text" value="'.$row['contact'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Notes: <input name="notes" type="text" value="'.$row['notes'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Sales Representative: <input name="sales_rep" type="text" value="'.$row['sales_rep'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo '<input name="submit" type="submit" value="Edit" />';
echo '</td></tr>';
echo '</table>';
echo '</form>';

?> 
```

更新-client.php

```
<?php

//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//define variables
$member_id = $_POST['member_id'];
$username = $_POST['username'];
$password = $_POST['password'];
$bizname = $_POST['bizname'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$url = $_POST['url'];
$contact = $_POST['contact'];
$notes = $_POST['notes'];
$sales_rep = $_POST['sales_rep'];
$member_type = $_POST['member_type'];

//encrypt the password
$password = md5($password);

//Check for duplicate username
if($username != '') {
    $qry_uname = "SELECT * FROM members WHERE username='".$username."'";
    $result = mysql_query($qry_uname);
    if($result) {
        if(mysql_num_rows($result) > 0) {
            $errmsg_arr[] = 'Username already in use';
            $errflag = true;
        }
        @mysql_free_result($result);
    }
    else {
        die("Query failed1");
    }
}

//update customers information
$qry = "update members set username='".$username."',password='".$password."',bizname='".$bizname."',phone='".$phone."',email='".$email."',url='".$url."',contact='".$contact."',notes='".$notes."',sales_rep='".$sales_rep."',member_type='".$member_type."' where member_id='".$member_id."'";

//Check whether the query was successful or not
/*if(mysql_query($qry)) {
    header("location: update-success.php");
exit();
    }
else {
    die("Query failed2");
    }*/

echo $qry;

?> 
```

我的代码有问题吗？我正在使用 apache 服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:34:10.317

//检查重复的用户名

检查用户名和 ID，因为如果没有更改，用户名已经存在。

# xml - HttpWebRequest 是发出肥皂请求的正确方法吗？

> ID：11108947
> 
> 赞同：1
> 
> 时间：2012-06-19T20:31:13.913
> 
> 标签：xml, vb.net, soap

我在 vb.net/vs 2010 中使用了一些服务引用，但这是第一个需要证书和自定义肥皂头的服务引用。我获得了一个 WSDL 和请求 xml，我在soapUI 3.5 中成功测试了它。在 vb.net 中创建服务引用后，我无法弄清楚如何添加自定义肥皂头。

我看到了许多实现的示例`IClientMessageInspector`，但由于某种原因无法使它们中的任何一个工作。大多数与我对 Implements 关键字缺乏了解有关，但端点行为也存在问题。我已经为证书使用了一个端点行为，并且无法让两个端点行为在一个端点上工作。

我切换到 HttpWebRequest，但也无法让它工作。代码运行，但我从服务器收到类似的错误。错误是`"Remote server returned an error:(500) Internal Server Error".`我用Fiddler看实际的请求和响应，响应来自他们的数据电源服务器，`"TID:247456978.Catastrophic Error. Please call IAS Datapower Support [ 'dp:reject' executed - Unable to find metadata for 'long_url' ]".`开发者的响应是他们的系统运行正常，所以是我的问题。我同意，因为我可以使用soapUI 获得有效响应。

所以问题是，我做错了什么。下面的代码看起来是否正确。我是否走在正确的轨道上，还是应该放弃这种尝试并寻找另一种解决方案来在不使用服务参考的情况下发出肥皂请求。

```
 Public Shared Sub TryIt()
    Try
        Dim sSoapEnv As String = "<soap:Envelope>
           {Rest of soap envelope here}"
        sSoapEnv &= "</soap:Envelope>"
        'MsgBox(sSoapEnv)
        ' Create a request using a URL that can receive a post. 
        Dim request As HttpWebRequest = HttpWebRequest.Create("https://yada.yada.yada.com:443/restofurl")

        Dim cert As New X509Certificate2 
        cert.Import("T:\fullpathtocert\fw.hdnipa.com.p12", "cert_password", X509KeyStorageFlags.PersistKeySet)

        Dim cred As New NetworkCredential("gdebacke.fmcdmn.local", "domain_password")
        request.Credentials = cred 
        request.ClientCertificates.Add(cert)

        ' Set the Method property of the request to POST.
        request.Method = "POST"
        ' Create POST data and convert it to a byte array.
        Dim postData As String = sSoapEnv
        Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
        ' Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded"
        ' Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length
        ' Get the request stream.
        Dim dataStream As Stream = request.GetRequestStream()
        ' Write the data to the request stream.

        dataStream.Write(byteArray, 0, byteArray.Length)
        ' Close the Stream object.
        dataStream.Close()
        ' Get the response.
        Dim response As HttpWebResponse = request.GetResponse()
        ' Display the status.                   
        Console.WriteLine(response.StatusDescription)
        ' Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream()
        ' Open the stream using a StreamReader for easy access.
        Dim reader As New StreamReader(dataStream)
        ' Read the content.
        Dim responseFromServer As String = reader.ReadToEnd()
        ' Display the content.
        Console.WriteLine(responseFromServer)
        ' Clean up the streams.
        reader.Close()
        dataStream.Close()
        response.Close()
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

End Sub 
```

# twitter - Twitter bootstrap 响应式导航在打开和关闭后消失

> ID：11108949
> 
> 赞同：3
> 
> 时间：2012-06-19T20:31:23.617
> 
> 标签：twitter, twitter-bootstrap

Twitter Bootstrap 响应式导航存在问题。解释这一点的最好方法是分步进行。

去： http: [//library.buffalo.edu/redesign/html/findlibrarymaterials/](http://library.buffalo.edu/redesign/html/findlibrarymaterials/)

将设计大小调整到 768px 以下

通过右上角的按钮打开导航，然后将其关闭

现在将设计大小调整到 768px 以上

由于某种原因，在您扩大设计后导航会消失。刷新后又出现了。我确定这是我对 CSS 所做的事情，但我似乎无法弄清楚是什么。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:59:52.130

应用 'collapse' 类时，您的导航栏将被隐藏 - 即使删除了 'in' 类。尝试添加（或取消删除）这个：

```
.nav-collapse.collapse {
    height: auto !important;
    overflow: visible !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:40:20.967

我非常希望 eterps 的回答能解决我的问题，因为我的问题与问题中描述的完全相同。但是，由于某种原因，eterps 的回答对我不起作用。

在 Chrome 的 Inspect Element 工具上检查我的导航栏元素后，我发现我的导航栏具有以下属性：

```
display: none; 
```

对我来说，这就是修复它的原因：

```
.nav-collapse.collapse {
    display: block !important;
} 
```

无需进行媒体查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T14:30:32.440

作为 etaps，但使用媒体查询，因此当宽度 < $navbarCollapseWidth 时规则不适用：

```
@media (min-width: $navbarCollapseWidth + 1) {
  .nav-collapse.collapse {
      height: auto !important;
      overflow: visible !important;
  }
} 
```

我将 scss 与 Compass 一起使用，您可能需要使用 Less 语法。

# google-chrome - 如果 console.log(4) 在 Chrome 控制台中输出 undefined 是什么意思？

> ID：11108953
> 
> 赞同：9
> 
> 时间：2012-06-19T20:31:41.820
> 
> 标签：google-chrome, console

我用 Chrome 控制台写了一个简单的语句：

```
console.log(4) 
```

并收到输出：

```
4 
```

`undefined`

未定义的语句是什么意思？未定义的语句是否意味着正确执行？如果我通过单独的 html 文件执行该语句，然后查看控制台，输出仅为 4。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T20:56:48.127

是的`undefined`返回值`console.log(...)`。

您可以通过在控制台中定义两个函数来看到这一点，一个返回一些东西，另一个什么都不返回，例如：

```
function f1() {
  return 1;
}
function f2() {
  return;
} 
```

然后分别（手动）调用它们

```
f1(); // shows '1' 
```

和

```
f2(); // shows 'undefined' 
```

还要注意这些返回值字符串之前的小符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:37:34.707

我已经对其进行了测试，即使使用预设变量它也无法在我的 Safari 中工作：

```
i = 2;
console.log(i); 
```

这似乎解释了 WebKit（Chrome 和 Safari 的引擎）存在的错误： [链接](http://techblog.appnexus.com/2011/webkit-chrome-safari-console-log-bug/)

# c# - 如果未写入时间，如何在日期时间控件中添加当前时间

> ID：11108958
> 
> 赞同：2
> 
> 时间：2012-06-19T20:32:20.917
> 
> 标签：c#, asp.net, gridview, webforms, sqldatasource

我有一个`GridView`和`SqlDataSource`，

我有一个列类型：`DateTime`. 如果我只在 中键入日期`TextBox`，那么时间将是`00:00:00`。如果未指定，有什么方法可以自动添加当前时间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:49:52.253

当您仅在中键入日期时，`TextBox`您仍然可以提交并将当前时间添加到日期中。

```
DateTime inputDate = // However you are gathering the date ;
DateTime dateWithCurrentTime = inputDate.Add(DateTime.Now.TimeOfDay); 
```

DateTime 有一个`Add`函数可以让你添加一个`TimeSpan`来获取一个新`DateTime`对象。

如果您将当前时间 ( `DateTime.Now.TimeOfDay`) 添加到您收集的输入中，您将获得一个`DateTime`包含当前时间和输入日期的新对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:53:19.143

没有任何具体的代码，我只能模糊地回答你的问题，但这可能会给你一个想法。

**服务器端解决方案：** 全部在代码中：

```
// To get the Time of right now 
DateTime oNow = DateTime.Today;

// Get your entered Time assuming it is Entered YYYY/MM/DD
string sEnteredDate = DateTextBox.Text;

// Edit the String to get Year, Month, Day
string sEnteredYear = sEnteredDate.Substring(0, 4);
string sEnteredMonth = sEnteredDate.Substring(5, 2);
string sEnteredDay = sEnteredDate.Substring(8, 2);

// Create final DateTime
DateTime oDateForDb = oNow;

oDateForDb.Day = sEnteredDay;
oDateForDb.Month = sEnteredMonth;
oDateForDb.Year = sEnteredYear; 
```

现在 oDateForDb 应该有您想要的日期和当前的 hh:mm:ss。

此外，这整个概念应该与 Calender Extender 或类似的工作正常工作，以保证输入将是正确的 DateFormat fe YYYY/MM/DD

* * *

编辑：

**客户端解决方案**

[http://www.tizag.com/javascriptT/javascriptdate.php](http://www.tizag.com/javascriptT/javascriptdate.php)

这次只在 jscript 中执行与上述相同的操作。

# .htaccess - 所有 url 上的 PHP mod_rewrite

> ID：11108959
> 
> 赞同：1
> 
> 时间：2012-06-19T20:32:25.123
> 
> 标签：.htaccess, mod-rewrite

我希望你能提供帮助，我已经尝试了几个小时来理解 mod rewrite，但我似乎无处可去。

我想要实现的是一个 mod_rewrite，它将整个 url 作为一个 var，除非它以 '/images/.....' 等开头

我的想法是我的所有页面都在一个表中，然后从那时起找到并处理。

目前我有

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php?url=$1 
```

这在一定程度上有效，我可以使用 $_GET 获得的任何 URL 都很棒，但我不想使用 request_filename 条件，

如果 url == '/images/' 或 == /css/ 等，则在重写规则中排除 id

希望这是有道理的，我相信这很容易。另外，如果您对如何改进我试图实现这一目标的方式有任何想法，那么请告诉我。

干杯!

* * *

目前得到

```
RewriteEngine On
RewriteBase /

RewriteRule ^/images/ - [L]
RewriteRule ^/css/ - [L]
RewriteRule (.*) index.php?url=$1 
```

感谢 Alexander 但 $_GET['url'] == 'index.php'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:43:03.957

首先为这些目录放置一条规则并使用该`[L]`标志。

```
RewriteRule ^images/ - [L]
RewriteRule ^css/ - [L]
RewriteRule (.*) index.php?url=$1 
```

未经测试的替代方案也可能是：

```
RewriteCond %{REQUEST_URI} !^/images/
RewriteCond %{REQUEST_URI} !^/css/
RewriteRule (.*) index.php?url=$1 
```

# php - 在 php/mysql 中左加入带有数组的列

> ID：11108960
> 
> 赞同：1
> 
> 时间：2012-06-19T20:32:40.643
> 
> 标签：php, mysql, arrays, join, comma

我有几个表 1 联系人和多个数据

联系人有一个 ID 字段和一个名称字段，数据有一个称为联系人的字段（以及其他字段）。

例如联系人

```
ID - Name
1 - James
2 - Mark
3 - Doug 
```

例如数据

```
ID - Contacts - Data
1 - 1,3 - more data
2 - 2 - more data
3 - 2,3,1 - more data 
```

显然，逗号分隔的数字链接到联系人表中的几个人。如何从逗号分隔列表转换为人名。标准的左连接不起作用。

有没有办法我可以在原始查询中做到这一点，或者我是否必须在我原来的 while 循环内的 foreach 内添加一个 while？例如（以下也不起作用，但据我所知）：

```
//original query while {
        $contacts_array = array(implode(",",$db['Contacts'])); 
        foreach ($contacts_array as $contacts_id) 
        { 
            $contacts_query = "SELECT Name FROM data_contacts WHERE ID='$contacts_id'";
            $contacts_result = mysql_query ($contacts_query);
            $contactslist="";
            while($contacts=mysql_fetch_array($contacts_result)){
                $contactslist .= $contacts['Name'].", ";
            } 
        } 
echo $contactslist;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:35:39.817

我总是存储与单个行而不是逗号分隔值的多对多关系：

```
ID - Contacts
1 - 1
1 - 3
2 - 2
3 - 2
3 - 3
3 - 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:36:29.247

可以通过使用[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set). 但是，您真的应该按照 MrSlayer 的建议重新考虑您的表结构。这是存储多对多关系的正确的关系方式。

# vb.net - 使用 UseCompatibleTextRendering 循环表单控件

> ID：11108974
> 
> 赞同：0
> 
> 时间：2012-06-19T20:34:04.973
> 
> 标签：vb.net, forms

我正在尝试找到一种在表单上的每个控件上使用**UseCompatibleTextRendering属性的方法。**但是，当我使用以下代码时，它似乎不是一个选项：

```
For Each ocontrol As Control In Form1.Controls
    ocontrol.UseCompatibleTextRendering = True
Next 
```

**ocontrol**似乎没有该选项，但具有按钮的所有其他选项。如果我做**Buttion1.UseCompatibleTextRendering = True**那么它工作得很好。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:35:18.673

It is not a property of Control. Only Button, CheckListBox, GroupBox, Label, LinkLabel and PropertyGrid have the property. There's a good reason for that, only those controls display text that's rendered by Winforms instead of Windows.

Do consider that this property only exist to keep compatibility with apps that were started back in .NET 1.x. It is very unusual to want to fall back to GDI+ text drawing when you've got TextRenderer. Which renders text the same way as native Windows controls, like TextBox, ComboBox, ListView, TreeView, etc.

You'll want to set the application's default instead of setting it for every control. Project + Properties, Application tab, click the "View Application Events" button. Make the class look like this:

```
Partial Friend Class MyApplication
    Protected Overloads Shared ReadOnly Property UseCompatibleTextRendering() As Boolean
        Get
            Return True
        End Get
    End Property
End Class 
```

# c# - 实体框架不一致 - 在这里工作，不在那里

> ID：11108977
> 
> 赞同：3
> 
> 时间：2012-06-19T20:34:12.707
> 
> 标签：c#, linq, entity-framework

我首先使用现有数据库使用 EF 4.1 代码。我有一个看起来像这样的类：

```
class myClass
{
    [Key]
    [Column("SomeID", Order=0)]
    public int SomeID { get; set; }

    [Key]
    [Column("Dt", Order=1)]
    public DateTime StartDate { get; set; }

    public String SomeValue { get; set; }
    public int SomeOtherValue { get; set; }
} 
```

我正在尝试获取特定记录的最新值（即`SomeValue`, ） 。我对查询的第一次尝试是这样的：`SomeOtherValue``StartDate``SomeID`

```
(from x in myContext.myClassDbSet
where x.SomeID == myVariable
orderby x.StartDate descending
select x).FirstOrDefault() 
```

这工作正常，但我意识到它不是最佳的，所以我尝试将其更改为以下内容：

```
(from x in myContext.myClassDbSet
where x.SomeID == myVariable
      && x.StartDate == (from x2 in myContext.myClassDbSet
                         where x2.SomeID == x.SomeID
                         select x2.StartDate).Max()
select x).FirstOrDefault() 
```

LINQPad 为第二个查询生成的 SQL 可能比第一个在表上有适当索引的 SQL 更快（我愿意创建）。问题是第二个查询抛出了一条`SystemArgumentException`消息：

> 'System.Data.Objects.ObjectQuery'1[myClassDbSet]' 类型的对象无法转换为'System.Data.Entity.DbSet'1[myClassDbSet]' 类型。

这是在查询声明中抛出的，而不是在尝试执行它时。

最奇怪的是，不同类中的相同查询（字面意思是复制和粘贴）可以正常工作。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:48:09.417

您可能不会喜欢这个答案，但我认为如果您在优化 linq 输出的 sql 时遇到这么多麻烦，那么在 sql 中编写它会更容易。

# c - C 项目：使用共享源编译多个应用程序

> ID：11108979
> 
> 赞同：2
> 
> 时间：2012-06-19T20:34:28.260
> 
> 标签：c, makefile

我正在启动一个具有多个应用程序的项目。这些应用程序在源文件方面共享一些通用功能。每个应用程序都应该有自己的 make 文件，但能够从一个公共位置链接这些共享源文件。

为了说明这一点，这是我的目录布局：

```
project/
    lib/
        shared1/
            shared1.c
            shared1.h
        shared2/
            shared2.c
            shared2.h
    app1/
        app1.c
        app1.h
        makefile
    app2/
        app2.c
        app2.h
        makefile 
```

目前，其中一个 makefile 看起来有点像这样：

```
CC=gcc
XXXCFLAGS=-Wall -Wextra -pedantic -I../../lib/shared1
CFLAGS=-I. $(XXXCFLAGS)
DEPS = app2.h ../../lib/shared1/shared1.h
OBJ = ${DEPS:.h=.o}
LIBS=-lpthread

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

app2: $(OBJ)
    $(CC) -o $@ $^ $(CFLAGS) $(LIBS) 
```

1.  这是管理共享源的大致正确方法，还是有更好的方法。它们应该是单独编译的库吗？如果是这样，怎么做？

2.  这样的相对路径可以吗？

3.  我应该使用自动工具来做这样的事情吗？查看示例后，我看不到如何链接共享代码或库。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:13:05.510

这是布局源代码树的合理方式，尽管您可能会考虑将源文件和头文件分开。如果您想构建一个库（如果许多应用程序使用，例如`shared1`），您可以为它编写一个规则，并将该规则放在一个 makefile 中`shared1/`。有几种方法可以使用这样的规则，但在确定需要库之前不要担心。

路径是必要的邪恶。他们将 makefile 锁定到特定的目录布局，但你不能完全没有它们。你*能做*的就是把它们关起来：

```
SHARED1LIB = ../../lib/shared1
XXXCFLAGS=-Wall -Wextra -pedantic -I$(SHARED1DIR)
DEPS = app2.h $(SHARED1DIR)/shared1.h 
```

您对依赖项的使用有点奇怪。一方面，最好从源列表中派生对象列表，因为您可能有一个没有标头的源或没有源的标头：

```
SRCS = app2.c $(SHARED1DIR)/shared1.c
OBJ = ${SRCS:.c=.o} 
```

其次，您使*每个*目标文件都依赖于*所有*标头，这可能是矫枉过正。假设我们可以假设`foo.o`will 取决于`foo.h`，并且也`app2.o`取决于`shared1.h`; 那么我们可以写一个更好的规则：

```
%.o: %.c %.h
    $(CC) -c -o $@ $< $(CFLAGS)

app2.o: $(SHARED1DIR)/shared1.h 
```

如果你有很多对象并且这种方法太麻烦，有一种*非常*复杂的方法可以自动处理这些列表，但这是一种先进的技术，你最好不要尝试。

最后，如果您发现所有应用程序的 makefile 看起来都非常相似，您可以将所有常见的东西放在一个 makefile 中`project/`

```
SHARED1LIB = ../../lib/shared1
SHARED2LIB = ../../lib/shared2

CC=gcc
XXXCFLAGS=-Wall -Wextra -pedantic
CFLAGS=-I. $(XXXCFLAGS)
OBJ = ${SRCS:.c=.o}
LIBS=-lpthread

%.o: %.c %.h
    $(CC) -c -o $@ $< $(CFLAGS)

app%: $(OBJ)
    $(CC) -o $@ $^ $(CFLAGS) $(LIBS) 
```

然后应用程序的 makefile 可以如下所示：

```
SRCS = app2.c $(SHARED1DIR)/shared1.c

app2:
include ../Makefile

XXXCFLAGS += -I$(SHARED1DIR)

app2.o: $(SHARED1DIR)/shared1.h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:38:34.710

相对路径在项目中完全没问题...共享代码的一种更简单的方法是将头文件和库导出到一个公共位置，然后将驱动程序与它们链接起来。

这种方法在我的很多个人项目中使用，有时我使用 CMake，然后将所有应用程序目标链接到我自己的库。

# java - Java 泛型 - 通配符

> ID：11108982
> 
> 赞同：1
> 
> 时间：2012-06-19T20:34:35.653
> 
> 标签：java, generics, bounded-wildcard

我是 Java 新手，并且已经让自己陷入了一种情况，很明显我误解了它如何处理泛型，但是阅读教程和搜索 stackoverflow 并没有（至少到目前为止）让我更加清楚我怀疑我在滥用通配符。作为提醒，我有 C++ 背景，所以它如何处理模板可能会影响我处理这个问题的方式。

这是我使用代表性类继承的基本结构

```
abstract class PacketHeader{
   // some stuff
}

class TypeOfPacketHeader extends PacketHeader{
   // extended stuff
}

abstract class Packet<T extends PacketHeader>{
    T mHeader;
    // some methods treating T as a type of PacketHeader
    // some abstract methods
}

class TypeOfPacket extends Packet<TypeOfPacketHeader>{
    static TypeOfPacket obtain {
        return new TypeOfPacket();
    }
    // overriden abstract functions that call specific TypeOfPacketHeader methods on mHeader
}

interface PacketParser<T extends Packet<? extends PacketHeader>>{
T obtainPacket();
        void parse(T packet);
}

class ImplementedPacketParser implements PacketParser<TypeOfPacket>{
     TypeOfPacket obtainPacket(){
         return TypeOfPacket.obtain();
     }
     void parse(TypeOfPacket packet){
         // code that relies on TypeOfPacket specific functions
     }
} 
```

这似乎都是正确的（或者至少 eclipse 没有抱怨），当我尝试使用它们时似乎出现了问题。我的第一次尝试是：

```
class User{
    PacketParser mParser;

    User(PacketParser parser){
        mParser = parser;
    }

    void DoSomething(){
         Packet packet = mParser.obtainPacket();
         // do some stuff with the packet
         mParser.parse(packet);
    }
} 
```

并导致原始类型的警告。于是我试了...

```
class User{
    PacketParser<? extends Packet<? extends PacketHeader>> mParser;

    User(PacketParser<? extends Packet<? extends PacketHeader>> parser){
        mParser = parser;
    }

    void DoSomething(){
         Packet<? extends PacketHeader> packet = parser.obtainPacket();
         // do some stuff with the packet
         mParser.parse(packet);
    }
} 
```

但这会导致错误

PacketParser> 类型中的方法 parse(capture#9-of ? extends Packet) 不适用于参数 (Packet)

在这一点上，我已经决定我误解*了*泛型是如何工作的，所以我求助于 stackoverflow，希望能指出我出错的地方，并可能为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:45:29.013

我对您的代码进行了一些更改。现在正在编译。尝试使用它。

```
 abstract class PacketHeader {
    // some stuff
   } 
   class TypeOfPacketHeader extends PacketHeader {
        // extended stuff
    }

    abstract class Packet<T extends PacketHeader> {
        T mHeader;
        // some methods treating T as a type of PacketHeader
        // some abstract methods
    }

    class TypeOfPacket extends Packet<TypeOfPacketHeader> {
        static TypeOfPacket obtain() {
            return new TypeOfPacket();
        }
        // overriden abstract functions that call specific TypeOfPacketHeader
        // methods on mHeader
    }

    interface PacketParser<T extends Packet<? extends PacketHeader>> {
        T obtainPacket();

        void parse(T packet);
    }

    class ImplementedPacketParser implements PacketParser<TypeOfPacket> {
        public TypeOfPacket obtainPacket() {
            return TypeOfPacket().obtain();
        }

        private TypeOfPacket TypeOfPacket() {
            // TODO Auto-generated method stub
            return null;
        }

        public void parse(TypeOfPacket packet) {
            // code that relies on TypeOfPacket specific functions
        }
    } 
```

您的用户类别。

```
class User{
    private PacketParser mParser;

    User(PacketParser parser) {
        mParser = parser;
    }

    void DoSomething() {
        Packet packet = mParser.obtainPacket();
        // do some stuff with the packet
        mParser.parse(packet);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:47:06.533

在您的`User`代码中，编译器不知道该`? extends Packet<? extends PacketHeader>`字段与局部变量`mParser`的类型相同。`Packet<? extends PacketHeader> packet`

`User`您需要通过使泛型绑定将使用的数据包类型：

```
class User<T extends Packet<?>> {
    PacketParser<T> mParser;

    User(PacketParser<T> parser){
        mParser = parser;
    }

    void DoSomething(){
         T packet = parser.obtainPacket();
         // do some stuff with the packet
         mParser.parse(packet);
    }
}

// and then when instantiating your User, specify the packet type:
new User<TypeOfPacket>(new ImplementedPacketParser()) 
```

现在编译器知道`T`它看到的 s 代表相同的类型`Packet<?>`，而每次它看到`? extends Packet<?>`的可能是不同的子类型`Packet<?>`。

**编辑：**附加说明：接口声明`? extends PacketHeader`中不需要“” `PacketParser`，因为`Packet`该类已经将其限制`T`为`PacketHeader`及其子类型。

```
// ? is implicitly constrained to "extends PacketHeader" because of
// the way Packet's generic is defined
interface PacketParser<T extends Packet<?>> { 
```

# javascript - 添加新对象时循环和条件？

> ID：11108987
> 
> 赞同：0
> 
> 时间：2012-06-19T20:35:02.253
> 
> 标签：javascript

我尝试这样做：

```
posts[fbposts[fbpost].id] = ({
    name: fbposts[fbpost].from.name,
    link: "http://www.facebook.com/" + fbposts[fbpost].from.id,
    img: "http://graph.facebook.com/" + fbposts[fbpost].from.id + "/picture",
    message: fbposts[fbpost].message,
    to: ({
        name: name,
        link: link,
    }),
    created: timeDifference(Date.parse((fbposts[fbpost].updated_time))),
    sortvar: (Date.parse(fbposts[fbpost].updated_time)),
    comments: ({
        /* looping through the comments*/
        if (fbposts[fbpost].comments.count) {
            for (var comment in fbposts[fbpost].comments.data) {
                name: fbposts[fbpost].comments.data[comment].from.name;
                link: "http://www.facebook.com/" + fbposts[fbpost].comments.data[comment].from.id;
                img: "http://www.facebook.com/" + fbposts[fbpost].comments.data[comment].from.id; + "/picture";
                message: fbposts[fbpost].comments.data[comment].message;
                created: timeDifference(Date.parse(fbposts[fbpost].comments.data[comment].created_time));
            }
        }
    })
});
} 
```

但很明显，当我收到评论时，脚本会刹车，因为我不能在对象声明中运行循环和条件。我应该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:43:05.690

您应该创建一个传递必要参数的函数，并将其用于您的`comments`属性，例如：

```
comments: (/* return value from your function */) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:43:53.787

实际上，您可以使用闭包来执行此操作...

```
comments: function() { ... looping code ...; return data}(), 
```

这将做的是定义一个内联（单次使用）函数并立即调用它，结果返回有效的 javascript。

```
var x = {
    ten: 10, 
    thirty: function(){var a = 10; a += 20; return a}(), 
    fifty: 25+25}; 
```

x 现在是一个对象，如下所示：

```
ten: 10
thirty: 30
fifty: 50 
```

# mongodb - Mongo map reduce对文档树的查询

> ID：11108989
> 
> 赞同：0
> 
> 时间：2012-06-19T20:35:06.177
> 
> 标签：mongodb, mapreduce

我有一个现有的 mongo 数据库，其中集合中的所有文档都有一个父指针（例如[Parent Links](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB#TreesinMongoDB-ParentLinks)）。所以上树很容易，常见的情况下操作。

但是，我现在想编写一个 map reduce 作业，该作业从集合中的所有树根开始，并从每棵树的所有叶节点生成一些数据。所以map reduce作业的输出集合应该是一系列

```
{<root_id>, [<information from leafs associated with root_id>, ...]}. 
```

如果有任何例子将不胜感激。我什至打印树的第二级的简单尝试都失败了。我不能在地图函数中运行查询吗？

```
mapf = function() {
    db.collection.find({"parent": this._id}).forEach(
         // This doesn't seem to work
    )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:43:21.320

> 我不能在地图函数中运行查询吗？

有点，但不要。

关键问题之一是*“查询去哪儿了？”* . 该`db`引用是对本地数据库的引用，但这不适用于分片。

另一个问题是，即使它确实有效，你也会得到一个疯狂的工作指数，这真的很危险。（*你如何处理循环？*）

对于这类问题，我建议查看像 Neo4J 这样的图形数据库。

# ajax - 交互式图实现

> ID：11108990
> 
> 赞同：2
> 
> 时间：2012-06-19T20:35:06.503
> 
> 标签：ajax, html, graph

我目前正在尝试根据存储在 excel 文件中的一组原始数据在网站上实现图表。我只是不知道如何开始实施这一点。

我知道我将不得不使用 HTML5 和 AJAX 最有可能使图形交互。但据我所知，这是这样的。我有使用 AJAX 和 HTML 的经验，但我从未使用过 HTML5。所以我对canvas标签非常陌生。

在我的研究中，我遇到了一些工具，例如[http://www.rgraph.net/](http://www.rgraph.net/)，以使实施更容易。但是，这仅供个人使用，不能免费用于商业用途。所以我不得不自己想出这个。

任何人都可以给我一个好主意，从哪里开始，或者指出一些教程的方向来让球滚动。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:39:01.267

就交互式图表而言，我更喜欢使用[谷歌图表](https://developers.google.com/chart/interactive/docs/gallery)

这是它如何工作的演示：

```
 <html>
 <head>
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
 <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);

      function drawChart() {
      var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Work',     11],
      ['Eat',      2],
      ['Commute',  2],
      ['Watch TV', 2],
      ['Sleep',    7]
    ]);

    var options = {
      title: 'My Daily Activities'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script>
  </head>

  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

出来看起来像这样： ![图表演示](../Images/59e889d8f9f41c4099accde8ebe7c0e4.png)

Excel 可以将数据导出为 CSV 或 XML 文件，我知道您可以轻松地将其集成到谷歌图表中，而几乎没有使用[AJAX 调用](http://www.quirksmode.org/blog/archives/2005/12/the_ajax_respon.html)的编码经验。

**编辑：**此外，如果您发布有关数据的更多详细信息，也许是一个示例，我可以提供更多帮助。

# jsp - 构建动态 xPath

> ID：11108992
> 
> 赞同：0
> 
> 时间：2012-06-19T20:35:13.433
> 
> 标签：jsp, xslt, xpath, el, dynamically-generated

我必须根据我在使用表达式语言制作 JSP 的 XSL 文件中的请求属性来使 xPath 动态化。所以现在我有这个东西：

```
<xsl:variable name="xPath">@name='${categoryName}'</xsl:variable>
<xsl:for-each select="tar:products/category[$xPath]/subcategory"> 
```

但这不起作用。所以问题是如何解决这个问题并使 xPath 工作？

* * *

输入 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tar:products SYSTEM "products.dtd" >
<?xml-stylesheet type='text/xsl' href='products2HTML.xsl'?>
<tar:products xmlns:tar="http://www.epam.com/products"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.epam.com/products products.xsd ">
<category name="Electronics">
    <subcategory name="mp3">
        <product name="iPod 4g">
            <provider>Apple</provider>
            <model>Qd246</model>
            <dateOfIssue>11-11-2012</dateOfIssue>
            <color>white</color>
            <notInStock/>
        </product>
        <product name="Cowon">
            <provider>Cowon</provider>
            <model>sF223</model>
            <dateOfIssue>13-12-2012</dateOfIssue>
            <color>black</color>
            <price>13456</price>
        </product>
        <product name="IRiver">
            <provider>IRiver e30</provider>
            <model>Ir234</model>
            <dateOfIssue>13-12-2012</dateOfIssue>
            <color>black</color>
            <price>13456</price>
        </product>
    </subcategory>
    <subcategory name="Computers">
        <product name="iMac">
            <provider>Apple</provider>
            <model>Mm232</model>
            <dateOfIssue>20-02-2012</dateOfIssue>
            <color>silver</color>
            <notInStock/>
        </product>
        <product name="PC">
            <provider>Acer</provider>
            <model>Ae135</model>
            <dateOfIssue>22-11-2012</dateOfIssue>
            <color>black</color>
            <price>13456</price>
        </product>
    </subcategory>
</category>
<category name="Toys">
    <subcategory name="Electronical toys">
        <product name="Cat">
            <provider>UrkToy</provider>
            <model>cC246</model>
            <dateOfIssue>11-11-2012</dateOfIssue>
            <color>grey</color>
            <price>1100</price>
        </product>
        <product name="Dog">
            <provider>LatToy</provider>
            <model>Ld223</model>
            <dateOfIssue>03-12-2012</dateOfIssue>
            <color>white</color>
            <price>13456</price>
        </product>
    </subcategory>
    <subcategory name="Fabric toys">
        <product name="Bear">
            <provider>RusToy</provider>
            <model>BB122</model>
            <dateOfIssue>20-02-2012</dateOfIssue>
            <color>brown</color>
            <notInStock/>
        </product>
        <product name="Bird">
            <provider>BelToy</provider>
            <model>Bb110</model>
            <dateOfIssue>05-11-2012</dateOfIssue>
            <color>red</color>
            <price>500</price>
        </product>
    </subcategory>
</category>
</tar:products> 
```

* * *

我在上一页的请求中放入了参数`categoryName`，它已成功显示在我的页面上，所以问题不在其中。`xsl`以下是有关文件的更多信息：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:tar="http://www.epam.com/products"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.epam.com/products products.xsd ">
<xsl:output method="html" />
<xsl:param name="categoryName" select="'${categoryName}'"></xsl:param>
<xsl:template match="/">
    <table border="1">
        <tr bgcolor="#CCCCCC">
            <td align="center">
                <strong>
                    Subcategories
                            </strong>
            </td>
        </tr>
        <xsl:value-of select="$categoryName"/><!-- this string works -->
        <xsl:for-each select="tar:products/category[@name=$categoryName]/subcategory">
            <xsl:sort order="descending" select="count(product)"
                data-type="number" />
            <a href="controller?command=products&amp;name={@name}">
            <tr bgcolor="#F5F5F5">
                <td>
                    <xsl:value-of select="@name" />
                    (
                    <xsl:value-of select="count(product)" />
                    )
                </td>

            </tr>
            </a>
        </xsl:for-each>
    </table>
    <form method="post" action="/controller?command=back">
        <input type="submit" value="Back"/>
    </form>
</xsl:template>
 </xsl:stylesheet> 
```

* * *

预期输出，当请求参数`categoryName`等于`'Toys'`：

![在此处输入图像描述](../Images/dc3f89d0e9eccc5c62e8a94e77bbdc3e.png)

* * *

实际输出：

![在此处输入图像描述](../Images/a6fce039fb6ddfcb61decf3052d37d1c.png)

* * *

已解决

在我的 java 类中，我在转换之前将参数放入请求中，但只需将其放入转换器参数中：

```
transformer.setParameter("categoryName", name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:26:40.213

如果您确实需要动态构建 XPath，则需要使用扩展函数。例如，您可以使用[EXSTL 动态扩展功能](http://www.exslt.org/dyn/index.html)。

但是，查看您相当简洁的代码示例，我不确定在这种情况下您是否需要额外的复杂性。您能否将两行简化为以下内容：

```
<xsl:for-each select="tar:products/category[@name=$categoryName]/subcategory"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:41:49.323

一般来说，你做不到。但是有供应商特定的解决方案：

1.  Tim 提到的 EXSLT 是绝对正确的。（动态：评估（））
2.  XALAN 具有评估功能（请参阅：[在 XSLT 中使用动态 xpath](https://stackoverflow.com/questions/4377811/using-dynamic-xpath-in-xslt)）
3.  撒克逊有一个评估功能（[http://saxon.sourceforge.net/saxon7.9/extensions.html#evaluate](http://saxon.sourceforge.net/saxon7.9/extensions.html#evaluate)）

另请参阅 Dimitre 的回答：[dynamic xpath in xslt?](https://stackoverflow.com/questions/4630023/dynamic-xpath-in-xslt)

另请注意，XSLT 3.0 将具有和 evaluate() 函数 ( [http://www.w3.org/TR/xslt-21/#element-evaluate](http://www.w3.org/TR/xslt-21/#element-evaluate) )

最后，如果要评估的动态 XPATH 被限制为非常简单的形式（例如：由 / 运算符分隔的术语，没有轴和谓词），那么可以编写一个命名模板来执行动态 XPATH 评估。但是，当然，这个模板的外观很大程度上取决于您对表达式的简单约束。

## 例子：

获取您的示例动态路径：

```
<xsl:variable name="xPath">@name='${categoryName}'</xsl:variable> 
```

假设属性名称部分（本示例中的“名称”）和值部分（我认为您的意思是 $categoryName 而不是 ${categoryName} ）都是可变的，但整体形式是其他表达式，换句话说：@some- name='some-string-value' 是固定的。然后你可以像这样解析路径表达式：

```
<xsl:variable name="name" select="'name'" /><!-- or use another computed value. -->
<xsl:variable name="value" select="'my-category-name'" /><!-- or use another computed value. -->
<xsl:for-each select="tar:products/category[@*[name()=$name][.=$value]]/subcategory"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:56:37.993

总是很难回答用“想象的”代码编写需求的问题——即，用不完全是 XSLT 的语言编写的代码。所以这个答案假设我已经正确地想象了你想要做什么。如果是这种情况，请替换：

```
<xsl:variable name="xPath">@name='${categoryName}'</xsl:variable>
<xsl:for-each select="tar:products/category[$xPath]/subcategory"> 
```

这样：

```
<xsl:for-each select="tar:products/category[@name = $categoryName]/subcategory"> 
```

对于更一般的问题，XSLT 中没有标准工具可以从字符串动态生成 XPath 表达式。但是许多产品提供了扩展功能来实现这一点：例如，参见 saxon:evaluate()。

# c# - 单击项目时如何更改数据模板？

> ID：11108993
> 
> 赞同：1
> 
> 时间：2012-06-19T20:35:22.363
> 
> 标签：c#, wpf, xaml

我看起来像这样`ItemsControl`：`DataTemplate`

![在此处输入图像描述](../Images/82316dad8fd8a12fe453e9c98613d9b2.png)

我想在用户单击项目时达到效果 - 它垂直扩展并显示更多信息。

我在想的唯一方法是将其更改为并为选定视图和常规视图`ListBox`创建 2 ？`DataTemplates`

但我宁愿`Grid`在我的虚拟机上注册单击并翻转属性以展开此框。`Grid`当用户点击MVVM 方式时，有什么方法可以注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:42:44.420

`MouseDown`您可以为事件使用附加行为。
请参阅以下问题：[WPF/MVVM - 如何处理 ViewModel 中的 TreeViewItems 双击？](https://stackoverflow.com/questions/4497825/wpf-mvvm-how-to-handle-double-click-on-treeviewitems-in-the-viewmodel)

在你的情况下，它看起来像这样

```
<ItemsControl ItemsSource="{Binding ...}">
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="commandBehaviors:MouseDown.Command"
                    Value="{Binding YourItemClickCommand}"/>
            <Setter Property="commandBehaviors:MouseDown.CommandParameter"
                    Value="{Binding}"/>
        </Style>
    </ItemsControl.ItemContainerStyle>
    <!-- ... -->
</ItemsControl> 
```

*鼠标按下*

```
public class MouseDown
{
    public static DependencyProperty CommandProperty =
        DependencyProperty.RegisterAttached("Command",
                                            typeof(ICommand),
                                            typeof(MouseDown),
                                            new UIPropertyMetadata(CommandChanged));

    public static DependencyProperty CommandParameterProperty =
        DependencyProperty.RegisterAttached("CommandParameter",
                                            typeof(object),
                                            typeof(MouseDown),
                                            new UIPropertyMetadata(null));

    public static void SetCommand(DependencyObject target, ICommand value)
    {
        target.SetValue(CommandProperty, value);
    }

    public static void SetCommandParameter(DependencyObject target, object value)
    {
        target.SetValue(CommandParameterProperty, value);
    }
    public static object GetCommandParameter(DependencyObject target)
    {
        return target.GetValue(CommandParameterProperty);
    }

    private static void CommandChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        Control control = target as Control;
        if (control != null)
        {
            if ((e.NewValue != null) && (e.OldValue == null))
            {
                control.MouseDown += OnMouseDown;
            }
            else if ((e.NewValue == null) && (e.OldValue != null))
            {
                control.MouseDown -= OnMouseDown;
            }
        }
    }

    private static void OnMouseDown(object sender, RoutedEventArgs e)
    {
        Control control = sender as Control;
        ICommand command = (ICommand)control.GetValue(CommandProperty);
        object commandParameter = control.GetValue(CommandParameterProperty);
        command.Execute(commandParameter);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:19:09.707

我不确定我是否正确地关注了这个问题，但它是否类似于您正在寻找的 DataGrid RowDetails 功能？它显示所选项目的详细信息面板：

[http://wpftutorial.net/DataGrid.html#rowDetails](http://wpftutorial.net/DataGrid.html#rowDetails)

# c# - Parallel.ForEach 调试或单步执行

> ID：11108995
> 
> 赞同：21
> 
> 时间：2012-06-19T20:35:23.787
> 
> 标签：c#, debugging, parallel.foreach

有没有一种简单的方法可以逐步完成parallel.foreach？用断点调试它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-19T20:41:33.280

在调试期间，我经常将 my设置为设置为 1`Parallel.ForEach`运行`MaxDegreeOfParallelism`。这使得调试变得更加简单。

```
const bool forceNonParallel = true;
var options = new ParallelOptions { MaxDegreeOfParallelism = forceNonParallel ? 1 : -1 };
Parallel.ForEach(collection, options, item => 
{ //... 
```

但是，这无助于调试与竞争条件或数据同步相关的问题，实际上通常会隐藏或消除代码中的实际问题。

[使用 VS 2010 中的新工具（例如并行任务窗口](http://msdn.microsoft.com/en-us/library/dd998369.aspx)）或使用[调试多线程应用程序](http://msdn.microsoft.com/en-us/library/ms164746)中列出的各种技术（例如[切换线程](http://msdn.microsoft.com/en-us/library/bb157786)、在单步执行时锁定线程等）通常可以更轻松地调试这些问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-27T10:42:00.520

与此处的其他答案类似，我们在调试时将并行度设置为 1，但我们使用扩展方法执行此操作，例如：

```
public static ParallelQuery<TSource> AsDebugFriendlyParallel<TSource>(this IEnumerable<TSource> source)
{
    var pQuery = source.AsParallel();
    #if DEBUG
    pQuery = pQuery.WithDegreeOfParallelism(1);
    #endif

    return pQuery;
} 
```

然后，而不是使用`.AsParallel()`我们使用`.AsDebugFriendlyParallel()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-13T09:40:18.773

正如@PaulG 回答的那样，我认为最佳实践只是将`MaxDegreeOfParallelism`值设置为`1`. 然后通常`Parallel`也会像常规循环一样工作，如`For`, `Foreach`。这是在`Parallel`. 所以你不需要在常规循环和`Parallel`.

```
Parallel.For(0, itemsList.Count, new ParallelOptions { MaxDegreeOfParallelism = 1 }, i =>
{
    //your process goes here
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-06T17:12:14.367

实际上，您可以使用 Visual Studio 获得类似的结果，只需冻结除一个之外的所有线程，在“线程”窗口中选择除一个之外的所有线程，然后右键单击 -> 像这样冻结：

[![在此处输入图像描述](../Images/4e7afb96fee3e2ee1f39c9908bbf820f.png)](https://i.stack.imgur.com/trn28.png)

此外，如果您想重现竞争条件并且在断点处停止会破坏它，您始终可以添加跟踪点 - 使用 Visual Studio 或使用有助于它的插件，例如 Oz Code

[![在此处输入图像描述](../Images/de45e5614ee8189ce343fbd086b07233.png)](https://i.stack.imgur.com/AuuEZ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T20:38:58.817

暂时将其重写为非并行foreach，或在调试模式下运行时使用预处理器指令执行非并行代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T20:46:35.350

我喜欢在断点上使用“When Hit”选项（右键单击断点，选择“When Hit...”。您可以向控制台打印一条消息，其中包括变量值、您所在的线程等.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-06T16:51:24.393

OzCode 会给你很多帮助，它有一个特性，比如类固醇上的跟踪点，在调试并发\并行代码时非常有用 [https://www.youtube.com/watch?v=_vuMi-3jGwY](https://www.youtube.com/watch?v=_vuMi-3jGwY)

# ruby-on-rails - 如何在 Rails 中生成 Join 表

> ID：11108999
> 
> 赞同：3
> 
> 时间：2012-06-19T20:35:51.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的 rails 应用程序中有一个产品模型，产品表中有一个类别列，用逗号分隔。我想创建一个连接表（product_categories），以便类别不再以逗号分隔（使其更容易计数等）。我计划在产品表上按 id 加入，并在加入表上有 id、product_id 和类别。

运行迁移以创建连接表是最佳实践，还是应该生成模型然后运行迁移以创建连接表？

我正在运行rails 3.1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:26.827

任何一种方法都可以工作；这基本上[是 has_many :through 和 has_and_belongs_to_many 之间的区别](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)。

如果您需要将连接本身作为模型进行交互（例如，对其进行验证、添加其他元数据等），那么您应该为连接生成一个模型，并将关系定义为 has_many :through。

但是，在您的情况下，您似乎不需要添加有关给定产品类别连接的额外信息，因此为连接表创建迁移并使用 has_and_belongs_to_many 关系可能更有意义。