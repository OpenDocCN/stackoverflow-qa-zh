# StackOverflow 问答 12407000-12407999

# java - 如何让上传的文件在JSF中读取和获取数据

> ID：12407000
> 
> 赞同：0
> 
> 时间：2012-09-13T13:06:41.830
> 
> 标签：java, jsf

在我的 UI 中，用户将单击浏览并选择一个 excel 文件，然后单击导入它会进入 Action Class，我在其中硬编码了文件位置，如下所示

```
workbook = Workbook.getWorkbook(new File("D:/Docs/MNC/document.xls")); 
Sheet sheet = workbook.getSheet("Sheet"); 
```

我只想一旦用户浏览并选择单击导入的 excel，它应该进入用于从 excel 读取和检索数据的操作类，我如何获取文件以在单击导入时读取？

# visual-studio - wix 安装程序更改 ui 语言

> ID：12407003
> 
> 赞同：5
> 
> 时间：2012-09-13T13:07:14.207
> 
> 标签：visual-studio, user-interface, localization, wix

由于 WiX 安装程序 UI 的默认语言是英语，我想更改为另一种语言，例如德语或其他语言。我确定必须是一些预定义的语言包，随工具包一起提供？

**有没有办法可以更改 WiXs 默认安装程序 UI 的语言？**

（我正在使用 Visual Studio (2012) 插件）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T13:07:14.207

您可以简单地向 WiX 链接器 ( *light.exe* ) 添加一个参数：您可以[在此处](https://www.firegiant.com/wix/tutorial/user-interface/do-you-speak-english/)`-cultures:culture-code` 找到所有文化代码。

使用 Viual Studio 时，只需打开项目属性并将 添加`-cultures:culture-code`到链接器参数：

![在此处输入图像描述](../Images/f664b7dc3f5c47507e4e185f547f37a3.png)

# cmake - Windows开发环境下如何用CMake修改CMAKE_INSTALL_PREFIX的值？

> ID：12407010
> 
> 赞同：2
> 
> 时间：2012-09-13T13:07:23.450
> 
> 标签：cmake

我是CMake的新手，最近注意到某个程序的安装总是需要定义变量CMAKE_INSTALL_PREFIX。例如，在以下 CMake 脚本中，我表示程序的安装位置：

```
install (TARGETS Tutorial DESTINATION bin) 
```

在此脚本中，Tutorial.exe 程序将安装在文件夹 ${CMAKE_INSTALL_PREFIX}/bin 中。但是，当我使用指定的 CMAKE_INSTALL_PREFIX 运行 CMake 命令时，它会失败：

```
cmake DCMAKE_INSTALL_PREFIX=c:/temp .. 
```

这里我使用了out-of-source CMake编译方法。我已经看过几个关于如何在 LINUX 环境中使用此命令的教程，但在 Windows 中没有。我想知道 CMAKE_INSTALL_PREFIX 的定义有什么问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T14:38:55.500

对于 Windows，您可以使用

> cmake-gui [CMakeLists.txt 的路径]

在 gui

*   单击配置

将 CMAKE_INSTALL_PREFIX 编辑为您想要的任何内容，然后

*   点击生成

# iphone - 创建包含多个 pdf 页面的 pdf 页面

> ID：12407014
> 
> 赞同：0
> 
> 时间：2012-09-13T13:07:53.763
> 
> 标签：iphone, objective-c, ios, pdf-generation

是否可以用一页创建 pdf，其中包含源 pdf 中的其他 pdf 页面。我喜欢使用带有指定 CGRect 的 CGContextDrawPDFPage - 比如 UUImage 的 drawInRect 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:22:07.647

```
 CGPDFDocumentRef PDFfile;
CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("iPhoneAppProgrammingGuide.pdf"), NULL, NULL);
        PDFfile = CGPDFDocumentCreateWithURL((CFURLRef)pdfURL);
        CFRelease(pdfURL);

-(void)drawRect:(CGRect)rect
{
    {
      totalpagenumpers=CGPDFDocumentGetNumberOfPages(PDFfile);
    navBar.title = [NSString stringWithFormat:@"(%d/%d)",currentpage,totalpagenumpers];
    CGPDFPageRef page = CGPDFDocumentGetPage(PDFfile,currentpage);
    context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);
    CGContextSetRGBFillColor(context, 1.0, 1.0, 1.0, 1.0);
    CGContextFillRect(context,self.bounds);   
    CGContextTranslateCTM(context, -1.0, [self bounds].size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextConcatCTM(context, CGPDFPageGetDrawingTransform(page,  kCGPDFArtBox, [self bounds], 0, true));
    CGContextDrawPDFPage(context, page);    
    CGContextRestoreGState(context);
    CGAffineTransform transform = aspectFit(CGPDFPageGetBoxRect(page, kCGPDFMediaBox),
                                                CGContextGetClipBoundingBox(context));
             CGContextConcatCTM(context, transform);
         UIGraphicsBeginImageContext(CGSizeMake(self.bounds.size.width, self.bounds.size.height));

    }  

}

-(void)Next
{
       size_t pageCount = CGPDFDocumentGetNumberOfPages(PDFfile);
    if (currentpage == pageCount)
    {
       NSLog(@"aaaaa");
    }
    else 
    {

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self cache:YES];
        [UIView commitAnimations];

        currentpage++;

        [self setNeedsDisplay];
    }

}

-(void)Previous
{

    if (currentpage == 1||currentpage<1)
    {
        {
            NSLog(@"11111");

        }

    }
    else 
    {        

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self cache:YES];
       // self.modalTransitionStyle = UIModalTransitionStylePartialCurl;

        [UIView commitAnimations];
        currentpage--;
        [self setNeedsDisplay];
    }
} 
```

# mysql - Hibernate MySQL：代码抛出 SQLGrammarException

> ID：12407019
> 
> 赞同：0
> 
> 时间：2012-09-13T13:08:03.077
> 
> 标签：mysql, hibernate, jsp

我正在尝试通过 Hibernate 4.1 从 JSP 访问 MySQL 表中的成员列表。

每当我执行代码时，我的页面中都会出现此异常。

```
org.apache.jasper.JasperException: Exception in JSP: /home.jsp:27
org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax;
    check the manual that corresponds to your MySQL server version
    for the right syntax to use near '.members members0_' at line 1 
```

详细的异常显示以下行是罪魁祸首......

```
List<Members> result = ses.createQuery( "from Members" ).list(); 
```

我`Members.hbm.xml`的如下...

```
<hibernate-mapping>
<class name="com.stichon.ets.db.Members" table="members" catalog="stiadmin_ets">
    <id name="idMembers" type="java.lang.Integer">
        <column name="id_members" />
        <generator class="identity" />
    </id>
    <property name="initials" type="string">
        <column name="`initials`" length="15" />
    </property>
    <property name="firstName" type="string">
        <column name="`first_name`" length="45" />
    </property>
    <property name="lastName" type="string">
        <column name="`last_name`" length="45" />
    </property>
    <property name="mobile" type="string">
        <column name="`mobile`" length="15" not-null="true" />
    </property>
    <set name="notificationses" table="notifications" inverse="true" lazy="true" fetch="select">
        <key>
            <column name="id_member" />
        </key>
        <one-to-many class="com.stichon.ets.db.Notifications" />
    </set>
</class>
</hibernate-mapping> 
```

在列名中添加“`”（反引号）没有帮助.... :(

更新：日志文件中的 SQL 查询。

```
Hibernate: select devices0_.`idDevices` as idDevices1_0_, devices0_.`name` as name2_0_, devices0_.`desc` as desc3_0_ from stiadmin_ets.stiadmin_ets.`devices` devices0_ 
```

我在这里看到 2 个问题

1.  它将 0_ 附加到表名，1_0_ 附加到第一个字段，2_0_ 附加到第二个字段，依此类推。
2.  它附加了额外的数据库名称 stiadmin_ets.stiadmin_ets。可能与 hbm 文件中的目录属性有关。会检查...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:03:31.700

我的错！

问题解决了。我使用的是 MySQLDialect 而不是 MySQL5Dialect。还从主 cfg xml 中删除了 default_schema。

# javascript - 无法调用 JS 函数

> ID：12407020
> 
> 赞同：0
> 
> 时间：2012-09-13T13:08:03.583
> 
> 标签：javascript, asp.net-mvc-3

```
<input type="checkbox" id="PM" style="float: left;" onclick="ValidateCheckBox(this)" />

<script type="text/javascript">
        function ValidateCheckBox(source) {
    alert("HERE!")
    var checkbox1 = document.getElementById('AMPM');
    checkbox1.checked = false;
    var checkbox2 = document.getElementById('AM');
    checkbox2.checked = false;
    var checkbox3 = document.getElementById('PM');
    checkbox3.checked = false;
    $(source).attr('checked', true);

    var hdn1 = document.getElementById('timeAMPM');
    var hdn2 = document.getElementById('timeAM');
    var hdn3 = document.getElementById('timePM');

    hdn1.value = checkbox1.checked;
    hdn2.value = checkbox2.checked;
    hdn3.value = checkbox3.checked;
}
</script> 
```

无法调用 JS 函数。我也尝试过 onchange 。现在我添加了孔功能。我有 3 个复选框，我想要的总是只检查一个！我在浏览器的控制台中遇到错误：RefferenceError: $document is not defined

# postgresql - postgresql 困难（对我来说）查询

> ID：12407021
> 
> 赞同：1
> 
> 时间：2012-09-13T13:08:04.770
> 
> 标签：postgresql, associations

这是我的表：

1.  AB 元组表
2.  具有 A.id 和 B.id 条目的 C 表
3.  具有 C.id 条目和布尔字段“open”的 D 表

我想计算 D 表中 "open" = true 并且具有相同 A.id 和 B.id 的 C.id 的所有条目

我希望查询在一行中返回计数、通用 A.id 和通用 B.id

例如 D 表

```
D.id = 1, open=true, D.CID = 2
D.id = 2, open=true, D.CID = 3
D.id = 3, open=true, D.CID = 3
D.id = 4, open=true, D.CID = 4 
```

C表

```
C.id = 2, A.id = 3, B.id = 5 
C.id = 3, A.id = 3, B.id = 5
C.id = 4, A.id = 4, B.id = 6 
```

Bc D 中的前 3 个条目具有具有相同 AID 和 BID 的 CID，它们被计入同一个条目中。因此，查询应返回以下 2 个条目：

```
1\. count = 3  A.id = 3  B.id = 5
2\. count = 1  A.id = 4  B.id = 6 
```

我为 AB 制作了一个元组表，因为我认为它像下面的伪代码一样工作

```
For each entry i in tuple Table AB 
   for each entry j in Table C 
      for each entry k in Table D 
          if j.AID AND j.BID equal to i.AID and i.BID
              And if k.CID = j.id
                 Then returnHash[i] = returnHash[i] + 1 
```

- 虽然可能没有必要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:46:40.163

```
SELECT
  COUNT(*),
  c.aid,
  c.bid
FROM
  d INNER JOIN c
ON
  d.cid = c.id
WHERE
  d.open
GROUP BY
  c.aid,
  c.bid; 
```

# ember.js - Ember.js 的多列布局

> ID：12407022
> 
> 赞同：1
> 
> 时间：2012-09-13T13:08:11.057
> 
> 标签：ember.js

我想根据当前路线创建一个具有不同列布局的站点。

我基本上是通过预先调用具有相应布局的适当布局控制器中的每条路由来实现的。

```
<script type="text/x-handlebars" data-template-name="application">
    <div class="container">
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" data-template-name="twocolumns">

  <div class="row">
    <div class="span8">
        {{outlet main}}
    </div>
    <div class="span4">
        {{outlet sidebar}}
    </div>
  </div>

</script>

<script type="text/x-handlebars" data-template-name="home">
    <h1>Home</h1>
</script>

<script type="text/x-handlebars" data-template-name="sidebar">
    <h1>Sidebar</h1>
</script>

  home: Ember.Route.extend({
    route: '/',
    connectOutlets: function(router, event) {
        router.get('applicationController').connectOutlet('twocolumns');
        router.get('twocolumnsController').connectOutlet('main', 'home');
        router.get('twocolumnsController').connectOutlet('sidebar', 'sidebar');
    }
  }), 
```

是否有更好的方法，例如扩展具有不同布局的 Route 类？

# c# - 使用 Unity 容器将其中一个 ViewModel 注入到视图中

> ID：12407025
> 
> 赞同：0
> 
> 时间：2012-09-13T13:08:16.380
> 
> 标签：c#, mvvm, unity-container

我有二级 ViewModel

```
//both IViewModel1 and IViewModel2 inherit from IViewModel
public class ViewModel1 : IViewModel1
{}
//and
public class ViewModel2 : IViewModel2
{} 
```

和观点：

```
public partial class View : UserControl
{
View(IViewModel)
{}
} 
```

如何使用 Unity 容器将其中一个 ViewModel 注入到 View 中？
**编辑：我的问题是选择从构造函数注入其中一个视图模型。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:18:54.490

如果您使用 Unity 来解析您的视图并且 IViewModel 是构造函数签名的一部分，那么 Unity 将为您解析它（前提是您已经注册了它，例如在加载模块时）：

```
public View(IViewModel1 vm)
{
    InitializeComponent();
    _myViewModel = vm;
} 
```

请记住，Unity 是贪婪的 - 它会尝试解析最大的构造函数，因此如果您想选择一个特定的构造函数供它使用，那么您将需要使用[ParameterOverrides](http://msdn.microsoft.com/en-us/library/ff660920%28v=pandp.20%29.aspx)。

# vb.net - 如何从asp.net代码后面打开一个新标签？

> ID：12407030
> 
> 赞同：1
> 
> 时间：2012-09-13T13:08:39.937
> 
> 标签：vb.net, tabs, linkbutton, asplinkbutton

我在 LinkBut​​ton Click 事件中得到了这段代码

```
 Session("Factor") = Session("rating")       
    Response.Write("<script>")
    Response.Write("window.open('Resources/Resources.aspx','_blank')")
    Response.Write("</script>") 
```

我需要在后面的代码中的原因是因为我必须设置那个会话。这将在新窗口中打开。但是我怎样才能让它在新标签页中打开呢？或任何替代方法。请记住我必须设置该会话。QueryString 对我不利。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:45:45.603

我知道这是一个旧帖子，但我仍然想与大家分享。

您可以从后面的代码中使用链接按钮的属性。像这样的东西。

在表单加载事件中添加此代码。

linkbutton.Attributes.Add("onclick", "window.open('http://localhost:50/mailconfirm.htm','NameOfTheWindow','height=400,width=400,status=yes,toolbar=no, menubar=no,location=0,scrollbars=no,left=200,top=200')")

# jquery - jQuery Countdown 插件倒计时只有几秒钟

> ID：12407031
> 
> 赞同：1
> 
> 时间：2012-09-13T13:08:42.760
> 
> 标签：jquery, jquery-plugins, countdown, countdowntimer, jquery-countdown

我正在使用[Jquery Countdown Plugin](http://keith-wood.name/countdown.html)并且只想以秒为单位倒计时并以秒为单位添加总时间。

例如，当我的倒计时为 10 分钟时，它不会显示 9 分 59 秒并计数，而是显示 599 秒并计数。这可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:13:24.227

```
$('#yourElement').countdown({
    until: someTime,
    format: 'S' // <-- the magic is happening here
}); 
```

相关文档[可在此处找到](http://keith-wood.name/countdown.html)（选项卡：格式 2，第 4 个示例）

# ruby - Ruby CSV - 获取当前行/行号

> ID：12407035
> 
> 赞同：55
> 
> 时间：2012-09-13T13:08:56.350
> 
> 标签：ruby, csv

我正在尝试解决如何从 Ruby CSV 获取当前行/行号。这是我的代码：

```
options = {:encoding => 'UTF-8', :skip_blanks => true}
CSV.foreach("data.csv", options, ) do |row, i|
   puts i
end 
```

但这似乎没有按预期工作。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-09-13T14:46:28.593

*由于当前 Rubies 中 CSV 的变化，我们需要进行一些更改。在 Ruby 2.6 之前的原始解决方案的答案中进一步了解。并且`with_index`无论版本如何，都可以继续使用。*

*对于 2.6+，这将起作用：*

```
require 'csv'

puts RUBY_VERSION

csv_file = CSV.open('test.csv')
csv_file.each do |csv_row|
  puts '%i %s' % [csv_file.lineno, csv_row]
end
csv_file.close 
```

如果我读到：

```
Year,Make,Model,Description,Price
1997,Ford,E350,"ac, abs, moon",3000.00
1999,Chevy,"Venture ""Extended Edition""","",4900.00
1999,Chevy,"Venture ""Extended Edition, Very Large""","",5000.00
1996,Jeep,Grand Cherokee,"MUST SELL!\nair, moon roof, loaded",4799.00 
```

代码导致此输出：

```
2.6.3
1 ["Year", "Make", "Model", "Description", "Price"]
2 ["1997", "Ford", "E350", "ac, abs, moon", "3000.00"]
3 ["1999", "Chevy", "Venture \"Extended Edition\"", "", "4900.00"]
4 ["1999", "Chevy", "Venture \"Extended Edition, Very Large\"", "", "5000.00"]
5 ["1996", "Jeep", "Grand Cherokee", "MUST SELL!\\nair, moon roof, loaded", "4799.00"] 
```

更改是因为我们必须访问当前文件句柄。以前我们可以使用 global `$.`，它总是有失败的可能性，因为 globals 可能会被调用代码的其他部分踩到。如果我们有正在打开的文件的句柄，那么我们可以`lineno`不用担心。

* * *

## `$.`

*Ruby 2.6 之前的版本可以让我们这样做：*

Ruby 有一个[神奇的变量`$.`](http://stdlib.rubyonrails.org/libdoc/English/rdoc/index.html)，它是正在读取的当前文件的行号：

```
require 'csv'

CSV.foreach('test.csv') do |csv|
  puts $.
end 
```

使用上面的代码，我得到：

```
1
2
3
4
5 
```

## `$INPUT_LINE_NUMBER`

`$.`在 Perl 中一直使用。在 Ruby 中，建议我们使用以下方式来避免它“神奇”的一面：

```
require 'english'

puts $INPUT_LINE_NUMBER 
```

* * *

如果需要处理字段中嵌入的行尾，只需稍作修改即可轻松处理。假设一个 CSV 文件“test.csv”包含一个嵌入换行符的行：

```
Year,Make,Model,Description,Price
1997,Ford,E350,"ac, abs, moon",3000.00
1999,Chevy,"Venture ""Extended Edition""","",4900.00
1996,Jeep,Grand Cherokee,"MUST SELL!
air, moon roof, loaded",4799.00
1999,Chevy,"Venture ""Extended Edition, Very Large""","",5000.00 
```

* * *

## `with_index`

使用 Enumerator[`with_index(1)`](http://ruby-doc.org/core-2.3.0/Enumerator.html#method-i-with_index)可以轻松跟踪 CSV 生成块的次数，`$.`在读取处理行尾所需的额外行时有效地模拟使用但尊重 CSV 的工作：

```
require 'csv'

CSV.foreach('test.csv', headers: true).with_index(1) do |row, ln|
  puts '%-3d %-5s %-26s %s' % [ln, *row.values_at('Make', 'Model', 'Description')]
end 
```

其中，运行时，输出：

```
$ ruby test.rb
1   Ford  E350                       ac, abs, moon
2   Chevy Venture "Extended Edition"
3   Jeep  Grand Cherokee             MUST SELL!
air, moon roof, loaded
4   Chevy Venture "Extended Edition, Very Large" 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-13T13:52:38.230

这是一个替代解决方案：

```
options = {:encoding => 'UTF-8', :skip_blanks => true}

CSV.foreach("data.csv", options).with_index do |row, i|
   puts i
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T13:13:59.530

不是一个干净但简单的解决方案

```
options = {:encoding => 'UTF-8', :skip_blanks => true}
i = 0
CSV.foreach("data.csv", options) do | row |
  puts i
  i += 1
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-09T19:55:36.167

## 红宝石 2.6+

### 没有标题

```
CSV.foreach( "data.csv", encoding: "UTF-8" ).with_index do |row, row_number|
  puts row_number
end 
```

### 带标题

```
CSV.foreach( "data.csv", encoding: "UTF-8", headers: true ).with_index( 2 ) do |row, row_number|
  puts row_number # Starts at row 2, which is the first row after the header row.
end 
```

*在 Ruby 2.6 中，`$INPUT_LINE_NUMBER`不再提供当前行号。更糟糕的是它返回的是`2`and的值`1`。我不确定那应该代表什么，但它肯定不是行号。由于它不会引发异常，因此如果您不检查该值，它真的会咬您一口。**我强烈建议您替换代码中所有出现的`$INPUT_LINE_NUMBER`以避免此问题。***

# sugarcrm - SugarCRM 如何允许不同的邮政地址

> ID：12407037
> 
> 赞同：0
> 
> 时间：2012-09-13T13:09:05.863
> 
> 标签：sugarcrm, street-address

（首先，对不起我的英语，这不是我的母语）我是一个新的 SugarCrm 用户，我尽量用图形界面做我能做的最多的事情。

**我的版本** 我在 Linux 上运行 Sugarcrm CE 6.5.4。

**我想做的事 ：**

**1]**对于用户创建的每个帐户（或公司），我希望创建不同的地址（邮政地址）： - 一个主要地址（只有一个，仅与一个帐户相关） - 一个帐单地址（只有一个，仅与一个帐户相关） - 交货地址（可能有多个，但与一个销售有关 - 与一个帐户有关） - 开发地址（可能有多个，但与一个销售有关 - 与一个帐户有关）

**2]**我想提出一个类型的选择（即一个下拉列表 - 我知道如何创建一个新的）但是当用户已经创建了一个主要或帐单地址时，当他创建一个新地址时，列表不要' t 显示选择“Primary”或“Billing”（因为他只能按帐户创建一个）

**3]**我想建议一个小按钮 + 或 - 来添加或删除一个地址（就像它是为电子邮件制作的 - 预...）

**4]**我希望所有内容都显示为“账单 - 地址”（或“送货 - 地址”）。

我完全迷失在我想做的所有这些事情中，不知道我能从什么开始......

**我的问题：** - 我必须创建一个模块吗？- 我可以用界面创建它吗？- 如果是，如何？（我猜是模块生成器，但是哪些关系，我可以在这个模块中做什么......？） - 我如何在数据库中处理关系？它自己做吗？- 一切都必须很快完成，那么容易吗？（我的意思是，即使我们完全愚蠢和初学者？）

感谢您抽出宝贵时间，并提前感谢您的回复。

祝你有美好的一天 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:32:00.497

您可以通过 Studio 添加一些地址字段，因为它是字段类型列表中可用的“类型”字段

# php - 从 php/mysql 中的两个表中删除一条记录

> ID：12407039
> 
> 赞同：2
> 
> 时间：2012-09-13T13:09:21.293
> 
> 标签：php, mysql

我正在尝试使用以下代码从船表中删除“船”以及另一个表中的相关资格：

```
DELETE FROM tbl_boat, tbl_qualifications 
WHERE tbl_boat.BT_ID = '$bt_id' AND tbl_boat.BT_ID = tbl_qualifications.BT_ID; 
```

问题是我收到以下错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取`'WHERE tbl_boat.BT_ID = 113 AND tbl_boat.BT_ID = tbl_`在第 2 行的 ' 附近使用的正确语法。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:14:40.173

您可能想尝试 INNER JOIN。

```
DELETE FROM tbl_boat
INNER JOIN tbl_qualifications
WHERE tbl_boat.BT_ID = '$bt_id' AND tbl_boat.BT_ID = tbl_qualifications.BT_ID; 
```

我还没有测试过这个，但我认为这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:15:03.217

你必须告诉 MySQL 这两个表是如何关联的：

```
DELETE tbl_boat, tbl_qualifications
FROM
    tbl_boat
    INNER JOIN tbl_qualifications USING (BT_ID)
WHERE
    tbl_boat.BT_ID = '$bt_id' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:15:28.653

您需要执行两个删除：

> -- 首先删除所有关联 ...
> DELETE FROM tbl_qualifications WHERE BT_ID = '$bt_id';
> 
> -- ... 然后删除船
> DELETE FROM tbl_boat WHERE BT_ID = '$bt_id';

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:16:04.130

它应该是

```
DELETE tbl_boat, tbl_qualifications FROM tbl_boat, tbl_qualifications 
WHERE tbl_boat.BT_ID = '$bt_id' AND tbl_boat.BT_ID = tbl_qualifications.BT_ID; 
```

顺便看看[如何从 MySQL 中的多个表中删除？](https://stackoverflow.com/questions/3331992/how-to-delete-from-multiple-tables-in-mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T13:23:37.307

这肯定会奏效：

```
DELETE a.*, b.*
FROM tbl_boat AS a
INNER JOIN tbl_qualifications AS b
    ON b.BT_ID = a.BT_ID
WHERE tbl_boat.BT_ID = '$bt_id'; 
```

此外，如果`BT_ID`is`INTEGER`类型，则从 around 中删除引号`$bt_id`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T16:17:41.710

试试这个

```
DELETE uploadfeat,postfeeds,postcomment FROM uploadfeat INNER JOIN postfeeds INNER JOIN postcomment
WHERE uploadfeat.id=postfeeds.postID AND uploadfeat.id=postcomment.postID AND uploadfeat.id=23 
```

# jquery - jQuery 的自动完成更改事件：这是如何工作的？

> ID：12407045
> 
> 赞同：0
> 
> 时间：2012-09-13T13:09:41.220
> 
> 标签：jquery, jquery-ui, autocomplete

根据官方文档，这个事件是：

> 当字段模糊时触发，如果值发生了变化；

现在，它如何知道值是否已更改？它存储在某个地方吗？我问的原因是：我可以复制这种行为吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:16:33.540

这由浏览器解决。您还可以通过将处理程序附加到 onchange 事件来触发文本输入上更改的值：

```
<input onchange="alert('value changed!');" /> 
```

而且在 Javascript 中：

```
document.getElementById("my_text_input").onchange = function(){
    alert("value changed!");
} 
```

当然，您可以复制这种行为。你可以[在这里自己试试](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onchange)。

[编辑]
你有 onblur 事件，每次用户离开控件时都会触发。
您可以跟踪输入值，或设置一个标志以使更改和模糊事件都可以访问：

```
(function(){
    var changed = false;

    document.getElementById("my_text_input").onchange = function(){
        changed = true;
    }
    document.getElementById("my_text_input").onblur = function(){
        if (!changed) {
            //Your logic here
        }
        changed = false; //set it back to false for next loss of focus
    }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:15:09.457

我认为它存储原始值并将当前值与模糊的原始值进行比较。

如果通过复制你的意思是触发事件，那么你可以在这里阅读：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# ruby-on-rails - 在 rails 3.2.7 中有条件的多个连接

> ID：12407046
> 
> 赞同：0
> 
> 时间：2012-09-13T13:09:42.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我再次陷入了一个简单的查询。我有以下型号

```
class Category < ActiveRecord::Base
  has_many :item_types
  has_many :items, :through => :item_types, :source => :category    
end

class ItemType < ActiveRecord::Base
  belongs_to :category
  has_many :items 
end

class Item
  belongs_to :item_type
end 
```

现在我正在尝试编写一个查询来获取属于某个类别的所有项目。我写了一个这样的查询：

```
Category.joins(:item_types,:items).where("category.id=?",1) 
```

当包含条件时，它会给我一个错误。我不知道为什么会这样。我认为这是一个非常基本的连接，我可以自己做，但徒劳无功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T11:50:48.813

```
Category.joins(:item_types, :items).where(:item_type => {:category_id => 1}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:27:51.327

如果您想与 ActiveRecord 建立多对多关联，则要简单得多。如果我清楚地理解你的问题，你应该做这样的事情

```
# app/models/category.rb
class Category < ActiveRecord::Base
  has_many :item_types
  has_many :items, :through => :item_types
end

# app/models/item_type.rb
class ItemType < ActiveRecord::Base
  belongs_to :category
  belongs_to :item
end

# app/models/item.rb
class Item < ActiveRecord::Base
  has_many :item_types
  has_many :categories, :through => :item_types
end

# app/controllers/categories_controller.rb
def show
  @category = Category.find(params[:id])
  @category_items = @category.items
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:31:16.600

```
Category.joins(:item_types,:items).where("**categories**.id=?",1) 
```

类别的表名应该在 where 子句中

# php - 从头开始执行 PHP（向后移动）？

> ID：12407047
> 
> 赞同：0
> 
> 时间：2012-09-13T13:09:45.100
> 
> 标签：php

当我的 PHP 中满足某个条件时，我希望执行它上面的某些内容（标题）。我已经阅读了所有内容，`ob_start`但通过多次测试（我的意思是几天），老实说，我没有看到任何区别。所以现在我想知道我是否可以将标题留在顶部并稍后激活它？

```
if($x == 1)
    header("Location: something"); exit;

... // echo's, HTML, etc
$x = 1;
restart_php(); 
```

可能不会，但值得一试。也许那里有人确实知道一种技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:35:11.723

如果您真的想稍后指定标头（并且它是可变的）以提供各种救助重定向...试试这个大小；

```
<?php
function restart_php($x){
    if($x == 1)  
        ob_end_clean();   # throw everything away
        header("Location: something"); 
        exit;  
    }else{
        $page = ob_get_contents();
        ob_end_clean();
        echo $page;
    }
}
ob_start();  # everything after here goes into buffer so header is clean

... // echo's, HTML, etc  
$x = 1;  # to previous note on this, X is always equal to 1?
restart_php($x);  # which clears the buffer and either shows header or echo's the contents
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:19:01.100

不知道，如果我正确理解您的问题....在 php 中（实际上）没有办法使用 GO TO （就像基本一样）...。

**更新：由于 php 5.3.0 实现了 goto 函数**

你可以做什么例如。在函数的顶部写下你的条件

```
<?php
 function shutdown() {
   global $x;
   if($x==1) {
      header("location ...");
   } 
   //.....
 }
 // and then call the register_shutdown_function
 register_shutdown_function('shutdown');
 ?> 
```

有关此函数 [register_shutdown_function()的更多信息](http://de3.php.net/manual/en/function.register-shutdown-function.php)

# bash - bash return 在 echo "aa" | 中无法正常工作 读时

> ID：12407048
> 
> 赞同：2
> 
> 时间：2012-09-13T13:09:53.273
> 
> 标签：bash

```
#!/bin/bash

function doSomething() {
    callee
    echo $?
    echo "It should go to here!"
}

function callee() {
    cat line.txt |while read ln
    do
        echo $ln
        if [ 1 ] ;then
            { echo "This is callee" &&
            return 2; }
        fi  
    done
    echo "It should not go to here!"
}

doSomething 
```

下面是结果

```
aa
This is callee
It should not go to here!
0
It should go to here! 
```

为什么“return”像“break”一样工作？

我要它退出功能！不仅打破循环......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:18:51.130

这是因为您正在使用管道进入`while`循环，该循环在子外壳（在 Bash 中）中运行。您是从子外壳返回，而不是从函数返回。尝试这个：

```
function callee() { 
    while read ln 
    do 
        echo $ln 
        if [ 1 ] ;then 
            echo "This is callee" 
            return 2;   
        fi   
    done  < line.txt
    echo "It should not go to here!" 
} 
```

杀猫！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:14:48.360

在`while`子外壳中执行（由于管道），因此您所做的任何事情都只会在该外壳内生效。例如，您不能更改包含范围内的变量值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T13:19:13.010

你应该使用

```
exit [number as status] 
```

例如

```
exit 0 
```

要不就

```
exit 
```

exit 命令终止脚本。它还可以返回一个值，该值可供脚本的父进程使用。

# php - Opencart 管理员获取所选商店的语 言

> ID：12407050
> 
> 赞同：0
> 
> 时间：2012-09-13T13:09:56.983
> 
> 标签：php, opencart

在管理员时事通讯中，我正在加载几个语言文件。如何设置它以加载所选商店的语​​言？

例如

```
$this->load->model('setting/setting');
$store_settings_config = $this->model_setting_setting->getSetting("config", $this->request->post['store_id']); 
```

返回 [config_language] => zh

问题是在商店设置中，语言是使用语言代码而不是 language_id 保存的，并且没有通过代码加载语言的方法？

我是否遗漏了什么，或者这是 opencart 代码中的一个缺陷？

language_id 是否甚至需要作为主键，因为语言代码应该始终是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:08:01.857

通过遍历所有语言快速修复：

```
foreach($this->model_localisation_language->getLanguages() as $lang){               
    if($lang['code'] == $store_settings_config['config_language']){
        $language = new Language($lang['directory']);
        $language->load("sale/contact");
    }
} 
```

# android - 我们可以使用 netbeans 编写 Android 代码吗

> ID：12407051
> 
> 赞同：7
> 
> 时间：2012-09-13T13:09:56.710
> 
> 标签：android, netbeans

我可以在与 Eclipse IDE 相同的 Netbeans IDE 中编写 Android 代码吗？这可能吗。请帮助我，如果您对此有任何想法，请与我分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:13:01.227

当然可以。有一个非官方的[netbeans 插件](http://plugins.netbeans.org/plugin/19545/nbandroid)。
目前，[Android Studio](https://developer.android.com/sdk/installing/studio.html)显然是 Android 工具团队关注的焦点，并且在可预见的未来将成为 Android 开发中功能最齐全的 IDE。
使用任何适合您需要的代码，请记住，您可能无法在 Netbeans 中获得所有 AS Android 工具。

# php - 如何一次结束堆栈执行（PHP）？

> ID：12407053
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:10:05.257
> 
> 标签：php, class, exception

我得到了一个产生错误概率为 50:50 的代码。这一切都在一个类对象中完成。对象中的任何方法都可能产生错误。我该怎么做才能使方法堆栈深处的某个函数产生错误，以便可以将其返回给第一个运行的函数？

像这样： 1.调用function1 2.function1调用function2 3.function2调用function3 4.function3产生错误并将具有错误定义权的数组传递给function1

我知道异常是正确的（用 try-catch 块包裹一个函数），但我还不能让它在 3 个函数深堆栈中捕获异常。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:39:46.227

你试过什么？这很简单，真的：

```
<?php

function function1( ) {
    try {
        function2( );
    }
    catch( Exception $e ) {
        // Exception from function4 bubbles up.
    }
}

function function2( ) {
    function3( );
}

function function3( ) {
    function4( );
}

function function4( ) {
    throw new Exception( );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:13:14.623

例外是这样做的正确方法。Catch Exception（普通类）是一种不好的做法。

您应该抛出具体/自定义异常。

查看[http://php.net/manual/en/spl.exceptions.php](http://php.net/manual/en/spl.exceptions.php)`throw`并用更具体和具体的例外来改变你的

避免

```
 throw new Exception('foo'); 
```

反而

```
 throw new RuntimeException('foo'); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-13T13:19:48.210

只需`try`在应该捕获异常并保持其他不变的级别使用。前任：

```
try{
function1();
}
catch(Exception e){
// bla bla
} 
```

如前所述，异常会传播直到它们被捕获或崩溃:)。

# php - 表单需要 PHP 名称

> ID：12407055
> 
> 赞同：1
> 
> 时间：2012-09-13T13:10:08.627
> 
> 标签：php, string, forms, validation, requiredfieldvalidator

我是 PHP 新手，正在尝试让此表单要求在允许提交之前填写某些字段。我的电子邮件、电话号码和邮编都可以使用，但我的姓名却不行。我花了一分钟才意识到为什么，但现在我不知道如何解决它。

在我的字段表单上，我在输入框中输入了名称，以便用户知道在该框中输入什么，我的 PHP 代码只检查是否有任何 Az 和空格。有什么方法可以检查它是否不仅仅是字段中的“名称”？？？谢谢并希望这是有道理的！:)

PHP代码

```
$string_exp = '/^[a-zA-Z0-9 ]*$/';
if(!preg_match($string_exp,$name)) {
$error_message .= 'The Name you entered does not appear to be valid.<br />';
} 
```

代码

```
<label for="name"></label><input type="text" class="rounded" name="name" size="26"
value="Name" style="color:#775594;" onblur="if(this.value==''){this.value='Name'}"
onFocus="if(this.value=='Name'){this.value=''}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:11:52.143

添加另一个条件：

```
$string_exp = '/^[a-zA-Z0-9 ]*$/';
if(!preg_match($string_exp,$name) || $name == 'Name') {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
}

// for any unicode name, accent, umlauts .. etc:
$string_exp = '/^((\p{L}\p{M}*)|(\p{Cc})|(\p{P}\p{P}\p{N}.{3})|(\p{N})|(\p{Zs}))+$/ui'; 
```

[阅读](http://www.regular-expressions.info/unicode.html)有关 unicode 正则表达式的更多信息。

# c++ - 为二叉树实现预排序迭代器时遇到问题

> ID：12407061
> 
> 赞同：0
> 
> 时间：2012-09-13T13:10:24.423
> 
> 标签：c++, templates, iterator, iterator-facade

```
template <class T>
struct BinaryTreeNode
{
    T data_;

    BinaryTreeNode* left_;
    BinaryTreeNode* right_;
};

template <class Node>
class TreeItBase : public boost::iterator_facade<
        TreeItBase<Node>,
        Node,
        boost::forward_traversal_tag
        >
{
public:
    TreeItBase()
        : nodePtr_(0L) {}

    explicit TreeItBase(Node* node)
        : nodePtr_(node) {}

protected:
    friend class boost::iterator_core_access;

    template <class OtherNode>
    bool equal(const TreeItBase<OtherNode>& other) const
    { return nodePtr_ == other.nodePtr_; }

    virtual void increment() = 0;

    Node& dereference() const
    { return *nodePtr_; }

    Node* nodePtr_;
    std::stack<Node*> stack_;
};

template <class Node>
class PreOrderIt : public TreeItBase<Node>
{
private:
    void increment()
    { this->nodePtr_ = this->nodePtr_->right_; } // Ignore the logic error
}; 
```

我正进入（状态，

```
error: invalid operands to binary expression ('BinaryTree<int>::PreIt'
(aka 'PreOrderIt<BinaryTreeNode<int> >') and 'PreIt'
(aka 'PreOrderIt<BinaryTreeNode<int> >')) 
```

这是[完整的错误（pastebin）](http://pastebin.com/p9TncUcV)。

# 编辑

这是我的`BinaryTree`课，

```
template <class T>
class BinaryTree
{
public:
    typedef TreeItBase< BinaryTreeNode<T> > It;
    typedef PreOrderIt< BinaryTreeNode<T> > PreIt;

    void Insert(const T& data);
    void Erase(It& it);

    PreIt PreOrderBegin();
    PreIt PreOrderEnd();
}; 
```

这是我的`main()`，

```
int main()
{
    BinaryTree<int> tree;

    for (BinaryTree<int>::PreIt it = tree.PreOrderBegin();
        it != tree.PreOrderEnd(); ++it)
    {
        std::cout << *it << ", ";
    }
    std::cout << "\n";

    return 0;
} 
```

# 解决方案

改为`virtual void increment() = 0`，

```
virtual void increment()
{} 
```

感谢大家的帮助，:)

# symfony - Symfony2.1：登录表单中的额外字段要持久化

> ID：12407068
> 
> 赞同：0
> 
> 时间：2012-09-13T13:10:55.733
> 
> 标签：symfony, symfony-2.1

我在 Symfony2.1 中有一个登录表单，它被发布到我的路由，它没有附加控制器，因为 Symfony 在内部负责登录。

现在我如何向这个表单添加一个字段，在一个实体上调用一个 SetXxxx() 方法，并持久化它？我无法拦截登录表单的 POST 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:47:07.657

您可以通过实现自定义[身份验证提供程序](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)并创建您自己的身份验证[令牌](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Token/TokenInterface.php)来保留其成员之一来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:07:07.203

您可以省去很多麻烦创建一个`AuthenticationSuccessHandler`（参见[http://blog.alterphp.com/2011/10/set-up-authenticationsuccesshandler.html](http://blog.alterphp.com/2011/10/set-up-authenticationsuccesshandler.html)），并注入实体管理器或您拥有的任何负责更新的服务您的实体并坚持下去。

该博客直接实现了接口`AuthenticationSuccessHandlerInterface`，但您也可以在其中扩展`Symfony\Component\Security\Http\Authentication\DefaultAuthenticationSuccessHandler`和添加`onAuthenticationSuccess`

# android - 打开带有缩略图图标的相机应用程序

> ID：12407073
> 
> 赞同：1
> 
> 时间：2012-09-13T13:11:10.043
> 
> 标签：android, camera, gallery

我想在右下角启动带有缩略图图标的 Android 内置相机应用程序。这是我打开相机应用程序的代码。

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

我想我需要放置一个意图数据来做到这一点。我期待着你的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:37:10.927

只需创建一个图像按钮或按钮或您真正想要的任何东西。

在 onclick 事件中添加如下内容：

```
 String saveFileName= Environment.getExternalStorageDirectory() + "/test.png";

    // BUILT IN CAMERA 
    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
    camera.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(saveFileName) );   
    this.startActivityForResult(camera, 1); 
```

确保您已设置必要的权限。就像保存到 SDCard 一样。

你非常接近，你不需要设置那些标志。理想情况下，您应该指定保存图像的位置。如果您想知道如何制作按钮 [，请看这里](https://stackoverflow.com/questions/2283444/android-image-button)

# pdf - 将视频嵌入pdf？

> ID：12407078
> 
> 赞同：0
> 
> 时间：2012-09-13T13:11:16.643
> 
> 标签：pdf, embedded-resource

您好，我使用 purepdf 库将视频嵌入到 pdf，问题是 pdf 阅读器在播放视频时要求解码器，视频在安装了解码器的系统上成功播放，但无法在未安装解码器的系统上播放，是有什么办法可以将解码器嵌入到pdf中

需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:32:55.680

不，您不能在 PDF 文件中嵌入解码器。只能嵌入电影。

# xmpp - MSN XMPP see-other-host empty

> ID：12407087
> 
> 赞同：0
> 
> 时间：2012-09-13T13:11:59.077
> 
> 标签：xmpp, msn, msn-messenger

我正在尝试使用 XMPP 通过 js 与 MSN 连接。

当我尝试连接到“messenger.live.com”时，我发送

```
<body rid='2126688061' xmlns='http://jabber.org/protocol/httpbind' to='messenger.live.com' xml:lang='en' wait='60' hold='1' content='text/xml; charset=utf-8' ver='1.6' xmpp:version='1.0' xmlns:xmpp='urn:xmpp:xbosh'/> 
```

我得到

```
<body xmlns="http://jabber.org/protocol/httpbind" type="terminate" condition="remote-stream-error">
    <stream:error xmlns:stream="http://etherx.jabber.org/streams">
        <see-other-host xmlns="urn:ietf:params:xml:ns:xmpp-streams"></see-other-host>
    </stream:error>
</body> 
```

我不明白为什么没有提供替代主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:26:27.407

这是 Microsoft 的负载平衡方式 :( 连接流后，他们将您重定向到另一个主机。您必须关闭现有流并启动另一个流到给定主机。
我总是看到另一个主机。你能从那里获得更多日志您的 BOSH 代理与 RAW 数据？
您的 BOSH 代理是否支持此重定向功能？

# javascript - 如何从基于 masterpage 的 asp.net 页面中的 javascript 获取价值，masterpage 只能有一个 asp.net 表单

> ID：12407090
> 
> 赞同：0
> 
> 时间：2012-09-13T13:12:10.487
> 
> 标签：javascript, asp.net, master-pages

我想创建一个一次性密码的快速模拟。问题是我在一个母版页子页面中，我只能在一个内容占位符中有一个 asp.net 表单，另一个包含一个生成随机代码的 javascript 代码。

如何将此代码传递给asp.net，以便当用户单击验证时，我可以将他输入的代码与javascript生成的随机代码进行比较（也许是ajax，但我看不出如何？）

如果我可以有 2 个 asp.net 表单，那将不是问题。

更新：我修改了下面的源代码以包含 Andrei 建议的解决方案。

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <form id="form1" runat="server">
        Username: <asp:TextBox ID="txtUserName" runat="server" /></br>
        OTP: <asp:TextBox ID="txtOTP" runat="server" /></br>
        <asp:TextBox ID="OtpHiddenField" runat="server" /></br>
        <asp:Button ID="btnValidate" runat="server" onclick="btnValidate_Click" Text="Validate" /></br>
</form>
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">
<h2>Fake OTP Simulation</h2>
Enter "John"
</br>
Enter OTP 
<script type='text/javascript'>
    var pass = String(getRandomInt(0, 9)) + String(getRandomInt(0, 9)) + String(getRandomInt(0, 9)) + String(getRandomInt(0, 9));
    document.write(pass);
    document.getElementById('<%= OtpHiddenField.ClientID %>').value = pass;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:43:26.273

您可以将生成的值插入将与表单一起发布的隐藏字段中。

```
<asp:Content ID="Content2" ContentPlaceHolderID="HeadContent" Runat="Server">
    <form id="form1" runat="server">
        Username: <asp:TextBox ID="txtUserName" runat="server" /><br/>
        OTP: <asp:TextBox ID="txtOTP" runat="server" /><br/>
        <asp:Button ID="btnValidate" runat="server" onclick="btnValidate_Click" Text="Validate" /><br/>
        <asp:HiddenField ID="OtpHiddenField" runat="server" />
</form>
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" Runat="Server">
<h2>Fake OTP Simulation</h2>
Enter "John"
<br/>
Enter OTP 
<script type='text/javascript'>
    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    var pass = String(getRandomInt(0, 9)) + String(getRandomInt(0, 9)) + String(getRandomInt(0, 9)) + String(getRandomInt(0, 9));
    document.write(pass);
    document.getElementById('<%= OtpHiddenField.ClientID %>').value = pass;
</script>
</asp:Content> 
```

我希望你知道这种方法非常非常脆弱。

# api - WP7 上的诺基亚计数器

> ID：12407091
> 
> 赞同：2
> 
> 时间：2012-09-13T13:12:16.923
> 
> 标签：api, windows-phone-7

我下载了诺基亚计数器，但我不明白如果没有可以支持的 API，他们如何获得短信计数和通话持续时间？

他们有任何额外的 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:14:12.820

他们很可能拥有更深入的访问权限。毕竟，这仅适用于他们的设备，这意味着他们不仅可以退出沙盒，还可以访问自己的专有 API。

它类似于 Youtube 应用程序、Adobe Reader 应用程序和市场的深层链接。

我真的很想访问这样的 API：/

# javascript - 使用向下箭头键聚焦下一个输入（与 tab 键一样）

> ID：12407093
> 
> 赞同：16
> 
> 时间：2012-09-13T13:12:22.913
> 
> 标签：javascript

我有一个巨大的输入表单和字段供用户输入。

在用户使用 tab 键移动到下一个字段的表单中，在使用 javascript 禁用 tab 键的中间有一些隐藏字段和只读文本框。

现在用户发现很难使用 Tab 键，并且希望在键盘的向下箭头键上具有相同的功能。

我正在使用下面的代码来调用 js 上的 tab 键代码但不工作，请一些人帮助我。

```
function handleKeyDownEvent(eventRef)
{ 
 var charCode = (window.event) ? eventRef.keyCode : eventRef.which;

 //alert(charCode);

 // Arrow keys (37:left, 38:up, 39:right, 40:down)...
 if (  (charCode == 40) )
 {

  if ( window.event )
   window.event.keyCode = 9;
  else
   event.which = 9;

  return false;
 }

 return true;
}

<input type="text"   onkeydown=" return  handleKeyDownEvent(event);" > 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T13:16:53.910

Using [jQuery](http://jquery.com/), you can do this :

```
$('input, select').keydown(function(e) {
    if (e.keyCode==40) {
        $(this).next('input, select').focus();
    }
}); 
```

When you press the down arrow key (keyCode 40), the next input receives the focus.

[DEMO](http://jsfiddle.net/dMJvv/1/)​</p>

**EDIT :**

In Vanilla JS, this could be done like this :

```
function doThing(inputs) {    
    for (var i=0; i<inputs.length; i++) {
        inputs[i].onkeydown = function(e) {
            if (e.keyCode==40) {
                var node = this.nextSibling;
                while (node) {
                    console.log(node.tagName);
                    if (node.tagName=='INPUT' || node.tagName=='SELECT') {
                        node.focus();
                        break;
                    }
                    node = node.nextSibling;                
                }
            }
        };
    };
}
doThing(document.getElementsByTagName('input'));
doThing(document.getElementsByTagName('select')); 
```

Note that you'd probably want to map the up key too, and go to first input at last one, etc. I let you handle the details depending on your exact requirements.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T10:42:31.593

这是我的最终工作代码：

```
$('input[type="text"],textarea').keydown( function(e) {
    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;

    if(key == 40) {
        e.preventDefault();
        var inputs = $(this).parents('form').find(':input[type="text"]:enabled:visible:not("disabled"),textarea');

        inputs.eq( inputs.index(this)+ 1 ).focus();
        inputs.eq( inputs.index(this)+ 1 ).click();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:17:13.307

If I understand correctly, some fields are read-only, so the tab key still *activates* them, even though they are read-only, and this is annoying, as you have to press the tab key perhaps several times to get to the next editable field. If that is correct, then an alternate solution would be to use the `tabindex` attribute on your input fields, indexing each one so that the read-only and otherwise non-editable fields aren't selected. You can find more info on the tabindex attribute [here](http://www.w3schools.com/jsref/prop_html_tabindex.asp "W3Schools Tabindex").

# java - JSF 页面中的导航按钮

> ID：12407099
> 
> 赞同：0
> 
> 时间：2012-09-13T13:12:32.993
> 
> 标签：java, jsf, jsf-2

我在 faces-config.xml 中有一个带有导航规则的 JSF 按钮：

```
<h:commandButton id="newzone" styleClass="lbimage" value="New Zone" action="#{bean.navigateToNewZone()}">
    <f:ajax render="@form"></f:ajax>
</h:commandButton>

// Navigate to New Zone page
public int navigateToNewZone(){
    return 11472;
}

<navigation-rule>
    <description>Navigation rule to New Zone page</description>
    <from-view-id>/ZonesList.xhtml</from-view-id>
    <navigation-case>
        <from-action>#{ZonesController.navigateToNewZone()}</from-action>
        <from-outcome>11472</from-outcome>
        <to-view-id>/NewZone.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

我的问题是如何简化导航？我不想将导航规则添加到 faces-config.xml 中。有没有办法从 JSF 按钮直接打开新页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:08:59.327

> *有没有办法从 JSF 按钮直接打开新页面？*

只需使用[`<h:button>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/button.html)而不是[`<h:commandButton>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/commandButton.html). 您根本不需要 POST 请求。

```
<h:button value="New Zone" outcome="/NewZone.xhtml" /> 
```

请注意，新的 JSF 2.0“隐式导航”功能将隐式使用“from-outcome”作为“to-view-id”，因此您确实也可以直接使用“to-view-id”`<h:commandButton action>`或返回值作为由另一个答案暗示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:19:20.750

您也可以`action="/NewZone.xhtml"`直接使用，无需在`faces-config.xml`.

# django - Apache 无法访问为 Django 项目设置的虚拟环境

> ID：12407100
> 
> 赞同：2
> 
> 时间：2012-09-13T13:12:36.953
> 
> 标签：django, apache, virtualenv

我创建了一个名为“ `pyapps`”的虚拟环境，并在其中安装了 pinax 和 django。我已经安装了 apache 2 和 mod_wsgi `apache`。我在我的 django 项目（`testproject`）中创建了一个名为“”的目录，并将“ `django.wsgi`”文件放在该目录中。这是内容我的wsgi文件：

```
import os
import sys

# put the Django project on sys.path
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "../../")))

os.environ['DJANGO_SETTINGS_MODULE'] = 'textpisodes.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

然后我创建了一个目录' `/check/www`'并将我的项目文件夹和`pyapps`文件夹放在' `/check/www`'中。我在 777 上设置了 chmoded `/check/www`。

最后我创建了一个虚拟主机，它的内容如下：

```
<VirtualHost *:80>
    ServerAdmin myemail
    ServerName djangoserver

    WSGIDaemonProcess textpisodes user=rajat threads=10 python-path=/check/www
    WSGIProcessGroup textpisodes

    WSGIScriptAlias / /check/www/textpisodes/apache/django.wsgi
    <Directory /check/www/textpisodes/apache>
        Order deny,allow
        Allow from all
    </Directory>

    ErrorLog /var/log/apache2/error.log
    LogLevel warn

    CustomLog /var/log/apache2/access.log combined
</VirtualHost> 
```

现在，当我尝试访问“http://djangoserver”时，我得到的只是`Internal Server Error`。这是我的 apache 日志文件的内容。

```
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1] mod_wsgi (pid=4890): Target WSGI script '/check/www/textpisodes/apache/django.wsgi' cannot be loaded as Python module.
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1] mod_wsgi (pid=4890): Exception occurred processing WSGI script '/check/www/textpisodes/apache/django.wsgi'.
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1]   File "/check/www/textpisodes/apache/django.wsgi", line 9, in <module>
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1]     import django.core.handlers.wsgi
[Thu Sep 13 18:39:51 2012] [error] [client 127.0.0.1] ImportError: No module named django.core.handlers.wsgi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:26:08.207

您需要添加您的虚拟环境路径，以便 apache/python 可以在那里找到模块。

要么把它放在你的 apache 配置中（在`VirtualHost`入口之外）

```
WSGIPythonPath /home/me/virtualenv/env1/lib/python2.7/site-packages 
```

或者把它放在`sys.path`你的 wsgi 文件中。

# asp.net - ASP Ajax 控件工具包日历扩展器未正确显示

> ID：12407102
> 
> 赞同：1
> 
> 时间：2012-09-13T13:12:43.950
> 
> 标签：asp.net, asp.net-ajax

ASP Ajax 控制工具包日历扩展器未正确显示。仅显示文本值，并且看起来未应用 CSS。我试图禁用页面的所有 CSS 定义，但仍然无法正确显示。

```
 <%@ Page Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true"
        CodeBehind="DataDownload.aspx.cs" Inherits="myapp.DataDownload" %>

    <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

    <asp:Content ID="head_content" ContentPlaceHolderID="head" runat="server">

    </asp:Content>
    <asp:Content ID="body_content" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>

     <asp:TextBox ID="txtFromDate" CssClass="inp-form" runat="server"></asp:TextBox>
     <asp:CalendarExtender ID="calFromDate" runat="server" TargetControlID="txtFromDate" >
     </asp:CalendarExtender>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:56:37.780

尝试在页面上评论现有的 Js 文件。

原因：简单，正如我们所知，[page load complete] 方法上的 ajax 使 javascript 代码运行起来，这与页面上现有的 javascript/jquery 冲突，这会导致任一功能出现故障。

# java - 无法在 java swing 应用程序中设置按钮的位置

> ID：12407103
> 
> 赞同：0
> 
> 时间：2012-09-13T13:12:46.440
> 
> 标签：java, swing, layout, jbutton, layout-manager

我是 Java 新手，正在尝试开发一个基本的 Swing 应用程序。我想设置按钮的位置`JFrame`。我试图做到这一点，但无法做到这一点，这是我的代码。我正在使用 eclipse 进行开发

```
public class MyUI extends JFrame {

    JButton button1 = new JButton("Click");
    JTextField tb1 = new JTextField(5);
    JPanel panel1 = new JPanel();

    public MyUI() {
        super("Test");
        setVisible(true);
        this.setLayout(null);
        panel1.setLayout(null);
        panel1.setVisible(true);
        button1.setVisible(true);
        panel1.add(button1);
        add(panel1);
        panel1.setLocation(10, 10);
        button1.setLocation(10, 10);    
        setDefaultCloseOperation(EXIT_ON_CLOSE);    
        button1.addActionListener(this);
    }

    public static void main(String[] args) {
        MyUI gui = new MyUI();
        gui.setSize(400, 300);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:22:26.260

1.为什么你把两个放在`JComponents`同一个`Bounds`

```
panel1.setLocation(10, 10);
button1.setLocation(10, 10); 
```

2.看看[Initials Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

3.`public class MyUI extends JFrame {`

应该

```
public class MyUI extends JFrame implements ActionListener{ 
```

4.不要扩展`JFrame`，创建一个局部变量

5.`setVisible(true);`应该（以这种形式）只有最后一行代码进入`MyUI()`构造函数

6.很重要的`setVisible(true);`问题，你看得见`JFrame`再补充`JComponent`

7.不要使用`NullLayout`，正确使用`LayoutManager`，在你删除`this.setLayout(null);`和 `panel1.setLayout(null);`添加的情况下`JComponents`可以看到

8.在构造函数中使用`pack()`before`setVisible(true)`作为最后两行代码

编辑（通过使用`built_in LayoutManagers`, `BorderLayout`for`JFrame`和`FlowLayout`for `JPanel`）

```
import java.awt.event.*;
import javax.swing.*;

public class MyUI extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    private JButton button1 = new JButton("Click");
    private JTextField tb1 = new JTextField(5);
    private JPanel panel1 = new JPanel();

    public MyUI() {
        super("Test");
        panel1.add(tb1);
        panel1.add(button1);
        add(panel1);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        button1.addActionListener(this);
        pack();
        setVisible(true);
    }

    public void actionPerformed(ActionEvent e) {
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyUI testing = new MyUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:40:29.707

看不到您的面板和按钮，因为它们的大小为零。添加类似：

```
panel1.setSize(100, 100);
button1.setSize(80, 30); 
```

或者使用`setBounds`更方便的方法同时设置位置和大小：

```
panel1.setBounds(10, 10, 100, 100);
button1.setBounds(10, 10, 80, 30); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T17:59:41.113

想提出一些建议，虽然它不是你问题的直接答案，但从我的角度来看它仍然很重要......

您可以使用`Group Layout`NetBeans 团队早在 2005 年开发的应用程序，使用起来非常棒......现在尝试使用`Windows Builder Pro`Google 免费提供的应用程序......您可以立即启动并运行您的应用程序...... ...

# php - 如何设计应该使用 URI 来选择内容的文档/内容应用程序

> ID：12407104
> 
> 赞同：0
> 
> 时间：2012-09-13T13:12:47.530
> 
> 标签：php, web-applications, apache2, apache

我试图弄清楚如何设计一个在目录结构中包含文档（html 格式）/内容的应用程序。我想要的是 URL 应该决定应该呈现哪个文档。例如 www.mydomain.com/docs/read_this 应该以某种方式帮助我呈现名为“read_this”的内容。

我还希望用户能够全面搜索文档。首先，我打算将所有文档存储在 MySQL 中，并使用内置的完整搜索支持。但我陷入了如何解决 URI 与内容的问题。由于应该可以创建或编辑内容，我认为将其存储在数据库中会比将其放入文件更容易。

这是正常的做法，很多网站都是这样实现的。不过，我找不到任何关于如何解决它的信息。也许用于谷歌搜索的词与其他信息相似；文档、目录、结构、内容、URI 等...

我在 CentOS 6.2 上使用 Apache/httpd 和 PHP。

解决上述问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:24:01.780

您几乎是在创建一个 REST 接口，但由于您想直接提供文档，所以并不完全如此。

我建议这样的结构：

*   `http://example.com/docs/`：应用程序的根级别（显示有关应用程序的一些信息
*   `http://example.com/docs/view/read_this`：显示名为“read_this”的文档
*   `http://example.com/docs/search/keyword`：显示包含关键字“keyword”的文档列表

添加“视图”和“搜索”父“文件夹”可防止冲突；如果您只是`http://example.com/docs/read_this`作为文档视图架构（并保留搜索架构原样），您将永远无法命名文档，因为这会与特殊术语`search`冲突。`search`您还提到了编辑，这可以通过`http://example.com/edit/read_this`模式来完成。

为了解析所有这些 URI，您需要在 Apache 配置中使用 Mod_Rewrite 将它们指向您的 PHP 脚本。

**编辑：**这是`.htaccess`所需的 PHP 链接

## .ht 访问：

它位于文件夹的根`docs`目录中，旁边是`index.php`：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteRule ^([a-z]+)/([A-Za-z0-9_-]+)/?$ index.php?action=$1&target=$2 [QSA,L]
</IfModule> 
```

这在技术上意味着人们可以输入 URL`http://example.com/docs/view/read_this`或`http://example.com/docs/index.php?action=view&target=read_this`得到相同的结果

## 索引.php：

```
<?php
$action = (isset($_GET['action']) && $_GET['action'] != '')? $_GET['action'] : false;
$target = (isset($_GET['target']) && $_GET['target'] != '')? $_GET['target'] : false;
switch($action) {
  case 'view':
    viewDoc($target); // Do your view logic here
    break;
  case 'search':
    doSearch($target); // Do your search logic here
    break;
  case 'foobar':
    // Add new functionality here
    break;
  default:
    errorOut('No such action as '.$action);
    break;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:27:03.680

您所描述的通常称为 RESTful URI。有太多方法可以实现这一点，不能说“这是正确的方法”。

例如，如果您使用 apache，并且您只希望这种映射发生在表单的 URI 上，`www.mydomain.com/docs/read_this`那么您可以`.htaccess`在 docs 文件夹中有一个重定向（通过[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)）所有请求到单个 php 脚本（如 docs/index.html）。 php) 然后可以剖析`$_SERVER['REQUEST_URI']`变量以获取 URI ( `read_this`) 中的文档名称，然后从您的 mysql DB 请求适当的文档。

# java - 在战争中运送的罐子与码头发生冲突

> ID：12407105
> 
> 赞同：2
> 
> 时间：2012-09-13T13:12:50.417
> 
> 标签：java, jsp, jar, jetty

> **可能重复：**
> [org.apache.jasper.el.E​​LContextImpl 不能转换为 org.apache.jasper.runtime.ELContextImpl](https://stackoverflow.com/questions/12384779/org-apache-jasper-el-elcontextimpl-cannot-be-cast-to-org-apache-jasper-runtime-e)

我从 Eclipse 中将一个 web 服务项目（包含 jsp 页面）导出到一个 war 文件中，并将其部署在 Jetty 8.1.5 中。它在我的机器上运行良好。但是在另一台机器（windows server 2003）上的 Jetty 8.1.3 上部署相同的 war 文件后，当我转到 index.jsp 页面时，它会给出 HTTP 错误 500 和以下异常：

`org.apache.jasper.el.ELContextImpl cannot be cast to org.apache.jasper.runtime.ELContextImpl`

我两天前发布的[这个问题](https://stackoverflow.com/questions/12384779/org-apache-jasper-el-elcontextimpl-cannot-be-cast-to-org-apache-jasper-runtime-e/12392852#12392852)的完整跟踪和更多细节。`WEB_INF/lib`虽然这两个屏幕截图中提供了我所拥有的所有罐子：

![在此处输入图像描述](../Images/ee20481a66ba09f2f79c0cb6d21e374f.png) ![在此处输入图像描述](../Images/da01f3b1d55083dfd2833662dafaf8ff.png)

两天在互联网上寻找解决方案导致知道问题是由战争文件中运送的罐子和其他罐子（我猜是码头罐子）之间的冲突引起的。

问题是：如何找出导致问题的 jar？我尝试浏览这些 jar 的内容以寻找类`ElContextImpl`但没有找到任何东西？有什么想法吗？

* * *

编辑：

我尝试将我的本地整个 Jetty 8.1.5 复制到服务器并从那里启动码头..但仍然没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:29:36.537

您的 WAR 文件包含一些不必要的 JAR `servlet-api-2.4.jar`，例如应该是 Jetty 安装的一部分（可能在另一个版本中）。

乍一看，您应该删除所有`jetty-*.jar`, `servlet-api-2.4.jar`, `javax.servlet.*.jar`. 如果您从 8.1.5 Jetty 安装中获取这些内容，则可能会与您的 8.1.3 安装发生冲突。

# ruby - 清除输入字段并使用 Watir 输入新信息？（鲁比，瓦提尔）

> ID：12407107
> 
> 赞同：8
> 
> 时间：2012-09-13T13:12:51.033
> 
> 标签：ruby, watir

非常肯定你必须使用.clear，或者可能不是，因为它似乎对我不起作用，也许我只是错误地实施它我不确定。

例子：

```
browser.div(:id => "formLib1").clear.type("input", "hi") 
```

谁能告诉我如何简单地清除一个字段然后输入一个新字符串？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T13:17:26.697

Assuming we are talking about a text field (ie you are not trying to clear/input a div tag), the `.set()` and `.value=` methods automatically clear the text field before inputting the value.

So one of the following would work:

```
browser.text_field(:id, 'yourid').set('hi')
browser.text_field(:id, 'yourid').value = 'hi' 
```

Note that it is usually preferred to use `.set` since `.value=` does not fire events.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-10T17:11:54.420

我有一个类似的问题，并且由于某种原因，`.set()`并且`.value=`不可用/无法为该元素工作。

元素是 Watir::Input:

```
browser.input(:id => "formLib1").to_subtype.clear 
```

清除该字段后，我能够输入文本。

```
browser.input(:id => "formLib1").send_keys "hi" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-23T19:15:19.923

我有一个类似的问题，并且由于某种原因，`.set()`并且`.value=`不适用于该元素。

该元素是 Watir::HTMLElement：

```
[2] pry(#<Object>)> field.class
=> Watir::HTMLElement

field.methods.grep /^(set|clear)$/
=> [] 
```

我求助于发送退格键，直到该字段的值为`""`：

```
count = 0
while field.value != "" && count < 50
  field.send_keys(:backspace)
  count += 1
end
field.send_keys "hi" 
```

# c# - 如何创建嵌套属性

> ID：12407113
> 
> 赞同：-3
> 
> 时间：2012-09-13T13:13:01.003
> 
> 标签：c#, properties

嵌套属性是如何`dataTable.Columns[0].ColumnName`创建的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:16:34.270

它们本身不是“创建”的，它只是`Columns`某种类型的对象的集合，并且该类型公开了 property `ColumnName`。

```
class Some
{
    string Property { get; set; }
}
class Foo
{
    public List<Some> Objects { get; set; }
}

foo.Objects[0].Property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:21:53.203

`dataTable.Columns[0].ColumnName`结合了 a 的概念和 a`property`的概念`indexer`：

*   物体`dataTable`公开了一个名为`Columns`
*   `Columns`属于集合类型，因此`indexer`使用 an 来寻址该集合中的某个元素，`Columns[0]`对于第一个（第一个加零），`Columns[1]`对于第二个（第一个加一），aso
*   这些元素中的每一个都是一个对象，暴露了属性`ColumnName`

所以`dataTable.Columns[0].ColumnName`应该读作“从对象数据表的集合属性列中获取第一个元素的属性列名”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:17:32.653

Property returns an object which has own properties and so on

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T13:18:49.013

在您的示例中，dataTable.Columns 是一个简单的索引属性，它返回另一个对象，该对象具有名为 ColumnName 的属性。

例如：

```
class Table
{
    private Column[] columns;
    public Column Columns[int index]
    {
        get
        {
            return columns[index];
        }
    }
}

class Column
{
    public string ColumnName
    {
        get;
        set;
    }
} 
```

（不是 100% 确定语法，我有一段时间没用过 C#了）

# objective-c - 连接objective-C字符串并实现语法正确性的最简单方法（使用'and'连词）

> ID：12407124
> 
> 赞同：1
> 
> 时间：2012-09-13T13:13:33.123
> 
> 标签：objective-c, string, nsstring, grammar

在 Objective-C 中，将 NSStrings 列表（NSArray）组合成一个用逗号分隔的单个 NSString 的最简单和最好的方法是什么，在列表的最后一项之前使用语法正确的终端连词“和”？

```
NSArray *anArray = [NSArray arrayWithObjects:@"milk", @"butter", @"eggs", @"spam", nil]; 
```

从这个数组中，我想要 NSString `@"milk, butter, eggs, and spam"`。

更一般地说，如果列表的长度超过两个，我希望`", "`在每个项目之间，除了最后一个和倒数第二个（应该有`", and "`）。如果列表有两个项目长，我只想要不`' and '`带逗号的。如果列表是一项长，我想要数组中的单个字符串。

我喜欢这样简单的东西：

```
NSString *newString = [anArray componentsJoinedByString:@", "]; 
```

但这当然省略了“和”连词。

是否有比以下更简单和/或更快的 Objective-C 方式：

```
- (NSString *)grammaticallyCorrectStringFromArrayOfStrings:(NSArray *)anArray {
    if (anArray == nil) return nil;
    int arrayCount = [anArray count];
    if (arrayCount == 0) return @"";
    if (arrayCount == 1) return [anArray objectAtIndex:0];
    if (arrayCount == 2) return  [anArray componentsJoinedByString:@" and "];

    // arrayCount > 2
    NSString *newString = @"";
    for (NSString *thisString in anArray) {
        if (thisString != [anArray objectAtIndex:0] && thisString != [anArray lastObject]) {
            newString = [newString stringByAppendingString:@", "];
        }
        else if (thisString == [anArray lastObject]) {
            newString = [newString stringByAppendingString:@", and "];
        }
        newString = [newString stringByAppendingString:thisString];
    }
    return newString;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:21:34.533

对于循环，我可能会做类似的事情

```
NSMutableString *newString = [NSMutableString string];
NSUInteger lastIndex = arrayCount - 1;
[anArray enumerateObjectsUsingBlock:^(NSString *thisString, NSUInteger idx, BOOL *stop) {
    if (idx != 0)
        [newString appendString:@","];
    if (idx == lastIndex)
        [newString appendString:@" and "];

    [newString appendString:thisString];
}]; 
```

虽然我猜这并不是真正的少行。

# android - 如何使用 Parcelable 将对象从一个活动转移到另一个活动？

> ID：12407128
> 
> 赞同：0
> 
> 时间：2012-09-13T13:13:42.603
> 
> 标签：android, android-activity, parcelable

我正在使用 parcelable 将一个对象从一个活动转移到另一个活动，但它显示 null 作为在另一个活动中检索该对象。有什么建议么？

这是代码：

```
public class TPackage implements Parcelable {

// private static final long serialVersionUID = 1L;
private int cost;
private String name;
private int totalChannels;
private HashMap<String, Channel> channelList;

public int getCost() {
    return cost;
}

public void setCost(int cost) {
    this.cost = cost;
}

public int getTotal_channels() {
    return totalChannels;
}

public void setTotal_channels(int total_channels) {
    this.totalChannels = total_channels;
}

public HashMap<String, Channel> getList() {
    return channelList;
}

public void setList(HashMap<String, Channel> list) {
    this.channelList = list;
}

public void put(String name, Channel c) {
    channelList.put(name, c);
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {

}

public static final Parcelable.Creator<TPackage> CREATOR = new Parcelable.Creator<TPackage>() {
    public TPackage createFromParcel(Parcel in) {
        return new TPackage();
    }

    public TPackage[] newArray(int size) {
        return new TPackage[size];
    }
}; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:38:43.323

这是使用 parcel andorid 传输对象的正确方法

```
public class TPackage implements Parcelable {

// private static final long serialVersionUID = 1L;
private int cost;
private String name;
private int totalChannels;
private HashMap<String, Channel> channelList;

public TPackage(int cost, String name, int totalChannels,
        HashMap<String, Channel> channelList){
    this.cost = cost;
    this.name = name;
    this.totalChannels = totalChannels;
    this.channelList = channelList;
}

public TPackage(Parcel in){
    //same order as that in writeToParcel()
    cost = in.readInt();
    name = in.readString();
    totalChannels = in.readInt();
    Bundle bundle = in.readBundle();
    channelList = (HashMap<String, Channel>) bundle.getSerializable("channelList");
}

public int getCost() {
    return cost;
}

public void setCost(int cost) {
    this.cost = cost;
}

public int getTotal_channels() {
    return totalChannels;
}

public void setTotal_channels(int total_channels) {
    this.totalChannels = total_channels;
}

public HashMap<String, Channel> getList() {
    return channelList;
}

public void setList(HashMap<String, Channel> list) {
    this.channelList = list;
}

public void put(String name, Channel c) {
    channelList.put(name, c);
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeInt(cost);
    dest.writeString(name);
    dest.writeInt(totalChannels);
    //easiest way to transfer HashMap via parcel
    Bundle bundle = new Bundle();
    bundle.putSerializable("channelList", channelList);
    dest.writeBundle(bundle);
}

public static final Parcelable.Creator<TPackage> CREATOR = new Parcelable.Creator<TPackage>() {
    public TPackage createFromParcel(Parcel in) {
        return new TPackage(in);
    }

    public TPackage[] newArray(int size) {
        return new TPackage[size];
    }
};

} 
```

[已编辑] 这是发件人活动

```
public class MyActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TPackage tPackage = new TPackage(10, "hello", 123, new HashMap<String, Channel>());
        Intent intent = new Intent(this, NActivity.class);
        intent.putExtra("parcel", tPackage);
        startActivity(intent);
    }
} 
```

这是接收器活动

```
public class NActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Intent intent = getIntent();
        TPackage tPackage = intent.getParcelableExtra("parcel");
        HashMap<String, Channel> hashMap = tPackage.getList();
        Log.d("MyTag", "cost : " + tPackage.getCost() + " name: " + tPackage.getName()
                + " total channels: " + tPackage.getTotal_channels() + " list count: " + hashMap.size());
    }
} 
```

日志输出

```
09-13 21:57:20.578: DEBUG/MyTag(1478): cost : 10 name: hello total channels: 123 list count: 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:24:59.207

您可能需要在 createFromParcel 和 writeToParcel 中实际放置一些内容（例如对象的内容）

# metaprogramming - 在 D 中编译时生成代数表达式

> ID：12407131
> 
> 赞同：1
> 
> 时间：2012-09-13T13:13:53.717
> 
> 标签：metaprogramming, d

让我们考虑一个定义如下的函数：

```
f(n, x) = F(n, x, f(n-1, x))
f(0, x) = g(x) 
```

在我的程序中， 的值`n`在编译时总是已知的。我想优化我的程序并避免此函数中的循环或递归调用。整个表达式`f(n, x)`应该在编译时生成，以便编译器对其进行优化。

直接的解决方案是“手动”生成一个包含该表达式和使用`mixin`语句的字符串。我不喜欢这种方式。

编译器是否能够/应该展开具有已知深度的递归？

即会按照我想要的方式优化以下功能：

```
double f(uint n)(double x)
{
    static if(n == 0)
        return g(x);
    else
        return F(n, x, f!(n-1)(x));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T17:22:01.527

据我所知，不能*保证语言规范的优化。*尽管您的示例对于编译器的优化看起来很简单。

**简单的实验**：我写了做一些简单计算的存根函数 g() 和 F()。使用 dmd -gc -O -inline" 编译。使用 objdump 检查：

```
0000000000426860 <_Dmain>:
  426860:   55                      push   %rbp
  426861:   48 8b ec                mov    %rsp,%rbp
  426864:   f2 48 0f 10 05 2b a7    rex.W movsd 0x2a72b(%rip),%xmm0        # 450f98 <_IO_stdin_used+0x38>
  42686b:   02 00 
  42686d:   be 0a 00 00 00          mov    $0xa,%esi
  426872:   48 bf 28 10 66 00 00    movabs $0x661028,%rdi
  426879:   00 00 00 
  42687c:   e8 6f 01 00 00          callq  4269f0 <_D3std5stdio4File14__T5writeTdTaZ5writeMFdaZv>
  426881:   31 c0                   xor    %eax,%eax
  426883:   5d                      pop    %rbp
  426884:   c3                      retq 
```

如您所见，所有内容实际上都是在编译期间计算的，并替换为单个数值，该数值立即作为参数打印到 writeln。我还检查了在运行时读取 x 并且没有调用 f() 的修改。ASM 列表相当长，所以我不会复制它。

此外，如果您的参数在编译时已知，那么**CTFE**（编译时函数评估）可能是一个更好的解决方案，因为它得到了保证。

# html - 透明 PNG 在 Chrome 和 IE 中具有灰色边框，在 FireFox 中不可见

> ID：12407132
> 
> 赞同：1
> 
> 时间：2012-09-13T13:13:57.767
> 
> 标签：html, png, invisible

为什么 PNG 在 Google Chrome 和 IE 中有灰色边框？

另外，为什么它在 FireFox 中不可见？

[小提琴](http://fiddle.jshell.net/Nr5tb/)

HTML

```
<html>
    <head>
        <title>Inline Border</title>
        <style type="text/css" media="screen">
            .inline-image {
                width: 16px;
                height: 16px;
                background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAfklEQVR42mNgoDZITk4WosiAtLS0M6mpqb1Amp9cAy4B8X8gfpWenp5MiQEwfB6IbSgxAIaXArEcJQaA8Ddg+NQVFhZykmsADG8MDQ1lJseA5wQDFocBP0FRm5WVxUNOGGwEJi4VcmLhKtC5HuSkg8NA5+bjDCRCAG8UDUoAAIw8kVdwMG+3AAAAAElFTkSuQmCC) 0px 0px no-repeat no-repeat;
            }
        </style>
    </head>
    <body>
        <img class="inline-image" />
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:23:19.927

检查这个jsfiddle：[http](http://fiddle.jshell.net/Nr5tb/7/) ://fiddle.jshell.net/Nr5tb/7/ 。我希望你能从中得到答案。

您有一个没有 src 属性的 img 元素，但它确实应用了背景图像样式。如果您指定了 src 属性，我会说灰色边框是图像所在位置的“占位符”。如果您不想要“前景”图像，请不要使用我在 jsfiddle 中提到的 img 标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:11:49.903

如果你想使用背景图片，你应该使用 div 标签。

否则，如果你想在这种情况下使用 img 标签，你应该添加带有透明图像的 src 属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T13:19:37.290

您需要在 css 中再添加一种样式

```
.inline-image {

    display: block;
            } 
```

或者您需要将`<img>`标签更改为`<div>`

# javascript - 如何在我的网站上创建一个表单来更改我服务器上其他页面上的元标记？这可能吗？

> ID：12407134
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:14:01.540
> 
> 标签：javascript, php, forms, metadata, meta-tags

如何在我的网站上创建一个表单来更改我服务器上其他页面上的元标记？这可能吗？我想添加一个表单，我网站上的用户可以在其中输入数据，这将更改我服务器上他们各自页面上的元数据。

即约翰在我的服务器上有一个简历页面，并且想要更改页面标题、关键字等元信息或完全重定向页面。John 不知道如何编辑 HTML，所以他填写一个简单的表格就可以了。

有没有办法在任何脚本语言（HTML、JavaScript、PHP 等）中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:16:51.040

How are the other pages stored?

If they are static HTML files, then you have to parse (don't use regular expressions!) the files and overwrite or create the `<meta>` tags!

Therefore you have to use a server-side language like PHP or Perl.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:20:28.743

您可以动态更改元标记或专门针对页面。但是您必须将元标记值保存在某处，例如 MySQL 数据库，您可以从数据库中检索数据并填充元标记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:15:45.017

在下拉选择和元标记之间建立对应关系，然后在您的 php 中构建页面代码时，只需添加在其 html 版本中使用的元选择。

# java - 我可以在 Rhino 中将 Javascript 数组作为通用集合传递吗？

> ID：12407137
> 
> 赞同：0
> 
> 时间：2012-09-13T13:14:14.263
> 
> 标签：java, javascript, rhino

我希望能够将 JavaScript 数组传递给需要`Collection`. 写起来真的很笨拙

```
var wrapper = new Packages.java.util.ArrayList();
wrapper.add("one");
wrapper.add("two");
// etc
new MyJavaThing(wrapper); 
```

它有效，但我在 JS 中编写脚本以*避免*如此冗长。理想情况下我会打电话

```
new MyJavaThing(["one", "two"]); 
```

但是[NativeArray](http://stderr.org/doc/rhino-doc/apidocs/org/mozilla/javascript/NativeArray.html)没有实现`Collection`或其任何子接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:14:14.263

这不是我最喜欢的解决方案，但可以使用

```
new MyJavaThing(java.util.Arrays.asList(["one","two"])); 
```

您仍然必须注意，您所调用的东西是在 Java World 中，但至少它是一个合理的单线。

# javascript - 使用 setViewBox 时在 SVG/Raphael 中创建 HUD（缩放不变文本/标签）

> ID：12407140
> 
> 赞同：0
> 
> 时间：2012-09-13T13:14:17.173
> 
> 标签：javascript, svg, raphael

我正在创建 Raphael Web 应用程序以允许平移和缩放平面图。这一切都很好，但我似乎无法找到如何将比例不变文本（或其他对象）添加到界面上。当用户平移/缩放时，一切都会缩放和移动。尽管有任何用户平移/缩放，我基本上希望 HUD 功能保持在其位置/大小。

我目前使用缩放/平移`setViewBox`

```
paper.setViewBox(x,y,newViewBoxWidth,newViewBoxHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:44:28.283

您的 UI 应该在您的平面图之上的单独的 Raphael 论文中。

普通 SVG 允许嵌套 SVG，但 Raphael 不允许，因为它必须提供 VML 后备。

# wireshark - 解释 802.11 Wireshark 跟踪中的帧控制字节

> ID：12407145
> 
> 赞同：13
> 
> 时间：2012-09-13T13:14:31.963
> 
> 标签：wireshark, wifi

我有一个`.pcap`我正在分析的 Wi-Fi 捕获 ( )，并且遇到了在我看来 802.11 规范和 Wireshark 对数据的解释之间的不一致之处。具体来说，我要分解的是 2 字节 802.11*帧控制*字段。

取自[http://www4.ncsu.edu/~aliu3/802.bmp](http://www4.ncsu.edu/~aliu3/802.bmp)，Frame Control 字段的子字段格式如下：

![帧控制子字段。](../Images/964dfd6f199d3786cb038143e3a2c9c9.png)

下面是让我感到困惑的数据包的 Wireshark 屏幕截图：

![Wireshark 中令人困惑的帧控制](../Images/953eb1885d1497fb9a533fb835b8a471.png)

因此，根据 Wireshark 屏幕截图，帧控制字段的标志部分（最后 8 位）是 0x22，这很好。版本/类型/子类型如何`0x08`与 Wireshark 对框架的描述相匹配，这让我感到困惑。

`0x08`= `0000 1000b`，我认为这将转换为 Version = `00`， Type = `00`（我认为这意味着*管理*而不是*数据*帧）和 Subtype = `1000`（我认为这将是一个信标帧）。所以我希望这个帧是一个管理帧，更具体地说，是一个信标帧。然而，Wireshark 将其报告为数据框。让我感到困惑的第二件事是 Wireshark 甚至`0x20`排在哪里`Type/Subtype: Data (0x20)`。

谁能为我澄清我对 802.11 规范/Wireshark 捕获的解释以及为什么两者不一致？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T01:04:43.307

您示例中的数据帧为 0x08，因为帧控件 (FC) 的该字节的布局。0x08 = 00001000 - 前 4 位 (0000) 是子类型。0000 是此帧的子类型 - 接下来的 2 位 (10) 是类型，它是十进制的 2，因此是数据类型帧 - 最后 2 位 (00) 是版本，即 0

下表将 FC 的 subtype-type-version 字节的十六进制值转换为几种帧类型。将 QoS 数据与正常数据帧进行比较可能真的有助于解决这个问题。请注意，桌子可能有一两个错误，因为我刚刚把它弄好了。

你是对的，1000 是一个信标帧，你只是在看错误的位。

![在此处输入图像描述](../Images/878488e8d3a842c744c2f849149f812e.png)

您有一个 radiotap 标头，您可以从 pcap API 中获取该类型的 dec 表示形式：

```
int type = pkt_data[20] >> 2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T08:55:06.213

这是一个常见的错误，肯定已经咬了我好几次了。

这取决于字节顺序。

当你有一个多字节数来表示时，问题就出现了，你首先放置/发送哪个字节？

自然（人）字节顺序是先放大部分，后放小部分，从左到右，也称为大端。请注意，从程序员的角度来看，每个字节中的位永远不会出错。

例如 1234 十进制需要 2 个字节，04D2 十六进制。你写/发送 04 D2 还是 D2 04 ？第一个是大端，第二个是小端。

更令人困惑的是，所涉及的机制可能使用不同的字节顺序。

有网络字节顺序，在这种情况下是 Little-endian，架构字节顺序（每个 CPU 架构可能不同）并且数据可能在缓冲区中，因此它会根据您是否从上到下读取缓冲区而有所不同- 自下而上或自下而上。

正如您的原始帖子中那样，对哪些位的解释也可能是“向后”的，这无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T14:23:45.553

我`wireshark version-2.4.3`在窗户上使用。我的数据帧捕获文件如下所示。

```
Frame control field = 0x0842 i.e., in binary format 0000 1000 0100 0010 
Framecontrol flag field = 0x42.i.e., in binary format 0100 0010 
```

因此，据我了解`LSB 8bits`，framecontrol 字段中的字段将对应于标志。

MSB 8bits 将对应于子类型、类型、版本，即在我的情况下`0000-subtype`是 & `10-type`& `00-version`。

这是子类型0的数据框。

在您的情况下，这可能是wireshark的错误。它应该显示帧控制字段`0x0822`而不是 0x2208。

标志字段正确显示为`0x22`.

在我的情况下，我正在使用并且在 flags 所在的位置`wireshark-2.4.3`显示帧控制字段是正确的。`0x0842``0x42`

**我的捕获文件：**

[![在此处输入图像描述](../Images/7b967d770f910d74ec04a37e2980e897.png)](https://i.stack.imgur.com/bnP4K.png)

# javascript - iPad和Android浏览器中的kineticJS精灵动画故障

> ID：12407150
> 
> 赞同：1
> 
> 时间：2012-09-13T13:14:43.437
> 
> 标签：javascript, html, kineticjs

我在移动浏览器（ipad / android）中使用精灵表时遇到问题，发生奇怪的行为，当我点击精灵动画时，舞台被多次放大和缩小，一切正常，直到点击发生. 有什么提示吗？唯一没有发生的浏览器是 ipad 2 中 ios 6 beta 的 safari。在本机 android 浏览器中会发生错误，但在 android chrome 中一切正常。在桌面浏览器中一切正常。

更新：问题是afterFrame，错误是索引无效。我不明白... afterFrame 是什么？我有 7 帧，如果后帧优于 2 帧，它会给出错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:20:48.057

你用的是什么版本？这听起来像是 v4.0.1 中已修复的错误。

[https://github.com/ericdrowell/KineticJS/wiki/Change-Log](https://github.com/ericdrowell/KineticJS/wiki/Change-Log)

# ruby-on-rails - Rails 在这种特定情况下如何使用join？

> ID：12407154
> 
> 赞同：0
> 
> 时间：2012-09-13T13:15:00.260
> 
> 标签：ruby-on-rails, activerecord, join

我有三个模型，每个模型都是这样连接的：`Groups`which has many `Students`which has many `Absences`.

`Absences`有一个名为`created_on`.

**我只有一个*组 id*，想获取今天*缺席*的所有*学生。***

 *我在我的`Student`模型中创建了这个方法：

```
# Inside student.rb

def self.absent_today_in_group (group)
 #SQLITE
 find(:all, :joins => :absences, :conditions => ["STRFTIME('%d', created_on) = ? AND STRFTIME('%m', created_on) = ?", Date.today.day, Date.today.month])

 #POSTGRES
 #find(:all, :joins => :absences, :conditions => ["EXTRACT(DAY FROM created_on) = ? AND EXTRACT(MONTH FROM created_on) = ?", Date.today.day, Date.today.month])
end 
```

为什么该查询不返回任何内容？然后我怎么能检查group_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:47:37.240

您使用的是什么版本的导轨？您可以在 Rails 3 中执行此操作：

```
def self.absent_today_in_group(group)
  joins(:absences, :group).where(
    'absences.created_on' => (Time.now.beginning_of_day..Time.now.end_of_day),
    'groups.id' => group.id
  )
end 
```

这将找到给定组今天缺席的所有用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:34:32.350

这不应该是 :where 而不是 :conditions 吗？*

# ajax - sharepoint 2010 Visual webpart 中的自动完成功能

> ID：12407159
> 
> 赞同：0
> 
> 时间：2012-09-13T13:15:10.947
> 
> 标签：ajax, sharepoint, sharepoint-2010, web-parts

我正在开发一个 Visual Web 部件，当用户在文本框中键入内容时（例如在 Google 搜索或 StackOverflow 中的问题标题），我需要在其中列出匹配的数据。

我得到了很多结果，但它适用于典型的 c# 应用程序。我正在寻找可以直接在我的可视化 Web 部件中实现的解决方案。我正在使用 SharePoint 2010 和 VS 2010。

我做了以下事情

安装 Ajax Control 工具包。将 Items 添加到 VS 工具箱并添加以下代码片段。

在 .ascx 文件中

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>
<asp:TextBox ID="txtMovie" runat="server"></asp:TextBox>
<asp:AutoCompleteExtender 
    ID="AutoCompleteExtender1" 
    TargetControlID="txtMovie"  ServiceMethod="GetCompletionList"
    runat="server" UseContextKey="True" /> 
```

在.ascx.cs

```
[System.Web.Script.Services.ScriptMethod()]
[System.Web.Services.WebMethod]      
public static string GetCompletionList(string prefixText, int count, string contextKey)
{           
    return "Hello";
} 
```

但是当我部署时，我收到了这个错误

> 只能将 ScriptManager 的一个实例添加到页面中。

我`<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>`从我的 .ascx 文件中删除了，但是之后由于一些 js 错误，我无法编辑我的共享页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:16:31.203

不知道为什么它不起作用，遇到了一个可以为您解决问题的 codeplex 功能：http: [//spautocomplete.codeplex.com/](http://spautocomplete.codeplex.com/)

另外，查看这个 jQuery 解决方案：[http ://sharepointwings.blogspot.in/2012/05/autocomplete-textbox-using-jquery-in.html](http://sharepointwings.blogspot.in/2012/05/autocomplete-textbox-using-jquery-in.html)

也有一个可从：Microsoft.Office.Search.WebControls.AutoCompleteExtender 问候，KS

# java - 将 VM 参数传递给 Apache Tomcat

> ID：12407163
> 
> 赞同：29
> 
> 时间：2012-09-13T13:15:18.873
> 
> 标签：java, apache, tomcat

我有一个带有名为“-Dfolder”的VM参数的webProject

我在 applicationContext 上使用该参数，如下所示：

```
<value>file:${FNET_CORE_CONFIG}/conf/${folder}/jdbc.properties</value> 
```

在 Eclipse 中，为了进行测试，我使用“运行配置”来设置如下值：

```
-Dfolder=Dev 
```

现在，我想在 Apache Tomcat 上测试我的 webapp，所以我需要设置/发送文件夹 VM Argument。

我该怎么做？

我必须使用 setenv.sh 吗？如何？。有人可以给我和例子吗？

谢谢和对不起我的英语

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-13T13:50:18.183

我不知道您使用的是什么版本的 Tomcat，但在 Tomcat 7 中的 catalina.sh 文件中，您可以指定变量 CATALINA_OPTS，此变量将传递给 jvm。

但也许设置环境变量并不是实现目标的最佳方式。也许最好是创建单独的“app.properties”文件，并将其包含在 applicationContext 中，如下所示：

```
<context:property-placeholder location="classpath*:app.properties" /> 
```

以及 catalina.sh 的解决方案

```
#   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
#                   "run" or "debug" command is executed.
#                   Include here and not in JAVA_OPTS all options, that should
#                   only be used by Tomcat itself, not by the stop process,
#                   the version command etc.
#                   Examples are heap size, GC logging, JMX ports etc. 
```

例子：

CATALINA_OPTS="-Dfolder=Dev"

**编辑：**

对于 Windows，它应该类似于`set CATALINA_OPTS="-Dfolder=Dev"`

**编辑：**

在 Spring 配置中，您可以像 ${propertyname} 一样使用系统属性，也可以包含带有属性定义的文件，with `context:property-placeholder`，并且在该文件中定义的所有属性也可以在配置中使用。

例如，您有基本集属性：config.properties，以及带有数据库连接设置的文件集（DEV.properties、UAT.properties、PROD.properties）。那么，如何为不同的环境包含不同的属性呢？可以通过多种方式完成，例如，在 catalina.bat 中设置系统属性

```
set CATALINA_OPTS="-Dbuild=DEV" 
```

并在 applicationConfig.xml

```
<context:property-placeholder location="classpath*:${build}.properties, classpath*:config.properties" /> 
```

或者，您可以创建不同的构建配置，并在最终的 WAR 中为每个构建配置仅包含一个属性（DEV、UAT、PROD）。在 applicationConfig 中设置如下：

```
<context:property-placeholder location="classpath*:*.properties" /> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-16T12:15:47.750

转到 $CATALINA_HOME 并`setenv.sh`通过添加带有值的参数来编辑文件。如果要批量处理多个参数，请使用`space`

例如

```
cd /opt/tomcat/bin/ 
sudo nano setenv.sh 
```

编辑该行

```
CATALINA_OPTS="${CATALINA_OPTS}" 
```

至

```
CATALINA_OPTS="${CATALINA_OPTS} -Dparam=value -Dparam2=value2" 
```

重启tomcat：

```
service tomcat restart 
```

您现在应该能够在运行时看到传递给 tomcat 的参数：

```
ps aux | grep tomcat 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-23T14:09:56.990

通过在与 catalina.bat 和 startup.bat 相同的目录中生成一个 setenv.bat 文件（如 catalina.bat 中的建议）并放入 .bat 的内容，使其在 Windows 中工作：

```
set CATALINA_OPTS="-DyourVariableName=yourValue" 
```

就这样。我喜欢这种方式，因为它看起来很干净

# wcf - WCF Azure 长时间运行的操作

> ID：12407170
> 
> 赞同：3
> 
> 时间：2012-09-13T13:15:48.830
> 
> 标签：wcf, azure

我有一个需要调用的 WCF 服务，以便调用将触发 2-3 小时的处理。我正在使用 Windows C# 客户端应用程序来调用服务并将超时设置为所有最大值。当我将它部署到 Windows Azure 时，客户端触发的 WCF 进程似乎在某个时刻后停止。客户端没有得到超时异常。我可以使用 Azure Worker Role，但该过程只能使用 WCF 代码完成，因为它是一个复杂的操作。换句话说，我不能只安排对数据库执行简单编辑/插入操作的 Worker Role。所以我有点鸡和蛋的问题。后台进程需要 WCF 代码来执行后台操作，但 WCF 在 Azure 上似乎会在一段时间后停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:29:50.393

这是因为[负载均衡器](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/12/windows-azure-load-balancer-timeout-details.aspx)。超时时间过去是 60 秒，但几个月前增加到“超过 60 秒”（取决于并发连接）。无论如何，您需要保持连接处于活动状态以避免超时。

我建议您尝试在您的 WCF 客户端/服务中实现此功能：[WCF Azure Net.TCP Keep Alive](http://code.msdn.microsoft.com/WCF-Azure-NetTCP-Keep-Alive-09f50fd9)

为什么不重新考虑您的架构？与其依赖连接（无论出于何种原因都可以断开连接），为什么不简单地让您的客户端将消息放入队列中呢？您的工作人员角色从队列中提取消息，进行 2-3 小时的处理，完成后将消息放入另一个队列。最后，您的客户端轮询该其他队列，一旦消息到达那里，它就知道该过程已完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:05:51.123

您可以将长时间运行的操作所需的代码放在单独的项目中。然后，您可以将此项目包含在您的 WCF 解决方案和您的 Worker Role 解决方案中。

然后后台进程将拥有完成操作所需的所有功能。

# symfony - 如何使用 JMSSerializerBundle 创建良好的超媒体格式？

> ID：12407172
> 
> 赞同：49
> 
> 时间：2012-09-13T13:15:56.290
> 
> 标签：symfony, symfony-2.1, hateoas, jmsserializerbundle, hypermedia

假设我想创建一个类似于以下内容的 XML 响应：

```
<?xml version="1.0" encoding="utf‐8"?>
<product xmlns="urn:com.acme.prods" xmlns:atom="http://www.w3.org/2005/xlink">
  <id>1234</id>
  <name>Red Stapler</name>
  <price currency="EUR">3.14</price>
  <atom:link rel="payment" type="application/com.acme.shop+xml"
             href="http://acme.com/products/1234/payment" />
</product> 
```

给定一个如下所示的域模型：

```
<?php
// Product.php
namespace Acme\Bundle\ProductBundle\Entity;
use Acme\Bundle\ProductBundle\Money\Money;

class Product
{
  /**
   * @var integer
   */
  private $id;

  /**
   * @var string
   */
  private $name;

  /**
   * @var Money
   */
  private $price;

  [..]
} 
```

以及类似以下的金钱阶层：

```
<?php
// Money.php
namespace Acme\Bundle\ProductBundle\Money;

class Money
{
  /**
   * @var string
   */
  private $currency;
  /**
   *
   */
  private $amount;
} 
```

现在，我的问题。创建如下所示的响应非常简单

```
<?xml version="1.0" encoding="utf‐8"?>
<product>
  <id>1234</id>
  <name>Red Stapler</name>
  <price currency="EUR">3.14</price>
</product> 
```

使用注解、XML 或 YAML 来告诉 JMSSerializerBundle 如何序列化产品对象。但是，实体不应指定`xmlns:atom`and条目，因为它不应该**知道**它的位置和**位置**。您还可以想象更多具有不同 - 属性的链接，例如. 想到的一种解决方案是一种服务，它监听特定对象的序列化事件，并根据需要添加这些属性和标签。该服务可以使用 DI 来获取, -service 等以适合所请求格式的格式生成这些链接。IE 在 XML 响应中，它可以将适当的类型设置为`<atom:link>`****`rel``edit`
`Request``Router``application/media-format+xml`，而在 json 响应中，它可以生成类似****

 ****```
"links": [
   {
     "rel": "payment", 
     "type": "application/media-format+json", 
     "href": "[...]"
   }
] 
```

现在，在[JMSSerializerBundle 的文档中](http://jmsyst.com/bundles/JMSSerializerBundle)，我找到了`@PreSerialize`和的注释`@PostSerialize`，但它们似乎只能调用被序列化对象的方法。
有谁知道如何/是否可以实现？还是我必须使用 Twig 等模板引擎并手动创建 XML 响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T16:39:48.417

对于这种情况，单独的 Serializer Bundle 可能还不够，因为它只关注序列化和反序列化，而不是更复杂的语义任务。

我建议研究[FSCHateoasBundle](https://github.com/TheFootballSocialClub/FSCHateoasBundle)为您的 API 实现一个漂亮的超媒体格式。****

# c# - 将元信息存储到类属性

> ID：12407173
> 
> 赞同：3
> 
> 时间：2012-09-13T13:16:00.277
> 
> 标签：c#, implementation, object-oriented-analysis

几天来我一直在思考这个问题：我有一个班级信息

```
public class Info
  {
    private int _no;

    public int No
    {
      get
      {
        return _no;
      }
      set
      {
        _no = value;
      }
    }
  } 
```

该类可以在任何类中的任何地方使用（继承或作为属性）。该财产可以被认为与安全相关或不相关。该信息在设计时是已知的，需要为该特定属性存储。

因此，对于使用该类作为属性的某些类，我希望相应地设置成员“No”。

```
 public class IsRelevant
  {
    private Info _prop = new Info();
    public Info Prop { get { return _prop; } set { _prop = value; } }
  }

  public class IsNotRelevant
  {
    private Info _prop = new Info();
    public Info Prop { get { return _prop; } set { _prop = value; } }
  } 
```

**作为第一次尝试**，我正在考虑引入这样的自定义属性：

```
[SecurityRelevant(RelevantLevel = SecurityRelevant.SecurityRelevant_Level1, IsRelevant = true)] 
```

然后，一旦我实例化了“IsRelevant”类，我将浏览属性及其类并根据需要设置自定义属性：

*IsRelevant.Prop.No => IsRelevant = true*，例如*IsNotRelevant.Prop.No => IsRelevant=false*。

但据我了解，类的元信息（属性）是为每种类型创建一次的实例。因此，如果我更改自定义属性的值，我将为该类的所有实例更改它（因为它绑定到该类型！？）

**编辑**：这不能按照此处所述完成：[在运行时更改属性的参数](https://stackoverflow.com/questions/51269/change-attributes-parameter-at-runtime)每次访问自定义属性时，都会创建一个具有默认值的新实例。对该属性的更改不会存储在那里。

**第二种方法**是将该信息存储在外部类中并保存所有模型路径等。我不喜欢这样，因为信息属于特定类。

**第三种方法**是实现一个接口，该接口包含一个存储该信息的字典：

```
 public interface ISecRelevant
  {
    Dictionary<PropertyInfo, bool> SecInfo { get; set; }
  } 
```

然后每个具有安全相关属性的类都需要实现它。在该类的每个实例化上，都需要在字典中添加信息。这是我想出的最好的解决方案。保存信息的类不一定需要是字典，因为在第二步中，我想询问具有潜在安全相关属性的实例是否真的相关。所以我可以在“安全相关信息容器”的方法中传递该属性并询问该属性是否相关。

所以我基本上是在问是否有人有更好的主意来存储或访问它，因为不知何故我仍然不喜欢这个解决方案。

所以这里有一些关于这个问题的一般性结论：

*   属性是否与安全相关的信息并不是真正的运行时信息，而是预先可用的。所以理想情况下，我想以“静态”方式存储它
*   信息最好附加到属性上，至少附加到父类，因为只有它应该知道该信息，而不是使用该 Info 类以避免耦合的任何其他类
*   还有更多的安全相关属性分散在更多的类中。这些也用于更深和更复杂的对象层次结构，但我认为它基本上归结为我在这里描述的问题。

**编辑：**由于我没有想出更好的主意，我实现了第三个解决方案，但使用字符串作为属性名称。但是后来我在使用列表时偶然发现了另一个问题。如果您将 List 作为具有 sec 相关属性的类型的属性，会发生什么？列表必须知道它所在的位置，才能将信息添加到插入到列表中的每个实例......

在搜索时，我发现了另一篇文章，basallay 要求同样的事情：[C# - 当我为类的字段赋值时，添加一些与特定字段关联的元数据？](https://stackoverflow.com/questions/5559390/c-sharp-add-some-meta-data-associated-to-a-particular-field-when-i-am-assignin) 他建议实现一个包含此类信息的基类。这将适用于“正常”属性。但不适用于列表案例。

**进一步的解释和例子：**

我认为与“安全相关”的示例可以帮助你们理解问题，但也许它只是让你感到困惑。简单地说：我需要将元信息附加到类的任何属性（以及可能包含在列表中的项目）。我需要在哪里放置这些信息在设计时是已知的，但取决于类的实例化。所以谁在实例化这个类是很重要的。这也是我不能使用静态信息的原因。这是一个例子：

```
Class A {
  public int MetaProperty; // (this it the propert where i might want to add meta info)
}

Class B {
  public A ThePropertyWithMetadata;
}

Class C{
  public A TheProperty;
} 
```

每当我创建 B 类的实例时，我都需要将元信息附加到

`InstanceOfB.ThePropertyWithMetadata.MetaProperty`

另一方面，每当我创建类 C 的实例时，我不想将任何元信息附加到该属性。我想在用户界面中显示该元信息并为用户提供有关该属性的更多信息。所以我确实知道何时分配元信息，但不能在设计时将其放入类中。希望这现在可以澄清:-)

# c# - 服务器认证

> ID：12407175
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:16:05.633
> 
> 标签：c#, facebook, authentication, sdk, server-side

有没有办法为用户创建访问令牌？

我知道可以通过以下代码获取用户信息：

```
var client = new FacebookClient("key");
var me = client.Get("me"); 
```

但是如何为没有密钥的用户创建密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:22:22.220

看看这些问题，它们可能会对你有所帮助。

[facebook-C#-sdk MVC“Hello World”应用程序 - 如何获取访问令牌？](https://stackoverflow.com/questions/4227964/facebook-c-sdk-mvc-hello-world-app-how-to-get-access-token)

[（Facebook C# SDK）获取访问令牌时出现问题](https://stackoverflow.com/questions/5273425/facebook-c-sharp-sdk-problem-getting-an-access-token)

# oracle - SQL*PLUS 是否有嵌入式 PLSQL 引擎？

> ID：12407176
> 
> 赞同：3
> 
> 时间：2012-09-13T13:16:07.470
> 
> 标签：oracle, sqlplus

您能否告诉我 SQL*PLUS 是否嵌入了 PLSQL 引擎？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:18:50.200

不，SQL*Plus 没有嵌入式 PL/SQL 引擎。所有 PL/SQL 代码都直接发送到数据库 PL/SQL 引擎执行。

# iphone - 什么可以用来避免 msgSend 函数开销？（Obj-c）

> ID：12407177
> 
> 赞同：5
> 
> 时间：2012-09-13T13:16:16.190
> 
> 标签：iphone, c

大家好，请帮帮我！！！！

什么可以用来避免 msgSend 函数开销？也许答案是 IMP，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:36:39.850

您可以简单地内联函数以避免任何函数调用开销。那么它甚至比 C 函数还要快！但是在你开始这条路之前——你确定这种优化水平是必要的吗？通过优化算法，您更有可能获得更好的回报。

`IMP`很少需要使用。Objective-C 中的方法分派（尤其是在 64 位运行时）已经过高度优化，并利用了许多技巧来提高速度。

你做了什么分析告诉你方法分派是你的性能问题的原因？我建议您首先检查算法，首先查看最昂贵的操作在哪里，看看是否有更有效的方法来实现它。

为了回答您的问题，快速搜索可以在 SO 上找到一些与您的问题类似的直接相关问题，并提供一些很好且详细的答案：

*   [Objective-C 优化](https://stackoverflow.com/questions/2534990/objective-c-optimization)
*   [Objective-C 和 SEL/IMP 的使用](https://stackoverflow.com/questions/2650190/objective-c-and-use-of-sel-imp)

# asp.net - MVC3 原位表更新

> ID：12407178
> 
> 赞同：0
> 
> 时间：2012-09-13T13:16:23.363
> 
> 标签：asp.net, asp.net-mvc-3, model-binding

我有点困惑。

我有一个非常标准的 MVC3 设置：Home Controller/Index 方法，ViewModel 的强类型视图。

我的 ViewModel 是三个通用列表（方案、类型、表）的集合，

TableModel Schemes List TypesList TablesList

方案和类型填充下拉列表以充当第三个（表）集合的过滤器，该集合通过 @foreach 循环填充 HTML 表

我通过调用 Home/Index（无参数）填充这些。这工作正常。现在，我想通过选中一个复选框来标记 TablesList 集合中的许多行以进行删除，然后在单击提交时，我希望通过 Post 执行删除操作，并将剩余表刷新到表内容中同一个地方（替换现有的 HTML 表

在我的索引视图中，我有这个部分：

```
@using (Html.BeginForm("DeleteTables", "Home"))
{
    @Html.Hidden("tableList", @Model.TablesList)
    <input id="deleteButton" type="submit"  />
} 
```

在我的 HomeController 我有一个 POST 方法如下

```
[HttpPost]
public ActionResult DeleteTables(List<ViewModel.ITableInformation> tableList)
{
    var deleteableTableIds = from t in tableList
                             where t.DeleteTable
                             select t.TableId;

    this.tableModel.DeleteTablesById(deleteableTableIds.ToList());

    .... execute a db call to get remaining tables and return a PartialView or JSON              
    } 
```

问题是我希望这个函数的**tableList**参数包含我的模型，但它是空的。

知道我做错了什么-恐怕对此很陌生。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:30:08.500

隐藏的不能取复杂的对象；您需要做的是反序列化每个对象并将其作为字符串存储在隐藏中，例如：

```
@{
  var tableIDs = "";

  foreach (var i in Model.TablesList) {
     tableIDs = //serialized object in proper format
  }
}

@Html.Hidden("tableList", @tableIDs) 
```

在服务器上，您可以通过自定义模型绑定器创建对象，或者接受字符串类型的输入，然后反序列化集合。

HTH。

# ios - Tabbar not showing in ios application

> ID：12407192
> 
> 赞同：3
> 
> 时间：2012-09-13T13:16:51.793
> 
> 标签：ios, tabbar

i am making one iOS tabbar application in that i have put 4 different tabs and whenever i click on 1 st tab and load another view after clicking of the first tab. After that when i press back button then tabbar is not displaying .So that i want hint that how can i show that back the tabbar when we move from one tab from another and yes how i can use consistent the tabbar in whole application can you just guys help me on this i am new to iOS development.

here i am put the screen shot ... here first screen is this one..![enter image description here](../Images/7a71aba638cee0bc7ceed2b78d0611f6.png)

when i tap the video button that are first in the view then another window open which are as under and see the tabbar is not there... ![enter image description here](../Images/6353ffad8f49db349d54094dc69d26f8.png)

when in video controller there is tabbar is there but i drag and connect to that then tabbar is disabled![enter image description here](../Images/db435999a68bfd77780f619d9a72ba0e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:52:43.683

查看您的屏幕快照，我是否正确地假设您正在尝试通过触摸“主页”场景中心的大“视频”按钮（而不是触摸底部的标签栏按钮）来转换到“视频”场景屏幕，我认为它工作正常）？如果是这种情况，您需要让您的按钮告诉视图控制器的标签栏控制器您要更改标签栏的索引，它会为您处理。您不能使用 segue 进行转换（或者至少不能没有自定义 segue，这比我在下面概述的过程还要复杂）。如果您以其他方式更改视图（例如，使用标准 segue 或使用`presentViewController`,以`pushViewController`编程方式等），您的标签栏可能会消失在您身上。

你后来说：

> 当在视频控制器中有标签栏但我拖动并连接到该标签栏时，标签栏被禁用

是的，这是真的。您不能使用从一个大按钮到选项卡栏中的一个选项卡的转场。（或者从技术上讲，如果你想使用一个转场，它会是一个*自定义*转场，它会做一些非常类似于我下面的代码的事情，尽管可能有点复杂。）所以，与其为你的大按钮使用转场，你需要编写一个`IBAction`（连接到场景中的大`Videos`按钮`Home`），告诉标签栏更改其选择：

```
- (IBAction)clickedVideosButton:(id)sender
{
    [self.tabBarController setSelectedIndex:1];
} 
```

一些评论：

1.  我的回答是基于这样的假设：当您点击标签栏本身的按钮时，您的标签栏会按预期工作。如果您点击屏幕底部的按钮，您是否正确转换到其他视图并保留标签栏？如果是这样，我上面的回答应该可以解决你让大按钮工作的问题。但是，如果不是，那么问题就出在其他地方，您需要向我们展示您的代码可能会导致这种情况（您在`UITabBarControllerDelegate`方法中是非标准的，或者您`viewDidLoad`的观点正在做一些非标准的事情）。

2.  如果我正确理解您的用户界面设计，您的底部有标签栏，中间有大按钮，它们可能做同样的事情。也就是说，没有冒犯，奇怪的用户界面设计（重复按钮，需要额外点击按钮等）。您可能想要选择使用大按钮（例如，您可以在其中退出标签栏，删除`IBAction`我在上面提供的代码，只需使用一个不错的简单导航控制器并推送 segues），或者只使用标签栏（并失去主屏幕，失去大按钮等）。

3.  您还提到了“按后退按钮”，我在您的任何屏幕快照上都没有看到任何“后退”按钮。我是否推断您有一个导航控制器并且您正在`pushViewController`某处执行或推送 segue？如果您使用后退按钮做某事，您可能需要进一步澄清您的问题。

# html - css下拉div在IE9中不起作用

> ID：12407194
> 
> 赞同：0
> 
> 时间：2012-09-13T13:16:52.927
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我有一个 div，当您将鼠标悬停时，会出现一个子 div 来显示信息。基本代码如下：

HTML

```
<div id="container">
    <div id="hidden_div">
        <iframe></iframe>
    </div>
</div> 
```

CSS

```
#container {
    position: absolute;
    height: 20px;
    width: 40px;
    top: 8px;
    left: 30px;
}

#hidden_div {
    position: absolute;
    background: url(../_images/inside_btn_back.png) repeat;
    height: 60px;
    width: 350px;
    top: 0px;
    left: 0px;
    margin-top: 20px;
    z-index: 50;
    display: none;
    border: 1px solid #a08f89;
}

#container:hover #hidden_div, #container.over #hidden_div, #container:focus #hidden_div {
    display: block;
} 
```

这适用于除 IE（特别是 IE9）以外的所有浏览器。我有一个使用相同方法的导航窗口，用于在 IE 中正常工作的下拉菜单。不知道为什么它不能与 div 一起使用。[这是到此处](http://www.envisiodesigns.com/test/)的实时页面的链接。鼠标悬停在 div 上是页面底部附近的 facebook like 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:40:23.653

它是在 iframe 中加载的页面没有透明背景导致悬停在 IE 中失败。

# macos - Send text from sublimeText2 to R64.app on OS X

> ID：12407198
> 
> 赞同：1
> 
> 时间：2012-09-13T13:17:24.797
> 
> 标签：macos, r, sublimetext2

I'm trying to create a simple plugin for Sublime Text 2 that will permit OS X users to send the selected text to R64.app for computation. So far I have the following:

```
import sublime, sublime_plugin, os
class send2rCommand(sublime_plugin.TextCommand):
    def run(self,blah):
        os.system("""osascript -e 'tell application "R64" to activate'""")
        for sel in self.view.sel():
            sel_text = self.view.substr(sel)
            os.system('''osascript -e 'on run(args)' -e 'tell application "R64" to cmd (item 1 of args)' -e 'end run' -- "'''+sel_text+'''"''') 
```

However, this seems to fail when the selected text contains the `$` character (a frequent occurrence in `R`). I also suspect that I've misunderstood something as I'm not sure why the `run` command fails (with an error in python) when I remove the `,blah` part of the `run` function definition.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:37:25.550

解决方案似乎是在发送到 osascript 之前必须替换`$`字符：`\$`

```
import sublime, sublime_plugin, os
class send2rCommand(sublime_plugin.TextCommand):
    def run(self,blah):
        os.system("""osascript -e 'tell application "R64" to activate'""")
        for sel in self.view.sel():
            sel_text = self.view.substr(sel)
            sel_text = sel_text.replace('$','\$')
            os.system('''osascript -e 'on run(args)' -e 'tell application "R64" to cmd (item 1 of args)' -e 'end run' -- "'''+sel_text+'''"''') 
```

# windows-phone-7 - Doubts regarding TAP in Wp7 application

> ID：12407201
> 
> 赞同：0
> 
> 时间：2012-09-13T13:17:32.160
> 
> 标签：windows-phone-7, windows-phone-7.1

I have doubt regarding TAP of Windows Phone 7 application,

Im XAML i have declared as

```
 <Grid Grid.Row="0" Height="65" x:Name="BalanceEnquiries"  >

            <my:GestureService.GestureListener>
                <my:GestureListener x:Name="BalanceEnquiriesEvent"  Tap="BalanceEnquiriesEvent_Tap"/>
            </my:GestureService.GestureListener></Grid> 
```

and in my handler,I am using

```
private void BalanceEnquiriesEvent_Tap(object sender, Microsoft.Phone.Controls.GestureEventArgs e)
    {            
        Debug.WriteLine("Sender is "+sender);
        Debug.WriteLine("SenderEvent  is " + e.OriginalSource);
        Debug.WriteLine("Gesture Type" + e.GetType());} 
```

and on click of the TAP Event,I am getting TAP Event getting called twice,Is this normal behaviour or some problem with layout.

Regards

Rakesh Shankar.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:49:02.667

拉克什，

您获得 2 个事件可能是因为您在网格下方有一些东西也在获得该事件。如果您检查发件人，您将看到其他哪些元素正在接收 Tap。您可以将事件标记为已处理或将其他元素设置为 IsHitTestVisible=false，这意味着它不会接收该事件。

# ruby-on-rails - 如何将 *args 与默认选项哈希合并？

> ID：12407203
> 
> 赞同：3
> 
> 时间：2012-09-13T13:17:31.290
> 
> 标签：ruby-on-rails, ruby, design-patterns

我有一个接受`*args`哈希的方法，该哈希应该与默认选项哈希合并：

```
def bt_navbar(*args, &block)
  options = {
    inverse: false,
    fixed: false,
  }.with_indifferent_access.merge!(args.extract_options!)
  # ...
end 
```

因为我不知道方法的用户是否喜欢使用`keys`或者`strings`传递选项时，我使用`[].with_indifferent_access`.

这是一个好的模式，还是有更好、更成熟的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:57:15.073

假设您有两个位置参数。这就是我要写的：

```
def bt_navbar(arg1, arg2, options = {}, &block)
  options.reverse_update({
    inverse: false,
    fixed: false,
  })

  # body
end 
```

1.  我不会费心支持字符串键。
2.  `Hash#reverse_update`是 *active_support* 的一部分，但实现您自己的方法很简单（可能使用类似`defaults`? 的名称）。

# security - 为 Apache 配置 mod_proxy 以拒绝错误的域请求

> ID：12407209
> 
> 赞同：4
> 
> 时间：2012-09-13T13:17:49.183
> 
> 标签：security, apache2, reverse-proxy, mod-proxy

最近，我注意到我的网站运行速度越来越慢。我在我的服务器上发现了 8GB 的​​ Apache 日志（我在 Debian 6 服务器上运行 Play!Framework Web 应用程序）并且带宽完全超载。对于一个每天只有几次浏览量的小型个人网站来说，这完全是疯狂的。

在调查和收集了一些信息后，我发现了我的错误：在我的 Apache 配置中，我取消了“ProxyRequests On”行的注释，因此我的服务器被免费用作世界上每个人的免费代理。真可惜。

至少在那个时候，我调整了我的防火墙以限制并发连接，并为 Apache2 安装了 mod_qos。

但是，现在不是像一个好的免费代理那样将请求重定向到它们的目的地，而是所有传入的请求都被重定向到我的 Web 应用程序，无论域是什么。例如，如果有人使用我的服务器，认为它仍然是在 yahoo 上搜索“年轻的裸体儿童”的有效代理，他就会访问我的网站。我想现在你明白我的意思了。

那么，如果对“ [http://yahoo.com/whatever](http://yahoo.com/whatever) ”的请求发送到我的服务器，我应该怎么做，该请求被拒绝？

这是我当前的配置：

*   在**/etc/init.d/apache2/sites-available/mysite.fr**：

    ```
    ProxyRequests Off
    NameVirtualHost *:80

    <VirtualHost *:80>

         ServerName mysite.fr
         ServerAlias *.mysite.fr

         ProxyPreserveHost On
         ProxyPass / http://127.0.0.1:9000/ retry=0
         ProxyPassReverse /  http://127.0.0.1:9000

         # Uncomment the line below if your site uses SSL.
         #SSLProxyEngine On
    </VirtualHost> 
    ```

*   在**/etc/init.d/apache2/mods-available/proxy.conf**：

    ```
    ProxyRequests Off
    <Proxy *>

        AddDefaultCharset off
        Order deny,allow
        Allow from all
    </Proxy> 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T15:56:45.700

*几个月前我找到了一个解决方案，只是意识到我忘了分享我发现的内容：*

我在我的 Apache2 配置中添加了一个“垃圾桶”虚拟主机（首先在 httpd.conf 中声明）：

```
<VirtualHost *:80>
    ServerName stop.spam
    DocumentRoot /var/www/stopspam
    ErrorLog /dev/null
    <Directory /var/www/stopspam>
        Deny from all
    </Directory>
</VirtualHost> 
```

并将其添加到我的防火墙配置中：

```
iptables -I INPUT -d XXX.XXX.XXX.XXX -p tcp --dport 80 -m string --to 700 \
--algo bm --string 'Host: XXX.XXX.XXX.XXX' -j DROP 
```

这使得防火墙丢弃端口 80 上的请求，这些请求使用我的服务器 IP 而不是域名发送。

希望这可以帮助别人:)

# php - PHP no output from preg_replace

> ID：12407214
> 
> 赞同：-2
> 
> 时间：2012-09-13T13:18:04.497
> 
> 标签：php, regex, preg-replace

I'm using `preg_replace()` as in the following code.

```
$p = preg_replace('/#[\d\w]+/', '<a href="http://'.$_SERVER['HTTP_HOST'].'/search/term:'.str_replace('#', rawurlencode('%23'), '${1}').'">${1}</a>', $p);
$p will be a string like '(#ben)' 
```

However, nothing is output using `$1`. Am I using `$1` incorrectly?

Should output this: `<h2>Bens (<a href="http://example.com/search/term:#ben">ben</a>) cat</h2>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:19:00.850

您需要一个捕获组来引用反向引用`$1`：

```
preg_replace('/(#[\d\w]+)/', ... 
               ^        ^ 
```

看到它在[这个演示](http://viper-7.com/ThGru7)中工作。

# haskell - How Type inference work in presence of Functional Dependencies

> ID：12407215
> 
> 赞同：7
> 
> 时间：2012-09-13T13:18:05.740
> 
> 标签：haskell, types, functional-programming, type-inference, functional-dependencies

Consider the code below :

```
{-# LANGUAGE MultiParamTypeClasses,FlexibleInstances,FunctionalDependencies,UndecidableInstances,FlexibleContexts  #-}
class Foo a c | a -> c
instance Foo Int Float 
f :: (Foo Int a) => Int -> a 
f = undefined 
```

Now when I see the inferred type of f in ghci

```
> :t f
> f :: Int -> Float 
```

Now If I add the following code

```
g :: Int -> Float 
g = undefined 

h :: (Foo Int a) => Int -> a 
h = g 
```

I get the error

```
Could not deduce (a ~ Float) 
```

I am not able to understand what has happened here? The restriction `Foo Int a` should have restricted the type of `h` to `Int -> Float` as shown in the inferred type of `f`.

Is it because type unification is occurring before resolving the instances ?

[Update]

An explanation given by Dan Doel on the cafe mailing list

> The answer, I believe, is that the difference between the fundep implementation and type families is local constraint information. Fundeps do no local propagation.
> 
> So in your first definition, you've locally provided '`Int -> a`', which is acceptable to GHC. Then it figures out externally to the function that '`(Foo Int a) => Int -> a`' is actually `Int -> Float`.
> 
> In the second definition, you're trying to give '`Int -> Float`', but GHC only knows locally that you need to provide '`Int -> a`' with a constraint '`Foo Int a`' which it *won't* use to determine that `a ~ Float`.
> 
> This is not inherent to fundeps. One could make a version of fundeps that has the local constraint rules (easily so by translating to the new type families stuff). But, the difference is also the reason that overlapping instances are supported for fundeps and not type families. But I won't get into that right now.

I still don't understand what that mean. So still looking for better understandable answer.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T17:37:58.227

为避免此问题，您可以改用类型族：

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-}

class Fooo a where
  type Out a :: *

instance Fooo Int where
  type Out Int = Float

ff :: (Foo Int) => Int -> (Out Int)
ff = undefined

gg :: Int -> Float
gg= undefined

hh :: (Foo Int) => Int -> (Out Int)
hh = gg 
```

类型家庭很好。尽可能使用类型族！

* * *

我猜你的错误是因为 ghc 可以推断出`f :: Int -> Float`你`f :: Foo Int a => Int -> a`的类定义和实例，但它不能推断`g :: Foo Int a => Int -> a`出`g:: Int -> Float`.

将约束视为函数上的秘密字典参数很方便。f 中存在固有但受约束的多态性，而 g 中没有。

我认为注意到 ghci 给我们的错误信息基本上与我们试图定义完全相同的错误信息是有帮助的

```
j :: Int -> Float
j = undefined

k :: Eq a => Int -> a
k = j 
```

很明显，这不应该起作用，因为我们知道`k`它的第二个参数应该是受约束的多态性。ghc 尝试将类型匹配`Int -> a`并`Int -> Float`失败，抱怨它无法`a ~ Float`从 context推断`Eq a`，即使有一个 instance `Eq Float`。在您的示例中，它表示`a ~ Float`即使`Foo Int a`有`Foo Int Float`. 我意识到*我们*可以推断出只有一种可能的类型`a`，但是通过为 Foo 创建类和实例，您已经定义了一个关系并断言它是一个函数依赖。这与定义函数不同（这就是类型族解决问题的原因——它定义了函数）。

ghc 在你写的时候也会抱怨

```
aconst :: (Foo Int a) => a
aconst = 0.0 
```

甚至

```
anotherconst :: (Foo Int a) => a
anotherconst = 0.0::Float 
```

总是因为它无法将它想要的受约束的*多态* `a`与你给它的特定类型（`Fractional a`或`Float`）相匹配。

你要

```
forall a.Foo Int a 
```

与 的类型相同`Float`，但不是。只有一种类型可以满足`forall a.Foo Int a`，它是`Float`，所以 ghci 可以接受`f::forall a.(Foo Int a)=>a->Float`并推断（使用 Foo 的字典）`f::Int->Float`，但是你期望 ghci 接受`Float`并发现它是`forall a.Foo Int a`，但是没有 Float 的字典，它是一种类型，而不是类型类。ghci 可以以一种方式做到这一点，但不能以另一种方式做到这一点。

Dan 关于本地信息的观点是 ghc 必须同时使用`Foo`' 的定义和您推断出的`Float`可以重写的实例`forall a.(Foo Int a)`，并且在编译的这一点上， ghc 没有使用全局信息，因为它只是试图做一个匹配。我的观点是`Float`匹配`forall a.(Foo Int a)`但`forall a.(Foo Int a)`不匹配`Float`，即`"this"`匹配模式`(x:xs)`但`(x:xs)`不匹配模式`"this"`。

# java - 用一些消息替换字符串生成器中的空数据或空数据

> ID：12407228
> 
> 赞同：0
> 
> 时间：2012-09-13T13:18:41.120
> 
> 标签：java

我有一个字符串生成器，它包含一些数据。我想确保每当其中有空或空（“”）数据时，我想用一些消息替换它，例如不可用。这是一个巨大的数据，我不能去替换每一个字符串。以下是一段代码：

```
Stringbuilder sb = new Stringbuilder();
String a = "10";
String b = 13;
sb.append("entity.id=").append(a).append("entity.value=").append(b);
sb.toString; 
```

因此，每当 entity.id 或 entity."ANYTHING" 等于 "null" 或为空时，应将其替换为 entity.id= not available 之类的消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:23:16.553

在不知道您的确切要求的情况下，这可能并不完美，但这是一种选择：

```
public void myCustomAppend(Appendable a, CharSequence cs){
  if(cs == null || cs.length() == 0){
    a.append("(not available)");
  }else{
    a.append(cs);
  }
}

myCustomAppend(sb, "entity.id=");
myCustomAppend(sb, a);
myCustomAppend(sb, "entity.value=");
myCustomAppend(sb, b); 
```

对此的一些改进可能包括将其创建为具有自己状态的自定义对象 - 避免需要继续传入对 StringBuilder 的相同引用，以及允许链接连续调用（就像您在原始问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:23:29.803

创建一个函数，例如...

```
public String checkString(String str) {
 if(str == null || str.isEmpty())
  return "N/A";
 return str;
} 
```

在要附加的字符串上调用它。

`sb.append("entity.id=").append(checkString(a)).append("entity.value=").append(checkString(b));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:32:22.107

考虑使用 Guava 的[Joiner](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html)类。

```
List<String> values = newArrayList("value1", "value2", a, b, c);
String result = Joinger.on(" ").useForNull("null").join(values); 
```

您也可以使用“omitNull”代替“useForNull”

看到你在做什么，你可能还想看看[MoreObjects.ToStringHelper](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Objects.ToStringHelper.html)

[番石榴文档](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:50:03.097

在追加之前检查字符串是否为空。如果字符串为空，您可以附加消息而不是数据字符串的内容。;)

# android - getActivity() cannot find symbol symbol : method getActivity()

> ID：12407229
> 
> 赞同：19
> 
> 时间：2012-09-13T13:18:42.047
> 
> 标签：android

I need help with this file for my mms app. `getActivity()` causes an error in the build.

**Error:** `cannot find symbol: method getActivity()`

I have tried numerous things to make this work so far, like `extends PreferenceFragment` - then `getActivity()` is fine, but this solution breaks tons of other stuff.

**Does anyone know why I'm getting this error?**

My code:

```
package com.android.mms.themes;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URISyntaxException;

import android.app.Activity;
import android.app.ActionBar;
import android.app.Fragment;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.graphics.Rect;
import android.net.Uri;
import android.os.Bundle;
import android.os.SystemProperties;
import android.preference.CheckBoxPreference;
import android.preference.EditTextPreference;
import android.preference.ListPreference;
import android.preference.Preference;
import android.preference.PreferenceActivity;
import android.preference.PreferenceFragment;
import android.preference.PreferenceGroup;
import android.preference.PreferenceManager;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceScreen;
import android.provider.MediaStore;
import android.text.Spannable;
import android.util.Log;
import android.view.Display;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;

import com.android.mms.R;
import com.android.mms.ui.ColorPickerPreference;

public class ThemesMessageList extends PreferenceActivity implements
            Preference.OnPreferenceChangeListener {
    // Menu entries
    private static final int THEMES_RESTORE_DEFAULTS = 1;

    // Layout Style
    public static final String PREF_TEXT_CONV_LAYOUT = "pref_text_conv_layout";

    // Msg background
    public static final String PREF_MESSAGE_BG = "pref_message_bg";

    private static final String CUSTOM_IMAGE = "message_list_image.jpg";
    private static final int REQUEST_PICK_WALLPAPER = 201;
    private static final int SELECT_WALLPAPER = 5;

    // Bubble types
    public static final String PREF_BUBBLE_TYPE = "pref_bubble_type";
    public static final String PREF_BUBBLE_FILL_PARENT = "pref_bubble_fill_parent";

    // Checkbox preferences
    public static final String PREF_USE_CONTACT = "pref_use_contact";
    public static final String PREF_SHOW_AVATAR = "pref_show_avatar";

    // Colorpicker preferences send
    public static final String PREF_SENT_TEXTCOLOR = "pref_sent_textcolor";
    public static final String PREF_SENT_CONTACT_COLOR = "pref_sent_contact_color";
    public static final String PREF_SENT_DATE_COLOR = "pref_sent_date_color";
    public static final String PREF_SENT_TEXT_BG = "pref_sent_text_bg";
    public static final String PREF_SENT_SMILEY = "pref_sent_smiley";
    // Colorpicker preferences received
    public static final String PREF_RECV_TEXTCOLOR = "pref_recv_textcolor";
    public static final String PREF_RECV_CONTACT_COLOR = "pref_recv_contact_color";
    public static final String PREF_RECV_DATE_COLOR = "pref_recv_date_color";
    public static final String PREF_RECV_TEXT_BG = "pref_recv_text_bg";
    public static final String PREF_RECV_SMILEY = "pref_recv_smiley";

    // message background
    ColorPickerPreference mMessageBackground;
    // send
    ColorPickerPreference mSentTextColor;
    ColorPickerPreference mSentDateColor;
    ColorPickerPreference mSentContactColor;
    ColorPickerPreference mSentTextBgColor;
    ColorPickerPreference mSentSmiley;
    // received
    ColorPickerPreference mRecvTextColor;
    ColorPickerPreference mRecvContactColor;
    ColorPickerPreference mRecvDateColor;
    ColorPickerPreference mRecvTextBgColor;
    ColorPickerPreference mRecvSmiley;

    private CheckBoxPreference mUseContact;
    private CheckBoxPreference mShowAvatar;
    private CheckBoxPreference mBubbleFillParent;
    private ListPreference mTextLayout;
    private ListPreference mBubbleType;
    private Preference mCustomImage;
    private SharedPreferences sp;

    protected Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mContext = getActivity();
        loadThemePrefs();

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
    }

    public void loadThemePrefs() {

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences_themes_msglist);

        PreferenceScreen prefSet = getPreferenceScreen();
        sp = PreferenceManager.getDefaultSharedPreferences(this);

        mUseContact = (CheckBoxPreference) prefSet.findPreference(PREF_USE_CONTACT);
        mShowAvatar = (CheckBoxPreference) prefSet.findPreference(PREF_SHOW_AVATAR);
        mBubbleFillParent = (CheckBoxPreference) prefSet.findPreference(PREF_BUBBLE_FILL_PARENT);

        mTextLayout = (ListPreference) findPreference(PREF_TEXT_CONV_LAYOUT);
        mTextLayout.setOnPreferenceChangeListener(this);
        mTextLayout.setSummary(mTextLayout.getEntry());

        mBubbleType = (ListPreference) findPreference(PREF_BUBBLE_TYPE);
        mBubbleType.setOnPreferenceChangeListener(this);
        mBubbleType.setSummary(mBubbleType.getEntry());

        mCustomImage = findPreference("pref_custom_image");

        mMessageBackground = (ColorPickerPreference) findPreference(PREF_MESSAGE_BG);
        mMessageBackground.setOnPreferenceChangeListener(this);

        mSentTextColor = (ColorPickerPreference) findPreference(PREF_SENT_TEXTCOLOR);
        mSentTextColor.setOnPreferenceChangeListener(this);

        mSentContactColor = (ColorPickerPreference) findPreference(PREF_SENT_TEXTCOLOR);
        mSentContactColor.setOnPreferenceChangeListener(this);

        mSentDateColor = (ColorPickerPreference) findPreference(PREF_SENT_TEXTCOLOR);
        mSentDateColor.setOnPreferenceChangeListener(this);

        mSentTextBgColor = (ColorPickerPreference) findPreference(PREF_SENT_TEXTCOLOR);
        mSentTextBgColor.setOnPreferenceChangeListener(this);

        mSentSmiley = (ColorPickerPreference) findPreference(PREF_SENT_SMILEY);
        mSentSmiley.setOnPreferenceChangeListener(this);

        mRecvTextColor = (ColorPickerPreference) findPreference(PREF_RECV_TEXTCOLOR);
        mRecvTextColor.setOnPreferenceChangeListener(this);

        mRecvContactColor = (ColorPickerPreference) findPreference(PREF_RECV_TEXTCOLOR);
        mRecvContactColor.setOnPreferenceChangeListener(this);

        mRecvDateColor = (ColorPickerPreference) findPreference(PREF_RECV_TEXTCOLOR);
        mRecvDateColor.setOnPreferenceChangeListener(this);

        mRecvTextBgColor = (ColorPickerPreference) findPreference(PREF_RECV_TEXT_BG);
        mRecvTextBgColor.setOnPreferenceChangeListener(this);

        mRecvSmiley = (ColorPickerPreference) findPreference(PREF_RECV_SMILEY);
        mRecvSmiley.setOnPreferenceChangeListener(this);
    }

    @Override
    public boolean onPreferenceChange(Preference preference, Object newValue) {
        boolean result = false;

        if (preference == mMessageBackground) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mMessageBackground.setSummary(hex);

        } else if (preference == mSentTextColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mSentTextColor.setSummary(hex);

        } else if (preference == mSentContactColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mSentContactColor.setSummary(hex);

        } else if (preference == mSentDateColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mSentDateColor.setSummary(hex);

        } else if (preference == mSentTextBgColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mSentTextBgColor.setSummary(hex);

        } else if (preference == mSentSmiley) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mSentSmiley.setSummary(hex);

        } else if (preference == mRecvTextColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mRecvTextColor.setSummary(hex);

        } else if (preference == mRecvContactColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mRecvContactColor.setSummary(hex);

        } else if (preference == mRecvDateColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mRecvDateColor.setSummary(hex);

        } else if (preference == mRecvTextBgColor) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mRecvTextBgColor.setSummary(hex);

        } else if (preference == mRecvSmiley) {
            String hex = ColorPickerPreference.convertToARGB(Integer.valueOf(String
                    .valueOf(newValue)));
            mRecvSmiley.setSummary(hex);

        } else if (preference == mTextLayout) {
            int index = mTextLayout.findIndexOfValue((String) newValue);
            mTextLayout.setSummary(mTextLayout.getEntries()[index]);
            return true;

        } else if (preference == mBubbleType) {
            int index = mBubbleType.findIndexOfValue((String) newValue);
            mBubbleType.setSummary(mBubbleType.getEntries()[index]);
            return true;

        }
        return result;
    }

    @Override
    public boolean onPreferenceTreeClick(PreferenceScreen preferenceScreen, Preference preference) {
        boolean value;

        if (preference == mCustomImage) {
            Display display = getActivity().getWindowManager().getDefaultDisplay();
            int width = display.getWidth();
            int height = display.getHeight();
            Rect rect = new Rect();
            Window window = getActivity().getWindow();
            window.getDecorView().getWindowVisibleDisplayFrame(rect);
            int statusBarHeight = rect.top;
            int contentViewTop = window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
            int titleBarHeight = contentViewTop - statusBarHeight;

            Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
            intent.setType("image/*");
            intent.putExtra("crop", "true");
            boolean isPortrait = getResources()
                    .getConfiguration().orientation
                    == Configuration.ORIENTATION_PORTRAIT;
            intent.putExtra("aspectX", isPortrait ? width : height - titleBarHeight);
            intent.putExtra("aspectY", isPortrait ? height - titleBarHeight : width);
            intent.putExtra("outputX", width);
            intent.putExtra("outputY", height);
            intent.putExtra("scale", true);
            intent.putExtra("scaleUpIfNeeded", true);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, getCustomImageExternalUri());
            intent.putExtra("outputFormat", Bitmap.CompressFormat.PNG.toString());

            startActivityForResult(intent, REQUEST_PICK_WALLPAPER);
            return true;

        } else if (preference == mUseContact) {
            value = mUseContact.isChecked();

        } else if (preference == mShowAvatar) {
            value = mShowAvatar.isChecked();

        } else if (preference == mBubbleFillParent) {
            value = mShowAvatar.isChecked();
        }
        return super.onPreferenceTreeClick(preferenceScreen, preference);
    }

    private void restoreThemeMessageListDefaultPreferences() {
        PreferenceManager.getDefaultSharedPreferences(this).edit().clear().apply();
        setPreferenceScreen(null);
        loadThemePrefs();
    }

    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        menu.clear();
        menu.add(R.menu.themes_message_list);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case THEMES_RESTORE_DEFAULTS:
                restoreThemeMessageListDefaultPreferences();
                return true;

            case R.id.custom_image_delete:
                deleteCustomImage();
                return true;

            case android.R.id.home:
                // The user clicked on the Messaging icon in the action bar. Take them back from
                // wherever they came from
                finish();
                return true;
        }
        return false;
    }

    private void deleteCustomImage() {
        mContext.deleteFile(CUSTOM_IMAGE);
    }

    private Uri getCustomImageExternalUri() {
        File dir = mContext.getExternalCacheDir();
        File wallpaper = new File(dir, CUSTOM_IMAGE);

        return Uri.fromFile(wallpaper);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == REQUEST_PICK_WALLPAPER) {

                FileOutputStream wallpaperStream = null;
                try {
                    wallpaperStream = mContext.openFileOutput(CUSTOM_IMAGE,
                            Context.MODE_WORLD_READABLE);
                } catch (FileNotFoundException e) {
                    return; // NOOOOO
                }

                Uri selectedImageUri = getCustomImageExternalUri();
                Bitmap bitmap = BitmapFactory.decodeFile(selectedImageUri.getPath());

                bitmap.compress(Bitmap.CompressFormat.PNG, 100, wallpaperStream);
            }
        }
    }

    public void copy(File src, File dst) throws IOException {
        InputStream in = new FileInputStream(src);
        FileOutputStream out = new FileOutputStream(dst);

        // Transfer bytes from in to out
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-13T13:24:55.090

`getActivity()`类中不存在`Activity`，因此要获取`Context`您的活动，只需使用`this`：

```
mContext = this; 
```

因为 Activity 是 Context 的子类（子类）

![在此处输入图像描述](../Images/f9b13e78e5ade6c3ec3a722491f2bc8f.png)

[https://developer.android.com/reference/android/app/Activity](https://developer.android.com/reference/android/app/Activity)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T13:23:26.067

`PreferenceActivity`没有`getActivity`方法，因为它是`Activity`. 只需像这样分配您的上下文：`mContext = this;`

`getActivity()`是`Fragment`类的方法。

此外，除非您尝试`mContext`在此类之外引用，否则您可以将它们全部丢弃，而只使用它`this`。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-08-26T11:33:12.457

尝试这个 ：-

右键单击项目>属性> java构建路径>单击库选项卡>单击添加库按钮>选择Jre系统库>下一步>完成>确定

# zend-framework - Zend executes only one of two table updates

> ID：12407230
> 
> 赞同：2
> 
> 时间：2012-09-13T13:18:43.893
> 
> 标签：zend-framework, zend-db

I have this little piece of code to update the position of element

```
public function moveUp($id) {

        $row = $this->find($id)->current();

        $kategoria = $row->kategoria;
        $position = $row->position;

        if($position > 1) {

            $data1 = array(
                    'position'  => new Zend_Db_Expr('position - 1')
                );
            $where1['id = ?'] = $id;

            $this->getDefaultAdapter()->update($this->_name, $data1, $where1);  

            $data2 = array(
                    'position'  => new Zend_Db_Expr('position + 1')
                );

            $where2['position = ?'] = $position - 1;
            $where2['kategoria = ?'] = $kategoria;  

            $this->getDefaultAdapter()->update($this->_name, $data2, $where2);

        }
    } 
```

The problem is that only second update is executed and first one does nothing. If I comment out second update then the first update works fine. Why is that?

Also should I check for the next smaller / bigger position instead of just +/- 1 ? That is assuming the code in other parts of application don't make gaps in position column.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:33:34.350

好的，想通了。第一次更新后，两行都相同`position`，因此第二次更新影响两行而不是一个。

通过添加修复它

```
$where2['id != ?'] = $id; 
```

# powershell - powershell - 如何在远程计算机上映射网络驱动器（如何在远程计算机上运行 cmd 命令）

> ID：12407242
> 
> 赞同：1
> 
> 时间：2012-09-13T13:19:00.887
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我正在尝试使用 Invoke-Command 在远程计算机上映射网络驱动器：

```
Invoke-Command -ComputerName servername -ScriptBlock { net use L: \\server\folder password /user:login} 
```

但它不起作用。简单的 NET USE 也不起作用。我也尝试过[Powershell: how to map a network drive with a different username/password](https://stackoverflow.com/questions/1530733/powershell-how-to-map-a-network-drive-with-a-different-username-password)

那么，如何在远程计算机上运行“cmd 命令”NET USE？或者如何用powershell映射网络驱动器？谢谢

**编辑**：

当我使用

```
Invoke-Command -ComputerName servername -ScriptBlock { (New-Object -ComObject WScript.Network).MapNetworkDrive 
("M:", "\\server\folder", $false, "login", "password") } 
```

它将创建一些仅在远程计算机上可见的“影子”磁盘，使用：

```
Invoke-Command -ComputerName servername -ScriptBlock { NET USE } 
```

并且可以使用以下方法删除：

```
Invoke-Command -ComputerName servername -ScriptBlock { NET USE /d /y M: } 
```

但是当我连接到远程服务器时，我看不到、删除或添加映射的磁盘：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-13T04:38:25.710

我必须使用计划任务来完成。

**创建一个包含映射文本的标准 bat 文件。**

`

```
net use R: /Delete /y
net use R: "\\SERVERNAME\R" /persistent:yes
net use S: /Delete /y
net use S: "\\SERVERNAME\S" /persistent:yes 
```

`

**使用计划任务作业信息创建 XML**

`

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.3" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2016-03-12T14:19:18.8527017</Date>
    <Author>DOMAIN\USER</Author>
  </RegistrationInfo>
  <Triggers />
  <Principals>
    <Principal id="Author">
      <GroupId>S-1-5-32-544</GroupId>
      <RunLevel>HighestAvailable</RunLevel>
    </Principal>
  </Principals>
  <Settings>
    <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
    <DisallowStartIfOnBatteries>true</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries>
    <AllowHardTerminate>true</AllowHardTerminate>
    <StartWhenAvailable>false</StartWhenAvailable>
    <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
    <IdleSettings>
      <StopOnIdleEnd>true</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
    <AllowStartOnDemand>true</AllowStartOnDemand>
    <Enabled>true</Enabled>
    <Hidden>false</Hidden>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <DisallowStartOnRemoteAppSession>false</DisallowStartOnRemoteAppSession>
    <UseUnifiedSchedulingEngine>false</UseUnifiedSchedulingEngine>
    <WakeToRun>false</WakeToRun>
    <ExecutionTimeLimit>P3D</ExecutionTimeLimit>
    <Priority>7</Priority>
  </Settings>
  <Actions Context="Author">
    <Exec>
      <Command>I:\Scripts\Schedualed Taks XML\Maps.bat</Command>
    </Exec>
  </Actions>
</Task> 
```

`

**使用批处理文件创建任务 (schtasks.exe)**

`

```
@echo off
if exist "exists.txt" del "exists.txt"
for /F %%A in (SNL.txt) do (

Echo %%A

schtasks.exe /create /f /tn "Map Drives" /XML "I:\Scripts\Schedualed Taks XML\DriveMaps.xml" /s %%A

)
pause 
```

`

**注意：** SNL.txt 是您希望在其上创建任务的计算机列表。

**然后使用批处理文件运行任务**（如果需要，您可以制作这个批处理文件）

`

```
@echo off
if exist "exists.txt" del "exists.txt"
for /F %%A in (SNL.txt) do (

Echo %%A

schtasks.exe /run /s %%A /tn "Map Drives" 

)

Pause 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:06:07.740

尝试这个：

```
Invoke-Command -ComputerName servername -ScriptBlock {
  (New-Object -ComObject WScript.Network).MapNetworkDrive(
      "L:", "\\server\share", $false, "login", "password"
    )
} 
```

**编辑：**当我运行以下命令时

```
Invoke-Command -ComputerName ServerB -ScriptBlock {
  (New-Object -ComObject WScript.Network).MapNetworkDrive(
      "L:", "\\ServerC\share", $true, "DOMAIN\UserB", "password"
    )
} 
```

如`DOMAIN\UserA`on `ServerA`，它连接`\\ServerC\share`为驱动器`L:`就好`ServerB`了。`ServerB`然后，当我以身份登录时`DOMAIN\UserA`，我可以看到驱动器，但会收到一条警告，指出并非所有网络驱动器都可以重新连接。这是很自然的，因为 UserA 和 UserB 有不同的密码。当我点击驱动器时，系统要求提供 DOMAIN\UserB 的凭据，当我输入密码时，我可以正常访问共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T19:50:53.500

根据[这篇](http://social.technet.microsoft.com/Forums/scriptcenter/en-US/78402965-0ba2-41d6-9eeb-9044c916efa1/powershell-mapremove-networkdrives-on-remote-computer?forum=ITCG)文章，没有 CredSSP 是不可能的吗？我正在尝试做同样的事情=(

# java - 3 层架构、Web 应用程序和用户日志记录

> ID：12407243
> 
> 赞同：0
> 
> 时间：2012-09-13T13:19:05.303
> 
> 标签：java, web-applications, logging, 3-tier

在尊重[3 层架构](http://en.wikipedia.org/wiki/Multitier_architecture#Three-tier_architecture)的 Web 应用程序中，谁负责实现用户日志模块：表示层还是应用程序层？

我问这个问题是因为用户日志模块实际上并不是应用程序逻辑层的一部分，但也不是演示层的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:11:03.460

日志记录是横切关注点，因此不属于任何一层。我建议您尽可能避免创建日志记录模块。它不太可能增加任何价值，只会复制现有的日志框架。只需始终如一地使用 SLF4J 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:22:15.937

记录异常有助于识别和消除编程逻辑中的缺陷。什么是应用程序缺陷的最佳判断应该是实际方法本身。视图层应该只显示信息；它不应该负责弄清楚什么是编程逻辑缺陷，什么不是编程逻辑缺陷。因此，将是逻辑层（模型/控制器，在 mvc 用语中）。

# sql - SQL存储过程将参数传递到“order by”

> ID：12407247
> 
> 赞同：6
> 
> 时间：2012-09-13T13:19:10.647
> 
> 标签：sql, stored-procedures, sql-order-by

使用 Microsoft SQL 服务器管理器 2008。

制作一个“最终”选择 Pareto 列表中前 10 个的存储过程。但我也想再次运行它以找到倒数 10。

现在，我没有重新复制查询，而是尝试查看是否有一种方法可以将参数传递到查询中，从而将顺序从 asc 更改为 desc。

有什么方法可以让我免于复制代码吗？

```
CREATE PROCEDURE [dbo].[TopVRM]
@orderby varchar(255)
AS
SELECT Peroid1.Pareto FROM dbo.Peroid1
GROUP by Pareto ORDER by Pareto @orderby 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T13:22:03.343

只是有点傻：

```
CREATE PROCEDURE [dbo].[TopVRM]
@orderby varchar(255)
AS
SELECT Peroid1.Pareto FROM dbo.Peroid1
GROUP by Pareto
ORDER by CASE WHEN @orderby='ASC' THEN Pareto END,
         CASE WHEN @orderby='DESC' THEN Pareto END DESC 
```

您根本*不需要*将第二个排序条件放在`CASE`表达式中（*），如果`Pareto`是数字，您可以决定只做`CASE WHEN @orderby='ASC' THEN 1 ELSE -1 END * Pareto`

(*) 只有当第一个排序条件认为两行相等时，第二个排序条件才有效。这是当两行具有相同的*Pareto*值时（因此反向排序也会认为它们相等），或者因为第一个`CASE`表达式返回`NULL`s （所以`@orderby`is not `'ASC'`，所以我们想要执行`DESC`排序。

* * *

您可能还想考虑一次检索两个结果集，而不是进行两次调用：

```
CREATE PROCEDURE [dbo].[TopVRM]
@orderby varchar(255)
AS

SELECT * FROM (
    SELECT
       *,
       ROW_NUMBER() OVER (ORDER BY Pareto) as rn1,
       ROW_NUMBER() OVER (ORDER BY Pareto DESC) as rn2
    FROM (
        SELECT Peroid1.Pareto
        FROM dbo.Peroid1
        GROUP by Pareto
    ) t
) t2
WHERE rn1 between 1 and 10 or rn2 between 1 and 10
ORDER BY rn1 
```

这将为您提供前 10 名和后 10 名，按从上到下的顺序排列。但是，如果总共少于 20 个结果，您将不会得到重复，这与您当前的计划不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:21:47.057

尝试：

```
 CREATE PROCEDURE [dbo].[TopVRM]
(@orderby varchar(255)
AS
IF @orderby='asc'
SELECT Peroid1.Pareto FROM dbo.Peroid1
GROUP by Pareto ORDER by Pareto asc
ELSE
SELECT Peroid1.Pareto FROM dbo.Peroid1
GROUP by Pareto ORDER by Pareto desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T16:12:37.817

我知道它已经很老了，但只是想在这里分享我们的解决方案，希望对某人有所帮助:)

在对几个候选解决方案进行了一些性能测试（其中一些发布在这个线程中）之后，我们意识到**你必须非常小心**你的实现：你的 SP**性能可能会受到巨大影响**，特别是当你将它与**分页**问题结合起来时。

我们找到的最佳解决方案是保存原始结果，即。**只需在时态表**中应用过滤器（`#RawResult`在示例中），然后添加`ORDER BY`and`OFFSET`子句进行分页。也许这不是最漂亮的解决方案（因为您被迫为要排序的每一列复制和粘贴一个子句两次），但在性能方面我们无法找到其他更好的解决方案。

它是这样的：

```
CREATE PROCEDURE [dbo].[MySP]
    -- Here goes your procedure arguments to filter results
    @Page INT = 1,                  -- Resulting page for pagination, starting in 1
    @Limit INT = 100,               -- Result page size
    @OrderBy NVARCHAR(MAX) = NULL,  -- OrderBy column
    @OrderByAsc BIT = 1             -- OrderBy direction (ASC/DESC)
AS

-- Here goes your SP logic (if any)

SELECT 
    * -- Here goes your resulting columns
INTO
    #RawResult
FROM 
    ...
-- Here goes your query data source([FROM], [WHERE], [GROUP BY], etc)
-- NO [ORDER BY] / [TOP] / [FETCH HERE]!!!!

--From here, ORDER BY columns must be copy&pasted twice: ASC and DESC orders for each colum
IF (@OrderByAsc = 1 AND @OrderBy = 'Column1')
    SELECT * FROM #RawResult ORDER BY Column1 ASC OFFSET @Limit * (@Page - 1) ROWS FETCH NEXT @Limit ROWS ONLY
ELSE
IF (@OrderByAsc = 0 AND @OrderBy = 'Column1')
    SELECT * FROM #RawResult ORDER BY Column1 DESC OFFSET @Limit * (@Page - 1) ROWS FETCH NEXT @Limit ROWS ONLY
ELSE
IF (@OrderByAsc = 1 AND @OrderBy = 'Column2')
    SELECT * FROM #RawResult ORDER BY Column2 ASC OFFSET @Limit * (@Page - 1) ROWS FETCH NEXT @Limit ROWS ONLY
ELSE
IF (@OrderByAsc = 0 AND @OrderBy = 'Column2')
    SELECT * FROM #RawResult ORDER BY Column2 DESC OFFSET @Limit * (@Page - 1) ROWS FETCH NEXT @Limit ROWS ONLY
ELSE
    ...
ELSE --Default order, first column ASC
    SELECT * FROM #RawResult ORDER BY 1 ASC OFFSET @Limit * (@Page - 1) ROWS FETCH NEXT @Limit ROWS ONLY 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T10:25:28.630

**这为您提供了更多选择**

```
CREATE PROCEDURE [dbo].[TopVRM] @orderby varchar(255) = 'Pareto asc'
DECLARE @SendIt NVARCHAR(MAX)
AS
BEGIN
    SET @SendIt = 'SELECT Peroid1.Pareto FROM dbo.Peroid1
                   GROUP by Pareto ORDER by '+ @orderby
    EXEC sp_executesql @SendIt
END
GO
EXEC dbo.TopVRM 'Pareto DESC'
GO 
```

# samsung-smart-tv - 如何提取嵌入在三星智能电视上 Icecast 音频（广播）流中的流式“正在播放”数据

> ID：12407248
> 
> 赞同：5
> 
> 时间：2012-09-13T13:19:09.973
> 
> 标签：samsung-smart-tv, icecast, internet-radio

我正在为广播电台创建三星电视应用程序，他们在 Icecast 流中提供“正在播放”信息。是否有可能（以及如何）提取这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:07:35.180

Shoutcast 支持“ **Icy-MetaData** ”——请求标头中的附加字段。设置后，它向广播服务器发出请求，以在编码的音频流本身中以周期性间隔（每个“ **icy-mettaint** ”字节一次）嵌入有关流的元数据。“ **icy-mettaint** ” 的值由直播服务器配置决定，并作为初始回复的一部分发送给客户端。

查看关于**[Shoutcast Internet Radio Protocol](http://thecodeartist.blogspot.com/2013/02/shoutcast-internet-radio-protocol.html)**的这篇文章，了解有关**icy:metadata**和 C 中的示例代码的详细信息。

**[http://forums.radiotoolbox.com/viewtopic.php?t=74](http://forums.radiotoolbox.com/viewtopic.php?t=74)**上也提供了更多技术性讨论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:49:52.417

是的，这是可能的。元数据以指定的间隔交织到流数据中。基本上，您读取 8192 字节（或响应标头指定的任何内容`Icy-MetaInt`），然后读取元数据块。

该元数据块的第一个字节告诉您数据的长度。长度为 0 表示没有更新的元数据。

读取元块后，您将返回读取流数据。

我在这里的答案中有所有这些更详细的信息： [https](https://stackoverflow.com/a/4914538/362536) ://stackoverflow.com/a/4914538/362536 虽然我知道您不是在编写 PHP，但无论哪种语言，主体都是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T21:35:03.583

我刚刚为 icecast 和 centova 创建了一个广播播放器，它使用 lastFM api 来提取歌曲元数据。[https://github.com/johndavedecano/Icecast-Centova-LastFM-API](https://github.com/johndavedecano/Icecast-Centova-LastFM-API)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-10T16:09:35.267

如果您正在为广播电台执行此操作，那么他们可以通过 Icecast 的 XSLT 功能提供此数据。一些[随机的旧 XSLT 示例](http://ruecker.fi/foss/icecast/xslt/)，用于提供我在某个时候所做的流元数据。

另一种选择是运行 Icecast 2.4.1 或将两个文件 (xml2json.xsl status-json.xsl) 添加到旧版本。

请注意，只有 Icecast 2.4.1 或更新版本支持添加 CORS/ACAO 标头，这可能是从 Web 应用程序/网站访问数据所必需的。

如果您不直接与广播电台合作并且不能要求他们这样做，那么请忽略此答案。其他人可能会发现它很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T11:16:20.550

从本地玩家那里没有获得这个元的选项。

您可能可以使用[jQuery.stream](http://code.google.com/p/jquery-stream/)插件直接获取元数据 - 但您需要在您的 icecast 服务器上设置 Access-Control-Allow-Origin - 但我不知道它是否会工作。

这里最好的解决方案是使用这个脚本： [http ://code.google.com/p/icecast-now-playing-script/](http://code.google.com/p/icecast-now-playing-script/)

因此，您将这个脚本安装在您的 Web 服务器上，然后从 SmartTV 应用程序中，您将在播放流时将其 AJAX 一次。

# jakarta-ee - 用户名密码未在基于表单的身份验证中进行身份验证

> ID：12407260
> 
> 赞同：1
> 
> 时间：2012-09-13T13:19:36.467
> 
> 标签：jakarta-ee, forms-authentication

我正在尝试在基于 Java EE 的应用程序中实现基于基本表单的身份验证。当我尝试访问受保护的资源时，我能够将页面重定向到登录页面，但即使我输入了正确的 [tomcat-users.xml 中可用的条目] 用户名和密码，错误页面也会被加载。请在下面找到代码片段。

Web.xml

```
 <login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
            <form-login-page>/login.jsp</form-login-page>
    <form-error-page>/loginError.jsp</form-error-page>
</form-login-config> 
```

```
<session-config>
  <session-timeout>5</session-timeout>
  </session-config>

 <security-role>
    <role-name>user</role-name>
 </security-role>

<security-constraint>
  <web-resource-collection>
   <web-resource-name>J2EEApp</web-resource-name>
   <description> accessible by authorised users </description>
  <url-pattern>/user/*</url-pattern>
  <http-method>PUT</http-method>
   <http-method>DELETE</http-method>
   <http-method>GET</http-method>
   <http-method>POST</http-method>
  </web-resource-collection>
  <auth-constraint>
    <description>These are the roles who have access</description>
    <role-name>user</role-name>
  </auth-constraint>
</security-constraint>

<security-constraint>
  <web-resource-collection>
   <web-resource-name>GuestPages</web-resource-name>
   <description> accessible by un-authorised users </description>
   <url-pattern>/guest/*</url-pattern>
  </web-resource-collection>
</security-constraint>

</web-app> 
```

登录.jsp

```
 <div id="container">
 <jsp:include page="header.jsp"></jsp:include>
 <div id="body">
<form method="post" id="post" action="j_security_check" name="input">
<label id ="label">Username<sup>*</sup> </label>
<input id ="input" type="text" name="j_username" value=""><br><br>
<label id="label">Password<sup>*</sup> </label>
<input id="input" type="password" name="j_password" value=""><br><br>
<input id="input" type="submit" name="submit" value="login">
<a id="link" href="${pageContext.request.contextPath}/guest/menu">Guest</a>
</form>
</div> 
```

服务器.xml

```
 <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
           resourceName="UserDatabase">
  </Realm> 
```

tomcat-users.xml

```
<role rolename="user"/>
  <user username="shubham" password="shubham" roles="user"/>
  <user username="user1" password="user1" roles="user"/> 
```

现在，当我转到 localhost:8080/user/menu 时，它会按预期显示 login.jsp，但是当我使用正确的用户名密码时，它会转到 loginError.jsp。

请帮助定位问题。

# wordpress - 没有用户登录时，Wordpress 博客中断

> ID：12407263
> 
> 赞同：0
> 
> 时间：2012-09-13T13:19:41.950
> 
> 标签：wordpress

我在 wordpress 中设置了一个博客，并且正在使用免费的基于类型的主题。我注意到的是，当我以管理员身份登录时，一切都会很好，但是当我注销并以普通会员身份查看该网站时，事情就会出现问题。以下是我的截图：

登录： ![在此处输入图像描述](../Images/ab976f8c4ce60f0b095ee5cbc1d99c7a.png)

未登录： ![在此处输入图像描述](../Images/2db7f46cb996dba95fdb1f7a3a5ef64e.png)

关于为什么会发生这种情况的任何想法？

# actionscript-3 - 在 GPU 模式 AIR mobile 中使用文本过滤器

> ID：12407265
> 
> 赞同：4
> 
> 时间：2012-09-13T13:19:42.380
> 
> 标签：actionscript-3, apache-flex, mobile, air, gpu

不幸的是，过滤器在 GPU 模式下不起作用（投影、发光）。我正在寻找机会在这种模式下将这些效果用于文本。我会欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T09:58:40.903

正如 Astraport 所提到的，每次使用`bitmapData.draw()`.

如果您使用`textField.getBounds`来确定所需的 bitmapData 的大小，则生成的边界矩形将不包括由于过滤器而产生的额外大小（例如，DropShadowFilter 根据“距离”和“模糊”将文本框的一侧伸出某些像素'）。为确保在绘制位图时包含过滤器，您还需要使用`bitmapData.generateFilterRect()`来获得正确大小的矩形。

代码片段（未经测试，但总体思路）：

```
// Remember the transform matrix of the text field
var offset : Matrix = myTextField.transform.matrix.clone();
// Get the bounds of just the textfield (does not include filters)
var tfBounds : Rectangle = myTextField.getBounds( myTextField.parent );     
// Create a bitmapData that is used just to calculate the size of the filters
var tempBD : BitmpaData = new BitmapData( Math.ceil(tfBounds.width), Math.ceil(tfBounds.height) );
// Make a copy of the textField bounds. We'll adjust this with the filters
var finalBounds : rectangle = tfBounds.clone();
// Step through each filter in the textField and adjust our bounds to include them all
var filterBounds : rectangle;
for each (var filter : BitmapFilter in myTextField.filters) {
    filterBounds = tempBD.generateFilterRect( tfBounds, filter );
    finalBounds.left = Math.min( finalBounds.left, filterBounds.left );
    finalBounds.right = Math.max( finalBounds.right, filterBounds.right );
    finalBounds.top = Math.min( finalBounds.top, filterBounds.top );
    finalBounds.bottom = Math.max( finalBounds.bottom, filterBounds.bottom );
}

// Now draw the textfield to a new bitmpaData
var textFieldBD : BitmpaData = new BitmapData( Math.ceil(finalBounds.width), math.ceil(finalBounds.height) );
offset.tx = -finalBounds.x;
offset.ty = -finalBounds.y;
textFieldBD.draw( myTextField.parent, offset, myTextField.transform.colorTransform );

// Create a bitmap and add the bitmap data. Note: normally you would create a
// bitmap once and just update the bitmpaData
var bitmap : Bitmap = new Bitmap();
myTextField.parent.addChild( bitmap );

// Position the bitmap in same place as textField
bitmap.bitmapData = textFieldBD;
bitmap.x = myTextField.x - finalBounds.x;
bitmap.y = myTextField.y - finalBounds.y;
myTextField.visible = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T15:21:41.847

以下是如何将 ANY 转换`DisplayObject`为`Bitmap`- 用于在 AIR GPU mobile 中“恢复”滤镜效果`rendermode`。这是`Pixelthis`的解决方案，已修复、优化和测试：

```
 // => 'bitmap' must belong to the same parent as 'obj'. 'obj' should be invisible.
    static public function Update(obj:DisplayObject, bitmap:Bitmap):void {
        //trace("CacheToBmp",obj.name);

        // Remember the transform matrix of the text field
        var offset:Matrix = obj.transform.matrix.clone();
        // Get the bounds of just the textfield (does not include filters)
        var bounds:Rectangle = obj.getBounds(obj);
        // Create a bitmapData that is used just to calculate the size of the filters
        var tempBD:BitmapData = new BitmapData( Math.ceil(bounds.width), Math.ceil(bounds.height), false );
        bounds.width = obj.width;
        bounds.height = obj.height;
        // Make a copy of the textField bounds. We'll adjust this with the filters
        var finalBounds:Rectangle = new Rectangle(0,0,bounds.width,bounds.height);

        // Step through each filter in the textField and adjust our bounds to include them all
        var filterBounds:Rectangle;
        for each (var filter:BitmapFilter in obj.filters) {
            filterBounds = tempBD.generateFilterRect( tempBD.rect, filter );
            finalBounds = finalBounds.union(filterBounds);
        }
        finalBounds.offset(bounds.x,bounds.y);
        finalBounds.x = Math.floor(finalBounds.x);
        finalBounds.y = Math.floor(finalBounds.y);
        finalBounds.width = Math.ceil(finalBounds.width);
        finalBounds.height = Math.ceil(finalBounds.height);

        // Now draw the textfield to a new bitmpaData
        var data:BitmapData = new BitmapData( finalBounds.width, finalBounds.height, false, 0 );
        offset.tx = -finalBounds.x;
        offset.ty = -finalBounds.y;
        data.drawWithQuality( obj, offset, obj.transform.colorTransform, obj.blendMode, null, true, StageQuality.HIGH );
        bitmap.bitmapData = data;

        // Position the bitmap in same place as 'obj'
        bitmap.x = obj.transform.matrix.tx + finalBounds.x;
        bitmap.y = obj.transform.matrix.ty + finalBounds.y;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:55:35.130

基本思想是正常应用过滤器，然后将显示对象绘制到位图数据并将位图添加到舞台。有关示例，请参见[http://forums.adobe.com/message/3934192 。](http://forums.adobe.com/message/3934192)

如果您应用它的文本是静态的，它应该很容易做到，但是如果您想应用这个动态文本（例如，一个会经常变化的分数计数器，或者用户可编辑的文本）我想它可能开始变得烦人，但我不知道任何其他解决方案。

# java - Java：两个有序整数序列的交集

> ID：12407274
> 
> 赞同：0
> 
> 时间：2012-09-13T13:19:57.013
> 
> 标签：java, arrays, integer

> **可能重复：**
> [Java 比较两个列表](https://stackoverflow.com/questions/2762093/java-compare-two-lists)

如果我有两个有序的数字序列（我在这里有很大的灵活性，并且可以将我的数据放在列表、集合、数组等中），那么提取匹配项最有效的方法是什么？例如，如果我有：

`[1, 2, 4, 6, 9]`而且`[2, 3, 4]`，我想回来`[2, 4]`。

显然有很多方法可以解决这个问题。我很好奇最有效的方法是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T13:25:29.193

两个指针（索引），每个列表一个。从每个列表的开头开始

每当您找到匹配项时，将其存储起来。

如果没有匹配项，请检查哪个列表在当前索引中具有最低值并增加该列表的索引。检查匹配。这样做直到您到达列表之一的末尾。

与列表总和的大小成线性关系（更糟糕的情况）。没有办法做得更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T13:24:17.193

所以你想要 to 集的交集？您可以使用apache commons 中的[CollectionUtils.intersection](http://commons.apache.org/collections/api/org/apache/commons/collections/CollectionUtils.html#intersection%28java.util.Collection,%20java.util.Collection%29)。或者更好的是，来自 Guava [Sets.intersection](http://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html#intersection%28java.util.Set,%20java.util.Set%29)（通用）的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T13:24:26.637

这是`intersection`两个系列，我想`Set`这将是最好的选择。

请参阅[Collection.retainAll()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)

> 仅保留此集合中包含在指定集合中的元素（可选操作）。换句话说，从这个集合中移除所有不包含在指定集合中的元素。

一种更有效的方法是

```
public static void main(String[] args) {
    int[] firstArray = { 1, 3, 5, 8, 10 };
    int[] secondArary = { 3, 8 };
    //Arrays.sort(firstArray); If arrays needs to be sorted
    //Arrays.sort(secondArary);
    System.out.println(Arrays
            .toString(intersection(firstArray, secondArary)));

}

private static Integer[] intersection(int firstArray[], int secondArary[]) {
    int i = 0;
    int j = 0;
    ArrayList<Integer> list = new ArrayList<Integer>();
    while (i < firstArray.length && j < secondArary.length) {
        if (firstArray[i] < secondArary[j])
            i++;// Increase I move to next element
        else if (secondArary[j] < firstArray[i])
            j++;// Increase J move to next element
        else {
            list.add(secondArary[j++]);
            i++;// If same increase I & J both
        }
    }
    return list.toArray(new Integer[0]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T13:24:51.157

如果将两个序列存储到`Set`s 中，则可以使用`Set.retainAll()`which：

> 仅保留此集合中包含在指定集合中的元素（可选操作）。换句话说，从这个集合中移除所有不包含在指定集合中的元素。如果指定的集合也是一个集合，则此操作有效地修改此集合，使其值是两个集合的交集。

例如：

```
Set<Integer> s1 = new TreeSet<Integer>();
s1.add(1);
s1.add(2);
s1.add(6);

Set<Integer> s2 = new TreeSet<Integer>();
s2.add(2);
s2.add(6);

s2.retainAll(s1);

for (Integer i: s2)
{
    System.out.println(i);
} 
```

输出：

```
2
6

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T13:24:57.320

我会将这两个列表创建为`java.util.Set`，将一组复制到一个临时变量并调用`retainAll(<otherSet>)`这个临时集。然后临时集合将留在两个集合的交集处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T13:28:05.570

我会使用[TreeLists](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/list/TreeList.html)并执行以下操作：

```
TreeList<Integer> list1 = ...
TreeList<Integer> list2 = ...

Iterable<Integer> result = Iterables.filter(list1, Predicates.in(list2)); 
```

这使用 Guava 的 Iterables 和 Predicates。

# javascript - 使用 jasmine 模拟对服务器的调用

> ID：12407276
> 
> 赞同：3
> 
> 时间：2012-09-13T13:19:59.443
> 
> 标签：javascript, ajax, jquery, jasmine

我想通过使用 jasmine 来模拟对服务器的 ajax 调用，并测试***done 和 fail Deferred Object***。

目前，我正在真正地做它们，因此试图向服务器发送一堆调用。

我应该如何将以下代码修复为

```
mySpy = spyOn(backendController, 'submitForm').andCallThrough(); 
// it makes a real call to the server

mySpy = spyOn(backendController, 'submitForm'); 
// it does not make a real call to the server but I get the following error
// Cannot call method 'done' of undefined 
```

这是关于 doSubmitForm 的代码

```
doSubmitForm: function (backendController) {
  backendController.submitForm(message.val())
        .done(this.onSuccess)
        .fail(this.onError);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:32:17.877

在失败的情况下，我认为问题是由于调用没有返回 jQuery-Deferred 对象。

为了验证这个理论，你可能会尝试这样的事情：

```
var tmpDefObj = $.Deferred();

spyOn(backendController, 'submitForm').andCallFake(function() {return tmpDefObj;}); 
```

# iphone - 如何将 iPhone UIWebView 内容分成多个页面

> ID：12407278
> 
> 赞同：1
> 
> 时间：2012-09-13T13:20:00.690
> 
> 标签：iphone, html, objective-c, ios, xcode

我想划分 UIWebView 内容，这样用户无需向下滚动即可查看 Web 视图的更多内容。当用户在视图中按下某个按钮时，剩余内容将显示在下一个视图中，并且在下一个视图中应该遵循相同的功能。有没有办法实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:27:54.103

UIWebView 具有 UIScrollView scrollView 属性，可以发送 scrollRectToVisible:animated:... 如果您可以控制加载的 HTML，可能会更好地通过 JS 更改视口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:39:14.967

更好的方法是在 UIWebview 的底部添加一个 UITabbar 并在其上添加 UIBarButtonItems。

此外，可以为每个 barbuttons 分配 UIWebView 内置事件..

> goBack，goForward，停止重新加载，刷新。

只需右键单击 webView 并将上面提到的任何相应操作分配给下面 TabBar 上的 UIBarButtonItems

# jquery - 通过单击jquery中的按钮将项目添加到列表

> ID：12407280
> 
> 赞同：2
> 
> 时间：2012-09-13T13:20:08.113
> 
> 标签：jquery

我有一个选择列表，需要在单击按钮时将每个选定的值/文本附加到列表中。这是一些伪代码

```
 $("#addButton").click(function () {           

            var selectedValue = "..."
            var selectedText = "..."

            //todo append each selected value & text
            //to an unordered list 
            //on submit of form read in via querystring selected
            //values and text from the unordered list

}); 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:23:45.370

```
$("#addButton").click(function () {           

  var selectedVal = $('select').val();

  $('ul').append('<li>'+selectedVal+'</li>')

}); 
```

[**JSFiddle**](http://jsfiddle.net/RMTxE/)

# dll - 第二次调用API时全局hook生效

> ID：12407283
> 
> 赞同：0
> 
> 时间：2012-09-13T13:20:23.970
> 
> 标签：dll, hook

全部

我已经实现了一个全局 Windows 挂钩来挂钩 API `MessageBox()`，挂钩是在 dll 中实现的，当我在 win32 控制台应用程序（加载了 dll）中设置 Windows 挂钩并调用`MessageBox()`时，API 被成功挂钩。为简洁起见，我将此 win32 应用程序命名为 EXE1。

由于我设置了一个全局挂钩，我还希望`MessageBox()`其他应用程序的调用也被挂钩。因此，我运行另一个win32控制台应用程序——EXE2（与EXE1同时运行），调用`MessageBox()`了3次。但是，第一个呼叫没有被挂断。我不知道为什么。（代码为ansi格式。）代码如下：

------------------------------------dll------------- ------------------

```
#pragma once

#ifndef _WIN32_WINNT        // Allow use of features specific to Windows XP or later.                   
#define _WIN32_WINNT 0x0501 // Change this to the appropriate value to target other versions of Windows.
#endif                      

//for the getaddrinfo test
#include <WS2tcpip.h>
#pragma comment(lib, "ws2_32")

#include <windows.h>
#include <stdio.h>
#include "mhook.h"

//=========================================================================
// Define _MessageBox so we can dynamically bind to the function
typedef int (WINAPI* _MessageBox) (HWND, LPCTSTR, LPCTSTR, UINT);

//=========================================================================
// Get the current (original) address to the functions to be hooked
//
_MessageBox TrueMessageBox = (_MessageBox)GetProcAddress(GetModuleHandle(L"user32"), "MessageBoxW");

//=========================================================================
// This is the function that will replace MessageBox once the hook
// is in place
MMRESULT WINAPI HookMessageBoxW(HWND hWnd, LPCTSTR  lpText, LPCTSTR  lpCaption, UINT uType){
    printf("***** Call to MessageBox\n");
    lpText = L"hooked MessageBox";
    // Call the original waveInOpen function
    MMRESULT nResult = TrueMessageBox(hWnd, lpText, lpCaption, uType);
    return nResult;
}

///////////////////////////////////////////////////////////////////////////
#pragma comment(linker, "/SECTION:YCIShared,RWS")
#pragma data_seg("YCIShared")
HHOOK g_hHook = NULL;
#pragma data_seg()

HMODULE hInstance = 0;

static LRESULT WINAPI GetMsgProc(int code, WPARAM wParam, LPARAM lParam) 
{   printf("=======\n");
    //Mhook_SetHook((PVOID*)&TrueMessageBox, HookMessageBoxW);
    return ::CallNextHookEx(g_hHook, code, wParam, lParam);
}

BOOL WINAPI SetSysHook(BOOL bInstall, DWORD dwThreadId)
{
    BOOL bOk;
    if(bInstall) 
    {
        g_hHook = ::SetWindowsHookEx(WH_GETMESSAGE, GetMsgProc, 
                        hInstance, dwThreadId);
        bOk = (g_hHook != NULL);
    } 
    else 
    {
        bOk = ::UnhookWindowsHookEx(g_hHook);
        g_hHook = NULL;
    }
    return bOk;
}

BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        hInstance = (HINSTANCE) hModule;
        printf("dll loaded!============================\n");
        if(Mhook_SetHook((PVOID*)&TrueMessageBox, HookMessageBoxW)) //hook
            printf("MessageBox Hook Succeeded!\n");
        else
            printf("MessageBox Hook Failed");

        break;
    case DLL_PROCESS_DETACH:
        Mhook_Unhook((PVOID*)&TrueMessageBox);
        break;
    }
    return TRUE;
} 
```

-------------------------------------------dll结束---- ----------------------------- 您无法构建此 dll，因为它调用了一个自实现的函数`Mhook_SetHook()`and `Mhook_Unhook()`，它们来自**mhook**。DLL 文件名为**mhook-2.3-dll.dll**。

------------------------------EXE1-------------------- --------------------------------

```
#pragma once

#ifndef _WIN32_WINNT        // Allow use of features specific to Windows XP or later.                   
#define _WIN32_WINNT 0x0501 // Change this to the appropriate value to target other versions of Windows.
#endif                      

#include <windows.h>
#include <stdio.h>

#pragma comment(lib, "mhook-2.3-dll.lib")

extern "C"  _declspec(dllimport) BOOL WINAPI SetSysHook(BOOL bInstall, DWORD dwThreadId);

int wmain(int argc, WCHAR* argv[])
{
    //HMODULE hModule = ::LoadLibrary(L"mhook-2.3-dll.dll");
    SetSysHook(TRUE, 0);
    MessageBoxW(NULL, (LPCTSTR)L"MessageBox", NULL, MB_OK);          //hooked
    SetSysHook(FALSE, 0);
    return 0;
} 
```

-------------------------------- EXE1结束--------------- --------------------------

--------------------------------EXE2----------------- ------------------------------- #include #include

```
int main(){

    MessageBox(NULL, (LPCTSTR)L"MessageBox1", NULL, MB_OK);      //not hooked
    MessageBox(NULL, (LPCTSTR)L"MessageBox2", NULL, MB_OK);      //hooked
    MessageBox(NULL, (LPCTSTR)L"MessageBox3", NULL, MB_OK);      //hooked
    return 0;
} 
```

-------------------------------------------EXE2结束---- --------------------------

# android - 仅当应用程序将进入 Android 后台时才禁用后按

> ID：12407286
> 
> 赞同：0
> 
> 时间：2012-09-13T13:20:44.650
> 
> 标签：android, android-fragments, back

当用户按下后退按钮时，我的应用程序应先要求用户确认，然后再将应用程序置于后台。

我试图覆盖`dispatchKeyEvent`. 问题是我也有片段被推送到 backStack 中。

当后台堆栈中仍有片段时，我不应该要求确认，因为在这种情况下，应用程序不会进入后台：它将从堆栈中弹出片段。

有没有办法区分应用程序何时进入后台和另一个片段何时从堆栈中弹出`dispatchKeyEvent`？如果没有，还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:25:52.780

您可以覆盖 onBackPressed 方法并从活动管理器获取当前任务的列表，然后决定天气要求用户确认或返回。[此处](https://stackoverflow.com/q/5975811/328947)讨论此解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:23:59.350

使用这个Activity的方法

```
 @Override
        public void onBackPressed() {
            // TODO Auto-generated method stub
                       // Add here  whatever uoy want

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:25:32.877

您可以覆盖

```
public void onBackPressed() {
  super.onBackPressed();
} 
```

并检查您的状况，例如，

```
public void onBackPressed() {
  if(foo == true)
    showDialog();
  else
    super.onBackPressed();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:23:10.050

只需覆盖 onBackPressed。

此外，请参阅[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)以更好地理解 android 中的 backstack 概念

# database - OrientDB - 无法从 Java 应用程序存储数据

> ID：12407287
> 
> 赞同：0
> 
> 时间：2012-09-13T13:20:48.587
> 
> 标签：database, nosql, orientdb

我正在尝试将 OrientDB 中的三元组存储为我正在处理的 Java 应用程序中的 Vertex-Edge-Vertex 关系。我对使用 OrientDB 的理解是我可以使用 Tinkerpop API 并实例化这样的图：

```
OrientGraph graph = new OrientGraph("local:/tmp/orient/test_db"); 
```

这就是我实例化图形所做的一切，然后我尝试在这样的循环中连接顶点和边：（注意 a`Statement`是由主体-关系-对象组成的三元组。）

```
for (Statement s : statements) {

     Vertex a = graph.addVertex(null);
     Vertex b = graph.addVertex(null);
     a.setProperty("Subject", s.getSubject().toBELShortForm());
     RelationshipType r = s.getRelationshipType();
     if (s.getObject() != null) {
         b.setProperty("Object", s.getObject().toBELShortForm());
         Edge e = graph.addEdge(null, a, b, r.toString());
     }
     else {
         b.setProperty("Object", "null");
         Edge e = graph.addEdge(null, a, b, "no-relationship");
     }

} 
```

然后我循环遍历图形的顶点并将它们打印出来，如下所示：

```
for (Vertex v : graph.getVertices()) {
     out.println("Vertex: " +v.toString());
} 
```

它确实打印了很多顶点，但是当我通过命令行使用 登录服务器时`server.sh`，我看到的只是 3 条记录`ORole`和 4 条记录`OUser`。我在这里想念什么？因为看起来虽然我的 java 程序运行并完成，但数据并没有被放入数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:41:16.947

至少就目前而言，答案似乎不是直接使用 Tinkerpop API，而是直接使用 Orient API。这与我对 Tinkerpop 所做的事情相同，但使用的是 OrientDB API。这实际上确实将我的数据存储到数据库中：

```
for (Statement s : statements) {
            ODocument sNode = db.createVertex();
            sNode.field("Subject", s.getSubject().toBELShortForm());
            sNode.save();

            ODocument oNode = db.createVertex();
            if (s.getObject() != null) {
                oNode.field("Object", s.getObject().toBELShortForm());
                oNode.save();
            }
            else {
                oNode.field("Object", "null");
                oNode.save();
            }

            RelationshipType r = s.getRelationshipType();
            ODocument edge = db.createEdge(sNode, oNode);
            if (r != null) {
                edge.field(r.toString());
                edge.save();
            }
            else {
                edge.field("no relationship");
                edge.save();
            }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T22:11:19.373

在服务器的数据库目录下创建图表。下面的示例假设 OrientDB 已安装在“/usr/local/orient”下：

```
OrientGraph graph = new OrientGraph("local:/usr/local/orient/databases/test_db"); 
```

当您启动 server.sh 时，您应该会发现该数据库已正确填充。

lvc@

# javascript - 在 DOM 中查找模式并使用 jquery 替换它的内容

> ID：12407290
> 
> 赞同：1
> 
> 时间：2012-09-13T13:21:00.497
> 
> 标签：javascript, jquery

我有一个包含如下元素的 div

```
<input type="hidden" name="subscribe_message" value="Success"/>
<div class="titleBlue">Alerts</div>
<table cellpadding="2" cellspacing="0" width="100%"><tr><td align="LEFT" height="35">
<tr>
<td><a style="cursor:hand;text-decoration:underline" target="_blank" href="https://abc.global.com/kb/solution/21/Pages/136776.aspx">ab1</a></td>
</tr>
<tr>
<td><a style="cursor:hand;text-decoration:underline" target="_blank" href="https://abc.global.com/kb/solution/21/Pages/136775.aspx">ab2</a></td>
</tr>
<tr>
<td><a style="cursor:hand;text-decoration:underline" target="_blank" href="https://abc.global.com/kb/solution/21/Pages/136774.aspx">ab3</a></td>
</tr>
<tr>
<tr>
<td><a href='#' onClick="javascript:window.open('https://my-prod.global.com/gmm2/kb/dlink.do?externalId=<a style="cursor:hand;text-decoration:underline" target="_blank" href="https://abc.global.com/kb/solution/20/Pages/157468.aspx">157468 </a></td>       
</tr>
<tr>
<td><a style="cursor:hand;text-decoration:underline" target="_blank" href="https://abc.global.com/kb/solution/20/Pages/147468.aspx">147468 </a></td>
</tr>
</table> 
```

我需要一种方法来查找锚标记中的所有内容，并在同一链接中`abc.global.com`替换`cab.global.com`并附加**?source=abc 。**

那么如何遍历包含 id="clicker" 的 div 下的每个 a 标签并替换锚点 href 值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:27:11.043

尝试这个：

```
$( 'div#clicker a' ).each(function(o){
   var _anchor = $(this).attr('href');

   if(_anchor.indexOf( 'abc.global.com' )!=-1) {
      _anchor = _anchor.replace( 'abc.global.com', 'cba.global.com' );
      _anchor = modify( _anchor );
      $(this).attr('href',_anchor);
   }
});

function modify( anchor ) {
    if( anchor.indexOf( '?' ) != -1 ) {
        anchor = anchor.replace( anchor.indexOf( '?' ), '?source=abc&' );
    } else if( anchor.indexOf( '#' ) != -1 ) {
        anchor = anchor.replace( anchor.indexOf( '#' ), '?source=abc#' );
    } else {
        anchor += '?source=abc';
    }

    return anchor;
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:30:45.350

这个脚本应该做你想做的事：

```
$(document).ready(function(){
    // loop over all links inside the table
    $("a", "#clicker").each(function(){
        var href = $(this).attr('href');

        if(href.indexOf("abc.global.com") >= 0){
            // replace domain
            href = href.replace("abc.global.com", 'cab.global.com');
            // append source param
            href += "?source=abc";
            $(this).attr('href', href);
        }  
    });
});​ 
```

[工作小提琴](http://jsfiddle.net/4yp6x/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:35:47.317

**[jsBin 演示](http://jsbin.com/imowoh/4/edit)**

```
$('a[href*=abc]').each(function(){
    return this.href = this.href.replace('abc', 'cab')+'?source=abc';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:37:37.980

尝试这个

```
$('a').each(function(a){
if ($(this).attr('href').toLowerCase().indexOf("abc.global.com") >= 0){

$(this).attr('href',$(this).attr('href').replace('abc.global.com','cab.global.com'));
$(this).attr('href',$(this).attr('href') + '?source=abc')
    }
}); 
```

这是一个[http://jsfiddle.net/MgsrV/](http://jsfiddle.net/MgsrV/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T13:34:29.977

如果可以简单地遍历整个网站上的每个标签，您可以使用

```
var links = document.getElementsByTagName("a"); 
```

获取所有这些的列表。然后只需循环它们并在适当的地方更改href

```
for (var i = 0; i < links.length; i++)
{
    if (links[i].href.search("abc.global.com") != -1)
    {
        links[i].href.replace("abc.global.com", "cab.global.com");
        links[i].href += "?source=abc";
    }
} 
```

您可能希望将 href 临时保存在变量中以提高性能，并可能添加一些安全检查。

# mysql - 从查询的结果集中更新另一个表

> ID：12407291
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:12.003
> 
> 标签：mysql, stored-procedures, count, sql-update

```
select 
(SELECT count(ts.student_id) AS studentcount
from tb_student ts
where  ts.tudent_id>101 )as count1,
(SELECT count(tt.teacher_id) AS Totalteacher from tb_teacher tt
 where feedback_id<>0) as count2 
```

这给了我一些结果

```
count1   count2
 4         9 
```

在某些情况下，计数将相等，例如

```
 count1   count2
 9         9 
```

我需要使用此结果更新另一个表，例如何时`count1=count2` 更新一个名为`tb_log`并设置 的表`falg=1`

除了通过过程进行之外，它是否可以在此查询中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:29:36.543

这可以很容易地完成：

```
update tb_log
    set falg = 1
    where exists (select count1, count2
                  from (SELECT count(ts.student_id) AS studentcount
                        from tb_student ts
                        where  ts.tudent_id>101
                       ) as count1 cross join
                       (SELECT count(tt.teacher_id) AS Totalteacher
                        from tb_teacher tt
                        where feedback_id<>0
                       ) as count2
                  where count1 = count2
                 ) 
```

我将您的子查询从 SELECT 子句移到 FROM 子句中。我认为当表引用位于 FROM 子句中时，查询更容易理解。这也使得在 WHERE 子句中应用条件变得更加容易。

# javascript - 函数未将值作为参数传递

> ID：12407295
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:22.227
> 
> 标签：javascript

我无法弄清楚GetMoreInforesults（）函数未通过单选按钮的值（选择一个被选中）到GET请求。有谁知道为什么？

```
<form name="question_form">
    <input type="radio" name="vote" value="1" onclick="getVote(this.value)" />Yes<br />
    <input type="radio" name="vote" value="2" onclick="getVote(this.value)" />No<br />
    <textarea rows="3" name="moreInfo" onkeyup="getMoreInfoResults(document.question_form.vote.value, this.value)" /></textarea><br />
    <input type="submit" value="Submit" />
    <div id="otherAnswers"></div>
</form> 
```

这是我的 JavaScript：

```
function getMoreInfoResults(vote, input) {

if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
} else { // code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function() {
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
  document.getElementById("otherAnswers").innerHTML=xmlhttp.responseText;
}
}

xmlhttp.open("GET","phpPoll/phpPoll_userDefined/functions/getMoreInfoResults.php?vote=" + vote + "&moreInfo=" + input,true);
xmlhttp.send();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:26:39.707

`document.question_form.vote`表达式会给你一个`NodeList`对象，而不是`Node`一个。显然，它的`value`性质是`undefined`。

一种可能的解决方法是创建一个函数来检索选中的单选按钮的值：

```
function getCheckedValue(radioNodes) {
    for (var i = 0, l = radioNodes.length; i < l; i++) {
        if (radioNodes[i].checked) {
            return radioNodes[i].value;
        }
    }
} 
```

...并使用它而不是直接查询值：

```
onkeyup="getMoreInfoResults(getCheckedValue(document.question_form.vote), this.value)" 
```

# c# - 如何确定装配问题的原因？

> ID：12407296
> 
> 赞同：1
> 
> 时间：2012-09-13T13:21:23.053
> 
> 标签：c#, sharepoint-2010

我在我不熟悉的新领域 SharePoint 开发中遇到错误。我正在尝试通过 Visual Studio 2012 调试我的解决方案，我收到 EventLog 中记录的以下错误：

异常信息：

> ```
> Exception type: FileLoadException 
> Exception message: The located assembly's manifest definition does not match the 
>   assembly reference. (Exception from HRESULT: 0x80131040) 
> ```

在我的控件的 .ascx.g.cs 中，在 @__BuildControlTree 方法中可以看到该错误。不幸的是，它没有告诉我程序集的名称，所以我不确定错误在哪里。报告的堆栈跟踪是：

> 堆栈跟踪：
> 在 MI.VWP.Chart.Chart.CreateChildControls() 在 System.Web.UI.Control.EnsureChildControls() 在 System.Web.UI.WebControls.WebParts.Part.get_Controls() 在 System.Web.UI.Control.AddParsedSubObject (Object obj) at Microsoft.SharePoint.WebPartPages.WebPart.AddParsedSubObject(Object obj) at MooDInternational.VisualWebParts.Chart.Chart.__BuildControlTree(Chart __ctrl) at MooDInternational.VisualWebParts.Chart.Chart.InitializeControl() at MooDInternational.VisualWebParts.Chart .Chart.OnInit(EventArgs e) 在 System.Web.UI.Control.InitRecursive(Control NamingContainer) 在 System.Web.UI.Control.AddedControl(Control control, Int32 index) 在 System.Web.UI.WebControls.WebParts。 WebPartManager.WebPartManagerControlCollection.AddWebPartHelper(WebPart webPart) 在 System.Web.UI.WebControls.WebParts。WebPartManager.WebPartManagerControlCollection.AddWebPart(WebPart webPart) 在 System.Web.UI.WebControls.WebParts.WebPartManagerInternals.AddWebPart(WebPart webPart) 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager.AddWebPartWithRetry(WebPart webPart) 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager。 CreateWebPartsFromRowSetData(Boolean onlyInitializeClosedWebParts) 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager.LoadWebParts()CreateWebPartsFromRowSetData(Boolean onlyInitializeClosedWebParts) 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager.LoadWebParts()CreateWebPartsFromRowSetData(Boolean onlyInitializeClosedWebParts) 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager.LoadWebParts()
> 在 Microsoft.SharePoint.WebPartPages.SPWebPartManager.OnPageInitComplete(Object sender, EventArgs e) 在 System.EventHandler.Invoke(Object sender, EventArgs e) 在 System.Web.UI.Page.OnInitComplete(EventArgs e)
> 在 System.Web.UI .Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）

但是，如果我尝试在那里设置断点，我不会调用该方法。我试过查看 fusionlog 但得到以下我认为没有帮助的内容......

*** 装配活页夹日志条目 (13/09/2012 @ 14:16:15) ***

> 手术成功。绑定结果：hr = 0x0。操作成功完成。
> 
> 从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework64\v2.0.50727\mscorwks.dll 在可执行文件 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SharePoint\ 下运行vssphost4.exe --- 详细的错误日志如下。
> 
> === 预绑定状态信息 === LOG: User = ******.***** LOG：DisplayName = Microsoft.Build.Framework，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a（完全指定） LOG：Appbase = file:///C:/Program Files (x86 )/Microsoft Visual Studio 11.0/Common7/IDE/Extensions/Microsoft/SharePoint/ LOG: Initial PrivatePath = C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SharePoint\VstspCache10724 LOG: 动态Base = NULL LOG：Cache Base = NULL LOG：AppName = NULL 调用程序集：（未知）。LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\SharePoint\vssphost4.exe.Config LOG：使用来自 C:\Windows\Microsoft 的机器配置文件。 NET\Framework64\v2.0.50727\config\machine.config。LOG：绑定成功。从 C:\Windows\assembly\GAC_MSIL\Microsoft.Build.Framework\2.0.0.0__b03f5f7f11d50a3a\Microsoft.Build.Framework.dll 返回程序集。LOG：程序集在默认加载上下文中加载。

任何人都可以就我如何解决这个问题提出任何建议吗？

**编辑**

使用 Reflector，我设法稍微调试了生成的 @_BuildControl 方法，并发现了对 AddParsedSubject(object child) 的调用，它是控件上的虚拟方法。

添加以下代码：

```
protected override void AddParsedSubObject(object obj)
{
  System.Web.UI.Control child = obj as System.Web.UI.Control;
  if (child != null)
  {
    try
    {
       base.AddParsedSubObject(obj);
       System.Diagnostics.Trace.WriteLine("Added " + child.ToString());
    }
    catch (Exception ex)
    {
       System.Diagnostics.Trace.WriteLine("Error with " + child.ToString() + " : " + ex.ToString());
    }
  }
} 
```

这告诉我导致问题的控件是 DevExpress.XtraCharts.Web.WebChartControl，所以知道我已经将程序集跟踪到 DevExpress 之一，不是 100% 确定是哪个，也不确定如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:24:19.707

在 asp.net 中，这种错误意味着旧的引用没有在 bin 或 temp asp.net 文件夹中被替换。如果我是你，我会清理这些文件夹并重建我的项目..

# css - IMAGE MAPS 和 CSS SPRITES 的区别

> ID：12407297
> 
> 赞同：7
> 
> 时间：2012-09-13T13:21:26.087
> 
> 标签：css, css-sprites, imagemap

我找不到 IMAGE MAPS 和 CSS SPRITES 之间的明显区别。两者看起来都像是将页面中的图像合二为一？所以我们可以减少对服务器的多次请求。那么真正的区别是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T13:27:18.193

**图片地图：**

页面中的单个图像，您可以单击不同的区域，然后产生不同的效果（例如启动不同的链接）。

这里有一个描述：[http ://www.javascriptkit.com/howto/imagemap.shtml](http://www.javascriptkit.com/howto/imagemap.shtml)

**CSS精灵**：

将多个 css 类背后的图像组合到一个文件中以提高性能 - 例如减少请求数量并通常减少整体下载大小。

例如，您可以将颜色框对话框的各种边框元素组合成一个图像，或者将单击和未单击的图像组合成一个按钮。

我发现的关于 CSS 精灵的最佳描述是：[http ://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:27:09.643

图像地图是一张图像，您可以将其转换为图像地图并在图像顶部放置多个链接。

CSS sprite 是由多个图像组成的图像，您可以使用 CSS 背景定位来显示这种减少的 http 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:29:07.693

图像映射是位于图像上的坐标的定义，以便能够对该区域上的事件做出反应。

css sprite 是两个或多个图像联合在一个图像中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-04T12:41:13.553

我知道它是在一年前被问到的，让我试着用自己的话来解释。

CSS Sprite 就像一个单一文件图像存储库，您可以通过 css 提取其中的任何部分，并将它们单独放置在网页空间的任意区域中，而图像映射 (to-url) 顾名思义是一个图像有一个可点击的区域映射到您的目标网址。

# iphone - 我需要做什么，为 iPhone 5 重新制作/移植我的通用 iOS 应用程序？

> ID：12407300
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:34.260
> 
> 标签：iphone, objective-c, ios, interface-builder

> **可能重复：**
> [将现有应用程序迁移到 iPhone 5 宽屏显示器需要哪些步骤？](https://stackoverflow.com/questions/12395200/what-are-the-steps-required-to-migrate-existing-apps-to-the-iphone-5-widescreen)
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

我有适用于 iPhone/iPad 的通用应用程序，但如您所知，9 月 12 日，Apple 向我们展示了配备新 4 英寸显示屏的新款 iPhone 5。如何为 iPhone 5 命名和制作 .xib 文件？现在有黑线代替

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:38:03.800

我通过以下步骤升级了通用应用程序：

iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，`shouldAutorotateToInterfaceOrientation:`不推荐使用 UIViewController 的方法。取而代之的是，您应该使用`supportedInterfaceOrientationsForWindow:`and`shouldAutorotate`方法。因此，我添加了这些新方法（并保留旧方法以兼容 iOS 5）：

```
 -(BOOL)shouldAutorotate {
               return YES;
    }

    -(NSUInteger)supportedInterfaceOrientations{
               return UIInterfaceOrientationMaskAllButUpsideDown;    
    } 
```

然后我修复了需要它的视图的自动布局。由于旋转的变化，请记住在 iOS 5 和 iOS 6 中测试自动旋转。

将模拟器中用于启动视图和 iTunes 商店视图的图像复制到 PhotoShop 中，并将它们导出为 png 文件。默认图像名称为：`Default-568h@2x.png`尺寸为 640 x 1136，屏幕尺寸为 320 x 568。

我已经放弃了对 iOS 4 的向后兼容性。原因是这个新的 Xcode 不再支持 armv6 代码。因此，我现在能够支持的所有设备（运行 armv7）都可以升级到 iOS 5。

# javascript - 为什么忽略 eval() 代码中的语法错误？

> ID：12407301
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:36.763
> 
> 标签：javascript, browser, theory, interpreter

在功能代码中，当我这样做时：

```
eval( 'var default = 100;' );
alert( default ); 
```

浏览器的 JS 引擎* 将在*第二*条语句上抛出语法错误，就好像第一条语句成功执行一样。

**见这里： http:** [//jsfiddle.net/4FMdy/](http://jsfiddle.net/4FMdy/)（*打开浏览器的[控制台](https://webmasters.stackexchange.com/q/8525/3382)查看错误日志*）

但是，当我从代码中删除第二条语句时，我只有这个：

```
eval( 'var default = 100;' ); 
```

浏览器的 JS 引擎*会*在该语句上抛出语法错误。

**见这里：http:** [//jsfiddle.net/4FMdy/1/](http://jsfiddle.net/4FMdy/1/)

我不明白这一点。如果第一条语句抛出语法错误（应该如此），为什么在我上面的第一个示例中只有第二条语句抛出这样的错误。据我了解，如果一条语句抛出错误，那必然意味着所有先前的语句（同一个调用）都成功执行。

顺便说一句，语法错误被抛出，因为`default`它是 JavaScript 中的保留字，所以它不能用作变量名。

另外，请不要发表“评估是邪恶的”评论。我只是想了解浏览器的 JS 引擎的行为。

** 我在 Firefox 和 Chrome 中测试过*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:34:31.373

只是一个假设：

首先将解析脚本块，但不执行（eval）

浏览器仅检测到第 2 行中的语法错误并且没有执行完整的脚本块，因此他不会确定 eval() 中的语法错误

当您将 2 行放在 2 个不同的脚本元素中时，您将收到两个错误：

[http://jsfiddle.net/doktormolle/CfRmj/](http://jsfiddle.net/doktormolle/CfRmj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:28:59.593

因为“默认”是 Javascript 保留关键字 :)

因此，如果检查代码是否正确，则 alert(default) 会引发“语法错误”，但随后会运行 eval 函数，并且由于第一个错误，进程将不会到达此处。

# c# - 发布后 web 服务不调用 mp4box.exe

> ID：12407303
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:37.990
> 
> 标签：c#, web-services, iis

我有一个用 C# 编写的 Web 服务，它使用 2 个外部应用程序进行视频转换（ffmpeg.exe 和 MP4Box.exe）。

问题是，当我运行 Web 服务代码时，两个应用程序都按预期被调用以进行转换，但是当我发布代码时，第二个应用程序永远不会被调用。

调用 .exe 应用程序的代码：

```
Process proc = new Process();
proc.StartInfo.FileName = spath + "\\MP4Box\\MP4Box.exe";
proc.StartInfo.Arguments = "-inter 500 " + finalMediaPath;                      
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.CreateNoWindow = true;
proc.Start(); 
```

我正在使用 IIS 来发布 Web 服务。我想在 IIS 中没有什么可做的，因为第一个应用程序运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:00:44.270

我解决了我的问题。以防这对其他人有用。

在我的 MP4Box 通话中，我添加了 -tmp 参数。可能已发布的 Web 服务无法访问使用我的 Windows 的默认临时路径。

# sql-server - SQL Server 动态复杂查询的分页

> ID：12407307
> 
> 赞同：0
> 
> 时间：2012-09-13T13:21:47.663
> 
> 标签：sql-server

我找不到一种简单的方法来为 SQL 服务器的复杂查询进行分页。我需要编写将 sql 查询作为参数的函数（此查询可以包括子查询、按语句排序、分组等）并检索特定页面的结果。在 oracle 中，通过用另一个 select 语句封装这样的查询很容易，但是对于 SQL 服务器，我找不到任何类似的方法。我想避免的是解析输入 SQL 语句。我正在使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:30:21.827

SQL Server 2005 及更高版本中的分页最好通过排名函数来完成。但是，鉴于任意 SQL 查询是未排序的，您需要以某种方式指定排序方式才能使其工作，这与您尝试制作的通用解决方案并不真正“兼容”（*）。

建议的方法是这样的（假设变量`@PageSize`具有每页的项目数，并且`@Page`作为要检索的页面的基于 1 的索引）：

```
WITH NumberedQuery AS (
  SELECT ROW_NUMBER() OVER (ORDER BY q.SomeColumn) ix, q.*
  FROM QueryToPage q
)
SELECT nq.*
  FROM NumberedQuery nq
  WHERE (nq.ix >= (@Page-1)*@PageSize) AND (nq.ix < @Page*@PageSize); 
```

(*)：你的连接 SQL 代码的方法有几个问题，它阻止了参数化查询的使用，它增加了 SQL 注入的风险，它损害了性能，如果未指定顺序，它无法解决手头的问题。

# iphone - NSPredicate 基于孩子的孩子的数量

> ID：12407310
> 
> 赞同：2
> 
> 时间：2012-09-13T13:22:03.140
> 
> 标签：iphone, core-data, nspredicate

好的，所以我在核心数据中设置了一个数据结构。

想象一下这个设置...

部门 - 可以有很多 - MiddleManagers - 可以有很多 - 员工

部门是与中层经理具有一对多关系的一个实体。Middle Manager 是一个与 Employee 具有一对多关系的实体。员工是链底部的实体。

MiddleManager 不需要有任何员工。

我想创建一个过滤部门的 NSPredicate，以便只返回至少有一名员工的部门。

即类似...

```
[NSPredicate predicateWithFormat:@"middleManagers.employees.@count != 0]; 
```

但我找不到正确的语法来创建它。

有人可以指出我正确的方向吗？

非常感谢。

# jquery - jQuery验证插件错误：TypeError：验证器未定义

> ID：12407312
> 
> 赞同：25
> 
> 时间：2012-09-13T13:22:04.123
> 
> 标签：jquery, jquery-validate

这是表单的html代码：

```
<form method="post" id="login" action="/login">
 <div class="login-element">
    <label for="email">E-Mail</label>
    <input type="text" name="email">
</div>
<div class="login-element">
    <label for="password">Passwort</label>
    <input type="password"  name="password">
</div>
<div class="login-element">
    <input type="submit" value="Login">
</div>
</form> 
```

这是我用于验证的代码：

```
 $(document).ready(function() { 
    $("#login").validate({
       debug: true,
       rules: {
            email: {
              required: true,
              email: true
            },
            password: {
              required: true
            }
        },
        messages: {
            email: {
                required: "Please enter a email adress",
                email: "Please enter a valid email address"
            },
            password:"Please enter password"
        }
    });
    }); 
```

在控制台中记录了以下错误：

```
TypeError: validator is undefined
...or.settings[eventType] && validator.settings[eventType].call(validator, this[0],... 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-14T12:12:57.343

发生此错误是因为我有另一个具有相同 id 的 html 元素。删除该 id 代码后工作正常。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-09T15:58:36.170

对于仍在寻找答案的任何人，并且上面的答案不起作用..

我花了最后 3 个小时尝试所有解决方案，但都没有奏效。

我终于意识到一个非常愚蠢的错误，我在我的应用程序中初始化了两次 Jquery

曾经在我包含 3 个脚本的地方

```
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

再次在我只有一行的页面末尾。

```
<script src="~/Scripts/jquery-1.10.2.min.js"></script> 
```

这是重置 $ 的验证器功能并导致一切中断。

检查验证未触发的情况的一些事情。

1.  脚本的顺序是否正确？jquery 后跟 validate 后跟 unobtrusive。

2.  $.validator 函数是否已定义？在浏览器的控制台中快速查看

3.  要验证的表单是动态创建的吗？如果是这样，您可能需要重新初始化表单上的验证器插件，我发现的最佳方法如下所述，请选择最适合您的方法。

    ```
    $.validator.unobstrusive.parse('#myForm') 
    ```

或者

```
 $('#myForm').validate() // this just makes the validator plugin consider the form for unobstrusive validation 
```

或者

```
$('#myForm').valid() // this will trigger unobstrusive validation on the form. 
```

4.  如果您有许多表单的复杂 ajax 加载，请确保脚本不会一次又一次地包含在每个 ajax 页面中，还要确保主页上的元素仍然具有唯一的名称。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-13T13:57:14.980

您需要在文档的头部包含验证脚本。

像这样：

```
<script src="/js/libs/jquery.validate.js" type="text/javascript"></script> 
```

此外，请检查您的表单 ID 是否正确呈现的 HTML。

我使用此代码在我的网站上调用验证

```
 //Validate Form
        var ids = [];
        $("form").each(function () {
            ids.push(this.id);
        });
        var formId = "#" + ids[0]
        $(formId).validate(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-17T12:33:36.037

同样的问题出现在我身上。该错误的原因是我使用的代码：

```
if ($("#invalidFormId").valid()) {
....
} 
```

并且该`id`元素`form`无效

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-30T23:14:13.380

在我的情况下，错误是因为太早调用验证器。我将代码移动到一个单独的函数中，并使用 underscore.js 的延迟方法调用它。像魅力一样工作。

```
_.delay(doValidations);

function doValidations() {
...
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-21T13:13:48.993

因为这是 Google 显示的“验证器未定义”的第一个主题，所以我将描述我解决的问题，也许有人会觉得它有帮助。

我正在使用“maxlength”属性（没什么花哨的），我得到了这个错误。原因是嵌套表格。其中一个 textarea 在两种形式中。当您在主视图中有带有表单的模式（对话框）时，可能会发生这种情况。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-18T18:56:39.030

我`@Scripts.Render("~/bundles/jquery")`在父视图 (_Layout.cshtml) 中，并且还在另一个视图中定义了一些其他 jquery 脚本标签，它们发生了冲突。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-05T12:27:05.663

在我的情况下，问题来了，有两个实例版本的 Jquery UI i JQuery。这使得 Jquery 普通代码可以正常工作，但删除了 $.validator 的实例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-12T18:26:34.927

我收到以下错误：

**未捕获的类型错误：d 未定义**

发生错误是因为表单 id 和模型 div id 相同。更改ID后错误已解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-05T14:30:52.517

我的元素中有`form="form-name`属性。`<input>`立即删除它可以解决错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-20T05:09:32.897

该插件位于单独的库中，您需要将它们包含在您的 html 中。

```
<script src="../jquery-validation/dist/jquery-validate.min.js"></script>
<script src="../jquery-validation/dist/additional-methods.min.js"></script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-14T22:57:17.373

在我的情况下，我`$.validator` *之前* `$(document).ready`打电话。一旦我将它移到从 调用的函数`ready`，它就起作用了。它会在之后或期间起作用，`ready`但不会在之前起作用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-24T12:41:34.053

这里也发生了同样的事情。对我来说，这是我的代码中的一个错字：

```
$(document).ready(function(){
    //START of validate
$('#reply').validate({
    rules:{
        message:{
            required: true,
            },  
        },
    submitHandler: function(form) {
        var data = $("#reply").serialize();
        $.ajax({
            type:"POST",
            url:"ajax/scripts/msg_crt.php",
            data:data,
            success:function(data){
                alert("Loaded");
                }
            });
        }
    });
    //END of validate
  });

$(document).on('click','#send', function(){
    if($('#replay').valid()){// <--- Here is my selector typo
        $("#replay").submit(); // <--- Here is my selector typo
        }
        return false;
    }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-30T12:08:24.717

我在调用 validator.destroy() 时出现了这个问题 - 错误发生在插件的 staticRules 方法中。原因原来是关联的表单元素（element.form）从 DOM 中分离出来。我通过在调用destroy之前检查元素是否在DOM中来解决它，使用以下方法：

```
document.contains(element) 
```

希望这可以帮助某人。

# html - navigator.getusermedia

> ID：12407321
> 
> 赞同：4
> 
> 时间：2012-09-13T13:22:38.040
> 
> 标签：html

我在玩 html5 新规范，确切地说是网络摄像头功能。

按照[本教程](http://dev.opera.com/articles/view/playing-with-html5-video-and-getusermedia-support/)。我收到以下错误：

```
Native web camera streaming (getUserMedia) is not supported in this browser. 
```

这是由这个 if 语句所采用的：

```
if (navigator.getUserMedia) 
```

现在，我确定在我的浏览器中启用了 navigator.getUserMedia，因为[这里](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)的这些示例可以完美运行

所以，我修改了if中的代码，如下：

```
if (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia) 
```

但现在，我收到一个 javascript 错误：

```
Uncaught TypeError: Object #<Navigator> has no method 'getUserMedia' 
```

在这一行：

```
navigator.getUserMedia('video', successCallback, errorCallback); 
```

这真的没有意义！它正在处理我发布的最后一个链接！

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T15:26:13.800

如果您正在测试`navigator.getUserMedia`, `navigator.webkitGetUserMedia`,`navigator.mozGetUserMedia`则`navigator.msGetUserMedia`无法保证它`navigator.getUserMedia()`可用。它可能是那个或其他三个中的任何一个。您可以尝试这样的事情（来自[getUserMedia.js](https://github.com/addyosmani/getUserMedia.js)）：

```
navigator.getUserMedia_ = (   navigator.getUserMedia
                           || navigator.webkitGetUserMedia 
                           || navigator.mozGetUserMedia 
                           || navigator.msGetUserMedia);

if ( !! navigator.getUserMedia_) {
    navigator.getUserMedia_('video', successCallback, errorCallback);
    //The rest of your code 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-08T17:16:57.903

`navigator.getUserMedia()`已弃用。请参阅 MDN。

[https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getUserMedia](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/getUserMedia)

改为使用`navigator.mediaDevices.getUserMedia(constraints);`。

[https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia](https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-30T18:22:21.523

这是一项新技术。Yoy 必须有 Firefox/Chrome/Opera 浏览器并且必须更新。然后，试试这个：

```
function showCamera()  {   var streaming = false,
      video        = window.content.document.createElement("video"),
      cover        = window.content.document.createElement("div"),
      canvas       = window.content.document.createElement("canvas"),
      photo        = window.content.document.createElement("img"),
      startbutton  = window.content.document.createElement("button"),
      width = 320,
      height = 0;

  photo.src = "http://placekitten.com/g/320/261";   window.content.document.body.insertBefore(video, window.content.document.body.firstChild);

  var navigator = window.navigator;
    navigator.getMedia = ( navigator.getUserMedia ||
                         navigator.webkitGetUserMedia ||
                         navigator.mozGetUserMedia ||
                         navigator.msGetUserMedia);
    navigator.getMedia(
    {
      video: true,
      audio: false
    },
    function(stream) {
      if (navigator.mozGetUserMedia) {
        video.mozSrcObject = stream;
      } else {
        var vendorURL = window.URL || window.webkitURL;
        video.src = vendorURL.createObjectURL(stream);
      }
      video.play();
    },
    function(err) {
      console.log("An error occured! " + err);
    }   );
    video.addEventListener('canplay', function(ev){
    if (!streaming) {
      height = video.videoHeight / (video.videoWidth/width);
      video.setAttribute('width', width);
      video.setAttribute('height', height);
      canvas.setAttribute('width', width);
      canvas.setAttribute('height', height);
      streaming = true;
    }   }, false);
    function takepicture() {
    canvas.width = width;
    canvas.height = height;
    canvas.getContext('2d').drawImage(video, 0, 0, width, height);
    var data = canvas.toDataURL('image/png');
    photo.setAttribute('src', data);   }
    startbutton.addEventListener('click', function(ev){
      takepicture();
    ev.preventDefault();   }, false);   }

showCamera(); 
```

如果您的浏览器是 Firefox 并且仍然无法工作，请转到 about:config 并设置/添加一个名为 media.navigator.enabled 的布尔变量，其值为真

来源：[https ://developer.mozilla.org/en-US/docs/WebRTC/Taking_webcam_photos](https://developer.mozilla.org/en-US/docs/WebRTC/Taking_webcam_photos)

P/d：我在 Greasemonkey 脚本中使用了这段代码，它可以工作。我对原始代码的第一行做了一些更改。

# regex - 将 URL 信息作为字符串返回？

> ID：12407322
> 
> 赞同：0
> 
> 时间：2012-09-13T13:22:41.980
> 
> 标签：regex, django, django-urls

我正在尝试编写一个简单的 django-view，它返回从 url 字段给出的任何“输入”作为原始文本：

但是我很难让我的正则表达式接受特殊字符。

代码：views.py

```
def urlinfo(request,info):

    return HttpResponse(str(info), content_type="text/plain") 
```

网址.py

```
 url(r'^urlinfo/(?P<info>[\w\+\?-_=+&]+)', urlinfo), 
```

我正在寻找的是输入网址的可能性，例如 .../urlinfo/name=Joe&age=20

然后，稍后，让我的意见妥善处理。但截至目前，我无法通过正则表达式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:33:20.500

name=joe&age=20 是 GET 参数，通常通过表单输入，或者只是附加到链接。您不需要它们的正则表达式，它们存储在 request.GET 字典中。

# postgresql - 是否安装了 PostGIS 2？

> ID：12407323
> 
> 赞同：1
> 
> 时间：2012-09-13T13:22:45.780
> 
> 标签：postgresql, centos, postgis, postgresql-9.1

当我尝试以下命令时`psql`：

```
select PostGIS_full_version(); 
```

我得到错误：

```
ERROR:  function postgis_full_version() does not exist
LINE 1: select PostGIS_full_version();
           ^
HINT:  No function matches the given name and argument types. 
You might need to add explicit type casts. 
```

我安装了 PostGIS 2，`yum list postgis*`

```
 Installed Packages
    postgis2_91.i686                                   2.0.1-1.rhel6                         @pgdg91
    postgis2_91-devel.i686                             2.0.1-1.rhel6                         @pgdg91
    Available Packages
    postgis.i686                                       1.5.3-1.el6                           epel
    postgis-docs.i686                                  1.5.3-1.el6                           epel
    postgis-jdbc.i686                                  1.5.3-1.el6                           epel
    postgis-utils.i686                                 1.5.3-1.el6                           epel
    postgis2_91-debuginfo.i686                         2.0.1-1.rhel6                         pgdg91
    postgis2_91-docs.i686                              2.0.1-1.rhel6                         pgdg91
    postgis2_91-utils.i686                             2.0.1-1.rhel6                         pgdg91
    postgis91.i686                                     1.5.5-1.rhel6                         pgdg91
    postgis91-debuginfo.i686                           1.5.5-1.rhel6                         pgdg91
    postgis91-docs.i686                                1.5.5-1.rhel6                         pgdg91
    postgis91-utils.i686                               1.5.5-1.rhel6                         pgdg91 
```

为什么命令`select PostGIS_full_version();`不起作用？

* * *

我尝试了上述方法，因为使用 PostgreSQL 和 PostGIS 的脚本在查找 PostGIS 时遇到问题。它搜索

```
/usr/share/postgresql/9.1/contrib/postgis-1.5/postgis.sql 
```

来自该行

```
pgsqlRunScriptFile(CONST_Path_Postgresql_Postgis.'/postgis.sql'); 
```

为什么它会走错路，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T19:44:05.150

安装软件只是第一步。您还必须在所需的数据库中启用它。对于 PostGIS 2，在要执行空间操作的数据库中，运行

```
CREATE EXTENSION postgis; 
```

作为超级用户。魔术应该发生。

# bash - cygwin 1.7.15 处理 shell 脚本中的“set -e”（子 shell 中的错误导致父级退出）

> ID：12407325
> 
> 赞同：0
> 
> 时间：2012-09-13T13:22:49.990
> 
> 标签：bash, cygwin

我正在使用这个：

```
$ uname -a
CYGWIN_NT-6.1 bassoon 1.7.15(0.260/5/3) 2012-05-09 10:25 i686 Cygwin
$ bash --version
GNU bash, version 4.1.10(4)-release (i686-pc-cygwin)
$ cat myexpr.sh
#!/bin/sh

echo "In myexpr, Before  expr"
ac_optarg=`expr x--with-gnu-as : 'x[^=]*=\(.*\)'`
echo "ac_optarg=$ac_optarg"
echo "In myexpr, After  expr"

$ cat myexpr2.sh
#!/bin/sh

set -e

echo "In myexpr, Before  expr"
ac_optarg=`expr x--with-gnu-as : 'x[^=]*=\(.*\)'`
echo "ac_optarg=$ac_optarg"
echo "In myexpr, After  expr" 
```

两个脚本之间的唯一区别是 myexpr2.sh 使用“set -e”

```
$ echo $$
2880
$ ./myexpr.sh
In myexpr, Before  expr
ac_optarg=
In myexpr, After  expr
$ ./myexpr2.sh
In myexpr, Before  expr 
```

到目前为止，预期的行为。

如果我在父 shell（上面的 PID 2880）中执行此操作：

```
$ set -e
$ ./myexpr.sh 
```

父外壳退出！那就是上面我做了“set -e”的pID 2880

这不是 Linux 或 cygwin 1.5.12 上的行为。这是cygwin中的错误还是cygwin上的BASH？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:29:13.450

这不是一个错误，它是 Bash 环境的一个特性。当您没有设置 Bash shell 环境变量***execfail***和/或 Shell 环境变量***errexit***时，就会发生这种情况。

> ```
> execfail - (is a BASHOPTS)
> 
> If set, a non-interactive shell will not exit if it cannot execute 
> the file specified as an argument to the exec builtin command. 
> An interactive shell does not exit if exec fails.
> 
> errexit -  (is a SHELLOPTS)
> 
> Exit immediately if a pipeline (see Pipelines), which may consist of a 
> single simple command (see Simple Commands), a subshell command enclosed 
> in parentheses (see Command Grouping), or one of the commands executed as 
> part of a command list enclosed by braces (see Command Grouping) returns a 
> non-zero status. The shell does not exit if the command that fails is part 
> of the command list immediately following a while or until keyword, part 
> of the test in an if statement, part of any command executed in a && or || 
> list except the command following the final && or ||, any command in a 
> pipeline but the last, or if the command’s return status is being inverted 
> with !. A trap on ERR, if set, is executed before the shell exits.
> 
> This option applies to the shell environment and each subshell environment 
> separately (see Command Execution Environment), and may cause subshells to 
> exit before executing all the commands in the subshell. 
> ```

不同的 Linux 版本对这些有不同的默认值。您可以检查哪些已**启用**：

```
echo "SHELLOPTS=$SHELLOPTS"
echo "BASHOPTS=$BASHOPTS" 
```

你可以看到所有这些使用：

```
set -o && echo -e "\n" && shopt -p 
```

因此，您需要通过以下方式启用您的：

```
shopt -s execfail 
```

如果这不起作用，您可能还必须取消设置（关闭）$SHELLOPTS 的错误退出**：**

```
set -o errexit 
```

有关详细信息，请参阅：[GNU Bash 手册](http://www.gnu.org/software/bash/manual/html_node/)！

PS。"set" 使用反向逻辑，所以如果你想使用 'e' 标志，你必须使用 "+"：`set +e`

# delphi - 如何与鼠标光标一起显示动态文本

> ID：12407327
> 
> 赞同：8
> 
> 时间：2012-09-13T13:22:51.393
> 
> 标签：delphi

当用户重新调整表单大小时，在 XE2 中，我想在当前鼠标光标旁边显示当前表单大小。我会使用 OnResize 事件。

换句话说：我需要有关如何在用户移动鼠标时随鼠标光标显示动态文本（例如，下图中的 300、250 等 x,y 坐标）的想法。

![在此处输入图像描述](../Images/1076e04b2262a134da138121123874d5.png)

一种方法是模拟一个 .cur 文件并将其分配给 OnResize 中的光标。这看起来很麻烦并且可能很慢（而且我还不知道文件的内容）

另一个想法是显示一些我在 OnResize 事件中设置的 .Top、.Left 的透明文本（什么组件会这样做？）。

我担心的一个问题是我将如何检测调整大小操作何时完成，以便我可以恢复到标准鼠标光标。

有什么建议可以继续进行吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T13:47:44.503

***更新：***

这是一个更新版本，其中删除了提示动画部分（因为我觉得您需要立即显示提示以达到您的目的）并且在其中添加了双缓冲（由于提示的频繁更新）以防止闪烁并且还不错阿尔法混合（只是为了好奇）。

感谢@NGLN 修复了提示窗口变量丢失的取消分配！

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TAlphaHintWindow = class(THintWindow)
  private
    procedure CMTextChanged(var Message: TMessage); message CM_TEXTCHANGED;
  protected
    procedure CreateParams(var Params: TCreateParams); override;
    procedure CreateWindowHandle(const Params: TCreateParams); override;
  public
    constructor Create(AOwner: TComponent); override;
    procedure ActivateHint(Rect: TRect; const AHint: string); override;
  end;

type
  TForm1 = class(TForm)
  private
    FSizeMove: Boolean;
    FHintWindow: TAlphaHintWindow;
    procedure WMEnterSizeMove(var AMessage: TMessage); message WM_ENTERSIZEMOVE;
    procedure WMSize(var AMessage: TWMSize); message WM_SIZE;
    procedure WMExitSizeMove(var AMessage: TMessage); message WM_EXITSIZEMOVE;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TAlphaHintWindow }

constructor TAlphaHintWindow.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  // window might be updated quite frequently, so enable double buffer
  DoubleBuffered := True;
end;

procedure TAlphaHintWindow.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  // include the layered window style (for alpha blending)
  Params.ExStyle := Params.ExStyle or WS_EX_LAYERED;
end;

procedure TAlphaHintWindow.CreateWindowHandle(const Params: TCreateParams);
begin
  inherited CreateWindowHandle(Params);
  // value of 220 here is the alpha (the same as form's AlphaBlendValue)
  SetLayeredWindowAttributes(Handle, ColorToRGB(clNone), 220, LWA_ALPHA);
end;

procedure TAlphaHintWindow.ActivateHint(Rect: TRect; const AHint: string);
var
  Monitor: TMonitor;
begin
  // from here was just stripped the animation part and fixed one bug
  // (setting a hint window top position when going off screen; it is
  // at least in Delphi 2009 with the most recent updates)
  Caption := AHint;
  Inc(Rect.Bottom, 4);
  UpdateBoundsRect(Rect);
  Monitor := Screen.MonitorFromPoint(Point(Rect.Left, Rect.Top));
  if Width > Monitor.Width then
    Width := Monitor.Width;
  if Height > Monitor.Height then
    Height := Monitor.Height;
  if Rect.Top + Height > Monitor.Top + Monitor.Height then
    Rect.Top := (Monitor.Top + Monitor.Height) - Height;
  if Rect.Left + Width > Monitor.Left + Monitor.Width then
    Rect.Left := (Monitor.Left + Monitor.Width) - Width;
  if Rect.Left < Monitor.Left then
    Rect.Left := Monitor.Left;
  if Rect.Top < Monitor.Top then
    Rect.Top := Monitor.Top;
  ParentWindow := Application.Handle;
  SetWindowPos(Handle, HWND_TOPMOST, Rect.Left, Rect.Top, Width, Height,
    SWP_NOACTIVATE);
  ShowWindow(Handle, SW_SHOWNOACTIVATE);
  Invalidate;
end;

procedure TAlphaHintWindow.CMTextChanged(var Message: TMessage);
begin
  // do exactly nothing, because we're adjusting the size by ourselves
  // and the ancestor would just autosize the window by the text; text
  // or if you want Caption, is updated only by calling ActivateHint
end;

{ TForm1 }

procedure TForm1.WMEnterSizeMove(var AMessage: TMessage);
begin
  inherited;
  FSizeMove := True;
end;

procedure TForm1.WMSize(var AMessage: TWMSize);
var
  CurPos: TPoint;
begin
  inherited;
  if FSizeMove and GetCursorPos(CurPos) then
  begin
    if not Assigned(FHintWindow) then
      FHintWindow := TAlphaHintWindow.Create(nil);
    FHintWindow.ActivateHint(
      Rect(CurPos.X + 20, CurPos.Y - 20, CurPos.X + 120, CurPos.Y + 30),
      'Current size' + sLineBreak +
      'Width: ' + IntToStr(Width) + sLineBreak +
      'Height: ' + IntToStr(Height));
  end;
end;

procedure TForm1.WMExitSizeMove(var AMessage: TMessage);
begin
  inherited;
  FHintWindow.Free;
  FHintWindow := nil;
  FSizeMove := False;
end;

end. 
```

尺寸调整的结果（对我的口味来说非常透明:-)

![在此处输入图像描述](../Images/0e80815da6dcb239173367c33aa8b901.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T13:38:00.700

它真的需要透明吗？请记住，在某些背景下可能难以阅读文本。

相反，请考虑显示一个工具提示窗口。创建一个[`THintWindow`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.THintWindow)控件，设置其标题和位置，并显示它。

当您收到[`wm_ExitSizeMove`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632623.aspx)消息时，隐藏或销毁窗口。

# ruby-on-rails-3 - Rails：“head：ok”解释为“ajax：error”

> ID：12407328
> 
> 赞同：28
> 
> 时间：2012-09-13T13:23:01.117
> 
> 标签：ruby-on-rails-3, jquery

> **可能重复：**
> [jquery 不会在 $.ajax 上为 rails 标准 REST DELETE 答案调用成功方法](https://stackoverflow.com/questions/4791499/jquery-doesnt-call-success-method-on-ajax-for-rails-standard-rest-delete-answ)

我响应远程链接*（data-remote="true" data-type="json"）*并输出

```
format.json { head :ok } 
```

在我的 Rails (3.2.6) 控制器中，它创建了这个头文件：

```
Status Code:200 OK 
```

* * *

```
...
Connection:keep-alive
Content-Length:1
Content-Type:application/json; charset=utf-8
Server:thin 1.4.1 codename Chromeo
Set-Cookie: ... path=/; HttpOnly
X-UA-Compatible:IE=Edge
... 
```

在我的 JavaScript 文件**ajax:complete**被触发并输出**200** *(data.status)*。

```
 $( '#myElement' ).on( 'ajax:complete', function( e, data ) {
    console.log( data.status );
  }); 
```

*数据*如下所示：

```
 ...
 readyState: 4
 responseText: " "
 setRequestHeader: function ( name, value ) {...
 state: function () {...
 status: 200
 statusCode: function ( map ) {...
 statusText: "OK"
 ... 
```

*在我看来还不错...*

## 问题

代替**ajax:success**，jQuery *(jquery-ujs)*执行**ajax:error**我不知道为什么，因为没有给出错误。

我研究了很多讨论，但这种方式似乎总是解决方案，而不是问题。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-05T17:34:44.920

[在这里](https://stackoverflow.com/questions/4791499/jquery-doesnt-call-success-method-on-ajax-for-rails-standard-rest-delete-answ)回答。

jQuery 期待 JSON 响应。“head :ok” 响应正文有一个空格，因此 jQuery 无法解析 JSON 响应，因此它仍然认为 200 状态代码是错误的。

你可以让 Rails 响应`head :no_content`它有一个空的 body 或一个`render :json=>true`

这在 Rails 中讨论[过](https://github.com/rails/rails/issues/1742)。

Rails中的单个空格的原因`head :ok`是旧的 Safari 错误的解决方法。

# javascript - Windows 8 固定网站磁贴

> ID：12407339
> 
> 赞同：2
> 
> 时间：2012-09-13T13:23:22.767
> 
> 标签：javascript, windows

我对这个 Windows 8 网站磁贴徽章通知感到困惑。在 microsoft 网站上，它说您只需要通过元标记 polling-uri 访问的简单 xml 文件。他们展示的示例都在 .net 和 javascript 中。我的问题是你如何更新徽章并使用javascript清除它。javascript如何知道网站的新状态以及它将如何更新xml文件以在磁贴上推送通知。java服务器端有没有办法做。谢谢

这就是我所说的：

[MSDN 博客：Windows 8 中的固定站点](http://blogs.msdn.com/b/ie/archive/2012/04/03/pinned-sites-in-windows-8.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:33:51.367

您需要设置一个启用 toast 通知的通知服务器，并且您需要设置更新的通知通道间隔。

# jquery - Cakephp 2 Js->submit() 不发送任何数据

> ID：12407341
> 
> 赞同：0
> 
> 时间：2012-09-13T13:23:24.750
> 
> 标签：jquery, ajax, cakephp

这是我用来通过 ajax 提交表单的代码。

```
<?$data = $this->Js->get('#form_emp')->serializeForm(
                                            array(
                                            'isForm' => true,
                                            'inline' => true)
                                        );?>
<?php echo $this->Js->submit('submit.png',
array(
    'url' =>'/employees/update_details',
    'update' => '#update_here', 
                'data'=>$data,
                'async' => false,
               'dataExpression'=>true,
                'method' => 'POST'

                ));
 echo $this->Form->end(); 
```

当我对操作发布数据进行调试时，显示为空。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T07:18:07.703

```
<?php echo $this->Form->submit('submit', array('onclick'=>'post_data(); return false;')) ?> 
```

*   return false 在那里声明，因此按钮不会触发并提交/刷新页面

然后在你的 javascript 文件中（或者在你喜欢的视图中）

```
function post_data(){
   var formData = $('#form_emp').serialize();
   $.ajax({
       url: '/employees/update_details/',
       type: 'post',
       data: formData,
       success: function(response){
           alert('success');
       }
} 
```

# android - 在 API 10 中旋转 Android ImageView（不使用动画）

> ID：12407344
> 
> 赞同：0
> 
> 时间：2012-09-13T13:23:31.363
> 
> 标签：android, imageview

我想将 ImageView 旋转到特定的枢轴并具有特殊的度数。我在谷歌中搜索并找到了一些解决方案，但我没有找到关于这个的完整答案（比如[这个答案](https://stackoverflow.com/questions/7634540/rotating-imageview-in-android-api-level-11)）。

我尝试使用此代码，但`ImageView`没有旋转！只是它的背景旋转（不旋转视图矩形）

```
public class ImageViewCustom extends ImageView {
    public Context M_context;

    public ImageViewCustom(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.M_context = context;
    }

    public ImageViewCustom(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.M_context = context;
    }

    public ImageViewCustom(Context context) {
        super(context);
        this.M_context = context;
    }

    public float xPivot;
    public float yPivot;
    public float degree;

    public void draw(Canvas canvas) {
        canvas.save();
        canvas.rotate(degree, xPivot, yPivot);
        super.draw(canvas);
        canvas.restore();
    }
} 
```

那么，如何在不使用`Animation`并且仅使用覆盖或添加旋转方法的情况下旋转 ImageView`ImageViewCustom`呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-13T13:42:51.370

```
Bitmap bmp = arrow.copy(Bitmap.Config.ARGB_8888, true);
Matrix matrix = new Matrix();
matrix.postRotate(direction);
Bitmap bmpRotated = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(),bmp.getHeight(), matrix, true);
iv.setImageBitmap(bmpRotated); 
```

iv 是图像视图和方向，位图需要旋转的度数。

# c++ - 编译器错误，用静态多态性模拟 C++ 单元测试

> ID：12407345
> 
> 赞同：0
> 
> 时间：2012-09-13T13:23:33.827
> 
> 标签：c++

我正在尝试将静态多态性应用于单元测试

```
template<typename T, typename Output> class HistogramWriter
{
public:
    static void write(const RGBHistogram<T> &hist, Output &output)
    {
       output << "ABCD" << std::endl;
    }
}; 
```

现在我正在尝试将输出制作为模拟类以进行单元测试

```
struct TestMock
{
    std::string data;
};

istream& operator>>(istream &stream, TestMock &mock)
{
    stream >> mock.data;
} 
```

如果我将 T 设置为 int 并将输出设置为 TestMock，则它不起作用。当然，如果我将输出设置为 std::cout，它会起作用。

我正在尝试将字符串复制到 TestMock 的数据中。但我只是不知道该怎么做，编译器抱怨二进制 '<<' no operator found

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:27:50.873

使用`HistogramWriter::write`输出运算符写入`output`. 但是，您没有为您的`TestMock`类提供任何输出运算符，只提供一个输入运算符。

此外，`output`参数应该是一个可以输出*到的**流*，通过为你的类定义一个，你只告诉编译器如何将一个*实例*输出到一个流，你不定义流本身。*`operator<<``TestMock`*`TestMock`**

 *要解决这个问题，您必须使用模板在类*中声明输出运算符。*像这样的东西：

```
struct TestMock
{
    std::string data;

    template<class T>
    TestMock& operator<<(const T& value)
    {
        std::ostringstream os;
        os << value;
        data += os.str();
        return *this;
    }
}; 
```

上面的代码将使 的实例`TestMock`表现得像一个流，并且发送给它的所有输出都将附加到`data`成员变量中。

我建议您阅读更多有关输入和输出运算符的信息，以及如何重载/覆盖它们。*

# java - Rational 功能测试器

> ID：12407354
> 
> 赞同：-2
> 
> 时间：2012-09-13T13:24:03.667
> 
> 标签：java, testing

我是理性功能测试人员的新手，我想问一下它是否支持测试基于 gwt 的站点？如果确实如此，我该怎么做？或者我的项目应该是什么样子才能对其进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:04:55.603

Rational Functional tester 不直接支持 gwt 应用程序。它是自动化测试工具，仅支持基于 Web 的应用程序。

# jquery - 当至少有两个问号并排时，jquery ajax 调用会弄乱发送文本

> ID：12407357
> 
> 赞同：0
> 
> 时间：2012-09-13T13:24:15.307
> 
> 标签：jquery, text

我的网页上有一个简单的消息系统。有时，很少变化（所以我无法重现错误），jquery 会弄乱消息文本。

这是发生错误的罕见文本示例之一：

> *wirklich？sehr cool :) und wie organisiert du das dann immer？schon alles geplant oder wie es dir grad einfälltjQuery172010423805089564042_1347537302675 und wie lange bist du da dann immer unterwegs?*

此字符串不应在文本中-> jQuery172010423805089564042_1347537302675

错误必须发生在设置消息历史记录->从文本区域中提取文本->通过 ajax 将文本发送到服务器之间的某个地方...

有人有想法吗？

```
// The part where I set the text history.
$('#msgwriter_text').val($("<div/>").html('\n' + '\n' + '\n' + old_date + '\n' + old_text).text());

// the part where the new text gets extracted from the textarea.
var text = $('#msgwriter_text').val();

// text will be stored in the database via ajax call
$.ajax ({
    type: "POST",
    url: "ajax/ajax_special_functions.php",
    data: data_string,
    dataType: "json",
    success: function(recive_obj) {

        // Some more code...
    }
}); 
```

**最后我发现了导致错误的原因！当文本中至少有 2 个问号时，添加了这个奇怪的字符串 -> ??**

现在我的下一个问题是，如何解决这个问题！？显然我无法通过编辑 ajax 函数的设置来解决问题 - 没关系，如果缓存是假的或真的......

我认为最好的解决方案是用正则表达式替换 str.replace，以确保没有 ? 并排...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:32:17.670

尝试检查`old_date`and的值`old_text` 此外，您不需要在 2 行代码中执行此操作，如果您只想获取数据，则可以在 1 行代码中获取。 `var text = '\n' + '\n' + '\n' + old_date + '\n' + old_text;`

# javascript - jqGrid TreeGrid 问题

> ID：12407364
> 
> 赞同：1
> 
> 时间：2012-09-13T13:24:29.133
> 
> 标签：javascript, jqgrid

谁能向我解释我可能做错了什么？

我有以下代码：

```
function initTable() {

mydata = [{ "id": "1", "brandName": "7 Crown With Honey", "quality": "Standard", "minorRegionName": "North America", "year00": "", "year01": "", "level": "0", "parent": "", "isLeaf": "false", "expanded": "false" },
            { "id": "2", "brandName": "Amaretto di Florio", "quality": "Standard", "minorRegionName": "North West Europe", "year00": "", "year01": "", "level": "1", "parent": "1", "isLeaf": "true", "expanded": "false" },
            { "id": "3", "brandName": "Aniversario Rum", "quality": "Super Premium", "minorRegionName": "South America", "year00": "5", "year01": "6", "level": "1", "parent": "1", "isLeaf": "true", "expanded": "false" },
            { "id": "4", "brandName": "Archers", "quality": "Standard", "minorRegionName": "Asia", "year00": "2", "year01": "1", "level": "0", "parent": "", "isLeaf": "false", "expanded": "false" }
         ];

$("#list2").jqGrid({
    treeGrid: true,
    treeGridModel: 'adjacency',
    ExpandColumn: 'brandName',

            data: mydata,
            datatype: 'local',
            height: 300,

            colNames: ['brandName', 'minorRegionName','quality', 'year00', 'year01'],
            colModel: [{ name: 'brandName', index: 'brandName', width: 200 },
                                { name: 'minorRegionName', index: 'minorRegionName', width: 200 },
                                { name: 'quality', index: 'quality', width: 100},
                                { name: 'year00', index: 'year00', width: 80, align: "right", sorttype: "float", formatter: "number" },
                                 { name: 'year01', index: 'year01', width: 80, align: "right", sorttype: "float", formatter: "number"}],

        rowNum: 30,
        rowList:[10,20,30],
        pager: '#pager2',
        sortname: 'brandName',
        pgtext: "Page {0} of {1}",
        });

    $("#list2").jqGrid('navGrid', '#pager2', { edit: false, add: false, del: false });
    //$("#list2").setGridParam({ datatype: 'local', page: 1, rowNum: 20 }).trigger('reloadGrid');
    } 
```

很简单，它不会生成带有嵌套行的 TreeGrid。

我知道数据工作正常，因为如果我注释掉：

```
treeGrid: true,
    treeGridModel: 'adjacency',
    ExpandColumn: 'brandName', 
```

果然数据显示出来了。

我很确定这很明显，但看不到它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:07:19.727

主要问题是 TreeGrid 不支持`datatype: "local"`. 因此，您必须手动添加数据`addJSONData`（参见[答案](https://stackoverflow.com/a/5333199/315935)）或使用`datatype: "jsonstring"`，`datastr: mydata`以及附加`jsonReader`（参见[此处](https://stackoverflow.com/a/6782262/315935)）。

例如，您的演示可以修改为[以下演示](http://www.ok-soft-gmbh.com/jqGrid/jasonmhirst.htm)。

# java - 尝试为 Spring、Spring WebFlow、Hibernate 等设置我的第一个 Maven POM，但出现错误

> ID：12407365
> 
> 赞同：0
> 
> 时间：2012-09-13T13:24:30.580
> 
> 标签：java, spring, hibernate, maven, spring-webflow

尝试为 Spring、Spring WebFlow、Hibernate 等设置我的第一个 Maven POM，但出现错误。在我开始使用 Maven 导入 JARS 之前，我有一个正在运行的项目。下面是我的 POM.XML 文件和错误。我不知道发生了什么，但我无法让这个项目工作：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springsource.greenbeans.maven</groupId>
    <artifactId>MemberInquiry</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>MemberInquiry</name>
    <url>http://maven.apache.org</url>
    <dependencies>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- <dependency> <groupId>org.jasig.cas</groupId> <artifactId>cas-server-core</artifactId> 
            <version>3.5.0</version> <exclusions> <exclusion> <artifactId>jcl-over-slf4j</artifactId> 
            <groupId>org.slf4j</groupId> </exclusion> </exclusions> </dependency> <dependency> 
            <groupId>org.slf4j</groupId> <artifactId>jcl-over-slf4j</artifactId> <version>1.6.6</version> 
            </dependency> -->
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-hibernate3</artifactId>
            <version>2.0.8</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.ldap</groupId>
            <artifactId>spring-ldap-core-tiger</artifactId>
            <version>1.3.0.RELEASE</version>
        </dependency>

        <!-- <dependency> <groupId>org.jasig.cas</groupId> <artifactId>cas-server-core</artifactId> 
            <version>3.5.0</version> </dependency> -->
        <dependency>
            <groupId>org.jasig.cas.client</groupId>
            <artifactId>cas-client-core</artifactId>
            <version>3.1.12</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.6</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>1.6.6</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.6</version>
        </dependency>
        <!-- <dependency> <groupId>org.apache.directory.server</groupId> <artifactId>apacheds-core</artifactId> 
            <version>1.5.5</version> <scope>runtime</scope> </dependency> <dependency> 
            <groupId>org.apache.directory.server</groupId> <artifactId>apacheds-server-jndi</artifactId> 
            <version>1.5.5</version> <scope>runtime</scope> </dependency> -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.2.2</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-nop</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>jcl-over-slf4j</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

    </dependencies>
    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

这是我的错误：

```
sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:270)
    ... 43 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateTransactionManager' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 49 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/database-c3p0.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 59 more
Caused by: java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2818)
    at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1159)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1647)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2406)
    at java.lang.Class.getConstructor0(Class.java:2716)
    at java.lang.Class.getDeclaredConstructor(Class.java:2002)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:104)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newConfiguration(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:561)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:134)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 66 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:28:04.180

你应该使用这个 POM，你不会有任何问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.springframework.samples</groupId>
    <artifactId>webflow-primefaces-showcase</artifactId>
    <name>JSF 2, Spring Web Flow, and PrimeFaces Showcase</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <properties>
        <java-version>1.5</java-version>
        <springframework-version>3.1.1.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.BUILD-SNAPSHOT</springwebflow-version>
        <springsecurity-version>3.1.1.RELEASE</springsecurity-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <hibernate.version>4.1.1.Final</hibernate.version>
    </properties>

    <dependencies>
        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
            <!-- will come with all needed Spring dependencies such as spring-core 
                and spring-beans -->
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
            <scope>runtime</scope>
        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- ********************************************************************** 
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>
        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>
        <!-- For testing against latest Spring snapshots -->
        <repository>
            <id>org.springframework.maven.snapshot</id>
            <name>Spring Maven Snapshot Repository</name>
            <url>http://maven.springframework.org/snapshot</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <!-- For developing against latest Spring milestones -->
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Hibernate Validator -->
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Sun Mojarra JSF 2 implementation -->
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For PrimeFaces JSF component library -->

    </repositories>

    <build>
        <finalName>WebFlowTemplate</finalName>
    </build>
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:43:16.730

您绝对不需要以下依赖项，它来自旧版本的 Spring：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-hibernate3</artifactId>
    <version>2.0.8</version>
</dependency> 
```

还运行`mvn dependency:tree`并检查其输出是否存在传递依赖项的意外版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:43:21.637

看起来像一个依赖问题。在这种情况下，最好的办法是运行`mvn dependency:tree`并仔细检查输出。确保引用的 jars/版本正是您想要的。如果您不小心，传递依赖关系可能会出现问题（我怀疑某些 jar 的错误版本正在传递中）。

# javascript - 使用 Javascript 按钮刷新 DIV

> ID：12407368
> 
> 赞同：0
> 
> 时间：2012-09-13T13:24:48.930
> 
> 标签：javascript

在dreamweaver 中创建一个APP。当用户单击按钮时，如何使特定的 DIV 重新加载/刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:28:50.050

考虑您有一个带有 id refresh 的按钮，并且您要重新加载的 div 具有 id div。单击按钮后，它将使用以下 JQuery 加载 div

```
 <input type='button' name ='click me' id="refresh" /

 <script>
   $(function() {
     $("#refresh").on("click", function() {
        $("#mydiv").load("index.html")
        return false;
    })
  })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:29:03.713

在jQuery中

```
 <button id="MyButton">Refresh</button>

$(document).ready(function () {
     $("#myButton").on("click", function () {
        $("#div").load("index.php")
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:32:50.657

下面是一个如何在 DIV 元素中重新加载文本的简单示例：

[http://www.w3schools.com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

# javascript - 引用类变量中的原型方法

> ID：12407377
> 
> 赞同：2
> 
> 时间：2012-09-13T13:25:07.163
> 
> 标签：javascript, prototype

我正在处理的 JS 原型对象有问题。我想要做的是将类级变量定义为对象文字，然后返回类的原型方法之一来设置类级变量的属性，但我没有得到任何结果。这是我想要做的，在一个简化的例子中：

```
var foo = function(args)
{
    this.name = 'bar';
}
foo.stuff = { barbaz: this.foobarbaz(2) };

foo.prototype.foobarbaz(int)
{
    return int;
}

alert(foo.stuff.barbaz); // should alert 2, but I'm missing something 
```

我想知道在这种情况下我是否只是误解了“this”的范围，或者当我将它分配给 foo.stuff.barbaz 时 this.foobarbaz() 是否未定义。

是否可以从像这样的类级变量中引用对象的原型方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:45:15.247

以下是您需要知道的：

1.  您应该在原型上定义您的方法，例如`foo.prototype.foobarbaz = function(int) {...}`. 您当前的语法无效。

2.  您正在尝试在定义方法之前使用它。如果您希望[函数提升](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet#Hoisting)在这里起作用，那仅适用于函数声明，而不适用于赋值。`foobarbaz`第一次使用时移动上面的分配。

3.  在您提供的此功能中，`this`不是`foo`. 每个**函数**都有自己的值`this`（称为函数的“*上下文*”），在每次调用函数时设置。[您可以在使用 "var that = this" 理解 Javascript 范围](https://stackoverflow.com/questions/12370851/understanding-javascript-scope-with-var-that-this/12371105#12371105)的几个答案中查看如何设置函数上下文的规则。

相反，在这里，您需要使用`foo.foobarbaz(2)`而不是`this.foobarbaz(2)`，因为`this`可能是`window`（假设您将此代码称为不是对象的方法，也不是在 JavaScript`strict`模式下）。

# events - 断言模拟（MOQ 因此 DynamicProxy）事件没有附加处理程序

> ID：12407379
> 
> 赞同：0
> 
> 时间：2012-09-13T13:25:13.277
> 
> 标签：events, moq

这是非常直接的（ish），因为事件是“真实的”，就像现在由 DynamicProxy 创建的一样，但我无法为模拟事件解决任何问题。

解释我要实现的目标的最佳方法是使用代码，请参阅测试方法中的注释行：

```
using System;
using Moq;
using NUnit.Framework;

namespace MOQTest
{
 [TestFixture]
    public class EventsMoqTest
    {
        [Test]
        public void DetachTest()
        {
            var hasEventMock = new Mock<IHasEvent>();

            using (var observer = new Observer(hasEventMock.Object))
            {
                 //Assert that hasEventMock.Object has handler attached
            }

            //Assert that hasEventMock.Object DOES NOT have handler attached
        }
    }

    public interface IHasEvent
    {
        event EventHandler AnEvent;
    }

    public class Observer : IDisposable
    {
        private readonly IHasEvent _hasEvent;
        private readonly EventHandler _hasEventOnAnEvent;

        public Observer(IHasEvent hasEvent)
        {
            _hasEvent = hasEvent;

            _hasEventOnAnEvent = _hasEvent_AnEvent;
            _hasEvent.AnEvent += _hasEventOnAnEvent;
        }

        void _hasEvent_AnEvent(object sender, EventArgs e)
        {}

        public void Dispose()
        {
            _hasEvent.AnEvent -= _hasEventOnAnEvent;
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:54:22.213

不幸的是，你不能。这不是真正的起订量问题，而是 C# event 关键字与委托一起工作的方式。有关更多信息，请参阅[此 SO 答案](https://stackoverflow.com/a/572658/182895)。

# ipad - iPad / iPhone 离线网页

> ID：12407382
> 
> 赞同：1
> 
> 时间：2012-09-13T13:25:23.637
> 
> 标签：ipad, html, caching, offline

我需要为客户提供一个单页网站，以便在 iPad / iPhone 上离线查看。

该网页将包含 Javascript、图像和视频资产。阅读有关缓存清单的信息，iPad 上的缓存似乎限制为 5mb。

任何人都建议任何前进的路线，理想情况下不需要使用额外的应用程序，但可以离线存储视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:42:16.957

您可能无法使用 Safari 来保证您的网页和视频离线可用。

最可靠的替代方法是使用[PhoneGap](http://www.phonegap.com)创建一个应用程序，因为这可以让您控制视频和离线存储的网页。但是，这需要您将其作为 iOS 应用程序分发给您的客户端。

如果您不/不能将其作为应用程序分发，您可以尝试在应用商店中找到专为离线浏览而设计并支持视频的应用程序。如果您在 google 或 appstore 上搜索“离线浏览器 iPhone”，您将看到一些替代方案。

# database-design - 一个新列作为主键或使用两个 FK 作为 PK

> ID：12407383
> 
> 赞同：0
> 
> 时间：2012-09-13T13:25:24.293
> 
> 标签：database-design, primary-key, composite-primary-key

我有以下数据库设计：

![PK](../Images/76af26e953d9bf6e86db50d3e077e3a1.png)

我想知道**EReportReq**是否必须有一个列作为主键**eReportReqId**，或者我可以使用**eReportId**和**requirementsId**作为**主键**。

**Requirement**表将有系统信息和**EReport**表（此处未显示），**EReportReq**和**EReportReqImg**将有用户数据。

**EReportReq**表示作为 EReport 一部分的需求。一个需求可能是多个 EReport 的一部分。

EReportReqImg表示作为**EReport**一部分的那些需求的图像（一个或多个）。

我需要**eReportReqId**作为主键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:09:11.327

假设一个`EReport`不能多次连接到*同一个* *，无论如何*都是一个关键。唯一的问题是：您是否需要*额外*的代理键 ( )？[以下](https://stackoverflow.com/a/11639189/533120)是一些可能有助于您做出决定的标准。`Requirement``{eReportId, requirementId}`**`eReportReqId`**

 **我个人的直觉是，这个问题的答案是“不”，所以你最终会得到这样的模型：

![在此处输入图像描述](../Images/c0d016dd9dd5e5353f7049aab6487ea0.png)

在某些情况下，此模型允许较少的 JOINing。例如，只需扫描-`EReport`就可以满足获取所有给定的图像，因此我们可以直接使用它来过滤数据（而不是仅仅为了获取JOIN ）。`EReportReqImg``eReportId``EReportReq``eReportId`

它还可以很好地将索引中的数据[聚集](http://use-the-index-luke.com/sql/clustering)在一起（如果您的 DBMS 支持它，可能还有整个表），从而使某些范围扫描非常有效（包括上面提到的那个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:29:37.817

您*不需要*eReportReqId 作为表的主键，但在某些情况下，您希望它拥有自己的主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:39:37.493

这取决于 EReportReq 中的**FK**。如果 FK 的**eReportId**和**requirementsId的组合在****EReportReq**中必须是唯一的，那么您当然可以对其进行概括，并将 FK 用作 EReportReq 的主**键**。否则，您将需要一个单独的列（即**eReportReqId**）作为主键。

*附带说明一下，如果您要对其进行概括并使用 FK 作为主键，也许您也应该考虑将 EReportReqImg 表规范化为 EReportReq。***

# search - 创建一个 sharepoint 2007 搜索列表（仅来自该列表的结果）？

> ID：12407388
> 
> 赞同：0
> 
> 时间：2012-09-13T13:25:43.027
> 
> 标签：search, sharepoint-2007, sharepoint-list

我一直在研究这个问题，但一直没有找到解决方案。我只想有一个搜索栏，当输入 ID 时，搜索将返回具有该 ID 的所有列表项。

我确定我会遗漏细节（因为我是 sharepoint 新手），但我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:14:02.183

您需要的不是搜索，而是过滤。

在您的图书馆视图中，请按照下列步骤操作：

1.  将页面置于编辑模式
2.  添加 Web 部件“文本过滤器 Web 部件”
3.  打开其工具窗格
4.  命名过滤器，例如“IDFilter”，并验证
5.  仍处于编辑模式，选择“修改共享 Web 部件”-->“连接”-->“将过滤器值发送到*库的名称*”
6.  选择包含您的 ID 的字段，然后单击“完成”

就是这样。您现在可以在字段中键入 ID，它会在 ID 字段上动态应用过滤器。

也就是说，您应该在[http://SharePoint.stackexchange.com](http://SharePoint.stackexchange.com)上发布您未来的问题。这是一个 SharePoint 专用的 stackexchange 站点。

# sql-server - 如何从 SQL Server 存储过程返回值并在 Access VBA 中使用它们

> ID：12407389
> 
> 赞同：10
> 
> 时间：2012-09-13T13:25:43.760
> 
> 标签：sql-server, vba, sql-server-2008, ms-access, stored-procedures

我已经在 SQL Server 中设置了一个运行良好的存储过程。我现在可以从 VBA 调用它，但想返回一个值以了解是否有任何错误等。我的 SP 中的最后一个参数设置为 OUTPUT：

```
@DataSetID int = 0,
@Destination char(1)='-',
@errStatusOK bit OUTPUT 
```

我调用 SP 的 VBA 如下，但现在无法使用，添加新参数后，我不确定哪里出错了，我不断收到`3708 - Parameter object is improperly defined. Inconsistent or incomplete information was provided.`：

```
Set cnn = New adodb.Connection
cnn.ConnectionString = 
   "DRIVER=SQL Server;SERVER=SERVER\SERVER;DATABASE=a_db;Trusted_Connection=Yes"

cnn.Open cnn.ConnectionString

Set cmd = New adodb.Command
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "stprMoveDataSet"

Set param = cmd.CreateParameter
               ("@DataSetID", adInteger, adParamInput, , stDataSet)
cmd.Parameters.Append param
Set param = cmd.CreateParameter
               ("@Destination", adChar, adParamInput, 1, stDestination)
cmd.Parameters.Append param
Set param = cmd.CreateParameter
               ("@errStatusOK", adBit, adParamReturnValue)
cmd.Parameters.Append param

rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.LockType = adLockOptimistic
rs.Open cmd 
```

如何让 vba 使用 OUTPUT 参数并使 vba 的返回值“可读”。

编辑 - 我已将问题更改为更具体地关于返回值，而不仅仅是关于使用 OUTPUT 参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T13:54:59.830

```
Set cnn = New adodb.Connection
cnn.ConnectionString = 
   "DRIVER=SQL Server;SERVER=SERVER\SERVER;DATABASE=a_db;Trusted_Connection=Yes"

cnn.Open cnn.ConnectionString

Set cmd = New adodb.Command
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "stprMoveDataSet"

Set param1 = cmd.CreateParameter
               ("@DataSetID", adInteger, adParamInput, , stDataSet)
cmd.Parameters.Append param
Set param2 = cmd.CreateParameter
               ("@Destination", adChar, adParamInput, 1, stDestination)
cmd.Parameters.Append param
Set param3 = cmd.CreateParameter
               ("@errStatusOK", adBit, adParamOutput, , adParamReturnValue)
cmd.Parameters.Append param

rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.LockType = adLockOptimistic
rs.Open cmd 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-31T07:44:33.890

有几种方法可以使用 VBA 取回值。

1.  记录集
2.  受影响的记录数（仅适用于插入/更新/删除，否则为 -1）
3.  输出参数
4.  返回值

我的代码演示了所有四个。这是一个返回值的存储过程：

```
Create PROCEDURE CheckExpedite
    @InputX  varchar(10),
    @InputY int,
    @HasExpedite int out
AS
BEGIN
    Select @HasExpedite = 9 from <Table>
    where Column2 = @InputX and Column3 = @InputY

    If @HasExpedite = 9
        Return 2
    Else
        Return 3
End 
```

这是我在 Excel VBA 中使用的子程序。您需要参考 Microsoft ActiveX Data Objects 2.8 Library。

```
Sub CheckValue()

    Dim InputX As String: InputX = "6000"
    Dim InputY As Integer: InputY = 2014

    'open connnection
    Dim ACon As New Connection
    'ACon.Open ("Provider=SQLOLEDB;Data Source=<SqlServer>;" & _
    '    "Initial Catalog=<Table>;Integrated Security=SSPI")

    'set command
    Dim ACmd As New Command
    Set ACmd.ActiveConnection = ACon
    ACmd.CommandText = "CheckExpedite"
    ACmd.CommandType = adCmdStoredProc

    'Return value must be first parameter else you'll get error from too many parameters
    'Procedure or function "Name" has too many arguments specified.
    ACmd.Parameters.Append ACmd.CreateParameter("ReturnValue", adInteger, adParamReturnValue)
    ACmd.Parameters.Append ACmd.CreateParameter("InputX", adVarChar, adParamInput, 10, InputX)
    ACmd.Parameters.Append ACmd.CreateParameter("InputY", adInteger, adParamInput, 6, InputY)
    ACmd.Parameters.Append ACmd.CreateParameter("HasExpedite", adInteger, adParamOutput)

    Dim RS As Recordset
    Dim RecordsAffected As Long

    'execute query that returns value
    Call ACmd.Execute(RecordsAffected:=RecordsAffected, Options:=adExecuteNoRecords)

    'execute query that returns recordset
    'Set RS = ACmd.Execute(RecordsAffected:=RecordsAffected)

    'get records affected, return value and output parameter
    Debug.Print "Records affected: " & RecordsAffected
    Debug.Print "Return value: " & ACmd.Parameters("ReturnValue")
    Debug.Print "Output param: " & ACmd.Parameters("HasExpedite")

    'use record set here
    '...

    'close
    If Not RS Is Nothing Then RS.Close
    ACon.Close

End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T13:58:53.540

我最初查看了 OUTPUT 参数，但找不到如何将它们返回到 Access（在 VBA 中）然后向用户提供反馈。一位同事建议在存储过程中使用 SELECT 并使用它。

存储过程：在末尾添加以下内容：

```
SELECT @errStatusOK as errStatusOK, @countCurrent as countCurrent, @countHistorical as countHistorical 
```

VBA：

```
Dim cnn As ADODB.Connection
Dim cmd As New ADODB.Command, rs As New ADODB.Recordset, param As New ADODB.Parameter
Dim fld As ADODB.Field
Dim stMessage As String

Set cnn = New ADODB.Connection
cnn.ConnectionString = "DRIVER=SQL Server;SERVER=SERVER\SERVER;DATABASE=a_db;Trusted_Connection=Yes"

cnn.Open cnn.ConnectionString

Set cmd = New ADODB.Command
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "stprMoveDataSet"

Set param = cmd.CreateParameter("@DataSetID", adInteger, adParamInput, , stDataSet)
cmd.Parameters.Append param
Set param = cmd.CreateParameter("@Destination", adChar, adParamInput, 1, stDestination)
cmd.Parameters.Append param

rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.LockType = adLockOptimistic
'rs.Open cmd
Set rs = cmd.Execute
If rs!errstatusok = True Then
    stMessage = "Operation appears to have been successful, check the DataSets Listing..." & Chr(13) & "Also, the Server returned the following information: ["
Else
    stMessage = "Operation appears to have failed, check the DataSets Listing..." & Chr(13) & "Also, the Server returned the following information: ["
End If
For Each fld In rs.Fields
    stMessage = stMessage & "| " & fld.Name & " / " & fld.Value & " |"
Next fld
stMessage = stMessage & "]"

MsgBox stMessage 
```

这将返回以下内容： `Operation appears to have failed, check the DataSets Listing... Also, the Server returned the following information: [| errStatusOK / False || countCurrent / 0 || countHistorical / 10 |]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T13:30:42.370

在从中获取“adParamInput”的其他参数枚举中，另一个是“adParamOutput”，它表示存储过程的输出参数，“adParamInputOutput”表示“双向”的参数。在你的情况下，我相信“adParamOutput”是合适的。我希望这就是你要找的。

# mysql - 无法启动 Apache 和 MySql - 端口繁忙

> ID：12407390
> 
> 赞同：0
> 
> 时间：2012-09-13T13:25:52.373
> 
> 标签：mysql, apache, xampp

我无法使用 XAMPP 启动 Apache 和 MySql。我得到的错误是**80 和 443 端口正忙。**

我在互联网上寻找解决方案和大多数解决方案，比如这个：[http](http://www.sitepoint.com/unblock-port-80-on-windows-run-apache/) ://www.sitepoint.com/unblock-port-80-on-windows-run-apache/ 似乎暗示要删除 Skype，卸载 Ms Sql Server 谁可能正在使用这些端口等。但是我对删除任何当前程序不感兴趣（我有 Sql Server 并且也需要那个）。

所以我最感兴趣的是是否有办法让 Apache 和 MySql 使用其他应用程序不使用的端口。（理想情况下，每个新安装的程序不应该“浏览”所有端口​​列表并随机选择一个不忙的，这样就不必为此苦苦挣扎了吗？）。

请看下图： ![在此处输入图像描述](../Images/9b23828f73d442823ea6cbe80566c149.png) 我按下了配置按钮（最右边的一个，从按钮的最后一列开始），“服务设置”窗口打开。在那里我使用了一些变体，比如 8081 而不是 80 用于 Apache 主端口等。当我尝试再次启动服务时，仍然没有结果。

这是处理这个问题的正确方法吗？下一步该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T05:49:33.987

您可以通过禁用 HTTPS 来试一试。为此，请转到您的 xampp cmd 提示符并通过选择 3 禁用 HTTPS(ssl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T06:03:20.163

更改 apache 端口并尝试重新启动

# c# - 比较从 Informix 到 SQL Server 的浮点/十进制值

> ID：12407392
> 
> 赞同：1
> 
> 时间：2012-09-13T13:25:56.273
> 
> 标签：c#, sql-server-2005, floating-point, decimal, informix

我正在尝试比较 Informix 数据库和 SQL Server 数据库中的值。我遇到的问题是 Informix 将浮点数返回为“4000”，而 SQL Server 将其返回为“40.000.000”。

Informix 列的数据类型是“float”，SQL Server 列的数据类型是十进制(8,2)。

比较发生在 C# 应用程序中，并且由于返回的内容而总是失败。

来自 Informix 数据库的数据被直接插入到 SQL Server 数据库中，因此在提取值时比较应该是准确的。

我不知道如何解决这个问题。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:30:59.293

这个问题已经解决了吗？.. 似乎 Informix DBMONEY 环境值可以设置为使用句点而不是逗号作为千位分隔符，但这仍然不会影响将其发送到 SQL Server 时的值。您是否使用其他值进行了测试以查看是否存在模式？

我还记得使用 Informix FLOAT 和 SMALLFLOAT 数据类型时，有时值可能会从一种计算机硬件体系结构转向另一种计算机硬件体系结构。

# get - Instagram API：如何为 GET Likes/Comments 指定计数和偏移量？

> ID：12407393
> 
> 赞同：2
> 
> 时间：2012-09-13T13:25:58.693
> 
> 标签：get, social-networking, instagram

如何获取喜欢某些媒体但带有参数的用户`offset`列表`limit`？

以及如何使用分页？

当我检索响应`GET /media/{media-id}/likes?access_token={access_token}&count=5`时，它总是返回`200 likes and pagination=<null>`。

如何遍历所有评论和点赞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T12:51:58.103

偏移量不可用。但是有一个`MAX_ID`参数，您可以在其中指定`ID`您获得的最后一项。

[您可以在此处](http://instagram.com/developer/endpoints/users/#get_users_media_recent)找到有关端点的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:38:26.493

我遇到了同样的问题... Instagram API 不允许您分页或限制返回的点赞数量。我通过限制我的`foreach`陈述解决了这个问题，您可能可以对`for`陈述做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:32:12.357

不完全是你问的，但如果你只想得到喜欢的计数，你可以这样做：

```
GET /media/{media-id} 
```

并检查`--data-likes-count`JSON 响应。

# android - 将图像保存到 SD 卡时出现空指针异常

> ID：12407395
> 
> 赞同：0
> 
> 时间：2012-09-13T13:26:15.413
> 
> 标签：android, save, filenotfoundexception

我想将图像保存到 sd 卡中。但是在 sd 卡中仅创建了命名图像文件的文件夹，但未在 sd 卡中创建实际文件。尝试保存该图像时出现空指针异常到 SD 卡。这是代码：

```
public class MainActivity extends Activity {
    ImageView bmImage; 
    LinearLayout view1;
      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);

          view1 = (LinearLayout)findViewById(R.id.certlinear);
          bmImage = (ImageView)findViewById(R.id.certimage);

        Button button =(Button)findViewById(R.id.btn);
        button.setOnClickListener(hello);

    }
        Button.OnClickListener hello= new Button.OnClickListener()
        {  
            @Override  
            public void onClick(View v)
            {   
                  View view = view1.getRootView();
                  //u can use any view of your View instead of TextView

                 if(view!=null)
                 {
                 System.out.println("view is not null.....");
                 view.setDrawingCacheEnabled(true);
                 view.buildDrawingCache();
                 Bitmap bm = view.getDrawingCache();

                 try
                 {
                 if(bm!=null)
                 {
                 System.out.println("bm is not null.....");
                 OutputStream fos = null;
                 File folder = new File(Environment.getExternalStorageDirectory().toString() + "/sample.JPEG");
                 boolean success = false;
                 if (!folder.exists()) {
                     success = folder.mkdirs();
                 }
                 if (!success) {
                     // Do something on success
                 } else {
                     // Do something else on failure 
                 }
                 Toast.makeText(MainActivity.this,"path of the folder is "+folder.getAbsolutePath(), Toast.LENGTH_SHORT).show();

                 fos = new FileOutputStream(folder);

                 BufferedOutputStream bos = new BufferedOutputStream(fos);
                 bm.compress(Bitmap.CompressFormat.JPEG, 50, bos);

                 bos.flush();
                 bos.close();
                 view.setDrawingCacheEnabled(false);
                 }
                 }
                 catch(Exception e)
                 {
                 System.out.println("Error="+e);
                 e.printStackTrace();
                 }
                 }

            }
        };
} 
```

这是异常日志：

```
09-13 18:44:18.957: W/System.err(3612): java.io.FileNotFoundException: /sdcard/sample.JPEG
09-13 18:44:18.967: W/System.err(3612):     at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:244)
09-13 18:44:18.967: W/System.err(3612):     at java.io.FileOutputStream.<init>(FileOutputStream.java:97)
09-13 18:44:18.967: W/System.err(3612):     at java.io.FileOutputStream.<init>(FileOutputStream.java:69)
09-13 18:44:18.976: W/System.err(3612):     at com.example.mytest.MainActivity$1.onClick(MainActivity.java:96)
09-13 18:44:18.976: W/System.err(3612):     at android.view.View.performClick(View.java:2364)
09-13 18:44:18.976: W/System.err(3612):     at android.view.View.onTouchEvent(View.java:4179)
09-13 18:44:18.976: W/System.err(3612):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
09-13 18:44:18.976: W/System.err(3612):     at android.view.View.dispatchTouchEvent(View.java:3709)
09-13 18:44:18.976: W/System.err(3612):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-13 18:44:18.987: W/System.err(3612):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-13 18:44:18.987: W/System.err(3612):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-13 18:44:18.987: W/System.err(3612):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-13 18:44:18.997: W/System.err(3612):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
09-13 18:44:18.997: W/System.err(3612):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
09-13 18:44:18.997: W/System.err(3612):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
09-13 18:44:18.997: W/System.err(3612):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
09-13 18:44:18.997: W/System.err(3612):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
09-13 18:44:18.997: W/System.err(3612):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 18:44:18.997: W/System.err(3612):     at android.os.Looper.loop(Looper.java:123)
09-13 18:44:18.997: W/System.err(3612):     at android.app.ActivityThread.main(ActivityThread.java:4363)
09-13 18:44:19.011: W/System.err(3612):     at java.lang.reflect.Method.invokeNative(Native Method)
09-13 18:44:19.011: W/System.err(3612):     at java.lang.reflect.Method.invoke(Method.java:521)
09-13 18:44:19.011: W/System.err(3612):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-13 18:44:19.011: W/System.err(3612):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-13 18:44:19.011: W/System.err(3612):     at dalvik.system.NativeStart.main(Native Method) 
```

我在这一行得到空指针异常：

```
 fos = new FileOutputStream(folder); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:29:03.950

您是否添加了此权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T13:30:05.550

你打电话

```
success = folder.mkdirs(); 
```

这将创建一个名为 /sdcard 的文件夹（存在）和一个文件夹名称 /sdcard/sample.JPEG 您要写入图像的路径是一个目录。您不能在目录上打开 OutputStream。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:32:34.713

只需在您的代码中进行简单的更改，请尝试以下操作，

```
File folder = new File(Environment.getExternalStorageDirectory().toString());
boolean success = false;
if (!folder.exists()) {
    success = folder.mkdirs();
}

File file = new File(Environment.getExternalStorageDirectory().toString() + "/sample.JPEG");
if (!file.exists()) {
    success = file.createNewFile();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:37:43.323

这在我的项目中效果很好：

```
private void saveChicaDress(Bitmap dress){

        String path = Environment.getExternalStorageDirectory().toString() + 
                        getResources().getString(R.string.path_to_store);

        OutputStream fOut = null;
        File file = new File(path, "chica.png");

        int i = 1;  
        while(file.exists()){
            file = new File(path, "chica("+String.valueOf(i)+").png");
            ++i;
        }

        file.getParentFile().mkdirs();

        try {
            fOut = new FileOutputStream(file);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        dress.compress(Bitmap.CompressFormat.PNG, 100, fOut);

        try {
            fOut.flush();
            fOut.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

在 AndroidManifest 中：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# java - 用户'root'@'localhost'的访问被拒绝（使用密码：YES）

> ID：12407399
> 
> 赞同：0
> 
> 时间：2012-09-13T13:26:34.213
> 
> 标签：java, mysql, tomcat, liferay

您好我正在开发一个使用 JPA 访问数据库的 Liferay portlet。我正在使用 Tomcat 7 和 MySQL。

这个 portlet 在我的机器上运行良好，但是当我将 portlet 移动到另一台服务器的测试环境并尝试在测试门户中使用它时，我收到以下错误：

**用户'root'@'localhost'的访问被拒绝（使用密码：YES）**

我的persistence.xml中的数据库连接数据库没问题。

我尝试将错误的连接数据放入persistence.xml 以查看错误是否已更改，但没有更改。例如，我将用户设置为“wronguser”，当我部署 portlet 并尝试再次使用它时，我得到了完全相同的错误：

**用户'root'@'localhost'的访问被拒绝（使用密码：YES）**

即使我更改数据库名称或 URL，错误总是相同的。好像有些东西没有更新。我尝试删除 Tomcat 临时文件夹，但没有帮助。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:02:25.567

> 我尝试将错误的连接数据放入persistence.xml 以查看错误是否已更改，但没有更改。例如，我将用户设置为“wronguser”，当我部署 portlet 并尝试再次使用它时，我得到了完全相同的错误：

这只是表明最后提供给 mysql 的用户名/密码不是像预期的那样来自您的配置文件，而是来自 to-be-identified-elsewhere。

直到你看到 mysql 抱怨“wronguser”无法连接，这是要清除的第一个障碍，问题很可能在应用程序设置中，而不是在 mysql 中。

如果 mysql 服务器稍后抱怨“错误用户”的权限，那么可以肯定的是，随后要调查的区域将是该用户的授权，但您需要首先将正确的用户/主机/密码信息传达给服务器。

# windows-phone-7 - WP7 listpicker selectionchanged selectedindex 返回 -1

> ID：12407404
> 
> 赞同：0
> 
> 时间：2012-09-13T13:26:53.543
> 
> 标签：windows-phone-7, selectedindex, listpicker

我有一个小而简单的问题。我认为。

我必须 Listpickers ，其中第二个取决于第一个的选择。我认为我可以通过在第一个 Listpicker 上使用 selectionchanged 轻松完成，然后获取选定的索引。

```
<toolkit:ListPicker ExpansionMode="FullScreenOnly" Grid.Row="0" Name="customers" FullModeHeader="Kunder" Margin="10,50,10,10" Width="350" HorizontalAlignment="Left" SelectionChanged="customers_SelectionChanged">
      <toolkit:ListPicker.ItemTemplate>
              <DataTemplate>
                     <StackPanel Orientation="Horizontal">
                          <TextBlock Text="{Binding Title}" Margin="12,0,0,0"></TextBlock>
                     </StackPanel>
              </DataTemplate>
      </toolkit:ListPicker.ItemTemplate>
      <toolkit:ListPicker.FullModeItemTemplate>
             <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="16,20,0,20">
                         <TextBlock Text="{Binding Title}" Margin="16,0,0,0" FontSize="30" FontFamily="{StaticResource PhoneFontFamilyLight}"></TextBlock>
                    </StackPanel>
             </DataTemplate>
      </toolkit:ListPicker.FullModeItemTemplate>
</toolkit:ListPicker> 
```

并且选择的代码已更改：

```
private void customers_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        int selindex = customers.SelectedIndex;

        MessageBox.Show("index : " + selindex);
        Guid costumerid = customers[selindex].id;
        Loadprojects();
    } 
```

我的问题是 selindex 总是等于-1，然后我得到一个超出范围的异常。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:31:30.697

```
private void customers_SelectionChanged(object sender, SelectionChangedEventArgs e)
{

    int selindex = customers.SelectedIndex;
    if (selindex==-1) return;
    MessageBox.Show("index : " + selindex);
    Guid costumerid = customers[selindex].id;
    Loadprojects();
} 
```

# xaml - 在 Windows 8 应用程序中将用户信息存储在何处？

> ID：12407412
> 
> 赞同：2
> 
> 时间：2012-09-13T13:27:14.793
> 
> 标签：xaml, login, windows-8, microsoft-metro

我正在创建一个 Windows 8 应用程序。我有一个登录屏幕，当我按下按钮时，它将针对 REST API 进行身份验证。但是当用户通过身份验证时我该怎么办？“会话”在哪里？如何存储用户是谁？到目前为止，我的搜索已将我带到这些答案

**1\. ApplicationData.Current 命名空间** 我将在哪里存储特定于会话的数据？本地应用程序数据？临时申请数据？

**2\. Password Vault** 我已经看到了类似问题的建议，但据我所知，这只是一个密码存储？它将如何帮助我保持当前用户处于会话状态？或者我会简单地为每个视图加载问题密码库：

> 这是用户的 Windows Live ID，他在我的应用程序中有什么 ID？

**3\. 饼干容器**

执行 Windows 8 应用程序时是否可以将用户信息存储在 cookie 中？

在我看来这是一个相当简单的问题，我希望有一个简单的答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:47:37.067

我也有一个应用程序，它通过简单的 OAuth 身份验证对 REST 服务进行身份验证，并将凭据（AccesstToken 和 AccessToken 密码）存储在 PasswordVault 中。它的优势之一（除了安全存储之外）在 Windows 8 设备之间同步。在 PasswordVault 中，您将用户名和密码存储在 PasswordCredential 中

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredential.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredential.aspx)

# .net - 我可以从我的 .config 文件中删除 serviceModel 标签吗？

> ID：12407417
> 
> 赞同：1
> 
> 时间：2012-09-13T13:27:30.657
> 
> 标签：.net, wcf, .net-3.5, app-config

我的 app.config 包含以下标签

```
<system.serviceModel>
    <bindings />
    <client />
</system.serviceModel> 
```

当我删除它们时，应用程序可以在没有 .NET Framework 3.5 版的机器上运行，直到需要它为止。

除了延迟应用程序崩溃之外，删除它们是否会导致任何其他副作用？即使没有它们，我也可以在具有正确版本的 .NET Framework 的机器中使用 Web 服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:29:50.437

是的，您可以删除它。看起来 WCF 绑定已被添加然后被删除。您不需要保留空存根。此外，您应该发现这与 3.0 及更高版本有关，而不是 3.5 及更高版本。含义：它只会在 2.0/1.1 机器上*失败*（如果留在里面）。

# file - 将 10gb（超过 2gb）文件上传到 web 应用程序的开源解决方案

> ID：12407419
> 
> 赞同：0
> 
> 时间：2012-09-13T13:27:40.690
> 
> 标签：file, web-applications, file-upload, applet

由于标题需要来自网络浏览器，理想情况下它不应该是 Flash。已经把我自己写成一个 java 小程序，但没有必要重新发明轮子已经在网上搜索过，但没有找到任何合适的东西。（例如已经看到公共文件上传，以及其他一些）。它需要做的就是访问客户端计算机上的文件，将其拆分为块并传递给服务器理想情况下它会执行多个流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:12:45.127

试试 JumpLoader，它是一个 Java 上传器，可以将较大的文件分块，这样就可以上传它们而不受 Web 服务器最大文件大小的限制。

# javascript - 如何附加分离的对象

> ID：12407420
> 
> 赞同：0
> 
> 时间：2012-09-13T13:27:44.637
> 
> 标签：javascript, jquery

标题已经说明了......我正在寻找一种方法来附加我的分离对象。

[http://jsfiddle.net/jy2Zj/](http://jsfiddle.net/jy2Zj/)

目前我只能意识到一个警报。我将如何替换该功能？

谢谢你的帮助。

***编辑*** 我想到了另一个问题。选择“全部”后有没有办法抑制选择框的关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:04:04.507

不确定我是否理解您的意思。如果我是对的，您只想列出所有分离的对象，以便稍后再次添加它们：

```
myArr = ['v2', 'v11'];

var detached = [];

$('select[name="test"] option').each(function() {
   if ($.inArray(this.value, myArr) !== -1) {
      detached.push($(this).detach());
   }
});

$.each(detached,function() {
      $('select[name="test"]').find('option').end().append(this);
});

$('select[name="test"]').find('option').end().append('<option value="all">All</option>'); 
```

# android - Android中对SQLite数据库的多次访问

> ID：12407433
> 
> 赞同：2
> 
> 时间：2012-09-13T13:28:33.043
> 
> 标签：android, multithreading, sqlite

如果同一个 android 应用程序上的两个独立线程尝试访问 SQLite 数据库中的同一个表，会发生什么？我可以有冲突吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:50:52.287

[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q6)指出，SQLite 是线程安全的，但有一些（重要的）警告。上面的一点还指出，即使是多个进程也禁止并发写入，并且写入锁是文件级别的。一个类似的问题：[Locking a row with SQLite (read lock ?)](https://stackoverflow.com/questions/8688476/locking-a-row-with-sqlite-read-lock) with a similar [answer](https://stackoverflow.com/a/8688550/946679)。

* * *

编辑：

不想从别人那里偷东西，但是 wsanville 的问题中接受的答案也完美地回答了您的问题...... [Android 上 SQLite 的最佳实践是什么？](https://stackoverflow.com/questions/2493331/what-are-the-best-practices-for-sqlite-on-android)（复制以防评论被删除）

# c - SIGSEGV 访问 C 中的结构成员

> ID：12407437
> 
> 赞同：0
> 
> 时间：2012-09-13T13:28:45.510
> 
> 标签：c, variable-assignment, segmentation-fault

我在C中有这样的东西：

```
unsigned char a = structTypeInstance->b ; 
```

where`b`具有与 相同的类型`a`。

在此我收到`SIGSEGV`。

为什么？

**编辑：**我可以访问之前声明的 structTypeInstance 字段。我唯一的预感是，在为 structTypeInstance 分配内存的地方，是不够的。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:05:19.830

是的，这是可能的。但是由于您拒绝向我们展示`structTypeInstance`声明的代码，相应结构的完整定义是什么，分配到哪里，我们无法确定。

有时错误就像写一样简单

```
struct FOOBAR {
   char big[16380];
   char b[4];
};
struct FOOBAR *foo;

foo = malloc (sizeof foo); /* Allocates just a handful of bytes. */ 
```

当你真正的意思是

```
foo = malloc (sizeof *foo); /* Allocates enough for a complete struct FOOBAR. */ 
```

# attributes - 具有 Unboundit LDAP SDK 的非唯一 ldap 属性名称

> ID：12407440
> 
> 赞同：0
> 
> 时间：2012-09-13T13:28:58.193
> 
> 标签：attributes, unboundid-ldap-sdk

我正在尝试使用来自 Unboundit 的 LDAP SDK 从 netscape LDAP 目录中检索具有多个属性的对象。问题是只返回了一个属性 - 我猜 LDAP SDK 依赖于唯一的属性名称，有没有办法将它配置为也返回非不同的属性？

```
@Test
public void testRetrievingUsingListener() throws LDAPException {
    long currentTimeMillis = System.currentTimeMillis();

    LDAPConnection connection = new LDAPConnection("xxx.xxx.xxx", 389,
            "uid=xxx-websrv,ou=xxxx,dc=xxx,dc=no",
            "xxxx");
    SearchRequest searchRequest = new SearchRequest(
            "ou=xxx,ou=xx,dc=xx,dc=xx",
            SearchScope.SUB, "(uid=xxx)", SearchRequest.ALL_USER_ATTRIBUTES );

    LDAPEntrySource entrySource = new LDAPEntrySource(connection,
            searchRequest, true);

    try {
        while (true) {
            try {
                System.out.println("*******************************************");
                Entry entry = entrySource.nextEntry();
                if (entry == null) {
                    // There are no more entries to be read.
                    break;
                } else {
                    Collection<Attribute> attributes = entry.getAttributes();
                    for (Attribute attr : attributes)
                    {
                        System.out.println (attr.getName() + " " + attr.getValue());

                    }
                }
            } catch (SearchResultReferenceEntrySourceException e) {
                // The directory server returned a search result reference.
                SearchResultReference searchReference = e
                        .getSearchReference();
            } catch (EntrySourceException e) {
                // Some kind of problem was encountered (e.g., the
                // connection is no
                // longer valid). See if we can continue reading entries.
                if (!e.mayContinueReading()) {
                    break;
                }
            }
        }
    } finally {
        entrySource.close();
    }

    System.out.println("Finished in "  + (System.currentTimeMillis() - currentTimeMillis));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:08:13.413

非唯一的 LDAP 属性被认为是多值的，并被表示为`String`数组。

使用`Attribute.getValues()`而不是`attribute.getValue`.

# javascript - 锚元素的 href 属性自动改变

> ID：12407445
> 
> 赞同：0
> 
> 时间：2012-09-13T13:29:05.833
> 
> 标签：javascript, html, tags, anchor

我正在尝试访问`href`HTML`<a>`元素的属性，但不知何故该值会自动更改。

以下是我的代码：

```
function getTDElement(anchorString)
{
  var td = document.createElement('td');
  // i think this is not a good way to add child to html element but 
  // i have to do it for some unavoidable reason
  td.innerHTML = anchorString;
  var anchor = td.firstChild;
  // following line prints url like
  // http://localhost/myservlet?myParam=foobar
  console.log(anchor.href);
  return td;
}

// im passing only /myservlet?myParam=foobar in following line
getTDElement("<a href=/myservlet?myParam=foobar>display</a>"); 
```

我无法理解元素的 href 属性为什么以及如何自动更改。

任何人都可以对这个问题有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:37:39.577

链接元素上的`href`属性是一个特殊属性，而不是简单的字符串。它可能会将您的 href 值更改为它认为可以解析的绝对 URL。您可以使用 获得未更改的值`getAttribute`。

```
console.log(anchor.getAttribute('href')); 
```

# c# - 文本编码 UTF-8 字符集？

> ID：12407446
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:29:06.350
> 
> 标签：c#, asp.net, vb.net, visual-studio-2010

我使用的是UTF-8文本编码，我想在这种编码方式中会出现哪种类型的字符呢？我在用

```
encData_byte = System.Text.Encoding.UTF8.GetBytes(temp)
Dim encodedData As String = Convert.ToBase64String(encData_byte) 
```

任何人都可以告诉我这件事吗？我想忽略 , 和类似符号等字符`$`，`#`因为`@`我在 url 中使用了这个编码字符串。亲爱的朋友我不想用这个Http Utility Encoding方法，能不能给我讲讲文本编码utf-8 getbytes的方法？任何有帮助的东西将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:35:09.017

你有没有尝试

`Server.UrlEnCode(encodedData)`或者

`HttpServerUtility.UrlEncode(encodedData)`或者

`HttpUtility.UrlEncode(encodedData)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:32:10.673

如果您只想从 url 中排除此字符，只需替换它：`encodedData.Replace("$","").Replace("#","").Replace("@","")`

# html - 从 SOAP 响应返回非唯一值

> ID：12407450
> 
> 赞同：0
> 
> 时间：2012-09-13T13:29:15.197
> 
> 标签：html, eclipse, soap, ibm-mobilefirst

因此，我正在构建一个移动应用程序（使用 IBM Worklight），它通过 SOAP 调用使用一些 Web 服务。我能够让 4 个 Web 服务中的 3 个正常工作、拉回值等。该应用程序以 HTML 格式显示来自 SOAP 响应的值。这基本上是从 SOAP 响应中提取值并显示的方式：

```
var submit = result.invocationResult.Envelope.Body.FinSummary.out.SubServices.ServiceName; 
```

只要我要显示的值是唯一的，这就可以正常工作。最终 Web 服务的 SOAP 响应很长，并且包含重复值。例如，SOAP 响应如下所示：

```
<Envelope>
  <Header/>
    <Body>
      <FinSummary>
        <out>
          <SubServices>
            <....>
            <ServiceName>STRING</ServiceName>
            <....>
          </SubServices>
          <SubServices>
            <....>
            <ServiceName>STRING</ServiceName>
            <....>
          </SubServices>
              <SubServices>
            <....>
            <ServiceName>STRING</ServiceName>
            <....>
          </SubServices>
        </out>
      </FinSummary>
    </Body>
</Envelope> 
```

我需要提取每个字符串，但 SubServices/ServiceName 节点显然不是唯一的。有人知道如何提取这些值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:02:13.090

result.invocationResult.Envelope.Body.FinSummary.out.SubServices 应该被解析为一个数组，所以以下应该工作：

```
var serviceNames = [];
var subServices = result.invocationResult.Envelope.Body.FinSummary.out.SubServices;
for (var i=0;i<subServices.length; i++){
    serviceNames.push(subServices[i].ServiceName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:15:35.290

为什么不使用将 JSON 返回到应用程序的 HTTP SOAP 适配器？

# animation - 为 CCAnimation 调整 Sprite 大小

> ID：12407452
> 
> 赞同：2
> 
> 时间：2012-09-13T13:29:19.423
> 
> 标签：animation, cocos2d-iphone, sprite

我为我的 CCAnimation 使用了一些 png 精灵：

```
self.heroAnim = [CCAnimation animation];

for(int i = 1; i <= count; ++i) {
         [self.heroAnim addFrameWithFilename:[NSString stringWithFormat:@"%@_%d_%d.png", _spriteName, currentLevel, i]];
}

self.walkAction = [CCRepeatForever actionWithAction:[CCAnimate  actionWithAnimation:self.heroAnim restoreOriginalFrame:NO]]; 
```

但现在我必须改变 CCAnimation 的比例（大约大小 * 0.75）你能给我一些建议来实现它吗？我的 CCAnimation 只是单独的 png 文件。我不想物理地调整精灵文件的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:05:35.067

您可以尝试更改`scale`用于运行此动画的精灵的属性。Sprite 应该自动调整动画的所有帧的大小。

# javascript - jQuery blueimp 文件上传：上传 N - 1 个文件到 IE 中的服务器

> ID：12407458
> 
> 赞同：1
> 
> 时间：2012-09-13T13:30:04.560
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, file-upload

我稍微修改了[演示以在我的 Rails 应用程序中使用。](http://blueimp.github.com/jQuery-File-Upload/)这些插件在 Chrome 和 FF 中运行良好，但在 IE 中存在问题。

在 IE（所有版本）中，我一一选择多个文件并开始上传。该插件只上传一个文件。如果我选择单个文件上传，那么什么也不会发生。

这是**main.js的内容**

```
$(function () {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload();

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '/cors/result.html?%s'
        )
    );

    //Reference :
    // https://github.com/blueimp/jQuery-File-Upload/issues/1324
    // https://github.com/blueimp/jQuery-File-Upload/issues/841
    $('#fileupload').bind('fileuploadsubmit', function (e, data) {
        var inputs = data.context.find(':input');
        if (inputs.filter('[required][value=""]').first().focus().length) {
            return false;
        }
        data.formData = inputs.serializeArray();
    });

    $('#fileupload').bind('fileuploadadd', function (e, data) {
        alert('file added');
    });

    $('#fileupload').fileupload('option', {
        url: '/gallery',
        maxFileSize: 5000000,
        acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
        process: [
            {
                action: 'load',
                fileTypes: /^image\/(gif|jpeg|png)$/,
                maxFileSize: 20000000 // 20MB
            },
            {
                action: 'resize',
                maxWidth: 1440,
                maxHeight: 900
            },
            {
                action: 'save'
            }
        ]
    }).bind('fileuploadstop', function (e, data) {
        alert('files uploaded');
      });

}); 
```

从演示 html 中，我删除了除了 + 添加文件和开始上传按钮和进度条相关代码之外的所有内容。

有人可以帮我纠正这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:15:39.957

[最后我在@Jignesh](https://stackoverflow.com/users/936494/jignesh)的帮助下找到了根本原因。

在我们的应用程序中，我们通过提供两种选择要上传的文件的方式来自定义行为：1) + 添加文件按钮 2) 链接

观察到的行为：通过手动单击**+ 添加文件**按钮上传的所有文件都有效并成功上传。

但是，使用**链接**选择的文件不会。原因是**链接**以编程方式触发**+ 添加文件按钮上的***CLICK*事件，IE 不支持该按钮，因此不会为使用链接选择上传的文件发起 POST 请求。

 **控制台还显示错误：在 IE 的情况下，上述观察到的行为被拒绝 SCRIPT5 访问。

参考：

1.  [https://stackoverflow.com/a/1829817](https://stackoverflow.com/a/1829817)
2.  [https://github.com/blueimp/jQuery-File-Upload/issues/1382](https://github.com/blueimp/jQuery-File-Upload/issues/1382)
3.  [https://github.com/blueimp/jQuery-File-Upload/issues/457](https://github.com/blueimp/jQuery-File-Upload/issues/457)**

# python - 如何建模外键引用以使用 YAML 初始化 Django 模型

> ID：12407460
> 
> 赞同：1
> 
> 时间：2012-09-13T13:30:07.863
> 
> 标签：python, django, serialization, yaml

我正在尝试使用以下 yaml 代码初始化一些 Django 模型：

```
- model: app.block &block_1
  pk: 1

- model: app.vertex
  fields:
    x: 804837.500000
    y: 7508312.500000
    z: 326.000000
    block: *block_1

- model: app.vertex
  fields:
    x: 804837.500000
    y: 7508312.500000
    z: 334.000000
    block: *block_1

- model: app.vertex
  fields:
    x: 804837.500000
    y: 7508362.500000
    z: 326.000000
    block: *block_1 
```

但是，当调用“python manage.py loaddata ./data.yaml”来填充数据库时，我收到一条错误消息说

```
alizers/pyyaml.py", line 62, in Deserializer
    raise DeserializationError(e)
DeserializationError: found undefined alias 'block_1'
  in "./data/initial.yaml", line 9, column 12 
```

由于某种原因，无法识别锚块_1。有没有人如何正确放置锚？yaml格式还有什么问题吗？

干杯，马克斯

更新：我尝试从 Django 导出数据以了解语法。我得到了这个结果：

```
$ python manage.py dumpdata app --format=yaml
- fields: {block: 1, x: 1.0, y: 2.0, z: 3.0}
  model: app.vertex
  pk: 1
- fields: {block: 2, x: 4.0, y: 5.0, z: 6.0}
  model: app.vertex
  pk: 2
- fields: {}
  model: app.block
  pk: 1
- fields: {}
  model: app.block
  pk: 2
- fields: {}
  model: app.block
  pk: 3 
```

这很没用。导出似乎没有捕获实际上存在的引用（通过管理界面检查）。

我还使用了在线解析器。当它通过解析器时，Django 引发了一个异常：

```
- block:  &block_1
    model:   app.block
    pk: 1

- vertex:
    model:   app.vertex
    fields:
      x:     804837.500000
      y:     7508312.500000
      z:     326.000000
      block: *block_1 
```

引起

```
File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/management/commands/loaddata.py", line 190, in handle
    for obj in objects:
  File "/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/core/serializers/pyyaml.py", line 62, in Deserializer
    raise DeserializationError(e)
DeserializationError: 'model' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:48:41.067

“*block_1”中的星号是必须的吗？注意我不是 YAML 专家，我只是在[http://yaml-online-parser.appspot.com/](http://yaml-online-parser.appspot.com/)和[http://instantyaml.appspot.com/](http://instantyaml.appspot.com/)中查看了您的数据并将其删除 - 也许它作为那么参考呢？

# javascript - 如何通过使用jQuery单击图像在另一个div中显示图像的一些信息？

> ID：12407463
> 
> 赞同：1
> 
> 时间：2012-09-13T13:30:14.807
> 
> 标签：javascript, jquery

如何通过单击图像在另一个 div 中显示图像的某些信息，并且信息应在单击此图像时显示/隐藏。

```
$(document).ready(function () {
    $(".cell").click(function () {
        $(this).find("span").toggle("slow");
    })
});

<div class="cell">
        <div class="inner">
          <span style="display:none;"> <img src="Images/sachin.jpg" alt="" width="180" height="180" /></span>  <span class="name">Sachin Tendulkar</span>
           <input type="hidden" class="friend_id" value="22 " />
        </div>
    </div> 
```

当我单击特定图像时，我希望该名称显示在另一个 div 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:42:28.597

如果我理解正确，我认为您要问的是单击其图像时要显示的名称？

```
$(document).ready(function () {

    $(".inner>img").click(function () {
        $(this).parent().find("span").toggle("slow");
    })
});

​&lt;div class="cell">
    <div class="inner">
      <img src="Images/sachin.jpg" alt="" width="180" height="180" />  
      <span class="name" style="display: none;">Sachin Tendulkar</span>
      <input type="hidden" class="friend_id" value="22 " />
    </div>
</div> ​​​​​​​​​​​​​ 
```

注意删除`span`图像周围的重新格式化的 html（这不是必需的）以及图像和名称范围的样式属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:48:05.207

尝试：

```
$(.cell).click(function() {
    $(this).toggle("slow");
    $(otherDiv).html( $(this).find('span.name').html() );
    // other processing ...
}); 
```

但这是针对您当前的代码，应该稍微清理一下。所以见下文。

你不应该需要一个跨度来包装你的图像。我会尝试更多类似的东西：

```
<div class="cell">
    <div class="inner">
        <img src="Images/sachin.jpg" data-name="Sachin Tendulkar" alt="" />
        <input type="hidden" name="22" class="friend_id" value="22" />
    </div>
</div> 
```

随着：

```
$('.cell').click(function() {
    var img = $(this).find('img');
    $(img).toggle('slow');
    $(otherDiv).html( $(img).attr('data-name') );
    // other processing ...
}); 
```

# c# - 在 Datagrid 中绑定按钮可见性

> ID：12407465
> 
> 赞同：0
> 
> 时间：2012-09-13T13:30:24.337
> 
> 标签：c#, wpf, datagrid, wpf-controls, wpfdatagrid

我已经在 Datagrid 中定义了一个包含三行和 9 列的初始表。仅当我选择一行然后按下我在功能区选项卡中定义的另一个按钮之后，我的按钮才可见，现在按钮应该是可见的。到目前为止一切正常，但问题是在保存我的表格后，将其关闭并再次打开表格，按钮不再存在。我根据 DataGridCell.IsSelected 设置了 Visibility，它也是一个 BooleanToVisibilityConverter，用于将布尔值转换为 Visibility。谁能帮忙！

XAML：

```
<DataGrid.Resources>
   <BooleanToVisibilityConverter x:Key="BoolToVisConverter" />
</DataGrid.Resources>
<DataGridTemplateColumn x:Name="subgraphtyp" Header="H." Width="50">
   <DataGridTemplateColumn.CellTemplate>
     <DataTemplate>
       <Button Name="btnTable" Visibility="{Binding Path=Hinterlegung, Converter=  
               {StaticResource BoolToVisConverter}}"  Height="20" Width="25" 
               Click="Button_Table_Click">
         <Image Height="16" Source="Subgraph.png" Stretch="Fill" Width="16"/>
       </Button>
     </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

C#: public bool Hinterlegung { get; 放; }

```
private void Button_StartTableModus(object sender, RoutedEventArgs e)
{
  if (DataGrid1.SelectedItem != null && tabItem1.IsSelected)
  {
    TableDataRowStringItem item = (TableDataRowStringItem)DataGrid1.CurrentItem;
    string wert = item.ObjectType;
    string rowName = item.Name;
    if (wert == "Function" || wert == "Process")
    {
      item.Hinterlegung = true;
      if (!tabControl.Items.Contains(tabItem2))
      {
        tabControl.Items.Add(tabItem2);
        tabItem2.Focus();
        tabItem2.IsSelected = true;
        tabItem2.Header = rowName;
        TableTab.Visibility = Visibility.Visible;
        openTabs++;
        DataGrid2.IsReadOnly = false;

        starting_Table_Mod_at_start2V();
      }
    }
  }
}

//this my initial Table
private ObservableCollection<TableDataRowStringItem> tableobject = new      
ObservableCollection<TableDataRowStringItem>();

private void starting_Table_Mod_at_start2V()
{
  List<TableDataRowStringItem> rowstringList = new List<TableDataRowStringItem>();
  TableDataRowStringItem item = new TableDataRowStringItem();
  item.RowNumber = 1; item.saveFlag = true; item.ObjectType = "E"; item.Name = "E"; 
  item.PredecessorRowNumber = "0"; rowstringList.Add(item);
  item = new TableDataRowStringItem();
  item.RowNumber = 2; item.ObjectType = "Function"; item.Name = "Function";       
  item.PredecessorRowNumber = "1"; rowstringList.Add(item);
  item = new TableDataRowStringItem();
  item.RowNumber = 3; item.ObjectType = "E"; item.Name = "E";   
  item.PredecessorRowNumber = "2"; rowstringList.Add(item);

  for (int i = 0; i < rowstringList.Count; i++)
  {
    tableobject.Add(rowstringList[i]); 
  }
  DataGrid2.ItemsSource = tableobject;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:17:05.043

您的按钮的可见性绑定到您的 Hinterlegung 变量，该变量的默认值为 false。因此，据我所知，您在此方法中将其更改为 true - Button_StartTableModus。但是，当您重新初始化时，该值将恢复为 false，因此您需要将其设置为 true。

# sql - Oracle SQL 帮助以两种不同的方式对同一事物进行计数，但具有共同的分组

> ID：12407467
> 
> 赞同：4
> 
> 时间：2012-09-13T13:30:31.453
> 
> 标签：sql, oracle

我有一个包含每个条目的表`incident_id`，`status`（假设是`open`或`closed`，`date_raised`（日期）和`closure_date`（日期）。

我想显示一个表格，计算在关闭日期关闭的事件数量（因此计数`incident_id`where `status='closed' and closure_date is not null`），以及保持打开的事件数量（在同一天的`incident_id`where计数。`status='open'`

如果我把你弄糊涂了，一个看起来像这样的表：

```
 ______________________________________________________________________________
| closure date | count of incidents closed | count of incidents remaining open |
|--------------|---------------------------|-----------------------------------|
| 01-Sep-12    | 5                         | 14                                |
| ...          | ...                       | ...                               | 
```

我已经管理了一个表，它可以像这样计算关闭的事件数：

```
SELECT COUNT(incident_id)
WHERE closure_date IS NOT NULL AND status="open"
GROUP BY closure_date 
```

我已经尝试了几个小时来让其他计数工作，但到目前为止还不能:-(

编辑：这是我拥有的表的示例：

```
 ___________________________________________________
| incident_id | status | date_raised | closure_date |
|-------------|--------|-------------|--------------|
| 1           | closed | 01-Sep-12   | 01-Sep-12    |
| 2           | open   | 30-Aug-12   | (null)       |
| 3           | open   | 02-Sep-12   | (null)       |
| 4           | closed | 02-Sep-12   | 05-Sep-12    |
| ...         | ...    | ...         | ...          | 
```

会给桌子：

```
 ______________________________________________________________________________
| closure date | count of incidents closed | count of incidents remaining open |
|--------------|---------------------------|-----------------------------------|
| 01-Sep-12    | 1                         | 1                                 |
| 05-Sep-12    | 1                         | 2                                 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:33:14.893

```
SELECT 
COUNT(*) as closed,
(SELECT COUNT(t2.incident_id) FROM TABLE t2 WHERE t2.status = 'open' and t2.raised_date < t1.closure_date) as open
FROM TABLE t1
WHERE 
t1.status = 'closed'
GROUP BY t1.closure_date 
```

或相同的想法

```
WITH opened AS (SELECT COUNT(t2.incident_id) as cnt FROM table t2 WHERE STATUS = 'open' )
SELECT 
   to_char(closure_date, 'yyyy/mm/dd') as dte
   count(*) as closed,
   opened.cnt as opens
FROM table, opened
WHERE status = 'closed'
GROUP BY to_char(closure_date, 'yyyy/mm/dd'), opened.cnt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:23:58.717

在我看来，对于每个日期，您都希望获得迄今为止已关闭的问题数量以及在该日期*之前*提出的仍未解决的问题数量，对吗？所以你可能想要这样的东西：

```
SELECT t1.closure_date, COUNT(t1.incident_id)
     , ( SELECT COUNT(t2.incident_id) FROM incident_table t2
          WHERE t2.status = 'open'
            AND t2.raised_date < t1.closure_date )
  FROM incident_table t1
 WHERE t1.closure_date IS NOT NULL
   AND t1.status = 'closed'
 GROUP BY t1.closure_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:32:30.903

你应该尝试这样的事情：

```
SELECT 
closure_date,
SUM(CASE WHEN status="open" 
         THEN 1 ELSE 0 END) AS "count of incidents open",
SUM(CASE WHEN  status="closed" 
         THEN 1 ELSE 0 END) AS "count of incidents closed"
FROM YourTable
WHERE closure_date IS NOT NULL
GROUP BY closure_date 
```

# image - Wooslider/Flexslider 响应图像不工作

> ID：12407473
> 
> 赞同：1
> 
> 时间：2012-09-13T13:30:43.107
> 
> 标签：image, wordpress, flexslider

我正在为客户制作一个投资组合网站，因此让响应式图像发挥作用很重要。在我将设计转换为 WordPress 之前，一切都 100% 正常工作，但我刚刚安装了名为 Wooslider 的 WordPress 插件，它基于 Flexslider。它有一些图像问题，将它们炸毁，直到它们真正像素化，它不断扩大图像超过它们保存的大小。

有两种方法可以使用此插件制作幻灯片，一种是将所有附加图像添加到帖子和页面，或者通过创建每张幻灯片（就像您对帖子所做的那样，并按类别将它们全部连接起来）

我玩弄了插件的 CSS，并解决了附加图像创建的幻灯片的问题，他们使用了 width: 100% 而不是 max-width: 100% - 我认为其他地方的另一个属性就是这种情况，但到目前为止还没有运气。我也尝试过在某些地方添加 height: auto ，但仍然没有运气。

这是插件的两个 CSS 代码

弹性滑块 css：

```
 /*
 * jQuery FlexSlider v2.1
 * http://www.woothemes.com/wooslider/
 *
 * Copyright 2012 WooThemes
 * Free to use under the GPLv2 license.
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * Contributing author: Tyler Smith (@mbmufffin)
 */

/* Browser Resets */
.wooslider-container a:active,
.wooslider a:active,
.wooslider-container a:focus,
.wooslider a:focus  {outline: none;}
.slides,
.wooslider-control-nav,
.wooslider-direction-nav {margin: 0; padding: 0; list-style: none;} 

/* wooslider Necessary Styles
*********************************/ 
.wooslider {margin: 0 auto; padding: 0;}
.wooslider .slides > li {display: none; -webkit-backface-visibility: hidden;} /* Hide the slides before the JS is loaded. Avoids image jumping */
.wooslider .slides img {max-width: 100%; display: block;}
.wooslider-pauseplay span {text-transform: capitalize;}

/* Clearfix for the .slides element */
.wooslider .slides:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; } 
html[xmlns] .wooslider .slides { display: block; } 
* html .wooslider .slides { height: 1%; }

/* No JavaScript Fallback */
/* If you are not using another script, such as Modernizr, make sure you
 * include js that eliminates this class on page load */
.no-js .wooslider .slides > li:first-child { display: block; }

/* wooslider Default Theme
*********************************/
.wooslider {margin: 0 0 60px; background: #fff; border: 4px solid #fff; position: relative; -webkit-border-radius: 4px; -moz-border-radius: 4px; -o-border-radius: 4px; border-radius: 4px; -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.2); -moz-box-shadow: 0 1px 4px rgba(0,0,0,.2); -o-box-shadow: 0 1px 4px rgba(0,0,0,.2); box-shadow: 0 1px 4px rgba(0,0,0,.2); zoom: 1;}
.wooslider-viewport {max-height: 2000px; -webkit-transition: all 1s ease; -moz-transition: all 1s ease; transition: all 1s ease;}
.loading .wooslider-viewport {max-height: 300px;}
.wooslider .slides {zoom: 1;}

.wooslider .carousel li {margin-right: 5px}

/* Direction Nav */
.wooslider-direction-nav a {width: 30px; height: 30px; margin: -20px 0 0; display: block; background: url(../images/bg_direction_nav.png) no-repeat 0 0; position: absolute; top: 50%; cursor: pointer; text-indent: -9999px; opacity: 0; -webkit-transition: all .3s ease; -moz-transition: all .3s ease; -o-transition: all .3s ease; transition: all .3s ease;}
.wooslider-direction-nav .wooslider-next {background-position: 100% 0; right: -36px; }
.wooslider-direction-nav .wooslider-prev {left: -36px;}
.wooslider:hover .wooslider-next {opacity: 0.8; right: 5px;}
.wooslider:hover .wooslider-prev {opacity: 0.8; left: 5px;}
.wooslider:hover .wooslider-next:hover, .wooslider:hover .wooslider-prev:hover {opacity: 1;}
.wooslider-direction-nav .disabled {opacity: .3!important; filter:alpha(opacity=30); cursor: default;}

/* Pause/Play */
.wooslider-pauseplay a  { width: 30px; height: 30px; text-indent: -9999px; background: url(../images/bg_play_pause.png) no-repeat 110% 0; position: absolute; bottom: 5px; left: 5px; opacity: 0.8; z-index: 9999; cursor: pointer; }
.wooslider-pauseplay a:hover  { opacity: 1; }
.wooslider-pauseplay a.wooslider-play { background-position: 0 0; }

/* Control Nav */
.wooslider-control-nav {width: 100%; position: absolute; top: 100%; margin-top: 10px!important; text-align: center; z-index: 9999; }
.wooslider-control-nav li {margin: 0 6px; display: inline-block; zoom: 1; *display: inline;}
.wooslider-control-paging li a {width: 11px; height: 11px; display: block; background: #666; background: rgba(0,0,0,0.5); cursor: pointer; text-indent: -9999px; -webkit-border-radius: 20px; -moz-border-radius: 20px; -o-border-radius: 20px; border-radius: 20px; box-shadow: inset 0 0 3px rgba(0,0,0,0.3);}
.wooslider-control-paging li a:hover { background: #333; background: rgba(0,0,0,0.7); }
.wooslider-control-paging li a.wooslider-active { background: #000; background: rgba(0,0,0,0.9); cursor: default; }

.wooslider-control-thumbs {margin: 5px 0 0; position: static; overflow: hidden;}
.wooslider-control-thumbs li {width: 25%; float: left; margin: 0;}
.wooslider-control-thumbs img {max-width: 100%; display: block; opacity: .7; cursor: pointer;}
.wooslider-control-thumbs img:hover {opacity: 1;}
.wooslider-control-thumbs .wooslider-active {opacity: 1; cursor: default;}

@media screen and (max-width: 860px) {
  .wooslider-direction-nav .wooslider-prev {opacity: 1; left: 0;}
  .wooslider-direction-nav .wooslider-next {opacity: 1; right: 0;}
} 
```

第二个插件 CSS

```
 .wooslider .slides > li { list-style: none; float: left; }
.wooslider .slides img { max-width: 100%; border: 0; }
body .wooslider.wooslider-type-posts img, body .wooslider.wooslider-type-attachments img { max-width: 100%; border: 0; padding: 0; margin: 0; height: auto; }
body .wooslider .slides, body .wooslider .wooslider-control-nav, body .wooslider .wooslider-direction-nav { padding: 0; margin: 0; }
body .wooslider .wooslider-control-nav li, body .wooslider .wooslider-direction-nav li { list-style: none; }

/* Layout styles for the "Posts" slideshow type. */

/* Text Left and Text Right Options */
.wooslider .layout-text-left img { float: right; width: 40%; }
.wooslider .layout-text-left .slide-excerpt { float: left; width: 50%; }

.wooslider .layout-text-right img { float: left; width: 40%; }
.wooslider .layout-text-right .slide-excerpt { float: right; width: 50%; }

/* Full overlay enabled */
.wooslider .overlay-full  { position: relative; }
.wooslider .overlay-full .slide-excerpt { background: #000; opacity: 0.8; color: #FFF; position: absolute; padding: 1em; }
.wooslider .overlay-full .slide-excerpt .slide-title { color: #FFF; }
.wooslider .overlay-full img { float: none; width: 100%; height: auto; }

body .wooslider .overlay-full.layout-text-left .slide-excerpt { left: 0; top: 0; bottom: 0; width: 30%; padding: 1em; overflow: hidden; }
body .wooslider .overlay-full.layout-text-right .slide-excerpt { right: 0; top: 0; bottom: 0; width: 30%; padding: 1em; overflow: hidden; }
body .wooslider .overlay-full.layout-text-top .slide-excerpt { left: 0; right: 0; top: 0; height: auto; padding: 1em; overflow: hidden; }
body .wooslider .overlay-full.layout-text-bottom .slide-excerpt { left: 0; right: 0; bottom: 0; height: auto; padding: 1em; overflow: hidden; }

/* Natural overlay enabled */
.wooslider .overlay-natural  { position: relative; }
.wooslider .overlay-natural .slide-excerpt { color: #FFF; position: absolute; float: left; padding: 0; }
.wooslider .overlay-natural .slide-excerpt .slide-title { color: #FFF; background: #000; opacity: 0.8; float: left; padding: 0.5em 1em; margin: 0; }
.wooslider .overlay-natural .slide-excerpt p { color: #FFF; background: #000; opacity: 0.8; float: left; padding: 0.5em 1em; }
.wooslider .overlay-natural img { float: none; width: 100%; height: auto; }

body .wooslider .overlay-natural.layout-text-left .slide-excerpt { left: 0; top: 10%; overflow: hidden; }
body .wooslider .overlay-natural.layout-text-right .slide-excerpt { float: right; right: 0; top: 10%; overflow: hidden; }
body .wooslider .overlay-natural.layout-text-right .slide-excerpt .slide-title, 
body .wooslider .overlay-natural.layout-text-right .slide-excerpt p { float: right; }
body .wooslider .overlay-natural.layout-text-top .slide-excerpt { left: 0; top: 0; overflow: hidden; }
body .wooslider .overlay-natural.layout-text-bottom .slide-excerpt { left: 0; bottom: 0; overflow: hidden; }

/* "Slides" slideshow type */
body .wooslider .slide-content { margin: 0.5em; padding: 0; border: 0; width: auto; height: auto; }

/* Slide widget */
.widget_wooslider_slideshow_attachments .wooslider-direction-nav a  { padding: 0; }

body .wooslider.wooslider-type-posts img, body .wooslider.wooslider-type-attachments img, body .wooslider.wooslider-type-attachments img { max-width: 100%; border: none; height: auto;}
body .wooslider-control-nav { margin: 0; padding: 0; }
body .wooslider-control-nav img { border: 0; background: none; margin: 0; padding: 0; }
body .wooslider-direction-nav, body .wooslider-direction-nav li { list-style: none; margin: 0; padding: 0; }
body .wooslider.wooslider-type-slides .has-featured-image img.featured-image { max-width: 100%; height: auto; }
body .wooslider.wooslider-type-slides img { max-width: 100%; height: auto; } 
```

任何帮助将不胜感激，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:32:53.840

ichabod1799 提供的上述 CSS 覆盖对我来说非常有效。

```
.slides img { max-width: 100%; height: auto; width: auto; margin: 0 auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:30:19.850

从尝试解决此问题的阅读中看来，flexslider 在某些时候向包含图像高度和宽度的图像添加了一个样式属性，导致任何旨在改变大小的 CSS 都变得无用。

我只是在调用初始化 flexslider 之后添加了这个：

```
$(this).find('li img').removeAttr('style'); 
```

这会从图像中删除任何样式属性，然后可以通过 CSS 控制宽度。

# c# - 如何正确使用 SPServiceApplicationCollection？

> ID：12407475
> 
> 赞同：2
> 
> 时间：2012-09-13T13:30:44.653
> 
> 标签：c#, sharepoint

我正在尝试编写一个小控制台应用程序来显示 SharePoint 2010 网站上正在运行的服务应用程序的列表。我使用过 Microsoft.SharePoint 和 Microsoft.SharePoint.Administration，但到目前为止我运气不佳。下面是我一直在摆弄的东西。谁能给我一些关于如何正确使用 SPServiceApplicationCollection 的指示？

提前致谢！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.ServiceProcess;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Administration;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {

        SPServiceApplicationCollection services = new      SPServiceApplicationCollection(String, SPFarm.Local.Services);
        foreach (SPServiceApplication service in services)
        {
            Console.WriteLine(service.Name);

            if (service is SPWebService)
            {
                SPWebService webService = (SPWebService)service;

                foreach (SPWebApplication webApp in webService.WebApplications)
                {
                    Console.WriteLine(webApp.Name);
                    Console.ReadLine();
                }

            }

        }
    }
}
} 
```

**编辑** 经过一番挖掘/询问后，我想出了一个粗略的解决方案来解决我想要的问题。为了将来参考/希望做这种事情的任何其他人，我可以通过执行以下操作获取已部署服务器的列表以及应用程序名称：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.ComponentModel;
    using System.ServiceProcess;
    using Microsoft.SharePoint;
    using Microsoft.SharePoint.Administration;
    using Microsoft.SharePoint.Administration.Health;

    namespace ConsoleApplication1
    {
    class Program
    {
    static void Main(string[] args)
    {
        var solution = SPFarm.Local.Solutions["Your Service Application Name.wsp"];
        string serverName = string.Empty;
        foreach (SPServer server in solution.DeployedServers)
        {
            serverName += server.Name;
            Console.WriteLine(server.Name);
        }

        if (solution != null)
        {
            if (solution.Deployed)
            {
                Console.WriteLine("{0} is currently deployed on: {1}", solution.Name, serverName);
                Console.ReadLine();
            }
            else
            {
                Console.WriteLine("Error!  Solution not deployed!");
                Console.ReadLine();
            }
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:59:10.620

经过一番挖掘/询问后，我想出了一个我想要的粗略解决方案。为了将来参考/希望做这种事情的任何其他人，我可以通过执行以下操作获取已部署服务器的列表以及应用程序名称：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.ServiceProcess;
using Microsoft.SharePoint;
using Microsoft.SharePoint.Administration;
using Microsoft.SharePoint.Administration.Health;

namespace ConsoleApplication1
{
class Program
{
static void Main(string[] args)
{
    var solution = SPFarm.Local.Solutions["Your Service Application Name.wsp"];
    string serverName = string.Empty;
    foreach (SPServer server in solution.DeployedServers)
    {
        serverName += server.Name;
        Console.WriteLine(server.Name);
    }

    if (solution != null)
    {
        if (solution.Deployed)
        {
            Console.WriteLine("{0} is currently deployed on: {1}", solution.Name, serverName);
            Console.ReadLine();
        }
        else
        {
            Console.WriteLine("Error!  Solution not deployed!");
            Console.ReadLine();
        }
    }
  }
 }
} 
```

# php - php 或 mysql 时间戳关闭 7 小时

> ID：12407478
> 
> 赞同：1
> 
> 时间：2012-09-13T13:31:04.633
> 
> 标签：php, mysql, timestamp

我目前在一些共享主机上，当我使用`NOW()`或`CURRENT_TIMESTAMP`在我的 php sql 查询中插入的数据落后 7 小时。

我可以在 PHP 中做些什么来纠正这个问题吗？

我努力了

```
date_default_timezone_set('Europe/Dublin'); 
```

但这似乎没有什么不同。

输出：

```
php time: 1347544854 
date: 2012-09-13 14:0054 UTC 
mysql array(3) { 
["zone"]=> string(6) "SYSTEM" 
["utcts"]=> string(19) "2012-09-13 14:00:54" 
["now"]=> string(19) "2012-09-13 07:00:54" 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:35:38.223

MySQL 时区与 PHP 时区不同。

这是[MySQL 时区参考](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)，向您展示如何设置它。

对于懒人：

```
mysql> SET time_zone = timezone; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:35:32.810

使用 mysql 函数时，将使用 MySQL 中设置的时区。您可以在查询中使用它来更改时区：

```
SET time_zone = 'Europe/Dublin' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:40:53.127

- 不是答案，但评论太长 -
请尝试（使用正确的 mysql 连接凭据）

```
<?php
echo "php\n";
echo 'time: ', time(), "\n";
echo 'date: ', date('Y-m-d H:is T', time()), "\n";

echo "mysql\n";
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
foreach( $pdo->query('SELECT @@time_zone as zone, UTC_TIMESTAMP() as utcts, Now() as now', PDO::FETCH_ASSOC) as $row ) {
    foreach( $row as $k=>$v) {
        echo $k, '=', $v, "\n";
    }
} 
```

输出应该类似于

```
php
time: 1347543592
date: 2012-09-13 15:3952 CEST
mysql
zone=SYSTEM
utcts=2012-09-13 13:39:53
now=2012-09-13 15:39:53 
```

请将您机器上的输出添加到您的原始问题中...

# java - 为什么 Files.probeContentType 返回 null

> ID：12407479
> 
> 赞同：22
> 
> 时间：2012-09-13T13:31:08.083
> 
> 标签：java, macos

我在 mac 上使用 java se7，oracle 预览版。

我的问题是“Files.probeContentType”返回null ...是否有可能是由于se7 for mac的早期状态？我的代码：

```
if(directory == null) return;
String content = null;
try {
    content = Files.probeContentType(directory.toPath());
} catch (IOException e) {
    JOptionPane.showMessageDialog(main, e.toString());
    return;
}
if(content == null)
{
    return;
}
else if(content.contains("image"))
{
    main.pctviewer.setImage(directory);
} 
```

该文件的名称是：

“/Users/admin/Desktop/temp/q12/formulare/Bildschirmfoto 2012-09-11 um 17.57.59.png”

如果我将鼠标悬停在文件“文件路径= Unis-path（id：145）”上方，则在eclipse中的调试模式下为红色

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-22T15:57:34.730

我再次向 oracle 报告了这个错误，希望他们能够支持 jdk8 解决方案（我不抱太大希望，但你永远不知道）。

[同时，您可以使用我自己在https://github.com/jeantil/jdk7-mimeutils](https://github.com/jeantil/jdk7-mimeutils)上提供的 FileTypeDetector 反向移植，将 maven 项目打包到一个 jar 中，该 jar 可以添加到您的类路径中以启用 mime 类型检测。我还提供了一个 mime.types 文件放入您的主文件夹中，以便检测正常工作。我从某个版本的 apache 中提取了 mime.types 文件，所以它非常完整。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-21T06:22:45.977

我发现 FileTypeDetector 在 OS X 上有错误：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7133484](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7133484)

显然这将在 Java 8 中修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-13T05:24:35.127

使用以下方法在 Java 8 中获取 mime 类型的文件：

```
String location = "/Users/user/Desktop/leaf.jpg";
File file = new File(location);
Path source = Paths.get(location);
MimetypesFileTypeMap m = new MimetypesFileTypeMap(source.toString());
System.out.println( m.getContentType(file) ); 
```

上述代码的输出是：'image/jpg'

# facebook-graph-api - facebook graph api：如何正确使用我？

> ID：12407482
> 
> 赞同：0
> 
> 时间：2012-09-13T13:31:27.460
> 
> 标签：facebook-graph-api

我正在尝试以与使用 pages.isFan (REST API) 相同的方式使用 /me/likes/pageID。但它总是使用我创建访问令牌的用户/页面，而不是当前的活动用户。

无法理解这个问题，感谢任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:11:45.093

> [来自评论] 但我真的需要创建一个应用程序来“只是”检查用户是否是我自己页面的粉丝吗？甚至询问他的授权？

是的，无论如何你都需要一个应用程序。

[`signed_request`](https://developers.facebook.com/docs/authentication/signed_request/)如果您在 Facebook 内将您的应用程序作为画布或页面选项卡应用程序运行，那么您会直接从参数中获取当前用户是否喜欢该应用程序正在运行的 Facebook 粉丝页面（！）的信息。

如果您想查询其他页面的此信息，和/或您的应用程序在 Facebook 之外运行，那么您必须先让用户连接到您的应用程序并请求允许阅读他的喜欢，然后才能获取此信息。

有关后一种情况的信息，请参阅[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)、[https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms](https://developers.facebook.com/docs/authentication/permissions/#user_friends_perms)、[https://developers.facebook。 com/docs/reference/api/user/#likes](https://developers.facebook.com/docs/reference/api/user/#likes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:58:31.270

很简单：使用新的 Graph API，访问令牌的所有者是`me`. 您可以通过将访问令牌粘贴到[调试器](https://developers.facebook.com/tools/debug)中来查看这一点。

每次他们访问您的网站时，您都应该对您的用户进行[身份验证并以他们的名义获得一个访问令牌。](https://developers.facebook.com/docs/authentication)然后在您进行查询时仅使用此访问令牌。

[如果您使用Facebook SDK](https://developers.facebook.com/docs/sdks)之一，此过程最为简单。

# python - 对多个消费者的 RPC 调用

> ID：12407485
> 
> 赞同：3
> 
> 时间：2012-09-13T13:31:51.453
> 
> 标签：python, rabbitmq, messaging, pika

我有一个监听消息的消费者，如果消息流超过消费者可以处理的范围，我想启动这个消费者的另一个实例。

但我也希望能够从消费者那里轮询信息，我的想法是我可以使用 RPC 通过使用扇出交换从生产者那里请求这些信息，这样所有生产者都会得到 RPC 调用。

我的问题首先是这是否可能，其次是否合理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T09:08:12.780

如果问题是“是否可以向多个服务器发送 RPC 消息？” 答案是肯定的。

当您构建 RPC 调用时，您将一个临时队列附加到消息（通常在 header.reply_to 中，但您也可以使用内部消息字段）。这是 RPC 目标将发布其答案的队列。

当您将 RPC 发送到单个服务器时，您可以在临时队列中接收多个消息：这意味着 RPC 应答可以由以下方式形成：

*   来自单一来源的单一消息
*   来自单一来源的多条消息
*   来自多个来源的不止一条消息

在这种情况下出现的问题是

*   你什么时候停止听？如果您知道 RPC 服务器的数量，您可以等到每个服务器都向您发送答案，否则您必须实现某种形式的超时
*   你需要追踪答案的来源吗？您可以在消息中添加一些特殊字段以保留此信息。消息顺序也是如此。

只是一些代码来展示如何做到这一点（带有 Pika 库的 Python）。注意，这远非完美：最大的问题是当你得到一个新的答案时你应该重置超时。

```
 def consume_rpc(self, queue, result_len=1, callback=None, timeout=None, raise_timeout=False):
        if timeout is None:
            timeout = self.rpc_timeout

        result_list = []

        def _callback(channel, method, header, body):
            print "### Got 1/%s RPC result" %(result_len)
            msg = self.encoder.decode(body)
            result_dict = {}
            result_dict.update(msg['content']['data'])
            result_list.append(result_dict)

            if callback is not None:
                callback(msg)

            if len(result_list) == result_len:
                print "### All results are here: stopping RPC"
                channel.stop_consuming()

        def _outoftime():
            self.channel.stop_consuming()
            raise TimeoutError

        if timeout != -1:
            print "### Setting timeout %s seconds" %(timeout)
            self.conn_broker.add_timeout(timeout, _outoftime)

        self.channel.basic_consume(_callback, queue=queue, consumer_tag=queue)

        if raise_timeout is True:
            print "### Start consuming RPC with raise_timeout"
            self.channel.start_consuming()
        else:
            try:
                print "### Start consuming RPC without raise_timeout"
                self.channel.start_consuming()
            except TimeoutError:
                pass

        return result_list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:32:41.277

经过一番研究，这似乎是不可能的。如果您查看 RabbitMQ.com 上的教程，您会发现调用有一个 id，据我所知，它会被消耗掉。

我选择了另一种方式，即读取日志文件并聚合数据。

# maven - Maven2 - 仅部署主 pom

> ID：12407487
> 
> 赞同：3
> 
> 时间：2012-09-13T13:32:06.360
> 
> 标签：maven, maven-2

我有一个主 POM，其中定义了许多模块。

我想对主 POM 进行一些小改动，并将新的主 POM 部署到我们的 nexus 实例。

一切都已配置好以允许这样做，但是当我执行 mvn clean install deploy 时，所有模块也都已构建和部署。我不想要这个。

我如何告诉 maven 只部署主 POM 而不是构建/部署模块？这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T13:34:16.547

使用此选项：

```
-N,--non-recursive            Do not recurse into sub-projects 
```

参考： [http ://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html)

# ios - 在 Xcode 4.3.3 中重命名 .xib 文件是正确的方法吗？

> ID：12407491
> 
> 赞同：1
> 
> 时间：2012-09-13T13:32:20.963
> 
> 标签：ios, ios4, xcode4.3

我想将文件重命名为 .h、.m。.xib 改成我自己的名字。

我创建了一个选项卡式应用程序，我单击了源浏览器，并更改了

```
FirstViewController.h to FVC.h
FirstViewController.m to FVC.m 
```

并更改了各自的位置以包含 FVC.h。

这个对我有用。但我想知道的是，这是我可以继续使用的正确方法吗？..这种方法会有任何隐藏的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:27:05.407

唯一的“陷阱”是，如果您在代码中使用 nibName（即 initWithNibName:)，您显然也需要更改它。我个人对这个问题有所了解 - 应用程序启动然后在它尝试推动那个损坏的对象时崩溃。

# c# - 如何在 Project.Test 上获取 Project.Web BaseDirectory？

> ID：12407494
> 
> 赞同：0
> 
> 时间：2012-09-13T13:32:28.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0

我在 Project.Test 上运行我的测试规范，我可以找到这个项目目录：

```
var path = AppDomain.CurrentDomain.BaseDirectory; 
```

但我想在测试项目上找到 Project.Web 目录，我尝试过这个例子，但它不起作用:(

```
BaseDirectory = AppDomain.CurrentDomain.GetAssemblies().Where(s => s.GetType().Namespace.ToLower() == "system.web.mvc").Single().Location; 
```

你有什么想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:34:45.480

我用这段代码解决了我的问题：

```
string webDir = ((FileSystemInfo)(Directory.GetParent(AppDomain.CurrentDomain.BaseDirectory).Parent.Parent.GetDirectories("Project.Web", SearchOption.AllDirectories)[0])).FullName; 
```

# objective-c - 缓存 UITableView 中使用的数组数据以节省内存

> ID：12407495
> 
> 赞同：1
> 
> 时间：2012-09-13T13:32:30.307
> 
> 标签：objective-c, ios, json, core-data, memory-management

我正在从服务器检索一个 JSON 字符串，并让 RestKit 解析它并将其映射到对象并返回对象数组以显示在`UITableView`. 不幸的是，有 3 个类似数据的数组分布在 3 个`UITableView`使用`UITabView`.

我正在将对象保存到 coredata 中，但无法弄清楚如何限制加载到数组中内存中的对象数量，因为它们当前会在用户刷新 tableviews 时增长。我不能使用 a`NSFetchedResultesController`因为我需要访问数据数组来随意添加和删除对象。

有点坚持从这里去哪里，任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:33:37.440

获取前 20 个重新加载的 tableview。对于下一批，数组中最后一个对象的下一个 20

```
NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(caseInsensitiveCompare:)];
[request setSortDescriptors:[NSArray arrayWithObject:sort]]; 
```

并使用 fetchLimit 属性

```
[request setFetchLimit:20]; 
```

# azure - 为虚拟机指定的 Azure OS 磁盘大小太大？

> ID：12407500
> 
> 赞同：4
> 
> 时间：2012-09-13T13:32:47.273
> 
> 标签：azure, virtual-machine, vhd, azure-virtual-machine

我有 VHD 文件（实际上是从 Microsoft 下载的：http: [//www.microsoft.com/betaexperience/pd/BIVHD/enus/](http://www.microsoft.com/betaexperience/pd/BIVHD/enus/)）。我想在 Azure 上将它作为 VM (IaaS) 运行。当我使用以下命令将文件上传到 Azure 时，该文件为 60 GB：

csupload Add-Disk -Destination "http://xxx.blob.core.windows.net/vhds/SQLImage2012Disk.vhd" -Label SQLImage2012Disk.vhd -LiteralPath "E:\SQL Image 2012\SQL Image 2012\Virtual Hard Disks\ SQLImage2012.vhd"-操作系统 Windows

我看到它是上传的，但是大小是250 GB！！！？

为什么规模扩大了这么多？
由于大小为 250 GB，因此在尝试从中配置虚拟机时收到此错误消息：

为虚拟机 xxx 指定的操作系统磁盘大小太大。支持的最大 OS 磁盘大小为 128 GB，但指定的 VHD 大小为 250 GB。

问题是：为什么大小从 60 GB 变为 250 GB？我可以做些什么来设法从 Azure 中的这个磁盘预配 VM？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:06:36.043

评论的答案是答案：“从您的描述看来，这是一个动态 VHD，最大大小设置为 250 GB，使用了 60 GB。”

# .net - .NET：给定服务名称，如何获取 Process 对象？

> ID：12407503
> 
> 赞同：1
> 
> 时间：2012-09-13T13:33:03.607
> 
> 标签：.net, service, process, system.diagnostics

给定服务名称（例如`SNMPTRAP`），我如何获取`System.Diagnostics.Process`对象？

到目前为止，我已经找到了[System.ServiceProcess.ServiceController](http://msdn.microsoft.com/en-us/library/7fs05y7h%28v=vs.100%29)类和[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process%28v=vs.100%29.aspx)类，但似乎无法从另一个中得到一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:12:20.373

看起来 WMI 无需求助于互操作/Win32 即可工作。下面是一个概念验证：

```
 private static Process ProcessFromServiceName(string serviceName)
    {
        // Note abuse of foreach as a lazy way of getting first item.
        // Also assumes that the first service in the collection is the correct one.

        string queryText = String.Format(   CultureInfo.InvariantCulture,
                                            "SELECT * FROM Win32_Service WHERE Name='{0}'",
                                            serviceName);
        var query = new SelectQuery(queryText);
        var searcher = new ManagementObjectSearcher(query);
        foreach (ManagementObject service in searcher.Get())
        {
            int processId = (int)(uint)service.Properties["ProcessId"].Value;
            Process process = Process.GetProcessById(processId);
            return process;
        }
        return null;
    } 
```

# iphone - 区分 iPhone 和 iPad

> ID：12407505
> 
> 赞同：1
> 
> 时间：2012-09-13T13:33:13.233
> 
> 标签：iphone, ios, ipad, mobile, navigation

我在我的移动网站上工作，我已经有了这个代码：

```
<script type="text/javascript"> // <![CDATA[
    if ( (navigator.userAgent.indexOf('Android') != -1) ) {
        document.location = "android.html";
    } // ]]>
</script> 
```

这会将 android 用户从当前页面转移到 android 自己的专用页面。

我想做的是同样的事情，但对于 iphone / ipad。我希望 iphone / ipod touch 登陆 iphone.html 和 ipad 登陆 ipad.html 为两者显示不同的内容。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:46:15.477

您可以将当前方法扩展到其他用户代理：

```
var iphone = ((window.navigator.userAgent.match('iPhone'))||(window.navigator.userAgent.match('iPod')))?true:false;
var ipad = (window.navigator.userAgent.match('iPad'))?true:false;
if(iphone){
 document.location = 'iphone.html';
}
if(ipad){
 document.location = 'ipad.html';
} 
```

# c# - 如何使用 BackgroundTransferService 上传图像并获取服务器响应？

> ID：12407510
> 
> 赞同：0
> 
> 时间：2012-09-13T13:33:19.907
> 
> 标签：c#, windows-phone-7

如何使用 wp7 BackgroundTransferService 上传图像并获取服务器响应？

```
 var transferRequest = new BackgroundTransferRequest(new Uri(Global.profileUploadServerUrl, UriKind.Absolute));
            transferRequest.Method = "POST";
            transferRequest.UploadLocation = new Uri(@"/shared\transfers/file.jpg", UriKind.Relative);
            transferRequest.TransferPreferences = TransferPreferences.AllowCellularAndBattery;
            transferRequest.Headers["Content-Type"] = "multipart/form-data";
            transferRequest.TransferStatusChanged += new EventHandler<BackgroundTransferEventArgs>(transferRequest_TransferStatusChanged);
            transferRequest.TransferProgressChanged += new EventHandler<BackgroundTransferEventArgs>(transferRequest_TransferProgressChanged);

            BackgroundTransferService.Add(transferRequest);

static void transferRequest_TransferProgressChanged(object sender, BackgroundTransferEventArgs e)
    {
       // throw new NotImplementedException();
    }

static void transferRequest_TransferStatusChanged(object sender, BackgroundTransferEventArgs e)
{
    BackgroundTransferRequest request = sender as BackgroundTransferRequest;
    if (request.TransferStatus == TransferStatus.Completed)
    {
        BackgroundTransferService.Remove(request);
        if (request.StatusCode == 201)
        {
            MessageBox.Show("Upload completed.");
        }
        else
        {
            MessageBox.Show("An error occured during uploading. Please try again later." + request.StatusCode.ToString() + "/ " + request.TransferError);
        }
    }
} 
```

图像加载似乎通过了，但服务器返回状态 206。以及如何从服务器获得响应？这里看了示例，但我不明白。 [在这个例子](http://olivierlefebvre.tumblr.com/post/9330062497/upload-using-backgroundservice-and-get-the-server)中，有一行：

```
 request.DownloadLocation = new Uri (responsePath, UriKind.RelativeOrAbsolute); 
```

那有必要指定吗？如果我这样做，它将指定相同的 url，它会失败。一般来说，卸载图像服务器后的想法应该返回带有图像链接的响应。但他会出来答案 206。如何得到答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T06:46:57.637

Excerpt from the [BackgroundTransferRequest.StatusCode Property](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.backgroundtransfer.backgroundtransferrequest.statuscode%28v=vs.105%29.aspx) topic on MSDN:

> This property contains the HTTP status code returned from the server with which the request was initiated. **The status code indicating success is 200 or 206**, depending on the server configuration. **Note that this code** indicates whether the server could successfully complete the request. It **does not indicate that the transfer was successful. A successful transfer will have a TransferStatus of Completed and TransferError will be null**.

# jquery - jQuery - JSON URL 中的双冒号

> ID：12407511
> 
> 赞同：2
> 
> 时间：2012-09-13T13:33:25.063
> 
> 标签：jquery, ezpublish

对于我在 EZPublish 中构建的项目，我使用 EZJScore 模块生成 JSON 数组。Ezjscore 要求我用双冒号分隔参数，例如：

> http://[域]/ezjscore/call/news::cat::3

经过数小时的测试，我得出结论 jquery 无法解析带有双冒号的 URL。至少`getjson`and`ajax`函数不能处理这个......

有人知道这个问题的解决方案或解决方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:10:46.013

尝试`post`通过劫持表单的提交来使用 jQuery 函数，并确保在 ezjscore php 函数中返回 JSON。像这样的东西：

```
$.post($(this).attr('action') + '/ezjscore/call/', 'news::cat::3, function (data) {},'json'); 
```

# c# - c# 重写 RichTextBox 粘贴函数 - Win Form App

> ID：12407512
> 
> 赞同：2
> 
> 时间：2012-09-13T13:33:24.993
> 
> 标签：c#, winforms, richtextbox

我正在寻找在我的 Windows 窗体应用程序上自定义富文本框控件。RichTextbox 将用于输入文本数据，一旦完成，将通过 SMS 文本消息发送。

要求是文本不能有任何换行符，因为一些旧手机不能正确显示信息并且会丢失格式。

我需要做的是在粘贴到 RTB 之前捕获剪贴板数据并自定义其格式，例如删除换行符。

我在这里找到了一个示例，该示例在一定程度上可以正常工作，但无法粘贴到其他控件中：-

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) 
               {

                        if((keyData == (Keys.Control | Keys.V)))
                        {
                        IDataObject iData = Clipboard.GetDataObject();

                        if (iData.GetDataPresent(DataFormats.Text))
                        {
                             string contents = Clipboard.GetText().Replace("\r\n", " ");
                             Clipboard.SetData(DataFormats.Text, contents);
                             richTextBox1.Paste();
                        }
                          return true;
                        } 
                        else 
                        {
                         return base.ProcessCmdKey(ref msg, keyData);
                        }
                } 
```

请问有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:43:43.463

您需要从 RichTextBox 继承，并添加您自己描述的自定义处理；您还可以将原始数据设置回剪贴板，以便能够将其粘贴到其他控件中（以原始形式）：

```
public class CustomRTB:RichTextBox
    {
        protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
        {

            if ((keyData == (Keys.Control | Keys.V)))
            {
                IDataObject iData = Clipboard.GetDataObject();

                if (iData.GetDataPresent(DataFormats.Text))
                {
                    string contents = Clipboard.GetText();
                    // string newText = *process text here*
                    Clipboard.SetData(DataFormats.Text, newText);
                    this.Paste();
                    Clipboard.SetData(DataFormats.Text, contents);
                }
                return true;
            }
            else
            {
                return base.ProcessCmdKey(ref msg, keyData);
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:53:44.023

尝试在文本更改时捕获文本并删除换行符：

```
 private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        RichTextBox box = (RichTextBox)sender;
        box.Text = box.Text.Replace(Environment.NewLine, string.Empty);
        box.Text = box.Text.Replace("\n", string.Empty);
        box.SelectionStart = box.TextLength;
        box.ScrollToCaret();
    } 
```

# iphone - AFNetworking + SOAP 网络服务

> ID：12407517
> 
> 赞同：2
> 
> 时间：2012-09-13T13:33:39.243
> 
> 标签：iphone, ios, web-services, soap, afnetworking

我有一个使用 ASIHttpRequest 使用 SOAP Web 服务的应用程序，现在我想（或必须）使用其他网络框架，并且我选择了 AFNetworking，但看不到如何使用 SOAP，她就是我使用 ASIHttpRequest 的方式：

```
NSString *operation=[NSString stringWithString:@"search_service"];
NSString *xmlNamespace=[NSString stringWithString:@"http://www.xxx.com/wsdl"];
NSString *address=[NSString stringWithString:@"http://www.xxx.com/service"];
NSString *parameters=[NSString stringWithFormat:@"<param1>%@</param1><param2>%@</param2>",
                      @"val1",
                      @"val2",
                      ];

NSString *operatorTag = [NSString stringWithFormat:@"<%@ xmlns=\"%@\">%@</%@>\n", operation, xmlNamespace, parameters, operation];

NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<s:Envelope xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n"
                         "  <s:Header>\n"
                         "    <To xmlns=\"http://www.w3.org/2005/08/addressing\">%@</To>\n"
                         "    <a:Action>http://tempuri.org/IService1/%@</a:Action>\n"
                         "  </s:Header>\n"
                         "  <s:Body>\n"
                         "    %@"
                         "  </s:Body>\n"
                         "</s:Envelope>\n", address, operation, operatorTag
                         ];

asiRequest = [[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:address]];
[asiRequest setDelegate:self];
[asiRequest addRequestHeader:@"application/soap+xml; charset=utf-8" value:@"Content-Type"];
[asiRequest setRequestMethod:@"POST"];
[asiRequest setPostBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
[asiRequest startAsynchronous]; 
```

**编辑**：这是我尝试使用 AFNetworking 的方法：

```
NSString *operationWSDL= @"search_service";
NSString *xmlNamespace= @"http://www.xxx.com/wsdl";
NSString *address= @"http://www.xxx.com/service";
NSString *parameters=[NSString stringWithFormat:@"<param1>%@</param1><param2>%@</param2>",@"val1",@"val2",];

NSString *operatorTag = [NSString stringWithFormat:@"<%@ xmlns=\"%@\">%@</%@>\n", operationWSDL, xmlNamespace, parameters, operationWSDL];

NSString *soapMessage = [NSString stringWithFormat:
                         @"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                         "<s:Envelope xmlns:a=\"http://www.w3.org/2005/08/addressing\" xmlns:s=\"http://www.w3.org/2003/05/soap-envelope\">\n"
                         "  <s:Header>\n"
                         "    <To xmlns=\"http://www.w3.org/2005/08/addressing\">%@</To>\n"
                         "    <a:Action>http://tempuri.org/IService1/%@</a:Action>\n"
                         "  </s:Header>\n"
                         "  <s:Body>\n"
                         "    %@"
                         "  </s:Body>\n"
                         "</s:Envelope>\n", address, operationWSDL, operatorTag
                         ];

NSURL *url = [NSURL URLWithString:@"http://www.xxx.com/service"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithHeaders:[NSDictionary dictionaryWithObjectsAndKeys:@"application/soap+xml; charset=utf-8",@"Content-Type", nil] body:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:55:57.907

你试过 WSDL2Objc 吗？[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)。我最近在我的项目中使用了它。它成功地生成类（从消费的 WSDL）以使用 SOAP 服务。我认为这将是更好的解决方案。

# php - 教义 - 未获取实体

> ID：12407518
> 
> 赞同：3
> 
> 时间：2012-09-13T13:33:42.800
> 
> 标签：php, doctrine-orm

我有一些具有一对多/多对一关系的实体 -

生产类——

```
/**
 * @OneToMany(targetEntity="ProductionsKeywords", mappedBy="production")
 */
protected $productionKeywords; 
```

ProductionsKeywords 类 -

```
/**
 * @ManyToOne(targetEntity="Production", inversedBy="productionKeywords")
 * @JoinColumn(name="production_id", referencedColumnName="id", nullable=false)
 * @Id
 */
protected $production;

/**
 * @ManyToOne(targetEntity="Keyword", inversedBy="keywordProductions")
 * @JoinColumn(name="keyword_id", referencedColumnName="id", nullable=false)
 * @Id
 */ 
protected $keyword; 
```

关键字类 -

```
/**
 * @OneToMany(targetEntity="ProductionsKeywords", mappedBy="keyword")
 */
protected $keywordProductions; 
```

如果我编写一个 DQL 查询，例如

```
$query = $this->entityManager->createQuery("SELECT p FROM \Entity\Production p"); 
```

作品、productionKeywords 和关键字都可以正常加载，但是如果我尝试获取加入 productionKeywords 和关键字，例如

```
$query = $this->entityManager->createQuery("SELECT p, pk, k FROM \EntityProduction p 
                         LEFT JOIN p.productionKeywords pk
                         LEFT JOIN pk.keyword k
                         "); 
```

然后实体没有加载。不知道我做错了什么，因为我与其他一些实体有相同的关系设置并且它适用于它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:12:49.733

好的，所以看起来如果你有一个“纯”连接实体（如上面的 ProductionsKeywords 类），那么它就不能用于获取查询。我通过使用 productions_keywords 表中的时间戳列作为 ProductionsKeywords 类中的另一个属性解决了这个问题，然后提取连接开始工作。

# jquery - CSS 列表项不显示在彼此下方

> ID：12407524
> 
> 赞同：2
> 
> 时间：2012-09-13T13:34:02.973
> 
> 标签：jquery, css, list

在过去的 3 天里，我创建了一个从数据库生成的菜单结构。除了我的列表项样式外，它完美地工作。我已将问题区域的背景涂成红色，当您将鼠标悬停在单词上时，这些区域会显示

> 公共汽车站
> 员工
> 围栏
> 车辆

这些红色框中的列表项彼此并排显示，而不是彼此垂直下方。我不能为我的生活解决为什么？

我创建了一个小提琴来说明我的问题：http: [//jsfiddle.net/devin85/tMYxT/4/](http://jsfiddle.net/devin85/tMYxT/4/)

我还在 Javascript 部分将背景颜色设置为红色，以帮助显示悬停事件发生的位置，并节省搜索代码的时间。

请有人帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:43:14.060

这是因为你的 CSS。

当你声明

```
#navigation li, .headerRight li { margin: 4px 7px 4px 2px; padding: 0px; float: left; background-color: Transparent; } 
```

您是在告诉浏览器将导航下的所有 li 都向左浮动，直到您另有说明为止。

```
#navigation .submenu .submenu li {
   float:none;
} 
```

将告诉它在第二级子菜单中时不要浮动在所有列表项上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:39:12.590

如果将此行添加到 css 文件的末尾，它将阻止那些向左浮动的行：

```
#navigation .submenu li .submenu li {
    float:none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:52:06.367

你的CSS是一团糟。让我们把它清理干净。

首先让我们清除浮动

```
#logo,#currentPage {
    clear:both;
}
.clearfix{
    clear: both;
}
#headerDiv:after, #navigation:after{
    content: '';
    display:block;
    clear:both;
} 
```

然后，如果您的子菜单有，`position:absolute`那么父母`li`应该有`position:relative`

```
.headerLeft li {
    position: relative;
} 
```

`height`从中删除`header, #headerDiv`。

这是我现在拥有的 -[小提琴示例](http://jsfiddle.net/tMYxT/9/)。那么，你期望它是怎样的呢？

# jquery - jQuery砌体定位

> ID：12407526
> 
> 赞同：0
> 
> 时间：2012-09-13T13:34:07.733
> 
> 标签：jquery, jquery-masonry

我试图让 jQuery Masonry 在砌体容器的左侧和右侧添加一致的间距。如果您查看[Pinterest](http://pinterest.com/)的工作原理，它会在您调整窗口大小时在浏览器的左右两侧保持一致的间距。

使用 jQuery Masonry 开箱即用的解决方案，它可以将所有内容固定在左侧，但会在右侧留出右侧元素大小的间隙，直到它重新调整大小以将所有内容推送到下一行。

无论如何使用jQuery Masonry来控制这个？

有大佬能解答一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:29:40.567

我想我需要更清楚地阅读文档。

```
isFitWidth: true 
```

这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:49:19.827

是的，您可以像在这个始终将容器和项目居中的[在线沙盒中那样做。](http://www.hopfnordin.se/demo.html)

# sql-server - 检查字符串的起始字符在 T-SQL 中是否按字母顺序排列

> ID：12407529
> 
> 赞同：27
> 
> 时间：2012-09-13T13:34:16.627
> 
> 标签：sql-server, regex, tsql

是否可以仅使用 TSQL 检查 varchar 字段的前两个字符是否按字母顺序排列？

我只需要从以两个字母字符开头`my_table`的行中进行选择。`my_field`我怎样才能做到这一点？

是否可以使用正则表达式？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-13T13:37:46.607

您不需要使用正则表达式，`LIKE`就足够了：

```
WHERE my_field LIKE '[a-zA-Z][a-zA-Z]%' 
```

假设您所说的“字母”仅指拉丁字符，而不是在 Unicode 中归类为字母的任何内容。

注意 - 如果您的排序规则区分大小写，则将范围指定为`[a-zA-Z]`. `[a-z]`可以排除`A`或`Z`。`[A-Z]`可以排除`a`或`z`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T13:36:13.500

```
select * from my_table where my_field Like '[a-z][a-z]%' 
```

# css - 我应该使用 !important 还是不使用？

> ID：12407533
> 
> 赞同：0
> 
> 时间：2012-09-13T13:34:29.893
> 
> 标签：css

我经常遇到这个问题，不确定最优雅的解决方案。我不想使用`!important`，虽然那会起作用。

我在我的网站上有文章，这些文章包含在一个 div 类`article`中。对应的 CSS 像这样控制 H4 标签。

```
.articles h4 {
font-size: 16px;
} 
```

然而，在我的文章中，我有一个带有类的 div 元素，`notice`它也有许多 H4 标签，但是当我在下面使用这个 CSS 时，`articles`会应用类的声明。

```
.notice h4 {
font-size: 24px;
} 
```

我想要的是一个解决方案，这意味着我不必将类应用于实际的 H4 标记`notice` ——我希望能够通过其容器元素指向 H4 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:39:41.420

您应该尝试更具体地定位课程。尝试使用

```
.articles .notice h4 {
    font-size: 24px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:40:15.900

您需要使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)。如果您的`.article`类只是一个包装器并且 h4 元素是它的直接子元素，那么这很容易解决。子选择器得到[广泛支持](http://caniuse.com/#feat=css-sel2)。

```
.article > h4 { font-size: 16px; } 
```

子选择器不会将其任何样式应用于不是直接祖先的元素。因此，如果您在另一个包装器中有另一个 h4 元素，它将没有包装器外部的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:43:08.547

假设您的标记是这样的：

```
<div class="articles">
    <h4> Article Title </h4>
    <div class="notice">
        <h4> Notice Title </h4>
    </div>
</div> 
```

只要

```
.notice h4 {
    font-size: 24px;
} 
```

在你的css文件中的.articles下面它应该可以工作。但是，另一个解决方法是使用

```
.articles .notice h4 {
    font-size: 24px;
} 
```

# haskell - 带守卫的函数定义

> ID：12407537
> 
> 赞同：4
> 
> 时间：2012-09-13T13:34:44.840
> 
> 标签：haskell

定义 Haskell 函数的经典方法是

```
f1 :: String -> Int
f1 ('-' : cs) -> f1 cs + 1
f1 _ = 0 
```

我对在每一行都写函数名有点不满意。现在我通常以以下方式编写，使用模式保护扩展，并认为它更具可读性和修改友好性：

```
f2 :: String -> Int
f2 s
  | '-' : cs <- s = f2 cs + 1
  | otherwise = 0 
```

您认为第二个示例更具可读性、可修改性和优雅性吗？生成的代码呢？（还没有时间查看脱糖输出，抱歉！）。什么是缺点？我唯一看到的是扩展用法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:55:04.827

好吧，你总是可以这样写：

```
f3 :: String -> Int
f3 s = case s of
           ('-' : cs) -> f3 cs + 1
           _          -> 0 
```

这与版本的含义相同`f1`。如果该函数有一个冗长或难以阅读的名称，并且您想匹配很多模式，这可能是一个改进。对于您的示例，我将使用常规语法。

因此，您的版本没有任何问题`f2`，但是对于语法 GHC 扩展的使用似乎有点轻率，这并不常见到假设每个人都会熟悉它。对于个人代码来说，这没什么大不了的，但`case`对于您希望其他人阅读的任何内容，我都会坚持使用这种表达方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T13:58:55.097

当我对某些东西进行模式匹配时，我更喜欢编写函数名称，如您的案例所示。我觉得它更具可读性。

当我对函数参数有一些条件时，我更喜欢使用守卫，这有助于避免`if else`，如果我要遵循第一个模式，我将不得不使用它。

所以回答你的问题

```
Do you think that second example is more readable, modifiable and elegant? 
```

不，我更喜欢第一个简单易读的。但或多或少取决于你的个人品味。

```
What about generated code? 
```

我认为生成的代码不会有任何区别。两者都只是模式匹配。

```
What are cons? 
```

好吧，patternguards 对模式匹配很有用，而不是使用 let 或更干净的东西。

```
addLookup env var1 var2
   | Just val1 <- lookup env var1
   , Just val2 <- lookup env var2
   = val1 + val2 
```

好吧，当然你需要使用扩展名，而且它不是 Haskell98（你可能不会认为这是一个缺点）

另一方面，对于函数参数的简单模式匹配，我将只使用第一种方法，它简单易读。

# css - White-space: nowrap vs white-space: normal 为什么对浮动元素的影响这么大？

> ID：12407541
> 
> 赞同：3
> 
> 时间：2012-09-13T13:35:07.183
> 
> 标签：css, alignment

[w3c 的定义](http://www.w3schools.com/cssref/pr_text_white-space.asp)： **正常** 的空白序列将折叠成一个空白。文本将在必要时换行。这是默认的 Play it » **nowrap** 空白序列将折叠成单个空白。文本永远不会换行到下一行。文本继续在同一行，直到
遇到标记。

那么为什么浮动元素的外观会有这么大的不同呢？

例如比较这个：

[带有空白法线的 JsBin 显示了很好的对齐布局](http://jsbin.com/ibifoq/22/edit)

```
<table>
    <thead>
      <tr>
        <th>
          <div style="background-color: lightblue; width: 600px; white-space: normal;">
            <span style="display: inline-block; height:20px; background-color: red; margin: 5px 3px;float: left;">
              Button
            </span>
            <span style="display: inline-block; height:20px; background-color: red; margin: 5px 3px;float: none;">
              Button
            </span>
            <span style="display: inline-block; height:20px; background-color: red; margin: 5px 3px; float:right;">
              Button right
            </span>
            <div style="clear: both" />
        </div>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr><td>note: white-space is normal here</td></tr>
    </tbody>
  </table> 
```

[白色 this where white-space: nowrap 被使用](http://jsbin.com/ibifoq/23/edit)

它与上面的代码相同，只是这次 white-space: nowrap;

有人有线索吗？ **[编辑]** 人们评论说他们看不出有什么区别，我上传了有问题的空白的屏幕截图：nowrap 我在 firefox 10.0.4 ![空白：nowrap 在 Firefox 10.0.4 中产生 2 行](../Images/056e61f65bfdac8ac22ccd87cd7a5cce.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:37:01.813

我有点收回我上面最初的评论。如果你有`div`s`float`里面 a`white-space: nowrap div`并且你的父母`div`有一个固定的宽度，你会得到我在评论中提到的内容。但是，如果您的孩子要么是要么`inline`，`inline-block`那么那些孩子`div`就会继续超出右侧`overflow`（就像内联文本会做的那样）。通常，当您`float: left`的孩子到达父母的末尾并换行时。

看看这个[小提琴](http://jsfiddle.net/scrimothy/e6rbk/1/)插图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-05T15:51:27.640

`white-space: nowrap`并且`float: right`是 Firefox 的已知“错误”：[https ://bugzilla.mozilla.org/show_bug.cgi?id=488725](https://bugzilla.mozilla.org/show_bug.cgi?id=488725)

我问关于菜单中右对齐三角形的问题：[Align to right "left triangle" in menu element](https://stackoverflow.com/questions/25006130/align-to-right-left-triangle-in-menu-element)。我准备了使用`padding-right`, 否定`margin-left`和`position: absolute`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T20:57:38.210

我想添加这个[http://jsfiddle.net/cstephe/tNHLL/](http://jsfiddle.net/cstephe/tNHLL/)显示顺序如何在 Firefox 10 中影响这一点，至少我会在我回家使用更新的版本时检查这一点。

编辑：这就是我在本地的样子。

![在此处输入图像描述](../Images/37fb54805ff3abc6d10e5a6f10a45d40.png)

```
 <h2>float first: nowrap / Children: floating blocks</h2>
<div class="wrapper nowrap">
     <div class="inlineBlock floating"></div>
     <div class="inlineBlock floating float-right">r</div>
     <div class="inlineBlock">something</div>

</div>
<div class="clearfix"></div>
<h2>typical order: nowrap / Children: floating blocks</h2>
<div class="wrapper nowrap">
     <div class="inlineBlock floating"></div>

     <div class="inlineBlock">something</div>
    <div class="inlineBlock floating float-right">r</div>
</div> 
```

# java - 我可以在 Xcode 项目中使用 .java 文件中的方法吗？

> ID：12407546
> 
> 赞同：0
> 
> 时间：2012-09-13T13:35:34.760
> 
> 标签：java, iphone, objective-c, ios, ipad

我可以`.java`在 Xcode 项目（iPhone/iPad）中使用文件中的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T04:58:23.257

查看将 Java 转换为[ObjC](https://code.google.com/p/j2objc/)的 J2ObjC！

> J2ObjC 是来自 Google 的开源命令行工具，可将 Java 代码转换为 iOS（iPhone/iPad）平台的 Objective-C。该工具使 Java 代码成为 iOS 应用程序构建的一部分，因为不需要编辑生成的文件。目标是用 Java 编写应用程序的非 UI 代码（例如数据访问或应用程序逻辑），然后由 Web 应用程序（使用 GWT）、Android 应用程序和 iOS 应用程序共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:37:39.583

不，您必须自己进行一些移植。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:44:18.097

不，您不能使用不同的语言/语法。

# sass - Sass mixin 与 if else

> ID：12407548
> 
> 赞同：21
> 
> 时间：2012-09-13T13:35:39.993
> 
> 标签：sass

我有以下混合

```
@mixin arrows($arrowdirection:"left", $arrowsize:"5px", $arrowcolor:$navbgblue ) {
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;
    @if $arrowdirection == "right" {
        border-top: $arrowsize + px;
        border-bottom: $arrowsize + px;
        border-left: $arrowsize + px $arrowcolor;
    } @else if $arrowdirection == "left" {
        border-top: $arrowsize + px;
        border-bottom: $arrowsize + px;
        border-right:$arrowsize + px $arrowcolor;
    } @else if $arrowdirection == "up" {
        border-bottom: $arrowsize + px $arrowcolor;
        border-left: $arrowsize + px;
        border-right: $arrowsize + px;
    } @else if $arrowdirection == "down" {
        border-left: $arrowsize + px;
        border-right: $arrowsize + px;
        border-top: $arrowsize + px $arrowcolor;
    }
} 
```

如果我使用默认值或传入某些东西，由于某些（无疑是显而易见的）原因而拒绝工作

```
.test{
    @include arrows("left", "5px", "blue");
} 
```

我只得到CSS

```
width: 0;
height: 0;
border-color: transparent;
border-style: solid; 
```

所以我的 if / else 不知何故没有发挥作用。为什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-13T15:45:17.560

是的，通过优化肯定存在某种错误。但这有效

```
@mixin leftarrow($size:5px, $direction:left) {
  border-width: $size;
  border-color: transparent;
  border-style: solid;
  display: inline-block;
  height: 0px;
  width: 0px;

  @if $direction == "right" {
   border-left-color: $navbgblue;
   border-right-width: 0px;
 } @else if $direction == "left" {
   border-right-color: $navbgblue;
   border-left-width: 0px;
 } @else if $direction == "up" {
   border-bottom-color: $navbgblue;
   border-top-width: 0px;
 } @else if $direction == "down" {
   border-top-color: $navbgblue;
   border-bottom-width: 0px;
 }
}

.test{
  @include leftarrow(5px, up);
} 
```

所以我会用那个:-)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-01-28T10:26:50.260

这里是使用只有 4 行代码的 mixin：

```
/*
 * Creates CSS triangle
 * direction options: top, right, bottom, left.
 * Example @include cssTriangle(bottom, red, 50px);
 */
@mixin cssTriangle($direction:left, $color:#89D4E7, $width:34px) {
    $opposite: nth((top,right,bottom,left), index((bottom,left,top,right),$direction));
    border: solid $width transparent;
    border-#{$direction}: none;
    border-#{$opposite}: solid $width $color;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T14:03:03.187

首先，您不想引用变量，除非您希望它们被视为字符串（字符串在您的 CSS 输出中被引用）。将默认值作为“else”而不是“else if”的一部分是一个非常好的主意。

您是在查看生成的 CSS 还是从 Firebug 之类的内部查看它？因为如果我按原样复制/粘贴您的 mixin，我会得到以下输出：

```
.test {
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-top: "5pxpx";
  border-bottom: "5pxpx";
  border-right: "5pxpx" blue;
} 
```

这是您的 mixin 的重构版本，其中所有引号和额外的“px”被删除：

```
@mixin arrows($arrowdirection: left, $arrowsize: 5px, $arrowcolor: green) {
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;

    @if $arrowdirection == right {
        border-top: $arrowsize;
        border-bottom: $arrowsize;
        border-left: $arrowsize $arrowcolor;
    } @else if $arrowdirection == up {
        border-bottom: $arrowsize $arrowcolor;
        border-left: $arrowsize;
        border-right: $arrowsize;
    } @else if $arrowdirection == down {
        border-left: $arrowsize;
        border-right: $arrowsize;
        border-top: $arrowsize $arrowcolor;
    } @else {
        border-top: $arrowsize;
        border-bottom: $arrowsize;
        border-right:$arrowsize $arrowcolor;
    }
}

.test {
    @include arrows;
}

.test2 {
    @include arrows(right, 10px, blue);
} 
```

我得到以下输出：

```
.test {
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-top: 5px;
  border-bottom: 5px;
  border-right: 5px green;
}

.test2 {
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-top: 10px;
  border-bottom: 10px;
  border-left: 10px blue;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-25T18:54:14.077

这对我有用。使用边框快捷方式创建与自身冲突的混合和捣碎的 css

```
@mixin arrows($arrowdirection: left, $arrowsize: 5px, $arrowcolor: green) {
    /*
     * Creates css arrows
     * direction options: top, right, bottom, left. (to match border-'direction' of css)
     * Example @include arrows(bottom, 12px, #f00);
     */
    width: 0;
    height: 0;
    @if $arrowdirection == top {
        border-left: $arrowsize solid transparent;
        border-right: $arrowsize solid transparent;
        border-bottom: $arrowsize solid $arrowcolor;
    } @else if $arrowdirection == right {
        border-top: $arrowsize solid transparent;
        border-bottom: $arrowsize solid transparent;
        border-left: $arrowsize solid $arrowcolor;
    } @else if $arrowdirection == bottom {
        border-left: $arrowsize solid transparent;
        border-right: $arrowsize solid transparent;
        border-top: $arrowsize solid $arrowcolor;
    } @else {
        border-top: $arrowsize solid transparent;
        border-bottom: $arrowsize solid transparent;
        border-right: $arrowsize solid $arrowcolor;
    }
} 
```

*   站在[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)和 @cinnamon的肩膀上

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-21T16:25:03.293

您需要在调用@mixin 时传递匹配的$arrowdirection 参数。但是您可以在单独的@else 条件中添加@error(your message)，如下所示：-

```
$navbgblue: #587cd7;    
@mixin leftarrow($size:5px, $direction:left) {
      border-width: $size;
      border-color: transparent;
      border-style: solid;
      display: inline-block;
      height: 0px;
      width: 0px;

      @if $direction == "right" {
       border-left-color: $navbgblue;
       border-right-width: 0px;
     } @else if $direction == "left" {
       border-right-color: $navbgblue;
       border-left-width: 0px;
     } @else if $direction == "up" {
       border-bottom-color: $navbgblue;
       border-top-width: 0px;
     } @else if $direction == "down" {
       border-top-color: $navbgblue;
       border-bottom-width: 0px;
     } @else{
        @error('please provide correct direction [up,right,bottom,left]')
     }
    }

.test{
  @include leftarrow(5px, blue);
} 
```

这迫使用户提供默认或匹配的参数，并且用户总是得到编译的 mixin。

# ruby-on-rails - 在我的 `routes.rb` 文件中使用 `match` 时，如何指定自定义 POST 操作？

> ID：12407549
> 
> 赞同：2
> 
> 时间：2012-09-13T13:35:40.753
> 
> 标签：ruby-on-rails, api, controller, action

我正在尝试`post`在控制器中定义自定义操作，但我有一些问题。

这是我的控制器：

```
module Api
  module V1
    class ExamplesController < ApplicationController
      def create_a
        ...
      end

      def create_b
        ...
      end
    end
  end
end 
```

我希望两个动作/方法都是`post`动作。这是我的路线文件中的内容：

```
namespace :api do
  namespace :v1 do
    match 'examples/create_a', :controller => 'examples', :action => 'create_a'
    match 'examples/create_b', :controller => 'examples', :action => 'create_b'
  end
end 
```

我可以通过 t 请求达到这两种方法`ge`，但我想基于 http 触发它们`post`。此外，如果我通过`rake routes`它检查并不会告诉我它是否是 GET、PUT、POST 等方法。它只是空白。我如何告诉路线它应该是一种`post`方法？

浏览器中的`post`请求在我的方法中看起来如何？

```
url: http://localhost:3000/api/v1/examples/create_a.json/create_a
header: Content-Type: application/x-www-form-urlencoded
data: paramA=45&paramB&paramC 
```

这是`post`对我的控制器操作执行的正确 URL 模式`create_a`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:42:54.853

添加 :via => :post 应该可以解决问题。

```
namespace :api do
  namespace :v1 do
    match 'examples/create_a', :controller => 'examples', :action => 'create_a', :via => :post
    match 'examples/create_b', :controller => 'examples', :action => 'create_b', :via => :post
  end
end 
```

更多信息请访问[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:48:06.590

通常，`match`当您想要将某种逻辑名称映射到 RESTful 路由和/或为 RESTful 路由创建别名时使用。你正在做的事情`match`很好（从某种意义上说它会起作用），但你只是错过了一件小事（我稍后会告诉你）。

`match`首先，让我们看一下为路由创建别名的典型用法：

```
match "profile" => "users#show" 
```

此路由允许您使用`/profile`to `show`a的应用程序路径`user`而不是 path `/users/:id`。

由于您的代码没有将一个名称映射到另一个名称，因此您不需要`match`规则。您的使用`match`将不必要的重复添加到您的代码中，并且`match`在您提供的情况下使用比必要的更冗长。这是一个示例，说明如何在**没有** `match`的情况下编写 API 路由，并指定它们只能通过以下方式访问`post`：

```
namespace :api do
  namespace :v1 do
    post "examples/create_a"
    post "examples/create_b"
  end
end 
```

**这是一个带有** 的示例`match`，添加`:via`参数（这是您的代码示例中缺少的）以指定 HTTP 动词：

```
namespace :api do
  namespace :v1 do
    match 'examples/create_a' => "examples#create_a", :via => :post
    match 'examples/create_b' => "examples#create_b", :via => :post
  end  #           ^ ---- DUPLICATION ---- ^
end 
```

注意这里的代码重复。**由于您没有将一个路径名映射到另一个路径名，因此与非**版本相比，您输入了**两次同名路径。****`match`**

 **您还会注意到，与原始示例代码相比，我去掉了`:controller`and`action`参数，因为 Rails 会在您使用表单时自动推断：

```
"[controller]/[action]" => "[controller]#[action]" 
```**

# asp.net - 在 asp.net 应用程序中与热敏打印机通信的最佳方法是什么？

> ID：12407551
> 
> 赞同：2
> 
> 时间：2012-09-13T13:35:45.063
> 
> 标签：asp.net, silverlight, thermal-printer

我需要在 asp.net 应用程序中使用 dll 在热敏打印机上打印条形码标签。

我正在考虑将 Silverlight 5 与 PInvoke 一起使用，但仍然不知道这是否是最佳策略。这种替代方案的问题是用户将没有我需要与打印机通信的 dll（替代解决方案：[http ://cureos.blogspot.com.br/2011/09/pinvoke-bundling-native-dlls- in.html](http://cureos.blogspot.com.br/2011/09/pinvoke-bundling-native-dlls-in.html) )。

我在正确的轨道上？

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:30:04.537

您真的不需要 Silverlight 来利用 PInvoke。我会使用 Silverlight 来创建更丰富的 UI（不使用第 3 方 ASP.NET 控件）。如果您使用通用 ASP.NET Web 应用程序，您将不会遇到任何 Silverlight 安全问题，并且您将获得对 .NET Framework 的完全访问权限，而无需构建 WCF 服务来与 Silverlight 通信。

在背后的代码中，或者利用 MVC 设计模式，您可以设置远程调用打印机并从客户端发送数据所需的所有代码。用户不需要任何 DLL，因为服务器将处理所有进出打印机的通信。

# c - fscanf 读取和保存

> ID：12407553
> 
> 赞同：1
> 
> 时间：2012-09-13T13:35:59.673
> 
> 标签：c, file

我对在 C 中使用文件的知识为零，我正在尝试使用这些数据读取文件

```
050 1100               
051 5100

100 0005  

```

并将数字保存到常量中，如下所示：

```
PC   cod  IR      
\/   \/   \/ 
```

050 --- 1 ---- 200
051 --- 5 ---- 100

```
 Mem[PC]
    \/ 
```

100 - 0005

问题是我不知道该怎么做。我只有从读取我的文件并将第一个数据保存到 char 缓冲区的书中读到的这段代码，或者至少我认为它是这样做的，但它不会继续处理其余数据。

```
#include <stdio.h>    
int main(int argc, char **argv)
{
    FILE *fp;    
    char buffer[100];

    fp = fopen("prueba.txt", "r");
    fscanf(fp, "%s", buffer);
    printf("%s", buffer);    
    fclose(fp);    

    return 0;    
 } 
```

这是内容`prueba.txt`：

```
050 1100               
051 5100

100 0005  

```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:46:30.057

首先，忘记你听说过`fscanf`。这比它的价值要麻烦得多。

其次，我不知道“将数字保存为常量”是什么意思，但*总的来说*，在 C 中做这种事情的正确方法是逐行阅读[`fgets`](https://www.kernel.org/doc/man-pages/online/pages/man3/fgets.3.html)（或者[`getline`](https://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)如果你有的话）和然后使用[`strsep`](https://www.kernel.org/doc/man-pages/online/pages/man3/strsep.3.html)和从行中提取单个数字[`strtoul`](https://www.kernel.org/doc/man-pages/online/pages/man3/strtoul.3.html)。

第三，从风格上讲，只有一件事比在括号内部放置空格更糟糕，那就是*不一致地*在括号和逗号内部和/或周围放置空格。你会让下一个必须阅读这段代码的人头疼。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T13:46:04.347

您现在正在做的只是读取一个单词，您正在使用 fscanf 读取并使用 %s 读取它看到的第一个字符串。

如果你想读取文件中的所有单词，你必须像这样遍历它们：

```
while(feof(fp)==0){

fscanf(fp,"%s",buffer);
*** Do what every action you want to do with your buffer here ***
} 
```

# tsql - 在一个 TSQL 语句中插入和更新记录？

> ID：12407554
> 
> 赞同：5
> 
> 时间：2012-09-13T13:35:59.713
> 
> 标签：tsql

我有一张 BigTable 和一张 LittleTable。我想将一些记录**的副本**从 BigTable 移动到 LittleTable 中，然后（对于这些记录）将 BigTable.ExportedFlag 设置为 T（表示记录的副本已被移动到小表中）。

有没有办法在一个声明中做到这一点？

我知道我可以进行以下交易：

1.  根据 where 子句从大表中移动记录
2.  根据同样的 where 子句更新导出到 T 的大表设置。

我还研究了一个[MERGE 语句](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)，这似乎不太正确，因为我不想更改小表中的值，只需将记录移动到小表中。

我在更新语句之后查看了[OUTPUT 子句](http://blog.sqlauthority.com/2007/10/01/sql-server-2005-output-clause-example-and-explanation-with-insert-update-delete/)，但找不到有用的示例。我不明白为什么 Pinal Dave 使用`Inserted.ID, Inserted.TEXTVal, Deleted.ID, Deleted.TEXTVal`而不是`Updated.TextVal`. 更新被认为是插入还是删除？

我发现这篇文章[TSQL: UPDATE with INSERT INTO SELECT FROM](https://stackoverflow.com/questions/742540/tsql-update-with-insert-into-select-from)说“AFAIK，你不能用一条 sql 语句更新两个不同的表。”

是否有一个干净的单一声明来做到这一点？我正在寻找一个正确的、可维护的 SQL 语句。我必须在一个事务中包装两个语句吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:42:46.943

`OUTPUT`只要`LittleTable`满足成为目标的条件，就可以使用该子句`OUTPUT ... INTO`

```
UPDATE BigTable
SET ExportedFlag = 'T'
OUTPUT inserted.Col1, inserted.Col2 INTO LittleTable(Col1,Col2)
WHERE <some_criteria> 
```

使用`INSERTED`or没有区别`DELETED`。唯一不同的列是您正在更新的列（`deleted.ExportedFlag`具有之前的值并且`inserted.ExportedFlag`将是`T`）

# r - 如何使用 nlme 包获得混合模型的解决方案

> ID：12407556
> 
> 赞同：1
> 
> 时间：2012-09-13T13:36:12.770
> 
> 标签：r, mixed-mode

我的数据看起来像这样

```
Study   NDF ADF CP  Eeff
1   35.8    24.4    18.6    34.83181476
1   35.8    24.4    18.6    33.76824264
1   35.8    24.4    18.6    32.67390287
1   35.8    24.4    18.6    33.05520666
2   39.7    23.4    16.1    33.19730252
2   39.4    22.9    16.3    34.04709188
3   28.9    20.6    18.7    33.22501606
3   27.1    18.9    17.9    33.80766289 
```

当然，我有80行这样的。我使用`lme`函数来运行混合模型（研究为随机效应），如下所示：

```
fm1<-lme(Eeff~NDF+ADF+CP,random=~1|Study, data=na.omit(phuong)) 
```

我得到了这个结果：

```
Fixed effects: Ratio ~ ADF + CP + FCM + DMI + DIM 
                 Value  Std.Error  DF   t-value p-value
(Intercept)  3.1199808 0.16237303 158 19.214896  0.0000
ADF         -0.0265626 0.00406990 158 -6.526603  0.0000
CP          -0.0534021 0.00539108 158 -9.905636  0.0000
FCM         -0.0149314 0.00353524 158 -4.223598  0.0000
DMI          0.0072318 0.00498779 158  1.449894  0.1491
DIM         -0.0008994 0.00019408 158 -4.634076  0.0000
 Correlation: 
    (Intr) ADF    CP     FCM    DMI   
ADF -0.628                            
CP  -0.515  0.089                     
FCM -0.299  0.269 -0.203              
DMI -0.229 -0.145  0.083 -0.624       
DIM -0.113  0.127 -0.061  0.010 -0.047 
```

这些结果显示了截距是随机的但斜率是固定的情况。例如，当我使用研究作为固定效果时，如何查看我的 80 截距：

```
Coefficients:
                            Estimate      Std. Error t value Pr(>|t|)    
(Intercept)        -0.0021083  0.0102536  -0.206 0.837351    
ADF                      0.0005248  0.0002962   1.772 0.078313 .  
CP                        0.0021131  0.0003277   6.448 1.26e-09 ***
factor(Study)2   0.0057274  0.0038709   1.480 0.140933    
factor(Study)3   0.0117722  0.0035262   3.338 0.001046 ** 
factor(Study)4   0.0091049  0.0043227   2.106 0.036730 *  
factor(Study)6   0.0149733  0.0045345   3.302 0.001182 ** 
factor(Study)7   0.0065518  0.0036837   1.779 0.077196 .  
factor(Study)8   0.0066134  0.0035371   1.870 0.063337 .  
factor(Study)9   0.0086758  0.0036641   2.368 0.019083 *  
factor(Study)10  0.0105657  0.0041296   2.559 0.011434 *  
factor(Study)11  0.0083694  0.0040194   2.082 0.038900 *  
factor(Study)16  0.0171258  0.0028962   5.913 1.95e-08 ***
factor(Study)18  0.0019277  0.0042300   0.456 0.649209    
factor(Study)20  0.0172469  0.0040412   4.268 3.36e-05 ***
factor(Study)23  0.0132676  0.0031658   4.191 4.57e-05 ***
factor(Study)24  0.0063313  0.0031519   2.009 0.046236 *  
factor(Study)25  0.0050929  0.0039135   1.301 0.194989 
```

非常感谢，冯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:04:30.810

您没有给我们一个可重复的问题，但答案是使用`coef`，例如：

```
> library(nlme)
> fm1 <- lme(distance~age,random=~1|Subject,data=Orthodont)
> coef(fm1)
    (Intercept)       age
M16    15.84314 0.6601852
M05    15.84314 0.6601852
M02    16.17959 0.6601852
M11    16.40389 0.6601852
M07    16.51604 0.6601852
M08    16.62819 0.6601852
M03    16.96464 0.6601852
[snip] 
```

*   用于`fixef()`获得固定效应系数
*   用于`ranef()`获得随机效应（即每个个体与固定系数的偏差
*   中的`Orthodont`示例`lme`实际上使用了随机斜率（+截距）模型；在这里我已经拟合了一个随机截距模型，因此`age`每个人的估计斜率（参数）都是相同的
*   看起来个人是按估计随机效应的递增顺序排序的

# pinterest - 如何跟踪 pinterest pin 事件

> ID：12407559
> 
> 赞同：0
> 
> 时间：2012-09-13T13:36:31.700
> 
> 标签：pinterest

我正在一个与此页面类似的网站上工作-http: [//fab.com/feed/](http://fab.com/feed/) 在这里，我需要跟踪用户何时单击 pin 按钮。我发现 Pinterest 直到现在和搜索时都没有任何 API我有一些代码可以跟踪我网站上 pin 按钮的点击次数。但这不是一个确切的解决方案，因为用户可以单击按钮然后关闭弹出的 iframe，而无需实际固定内容。所以这里的任何人都可以帮忙我出去？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:03:14.993

我们想出的唯一解决方案是监听 pinit 按钮上的点击事件，并假设用户在点击按钮时将其添加到 pinterest。Pinterest 还没有为 pin 的回调机制做好准备。他们确实有构建此功能的路线图。

资料来源：我开发了 fab.com/feed ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:45:14.880

不久前我遇到了完全相同的问题，并找到了一种很好的方法。但是，由于解决方案并不像应有的那么简单，因此我写了一篇关于它的文章，您可以在[此处](http://codeaid.net/php/tracking-facebook-twitter-and-pinterest-interactions)找到。

希望有帮助！

# jenkins - 如何使用 JUnit 设置 Jenkins

> ID：12407560
> 
> 赞同：2
> 
> 时间：2012-09-13T13:36:36.467
> 
> 标签：jenkins, ant, junit, continuous-integration, continuous-deployment

我们有一个`JUnit`通常从 Eclipse 运行的测试套件。我们最近开始尝试获得更好的开发环境。作为其中的一部分，我们已经开始在`Jenkins`. `JUnit`如果可以在我们的构建过程中运行测试套件，我们也希望它。为此，我认为我们需要一种从命令行执行测试套件的方法，以便我们可以将它们集成到其中`Jenkins`并解析它们的输出。

我们如何设置`Jenkins`来运行我们的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:39:31.450

您可以`junit`在构建期间创建一个 ant 任务并让 Jenkins 运行该任务

这是我们在项目中使用的一些行。在这里启动一个名为`AllNonGWTTestCaseTests`

```
<target name="runTests" description="Run JUnit tests">
    <junit printsummary="yes" dir="test-classes" fork="true">
        <classpath>
            <pathelement location="inst-classes" />
        </classpath>
        <test name="xxx.AllNonGWTTestCaseTests" haltonfailure="no" outfile="result">
            <formatter type="xml" />
        </test>
    </junit>
</target> 
```

构建它会创建文件 result.xml。这配置了一个 ant 任务。Jenkins 可以启动这个蚂蚁任务。看看你的项目配置。节`Build > Ant task`。然后`Post-build Actions`只需设置 xml 文件的路径：result.xml

这应该使 Jenkins 将测试套件作为构建后操作运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-02T11:50:28.890

简单的解决方案（一步一步）就在这里！

1) 将 xUnit 插件添加到 Jenkins

2）在Jenkins的**构建部分（命令）下**添加以下示例代码**执行Windows批处理命令。**

 **```
javac xyxTest.java //compile your test class 
java xyzTest // run your test class 
```

3) 增加“**发布Junit测试结果报告**”

这是链接，您可以在其中找到它的详细信息。

[http://www.tutorialspoint.com/jenkins/jenkins_unit_testing.htm](http://www.tutorialspoint.com/jenkins/jenkins_unit_testing.htm)

希望它会有所帮助！**

# c# - 使用 javascript 的 Google chrome 和 firefox 上的警报问题

> ID：12407562
> 
> 赞同：1
> 
> 时间：2012-09-13T13:36:41.443
> 
> 标签：c#

当应用程序或小程序在 chrome/firefox 中编写和打开时，它会显示“阻止此页面创建其他对话框”。

我如何通过 C# 程序而不是通过修改 about:config、chromejs 或 userchrome.css 来阻止此错误。我需要这个为每个使用该应用程序的用户工作..

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:38:36.677

这是浏览器行为，我认为您无法更改它。

或者创建自己的对话框。

# c# - 列表框选择不断循环

> ID：12407564
> 
> 赞同：0
> 
> 时间：2012-09-13T13:36:46.137
> 
> 标签：c#, listbox, selection

当我从列表中选择一个项目时，整个选择过程会进行两次。

```
private void serving_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
{
    try
    {
        Debug.WriteLine("Serving added to diary");
        login(null, null);
    }
    catch (WebException)
    {
        Debug.WriteLine(e.Error);
    }
    ServingList.SelectedIndex = -1;
} 
```

当我离开时，`ServingList.SelectedIndex = -1;`这个过程会继续进行一次。但我需要将选定的索引恢复到-1。

我错过了什么？

SelectionChanged 上的处理程序：

```
private void ServingList_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        Debug.WriteLine("\n[#] ServingList_SelectionChanged");
        Debug.WriteLine("Selected item:" + ServingList.SelectedIndex);
        Debug.WriteLine("ID of latest TP: " + tp.id);

        String itemid = tp.id;
        Produkt temp = (Produkt)ServingList.SelectedItem;

        if (servingid.Length < 1)
        {
            servingid = temp.servingid;
        }

        WebClient addserving = new WebClient();
        addserving.Credentials = new NetworkCredential(username.Text, passwort.Password);

        addserving.Encoding = System.Text.Encoding.GetEncoding("ISO-8859-1");
        addserving.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        addserving.UploadStringAsync(new Uri("http://fddb.info/api/v8/diary/add_item.xml?apikey=ICPOKUI83555PU43"), "&item_id=" + itemid + "&serving_id=" + servingid);
        addserving.UploadStringCompleted += new UploadStringCompletedEventHandler(serving_UploadStringCompleted);
        Pivot.SelectedIndex = 0;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:44:06.863

您正在导致无限循环。

你有你的列表框，改变它会导致一个动作

更改 X > 动作 X > 手柄 X > 更改 X (-1) > 动作 X

等等。

您需要对某个条件的循环进行某种形式的中断

```
private void serving_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e) 
{ 

     //Break condition
     if (ServingList.SelectedIndex != -1)
     {
        try 
        { 
            Debug.WriteLine("Serving added to diary"); 
            login(null, null); 
        } 
        catch (WebException) 
        { 
            Debug.WriteLine(e.Error); 
        } 
        ServingList.SelectedIndex = -1; 
     }
} 
```

通过这样做，您只在需要时将其设置为 -1，否则即使它实际上已经设置，它也会不断地将所选索引设置为 -1。

# image - Matlab图像处理使用for循环检测坐标

> ID：12407566
> 
> 赞同：0
> 
> 时间：2012-09-13T13:36:49.927
> 
> 标签：image, matlab, for-loop

我想在 for 循环中执行一个逻辑语句。

如果我有一个大小为 480（高度）乘 640（宽度）的图像，我想在一个部分中扫描图像，这个部分是宽度 635 到 640 之间的整个高度。我想知道是否有(x,y) 在单元格“cellData”中找到的坐标。此单元格包含可以在整个图像中找到的 (x,y) 坐标的完整列表。

```
h = height
w = width
for h = 1:480
    for w = 635:640
        if cellData = 1;
            cellData(x,y) = SecondCoordinate(x,y);
        end
    end
end 
```

基本上我试图在我上面提到的部分中选择一个点。该点必须来自单元格“cellData”。我这样做正确吗？代码从 cellData 中检测到的第一个 (x,y) 坐标是否会存储为“SecondCoordinate(x,y)”中的 (x,y) 坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:45:59.903

你应该看看[find](http://www.mathworks.nl/help/matlab/ref/find.html)。它不仅短得多，而且比您当前使用嵌套 for 循环的方法更有效。

`[row, col] = find(cellData)`将返回所有`cellData`不为零的坐标。

如果 cellData 包含除 1 和 0 以外的其他值，则为

```
[row, col] = find(cellData ~= 0) 
```

# c# - 使用列表反序列化 XML

> ID：12407568
> 
> 赞同：0
> 
> 时间：2012-09-13T13:36:58.160
> 
> 标签：c#, xml, deserialization

我正在使用 webclient 反序列化来自 web 服务的 XML 内容：

```
var serializer = new XmlSerializer(typeof(SearchArticles), new XmlRootAttribute("search_articles"));
var results = (SearchArticles)serializer.Deserialize(response.Content.ReadAsStreamAsync().Result); 
```

xml内容如下：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?><search_articles><articles hits=\"10134\"><article><id>1763794</id>... 
```

我的模型看起来像：

```
public class SearchArticles
{
    [XmlElement("articles")]
    public ArticleHelper articles { get; set; }
}

public class ArticleHelper
{
    [XmlAttribute("hits")]
    public long hits { get; set; }
    [XmlElement("article")]
    public List<Article> articles { get; set; }
}

public class Article
{
    public long id { get; set; }
    public string partner { get; set; }
    public string number { get; set; }
    public long number_is_generated { get; set; }
    public string status { get; set; }
    public long company_id { get; set; }
} 
```

这是有效的，但我怎样才能避免拥有 ArticleHelper ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:54:50.403

`SearchArticles`您可以通过修改和删除 ArticleHelper `Article`：

```
public class SearchArticles
{
    [XmlArray("articles")]
    [XmlArrayItem("article", Type = typeof(Article))]
    public List<Article> articles { get; set; }
}

public class Article
{
    public long id { get; set; }
    public string partner { get; set; }
    public string number { get; set; }
    public long number_is_generated { get; set; }
    public string status { get; set; }
    public long company_id { get; set; }
} 
```

但是，您将无法访问 hits 属性值。

# php - CodeIgniter - 一个视图中的 2 个表单

> ID：12407569
> 
> 赞同：1
> 
> 时间：2012-09-13T13:36:58.510
> 
> 标签：php, forms, codeigniter

我有两种形式的**视图：**

```
<table>
<th>Write a comment.</th>
<tr>
    <td>
        <?php echo form_open($this->uri->uri_string(),$form1); 
              echo form_textarea($comment);
              echo form_submit('submit','submit');
              echo form_close();
        ?>
    </td>
</tr> 

</table>

<table>
    <tr>

        <td>
            <?php echo form_open($this->uri->uri_string()); 
                  echo form_dropdown('portion', $portion_options); 
                  echo form_submit('book','book');
                  echo form_close();
            ?>
        </td>
    </tr>
</table> 
```

在**控制器**中，我检查单击了哪个按钮，然后通过将相应表单的值添加到数据库来执行一些操作。

```
if(isset($_POST['book']))
{
    //sending the data to the database
    echo "Book button clicked";
}

if(isset($_POST['submit']))
{
   //sending the data to the database
   echo "Submit button clicked";
} 
```

但是，当单击“书”按钮时，不会执行任何操作。这就像按钮从未被点击过。而当我单击“提交”按钮时，每个操作都会正确完成。

过去，我在普通 php 上使用了相同的技术（我的意思是没有框架，只是 php），并且对我来说效果很好。codeigniter 是否需要任何进一步的配置？难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:13:36.310

`form_id`为什么不向分别以值 1 和 2调用的两个表单添加一个隐藏字段？发布后很容易抓住你的控制器；例如：

```
if($this->input->post()){
  switch($this->input->post('form_id')){
  case 1:
    // do stuff
  break;
  case 2:
    // do stuff
  break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:54:17.753

```
<?php echo form_open($this->uri->uri_string(),$form1); 
```

和

```
<?php echo form_open($this->uri->uri_string()); 
```

看起来您忘记在第二个中提供设置，例如：

```
<?php echo form_open($this->uri->uri_string(),$form2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T21:37:30.697

好吧，在花了我一整天的时间之后，我终于设法以某种方式解决了它（尽管我相信这不是处理这个问题的正确方法）。

出色地：

```
$comment = array(
    'name'      => 'comment',
    'id'        => 'comment',
    'value'     => 'write you comment',
    'row'       => '5',
    'cols'      => '100'
    );

<table>
<th>Write a comment.</th>
<tr>
    <td>
        <?php echo form_open($this->uri->uri_string()); 
              echo form_hidden('form_id', 1);
              echo form_textarea($comment);
              echo form_submit('submit','submit');
              echo form_close();
        ?>
    </td>
</tr> 

</table> 

<table>
    <th>Write a comment.</th>
    <tr>
        <td>

            <?php echo form_open($this->uri->uri_string()); 
                  echo form_hidden('form_id', 2);
                  echo form_dropdown('comment', $portion_options);
                  echo form_submit('book','book');
                  echo form_close();
            ?>

        </td>
    </tr> 

</table> 
```

可能表单字段（文本区域和下拉菜单）需要具有相同的名称（我已将其设置为“评论”）。虽然我不明白为什么：/

谢谢大家试图帮助我:)

# jquery - UIWebview 不在 jquery 部分滚动

> ID：12407573
> 
> 赞同：0
> 
> 时间：2012-09-13T13:37:17.123
> 
> 标签：jquery, objective-c, ios, xcode4.2, highcharts

我正在对现有的 iPad 应用程序进行更改。我在 .htm 页面中使用 highcharts（它是一个 jquery 图表库）。我使用 loadrequest 方法在 uiwebview 控件中加载该 htm 页面。图表正确显示数据点。但是，当 ipad 处于横向模式时，图表不会完全显示，因为图表的某些部分会下降。问题是我无法通过在 uiwebview 中间滑动来滚动（在图表中）。但是，如果我在 webview 的角落滚动，我可以滚动。即使我在图表中间滚动，我也想让 webview 滚动。我是 IOS 的新手，我不确定为什么 webview 会这样。请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:50:30.133

如果您不需要用户能够单击/与图表交互，您可以禁用鼠标跟踪。请参阅此[链接](http://highslide.com/forum/viewtopic.php?f=9&t=14398)。您还需要添加一个覆盖 div。请参阅该线程中的最后一篇文章。

# ldap - 旋风 wiki 和 LDAP/Active Directory？

> ID：12407574
> 
> 赞同：1
> 
> 时间：2012-09-13T13:37:17.620
> 
> 标签：ldap, screwturn

是否可以将ScrewTurn wiki 绑定到其用户和组的LDAP 实例？

# django - Django应用程序上的导入错误

> ID：12407575
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:37:18.957
> 
> 标签：django, importerror

我收到以下错误消息：

```
ImportError at /youtube_submit
No module named util.process
Request Method: GET
Request URL:    http://myapp.com:8000/youtube_submit?videoid=vSlF8EFo8QA
Django Version: 1.4.1
Exception Type: ImportError
Exception Value:    
No module named util.process
Exception Location: /Users/filipeximenes/Projects/trainee/trainee/views/youtube_submit.py in <module>, line 6
Python Executable:  /Users/filipeximenes/Projects/trainee/venv/bin/python
Python Version: 2.7.3
Python Path:    
['/Users/filipeximenes/Projects/trainee',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/site-packages/distribute-0.6.27-py2.7.egg',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python27.zip',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/plat-darwin',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/plat-mac',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/lib-tk',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/lib-old',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/lib-dynload',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Users/filipeximenes/Projects/trainee/venv/lib/python2.7/site-packages'] 
```

这是我的需求文件：

```
Django==1.4.1
South==0.7.6
amqplib==1.0.2
anyjson==0.3.3
billiard==2.7.3.12
celery==3.0.9
distribute==0.6.27
dj-database-url==0.2.1
django-celery==3.0.9
facebook-sdk==0.3.2
gdata==2.0.17
gunicorn==0.14.6
kombu==2.4.5
psycopg2==2.4.5
python-dateutil==1.5
python-openid==2.2.5
wsgiref==0.1.2 
```

我在本地运行应用程序，并且我`__init__.py`的所有模块中都有文件。该应用程序已安装：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'main',
    'trainee',
    'company',
    'videos',
    'south',
) 
```

我有其他应用程序运行良好，唯一让我痛苦的是`videos`一个。

关于什么问题的任何想法？

编辑：

youtube 提交导入：
`from videos.util.process import verify_video`
process.py 导入：
`from videos.util.youtube import YoutubeUtil`
youtube.py 导入：
`import gdata.youtube.service`
`import urlparse`
`from videos.util.verifier import Verifier`
verifier.py 不导入任何内容

编辑：

我创建了另一个应用程序并将所有文件复制到它。我神奇地开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:40:58.153

我创建了另一个应用程序并将所有文件复制到它。不知何故，它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:39:56.883

在视频应用程序的 /youtube_submit 视图中，您导入了类似这样的内容，

```
from util.process import * 
```

而且由于没有这样的模块或文件夹**进程**没有 __init__.py 文件，您会收到此错误

# php - PHP日期和时间比较

> ID：12407577
> 
> 赞同：1
> 
> 时间：2012-09-13T13:37:30.490
> 
> 标签：php, date, time

我看过[这个](https://stackoverflow.com/questions/2113940/php-compare-date)问题，但时间格式不同

我`Tue, 11 Sep 2012 17:38:09 GMT` 在`$pubDate`变量中有以下日期格式

我想`$pubDate` 与当前日期和时间进行比较，看看是否`Tue, 11 Sep 2012 17:38:09 GMT`在最后 10 分钟内

编辑：

我努力了

```
//get current time
                strtotime($pubDate);
                time() - strtotime($pubDate);
                if((time()-(60*10)) < strtotime($pubDate)){
                    //if true increase badge by one
                    $badge = $badge + 1;
                } 
```

它发出警告：依赖系统的时区设置是不安全的。您*需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们在第 26 行的 /Users/xxxxx/Desktop/xxxx/xxxx/xxxx.php 中为 'EDT/-4.0/DST' 选择了 'America/New_York'

编辑：

我已经`date_default_timezone_set('America/New_York');`在我的 php 中添加了行，现在

```
$inDate  = DateTime::createFromFormat( $format, $pubDate);
    $postDate = new DateTime();

    $diff = $inDate->diff( $postDate);

    // If the total number of days is > 0, or the number of hours > 0, or the number of minutes > 10, then its an invalid timestamp.
    if( $diff->format( '%a') > 0 || $diff->format( '%h') > 0 || $diff->format( '%i') > 10) {
     die( 'The timestamps differ by more than 10 minutes');
    } 
```

工作没有警告，谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:47:56.887

您可以比较两个 DateTime 对象。

```
$nowLessTenMinutes = new DateTime();
$nowLessTenMinutes->sub(new DateInterval('PT10M')); // Sub 10 minutes

if ($myTime >= $nowLessTenMinutes); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:44:20.977

用于[`DateTime`](http://php.net/datetime)进行比较：

```
$format = 'D, d M Y H:i:s O';
$tz = new DateTimeZone( 'America/New_York');

// Create two date objects from the time strings
$pubDate  = DateTime::createFromFormat( $format, 'Tue, 11 Sep 2012 17:38:09 GMT', $tz);
$postDate = DateTime::createFromFormat( $format, 'Tue, 11 Sep 2012 17:38:09 GMT', $tz);

// Compute the difference between the two timestamps
$diff = $pubDate->diff( $postDate);

// If the total number of days is > 0, or the number of hours > 0, or the number of minutes > 10, then its an invalid timestamp.
if( $diff->format( '%a') > 0 || $diff->format( '%h') > 0 || $diff->format( '%i') > 10) {
    die( 'The timestamps differ by more than 10 minutes');
} 
```

您可以使用它并在[此演示](http://viper-7.com/2hGH9e)中查看它的工作情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:46:26.083

使用[DateTime::diff()](http://php.net/datetime.diff.php)计算差异：

```
$input = new DateTime( 'Tue, 11 Sep 2012 17:38:09 GMT' );
$now = new DateTime();

/* calculate differences */
$diff = $input->diff( $now );

echo $diff->format( '%H:%I:%S' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:47:40.693

我有同样的问题，如果您使用 MAMP 或类似的东西，更改 php.ini 会很复杂，尝试添加`date_default_timezone_set('America/New_York');`到您的 php 文件之上。

然后这个线程上的大多数其他答案应该可以工作。

# entity-framework - 首先继承 EF 代码。TPH和TPT的混合物

> ID：12407579
> 
> 赞同：2
> 
> 时间：2012-09-13T13:37:31.653
> 
> 标签：entity-framework, ef-code-first

首先是 EF 代码的有趣继承。你认为有一个映射策略可以使这项工作吗？

所以我有一个名为“Animal”的基本抽象类和 3 个从 Animal 类派生的类，Fish、Dog 和 UnknownAnimal。Animal 类有自己的 SQL 表，Fish 和 Dog 分别有 SQL 表 Fish 和 Dog。UnknownAnimal 没有任何额外的字段，因此此类不需要 SQL 表。为了使它更容易一点，Animal SQL Table 有一个鉴别列 (TypeName) 来确定 Animal 类型。

SQL表的代码和图片如下。它既不是 TPH 也不是 TPT，而是一种混合物。我看到的唯一解决方案是使它成为 TPT，通过创建一个 SQL 表“UnknownAnimal”并指向 UnknownAnimal 类来使用该表。但我不想采用这种方式，因为 UnknownAnimal 没有任何额外的属性并且在 SQL 服务器中占用空间（不多）。

带有集成 Nunit 测试甚至数据库 .bak 文件的完整测试项目的代码。 [https://bitbucket.org/RomeoQNgo/efinheritancetest/downloads](https://bitbucket.org/RomeoQNgo/efinheritancetest/downloads)

我尝试了 TPT，但这需要一个额外的 UnknownAnimal SQL 表。这意味着如果我有另一个类，如 UnknownAnimal（继承自 Animal，但没有额外的属性），那么我必须为它创建一个新表。一种简单的方法是在 Animal SQL 表中设置一个名为 TypeName 之类的鉴别器字段，并让它确定类类型。但是我不想使用 TPH，因为如果有更多的动物类型具有该动物独有的新属性（例如具有 TrunkLength 等属性的大象），那么我们必须在 Animals SQL 表中创建一个新列，我不除非没有可能，否则想走这条路。

所以我想结合使用鉴别器字段（TypeName）的TPH和TPT来确定该类唯一的动物额外属性的类类型和额外表。我想使用 Code First 并且不想为此使用任何 EDMX 文件。

我想知道目前使用 EF Code First 是否有任何好的方法。提前感谢您的帮助。

```
public interface IEntity2
{
    string Creator { get; set; }
}

public interface IEntity
{
    int Id { get; set; }
    string DisplayName { get; set; }
}

[Table("Animals")]
public abstract class Animal : IEntity, IEntity2
{
    public virtual int Id { get; set; }
    public virtual string DisplayName { get; set; }
    public virtual int TotalLegs { get; set; }
    public string Creator { get; set; }
}

[Table("UnknownAnimals")]
public class UnknownAnimal : Animal
{
    int test { get { return 1; } }
}

[Table("Fishes")]
public class Fish : Animal
{
    public virtual int WaterType { get; set; }
}

[Table("Dogs")]
public class Dog : Animal
{
    public virtual int FurLength { get; set; }
} 
```

数据库图如下：

![http://i.stack.imgur.com/4JiCJ.png](../Images/0fb3bc9c794d56f9548ad36aafc83177.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T17:35:08.190

不知何故，拥有一个类似乎是不对的`UnknownAnimal`（尽管我意识到它只是你现实生活中代码的抽象）。从语义上讲，未知动物是一种，`Animal`但它还没有类型（还没有？）。`Animal`通过使`Animal`类不是抽象的，将其存储为 可能是对现实的更好反映。这样做，您不需要`UnknownAnimal`表格，并且仍然不需要鉴别器列。

但是您永远无法`UnknownAnimal`轻松地仅从数据库中获取 s，因为`context.Animals.OfType<Animal>()`返回所有动物。[就个人而言，我更喜欢仅继承树的叶子是具体类型，但这可能是一些先天的心理缺陷。]

对我来说，问题是：`UnknownAnimal`类型本身是正确的吗？如果是这样，请使用该类型并将相对无用的表视为理所当然（以后可能会开发自己的字段）。如果不是，继承可能不是这里的正确模型，您应该使用组合（有些人认为这*总是*比继承更好）。

# qt - QT 进度条居中

> ID：12407584
> 
> 赞同：2
> 
> 时间：2012-09-13T13:37:43.437
> 
> 标签：qt, progress-bar

我试图将我的进度条居中到我的屏幕中心，但它总是在左上角......这是代码：

```
QProgressBar vBar;
vBar.setWindowFlags(Qt::FramelessWindowHint);
vBar.setRange(0,9);
vBar.setAlignment(Qt::AlignCenter);
vBar.show();
for (int i = 0; i < 10; i++) {
  vBar.setvalue(i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:59:39.493

`vBar.setAlignment()`设置进度条内的进度条文本（百分比）的对齐方式，而不是进度条本身的位置。要将进度条在屏幕上居中，您需要使用类似

```
vBar.show();
vBar.move((QApplication::desktop()->width() - vBar.width() ) / 2,
          (QApplication::desktop()->height() - vBar.height() ) / 2); 
```

# c# - 这两个比较语句有什么区别？

> ID：12407587
> 
> 赞同：4
> 
> 时间：2012-09-13T13:37:55.070
> 
> 标签：c#, .net

这两个比较语句有什么区别？

```
var result = EqualityComparer<T>.Default.Equals(@this, null);
var result = @this == null; 
```

显然，目的是测试对象“@this”是否为空。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T13:40:23.823

好吧，这取决于`@this`. 如果它没有 的重载`==`，则第二行将仅执行直接引用比较，而第一行将调用*重写* `Equals`的方法或`IEquatable.Equals`.

任何*合理*的实现都会对两种比较给出相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:39:48.223

第一条语句在对象之间调用[Equals()](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)方法以查看它们的值是否相等，假设它已被覆盖并在类中实现`T`。第二条语句改为比较引用，除非该`==`运算符已像在`String`类中那样被覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:42:13.167

运算符`==`调用`ReferenceEquals`比较​​对象，因此比较对象指向相同的内存位置。

`Equals`相反，它只是一个虚拟方法，因此对于不同的类型**可以**表现*不同*，因为它可以被覆盖。

例如，对于 CLR `string`Equals 比较a 的*内容*`string`而不是*引用*，即使`string`是引用类型。

# mysql - 在mysql中获取计数值

> ID：12407594
> 
> 赞同：0
> 
> 时间：2012-09-13T13:38:08.407
> 
> 标签：mysql, database

我有一个`table`3`columns`看起来像

```
branchid  semesterid  courseid
 4          25           2        
 4          36           5
 4          23           3
 4          12           10 
 4          34           15
 4          2            7
 4          23           42

 7          23           9
 7          10           6
 7          34           3
 7          20           17 
```

我需要那个分支的termid和courseid的计数

```
SELECT branchid, count(semesterid), count(courseid) WHERE branchid = 4 
```

当我执行此查询时，count(semesterid) 显示错误计数，而 courseid 显示正确计数 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:41:47.533

用我的水晶球，我预测你需要这个：

```
SELECT COUNT(DISTINCT semesterid), 
       COUNT(DISTINCT courseid) 
  FROM Table1 
 WHERE branchid = 4; 
```

...因为显示的查询应该可以很好地计算记录数（但不是唯一记录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:41:49.257

尝试：

```
SELECT branchid, 
       count(distinct semesterid) as semesterid, 
       count(distinct courseid) as courseid
FROM   <table>
WHERE  branchid = 4
group by branchid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:43:46.223

如果您想要唯一结果的数量，则必须将*count(id)*替换为*count(distinct id)*

# hadoop - 如何映射减少顺序数据，其中 Kn+1->Vn+1 = f(Kn->Vn)？

> ID：12407596
> 
> 赞同：2
> 
> 时间：2012-09-13T13:38:24.470
> 
> 标签：hadoop, mapreduce

我有一个更理论的问题，但它与我过去在没有 Hadoop 的情况下解决的任务到 map-reduce 平台的转换有关。

例如，我们有一个视频文件，它在技术上是一个帧序列，我们需要在每一帧中检测一些圆形物体的特征：（x，y，大小，失真）。检测算法将两件事作为输入：帧本身和前一帧的识别结果。

这里的问题是，如何将此类问题转换为 map-reduce 范式，以便：

1.  将使用减速器的好处，在我的情况下，我可以想象只有映射器
2.  算法将能够处理序列，而不仅仅是单独的每一帧。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:26:26.080

1.  如果要保留每一帧的数据，则不需要 Reduce 步骤。Reduce 步骤在 Hadoop 中是可选的。如果您想运行一些统计数据（例如，在所有帧中平均您的数据），可以使用 reducer。
2.  MapReduce 不适合像这样的顺序处理。
    1.  如果您有多个视频要处理，您可以让每个映射器处理一个视频。这将为您提供数据并行性。
    2.  您可以查看相关的 Hadoop 技术，例如为并行顺序处理而设计的[Apache Hama](http://hama.apache.org/)或[HaLoop 。](http://code.google.com/p/haloop/)

# shell - sed 不会在 shell 脚本中执行所需的 subs

> ID：12407602
> 
> 赞同：1
> 
> 时间：2012-09-13T13:38:46.710
> 
> 标签：shell, sed

在下面的 shell 脚本中，我尝试`A2D(Vlog-Ams-@Cross)`使用转义的特殊字符进行打印。例如替换`(`为`\(`但 sed 不会有任何效果。

```
#! /bin/sh
parameter="A2D(Vlog-Ams-@Cross)"
echo $parameter
parameterz=`echo "$parameter" | sed 's/(/\\(/g'`
echo $parameterz 
```

输出是

```
A2D(Vlog-Ams-@Cross)
A2D(Vlog-Ams-@Cross) 
```

如果我在我的 c-shell 终端上做同样的事情，它工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T19:58:21.097

您在反引号命令中使用反斜杠，这很棘手。如果 sed 命令没有出现在反引号中，它将正常工作。但是，当 shell 查找结束反引号时，它会删除一级反斜杠引用，因此您会得到

```
sed 's/(/\(/g' 
```

这是无操作的。如果您的外壳允许，请使用`$(...)`而不是反引号；通过这种方式，您可以避免这些引用问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:42:51.827

在您的替换`\\(`中，第一个`\`逃脱了第二个`\`。但是你也必须逃避`(`:

```
$  echo 'A2D(Vlog-Ams-@Cross)' | sed -e 's/(/\\\(/g' -e 's/)/\\\)/g'
A2D\(Vlog-Ams-@Cross\) 
```

# php - 得到这个 PHP 错误：fputcsv() 期望参数 2 是数组

> ID：12407603
> 
> 赞同：3
> 
> 时间：2012-09-13T13:38:48.143
> 
> 标签：php, arrays, csv, fputcsv, array-splice

我正在尝试使用 array_splice 将数组插入到数组数组中。

```
array_splice($array, 0, 0, $fieldNames); 
```

然后使用 fputcsv 将生成的数组转换为 csv 格式。我收到以下错误：

```
 fputcsv() expects parameter 2 to be array  string given in... 
```

我究竟做错了什么？一定是一些小错误。请任何帮助。我也采取了正确的方法。我对函数的 PHP 知识并不丰富。

完整的php代码：

```
<?php

//MySQL login details
require('sqlAuth.php');

//return error data
function errorReport($error)
{
    $data = array("error" => $error);
    $json = json_encode($data);
    echo $json;
    die();
}

//export array to csv file
function outputCSV($data) {
    $outstream = fopen("php://output", "w");
    function __outputCSV(&$vals, $key, $filehandler) {
        fputcsv($filehandler, $vals); // add parameters if you want
    }
    array_walk($data, "__outputCSV", $outstream);
    fclose($outstream);
}

// open connection 
$connection = mysql_connect($host, $user, $pass) or errorReport("Unable to Connect"); 

// select database 
mysql_select_db($db, $connection) or errorReport("Unable to Select Database: " .mysql_error()); 

//build result set array
$array = array();

//get full questions table
$query = "SELECT q.q_id, q.trip_day, q.q0_1, q.q0_2, q.q0_3, q.q0_4, q.q0_5, q.q0_6, g.address, g.latitude, g.longitude, g.method, q.q1_1, q.q1_2, q.q1_3, q.q1_7, q.q1_9, q.q1_10, q.q1_11_1, q.q1_11_2, q.q1_11_3, q.q1_11_4, q.q2_6, q.q6_0,
                 q.q6_1, q.q6_1_1_1, q.q6_1_1_2, q.q6_1_1_3, q.q6_1_1_4, q.q6_1_1_5, q.q6_1_1_6, q.q6_1_1_7, q.q6_1_1_8, q.q6_1_1_9, q.q6_1_1_10, q.q6_1_1_11, q.q6_1_1_12, q.q6_1_1_13, q.q6_1_1_14, 
                 q.q6_1_1_15, q.q6_1_1_16, q.q6_1_2_1, q.q6_1_2_2, q.q6_1_2_3, q.q6_1_2_4, q.q6_1_2_5, q.q6_1_2_6, q.q6_1_2_7, q.q6_1_2_8, q.q6_1_2_9, q.q6_1_2_10, q.q6_1_2_11, q.q6_1_2_12, q.q6_1_2_13, 
                 q.q6_1_2_14, q.q6_1_2_15, q.q6_1_2_16, q.q6_1_3_1, q.q6_1_3_2, q.q6_2, q.q6_2_1_1, q.q6_2_1_2, q.q6_2_1_3, q.q6_2_1_4, q.q6_2_1_5, q.q6_2_1_6, q.q6_2_1_7, q.q6_2_1_8, q.q6_2_1_9, 
                 q.q6_2_1_10, q.q6_2_1_11, q.q6_2_1_12, q.q6_2_1_13, q.q6_2_1_14, q.q6_2_1_15, q.q6_2_1_16, q.q6_2_2_1, q.q6_2_2_2, q.q6_2_2_3, q.q6_2_2_4, q.q6_2_2_5, q.q6_2_2_6, q.q6_2_2_7, 
                 q.q6_2_2_8, q.q6_2_2_9, q.q6_2_2_10, q.q6_2_2_11, q.q6_2_2_12, q.q6_2_2_13, q.q6_2_2_14, q.q6_2_2_15, q.q6_2_2_16, q.q6_2_3_1, q.q6_2_3_2, q.q6_3, q.q6_3_1_1, q.q6_3_1_2, 
                 q.q6_3_1_3, q.q6_3_1_4, q.q6_3_1_5, q.q6_3_1_6, q.q6_3_1_7, q.q6_3_1_8, q.q6_3_1_9, q.q6_3_1_10, q.q6_3_1_11, q.q6_3_1_12, q.q6_3_1_13, q.q6_3_1_14, q.q6_3_2_1, q.q6_3_2_2, q.q6_3_2_3, 
                 q.q6_3_2_4, q.q6_3_2_5, q.q6_3_2_6, q.q6_3_2_7, q.q6_3_2_8, q.q6_3_2_9, q.q6_3_2_10, q.q6_3_2_11, q.q6_3_2_12, q.q6_3_2_13, q.q6_3_2_14, q.q6_3_3_1, q.q6_3_3_2 
                 FROM questions AS q LEFT JOIN gmap_address_list AS g ON q.q0_7 = g.id";
$result_questions = mysql_query($query) or errorReport("Error in query: $query. ".mysql_error());
while ($row = mysql_fetch_array($result_questions, MYSQL_ASSOC)) {
    $array[] = $row;
}

//get field names
$fieldNames = array();
$fieldNum = mysql_num_fields($result_questions);
for ($i = 0; $i < $fieldNum; $i++) {
    $fieldNames[] = mysql_field_name($result_questions, $i);
}
array_splice($array, 0, 0, $fieldNames);

header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=emmhts_questionnaires.csv");
header("Pragma: no-cache");
header("Expires: 0");
outputCSV($array);

// free result set memory
mysql_free_result($result_questions);

//close connection to mysql db
mysql_close($connection);
?> 
```

**编辑：**

这是在 outputCSV($array) 之前添加 print_r($array) 之后应该是 csv 文件的第一行的数组的一部分。看起来插入位置 0 的数组在“[124] => q6_3_3_2”之后没有关闭，而是有一个子数组。

```
Array
(
    [0] => q_id
    [1] => trip_day
    [2] => q0_1
    [3] => q0_2
    [4] => q0_3
    [5] => q0_4
    [6] => q0_5
    [7] => q0_6
    [8] => address
    [9] => latitude
    [10] => longitude
    [11] => method
    [12] => q1_1
    [13] => q1_2
    [14] => q1_3
    [15] => q1_7
    [16] => q1_9
    [17] => q1_10
    [18] => q1_11_1
    [19] => q1_11_2
    [20] => q1_11_3
    [21] => q1_11_4
    [22] => q2_6
    [23] => q6_0
    [24] => q6_1
    [25] => q6_1_1_1
    [26] => q6_1_1_2
    [27] => q6_1_1_3
    [28] => q6_1_1_4
    [29] => q6_1_1_5
    [30] => q6_1_1_6
    [31] => q6_1_1_7
    [32] => q6_1_1_8
    [33] => q6_1_1_9
    [34] => q6_1_1_10
    [35] => q6_1_1_11
    [36] => q6_1_1_12
    [37] => q6_1_1_13
    [38] => q6_1_1_14
    [39] => q6_1_1_15
    [40] => q6_1_1_16
    [41] => q6_1_2_1
    [42] => q6_1_2_2
    [43] => q6_1_2_3
    [44] => q6_1_2_4
    [45] => q6_1_2_5
    [46] => q6_1_2_6
    [47] => q6_1_2_7
    [48] => q6_1_2_8
    [49] => q6_1_2_9
    [50] => q6_1_2_10
    [51] => q6_1_2_11
    [52] => q6_1_2_12
    [53] => q6_1_2_13
    [54] => q6_1_2_14
    [55] => q6_1_2_15
    [56] => q6_1_2_16
    [57] => q6_1_3_1
    [58] => q6_1_3_2
    [59] => q6_2
    [60] => q6_2_1_1
    [61] => q6_2_1_2
    [62] => q6_2_1_3
    [63] => q6_2_1_4
    [64] => q6_2_1_5
    [65] => q6_2_1_6
    [66] => q6_2_1_7
    [67] => q6_2_1_8
    [68] => q6_2_1_9
    [69] => q6_2_1_10
    [70] => q6_2_1_11
    [71] => q6_2_1_12
    [72] => q6_2_1_13
    [73] => q6_2_1_14
    [74] => q6_2_1_15
    [75] => q6_2_1_16
    [76] => q6_2_2_1
    [77] => q6_2_2_2
    [78] => q6_2_2_3
    [79] => q6_2_2_4
    [80] => q6_2_2_5
    [81] => q6_2_2_6
    [82] => q6_2_2_7
    [83] => q6_2_2_8
    [84] => q6_2_2_9
    [85] => q6_2_2_10
    [86] => q6_2_2_11
    [87] => q6_2_2_12
    [88] => q6_2_2_13
    [89] => q6_2_2_14
    [90] => q6_2_2_15
    [91] => q6_2_2_16
    [92] => q6_2_3_1
    [93] => q6_2_3_2
    [94] => q6_3
    [95] => q6_3_1_1
    [96] => q6_3_1_2
    [97] => q6_3_1_3
    [98] => q6_3_1_4
    [99] => q6_3_1_5
    [100] => q6_3_1_6
    [101] => q6_3_1_7
    [102] => q6_3_1_8
    [103] => q6_3_1_9
    [104] => q6_3_1_10
    [105] => q6_3_1_11
    [106] => q6_3_1_12
    [107] => q6_3_1_13
    [108] => q6_3_1_14
    [109] => q6_3_2_1
    [110] => q6_3_2_2
    [111] => q6_3_2_3
    [112] => q6_3_2_4
    [113] => q6_3_2_5
    [114] => q6_3_2_6
    [115] => q6_3_2_7
    [116] => q6_3_2_8
    [117] => q6_3_2_9
    [118] => q6_3_2_10
    [119] => q6_3_2_11
    [120] => q6_3_2_12
    [121] => q6_3_2_13
    [122] => q6_3_2_14
    [123] => q6_3_3_1
    [124] => q6_3_3_2
    [125] => Array
        (
            [q_id] => 29
            [trip_day] => Thursday
            [q0_1] => 4
            [q0_2] => 5
            [q0_3] => 5
            [q0_4] => 5
            [q0_5] => 5
            [q0_6] => 0732152589 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:15:55.410

Thanks for posting your array data. The problem is your array is multidimensional. I.e. you have a 'subarray' at 125.

Looking at the docs (http://php.net/manual/en/function.fputcsv.php) it isn't clear, but you can't use multidimensional arrays with fputcsv. If you think about it, the array you pass will be converted to one line in the csv.

You will need to think about the structure of your data, and how you expect it to be formatted in your csv, and modify your code accordingly.

# database - 是否有支持时间序列数据插值和间隙的轻量级数据库系统？

> ID：12407604
> 
> 赞同：2
> 
> 时间：2012-09-13T13:38:53.027
> 
> 标签：database, embedded, relational-database, time-series

我需要实现一个系统，用于在嵌入式平台上存储来自多个设备的带时间戳的传感器数据。根据[这个相关问题](https://stackoverflow.com/questions/4814167/storing-time-series-data-relational-or-non)，关系数据库是存储此类数据的首选解决方案，因此我一直在研究[SQLLite](http://www.sqlite.org/)。

但是，我还需要数据库能够回答诸如“9 月 12 日 13:15 的室内温度是多少”之类的问题，即使当时没有准确记录传感器数据。换句话说，我需要数据库能够处理插值。据我所知，SQLite 无法处理这个问题，通常的嫌疑人（MySQL、PostgreSQL）也无法处理。

此外，我还需要数据库能够检测数据中的差距。

[这个相关问题](https://stackoverflow.com/questions/8816429/is-there-a-powerful-database-system-for-time-series-data)似乎处理大型机数据库而不是嵌入式数据库。

因此：**是否有适合嵌入式平台的数据库系统支持人们可能想要对时间序列数据执行的“常规”操作？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:15:29.983

您不应该希望或期望数据库为您进行插值。只需提取最接近您所需时间的值，然后编写您自己的插值。只有您知道应该使用什么适当的插值类型。也许是两点之间的简单线性，也许是更多点上的高阶多项式。这实际上取决于您的系统和数据建模情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T00:50:18.703

专门的时间序列数据库。

尝试：

*   RRDTool（简单的实用程序，对您来说可能就足够了）
*   开放TSDB
*   涌入数据库

鉴于您的用例，可能还需要采取完全不同的方法，使用针对简单插入（Xively、Phant.io）优化的“IoT”目标数据存储，然后对时间序列分析进行后处理。

# linux - 使用脚本在系统启动时自动启动程序（linux、shell）

> ID：12407605
> 
> 赞同：0
> 
> 时间：2012-09-13T13:39:01.887
> 
> 标签：linux, bash, shell, suse

下面是这种情况，我打算在 Suse 系统完全启动时使用一个简单的脚本来启动一个名为“STAF”的程序。我通过将它放在“/etc/init.d/”中实现了这一点，但是这个脚本基本上是在后台执行的，这意味着我看不到它的进度。

当“STAF”以这种方式启动时，它可以工作，但它在运行服务（例如 ping 或系统备份）时不显示任何工作进度，相反，如果我通过运行相同的脚本手动启动“STAF”终端，可以在终端看到“STAF”的工作进度。它有点像程序需要用交互式终端启动，但是我怎样才能使这个启动过程自动启动，它应该模仿人类打开终端并运行脚本？

对不起，如果我解释得不好，因为这是一个令人困惑的情况。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:44:06.443

首先，转到系统设置下的 KDE 启动和关闭选项。然后将此命令添加为新的启动脚本：

```
konsole -e bash nameofyourscript.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:45:09.000

我相信[该`screen`实用程序](http://www.thegeekstuff.com/2010/07/screen-command-examples/)可以按照您的描述进行操作。而不是`STAF`在启动时运行，您将运行`screen STAF`. 要打开该终端，您将运行`screen -ls`以获取屏幕 ID 并`screen -r ...`打开它。

（免责声明：我没有试过这个。）

# css - HTML/CSS - 如何根据内容制作 div 的大小？

> ID：12407608
> 
> 赞同：0
> 
> 时间：2012-09-13T13:39:13.790
> 
> 标签：css, html, autosize

我有 2 个并排的 div。

在第一个 div 中，我有 2 个并排的标签，下面有一个输入文本。其中一个标签是错误信息。有时会显示，有时不显示。当它不显示时，我希望将 div 调整为更小，这样第二个 div 可以更接近它。

第二件事是一样的，除了它有一个标签 div，因此它不需要调整大小。

有没有办法实现我想要的？下面是我想要实现的一个非常棒的示例：

![自动调整宽度的惊人绘制示例](../Images/6014dfb32aa5042056d8fa14f35d8644.png)

这是代码。

```
<div id="main-div">
<div id="address-number-div">
    <label>Number</label>
    <label class="error" id="number-error">Empty Field</label>
    <input id="number-input" onfocus="onfocus('number-error')"/>
</div> 

<div id="address-complement-div">
    <label>Complement</label>
    <input id="complement-input" />
</div> 
```

​</p>

和 CSS：

```
div {border: 1px solid #000000; padding: 5px;}

.error{color:#FF0000; margin-left:5px;}

#main-div div {display:inline-block;}

#main-div input {display:block;}

#number-input {
    width: 16%;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:40:55.663

将它们设置`display: inline-block;`为让它们缩小以适应内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:50:06.483

看看这个[**演示**](http://jsfiddle.net/zyzkV/11/)。

向左浮动你的 div 应该可以解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T15:42:28.353

不要给`width` [`<persentage>`](https://developer.mozilla.org/en-US/docs/CSS/percentage)类型值，给[`<length>`](https://developer.mozilla.org/en-US/docs/CSS/length)：

```
#number-input { width: 24px; }​ 
```

[用我的 fiddle](http://jsfiddle.net/GNs7P/)上的代码查看它。

# wso2 - wso2 jax-ws 客户端的问题

> ID：12407612
> 
> 赞同：2
> 
> 时间：2012-09-13T13:39:29.690
> 
> 标签：wso2, esb

所以我已经通过 WSO2 ESB 映射了一个 WSO2 DSS 服务。我已经生成了一个 jax-ws 客户端，并且我成功地使用它来获取一些数据。

问题是有时当我打电话给客户时，它会抛出一个

```
Exception in thread "main" java.lang.NullPointerException
at com.sirmaitt.egov.codelist.client.Client.main(Client.java:77) 
```

在源代码的那一行，我试图在控制台中打印响应数据。

这是我用来调用服务的代码

```
 // Initialize service
        Codelists_Service service = new Codelists_Service();

        // Adds custom handler so we can add custom SOAP security header.
        service.setHandlerResolver(new HandlerResolver() {
            @SuppressWarnings("rawtypes")
            public List<Handler> getHandlerChain(PortInfo portInfo) {
                List<Handler> handlers = new ArrayList<Handler>();
                handlers.add(new SecuritySOAPHandler());
                return handlers;
            }
        });

        CodelistsPortType port = service.getCodelistsHttpsSoap11Endpoint();

        Codelists codelists = null;
        try {
            codelists = port.getcodelists();
        } catch (DataServiceFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // Prints the response.
        for (Codelist cList : codelists.getCodelist()) {
} 
```

项目的其余部分主要是 jax-ws 生成的类和一个自定义 SOAPHandler，我用它来添加安全标头。

问题是，当我登录 WSO2 ESB 并单击我在那里映射的服务时，这个客户端实际上开始工作。当我一段时间不使用该服务时，它会引发异常。

这个问题真的让我很困惑。可能是什么原因造成的？

**编辑：**澄清，第 77 行的代码是 for 循环。似乎 codelists 对象为空。

**编辑：**这是将安全标头添加到请求的方法。

```
public boolean handleMessage(SOAPMessageContext messageContext) {
    Boolean isOutboundMessage = (Boolean) messageContext
            .get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if (isOutboundMessage) {
        SOAPPart messageSoapPart = messageContext.getMessage()
                .getSOAPPart();

        WSSecHeader securityHeader = new WSSecHeader();
        securityHeader.insertSecurityHeader(messageSoapPart);

        WSSecUsernameToken usernameToken = new WSSecUsernameToken();

        usernameToken.setPasswordType(WSConstants.PASSWORD_TEXT);
        usernameToken.setUserInfo(USER_NAME, PASSWORD);

        WSSecTimestamp timestamp = new WSSecTimestamp();

        usernameToken.build(messageSoapPart, securityHeader);
        timestamp.build(messageSoapPart, securityHeader);
    }

    return true;
} 
```

这是请求的样子（取自控制台）

```
 ---[HTTP request]---
SOAPAction: "urn:_getcodelists"
Accept: text/xml, multipart/related, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Content-Type: text/xml;charset="utf-8"
<?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"><S:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" S:mustUnderstand="1"><wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-11800260"><wsu:Created>2012-09-18T13:17:56.707Z</wsu:Created><wsu:Expires>2012-09-18T13:22:56.707Z</wsu:Expires></wsu:Timestamp><wsse:UsernameToken xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-9299042"><wsse:Username>admin</wsse:Username><wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">admin</wsse:Password></wsse:UsernameToken></wsse:Security></S:Header><S:Body></S:Body></S:Envelope>--------------------
---[HTTP response 202]---
Transfer-encoding: chunked
null: HTTP/1.1 202 Accepted
Connection: keep-alive
Server: Synapse-HttpComponents-NIO
Date: Tue, 18 Sep 2012 13:19:57 GMT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T02:18:52.597

我认为这是因为您的会话超时，您需要再次登录以验证服务。

# php - 在 Zend Framework 2 中使用 Doctrine 2

> ID：12407622
> 
> 赞同：1
> 
> 时间：2012-09-13T13:40:00.053
> 
> 标签：php, doctrine-orm, zend-framework2

我想在 ZF2 项目中使用 Doctrine 2。我做了一些研究。我发现了这个： [http ://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

不幸的是，我没有安装 CURL 或作曲家。当我尝试先安装 CURL 时。我遇到了无法解决的错误。

有没有简单的解决方案将 Doctrine 2 集成到 ZF2 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T17:54:06.257

I spent a lot of days trying to find a good solution to integrate Doctrine 2 into ZF2\. Finally, I managed to do it with this skeleton application: [https://github.com/iwalz/zf2-doctrine2-getting-started](https://github.com/iwalz/zf2-doctrine2-getting-started)

It has a very good readme, if you follow the steps, success is guaranteed!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:42:23.400

你有 Doctrine 团队编写的官方 Doctrine ZF2 模块

[https://github.com/doctrine/DoctrineModule](https://github.com/doctrine/DoctrineModule)

Composer 或 CURL 是下载源和注册命名空间的简单方法。您可以下载源代码并注册模块

# javascript - 通过 JQuery 重定向到另一个页面

> ID：12407625
> 
> 赞同：0
> 
> 时间：2012-09-13T13:40:03.967
> 
> 标签：javascript, jquery

我在我的网站上使用了 jquery-1.8.0.min.js，在某些情况下我需要进行重定向。

我正在尝试这个：

```
$('<div></div>').appendTo('body')
    .html('<div><h4>Some text....</h4></div>')
    .dialog({
        modal: true,
        title: 'Dialog title...',
        zIndex: 10000,
        autoOpen: true,
        width: 'auto',
        resizable: false,
        draggable: false,
        buttons: {
            Ok: function () {
                $(this).dialog("close");
                var loc = window.location;
                var currentURL = loc.protocol + '//' + loc.host + loc.pathname;

                var newUrl = loc.protocol + '//' + loc.host + 'Account/LogOn?ReturnUrl=' + urlencode(currentURL);
                $('<div style="dispaly:none;"></div>').appendTo('<body>').html('<a id="loginredirect" href="' + newUrl + ' "><br /></a>');
                $('#loginredirect').click();
            }
        },
        close: function (event, ui) {
            $(this).remove();
        }
    }); 
```

但这不起作用:-(所以我试试这个：

```
$('<div></div>').appendTo('body')
    .html('<div><h4>Some text....</h4></div>')
    .dialog({
        modal: true,
        title: 'Dialog title...',
        zIndex: 10000,
        autoOpen: true,
        width: 'auto',
        resizable: false,
        draggable: false,
        buttons: {
            Ok: function () {
                $(this).dialog("close");
                var loc = window.location;
                var currentURL = loc.protocol + '//' + loc.host + loc.pathname;

                var newUrl = loc.protocol + '//' + loc.host + 'Account/LogOn?ReturnUrl=' + urlencode(currentURL);
                $(window.location).attr('href', newUrl);
            }
        },
        close: function (event, ui) {
            $(this).remove();
        }
    }); 
```

但这也行不通...

知道问题出在哪里吗？

谢谢

**编辑 1：** 如果我尝试 window.location.hrej = newUrl，FF ErrorConsole 向我显示：NS_ERROR_MALFORMED_URI：组件返回失败代码：localhost/Content/scripts/jquery-1.8.0 中的 0x804b000a (NS_ERROR_MALFORMED_URI) [nsIDOMLocation.href]。 min.js

并且浏览器不会重定向到 IE、FF 和 Chrome 中的 newUrl...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:41:35.933

您不需要为此使用 jquery，只需尝试，

```
window.location.href = new_url; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:44:13.773

在您的第二个示例中，替换此行：

```
$(window.location).attr('href', newUrl); 
```

对于这个

```
window.location.href = newUrl; 
```

那应该做你想做的事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:57:18.460

`newURL``/`后面缺少尾随`loc.host`

```
var newUrl = loc.protocol + '//' + loc.host + 'Account/LogOn?ReturnUrl=' + urlencode(currentURL);
window.location.href = newUrl; 
```

# php - 从 Filesize 小于 40kb 的指定目录返回文件

> ID：12407628
> 
> 赞同：0
> 
> 时间：2012-09-13T13:40:28.507
> 
> 标签：php, filesize, glob

我想选择文件格式目录，其中 filezise 小于 100kb。请检查我的代码它不起作用

```
<?php
ob_start();
$dir = '/home/couponsc/public_html/testfile';
$ext = '.mp3';
$search = $_GET['s'];
$results = glob("$dir/*$search*$ext");

    foreach($results as $item) 
    {
        $sizes= filesize($item);
        if($sizes < 100);
        {               
            echo $item;             
        }

    }   

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:29:15.153

`if($sizes < 100);` 在 if-clause -> empty 语句之后有一个分号。

```
foreach($results as $item) {
    $sizes= filesize($item);
    if($sizes < 40*1024) {
        echo $item, "\n";
    }
} 
```

或者多一点[spl](http://docs.php.net/manual/en/book.spl.php) / [lambda](http://docs.php.net/manual/en/functions.anonymous.php) fun + recursion：

```
<?php
$path = 'c:/temp';
$it = new RecursiveIteratorIterator(
    new RecursiveDirectoryIterator($path),
    RecursiveIteratorIterator::LEAVES_ONLY
);

$it = new FooFilterIterator($it, function($e) { return $e->getSize(); }, function($e) { return $e < 40*1024; } );

foreach($it as $f) {
    printf("% 6d %s\n", $f->getSize(), $f);
}

class FooFilterIterator extends FilterIterator {
    protected $getter;
    protected $filter;

    public function __construct(Iterator $source, $getter, $filter) {
        parent::__construct($source);
        $this->getter = $getter;
        $this->filter = $filter;
    }

    public function accept() {
        $f = $this->filter;
        $g = $this->getter;
        return $f( $g($this->current()) );
    }
} 
```

还有[GlobIterator](http://docs.php.net/manual/en/class.globiterator.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:34:07.793

该`filesize()`函数返回字节，而不是千字节，因此您的条件不起作用。

正确的条件是：

```
if($sizes < 102400); 
```

# c# - AES 用无效的 IV 正确解密了一半的字符串，这通常吗？

> ID：12407635
> 
> 赞同：1
> 
> 时间：2012-09-13T13:40:54.527
> 
> 标签：c#, security, cryptography, aes

我正在测试[此示例](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.aspx)中的 AES 加密功能。我发现如果我更改`IV`为另一个随机数据，只有一部分文本将变得无法访问，而另一部分将正确解密。

这是我的代码：

```
 public static string encrypt(string original, string key, string iv)
    {
        string enc;
        // Create a new instance of the RijndaelManaged
        // class.  This generates a new key and initialization 
        // vector (IV).
        // Encrypt the string to an array of bytes.
        byte[] encrypted =EncryptStringToBytes_Aes(original, Convert.FromBase64String(key), Convert.FromBase64String(iv));

        enc = Convert.ToBase64String(encrypted);

        return enc;
    }

    public static string decrypt(string encrypted, string key, string iv)
    {
        string decrypted;

        decrypted = DecryptStringFromBytes_Aes(Convert.FromBase64String(encrypted), Convert.FromBase64String(key), Convert.FromBase64String(iv));

        return decrypted;
    } 
```

[这些是我的`EncryptStringToBytes_Aes`和`DecryptStringFromBytes_Aes`功能。](http://paste2.org/p/2218956)

例如，我的输入字符串是`Hello, I think Hugo is a great movie!`. 它将`lbMvxzBtu057yeNV5d/5MC7tlau7zfRXMtfLSUOBa7ueMGqRrm23H5uYGLmDcdJ3`使用*base64ed*密钥`gbpldgjBitwQXrQbbyHr+5J0cXADYAm+po8B29rYVJc=`和*base64ed* IV加密`Ti7OcORScdXS/Ll7m1KdeQ==`。（我将 base64ed 密钥和 IV 作为我的函数的输入，并在我的函数中对它们进行解码，如您在上面的代码中所见）

现在，如果我将 IV 更改为`m4u5eqD7BZP11P5PYGfV7Q==`但不触摸密钥，然后尝试解密加密的字符串，我将给出以下结果：`��f+�T\/]�^h�ugo is a great movie!`.

如您所见，输入字符串 ( `ugo is a great movie!`) 的一部分已成功解密。这很平常吗？如果是，如何防止这种情况？还有比这更安全的算法吗？如果不是，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:45:27.930

如果使用 CBC，错误的 IV 只会阻止第一个块的解密，即 AES 的前 16 个字节。这是设计使然，而不是弱点。

请参阅[Can CBC ciphertext are encrypted if the key is known, but the IV not?](https://crypto.stackexchange.com/questions/1129/can-cbc-ciphertext-be-decrypted-if-the-key-is-known-but-the-iv-not) 有关 CBC 如何处理 IV 的详细信息。

# ant - Apache ant 无法识别“for”任务/宏，尽管我通过 taskdef 添加了 ant-contrib

> ID：12407637
> 
> 赞同：16
> 
> 时间：2012-09-13T13:40:57.740
> 
> 标签：ant, build

我在进行 ant build 时得到关注：

```
Build\build.xml:247: Problem: failed to create task or type
for
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place. 
```

build.xml 第 247 行是`<for param="file">`

已经定义`<taskdef resource="net/sf/antcontrib/antcontrib.properties"/>`了，没用。然后我特别添加了以下内容，但它仍然无法正常工作。

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties">
        <classpath>
            <pathelement location="${env.ANT_HOME}/lib/ant-contrib-1.0b3.jar"/>
        </classpath>
    </taskdef> 
```

我在**C:\Softwares\apache-ant-1.8.4\lib**目录中有**ant-contrib-1.0b3.jar 。**这里缺少什么？

 *** * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-13T14:54:41.910

如果您将 AntContrib jar 放在`$ANT_HOME`/lib 目录中，您真正需要做的就是：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties"/> 
```

实际上要使用该`<for/>`任务，您需要这样做：

```
<taskdef resource="net/sf/antcontrib/antlib.xml"/> 
```

请注意，您必须使用`antlib.xml`而不是`antcontrib.properties`. 仔细阅读[安装说明。](http://ant-contrib.sourceforge.net/tasks/index.html)很容易错过。

如果你在一个小组项目中这样做，我建议你把你的 ant-contrib.jar 放在你的项目中。然后将它们添加到版本控制系统中的项目中。这样，其他开发人员可以将您的构建与 ant-contrib 任务一起使用，而无需自己下载 ant-contrib jar 并将其安装在他们的 $ANT_HOME 目录中。

假设您创建了一个名为的目录`ant-contrib.dir`并将其放在项目的根目录中，然后将 ant-contrib jar 放在该文件夹中。只需将其放入您的项目中：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
    <classpath>
          <fileset dir="${basedir}/ant-contrib.dir"/>
    </classpath>
</taskdef> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-23T14:25:57.970

Ant 需要了解依赖关系。以下是大卫 W 答案的更简洁版本。将以下等效项添加到您的 ant 项目中：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties" classpath="relative/path/to/ant-contrib-1.0b3.jar"/>
<taskdef resource="net/sf/antcontrib/antlib.xml" classpath="relative/path/to/ant-contrib-1.0b3.jar"/> 
```**

# javascript - javascript自执行函数 - 不同的语法

> ID：12407639
> 
> 赞同：3
> 
> 时间：2012-09-13T13:40:59.787
> 
> 标签：javascript, syntax

我见过 2 个版本的自执行 javascript 函数：

```
(function() { ... })() 
```

和

```
(function() { ... }()) 
```

注意函数执行“（）”的不同位置

这两者有区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:46:15.003

有很多方法可以得到你正在做的事情的效果，严格来说，这个主题与闭包主题只有相干的关系。

问题是：在 JavaScript 中，`function`关键字**有两个不同的用途**：

1.  它引入了一个**函数声明语句**，它有点像一个`var`语句（变量声明），但它是针对一个函数的；
2.  它在更大的表达式的上下文中引入了**函数文字**表达式。

现在的问题是，当解析器看到`function`语句的开头时，它假定您的意思是声明一个函数；也就是上面的案例1。当你声明一个函数时，你不能在同一个语句中调用它；函数声明语句**只是**声明函数。

因此，如果您想要的是**只**包含创建函数及其立即调用的语句，那么您必须让解析器有心情解析表达式。将整个内容放在括号中只是这样做的一种方式。

任何让解析器相信它所看到的是表达式语句的“技巧”都可以：

```
var dummy = function() { ... whatever ... } ();

!function() { ... whatever ... } ();

0 + function() { ... whatever ... } (); 
```

所有这些以及无数其他示例都进行了设置，以便当解析器看到`function`关键字时，它会在表达式的中间进行。

如果 Eich 先生为函数对象中间表达式的实例化选择了不同的关键字（例如*lambda*），那就没有问题了，因为你可以说

```
lambda () { ... whatever ... } (); 
```

然而，他没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:01:21.290

其中任何一个的正确术语是立即执行的功能。

尽管这两种方式的工作方式相同，但出于可读性的原因， [Douglas Crockford推荐后者。](http://javascript.crockford.com/code.html)

> 当要立即调用一个函数时，整个调用表达式应该用括号括起来，这样就可以清楚地看出生成的值是函数的结果，而不是函数本身。

因此，如果您想遵循该建议，您应该更喜欢使用：

```
(function() { ... }()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:41:45.567

括号确保您有一个表达式（不能以`function`关键字开头），以便可以执行它。

来自[ECMAscript 语言规范](http://bclary.com/2004/11/07/#a-12.4)：

> 此外，ExpressionStatement 不能以 function 关键字开头，因为这可能会使它与 FunctionDeclaration 产生歧义。

这也有效：

```
(((((function() {...}))())));​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T10:02:42.913

前者更好，因为它将 Function 视为“一等公民”。它使用括号来包装函数并调用它。

Em..对于后者，它也避免了语法歧义。

但我推荐前者。

# php - 使用复选框和按钮从 MySQL 表中删除行

> ID：12407644
> 
> 赞同：1
> 
> 时间：2012-09-13T13:41:39.553
> 
> 标签：php, mysql, html

当您选中复选框并按下“删除”按钮以从成员表中删除该成员并从应用程序表中删除他的应用程序时，我想与网站成员和在此表中创建一个表。当我单击删除按钮时，使用我的代码打印“查询失败”

这是我的代码：

```
<?php
    require_once('config.php');
    $errmsg_arr = array();
    $errflag = false;
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }
    $data = mysql_query("SELECT * FROM members ") or die(mysql_error()); 
    echo ' <form action="members-exec.php">
            <table width="760" border=1>
                        <tr>';
                            if(isset($_SESSION['SESS_RANK'])) {
                                echo '
                                    <th></th>';
                            }
                            echo '
                            <th>Служител:</th>
                            <th>Отпуск отпреди 2009год.</th>
                            <th>Отпуск от мин. год.</th>
                            <th>Отпуск от тек. год.</th>

                        </tr>';
        while($info = mysql_fetch_array( $data )) 
            { 
                 echo  '
                        <tr>';
                            if(isset($_SESSION['SESS_RANK'])) {
                            echo '
                                <td>
                                    <input type="checkbox" name="'.$info['firstname'] .' '.$info['lastname'] .'" value="'.$info['firstname'] .' '.$info['lastname'] .'" />
                                </td>';
                            }
                            echo '
                            <td>'.$info['firstname'] .' '.$info['lastname'] .'</td>  
                            <td>'.$info['predi'] .'</td>
                            <td>'.$info['minali'] .'</td>
                            <td>'.$info['tekushti'] .'</td>';
                            }

                    echo'   </tr> '; 
    echo '</table>';
    if(isset($_SESSION['SESS_RANK'])) {
        echo '
        <br> <input type="submit" name="remove" value="Delete" /></form>';
    }
?> 
```

这是我的 php 部分：

```
 <?php
            session_start();
            require_once('config.php');
            $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
            if(!$link) {
                die('Failed to connect to server: ' . mysql_error());
            }
            $db = mysql_select_db(DB_DATABASE);
            if(!$db) {
                die("Unable to select database");
            }

            $qry = "DELETE FROM members WHERE login='$login' AND passwd='".md5($_POST['password'])."'" && "DELETE FROM applications WHERE userfname = '$userfname'";
            $result = mysql_query($qry);
            if($result) {
                header("location: members.php");
                exit();
            }else {
                die("Query failed");
            }
        ?> 
```

编辑：

```
<?php
                session_start();
                require_once('config.php');
                $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
                if(!$link) {
                    die('Failed to connect to server: ' . mysql_error());
                }
                $db = mysql_select_db(DB_DATABASE);
                if(!$db) {
                    die("Unable to select database");
                }

                $qry = "DELETE FROM members WHERE login='$login' AND passwd='".md5($_POST['password'])."'" ;
$result = mysql_query($qry);
$qry = "DELETE FROM applications WHERE userfname = '$userfname'";
                $result = mysql_query($qry);
                if($result) {
                    header("location: members.php");
                    exit();
                }else {
                    die("Query failed");
                }
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:46:43.730

您试图在一个查询中执行两个删除语句。这是一个禁忌。

您需要将语句拆分为两个执行：

```
$qry = "DELETE FROM members WHERE login='$login' AND passwd='".md5($_POST['password'])."'";
$result = mysql_query($qry);
$qry="DELETE FROM applications WHERE userfname = '$userfname'";
$result = mysql_query($qry); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:45:50.100

```
$qry = "DELETE FROM members WHERE login='$login' AND passwd='".md5($_POST['password'])."'" 
&& "DELETE FROM applications WHERE userfname = '$userfname'"; 
```

这是你的问题——你试图一次调用两个 SQL 语句，而 mysql_query 不会让你这样做。如果您执行两个单独的查询，它应该可以工作。

**然而**

您应该考虑迁移到`mysqli_*`或 PDO -`mysql_*`已被弃用。您也可以直接使用 mysqli[在一次调用中执行多个查询](http://php.net/manual/en/mysqli.multi-query.php)；并且它们都使用绑定参数，这可以帮助您编写更安全的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:58:29.287

您可以随时尝试使用[`mysqli_multi_query()`](http://php.net/manual/en/mysqli.multi-query.php)

# android - 注册在 Android 上崩溃

> ID：12407651
> 
> 赞同：1
> 
> 时间：2012-09-13T13:41:50.080
> 
> 标签：android, eclipse

我正在尝试注册我的用户并且标签说成功。但我有一个错误，我不知道问题出在哪里。

这是我的代码：

```
// Registration in background
    protected String doInBackground(String... params) {
        UserFunctions userFunction = new UserFunctions();

        JSONObject json = userFunction.registerUser(name, email, password);
        try {
            String resu = json.getString(KEY_ERROR);
            if (Integer.parseInt(resu) == 3) {
                usernameExist = true;
            } else if (json.getString(KEY_SUCCESS) != null) {
                String res = json.getString(KEY_SUCCESS);
                if (Integer.parseInt(res) == 1) {
                    registered = true;
                    // user successfully registered
                    // Store user details in SQLite
                    // Database
                    DatabaseHandler db = new DatabaseHandler(
                            getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in
                    // database
                    userFunction.logoutUser(getApplicationContext());

                    db.addUser(json_user.getString(KEY_NAME),
                            json_user.getString(KEY_EMAIL),
                            json.getString(KEY_UID),
                            json_user.getString(KEY_CREATED_AT));
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return null;
    }

    // After completing background task Dismiss the progress dialog
    protected void onPostExecute(String file_url) {
        if (usernameExist == true) {
            registerErrorMsg.setText("Username already existed");
        } else if (registered == true) {
            registerErrorMsg.setText("");
            Intent homepage = new Intent(getApplicationContext(),
                    RegisterSuccessActivity.class);
            homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(homepage);
            finish();
        } else {
            // Error in registration
            registerErrorMsg.setText("Email address already existed");
        }
        // dismiss the dialog once done
        pDialog.dismiss();
    } 
```

这是我的日志：

```
09-13 13:39:45.455: E/JSON(868): {"tag":"register","success":1,"error":0,"uid":"5051e1dac29176.90742708","user":{"name":"user","email":"user@gmail.com","created_at":"2012-09-13 21:38:34","updated_at":null}}
09-13 13:39:46.225: E/AndroidRuntime(868): FATAL EXCEPTION: AsyncTask #2
09-13 13:39:46.225: E/AndroidRuntime(868): java.lang.RuntimeException: An error occured while executing doInBackground()
09-13 13:39:46.225: E/AndroidRuntime(868):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-13 13:39:46.225: E/AndroidRuntime(868):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.lang.Thread.run(Thread.java:856)
09-13 13:39:46.225: E/AndroidRuntime(868): Caused by: android.database.sqlite.SQLiteException: Can't downgrade database from version 2 to 1
09-13 13:39:46.225: E/AndroidRuntime(868):  at android.database.sqlite.SQLiteOpenHelper.onDowngrade(SQLiteOpenHelper.java:307)
09-13 13:39:46.225: E/AndroidRuntime(868):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:168)
09-13 13:39:46.225: E/AndroidRuntime(868):  at com.stts.sparetimetradingsystem.library.DatabaseHandler.addUser(DatabaseHandler.java:60)
09-13 13:39:46.225: E/AndroidRuntime(868):  at com.stts.sparetimetradingsystem.RegisterActivity$Register.doInBackground(RegisterActivity.java:150)
09-13 13:39:46.225: E/AndroidRuntime(868):  at com.stts.sparetimetradingsystem.RegisterActivity$Register.doInBackground(RegisterActivity.java:1)
09-13 13:39:46.225: E/AndroidRuntime(868):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-13 13:39:46.225: E/AndroidRuntime(868):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-13 13:39:46.225: E/AndroidRuntime(868):  ... 5 more 
```

有人可以教我让我学习吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:46:36.140

这条线

```
Caused by: android.database.sqlite.SQLiteException: Can't downgrade database from version 2 to 1 
```

表示错误。您打开的 SQLite 是版本 1，而设备是版本 2。

您需要将 SQLite 的版本设置为 2。请参阅此答案

[https://stackoverflow.com/a/8223507/975959](https://stackoverflow.com/a/8223507/975959)

此外，本教程可能会有所帮助 [http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# php - 如何决定/检查某个点是否属于矢量形状？

> ID：12407663
> 
> 赞同：0
> 
> 时间：2012-09-13T13:42:22.907
> 
> 标签：php, photoshop, adobe-illustrator

我在 Photoshop 中创建了一些地图（8000x8000）。地图的每一部分都是使用自定义形状工具创建的，并且可以导出为 *.ai 文件。因此，我将一个示例形状导出到 *.ai 文件，该文件具有以下内容：

```
%!PS-Adobe-2.0
%%Creator: Adobe Photoshop(TM) Pen Path Export 7.0
%%Title: (map-small-paddington.ai)
%%DocumentNeededResources: procset Adobe_packedarray 2.0 0
%%+ procset Adobe_IllustratorA_AI3 1.0 1
%%ColorUsage: Black&White
%%BoundingBox: 0 0 7998 7998
%%HiResBoundingBox: 0 0 7998.9998 7998.9998
%AI3_Cropmarks: 0 0 7998.9998 7998.9998
%%DocumentPreview: None
%%EndComments
%%BeginProlog
%%IncludeResource: procset Adobe_packedarray 2.0 0
Adobe_packedarray /initialize get exec
%%IncludeResource: procset Adobe_IllustratorA_AI3 1.0 1
%%EndProlog
%%BeginSetup
Adobe_IllustratorA_AI3 /initialize get exec
n
%%EndSetup
0.0 0.0 0.0 1.0 k
0 i 0 J 0 j 1 w 4 M []0 d
%%Note:
%Adobe_Photoshop_Path_Begin:<< /defaultFill false >>
*u
%AI3_Note:<< /operation /union >>
0 XR
4771.1153 4121.9960 m
4855.5878 4111.9732 4957.9582 4086.2029 5003.7736 4060.4311 c
5049.5891 4034.6599 5120.0382 3972.7994 5193.7738 3957.0505 c
5267.5089 3941.3016 5323.5226 3946.6539 5355.9339 3949.0778 C
5356.7559 3955.9301 5358.4651 3964.2284 5361.9409 3972.1987 C
5361.4717 3972.3317 L
5358.0990 3975.3640 5353.5658 3979.5329 5347.8721 3984.9663 c
5333.9035 3998.3003 5250.7315 4090.9969 Y
5162.4795 4165.2807 5134.5423 4193.2165 v
5106.6045 4221.1528 5064.0674 4221.7889 5022.1634 4227.5026 c
4980.2590 4233.2172 4968.8311 4237.6617 4932.0072 4254.1706 c
4895.1828 4270.6786 4843.1201 4292.2642 4827.8818 4298.6139 c
4812.6435 4304.9637 4796.1361 4316.3911 4778.9935 4340.5184 c
4761.8505 4364.6433 4745.9776 4385.5963 4728.8351 4398.9284 c
4723.2744 4403.2528 4716.9076 4407.1833 4712.3291 4410.3572 C
4681.6484 4314.8482 4661.9599 4219.4050 V
4662.8157 4217.2633 4684.8314 4162.2146 4701.6759 4132.7359 C
4710.9826 4122.7135 4771.1153 4121.9960 Y
n
*U
%Adobe_Photoshop_Path_End
%%Trailer
%%EOF 
```

现在假设我有两点：(4830,3780) 属于这个形状，(4480,3130) 不属于这个形状。我知道是因为我在 Photoshop 中检查过它。

但我的问题是如何以编程方式检查我想要的每一点？有没有办法在 PHP 中做到这一点？

所以问题由两部分组成：

1.  加载和读取 *.ai 文件
2.  检查点是否属于形状。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:52:56.640

我能想到的检查内部/外部的最简单方法是光栅化图像并使用颜色。

创建一个版本的地图，其中形状元素全为黑色，背景为白色。将其保存为 JPEG。如果您安装了带有 GD 或 Imagemagik 扩展的 PHP，PHP 可以在您想要的坐标处从图像中挑选颜色：

```
<?php
$im = imagecreatefromjpeg('map.jpg'); // Import black/white map image
var_dump(isInside($im, 4830, 3780)); // bool(true)
var_dump(isInside($im, 4480, 3130)); // bool(false)

function isInside($im, $x, $y) {
  $rgb = imagecolorat($im, $x, $y);
  $colors = imagecolorsforindex($im, $rgb);
  $value = ($colors['red'] + $colors['green'] + $colors['blue'])/3; // Get average value
  return ($value <= 10)? true : false; // If average value is less than 10, this pixel is black (or very close to it), so is inside a shape
}
?> 
```

我在`$value <= 10`这里使用 a 而不是`$value == 0`因为在你的形状边缘，你会得到一点混叠，白色背景会融入黑色形状。颜色值从 0 到 255，因此 10/255 仍然很黑，并且可以确保如果您瞄准靠近形状边界的像素，它仍然可以正确评估。

# autocomplete - PhpStorm 和 Yii，自动完成自己的模块

> ID：12407667
> 
> 赞同：0
> 
> 时间：2012-09-13T13:42:41.297
> 
> 标签：autocomplete, yii, phpstorm

我将 PhpStorm 配置为以下内容：[http ://www.yiiframework.com/wiki/92/configuring-phpstorm-ide-for-yii/](http://www.yiiframework.com/wiki/92/configuring-phpstorm-ide-for-yii/)

自动完成现在对我有用。但是当我编写自己的组件时，我无法获得方法、变量和属性。

**我做了什么：**

在 CApplication.php 我添加了：

```
@property mixed testComponent 
```

在 myComponent.php 我添加了：

```
/* @property string $theVar
 * @method thefunction
 */ 
```

# visual-studio-2012 - 加载 Visual Studio 时，如何更改用于连接到 Visual Studio Online (TFSPreview) 的默认凭据？

> ID：12407668
> 
> 赞同：75
> 
> 时间：2012-09-13T13:42:42.920
> 
> 标签：visual-studio-2012, azure-devops

当我加载 Visual Studio 2012 时，它会尝试连接到之前连接的 TFS 服务器。

在我的一台机器上（偶尔也会连接到 TFS2008 和 TFS2010 服务器）似乎总是默认使用完全错误的帐户来连接到 Visual Studio Online (tfspreview)，如果我要尝试获取最新版本，它'会给出一个错误的形式：

> 微软视觉工作室
> 
> 源代码管理资源管理器
> 
> TF204017: 操作无法完成，因为用户（Account Service ([my tfs server]) 没有工作区 [my workspace];[my live id] 的一项或多项所需权限（使用）。
> 
> 好的

如何影响 Visual Studio 2012 默认使用正确的凭据，而不是看似虚构的帐户服务？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-10-02T16:24:15.650

我遇到了一个非常相似的问题，因为我无法使用自己的凭据连接到 TFS。原来创建映像的用户（我使用的是 Hyper-V）将他的帐户存储在凭据管理器中。在 Visual Studio 中无法更改这一点。为了解决这个问题，我在控制面板中打开**凭据管理器**并将通用凭据编辑为我自己的帐户。我关闭并打开 Visual Studio 2012，然后重新连接到 TFS。它提示我输入凭据，但从那时起它与我的帐户相关联。

希望这会有所帮助，西维尔

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-09-14T04:59:54.320

您需要从**Windows Vault**中删除 TFS 凭据以清除并强制在 Visual Studio 中询问新的 TFS 凭据

1.  转到**控制面板**（**开始 -> 控制面板**）。

2.  单击**用户帐户**（或Windows 7 机器中的**用户帐户和家庭安全->用户帐户）**

3.  单击**凭据管理器**（或**管理您的凭据**）

4.  在凭据管理器页面中，您可以看到两种类型的凭据

    ```
     i. Windows Credentials
       ii. Generic Credentials 
    ```

5.单击两个凭据修改链接，单击链接**从保管库**中删除以删除存储的 TFS 凭据。

现在，当您登录 Visual Studio 时，系统会要求您提供连接 TFS 的凭据。

**注意**：不要忘记取消选中**记住我的凭据**选项以强制要求每个 TFS 连接的凭据。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-06-21T19:29:49.010

我尝试打开我的凭据管理器，但在其中找不到与我的 TFS 帐户有任何关系的任何凭据。

所以我做了什么，我在 Internet Explorer 中注销了我的 hotmail 帐户，然后清除了我所有的 Internet Explorer cookie 和存储的密码，如本博客所述：[在 Visual Studio 2012 中更改 TFS 凭据](http://www.jayway.com/2012/12/17/changing-tfs-credentials-in-visual-studio-2012/)

![在此处输入图像描述](../Images/063799a6ee7d613e3b9678ddee580626.png)

清除 cookie 和密码后，重新启动 IE，然后重新登录到您的 hotmail（或 windows live 帐户）。

然后启动 Visual Studio 并尝试重新连接到 TFS，现在应该会提示您输入凭据。

注意：**一位读者说您不必清除所有 IE cookie，只需清除这 3 个 cookie**，但我没有对此进行测试。

```
cookie:@login.live.com/
cookie:@visualstudio.com/
cookie:@tfs.app.visualstudio.com/ 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-24T22:20:59.490

我遇到了同样的问题。有人登录了我的电脑并使用了他们的 TFS 凭据。我正在运行 VS2012、Windows 7，并且网络管理员禁用了凭据管理器。

使用与您正在运行的 Visual Studio 相同的用户从命令窗口运行此命令。

```
rundll32.exe keymgr.dll,KRShowKeyMgr 
```

您将看到一个包含所有存储凭据的弹出窗口。为您的 TFS 服务器删除一个。

**注意：** 您需要重新启动 Visual Studio，因为它会缓存 tfs 凭据。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-22T09:26:03.343

您也可以尝试重置 Visual Studio 设置

1.  打开 Visual Studio 命令提示符

2.  输入命令`Devenv /ResetSettings`

它将删除已保存的 TFS 帐户并要求提供凭据

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-13T03:23:46.420

对于 Windows 8：

控制面板 ->（搜索）凭据管理器 -> 检查 Web 凭据

这对我有用...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-12T09:17:21.667

从管理器清除凭据并清除 VS 缓存失败后，请考虑从 Visual Studio 安装程序 (VS2017)**修复 Visual Studio 。**我个人发现没有其他解决方案有效。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-11-14T05:09:33.200

我找到了另一个解决方案：

1.  在 TEAM 中开始会话
2.  转到 SOURCE CONTROL 并选择 WORKSPACE（标记为红色）
3.  然后添加新的工作区...为什么？
4.  因为你不在同一个工作区工作，所以你在 TFS 中更改了帐户（我不知道为什么）
5.  并准备再次映射您的项目。

它 100% 保证工作。

# android - 没有标题的对话框

> ID：12407673
> 
> 赞同：4
> 
> 时间：2012-09-13T13:42:55.057
> 
> 标签：android, android-dialog

我需要在对话框中删除标题。请注意，我不需要空白标题。我需要删除标题部分。以下是我的代码：

```
final Dialog dialog1=new Dialog(context);
    dialog1.setContentView(R.layout.redeemvoucher_first);
    dialog1.setCanceledOnTouchOutside(true);
    dialog1.getWindow().setLayout(900,500);
        dialog1.show(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:47:05.633

在创建对话框时尝试这个

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T13:47:30.770

在调用之前`setContentView`，添加以下内容以删除标题：

```
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:20:52.323

尝试更换：

```
Dialog dialog1=new Dialog(context) 
```

和：

```
Dialog dialog1=new Dialog(context, android.R.style.Theme_NoTitleBar); 
```

# .net - 哪种收藏类型最适合我的需求？

> ID：12407675
> 
> 赞同：0
> 
> 时间：2012-09-13T13:42:58.877
> 
> 标签：.net, caching

我有一个简单的“缓存”基础设施，如下所示：

```
Dictionary<string, object> cache = new Dictionary<string, object>(); 
```

（我在`object`这里用作值类型，但实际上它是一种更具体的类型。）

这个想法是按名称将许多计算值（实际上是来自 SQL 数据库的结果）存储在 tis 字典中。我需要进行快速插入和检索，主要是针对单个元素。

现在使用它，我发现有时需要通过删除所有以特定字符串**开头的条目来使某些条目无效。**我天真的实现是这样的：

```
cache.Keys.Where(key => key.StartsWith(name)).ToList().ForEach(cache.Remove); 
```

知道这可能不是最好的解决方案，我在 .NET Framework 中四处寻找可以让我更有效地执行此操作的数据结构。

有没有比这更适合的课程`Dictionary<>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:46:27.333

如果您需要查找与字符串开头相对应的元素，请考虑使用[Trie](http://en.wikipedia.org/wiki/Trie)。它实际上是一个图（树），每个顶点都有一个字母。代码从包含字符串第一个字母的一个根开始遍历图形，移动到具有相应第二个节点的链接节点，依此类推。

基类库中没有提供实现。有关示例实现，请参见[http://geekyisawesome.blogspot.com.au/2010/07/c-trie.html](http://geekyisawesome.blogspot.com.au/2010/07/c-trie.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:48:40.297

正如阿克顿所说，特里可能很合适。如果您想坚持使用框架类，您有以下选择：

*   字典：O(1) 插入，O(1) 检索，O(n) 删除以 X 开头的元素
*   SortedList：O(log(n)) 插入，O(log(n)) 检索，O(n) 删除以 X 开头的元素（假设删除元素的数量与总元素的数量相比很小）。

# arrays - 有序数组的紧凑数据结构

> ID：12407688
> 
> 赞同：2
> 
> 时间：2012-09-13T13:43:27.690
> 
> 标签：arrays, data-structures, compression

我有一个带有排序数字的表格，例如：

```
1 320102
2 5200100
3 92010023
4 112010202
5 332020201
6 332020411
: 
5000000000 3833240522044511
5000000001 3833240522089999
5000000002 4000000000213312 
```

给定记录号，我需要 O(log n) 时间内的值。记录号为 64 位长，没有丢失的记录号。这些值是 64 位长的，它们已排序并且 value(n) < value(n+1)。

显而易见的解决方案是简单地做一个数组并使用记录号作为索引。这将花费 64 位每个值。

但我想要一种更节省空间的方式来做到这一点。因为我们知道值总是在增加，这应该是可行的，但我不记得让我这样做的数据结构。

一个解决方案是在数组上使用 deflate，但这不会给我 O(log n) 来访问一个元素 - 因此是不可接受的。

你知道一个可以给我的数据结构：

*   O(log n) 用于访问
*   空间要求 < 64 位/值

= 编辑 =

由于我们事先知道所有数字，因此我们可以找到每个数字之间的差异。通过取这些差异的第 99 个百分位，我们将得到一个相对适中的数字。取 log2 将为我们提供表示适度数字所需的位数 - 让我们称之为适度位数。

然后创建这个：

```
64-bit value of record 0
64-bit value of record 1024
64-bit value of record 2048
64-bit value of record 3072
64-bit value of record 4096 
```

然后是所有记录的增量表：

```
modest-bits difference to record 0
modest-bits difference to previous record
1022 * modest-bits difference to previous record
modest-bits difference to record 1024 
```

记录 k*1024 的适度位差异将始终为 0，因此我们可以将其用于信令。如果它不为零，那么接下来的 64 位将是一个指向简单数组的指针，用于将接下来的 1024 条记录作为 64 位值。

由于选择适度的值作为第 99 个百分位数，因此最多会发生 1% 的时间，因此最多浪费 1% * n * 适度位 + 1% * n * 64 位 * 1024。

空间：O（适度位 * n + 64 位 * n / 1024 + 1% * n * 适度位 + 1% * n * 64 位 * 1024）

查找：O（1 + 1024）

（99% 和 1024 可能需要调整）

= 编辑2 =

基于上面的想法，但浪费的空间更少。创建这个：

```
64-bit value of record 0
64-bit value of record 1024
64-bit value of record 2048
64-bit value of record 3072
64-bit value of record 4096 
```

对于所有不能用适度位表示的值，将大值表创建为树：

```
64-bit position, 64-bit value
64-bit position, 64-bit value
64-bit position, 64-bit value 
```

然后是所有记录的增量表，每 1024 条记录重置：

```
modest-bits difference to record 0
modest-bits difference to previous record
1022 * modest-bits difference to previous record
modest-bits difference to record 1024 
```

但也会为大值表中的每个值重置。

空间：O(modest-bits * n + 64-bit * n / 1024 + 1% * n * 2 * 64-bit)。

查找需要搜索大值表，然后查找第 1024 个值，最后将适度位值相加。

查找：O(log(大值表) + 1 + 1024) = O(log n)

你能改善这个吗？或者以不同的方式做得更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:47:05.837

OP 建议将数字分成块（仅一次）。但这个过程可能会继续下去。再次拆分每个块。再一次……最后我们可能会得到一个二叉树。

![在此处输入图像描述](../Images/52744e22bc5ec7ccaf8291cedc7bd796.png)

根节点包含索引最小的数字的值。它的右后代存储表中的中间数字与索引最小的数字之间的差异：`d = A[N/2] - A[0] - N/2`。这对其他右后裔（图中的红色节点）继续进行。叶节点包含来自前面数字的增量：`d = A[i+1] - A[i] - 1`.

因此，存储在 trie 中的大多数值都是 delta 值。它们中的每一个都占用不到 64 位。为了简洁起见，它们可以作为可变位长数字存储在位流中。要获取每个数字的长度并在 O(log N) 时间内在此结构中导航，比特流还应该包含（一些）数字和（一些）子树的长度：

1.  每个节点都包含其左子树（如果有的话）的长度（以位为单位）。
2.  除叶节点外，每个右后代（图中的红色节点）都包含其值的长度（以位为单位）。叶节点的长度可以根据从根到该节点的路径上的其他长度来计算。
3.  每个右后代（图中的红色节点）包含对应值的差异和路径上最近的“红色”节点的值。
4.  所有节点都打包在比特流中，从根节点开始，按顺序：左后代始终跟随其祖先；右后代跟随子树，以左后代为根。

要访问给定索引的元素，请使用索引的二进制表示遵循树中的路径。遍历此路径时，将“红色”节点的所有值相加。当索引中不再有非零位时停止。

有几种存储 N/2 值长度的选项：

1.  根据需要为每个长度分配尽可能多的位，以表示从最大长度到低于平均长度的所有值（不包括一些非常短的异常值）。
2.  还要排除一些较长的异常值（将它们保存在单独的地图中）。
3.  由于长度可能不是均匀分布的，因此对值长度使用 Huffman 编码是合理的。

对于每个 trie 深度，固定长度或 Huffman 编码都应该不同。

N/4 个子树的长度实际上是值的长度，因为 N/4 个最小的子树包含一个值。

其他 N/4 子树长度可以存储在固定（预定义）长度的字中，因此对于大型子树，我们只知道近似（向上取整）长度。

对于 2 ^(30 个)全范围 64 位数字，我们必须打包大约 34 位值，对于 3/4 个节点，大约 4 位值长度，每四个节点，10 位子树长度。节省 34% 的空间。

* * *

示例值：

```
0 320102
1 5200100
2 92010023
3 112010202
4 332020201
5 332020411
6 3833240522044511
7 3833240522089999
8 4000000000213312 
```

尝试这些值：

```
root               d=320102           vl=19    tl=84+8+105+4+5=206
   +-l                                         tl=75+4+5=84
   | +-l                                       tl=23
   | | +-l
   | | | +-r       d=4879997          (vl=23)
   | | +-r         d=91689919         vl=27
   | |   +-r       d=20000178         (vl=25)
   | +-r           d=331700095        vl=29    tl=8
   |   +-l
   |   | +-r       d=209              (vl=8)
   |   +-r         d=3833240190024308 vl=52
   |     +-r       d=45487            (vl=16)
   +-r             d=3999999999893202 vl=52 
```

值长度编码：

```
 bits start end
Root       0    19    19
depth 1    0    52    52
depth 2    0    29    29
depth 3    5    27    52
depth 4    4    8     23 
```

子树长度每个需要 8 位。

这是编码流（为了便于阅读，二进制值仍以十进制显示）：

```
bits value                      comment
19   320102                     root value
8    206                        left subtree length of the root
8    84                         left subtree length
4    15                         smallest left subtree length (with base value 8)
23   4879997                    value for index 1
5    0                          value length for index 2 (with base value 27)
27   91689919                   value for index 2
25   20000178                   value for index 3
29   331700095                  value for index 4
4    0                          smallest left subtree length (with base value 8)
8    209                        value for index 5
5    25                         value length for index 6 (with base value 27)
52   3833240190024308           value for index 6
16   45487                      value for index 7
52   3999999999893202           value for index 8 
```

总共 285 位或 5 个 64 位字。我们还需要存储值长度编码表（350 位）中的位/起始值。要存储 635 位，我们需要 10 个 64 位字，这意味着无法压缩这么小的数字表。对于较大数量的表，值长度编码表的大小可以忽略不计。

要搜索索引 7 的值，读取根值 (320102)，跳过 206 位，为索引 4 添加值 (331700095)，跳过 8 位，为索引 6 添加值 (3833240190024308)，为索引 7 添加值 (45487)，并添加索引 (7)。正如预期的那样，结果是 3 833 240 522 089 999。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T17:23:07.607

正如您在问题中概述的那样，我会分块进行。选择一个块大小*k*，您可以接受在到达您所追求的值之前必须平均解码*k/2值。*对于*n 个*总值，您将有*n/k*个块。具有*n/k*个条目的表将指向数据流以查找每个块的起点。对于二进制搜索，查找该表中的位置将是 O(log( *n/k* ))，或者如果表足够小并且如果它很重要，您可以使用辅助哈希表使其大约为 O(1)。

每个块都以一个 64 位的起始值开始。之后的所有值都将存储为前一个值的增量。我的建议是将这些增量存储为霍夫曼代码，说明下一个值中有多少位，然后是那么多位。霍夫曼代码将针对每个块进行优化，并且该代码的描述将存储在块的开头。

您可以通过在每个值前面加上 6 位来简化这一点，后面的位数在 1..64 范围内，实际上是一个平坦的 Huffman 码。根据位长的直方图，与平面码相比，优化的 Huffman 码可以剔除大量的位。

一旦你完成了这个设置，你就可以对*k*进行试验，看看你能把它做得多小，并且对压缩的影响仍然有限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:46:36.503

我不知道这样做的数据结构。

获得空间且不损失太多速度的明显解决方案是根据您存储的不同 int 大小创建具有不同数组大小的自己的结构。

**伪代码**

```
class memoryAwareArray {
    array16 = Int16[] //2 bytes
    array32 = Int32[] //4 bytes
    array64 = Int64[] //8 bytes

    max16Index = 0;
    max32Index = 0;

    addObjectAtIndex(index, value) {
      if (value < 65535) {
        array16[max16Index] = value;
        max16Index++;
        return;
      }
      if (value < 2147483647) {
        array32[max32Index] = value;
        max32Index++;
        return;
      }

      array64[max64Index] = value;
      max64Index++;
    }

    getObject(index) {
      if (index < max16Index) return(array16[index]);
      if (index < max32Index) return(array32[index-max16Index]);
      return(array64[index-max16Index-max32Index]);
    }
} 
```

沿着这些线的东西不应该改变太多的速度，如果你填满整个结构，你会节省大约 7 千兆。当然，您不会节省太多，因为您的价值观之间存在差距。

# r - 将向量的每个元素与第二个向量的每个元素相加

> ID：12407695
> 
> 赞同：3
> 
> 时间：2012-09-13T13:43:47.793
> 
> 标签：r

我有两个向量，我想要一个矩阵，其中元素是向量 1 的每个元素和向量 2 的每个元素的总和。

例如，这个矩阵第一行的第一个元素是向量1的第一个元素和向量2的第一个元素之和；第一行的第二个元素是向量 1 的第一个元素和向量 2 的第二个元素之和，依此类推。

例如，使用这两个向量

```
u <- c(1,2,3)
v <- c(4,5,6) 
```

期望的结果是：

```
#       [,1] [,2] [,3]
# [1,]    5    6    7
# [2,]    6    7    8
# [3,]    7    8    9 
```

* * *

我试过的：

```
A <- matrix( c(1:6), 3, 3 )

for(i in 1:3)
{
   for(j in 1:3)
   {
      A[j][i] <- u[i]+v[j]
   }
} 
```

但我收到一些警告：

```
Warning messages:
1: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length
2: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length
3: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length
4: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length
5: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length
6: In A[j][i] <- u[i] + v[j] :
  number of items to replace is not a multiple of replacement length 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T13:48:02.637

这就是你要做的事情（注意矩阵子集不是两个括号，而是逗号分隔）：

```
u <- c(1,2,3)
v <- c(4,5,6)

A <- matrix( c(1:6), 3, 3 )

for(i in 1:3)
{
   for(j in 1:3)
   {
      A[i,j] <- u[i]+v[j]
   }
} 
```

但这不是了解 R 的人会接近它的方式。一般来说，在 R 中，有比嵌套 for 循环更好的方法来做事。另一种方法是：

```
A <- outer(u,v,`+`) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-06T19:33:00.400

我们也可以使用`sapply`

```
sapply(u, `+`, v) 
```

# java - Grails：如何让 log.debug 语句显示在控制台中

> ID：12407696
> 
> 赞同：1
> 
> 时间：2012-09-13T13:43:49.530
> 
> 标签：java, grails, logging, console, log4j

我想使用 log.debug 语句并将它们记录到控制台，但我不希望所有 grails 内部调试语句也记录在那里。如何配置包中的所有类以将调试输出记录到控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:48:40.760

这是实现您想要的 log4j.properties 文件的示例：

```
log4j.rootLogger=INFO, Console
log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%d{dd/MM HH:mm:ss} [%-5p] %c{2} - %m%n

log4j.logger.com.yourpackage=DEBUG, Console 
```

# c# - .NET MVC 应用程序中所有 HTTP GET 操作的 OnActionExecuted 代码

> ID：12407702
> 
> 赞同：3
> 
> 时间：2012-09-13T13:44:01.160
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

为 .NET MVC 应用程序中的所有 HTTP GET 操作创建自定义 OnActionExecuted 代码的最佳方法是什么？

您会创建一个 ActionFilter，还是创建一个基本控制器，在这两种方法中，是否可以仅在 GET 请求上触发动作过滤器？

我最初的想法是编写如下的基本控制器，但这是最好的方法，还是我错过了什么？

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    if (Request.HttpMethod == "GET")
    {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:51:26.153

你的代码很好。我会使用：

```
if (string.Equals(Request.HttpMethod, "GET", StringComparison.OrdinalIgnoreCase)) 
```

此外，如果您只想为“GET”请求创建几个 ActionFilter，您可以创建通用的基本 ActionFilter 类，然后从中派生所有具体的操作过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:57:06.730

控制器本身是一个过滤器，因此您可以使用控制器，也可以使用单独的类/过滤器。你必须分析哪一个适合你。通过将逻辑放在控制器中，您可能会丢失单元测试，因此如果测试/SOC 是重要问题，那么我可能会建议使用一个单独的类来封装逻辑。此外，如果您在应用程序中有两个不同的基本控制器（很少），您可以避免代码重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T13:30:17.760

最好的方法是既不使用基本控制器，也不使用在动作上声明的自定义动作过滤器。最好使用控制器工厂全局注册动作过滤器，并且不需要从基本控制器继承，也不需要在任何控制器/动作上添加动作过滤器。`ActionInvoker`动作过滤器在 中声明的自定义`DefaultControllerFactory`派生中分配给控制器`global.asax`。

[这篇](https://stackoverflow.com/questions/6679736/asp-net-mvc-action-filter-to-set-up-controller-variables)博文对实施这种方法很有用。

# asp.net - IE8 拒绝加载 .aspx 页面

> ID：12407705
> 
> 赞同：2
> 
> 时间：2012-09-13T13:44:12.683
> 
> 标签：asp.net, internet-explorer-8, windows-server-2008, iis-7.5

**简单来说：**

我的公司目前正在开发一个供我们的一组客户使用的小型 asp.net 网站。该站点无法在我们的生产环境中仅加载 IE8，而是显示一般的 page-not-found 错误（*不是*来自我们服务器的 404）。

**细节：**

该网站部署在两台服务器上，QA 和 Prod。两台服务器都是从同一个镜像克隆的，并且应该具有相同的设置。它们具有相同的硬件和软件。两台服务器都在我们公司的防火墙之外，可以从互联网以及我们公司的内部网访问。网站本身部署在同一构建的两台服务器上；唯一的区别是每个站点的 web.config 文件中的一行将 Prod 上的站点指向生产数据库，将 QA 上的站点指向测试数据库（其数据定期从 Prod 克隆）。我将 QA 服务器上的站点称为*site.qa.com*，将 Prod 服务器上的站点称为*site.prod.com*。

当在任何浏览器中从公司内部网访问*site.prod.com时，该站点会加载并正常运行（这包括在 IE8 中访问它）。*当从 Internet 访问*site.prod.com*时（我们的最终用户将访问它），*site.prod.com*在 Chrome、Firefox、Safari 和 IE9 中加载并正常运行。当我们尝试在 IE8 中访问它时，IE8 会返回一个 page-not-found 错误，就像访问*site.prod.com*的计算机与 Internet 断开连接一样。

*site.qa.com*可以在我们的内部网和互联网上通过每个浏览器（包括 IE8）访问。

我还应该注意，从 Internet 和我们的 Intranet 访问*site.prod.com*使用相同的 URL，并且应该通过相同的安全检查；*访问site.prod.com*或*site.qa.com*没有特殊的仅限 Intranet 方式。

**有关服务器的更多信息：**

QA 和 Prod 都在运行 Windows Server 2008 R2 Standard，Service Pack 1。我们通过 IIS 7.5 运行网站，两台服务器之间的 IIS 设置相同（导出它们的配置文件并比较显示它们匹配到行）。

**结束：**

在这一点上，我们很难理解为什么我们的网站无法在 IE8 中加载。放弃对 IE8 的支持不是我们的选择，克隆 QA 并将该克隆用作 Prod 是我们正在考虑的临时解决方案，但不会回答我们的核心问题，即：为什么 IE8 会完全无法加载生产站点，只有生产站点，只有在从 Internet 访问时？

**编辑：** 该网站神奇地开始工作（它看起来是*这些*错误之一）。我将在此处发布我们能够发现的有关此行为及其修复方式的任何内容，以防其他人遇到类似问题。

# asp.net - 没有 SQL 数据库的报告 Web 应用程序？

> ID：12407715
> 
> 赞同：2
> 
> 时间：2012-09-13T13:44:39.810
> 
> 标签：asp.net, asp.net-mvc, reporting-services

我已经使用 ASP.NET 和 SSRS 和 SQL DB 构建了一个报告 Web 应用程序。

以下是我的担忧：

1.  报告呈现速度较慢。我需要让报告更快。Crystal Reports 或其他一些东西是否可以帮助我更快地制作报告？请建议

2.  我从有经验的人那里听说，与水晶报表相比，正确部署 SSRS 部署会更复杂？

3.  我们可以在没有 SQL DB 的情况下构建报告引擎吗？

4.  我可以知道构建基于 Web 的报告引擎的不同技术，它更快、免费许可、易于维护......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:21:16.457

广告 1，渲染时间。您应该调查渲染缓慢的原因。SSRS 并不是特别以其超快的速度而闻名（特别是对于大量聚合和大量（数百）页），但如果您将其用作报告工具，则应该很快。如果您有问题，请分析[ExecutionLog2](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)以检查是否是查询、处理或渲染出现问题 - 并相应地进行优化。

广告 2，部署。有几个问题需要注意，但总的来说应该没问题。无论如何，您的问题对于 SO 来说太宽泛了，并且需要征求意见。我建议您多搜索一下，如果您仍有问题，请在聊天（主观、意见）或 SO（客观、实际问题）中提问。

广告 3，没有数据库。您可以将[多个数据源](http://msdn.microsoft.com/en-us/library/ms159219.aspx)连接到报表，包括对象数据源。

广告 4“最佳”。我建议你删除这个子问题，因为它确实是一个征求意见的主观问题（不建议这样做，根据堆栈溢出常见问题解答）。

祝您构建您的报告解决方案好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:50:54.513

作为对 3 => 例如，如果您使用水晶报表的答案，您可以在代码中构建自己的数据集并将数据集传递给水晶报表，水晶报表将进行格式化。这样您就可以省略 sql 数据库的需要。

# iphone - iOS：更改后退按钮的色调？

> ID：12407716
> 
> 赞同：4
> 
> 时间：2012-09-13T13:44:40.827
> 
> 标签：iphone, ios, ipad, uikit, uibarbuttonitem

我有一个推送 UIViewController 的导航控制器。当用户按下某个按钮时，我想更改导航项后退按钮的色调颜色。这可能吗？我尝试过使用`[UIBarButtonItem appearance] setTintColor:`，但它只适用于初始化（例如在 viewDidLoad 中），否则无效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-16T10:10:08.730

对我来说最简单的事情是为所有 uibarbutton 项目设置色调颜色：

```
[[UIBarButtonItem appearance]setTintColor:[UIColor yourColor]]; 
```

然后明确地将我创建并放置在导航栏上的显式导航按钮的 tintcolor 设置为其他颜色...

当我想要做的只是改变色调时，让我免去了创建自定义后退按钮的麻烦。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T14:09:24.877

尝试这个......

您需要将**UIBarButtonItem**与自定义视图一起使用。像这样的东西：

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 70, 30)];
[button addTarget:target action:@selector(back:) forControlEvents:UIControlEventTouchUpInside];
[button setImage:[UIImage imageNamed:@"back_button.png"] forState:UIControlStateNormal];
[button setImage:[UIImage imageNamed:@"back_button_tap.png"] forState:UIControlStateHighlighted];
UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

并将按钮放在导航栏上，通常在带有 UINavigationController 的控制器中：

```
self.navigationItem.leftBarButtonItem = buttonItem; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T14:19:49.920

在单击按钮时调用的方法中，只需输入`[self.navigationItem.backBarButtonItem setTintColor:[UIColor *whateverColorYouWant*]]`; 我还没有测试过，但我有 99% 的把握它会起作用

**编辑：** 刚刚测试过，它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T06:51:01.613

尝试这个：

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class],[UIToolbar class], nil] setTintColor:[UIColor redColor]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T15:16:29.213

这是一个更改后退按钮的文本和颜色的代码：

```
- (void)viewDidLoad
{
    UIBarButtonItem *backButton = [UIBarButtonItem new];
    [backButton setTitle:@"Back"];
    [backButton setTintColor:[UIColor yellowColor]];
    [[self navigationItem] setBackBarButtonItem:backButton];
} 
```

# iphone - 数组返回空值，arr = [[tempDict1 valueForKey:@"rates"] componentsSeparatedByString:@";"];

> ID：12407717
> 
> 赞同：0
> 
> 时间：2012-09-13T13:44:48.013
> 
> 标签：iphone, ios, json

我`NSArray`在`UITableView`. 在我的代码中，我得到了`nil`价值。

```
arr = [[tempDict1 valueForKey:@"rates"] componentsSeparatedByString:@";"];

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
      [connection release];

       NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
       self.responseData = nil;

       values = [responseString JSONValue];
       array = [[NSMutableArray alloc] init];
       NSMutableArray *arrTitle = [[NSMutableArray alloc] init];
       NSMutableArray *arrValues = [[NSMutableArray alloc] init];
       array =[values valueForKey:@"rates"];

       NSLog(@"array values:--> %@",array);
 //    NSLog(@"values:--> %@",values);
 //    NSLog(@"Particular values:--> %@",[[values valueForKey:@"rates"] valueForKey:@"AED"]);

       tempDict1 = (NSMutableDictionary *)array;            
       NSArray *arr;// =[[NSArray alloc]init];
       arr = [[tempDict1 valueForKey:@"rates"] componentsSeparatedByString:@";"];
       NSLog(@"arr-->%@",arr);
       NSString *subStar = @"=";
       [arrTitle removeAllObjects];
       [arrValues removeAllObjects];

       for (int i=0; i<[arr count]-1; i++)
       {
            [arrTitle addObject:[[arr objectAtIndex:i] substringToIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])-1]];
            [arrValues addObject:[[arr objectAtIndex:i] substringFromIndex:NSMaxRange([[arr objectAtIndex:i] rangeOfString:subStar])]];
             NSLog(@"arrTitle is:--> %@",arrTitle);
       }

       tempDict1 = (NSMutableDictionary*)[array objectAtIndex:0];
       array = [values valueForKey:@"rates"];
       NSLog(@"tempDict--%@",[tempDict1 objectForKey:@"AED"]);

       [array retain];
       [tbl_withData reloadData];
} 
```

uitableview代码如下

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"array-->%@",array);
    return [array count];

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    intIndexPath = indexPath.row;
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier] autorelease];
        cell.textLabel.adjustsFontSizeToFitWidth = YES;
        cell.textLabel.font = [UIFont systemFontOfSize:8];
        cell.textLabel.numberOfLines = 4;

    }

//    NSLog(@"data is like:--> %@",array);
//    cell.textLabel.text= [NSString stringWithFormat:@"%@",[array objectAtIndex:intIndexPath]];
    cell.textLabel.text =[array objectAtIndex:intIndexPath];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:05:00.347

浏览表视图编程指南

[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

你必须在你的类中实现 UITableView 委托方法来填充表格视图的内容。

另请参阅： [https ://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10)

这是代码：

```
 //this is your dictionary:
    self.values = [[[NSMutableDictionary alloc] init] autorelease];
    //filled it with values:
    [self.values setObject:@"201" forKey:@"ams"];
    [self.values setObject:@"500.50" forKey:@"hyd"];
    [self.values setObject:@"200.10" forKey:@"guj"];
    [self.values setObject:@"400" forKey:@"afgd"];
    //now get an array of keys out of it. Can do it anywehe... For example in connectionDidFinishLoading method
    self.keys = [[[NSArray alloc] initWithArray:[values allKeys]] autorelease]; 
```

现在 cellForRoAtIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier] autorelease];
        cell.textLabel.adjustsFontSizeToFitWidth = YES;
        cell.textLabel.font = [UIFont systemFontOfSize:8];
        cell.textLabel.numberOfLines = 4;

    }
    NSString *currentKey = [self.keys objectAtIndex:indexPath.row];
    NSString *currentValue = [self.values objectForKey:currentKey];

    NSString *cellText = [NSString stringWithFormat:@"%@:%@", currentKey, currentValue];

    cell.textLabel.text = cellText;

    return cell;
} 
```

它在我的机器上工作..

# javascript - 立方体网格未在指定的 div 中绘制

> ID：12407718
> 
> 赞同：1
> 
> 时间：2012-09-13T13:44:54.287
> 
> 标签：javascript, css, html, three.js

我在我的场景中绘制了一个圆环和立方体网格，我希望立方体位于屏幕的右下角，所以我这样做了：

```
<div style="position: absolute; bottom: 0px; right:0px; width: 100px; text-align: center; ">
     <script>
         var cube = new THREE.Mesh(new THREE.CubeGeometry(50,50,50),
         new THREE.MeshBasicMaterial({color: 0x000000}));
         scene.add(cube);   
     </script>
</div> 
```

但是，立方体仍然跟随屏幕的中心：http: [//medigarage.com/html5/js/three.js/examples/canvas_camera2.html](http://medigarage.com/html5/js/three.js/examples/canvas_camera2.html)

我错过了什么吗？提前谢谢。

编辑：

我尝试为立方体制作新的渲染器、场景和相机，如下所示：

**HTML 代码：**

```
<div id="share"> 
```

**CSS 代码：**

```
#share  {

             border: 1px solid black; /* or none; */
             margin: 20px;
             padding: 0px;
             width: 200px;
             height: 200px;
             position: absolute;
             right: 0px;
             bottom: 0px;

             } 
```

**JavaScript 代码：**

```
<script>
        //dom
        var container2=document.getElementById('share');
        //renderer
        var renderer2 = new THREE.CanvasRenderer();
        renderer2.setSize(200,200);
        container2.appendChild(renderer2.domElement);
        //Scene
        var scene2 = new THREE.Scene();
        //Camera
        var camera2 = new THREE.PerspectiveCamera(50,200/200,1,1000);
        camera2.up=camera.up;
        scene2.add(camera2);
        //Axes
        var axes2= new THREE.AxisHelper();
        scene2.add(axes2);
        //Add Cube
        var cube = new THREE.Mesh(new THREE.CubeGeometry(50,50,50),
               new THREE.MeshBasicMaterial({color: 0x000000}));
        scene2.add(cube);
        //

        renderer2.render(scene2,camera2);

        </script> 
```

我将 div 放在了正确的位置，但立方体不存在，在 Web 控制台中一切正常，对此我没有任何错误。你能指出我的缺失点吗？你仍然可以在这里看到它：http: [//medigarage.com/html5/js/three.js/examples/canvas_camera2.html](http://medigarage.com/html5/js/three.js/examples/canvas_camera2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:04:10.140

您可以按照以下示例小提琴做您想做的事：http: [//jsfiddle.net/CYMtV/](http://jsfiddle.net/CYMtV/)

另请参阅相关线程：[https ://github.com/mrdoob/three.js/issues/1372](https://github.com/mrdoob/three.js/issues/1372)

# javascript - jQuery $.inArray() 总是返回带有对象数组的 -1

> ID：12407719
> 
> 赞同：2
> 
> 时间：2012-09-13T13:44:59.133
> 
> 标签：javascript, jquery

我有一个对象数组，其中包含 columnNames 的键值对。

当我检查特定的 columnName 是否存在时，它总是返回 -1

这是一个示例[http://jsfiddle.net/trLkt/6/](http://jsfiddle.net/trLkt/6/)，将提供帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:53:11.793

您在数组中搜索*字符串*值，但在其中存储*对象*( )。无法自行决定与每个数组元素的属性进行比较，它只是将您正在搜索的值与每个数组元素进行比较。`columnModel`*`columnModel.push({'colName': $(this).text()});``$.inArray()``colName`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:18:28.523

你可以做两件事：

添加`strings`到数组而不是`objects`使用`.push`（如@lanzz 建议的那样），然后`$.inArray`将按预期工作。

或者，如果您确实需要在数组中存储对象（例如，如果您需要在每个对象中具有多个属性），则需要遍历每个对象并查看是否`colName`已经存在：

```
 var colExists = false;
    var text = $(this).text();
    $.each(columnModel, function(k, v) {
      if(text == v['colName']) {
        colExists = true;
      }
    }); 
```

然后将您的支票从 更改`if(colExists === -1)`为`if(!colExists)`。

**例子**

```
$(function () {
  $('#ddlMain').change(function (event) {
    $('option:selected', $(this)).each(function () {

      var colExists = false;
      var text = $(this).text();

      $.each(columnModel, function(k, v) {
        if(text == v['colName']) {
          colExists = true;
        }
      });

      if(!colExists) {
        columnModel.push({'colName': $(this).text()});
        alert($(this).text() + ' added to columnModel');
      }

    });
  });
}); 
```*

# android - 如何找出用户的 google play 国家？

> ID：12407720
> 
> 赞同：7
> 
> 时间：2012-09-13T13:44:59.517
> 
> 标签：android, google-play, in-app-billing

在我的应用程序中，我有应用程序计费支持，因为在实际向用户显示购买 UI 之前没有 API 可以获取商品的价格，我目前正在考虑对应用程序内的应用程序计费项目的价格进行硬编码。

但是，定价会因国家/地区而异，因此我需要找到一种方法来了解用户所在的国家/地区，以便在应用程序中显示正确的价格。

我发现向用户显示的价格取决于用户在创建 Google Play 帐户时选择的国家/地区，因此我需要一种方法来了解与用户的 Google Play 帐户关联的国家/地区。有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-01T06:42:50.100

Use [SkuDetails](https://code.google.com/p/marketbilling/source/browse/v3/src/com/example/android/trivialdrivesample/util/SkuDetails.java?r=ba61fb3aaad43650b1f0e73d6057d5374ff43518) object and getter for price, it will return you localized price for an item.

1.  Get `Inventory` object
2.  get SKU detail from it :

    userInventory.getSkuDetails(IabHelper.YOUR_SKU).getPrice();

More info here - [http://developer.android.com/training/in-app-billing/preparing-iab-app.html](http://developer.android.com/training/in-app-billing/preparing-iab-app.html)

# java - 在 Jquery 中迭代 Json 对象？

> ID：12407721
> 
> 赞同：0
> 
> 时间：2012-09-13T13:45:04.383
> 
> 标签：java, jquery, json, parsing

我想知道如何使用 jQuery 迭代 JSON 对象。我的要求是从 Java Servlet 到 UI 的列表，我必须用 AJAX 响应填充组合框。

上面的方法我已经使用 struts2 和 jQuery 完成了。现在我在茫茫人海中，如何在 JSP 中迭代 Java 列表：

```
$("#XXX option").remove(); 
$.each(data.YYYList, function(index, item) {
    $("#XXX").append($("<option></option>").text(item).val(item));
}); 
```

我已将 MIME 类型设置为`response.setContentType("application/json");`

任何人都可以指导我如何实现这一目标。如果需要我提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:59:12.973

根据 Esh 提供的少量信息，这是我为您列出的功能创建的示例。我有一个我想在多个选择框中使用的 JSON。

[小提琴](http://jsfiddle.net/Schlogen/gGx97/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:29:36.683

示例 Json：

```
 "yyyList": [
    {
      "Id": "1",
      "Name": "aaaa "
    }, {
      "Id": "2",
      "Name": "bbb "
    }, {
      "Id": "6",
      "Name": "ccc "
    }, {
      "Id": "7",
      "Name": "ddd "
    } ]

$.ajax({
              url: "URL",
               //data: "",
               type: "GET",
               dataType: 'json',
               success: function (data) {            
               $.each(data.YYYList, function () {
                  $('#state').append('<'option value='+this.Id+'>'+this.Name+'<'option>');
               });
            }
        }) 
```

`$('#state')`---> 为 HTML 中的选择标签提供相同的 id 请更正它的选项语法

希望这可以帮助。

# android - 调用 onCreateContextMenu() 后如何取消上下文菜单的创建

> ID：12407722
> 
> 赞同：2
> 
> 时间：2012-09-13T13:45:06.450
> 
> 标签：android, android-listview, contextmenu

我有一个注册列表视图以创建上下文菜单的活动：

```
registerForContextMenu(getListView()); 
```

问题是长按某些项目不应该出现上下文菜单，因为这些项目被禁用。

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);

    bool bDisplayMenu = isItemEnabled(((AdapterView.AdapterContextMenuInfo) menuInfo).position);

    if(bDisplayMenu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }
    else
    {
        // WHAT SHOUlD I DO HERE TO CANCEL THE CREATION OF THE CONTEXT MENU?
    }

} 
```

调用 onCreateContextMenu() 后，我看不到任何取消上下文菜单创建的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:16:16.317

好吧，事实证明，如果我在调用 super 后立即退出 onCreateContextMenu()，那么上下文菜单根本不会出现。

不确定这是要走的路（我没有看到任何有关此的文档）。

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo)
{
    super.onCreateContextMenu(menu, v, menuInfo);

    bool bDisplayMenu = isItemEnabled(((AdapterView.AdapterContextMenuInfo) menuInfo).position);

    if(bDisplayMenu)
    {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }
    else
    {
        return; // the context menu will not be displayed
    }

} 
```

# objective-c - 本地化电话号码格式

> ID：12407726
> 
> 赞同：13
> 
> 时间：2012-09-13T13:45:18.987
> 
> 标签：objective-c, ios, string, localization, formatting

我研究了`NSFormatter`,`NSNumberFormatter`和其他格式化类，但找不到内置解决方案。我需要根据国家代码格式化电话号码。

例如，对于美国，我得到一个字符串，例如`+16313938888`我需要将其格式化为`+1(631)393-8888`. 问题是我需要对所有格式都这样做。荷兰，我收到一个字符串`+31641234567`，它将是`+31(6)41 23 45 67`（类似的）。

200 多个国家的硬编码太乏味了，我真的不知道所有的格式规则。我忽略的文档中有什么东西吗，或者有人知道管理这个的开源类吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T21:45:25.027

有关 iOS 特定解决方案，请参阅[https://github.com/rmaddy/RMPhoneFormat](https://github.com/rmaddy/RMPhoneFormat)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T08:38:53.493

试试这个谷歌解决方案 - [https://github.com/me2day/libPhoneNumber-iOS](https://github.com/me2day/libPhoneNumber-iOS) 他们有 C++、Java、Objective-C 等的端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T14:03:08.610

不幸的是，iOS 没有为此提供任何公共 API。您可以尝试集成[libphonenumber](http://code.google.com/p/libphonenumber/)，它是用于解析和格式化国际电话号码的完整实现。它有一个 C++ 版本，所以理论上你可以与它交叉链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-30T22:19:18.243

您绝对不想对所有各种国家/地区格式进行硬编码。每个国家通常有 3-5 种格式。相反，使用格式数据库（例如 plist）并编写代码以根据给定的国家代码格式化数字。

可以在这里找到一个好的国际格式属性列表“UIPhoneFormats.plist”：[https://code.google.com/p/iphone-patch/source/browse/trunk/bgfix/UIKit.framework/PhoneFormats/UIPhoneFormats.plist? r=7](https://code.google.com/p/iphone-patch/source/browse/trunk/bgfix/UIKit.framework/PhoneFormats/UIPhoneFormats.plist?r=7)

在该列表中，'$' 允许任何字符，'#' 必须是数字，并且在数字之间插入 '(space)'、'('、')' 和 '-'。用户键入的非数字字符提示所需的格式。

我在[https://github.com/lathamglobal/iOS-Phone-Number-Formatter](https://github.com/lathamglobal/iOS-Phone-Number-Formatter)上分享了我的电话号码格式化课程，灵感来自 Ahmed Abdelkader 的工作。它是一个非常小的单类国际电话号码格式化程序，使用刚才提到的 plist。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-03T23:11:37.920

你可以试试这个：

```
 let phoneNumber : CNPhoneNumber
    let digits = phoneNumber.performSelector("digits").takeRetainedValue() as! String 
```

它直接为您提供带有电话号码的字符串，无需格式化。但是，如果该号码使用国际前缀保存，您也会在结果字符串中拥有它。

# c# - 从 C# 代码调用存储过程时，为什么不能创建全局临时表或截断它？

> ID：12407728
> 
> 赞同：1
> 
> 时间：2012-09-13T13:45:33.147
> 
> 标签：c#, sql, sql-server-2005

当我从 C# 代码调用存储过程时，我花了一整天的时间来调查为什么不能创建临时表。

让我们假设一段 C# 代码：

```
public void GetDataByFilter(string item, string filter ...) {
   ... 
   // provide stored procedure in new SqlCommand object
   sqlCommand.CommandType = CommandType.StoredProcedure;

   sqlCommand.Parameters.Add("@val1", aValue1);
   sqlCommand.Parameters.Add("@val2", aValue2);
   ...
   while(sqlDataReader.Read()) { /* process info here */ }
} 
```

和我的存储过程

```
ALTER PROCEDURE [dbo].[aProcedure]
  @val1 VARCHAR(255),
  @val2 VARCHAR(255),
  ...
AS 
BEGIN
  IF OBJECT_ID(N'tempdb..##aTempTable') IS NULL
    CREATE TABLE tempdb..##aTempTable (
          id1 INT,
              id2 INT,
              id3 VARCHAR(255),
              ...
    )

ELSE 
    TRUNCATE TABLE tempdb..##aTempTable

    -- insert information into this table
    SELECT @paramList = ' /*list of parameters*/';

    EXEC sp_executesql @sql, @paramList, ... parameters
END 
```

在 C# 代码中，在**另一个函数**中，我提供了

```
sqlCommand.CommandText = "SELECT * FROM tempdb..##aTempTable"; 
```

但是抛出了`tempdb..##aTemTable`不存在的异常。

如果我在 SSMS（Sql Server Management Studio）中执行存储过程，则创建表。

问题也**不仅仅**`TRUNCATE TABLE`在于操作。**`CREATE TABLE`**

 **我需要临时全局表才能相应地用于不同[的存储过程 存储过程创建的临时表可以用于另一个存储过程吗？](https://stackoverflow.com/questions/12312903/it-is-possible-for-created-temporary-table-by-a-stored-procedure-to-be-used-in-a).

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:02:53.650

我相信虽然可以做你所描述的事情，但它不太实用，因为它假定了很多棘手的时间：一个会话打开连接 A 并运行 proc 来创建 ##temp 表，然后那个会话只要连接 B、C 等需要能够访问临时表，就保持连接打开。

使用“永久”表的解决方案会更好，其中为每个“会话”添加具有唯一标识符（int 或 GUID）的行，该值由初始化调用返回（或者可以以其他方式检索或标识），并由会话的所有后续调用使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:58:12.720

正如我在[之前的回答](https://stackoverflow.com/a/12313043/15498)中提到的那样（但由于您当时没有解释您的场景，所以我没有详细说明）是在一个范围内创建的任何临时表都可以被任何嵌套范围访问。

因此，在您的 C# 中，您可以运行以下查询：

```
CREATE TABLE #aTempTable (
      id1 INT,
          id2 INT,
          id3 VARCHAR(255),
          ...
); 
```

然后：

```
[dbo].[aProcedure] 
```

然后：

```
[dbo].[bProcedure] 
```

然后：

```
SELECT * from #aTempTable 
```

前提是所有这些查询都使用同一个`SqlConnection`对象运行，并且连接始终保持打开状态。第一个和第四个查询仅在连接范围内运行。这两个存储过程调用在嵌套范围内运行。

不需要全局临时表。`aProcedure`可以简单地访问`#aTempTable`（并且不需要在任何地方对它的任何引用添加前缀`tempdb..`。**

# c# - 寻找天际线集

> ID：12407730
> 
> 赞同：4
> 
> 时间：2012-09-13T13:45:42.807
> 
> 标签：c#, algorithm, math

在解决问题之前，让我先解释一些定义：

假设 A 点是一个坐标（可能有双精度值），例如 (1.2,3.5,4.3,2.6)，与 B 点相同。

A 点优于 B 点，当且仅当 1\. A 点所有坐标 <= B 点所有坐标，且 2\. A 点一个坐标 < B 点对应坐标

例如：给定

```
A=(2,3,4,5)
B=(2,3,4,6) 
```

A 支配 B，因为条件 1 成立，并且对于条件 2，A 的第四个分量 < B 的第四个分量。

再举一个例子，

```
A=(2,3,4,5)
B=(2,3,4,5) 
```

A 都不支配 B，反之亦然，因为条件 2 在两种情况下都不成立。

现在给定一个n维坐标列表，我希望找到不被其他人支配的坐标集合，这些坐标称为天际线集合。

假设我有 5 个维度的坐标

```
(2,1,2,1,2)
(1,2,1,2,1)
(3,3,3,3,3)
(4,4,4,4,4) 
```

天际线集是

```
(2,1,2,1,2)
(1,2,1,2,1) 
```

现在我想写一个函数：

```
List<double[]> SkylineSet(List<double[]> Coordinates, int dimension) 
```

给定示例输入：

```
 List<double[]> newList=new List<double[]>();
 newList.Add(new double[] {2, 1, 2, 1, 2});
 newList.Add(new double[] { 1, 2, 1, 2, 1 });
 newList.Add(new double[] { 3, 3, 3, 3, 3 });
 newList.Add(new double[] { 4, 4, 4, 4, 4 }); 
```

`SkylineSet(newList,5)`将输出

```
(2,1,2,1,2)
(1,2,1,2,1) 
```

这可以通过每个坐标的成对比较来实现，但是坐标的数量可能非常大，有人知道如何有效地解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:01:08.047

将这些点放在 KD 树（或一些这样的数据结构）中。现在，您可以有效地找到以给定点为主的点。删除那些占主导地位的，重复所有剩余的点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:45:01.543

我不确定这是否可行。这在我的脑海中似乎是合理的。也可能这正是您已经在做的事情。

建立一个支配矩阵 NxN，其中 N 是点数。矩阵中的值是“相等”、“支配”、“支配”、“都不”。将所有矩阵单元设置为“相等”。该矩阵保存算法结束时的结果。

从第一个坐标开始。

我在这里假设我们有一个数组，其中包含当前坐标的所有值，但也与它们相关的点。

建立部分支配关系，只看当前坐标。支配关系可以具有以下值之一：“平等”、“支配”、“支配”。没有“两者都没有”。

在双嵌套循环中运行此数组（I = 0，N-2；J = I+1，N-1）。给定两点的关系 R 和这两个点的关系矩阵中的单元格 C 将矩阵更新为新值 C，如下所示：

如果 C 是“相等的”，那么 C = R。
如果 C 是“都不”，那么它是不变的。
如果 C 是“支配的”并且 R 是“支配的”，则 C 变为“两者都不是”，否则不变。
如果 C 是“支配的”并且 R 是“支配的”，则 C 变为“两者都不是”，否则不变。

对所有坐标重复该过程，在矩阵中累积结果。

最后遍历每个点的矩阵。取所有与任何其他点没有“支配”关系的点。

# android - 我想在android中发送忘记密码的邮件

> ID：12407731
> 
> 赞同：2
> 
> 时间：2012-09-13T13:45:48.040
> 
> 标签：android

我已经创建了登录演示。我正在使用与 PHP 代码连接的 JSON 解析器解析用户名和密码。我还完成了忘记密码的代码。但我无法收到任何邮件。为什么？我已经创建了一个忘记密码活动用于输入电子邮件 ID 的一个文本字段，当我点击提交按钮时，邮件应该与密码一起发送到我的收件箱。怎么做？有人请帮我吗？

这是我忘记密码的代码：

```
package com.Login;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ForgotPassActivity extends Activity {
     EditText address, subject, emailbody, et_email;
    @Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);
    setContentView(R.layout.forgot_password);
    TextView textv = (TextView) findViewById(R.id.lbl_loginhere);
    et_email = (EditText) findViewById(R.id.et_email);
    textv.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            ForgotPassActivity.this.finish();
            Intent intent = new Intent();
            intent.setClass(v.getContext(), LoginActivity.class);
            startActivity(intent);

    }
        //Code For Sending mail

    });
    Button b1 = (Button) findViewById(R.id.submitButton);
    b1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            sendEmail();
        }

    });

}
    public void sendEmail(){

          final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
          emailIntent.setType("plain/text");
          emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"testmail@testmail.com"});
          emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());
          emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailbody.getText());
          ForgotPassActivity.this.startActivity(Intent.createChooser(emailIntent, "Send mail..."));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:01:45.333

```
Edited 
```

如果您使用任何网络服务，更好的方法是通过传递用户电子邮件地址并在您的数据库中搜索并获取记录来调用网络服务。为了安全地传递数据，请创建 Post 服务，然后从您的服务（如 php 或任何其他技术）将邮件发送到带有密码的传入电子邮件。

**更新**

您可以从您的服务 mail() 中使用此功能，请参阅链接中的更多信息，这是简单的代码片段

```
<?php
// The message
$message = "Line 1\nLine 2\nLine 3";

// In case any of our lines are larger than 70 characters, we should use wordwrap()
$message = wordwrap($message, 70);

// Send
mail('caffeinated@example.com', 'My Subject', $message);
?> 
```

[http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# c# - 将列表中的变量绑定到文本块 INotifyPropertyChanged

> ID：12407732
> 
> 赞同：3
> 
> 时间：2012-09-13T13:45:48.987
> 
> 标签：c#, binding, inotifypropertychanged

我想将列表中的字符串元素绑定到文本框。当我单击一个元素时，文本会更新。但是当列表中的元素发生变化时，文本框文本不会改变..

我的代码如下所示：

**XAML：**

```
 <TextBlock Foreground="White" Name="xTitel" Text="{Binding Titel}" Width="200"  FontSize="36" FontWeight="Bold"/> 
```

**点击功能：**

```
 foreach (Channel c in App.Connector.ChannelList)
        {
            if (c.StationName == StationName)
            {

                Binding b = new Binding();
                b.Source = c.CurrentTitle;
                xTitel.SetBinding(TextBlock.TextProperty, b);
            }
        } 
```

**渠道定义：**

```
 public class GlobalVariables : INotifyPropertyChanged
{
    public static MediaElement mediaElement;
    private ObservableCollection<Channel> channelList;
    public ObservableCollection<Channel> ChannelList
    {
        get { return channelList; }
        set
        {
            channelList = value;
            NotifyPropertyChanged("ChannelList");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**编辑：**

我忘了说：

在我的 XAML 中，我有一个 GridView，它与 Channellist 绑定一起使用。如果我是正确的，那么每次我的 Gridview 更新时，文本框都应该更新。这是我的网格视图：

```
<local:VariableGridView
            IsSwipeEnabled="True"
            Background="Transparent"
            x:Name="itemGridView"
            Margin="0,0,0,-3"
            Padding="116,0,40,46"
            SelectionMode="None"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick" 
            Grid.RowSpan="2"

            >
            <local:VariableGridView.ItemsPanel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid Background="Transparent" Orientation="Vertical" ItemWidth="120" ItemHeight="120"/>
                </ItemsPanelTemplate>
            </local:VariableGridView.ItemsPanel>
            <local:VariableGridView.ItemTemplate>
                <DataTemplate>
                    <Grid Background="{Binding Background}">
                        <StackPanel Orientation="Horizontal" Margin="10,0,0,0">
                            <Image x:Name="CurrentCover" Source="{Binding CurrentCover}"  Width="90" Height="90"/>
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Margin="10,25,10,10">
                                <TextBlock Foreground="White" Text="{Binding Name}" Width="200"  FontSize="24" FontWeight="Bold"/>
                                <TextBlock Foreground="White" Text="{Binding CurrentArtist}" Width="200"  FontSize="12" FontWeight="Bold" />
                                <TextBlock Foreground="White" Text="{Binding CurrentTitle}" Width="200"  FontSize="12" />
                            </StackPanel>                            
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </local:VariableGridView.ItemTemplate>
        </local:VariableGridView> 
```

和 Channel 类：

```
 public class Channel : INotifyPropertyChanged
{

    public int Width { get; set; }
    public int Height { get; set; }
    public string Logo { get; set; }
    public string StationName { get; set; }
    public string Color { get; set; }
    public SolidColorBrush Background { get; set; }
    //public string Name { get; set; }
    private string name;
    public string Name
    {
        get { return name; }
        set
        {
            name = value;
           NotifyPropertyChanged("Name");
        }
    }

     //..... More Code ...
 } 
```

（此 Gridview 中的文本框会更新。但我想在代码上设置绑定的其他文本框不会更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:08:40.187

应该是这个吗？

```
Binding b = new Binding("CurrentTitle");
b.Source = c;
xTitel.SetBinding(TextBlock.TextProperty, b); 
```

编辑解释一下：如果直接绑定到字符串属性，您将看不到更改，因为字符串是不可变的。它将永远设置在原始字符串上。您必须绑定到保存字符串属性的对象，并为绑定提供一个属性名称（路径）以监视更改。

# eclipse - 在启动 Jetty 之前被卡住，直到我进入

> ID：12407734
> 
> 赞同：3
> 
> 时间：2012-09-13T13:45:54.177
> 
> 标签：eclipse, web-applications, jetty, embedded-jetty

我对**run-jetty-run** Eclipse 的插件有疑问。我使用基本配置，没有任何更改：没有 SSL、parentLoadPriority、...

**每次我从“运行方式 > 配置”启动它时，服务器都会自行加载，但似乎正在等待某些东西。**

```
Running Jetty 8.1.2 v20120308
ParentLoaderPriority enabled
Context path:/myProject
[lib loading...]
Excluded entry=D:\myProject\workspaces\workspace\myOrg\myProject\target\test-classes 
2012-09-13 15:27:37.868:INFO:oejs.Server:jetty-7.6.2.v20120308
2012-09-13 15:27:38.649:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/myProject, file:/D:/myProject/workspaces/workspace/myOrg/myProject/src/main/webapp/]}
2012-09-13 15:27:39.102:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

**当我敲击 [Enter] 大约 5 次时，它确实开始......**并回复我的外部请求 (http)。

我可以通过 jetty Running Jetty 8.1.2 v20120308（和 6.1.26）在我的所有项目中重现它。

但非常奇怪的是，当我运行 mvn jetty:run 命令（所以不使用 run-jetty-run 插件）时，这种行为完全消失了。必须有不同的配置，但我不知道是什么！

我确信 Maven 是解决方案（;)）...但并非我公司的所有项目都在使用 Maven（实际上其中很少 :D）

有人可以给我一个提示吗？不要犹豫，询问详情。

# c - 是否可以将 char 中的位映射到短的任意位？

> ID：12407735
> 
> 赞同：0
> 
> 时间：2012-09-13T13:45:55.907
> 
> 标签：c, mapping, microcontroller

我想知道是否有任何方法可以将较小变量的位任意映射到较大变量中的位。我想我的问题通过一个例子会更容易理解。

如果我有一个 16 位寄存器“PORTA”，然后我有一个 8 位变量 OPT1，我希望能够写

```
PORTA = 0x0000
OPT1 = 0xAB 
```

最后得到包含 0x0A0B 的 PORTA。

只需写入变量 OPT1，这些位就会自动映射如下

```
OPT1_bit0 => PORTA_bit0
OPT1_bit1 => PORTA_bit1
OPT1_bit2 => PORTA_bit2
OPT1_bit3 => PORTA_bit3

OPT1_bit4 => PORTA_bit8
OPT1_bit5 => PORTA_bit9
OPT1_bit6 => PORTA_bit10
OPT1_bit7 => PORTA_bit11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:09:08.377

我认为您不能**直接**映射分配，这意味着：

```
OPT1 = 0xAB => PORTA = 0x0A0B 
```

但是，您可以通过宏自动执行该作业。前任：

```
static int PORTA = 0x0000;
#define OPT1(val) (PORTA = (val&0x0F)|((val&0xF0)<<4)) 
```

因此，现在当您对 OPT1 进行“分配”时，它每次都会为您正确地移动到 PORTA 中：

```
int main(int argc, char *argv[]) 
{
  OPT1(0xAB);
  printf("PORTA's value: %#x\n", PORTA);
  return 0;
}

mike@linux-4puc:~> ./a.out 
PORTA's value: 0xa0b 
```

# objective-c - 单击按钮后使其禁用一段时间（XCode）

> ID：12407740
> 
> 赞同：1
> 
> 时间：2012-09-13T13:46:05.530
> 
> 标签：objective-c, xcode

我想知道如何在单击按钮后禁用按钮几秒钟。我可以用代码禁用它

> button.enabled = button.enabled = 否；

但我不确定它是如何在几秒钟内完成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T13:53:14.353

使用此代码：

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    button.enabled = NO;
}); 
```

编辑：如果您想先禁用按钮并稍后执行一些代码，请执行以下操作：

```
button.enabled = NO;
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    //this will be executed after 2 seconds
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:53:45.427

您可以使用

```
[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(setButtonEnabled) userInfo:nil repeats:NO];

-(void)setButtonEnabled{
    [myButton setEnabled:YES]
} 
```

将按钮设置为不可见后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-07T13:51:12.747

感谢@Adam。

对于 Swift 3.0：

```
button.isEnabled = false
DispatchQueue.main.asyncAfter(deadline: .now() + .milliseconds(2000)) {
        btnCheckout.isEnabled = true
} 
```

# asp.net-mvc-3 - System.MissingMethodException：没有为此对象定义无参数构造函数

> ID：12407741
> 
> 赞同：0
> 
> 时间：2012-09-13T13:46:08.160
> 
> 标签：asp.net-mvc-3

“/”应用程序中的服务器错误。

没有为此对象定义无参数构造函数。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.MissingMethodException：没有为此对象定义无参数构造函数。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +199
   System.Web.Mvc.DefaultModelBinder.BindComplexModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +572
   System.Web.Mvc.DefaultModelBinder.BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) +454
   System.Web.Mvc.ControllerActionInvoker.GetParameterValue(ControllerContext controllerContext, ParameterDescriptor parameterDescriptor) +317
   System.Web.Mvc.ControllerActionInvoker.GetParameterValues(ControllerContext controllerContext, ActionDescriptor actionDescriptor) +117
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +476
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +304
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +389
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +319
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +76
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +251
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8969412
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:51:56.693

检查动作参数，参数类型之一没有默认构造函数，这就是为什么 MVC 无法绑定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T07:45:47.223

问题在这里得到解答：[“/”应用程序中的服务器错误。没有为此对象定义无参数构造函数](https://stackoverflow.com/questions/331276)。

传递给您的请求的视图模型的成员之一可能没有无参数构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T12:44:44.973

```
private ISupplierRepository _supplierRepository;
public SupplierController()
        : this(new SupplierRepository())
        {
        }
        public SupplierController(ISupplierRepository repository)
        {
            _supplierRepository = repository;
        } 
```

# python - Webfaction Django 1.4.1：easy_thumbnails 3.0b –“无法获取缩略图”错误

> ID：12407745
> 
> 赞同：0
> 
> 时间：2012-09-13T13:46:20.507
> 
> 标签：python, django, thumbnails, webfaction

`{% thumbnail photo.image 300x170 %}`我使用easy_thumbnails，它在开发机器上运行良好，但在生产中，当我使用templatetag时，我得到如下所示的错误。

虽然可以直接浏览[http:](http://sitename.com/media/uploads/2012/09/13/microsoft1.jpeg) //sitename.com/media/uploads/2012/09/13/ microsoft1.jpeg`。媒体设置正确并且上传被放置在正确的位置，缺少什么然后可能是什么问题？

```
File "/home/imanhodjaev/lib/python2.7/django/template/base.py" in render
  823\. bit = self.render_node(node, context)
File "/home/imanhodjaev/lib/python2.7/django/template/debug.py" in render_node
  74\. return node.render(context)
File "/home/imanhodjaev/lib/python2.7/easy_thumbnails/templatetags/thumbnail.py" in render
  99\. (source, e))
Exception Type: TemplateSyntaxError at /petition/microsoft-myi-hotim-kyirgyizskij-rasklad-klaviatur/update-picture
Exception Value: Couldn't get the thumbnail uploads/2012/09/13/microsoft1.jpeg: The source file does not appear to be an image 
```

### 模型

`ThumbnailerImageField`从`easy_thumbnails`被使用

```
class Petition(models.Model):
    title = models.CharField(max_length=512)
    slug = models.SlugField(max_length=512, editable=False, blank=True)
    description = models.TextField()
    petition_text = models.TextField(blank=True, null=True)
    petition_picture = ThumbnailerImageField(upload_to=get_upload_path, blank=True) 
```

### 更新

我从 Django 的管理外壳进行了调查，并且`get_thumbnailer`功能正常

```
>>> thumb_url = get_thumbnailer(pet.petition_picture)
>>> thumb_url
<ThumbnailerImageFieldFile: uploads/2012/09/13/microsoft1.jpeg>
>>> thumb_url.url
'/m/uploads/2012/09/13/microsoft1.jpeg' 
```

当我调用 get thumbnail 方法时它失败了

```
>>> thumb_url = get_thumbnailer(pet.petition_picture).get_thumbnail(options)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/home/imanhodjaev/lib/python2.7/easy_thumbnails/files.py", line 380, in get_thumbnail
    thumbnail = self.generate_thumbnail(thumbnail_options)
  File "/home/imanhodjaev/lib/python2.7/easy_thumbnails/files.py", line 290, in generate_thumbnail
    "The source file does not appear to be an image")
InvalidImageFormatError: The source file does not appear to be an image 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:50:54.590

问题是因为默认情况下`pip install PIL`，我的 Webfaction 实例是`libjpeg`这样链接的，并`pip install PIllow`遵循[http://community.webfaction.com/questions/7340/how-to-install-pil-with-truetype-support上的文章](http://community.webfaction.com/questions/7340/how-to-install-pil-with-truetype-support)

# android - Android中数据库的内存安全加载

> ID：12407750
> 
> 赞同：1
> 
> 时间：2012-09-13T13:46:32.410
> 
> 标签：android, database, android-asynctask, loading

所以我一直在做一大堆阅读，我意识到旧`AsyncTask`的 android 要求我们将它链接到 Activity 的实例；然而，在方向改变时，这会破坏这个特定的活动，并重新创建它导致内存泄漏。第一个`AsyncTask`是指活动的第一个实现，而正在显示的是第二个。3.0 及更高版本的`Loader`类负责了大部分工作，但我对初始化应用程序时如何加载数据库感到困惑。

目前我正在使用 AsyncTask，但我意识到如果有人在加载过程中改变方向，我们就会得到内存泄漏。如何使用 Loader 执行此操作？我正在更新显示（以防止超时并让用户知道发生了什么），完成后，我关闭警报。

我将如何使用 Loaders 进行此加载？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:58:02.023

乔恩，

我实际上不确定您所说的 Asynctask 需要一个活动实例是什么意思？我一直在使用 AsyncTasks，而从未传递对活动的引用。那是你需要做的事情吗？您可以使用应用程序上下文来避免活动泄漏吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:32:51.987

您可以发布您的代码以使其更清晰。有很多方法可以解决您的问题。OnProgressUpdate 在 UI 线程上调用，因此您可以简单地通过处理程序甚至意图向活动发送消息，以确保 AsyncTask 仅处理应用程序上下文而不是活动上下文。再次，请发布一些代码。

# java - 无法在 JBoss 6.1 中从 sar 部署 POJO

> ID：12407751
> 
> 赞同：2
> 
> 时间：2012-09-13T13:46:35.363
> 
> 标签：java, jboss, pojo, sar

我尝试通过 SAR 在 JBoss 6.1 中部署和启动非常简单的 pojo。我的 jboss-service.xml 看起来像：

```
<deployment  xmlns="urn:jboss:bean-deployer:2.0">
    <bean name="TestBean" class="somepacage.TestBean">
        <alias>bw:name=testBean</alias>
        <install method="start"/>
        <uninstall method="stop"/>
    </bean>
</deployment> 
```

POJO 只是一个具有默认构造函数和运动公共 start() 和 stop() 方法的 bean。我看到 SAR 被拾取和部署，模块和类加载器被创建并通过 jmx 控制台可见。但是里面的bean完全被忽略了。

我错过了什么重要的事情吗？

蒂亚，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:09:28.787

事实证明，pojos 仅从以下结尾的文件部署：

```
*-jboss-beans.xml 
```

更改名称后，一切正常

# c++ - C99 式 VLA 有哪些技术缺点？

> ID：12407754
> 
> 赞同：13
> 
> 时间：2012-09-13T13:46:41.840
> 
> 标签：c++, c, c++11, c99, variable-length-array

我从很多人那里听说 C99 中引入的可变长度数组很糟糕。IRC 上的一些人在一分钟前说“我不认为 C++ 会获得 VLA，strosoup 对它们发表了一些非常负面的评论”。

那些人讨厌 VLA 的原因是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T14:03:31.560

VLA 在运行时在堆栈上分配数组，这使得确定编译时使用的堆栈大小变得更加困难，甚至不可能。由于堆栈具有相当少量的可用内存（与堆相比），许多人担心 VLA 有很大的堆栈溢出潜力。

即将发布的 MISRA-C 编码标准版本很可能也将禁止 VLA。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T18:45:08.723

尽管可变长度数组有其问题，但应该记住它们是如何产生的：作为 的替代品`alloca()`，这可以说[是更成问题*的*](http://c-faq.com/malloc/alloca.glb.html)。

虽然在 PDP-11 上实现它是微不足道的，但在其他架构上并非如此，Ritchie 和 Thompson[将它从他们的实现](http://yarchive.net/comp/alloca.html)中删除。

然而，可变大小的自动分配显然已经足够有用，`alloca()`尽管它存在问题，但它还是得到了复活（特别是，它不能在任何可能调用任意函数的地方使用，而且在许多架构上它必须是内置的编译器）。C 工作组同意提供这样的功能，但认为可变长度数组是更好的解决方案。

如果您查看 C99 添加的功能（复数、类型通用数学、`restrict`...），您应该注意到其中许多功能旨在使 C 成为更好的数值计算语言。可变长度数组在那里也很有用，我相信当时 Fortran 已经有了它们。此外，它们的引入还导致了可变修改的派生类型（例如，指向可变大小数组的指针），这在处理矩阵时特别有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T15:24:02.737

正如其他人指出的那样，VLA 使您的堆栈帧非常容易溢出。我不是编译器编写者，但我的理解是 VLA 也可能成为支持的错误（它们现在在 C2011 中是可选的）。并且它们的使用仅限于块或函数范围；您不能在文件范围内使用 VLA，它们也不能有外部链接。

不过，我不希望看到 VLA 语法消失。当*动态*分配内部维度直到运行时才知道的多维数组时，它非常方便，例如：

```
size_t r, c;
// get values for r and c
int (*arr)[c] = malloc(r * sizeof *arr);
if (arr)
{
   ...
   arr[i][j] = ...;
   ...
   free(arr);
} 
```

一个连续分配（和一个对应的`free`），*我*可以将其下标为二维数组。替代方案通常意味着零碎分配：

```
size_t r, c;
...
int **arr = malloc(sizeof *arr * r);
if (arr)
{
  for (i = 0; i < c; i++)
    arr[i] = malloc(sizeof *arr[i] * c);
  ...
  arr[i][j] = ...;
  ...
  for (i = 0; i < c; i++)
    free(arr[i]);
  free(arr);
} 
```

或使用一维偏移：

```
int *arr = malloc(sizeof *arr * r * c);
if (arr)
{
  ...
  arr[i * r + j] = ...;
  ...
  free(arr);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T13:59:00.490

VLA 使堆栈溢出变得更加容易。在您将使用 VLA 的大多数地方，您会将长度基于函数参数之一。如果参数不是您所期望的，您最终可能会在堆栈上分配一个非常大的数组。除非您可以确定没有任何参数组合会导致堆栈溢出，否则您应该使用动态分配。

在嵌入式平台上使用它们可能是有意义的一个地方，因为在进行嵌入式编程时，您可能会密切跟踪内存使用情况以确保不会发生堆栈溢出，这是少数几种情况之一.

# iphone - 如果我更改了 iphone 5 的应用程序图形，它是否适用于 iphone 4、3GS

> ID：12407757
> 
> 赞同：1
> 
> 时间：2012-09-13T13:46:45.990
> 
> 标签：iphone, ios

如果我更改了 iphone 5 的应用程序图形，它是否适用于 iphone 4、3GS 或用户必须像在 iPad 上下载 iphone 应用程序时那样调整应用程序的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:54:14.567

@2X 仍然有效。但是我确实下载了带有 iOS 6 Gold Master 种子的 xcode 4.5 并在昨晚玩了它。初始屏幕将包括新的稍高分辨率的图像 11??x640 以及 960x640 和 480x360。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:57:05.657

对于全屏图像，您必须提供至少两个版本，最好是三个。

一个是 640 × 1136，一个是 640 x 960，一个是 320 x 480。

对于 3.5" Retina 版本，您可以使用自动选择（又名@2x）。对于以前的 4" Retina 版本，您似乎必须包含自己的代码才能选择正确的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:51:19.090

如果您的意思是同时使用正常大小的图像和 2x 图像进行视网膜显示，那么在旧设备上不会有问题。

他们只会拾取常规尺寸的图像，而具有视网膜显示的图像将加载@2x 的图像。

您必须考虑的是，如果您不包含常规尺寸的图像（如果您只使用 @2x 图像），旧设备*将***不会**加载它们。

# ibm-mq - WMQ 如何在远程和本地队列管理器之间交换 DLQ 信息？

> ID：12407759
> 
> 赞同：5
> 
> 时间：2012-09-13T13:46:48.887
> 
> 标签：ibm-mq

当本地队列管理器在其 AMQ 错误日志中收到以下消息时：

> 2012 年 9 月 13 日 08:00:19 - 进程（3017.20）用户（mqm）程序（amqrmppa_nd）AMQ9544：消息未放入目标队列。
> 
> 解释：在处理通道“TO_QM_QD2T1_C1”期间，无法将一条或多条消息放入目标队列，并尝试将它们放入死信队列。队列的位置是2，其中1是本地死信队列，2是远程死信队列。

... MQ 交换此类信息的机制是什么？通道程序 API 本身是否有内置设施，或者信息交换是否作为离散消息放置在`SYSTEM.CLUSTER.COMMAND.QUEUE`（在集群的情况下）？鉴于这可能发生在远程队列定义情况下，只有简单的发送方/接收方通道对，并且不一定需要相应的命令队列，我可以想象它将通过通道进程通信来处理......只是想知道......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:56:31.010

通道代理在它们之间进行双向通信，即使消息仅在一个方向流动。当一条消息未能在远程端找到目的地时，接下来发生的事情有多种可能性。*只有当消息可以成功放置在某个地方*并且首先尝试的是远程 DLQ时，通道才会继续运行。如果失败，本地 MCA 必须重新定位消息或停止通道。因此，两个消息通道代理在它们之间确定发生了什么以及通道的状态应该是什么。

错误消息的特殊措辞反映了消息的不同处置源于相同的代码路径和异常处理以及WMQ的优化。MCA 知道该消息当时已被放入 DLQ，而不是有两个不同的错误消息或逻辑来确定使用 DLQ 的措辞，它只是将一个数字放入模板中。因此，单个错误消息和简化的逻辑用于两种可能性。

# vb.net - 为什么我不能在 Windows 上的 VS2010 中定位 Mono？

> ID：12407763
> 
> 赞同：1
> 
> 时间：2012-09-13T13:47:06.217
> 
> 标签：vb.net, visual-studio-2010, mono

我已将 Mono 框架下载并安装到我的 Win7 开发机器上。然后我按照[此处](http://ralch.wordpress.com/2011/02/13/how-to-use-mono-on-visual-studio-2010/)的说明让 Visual Studio 2010 允许以 Mono 框架而不是 .NET 为目标。然后，我使用 VB 创建此测试控制台应用程序，并在项目的高级编译选项中将目标框架设置为“Mono 2.10.8 配置文件”：

```
Dim runningOnMono As Boolean = Not IsNothing(Type.GetType("Mono.Runtime"))
Console.WriteLine("Running on Mono =  " & runningOnMono.ToString) 
```

当我在 Win7 开发机器上运行它时，它返回 False，即不在 Mono 上运行。当我在仅安装了 Mono 的 Linux 机器上运行该程序时，它返回 True。

我可以在 VS 和智能感知工作中引用 Mono 框架的部分内容，但是当我进行此调用时：

```
Dim monoinf As New Mono.Unix.UnixDriveInfo("g:") 
```

我得到这个例外：

====================================

FileNotFoundException 未处理：无法加载文件或程序集“Mono.Posix，Version=4.0.0.0，Culture=neutral，PublicKeyToken=0738eb9f132ed756”或其依赖项之一。该系统找不到指定的文件。

====================================

Mono.Posix.dll 4.0.0.0 版***确实***存在于许多目录中，包括专门为 VS Mono 配置文件创建的目录。我什至尝试将其复制到测试应用程序的目录中。

只是我在 Win7 盒子上的单声道安装是一团糟吗？智能感知如何工作，但对 Type.GetType("Mono.Runtime") 的调用返回 Nothing ？

我试图以 Mono 为目标的原因是因为 System.IO.DriveInfo 类在 Mono 上不起作用，所以我认为如果我想在 Windows 和 Linux 上运行，我必须使用 Mono.Unix.UnixDriveInfo。我需要获得 USB 闪存驱动器的可用空间。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:59:43.207

您已经按照博客文章定位了 Mono，但您应该使用 mono.exe 在 Mono 命令提示符下启动可执行文件（例如 test.exe），

`mono.exe test.exe`

这是在 Windows 上加载 Mono 运行时而不是 .NET Framework 的唯一方法。

# php - 使用范围解析运算符 (::) 时获取继承类的类名

> ID：12407764
> 
> 赞同：3
> 
> 时间：2012-09-13T13:47:11.637
> 
> 标签：php, oop, scope-resolution

> **可能重复：**
> [PHP get_class 的功能](https://stackoverflow.com/questions/12390679/functionality-of-php-get-class)

对于一个小的 ORM-ish 类集，我有以下内容：

```
class Record {
  //Implementation is simplified, details out of scope for this question.
  static public function table() {
    return strtolower(preg_replace('/([a-z])([A-Z])/', '$1_$2', get_class()))."s";
  }

  static public function find($conditions) {
    //... db-selection calls go here.
    var_dump(self::table());
  }
}

class Payment extends Record {
}

class Order extends Record {
  public $id = 12;
  public function payments() {
    $this->payments = Payment::find(array('order_id', $this->id, '='));
  }
}

$order = new Order();
$order->payments();
#=> string(7) "records" 
```

我*希望*这段代码能打印出来：

```
#=> string(8) "payments" 
```

但是，相反，它打印`records`. 我试过`self::table()`了，但结果是一样的。

**编辑，在评论中的一些问题之后** `table()`是一种方法，它只是将类的名称映射到其对象所在的表：`Order`生活在`orders`，`Payment`生活在`payments`；`records` *不存在！*）。当我打电话时`Payments::find()`，我希望它在桌子上搜索`payments`，而不是在桌子上`records`，也不在桌子上`orders`。

我究竟做错了什么？如何获取调用 ::is 的类的类名，而不是定义 is 的类？

重要的部分可能是`get_class()`，无法返回正确的类名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:58:22.547

如果您使用的是 php 5.3 或更高版本，则可以使用[get_call_class 。](http://php.net/manual/en/function.get-called-class.php)它为您提供调用静态方法的类，而不是实际定义该方法的类。

**更新**

您需要调用“find”的类的类名。您可以在 find 方法中获取类名并将其作为参数提供给表（可能将其重命名为 getTableForClass($class)）方法。get_call_class 将为您提供 Payment 类，表方法派生表名并返回它：

```
class Record {
    //Implementation is simplified, details out of scope for this question.
    static public function getTableForClass($class) {
        return strtolower(preg_replace('/([a-z])([A-Z])/', '$1_$2', $class))."s";
    }

    static public function find($conditions) {
        //... db-selection calls go here.
        $className = get_called_class();
        $tableName = self::getTableForClass($class);

        var_dump($tableName);
    }
 } 
```

# php - php信号量不起作用

> ID：12407767
> 
> 赞同：24
> 
> 时间：2012-09-13T13:47:18.750
> 
> 标签：php, semaphore, apc

我有以下代码，信号量不会按预期锁定它。

**（我知道 apc_inc。这不是我要找的。）**

```
$semkey = sem_get(123);
sem_acquire($semkey);

$count = apc_fetch('count111');
if(!$count) $count = 0;
$count++;
apc_store('count111', $count);

sem_release($semkey); 
```

其次是

`ab -n 4000 -c 200 http://localhost/test.php`

0 个请求失败。

但在那之后一个`apc_fetch('count111')`节目只有〜1200次点击

ubuntu 12.04 (64bit) 上的 nginx，php 5.3.16~dotdeb，php-fpm

*   **更新 1**：在 Linux mint 5.4.6~dotdeb 上完美运行，内置 Web 服务器。我将尝试使用相同版本的同一台机器与 nginx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:21:54.080

显然，问题出在 APC 本身，而不是信号量。
更新到**PHP 5.4.8** -1~dotdeb.0 解决了 nginx 和内置服务器测试运行的问题。

# c# - asp:FileUpload 控件，选择文件意味着点击上传按钮时页面不再解析

> ID：12407768
> 
> 赞同：2
> 
> 时间：2012-09-13T13:47:29.260
> 
> 标签：c#, asp.net

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UploadVideo.ascx.cs"      Inherits="Controls_UploadVideo" %>

<h4>Select a video file to upload:</h4>
<asp:UpdatePanel ID="UpdatePanel" runat="server" UpdateMode="Conditional">
<ContentTemplate>

    <asp:FileUpload id="fuUploadVideo"                  
        runat="server">
    </asp:FileUpload>
    <br /><br />

    <asp:Button id="btnUploadVideo" 
        Text="Upload file"
        OnClick="btnUploadVideo_Click"
        runat="server">
    </asp:Button>      

    <hr />

    <asp:Label id="UploadStatusLabel"
        runat="server">
    </asp:Label>
</ContentTemplate>
<Triggers>
    <asp:PostBackTrigger ControlID="btnUploadVideo" />
</Triggers> 
```

如果使用文件上传控件选择视频文件，则单击文件上传按钮不会解析网页。一切都在我的本地机器上运行。

如果没有选择文件，那么它会转到我期望的网站。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:58:54.623

关于这个有一篇很长的[帖子](http://geekswithblogs.net/ranganh/archive/2008/04/01/file-upload-in-updatepanel-asp.net-ajax.aspx)，实际上 a`FileUpload`在`UpdatePanel`. 有一些变通方法，Claudio 的解决方案可能是最适合您的情况的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:51:00.907

到目前为止，我知道，标准`FileUpload`在 UpdatePanel 中不起作用。您可以改用[AsyncFileUpload](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/AsyncFileUpload/AsyncFileUpload.aspx)控件。

# c++ - 对 [class::function] 的未定义引用/对 [class] 的 typeinfo 的未定义引用

> ID：12407770
> 
> 赞同：3
> 
> 时间：2012-09-13T13:47:33.090
> 
> 标签：c++, c++11

我有一个用 3 个纯虚函数定义的基类：

```
class Baseclass
{
public:
    virtual ~Baseclass() {};
    virtual void getSomething(std::vector<uint8_t>& something) const = 0;
    virtual uint8_t classLength() const = 0;
} 
```

从那我派生出另外两个类

```
class DerivedA : public Baseclass
{
public:
    DerivedA();
    ~DerivedA();
    bool setParamA(const std::vector<uint8_t> value);
    bool setParamB(const std::vector<uint8_t> value);
    void getSomething(std::vector<uint8_t>& something) const;
    uint8_t classLength() const;
private:
    uint8_t mParamA;
    uint8_t mParamB;
} 
```

第二类类似于第一类。

这对于我的单元测试（常规分配，无指针）可以完美编译和工作。

现在我尝试将它（它被编译为库）集成到我的其余代码中，如下所示：

```
std::shared_ptr<Baseclass> object;
object = std::make_shared<DerivedA>(); // 1
std::dynamic_pointer_cast<DerivedA>(object)->setParamA(...) // 2 
```

编译进行得很顺利，但链接会出现以下错误：

对 [class] 的类型信息的
未定义引用（第 1 行） 对 [class::function] 的未定义引用（第 2 行）

在这个命令上

```
g++-4.7  -o ../Deliv/GnuDebug/ClassesTest ../Deliv/GnuDebug/buildsupport/cppunit/mainCB.o   -pthread  ../../../../../../3rdparty/libcppunit/obj/native-gcc/libcppunit/src/cppunit/.libs/libcppunit.a ../../../Classes/Deliv/GnuDebug/libClasses.a 
```

另一个奇怪的事情是它只对派生类中的 1 个产生此错误，并且派生类中的 1 个在上述构造中用于分配 shared_ptr

我不知道这里有什么问题，如果有人能指出我正确的方向，我将永远感激

**编辑解决方案：**

我找到了解决问题的方法，以供进一步参考：

设置：

```
Baseobject, DerivedA, DerivedB -> libObjects.a
Functionality using DerivedA, DerivedB -> libFunctionality.a
TestFunctionality using Functionality -> Error 
```

问题：

链接器在知道 libObjects 之前尝试链接到 libFunctionality 并因此给出错误。

解决方案：

更改链接库的顺序。

奇怪的行为：

我只得到了 DerivedA 的错误，而不是 DerivedB 的错误。如果我使用 DerivedA 注释掉代码，TestFunctionality 将编译并运行而不会出错。
有没有人知道为什么会这样？

有人可以验证我的解释是否正确，也许可以指出一些解释这个问题的文章吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:39:40.833

您必须实现该函数`bool DerivedA::setParamA(const std::vector<uint8_t> value);`，而不仅仅是对其进行声明。

# perl - 将变量放入数组

> ID：12407776
> 
> 赞同：-1
> 
> 时间：2012-09-13T13:47:46.547
> 
> 标签：perl, cgi

如何将变量放入数组中是我尝试过的但没有运气。

```
 #!/usr/bin/perl

    use CGI qw(:standard);
    use CGI::Carp qw(warningsToBrowser fatalsToBrowser);
    use strict;

    my $State = "Alabama 205 251 256 334 659 938";

    my @Array = qw($State);

    print "@Array"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:53:40.273

我认为您的意思是如何将字符串中的这些空格分隔值转换为数组形式？

```
my @Array = split ' ', $State; 
```

那是假设你不能直接把值放进去，当然，像这样：

```
my @Array = qw(Alabama 205 251 256 334 659 938); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:53:52.910

`qw`是一个引用单词的特殊运算符，它不进行插值。如果您希望数组包含单词，可以使用[split](http://p3rl.org/split)：

```
my @Array = split / /, $State; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T13:54:19.540

您需要将[`push`](http://perldoc.perl.org/functions/push.html)其放入或只是将其放入列表中。[`qw`](http://perldoc.perl.org/functions/qw.html)从字面上获取您的字符串 "$State" 并且不使用变量的值。

```
my @arr = ($State);
my @arr2;
push @arr2, $State, $State; 
```

现在你得到：

```
use Data::Dumper;
print Dumper \@arr, \@arr2;

$VAR1 = [ "Alabama 205 251 256 334 659 938" ];
$VAR2 = [ "Alabama 205 251 256 334 659 938", "Alabama 205 251 256 334 659 938" ]; 
```

* * *

请注意，`push`将值推送到数组的末尾。

```
my @array;
for my $n (0 .. 5) {
  push @array, $n;  
}
print Dumper \@array;

$VAR1 = [0, 1, 2, 3, 4, 5]; 
```

要找到它们，请使用标量符号并从 0 开始索引计数：

```
use feature qw(say);
say $array[0];
say $array[5];

0
5 
```

# ruby-on-rails - Rails 中下拉收集出生日期字段的默认值？

> ID：12407777
> 
> 赞同：0
> 
> 时间：2012-09-13T13:47:47.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

*   导轨 3.2.8
*   简单的模式

我试图为“从列表中选择”字段中的每一天、月、年字段获取默认值，同时保留以下代码的样式。尝试了无数次，有人知道怎么做吗？将不胜感激thx！

```
= p.label t(:date_of_birth)
      = p.input :dob,
                :class => "extra",
                :as => :date,   :start_year => Date.today.year,
                                :end_year => Date.today.year - 80,
                                :month => Date.today.month,
                                :order => [:day, :month, :year],
                                :label => false,
                                :input_html => { :style => "width: 102px" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:06:18.157

我觉得是这样的`:include_blank => "Select from list"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T16:55:33.803

呃..我在挖掘了 30 分钟后发现自己，这只是一个简单的 :prompt => "select" 分配给 dob 集合的所有 3 个下拉列表。

# javascript - 使用javascript从浏览器连接到TCP Socket

> ID：12407778
> 
> 赞同：132
> 
> 时间：2012-09-13T13:47:54.117
> 
> 标签：javascript, html, node.js, sockets, tcpclient

我有一个 vb.net 应用程序，它打开一个套接字并监听它。

我需要使用在浏览器上运行的 javascript 通过此套接字与该应用程序进行通信。那就是我需要在这个套接字上发送一些数据，以便正在侦听这个套接字的应用程序可以获取该数据，使用一些远程调用做一些事情并获取更多数据并将其放回我的 javascript 需要的套接字上在浏览器中阅读并打印。

我试过了，socket.io，websockify，但没有一个被证明是有用的。

因此，问题是，我正在尝试什么？有没有一种方法可以让浏览器中运行的 javascript 连接到 tcp 套接字并发送一些数据并在其上侦听套接字上的更多数据响应并将其打印到浏览器。

如果这是可能的，有人可以指出我正确的方向，这将有助于我建立目标。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-06-27T07:24:53.270

至于您的问题，目前您将不得不依赖 XHR 或 websockets。

目前还没有流行的浏览器为 JavaScript 实现任何这样的原始套接字 api，允许您创建和访问原始套接字，但是在 JavaScript 中实现原始套接字 api 的草案正在进行中。看看这些链接：
[http ://www.w3.org/TR/raw-sockets/](http://www.w3.org/TR/raw-sockets/)
[https://developer.mozilla.org/en-US/docs/Web/API/TCPSocket](https://developer.mozilla.org/en-US/docs/Web/API/TCPSocket)

Chrome 现在在其“实验性”API 中支持原始 TCP 和 UDP 套接字。这些功能**仅可用于扩展**，虽然已记录在案，但目前仍处于隐藏状态。话虽如此，一些开发人员已经在使用它创建有趣的项目，例如[这个 IRC 客户端](https://github.com/nornagon/ircv)。

要访问此 API，您需要在扩展的清单中启用实验标志。使用套接字非常简单，例如：

```
chrome.experimental.socket.create('tcp', '127.0.0.1', 8080, function(socketInfo) {
  chrome.experimental.socket.connect(socketInfo.socketId, function (result) {
        chrome.experimental.socket.write(socketInfo.socketId, "Hello, world!");         
    });
}); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-13T13:53:14.803

这可以通过导航器界面实现，如下所示：

```
navigator.tcpPermission.requestPermission({remoteAddress:"127.0.0.1", remotePort:6789}).then(
  () => {
    // Permission was granted
    // Create a new TCP client socket and connect to remote host
    var mySocket = new TCPSocket("127.0.0.1", 6789);

    // Send data to server
    mySocket.writeable.write("Hello World").then(
        () => {

            // Data sent sucessfully, wait for response
            console.log("Data has been sent to server");
            mySocket.readable.getReader().read().then(
                ({ value, done }) => {
                    if (!done) {
                        // Response received, log it:
                        console.log("Data received from server:" + value);
                    }

                    // Close the TCP connection
                    mySocket.close();
                }
            );
        },
        e => console.error("Sending error: ", e)
    );
  }
); 
```

w3.org tcp-udp-sockets 文档中概述了更多详细信息。

[http://raw-sockets.sysapps.org/#interface-tcpsocket](http://raw-sockets.sysapps.org/#interface-tcpsocket)

[https://www.w3.org/TR/tcp-udp-sockets/](https://www.w3.org/TR/tcp-udp-sockets/)

另一种选择是使用[Chrome Sockets](https://developer.chrome.com/apps/socket)

**创建连接**

```
chrome.sockets.tcp.create({}, function(createInfo) {
  chrome.sockets.tcp.connect(createInfo.socketId,
    IP, PORT, onConnectedCallback);
}); 
```

**发送数据**

```
chrome.sockets.tcp.send(socketId, arrayBuffer, onSentCallback); 
```

**接收数据**

```
chrome.sockets.tcp.onReceive.addListener(function(info) {
  if (info.socketId != socketId)
    return;
  // info.data is an arrayBuffer.
}); 
```

您可以使用也可以尝试使用`HTML5 Web Sockets`（虽然这不是直接的 TCP 通信）：

```
var connection = new WebSocket('ws://IPAddress:Port');

connection.onopen = function () {
  connection.send('Ping'); // Send the message 'Ping' to the server
}; 
```

[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

[您的服务器还必须使用 WebSocket 服务器（例如 pywebsocket）进行侦听，或者您可以按照Mozilla](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers)的概述编写自己的服务器

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-24T11:05:00.090

[ws2s](https://github.com/playay/ws2s)项目旨在将套接字引入浏览器端 js。它是一个将 websocket 转换为 socket 的 websocket 服务器。

ws2s示意图

[![在此处输入图像描述](../Images/4eb3e573297ea997ca647007d260c36c.png)](https://i.stack.imgur.com/sOVDB.png)

代码示例：

```
var socket = new WS2S("wss://ws2s.feling.io/").newSocket()

socket.onReady = () => {
  socket.connect("feling.io", 80)
  socket.send("GET / HTTP/1.1\r\nHost: feling.io\r\nConnection: close\r\n\r\n")
}

socket.onRecv = (data) => {
  console.log('onRecv', data)
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-26T13:21:01.703

见[jsocket](https://code.google.com/p/jsocket/)。自己没用过。自上次更新以来已超过 3 年（截至 2014 年 6 月 26 日）。

* 使用闪光灯 :(

从[文档](https://code.google.com/p/jsocket/wiki/SimpleExample)中：

```
<script type='text/javascript'>
    // Host we are connecting to
    var host = 'localhost'; 
    // Port we are connecting on
    var port = 3000;

    var socket = new jSocket();

    // When the socket is added the to document 
    socket.onReady = function(){
            socket.connect(host, port);             
    }

    // Connection attempt finished
    socket.onConnect = function(success, msg){
            if(success){
                    // Send something to the socket
                    socket.write('Hello world');            
            }else{
                    alert('Connection to the server could not be estabilished: ' + msg);            
            }       
    }
    socket.onData = function(data){
            alert('Received from socket: '+data);   
    }

    // Setup our socket in the div with the id="socket"
    socket.setup('mySocket');       
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T05:59:43.780

您真正需要的解决方案是网络套接字。但是，chromium 项目开发了一些新技术，即直接 TCP 连接[TCP chromium](http://blog.chromium.org/2012/11/introducing-tcp-listen-new-api-for.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-29T14:06:06.290

为了实现您想要的，您必须编写两个应用程序（例如，在 Java 或 Python 中）：

1.  位于客户端计算机上的桥应用程序，可以处理 TCP/IP 套接字和 WebSockets。它将与有问题的 TCP/IP 套接字交互。

2.  可以与 WebSocket 通信的服务器端应用程序（例如 JSP/Servlet WAR）。它包括至少一个可供浏览器访问的 HTML 页面（如果需要，还包括服务器端处理代码）。

它应该像这样工作

1.  Bridge 将打开到 Web 应用程序的 WS 连接（因为服务器无法连接到客户端）。
2.  Web 应用程序将要求客户端识别自己
3.  网桥客户端向服务器发送一些 ID 信息，服务器将其存储以识别网桥。
    4.  浏览器可查看的页面使用 JS 连接到 WS 服务器。
    5.  重复步骤 3，但对于基于 JS 的页面
    6.  基于 JS 的页面向服务器发送命令，包括它必须去哪个桥。
    7.  服务器将命令转发到网桥。
    8.  网桥打开一个 TCP/IP 套接字并与之交互（发送消息，获得响应）。
    9.  Bridge 通过 WS 向服务器发送响应
    10.  WS 将响应转发到浏览器可查看的页面
    11.  JS 处理响应并做出相应的反应
    12.  重复直到任一客户端断开/卸载

*注意 1：*上述步骤是一个巨大的简化，不包括有关错误处理和 keepAlive 请求的信息，以防客户端过早断开连接或服务器需要通知客户端它正在关闭/重新启动。

*注意 2：*根据您的需要，如果有问题的 TCP/IP 套接字服务器（网桥与之通信）与服务器应用程序位于同一台机器上，则可以将这些组件合并为一个。

# api - 是否有 StockTwits 用户配置文件 API 端点？

> ID：12407783
> 
> 赞同：1
> 
> 时间：2012-09-13T13:48:04.113
> 
> 标签：api, stocktwits

具体来说，我可以拨打电话以获取有关用户个人资料的所有元数据？

`curl -XGET http://api.stocktwits.com/api/2/user.json?username=bgajdero`

这将返回一个 JSON 字符串及其 id、名称、头像、简历等。

我正在查看[API Docs](http://stocktwits.com/developers/docs/api)，但没有看到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:59:05.167

如果您单击[用户流端点](http://stocktwits.com/developers/docs/api#streams-user-docs)中的“显示扩展” ，您将在该用户的个人资料中看到更多元数据，如您所提到的，这些元数据不公开。

要访问该扩展元数据，您需要对我们的 API 进行合作伙伴级别的访问，您可以在此处申请：http: [//stocktwits.com/developers/contact](http://stocktwits.com/developers/contact)

# javascript - jquery datepicker 年份范围默认

> ID：12407786
> 
> 赞同：7
> 
> 时间：2012-09-13T13:48:14.263
> 
> 标签：javascript, jquery, jquery-ui

JQuery 有点问题`datePicker`，我怀疑这只是我忽略或错误的设置问题。

如果你看这个简单的小提琴：[JS Fiddle](http://jsfiddle.net/w9fwL/2/)

You'll see I've set the year range, so that the by default when you click on the input it will open it up on 1994, but if you then click on any of those dates, e.g. 3rd Sept, it'll actually put it in the input as 2012 still, rather than the year that is selected in the drop down menu.

How can I make it so that it uses the correct year without having to change the drop down and then change it back again?

Cheers.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T14:40:11.457

正如其他人所建议的，您必须设置默认日期。但是，与其他解决方案不同，您不想硬编码日期，因为您的下拉列表将随着时间的推移而更新，因为您正在执行相对列表。

试试这个...

```
function loadDatePicker() {
    $('.datePicker').datepicker({
        dateFormat: 'yy-mm-dd',
        changeYear: true,
        changeMonth: true,
        yearRange: "-18:-12",
        defaultDate:"-18y-m-d"  // Relative year/month/day
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T14:00:46.717

很奇怪，但添加`defaultDate:"1994-01-01"`到日期选择器选项似乎可以解决它。

[小提琴](http://jsfiddle.net/w9fwL/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:26:40.230

我想我明白了。这是因为 yearRange: 只限制下拉菜单中的范围。它只是更改列表而已。

他们在这里豪宅..

[http://jqueryui.com/demos/datepicker/#option-yearRange](http://jqueryui.com/demos/datepicker/#option-yearRange) [请注意，此选项仅影响下拉列表中显示的内容，要限制可以选择的日期，请使用 minDate 和/或 maxDate 选项。]

为了证明这一点.. 如下设置日期选择器，您会发现所有日期都禁用。因为它让我们看到了 2012 年的压延机，而不是 1994 年

```
$('.datePicker').datepicker({
         dateFormat: 'yy-mm-dd',
         changeYear: true,
         changeMonth: true,
         yearRange: "-18:-12",
         maxDate: new Date(2012,1-1,1)

     }); 
```

要修复它，您必须使用 defaultDate 以及 minDate 和 maxDate

我希望我很清楚

# actionscript-3 - AS3 / Changing the appearance of a button

> ID：12407787
> 
> 赞同：2
> 
> 时间：2012-09-13T13:48:16.467
> 
> 标签：actionscript-3

I inherited a project consisting of a flash movie with graphic components and an .as file with the code. i want to alter the appearance of various graphic elements.

example:

`if (skin="client1")` -> all buttons have to be blue, `if (skin="client2")` -> all buttons have to be yellow - and so on.

I am stuck with a button:

1.  我尝试在按钮内嵌套了具有不同颜色（`frame1=blue`, `frame5=yellow`）的电影，但我无法`goToAndStop`从 .as 文件中找到该电影的方法。

2.  我试图从该电影 ( `if skin="client1" goto frame "blue"`) 中检查一个变量，但我似乎无法访问在 .as 文件中定义的其他变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:06:06.987

您可以创建两个类来管理主题：

第一个管理主题名称

```
package 
{   
    public class Styles
    {
        public static const DARK:String = "dark";
        public static const LIGHT:String = "light";
        public static var currentStyleName:String = "dark";

        public static function setStyles(styleName:String):void
        {
            currentStyleName = styleName;
        }
    }
} 
```

第二个管理资产

```
package
{
    import flash.events.EventDispatcher;    
    import flash.display.*;
    import flash.utils.getDefinitionByName;
    import Styles;

    public class Assets extends EventDispatcher
    {

        public static function setStyles(styleName:String):void
        {
            currentStyleName = styleName;
        }

        public static function getClass(name:String):Class
        {
            var TheClass:Class = getDefinitionByName(name) as Class;

            return TheClass;
        }

        public static function sprite(name:String):Sprite
        {
            return new (getClass(name)) as Sprite;
        }

        public static function simpleButton(name:String):SimpleButton
        {
            return new (getClass(name)) as SimpleButton;
        }

        public static function styledName(name:String):String
        {
            return name + Styles.currentStyleName.replace(/^\w/, function(firstChar) {
                return firstChar.toUpperCase();
            });
        }

    }
} 
```

在您的 Flash 库中，您需要为每个符号设置链接名称，如下所示：

```
myButtonDark
myButtonLight
mySpriteDark
mySpriteLight 
```

现在您必须设置当前样式名称

```
Styles.setStyles(Styles.LIGHT); 
```

最后，您可以创建所需的实例

```
// All the instances created here belong to the Light theme
addChild( Assets.simpleButton(Assets.styledName("myButton")) );
addChild( Assets.sprite(Assets.styledName("mySprite")) );

// Changes the theme to dark
Styles.setStyles(Styles.DARK);

// All the instances created here belong to the Dark theme
addChild( Assets.simpleButton(Assets.styledName("myButton")) );
addChild( Assets.sprite(Assets.styledName("mySprite")) ); 
```

我希望它对你有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:54:35.367

AS3 完全面向对象。

如果这些变量是私有的或受保护的，您将无法访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:23:06.120

由于该项目是您的，您可以为按钮提供一种附加方法来接受特定更改，例如，如果您的嵌套影片剪辑有多个带有标签的帧，并且您将它们排列为“蓝色”、“绿色”等颜色， 'black' 等等，你可以创建一组 String 类型的皮肤常量，就像 Alexander Ruiz 建议的那样，它也可以作为你的 MC 切换显示帧的标签。因此，您在按钮类中创建了一个函数，即使它是私有的，它也可以访问您的嵌套影片剪辑，如下所示：

```
public function AcceptSkin(skin:String):void {
    try {
        nestedMC.gotoAndStop(skin);
    }
    catch(e:Error) {
        trace('Error applying style',skin,e.toString());
    }
} 
```

你可以用这种方法做更多的事情。现在，当您希望所有按钮都变为黄色，并且您的 MC 中有一个带有“黄色”标签的框架（据说该按钮包含黄色外观）时，您可以调用`theButton.AcceptSkin('yellow');`每个按钮。但是，如果您使用 SimpleButton 类作为按钮的基类，我建议您为按钮创建自己的类，因为 SimpleButton 类没有简单的方法来接收其内容。

# android - 在 JellyBean 上使用 LogCat

> ID：12407797
> 
> 赞同：8
> 
> 时间：2012-09-13T13:48:47.000
> 
> 标签：android, debugging, android-logcat

我有一个非常随机发生的错误，因此我依靠`LogCat`从 Play 商店购买的监控应用程序来查看发生时在我的设备上抛出的异常。自从使用 Jelly Bean 以来，我没有看到任何日志记录。我已经读过，使用 Jelly Bean，应用程序只能看到其`LogCat`自身的输出。

所以除了生根我的设备之外，有没有办法`LogCat`直接在我的手机上读取我的应用程序的输出？我知道我可以使用 Eclipse，但是，就像我说的，它发生得如此随机，我无法手动重新创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:42:52.420

> 所以除了生根我的设备之外，有没有办法直接在我的手机上读取我的应用程序的 LogCat 输出？

并不真地。您可以阅读[aLogcat bugtracker](http://code.google.com/p/alogcat/issues/detail?id=42)关于此问题的讨论：

> 在做了一些阅读和一些测试之后，我发现了三种让 aLogcat 工作的方法，所有这些方法都使用 root。

关于 READ_LOGS 权限的更详细讨论[未授予 Jelly Bean (api 16) 中的第 3 方应用程序](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6U4A5irWang)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-05T01:45:09.390

您如何看待使用 textView 直接写入屏幕？当然，这仅适用于调试版本。

这篇文章包含在屏幕上打印 logcat 错误的代码 将[android logcat 数据写入文件](https://stackoverflow.com/questions/6175002/write-android-logcat-data-to-a-file)

现在剩下要做的就是将 try/catch stmts 放入您的代码中，其中 try 包围您认为有问题的代码。catch 代表将错误消息写入屏幕。

# windows - 我应该在批处理文件中使用哪种注释样式？

> ID：12407800
> 
> 赞同：314
> 
> 时间：2012-09-13T13:49:11.367
> 
> 标签：windows, batch-file, coding-style, comments

我一直在写一些批处理文件，我遇到了[这个用户指南](http://www.tacktech.com/display.cfm?ttid=307)，它提供了很多信息。它向我展示的一件事是，不仅可以用 注释行`REM`，还可以用`::`. 它说：

> 批处理代码中的注释可以使用双冒号进行，这比使用 REM 命令更好，因为标签是在重定向符号之前处理的。`::<remark>`不会导致任何问题，但`rem <remark>`会产生错误。

那么，为什么我看到的大多数指南和示例都使用该`REM`命令？是否`::`适用于所有版本的 Windows？

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2012-09-13T13:56:18.510

**tl; dr：** `REM`是在批处理文件中嵌入注释的记录和支持的方式。

* * *

`::`本质上是一个永远无法跳转到的空白标签，而`REM`实际上是一个什么都不做的命令。在这两种情况下（至少在 Windows 7 上），重定向运算符的存在都不会导致问题。

但是，`::`已知在某些情况下会在块中出现异常行为，不会被解析为标签，而是某种驱动器号。我对确切的位置有点模糊，但仅此一项就足以让我`REM`专门使用。这是在批处理文件中嵌入注释的记录和支持的方式，而`::`仅仅是特定实现的工件。

* * *

这是一个在循环中`::`产生问题的示例。`FOR`

此示例*不适*`test.bat`用于桌面上调用的文件：

```
@echo off
for /F "delims=" %%A in ('type C:\Users\%username%\Desktop\test.bat') do (
    ::echo hello>C:\Users\%username%\Desktop\text.txt
)
pause 
```

虽然此示例将正确地用作注释：

```
@echo off
for /F "delims=" %%A in ('type C:\Users\%username%\Desktop\test.bat') do (
    REM echo hello>C:\Users\%username%\Desktop\text.txt
)
pause 
```

问题似乎是在尝试将输出重定向到文件时。我最好的猜测是它被解释`::`为一个名为`:echo`.

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2012-09-13T14:02:00.030

## REM 的评论

A`REM`可以注释一个完整的行，如果它不是第一个标记的结尾，那么它也可以在行尾添加一个多行插入符号。

```
REM This is a comment, the caret is ignored^
echo This line is printed

REM This_is_a_comment_the_caret_appends_the_next_line^
echo This line is part of the remark 
```

REM 后跟一些字符`.:\/=`的工作方式有点不同，它不注释与号，因此您可以将其用作内联注释。

```
echo First & REM. This is a comment & echo second 
```

但是为了避免现有文件出现问题，例如`REM`，`REM.bat`或者`REM;.bat`只应该使用修改过的变体。

```
REM^;<space>Comment 
```

而对于字符`;`也是允许的之一`;,:\/=`

REM比（在 Win7SP1 上用 100000 条注释行测试）**慢大约 6 倍。** 对于正常使用，这并不重要（每条注释行 58µs 对 360µs）`::`

## 带有 :: 的评论

A`::`总是*执行*一个行结束插入符。

```
:: This is also a comment^
echo This line is also a comment 
```

标签和*注释标签* `::`在括号块中有特殊的逻辑。
它们总是跨越两行[SO: goto command not working](https://stackoverflow.com/a/4006006/463115)。
因此不建议将它们用于括号块，因为它们通常是语法错误的原因。

`ECHO ON`显示了一行`REM`，但没有注释的行`::`

两者都不能真正注释掉该行的其余部分，因此简单`%~` 会导致语法错误。

```
REM This comment will result in an error %~ ... 
```

但是 REM 能够在早期阶段停止批处理解析器，甚至在特殊字符阶段完成之前。

```
@echo ON
REM This caret ^ is visible 
```

[您可以使用](https://stackoverflow.com/a/29853831/52277)&REM 或 &:: 在命令行末尾添加注释。这种方法之所以有效，是因为 '&' 在同一行引入了一个新命令。

## 带百分号的评论 %= 评论 =%

存在带有百分号的注释样式。

实际上，这些是变量，但它们被扩展为无。
但优点是它们可以放在同一行，即使没有`&`.
等号确保这样的变量不存在。

```
echo Mytest
set "var=3"     %= This is a comment in the same line=% 
```

建议将百分比样式用于批处理宏，因为它不会改变运行时行为，因为在定义宏时注释将被删除。

```
set $test=(%\n%
%=Start of code=% ^
echo myMacro%\n%
) 
```

## 性能`REM`对比`::`对比`%= =%`

简而言之：

*   `::`并且`%= =%`似乎具有相同的性能
*   `REM`花费约 50% 的时间`::`
*   在块中，特别是循环只`REM`消耗时间，但`::`在解析块时从缓存块中删除，因此 **它不消耗时间**

有关更多信息，请参阅[SO：关于批 *.bat 文件中的评论和速度的问题](https://stackoverflow.com/a/68436626/463115)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-09-13T16:49:30.100

另一种选择是将注释表示为始终扩展为空的变量扩展。

变量名称不能包含`=`，除了未记录的动态变量，如
`%=ExitCode%`和`%=C:%`。任何变量名都不能`=`在第一个位置之后包含一个。所以我有时会使用以下内容在带括号的块中包含注释：

```
::This comment hack is not always safe within parentheses.
(
  %= This comment hack is always safe, even within parentheses =%
) 
```

这也是合并内嵌注释的好方法

```
dir junk >nul 2>&1 && %= If found =% echo found || %= else =% echo not found 
```

前导`=`不是必需的，但我喜欢对称性。

有两个限制：

1) 评论不能包含`%`

2）评论不能包含`:`

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-09-17T09:43:55.713

在我意识到我可以使用 label`::`来发表评论和注释掉代码之后，我觉得`REM`这很丑陋。如前所述，双冒号在`()`阻塞代码中使用时可能会导致问题，但我发现了一种通过在标签`::`和`:``space`

```
:: This, of course, does
:: not cause errors.

(
  :: But
   : neither
  :: does
   : this.
) 
```

它不像 那样难看`REM`，实际上为您的代码添加了一点样式。

因此，在我使用的代码块之外，在它们内部，我在和`::`之间交替。`::``:`

顺便说一句，对于大量注释，例如在批处理文件的标题中，您可以通过简单地`goto`覆盖您的注释来完全避免特殊命令和字符。这让你可以使用任何你想要的方法或风格的标记，尽管事实上如果`CMD`真的试图处理这些行它会抛出一个嘶嘶声。

```
@echo off
goto :TopOfCode

=======================================================================
COOLCODE.BAT

Useage:
  COOLCODE [/?] | [ [/a][/c:[##][a][b][c]] INPUTFILE OUTPUTFILE ]

Switches:
       /?    - This menu
       /a    - Some option
       /c:## - Where ## is which line number to begin the processing at.
         :a  - Some optional method of processing
         :b  - A third option for processing
         :c  - A forth option
  INPUTFILE  - The file to process.
  OUTPUTFILE - Store results here.

 Notes:
   Bla bla bla.

:TopOfCode
CODE
.
.
. 
```

使用你希望的任何符号`*`' `@`s 等。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2017-02-09T22:31:08.743

这个答案试图对这个页面上的许多很好的答案进行**务实的总结：**

^([jeb 的出色答案](https://stackoverflow.com/a/12408045/45375)值得特别提及，因为它确实深入并涵盖了许多边缘情况。
值得注意的是，他指出**错误构造的变量/参数引用`%~`可能会破坏以下*任何*解决方案 - 包括`REM`lines**。)

* * *

### *整行*注释——唯一直接支持的样式：

*   **`REM`**（或其案例变体）是**唯一的官方评论结构**，并且是**最安全的选择**- 请参阅[Joey 的有用答案](https://stackoverflow.com/a/12407934/45375)。

*   **`::`是一个（广泛使用的）*hack***，它有**优点也有缺点**：

    *   **优点**：

        *   *视觉上的独特*性，可能还有打字的便利性。
        *   *速度*，尽管这可能并不重要 - 请参阅[jeb 的出色答案](https://stackoverflow.com/a/12408045/45375)和[Rob van der Woude 的出色博客文章](http://www.robvanderwoude.com/comments.php)。
    *   **缺点**：

        *   **内部`(...)`块，`::`可以*破坏*命令**，**安全使用规则是限制性的，不容易记住**- 见下文。

* * *

**如果您*确实*想使用`::`**，您有以下选择：

*   *要么*：为了安全起见，在`(...)`块内创建一个异常并在`REM`那里使用，或者完全不要*在里面* `(...)`放置注释。
*   *或*：记住**安全使用`::`inside`(...)`**的痛苦限制规则，这些规则总结在以下片段中：

```
@echo off

for %%i in ("dummy loop") do (

  :: This works: ONE comment line only, followed by a DIFFERENT, NONBLANK line.
  date /t

  REM If you followed a :: line directly with another one, the *2nd* one
  REM would generate a spurious "The system cannot find the drive specified."
  REM error message and potentially execute commands inside the comment.
  REM In the following - commented-out - example, file "out.txt" would be
  REM created (as an empty file), and the ECHO command would execute.
  REM   :: 1st line
  REM   :: 2nd line > out.txt & echo HERE

  REM NOTE: If :: were used in the 2 cases explained below, the FOR statement
  REM would *break altogether*, reporting:
  REM  1st case: "The syntax of the command is incorrect."
  REM  2nd case: ") was unexpected at this time."

  REM Because the next line is *blank*, :: would NOT work here.

  REM Because this is the *last line* in the block, :: would NOT work here.
) 
```

* * *

### 模拟*其他注释样式*- 内联和多行：

请注意，*批处理语言不直接支持这些样式*，但可以对其进行*仿真*。

* * *

**内联评论**：

^(* 下面的代码片段`ver`用作任意命令的替代，以方便实验。
* 要使`SET`命令与内联注释一起正常工作，请双引号`name=value`部分；例如，`SET "foo=bar"`。^([1]))

在这种情况下，我们可以区分两种子类型：

*   **EOL 注释**（[to-the-]end-of-line），可以放在命令之后，并且总是延伸到行尾（同样，由[jeb 的回答](https://stackoverflow.com/a/12408045/45375)提供）：

    *   `ver & REM <comment>`利用`REM`了有效命令这一事实，`&`可用于在现有命令之后放置附加命令。
    *   `ver & :: <comment>`也可以，但*实际上只能在`(...)`blocks*`::`之外使用，因为它的安全使用比单独使用更受限制。
*   **行内注释**，放置在一行上的多个命令*之间，或者理想情况下甚至**放在*给定命令的内部。
    行内注释是最灵活的（单行）形式，**根据定义也可以用作 EOL 注释。**

    *   `ver & REM^. ^<comment^> & ver`允许***在命令之间*****插入注释***（同样，由[jeb 的回答](https://stackoverflow.com/a/12408045/45375)提供），但请注意如何`<`以及`>`需要 -`^`转义，因为**以下字符。不能按原样使用：（而未`< > |`**转义`&`或`&&`或`||`启动*下一个*命令）。*

    **   `%= <comment> =%`，正如[dbenham 的出色答案](https://stackoverflow.com/a/12411082/45375)中所详述的那样，是**最灵活的形式**，因为它**可以放在*命令*中（在参数中）**。
        它利用变量扩展语法的方式确保表达式始终扩展为*空字符串*——**只要注释文本既不包含`%`也不`:`**
        包含 Like `REM`，在块`%= <comment> =%`外部和内部都可以很好地工作`(...)`，但它在视觉上更具特色；唯一的缺点是它更难输入，更容易在语法上出错，并且不广为人知，这可能会阻碍对使用该技术的源代码的理解。* 

 ** * *

**多行（整行块）注释**：

*   [James K 的回答](https://stackoverflow.com/a/12456726/45375)显示了如何使用**`goto`语句和标签**来分隔任意长度和内容的多行注释（在他的情况下，他使用它来存储使用信息）。

*   [Zee 的回答](https://stackoverflow.com/a/22157775/45375)显示了如何使用**“空标签”**来创建多行注释，但必须注意使用`^`.

*   [Rob van der Woude 的博客文章](http://www.robvanderwoude.com/comments.php)提到了另一个有点晦涩的选项，它允许您以**任意数量的注释行*****结束***文件：***打开`(`只会*导致后面的所有内容都被忽略**，只要它不包含 (非`^`-escaped) `)`，即只要块没有*关闭*。

* * *

^([1]`SET "foo=bar"`用于定义变量 - 即在名称和组合`=`的值周围*加上*双引号- 在诸如 之类的命令中是必要的`SET "foo=bar" & REM Set foo to bar.`，以确保预期变量值之后的内容（在这种情况下直到下一个*命令*一个空格）不会意外地成为它的一部分。
（顺便说一句：`SET foo="bar"`不仅不会避免问题，还会使双引号*成为 value 的一部分*）。
请注意，此问题是固有的`SET`，甚至适用于值后面的*意外*尾随空格，因此**建议*始终*使用该`SET "foo=bar"`方法。**)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-01-14T13:32:15.043

[此](http://www.robvanderwoude.com/comments.php)页面告诉在某些限制下使用“::”会更快只是选择时要考虑的事情

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-03-03T21:24:50.897

好问题......我也一直在寻找这个功能......

经过几次测试和技巧，似乎更好的解决方案是更明显的解决方案......

--> 我发现防止解析器完整性失败的最佳方法是重用 REM：

```
echo this will show until the next REM &REM this will not show 
```

您还可以使用带有“NULL LABEL”技巧的多行...（不要忘记行尾的 ^ 以保持连续性）

```
::(^
this is a multiline^
comment... inside a null label!^
dont forget the ^caret at the end-of-line^
to assure continuity of text^ 
) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-26T19:39:27.823

詹姆斯 K，我很抱歉我所说的大部分内容都错了。我做的测试如下：

```
@ECHO OFF
(
  :: But
   : neither
  :: does
   : this
  :: also.
) 
```

这符合您对交替的描述，但失败时出现“）在这个时候是出乎意料的。” 错误信息。

我今天做了一些进一步的测试，发现交替不是关键，但似乎关键是有偶数行，连续没有任何两行以双冒号 (::) 开头并且不以双冒号结尾. 考虑以下：

```
@ECHO OFF
(
   : But
   : neither
   : does
   : this
   : cause
   : problems.
) 
```

这行得通！

但也要考虑这一点：

```
@ECHO OFF
(
   : Test1
   : Test2
   : Test3
   : Test4
   : Test5
   ECHO.
) 
```

以命令结尾时，注释数为偶数的规则似乎并不适用。

不幸的是，这只是松鼠，我不确定我是否要使用它。

真的，最好的解决方案，我能想到的最安全的解决方案是，如果像 Notepad++ 这样的程序将 REM 读取为双冒号，然后在保存文件时将双冒号作为 REM 语句写回。但我不知道有这样的程序，也不知道有任何 Notepad++ 插件可以做到这一点。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-31T08:31:48.417

[此](http://www.robvanderwoude.com/comments.php)页面上提供了关于该主题的非常详细和分析性的讨论

它具有示例代码和不同选项的优缺点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-24T19:45:46.390

有多种方法可以在批处理文件中添加注释

**1）使用 rem**

这是官方的方式。`::`尽管在处理插入符号之前它显然会提前停止解析，但它显然需要更长的时间来执行。百分比扩展发生在 rem 之前并被`::`识别，因此不正确的百分比使用即`%~`会导致错误，如果存在百分比。可以安全地在代码块中的任何地方使用。

**2）使用标签`:`等。`::``:;`**

对于`:: comment`, ':comment' 是无效的标签名称，因为它以无效字符*开头。*不过，可以在标签中间使用冒号。`: label`如果空格从标签的开头开始，则将其删除为`:label`。如果标签中间出现空格或冒号，则不解释名称的其余部分，这意味着如果有两个标签`:f:oo`和`:f rr`，则两者都将被解释为`:f`并且仅跳转到文件中稍后定义的标签。标签的其余部分实际上是注释。[这里](https://stackoverflow.com/a/16639875/7194773)`::`列出了多种替代方法。你永远不能或一个标签。并且不会工作。`goto``call``::foo``goto :foo``goto ::foo`

它们在代码块之外工作正常，但在代码块中的标签之后，无论是否无效，都必须有一个有效的命令行。`:: comment`确实是另一个有效的命令。它将其解释为命令而不是标签；该命令具有优先权。哪个是 cd 到`::`卷的命令，如果你已经执行，它将起作用`subst :: C:\`，否则你会得到一个找不到卷的错误。这就是为什么`:;`可以说更好，因为它不能以这种方式解释，因此被解释为一个标签，它作为有效命令。这不是递归的，即下一个标签不需要在它之后的命令。这就是他们成对出现的原因。

您需要在标签后提供有效命令，例如`echo something`. 代码块中的标签必须带有至少一个有效的命令，因此这些行是成对出现的。`)`如果下一行有空格或右括号，您将收到意外错误。如果两行之间有空格，`::`您将收到无效的语法错误。

您还可以在`::`评论中使用插入符号运算符，如下所示：

```
@echo off

echo hello
(
   :;(^
   this^
   is^
   a^
   comment^
   )
   :;
)
   :;^
   this^
   is^
   a^
   comment
   :;
) 
```

`:;`但是由于上述原因，您需要尾随。

```
@echo off

(
echo hello
:;
:; comment
:; comment
:;
)
echo hello 
```

只要有偶数就可以了。这无疑是最好的注释方式——用 4 行和`:;`. `:;`这样您就不会遇到任何需要使用 or 来抑制的`2> nul`错误`subst :: C:\`。您可以使用`subst :: C:\`来使未找到卷错误消失，但这意味着您还必须将 C: 放入代码中以防止您的工作目录变为`::\`.

要在行尾添加注释，您可以使用 `command &::`or `command & rem comment`，但仍然必须是偶数，如下所示：

```
@echo off

(
echo hello & :;yes
echo hello & :;yes
:;
)

echo hello 
```

第`echo hello & :;yes`一个在下一行有一个有效的命令，但第二个`& :;yes`没有，所以它需要一个，即`:;`.

**3）使用无效的环境变量**

`%= comment =%`. 在批处理文件中，未定义的环境变量将从脚本中删除。这使得可以在行尾使用它们而不使用`&`. 习惯使用无效的环境变量，即包含等号的环境变量。额外的等号不是必需的，但使它看起来对称。此外，以“=”开头的变量名保留给未记录的动态变量。这些动态变量永远不会以“=”结尾，因此通过在注释的开头和结尾都使用“=”，就不会有名称冲突的可能性。评论不能包含`%`或`:`。

```
@echo off 
echo This is an example of an %= Inline Comment =% in the middle of a line. 
```

**4）作为命令，将stderr重定向到nul**

```
@echo off
(
echo hello
;this is a comment 2> nul
;this is another comment  2> nul
) 
```

**5）在文件的末尾，未闭合括号后的所有内容都是注释**

```
@echo off
(
echo hello
)

(this is a comment
this is a comment
this is a comment 
```*

# sql - 将整个数据库数据 ( db2 ) 导出到 csv 文件

> ID：12407802
> 
> 赞同：2
> 
> 时间：2012-09-13T13:49:23.103
> 
> 标签：sql, csv, db2

我一直在寻找将**整个数据库**数据（db2）导出到 csv 的命令。

我用谷歌搜索了它，但它提出了 db2 export 命令，它只能逐表导出。

例如

```
export to employee.csv of del select * from employee 
```

因此我必须为所有桌子做这件事，这可能很烦人。有没有办法可以将 db2 中的整个数据库导出到 csv？（或我可以与其他数据库一起使用的其他格式）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:06:10.127

您可以读取 SYSIBM.SYSTABLES 表以获取所有表的名称，并为每个表生成一个导出命令。

将导出命令写入 SQL 文件。

读取 SQL 文件，并执行导出命令。

编辑添加：警告 - 您的某些外键可能不同步，因为在您阅读各种表时可以更改数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T08:55:03.527

```
# loop trough all the db2 db tables in bash and export them
# all this is just another oneliner ... 
# note the filter by schema name ... 
db2 -x "select schemaname from syscat.schemata where 1=1 and schemaname like 'GOSALES%'" | { while read -r schema ; do db2 connect to GS_DB ; db2 -x "SELECT TABLE_NAME FROM SYSIBM.TABLES WHERE 1=1 AND TABLE_CATALOG='GS_DB' AND TABLE_SCHEMA = '$schema'" | { while read -r table ; do db2 connect to GS_DB; echo -e "start table: $table \n" ; db2 -td@ "EXPORT TO $schema.$table.csv of del modified by coldel; SELECT * FROM $schema.$table " ; echo -e " stop table: $table " ; done ; } ; done ; }

 wc -l *.csv | sort -nr
 4185939 total
 446023 GOSALES.ORDER_DETAILS.csv
 446023 GOSALESDW.SLS_SALES_ORDER_DIM.csv 
```

# ruby-on-rails - Flash 在我的局部视图中不起作用

> ID：12407805
> 
> 赞同：0
> 
> 时间：2012-09-13T13:49:27.503
> 
> 标签：ruby-on-rails, ruby

在我的 users_controller.rb 我有：

```
 def create 
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        redirect_to @user, success: 'User was successfully created.' 
      else
        flash.now[:error] = "There are some user signup errors"
        format.html {render action: "new"} 
      end 
    end 
  end 
```

在 views/user/_form.html.erb 我有：

```
<% if !flash[:error].empty? %>
  <div class="alert alert-error">
    <p>There are some errors </p>
  </div>
  <% end %> 
```

运行测试时，我得到：*未定义的方法“空？” 对于 nil:NilClass* 我认为这个视图看不到这个变量，并且不知道我应该如何将它传递到那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:00:18.843

你应该写：

```
<% if flash[:error].present? %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:00:21.697

您应该使用这样的代码为部分定义局部变量

```
 # views/user/new.html.erb
 = render "form", user: @user, flash: flash 
```

还有一个建议。使用糖

```
# views/user/_form.html.erb
<% unless flash[:error].empty? %>
   <% flash.each do |key, msg| %>
      <div class="alert alert-<%= key %>">
         <p><%= msg %></p>
     </div>
  <% end %>
<% end %> 
```

# java - 以编程方式创建 Android 滚动列表

> ID：12407809
> 
> 赞同：1
> 
> 时间：2012-09-13T13:49:53.647
> 
> 标签：java, android, hashmap, iteration

来自网络开发背景，我正在寻找的东西应该很简单。我已经从安卓手机中提取了所有联系人。

他们的名字和号码在一个名为contacts（number = key）的HashMap中，我正在遍历他们，我正在寻找一个他们的列表供用户查看。密钥（电话号码）必须在那里可用但看不到，并且列表必须滚动。所以类似的东西`<option value="phone">Name</option>`将是完美的。我被困住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:51:52.667

使用适配器将列表膨胀到 ListView。

喜欢：

```
public class SimpleListView extends ListActivity {

private String[] lv_arr = {};
private ListView mainListView = null;
final String SETTING_TODOLIST = "todolist";

private ArrayList<String> selectedItems = new ArrayList<String>();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple);

    // Prepare an ArrayList of todo items
    ArrayList<String> listTODO = [INSERT THE VALUES FROM THE CONTACTS HERE];

    this.mainListView = getListView();

    // Bind the data with the list
    lv_arr = listTODO.toArray(new String[0]);
    mainListView.setAdapter(new ArrayAdapter<String>(SimpleListView.this,
            android.R.layout.simple_list_item_2, lv_arr));

} 
```

}

您还需要一个布局：simple.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="450dp" >

        <ListView
            android:id="@+id/mainListView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@+id/size"
            android:layout_below="@+id/editText1"
            android:gravity="fill_vertical|fill_horizontal"
            android:horizontalSpacing="15dp"
            android:isScrollContainer="true"
            android:numColumns="1"
            android:padding="5dp"
            android:scrollbars="vertical"
            android:smoothScrollbar="true"
            android:stretchMode="columnWidth" >

</ListView>

</RelativeLayout> 
```

# c# - 为什么我的 ASP.NET 应用程序需要管理员权限才能读取注册表？

> ID：12407811
> 
> 赞同：2
> 
> 时间：2012-09-13T13:49:54.800
> 
> 标签：c#, asp.net, registry, administrator

我现在查看了几个 StackOverflow 线程。[这是最接近的。](https://stackoverflow.com/questions/4349474/how-can-i-grant-my-asp-net-mvc-application-read-access-to-a-registry-key)

我坚持使用 VS2005 和 .NET 2.0。服务器是Win2008。不是R2。

我正在构建一个 C# ASP.NET Web 应用程序，它从由 VB6 应用程序修改的数据库中读取信息。数据库配置设置存储在注册表中。

我正在使用 Registry.GetValue() 函数，它返回一个空值。

如果我让应用程序池以管理员身份运行，代码将返回预期值。对于任何其他用户，ToString 会引发 System.NullReferenceException。我尝试了以下方法：

1.  使 AppPool 使用并将完全控制权分配给以下用户不起作用：
    1.  NT AUTHORITY\网络服务
    2.  NT AUTHORITY\SYSTEM
    3.  NT 当局\本地服务
    4.  管理员组中的自定义用户。
2.  我无法对 IIS APPPOOL\DefaultAppPool 应用权限，因为该用户似乎不存在。这是[记录在案的 Server 2008 故障](https://serverfault.com/questions/81165/how-to-assign-permissions-to-applicationpoolidentity-account)。
3.  如果我让 AppPool 使用管理员帐户，则系统可以正常工作。

附上相关代码：

```
string root = "HKEY_CURRENT_USER";
string keyName = @"Software\Some\Key\Somewhere\";
string valueName = "someValue";
string fullKey = root + @"\" + keyName;
object keyValue;
try
{
    keyValue = Registry.GetValue(fullKey, valueName, "Value not found.");
    string val = keyValue.ToString();
    return val;
}
catch (Exception ex)
{
    return ex.GetType().ToString();
} 
```

除非它以管理员身份运行，否则上面的代码在运行 keyValue.ToString() 时总是返回 System.NullReferenceException。它从不抛出 System.Security.SecurityException。

我不急于让我的网络应用程序需要管理员访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:14:35.450

您正在搜索当前用户的键。显然，数据存在于管理员的密钥下，但不存在于其他用户。

对于没有配置文件的服务帐户，HKEY_CURRENT_USER 解析为 HKEY_USERS.Default。

因此，要使其与服务帐户一起使用，您需要将值添加到

```
HKEY_USERS\.Default\Software\Some\Key\Somewhere\ 
```

要使其适用于管理员组中的自定义用户，您需要将其添加到

```
HKEY_USERS\<sid>\Software\Some\Key\Somewhere\ 
```

自定义用户的 SID 在哪里。

这与需要管理员访问权限无关，您只是在寻找错误的地方！

如果数据不是特定于用户的，请尝试将其放入：

```
HKEY_LOCAL_MACHINE\Software\Some\Key\Somewhere\ 
```

那么所有用户通常都可以读取相同的值。

# sql - 在 SQL 查询中为日期范围设置限制

> ID：12407815
> 
> 赞同：1
> 
> 时间：2012-09-13T13:50:06.997
> 
> 标签：sql, oracle, oracle10g

我有一部分 SQL 查询。

此 SQL 查询与其他 SQL 查询没有什么不同，但唯一不同的是，它`?DATE1::?`是为基于 Web 的报告工具定制的。

含义`?DATE1::?`将让用户从下拉菜单中选择日期。我可以`?DATE1::?`在查询中手动使用或输入日期，例如`05-01-2012`

这是 where 子句：

```
WHERE To_Date(to_char(B.startdatetime, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY')
  and To_Date(to_char(B.enddatetime, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY') 
```

如何更改查询以使用户不能选择超过 7 天的日期范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:54:32.057

也添加这个条件

## mysql

```
and To_Date(to_char(B.startdatetime, 'DD-MON-YYYY'))
     <= DATE_ADD(To_Date(to_char(B.enddatetime, 'DD-MON-YYYY')), INTERVAL -7 DAY) 
```

## 甲骨文

```
and To_Date(to_char(B.startdatetime, 'DD-MON-YYYY'))
     <= DateADD('dd' , -7, To_Date(to_char(B.enddatetime, 'DD-MON-YYYY'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:21:00.907

在原始查询之后，我最终得到了用户选择的日期之间的差异。

这是原始查询

```
WHERE To_Date(to_char(B.startdatetime, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY')
  and To_Date(to_char(B.enddatetime, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY') 
```

在上面添加此条件。

`To_Date('?DATE2::?','MM/DD/YYYY') - To_Date('?DATE1::?','MM/DD/YYYY')<=7`

最终查询。

```
WHERE To_Date(to_char(B.startdatetime, 'DD-MON-YYYY')) >= To_Date('?DATE1::?','MM/DD/YYYY')
  and To_Date(to_char(B.enddatetime, 'DD-MON-YYYY')) <= To_Date('?DATE2::?','MM/DD/YYYY')
  and To_Date('?DATE2::?','MM/DD/YYYY') - To_Date('?DATE1::?','MM/DD/YYYY')<=7 
```

# linux - 如何指定自定义的 emacs 配置文件而不是“~/.emacs”？

> ID：12407819
> 
> 赞同：3
> 
> 时间：2012-09-13T13:50:21.707
> 
> 标签：linux, emacs, lisp, config

我只想让 emacs 加载另一个文件作为配置文件，并忽略默认文件（“~/.emacs”）。

请注意，我不想更改原始的“~/.emacs”文件。

我尝试更改“$HOME”环境变量，但它不起作用。

（平台是 Linux。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T16:37:48.147

```
emacs --no-init-file --load=some-other-config.el 
```

或短选项：

```
emacs -q -l some-other-config.el 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T14:06:31.230

来自 Emacs 手册，[第 48.4 节](http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html#Init-File)：

> Emacs 使用文件名“~/.emacs”、“~/.emacs.el”或“~/.emacs.d/init.el”查找您的初始化文件，您可以选择使用这三个名称中的任何一个 [ …]。

如果你真的想使用另一个文件，你应该考虑修补 Emacs 并进行自定义构建。看起来[lisp/startup.el:1009](http://git.savannah.gnu.org/cgit/emacs.git/tree/lisp/startup.el#n1009)是一个不错的起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T13:55:53.040

据我所知，唯一的选择是用来`-u`指示另一个用户的初始化文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T15:31:51.747

正如@Benjamin 引用的那样，您可以选择三个文件名。像往常一样，我们选择`~/.emacs.d/init.el`加载。那是因为，我们可以简单地在这个目录中添加更多的配置文件，并将它们全部添加到版本控制（Git）下。在您`~/.emacs`选择`~/.emacs.el`使用`~/.emacs.d/init.el`.

# c# - 改变图像中的像素

> ID：12407823
> 
> 赞同：0
> 
> 时间：2012-09-13T13:50:37.653
> 
> 标签：c#, wpf, image, graphics, bitmap

我有一个程序，我想做一些图形算法。我发现了一些适用于位图的 C# 代码片段。要更改像素或类似的东西，我必须先将图像转换为位图还是有一些方法可以更改图像中的像素？像`image1.SetPixel(29,201, color1);`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:57:19.647

您可以使用`WriteableBitmap`该类创建可以修改其像素的位图。

然后，您可以将该位图设置为图像元素的源。

*   [http://books.google.co.uk/books?id=nYl7J7z3KssC&pg=PA416&lpg=PA416&dq=wpf+writeablebitmap&source=bl&ots=V533ojV65x&sig=KJeSje1WCXaS_MT78cR4PPZMFio&hl=en#v=onepage&q=wpf%20writeablebitmap&f=false](http://books.google.co.uk/books?id=nYl7J7z3KssC&pg=PA416&lpg=PA416&dq=wpf+writeablebitmap&source=bl&ots=V533ojV65x&sig=KJeSje1WCXaS_MT78cR4PPZMFio&hl=en#v=onepage&q=wpf%20writeablebitmap&f=false)

*   [http://www.i-programmer.info/programming/wpf-workings/527-writeablebitmap.html?start=1](http://www.i-programmer.info/programming/wpf-workings/527-writeablebitmap.html?start=1)

*   [http://www.nerdparadise.com/tech/csharp/wpfimageediting/](http://www.nerdparadise.com/tech/csharp/wpfimageediting/)

有一个第 3 方库可以帮助使用`WriteableBitmaps`更自然的方法，即 SetPixel 和 GetPixel 方法，而不必计算缓冲区中像素数据的偏移量。

*   [http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

# javascript - pageMod 似乎不起作用

> ID：12407829
> 
> 赞同：0
> 
> 时间：2012-09-13T13:50:56.773
> 
> 标签：javascript, firefox-addon

我目前正在制作一个 Firefox 扩展，但是当我浏览到特定的 url 时，我无法运行该功能。

在我的 chrome.manifest中`overlay chrome://browser/content/browser.xul chrome://boxcutter/content/overlay.xul`，`content/`实际文件系统位于`chrome/content/`（我使用了扩展生成器）。

所以我假设我可以在我的文件中使用脚本标签`overlay.xul`来引用`main.js`包含我的 pageMod 函数的文件。

我的 pageMod 函数是（我可能在这里塞了一些东西，这就是为什么这不起作用）：

```
(function() {
    var pageMod;
    pageMod = require('page-mod');

    new pageMod.PageMod({
        include: ["http://battlelog.battlefield.com/bf3/*"],
        contentScriptFile: data.url('boxcutter.js')
    });
}).call(this); 
```

`boxcutter.js`当用户进入 Battlelog 时，这应该调用我的文件，但似乎没有任何反应。在某一时刻，我认为是我的 JS`boxcutter.js`无法正常工作，但是在添加`alert('test');`和刷新页面后，什么也没发生。

这让我相信我的文件做错了，`overlay.xul`但是我能够通过 Battlelog 网站上的 Firebug 调用 jQuery 函数（我知道事实上没有 jQuery 库，因为我检查过）。

所以我认为我的 pageMod 脚本（上图）有问题，它不能正常工作，或者我在编写 pageMod 脚本时做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:52:46.157

`page-mod`是[Firefox Add-on SDK](https://addons.mozilla.org/en-US/developers/builder)提供的一个模块- 这是一个构建扩展的框架。如果您不使用该框架（并且鉴于您正在谈论 chrome manifest 和覆盖您显然不使用），那么您显然无法使用它的功能。如果您想继续使用经典扩展，那么您可能希望在叠加层中添加[事件](https://developer.mozilla.org/en-US/docs/Code_snippets/On_page_load)[处理程序`DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Code_snippets/On_page_load)，检查页面是否符合您的条件，然后对其进行处理。

# python - Python：如果条目是文件或目录不起作用，则条件逻辑

> ID：12407832
> 
> 赞同：0
> 
> 时间：2012-09-13T13:51:17.277
> 
> 标签：python, file-io

我的文件系统上有以下目录结构：

```
/home/myUser/
    stuff_home/
        fizz/
            a.txt
            b.txt
        buzz/
            1.pdf
        widgets/
            c.txt
            2.pdf
            3.pdf
            4.pdf 
```

我想`stuff_home/`递归遍历并计算它包含的子目录、`.txt`文件和`.pdf`文档的数量。我写了一个小的 Python 脚本：

```
import os

dirCnt = 0
txtCnt = 0
pdfCnt = 0

def main():
    get_counts("/home/myUser/stuff_home")

    t = str(txtCnt)
    p = str(pdfCnt)
    d = str(dirCnt)
    print "\nRESULTS\Text Files:\t" + t + "\nPDF Files:\t" + p + "\nDirectories:\t" + d + "\n\n"

def get_counts(root):
    contents = os.listdir(root)

    for file in contents:
        if os.path.isdir(file):
            dirCnt = dirCnt + 1
        elif os.path.splitext(file)[1] == "txt":
            txtCnt = txtCnt + 1
        elif os.path.splitext(file)[1] == "pdf":
            pdfCnt = pdfCnt + 1
        else:
            print "Encountered unknown file: " + file 
```

当我运行它时，我没有收到任何错误，但脚本显然编码错误。这是我得到的输出：

```
Encountered unkown file: fizz
Encountered unkown file: buzz
Encountered unkown file: widgets

RESULTS
Text Files:    0
PDF Files:     0
Directories:   0 
```

有什么让你们 Pythonians 跳出来的吗？看起来我的任何逻辑（用于检测文件与目录，以及`splitext`用于获取文件扩展名）都在这里工作......提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:54:05.767

这似乎是一份工作[`os.walk`](http://docs.python.org/library/os.html#os.walk)（如果我理解正确的话）：

```
def count_pdf_txt(top):
    npdf = 0
    ntxt = 0
    ndir = 0
    for root,dirs,files in os.walk(top):
        ndir += len(dirs)
        for f in files:
            if f.endswith('txt'): #use `splitext` if you like.
                ntxt += 1
            elif f.endswith('pdf'):
                npdf += 1
            else:
                print "unknown"

    return npdf,ntxt,ndirs 
```

* * *

请注意，由于以下行，您的版本会给出错误的结果：

```
 pdfCount = pdfCount + 1 
```

在你的`get_counts`函数里面。这会创建一个新的**局部**变量，它不会以任何方式影响**全局**变量。为了让你的局部变量改变全局变量，你需要将它们声明为`global`. 例如`global pdfCount`。但是，`global`函数中关键字的出现应该总是让你认为*“必须有更好的方法来做到这一点”*。

# android - Android 小部件不会更新

> ID：12407834
> 
> 赞同：4
> 
> 时间：2012-09-13T13:51:20.557
> 
> 标签：android, widget, onupdate

我一直在为 Android 开发一个小部件。它应该做的一件事是显示一周中的当前日期和月份中的日期。我认为我的代码没问题，但由于某种原因它永远不会更新。我的提供程序中的更新周期设置为 30 分钟，但我认为这无关紧要（无论如何我都尝试将其设置为 1 秒并且它没有改变任何东西）。此外，如果我让它在 LogCat 中打印一周中的当前日期和月份中的日期，它工作正常，那么我真的不知道它为什么不更新。请帮帮我！这是我的代码：

```
public class Henk extends AppWidgetProvider {

AppWidgetManager appWidgetManager;
ComponentName componentName;
RemoteViews remoteViews;
LocationManager locationManager;

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    // Update the current date
    this.appWidgetManager = appWidgetManager;
    componentName = new ComponentName(context, Henk.class);
    remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);

    SimpleDateFormat dayofweekformat = new SimpleDateFormat("EEEE");
    Date dayofweekdate = new Date(System.currentTimeMillis());
    String dayofweeklowercase = dayofweekformat.format(dayofweekdate);
    String dayofweek = dayofweeklowercase.toUpperCase();

    SimpleDateFormat monthformat = new SimpleDateFormat("MMMM dd, yyyy");
    Date monthdate = new Date(System.currentTimeMillis());
    String month = monthformat.format(monthdate);

    Log.d("TAG", "----> DAY OF WEEK: " + dayofweek); // Fine in LogCat
    Log.d("TAG", "----> MONTH AND DATE: " + month); // Fine in LogCat

    remoteViews.setTextViewText(R.id.widget_textview1, dayofweek);
    remoteViews.setTextViewText(R.id.widget_textview2, month);

    appWidgetManager.updateAppWidget(componentName, remoteViews);

}
} 
```

**编辑：**

我已经实现了**Doomsknight**提供的解决方案，所以现在我认为我的 onUpdate() 方法应该没问题。它仍然没有显示我的日期和日期。然而，我注意到，当我测试运行它时，onUpdate() 实际上是在我的配置活动关闭之前执行的。在我的配置活动中，我有以下代码来初始化我的小部件（至少这是它应该做的），我认为错误就在这里：

```
public void onClick(View view) {
    // Launch the Widget and close the configuration Activity
    Intent intent2 = new Intent(context, Henk.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent2, 0);
    remoteViews.setOnClickPendingIntent(R.id.configuration_button, pendingIntent);
    appWidgetManager.updateAppWidget(appWidgetID, remoteViews);

    Log.d("TAG", "----> APP WIDGET ID: " + appWidgetID);
    Log.d("TAG", "----> REMOTEVIEWS: " + remoteViews);

    Intent result = new Intent();
    result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetID);
    setResult(RESULT_OK, result);
    finish();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:07:39.730

您必须记住，一个应用程序可以有许多小部件。用户可以在您的屏幕上放置两个或更多。

您错过的是遍历 Id。您传入了一些您生成的组件 ID，而不是小部件 ID，因此它不会更新正确的小部件。

小部件只能更新至少 30 分钟。除非您使用`AlarmManager`. 在你的情况下你不需要这个。

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

    for (int appWidgetId : appWidgetIds) {

            remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
            SimpleDateFormat dayofweekformat = new SimpleDateFormat("EEEE");
            Date dayofweekdate = new Date(System.currentTimeMillis());
            String dayofweeklowercase = dayofweekformat.format(dayofweekdate);
            String dayofweek = dayofweeklowercase.toUpperCase();

            SimpleDateFormat monthformat = new SimpleDateFormat("MMMM dd, yyyy");
            Date monthdate = new Date(System.currentTimeMillis());
            String month = monthformat.format(monthdate);

            Log.d("TAG", "----> DAY OF WEEK: " + dayofweek); // Fine in LogCat
            Log.d("TAG", "----> MONTH AND DATE: " + month); // Fine in LogCat

            remoteViews.setTextViewText(R.id.widget_textview1, dayofweek);
            remoteViews.setTextViewText(R.id.widget_textview2, month);

        appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
    }
} 
```

# php - 从 html 标签中删除所有内联 css 唯一的例外是不删除 display:none 属性

> ID：12407838
> 
> 赞同：1
> 
> 时间：2012-09-13T13:51:37.210
> 
> 标签：php, preg-replace

想从内联 css 中删除所有 css 规则，但不删除 display none 属性

例如，

```
 <p style="color:red;display:none;float:left;"> 
```

我试过这个我正在使用 php 简单的 HTML DOM 解析器

和片段在这里

```
 foreach ($obj->find('img') as $e) {
        $imgSrc = $e -> src;
        preg_match_all('~' . SITE_NAME . '~is', $imgSrc, $match);
        if (count($match[0]) == 0) {
            $loadedSrcs = SITE_NAME . $imgSrc;
        } else {
            $loadedSrcs = $imgSrc;
        }

        $currentImageSrc = $e -> outertext;
        $replacementImageSrc = "src='" . $loadedSrcs . "'";
        $changeSrc = preg_replace('/src=[\'|\"][^\'|\"]*[\'|\"]/is', $replacementImageSrc, $currentImageSrc);
        //$imageSrc = "<img src=".$changeSrc." />";

       $ImagesWithFullPath = preg_replace('~<img [^c]*c=[\'|\"]'.$e -> src.'[^\>]*\>~is', $changeSrc , $ImagesWithFullPath);

    // now I want to remove diffrent style property from Image and wandering how could I write the preg_replace not display:none 

} 
```

希望它有助于理解我的查询

我想用 preg_replace(php) 而不是 Jquery 来做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:14:06.620

使用 HTML 解析器获得正确的元素后：

```
$styles = array_map('trim', explode(';', $e->style));
if (in_array('display:none', $styles)) {
    $e->style='display:none';
}
else {
    $e->style='';
} 
```

# amazon-mws - 亚马逊 MWS：使用 ASIN 提交价格和数量

> ID：12407839
> 
> 赞同：0
> 
> 时间：2012-09-13T13:51:39.190
> 
> 标签：amazon-mws

我想使用亚马逊 MWS API 更新我的产品。问题：我只有产品 ASIN 来识别它们。不是卖家 SKU。据我目前所见，更新产品数据的 Feed 只接受 SKU 作为我产品的唯一标识符。有没有办法解决这个问题？我是否错过了使用 ASIN 进行更新的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:41:59.327

您可以使用`GetReport`带有`_GET_MERCHANT_LISTINGS_DATA`ReportType 的操作来检索将 ASIN 与 SKU 相关联的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:27:51.743

SKU可以由卖家设置。在这种情况下，SKU 只是货号。现在我有了 SKU，可以简单地使用它。

# jquery - 仅在单击文档时隐藏 jkmegamenu

> ID：12407840
> 
> 赞同：0
> 
> 时间：2012-09-13T13:51:38.767
> 
> 标签：jquery, megamenu

我正在使用[jkmegamenu](http://www.javascriptkit.com/script/script2/jkmegamenu.shtml)在单击锚标记时显示子菜单。我需要在再次单击文档或锚标记时隐藏子菜单。我只能在单击具有以下修改的锚标记时隐藏子菜单（删除鼠标离开：

```
megamenu.$menuobj.bind("click **mouseleave**", function(e){
        var menuinfo=jkmegamenu.megamenus[parseInt(this.getAttribute("_megamenupos"))]
        menuinfo.hidetimer=setTimeout(function(){ //add delay before hiding menu
            jkmegamenu.hidemenu(e, parseInt(menuinfo.$menuobj.get(0).getAttribute("_megamenupos")))
        }, jkmegamenu.delaytimer)
    }) 
```

但是如何在单击文档内的任意位置时隐藏菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:03:23.140

您可以侦听`window`单击事件并检查页面上的哪个元素被单击。如果它是`not`您的子菜单的一部分，您可以隐藏您的子菜单。使用 jQuery，您可以完成如下操作：

```
$(window).click(function(e) {
    if(!$(e.target).hasClass('submenu-link')) {
        // hide menu here
    });
}); 
```

当然，如果您的导航看起来像这样：

```
<a class="submenu-link" href="/" ... /> 
```

# node.js - 如何确保对 mongodb 的 node.js 调用确实是异步的

> ID：12407841
> 
> 赞同：0
> 
> 时间：2012-09-13T13:51:39.627
> 
> 标签：node.js, mongodb

我正在尝试编写一个 node.js 应用程序，我们需要在生产中部署它。

我们需要确保 node.js 在有任何长时间运行的进程/操作（如查询或数据库服务器访问）时不会挂起。

因此，我正在尝试调用 mongo 或文件系统，这需要很长时间才能完成，以便我可以验证其他 node.js 服务器在发生这种情况时是否可以免费服务任何其他请求。

可悲的是，我无法插入 mongo 需要很长时间才能完成或对文件系统进行同步调用的记录。

有人可以告诉我该怎么做吗？

谢谢

图科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T01:09:43.090

诀窍是在执行调用的块之后对数据进行控制台日志，如果在控制台中首先出现消息实际上是异步的，则在回调中使用 console.log

我使用 mongojs 作为 mongo 的驱动程序：

```
collection.find({}, function(err, res) {
    console.log("done")
});
console.log("sendign signal") 
```

如果它是异步的，在控制台中：

```
sendign signal
done! 
```

现在对于链式行为，您可以制作类似的东西

```
dbChain = (function() {
  var chain = [], cursor = 0, busy = false;

  chainin = {
    push : function(aFn) {
      if(!busy) {
        chainin.reset();
        aFn();
        busy = true;
      } else {
        chain.push(aFn)
      }
    },

    next : function() {
      cursor++;
      if(chain[cursor]) {
        chain[cursor]();
      } else {
        chainin.reset();
      }

    },

    reset : function() {
      chain = [];
      cursor = 0;
      busy = false;
    }
  }

  return chainin;

})() 
```

并且，在您必须执行的所有 db 调用中：

```
dbChain.push(...(a function ) ...) 
```

在你所有的回调中

```
dbChain.next() 
```

# directshow - 如何使用 DirectShow 从 MP4 文件中检索特定于应用程序的数据

> ID：12407843
> 
> 赞同：1
> 
> 时间：2012-09-13T13:51:51.320
> 
> 标签：directshow, mp4

我需要检索嵌入在 MP4 文件中的非视频、非音频应用程序数据。数据包括在 MP4 录制的同时进行的测量，这些测量需要呈现为与视频和音频同步的图表。图表不会使用 DirectShow 呈现。

数据可以通过以下三种方式之一写入 MP4 文件： 1\. 作为多个顶级 mdat 框 2\. 作为具有专有 FourCC 的多个顶级框 3\. 作为第三个轨道。

上述哪种嵌入数据的方法最适合 DirectShow？检索数据的步骤是什么？

我有上述所有三种格式的示例 MP4 文件，我可以使用 Haali 分配器播放视频和音频。是否归结为 MP4 源过滤器是否支持读取数据？如果可能的话，我想避免编写自己的 MP4 源过滤器！

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:26:40.977

您可能已经知道，MP4 没有库存过滤器。您最好的方法是查看您要使用的过滤器究竟支持什么。例如，这些过滤器极不可能提供自定义格式数据。

好消息是，源代码[http://www.gdcl.co.uk/mpeg4/](http://www.gdcl.co.uk/mpeg4/)中提供了不错的多路复用器/解复用器 MP4 过滤器。您可以随时将额外的数据放入曲目描述框中。源代码可用性使您能够轻松地为您的自定义格式添加合理的支持。

# html - 具有图像和其他 div 彼此相邻的 div 容器

> ID：12407845
> 
> 赞同：2
> 
> 时间：2012-09-13T13:51:54.097
> 
> 标签：html, css, css-float, alignment, stylesheet

我正在尝试绘制一个容器，该容器将在左侧包含一个图像（缩略图）和图像旁边的几个 div（垂直：在容器的中间）。它们将包含按钮和下拉列表，并且可能包含除纯文本之外的其他内容。

我知道我需要使用`float:left`等等，但对我来说没有运气 - 看起来没有任何好处。所以我什至不会提供我所取得的成就的例子。相反，我将提供我的愿景：

![问题的愿景](../Images/75eb1d692038e56c920683b2d644b36b.png)

我*不*想要一个表格解决方案，只想要一个 div——当然，如果可能的话。

有人可以帮我们解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:56:04.193

使用`display: inline-block;`. 它基本上是内联和块行为的混合体。这是一个示例，HTML：

```
<div class = "container">
    <img src = "pic.png" class = "inbl"/>
    <div class = "inbl"></div>
    <div class = "inbl"></div>
</div> 
```

CSS：

```
.inbl {
    display: inline-block;
    vertical-align: top;
}
.container {
    white-space: nowrap;
} 
```

还有一个小演示：[小链接](http://jsfiddle.net/glee/PzSUX/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T13:56:11.137

您也可以使用 div 标签创建表格视图。像这样

```
<div style="display:table">
    <div style="display:table-cell">
       <img src="src" style="width:150px;height:100px;/>
    </div>
    <div style="display:table-cell;vertical-align:middle;" align="center">
       <div> your container1 </div>
    </div>
    <div style="display:table-cell;vertical-align:middle" align="center">
        <div> your container2 </div>
    </div>
</div> 
```

# silverlight - Silverlight 和 RIA 服务会话超时

> ID：12407850
> 
> 赞同：1
> 
> 时间：2012-09-13T13:52:07.840
> 
> 标签：silverlight, wcf-ria-services

**我真的找不到任何明确的解决方案来设置 Silverlioght 和 RIA 服务会话超时。**

这让我很困扰。每次当我看不到数据并且消息框“请等待...”时，我必须登录。

**我想我想实施一些 web.config 解决方案。**

有一些链接根本没有帮助，比如[这个](https://stackoverflow.com/questions/4877315/silverlight-4-ria-services-timeout-issues)。

*如果可以，请提供包含所有设置的完整 web.config 部分。*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:46:03.200

我们必须在下面添加 `<system.web>`

本节...

```
<authentication mode="Forms"> 
  <forms timeout="20160"/> 
</authentication> 
```

链接：[这里](http://weblogs.asp.net/scottgu/archive/2005/11/08/430011.aspx)和[这里](https://stackoverflow.com/questions/1470777/forms-authentication-timeout-vs-session-timeout)

# java - 从 Tomcat 5.0.27 升级到 Tomcat 7.0.30 后无法访问数据库

> ID：12407851
> 
> 赞同：0
> 
> 时间：2012-09-13T13:52:08.807
> 
> 标签：java, tomcat, datasource, jndi, tomcat7

要解决另一个问题，我需要用 tomcat 7 installtion 替换我相当旧的 tomcat 5 安装。我的应用程序使用应用程序 context.xml 中定义的数据源连接到数据库。但是在迁移到 Tomcat 7 之后，尽管我获取数据源的代码似乎可以正常工作（它不会引发异常或返回 null）

```
Context ctx = new InitialContext();
DataSource ds = (DataSource) ctx.lookup("java:comp/env/jdbc/jaikoz"); 
```

尝试获取连接失败：

```
getDataSource.getConnection() 
```

它失败了

```
 org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'
            at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
            at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
            at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
            at com.jthink.appserver.jaikoz.util.db.DBManager.getConnection(DBManager.java:92)
com.jthink.appserver.jaikoz.action.Check.handleRequest(CheckVersion2.java:145)
            at com.jthink.appserver.jaikoz.Session.run(Session.java:66)
            at com.jthink.appserver.jaikoz.Controller.doTask(Controller.java:68)
            at com.jthink.appserver.jaikoz.Controller.doGet(Controller.java:61)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
            at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
            at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
            at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
            at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
            at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
            at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
            at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
            at java.lang.Thread.run(Thread.java:619)
    Caused by: java.lang.NullPointerException
            at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)
            at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)
            at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)
            at java.sql.DriverManager.getDriver(DriverManager.java:253)
            at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437) 
```

我想知道 a> 某些东西在 tomcat7 上的工作方式是否不同或 b> 我忘了做某事。这就是我所做的：

```
Copy all webapps from tomcat5 to tomcat7
Copy jaikoz.xml file from Conf/Catalina/localhost to tomcat7
Copy common/lib/mysql-connector-java-3.1.4-beta-bin.jar into webapps/jaikoz/WEB-INF/lib 
```

tomcat5 上似乎没有 commons 文件夹所以我只是将 mysql jar 放入应用程序战争中，但也许那是错误的

我的 jaikoz.xml 文件是

```
<Context path="/jaikoz" displayname="jaikoz" docBase="../webapps/jaikoz" debug="0" privileged="true">

<Resource name="jdbc/jaikoz"
            auth="Container"
            type="javax.sql.DataSource"/>

  <ResourceParams name="jdbc/jaikoz">
    <parameter>
      <name>factory</name>
      <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
    </parameter>

    <!-- Maximum number  of dB connections in pool. Make sure you
         configure your mysqld max_connections large enough to handle
         all of your db connections. Set to 0 for no limit.
         -->
    <parameter>
      <name>maxActive</name>
      <value>0</value>
    </parameter>

    <!-- Maximum number of idle dB connections to retain in pool.
         Set to 0 for no limit.
         -->
    <parameter>
      <name>maxIdle</name>
      <value>0</value>
    </parameter>

    <!-- Maximum time to wait for a dB connection to become available
         in ms, in this example 10 seconds. An Exception is thrown if
         this timeout is exceeded.  Set to -1 to wait indefinitely.
         -->
    <parameter>
      <name>maxWait</name>
      <value>10000</value>
    </parameter>

    <!-- MySQL dB username and password for dB connections  -->
    <parameter>
     <name>username</name>
     <value>********</value>
    </parameter>

    <parameter>
     <name>password</name>
     <value>**********</value>
    </parameter>

    <!-- Class name for mm.mysql JDBC driver -->
    <parameter>
      <name>driverClassName</name>
      <value>com.mysql.jdbc.Driver</value>      
    </parameter>

    <!-- The JDBC connection url for connecting to your MySQL dB.
         The autoReconnect=true argument to the url makes sure that the
         mm.mysql JDBC Driver will automatically reconnect if mysqld closed the
         connection.  mysqld by default closes idle connections after 8 hours.
         -->
    <parameter>
      <name>url</name>
      <value>jdbc:mysql://localhost:3306/jaikoz?autoReconnect=true</value>
    </parameter>
  </ResourceParams>

</Context> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:33:21.363

看起来您在类路径中找到了另一个 JDBC 驱动程序：ODBC 驱动程序 (sun.jdbc.odbc.JdbcOdbcDriver)。显然它不喜欢 MySQL JDBC URL，所以你应该删除它。它可能安装在 Tomcat 本身中，也可能安装在您的应用程序中。

此外，您的 MySQL JDBC 驱动程序看起来很旧（mysql-connector-java-3.1.4-beta-bin.jar）。驱动程序的[当前版本](http://dev.mysql.com/downloads/connector/j/)是 5.1.22，或者[3.1 系列](http://dev.mysql.com/downloads/connector/j/3.1.html)的 3.1.14 。您可能想要升级，尤其是当您连接到比 3.1 更新的 MySQL 版本时。

# python - 从python中的列表中删除相似但不相同的列表

> ID：12407852
> 
> 赞同：0
> 
> 时间：2012-09-13T13:52:08.790
> 
> 标签：python, graph, graph-theory

我正在识别方向图中的循环。我的函数返回一个列表列表，这些列表将节点存储在找到的任何循环中。

例如，在节点连接如下的图中：

```
(1,2)(2,3)(3,4)(3,5)(5,2) 
```

在 2 - 3 - 5 处发现了一个循环，因此该函数将返回：

```
[[2,3,5]] 
```

在某些情况下，有多个循环会返回如下内容：

```
[[2,3,4][6,7,8,9]] 
```

这很好，但是如果图中有多个起点在不同点加入同一个循环，例如在图中：

```
(1,2)(2,3)(3,4)(3,5)(5,2)(6,3) 
```

两个节点 1 和 6 在不同的点加入同一个循环，这将返回：

```
[[2,3,5][3,5,2]] 
```

所以这里有两个相同的循环，它们不是相同的列表。我想识别这种重复并删除除一个之外的所有重复（哪个都没有关系）。

请注意，可能存在多个循环的情况，其中一个是重复的，例如：

```
[[2,3,5][3,5,2][7,8,9,6]] 
```

我试过调查 itertools：

```
loops.sort()
list(loops for loops,_ in itertools.groupby(loops)) 
```

但这无济于事，而且我也不能 100% 确定这是否合适。有任何想法吗？我在 python 2.4 上。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:56:27.197

如果您只关心每个循环的元素，而不关心顺序，我会通过对每个循环进行排序来规范化每个循环，然后取集合：

```
>>> loops = [[2,3,5],[3,5,2],[7,8,9,6]]
>>> set(tuple(sorted(loop)) for loop in loops)
set([(2, 3, 5), (6, 7, 8, 9)]) 
```

为了在`set`此处使用，您需要转换为元组。您可以将元组转换回列表，或将最终集合转换回列表（甚至可能`sorted`用于获取规范顺序），但您是否真的需要取决于您将使用它做什么。

如果您需要保留路径顺序，我会以不同的方式规范化：

```
def rotated(l, n):
    return l[n:] + l[:n]

def canonicalize(l):
    m = min(l)
    where = l.index(m)
    return rotated(l, where) 
```

接着

```
>>> loops = [[2,5,3], [5,3,2], [7,8,6,9]]
>>> set(tuple(canonicalize(loop)) for loop in loops)
set([(2, 5, 3), (6, 9, 7, 8)]) 
```

[编辑：请注意，这种简单的规范化仅在每个顶点只能在路径中访问一次时才有效。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:12:34.577

首先你需要定义什么是相似的，因为它比`set`：

```
def is_similar(X,Y):
    n = len(X)
    return len(Y) == n and any( all( X[i] == Y[(i+j)%n] 
                                     for i in range(n) )
                                for j in range(1,n) ) #the 1 here so that identical lists are not similar 
```

区别很重要，因为路径 (1,2,3,4)与路径 (1,3,2,4)**不同**，它们不对应于同一个循环。

```
def remove_similars(L):
     new_L = []
     for item in L:
         if not any( is_similar(item, l) for l in new_L ):
             new_L.append(item)
     return new_L 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:10:14.423

你可以从你`set`的每一个列表中取一个。如果两组相等，则您有一个重复的循环。但是，您正在丢失循环中节点的顺序，但这对您有影响吗？

# c# - ComboBox - DropDownList 不会下拉

> ID：12407854
> 
> 赞同：0
> 
> 时间：2012-09-13T13:52:14.683
> 
> 标签：c#, .net, winforms, drop-down-menu, combobox

这是我的代码：

```
public LayoutScheduler(){
    InitializeComponent();
    this.Load += (sender, args) =>
                     {
                         this.LoadLayouts();
                     };
}

public void LoadLayouts()
{
    ImmutableSet<string> layoutNames = _store.Current.Keys;

    layoutComboBox.BeginUpdate();
    foreach (string name in layoutNames)
    {
        layoutComboBox.Items.Add(name);
    }
    layoutComboBox.EndUpdate();

    layoutComboBox.SelectedIndex = 0;
} 
```

我在我的设计器中将此 ComboBox 设置为 DropDownList 样式，但是，在调试中我可以看到 ComboBox 项目列表增长，当它显示时，它将显示第一个项目作为默认值，但是我不能下拉名单。

如果我然后将 DropDownStyle 更改为一个简单的、可编辑的 DropDown，并做同样的事情，我会得到相同的行为，直到我选择下拉列表中的文本，此时我可以下拉列表。

我一生都无法弄清楚这里发生了什么。有任何想法吗？

编辑：这是如何调用此用户控件并将其添加到表单并显示的代码：

```
 var layoutSchedulerControl =  new LayoutScheduler(connected.Connection.Store, connected.Connection.Schedules);
 Form layoutSchedulerForm = Statics.CreateForm("Layout Scheduler", layoutSchedulerControl);
 layoutSchedulerForm.ShowDialog(this);
 layoutSchedulerForm.Dispose(); 
```

# php - PHP插入多维数组

> ID：12407857
> 
> 赞同：1
> 
> 时间：2012-09-13T13:52:22.683
> 
> 标签：php, arrays, multidimensional-array

我有一个函数，它传递了一个 url 数组。我从每个网页中提取数据，然后将每条数据分配给一个数组。这是我的功能：

```
 function getitems ($urls) {
  $iteminfo = array();
  foreach($urls as $link) {
   $circdl = my_curl($link);
   $circqp = htmlqp($circdl,'body');
   $itemtitle = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('title');
   $itemlink = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('src');
   $itemdesc = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('alt');
   $iteminfo[][] = $itemtitle;
   //$iteminfo[$itemtitle][] = $itemlink;
   //$iteminfo[$itemtitle][] = $itemdesc;
  }
    return $iteminfo;  
 } 
```

我希望数组看起来像这样：

```
 Array ( [0] => Array ( [0] => title [1] => link [2] => desc ) [1] => Array ( [0] => title [1] => link [2] => desc ) [2] => Array ( [0] => title [1] => link [2] => desc ) ) 
```

但是我不知道如何为子数组添加额外的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:57:16.457

尝试这样的事情

```
function getitems ($urls) {
    $iteminfo = array();
    $i = 0;
    foreach($urls as $link) {
        $circdl = my_curl($link);
        $circqp = htmlqp($circdl,'body');
        $itemtitle = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('title');
        $itemlink = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('src');
        $itemdesc = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('alt');
        $iteminfo[$i][] = $itemtitle;
        $iteminfo[$i][] = $itemlink;
        $iteminfo[$i][] = $itemdesc;
        $i++;
    }
    return $iteminfo;  
} 
```

一切都很好，您只需为每一行分配索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:58:02.553

如果我理解正确的话...

```
$iteminfo[] = array($itemtitle, $itemlink, $itemdesc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:58:53.637

您可以轻松更换

```
$iteminfo[][] = $itemtitle;
//$iteminfo[$itemtitle][] = $itemlink;
//$iteminfo[$itemtitle][] = $itemdesc; 
```

和

```
$iteminfo = array($itemtitle, $itemlink, $itemdesc); 
```

您可以这样做，因为语法

```
$array = $element; // where     $array = array(); 
```

只是在 PHP 中向数组添加元素的另一种方法，`$element`也可以是一种`array()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T13:59:33.673

```
function getitems ($urls) {
   $iteminfo = array();
   foreach($urls as $link) {
       $subInfo = array();
       $circdl = my_curl($link);
       $circqp = htmlqp($circdl,'body');
       $subInfo[] = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('title');
       $subInfo[] = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('src');
       $subInfo[] = $circqp->branch()->find('div[class="col-item"]')->children('img')->attr('alt');
      $iteminfo[] = $subInfo;
   }
   return $iteminfo;  
} 
```

# javascript - 没有if的变量之间的&&是什么意思？

> ID：12407860
> 
> 赞同：1
> 
> 时间：2012-09-13T13:52:37.963
> 
> 标签：javascript

我在javascript中有以下代码行：

```
q && (c = q === "0" ? "" : q.trim()); 
```

这是什么意思？我知道这`c`等于空字符串或 q.trim() 结果，但这是什么意思`q && ()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T13:54:25.967

JavaScript 优化布尔表达式。当`q`is`false`时，表达式的右侧与结果无关，因此根本不执行。所以这是一个简短的形式：

```
if( q ) {
    c = q === "0" ? "" : q.trim()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T13:54:35.060

它是对未定义/空/假变量的防范。

如果`q`未定义`false`或设置为`null`，则代码短路并且您不会收到抱怨的错误`null.trim()`

另一种写法是：

```
if(q) {
  c = q === "0" ? "" : q.trim();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:54:17.450

您可以使用这种子句来检查 q 是否已定义。

# javascript - JavaScript 重复正则表达式

> ID：12407863
> 
> 赞同：0
> 
> 时间：2012-09-13T13:52:44.027
> 
> 标签：javascript, regex

考虑我的几个输入字符串。

1.  [http://local.app.com/local/frontend/v12/#/abcde/](http://local.app.com/local/frontend/v12/#/abcde/)
2.  [http://local.app.com/local/frontend/v12/#/abcde/!/fghij/](http://local.app.com/local/frontend/v12/#/abcde/!/fghij/)
3.  [http://local.app.com/local/frontend/v12/#/abcde/!/ghijk/!/klmno/](http://local.app.com/local/frontend/v12/#/abcde/!/ghijk/!/klmno/)

我写了这个正则表达式，它适用于输入字符串 1。

```
(?:([a-zA-Z0-9.://_]*)(/#/(?=([a-zA-Z0-9]{5})/)))

Output:
http://local.app.com/local/frontend/v12/#/,http://local.app.com/local/frontend/v12,/#/,abcde 
```

但是当我扩展它以支持输入字符串 1,2 和 3 的重复**!/.../**占位符时，它不起作用并给出空字符串而不是令牌。

```
(?:([a-zA-Z0-9.://_]*)(/#/(?=([a-zA-Z0-9]{5})/))(!/(?=([a-zA-Z0-9]{5})/))*)

Output:
http://local.app.com/local/frontend/v12/#/,http://local.app.com/local/frontend/v12,/#/,abcde,, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:40:13.223

![我的正则文本的屏幕截图，请参阅评论](../Images/d0f58d5012660e2ee8464e70c2a87e50.png)

希望这将澄清我的评论和之前的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:25:40.780

?= 实际上捕获由您在 ?= 之后指定的内容定义的位置，它不会（也）捕获可能与环视规范匹配的任何内容 (?=)。

尝试

(.+? # (/[a-zA-Z0-9]{5}/) (!/([a-zA-Z0-9]{5})/)* )

（希望我没有打错字，现在无法测试。）

这应该捕获完整的输入，但是内部的各种捕获使您可以访问捕获的“令牌”。

此外，您可以为内部的各种捕获命名，以便在匹配中更容易识别它们：

```
(.+?#(/(?<tokenFirst>[a-zA-Z0-9]{5})/)(!/(?<tokenMore>[a-zA-Z0-9]{5})/)*) 
```

成功

# javascript - 如何在 Javascript 中读取 unsigned int？

> ID：12407864
> 
> 赞同：6
> 
> 时间：2012-09-13T13:52:46.633
> 
> 标签：javascript, ajax

我正在从服务器编写一个二进制字符串，如下所示：

```
header('Content-type: application/octet-stream');
echo $data = pack('C*', 0, 10, 100, 127, 128, 200, 250, 255, 256); 
```

并以这种方式使用 js 和 jDataView lib 读取它：

```
$.get('/get', function(text) {
    var view = new jDataView(text);

    for (var i = 0; i < 20; i++) {
        console.log(i, view.getUint8(i));
    }
}); 
```

问题是我只能读取小于 128 的值。jDataView 使用`getCharCode`at 读取`Uint`，它为每个较大的值返回 65533。

如何获取js中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:22:57.207

当您更改发送的标头（通过 PHP 文件）时，它工作得很好......

`header('Content-Type: text/plain; charset=x-user-defined')`

如果没有这个标头（以及如何处理 XHR 响应的调整；[本文](http://blog.vjeux.com/2011/javascript/jquery-binary-ajax.html)详细描述了该过程），它的`text`值就会变得混乱：所有“无效”（> 127）字符都将被替换为字符`'\uFFFD'`。

当然，从这些字符中提取原始值是不可能的，所以我认为这不是 jDataView 的错误。

# javascript - 与系列中的线性渐变一起使用时，Highcharts colorsByPoint 不起作用

> ID：12407867
> 
> 赞同：0
> 
> 时间：2012-09-13T13:53:01.413
> 
> 标签：javascript, highcharts

我正在尝试设置三种不同的渐变颜色——红色、绿色和黄色，然后根据值将这些颜色分配给我的系列中的各个数据点。但是，当我渲染图表时，它们都默认为我在第一个系列中的第一个数据点上指定的任何颜色。

考虑这个jsFiddle：http: [//jsfiddle.net/2UVcD/2/](http://jsfiddle.net/2UVcD/2/)

尝试将 chartData 数组中的第一种颜色更改为 yellowColor 或 redColor，您就会明白我的意思了。我在 plotOptions 中将 colorbypoint 设置为 true ——我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:09:45.207

`linearGradient`必须是一个`array`，而不是一个对象。

它应该如下所示。

`var perShapeGradient = [0, 0, 1, 0];`

[**演示**](http://jsfiddle.net/2UVcD/3/)

# c# - 从 IIS 以管理员身份启动进程

> ID：12407870
> 
> 赞同：0
> 
> 时间：2012-09-13T13:53:13.323
> 
> 标签：c#, visual-studio-2010, iis-7, windows-server-2008

我需要以管理员用户身份从 IIS7（Windows Server 2008）中托管的 WCF 服务启动一个进程（.exe 控制台应用程序）。怎么能得到这个？

谢谢你，里卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:12:04.973

我不确定 IIS 中的 WCF 服务，但是对于基本网站，您单击该网站（在 inetmgr IIS7 中），在 IIS 部分下有一个名为 Authentication 的图标。然后在主框中有几个选项，如匿名身份验证等。选择一个，然后在右侧点击编辑按钮。您可以指定希望站点执行的用户。如果您真的想要，您可以选择您的管理员帐户。

同样，这是针对 IIS 网站，而不是 WCF 服务。

就像其他一些评论员所说的那样，给它一个完整的管理员帐户并不是正确的方法。我会创建一个具有最低权限的受限用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:41:49.090

只需设置池的应用程序标识（在高级设置中）。这不是最终的解决方案，但现在它有效。

# c# - 使用 Emacs 编译 C# 项目

> ID：12407877
> 
> 赞同：4
> 
> 时间：2012-09-13T13:53:42.893
> 
> 标签：c#, emacs

我使用 emacs 编码和编译 C# 项目。

我的项目文件夹包含：

```
--\test
----Helloworld.cs
----make.bat 
```

然后我在缓冲区中打开 Helloworld.cs 并 Mx 编译，emacs 将为我编译项目。

但是如果我的项目文件夹结构是这样的：

```
--\test
----\src
------Helloworld.cs
----make.bat 
```

然后我在缓冲区中打开 Helloworld.cs 并 Mx 编译，emacs 找不到 make.bat。

我必须在 minibuffer 中找到 make.bat 的“编译命令”。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:23:30.700

emacs compile 通常从源所在的同一目录运行。将 Mx 编译命令设置为`../make.bat`（或给它一个绝对路径），一切都应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:45:00.417

如果`../make.bat`有效，那么它确实是一个不错的选择。如果没有，您可以`cd ../; ./make.bat`改为使用编译命令。您甚至可以让 Emacs 查找文件的目录层次结构`make.bat`并根据需要添加任意数量的文件`../`。

# c# - 将 Google+ 日期转换为印度时区

> ID：12407884
> 
> 赞同：0
> 
> 时间：2012-09-13T13:54:09.803
> 
> 标签：c#, asp.net, .net

我收到此错误：

> System.FormatException：字符串未被识别为有效的 DateTime

当我将 Google plus 日期转换为印度时区时。我使用这段代码：

```
private static DateTime Getdate(string published)
{
    return DateTime.ParseExact(published, "MM/dd/yyyy", CultureInfo.InvariantCulture);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:53:54.043

DateTime.ParseExact 方法的第二个参数必须与第一个参数的格式匹配。尝试像这样更改您的代码：

```
private static DateTime Getdate(string published)
{
    return DateTime.ParseExact(published, "yyyy-MM-ddTHH:mm:ss.fffZ", New CultureInfo("hi-IN"));
} 
```

# linux - 奇怪的“sh”行为

> ID：12407885
> 
> 赞同：0
> 
> 时间：2012-09-13T13:54:11.623
> 
> 标签：linux, bash, sh, angstrom-linux

我正在使用 Angstrom distrubition fo Linux 在 Beaglebone 板上开发应用程序。我遇到了一个有趣的问题。

当我执行：

```
sh /home/root/Desktop/BBTCP/out/vehicleDetect 192.168.10.29 
```

在终端它说

```
/home/root/Desktop/BBTCP/out/vehicleDetect:     /home/root/Desktop/BBTCP/out/vehicleDetect:         cannot execute binary file 
```

但是当我执行

```
cd /home/root/Desktop/BBTCP/ 
```

和

```
sh out/vehicleDetect 192.168.10.29 
```

它开始工作了？？

是什么原因以及为什么我无法使用第一个配置运行该应用程序？

我认为这是关于 ./ 和 sh 之间的区别。有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:18:30.050

我的第一个猜测是路径中的一个文件夹`/home/root/Desktop/BBTCP`是一个链接。如果`vehicleDetect`是一个脚本并且它递归地调用自己，那么这个链接可能会混淆它。

如果不是这种情况，请尝试`sh -x /home/root/Desktop/BBTCP/out/vehicleDetect`查看打印的内容。

最后，检查文件夹中的内容`/home/root/Desktop/BBTCP`。那里可能有一个可执行文件`sh`。如果您的路径包含`.`，则可能会执行不同的 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:44:28.293

似乎`/home/root/Desktop/BBTCP/out/vehicleDetect`正在调用构建在不同架构上的二进制文件（可执行文件）。

`sh`和之间的主要区别在于`./`它将`./`尝试将文件本身作为可执行文件执行，而`sh`将为您执行此操作。可能是文件开头有一个奇怪的幻数，但你会`sh`抱怨这个。

最好的猜测，尽管它是`#!`文件开头的一行，其中包含无效字符或引用了一个奇怪的文件。例如，您是否从另一个具有不同行尾的操作系统（如 Windows）中引入了此脚本文件？当文本文件脚本没有被转换而只是被复制时，我已经看到了类似的效果。也许您以奇怪的格式下载了它？

检查`od -xc /home/root/Desktop/BBTCP/out/vehicleDetect`并查看第一行。

# shell - 为什么 sort k1,1 会改变输出？

> ID：12407893
> 
> 赞同：2
> 
> 时间：2012-09-13T13:54:23.977
> 
> 标签：shell, hadoop, terminal

我是 hadoop 世界的新手，我正在尝试学习使用 map reduce 思维方式编写代码。

所以，我正在关注 michael-noll 教程。

我面临的挑战之一（除了理解一个新框架）是这个框架使用的终端技巧的数量。

那么做什么呢。

```
 $echo "foo foo quux labs foo bar quux" | /home/hduser/mapper.py | sort -k1,1 | /home/hduser/reducer.py 
```

方法？？？回声有什么作用？？

此外，上述代码的输出是：

```
 bar     1
  foo     3
  labs    1
   quux    2 
```

现在，如果我没有排序 -k1,1 的东西

```
 foo     2
  bar     1
  labs    1
  foo     1
   quux    2 
```

排序标志有什么作用？-k1,1 是什么意思？

谢谢..

参考： http: [//www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T14:12:24.240

在 Linux 中，竖线`|`用于将一个命令的输出重定向为另一个命令的输入。

该`echo`命令将以下字符串写入标准输出。因此，在您的情况下，它是写入`foo foo quux labs foo bar quux`，然后将其作为输入传递给`/home/hduser/mapper.py`，然后将其输出作为输入传递给`sort`，依此类推。

`sort`是一个对文本进行排序的 Linux 命令。该`-k`标志告诉它按哪一列排序。所以`1,1`告诉它从第 1 列开始排序，在第 1 列结束。

输入`man sort`您的 Linux 终端以了解有关该命令的更多信息。我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:17:35.853

如果您打算在 Hadoop Streaming 中工作，那么首先运行[本教程](http://www.freeos.com/guides/lsst/)并学习使用 shell 命令可能会有所帮助。它会帮助你很多。

基本上，由于 Reducer 的工作方式，您的输出是不同的。当当前键与最后一个键相同时，它将所有值相加。当当前键与前一个键不同时，它会写出前一个键的值并开始处理当前键。当您的输入看起来像`foo foo bar foo`时，映射器会按顺序处理这些值，产生类似的输出

```
foo 1
foo 1
bar 1
foo 1 
```

然后以相同的格式将其发送到您的 Reducer。你的 Reducer 逐行读取它。为了让您更好地理解这一点，以下是您的 Reducer 采取的步骤：

```
// current_key = NULL
input_key,input_value: foo,1
input_key != current_key:
  current_key = input_key
  current_value = input_value
// current_value = 1

// current_key = foo
input_key,input_value: foo,1
input_key == current_key:
  current_value += input_value
// current_value = 2

// current_key = foo
input_key,input_value: bar,1
input_key != current_key:
  emit <current_key, current_value>
  current_key = input_key
  current_value = input_value
// current_value = 1

// current_key = bar
input_key,input_value: foo,1
input_key != current_key:
  emit <current_key, current_value>
  current_key = input_key
  current_value = input_value
// current_value = 1 
```

这将为您提供 foo 2, bar 1, foo 1 的输出。现在，如果您对 Reducer 的输入进行排序，它看起来像这样：

```
foo 1
foo 1
foo 1
bar 1 
```

这使得 Reducer 继续将 的值`foo`相加而不会被`bar`键打断，因此您会得到 foo 3, bar 1 的输出。可以通过 对值进行排序`sort -k1,1`，这是一个基于 UNIX 命令进行排序的命令第一个字段。Hadoop MapReduce 框架自动对中间值（即 foo 1、foo 1、bar 1、foo 1 数据）进行排序，以便所有具有相同键的键、值对在同一个 Reducer 中结束，产生相同的输出，就像您已通过`sort -k1,1`.

# git - 不能用 GIT rm rm 文件夹？

> ID：12407899
> 
> 赞同：12
> 
> 时间：2012-09-13T13:54:47.153
> 
> 标签：git, git-rm

我想用 GIT 删除整个目录......每次我不断收到相同的错误并且不明白为什么会这样。

我想删除“blue_white”文件夹...

```
├── css
│   ├── design.css
│   └── red_white.css
├── images
│   ├── blue_white
│   │   ├── accordion-button.png
│   │   ├── accordion-shadow.png
│   │   ├── button1.png
│   │   ├── oem-slide-shadow.png
│   │   └── truncate-arrow.png
│   └── red_white
│       ├── accordion-shadow.png
└── pages.xml 
```

当我这样做...

```
git rm -r blue_white/ 
```

我明白这个...

```
fatal: pathspec 'f04/blue_white/' did not match any files 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-13T14:06:30.607

1.  `$ rm -r images/blue_white/`
2.  `$ git rm -r images/blue_white/`
3.  `$ git commit -m 'Remove images/blue_white directory'`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T14:08:14.507

听起来您在`f04`目录中，而不是`images`目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T09:55:48.363

这有效

```
git rm -r --cached blue_white 
```

然后做一个提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-24T15:24:50.550

我刚刚注意到`git rm`删除最后一个剩余文件时会删除一个目录。

仅`myFile`驻留在`myDir`，执行
`git rm myDir/myFile`
目录`myDir`后消失了。请注意，我没有使用该`-r`选项。

# html - IE css按钮外边框

> ID：12407909
> 
> 赞同：0
> 
> 时间：2012-09-13T13:55:07.573
> 
> 标签：html, internet-explorer, button, css

我的按钮适用于除 IE 之外的所有其他浏览器。我认为“边界半径”应该适用于 IE？

![样式不正确的按钮的屏幕截图](../Images/e95d9d051bbe4d892bb102f3eaed1de9.png)

```
.simpleHelp {
  border-top: 1px solid #ffffff;
  background: #910330;
  background: -webkit-gradient(linear, left top, left bottom, from(#790228), 
  to(#910330));
  background: -webkit-linear-gradient(top, #790228, #910330);
  background: -moz-linear-gradient(top, #790228, #910330);
  background: -ms-linear-gradient(top, #790228, #910330);
  background: -o-linear-gradient(top, #790228, #910330);
  padding: 10.5px 21px;
  -webkit-border-radius: 40px;
  -moz-border-radius: 40px;
  border-radius: 40px;
  -webkit-box-shadow: rgba(0,0,0,1) 0 1px 0;
  -moz-box-shadow: rgba(0,0,0,1) 0 1px 0;
  box-shadow: rgba(0,0,0,1) 0 1px 0;
  text-shadow: rgba(0,0,0,.4) 0 1px 0;
  color: #ffffff;
  font-size: 17px;
  font-family: Georgia, Serif;
  text-decoration: none;
  vertical-align: middle;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:44:02.307

[Border-radius（实际上，任何 CSS3）仅适用于 IE9+ ，但是，您可以使用名为](http://caniuse.com/#search=border-radius)[CSS3PIE](http://css3pie.com/)的有趣小库将 CSS3 内容“改造”到旧版本的 IE9 上。如果您*真的*需要 IE 中的边框和阴影，那么 CSS3PIE 是您的最佳选择。但是，让旧浏览器优雅地降级也是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:58:18.690

恐怕边界半径仅适用于 IE9 及更高版本。

[http://www.findmebyip.com/litmus/](http://www.findmebyip.com/litmus/)

# android - Android：来自 IntentService 的 Toast 永远保留在屏幕上

> ID：12407910
> 
> 赞同：3
> 
> 时间：2012-09-13T13:55:07.870
> 
> 标签：android, toast, intentservice

我检查了[这个问题](https://stackoverflow.com/questions/12200925/toast-doesnt-disappear-from-screen "这个问题")，但它似乎没有回答我的问题，这涉及的要少得多。我从主流程的菜单项中调用 IntentService。它目前只是一个骨架，它在 onHandleIntent() 中放置一个 Toast，最终应该在处理结束时短暂出现以表示它已完成。然而，它永远保留在屏幕上（即使应用程序停止）。我使用模拟器和我的 Galaxy S2 进行了测试，结果相同。有人可以指出我正确的方向吗？

这是服务代码：

```
 package com.enborne.spine;

 import android.app.IntentService;
 import android.content.Intent;
 import android.util.Log;
 import android.widget.Toast;

 public class SaveFile extends IntentService {
     private final String TAG = "SaveFile";

     public SaveFile() {
         super("SaveFile");
     }

     @Override
     public void onCreate() {
         super.onCreate();
         Log.d(TAG, "Service Started.. ");
     }

     @Override
     public void onDestroy() {
         super.onDestroy();
         Log.d(TAG, "Service Destroyed.. ");
     }

     @Override
     protected void onHandleIntent(Intent intent) {
         // TODO Auto-generated method stub
         Log.d(TAG, "HandleIntent");
         // File saved
         Toast.makeText(this, "File has been saved", Toast.LENGTH_SHORT).show();
     }
 } 
```

（onCreate 和 onDestroy 覆盖只是暂时用于登录 Eclipse，所以我可以看到发生了什么。）

因此，我从活动中的菜单调用它（与上下文混淆只是因为服务没有启动 - 有些白痴忘记将它包含在清单中！）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent i;
    switch (item.getItemId()) {
    case R.id.chart:
        i = new Intent(getBaseContext(), Chart.class);
        i.putExtra(KEY_CENTRE_LAT, mCentreLat); // centre coordinate
        i.putExtra(KEY_CENTRE_LONG, mCentreLong); // centre coordinate
        i.putExtra(KEY_RADIUS, mRadius); // effective radius
        startActivity(i);
        break;

    case R.id.save:
        Log.d("SaveFile", "Starting service...");
        //      i = new Intent(getBaseContext(), SaveFile.class);
        i = new Intent(this, SaveFile.class);
        startService(i);
        break;
    }
    return true;
} 
```

编辑：我找到[了这篇文章](http://www.androidsnippets.com/use-toast-wherever-you-want)，它可以解释这个问题。引用一句话：

> 但是，您只能在主 GUI 线程中使用 Toast，否则您会遇到 Toast 消息在一段时间后不会消失的问题（因为主 GUI 上下文不知道在单独的线程上下文中使用的 Toast 消息的任何信息）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T19:39:34.730

在我的编辑中链接到的文章将我带到了[这个博客](http://www.jjoe64.com/2011/09/show-toast-notification-from-service.html)，它解决了我的问题。我没有在其他地方看到您不能直接从服务中发出祝酒词。所以我的 onHandleIntent 现在看起来像这样：

```
private Handler handler;

@Override
protected void onHandleIntent(Intent intent)
{
    Log.d(TAG, "onHandleIntent");

    /* Stripped out some code here that I added later to keep it similar to
     * my example above
     */

    handler.post(new Runnable()
    {  
//      @Override
        public void run()
        {
            Toast.makeText(getApplicationContext(), "File has been saved", 
                Toast.LENGTH_SHORT).show();
        }
    });    // Display toast and exit
} 
```

（如果有人能解释为什么我必须在 run() 上注释掉 @Override 以避免错误，我将不胜感激。我的应用程序中还有其他几个地方必须这样做。）

编辑：我刚刚发现[这篇文章](https://stackoverflow.com/questions/3955410/create-toast-from-intentservice)几乎是一回事。我不知道我以前是怎么错过的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T19:40:30.173

onHandleIntent 在工作线程中执行。

我会尝试从 UI 线程执行 Toast.show() 。

# php - 创建 Paypal 私钥和公共证书

> ID：12407913
> 
> 赞同：0
> 
> 时间：2012-09-13T13:55:22.567
> 
> 标签：php, paypal

是否可以通过 PHP 创建私钥和公共证书？

因为我们购物车中的交易金额可能很高，而且 PayPal 要求在付款按钮中创建一个私钥和公共证书。这些是 .pem 文件，我没有要创建的代码。

我不知道该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:25:33.310

您可以使用 openssl 生成私钥和公钥。在 Paypal 上查看[此文档。](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_encryptedwebpayments#id08A3I0QC0X4)按照步骤使用加密付款设置您的企业帐户。

此外，当我不得不设置结帐页面时，我曾经使用您使用 PHP 生成的密钥来生成加密按钮[。](http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php)

# c# - asp.net：调试缓慢 - 总是触发 application_start

> ID：12407914
> 
> 赞同：0
> 
> 时间：2012-09-13T13:55:24.017
> 
> 标签：c#, asp.net, .net-4.0

我有一个包含大约 200 个 aspx 页面的应用程序，几天前它开始运行缓慢。

似乎 VS 2010 调试器开始在每次代码更改时触发 application_start。

在这种缓慢的行为之前，调试器只触发了一次 application_start，我不得不停止开发服务器来强制事件。

*   Windows 2008 R2 服务器 x64
*   视觉工作室 2010
*   3 名开发人员通过 rdp（都遇到相同的问题）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:57:53.203

这就是`Application_Start`应该如何工作。它仅在应用程序池启动或代码库或 web.config 文件发生更改时触发，这将导致它重新启动。

[本文](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)更详细地讨论了该主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:06:56.957

我认为您的代码是在导致问题的 Web 服务器上创建/删除文件夹。

[创建、重命名或删除文件夹时，](https://stackoverflow.com/questions/2248825/asp-net-restarts-when-a-folder-is-created-renamed-or-deleted)您应该检查ASP.NET 重新启动

# facebook - 链接到 Facebook 用户的个人资料

> ID：12407915
> 
> 赞同：0
> 
> 时间：2012-09-13T13:55:26.483
> 
> 标签：facebook, hyperlink, profile

我想知道是否有可能在我的网站中有一个链接直接进入 Facebook 用户的个人资料网站，用户已登录，但无需用户每次单击我的链接时都登录 Facebook网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:02:14.757

您可以将它们链接到[http://facebook.com/me](http://facebook.com/me)

如果他们登录 Facebook，该链接会将他们放入他们的个人资料/时间线页面。如果没有，他们将被提示登录。

# apache - 如何在错误日志中确定 apache“无法打开以供阅读”的文件

> ID：12407916
> 
> 赞同：7
> 
> 时间：2012-09-13T13:55:31.190
> 
> 标签：apache, logging, permissions

我的 apache 错误日志充满了

```
Error opening file for reading: Permission denied
Error opening file for reading: Permission denied
Error opening file for reading: Permission denied 
```

等等

如何确定导致此权限错误的文件或文件夹？出现的错误和 access_log 请求之间没有直接关系。

[谷歌搜索建议](https://askubuntu.com/questions/159572/how-to-determine-file-in-error-opening-file-for-reading-error)我应该使用**strace**但是当我这样做时

```
strace apache2 
```

或者

```
strace -etrace:open apache2 
```

响应很冗长，因为我之前没有真正成功使用过这个工具，所以我不确定要寻找什么。这是出现的痕迹。

```
.....
open("/lib/x86_64-linux-gnu/libnss_nis.so.2", O_RDONLY|O_CLOEXEC) = 3
open("/lib/x86_64-linux-gnu/libnss_files.so.2", O_RDONLY|O_CLOEXEC) = 3
open("/etc/passwd", O_RDONLY|O_CLOEXEC) = 3
apache2: bad user name ${APACHE_RUN_USER} 
```

最后一行似乎是唯一的原因，但我的网络服务器正在处理图像，以及如果 apache 用户不够用，各种磁盘内容将成为问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:29:55.800

我对 strace 不是很了解，但我认为您需要做一些其他的事情才能让 Apache 按您的意愿运行。

如果您只是运行 apache2 二进制文件，您的程序将停止（如您所述）并使用错误的用户名，因为通常 apache 用户名/组被设置为配置的一部分（在我的 Ubuntu 12.04 安装中的 /etc/apache2/envvars 中） .

我发现最简单的是在我的机器上找到 apachectl 脚本，然后搜索“start)”。您会发现如下所示的一行：

`$HTTPD ${APACHE_ARGUMENTS} -k $ARGV`

您可以在此处添加您的 strace，使其看起来像：

`strace -etrace:open -f $HTTPD ${APACHE_ARGUMENETS} -k $ARGV`

您需要包含 -f 选项，因为 apache 将产生许多进程，并且您最有可能希望跟踪它们，至少这对我有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T11:15:54.040

您需要查找`open()`导致返回值 -1、errno == EACCES 的调用。

我不得不在 ubuntu 上调整以下 strace 命令行（在 /usr/sbin/apachectl 中）：

```
strace -o /tmp/strace.log -e trace=open -f $HTTPD ${APACHE_ARGUMENTS} -k $ARGV 
```

将`-o`输出存储在文件中。如果您担心在每个人都可读的区域中泄漏文件名，请使用适当的目标目录。

我自己正在使用在 apache mod wsgi 中运行的 python 程序来追逐一个类似的错误。我在找这些...

```
3556  open("/proc/self/auxv", O_RDONLY) = -1 EACCES (Permission denied) 
```

我认为我的错误与 wsgi 工作进程将权限从 root 降低到运行应用程序的普通用户的事实有关，但在权限降低后，`/proc/self/auxv`常规进程仍然无法读取。 - 也许。

# c# - 将列表框数据绑定到列表

> ID：12407922
> 
> 赞同：1
> 
> 时间：2012-09-13T13:55:44.663
> 
> 标签：c#, wpf, xaml, data-binding, listbox

我在尝试通过 XAML 将我的 List 类型的属性绑定到 ListBox 时运气不佳。请注意，该列表包含字符串数组 (string[])。

所以代码的 XAML 部分如下所示：

```
<ListBox Height="373" HorizontalAlignment="Left" Margin="9,65,0,0" Name="reservoirList" VerticalAlignment="Top" Width="546" 
                 ItemsSource="{Binding Wells}">
</ListBox> 
```

在视图模型上：

```
public ObservableCollection<string[]> Wells {
            get { return new ObservableCollection<string[]>(getWellsWithCoords()); }            
        } 
```

其中 getWellsWithCoords() 创建一个字符串 [] 列表。

当我运行应用程序时，我看到的是 - 这是有道理的：

```
string[] array
string[] array 
.... 
```

是否可以以这样的方式更改 XAML 代码，以便在每一行上自动看到 Wells 列表中每个元素的 n 值，即类似于：

```
well1 value11 value12
well2 value21 value22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:07:01.620

将模板添加到您的列表框：

```
<ListBox Height="373" HorizontalAlignment="Left" Margin="9,65,0,0" Name="reservoirList" VerticalAlignment="Top" Width="546" ItemsSource="{Binding Wells}">
<ListBox.ItemTemplate>
    <DataTemplate>
        <!--Here you bind the array-->
        <ItemsControl ItemsSource="{Binding}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <!--Here you bind the value of each string-->
                <DataTemplate>
                    <TextBlock Text="{Binding}" Margin="5,0"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:09:28.890

您可以实现自己的类来保存这些数据：

```
public class WellInfo
{
    private string[] _infos;
    public WellInfo(string[] infos)
    {
        this._infos = infos;
    }
    public string DisplayValue
    {
        get { return this._infos.Aggregate((current, next) => current + ", " + next); }
    }
} 
```

在您的收藏中使用：

```
public IEnumerable<WellInfo> Wells
{
    get { return getWellsWithCoords().Select(x => new WellInfo(x)); }            
} 
```

在 XAML 中：

```
<ListBox 
    ItemsSource="{Binding Wells}" 
    DisplayMemberPath="DisplayValue" /> 
```

# iphone - 以不在 Settings.app 的“语言”列表中的语言本地化应用程序

> ID：12407927
> 
> 赞同：4
> 
> 时间：2012-09-13T13:55:54.783
> 
> 标签：iphone, ios, xcode, cocoa-touch, localization

这是我的问题：

![在此处输入图像描述](../Images/a0d12059d5533e3ea051a05a68da0d87.png)

我有 2 个本地化版本 - 英语和保加利亚语。我无法加载保加利亚语，因为它不在“语言”列表中，并且即使区域格式设置为“保加利亚”，也会加载英语。

有没有办法用我的保加利亚本地化文件打开我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-29T10:18:33.143

至少从 iOS 8 开始，您可以在*Settings > General > Language and Region中的***Preferred Language Order**标题下更改语言顺序。

![截屏](../Images/68c5e60f113f17114378c76f1d13a4b5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T09:16:27.657

不幸的是，如果 iOS 不支持保加利亚语，则没有本地方式支持保加利亚语。我们在威尔士也有类似的问题。

目前，我建议使用查找表手动切换语言的应用内设置。也许这也可以通过查看 [NSLocale currentLocale] 来激活。

# linux - 来自linux内核的所有分叉进程

> ID：12407928
> 
> 赞同：0
> 
> 时间：2012-09-13T13:55:55.843
> 
> 标签：linux, process, linux-kernel

我如何从 linux 内核模块中列出所有分叉进程的树。我知道我可以使用一个级别的分叉进程

```
list_for_each_entry(child, &parent->children, sibling) {

} 
```

但是我怎样才能获得所有级别，比如

```
Parent
   |
   child 
      | 
       childs_child 
```

像这样，我知道递归函数在内核中不是很好的选择。那么我将如何遍历父级的所有分叉进程

# mysql - 将 ORDER BY 与 ROLLUP 一起使用

> ID：12407938
> 
> 赞同：0
> 
> 时间：2012-09-13T13:56:32.080
> 
> 标签：mysql

整天都在为此苦苦挣扎，现在尝试各种组合而没有任何快乐，如果有人可以提供帮助吗？我使用 WITH ROLLUP 对 Total 列求和，该列在表的底部添加一行，输出每列的总和。

我现在需要对最后一列 [利润] 进行降序排序，因此最高数字位于顶部。我已经使用下面的查询实现了这一点，但它也对 ROLLUP 行进行了排序，是否有一种方法可以将汇总作为单独的实体，因此 ORDER BY 仅在普通记录上完成？

```
Select
  *
From
  (Select
      c.ContactFullName As Adviser,
      Sum(If(Month(b.CaseDate) = 1, b.LeadCost, 0)) As Jan,
      Sum(If(Month(b.CaseDate) = 2, b.LeadCost, 0)) As Feb,
      Sum(If(Month(b.CaseDate) = 3, b.LeadCost, 0)) As Mar,
      Sum(If(Month(b.CaseDate) = 4, b.LeadCost, 0)) As Apr,
      Sum(If(Month(b.CaseDate) = 5, b.LeadCost, 0)) As May,
      Sum(If(Month(b.CaseDate) = 6, b.LeadCost, 0)) As Jun,
      Sum(If(Month(b.CaseDate) = 7, b.LeadCost, 0)) As Jul,
      Sum(If(Month(b.CaseDate) = 8, b.LeadCost, 0)) As Aug,
      Sum(If(Month(b.CaseDate) = 9, b.LeadCost, 0)) As Sep,
      Sum(If(Month(b.CaseDate) = 10, b.LeadCost, 0)) As Oct,
      Sum(If(Month(b.CaseDate) = 11, b.LeadCost, 0)) As Nov,
      Sum(If(Month(b.CaseDate) = 12, b.LeadCost, 0)) As Decb,
      Sum(b.LeadCost) As LeadCosts,
      Sum(b.CaseCommission) As GrossComm,
      (Sum(b.CaseCommission) * 40 / 100) As GHL_Comm,
      (Sum(b.CaseCommission) * 40 / 100 - Sum(b.LeadCost)) As Profit
    From
      tblcontacts a Inner Join
      tblcases b On a.ContactID = b.ContactID Inner Join
      mi_tblcontacts c On c.Mi_ContactID = b.ContactAssignedTo Inner Join
      tblreferral d On d.RefferalID = a.ContactReferrelSource
    Group By
      c.ContactFullName With Rollup) q
Order By
  q.Profit Desc 
```

任何帮助表示赞赏。

G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:16:52.103

你可以尝试这样的事情：

```
SELECT *, If(ContactFullName is null, 1, 0) as rolledup 
FROM ( .... giant inner select goes here ...)
ORDER BY rolledup asc, q.profit desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:10:10.403

当您按利润降序订购时，您会将汇总列作为第一行，这没有意义。所以我想您不能那样做。据我所知，您不能简单地更改一列的顺序并保持其余列的顺序不变。

# python - Errno 32 Broken pipe, Errno 107 Transport endpoint is not connected python socket

> ID：12407939
> 
> 赞同：0
> 
> 时间：2012-09-13T13:56:40.280
> 
> 标签：python, apache, tcp, broken-pipe, sigpipe

我的 TCP Server 是用 Qt 4.7 编写的，可以与同样用 Qt 4.7 编写的 TCP Client 配合使用。

我正在尝试使用用 python 2.7.3 编写的客户端与服务器连接和通信。我通过 apache http 请求启动服务器进程`subprocess.call(path_to_server)`。我正在使用 mod_wsgi 3.3 和 django 1.4。

建立连接没有问题。我随机收到`[Errno 32] Broken pipe`异常`socket.send()`（我可以发送相同的消息 10 次，它将被发送 0-10 次）。`socket.shutdown()`&也发生同样的情况`socket.close()`，我可以发送垃圾邮件断开命令，它会随机断开连接，否则会收到`[Errno 107] Transport endpoint is not connected`异常。

netstat -nap 表示连接已建立。

当我尝试使用 python2.7 shell 运行相同的客户端脚本时，一切正常。

我在这里想念什么？

`EDIT` 一切都在 Windows 7 上运行，运行相同的 apache、mod_wsgi、python、django 配置。TCP Server 也与 Windows 兼容。centos6.2 32bit 发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:01:02.260

我必须将apache设置设置为以下： `KeepAlive On` `MaxKeepAliveRequests 0` `KeepAliveTimeout 5`

我将进一步调查这个问题，看看这是否是正确的解决方案。

# asp.net - User.Identity.Name 是否曾经抛出？

> ID：12407943
> 
> 赞同：3
> 
> 时间：2012-09-13T13:56:51.763
> 
> 标签：asp.net, asp.net-mvc, forms-authentication, defensive-programming

我注意到`User.Identity.Name`当没有用户经过身份验证时似乎返回空字符串，而不是抛出空引用异常。

`User.Identity.Name`假设永远不会抛出是有效的吗？或者我应该`Identity`在访问之前检查 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:04:56.707

我相信如果您没有调用 User 对象可以为 null

```
FormsAuthentication.SetAuthCookie(UserName, False) 
```

或者

```
FormsAuthentication.RedirectFromLoginPage(UserName, False) 
```

最好用 try catch 包裹起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:44:40.697

`Name`是一个属性而不是方法，因此它的“getter”位极不可能抛出异常，因为它是一个 Microsoft 类，并且他们的[框架设计指南](http://msdn.microsoft.com/en-us/library/ms229006.aspx)明确警告不要从 getter 抛出异常。虽然这条规则在某处可能有一个例外......

此外，我通常使用元数据作为方法（对于 .Net 框架类）是否抛出任何异常的指南。在 Visual Studio 中按 F12（如果您没有安装 Reflector 或类似的东西）将显示元数据。在方法上方的注释块中，它通常会为您提供该方法可能抛出的确切异常类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:29:04.600

`User.Identity`如果`User`当前的`HttpContext`. 虽然它`User`是空的，但不是`Identity`。所以是的，您应该以某种方式检查或处理 null 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:32:48.700

While`Name`是一个字符串，`Identity`并且`User`是对象，当然可以像任何对象一样为 null。因此，总是有机会抛出异常，作为生产应用程序，您最好**使用 try/catch 将其包装起来，并检查名称是否为 null**。

# python - Python：查询集没有属性'start_time'

> ID：12407948
> 
> 赞同：0
> 
> 时间：2012-09-13T13:57:04.920
> 
> 标签：python, django

我的会议模型在这里

```
class Meeting(models.Model):
    name = models.CharField(max_length=200)
    meetingID = models.CharField(max_length = 50) 
    venue = models.ForeignKey('MeetingRoom',related_name ='meetingroom',null = True,blank = True)   # whether One Time or Recurring
    status =models.IntegerField(null=True, blank=True)
    recurring_time = models.CharField(max_length=50)              # (Recurring date schedule information)
    attendee_passwd = models.CharField(max_length=100)
    moderator_passwd = models.CharField(max_length = 100)
    date_created = models.DateTimeField(auto_now=True)               # it should be auto fill 

    meeting_datetime = models.DateTimeField(default=datetime.datetime.now,blank=True, null=True)
    timezone = models.CharField(max_length = 50)
    reminder = models.BooleanField()
    start_time = models.CharField(max_length=100)
    end_time = models.CharField(max_length=100)
    meeting_duration = models.CharField(max_length=100)

    duration = models.CharField(max_length=20)
    created_by = models.ForeignKey('User',related_name ='meetingroom_created')
    sms_no = models.IntegerField()  #participant will call on this number   Unique for all users and participant 
    conferenceID = models.IntegerField(blank=True, null=True)
    meeting_logout_url = models.CharField(max_length=100)
    max_participants = models.IntegerField(blank=True, null=True)
    participants = models.ForeignKey('Participant',related_name = 'parts_of_meetingroom',null = True)

    def disable_from_meeting(self):
        try:
            get_participant = Participant.objects.filter(meeting_id =self.id)
            for get_pp in get_participant:
                get_pp.status = 0
                get_pp.save()
        except:
            LOG_INFO('Organization %s has no PARTICIPANT IN %Ssuser ', self.id)
            pass  
    class Meta:
        app_label = 'testsite' 
```

现在在我看来，当我试图将 start_time 存储在字典中时

```
 get_all_user_of_org = User.objects.filter(org_name =get_org)

            for user_id in get_all_user_of_org:
                mee_data = {} 
                get_meetings = Meeting.objects.filter(created_by = user_id.id)
                print dir(get_meetings)
                mee_data['start_time'] = get_meetings.start_time 
              #  mee_data['end_time'] = get_meetings
                getall.append(mee_data) 
```

那我为什么要得到

```
 AttributeError: 'QuerySet' object has no attribute 'start_time' 
```

这里没有理由显示此错误，因为 start_time 是我的会议表的属性

请帮帮我我会做错什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:03:16.680

`Meeting.objects.filter`不返回一个`Meeting`- 它正在返回一个`QuerySet`会议。您可以遍历`QuerySet`以获取每个会议的会议时间：

```
for user_id in get_all_user_of_org:
    mee_data = {} 
    get_meetings = Meeting.objects.filter(created_by = user_id.id)
    print dir(get_meetings)
    for meeting in get_meetings:
        do_something_with(meeting.start_time) 
```

您必须意识到您在这里处理的会议不止一次，而且他们可能有不同的开始时间。在这种情况下，您将最清楚自己想要做什么。大概是这样的吧？

```
for user_id in get_all_user_of_org:
    get_meetings = Meeting.objects.filter(created_by = user_id.id)
    for meeting in get_meetings:
        mee_data = {} 
        mee_data['start_time'] = meeting.start_time
        getall.append(mee_data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:06:08.513

那么你正在使用

```
get_meetings = Meeting.objects.filter(created_by = user_id.id) 
```

这个返回类型`filter`是一个查询集对象，它可以有一个或多个对象。要获得`start_time`所有的`meetings`a `user`，你应该使用类似的东西

```
get_meeting_start_times = Meeting.objects.filter(created_by = user_id.id).values_list('start_time', flat=True) 
```

# php - 尝试将表单发送到 Facebook iframe 内的另一个域

> ID：12407949
> 
> 赞同：0
> 
> 时间：2012-09-13T13:57:07.317
> 
> 标签：php, facebook, forms, iframe, x-frame-options

尝试在 Facebook 应用程序上将表单发送到 Facebook iframe 内的另一个域。

我有一个类似的表格：

```
<form id="email_capture" action="{GOES TO ANOTHER DOMAIN}" method="POST">
                <input id="fname_capture_field" placeholder="Enter Your First Name" type="text">
                <input id="lname_capture_field" placeholder="Enter Your Last Name" type="text">
                <input id="email_capture_field" placeholder="Enter Your Email Address" type="text">
                <input id="phone_capture_field" placeholder="Enter Your Phone Number" type="text"><br/>
                <a id="email_capture_btn" href="#"></a>
                <p class="email_capture_error"></p>
            </form> 
```

如果我转到直接 URL 并使用表单，它会正确发送，但如果我通过 iframe 将其用作 Facebook 应用程序，则会收到此错误。

```
Display forbidden by X-Frame-Options 
```

我已经看过[这篇文章](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)，但我无权访问其他域。

知道我应该怎么做吗？我是否必须联系其他域并让他们允许 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:58:50.853

您联系其他域以让您在 iFrame 中显示他们的页面，或者您使用`_target`和更改页面：

```
<form id="email_capture" action="{GOES TO ANOTHER DOMAIN}" method="POST" target="_top">
                <input id="fname_capture_field" placeholder="Enter Your First Name" type="text">
                <input id="lname_capture_field" placeholder="Enter Your Last Name" type="text">
                <input id="email_capture_field" placeholder="Enter Your Email Address" type="text">
                <input id="phone_capture_field" placeholder="Enter Your Phone Number" type="text"><br/>
                <a id="email_capture_btn" href="#"></a>
                <p class="email_capture_error"></p>
            </form> 
```

# unit-testing - 在 Xcode 的单元测试中拆解

> ID：12407951
> 
> 赞同：1
> 
> 时间：2012-09-13T13:57:08.487
> 
> 标签：unit-testing, ios5, xcode4, ocunit

```
- (void) tearDown 
{
  // tear-down code here
  [super tearDown];
} 
```

此处的 tearDown 的功能是什么？

“ `tearDown`”只是用来释放内存的吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T16:24:39.037

一般来说，tearDown 应该撤消在 setUp 中所做的任何事情。

至于释放内存，tearDown*可以*这样做，但确实应该尽快完成（所以在 tearDown 中，它会释放任何在 setUp 中初始化的内存）。如果你在你的测试中初始化它，它应该在你的测试中被释放。

# php - 移动并自动重命名（自定义）文件

> ID：12407962
> 
> 赞同：-4
> 
> 时间：2012-09-13T13:57:35.970
> 
> 标签：php, fuelphp

我需要将文件从路径 ($old_path) 移动到另一个路径 ($new_path)。

在将文件移动到 $new_path 之前，我必须检查我是否已经有一个内部具有相同“filename.ext”的文件。

如果我不这样做，我只是将文件从 $old_path 移动到 $new_path，否则我有一个同名的文件，我想先用 1_ 重命名新文件，所以新文件将是' 1_filename.ext'

然后我收到另一个文件并再次检查 $new_path 中是否存在“filename.ext”。

再次我必须重命名文件，但这次我不能将它重命名为“1_filename.ext”，因为已经有一个具有此名称的文件。

记住我想要做什么，如何自动创建新文件名，每次生成最后一个 filename.ext + 1 作为前缀？

如果 $new-path 为空，第一个文件将是 filename.ext

第二次，我将（自动）将新文件重命名为 1_filename.ext

第三次，我将（自动）重命名新文件为 2_filename.ext

等等 ...

寻找你的建议。

PS如果你有FuelPHP的东西会很棒，否则......普通的PHP就可以了！

这就是我到现在为止所做的事情：

```
$fresh_files = File::read_dir(DOCROOT . DS . 'opta_archive');

foreach ($fresh_files as $fresh_file) 
{

$file_name = basename($fresh_file, '.xml');

if (file_exists(DOCROOT.DS.'fantomic_archive'.DS.$file_name))
{
    //create a new unique name for the new file
    //and then move it in our archive folder

}
else
{
    //move the file in our archive folder
    File::rename(DOCROOT.DS.'opta_archive'.DS.$fresh_file, DOCROOT.DS.'fantomic_archive'.DS.$fresh_file);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:47:54.703

根据“andrewsi”提供的想法，最终的解决方案是：

```
$fresh_files = File::read_dir(DOCROOT . DS . 'opta_archive');foreach ($fresh_files 作为 $fresh_file)
{
    $file_name = basename($fresh_file);

$count = 1;

if (file_exists(DOCROOT.DS.'fantomic_archive'.DS.$count . "_" . $file_name))
{
    $count++;

    File::rename(DOCROOT.DS.'opta_archive'.DS.$fresh_file, DOCROOT.DS.'fantomic_archive'.DS.$count . "_" . $file_name);
}
else
{
    File::rename(DOCROOT.DS.'opta_archive'.DS.$fresh_file, DOCROOT.DS.'fantomic_archive'.DS.$count . "_" . $file_name);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:12:31.137

我认为这应该做你想要的。

它检查文件是否存在于您的`fantomic_archive`文件夹中；如果没有，它只是移动文件。

否则，它会循环——它在文件名的开头添加一个数字，并检查该数字是否存在。一旦它生成一个唯一的文件名，它就会将文件重命名为该文件名。

```
$fresh_files = File::read_dir(DOCROOT . DS . 'opta_archive');

foreach ($fresh_files as $fresh_file) {
    $file_name = basename($fresh_file, '.xml');

    if (! file_exists(DOCROOT.DS.'fantomic_archive'.DS.$file_name)) {
        //create a new unique name for the new file
        //and then move it in our archive folder

    File::rename(DOCROOT.DS.'opta_archive'.DS.$fresh_file, DOCROOT.DS.'fantomic_archive'.DS.$fresh_file);
    } else {
        $count = 1;
        while (file_exists(DOCROOT.DS.'fantomic_archive'.DS.$count . "_" . $file_name)) {
            $count++;
        }
        File::rename(DOCROOT.DS.'opta_archive'.DS.$fresh_file, DOCROOT.DS.'fantomic_archive'.DS.$count . "_" . $fresh_file);
    }
} 
```

# java - 用于创建文本文件的 java 模板引擎/api 是什么？

> ID：12407963
> 
> 赞同：8
> 
> 时间：2012-09-13T13:57:36.633
> 
> 标签：java, templates, text-files

我想在基于 Java 的 Web 应用程序中创建不同格式的文件。这些文件是没有任何 html 标签的纯文本文件。但是文件需要某种格式，文本在文件的左侧、中间、右侧或某处（制表符、空格）。

带有占位符的模板 + 带有数据的 java bean = 文本文件。

什么 java 模板引擎或 api 适合这个？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:03:09.250

您可以查看[字符串模板](http://www.stringtemplate.org)( [GitHub](http://www.stringtemplate.org) )。

它看起来像这样：

```
import org.antlr.stringtemplate.*;
import org.antlr.stringtemplate.language.*;

StringTemplate hello = new StringTemplate("Hello, $name$", DefaultTemplateLexer.class);
hello.setAttribute("name", "World");
System.out.println(hello.toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:04:29.640

[Velocity](http://velocity.apache.org/engine/index.html)是一个非常灵活的模板引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:06:28.000

您可以尝试以下任一方法

*   [字符串模板](http://www.stringtemplate.org/)
*   小胡子模板，[这里有解释](http://www.javarants.com/2010/06/16/building-the-ideal-web-application-template-engine/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T14:12:38.553

对于那些喜欢清晰分离的人来说，有一个名为[Snippetory](http://www.jproggy.org/snippetory)的引擎。它将逻辑与模板的文本部分完全分离，同时提供现代引擎所期望的丰富功能集。它对纯文本格式有一些支持，可以根据需要添加其他格式，并使用可插入的转义工具来弥补。如果模板很小，可以将多个模板放在一个文件中，同时也可以将多个文件中的代码组合在一起。它也很一般。

# notepad++ - Notepad++ 下划线标签

> ID：12407964
> 
> 赞同：11
> 
> 时间：2012-09-13T13:57:38.717
> 
> 标签：notepad++

Notepad++ 似乎在打开和关闭标签下划线，但到目前为止我只找到了一个实例，有人知道是什么原因造成的吗？

![记事本++讨厌我](../Images/c75086de147c3e901b60418e08b1a4aa.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-27T20:42:01.630

### 当前方法

要在 Notepad++ 中禁用链接下划线：

*   转到**设置**>**首选项**>**云和链接**>可**点击链接设置**
*   取消选中“启用”复选框或选中“无下划线”复选框

[![在此处输入图像描述](../Images/627687bd1f3dbb0838d5eda084896a43.png)](https://i.stack.imgur.com/fQU4w.png)

### 较旧的方法

在旧版本的 Notepad++ 中，禁用链接下划线的方法是：

*   转到**设置**>**首选项**> **MISC** >可**点击链接设置**
*   取消选中“启用”复选框
*   重启记事本++

![在此处输入图像描述](../Images/92c72b8438058af96b5b5af494e39ccc.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T08:55:35.470

我在 Windows 8 中使用 notepad++ 时遇到了同样的问题。我发现在设置中激活了超链接。这为我解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T14:02:19.770

在设置|样式配置器下，您可以设置字体，包括为特定语言的特定样式设置下划线。

您可能需要检查语言 HTML 和样式 TAG 和 TAGEND。取消选中下划线复选框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T14:15:14.700

不管这是什么，它都通过重新启动来修复，如果再次发生，我将提交一个错误报告。

谢谢

# full-text-search - 如何在开放式搜索服务器中使用同义词功能

> ID：12407965
> 
> 赞同：1
> 
> 时间：2012-09-13T13:57:41.307
> 
> 标签：full-text-search, search-engine

我正在尝试在 opensearchserver (http://open-search-server.com) 中使用同义词功能。我创建了一个列表，例如 ipod、i-pod、i pod => ipod、i-pod、i pod 它不工作。谁能告诉我如何使它与opensearchserver一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:13:36.023

Here is the process to setup synonyms in OpenSearchServer.

1.  Create the synonym list in the tab panel /Schema/synonyms. One line per group of equivalent words separated by commas:

Example:

```
ipod,i pod,epod,e pod
opensearchserver,open search server 
```

2.  Setup the analyzers to use the synonym list.

    *   Go to the tab panel /Schema/Analyzers.
    *   Edit the analyzer which will handle the synonyms. If you use the default schema template you should edit the StandardAnalyzer. Here is a screenshot capture which show the correct setup. To be multi-term aware, we have to add a shingle filter to build group of words. the synonym filter.
3.  Reindex your data.

You can now search for ipod, i-pod, epod, e-pod, and find any ipod!

Remark: I removed the dash version (i-pod) because when you use the StandardAnalyzer, the dash are already ignored.![enter image description here](../Images/1ca0ec25b73fb4b34609f4080b400265.png)

# java - 在Android上使用andengine在ButtonSprite上添加OnClickListener

> ID：12407966
> 
> 赞同：1
> 
> 时间：2012-09-13T13:57:44.000
> 
> 标签：java, android, andengine

我正在使用 Android 的 andengine 创建一个应用程序。我正在自动生成一些屏幕，需要将特定的 OnClickListeners 设置为特定的按钮。

我正在使用`org.andengine.entity.sprite.ButtonSprite`和 `org.andengine.entity.sprite.ButtonSprite.OnClickListener`。

每个按钮都有一个 id 字符串，所以我希望在初始化场景时能够创建侦听器并将它们存储在 HashMap 中。像这样：

```
buttonListeners = HashMap<String, Object>();
OnClickListener ocl = new OnClickListener() {
            public void onClick( ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY ) {
                //Do stuff
                Log.d("Button Test", "Huzzah A");
            }      
        };
buttonListeners.put("play_button", ocl); 
```

然后当我创建按钮时，只需执行以下操作：

```
button.setOnClickListener((OnClickListener) buttonListeners.get(button.id)); 
```

这不起作用。我怀疑我的 HashMap 存在一些问题，所以我创建了一个与上面相同的类变量 ocl2，在构造函数中对其进行了初始化并尝试像这样使用它：

```
button.setOnClickListener(ocl2); 
```

它也没有工作。为了确保我不只是做错了“它”，我尝试了这个：

```
button.setOnClickListener( new OnClickListener()
{
    public void onClick( ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY )
    {
        //Do stuff
        Log.d("Button Test", "Huzzah C");
    }      
}); 
```

这种方式完美无缺。问题是因为我自动生成了所有我不能使用这种方法的东西（至少不是我想要的方式......）

这是对其工作方式的一些限制吗？我只是做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T11:47:27.877

也许您可以使用以下方法解决此问题：

```
button.setOnClickListener( new OnClickListener()
{
    public void onClick( ButtonSprite pButtonSprite, float pTouchAreaLocalX, float pTouchAreaLocalY )
    {
        (buttonListeners.get(button.id))).onClick(pButtonSprite, pTouchAreaLocalX, pTouchAreaLocalY);
    }      
}); 
```

# c - 如何将一个字节分成 4 对 2 位

> ID：12407969
> 
> 赞同：1
> 
> 时间：2012-09-13T13:57:54.263
> 
> 标签：c, bit-manipulation, bitwise-operators

我想知道如何将一个字节分成 4 对两位。

例如，我得到以下信息：

```
0xf0;    /* 11110000 */ 
```

输出应该是：

```
11
11
00
00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:00:13.167

您应该检查按位运算。他们提供你需要的一切。

按位 & 用于屏蔽

```
0xf0 & 0b11000000 = 0b11000000 
```

位移>>

```
0b11000000 >> 6 = 0b00000011 
```

编辑：

```
0b00000011 = (0xf0 & 0b11000000) >> 6;
0b00000011 = (0xf0 & 0b00110000) >> 4;
0b00000000 = (0xf0 & 0b00001100) >> 2;
0b00000000 = 0xf0 & 0b00000011; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:01:45.293

```
void printBits(int byte)
{
  printf("%d%d\n",byte>>7,(byte>>6)&1);
  printf("%d%d\n",(byte>>5)&1,(byte>>4)&1);
  printf("%d%d\n",(byte>>3)&1,(byte>>2)&1);
  printf("%d%d\n",(byte>>1)&1,byte&1);
} 
```

# c# - Controls.RichTextBox 与 Forms.RichTextBox

> ID：12407974
> 
> 赞同：1
> 
> 时间：2012-09-13T13:58:09.740
> 
> 标签：c#, winforms, richtextbox

在我的项目中，我目前需要一个 RichTextBox 控件来突出显示一些文本，同时编辑它（某种语法突出显示）。

我尝试将 System.Windows.Controls.FlowDocument 放在 RichTextBox 中。但是有两个！

一个 (Windows.Forms. *) 可以应用于表单，另一个 (Windows.Controls.* ) 不能，但第二个可以处理 FlowDocuments。

任何提示如何解决我的烂摊子？

其他方法，能够跟踪文本块，并根据用户输入更改其格式也将受到欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:04:47.690

看看[ICSharpCode](http://www.codeproject.com/Articles/30936/Using-ICSharpCode-TextEditor)。这具有完整的语法突出显示和丰富的文档。使用它比编写自己的编辑器要容易得多。

但是，如果您需要 RichTextBox 功能，则可以覆盖 RichTextBox 本身并使用计时器根据正则表达式的匹配来突出显示文本。这第二种方法将需要一个缓冲策略来避免突出显示/编辑整个 RichTextBox 控件......

我希望这有帮助。

# ruby-on-rails - 使用 rails 应用程序配置 spree

> ID：12407976
> 
> 赞同：0
> 
> 时间：2012-09-13T13:58:13.930
> 
> 标签：ruby-on-rails, ruby, spree

运行时出现错误`rake db:migrate`或`rake db:bootstrap`. 谁能告诉我克服这个错误的最佳方法？

```
rake aborted!
undefined method 'set_preference' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:10:17.157

没有更多细节很难说（rails 版本？rvm 与否？）；我总是会开始检查是否可以访问正确的 rails 版本以及是否完成了“捆绑安装”。

# ruby-on-rails-3.1 - 为什么资产预编译后活动脚手架表单会损坏？

> ID：12407978
> 
> 赞同：2
> 
> 时间：2012-09-13T13:58:16.960
> 
> 标签：ruby-on-rails-3.1

为什么活动的脚手架链接（例如：创建、编辑、显示等）在资产预编译后不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:00:13.373

这也发生在我身上——确实非常令人沮丧。对于 Rails 3.2 和 ActiveScaffold，在预编译资产后，ActiveScaffold 生成的所有基于 AJAX 的表单都停止“就地”工作。请注意，如果您直接在浏览器中将表单加载为“localhost:3000///edit”等，表单仍然可以正常工作。

它与在 application.js 文件中加载 javascript 的顺序有关。我们必须确保 jquery_ujs 在最后。进行更改后，我们的 application.js 如下所示：

```
//= require jquery
//= require_tree 
//= require active_scaffold
//= require jquery.tipsy.js
//= require jquery.dcmegamenu.1.3.3.js
//= require jquery.hoverIntent.minified.js
//= require jquery_ujs 
```

然后运行 ​​rake assets:precompile 一切正常。

希望这对你有帮助！

# objective-c - 在 webView shouldStartLoadWithRequest 中执行 Segue 并返回“NO”

> ID：12407980
> 
> 赞同：1
> 
> 时间：2012-09-13T13:58:22.327
> 
> 标签：objective-c, ios, uiwebview, segue

我有一个 UIWebView 加载一个带有 html 按钮的页面。当用户点击该按钮时，会加载“http://somerequest”。

我在 shouldStartLoadWithRequest 中捕获请求（在下面的代码中），当请求“http://somerequest”时，使用标识符“Comments”执行 segue：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSURL *url = [request URL];

    if([[url absoluteString] isEqualToString:@"http://somerequest"])
    {

        [self performSegueWithIdentifier:@"Comments" sender:self];

        return NO;
    }
    return YES;
} 
```

“performSegueWithIdentifier”工作正常，但 shouldStartLoadWithRequest 函数没有返回“NO”。如果我删除“performSegueWithIdentifier”，该函数能够返回 NO。

请告诉我当 UIWebView 请求“http//somerequest”并且未在当前 UIWebView 中加载请求（通过返回“NO”）时如何执行 segue。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T06:31:12.093

试试这个 ：

```
 - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSURL *url = [request URL];
    BOOL returnValue = YES;

    if([[url absoluteString] isEqualToString:@"http://somerequest"])
    {

        [self performSegueWithIdentifier:@"Comments" sender:self];

        returnValue =  NO;
    }

    return returnValue;
} 
```

任何方式设置一个断点以确保'returnValue = NO;' 叫做。沙尼

# c++ - C++ 创建原子函数

> ID：12407984
> 
> 赞同：6
> 
> 时间：2012-09-13T13:58:29.573
> 
> 标签：c++, multithreading, pointers, mutex, atomic

```
void foo ( Bar* bar , void(Bar::*qux)(void) )
{
    if ( bar )
    {
        bar->qux();
    }
} 
```

问题是：

1.  `bar`可以在其他线程检查**后删除。**

2.  我无法添加互斥锁成员`Bar`以锁定它。

因此我想知道，如果我可以告诉处理器原子地运行这个函数，我该怎么做？我在谷歌上花了很多时间，但没有找到可以理解的手册......

PS Debian，gcc，不允许 Boost，**允许****C** ++11 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:20:01.967

您想暂时共享对象的所有权，以防止另一个线程将其删除。这是一项工作，用于`shared_ptr`在`weak_ptr`我们不需要访问它时允许删除：

```
void foo ( std::weak_ptr<Bar> weak_bar , void(Bar::*qux)(void) ) 
{
    if (std::shared_ptr<Bar> bar = weak_bar.lock())
    {
        // We now share ownership of the object - it won't be deleted
        bar->qux();
    }

    // We have released ownership - it can now be deleted
} 
```

当然，如果多个线程需要访问对象，你仍然需要同步；这仅解决了问题中指定的删除问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T14:10:51.167

您可能希望使用具有共享所有权语义的智能指针（例如`shared_ptr`, `intrusive_ptr`）来确保对象在您引用它时保持活动状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T14:49:34.360

原子方法的概念在 C++ 中并不像在 Java 中那样存在，在 Java 中您可以将方法定义为同步的。在 C++ 中最接近的方法是创建一个 ScopedMutex 类，如下所示：

```
class ScopedMutex {
public:
    ScopedMutex(pthread_mutex *m) : theMutex_(m) {pthread_mutex_lock(theMutex_);}
    ~ScopedMutex() { pthread_mutex_unlock(theMutex_); }
    // Add appropriate copy constructors and operator=() to disallow mutex copy
    // Or consider passing in a reference
private:
    pthread_mutex *theMutex_;
}; 
```

然后在你的函数中像这样使用它：

```
void foo ( Bar* bar , void(Bar::*qux)(void) )
{
    ScopedMutex m(&aMutex); // This mutex must be defined/initialized elsewhere

    if ( bar )
    {
        bar->qux();
    }

    // The ScopedMutex goes out of scope when the function does,
    // thus releasing the lock
} 
```

但这对您没有任何好处，除非您在使用 bar 对象的所有其他方法中使用相同的互斥锁。

当您有一个具有复杂逻辑且有多个返回语句的函数时，作用域互斥锁特别有用，因此您不必手动解锁互斥锁，当函数超出作用域时它将被解锁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T14:06:21.357

对不起，不行。C++ 没有任何东西可以支持这一点。您不一定需要将互斥锁添加到`Bar`，但为了避免它，您可能需要一个包装器`Bar`，或按该顺序排列的东西。

# javascript - 如何在 javascript 正则表达式中连接字符串文字？

> ID：12407990
> 
> 赞同：0
> 
> 时间：2012-09-13T13:58:43.157
> 
> 标签：javascript, regex

我有以下表达，

```
var exp = new RegExp('^[a-zA-Z0-9]' + getMinMax() + '$'); 
```

我`getMinMax()`的函数动态返回值例如 {2,5} 等！

但它返回一个异常，它表示正则表达式中的语法错误。我该如何纠正？

```
function getMinMax() {
   var minLength = Rule.MinimumLength,maxLength = Rule.MaximumLengh;
   var limitExpression = (minLength != 'undefined' && minLength != null ) ? minLength.toString() : '';

   limitExpression = (maxLength != 'undefined' && maxLength != null ) ? (limitExpression != '' && limitExpression != null) ? ('{' + limitExpression + ',' + maxLength.toString() + '}') : ('{' + maxLength.toString() + '}') : '';

   return limitExpression;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:06:04.567

你的代码[工作](http://jsfiddle.net/9gfZp/)得很好。

我敢打赌，你的对象中有一个小错字*，*`Rule`所以`Rule.MaximumLengh`你可能应该有`Rule.MaximumLength`.

另外，作为一个*建议*，不要使用这么多链式三元运算符，真的很难阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:29:46.173

你能试一下吗

```
function getMinMax() {
   var minLength = Rule.MinimumLength,
       maxLength = Rule.MaximumLength,
       limitExpression = "";

       if (minLength != 'undefined' && minLength != null ) {
         limitExpression += minLength.toString();
       }
       if (maxLength != 'undefined' && maxLength != null ) {
         if (limitExpression.length>0) limitExpression+=",";
         limitExpression += maxLength.toString();
       }

   return limitExpression.length>0?"{"+limitExpression+"}":"";
} 
```

# c++ - 我可以将输出用作#define 中的参数吗

> ID：12407994
> 
> 赞同：2
> 
> 时间：2012-09-13T13:58:51.820
> 
> 标签：c++, c, c-preprocessor

我正在开发一个向后兼容的项目，因此，我需要重新定义事物而不会弄乱旧代码。我想将输出用作 a 中的参数之一`#define`。例如：我的旧代码包含

```
#define OPERATION(y) ... 
```

我们用它

```
x = OPERATION(y); 
```

在我们的新代码中：

```
#define OPERATION_NEW(y,x) ... 
```

我们像这样使用它：

```
x = OPERATION_NEW(y,x); 
```

**请注意，现在 x 是一个结果和一个参数。**

我希望能够做下一个：

```
#define OPERATION(y) OPERATION_NEW(y,__output__) 
```

**（我希望能够将输出作为参数并在定义中使用它......）**

是否可以 ？如果是这样，如何？如果没有，这种情况有解决方案吗？我有具有 OPERATION(y) 的旧代码的音调，并希望将其重新定向到 OPERATION_NEW(y,x) -同时记住 x 必须是输出...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:14:26.060

并不真地。宏没有“输出”之类的东西。在这种特殊情况下，`OPERATION(y)`是一个扩展为表达式的宏。该表达式随后被分配给`x`。

但是预处理器只处理宏，而不是赋值。它不知道也不关心之前的令牌。编译器只看到两边的赋值和表达式，而不是宏。两者都没有完整的画面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:05:09.000

如果我理解正确，则`x`in 的参数`OPERATION_NEW`被*分配给*. 但是，如果您还应该从宏中“返回”它，这是不可能的，您必须求助于函数：

```
template<class T, class U>
T operation_new(U y)
{
    T dummy;
    return OPERATION_NEW(y, dummy);
}

#define OPERATION(y) operation_new(y) 
```

上面的解决方案是C++，做一个纯C版本基本一样，只是你用固定类型代替模板参数`T`和`U`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:31:41.720

In`x = OPERATION(y,x);` `OPERATION`由预处理器处理并替换文本。然后`x = <whatever was substituted>`由编译器编译。第一步*不知道*赋值运算符左侧的参数。

但如果我理解正确，假设我们有：

`#define OPERATION_NEW(y,x) do_foo(y, x);`

因此，您只需将其更改为：

`#define OPERATION_NEW(y,x) x = do_foo(y, x);`

而不是使用赋值，而是将源/目标`x`作为参数传递给宏。或者用您要解决的实际问题来编辑您的问题。