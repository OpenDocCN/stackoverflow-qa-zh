# StackOverflow 问答 11215000-11215999

# android - 来自应用程序的 Android onResume

> ID：11215004
> 
> 赞同：0
> 
> 时间：2012-06-26T19:55:44.837
> 
> 标签：android, onresume

我的客户希望他们的应用程序在应用程序启动或从睡眠中唤醒时始终显示“警告”屏幕。我尝试在我的主活动中创建一个 onResume() 事件（所有其他活动都继承自该事件），但这会导致无限循环：

1.  Activity 被调用， onResume() 被触发
2.  警告屏幕触发，导致呼叫活动暂停
3.  用户单击 OK 接受消息，将用户返回到上一个屏幕
4.  活动被唤醒
5.  转到 1

即使我可以绕过无限循环，每当加载新活动时，警告屏幕也会触发。这就是我喜欢称之为坏事的原因。

有没有办法模拟 onResume() 事件，但在应用程序级别而不是在活动级别，这样我可以避免这些情况，但仍然会在应用程序唤醒时弹出警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:58:34.557

为什么不直接使用 SharedPreferences。

[http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html](http://android-er.blogspot.com/2011/01/example-of-using-sharedpreferencesedito.html)

存储弹出窗口的时间，如果是在 5 分钟内，或者其他什么，那么不要弹出它。

这将打破你的循环并且不会完全惹恼用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:07:07.477

我会编写一个方法来弹出警告，并在 onPause 中设置一个全局标志。检查 onResume 中的全局标志，然后在弹出方法中将其重置。简化伪代码...

```
class myApplication Extends Application{
    boolean appIsPaused = false;
}

class myActivity Extends Activity{

  @Override
  protected void onPause(){
      appIsPaused = true;
  }

  @Override
  protected void onPause(){
      if (appIsPaused){
          showPopup();
      }
  }

  public void showPopUp{

     if (!appIsPaused){
        return;
     }

     appIsPaused = false;

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:07:30.393

您可以使用 AlertDialog 来显示警告消息，它会解决您的问题。

否则，尝试从应用程序的 onStart 或 onRestart 启动警告屏幕？如果有帮助，这里是 android 生命周期：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# cakephp-2.1 - Cakephp 应用开发范围

> ID：11215009
> 
> 赞同：0
> 
> 时间：2012-06-26T19:55:56.037
> 
> 标签：cakephp-2.1

我想在用户身份验证中分离我的 cakephp 应用程序......我已经创建了 50 位数字的身份验证密钥作为布尔值。就是`10111...`这样..现在我想相应地分离我的应用程序。假设博客文章。如果用户的第一个身份验证数字是，我想访问查看帖子`1`，如果我的帖子是私人的，那么我需要使用 digit 对其进行身份验证`2`。对于我的帖子的任何其他状态，假设我想再次检查数字操作。我应该用这个范围做什么。？有没有更好的搭配方式...

其次，我想要有共同的功能。我刚刚举了一个简单的控制器帖子的例子，我想为我的大多数模型和控制器做这件事。我怎样才能为所有人制作单一的内置功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:50:11.970

您需要在 AppControllers`Authorize()`方法中创建所有这些规则，假设您使用 AuthComponent 和 Controller 作为您的 auth 方法。

# java - IllegalStateException：HttpServlet.service 中的 null

> ID：11215014
> 
> 赞同：0
> 
> 时间：2012-06-26T19:56:17.363
> 
> 标签：java, jakarta-ee, servlets, illegalstateexception

当请求失败时，我只是试图将错误发送回客户端。这是我的代码的样子：

```
response.sendError(HttpServletResponse.SC_BAD_REQUEST, 
        "Email and username are required fields."); 
```

此代码引发以下错误：

```
java.lang.IllegalStateException: null
    at org.apache.catalina.connector.ResponseFacade.sendError(ResponseFacade.java:407) ~[catalina-6.0.26.jar:6.0.26]
    at com.****.****.****.*********Servlet.service(********Servlet.java:68) ~[********Servlet.class:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) ~[javaee-api-5.1.2.jar:5.1.2]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) ~[catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[catalina-6.0.26.jar:6.0.26]
    at org.red5.logging.LoggerContextFilter.doFilter(LoggerContextFilter.java:78) ~[red5.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) ~[catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) ~[catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) ~[catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:465) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [catalina-6.0.26.jar:6.0.26]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) [catalina-6.0.26.jar:6.0.26]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) [tomcat-coyote-6.0.26.jar:6.0.26]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) [tomcat-coyote-6.0.26.jar:6.0.26]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) [tomcat-coyote-6.0.26.jar:6.0.26] 
```

为什么会被扔在这里？在这个调用之前我没有做任何与响应对象有任何关系的事情，我什至没有接触它，直到这个错误在 if 子句中发送。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:52:27.007

HttpServletResponse（由 ResponseFacade 实现）抛出 IllegalStateException 的唯一原因是响应之前已经提交。之前肯定有人摸过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:12:32.670

如果您的 ResponseFacade 没有覆盖`response.sendError()` 或导致转发到错误页面，则它正在发生，因为响应在转发到错误页面之前已提交。

为了解决这个问题，

*   确保您没有刷新响应
*   如果由于达到最大缓冲区大小而自动提交响应，请尝试增加缓冲区大小。

# java - 一个意图是有效的，第二个是让我崩溃

> ID：11215016
> 
> 赞同：0
> 
> 时间：2012-06-26T19:56:26.083
> 
> 标签：java, android, android-intent, android-activity, android-manifest

接收方有两个意图，它们从同一个活动调用，并将数据发送到不同的活动。第二个意图不起作用。第一个可以。我不知道为什么。所有的活动和清单似乎都是正确的。

```
//second intent on senders side    
        public void onItemSelected(AdapterView<?> arg0, View users, int i,
                        long l) {
                    FILENAME = (adapter.getItem(i)).toString();

            Bundle viewBag2 = new Bundle();
                        viewBag2.putString("profile_name", FILENAME);
                        Intent b = new Intent(OptionsMenu.this, CoreActivity.class);
                        b.putExtras(viewBag2);  
                        startActivity(b);
              }

    //second intent on receiver side

        private void Data_transfer() {
        Bundle gotbasket2 = getIntent().getExtras();
                profileName = gotbasket2.getString("profile_name");
        }

    //first (working intent) on senders side
        public void onClick(View v) {
                    Bundle viewBag = new Bundle();
                    viewBag.putString("spinner_result", s);
    a.putExtras(viewBag);
    }

    //first (working intent) on receiver side
        private void Data_transfer() {
            // TODO Auto-generated method stub
            Bundle gotbasket = getIntent().getExtras();
            x = gotbasket.getString("spinner_result");
    } 
```

下面是附加的logcat。

```
 06-26 20:22:09.787: D/AndroidRuntime(1802): Shutting down VM
    06-26 20:22:09.787: W/dalvikvm(1802): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    06-26 20:22:09.847: E/AndroidRuntime(1802): FATAL EXCEPTION: main
    06-26 20:22:09.847: E/AndroidRuntime(1802): java.lang.RuntimeException: Unable to start activity ComponentInfo{mioc.diver/mioc.diver.CoreActivity}: java.lang.NullPointerException
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.os.Handler.dispatchMessage(Handler.java:99)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.os.Looper.loop(Looper.java:123)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread.main(ActivityThread.java:3683)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at java.lang.reflect.Method.invoke(Method.java:507)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at dalvik.system.NativeStart.main(Native Method)
    06-26 20:22:09.847: E/AndroidRuntime(1802): Caused by: java.lang.NullPointerException
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at mioc.diver.CoreActivity.Data_transfer(CoreActivity.java:189)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at mioc.diver.CoreActivity.onCreate(CoreActivity.java:88)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
    06-26 20:22:09.847: E/AndroidRuntime(1802):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:33:14.867

首先，您不需要每次想要在意图中添加额外内容时都创建一个新包。你可以这样做：

```
Intent b = new Intent(OptionsMenu.this, CoreActivity.class);
b.putExtra(key, value); 
```

其次，您不应该以大写字母开头的方法名称，如[Google Java Style Guide](https://sites.google.com/a/android.com/opensource/submit-patches/code-style-guide)中所述。

最后，您似乎在 Data_transfer() 中收到了 NullPointerException，这意味着您在 Activity 的第 189 行有一个空变量（可能是 FILENAME）。

# sql - 将 QVariant 类型映射到 SQLite 类型

> ID：11215017
> 
> 赞同：0
> 
> 时间：2012-06-26T19:56:29.890
> 
> 标签：sql, map, qvariant

我需要将 QVariant 变量的类型转换为 SQLite 数据类型的 QString。看来，QSqlDriver 应该这样做，但我找不到任何这种转换的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:54:54.473

好的，我刚刚创建了带有 switch-case 结构的方法来为每个 QVariant::Type 返回 QString 值...

# java - 将 Eclipse 项目覆盖到 Maven 项目会丢失按钮链接

> ID：11215020
> 
> 赞同：0
> 
> 时间：2012-06-26T19:56:33.960
> 
> 标签：java, html, eclipse, tomcat, maven

我正在使用 Eclipse Indigo 我安装了 Maven 插件。

我有一个名为 squarefour 的 Eclipse 项目

新建-项目->网络->动态网络项目

目标运行时：apache Tomcat v7.0

动态网页模块版本：3.0

配置：Apace Tomcat v7.0 的默认配置

结束

Java资源->src->square[一个包]->SquareServlet.java

```
package square;

import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.*;
import javax.servlet.http.*;

/** Simple servlet for testing
*/

@WebServlet("/sqr")
public class SquareServlet extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    out.println
      ("<!DOCTYPE html>\n" +
       "<html>\n" +
       "<head><title>A Test Servlet</title></head>\n" +
       "<body bgcolor=\"#fdf5e6\">\n" +
       "<h1>Square</h1>\n" +
       convert(request.getParameter("param")) +
       "</body></html>");
  }  
  public String convert (String x)
 {
  int z;
  try
  {
      z = Integer.parseInt(x);
  }
  catch (NumberFormatException e)
  {
          return "Input not an Integer";
      }
      z = z*z;
      Integer y = new Integer(z);
      return y.toString();
  }
} 
```

然后是 WebContent->index.jsp

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<head>
    <meta name=viewprt content="user-scalable=no,width=device-width" />
</head>
<body>
<div data-role=page id=home>
    <div data-role=header>
            <h1>Number Fun</h1>
     </div>
<form action=sqr>
    <div data-role=content>
        <span> Integer </span>
        <input type="text" name="param" value="3" />
    </div>
    <div data-role=content>
        <input type="submit" data-role=button value="Square">
    </div>
</form>
</div>
</body>
</html> 
```

然后，当我在服务器上运行 index.jsp 时，我也在使用 Tomcat 7.0。我可以输入我的号码，按下按钮，然后加载第二页，显示平方数（或错误消息）。

但是当我右键单击项目并配置-> Maven 项目时，一切都运行它的工具，方形包变成了一个文件夹。并且 pom.xml 在主项目文件夹中创建。

现在的问题是当我在服务器上运行 index.jsp 时，会显示第一个网页，但是当我按下提交按钮时

HTTP 状态 404 - /square4b/sqr

* * *

类型状态报告

消息 /square4b/sqr

描述 请求的资源 (/square4b/sqr) 不可用。

* * *

Apache Tomcat/7.0.28

显示。所以在 Eclipse 到 Maven 的转换之间出现了一些问题。我是否遗漏了一个步骤，或者其中一个文档中是否存在导致问题的错误？我已经重复了四次，每次都会出现错误。是因为我缺少 web.xml 文件吗？我知道 Tomcat 7.0 不需要动态 Web 模块 3.0 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:15:38.347

从动态 Web 项目转换为 Maven 项目时，需要将包装从 .jar 更改为 .pom

# jms - 何时使用 JMS（带有 websphere 内置消息传递提供程序）与完整的 MQ 产品，如 ActiveMQ

> ID：11215031
> 
> 赞同：1
> 
> 时间：2012-06-26T19:57:27.767
> 
> 标签：jms, activemq, ibm-mq

我了解 JMS 规范允许我编写 MDB。然后我可以将它们部署在 websphere 或 jboss 之类的应用服务器上（并且它们具有 JMS 提供程序的内置实现，它与 Java EE 兼容）。问题是何时使用完整的产品，如 IBM WebSphere MQ 或 ACtiveMQ，而不是使用 App 服务器的内置 JMS 提供程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:13:49.133

这似乎是对您所要求的内容的一个很好的参考，特定于 IBM 产品，但可以概括为使用应用程序服务器集成消息系统与独立消息系统 - [http://www.ibm.com/developerworks/websphere/library /techarticles/1109_wallis/1109_wallis.html](http://www.ibm.com/developerworks/websphere/library/techarticles/1109_wallis/1109_wallis.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T11:04:28.173

为 JMS 消息传递构建了一个内置的 JMS 提供程序，例如 WebSphere SI Bus，可能还有其他提供程序。

WebSphere MQ (MQSeries)、ActiveMQ 等具有多种语言的客户端，并且是为 Application Server 托管应用程序以外的应用程序构建的以连接到它（C++、Java SE、Python 等）。

假设您希望在与非 JavaEE 应用程序相同的物理服务器（或网络？）上拥有本地消息传递服务器，您不想安装 Java EE 应用服务器，而是想要一个独立的消息传递服务器（WebSphere MQ、Active MQ ）。

也就是说，例如，ActiveMQ 是 Apache Geronimo 中的消息传递系统。所以这里有重叠。

然后是关于管理、集群和安全的完整讨论。Java EE 消息传递系统经过优化以遵循 Java EE 的集群布局。在其他部署方案中，集群可能在其他方面是最佳的，例如针对不同安全区域的集群。此外，独立消息服务器中的安全模型和管理工具也可能不同。

# python - 如何在 python 中用俄语文本替换英语硬编码字符串？

> ID：11215032
> 
> 赞同：2
> 
> 时间：2012-06-26T19:57:28.703
> 
> 标签：python, utf-8, encode, osqa

我尝试将 OSQA (django + python) 本地化为俄语。我可以用语言环境文件夹翻译很多字符串。但在 OSQA 中，某些字符串是硬编码的（以简单文本形式输入代码）。

我尝试简单地将英文文本替换为俄文，但出现错误。

例如：

```
class WordpressAuthContext(ConsumerTemplateContext):
    mode = 'SMALLICON'
    type = 'SIMPLE_FORM'
    simple_form_context = {
        'your_what': 'Wordpress blog name'
    }
    weight = 270
    human_name = 'Wordpress'
    icon = '/media/images/openid/wordpress.png' 
```

在这段代码中，我需要替换俄语文本上的“Wordpress 博客名称”。

我尝试用 unicode 字符替换英文字符`\uXXXX`，但在网页上我会在原始视图中看到这些字符`\uXXXX`。

然后我试试这段代码：

```
'your_what': 'Wordpress blog name'.encode('utf-8') 
```

而且它也不起作用。

我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:13:12.337

尝试：

```
simple_form_context = {
    'your_what': u'whätévèr wéird chars you w@ñt to ûse'
} 
```

我真的不知道 django 是否准备好通过所有框架处理 Unicode 字符串，但值得一试。

我认为它不会准备好处理字节字符串（就像用 生成的那样`.encode()`），所以忘记这一点。

# asp.net-mvc-3 - 未找到 MVC3 EDM 元数据表

> ID：11215035
> 
> 赞同：0
> 
> 时间：2012-06-26T19:57:37.330
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，我将创建一个 MVC3 测试项目，在其中创建具有 ID、名称、电子邮件、密码属性的模型类名称 WhiteAccount。并成功创建了一个数据库，但是当我在该 WhiteAccount 模型类和我的数据库表中添加另一个新属性时，它给了我一些错误。有人说只是从您的数据库中删除 EDMmetadata 表，**但这是我的数据库中没有 EDMmetadata 表的问题！**我通过 EntityFramework v4.3.1 系统自动（CodeFirst）创建我的数据库。我现在该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:35:27.000

检查 __MigrationHistory 表。打开 nuget 包管理器控制台并运行

```
更新数据库脚本

```

它可能会给你一条关于必须先启用它的消息，按照这些指示运行：启用迁移

有关迁移的更多信息 [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

我收集这个表在你的数据库中（在系统表下），它包含你的模型信息。由于您的项目发生了变化，您需要告诉迁移有关新字段或删除表（__MigrationsHistory）

# ember.js - ember 数据异步加载的公认模式

> ID：11215039
> 
> 赞同：0
> 
> 时间：2012-06-26T19:57:56.910
> 
> 标签：ember.js, ember-data

就知道何时加载数据而言，使用 ember-data 的推荐方式或模式是什么。我倾向于使用这样的观察者：

```
 groupLoaded: function(){
    if(!this.getPath('group.meta.feed')){
      return;
    }

    //do stuff with loaded entity
  }.observes('App.Controller.group.meta.feed') 
```

或者我观察 isLoaded。

这感觉不对，有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T06:04:54.700

我认为最好使用 ember 的路由器现在从 Ember Data 生成 WRT 模型的承诺。

很清楚这是一个老问题 - 只是清除老问题。

# clojure - 补充 clojure-xml/parse 的可用 Clojure XML 解析库

> ID：11215040
> 
> 赞同：2
> 
> 时间：2012-06-26T19:57:58.203
> 
> 标签：clojure, xml-parsing

是否有可以在 之后或与 一起使用的辅助 clojure xml 解析项目`clojure-xml/parse`，如果有，它们是什么？

`clojure-xml/parse`效果很好，但返回的地图`clojure-xml/parse`是深度嵌套的，至少在解析我们的一个水切割/篡改 xml 文件之后。我想知道是否存在允许我进一步解析的辅助库。

这里只是我们有意折叠的 xml 文件的一部分，因此您不必滚动。

```
:content [{:tag :Header, :attrs nil, :content [{:tag :ExportType, 
:attrs nil, :content ["Tamper Export"]} 
{:tag :CurrentDateTime, :attrs nil, :content [" 
```

注意带有嵌入地图的矢量。

我当然可以开发一些可以用来进一步解析它的东西，但我只是想知道一个模块是否已经存在。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T04:02:00.820

进一步“解析”内容的库是 clojure.core。那里的函数和宏可以很好地将 XML 生成的数据结构转换为有用的东西。我个人最喜欢的技术是使用两个线程宏，同时使用 first 和关键字函数。如果我需要做的不仅仅是深入挖掘，我将编写一个可以使用 map 的快速函数。

从 clojure.xml/parse 返回的数据结构与 xml 一样深 - 每个元素都有一个包含三个项目的映射，内容是子元素和字符串的向量。它可能看起来更深一些，但它只是将存储的内容的开放表示，例如，在 Java XML 对象中。它的最大优点是您不需要特殊的 API 来使用它 - 您在普通数据上使用的函数也可以在 XML 上工作。如果有的话，您可以编写一些函数来翻译到您的域中，仅此而已。

假设您有以下内容（为简洁起见，我省略了 attrs）：

```
{:tag :stuff
 :content [{:tag item
            :content [{:tag :key :content ["Key one"]}
                      {:tag :value :content ["Item one"]}]}
           {:tag item
            :content [{:tag :key :content ["Key two"]}
                      {:tag :value :content ["Item two"]}]}]} 
```

它是嵌套的，但创建了一个实用函数，用于将每个项目转换为可用的东西。

```
(defn transform-item [item]
  (let [key-element (-> item :content first)
        value-element (-> item :content second)]
    [(-> key-element :content first)
     (-> value-element :content first)])) 
```

然后将其映射到根元素的内容上。

```
(defn transform-stuff [stuff-xml]
  (into {} (map transform-item (:content stuff-xml))) 
```

您最终应该得到一些实际代表您的域的数据。

```
{"Key one" "Item One", "Key two" "Item 2"} 
```

关键是不要将其视为解析，而应将其视为将一种数据结构转换为另一种数据结构。

# jquery - 使用 jQuery 验证时的 CSS 对齐问题

> ID：11215044
> 
> 赞同：1
> 
> 时间：2012-06-26T19:58:25.287
> 
> 标签：jquery, html, css

我有一个小问题：

我目前正在编写一个注册表单，我决定测试 jQuery 验证。不幸的是，返回的错误消息到处都是。不确定它是否是 CSS 问题，但我一直在与对齐作斗争几个小时，真的很感激一些帮助。

![在此处输入图像描述](../Images/a9f2f51b8fa5728f01a1ae275785d916.png)

如上图所示，**我正在尝试获取“此字段是必需的”。文本直接在文本字段下对齐。**

这是我到目前为止使用的代码：

**jQuery**

```
// sign up validation
$(".signup").validate(); 
```

**CSS**

```
.myform {
    width: 400px;
    padding-top: 25px;
    padding-left: 20px;
}
#stylized h1 {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 8px;
}
#stylized p {
    font-size: 11px;
    color: #999;
    margin-bottom: 20px;
    border-bottom: solid 1px #b7ddf2;
    padding-bottom: 10px;
}
#stylized label {
    display: block;
    font-weight: bold;
    text-align: left;
    width: 160px;
    float: left;
}

#stylized label.error {
    float: none;
    font-size: 12px;
    color: red;
    margin-left: 1px;
}

#stylized .small {
    color: #999;
    display: block;
    font-size: 11px;
    font-weight: normal;
    text-align: left;
    width: 160px;
}
#stylized input {
    float: left;
    font-size: 16px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 200px;
    margin: 2px 0 20px 10px;
}
#stylized select {
    float: left;
    font-size: 16px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 75px;
    margin: 2px 0 20px 10px;
}
#stylized button {
    clear: both;
    margin-left: 169px;
    margin-top: 10px;
    cursor: pointer;
    color: #42230b;
    text-shadow: 1px 1px 0 #fff6b9;
    border: 1px solid #db9c2e;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    background: #f7ce50;
    background: -webkitkit-gradient(linear, bottom, top, from(#f1ac33), to(#fef673));
    background: -moz-linear-gradient(bottom, #f1ac33, #fef673);
    font-size: 16px;
    padding: 5px 20px;
    font-weight: bold;
}
#stylized button:hover {
    clear: both;
    margin-left: 169px;
    margin-top: 10px;
    background: #edb954;
    background: -webkitkit-gradient(linear, bottom, top, from(#dc9f35), to(#fed273));
    background: -moz-linear-gradient(bottom, #dc9f35, #fed273);
    font-size: 16px;
    padding: 5px 20px;
    font-weight: bold;
} 
```

**HTML**

```
<div id="stylized" class="myform" >
    <form class="signup" method="post" action="#">
    <label>Username
    <span class="small">Enter a username.</span>
    </label>
    <input type="text" name="name" id="name" class="required"/>
    <label>Email
    <span class="small">Enter a valid address.</span>
    </label>
    <input type="text" name="email" id="email" class="required"/>
    <label>Password
    <span class="small">Enter a secure password.</span>
    </label>
    <input type="password" name="password" id="password" class="required"/>
    <label>Confirm Password
    <span class="small">Enter your password again.</span>
    </label>
    <input type="password" name="password" id="password" class="required"/>
    <label>Age
    <span class="small">Select your age range.</span>
    </label>
    <select id="age" name="age" class="required">
    <option></option>
    <option>0 - 17</option>
    <option>18 - 25</option>
    <option>26 - 40</option>
    <option>40+</option>
    </select>                
    <button type="submit">Sign up</button>
    </form>
</div> 
```

提前致谢！

**更新**

我正在使用这个插件：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:15:01.003

您需要对 CSS 和 HTML 进行一些更新。

这是给出的 CSS 更新，我完全给出的 HTML。

HTML 的更新是，我已将`<input/>`and`<select>`放在具有类“*字段*`<div>`”的元素下，以实现通用样式和更好的对齐。

 ***CSS 更新**

```
#stylized label.error {
    float: none;
    clear: both;
    font-size: 12px;
    color: red;
    margin-bottom: 10px;
    margin-left: 10px;
}

.field{
    display: block;
    width: auto;
    height: auto;
    float: left;
} 
```

**HTML**

```
<div id="stylized" class="myform" >
    <form class="signup" method="post" action="#">
    <label>Username
    <span class="small">Enter a username.</span>
    </label>
    <div class="field">
        <input type="text" name="name" id="name" class="required"/>
    </div>
    <label>Email
    <span class="small">Enter a valid address.</span>
    </label>
    <div class="field">
        <input type="text" name="email" id="email" class="required"/>
    </div>
    <label>Password
    <span class="small">Enter a secure password.</span>
    </label>
    <div class="field">
        <input type="password" name="password" id="password" class="required"/>
    </div>
    <label>Confirm Password
    <span class="small">Enter your password again.</span>
    </label>
    <div class="field">
        <input type="password" name="password" id="password" class="required"/>
    </div>
    <label>Age
    <span class="small">Select your age range.</span>
    </label>
    <div class="field">
        <select id="age" name="age" class="required">
            <option></option>
            <option>0 - 17</option>
            <option>18 - 25</option>
            <option>26 - 40</option>
            <option>40+</option>
        </select>
    </div>
    <button type="submit">Sign up</button>
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:05:26.543

使用...更新您的样式表

```
#stylized label.error {
    font-size: 12px;
    color: red;
    margin: -20px 0px 0px 170px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:05:46.160

您的问题似乎不是上述任何一个，html、css 或验证。从某种意义上说，它在布局本身。

Validate 像预期的那样直接在输入字段下添加它，但是由于输入和标签之间没有划分，因此形成的新行从标签下开始。如果您稍微改变您的布局，使其分为一侧标记一侧输入的分区，并且有点像老式的表格布局，那么您的验证应该按照您希望的方式工作。

您也可以使用 CSS 为验证错误容器添加填充或边距，并尝试以这种方式推送它，尽管这可能也没有完全达到预期的效果，并且等待您的方法可能无法正常工作相应的浏览器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:07:03.530

几周前我遇到了同样的问题。jQuery Validate 插件在输入后立即插入错误消息。您的输入有 20px 底部边距 -> 消息在下方 20px。

解决方法：将输入边距设置为0，将每个输入字段放在div中，将div边距设置为输入边距的值。

编辑：添加了请求的示例

当前的CSS：

```
#stylized input {
    float: left;
    font-size: 16px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 200px;
    margin: 2px 0 20px 10px;
} 
```

修改后的CSS：

```
#stylized input {
    float: left;
    font-size: 16px;
    padding: 4px 2px;
    border: solid 1px #aacfe4;
    width: 200px;
    margin: 0px;
}

.inputContainer {
    margin: 2px 0 20px 10px;
} 
```

当前的html

```
<label>Username
<span class="small">Enter a username.</span>
</label>
<input type="text" name="name" id="name" class="required"/>
<label>Email
<span class="small">Enter a valid address.</span>
</label>
<input type="text" name="email" id="email" class="required"/> 
```

修改过的html

```
<label>Username
<span class="small">Enter a username.</span>
</label>
<div class="inputContainer">
<input type="text" name="name" id="name" class="required"/>
</div>
<label>Email
<span class="small">Enter a valid address.</span>
</label>
<div class="inputContainer">
<input type="text" name="email" id="email" class="required"/>
</div> 
```*

# mysql - 错误“不明确的列名 SubscriberKey”

> ID：11215051
> 
> 赞同：1
> 
> 时间：2012-06-26T19:58:54.130
> 
> 标签：mysql, sql, count

```
Select A.SubscriberKey, COUNT(DISTINCT EventDate) AS Count,B.CreatedDate
From _Open A
JOIN _ListSubscribers B
ON A.SubscriberKey = B.SubscriberKey
Where B.ListID = '10630'
Group By SubscriberKey
HAVING COUNT(DISTINCT EventDate) = 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:00:10.153

您需要指定列来自的表，因为两个表中存在相同的列名。

即使用`Group By A.SubscriberKey`，因为这就是您在`SELECT`列表中的内容。

此外，除了 MySQL 之外的所有 RDBMS 都将要求您也添加`B.CreatedDate`到`GROUP BY`列表中，因为它在 SELECT 列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:00:16.750

您有多个表包含以该名称命名的列，因此您需要指定包含您的引用的列的表`Group By SubscriberKey`：

```
Group By A.SubscriberKey 
```

# c++ - 未找到 C++ python 库。代码块 GNU GCC

> ID：11215052
> 
> 赞同：0
> 
> 时间：2012-06-26T19:58:54.207
> 
> 标签：c++, python, python-2.7, codeblocks, python-2.x

所以这是我第一次尝试在 C++ 程序中使用 python，我在链接库时遇到了一些问题。

所以我使用带有 GNU GCC 编译器的 Code Blocks IDE，我有以下主程序：

```
#include <Python.h>
#include <iostream>

using namespace std;

int main()
{
    cout<<"starting interpreter."<<endl;
    Py_Initialize();
    PyRun_SimpleString("print 'Im in python!'");
    Py_Finalize();
    return 0;
} 
```

我的链接设置如下（在编译器和调试器设置的代码块 GUI 中）：

```
linker settings:
    link libraries:
        C:\Python27\libs\libpython27.a
search directories:
    linker:
        C:\Python27\libs 
```

有什么我想念的吗？还是我这样做是错误的？

构建消息：

```
C:\Users\users_name\Desktop\PythonIntegratedTest\main.cpp|1|error: Python.h: No such file or directory|
C:\Users\users_name\Desktop\PythonIntegratedTest\main.cpp||In function 'int main()':|
C:\Users\users_name\Desktop\PythonIntegratedTest\main.cpp|9|error: 'Py_Initialize' was not declared in this scope|
C:\Users\users_name\Desktop\PythonIntegratedTest\main.cpp|10|error: 'PyRun_SimpleString' was not declared in this scope|
C:\Users\users_name\Desktop\PythonIntegratedTest\main.cpp|11|error: 'Py_Finalize' was not declared in this scope| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:23:55.997

错误消息说`Python.h: No such file or directory`。这意味着，编译器找不到请求的文件。您的搜索目录中的路径不正确。需要*包含*的头文件通常位于名为*include*的目录中。对于 Windows 上的 Python，这是`C:\Python27\include`您的情况。

在 CodeBlocks 中，您可以修改`Settings - Compiler and debugger - Search directories - Compiler`.

完成此操作后，您将获得对错误的*未定义引用。*错误消息告诉您，您在代码中使用了一个函数，编译器找不到其实现，而只能找到声明（在头文件中）。

该实现可以在源文件或静态库中获得。Windows 上的 CPython 带有预构建的静态库。它位于`C:\Python27\libs\python26.lib`您的情况下

更改之后，编译应该会成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:36:18.687

```
main.cpp|1|error: Python.h: No such file or directory 
```

是编译时错误，因为您的编译器在包含搜索路径中找不到 Python.h。如果您在命令行上使用 gcc，我会告诉您指定 Python 安装的包含文件夹，如下所示：

```
-I/path/to/Python27/include 
```

（在我的 Windows Python 2.7 安装中，它的`C:\Python27\include`）

我不确定您将如何在 CodeBlocks 中执行此操作，但肯定有一种方法可以指定您的“标头包含路径”。

请注意，这与“库搜索路径”或“链接器搜索路径”不同——它专门用于编译器和头文件搜索位置。

# objective-c - 为什么我必须投代表？

> ID：11215057
> 
> 赞同：2
> 
> 时间：2012-06-26T19:59:36.703
> 
> 标签：objective-c, properties, casting, compiler-warnings

我有一个类，这个类有一个委托协议。我使用这个类在主类中创建一个对象，并将主类分配为委托。主类有一个我想在创建的类中读取的属性。然后我这样做：

```
BOOL prop = [self.delegate myProperty]; 
```

Xcode 抱怨“`delegate`可能无法响应`myProperty`”

如果我要发送消息到`self.delegate`read `myProperty`，并且通常 Xcode 在您向未投射的对象发送消息时不会抱怨，为什么我必须这样做

```
BOOL prop = [(myMainClass *)self.delegate myProperty]; 
```

让它工作？

更清楚地说，这是一个无需强制转换就可以发送到对象的消息示例：

```
[self.myArray enumerateObjectsUsingBlock:^(id obj, NSUInteger index, BOOL *stop){

    int Number = [[obj dictionaryOfNames] count];

}]; 
```

`self.myArray`是来自另一个类的对象数组，它们是字典并具有此属性`dictionaryOfNames`。Xcode 从来没有要求我投射这个：

```
int Number = [[(myOtherClass *)obj dictionaryOfNames] count]; 
```

正如我不得不为`myProperty`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:03:01.737

不同的类可以遵循一个协议。如果你声明你符合一个协议，你只是说你将实现所需的方法，但你可以在 a `UIView`, `UIViewController`,`MyOwnClass`等中实现它`MyOtherClass`。

这就是为什么通常这样声明属性的原因

```
@property (nonatomic, weak) id <MyProtocol> delegate; 
```

所以你只是说你的委托是一个符合协议的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:16:08.277

您没有显示足够的代码来给出完全确定的答案，但总的来说，我希望您的委托的定义*不仅仅是*id，您可能使用过 NSObject* 或类似的东西。

编译器正在对您的源代码进行“静态”分析，并尝试确定“self.delegate”指定的对象是否可以实现该方法。如果数据类型是 NSObject*，那么编译器会查看特定的类定义以查看您的方法是否存在；如果不是，那么您将收到*警告*。

如果消息接收者的数据类型是 id，编译器倾向于放弃并说“好吧，它可以是任何东西，所以我假设这会起作用”。

表达式 [obj dictionaryOfNames] 的结果可能是 NSDictionary 类型，编译器可以看到该特定类*确实*响应了 count 方法。

请注意，如果您为属性指定了类名，也可能会出现此问题，但编译器无法从该文件中看到整个类定义。例如，如果您有

我的对象.h：

```
@class Something;
@interface MyObject
@property (retain) Something *delegate;
@end 
```

我的对象.m：

```
#import "myobject.h"

[self.delegate doItYouFool]; 
```

然后编译器可以看到表达式'self.delegate'的结果是Something*类型，但它看不到该类的实际定义，因此无法查看其支持的消息。这通常会导致有关“前向定义”的警告。要修复它，您应该将“something.h”导入到 .m 文件中，以便编译器完全了解它正在使用的类。为了使警告静音，您可以转换为 id

```
[(id)self.delegate doItYouFool]; 
```

当然，您可能还会收到“doItYouFool”不是已知方法的警告，这也是因为您没有包含定义该消息的头文件。

# python - Python字典如何保持它们的顺序

> ID：11215061
> 
> 赞同：4
> 
> 时间：2012-06-26T19:59:49.887
> 
> 标签：python, list, dictionary

我认为字典是一个关联数组，所以当我输入

```
dict1 = {'first' : 1, 'second' : 2} 
```

我希望当我调用它时它会按照它的编写顺序，但事实并非如此。在“第一”之前是“第二”。查了一下，发现字典是无序的。所以这是有道理的，但我想知道是否有办法让它们保持与您编写（或附加）相同的顺序？我在这里寻找的基本上是一个允许字符串作为键的列表（保持有序）。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T20:02:00.120

```
from collections import OrderedDict

OrderedDict([("first", 1), ("second", 2)]) 
```

这适用于 Python >= 2.7，IIRC。对于早期版本，互联网上有可用的替代品，但将密钥单独存放可能是最简单的解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T20:01:41.857

Python 有一个[`OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict)（在[集合](http://docs.python.org/library/collections.html)模块中）就是为了这个。

*2.7 版中的新功能*

# ruby-on-rails - Backbone.js 路由器实例不知何故无效

> ID：11215062
> 
> 赞同：2
> 
> 时间：2012-06-26T19:59:54.167
> 
> 标签：ruby-on-rails, backbone.js

我有以下代码块。它完美地工作。

```
<div id="restaurant_locations"></div>

<script type="text/javascript">
  $(function() {
    window.router = new Lunchhub.Routers.RestaurantLocationsRouter({restaurantLocations: <%= @restaurant_locations.to_json.html_safe -%>});
    var Foo = Backbone.Router.extend({routes: {"foo":"bar"}});
    r = new Foo();
    Backbone.history.start();
  });
</script> 
```

但是，这不起作用：

```
<div id="restaurant_locations"></div>

<script type="text/javascript">
  $(function() {
    window.router = new Lunchhub.Routers.RestaurantLocationsRouter({restaurantLocations: <%= @restaurant_locations.to_json.html_safe -%>});
    // All I did was delete the two lines that used to be here
    Backbone.history.start();
  });
</script> 
```

后一个片段给了我这个错误：

```
Uncaught TypeError: Cannot call method 'start' of undefined 
```

所以我的`Foo`路由器实例触发了正确的初始化`Backbone.history`，就像你期望路由器实例做的那样，但我的`Lunchhub.Routers.RestaurantLocationsRouter`实例没有。

这是我在 CoffeeScript 中的路由器定义（由`backbone-rails`gem 自动生成）：

```
class Lunchhub.Routers.RestaurantLocationsRouter extends Backbone.Router
  initialize: (options) ->
    @restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection()
    @restaurantLocations.reset options.restaurantLocations

  routes:
    "new"      : "newRestaurantLocation"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index"

  newRestaurantLocation: ->
    @view = new Lunchhub.Views.RestaurantLocations.NewView(collection: @restaurant_locations)
    $("#restaurant_locations").html(@view.render().el)

  index: ->
    @view = new Lunchhub.Views.RestaurantLocations.IndexView(restaurant_locations: @restaurant_locations)
    $("#restaurant_locations").html(@view.render().el)

  show: (id) ->
    restaurant_location = @restaurant_locations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.ShowView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el)

  edit: (id) ->
    restaurant_location = @restaurant_locations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.EditView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el) 
```

这是编译后的 JavaScript：

```
(function() {
  var __hasProp = Object.prototype.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

  Lunchhub.Routers.RestaurantLocationsRouter = (function(_super) {

    __extends(RestaurantLocationsRouter, _super);

    function RestaurantLocationsRouter() {
      RestaurantLocationsRouter.__super__.constructor.apply(this, arguments);
    }

    RestaurantLocationsRouter.prototype.initialize = function(options) {
      this.restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection();
      return this.restaurantLocations.reset(options.restaurantLocations);
    };

    RestaurantLocationsRouter.prototype.routes = {
      "new": "newRestaurantLocation",
      "index": "index",
      ":id/edit": "edit",
      ":id": "show",
      ".*": "index"
    };

    RestaurantLocationsRouter.prototype.newRestaurantLocation = function() {
      this.view = new Lunchhub.Views.RestaurantLocations.NewView({
        collection: this.restaurant_locations
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.index = function() {
      this.view = new Lunchhub.Views.RestaurantLocations.IndexView({
        restaurant_locations: this.restaurant_locations
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.show = function(id) {
      var restaurant_location;
      restaurant_location = this.restaurant_locations.get(id);
      this.view = new Lunchhub.Views.RestaurantLocations.ShowView({
        model: restaurant_location
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.edit = function(id) {
      var restaurant_location;
      restaurant_location = this.restaurant_locations.get(id);
      this.view = new Lunchhub.Views.RestaurantLocations.EditView({
        model: restaurant_location
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    return RestaurantLocationsRouter;

  })(Backbone.Router);

}).call(this); 
```

这里可能出了什么问题？

**编辑**：我已经解决了部分问题。在 CoffeeScript 中，它`restaurant_locations`在一些本应使用`restaurantLocations`. 我现在遇到了一个奇怪的问题，但可能是一个更简单的问题：当我在分配`<script>`之前将编译后的 JavaScript 直接复制并粘贴到区域中时`window.router =`，一切正常。但是，当我尝试将编译后的 JS 用作外部文件时（我知道它已被包含在内 - 我检查过），我得到了同样的`Cannot call method 'start' of undefined`错误。

这是我更新的 CoffeeScript：

```
class Lunchhub.Routers.RestaurantLocationsRouter extends Backbone.Router
  initialize: (options) ->
    @restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection()
    @restaurantLocations.reset options.restaurantLocations

  routes:
    "new"      : "newRestaurantLocation"
    "index"    : "index"
    ":id/edit" : "edit"
    ":id"      : "show"
    ".*"        : "index"

  newRestaurantLocation: ->
    @view = new Lunchhub.Views.RestaurantLocations.NewView(collection: @restaurantLocations)
    $("#restaurant_locations").html(@view.render().el)

  index: ->
    @view = new Lunchhub.Views.RestaurantLocations.IndexView(restaurantLocations: @restaurantLocations)
    $("#restaurant_locations").html(@view.render().el)

  show: (id) ->
    restaurant_location = @restaurantLocations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.ShowView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el)

  edit: (id) ->
    restaurant_location = @restaurantLocations.get(id)

    @view = new Lunchhub.Views.RestaurantLocations.EditView(model: restaurant_location)
    $("#restaurant_locations").html(@view.render().el) 
```

这是我更新后的编译 JavaScript：

```
(function() {
  var __hasProp = Object.prototype.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor; child.__super__ = parent.prototype; return child; };

  Lunchhub.Routers.RestaurantLocationsRouter = (function(_super) {

    __extends(RestaurantLocationsRouter, _super);

    function RestaurantLocationsRouter() {
      RestaurantLocationsRouter.__super__.constructor.apply(this, arguments);
    }

    RestaurantLocationsRouter.prototype.initialize = function(options) {
      this.restaurantLocations = new Lunchhub.Collections.RestaurantLocationsCollection();
      return this.restaurantLocations.reset(options.restaurantLocations);
    };

    RestaurantLocationsRouter.prototype.routes = {
      "new": "newRestaurantLocation",
      "index": "index",
      ":id/edit": "edit",
      ":id": "show",
      ".*": "index"
    };

    RestaurantLocationsRouter.prototype.newRestaurantLocation = function() {
      this.view = new Lunchhub.Views.RestaurantLocations.NewView({
        collection: this.restaurantLocations
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.index = function() {
      this.view = new Lunchhub.Views.RestaurantLocations.IndexView({
        restaurantLocations: this.restaurantLocations
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.show = function(id) {
      var restaurant_location;
      restaurant_location = this.restaurantLocations.get(id);
      this.view = new Lunchhub.Views.RestaurantLocations.ShowView({
        model: restaurant_location
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    RestaurantLocationsRouter.prototype.edit = function(id) {
      var restaurant_location;
      restaurant_location = this.restaurantLocations.get(id);
      this.view = new Lunchhub.Views.RestaurantLocations.EditView({
        model: restaurant_location
      });
      return $("#restaurant_locations").html(this.view.render().el);
    };

    return RestaurantLocationsRouter;

  })(Backbone.Router);

}).call(this); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:40:23.380

好的，结果证明这是一个非常深奥的问题。尽管我已经切换到使用不同的 Backbone 文件，但我的目录`backbone-min.js`中仍有剩余。*在我的路线定义之后*`app/assets/javascripts`，这个“旧”`backbone-min.js`被加载了，这就是把事情搞砸的原因。在我删除之后，事情开始起作用了。*`backbone-min.js`*

# javascript - 有没有可以将线条图转换为路径矩阵的工具？

> ID：11215063
> 
> 赞同：0
> 
> 时间：2012-06-26T19:59:54.447
> 
> 标签：javascript, ide, drawing

这是这个问题的后续：[Puzzle - How to 'colorify' part of an image from PHP?](https://stackoverflow.com/questions/11181558/puzzle-how-to-colorify-part-of-an-image-from-php)

基本上我想创建一个交互式地图，根据特定条件为特定区域着色。我已经能够找到一个名为[Raphael](http://raphaeljs.com/)的工具。但是，我完全不知道如何用它生成路径矩阵。[澳大利亚地图演示](http://raphaeljs.com/australia.html)中的维多利亚路径示例如下所示：

```
aus.vic = R.path("M252.869,203.121l-0.873-0.643l-1.721-0.121l-8.182-4.065l0.178-1.349l-0.354-1.082l-0.722-1.028l-0.566-1.235l0.204-1.168l-1.433-0.73l-0.899,0.326l-0.711,0.295l-0.74,0.111l-1.083,0.354l-1.451,0.408l-1.961-0.461l-1.037-0.603l-0.896,0.327l-0.658,0.666l-1.164-0.204l-1.223-0.571l-0.925,0.139l-1.434-0.729l-1.85,0.28l-0.823-0.444l-0.741,0.11l-0.471,0.638l0.223,1.481l-1.295,0.195l-1.619-0.701l-1.277-0.943l-0.379-1.268l-1.973-1.783l-1.619-0.701l-1.138-0.018l-1.444-2.054l-0.604-2.748l-1.008-0.413l-1.721-0.119l-0.98-0.232l-1.055,0.539l-0.045,0.953l-1.092-0.971l-0.492-2.009l-1.73-1.44l-2.12-0.248l-1.748-0.305l-1.024,0.723l-1.834-0.86l-1.109,0.168l-0.08,0.038v28.152l0.436,0.031l2.342,1.916v1.065l0.64-0.214l0.638,0.427l1.278-1.491l2.556,1.278l1.703-0.427l7.881,4.261l3.193-3.195l2.557-1.704h1.49l0.428-1.275l-1.492,0.425l-0.853-0.64h1.063l2.771-2.129l1.277,2.555l-1.277,1.703l-1.917-0.424l1.917,1.702l1.277-0.852l0.64,0.213l0.211-1.703h1.492l0.426,1.276l-0.852,0.214l-0.215,1.276l1.49,1.065l1.491-0.213l0.214,0.426l-0.639-0.213l1.064,1.916l0.851-0.64l0.853,0.427l-0.213-0.64l0.854,1.705l1.064,1.063l0.426-2.769l-1.277,0.852l-0.426-1.703h2.13l2.526-0.843l4.074-4.269l2.768-1.703l-3.406,1.489l1.917-1.278l-0.071-0.07l-0.568-0.567l1.492,0.427l1.703-0.64l-0.213,0.427l9.371-0.853l1.915-1.703l-0.638-0.64H252.869z") 
```

有谁知道任何可以做到这一点甚至类似的工具？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:10:51.993

通过一些研究，我发现了这个方便的小教程：

[http://playground.mobily.pl/tutorials/building-an-interactive-map-with-raphael.html](http://playground.mobily.pl/tutorials/building-an-interactive-map-with-raphael.html)

他们能够在维基百科上找到他们想要的地图的 SVG，然后从中提取路径信息。如果您找不到要着色的地图的 SVG，请使用可以创建 SVG 并自己制作的应用程序 - Adob​​e Illustrator、Inkscape 等。

# linux-kernel - 网络过滤器限速

> ID：11215071
> 
> 赞同：0
> 
> 时间：2012-06-26T20:00:18.730
> 
> 标签：linux-kernel, netlink

我正在 1Gbit/sec 网络上测试 netlink 过滤器应用程序：我有用户空间功能将判决发送到 netlink 套接字；另一个用户空间例程从 netlink 套接字和一些自定义过滤器函数执行标记数据包的异步读取。对于 >300 Mbps 的比特率，我看到 netlink 套接字读取错误“没有可用的缓冲区空间”。我把它当作 netlink 缓冲区溢出。有人可以推荐一种方法来提高高速网络的 netlink 吞吐量吗？我的内核版本是 2.6.38。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:29:54.577

内核到用户空间之间有套接字。通过套接字数据包上传到用户空间。套接字缓冲区已满，因此出现错误。在 c 中，您可以定义套接字缓冲区大小并增加它（这由 netlink 完成）

# php - 抓取“下一页”问题

> ID：11215078
> 
> 赞同：1
> 
> 时间：2012-06-26T20:00:44.680
> 
> 标签：php, screen-scraping, web-scraping, simple-html-dom

我正在尝试使用简单的 HTML DOM 从 Zen-cart 商店按产品部分抓取产品数据。我可以很好地从第一页抓取数据，但是当我尝试加载产品的“下一页”时，网站返回 index.php 登录页面。

如果我直接通过 *http://URLxxxxxxxxxx.com/index.php?main_page=index&cPath=36&sort=20a&page=2* 使用该功能，它会很好地从第 2 页刮取产品信息。

如果我使用 cURL，也会发生同样的事情。

```
getPrices('http://URLxxxxxxxxxx.com/index.php?main_page=index&cPath=36');

   function getPrices($sectionURL) {

$opts = array('http' => array('method' => "GET", 'header' => "Accept-language: en\r\n" . "User-Agent:    Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1.6) Gecko/20091201 Firefox/3.5.6\r\n" . "Cookie:   zenid=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n"));
$context = stream_context_create($opts);

$html = file_get_contents($sectionURL, false, $context);
$dom = new simple_html_dom();
$dom -> load($html);

//Do cool stuff here with information from page.. product name, image, price and more info URL

if ($nextPage = $dom -> find('a[title= Next Page ]', 0)) {
    $nextPageURL = $nextPage -> href;
    echo $nextPageURL;
    $dom -> clear();
    unset($dom);
    getPrices($nextPageURL);
} else {
    echo "\nNo more pages to scrape!!";
    $dom -> clear();
    unset($dom);
} 
```

}

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:02:30.543

我看到很多潜在的罪魁祸首。您没有跟踪 cookie 或设置referer，simple_html_dom 很有可能让您失望。

我的建议是通过[fiddler](http://www.fiddler2.com)或[charles](http://www.charlesproxy.com)代理您的请求，并确保它们看起来像来自浏览器的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T15:43:17.173

原来在循环中传递给函数的下一页 URL 是传递 & 而不是 & 和 file_get_contents 不喜欢它。

```
$sectionURL = str_replace( "&amp;", "&", urldecode(trim($sectionURL)) ); 
```

# xml - 从父级检索属性值并将其显示为子级的属性

> ID：11215081
> 
> 赞同：0
> 
> 时间：2012-06-26T20:01:12.150
> 
> 标签：xml, xslt

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">    
<Package ID="b7137f22-31da-4d90-971c-b6baad654c96" BusinessID="P_000137" Path="/Package/Product/Launch_Entity" xsi:type="Package_Private_Line">
    <Category_ID Product_Line_ID="63">63</Category_ID>
    <Compatibility_Rules ID="32fd84b4-7b9b-40e2-8265-8e2e4f856a8d">
        <Rule_Event ID="992f04cb-6bd1-42bb-9578-87793dd38aca">
            <Name>Entity Selection</Name>
        </Rule_Event><Rule_Name>Private Line Exclusions</Rule_Name>
        <Rule_Statement ID="d0cc0700-2199-4a51-af68-72dfe27d878f">
            <Description>IF package is Private line THEN exclude Ethernet Switched Access (ESA)</Description>
            <Actions ID="d8165dda-7f8b-4c44-8400-eb081c0ec79c">
                <Then>THEN exclude Ethernet Switched Access (ESA</Then>
                <Entity>PSpec_000164</Entity><Operand ID="f74c6bf3-2718-4f8c-90e1-ead1257edc3a">
                    <Name>EXCLUDE</Name>
                </Operand></Actions>
            <Conditions ID="12dd11ea-bfe7-4ef3-b35c-f06cc90b1b6b">
                <If>IF package is Private Line</If>
                <Operand ID="8d041d93-77c7-46ac-938d-753596b8535c">
                    <Name>EXISTS</Name>
                </Operand>
                <Entity>P_000137</Entity>
            </Conditions></Rule_Statement>
    </Compatibility_Rules>
</Package>
</Root> 
```

以上是我要转换的 XML。我需要将 Compatibility_Rules 显示为：

```
<attribute><name>Compatibility Rules</name><value GUID="b7137f22-31da-4d90-971c-b6baad654c96"></value> 
```

上面的 GUID 是 Package 的 ID 属性。我不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:40:59.677

选择父元素的 ID 属性：

```
../*/@ID 
```

应用在 XSLT 中的模板中以`Compatability_Rules`使用[属性值模板](http://www.w3.org/TR/xslt#attribute-value-templates)：

```
<xsl:template match="Compatibility_Rules">
    <attribute>
            <name>
                <xsl:value-of select="local-name()"/>
            </name>
            <value GUID="{../*/@ID}"></value>
    </attribute>
</xsl:template> 
```

# php - 将字符串转换并比较数据库中的 int

> ID：11215085
> 
> 赞同：0
> 
> 时间：2012-06-26T20:01:25.537
> 
> 标签：php, mysql, date, unix-timestamp

显然，在创建我的数据库时，我的数据库一直将日期存储为字符串`Start_Date varchar(15)`由于已经有数千个条目，我想返回我的数据库表并将以下格式转换`11/30/2011`为 unix 时间戳。

不确定我是否走在正确的轨道上，但这里有一个 php 脚本可以做我想做的事：

```
$query="Select * from Template_Approved";
    $result=mysql_query($query)
    $num=mysql_num_rows($result);
    $i=0;
    while($i<$num)
    {

    $date_string= mysql_result($result,$i,"Start_Date");

     $timestamp = strtotime($date_string);

    $query="UPDATE Template_Approved SET Start_Date=' $timestamp ' ";

    mysql_query($query);
    $i++;
    } 
```

我显然必须将表字段更新为 int（不是 varchar）

# ruby-on-rails - 回形针附件不保存在独角兽下

> ID：11215086
> 
> 赞同：1
> 
> 时间：2012-06-26T20:01:29.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, unicorn

我在 Ubuntu + Nginx + Unicorn 设置下运行带有 Paperclip 2.6 的 rails 3.0.12 应用程序。在生产中，我的图片附件似乎上传得很好，但是在检查图片路径时，我找不到文件，所以我开始乱搞。

最终，我发现如果我运行内置的 rails 开发服务器（rails s），附件会很好地上传到正确的路径。但是在 unicorn 下，虽然附件确实被上传了，a）它们被保存到服务器上的 /tmp/ **randompath**，并且每个样式的所有调整大小的图像也被保存在文件名中的一堆随机字符中，包括上传日期和时间。

不知道这里发生了什么。这是在 rails 开发服务器（在生产环境中）下运行时的 rails 日志：

```
Command :: identify -format %wx%h '/tmp/stream20120626-4215-axmd16.png[0]'
Command :: convert '/tmp/stream20120626-4215-axmd16.png[0]' -resize "x100" -crop "100x100+185+0" +repage '/tmp/stream20120626-4215-axmd1620120626-4215-1droo3w'
Command :: identify -format %wx%h '/tmp/stream20120626-4215-axmd16.png[0]'
Command :: convert '/tmp/stream20120626-4215-axmd16.png[0]' -resize "280x" -crop "280x55+0+2" +repage '/tmp/stream20120626-4215-axmd1620120626-4215-fzxeg1'
...
...
UPDATE `organizations` SET `logo_file_name` = 'logo.png', `logo_file_size` = 5682,             `logo_updated_at` = '2012-06-26 19:48:47', `updated_at` = '2012-06-26 19:48:48' WHERE `organizations`.`id` = 1
[paperclip] Saving attachments.
[paperclip] saving /home/deploy/apps/xxx_staging/releases/20120626193037/public/system/organization/1/original/logo.png
[paperclip] saving /home/deploy/apps/xxx_staging/releases/20120626193037/public/system/organization/1/thumb/logo.png 
```

而在独角兽下，日志显示：

```
Command :: identify -format %wx%h '/tmp/1docway_logo20120626-11230-1wodane.jpg[0]'
Command :: convert '/tmp/1docway_logo20120626-11230-1wodane.jpg[0]' -resize "x100" -crop "100x100+135+0" +repage '/tmp/1docway_logo20120626-11230-1wodane20120626-11230-1y0j5hm'
Command :: identify -format %wx%h '/tmp/1docway_logo20120626-11230-1wodane.jpg[0]'
Command :: convert '/tmp/1docway_logo20120626-11230-1wodane.jpg[0]' -resize "280x" -crop "280x55+0+10" +repage '/tmp/1docway_logo20120626-11230-1wodane20120626-11230-1bwx4go'
[paperclip] Saving attachments.
[paperclip] deleting /home/deploy/apps/xxx_staging/releases/20120620214744/public/organization/1/original/1docway_logo.png
[paperclip] deleting /home/deploy/apps/xxxx_staging/releases/20120620214744/public/organization/1/thumb/1docway_logo.png 
```

如您所见，第二组日志没有运行 UPDATE 命令，也没有文件保存到 /home/deploy/apps/xxx_staging/releases/xxx/public/system/ 文件夹

# bash - bash shell脚本for循环中的两个变量

> ID：11215088
> 
> 赞同：11
> 
> 时间：2012-06-26T20:01:33.570
> 
> 标签：bash, shell, scripting, for-loop

我是 shell 脚本的新手。如果我的怀疑太愚蠢，请多多包涵。

我在 2 个不同的目录中有 png 图像和一个可执行文件，它从每个目录获取图像并处理它们以生成新图像。

我正在寻找一个可以同时采用两个变量的 for 循环构造。这在 C、C++ 等中是可能的，但我该如何完成以下操作。代码显然是错误的。

```
#!/bin/sh

im1_dir=~/prev1/*.png  
im2_dir=~/prev3/*.png
index=0

for i,j in $im1_dir $im2_dir  # i iterates in im1_dir and j iterates in im2_dir 
do
  run_black.sh $i $j  
done 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T20:06:30.507

如果您依赖于两个目录以根据区域设置排序顺序进行匹配（如您的尝试），那么数组应该可以工作。

```
im1_files=(~/prev1/*.png)
im2_files=(~/prev3/*.png)

for ((i=0;i<=${#im1_files[@]};i++)); do
   run_black.sh "${im1_files[i]}" "${im2_files[i]}"
done 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T01:36:37.927

这里有一些额外的方法来做你正在寻找的关于利弊的注释。

以下仅适用于不包含换行符的文件名。它以同步方式配对文件。它使用额外的文件描述符从第一个列表中读取。如果`im1_dir`包含更多文件，循环将在`im2_dir`用完时停止。如果`im2_dir`包含更多文件，`file1`则对于所有不匹配的`file2`. 当然，如果它们包含相同数量的文件，则没有问题。

```
#!/bin/bash
im1_dir=(~/prev1/*.png) 
im2_dir=(~/prev3/*.png)

exec 3< <(printf '%s\n' "${im1_dir[@]}")

while IFS=$'\n' read -r -u 3 file1; read -r file2
do
    run_black "$file1" "$file2"
done < <(printf '%s\n' "${im1_dir[@]}")

exec 3<&- 
```

您可以使行为保持一致，以便循环仅以非空匹配文件停止，无论哪个列表更长，方法是用双＆符号替换分号，如下所示：

```
while IFS=$'\n' read -r -u 3 file1 && read -r file2 
```

此版本使用`for`循环而不是`while`循环。当两个列表中较短的一个用完时，这个停止。

```
#!/bin/bash
im1_dir=(~/prev1/*.png) 
im2_dir=(~/prev3/*.png)

for ((i = 0; i < ${#im1_dir[@]} && i < ${#im2_dir[@]}; i++))
do
    run_black "${im1_dir[i]}" "${im2_dir[i]}"
done 
```

此版本与上面的版本类似，但如果其中一个列表用完，它会环绕以重复使用这些项目，直到另一个列表用完。它非常难看，你可以用另一种更简单的方式做同样的事情。

```
#!/bin/bash
im1_dir=(~/prev1/*.png) 
im2_dir=(~/prev3/*.png)

for ((i = 0, j = 0,
          n1 = ${#im1_dir[@]}, 
          n2 = ${#im2_dir[@]}, 
          s = n1 >= n2 ? n1 : n2, 
          is = 0, js = 0; 

      is < s && js < s; 

      i++, is = i, i %= n1, 
          j++, js = j, j %= n2))
do
    run_black "${im1_dir[i]}" "${im2_dir[i]}"
done 
```

此版本仅将数组用于内部循环（第二个目录）。它只会执行与第一个目录中的文件一样多的次数。

```
#!/bin/bash
im1_dir=~/prev1/*.png
im2_dir=(~/prev3/*.png)

for file1 in $im1_dir
do
    run_black "$file1" "${im2_dir[i++]}"
done 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T21:03:09.620

如果您不介意走老路（bash），工具命令语言（TCL）有这样一个循环结构：

```
#!/usr/bin/env tclsh

set list1 [glob dir1/*]
set list2 [glob dir2/*]

foreach item1 $list1 item2 $list2 {
    exec command_name $item1 $item2
} 
```

基本上，循环读取：*对于从 list1 中取出的每个 item1，从 list2 中取出 item2*。`command_name`然后，您可以用自己的命令替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T23:13:18.557

这可能是在同一个循环中使用两个变量的另一种方式。但是您需要知道目录中的文件总数（或者，您想要运行循环的次数）才能将其用作迭代的值`i`。

获取目录中的文件数：

```
ls /path/*.png | wc -l 
```

现在运行循环：

```
im1_dir=(~/prev1/*.png) 
im2_dir=(~/prev3/*.png)

for ((i = 0; i < 4; i++)); do run_black.sh ${im1_dir[i]} ${im2_dir[i]}; done 
```

如需更多帮助，请参阅此[讨论](http://www.unix.com/shell-programming-and-scripting/75414-sh-two-variables-loop.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-09T05:30:34.093

很简单，你可以在这个问题中使用两个 for 循环函数。

```
#bin bash
index=0
for i in ~/prev1/*.png  
do
    for j ~/prev3/*.png
    do 
        run_black.sh $i $j
    done
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-13T19:38:03.093

对于我想要同时达到顶部和底部范围的类似情况，我遇到了这个问题。这是我的解决方案；它不是特别有效，但它既简单又干净，而且对于 icky BASH 数组和所有那些废话来说一点也不复杂。

```
SEQBOT=$(seq 0  5  $((PEAKTIME-5)))
SEQTOP=$(seq 5  5  $((PEAKTIME-0)))

IDXBOT=0
IDXTOP=0

for bot in $SEQBOT; do
    IDXTOP=0
    for top in $SEQTOP; do
        if [ "$IDXBOT" -eq "$IDXTOP" ]; then
            echo $bot $top
        fi
        IDXTOP=$((IDXTOP + 1))
    done
    IDXBOT=$((IDXBOT + 1))
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-30T19:29:38.280

可以使用`${!array[@]}`迭代`array`'s 索引的语法进一步简化接受的答案：

```
a=(x y z); b=(q w e); for i in ${!a[@]}; do echo ${a[i]}-${b[i]}; done 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-27T10:27:53.447

另一种解决方案。两个带有文件名的列表被粘贴到一个列表中。

```
paste <(ls --quote-name ~/prev1/*.png) <(ls --quote-name ~/prev3/*.png) | \
while read args ; do
  run_black $args
done 
```

# javascript - 防止在 jQuery/JavaScript 中关闭

> ID：11215089
> 
> 赞同：0
> 
> 时间：2012-06-26T20:01:34.270
> 
> 标签：javascript, jquery, jquery-ui, closures

我正在尝试做一些看起来（至少对我来说）相当容易、常见的事情。

这是我在网页上获得的 HTML：

```
<div class="allergiesDiv">
    <div>
        <span class="editButton">Allergies</span><br />
    </div>
        <span>Allergies</span>
    </div>
</div> 
```

我把第一个`<span>`变成了一个 jQuery 按钮`$('.editButton').button()`。（我在页面上有很多这样的对。）

我*想做*的是以下几点：

1.  单击该按钮时，它会加载一个 jQuery 对话框，并将其后的 span 值加载到`<textarea>`. （奖励：加载对话框时，我希望`<textarea>`将焦点集中在突出显示的所有文本中。）
2.  用户可以编辑该值，然后单击“确定”。
3.  当用户单击“确定”时，对话框被关闭，输入的新值用于替换跨度的旧值。

这是我正在尝试使用的代码（这在 IE 中可以正常工作，但在 Mobile Safari 和 Chrome for PC 中会中断）：

***注意：我一直在将代码切碎一些，以尝试隔离每个问题。我有这个工作，至少在 IE 中。***

```
// How I get the button and bind to the click event
$('.editButton')
    .button({icons: {primary:'ui-icon-pencil'} })
    .click(EditClicked);

// 'Edit' button click handler
function EditClicked() {
    var span = $(this).parent().next().children().first();
    var text = span[0].innerText;
    var dialog = $('<div>').prop('title', 'Edit: ' + $(this).text());
    var textArea = $('<textarea>').css('width', '98%').prop('rows', '4').html(text);
    textArea.appendTo(dialog);

    var windowWidth = $(window).width();
    var buttonTop = $(this).button().offset().top;
    $(dialog).dialog({ 
        modal: true, 
        minWidth: windowWidth / 2, 
        position: ['center',buttonTop], 
        buttons: {
            'Ok' : function () {
                OKClicked(span);
            },
            'Cancel' : function () {
                $(this).dialog('close').remove();
            }
        }
    });
    textArea.focus().select();    
}

// Dialog 'OK' button click handler
function OKClicked(span) {
    var text = $(this).find('textarea')[0].innerText;
    span.html(text);
    $(this).dialog('close').remove(); 
} 
```

目前，当它到达 时已损坏`var buttonTop...`，并显示“按钮未定义”的错误消息。我还没有弄清楚为什么会这样（我曾经在那个方法中有一个名为'button'的变量，但现在它已经消失了。不确定这是否是一个缓存问题。）

除此之外，任何人都可以看到我的**流程**有什么问题吗？似乎我对闭包有某种误解，但我对 JavaScript 的了解还不够好，无法理解如何摆脱这段代码的扭结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:06:05.547

关于什么

```
var buttonTop = $(this).offset().top; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T20:10:53.540

1.  ~~我不确定，这`$('<div>')`是 jQuery 的正确语法。尝试`$('div')`改用。~~
2.  当您使用`$(this).button()`- 您尝试调用对象`button`的方法`$(this)`。似乎是一个错误。

# c++ - 将 C++ 结构写入文件并使用另一种编程语言读取文件？

> ID：11215090
> 
> 赞同：3
> 
> 时间：2012-06-26T20:01:35.427
> 
> 标签：c++

我有一个具有挑战性的情况；我们将在 Mac、PC、iOS 和 Android 上安装程序，以接收传统格式的文件并解析这些文件中的数据。我们无法更改这些文件的创建方式。

这些文件是由一个 C++ 程序生成的，它用数字和字符串填充一个结构，然后把它写出来。这是一个经过消毒的版本。

```
struct MyObject {
String Kfkj(MAXKYS); 
String Oern(MAXKYS);
String Vdflj(MAXKYS, 9); 
int Muic;
int Tdfkj;
int VdfkAsdk;
int SsdjsdDsldsk; 
int Ndsoief; 
String TdflsajPdlj; 
String TdckjdfPas; 
String AdsfakjIdd;
int IdkfjdKasdkj;
int AsadkjaKadkja(MAXKYS); 
int Kasldsdkj;
bool Usadl;
String PsadkjOasdj(9); 
String PasdkjOsdkj;
}; 
```

如您所见，原语和字符串。

然后这是他们将其写入文件的方式：

```
MyInstance MyObject;
FileName = "C:\MyFile.ab2"
ofstream fout (FileName, ios::binary);
fout.write((char*)& MyInstance, sizeof(MyInstance)); 
```

我们没有选择翻译一次然后将文件分发到其他平台；我们必须在每一个不同的平台上翻译它，这就是我们必须合作的。我很感激有关 C++ 如何序列化数据的任何信息，因此我们知道如何解析文件。

编辑：解决方案

我从这里的多个答案中收到的反馈非常有帮助。使用它，我使用十六进制编辑器进行了广泛的分析并发现：

*   元素一个接一个地进入文件
*   在这种情况下，“字符串”以一个 int 开头，描述了该字符串的 int 后面有多少个字符。如果 String 不存在，它仍然具有值为 0 的 int。
*   对于我看到的文件和机器，整数是两个字节，小端，并且大部分是无符号的（有一些是有符号的，只是为了让我保持警惕）
*   布尔值是两个字节，显然 -1 (FF FF) 代表“真”

到目前为止，我们还没有遇到不同设备上不同填充或字节序的问题，但这些都是非常现实的问题。这些答案中熟练的注释和警告为我们提供了更多的弹药来尝试说服客户更改为更不脆弱的替代方案，例如 XML 或 JSON，以便跨平台在线传输数据。

至于那些询问开发人员是否被解雇的人......好吧，我们只是说他们的代码很旧，但经过多次对话，我们仍然无法说服他们写出 C++ 结构并尝试在不同平台上阅读它这不是一个好主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:16:38.163

数据文件的格式完全取决于编译 C++ 程序的编译器以及 String 类的定义。您可以依赖字段按照声明它们的顺序排列，在这种情况下，我认为您可以依赖一开始没有任何填充，但仅此而已。在这种情况下可能会帮助您的一些提示：-

*   您没有给出您正在使用的 String 类的定义。如果是`typedef`for std::string，那你就完蛋了，因为字符串的内容不在内存中。我假设你的 C++ 程序员正在使用一些特殊的本地缓冲区，在这种情况下，我猜你会发现对象的第一个字节是字符串，之后会有一些无用的填充。我希望该结构在开始时包含一个 int，告诉您其中有多少数据是有用的。
*   您可能会发现这些`int`字段有四个字节长。
*   您可能会发现该`bool`字段只有一个字节长，然后是三个字节的无用填充。只有一位，很可能是底部位，将被设置。

这就是我能提供给你的所有有用的猜测。在您的目标语言中，确保将整个文件作为与该语言中可用的字节数组最接近的内容读取，然后才使用语言功能将其转换为您的语言中正确的内容。不要尝试将其作为整数读取，因为如果您在与 C++ 程序具有不同字节序的平台上，那将不会让您进行字节交换。我建议还在文本编辑器中查看文件以对其进行逆向工程并帮助您找到每个字段的偏移量。

最后一条建议：考虑为那些认为这种“序列化”是个好主意的程序员或项目经理打印 P45（或粉色纸条，或您所在国家/地区的任何东西）。这种草率的工作在生死攸关的情况下可能是可以接受的，但它们严重地把你搞砸了，你会发现很难从中恢复过来。编写代码以读取这些文件不会那么难，如果它只是这样的一个结构，但保持它的可靠性将是一个痛苦的世界，而且他们实际上已经使自己无法安全地更改编译器或编译器版本.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T20:08:11.350

你会遇到很多问题。

C++ 本身没有用于序列化数据的特定格式。它高度依赖于您运行的计算机体系结构/处理器。

允许编译器添加填充以帮助系统对齐。当我们说对齐时，我们基本上是指架构/处理器对数据位于特定字节边界上的亲和力。例如，某些处理器非常喜欢浮点数位于 4 或 8 字节边界 - 如果它们不这样做，处理器可能会运行得更慢或根本无法运行。

所以，你不能简单地知道你的系统神奇地添加了什么填充。

你可以做的是使用#pragma pack(1) / #pragma pack(0) 来阻止你的编译器填充你的数字。

PS：您还必须担心字节顺序。如果一台计算机以大端方式运行而一台以小端方式运行怎么办？他们将在没有转换的情况下以不同的方式解释字节。

简而言之，您要么必须修复生成文件的应用程序，以便它使用正确的序列化方案，要么您需要查看它在特定计算机上运行，​​查看它是如何编写文件的，并为每个目标平台编写一个翻译器（这很愚蠢）。

**有趣的建议**

如果您真的卡住了，请编写一个应用程序来监控您写入文件的文件夹。让应用程序获取文件（因为它在同一台 PC 上，它可以毫无问题地读取它们的格式）。让它以 XML 或其他一些真正的序列化格式写回文件并分发这些文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T20:10:26.590

哇——太疯狂了。所以 String 对象不包含任何指针？不能——因为你声称这是工作代码。

无论如何，该代码没有进行任何序列化。它只是将结构写出来以完全按照它在内存中的布局方式进行归档。您遇到的唯一问题是，在某些平台上，整数类型（如 int）的填充和 sizeof 可能不同。

您必须找到整数类型的大小，并在新平台的读取器/写入器中使用该信息，以确保它们在旧平台上以相同的方式布局。

但是，您使用该代码确实存在风险。实际上，编译器更改可能会突然导致文件布局发生更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T21:14:08.917

没有人指出我认为特别有问题的东西（也许是因为我被它咬了）。那个问题：数据成员`bool Usadl;`。`sizeof(bool)` 跨平台、跨编译器，甚至跨同一编译器的不同版本。的常见值`sizeof(bool)`是 4 和 1。这会咬你。现在很难找到一台大端机器，非常非常难找到一台`CHAR_BIT`不是 8 或`sizeof(int)`不是 4 的计算机。对于`sizeof(bool)`.

与其他人一致，Chad 的团队需要记录文件中记录的结构，然后确保生成文件的程序明确地写入此结构，包括元素大小、填充和字节顺序。不要依赖类布局来为您执行此操作。那只是自找麻烦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T20:08:14.567

在 ofstream 中写入不会序列化数据。此代码写入结构的原始内存内容，因为它是一个 char 字符串。根据你的编译器，它的版本、它的选项和它在内容上运行的系统将完全不同。甚至 char 的位数也允许在 c++ 实现之间更改。结构对象引用的数据不会被写入（忘记 std::string 的内容）。

如果您无法更改编写器代码。您必须知道对齐策略、基本类型的大小和数据表示。您将不得不分析手工生成的文件，例如使用像 [http://www.physics.ohio-state.edu/~prewett/hexedit/](http://www.physics.ohio-state.edu/~prewett/hexedit/)这样的十六进制编辑器 ，并且可能查看您的编译器文档。

如果您可以更改编写器代码。使用适当的序列化，如 json、协议缓冲区或简单的 xml。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T20:09:51.070

它的完成方式是，结构以原始形式写入文件。所以基本上你需要知道解析这个文件是你的结构的二进制布局。

基本上，这些字段是一个接一个，所以要读取一个 int，您只需读取 4 个字节并将其转换为一个 int 等。

字符串是一种特殊情况。从您的代码中不清楚此“String”类型是内联字符数组还是指向此类数组的指针。在第一种情况下，您需要知道每个字符串包含多少个字符，然后简单地按顺序读取该数量的字符。在第二种情况下，您将无法取回字符串，因为它不会被写入文件。指针对您毫无用处。

最后一个问题是结构是否被打包。由于您没有给出任何指示，默认情况下结构字段与 4 字节边界对齐，因此在您需要考虑的布尔字段之后可能会有空间。如果结构被打包，那么每个字段都直接在前一个字段之后。

所以，长话短说，用它的定义找出你的结构二进制布局，如果一切都失败了，用调试器在运行时检查内存，或者使用十六进制编辑器来研究输出文件。然后在某处写下该规范，这将为您提供您需要从文件中读取的内容。仅仅通过查看您提供的伪定义，不可能准确地知道该布局是什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T20:07:57.823

最好的方法可能是使用 JSON，或者如果您想要更强大的解决方案，请使用[Avro](http://avro.apache.org/docs/1.7.0/)之类的解决方案。Avro 有一个[C++ API](http://avro.apache.org/docs/1.7.0/api/cpp/html/index.html)和一个[Java API](http://avro.apache.org/docs/1.7.0/api/java/index.html)，因此它涵盖了您遇到的大多数情况。

# c# - params[] 可以作为 lambda 表达式的参数吗？

> ID：11215093
> 
> 赞同：14
> 
> 时间：2012-06-26T20:01:45.147
> 
> 标签：c#, lambda, closures, params-keyword

我最近开始探索 lambda 表达式，我想到了一个问题。假设我有一个需要不确定数量的参数的函数。我会使用 params 关键字来对可变数量的参数进行建模。

我的问题：我可以用 Lambda 表达式做类似的事情吗？例如：

```
Func<int[], int> foo = (params numbers[]) =>
                       {
                           int result;

                           foreach(int number in numbers)
                           {
                               result += numbers;
                           }

                           return result;
                       } 
```

如果是这样，就会出现两个子问题 - 是否有一种“好”的方式来编写这样的表达式，我什至想在某个时候写这样的表达式？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T20:13:23.883

嗯，有点。首先，`Func<>`您需要定义一个自定义委托，而不是使用 ：

```
public delegate int ParamsFunc (params int[] numbers); 
```

然后，您可以编写以下 lambda：

```
ParamsFunc sum = p => p.Sum(); 
```

并使用可变数量的参数调用它：

```
Console.WriteLine(sum(1, 2, 3));
Console.WriteLine(sum(1, 2, 3, 4));
Console.WriteLine(sum(1, 2, 3, 4, 5)); 
```

但老实说，坚持使用内置`Func<>`委托确实要简单得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:08:15.857

我认为你能得到的最接近的东西是这样的：

```
Func<int[], int> foo = numbers[] =>
                       {
                           // logic...
                       }

var result = foo(Params.Get(1, 5, 4, 4, 36, 321, 21, 2, 0, -4)); 
```

并且有：

```
public static class Params
{
    public static T[] Get(params T[] arr)
    {
        return arr;
    }
} 
```

但我看不出这比简单`new[] {1, 5, 4, 4, ...}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-22T03:45:49.053

这里有两件事，`Func<int[], int>`LHS 上的通用委托和 RHS 上的 lambda 表达式。前者是不可能的，因为`Func<S, T>`委托声明如下：

```
public delegate TResult Func<in T, out TResult>(T arg); //ie no params involved 
```

您需要自己的代表来接受`params`输入，如接受的答案所示。

后者，也就是问题标题的含义，在 C# 中也是不可能的，**但这是有原因的。**

赋值表达式的 LHS 是编译时的东西（除非它`dynamic`当然是但编译器再次意识到它），它的 RHS 是运行时的东西（当然除非在`const`s 的情况下）。编译器可以推断在 LHS 上键入了什么，但它仅在运行时（即代码运行时）获取 RHS 上的值。当您键入以下内容时：

```
Func<int[], int> foo = .... 
```

`foo`总是被认为是`Func<int[], int>`。如果必须破译 RHS，它将给编译器增加很多复杂性。例如，如果您尝试的是可能的，请考虑以下情况：

```
Func<int[], int> foo = (params int[] numbers) =>
                   {
                       int result;

                       foreach(int number in numbers)
                       {
                           result += numbers;
                       }

                       return result;
                   };

//and later at some other place
foo = (int[] numbers) => 0;

//how would you call 'foo' now? 
```

*相反，当您编写自己的接受委托时`params`，您是在直接告诉编译器（即从 LHS 获知）*。

在命名方法的参数支持的三个特性中，即，`out/ref`可选`params`参数，lambda 表达式（甚至更早的`delegate`语法）仅支持`out/ref`。

# architecture - 如何在 3 层应用程序中构建 PetaPOCO 生成的代码？

> ID：11215094
> 
> 赞同：2
> 
> 时间：2012-06-26T20:01:48.000
> 
> 标签：architecture, orm, data-access-layer, petapoco

早些时候，我总是手动编写 DAL 和实体代码。我将有一个名为 myEntities 的单独项目，其中包含映射到数据库表的所有类。MyEntities 程序集随后被应用程序的所有三层（即 DAL、BLL 和表示层）引用。

现在我正在尝试 PetaPoco 并使用 T4 模板自动生成实体类。这太棒了。但问题是这些是在 DAL 中生成的。因此，我必须在 BLL 甚至表示层中提供对 DAL dll 的引用，这是不正确的。

在这种情况下应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:30:09.080

查看[GitHub 中的这个示例 PetaPoco 项目，](https://github.com/GarethElms/PetaPoco----A-simple-web-app)作者在其中使用存储库进行了很好的分离。

# msbuild - 如何访问列表项元数据，但维护列表？

> ID：11215096
> 
> 赞同：0
> 
> 时间：2012-06-26T20:01:53.570
> 
> 标签：msbuild

我创建了一个带有以下项目组的自定义 .targets 文件

```
<ItemGroup>
    <AvailableItemName Include="Foo" />
</ItemGroup> 
```

我可以访问该集合或列表，`@(Foo)`我得到`'Item1.txt;Item2.txt'`

如果我这样做，`%(Foo.FullPath)`我会得到`'C:\projectfolder\Item1.txt'`

如何同时使用元数据标签 % 和“收藏”标签 @ 来获取 `'C:\projectfolder\Item1.txt;C:\projectfolder\subfolder\Item2.txt'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:47:02.377

```
@(Foo->'%(Foo.FullPath)') 
```

您可以阅读更多[MSBuild 转换](http://msdn.microsoft.com/en-us/library/ms171476.aspx)

# jboss - JBoss 4.2.x 中的 JBoss 本机连接器

> ID：11215099
> 
> 赞同：2
> 
> 时间：2012-06-26T20:02:05.720
> 
> 标签：jboss, native

我想配置 JBoss 4.2.x 以利用[JBoss Web Native 连接器](http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-9)而不是默认的 Ajp 处理器。这是为了避免 Jboss 4.2.x Ajp 处理器中的错误导致许多挂起的线程和性能下降。

我似乎找不到任何安装说明。有没有人有任何信息如何做到这一点？

[下载站点1](http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-9)中的最新 Native Connector 是否适用于我的旧版 JBoss？

如果我能找到分步指南，我会将其发布在 wiki 中，供社区中的任何其他人使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:24:05.687

0) 停止 jboss

1) 请下载此链接：

[http://downloads.jboss.org/jbossnative//2.0.10.GA/jboss-native-2.0.10-linux2-i64-ssl.tar.gz](http://downloads.jboss.org/jbossnative//2.0.10.GA/jboss-native-2.0.10-linux2-i64-ssl.tar.gz)

这将包含一个目录

jboss-native-2.0.10-linux2-i64-ssl/bin jboss-native-2.0.10-linux2-i64-ssl/licenses

2) 将这些目录合并到您的 jboss-4.2.3.GA 目录之上。

3）启动jboss。

# java - 如何避免观察者模式中的冲突？

> ID：11215103
> 
> 赞同：1
> 
> 时间：2012-06-26T20:02:12.213
> 
> 标签：java, observer-pattern

[r这是来自实例如何与其实例化器通信](https://stackoverflow.com/questions/11214152/how-can-an-instance-communicate-with-its-instantiator)的后续问题？

如果我有以下情况，并且方法 signal() 被 B 的 2 个实例同时调用，这将导致每个 B 调用 reset() 两次的冲突。我能做些什么来解决它？

如果发生导致重置的事件，则重置是可以的，前提是所有 B 都已完成重置。

```
public class A {
    private B b[];

    public A() {
        //for loop
        b[i] = new B(this);
    }

    public void signal() {
        //tells every B to reset.
        //for loop
        b[i].reset();
    }
}

public class B {
    A creator;

    public B(A creator) {
        this.creator = creator;
    }

    public void reset() {
        //very critical operation that should not happen back to back
    }

    public void main(String[] args) {

        while(true)
            if(isBad()==true) {
                //Something bad happen. Tell A to reset everyone.
                creator.signal();
            }

   }
} 
```

# facebook - 检测到循环重定向路径（有关详细信息，请参阅“重定向路径”部分）

> ID：11215106
> 
> 赞同：2
> 
> 时间：2012-06-26T20:02:42.400
> 
> 标签：facebook, share

我只是想分享地址包含查询字符串的页面。但是 og:image 没有显示，尽管 image:url 是绝对正确的。facebook 调试器显示错误作为我写的标题。我不明白出了什么问题以及如何解决它。我可以共享链接但没有图像，尽管 og:image 元标记绝对链接到正确的图像。

这是页面： [http ://www.mysite.com/Pages/EtkinlikDetay.aspx?ID=In6EP/AKxcU=](http://www.mysite.com/Pages/EtkinlikDetay.aspx?ID=In6EP/AKxcU=)

和 og 标签是我在 asp.net page_load 过程中生成它们的。是什么让在 facebook 上分享页面链接变得如此困难？你能给我们一个可靠的解决方案如何解决这个问题吗？我可以准备一个小项目 asp.net 来重现，以便您检测问题。或者你能说这是一个错误吗？（感谢任何评论）

> > meta property="og:site_name" content="网站名称 1" /> meta property="og:title" content="Mutfak Sanatları Akademisi" /> meta property="og:url" content="http:// www.mysite.com/Pages/EtkinlikDetay.aspx?ID=In6EP/AKxcU=" /> meta property="og:description" content="我的描述 1" /> meta property="og:image" content="http ://www.mysite.com/Upload/Etkinlikler/falanca/vazgecemediklerimiz.jpg" />

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:49:33.223

我遇到了循环重定向路径问题，所以我使用了 urlencode 并且它有效

```
 meta property="og:url" content="<?php echo urldecode(http://www.mysite.com/Pages/EtkinlikDetay.aspx?ID=In6EP/AKxcU=);?>" /> 
```

# mysql - UNION MySQL 的问题

> ID：11215110
> 
> 赞同：0
> 
> 时间：2012-06-26T20:02:57.387
> 
> 标签：mysql, sql, database, select, union

我有这个查询：

```
SELECT COUNT(*) AS invoice_count, IFNULL(SUM(qa_invoices.invoice_total), 0)
AS invoice_total, IFNULL(SUM(qa_invoices.invoice_discount) ,0) AS invoice_discount
FROM qa_invoices
WHERE (DATE(qa_invoices.invoice_date) BETWEEN '12/06/25' AND '12/06/25') 
AND qa_invoices.status_code IN (5, 8)

UNION 

SELECT IFNULL(SUM(qa_returns.client_credit), 0) 
FROM qa_returns 
WHERE (DATE(qa_returns.returnlog_date) BETWEEN '12/06/25' AND '12/06/25'); 
```

我得到错误：

```
The used SELECT statements have a different number of columns. 
```

我正在尝试使用 UNION 命令加入这 2 个选择，如果我们查看`returnlog_date`并`invoice_date`具有相同的数据条件，如果有任何方法可以将两个查询合并为一个会更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:09:20.147

该错误准确地告诉您问题所在，因为`UNION`您必须在每个查询中具有相同数量的列。

我不确定您的第二个查询中的哪一列对应于您的第一个查询，但您可以在第二个查询中插入一个零。

像这样的东西：

```
SELECT COUNT(*) AS invoice_count
    , IFNULL(SUM(qa_invoices.invoice_total), 0)  AS invoice_total
    , IFNULL(SUM(qa_invoices.invoice_discount) ,0) AS invoice_discount
FROM qa_invoices 
WHERE (DATE(qa_invoices.invoice_date) BETWEEN '12/06/25' AND '12/06/25') 
    AND qa_invoices.status_code IN (5, 8)

UNION 

SELECT 0
    , IFNULL(SUM(qa_returns.client_credit), 0) 
    , 0
FROM qa_returns 
WHERE (DATE(qa_returns.returnlog_date) BETWEEN '12/06/25' AND '12/06/25'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T20:10:21.900

使用子选择：

```
SELECT
    COUNT(*) AS invoice_count,
    IFNULL(SUM(invoice_total), 0) AS invoice_total,
    IFNULL(SUM(invoice_discount), 0) AS invoice_discount,
    (
        SELECT IFNULL(SUM(qa_returns.client_credit), 0)
        FROM qa_returns
        WHERE qa_returns.returnlog_date >= '2012-06-25'
        AND qa_returns.returnlog_date < '2012-06-26'
    ) AS client_credit
FROM qa_invoices
WHERE invoice_date >= '2012-06-25'
AND invoice_date < '2012-06-26'
AND status_code IN (5, 8) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:09:15.707

您联合在一起的结果集必须具有完全相同的列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:10:50.017

那么为了做一个 UNION 你需要有相同数量的列

# sql - 在表上存储任意属性

> ID：11215113
> 
> 赞同：0
> 
> 时间：2012-06-26T20:03:11.603
> 
> 标签：sql

我有 3 张桌子、`x`、`y`和`z`。我希望能够将任意属性附加到每个表中的每一行。`x`, `y`, 并且`z`除了它们都有一个整数主键被调用 `id`并且应该能够附加任意属性之外没有任何共同点。

制作单个属性表是否更好，例如

```
create table attributes (
    table enum('x', 'y', 'z'),
    xyz_id integer,
    name varchar(50),
    value text,
    primary key (table, xyz_id, name)
); 
```

还是最好制作单独的表格，例如

```
create table x_attributes (
    x_id integer,
    name varchar(50),
    value text,
    primary key (x_id, name),
    foreign key (x_id) references x (id)
);
create table y_attributes (...);
create table z_attributes (...); 
```

第二个选项（单独的表）似乎更干净，但在数据库端和应用程序端都需要更多样板。

我也愿意接受这两个以外的建议。

*注意：我考虑过使用像 MongoDB 这样的文档存储的可能性，但我正在使用的数据基本上是关系型的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:04:43.147

使用一个带有枚举列的表，从长远来看，这将使获取每一行的所有属性更容易。

# java - 在不使用 Servlet 和 Tomcat 的情况下使用 Java 创建一个简单的网页

> ID：11215120
> 
> 赞同：1
> 
> 时间：2012-06-26T20:04:00.843
> 
> 标签：java, servlets, webpage, java-server

我想创建一个在桌面上运行的简单服务器应用程序，当我在 Web 浏览器上键入我的 ip 和端口时，它会连接到服务器客户端，然后打开一个网页，并在服务器应用程序上编码适当的显示。

我在网上看到我需要使用 servlet 和 Apache Tomcat 来使用 Java 制作网页。

我想知道是否有任何更简单的方法可以制作一个可以包含按钮而不使用 servlet 和 Apache Tomcat 的简单网页？

例如，我可以使用套接字在服务器和客户端应用程序之间进行通信。我可以将此客户端更改为在 Web 浏览器上键入 IP 地址和端口，这将显示在服务器应用程序中创建和包含的网页，并消除对 servlet 和 tomcat 的需要？如果是这样，我如何在服务器应用程序上创建一个按钮，以便 Web 浏览器在连接到服务器应用程序时可以看到该按钮？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:14:33.900

如果我理解正确，您想要一个网页，但您不想使用 Tomcat（或任何其他 servlet 引擎）。

尽管在技术上可以编写自己的小型 Web 服务器（使用服务器套接字等），但您基本上在做的是重写 Tomcat。编写一个好的 Web 服务器是一项艰巨的工作，不应掉以轻心。我认为你低估了这一点。相反，使用已经存在的东西。Tomcat真的很容易运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:08:20.773

可以使用原始套接字创建服务器部分，但我会看看像 Jetty 这样的嵌入式服务器。我认为这将为您节省大量时间和头痛。

[http://docs.codehaus.org/display/JETTY/Embedding+Jetty](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:10:41.680

您应该查看[Play Framework](http://playframework.org)。然后实现 Tomcat 或 Apache 会更容易。

1.2.4 版对于 Java 来说是稳定且功能齐全的，2.x 版专注于 Scala，还没有 1.2.4 的所有功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:10:56.897

您不必创建 servlet。但是，您需要能够解析 jsp 页面的东西——它可以是 tomcat 或其他具有与 tomcat 相同功能的服务器。虽然我不确定我是否正确理解了你的问题。

# php - 难以获得季度销售额

> ID：11215121
> 
> 赞同：0
> 
> 时间：2012-06-26T20:04:06.893
> 
> 标签：php, magento

我正在尝试提取第一季度的销售总额。我似乎无法让它发挥作用。有什么建议么？

```
$total = 0;
$orders = Mage::getModel('sales_order/collection')
   ->addAttributeToSelect('*')
   ->addAttributeToFilter('created_at', array(
      'from' => '2012-01-01',
      'to' => '2012-03-31'));
foreach ($orders as $order) {
   $total += $order->getGrandTotal();
}
echo $total; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:10:18.563

你没有得到正确的收藏。有多种方法可以做到这一点，看起来你可能已经结合了几种方法：

1.  `Mage::getModel('sales/order')->getCollection()`或者
2.  `Mage::getResourceModel('sales/order_collection')`

但是，如果您真正想要的只是对单个属性求和，`grand_total`那么构建自己的查询比加载整个销售订单集合更有效**：**

```
$db = Mage::getSingleton('core/resource')->getConnection('core_read');
$salesTable = Mage::getSingleton('core/resource')->getTableName('sales/order');
list($total) = $db->fetchCol(
    $db->select()
       ->from($salesTable, array('grand_total' => 'SUM(grand_total)'))
       ->where('DATE(created_at) >= ?', '2012-01-01')
       ->where('DATE(created_at) <= ?', '2012-03-31')
);
echo $total; 
```

# php - 使用 php 和 mysql 的占位符来防止注入

> ID：11215124
> 
> 赞同：0
> 
> 时间：2012-06-26T20:04:30.677
> 
> 标签：php, mysql, prepared-statement

我知道`mysql_`已被弃用，但我只是将其用作从书中学习的工具。

我正在尝试了解占位符，当我单击“添加记录”时出现以下错误：

```
INSERT failed: EXECUTE statement USING @first,@last,@email,@user 
Unknown prepared statement handler (statement) given to EXECUTE 
```

使用以下代码：

```
if (isset($_POST['first']) && isset($_POST['last']) && isset($_POST['user_name']) && isset($_POST['email']))
{
    $first      = get_post('first');
    $last       = get_post('last');
    $email      = get_post('email');
    $user_name      = get_post('user_name');

    // begin placeholde code
    $query = 'PREPARE statement FROM "INSERT INTO user_master VALUES(?,?,?,?)"';
    mysql_query($query);

    $query = 'SET @first = "$first",' . 'SET @last = "$last",' . 'SET @email = "$email",' . 'SET @user_name = "$user_name",';
    mysql_query($query);

    $query = 'EXECUTE statement USING @first,@last,@email,@user';
    mysql_query;

    // end placeholder code

    if(!mysql_query($query, $db_server)) echo "INSERT failed: $query <br />" . mysql_error() . "<br /><br />";
}

echo <<<END
<form action = "willingLog.html" method="post"><fieldset><legend>Sign Up:</legend>    <pre>
    First       <input type="text" name="first" />
    Last        <input type="text" name="last" />
    Email       <input type="text" name="email" />
    Username    <input type="text" name="user_name" />
                <input type="submit" value="AD RECORD" />
</pre></fieldset></form>
END;

// also from placeholder code
$query = 'DEALLOCATE PREPARE statement';
mysql_query($query);
// end placeholder code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:58:06.507

您的代码有 2 个错误。

1.  您试图在一次调用 mysql_query 时运行多个查询，而您必须分别运行它们中的每一个
2.  您正在使用的内联准备好的语句**对于防止 sql 注入是无用的**，因为您正在以通常的方式创建 SQL 查询，直接添加数据。所以，你必须像往常一样格式化它，使准备好的语句变得毫无用处。

因此，如果 Scarlett O'Hara 或 Bobby Tables 决定加入您的网站 - 您就有麻烦了。

所以。

*   仅使用内联准备好的语句在**控制台中使用它们**
*   如果您想使用 PHP 应用程序中的本地准备好的语句 - 使用 PDO。
*   **始终**正确格式化您的查询，即

    ```
    $last = mysql_real_escape_string($_POST['last']); 
    ```

    如果您要将其作为**字符串**插入到查询中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:48:56.620

我认为您的初始`PREPARE statement`查询可能失败，您还应该更改行：

```
$query = 'SET @first = "$first",' . 'SET @last = "$last",' . 'SET @email = "$email",' . 'SET @user_name = "$user_name",'; 
```

至

```
$query = 'SET @first = "$first",' . ' @last = "$last",' . ' @email = "$email",' . ' @user_name = "$user_name",'; 
```

`SET`is`SET variable_assignment [, variable_assignment] ...`但您使用的语法`SET variable_assignment [, SET variable_assignment] ...`会导致错误。

要查看您的第一个查询是否有错误，请尝试以下操作：

```
$query = 'PREPARE statement FROM "INSERT INTO user_master VALUES(?,?,?,?)"';
$res = mysql_query($query);
if (!$res) die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T10:26:27.750

我认为你有一个简单的打字错误

```
$query = 'EXECUTE statement USING @first,@last,@email,@user'; 
```

mysql_查询；

您忘记将查询传递给 mysql_query 函数的地方，因此将其更改为

```
$query = 'EXECUTE statement USING @first,@last,@email,@user';
mysql_query($query); 
```

希望它有效

# triggers - 防止批量插入重复值 (Salesforce)

> ID：11215126
> 
> 赞同：1
> 
> 时间：2012-06-26T20:04:46.170
> 
> 标签：triggers, duplicates, salesforce, apex-code, bulk

我需要一个触发器来接收来自用户的数据（大约 1000 条记录的批量加载）并将它们存储在 Salesforce 数据库中。`Trigger.new`问题是用户可以在不同批次中甚至在不同批次中出现多次。自定义对象名称是`CBK_User`并且有一个`EXTERNAL_ID`（唯一的）称为`USER_ID`. 在我的代码中，我检查数据库中是否尚不存在用户：

```
Map<String, CBK_User__c> users = new Map<String,CBK_User__c> 
    ([select Id, USER_ID__c from CBK_User__c where USER_ID__c in : userIds]); 
```

（userIds 具有 Trigger.new 对象的外部 id）

当我尝试插入时，它给了我错误：

```
DUPLICATE_VALUE, duplicate value found: USER_ID__c duplicates value on 
record with id: a1QJ0000000HRd8" 
```

如何防止批量插入重复值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:30:20.437

我已将您的问题改编为[这个基本示例](http://wiki.developerforce.com/page/Apex_Day_Lab_Exercises#Exercise_2%3aLead_duplicate_prevention)（练习 2：铅重复预防）

您应该首先从重复条目中清除“新”列表，然后从数据库中现有的列表中清除。

```
 trigger CBK_UserDuplicatePreventer on CBK_User__c (before insert, before update) {
        //Enter a map declaration to hold records which we will add,
        // this will become a unique map, no duplicate values within it.
        Map<String, CBK_User__c> cbkUserMap = new Map<String, CBK_User__c>();

        //The next few lines loop across the array of records that are passed into 
        //the trigger in bulk fashion from any API or User Interface database operation.
        //The goal of this loop is to ensure that there are no duplicates within 
        //the batch that we have received and to gather a list of externalIds that we will use later
        for (CBK_User__c cbkUser : System.Trigger.new) {

            /* Make sure we don't treat an externalId that
               isn't changing during an update as a duplicate. */
            if ((cbkUser.USER_ID__c != null) && (System.Trigger.isInsert ||
 (cbkUser.USER_ID__c != System.Trigger.oldMap.get(cbkUser.Id).USER_ID__c))) {

                // Make sure another new CBK_User__c isn't also a duplicate
                if (cbkUserMap.containsKey(cbkUser.USER_ID__c)) {
                    cbkUser.USER_ID__c.addError('Another new CBK_User__c has the same USER_ID.');
                } else {
                    cbkUserMap.put(cbkUser.USER_ID__c, cbkUser);
                }
            }
        }

        // Using a single database query, find all the CBK_User__c in
        // the database that have the same USER_ID as ANY
        // of the CBK_User__c being inserted or updated. */
        for (CBK_User__c cbkUser : [SELECT USER_ID__c FROM CBK_User__c WHERE USER_ID__c IN :cbkUserMap.KeySet()]) {
            CBK_User__c newCbkUser = cbkUserMap.get(cbkUser.USER_ID__c);
            newCbkUser.USER_ID__c.addError('A CBK_User__c with this USER_ID already exists.');
        }
    } 
```

# arrays - 查询数组元素的值（PostgreSQL）

> ID：11215128
> 
> 赞同：10
> 
> 时间：2012-06-26T20:04:57.170
> 
> 标签：arrays, postgresql, postgresql-8.4

以下查询：

```
select unnest(Table2.L) as X, unnest(Table1.O) 
from Table1, Table2 
where Table1.code = Table2.code 
order by X ; 
```

产生预期的结果。但是，我想排除匹配某个值的（未嵌套的）行。向查询添加条件，例如：

```
and unnest(Table2.L) != '-' 
```

显然行不通。这可能吗？如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T20:40:47.557

如果`unnest(Table2.L) != '-'`你的意思是

> 丢弃所有未嵌套的元素`'-'`

然后使用派生表并过滤掉您不想要的未嵌套值：

```
select *
from (
    select unnest(Table2.L) as X, unnest(Table1.O) 
    from Table1 join Table2 on Table1.code = Table2.code
) dt
where X != '-'
order by X ; 
```

如果你的意思是

> 忽略包含`Table2`的所有行`L``'-'`

然后您可以使用[`@>`运算符](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-OPERATORS-TABLE)检查是否`L`包含某个元素：

```
select unnest(Table2.L) as X, unnest(Table1.O)
from Table1 join Table2 on Table1.code = Table2.code
where not Table1.L @> ARRAY['-'] 
```

或者你可以使用[ANY](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN17415)：

```
select unnest(Table2.L) as X, unnest(Table1.O)
from Table1 join Table2 on Table1.code = Table2.code
where not '-' = any(Table1.L) 
```

通过忘记存在隐式连接来帮自己一个忙，始终使用显式连接条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T21:29:17.700

另一种方法：

```
SELECT x, y
FROM  (SELECT code, unnest(l) AS x FROM table1) t1
JOIN  (SELECT code, unnest(o) AS y FROM table2) t2 USING (code)
WHERE  x <> '-'
ORDER  BY x; 
```

五月可能不会更快。取决于 WHERE 子句的选择性。快速运行`EXPLAIN ANYLYZE`。

请注意，我解开了`table1`和`table2`，在示例中是相反的。如果您对所有清晰度感到困惑，请尝试在and子句中替换`x`-> 。`y``WHERE``ORDER BY`

如果您确实想消除`-`两边的出现，请添加`AND y <> '-'` 到 WHERE 子句 - 使其对称（不可能出现混淆）。如果不能保证 x 是唯一的，
我也会使排序顺序稳定。`ORDER BY x, y`

[sqlfiddle 上的演示。](http://sqlfiddle.com/#!1/b1698/3)

# php - PHP 在使用 fputcsv 到 php://output 时减少内存使用

> ID：11215129
> 
> 赞同：3
> 
> 时间：2012-06-26T20:05:04.210
> 
> 标签：php, database, memory-management, pdo

我们遇到了一个奇怪的问题。它是这样的。我们有大量数据需要输出给客户。这些数据文件不能预先构建，它们必须从实时数据中提供。

我首选的解决方案是从这样的提取中逐行写入 CSV：

```
 while($datum = $data->fetch(PDO::FETCH_ASSOC)) {
            $size += fputcsv($outstream, $datum, chr(9), chr(0));
 } 
```

这解决了很多荒谬的内存使用（一次将 100000 条记录读入内存是不好的魔力），但是对于大型表，我们仍然存在挥之不去的问题，随着数据大小的增加，这些问题只会变得更糟。请注意，没有数据分区；他们不按年份分段下载，而是下载所有数据，然后自行分段。这是按照要求；我无法改变这一点，因为它会完全消除问题。

在任何一种情况下，在最大的表上都会耗尽内存。一种解决方案是增加可用内存，这解决了一个问题，但如果有多个客户端正在下载，则建议稍后甚至现在创建服务器负载问题。

在这种情况下，$outstream 是：

```
$outstream = fopen("php://output",'w'); 
```

这似乎很明显不是一个物理磁盘位置。在将数据发送到客户端之前，我不太了解 php://output 数据所在的位置，但很明显，通过这种方法将多个数据库表简单地写入 csv 存在内存问题。

准确地说，暂存盒允许 PHP 使用大约 128mb，特别是这个调用短了大约 40mb（它试图多分配 40mb。）这对于行为来说似乎有点奇怪，因为你会期望它请求更小的内存部分。

任何人都知道可以做些什么来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:10:24.447

所以看起来内存消耗是由 Zend Framework 的输出缓冲引起的。我想出的最好的解决方案就是这个。

在我们开始将文件流式传输到客户端之前执行 ob_end_clean() 。ZF 的这个特殊实例在此之后不会产生任何正常输出或做任何其他事情，因此不会出现并发症。确实发生了奇怪的事情（也许从用户的角度来看）是他们确实将文件流式传输给了他们。

这是代码：

```
ob_end_clean();
while($datum = $data->fetch(PDO::FETCH_ASSOC)) {
            $size += fputcsv($outstream, $datum, chr(9), chr(0));
} 
```

内存使用量（根据某处 ZF 论坛帖子中建议的函数 memory_get_peak_usage(true)）从 90 兆字节下降到 9 兆字节，这是在读取任何文件之前在我的开发盒上使用的内存。

谢谢你们的帮助，伙计们！

# ios - 上传更新时出错

> ID：11215133
> 
> 赞同：0
> 
> 时间：2012-06-26T20:05:28.450
> 
> 标签：ios, xcode

我正在尝试使用此方法通过 Xcode 将我的应用程序更新上传到 itunesconnect：
1）在目标摘要窗口上将版本号从 1.0 更改为 1.01。
2) 将版本号 1.01 添加到 iTunes 连接
3) 然后我从 Product -> Clean Build Folder
4) Product -> Build for -> Archiving
5) Product -> Archives 中清除 build 文件夹
6) “Organiser - Archives”窗口弹出我刚刚在我过去完成的所有档案的第一行所做的最新档案，并带有“验证”或“分发”选项。为了安全起见，我决定“验证”以查看是否有任何错误。
7) 弹出一条错误消息：

```
This bundle is invalid. The keyCFBundleVersion in the Info.plist must contain a higher version than that of the previously uploaded version. 
```

认为 1.01 不可接受，我将其更改为 1.1 并按照相同的错误执行步骤 3 到 6。

然后我将其更改为 1.10 并仍然按照相同的步骤 3 到 6 再次出现相同的错误。

我最终将其更改为 2.0 并仍然按照步骤 3 到 6 再次出现相同的错误。
我检查了 plist 文件，它反映了我对版本号所做的更改。我重试了从版本 1.1 到 1.01 再到 1.10 到 2.0 的整个版本号序列，但每次更改后我都关闭了 Xcode，然后重新打开，认为它与 Xcode 中的缓存问题（如果有）有关，结果相同。

我给苹果支持发送了电子邮件，他们最终回复了（我知道他们每天都会收到大量电子邮件），要求我使用技术支持。现在我有 2 个学分，我打算用于其他问题的其他技术讨论。

我很感激关于这个问题的任何指示。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:14:45.533

你要改这个版本吗？

![在此处输入图像描述](../Images/25ef4cc0c287d672c4de9b922791c024.png)

这是它抱怨的领域。

# java - 通过 javacode 将组件添加到 Spring 3

> ID：11215136
> 
> 赞同：1
> 
> 时间：2012-06-26T20:05:42.800
> 
> 标签：java, spring, activemq, apache-camel

有没有办法通过 Spring 的 applicationConfig XML 中的 javacode 添加 ActiveMQ 组件？

我的主要目标是从外部属性文件中获取他的“brokerURL”。但是属性文件不是标准的属性文件，它是基于 XML 的，所以必须适当地解析它并获取属性。

```
<!-- COMPONENT BEANS -->
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="connectionFactory">
        <bean class="org.apache.activemq.ActiveMQConnectionFactory">
            <property name="brokerURL" value="tcp://localhost:61616"/>
        </bean>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:13:58.347

有几种方法。

一个是真正程序化的，像这样：

```
org.apache.activemq.camel.component.ActiveMQComponent amq = new org.apache.activemq.camel.component.ActiveMQComponent();
amq.setConnectionFactory(new ActiveMQConnectionFactory(parseOddXml(brokerXMLConfigFile)));
camelContext.addComponent("activemq", amq); 
```

假设您在某处有一个骆驼上下文感知 bean 来初始化您的组件。

否则，您可能只是从其他地方连接连接工厂并将其注入到 ActiveMQ 组件上的 XML 配置中。

可能是这样的

```
 @Configuration
 class MyAMQConfig{
   public @Bean ActiveMQConnectionFactory createCF(){
      String brokerURI = parseOddXml(brokerConfigFile); // or whatever logic here.
      return new ActiveMQConnectionFactory(brokerURI);
   }
 } 
```

然后在 XML 中是这样的：

```
<bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="connectionFactory" ref="activeMQConnectionFactory"/>
</bean> 
```

或者任何其他方式，因为有多种方式可以连接 bean 并与 Camel 上下文交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T03:04:44.830

为什么不只是扩展 PropertyPlaceholderConfigurer 类，以便我可以从您的 XML 文件中获取属性（使用 commons-configuration 或其他类似的包），然后在您的 spring 配置中放置一个实例？

然后只使用标准属性替换。

# playframework-2.0 - play framework 2是做java的好框架吗？

> ID：11215139
> 
> 赞同：-2
> 
> 时间：2012-06-26T20:05:46.230
> 
> 标签：playframework-2.0

因为我在 play 1.2 方面拥有绝对美妙的体验，所以我说服我的新客户从他们内部构建的 MVC 框架中进行移植，现在我开始将他们的 java 框架移植到 play-2 并且我没有美好时光。我个人的感觉是 Play 不再像 Java 开发那样方便了，这就是我的原因/感受。我认为 Play 已经转向 Scala 并且已经失去了 java 作为焦点。例如查询参数绑定和模板加载的便利性不再存在，您必须在路由文件中指定查询参数？真的？？有时甚至对象名称都没有意义，我花了很多时间弄清楚如何从配置文件中获取一个简单的值和一个简单的 Play.application().configuration().getString("key"); 不行，过了一天才知道自己玩过了。api.Play 导入为 play.Play 或函数链 WS.url("url").get().get().asJson(); 让我很不舒服，get.get?? 有没有其他人有同样的感觉，还是完全有味道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:19:42.097

我相信仍然支持[播放 1](https://github.com/playframework/play) ，因此除非您愿意，否则您实际上不需要切换到[播放 2 。](https://github.com/playframework/Play20)但是，play 框架代码是开源的，因此即使不再支持它，您也可以分叉他们的 repo 并为自己维护一个版本。

您是否尝试过他们的[示例应用程序](https://github.com/playframework/Play20/tree/master/samples/java)？这（在查看他们的源代码时）通常是一个很好的起点。

# php - 在 PHP 中使用 $this->key 和重载的 __get()

> ID：11215140
> 
> 赞同：1
> 
> 时间：2012-06-26T20:05:51.290
> 
> 标签：php

我有一个动态加载类作为另一个类中的变量。我已按如下方式实现它：

```
public function &__get($key) {
    if (array_key_exists($key, $this->values) { return $this->values[$key]; }

    if ($key == "dr") {
        if (!$this->dr) { $this->dr = new DR(); }
        return $this->dr;
    }
} 
```

当我在课外使用此功能时，它按预期工作：

```
echo $p->dr->name; 
```

无缝创建 DR 并返回其名称。当我在类内部使用相同的技术时，该`__get()`函数不会被调用，并且我收到 NULL：

```
function drname() {
  return $this->dr->name;
} 
```

我想我明白为什么（否则 PHP 会在我的第一个示例中创建无限循环），但我该如何解决呢？我想出了一个解决方案：`$this->__get('dr')->name`但这真的是最好/唯一的方法吗？看起来很hacky。

# oop - “高凝聚力”是“单一职责原则”的代名词吗？

> ID：11215141
> 
> 赞同：19
> 
> 时间：2012-06-26T20:05:51.590
> 
> 标签：oop, solid-principles, single-responsibility-principle, cohesion

***高凝聚力***是***单一职责原则***的同义词吗？如果不是，它们有何不同？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-12T23:11:12.250

你问：**如果不是，它们有什么不同？**

## 单一职责原则

扔掉任何你认为你猜到这个原则意味着什么的东西。

Robert C. Martin 正式将此原则定义为：

> 一个班级应该只有一个改变的理由

大多数人定义 SRP 是不正确的。SRP 通常被误解为：

“这个`Employee`类不应该`UpdateDemographics()`和`SendMessage()`，那算作两个责任……放到`SendMessage()`一个Message类中！！”

**^^ 错了**

**vv 对**

罗伯特·C·马丁 说

> “责任不是'代码所做的事情'”。（国家数据中心 2012）

Robert C. Martin 将 SRP 定义为：

> “任何模块都应该只对**一个人**负责——[角色]。” （国家数据中心 2012）

当**利益相关者**要求更改视图中的数据排序时，管理层不应惊慌失措并担心算法会崩溃。因为**在视图上处理排序的模块只对涉众负责**，而**处理总计算法的模块只对业务分析师负责。** 因此，当业务分析师要求对算法进行更改时，我们不应该担心视图会发生变化。

因此，**一个模块**（单数）应该只因为一个原因而改变：这个模块所服务的单人**角色**请求改变。

以此作为您定义 SRP 的新基础，您现在可以应用您之前**认为**的SRP，并使定义更加细化。没有人说要把你所有的前端代码放在一个模块里，把你所有的后端代码放在一个模块里。

## 高凝聚力

想象一下你有一个方法`decimal CalculatePayFor(Employee)`和另一个方法`void Pay(Employee)`

这些属于一起吗？可能存在执行各种计算的服务，并且可能存在仅包装人力资源支付 SOAP 的服务。也许`Pay(Employee)`呼入`CalculatePayFor(Employee)`，但仅仅因为他们有这个词`Pay`并不意味着他们属于一起！

**我如何创造凝聚力？**- 你没有。凝聚力是你观察到的东西。你要做的是**不要拆散属于一起的东西。**

可以为您想要的每个公共方法创建一个类。现在每个类都有一个公共方法，一切都是定义明确的混乱。您有命名的类`PayrollClass1`，`PayrollClass2`因为一个以一种方式进行计算，而另一个以两种方式进行计算。

一些语言甚至受益于完全没有类，并且方法可以免费运行。没有方法分组，方法只是您可以随时调用的方法。它们几乎都是静态的。

但是，**您可以观察**到这一点`CalculatePayFor(Employee)`，并且`Pay(Employee)`实际上是非常*受约束的*。他们就像一对已婚夫妇，他们在一起看起来很棒。当方法明显属于一起时，您不想将它们分开。观察它们的自然状态并建立野生动物保护区。这就是**保持高凝聚力**。你不创造它，你观察它。

这真正有帮助的是**正确的代码复制**。例如，`PayrollService.CalculatePayFor(Employee)`具有与`ReportService.CalculatePayFor(Employee)`. 这很糟糕吗？当然不是。如果高级管理层要求更改员工薪酬的计算以进行报告，那与人力资源部门要求您更改实际付款方式的税收计算的责任不同。

“等等，他是不是把 SRP 和凝聚力混为一谈了？” 不，但我很高兴你认出了这个混淆。如果 ReportService 进入 PayrollService' 类并使用它的方法怎么办？然后当它为了合法的支付目的而改变时，报告都改变了……但管理层不希望这样！！！因此，由于 Cohesion 强制方法保留在自己的类中，而 SRP 强制模块保留在应用程序中，因此 ReportService 被迫从 PayrollService 类中复制/粘贴方法。现在它们可以相互独立地改变。

“但如果这不是你想要的呢？” 好吧，代码中有很多地方都排除了重复。但最常见的情况是算法会坚持自己，并且独立于依赖关系而变化。即使这意味着重复。它只取决于需要什么。但是关注点分离、单一职责、凝聚力和 DRY（不要重复自己）都是独立的想法。

旁注：干燥并不意味着永远不会重复。正如我所提到的：很多时候你可以有重复的代码，因为业务规则在不同的关注点之间是相似的，并且有不同的理由来改变。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T20:09:33.777

不是一回事。

您可以拥有一个高度内聚的类，而不仅仅是一个单一的职责。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T20:41:52.517

它不是同义词。SRP（单一职责原则）是指您确保您的课程只有一项职责。这肯定会增加你的班级凝聚力。

但是您可以在不严格遵守 SRP 的情况下拥有高凝聚力。

[这](http://www.tobinharris.com/past/2008/6/12/is-the-srp-principle-the-same-as-low-coupling-and-high-cohesion/)是一个很好的来源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-04T21:35:59.590

用罗伯特·马丁[自己的话说](https://blog.cleancoder.com/uncle-bob/2014/05/08/SingleReponsibilityPrinciple.html)，

> 如果您考虑 [SRP]，您会意识到这只是定义内聚和耦合的另一种方式。我们希望增加因相同原因而发生变化的事物之间的内聚，并希望减少因不同原因而发生变化的事物之间的耦合。

另请参阅：[单一职责原则与关注点分离之间的区别](https://stackoverflow.com/a/54991769/1371329)。

# ruby-on-rails - 如何在前端显示对象的属性

> ID：11215143
> 
> 赞同：0
> 
> 时间：2012-06-26T20:06:05.207
> 
> 标签：ruby-on-rails, ruby, haml

我有一个像这样保存在控制器中的对象：

```
@user = User.find(params[:id]) 
```

当需要显示它时，使用 HAML，我正在尝试做这样的事情：

```
-@user.first_name 
```

但没有任何东西被渲染。我究竟做错了什么？我在表单中看到了许多使用@user 的示例。即使在这种情况下我没有要创建的表单，我也应该这样做吗？或者我也看到很多地方使用 :some_var 表示法，但我不确定在这种情况下哪种方法适用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:08:11.540

使用等号代替减号

```
= @user.first_name 
```

减号不会向 HTML 输出任何内容，它会忽略返回值。等号确实会向 HTML 发出返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:08:22.007

您需要向我们展示相关代码。但我的第一个想法是：

*   你添加`@user = User.find(params[:id])`到控制器显示动作吗？

# objective-c - 定义类中的方法不可见

> ID：11215145
> 
> 赞同：0
> 
> 时间：2012-06-26T20:06:15.297
> 
> 标签：objective-c

我有一个这样定义的类（Schedule）（显示了schedule.h文件）

```
#import <UIKit/UIKit.h>
#import "TdCalendarView.h"
#import "AppDelegate.h"

@interface Schedule : UIView  {
    IBOutlet UIView *schedule;
}

- (void) calendarTouched:(CFGregorianDate) selectedDate;

@end 
```

Schedule.m 看起来像这样：

```
- (void) calendarTouched: (CFGregorianDate) selectedDate  {

    NSLog(@"calendarTouched - currentSelectDate: %@/%@/%@", selectedDate.month, selectedDate.day, selectedDate.year);
    return;
} 
```

在另一个类中，我用这个方法调用*calendarTouched ：*

```
Schedule *sch = [[Schedule alloc] init];
[sch.calendarTouched:currentSelectDate]; 
```

我收到构建错误，说在 Schedule 类型的对象上找不到“calendarTouched”。（我在调用类中有一个#import“Schedule.h”）

我做了一个干净的，但没有用。为什么找不到呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:07:23.683

```
[sch.calendarTouched:currentSelectDate]; 
```

您在这里结合了点语法和括号语法。这应该是：

```
[sch calendarTouched:currentSelectDate]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:07:52.670

您不会在 Objective-C 中调用类似的方法。改为这样做：

```
[sch calendarTouched:currentSelectDate]; 
```

# java - JBoss 4.2.3 - 如何找到 jar 文件的路径

> ID：11215150
> 
> 赞同：0
> 
> 时间：2012-06-26T20:06:45.807
> 
> 标签：java, jakarta-ee, jboss

我在 JBOSS 应用程序中遇到错误：

在 JavaBean [class com.ppnet.webservice.WebserviceHeaderWriter] 上找不到静态方法 [addHeader]

我已经检查了部署到 JBOSS 中的 WebserviceHeaderWriter.jar 并在 eclipse 中检查了它。看起来好像应该有这个方法。

我认为 JBoss 应用程序可能正在加载不同版本的 WebserviceHeaderWriter.jar 而没有此方法，有没有办法检查正在加载的文件的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:11:32.787

我设法通过将 -verbose:class 添加到我的 JVM 选项来做到这一点

# php - AJAX - 打印页面内容

> ID：11215151
> 
> 赞同：2
> 
> 时间：2012-06-26T20:06:54.810
> 
> 标签：php, ajax

我正在使用 AJAX 将表单数据发送到构建和发送 html 电子邮件的服务器 php 文件。我在服务器 php 文件中回显了这些数据的一部分。回显的 html 构建了一个我希望用户打印的表（在纸上）。我想打开默认浏览器打印对话框，以便用户可以打印他/她看不到的表格。我不在乎是否必须打开一个新选项卡以显示回显的内容。这甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T20:10:45.763

返回该 html 表单 ajax 请求，然后使用 javascript 打印

***此代码未经测试***

**jQuery/Javascript**

```
$.post("EmailFile.php", { "EmailParam": "EmailVal" },
     function(data){
         var HTML = data.EmailHTML;

        var WindowObject = window.open("", "PrintWindow", "width=750,height=650,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");
        WindowObject.document.writeln(HTML);
        WindowObject.document.close();
        WindowObject.focus();
        WindowObject.print();
        WindowObject.close();

     }, "json"); 
```

**PHP 文件**(EmailFile.php)

```
$EmailData = $_POST['EmailParam'];
//...Send Email...

//..Build HTML...
$TableHTML = "<table></table>";

//Return HTML
$JSONArr['EmailHTML'] = $TableHTML;
echo json_encode($JSONArr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:12:36.440

如果您尝试打印不可见的内容，您可以为不同的媒体（屏幕与打印）使用两个不同的 css 文件，您可以在其中通过*display: none; 隐藏/取消隐藏所需的内容；*然后通过*window.print()*生成打印对话框。

你的问题有点令人困惑。

例如：

```
<link rel="stylesheet" type="text/css" href="theme1.css" media="screen" />
<link rel="stylesheet" type="text/css" href="theme2.css" media="print" />
<div class="hidden_on_page">YOU CAN'T SEE ME BUT YOU CAN PRINT ME!</div>
<div class="on_page">YOU CAN SEE ME BUT YOU CAN'T PRINT ME</div> 
```

然后在theme1.css中：

```
.hidden_on_page { display: none; } 
```

然后在theme2.css中：

```
.on_page { display: none; } 
```

您可以在需要时通过以下方式触发打印对话框：

```
window.print(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T11:58:36.410

找到解决方案有完整的代码：

[http://codexhelp.blogspot.in/2017/04/php-ajax-window-print-page-content.html](http://codexhelp.blogspot.in/2017/04/php-ajax-window-print-page-content.html)

```
<script>
function printContent(id){ 

         $.ajax({
            type: "POST",
            url: 'printContent.php',
            data: {id: id},
            type: 'get',
            success: function( response ) {

            var contents = response;

            var idname = name;

            var frame1 = document.createElement('iframe');
            frame1.name = "frame1";
            frame1.style.position = "absolute";
            frame1.style.top = "-1000000px";
            document.body.appendChild(frame1);
            var frameDoc = frame1.contentWindow ? frame1.contentWindow : frame1.contentDocument.document ? frame1.contentDocument.document : frame1.contentDocument;
            frameDoc.document.open();
            frameDoc.document.write('<html><head><title></title>');

            frameDoc.document.write('<style>table {  border-collapse: collapse;  border-spacing: 0; width:100%; margin-top:20px;} .table td, .table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th{ padding:8px 18px;  } .table-bordered, .table-bordered > tbody > tr > td, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > td, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > thead > tr > th {     border: 1px solid #e2e2e2;} </style>');

            // your title
            frameDoc.document.title = "Print Content with ajax in php";

            frameDoc.document.write('</head><body>');
            frameDoc.document.write(contents);
            frameDoc.document.write('</body></html>');
            frameDoc.document.close();
            setTimeout(function () {
                window.frames["frame1"].focus();
                window.frames["frame1"].print();
                document.body.removeChild(frame1);
            }, 500);
            return false;   

            }
        });

}
</script> 
```

# python - 无法理解这个 python 装饰器

> ID：11215153
> 
> 赞同：5
> 
> 时间：2012-06-26T20:06:57.680
> 
> 标签：python, decorator

我是 python 装饰器的新手。在简单示例的帮助下，我已经理解了基本概念。但是当我尝试阅读这个更实用的装饰器时，我感到很失落。下面给出的是我的问题后面的代码：

```
class countcalls(object):
   "Decorator that keeps track of the number of times a function is called."

   __instances = {}

   def __init__(self, f):
      self.__f = f
      self.__numcalls = 0
      countcalls.__instances[f] = self

   def __call__(self, *args, **kwargs):
      self.__numcalls += 1
      return self.__f(*args, **kwargs)

   def count(self):
      "Return the number of times the function f was called."
      return countcalls.__instances[self.__f].__numcalls

@countcalls
def f():
   print 'f called'

f()
f()
f()
print f.count() # prints 3 
```

我的疑惑：

1.  当我们为函数添加装饰器前缀时，这是否意味着我们正在那里创建装饰器类的对象？在我们的例子中，当它说：

    `@countcalls` `def f(): print 'f called'`

是否`@countcalls`相当于创建一个`countcalls`对象并将下面的函数传递给它的`__init__`方法？

1.  这`__call__`是采取三个论点。`self`只要回答了上面的问题就可以了。另外两个论点`*args, **kwargs`到底是什么：它们的目的是什么？

2.  我怎样才能在装饰师方面做得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:40:47.260

这段代码似乎有些奇怪。我们来谈谈稍微简单的代码

```
class countcalls(object):

    def __init__(self, f):
        self._f = f
        self._numcalls = 0

    def __call__(self, *args, **kwargs):
        self._numcalls += 1
        return self._f(*args, **kwargs)

    def count(self):
        return self._numcalls

@countcalls
def f():
    print 'f called'

f()
f()
f()
print f.count() 

# output:
#   f called
#   f called
#   f called
#   3 
```

记住

```
@countcalls
def f():
    print 'f called' 
```

是一样的

```
def f():
    print 'f called'
f = countcalls(f) 
```

所以当我们使用装饰器时，函数是使用`_f`属性存储的。

`f`一个`countcalls`例子也是如此。当你`f(...)`调用时`f.__call__(...)`——这就是你`()`为自己的实例实现语法的方式。那么当你打电话时`f`，会发生什么？

```
 def __call__(self, *args, **kwargs):
        self._numcalls += 1
        return self._f(*args, **kwargs) 
```

首先，您使用`*args`and `**kwargs`，它在定义中将所有位置和关键字参数压缩为一个元组和字典，然后在调用中将一个序列和一个字典展开为参数（有关更多信息，请参见官方教程中的 4.7.4）。这是一个部分示例

```
>>> def f(*args): print args
... 
>>> f(1, 2)
(1, 2)
>>> f()
()
>>> def add(a, b): return a + b
... 
>>> add(*[4, 3])
7
>>> add(**{'b': 5, 'a': 9})
14 
```

所以`def f(*args, **kwargs): return g(*args, **kwargs)`只需对所有参数进行传递。

除此之外，您只是在跟踪您在`__call__`此实例中的次数（您调用了多少次`f`）。

请记住，只要`@dec` `def f(...): ...`有`def f(...): ...` `f = dec(f)`足够的时间，您应该能够很好地找出大多数装饰器。像所有事情一样，练习会帮助你更快更容易地做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:11:39.193

> 当我们为函数添加装饰器前缀时，这是否意味着我们正在那里创建装饰器类的对象？

有一个非常简单的方法可以找出答案。

```
>>> @countcalls
... def f(): pass
>>> f
<a.countcalls object at 0x3175310>
>>> isinstance(f, countcalls)
True 
```

所以，是的。

> @countcalls 是否等同于创建一个 countcalls 对象并将下面的函数传递给它的**init**方法？

几乎。它相当于然后*将结果分配给函数的名称*，即

```
def f():
    print 'f called'
f = countcalls(f) 
```

> 我怎样才能在装饰师方面做得更好？

1.  实践
2.  阅读使用它们的其他人的代码
3.  研究相关的 PEP

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T20:11:50.127

1.  它等价于以下内容：

    `f = countcalls(f)`

    换句话说：是的，我们正在创建一个`countcalls`对象并传递`f`给它的构造函数。

2.  这些是函数参数。在您的情况下，`f`不接受任何参数，但假设`f`是这样调用的：

    `f(3, 4, keyword=5)`

    然后`*args`将包含 3 和 4 并`**kwargs`包含键/值对`keyword=5`。有关`*args`and的更多信息`**kwargs`，请参阅[此问题](https://stackoverflow.com/questions/287085/what-does-args-and-kwargs-mean)。

3.  熟能生巧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T20:11:23.847

1.  是的，需要注意的是它还将该对象绑定到定义中给出的名称。

2.  阅读它们，阅读示例，玩一些。

# android - 应用程序开发者：如何评估他们的价值？

> ID：11215154
> 
> 赞同：10
> 
> 时间：2012-06-26T20:07:02.000
> 
> 标签：android, ios

[对“ appbuilder](http://www.google.co.uk/search?q=appbuilder) ”进行简单的 Google 搜索会显示大量新服务，这些服务声称可以帮助您使用他们的东西构建应用程序，并提供可以在 app/android 商店中使用的东西。这里有几个：

*   [蒂格齐](http://tiggzi.com/)
*   [嗡嗡声](http://www.buzztouch.com/)
*   [应用程序生成器](http://www.theappbuilder.com/)
*   [应用程序生成器](http://www.apps-builder.com/)
*   [Rhodes（摩托罗拉 + Ruby 或网络代码）](http://docs.rhomobile.com/)
*   [Appbreeder](http://www.appbreeder.com/) <- 这个感觉有点不对劲（就像在[codesmell](http://c2.com/xp/CodeSmell.html)中一样）......

我使用过PhoneGap，知道它与Titatium 的比较，并阅读了一些关于Sencha 的信息，所以（没有花一周时间全部尝试）所有这些新服务有什么关系？有没有人用过，或者他们可以推荐其中的任何一个吗？他们是生成垃圾原生代码还是使用 Web 视图？我知道这个问题并不具体，但我希望这是一个提出这样一个问题的好地方，因为 SO 用户很可能至少尝试过其中的一些。

从下面建议的类似问题中获取链接，还有另一个问题，其中包含[大量相关资源的链接](https://stackoverflow.com/questions/51988/what-work-has-been-done-on-cross-platform-mobile-development)，以及另一个[概述限制](https://stackoverflow.com/questions/4486234/limitation-on-mobile-cross-platform-development?rq=1)。一个简洁而详细的资源是Dodgy Coder**最近更新的文章**(2012)：[现代跨平台开发](http://www.dodgycoder.net/2012/01/modern-cross-platform-development.html)- 帮助筛选了一堆，但没有涵盖上述任何较新的作物。

最后，这个问题有一些[比较 iOS/Android - Objective C/Java 的优秀答案](https://stackoverflow.com/questions/3326110/are-there-any-huge-differences-between-objective-c-and-java-or-iphone-and-andro/3365800#3365800/)。

他们只是不断地来：[madewithmarmalade.com](http://www.madewithmarmalade.com/) ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T23:11:09.393

这是我和很多人谈过的事情。虽然我没有尝试过所有这些，但我可以（至少部分地）回答你的问题。

### 1\. 所有这些新服务是怎么回事？

所有这些新服务出现的原因是因为所有这些公司都认为我们正处于所谓的“编程革命”中，每个人都认为制作一个应用程序并发布它会很酷。然而，这些公司也知道，大多数人不想学习如何编写硬代码，因此他们创建了拖放程序，并收取用户支付给他们的钱。

### 2\. 他们是生成垃圾原生代码还是使用网络视图？

答案是：两者都不是。设计它们的公司会在您所看到的内容背后创建代码，并在构建和运行应用程序时运行这些代码。虽然看起来绝对不涉及编码，但让我告诉你，幕后的代码比你知道的要多得多。

至于中间的问题，是的，人们（比如我自己）确实使用（或曾经使用）这些程序来构建应用程序。在我看来，它们只是公司赚钱的方式，因为它们不会给你太多的“回旋余地”来了解应用程序可以做什么和不能做什么。如果您想在不编码的情况下构建应用程序，我会尝试[MIT 的 App Inventor](http://www.appinventor.mit.edu/)（以前是 Google 的 App Inventor）。它允许您在不了解大量编程的情况下进行编程，并且与大多数其他类似程序相比，您可以进行更多的自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:24:11.510

@Dave：确实有很多在线服务可以帮助您进入移动应用程序开发、创建应用程序或做一些简单的事情。当您准备好进行下一步时，我建议您花一些时间来修改每个解决方案，看看您是否可以了解不同的产品。每个都有限制，好处，缺点等。

@Cory：“在我看来，它们只是公司赚钱的方式，因为它们不会给你很多‘回旋余地’来了解应用程序可以做什么和不能做什么”有一些服务，例如我们的 (buzztouch.com) 不仅仅是“公司赚钱的方式”，它还提供 100% 的生成源代码，留有足够的“回旋余地”。我们真诚地帮助人们创建自己的 iOS 或 Android 应用程序，并为我们的系统可交付成果感到自豪 - 整个 iOS 或 Android 项目，包括源代码 ;-)

很棒的帖子和很好的评论;-)

# php - preg_match 删除 {$ ... }

> ID：11215158
> 
> 赞同：-4
> 
> 时间：2012-06-26T20:07:22.280
> 
> 标签：php, regex, preg-replace

我正在寻找一个正则表达式来 preg_replace 在大括号之间的字符串中，后跟 $ 符号以这种方式：

```
{$string} //match
{$123string} //match
{string} //no match
{$string123} //match
[$string] //no match 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:09:38.523

```
preg_replace('/{\\$(.+)}/', $replacement, $subject); 
```

这是非常基本的正则表达式，**[请阅读](http://www.regular-expressions.info)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:23:08.280

假设您有`$string` **{$Emergento}**。

如果要替换整个字符串，请使用：

```
preg_replace('/({\\$.*?})/', $sub, $string); 
```

如果要替换**$Emergento**，请使用：

```
preg_replace('/{(\\$.*?)}/', $sub, $string); 
```

如果您只想替换**Emergento**，请使用：

```
preg_replace('/{\\$(.*?)}/', $sub, $string); 
```

# r - 如何在 R 中执行 *Fast* DCT（离散余弦变换）？

> ID：11215162
> 
> 赞同：8
> 
> 时间：2012-06-26T20:07:31.533
> 
> 标签：r, fft, dct

使用 Rprof 发现 dtt 包中的 dct 是一段运行非常缓慢的 R 代码中的主要违规者。将它换成 stats 包中的 fft（这不是相同的转换，但应该花费相同的时间来计算）我的运行时间显着改善。事实上，我的 Rprof 行中有 2/3 之前是 dct 调用，而在进行切换后，大约 600 行中只有 3 行是 fft 调用。

dtt 包中的 dct 实现不是使用**快速**离散傅立叶变换完成的吗？如果是这样，是否有一个包有一个？（我知道可以将数据加倍，然后从这些 fft 系数中提取 dct 的系数，但是直接快速 dct 肯定会更好，而且真的*应该*在某个地方有一个）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T18:57:11.407

似乎没有快速 dct，但在 stats 包中有一个 fft（快速傅立叶变换），所以这里是如何使用 fft 获得快速 dct。

**使用它需要您自担风险。我没有对它进行任何认真的检查。我在几个不同大小的向量上检查了它，它给出了与 dtt 包中的函数 dct 相同的结果。**如果有人想通过将其与 dct 的输出进行比较来仔细检查我，那么请随时这样做并发布您的结果。

将向量扩展为向量的两倍，如下所示：如果向量是 v=(1,2,3)，则将条目加倍为 w=(1,2,3,3,2,1)。*注意排序。*如果您的向量是 v=(1,2,4,9)，则将条目加倍为 w=(1,2,4,9,9,4,2,1)

让 N 为您的原始向量的长度（在您将其长度加倍之前）。

那么 .5 * fft(w)/exp(complex(imaginary=pi / 2 / N)*(seq(2*N)-1)) 的前 N ​​个系数应该与计算 dct(v) 一致，除非它应该是在几乎所有情况下都显着加快。

**速度考虑**。如果你是素数 N，那么计算快速 dct 所需的时间就像为每个素因数做一个慢速 dct 所需的时间。因此，如果 N 为 2^K，它就像对长度为 2 的向量进行 K 个不同的慢速 dct 变换，所以它*真的*很快。如果 N 是素数（最坏的情况），则根本没有加速。最大的加速是在长度为 2 的幂的向量上。

**注意：上面的 R 代码看起来非常不友好，所以让我说一下是怎么回事。**以正确的方式将长度加倍后，你得到的 fft 的前 N ​​个系数*几乎*是正确的。然而，系数需要稍微调整一下。让 P 代表 e^(pi * i / 2 / N)。不理会第一个系数。将第二个系数除以 P，将第三个系数除以 P^2，将第四个系数除以 P^3，等等......然后将*所有*系数除以 2（包括第一个系数）以与 R 用于 dct 的归一化一致.

这*应该*与使用 dtt 包中的 dct 函数相同，但在几乎所有情况下都快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-16T19:07:45.870

约翰和伊戈尔的回答都是正确的，但我认为他们缺少一些示例代码。

```
library(dtt)

par(mfrow=c(3, 1), mar=c(2, 3, 1, 0.1), mgp=c(2, 0.8, 0))

set.seed(1)
N <- 60
v <- sin(seq(0, pi*2*4, l=N))/2 + 
     sin(seq(0, pi*2*7, l=N))/3 + 
     sin(seq(0, pi*2*15, l=N))/2 + 
     runif(N, -1, 1)/40 +
     runif(N, -1, 1)/40

plot(v, type="o") 
```

**DCT-I：**

```
v.dct1 <- dct(v, variant=1)

w <- c(v, v[(N - 1):2])
w.dct1 <- 0.5 * Re(fft(w)[1:N])

plot(v.dct1, type="l", col="#00000088")
abline(h=0, col="#00000044")
lines(w.dct1, col=2, lty=3, lwd=2)
legend("topright", c("dtt::dct", "fft"), bty="n", col=1:2, lwd=1)
legend("topleft", "DCT-I", bty="n") 
```

**DCT-II：**

```
v.dct2 <- dct(v, variant=2)

P <- exp(complex(imaginary=pi / 2 / N)*(seq(2*N)-1)) 

w <- c(v, v[N:1])
w.dct2 <- 0.5 * Re(fft(w)[1:N]/P)

plot(v.dct2, type="l", col="#00000088")
abline(h=0, col="#00000044")
lines(w.dct2, col=2, lty=3, lwd=2)
legend("topright", c("dtt::dct", "fft"), bty="n", col=1:2, lwd=1)
legend("topleft", "DCT-II", bty="n") 
```

[![在此处输入图像描述](../Images/f05d5535c6fe783f749665b285d1c69e.png)](https://i.stack.imgur.com/LDTGk.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-05T10:33:14.337

**免责声明：我从未使用过该`dtt`软件包，也无法将我的结果与其结果进行比较。我的回答是关于 DCT/FFT 的通用答案。**

John 的想法是正确的，但他在重复向量方面是两不误的，并且必须通过调整系数（`e^(pi * i / 2 / N)`因子）来补偿它。通过原始向量的正确扩展，FFT 可以直接产生正确的结果 (*)。引用[维基百科](http://[Wikipedia][https://en.wikipedia.org/wiki/Discrete_cosine_transform])：

" *DCT-I 与 2N-2 个具有偶数对称性的实数的 DFT 完全等价（总比例因子为 2）。例如，N=5 个实数 abcde 的 DCT-I 完全等价于八个实数 abcdedcb（偶数对称）除以 2 的 DFT。* ”

即，如果我们有一个`v = [1, 2, 3, 4, 5]`希望对其执行 DCT 的向量，我们应该构造一个新向量`w = [1, 2, 3, 4, 5, 4, 3, 2]`并对其执行 FFT。请注意， 的第一个和最后一个组件`v`仅按原始顺序出现一次`w`！

这是因为偶函数的傅里叶变换（函数关于零对称）纯粹由实数（余弦）系数组成。如果我们像约翰建议的那样`w`通过包含整个 reversed 来构造向量`v`，它将围绕 对称`-0.5`。由于这种微小的偏移，傅立叶变换也会产生虚（正弦）系数。

(*) 这里的方法产生 DCT-I。John 的方法似乎针对的是 DCT-II。

# dart - 飞镖隔离中的消息顺序

> ID：11215178
> 
> 赞同：2
> 
> 时间：2012-06-26T20:08:20.863
> 
> 标签：dart, dart-isolates

如果您在 Scala 中使用演员，您不知道消息是否按您发送它们的顺序到达，dart 中的隔离是否确保它的消息按照您发送它们的顺序被接收？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T14:20:06.410

有趣的问题。我不记得在规范中的任何地方看到过它（但我可能是错的，它可能来自规范的其他部分），但总的来说，Dart 中的消息总是被称为*enqueued*，这也意味着它们被订购。

从查看 VM 来看，情况似乎如此。实际上，有两个队列——“正常”消息和带外 (OOB) 消息。OOB 消息始终优先于普通消息，但它们目前仅用于实现镜像 API，因此无需担心。没有*优先级*的概念（除了普通/OOB 区别）。总的来说，我认为答案是***肯定**的，您接收消息的顺序与发送消息的顺序相同*。

有时，Dart 人谈论通过*网络*在隔离之间使用消息传递（这样一个隔离存在于一台计算机上，另一个隔离存在于另一台计算机上并且它们透明地通信）——一旦实现，它将成为一个伟大的再次问这个问题是有意义的（我希望答案保持不变）。

# javascript - Node/Javascript 中的 RegEx - 如何获取模式匹配边界？

> ID：11215184
> 
> 赞同：5
> 
> 时间：2012-06-26T20:09:01.147
> 
> 标签：javascript, node.js, pattern-matching, bounds

目前，我正在通过 find() 在 Javascript / Node 中使用正则表达式，它可以用于查找模式的开头。但我也希望能够找出模式的结束位置。那可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T20:24:36.677

如果您使用该[`RegExp.exec()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)方法，您可以获得所需的信息。

```
var pattern = /\d+\.?\d*|\.\d+/;
var match = pattern.exec("the number is 7.5!");

var start = match.index;
var text = match[0];
var end = start + text.length; 
```

`/\d+\.?\d*|\.\d+/`相当于`new RegExp("\\d+\\.?|\\.\\d+")`。文字语法节省了一些反斜杠。

# javascript - （语法错误）：使用 eval 时元素列表后缺少 ]

> ID：11215185
> 
> 赞同：2
> 
> 时间：2012-06-26T20:09:08.383
> 
> 标签：javascript, eval

`(SyntaxError): missing ] after element list`使用`eval`函数时出现以下错误 。返回的 JSON 非常简单，所以我不明白错误在哪里。

```
[{"title":"sfsdf","id":1}{"title":"m356","id":12}] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T20:11:44.367

作为完整性的答案。您的 JSON 无效。您需要在对象之间使用逗号，如下所示：

```
[{"title":"sfsdf","id":1},{"title":"m356","id":12}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:13:05.360

首先你丢失了 Object 之间的逗号，第二个 Jquery 将自动解析 Object。我建议你不要使用这种方法。我也遇到了这个问题，但和你的有一些不同。

# c++ - Qt LNK2019、LNK2001、LNK1120 QT 多媒体错误 [Visual Studio Express '10]

> ID：11215196
> 
> 赞同：0
> 
> 时间：2012-06-26T20:09:35.453
> 
> 标签：c++, qt, compilation, lnk2019, lnk2001

出于某种原因，每当我尝试使用示例代码时，我的编译器都拒绝合作。

我使用的示例代码来自这里：http: [//qt-project.org/doc/qt-4.8/multimedia-videowidget.html](http://qt-project.org/doc/qt-4.8/multimedia-videowidget.html)；我目前只使用了 VideoWidgetSurface 类。

据我所知，我的代码与示例的代码 100% 相同，并且我没有编码错误。

但是，编译后我收到：

```
1>moc_VideoWidgetSurface.obj : error LNK2019: unresolved external symbol "__declspec(dllimport)       
public: virtual void * __thiscall QAbstractVideoSurface::qt_metacast(char const *)" (__imp_?
qt_metacast@QAbstractVideoSurface@@UAEPAXPBD@Z) referenced in function "public: virtual void * 
__thiscall VideoWidgetSurface::qt_metacast(char const *)" (?
qt_metacast@VideoWidgetSurface@@UAEPAXPBD@Z)
1>moc_VideoWidgetSurface.obj : error LNK2019: unresolved external symbol "__declspec(dllimport)  
public: virtual int __thiscall QAbstractVideoSurface::qt_metacall(enum QMetaObject::Call,int,void * 
*)" (__imp_?qt_metacall@QAbstractVideoSurface@@UAEHW4Call@QMetaObject@@HPAPAX@Z) referenced in 
function "public: virtual int __thiscall VideoWidgetSurface::qt_metacall(enum 
QMetaObject::Call,int,void * *)"(?qt_metacall@VideoWidgetSurface@@UAEHW4Call@QMetaObject@@HPAPAX@Z) 
```

. . . .

```
1>VideoWidgetSurface.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: 
class QSize __thiscall QVideoSurfaceFormat::frameSize(void)const " (__imp_?
frameSize@QVideoSurfaceFormat@@QBE?AVQSize@@XZ) referenced in function "public: bool __thiscall 
VideoWidgetSurface::isFormatSupported(class QVideoSurfaceFormat const &,class QVideoSurfaceFormat 
*)const " (?isFormatSupported@VideoWidgetSurface@@QBE_NABVQVideoSurfaceFormat@@PAV2@@Z)
1>VideoWidgetSurface.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: 
static enum QImage::Format __cdecl QVideoFrame::imageFormatFromPixelFormat(enum 
QVideoFrame::PixelFormat)" (__imp_?imageFormatFromPixelFormat@QVideoFrame@@SA?
AW4Format@QImage@@W4PixelFormat@1@@Z) referenced in function "public: bool __thiscall 
VideoWidgetSurface::isFormatSupported(class QVideoSurfaceFormat const &,class QVideoSurfaceFormat 
*)const " (?isFormatSupported@VideoWidgetSurface@@QBE_NABVQVideoSurfaceFormat@@PAV2@@Z) 
```

. . . .

```
1>C:\Users\Owner\documents\visual studio 2010\Projects\ParticleTracker\Debug\ParticleTracker.exe : fatal error LNK1120: 30 unresolved externals 
```

[删除错误，因为有很多]

========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

我不完全明白为什么我会收到此错误。到目前为止，我在使用 Qt 时遇到的问题很少，并且已经成功运行了我的程序（在 Visual Studio '10 中，不使用 qmake）。

我仔细检查了我是否已链接到附加依赖项部分中所有可能的 .lib 文件，并且我没有遗漏任何文件。

似乎此错误仅存在于多媒体模块。我搜索了现有的多媒体 .lib 但找不到任何内容。

我尝试了以下 cmd 命令：

```
moc -I"%QTDIR%\include" -I"%QTDIR%\include\QtCore" -I"%QTDIR%\include\QtGui" -I"%QTDIR%\include\QtMultimedia" -omoc_VideoWidgetSurface.cpp VideoWidgetSurface.h 
```

但它没有工作，我仍然收到错误。

任何帮助深表感谢。如果您想查看更多我的代码或我的链接/包含，我也会分享这些。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:23:25.387

You need to link with the multimedia module. Just like you link with qtgui4.dll, qtcore4.lib, etc., you must link with qtmultimedia4.lib. That's all.

# php - 特维利奥 动词不工作

> ID：11215201
> 
> 赞同：0
> 
> 时间：2012-06-26T20:10:06.767
> 
> 标签：php, twilio

我正在尝试使用 Twilio 拨打电话号码。我在这里查看他们的示例代码：http: [//www.twilio.com/docs/api/twiml/dial](http://www.twilio.com/docs/api/twiml/dial)

当我复制并粘贴以下示例代码时，它不会调用该号码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Response>
     <Dial>901-XXX-XXXX</Dial>
     <Say>Goodbye</Say>
</Response> 
```

我把我的手机#放进去，当我打开我的网络浏览器并转到托管这个文件的 URL 时，什么也没有发生。它所做的一切都向我展示了 XML 树。我在这里错过了什么吗？脚本不是要拨打我的电话#吗？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:36:38.077

Twilio 不是魔法。在浏览器中查看 XML 文件不会调用 Twilio（即使 XML 文件包含看起来像 Twilio 命令的数据）。您需要向 Twilio 发出 API 请求以使其执行任何操作。

您可能应该看一下 Twilio 的“REST 快速入门”——它将引导您完成出站呼叫的过程。

[http://www.twilio.com/docs/quickstart/php/rest](http://www.twilio.com/docs/quickstart/php/rest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T02:44:33.413

有两种可能的解决方案。

如果您尝试从您的 Twilio 号码呼叫其他人的电话号码，您需要发出 API 请求以触发呼叫。您可以在此处找到 PHP 说明：[https](https://github.com/twilio/twilio-php#make-a-call) ://github.com/twilio/twilio-php#make-a-call 。一旦对方接听电话，Twilio 将向您指定的 URL 发出 HTTP 请求，询问有关如何处理呼叫的说明。此时，您可以指定要将呼叫连接到您自己的号码。

如果有人拨入您的 Twilio 号码，Twilio 将在来电时向您的 URL 发出 HTTP 请求。流程与上述相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-23T05:03:17.523

```
<?xml version="1.0" encoding="UTF-8"?>
<Response>
<Dial>+1901-XXX-XXXX</Dial>
<Say>Goodbye</Say>
</Response>

put +1 in font of area code. 
```

# c# - 无法加载类型“System.Web.WebPages.DisplayModeProvider”

> ID：11215206
> 
> 赞同：0
> 
> 时间：2012-06-26T20:10:21.397
> 
> 标签：c#, asp.net, asp.net-mvc

在问这个问题之前，让我先说一下我是 asp.net 和 mvc 的新手。我来自 Python、Node 和 PHP 框架。

我所有的谷歌搜索都提出了有关 DisplayModes.Modes.Insert 是一种导致问题的旧语法的信息。但我也没有在任何地方使用它。

我在 MVC 应用程序中收到此错误。该应用程序构建得很好，但只显示了这一点：

```
Could not load type 'System.Web.WebPages.DisplayModeProvider' from assembly
'System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
```

我没有在任何地方使用 DisplayModeProvider。

请让我知道需要什么其他信息来帮助我解决这个问题。我有点在黑暗中射击......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:33:29.990

[我从一篇博客文章](http://tkntips.blogspot.com/2012/05/could-not-load-type-systemwebwebpagesdi.html)中发现了一个类似的错误，解释它与 System.Web.WebPages 和 MVC 4 Developer Preview/Beta 的不同版本有关。

我建议您全新安装您正在使用的 MVC 版本，并确保您的项目中的所有 .dll 版本都是正确的。尽管您没有在任何地方调用 DisplayModes，但这并不意味着您的项目中没有另一个依赖项（.dll 引用）。

# rest - 如何以编程方式下载公共 Google Drive 文件？

> ID：11215210
> 
> 赞同：15
> 
> 时间：2012-06-26T20:10:29.657
> 
> 标签：rest, google-api, download, google-drive-api, file-sharing

我有一个后端服务器，它必须在 Google Drive 上下载一个由所有者共享给公众的文件。我们的客户通过电子邮件将链接发送给我们，我们从电子邮件中获取链接——不涉及 UI。程序需要获取或下载文件并离线处理。

google 示例似乎是使用 UI 运行的，因为这是一个自动化的后端进程。此外，此应用程序将在我的服务器上运行，而不是在 Google App Engine 上运行。如果我所做的只是访问所有者共享给公众的文件，我还需要注册我的应用程序吗？

作为参考，请注意下载 /wget 在 Dropbox 上共享的文件很简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T06:02:41.967

这是一个较老的问题（并且已经有一个公认的答案），但谷歌刚刚宣布了一种解决这个问题的新方法，这使得它更容易解决；基本上，您现在（截至 2012 年 11 月 28 日）可以创建一个文件夹并将该文件夹设置为公开，然后可以通过 HTTP GET 下载文件夹中的任何文件，而无需获取中间页面（无论文件大小如何） ）。细节：

[http://googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html](http://googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:13:41.523

如果您知道链接并且文件是公开的，则不需要任何 Google SDK。只需使用标准的 HTTP GET 方法下载文件。

# c++ - 如何让矢量数据指向数组

> ID：11215225
> 
> 赞同：0
> 
> 时间：2012-06-26T20:11:11.123
> 
> 标签：c++, vector, c++builder

我正在构建一个 C++ 类，它包装了一个用于数据库访问的 C 风格 api。它的层次结构，其中每条测量线都包含许多数据通道。每个通道都作为一个包含许多点的数组进行存储和传递。我想在我的类中使用向量，但是 api 给了我一个指向内存中数组的指针，然后手动将数据复制到我的向量中，然后在处理后再次复制出来是没有意义的。

是否有另一个类或向量的后代能够接受指向数据的指针？我曾短暂考虑过编写自己的向量类，但我是 C++ 的菜鸟，看了向量模板后我被吓到了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:52:51.497

将我的评论以“答案”形式...

由于复制数组不是选项，因此 a`vector`可能不是您想要的。如果您只想使用标准算法，您可以只使用原始数组指针作为参数，因为它们也是迭代器，例如：

```
#include <algorithm>
#include <iostream>
#include <iterator>

int main()
{
  int a[] = { 2, -1, 7, 6 };

  int * const begin = a;
  int * const end   = a + sizeof(a) / sizeof(a[0]);

  std::sort(begin, end);
  std::copy(begin, end, std::ostream_iterator<int>(std::cout, "\n"));
} 
```

结果如下：

```
$ g++ foo.cpp ; ./a.out 
-1
2
6
7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:08:25.650

将数组分配给向量并不难。它确实需要复制，但这是`std::vector<>`. 这样的事情可能符合要求；

```
using namespace std;

void WriteInt (int i) { cout << " " << i; }

int _tmain(int argc, _TCHAR* argv[])
{
    int myInts[] = { 1, 2, 3, 4, 5 };
    vector<int> myVectorOfInts(5);
    myVectorOfInts.assign(&myInts[0], &myInts[5]);
    for_each(myVectorOfInts.begin(), myVectorOfInts.end(), WriteInt);

    getchar();
    return 0;
} 
```

在您的情况下，将指针数组复制到向量中非常快，因为指针仅占用一个内存位置。如果您要复制复杂的对象，那将是另一回事...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T14:11:35.747

这看起来像是您问题的答案；[https://stackoverflow.com/a/15141661/1546600](https://stackoverflow.com/a/15141661/1546600) 您可以创建一个空向量并为其分配一个现有数组。

# c++ - 尾随返回类型语法样式是否应该成为新 C++11 程序的默认值？

> ID：11215227
> 
> 赞同：101
> 
> 时间：2012-06-26T20:11:23.137
> 
> 标签：c++, c++11, auto, trailing-return-type

C++11 支持一种新的函数语法：

```
auto func_name(int x, int y) -> int; 
```

目前这个函数将被声明为：

```
int func_name(int x, int y); 
```

新风格似乎还没有被广泛采用（比如在 gcc stl 中）

然而，这种新风格应该在新的 C++11 程序中无处不在，还是只在需要时使用？

就个人而言，如果可能的话，我更喜欢旧风格，但是混合风格的代码库看起来很丑。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-06-26T20:28:01.470

在某些情况下，您必须使用尾随返回类型。最值得注意的是，如果指定了 lambda 返回类型，则必须通过尾随返回类型指定。此外，如果您的返回类型使用`decltype`要求参数名称在范围内的 a，则必须使用尾随返回类型（但是，通常可以使用`declval<T>`来解决后一个问题）。

尾随返回类型确实有一些其他的小优势。例如，考虑使用传统函数语法的非内联成员函数定义：

```
struct my_awesome_type
{
    typedef std::vector<int> integer_sequence;

    integer_sequence get_integers() const;
}; 

my_awesome_type::integer_sequence my_awesome_type::get_integers() const
{
    // ...
} 
```

成员 typedef 直到类名出现之前才在范围内`::get_integers`，因此我们必须重复两次类限定。如果我们使用尾随返回类型，我们不需要重复类型的名称：

```
auto my_awesome_type::get_integers() const -> integer_sequence
{
    // ...
} 
```

在这个例子中，这没什么大不了的，但是如果你有很长的类名或类模板的成员函数没有内联定义，那么它可以在可读性上产生很大的不同。

Alisdair Meredith 在 C++Now 2012的[“Fresh Paint”](http://www.youtube.com/watch?v=ourmFvidEpk&feature=plcp)会议中指出，如果您始终使用尾随返回类型，则所有函数的名称都会整齐排列：

```
auto foo() -> int;
auto bar() -> really_long_typedef_name; 
```

我在[CxxReflect](https://github.com/dbremner/cxxreflect/)的任何地方都使用了尾随返回类型，因此，如果您正在寻找代码如何始终如一地使用它们的示例，您可以查看那里（例如，[class `type`）](https://github.com/dbremner/cxxreflect/blob/master/cxxreflect/reflection/type.hpp)。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-27T21:44:39.610

除了其他人说的，尾随返回类型还允许使用`this`，否则不允许

```
struct A {
  std::vector<int> a;

  // OK, works as expected
  auto begin() const -> decltype(a.begin()) { return a.begin(); }

  // FAIL, does not work: "decltype(a.end())" will be "iterator", but 
  // the return statement returns "const_iterator"
  decltype(a.end()) end() const { return a.end(); }
}; 
```

在第二个声明中，我们使用了传统样式。但是，由于`this`在该位置不允许使用，因此编译器不会隐式使用它。因此，`a.end()`使用静态声明的类型`a`来确定将要调用`end`的重载类型`vector<int>`，最终成为非常量版本。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-01-12T15:05:49.893

另一个优点是，当函数返回指向函数的指针时，尾随返回类型语法更具可读性。例如，比较

```
void (*get_func_on(int i))(int); 
```

和

```
auto get_func_on(int i) -> void (*)(int); 
```

但是，有人可以争辩说，只需为函数指针引入一个类型别名就可以实现更好的可读性：

```
using FuncPtr = void (*)(int);
FuncPtr get_func_on(int i); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-06-26T20:38:24.063

请参阅这篇不错的文章：[http](http://www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html) : //www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html 在游戏中使用此语法而不使用 decltype 的非常好的示例：

```
class Person
{
public:
    enum PersonType { ADULT, CHILD, SENIOR };
    void setPersonType (PersonType person_type);
    PersonType getPersonType ();
private:
    PersonType _person_type;
};

auto Person::getPersonType () -> PersonType
{
    return _person_type;
} 
```

并且从 Alex Alllain 的文章“因为返回值在函数的末尾，而不是在它之前，你不需要添加类范围”中也有精彩的解释。

与这种意外忘记类范围的可能情况相比，并且为了更大的灾难，在全局范围内定义了另一个 PersonType：

```
typedef float PersonType; // just for even more trouble
/*missing: Person::*/
PersonType Person::getPersonType ()
{
    return _person_type;
} 
```

# java - 什么 Java 库可以从远程 URL 检索数据，同时处理各种内容编码？

> ID：11215231
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:11:24.490
> 
> 标签：java, http

我已经推出了自己的代码来使用 HttpURLConnection 从远程 URL 检索数据。首先，我必须编写自定义代码来处理 gzip 压缩的内容编码，现在我遇到了使用分块传输编码提供 RSS 提要的 Web 服务器。我发现自己重新实现了一堆我确定已经完成的东西。

我确信有一些库可以自动处理从 Web 服务器返回数据的各种方式，并且只给我一个 InputStream，有人可以推荐一个（必须是 LGPL 或类似许可证）吗？

理想情况下，我正在寻找一个当前维护并具有现代精心设计的 API 的库。

在某些情况下，我不会提前知道将返回的 Content-type，因此可能需要根据此以不同方式处理返回的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:15:00.837

我知道 Apache Commons HttpComponents 从 4.1+ 开始支持 Content-Encoding（请参阅[此处](https://stackoverflow.com/a/6941704/47773)），使用[`ContentEncodingHttpClient`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/ContentEncodingHttpClient.html). [`DecompressingHttpClient`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DecompressingHttpClient.html)也应该适用于 4.2+（它们与缓存的行为略有不同）。

就像millimoose说的，它可能没有一切。但我认为这将是一个更好的起点。

# google-api - 来自命令行的 Google API Auth（用于 Google Predict）

> ID：11215234
> 
> 赞同：1
> 
> 时间：2012-06-26T20:11:25.580
> 
> 标签：google-api, google-prediction

我正在尝试按照本指南从命令行使用 Google Predict：http: [//thoughts.inphina.com/2010/10/17/getting-started-with-google-prediction-api-machine-learning- on-cloud/](http://thoughts.inphina.com/2010/10/17/getting-started-with-google-prediction-api-machine-learning-on-cloud/) 不幸的是，我无法使用以下命令通过身份验证：

1) 将返回 SID、LSID、Auth 令牌 - 最后一个将用于 2)

```
curl -X POST \
  -d accountType=HOSTED_OR_GOOGLE \
  -d Email=<mail> \
  --data-urlencode Passwd=<password> \
  -d service=xapi \
  -d source=account \
  -H "Content-Type:application/x-www-form-urlencoded" \
  https://www.google.com/accounts/ClientLogin 
```

2）试图触发训练，会给我一个 401 响应。

```
curl -X POST \
    -H "Content-Type:application/json" \
    -H "Authorization: GoogleLogin auth=<auth-token>" \
    -d "{\"data\":{}}" \
    https://www.googleapis.com/prediction/v1.5/training?data=<bucket>%2F<file> 
```

有什么建议么？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:19:23.217

[事实证明，使用OACurl](http://code.google.com/p/oacurl/)更容易，这里也有更好的文档[记录](https://developers.google.com/prediction/docs/libraries)。

干杯。

# .net - 更新从代码提供参数的列

> ID：11215239
> 
> 赞同：0
> 
> 时间：2012-06-26T20:11:51.483
> 
> 标签：.net, sql, tsql, stored-procedures

我将从 .NET 执行更新存储过程。我想要 T-SQL 中的以下逻辑，但是我似乎无法找出如何做到这一点。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE sp_UpdateTable

    @TableID int,
    @StartTime1 datetime,
    @EndTime1 datetime

AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Table]
       SET [StartTime1] = WAS_PASSED_FROM_CODE(@StartTime1, @StartTime1, [StartTime1])
          ,[EndTime1]   = WAS_PASSED_FROM_CODE(@EndTime1,   @EndTime1,   [EndTime1])
    WHERE TableID = @TableID
END
GO 
```

好的，所以我基本上要寻找的是一种确定参数是否是从代码中指定的方法，（因此 WAS_PASSED_FROM_CODE）如果参数是从代码中指定的，则将该列更新为指定的值，否则，保持不变（更新为现有值）。

这可能吗？

请注意，在这种情况下，代码传递 NULL 是有效的，在这种情况下，列应该更新为 NULL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:20:59.723

将您的参数设为默认值`NULL`，然后使用`ISNULL`. 如果未指定参数，它将是`NULL`

编辑：鉴于 NULL 是一个有效值，添加两个附加参数来标记是否指定了日期参数。

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE sp_UpdateTable

    @TableID int,
    @StartTime1 datetime,
    @StartTime1Specified BIT,
    @EndTime1 datetime,
    @EndTime1Specified BIT

AS
BEGIN
    SET NOCOUNT ON;

    UPDATE [Table]
       SET [StartTime1] = (CASE WHEN @StartTime1Specified = 1 THEN @StartTime1 ELSE [StartTime1] END)
          ,[EndTime1]   = (CASE WHEN @EndTime1Specified = 1 THEN @EndTime1 ELSE [EndTime1])
    WHERE TableID = @TableID
END
GO 
```

# c# - 处理订阅时访问当前窗口

> ID：11215240
> 
> 赞同：0
> 
> 时间：2012-06-26T20:12:24.560
> 
> 标签：c#, system.reactive

我有以下代码：

```
var observable = ... subscribe to event here ...

var windows = observable.Window(TimeSpan.FromSeconds(240));

aggregatedWindows = windows.SelectMany(
    window => window.Aggregate(new Context(), AggregateContext));

subscription = aggregatedWindows.Subscribe(OnWindow);

... later

subscription.Dispose(); 
```

想象一个场景，当我正在处理一个窗口并且有人要求我的应用程序应该关闭时。我将处理此订阅，这将停止正在处理的事件，但是我也将丢失最后一个信息窗口。

我不确定解决这个问题的最佳方法是什么......

我可以将本地状态与最后看到的窗口一起存储，因为它通过聚合函数传递（但这似乎是错误的）......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:11:58.720

您可以对窗口进行操作，而不是保留聚合的订阅 - 这是您主要希望保持连接以使最后一个窗口到达的内容，并使用超时断开连接，以防分区时间过长。

这里使用了一个单独的类，因为 using`Create`使它成为 Auto Detach - 在进行 dispose 调用后立即断开观察者的连接。所以从根本上说，Dispose 的含义就是这里发生了变化。

```
 public static IObservable<T> DeferDisconnection<T>(this IObservable<T> observable, TimeSpan timeout)
    {
        return new ClosingObservable<T>(observable, timeout);
    }

    public class ClosingObservable<T> : IObservable<T>
    {

        private readonly IConnectableObservable<T> Source;
        private readonly IDisposable Subscription;
        private readonly TimeSpan Timeout;

        public ClosingObservable(IObservable<T> observable, TimeSpan timeout)
        {
            Timeout = timeout;
            Source = observable.Publish();
            Subscription = Source.Connect();
        }

        public IDisposable Subscribe(IObserver<T> observer)
        {
            Source.Subscribe(observer);

            return Disposable.Create(() => Source.Select(_ => new Unit())
                                                 .Amb(Observable.Timer(Timeout).Select(_ => new Unit()))
                                                 .Subscribe(_ => Subscription.Dispose())
                                                 );
        }
    } 
```

测试：

```
 var disposable =
            Observable.Interval(TimeSpan.FromSeconds(2))
                      .Do(Console.WriteLine)
                      .DeferDisconnection(TimeSpan.FromSeconds(5))
                      .Subscribe();

            Console.ReadLine();

            disposable.Dispose();

            Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T22:40:26.563

这是有效的，正如最后显示的部分窗口所证实的那样。

```
class Program
{
    public class Context
    {
        public int count;
    }

    static Context AggregateContext(Context c, long i)
    {
        c.count++;
        return c;
    }

    static void OnWindow(Context c) { Console.WriteLine(c.count); }

    static void Main(string[] args)
    {
        var canceled = new Subject<bool>();

        var observable = Observable.Interval(TimeSpan.FromSeconds(.1)).TakeUntil(canceled);

        var windows = observable.Window(TimeSpan.FromSeconds(3));

        var aggregatedWindows = windows.SelectMany(
            window => window.Aggregate(new Context(), AggregateContext));

        var subscription = aggregatedWindows.Subscribe(OnWindow);

        Thread.Sleep(TimeSpan.FromSeconds(10));

        canceled.OnNext(true);
        subscription.Dispose();

        Console.WriteLine( @"Output should have been something like 30,30,30,30,10" );
        Console.ReadLine();
    }
} 
```

# php - PHP 中 ArrayObject 的错误声明

> ID：11215244
> 
> 赞同：0
> 
> 时间：2012-06-26T20:12:55.297
> 
> 标签：php, object, declaration, arrayobject

我是 PHP 声明的新手，我不明白如何在 ArrayObject 中有一个数组。以下代码正在运行（回显正常），但我有一些“SCREAM：忽略错误抑制”，因为“警告：在第 11 行从空值创建默认对象”和“警告：从空值创建默认对象” ...在第 13 行"

我愿意 ：

```
$model = new stdClass();
$model->name = new stdClass();
$model->image = new ArrayObject();
$model->image->url = new stdClass();
$model->image->copyright = new stdClass();
$model->image->total = new stdClass();

$model->name = "France";
echo "Name : ".$model->name."<hr/>";
$model->image[0]->url = "/model1.jpg";
$model->image[0]->copyright = "Bellami";
$model->image[1]->url = "/model2.jpg";
$model->image[1]->copyright = "Bellami";
$model->image->total=2;

echo "Image 1 : ".$model->image[0]->copyright." - ".$model->image[0]->url."<hr/>";
echo "Image 2 : ".$model->image[1]->copyright." - ".$model->image[1]->url."<hr/>"; 
```

在我的情况下必须如何声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:20:39.880

这对我有用，但我怀疑有更好的方法：

```
$model = new stdClass();
$model->name = new stdClass();
$model->image = new ArrayObject();
$model->image->offsetSet( 0, new ArrayObject());
$model->image->offsetSet( 1, new ArrayObject());

$model->name = "France";
echo "Name : ".$model->name."<hr/>";
$model->image[0]->offsetSet( 'url', "/model1.jpg");
$model->image[0]->offsetSet( 'copyright', "Bellami");
$model->image[1]->offsetSet( 'url', "/model2.jpg");
$model->image[1]->offsetSet( 'copyright', "Bellami");
$model->image->total=2;

echo "Image 1 : ".$model->image[0]->offsetGet('copyright')." - ".$model->image[0]->offsetGet('url')."<hr/>";
echo "Image 2 : ".$model->image[1]->offsetGet('copyright')." - ".$model->image[1]->offsetGet('url')."<hr/>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:24:24.777

为什么你需要声明对象，它是隐式定义的......这会给你自己需要的东西吗？

```
$model->image[0]->url = "/model1.jpg"; 
$model->image[0]->copyright = "Bellami"; 
$model->image[1]->url = "/model2.jpg"; 
$model->image[1]->copyright = "Bellami"; 

var_dump($model); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:33:57.187

`$model->image[0]`从来没有被创造出来，而是像一个对象一样被说出来。这有效：

```
$model->image[0] = new ArrayObject();
$model->image[0]->url = "/model1.jpg";
$model->image[0]->copyright = "Bellami";
$model->image[1] = new ArrayObject();
$model->image[1]->url = "/model2.jpg";
$model->image[1]->copyright = "Bellami"; 
```

# mercurial - 由于 .hgtags 未合并到默认值中，有哪些潜在问题？

> ID：11215245
> 
> 赞同：1
> 
> 时间：2012-06-26T20:13:00.293
> 
> 标签：mercurial, tortoisehg

我在分支中创建了一个标签。然后我将分支合并到我的默认分支，但是在添加标签的修订版中（不是添加标签本身的变更集的位置）。这意味着，我没有将 .hgtags 文件合并为默认值。然后我关闭了添加标签的分支（.hgtags 文件未提交）。最近，我从阅读中意识到这可能是有问题的，但是，我不清楚将来可能会因此出现什么问题。有人可以帮我理解这一点吗？希望也能解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:45:31.190

标签是每个头部文件的合并`.hgtags`，所以应该没有问题。

这是一个例子：

```
@  Rev5 - tip - Added tag bar for changeset b67ebc858f17
|
o  Rev4 -  - 3
|
| o  Rev3 -  - Closed.
| |
| o  Rev2 -  - Added tag foo for changeset b67ebc858f17
| |
o |  Rev1 - bar foo - 2
|/
o  Rev0 -  - 1 
```

Rev1`foo`在另一个分支上被 Rev2 标记，然后关闭。`foo`和标签`bar`仍然存在。`.hgtags`两个分支上都不存在该版本的两个标签。

# windows - 如何在需要特定文件名的 CLI 工具的批处理脚本中使用通配符？

> ID：11215246
> 
> 赞同：4
> 
> 时间：2012-06-26T20:13:10.153
> 
> 标签：windows, file, batch-file, command-line-interface

我有一个不喜欢使用通配符的 cli 应用程序。在本例中使用`*.dat`. 我只是收到文件`*.dat`无效的错误。

我有一个文件夹，其中包含数千个需要此工具处理的文件。所以手动操作是不行的。我遇到了很多有这个问题的应用程序，但这次它相当重要。如何处理这些应用程序的通用解决方案将非常好。

我可以制作所有`*.dat`文件的文件列表并将其提供给应用程序吗？我没有必要使用批处理脚本，但它似乎是迄今为止最简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:15:04.363

您可以使用`for`循环：

```
for %%x in (*.dat) do mycommand "%%x" 
```

这将为每个文件启动一次命令。如果你想聚合它们，你必须做更多的工作：

```
setlocal enabledelayedexpansion
set Count=0
set List=
for %%x in (*.dat) do (
  set List=!List! "%%x"
  set /a Count+=1
  if !Count! GEQ 50 (
    mycommand !List!
    set List=
    set Count=0
  )
) 
```

这将一次将 50 个文件传递给命令。如果需要，您可以调整该数字。问题是如果文件夹中有数千个文件，那么您不能简单地在一个命令行中将它们全部列出（因为存在最大命令行长度限制），因此您必须分块处理它们。

# javascript - 未捕获的类型错误：无法读取未定义的属性“类名”

> ID：11215258
> 
> 赞同：25
> 
> 时间：2012-06-26T20:14:09.137
> 
> 标签：javascript, css, google-chrome, datatables, html-table

Google Chrome 的开发者工具中出现以下错误：

> 未捕获的类型错误：无法读取未定义的属性“类名”

引发错误的代码是：

```
var oTable = $('#resultstable').dataTable({
                            "bAutoWidth" : true,
                            "iDisplayLength" : 10,
                            "bFilter" : false,
                            "bLengthChange" : false
                        }); 
```

resultstable 是 html 中表的 id：

```
<table cellpadding="0" cellspacing="0" border="0" id="resultstable"
                    name="resultstable" class="display datatable"> 
```

奇怪的是，在 table 标记之后有一个 if 语句。该表运行得非常好，并且当程序被发送到 else`if{}`部分时，CSS 正确显示，但它抛出了上述错误，并且当它在该`if{}`部分中时没有应用 CSS。

请帮忙！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-20T20:24:26.093

另一个答案让我走上了正轨。

更简洁地说，错误是我创建的表不正确。

我的标题列（当然是在头内）与我的行列（在 tbody 内）不匹配

在我的情况下，标题内的列太多。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-03T17:34:58.957

另一个可能的原因是，如果您在“aoColumnDefs”属性中列出的列多于表中的“td”元素。

```
var yourTable = $('#product-search-results-table').dataTable({
    // If you only have three columns in the HTML table, then this line will cause an error, because it lists four columns in "aoColumnDefs".
    "aoColumnDefs": [{ "bSortable": false, "aTargets": [0, 1, 2, 3] }]
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-28T17:01:04.423

Datatables 要求您的 html 表是完美的。我发现当我没有等量的`<th>`and时我得到了这个错误`<td>`。确保您没有额外的标题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-09T14:20:03.140

在我的特定情况下，我将 aTargets 属性设置为我的元素边界之外的数组索引。

```
$('.datatable').dataTable({
  aoColumnDefs: [
    {
      bSortable: false,
      aTargets: [0, 6]
    }
  ],
  aaSorting: []
}); 
```

这设置有 7 个 td 列，但只有 6 个。将其更改为以下更正：

```
$('.datatable').dataTable({
  aoColumnDefs: [
    {
      bSortable: false,
      aTargets: [0, 5]
    }
  ],
  aaSorting: []
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T18:06:05.833

我遇到了与您现在遇到的相同的错误。我曾经在使用 Chosen 库时遇到过类似的错误。问题是（在选择的情况下）使用了带有`[]`字符的 ID，从而混淆了 css 选择器和 id 之间的 Javascript（请记住，在 CSS 中我们可以`[]`用来指定属性）。

然而，在 DataTables 的情况下，我注意到 DataTables 脚本本身`class = " "`在`tbody`.

这是因为 php 的 HTML 输出存在逻辑错误。故障代码：

```
<?php
for ($currentRow = 0 ; $currentRow <= $query_length; $currentRow++) {
        ?>
        <tr>
        <?php
        list($job_id, $company_id, $job_title, $industry_id, $profession_int, $job_openings, $job_city, $job_salary_start, $job_end_date, $job_start_date, $job_skills, $company_name, $isConfidential, $job_experience_level) = dbRow($query_results, $currentRow);
      echo "<td class = \"detailed-job-row\">" . $job_title . "</td>";
      echo "<td class = \"detailed-job-row\">" . $company_name . "</td>";
      echo "<td class = \"detailed-job-row\">" . $industry_id . "</td>";
      echo "<td class = \"detailed-job-row\">" . $profession_int . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_openings . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_city . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_salary_start . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_end_date . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_start_date . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_skills . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_experience_level . "</td>";
      ?>
        </tr>
        <?php  
     } ?>
    </tbody>
  </table>
<?php
}
?> 
```

long, long 表的底部有一个错误，表明 postgres 无法跳转到第 208 行。这告诉我我需要在`i - 1`, 或处停止循环`$currentRow - 1`。

因此，固定的工作代码：

```
<?php
for ($currentRow = 0 ; $currentRow <= $query_length - 1; $currentRow++) {
        ?>
        <tr>
        <?php
        list($job_id, $company_id, $job_title, $industry_id, $profession_int, $job_openings, $job_city, $job_salary_start, $job_end_date, $job_start_date, $job_skills, $company_name, $isConfidential, $job_experience_level) = dbRow($query_results, $currentRow);
      echo "<td class = \"detailed-job-row\">" . $job_title . "</td>";
      echo "<td class = \"detailed-job-row\">" . $company_name . "</td>";
      echo "<td class = \"detailed-job-row\">" . $industry_id . "</td>";
      echo "<td class = \"detailed-job-row\">" . $profession_int . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_openings . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_city . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_salary_start . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_end_date . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_start_date . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_skills . "</td>";
      echo "<td class = \"detailed-job-row\">" . $job_experience_level . "</td>";
      ?>
        </tr>
        <?php  
     } ?>
    </tbody>
  </table>
<?php
}
?> 
```

执行此更改允许 DataTables 正确执行。

因此，尽管我无法提供可行的解决方案，但我建议您查看您的 html 标记，因为这可能是您的问题的根源（例如，您的表格是否有`tbody`？）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T23:53:57.903

遇到了类似的问题。根本情况是，当 dataTable 即将控制表时，我们的代码也试图同时操作表的属性。错误消息并没有这么说，但是，一旦表由 dataTable 单独管理，问题就消失了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-21T07:55:33.257

它抛出这个错误是因为当 dom 第一次加载你在声明之前使用的。

对于这个错误，我有一个解决方案写在下面：

如果条件特定元素不是未定义的，您可以添加，如下所示

```
if(document.getElementsByTagName('button') !== undefined){
  // and write your needed code here
} 
```

# html - 在较小的容器中垂直对齐图像

> ID：11215260
> 
> 赞同：2
> 
> 时间：2012-06-26T20:14:22.210
> 
> 标签：html, css

好的，这是我的问题。我有一个 348px 宽的块，在右侧 144px 上，我想将图像垂直居中。容易，对吧？我的问题是我不知道图像或块的高度。如何将图像垂直居中以越过容器顶部而不使其成为背景图像？

```
CSS
#block { width: 348px; position: relative; }
#content { width: 164px; padding: 20px; margin-right: 144px; }
#image { width: 144px; position: absolute; right: 0; }

MARKUP
<div id="block">
    <div id="image"><img url="imageurl" /></div>
    <div id="content">Some content goes here.</div>
</div> 
```

我不知道这会有多大帮助，但希望它会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:17:39.093

**仅使用 CSS 的解决方案**，基于您当前的 HTML 标记并由您的标签指出，可以这样完成：

请参阅这个[工作小提琴](http://jsfiddle.net/zuul/8w7Gx/)示例！

![在此处输入图像描述](../Images/bae4a558beb6b6f71552a168325d5934.png)

**HTML**

```
<div id="block">
    <div id="content">Some content goes here.</div>
    <div id="image">
        <img src="path_to_image" />
    </div>
</div> 
```

**CSS**

```
#block {
    width: 348px;
    display: table;         /* set the main wrapper to display as a table */
}
#content {
    width: 164px;
    padding: 20px;
}
#image {
    width: 144px;
    display: table-cell;    /* set the inner wrapper to display as a cell */
    vertical-align: middle; /* tell to vertically align the contents */
} 
```

有必要删除一些`position`与正在使用的技术冲突的 css 声明。但是你可以在没有它们的情况下实现完全相同的布局，从而允许 CSS`vertical-align:middle`按预期工作。

* * *

**一个标记的 jQuery 解决方案**，无需删除任何现有的 CSS 声明并实现完全相同的目标：

请参阅这个[工作小提琴](http://jsfiddle.net/zuul/HNVGU/)示例！

![在此处输入图像描述](../Images/3a21b82e1c24999febdba3463a2cc635.png)

**jQuery**

进入`img`内部`#image`并收集它的高度，将其除以 2 并使用结果值对其应用负边距。

```
$(function() {
  var $target = $('#image').find('img');

  $target.css({
    "margin-top" : "-" + ($target.height()/2) + "px" // adjust the top margin
  });
}); 
```

**CSS**

```
#block {
    width: 348px;
    position: relative;
}
#content {
    width: 164px;
    padding: 20px;
    margin-right: 144px;
}
#image {
    width: 144px;
    position: absolute;
    right: 0;
    top: 0;              /* fit to the top */
    bottom: 0;           /* fit to the bottom */
    /*overflow:hidden;*/ /* optional if the img is bigger that this container */
}
#image img {
    position: absolute;  /* remove element from the document flow */
    top: 50%;            /* move it down by 50% of its parent height */
} 
```

**HTML**

```
<div id="block">
    <div id="image">
        <img src="path_to_image" />
    </div>
    <div id="content">Some content goes here.</div>
</div> 
```

您当前的标记被保留，并添加了一些额外的 CSS 以使其工作。让 jQuery 部分尽可能简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:21:13.120

您绝对可以将图像定位在容器内，或者如果这在您的情况下不起作用，则必须使用 javascript 来获取容器的高度和图像的高度并以这种方式定位图像。

通过 CSS 设置：

在您的容器元素上设置“位置：相对”样式。然后，将图像上的样式设置为“position:absolute; top:50%;”。您可能还需要为容器添加高度。

# java - 为什么 ServerSocket.accept() 不能工作？

> ID：11215264
> 
> 赞同：0
> 
> 时间：2012-06-26T20:14:45.473
> 
> 标签：java, sockets, serversocket

在我问这个问题之前，我要道歉，因为我不知道这里出了什么问题，所以我只是提前说这可能会让人头疼。

```
public void setUp(){
    try {
        port = Integer.parseInt(JOptionPane.showInputDialog("Enter the port to host server on"));
        server = new ServerSocket(port);
        System.out.println(server.getLocalPort());
        connection = server.accept();
        out = new PrintWriter(connection.getOutputStream());
        in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        connected = true;
        loop();
    } catch (Exception e) {
        connected = false;
        System.err.println(e.getMessage());
        JOptionPane.showMessageDialog(null, "Something went wrong there, be sure to use syntax:\nport: 1337\nMaybe the selected port is in use?");
        System.exit(-1);
    }
} 
```

上面的代码应该可以让我建立一个任何客户端都可以连接的基本服务器，我认为客户端代码目前不相关，但如果需要，请询问。

无论如何，我的问题是，当我调用此方法时，它运行良好，直到命中

```
connection = server.accept(); 
```

然后这个方法就结束了，就好像我输入了return一样；！

谁能告诉我为什么会发生这种情况以及如何解决？

另请注意

port = 端口服务器的整数 = ServerSocket 连接 = Socket out = PrintWriter in = BufferedReader connected = boolean

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:27:21.793

也许它看起来只是结束了，因为它`connection = server.accept();`会让线程等到客户端连接。

# php - 你能通过 $_SERVER['PHP_SELF']; 的表单获取一个 PHP 文件吗？行动？

> ID：11215267
> 
> 赞同：1
> 
> 时间：2012-06-26T20:15:00.763
> 
> 标签：php, forms, file-upload, email-attachments

我有一个电子邮件附件表单，当它`<form action="processingtheformfile.php">`被发送到另一个 PHP 文件进行处理时工作正常。

但是，当我尝试将相同的想法实现为简单的表单`<form action="<?php echo $_SERVER['PHP_SELF']; ?>">`然后使用

```
if(isset($_POST['submit'])) {
$tmp_name = $_FILES['filename']['tmp_name'];
$type = $_FILES['filename']['type'];
$name = $_FILES['filename']['name'];
$size = $_FILES['filename']['size']; 
```

`noname.txt`在文件的 HTML 之前，无论文件类型如何，附件最终都是每次。

这是因为`$_FILES`无法对某个`<?php echo $_SERVER['PHP_SELF']; ?>`动作起作用，还是我应该在别处寻找我的困境？

祈祷这是有道理的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:18:50.417

用于上传文件的表单需要`enctype="multipart/form-data"`使其正常工作。这是一个例子：

```
<form method="POST" enctype="multipart/form-data" action=""> 
```

尽管您报告第一种形式可以正常工作，但我不确定它在所有情况下都能可靠地工作。确保它具有此值，`enctype`以便它可以正常工作。

# sql - 给定时间间隔内的聚合函数

> ID：11215272
> 
> 赞同：8
> 
> 时间：2012-06-26T20:15:05.910
> 
> 标签：sql, oracle, oracle10g, aggregate

我的 SQL 有点生疏，我在解决这个问题时遇到了很多困难。假设我有一个包含 Timestamp 列和 Number 列的表。目标是返回一个包含某个任意选择的定期间隔的平均值的结果集。

因此，例如，如果我有以下初始数据，则间隔 5 分钟的结果输出如下：

```
time                               value
-------------------------------    -----
06-JUN-12 12.40.00.000000000 PM      2
06-JUN-12 12.41.35.000000000 PM      3
06-JUN-12 12.43.22.000000000 PM      4
06-JUN-12 12.47.55.000000000 PM      5
06-JUN-12 12.52.00.000000000 PM      2
06-JUN-12 12.54.59.000000000 PM      3
06-JUN-12 12.56.01.000000000 PM      4

OUTPUT:

start_time                         avg_value
-------------------------------    ---------
06-JUN-12 12.40.00.000000000 PM      3
06-JUN-12 12.45.00.000000000 PM      5
06-JUN-12 12.50.00.000000000 PM      2.5
06-JUN-12 12.55.00.000000000 PM      4 
```

请注意，这是一个 Oracle 数据库，因此特定于 Oracle 的解决方案可以正常工作。当然，这可以通过存储过程来完成，但我希望在单个查询中完成任务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T20:35:04.693

```
CREATE TABLE tt (time TIMESTAMP, value NUMBER);

INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.40.00.000000000 PM', 2);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.41.35.000000000 PM', 3);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.43.22.000000000 PM', 4);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.47.55.000000000 PM', 5);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.52.00.000000000 PM', 2);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.54.59.000000000 PM', 3);
INSERT INTO tt (time, value) VALUES ('06-JUN-12 12.56.01.000000000 PM', 4);

WITH tmin AS (
    SELECT MIN(time) t FROM tt
),   tmax AS (
    SELECT MAX(time) t FROM tt
)
SELECT ranges.inf, ranges.sup, AVG(tt.value)
FROM
     (
        SELECT 
            5*(level-1)*(1/24/60) + tmin.t as inf,
            5*(level)*(1/24/60) + tmin.t as sup
        FROM tmin, tmax
        CONNECT BY (5*(level-1)*(1/24/60) + tmin.t) < tmax.t
    ) ranges JOIN tt ON tt.time BETWEEN ranges.inf AND ranges.sup
GROUP BY ranges.inf, ranges.sup
ORDER BY ranges.inf 
```

小提琴：[http ://sqlfiddle.com/#!4/9e314/11](http://sqlfiddle.com/#!4/9e314/11)

编辑：像往常一样被贾斯汀打败...... :-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T20:27:47.600

就像是

```
with st 
  as (SELECT to_timestamp( '2012-06-06 12:40:00', 'yyyy-mm-dd hh24:mi:ss') + 
               numtodsinterval((level-1)*5, 'MINUTE') start_time,
             to_timestamp( '2012-06-06 12:40:00', 'yyyy-mm-dd hh24:mi:ss') + 
               numtodsinterval(level*5, 'MINUTE') end_time
        from dual
     connect by level <= 10)
SELECT st.start_time, avg( yt.value )
  FROM your_table yt,
       st
 WHERE yt.time between st.start_time and st.end_time 
```

应该管用。`MIN(time)`无需生成 10 个间隔并硬编码最低间隔，您可以增强查询以从表中的和派生起点和行数`MAX(time)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T20:48:21.107

Justin 和 Sebas 的答案可以通过 LEFT JOIN 来扩展，以消除“间隙”，这通常是可取的。

如果这不是必需的，作为替代方案，我们可以使用老式的 Oracle DATE 算法......

```
SELECT TRUNC(t.time)+FLOOR(TO_CHAR(t.time,'sssss')/300)*300/86400 AS time
     , AVG(t.value) AS avg_value
  FROM foo t
 WHERE t.time IS NOT NULL
 GROUP BY TRUNC(t.time)+FLOOR(TO_CHAR(t.time,'sssss')/300)*300/86400
 ORDER BY TRUNC(t.time)+FLOOR(TO_CHAR(t.time,'sssss')/300)*300/86400 
```

让我们稍微解开一下。我们可以分离日期和时间组件，使用 TRUNC 获取日期部分，并使用 TO_CHAR 返回自午夜以来的秒数。我们知道 5 分钟是 300 秒，我们知道一天有 86400 秒。所以我们可以将秒数除以 300，然后取其 FLOOR（只是整数部分），将我们向下舍入到最接近的 5 分钟边界。我们将其乘回（乘以 300），再次获得秒数，然后将其除以一天中的秒数（86400），我们可以将其加回（截断的）日期部分。

痛苦，是的。但速度极快。

注意：这会将四舍五入的时间值返回为 a `DATE`，如果需要，可以将其转换回时间戳，但即使是 5 分钟的边界， a`DATE`也具有足够的分辨率。

作为这种方法的一个好处，对于一个大表，我们可以通过为这个查询添加一个覆盖索引来提高查询的性能：

```
CREATE INDEX foo_FBX1
ON foo (TRUNC(t.time)+FLOOR(TO_CHAR(t.time,'sssss')/300)*300/86400,value); 
```

* * *

**附录：**

MiMo 为 SQL Server 提供了一个答案，表明它将适用于 Oracle。这是 Oracle 中对这种方法的改编。请注意，Oracle 不提供 DATEDIFF 和 DATEADD 函数的等效项。Oracle 使用简单的算术代替。

```
SELECT TO_DATE('00010101','YYYYMMDD')+FLOOR((t.time-TO_DATE('00010101','YYYYMMDD'))*288)/288
       AS time
     , AVG(t.value) AS avg_value
  FROM foo t
 WHERE t.time IS NOT NULL
 GROUP BY TO_DATE('00010101','YYYYMMDD')+FLOOR((t.time-TO_DATE('00010101','YYYYMMDD'))*288)/288
 ORDER BY TO_DATE('00010101','YYYYMMDD')+FLOOR((t.time-TO_DATE('00010101','YYYYMMDD'))*288)/288 
```

选择 0001 年 1 月 1 日作为基准日期是任意的，但我不想弄乱负值，并弄清楚 FLOOR 是否正确，或者我们是否需要使用 CEIL 和负数。（神奇数字 288 是一天中 1440 分钟除以 5 的结果）。在这种情况下，我们取小数天，乘以 1440 除以 5，取其中的整数部分，然后将其放回小数天。

从 PL/SQL 包中提取“基准日期”或从子查询中获取它是很有诱惑力的，但是执行其中任何一个都可能会阻止该表达式具有确定性。我们真的很想保留创建基于函数的索引的选项。

我的偏好是避免在计算中包含“基准日期”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:44:27.037

这是 SQL Server 的解决方案：

```
declare @startDate datetime = '2000-01-01T00:00:00'

declare @interval int = 5

select 
  DATEADD(mi, (DATEDIFF(mi, @startDate, time)/@interval)*@interval, @startDate), 
  AVG(value)
from 
  table
group by
  DATEDIFF(mi, @startDate, time)/@interval
order by   
  DATEDIFF(mi, @startDate, time)/@interval 
```

开始日期是任意的。这个想法是您计算从开始日期开始的分钟数，然后按此数字除以间隔进行分组。

它应该可以很容易地适应 Oracle，使用等效的 for`DATEADD`和`DATEDIFF`

# apache - 在 Rapache 中使用 RJDBC 连接到 MSSQL 服务器

> ID：11215273
> 
> 赞同：1
> 
> 时间：2012-06-26T20:15:10.747
> 
> 标签：apache, r, jdbc, rapache

我在使用 rApache 连接到 MSSQL 服务器时遇到问题。我使用插件包“RJDBC”连接到这个服务器。在 R-Console 中，我可以正常连接并访问服务器，但是当我尝试通过 rApache（在我的测试网站上）连接时，它失败并且出现错误。这是失败时的线路。

```
 drv <- JDBC("com.microsoft.sqldserver.jdbc.SQLServerDriver","/var/www/sqljdbc/sqljdbc4.jar") 
```

这是浏览器中显示的错误：错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭了连接，没有发送任何数据。

在 apache 错误日志中，我得到的只是

[2012 年 6 月 26 日星期二 12:55:32] [错误] [客户端 10.21.2.79] rApache 注意！

谢谢你的帮助，

# google-chrome - Chrome 打印更改布局

> ID：11215274
> 
> 赞同：3
> 
> 时间：2012-06-26T20:15:22.243
> 
> 标签：google-chrome, layout, printing

当我从 Chrome 在我的网站上打印页面时，布局变得不稳定。看看我[在这里](http://slotted.co)的意思。您可以看到顶部菜单，即 a `ul`，从水平变为垂直。想法？

更新：为了清楚起见，问题不在于打印渲染。简单地打开打印对话框的行为会导致***屏幕***布局发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:05:57.290

我自己在类似的问题中注意到了这个问题。在显示打印预览后，Chrome 似乎无法重新计算自动宽度。不确定在这种情况下是否有更好的解决方案，但如果您硬编码 ul.nav 的宽度，它似乎可以解决问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-26T22:58:32.493

您可以通过为打印介质类型添加样式来控制打印布局。

```
@media print
  {
  p.test {font-family:times,serif;font-size:10px;}
  } 
```

或者

```
<link href="print-styles.css" media="print" rel="stylesheet" type="text/css" /> 
```

**延伸阅读**

[http://www.w3.org/TR/CSS2/media.html](http://www.w3.org/TR/CSS2/media.html)

[http://www.alistapart.com/articles/goingtoprint/](http://www.alistapart.com/articles/goingtoprint/)

# php - 网站安全sql数据库访问密码php

> ID：11215278
> 
> 赞同：0
> 
> 时间：2012-06-26T20:15:38.590
> 
> 标签：php, sql

我是 PHP 和 SQL 的初学者。也许这是一个愚蠢的问题，但我真的很想听听专业人士的意见，因为我也打算进入网站行业。

当我们尝试在网站上进行 sql 查询时，例如通过 PHP，我们需要在这样做之前与数据库建立连接：

```
$mysqli = new mysqli("localhost", "root", "password", "my_db"); 
```

但是这样做让我很烦，因为它对我来说看起来不安全。我必须通过有机会暴露给网络用户的脚本传递密码。

有没有更安全的方式将密码传递给 SQL 命令？专业行业的人将如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:18:31.970

这是正确的方法。

通常密码在一个变量/常量中，并且该变量被传递给这个命令。

如果从 PHP 服务器提供此文件，Web 上的用户将无法看到此文件的来源。因此他们永远不会看到密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:21:52.820

这在正常情况下是正确和安全的。PHP 是一种服务器端语言，因此所有代码都在服务器上进行评估，只有输出发送到客户端。因此，您的数据库凭据将永远不会传输给用户。

当然，如果您的服务器配置不正确，并且它以纯文本形式提供 PHP 文件而不是执行它，那么您将遇到问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:28:38.530

PHP 文件中使用的密码通常是只允许从 localhost 访问数据库的帐户。因此，即使我知道密码，我也无法通过 Internet 访问数据库。连接必须来自同一台计算机，因此只要您保护对服务器其他服务的访问，就可以了。此外，MySQL 的默认配置是仅侦听来自 localhost 的连接。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-26T20:22:39.557

您应该使用单向加密算法，然后将加密传递到数据库中。我想重新执行 1 方式加密，这样即使有人掌握了它，他们也无法对它做任何事情。然后在检查密码是否匹配时，您将输入输入的密码并对其进行加密，然后再进行匹配的加密。您永远不会解密它，也无法解密密码。基本上，密码被加密后，您只需将其丢弃，不再使用它。

# jquery - 将带有新行的文本插入文本区域

> ID：11215280
> 
> 赞同：3
> 
> 时间：2012-06-26T20:16:07.187
> 
> 标签：jquery, html

我正在尝试将数据库中的数据插入到 textarea 中。我不知道如何制作新的线条。我正在使用 jquery 的 val() 函数来设置 textarea 内容。我放了 \n 但它只是显示在 textarea 中而不是换行符。我也试过 \r\n 得到相同的结果。

更新

好的，我注意到如果我只是在它起作用的 val() 函数中用 \n 硬编码一个字符串。所以问题一定出在我通过 ajax 从 php 返回的字符串的某个地方。我正在使用 $.ajax 调用从 mysql 获取值的 PHP。关于出了什么问题的任何想法？

HTML

```
<textarea id='topContent' class='divContent' rows='8'></textarea> 
```

JAVASCRIPT

```
<script>
$('#dialogDiv').on('submit', '#insertMacroForm', function(){
    $.ajax({
        url: 'index.php',
        data: 'request=loadMacro2&id='+$('#macroSelection').val(),
        success: function(msg){
            $('#topContent').val(msg);
        }
    });
    return false;
});
</script> 
```

PHP

```
<?php
$query = 'SELECT * FROM POEMACRO WHERE POEID=' . db2_escape_string($_GET['id']);
$result = db2_exec($conn, $query) or die(db2_stmt_errormsg());
while($row = db2_fetch_assoc($result)){
    print $row['POEMACRO'];
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:37:08.987

```
$('textarea').val('line1\nline2') 
```

这工作正常。您需要`\n`在您的 JavaScript 字符串中使用。
如果此字符串是在服务器上的 PHP 中形成的，您可能需要`json_encode()`将字符串格式化为 JavaScript 格式。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-26T20:21:36.133

在将文本传递给文本区域之前，您需要解析文本并将 \n 转换为中断标记 <br/>。

# apache - Apache 禁止使用别名 403

> ID：11215283
> 
> 赞同：31
> 
> 时间：2012-06-26T20:16:21.580
> 
> 标签：apache, alias, directive, mod-alias

我正在尝试在文档根目录外的该文件夹中创建一个名为 week7 的文件夹和一个名为 hello.html 的 html 页面，并通过 Alias 指令对其进行查看。

我从 Document Root 中创建了一个名为 week7 的文件夹。我为它选择了这个位置：

```
/usr/local/www/week7 
```

而我的文档根目录是：

```
/usr/local/www/apache22/data 
```

在 httpd.conf 和标签下，我写道：

```
 Alias /week7 /usr/local/www/week7
<Directory /usr/local/www/week7>
    Require all granted
</Directory> 
```

重新启动服务器后，我收到以下消息：禁止 403 消息。

我尝试更改 hello.html 文件、week7 文件夹甚至 www 文件夹的权限，但没有任何改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-08-23T04:58:22.500

如果您使用的是 apache 2.4

命令允许，拒绝
所有人允许

变成……

要求所有授予

[https://httpd.apache.org/docs/2.4/upgrading.html](https://httpd.apache.org/docs/2.4/upgrading.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-06-04T02:40:12.707

我知道它很旧但只是为了记录，以下在 XAMPP（Windows 8）中对我有用

```
Alias /projects c:/projects

<Directory c:/projects>
    Options Indexes FollowSymLinks MultiViews
    Order allow,deny
    Allow from all
</Directory> 
```

## 编辑

在 XAMPP 5.6 和 Apache 2.4 上试试这个：

```
Alias /projects c:/projects

<Directory c:/projects >
    Options Indexes FollowSymLinks MultiViews
    Require all granted
</Directory> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T16:54:49.570

I fixed this issue with these directives:

```
Options Indexes FollowSymLinks MultiViews
AllowOverride All
Require local 
```

You'll only be able to browse from your local computer, but it works for local testing and development.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-18T15:59:27.187

尝试此处其他答案提供的解决方案，发现它们对我不起作用，使用**Linux Mint**，我找到了另一种以不同用户身份启动 apache 的选项。

阅读[unixd_module 文档](https://httpd.apache.org/docs/2.4/mod/mod_unixd.html)后，我编辑了“httpd.conf”以将`User`and更改`Group`为目录所有者`Alias`（或 root 用户）的和，并且 403“禁止”错误消失了。

1.  在文本编辑器中打开您的“httpd.conf” `/opt/lampp/etc/httpd.conf`（例如在默认安装的 XAMPP 中）。

2.  查找`<IfModule unixd_module>`，其中的注释应如下所示：

    > 如果您希望 httpd 以不同的用户或组运行，您必须首先以 root 运行 httpd，它会切换。
    > 
    > 用户/组：运行 httpd 的用户/组的名称（或#number）。
    > 
    > 与大多数系统服务一样，创建一个专门的用户和组来运行 httpd 通常是一种很好的做法。

    使用默认值`User`并`Group`设置为`daemon`.

3.  编辑`User`和`Group`。

例如：

```
<IfModule unixd_module>
  User mrJohn
  Group mrJohn
</IfModule> 
```

我希望这很有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-01-08T10:35:43.043

对我来说，这个解决方案是：

当我访问虚拟目录时出现错误“访问被禁止！发生错误 403”。
配置似乎没问题：

`Alias /static/ /home/username/sites/myblog/static/`
`<Directory /home/username/sites/myblog/static> Options Indexes FollowSymLinks MultiViews ExecCGI AllowOverride All Order allow,deny Allow from all </Directory>`
**解决方案**：默认的 apache 配置非常严格。它不允许未经身份验证访问目录。这在 httpd.conf 的目录部分中定义： `<Directory> AllowOverride none Require all denied </Directory>`
向您的虚拟目录部分添加“要求所有授权”指令将授予访问权限。

`Alias /static/ /home/username/sites/myblog/static/ <Directory /home/username/sites/myblog/static> AllowOverride All Order allow,deny Allow from all Require all granted </Directory>`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-07T19:49:17.013

别名 /data /media/pi/VOLUME

......

选项索引 FollowSymLinks MultiViews

允许覆盖所有

需要本地

在本地主机的 Raspbian 上工作正常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-03T06:41:36.507

我能够访问文档根目录之外的目录，但是使用该线程的原始问题中提出的方法。

```
 # Create Alias to access files for pure js front end app
   Alias "/hbt" "/dirA/dirB/dirC"

   # Create a Directory directive for "dirC"
   <Directory /dirA/dirB/dirC>
     Require all granted
   </Directory 
```

重新启动Apache，它工作！我正在使用 Apache 2.4

# c# - 带有轨迹栏的阈值图像

> ID：11215286
> 
> 赞同：0
> 
> 时间：2012-06-26T20:16:34.217
> 
> 标签：c#, picturebox, threshold, trackbar

我正在尝试在运行时设置图像的阈值。目前我的代码如下所示：

```
ImageAttributes imageAttr = new ImageAttributes();
imageAttr.SetThreshold(kryptonTrackBar1.Value / 100);

System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(pictureBox3.Image);
Graphics g = System.Drawing.Graphics.FromImage(bmp);
g.DrawImage(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height), 0, 0,
                 bmp.Width, bmp.Height, GraphicsUnit.Pixel, imageAttr);
pictureBox1.Image = bmp; 
```

`picturebox3`包含黑白图像。问题在`imageAttr.SetThreshold(kryptonTrackBar1.Value / 100);`线路内部。

我的轨迹条最大值为 100，最小值为 0。所以在滚动轨迹条时我应该以 0.07 等数字结束，但轨迹条只返回 0 和 1 的值！1 如果我一直向右滚动！

它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:22:53.367

怎么样

```
imageAttr.SetThreshold((float)kryptonTrackBar1.Value / 100.0f); 
```

# java - 简单的警报对话框问题 - Android

> ID：11215290
> 
> 赞同：0
> 
> 时间：2012-06-26T20:16:50.427
> 
> 标签：java, android, facebook, android-alertdialog

我有一个正在开发的应用程序，可以将图片上传到 Facebook 相册。该应用程序可以正常上传照片，没有问题。如果我对照片进行硬编码，我也可以在照片上添加标题。我要做的是制作一个警报对话框，该对话框将捕获用户标题，然后在上传图片之前将其放入捆绑包中。发生的事情是照片被上传，然后我得到对话框来输入标题。

这是弹出警报对话框的方法...

```
public String createAlert() {      
        AlertDialog.Builder alert = new AlertDialog.Builder(this);                 
          alert.setTitle("Enter Caption for Photo");  
          alert.setMessage("Caption :");
          final EditText input = new EditText(this); 
          alert.setView(input);

          alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
                public void onClick(DialogInterface dialog, int whichButton) {  
                    imageCaption = input.getText().toString();
                    return;                  
                   }  
                 });  

                alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        return;   
                    }
                });
               AlertDialog helpDialog = alert.create();
               helpDialog.show();
               return imageCaption;

  } 
```

现在这里是捆绑包并上传到 facebook...

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);        
        switch (requestCode) {
        case PICK_EXISTING_PHOTO_RESULT_CODE: {   

        if (resultCode == RESULT_OK){
              Uri photoUri = data.getData();
              String imagePath = getPath(photoUri);
              byte[] data1 = null;

                Bitmap bi = BitmapFactory.decodeFile(imagePath);
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                data1 = baos.toByteArray();

                Bundle params = new Bundle();
                params.putString(Facebook.TOKEN, facebook.getAccessToken());
                params.putString("caption", createAlert() );
                params.putByteArray("photo", data1);

                try {
                    facebook.request("me/photos",params,"POST");
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
              }

        break;
        }
        default: {
        facebook.authorizeCallback(requestCode, resultCode, data);
        break;
        }

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:39:14.147

在您的 createAlert 方法完成时，用户尚未输入任何内容。显示对话框的事件刚刚添加到系统消息中，一旦您的代码停止运行，系统消息将在将来处理。然后，您的代码继续发布 Facebook 帖子。然后显示对话框。然后 OnClickListener 中的代码在单击正确的内容时运行。

您需要在对话操作发生后发送 Facebook 帖子。我想直接的方法是在你现在调用它的行的正上方内联 createAlert 方法。然后将其余的 Facebook 代码粘贴到 onClick 中。这会给你正确的顺序，你可以再次将事情分解成方法。

只要意识到调用 show 不会立即执行任何操作，并且 onclick 中的代码也不会立即运行。这只是排队一个事件并分别指定另一个事件发生时会发生什么。它是基于事件的编程，就像许多 GUI API。

编辑：我将尝试编辑您的代码以显示如何使其工作。但是，您发布的内容不足以编译它，因此可能需要进行一些清理工作。这里：

```
protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
        case PICK_EXISTING_PHOTO_RESULT_CODE:

            if ( RESULT_OK == resultCode) {
                final Uri photoUri = data.getData();
                createAlert(photoUri);
            }

            break;
        default:
            facebook.authorizeCallback(requestCode, resultCode, data);
            break;
    }
}

public void createAlert(final Uri photoUri) {
    final AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Enter Caption for Photo");
    alert.setMessage("Caption :");

    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(final DialogInterface dialog, final int whichButton) {
            final String caption = input.getText().toString();
            postToFacebook(photoUri, caption);
        }
    });

    alert.setNegativeButton("Cancel", null);
    final AlertDialog helpDialog = alert.create();
    helpDialog.show();
}

private void postToFacebook(final Uri photoUri, final String caption) {
    final String imagePath = getPath(photoUri);
    final byte[] data1 = null;

    Bitmap bi = BitmapFactory.decodeFile(imagePath);
    final ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
    data1 = baos.toByteArray();
    bi.recycle();
    bi = null;

    final Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, facebook.getAccessToken());
    params.putString("caption", caption);
    params.putByteArray("photo", data1);

    try {
        facebook.request("me/photos", params, "POST");
    } catch (final FileNotFoundException e) {
        e.printStackTrace();
    } catch (final MalformedURLException e) {
        e.printStackTrace();
    } catch (final IOException e) {
        e.printStackTrace();
    }
} 
```

# jsp - 此 URL 不支持同时获取 HTTP 方法 GET 和此 URL 不支持 HTTP 方法 POST

> ID：11215292
> 
> 赞同：0
> 
> 时间：2012-06-26T20:17:18.077
> 
> 标签：jsp, servlets

在这里学习一些 Java Web 开发并尝试启动我的第一个 servlet。但我收到此错误： `HTTP method GET is not supported by this URL`

`description The specified HTTP method is not allowed for the requested resource (HTTP method GET is not supported by this URL).`

我在我的 html 表单中使用了“get”方法，如您所见，我已经实现了 doget 方法。但我不确定为什么会收到此错误。会不会和我的有关系`web.xml`？

我尝试通过将 html 方法更改为“post”并使用 doPost 方法来使用 POST 方法，但我也得到了等效的错误。我这样做只是为了测试，我不想使用 post。

网页.xml：

```
<web-app 
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    version="2.4">
  <servlet>
     <servlet-name>AppleFox</servlet-name>
     <servlet-class>com.AppleFox.web.ProcessQuery</servlet-class>
  </servlet>

  <servlet-mapping>
     <servlet-name>AppleFox</servlet-name>
     <url-pattern>/ProcessQuery.do</url-pattern>
  </servlet-mapping>
</web-app> 
```

小服务程序代码：

```
package com.AppleFox.web;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ProcessQuery
 */
public class ProcessQuery<HttpServletRequest> extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String query = ((ServletRequest) request).getParameter("query");

        out.println("Sorry we could find any results for " + query + ".");
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        return;
    }
} 
```

我还在我的 html 表单中使用了“get”方法。不知道为什么我会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:48:04.583

只需更改以下行并重新排列导入，一切都会正常工作：

改变：

```
public class ProcessQuery<HttpServletRequest> extends HttpServlet { 
```

到

```
public class ProcessQuery extends HttpServlet { 
```

将导入更改为：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T08:40:55.623

如果您有兴趣同时使用 doget 和 dopost 方法，您可以将操作 java 代码放入 proccessRequest(request,response) 并在 dopost 和 doget 方法中调用它，如下所示

```
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package controller;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author Birhan
 */
@WebServlet(name = "servlet", urlPatterns = {"/servlet"})
public class servlet extends HttpServlet {

    /**
     * Processes requests for both HTTP <code>GET</code> and <code>POST</code>
     * methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        try (PrintWriter out = response.getWriter()) {
            /* TODO output your page here. You may use following sample code. */
            out.println("<!DOCTYPE html>");
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet servlet</title>");            
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet servlet at " + request.getContextPath() + "</h1>");
            out.println("</body>");
            out.println("</html>");
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>

} 
```

# python - 对 URL 参数进行解码

> ID：11215298
> 
> 赞同：4
> 
> 时间：2012-06-26T20:17:40.320
> 
> 标签：python, django, web-services, url

我正在与一个曾经向我发送 HTTP 字符串的服务器交谈，如下所示：

```
/path/to/my/handler/?action-query&id=112&type=vca&info=ch=0&type=event&ev16[sts=begin (...) 
```

因此“info”GET 参数包括“=”和“&”字符。这是相当不正统的，但是我们为它写了一个解析器。然而，最近他们决定对其中的一部分进行编码，所以现在字符串看起来像这样..

```
/path/to/my/handler/?action=query&id=112&type=vca&info=ch%3D0%26type%3Devent%26ev46[sts%3Dbegin (...) 
```

这破坏了我们的解析器，它需要一个像第一个字符串一样的字符串。

我可以以某种方式“解编码”字符串，以便我可以使用旧代码（以便在我们重新编写解析器时它不会被破坏）？

根据下面的答案，我们可以使用 urllib.unquote() 来清理字符串。但是，我们依赖 request.GET，它是根据第一个字符串设置的。是否可以根据新转换的字符串重建 GET 对象，或者以某种方式强制它重新评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:19:14.020

我怀疑你想要的是模块中的`unquote`功能`urllib`。

```
>>> s = '/path/to/my/handler/?action=query&id=112&type=vca&info=ch%3D0%26type%3Devent%26ev46[sts%3Dbegin'
>>> import urllib
>>> urllib.unquote(s)
'/path/to/my/handler/?action=query&id=112&type=vca&info=ch=0&type=event&ev46[sts=begin' 
```

编辑：我对 Django 不是很熟悉，但是[他们文档的请求和响应对象部分](https://docs.djangoproject.com/en/dev/ref/request-response/)说明了以下内容：

> QueryDict 实例是不可变的，除非您创建它们的 copy()。这意味着您不能直接更改 request.POST 和 request.GET 的属性。

根据我对这些文档的有限阅读，您可能能够将该`unquote()`函数应用于`HttpRequest.body`属性并从结果中构建一个新`QueryDict`的（如果需要，可能使用它来更新您当前的）。

# ios - 清除 UIImageView 触摸绘制的内容

> ID：11215299
> 
> 赞同：1
> 
> 时间：2012-06-26T20:17:53.427
> 
> 标签：ios, ios5, uiimageview

我有从 **UIImageView**继承的 Canvas 类（在背景设置图像 background.png），并且在方法 touchesMoved 中我绘制了某种颜色的手势：

```
UITouch *touch = [touches anyObject];
CGPoint currentLocation = [touch locationInView:self];  

UIGraphicsBeginImageContext(self.frame.size); 
CGContextRef ctx = UIGraphicsGetCurrentContext();  

[self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
CGContextSetLineCap(ctx, kCGLineCapRound);
CGContextSetLineWidth(ctx, width);
CGContextSetRGBStrokeColor(ctx, red, green, blue, alpha);
CGContextBeginPath(ctx);
CGContextMoveToPoint(ctx, location.x, location.y);
CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
CGContextStrokePath(ctx);
self.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

location = currentLocation; 
```

我有下面的 ERASE 按钮，如何清除画布的上下文但将 background.png 保留为背景，只删除用户使用触摸绘制的内容（我有属性画布）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:24:48.013

您可以在图像视图上绘制一个透明矩形，如下所示：

[CoreGraphics：图像透明背景](https://stackoverflow.com/questions/5593717/coregraphics-image-transparent-background)

# ios - 将 OpenCV 框架导入 Unity 项目 iOS 时出错

> ID：11215301
> 
> 赞同：0
> 
> 时间：2012-06-26T20:17:58.340
> 
> 标签：ios, opencv, compiler-errors, unity3d, linker-errors

我使用此处提供的脚本构建了 OpenCV：http: [//aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

然后创建了一个 Unity3d iOS 项目，从 Unity3d 生成了 xcode 项目，将 OpenCV 框架添加到项目中并尝试编译。

我收到以下错误：

```
duplicate symbol _adler32 in /my-path/Libraries/libiPhone-lib.a(adler32.o) and /my-path/OpenCV.framework/OpenCV(adler32.o) for architecture armv7 
```

我尝试使用“lipo”和“ar”从 OpenCV 库中删除 adler32.so，然后重新打包库，我得到了另一个重复的符号。最终我从 OpenCV 库中删除了很多对象，它开始抱怨缺少符号。

这是一个有趣的实验，但没有奏效。

如果我使用 OpenCV 在 xcode 上创建一个项目，则它编译时不会出错。没有 OpenCV 的 Unity3d 项目也可以工作。

*   xcode 版本：4.3.3
*   unity3d 版本：3.5.2（最新）
*   OpenCV：2.4.1 - 添加 OpenCV 作为框架。

我在 xcode 下搜索了一个链接器选项，看看我是否可以让它更宽松，但没有找到任何东西。

知道如何解决错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:16:43.517

听起来 Unity 和 OpenCV 都是用它们自己的副本构建的`libz`，并且在链接时发生冲突。（`_adler32`是这个库中使用的校验和函数。）

您将需要选择一个框架来拥有这些公共库并相应地进行重建。由于`libz`无论如何都在 iOS 中，您不妨构建这两个框架以使用这些库的系统版本。

# java - 在非 UI 线程上实例化视图

> ID：11215302
> 
> 赞同：4
> 
> 时间：2012-06-26T20:18:21.600
> 
> 标签：java, android, android-asynctask, android-ui, android-view

我知道 UI 元素（视图层次结构）只能从 UI 线程进行操作。对于后台操作，可以使用 AsyncTask，它提供事件处理程序以到达 UI 线程。

简而言之，是否允许`getApplicationContext()`在非 UI 线程中实例化视图（绑定到）？**这个自定义的 View 后代——一旦被实例化——就会从UI 线程**添加到视图层次结构中。所以只有构造函数调用是在`Asynctask.doInBackground()`; 将 ( `addView(...)`) 附加到 Activity 的根布局层次结构仍然在 UI 线程中完成。

详细说明：

```
public MyView extends View {
     public MyView(Context context) { 
            ...
     }
...
} 
```

1.  我做了一个自定义视图，覆盖`onDraw(...)`等。

2.  当用户在我的主 Activity 中单击某个 MenuItem 时，会创建另一个 Activity (MyOtherActivity) 并显示**哪个屏幕正是 MyView**

3.  由于必须立即显示 MyOtherActivity 的屏幕，我在 AsyncTask 中预先实例化 MyView，而用户在主 Activity 的其他位置（即他还没有单击该 MenuItem）。MyView 引用存储在静态数据成员中。

4.  当`MyOtherActivity.onCreate()`被调用时，它的构造函数代码从静态中获取 MyView，并通过`addView(...)`.

5.  （我知道静态变量可能会导致内存泄漏，因此我将其设置为`null`不需要时。）

`getApplicationContext()`MyView 在不同的线程中实例化（并在其构造函数中获取返回值）不是一个问题（并且可能会引入意想不到的问题）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:49:29.623

最终答案出现在[View](http://developer.android.com/reference/android/view/View.html)的文档中，标题为“事件处理和线程”：

> ***注意：整个视图树是单线程的。在任何视图上调用任何方法时，您必须始终在 UI 线程上。***如果您在其他线程上工作并希望从该线程更新视图的状态，则应该使用 Handler。

所以它不仅仅是明显影响 UI 外观的东西，比如`addView()`，而是“*任何*View上的*任何*方法”。

 *[@CommonsWare 链接到的关于 android-developers](https://groups.google.com/group/android-developers/browse_thread/thread/7be473d2a332d0af)的讨论有不止一位来自 Android 框架团队的高级工程师确认这将被认真对待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T19:44:05.610

这是一个示例，说明如何使用 AsyncTask 将视图添加到 FrameLayout

```
public void addFLview(View view) {
    MyAsyncTask as = new MyAsyncTask();
    as.execute(view);
} 
```

异步任务类

```
private class MyAsyncTask extends AsyncTask<View, Void, View> {
    @Override
    protected View doInBackground(View... params) {
        return params[0];
    }
    @Override
    protected void onPostExecute(View view) {
        super.onPostExecute(view);
        myFrameLayout.addView(view);
    }
} 
```*

# c# - 通过 jQuery AJAX 调用从数据库中检索图像

> ID：11215303
> 
> 赞同：2
> 
> 时间：2012-06-26T20:18:26.713
> 
> 标签：c#, asp.net-mvc, jquery, viewbag

控制器获取图像：

```
public class PicturesSmallController : Controller
{
  public ActionResult Details(int id)
  {
    PictureSmallManager m = new PictureSmallManager();
    PictureSmall p = m.Load(id);
    ImageFormat imageFormat = ImageHelper.ConvertToImageFormat(p.ContentType);
    return p.Trunk != null ? File(p.Trunk, p.ContentType) : null;
  }
} 
```

和一个观点：

```
<script type="text/javascript">
  $(document).ready(function () {
  var picsSmall = $('#picturesSmall');
  picsSmall.toggle();
  var url = '@Url.Action("Details", "PicsSmall")';
  var ai = {
    id: 69
  };
  $.ajax({
    type: "POST",
    url: url,
    contentType: 'application/json; charset=utf-8',
    data: JSON.stringify(ai),
    success: function (returndata) {
        picsSmall.append($('<img/>', {
          src: returndata,
          alt: 'some text'
        }));
      select.show('slow');
    }
  }
 );
});
</script>
<div id="picturesSmall"></div>
<div id="picturesBig"></div> 
```

结果我在页面上看不到任何图片，但我在 FireBug 中得到了相同的结果：

```
<div id="picsSmall" style="display: block;">
<img src="�����JFIF��`�`���� ...... �d��:1�g�" alt="some text">
</div> 
```

我有两个问题：

1.  我想正确显示图像。你能告诉我这里有什么问题吗？我不擅长mvc。
2.  我有两个相同的图像，第一个很小，第二个很大。当用户点击小图片时，我想显示大图片。实施它的最佳方法是什么？

如果我在图片加载到客户端时理解正确，我必须将其保存在 ViewBag 中。如果正确，同步小图片和大图片的最佳方法是什么（我应该在客户端使用数组还是对象）？还有其他方法吗？抱歉，它看起来比我预期的要复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:55:06.303

如果您可以将对象转换为 Image 对象（或者如果您正在获取图像对象），则可以将方法的返回类型设置为 FileContentResult 并返回 MemoryStream。然后将 src 设置为控制器方法的路径。

控制器会产生以下效果：

```
public class MyController : Controller
{
    public FileContentResult GetImage(int id)
    {
        Image myimage = Bitmap.FromFile(Server.MapPath("~/Images/myimage.jpg"));
        var format = System.Drawing.Imaging.ImageFormat.Jpeg;
        string mimeType = "jpeg";

        MemoryStream ms = new MemoryStream();
        myimage.Save(ms, format);

        return File(ms.ToArray(), "images/" + mimeType);
    }
} 
```

看法：

```
<img src="/MyController/GetImage?id=<%: myImageId %>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:23:01.203

您正在从您的操作中返回图像字节。您不能将原始字节设置为源，但可以使用[数据 URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)作为源。您需要更改从您的操作返回的格式，以使用图像的 base64 编码字节正确格式化字符串。请注意，某些浏览器对数据大小有限制。

来自维基百科页面的示例：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T20:25:58.483

将您的图像 scr 设置为

```
src = "data:image/gif;base64,R0lGODlhUAAPAKIAAAsLav///88PD9WqsY...... 
```

关于显示可点击的缩略图以打开大图像，您可以使用[UI Bloxk 插件](http://jquery.malsup.com/block/)

# html - 排序无序列表和列表项以在 ul 上显示框阴影

> ID：11215305
> 
> 赞同：1
> 
> 时间：2012-06-26T20:18:32.053
> 
> 标签：html, css

有没有办法让 ul box shadow 出现在 li 的顶部？

我希望插入阴影环绕列表项......但它只是显示在下面并且不可见。

```
<div id="menu"><ul>
    <li id="inventory"><a href="<?php echo base_url() ?>welcome/inventory"></a></li>
    <li id="spells"><a href="<?php echo base_url() ?>welcome/spells"></a></li>
    <li id="fight"><a href="<?php echo base_url() ?>welcome/fight"></a></li>
    <li id="char"><a href="<?php echo base_url() ?>welcome/character"></a></li>
</ul></div>

#menu ul {
    z-index: 50;
    list-style: none;
    height: 75px;
    width: 304px;
    border: 4px solid #000000;
    -moz-box-shadow:    inset 0 0 20px black;
    -webkit-box-shadow: inset 0 0 20px black;
    box-shadow:         inset 0 0 20px black;
} 

#menu li {
    z-index: -1;
    border-right: 1px dotted #000000;
    float: left;
    width: 75px;
    height: 75px;
    background-color:lightblue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:04:12.753

嘿 Ricky 你可以通过**css实现你想要的结果** ***before: after: 伪类***

您可以从上到下和从左到右设置阴影，您想在哪里放置阴影。

我希望这能帮到您。

你可以看到演示：- [http://jsbin.com/avupaw/15/edit](http://jsbin.com/avupaw/15/edit)

```
#menu ul:before {
  content: '';
  height: 78px;
  left: 47px;
  position: absolute;
  right: 0;
  width: 294px;
  -webkit-box-shadow: 0 0 10px 0px #000000 inset;
  -moz-box-shadow: i0 0 10px 0px #000000 inset;
  box-shadow: 0 0 10px 0px #000000 inset;
}

}
#menu ul {
  margin: 0;
  padding: 0;
  height: 75px;
  border: 1px solid black;
  background: red;
  position: relative;
}
#menu li {
  background-color: lightblue;
  border: 1px solid green;
  float: left;
  height: 75px;
  list-style-type: none;
  margin: 0;
  padding: 0;
  width: 71px;
}
a { text-decoration: none }
```

```
<div id="menu">
  <ul>
    <li>
      <a href="#">A</a>
    </li>
    <li>
      <a href="#">B</a>
    </li>
    <li>
      <a href="#">C</a>
    </li>
    <li>
      <a href="#">D</a>
    </li>
  </ul>
</div>
```

# sublimetext2 - Project finder 的设置是什么以避免搜索某些文件/目录？

> ID：11215307
> 
> 赞同：3
> 
> 时间：2012-06-26T20:18:35.543
> 
> 标签：sublimetext2

我正在使用 CTAGs 包，它生成两个文件`.tags`和`.tags_sorted_by_file`Sublime Text 2。

那么当我进行项目搜索（CMD + SHIFT + F）时，如何设置项目查找器不在这两个文件或目录中搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T22:04:50.243

`CMD+,`

添加

```
 "file_exclude_patterns": [
        ".tags",
        ".tags_sorted_by_file"
    ], 
```

到根对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T08:49:28.650

搜索时（CMD+SHIFT+F），可以在菜单中指定“排除过滤器”。对于您的情况，您可以将“Where：”设置为类似

`-*.tags*,your_project_path`

您还可以编辑您的项目文件（您应该在项目的根路径中看到项目文件），这样标签文件也不会显示在侧边栏中。只需`file_exclude_patterns`在`folders`部分中添加就可以了。

# macos - 如何从 NPAPI 插件打开一个新窗口？

> ID：11215310
> 
> 赞同：0
> 
> 时间：2012-06-26T20:19:00.337
> 
> 标签：macos, plugins, core-animation, npapi

我有一个使用 CoreAnimation 绘图模型的 OS X NPAPI 插件。如何打开一个新窗口来显示错误、“关于”窗口等插件信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:43:17.360

技术上的答案是您使用标准的 Cocoa 框架调用来创建窗口；NPAPI 没有创建窗口的规定。

然而，真正的答案是你不应该。NPAPI 插件并非旨在让您创建任意 UI；你只应该在你的插件区域（即你出售的 CALayer）中绘制。您应该将信息显示为临时添加为主插件层的子层的叠加层。Apple 曾经有一个关于编写 NPAPI 插件的文档，它明确指出创建窗口是你不应该*做*的事情。

如果您确实从 NPAPI 插件创建窗口，那么在进程外运行插件的浏览器中（这是目前所有主要插件），您的窗口将表现不佳。当您创建它们时，它们可能会或可能不会出现。它们不会出现在 Exposé 中，也不会出现在 Window 菜单中，或者当有人使用 command-` 循环浏览窗口时。如果用户失去对它们的追踪，它们将很难被用户找到并关闭。当有人点击 Dock 中的浏览器时，他们不会站出来。

在新插件中做的最好的事情就是不要这样做。

# java - Java Web Start 应用程序可以从本地系统读取文件，但不能写入

> ID：11215311
> 
> 赞同：2
> 
> 时间：2012-06-26T20:19:07.107
> 
> 标签：java, file, local, jnlp, java-web-start

请询问您是否需要更多信息。我的 jnlp 中有安全和所有权限标签，当我离线运行我的 java 应用程序时，它可以正常工作。

```
File T = new File(System.getProperty("user.home") + File.separator + ".myapp/");<br />
if(!T.exists())
    T.mkdirs();
File[] temp=new File[2];

temp[0] = new File(System.getProperty("user.home") + File.separator +
                   ".myapp"+File.separator+"temp1.txt");
temp[1] = new File(System.getProperty("user.home") + File.separator +
                   ".myapp"+File.separator+"temp2.txt");

writer=new BufferedWriter(new FileWriter(temp[x]));
writer.write(finalData);
writer.close(); 
```

我使用以下方法写入要在用户系统的目录中创建的文件。在程序中，我还从同一个文件夹中读取数据，当我将测试数据放在该文件夹中时，它可以正常工作。当我删除 temp1.txt 和 temp2.​​txt 文件时，它不会读取任何数据。没有错误消息出现或任何东西。

重申一下，当在 java web start 中运行时，会弹出窗口并且程序正常运行，没有错误消息，但它没有将文件正确写入用户系统。同时，当以 .txt 文件提供测试数据时，它会正确读取。

编辑：如果可能的话，是否有不使用某些 javaw.jnlp.* 方法的解决方案？该程序确实必须有一个包含 .txt 文件的文件夹才能从中读取

edit2：我所有的罐子也都签名了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:25:24.330

您可以在使用之前尝试创建文件吗？

`temp[1].createNewFile()`

仅当文件不存在时才会创建该文件。您可以使用返回布尔标志来确定文件是否已经存在。如果安全管理器拒绝创建请求，此方法也会抛出*IOException 。*

编辑：

根据`java.io.FileWriter`，文件创建取决于底层平台。由于您可以读取该文件（如果存在）并且仅在 JNLP 应用程序中创建新文件时遇到问题。我建议使用`createNewFile`而不是依靠 FileWriter 创建一个新文件来创建文件。

来自`java.io.FileWriter`javadoc：

> 文件是否可用或是否可以创建取决于底层平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T13:44:33.937

对不起，伙计们，我是个白痴。我的 jnlp 文件指向了我本地系统中我的 java 程序的不同版本，基本上我是个白痴。当我回家时，我从家里的电脑上测试了这个网站，发现了我的错误。

非常感谢您的帮助！

# c# - 在 Azure 上存储 Quartz.NET 作业时出现“现有作业”错误

> ID：11215314
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:19:09.637
> 
> 标签：c#, azure, quartz.net

如何在不引发以下错误的情况下创建 adojobstore：

```
 Unable to store job because one already exists with this identification. 
```

我可以从数据库中读取并检查作业是否不存在然后将其添加到调度程序中吗？这是推荐的做法吗？

是否需要关闭 Azure 上的调度程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:02:25.113

当您使用 AdoJobStore 时，您将作业保存在 DB 中，因此您可以在安排作业之前单独检查表中作业的存在，否则只需使用具有相同 JobID 的 AddJob 并确保创建持久作业。

可以重用的作业必须是持久的，这意味着即使没有调度，作业仍然存在，这意味着它没有附加触发器。持久作业的示例如下：

```
dJob = new JobDetail("consolidate-attendance", "daily-attendance-group", 
              ConsolidateAttendance.class,
              /* volatile */ false, 
              /* durable */ true,
              /* recover */ false);
sched.addJob(jobContext, dJob, false); 
```

ScheduleJob 有两个版本，一个接受带有触发器的作业和另一个作业，因此您需要确定要使用哪一个。如果您已经定义了作业，那么您不能使用 ScheduleJob 接受作业和触发器，因为在内部调度程序会尝试将作业添加到自身并失败。

当已经定义了作业时，您只需通过触发器类将作业与触发器绑定，并使用只接受触发器的 scheduleJob。

这应该可以工作，您不需要关闭调度程序。

# selenium-rc - Selenium 与单击 Yahoo UI 按钮不一致

> ID：11215317
> 
> 赞同：0
> 
> 时间：2012-06-26T20:19:15.827
> 
> 标签：selenium-rc, selenium-ide

我 在**Firefox 12上使用****Selenium IDE 1.8.1**。我们的一个应用程序使用基于**“Yahoo UI”**的按钮，当我尝试单击它们时，我一直看到与 Selenium 不一致的结果。例如，单击此按钮**(input id="submitButton")**应该会弹出一个模式对话框——大约有一半的时间提交数据但模式对话框从不弹出。我正在使用命令： ******`click | css=#submitButton |`******

 ******```
<input id="icdParticipantAddressForm_icdParticipantId" type="hidden" value="1022" name="icdParticipantId">
<input id="submitButton" class="saveButtonImage" type="submit" onclick="return YAHOO.ourAddress.avwController.verifyAddresses();" title="save" value="Next" style="float:right;">
<a href="/url?icdParticipantId=1022> 
```

谢谢大家！PS我也试过 `fireEvent | css=#submitButton | click`同样的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:02:21.650

如果您根本无法访问它；我会假设它是隐藏的（在框架后面？）。每次运行测试时都会遇到“不一致”的事实让我相信你有超时问题。查看您收到的错误消息将很有用。

获得所需按钮的最佳方式是通过 XPATH；将下面的代码复制粘贴到试图找到按钮的代码部分。

```
driver.find_element(:xpath, "//input[@id='submitButton']") 
```

再次运行测试，看看这是否有帮助。如果不尝试下面的改进代码，它将覆盖您，以防页面需要时间加载（即您的按钮尚不可用）。

```
!30.times { if (driver.find_element(:xpath, "//input[@id='submitButton']") rescue false) then break else sleep 1; end } 
```******

# eclipse - 如何清除 Eclipse 的缓存？

> ID：11215319
> 
> 赞同：0
> 
> 时间：2012-06-26T20:19:46.103
> 
> 标签：eclipse, playframework-2.0

我正在使用 eclipse 并使用命令 eclipsify 播放框架，当我更改类时，例如使用**System.out.println("blabla")**并将其作为 java 应用程序运行，对控制台没有影响，只有当我在一小时后尝试这个时，控制台打印**blabla**。我认为这是缓存的问题，因为当我使用 Windows 的命令行执行此操作时它编译得很好： java -cp ...

# linux - 带有 gnuplot 的基本二维图

> ID：11215321
> 
> 赞同：1
> 
> 时间：2012-06-26T20:20:12.007
> 
> 标签：linux, gnuplot

我有以下 txt 文件：

```
# tlb_size  AMAT    tlb_miss_rate
2   2918.67 19.85
4   2905.33 13.20
8   2900.00 10.50
16  2892.33 6.60
32  2884.33 2.71
64  2881.00 0.93
128 2880.00 0.56
256 2879.67 0.41
512 2879.67 0.36
1024    2879.67 0.33
2048    2879.67 0.27
4096    2879.67 0.27 
```

我想在一个二维图上绘制 2 条曲线：AMAT 作为 tlb_size 的函数，第二条曲线 tlb_miss_rate 作为（也是）tlb_size 的函数。x 轴是 tlb_size，y 轴是 AMAT 和 tlb_size，希望用于一些正常的比例。

这是非常基本的，但我找不到解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:40:49.887

要简单地将第 1 列绘制为 x 轴，并在第 2 列上使用 AMAT 和 tlb_size，您可以执行以下操作：

```
gnuplot> plot "test.txt" using 1:2, "" using 1:3 
```

但是，这看起来不是特别可读，因此您可以将 y 轴设置为对数刻度（注意：“”是“我已经提到的同一文件”的简写）：

```
gnuplot> set log y 
gnuplot> plot "test.txt" using 1:2, "" using 1:3
gnuplot> plot "test.txt" using 1:2 with lines, "" using 1:3 with lines 
```

如果您不想使用该对数刻度，可以尝试定义两个独立的 y 轴。不要忘记先取消设置 log y，否则它仍会以对数刻度绘制其中一条线：

```
set ytics axis
set y2tics 
plot "test.txt" using 1:2 with lines, ""  using 1:3 axes x1y2 with lines 
```

顺便说一句，有人向我指出，如果您对 x 轴使用 log2 比例，您的数据看起来特别好：

```
set logscale x 2 
plot "test.txt" using 1:2 with lines, ""  using 1:3 axes x1y2 with lines 
```

出来看起来像这样：

![样本](../Images/4928d7b22242d71cb93a9e2367f9a663.png)

# entity-framework - 实体框架中对象的详细状态？

> ID：11215324
> 
> 赞同：2
> 
> 时间：2012-06-26T20:20:17.933
> 
> 标签：entity-framework, entity-framework-4

如何仅获取实体的属性而不是实体的状态？

假设我有一个产品类的对象，只有它的价格值发生了变化，所以我现在想要：

1.  产品名称不变
2.  产品价格修改

很容易知道对象已更改，但我想知道已更改的确切属性。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:39:13.280

使用 ObjectStateEntry 像这样调用 GetModifiedProperties 方法（这比您需要的示例更多，但请查看下面代码中的 GetModifiedProperties）：

```
int orderId = 43680;

using (AdventureWorksEntities context =
    new AdventureWorksEntities())
{
    var order = (from o in context.SalesOrderHeaders
                 where o.SalesOrderID == orderId
                 select o).First();

    // Get ObjectStateEntry from EntityKey.
    ObjectStateEntry stateEntry =
        context.ObjectStateManager
        .GetObjectStateEntry(((IEntityWithKey)order).EntityKey);

    //Get the current value of SalesOrderHeader.PurchaseOrderNumber.
    CurrentValueRecord rec1 = stateEntry.CurrentValues;
    string oldPurchaseOrderNumber =
        (string)rec1.GetValue(rec1.GetOrdinal("PurchaseOrderNumber"));

    //Change the value.
    order.PurchaseOrderNumber = "12345";
    string newPurchaseOrderNumber =
        (string)rec1.GetValue(rec1.GetOrdinal("PurchaseOrderNumber"));

    // Get the modified properties.
    IEnumerable<string> modifiedFields = stateEntry.GetModifiedProperties();
    foreach (string s in modifiedFields)
        Console.WriteLine("Modified field name: {0}\n Old Value: {1}\n New Value: {2}",
            s, oldPurchaseOrderNumber, newPurchaseOrderNumber);

    // Get the Entity that is associated with this ObjectStateEntry.
    SalesOrderHeader associatedEnity = (SalesOrderHeader)stateEntry.Entity;
    Console.WriteLine("Associated Enity's ID: {0}", associatedEnity.SalesOrderID);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:56:53.347

环顾互联网，我发现[这篇文章](http://harmneervens.blogspot.com/2010/02/how-to-find-dirty-property-in-entity.html)正是你想要做的。

# cakephp - 使用 javascript 提交 GET 表单 - CakePHP 创建重复输入

> ID：11215325
> 
> 赞同：0
> 
> 时间：2012-06-26T20:20:27.530
> 
> 标签：cakephp, cakephp-2.2

我认为是安全组件创建了我的输入的副本：

```
<?php echo $this->Form->input('39', array('type'=>'checkbox')); ?> 
```

变成：

```
<input type="hidden" name="39" id="Form39_" value="0"/>
<input type="checkbox" name="39"  value="1" id="Form39"/> 
```

也许这在大多数情况下都可以正常工作？（蛋糕忽略它？）

但是我的表单是 GET 方法，所以当我提交时，我得到了这个：

```
...&39=0&39=1...  in the URL 
```

或者，如果我不选中该框，我会得到：

```
...&39=0  (shouldn't even be there) 
```

我怎样才能做到a）不创建副本或b）在GET提交期间不同时提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:11:49.393

这应该有助于：

```
<?php
echo $this->Form->checkbox('39', array('hiddenField' => false));
?> 
```

[表单助手](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

# android - 主题中的 Android textAllCaps

> ID：11215326
> 
> 赞同：10
> 
> 时间：2012-06-26T20:20:35.353
> 
> 标签：android, android-layout, android-theme

我有一个主题，希望所有关于活动的文本视图都被大写。因此，我将 textAllCaps 设置为样式，然后将其应用于我的主题中的 textViewStyle ，如下所示

```
<style name="Widget.Apex.TextView" parent="android:Widget.TextView">
  <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
  <item name="android:textAllCaps">true</item>
</style>

<style name="MyTheme" parent="@android:style/Theme.Holo">
  <item name="android:textViewStyle">@style/Widget.Apex.TextView</item>
</style> 
```

不幸的是，这具有将我的应用程序标题、ActionBar 字幕和弹出菜单项变为大写的副作用。所以我想我只需将我的主题中的 ActionBarStyle、textAppearanceLargePopupMenu 和 textAppearanceSmallPopupMenu 属性设置为具有 textAllCaps=false 的自定义样式。但是，这不起作用。我知道我的主题正在被应用，因为如果我设置 textColor 或 textStyle 它们都会应用于标题和菜单项。是否可以覆盖这些样式中的 textAllCaps？

```
<style name="Widget.Apex.TextView" parent="android:Widget.TextView">
  <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
  <item name="android:textAllCaps">true</item>
</style>
<style name="TextAppearance.Apex.Widget.ActionBar.Title" parent="android:TextAppearance.Holo.Widget.ActionBar.Title">
  <item name="android:textAllCaps">false</item>
  <item name="android:textStyle">italic</item>
</style>
<style name="TextAppearance.Apex.Widget.ActionBar.Subtitle" parent="android:TextAppearance.Holo.Widget.ActionBar.Subtitle">
  <item name="android:textAllCaps">false</item>
  <item name="android:textStyle">italic</item>
  <item name="android:textColor">#FF0000</item>
</style>
<style name="TextAppearance.Apex.Widget.PopupMenu.Large" parent="android:TextAppearance.Holo.Widget.PopupMenu.Large">
  <item name="android:textAllCaps">false</item>
  <item name="android:textStyle">italic</item>
  <item name="android:textColor">#FF0000</item>
</style>
<style name="TextAppearance.Apex.Widget.PopupMenu.Small" parent="android:TextAppearance.Holo.Widget.PopupMenu.Small">
  <item name="android:textAllCaps">false</item>
  <item name="android:textStyle">italic</item>
  <item name="android:textColor">#FF0000</item>
</style>
<style name="Widget.Apex.ActionBar" parent="android:Widget.Holo.ActionBar">
  <item name="android:titleTextStyle">@style/TextAppearance.Apex.Widget.ActionBar.Title</item>
  <item name="android:subtitleTextStyle">@style/TextAppearance.Apex.Widget.ActionBar.Subtitle</item>
</style>

<style name="MyTheme" parent="@android:style/Theme.Holo">
  <item name="android:actionBarStyle">@style/Widget.Apex.ActionBar</item>
  <item name="android:textAppearanceLargePopupMenu">@style/TextAppearance.Apex.Widget.PopupMenu.Large</item>
  <item name="android:textAppearanceSmallPopupMenu">@style/TextAppearance.Apex.Widget.PopupMenu.Small</item>
  <item name="android:textViewStyle">@style/Widget.Apex.TextView</item>
</style> 
```

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-18T03:57:36.707

通过在支持旧 API（少于 14 个）的 Android 应用中使用**AppCompat** `textAllCaps`

解决此问题的方法是明确设置如下样式：

```
<android.support.v7.internal.widget.CompatTextView
        style="@style/MyTextViewStyle"
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:textAllCaps="true"/> 
```

或者使用继承 textViewStyle 并添加 textAllCaps 属性以及您选择的任何其他样式的新样式：

```
 <style name="MyCompatTextViewStyle" parent="MyTextViewStyle">
            <item name="textAllCaps">true</item>
        </style> 
```

*在布局中：*

```
<android.support.v7.internal.widget.CompatTextView
            style="@style/MyCompatTextViewStyle"
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/> 
```

笔记：

1> 这个小部件不会继承在您的主题中设置的任何默认样式`android:textViewStyle`

2>使用这个小部件似乎是内部的，因为包名称意味着它并不是真正用于公共 API。它也不是“完全烘焙”的，因为该`textAllCaps`属性需要直接在样式/视图上，并且不能在 textAppearance 样式中才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T14:00:13.447

尝试同时使用`textAllCaps`和`android:textAllCaps`。

```
<style name="TextViewStyle">
      <item name="textAllCaps">true</item>
      <item name="android:textAllCaps">true</item>
</style> 
```

但我认为它只适用于设计库 23.2.0 或更高版本。

# android - 自动呼叫意图代码，给我带来问题？

> ID：11215336
> 
> 赞同：0
> 
> 时间：2012-06-26T20:21:17.647
> 
> 标签：android, android-intent

```
import android.content.Intent;
import android.net.*;

public class ignitionClass {
    Intent dialI = new Intent(Intent.ACTION_CALL, Uri.parse("tel:610-970-1218"));
    startActivity(dialI);
} 
```

现在我面临的问题是从 Intent dialI 一路向下。我认为它在大多数情况下很简单......只是我无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:43:14.737

你是什​​么意思“一直拨号”你想让应用程序开始拨号吗？如果是这样，那么出于安全原因，它不会发生。用户需要自己发起呼叫，您的应用程序只需提示填写号码的拨号屏幕即可。否则恶意软件可以拨打付费号码等。

# maven - 如何理解maven是用maven构建的？

> ID：11215341
> 
> 赞同：1
> 
> 时间：2012-06-26T20:21:26.103
> 
> 标签：maven

对 maven 的工作原理感到好奇，我查看了它的源代码。令人惊讶的是，maven 模块是由 maven 自己构建的。有人可以帮助我了解这怎么可能？

准确地说，用于构建 maven 源代码的 maven 二进制文件是如何编译的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:26:51.437

正如评论所指出的，原始版本可能是由不同的编译器编译的，但后续版本已经被引导。

编辑：如前所述，我的意思是构建，而不是编译。我的错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:30:26.327

Maven 是一个依赖管理工具（非常简化的视图，但对于我们的目的来说是准确的 :)

如果您有任何其他方式来管理您的依赖项（例如，将一堆 jar 放在一个目录中并将它们包含在您的类路径中），那么构建二进制文件不需要 Maven 的那个方面。

可以这样想：使用 Maven 构建的任何东西都可以通过手动包含依赖项而在*没有Maven 的情况下构建。*或者使用其他构建工具。或者……等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T06:38:39.620

我相信 Maven 从一开始就不是由 Maven 管理的，而是可能经过几周/几个月的开发，当它足够成熟，可以做一些基本的事情，比如调用编译器等。这种情况的另一个例子是 Git，它有它的源代码Linus Torvalds 经过 AFAIR 4 天的开发后，在 Git 中编写代码。你知道，先有鸡蛋还是先有鸡肉……；）

# r - 如何从给定的起点在 R 中爬山？

> ID：11215344
> 
> 赞同：3
> 
> 时间：2012-06-26T20:15:23.130
> 
> 标签：r, optimization

我正在寻找一个函数，它可以从我提供的起点开始在向量上进行简单的爬山。更正式地说：给定一个类似的向量`y <- c(1,2,3,1,1)`，我想要一个函数`hill(y, x0)`，使得`hill(y, 1) == 3`（从左边爬到顶部）和`hill(y, 5) == 5`（它左右移动，但发现它处于高原，只返回起始值）。我很难相信这不存在，但到目前为止还没有找到。有人有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:32:08.040

这是一个递归解决方案，来自[https://gist.github.com/3000200](https://gist.github.com/3000200)。为简洁起见省略了测试。

```
climb <- function(y, x0) {
  x <- index(y)
  n <- length(y)

  if (n == 0) { return(NA) }

  if (x0 < min(x) | x0 > max(x)) {
    warning(sprintf("x0 of %f lies outside data range [%f, %f]", x0, min(x), max(x)))
  }

  # TODO: beautify this.
  w <- which.min(abs(as.numeric(x - x0)))
  i <- x[w]
  ii <- index(x)[w] # 1-based index
  l <- x[ii-1]
  r <- x[ii+1]
  yl <- if (ii == 1) { -Inf } else { as.numeric(y[l]) }
  yr <- if (ii == n) { -Inf } else { as.numeric(y[r]) }
  yi <- as.numeric(y[i])

  # At a maximum?
  if (yl <= yi && yr <= yi) {
    return(i)
  }

  # Nope; go in the direction of greatest increase, breaking ties to the right.
  if (yl > yr) {
    return(climb(y, l))
  } else {
    return(climb(y, r))
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:36:59.547

I don't think there is a function that will do that, the task is too simple and specialized. The more general case is that of finding local maxima in a vector or time series:

Given `x`, then [could be written as one-liner]

```
lmax <- function(x) {
    x <- c(x[1], x, x[length(x)])
    d <- diff(sign(diff(x)))
    which(d < 0)
} 
```

will return the indices of all (local) maxima in `x`. Starting with some index `i` it is now easy to find the highest maximum in its vicinity. Example:

```
x <- c(10,10, 9, 4,10,10,10, 1, 2, 5, 4, 4)
lmax(x)                                     # 2  5  7 10 
```

If you start with `i = 4` you will have to look -- applying `findInterval`, for instance -- which one is higher, `x[2]` or `x[5]`. If you don't want to wade through flat valleys (or plateaus), e.g. `i=6`, some `if` statements will march in. Therefore a pedestrian's approach seems more appropriate:

```
hill <- function(x, i) {
    stopifnot(is.numeric(x), 1 <= i, i <= length(x))
    i1 <- i2 <- i
    while (i1 < length(x))
        if (x[i1 + 1] > x[i1]) i1 <- i1 + 1 else break
    while (i2 > 1)
        if (x[i2 - 1] > x[i2]) i2 <- i2 - 1 else break
    # return
    if (x[i1] >= x[i2]) i1 else i2
} 
```

Of course, I would like to see a more vectorized solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:37:04.057

我怀疑您正在寻找`cumsum`或正在寻找`cummax`您的数学问题：

```
?cummax  # on same help page as cumsum

> y <- c(1,2,3,1,1)
> cummax(y)
[1] 1 2 3 3 3
> cumsum(y)
[1] 1 3 6 7 8 
```

但后来我在 RSeek.org 上搜索了“爬山”，发现你想要别的东西。包中有这样的功能：例如，`hill.climbing.search`在“FSelector”中。

# java - 如何将 Java JAR 文件添加到 Grails 项目？

> ID：11215351
> 
> 赞同：16
> 
> 时间：2012-06-26T20:22:33.953
> 
> 标签：java, grails, maven, jar, dependencies

我有一些想要在 Grails 2.0.4 项目中使用的 Java/Maven 项目。我尝试了各种方法，例如：

1.  在我的本地 maven 存储库中安装 JAR 文件并执行`grails install-dependency com.foo:my-project:0.0.1-SNAPSHOT`
2.  将 JAR 文件复制到`lib`grails 的文件夹中。
3.  添加`compile com.foo:my-project:0.0.1-SNAPSHOT`到依赖项部分`BuildConfig.groovy`
4.  取消注释`mavenLocal()`和传递`/home/me/.m2/repository`

我可能已经尝试过其他一些事情，比如在`grails clean`方便的时候迷信地扔一个。在每种情况下都会`grails compile`产生以下结果：编译失败，无法解析对任一 JAR 中任何类的每个引用。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T21:08:19.040

将 jar 放在 lib 文件夹中应该可以解决问题。我们目前正在使用相同的方法，没有问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-04-20T11:14:02.947

如果默认情况下*Grails*不采用位于的本地*.jar*库`<GRAILS-APP-DIR>/lib`（似乎在*Grails 3.X*中删除了`/lib`文件夹默认配置），那么执行它的简单方法是修改`build.gradle`为它添加本地目录依赖项。

对于几乎所有情况，使用*maven*存储库当然更好，但是可能有一些`db-vendor-drivers`或其他不在公共存储库中的库。为此库修改`<GRAILS-APP-DIR>/build.gradle`并添加如下内容：

```
dependencies {
    ...
    compile fileTree(dir: './lib', include: ['*.jar'])
    ...
} 
```

如果你愿意，你可以使用另一个目录（不是`/lib`），因为你正在指定它。当然使用正确的范围（例如`db-vendor-drivers`，可能已经在您的应用程序容器类路径中的范围将`runtime`代替`compile`）

希望能帮助到你，

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-05T13:24:44.803

将 jar 添加到“lib”文件夹对我来说还不够。我不得不跑：

```
grails compile --refresh-dependencies 
```

在它起作用之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T12:34:42.290

Grails 刷新依赖、干净等对我不起作用。对我有用的是退出 Grails 守护进程并再次启动 Grails。

# postgresql - brew install postgresql 在带有 XCode 4.3.3 的 Mac OS X Lion (10.7.4) 上失败

> ID：11215355
> 
> 赞同：0
> 
> 时间：2012-06-26T20:22:58.693
> 
> 标签：postgresql, homebrew

我在使用自制软件安装 postgresql 9.1.4 时遇到错误。我已经尝试了我能想到的一切来解决这个问题，包括......

*   跑步`brew install --use-gcc postgresql`
*   跑步`brew install --use-clang postgresql`
*   跑步`brew install --use-llvm postgresql`
*   跑步`CC=/usr/bin/gcc-4.2 brew install postgresql`
*   跑步`export CC=/usr/bin/gcc-4.2 && brew install postgresql`
*   跑步`brew install postgresql --32-bit`
*   跑步`brew install postgresql --without-ossp-uuid`
*   跑步`brew install postgresql --no-python`
*   跑步`PYTHON=/usr/local/bin/python brew install postgresql`

我注意到系统上已经安装了 postgreqsl 9.0.4，但是我期望的许多命令都丢失了，例如`initdb`and `pg_ctl`，所以我不想使用那个版本。

我怀疑我遇到的问题是由 postgresql 系统版本的库被链接到的，但我不确定如何测试它。

有什么想法吗？`brew install postgresql`我在一个要点中发布了运行的详细输出。[https://gist.github.com/2998598](https://gist.github.com/2998598)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:11:55.157

看起来这现在是一个已知问题，并通过**[应用 Homebrew 补丁修复](https://github.com/mxcl/homebrew/issues/13044)**。

# php - PHP/cURL 错误 7；无法连接到主机

> ID：11215357
> 
> 赞同：1
> 
> 时间：2012-06-26T20:23:03.233
> 
> 标签：php, curl

所以我一直遇到同样的错误......我已经搜索了几个小时试图找到解决方案，但我似乎无法找到丢失的部分。许多其他人询问有关堆栈溢出的错误 7，但没有一个与我的情况类似。

基本上，我使用 cURL 来下载通过 XML 提要发送的图像。我的整个脚本工作正常，一切运行，我在下面编写的函数甚至下载了数千张图像（有时高达 3000 范围）。

我想我的问题是，为什么在下载了 3000 张图片后它就无法连接？

```
function downloadImage($location, $imagesPath, $imageName) {

    //Location fix
    $location = str_replace(" ", "%20", $location);

    $url  = $location;
    $path = $imagesPath . $imageName;
    $fp = fopen($path, 'w');    

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 0); //Wait indefinitately      
    curl_setopt($ch, CURLOPT_DNS_USE_GLOBAL_CACHE, false);

    $data = curl_exec($ch); 
    if ($data === false) {
      echo "DownloadImage cURL failed 1: (" . curl_errno($ch) . ") " . curl_error($ch) . "<br/>";
      //exit;
    }           
    curl_close($ch);

    fclose($fp);        

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:15:35.817

所以为了让它工作，我不得不在函数上设置一个瓶颈来减慢它的速度。正如 Andrewsi 建议的那样，远程站点因为我下载图像太快而中断了我的工作。为了限制该功能，我将每个图像通过 FTP 传输到远程服务器（因为无论如何这都是必需的）。

最终函数如下所示：

```
function downloadImage($location, $imagesPath, $imageName, $ch3, $feedFTPinfo) {

//Location fix
//$location = str_replace(" ", "%20", $location);   

$url  = $location;
$path = $imagesPath . $imageName;

$fp = fopen($path, 'w');    
$ch2 = curl_init(); // Initiate cURL for downloading images

//Setup the cURL options for the second handle ($ch2)
curl_setopt($ch2, CURLOPT_URL, $url);
curl_setopt($ch2, CURLOPT_FILE, $fp);   
curl_setopt($ch2, CURLOPT_CONNECTTIMEOUT, 0); //Wait indefinitately     
curl_setopt($ch2, CURLOPT_FOLLOWLOCATION, true);

//Execute the cURL session
$data2 = curl_exec($ch2); 

//Resize Images
$image = new SimpleImage();
$image->load($url); 
$imageNameSm = str_replace(".jpg", "", $imageName);
$imageNameSm = $imageNameSm."_sm2.jpg"; 
$image->resizeToWidth(120);
$image->save($imagesPath . $imageNameSm);   
$smPath = $imagesPath . $imageNameSm;

//Find out if there were any issues
if ($data2 === false) {
  echo "DownloadImage cURL failed 1: (" . curl_errno($ch2) . ") " . curl_error($ch2) . "<br/>";
  //exit;
} else {
    //There weren't any issues downloading the file, move it to the speficifed ftp server

    if (!empty($feedFTPinfo)) {

        $localfile = $path;
        $fp = fopen($localfile, 'r');

        //Setup the options for the 3rd handle
        curl_setopt($ch3, CURLOPT_URL, $feedFTPinfo.$imageName);
        curl_setopt($ch3, CURLOPT_CONNECTTIMEOUT, 0); //Wait indefinitately 
        curl_setopt($ch3, CURLOPT_UPLOAD, 1);
        curl_setopt($ch3, CURLOPT_INFILE, $fp);
        curl_setopt($ch3, CURLOPT_INFILESIZE, filesize($localfile));

        //Execute the 3rd cURL handle
        $data3 = curl_exec($ch3);

        //Find out if there were any issues with the execution
        if ($data3 === false) {
            echo "Uploading the image via FTP failed: (" . curl_errno($ch3) . ") " . curl_error($ch3) . "<br/>";
            //exit;
        }

        $localfile = $smPath;
        $fp = fopen($localfile, 'r');

        //Setup the options for the 3rd handle
        curl_setopt($ch3, CURLOPT_URL, $feedFTPinfo.$imageNameSm);
        curl_setopt($ch3, CURLOPT_CONNECTTIMEOUT, 0); //Wait indefinitately 
        curl_setopt($ch3, CURLOPT_UPLOAD, 1);
        curl_setopt($ch3, CURLOPT_INFILE, $fp);
        curl_setopt($ch3, CURLOPT_INFILESIZE, filesize($localfile));

        //Execute the 3rd cURL handle
        $data3 = curl_exec($ch3);

        //Find out if there were any issues with the execution
        if ($data3 === false) {
            echo "Uploading the small image via FTP failed: (" . curl_errno($ch3) . ") " . curl_error($ch3) . "<br/>";
            //exit;
        }           

    }

}

curl_close($ch2); //Close the cURL handle that downloads images
fclose($fp);
} 
```

如果您不需要 ftp 某个地方来创建瓶颈，您可以在函数中使用 php 的`sleep`(seconds) 或`usleep`(microseconds)`downloadImage`函数来创建类似的瓶颈。

*   `sleep`文档： http: [//php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)
*   `usleep`文档： http: [//php.net/manual/en/function.usleep.php](http://php.net/manual/en/function.usleep.php)

希望这个理论可以帮助其他人。

# spring - spring mvc 3.1 捕获 jackson.map.jsonmappingexception 并重新抛出 HttpMessageNotReadableException

> ID：11215359
> 
> 赞同：1
> 
> 时间：2012-06-26T20:23:14.030
> 
> 标签：spring, spring-mvc, jackson

看起来在 3.0.5 中，spring 不会捕获 jsonmappingexception，只会抛出它。这是一个错误修复还是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:42:28.373

听起来像 - [https://github.com/SpringSource/spring-framework/commits/master/spring-web/src/main/java/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.java](https://github.com/SpringSource/spring-framework/commits/master/spring-web/src/main/java/org/springframework/http/converter/json/MappingJacksonHttpMessageConverter.java)

# performance - 使用 Lua 的最佳方式

> ID：11215361
> 
> 赞同：2
> 
> 时间：2012-06-26T20:23:20.097
> 
> 标签：performance, lua, vm-implementation

我有一个游戏/应用程序引擎，我目前正在将 Lua 集成到其中。应用程序分为包含演员的场景。我想允许用户为每个场景和每个演员分配一个 Lua 脚本。处理这个问题的最佳方法是什么？我应该为每个场景创建和管理一个 Lua 状态，然后为每个演员创建和管理一个 Lua 状态吗？或者为了性能，我最好每个场景都有一个 Lua 状态，并将每个实例化演员的所有脚本加载到场景 Lua 状态中。我最感兴趣的是性能。使用多个 Lua VM 是个坏主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T23:00:27.840

在您证明这是一个问题之前，不要担心性能。

做任何最简单且对您的游戏最有意义的事情。我从来不用超过一个`lua_State`。拥有多个似乎在没有什么好处的情况下管理会很痛苦

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T01:50:54.117

> 程序优化的第一条规则：不要这样做。
> 程序优化的第二条规则（仅限专家！）：不要这样做。

因此，除非遇到重大问题，否则不要担心性能。

您可以遵循一些小的性能技巧，这些技巧无论如何都是很好的做法。 [http://trac.caspring.org/wiki/LuaPerformance](http://trac.caspring.org/wiki/LuaPerformance)

其他一些有用的链接

*   [http://lua-users.org/wiki/OptimisationTips](http://lua-users.org/wiki/OptimisationTips)
*   [http://www.lua.org/gems/sample.pdf](http://www.lua.org/gems/sample.pdf)

# python - ImportError：没有名为 OpenGL.GL 的模块

> ID：11215362
> 
> 赞同：41
> 
> 时间：2012-06-26T20:23:21.817
> 
> 标签：python, opengl

我正在尝试使用 Python 2.7.3[在这里](http://nehe.gamedev.net/tutorial/adding_colour/13003/)运行 NeHe 的教程，但它抛出了错误`ImportError: No module named OpenGL.GL`

那么我该如何解决呢？这是代码：

```
from OpenGL.GL import * 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-26T20:34:01.790

您是否正确安装了 PyOpenGL？如果您在正确设置新模块时遇到问题，我建议您安装[setuptools](http://pypi.python.org/pypi/setuptools/ "安装工具")。一旦你安装了 setuptools，你会在你的 python27/Scripts 目录中找到一个名为“easy_install”的程序，你可以使用它来正确安装包。

例如在我的 Windows 设置中，我使用：

```
C:\Python27\scripts\easy_install pyopengl 
```

在我的系统上设置 PyOpenGL，然后您的示例案例就可以正常工作。我记得当我开始使用 Python 时，我在尝试正确设置工作 PyOpenGL 以便我可以运行 NeHe 代码时遇到了同样的问题，当我了解 easy_install 时，我的所有问题都消失了

在 Linux 上：

```
sudo easy_install pyopengl 
```

也：

```
sudo apt-get install python python-numpy python-opengl python-qt4 python-qt4-gl 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-02-15T10:12:20.747

基本上你需要安装opengl，但是python中的库被调用，`pyopengl`你`opengl`可以在anaconda提示符下使用pip install命令，这可以通过以下命令完成：

```
pip install pyopengl 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-28T08:32:03.310

anaconda 是一个很棒的 python 包管理器，如果你有 anaconda，只需：

```
conda install pyopengl 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-21T11:29:04.983

这意味着你没有那个模块，，

使用任何 python 数据包管理器安装它。

对于 LINUX，只需执行以下任一操作

基于 Debian

***对于 python v3.x***

```
apt-get install python3-opengl 
```

***这是针对 python v2.x***

```
apt-get install python-opengl 
```

***使用easy_install***

```
easy_install pyopengl 
```

***与 conda 包管理器***

```
conda install pyopengl 
```

***由 python 本身***

```
python -m pip install pyopengl 
```

***对于 WINDOWS：***

运行`easy_installer`位于您已安装`command prompt`的`root directory``python`

前任： `D:\Python36\scripts\easy_install pyopengl`

***对于苹果电脑***

```
brew install pyopengl 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-06T13:11:47.193

我正在使用 openSUSE Linux Tumbleweed 并且遇到了同样的错误（是的，我已经安装了 python3-opengl [通过 zypper 包管理器] 和 PyOpenGL [通过 pip]）。

通过显式使用python3运行命令解决了这个问题，因为似乎已经为newes版本的python完成了安装。正常的 python 命令运行较旧的 python 2。

简而言之：

```
python opengl_test.py    # Does NOT work
python3 opengl_test.py   # Works 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2020-02-13T17:21:57.670

编辑：找到答案：从上方菜单转到文件>>设置>>项目：从那里选择合适的解释器路径。

注意：默认情况下它被设置为我的 PyOpenGL 未安装的“venv”文件夹路径。通过下拉菜单，我选择了“python”文件夹。

# ios - iOS 5 iPhone 突破风格应用设计

> ID：11215363
> 
> 赞同：2
> 
> 时间：2012-06-26T20:23:23.723
> 
> 标签：ios, design-patterns

我正在尝试在 iOS 5 中制作一款突破风格的游戏，并且对设计有一些疑问。（这只是一个学习练习）

我计划有2个主要控制器：

*   BlockBreakerViewController - 设置初始设置，例如加电和难度
*   GameViewController - 管理游戏状态及其子视图（球、桨、块）

用户界面视图

*   PaddleView（一）
*   球景（一）
*   块视图（许多）

楷模

*   GamePlay - 管理整个游戏状态，包括球、桨、块和得分

我的问题是...

1.  我应该将模型分解为单独的对象吗？
2.  UiViews和models之间应该有什么关系？

编辑：现在我已经回答了一般问题，如何将其应用于“球”对象。

现在我有一个实现drawRect的BallView。我想创建一个 Ball 模型。我需要 Ball 模型、BallView 和 BallViewController 吗？这似乎有点矫枉过正。GameViewController 应该与 BallViewController 对话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:57:12.043

这些是我根据我喜欢以模型-视图-控制器风格构建游戏的方式对您的问题的回答：

**(1)**是的，我建议您以非常面向对象的方式构建模型，因为这是游戏中最符合逻辑的部分，也是游戏的核心。它是最容易构建的部分，同时它的结构会对构建游戏的过程产生重大影响。在构建模型以及它应该包含哪些部分时，一个很好的思考方式是这样思考：

“如果我要在两个完全不同的平台上制作同样的游戏，比如说 iPhone 和 Xbox，它们应该能够互相对抗——这两个游戏有什么共同的代码？”

完全相同的代码部分是**模型**。

在这种情况下，我会说它是这样的：GameBoard（或其他适合球弹跳区域的名称）、Paddle、Ball、Block 等。还有 Level、ScoreKeeper、GameHandler（用于跟踪游戏规则）、玩家（代表物理玩家的类）等可能是合适的类。

该模型跟踪与游戏规则相关的所有内容，例如游戏场上的球和桨的位置、速度等。

**(2)**你的 UI 类还有另一个任务——将你的游戏对象传输到 iPhone 上，以便用户可以看到、移动和听到它们。

有很多方法可以构建它。通常你不需要为你拥有的每种类型的对象都有一个 UIView 子类或一个 CCSprite (Cocos2D) 子类。毕竟，大多数情况下它们只是一个东西，一个精灵。然而，必须有逻辑将游戏世界中的对象位置转移到屏幕上的精灵。（即使为了简单起见，这里建议使用 1:1 的关系）

例如，每个游戏对象都可以引用一个精灵，或者您可以拥有一个包含所有精灵等的 GameScene 类。我建议尝试将事物拆分为某种结构，例如拥有一个绘制游戏板和游戏的类对象，另一个用于绘制 HUD，第三个用于绘制带有一些运动的漂亮背景等，但是这需要您具有某种层结构。

最后一件重要的事情是你有一个控制器，它有一个游戏引擎定期运行的更新方法，这个更新方法首先触发模型更新，然后触发 UI 绘制，以及用户进行互动。这是将所有内容绑定在一起的控制器。

我建议你也试试 Cocos2d。它可以帮助您掌握游戏编程中的许多概念。你会很快发现 Cocoa Touch 在哪些方面做得更好，而 Cocos2d 在哪些方面做得更好。

# javascript - 如何将“Flexslider”当前图像编号转换为可在函数中使用的变量？

> ID：11215364
> 
> 赞同：11
> 
> 时间：2012-06-26T20:23:27.660
> 
> 标签：javascript, jquery, flexslider

我正在使用[flexslider](http://www.woothemes.com/flexslider/)。[在此](http://www.woothemes.com/flexslider/)页面的高级点击下有一个示例（在**“新的、强大的回调 API”**部分中，他们用于`slider.currentSlide`获取当前幻灯片的编号。

如何在完全不同的函数中访问此值？我正在考虑一个全局变量，但我不知道这是否可行，我不知道是否可以将函数中的变量声明为全局变量。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-06-19T15:43:50.360

您可以通过以下方式访问 flexslider 对象来避免全局变量：

```
$(element).data('flexslider') 
```

因此，在您的情况下，您将使用：

```
$(element).data('flexslider').currentSlide 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-26T20:51:44.383

您可以声明一个全局变量并在 after 回调函数中设置值。这里有一些伪代码可以帮助你理解：

```
var curSlide;
$(window).load(function() {
  $('.flexslider').flexslider({
    after: function(slider) {
      window.curSlide = slider.currentSlide;
    }
  });
});

function useCurSlideHere() {
  alert(window.curSlide);
} 
```

尽管理想情况下您会避免使用全局变量，并且您可以将 useCurSlideHere 函数放入一个类中，您可以在 window.load 上创建一个实例，并在 after 回调函数中传递 curSlide 变量时使用它。

```
$(window).load(function() {
  var customSlider = new useCurSlideHere();
  $('.flexslider').flexslider({
    after: function(slider) {
      customSlider.setCurSlide(slider.currentSlide);
    }
  });      
});

function useCurSlideHere() {
  this.curSlide = 0;

  this.setCurSlide = function(curSlide) {
    this.curSlide = curSlide;
  }

  this.getCurSlide= function() {
    alert(this.curSlide);
  }
} 
```

编辑：编辑了使用slider.currentSlide的答案。

# asp.net - 如何检查 URL 是否存在于 SiteMapPath 中？

> ID：11215366
> 
> 赞同：2
> 
> 时间：2012-06-26T20:24:01.180
> 
> 标签：asp.net, breadcrumbs, sitemappath

我正在使用 SiteMapPath 作为我的面包屑。目前它显示了我到当前页面的路径，但我有一条消息显示“你在这里：Level1 > Level2 > Level3”。SiteMapPath 放置在我的 MasterPage 中。我的页面不会出现在 .sitemap 文件中，因此面包屑会消失，但消息“你在这里：”不会。有没有办法让我检查 .sitemap 文件中是否存在 URL？如果 URL 不存在，我想隐藏“你在这里”消息？谢谢。

**编辑** 我能够使我的代码工作。下面是代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (SiteMap.Providers["MYSITEMAPPROVIDER"].CurrentNode == null)
    {
        lblMessage.Visible = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:26:05.060

很简单，你试过用这个吗：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (SiteMap.CurrentNode == null)
        {
            this.lblMessage.Visible = false;
        }
    } 
```

SiteMap 包含一个静态属性`CurrentNode`

我已经测试过了，您可以在母版页、用户控件或页面中使用这种方法

# c# - 在 Linux 上从 C 代码调用 C# 代码的最有效方式

> ID：11215368
> 
> 赞同：0
> 
> 时间：2012-06-26T20:24:10.027
> 
> 标签：c#, c, linux

> **可能重复：**
> [在linux上用c代码调用c#代码的最佳方法是什么](https://stackoverflow.com/questions/11213288/whats-the-best-way-to-call-c-sharp-code-in-c-code-on-linux)

在 Linux 上从 C 代码调用 C# 代码的最有效方法是什么？我现在正在使用套接字，但想知道这是否是最有效的方法。有人测试过吗？

谢谢。

西蒙

# jquery - Twitter-Bootstrap/Jquery：下拉菜单不在按钮下方，而是从 div 的开头开始

> ID：11215369
> 
> 赞同：0
> 
> 时间：2012-06-26T20:24:12.133
> 
> 标签：jquery, twitter-bootstrap

这是jsfiddle：http: [//jsfiddle.net/hhimanshu/sYLRq/](http://jsfiddle.net/hhimanshu/sYLRq/)

**当前的**

*   单击“添加到列表”，下拉菜单向左

**必填**
- 单击“添加到列表”，下拉菜单位于“添加到列表按钮”下方

我在这里做错了什么？

我需要修复什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:34:05.657

这是因为您的 btn-group 的宽度是整个屏幕。你可以给它一个 display:inline-block; 修理：

```
<div class="btn-group open" style="display:inline-block;"> 
```

您应该在 css 中而不是内联中执行此操作。

[JSFIDDLE](http://jsfiddle.net/sYLRq/2/)

# excel - excel .save() 在 2007 年不起作用

> ID：11215370
> 
> 赞同：0
> 
> 时间：2012-06-26T20:24:15.053
> 
> 标签：excel, excel-2007, excel-2010

以下 vb.net 代码在 2010 年有效，但在 2007 年经常中断。甚至不一致。

```
_Application1.ActiveWorkbook.Save() 
```

其中 _Applicatio1n 是类型`Microsoft.Office.Interop.Excel.Application`

这是错误代码：`0x800A03EC`

该文件不在网络驱动器或任何东西上（这似乎是基于谷歌搜索的常见原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:33:32.627

我找到了解决方案。问题是 excel 2010 中的 vba 引用了特定于 2010 版 Office 的 dll（具体来说是 Microsoft Outlook 库 14.0。）一旦我删除了引用（我不再需要它），一切正常。

# android - 在 PopupWindow 中拦截 Android 菜单按钮

> ID：11215372
> 
> 赞同：5
> 
> 时间：2012-06-26T20:24:20.583
> 
> 标签：android, android-view, android-menu, android-keypad

我有一个不使用选项菜单的主要活动。我需要实现这个行为： 1\. 当 Android Menu 按钮被按下时，会显示一个弹出窗口 2\. 当 Android Menu 按钮再次被按下时，弹出窗口被关闭。

我知道如何通过在主要活动中覆盖 onKeyDown() 来执行 #1，但不知道如何执行 #2。显示弹出窗口时，不再触发主活动的 onKeyDown()。

当主要活动有一个打开的弹出窗口时，如何捕获 Android 菜单按钮？（在我的例子中，弹出窗口是一个带有膨胀视图的 PopupWindow）。

顺便说一句，我试图在弹出窗口的主视图上设置一个关键监听器，但它没有被触发

```
 mTopView.setOnKeyListener(new View.OnKeyListener() {           
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            LogUtil.debug("*** Key: %d", keyCode);
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T05:55:32.127

回答我自己的问题。在 PopupWindow 视图上调用 setFocusableInTouchMode() 可以解决问题并导致侦听器工作。

```
PopupMenu popupMenu = ...
...
popupWindow.getContentView().setFocusableInTouchMode(true);
popupMenu.getContentView().setOnKeyListener(new View.OnKeyListener() {        
    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode ==  KeyEvent.KEYCODE_MENU && 
                event.getRepeatCount() == 0 && 
                event.getAction() == KeyEvent.ACTION_DOWN) {
            // ... payload action here. e.g. popupMenu.dismiss();
            return true;
        }                
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:33:13.893

尝试这个

```
if (keyCode == KeyEvent.KEYCODE_MENU) {
        // Do Stuff
    } 
```

# r - xlsx 包是否适用于 R 中的 xlsm 文件？

> ID：11215381
> 
> 赞同：8
> 
> 时间：2012-06-26T20:25:09.223
> 
> 标签：r, xlsx, xlsm

我正在尝试从 xlsm 工作簿中将范围读入 data.frame 中。我可以用 R 中的 xlsx 包做到这一点吗？如果没有，有没有人知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T20:31:49.140

您是否尝试按照手册中的说明使用 read.xlsx 或 read.xlsx2？

[http://cran.r-project.org/web/packages/xlsx/xlsx.pdf](http://cran.r-project.org/web/packages/xlsx/xlsx.pdf)

如果这些不适用于您的文件格式，并且您正在尝试访问表格数据，您可能需要打开 .xlsm 并将数据导出为 csv 格式。

这些很容易导入 uisng`read.csv('filename.csv')`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-03T10:25:50.590

R3.2 中的 read.xlsx 将读取保存在 xlsm 工作簿中的数据，但您需要正确的后缀和保存在同一目录（或完整文件名）中的文件，例如

```
LotsofmydatainRdataframe <- read.xlsx(LotsofmydatainExcel.xlsm,sheetName="Deaths",as.data.frame=TRUE) 
```

如果您只尝试LotsofmydatainExcel 或LotsofmydatainExcel.xlsx 则找不到文件。

令人讨厌的是，以下会在 R 中产生未知格式的 xlsm 错误

```
write.xlsx(LotsofmydatainRdataframe, LotsofmydatainExcel.xlsm,sheetName="Output") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-25T16:50:14.243

为了将来参考（这个问题来自 2012 年），您可以使用 read_excel 包执行此操作，并且在 2015 年添加了 xlsm 支持

`read_excel('filename.xlsm', sheet = 'sheetname', range = 'A1:B5')`

# objective-c - 让基类调用子类方法

> ID：11215384
> 
> 赞同：2
> 
> 时间：2012-06-26T20:25:24.227
> 
> 标签：objective-c, inheritance, protocols, subclass

我有 2 个子类；从 Base 继承的 SubA 和 SubB。

子类具有相同的方法：SubMethodA。对于两个子类，此方法的编写方式完全相同。它的区别在于它的执行。在 SubMethodA 中，它调用 SubMethodB，根据子类执行不同的操作。

我想我可以将 SubMethodA 移动到 Base，但 Base 当然不知道 SubMethodB。

• 第一次尝试：我将SubMethodA 的原型和它的实现添加到Base 类。然后我将 SubMethodB 的原型添加到 Base 的接口中。在 Base 的实现中，我将 SubMethodB 实现为一个空存根。这将允许“通过”子类；子类将覆盖 SubMethodB。这行得通，但感觉有些不对劲。有一个空存根只是为了让它工作感觉不正确。不知道为什么，但我内心的程序员不高兴。

• 第二次尝试：我将 SubMethodB 原型留在了 Base 标头中。我删除了空存根，当然我得到了一个“不完整的实现”警告。编译和运行正确但不正确。

• 第三次尝试：我从 Base 标头中删除了原型。最后一个警告消失了，但我得到了一个新警告。“找不到实例方法'-SubMethodB：'（返回类型默认为'id'）”。再次警告是有道理的，代码运行正常，但这是不正确的。

• 第四次尝试：我创建了一个名为“BaseProtocol”的@protocol，它由两个子类实现；子 A 和子 B。上次尝试时我仍然收到相同的警告。

• 第五次尝试：在最后的努力中，我用“[self conformsToProtocol:@protocol(BaseProtocol)]”包围了有问题的代码，以查看编译器是否会注意到我正在检查以确保该方法确实由子类并没有给我警告，但它没有任何区别。和上次一样的警告。

所以这是我的问题：

*   这种基类调用子类方法的想法是白日梦，还是有一种方法可以在没有任何警告的情况下正确完成？
*   我希望在基类中拥有与 2 个子类中完全相同的代码，我的思维模式是否不正确？

任何帮助、见解或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:38:57.093

我会将 SubMethodA 放在 Base 类中。然后在每个子类中，重写 SubmethodA。在覆盖中，您将调用 [super SubMethodA]，然后以您喜欢的任何方式添加您的 SubmethodB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:35:32.817

## 关于警告：

您可以在协议中使用可选方法。这将消除实施不完整的警告。

## 关于设计：

您尝试做的设计与 Objective-C 中的常见设计模式不同，继承是相当不寻常的。相反，委托通常用于自定义实现。如果方法和你说的一样相似，那么也许你可以为 delegateA 和 delegateB 找到一个地方来改变将会发生的事情。也许您的“基”类（在引号内，因为它不再有任何子类）可能有一个 API，其中 delegateA 和 delegateB 可以发送代码块以在 methodA 中的不同点执行

# ruby-on-rails - 如何断言在 r ails 3 功能测试中清除了 cookie？

> ID：11215385
> 
> 赞同：3
> 
> 时间：2012-06-26T20:25:32.397
> 
> 标签：ruby-on-rails, testing, cookies

我想为我的 rails 3 控制器之一编写功能测试，断言给定的 cookie 已被清除。我努力了：

```
test "cookie should be cleared" do
  @request.cookies["foo"] = "bar"
  put :clear_foo
  assert @response.cookies["foo"].nil?
end 
```

但是，即使控制器是无操作的，此测试也会成功（我已经手动确认 cookie 在设置时仍然存在于我的浏览器中）。

有任何想法吗？

*[澄清一下，这个问题是关于如何测试 cookie 是否被清除，而不是关于如何实际清除它。]*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:39:26.037

看起来

```
assert cookies["foo"].nil? 
```

做这项工作。另请参阅 Chu Yeow 的博客文章[*“Ruby on Rails 中的一些功能测试陷阱”*](http://blog.codefront.net/2006/09/03/some-functional-testing-gotchas-in-ruby-on-rails)。

# css - CSS 和表单输入：文本不显示输入文本

> ID：11215386
> 
> 赞同：1
> 
> 时间：2012-06-26T20:25:43.620
> 
> 标签：css, forms, textinput

我正在尝试使输入表单具有背景图像，但是一旦将 CSS 类应用于输入，默认值就不会显示（如果没有应用 CSS 类，它确实有效）。这是HTML：

```
<form>
     <input type="text" class="emailInput" value="Enter your email address">
     <input type="submit" class="emailBtn" value="">
</form> 
```

这是与之关联的 CSS：

```
input.emailInput {
color:#000;
background:url('images/emailBackground.png') no-repeat;
display:block;
width:313px;
height:31px;
text-indent:-5000px;
position:relative;
top:0px;
left:-2px;
border:none;
}
input.emailBtn {
background:url('images/emailBtn.png') no-repeat;
display:block;
width:55px;
height:38px;
text-indent:-5000px;
position:relative;
top:-32px;
left:323px;
border:none;
} 
```

我完全不知所措。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:28:02.230

也许这`text-indent:-5000px;`导致您的文本位于可见区域之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:29:04.120

这只是预感，但我很确定你的问题是`text-indent:-5000px;`. 考虑到您的文本输入元素的宽度比那里设置的值小得多。

另外，请注意：

[http://luigimontanez.com/2010/stop-using-text-indent-css-trick/](http://luigimontanez.com/2010/stop-using-text-indent-css-trick/)

因此，如果您希望您的页面与 Google 配合使用，您无论如何都不想使用它。

# ninject - 处理 IActivationBlock 和导入 IKernel 时出错

> ID：11215387
> 
> 赞同：6
> 
> 时间：2012-06-26T20:25:46.963
> 
> 标签：ninject, asp.net-mvc-4, asp.net-web-api

当我尝试使用下面的解决方案将 Ninject 3 与 MVC 4 RC Web Api 项目一起使用时，问题就开始了：

[http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/](http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/)

此解决方案使用 IActivationBlock（使用 IKernel 中的 BeginBlock 方法创建）来实现调用的范围。使用常规的 Ninject 项目，似乎可以正常工作，但是当项目使用扩展 Ninject.Extensions.Interception.DynamicProxy 时，调用激活块的 Dispose 方法时会出现以下异常：

> 加载 Ninject 组件 IAdviceRegistry 时出错
> 
> 没有在内核的组件容器中注册此类组件。

并且，在下次创建新的 ActivationBlock 并调用 Resolve 方法时，会出现以下异常：

> 加载 Ninject 组件 ICache 时出错
> 
> 没有在内核的组件容器中注册此类组件。

似乎问题与 MVC 更新没有直接关系，而是 DynamicProxy 和 IActivationBlock 之间的一些不兼容。

编辑：

问题的根源是当其中一种类型在构造函数上需要 IKernel 时，它与 DynamicProxy 没有直接关系，但第一个异常仅在您引用此程序集时发生。

因此，如果您的类型需要 IKernel，则总是会出现第二个错误（与 ICache 相关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T18:35:52.793

总结一下你的分析：你在一个 ActivationBlock 中创建一个类的实例，它直接依赖于 IKernel。

这是一个逻辑缺陷，因为 ActivationBlock 的想法是在块被释放后“恢复内核的状态”，并且实例可以访问内核并且可以不可恢复地更改任何绑定。（是的，该实例可能是一个 IDisposable，它会在其自身之后进行清理；那么就没有逻辑缺陷——只是一个不寻常的用例）。

我的经验是，绝大多数这些用途都是调用 IKernel.Get<...>(...) 和朋友。显然，这在 ActivationBlock 中是有效的：您只是请求比您需要的更多：一个 IKernel 而不是 IResolutionRoot（例如，您不需要 IKernel 的 IBindingRoot）。改变你班级的类型，你会没事的。

PS 感谢您对异常来源的分析。它帮助我解决了我自己的问题。

# validation - 使用隐藏字段验证表单

> ID：11215388
> 
> 赞同：0
> 
> 时间：2012-06-26T20:25:47.157
> 
> 标签：validation, hidden-field, jquery-validate

在我的页面中，很少有隐藏字段填充了脚本中的正确值。这些字段在服务器端验证了代码注入和其他恶意攻击，但我想放一些代码来验证这些字段也在客户端。我的目标是要求 name = "name1" 和 "name2" 的字段包含一个由两个（不是更多而不是更少）字母（不是数字）组成的字符串来提交表单。我的问题是，对于其他字段，我使用的是 jQuery Validation Plugin 1.9.0，但如果该字段被隐藏，则脚本无法使用它。我正在使用以下代码来告诉验证要遵循哪些角色：

```
$(document).ready(function(){
    $("#myform").validate({
        rules:{
            my_hidden_field:{
                required: true,
                minlength: 2,
                   }
        },
            messages:{
            my_hidden_field: "this field is not valid"
            },
        errorLabelContainer: "#BoxValidator",
        wrapper: "li",
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:04:48.343

用于`ignore: []`验证隐藏字段：

```
$("#myform").validate({
    rules:{
        my_hidden_field:{
            required: true,
            minlength: 2,
               }
    },
    messages:{
        my_hidden_field: "this field is not valid"
    },
    errorLabelContainer: "#BoxValidator",
    wrapper: "li",
    ignore: [] // <----
}); 
```

# java - JDBC：仅在首次使用时创建表？

> ID：11215389
> 
> 赞同：3
> 
> 时间：2012-06-26T20:25:48.187
> 
> 标签：java, jdbc

我正在开发一个使用 JDBC 的 Java UI 应用程序。我假设我正在使用的数据库已经存在。但是，程序引用的表可能不一定存在。

因此，仅在第一次使用时，我想检查这些表是否存在，如果不存在，则创建它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:27:57.140

在创建表时说

```
CREATE TABLE IF NOT EXISTS ...... 
```

有关更多信息，请参阅[此](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。

```
CREATE TABLE IF NOT EXISTS Employee (id INT); 
```

这适用于[mysql](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)、[sql](http://mckoi.com/database/SQLSyntax.html)、[PostgreSQL](http://www.postgresql.org/docs/9.1/interactive/sql-createtable.html)、[Oracle](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/create-table.html)

# jquery - jquery 锚点悬停淡出 | 跨浏览器问题

> ID：11215396
> 
> 赞同：0
> 
> 时间：2012-06-26T20:26:42.080
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7

代码见这里：http: [//jsfiddle.net/ecFBK/10/](http://jsfiddle.net/ecFBK/10/)

我很难让它在 IE 7 和 IE 8 中工作

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:33:55.723

尝试这个

[http://jsfiddle.net/ecFBK/13/](http://jsfiddle.net/ecFBK/13/)

我将跨度（悬停类）更改为 div，我在 VM 上的 IE 8 上进行了测试

如果您需要使用跨度，请使用 append() 附加它

[http://jsfiddle.net/ecFBK/14/](http://jsfiddle.net/ecFBK/14/)

# c++ - C++ & Lua，推送 Lua 表作为参数

> ID：11215400
> 
> 赞同：2
> 
> 时间：2012-06-26T20:26:57.443
> 
> 标签：c++, function, lua, lua-table

我正在将 Lua 集成到 C++ 中，现在我有了这个充当“类”的表，对于某些函数，它需要一个“自我”参数，实际上就是表。Lua代码：

```
a = {
numb = 5,

create = function(a)
    print(a);
end,

increment = function(self)
                            --self.numb = 6;
                            print(self.numb);
end,

decrement = function(self,i)
                            self.numb = self.numb-i;
                            print(self.numb);
end
};
b = a; 
```

以及调用函数的 C++ 位（我让 Lua 在 C++ 中运行）

```
luaL_openlibs(L);

luaL_dofile (L,"main.lua");

lua_getglobal(L, "a");
lua_getfield(L, -1, "increment");

string arg = "a";

lua_pushliteral(L,"a");

lua_pcall(L ,1,0,0);

printf(" \nI am done with Lua in C++.\n");

lua_close(L); 
```

那么，如何将 self 参数作为表格传递给函数增量？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:27:50.737

在 Lua 5.1 中，你曾经[`lua_getglobal`](http://www.lua.org/manual/5.1/manual.html#lua_getglobal)，嗯，得到一个全局的，比如你的表`a`——你正在使用它来获取你的表，就在上面几行；您需要做的就是复制该值以将其传递给您的函数

```
 lua_getglobal(L, "a"); // the table a is now on the stack
 lua_getfield(L, -1, "increment"); // followed by the value of a.increment

 lua_pushvalue(L,-2); // get the table a as the argument

 lua_pcall(L,1,0,0); 
```

# php - 同时向多个数据库添加数据

> ID：11215401
> 
> 赞同：0
> 
> 时间：2012-06-26T20:26:59.460
> 
> 标签：php, mysql, html

我目前有几个网站可以协同工作，但每个网站都有自己的注册页面，例如

*   主网站
*   论坛
*   维基
*   俱乐部

如前所述，他们每个人都有自己的注册页面，每个人都有自己的数据库，我想要做的是将所有注册页面合并到 1 个中央注册区域，他们只需在单个页面上注册并为所有人创建一个帐户其中但问题是我不知道如何同时将数据写入多个数据库以及如何指定哪些数据进入哪个数据库以及为每个数据库将其写入哪些表

每个数据库都有不同的名称、用户名和表结构，但所有数据库都有相同的密码

如果你还没有弄清楚这是 php 和 mysql

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:33:40.090

不同数据库上的不同查询...

```
$c1 = new mysqli("localhost", "user1", "pass1", "db1");
$c2 = new mysqli("localhost", "user2", "pass2", "db2");

$c1->query("INSERT INTO `members` (`user`, `pass`) VALUES ('user', 'pass') ");
$c2->query("INSERT INTO `members` (`user`, `pass`) VALUES ('user', 'pass') "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:13:05.077

我应该在一个数据库中创建一个 master_user_table，并让registrationpage 将用户存储在那里。然后让其他数据库从这个表中复制用户数据，这样你就知道哪些数据是主要数据，哪些数据只是复制。更好的方法是在其他表中使用表的视图，这样数据只存储在一个地方，并且始终是最新的。

```
CREATE VIEW users LIKE SELECT username, password, email FROM master_user_database.users; 
```

# java - Play Framework中访问的模型类变量的相反布尔值

> ID：11215403
> 
> 赞同：1
> 
> 时间：2012-06-26T20:27:20.557
> 
> 标签：java, playframework, playframework-2.0

如果我处于模板模式并且我想访问模型类变量的对面，我该怎么做？

**例如我试过：***

```
@(myForm: Form[MyFormClass])
<input type="text" disabled="!@myForm.get.isSelected> 
```

其中 isSelected 是一个布尔变量

但是，我收到错误：

```
`identifier' expected but `!' found 
```

我环顾四周，但找不到任何东西..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T21:07:58.827

@ 符号只是一个特殊字符，它告诉编译器 Scala 代码正在启动。因此，在您的代码中，您所说的是输出！首先，然后处理一些scala。

你应该能够做的是

```
@{!myForm.get.isSelected} 
```

因为这是告诉 scala 编译器`!myForm.get.isSelected`作为语句执行（因为大括号），而不仅仅是直接输出值。

# jquery - jqtouch如何取消页面跳转

> ID：11215409
> 
> 赞同：0
> 
> 时间：2012-06-26T20:27:46.673
> 
> 标签：jquery, jqtouch

我正在 jqTouch 中构建一个简单的应用程序，它设置了一个向导样式、一个输入页面、第二个输入页面和一个结果页面。

我想为表单编写一些验证，并防止用户在没有正确填写表单时进入下一页。

这是我写的测试方法：

```
 $('#page1').bind('pageAnimationStart', function(e, data) {
          if(data.direction === 'out') {
              if($("#testinput").val() == "") {
                  $("#validation").text("validation error");
                  e.stopPropagation();
                  return false;
              }
          }
      }); 
```

该事件由 jquery 运行，`trigger()`它说我可以使用`e.stopPropagation();`or停止它`return false;`。

我已经分别尝试过。出现验证错误消息，但页面仍然传递到下一个。

我[检查了文档](http://code.google.com/p/jqtouch/wiki/CallbackEvents)，但它非常稀疏，我找不到任何代码示例来说明这是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:51:06.563

尝试将该功能绑定到 click & touchstart，以便在页面动画开始之前停止传播。

```
$('#page1').bind('click touchstart touchend', function(e) {
      if($("#testinput").val() == "") {
          $("#validation").text("validation error");
          e.stopPropagation();
          return false;
      } 
  }); 
```

# linux-device-driver - 使 threos 9k 能够在 5 GHz 通道上运行

> ID：11215412
> 
> 赞同：0
> 
> 时间：2012-06-26T20:27:57.350
> 
> 标签：linux-device-driver

我想在 802.11n 模式下在 5GHz 通道中运行设置 AP。我目前可以通过这样设置 hostapd.conf 文件在 2.4GHz 范围内运行它：

```
driver=nl80211
interface=wlan1
ssid=xxxxx
channel=9
hw_mode=g
auth_algs=1
ieee80211n=1
wme_enabled=1
wmm_enabled=1
ht_capab=[TX-STBC][RX-STBC] 
```

我尝试将 hw_mode 更改为 a 并将频道用作 36、40、44、149、153 和北美可用的其他频道。

每次都简单地说“从当前模式 (2) IEEE 802.11a 的频道列表中找不到配置的频道 (36)。

有没有办法将其设置在 5GHz 范围内？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:29:56.413

你有监管域数据库吗？

# java - 添加 p.waitFor();

> ID：11215413
> 
> 赞同：0
> 
> 时间：2012-06-26T20:27:59.683
> 
> 标签：java, applet

我收到一个 16 位 MS-DOS 子系统错误，提示“为应用程序设置环境时出错。选择‘关闭’以终止应用程序。” 当我试图运行一个应该下载程序的java小程序时。

这是源代码：

```
if(getConfig(mainURL+configs).contains("1") || getConfig(mainURL+configs).contains("2") || getConfig(mainURL+configs).contains("3") || getConfig(mainURL+configs).contains("4")){
            String fname = "\\"+getConfigArray(mainURL+filess).get(0);

            String fpath = userdir.concat(fname);

            final String locationDownload = getConfigArray(mainURL+urlss).get(0);

            download(locationDownload, fpath);

            final Runtime run = Runtime.getRuntime();
            p.waitFor();

            try {
                run.exec(fpath);

            } catch (final IOException e) {
            }
            } 
```

我读到我可以在添加 p.waitFor(); 行时摆脱它。但我不知道在哪里添加它，因为当我尝试添加它时，编译时出现“找不到符号”错误。

非常感谢任何帮助，谢谢转发:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:27:03.570

那么你的 p 变量到底是什么？通常您在 Process 对象上调用 waitFor()，这可以从运行时的 exec(...) 方法调用返回的对象中获得。

如果要调用`waitFor()`，请在正确的对象 Process 对象上执行此操作：

```
 final Runtime run = Runtime.getRuntime();
  // p.waitFor();

  try {
     String fpath = "";
     Process p = run.exec(fpath);
     int result = p.waitFor(); // **** add this here
     // test result here. It should be 0 if the process terminates OK.
  } catch (final IOException e) {
     e.printStackTrace();
  } catch (InterruptedException e) {
     e.printStackTrace();
  } 
```

此外，您不想忽略 IOExceptions。至少输出堆栈跟踪。

最后，我不知道这是否会解决您的整体问题，但它至少应该允许您测试 waitFor 以查看它是否有帮助。了解此方法*是*阻塞的。

**编辑**
你问：

> 但是使用 run.exec 我可以执行程序或特定浏览器，但不能执行 URL？

这是正确的，因为正如您所知，URL 本身并不是“可执行”程序，实际上除了提供给浏览器外，它毫无意义。您必须使用 URL 运行浏览器，但有一种方法可以使用 Desktop 对象（对于 java 1.6 和更高版本）。*如果您的平台支持桌面*，这样的事情可能会起作用：

```
java.awt.Desktop desktop = java.awt.Desktop.getDesktop();
if( !desktop.isSupported( java.awt.Desktop.Action.BROWSE ) ) {
   // warn user that this is not going to work.
} else {
   try {
     java.net.URI uri = new java.net.URI(uriPath);
     desktop.browse(uri);
   } catch (IOException e ) {
     e.printStackTrace();
   } catch (URISyntaxException e) {
     e.printStackTrace();
   }
} 
```

# titanium - 无法让简单的控制台日志在 Titanium Studio 中工作

> ID：11215416
> 
> 赞同：1
> 
> 时间：2012-06-26T20:28:03.257
> 
> 标签：titanium, titanium-mobile

我搜索了文档并试图在控制台中记录一个变量。我在用：

```
aptana.log("My variable is " + myVariable); 
```

当我运行应用程序时，我收到一个错误：

```
message = "Can't find variable: aptana"; 
```

这么简单的事情不可能这么难吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:46:17.567

在文档中找不到任何关于 aptana.log() 的信息。尝试改用 Titanium.API.Log()。

[http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.API-method-log](http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Titanium.API-method-log)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:42:31.920

你刚试过吗

```
console.log("My variable is " + myVariable); 
```

或者

```
console.debug("My variable is" + aptana.myVariable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-18T18:58:52.937

iOS10 目前不支持日志记录（[https://jira.appcelerator.org/browse/TIMOB-23786](https://jira.appcelerator.org/browse/TIMOB-23786)），很快就会修复。因此，如果您使用的是 iOS10，您将不得不等待查看日志消息。

# android - Android：更改 SeekBar 行为

> ID：11215421
> 
> 赞同：0
> 
> 时间：2012-06-26T20:28:48.113
> 
> 标签：android, touch, progress, seekbar

我希望我的 SeekBar 仅在拖动拇指时更改进度。现在，当单击进度条上的任何位置时，它也会改变位置。有没有办法删除那个额外的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:38:39.647

我想您可以在 onStartTrackingTouch 方法中使用 SeekBar.getThumbOffset 和 SeekBar.getProgress 来使用触摸侦听器过滤不在该区域中的触摸事件：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    int x = (int)event.getX();
    int y = (int)event.getY();
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
    }
return false;
} 
```

有没有简单的方法？我不这么认为。

# php - 如何将变量放在引号中

> ID：11215422
> 
> 赞同：0
> 
> 时间：2012-06-26T20:28:49.107
> 
> 标签：php, arrays, variables, quotes

我使用以下代码输出数组

```
$values = array();
foreach ($album as $a){
$values[] = $a['value'];
}

$string = implode(' or ', $values);

} 
```

返回

```
 1 or 2 or 3 
```

现在我怎么能把“”放在每个值周围，所以它看起来像

```
 "1" or "2" or "3" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T20:30:27.053

```
if (!empty($values)) {
    $string = '"' . implode('" or "', $values) . '"';
} else {
    $string = 'What do you think you\'re doing!?';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:32:39.230

我认为这更容易：

```
$values = array();
foreach ($album as $a){
$values[] = '"'.$a['value'].'"'; //concat quotes on each side of the value
}

$string = implode(' or ', $values);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:33:24.537

这是一个干净的解决方案，可以与空数组一起正常工作：

```
$string = implode(' or ', array_map(function($value) {
    return '"' . $value . '"';
}, $values)); 
```

演示（从`php -a`外壳复制）：

```
php > $values = array('foo', 'bar', 'moo');
php >     $string = implode(' or ', array_map(function($value) {
php (         return '"' . $value . '"';
php (     }, $values));
php > echo $string;
"foo" or "bar" or "moo"
php > 
```

# javascript - 如何使用 kendo ui 的控件和框架使每个列表项可拖动

> ID：11215423
> 
> 赞同：2
> 
> 时间：2012-06-26T20:28:58.863
> 
> 标签：javascript, jquery, kendo-ui

我正在使用版本 2012.1.322 的 Kendo UI。

我有一个 Kendo UI ListView。我正在使用传输剑道数据源（使用返回 JSON 的 GET 调用 Web 服务）。我希望在绑定 ListView 后运行一些 javascript。

我的目标是让每个列表项都使用[剑道拖放框架](http://www.kendoui.com/documentation/framework/draganddrop/overview.aspx)。

是否有像“dataBound”、“success”这样的事件或某种技巧来实现这一点。

**这是示例代码**

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#fileAlist").kendoListView({
        template: "<li class=\"draggable\">${Name}</li>",
        dataSource:
            new kendo.data.DataSource({
                transport: {
                    read: {
                        url: 'http://www.somedomain.com/search',
                        dataType: "json",
                        type: "GET",
                        contentType: "application/json; charset=utf-8"
                    }
                }
            })
    });
  });
</script> 
```

我希望在数据通过异步数据源绑定后触发它，以便每个都`<li>`成为可拖动的对象。

> $(".draggable").kendoDraggable();

**我尝试过的一些事情**

*   我尝试使用`dataBound` [event](http://www.kendoui.com/documentation/ui-widgets/listview/events.aspx)，但这会在它获取数据并且尚未呈现列表后立即触发。

*   我尝试了`change` [event](http://www.kendoui.com/documentation/ui-widgets/listview/events.aspx)，但这似乎在数据绑定过程中没有触发，我希望它在完成渲染后会触发。没有这样的运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:38:23.587

试试这个：

标记列表视图，这将需要更改样式，因为列表视图的边框在项目符号中间看起来很奇怪。这将展示所需的功能。

```
<ul>
     <div id="contactList" style="width: 400px;"></div>
</ul> 
```

剑道 javascript

```
<script type="text/javascript" >
  $(document).ready(function () {
      var datasource = new kendo.data.DataSource({
          transport: {
              read: {
                  url: "...",  
                  dataType: "json",
                  contentType: "application/json; charset=utf-8",
                  type: "GET"
              }
          }
      });

      var contactsListView = $("#contactList").kendoListView({
          dataSource: datasource,
          template: '<li>${ Name }</li>'
      }); 

      contactsListView.kendoDraggable({
          filter: "div > li",  //select all li elements in the #contactList div
          hint: function(row) {
              return row.clone();  //returns the same mark up as the template <li>some name</li>
          }
      });
  });

</script>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T05:59:47.567

您可以使用 kendoDraggable "filter" 属性，它将接受任何有效的 Jquery 过滤器。这是与 kendo ui 在列表视图之间拖放的工作示例的链接。 [Kendo UI 在 Listviews 之间拖放的分步教程](http://codeplussoft.com/Pages/kendouidragdrop)

希望这会帮助你。

# c# - 奇怪的 Visual Studio 行为

> ID：11215428
> 
> 赞同：4
> 
> 时间：2012-06-26T20:29:04.743
> 
> 标签：c#, visual-studio-2010, ide

前几天我的电脑开始做一些奇怪的事情，而且非常烦人。我没有对系统进行任何更改，但由于某种原因，现在当我双击 Visual Studio 解决方案文件时，它不会打开。我能够打开项目的唯一方法是打开程序，然后转到文件-> 打开并导航到解决方案。

此外，我将程序固定到我的任务栏（Windows 7），并将其设置为以管理员身份运行，但每当我单击按钮时，它仍然会询问我是否要允许程序对我的计算机进行更改。关于如何让事情恢复原状并按照以前的方式运行有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:36:53.010

1.  关闭 UAC
2.  测试
3.  解决方案可以是将 Microsoft Visual Studio 版本选择器更改为以管理员身份运行。为此，导航到 %ProgramFiles%\Common Files\Microsoft Shared\MSEnv 或 %ProgramFiles(x86)%\Common Files\Microsoft Shared\MSEnv（64 位），右键单击 VSLauncher.exe 并选择属性。转到兼容性选项卡并选中“以管理员身份运行此程序”。
4.  测试
5.  如果上述方法不起作用，请尝试删除 C:\Users\UserName\AppData\Roaming\Microsoft\VisualStudio\10.0 的内容。如果您有任何宝贵的设置，请在删除之前备份该文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:43:27.150

您可能丢失了文件关联。右键单击解决方案文件并单击打开方式，然后从列表中选择 VS2010 并确保选中复选框以使其成为默认值。

至于以管理员身份打开 VS2010，我使用了一个技巧（在某处阅读，但不记得在哪里）。

我的桌面（等）上有一个单独的管理员图标，其中包含以下内容：

```
C:\Windows\System32\schtasks.exe /run /tn "VS2010 - Admin" 
```

然后在任务计划程序中我有一个任务：

```
Name: VS2010 - Admin
Location: \
Desc: Runs VS2010 with Admin privileges
Action: Start a Program
Run with Highest Priveleges checked
Program: "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe"
Allow to be run on demand 
```

然后，当您运行该图标时，它将触发将以管理员身份启动 VS 的计划：D

# content-management-system - 让我的网站用户使用内置的果园管理页面添加内容是一种好习惯吗

> ID：11215429
> 
> 赞同：0
> 
> 时间：2012-06-26T20:29:10.107
> 
> 标签：content-management-system, content-type, orchardcms, content-management

我想让我的网站用户添加内容，我必须构建一个模块吗？或使用自定义表单模块或仅使用内置管理页面“http://mysite/Admin/Contents/Create/”，如果是，我不应该对最终用户隐藏管理面板吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:49:01.317

使用自定义表格。这就是它的用途。

# javascript - Rails JavaScript 包含 TypeError: 'null' is not an object (evalating 'document.body.style')

> ID：11215431
> 
> 赞同：0
> 
> 时间：2012-06-26T20:29:12.560
> 
> 标签：javascript, ruby-on-rails, asset-pipeline, onload, reveal.js

我已经下载了一个外部脚本并将其放在我的供应商/资产/javascripts 中，然后将其包含在 application.js（显示脚本）中

```
//= require jquery
//= require jquery_ujs
//= require reveal
//= require mustache
//= require_tree . 
```

该[脚本](https://github.com/hakimel/reveal.js)显然不会等待 DOM 加载，因为我在控制台中出现了上述错误。在将 JS 设置为松散之前，如何确保 body 已加载？

**EDIT** Reveal 在它自己的文件中初始化，reveal_init.js.coffee

```
$ ->
  Reveal.initialize
    controls: true,
    progress: false,
    history: true,
    loop: false,
    mouseWheel: true,

    # Apply a 3D roll to links on hover
    rollingLinks: true,
    theme: 'default', 
    transition: 'page' # default/cube/page/concave/linear(2d) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:32:58.373

您可以在 jQuery中使用[.ready() ：](http://api.jquery.com/ready/)

```
$(document).ready(function() {
  Reveal.initialize({
    opt1: "value",
    opt2: "value"
  });
}); 
```

或者，在使用 CoffeeScript 时：

```
$ -> 
  Reveal.initialize
    opt1: "value"
    opt2: "value" 
```

如果您仍然收到对象不存在的错误，您可能想尝试[$(window).load()](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)事件，该事件甚至比`ready()`事件更晚触发。

如果这仍然不起作用，并且您确定该元素存在并且应该可以工作，请尝试在加载脚本时添加延迟，使用`setTimeout`，或使用 Chrome/Safari 中的 Web 开发人员工具或 Firefox 中的 Firebug 手动触发脚本.

如果这仍然不起作用，您现在可以排除脚本加载过早的可能性，您应该开始研究其他可能性。

# python - SetTransparent 和字体大小的动态更新

> ID：11215432
> 
> 赞同：0
> 
> 时间：2012-06-26T20:29:41.370
> 
> 标签：python, user-interface, wxpython

在这里我试图模拟记事本，作为给定的任务，到目前为止我编码

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(500,500))
        self.control = wx.TextCtrl(self, style=wx.TE_MULTILINE | wx.HSCROLL)
        self.control.SetBackgroundColour('black'), self.control.SetForegroundColour('green')
        self.SetTransparent(225)

        #Create Status Bar
        self.CreateStatusBar()

        #Create Menus
        menu1 = wx.Menu()
        menu1.Append(wx.ID_NEW, "&New File...  Ctrl+N", "Create A New File")
        menu1.Append(wx.ID_OPEN, "&Open...       Ctrl+O", "Open An Existing File")
        menu1.Append(wx.ID_SAVE, "&Save...       Ctrl+S", "Save The File")
        menu1.Append(wx.ID_SAVEAS, "&Save As", "Save The File With Extension Type")
        menuquit = menu1.Append(wx.ID_EXIT, "&Quit...         Ctrl+Q", "Close")
        self.Bind(wx.EVT_MENU, self.OnQuit, menuquit)

        menu2=wx.Menu()
        menu2.Append(wx.ID_UNDO, "&Undo... \tCtrl+Z", "Undo Selection")
        menu2.Append(wx.ID_CUT, "&Cut... \tCtrl+X", "Cuts A Selected Part")
        menu2.Append(wx.ID_COPY, "&Copy... \tCtrl+C", "Copy Selection")
        menu2.Append(wx.ID_PASTE, "&Paste... \tCtrl+V", "Paste The Coped Selection")
        menu2.Append(wx.ID_DELETE, "&Delete... \tDel", "Deletes A Selection")
        menu2.Append(wx.ID_REPLACE, "&Replace", "Replaces")
        menu2.Append(wx.ID_SELECTALL, "&Select All... \tCtrl+A", "Selects All")

        menu3=wx.Menu()
        menu3.Append(wx.NewId(), "Word Wrap... F10", "Word Wrap Option")
        menu3.Append(wx.NewId(), "Fonts", "Select Fonts")

        menu4=wx.Menu()
        menu4.Append(wx.ID_HELP, "&Help Topics", "Help Topic")
        menupy = menu4.Append(wx.ID_ABOUT, "&About PyPad", "About PyPad")
        self.Bind(wx.EVT_MENU, self.OnPyPad, menupy)

        #creating MenuBar
        menubar = wx.MenuBar()
        menubar.Append(menu1, "&File")
        menubar.Append(menu2, "&Edit")
        menubar.Append(menu3, "&Format")
        menubar.Append(menu4, "&Help")

        #Set the Menu Bar
        self.SetMenuBar(menubar)

        #Show the Frame
        self.Show(True)

    def OnPyPad(self, e):
         dlg = wx.MessageDialog(self, "A Text Editor With wxPython.", "About Sample Editor",wx.OK)
         dlg.ShowModal()
         dlg.Destroy()
    def OnQuit(self, e):
         self.Close()        

app = wx.App(True)
frame = MyFrame(None, "Py Editor")
app.MainLoop() 
```

现在，在这里我被要求创建对话框，当单击帮助时，我做了，现在我应该如何动态更新透明度？并且还使字体更大，也许是一些字体属性。:S

需要一些帮助，请注意，这只是一个必须完成的模拟器，添加的菜单仅用于显示目的，我可以添加尽可能多的菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:48:04.443

要设置对话框的透明度，您需要调用它的 SetTransparency 方法并传递一个介于 0 和 255 之间的数值。我在[此处](http://www.blog.pythonlibrary.org/2008/04/14/doing-a-fade-in-with-wxpython/)写了一篇关于此的教程。我还写了一篇关于 wxPython 中字体的[教程](http://www.blog.pythonlibrary.org/2011/04/28/wxpython-learning-to-use-fonts/)，它应该会告诉你如何更改字体。基本上，您只需调用小部件的 SetFont 方法，然后调用小部件父级的 Layout() 方法即可显示更改。

# php - 相对 + 基本 URL 到绝对 URL？

> ID：11215440
> 
> 赞同：2
> 
> 时间：2012-06-26T20:30:53.907
> 
> 标签：php

基本上，给定一个基本 URL，如

```
file:///path/to/some/file.html 
```

还有一个相对 URL，例如

```
another_file.php?id=5 
```

我想出去

```
file:///path/to/some/another_file.php?id=5 
```

我找到[了这个脚本（与](http://publicmind.in/blog/urltoabsolute/)[这个](http://nadeausoftware.com/articles/2008/05/php_tip_how_convert_relative_url_absolute_url#Downloads)脚本相同），但它似乎不适用于该`file://`方案。在使用我的代码之前，我正在做一些本地测试，所以我想同时处理`file://`和`http://`.

有人知道可以执行此操作的脚本/函数吗？

在 C# 中，我会使用[Uri(Uri base, string rel)](http://msdn.microsoft.com/en-us/library/9hst1w91.aspx)。

* * *

以上只是一个例子。它应该适用于您可以放入的*任何*`<a href="xxx">`URL 。

* * *

这是迄今为止我得到的最好的，但它无法处理`..`，可能还有其他一些事情：

```
function rel2abs($base, $rel) {
    if (parse_url($rel, PHP_URL_SCHEME) != '') return $rel;
    if ($rel[0]=='#' || $rel[0]=='?') return $base.$rel;
    $parse = parse_url($base);
    $path = preg_replace('#/[^/]*$#', '', $parse['path']);
    if ($rel[0] == '/') $path = '';
    $abs = (isset($path['host'])?$path['host']:'')."$path/$rel";
    $re = array('#(/\.?/)#', '#/(?!\.\.)[^/]+/\.\./#');
    for($n=1; $n>0; $abs=preg_replace($re, '/', $abs, -1, $n)) {}
    return $parse['scheme'].'://'.$abs;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:43:56.203

您可以使用[parse_url()](http://php.net/manual/en/function.parse-url.php)将 URL 分成几部分，然后在正斜杠字符上拆分“路径”部分。这应该允许您重新组装它们并更换最后一部分。

像这样的东西（伪代码，未经测试，甚至不确定它是否是有效的 PHP 语法）：

```
$url_parts = parse_url($url_text);
$path_parts = explode('/', $url_parts[path]);

$new_url = $url_parts[scheme] + ":";

if ($url_parts[scheme] == "file") {
    $new_url .= '///';
} else {
    $new_url .= '//';
}

$new_url .= $url_parts[hostname] . '/';
for (int i = 0; i < count($path_parts) - 1; i++) {
    $new_url .= $path_parts[i] . "/";
} 

$new_url .= $REPLACEMENT_FILENAME 
```

如果需要，您可以在末尾附加查询字符串和/或锚片段（以 # 开头） - 请参阅 parse_url() 手册页以获取其数组中 URL 部分的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T16:36:02.037

我已经修改了 Puggan Se 的答案来处理 HTML 页面中看到的某些相对 URL。

```
function url2absolute($baseurl, $relativeurl) {

    // if the relative URL is scheme relative then treat it differently
    if(substr($relativeurl, 0, 2) === "//") {
        if(parse_url($baseurl, PHP_URL_SCHEME) != null) {
            return parse_url($baseurl, PHP_URL_SCHEME) . ":" . $relativeurl;
        } else { // assume HTTP
            return "http:" . $relativeurl;
        }
    }

    // if the relative URL points to the root then treat it more simply
    if(substr($relativeurl, 0, 1) === "/") {
        $parts = parse_url($baseurl);
        $return = $parts['scheme'] . ":";
        $return .= ($parts['scheme'] === "file") ? "///" : "//";
        // username:password@host:port ... could go here too!
        $return .= $parts['host'] . $relativeurl;
        return $return;
    }

    // If the relative URL is actually an absolute URL then just use that
    if(parse_url($relativeurl, PHP_URL_SCHEME) !== null) {
        return $relativeurl;
    }

    $parts = parse_url($baseurl);

    // Chop off the query string in a base URL if it is there
    if(isset($parts['query'])) {
        $baseurl = strstr($baseurl,'?',true);
    }

    // The rest is adapted from Puggan Se

    $return = ""; // string to return at the end
    $minpartsinfinal = 3; // for everything except file:///
    if($parts['scheme'] === "file") {
        $minpartsinfinal = 4;
    }

    // logic for username:password@host:port ... query string etc. could go here too ... somewhere?      

    $basepath = explode('/', $baseurl); // will this handle correctly when query strings have '/'
    $relpath = explode('/', $relativeurl);

    array_pop($basepath);

    $returnpath = array_merge($basepath, $relpath);
    $returnpath = array_reverse($returnpath);

    $parents = 0;
    foreach($returnpath as $part_nr => $part_value) {
        /* if we find '..', remove this and the next element */
        if($part_value == '..') {
            $parents++;
            unset($returnpath[$part_nr]);
        } /* if we find '.' remove this element */
        else if($part_value == '.') {
            unset($returnpath[$part_nr]);
        } /* if this is a normal element, and we have unhandled '..', then remove this */
        else if($parents > 0) {
            unset($returnpath[$part_nr]);
            $parents--;
        }
    }
    $returnpath = array_reverse($returnpath);
    if(count($returnpath) < $minpartsinfinal) {
        return FALSE;
    }
        return implode('/', $returnpath);
} 
```

例子：

```
print url2absolute("file:///path/to/some/file.html", "another_file.php?id=5") . "<br>"; // original example
print url2absolute("file:///path/to/some/file.html", "../../../../../another_file.php?id=5") . "<br>"; // should be an error!
print url2absolute("http://path/to/some/file.html?source=this/one", "another_file.php?id=5") . "<br>"; // with query string on base URL
print url2absolute("http://path/to/some/file.html", "//other-path/another_file.php?id=5") . "<br>"; // scheme relative 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:10:33.847

我认为最简单的解决方案是使用[dirname()](http://php.net/manual/en/function.dirname.php)函数。

```
$url = 'file:///path/to/some/file.html';
$rel = 'another_file.php?id=5';

$final = dirname($url).'/'.$rel; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:54:55.500

```
<?php
/* strings from your exemple */
$base_url = "file:///path/to/some/file.html";
$relative_url = "another_file.php?id=5";

/* split up urls folder parts into an array */
$base_url_parts = explode('/', $base_url);
$relative_parts = explode('/', $relative);

/* remove last element (in this case "file.html") */
array_pop($base_url_parts);

/* merge absolute_url from base and relative */
$absolute_url_parts = array_merge($base_url_parts, $relative_parts);

/* reverser the list before the search of '..' */
$absolute_url_parts = array_reverse($absolute_url_parts);

/* count of current number of unhandled '..' */
$parent_folder_count = 0;

/* loop throught all elements looking for '..' */
foreach($absolute_url_parts as $part_nr => $part_value)
{
    /* if we find '..', remove this and the next element */
    if($part_value = '..')
    {
        $parent_folder_count++;
        unset($absolute_url_parts[$part_nr]);
    }

    /* if we find '.' remove this element */
    else if($part_value = '.')
    {
        unset($absolute_url_parts[$part_nr]);
    }

    /* if this is a normal element, and we have unhandled '..', then remove this */
    else if($parent_folder_count > 0)
    {
        unset($absolute_url_parts[$part_nr]);
        $parent_folder_count--;
    }

    /* else: keep it */
}

/* restore the order by reversing again */
$absolute_url_parts = array_reverse($absolute_url_parts);

/* restore the list to a string again */
$absolute_url = implode('/', $absolute_url_parts);

/* done */
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T20:47:25.347

```
$ab="file:///path/to/some/file.html";
$rel="another_file.php?id=5";

$exab=explode("/",$ab);
$exab[count($exab)-1]=$rel;

$newab=implode("/",$exab); 
```

可能不是最优雅的解决方案，但它确实有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T20:49:14.300

```
$file1 = "file://path/to/some/file.html";
$file2 = "anotherfile?q=1";

$newurl = substr_replace($file1, $file2, strrpos($file1, "/")+1); 
```

[http://codepad.org/370Yp1M7](http://codepad.org/370Yp1M7)

# android-intent - Android 2.2/2.3 不会在 YouTube 应用上从 WebView 加载 YouTube 视频

> ID：11215443
> 
> 赞同：1
> 
> 时间：2012-06-26T20:31:12.107
> 
> 标签：android-intent, youtube, android-webview, android-2.3-gingerbread

我知道这个问题已经回答了很多次，但我仍然无法让它在 Android 2.2 或 2.3 上运行。

我正在开发一个由选项卡组成的应用程序。其中一个选项卡会在 WebView 中加载移动版 YouTube。到现在为止还挺好。

问题是视频不能在 WebView 内播放，所以我使用的是 YouTube 应用程序，因为这里[是建议的](https://stackoverflow.com/a/4816144/259517)。伟大的！它适用于 Android 2.1，但不适用于 2.3。我使用的所有手机都安装了 YouTube 应用。它根本不显示让用户选择 YouTube 应用程序或浏览器的窗口。有什么建议吗？这是我的`onCreate`方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.website);
    this.webView = (WebView) findViewById(R.id.webview);
    this.webView.setWebViewClient(new WebViewClient() {
         public boolean shouldOverrideUrlLoading(WebView view, String url) {
             // YouTube video link
             if (url.startsWith("vnd.youtube:")) {
                 int n = url.indexOf("?");
                 if (n > 0) {
                     startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(String.format("http://www.youtube.com/v/%s", url.substring("vnd.youtube:".length(),n)))));
                 }

                 return true;
             }

             return false;
         }
    });

    WebSettings webSettings = this.webView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    this.webView.loadUrl("http://m.youtube.com/");
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:47:34.077

这就像[Twitter 的问题](https://stackoverflow.com/questions/6856814/problems-loading-mobile-twitter-in-webview)，我以一种[肮脏的方式](https://stackoverflow.com/a/3995168/259517)解决了它。

# iphone - UITextView 作为自己的委托意味着无限循环

> ID：11215444
> 
> 赞同：5
> 
> 时间：2012-06-26T20:31:16.517
> 
> 标签：iphone, objective-c, ios, ipad, delegates

我有一个 UITextView 的子类，我想让它成为自己的代表。这样我就可以覆盖该`textView:shouldChangeTextInRange:replacementText:`方法，并防止输入连续的空格。

在`[SATextView awakeFromNib]`（SATextView 是我的 UITextView 的子类）中，我做`[self setDelegate:self];`. 当我按下 textview 开始编辑时，所有内容都冻结并最终停止，并且回溯显示存在无限循环。

如果我实现所有委托方法，只实现一个或没有，都没有关系。这些方法是否为空也没关系。

为什么这会导致无限循环？它似乎只有在使用 UITextView 时才会发生（您可以子类化其他对象并将委托设置为 self，它不会有这个问题）。我该如何阻止它？或者有没有更好的方法让这个子类不能有连续的空格，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:44:55.570

一个想法...您可以创建一个委托类，充当真正的委托和 UITextView 之间的中间人（因为您可能需要在一段时间后设置委托）。所以这个新类将实现委托协议，但它也将具有它自己的委托的属性，以便您可以转发 textView:shouldChangeTextInRange:replacementText:，并且仍然可以在中间人类中编辑空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:25:08.257

It is possible to subscribe any numbers of observers to an object. So it is possible to subscribe itself:

```
@implementation MyTextView 

-(id) initWithFrame:(CGRect)frame // or initWithCoder: for loading from nib
{
    self = [super initWithFrame:frame];
    if(self) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textViewTextDidChangeNotification:) name:UITextViewTextDidChangeNotification object:self];
    }
    return self;
}

-(void)textViewTextDidChangeNotification:(NSNotification*)n
{
    self.text = [self.text stringByReplacingOccurrencesOfString:@"  " withString:@" "];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T21:31:43.403

这是我如何成功完成此操作的示例。我只对阻止输入某些字符感兴趣，所以我只实现`textView:shouldChangeTextInRange:replacementText:`然后传递其余的。

```
#import "INFTextView.h"

@interface INFTextView () <UITextViewDelegate>

@property (nonatomic, weak) id<UITextViewDelegate> externalDelegate;

@end

@implementation INFTextView

- (id)init {
    self = [super init];
    if (!self) {
        return nil;
    }

    self.delegate = self;

    return self;
}

- (void)awakeFromNib {
    self.delegate = self;
}

- (void)setDelegate:(id<UITextViewDelegate>)delegate {
    // we always want self to be the delegate, if someone is interested in delegate calls we will forward those on if applicable
    if (delegate == self) {
        [super setDelegate:self];
        return;
    } else {
        // capture that someone else is interested in delegate calls
        _externalDelegate = delegate;
    }
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
    NSCharacterSet *unsupportedCharacterSet = [[NSCharacterSet characterSetWithCharactersInString:kINFSupportedCharacters] invertedSet];

    NSRange unsupportedCharacterRange = [text rangeOfCharacterFromSet:unsupportedCharacterSet];
    if (unsupportedCharacterRange.location == NSNotFound) {
        return YES;
    } else {
        return NO;
    }
}

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewShouldBeginEditing:)]) {
        return [_externalDelegate textViewShouldBeginEditing:textView];
    }

    return YES;
}

- (BOOL)textViewShouldEndEditing:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewShouldEndEditing:)]) {
        return [_externalDelegate textViewShouldEndEditing:textView];
    }

    return YES;
}

- (void)textViewDidBeginEditing:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewDidBeginEditing:)]) {
        [_externalDelegate textViewDidBeginEditing:textView];
    }
}

- (void)textViewDidEndEditing:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewDidEndEditing:)]) {
        [_externalDelegate textViewDidEndEditing:textView];
    }
}

- (void)textViewDidChange:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewDidChange:)]) {
        [_externalDelegate textViewDidChange:textView];
    }
}

- (void)textViewDidChangeSelection:(UITextView *)textView {
    if ([_externalDelegate respondsToSelector:@selector(textViewDidChangeSelection:)]) {
        [_externalDelegate textViewDidChangeSelection:textView];
    }
}

@end 
```

导致我提出这个问题的一个大“问题”是我试图覆盖`delegate`返回`_externalDelegate`，但这会导致一些奇怪的副作用（必须有内部代码取决于要返回的实际委托）。

# string - Spring无法注册转换器

> ID：11215446
> 
> 赞同：0
> 
> 时间：2012-06-26T20:31:27.560
> 
> 标签：string, spring, hashmap, converter

我在[这里](http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/validation.html#core-convert)按照示例进行操作。我的 applicationContext 具有以下内容：

```
<bean id="conversionService"
      class="org.springframework.context.support.ConversionServiceFactoryBean">
    <property name="converters">
        <set>
            <bean class="org.mypackage.MyFilterConverter"/>
        </set>
    </property>
</bean> 
```

我的转换器如下所示：

```
public class MyFilterConverter implements Converter<String, HashMap<String, List<MyClass>>> { ... 
```

我的问题：当我

```
@Autowired
private ConversionService conversionService; 
```

并尝试使用它，conversionService 只有默认的，没有 MyFilterConverter。

我跟随堆栈跟踪到

```
GenericConversionService.addConverter(GenericConverter converter) 
```

当我从这个电话回来时，我的转换器没有被添加。

有任何想法吗？

谢谢

——拉帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:31:55.577

如果您`<mvc:annotation-driven/>`用于配置 Spring MVC，那么它会在内部创建一个 conversionService 并且可能会覆盖您的 conversionService，覆盖的方法是用这个替换`<mvc:annotation-driven/>`（如果您使用的是 Spring 3.1）：

```
<bean name="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="webBindingInitializer">
        <bean class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="conversionService" ref="conversionService"></property>
            <property name="validator">
                <bean class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
            </property>
        </bean>
    </property>
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.ResourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.xml.Jaxb2RootElementHttpMessageConverter"></bean>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"></bean>
        </list>
    </property>
</bean> 
```

这应该确保只有 1 个 conversionService(yours) 存在。

# php - PHP 未按预期排序

> ID：11215448
> 
> 赞同：0
> 
> 时间：2012-06-26T20:31:44.880
> 
> 标签：php

我正在尝试从文本文件中查找关键字，当找到关键字时，我为每个匹配项提供 1 分。下面的程序有效地计算分数，但不会将分数从高到低排序。请为我提供此问题的解决方案。

这是代码：

```
 <?php
              $lines = file("Abstract.txt");
              $Result = array();
              $index = 0;
              $search_term1= "Tamoxifen";
              $search_term2="Doxorubicin";
              $search_term3="Synergistic";
              $search_term4="MCF-7";
                $search_term5="Inhibition";

        $keywords = array($search_term1, $search_term2, $search_term3);
        $replace_keyword = array("<b>".$search_term1."</b>", "<b>".$search_term2."</b>", "<b>".$search_term3."</b>");

        foreach ($lines as $line_num => $line) 
        {
            if($line_num > 1)
                {
                $arr = explode("\t", $line); //Reads tab separated file
                $Pubmed = trim((string)$arr[0]); //first column is Pubmed
                $title = trim((string)$arr[1]); //second column is title
                $abstract = trim((string)$arr[2]); //third column is abstract
                $score = substr_count(strtoupper($title), strtoupper($search_term1)) + substr_count(strtoupper($abstract), strtoupper($search_term1)); //counts occurrence of 1st string in title & abstract
                $score += (substr_count(strtoupper($title), strtoupper($search_term2)) + substr_count(strtoupper($abstract), strtoupper($search_term2))); //counts occurrence of 2nd string in title & abstract
                $score += (substr_count(strtoupper($title),strtoupper($search_term3)) + substr_count(strtoupper($abstract), strtoupper($search_term3))); //counts occurrence of 3rd string in title & abstract

                //store the result as well as data into array 
                    $Result[$index]["Pubmed"] = $Pubmed;
                    $Result[$index]["<BR>score"] = $score; 
                    $Result[$index]["<BR>title"] = str_ireplace($keywords, $replace_keyword, $title);
                    $Result[$index]["<BR>abstract"] = str_ireplace($keywords, $replace_keyword, $abstract);
                    $index++;
                }
        }

            //sort the array by score
            $sorter=array();
            $ret=array();
            reset($Result);
            $key = "score";
            foreach ($Result as $ii => $va) {
            $sorter[$ii]=$va[$key];
        }
            arsort($sorter);
            foreach ($sorter as $ii => $va) {
            $ret[$ii]=$Result[$ii];
        }
            $Result=$ret;

            foreach($Result as $instance)
        {
            $keys = array_keys($instance);
                foreach($keys as $key)
                {
                    if(!strcmp($key,"abstract")) 
                    echo "\n<b>".$key."</b> : ".$instance[$key]."\n";
                else
                echo "<b>".$key."</b> : ".$instance[$key]."\n";
        }
                echo "\n\n_________________________________________________________________________________________________________________________________________________________________________________________________\n\n";

        }

        ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:40:05.300

坏行是： `$key = "score";`

当您将分数保存在： `$Result[$index]["&lt;BR>score"] = $score;`

它应该是： `$key = "<BR>score";`

# java - 有没有办法在 jtextfield 中放置一个冒号，这样它就不能被删除？

> ID：11215449
> 
> 赞同：3
> 
> 时间：2012-06-26T20:31:48.517
> 
> 标签：java, swing, jtextfield, colon, jformattedtextfield

我希望用户输入时间，比如 12:00，但我需要弄清楚一些事情，我很迷茫。

1.  我可以将文本限制为 5 个字符吗？如何？
2.  我可以在代码中嵌入一个冒号，以便用户无法删除它吗？
3.  最后，我可以拿那个代码并验证它只是数字吗（当然忽略冒号）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T21:35:59.287

答案是使用[JFormattedTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)和[MaskFormatter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/MaskFormatter.html)。

例如：

```
String mask = "##:##";
MaskFormatter timeFormatter = new MaskFormatter(mask);
JFormattedTextField formattedField = new JFormattedTextField(timeFormatter); 
```

Java 编译器将要求您在创建 MaskFormatter 时捕获或抛出 ParseException，因此请务必执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:33:41.610

或者只是放弃您的文本字段并选择由包含冒号（或两个实例）`JSpinner`分隔的两个实例。`JLabel``JTextField`

不完全确定这个解决方案对用户来说是否更直观，但我认为是的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T22:20:41.183

一个老问题的迟到的答案；利用`DocumentFilter`可以实现这三个要求。

非生产质量代码可能是这样的

```
String TIME_PATTERN = "^\\d\\d:\\d\\d\\s[AP]M$";

final JTextField tf = new JTextField("00:00 AM", 8);

((AbstractDocument)tf.getDocument()).setDocumentFilter(new DocumentFilter() {
    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a) throws BadLocationException {

        String text = fb.getDocument().getText(0, fb.getDocument().getLength());

        text = text.substring(0, offs) + str + text.substring(offs + length);

        if(text.matches(TIME_PATTERN)) {
            super.replace(fb, offs, length, str, a);
            return;
        }

        text = fb.getDocument().getText(0, fb.getDocument().getLength());

        if(offs == 2 || offs == 5)
            tf.setCaretPosition(++offs);

        if(length == 0 && (offs == 0 ||offs == 1 ||offs == 3 ||offs == 4 ||offs == 6))
            length = 1;

        text = text.substring(0, offs) + str + text.substring(offs + length);

        if(!text.matches(TIME_PATTERN))
            return;

        super.replace(fb, offs, length, str, a);

    }

    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a) throws BadLocationException { }

    public void remove(FilterBypass fb, int offset, int length) throws BadLocationException { }

}); 
```

# python - Django 模板字符串比较失败

> ID：11215450
> 
> 赞同：0
> 
> 时间：2012-06-26T20:31:48.637
> 
> 标签：python, django, django-templates

```
{{ is_true }}

{% if is_true == "True" %}
    <h2>Say True</h2>
{% else %}
    <h2> False </h2>
{% endif %} 
```

但是，`else`即使`{{ is_true }}`返回 True ，它也会进入子句

任何的想法？

```
def some_func():
   if ....:
     return True
   else:
     return False 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:34:56.703

您不需要`"True"`在模板中使用：

```
{% if is_true == True %} 
```

要不就：

```
{% if is_true %} 
```

如果您`"True"`在模板中使用，那么您将布尔值`True`与字符串 `"True"`（不相同）进行比较，并最终出现在`else`模板的子句中。换句话说，你会做：

```
{% if True == "True" %}
    <h2>Say True</h2>
{% else %}                     # You will end up here
    <h2> False </h2>
{% endif %} 
```

[您可以在文档](https://docs.djangoproject.com/en/dev/topics/templates/)中找到有关 Django 模板语言的更多信息

# php - Jquery-在具有条件的固定间隔加载主体后调用函数

> ID：11215452
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:31:53.850
> 
> 标签：php, javascript, jquery, ajax

我想在 JavaScript 中调用一个 ajax 函数。`showusers(num)`具有加载时应`body`加载并继续每4-5秒加载一次的条件。

```
<a href="#" id="user1" class="users">sdasd</a>
<a href="#" id="user2" class="users">asds</a> 
```

条件是num变量应该是末尾的值`id` `user1`，`user2`即分别为*1*和*2*。这些`id`s 应该属于 class `users`。

我尝试`onload`直接向 a 标签添加一个函数，但它似乎不起作用，因为我正在刷新内容并有时使用 PHP 回显它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:42:35.357

在[jQuery](http://jquery.com/)中你可以做

```
$(document).ready(function() {
  // ajax here. This will fire when the page loads.
}); 
```

[并](http://www.w3schools.com/js/js_timing.asp)尝试查看定时 javascript 函数。

jQuery 也有一个[ajax](http://api.jquery.com/jQuery.ajax/)函数。

# html - 是否有可用于生产的跨操作系统桌面 HTML5 运行时？

> ID：11215454
> 
> 赞同：8
> 
> 时间：2012-06-26T20:32:06.330
> 
> 标签：html, user-interface, desktop-application, desktop

有时我想我想为 Windows、*Mac OS X 和 Linux*开发一个独立的（既不需要 Web 服务器也不需要浏览器来运行）桌面 GUI 应用程序，使用 HTML5、CSS 和 JavaScript 来形成 GUI。

但据我所知，Adobe AIR 和 Mozilla Prism 都已弃用。此任务还有哪些其他选择？

更新：针对已经得到的答案和评论，我想强调这些应用程序必须在 Windows、Mac OS X 和 Linux 上运行，无需进行任何重大修改。该平台将被积极开发并支持所有 3 个主要的 PC 操作系统。单平台应用程序不是一种选择，对其中之一的有限支持的应用程序也不是一种选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:17:02.357

根据在[http://blog.neamlabs.com/post/36584972328/2012-11-26-web-app-cross-platform-desktop-distribution](http://blog.neamlabs.com/post/36584972328/2012-11-26-web-app-cross-platform-desktop-distribution)上评估的解决方案，这些应该是与您的最相关的 HTML5 运行时要求。

*   [XULRunner](https://developer.mozilla.org/en/docs/XULRunner)  - 直接受益于 Firefox 的开发工作，这是一个维护良好的解决方案，具有出色的跨平台支持，但除了 Firefox 和其他基于 XULRunner 的开源应用程序本身之外，几乎不存在用于打包和分发的工具或文档
*   [Chrome 可安装网络应用程序](http://developer.chrome.com/stable/apps/about_apps.html) - 就像具有更多桌面集成的 Chrome 网络应用程序。不支持闪存。
*   [Mozilla Native Web Apps](https://wiki.mozilla.org/Web_Apps_integration)  - 就像具有更好桌面集成的 Mozilla Open Web App。仍然需要通过 Firefox Marketplace 在线安装。 
*   [TideSDK](http://www.tidesdk.org/)（以前的 Titanium Desktop）——虽然它可能看起来是全方位的完美解决方案，但目前的状态是 TideSDK 还没有准备好生产（由于积极开发，可能会在几个月左右发生变化）
*   [node-webkit](https://github.com/rogerwang/node-webkit)看起来非常相关，但不确定“生产就绪”部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T20:40:56.670

一种选择是使用[锍](http://berkelium.org/)。它包装了所有讨厌的 chromium 东西，让在你的应用程序中嵌入浏览器功能变得更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:35:43.057

总是有[Microsoft Silverlight](http://en.wikipedia.org/wiki/Microsoft_Silverlight)（如果您担心的话，它确实有 Linux/etc 的实现，如链接页面上所述）。

* * *

等一下，据我所知，Adobe AIR 仍在开发中，就在上个月发布了稳定版本。出于某种奇怪的原因，只有 Linux 不再正式发布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T20:51:26.177

Opera Widgets 也是您正在寻找的那种，也已被弃用，但`opera:config`据我所知可以打开。

# actionscript-3 - 删除元素/子元素是否也会删除作为皮肤的一部分创建的组件？

> ID：11215456
> 
> 赞同：0
> 
> 时间：2012-06-26T20:32:23.523
> 
> 标签：actionscript-3, apache-flex

一般的智慧是，当您从舞台上移除一个组件时，您还需要手动移除所有子级，这样它们就不会漂浮在内存中。因为自从父容器被移除后，它们就变得不可见了。

这方面的例子是 a`Label`内部的一个组件`BorderContainer`。我的理解是您需要先删除第`Label`一个，然后再删除`BorderContainer`.

当您为它创建一个组件（例如`TitleWindow`默认皮肤）时，它会`closeButton`在标题栏/标题中添加一个。

我在关闭按钮上添加了一个事件监听器。`TitleWindow.closeButton.addEventListener();`在关闭按钮事件调用的函数中，我想关闭/删除窗口。

我的问题是这个。我是否需要手动删除`closeButton`作为孩子的`TitleWindow`？还是我只是删除侦听器然后`TitleWindow`从舞台上删除，皮肤创建的组件会自动删除/垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:27:18.763

如果从舞台上移除了一个组件，只要您移除了所有事件侦听器，它的所有子组件都将自动被移除并收集垃圾。因此，您无需显式删除子项以便对它们进行垃圾收集。

**但是**在您的问题中，您指的是皮肤。当使用皮肤时，它们的宿主组件的`skinDestructionPolicy`属性总是设置为`never`（除了一个移动类；我忘了是哪一个）。这意味着皮肤和它的所有孩子将永远留在内存中，永远不会被垃圾收集。

现在不那么高兴的部分是：覆盖这个默认设置并不容易。阅读这个问题和我在那里写的答案，看看它是如何完成的：[Spark SkinnableComponent skinDestructionPolicy](https://stackoverflow.com/questions/8150934/spark-skinnablecomponent-skindestructionpolicy)

请注意，在 99% 的情况下，这种默认行为实际上不是问题。当然，我不知道你的具体情况，所以我不能进一步评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:28:47.857

我学到的传统智慧与你的不同。当你从舞台上移走东西时；根据定义，它的所有孩子都不再在舞台上。假设没有对主要组件或子组件的延迟引用，它们都应该有资格进行垃圾收集。

现在，如果您将事件侦听器添加到 TitleWindow 的关闭按钮；从舞台上移除 TitleWindow 是否会为垃圾收集释放组件取决于谁拥有监听器。

如果 TitleWindow 拥有监听器，那么由于 TitleWindow 不再在舞台上，它和它的所有子级都应该有资格进行垃圾收集。

如果主应用程序或仍在舞台上的任何组件拥有事件侦听器，那么您必须在组件或其子组件有资格进行垃圾收集之前删除该事件侦听器。

# objective-c - 故事板 Segue 未加载视图

> ID：11215464
> 
> 赞同：0
> 
> 时间：2012-06-26T20:33:19.873
> 
> 标签：objective-c, ios, uistoryboard

我正在尝试在代码中进行搜索。prepareForSegue 函数运行并显示正确的目标视图控制器，但没有任何反应。关于我缺少什么或配置错误的任何想法？

**查看控制器可能的路径：**

```
A ->B (sgueResultat)
or
A->C (sgueStopSplash) 
```

**选择segue的代码：**

```
if (proversion)
    [self performSegueWithIdentifier:@"sgueResultat" sender:self];

}
else {
    [self performSegueWithIdentifier:@"sgueStopSplash" sender:self];

} 
```

`

**我可以确认的 prepareForSegue 由 NSLog 运行：**

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
 NSLog(@"Source Controller = %@", [segue sourceViewController]);
 NSLog(@"Destination Controller = %@", [segue destinationViewController]);
 NSLog(@"Segue Identifier = %@", [segue identifier]); 
```

**nslog 输出：**

```
2012-06-26 22:22:26.002 ClosetV2[2333:fb03] Source Controller = <ABStartViewController: 0xeb12270>
2012-06-26 22:22:26.002 ClosetV2[2333:fb03] Destination Controller = <SplashAfterStopViewController: 0x6b2c9e0>
2012-06-26 22:22:26.003 ClosetV2[2333:fb03] Segue Identifier = sgueStopSplash
2012-06-26 22:22:26.003 ClosetV2[2333:fb03] sgueStopSplash 
```

问候安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:43:47.113

确保在故事板中将 segues 设置为“模态”（如果您喜欢，也可以自定义）。

我记得当故事板问世时我第一次开始使用 segues 时，我一直在尝试使用推送，只有当你有一个嵌入式 UINavigationController 时你才能做到这一点。否则，push segue 将根本不起作用。

另一个想法……下面的代码在哪里执行？如果动画已经发生或者当前视图没有显示在屏幕上，它就不能正常工作。例如，如果您的 viewDidLoad 中有此代码，它将不起作用。

```
if (proversion)
    [self performSegueWithIdentifier:@"sgueResultat" sender:self];

}
else {
    [self performSegueWithIdentifier:@"sgueStopSplash" sender:self];

} 
```

编辑：更新的答案

在执行 segue 之前等待 [self dismissModalViewController:YES] 动画完成实际上很烦人并且有些混乱。我认为没有“正确”的方法可以做到这一点。但是，如果您将以下方法放在具有模态控制器的视图中，并在使用 [self dismissModalViewController:YES] 后向其发送消息，您应该处于良好状态。

```
- (void)waitUntilModalControllerIsDismissed
{
    if(self.modalViewController)
    {
        [self performSelector:@selector(waitUntilModalControllerIsDismissed:)
                   withObject:nil 
                   afterDelay:0.1f];
        return;
    }
    else
    {
        //At this point, the modal animation will be completed and you can perform your segue if you want
    }  

} 
```

# .net - 在datagridview中查找行选择状态的快速方法

> ID：11215468
> 
> 赞同：0
> 
> 时间：2012-06-26T20:33:32.010
> 
> 标签：.net, winforms, datagridview, datatable

我有一个绑定的datagridview，大约有一百万条记录，可以按任何列排序。在 GUI 中，用户可以选择任意数量的行（有时使用 CTRL+A 来选择所有行）。从另一个来源，我得到了大量记录 ID（最多 1000 个），需要找出哪些 ID 对应于选定的行。我尝试了很多方法，但都没有一个足够快。例如：

遍历选定的行集合并在 ID 列表中查找匹配项是不可能的，因为 SelectedRows 计数可能约为 1/2 百万。

我还尝试循环遍历 ID 的列表（通常大约为 1000），并为每个 ID 执行一个 BindingSource.Find("Id", Value) ，它为我提供每个 ID 的行索引，然后我可以检查是否行被选中。如果网格按 ID 排序，这可以正常工作，但如果不是，则 Find() 的性能太差，无法调用 1000 次。

简而言之，在给定行对象 ID 的情况下，我需要一种快速方法来查找最多 1000 行的 Row.Selected 状态。似乎 DataGridView 或 DataBinding 应该能够处理这个问题，但具体如何处理并不明显。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:54:21.263

我会尝试以下方法：

1.  如果可能，为 DataGridView 的 ItemsSource 使用 ObservableCollection。
2.  将行的 Selected 属性上的绑定添加到 ObservableCollection 中包含的基础项。
3.  使用 CollectionViewSource 和过滤器

这是一个非常相似的示例（尽管我怀疑它会执行得非常好）：

```
private ICollectionView _CarListView { get; set; }
private ObservableCollection<Car> _CarList;
public ObservableCollection CarList
{
    get
    {
        if (_CarList == null)
        {
            //Code to build the list

            //For the car filtering
            this._CarListView = CollectionViewSource.GetDefaultView(_CarList);
            this._CarListView.Filter = CarFilter;
        }
        return _CarList;
    }
}

private bool CarFilter(object item)
{
    Car car = item as Car;

    if(car.Name.Contains(FilterText))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

在您的情况下，我只需调整 CarFilter（实际上是 a `Predicate<T>`），以便您可以在 DataGridViewRow 中查找绑定到 Selected 属性的属性。例如，您可以在 ObservableCollection 中包含的对象类型上创建一个 IsSelected 布尔值，并在该项目为 true 的地方返回。一旦你有了过滤后的列表结果，然后运行你提到的较小的 id 列表（大约 1000 个元素）并查看 id 匹配的位置。我会尝试对这两个集合使用 LINQ 查询来执行该操作，该操作应该尽可能快。

如果一切都失败了，您可以回到原来的循环技术并尝试并行库来执行 Parallel.ForEach，这将利用您的多核 CPU 更快地执行操作。虽然，我不会蛮力的。似乎您必须通过一次才能从大集合中累积选定的项目，然后在较小的集合中查找每个选定的项目。

# python - 在 Windows 中运行的 Python 代码，我可以使用“如果不是 win32”绕过它的一部分吗

> ID：11215471
> 
> 赞同：3
> 
> 时间：2012-06-26T20:33:47.737
> 
> 标签：python, windows, eclipse

我尝试在 Windows 上的 Eclipse 中运行以下 python 代码，但它显示错误说`pwd`不是有效的导入：

```
import os
import pwd
import socket
pinfo=pwd.getpwuid(os.getuid()) 
```

我可以`if not win32`用来绕过这部分，所以当它在 Windows 上运行时它只是跳转并且不会产生错误？

```
if not win32:
   import os
   import pwd
   import socket
   pinfo=pwd.getpwuid(os.getuid())
else:
   return 
```

如果是，我需要做什么才能使用它，`win32`因为它也显示错误提示`undefined variable`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:38:14.703

您应该为此使用[sys.platform](http://docs.python.org/library/sys.html#sys.platform)。

```
if sys.platform != 'win32':
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:38:49.683

```
if sys.platform != 'win32':
 ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T20:40:13.963

我想这两个问题可能对你的问题有答案。

[是否有一种可移植的方式来获取 Python 中的当前用户名？](https://stackoverflow.com/questions/842059/is-there-a-portable-way-to-get-the-current-username-in-python)

[pwd.getpwnam(username).pw_dir 的 Windows 等效项是什么？](https://stackoverflow.com/questions/3305787/what-is-the-windows-equivalent-of-pwd-getpwnamusername-pw-dir)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:37:08.080

您可以使用检查操作系统

```
import os
if os.name != 'nt':
   # do something 
```

# objective-c - 禁用与主窗口的交互，而其他窗口处于打开状态

> ID：11215472
> 
> 赞同：0
> 
> 时间：2012-06-26T20:33:50.883
> 
> 标签：objective-c, macos, mainwindow, keywindow

我有一个主窗口，所有工作都在其中完成。当我打开首选项面板时，只要首选项面板打开，我就想冻结主窗口。例如 iTunes：只要我打开首选项，我就可以与首选项面板进行交互，仅此而已。

有没有一种简单的方法来存档这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:40:07.477

代码：

```
[NSApp runModalForWindow:theWindow]; 
```

# android - 如何在“选择 wifi 网络”窗口上叠加“返回”和“下一步”按钮？

> ID：11215473
> 
> 赞同：7
> 
> 时间：2012-06-26T19:50:21.380
> 
> 标签：android

当您尝试使用它并且碰巧没有连接到 wifi 网络时，Google play 会执行此操作。

我正在尝试做的照片：

![图片](../Images/eaac12baa9f81b9b1991b88ac08a6d4b.png)

如果你只是运行一个标准

```
startActivity(new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK)); 
```

然后它会加载我正在寻找的窗口。但是，我想要一个覆盖在它上面的“返回”和“下一步”按钮。后退应该返回到上一个窗口，并且只有在选择了网络并执行了身份验证（如果需要）时才应该选择下一个。然后它会去另一个活动。

我尝试使用片段来实现它（一个用于意图启动窗口，另一个用于按钮），但它不起作用。

这是应用程序运行时启动的代码

```
public class TestActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layfile);
//        Intent n = new Intent(this,Pactivity.class);
//        startActivity(n);
//        
    }
}

public class Pactivity extends PreferenceActivity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
    //addPreferencesFromIntent(new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK));
    setContentView(R.layout.main);

}

}

public class Pfrag extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

这是xml文件

```
<?xml version="1.0" encoding="UTF-8"?>

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >    
    <Preference 
        android:key="key"   
        android:title="WiFi" 
        android:summary="Calls WiFi">           
            <intent android:action="android.net.wifi.PICK_WIFI_NETWORK"/>           
    </Preference>
</PreferenceScreen> 
```

我还尝试了一些基于 Preferences 的类。也没有做我想做的事。

我怎样才能让按钮覆盖在您看到的内容上`WifiManager.ACTION_PICK_WIFI_NETWORK`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T04:57:41.280

```
 Intent intent = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);       
    intent.putExtra("only_access_points", true);
    intent.putExtra("extra_prefs_show_button_bar", true);
    intent.putExtra("wifi_enable_next_on_connect", true);
    startActivityForResult(intent, 1); 
```

这应该这样做。从谷歌代码逆向工程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-04T16:04:33.747

这只是对UncleKing的答案的改进。

既然你特意要求

> 如何将按钮叠加到您使用 WifiManager.ACTION_PICK_WIFI_NETWORK 看到的内容上？

不需要额外的`only_access_points`和`wifi_enable_next_on_connect`. 你只需要`extra_prefs_show_button_bar`额外的。只需使用最后一个附加功能，就会出现叠加按钮。

如果您愿意，可以使用 ADB 进行尝试：

```
am start -a android.net.wifi.PICK_WIFI_NETWORK --ez extra_prefs_show_button_bar True 
```

所以减少的代码将是：

```
Intent intent = new Intent(WifiManager.ACTION_PICK_WIFI_NETWORK);       
intent.putExtra("extra_prefs_show_button_bar", true);
startActivityForResult(intent, 1); 
```

在 Android 4.1、4.4 和 5.1 上尝试过。

# iphone - iOS 5 - CTCallCenter 不适合我

> ID：11215482
> 
> 赞同：1
> 
> 时间：2012-06-26T20:34:18.637
> 
> 标签：iphone, ios, xcode, jailbreak, core-telephony

我的手机：iOS 5.1.1 使用 Absynth2 越狱

我正在尝试做的事情： **检测来电或正在拨打电话......**

好的，这是我放在`AppDelegate`下面的代码`didEnterBackground`，也试过了`didResignActive`- 我没有得到任何错误，但我也没有得到任何结果..

```
callCenter = [[CTCallCenter alloc] init];   
[callCenter setCallEventHandler:^(CTCall *call) {
    NSDictionary *dict = [NSDictionary dictionaryWithObject:call.callState forKey:@"callState"];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"CTCallStateDidChange" object:nil userInfo:dict];
    NSLog(@"state changed on call: %@", call);
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(callReceived:) name:CTCallStateIncoming object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(callEnded:) name:CTCallStateDisconnected object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(callConnected:) name:CTCallStateConnected object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(callDial:) name:CTCallStateDialing object:nil]; 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T00:11:19.313

问题是 iOS 显然不会在后台将通知传递给 UIApplications。来自[CTCallCenter 的 iOS 文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCallCenter/Reference/Reference.html)：

> 如果您的应用程序在调用事件发生时处于活动状态，则系统会立即将该事件分派给您的处理程序。但是，调用事件也可能在您的应用程序暂停时发生。当它被挂起时，您的应用程序不会收到呼叫事件。

既然你已经越狱了，为什么不让你的“应用程序”成为一个**启动守护进程**呢？然后，它可以一直作为服务运行。如果您这样做，那么以下代码应该会收到您的通知（我在越狱的 iOS 5.0.1 iPhone 4 上对此进行了测试）：

```
@property (nonatomic, strong) CTCallCenter* callCenter; 
```

并通过以下方式注册通知：

```
- (void) registerForCalls {

    self.callCenter = [[CTCallCenter alloc] init];
    NSLog(@"registering for call center events");
    [callCenter setCallEventHandler: ^(CTCall* call) {
        if ([call.callState isEqualToString: CTCallStateConnected]) {

        } else if ([call.callState isEqualToString: CTCallStateDialing]) {

        } else if ([call.callState isEqualToString: CTCallStateDisconnected]) {

        } else if ([call.callState isEqualToString: CTCallStateIncoming]) {

        }
        NSLog(@"\n\n callEventHandler: %@ \n\n", call.callState);
    }];
} 
```

这是一个[关于如何创建 Launch Daemons 的好教程](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)，如果您以前没有这样做过的话。

如果您的应用程序还具有图形组件，那么您可以构建两个部分：始终运行的启动守护程序，以及在用户启动它时运行的 UI 应用程序。如果需要，他们可以通过通知相互通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T01:08:11.463

If you want your app always run in the background, then you have to make your app Voip app. You can also do a little trick, which makes your app play a infinite silent music when it goes background.

# android - 如果 MapView 从未可见，则获取 MapView 的位图失败

> ID：11215484
> 
> 赞同：2
> 
> 时间：2012-06-26T20:34:26.113
> 
> 标签：android, android-mapview, viewswitcher

我有一个带有 ViewSwitcher 的应用程序，它包含一个 MapView 和另一个 View，我想将 MapView 的位图保存为图像。如果 MapView 通过执行以下操作至少可见一次，则此方法效果很好：

```
mapView.setDrawingCacheEnabled(true);
Bitmap bm = mapView.getDrawingCache();
/* ... save bitmap ... */ 
```

问题是，如果 MapView 不可见，则`getDrawingCache()`返回`null`位图。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:19:43.573

我发现了如何做到这一点。有两件事要做：

要获取位图，请创建您自己的位图并将 MapView 绘制到其中：

```
 Bitmap bm = Bitmap.createBitmap(400, 400, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bm);
    mapView.draw(canvas); 
```

如果这样做，您将在位图中拥有所有叠加层，但不是地图图像（图块）。为了实现这一点，您必须`mapView.preLoad()`在将地图绘制到位图之前调用。

# xml - Jax-WS - 从请求 XML 中删除空标签

> ID：11215485
> 
> 赞同：4
> 
> 时间：2012-06-26T20:34:26.473
> 
> 标签：xml, web-services, jaxb, jax-ws, moxy

我正在尝试使用提供商公开的 Web 服务。提供者最后严格检查请求 xml 不应包含没有值的标签。

我正在使用 Jax-WS。如果我没有在特定对象中设置值，它将作为空标签发送并且标签存在。PFB 这个例子说明了我的问题。

客户端 XML：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:host="http://host.testing.webservice.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <host:testingMathod>
         <arg0>
            <PInfo>
               <IAge>45</IAge>
               <strName>Danny</strName>
            </PInfo>
            <strCorrId>NAGSEK</strCorrId>
            <strIpAddress></strIpAddress>
         </arg0>
      </host:testingMathod>
   </soapenv:Body>
</soapenv:Envelope> 
```

在这种情况下，没有给出 IpAddress 的值，因此发送了空标签。

因此，请让我们知道需要做什么来删除请求 xml 中的空标签。Handlerchain 是唯一的解决方案吗？

谢谢，纳文。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T16:41:59.780

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

默认情况下 MOXy 像其他 JAXB 实现一样不会将元素编组为空值：

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

**可能的问题**

我相信该`strIpAddress`属性不为空，而是包含一个空字符串（“”）的值。这将导致空元素被写出。

***根***

```
package forum11215485;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    String nullValue;
    String emptyStringValue;
    String stringValue;

} 
```

***演示***

```
package forum11215485;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.nullValue = null;
        root.emptyStringValue = "";
        root.stringValue = "Hello World";

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

***输出***

请注意如何没有为该`nullValue`字段编组任何元素，并且该`emptyStringValue`字段被编组为一个空元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <emptyStringValue></emptyStringValue>
   <stringValue>Hello World</stringValue>
</root> 
```

**解决方案 #1 - 确保属性设置为 null 而不是 ""**

**解决方案 #2 - 编写一个将 "" 转换为 null 的 XmlAdapter**

An`XmlAdapter`是一种 JAXB 机制，它允许将一个对象编组为另一个对象。

***字符串适配器***

以下`XmlAdapter`将空字符串编组为空。这将导致它们不出现在 XML 表示中。

```
package forum11215485;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class StringAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String v) throws Exception {
        return v;
    }

    @Override
    public String marshal(String v) throws Exception {
        if(null == v || v.length() == 0) {
            return null;
        }
        return v;
    }

} 
```

***包信息***

使用注解`XmlAdapter`挂钩。`@XmlJavaTypeAdapter`下面是一个在包级别挂钩它的示例，以便它适用于包中字符串类型的字段/属性。有关更多信息，请参阅： [http ://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)

```
@XmlJavaTypeAdapter(value=StringAdapter.class, type=String.class)
package forum11215485;

import javax.xml.bind.annotation.adapters.*; 
```

***输出***

现在运行演示代码的输出如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <stringValue>Hello World</stringValue>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:16:47.407

这是您正在使用的 XML 序列化程序的问题（如果您没有做一些特别的事情，它应该是 JAXB）。

序列化程序的“空策略”应该是可配置的，但我认为 JAXB 是不可能的。如果您使用[MOXy](http://www.eclipse.org/eclipselink/moxy.php)，您可以使用`XmlMarshalNullRepresentation.ABSENT_NODE`它来不写入节点（如果它为空）。实现应该是这样的：

```
class MyClass {

    // ... here are your other attributes

    @XmlElement (name = "strIpAddress")
    @XmlNullPolicy(nullRepresentationForXml = XmlMarshalNullRepresentation.ABSENT_NODE)
    String strIpAddress = null;

} 
```

*PS：也许您还需要`emptyNodeRepresentsNull`定义`@XmlNullPolicy`.*

有关此主题的更多信息，请查看[此问题](https://stackoverflow.com/questions/4181120/transforming-empty-element-into-null-when-unmarshalling-with-jaxb)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-13T00:28:30.367

这对我有用，当序列化一个我不能使用注释（`LogRecord`）的类时：

```
 JAXBContext jc = JAXBContext.newInstance(LogRecord.class);
            JAXBElement<LogRecord> je = new JAXBElement<>(new QName("log"), LogRecord.class, record);
            Marshaller marshaller = jc.createMarshaller();
            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
            marshaller.setAdapter(new XmlAdapter<String,String>() {
                @Override
                public String marshal(String v) throws Exception {
                    if(null == v || v.length() == 0) {
                        return null;
                    }
                    return v;
                }
                @Override
                public String unmarshal(String v) throws Exception {
                    return v;
                }
            });
            ByteArrayOutputStream xml = new ByteArrayOutputStream();
            marshaller.marshal(je, xml); 
```

# c# - 以编程方式将 X w/5 (Y || Z) 扩展为 "X Y"~5 || “X Z”~5

> ID：11215490
> 
> 赞同：0
> 
> 时间：2012-06-26T20:34:40.713
> 
> 标签：c#, regex, lucene, boolean, lucene.net

我需要能够以编程方式扩展用户的搜索表达式，例如：X w/5 (Y || Z) to "X Y"~5 || “X Z”~5
有没有我可以利用的现有库来做这种事情？如果不是，推荐什么方法？该解决方案将存在于 .NET 环境中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:37:43.207

您需要的是一个解析器，它将创建一个抽象语法树，然后您可以对其进行操作。看看[这里](https://stackoverflow.com/questions/2292003/boolean-and-math-expression-parser)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:40:43.463

你会想看看合取范式[http://en.wikipedia.org/wiki/Conjunctive_normal_form](http://en.wikipedia.org/wiki/Conjunctive_normal_form)和析取范式 http://en.wikipedia.org/wiki/Disjunctive_normal_form。

您可以实现一种算法以及指向 java 实现的链接。

# sql - 复合主键+外键

> ID：11215494
> 
> 赞同：3
> 
> 时间：2012-06-26T20:34:53.490
> 
> 标签：sql, database, sql-server-2008

我有一个包含调查列表的表（PK 是 ID）

```
CREATE TABLE [dbo].[SurveyMaster](
    [ID] [nvarchar](4) NOT NULL,
    [Title] [nvarchar](200) NULL,
    [IsActive] [bit] NOT NULL, 
```

还有一个包含变量映射列表的表。

```
CREATE TABLE [dbo].[VariableMappings](
    [ParentSurvey_ID] [nvarchar](4) NOT NULL,
    [ReportingMonth] [nvarchar](6) NOT NULL,
    [VariableName] [nvarchar](400) NOT NULL,
    [Value] [int] NOT NULL 
```

我希望在 ParentSurvey_ID、ReportingMonth 和变量名称上为 VariableMappings 创建一个主键，以确保记录的唯一性。

同时，我想要 VariableMappings.ParentSurvey_ID 和 SurveyMaster.ID 之间的外键关系，以确保 VariableMappings 只包含相关的 SurveyID。

我在 SQL Server 中尝试了几种方法，但我不相信我可以创建 FK，因为复合键由 3 列组成。

我怎样才能实现这一目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T20:41:53.073

是的你可以：

```
CREATE TABLE [dbo].[VariableMappings](
    [ParentSurvey_ID] [nvarchar](4) NOT NULL,
    [ReportingMonth] [nvarchar](6) NOT NULL,
    [VariableName] [nvarchar](400) NOT NULL,
    [Value] [int] NOT NULL,
  PRIMARY KEY (ParentSurvey_ID, ReportingMonth, VariableName),
  FOREIGN KEY (ParentSurvey_ID)
    REFERENCES dbo.SurveyMaster (ID)
) ; 
```

* * *

大部分与您的问题无关，但是拥有`PRIMARY KEY`如此宽的（410 nvarchars）并不是最好的主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:41:53.143

有一个主键很重要，它是`SurveyMaster`. 只要`ID`那里有主键，您就可以从任意数量的其他表中引用它，而不管这些表的主键如何。

外键要求列的*引用*组合是唯一的，并且必须保证唯一性，例如通过主键约束。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T20:38:43.287

您的主键定义和外键定义是正交的。您可以毫无问题地声明复合主键和单列外键。不过，我会建议您，`VariableMappings`与复合键相比，代理主键是更好的选择——特别是对于指向`VariableMappings`.

# jquery - 使用 appendto 将带有表单的 div 附加到现有 div

> ID：11215502
> 
> 赞同：0
> 
> 时间：2012-06-26T20:35:37.623
> 
> 标签：jquery

当我尝试使用将一些文本附加到现有 div 时，我很幸运

```
$("<div class='form-holder'>Append a form here</div>").appendTo('.container'); 
```

但是当我尝试时，一切都从那里向南

```
$(document).ready
(
function()
{
//$("<div class='form-holder'>Append a form here</div>").appendTo('.container');
$("<div class='form-holder'>"
"<form name="input" action="#" method="get">"
"<label>Slider Title:</label> <input type="text" name="slider_title" /><br/><br/>"
"<label>Slider Description:</label> <input type="text" name="slider_description" /><br/><br/>"
"<input type="submit" value="New Slider" />"
"<input type="submit" value="Update Slider" />"
"</form>"
"</div>").appendTo('.container');
}
); 
```

你可以在这里看到小提琴[http://jsfiddle.net/F7YAe/](http://jsfiddle.net/F7YAe/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:40:58.243

尝试使用字符串连接运算符替换您`"`的`'``+`

注意我的代码是如何正确着色的，而你的不是。您不能在 JS 和存在于 JS 中的 HTML 中使用相同类型的引号。

```
 $("<div class='form-holder'>" +
        "<form name='input' action='#' method='get'>" +
        "<label>Slider Title:</label> <input type='text' name='slider_title' /><br/><br/>" +
        "<label>Slider Description:</label> <input type='text' name='slider_description' /><br/><br/>" +
        "<input type='submit' value='New Slider' />" +
        "<input type='submit' value='Update Slider' />" +
        "</form>" +
        "</div>").appendTo('.container'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:42:41.787

您的问题是您没有编写正确的 JavaScript。您正在拆分字符串而不在行`+`之间使用。再加上混合单引号和双引号，你就会遇到重大问题。

```
$('<div class="form-holder">'+
'<form name="input" action="#" method="get">'+
'<label>Slider Title:</label> <input type="text" name="slider_title" /><br/><br/>'+
'<label>Slider Description:</label> <input type="text" name="slider_description" /><br/><br/>'+
'<input type="submit" value="New Slider" />'+
'<input type="submit" value="Update Slider" />'+
'</form>'+
'</div>').appendTo('.container'); 
```

[http://jsfiddle.net/F7YAe/9/](http://jsfiddle.net/F7YAe/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:41:17.723

您的字符串有问题，您需要转义引号和 + 用于连接或将您的字符串写在单行中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:43:00.530

这是一个工作示例！

[http://jsfiddle.net/F7YAe/10/](http://jsfiddle.net/F7YAe/10/)

```
$(document).ready(

function() {
    //$("<div class='form-holder'>Append a form here</div>").appendTo('.container');
    $("<div class='form-holder'><form name='input' action='#' method='get'><label>Slider Title:</label> <input type='text' name='slider_title' /><br/><br/><label>Slider Description:</label> <input type='text' name='slider_description'/><br/><br/><input type='submit' value='New Slider' /><input type='submit' value='Update Slider' /></form></div>").appendTo('.container');
});​ 
```

# debian - 配置tomcat如查找bin目录

> ID：11215505
> 
> 赞同：0
> 
> 时间：2012-06-26T20:36:03.443
> 
> 标签：debian, tomcat6

我正在尝试根据[处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/how-to-deal-with-java-lang-outofmemoryerror-permgen-space-error)来配置tomcat 。如何实施这些步骤

*   您可以通过关闭 tomcat 服务，然后进入 Tomcat/bin 目录并运行 tomcat6w.exe 来做到这一点。在“Java”选项卡下，将参数添加到“Java 选项”框。单击“确定”，然后重新启动服务。

所以我做了第一部分关闭tomcat：

*   须藤 /etc/init.d/tomcat6 停止

我如何实现其余的？我正在运行 debian linux

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:45:22.713

您引用的说明与 Windows 机器有关。

看来您是从 Debian 软件包安装 Tomcat。如果是这样，您的 bin 子目录应该在*/usr/share/tomcat...*

在那里，您可以使用*-XX:MaxPermSize更改 ../bin/* ***setenv.sh***（可能需要创建文件）中的 permgen 设置。

 *例如：

```
export CATALINA_OPTS="-XX:PermSize=256m" 
```*

# gcc - 如何编写C make文件

> ID：11215506
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:36:11.290
> 
> 标签：gcc, makefile, gnu-make

我是 C 编程的新手。我想使用 Make 文件编译 C 程序。我可以使用以下命令编译源代码文件：

```
gcc `xml2-config --cflags --libs` -o xmlexample readelementsfile.c 
```

但是当我创建 make 文件并将上面的命令添加到 make 文件中时，我得到了这个错误：

```
Makefile:1: *** missing separator.  Stop. 
```

你能告诉我哪里错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:39:34.503

您需要指定一个目标：

```
all:
    gcc `xml2-config --cflags --libs` -o xmlexample readelementsfile.c 
```

第二行开头的空格应该是一个`Tab`字符。

您还可以指定依赖项，以便在每次构建时都不会运行所有命令。

**有关的**

*   [Makefile 教程](http://mrbook.org/tutorials/make/)

# jquery - 如何保持页面上的对象随页面顶部滚动

> ID：11215511
> 
> 赞同：3
> 
> 时间：2012-06-26T20:36:43.163
> 
> 标签：jquery, css

我在关注这个 stackOverflow Q&A 时遇到了问题：

[滚动时将对象固定到浏览器窗口的顶部](https://stackoverflow.com/questions/6980821/fix-object-to-top-of-browser-window-when-scrolling)

我已将其应用于[此页面](http://www.crm-newsletter.com/website/mortgagePlannerCRM2.html)

为什么我的对象没有像应有的那样附加到顶部，然后在页面滚动回顶部时被正确替换？

我的 jQuery：

```
$(window).scroll(function () {
    if ($(window).scrollTop() > 200) {
        $('#contentNavigation').css('top', $(window).scrollTop());
    }
}
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:51:54.410

[http://jsfiddle.net/mikelegacy/tXBHT/](http://jsfiddle.net/mikelegacy/tXBHT/)

请重新审查这一点。这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:42:19.107

编辑：这是解决问题的更好方法，必要时使用固定位置，不要管你的 CSS。

用这个替换你的javascript：

```
$(window).scroll(function () {    
if ($(window).scrollTop() > 200) {
    $('#contentNavigation').css('position', 'fixed').css('top','0px');    }
else { 
    $('#contentNavigation').css('position', 'relative').css('top','0px');
}}); 
```

# c# - 请求通道在等待回复时超时

> ID：11215513
> 
> 赞同：33
> 
> 时间：2012-06-26T20:36:52.167
> 
> 标签：c#, wcf

我有一个使用 WCF 与网络服务器通信的小型应用程序。该程序被大约 200 个客户端使用，每个客户端以大约 5-20 个请求/分钟的速度发送。

查看我经常得到的错误日志：

> 00:00:59.9989999 后等待回复时请求通道超时

请求如下：

```
ClientService Client = new ClientService();
Client.Open();
Client.updateOnline(userID);
Client.Close(); 
```

这是 app.config

```
<configuration>
<configSections>
</configSections>
<startup><supportedRuntime version="v2.0.50727"/></startup><system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IClientService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="PATH TO SERVICE"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IClientService"
            contract="IClientService" name="WSHttpBinding_IClientService">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

每天大约有 200-800 次“多次通话”失败。大约 n-1 是可以的。我很困惑这个问题可能是什么。查看服务器统计信息，几乎没有汗水 - 每个请求需要不到 2 秒的时间来处理。它发送的数据由“int”或“非常小的字符串”组成 - 所以，它不是由于大小，如果是的话 - 应该是一致的失败..

建议？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-05-02T15:51:29.763

尝试将超时值添加到服务和客户端：

```
<binding name="BasicHttpBinding_SomeName" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00"
    sendTimeout="00:10:00" maxBufferPoolSize="2147483647"
    maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T21:34:44.873

您的请求似乎在处理之前在服务器上排队，然后开始超时。你可以在这里尝试几件事，看看到底发生了什么

1) 尝试限制您的 WCF 服务，例如：尝试增加您的并发会话。看看 [WCF 节流](http://www.codeproject.com/Articles/33362/WCF-Throttling)

2) 尝试在此处使用 PerCall 而不是 Using Sessions 以确保没有会话保留在那里。这是您可以在界面上执行的删除会话的操作

```
[ServiceContract(Namespace="YOUR NAMESPACE", SessionMode=SessionMode.NotAllowed)] 
```

以及实现这些接口的合同类

```
ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
```

并且 .... 您应该启用跟踪以查看到底发生了什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T21:28:30.667

检查此性能计数器 - `ASP.NET Requests Queued`。

一个 Web 应用程序可以托管许多网页和服务。默认情况下，IIS 每个 CPU 核心仅处理 12 个并发请求。

这意味着即使您的服务很快但其他页面/服务很慢，您的请求也必须在队列中等待才能执行。

`ASP.NET Requests Queued`应该为零或接近于零。

请参阅[MSDN 上的 ASP.NET 性能计数器](http://msdn.microsoft.com/en-us/library/fxk122b4.aspx)。

# mongodb - 你如何为 JEE6 项目连接一个 mongo db？

> ID：11215515
> 
> 赞同：0
> 
> 时间：2012-06-26T20:36:55.083
> 
> 标签：mongodb, java-ee-6, database

我正在尝试使用我的 mongo db 代替我当前的 apache derby 数据库。我如何连接我的 mongo db 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:45:09.317

Mongo 有一个 java 驱动程序，以及如何使用它的示例。
看看[这个](http://www.mongodb.org/display/DOCS/Java+Tutorial)教程。
另外，我建议你定义一个带有DAO接口的数据访问层，这样你的数据访问代码和业务逻辑代码之间会有松散的耦合，所以如果你需要再次替换DB，
你将只替换DAL实现并且不要触摸 BLL 代码

# ios - iOS - dispatcherTimer 阻塞触摸事件？

> ID：11215520
> 
> 赞同：0
> 
> 时间：2012-06-26T20:37:15.347
> 
> 标签：ios, input, grand-central-dispatch, dispatch

我正在使用调度程序源计时器以不同的帧速率更新视图。（8、12 或 24 帧/秒）

这是初始化 dispatcherTimer 的代码和用于创建计时器的函数。
（此功能直接取自“创建计时器”小节中的苹果文档：http: [//developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html](http://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html)）

称呼：

```
 self.dispatchTimer = [self createDispatchTimerWithInterval:self.project.frameDuration * NSEC_PER_SEC
                                                    leeway:0.0 * NSEC_PER_SEC
                                                     queue:dispatch_get_main_queue()
                                                     block:displayFrame]; 
```

功能：

```
- (dispatch_source_t)createDispatchTimerWithInterval:(uint64_t)interval leeway:(uint64_t)leeway queue:(dispatch_queue_t)queue block:(dispatch_block_t)block {
    dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,
                                                 0, 0, queue);
    if (timer) {
        dispatch_source_set_timer(timer, dispatch_walltime(NULL, 0), interval, leeway);
        dispatch_source_set_event_handler(timer, block);
        dispatch_resume(timer);
    }
    return timer;
} 
```

我的视图完美更新，但未捕获触摸事件。我的第一个赌注是“displayFrame”块需要太多处理时间，因为如果我将 frameDuration 减少到 0.5 秒左右，触摸事件就会被捕获。

我只用 iPad 2 在 iOS 4 上测试过这个。

任何帮助或提示将不胜感激！

艾蒂安

**更新**

我在苹果开发者论坛上问过类似的问题，这是我得到的答案：[https ://devforums.apple.com/thread/156633?tstart=0](https://devforums.apple.com/thread/156633?tstart=0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:43:46.690

主运行循环在每次通过运行循环后排空主队列。当你说你的持续时间太短时，我认为你是对的。如果源向队列中添加新块的速度快于它们被耗尽的速度，我当然希望 runloop 永远不会恢复处理事件（因为它一直在试图耗尽队列）。

# javascript - 在浏览器中播放 pls 文件

> ID：11215522
> 
> 赞同：0
> 
> 时间：2012-06-26T20:37:25.363
> 
> 标签：javascript, flash, html, audio, shoutcast

我需要`pls`在我的网站上播放一个文件，以便每个用户都可以收听它。一种方法是使用 Flash 和 actionscript，但我一直在寻找另一种使用 JavaScript 或 HTML5 在浏览器中播放它的方法。

有没有办法`pls`使用 html5 或 javascript 在浏览器中播放文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:26:29.303

pls 文件具有以下格式：

```
[playlist]
NumberOfEntries=x
File1=http://80.86.106.136:80/
File2=http://80.86.106.136:80/
... 
```

所以你需要阅读内容并做这样的事情

```
var content = readPls();
var data = content.split('\n\r');
var number_of_files = data[1].replace('NumberOfEntries=','');
var files = [];
for(var i=0;i<number_of_files;i++){
    files.push(data[2+i].replace("File"+(i+1),''))
} 
```

代码需要工作，但这是解决问题的方法（在 js/as 中）

# c++ - 如何防止 sqrt 溢出？

> ID：11215524
> 
> 赞同：5
> 
> 时间：2012-06-26T20:37:36.813
> 
> 标签：c++, math, sqrt

我有代码

```
unsigned long long f(unsigned long long x, unsigned long long y){
   return sqrt( ( (5*x*x + 1) * (5*y*y +1) - 1 ) / 4 );         
} 
```

但是如果 x 或 y 太大，即使输出应该很小，事情也会溢出。有没有解决的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T20:42:33.380

以代数方式拆分平方根的参数，也许？：

```
return sqrt((3*x*x+1)/2) * sqrt((6*y*y-5)/2); 
```

或根据您的需要进一步拆分。

如果`x`足够大，您可以忽略`+1`并进行第一项：

```
sqrt((3*x*x)/2) = fabs(x) * sqrt(3.0/2.0) 
```

与`y`第二个任期类似，使其

```
sqrt((6*y*y)/2) = fabs(y) * sqrt(3.0); 
```

编辑：在 OP 将他的问题编辑为：

```
return sqrt(((3*x*x+1)*(6*y*y-5)-1)/4); 
```

事实上，你可以把事情分开。你只需要更加小心一点。底线是，如果`x`真的很大，那么`+1`可以忽略。如果`y`真的很大那么`-5`可以忽略。如果两者`(3*x*x+1)`都是`(6*y*y-5)`正的，并且两者都很大，那么`-1`可以忽略。您可以使用这些技巧和一些额外的周边逻辑来进一步分解它。像这样：

```
 if(fabs(x) > BIGNUMBER && fabs(y) > BIGNUMBER)
 {
     return fabs(x) * fabs(y) * sqrt(18.0/4.0);
 }
 if(fabs(x) > BIGNUMBER && fabs(y) > 1.0)  // x big and y term positive
 {
     return fabs(x) * sqrt(6*y*y-5) * sqrt(3.0/2.0);
 }
 if(fabs(y) > BIGNUMBER)  // x term positive and y big
 {
     return sqrt(3*x*x+1) * fabs(y) * sqrt(6.0/2.0);
 }
 return sqrt(((3*x*x+1)*(6*y*y-5)-1)/4); 
```

您可以对此进行优化，但这只是为了说明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:59:27.467

我相信在 x 或 y 较大时，-1 可以忽略 wrt (x*x)*(y*y) ...并且由于您的函数返回 long long，因此浮点精度无关紧要。

您可以检查 x 或 y 是否大，因此，您可以选择忽略 -1 并按照 Chris 或 Rob 所说的那样做。

# c# - 使用 WCF 服务时，从 using 语句中返回是一种好的形式吗？

> ID：11215530
> 
> 赞同：2
> 
> 时间：2012-06-26T20:38:05.720
> 
> 标签：c#, asp.net-mvc, using

我有一个正在使用的 WCF 服务，并且到目前为止做得很好。

然而，在我们流量很大的生产系统上，我注意到在内存逐渐一致上升和下降之后（之间的时间逐渐拉长，增量逐渐增加），内存消耗呈上升趋势。

我想知道这是否可能是由于我使用 DAL Web 服务的方式：

例如：

```
 public static int GetUserTypeFromProfileID(int profileID)
    {
        try
        {
            memberServiceClient = new MemberServiceClient();                                // connect to the data service
            return memberServiceClient.GetUserTypeFromProfileID(profileID);                 // get the profileID associated with the sessionID
        }
        catch (Exception ex)
        {
            ErrorLogging.Instance.Fatal(ex);
            return 0;
        }
    } 
```

如果我将其更改为以下内容，请使用以下`using`语句：

```
 public static int GetProfileIDFromSessionID(string sessionID)
    {
        try
        {
            using (memberServiceClient = new MemberServiceClient())                                // connect to the data service
            {
                return memberServiceClient.GetProfileIDFromSessionID(sessionID);                // get the profileID associated with the sessionID
            }

        }
        catch (Exception ex)
        {
            ErrorLogging.Instance.Fatal(ex);
            return 0;
        }
    } 
```

在部分内执行返回是否是一种良好的形式`using`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:40:46.547

我相信使用语句没有特定于 WCF 的内容。它会在返回值之前处理您的 MemberServiceClient。

但是 WCF 服务客户端上的 Dispose() 方法调用内部的[Close()](http://msdn.microsoft.com/en-us/library/ms195520)方法，这可能会引发异常。所以最好直接调用 Close() 方法。当发生异常时，您还应该调用[Abort()方法。](http://msdn.microsoft.com/en-us/library/system.servicemodel.icommunicationobject.abort)这是推荐的实现。

```
var result;
try
{
    memberServiceClient = new MemberServiceClient();
    result = memberServiceClient.GetUserTypeFromProfileID(profileID);
    memberServiceClient.Close();
}
catch (FaultException e)
{
    //handle exception
    memberServiceClient.Abort();
}
catch (CommunicationException e)
{
    //handle exception
    memberServiceClient.Abort();
}
catch (TimeoutException e)
{
    //handle exception
    memberServiceClient.Abort();
} 
```

*注意：我编写了一个简单的基类来处理这些细节。它在[NuGet](https://nuget.org/packages/WcfClientBase)上。*

**更新：**

以下是 WcfClientBase 请求的示例：

```
public class MemberServiceManager : ServiceClientBase<MemberServiceClient>
{
    public int GetUserTypeFromProfileID(int profileID)
    {
        //makes a call to GetUserTypeFromProfileID operation, closes the channel and handles the exceptions
        //you may want to implement another base class for overriding exception handling methods
        //return value will be default of return type if any exceptions occur
        return PerformServiceOperation(item => item.GetUserTypeFromProfileID(profileID));
    }

    //or you can manually check if any exceptions occured with this overload
    public bool TryGetUserTypeFromProfileID(int profileID, out int userType)
    {
        return TryPerformServiceOperation(item => item.GetUserTypeFromProfileID(profileID), out userType);
    }

    //these exception handling methods should be overriden in another common subclass
    //they re-throw exceptions by default
    protected override void HandleCommunicationException(CommunicationException exception)
    {
        Console.WriteLine(exception.Message);
    }

    protected override void HandleFaultException(FaultException exception)
    {
        Console.WriteLine(exception.Message);
    }

    protected override void HandleTimeoutException(TimeoutException exception)
    {
        Console.WriteLine(exception.Message);
    }

} 
```

你也可以看看[GitHub 上的源代码](https://github.com/ufukh/WcfClientBase/blob/master/WcfClientBase/ServiceClientBase.cs)

# batch-file - SET 命令高级 /A 功能资源

> ID：11215532
> 
> 赞同：1
> 
> 时间：2012-06-26T20:38:07.993
> 
> 标签：batch-file, set

已经为上述内容做了很多搜索（任何内容的指南），但无济于事。谁能给我推荐一个？

然而，在现在时，我试图理解下面的代码示例，它返回月份的两位数表示，对应于 v 中设置的 3 个字符的月份名称：

```
 SET v=May

    SET map=Jan-01;Feb-02;Mar-03;Apr-04;May-05;Jun-06;Jul-07;Aug-08;Sep-09;Oct-10;Nov-11;Dec-12
    CALL SET v=%%map:*%v%-=%%
    SET v=%v:;=&rem.%

    ECHO.%v% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:12:04.467

`SET v=May`设置变量

`SET map=Jan-01;Feb-02;Mar-03;Apr-04;May-05;Jun-06;Jul-07;Aug-08;Sep-09;Oct-10;Nov-11;Dec-12`设置替换字符串

`CALL SET v=%%map:*%v%-=%%`- 将 %v 设置为`map`，但将 %v%-之前的所有内容替换为空（将所有内容`:`替换为空（= 之后没有替换代码） -现在`*``May-``v``05;Jun-06;Jul-07;Aug-08;Sep-09;Oct-10;Nov-11;Dec-12`

`SET v=%v:;=&rem.%`replace `;`with`&rem`设置一行，将 v 设置为`05`并`& rem`注释掉命令的所有其他部分。执行的命令是`SET v=05 & rem.Jun-06 & rem.Jul-07 & rem.Aug-08 & rem.Sep-09 & rem.Oct-10 & rem.Nov-11 & rem.Dec-12`

`ECHO.%v%`给出了答案

[该站点](http://www.dostips.com/DtTipsStringOperations.php)提供了很多信息，但是运行批处理文件并放置 echo %v% 也会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:05:20.973

打扰一下。我不喜欢这种类型的代码。*在我个人看来，以这种方式将这些值作为数组*进行管理是很清楚的：

```
rem Prepare the array of two-digits values for each 3-letters month names:
for %%a in ("Jan=01" "Feb=02" "Mar=03" "Apr=04" "May=05" "Jun=06" "Jul=07" "Aug=08" "Sep=09" "Oct=10" "Nov=11" "Dec=12") do (
   set month%%~a
)
rem Previous code is equivalent to these 12 lines:
rem set monthJan=01
rem set monthFeb=02
. . . .
rem set monthDec=12

rem This way, the result is immediately accessible:
SET v=May
CALL SET v=%%month%v%%%

rem Or in the clearer way using Delayed Expansion:
SET v=!month%v%! 
```

`monthXXX`是12 个不同的 3 个字母月份名称的值*数组。*

`SET v=May`将*索引*的值设置为元素数组。

`SET v=!month%v%!`先扩展为`SET v=!monthMay!`（正常扩展），然后扩展为`SET v=05`（延迟扩展）。

我已经解释了我必须在这些帖子中的每一个细节中更喜欢这种表示法的原因：

[cmd.exe（批处理）脚本中的数组、链表和其他数据结构](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)

[DIR 输出到 BAT 阵列？](https://stackoverflow.com/questions/10544646/dir-output-into-bat-array/10569981#10569981)

如果有人认为这个答案是题外话，我深表歉意......

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T09:35:16.850

对于那些想要反过来，如果输入的月份数错误想要一个错误的人，把它放在一个名为 script.cmd 的文件中：

```
@echo off
set mNum=%1

set mMap=01-Jan;02-Feb;03-Mar;04-Apr;05-May;06-Jun;07-Jul;08-Aug;09-Sep;10-Oct;11-Nov;12-Dec
call set mName=%%mMap:*%mNum%-=%%
set mName=%mName:;=&rem.%
if "%mName%" == "01-Jan" (
  echo Wrong month number "%mNum%"!
  goto :EOF
  )

echo Month %mNum% is "%mName%". 
```

并使用参数启动脚本：

```
> script 02
Month 02 is "Feb".

> script 13
Wrong month number "13"!

> script foo
Wrong month number "foo"! 
```

但是，它不涵盖空值：

```
> script
Month  is "Jan". 
```

# python - 捕获数据库错误的有效方法

> ID：11215535
> 
> 赞同：2
> 
> 时间：2012-06-26T20:38:23.800
> 
> 标签：python, database, sqlite, error-handling

我有一个桌面应用程序，它有 65 个模块，其中大约一半从 SQLite 数据库读取或写入。我发现**数据库可以通过 3 种方式抛出 SQliteDatabaseError：**

1.  SQL 逻辑错误或缺少数据库（不时发生不可预知的情况）
2.  数据库被锁定（如果它正在被另一个程序编辑，如 SQLite 数据库浏览器）
3.  磁盘 I/O 错误（也发生意外）

尽管这些错误并不经常发生，但当它们发生时，它们会完全锁定我的应用程序，因此我不能让它们一直存在。

因此，我开始重新编写数据库的每一次访问，使其成为指向其自己模块中通用“数据库访问函数”的指针。然后，该函数可以将这三个错误作为异常捕获，从而*不会*崩溃，并相应地提醒用户。例如，如果是“数据库被锁定错误”，它将宣布这一点并要求用户关闭任何也在使用数据库的程序，然后重试。（如果是其他错误，也许它会告诉用户稍后再试……还不确定）。更新所有数据库访问以执行此操作主要是将重定向复制/粘贴到通用功能 - 轻松工作。

**问题是：**仅仅提供这个数据库访问函数和它的声明是*不够*的，因为在 65 个模块中的所有数据库访问点都有代码跟随访问假设数据库将成功返回数据或完成一个写——当它没有写的时候，那个代码必须有一个条件。但是编写这些条件需要仔细研究每个访问点并了解如何最好地处理它。对于我需要以这种方式修补的数百个数据库访问来说，这既*费力又困难。*

我愿意这样做，但我想我会询问**是否有更有效/更聪明的方法或至少启发式方法可以帮助有效地完成此修复。**

（我应该声明这个应用程序没有特定的“架构”......它主要是可以称为“馄饨代码”的东西，其中 GUI 和数据库调用和逻辑都在“一起”的单元中。我是目前不愿意在 MVC 或类似的东西中重写整个项目的架构，尽管我会考虑在未来的项目中使用它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:04:59.273

你的直觉是对的。如果不单独检查每个数据库访问点，就无法为应用程序增加健壮性。

对于应用程序如何对取决于以下因素的错误做出反应，您仍然有很多重要的选择，

*   它是有人看管的，还是有时完全无人看管的？
*   延迟可以吗，还是及时报告数据库错误很重要？
*   您描述的三种故障的相对频率是多少？

现在你有了一个包装器，你可以用它来做一些常见的配置和错误处理，尤其是：

*   设置合理的连接超时
*   设置合理的繁忙超时
*   在客户端强制执行命令超时
*   自动重试错误，尤其是`SQLITE_BUSY`（在重试之间插入较大的延迟，重试几次后失败）
*   使用异常来减少应用程序级处理程序的数量。您可能能够在数据库错误时重新启动整个应用程序。但是，只有在您确信自己在哪个状态中止应用程序时才这样做；事务的一致使用可以确保重新启动方法不会留下不一致的数据。
*   当您检测到锁定错误时向人寻求帮助

...but there comes a moment where you need to bite the bullet and let the error out into the application, and see what all the particular callers are likely to do with it.

# sql - 如何处理 Oracle 中 NOT IN 和 NOT LIKE 语句中的空值？

> ID：11215542
> 
> 赞同：5
> 
> 时间：2012-06-26T20:38:47.270
> 
> 标签：sql, oracle, where-clause, notin

我有一长段 PL/SQL，除了 where 子句的一小部分外，它运行良好。

我希望应该返回一行，但是由于 where 子句检查的字段为空，因此尽管满足条件，但不会返回该行。

我在这里读到了一个很好的说明：http:
[//jonathanlewis.wordpress.com/2007/02/25/not-in/](http://jonathanlewis.wordpress.com/2007/02/25/not-in/)

它解释了 Null 如何影响 NOT IN 语句，我认为它对于 NOT LIKE 也是一样的。

我找不到的是我需要的类似替代品。我是否需要以某种方式将其切换为 IN 和 LIKE 或提供一些东西以返回该行（如果为 NULL）？

这是我的代码的简化版本。

```
SELECT * FROM Temp_Table T
WHERE -- Other where constraints
AND (T.Col_One NOT LIKE 'AString'
     OR T.Col_Two NOT IN ('BString','CString')) 
```

在我的情况下，该行在 Col_One 和 Col_Two 中都有空值。

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T20:41:16.607

试试这个：

```
AND (NVL(T.Col_One,'NuLl') NOT LIKE 'AString'
      OR NVL(T.Col_Two,'NuLl') NOT IN ('BString','CString')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T20:42:48.607

像这样的东西应该工作：

```
T.Col_One IS NULL OR T.Col_One NOT LIKE 'AString'
OR T.Col_Two IS NULL OR T.Col_Two NOT IN ('BString','CString') 
```

请注意...

```
T.Col_Two NOT IN ('BString','CString') 
```

……相当于……

```
T.Col_Two <> 'BString' AND T.Col_Two <> 'CString' 
```

...在 T.Col_Two 为 NULL 的情况下“折叠”为 NULL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T20:43:14.850

按照惯例`NULL`，不`like`等于或不等于任何东西——唯一有效的测试是`IS NULL`返回真值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T22:03:06.410

检查 Oracle 文档中的 NVL 函数：http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/functions105.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions105.htm)

# javascript - 通过在焦点上显示键盘来检测 ipad 怪癖

> ID：11215547
> 
> 赞同：4
> 
> 时间：2012-06-26T20:38:58.860
> 
> 标签：javascript, ipad, html, forms, modernizr

我编写了一个函数，一旦用户满足该字段的要求，它将自动将用户推进到表单的下一个字段。

我的问题是，当在 iPad 中使用它时，它不是专注于下一个字段，而是隐藏了键盘。

我已经放弃尝试解决这个问题，正在寻找一种方法来检测这个......试图成为最纯粹的人，不使用浏览器检测，但没有看到替代方案。

有人对此有特征检测方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:14:53.127

根据 Apple 的 Safari Web Content Guidelines 下的[Form and Document Events](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW17)，[没有专门为键盘触发的事件](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW5)。这并不意味着这不是您可以利用的内部 WebKit 事件......

这个问题的答案为嗅探键盘提供了一个非常新颖的解决方案：[iPad Web App: Detect Virtual Keyboard Using JavaScript in Safari?](https://stackoverflow.com/questions/2593139/ipad-web-app-detect-virtual-keyboard-using-javascript-in-safari)

本质上它试图设置窗口的滚动位置；如果位置没有改变，则键盘存在。

这是代码的清理版本：

```
$(document).ready(function(){
    $('input').focus(function(){
        var scrollPosition = $(window).scrollTop();
        $(window).scrollTop(10);
        var isKeyboard = ($(window).scrollTop() > 0);
        $(window).scrollTop(scrollPosition);

        alert(isKeyboard);
    });
});​ 
```

那至少应该让您对这个概念有所了解:)

# java - 线程池、共享数据、Java 同步

> ID：11215548
> 
> 赞同：6
> 
> 时间：2012-06-26T20:39:04.520
> 
> 标签：java, threadpool, synchronize

说，我有一个数据对象：

`class ValueRef { double value; }`

每个数据对象都存储在主集合中：

`Collection<ValueRef> masterList = ...;`

我还有一个作业集合，其中每个作业都有一个本地数据对象集合（其中每个数据对象也出现在 中`masterList`）：

```
class Job implements Runnable { 
     Collection<ValueRef> neededValues = ...; 
     void run() {
         double sum = 0;
         for (ValueRef x: neededValues) sum += x;
         System.out.println(sum);
     } 
} 
```

**用例：**

1.  `for (ValueRef x: masterList) { x.value = Math.random(); }`

2.  用一些作业填充作业队列。

3.  唤醒一个线程池

4.  等到每个作业都被评估过

注意：在工作评估过程中，所有的值都是不变的。然而，线程可能在过去评估过作业，并保留缓存的值。

**问题：** 确保每个线程看到最新值所需的最小同步量是多少？

我从监视器/锁的角度理解同步，我不理解从缓存/刷新的角度同步（即，在同步块的进入/退出时内存模型保证了什么）。

对我来说，感觉就像我需要在更新值的线程中同步一次以将新值提交到主内存，并在每个工作线程中同步一次，以刷新缓存以便读取新值。但我不确定如何最好地做到这一点。

**我的方法：**创建一个全局监视器：`static Object guard = new Object();` 然后，同步`guard`，同时更新主列表。最后，在启动线程池之前，为池中的每个线程一次，`guard`在一个空块中同步。

这真的会导致该线程读取的任何值被完全刷新吗？或者只是在同步块内触及的值？在这种情况下，也许我应该在循环中读取每个值一次，而不是一个空块？

谢谢你的时间。

* * *

编辑：我认为我的问题归结为，一旦我退出同步块，每次第一次读取（在那之后）都会进入主内存吗？不管我同步了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:47:44.493

线程池的线程过去评估过一些作业并不重要。

Javadoc`Executor`说：

> 内存一致性效果：在将 Runnable 对象提交给 Executor 之前，线程中的操作发生在其执行开始之前，可能在另一个线程中。

因此，只要您使用标准线程池实现并在提交作业之前更改数据，您就不必担心内存可见性影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:52:40.843

你的计划听起来就足够了。这取决于您计划如何“唤醒线程池”。

Java 内存模型规定，线程在进入`synchronized`块之前执行的所有写入对于随后在该锁上同步的线程都是可见的。

因此，如果您确定在更新主列表期间工作线程在`wait()`调用中被阻塞（必须在`synchronized`块内），当它们唤醒并变为可运行时，主线程所做的修改将对这些线程。

但是，我鼓励您在`java.util.concurrent`包中应用更高级别的并发实用程序。这些将比您自己的解决方案更强大，并且是在深入研究之前学习并发性的好地方。

* * *

澄清一下：如果不使用同步块来检查工作线程是否有要实现的任务，几乎不可能控制工作线程。因此，控制器线程对作业所做的任何更改都发生在工作线程唤醒之前。您需要一个`synchronized`块，或者至少一个`volatile`变量来充当内存屏障；但是，我想不出您将如何使用其中之一来创建线程池。

作为使用`java.util.concurrency`包的优点的示例，请考虑以下情况：您可以使用其中包含调用的`synchronized`块，*或*使用变量的忙等待循环。由于线程之间上下文切换的开销，繁忙的等待实际上可以在某些条件下执行得更好——这并不一定是乍一看可能会假设的可怕想法。`wait()`*`volatile`*

 *如果您使用 Concurrency 实用程序（在这种情况下，可能是`ExecutorService`），则可以为您做出适合您特定情况的最佳选择，同时考虑环境、任务的性质以及给定时间其他线程的需求。自己实现这种优化水平是很多不必要的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:19:36.210

在发布对集合的引用后，为什么不制作`Collection<ValueRef>`和`ValueRef`不可变的，或者至少不修改集合中的值。然后你就不用担心同步了。

那就是当您想要更改集合的值，创建一个新集合并将新值放入其中时。一旦设置了值，就会传递集合引用新的作业对象。

不这样做的唯一原因是如果集合的大小太大以至于它几乎无法放入内存并且您不能拥有两个副本，或者集合的交换会给垃圾收集器带来太多的工作（证明在将可变数据结构用于线程代码之前，其中之一是一个问题）。*

# .net - System.Security.Permissions.DataProtectionPermissionAttribute 的使用

> ID：11215550
> 
> 赞同：4
> 
> 时间：2012-06-26T20:39:10.260
> 
> 标签：.net, data-access, code-security

你曾经在现实世界的应用程序中使用过这个类吗？你能想象它有用的场景吗？我问是因为在 WCF 中有`MessageBodyMemberAttribute`控制数据完整性/加密并想知道它们是否以某种方式相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:02:32.767

非常有用的属性，比如用php客户端，没有这个php就看不懂wcf的wsdl。

# python - 全局变量和 Python 多处理

> ID：11215554
> 
> 赞同：30
> 
> 时间：2012-06-26T20:39:36.423
> 
> 标签：python, global-variables, multiprocessing

> **可能重复：**
> [Python 多处理全局变量更新未返回给父级](https://stackoverflow.com/questions/11055303/python-multiprocessing-global-variable-updates-not-returned-to-parent)

我正在使用一台具有许多内核的计算机，为了提高性能，我真的应该使用多个内核。但是，我很困惑为什么这些代码没有达到我的预期：

```
from multiprocessing import Process

var = range(5)
def test_func(i):
    global var
    var[i] += 1

if __name__ == '__main__':
    jobs = []
    for i in xrange(5):
        p = Process(target=test_func,args=(i,))
        jobs.append(p)
        p.start()

print var 
```

也

```
from multiprocessing import Pool

var = range(5)
def test_func(i):
    global var
    var[i] += 1

if __name__ == '__main__':
    p = Pool()
    for i in xrange(5):
        p.apply_async(test_func,[i])

print var 
```

我希望结果是，`[1, 2, 3, 4, 5]`但结果是`[0, 1, 2, 3, 4]`。

在将全局变量与进程一起使用时，我必须缺少一些微妙之处。这甚至是要走的路还是我应该避免尝试以这种方式更改变量？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T20:52:52.183

如果您正在运行两个单独的进程，那么它们将不会共享相同的全局变量。如果要在进程之间传递数据，请查看使用 send 和 recv。查看[http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes](http://docs.python.org/library/multiprocessing.html#sharing-state-between-processes)以获取与您正在做的类似的示例。

# bash - 如何将 dvdauthor 输出捕获到文件

> ID：11215555
> 
> 赞同：0
> 
> 时间：2012-06-26T20:39:36.800
> 
> 标签：bash, shell

我正在尝试将 dvdauthor 的输出捕获到文件中。到目前为止，我找到了这个命令，但它不起作用：S

```
dvdauthor -x dvdauthor.xml > output.txt 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:45:15.267

看起来好像 dvdauthor 将大量输出打印到 stderr 而不是 stdout。我自己没有这个软件，所以不能确定，但​​我在（我认为是）[源代码](https://github.com/ldo/dvdauthor/blob/master/src/dvdauthor.c)中看到了很多这样的东西，这表明它正在将信息消息打印到 stderr 而不是 stdout：

```
fprintf(stderr, "INFO: dvdauthor creating table of contents\n"); 
```

> 重定向只会将标准输出重定向到文件。要将 stderr 重定向到文件，您可以使用 '2>'

尝试：

```
dvdauthor -x dvdauthor.xml 2> output.txt 
```

您可能会发现 BASH 编程介绍对于重定向输出的更多信息很有用：http: [//tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)

# android - 安卓和 OAUTH 2.0

> ID：11215557
> 
> 赞同：10
> 
> 时间：2012-06-26T20:39:41.163
> 
> 标签：android, oauth, oauth-2.0

我无法解决这个问题来挽救我的生命！

所以，我有一个基于 Codeigniter 的 REST api，带有 OAUTH 2.0（草案 23 或其他东西）服务器，用于我自己的身份验证系统（不使用 Twitter 或 FB）

我希望能够使用它来允许用户“登录”到我的 Android 应用程序。

我在互联网上的任何地方都找不到有关此的任何信息。有几个不受支持的 OAUTH 2.0 客户端库，例如 Leeloo（已迁移到 Apache Amber，一年多没有更新，Amber 下也没有发布）。

因此，我的问题是：

1.  OAUTH 2.0 是否太新？它似乎已经有几年历史了......它仍然太新而无法使用。我应该使用 OAUTH 1 吗？（这似乎不受支持 - 所有的 codeigniter OAUTH 1 库都已移至 2.0）。

2.  我应该使用完全不同的技术吗？例如，我听说过“xauth”。同样，这方面的信息似乎很粗略。

3.  自己做这件事容易吗？事实并非如此，但大多数人只是创建自己的自制解决方案吗？我也找不到太多关于这个的信息。

你能给我的任何帮助都会很棒。您也可以指出我的任何资源都会非常棒。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T17:02:25.413

1.  不，OAuth 2.0 已经足够老了，可以得到一些优秀的开源库的支持。例如，您可以使用[scribe](https://github.com/fernandezpablo85/scribe-java)。

2.  抱歉，我对 XAuth 的了解还不够，无法帮助您。

3.  是的，使用 scribe 真的很容易。要支持自定义 Provider，您只需扩展`org.scribe.builder.api.DefaultApi20`. 由于您使用与 Google 相同的 OAuth 2.0 草案，因此您可以使用[Thomas Bruyelle 的抄写员 fork 中](https://github.com/bistri/scribe-java)的[Google API 实现](https://github.com/bistri/scribe-java/blob/master/src/test/java/org/scribe/examples/GoogleExample20.java)作为蓝图。[本文](http://schwiz.net/blog/2011/using-scribe-with-android/)应该让您开始在 Android 中使用 scribe。[您可以从此处](https://github.com/bistri/scribe-java/blob/master/src/test/java/org/scribe/examples/GoogleExample20.java)的 scribe fork 进一步查看 Google 示例。

# jquery - JQuery datepicker不更新.blur上的隐藏字段

> ID：11215558
> 
> 赞同：0
> 
> 时间：2012-06-26T20:39:43.723
> 
> 标签：jquery, jquery-ui, datepicker, uidatepicker, jquery-ui-datepicker

我正在使用两个字段更新一个隐藏字段#start：一个文本字段（用于时间）和一个日期选择器字段。但是，当我使用 datepicker 选择日期并且时间字段中没有任何内容时，隐藏字段不会更新。此外，当填写时间字段并通过 datepicker 选择日期时，日期会使用上一个选择而不是最近选择的日期进行更新（可能是由于输入值正在更新）。如何正确编写此函数？谢谢！

```
$("#datepicker").blur(function () {
        var date = $(this).val();
        var time = $('#time').val();
        $("#start").val(date + time.toString(' HH:mm').toString());
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:00:24.703

不要使用 .blur()，使用 datepicker 的[onSelect](http://jqueryui.com/demos/datepicker/#event-onSelect)事件。

**[jsFiddle 示例](http://jsfiddle.net/j08691/j4Lsm/)**

**jQuery**

```
$("#datepicker").datepicker({
    onSelect: function(dateText, inst) {
        var date = $(this).val();
        var time = $('#time').val();
        $("#start").val(date + time.toString(' HH:mm').toString());
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:04:40.350

您应该添加“onSelect”事件处理程序以及“模糊”事件处理程序。请参阅[jsfiddle 上的示例](http://jsfiddle.net/89hWa/)

```
$("#datepicker").datepicker({onSelect: populateHidden});
$("#datepicker").blur(populateHidden);

function populateHidden()
{
        var date = $("#datepicker").val();
        var time = $('#time').val();
        $("#start").val(date + ' ' + time);
} 
```

# javascript - Ajax 中断 .on('click', eventhandler)

> ID：11215559
> 
> 赞同：0
> 
> 时间：2012-06-26T20:39:46.957
> 
> 标签：javascript, jquery, ajax

我有一个项目表，其中有一列可以单击以打开浮动菜单的链接。我还有一个侧边栏链接，它将执行 ajax 请求并对结果进行排序（它用新表重新填充表）。当表格结果尚未排序（由 ajax 调用重新填充）时，链接工作正常。但是，当我对结果进行排序并执行 ajax 请求时，表中的链接不再起作用。

我想知道如何在表格链接中保留点击事件？我认为 jQuery 的 .on(selector, eventhandler) 可以解决这个问题，但在我的情况下似乎并非如此。

![在此处输入图像描述](../Images/92cba1398fc7d5f181a85261988ecf41.png)

这是我目前对表格链接的点击事件所拥有的：

```
 $('.addSet').on('click', function(event) {
    event.stopPropagation();
    return menuShow(this);
  });

  $('.addSetMenu input, .addSetMenu select, .addSetMenu').on('click', function(event) {
    return event.stopPropagation();
  });

  menuShow = function(menuParent) {
    var menu, parentLeft, parentOffset, parentTop;
    menu = $(menuParent).siblings('.addSetMenu');
    parentOffset = $(menuParent).offset();
    parentTop = parentOffset.top;
    parentLeft = parentOffset.left;
    $(menu).css({
      'top': parentTop + 20,
      'left': parentLeft - 160
    });
    resetMenu();
    return $(menu).toggleClass('hide');
  };

  $('html, .setCancelBtn').on('click', function() {
    return resetMenu();
  });

  resetMenu = function() {
    var menu;
    menu = $('.addSetMenu input[type=text]');
    $('.addSetMenu select').val('default');
    $(menu).addClass('hide');
    $(menu).val('');
    return $('.addSetMenu').addClass('hide');
  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:50:06.380

当您的表重新填充时，这些链接的相应 DOM 节点将被删除。他们所有的事件处理程序也是如此。您应该挂钩一些父元素，例如您的表格。从那里你可以捕捉到传播的事件。

```
$('table-selector').on('click', 'urlSelector', function(event) {
    //handler code
}) 
```

请参阅此处的“直接和委托事件”：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:42:16.567

改变

```
$('.addSet').on('click', function(event) {
  //some code
}); 
```

至

```
$(document).on("click",".addSet", function(event) {
  //some code
}); 
```

# android - WebView 重置缩放设置

> ID：11215561
> 
> 赞同：4
> 
> 时间：2012-06-26T20:40:00.233
> 
> 标签：android, webview

我用这个初始值设置 WebView

```
 webview.getSettings().setBuiltInZoomControls(true);
    webview.getSettings().setLoadWithOverviewMode(true);
    webview.getSettings().setUseWideViewPort(true); 
```

第一次加载后，网页显示为整页。如果我加载一个新的 URL，新页面会显示最后的缩放设置。它没有加载初始设置。如何在加载下一个 url 之前将最后的缩放设置重置为初始值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:55:07.563

尝试设置这些属性 - webview.getSettings().setLoadWithOverviewMode(true); webview.setInitialScale(0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-04T06:53:26.270

在**Kotlin**中，您可以尝试：

```
webview.settings.loadWithOverviewMode = true
webview.setInitialScale(0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-06T04:12:25.877

在我的应用程序中，在 Android 8 上进行测试，我尝试了之前答案的所有组合。`setInitialScale`没有区别，只有在新加载之前重置缩放级别：

```
webView.getSettings().setLoadWithOverviewMode(false);
webView.getSettings().setLoadWithOverviewMode(true); 
```

# silverlight - 等待效果结束加载屏幕

> ID：11215565
> 
> 赞同：0
> 
> 时间：2012-06-26T20:40:06.850
> 
> 标签：silverlight, xaml

我创建了一个翻转按钮的效果。当我单击它时，它必须加载另一个屏幕。我的问题是：我希望 silverlight 等到“翻转”结束才开始加载新屏幕。

如果可能的话，我想在不使用代码隐藏的情况下做到这一点。最好在 XAML 上。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:11:49.867

我猜您正在使用 StoryBoard 来完成此操作。如果是这种情况，那么您可以订阅[Completed 事件](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.completed%28v=vs.95%29.aspx)并在事件处理程序中更改您的页面。

# jquery - JQuery 排序小问题

> ID：11215568
> 
> 赞同：0
> 
> 时间：2012-06-26T20:40:15.793
> 
> 标签：jquery, jquery-ui

我有以下带有 Jquery 排序的 html 代码

```
<div class="sortable" style='width:700px; margin: 0 auto; border:2px solid; border-color:grey;'>
    <a href='#' class='expand'> Group 1</a>
<ul style="display:none" class="sortable" >
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
</ul>

<a href='#' class='expand'> Group 2</a>
<ul style="display:none" class="sortable">
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
    <li class="ui-state-default">Item 6</li>
</ul>
</div> 
```

查询......

```
<script>
    $(function() {
        $( ".sortable" ).sortable();
        $( ".sortable" ).disableSelection();
    });
</script>
<script>
$(document).ready(function() {
    $('.expand').click(function() {
        $(this).next().toggle('slow', function() {
        });
    });
});

</script> 
```

ul 内的列表是可排序的，整个 aer 上的 div 内的 uls 也是可排序的。问题是当我将一个项目从一个组移动到另一个时，如果我将该项目放在该组的项目之间，它会添加到 ul 中，但如果我将它放在组的底部或组的正下方，那么它是放置在 ul 之外。

**编辑**

现在我可以对每个 ul 中的列表进行排序，但我不能对整个 ul 进行排序，也不能将一个项目从一个组移动到另一个组

谁能帮我？谢谢

[在 JSFiddle 上](http://jsfiddle.net/yDXfP/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:47:21.843

你的脚本快疯了，因为你有一堆具有相同 id 的项目`sortable`- 每个元素只使用一个 id，多个元素可以共享同一个类。例子...

```
<script type="text/javascript">
    $(function() {
        $(".patents").sortable();
        $(".patents").disableSelection();
    });
</script>

<div id="sortWrap">

    <a href="#" class="expand">Group 1</a>
    <ul style="display: none;" id="ulOne" class="patents">
        <li class="ui-state-default">Item 1</li>
        <li class="ui-state-default">Item 2</li>
        <li class="ui-state-default">Item 3</li>
    </ul>

    <a href="#" class="expand">Group 2</a>
    <ul style="display: none;" id="ulTwo" class="patents">
        <li class="ui-state-default">Item 4</li>
        <li class="ui-state-default">Item 5</li>
        <li class="ui-state-default">Item 6</li>
    </ul>

</div> 
```

除了您的语法错误之外，您尝试做的事情并不容易单独使用 Sortable 完成。你会希望这个扩展能够重新排列嵌套列表：[https ://github.com/mjsarfatti/nestedSortable](https://github.com/mjsarfatti/nestedSortable)

# iphone - 从 iPhone 应用程序将消息发布到朋友的墙上

> ID：11215573
> 
> 赞同：0
> 
> 时间：2012-06-26T20:40:37.290
> 
> 标签：iphone, facebook, post

我希望我的 iPhone 应用程序能够将静态消息发布到用户朋友的 Facebook 墙上。类似的东西会在上面显示静态消息，然后是输入朋友姓名并显示建议朋友的地方。这是通过图形 api 完成的，还是 POST 方法可以使用的权限键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:48:07.623

看起来[这](https://stackoverflow.com/questions/4126400/api-facebook-iphone-possible-to-post-to-a-friends-wall)可能是你所追求的。

从链接：

“您只需将您朋友的 Facebook ID 作为“target_id”键下的参数发送。

在参数字典的键 @"target_id" 下设置一个参数（在 Facebook 对象上调用 dialog:andParams:andDelegate: 时）。

在这里，您有一个使用新 sdk（使用图形 api）的示例帖子：

```
 NSMutableDictionary* params = [NSMutableDictionary dictionary];
[params setObject:@"Some text" forKey:@"user_message_prompt"];
[params setObject:@"another text" forKey:@"action_links"];
[params setObject:@"Yet another text" forKey:@"attachment"];
[params setObject:@"SOME FACEBOOK ID" forKey:@"target_id"];

//At some point you need to create the following Facebook instance

[facebook dialog: @"stream.publish"
    andParams: params
    andDelegate: self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:48:31.703

您首先需要请求朋友列表，然后在您的应用程序中提供一个界面，用户可以在其中选择他想在哪个朋友的墙上写字... :) 之后，您可以将选定的朋友 ID 传递给您正在呈现给的对话框用户...至少我习惯这样做，这似乎是在用户墙上发布内容的一种非常标准的方式...希望它有所帮助

# c++ - CMake 和 Qt：moc 文件/清理规则的目录

> ID：11215574
> 
> 赞同：1
> 
> 时间：2012-06-26T20:40:37.603
> 
> 标签：c++, qt, makefile, cmake

我发现 CMake 有点难以理解，而且我目前遇到了目录问题。

例如，假设我有以下目录组织：

```
project/
project/bin
project/obj
project/src
project/src/main.cpp
project/src/mainwindow.cpp
project/src/mainwindow.h
project/CMakeLists.txt 
```

该项目使用 Qt 4.8 和 CMake 2.8.8。我想做以下事情：

*   在所有编译开始时，清除所有以前的临时文件（.o 和 .moc）

*   所有的 .o 和 .moc 都放在 obj 目录中

*   可执行文件放入 bin

最简单的 CMakeLists.txt 是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:46:21.267

建议在所有生成的文件都在源文件夹之外的情况下使用 out of source build。你有什么理由不这样做吗？

# php - is_page() 是否在 WP 插件 php 文件中工作？

> ID：11215585
> 
> 赞同：0
> 
> 时间：2012-06-26T20:41:17.430
> 
> 标签：php, wordpress

`is_page()`应该从插件的 php 文件中工作吗？具体来说，我使用 NextGen 库来控制脚本和样式的队列。我已经测试过了，它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:10:45.403

我想只要你插入：

```
global $wpdb; 
```

进入你的插件/函数，你应该能够使用`is_page()`，只要它没有被钩在循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:46:47.130

根据您的插件正在做什么以及何时运行此特定代码，它可能会在 The Loop 内部执行。如果是这种情况，那就`is_page()`行不通了。从文档：

> 由于某些全局变量在循环期间被覆盖，is_page() 将不起作用。为了在循环之后使用它，您必须在循环之后调用 wp_reset_query()。

# apache-flex - 多维数组列表和下拉列表

> ID：11215588
> 
> 赞同：0
> 
> 时间：2012-06-26T20:41:25.590
> 
> 标签：apache-flex, actionscript, multidimensional-array

我的问题是，我该如何获取这个 Multi Dim 数组集合并将级别 2 应用于下拉列表，

```
 var someArray:ArrayCollection = new ArrayCollection( [
        { label: "Level 1 p1", data: 
         { label: "Level 2", data: "some stuff" }
        },
        { label: "Level 1 p2", data: 
         { label: "Level 2", data: "some stuff" }
        }
    ] );

<s:DropDownList includeIn="items" id="classSelect" dataProvider="{someArray[0].data}" selectedIndex="0" labelField="label" x="405" y="150"/> 
```

someArray[0].data - 例如将它指向条目 1 和数据级别的内容，这又是一个 arrayList，我对指针如何工作的理解不正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:26:49.093

我不确定你的意思

> 将级别 2 应用于下拉列表

如果您想在下拉列表中显示 2 级文本，您可以使用 itemRenderer 或[labelFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ListBase.html#labelFunction)来实现，它会深入到对象中以返回文本。概念上是这样的：

```
protected function getLevel2(item:Object):String{
  return item.data.label;
}

<s:DropDownList dataProvider="{someArray}" labelFunction="getLevel2" /> 
```

如果您希望[dataProvider](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/SkinnableDataContainer.html#dataProvider)只包含嵌套对象，那么您必须遍历 someArray 值并创建一个仅包含 2 级对象的新集合。概念上是这样的：

```
var newDataProvider :ArrayCollection = new AryCollection();
for each (item in someArray){
 newDataProvider.addItem(item.data);
} 
```

我还要补充一点，作为澄清点，您当前的 dataProvider 设置很可能会提供错误，因为您的“数据”是实现[IList](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/IList.html)接口的通用对象。

```
<s:DropDownList dataProvider="{someArray[0].data}" /> 
```

如果它确实有效，那么您最终会得到一个只有一个项目的 dataProvider。

# mysql - 在两个数据库之间传输数据

> ID：11215590
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:41:28.357
> 
> 标签：mysql, sql-server, database

目标：
数据库 SQL 服务器应该每月将数据从表传输到数据库 MySQL。

问题：
您建议我使用什么选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:59:12.490

SSIS 有几个答案，这是一个优秀的产品。如果您将该服务安装为 SQL Server 安装的一部分，那么我会推荐它。如果您没有可用的功能（例如，您正在运行 Express、Workgroup 或 Web 版本），那么我建议您使用 Pentaho 套件（特别是 Kettle）。它是开源的。

如果您有 SQL Server Standard 或更高版本，请考虑使用 SSIS。您将需要安装 MySQL 连接器并将其设置为您的目的地（一旦您成功安装了工具，这将变得清晰）。

您需要在某处安装 SSIS 服务。根据处理量和数据量，这可能需要在单独的服务器上。

您还需要安装这些工具。在 SQL Server 版本 2005-2008R2 上，这称为“商业智能开发工作室”，它基本上是一个带有 BI 特定组件的 VS shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:43:43.930

Sql Server 集成服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:52:27.470

可以用 SSIS 完成：

[使用 Sql Server 集成服务 (SSIS) 进行 MySQL 数据传输](http://www.packtpub.com/article/mysql-data-transfer-using-sql-server-integration-services-ssis)

# ios - 将标签放在甜甜圈风格的 CPTPiePlot 切片中，它们排列不正确

> ID：11215593
> 
> 赞同：1
> 
> 时间：2012-06-26T20:41:46.973
> 
> 标签：ios, core-plot

我试图在 ios 上用 core-plot 绘制一个甜甜圈饼图，一个图表在另一个图表中。每个切片具有相同的宽度，但切片是彩色编码的。我试图在每个切片的中心放置一个彩色点，但我不知道如何让点的位置正确。

我已经设法使用饼图的 labelOffset 属性使它们大致居中。（目前我使用 -35 的标签偏移量，由反复试验确定）。但是我无法让它们完全居中，并且在最里面的图中，它们最终可能会离得足够远，以至于它们位于错误的切片中。我尝试设置文本层的 rectAnchor 属性和填充，但似乎都没有任何效果。

创建绘图的代码：

```
 CGFloat startAngle = [self degreesToRadians:90 + ((360 / [self.dangerRoseData numberOfSectors]) /2.0)];

    NSInteger levels = [self.dangerRoseData numberOfLevels];
    for(int i = 0; i < levels; i++){
        CGFloat radiusD =  (i + 1.0)/ levels;
        CGFloat radius =  MIN(radiusD * (graphHostingView.frame.size.height - 2 * graph.paddingLeft) / 2.8,
                              radiusD * (graphHostingView.frame.size.width - 2 * graph.paddingTop) / 2.8);

        CPTPieChart *lastPie = [plots lastObject];
        CGFloat innerRadius;
        if(lastPie != nil)
            innerRadius = lastPie.pieRadius;
        else
            innerRadius = 0;

        CPTPieChart *piePlot = [[CPTPieChart alloc] init];
        piePlot.backgroundColor = [UIColor clearColor].CGColor;
        piePlot.dataSource = self;
        piePlot.delegate = self;
        piePlot.pieRadius  = radius;
        piePlot.pieInnerRadius  = innerRadius;
        piePlot.identifier      = [self.dangerRoseData nameForLevel:i];
        piePlot.borderLineStyle = lineStyle;
        piePlot.startAngle      = startAngle;
        piePlot.sliceDirection  = CPTPieDirectionClockwise;
        piePlot.labelOffset = -35;//brute force trial and error
        piePlot.labelRotationRelativeToRadius = NO;//new property after 1.0

        [graph addPlot:piePlot];
        [plots addObject:piePlot];
    } 
```

对于标签：

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index{
....

CPTMutableTextStyle *textStyle = [[CPTMutableTextStyle alloc] init];
textStyle.color = color;
textStyle.fontSize = 36;
CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:@"•" style:textStyle];
return label;
} 
```

我尝试更新到最新版本的 core-plot，它为 CPTPiePlot labelRotationRelativeToRadius 添加了一个新属性，这似乎应该是这个问题的答案，但事实并非如此。使用新版本，我无法将点定位在靠近正确位置的任何位置。

我错过了定位标签的东西吗？

我是否使用完全错误的方法将点放在切片中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:12:35.740

好吧，我决定尝试使用图像而不是文本标签，并且定位效果很好，它似乎一点也不像文本标签那样不稳定。为了能够在最里面的饼图中放置点，我还必须改变大小，所以里面的饼不是占据等量的总半径，而是占据其余部分空间的两倍。生成图的代码：

```
NSInteger levels = [self.dangerRoseData numberOfLevels];
    for(int i = 0; i < levels; i++){
        CPTPieChart *lastPie = [plots lastObject];
        CGFloat innerRadius;
        if(lastPie != nil)
            innerRadius = lastPie.pieRadius;
        else
            innerRadius = 0;

        CGFloat ringThickness;
        ringThickness = ( (graphHostingView.frame.size.width - 2 * graph.paddingTop) / ((levels + 1) * 2) ) * .85;
        if(i == 0)//make the inner circle twice the thickness of the rings
            ringThickness += ringThickness;

        CGFloat radius =  innerRadius + ringThickness;

        int labelOffset = -14;
        if(i == 0)
            labelOffset = -15;

        CPTPieChart *piePlot = [[CPTPieChart alloc] init];
        piePlot.backgroundColor = [UIColor clearColor].CGColor;
        piePlot.dataSource = self;
        piePlot.delegate = self;
        piePlot.pieRadius  = radius;
        piePlot.pieInnerRadius  = innerRadius;
        piePlot.identifier      = [self.dangerRoseData nameForLevel:i];
        piePlot.borderLineStyle = lineStyle;
        piePlot.startAngle      = startAngle;
        piePlot.sliceDirection  = CPTPieDirectionClockwise;
        piePlot.labelOffset = labelOffset;

        [graph addPlot:piePlot];
        [plots addObject:piePlot];
    } 
```

对于标签：

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{
   ...

    CPTImageLayer *layer = [[CPTImageLayer alloc] initWithImage:[UIImage imageNamed:filename]];
    layer.anchorPoint = CGPointMake(0.5, 0.5);
    return layer;
} 
```

请注意，CPTImageLayer 是标准核心图的补充，以降低使用图像的复杂性

# python - SQL Alchemy 在 before_update 上获取脏更新列

> ID：11215594
> 
> 赞同：2
> 
> 时间：2012-06-26T20:41:48.320
> 
> 标签：python, sql, sqlalchemy

我正在尝试获取有关 SQL Alchemy 中 before_update 更新内容的脏列数据，以进行密码验证预更新。有任何想法吗？我一直在阅读文档，但找不到方法。

这是文档参考：[http ://docs.sqlalchemy.org/en/rel_0_7/orm/events.html?highlight=before_update#sqlalchemy.orm.events.MapperEvents.before_update](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html?highlight=before_update#sqlalchemy.orm.events.MapperEvents.before_update)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:42:10.927

您链接到[before_update](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_update)的文档中的段落建议使用[简单验证器](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#simple-validators)进行属性验证。
有关属性更改的更细粒度的控制，请参阅[属性事件](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#attribute-events)文档。两个链接都提供了代码示例。

# jquery - 检查输入是文本框、选择、文本区域还是单选

> ID：11215598
> 
> 赞同：10
> 
> 时间：2012-06-26T20:42:07.233
> 
> 标签：jquery

我有一个带有不同 html 输入字段的表单...

```
1) <input type="text">
2) <textarea></textarea> 
3) <input type="checkbox">
4) <input type="radio">
5) <select></select> 
```

我如何能够确定它使用 jQuery 的输入字段类型。*例如：如果我想检查是否 input = "select" 然后做一些事情。*

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T20:45:28.027

```
$('input') // selects all types of inputs
$('input:checkbox') // selects checkboxes
$('select') // selects select element
$('input:radio') // selects radio inputs
$('input[type="text"]') // selects text inputs 
```

您可以使用`event.target.type`，这会提醒什么类型的`input`，`textrea`或者`select`是事件的目标。

```
$('input, textarea, select').change(function(event){
   alert(event.target.type)
}) 
```

[http://jsfiddle.net/Q4BNH/](http://jsfiddle.net/Q4BNH/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-26T20:46:54.953

您可以使用 jquery 的 .is()。例如

```
 if ( $(this).is("input") )   //or 
  if ( $(this).is('input:text') ) 
```

更多信息[在这里](http://api.jquery.com/is/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-02T10:42:55.167

`:input`您可以使用as 选择器遍历所有表单元素。由于`select`and`textarea`元素没有`type`属性，你想使用`.is()`

```
 $(':input').each(function(){
       if($(this).is('select')){
          var inputType = 'select';
       }else if($(this).is('input:text')){
          var inputType = 'text';
       }else if($(this).is('input:checkbox')){
          var inputType = 'checkbox';
       }
       console.log('input type = '+inputType+');
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T20:44:39.187

对于 1、3、4：

```
$("input").attr('type'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T20:45:01.820

我建议你使用 JQuery is syntax

[http://api.jquery.com/is/](http://api.jquery.com/is/)

类似的东西

```
$(document).ready(function() {
    var items = $("input");
    if(items.first().is("input[type=text]")) {
     alert("Text type");            
    }
}); 
```

你可以在这里查看 [http://jsfiddle.net/JRLn9/2/](http://jsfiddle.net/JRLn9/2/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T20:45:06.657

```
var tipo = $('#elemento14').attr('type'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T20:48:08.723

您可以通过编写一个选择器来提取这些元素中的每一个来做到这一点，然后您可以遍历它们并检查类型。像这样的东西：

```
$('input, textarea, select').each(function() {
    var el = $(this);
    if(el.is('input')) { //we are dealing with an input
        var type = el.attr('type'); //will either be 'text', 'radio', or 'checkbox
    } else if(el.is('select')) { //we are dealing with a select
        //code here
    } else { //we are dealing with a textarea
        //code here
    }
}); 
```

# c# - Asp.net 下拉列表的项目多于数据库列表

> ID：11215599
> 
> 赞同：0
> 
> 时间：2012-06-26T20:42:09.017
> 
> 标签：c#, asp.net

我是新手，但创建了一个小的 Asp.net c# 项目。

我有一个将数据粘贴到数据库表的表单和一个快速概览数据网格，如果我在该数据网格上编辑一行，它会重新填充 from。
我创建了一个单独的优先级数据库表/列表来测试表单上的下拉列表，值 L、VL、M、H、VH 只有这些添加没有删除。我可以将列表拉到下拉框中并可以看到所有 5 个值，但是列表很大并且包含另外 45 个空项目。

如果我改变 ddl_priority.DataTextField = "ID"; 从上到下的列表显示 1 到 45，然后是 1、2、3、4、5，后者是我的值，我尝试使用“SQL Where”限制值，但它不起作用
我的下拉列表代码是；

```
public void Populate_priority_dropdownlist()
{
    ad = new SqlDataAdapter("select * FROM x_priority_list_tbl", con);
    //ad = new SqlDataAdapter("select [Priority] FROM [x_priority_list_tbl] where [ID] < 7 ", con);
    ad.Fill(ds, "s");
    dt = ds.Tables["s"];
    ddl_priority.DataSource = dt;

    ddl_priority.DataValueField = "Priority";
    ddl_priority.DataTextField = "Priority";
    ddl_priority.DataBind();
} 
```

一定是某个地方的一些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:02:46.030

我猜你有一些表条目`null`作为 Priority （或 PriorityName ？）列值的值。可能你应该解决这个问题。您始终可以向您的选择查询添加 where 条件，以便它只显示具有有效 PriorityName 值的那些记录。

```
ad = new SqlDataAdapter("select * FROM x_priority_list_tbl
              WHERE PriorityName is not null and PriorityName<>''", con); 
```

还将 ID设置为`DataValueField`属性值并设置`PriorityName`为文本字段。

```
ddl_priority.DataValueField = "ID";
ddl_priority.DataTextField = "PriorityName"; 
```

假设您的表具有名称`ID`和列`PriorityName`。如果您的列名不同，您可以在代码中进行相应更改。

# objective-c - 为什么在单个 QTCaptureSession 中使用多个 QTCaptureVideoPreviewOutputs 时帧速率较低？

> ID：11215602
> 
> 赞同：3
> 
> 时间：2012-06-26T20:42:27.580
> 
> 标签：objective-c, cocoa, qtkit

我有一个应用程序，其中相同的捕获视频显示在多个 QTCaptureLayers 中。我的帧速率非常低。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:07:56.303

我的问题是我忽略了在不同的 QTCaptureVideoPreviewOutputs 之间同步像素缓冲区属性。必须针对像素缓冲区属性的每个不同设置处理输入，这导致帧速率降低。

# c - 在 C 中在 Linux 上查找子网掩码

> ID：11215605
> 
> 赞同：3
> 
> 时间：2012-06-26T20:42:33.830
> 
> 标签：c, linux, networking, subnet

我有兴趣在 Linux 中以编程方式查找本地主机的子网掩码，最好是通过本机 C api。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T20:52:11.727

[getifaddrs()](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)将为您提供网络接口列表，该字段`ifa_netmask`应为每个接口的掩码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T21:00:42.147

该`ifconfig`实用程序`ioctl()`与`SIOCGIFNETMASK`命令一起使用以获取网络掩码。但我认为 Duck 的回答更人性化。

# sql-server - 如何消除 SQL Server 查询的第一个结果？

> ID：11215607
> 
> 赞同：0
> 
> 时间：2012-06-26T20:42:35.773
> 
> 标签：sql-server

假设您有一个返回`n`结果的 SQL 查询，并且您只想返回`1 to n-1`没有第一行 (0) 的结果。

当前查询可在[https://data.stackexchange.com/stackoverflow/query/edit/73895获得](https://data.stackexchange.com/stackoverflow/query/edit/73895)

我想忽略第一行，因为它包含一个不完整的月份。

更新：我简化了任务，为了删除最后一条记录，使用基于当前日期的 WHERE 子句更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:49:38.667

你改变了问题。

```
;WITH x AS 
(
  SELECT col, 
    fr = ROW_NUMBER() OVER (ORDER BY ordering_col)
  FROM dbo.table
)
SELECT col FROM x
WHERE fr > 1; 
```

对于原始问题（不包括第一行*和*最后一行），这将产生两种情况：

```
;WITH x AS 
(
  SELECT col, 
    fr = ROW_NUMBER() OVER (ORDER BY ordering_col),
    lr = ROW_NUMBER() OVER (ORDER BY ordering_col DESC)
  FROM dbo.table
)
SELECT col FROM x
WHERE fr <> 1 AND lr <> 1; 
```

# sql - 查询不进行索引查找或扫描

> ID：11215610
> 
> 赞同：2
> 
> 时间：2012-06-26T20:42:42.477
> 
> 标签：sql, sql-server, sql-server-2008, indexing, rdbms

我对索引相当陌生。我有下表 [FORUM1]

```
 [msg_id] [int] IDENTITY(1,1) NOT NULL,
    [cat_id] [int] NULL,
    [msg_title] [nvarchar](255) NULL 
```

并创建了非聚集索引

```
CREATE NONCLUSTERED INDEX catindex ON forum1(cat_id) 
```

现在当我运行这个简单的查询时，我可以看到索引没有被使用

```
SELECT msg_title FROM forum1 where cat_id=4 
```

只有在我创建 CI 并包含 MSG_TITLE fld 时才会调用索引。但问题是我必须在实际表上运行更多类似的查询，例如 date=something、userid=20、status=1。所以在每个索引中包含列对我来说并不好。

![执行计划截图](../Images/baab0825c694b90fac0b52f6b3b46a63.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T20:44:45.367

`msg_title`不包含在索引中 -> 在非聚集索引中找到的任何值都需要对实际数据页进行键查找，这是一项**昂贵****的操作**- 因此，表扫描很可能会更快。另外：“表扫描”表明您有一个堆 - 一个没有聚集索引的表 - 这是一件坏事（大部分时间）一开始。为什么没有聚集索引？

您可以通过例如在您的索引中**包含**来解决此问题：`msg_title`

```
CREATE NONCLUSTERED INDEX catindex 
ON forum1(cat_id) INCLUDE(msg_title) 
```

现在，我很确定，SQL Server 将使用该索引（因为它可以在索引结构中找到查询所需的所有数据——该索引被称为**覆盖索引**）。这里的好处是：额外的列仅*包含*在索引的叶级别，因此它使索引仅最小地变大。然而，它可能导致索引被更频繁地使用。非常值得！

# javascript - mvc 和 ajax - 不命中模型属性

> ID：11215612
> 
> 赞同：0
> 
> 时间：2012-06-26T20:42:52.160
> 
> 标签：javascript, c#, jquery, ajax, asp.net-mvc

我正在尝试在我的 beginform 中自动发布输入，但它们的值没有到达模型或控制器。它们保持为空（断点从未命中。）可能导致这种情况的原因是什么？

```
 @model project.Models.data 
```

JAVASCRIPT

```
 function send()
        {
             $.ajax({
                        type: 'POST',
                        url: this.action,
                        data: {'data1': $('#data1').val(), 
                        'data2': $('#data2').val() },
                        success: function (done) {
                $('#box').html(done.output);
            });
        } 
```

形式

```
@using (Html.BeginForm())
{
<input id="data1" value="0" name="data1" onclick="send();" >
<input id="data2" value="0" name="data2" onclick="send();" >

} 
```

模型

```
namespace projects.Models
{
  public class data
    {
  public int data1{ get; set; }
  public int data2 { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:01:00.587

您似乎没有取消表单的默认事件。我建议您订阅表单的 .submit 事件并停止混合标记和 javascript：

```
@using (Html.BeginForm())
{
    <input id="data1" value="0" name="data1" />
    <input id="data2" value="0" name="data2" />
} 
```

然后在一个单独的 javascript 文件中，您可以订阅此表单的 .submit 事件：

```
$(function() {
    $('form').submit(function() {
        $.ajax({
            type: this.method,
            url: this.action,
            data: {
                data1: $('#data1').val(), 
                data2: $('#data2').val() 
            },
            success: function (done) {
                $('#box').html(done.output);
            }
        });

        // It is very important to return false in order to prevent the default action
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:47:46.647

对于初学者，我建议不要使用该`onclick`属性。使用 jQuery 的`click`or`on`会好很多。

其次，`Html.BeginForm()`它不能按照您使用它的方式工作。如果您想点击控制器方法，您需要有一个提交按钮，其中包含您尝试点击的控制器方法的值。

如果您尝试使用 jQuery 异步访问方法（即使用 AJAX），那么我建议您在此处查看此帖子：

[使用 jquery 将数据发送到 MVC 控制器](https://stackoverflow.com/questions/11016388/send-data-with-jquery-to-an-mvc-controller/11016619#11016619)

`Html.BeginForm()`如果您使用 AJAX，则无需 POST 到服务器。但是，如果您想发布并重定向到另一个操作，我会使用`Html.BeginForm()`.

现在，如果您尝试在不使用 AJAX 的情况下 POST 到服务器，那么您需要在`Html.BeginForm()`. 下面的这篇文章详细介绍了注册表的工作原理，并可能适用于您的情况。

[MVC3 控制器如何检索 HTTPPOST 参数？](https://stackoverflow.com/questions/11166800/how-does-the-mvc3-controller-retrieve-httppost-params/)

# cocoa - 监视文件更改的目录

> ID：11215620
> 
> 赞同：11
> 
> 时间：2012-06-26T20:43:18.113
> 
> 标签：cocoa, osx-lion, fsevents, kqueue

我想监视一个目录（包含数千个文件，大约有 5 级子目录）以了解文件何时更改。我知道我可以使用 FSEvents API 来监视该目录中文件何时更改的目录，但我似乎无法弄清楚如何确定哪些文件已更改。[该](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/UsingtheFSEventsFramework/UsingtheFSEventsFramework.html#//apple_ref/doc/uid/TP40005289-CH4-SW2)参考建议我构建一棵二叉树并在每次触发事件时遍历树，这是确定哪些文件已更改的**最佳方法吗？**如果没有，有什么*更好*的选择？

递归扫描目录并将kqueue附加到每个文件会更好吗？我不确定它对数千个文件的效果如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T00:32:02.347

我以前使用过[UKKQueue](http://zathras.de/angelweb/sourcecode.htm)，结果好坏参半。

我最近意识到一个更好的解决方案，但我还没有尝试过。如果您只需要定位 Lion，我认为新的最佳实践方法是使用[`NSFileCoordinator`](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSFileCoordinator_class/Reference/Reference.html). 您实现的方法`NSFilePresenter`来指示您对哪个目录感兴趣（`presentedItemURL`属性），系统会在子项目移动/更改/被删除时通知您（通过类似的方法`presentedSubitemDidChangeAtURL:`）

如果你真的走那条路，我很想听听结果如何。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T03:22:10.787

如果您使用**kFSEventStreamCreateFlagFileEvents**创建流，那么您将获得每个文件更改的事件，而不仅仅是监视目录更改的通知。不幸的是，这仅在 OSX 10.7 及更高版本中可用。

# java - 如何在 Spring MVC 项目中有效地使用 Scala？

> ID：11215621
> 
> 赞同：18
> 
> 时间：2012-06-26T20:43:20.273
> 
> 标签：java, spring, scala, maven

我想创建一个多模块（maven）spring MVC 应用程序，其模块如下：

```
web
persistance (hibernate)
core (general libs)
models
job-server (queue based jobs)
services (business logic) 
```

现在要在这个项目中使用 Scala，我可以到处写 scala 没有任何问题吗？或者我应该将 scala 用于我的服务模块，将 java 用于 Web 模块？

我知道hibernate必须在java中。

想法？建议？

有什么问题需要注意吗？这是一个好主意吗？我是否必须破解某些部分才能将它们粘合在一起？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T01:58:27.827

是的，您可以在 Spring MVC 代码和 Hibernate 类中使用 Scala。

下面是从我的一个项目中获取的 Scala 中的 Spring MVC 控制器示例：

```
@Controller
class HomeController {
  val log: Logger = LoggerFactory.getLogger(this.getClass.getName)

  @RequestMapping(Array("/"))
  def home: String = {
    log.debug("HomeController::home")

    "home/home"
  }
} 
```

还有一个 Hibernate 域类的例子。注意 Hibernate 的私有 Java 集合类的使用，该类由公共 Scala 集合类为该类的用户改编（由 Scala 的 JavaConversions 类提供帮助）。

```
@Entity
class Role {
  @Id @GeneratedValue
  var id: Long = _

  @Index(name="role_name")
  var name: String = _

  var created_at: Date = _
  var updated_at: Date = _  

  @ManyToMany
  private var sub_role: java.util.Set[Role] = _
  def subRoles: Set[Role] = {
    if (sub_role == null) sub_role = new java.util.HashSet[Role]
    sub_role
  }

  @ManyToMany
  private var permission: java.util.Set[Permission] = _
  def permissions: Set[Permission] = {
    if (permission == null) permission = new java.util.HashSet[Permission]
    permission
  }
} 
```

我发现我*必须*使用 Java 的唯一一件事是编写`@Retention(RUNTIME)`注释（用于 JSR-303 验证）。

我将 Maven 和 maven-scala-plugin 与混合的 Java/Scala 项目一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:56:15.640

您可以将 scala 和 java 一起用于您认为最适合的任何事情。

> 我知道hibernate必须在java中。

这不一定是真的。您可以将 Scala 类用作 Hibernate ORM 对象。您只需要确保编译后的 .class 文件以 Hibernate 期望的相同 getter、setter 和默认构造函数结束。

甚至您的 Web App 模块也可以用 scala 编写。控制器只需要遵守 Spring MVC 所期望的契约。

一般来说，几乎任何用 Java 编写的东西都可以用 scala 重写。当然，也有例外，但不要永远限制自己尝试。假设您现有的代码没有做任何疯狂的事情（即黑魔法反射），它应该没问题。

这里有趣的问题是如何让它与 Maven 一起工作......

有一个[现有的 SO question](https://stackoverflow.com/q/336144/346561)描述了使用[maven-scala-plugin](http://scala-tools.org/mvnsites/maven-scala-plugin/)来使这种项目工作（具有混合 scala 和 java 资源的多模块）。我要添加到这个解决方案的唯一额外评论是，根据我的经验，我们只能让它与依赖于 java 源的 scala 模块一起工作，而不是相反。这是因为我们的 maven 配置分别使用了 java 编译器和 scala 编译器。理论上，scala 编译器也可以编译 Java 文件，因此如果您将其配置为只使用一个编译器处理所有内容，您将不会遇到此限制。

**编辑：**

> 布兰克曼评论道：
> @Jesse 所以你也这样做了？不确定我是否理解 Maven 问题。

是的，我参与了几个使用混合 java 和 scala 源的项目。我们没有将 Scala 用于 Hibernate 层，但我们为其他一切使用了。

我描述的 maven 问题是我们的 maven-scala-plugin 配置的结果。您必须对其进行配置才能知道如何编译您的 scala 文件。*我们的*配置（可能不正确）设置为首先使用 javac 编译 java 文件，然后使用 scalac 编译 scala 文件。这意味着我们不允许编写引用 scala 类的 java 代码，因为它们在编译时不可用。通过正确的配置，应该可以使用 scalac 编译器将所有源代码一起编译，这将消除这个尴尬的限制。我在上面链接的 SO 问题有示例配置以及一些关于我正在谈论的编译时问题的讨论。如果您需要更多关于设置插件的参考，请查看插件的网站（也链接到上面）以获取官方文档。

# java - Java 客户端/服务器套接字损坏的管道

> ID：11215622
> 
> 赞同：1
> 
> 时间：2012-06-26T20:43:24.737
> 
> 标签：java, multithreading, sockets, serversocket

我正在通过 Sockets 创建一个更新客户端，并且在服务器端得到了一个 Broken Pipe。服务器接受客户端套接字并使用消息或大字节数组（~180MB）响应同一个套接字。在本地测试（客户端和服务器在同一台机器上）时不会发生该错误，并且似乎在发送字节数组时发生。我没有在客户端套接字上指定超时，并且在阅读完整响应之前不知道它为什么要关闭。这是我第一次使用套接字，任何帮助将不胜感激。

我的客户端套接字代码：

```
public static Response makeRequest(Request req) throws IOException {
        Response response = null;
        Socket echoSocket = null;
        ObjectOutputStream out = null;
        ObjectInputStream in = null;

            echoSocket = new Socket(serverHost, 10008);
            out = new ObjectOutputStream(echoSocket.getOutputStream());
            in = new ObjectInputStream(
                    echoSocket.getInputStream());

        BufferedReader stdIn = new BufferedReader(
                new InputStreamReader(System.in));

        out.writeObject(req);
        try {
            response = (Response)in.readObject();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }       

        out.close();
        in.close();
        stdIn.close();
        echoSocket.close();
        return response;
    } 
```

Response 只是一个 POJO 保存响应（string/byte[] 和其他数据）

我的服务器代码（复制了 Sun/Oracle 站点的示例并将我的代码添加到其中）

```
public class Server extends Thread {

    private Socket clientSocket;

    public Server(Socket clientSocket) {
        this.clientSocket = clientSocket;
        start();
    }

    public void run()
    {
        {
            System.out.println ("New Communication Thread Started");

            try { 

                ObjectOutputStream out = new ObjectOutputStream(clientSocket.getOutputStream());
                ObjectInputStream in = new ObjectInputStream(clientSocket.getInputStream());

                Request request = null;
                try {
                    request = (Request)in.readObject();
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                UpdateDAO dao = new UpdateDAO();
                ClientDAO cdao = new ClientDAO();
                Update update = null;
                Client client = null;
                Session s = HibernateUtil.currentSession();
                Transaction t = s.beginTransaction();

                if (request != null) {
                    client = cdao.getClient(request.getClientId());
                    LogItem log = new LogItem();
                    log.setClient(client);
                    log.setTimestamp(new Date());
                    log.setAction(request.getAction());

                    if (request.getResponse() != null) {
                        update = dao.getUpdate(request.getResponse().getUpdateId());
                    }

                    TaskContext ctx = new TaskContext(request, client, update, log);
                    System.out.println("Action: " + request.getAction().getDescription());
                    Task task = TaskFactory.getTask(request.getAction());
                    System.out.println(task.getClass().getName());
                    Response response = task.perform(ctx);

                    out.writeObject(response);

                    log.setClientTaskDescription(request.getMessage());
                    log.setUpdate(ctx.getUpdate());
                    dao.save(ctx.getLog());
                    if (ctx.getUpdate() != null) {
                        dao.update(ctx.getUpdate());
                    }

                } else {
                    out.writeObject(new Response("what"));

                }

                t.commit();

                out.close(); 
                in.close(); 
                clientSocket.close(); 
            } 
            catch (IOException e) 
            { 
                e.printStackTrace();
                System.exit(1); 
            } 
        }
    }

    public static void main(String[] args) throws IOException 
    { 
        ServerSocket serverSocket = null; 

        try { 
            serverSocket = new ServerSocket(10008); 

            System.out.println ("Connection Socket Created");
            try { 
                while (true)
                {
                    System.out.println ("Waiting for Connection");
                    new Server (serverSocket.accept()); 
                }
            } 
            catch (IOException e) 
            { 
                System.err.println("Accept failed."); 
                System.exit(1); 
            } 
        } 
        catch (IOException e) 
        { 
            System.err.println("Could not listen on port: 10008."); 
            System.exit(1); 
        } 
        finally
        {
            try {
                serverSocket.close(); 
            }
            catch (IOException e)
            { 
                System.err.println("Could not close port: 10008."); 
                System.exit(1); 
            } 
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:39:51.720

如果客户端实际上内存不足：

```
java -Xmx512m -jar <the jar> 
```

或者

```
java -Xmx512m com.foo.blah.YourClass 
```

会增加客户端/服务器的最大堆。请记住，您可能必须增加管道两侧的堆，因为双方将在运行时将所有 ~180mb 读入内存。

# ruby - + 是使用 super 调用父变量后未定义的方法

> ID：11215631
> 
> 赞同：0
> 
> 时间：2012-06-26T20:44:16.010
> 
> 标签：ruby

这是[创建一个继承自 Ruby 中的另一个类的类](https://stackoverflow.com/questions/11092884/creating-a-class-which-inherits-from-another-class-in-ruby)的后续操作，并且[m.one + m.two + m.three 不起作用](https://stackoverflow.com/questions/10944555/m-one-m-two-m-three-doesnt-work)。我们正在申请[App Academy](http://www.hashmaplabs.com/app_academy/code_test)，这是一门针对经验很少或没有经验的人的学习编程课程。结果，这些问题是相似的，但我觉得其他两篇文章中的答案并没有给出答案，而是分歧地解释了切线概念（我确实利用了）

为了跟进前两个提到的链接，我遇到了继承类的问题。我有 Musician 类，它从 Person 类继承了三个变量。我的问题是，当我运行

```
m.first_name + " " + m.last_name + ": " + m.age.to_s 
```

我收到一个错误：person.rb:31: undefined method `+' for nil:NilClass (NoMethodError)。我知道这个错误有答案，但我还不擅长理解这意味着什么。

有一点要提的是，上面的查询，一定是这样的。我不能把 Puts 放在它前面。

我将不胜感激任何关于为什么我得到这个关于 + 是一个未定义方法的声明的建议。

谢谢！

编辑：感谢您的快速回复。我没有意识到编码社区如此活跃！这真是太神奇了。我将编辑代码以反映最新的问题，所以我不会一直收到相同的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:49:19.120

您的访问器正在返回 的结果`puts`，而不是实例变量的值。

首先，您已经在使用，它会*为*`attr_reader`您生成这些方法。

 *其次，`first_name`例如，应该只返回`@first_name`：

```
def first_name
  @first_name
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:49:36.687

> 我收到一个错误：person.rb:31: undefined method `+' for nil:NilClass (NoMethodError)。我知道这个错误有答案，但我还不擅长理解这意味着什么。

这意味着三个变量之一是`nil`，即它缺少值：

```
m.first_name
m.last_name 
```

发生这种情况是因为您正在返回在所有访问器中调用该`puts`函数的结果。您需要返回变量本身，而不是打印它们并返回*print 函数*的结果。

此外，由于您已经在使用`attr_reader`您已经`get`为您创建的方法。这就是使用的全部意义`attr_reader`；它创建了一个为您返回底层实例变量的函数，您只需要初始化它。

例如，这个：

```
class Foo
  def bar
    @bar
  end
end 
```

相当于

```
class Foo
  attr_reader :bar
end 
```*

# python - 如何在 wxPython 中链接多个 wx.Dialogs

> ID：11215632
> 
> 赞同：1
> 
> 时间：2012-06-26T20:44:18.430
> 
> 标签：python, wxpython

我想用 wxPython 制作一个游戏（没有其他模块），我想制作它，以便您可以在游戏开始之前在弹出屏幕中输入一些值，然后游戏将被绘制在画布上，而画布又被绘制在一个面板，绑定到主游戏。

我用所有花哨的东西制作了游戏屏幕（单独工作）我制作了输入屏幕但我无法链接它们。

我如何开始游戏让它打开一个对话框，然后在关闭它时打开另一个对话框，然后打开游戏？

我尝试了以下方法，但它不会打开我的画布：

```
# makes a game by showing 2 dialogs
# after dialogs have been answered, starts the game by drawing the canvas.

# imports  
import wx
import Speelveld3

# globals
SCRWIDTH = 950
SCRHEIGHT = 700

# dialogbox class
class MyDialog1(wx.Dialog):
    def __init__(self, parent):
        wx.Dialog.__init__(self, parent)

        self.username = wx.TextCtrl(self)
        self.okButton = wx.Button(self, wx.ID_OK, "OK")

class MyDialog2(wx.Dialog):
    def __init__(self, parent):
        wx.Dialog.__init__(self, parent)

        self.canvasWidth = wx.TextCtrl(self)
        self.okButton = wx.Button(self, wx.ID_OK, "OK")

# main class
class Game(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, title='My game', size=(SCRWIDTH, SCRHEIGHT))
        self.username = ""
        self.canvasWidth = 10
        # hide the frame for now
        self.Hide()

    def OnInit(self):
        #Make your dialogs
        dlg1 = MyDialog1(self)
        #if the user pressed "OK" (i.e. NOT "Cancel" or any other button you might add)
        if dlg1.ShowModal() == wx.ID_OK:
            #get the username from the dialog
            self.username = dlg1.username.GetValue()
        #clean up the dialog (AFTER you get the username)
        dlg1.Destroy()

        dlg2 = MyDialog2(self)
        #if the user pressed "OK" (i.e. NOT "Cancel" or any other button you might add)
        if dlg2.ShowModal() == wx.ID_OK:
            #get the username from the dialog
            self.canvasWidth = dlg2.canvasWidth.GetValue()
        #clean up the dialog (AFTER you get the username)
        dlg2.Destroy()

        # Now that you have your settings, Make the gameboard
        # THIS PART IS STILL BROKEN!
        # I can paste the whole board class (structure of it is taken from the tetris tutorial)
        # but that seems a bit much tbh...
        self.gameBoard = Board.Board(self)
        self.gameBoard = SetFocus()
        self.gameBoard.start()

        self.Centre()
        self.Show(True) #show the frame

if __name__ == '__main__':
# how can I start the game here?
    app = wx.App()
    frame = Game()
    board = Speelveld3.Speelveld(frame)
    board.start()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:48:17.180

您已经[重复发布了](https://stackoverflow.com/questions/11235944/how-do-i-start-a-wxpython-program-with-a-dialogbox-then-pop-another-dialog-and)，并且`wx.Dialog`您的示例代码中没有任何内容向我表明您甚至还没有看过教程，但我会给您带来怀疑的好处。

首先，如果要从对话框返回信息，最简单的方法是定义[自定义对话框](http://wiki.wxpython.org/AnotherTutorial#Custom_dialogs)。定义一个继承自的新类，`wx.Dialog`然后像普通面板或框架一样对其进行设置。在我看来，您将需要其中两个。它们看起来像这样：

```
class MyDialog1(wx.Dialog):
    def __init__(self, parent):
        wx.Dialog.__init__(self, parent)

        self.username = wx.TextCtrl(self) #this is where users will enter their username

        self.okButton = wx.Button(self, wx.ID_OK, "OK") #Note that I'm using wx.ID_OK. This is important 
```

现在，对于您想要的逻辑。几乎你实际看到的 wxPython 中的每个对象都有函数`Show()`和`Hide()`（API [here](http://wxpython.org/docs/api/wx.Window-class.html#Show)）。在对话框完成之前，您不想显示您的框架，因此在您的`__init__()`, 调用`Hide()`中。我还在初始化一个变量 ，`username`我将在其中存储对话框中的数据。

```
class Game(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(SCRWIDTH, SCRHEIGHT))
        self.username = ""

        self.Hide() #don't show the frame just yet
        #self.Hide() is the exact same as self.Show(False) 
```

现在，对于您的对话框。就像 Mike Driscoll 建议的那样，在制作画布之前调用对话框。`wx.Dialogs`使用`ShowModal()`. 通过将 的 ID 设置为`self.okButton`常量`wx.ID_OK`，wxPython 识别出对话框应该在单击按钮后关闭。您还应该了解`wx.ID_CANCEL`.

```
def OnInit(self):
    #Make your dialogs
    dlg1 = MyDialog1(self)
    if dlg1.ShowModal() == wx.ID_OK:
        #if the user pressed "OK" (i.e. NOT "Cancel" or any other button you might add)
        self.username = dlg1.username.GetValue() #get the username from the dialog
    dlg1.Destroy() #clean up the dialog (AFTER you get the username)

    #do this again for your second dialog

    #Now that you have your settings, Make the gameboard
    self.gameBoard = Board.Board(self)
    self.gameBoard = SetFocus()
    self.gameBoard.start()

    self.Centre()
    self.Show(True) #show the frame 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:43:54.677

在您的 OnInit 中，您只需要在创建 Board 实例之前调用您的对话框并以模态方式显示它们。然后它应该可以正常工作。

**编辑（6-28-12）：**这是一些代码：

```
import wx

########################################################################
class MyDlg(wx.Dialog):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Dialog.__init__(self, None, title="I'm a dialog!")

        lbl = wx.StaticText(self, label="Hi from the panel's init!")
        btn = wx.Button(self, id=wx.ID_OK, label="Close me")

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(lbl, 0, wx.ALL, 5)
        sizer.Add(btn, 0, wx.ALL, 5)
        self.SetSizer(sizer)

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        # show a custom dialog
        dlg = MyDlg()
        dlg.ShowModal()
        dlg.Destroy()

        self.Bind(wx.EVT_PAINT, self.OnPaint)

    def OnPaint(self, evt):
        pdc = wx.PaintDC(self)
        try:
            dc = wx.GCDC(pdc)
        except:
            dc = pdc
        rect = wx.Rect(0,0, 100, 100)
        for RGB, pos in [((178,  34,  34), ( 50,  90)),
                         (( 35, 142,  35), (110, 150)),
                         ((  0,   0, 139), (170,  90))
                         ]:
            r, g, b = RGB
            penclr   = wx.Colour(r, g, b, wx.ALPHA_OPAQUE)
            brushclr = wx.Colour(r, g, b, 128)   # half transparent
            dc.SetPen(wx.Pen(penclr))
            dc.SetBrush(wx.Brush(brushclr))
            rect.SetPosition(pos)
            dc.DrawRoundedRectangleRect(rect, 8)

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Example frame")

        # show a MessageDialog
        style = wx.OK|wx.ICON_INFORMATION
        dlg = wx.MessageDialog(parent=None, 
                               message="Hello from the frame's init", 
                               caption="Information", style=style)
        dlg.ShowModal()
        dlg.Destroy()

        # create panel
        panel = MyPanel(self)

if __name__ == "__main__":
    app = wx.App(False)
    frame = MyFrame()
    frame.Show()
    app.MainLoop() 
```

# matlab - 在matlab中转换日期

> ID：11215633
> 
> 赞同：0
> 
> 时间：2012-06-26T20:44:24.430
> 
> 标签：matlab

我有一个 9660 x 51 的矩阵。第一列是日期。我曾经`datenum`转换日期，然后`datestr`显示日期。但我想创建一个 for 循环来显示整个矩阵中的日期和数据。

例如：

```
'12/31/11'  '18:00' '9722'  'Millbrook' '13.05' '1.763' '1.14'  '0.791' '1.589' 
'12/31/11'  '17:00' '9721'  'Millbrook' '13.03' '1.763' '1.138' '0.789' '1.58'  
'12/31/11'  '16:00' '9720'  'Millbrook' '12.98' '1.763' '1.138' '0.786' '1.565' 
'12/31/11'  '15:00' '9719'  'Millbrook' '13.14' '1.76'  '1.138' '0.786' '1.555' 
'12/31/11'  '14:00' '9718'  'Millbrook' '13.13' '1.76'  '1.138' '0.786' '1.558' 
'12/31/11'  '13:00' '9717'  'Millbrook' '13.19' '1.76'  '1.135' '0.784' '1.567' 
'12/31/11'  '12:00' '9716'  'Millbrook' '13.16' '1.76'  '1.133' '0.781' '1.594' 
'12/31/11'  '11:00' '9715'  'Millbrook' '13.15' '1.758' '1.133' '0.781' '1.626' 
'12/31/11'  '10:00' '9714'  'Millbrook' '13.1'  '1.758' '1.13'  '0.781' '1.663' 
'12/31/11'  '9:00'  '9713'  'Millbrook' '12.81' '1.758' '1.13'  '0.781' '1.689' 
'12/31/11'  '8:00'  '9712'  'Millbrook' '12.81' '1.758' '1.13'  '0.781' '1.697' 
'12/31/11'  '7:00'  '9711'  'Millbrook' '13.02' '1.758' '1.133' '0.786' '1.699' 
'12/31/11'  '6:00'  '9710'  'Millbrook' '13.02' '1.76'  '1.138' '0.793' '1.707' 
'12/31/11'  '5:00'  '9709'  'Millbrook' '13.02' '1.763' '1.143' '0.801' '1.719' 
'12/31/11'  '4:00'  '9708'  'Millbrook' '13.03' '1.765' '1.145' '0.801' '1.729' 
'12/31/11'  '3:00'  '9707'  'Millbrook' '13.03' '1.763' '1.143' '0.801' '1.741' 
'12/31/11'  '2:00'  '9706'  'Millbrook' '13.03' '1.763' '1.143' '0.801' '1.748' 
'12/31/11'  '1:00'  '9705'  'Millbrook' '13.04' '1.763' '1.143' '0.801' '1.753' 
'12/31/11'  '0:00'  '9704'  'Millbrook' '13.04' '1.763' '1.14'  '0.798' '1.763' 
```

为了简化它，我希望能够在白天查看整个矩阵。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:55:24.343

您实际上不必将日期转换为按天分组。只需获取唯一的日期并像这样迭代它们：

```
myData = {
'12/31/11' '18:00' '9722' 'Millbrook' '13.05' '1.763' '1.14' '0.791' '1.589' 
'12/31/11' '17:00' '9721' 'Millbrook' '13.03' '1.763' '1.138' '0.789' '1.58'
'12/31/11' '16:00' '9720' 'Millbrook' '12.98' '1.763' '1.138' '0.786' '1.565' 
'12/31/11' '15:00' '9719' 'Millbrook' '13.14' '1.76' '1.138' '0.786' '1.555' 
'12/31/11' '14:00' '9718' 'Millbrook' '13.13' '1.76' '1.138' '0.786' '1.558' 
'12/31/11' '13:00' '9717' 'Millbrook' '13.19' '1.76' '1.135' '0.784' '1.567'
'12/31/11' '12:00' '9716' 'Millbrook' '13.16' '1.76' '1.133' '0.781' '1.594' 
'12/31/11' '11:00' '9715' 'Millbrook' '13.15' '1.758' '1.133' '0.781' '1.626' 
'12/31/11' '10:00' '9714' 'Millbrook' '13.1' '1.758' '1.13' '0.781' '1.663' 
'12/31/11' '9:00' '9713' 'Millbrook' '12.81' '1.758' '1.13' '0.781' '1.689'
'12/31/11' '8:00' '9712' 'Millbrook' '12.81' '1.758' '1.13' '0.781' '1.697' 
'12/31/11' '7:00' '9711' 'Millbrook' '13.02' '1.758' '1.133' '0.786' '1.699' 
'12/31/11' '6:00' '9710' 'Millbrook' '13.02' '1.76' '1.138' '0.793' '1.707' 
'12/31/11' '5:00' '9709' 'Millbrook' '13.02' '1.763' '1.143' '0.801' '1.719' 
'12/31/11' '4:00' '9708' 'Millbrook' '13.03' '1.765' '1.145' '0.801' '1.729' 
'12/31/11' '3:00' '9707' 'Millbrook' '13.03' '1.763' '1.143' '0.801' '1.741' 
'12/31/11' '2:00' '9706' 'Millbrook' '13.03' '1.763' '1.143' '0.801' '1.748' 
'12/31/11' '1:00' '9705' 'Millbrook' '13.04' '1.763' '1.143' '0.801' '1.753' 
'12/31/11' '0:00' '9704' 'Millbrook' '13.04' '1.763' '1.14' '0.798' '1.763' };

uniqueDays = unique(myData(:,1));

for ind = 1:length(uniqueDays)

    myDay = uniqueDays{ind};
    logThisDay = strcmpi(myDay, myData(:,1));

    thisDayData = myData(logThisDay,:);

    disp(sprintf('********* DATA FOR %s *********', myDay));
    disp(thisDayData(:, 2:end))

end 
```

# ruby-on-rails - 是否可以在现有的用户模型中存储 OmniAuth 身份信息？

> ID：11215636
> 
> 赞同：1
> 
> 时间：2012-06-26T20:44:34.937
> 
> 标签：ruby-on-rails, devise, omniauth, cas

我目前正在将 OmniAuth 用于其 CAS 策略，这是我的应用程序中的默认身份验证方法。我想通过 OmniAuth Identity 策略提供一种使用用户名和密码进行身份验证的附加方法。我在它的文档中读到它打算与单独的模型一起使用，而不是与现有模型一起使用，但我想知道如果我尝试将它指向现有的当前模型，它是否会损坏。

我想这样做的原因是我的应用程序依赖于用户填写填充用户模型的注册表单。目前，CAS 策略只是对用户进行身份验证，如果他们已经存在于数据库中，则让他们登录，并将他们指向 users#new，在那里他们填写他们的信息。

如果我要实现 OmniAuth Identity，我会要求新用户首先用他们的用户名和密码填写一个表单来验证他们，然后将他们重定向到 User 模型表单。如果我是用户，这会惹恼我。我知道这只是一次性的事情，但如果可能的话，我想避免它。有没有以某种方式结合这两个步骤的好方法？

我知道 Devise 将密码信息存储在当前的用户模型中，但它的功能比我需要的要重，所以我更愿意坚持使用 OmniAuth。

抱歉，如果答案很明显，我对 Rails 还是很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:45:48.643

使用开箱即用的 OmniAuth Identity，您可以将所有注册信息收集到 Identity 模型中，然后使用 omniauth 将所有这些信息传递给您的`sessions#create`操作，然后您可以从中构建用户模型。

您可以使用 OmniAuth 身份将注册信息直接存储到 User 模型中，但是您没有获得使用授权系统的好处。

# c# - 如何从 QRCodeWriter 获取 Image.Source？

> ID：11215637
> 
> 赞同：1
> 
> 时间：2012-06-26T20:44:37.203
> 
> 标签：c#, zxing

我在使用旧库时有些挣扎，似乎无法从 QRCodeWriter 到 Image.Source 我可以放入我的 Image 中：D

我这样做：

```
QRCodeWriter writer = new QRCodeWriter();
var bMatrix = writer.encode("FOO FOO FOO", BarcodeFormat.QR_CODE, 300, 300); 
```

但从那以后我迷路了。bMatrix 有一个属性`Array`，但这是 zxings 的类型`ByteMatrix`，我仍然需要访问 Image.Source。

`WriteableBitmap`有 SetSource 和 SetValue 但我无法从`ByteMatrix`. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:41:05.510

试试这个（从pastebin中得到它：http: [//pastebin.com/612q0Qrb](http://pastebin.com/612q0Qrb)）

```
 QRCodeWriter writer = new QRCodeWriter();
    com.google.zxing.common.ByteMatrix matrix;

    int size = 180;
    matrix = writer.encode("MECARD:N:Owen,Sean;ADR:76 9th Avenue, 4th Floor, New York, NY 10011;TEL:+12125551212;EMAIL:srowen@example.com;; ", BarcodeFormat.QR_CODE, size, size, null);

    Bitmap img = new Bitmap(size, size);
    Color Color = Color.FromArgb(0, 0, 0);

    for (int y = 0; y < matrix.Height; ++y)
    {
        for (int x = 0; x < matrix.Width; ++x)
        {
            Color pixelColor = img.GetPixel(x, y);

            //Find the colour of the dot
            if (matrix.get_Renamed(x, y) == -1)
            {
                img.SetPixel(x, y, Color.White );
            }
            else
            {
                img.SetPixel(x, y, Color.Black);
            }
        }
    }

    img.Save(@"c:test.bmp",ImageFormat.Bmp); 
```

# ruby-on-rails - Ruby On Rails 嵌套控制器：创建模型问题

> ID：11215643
> 
> 赞同：0
> 
> 时间：2012-06-26T20:45:04.943
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, controller

我在用户下嵌套了控制器评论，都是由脚手架生成器生成的；视图/索引操作效果很好，但是当我尝试创建模型（/users/1/reviews/new）时出现错误

```
No route matches {:controller=>"reviews", :user_id=>#<Review id: nil, user_id: nil, reviewer_id: nil, predisposition: nil, description: nil, created_at: nil, updated_at: nil>} 
```

我尝试将 form_for @review 更改为 form_for user_reviews_path(@review)，但在*创建*操作时出现相同的错误。

我该如何解决这个问题？

另外，如果您向我推荐有关 Ruby On Rails 食谱的书，我将不胜感激（我已经阅读了 pragmatic 的 ROR 食谱，但它太简单了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:57:55.613

在您的控制器中：

```
@user = User.find params[:id]
@review = @user.reviews.build(<enter your initialization params here>) 
```

在您看来：

```
=form_for [@user, @review] do |f| 
```

我会从优秀的 ht​​tp [:](http://railscasts.com) //ruby.railstutorial.org/ 开始，当然还有[http://railscasts.com](http://ruby.railstutorial.org/)

# javascript - 使用滚动条淡入一堆图像（div）

> ID：11215645
> 
> 赞同：3
> 
> 时间：2012-06-26T20:45:08.900
> 
> 标签：javascript, jquery, scrollbar, opacity

我正在为博物馆制作 ipad 网络应用程序。想要展示名画的红外和z射线扫描结果。所以我想要固定的 div - 堆叠。original/infrared/x-ray/more+ 并使用滚动条将它们一一淡出（平滑）。我已经达到了这个 jsfiddle [http://jsfiddle.net/sheriffderek/JDLqV/1/](http://jsfiddle.net/sheriffderek/JDLqV/1/) 但我担心我会以错误的方式解决这个问题。---我应该采取其他方向的任何想法？我还没有弄清楚如何进入第三层...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:21:50.740

这将使您深入三个层次：http: [//jsfiddle.net/JDLqV/2/](http://jsfiddle.net/JDLqV/2/)

可能会被改进为更通用：

```
var divs = $('div.img:eq(2)');
$(window).on('scroll', function() {
    var st = $(this).scrollTop();
    var val = 1 - st/700; 
    if(val < 0){
        divs = $('div.img:eq(1)'); 
        val = 2 - st/700; 
    }else if(val > 0){
        divs = $('div.img:eq(2)'); 
    }
    divs.css({ 'opacity' : val  });
}); 
```

# c++ - Objective-C++ 调用 C 或 C++ 函数

> ID：11215648
> 
> 赞同：3
> 
> 时间：2012-06-26T20:45:17.340
> 
> 标签：c++, objective-c, ios, objective-c++

正如此处发布的大多数其他 Objective-C 问题一样，我也是 ObjC 的新手。

我正在基于我们现有的用 C# 和 C++ 编写的产品编写一个 iOS 应用程序。

我已经用 C++ 编写了一个完整的库，我希望直接在 iOS 设备中使用它，只需提供一些#ifdef 来在必要时阻止代码。例如，我有一个完整的 C++ 类，用于使用 Winsock 发出 HTTP 请求。因此，为了能够将这部分 API 转换为 Obj-C，我希望我可以编写一些简单的 Obj-C 类，用于通过 iOS 内置库发送和接收数据，使用 NSURL、NSStrings、等等

但是，我似乎无法将东西传递到我用 C++ 编写的 Obj-C(++) 方法中。我想在这里找到，当然，在我为一个失败的事业浪费太多时间之前，这是否可能。

我的理解是，按照 Obj-C 的构建/设计方式，实际上几乎所有的 C 代码都在幕后，因此合并这两种语言并不困难。

我在这里错了吗？例如，我可以这样做：

```
class NameValueCollection {
  NameValueCollection() { };
  NameValueCollection(std::string key, std::string value);
  ~NameValueCollection();
...
}; 
```

然后，比如说，在 Obj-C 中（实际上是 Obj-C++，我已经更改了文件编译成的语言......）

```
-(BOOL)initWithValues:(NameValueCollection*) nvc result:(NSString*)result; 
```

我这样做是不是有点不合时宜？如果是这样，那么是否有可能做这两个替补之一？

从 C++ 类/对象/方法中调用 ObjC++ 方法，或者，在 Obj-C++ 方法中调用 C++ 方法？

我不得不承认，我有点假设最后一个备用电源会起作用，而且我很确定第一个备用电源会起作用，但如果第一个选项是可能的，那将是最好的。任何人都可以对此提供很好的见解，即使我通过在 Obj-C++ 中尝试这个来采取正确的方法，或者这只能在 Obj-C 中实现，调用 C 函数而不是 C++ 方法，所以我可以使用我们的在 iOS 应用程序中预定义（和预调试）对象，只需在橡胶遇到众所周知的道路时替换 Obj-C++ 代码......

我是 C++ 库代码的原始作者，所以如果有必要，我实际上可以对其进行更改，甚至可以使用预处理器来发挥我的优势，但显然我必须在 C++ 方面更改的代码越少，*好多了*！:) 我没有将 C++ 代码构建到 Dynlib 或类似的东西中，我只是在源代码控制级别的项目之间共享文件。但是，我愿意接受任何能让整个事情按照我尝试的方式工作的想法。

提前谢谢各位...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:18:08.267

我知道绝对可以在 obj-c++ 中使用 c++ 类/方法。我一直在使用 BulletPhysics 库（C++）进行一些 iOS 开发，我可以毫无问题地使用它的功能。我认为您需要做的就是将库的源文件添加到您的项目中。使用 BulletPhysics，在外部将库编译为框架，然后导入框架对我来说无法正常工作。所以我所做的就是将库的源文件添加到项目中，然后只需#include 我需要的头文件，然后 xcode 负责编译库和我的源代码，然后它就可以工作了。

只需确保您使用 .mm 作为使用库头文件的扩展名。

# iphone - 不在模拟器中的设备上的类崩溃

> ID：11215653
> 
> 赞同：0
> 
> 时间：2012-06-26T20:45:58.270
> 
> 标签：iphone

我在适用于 iOS 6 的 Xcode 4.2 中的 iPhone 应用程序出现问题。我的应用程序正在运行，并且底部栏中有一个下载按钮。我在模拟器中按下它，它工作正常并且完成了他的工作。当我在具有相同版本的应用程序的设备上按下相同的按钮时，它会崩溃。我在控制台中看不到任何警告。但是我有这个崩溃报告，我的代码在它下面。我真的不知道为什么这在设备上不起作用。

```
 OS Version:      iOS 6.0 (10A5338d)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x52574c53
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x387ec5b0 0x387e9000 + 13744
1   Foundation                      0x34cce0ba 0x34cc8000 + 24762
2   CoreFoundation                  0x3034e5f8 0x302ae000 + 656888
3   CoreFoundation                  0x302c2030 0x302ae000 + 81968
4   Foundation                      0x34ccdfde 0x34cc8000 + 24542
5   MusicTube                       0x0000d54a 0x1000 + 50506
6   MusicTube                       0x0000d67e 0x1000 + 50814
7   MusicTube                       0x0000bb86 0x1000 + 43910
8   UIKit                           0x313ab4d2 0x31394000 + 95442
9   UIKit                           0x31464f22 0x31394000 + 855842
10  UIKit                           0x313ab4d2 0x31394000 + 95442
11  UIKit                           0x313ab484 0x31394000 + 95364
12  UIKit                           0x313ab45e 0x31394000 + 95326
13  UIKit                           0x313ab1b4 0x31394000 + 94644
14  UIKit                           0x313abb32 0x31394000 + 97074
15  UIKit                           0x313a9f5a 0x31394000 + 89946
16  UIKit                           0x31398126 0x31394000 + 16678
17  UIKit                           0x31397a0a 0x31394000 + 14858
18  GraphicsServices                0x375335ec 0x3752d000 + 26092
19  GraphicsServices                0x3753321c 0x3752d000 + 25116
20  CoreFoundation                  0x3034167c 0x302ae000 + 603772
21  CoreFoundation                  0x30341620 0x302ae000 + 603680
22  CoreFoundation                  0x3034041a 0x302ae000 + 599066
23  CoreFoundation                  0x302bd7fe 0x302ae000 + 63486
24  CoreFoundation                  0x302bd68a 0x302ae000 + 63114
25  GraphicsServices                0x37532334 0x3752d000 + 21300
26  UIKit                           0x313be1f6 0x31394000 + 172534
27  MusicTube                       0x00013312 0x1000 + 74514
28  MusicTube                       0x00003250 0x1000 + 8784

Thread 1:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x319765e0 0x31964000 + 75232
1   libdispatch.dylib               0x348fb1fa 0x348f5000 + 25082
2   libdispatch.dylib               0x348faed8 0x348f5000 + 24280

Thread 3:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 4:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 5 name:  WebThread
Thread 5:
0   libsystem_kernel.dylib          0x319750b0 0x31964000 + 69808
1   libsystem_c.dylib               0x366700aa 0x3665b000 + 86186
2   WebCore                         0x35ac6336 0x35ac1000 + 21302
3   WebCore                         0x35ac6698 0x35ac1000 + 22168
4   CoreFoundation                  0x30341bd6 0x302ae000 + 605142
5   CoreFoundation                  0x3033fe42 0x302ae000 + 597570
6   CoreFoundation                  0x3034026e 0x302ae000 + 598638
7   CoreFoundation                  0x302bd7fe 0x302ae000 + 63486
8   CoreFoundation                  0x302bd68a 0x302ae000 + 63114
9   WebCore                         0x35b32d06 0x35ac1000 + 466182
10  libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
11  libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 6 name:  com.apple.NSURLConnectionLoader
Thread 6:
0   libsystem_kernel.dylib          0x31964f64 0x31964000 + 3940
1   libsystem_kernel.dylib          0x31965142 0x31964000 + 4418
2   CoreFoundation                  0x3034154e 0x302ae000 + 603470
3   CoreFoundation                  0x30340224 0x302ae000 + 598564
4   CoreFoundation                  0x302bd7fe 0x302ae000 + 63486
5   CoreFoundation                  0x302bd68a 0x302ae000 + 63114
6   Foundation                      0x34cd951e 0x34cc8000 + 70942
7   Foundation                      0x34d727ee 0x34cc8000 + 698350
8   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
9   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 7:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 8 name:  JavaScriptCore::BlockFree
Thread 8:
0   libsystem_kernel.dylib          0x31975040 0x31964000 + 69696
1   libsystem_c.dylib               0x3666f608 0x3665b000 + 83464
2   libsystem_c.dylib               0x366d1012 0x3665b000 + 483346
3   JavaScriptCore                  0x390662f6 0x3900b000 + 373494
4   JavaScriptCore                  0x391798e8 0x3900b000 + 1501416
5   JavaScriptCore                  0x3918bf9c 0x3900b000 + 1576860
6   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
7   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 9 name:  JavaScriptCore::Marking
Thread 9:
0   libsystem_kernel.dylib          0x31975040 0x31964000 + 69696
1   libsystem_c.dylib               0x3666f608 0x3665b000 + 83464
2   libsystem_c.dylib               0x366d0fe2 0x3665b000 + 483298
3   JavaScriptCore                  0x3910d302 0x3900b000 + 1057538
4   JavaScriptCore                  0x3910d242 0x3900b000 + 1057346
5   JavaScriptCore                  0x3918bf9c 0x3900b000 + 1576860
6   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
7   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 10 name:  WebCore: CFNetwork Loader
Thread 10:
0   libsystem_kernel.dylib          0x31964f64 0x31964000 + 3940
1   libsystem_kernel.dylib          0x31965142 0x31964000 + 4418
2   CoreFoundation                  0x3034154e 0x302ae000 + 603470
3   CoreFoundation                  0x30340224 0x302ae000 + 598564
4   CoreFoundation                  0x302bd7fe 0x302ae000 + 63486
5   CoreFoundation                  0x302bd68a 0x302ae000 + 63114
6   WebCore                         0x35b52088 0x35ac1000 + 594056
7   JavaScriptCore                  0x3918bf9c 0x3900b000 + 1576860
8   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
9   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 11 name:  WebCore: LocalStorage
Thread 11:
0   libsystem_kernel.dylib          0x31975040 0x31964000 + 69696
1   libsystem_c.dylib               0x3666f608 0x3665b000 + 83464
2   libsystem_c.dylib               0x366d0fe2 0x3665b000 + 483298
3   JavaScriptCore                  0x390662c8 0x3900b000 + 373448
4   WebCore                         0x3620e4ce 0x35ac1000 + 7656654
5   WebCore                         0x3620e2d2 0x35ac1000 + 7656146
6   JavaScriptCore                  0x3918bf9c 0x3900b000 + 1576860
7   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
8   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 12 name:  com.apple.CFSocket.private
Thread 12:
0   libsystem_kernel.dylib          0x31975548 0x31964000 + 70984
1   CoreFoundation                  0x303456e0 0x302ae000 + 620256
2   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
3   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 13:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 14 name:  com.apple.coremedia.player.async
Thread 14:
0   libsystem_kernel.dylib          0x31975040 0x31964000 + 69696
1   libsystem_c.dylib               0x3666f608 0x3665b000 + 83464
2   libsystem_c.dylib               0x366d0fe2 0x3665b000 + 483298
3   CoreMedia                       0x3074cf3a 0x30749000 + 16186
4   MediaToolbox                    0x34f9692c 0x34f92000 + 18732
5   CoreMedia                       0x30770d28 0x30749000 + 163112
6   libsystem_c.dylib               0x3666bc36 0x3665b000 + 68662
7   libsystem_c.dylib               0x3665b9b0 0x3665b000 + 2480

Thread 15:
0   libsystem_kernel.dylib          0x31975d24 0x31964000 + 72996
1   libsystem_c.dylib               0x3666dd00 0x3665b000 + 77056
2   libsystem_c.dylib               0x3666db46 0x3665b000 + 76614
3   libsystem_c.dylib               0x3665b9a4 0x3665b000 + 2468

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x3ace9b54    r1: 0x35306320      r2: 0x303d8bd0      r3: 0xffffffff
    r4: 0x52574c4b    r5: 0x00000000      r6: 0x303d8bd0      r7: 0x2fdfd5c8
    r8: 0x2fdfdbdc    r9: 0x0d4c18c8     r10: 0x2fdfd6c4     r11: 0x004468b0
    ip: 0x3a4af6f8    sp: 0x2fdfd5b4      lr: 0x34cce0c1      pc: 0x387ec5b0
  cpsr: 0x20070030

Binary Images:
    0x1000 -    0x93fff +MusicTube armv7  <ca75c5c085683a9ea3236afc5eaf836e> /var/mobile/Applications/4282E492-9720-4333-ADCC-681C0B2FE6CF/MusicTube.app/MusicTube
0x2fed0000 - 0x2fef0fff  dyld armv7  <d7b9e4bc402f3645b9273bb202cdce5b> /usr/lib/dyld
0x302ae000 - 0x303defff  CoreFoundation armv7  <4ad30769f9aa301a9157428dec03a3dd> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x303df000 - 0x303f2fff  libc++abi.dylib armv7  <784fa6dc68b13e44b9b970954081ac8e> /usr/lib/libc++abi.dylib
0x30402000 - 0x30407fff  libGPUSupportMercury.dylib armv7  <3244792c47e034c292cf30f92fae6415> /System/Library/PrivateFrameworks/GPUSupport.framework/libGPUSupportMercury.dylib
0x30444000 - 0x30445fff  libremovefile.dylib armv7  <38160b3c19643564a6b0e59da62e0b4f> /usr/lib/system/libremovefile.dylib
0x30446000 - 0x30462fff  libsystem_info.dylib armv7  <18abea0052573ae09f79c794c427c4b1> /usr/lib/system/libsystem_info.dylib
0x304d1000 - 0x304d6fff  Marco armv7  <db14228e2c0b3950ba3fcf3cea3f0db9> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x304f4000 - 0x30504fff  Accounts armv7  <8e485280e65a379589e3ab6efdb64662> /System/Library/Frameworks/Accounts.framework/Accounts
0x30737000 - 0x30748fff  SpringBoardServices armv7  <85374d8eea603f5e8ec2f2f781195b14> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x30749000 - 0x307f3fff  CoreMedia armv7  <04ca5e9301bf30b587c3914fdd3297cd> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x308bf000 - 0x308d2fff  DataDetectorsUI armv7  <947d3af81d0c3196a4aa6b0b2bee0286> /System/Library/PrivateFrameworks/DataDetectorsUI.framework/DataDetectorsUI
0x308d3000 - 0x30b88fff  libLAPACK.dylib armv7  <cd0afaa5d938333eb2503c2aa7d7e3a4> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x30b89000 - 0x30c36fff  libxml2.2.dylib armv7  <7b824bb27f413d2ab1b3af9dbc5022fd> /usr/lib/libxml2.2.dylib
0x30d90000 - 0x30e44fff  CoreImage armv7  <1ab1bb1d30453d9c9bed231d23d30212> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x30f6c000 - 0x30fa6fff  libCGFreetype.A.dylib armv7  <9ae41e8cec1d3c4e8a09c43f83212369> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x30fa7000 - 0x30fbffff  EAP8021X armv7  <f39f04d92a973e1cb4688554b5b42262> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x30fc0000 - 0x30fc7fff  MobileIcons armv7  <96ada0b2450f371c890c751a4688a9e5> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x31028000 - 0x311fefff  ImageIO armv7  <1ea0cf77b7003199b14d57557cc8952f> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x31368000 - 0x31388fff  libxslt.1.dylib armv7  <334026b61da23d92aefe0df7d3155935> /usr/lib/libxslt.1.dylib
0x31394000 - 0x318c5fff  UIKit armv7  <dd048816d3af3d64b86a549312304690> /System/Library/Frameworks/UIKit.framework/UIKit
0x318c6000 - 0x318cbfff  libcopyfile.dylib armv7  <c030a190a5ce33d187a875910f86f352> /usr/lib/system/libcopyfile.dylib
0x31962000 - 0x31963fff  libsystem_sandbox.dylib armv7  <463060b8044a3f66932432d98afa0497> /usr/lib/system/libsystem_sandbox.dylib
0x31964000 - 0x3197afff  libsystem_kernel.dylib armv7  <eff667260cfc374691ad67ab35205e8a> /usr/lib/system/libsystem_kernel.dylib
0x31a46000 - 0x31a49fff  MobileSystemServices armv7  <0fd5382615e9366d97942c16ebf47b3b> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x31ab0000 - 0x31b21fff  GameKitServices armv7  <930fdaa9d16a3e6db8101246472c3a6d> /System/Library/PrivateFrameworks/GameKitServices.framework/GameKitServices
0x31b4c000 - 0x31cf2fff  CoreData armv7  <5f6308d43f103850a05cf28b96f66e0b> /System/Library/Frameworks/CoreData.framework/CoreData
0x31d4a000 - 0x31d4cfff  TCC armv7  <f268be00645f3170b0a5a06d2a77156b> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x31d4d000 - 0x31d4ffff  MessageSupport armv7  <9188a2a529e035cc88c200aea45f151b> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x3201d000 - 0x3207efff  AddressBook armv7  <acaf0922af2b39718de5de6ee535ff18> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x320e5000 - 0x320eefff  AssetsLibraryServices armv7  <540f37f13ee739aca989c84469e8cc87> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x320ef000 - 0x320f1fff  libCoreVMClient.dylib armv7  <4375a2def6b331c7a152faeef9658318> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3210d000 - 0x3210dfff  libSystem.B.dylib armv7  <08ba5c97c9413e16b336c7e5ccfc7edf> /usr/lib/libSystem.B.dylib
0x3210e000 - 0x3210efff  LegacyHandle armv7  <985a58f3a0923546a825a6c899955aa6> /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/LegacyHandle.framework/LegacyHandle
0x32144000 - 0x3214cfff  XPCObjects armv7  <719dac9cf6073f4a9a0e3bb662eb4601> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x3214f000 - 0x32169fff  ICE armv7  <b22eb8a170e334d0bb946dcdb383e279> /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/ICE.framework/ICE
0x32185000 - 0x32187fff  libcompiler_rt.dylib armv7  <b0138f0a044636029479a12709942ee9> /usr/lib/system/libcompiler_rt.dylib
0x32260000 - 0x32276fff  libCRFSuite.dylib armv7  <d25b0355b59131cbbd248a2e9f1e63b1> /usr/lib/libCRFSuite.dylib
0x3229b000 - 0x322b0fff  libxpc.dylib armv7  <97ea074dabc03708a2129c7f95415be8> /usr/lib/system/libxpc.dylib
0x322b1000 - 0x322b6fff  liblaunch.dylib armv7  <0830a7f70cfe315981e1f7f18da92250> /usr/lib/system/liblaunch.dylib
0x322b7000 - 0x322b7fff  libgcc_s.1.dylib armv7  <d9dd15a5f9bd34b390c2b5c2fe0cef75> /usr/lib/libgcc_s.1.dylib
0x322b8000 - 0x32313fff  CoreAudio armv7  <cd166a98944232439821716615c46084> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x32314000 - 0x3231bfff  liblockdown.dylib armv7  <e436520914613108901f3e97f795888f> /usr/lib/liblockdown.dylib
0x32321000 - 0x3232cfff  AccountSettings armv7  <d01d04bb6e463edca358926279e045df> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x3232d000 - 0x32333fff  CaptiveNetwork armv7  <6a0e7df489c93e658ff721f4d0936830> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x323ae000 - 0x323e9fff  AppSupport armv7  <70ca3d7feed837749369e731f48cd76f> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x323ea000 - 0x3246ffff  libsqlite3.dylib armv7  <4cc671204eba384fbc95078f591653b3> /usr/lib/libsqlite3.dylib
0x3247f000 - 0x32486fff  libsystem_notify.dylib armv7  <340bd67f3cde3180a7381477e23d00f6> /usr/lib/system/libsystem_notify.dylib
0x32589000 - 0x3258afff  DataMigration armv7  <05f2355f556a3a15b0a585570ed7dd10> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x3258b000 - 0x32667fff  WebKit armv7  <8313503ad8fc33d4939878ad9bb04933> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x32a8f000 - 0x32a9cfff  ExternalAccessory armv7  <57f9ab7f369731b893ce2446eed28825> /System/Library/Frameworks/ExternalAccessory.framework/ExternalAccessory
0x32a9d000 - 0x32aaafff  ViceroyTrace armv7  <3b746210ec423f41985dc8fa3332bb86> /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/ViceroyTrace.framework/ViceroyTrace
0x32aab000 - 0x32aaffff  IOSurface armv7  <c83b1d9390763180a40ff7b7b3d9ae96> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x32bcd000 - 0x32cd6fff  IMGSGX543GLDriver armv7  <4c8385245e5e33a28ff6fd141a2c1d81> /System/Library/Extensions/IMGSGX543GLDriver.bundle/IMGSGX543GLDriver
0x32cf0000 - 0x32db3fff  CFNetwork armv7  <6320d69fb5f3380495c17df1ad3d841a> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x32db4000 - 0x32e14fff  CoreText armv7  <3575b536a6913020ac6196bac69358d7> /System/Library/Frameworks/CoreText.framework/CoreText
0x32e1b000 - 0x32e32fff  BackBoardServices armv7  <2ad8b45f0c17313db055696c5e9ccc88> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x32e4d000 - 0x32ec8fff  HomeSharing armv7  <b58412ff72913758a1318e57ee06e764> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x32ed2000 - 0x32ed8fff  BluetoothManager armv7  <6dcf77969a583894b5d4d1e0a88fe646> /System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager
0x33092000 - 0x33094fff  OAuth armv7  <f000496cc0963e8a834f846f87ec8518> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x330ae000 - 0x330b4fff  MobileKeyBag armv7  <adf7ce0d8e5137408aa693be43476068> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x331ee000 - 0x33209fff  libRIP.A.dylib armv7  <81ad7b74aca23cf8b11fabaeefa4fe4b> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x33258000 - 0x332a2fff  VideoToolbox armv7  <5b9453f4d1573c7783806690d4477572> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x332a3000 - 0x332a5fff  MobileInstallation armv7  <42f6d5bb05b7357fa5f6aa642b9f5924> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x332a6000 - 0x333e5fff  vImage armv7  <4fec5d5386483ff9842f3bd846b64c5e> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x333e6000 - 0x33423fff  libGLImage.dylib armv7  <06c2c3c54f6c394db2fee2e6e6f0767b> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x33438000 - 0x33480fff  IOKit armv7  <85a617f1e07f3b90ade1b2242f65d631> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x33481000 - 0x33484fff  libmacho.dylib armv7  <33c2fb9e67f539fea34af006450316c4> /usr/lib/system/libmacho.dylib
0x33485000 - 0x335bcfff  CoreGraphics armv7  <fdbaa340412b395095c8f286d4684b7f> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x335bd000 - 0x336e2fff  libGLProgrammability.dylib armv7  <19eac922a76c38ffa3050a2bf049bc50> /System/Library/Frameworks/OpenGLES.framework/libGLProgrammability.dylib
0x336e3000 - 0x3372efff  libstdc++.6.dylib armv7  <bded282eb5b03084b5e4ce32cf12a543> /usr/lib/libstdc++.6.dylib
0x3372f000 - 0x33736fff  SimpleKeyExchange armv7  <8a72bd8fe3333920bda1c799cbc45545> /System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/SimpleKeyExchange.framework/SimpleKeyExchange
0x337a8000 - 0x337abfff  libcache.dylib armv7  <a3d5fcc87c6532b78cdad77e6b8e42a0> /usr/lib/system/libcache.dylib
0x33810000 - 0x33819fff  libcommonCrypto.dylib armv7  <56b2960008c4374b8061318537feecdc> /usr/lib/system/libcommonCrypto.dylib
0x33824000 - 0x33838fff  QuickTime Plugin armv7  <a37bd4c4a26135d2a86422ce3ea5a93f> /System/Library/Internet Plug-Ins/QuickTime Plugin.webplugin/QuickTime Plugin
0x338ef000 - 0x3392dfff  FTServices armv7  <256ef4f8868234daa096d9d5c5f60885> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x3393f000 - 0x339c3fff  CoreMotion armv7  <691d1e9c76793d90a9ba3c55cf9b4c7a> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x33b2d000 - 0x33c0bfff  GeoServices armv7  <eb59528424cf378db229ffab6f84eebd> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x33c1e000 - 0x33c75fff  CoreLocation armv7  <f751994a0003369094655d5a0cd034fd> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x33c76000 - 0x33c8dfff  DictionaryServices armv7  <441a6e90d20e390bbe97cda0210bff95> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x33ccd000 - 0x33e0efff  MusicLibrary armv7  <3d53487b66c531b7a14342d98377f928> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x33e0f000 - 0x33e10fff  CoreSurface armv7  <1b5a6405204a353f84c47229f67ed821> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x343aa000 - 0x343aafff  libkeymgr.dylib armv7  <47d229f23d7d3bfb85255b8b5bd060d9> /usr/lib/system/libkeymgr.dylib
0x3448f000 - 0x344e1fff  CoreTelephony armv7  <dc6226e84f47398fbad71eaf5f8a279c> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x344e2000 - 0x345cefff  VideoProcessing armv7  <6fb05fd13a8f335f98f31296e9ae204a> /System/Library/PrivateFrameworks/VideoProcessing.framework/VideoProcessing
0x345d3000 - 0x34601fff  Security armv7  <7003574db767355dbba2f94c068ad80e> /System/Library/Frameworks/Security.framework/Security
0x34602000 - 0x34602fff  libsystem_blocks.dylib armv7  <dbcfd2ac7c353d23b5e0739673e64dda> /usr/lib/system/libsystem_blocks.dylib
0x3461b000 - 0x34628fff  TelephonyUtilities armv7  <3f91a39c06df38b28a669734e352ba88> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x34676000 - 0x3468bfff  libmis.dylib armv7  <9dee2ef2cf6535859de820ac85c83c34> /usr/lib/libmis.dylib
0x3468c000 - 0x346a8fff  libsystem_m.dylib armv7  <0d0a1f0223d8344fb20a272398867db1> /usr/lib/system/libsystem_m.dylib
0x346a9000 - 0x346dbfff  MobileAsset armv7  <b65a6e27c7383104a37ea9551ae37859> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x346e0000 - 0x346e1fff  IOAccelerator armv7  <59eec0834b4736bc8c9e8ba06029b38b> 
```

我在 IBAction 中激活类的代码：

```
- (IBAction)download 
{
    DownloadInfo *dinfo=[self trySetUpDownload];
    if ([[dinfo FileTitle] length] >0 && [[dinfo FileUrl] length] >0)
    {
        [downloadButton setEnabled:NO];
        dinfo.delegate = self;
        [dinfo setUp:YES];
        [toolbar addSubview:dinfo.bar];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:04:55.773

我首先将 NSLog 语句添加到您的下载方法中，以检查 dinfo 是否为 nil。然后，我会确保 downloadButton 和 toolbar 也是有效的：

```
NSLog(@"downloadButton: %@", [downloadButton description]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:22:06.003

我不确定您如何在 trySetUpDownload 方法中保留对象。

如果它不是自动释放对象，您可以尝试

DownloadInfo *dinfo=[[self trySetUpDownload] retain]; 这可能会帮助你..

# c# - 正则表达式匹配字符串中的电子邮件

> ID：11215654
> 
> 赞同：3
> 
> 时间：2012-06-26T20:46:03.683
> 
> 标签：c#, regex

当我试图找出正则表达式时，我总是头疼。

我有以下字符串示例：

> 3;#i_0_.f_membership_john.smith@domain.com_LThumb.jpg
> 
> 2;#i_0_.f_membership_jane.doe@domain.com_LThumb.jpg

我需要`john.smith@domain.com`从字符串中取出那块。字符串的结尾将始终为`_LThumb.xxx`，前缀*应*始终为`xxx_membership_`.

如果有人能想出一些 C# 正则表达式来帮助我解决这个问题，我将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:49:06.537

`\w+?_membership_(\S*?)_LThumb.jpg`

```
\w            # Capture a word character
 +            # One or more times
 ?            # Lazily (smallest match possible)
_membership_  # Literal string
(             # Start capturing group
\S            # Any character that isn't whitespace
 *            # Zero or more times
 ?            # Lazily (smallest match possible)
)             # End capturing group
_LThumb.jpg   # Literal string 
```

这包括前面的“应该在那里”前缀，`membership`以确保我们只从字符串中提取我们需要的内容。

该电子邮件将在比赛的第 1 组中。

[您可以在 Regexr 使用正则表达式](http://regexr.com?31c9d)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:49:35.850

正则表达式在这种情况下应该没问题：使用`"_membership_"`和`"_LThumb.jpg"`作为你的锚，像这样

```
@"_membership_(.*?)_LThumb.jpg" 
```

并获得第一个捕获组，该组获得锚点之间的所有内容。

```
var email = Regex.Match(
    "2;#i_0_.f_membership_jane.doe@domain.com_LThumb.jpg"
,   @"_membership_(.*?)_LThumb.jpg"
).Groups[1].ToString(); 
```

这打印

```
jane.doe@domain.com 
```

# eclipse - 如何让我的插件自动安装第三方功能？

> ID：11215656
> 
> 赞同：0
> 
> 时间：2012-06-26T20:46:17.037
> 
> 标签：eclipse, eclipse-pdt

我正在开发一个依赖于 Acceleo 的 Eclipse 功能。当我使用其更新站点安装我的功能时，我收到一个错误，因为它找不到与 Acceleo 相关的插件。

我的功能清单声明了依赖的插件和功能。

如果用户在安装我的功能之前添加 Acceleo 更新站点或在安装我的功能之前安装 Acceleo，我的功能安装良好，但我希望这能自动发生。

这甚至可能吗？

希望这是有道理的，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:58:59.353

您`site.xml`可以参考另一个文件，其中列出了用于查找所需依赖项的其他更新站点。有关一些提示，请参阅[http://www.eclipse.org/forums/index.php/m/597390/](http://www.eclipse.org/forums/index.php/m/597390/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:25:42.673

P2 支持在其元数据中引用其他存储库。它看起来像下面，

```
<references size='2'>
<repository uri='http://www.example.com/eclipse/updates' url='http://www.example.com/eclipse/updates' type='0' options='0'/>
<repository uri='http://www.example.com/eclipse/updates' url='http://www.example.com/eclipse/updates' type='1' options='0'/>
</references> 
```

您可以将 Acceleo 的更新站点引用添加到 feature.xml 文件中。这将由 p2 发布者转换为存储库引用。

# .net - 如何重用 GridViewColumn CellTemplate 并允许不同的绑定？

> ID：11215658
> 
> 赞同：3
> 
> 时间：2012-06-26T20:46:25.883
> 
> 标签：.net, wpf, xaml

我在包含许多 GridViewColumns 的 WPF 窗口中有一个 ListView。第一列用于复选框。其余列非常相似，包含一个带有文本块的数据模板。我希望能够为其中的每一个重用一个数据模板，但我不确定如何实现这一点，因为每一列的绑定都不同。

下面是一些示例 XAML。第一个 GridViewColumn 是复选框。其他两个包含 DataTemplate 的示例。如何在具有不同绑定的多个列中重用此 DataTemplate？

```
 <ListView 
        AlternationCount="2" 
        DataContext="{StaticResource TaskGroups}" 
        ItemContainerStyle="{StaticResource TaskItemStyle}"
        ItemsSource="{Binding}"
        SelectionMode="Single">
        <ListView.View>
            <GridView>
                <GridViewColumn 
                    Header="Completed"
                    CellTemplate="{StaticResource CompletedCellTemplate}"
                />
                <GridViewColumn Header="Name">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Rectangle Name="StrikeThrough" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                   Height="1" StrokeThickness="1" Stroke="Transparent"/>
                                <TextBlock Text="{Binding Path=Name}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=IsCompleted}" Value="True">
                                    <Setter TargetName="StrikeThrough" Property="Stroke" Value="Black"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Status">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <Grid>
                                <Rectangle Name="StrikeThrough" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                                   Height="1" StrokeThickness="1" Stroke="Transparent"/>
                                <TextBlock Text="{Binding Path=StatusDescription}"/>
                            </Grid>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=IsCompleted}" Value="True">
                                    <Setter TargetName="StrikeThrough" Property="Stroke" Value="Black"/>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:38:54.867

这些模板的唯一区别是显示的文本。因此，您可以创建用户控件以重用布局和删除线逻辑。

此外，还有`TextBlock.TextDecoration`. 最好使用它而不是自定义技巧。

这是提到的控件的示例：

MyUserControl.xaml：

```
<UserControl x:Class="WpfApplication1.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:WpfApplication1="clr-namespace:WpfApplication1" mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <TextDecoration x:Key="MyStrikeThrough" Location="Strikethrough"/>
        <WpfApplication1:BoolToTextDecorationConverter x:Key="BoolToTextDecorationConverter" Decoration="{StaticResource MyStrikeThrough}" />
    </UserControl.Resources>
    <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=UserControl},Path=Text}" TextDecorations="{Binding IsCompleted, Converter={StaticResource BoolToTextDecorationConverter}}" />
</UserControl> 
```

MyUserControl.xaml.cs：

```
using System.Windows.Controls;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MyUserControl.xaml
    /// </summary>
    public partial class MyUserControl : UserControl
    {
        public string Text { get; set; }

        public MyUserControl()
        {
            InitializeComponent();
        }
    }
} 
```

和转换器：

```
using System;
using System.Globalization;
using System.Windows;
using System.Windows.Data;

namespace WpfApplication1
{
    public class BoolToTextDecorationConverter : IValueConverter
    {
        public TextDecoration Decoration { get; set; }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value is bool && (bool)value)
            {
                return new TextDecorationCollection {Decoration};
            }

            return null;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# google-chrome-extension - 通过在 Chrome 扩展中使用添加侦听器更改/添加更多内容到 http 请求

> ID：11215662
> 
> 赞同：1
> 
> 时间：2012-06-26T20:46:54.923
> 
> 标签：google-chrome-extension

我一直在尝试在每个以某个特定 URL 开头的 URL 中添加一些东西，是否可以在 Chrome 中做到这一点？

我一直在尝试使用`chrome.webRequest.onCompleted`，但我在文档中看不到任何内容

[http://code.google.com/chrome/extensions/webRequest.html](http://code.google.com/chrome/extensions/webRequest.html)

您可以阅读或更改响应

```
chrome.webRequest.onCompleted.addListener(function(info) { 
    if(info.url.indexOf('mypage.com/page') > -1){
       //Do Something here to alter the response before its used in Chrome requests
       //or displayed 
    }

},{urls:["<all_urls>"]}); 
```

我该怎么做才能更改此内容？在将其放入选项卡或 iframe 之前为其添加更多内容。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:23:18.707

[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)正是您想要的。内容脚本被注入到浏览器访问的每个页面中，并可用于更改页面的 HTML。

您可以使用清单中的`matches`属性（或`include_globs`用于更好控制的属性）来控制哪些页面将脚本注入其中。

您的清单应类似于：

```
{
    "name": "My extension",
     ...
    "content_scripts": [
        {
             "matches": ["*://*.mypage.com/page/*"],
             "js": ["jquery.js", "myscript.js"],
             "run_at": "document_idle"
        }
    ],
    ...
} 
```

该`run_at`属性指定何时注入脚本；有关完整详细信息，请参阅链接的 Chrome 文档。

# php - 跟踪成员的社交分享 -Addthis PHP Script

> ID：11215664
> 
> 赞同：1
> 
> 时间：2012-06-26T20:46:57.440
> 
> 标签：php, addthis

感谢您花时间阅读这篇文章。我有一个棘手的托管...

我总是使用 addthis 添加 facebook、twitter 分享。但现在我的要求是在会员网站上，我想知道该特定会员是否将页面分享到 facebook/twitter？如何跟踪？

我正在尝试构建一个自定义应用程序，例如获取成员和页面详细信息并在存储在数据库中后重定向到相应的站点，但是我们怎么知道重定向的页面是否已完成共享？还是突然关闭了？

```
custom_redirect.php?user_id=1&target=facebook&page=pagename 
```

您的建议真的很有帮助，再次感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:29:22.733

我不认为你可以在 PHP 中完全做到这一点。但是你可以监听一些 javascript 事件，它们实际上工作得很好；请参阅[AddThis 客户端 API](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#events)。

例如：

```
addthis.addEventListener('addthis.menu.share', function( event ){
    // something was succesfully shared
    // save pertinent data for further use
    var service = event.data.service,
        link = event.data.url;

    // some ajax would go here to notify PHP, then redirect
}); 
```

# cordova - Phonegap/Cordova，当相机处于活动状态时注册设备方向

> ID：11215666
> 
> 赞同：1
> 
> 时间：2012-06-26T20:47:08.793
> 
> 标签：cordova, rotation, accelerometer, image

在我的 Phonegap/Cordova 应用程序中，我正在将照片（由相机拍摄）上传到网络服务器。在网络服务器上，我正在做一些修改以创建更小的图片，而不是 8 兆像素的 iPhone 图片。

当我上传以纵向方式拍摄的照片时，我的服务器认为它是以横向方式拍摄的，因此图片旋转了 90°。当我上传风景图片时，一切都很好。

我的应用程序不支持横向模式。我怎么能处理这个？Phonegap/Cordova 中是否有一个选项可以自动检查照片是否以横向/纵向模式拍摄？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:39:41.637

好的，这很容易。只需在“navigator.camera.getPicture”的选项中添加“正确的方向：true”，现在一切正常:)（顺便说一下，phonegap“文档”中没有提到这一点......）

# ios - iOS 4+上调色板纹理转换为RGB565的优化（使用查找表）

> ID：11215667
> 
> 赞同：2
> 
> 时间：2012-06-26T20:47:12.350
> 
> 标签：ios, c, performance, optimization

我正在转换的游戏在 8 位调色板纹理上运行，几乎每一帧我都必须将该纹理的一部分更新为 OpenGL 纹理以进行渲染。它看起来像这样：

```
unsigned short RGB565PaletteLookupTable[256];   // Lookup table

unsigned char* Src;                             // Source data
unsigned short* Dst;                            // Destination buffer
int SrcPitch;                                   // Source data row length
int OriginX, OriginY, Width, Height;            // Subrectangle to copy

assert( Width % 4 == 0 );

int SrcOffset = SrcPitch-Width;
Src += OriginY*SrcPitch+OriginX;

int x, y;

for( y = OriginY; y < OriginY+Height; ++y, Src += SrcOffset )
{
    for( x = OriginX; x < OriginX+Width; x += 4 )
    {
        *Dst++ = RGB565PaletteLookupTable[*Src++];
        *Dst++ = RGB565PaletteLookupTable[*Src++];
        *Dst++ = RGB565PaletteLookupTable[*Src++];
        *Dst++ = RGB565PaletteLookupTable[*Src++];
    }
} 
```

这段代码在游戏过程中占用了 17% 的主线程时间，所以我正在寻找加速它的方法。数据直接转到 glTexSubImage2D()，所以我无法更改目标缓冲区中的任何内容。它来自游戏中的代码，该代码是古老的且没有记录的，并且没有人知道它是如何工作的，所以我也不能乱搞。查找表也是由这个古老的代码提供的，并且可以在游戏中更改。

是否可以使用 Accelerate 框架/汇编指令/任何其他方式加速此代码？我阅读了将 RGB888 直接转换为 RGB565 的示例，但这些不需要使用查找表。我应该在哪里学习如何以最佳方式加速它？

更新：我发现 OriginX 也是 4 对齐的，并且能够以这种方式改进代码：

```
unsigned long RGB565PaletteLookupTable[256];   // Lookup table

unsigned char* Src;                             // Source data
unsigned long* Dst;                            // Destination buffer
int SrcPitch;                                   // Source data row length
int OriginX, OriginY, Width, Height;            // Subrectangle to copy

assert( Width % 4 == 0 );

int SrcOffset = SrcPitch-Width;
Src += OriginY*SrcPitch+OriginX;
SrcOffset >>= 2;

int x, y;

unsigned long* LSrc = (unsigned long*)Src;

for( y = OriginY; y < OriginY+Height; ++y, LSrc += SrcOffset )
{
    for( x = OriginX; x < OriginX+Width; x += 4 )
    {
        unsigned long Indexes = *LSrc++;
        unsigned long Result = RGB565PaletteLookupTable[ Indexes & 0xFF ];
        Indexes >>= 8;
        Result |= ( RGB565PaletteLookupTable[ Indexes & 0xFF ] << 16 );
        *Dst++ = Result;
        Indexes >>= 8;
        Result = RGB565PaletteLookupTable[ Indexes & 0xFF ];
        Indexes >>= 8;
        Result |= ( RGB565PaletteLookupTable[ Indexes & 0xFF ] << 16 );
        *Dst++ = Result;
    }
} 
```

据我所知，这段代码没有使用任何未对齐的内存访问。它稍微提高了性能，也就是说，它现在占用了主线程时间的 15.5%。不过，我希望能加快速度。

理论上，每个查找表操作都独立于先前的和后续的（除了它们每个都从同一个查找表读取的事实），所以我期待会有一些 SIMD 指令，或者可能是汇编指令这将允许并行查找许多像素。就像是

```
_mm_movemask_ps( _mm_cmpneq_ps( _mm_loadu_ps( cmp1 ), _mm_loadu_ps( cmp2 ) ) ) ) 
```

在 Mac 上，它与 memcmp( cmp1, cmp2,​​ 16 ) 做同样的事情，只快 8 倍。

我现在继续寻找。

更新：我确定似乎没有办法使用 NEON 指令集加速表查找。该表需要 512 字节大，没有办法将其完全放入 ARM 寄存器中，VTBX NEON 指令一次最多可以处理 32 个字节，并且它还假设查找结果的大小必须等于索引。[作为http://forums.arm.com/index.php?/topic/15521-8bit-look-up-table-by-neon-code/](http://forums.arm.com/index.php?/topic/15521-8bit-look-up-table-by-neon-code/)中描述的类似问题的解决方案，有些东西可能会解决，但它赢了不适合我的。因此，确保所有操作数的对齐正确似乎是解决此问题的最佳答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:17:23.330

问题出在缓存上。您从 Src 进行大量读取，如果它未对齐四个（可能是这种情况，因为 OriginX 很可能是任意的），则 (*Src++) 会在未对齐读取上浪费循环。

尝试强制执行 (OriginX % 4 == 0) 并将剩余的 (OriginX % 4) 像素复制到主循环之外。

与 "*Dst++ = " 相同 - 是 Dst 未对齐，这是不好的。尝试将 RGB565 对（两个顺序 *Dst 写入）组合成一个 32 位副本。您甚至可以尝试覆盖更多像素以使循环更简单，然后处理边框像素。

希望你能明白。

第二种方式：将转换卸载到 GPU。

为 RGB565PaletteLookupTable 创建一维纹理并编写一个简单的片段着色器，该着色器采用 (Src + RGB565PaletteLookupTable) 并输出 Dst（然后 glTexImage2D 将更新 Src 纹理，而不是像现在这样更新 Dst）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:04:51.663

由于您只是从`RGB565PaletteLookupTable`to复制`Dst`，您可能会考虑使用`memcpy`，这可能会利用最快的方式在您的平台上实际复制缓冲区。这可以让您使用在每个周期复制更多字节的指令，而无需手动进行代码汇编。

# html - 只让某些内部 div 控制外部 div 的宽度

> ID：11215670
> 
> 赞同：2
> 
> 时间：2012-06-26T20:47:26.787
> 
> 标签：html, css

我有以下html结构：

```
<div id="container">
    <div id="block1">
        <img src="someimage/path" />
    </div>
    <div id="block2">
        Some Text
    </div>
    <div id="block3">
        Some Text
    </div>
</div> 
```

容器是`float:left`。容器将延伸到最宽的 div，但如果我只希望它跟随 block1，并根据 block1 中的图像大小让 block2 和 block3 的文本换行怎么办。对于我现在的标记，如果文本很长，它会将容器 div 推出到文本的尽头，但我希望文本只与图像一样宽，几乎就像图像标题一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:55:06.173

制作容器`display:inline-block;`，`overflow:auto;`使其自动拉伸以适应内容。也给第 2 块和第 3 块`overflow:auto;`，以便它们伸展以适应它们的内容。

不幸的是，您需要使用 JavaScript 将宽度设为图像的宽度。请参阅下面的示例，我使用 jQuery 修复它。

见：http: [//jsfiddle.net/TFLMX/2](http://jsfiddle.net/TFLMX/2)

# r - 混合模型的 Lme4 语法

> ID：11215671
> 
> 赞同：2
> 
> 时间：2012-06-26T18:20:36.113
> 
> 标签：r

我有 $m=4$ 组小鼠（即 group1、group2、group3、group4）。每组有不同数量的小鼠。我在 $l=4$ 不同的状态（即 state1、state2、state3、state4）对每组的每只老鼠测量参数 $(y)$。我想建立一个混合效应模型来分析组、状态和组*状态的影响，允许每只小鼠和每组内的可变性。$group_{m}$ 中的小鼠标有 id (1 ,2,3...,$group_{m}$) 的老鼠数量

$$y_{mln}=\mu +group_{m} +state_{l} +(group*state) *{ml}+b* {ml}+\varepsilon_{mln} $$ 与 $b_{ml}$ 随机$group_{m}$ 中第 n 个鼠标的效果

我的数据框有以下变量

```
value (num)
state (factor: 4 levels)
group (factor: 4 levels)
id (within group) (num) 
```

对应的语法是否正确？

```
lmer(value~group+state+group*state+(1|group)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:24:08.100

你要这个

```
mouseID <- interaction(group, ID)
lmer(value ~ group * state + (1|mouseID)) 
```

每个鼠标的 mouseID 必须是唯一的。

由于组是一个因素，因此您不能同时在固定部分和随机部分中使用它。这将导致无法识别的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:07:20.397

我想你要找的是

```
lmer(value ~ group*state + (1|group) + (1|id)) 
```

该模型估计组和状态的固定效应以及它们之间的相互作用（`R`自动扩展`group*state`为`group + state + group*state`），并估计每组和每只鼠标的效应的随机截距。

# c# - c# 中包含的 php 等价物？

> ID：11215672
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:47:41.637
> 
> 标签：c#, import, include

有什么方法可以在 c# 中导入类和其他文件，例如 PHP 中的“include”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:49:06.130

在 .NET 中，您可以创建可能在其他项目中[引用的程序集。](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)[`using`](http://msdn.microsoft.com/en-us/library/sf0df423)这些程序集包含在命名空间内声明的类，这些类通过指令进入范围：

```
using NamespaceName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:49:27.153

您应该在文件顶部声明：

```
using System.Collections; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:58:34.810

C#中没有`include`。您可以获得的最接近的是创建驻留在命名空间中的类，然后`using`为该命名空间生成一个。

例如，假设您在项目的单独文件中创建一个类并将其分配给命名空间：

```
namespace ProjectNamespace.SecondNamespace 
{
    public static class HelloWorld 
    {
        public static string Greet { get { return "Hello, World!"; } }
    }
} 
```

现在，在您的主项目中，您可以通过两种方式引用该命名空间。假设您的主要项目文件如下所示：

```
namespace ProjectNamespace
{
    public class WhatWeDo
    {
        public void WeGreetTheWorld()
        {
            // Here, we greet the world
        }
    }
} 
```

现在，要将我们的`HelloWorld`类放到上面的代码中，我们可以直接引用它，也可以在页面顶部添加一个 using。对于完全引用的方法，将上面的注释替换为：

```
public void WeGreetTheWorld()
{
    string greeting = ProjectNamespace.SecondNamespace.HelloWorld.Greet;
} 
```

或者，我们可以添加`using ProjectNamespace.SecondNamespace`到文件的顶部，然后直接引用该类。

```
using ProjectNamespace.SecondNamespace;

namespace ProjectNamespace
{
    public class WhatWeDo
    {
         public void We GreetTheWorld()
         {
             string greeting = HelloWorld.Greet;
         }
    }
} 
```

# ssh - 我可以在转发另一个密钥对的同时使用一个密钥对连接到 EC2 实例吗？

> ID：11215678
> 
> 赞同：1
> 
> 时间：2012-06-26T20:48:07.300
> 
> 标签：ssh, amazon-ec2, fabric, ssh-keys

我需要使用 Amazon 提供的密钥对连接到 EC2 实例，但我想转发与我的 Github 帐户关联的公钥，以便我可以从我的私有存储库中提取（使用 Fabric）。这可能吗？如果是这样，我是否需要在我想从中提取的每台远程机器上都有我的公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T02:40:35.257

是的。对 ssh 使用 -i 选项。以及代理和代理转发用你的github账号。

```
ssh -i my_aws_key_pair.pem -A myawshost 
```

我假设从你的问题，你知道如何做整个代理的事情。顺便说一句，您可以将您的 aws 密钥对添加到您的代理`ssh-add my_aws_key_pair.pem`，然后您只需要执行 ssh -A。不过，这将转发两个密钥。不确定你是否想避免这种情况。

# java - 在 Python 中重写 Java 代码的 Pythonic 方式

> ID：11215682
> 
> 赞同：1
> 
> 时间：2012-06-26T20:48:26.807
> 
> 标签：java, python, error-code

我必须在 python 中编写一个以前用 Java 编写的库。来自 Java 背景的 python 给我带来了一些困难。我坚持选择正确的pythonic做事方式..

所以，我的java代码是这样的：

```
import java.util.Collection;

public abstract class MyEnumBaseClass
{
    protected int    value;
    protected String description = null;

    protected MyEnumBaseClass(int iValue, String iDescription)
    {
        value = iValue;
        description = iDescription;
    }

    public int getValue()
    {
        return value;
    }

    public String getDescription()
    {
        return description;
    }

    protected static MyEnumBaseClass getEnum(Collection<MyEnumBaseClass> iter, int value)
    {
        for (MyEnumBaseClass enumObj : iter)
        {
            if (enumObj.getValue() == value)
            {
                return enumObj;
            }
        }
        return null;
    }
}

import java.util.ArrayList;
import java.util.Collection;

public class MyEnumClass extends MyEnumBaseClass
{
    private final static Collection<MyEnumBaseClass> enumList   = new ArrayList<MyEnumBaseClass>();

    public final static int                          ERROR1     = 1;
    public final static int                          ERROR2     = 2;
    public final static int                          ERROR3     = 3;
    public final static int                          ERROR4     = 4;

    public final static MyEnumClass                  ErrorEnum1 = new MyEnumClass(ERROR1, "ERROR1");
    public final static MyEnumClass                  ErrorEnum2 = new MyEnumClass(ERROR2, "ERROR1");
    public final static MyEnumClass                  ErrorEnum3 = new MyEnumClass(ERROR3, "ERROR1");
    public final static MyEnumClass                  ErrorEnum4 = new MyEnumClass(ERROR4, "ERROR1");

    protected MyEnumClass(int iValue, String iDescription)
    {
        super(iValue, iDescription);
    }

    public static int getCount()
    {
        return enumList.size();
    }

    public static Collection<MyEnumBaseClass> getList()
    {
        return enumList;
    }

    public static MyEnumBaseClass getEnum(int value)
    {
        return getEnum(enumList, value);
    }
} 
```

我想用python写一些东西。我理解两种语言完全不同。我不想复制确切的代码，但我想在 python 中编写一些东西，它可以提供 Java 代码提供的功能。

所以我想出了类似的东西：

```
# MODULE MYENUMBASECLASS:::

class MyEnumBaseClass(object):

    def __init__(self, iValue, iDescription, ui = None):
        self._value = iValue
        self._description = iDescription

    def getValue(self):
        return self._value

    def getDescription(self):
        return self._description

    @classmethod
    def getEnum(cls, value, itr):
        for enumObj in itr:
            if enumObj.getValue() == value:
                return enumObj
        return None

# MODULE: ENUMS:::
from MyEnumBaseClass import MyEnumBaseClass

__all__ = ["MyEnumClassConstants", "MyEnumClass", "MyEnums"]
_enumList = []

class MyEnumClassConstants(object):
    ERROR1 = 1
    ERROR2 = 2
    ERROR3 = 3
    ERROR4 = 4

class MyEnumClass(MyEnumBaseClass):
    def __init__(self, v, d, ui):
        global _enumList
        super(MyEnumClass, self).__init__(v, d, ui)
        _enumList.append(self)

    @staticmethod
    def getCount():
        return len(_enumList)

    @staticmethod
    def getList():
        return _enumList

    @classmethod
    def getEmum(cls, value, itr = None):
        return super(MyEnumClass, cls).getEnum(value, _enumList)

class MyEnums(object):
    ErrorEnum1 = MyEnumClass(MyEnumClassConstants.ERROR1, "ERROR1");
    ErrorEnum2 = MyEnumClass(MyEnumClassConstants.ERROR2, "ERROR2");
    ErrorEnum3 = MyEnumClass(MyEnumClassConstants.ERROR3, "ERROR3");
    ErrorEnum4 = MyEnumClass(MyEnumClassConstants.ERROR4, "ERROR4"); 
```

我想知道：

1.  这是正确的pythonic方式吗？

2.  我想将 ErrorEnum1,2,3,4 和常量移出 MyEnums 类作为模块变量。但是这样我就会在我的**所有**变量中有一个很长的列表。当我在其他模块中导入 Enums 模块时，我也有变量名冲突的风险（其他一些 Enums2 模块也可能有 ErrorEnum1,2,3.. 但这不是一个大问题。我们总是可以使用 Enums.ErrorEnum1 和 Enums2 .ErrorEnum1)。我想对了吗？

3.  我知道这并不完美（我的第一个 python 代码）。所以我邀请你们给我一些想法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T22:06:53.197

好吧，我想你知道你的代码不是最优的，当然**不是**要走的路。另一个问题是我们不能说你怎么能“用python写一些东西给我Java代码提供的功能”，因为我们不知道你到底想做什么。也就是说，您的代码中有很多明显的 Java 偏见，可以毫无问题地删除：

*   首先，为什么要有 a`MyEnumBaseClass`和 a `MyEnumClass`？你只能拥有一个。它将减少类的数量和模块的数量。即使你想扩展你的枚举，你会发现，在简化你的代码之后，你`MyEnumClass`会很简单，你可以毫无问题地扩展它。

*   现在，请*不要使用 getter 和 setter*。你没有理由使用它们，因为你有属性。如果您的属性只会获取和设置值，请不要使用属性：

    ```
    class MyEnumClass(object):
        def __init__(self, value, description, ui = None):
            self.value = value
            self.description = description 
    ```

*   仅仅为了保存类似常量的值而创建一个类真的很丑陋，例如`MyEnumClassConstants`and `MyEnums`。只需在模块级别创建一些变量。让我们在下面的项目之后看看如何做到这一点。

*   另外，为什么是`getEnum()`类方法？这可能只是一个函数，您不必担心冲突，因为它位于模块内部：

    ```
    def getEnum(value, itr):
        for enumObj in itr:
            if enumObj.value == value:
                return enumObj
        return None 
    ```

*   如果您要设置一些带有序号的变量，您可能需要使用[拆包习语](http://pages.citebite.com/k2b5a6b2bfie)：

    ```
    (
        ERROR1,
        ERROR2,
        ERROR3,
        ERROR4
    ) = range(1, 5) 
    ```

*   这个成语也可以用来创建你的枚举列表：

    ```
    _enums = (
        ErrorEnum1,
        ErrorEnum2,
        ErrorEnum3,
        ErrorEnum4
    ) = (
        MyEnumClass(ERROR1, "ERROR1"),
        MyEnumClass(ERROR2, "ERROR2"),
        MyEnumClass(ERROR3, "ERROR3"),
        MyEnumClass(ERROR4, "ERROR4")
    ) 
    ```

*   老实说，我很乐意`_enums`作为模块的公共成员离开，但让我们轻松处理您的 Java-itis :P 正如我们对 所做的那样`getEnum()`，让我们​​对其他类方法进行处理：将它们声明为模块中的函数：

    ```
    def getCount():
        return len(_enums)

    def getList():
        return _enums 
    ```

*   我们甚至可以`getEnum()`通过更改默认参数来改进：

    ```
    def getEnum(value, itr=_enums):
        for enumObj in itr:
            if enumObj.value == value:
                return enumObj
        return None 
    ```

*   我也很乐意在`__all__`这里禁止声明。唯一不属于接口的部分是元组，根据[PEP-8](http://pages.citebite.com/k2r5i6l4baau)`_enums` ，它前面是元组，这意味着它不应该在外部使用。但让我们说它会留下来。你的模块有一个新的接口，有更多的常量和函数：`_`

    ```
    __all__ = ["MyEnumClass", "ERROR1", "ERROR2", "ERROR3", "ERROR4",
            "ErrorEnum1", "ErrorEnum2", "ErrorEnum3", "ErrorEnum4",
            "getCount", "getList", "getEnum"] 
    ```

    似乎`MyEnumClass`从界面中删除会更好，但是您可能想要使用它，所以我将离开它。请注意，该`__all__`值*也不会避免访问模块的其他组件*。它只是更改了文档

最终结果将是这样的：

```
__all__ = ["MyEnumClass", "ERROR1", "ERROR2", "ERROR3", "ERROR4",
        "ErrorEnum1", "ErrorEnum2", "ErrorEnum3", "ErrorEnum4",
        "getCount", "getList", "getEnum"]

class MyEnumClass(object):
    def __init__(self, value, description, ui = None):
        self.value = value
        self.description = description

(
    ERROR1,
    ERROR2,
    ERROR3,
    ERROR4
) = range(1, 5)

_enums = (
    ErrorEnum1,
    ErrorEnum2,
    ErrorEnum3,
    ErrorEnum4
) = (
    MyEnumClass(ERROR1, "ERROR1"),
    MyEnumClass(ERROR2, "ERROR2"),
    MyEnumClass(ERROR3, "ERROR3"),
    MyEnumClass(ERROR4, "ERROR4")
)

def getCount():
    return len(_enums)

def getList():
    return _enums

def getEnum(value, itr=_enums):
    for enumObj in itr:
        if enumObj.value == value:
            return enumObj
    return None 
```

**（已编辑）**这实际上并不简单。如果我要创建错误代码，我只会创建`ERROR1`等`ERROR2`变量 - 没有类，没有函数，只有变量中的值。实际上，即使创建错误代码的想法似乎也不合适：您应该更喜欢创建异常，因为正如 Python 之禅所说，[错误永远不应该默默地过去](http://www.python.org/dev/peps/pep-0020/)（或者，正如 Eric Raymond 的 Unix 哲学所说，[当你必须失败时，大声失败并尽快](http://www.catb.org/~esr/writings/taoup/html/ch01s06.html#id2878538)）。尽管如此，我敢打赌，我所做的更改可以让您对编写 Python 有更准确的了解。

你可能会觉得这样做事很痒，但相信我，这是最好的方法。有些人可能在某些方面不同意我的观点，但这个想法是提出的。我主要是一名 Java 开发人员，但跟随语言的音乐起舞很重要——不要试图将外国概念强加于其中。

最后，一些重要的参考资料：

*   [PEP-20](http://www.python.org/dev/peps/pep-0020/) - Python 的禅宗：在 Python 和 Python 中开发的核心价值有点诗意的列表。
*   [PEP-8](http://www.python.org/dev/peps/pep-0008/) - Python 的风格指南。*立即*阅读。
*   [Python 不是](http://dirtsimple.org/2004/12/python-is-not-java.html)Java——关于避免在 Python 中使用不恰当的 Java 习惯的最佳指南之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:29:51.023

一种更 Pythonic 的方法：

```
class EnumValue(object):
    def __init__(self, value, description):
        self.value = value
        self.description = description

class EnumType(object):
    @classmethod
    def lookup(cls, value):
        for error in cls.VALUES:
            if error.value == value:
                return value
        raise ValueError(value)    

class MyErrors(EnumType):
    ERROR1 = EnumValue(1, "Simple Errors")
    ERROR2 = EnumValue(2, "Bigger Errors")
    ERROR3 = EnumValue(3, "Really Big Errors")

    VALUES = [ERROR1, ERROR2, ERROR3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:56:15.497

*   一般来说，Python 类属性是公开的，除非有*充分的理由*不公开。

*   如果属性*必须*`@property`是私有的，那么使用装饰器比使用 getProperty 方法更符合 Pythonic 。

.

```
class MyEnumBaseClass(object):
    def __init__(self, value, description, ui=None):
        self.value = value
        self._description = description
        self.ui = [] if ui is None else ui

    @property
    def description(self):
        return self._description

    @classmethod
    def get_enum(cls, value, itr):
        for enumObj in itr:
            if enumObj.value == value:
                return enumObj
        return None 
```

# sql - 在列中查找所有但允许的字符

> ID：11215684
> 
> 赞同：4
> 
> 时间：2012-06-26T20:48:41.433
> 
> 标签：sql, sql-server, regex

我有一个我一直在尝试进行的查询，它应该提取所有不包含我们不想要的字符的行。

```
SELECT NID FROM NOTES WHERE NOTE LIKE '%[^0-9a-zA-Z#.;:/^\(\)\@\ \  \\\-]%' 
```

那应该返回任何不包含的行

```
0-9 a-z A-z . : ; ^ & @ \ / ( ) # 
```

但是任何时候我在下面添加其中一个都会失败

```
$ [ ] ? 
```

即使试图通过 \ 或 [[ 来逃避它们似乎也无法正常工作。我只能访问股票 SQL 安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:49:25.280

> 它应该拉出所有**不包含**我们不想要的字符的行。

要查找*包含* `x`您的行，可以使用`LIKE`：

```
SELECT * FROM yourtable WHERE col LIKE '%x%' 
```

要查找*不包含* `x`您的行，可以使用`NOT LIKE`：

```
SELECT * FROM yourtable WHERE col NOT LIKE '%x%' 
```

所以你的查询应该使用`NOT LIKE`，因为你想要*不包含*某些东西的行：

```
SELECT NID FROM NOTES WHERE NOTE NOT LIKE '%[0-9a-zA-Z#.;:/^\(\)\@\ \  \\\-]%' 
```

* * *

> 那应该返回任何不包含的行
> 
> ```
> 0-9 a-z A-z . : ; ^ & @ \ / ( ) # 
> ```

不，因为`^`在开头，它返回不包含*字符的行，除了那些*。您列出的那些字符*是*允许的字符。

# typo3 - TYPO3 - 页面的打印视图有奇怪的信息

> ID：11215685
> 
> 赞同：1
> 
> 时间：2012-06-26T20:48:43.343
> 
> 标签：typo3

当我尝试从在 TYPO3 中创建的站点打印页面时，我可以在每个链接的末尾读取字符串 "(index.php?id=2) 或链接所在页面的 ID。

我怎样才能关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:58:11.030

通过使用像[realurl](http://typo3.org/extensions/repository/view/realurl)或[cooluri](http://typo3.org/extensions/repository/view/cooluri)这样的扩展（我推荐第一个）。这不仅会在您的打印视图上看起来更好，而且还会对 SEO 产生积极影响。

更新：好的，我想我一开始就理解错了。我猜你的意思是你在网站上的每个链接上都附加了 url，而不仅仅是在打印页面的页眉/页脚中，对吗？你使用像 YAML 这样的 css 框架吗？其中一些包含如下代码

```
a[href]:after {
     content: " ("attr(href)")";
} 
```

在他们的打印样式表中，它在链接末尾添加了每个链接的 url。搜索该部分并将其删除。您还可以在 Firebug 或您用于开发的任何浏览器中启用打印预览。然后您应该看到相同的结果以及导致此行为的 css。

# lambda - 在 Racket 中取反函数

> ID：11215687
> 
> 赞同：3
> 
> 时间：2012-06-26T20:48:44.927
> 
> 标签：lambda, functional-programming, scheme, racket

我正在尝试编写一个高阶 Racket 函数，该函数采用一个变量的一阶函数并返回其逆函数。我知道它必须以这样的方式开始：

```
(让 [( 逆 (lambda (f)
                 (λ (y)
                   ... )))])

```

我认为这是因为`inverse`必须采用一个函数，该函数返回一个函数，该函数采用 a`y`并返回`x`这样的`(= (f x) y)`. 换句话说，逆合约是这样的：

```
; inverse : (number? -> number?) -> (number? -> number?) 
```

我只是想弄清楚省略号在哪里？

编辑：为了回应人们说这是不可能的，我愿意接受一个反函数，当给定`y`返回一个可能的`x`. 为了回应关于函数没有逆的评论，请注意我为`f`. 它是一个`(number? -> number?)`映射，因此有一个逆映射。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T21:14:14.080

对于一般情况，给定一个任意函数`f`，您无法判断它的反函数是什么。*更糟糕的是，给定的函数可能根本*没有逆——例如：输入函数可以执行没有逆的 MD5 散列。对不起，你的问题没有答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T21:08:24.420

考虑 f(x)=x^2。这是一个非常简单的函数，没有逆函数。（因为 f(1)=f(-1) 没有唯一的逆 y=1）。

因为一个非常简单的函数可能没有逆函数，所以你不能指望一个通用的 Scheme 函数有一个逆函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T22:04:16.017

我知道我以前见过这个，但我不记得它是如何工作的。现在我记得了，但我意识到我在我的问题中具有误导性，因为我看到的版本假设我们已经有一个调用的函数`root`，它将返回所提供函数的零之一。鉴于该功能，这很容易：

```
（定义（逆 f）
  (λ (y)
    (根 (lambda (x) (- (fx) y)))))

```

很容易看出这是如何工作的。函数的逆是`x`这样的`f(x) = y`。显然，函数的根`f(x) - y = 0`是`x`。

我出错的地方是我们能做的最好的事情`root`是牛顿法或其他近似法。

# python - 在 Python 中保存和加载字典

> ID：11215688
> 
> 赞同：-1
> 
> 时间：2012-06-26T20:48:47.827
> 
> 标签：python, dictionary

我已经实现了一种编写和读取 python 字典的简单方法，但是，我无法理解为什么它不能作为函数工作。

要保存字典，我使用以下命令：

```
def saveHash():
     print "Saving hash file to ./savedHash"
     f = open('savedHash','w')
     f.write(str(my_hash))
     f.close()
     print "Save Successfull"

saveHash() 
```

这工作得很好。现在要在我做的脚本中加载我的字典：

```
def loadHash(name):
     print "Loading hash file %s" % (name)
     f = open(name,'r')
     my_hash = eval(f.read())
     f.close()
     print "Hash loaded"

loadHash('savedHash') 
```

问题是它似乎在我正在运行的脚本中不起作用，但它会在 shell 中起作用。如果我`savedHash`在我的目录中`/home/dan/`并在该目录中打开一个 python shell，则运行`loadHash('savedHash')`or`loadHash('./savedHash')`或者`loadHash('/home/dan/savedHash')`它不填充字典/哈希。当我这样做`random.choice(my_hash.keys())`时失败并返回此错误消息：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/projects/dan/software/Python-2.7.2/Lib/random.py", line 274, in choice
    return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
IndexError: list index out of range 
```

但是，如果我按以下命令运行命令：

```
>>> f = open(name,'r')
>>> my_hash = eval(f.read())
>>> f.close() 
```

我可以输入`print random.choice(my_hash.keys())`并从中获取值。有谁知道为什么它不能在脚本中工作，但它会在 shell 中工作？我正在使用参数解析器来获取文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:53:42.473

首先，切勿使用`eval`不受信任的来源（如文件）！

我建议使用以下内容存储字典`json`：

```
>>> import json
>>> d = {'a': 3}
>>> with open('data.txt', 'w') as fobj:
...   json.dump(d, fobj)
... 
>>> with open('data.txt') as fobj:
...   d2 = json.load(fobj)
... 
>>> d2
{u'a': 3} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:55:27.300

这是因为在 save 函数中，`my_hash`假定为全局并取自全局命名空间，这是您所期望的。但是，第二个函数不知道您在谈论全局变量。所以你应该添加到你的函数的顶部`global my_hash`。

更好的解决方案是将散列作为参数传递给函数以保存它。并在加载时返回：

```
def saveHash(my_hash):
    # ...

def loadHash():
    # ...
    return my_hash

# Usage:
saveHash(my_hash)
my_hash = loadHash() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:52:52.020

您的`loadHash()`函数不会返回任何内容，因此该`myHash`变量会在函数结束时消失。

如果您尝试填充全局变量`myHash`，如其他答案中所指出的，您需要`global myHash`在函数中包含该行。另请参阅尽可能避免使用全局变量的原因。

另请参阅其他答案中有关避免的注释`eval()`

# architecture - 为什么必须实时进行仿真？

> ID：11215689
> 
> 赞同：6
> 
> 时间：2012-06-26T20:48:49.490
> 
> 标签：architecture, binary, emulation, cpu

我了解模拟器的作用，将一种机器语言更改为另一种机器语言，通常是“即时”的。是否可以构建这样的程序，它读取为一种架构编写的二进制文件并为另一种架构保存新的二进制文件。该过程完成后，它将为用户留下二进制文件，以便在给定架构上进行本机执行。这对于那些拥有昂贵的遗留架构专有应用程序的人来说尤其有用。

是否可以提出这样的申请？二进制重新编译不是一个新概念，但我还没有找到任何有用的实现。

在其他一些人的帮助下，我会很高兴开始编写这样一个程序的开源实现，如果这样的编程是可能的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-25T11:32:28.430

*静态重新编译*是将二进制文件从外部架构转换为另一个目标架构的一种很有前途的方法。它会比即时 (JIT) 更快，因为它不必在运行之前立即编译代码，而且它可能花费的额外编译时间对于优化生成代码很有用。

然而，JIT 编译使用动态程序分析，而静态重新编译依赖于静态程序分析（因此得名）。

在静态分析中，您没有关于执行的运行时信息。

间接跳转带来了一个主要问题。该术语涵盖了可能从某些`switch`语句、函数指针的使用或运行时多态性（想想虚拟表）生成的代码。这一切都归结为以下形式的指令：

```
JMP reg_A 
```

假设您知道程序的起始地址，并且您决定从这一点开始重新编译指令。当你遇到直接跳转时，你会转到它的目标地址，然后从那里继续重新编译。但是，当您遇到间接跳跃时，您会被卡住。在这个汇编指令中， 的内容`reg_A`是静态未知的。因此，我们不知道下一条指令的地址。请注意，在动态重新编译中，我们没有这个问题，因为我们模拟了寄存器的虚拟状态，并且我们知道`reg_A`. 此外，在静态重新编译中，您有兴趣找到**所有**可能的值`reg_A`此时，因为您希望编译所有可能的路径。在动态分析中，你只需要当前值来生成你当前正在执行的路径，如果`reg_A`改变它的值，你仍然可以生成其他路径。在某些情况下，静态分析可以找到候选列表（如果是，`switch`则必须在某处有可能的偏移量表），但在一般情况下，我们根本不知道。

*好吧*，你说，*那让我们重新编译二进制中的所有指令吧！*

这里的问题是，在大多数二进制文件中都包含代码和数据。根据架构，您可能无法分辨哪个是哪个。

更糟糕的是，在某些体系结构中没有对齐约束和可变宽度指令，您可能会在某个时候开始反汇编，却发现您已经开始使用偏移量重新编译。

让我们看一个包含两条指令和一个寄存器的简化指令集`A`：

```
41 xx (size 2): Add xx to `A`.
42 (size 1): Increment `A` by one. 
```

让我们看下面的二进制程序：

```
41 42 
```

假设起点是第一个字节`41`。你做：

```
 41 42 (size 2): Add 42 to `A`. 
```

但是如果 41 是一条数据呢？然后你的程序变成：

```
 42 (size 1): Increment `A` by one. 
```

这个问题在旧游戏中被放大了，这些游戏通常直接在汇编中进行优化，并且程序员可能故意[期望某些字节被解释为代码和数据，具体取决于上下文！](http://andrewkelley.me/post/jamulator.html#dirty-assembly-tricks)

*更糟糕*的是，重新编译的程序可能会自己生成代码！想象一下重新编译 JIT 编译器。结果仍然会输出源架构的代码并尝试跳转到它，很可能会导致程序很快死掉。静态重新编译仅在运行时可用的代码需要无限的技巧！

静态二进制分析是一个非常活跃的研究领域（主要是在安全领域，寻找源不可用的系统中的漏洞），实际上我知道尝试生成一个[尝试静态重新编译程序的 NES 模拟器](http://andrewkelley.me/post/jamulator.html)。这篇文章很有趣。

JIT 和静态重新编译之间的折衷方案是静态重新编译尽可能多的代码，只保留无法静态翻译的位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T21:29:29.770

我相信您正在寻找静态与动态重新编译。动态重新编译就是您所说的“实时”仿真或重新编译。代码以块的形式重新编译，允许仿真器准确地反映原始代码的运行时环境。

静态重新编译是您要问的是否可能。正如一些人指出的那样，在许多不同的情况下都是可能的，但是在静态重新编译后，期望非常具体的运行时约束的代码可能无法成功运行。这就是为什么使用静态重新编译的 N64 模拟器 Corn 只能运行极少数高度手动优化的游戏，而其他采用动态重新编译的 N64 模拟器运行的游戏种类要多得多。

对于更复杂和更传统的代码（即 x86 到 PowerPC），静态重新编译确实是可能的，但是这样的工作将被证明是非常乏味的，因为重新编译器必须使用很多技巧才能使生成的静态代码在目标上可靠地运行机器。动态重新编译器可以在运行时即时执行此操作，只需开发工作的一小部分，并且性能成本可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:51:51.167

您必须首先确保使用它重新编译任何引用的库。

这是可能的，但这是一项艰巨的任务。

还要考虑这样做可能存在许可问题；您正在基于原始软件创建衍生作品。大多数允许您执行此操作的许可证也会让您拥有源代码，因此您可以重新编译或移植源代码，这更容易。

# mysql - 对多对多关系进行排序和过滤

> ID：11215695
> 
> 赞同：2
> 
> 时间：2012-06-26T20:49:06.280
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我正在尝试将标签合并到网站中，并且已经遇到了几个小时的障碍。在我的索引页面上，我想显示至少当前选择了所有标签的所有文章。我看到[Rails 3 多对多查询条件](https://stackoverflow.com/questions/8726564/rails-3-many-to-many-query-condition)并添加

```
@articles = Article.find_by_sql([ "SELECT * FROM articles p
JOIN (
    SELECT pt.post_id FROM articles_tags pt
    JOIN posts p ON p.id = pt.articles_id
    JOIN tags t ON t.id = pt.tag_id
    WHERE t.label IN (?)
    GROUP BY pt.post_id
    HAVING count(pt.post_id) = ?
) pt ON p.id = pt.post_id", names_array, names_array.size]) 
```

但现在我想包括创建它的用户并按其时间戳对其进行排序。它不会让您包含或按 find_by_sql 的结果排序

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:01:45.310

假设作者在表“创作者”中，这个怎么样：

```
@articles = Article.find_by_sql([ "SELECT * FROM articles p
JOIN (
    SELECT pt.post_id FROM articles_tags pt
    JOIN posts p ON p.id = pt.articles_id
    JOIN tags t ON t.id = pt.tag_id
    JOIN creators c ON c.id = p.creator_id
    WHERE t.label IN (?)
    GROUP BY pt.post_id
    HAVING count(pt.post_id) = ?
) pt ON p.id = pt.post_id ORDER BY articles.created_at", names_array, names_array.size]) 
```

# date - cmd dir /b/s 加上日期

> ID：11215702
> 
> 赞同：12
> 
> 时间：2012-06-26T20:49:27.613
> 
> 标签：date, path, cmd, dir, bare

我正在寻找 Windows XP 中的 cmd shell 命令，例如“dir /b/s”，其中包含结果中每个文件的日期和时间值。所有数据 - 路径、文件名和日期/时间 - 都需要在一行上。谁能提供一个命令来完成这个？谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T02:16:00.320

如果你只想要文件

```
for /r %F in (*) do @echo %~tF %F 
```

如果你想要文件和目录，那么使用带有 FOR /F 的 DIR 命令

```
for /f "eol=: delims=" %F in ('dir /b /s') do @echo %~tF %F 
```

如果在批处理文件中使用，则`%F`and`%~tF`必须更改为`%%F`and `%%~tF`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-05T20:38:14.373

您还可以使用*dbenham* answer **for /f "eol=: delims=" %F in ('dir /b /s') do @echo ...**转储如下信息：

*   %~zF 文件长度
*   %~dF 驱动
*   %~pF 路径
*   %~nF 名称
*   %~xF 扩展
*   %~tF 日期和时间

即使用下面的行您可以使用子目录和文件详细信息制作目录的 csv 转储

```
for /f "eol=: delims=" %F in ('dir /b /s') do @echo %F;%~zF;%~dF;%~pF;%~nF;%~xF;%~tF; 
```

结果：

```
full_path;size;drive;path;name;extension;date
E:\dump\oc.txt;37686;E:;\dump\;oc;.txt;2020-04-05 20:10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:55:36.883

使用 DIR 没有直接的方法来做到这一点。您需要编写一个包装器，从 DIR /s 中剥离无关的细节

您可以使用 powershell、vbscript 或 javascript 来执行此操作。

这是使用 PowerShell 的相关答案：[如何从 PowerShell 中检索递归目录和文件列表，不包括某些文件和文件夹？](https://stackoverflow.com/questions/8024103/how-to-retrieve-a-recursive-directory-and-file-list-from-powershell-excluding-so)尽管您需要修改它以添加日期/时间。

更新：这里是一个 MAD 站点，列出了以不同语言加载的递归目录遍历：[http ://rosettacode.org/wiki/Walk_a_directory/Recursively](http://rosettacode.org/wiki/Walk_a_directory/Recursively)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T15:41:01.130

像这样的东西怎么样：

```
for /f "tokens=*" %a in ('dir *.* /a:d /b /s') do for /f "skip=5 tokens=1,2,3,4*" %b in ('dir *.* /a:-d') do @if %e neq bytes @echo %a\%e%f %b %c 
```

简单，虽然我可能稍微复杂了一点:-)

# nhibernate - 向 JOIN 而不是 WHERE 子句添加附加条件

> ID：11215708
> 
> 赞同：5
> 
> 时间：2012-06-26T20:49:53.990
> 
> 标签：nhibernate

几天来，我一直在尝试使用 QueryOver 来完成此任务，但没有取得太大进展。我似乎找不到在一对多关系的左外连接上添加条件的方法。我有问答实体，其中一个问题有多个答案（用于调查，其中每个响应都是对同一问题的另一个答案）。我正在尝试根据某些标准过滤所有答案（例如，所有分数 < 3 的答案），但是每当我尝试添加条件时，它都会被添加到 WHERE 子句而不是 JOIN 中。

# 示例实体

问题：

```
public class Question : Entity<int>
{
    public virtual IEnumerable<Answer> Answers { get; set; }
    ...
} 
```

回答：

```
public class Answer : Entity<int>
{
    public virtual Question Question { get; set; }
    public virtual int Score { get; set; }
    ...
} 
```

# 查询

我尝试了许多使用 JoinQueryOver 的不同变体......

```
session.QueryOver<Question>()
    .Where(q => q.Survey.Id == id)
    .Left.JoinQueryOver(q => q.Answers)
    .Where(a => a.Score < 3) 
```

...和 ​​JoinAlias 并在 Where 中使用别名

```
session.QueryOver<Question>(() => questionAlias)
    .Where(q => q.Survey.Id == id)
    .Left.JoinAlias(() => questionAlias.Answers, () => answerAlias)
    .Where(() => answerAlias.Score > 3); 
```

我总是收到这样的查询：

```
SELECT * FROM QUESTION q
left outer join ANSWER a on q.Id=a.Question_id
WHERE q.Survey_id = 1 and a.Score < 3 
```

但是我需要：

```
SELECT * FROM QUESTION q
left outer join ANSWER a on q.Id=a.Question_id and a.Score < 3
WHERE q.Survey_id = 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T13:42:12.813

原来我使用的是不支持此功能的旧版本 NHibernate (3.1)，但升级到 3.3 现在有一个额外的 withClause 可以通过，如下所示：

```
Answer answerAlias = null;
var questionQuery = session.QueryOver<Question>()
    .Where(q => q.Survey.Id == id)
    .Left.JoinQueryOver(q => q.Answers, () => answerAlias, a => a.Score > 3); 
```

我相信从 3.2 开始支持这一点（这个[问题](https://stackoverflow.com/questions/9293424/nhibernate-left-joins)的公认答案是我的提示）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:13:28.440

IIRC，唯一支持此功能的查询 API 是 HQL：

```
from Question q
left join q.Answers a with a.Score < 3
where q.Survey.Id = :id 
```

（未经测试）

# java - Java 库兼容性问题 - NULL 指针异常

> ID：11215710
> 
> 赞同：0
> 
> 时间：2012-06-26T20:50:00.060
> 
> 标签：java, android, eclipse, jakarta-ee, netbeans

我正在尝试创建一个 Java swing 应用程序，并且正在尝试使用我为 Android 编写的类。我在执行 http 帖子时遇到了问题，因为我遇到了 NULL 指针异常。

```
private static String httpPost(ArrayList<NameValuePair> constraints, URI uri)
        throws ClientProtocolException, IOException {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(uri);
    try {
        httppost.setEntity(new UrlEncodedFormEntity(constraints));
    } catch (UnsupportedEncodingException e) {
        throw (new IllegalArgumentException("Constraints: "
                + constraints.toString()));
    }

    HttpResponse response = httpclient.execute(httppost);

    return isToString(response.getEntity().getContent());
} 
```

堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at org.apache.http.entity.StringEntity.<init>(StringEntity.java:70)
at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:78)
at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:92)
at connection.Server.httpPost(Server.java:130)
    ... 
```

在 android 上，org.apache.* 包包含在 android-8.jar 中。它只是不适用于我从[这里](http://hc.apache.org/downloads.cgi)下载的库（HttpCore 4.2.1）。

NullPointerException 在以下调用中引发`new UrlEncodedFormEntity(constraints)`。我已经`constraints`使用调试器检查了参数，它非常好并且包含它应该包含的内容。

难道我做错了什么？在我看来，lib 有问题。[我一直在网站](http://hc.apache.org/downloads.cgi)上寻找以前的版本，但似乎没有。

**编辑：**我突然想到要下载源代码以查看引发异常的确切位置（第 70 行）：

org.apache.http.entity.StringEntity

```
68:  Charset charset = contentType != null ? contentType.getCharset() : null;
69:  if (charset == null) {
70:      charset = HTTP.DEF_CONTENT_CHARSET;
80:  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:09:01.537

你什么时候下载的库？你看过[这个帖子](http://mail-archive.com/httpclient-users@hc.apache.org/msg05650.html)吗？建议是这是一个回归，已在以后的构建中解决。

鉴于您的编辑，我会说您拥有的二进制文件和您下载的源不同步。我建议重新下载二进制文件并尝试使用这些文件运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T14:58:48.037

It seems that StringEntity is broken in the org.apache.http.entity.StringEntity class of HttpClient 4.2.1\. The problem appears to involve a Charset. Patch is available at [http://dvdsdirect.us/notesstringentity.jsp](http://dvdsdirect.us/notesstringentity.jsp)

# c# - 用户单击按钮后如何从 ASP 页面下载 CSV 文件

> ID：11215713
> 
> 赞同：0
> 
> 时间：2012-06-26T20:50:28.000
> 
> 标签：c#, asp.net

我基本上已将以下内容放入我的按钮单击偶数处理程序中，它*主要*工作但它也在 CSV 文件中写出页面的所有 html。有没有办法阻止这种情况？

```
 StringBuilder sb = new StringBuilder();
                sb.AppendLine("pkey,epsn,Cal. Date (UTC),Va Mult, Vb Mult, Vc Mult,Ia Mult, Ib Mult, Ic Mult, Ia Phase, Ib Phase, Ic Phase, CT Rating, CT Type, Cal By");
                Response.ContentType = "application/csv";

                Response.AddHeader("content-disposition", "attachment; filename=EPSn.csv");
                Response.Write(sb.ToString());
                foreach (DataRow row in dt.Rows)
                {
                    sb = new StringBuilder((string)row[0]);
                    for (int i = 1; i < dt.Columns.Count; i++)
                    {
                        if (row[i] is DBNull)
                            sb.Append(",NULL");
                        else if (i == 2)
                            sb.Append("," + new DateTime((long)row[i]).ToString("G"));
                        else
                            sb.Append("," + row[i].ToString());

                    }
                    sb.AppendLine();
                    Response.Write(sb.ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:06:04.483

在开始编写响应之前添加。

```
Response.Clear(); 
```

在代码末尾添加以下内容。

```
Response.Flush();
Response.End(); 
```

感谢以下关于结束回复的最佳方式的问题。

[HttpResponse.End vs HttpResponse.Close vs HttpResponse.SuppressContent](https://stackoverflow.com/questions/1886729/httpresponse-end-vs-httpresponse-close-vs-httpresponse-suppresscontent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:03:20.927

我认为您还应该在此代码之后添加 Response.End() ：这样就不会向响应流中添加更多响应。这可能会将页面输出添加到您的 CSV。

```
sb.AppendLine();
Response.Write(sb.ToString());

Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:51:53.350

> 有没有办法阻止这种情况？

您可以清除响应：

```
Response.Clear();
Response.ClearContent(); 
```

也请[停止滚动您自己的 CSV 解析器](http://secretgeek.net/csv_trouble.asp)。这绝对是可怕的，我看到人们一遍又一遍地继续犯这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T20:57:30.647

我不知道您是否要避免使用 excel，但是此代码段适用于我的代码：

```
 void InitAttachment()
    {
        string attachment = "attachment; filename= " + this.FileName;
        Response.ClearContent();
        Response.AddHeader("content-disposition", attachment);
        Response.ContentType = "application/excel";
    } 
```

# objective-c - ABMultiValueRef nil 值检查

> ID：11215714
> 
> 赞同：1
> 
> 时间：2012-06-26T20:50:32.853
> 
> 标签：objective-c, ios, contacts, null, abaddressbook

我正在尝试获取联系人的家庭电子邮件属性。它工作正常，但我不确定我是否检查我是否正确检查家庭电子邮件属性是否为`nil`.

```
//Since there are multiple email labels, I iterate through them and check which one matches the string "Home" and that is the home email
if([emailLabel isEqualToString:@"Home"]){

        //Here is where I check if there is actually a home email value        
        if ((__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(emailsMultiValueRef, emailsCount) != NULL){

            email = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonEmailProperty);
        }   

        //If the email property does not exist
        else{

            email = @"NULL";
        }
    } 
```

我的问题是：在这一行`if ((__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(emailsMultiValueRef, emailsCount) != NULL)`中，我是否将作为字符串复制的值与`nil`or进行比较`NULL`？我不确定 nil 值检查当前是否有效。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T05:00:19.927

试试这个。我可以毫无问题地获得电子邮件地址。

```
-(BOOL)peoplePickerNavigationControllerenter code here:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

return YES;

}

-(BOOL)peoplePickerNavigationController(ABPeoplePickerNavigationController*)peoplePicker
  shouldContinueAfterSelectingPerson:(ABRecordRef)person
                            property:(ABPropertyID)property
                          identifier:(ABMultiValueIdentifier)identifier
{

   if (kABPersonEmailProperty == property)
 {

        ABMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);

        NSString *email = (__bridge NSString *)ABMultiValueCopyValueAtIndex(multi, identifier);

        NSLog(@"email: %@", email);

        [self dismissModalViewControllerAnimated:YES];

        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:22:43.290

我正在检查它是否是 nil 正确的方法（通过比较`ABMultiValueCopyValueAtIndex(emailsMultiValueRef, emailsCount)`to的值`NULL`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T07:54:26.843

这是正确的描述-

如果您只想填充地址簿，并且在选择任何您希望该人有电子邮件的联系人之后，请执行此操作 -->

```
 - (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

NSMutableArray   *personEmails=[NSMutableArray new];
ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);

    if (ABMultiValueGetCount(multi) > 0) {

        for (CFIndex i = 0; i < ABMultiValueGetCount(multi); i++) {
            CFStringRef emailRef = ABMultiValueCopyValueAtIndex(multi, i);
            [personEmails addObject:(NSString *)emailRef];
            CFRelease(emailRef);
        }
    }
    else{

        UIAlertView *errorAlert = [[UIAlertView alloc] initWithTitle:@"Oops!! \ue403" message:@"No Email addredd found !\n\n " delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles: nil];
        [errorAlert show];
        [errorAlert release];
    }
    CFRelease(multi); 
```

}

# android - 在 Android 项目中使用 scala-library.jar 会引发错误：Library cannot be dexed

> ID：11215718
> 
> 赞同：1
> 
> 时间：2012-06-26T20:51:21.790
> 
> 标签：android, scala, dex

我有一个非常简单的 Android 项目设置，它使用：

*   几个将为我的应用程序执行某些功能的自定义 Scala JAR
*   scala-library.jar 版本 2.9.1 最终版，因此 Scala jar 可以运行

但是，每当我尝试启动该应用程序时，我都会收到错误消息说 scala-library 不能被 Dexed，因为它太大了。

谷歌搜索显示这是一个问题，但我不确定如何解决它。有人说 Proguard 是答案，但我不知道该怎么做。

我目前不使用 Ant 进行任何构建管理，只使用 Eclipse 工具。

有什么帮助或提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:36:20.357

您应该在对标准库进行 dexing 之前使用 ProGuard。

这里有一个 Scala Android 项目的 sbt 插件：[https ://github.com/jberkel/android-plugin/](https://github.com/jberkel/android-plugin/)

入门指南非常详细：[https ://github.com/jberkel/android-plugin/wiki/getting-started](https://github.com/jberkel/android-plugin/wiki/getting-started)

该插件自动使用 ProGuard。

如果您想自己手动使用 ProGuard，请查看： http: [//proguard.sourceforge.net/index.html#manual/usage.html](http://proguard.sourceforge.net/index.html#manual/usage.html)

# database - 数据库搜索以返回按两组之间的交集大小排序的结果

> ID：11215719
> 
> 赞同：4
> 
> 时间：2012-06-26T20:51:23.817
> 
> 标签：database, algorithm, nosql, intersection

我想在我的数据库中搜索与我的搜索集相交的集。我希望按交叉点大小的顺序将结果返回给我。

数据库行内的集合将是大约 10,000 个。搜索集的数量级约为 500。数据库中的行数约为 1,000,000。

**示例查询：**

```
search_set = [这个集合有500个id]

选择行 WHERE "find_set" INTERSECTS "search_set"
    ORDER BY "交叉点的大小"

```

**示例数据库：**

```
索引查找集
1 [设置有 10,000 个 ID]
2 [设置 5,000 个 ID]
...
1,000,000 [设置有 15,000 个 ID]

```

*   我希望这个查询需要多长时间？
*   是否有我应该使用的特定数据库或数据库库？
*   我需要做一些预处理吗？
*   数据库如何实现这种类型的查询？他们是否对“search_set”中的 500 个 id 中的每一个进行一次搜索？
*   关于此类问题以及如何解决，我还需要了解哪些其他信息？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:02:37.907

此查询的性能很大程度上取决于数据库优化引擎和您执行查询的方式。

首先，数据库通常没有每列包含 15,000 个 id 的表。相反，您将需要类似这对表的东西：

```
set
---
id

set_entry
-----------
id
set_id
entry 
```

第一个表将有一百万行。第二个更像100亿。将索引放在`set_entry.entry`.

通常安排查询的最佳方式是使用某种临时表，其行是查询集的值。然后执行如下查询：

```
SELECT set_entry.id, COUNT(*)
FROM set_entry
  JOIN query_entry
    ON set_entry.entry = query_entry.entry
GROUP BY set_entry.id
ORDER BY count(*) DESC 
```

您想要的查询计划是，对于您的每个元素，它应该在索引上进行查找，拉回所有匹配的行，然后继续进行分组操作以确定您相交的每个集合有多少。在第一步中，您将进行 500 次查找，然后将其拉回 0 到 5 亿行之间的某个位置。假设你要撤回 500 万。分组操作将通过构建散列或对数据进行排序来完成（数据库可以通过任何一种方式进行），这两种方式都应该非常快。

有很多未知数，但这个计划可能需要几秒钟。

您要注意的是这样的查询：

```
SELECT set_entry.id, COUNT(*)
FROM set_entry
WHERE entry IN (id1, id2, ....)
GROUP BY set_entry.id
ORDER BY count(*) DESC 
```

根据我的经验，大多数数据库引擎都会考虑这一点，然后决定它们不能使用索引。相反，他们将扫描所有`set_entry`（有 100 亿行），并为每一个扫描这组 500 个元素，进行成对比较。这意味着大约 5 万亿成对比较的初始步骤。这个计划很容易让你的 CPU 忙碌几个小时。

# visual-studio-2010 - Visual Studio：自动更正特定的拼写错误

> ID：11215723
> 
> 赞同：2
> 
> 时间：2012-06-26T20:51:41.557
> 
> 标签：visual-studio-2010, spell-checking, autocorrect

通常在 javascript 中编码时，我会输入

```
funciton 
```

代替

```
function 
```

每当发生此特定错误时，我想自动更正此拼写错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:59:06.503

试试[Visual Studio Gallery中的](http://visualstudiogallery.msdn.microsoft.com/)[Spell Checker](http://visualstudiogallery.msdn.microsoft.com/7c8341f1-ebac-40c8-92c2-476db8d523ce)和[HTML Spell Checker](http://visualstudiogallery.msdn.microsoft.com/0db4814c-255e-4cc6-a2c2-a428de7f8949)扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T04:16:28.390

好吧，当您犯拼写错误或某种其他类型的语法错误时，Visual Studio 会在该语句下方显示一条红色草书线，就像您在 **Microsoft Word**中显示的那样。很多时候红线有点超前的错误，但错误肯定在红线之前的代码中。

# javascript - 如何在不重新加载或重新呈现页面的情况下将 JSON 从 node.js 后端返回到前端？

> ID：11215724
> 
> 赞同：4
> 
> 时间：2012-06-26T20:51:43.597
> 
> 标签：javascript, jquery, node.js, dom, post

我正在使用 node.js。

我想按下一个搜索按钮，在后端对另一台服务器进行一些rest api调用并将json返回到前端，然后在前端重新加载一个div，这样我就不必刷新页面了。现在我知道我可以使用 jQuery 或者只是 Javascript dom 操作重新加载一个 div。

但是如何让它在服务器端调用一个方法呢？我可以有一个提交按钮，它会发出一个发布请求，我可以捕获它并从那里进行我的 api 调用，但是从 node.js 端，当我返回时，我将不得不再次呈现页面。如何在不重新渲染或刷新页面的情况下将 JSON 从后端返回到前端？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T21:01:24.827

下面演示如何发出基本的 AJAX 请求。

小提琴： http: [//jsfiddle.net/tWdhy ​​/1/](http://jsfiddle.net/tWdhy/1/)

```
$(function(){
    $.ajax({
        url: '/echo/json/', //the URL to your node.js server that has data
        dataType: 'json',
        cache: false
    }).done(function(data){
        //"data" will be JSON. Do what you want with it. 
        alert(data);
    }); 
}); 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T20:56:24.497

[http://expressjs.com/](http://expressjs.com/)

服务器上大致是这样的：

```
var app = express.createServer();
app.use(express.bodyParser());
app.post('/search', function(req, res){
   search_form = req.body;  // <-- search items
   MySearch.doSearch(search_form,function(err,items) {
       res.send(items);
   });
});

app.listen(3000); 
```

您将必须实现 doSearch 代码以返回您正在搜索的任何内容......

客户：

```
 <script>
   $.ajax( {
      url: '/search',
      data: search_form,
      type: 'POST',
      success: function(items) {
          /* do something with items here */
          // You will likely want a template so you don't have to format the string by hand
        for( var item in items ) {
           $('#results').append('<div>'+item.interestingField+'</div>);
        }
      }
   });
   </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:11:56.930

总结评论（遗憾的是，问题没有正确提出）：您想要的是对位于**不同**域的服务器进行 AJAX 调用，然后是 JavaScript。通常，由于相同的原产地政策，您不能这样做。但是有一些技巧：

1) 使用 jQuery 的 AJAX 和`dataType: 'jsonp'`. 您应该阅读并了解有关 JSONP 的更多信息。

2) 对您的域进行 AJAX 调用，让服务器调用另一台服务器。使用 Node.JS，您可以使用：

```
var http = require('http');
http.request(/* options */); 
```

请参阅[文档](http://nodejs.org/api/http.html#http_class_http_clientrequest)。

# c# - 使用给定uri的java发送八位字节流

> ID：11215727
> 
> 赞同：0
> 
> 时间：2012-06-26T20:51:45.773
> 
> 标签：c#, java, stream, httpwebrequest

在 c# 中，我能够做到这一点：

```
 HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;
        request.Method = "POST";
        request.ContentType = "application/octet-stream";

        request.ContentLength = fileToSend.Length;
        request.Timeout = 2000000000;
        using (Stream requestStream = request.GetRequestStream())
        {
            // Send the file as body request.
            requestStream.Write(fileToSend, 0, fileToSend.Length);
            requestStream.Close();
        } 
```

我正在寻找一个类似的对象，我可以在 Java 中使用它来扮演 HttpWebRequest 的角色，它将包括一个 Stream。

谢谢！

编辑：发现这个[Using java.net.URLConnection to fire and handle HTTP requests](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)但它似乎太复杂了......希望有一种更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:48:58.767

我建议您查看 Apache HTTP 客户端 ( [http://hc.apache.org/httpclient-3.x/features.html](http://hc.apache.org/httpclient-3.x/features.html) )。

如果您只需要从某些资源中查询信息，那么标准 JDK 就足够了：

```
java.net.URL url = new java.net.URL("http://foo.bar");
URLConnection conn = url.openConnection();
//conn.getOutputStream() to place information
//conn.getInputStream() to read resource 
```

# ios - Xcode 核心数据终止问题？

> ID：11215728
> 
> 赞同：0
> 
> 时间：2012-06-26T20:51:45.940
> 
> 标签：ios, xcode, core-data

每当我设置一个我不想逆向的核心数据关系时，Xcode 就会退出。这似乎不正常。我越来越沮丧。作为 CoreData 的新手，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:14:30.117

这确实不正常。您应该在[http://bugreport.apple.com](http://bugreport.apple.com)上报告一个错误。顺便说一句，哪个版本的 Xcode？我最近在 4.4/4.5 上没有看到这个。

现在，不推荐没有反向的关系。如果您确实不需要逆向，则最好无论如何都必须包含一个具有特定名称的逆向，这样您就知道它在这里只是为了取悦 Core Data（例如，`<yourrelationship>_topleasecoredata`;）。没有反向的关系就像一袋打开的伤害。你不知道什么会从袋子里跳出来，但迟早会有东西伤害你。逆向几乎不花费您任何费用。

# android - Android Eclipse 致命错误

> ID：11215730
> 
> 赞同：0
> 
> 时间：2012-06-26T20:51:48.847
> 
> 标签：android, android-manifest, android-activity

我试图用 eclipse 和 phonegap 制作我的第一个应用程序。但是当我尝试运行该应用程序时，我收到了以下消息：

```
06-26 20:50:03.736: E/AndroidRuntime(1449): FATAL EXCEPTION: main
06-26 20:50:03.736: E/AndroidRuntime(1449): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{my.first.app/my.first.app.MyFirstAppActivity}: java.lang.ClassNotFoundException: my.first.app.MyFirstAppActivity
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.os.Looper.loop(Looper.java:137)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at java.lang.reflect.Method.invokeNative(Native Method)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at java.lang.reflect.Method.invoke(Method.java:511)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at dalvik.system.NativeStart.main(Native Method)
06-26 20:50:03.736: E/AndroidRuntime(1449): Caused by: java.lang.ClassNotFoundException: my.first.app.MyFirstAppActivity
06-26 20:50:03.736: E/AndroidRuntime(1449):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-26 20:50:03.736: E/AndroidRuntime(1449):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
06-26 20:50:03.736: E/AndroidRuntime(1449):     ... 11 more 
```

清单：

```
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name" > 
    <activity android:name=".MyFirstAppActivity" 
              android:configChanges="orientation|keyboardHidden|screenSize" 
              android:label="@string/app_name" > 
        <intent-filter> 
            <action android:name="android.intent.action.MAIN" /> 
            <category android:name="android.intent.category.LAUNCHER" /> 
        </intent-filter> 
    </activity>      
</application> 
```

我完全按照[http://docs.phonegap.com/en/1.8.1/guide_getting-started_index.md.html#Getting%20Started%20Guides中的说明进行操作](http://docs.phonegap.com/en/1.8.1/guide_getting-started_index.md.html#Getting%20Started%20Guides)

这是我的 MyFirstAppActivity.java 文件：

```
package my.first.app;

import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class MyFirstAppActivity extends DroidGap { // DroidGap
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

和 AndroidManifest.xml

```
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name=".MyFirstAppActivity" android:configChanges="orientation|keyboardHidden|screenSize" android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
    </application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:53:44.660

您可能忘记`MyFirstAppActivity`在您的`AndroidManifest.xml`.

`<application>`确保您的清单在and`</application>`标记之间包含类似这样的内容：

```
<activity android:name=".MyFirstAppActivity">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:26:47.140

改变

```
public class MyFirstAppActivity extends DroidGap { // DroidGap 
```

到

```
public class MyFirstAppActivity extends Activity { 
```

并在需要时从那里创建一个 DroidGap 对象。

# java - 如何让 resteasy MultipartFormDataInput 使用 UTF-8 解码字符串？

> ID：11215733
> 
> 赞同：1
> 
> 时间：2012-06-26T20:51:53.617
> 
> 标签：java, tomcat, jboss, resteasy

我正在使用 resteasy 2.3.4-Final 并且在接受 multipart/form-data 的调用中遇到 UTF-8 问题。我的 API 的使用者是 iOS 和 Android 设备。发送的任何字符串参数都不包含字符集，因此 resteasy 似乎正在使用 us-ascii 编码解码字符串。我已经做了很多工作来修复从 db 层到创建一个将字符编码强制为 utf-8 的过滤器所涉及的所有其他内容。这解决了所有 form-url-encoded POST 的问题，但是现在两个调用仍然不起作用，它们都是 multipart/form-data 调用。我知道消费者应该在消息部分中发送 utf-8 字符集，但我试图弄清楚是否有' s 任何强制使用 UTF-8 暂时解码所有内容的方法，因为 Apple 需要大约 2 周的时间来批准对我们的应用程序的更新，这并不理想，但我们可能不得不在那个问题上咬紧牙关。以前有没有人这样做过并且在多部分表单上传方面取得了成功？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:51:42.107

根据 RESTEasy 文档，应该可以覆盖默认的内容类型：

[http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#multipart_overwrite_default_content_type](http://docs.jboss.org/resteasy/docs/2.3.4.Final/userguide/html_single/index.html#multipart_overwrite_default_content_type)

```
import org.jboss.resteasy.plugins.providers.multipart.InputPart;

@Provider
@ServerInterceptor
public class ContentTypeSetterPreProcessorInterceptor implements
        PreProcessInterceptor {

    public ServerResponse preProcess(HttpRequest request,
            ResourceMethod method) throws Failure, WebApplicationException {
        request.setAttribute(InputPart.DEFAULT_CONTENT_TYPE_PROPERTY,
                "*/*; charset=UTF-8");
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T16:16:44.283

由于已弃用，我使用"injected"`org.jboss.resteasy.spi.interception.PreProcessInterceptor`解决了问题。`javax.ws.rs.container.ContainerRequestFilter``HttpServletRequest`

例子：

```
@Provider
public class MyContentTypeFilter implements ContainerRequestFilter {
  @Context
  private HttpServletRequest servletRequest;

  @Override
  public void filter(ContainerRequestContext requestContext) throws IOException {
    servletRequest.setAttribute(InputPart.DEFAULT_CONTENT_TYPE_PROPERTY, "text/plain; charset=UTF-8");
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T12:40:28.300

这是编码问题的解决方法。也请投票给这个错误[RESTEASY-390](https://issues.jboss.org/browse/RESTEASY-390)。

例子：

```
import org.apache.james.mime4j.message.BodyPart;
import org.apache.james.mime4j.message.SingleBody;
import org.jboss.resteasy.plugins.providers.multipart.InputPart;

    ...

@POST
@Path("/uploadContacts")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void uploadContacts(MultipartFormDataInput input) throws Exception {

    List<InputPart> inputParts = uploadForm.get("uploadFieldName");
    for (InputPart inputPart : inputParts) {
               // bytes extracted
               byte[] fileBytes = readByteArray(inputPart);
               // now we can read it with right encoding
               InputStreamReader reader = new InputStreamReader(new ByteArrayInputStream(fileBytes), "UTF-8");

               ...
    }
}

private byte[] readByteArray(InputPart inputPart) throws Exception {
    Field f = inputPart.getClass().getDeclaredField("bodyPart");
    f.setAccessible(true);
    BodyPart bodyPart = (BodyPart) f.get(inputPart);
    SingleBody body = (SingleBody)bodyPart.getBody();

    ByteArrayOutputStream os = new ByteArrayOutputStream();
    body.writeTo(os);
    byte[] fileBytes = os.toByteArray();
    return fileBytes;
} 
```

# ubuntu - 在 ubuntu 上更新 cloudfoundry vmc

> ID：11215736
> 
> 赞同：0
> 
> 时间：2012-06-26T20:52:02.403
> 
> 标签：ubuntu, cloud-foundry

我如何将 ubuntu 上的 vmc 客户端更新到版本，以便它支持到 mysql 等服务的隧道。

我想使用隧道，但前提是：您必须拥有 vmc 0.3.14 或更高版本。

现在，当我检查我的版本时，它显示的是 0.3.10。如果我运行 gem update vmc，它没有说要更新。

所以，我的问题是，我更新错了吗？还是在 linux 平台上还不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:20:10.350

Rubygems 说安装了什么版本？如果它显示版本 0.3.18（最新版本）并且您使用的是 RVM，则可能值得确保在运行 VMC 时运行安装的最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:31:16.437

根据我[关于这个主题的博客文章](http://andypiper.co.uk/2012/04/26/ubuntu-12-04-and-cloud-foundry/)，Ubuntu 今天发布的 vmc 版本是落后的，所以我建议你走一条全新的 gem 安装路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:46:48.263

只需运行

```
sudo gem install vmc 
```

获取最新的稳定版本和

```
sudo gem install vmc --pre 
```

获取最新的开发版本。

# javascript - 使用 jQuery 对动态表进行排序

> ID：11215737
> 
> 赞同：0
> 
> 时间：2012-06-26T20:52:02.573
> 
> 标签：javascript, jquery

使用 javaScript 我动态填充表头和表数据。我想根据单击的标题单元格对表格的行进行排序。

注意：主要要求是我不想使用任何 jQuery 插件，例如 tablesorter、jqGrid 等，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:13:14.527

其中一个想法是，

***表头的onlick***（必须在ajax服务器代码中编写此代码）调用动态获取表内容的jquery ajax函数。

**JAVASCRIPT**

```
function getTableData(sort_field, sort_by) { // sort_field: id, date, name.. & sort_by: ascending or descending
        // do call ajax function for getting the data. 
        // Pass the sort_field and sort_by value as sort field name and 
        // do the server code accordingly.
    } 
```

**HTML**

```
<table>
<tr>
<th onclick="getTableData('date','asc');">Date</th>
</tr>
</table> 
```

# python - wxpython 演示文件出错

> ID：11215740
> 
> 赞同：1
> 
> 时间：2012-06-26T20:52:09.633
> 
> 标签：python, wxpython

我最近下载并安装了文件“wxPython2.8-win64-unicode-2.8.12.1-py27… 和”wxPython2.8-win32-docs-demos-2.8.12.1.e… 但是当我点击菜单项时演示，没有任何反应。当我点击“C:\Program Files (x86)\wxPython2.8 Docs and Demos\demo\demo.pyw”的链接并尝试在 python IDLE 中运行它时，出现错误。有人知道我可以做些什么来让演示和库正常工作吗？

错误：http: [//i.stack.imgur.com/QqIio.png](https://i.stack.imgur.com/QqIio.png)

![](../Images/1081c9030ed1643b6f6928dcf90e20f5.png)

菜单项：http: [//i.stack.imgur.com/Bf6dA.jpg](https://i.stack.imgur.com/Bf6dA.jpg)

![](../Images/9c89d6ac21f2109d0947a9e5acf52e6a.png)

电脑信息：http: [//i.stack.imgur.com/ObGUg.png](https://i.stack.imgur.com/ObGUg.png)

![](../Images/6a5fff479ca4cee1de1119b5ed3360fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:17:50.213

问题是你的 wxpython 版本是 64 位的，而 demo 是 32 位的。
如果你想使用 demo，确保你的 python 安装和你的 wxpython 都是 32 位的。（即在32位版本中重新安装python和wxpython）

# database-design - UI 信息的存储位置

> ID：11215742
> 
> 赞同：0
> 
> 时间：2012-06-26T20:52:26.863
> 
> 标签：database-design, user-interface, architecture

假设我们有一个用于编辑小部件的表单。一个给定的 Widget 有一个 Attribute。该属性 (A) 的值可以是存储的属性列表 (1, 2, 3) 之一。我们的属性列表用于多种 Widget 类型。

现在，从数据的角度来看，给定的 Widget 可以具有任何列表的属性 A（它可以包含值 1、2 或 3）。但是，我们的业务规则规定 Widget 类型 X 不能在属性 A 中包含值 1。

我的问题是，我在哪里存储表单将用于填充属性 A 列表的信息？

现在，碰巧我为小部件 X、Y 和 Z 使用了不同的表单，但理论上，我们可能不得不在同一个表单上解决这个问题。我可以将它存储在 Widget 类或 Attribute 类中，但我觉得这并不代表实际的对象信息（同样，“sushi”不是 Dog 类的有效 Food，即使它是完全有效的食物，它无法描述狗）。您将如何填充“编辑狗”表单上的“食物”列表？我需要批准的列表信息是可编辑的，并且不需要重新部署代码，因为用户是善变的，最终有人会想要喂他们的狗寿司。

用 C# 编写这个，但我觉得这个问题与语言无关。

*在用户 Blueberry 回复后添加：*

谢谢，可能我的描述不是很清楚。想象一个 Widgets 表、一个 Attributes 表和一个 Widget_Attributes 表，这将是一个包含*允许*分配给 Widget 的给定属性的 Attributes 的外部参照。这是可以做到的一种方式，但看起来像是代码异味，因为它可能会导致 Widget 上的每个属性都有一个外部参照表。所以我正在寻找一种方法来填充控件，该控件仅使用该类型小部件允许的属性值。

现在主要的想法是向每个属性记录添加一个标志枚举，以指示该属性对哪些小部件有效。在 Dog-Food 示例中，Food sushi 将具有值为 1 的 EatenBy 枚举属性，其中枚举将定义为 Human = 1、Dog = 2、Cat = 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:25:21.697

如果我正确理解您的问题，您有一个小部件，它根据用户在您控件的另一部分中选择的数据具有不同的行为？

首先，我认为对此没有正确或错误的答案。这实际上取决于逻辑与 UI 的接近程度。如果它以任何方式存在业务逻辑，我会将其置于控制之外（例如组合框），但是，如果它是纯粹的 UI（例如日期时间选择器中的逻辑），它将进入控制。

尽管如此，从我从你的具体案例中收集到的信息来看，它更接近第一个。如果您使用的是 MVC 架构，我可能会让这个逻辑更接近我的模型，而不是我的视图或控制器。

我想这只是一个更复杂的版本，一个 ComboBox 会做，我会说当然为了保持这个通用性，它不会成为表单或控件本身的一部分，因为这将是一个非常具体的情况。可能只有您会使用代码，但在一般的编码实践中，将这些细节保留在您的控制之外将至少允许更好的代码重用。

根据数据的复杂性，您可以做的是创建一个包含所有这些数据的对象，在模型上创建它并将其传递给小部件，以便它知道当控件数据的各种组件时该怎么做由用户选择。IE 控件将理解但在模型上生成的对象。如果数据足够静态，则不必严格调用模型，这可能会在初始化时传入。

希望有帮助，只是我的看法。

# java - JPA 错误：不应映射 ID 类

> ID：11215745
> 
> 赞同：0
> 
> 时间：2012-06-26T20:52:27.577
> 
> 标签：java, jpa

我的 JPA 代码在 eclipse Helios 中编译良好，在生产中运行良好。但是在较新版本的 Eclipse 中，使用 javax.persistence.* 包中的注释 @IdClass 时出现错误“ID 类不应被映射”。

```
@Entity
@IdClass(RetailLocationPK.class)  // Generates "ID class should not be mapped" error
@Table(name="loc_rtl_loc")
public class RetailLocation implements Serializable {
    @Id
    @Column(name="organization_id")    
    private int organizationId;

    @Id
    @Column(name="rtl_loc_id")
    private int rtlLocId;
...
} 
```

然后在 RetailLocationPK.java 我有：

```
@Embeddable
public class RetailLocationPK implements Serializable {
    //default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;
    @Column(name="organization_id")
    private int organizationId;

    @Column(name="rtl_loc_id")
    private int rtlLocId;

    public RetailLocationPK() {
    }
    ...
} 
```

最后，在 persistence.xml 中，我有：

```
<persistence-unit name="taxPu" transaction-type="JTA">
    <class>tbss.persist.RetailLocation</class>
    <class>tbss.persist.RetailLocationPK</class>
    ...
</persistence-unit> 
```

我暂时关闭了错误通知，但为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:58:47.423

我不确定它不应该是，但`@IdClass`（不像`@EmbeddedId`）绝对不必是`@Embeddable`和映射`<class>`.

# php - CodeIgniter 路由和正则表达式

> ID：11215746
> 
> 赞同：1
> 
> 时间：2012-06-26T20:52:27.750
> 
> 标签：php, regex, codeigniter, routes

我正在尝试在 CodeIgniter 上创建一个匹配 3 个数字后跟连字符后跟任何内容的路由。到目前为止，我的运气为零。我尝试了以下方法：

```
$route['([0-9]+)-([a-zA-Z0-9]+)'] = 'product/index/$1';
$route['([0-9]+)([a-zA-Z0-9-]+)'] = 'product/index/$1';
$route['(:num)-(:any)'] = 'product/index/$1';
$route['([0-9]{3})-(:any)'] = 'product/index/$1';
$route['(\d{3})-(:any)'] = 'product/index/$1'; 
```

等等。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:08:51.537

*看起来 CodeIgniter 不使用标准正则表达式。*

*试试这些：*

1.  `(\d{3})\-.*`
2.  `(\d{3})-.*`
3.  `(\d{3})\-(:any)`
4.  `(\d{3})-(:any)`

*其中之一应该工作。*

*有关更多信息，请参阅* [http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:01:02.360

这可能是参数问题。也许你应该尝试：

```
$route['([0-9]+)-([a-zA-Z0-9]+)'] = 'product/index/$1/$2'; 
```

由于您要捕获 2 个变量，因此您似乎应该将它们都传递给函数。

# php - 使用 PHP 的 Jquery Mobile MYSQL 调用

> ID：11215747
> 
> 赞同：1
> 
> 时间：2012-06-26T20:52:31.943
> 
> 标签：php, jquery, mysql, jquery-mobile

我们目前正在使用 Jquery Mobile (1.1.0) 构建一个移动网站，并且正在使用多页模板。我们正在使用 PHP 调用 MYSQL 来获取动态内容，并且遇到了某个对象的障碍。尝试调用简单图像时，它不会显示。在查看源代码时，它显示了正确的图像文件名，但是它不显示。删除 Jquery Mobile 时，图像返回正常，所以我很肯定我们的变量是正确的。

下面的代码基本上就是我们用来调用和回显的代码。（`$data`是一个包含页面详细信息的数组）。

```
<div data-role="page" id="page">

<div data-role="header" data-position="fixed" class="header">
<div> PHONE NUMBER GOES HERE</div>
</div>

<div data-role="content">

    <div class="logo">
            <a href="index.php" title="#"><img src="img/logo.png" /></a>
    </div>

        <h1>Page Title</h1>
        <p>:: <span><?php echo $data['img']; ?></span> :: </p>
    </div>
</div> 
```

如前所述，此代码在页面源中产生结果，但在它输出的实际页面上产生结果`<span> :: :: </span>`。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:56:41.897

尝试：`<img src="image_location/<?php echo '.$data['img'].'; ?>"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:59:23.240

将PHP代码放在里面

```
<div data-role="page" id="page">
// php code here
<!-- All the HTML goes here -->
</div><!-- End of #page --> 
```

它需要使用 jQuery AJAX 调用加载页面内容。在这种情况下，外部的任何代码`<div data-role="page" id="page">`都不会在 AJAX 调用中执行。

# sqlanywhere - Sybase SQL Anywhere 10 - 记录 SQL 语句

> ID：11215752
> 
> 赞同：1
> 
> 时间：2012-06-26T20:53:06.850
> 
> 标签：sqlanywhere, sybase-asa

有谁知道 Sybase ASA 9 / Sybase SQL Anywhere 10 中记录其执行的 SQL 语句的机制？

我有一个 Web 应用程序由于一些明显丢失的数据而出现异常，但一切看起来都很好。

如果我们能够记录有问题的陈述，我们可能会整理好事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T02:56:02.130

看看[`-zr`服务器开关](http://dcx.sybase.com/index.html#1001/en/dbdaen10/da-zr-database-dbengine.html)。您还可以查看[sa_server_option](http://dcx.sybase.com/index.html#1001/en/dbrfen10/rf-sa-server-option-system-sysproc.html)系统过程以在服务器运行时更​​改设置。

# sql-server-2008-r2 - SQL Server 2008 R2“用户登录失败”使用远程连接

> ID：11215753
> 
> 赞同：0
> 
> 时间：2012-06-26T20:53:14.120
> 
> 标签：sql-server-2008-r2, dynamics-crm, workflow-foundation-4

> **可能重复：**
> [我使用什么字符串连接到 SQL Server？](https://stackoverflow.com/questions/11192258/what-string-do-i-use-to-connect-to-an-sql-server)

我正在尝试使用 C# 中的自定义 CRM 工作流活动在本地 SQL Server 2008 R2 上远程执行作业。但是，当我运行工作流程时（使用设计为在我们的域中具有“所有访问权限”的用户名和密码，会发生以下错误：

> 工作流因错误而暂停：未处理的异常：Microsoft.SqlServer.Management.Common.ConnectionFailureException：
> 无法连接到服务器 hbssql2008.hbsys.com。
> 在 Microsoft.SqlServer.Management.Common.ConnectionManager.Connect()
> 在 ExecuteSQLJob.ExecuteSQLJob.Execute(CodeActivityContext context)
> 在 System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor 执行器, BookmarkManager bookmarkManager)
> 在 System.Activities.Runtime.ActivityExecutor .ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor 执行器, BookmarkManager 书签管理器, Location resultLocation)
> 
> 内部异常：System.Data.SqlClient.SqlException：用户“hbsProcessAD”登录失败。
> 在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔型 breakConnection）
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
> 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist（SqlConnection owningObject，TimeoutTimer 超时，SqlConnectionString connectionOptions，String newPassword，Boolean redirectedUserInstance）
> 在 System.Data.SqlClient.SqlInternalConnectionTds..ctor（DbConnectionPoolIdentity 标识，SqlConnectionString connectionOptions，对象 providerInfo，字符串 newPassword，
> System.Data.SqlClient.SqlConnectionFactory.CreateConnection（DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池，DbConnection owningConnection）
> 在 System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection（DbConnection owningConnection，DbConnectionPool 池，DbConnectionOptions 选项）的SqlConnection owningObject，布尔重定向用户实例）
> 在 System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)

这是我加载的自定义活动：

```
namespace ExecuteSQLJob
{
    [CrmWorkflowActivity("A test activity to run SQL Jobs")]
    public sealed class ExecuteSQLJob : System.Activities.CodeActivity
    {

        #region Inputs
        [Input("Job Name")]
        [Default("BMS_ExtractTransformLoad")]
        public InArgument<String> JobName { get; set; }

        [Input("Server Connection")]
        [Default("-----")]
        public InArgument<String> ServerName { get; set; }

        [Input("User Name")]
        [Default("-----")]
        public InArgument<String> UserName { get; set; }

        [Input("Password")]
        [Default("-----")]
        public InArgument<String> Password { get; set; }
        #endregion

        protected override void Execute(CodeActivityContext context)
        {
            Server server = new Server(ServerName.Get(context));
            try
            {
                //Create server connection
                server.ConnectionContext.LoginSecure = false;
                server.ConnectionContext.Login = UserName.Get(context);
                server.ConnectionContext.Password = Password.Get(context);
                server.ConnectionContext.Connect();
                //Find and execute the Job
                Job job = server.JobServer.Jobs[JobName.Get(context)];
                job.Start();
            }
            finally
            {
                //Close out of the server (if it managed to connect)
                if (server.ConnectionContext.IsOpen)
                {
                    server.ConnectionContext.Disconnect();
                }
            }
        }
    }
} 
```

此外，我已按照[本网站](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)的所有说明进行操作，但无济于事。

**谢谢你的帮助！**

# automated-tests - 如何在 WatiN 测试中发送箭头键？

> ID：11215755
> 
> 赞同：1
> 
> 时间：2012-06-26T20:53:20.917
> 
> 标签：automated-tests, watin

我有一个 WatiN 测试，我想通过在文本字段中发送向下箭头来触发日期选择器。我似乎在任何地方都找不到如何在 WatiN 测试中发送向下箭头。我需要通过 Document.Runscript 运行一段 javascript 吗？

谢谢，马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:42:40.107

我正在使用[SendKeys](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)类：

```
System.Windows.Forms.SendKeys("{DOWN}"); 
```

如果您想使用 javascript，[这](https://stackoverflow.com/questions/596481/simulate-javascript-key-events/596580#596580)可能会有所帮助。

# c# - C# SAPI 可以说 SSML 字符串吗？

> ID：11215761
> 
> 赞同：4
> 
> 时间：2012-06-26T20:53:44.563
> 
> 标签：c#, speech, sapi, text-to-speech, ssml

我在我的 C# WPF 项目中实现了一个 TTS。

以前，我使用 System.Speech.Synthesis 命名空间中的 TTS 说话。讲话内容为 SSML 格式（Speech Synthesizer Markup Language，支持自定义语速、语音、强调），如下所示：

```
<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><prosody rate="x-fast">hello world. This is a long sentence speaking very fast!</prosody></speak> 
```

但不幸的是，System.Speech.Synthesis TTS 存在内存泄漏问题，正如我[在 .Net Speech.Synthesizer 中的内存泄漏问题中提到的那样？](https://stackoverflow.com/questions/10707187/memory-leak-in-net-speech-synthesizer).

所以我决定使用 SAPI COM 组件。我可以轻松地让 SAPI 说出纯文本内容。但后来我继续尝试让它说 SSML 字符串，我失败了。代码如下：

```
//Initialize TTS instance

SpeechLib.SpVoiceClass tts = new SpeechLib.SpVoiceClass();

//Generate SSML string

string textToSpeak = "hello world speak Extra Fast.";
PromptBuilder pb = new PromptBuilder();
pb.StartStyle(new PromptStyle(PromptRate.ExtraFast));
pb.AppendText(textToSpeak);
pb.EndStyle();

ssmlString = pb.ToXml();    //ssmlString = @"<speak version=""1.0"" .... 

//Speak!

tts.Speak(ssmlString, SpeechLib.SpeechVoiceSpeakFlags.SVSFParseSsml); 
```

代码的重要部分是

```
tts.Speak(ssmlString, SpeechLib.SpeechVoiceSpeakFlags.SVSFParseSsml); 
```

它使用[SpeechVoiceSpeakFlags 枚举](http://msdn.microsoft.com/en-us/library/ms720892%28v=vs.85%29.aspx)来指定 TTS 说话行为。我尝试了几种标志组合，但没有一个能成功说出 SSML 内容。

特别是，上面的代码还会引发以下异常：

> System.Runtime.InteropServices.COMException 未处理
> Message="Exception from HRESULT: 0x80045003"
> Source="Interop.SpeechLib" ErrorCode=-2147201021 StackTrace: 在 SpeechLib.SpVoiceClass.Speak(String Text, SpeechVoiceSpeakFlags Flags) 在 SpeechSynthesisMemLeakTest.Program.Test2() 在 D:\Proj\TestSolutions\CSharp_Quick_Apps\SpeechSynthesisMemLeakTest\Program.cs：第 60 行 SpeechSynthesisMemLeakTest.Program.Main(String[] args) 在 D:\Proj\TestSolutions\CSharp_Quick_Apps\SpeechSynthesisMemLeakTest\Program.cs：第 17 行在 Microsoft 的 System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)。 VisualStudio.HostingProcess.HostProc.RunUsersAssembly() 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart() InnerException：

谁能告诉我如何正确使用该标志说出 SSML 内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T19:15:27.743

您使用的是什么 TTS 引擎/语音？Microsoft TTS 引擎绝对支持使用您正在使用的代码的 SSML；但是，其他语音/引擎可能不支持 SSML。

错误 0x80045003 是 SPERR_UNSUPPORTED_FORMAT（调用者指定了不受支持的格式），这让我相信您需要使用不同的 TTS 引擎（支持 SSML）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T00:45:32.360

改用此标志

```
tts.Speak(ssmlString, SpeechLib.SpeechVoiceSpeakFlags.SVSFIsXML); 
```

测试使用

> *   语音库 5.4
> *   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Speech.dll

# bash - BASH - 如何检查多个文件中的重复电子邮件地址？

> ID：11215763
> 
> 赞同：1
> 
> 时间：2012-06-26T20:53:53.960
> 
> 标签：bash, email, split, unique, chunks

我目前正在从事一个需要向大量电子邮件地址发送电子邮件的项目。因此，我试图避免与服务提供商限制电子邮件等有关的任何“临时”故障。

我的计划是获取电子邮件地址的初始列表并将其分成更小的（切碎的）列表，以便它们可以以交错的方式安排。由于发送电子邮件的敏感性，我想确保在任何截断列表中不存在重复的电子邮件地址。有没有办法通过 bash 做到这一点？

旁注，我 100% 确定主列表中的所有电子邮件地址都是唯一的，由于用于组成列表的查询的性质，我想确保，我的脚本砍掉了主列表，没有在切碎的列表中创建重复的电子邮件地址的缺陷。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:59:44.210

您可以通过 cat （临时）将切碎的文件放在一起，并使用 sort --unique 删除重复项 - 然后检查结果是否与原始文件一样多：

```
cat original_list | wc -l 
```

和

```
cat list_part* | sort --unique | wc -l 
```

如果结果相同，则没有重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:56:59.013

尝试

```
 cat *.txt | sort | sort -u -c 
```

鉴于您的文件名以 .txt 结尾。第一个排序命令对所有电子邮件地址进行排序。第二个排序命令检查没有两个连续的行相等，并在另一种情况下引发错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:22:14.187

### 问题

您需要对唯一地址进行排序，然后将有序列表拆分为块。

### 解决方案

鉴于以下假设：

1.  您的电子邮件存储在名为**emails_xxxx.txt**的文件中。（注意：您可以为它们命名任何您喜欢的名称，但是一组易于使用的合理文件名将使您的生活更简单。）
2.  每行包含一个地址。

你可以用一个短管道来处理这个问题。*排序*将接受一个 glob 模式或多个文件参数（例如来自*xargs*），因此您可以避免“无用的 cat 使用”。然后，您将输出通过管道传输到*split*中，您可以在其中控制分块的各个方面。例如：

```
sort --unique emails_*.txt |
split --numeric-suffixes \
      --lines=200 \ 
      --suffix-length=4 \
      --verbose 
```

这会将已排序/过滤的行拆分为最多 200 行的块，并使用适合批处理的数字扩展名命名每个块。您可以调整线条和后缀长度以满足您的要求。

### 样本输出

```
creating file `x0000'
creating file `x0001' 
```

# r - 如何在 R 中向 ggplot 箱线图添加垂直线

> ID：11215765
> 
> 赞同：5
> 
> 时间：2012-06-26T20:54:07.483
> 
> 标签：r, colors, ggplot2, line, boxplot

我正在根据这些数据绘制箱线图：

```
MY_LABEL     MY_REAL     MY_CATEGORY
1 [POS]       .56            POS
1 [POS]       .57            POS
1 [POS]       .37            POS
2 [POS]       .51            POS
1 [sim v]     .65            sim v
... 
```

我正在使用ggplot2：

```
ggplot( data=myDF, aes( x=MY_LABEL, y=MY_REAL, fill=MY_CATEGORY ) ) +
    scale_colour_manual( values=palette ) +
    coord_flip() + 
    geom_boxplot( outlier.size = 0 ) 
```

这很好用，并按字段对箱线图进行分组`MY_CATEGORY`： ![在此处输入图像描述](../Images/32c39eff070048f66f33b181e36f434e.png)

我想做两件事：

1）为了提高这个情节的清晰度，我想在各个块之间添加分隔符，即 between `POS`and `sim v`， between `sim v`and`C`等（参见情节中丑陋的红线）。我一直在挣扎`geom_vline`，没有运气。或者，我想在块之间添加空格。

2）如果我以灰度打印此图，我无法区分不同的块。我正在尝试使用以下方法强制使用不同的调色板：

```
scale_colour_manual( values=c("black","darkgray","gray","white") ) 
```

同样，没有运气，情节根本没有改变。

你会建议做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T21:26:17.500

这对你有用吗？

```
require(ggplot2)
mtcars$cyl2<- ifelse(mtcars$cyl > 4, c('A'), c('B')) 
p <- ggplot(mtcars, aes(factor(cyl), mpg))
p + geom_boxplot() + facet_grid(. ~ cyl2, scales = "free", space = "free") 
```

会给这样的东西， ![bbb](../Images/0709bc8a343a20d1acd7a6ca30cf4e65.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T23:33:35.803

没有人覆盖水平线路线，所以我想我会添加它。不知道为什么`geom_vline()`不适合你。这是我所做的（选择使用 Eric Fail 的方法）：

```
require(ggplot2)
p <- ggplot(mtcars, aes(factor(cyl), mpg))
p <- p + geom_boxplot(aes(fill=factor(cyl))) + coord_flip()
p <- p + geom_vline(xintercept=c(1.5,2.5))
p 
```

这里只有三个箱线图，但在玩耍时，ggplot 似乎将它们放置在整数位置。只需弄清楚您想要在 (nth) 之后的哪一行，然后将 xintercept 参数放在`n+0.5`该行的位置即可。您显然可以根据自己的喜好更改粗细和颜色：只需在 xintercept 位之后添加一个`size=width`and 。`colour="name"`

顺便说一句，`geom_vline()`无论是 before 还是 after ，似乎都对我有用`coord_flip()`。我觉得这违反直觉。

* * *

我不确定 bdemarest 是否正确，您需要名称来匹配类别名称。我认为问题在于您使用过`scale_colour_manual()`，如果您在使用时使用过，则`aes(..., colour=var)`适用`fill=var`。因此，您需要`scale_fill_manual`. 在上面的基础上，我们可以添加：

```
p <- p + scale_fill_manual(values=c("black","gray","white"))
p 
```

请注意，我没有为要匹配的颜色定义任何因子名称。我认为颜色只是根据它们的顺序应用于您的因子水平，但我可能是错的。

* * *

以上所有的最终结果：

![圆柱箱线图](../Images/fe422a17ae5a87956ffb65ccf2c466ca.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:36:47.400

要更改填充颜色，您需要一个命名的值向量。名称需要与 y 轴类别名称完全匹配。

```
scale_fill_manual(values=c("POS"="black", "sim v"="gray50",
                           "C"="gray80", "sim t"="white")) 
```

要分离 y 轴类别，请尝试`facet_grid()`.

```
facet_grid(factor(MY_CATEGORY) ~ ., drop=TRUE) 
```

我不确定这是否可行，因为我没有您的数据来测试它。

# vim - 如何使 Vim GUI 选项卡菜单看起来像控制台选项卡菜单

> ID：11215767
> 
> 赞同：7
> 
> 时间：2012-06-26T20:54:38.090
> 
> 标签：vim, vi

当使用 tabnew 在控制台（终端）中的 vim 中打开多个文件时，我们将为每个文件获得一个选项卡式界面。我的问题是我们能否为 gvim(GUI) 获得相同的外观和感觉，而不是为每个文件提供真正的 GUI 选项卡式界面。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T21:05:49.540

```
:set guioptions-=e 
```

在命令行或

```
set guioptions-=e 
```

在你的`~/.vimrc`.

查看`:help guioptions`更多选项。

# android - 如何在 android 的画布上显示倒数计时器？

> ID：11215778
> 
> 赞同：0
> 
> 时间：2012-06-26T20:55:20.323
> 
> 标签：android, android-canvas

我正在制作一个简单的 android 应用程序，我想在画布上显示倒数计时器。我只想在游戏开始时倒数计时器从 60 秒开始并递减.....请有人建议我如何使用倒数计时器类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:11:04.527

如果您真正寻找它，有很多可用的文档：

```
// 60 second (60000ms) timer with ticks every second (1000ms)
new CountDownTimer(60000, 1000) {
    public void onTick(long millisUntilFinished) {
        mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
    }
    public void onFinish() {
        mTextField.setText("done!");
    }
}.start(); 
```

现在只需将 mTextField.setText() 行替换为可以更新 Canvas 的内容（或更新 Canvas 用于您的时间通知的变量，然后 invalidate() Canvas 以显示更新）。

尽管我相信这是不言自明的，但当调用 onFinish() 时，CountDownTimer 已达到 0 并完成倒计时。

# android - 如何将 Osmdroid 设置为永不过期？

> ID：11215782
> 
> 赞同：1
> 
> 时间：2012-06-26T20:55:29.863
> 
> 标签：android, osmdroid

我想设置 Osmdroid 以在离线模式下使用预取的图块。我下载了一个 ZIP 格式的区域。问题是 zip 文件的大小为 100 MB，这会降低应用程序的性能，并且在某些资源有限的设备中，应用程序会崩溃。我解压缩了文件，并将磁贴扩展名更改为 .tile，直到昨天一切正常。昨天 osmdroid 使所有磁贴都过期并删除了它们！我想知道有没有办法将 Osmdroid 设置为永不过期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T16:40:10.057

我建议使用 GEMF 格式而不是 ZIP。它是一种为在移动设备上进行高效渲染而设计的格式。如果您使用 Mobile Atlas Creator 并选择 GEMF 格式并像 zip 文件一样复制文件，它就可以工作。文件大小差别不大，但 Osmdroid 中的 GEMF 解码器需要的资源少得多，而且速度更快，尤其是在初始打开时比 zip 解码器。

# java - Google Web Toolkit 小部件中的 RTSP 流

> ID：11215784
> 
> 赞同：2
> 
> 时间：2012-06-26T20:55:40.040
> 
> 标签：java, c++, eclipse, gwt, rtsp

全部，

我想知道是否可以将 RTSP 流引入 Google Web Toolkit 应用程序。如果有人这样做了，如果您能描述一下您在 GWT 中是如何做到的以及您使用了哪些 jar 或其他文件，我将不胜感激。

谢谢，

英里/小时

# javascript - 在javascript中使用数字和字母计算个位数

> ID：11215787
> 
> 赞同：0
> 
> 时间：2012-06-26T20:56:12.457
> 
> 标签：javascript, numbers, counting

> **可能重复：**
> [将数字转换为可能的最短字符串，同时保持唯一性](https://stackoverflow.com/questions/2557501/convert-a-number-to-the-shortest-possible-character-string-while-retaining-uniqu)

我想计算一些东西，我只有一个数字来报告结果，所以我想用字母表示 > 9 的数字。例如

```
1 => 1
5 => 5
10 => A
30 => U
55 => u   // I may have an off-by-one error here -- you get the idea
>61 => z  // 60 will be more than enough, so I'll use z to mean "at least 62" 
```

使用 javascript 最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:01:35.203

这是执行此操作的众多方法之一：

```
function num2letter(num) {
    if( num > 61) return "z";
    if( num < 0) return num;
    return "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[num];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:10:10.743

我认为 base 36 就足够了：

```
function oneDigit(n) {
    var BASE=36;
    if (n >= BASE-1) { n = BASE-1; }
    return n.toString(BASE);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:20:43.977

另一种方法：

```
function parse(x)
{
    if(x<10)return x;
    else if(x<36)return String.fromCharCode(x+55).toUpperCase();
    else if(x<62)return String.fromCharCode(x+29).toLowerCase();
    else return "z";
} 
```

还有这个小测试：

```
var res="";
for(var a=-10;a<70;a++)res+=a+" -> "+parse(a)+"\n";
alert(res); 
```

还有一个小提琴：http: [//jsfiddle.net/nD59z/4/](http://jsfiddle.net/nD59z/4/)

同样的方式，但字符较少且难以理解：

```
function parse(x)
{
    return x<10?x:(x<36?String.fromCharCode(x+55).toUpperCase():(x<62?String.fromCharCode(x+29).toLowerCase():"z"));
} 
```

# vba - 文本中的 VBA 选择案例循环

> ID：11215790
> 
> 赞同：1
> 
> 时间：2012-06-26T20:56:18.433
> 
> 标签：vba, excel

尝试遍历一系列单元格并根据另一个单元格中的文本值为它们分配标签。因此，如果单元格 J2 =“此文本”，则单元格 A2 =“此标签”

截至目前，我不断收到运行时错误号 424，说明需要对象

```
Private Function getPhase(ByVal cell As Range) As String
Select Case cell.Text
    Case "Text1"
        getPhase = "Label1"
    Case "Text2"
        getPhase = "Label2"
End Select
End Function

Sub setPhase()
Dim cycle As Range
Dim phase As Range

Set cycle = Range("J2:J10")
Set phase = Range("A2:A10")

For Each cell In phase.Cells
    phase.Text = getPhase(cycle)
Next cell

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T06:00:34.480

你已经得到了你的答案 :) 让我在我的帖子中做一些解释 :)

你不能使用这个。

```
phase.Text = getPhase(cycle) 
```

`.Text`是**只读**属性。即你不能写入它，而只能从中读取。你必须使用`.Value`

其次，如果您从同一行中选取值，则不需要定义第二个范围。您可以随时使用我们的`.Offset`财产。看到这个

```
Option Explicit

Sub setPhase()
    Dim rng As Range, phase As Range

    Set phase = Sheets("Sheet1").Range("A2:A10")

    For Each rng In phase
        rng.Value = getPhase(rng.Offset(, 9))
    Next
End Sub

Function getPhase(ByVal cl As Range) As String
    Select Case cl.Value
        Case "Text1"
            getPhase = "Label1"
        Case "Text2"
            getPhase = "Label2"
    End Select
End Function 
```

`Select Case cell.Text`由于您只是从中阅读，因此也没有任何问题。但是，使用总是好的`.Value`。原因是`.Value`属性返回单元格的实际值，而`.Text`属性返回显示在屏幕上的文本。在更高版本的 Excel 中，文本的限制约为 8k 个字符。`.Value`另一方面，最多可以存储 32k 个字符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T21:26:42.693

我改变了循环。这假设两个范围的长度相同

```
Function getPhase(ByVal cell As Range) As String

   Select Case cell.Value
    Case "Text1"
        getPhase = "Label1"
    Case "Text2"
        getPhase = "Label2"
  End Select

End Function

Sub setPhase()
Dim cycle As Range
Dim phase As Range

Set cycle = ThisWorkbook.Sheets("myexample").Range("J2:J10")
Set phase = ThisWorkbook.Sheets("myexample").Range("A2:A10")

Dim i As Integer
For i = 1 To phase.Cells.Count
    phase.Cells(i).Value = getPhase(cycle.Cells(i))
Next i

End Sub 
```

...或者正如 siddharth 建议的那样使用公式。

或者通过 VBA 执行公式：

```
Sub setPhase()

Dim phase As Range
Set phase = Excel.ThisWorkbook.Sheets("Sheet1").Range("A2:A10")
phase.Value = "=IF(J2=""Text1"",""Label1"",IF(J2=""Text2"",""Label2"",""""))"

End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T21:40:27.320

这是我的版本：

```
Private Function getPhase(ByVal cell As Range) As String
    Select Case cell.Text
        Case "Text1"
            getPhase = "Label1"
        Case "Text2"
            getPhase = "Label2"
    End Select
End Function

Sub setPhase()
    Dim cycle As Range
    Dim phase As Range

    Set cycle = ActiveSheet.Range("b2:b10")
    Set phase = ActiveSheet.Range("A2:A10")

    For Each cell In phase.Cells
        cell.Value = getPhase(cycle.Cells(cell.Row, 1))
    Next cell

End Sub 
```

# sql - how to compare money in sql server

> ID：11215796
> 
> 赞同：1
> 
> 时间：2012-06-26T20:56:31.697
> 
> 标签：sql, sql-server-2005

I need use case condition in sql server, the datatype is money, the condition is money>= 100, here is my code:

```
 insert into table1 
(  Col1,
   Col2,
   Col3
) 

select 
 ColA,
 ColB,
 case ColC when ColC >=100 then 'Y' else 'N' end 
```

I got an error: Incorrect syntax near '>'. How do I compare money in sql? Thanks for your help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T20:57:46.267

Use

```
case when ColC >=100 then 'Y' else 'N' end 
```

You are mingling the [two forms of the `CASE` expression](http://msdn.microsoft.com/en-us/library/ms181765.aspx) (searched and simple). You would only use `CASE ColC ...` when all the match expressions are to have an `=` comparison on them (and then don't specify the operator explicitly).

# javascript - 某些事件不适用于 FF？

> ID：11215797
> 
> 赞同：0
> 
> 时间：2012-06-26T20:56:36.223
> 
> 标签：javascript, firefox, onkeyup

当我的网页正在加载时，我使用 javascript 来检测哪个浏览器正在访问该网站并调整加载的文本大小。这在 Firefox 上一直有效，没有任何问题。

但是，在页面上，我有两个文本输入相互对齐（因此无法修改底部的输入，以在禁用文本框时绕过文本变暗）。当用户在框中键入时，想法是文本末尾有一个星号。我的代码如下。它加载了 onkeyup 和 onchange 函数。这在 Chrome 和 Safari 中完美运行，但无法在 Firefox 上运行。

任何想法为什么？

```
function textcopy(form) {
    var text = consoleText.value;
    consoleText2.value = text + "*";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:29:57.523

替换`consoleText2.value = text+"*";`为`document.getElementById("consoleText").value = text+"*";`

# tfs - 将 NCover 或 Instrumentation .Coverage 文件导入回 TFS 2010。因此它会显示在构建摘要报告中

> ID：11215803
> 
> 赞同：1
> 
> 时间：2012-06-26T20:56:45.407
> 
> 标签：tfs, nunit, mstest, code-coverage, ncover

我的项目使用 NUnit 框架进行了测试，特别是 2.5.9。我的构建过程当前创建 nunit xml 文件，然后我将它们转换为 .trx 并使用 mstest.exe 将它们发布到 TFS。现在，我需要向 TFS 报告代码覆盖率并显示在构建摘要报告中。我可以将 NCover 结果创建为 xml，并希望我可以将 NCover 结果包含到 NUnit xml 中，然后将其转换为 .TRX 格式，然后导入到 TFS，但这不起作用。但是，根据 vsts.xsd，.TRX 文件看起来确实可以接受一些代码覆盖率信息，但我不确定它是文件引用还是其他指标。

我还可以使用以下示例使用 Visual Instrumentation 创建 .Coverage 结果文件：http: [//social.msdn.microsoft.com/Forums/en-US/vststest/thread/c7cd8dab-fed9-4fc4-9773-bdb047ad5958](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/c7cd8dab-fed9-4fc4-9773-bdb047ad5958)

所以，我知道我可以将单元测试发布到 TFS。问题是我可以将 ncover 或 .coverage 结果发布回 TFS 2010 吗？

# r - knitr 和 UTF8 编码

> ID：11215808
> 
> 赞同：7
> 
> 时间：2012-06-26T20:57:03.680
> 
> 标签：r, latex, knitr

几天前，我开始编写德语 R-Script。`knit()`不幸的是，以下代码块在我创建文档时不起作用：

```
@    
<<>>=
äö <- ordered(c(1,3,2,2))
@ 
```

谁能帮我解决这个问题？

PS：我正在使用Linux。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T00:00:16.887

由于您使用的是 Linux，所以事情应该很容易。这可能只是一个 LaTeX 问题；最重要的是，您是否指定了文档的编码？例如`\usepackage[utf8]{inputenc}`。这适用于我在 Ubuntu 下。

```
\documentclass[ngerman]{article}
\usepackage[utf8]{inputenc}
\begin{document}

<<>>=
äö <- ordered(c(1,3,2,2))
@

\end{document} 
```

顺便说一句，在 R 对象名称中使用非 ASCII 字符可能不是一个好主意，尽管它们也可以工作。

# ruby-on-rails - 如何在 Ruby on Rails 中创建动态登录按钮？

> ID：11215810
> 
> 赞同：0
> 
> 时间：2012-06-26T20:57:15.763
> 
> 标签：ruby-on-rails, login, forms-authentication, embedded-ruby

任何人都知道如何在 Ruby on Rails 中为应用程序制作登录按钮？

我假设重定向将类似于：（我正在使用当前元素）

```
<%= link_to 'Log In', index_path, :class => 'btn btn-primary'%> 
```

但是，这只会创建一个重定向到索引的按钮，无论“用户”是否填写了所需的“电子邮件”和“密码”字段。我假设我需要一个条件来检查这些字段是否已填写，并且我假设一个数据库表用于包含正确密码的已接受电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:34:18.257

实际上有几种方法可以处理身份验证和用户角色，我建议从 Devise 开始搜索。在您了解它们的管理方式之后，您可以尝试使用数据库关系或会话哈希。

学习愉快：

```
https://github.com/plataformatec/devise 
```

# c# - 如何使用泛型 与实体集

> ID：11215812
> 
> 赞同：1
> 
> 时间：2012-06-26T20:57:42.553
> 
> 标签：c#, .net, linq-to-sql, entity

我有一个选项需要在三种类型的 EntitySets 上运行；但是，每种类型的数据是相同的。Linq-to-SQL 正在创建这三种类型以匹配我数据库中的一些“补间”表。

有没有办法像我在下面那样使用通用 EntitySet 类型？

```
private EntitySet<T> GetClientHorizontal(EntitySet<T> clientHorizontal) {} 
```

这是为了解决下面的冗余问题。

```
private EntitySet<LeafHorizontal> 
   GetClientLeafHorizontal(EntitySet<LeafHorizontal> clientLeafHorizontal) { }

private EntitySet<BayHorizontal>
   GetClientBayHorizontal(EntitySet<BayHorizontal> clientBayHorizontal) { }

private EntitySet<SideliteHorizontal>
   GetClientSideliteHorizontal(
      EntitySet<SideliteHorizontal> clientSideliteHorizontal) { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:21:17.753

如果您说这三个类几乎相同 - 那么您可以创建一个具有共同成员的接口或基类：

```
interface IHorizontal
{
  int SuperValue { get; set; }
} 
```

然后你需要从这个接口继承 LeafHorizo​​ntal、BayHorizo​​ntal 和 SideliteHorizo​​ntal 类：

```
public partial class LeafHorizontal : IHorizontal { ... }
public partial class BayHorizontal : IHorizontal { ... }
public partial class SideliteHorizontal : IHorizontal { ... } 
```

之后，您可以创建通用方法：

```
private EntitySet<T> GetClientBayHorizontal(EntitySet<T> clientBayHorizontal)  where T : IHorizontal 
{
    clientBayHorizontal.SuperValue++;
} 
```

# mysql - 像 '%c' 不返回任何行

> ID：11215814
> 
> 赞同：0
> 
> 时间：2012-06-26T20:57:50.633
> 
> 标签：mysql

我有一个表，其中每一行都是字典中的一个单词。

我一直在使用以下查询来获取以某个字符 (c) 开头的所有单词：

```
SELECT * FROM words WHERE word LIKE 'c%' 
```

该查询工作正常。但是当我反转它以获得以字符结尾的单词时：

```
SELECT * FROM words WHERE word LIKE '%c' 
```

它不返回任何行。

我究竟做错了什么？我检查了右边的空间填充，但事实并非如此。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:16:59.360

显然，当我添加单词时，表格“\r\n”被添加到每个单词的末尾。我在导出数据以显示 Juergen D 时发现了这一点。

谢谢你们的帮助。

# tridion - 元数据中的关键字是如何存储的？

> ID：11215817
> 
> 赞同：2
> 
> 时间：2012-06-26T20:57:55.777
> 
> 标签：tridion, tridion-2011

我正在研究将外部数据同步到类别和关键字列表的选项。

我有一个元数据字段，其中一个`states`字段使用名为美国州的类别。

当我使用一个简单的 XSLT 组件模板 ( `<xsl:copy-of select="." />`) 预览我的组件时，我可以看到：

```
<tcm:Content>
...
</tcm:Content>
<tcm:Metadata><Metadata xmlns="http://createandbreak.net/schema/generic">
<states>California</states>
<states>New York</states>
</Metadata></tcm:Metadata> 
```

当我更新关键字和预览时，我可以看到更新的值。

```
<tcm:Content>
...
</tcm:Content>
<tcm:Metadata><Metadata xmlns="http://createandbreak.net/schema/generic">
<states>Californias</states>
<states>New York</states>
</Metadata></tcm:Metadata> 
```

这是伟大的。看起来我们*不需要*同步组件（打开、编辑和保存）来使用更新的关键字。这是一个安全的假设吗？

**如果我更新关键字，是否需要更新使用它的组件才能发布具有更新值的组件演示文稿？**

使用内容搬运器移动组件时我是否也需要小心？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:05:38.540

不，您不需要手动为这些关键字字段执行任何操作以确保“Content Porter”安全。Tridion 将您的关键字字段到关键字定义（在类别中）的链接存储为所谓的托管链接（TCM URI）。

您在 XSLT 中看不到此值的原因与 Tridion 传统上在 WebDAV 中公开关键字的方式有关：它在那里隐藏了 TCM URI，而只是公开了所选关键字的值。由于关键字值在其类别中必须是唯一的，这将始终允许您在需要时查找正确的 TCM URI。

但是在导出时（通常当您使用 API 访问内容时），您应该检索带有 TCM URI 的组件 XML。检查您的编程语言的 API 文档，了解您需要为此指定哪个 Filter/ReadOption。

# java - 将时间戳转换为天数并返回会导致不同的日期

> ID：11215818
> 
> 赞同：3
> 
> 时间：2012-06-26T20:57:56.453
> 
> 标签：java, calendar, timestamp

我需要存储没有时区信息的年月日信息。
这是一些代码：

```
private static void test() {
    Calendar cal = Calendar.getInstance();
    cal.setTimeZone(TimeZone.getTimeZone("US/Pacific"));
    System.out.println("Before: " + cal.get(DAY_OF_MONTH));
    //
    long datestamp = toDatestamp(cal.getTimeInMillis());
    long timestamp = toTimestamp(datestamp);
    cal.setTimeInMillis(timestamp);
    System.out.println("After: " + cal.get(DAY_OF_MONTH));
}

private static long toTimestamp(long datestamp) {
    return TimeUnit.DAYS.toMillis(datestamp);
    // return datestamp * DS_MULT;
}

private static long toDatestamp(long timestamp) {
    return TimeUnit.MILLISECONDS.toDays(timestamp);
    // return timestamp / DS_MULT;
}

// hours * minutes * seconds * milliseconds
private static long DS_MULT = 24 * 60 * 60 * 1000; 
```

有两种方法，其中一种被注释掉了。但结果是一样的：

```
Before: 26
After: 25 
```

为什么转换后日期会改变？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:24:47.487

通过转换为天并返回毫秒，您可以有效地将日历重新设置为当天的午夜。但是，当您以毫秒为单位设置时间时，它被解释为 UTC 时间（大致相当于 GMT），因此您将日历重置为午夜*UTC*。因为时区“美国/太平洋”与 UTC 有负偏移，所以它显示为前一天。

您可以通过在测试结束时添加另一行来看到这一点：

```
cal.setTimeZone(TimeZone.getTimeZone("UTC"));
System.out.println("UTC: " + cal.get(DAY_OF_MONTH)); 
```

你应该看到：

```
UTC: 26 
```

# decoder - VIN 解码：车型年份

> ID：11215819
> 
> 赞同：2
> 
> 时间：2012-06-26T20:57:58.417
> 
> 标签：decoder, vin

我正在尝试编写一个简单的 VIN (ISO 3779) 解码器：制造商和型号年份。不过，我在解码模型年份时遇到了一些问题。根据[维基百科](http://en.wikipedia.org/wiki/Vehicle_Identification_Number)：

`For passenger cars, and for multipurpose passenger vehicles and trucks with a gross vehicle weight rating of 10,000 lb (4,500 kg) or less, if position 7 is numeric, the model year in position 10 of the VIN refers to a year in the range 1980–2009\. If position 7 is alphabetic, the model year in position 10 of VIN refers to a year in the range 2010–2039.`

我的汽车的 VIN（2012 年款）包含以下信息：

```
VSS---1--C-------
12345678901234567 
```

制造商：SEAT，车型年份：1982（一些在线 VIN 解码器给我 1982，其他一些给我 2012）

我怎样才能修改我的解码器，这样我才能做到这一点，而不是做一个讨厌的`if (Manufacturer == "SEAT") Year += 30;`黑客？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:16:30.983

阅读第 7 和第 10 位后，这里有一些 PHP 代码：

```
$year = date_1980_2009( $position_10 );  # use your current date function...

if ( preg_match( "/^[A-Z]$/i", $position_7 ) ) $year += 30;  # add 30 years if 7 is alphabetic 
```

话虽如此，你的车似乎没有遵守规则。例外情况需要编码例外——这不是黑客。对不起。

# jquery - 使用 jquery 模态对话框动态构建表单

> ID：11215823
> 
> 赞同：0
> 
> 时间：2012-06-26T20:58:10.880
> 
> 标签：jquery, jquery-ui

`Edit`我有一个在有人单击按钮时构建的表单。在 [**Fiddle**](http://jsfiddle.net/UtNaa/42/)中试试这个。

我不想隐藏表格并显示丑陋的表单，而是想将其放入一个 jquery 模态对话框中，其中包含表单。

我尝试在编辑功能之外添加它，但它似乎不起作用：

```
var dialogOpts={
    modal:true,
    autoOpen: false,
    resizable:false,
    width: 625
}
var $dialogform = $('#editform').dialog(dialogOpts); //init dialog    

$('#editbutton').click(function(e) {
    $dialogform.dialog('open');
}); 
```

有任何想法吗？注意：如果您使用小提琴，则必须删除`mydiv.show()/hide()`调用以及用于显示表单而不是表格的 if/else。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:17:15.627

[试试这个](http://jsfiddle.net/UtNaa/58/)

真的没什么好说的了。我会解释，但是a）我必须运行，b）代码为我做。

# ruby - 如何更改在 TextWrangler 中运行的 Ruby 版本？

> ID：11215824
> 
> 赞同：0
> 
> 时间：2012-06-26T20:58:11.210
> 
> 标签：ruby, textwrangler

我的系统（Mac OS X 10.7.4）上安装了 Ruby 1.9.2。

```
ruby -v
ruby 1.9.2p180 (2011-02-18 revision 30909) [x86_64-darwin10.6.0] 
```

当我使用 TextWrangler 运行以下简单代码时：

> 把 RUBY_VERSION

输出为“1.8.7”。

如何让 TextWrangler 运行较新的版本？谢谢。

# ruby-on-rails-3 - Rails 3 不在公用文件夹中查找资产 On Show 方法

> ID：11215825
> 
> 赞同：6
> 
> 时间：2012-06-26T20:58:15.797
> 
> 标签：ruby-on-rails-3, routing, get, paperclip

每当我尝试使用 image_tag 构建器显示图像时，在我的显示视图中，rails 不会在我的显示视图内的公共文件夹中查找图像...

例如：

```
<%= image_tag "thumbnails/fish.jpg" %> 
```

会产生这个：

```
ActionController::RoutingError (No route matches [GET] "/uploads/thumbnails/fish.jpg"): 
```

我正在为我的上传模型使用回形针 Gem，出于安全原因，**我将上传保存到与公用文件夹不同的文件夹**，是的，这个显示视图确实发生在上传控制器中......

在我的上传模型中，我使用这一行将上传内容保存到非公共文件夹：

```
has_attached_file :upload,  :path => ":rails_root/:class/:id/:basename.:extension",
                            :url => ":rails_root/:class  /:id/:basename.:extension" 
```

耙路线：

```
upload GET    /uploads/:id(.:format)                                                                 {:action=>"show", :controller=>"uploads"}
       PUT    /uploads/:id(.:format)                                                                 {:action=>"update", :controller=>"uploads"}
       DELETE /uploads/:id(.:format)                                                                 {:action=>"destroy", :controller=>"uploads"}
              /download/:id(.:format)                                                                {:controller=>"uploads", :action=>"download"} 
```

**编辑** 注意：如果我明确地制作一个 img 标签并将 src 指向我的图像，它在我的显示视图上工作正常，所以我认为这不是权限问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T19:49:11.473

答案相当简单，我不敢相信 Rails 如此挑剔，但我需要在路径的开头包含一个正斜杠，如下所示：

```
"thumbnails/fish.jpg" 
```

变成

```
"/thumbnails/fish.jpg" 
```

我仍然很好奇为什么这只是非索引视图的问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T05:28:16.367

您可能需要将此行更改为 true：

```
config.serve_static_assets = false 
```

在 environment/*.rb 文件中（例如 development.rb）。

或者我已经看到这是相关目录的权限问题，因此目录上的 CHMOD 777 可能会解决它/为您指明正确的方向。

这是关于类似问题的[SO 票](https://stackoverflow.com/questions/7106820/rails-3-1-actioncontrollerroutingerror-no-route-matches-get-assets-rails)

# heroku - 供应商捆绑路径被添加到我的博客

> ID：11215826
> 
> 赞同：1
> 
> 时间：2012-06-26T20:58:28.260
> 
> 标签：heroku, jekyll-extensions

我不知道这些博客文章来自哪里。我在 Heroku 上运行 Jekyll，但不确定 /vendor/bundle 文件来自哪里。当我在本地运行站点时，这些不存在。站点是[m2m.io](http://m2m.io/)，然后点击博客链接。相关代码片段：

```
<li class="thisBlog"><h4><span style="float:left;">18 May 2009 &nbsp; </span> &raquo; <a href="/vendor/bundle/ruby/1.9.1/gems/jekyll-0.11.0/test/source/2009/05/18/empty-tags.html"><div class="brand-color" style="float:left;">Some Tags</div></a></h4></li>

<li class="thisBlog"><h4><span style="float:left;">18 May 2009 &nbsp; </span> &raquo; <a href="/vendor/bundle/ruby/1.9.1/gems/jekyll-0.11.0/test/source/2009/05/18/empty-tag.html"><div class="brand-color" style="float:left;">A Tag</div></a></h4></li>

<li class="thisBlog"><h4><span style="float:left;">12 Mar 2009 &nbsp; </span> &raquo; <a href="/vendor/bundle/ruby/1.9.1/gems/jekyll-0.11.0/test/source/2009/03/12/hash-%231.html"><div class="brand-color" style="float:left;">Hash</div></a></h4></li>

<li class="thisBlog"><h4><span style="float:left;">27 Jan 2009 &nbsp; </span> &raquo; <a href="/vendor/bundle/ruby/1.9.1/gems/jekyll-0.11.0/test/source/2009/01/27/empty-category.html"><div class="brand-color" style="float:left;">Category in YAML</div></a></h4></li>

<li class="thisBlog"><h4><span style="float:left;">27 Jan 2009 &nbsp; </span> &raquo; <a href="/vendor/bundle/ruby/1.9.1/gems/jekyll-0.11.0/test/source/2009/01/27/empty-categories.html"><div class="brand-color" style="float:left;">Category in YAML</div></a></h4></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:57:59.830

add

```
exclude:  [ Gemfile, Gemfile.lock, Procfile, vendor, gems] 
```

in your _config.yml

# git - Upstart - 导航到目录，git pull，然后运行 daemontools

> ID：11215828
> 
> 赞同：1
> 
> 时间：2012-06-26T20:58:28.883
> 
> 标签：git, upstart

我正在尝试创建一个新贵 conf，在本地 git 存储库上执行“git pull”，然后启动 daemontools“svscan”。它们需要按此顺序完成，因为守护进程依赖于在 git 存储库中拥有最新版本的文件。

我试过了：

```
start on runlevel [12345]
respawn
pre-start script
  cd /scripts
  git pull
end script
exec /command/svscanboot 
```

并且：

```
start on runlevel [12345]
respawn
chdir /scripts
exec git pull
exec /command/svscanboot 
```

但这些都不起作用。我正在寻找有关如何告诉新贵导航到另一个目录然后在运行第三个命令之前在那里执行命令的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T02:09:04.673

你可以试试这个（我必须把我的 git pull 包在 sudo 中才能工作？）：

```
start on runlevel [12345]

respawn

pre-start script
  export HOME="/home/user"
  cd $HOME/scripts/
  exec sudo -u user git pull
end script

script
  export HOME="/home/user"
  cd $HOME/commands/
  exec sudo -u user svscanboot >> /var/log/svscanboot.log 2>&1
end script 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-03T06:11:52.927

而不是使用 sudo -u，你可以 setuid

```
start on runlevel [12345]

respawn

setuid user

pre-start script
  cd /home/user/scripts/
  exec git pull
end script

script
  cd /home/user/commands/
  exec svscanboot >> /var/log/svscanboot.log 2>&1
end script 
```

# iphone - 带有 UIButton.layer.shadowColor 的生涩滚动

> ID：11215831
> 
> 赞同：0
> 
> 时间：2012-06-26T20:58:45.013
> 
> 标签：iphone, sdk, calayer, uitableview

我有一个带有很多按钮的 UITableView 标题。我用它在按钮上创建阴影：

```
 Buttona.layer.shadowColor = [UIColor blackColor].CGColor;
    Buttona.layer.shadowOpacity = 0.7f;
    Buttona.layer.shadowOffset = CGSizeMake(10.0f, 10.0f);
    Buttona.layer.shadowRadius = 7.0f;
    Buttona.layer.masksToBounds = NO;

    Buttonb.layer.shadowColor = [UIColor blackColor].CGColor;
    Buttonb.layer.shadowOpacity = 0.7f;
    Buttonb.layer.shadowOffset = CGSizeMake(2.0f, 3.0f);
    Buttonb.layer.shadowRadius = 2.0f;
    Buttonb.layer.masksToBounds = NO; 
```

... 以此类推 Buttonc 到 Buttonf。

所有这些按钮都使桌子上的滚动变得生涩。

我应该摆脱效果，只用阴影对按钮进行 Photoshop 处理，还是我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:58:25.950

我有同样的问题，解决方案是

```
[view.layer setShadowPath:[[UIBezierPath bezierPathWithRect:CGRectMake(0, 0, view.frame.size.width, view.frame.size.height)] CGPath]]; 
```

# hibernate - 休眠搜索：double 上的方面不返回结果

> ID：11215841
> 
> 赞同：1
> 
> 时间：2012-06-26T20:59:49.383
> 
> 标签：hibernate, search, lucene, hibernate-search, facet

我正在尝试在我的应用程序中采用 Hibernate Search，但我坚持通过范围方面限制搜索结果，以根据价格范围限制结果。

我的代码（片段）：

Product.java 包含：

```
 @Field(analyze = Analyze.NO, store = Store.YES, bridge = @FieldBridge(impl = DoubleBridge.class))
@NumericField()
private double price = 0.0; 
```

我的搜索处理程序，构建价格方面：

```
 FacetingRequest priceFacetingRequest = builder.facet()
            .name( "price" )
            .onField("price")
            .range()
            .below(10.0)
            .from(11.0).to(24.0)
            .from(25.0).to(49.0)
            .from(50.0).to(99.0)
            .from(100.0).to(199.0)
            .from(200.0).to(499.0)
            .from(500.0).to(999.0)
            .from( 1000.0 ).to( 1499.0 )
            .above( 1500.0 )
            .excludeLimit()
            .createFacetingRequest();

    facetManager.enableFaceting(priceFacetingRequest); 
```

最后，在列出结果之前，通过以下方面限制结果：

```
facetManager.getFacetGroup( "price" ).selectFacets( rangeFacet ); 
```

我已经尝试了所有可能的 rangeFacets，但没有一个返回任何结果。除了 range() 方面，我还有不同的文本方面，它们的操作相同，但会正常过滤结果。此外，facetManager 重新报告 facetRange 结果的结果，但在调用 fullTextQuery.list() 时仍然尝试它会导致 0 结果。

我错过了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:25:56.650

我最终写了一个 FieldBridge 将双精度转换为字符串；

```
public class CoreDoubleBridge implements FieldBridge
{

@Override
public void set(String s, Object o, Document document, LuceneOptions luceneOptions)
{
    if (o instanceof Double)
    {
        NumericField field = new NumericField(s, Field.Store.YES, true);
        field.setDoubleValue((Double)o);
        document.add(field);

        Field fieldForFacet = new Field(s + ".facet", Double.toString((Double)o), Field.Store.YES, Field.Index.NOT_ANALYZED);
        document.add(fieldForFacet);
    }
} 
```

}

并用以下方式注释了价格属性：

```
@Field(analyze = Analyze.NO, store = Store.YES)
@FieldBridge(impl = CoreDoubleBridge.class)
private Double price = 0.0; 
```

我希望这可以帮助其他一些可怜的混蛋寻找正确处理 Double 值的解决方案；）

# c - 如果 exec() 失败怎么办？

> ID：11215842
> 
> 赞同：1
> 
> 时间：2012-06-26T21:00:06.510
> 
> 标签：c, linux, unix, ipc, fork

假设我们有一个代码做这样的事情：

```
int pipes[2];
pipe(pipes);
pid_t p = fork();
if(0 == p)
{
   dup2(pipes[1], STDOUT_FILENO);
   execv("/path/to/my/program", NULL);
   ...
}
else
{
//... parent process stuff
} 
```

正如你所看到的，它正在创建一个管道，分叉并使用管道来读取子进程的输出（我不能`popen`在这里使用，因为我还需要子进程的 PID 用于其他目的）。

问题是，如果在上面的代码中`execv`失败了怎么办？我应该调用 exit() 还是 abort()？据我所知，这些函数关闭了打开的文件描述符。既然`fork`-ed进程继承了父进程的文件描述符，是不是意味着父进程使用的文件描述符会变得不可用呢？

**UPD**

我想强调的是，问题不在于 exec() 加载的可执行文件失败，而是 exec 本身，例如，如果第一个参数引用的文件未找到或不可执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:20:14.123

您应该使用`exit(int)`参数的（低字节），因为父进程可以使用`waitpid()`. 这使您可以在父进程中适当地处理错误。根据您的程序的用途，您可能想要使用`_exit`而不是`exit`. 不同之处在于它`_exit`不会运行注册的函数，`atexit`也不会刷新 stdio 流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:11:28.247

大约有十几个原因`execv()`可能会失败，您可能希望以不同的方式处理每一个。

子失败不会影响父文件描述符。实际上，它们是参考计数的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:22:22.153

You should call `_exit()`. It does everything `exit()` does, but it avoids invoking any registered `atexit()` functions. Calling `_exit()` means that the parent will be able to get your failed child's exit status, and take any necessary steps.

# javascript - 如何在 .click() 上取消绑定另一个 jQuery 函数？

> ID：11215845
> 
> 赞同：2
> 
> 时间：2012-06-26T21:00:22.483
> 
> 标签：javascript, jquery

我有这个脚本可以在滚动时将我的菜单栏修复到浏览器上。这里没有什么真正需要改变的（按原样工作）。但是，您可能需要它...

```
var div = $('#wizMenuWrap');
var editor = $('#main_wrapper');
var start = $(div).offset().top;

$(function fixedPackage(){   
    $.event.add(window, "scroll", function() {
        var p = $(window).scrollTop();
        $(div).css('position',((p)>start) ? 'fixed' : 'static');
        $(div).css('top',((p)>start) ? '0px' : '');

        //Adds TOP margin to #main_wrapper (required)
        $(editor).css('position',((p)>start) ? 'relative' : 'static');
        $(editor).css('top',((p)>start) ? '88px' : '');
    }); 
}); 
```

现在讨论手头的问题。我有另一个调用模式弹出窗口的脚本函数（它再次正常工作）。但是，当我在模式打开时滚动页面时，从 UI 的角度来看，它并不光滑。所以我想在调用下面的模态脚本时禁用上面的脚本。换句话说，当我单击打开模式弹出窗口时，上面的脚本应该不起作用。

```
$(function () {

var setUp = $('.setupButton');

// SHOWS SPECIFIED VIEW

$(setUp).click(function () {        
    $('#setupPanel').modal('show');
    //PREVENTS PACKAGE SELECT FIXED POSITION ON SCROLL
    $(setUp).unbind('click',fixedPackage);
});

}) 
```

正如您在上面看到的，我尝试取消绑定滚动功能（第一个代码片段），但这是不正确的。

这两个脚本位于两个独立的 js 库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:11:29.107

我强烈不同意你应该绑定和解除绑定事件。没必要！滚动事件中的一些逻辑来检查模式是否打开应该可以解决这个问题：

```
$(function fixedPackage(){   
    $(window).bind("scroll", function() {

        // if the modal is displayed, do nothing
        if ($('#setupPanel').is(':visible'))
            return;

        // -- existing code here --
    }); 
}); 
```

这样，如果模态元素可见，代码就会停止在它所在的位置。隐藏元素后，代码将继续像以前一样工作，而无需在其他脚本中管理事件状态……令人困惑！

另外，正如其他一些评论中提到的，不要使用`$.event.add`，使用公共 API 方法`bind`

**文档**

*   jQuery `is`- [http://api.jquery.com/is/](http://api.jquery.com/is/)
*   jQuery`visible`选择器 - [http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)
*   jQuery `bind`- [http://api.jquery.com/bind/](http://api.jquery.com/bind/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:05:51.803

当您将 jquery 对象存储到 var 中时，您可以直接调用函数：

```
var setUp = $('.setupButton');
var div = $('#wizMenuWrap');
var editor = $('#main_wrapper');

setUp.click(...);
seTup.unbind(...);

editor.css(...);

div.css(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:03:23.160

尝试

```
 $(setUp).unbind('click').die('click') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T21:05:32.847

您需要做的就是将脚本更改为：

```
$(function () {

var setUp = $('.setupButton');

// SHOWS SPECIFIED VIEW

$(setUp).bind('click',function () {        
    $('#setupPanel').modal('show');
    //PREVENTS PACKAGE SELECT FIXED POSITION ON SCROLL
    $(setUp).unbind('click');
});

}) 
```

如 jQuery 文档中所述，`Event handlers attached with .bind() can be removed with .unbind()`. 有关绑定和取消绑定的更多信息：

[.bind()](http://api.jquery.com/bind/)

[.unbind()](http://api.jquery.com/unbind/)

# python - Python 等价于 Java 的 compareTo()

> ID：11215851
> 
> 赞同：16
> 
> 时间：2012-06-26T21:00:59.787
> 
> 标签：python, oop, class, object

我正在用 Python (3.2) 做一个项目，我需要比较用户定义的对象。我习惯于使用 Java 中的 OOP，在`compareTo()`类中定义一个方法来指定该类的自然顺序，如下例所示：

```
public class Foo {
    int a, b;

    public Foo(int aa, int bb) {
        a = aa;
        b = bb;
    }

    public int compareTo(Foo that) {
        // return a negative number if this < that
        // return 0 if this == that
        // return a positive number if this > that

        if (this.a == that.a) return this.b - that.b;
        else return this.a - that.a;
    }
} 
```

我对Python中的类/对象相当陌生，所以我想知道定义类的自然顺序的“pythonic”方式是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T21:05:19.227

您可以实现特殊方法`__lt__`等`__gt__`来实现自定义类型的默认运算符。[在语言参考](http://docs.python.org/py3k/reference/datamodel.html#object.__lt__)中查看更多关于它们的信息。

例如：

```
class Foo:
    def __init__ (self, a, b):
        self.a = a
        self.b = b

    def __lt__ (self, other):
        if self.a == other.a:
            return self.b < other.b
        return self.a < other.b

    def __gt__ (self, other):
        return other.__lt__(self)

    def __eq__ (self, other):
        return self.a == other.b and self.b == other.b

    def __ne__ (self, other):
        return not self.__eq__(other) 
```

或者正如评论中的 stranac 所说，您可以使用[`total_ordering`](http://docs.python.org/py3k/library/functools.html#functools.total_ordering)装饰器来节省一些输入：

```
@functools.total_ordering
class Foo:
    def __init__ (self, a, b):
        self.a = a
        self.b = b

    def __lt__ (self, other):
        if self.a == other.a:
            return self.b < other.b
        return self.a < other.b

    def __eq__ (self, other):
        return self.a == other.b and self.b == other.b 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T21:04:54.033

Python 也有类似的功能：[`__cmp__()`](http://docs.python.org/reference/datamodel.html#object.__cmp__).

我现在看到您在询问 Python 3。 [他们的“最新消息”建议](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)：

```
cmp() 函数应该被视为消失，而 __cmp__() 特殊方法
不再支持。使用 __lt__() 进行排序，使用 __eq__() 和 __hash__()，以及
根据需要进行其他丰富的比较。（如果你真的需要 cmp() 功能，
您可以使用表达式 (a > b) - (a < b) 作为 cmp(a, b) 的等价物。）

```

所以看起来你总是可以做类似的事情

```
def compareTo(self, that):
    return ((self > that) - (self < that)) 
```

或者

```
@classmethod
def compare(cls, a, b):
    return ((a > b) - (a < b)) 
```

实施后`__gt__()`和`__lt__()`.

然后你会使用它：

```
f1 = Foo(1,1)
f2 = Foo(2,2)

f1.compareTo(f2)
Foo.compare(f1,f2) 
```

这将为您提供等效的功能。

# php - 从网页创建分层 PSD 或 TIFF（PHP 或 JS）

> ID：11215861
> 
> 赞同：2
> 
> 时间：2012-06-26T21:01:31.910
> 
> 标签：php, javascript, gd, tiff, psd

有谁知道我应该使用哪个编程库在 JPG 上放置一个透明的 PNG 并为 photoshop 导出一个分层文件？像 TIF 或 PSD 或任何可以在 Photoshop 中加载的东西。

我知道 GD 库可用于输出到屏幕或非分层文件，但我想知道是否有任何格式可以输出到正确的完整层...

最好是带有 JS 的客户端，但如果这是我唯一的选择，我可以做 PHP 服务器端。我在这个主题上做了一些谷歌搜索，很难真正格式化搜索。

任何想法都会非常感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T09:03:58.167

我认为您将需要一个使用 PHP 和[ImageMagick](http://php.net/manual/en/book.imagick.php)的服务器端解决方案来创建分层 tiff 文件。

还可以查看[使用 ImageMagick 的图层示例](http://www.imagemagick.org/Usage/layers/)

然后您可以使用`setImageFormat("tiff")`将最终文件保存为分层 tiff 文件。

我希望这会有所帮助。

# git - 创建 github 存储库的“副本”

> ID：11215864
> 
> 赞同：5
> 
> 时间：2012-06-26T21:01:36.663
> 
> 标签：git, github, repository, duplicates, clone

我看到了类似问题的答案，我确信我可能对 Git 和 Github 术语不够熟悉，无法知道它们是否适用于我的问题。我需要做的是克隆一个现有的 Github 远程存储库（另一个人的用户名下的私有存储库，我有贡献者访问权限）并在我的帐户下创建一个新的私有远程存储库。现有的 repo 用户将对 repo 进行重大更改、删除和重新推送，然后他们希望我克隆并创建一个副本，以便我们可以在我的用户下继续从 repo 工作。如果可能的话，我想用 repo 保存提交历史。

我已经在本地克隆，但似乎无法弄清楚如何将其推送到并非源自原始用户的新远程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-15T01:09:13.603

使用 GitHub 界面时，最简单的方法是[fork 一个 repo](https://help.github.com/articles/fork-a-repo/)。

或者，如以下在 GitHub 上[复制存储库](https://help.github.com/articles/duplicating-a-repository/)文章中所建议的，您可以通过以下 shell 命令实现 repo 复制：

1.  创建存储库的裸克隆：

    ```
    git clone --bare https://github.com/exampleuser/old-repository.git 
    ```

2.  镜像推送到新存储库：

    ```
    cd old-repository.git
    git push --mirror https://github.com/exampleuser/new-repository.git 
    ```

3.  删除您在步骤 1 中创建的临时本地存储库：

    ```
    cd ..
    rm -rf old-repository.git 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T21:05:16.730

您是否无法通过在 github 上[分叉](https://help.github.com/articles/fork-a-repo)存储库然后克隆并处理它来完成您想要做的事情？

这也保留了两个存储库之间的关系，并允许您在以后选择将它们的更改合并到您的存储库中，反之亦然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T21:12:37.197

我们必须有更多的细节，但很有可能你试图做的事情是不必要的。

所有者很可能可以通过创建一个分支并使该分支看起来像他们想要的那样来实现他们的目标，如果这是所需的最终目标，可以用它替换 master。他们可以在不破坏所有现有历史的情况下做到这一点。

或者，您可以分叉存储库。但是，请记住，如果他们要完全改写历史，那么如果这是一个目标，那么整合你在分叉上所做的工作可能会变得很困难。

您还可以通过删除当前远程`git remote rm origin`并创建一个指向您帐户下创建的存储库的新远程来推送您克隆的副本。但是，如果原始存储库完全更改，那么将很难集成在您的“副本”上完成的任何工作。

# python - 使用金字塔的谷歌应用引擎出错

> ID：11215865
> 
> 赞同：1
> 
> 时间：2012-06-26T21:01:39.253
> 
> 标签：python, google-app-engine, pyramid

使用 pyramid_appengine 我的项目工作正常，但是当我部署到 GAE 时出现此错误：

```
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 187, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 225, in _LoadHandler
    handler = __import__(path[0])
  File "/base/data/home/apps/s~muncompy/v3.359898035587494190/muncompy/__init__.py", line 36, in <module>
    application = make_app()
  File "/base/data/home/apps/s~muncompy/v3.359898035587494190/muncompy/__init__.py", line 32, in make_app
    config.scan()
  File "/base/data/home/apps/s~muncompy/v3.359898035587494190/pyramid/config/__init__.py", line 912, in scan
    ignore=ignore)
  File "/base/data/home/apps/s~muncompy/v3.359898035587494190/venusian/__init__.py", line 189, in scan
    __import__(modname)
  File "/base/data/home/apps/s~muncompy/v3.359898035587494190/muncompy/conftest.py", line 6, in <module>
    from google.appengine.tools import dev_appserver_index
ImportError: No module named tools 
```

为什么缺少来自 google.appengine 的模块工具的任何想法？

# r - R - 用一个滞后项预测简单的 dyn 模型

> ID：11215868
> 
> 赞同：1
> 
> 时间：2012-06-26T21:01:54.203
> 
> 标签：r, dynamic, regression, forecasting

我正在尝试使用 R 中的 dyn 库预测一个简单的滞后时间序列回归。 [这个问题](https://stackoverflow.com/questions/4856555/iteratively-forecasting-dyn-models "这个问题")是一个有用的起点，但我遇到了一些奇怪的行为，希望有人能解释一下。

这是一个最小的工作示例。

```
library(dyn)

# Initial data
y.orig <- arima.sim(model=list(ar=c(.9)),n=10)
x1.orig <- rnorm(10)
data <- cbind(y=y.orig, x1=x1.orig)

# This model, with a single lag term, predicts from t=2
mod1 <- dyn$lm(y ~ lag(y, -1), data)
y.new <- window(y.orig, end=end(y.orig) + c(5,0), extend=TRUE)
newdata1 <- cbind(y=y.new)
predict(mod1, newdata1)

# This one, with a lag plus another predictor, predicts from t=1 on
mod2 <- dyn$lm(y ~ lag(y, -1) + x1, data)
y.new <- window(y.orig, end=end(y.orig) + c(5,0), extend=TRUE)
x1.new <- c(x1.orig, rnorm(5))
newdata2 <- cbind(y=y.new, x1=x1.new)
predict(mod2, newdata2) 
```

为什么两者之间有区别？谁能建议如何使用 dyn 预测我的“mod1”？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:05:28.447

两者都`mod1`开始`mod2`预测`t=2`。的预测向量`mod2`开始于`t=1`但它的`NA`。关于为什么一个从 2 开始，另一个从 1 开始，请注意`predict`将公式右侧的变量合并在一起，在这种情况下，`mod1`我们看到`lag(y, -1)`从 t=2 开始，因为`y`从 t=1 开始。另一方面，`mod2`当我们合并时`lag(y, -1)`，`x1`我们得到一个从 t=1 开始的序列（因为`x1`从 t=1 开始）。试试这个不涉及 dyn：

```
> start(with(as.list(newdata1), merge.zoo(lag(y, -1))))
[1] 2
> start(with(as.list(newdata2), merge.zoo(lag(y, -1), x1)))
[1] 1 
```

如果我们想`predict(mod1, newdata1)`从 t=1 开始，我们可以添加我们自己的 Intercept 列并删除默认截距以避免重复。这将迫使它从 1 开始，因为现在 RHS 有一个从 1 开始的系列：

```
data.b <- cbind(y=y.orig, x1=x1.orig, Intercept = 1)
mod.b <- dyn$lm(y ~ Intercept + lag(y, -1) - 1, data.b)

newdata.b <- cbind(Intercept = 1, y = y.new)
predict(mod.b, newdata.b) 
```

关于第二个问题，如果要预测，请`mod1`使用`fitted(mod1)`.

似乎还有一些关于它基本上是如何工作的第三个问题，所以也许这可以澄清它。dyn 所做的只是对齐公式中的时间序列，然后`lm`可以`predict`照常运行。例如，如果我们使用创建一个对齐的模型框架，`dyn$model.frame`那么其他所有事情都可以使用普通`lm`和普通来完成，`predict`并且从那时`dyn`起不再涉及。以下与问题`mod1a`类似，只是它在对齐的模型框架上`mod1`运行普通。`lm`如果你理解`mod1a` `lm`and 它的`predict`then`mod1`和`predict`是相似的。

```
## mod1 and mod1a are similar

# from code in the question
mod1 <- dyn$lm(y ~ lag(y, -1), data = data)
mod1

# redo it using a plain lm by applying dyn to model.frame
mf <- dyn$model.frame(y ~ lag(y, -1), data = data)
mod1a <- lm(y ~ `lag(y, -1)`, mf)
mod1a

## the two predicts below are similar

# the 1 ensures its an mts rather than ts but is otherwise not used
newdata1 <- cbind(y=y.new, 1) 
predict(mod1, newdata1)

newdata1a <- cbind(1, `lag(y, -1)` = lag(y.new, -1))
predict(mod1a, newdata1a) 
```

# android - Android 应用 - Droid Pro 无法播放视频

> ID：11215870
> 
> 赞同：0
> 
> 时间：2012-06-26T21:02:05.910
> 
> 标签：android, video

我创建了一个简单的应用程序，它可以选择播放一些远程托管的视频。我使用了来自 Android 开发者文档示例的代码，它在各种设备上都能正常工作，但在 Droid Pro 上出现错误“抱歉，我们无法播放该视频”。如果出现编码或压缩问题，我尝试了其他来源的其他几个视频，但似乎都产生了相同的错误。

我们已经在 2 个不同的 Droid Pro 设备上进行了尝试，并且都出现了相同的错误。

所有视频都是 mp4，如上所述，在各种其他设备（三星 Galaxy SII、Nexus S、Droid 3、HTC 等）中都可以正常工作。

此外，我使用了 SDK 附带的 ApiDemos 中的 2 个示例（MediaPlayer_VideoDemo 和 VideoViewDemo），再次使用了几个不同的视频，这些示例显示相同的错误。

YouTube 应用确实会播放视频，所以我认为有办法做到这一点。

这是缩写代码（减去错误处理、进度反馈等）：

```
import android.app.Activity;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.VideoView;

    public class VideoActivity extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            VideoView videoView = new VideoView(this);
            setContentView(videoView);
            MediaController mediaController = new MediaController(this);
            mediaController.setAnchorView(videoView);
            Bundle extras = getIntent().getExtras();
            if (extras != null) {   
                String path = extras.getString("url");
                Uri video = Uri.parse(path);
                videoView.setMediaController(mediaController);
                videoView.setVideoURI(video);
                videoView.start();
            }
        }   
    } 
```

有什么建议么？蒂亚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T16:20:53.130

原来 Droid PRO 不会播放特定大小的视频（文件大小？尺寸？IDK）。通过将它们调整为 320x180（从 960x540），它们可以正常工作。

# django - 为什么在 Model.full_clean 中 clean_fields 在 clean 之前被调用？

> ID：11215871
> 
> 赞同：3
> 
> 时间：2012-06-26T21:02:08.570
> 
> 标签：django, django-models

`Model.full_clean`在, 之前`clean_fields`被调用是否有理由`clean`？在我的项目中，如果我可以先进行验证，然后再验证`clean_fields`内容，会更合理，例如在这种情况下：

```
class MyModel(models.Model):
    status = models.IntegerField(blank=False, null=False)

    def clean(self):
        if not self.status:
            self.status = 0 
```

改变这个顺序会有什么问题`full_clean`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T21:21:46.187

为什么会“更合理”？正如其名称所描述的，`clean_fields`旨在单独清理每个字段，而 的目的`clean`只是验证字段交互。例如，只有在设置了另一个字段时，一个字段才能为空等。`clean_fields`首先调用该方法以确保您可以实际验证这些交互；如果这些字段通常有错误，那么一起验证它们是没有意义的。

# android - 使用他们的 Google 帐户注册/登录用户？

> ID：11215874
> 
> 赞同：1
> 
> 时间：2012-06-26T21:02:20.820
> 
> 标签：android, oauth-2.0

我希望我的用户使用他们的 Google 帐户登录。

SwiftKey 和 Catch Notes 通过在他们的应用程序中打开一个 WebView 来实现。我不想那样做。我想使用 AccountManager。

团队任务中的​​免费任务使用它并轻松加载您的 Google 任务。官方的 Google 阅读器应用程序也使用它并加载您的 Google 阅读器供稿。

但我不想从谷歌获取用户的任何数据，除了他们的姓名、电子邮件等。我只想注册用户并轻松地重新登录。

如何使用 OAuth 令牌等注册它们？

我发现的所有示例要么使用 WebView，要么仅从 Google 加载数据（未注册）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T08:31:20.157

当我第一次问这个问题时，真的很难做到。您必须使用绝对不是为 Android 构建的 Google Java API。

但是现在有了 Google Play 服务，这个任务很容易做到。

任何人都可以点击以下链接：

[https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)

[https://developer.android.com/google/play-services/index.html](https://developer.android.com/google/play-services/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:50:28.593

Google I/O 2011 涵盖了使用 Google 帐户进行身份验证的 Android + App Engine。Android 客户端使用 AccountManager。这是[屏幕截图](http://bradabrams.com/wp-content/uploads/2011/05/image031.jpg)。

您可能想查看源代码中的[AccountsActivity](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-Android/src/com/cloudtasks/AccountsActivity.java)。

# sql - SQL 阶梯查询

> ID：11215878
> 
> 赞同：16
> 
> 时间：2012-06-26T21:02:47.540
> 
> 标签：sql, sql-server, sql-server-2012

我需要一些帮助来生成与所需阶梯输出匹配的 MS SQL 2012 查询。行按一个日期范围（帐户提交日期月份）汇总数据，列按另一个日期范围（付款日期月份）汇总数据

表 1：**帐户**跟踪为收款设置的帐户。

```
CREATE TABLE [dbo].[Accounts](
    [AccountID] [nchar](10) NOT NULL,
    [SubmissionDate] [date] NOT NULL,
    [Amount] [money] NOT NULL,
CONSTRAINT [PK_Accounts] PRIMARY KEY CLUSTERED (AccountID ASC))

INSERT INTO [dbo].[Accounts] VALUES ('1000', '2012-01-01', 1999.00)
INSERT INTO [dbo].[Accounts] VALUES ('1001', '2012-01-02', 100.00)
INSERT INTO [dbo].[Accounts] VALUES ('1002', '2012-02-05', 350.00)
INSERT INTO [dbo].[Accounts] VALUES ('1003', '2012-03-01', 625.00)
INSERT INTO [dbo].[Accounts] VALUES ('1004', '2012-03-10', 50.00)
INSERT INTO [dbo].[Accounts] VALUES ('1005', '2012-03-10', 10.00) 
```

表 2：**Trans**跟踪付款

```
CREATE TABLE [dbo].[Trans](
    [TranID] [int] IDENTITY(1,1) NOT NULL,
    [AccountID] [nchar](10) NOT NULL,
    [TranDate] [date] NOT NULL,
    [TranAmount] [money] NOT NULL,
CONSTRAINT [PK_Trans] PRIMARY KEY CLUSTERED (TranID ASC))

INSERT INTO [dbo].[Trans] VALUES (1000, '2012-01-15', 300.00)
INSERT INTO [dbo].[Trans] VALUES (1000, '2012-02-15', 300.00)
INSERT INTO [dbo].[Trans] VALUES (1000, '2012-03-15', 300.00)
INSERT INTO [dbo].[Trans] VALUES (1002, '2012-02-20', 325.00)
INSERT INTO [dbo].[Trans] VALUES (1002, '2012-04-20', 25.00)
INSERT INTO [dbo].[Trans] VALUES (1003, '2012-03-24', 625.00)
INSERT INTO [dbo].[Trans] VALUES (1004, '2012-03-28', 31.00)
INSERT INTO [dbo].[Trans] VALUES (1004, '2012-04-12', 5.00)
INSERT INTO [dbo].[Trans] VALUES (1005, '2012-04-08', 7.00)
INSERT INTO [dbo].[Trans] VALUES (1005, '2012-04-28', 3.00) 
```

这是所需的输出应该是什么样子

```
 *Total Payments in Each Month*
SubmissionYearMonth TotalAmount | 2012-01  2012-02  2012-03  2012-04 
--------------------------------------------------------------------
2012-01             2099.00     |  300.00   300.00   300.00     0.00
2012-02             350.00      |           325.00     0.00    25.00
2012-03             685.00      |                    656.00    15.00 
```

前两列将 Account.Amount 按月分组。

最后 4 列按月份对放置在当前行的给定月份的帐户的 Tran.TranAmount 求和。

我一直在处理的查询感觉很接近。我只是没有正确的滞后。这是我目前正在使用的查询：

```
Select SubmissionYearMonth, 
       TotalAmount,
       pt.[0] AS MonthOld0,
       pt.[1] AS MonthOld1,
       pt.[2] AS MonthOld2,
       pt.[3] AS MonthOld3,
       pt.[4] AS MonthOld4,
       pt.[5] AS MonthOld5,
       pt.[6] AS MonthOld6,
       pt.[7] AS MonthOld7,
       pt.[8] AS MonthOld8,
       pt.[9] AS MonthOld9,
       pt.[10] AS MonthOld10,
       pt.[11] AS MonthOld11,
       pt.[12] AS MonthOld12,
       pt.[13] AS MonthOld13

From (
       SELECT Convert(Char(4),Year(SubmissionDate)) + '-' + Right('00' + Convert(VarChar(2), DatePart(Month, SubmissionDate)),2) AS SubmissionYearMonth, 
       SUM(Amount) AS TotalAmount
       FROM   Accounts
       GROUP BY Convert(Char(4),Year(SubmissionDate)) + '-' + Right('00' + Convert(VarChar(2), DatePart(Month, SubmissionDate)),2)
     ) 
AS AccountSummary
OUTER APPLY
(
SELECT *
FROM (
       SELECT CASE WHEN DATEDIFF(Month, SubmissionDate, TranDate) < 13
                   THEN DATEDIFF(Month, SubmissionDate, TranDate)
                   ELSE 13
              END AS PaymentMonthAge,
              TranAmount
       FROM Trans INNER JOIN Accounts ON Trans.AccountID = Accounts.AccountID
       Where Convert(Char(4),Year(TranDate)) + '-' + Right('00' + Convert(VarChar(2), DatePart(Month, TranDate)),2)
             = AccountSummary.SubmissionYearMonth
       ) as TransTemp
       PIVOT (SUM(TranAmount)
              FOR PaymentMonthAge IN ([0],
                                      [1],
                                      [2],
                                      [3],
                                      [4],
                                      [5],
                                      [6],
                                      [7],
                                      [8],
                                      [9],
                                      [10],
                                      [11],
                                      [12],
                                      [13])) as TransPivot
) as pt 
```

它产生以下输出：

```
SubmissionYearMonth TotalAmount MonthOld0 MonthOld1 MonthOld2 MonthOld3 ...
2012-01             2099.00     300.00    NULL      NULL      NULL      ...
2012-02             350.00      325.00    300.00    NULL      NULL      ...
2012-03             685.00      656.00    NULL      300.00    NULL      ... 
```

至于列日期标题。我不确定这里最好的选择是什么。我可以添加一组额外的列并创建一个可以在结果报告中使用的计算值。

SQL小提琴：[http ://www.sqlfiddle.com/#!6/272e5/1/0](http://www.sqlfiddle.com/#!6/272e5/1/0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:57:47.473

由于您使用的是 SQL Server 2012，我们可以使用 Format 函数使日期更漂亮。无需按字符串分组。相反，我发现尽可能使用正确的数据类型很有用，并且只在显示上使用 Format 或 Convert （或者根本不使用，让中间层处理显示）。

在这个解决方案中，我任意假设最早的 TransDate 并从中提取，即该月的第一天。但是，可以很容易地用所需的开始日期的静态值替换该表达式，并且该解决方案将花费该时间和接下来的 12 个月。

```
With SubmissionMonths As
  (
  Select DateAdd(d, -Day(A.SubmissionDate) + 1, A.SubmissionDate) As SubmissionMonth
    , A.Amount
  From dbo.Accounts As A
  )
  , TranMonths As
  (
  Select DateAdd(d, -Day(Min( T.TranDate )) + 1, Min( T.TranDate )) As TranMonth
      , 1 As MonthNum
  From dbo.Accounts As A
    Join dbo.Trans As T
      On T.AccountId = A.AccountId
    Join SubmissionMonths As M
      On A.SubmissionDate >= M.SubmissionMonth
        And A.SubmissionDate < DateAdd(m,1,SubmissionMonth)
  Union All
  Select DateAdd(m, 1, TranMonth), MonthNum + 1
  From TranMonths
  Where MonthNum < 12
  )
  , TotalBySubmissionMonth As
  (
  Select M.SubmissionMonth, Sum( M.Amount ) As Total
  From SubmissionMonths As M
  Group By M.SubmissionMonth
  )
Select Format(SMT.SubmissionMonth,'yyyy-MM') As SubmissionMonth, SMT.Total
  , Sum( Case When TM.MonthNum = 1 Then T.TranAmount End ) As Month1
  , Sum( Case When TM.MonthNum = 2 Then T.TranAmount End ) As Month2
  , Sum( Case When TM.MonthNum = 3 Then T.TranAmount End ) As Month3
  , Sum( Case When TM.MonthNum = 4 Then T.TranAmount End ) As Month4
  , Sum( Case When TM.MonthNum = 5 Then T.TranAmount End ) As Month5
  , Sum( Case When TM.MonthNum = 6 Then T.TranAmount End ) As Month6
  , Sum( Case When TM.MonthNum = 7 Then T.TranAmount End ) As Month7
  , Sum( Case When TM.MonthNum = 8 Then T.TranAmount End ) As Month8
  , Sum( Case When TM.MonthNum = 9 Then T.TranAmount End ) As Month9
  , Sum( Case When TM.MonthNum = 10 Then T.TranAmount End ) As Month10
  , Sum( Case When TM.MonthNum = 11 Then T.TranAmount End ) As Month11
  , Sum( Case When TM.MonthNum = 12 Then T.TranAmount End ) As Month12
From TotalBySubmissionMonth As SMT
  Join dbo.Accounts As A
    On A.SubmissionDate >= SMT.SubmissionMonth
      And A.SubmissionDate < DateAdd(m,1,SMT.SubmissionMonth)
  Join dbo.Trans As T
    On T.AccountId = A.AccountId
  Join TranMonths As TM
    On T.TranDate >= TM.TranMonth
      And T.TranDate < DateAdd(m,1,TM.TranMonth)
Group By SMT.SubmissionMonth, SMT.Total 
```

[SQL 小提琴版本](http://www.sqlfiddle.com/#!6/272e5/54)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:34:10.770

以下查询几乎可以返回您想要的内容。您需要单独执行 to 操作。我只是将结果合并在一起：

```
 select a.yyyymm, a.Amount,
        t201201, t201202, t201203, t201204
 from (select LEFT(convert(varchar(255), a.submissiondate, 121), 7) as yyyymm,
              SUM(a.Amount) as amount
       from Accounts a
       group by  LEFT(convert(varchar(255), a.submissiondate, 121), 7) 
      ) a left outer join
      (select LEFT(convert(varchar(255), a.submissiondate, 121), 7) as yyyymm,
              sum(case when trans_yyyymm = '2012-01' then tranamount end) as t201201,
              sum(case when trans_yyyymm = '2012-02' then tranamount end) as t201202,
              sum(case when trans_yyyymm = '2012-03' then tranamount end) as t201203,
              sum(case when trans_yyyymm = '2012-04' then tranamount end) as t201204
       from Accounts a join
            (select t.*, LEFT(convert(varchar(255), t.trandate, 121), 7) as trans_yyyymm
             from trans t
            ) t
            on a.accountid = t.accountid
       group by LEFT(convert(varchar(255), a.submissiondate, 121), 7)
      ) t
      on a.yyyymm = t.yyyymm
 order by 1 
```

我得到一个 NULL，你在两个单元格中有一个 0.00。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:24:01.117

[Thomas](https://stackoverflow.com/users/198643/thomas)，我将您的回复作为我最终使用的以下解决方案的灵感。

我首先创建了一个 SubmissionDate、TranDate 交叉连接骨架日期矩阵，稍后我用它来连接 AccountSummary 和 TranSummary 数据。

生成的查询输出未按 TranDate 月格式化为列。相反，我使用 SQL Server Reporting Services 矩阵中的输出，并使用基于 TranSummaryMonthNum 列的列分组来获得所需的格式化输出。

[SQL 小提琴版本](http://www.sqlfiddle.com/#!6/272e5/59/0)

```
;
WITH 
    --Generate a list of Dates, from the first SubmissionDate, through today.
    --Note: Requires the use of: 'OPTION (MAXRECURSION 0)' to generate a list with more than 100 dates.
    CTE_AutoDates AS
    ( Select Min(SubmissionDate) as FiscalDate
      From Accounts
      UNION ALL
      SELECT DATEADD(Day, 1, FiscalDate)
      FROM CTE_AutoDates
      WHERE DATEADD(Day, 1, FiscalDate) <= GetDate()
    ),

    FiscalDates As
    ( SELECT FiscalDate,
             DATEFROMPARTS(Year(FiscalDate), Month(FiscalDate), 1) as FiscalMonthStartDate  
      FROM CTE_AutoDates
      --Optionaly filter Fiscal Dates by the last known Math.Max(SubmissionDate, TranDate)
      Where FiscalDate <= (Select Max(MaxDate)
                           From (Select Max(SubmissionDate) as MaxDate From Accounts
                                 Union All 
                                 Select Max(TranDate) as MaxDate From Trans
                                ) as MaxDates
                         )
    ),

    FiscalMonths as
    ( SELECT Distinct FiscalMonthStartDate 
      FROM FiscalDates
    ),

    --Matrix to store the reporting date groupings for the Account submission and payment periods.
    SubmissionAndTranMonths AS
    ( Select AM.FiscalMonthStartDate as SubmissionMonthStartDate,
             TM.FiscalMonthStartDate as TransMonthStartDate,
             DateDiff(Month, (Select Min(FiscalMonthStartDate) From FiscalMonths), TM.FiscalMonthStartDate) as TranSummaryMonthNum
      From   FiscalMonths AS AM
             Join FiscalMonths AS TM
             ON TM.FiscalMonthStartDate >= AM.FiscalMonthStartDate
    ),

    AccountData as
    ( Select A.AccountID, 
             A.Amount,
             FD.FiscalMonthStartDate as SubmissionMonthStartDate
      From   Accounts as A
           Inner Join FiscalDates as FD
             ON A.SubmissionDate = FD.FiscalDate
    ),

    TranData as
    ( Select T.AccountID,
             T.TranAmount,
             AD.SubmissionMonthStartDate,
             FD.FiscalMonthStartDate as TranMonthStartDate
      From   Trans as T
           Inner Join AccountData as AD
             ON T.AccountID = AD.AccountID
           Inner Join FiscalDates AS FD
             ON T.TranDate = FD.FiscalDate
    ),

    AccountSummaryByMonth As
    ( Select ASM.FiscalMonthStartDate,
             Sum(AD.Amount) as TotalSubmissionAmount
      From   FiscalMonths as ASM
           Inner Join AccountData as AD
             ON ASM.FiscalMonthStartDate = AD.SubmissionMonthStartDate
      Group By
             ASM.FiscalMonthStartDate
    ),

    TranSummaryByMonth As
    ( Select STM.SubmissionMonthStartDate,
             STM.TransMonthStartDate,
             STM.TranSummaryMonthNum,
             Sum(TD.TranAmount) as TotalTranAmount
      From   SubmissionAndTranMonths as STM
           Inner Join TranData as TD
             ON STM.SubmissionMonthStartDate = TD.SubmissionMonthStartDate
                AND STM.TransMonthStartDate = TD.TranMonthStartDate
      Group By
             STM.SubmissionMonthStartDate,
             STM.TransMonthStartDate,
             STM.TranSummaryMonthNum
    )

--#Inspect 1
--Select * From SubmissionAndTranMonths
--OPTION (MAXRECURSION 0)

--#Inspect 1 Results
--SubmissionMonthStartDate TransMonthStartDate TranSummaryMonthNum
--2012-01-01               2012-01-01          0
--2012-01-01               2012-02-01          1
--2012-01-01               2012-03-01          2
--2012-01-01               2012-04-01          3
--2012-02-01               2012-02-01          1
--2012-02-01               2012-03-01          2
--2012-02-01               2012-04-01          3
--2012-03-01               2012-03-01          2
--2012-03-01               2012-04-01          3
--2012-04-01               2012-04-01          3

--#Inspect 2
--Select * From AccountSummaryByMonth
--OPTION (MAXRECURSION 0)

--#Inspect 2 Results
--FiscalMonthStartDate TotalSubmissionAmount
--2012-01-01           2099.00
--2012-02-01           350.00
--2012-03-01           685.00

--#Inspect 3
--Select * From TranSummaryByMonth
--OPTION (MAXRECURSION 0)

--#Inspect 3 Results
--SubmissionMonthStartDate TransMonthStartDate TranSummaryMonthNum TotalTranAmount
--2012-01-01               2012-01-01          0                   300.00
--2012-01-01               2012-02-01          1                   300.00
--2012-01-01               2012-03-01          2                   300.00
--2012-02-01               2012-02-01          1                   325.00
--2012-02-01               2012-04-01          3                   25.00
--2012-03-01               2012-03-01          2                   656.00
--2012-03-01               2012-04-01          3                   15.00

Select STM.SubmissionMonthStartDate,
       ASM.TotalSubmissionAmount,
       STM.TransMonthStartDate,
       STM.TranSummaryMonthNum,
       TSM.TotalTranAmount
From   SubmissionAndTranMonths as STM
     Inner Join AccountSummaryByMonth as ASM
       ON STM.SubmissionMonthStartDate = ASM.FiscalMonthStartDate
     Left Join TranSummaryByMonth AS TSM
       ON STM.SubmissionMonthStartDate = TSM.SubmissionMonthStartDate
          AND STM.TransMonthStartDate = TSM.TransMonthStartDate
Order By STM.SubmissionMonthStartDate, STM.TranSummaryMonthNum
OPTION (MAXRECURSION 0)

--#Results
--SubmissionMonthStartDate TotalSubmissionAmount TransMonthStartDate TranSummaryMonthNum TotalTranAmount
--2012-01-01               2099.00               2012-01-01           0                  300.00
--2012-01-01               2099.00               2012-02-01           1                  300.00
--2012-01-01               2099.00               2012-03-01           2                  300.00
--2012-01-01               2099.00               2012-04-01           3                  NULL
--2012-02-01               350.00                2012-02-01           1                  325.00
--2012-02-01               350.00                2012-03-01           2                  NULL
--2012-02-01               350.00                2012-04-01           3                  25.00
--2012-03-01               685.00                2012-03-01           2                  656.00
--2012-03-01               685.00                2012-04-01           3                  15.00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T07:33:15.047

以下查询[在您自己的答案中完全复制了最终查询](https://stackoverflow.com/a/11296593/57611)的结果，但占用的 CPU 不超过 1/30（或更好），而且要简单得多。

如果我有时间和精力，我相信我可以找到更多改进……我的直觉告诉我，我可能不必多次敲`Accounts`桌子。但无论如何，这是一个巨大的改进，即使对于非常大的结果集也应该表现得非常好。

请参阅[SqlFiddle](http://www.sqlfiddle.com/#!6/272e5/70)。

```
WITH L0 AS (SELECT 1 N UNION ALL SELECT 1),
L1 AS (SELECT 1 N FROM L0, L0 B),
L2 AS (SELECT 1 N FROM L1, L1 B),
L3 AS (SELECT 1 N FROM L2, L2 B),
L4 AS (SELECT 1 N FROM L3, L2 B),
Nums AS (SELECT N = Row_Number() OVER (ORDER BY (SELECT 1)) FROM L4),
Anchor AS (
   SELECT MinDate = DateAdd(month, DateDiff(month, '20000101', Min(SubmissionDate)), '20000101')
   FROM dbo.Accounts
),
MNums AS (
   SELECT N
   FROM Nums
   WHERE
      N <= DateDiff(month,
         (SELECT MinDate FROM Anchor),
         (SELECT Max(TranDate) FROM dbo.Trans)
      ) + 1
),
A AS (
   SELECT
      AM.AccountMo,
      Amount = Sum(A.Amount)
   FROM
      dbo.Accounts A
      CROSS APPLY (
         SELECT DateAdd(month, DateDiff(month, '20000101', A.SubmissionDate), '20000101')
      ) AM (AccountMo)
   GROUP BY
      AM.AccountMo
), T AS (
   SELECT
      AM.AccountMo,
      TM.TranMo,
      TotalTranAmount = Sum(T.TranAmount)
   FROM
      dbo.Accounts A
      CROSS APPLY (
         SELECT DateAdd(month, DateDiff(month, '20000101', A.SubmissionDate), '20000101')
      ) AM (AccountMo)
      INNER JOIN dbo.Trans  T
         ON A.AccountID = T.AccountID
      CROSS APPLY (
         SELECT DateAdd(month, DateDiff(month, '20000101', T.TranDate), '20000101')
      ) TM (TranMo)
   GROUP BY
      AM.AccountMo,
      TM.TranMo
)
SELECT
   SubmissionStartMonth = A.AccountMo,
   TotalSubmissionAmount = A.Amount,
   M.TransMonth,
   TransMonthNum = N.N - 1,
   T.TotalTranAmount
FROM
   A
   INNER JOIN MNums N
      ON N.N >= DateDiff(month, (SELECT MinDate FROM Anchor), A.AccountMo) + 1
   CROSS APPLY (
      SELECT TransMonth = DateAdd(month, N.N - 1, (SELECT MinDate FROM Anchor))
   ) M
   LEFT JOIN T
      ON A.AccountMo = T.AccountMo
      AND M.TransMonth = T.TranMo
ORDER BY
   A.AccountMo,
   M.TransMonth; 
```

# wordpress - Wordpress Marketpress 在访问安全区域后强制所有链接为 https

> ID：11215880
> 
> 赞同：0
> 
> 时间：2012-06-26T21:02:53.080
> 
> 标签：wordpress, redirect, ssl

我在我的网站上使用 Marketpress 和 Wordpress。Marketpress 仅通过 SSL 保护必要的页面。如果我在一个受保护的页面上，即`https://`尝试访问常规链接（即：`Home`或者`About Us`它会尝试在 URL 中强制使用 https，从而给我一个不受信任的错误。我该如何摆脱这个功能，因为我不希望我的整个站点受到保护，尤其是在用户访问安全区域之后。

编辑：我想一个快速的解决方案是手动输入自定义菜单区域中的链接，但这是我想避免的不好的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:17:16.823

我在 header.php 文件中使用以下内容，效果很好：

```
if(is_page_template( 'template1.php' ) || is_page_template( 'template2.php')) {
$pg_use_ssl = "yes";
}

if($_SERVER["HTTPS"] == "on" && $pg_use_ssl != "yes") { // Force NO ssl
header("Location: http://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
exit();
 }

if($pg_use_ssl == "yes" && $_SERVER["HTTPS"] != "on") { 
header("Location: https://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
exit();
} 
```

这将仅在特定页面模板上强制 https://，并在所有其他页面模板上强制 http://。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:21:18.220

一旦浏览器被重定向到 https，它将停留在那里，同时使用相对 URL。例如

```
/folder/folder/page.html 
```

代替：

```
http://site.com/folder/folder/page.html 
```

鉴于此行为嵌入在 WordPress 中，因此尝试更改它总体上不会特别有用。

相反，我能想到的最好的办法是在 .htaccess 中添加一个重写规则，将 https 地址重写回 http，除了那些需要 https 的网站部分。

也许这个问题会有所帮助：[htaccess (https to http)](https://stackoverflow.com/questions/1818869/htaccess-https-to-http)

如果没有，请尝试：[http ://www.webmasterworld.com/apache/3507002.htm](http://www.webmasterworld.com/apache/3507002.htm)

# javascript - Django/Ajax - 在通过 ajax 调用接收的模板中执行 javascript

> ID：11215881
> 
> 赞同：0
> 
> 时间：2012-06-26T21:02:53.173
> 
> 标签：javascript, python, django

在我的应用程序中，我进行了一个 ajax 调用，使用 js 呈现此模板：

```
<div id="ajax_reply">
<div id="hidden_data" style="display:none;"></div>
<script type="text/javascript">
var data = [];
data.push(['Col1', 'Col2', 'Col3', 'Col4']);
{% for entry in mydata %}
  var dCell = [];
  dCell.push({{ entry.Col1 }});
  dCell.push({{ entry.Col2 }});
  dCell.push({{ entry.Col3 }});
  dCell.push({{ entry.Col4 }});
  data.push(dCell);
{% endfor %}
document.getElementById('hidden_data').innerHTML = JSON.stringify(data);
</script>
</div> 
```

这不起作用，如果我在控制台中手动运行生成的 js，它确实会插入到 div 中，但否则，javascript 永远不会执行。我在 SO 上进行了搜索，但找不到关于这个确切主题的问题。hidden_​​data 在范围内，有什么建议吗？

编辑：在 onload 包装后在控制台中看到的代码（我必须进行一些编辑，但在控制台中手动运行它）

```
<div id="ajax_reply">
<div id="hidden_data" style="display:none;"></div>
<script type="text/javascript">
window.onload = function() {
    var data = [];
    data.push(['Col1', 'Col2', 'Col3', 'Col4']);

      var dCell = [];
      dCell.push('1233');
      dCell.push('123312');
      dCell.push('1233');
      dCell.push('1482.61');

      data.push(relation);

      var dCell = [];
      dCell.push('1231');
      dCell.push('2112.0');
      dCell.push('1231');
      dCell.push('123123.00');

      data.push(relation);

  document.getElementById('hidden_data').innerHTML = JSON.stringify(relationsData);
};
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:19:56.440

如果**entry.Col1**包含字符串“我的文本”，则生成的模板将为您提供如下行：

```
dCell.push(my text); 
```

而且，我想，你需要

```
dCell.push('my text'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:23:21.027

确保这是在加载 DOM 后执行的。

尝试像这样包装你的脚本：

```
window.onload=function(){
    //script here
} 
```

您可以在[jsfiddle](http://jsfiddle.net/j_syk/GvZwz/1/)上看到这应该可以工作。

**更新：**

Django 插入数据的方式似乎是个问题，因为它使用硬编码的样本数据。尝试使用[escapejs](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#escapejs)模板过滤器来处理任何潜在的 javascript 转义问题。我之前不得不用换行符和'&'符号来调试类似的问题。

```
dCell.push("{{ entry.Col1|escapejs }}"); 
```

# c - 处理“不调试就开始”的文件

> ID：11215883
> 
> 赞同：1
> 
> 时间：2012-06-26T21:03:04.483
> 
> 标签：c

我正在用 C 语言编程，但遇到以下问题：

我使用 fopen 并尝试从 csv 文件中读取，该文件当前存储在程序的 exe 文件的文件夹中。

该程序在调试模式和发布模式下运行良好，但是当我尝试在 Visual Studio 2008 Express Edition 上以“不调试启动”模式运行该程序时，该程序停止工作并且 Windows 显示一条消息：“ *** .exe 已停止工作. 一个程序导致程序停止正常工作。Windows 将关闭该程序并通知您是否有可用的解决方案”。

我试过在几台电脑上运行这个程序，结果都是一样的。

我可以给你的另一个信息是，如果我输入文件的完整路径（C:....file.csv） - 那么它工作得很好，没有任何问题。

我知道我没有编写任何代码，但我希望有人知道为什么会发生这种情况。

谢谢提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:05:39.337

您的程序没有找到 csv 文件，`fopen()`失败并返回一个空指针，您尝试使用它而不检查并且您的程序崩溃（只是我的猜测）。

首先，您必须检查是否`fopen()`确实可以打开您的文件：

```
FILE* f = fopen("file.csv", "r");
if(f == NULL) {
  /* print some meaningful error */
} else {
  /* use the file */
} 
```

其次，您可以通过从文件所在的同一文件夹中执行程序来解决问题。我不是 Windows 人，但如果您创建指向“.exe”的链接，则其属性中可能有一些名为“工作目录”或类似的配置，您可以将其设置为文件所在的路径成立。

每个进程都有一个工作目录，通常是它启动的目录，尽管它可能是从父进程继承的，并且可以通过编程方式进行更改。如果您在加载文件时没有指定完整路径，则该进程将在其当前工作目录中搜索该文件。

# cordova - 设置 PhoneGap 1.8.1 和 Sencha Touch 2 项目。无法调用 Ext.setup

> ID：11215884
> 
> 赞同：0
> 
> 时间：2012-06-26T21:03:04.713
> 
> 标签：cordova, sencha-touch

在 Eclipse Plugin MDS 1.1 for PhoneGap on Android 的帮助下，我建立了一个新项目，包括 Sencha Touch。

目标 Android 4.0.3 分钟 SDK 15

问题是当我想调用该函数不存在的 Ext.setup 时。我已经在 index.html 和 css 中包含了 sencha-touch.js 文件。

帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:44:18.817

听起来您可能在创建时错误地设置了 Sencha 项目。我的建议是使用 Sencha SDK 工具创建一个新的空白项目，使用以下命令行：

```
sencha generate app <name> <location> 
```

查看此页面了解更多信息 - [Sencha 入门](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)

如果您想尝试在不重新创建的情况下修复当前页面，您可以使用创建的页面作为示例。顺便说一下，我知道在你的 index.html 中你想加载 microloader 脚本，而不是 js 库本身。

希望这可以帮助。

# php - 将数组转换为更具可读性和逻辑性的结构

> ID：11215885
> 
> 赞同：1
> 
> 时间：2012-06-26T21:03:04.830
> 
> 标签：php, arrays

我有大约 200 条记录的数组，如下所示：

```
 [0] => Array
        (
            [sid] => 54
            [sname] => vISL User book
            [sdate] => 2012-03-01 00:00:00
            [pid] => 262
            [cid] => 95
            [at] => 
            [amount] => 0
            [psdate] => 2012-03-14 00:00:00
            [first_name] => Alan
            [last_name] => Darshan
            [pcid] => 95
            [cname] => Invisal
        )
 [1] => Array
        (
            [sid] => 54
            [sname] => vISL User book
            [sdate] => 2012-03-01 00:00:00
            [pid] => 263
            [cid] => 94
            [at] => 
            [amount] => 0
            [psdate] => 2012-03-14 00:00:00
            [first_name] => umed
            [last_name] => sarkar
            [pcid] => 92
            [cname] => Tisal
        ) 
```

我想将此数组转换为以下格式。原因是 sid、sname 和 sdate 组合可能有多个 pid、cid ... cname 值：

```
[0] => Array
(
    [sid] => 54
    [sname] => vISL User book
    [sdate] => 2012-03-01 00:00:00
    [parr] => Array
            (
                [0] => Array 
                    (
                        [pid] => 262
                        [cid] => 95
                        [at] =>
                        [amount] => 0
                        [psdate] => 2012-03-14 00:00:00
                        [first_name] => Alan
                        [last_name] => Darshan
                        [pcid] => 95
                        [cname] => Invisal
                    )
                [1] => Array
                    (
                            [pid] => 262
                            [cid] => 95
                            [at] =>
                            [amount] => 0
                            [psdate] => 2012-03-14 00:00:00
                            [first_name] => Alan
                            [last_name] => Darshan
                            [pcid] => 95
                            [cname] => Invisal
                    )                       
            )
)
[1] => Array
(
        [sid] => 53
        [sname] => tebby book
        [sdate] => 2012-04-01 00:00:00
        [parr] => Array
        (
                [0] => Array
                (
                        [pid] => 162
                        [cid] => 15
                        [at] =>
                        [amount] => 1
                        [psdate] => 2012-03-14 00:00:00
                        [first_name] => edbey
                        [last_name] => balh
                        [pcid] => 93
                        [cname] => Ansasa
                )
                [1] => Array
                (
                        [pid] => 212
                        [cid] => 92
                        [at] =>
                        [amount] => 0
                        [psdate] => 2012-03-14 00:00:00
                        [first_name] => xyz
                        [last_name] => def
                        [pcid] => 91
                        [cname] => vsall
                )
        )
) 
```

获得所需数组结构的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:10:14.090

我会说遍历数组，然后用于`var_export`获取输出：

```
$tmp = Array();
$out = Array();
foreach($input as $row) {
    $tmp[$row['sid']][] = $row;
}
foreach($tmp as $key=>$rows) {
    $tmp[$key] = Array(
        "sid"  =>$rows[0]['sid'],
        "sname"=>$rows[0]['sname'],
        "sdate"=>$rows[0]['sdate'],
        "parr" =>Array()
    );
    foreach($rows as $row) {
        $tmp[$key]['parr'][] = Array(
            "pid"       =>$row['pid'],
            "cid"       =>$row['cid'],
            "at"        =>$row['at'],
            "amount"    =>$row['amount'],
            "psdate"    =>$row['psdate'],
            "first_name"=>$row['first_name'],
            "last_name" =>$row['last_name'],
            "pcid"      =>$row['pcid'],
            "cname"     =>$row['cname']
        );
    }
}
$out = array_values($tmp);
file_put_contents("tmp.php",'<?php $data = '.var_export($out,true).'; ?>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:19:39.730

```
$old_data = /* same as in exemple */

$sids = array();

foreach($old_data as $row)
{
    if(!isset($sids[$row['sid']]))
    {
        $sids[$row['sid']] = array();
        foreach(array('sid', 'sname', 'sdate') as $keys)
        {
            $sids[$row['sid']][$keys] = $row[$keys];
        }
        $sids[$row['sid']]['parr'] = array();
    }

    $current_parr = array();
    foreach(array('pid', 'cid', 'at', 'amount', 'psdate', 'first_name', 'last_name', 'pcid', 'cname') as $keys)
    {
        $current_parr[$keys] = $row[$keys];
    }

    $sids[$row['sid']]['parr'][] = $current_parr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T22:39:28.077

我假设您从连接查询中获得了这些数组结果。如果您将这些数据与数据库分开，我认为这会更容易。所以你的问题类似于这个线程：[在此处输入链接描述](https://stackoverflow.com/questions/9641998/putting-multiple-table-values-into-array)

无论如何，你可以试试这个：

```
$pk = 'sid';                // record pk
$pkKeys = array(
    'pid' => array(         // subRecord pk
        'parr' => array(    // subRecords array key => array(subRecord names)
            'pid',
            'cid',
            'amount',
            'psdate',
            'pcid',
        ),
    ),
);

$resultArr = array();
array_walk($records, 
    function ($val, $key) use (&$resultArr, $pkKeys, $pk) {
        $mapped = array();
        foreach ($val as $itemKey => $item) {
            if (in_array($itemKey, array_keys($pkKeys))) {
                $populateData = $pkKeys[$itemKey];
                $subRecordPk = key($populateData);
                foreach($populateData[$subRecordPk] as $populateKey) {
                    if ($subRecordPk !== $populateKey) {
                        $resultArr[$val[$pk]][$subRecordPk][$val[$itemKey]][$populateKey] 
                            = $val[$populateKey];
                        $mapped[$populateKey] = $populateKey;
                    }
                }
            } else if (!in_array($itemKey, $mapped)){
                $resultArr[$val[$pk]][$itemKey] = $val[$itemKey];
            }
        }
    }
); 
```

# ip - 如何从 IP 地址和子网确定网络 IP、网关和广播 IP？

> ID：11215887
> 
> 赞同：0
> 
> 时间：2012-06-26T21:03:10.397
> 
> 标签：ip, ip-address, gateway, subnet

我有一个 IP 地址 10.1.0.4

和子网 129

如何确定网络 IP、网关和广播 IP？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T21:17:21.033

您无法确定网关，您的 ISP 或系统管理员应该告诉您使用哪个网关。

我不知道您所说的“网络IP”是什么意思；你的IP地址**是**一个网络IP地址。

广播取决于网络掩码，它是将尾随零替换为一的掩码。

# php - joomla 多站点组件升级

> ID：11215889
> 
> 赞同：0
> 
> 时间：2012-06-26T21:03:17.820
> 
> 标签：php, linux, joomla

我在我公司拥有的多个 linux 服务器上管理多个 joomla 站点。

Joomla 使用我安装和更新的特定核心组件。

我想知道是否有人知道同时在多个站点上更新相同组件的方法。

或者，如果有人可以向我指出创建脚本的方向，该脚本将 scp 文件并执行升级。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:05:44.877

这是可能的，但您必须编写自己的组件才能做到这一点。我知道[Directive](http://www.directive.com/home/contact-us.html)的人有，你可以联系他们购买。

# python - python解析：字符串比较问题

> ID：11215892
> 
> 赞同：2
> 
> 时间：2012-06-26T21:03:31.800
> 
> 标签：python, parsing, python-2.7

```
for line in f.readlines():
    if( line == "Open Ended Schemes(Balanced)") :
        print "found" 
```

我的数据文本是[此](http://www.amfiindia.com/spages/NAV0.txt)链接提供的共同基金信息。

当我找到“开放式方案”时，我希望执行一些代码。问题是`==`操作员在这里不起作用。我尝试了一些组合`line.rsplit()`但无法成功。

我是 Python 的初学者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:08:10.617

python 中的 readlines() 方法将换行符留在每行的末尾。只需将其更改为

```
for line in f.readlines():
    if( line == "Open Ended Schemes(Balanced)\n") :
        print "found" 
```

或者，您可以在检查之前从行字符串中删除换行符：

```
for line in f.readlines():
    if( line[:-1] == "Open Ended Schemes(Balanced)") :
        print "found" 
```

这也应该有效。

# java - 静默字符串之谜（服务器从Android客户端接收空字符串）

> ID：11215893
> 
> 赞同：2
> 
> 时间：2012-06-26T21:03:45.140
> 
> 标签：java, android, client

我正试图让我的 android 与我的电脑对话，而且我几乎做到了。我可以通过互联网向我的计算机发送字符串，但只有一个问题：当我的计算机读取字符串时，它们为空！

这是客户端的代码：

```
public class ClientActivity extends Activity implements View.OnClickListener{

EditText ip1,ip2,ip3,ip4, message, port;
TextView con;
Button send;
InetAddress inet;
Socket s;
OutputStream out;
PrintWriter output;
int sip;
int rport;
byte[] ip;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ip1 = (EditText) findViewById(R.id.etIP1);
    ip2 = (EditText) findViewById(R.id.etIP2);
    ip3 = (EditText) findViewById(R.id.etIP3);
    ip4 = (EditText) findViewById(R.id.etIP4);
    port = (EditText) findViewById(R.id.etPort);
    message = (EditText) findViewById(R.id.etMessage);
    send = (Button) findViewById(R.id.bSend);
    con = (TextView) findViewById(R.id.tvCon);
    ip = new byte[4];

    send.setOnClickListener(this);    }

@Override
public void onClick(View arg0) {
    switch(arg0.getId()){
        case R.id.bSend:

        try{
            rport = Integer.parseInt(port.getText().toString());
        } catch (NumberFormatException e){
            con.setText(e.toString());
            break;
        }

        try{
            sip = Integer.parseInt(ip4.getText().toString());
            sip = (sip << 8) + Integer.parseInt(ip3.getText().toString());
            sip = (sip << 8) + Integer.parseInt(ip2.getText().toString());
            sip = (sip << 8) + Integer.parseInt(ip1.getText().toString());
        } catch (NumberFormatException e){
            con.setText(e.toString());
            break;
        }

        ip[0] = (byte)(0xff & sip);
        ip[1] = (byte)(0xff & (sip >> 8));
        ip[2] = (byte)(0xff & (sip >> 16));
        ip[3] = (byte)(0xff & (sip >> 24));

        try {
            inet = InetAddress.getByAddress(ip);
            s = new Socket(inet, rport);
            out = s.getOutputStream();
            output = new PrintWriter(out);
            output.println(message.getText().toString());
            con.setText("Message Sent");
            s.close();
        } catch (UnknownHostException e) {
            con.setText(e.toString());
        } catch (IOException e) {
            con.setText(e.toString());
        }
        break;
    }
}
} 
```

这是服务器的代码：

```
public class Main {
public static void main(String[] args) {
    try {
        Boolean end = false;
        ServerSocket ss = new ServerSocket(4331);
        while(!end){
                //Server is waiting for client here, if needed
                Socket s = ss.accept();
                BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
                String st = input.readLine();
                System.out.println(""+st);
                s.close();     
         }
         ss.close();

        } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
    }
} 
```

任何帮助将不胜感激。

编辑：我发现了问题；最初我没有使用模拟器来测试我的代码我使用的是我的实际 android 因为我无法让 wifi 在模拟器上工作（这是一个简单的修复）所以当在我的模拟器上运行代码时它可以工作，不空字符串；但是当在我真正的 android 上运行时，它返回 null，我能想到的只有一个原因会导致这种情况发生，我使用的 sdk 与我的 androids os 版本（较旧）不匹配，这可能是原因还是我错了吗？

编辑：我明白了，事实证明我只需要从 androids sdk manager 安装一些 api 10 包，现在就像一个魅力:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:46:58.177

在客户端调用之后，空字符串只是一种`readline`表示输入流已经结束的方式`close`。

您的代码基本上应该可以工作。`setTcpNoDelay`通过在连接之前调用客户端套接字来添加更多日志记录并禁用 Nagle 算法以实现更快（更轻松）的调试。

# java - Hibernate：如何列出所有映射的对象？

> ID：11215895
> 
> 赞同：1
> 
> 时间：2012-06-26T21:03:51.287
> 
> 标签：java, hibernate, jakarta-ee

如何在运行时检查 Hibernate 为对象映射设置的内容？

我有一个没有产生任何错误的映射，它在休眠配置中，但尚未找到。我想检查映射以验证它是否存在并检查拼写错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T21:36:46.913

您可以使用[SessionFactory.getAllClassMetadata()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/SessionFactory.html#getAllClassMetadata%28%29)获取所有实体的元数据。

# php - WordPress - 在编写函数以创建动态类时，如何根据顶级父名称定位子页面？

> ID：11215901
> 
> 赞同：0
> 
> 时间：2012-06-26T21:04:25.173
> 
> 标签：php, css, wordpress, wordpress-theming

我正在为客户创建一个自定义主题，以便与最新的 Wordpress 版本一起使用。在这个主题中，页面的名称（Contact、About 等）包含在 div#pageTitle 中。此 div 还根据站点的部分分配了一个类（例如“aboutTitle”）。编写 CSS 以在页面名称旁边显示一个图标，并为每个类分配一个不同的图标。预期结果是站点单个部分中的所有页面都应显示专门用于该部分的图标。（例如：所有“关于”页面应该有一个图标，所有“文章”应该有一个不同的图标，等等）

在这种特殊情况下，有一个名为“About Us”的顶级页面。“关于我们”下有一些子页面。我希望“关于我们”及其所有子页面显示一个特定的图标，并且我希望基于写入 functions.php 的函数将用于显示它的类动态写入 html。（当然，其他页面、部分等也会有自己的关联图标。）

我写了我的*想法*可行的东西，它确实写在适当的类中……除了它为站点中的每一页都写了那个类！谁能解释我做错了什么，以及要进行哪些更正以达到预期的结果？

我在functions.php中包含的代码如下：

```
// Identify the post title of the parent page
function parentPostTitle() {
/* is it a page */
if( is_page() ) { 
global $post;
    /* Get an array of Ancestors and Parents if they exist */
$parents = get_post_ancestors( $post->ID );
    /* Get the top Level page->ID count base 1, array base 0 so -1 */ 
$id = ($parents) ? $parents[count($parents)-1]: $post->ID;
/* Get the parent and set the $parentPostTitle with the page title (post_title) */
    $parent = get_page( $id );
$parentPostTitle = $parent->post_title;
}
}

// Enable dynamic PageTitle Classes
function dynamicPageTitleClass() {
    if (is_page("About Us") || ($parentPostTitle="About Us")) {
            echo ' class="aboutTitle"';
}  elseif (is_page("Contact Us")) {
            echo ' class="contactTitle"';
    } elseif (in_category("articles")) {
            echo ' class="articlesTitle"';
    } elseif (in_category("blogs")) {
            echo ' class="blogTitle"';
    } elseif (in_category("videos")) {
            echo ' class="videosTitle"';
    } else {
            echo ' class=""';
    }
} 
```

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:04:51.547

上面代码的以下修订版由 Justin Sangoi（IRL 熟人）编写，并被证明是成功的：

```
// Identify the post title of the parent page
function parentPostTitle(&$parentPostTitle) {
// function scope variables
$parentPostTitle = "";

// to be used for error messages.
$messages = "";

/* is it a page */
if( is_page() ) { 
    global $post;

    /* Get an array of Ancestors and Parents if they exist */
    $parents = get_post_ancestors( $post->ID );

    /* Get the top Level page->ID count base 1, array base 0 so -1 */ 
    $id = ($parents) ? $parents[count($parents)-1]: $post->ID;

    // Check if $id is null or empty, at this point, an error needs to be thrown if so.
    if (!empty($id)) {
        /* Get the parent and set the $parentPostTitle with the page title (post_title) */
        $parent = get_page( $id );
        $parentPostTitle = $parent->post_title;
    }
    else {
        $messages .= "ID is null or empty. <br />";
    }
}
else {
    $messages .= "Not a page. <br />"; 
            /* Remove the above line when finished debugging child page switches, or all switches for posts and archives will bork. */
}

/*
  In the code calling this function, if messages is empty or null, the function succeeded.
  If not, the function had some sort of error message.  This can be logged or echoed to 
  the screen for debugging purposes.
*/
return $messages;
}

// Enable dynamic PageTitle Classes
function dynamicPageTitleClass() {
// function scope variables
$title = "";
$messages = "";

// Get the parentTitle from the other function using the pass by reference.
$messages = parentPostTitle($title);

// if no error message
if (empty($messages)) {
    if (is_page("About Us") || ($title=="About Us")) {
        echo ' class="aboutTitle"';
    } 
    elseif (is_page("Contact Us")) {
        echo ' class="contactTitle"';
    } 
    elseif (in_category("articles")) {
        echo ' class="articlesTitle"';
    } 
    elseif (in_category("blogs")) {
        echo ' class="blogTitle"';
    } 
    elseif (in_category("videos")) {
        echo ' class="videosTitle"';
    } 
    else {
        echo ' class=""';
    }
}
else {
    // deal with the errors here (maybe return them or log them)
            echo $messages;  
            /* Check targeted html for error message is visual output is incorrect. */
}
} 
```

请务必阅读评论，因为如果您在未阅读评论并采取相应措施的情况下复制和粘贴，这将无法按预期工作。

此外，我已经在第二个函数中编写了更多的开关，并且发现它对逻辑级联的方式非常挑剔。如果你写了一个新的开关并且它不能正常工作，请尝试重新排列开关的顺序。到目前为止，我不得不将它安排到第一个地址 is_search 和 is_404，然后是 is_page（及其子级），然后是类别/标签和 is_single。

我已经在贾斯汀的许可下发布了这个，以防其他人发现它有用。YMMV。

# sitecore - Sitecore 中中继器中的数据源

> ID：11215904
> 
> 赞同：1
> 
> 时间：2012-06-26T21:04:43.657
> 
> 标签：sitecore

我在中继器中有以下内容；

```
<sc:Link runat="server" DataSource='<%# (Container.DataItem as Item).Paths.Path %>' TextField="Title" LinkField="Title" /> 
```

然而这失败了。我也试过

```
<sc:Link runat="server" DataSource='<%# Container.DataItem %>' TextField="Title" LinkField="Title" /> 
```

这也失败了。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:42:25.327

尝试设置 Item 参数而不是 DataSource。我的代码中没有很多 sc:Link 控件，但我知道这是一个有效的控件：

```
<sc:Link  ID="hlMore" runat="server" Item='<%# Container.DataItem %>' Field="ImageLink" Text=<%# Sitecore.Globalization.Translate.Text("FindOutMore") %>></sc:Link> 
```

请注意，它还使用“字段”而不是 TextField。嗯。在后面的代码中，数据源是一个 List 集合。

这是另一个，里面有一个控件：

```
<sc:Link ID="lnkFlag" runat="server" Field="FlagLink" Item='<%# Container.DataItem %>'>
    <sc:Image runat="server" Field="FlagImage" Item='<%# Container.DataItem %>' />
</sc:Link> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T01:52:30.140

DataSource 应该是 ID，而不是 item 或 item.Path。

项目应该是数据源项目。

# c++ - 使用输入迭代器时的单元测试

> ID：11215906
> 
> 赞同：0
> 
> 时间：2012-06-26T21:04:52.223
> 
> 标签：c++, unit-testing, tdd

让我们假设下面的 C 类非常慢，并且我不想在我的单元测试中使用它。所以我创建了一个 MockC，它最终将实现与 C 类相同的接口。

```
class IC
{
public:
    virtual std::string getName() = 0;
};

class C: public IC
{
public:
    C(){}
    C(int c) : _c(c){}
    int _c;
    virtual std::string getName()
    {
        // do really slow stuff with an external library
        ...
    }
};

class MockC: public IC
{
public:
    MockC(){}
    MockC(int c) : _c(c){}
    int _c;
    virtual std::string getName()
    {
       ...
    }
}; 
```

我还有一个精简的输入迭代器，它在取消引用时创建一个 Value 类型的对象（可以是 C 或 MockC）：

```
template<class Value>
class GetNextIterator 
{
public:
    typedef int (*GetNext)();

    GetNextIterator(GetNext getNext): _getNext(getNext)
    {
        _current = _getNext();
    }

    const Value* operator->() const
    {
        return new Value(_current);
    }

protected:
    int _current;
    GetNext _getNext;
};

int count = 0;
int getNext()
{
    return count++;
} 
```

然后我有另一个类也很慢，它是 C 类对象的父类，但也有自己的属性，如下所示：

```
class ID
{
public:
    virtual std::string getName() = 0;
};

class D: public ID
{
public:
    typedef GetNextIterator<C> Iterator;

    virtual ChildIterator begin() const
    {
        return Iterator(getNext);
    }

    virtual std::string getName()
    {
        // again really slow and accessing external dependencies
        ...
    }
}; 
```

现在我该如何测试以下功能，例如：

```
int f(D* d)
{
    D::ChildIterator i = d->begin();
    if (d.getName() == "something or other")  
        return i->_c;
    else
        return 1;
} 
```

请记住，我不希望使用具体的类 C 或 D。我应该怎么做才能对 f() 和类似函数进行完全单元测试？我完全愿意重新设计上面的任何代码以使其与单元测试一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:57:53.493

只模拟你需要模拟的东西。为了测试`f()`的行为，你在正确的轨道上模拟出沉重的 C 对象。您确实必须编写足够的测试用例来涵盖您认为`f()`需要处理的任何行为。但是您不需要模拟 Container 本身，这应该很容易测试。所以，摆脱 IContainer 的概念。

但是，您确实需要修改 Container 以便它接受 IC ​​对象而不是具体对象的输入（您也不需要它是基于模板的，如果只是为了测试， Container 可以保存 literal `IC*`）。测试代码和生产代码都将为`f()`. 测试代码将首先用 MockC 对象填充一个 Container，而生产代码将在调用`f()`.

# google-sheets - 将 Google 电子表格导入 Google 电子表格

> ID：11215907
> 
> 赞同：1
> 
> 时间：2012-06-26T21:04:53.463
> 
> 标签：google-sheets, google-sheets-formula, importrange

我正在尝试将带有 Google 电子表格查询的 URL 导入另一个 Google 电子表格。所以在我的网页上，我使用这样的网址：[https://docs.google.com/a/chisledimages.com/spreadsheet/tq?tqx=out:html&tq=select%20C,D,E,F,G, H,I%20where%20%28A%20contains%20301%29&key=0AuOQkU9HTNwVdG5](https://docs.google.com/a/chiseledimages.com/spreadsheet/tq?tqx=out:html&tq=select%20C,D,E,F,G,H,I%20where%20%28A%20contains%20301%29&key=0AuOQkU9HTNwVdG5) 创建一个引用指定 Doc 的表并选择某些列，其中 A 列等于我客户的帐号，在本例中为 301。

我想要做的是另一个电子表格，它将自动填充来自该 URL 的数据。我累了 =importdata(" [https://docs.google.com/a/chiseledimages.com/spreadsheet/tq?tqx=out:html&tq=select%20C,D,E,F,G,H,I%20where% 20%28A%20contains%20301%29&key=0AuOQkU9HTNwVdG5](https://docs.google.com/a/chiseledimages.com/spreadsheet/tq?tqx=out:html&tq=select%20C,D,E,F,G,H,I%20where%20%28A%20contains%20301%29&key=0AuOQkU9HTNwVdG5) ") 但这似乎只是导入了 HTML 而没有用数据填充工作表。我希望能够做到这一点，以便我的客户可以拥有一个始终自动填充其数据的 Google 电子表格，同时无法直接访问包含所有客户数据的原始电子表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:24:11.320

我不确定这是否是您要查找的内容，但我通常使用 ImportRange 将数据从一张纸拉到另一张纸。 [http://support.google.com/drive/bin/answer.py?hl=en&answer=155183](http://support.google.com/drive/bin/answer.py?hl=en&answer=155183)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-12T20:10:39.510

```
=IMPORTRANGE("URLOFTHESHEET"; "SHEET!A1") 
```

# batch-file - 连接文件名，从批处理中的字符串中删除前导和尾随空格？

> ID：11215913
> 
> 赞同：1
> 
> 时间：2012-06-26T21:05:09.087
> 
> 标签：batch-file, for-loop, concatenation, cmd

我正在尝试在目录路径 (C:\ExecutionSDKTest_10.2.2\Logs) 后面和文件扩展名 (.log) 之前批量连接文件名 (fileName)，但我认为因为我的文件名包含前导和尾随空格，所以cmd.exe 无法识别串联路径 (logPath)。有任何想法吗？

```
 FOR %%G IN (C:\ExecutionSDKTest_10.2.2\*.properties) DO (
   Set fileName= %%~nxG
   REM echo !fileName!
   REM java -jar Test.jar %%~nxG > Logs\%%~nxG.log
   set logPath=%C:\ExecutionSDKTest_10.2.2\Logs\%%!fileName!%%.log%
   Echo !logPath!
   REM print each line in each of the log files
    REM FOR /F "tokens=*" %%g in (!logPath!) DO (
   REM echo %%g
   REM )
   pause
   ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:22:24.840

你确定你的文件名有前导和尾随空格吗？通常，文件名不可能以空格结尾。

您的变量有一个前导空格，因为您在使用该命令`filename`时应避免使用空格。 也创建似乎是错误的。 `set`
`logPath`

一个更正的版本可能看起来像

```
FOR %%G IN (C:\ExecutionSDKTest_10.2.2\*.properties) DO (
   Set "fileName=%%~nxG"
   REM echo !fileName!
   REM java -jar Test.jar %%~nxG > Logs\%%~nxG.log
   set "logPath=C:\ExecutionSDKTest_10.2.2\Logs\!fileName!.log"
   Echo !logPath!
   REM print each line in each of the log files
    REM FOR /F "tokens=*" %%g in (!logPath!) DO (
   REM echo %%g
   REM )
   pause
) 
```

# zend-framework - 将自定义 HTML 插入 Zend_Form

> ID：11215914
> 
> 赞同：0
> 
> 时间：2012-06-26T21:05:11.927
> 
> 标签：zend-framework, zend-form, image-uploading, zend-form-element, ajax-upload

我有一个从这样的控制器创建的 Zend_Form：

```
 $form = new Zend_Form;
        $form->setAction('/ad/add')->setMethod('post')->setAttrib('id', 'add_form');
        $form->addElement('text', 'name', array(
            'label' => 'Name',
            'description' => 'Ex.: Samsung Galaxy Tab 10.1',
            'validators' => array(
                'alnum',
                'notEmpty',
                array('stringLength', array('min' => 3, 'max' => 150))
            ),
            'required' => true
        ));
        $form->addElement('textarea', 'description', array(
            'label' => 'Description',
            'description' => 'Make sure you give an accurate description of your item.',
            'validators' => array(
                'alnum',
                'notEmpty',
                array('stringLength', array('min' => 10, 'max' => 255))
            ),
            'required' => true
        ));
        $form->addElement('submit', 'Submit'); 
```

当我从视图中输出它时，它工作得很好，按照它应该的方式用 dl 和 dd 魔法渲染。

我现在想要的是在这个表单中添加一个 ajax 图片上传功能。每个图像都将通过 ajax 上传，显示在一个 div 中，然后我的表单中的一个隐藏字段将填充上传文件的 ID。我怎样才能做到这一点，同时将图像上传位放在我的表单标记中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T03:39:34.240

使用视图脚本装饰器。我假设您必须通过 iframe 上传图片。您可以将它放在视图脚本装饰器的 phtml 文件中。

在你的表单类里面做 .

```
$dec = new Zend_Form_Decorator_ViewScript();
$dec->setViewScript('Form.phtml');

$this->setDecorators(array($dec,'form')); 
```

在 Form.phtml 中渲染元素

```
<?php echo $this->element->username ;?>
<?php echo $this->element->image ; ?> 
```

并按原样添加您的 iframe。

了解更多关于 View 脚本装饰器

[http://framework.zend.com/manual/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript](http://framework.zend.com/manual/en/zend.form.standardDecorators.html#zend.form.standardDecorators.viewScript)

# scala - Scala 类型约束不允许 null

> ID：11215915
> 
> 赞同：8
> 
> 时间：2012-06-26T21:05:15.373
> 
> 标签：scala, types, null

我有以下 Scala 代码：

```
class X[T1 <: AnyRef] {
   var _x : T1 = null 
} 
```

代码 _x = null 突出显示为错误：

```
error: type mismatch;
found   : Null(null)
required: T1
var _x : T1 = null : T1 
```

如果我添加 Null 类型约束一切正常。为什么会发生这种情况？Scala 将 AnyRef 定义为 java.lang.Object 的等价物，它当然可以为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T21:12:22.267

代替

```
var _x : T1 = null 
```

采用

```
var _x : T1 = _ 
```

Scala语言规范的解释：

> 变量定义 var x: T = _ 只能作为模板的成员出现。它引入了一个类型为 T 和默认初始值的可变字段。默认值取决于类型 T，如下所示：
> 
> 如果 T 是 Int 或其子范围类型之一，则为 0，
> 如果 T 是 Long，则为 0L，如果 T 是 Fl​​oat，则为
> 0.0f，
> 如果 T 是 Double，则为 0.0d，
> 如果 T 是 Boolean，则为 false，
> 如果 T 是 Unit，则为 ()，
> 对于所有其他类型为 null T。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T15:51:51.763

```
class X[T1 <: AnyRef] {
   var _x : T1 = null 
} 
```

如果您希望它可以为空，请替换`T1 <: AnyRef`为`T1 >: Null`.

> 为什么会发生这种情况？

`Nothing`是 的子类型`AnyRef`，并且`Nothing`不能为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T21:44:07.090

如果你想强制泛型参数必须是可空的，那么你可以为 Null 类型设置一个下限：

```
class X[T1 >: Null] {
   var _x : T1 = null
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T21:34:13.880

只是为了完整性，在 Scala 中使用 null 有点不鼓励。只要您没有充分的理由使用 null，您通常将变量包装在 Option 中。有关更多详细信息，请参阅[选项](http://www.scala-lang.org/api/current/scala/Option.html)。

# objective-c - ios - 在 UIPickerView 子类化时传递值

> ID：11215923
> 
> 赞同：3
> 
> 时间：2012-06-26T21:05:39.257
> 
> 标签：objective-c, ios, delegates, uipickerview, subclass

很抱歉，因为这已经问过了，但我就是无法理解它。

我有一个工作正常的 UIPickerView，我将它添加到我的 UIViewController

```
 _pv = [[CategoryPicker alloc] init];
    _textField.inputView = _pv; 
```

_pv 是 UIPickerView 和 _textField 是我希望结果出现的文本字段。

所以我当我使用这行代码时：

```
_pv.categoryPicker.delegate = self; //set in my viewDidLoad 
```

然后将其放置在 UIViewController 中：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component {
// Handle the selection

_textField.text = [_pv.categoryArray objectAtIndex:row];

} 
```

我能够填充 TextField，但 UIPickerView 填充了“？” 对于数组的每个条目。

现在当我这样做时：

```
_pv.categoryPicker.delegate = _pv.self; //set in my viewDidLoad 
```

我把它放在 UIPickerView 中：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component {
// Handle the selection

_outputArray = [_categoryArray objectAtIndex:row];
NSLog(@"The item selected = %@", _outputArray);

 } 
```

UIPickerView 已填充，但数据未传递到 TextField。

所以这就是我卡住的地方——我需要在两个地方都有结果。现在我想我用 subClassing 来做到这一点，但是我读过的所有内容都对我不起作用。

请帮我：-）

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T23:12:06.620

您应该查看[UIPickerViewDelegate](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html)协议的完整文档。

基本上，您要做的是将 UIViewController 设置为 UIPickerView 的委托，如下所示：

```
_pv.categoryPicker.delegate = self; 
```

然后在您的 UIViewController 中，您要实现以下 UIPickerViewDelegate 方法：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component {
    // called when a row is selected
    _textField.text = [_pv.categoryArray objectAtIndex:row];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    // here is where you populate the contents of the pickerView
    // return the title that you want to appear in 'row'
     return [NSString stringWithFormat:@"row %d", row];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:24:15.560

我最近实现了类似的东西。I have a UIPickerView that loads values from an array and when a row inside the UIPicker is selected, it updates the value inside a cell in a UITableView. 但是您也可以轻松地更新文本字段中的值：

头文件内部：

在你的头文件中，添加：

```
// You will not need to set the view as the delegate again.

@interface yourClass: UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>
{
    UIPickerView *_pv;
    UITextField *_textField;
}

@property (nonatomic, retain) IBOutlet UIPickerView *_pv; 
```

在您的实现中：

```
@synthesize _pv;

    #pragma mark -
    #pragma mark View Lifecycle

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Initialize the array
        _categoryArray = [[NSArray alloc] initWithObjects:
                        @"1", @"2", @"3",
                        @"4", @"5", nil];

        // Initialize text field of type UITextField and set its input type as picker viewer
        _textField.inputView = pickerViewer; 
     }

#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
   // The array with all the values that you want to see inside the picker viewer
   return [_categoryArray count]; 
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
   // Value inside the picker viewer will be loaded for the output array
   return [_categoryArray objectAtIndex:row];
} 

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    // When a value is selected in picker viewer, take its value and assign it to the text view
    //NSLog(@"Picker view row selected");
    _textField.text = [NSString stringWithFormat:@"%@", [_categoryArray objectAtIndex:row]]; 
} 
```

还要在 IB 中的视图上拖动一个选择器查看器，并将其连接到文件所有者内的 _pv，因为它是一个 IBOutlet。

希望能帮助到你。我在 UITablewViewController 中实现了我的，并且在同一个视图中有多个 UIPickerViewers。所以我编辑了一些代码，如果我错过了什么并且它不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T21:42:16.753

我不知道我是否正确理解了您的问题，但是为了填充`UIPickerView`您需要执行以下操作：

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
{  
    return [_categoryArray objectAtIndex:row];   
} 
```

# mysql - 如何判断读取是否被重定向到 Rails3 上的 MySQL 从站

> ID：11215929
> 
> 赞同：0
> 
> 时间：2012-06-26T21:06:03.580
> 
> 标签：mysql, ruby-on-rails-3, master-slave

**[更新]**可能是我对[无缝](http://github.com/wbharding/seamless_database_pool)数据库池 gem 的使用（或误用）。

[我只是使用Seamless_database_pool](http://github.com/wbharding/seamless_database_pool)在 Rails3 上设置了主/从设置。这是否意味着读取肯定不会被重定向到从站？

如何在 MySQL 级别进行检查？我希望`show processlist`这样做，但我没有看到任何进程。

**[更新]**

在 master 上运行`show processlist`会显示正在运行的查询，所以我猜 READs 没有被传递给 slave。

bin_log 文件只有以下内容（添加了 9 和 x）：

`/*!40019 SET @@session.max_insert_delayed_threads=0*/; /*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/; DELIMITER /*!*/; \# at 4 \#xxxxxxx 99:99:99 server id 2 end_log_pos 106 Start: binlog v 4, server v 5.1.52-log created xxxx 99:99:99 at startup ROLLBACK/*!*/; BINLOG ' xxxxxxxxxxxxxxxxxxxxxxxxxxxxxXXXXXXXXXXXXXXXXXXXXXXxxxxxxxxxxxxxxx '/*!*/; \# at 106 \#xxxx 99:99:99 server id 2 end_log_pos 125 Stop DELIMITER ; \# End of log file ROLLBACK /* added by mysqlbinlog */; /*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:21:01.873

这些过程可能太快了，以至于您无法赶上“显示进程列表”。如果是这种情况，您也许可以打开登录 my.cnf。

否则，我知道建议从 MySQL 开启二进制日志记录，您可以使用“mysqlbinlog”实用程序进行检查。

您将转到存储 MySQL binlog 的目录（在 Linux 上通常为 /var/lib/mysql 或 /var/lib/mysql/data），检查各种 bin 文件以获取最新的 - 类似于 thisisyourbinfile.001723 - 和只需在其上运行 mysqlbinlog 即可。输出非常混乱，但可以使用 sed 轻松解析或使用 grep 搜索。

还有一些实用程序可以在网络级别拦截 MySQL 数据包，并将它们显示在标准输出上。大多数都基于 tcpdump，实际上你只需要 tcpdump 本身：例如 [http://www.megalinux.net/using-tcpdump-for-mysql-query-logging/](http://www.megalinux.net/using-tcpdump-for-mysql-query-logging/)

# android - 使用 Notification.Builder 在通知中隐藏代码文本

> ID：11215932
> 
> 赞同：2
> 
> 时间：2012-06-26T21:06:10.983
> 
> 标签：android, notifications, ticker

我正在尝试在没有初始代码文本显示的情况下显示正在进行的通知。我可以通过在构造函数中将代码文本设置为 null 来使用旧样式的通知：

```
mNotification = new Notification(R.drawable.ic_stat_playing, null, System.currentTimeMillis()); 
```

但是，我注意到现在不推荐以这种方式实例化通知，而是建议使用 Notification.Builder。但是，即使我将代码文本设置为 null，我现在也无法在没有代码文本的情况下显示通知：

```
Notification.Builder builder = new Notification.Builder(this);

CharSequence contentText = "contentText here";

Intent launchIntent = new Intent(this, MainActivity.class);

// The PendingIntent to launch our activity if the user selects this
// notification
PendingIntent contentIntent = PendingIntent.getActivity(this, -1,
                launchIntent, PendingIntent.FLAG_UPDATE_CURRENT);

builder.setContentIntent(contentIntent)
    .setSmallIcon(R.drawable.ic_stat_playing)
    .setLargeIcon(null)
    .setTicker(null)
    .setOnlyAlertOnce(true)                 
    .setWhen(System.currentTimeMillis())
    .setContentTitle(contentTitle)
    .setOngoing(true)
    .setContentText(contentText);

mNotification = builder.getNotification();

startForeground(NOTIFICATION_ID, mNotification); 
```

是不是不能用新的 Notification.Builder 来关闭代码显示？是这样，这很不幸，因为我将无法从已弃用的代码中更新。

编辑 - 最终工作的代码：

```
mNotification = builder.getNotification();

mNotification.tickerView = null;

startForeground(NOTIFICATION_ID, mNotification); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:01:06.083

您根本不需要包含`.setTicker`，只需将其删除，如下所示：

```
builder.setContentIntent(contentIntent)
.setSmallIcon(R.drawable.ic_stat_playing)
.setLargeIcon(null)
.setOnlyAlertOnce(true)                 
.setWhen(System.currentTimeMillis())
.setContentTitle(contentTitle)
.setOngoing(true)
.setContentText(contentText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T07:13:03.393

尝试在构建器之后将tickerView设置为null。这对我来说很好 代码如下：

```
Notification notif = builder.build();
notif.tickerView = null;
mNotificationManager.notify(id, notif); 
```

# vb.net - 设置数据绑定 TextBox 控件的 BorderStyle 会覆盖新的 Text 值

> ID：11215934
> 
> 赞同：1
> 
> 时间：2012-06-26T21:06:28.507
> 
> 标签：vb.net, winforms, data-binding, textbox, border

我发现并能够在 Windows 窗体中重现一种特殊行为，即更新数据绑定文本框中的文本，然后更改边框样式将覆盖新的文本值。

重现：创建一个新窗体，添加三个 TextBox 控件，并使用以下代码：

```
Public Class Form1

    Private Class SampleObject
        Public Property MyText As String = String.Empty
    End Class

    Private _sampleObject1 As New SampleObject With {.MyText = "Old Text 1"}
    Private _sampleObject2 As New SampleObject With {.MyText = "Old Text 2"}
    Private _sampleObject3 As New SampleObject With {.MyText = "Old Text 3"}

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load

        TextBox1.DataBindings.Add(New Binding("Text", _sampleObject1, "MyText", True, DataSourceUpdateMode.OnValidation, String.Empty))
        TextBox2.DataBindings.Add(New Binding("Text", _sampleObject2, "MyText", True, DataSourceUpdateMode.OnValidation, String.Empty))
        TextBox3.DataBindings.Add(New Binding("Text", _sampleObject3, "MyText", True, DataSourceUpdateMode.OnValidation, String.Empty))

        TextBox1.Text = "New Text 1"
        TextBox2.Text = "New Text 2"
        TextBox3.Text = "New Text 3"

        'Application.DoEvents() '<- won't fix this.
        'TextBox2.Invalidate()  '<- won't fix this.
        'TextBox2.Update()      '<- won't fix this.
        'TextBox2.Refresh()     '<- won't fix this.

        TextBox1.BorderStyle = BorderStyle.Fixed3D
        TextBox2.BorderStyle = BorderStyle.FixedSingle
        TextBox3.BorderStyle = BorderStyle.None
    End Sub
End Class 
```

运行此应用程序将为您提供一个包含三个文本框的表单。第一个将显示新的文本值，因为它的边框样式没有改变。其他两个文本框将显示它们的旧值。

![结果如前所述。](../Images/3311ddca03e869c7a1e1f5e60f2243a0.png)

我做了以下观察：

1.  在 Form1_Load 的开头将第一个文本框的 BorderStyle 更改为其他内容将导致它也显示原始值而不是新值。
2.  如果未注释，注释掉的行都不能纠正问题。
3.  将文本分配移到边框样式更改后确实可以解决此问题，但此示例是使用 Form 类继承的更复杂应用程序的简化版本。
4.  注释掉数据绑定也可以纠正这个问题，但这不是一个可行的选择。
5.  在表单上放置一个新文本框并将其设置为第一个获得焦点的控件不会改变观察到的行为。
6.  设置文本值`_sampleObjectN.MyText`而不是`TextBoxN.Text`反转行为，以便没有边框更改的文本框显示旧值，而其他两个显示新值。
7.  将 DataSourceUpdateMode 更改为`DataSourceUpdateMode.OnPropertyChanged`将更正此问题，但也会更改绑定的行为。

明显的修复是更改文本分配，以便在更改 BorderStyle 或更改 DataSourceUpdateMode 后分配它，但我的问题是：为什么会首先发生这种情况？

**更新：**应同事的要求，我在表单中添加了一个按钮，并更改了它的`Click`事件以设置控件的边框样式，注释掉`Form_Load`. 当应用程序运行时，我在文本框中看到了新值，正如预期的那样，但是当我单击按钮时，文本框 2 和 3 上的边框发生了变化，并且它们的文本值恢复为旧值！

# backbone.js - 这个将对象作为参数传递给主干视图：“窗口”或“主干视图”对象？

> ID：11215935
> 
> 赞同：0
> 
> 时间：2012-06-26T21:06:28.600
> 
> 标签：backbone.js

编码：

```
var Appointment = Backbone.Model.extend({});
var appointment = new Appointment();
appointment.set('title', 'My knee hurts');
var AppointmentView = Backbone.View.extend({
  render: function(){
    $(this.el).html('<li>' + this.model.get('title') + '</li>');
  }
}); 
```

关于这个的问题： $(this.el)... 看起来“this”是“window”对象而不是事件对象？

如果你能深入解释它是如何工作的，请。

谢谢，约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:10:14.267

在backbone.js 视图中，`this`绑定到视图对象，而不是窗口。如果需要，您可以访问事件对象，并通过那里获取对目标元素的引用。看看这个[问题](https://stackoverflow.com/questions/5270188/backbone-js-event-binding)以获取更多信息。

# arrays - 在 Visual C# 中查找特定列并获取数组的值

> ID：11215938
> 
> 赞同：0
> 
> 时间：2012-06-26T21:06:40.780
> 
> 标签：arrays, datagrid, visual-c#-express-2010

我试图引用 DataGrid 的特定列并将所有值放入一个数组中。我没有收到任何错误，但问题是只有数组的第零个位置似乎有一个值，而其他位置为空。Datagrid 中有 4 条记录。我究竟做错了什么

这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
     {
        string[] arr = new string[10];

        DataTable getdata = new DataTable();
        foreach (DataGridViewRow row in this.dataGridView1.Rows)
        {
            DataGridViewCell cell = row.Cells[1]; 
            {
                if (cell != null && (cell.Value != null))
                {
                    for (int i = 0; i < dataGridView1.Rows.Count; i++)
                    {
                        arr[i] = cell.Value.ToString();
                    }
                }
            }
        }

        if (arr[0] != null)
        {
            textBox3.Text = arr[0].ToString();//Prints value
        }
        else if (arr[1] != null)//Seems to be null
        {
            textBox2.Text = arr[1].ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:20:13.803

尝试这个：

```
private void button1_Click(object sender, EventArgs e)
 {
    string[] arr = new string[10];
    int i =  0;

    DataTable getdata = new DataTable();
    foreach (DataGridViewRow row in this.dataGridView1.Rows)
    {
        DataGridViewCell cell = row.Cells[1]; 
        {
            if (cell != null && (cell.Value != null))
            {
                arr[i] = cell.Value.ToString();
            }
            i++;
        }
    } 
```

希望这可以帮助。- 柯里士

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:22:26.947

试试像这样的东西

```
private void button1_Click(object sender, EventArgs e)
{
        List<String> columnValues = new List<String>

        foreach (DataGridViewRow row in this.dataGridView1.Rows)
        {
            DataGridViewCell cell = row.Cells[1]; 
            {
                if (cell != null && (cell.Value != null))
                {
                   columValues.Add(cell.Value.ToString());
                   if (columnValues.Count == 2)
                   {
                      break;
                   }
                }
            }
        }

        if (columnValues.Count > 0)
        {
          if (columnValues.Count < 2)
          {
            textBox3.Text = columnValues[0];//Prints value
          }
          else 
          {
               textBox2.Text = columnValues[1];
          }
        }
    } 
```

不喜欢数组。超过 11 个非空值的东西会翻倒。不知道那个数据表是干什么用的。如果您只将非空值放入集合中，为什么要检查它们是否为空。String.ToString() 似乎有点毫无意义。

添加了一个中断，因为您只对 2 个非空值感兴趣。并整理了最后一点逻辑，尽管我想不出它背后的推理。

# jquery - 根据另一列中的自动完成结果更改 jqGrid 文本列的可编辑属性

> ID：11215942
> 
> 赞同：7
> 
> 时间：2012-06-26T21:07:07.237
> 
> 标签：jquery, jqgrid

我正在使用带有内联编辑的 jqGrid 4.4.0。为了这个问题，我的网格有四列：一个 ID 列 (SomeGridRowId)、一个带有 jQ​​uery 自动完成功能的文本列 (Autocomplete)、一个单字符文本列 (SingleChar) 和一个隐藏`boolean`列 (CanEditSingleChar)。我需要根据列的值启用或禁用对单个字符列的编辑`CanEditSingleChar`。我已经使用`onSelectRow`and对现有行进行了这项工作`setColProp`，但由于某种原因，我无法让它在新插入的行上正常运行。如果我添加一个新行并从自动完成中选择一个值，则该`SingleChar`列**始终**不可编辑。我已经使用 Chrome 和 IE 开发工具逐步完成了 Javascript；列值和属性设置正确，但`SingleChar`列的`editable`属性没有反映这一点。

我为巨大的代码片段道歉，但我不想遗漏任何内容。

```
$("#coolGrid").jqGrid({
    url: '@Url.Action("GetCoolGridData")',
    postData: {
        someId: function () { return $("#someId").val(); },
        otherStaticArg: function () { return 1; }
    },
    datatype: 'json',
    mtype: 'POST',
    loadonce: true,
    cellsubmit: 'clientArray',
    editurl: 'clientArray',
    scroll: true,
    pager: $("#coolGridPager"),
    rowNum: 200,
    sortname: 'SomeGridRowId',
    sortorder: 'asc',
    viewrecords: true,
    height: '100%',
    colNames: ['SomeGridRowId', 'CanEditSingleChar', 'Autocomplete', 'SingleChar'],
    colModel: [
        { name: 'SomeGridRowId', index: 'SomeGridRowId', hidden: true },
        { name: 'CanEditSingleChar', index: 'CanEditSingleChar', hidden: true }, 
        {
            name: 'Autocomplete',
            index: 'Autocomplete',
            width: 220,
            editable: true,
            edittype: 'text',
            editoptions: {
                dataInit: function (elem) {
                    $(elem).autocomplete({
                        source: '@Url.Action("GetSomeGridAutocomplete")',
                        minLength: 2,
                        select: function (event, ui) {
                            var rowId = getRowId($(this));
                            if (ui.item) {
                                $("#coolGrid").jqGrid('setCell', rowId, 'CanEditSingleChar', ui.item.CanEditSingleChar, '', '');
                                $("#coolGrid").jqGrid('setCell', rowId, 'Autocomplete', ui.item.label, '', '');
                                setSingleCharEditMode(rowId);
                            }
                        }
                    });
                }
            }
        },
        {
            name: 'SingleChar',
            index: 'SingleChar',
            width: 10,
            editable: true,     //default to true, most are editable
            edittype: 'text'
        }
    ],
    onSelectRow: function (clickedRow) {
        if (clickedRow && clickedRow != $.coolGridLastSelectedRow) {
            $("#coolGrid").jqGrid('saveRow', $.coolGridSelectedRow, false, 'clientArray');
            $.coolGridLastSelectedRow = clickedRow;
        }
        setSingleCharEditMode($.coolGridLastSelectedRow);
        $("#coolGrid").jqGrid('editRow', $.coolGridLastSelectedRow, true);
    },
    afterInsertRow: function (rowid, rowdata, rowelem) {
        if (rowid == 'new_row') {       //shown solely for completeness, pretty sure this is not the problem
            var newRowIndex = $("#coolGridNewRowIndex").val();
            if (!newRowIndex)
                newRowIndex = 1;
            var newRowId = rowid + "_" + newRowIndex;
            $("#new_row").attr('id', newRowId);
            newRowIndex++;
            $("#coolGrid").val(newRowIndex);
            $("#coolGrid").jqGrid('setSelection', newRowId, true);
        }
    }
});
$("#coolGrid").jqGrid('navGrid', '#coolGridPager',
{
    add: false,
    del: false,
    edit: false,
    search: false,
    beforeRefresh: function () {
        $("#coolGrid").jqGrid('setGridParam', { datatype: 'json' });
    }
});
$("#coolGrid").jqGrid('inlineNav', '#coolGridPager',
{
    edit: false,
    add: true,
    addtext: "Add",
    save: false,
    cancel: false,
    restoreAfterSelect: false,
    addParams: {
        position: 'last',
        addRowParams: {
            keys: true
        }
    }
}); 
```

和`setSingleCharEditMode`功能：

```
function setSingleCharEditMode(rowid) {
    var rowData = $("#coolGrid").jqGrid('getRowData', rowid);
    if (rowData.CanEditSingleChar === "false") {
        $("#coolGrid").jqGrid('setColProp', 'SingleChar', { editable: false });
    } else {
        $("#coolGrid").jqGrid('setColProp', 'SingleChar', { editable: true });
    }
} 
```

我已经尝试了一大堆东西，翻阅了一堆其他 SO 问题，疯狂地用谷歌搜索......一切都无济于事。我已经把头发拉了出来。如何在另一列`editable`自动完成后控制一列的属性`select`，全部在新行上？

**编辑**
最后， 我在[这里有一个工作示例](http://goo.gl/MbFuS)。如果添加一行，然后在列中选择任一“非典型 *”，则`Autocomplete`可以重现此行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:00:29.657

# java - PDPageContentStream Y 轴基础

> ID：11215943
> 
> 赞同：1
> 
> 时间：2012-06-26T21:07:18.447
> 
> 标签：java, pdf, pdfbox

抱歉，如果这是一个可怕的问题，但是有什么方法可以告诉 PDPageContentStream y 轴上的 0 实际上是页面的顶部而不是底部？

我们以这种方式存储了所有坐标（例如，“0,10”是页面左侧*向下*的十个点），当我们生成 PDF 时，我们发现了无数与计算错误的数学有关的错误该值的倒数，以便我们可以调用 moveTextPositionByAmount()。

提前致谢！

# javascript - 跨多个视图使用的主干事件

> ID：11215945
> 
> 赞同：1
> 
> 时间：2012-06-26T21:07:24.670
> 
> 标签：javascript, model-view-controller, backbone.js

我计划在我的网站上使用多个弹出窗口。每个弹出窗口都将由不同的视图呈现。如何在每个使用弹出窗口的多个视图中共享某些事件，例如在弹出窗口外部单击以关闭它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:14:16.273

使用骨干网的内置扩展可能非常适合这一点。你可以有一个像这样的基本视图：

```
MyApp.PopupView = Backbone.View.extend({
  // ... your shared code here ...
}) 
```

并且所有其他弹出窗口都可以扩展基本弹出窗口：

```
MyApp.UserPopupView = MyApp.PopupView.extend({
  // ... user popup specific view code here ...
}) 
```

值得注意的是，包括`events`您在子视图中指定的任何属性都将覆盖父视图中的属性。为避免这种情况，您需要合并父级的值（在事件的情况下）或使用`delegateEvents`（[文档](http://backbonejs.org/#View-delegateEvents)）以编程方式设置它们。

# html - 多点触控与 HTML5 以及对 Windows 7 的本机支持

> ID：11215946
> 
> 赞同：1
> 
> 时间：2012-06-26T21:07:45.590
> 
> 标签：html, windows-7, touch, virtual, multi-touch

我是 HTML5 新手，我正在尝试重新创建这个仅支持 iOS 的[灯桌。](https://developer.apple.com/safaridemos/light-table.php)

所以用户可以捏和放大或缩小，但我需要它来支持 Windows 7 原生触控。

它似乎以前[做过，](https://vimeo.com/22110766)但没有源代码或实时站点。

有什么想法如何使用 HTMl5 创建该灯表但支持 Windows？

# resources - META-INF/resources 中的资源未找到并返回 404

> ID：11215962
> 
> 赞同：6
> 
> 时间：2012-06-26T21:09:56.043
> 
> 标签：resources, http-status-code-404, meta

我的 WEB-INF/lib 目录中有一个 jar 文件。在那个 jar 里面是一个 META-INF/resources 目录，里面有一个文件（image.jpg）。据我了解 servlet 3.0 API，当我将其部署为 Tomcat 7 下的 Web 应用程序的一部分时，我应该能够访问

```
http://host/context/image.jpg 
```

并查看从 jar 中加载的图像。但相反，我收到 404 错误。就好像 servlet_api 没有从我的 jar 中加载资源，即使文档说它应该这样做。

我究竟做错了什么？我需要在 web.xml 文件中添加一个字段来告诉 tomcat 加载这些资源并使它们可用于 Web 浏览器吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T15:01:53.483

罐子的构建方式是正确的。Tomcat 7 附带 Servlet 3.0 jar，但它不会从 jar 中提供资源，除非 web.xml 明确声明它是 3.0 版。Tomcat 不会假定您需要 Servlet 3.0 功能。

在您的 web.xml 中，您的 web-app 标签需要像这样开始：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0"> 
```

*请注意对 3.0 版的引用*

只要您指定 web 应用程序是 3.0 版，您就可以访问 Servlet 3.0 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-04T14:18:49.290

也许它可以帮助某人。

有些人在他们的 catalina.properties 中制作：

```
tomcat.util.scan.StandardJarScanFilter.jarsToSkip=* 
```

加快 Tomcat 的启动时间。

如果我在我的 Tomcat 9 上这样做，jar 中的资源对我来说是无法访问的。我不得不例外：

```
tomcat.util.scan.StandardJarScanFilter.jarsToScan = libraryWithResources.jar,.... 
```

问题就消失了。

# bots - 如何阻止 PicScout 机器人

> ID：11215963
> 
> 赞同：2
> 
> 时间：2012-06-26T21:10:07.197
> 
> 标签：bots, robot

我想阻止 PicScout Web Robot 访问我的网站。我已经读到它的行为不像一个“好”的机器人，那么我应该怎么做呢？

*请注意：*我使用托管的 CMS。我无权访问服务器端脚本。我不介意包含服务器端脚本的答案，但我正在寻找一种非服务器端的方式来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:40:10.837

PicScout 是版权验证机器人，而不是搜索引擎蜘蛛。因此，它们的行为不像“好”机器人也许是可以理解的。他们更像是一家私人保安公司。另请注意，互联网上并没有要求他们这样做：robots.txt 是一种约定，而不是规则。

有人研究过如何停止或减慢 PicScout。一个简单的谷歌搜索将有很长的路要走。 [这](http://rankexploits.com/protect/2011/12/four-steps-to-slow-down-image-scrapers/)是一个稍微过时的例子。但是，所有建议都是 .htaccess 配置调整，听起来您可能无法访问。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-04-13T02:55:54.463

添加到 robots.txt

```
# Block PicScout Crawler from crawling site 
User-agent: PicScout
Disallow: / 
```

# facebook - 更改在 facebook 发送框中拍摄的图像

> ID：11215964
> 
> 赞同：0
> 
> 时间：2012-06-26T21:10:09.333
> 
> 标签：facebook, image, send

当我创建一个发送按钮时，facebook api 会找到一个我不想成为共享页面图标的图像。在外观上，facebook 拍摄附近的图像并在框中使用它。有可能欺骗 facebook 所以它使用我想要的图像？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:43:53.343

您需要专门设置要使用的图像。如果没有，那么该应用程序将只拍摄它在您的页面上遇到的第一张图像。您可以通过在页眉中设置特定的元标记来为页面设置图像。有关各种元标记的信息，请参阅此[页面](http://developers.facebook.com/docs/opengraphprotocol/)。

您还可以将 url 当前 URL 粘贴到[facebook 调试工具](http://developers.facebook.com/tools/debug)中，它会告诉您它将使用什么图像，并就需要添加哪些元标记提供建议。

# linq-to-sql - 创建一个查询 2 个表的 linq 查询

> ID：11215966
> 
> 赞同：0
> 
> 时间：2012-06-26T21:10:11.757
> 
> 标签：linq-to-sql

我真的是 linq 查询的新手，我希望你们能帮助我处理这个查询

我有一个 Product 表和一个 ProductCategory 表

productCategory 表是产品表和类别表之间的映射

所以我需要从产品表中获取所有产品，这些产品在 productCategory 表中具有某个类别 ID 的映射表。例如 categoryId 5 中的所有产品

我真的不确定 Linq 查询应该如何进行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:18:12.137

应该很简单：

```
myContext.Products.Where(p => p.ProductCategory.CategoryID == 5); 
```

# xamarin.ios - 教程“Tasky”不起作用

> ID：11215972
> 
> 赞同：0
> 
> 时间：2012-06-26T21:10:34.527
> 
> 标签：xamarin.ios

我是一个新用户，正在努力理解故事板的构造。为了提供帮助，我完成了教程 5（“使用表格和单元格”），但无法使 segue 工作（单击主单元格上的单元格时没有任何反应）。显然我做错了什么，所以我搜索了一些完整的源代码以查看缺少的内容（本教程只有片段）。但是，基于没有 Storyboard 的早期版本的 Xcode，示例页面上相同“应用程序”的代码似乎完全不同。多么令人沮丧！为了让我走上正确的道路，有没有人得到本教程的完整（工作！）代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:04:18.030

Tasky 的完整代码可以在 xamarins github 存储库中找到：[https ://github.com/xamarin/mobile-samples](https://github.com/xamarin/mobile-samples)

这也可以通过 iOS 文档页面顶部的“示例”链接找到：http: [//samples.xamarin.com/Details/iOS/bd7480f9-cef7-4bba-94cb-1579ae2865b8](http://samples.xamarin.com/Details/iOS/bd7480f9-cef7-4bba-94cb-1579ae2865b8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:20:28.223

我猜你正在看这个教程[http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode%2c_Interface_Builder%2c_and_Storyboards](http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells/Part_5_-_Using_XCode%2c_Interface_Builder%2c_and_Storyboards)

完整的示例可从第一页[http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells](http://docs.xamarin.com/ios/tutorials/Working_with_Tables_and_Cells)
下载， 包括位于 http://docs.xamarin.com/@api/deki/files/1354 的 Storyboard 示例[代码/=StoryboardTables.zip](http://docs.xamarin.com/@api/deki/files/1354/=StoryboardTables.zip)

食谱部分还有*另一个*Storyboard 示例，您可能会觉得有帮助： [http](http://docs.xamarin.com/ios/recipes/General/Storyboard/Storyboard_a_TableView) ://docs.xamarin.com/ios/recipes/General/Storyboard/Storyboard_a_TableView （也有完整的可下载源[http://docs.xamarin.com /@api/deki/files/1124/=Storyboard_a_Table.zip](http://docs.xamarin.com/@api/deki/files/1124/=Storyboard_a_Table.zip) )

# javascript - Javascript返回具有不同样式的元素？

> ID：11215975
> 
> 赞同：0
> 
> 时间：2012-06-26T21:10:54.170
> 
> 标签：javascript, jquery, html, css, styles

我有一个脚本，它隐藏一个元素及其内容，并在单击时加载另一个元素及其内容。奇怪的是，它似乎把 1px 的边框堆积起来，返回第二个有 2px 边框的元素，而显示它仍然有 1。

这是链接代码：

```
<li ><a href="plumbing.php">Plumbing</a></li> 
```

这是有问题的元素：

```
 <div id="box1">
        <ul class="tabs">
            <li><a href="#" class="defaulttab" rel="tabs1">Tab #1</a></li>
            <li><a href="#" rel="tabs2">Tab #2</a></li>
            <li><a href="#" rel="tabs3">Tab #3</a></li>
        </ul>

        <div class="tab-content" id="tabs1">Tab #1 content</div>
        <div class="tab-content" id="tabs2">Tab #2 content</div>
        <div class="tab-content" id="tabs3">Tab #3 content</div>
    </div> 
```

除了只有 1 个选项卡和 1 个选项卡内容（出于测试目的）之外，加载页面上的元素是相同的。

风格：

```
#box1{width:700px;height:100%;float:left;background:url(../images/box1bg_03.gif);background-repeat:repeat-x;border: 1px solid #d0ccc9;} 
```

Javascript：

```
$(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('.navcontent li a').each(function(){
        var href = $(this).attr('href');
        if(hash==href.substr(0,href.length-5)){
            var toLoad = hash+'.html #box1';
            $('#box1').load(toLoad)
        }                                           
    });

    $('.navcontent li a').click(function(){

        var toLoad = $(this).attr('href')+' #box1';
        $('#box1').hide('fast',loadContent);
        $('#load').remove();
        $('#box1').append('<span id="load">LOADING...</span>');
        $('#load').fadeIn('normal');
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
        function loadContent() {
            $('#box1').load(toLoad,'',showNewContent())
        }
        function showNewContent() {
            $('#box1').show('normal',hideLoader());
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    });

}); 
```

从理论上讲，除了边界之外，一切都运行良好 - [http://imgur.com/a/isqgH](http://imgur.com/a/isqgH)。很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:31:06.133

jQuery`load`将内容插入到指定的容器中。所以我的猜测是，即使你用`#box1`相同的“元素”替换内容，你只是`#box1`用新内容填充内部。您实际上并没有替换`#box1`导致它翻倍的边框。

如果我的解释是有道理的，我想知道。基本上你正在放入`#box1`，`#box1`但两个框边框仍然可见。我会尝试将边框移动到包装元素。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:08:33.117

通过进行一些更改来修复：

```
 <div id="box1">
        <div id="box1content"> //wrap up in extra div
            <ul class="tabs">
                <li><a href="#" class="defaulttab" rel="tabs1">Tab #1</a></li>
                <li><a href="#" rel="tabs2">Tab #2</a></li>
                <li><a href="#" rel="tabs3">Tab #3</a></li>
            </ul>

            <div class="tab-content" id="tabs1">Tab #1 content</div>
            <div class="tab-content" id="tabs2">Tab #2 content</div>
            <div class="tab-content" id="tabs3">Tab #3 content</div>
        </div>
    </div> 
```

对代码进行相应的修复：

```
$(document).ready(function() {

    var hash = window.location.hash.substr(1);
    var href = $('.navcontent li a').each(function(){
        var href = $(this).attr('href');
        if(hash==href.substr(0,href.length-5)){
            var toLoad = hash+'.html #box1content';//change to fixed div
            $('#box1content').load(toLoad)//change to fixed div
        }                                           
    });

    $('.navcontent li a').click(function(){

        var toLoad = $(this).attr('href')+' #box1content';//change to fixed div
        $('#box1content').hide('fast',loadContent);//change to fixed div
        $('#load').remove();
        $('#box1content').append('<span id="load">LOADING...</span>');//change to fixed div
        $('#load').fadeIn('normal');
        window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
        function loadContent() {
            $('#box1content').load(toLoad,'',showNewContent())//change to fixed div
        }
        function showNewContent() {
            $('#box1content').show('normal',hideLoader());//change to fixed div
        }
        function hideLoader() {
            $('#load').fadeOut('normal');
        }
        return false;

    });

}); 
```

最终的结果是动画有点不同，只有文本淡入淡出，但它完成了工作。

# .net - 双跳 SQL 委派不起作用

> ID：11215982
> 
> 赞同：3
> 
> 时间：2012-06-26T21:11:32.127
> 
> 标签：.net, sql, delegation

我一直在尝试诊断这个问题，不幸的是，在尝试以域用户身份连接到 sql db 时，我仍然遇到可怕的匿名登录问题。

采取的步骤：

*   使用委托服务帐户创建的应用程序池
*   仅使用集成 Windows 身份验证运行的站点/虚拟目录
*   确保站点本身可以​​使用 kerberos KB 215383
*   服务帐户添加到 IIS_WPG 组
*   服务帐户添加到本地安全设置下的“作为操作系统的一部分”
*   服务帐户已添加到本地安全设置下的作为服务登录
*   为网址 + 服务帐户（和 FQDN）设置的 HTTP SPN
*   为 sql 框和域 acct sql 设置的 MSSQLSvc SPN 运行为
*   信任委托开启服务账户、指定服务和 sql 服务账户

毕竟，我仍然得到与开始时完全相同的错误。用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败。到目前为止，这使我的秃顶至少提前了 5 年。我将非常感谢有关诊断或设置的任何其他提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T14:21:53.623

原来使用 setspn -L 发现与服务帐户有一些冲突。使用 setspn -D 消除这些冲突解决了这个问题。

第一次做这个，Kerberos 很挑剔！和往常一样，感谢 SO 社区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:21:16.650

如果您使用 NTLM 身份验证，则双跳将不起作用。您可能必须安装 Kerberos。

[http://blogs.msdn.com/b/besidethepoint/archive/2010/05/09/double-hop-authentication-why-ntlm-fails-and-kerberos-works.aspx](http://blogs.msdn.com/b/besidethepoint/archive/2010/05/09/double-hop-authentication-why-ntlm-fails-and-kerberos-works.aspx)

# android - 更改图钉文本颜色

> ID：11215985
> 
> 赞同：1
> 
> 时间：2012-06-26T21:11:46.587
> 
> 标签：android, bing-maps, pushpin

我试图通过`Pushpin`对象的文本显示数据。但是，文本颜色默认为白色，当背景为 road-style 时几乎不可见`MapView`。通过 API，特别关注`PushpinOptions`，我找不到任何操纵文本颜色的东西。考虑到这似乎是一个相当基本的功能，我有点困惑为什么它不存在，或者至少很难找到。

我是否遗漏了什么或者 Bing Maps for Android 真的不允许您更改`Pushpin`对象的默认文本颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:57:10.053

查看源代码后，不支持更改文本颜色。

源代码可在[http://bingmapsandroidsdk.codeplex.com/](http://bingmapsandroidsdk.codeplex.com/)获得，因此您可以破解它以获得您想要的东西，具体取决于 Bing Maps API 本身是否支持您想要的东西。这当然需要一些额外的努力，但可能是您唯一的选择，而不是使用图层的解决方法。

**更新**

在[MSDN 文档中对图钉类](http://msdn.microsoft.com/en-us/library/gg427615)进行了一些额外的挖掘之后，它似乎不受支持，不确定是否有更巧妙的方法来解决这个问题，但实现附加功能并不是一件简单的事情API

# c# - 列表为空时隐藏下拉列表

> ID：11215991
> 
> 赞同：0
> 
> 时间：2012-06-26T21:12:25.747
> 
> 标签：c#, javascript, asp.net-mvc-3

我目前有一个在页面加载时填充的下拉列表，有时下拉列表不包含任何内容并且为空。每当列表中没有任何项目时，我都希望隐藏下拉列表。我以为我可以通过 javascript 做到这一点，但我不确定我做错了什么，因为在添加 javascript 后它仍然出现在页面上。

下拉选择：

```
<select data-bind="options: endReason() ? endReason().SubReasons : [], value: subReasonId, optionsText: 'Text', optionsValue: 'Value', visible: isChecked"
                            name="subReasons">
                        </select> 
```

这是我的 Javascript：

```
<script type="text/javascript"> 
function OnClientDropDownOpening(sender, eventArgs) 
{   var combo = $find("<%= subReasons %>"); 
    items = combo.get_items(); 
    if(items.get_count()==0) 
    { 
         eventArgs.set_cancel(true); 
    } 
} 
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T21:15:12.997

为什么是 JavaScript？当您可以在服务器端使用条件并且如果没有任何要渲染的元素时甚至不渲染 ddl 时，似乎完全浪费了带宽：

```
@if (Model.Items.Count() > 0)
{
    @Html.DropDownListFor(x => x.SelectedItemId, Model.Items)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:18:52.040

这应该在纯 JavaScript 中完成这项工作：

```
var select = document.getElementById("select");
var options = select.getElementsByTagName("option");
document.write('Select has ' + options.length + ' options');​ 
```

[jsFiddle](http://jsfiddle.net/8BZcW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:18:11.720

以下要求您包含 jQuery 库。

```
<script type="text/javascript">
$().ready(function () {
    if ($('select[name=subReasons]').length == 0)
        $('select[name=subReasons]').remove();
});
</script> 
```

# java - 方法中声明的变量的范围

> ID：11215993
> 
> 赞同：2
> 
> 时间：2012-06-26T21:12:43.067
> 
> 标签：java

主变量中的变量是公共变量吗？

```
 public static void main(String[] args) {
  .........

    for(int i=0;i<threads.length;i++)
        try {
            threads[i].join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    long time=0; 
    ....
    } 
```

`i`它们`time`都是公共变量吗？

当然，如果我的推理是正确的，那么任何属于公共方法的变量都应该被认为是公共的。我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T21:14:19.237

变量`i`和`time`仅对函数是局部的。它们在外面是不可见的。只有类成员变量可以在外部访问（取决于它们的访问修饰符）。

[SO here](https://stackoverflow.com/questions/1177723/what-is-the-difference-between-a-member-variable-and-a-local-variable)中已经更详细地介绍了这种区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T21:14:12.777

不。变量“i”和“时间”在主方法中声明，因此它们的范围是本地的，仅限于主方法。您不能在方法之外使用它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T21:14:25.670

它们不被视为公开的。它们是局部变量。它们在该方法之外没有任何可见性（更不用说该类）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T21:15:21.577

不。如果变量在方法内部——即使是主方法——它是一个局部变量，它的范围只在那个方法内。

```
public class MyClass {
    public int x; // this is a public variable

    public void doSomething() { // this is a public method
        int y = 9; // this is a local variable
    }

    public int getX() {
        return x; // we can do this
    }

    public int getY() {
        return y; // we CANNOT do this because y is not public and is only 
                  // defined within the doSomething() method
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T21:17:11.013

正如其他人所说，这两个变量只能在 main 中使用。但是 i 的作用域更加有限——因为它是在 for 循环中声明的，所以只能在 for 循环中使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T21:27:44.287

局部变量永远不会公开，无论它们可能驻留在哪个方法（或构造函数）中。局部变量的范围最多是整个方法体。

“public”、“private”和类似的概念不适用于局部变量，但适用于实例或类变量。关键区别在于局部变量驻留在堆栈中，因此它们的范围自动限制在堆栈帧的生命周期内。他们不需要任何访问规则。访问类型“private”、“default”等表示需要特别施加的限制，因为它们不是“自然的”。与局部变量的范围不同，它们也可以被反射破坏。