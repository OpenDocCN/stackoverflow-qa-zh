# StackOverflow 问答 10715000-10715999

# c++ - 阿拉伯语文本的 BSTR 到 CString 转换

> ID：10715001
> 
> 赞同：1
> 
> 时间：2012-05-23T07:03:19.333
> 
> 标签：c++, visual-c++, unicode, cstring, bstr

我的 VC++ (VS2008) 项目使用多字节字符集。

我有以下代码将日期字符串转换为 COleDateTime

```
_bstr_t bstr_tDate = bstrDate; //bstrDate is populated by a COM function

const CString szStartDateTime = bstr_tDate.operator const char *();

bool bParseOK = oleDateTime.ParseDateTime(szStartDateTime); 
```

此代码适用于所有区域设置，但在阿拉伯语区域设置中失败，输入日期为以下格式：**21/05/2012 11:50:31م**

转换后，CString 包含垃圾字符，解析失败：**01/05/2012 11:50:28ã**

是否有适用于阿拉伯语设置的 BSTR 到 CString 的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:30:26.260

[BSTR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069(v=vs.85).aspx)是由 UTF-16 编码的 Unicode 代码点（宽“字符”，16 位）组成的字符串：

```
typedef WCHAR OLECHAR;
typedef OLECHAR* BSTR; 
```

这意味着像 'م' 这样的特殊字符由 single 表示`WCHAR`。在多字节字符串（C 风格`char*`或`std::string`）中，这些特殊字符由更多字符表示（因此称为“多字节”）。

您`CString`包含垃圾字符的原因是因为您`char*`直接从`_bstr_t`. 您需要先将此宽字符字符串转换为多字节字符串。有更多方法可以做到这一点，其中之一是使用[WideCharToMultiByte 函数](http://msdn.microsoft.com/en-us/library/dd374130(v=vs.85).aspx)。

这个问题也会帮助你：[你如何正确使用 WideCharToMultiByte](https://stackoverflow.com/q/215963/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T03:50:57.037

尽管有 MBCS 设置，但您尝试使用 CString 进行操作是可能的，但它仅支持阿拉伯语。

开始支持所有 Unicode 可能要容易得多。如果您按照 utf8everywhere.org 的 Windows 部分中的说明进行操作，则可以在不对现有代码造成太大损害的情况下完成此操作（您可以保留 std::string 和 char*）。

# php - PHP会话固定示例和修复

> ID：10715002
> 
> 赞同：4
> 
> 时间：2012-05-23T07:03:22.730
> 
> 标签：php, security, session

我的问题是关于会话固定的总结：

*   Alice 在银行有一个账户[http://unsafe.com/](http://unsafe.com/)。不幸的是，爱丽丝不是很精通安全。

*   马洛里要去银行取爱丽丝的钱。

*   Alice 对 Mallory 有一定程度的信任，并将访问 Mallory 发送给她的链接。

    1.  Mallory 已确定[http://unsafe.com/](http://unsafe.com/)接受任何会话标识符，接受来自查询字符串的会话标识符并且没有安全验证。[http://unsafe.com/](http://unsafe.com/)因此不安全。
    2.  Mallory 给 Alice 发了一封电子邮件：“嘿，看看这个，我们银行有一个很酷的新帐户摘要功能，http://unsafe.com/?SID=I_WILL_KNOW_THE_SID”。Mallory 正试图将 SID 固定为 I_WILL_KNOW_THE_SID。
    3.  Alice 感兴趣并访问[http://unsafe.com/?SID=I_WILL_KNOW_THE_SID](http://unsafe.com/?SID=I_WILL_KNOW_THE_SID)。弹出通常的登录屏幕，Alice 登录。
    4.  Mallory 访问[http://unsafe.com/?SID=I_WILL_KNOW_THE_SID](http://unsafe.com/?SID=I_WILL_KNOW_THE_SID)，现在可以无限制地访问 Alice 的帐户。（信用：RichieHindle）

问题：

Q1 - 有没有办法明确阻止站点接受任何会话标识符？

Q2 - 我没有在我的网站上使用 $_GET 变量，所以有没有办法阻止接受来自查询字符串的会话标识符？

*   注意：我正在使用带有 SSL 的 php 5.4.3，并且还将使用 session_regenerate_id..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T14:15:11.383

您可以设置他在回答中提到的 martinstoeckli 选项，但这不会阻止会话固定。它使会话固定更难攻击，但并不能阻止它。

正如 ServerBloke 所提到的，您可以在验证用户的登录信息之后和显示需要身份验证的第一页之前立即使用 session_regenerate_id() 来防止会话固定。

使攻击者更难利用会话固定并不能阻止会话固定。您必须生成一个新的会话 ID。

越来越多的人使用公共不安全、不受信任的 Wi-Fi 热点。会话可以从空气中嗅出。在物理网络上，它们可以从电线上被嗅出。他们还可以通过使用中间人攻击来强迫您访问任何 URL。因此，即使攻击者无法向您发送 URL，会话固定仍然是一个问题。

知道会话（和密码）可以被嗅探，还需要另一个步骤来防止会话劫持。那就是 HTTPS (TLS/SSL)。

所有需要身份验证的受保护页面都只能通过 HTTPS 访问。因此，登录页面（用户发送用户名和密码的页面）应该通过 HTTPs 访问。在同一个脚本中，您必须重新生成一个新的 sessionID。然后必须通过 HTTPs 访问会话剩余部分的所有页面，以保护新的会话 ID。

这是一个示例伪代码 login.php 脚本：

```
// Force SSL
if($_SERVER["HTTPS"] != "on") {
  die('Must login via HTTPS');
}

// Load the current sessionID
session_start();

// Validate the login information, being sure to escape the input
...
if (! $valid) {
  die('Invalid login');
}

// Start the new session ID to prevent session fixation
session_regenerate_id();

// Clear the old session
$_SESSION=array();

// Log them in
$_SESSION['user_id'] = $userID; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:44:26.563

如果您[`session_regenerate_id()`](http://php.net/manual/en/function.session-regenerate-id.php)每次用户登录时都使用，您将阻止会话固定。当用户登录时，他们固定的会话 ID 将被重新生成，从而阻止攻击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:36:27.867

问题 1) 如果您的应用程序需要会话，您将**必须**发送某种会话 ID。如果您的应用程序不使用会话，则无需调用`session_start()`，并且根本不使用 id（无论是通过 URL 还是 cookie 发送）。

问题 2）您可以配置 PHP，以仅接受来自 cookie 的会话 ID，并忽略来自 URL 的 ID（请参阅[session.use_only_cookies](http://www.php.net/manual/en/session.configuration.php#ini.session.use-only-cookies)）。如果您这样做，您还应该检查选项[session.use_trans_sid](http://www.php.net/manual/en/session.configuration.php#ini.session.use-trans-sid)是否设置为 0（这是默认设置）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:12:01.707

我不完全明白，这真的是一个问题吗？

Q1。我认为您需要检查会话存储中是否已经从 COOKIE 的 GET 收到了 SID（例如，在数据库中）。如果是 - 没关系，如果不是，在服务器端创建一个新的并使用新的 SID 进行 http 重定向。

Q2。我不使用 php 5.4，但我认为以下代码会有所帮助：

```
unset($_GET['sid']) 
```

更新：我认为常见的解决方法不仅仅是后端服务器可以生成 SID 标识符。没有用户对此的可能性！

# sql - 从 SQL Server 中的行创建列

> ID：10715004
> 
> 赞同：5
> 
> 时间：2012-05-23T07:03:23.670
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 SQL 查询，它以以下格式提供数据；

```
Total Hours   Year   
  100.00      2012 
  200.00      2012 
  300.00      2012 
   75.00      2011 
  150.00      2011 
   50.00      2010 
  125.00      2010 
```

我需要汇总总小时数并将结果集设为；

```
2012   2011  2010
 600    225   175 
```

请在这里帮助我！如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:32:29.273

您可以使用 PIVOT 执行此操作，可以是您硬编码年份的静态 PIVOT，也可以是在运行查询时创建年份列表的动态 PIVOT：

静态枢轴：

```
create table table1
(
  totalhours decimal(10, 2),
  year int
)

insert into table1 values(100, 2012)
insert into table1 values(200, 2012)
insert into table1 values(300, 2012)
insert into table1 values(75, 2011)
insert into table1 values(150, 2011)
insert into table1 values(50, 2010)
insert into table1 values(125, 2010)

select *
from
(
  select *
  from table1
) x
pivot
(
  sum(totalhours)
  for year in ([2012], [2011], [2010])
) p 
```

[这是一个带有示例的 SQL Fiddle](http://sqlfiddle.com/#!3/b2fe2/1)

动态枢轴：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.year) 
            FROM table1 c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
            (
                select totalhours, year
                from table1
           ) x
            pivot 
            (
                 sum(totalhours)
                for year in (' + @cols + ')
            ) p '

execute(@query) 
```

两者都会给你相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:05:36.337

在 msdn 上做 red this[使用 PIVOT 和 UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)这将很容易解决问题..

[SQL SERVER – PIVOT 和 UNPIVOT 表示例](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:13:12.377

一个。您可能会以某种方式获得这样的数据，但是这样做可能会有所帮助：

```
 select sum(p.TotalHours), p.Year From someTable p
    GROUP BY p.Year 
```

湾。你应该做一些逻辑来把列变成行和 vs。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:10:34.120

您可以使用**sql 分组** [http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

```
select 
    [Year], 
    SUM([Hours]) as HoursByYear
from 
    #table  
group by 
    [Year] 
```

结果：

```
 Year    HoursByYear
    2010    175
    2011    225
    2012    600 
```

或**pivot**，就像 Pranay Rana 建议的那样

```
select
    [2010], [2011], [2012]
from
    (select [YEAR], [Hours]
        from #table) AS SourceTable
    pivot
    (
        sum([Hours])
        for [Year] IN ([2010], [2011], [2012])
    ) as PivotTable 
```

结果：

```
2010    2011    2012
175     225     600 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-23T07:40:38.840

```
select sum("Total Hours") as "Total Hours", Year 
from tablename 
group by Year 
```

这个简单的查询将为您提供所需的输出。

# java - 如何在java中检索环境变量（Jenkins）

> ID：10715006
> 
> 赞同：1
> 
> 时间：2012-05-23T07:03:40.693
> 
> 标签：java, windows, batch-file, jenkins

我在 Jenkins 构建的预构建步骤中通过一些 Windows 批处理命令设置了一些环境变量。我需要将这些变量用于一些将在构建过程中运行的 java selenium 测试用例。

```
set HD_KF_TC_IN_LOOK_UP_KET_FEATURE_XLS = %WORKSPACE%\selenium_input_files\Key_Features\en_US 
```

我试图通过使用`System.getEnv(HD_KF_TC_IN_LOOK_UP_KET_FEATURE_XLS)`命令来检索这些环境变量值。但这不起作用，因为这些变量的值总是`NULL`.

请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:54:39.250

如我的评论中所述，我不完全理解您的设置。但是，一般来说，在一个 Jenkins 构建步骤中设置的环境变量不会传播到它之外，并且不能从其他构建步骤访问。您需要使用[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)来实现这一点。

# android - Fragment.isAdded 在从容器中删除片段后返回 true

> ID：10715008
> 
> 赞同：10
> 
> 时间：2012-05-23T07:03:45.210
> 
> 标签：android, android-fragments

我有以下布局的活动

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/frameLayoutA"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </FrameLayout>
    <FrameLayout
        android:id="@+id/frameLayoutB"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_weight="1" >
    </FrameLayout>
</LinearLayout> 
```

在活动的 onCreate 中，我在 frameLayoutA 中加载 Fragment_A，在 frameLayoutB 中加载 Fragment_B。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    fmA=(FrameLayout) findViewById(R.id.frameLayoutA);
    fmB=(FrameLayout) findViewById(R.id.frameLayoutB);

    fragA=new FragmentA();
    fragB=new FragmentB();
    fragC=new FragmentC();
    addFragmentsInActivity(R.id.frameLayoutA,fragA);
    addFragmentsInActivity(R.id.frameLayoutB,fragB);
}

public void addFragmentsInActivity(int id, Fragment fragment)
{
    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.add(id, fragment);
    fragmentTransaction.commit();
} 
```

使用菜单操作我想在 frameLayoutA 中加载 Fragment_B，在 frameLayoutB 中加载 Fragment_C。菜单操作是：

```
 removeFragmentsInActivity(R.id.frameLayoutB,fragB);
    addFragmentsInActivity(R.id.frameLayoutB,fragC);
    if(!fragB.isAdded()){
            Log.e("check", "fragB already removed from frameLayoutB");
        removeFragmentsInActivity(R.id.frameLayoutB,fragB);
        addFragmentsInActivity(R.id.frameLayoutA,fragB);
    }
    else{
        Log.e("check", "fragB already added");
    }    

    public void removeFragmentsInActivity(int id, Fragment fragment)
    {
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.remove(fragment);
        fragmentTransaction.commit();
    } 
```

Fragment_B 不显示在 frameLayoutA 中。frameLayoutA 显示 Fragment_A。当再次单击菜单操作时，会加载 Fragment_B。

调试我发现 fragB.isAdded() 在 fragB.remove() 操作完成后返回 true 之后。在第二个菜单操作期间，fragB.isAdded() 返回 false 并执行 fragB.add() 并且 FragmentB 显示在 frameLayoutA 中。

我知道提交是一个异步操作。isAdded 返回 true，因为提交是异步的，并且删除操作提交直到调用 fragB.isAdded() 时才完成。这是真的吗？

请提出解决问题的可能解决方案或方法。

问候， Vibhor

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-23T07:52:39.597

是的，事务是异步提交的。如果要确保在执行之前所有事务都已完成`isAdded`，请运行：

```
getFragmentManager().executePendingTransactions(); 
```

来自文档[`executePendingTransactions()`](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)：

> 在使用 FragmentTransaction.commit() 提交 FragmentTransaction 后，它被安排在进程的主线程上异步执行。如果您想立即执行任何此类挂起的操作，您可以调用此函数（仅从主线程）来执行此操作。请注意，所有回调和其他相关行为都将在此调用中完成，因此请注意从何处调用它。

所以你的代码应该是这样的：

```
removeFragmentsInActivity(R.id.frameLayoutB,fragB);
addFragmentsInActivity(R.id.frameLayoutB,fragC);
getFragmentManager().executePendingTransactions();
if(!fragB.isAdded()){
        Log.e("check", "fragB already removed from frameLayoutB");
    removeFragmentsInActivity(R.id.frameLayoutA,fragA);
    addFragmentsInActivity(R.id.frameLayoutA,fragB);
}
else{
    Log.e("check", "fragB already added");
} 
```

还要注意固定删除片段 A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T10:01:50.420

也许您可以像这样捕获 FragmentTransaction 的承诺

```
private void commitFragmentTransaction(final FragmentTransaction ft, boolean allowStateLoss, boolean now) {
    if (ft == null || ft.isEmpty()) {
        return;
    }

    if (allowStateLoss) {
        if (now) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
                ft.commitNowAllowingStateLoss();
            } else {
                ft.commitAllowingStateLoss();
                mFragmentManager.executePendingTransactions();
            }
        } else {
            ft.commitAllowingStateLoss();
        }
    } else {
        if (now) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
                ft.commitNow();
            } else {
                ft.commit();
                mFragmentManager.executePendingTransactions();
            }
        } else {
            ft.commit();
        }
    }
} 
```

在 API 级别 24 中添加了 commitNow() 和 commitNowAllowingStateLoss()

调用 commitNow 比调用 commit() 后跟 executePendingTransactions() 更可取，因为后者将产生尝试提交所有当前未决事务的副作用，无论这是否是所需的行为。

# java - 扩展 java.util.Scanner

> ID：10715009
> 
> 赞同：0
> 
> 时间：2012-05-23T07:03:46.723
> 
> 标签：java, exception, java.util.scanner, extends

假设我想向 Scanner 添加一个方法，`nextPositiveInt()`该方法类似于，`nextInt()`除了当检测到负整数时，`InputNegativeException`会抛出一个自定义。

[当有解决方案利用](https://stackoverflow.com/questions/3059333/validating-input-using-java-util-scanner) 时，我为什么要这样做`hasNextInt()`？虽然不那么简洁，但考虑到例外的目的，它似乎更加整洁和合乎逻辑。例如：

**扩展扫描仪方法：**

```
Scanner cli = new Scanner(System.in);
boolean inputValid = false;

do
{
    System.out.println("Enter your age:");
    try
    {
        int age = cli.nextPositiveInt();
    }
    catch(InputNegativeException e)
    {
        System.out.println("You cannot specify a negative age.");
        inputValid = false;
    }
    catch(InputMismatchException e)
    {
        System.out.println("Your input must be numeric.");
        inputValid = false;
    }
} while(!inputValid); 
```

**`hasNext()`方法：**

```
Scanner cli = new Scanner(System.in);

do
{
    System.out.println("Please enter a positive number!");
    while(!sc.hasNextInt())
    {
        System.out.println("That's not a number!");
        sc.next(); // this is important!
    }
    int number = sc.nextInt();
} while(number <= 0); 
```

因此，假设您还没有回复告诉我为什么这是一个非常糟糕的主意（如果是，请这样做；我想可能有人反对在 Scanner 中进行验证）我对如何去做感到困惑这。我想我需要通过一些小的改动来复制`nextInt()`in的主体？`nextPositiveInt()`你甚至可以`nextInt()`找到任何地方的尸体吗？

很抱歉，我没有代码来显示我所做的任何努力，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:05:58.723

您不能扩展[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)，因为它是`final`：

```
public final class Scanner
extends Object
implements Iterator<String> 
```

我要做的是在我的一个类中有一个辅助方法：

```
public static int ensureNonNegative(int val) {
  if (val >= 0) {
    return val;
  } else {
    throw new InputNegativeException(val);
  }
} 
```

并会像这样使用它：

```
int val = ensureNonNegative(scanner.nextInt()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:17:21.813

尽管 Scanner 类是最终的并且您不能扩展它，但存在另一种解决方案。您可以使用[委托模式](http://en.wikipedia.org/wiki/Delegation_pattern)。

此外，由于 Scanner 类公开了所有必要的方法，您可以轻松复制原始方法并进行一些更改。请参阅 Scanner 类的源代码，您唯一应该更改的是用于匹配字符串的正则表达式以排除负整数。

扫描仪源代码：

```
public int nextInt() {
    return nextInt(defaultRadix);
}

public int nextInt(int radix) {
    // Check cached result
    if ((typeCache != null) && (typeCache instanceof Integer)
    && this.radix == radix) {
        int val = ((Integer)typeCache).intValue();
        useTypeCache();
        return val;
    }
    setRadix(radix);
    clearCaches();
    // Search for next int
    try {
        String s = next(integerPattern());
        if (matcher.group(SIMPLE_GROUP_INDEX) == null)
            s = processIntegerToken(s);
        return Integer.parseInt(s, radix);
    } catch (NumberFormatException nfe) {
        position = matcher.start(); // don't skip bad token
        throw new InputMismatchException(nfe.getMessage());
    }
} 
```

你应该只改变：

```
String s = next(integerPattern()); 
```

出于您的目的，您可以对正则表达式进行硬编码。原始正则表达式很容易在调试时被捕获。

就实现而言，这绝对不是最好的解决方案——要编写大量代码和复制粘贴，但它会很容易使用并且很好用。

# sencha-touch - sencha touch 2中Panel的事件流程

> ID：10715013
> 
> 赞同：1
> 
> 时间：2012-05-23T07:04:01.023
> 
> 标签：sencha-touch, sencha-touch-2

这是我的应用程序架构。

```
var loginView = Ext.create('Ext.Panel',{
    id: 'LoginView',
    .....
});
var homeView = Ext.create('Ext.TabPanel',{
    id: 'HomeView',
    items: [
           {
                xtype: 'list',
                title: 'Home',
                store: Ext.create('TweetStore'),
                disableSelection: true,
                ....
            },
            {
                title: 'Reply',
                ....
            },
            {
                title: 'DM',
                ....
            }
    ]
});
var mainView = Ext.create('Ext.Panel',{
    id: 'MainView',
    layout: 'card',
    items: [ loginView, mainView ]
});
Ext.define('TweetStore', {
        extend: 'Ext.data.Store',
        config: {
            fields: ...
            pageSize: 25,
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url: '/home',
                pageParam: 'page',
                limitParam: 'count',
                reader: {
                    type: 'json'
                }
            }
        }
    }); 
```

中有两个面板`MainView`。`LoginView`是用户输入其用户名和密码的登录页面。授权成功后，`HomeView`显示第二个面板。

我的问题：

1.  我希望`TweetStore`授权后才能加载数据，即`HomeView`节目时开始加载数据。但是`show`即使面板仍然隐藏，也会触发事件。我应该捕捉什么事件。
2.  当应用程序启动时，我想发送一个 ajax 请求来检查用户是否登录，如果为真，则`LoginView`隐藏和`HomeView`显示。在什么情况下我应该检查这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:29:34.737

Q. 1) 你应该监听**[`painted()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-event-painted)**事件。

> 每当此组件在屏幕上实际可见（绘制）时触发。当您需要对 DOM 元素执行“读取”操作时，这很有用，即：计算自然大小和定位。

[`initialize()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-event-initialize)Q. 2) 在事件上发送 ajax 请求进行用户认证。

> 当组件初始化时触发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T10:19:33.293

**- 第一个问题：**

`painted`事件看起来不错，但事实上，根据我的经验，当前版本的 Sencha Touch 2 中充满了非常多的错误。不要依赖它的存在和文档。

根据您的描述，很明显您希望在特定事件（授权）之后加载您的商店，那么在那之后触发自定义事件怎么样？例如：

`loginForm.fireEvent('authenticated', this)`（或您需要的任何额外参数）

然后在你的控制器中，只听视图`authenticated`上的事件。`loginForm`

**- 第二个问题：**

正如您所说，您希望在应用程序启动后立即运行一些进程。因此，放置代码的正确位置是`launch()`您的`app.js`. 很简单。

# java - 更新 JComboBox

> ID：10715024
> 
> 赞同：1
> 
> 时间：2012-05-23T07:05:01.003
> 
> 标签：java, swing, jdbc, jcombobox

我有一个自动设置的 JComboBox，它使用一种在启动时从我的数据库中获取所有 Id 的方法，我还有一个删除功能，它将从数据库中删除选定的对象，但它不会从列表中删除 id . 执行删除方法时，有什么方法可以更新 JComboBox 吗？如果有任何帮助，我的代码如下。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import java.sql.*;

import java.util.ArrayList;

public class EditMember extends JFrame {

    String[] positions = {"", "Trainee", "Writer", "Moderator", "Administrator"};

    JComboBox _id = new JComboBox(getId());
    JComboBox _position = new JComboBox(positions);

    JTextField _name = new JTextField(10);
    JTextField _username = new JTextField(10);
    JPasswordField _password = new JPasswordField(10);

    JButton edit = new JButton("Edit Member");
    JButton delete = new JButton("Delete Member");
    JButton generate = new JButton("Generate Report");
    JButton exit = new JButton("Exit");
    JButton load = new JButton("Load in");

    Toolkit kit = Toolkit.getDefaultToolkit();
    Dimension screenSize = kit.getScreenSize();
    int screenHeight = (int)screenSize.getHeight();
    int screenWidth = (int)screenSize.getWidth();

    public EditMember() {
        super("Edit Member");
        setLayout(new GridLayout(7,1,1,1));

        add(_id);
        add(load);
        load.addActionListener(new LoadInListener());

        add(new JLabel("Name:"));
        add(_name);

        add(new JLabel("Username:"));
        add(_username);

        add(new JLabel("Password:"));
        add(_password);

        add(new JLabel("Position:"));
        add(_position);

        add(edit);
        add(delete);
        delete.addActionListener(new DeleteListener());
        add(generate);
        add(exit);
        exit.addActionListener(new ExitListener());

        setSize(406, 200);
        setResizable(false);
        setLocation(screenWidth/4, screenHeight/4);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setVisible(true);
    }

    public static void main(String[] args) {
        new EditMember();
    }

    public Object[] getId() {
        Connection con;
        Statement stmt;
        ResultSet rs;

        //Object[] returnId;
        ArrayList<Object> returnId = new ArrayList<Object>();
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

            stmt =con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
            rs = stmt.executeQuery("SELECT `id` FROM main");

            while(rs.next()) {
                returnId.add(rs.getObject("id"));
            }

            con.close();
        } catch(Exception e) {
            e.printStackTrace();
        }
        return returnId.toArray(new Object[returnId.size()]);
    }

    public class ExitListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            dispose();
        }
    }

    public class LoadInListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            String giveId = _id.getSelectedItem().toString();

            populate(giveId);
        }
    }

    public class DeleteListener implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            delete();
        }
    }

    public void delete() {
        Connection con;
        Statement stmt;
        ResultSet rs;
        int idA;
        String name, username, password, position;

        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

            stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
            PreparedStatement pstmt = con.prepareStatement("DELETE FROM `main` WHERE ID = ?");
            pstmt.setInt(1, (int)_id.getSelectedItem());
            pstmt.execute();
            // udpate JComboBox here
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public void populate(String a) {
        Connection con;
        Statement stmt;
        ResultSet rs;
        int idA;
        String name, username, password, position;

        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

            stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
            rs = stmt.executeQuery("SELECT * FROM main");

            while(rs.next()) {
                idA = rs.getInt("id");
                name = rs.getString("name");
                username = rs.getString("username");
                password = rs.getString("password");
                position = rs.getString("position");
                if(Integer.parseInt(a) == idA) {
                    _name.setText(name);
                    _username.setText(username);
                    _password.setText(password);
                    _position.setSelectedItem(position);
                }
            }
        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:11:25.053

如此处所述[，](https://stackoverflow.com/questions/4620295/dynamically-change-jcombobox)您可以执行以下操作：

```
public void delete()
{
    ...
    SwingUtils.invokeLater(new Runnable()
    {
        @Override
        public void run()
        {
            DefaultComboBoxModel model = new DefaultComboBoxModel( yourStringArray );
            comboBox.setModel( model );
        }
    });
} 
```

`yourStringArray`是你想在`JComboBox`. 我已经有一段时间没有使用 Swing 了，但通常你需要做的任何 GUI 更改都需要你通过`SwingUtils.invokeLater(Runnable)`. 这将使您的更改通过事件调度线程 (EDT) 进行操作，该线程负责处理 GUI。大多数在线示例不这样做，原因是它们中的大多数似乎是在事件侦听器中进行更改，而事件侦听器本身在 EDT 中运行。

# groovy - 时髦的 *. 运营商

> ID：10715027
> 
> 赞同：6
> 
> 时间：2012-05-23T07:05:19.037
> 
> 标签：groovy

我最近正在阅读“Groovy in Action”。在第 7 章中，它介绍了 *. 操作员 。当我运行有关此运算符的代码时，我遇到了一些错误。

```
class Invoice {                                          
    List    items                                        
    Date    date                                         
}                                                        
class LineItem {                                         
    Product product                                      
    int     count                                        
    int total() {                                        
        return product.dollar * count                    
    }                                                    
}                                                        
class Product {                                          
    String  name                                         
    def     dollar                                       
}                                                        

def ulcDate = new Date(107,0,1)
def ulc = new Product(dollar:1499, name:'ULC')           
def ve  = new Product(dollar:499,  name:'Visual Editor') 

def invoices = [                                         
    new Invoice(date:ulcDate, items: [                   
        new LineItem(count:5, product:ulc),              
        new LineItem(count:1, product:ve)                
    ]),                                                  
    new Invoice(date:[107,1,2], items: [                 
        new LineItem(count:4, product:ve)                
    ])                                                   
]                                                        

//error
assert [5*1499, 499, 4*499] == invoices.items*.total() 
```

最后一行将引发异常。首先，我可以解释为什么会发生这个错误。发票是一个列表，元素的类型是发票。所以直接使用items会报错。我尝试通过使用来修复它`invoices.collect{it.items*.total()}`

但仍然得到一个失败的断言。那么，我怎样才能使断言成功以及为什么 invoices*.items*.total() 会抛出异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T07:10:39.250

`invoices*.`operator的结果是一个列表，所以 of 的结果`invoices*.items`是一个列表的列表。`flatten()`可以应用于列表并返回一个平面列表，因此您可以使用它`LineItems`从您的列表列表中创建一个列表`ListItems`。然后，您可以 `total()`使用扩展运算符应用于其元素：

```
assert [5*1499, 499, 4*499] == invoices*.items.flatten()*.total() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T08:17:58.337

这不能回答您的问题，但在您的 Invoice 类中也有一个总方法可能是更好的做法，如下所示：

```
int total() {
  items*.total().sum()
} 
```

然后，您可以通过以下方式检查：

```
assert [5*1499 + 499, 4*499] == invoices*.total() 
```

# actionscript-3 - 如何为 flex 组件添加调整大小功能？

> ID：10715035
> 
> 赞同：0
> 
> 时间：2012-05-23T07:05:50.193
> 
> 标签：actionscript-3, apache-flex, flex3

我正在创建一个具有一系列不同组件的灵活拖放界面。是否有向组件添加调整大小处理程序的标准方法，或者是否需要覆盖该组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:27:48.073

你的意思是前端调整大小？Senocular 为此编写了一个出色的变换类： [http ://www.senocular.com/flash/tutorials/transformtool/](http://www.senocular.com/flash/tutorials/transformtool/)

[http://www.senocular.com/demo/TransformToolAS3/TransformTool.html](http://www.senocular.com/demo/TransformToolAS3/TransformTool.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:18:05.963

我发现了一个非常有用且易于实现的示例。它支持更改光标、设置边界、旋转和固定纵横比。我认为任何需要添加调整大小支持的人都值得一看。

[https://github.com/marc-hughes/ObjectHandles/tree/master/flex-object-handles](https://github.com/marc-hughes/ObjectHandles/tree/master/flex-object-handles)

上面的链接是一个 flex 项目下载。导入 flex 项目并运行 MoveAndResize.mxml 示例。

# android - Android：在活动没有响应时停止服务

> ID：10715038
> 
> 赞同：1
> 
> 时间：2012-05-23T07:06:03.940
> 
> 标签：android, android-service, android-activity

我正在开发一个 FMR 应用程序，它由 Radio Activity 类和 RadioService Service 类组成，后者是应用程序和 FM 框架之间的链接。

当 Activity 启动并完成调整后，如果按下后退按钮，则调用 Activity 的 onStop() 和 onDestroy() 方法。在后者中，活动只是与继续播放广播**的服务解除绑定。**

然而，有时，活动会阻塞并变得无响应，在这种情况下，**ANR（活动无响应）**就会出现。如果用户“强制关闭”活动，无线电服务仍在后台运行，并且可以听到声音输出。**理想情况下，在强制关闭时，预期的行为应该是停止播放服务。**

是否有任何方法可以让活动知道发生了 ANR 并且它正在“强制关闭”，以便它可以向无线电服务发出停止播放的信号？

提前致谢。

问候，开发

# asp.net - 数据集选择语句？在 Asp.net 中

> ID：10715044
> 
> 赞同：0
> 
> 时间：2012-05-23T07:06:40.927
> 
> 标签：asp.net

在 Web 应用程序中，我从后端获取数据，数据现在可以在数据集中使用。我在该数据集中有 5 列，但我只需要一列，那么我怎样才能从 5 列中只得到一列。我使用 dataview 但它没有得到。

```
 DataView dv = ds.Tables[0].DefaultView;
               dv.RowFilter= "empid"; 
```

但我没有。你能帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:09:42.297

您可以将 设置`dv.AutoGenerateMembers`为`false`然后在您的`DataView`（使用设计器方法）内的列上创建，该列与您要显示在`DataView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:14:01.690

在 dataview 的帮助下，您可以创建另一个表，其中仅包含您需要的列

```
DataView view = new DataView(ds.tables[0]);
DataTable newTable = view.ToTable(tabblename, false, params string[] columnNames 
```

);//添加需要的名称

您可以从以下链接获取完整示例

[点击](http://msdn.microsoft.com/en-us/library/h2b6ehaa.aspx)

或者

您可以删除额外的列

```
ds.Tables[string].Columns.Remove(string) 
```

删除您认为多余的单个列。

删除行后不要忘记 ds.AcceptChanges() ，否则它们仍将在数据集中。

# wicket - Wicket DropDownChoice - OnChangeAjaxBehavior 对 nullSelection 的选择没有反应

> ID：10715046
> 
> 赞同：0
> 
> 时间：2012-05-23T07:06:46.940
> 
> 标签：wicket

我使用带有 nullSelection 字符串的 Wicket DropDownChoice（例如“Choose One”）。我需要对事件做出反应。它适用于除 nullSelection 之外的所有选择。任何想法？

```
dropDown.add(new OnChangeAjaxBehavior() {
    @Override
    protected void onUpdate(AjaxRequestTarget target) {
        //some code
    }
});
dropDown.setNullValid(true); 
```

我正在使用 Wicket 1.4.12

**编辑**

我用 Wicket 1.4.12 尝试了一个新项目，它可以工作。当需要下拉菜单时，这似乎是由验证器引起的。

# ios - Phonegap：在状态栏点击顶部滚动

> ID：10715052
> 
> 赞同：6
> 
> 时间：2012-05-23T07:07:10.130
> 
> 标签：ios, cordova, scroll, statusbar

我正在使用 jQuery Mobile 和 Phonegap 实现一个 webapp。我缺少的一件事是：当点击状态栏时，应用程序应该滚动到顶部。

我已经看到，使用 Objective C 必须指示必须在点击时滚动到顶部的视图。是否可以使用 Javascript/Phonegap 做类似的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-25T23:21:02.643

**22.9.2016 更新**

## 它工作正常

插件 ID 已更改，请使用以下命令安装：

```
cordova plugin add cordova-plugin-statusbar 
```

在 iOS 10.0 模拟器中使用 cordova-6.3.1 cordova-ios-4.2.2 和运行 9.3.5 的 iPhone 6s Plus 进行测试。

* * *

官方的状态栏插件有这个功能。 [https://github.com/apache/cordova-plugin-statusbar](https://github.com/apache/cordova-plugin-statusbar)

安装：

```
cordova plugin add org.apache.cordova.statusbar 
```

在您的 javascript 中：

```
window.addEventListener('statusTap', function() {
    //scroll-up or do whatever you want
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T06:55:08.597

我写了一个插件来解决这个问题

[https://github.com/j-mcnally/cordova-statusTap](https://github.com/j-mcnally/cordova-statusTap)

您可以在状态栏上注册点击事件并在代码中处理这一切。带有事件监听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T23:38:49.463

如果您在 phonegap 应用程序中显示的内容大于 webview 的范围，则滚动会自动发生。

否则 - 例如，如果您只是使用 -webkit-overflow-scrolling 滚动 div - 您需要使用此处找到的解决方案： [如何检测状态栏中的触摸](https://stackoverflow.com/questions/3753097/how-to-detect-touches-in-status-bar)

在 scrollViewShouldScrollToTop 你需要调用

```
[theWebView stringByEvaluatingJavaScriptFromString:"should_scroll_to_top"]; 
```

should_scroll_to_top 是你的 js 中的一个普通函数。

# mongodb - Mongoid 存储数组，用于 Hash 默认字段

> ID：10715055
> 
> 赞同：0
> 
> 时间：2012-05-23T07:07:22.457
> 
> 标签：mongodb, mongoid, ruby-on-rails-3.2

我有一个 Hash 字段，默认值为空 Hash `field :host, :type => Hash, :default=> {}`。当我保存没有主机值的记录时，它将其存储为空白数组而不是空白哈希。

以下是文件

```
{
    "created_at": ISODate("2012-05-21T14:56:16.0Z"),
    "host": [

    ],
    "short_title": "Ok ok",
    "title": "Test Title",
    "updated_at": ISODate("2012-05-23T07:22:40.0Z")
}` 
```

# c# - 获取实例类的父级

> ID：10715056
> 
> 赞同：8
> 
> 时间：2012-05-23T07:07:27.023
> 
> 标签：c#

我有以下课程：

```
public class POCOConfiguration : EntityTypeConfiguration<POCO>
{
    public POCOConfiguration()
    {

    }
} 
```

```
POCOConfiguration instance = new POCOConfiguration(); 
```

如何`POCO`从**实例**中获取类型？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T07:13:47.300

```
instance.GetType().BaseType.GetGenericArguments()[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-10T06:27:27.107

另一个答案很简单，即`instance.GetType().BaseType`返回类或父类的基本类型。

`instance.GetType().BaseType.GetGenericArguments()[0]`可以抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:11:18.853

看看那个：http: [//msdn.microsoft.com/en-us/library/b8ytshk6.aspx](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)

有一个示例显示如何获取类型（步骤 3,4 和 5）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:12:20.747

如果该类具有无参数构造函数，那么您可以编写：

```
public class POCOConfiguration : EntityTypeConfiguration<POCO> where POCO : new()
{     
    public POCOConfiguration()
    {
        var poco = new POCO();
    } 
} 
```

否则，您必须使用反射，请参阅[Activator](http://msdn.microsoft.com/en-us/library/System.Activator.aspx)类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:15:59.060

检查这个

```
POCOConfiguration instance = new POCOConfiguration();
Type t = instance.GetType().BaseType.GetGenericArguments()[0];
//here t is the type of POCO 
```

将工作...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T07:16:52.610

如果我理解正确，您想获得 POCO 的类型。然后声明一个方法并像下面这样调用它；

```
public Type GetTypeOfPoco<T>(EntityTypeConfiguration<T> entityTypeConfiguration)
{
    Type t = typeof(T);
    return t;
} 
```

称它为;

```
Type t = GetTypeOfPoco(instance); 
```

# python - 如何防止 QScrollArea 的缩放变得如此摇摇晃晃？

> ID：10715069
> 
> 赞同：3
> 
> 时间：2012-05-23T07:09:08.260
> 
> 标签：python, qt4, zooming, pyqt4, qscrollarea

我正在使用 PyQt4 和 python-popplerqt4 开发 PDF 阅读器。PDF 页面（QPixmaps）显示在 QLables 中，在 QFrame 中垂直布局。QFrame 被放置在 QScrollArea 中。

```
QMainWindow
   |_ QScrollArea
        |_ QFrame (Document: stretch)
            |_ QLabel (Page: fixed size)
            |   |_ QPixmap (stretch)
            |_ QLabel
            |   |_ QPixmap
            |_ etc. 
```

文档的大小由 QLabels 的固定大小决定。QPixmap 被设置为相应地拉伸，页面周围的 QFrame 自然地调整其大小。

当我要求缩放时，页面（QLabels）会用`QLabel.setFixedSize()`. 然而效果*令人失望*：调整文件大小看起来摇摇晃晃。相比之下，放大 Evince 或 Mendeley 真的很流畅。

我在其他地方读到过，`QFrame.hide()`在缩放之前和`QFrame.show()`之后调用会有所帮助。事实上，它适用于一个小文件。但是，例如应用于大约 700 页的 PDF，意味着*空白*QScrollArea 超过一秒钟。不好。

## 如何缩放 QScrollArea 中的文档并产生平滑的缩放效果？

**PS：** Poppler.Pages 的图像仅为可见的 QLabel 收件人绘制。即调整 700 页文档的大小并不涉及调整那么多图像的大小。实际上，它最多会调整 2 到 4 个图像的大小（并且分辨率越多，分辨率越小）。然后调整 Document 对象的大小仅包括调整 QLabels 的大小，大部分是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T17:58:17.457

经过一些调查和 QtForums 的一些帮助后，似乎**没有简单的解决方案可以使用 QScrollArea 实现所需的缩放效果**。否则请证明我错了。

一个更好的工具，虽然不太容易实现，是一个[`QGraphicsView`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html). 它有一种[`QGraphicsView.scale(float, float)`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html#scale)方法可以完美地进行缩放！它也更容易使用，因为这种缩放方法甚至不需要维护内容（如果你从一开始就没有加载高分辨率，可能除了图像的分辨率）。

[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)但是，QGraphicsView 的内容有点懒惰，需要更多的工作来设置，尤其是在布局方面。就我而言，由于我正在使用 PDF 查看器，因此我需要垂直对齐的图像，这是[`QGraphicsLinearLayout`](http://qt-project.org/doc/qt-4.8/QGraphicsLinearLayout.html)可以做到的。

为了后代，这里有一个示例代码，展示了如何将像素图实现到布局中，到场景中到视图中。当然，它还显示了如何缩放内容。

```
#!/usr/bin/env python

import sys
from PyQt4 import QtGui, QtCore
from popplerqt4 import Poppler

class Application(QtGui.QApplication):

    def __init__(self):
        QtGui.QApplication.__init__(self, sys.argv)

        scene = QtGui.QGraphicsScene()
        scene.setBackgroundBrush(QtGui.QColor('darkGray'))
        layout = QtGui.QGraphicsLinearLayout(QtCore.Qt.Vertical)
        document = Poppler.Document.load('/home/test.pdf')
        document.setRenderHint(Poppler.Document.Antialiasing)
        document.setRenderHint(Poppler.Document.TextAntialiasing)
        for number in range(document.numPages()):
            page = document.page(number)
            image = page.renderToImage(100, 100)
            pixmap = QtGui.QPixmap.fromImage(image)
            container = QtGui.QLabel()
            container.setFixedSize(page.pageSize())
            container.setStyleSheet("Page { background-color : white}")
            container.setContentsMargins(0, 0, 0, 0)
            container.setScaledContents(True)
            container.setPixmap(pixmap)
            label = scene.addWidget(container)
            layout.addItem(label)

        graphicsWidget = QtGui.QGraphicsWidget()
        graphicsWidget.setLayout(layout)
        scene.addItem(graphicsWidget)
        self.view = View(scene)
        self.view.show()

class View(QtGui.QGraphicsView):

    def __init__(self, parent = None):
        QtGui.QGraphicsView.__init__(self, parent)

    def wheelEvent(self, event):

        if event.delta() > 0:
            self.scale(1.1, 1.1)
        else:
            self.scale(0.9, 0.9)

if __name__ == "__main__":
        application = Application()
        sys.exit(application.exec_()) 
```

# configuration - 在 CentOS 上无法登录 Webmin 设置的 ProFTPD

> ID：10715070
> 
> 赞同：4
> 
> 时间：2012-05-23T07:09:13.530
> 
> 标签：configuration, ftp-server, webmin

我刚刚在包含 Webmin 的测试 CentOS 网络服务器上安装了 ProFTPD。

安装 ProFTPD 后，我尝试通过 FTP 连接，但它不允许我连接。我尝试连接服务器上的 FileZilla 和终端。要连接，我尝试了服务器上的所有用户（root、admin、steven10172），并且所有用户都返回相同的错误“530 登录不正确”。

有人可以帮我解释为什么我无法通过 ftp 连接吗？

错误消息（启用 AuthPam）：

```
May 23 02:03:34 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17201] 76.209.55.83: ProFTPD killed (signal 15)
May 23 02:03:34 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17201] 76.209.55.83: ProFTPD 1.3.3g standalone mode SHUTDOWN
May 23 02:03:36 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17261] 76.209.55.83: ProFTPD 1.3.3g (maint) (built Thu Nov 10 2011 16:20:58 UTC) standalone mode STARTUP
May 23 02:03:39 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17267] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): FTP session opened.
May 23 02:03:40 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17267] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): USER root (Login failed): Incorrect password.
May 23 02:03:42 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17267] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): FTP session closed. 
```

错误消息（AuthPam 关闭）：

```
May 23 02:02:21 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17201] 76.209.55.83: ProFTPD 1.3.3g (maint) (built Thu Nov 10 2011 16:20:58 UTC) standalone mode STARTUP
May 23 02:02:25 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17207] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): FTP session opened.
May 23 02:02:26 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17207] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): USER steven10172 (Login failed): No such user found.
May 23 02:02:29 adsl-76-209-55-83.dsl.emhril.sbcglobal.net proftpd[17207] 76.209.55.83 (::ffff:12.172.237.130[::ffff:12.172.237.130]): FTP session closed. 
```

/etc/proftpd.conf：

```
# This is the ProFTPD configuration file
#
# See: http://www.proftpd.org/docs/directives/linked/by-name.html

# Server Config - config used for anything outside a <VirtualHost> or <Global> context
# See: http://www.proftpd.org/docs/howto/Vhost.html

ServerName          "ProFTPD server"
ServerIdent         on "FTP Server ready."
ServerAdmin         root@localhost
DefaultServer           on

# Cause every FTP user except adm to be chrooted into their home directory
# Aliasing /etc/security/pam_env.conf into the chroot allows pam_env to
# work at session-end time (http://bugzilla.redhat.com/477120)
VRootEngine         on
DefaultRoot         ~ !adm
VRootAlias          /etc/security/pam_env.conf etc/security/pam_env.conf

# Use pam to authenticate (default) and be authoritative
AuthPAMConfig           proftpd
AuthOrder           mod_auth_pam.c* mod_auth_unix.c
# If you use NIS/YP/LDAP you may need to disable PersistentPasswd
#PersistentPasswd       off

# Don't do reverse DNS lookups (hangs on DNS problems)
UseReverseDNS           off

# Set the user and group that the server runs as
User                nobody
Group               nobody

# To prevent DoS attacks, set the maximum number of child processes
# to 20\.  If you need to allow more than 20 concurrent connections
# at once, simply increase this value.  Note that this ONLY works
# in standalone mode; in inetd mode you should use an inetd server
# that allows you to limit maximum number of processes per service
# (such as xinetd)
MaxInstances            20

# Disable sendfile by default since it breaks displaying the download speeds in
# ftptop and ftpwho
UseSendfile         off

# Define the log formats
LogFormat default "%h %l %u %t \"%r\" %s %b"
LogFormat auth "%v [%P] %h %t \"%r\" %s"

# Dynamic Shared Object (DSO) loading
# See README.DSO and howto/DSO.html for more details
#
# General database support (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql.c
#
# Support for base-64 or hex encoded MD5 and SHA1 passwords from SQL tables
# (contrib/mod_sql_passwd.html)
#   LoadModule mod_sql_passwd.c
#
# Mysql support (requires proftpd-mysql package)
# (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql_mysql.c
#
# Postgresql support (requires proftpd-postgresql package)
# (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql_postgres.c
#
# Quota support (http://www.proftpd.org/docs/contrib/mod_quotatab.html)
#   LoadModule mod_quotatab.c
#
# File-specific "driver" for storing quota table information in files
# (http://www.proftpd.org/docs/contrib/mod_quotatab_file.html)
#   LoadModule mod_quotatab_file.c
#
# SQL database "driver" for storing quota table information in SQL tables
# (http://www.proftpd.org/docs/contrib/mod_quotatab_sql.html)
#   LoadModule mod_quotatab_sql.c
#
# LDAP support (requires proftpd-ldap package)
# (http://www.proftpd.org/docs/directives/linked/config_ref_mod_ldap.html)
#   LoadModule mod_ldap.c
#
# LDAP quota support (requires proftpd-ldap package)
# (http://www.proftpd.org/docs/contrib/mod_quotatab_ldap.html)
#   LoadModule mod_quotatab_ldap.c
#
# Support for authenticating users using the RADIUS protocol
# (http://www.proftpd.org/docs/contrib/mod_radius.html)
#   LoadModule mod_radius.c
#
# Retrieve quota limit table information from a RADIUS server
# (http://www.proftpd.org/docs/contrib/mod_quotatab_radius.html)
#   LoadModule mod_quotatab_radius.c
#
# Administrative control actions for the ftpdctl program
# (http://www.proftpd.org/docs/contrib/mod_ctrls_admin.html)
#   LoadModule mod_ctrls_admin.c
#
# Execute external programs or scripts at various points in the process
# of handling FTP commands
# (http://www.castaglia.org/proftpd/modules/mod_exec.html)
#   LoadModule mod_exec.c
#
# Support for POSIX ACLs
# (http://www.proftpd.org/docs/modules/mod_facl.html)
#   LoadModule mod_facl.c
#
# Support for using the GeoIP library to look up geographical information on
# the connecting client and using that to set access controls for the server
# (http://www.castaglia.org/proftpd/modules/mod_geoip.html)
#   LoadModule mod_geoip.c
#
# Configure server availability based on system load
# (http://www.proftpd.org/docs/contrib/mod_load.html)
#   LoadModule mod_load.c
#
# Limit downloads to a multiple of upload volume (see README.ratio)
#   LoadModule mod_ratio.c
#
# Rewrite FTP commands sent by clients on-the-fly,
# using regular expression matching and substitution 
# (http://www.proftpd.org/docs/contrib/mod_rewrite.html)
#   LoadModule mod_rewrite.c
#
# Support for the SSH2, SFTP, and SCP protocols, for secure file transfer over
# an SSH2 connection (http://www.castaglia.org/proftpd/modules/mod_sftp.html)
#   LoadModule mod_sftp.c
#
# Use PAM to provide a 'keyboard-interactive' SSH2 authentication method for
# mod_sftp (http://www.castaglia.org/proftpd/modules/mod_sftp_pam.html)
#   LoadModule mod_sftp_pam.c
#
# Use SQL (via mod_sql) for looking up authorized SSH2 public keys for user
# and host based authentication
# (http://www.castaglia.org/proftpd/modules/mod_sftp_sql.html)
#   LoadModule mod_sftp_sql.c
#
# Provide data transfer rate "shaping" across the entire server
# (http://www.castaglia.org/proftpd/modules/mod_shaper.html)
#   LoadModule mod_shaper.c
#
# Support for miscellaneous SITE commands such as SITE MKDIR, SITE SYMLINK,
# and SITE UTIME (http://www.proftpd.org/docs/contrib/mod_site_misc.html)
#   LoadModule mod_site_misc.c
#
# Provide an external SSL session cache using shared memory
# (contrib/mod_tls_shmcache.html)
#   LoadModule mod_tls_shmcache.c
#
# Use the /etc/hosts.allow and /etc/hosts.deny files, or other allow/deny
# files, for IP-based access control
# (http://www.proftpd.org/docs/contrib/mod_wrap.html)
#   LoadModule mod_wrap.c
#
# Use the /etc/hosts.allow and /etc/hosts.deny files, or other allow/deny
# files, as well as SQL-based access rules, for IP-based access control
# (http://www.proftpd.org/docs/contrib/mod_wrap2.html)
#   LoadModule mod_wrap2.c
#
# Support module for mod_wrap2 that handles access rules stored in specially
# formatted files on disk
# (http://www.proftpd.org/docs/contrib/mod_wrap2_file.html)
#   LoadModule mod_wrap2_file.c
#
# Support module for mod_wrap2 that handles access rules stored in SQL
# database tables (http://www.proftpd.org/docs/contrib/mod_wrap2_sql.html)
#   LoadModule mod_wrap2_sql.c
#
# Provide a flexible way of specifying that certain configuration directives
# only apply to certain sessions, based on credentials such as connection
# class, user, or group membership
# (http://www.proftpd.org/docs/contrib/mod_ifsession.html)
#   LoadModule mod_ifsession.c

# TLS (http://www.castaglia.org/proftpd/modules/mod_tls.html)
<IfDefine TLS>
  TLSEngine         on
  TLSRequired           on
  TLSRSACertificateFile     /etc/pki/tls/certs/proftpd.pem
  TLSRSACertificateKeyFile  /etc/pki/tls/certs/proftpd.pem
  TLSCipherSuite        ALL:!ADH:!DES
  TLSOptions            NoCertRequest
  TLSVerifyClient       off
  #TLSRenegotiate       ctrl 3600 data 512000 required off timeout 300
  TLSLog            /var/log/proftpd/tls.log
  <IfModule mod_tls_shmcache.c>
    TLSSessionCache     shm:/file=/var/run/proftpd/sesscache
  </IfModule>
</IfDefine>

# Dynamic ban lists (http://www.proftpd.org/docs/contrib/mod_ban.html)
# Enable this with PROFTPD_OPTIONS=-DDYNAMIC_BAN_LISTS in /etc/sysconfig/proftpd
<IfDefine DYNAMIC_BAN_LISTS>
  LoadModule            mod_ban.c
  BanEngine         on
  BanLog            /var/log/proftpd/ban.log
  BanTable          /var/run/proftpd/ban.tab

  # If the same client reaches the MaxLoginAttempts limit 2 times
  # within 10 minutes, automatically add a ban for that client that
  # will expire after one hour.
  BanOnEvent            MaxLoginAttempts 2/00:10:00 01:00:00

  # Allow the FTP admin to manually add/remove bans
  BanControlsACLs       all allow user ftpadm
</IfDefine>

# Global Config - config common to Server Config and all virtual hosts
# See: http://www.proftpd.org/docs/howto/Vhost.html
<Global>

  # Umask 022 is a good standard umask to prevent new dirs and files
  # from being group and world writable
  Umask             022

  # Allow users to overwrite files and change permissions
AllowOverwrite on
  <Limit ALL SITE_CHMOD>
    AllowAll
  </Limit>
RootLogin on
UseFtpUsers off
AuthAliasOnly off
RequireValidShell off

</Global>
SystemLog /var/log/proftpd/errors.log

# A basic anonymous configuration, with an upload directory
# Enable this with PROFTPD_OPTIONS=-DANONYMOUS_FTP in /etc/sysconfig/proftpd
<IfDefine ANONYMOUS_FTP>
  <Anonymous ~ftp>
    User            ftp
    Group           ftp
    AccessGrantMsg      "Anonymous login ok, restrictions apply."

    # We want clients to be able to login with "anonymous" as well as "ftp"
    UserAlias           anonymous ftp

    # Limit the maximum number of anonymous logins
    MaxClients          10 "Sorry, max %m users -- try again later"

    # Put the user into /pub right after login
    #DefaultChdir       /pub

    # We want 'welcome.msg' displayed at login, '.message' displayed in
    # each newly chdired directory and tell users to read README* files. 
    DisplayLogin        /welcome.msg
    DisplayChdir        .message
    DisplayReadme       README*

    # Cosmetic option to make all files appear to be owned by user "ftp"
    DirFakeUser         on ftp
    DirFakeGroup        on ftp

    # Limit WRITE everywhere in the anonymous chroot
    <Limit WRITE SITE_CHMOD>
      DenyAll
    </Limit>

    # An upload directory that allows storing files but not retrieving
    # or creating directories.
    <Directory uploads/*>
      AllowOverwrite        no
      <Limit READ>
        DenyAll
      </Limit>

      <Limit STOR>
        AllowAll
      </Limit>
    </Directory>

    # Don't write anonymous accesses to the system wtmp file (good idea!)
    WtmpLog         off

    # Logging for the anonymous transfers
    ExtendedLog         /var/log/proftpd/access.log WRITE,READ default
    ExtendedLog         /var/log/proftpd/auth.log AUTH auth

  </Anonymous>
</IfDefine> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-22T19:34:33.853

似乎该用户未包含在 proftpd 用户列表中。它是 proftd 最新版本的默认安全程序。

要手动启用它，

*   在 webmin 默认页面的“服务器状态”部分（单击“webmin”获取此页面），单击“ProFTPD FTP 服务器”。这将打开 Proftpd 模块。

*   在“全局配置部分”中，单击“编辑配置文件”

*   在编辑器中找到该行`umask 22`

*   使用 webmin 用户名添加以下行。这将允许 webmin 用户使用 ftp 和 sftp

    `umask 22 AllowOverwrite yes <Limit ALL SITE_CHMOD> DenyAll AllowUser webminuser1 webminuser2 </Limit>`

保存文件并重新启动proftpd。

**

## 或者

**

使用默认 webmin 配置为用户启用 proftpd：删除并全新安装 proftpd。

```
yum install proftpd 
```

并启动服务，`service proftpd start`

通过 telnet 检查您的 ftp 连接。`telnet <ipaddress> 21`

如果 telnet 连接，进入 webmin 菜单，webmin->webmin 配置->webmin 模块

在 Install from 部分，在 www.webmin.com 的 Standard 模块上，选择 proftpd 模块（您可以尝试在框中输入，但最好单击地球图标以选择 proftpd）

选择 Proftpd 后，选中忽略依赖项选项，并选中授予所有 Webmin 用户的访问权限，然后单击安装模块按钮重新启动系统以使更改生效。

尝试使用用户名和密码连接 ftpclient。它应该工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:02:51.503

在`webmin`中，转到您的`ProFTPD`模块并查找 的图标/选项`Denied FTP Users`。从该列表中删除您希望访问 FTP 服务器的所有用户。一个地方我遇到了麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T16:23:52.393

在大多数 ftp 客户端中，默认启用 FTP Passive 连接选项，因此只需取消选择它然后尝试连接。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-06T19:00:18.400

虽然这仅对您指定的一两个用户名有帮助，​​但[root 帐户通常被禁止访问 FTP](http://man7.org/linux/man-pages/man5/ftpusers.5.html)。

> ... 不使用 ftp 或拥有太多权限而无法通过 FTP 服务器守护进程登录的用户列表。此类用户通常包括 root、daemon、bin、uucp 和 news。

# javascript - Java 脚本：onsubmit="check_rfields();" 在 html 的表单标签中。但是验证失败

> ID：10715073
> 
> 赞同：0
> 
> 时间：2012-05-23T07:09:22.320
> 
> 标签：javascript

onsubmit="check_rfields();" 在 html 的表单标签中。但是验证失败。

```
function check_rfields() { 

    var name = document.getElementById("id_rname").value;

    var email = document.getElementById("id_remail").value;

    var cemail = document.getElementById("id_rcemail").value;

    var password = document.getElementById("id_rpassword").value;

    var cpassword = document.getElementById("id_rcpassword").value;

    if(name=='' || name==0 

        && email=='' ||  email==0 

        && cemail=='' || cemail ==0 

        && password=='' || password==0 

        && cpassword=='' || cpassword==0 ) {

        document.getElementById("onsubmitErr").innerHTML 
                                                    = "All fields arerequired"; 

                return false;   
          }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:14:03.373

如果您希望提交失败（验证失败），请使用：

```
onSubmit="return check_rfields()" 
```

# tridion - 如何在 Tridion Web GUI 的弹出窗口中获取完整的嵌入字段值集？

> ID：10715078
> 
> 赞同：4
> 
> 时间：2012-05-23T07:09:48.160
> 
> 标签：tridion, tridion-2011

我为 Tridion 2011 SP1 实现了一个功能区工具栏按钮，它打开一个 aspx 页面并根据查找组件填充一个下拉列表。查找组件包括不同的嵌入式模式。要根据嵌入式模式名称过滤掉值，我需要在按钮 JavaScript 中单击按钮时获取组件创建页面的嵌入式模式字段值。

因为在我的组件创建页面中包含多值嵌入式架构字段具有信息，这有助于查找值过滤过程。我不知道该命令需要用于该要求。我知道一个获取完整组件 XML 的命令，即：`$display.getView().getItemFields()`.

要获取当前的 RTF 字段内容，我将使用以下命令：`target.editor.getHTML()`. **要仅获取完整的嵌入式架构字段值集，我需要使用哪个命令？**

我的示例组件源：

```
<root>
    <a>sample a</a>
    <b>sample b</b>
    <c>
        <ca>ca 1</ca>
        <cb>cb 1</cb>
        <cc>cc 1</cc>
    </c>

    <c>
        <ca>ca 2</ca>
        <cb>cb 2</cb>
        <cc>cc 2</cc>
    </c>

    <c>
        <ca>ca 1</ca>
        <cb>cb 1</cb>
        <cc>cc 1</cc>
    </c>                
</root> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:54:39.260

我认为没有公共 API。但是您可以使用组件数据 xml，然后自己解析它：

```
var item = $display.getItem();
var xml = item.getContent(); // OR $display.getView().getItemFields();
var xmlDoc = $xml.getNewXmlDocument(xml);
var schema = item.getSchema();
if(schema.isLoaded())
{
   var xpath = "/custom:{0}/custom:embeddedFieldName".format(schema.getRootElementName());
   var fields = $xml.selectNodes(xmlDoc, xpath, { custom: schema.getNamespaceUri() });

   // loop fields and get values ...
} 
```

# html - 如何将文本和选项卡式导航并排放置

> ID：10715083
> 
> 赞同：1
> 
> 时间：2012-05-23T07:10:15.293
> 
> 标签：html, css, haml

**我在 h2 内写了一个文本，在它旁边我想显示一个选项卡式导航，但选项卡式导航没有放在它旁边，它在 h2 下方，如下图所示灰色框内：**

![在此处输入图像描述](../Images/a604e0a0c9f6430f40acde83993356e0.png)

以下是我的html页面代码：

```
<header>

   <h2>
     Corporate
     jobpost
   </h2>

    <div id='tabjob'>

         <ul>
           <li>
              <a class='innertab selectprofile' href='#YourJobposts'>Your Jobposts</a>
           </li>
           <li>
              <a class='innertab signupprofile' href='#OtherJobposts'>Other Jobposts</a>
           </li>
           <li>

              <a class='innertab signupprofile' href='#Appliedfor'>Applied for</a>
           </li>
         </ul>
    </div>
</header> 
```

标题是图像中灰色的东西。在这个标题内我想显示文本，在那个选项卡式导航旁边和那个按钮的角落

* * *

以下是此选项卡式导航的 CSS：

```
#tabjob
{
  padding-top:0px;
  padding-left:10px;
    height:0px;

}

.innertab
{
    background-color: rgba(142, 194, 218, 0.3);display: block;height: 25px;
    line-height: 30px;text-align: center;
    width: auto;float: left;font-weight: bold;
    padding-left: 8px;
    padding-right: 8px;

  text-shadow: #eee 0px 0px 2px;
}
#tabjob ul li
{
 display:block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:27:48.563

我已经在评论中发布了答案，只是在此处添加了答案的详细信息。

[演示在这里](http://jsfiddle.net/AMAVV/1/)

由于您的`h2`标签和所有标题标签都是 HTML 中的块元素，因此它采用完整的可用宽度。

所以为了避免`h2`标签占据完整的宽度，只需将 {float:left} 添加到这个元素

确保仅将此样式应用于特定的样式，`h2` 否则您的 HTML 会混乱。您是否在页面上使用了多个`h2`标签。

**HTML**

```
<h2 class="floatTag">Corporate jobpost</h2>
    <div id='tabjob'>
         <ul>
             <li>
                <a class='innertab ' href='#YourJobposts'>Your Jobposts</a>
              </li>
              <li>
                <a class='innertab ' href='#OtherJobposts'>Other Jobposts</a>
              </li>
              <li>

                <a class='innertab ' href='#Appliedfor'>Applied for</a>
              </li>
          </ul>
      </div> 
```

**CSS**

```
#tabjob
{
  padding-top:0px;
  padding-left:10px;
    height:0px;
}

.innertab
{
    background-color: rgba(142, 194, 218, 0.3);display: block;height: 25px;
    line-height: 30px;text-align: center;
    width: auto;float: left;font-weight: bold;
    padding-left: 8px;
    padding-right: 8px;

  text-shadow: #eee 0px 0px 2px;
}
#tabjob ul li
{
 display:block;
}

h2.floatTag{float:left;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:23:56.270

用于`display:inline-block`h2 和 tabjob：

```
h2, #tabjob { display: inline-block } 
```

演示：[http ://dabblet.com/gist/2774902](http://dabblet.com/gist/2774902)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:15:40.957

`ul`并且`div`是块元素，这意味着它们总是低于它们之前的任何东西：

```
 a<div>x</div> 
```

会给你两条线。尝试

```
 a<div style='display: inline'>x</div> 
```

# asp.net - 列表视图内有边框的表格

> ID：10715089
> 
> 赞同：0
> 
> 时间：2012-05-23T07:10:25.933
> 
> 标签：asp.net, css

我希望带边框的表格显示在列表视图中。我在列表视图中使用了 html 表格，但我无法获得边框线（行和列）（尝试过边框 =“2”）。我尝试使用 css 获取边框也，但我无法获得表格线。

代码：

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1">
 <LayoutTemplate>

                <table id="Table1" border="2" runat="server" class="TableCSS">
                    <tr id="Tr1" runat="server" class="TableHeader">
                        <td id="Td1" runat="server">OwnedBy &nbsp;</td>
                        <td id="Td2" runat="server">Sharedclass &nbsp;</td>
                        <td id="Td3" runat="server">EffectiveInterest &nbsp;</td>
                        <td id="Td4" runat="server">DeemedInterest &nbsp;</td>
                    </tr>
                    <tr id="ItemPlaceholder" runat="server">
                    </tr>
                </table>
            </LayoutTemplate>
<asp:listview> 
```

CSS：

```
.TableCSS
        {
            border-bottom-width:thin;
            border-left-width:thin;
            border-bottom-color:Black;        

            background-color:Red;
            width:auto;
            }
        .TableHeader
        {
            border:12px;
            background-color:black;
            color:Snow;
            font-size:11px;
            font-family:Verdana;
            height:auto;
            text-align:center;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:38:47.990

要查看表格行，请为表格设置背景并赋予 cellspacing="1"（将 cellspacing 属性添加到表格标签）并为表格内的所有 TD 标签应用背景颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:38:57.877

请注意，您提供表格的类与您在 css 中声明的类不同（即 class="Table" VS .TableCSS）此外，您可以使用`<th>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T16:06:32.563

使用网格线。[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.gridlines.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.gridlines.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-24T19:37:21.740

内部`<td>`硬编码样式为：style="border: thin solid #C0C0C0"。根据需要更改边框颜色。

# asp.net-mvc - 具有本地报告的数据源和自定义对象

> ID：10715091
> 
> 赞同：3
> 
> 时间：2012-05-23T07:10:37.060
> 
> 标签：asp.net-mvc, asp.net-mvc-3, reporting, rdlc

我正在尝试将数据源添加到我的本地报告中。数据源是一个自定义对象，如下所示：

```
public class Person
{
    public String Name { get; set; }
}

public interface IRepository
{
    Person[] GetData();
}

public class Repository : IRepository
{
    public Person[] GetData()
    {
        return new Person[1] { new Person { Name = "Foo" } };
    }
} 
```

现在，如果我尝试添加数据源，唯一的选择就是数据库数据源。为什么？

如何使用我的自定义对象添加数据源。我想将此数据源添加到设计器，因为我想在 Visual Studio 中设计我的报告。

![视觉工作室](../Images/d857f568f5940547ec8b7520ef31dd0c.png)

如果我将报告放在一个单独的项目中并添加对数据源 dll 的引用，那么对象数据源的选项是可见的。这种行为有什么解释吗？

*   视觉工作室 2010 SP 1
*   ASP.NET MVC 3
*   Microsoft Report Viewer 2010 可再发行包

# c++ - 如何在 C++ 中的 Windows 中将文件大小设置为 100 字节？

> ID：10715094
> 
> 赞同：-1
> 
> 时间：2012-05-23T07:10:58.287
> 
> 标签：c++, windows, file, file-io

能否请您告诉如何将文件最大大小设置为 100 字节。如果我尝试写入超过 100 字节的数据，`ntwritefile()`应该会抛出错误`ERROR_NOT_ENOUGH_MEMORY`。

您能否建议我，一个将 100 字节（或固定大小）设置为文件的 widnows API？

在我们的产品中，ntwritefile() 失败并出现错误 ERROR_NOT_ENOUGH_MEMORY。我试图了解，在什么情况下，我们会得到那个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-16T00:31:06.703

使用`SetFilePointer`，然后`SetEndOfFile`。别忘了`CloseHandle`追`SetEndOfFile`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:15:45.677

在 Windows 上，这看起来像这样：

1.  创建文件
2.  [写文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)

而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:22:19.433

您可以创建大小为 100 字符的缓冲区，并在完成后将缓冲区写入文件。

```
#include <stdio.h>
#include <memory.h>

int main(int argc, char* argv[])
{
    char buffer[100];

    //assign values
    memset(buffer, 'A', 100);
    buffer[5]='@';

    FILE * pFile;
    pFile = fopen ( "buffer.100" , "wb" );
    fwrite (buffer, 1, sizeof(buffer) , pFile );
    fclose (pFile);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:21:08.907

你想创建一个 100 字节的文件吗？或者您是否要将文件的大小限制为 100 字节，这意味着如果文件超过 100 字节，对文件的任何进一步写入都将不起作用？

如果它是您之后的第一个，那么您可以使用`CreateFile`并将`WriteFile`缓冲区大小限制为 100 字节。

如果是第二个……那我觉得不可能……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:45:09.490

从架构上讲，您最好的方法如下：

1.  确定您如何读取和写入相关文件。
2.  创建一个通过单个托管类提供这些相同功能的接口。API 将尽可能与您已有的相同。
3.  添加代码，封装在您的管理器类中，以在您编写时跟踪缓冲区的大小，可能还会缓冲文件中所需的 100 个字节。然后，代码可以以您决定的任何方式检测和处理溢出情况（即，如果这是您想要的，则抛出异常。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T09:16:29.783

很抱歉，您不需要为此提供缓冲区。只需创建一个大于文件大小的文件的内存映射对象，系统就会自动将文件扩展为该大小。

但是对于 100 字节，您只需创建一个 100 字节的虚拟 char 数组并将其写入文件。

见， http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366542 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366542(v=vs.85).aspx)

# php - PHP，爆炸多个单词并在它们前面加上一个字符

> ID：10715095
> 
> 赞同：1
> 
> 时间：2012-05-23T07:10:59.003
> 
> 标签：php

> **可能重复：**
> [为 PHP 数组的每个项目添加前缀](https://stackoverflow.com/questions/7617639/add-a-prefix-to-each-item-of-a-php-array)

我尝试使用布尔模式全文搜索。

如果用户键入两个以上的单词，它应该是这样的。

```
Search Keyword :   Apple Macbook Air 

Result :   +Apple +Macbook +Air 
```

所以，我做了一个 php 命令来实现这一点，但没有奏效。

```
$ArrayKeywords = explode(" ", $b_keyword);
for($i = 0; $i < sizeof($ArrayKeywords); $i++)
$array_keyword = '+"$ArrayKeywords[$i]" '; 
```

你能告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:16:49.740

也可以做（[演示](http://codepad.viper-7.com/grS1u1)）

```
echo preg_replace('(\w+)', '+$0', 'Apple Macbook Air'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:15:30.527

为什么不这样做：

```
$keyword = '+' . trim(str_replace(' ',' +',$b_keyword)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:12:30.160

真的不需要在`for`那里循环

```
// trims off consecutive spaces in the search term
$b_keyword = preg_replace('/\s+/', ' ', $b_keyword); 
$ArrayKeywords = explode(" ", $b_keyword);
echo '+' . implode(' +', $ArrayKeywords); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T07:25:43.207

我发现字符串中的变量如何工作存在一些误解。

您可能已经了解到，单引号内的任何内容都按原样解析，而双引号内的变量内容会打印出来，如下所示：

```
$foo = 'bar';

echo 'foo: $foo';    // result:  foo: $foo
echo "foo: $foo";    // result:  foo: bar 
```

但是，您不能将这两种方法结合起来；将双引号*放在单引号*内不会打印变量的内容。双引号仅在*整个*字符串由它们分隔时才起作用。因此，以下内容将不起作用：

```
echo 'foo: "$foo"';  // result:  foo: "$foo" 
```

将此扩展到您的情况，您可以用双引号替换单引号并删除内部双引号。

```
$array_keyword .= "+$ArrayKeywords[$i] "; 
```

另请注意，您必须将新单词连接到变量 ( `.=`) 中，否则在每个循环中都会覆盖该变量。

旁注：在遍历数组时，使用`foreach`循环比使用循环容易得多：`for`

```
$ArrayKeywords = explode(" ", $b_keyword);
$array_keyword = '';
foreach( $ArrayKeywords as $keyword ) {
    $array_keyword .= '+$keyword ";
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T07:25:47.483

如果你想要它用于制表符、换行符、空格等。

```
echo preg_replace('(\s+)', '$0+', ' Apple Macbook Air');
//output: +Apple +Macbook +Air 
```

# c - XOPEN_SOURCE 和信号处理

> ID：10715103
> 
> 赞同：8
> 
> 时间：2012-05-23T07:11:46.440
> 
> 标签：c, linux, signals, standards

在下面的程序中，如果我取消注释`_XOPEN_SOURCE`行，我的程序会在我点击 时`C-c`终止，如果我不注释该行，相同的程序不会终止。任何人都知道以什么方式`_XOPEN_SOURCE`影响信号处理？我在 linux 上使用 gcc (4.6.3) 和 glibc (2.15)。

```
/* #define _XOPEN_SOURCE 700 */
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>

typedef void (*sighandler_t)(int);

void handle_signal(int signo)
{
    printf("\n[MY_SHELL] ");
    fflush(stdout);
}

int main()
{
    int c;
    signal(SIGINT, SIG_IGN);
    signal(SIGINT, handle_signal);
    printf("[MY_SHELL] ");
    while ((c = getchar()) != EOF) {
        if (c == '\n')
            printf("[MY_SHELL] ");
    }
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:38:15.420

问题是该`signal()`函数在安装信号处理函数时可能有两种不同形式的行为：

*   System V 语义，其中信号处理程序是“一次性的”——即在调用信号处理函数后，信号的处置被重置为`SIG_DFL`——并且被信号中断的系统调用不会重新启动；或者
*   BSD 语义，其中信号处理程序在信号触发时*不会重置，信号在信号处理程序执行时被阻塞，并且大多数中断的系统调用会自动重新启动。*

在带有 glibc 的 Linux 上，如果已定义，您将获得 BSD 语义，如果`_BSD_SOURCE`未定义，您将获得 System V 语义。`_BSD_SOURCE`宏是默认定义的，但如果您定义（或其他一些宏，如 和 ），则会抑制此`_XOPEN_SOURCE`默认`_POSIX_SOURCE`定义`_SVID_SOURCE`。

在 System V 语义下，如果`read()`底层的系统调用`getchar()`被中断，那么`SIGINT`将`getchar()`返回set to （这将导致您的程序正常退出）。此外，在第一次之后，该信号的处置被重置为默认值，并且默认操作是终止进程（因此即使您的程序在第一次中幸存下来，第二次也会导致它异常退出）。`EOF``errno``EINTR``SIGINT``SIGINT``SIGINT`

解决方案是根本不`signal()`用于安装信号处理功能；相反，您应该使用`sigaction()`可移植的 —— 它在任何地方都提供相同的语义。`sa_flags`设置为，它将提供 BSD 语义，这正是您想要的`SA_RESTART`。`sigaction()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:47:44.087

这些细微的行为差异是为什么`sigprocmask()`通常首选`signal()`具有`_XOPEN_SOURCE 700`定义调用的版本（如 strace 所示）

```
rt_sigaction(SIGINT, {SIG_IGN, [], SA_INTERRUPT|SA_NODEFER|SA_RESETHAND}, {SIG_DFL, [], 0}, 8) = 0
rt_sigaction(SIGINT, {0x80484dc, [], SA_INTERRUPT|SA_NODEFER|SA_RESETHAND}, {SIG_IGN, [], SA_INTERRUPT|SA_NODEFER|SA_RESETHAND}, 8) = 0 
```

而被注释掉的电话：

```
rt_sigaction(SIGINT, {SIG_IGN, [INT], SA_RESTART}, {SIG_DFL, [], 0}, 8) = 0 
rt_sigaction(SIGINT, {0x80484dc, [INT], SA_RESTART}, {SIG_IGN, [INT], SA_RESTART}, 8) = 0 
```

`_XOPEN_SOURCE`缺少的重要的额外标志是`SA_RESTART`允许`read`系统调用继续进行，就好像没有信号发生一样。没有它，系统调用将指示失败，`getchar()`返回`-1`（但指示失败，而不是真正的 EOF），并且您的程序终止。

# php - 会话过期后无法查询

> ID：10715111
> 
> 赞同：0
> 
> 时间：2012-05-23T07:12:17.850
> 
> 标签：php, sql, facebook, session

我已经为这些东西狂饮了很多，但找不到直接的答案，我在这里搜索过，

但我仍在努力实施，

会话过期后如何更新查询？我不是在谈论明确点击“注销”按钮

这是基本的SQL结构：

```
CREATE TABLE auth_users (

 email       varchar(40) NOT NULL,
 password    varchar(40) NOT NULL,
 online      ENUM('1') DEFAULT NULL  <-- HERE, it updates to 1 when user logged in, it updates back to NULL when user explicitly clicks on LOGOUT

) type=MyISAM; 
```

类层次结构：

```
interface {
    function login();
    function logout();
        //calls after succes authorization
        function set_as_online();
        //calls from within logout() method
        function set_as_offline();
} 
```

但是当用户关闭他的浏览器时，它不会更新回 NULL，

例如，假设我们有两个用户：User-A，User-B

用户 A 成功登录，现在用户 B 可以看到用户 A 为在线用户。

如果用户 A 忘记单击“注销”并关闭浏览器，用户 B 仍然可以看到用户 A 在线。那就是问题所在。

例如，Facebook 处理得很好，

假设您的朋友刚刚关闭了浏览器（即他的会话不再存在），那么您可以以某种方式将他视为 OFFLINE

我究竟做错了什么？处理离线/在线用户的方法不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:23:48.280

我认为这里需要另一种方法。不要设置在线/离线标志，而是设置“last_seen”时间戳。IE。每个请求都将记录更新为当前时间戳。如果您想知道用户是否在线，只需执行以下操作：

```
if($current_time - $last_seen_time < $session_expire_limit) {
    // online
} else {
    // offline
} 
```

否则，您需要某种 cronjob 来`online`在特定时间后自动重置数据库中的标志，但您仍然需要一`last_seen`列。

// 编辑

我不知道facebook是怎么做的，但它*可以*是以下之一；对于聊天和通知功能，facebook 会打开一个“流”，这实际上是一个由服务器保持活动状态的小 ajax 调用（顺便说一句，这个 ajax 调用每 40 秒刷新一次）。可能此流用于跟踪在线用户。另一个选项（但不太可能）是将事件附加到 window.unload 事件。这不太可能，因为页面刷新、点击到另一个 Facebook 页面的链接等也会触发该事件。这意味着每次点击内部 facebook 链接时，都应该从浏览器中解除绑定事件。想不出其他办法atm，只是一些建议。不幸的是，这些实施起来相当费力，我认为我上面的建议（在编辑之前）应该适用于一个常见的网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:40:36.117

我不确定 facebook 如何控制这些东西，但我可以从头顶向你建议我将如何处理这件事。

我会在您的 auth_users 类型的 Date 表上添加一个新字段，该字段将代表 session_expiry_time 。

然后在您的 html 页面中，您应该实现一些静默 ajax 代码，该代码将调用服务器上的虚拟 php 页面（间隔非常重要，因为您必须平衡性能和功能）。这个虚拟页面将更新 auth_users 表中用户的 session_expiry_time。

因此，在任何给定时间，根据当前时间检查用户的 session_expiry_time 将确定用户是否在线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:22:12.473

在页面上使用简单的 JavaScript

在正文标签中

callLogoff() 应替换为调用注销的 JavaScript 函数。

尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:40:36.023

[http://de2.php.net/manual/en/features.connection-handling.php](http://de2.php.net/manual/en/features.connection-handling.php) 您可以使用 register_shutdown_function() 和 connection_aborted() 您打算实现

# r - 如何在 Rserve 中实现回调机制？

> ID：10715113
> 
> 赞同：14
> 
> 时间：2012-05-23T07:12:21.440
> 
> 标签：r, sockets, rserve

我想知道在 Rserve 中为 java 客户端实现回调机制的简单方法。根据[Rserve](http://www.rforge.net/Rserve/index.html)文档：

*Rserve 不提供回调功能。您的应用程序可以通过 TCP/IP 和 R 套接字实现回调，但它不是 Rserve 的一部分。*

这意味着我的 java 客户端可以通过 Rconnection 引用调用远程 Session 上的函数，但远程 Session 不能回调已实例化它的 java 客户端。我怎样才能开发出这样的机制。如果它通过 R 套接字或 tcp/ip 服务器，这是否意味着每个连接都会打开一个套接字服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T13:49:55.520

好的，这就是我认为可以实现反应式 R 的方式。

# 来自java的非阻塞调用

`request`您需要在这一行 [1]中将 RServe java 客户端和 split 方法分成两部分。第一部分向套接字写入请求，第二部分等待响应。我们需要通过例如一些`boolean`标志使等待成为可选。

# 从 R 返回结果

您将需要某种与 Java 的主动通信。一种可能性是使用普通套接字或更高级别的东西作为 HTTP。我想到了 httpRequest 包 [2]。所以来自 java 的调用应该是这样的：

```
connection.eval(s"""simplePostToHost(
"192.168.12.12","/listener/results/",
try(eval(parse(text="$code")),silent=TRUE),port=8080""") 
```

# 在 Java 中侦听结果

请求和响应应该共享某种唯一 ID，以便我们知道哪个响应是针对哪个请求的。您应该运行一些服务，在路径 /listener/results 上侦听传入结果并告诉 Java 结果已准备好。它还应该能够重用以前应该标记为“忙碌”的 RConnection。我建议在这部分 scala Promise[T] 中使用它。

希望它可以帮助某人。一旦我的公司需要它，我可能会实施它。

[1] [https://github.com/su/REngine/blob/a74e184c051c2d2e850430cd2d0526656d3a6c48/Rserve/protocol/RTalk.java#L211](https://github.com/s-u/REngine/blob/a74e184c051c2d2e850430cd2d0526656d3a6c48/Rserve/protocol/RTalk.java#L211)

[2] [https://cran.r-project.org/web/packages/httpRequest/httpRequest.pdf](https://cran.r-project.org/web/packages/httpRequest/httpRequest.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T10:32:01.860

这是我在[http://statweb.stanford.edu/~lpekelis/13_datafest_cart/13_datafest_r_talk.pdf](http://statweb.stanford.edu/~lpekelis/13_datafest_cart/13_datafest_r_talk.pdf)和[http://www.rforge.net/JRI/files/上找到的答案](http://www.rforge.net/JRI/files/)

从 R 的实例开始

```
Rengine re= new Rengine(args, false, new TextConsole()); 
```

这是您可以看到的回调代码：
![在此处输入图像描述](../Images/bd7f97531250cb860036db2efeae4241.png)
此外，请查看链接以获取更多参考。我不知道作者是谁，否则我会提到它。

# macos - Mac 操作系统上的管理员权限

> ID：10715118
> 
> 赞同：0
> 
> 时间：2012-05-23T07:12:53.997
> 
> 标签：macos, admin, privileges, system-administration

我注意到一些应用程序在安装后会打开一个窗口并询问用户密码。它说应用程序需要`system.privilege.admin`. 我试图弄清楚这到底意味着什么。应用程序本身似乎在用户模式下运行。那它为什么要输入密码呢？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:16:44.377

大多数 Mac 安装将程序放入 Applications 文件夹。默认情况下，这对用户是不可写的。在引擎盖下，安装程序基本上是在执行 sudo 以便它可以将文件写入应用程序。

此外，许多 mac 应用程序在系统库中都有一个首选项文件。这也需要管理员权限才能写入。

最后，应用程序可以注册它可以打开的文件类型。例如 pdf 文件可以通过 Preview 或 Acrobat Reader 或 Acrobat distiller 打开。系统需要跟踪哪些应用程序可以做什么。

# facebook - Windows Phone 的人脉中心如何检索 Facebook 好友的联系信息？

> ID：10715120
> 
> 赞同：-3
> 
> 时间：2012-05-23T07:13:15.873
> 
> 标签：facebook, windows-phone-7

我刚带了一部新的 Windows 手机并开始使用 People Hub 应用程序。无需为 facebook 安装任何其他 3rd 方应用程序即可与您的朋友保持联系，这是一种惊人的方式。这个应用程序还在我的手机中同步了我的 facebook 朋友的联系人列表。“People Hub”检索朋友的电子邮件、联系电话和其他信息，但我认为任何其他 3rd 方应用程序都无法检索这些信息。我读了一个相关的[博客](http://andrewtechhelp.com/andrews-tech-opinions/129-facebook-integration-on-windows-phone-the-problem-being-a-3rd-party-app)，但它仍然无法回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:53:13.207

手机不查脸书。手机与您的真实账户同步。您的真实帐户从 facebook、LinkedIn 和 Twitter 获取数据，并立即将所有数据发送到手机。通过将它们放在一起而不是单独调用不同的服务来节省通信能量。

# android - Android 使用警报管理器在特定时间推送通知

> ID：10715124
> 
> 赞同：1
> 
> 时间：2012-05-23T07:13:31.167
> 
> 标签：android, push-notification, alarmmanager, alarm

我想在特定时间使用推送通知。我正在使用这些代码；

这是我的 AlarmReceiver 类：

```
public class AlarmReceiver extends BroadcastReceiver {

private static int NOTIFICATION_ID = 1;

@Override
public void onReceive(Context context, Intent intent) {
    NotificationManager manger = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Notification notification = new Notification(R.drawable.arrrow_icon,
            "test", System.currentTimeMillis());

    PendingIntent contentIntent = PendingIntent.getActivity(context,
            NOTIFICATION_ID, new Intent(context, AlarmReceiver.class),0);

    Bundle extras = intent.getExtras();
    String title = extras.getString("title");
    String note = extras.getString("note");
    notification.setLatestEventInfo(context, note, title, contentIntent);
    notification.flags = Notification.FLAG_INSISTENT;
    notification.defaults |= Notification.DEFAULT_SOUND;
    manger.notify(NOTIFICATION_ID++, notification);

}
}; 
```

这是我的主要部分；

> 意图alarmintent = new Intent(getApplicationContext(), AlarmReceiver.class); alarmintent.putExtra("title", "test"); alarmintent.putExtra("note", "test message"); PendingIntent 发件人 = PendingIntent .getBroadcast(getApplicationContext(), 1, alarmintent, PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);
> 
> ```
>  AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
>           am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
> ```

如果我的应用程序正在工作，则推送通知正常工作。但是当我强制关闭通知不起作用时。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:55:41.580

ok then try to use this code,put this code out of onCreate() protected void onUserLeaveHint() { // TODO Auto-generated method stub super.onUserLeaveHint(); exitAppAnimate(); }

```
private void exitAppAnimate() {
    ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningTaskInfo> recentTasks = activityManager
            .getRunningTasks(Integer.MAX_VALUE);
    for (int i = 0; i < recentTasks.size(); i++) {
        if (i == 1
                && recentTasks.get(i).baseActivity.toShortString().indexOf(
                        getPackageName()) > -1) {
            // home button pressed
            IShomepressed = true;
            System.out.println("Home buttonpressed..........");

            // android.os.Process.killProcess(android.os.Process.myPid());
            break;
        }
    }
}  and put this if (IShomepressed) {
        IShomepressed = false; 
```

where you using Pending intent.this will help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:20:11.913

这可能会对您有所帮助。首先将此代码用于您的警报接收器类

```
public class AlarmReceiver extends BroadcastReceiver
{
    NotificationManager nm;
    public void onReceive(Context context, Intent intent) 
    {
        Toast.makeText(context, "Log Out !!", Toast.LENGTH_LONG).show();
//      Vibrator vibrator=(Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE);
//      vibrator.vibrate(1000);
        nm=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        CharSequence ch="Log Out Service";
        CharSequence message="Log Out You have to login again!! ";
        Notification notif = new Notification(R.drawable.ic_launcher,
                    "You Are Logged out...", System.currentTimeMillis());
//       PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
//                  new Intent(), 0);
         Intent notifyintent=new Intent(context,AlarmManagerTestActivity.class);
         PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, 
            notifyintent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
         notif.flags |=Notification.FLAG_AUTO_CANCEL;
                  notif.setLatestEventInfo(context, ch, message, pendingIntent);
                  nm.notify(0, notif);        
         }
    } 
```

然后将此代码放入您的活动中

```
Intent intent = new Intent(your activity,AlarmReceiver.class);
PendingIntent pendingIntent = PendingIntent.getBroadcast(
AlarmManagerTestActivity.this, 0, intent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(), pendingIntent); 
```

# android - android edittext 背景图片光标开始

> ID：10715126
> 
> 赞同：3
> 
> 时间：2012-05-23T07:13:37.133
> 
> 标签：android

我为 Edittext 设置了背景图像。但是当用户点击edittext时，光标的起点出现在edittext背景图像之前，看起来很不正常。有什么解决办法。提前致谢。

**EditText 光标像显示的图像一样开始**

![EditText 光标像显示的图像一样开始](../Images/72ae07f66b0f4eee483e550901c3b88b.png)

![在此处输入图像描述](../Images/464acc9ff3c7312bbef59f0866677dbf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:19:51.337

您必须使用 9-patch 图像。如果您不了解 9-patch 图像，请学习

[9-补丁链接](http://developer.android.com/guide/developing/tools/draw9patch.html)..

![在此处输入图像描述](../Images/5d45a16f62655525d6041e63b8bcc170.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:20:09.377

请在 Edittext 中使用左填充，这样您的问题可能会得到解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-11T19:54:21.913

试试这个

安卓：paddingLeft="5dp"

# xml-parsing - 仅为智能和用户创建的播放列表解析 iTunes 库 xml

> ID：10715127
> 
> 赞同：0
> 
> 时间：2012-05-23T07:13:43.647
> 
> 标签：xml-parsing, itunes

我正在尝试为*iTunes 10解析**iTunes 音乐库 xml*。要求是仅解析*智能*和*用户创建*的播放列表，并跳过*图书馆、音乐、电影、电视节目。*

 ***智能播放列表具有*Smart Info*和*Smart Criteria*。假设我有一个用户创建的名为 Library and Music 的播放列表，我怎样才能将它们与包含我所有音乐的原始*Library* and *Music*区分开来？

```
<key>Playlists</key>
<array>
    <dict>
        <key>Name</key><string>Library</string>
        <key>Master</key><true/>
        <key>Playlist ID</key><integer>893</integer>
        <key>Playlist Persistent ID</key><string>1BEAC6B526CA9EE0</string>
        <key>Visible</key><false/>
        <key>All Items</key><true/>
        <key>Playlist Items</key>
        <array>
        .....
        </array>
    </dict>
    ...
    ...
    <dict>
    <key>Name</key><string>Library</string>
    <key>Playlist ID</key><integer>1509</integer>
    <key>Playlist Persistent ID</key><string>8F9656FD7FC595B1</string>
    <key>All Items</key><true/>
    <key>Playlist Items</key>
    <array>
    ....
    </array>
    </dict>
</array> 
```

*我看到“可见*”文本的唯一主要区别.. *Master*不适用于*音乐、电视节目*，所以也不能使用它。我猜应该根据*播放列表 id*或*播放列表持久 id*进行区分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T23:00:33.917

在尝试了多种可能性之后，通过排除具有以下 3 个键之一的播放列表来获得所需的结果：

```
<key>Distinguished Kind</key>
<key>Master</key>
<key>Folder</key> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T18:18:51.810

您必须排除具有这些密钥之一的人

```
<key>Distinguished Kind</key>
<key>Master</key> 
```***

# c# - 为什么 Lambda 变量范围存在于 LINQ 查询之外？

> ID：10715134
> 
> 赞同：5
> 
> 时间：2012-05-23T07:14:09.380
> 
> 标签：c#, .net, linq, scope

我读了这个问题（[What is the scope of a lambda variable in C#?](https://stackoverflow.com/questions/10494074/what-is-the-scope-of-a-lambda-variable-in-c)）

但它是关于 LINQ Query 中的 Lambda 变量范围。

**现在回答我的问题**

假设我有一个非常简单的 LINQ 查询。

```
var Foo = FoobBar.Select(x => x);
var x = somefunction(); 
```

编译器说：`A local variable 'x' cannot be declared in this scope because it would give a different meaning to 'x', which is already used in a 'child' scope to denote something else`。

为什么呢？LINQ 查询结束时，Lambda 变量不应该不复存在吗？

**编辑：**阅读答案后，我得出结论，它的`x`范围在 LINQ Query 内部扩展（从函数返回）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T07:23:23.493

这与 LINQ 无关，而与子作用域有关。

例如：

```
foreach (var bar in FooBar.Bars)
        {
            var x = FooBar.GetFoo();
        }
var x = new Foo(); 
```

从编译器产生完全相同的错误消息。

要解决这个问题，您只需将变量放在不同的（非嵌套）范围内。例如：

```
foreach (var bar in FooBar.Bars)
        {
            var x = FooBar.GetBar();
        }
{
    var x = new Foo();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T07:16:34.167

让我们仔细看看，

```
var Foo = FoobBar.Select(x => x); 
```

true x 的范围以表达式结尾

```
var x = somefunction() 
```

现在这很有趣，这也适用于包含 lamda 表达式的整个方法，因此编译器无法区分，因为后者的范围与前者重叠。并且非常有用的消息也**给“x”赋予了不同的含义，它已经在“子”范围内使用** *（根据您的情况选择）*

[类似范围问题](https://stackoverflow.com/questions/9663114/why-i-cannot-declare-the-variable-with-same-name-that-already-declared-but-new-v/9663203#9663203)

也许您可以在另一个周围包含大括号，以便定义它的范围

```
{
var x = somefunction()
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:45:42.150

想想如果 C# 允许这两个变量存在于同一范围级别，这是不可能的：

```
static void test() {

    Action<int> x = (z) => {
        Console.WriteLine(z);               
    };

    int[] i = { 5,2,0,1,3,1,4 };

    var kyrie = i.Select (x => x);

} 
```

你会如何对 C# 说你想将名为 x 的 Action 委托分配给 kyrie 变量；反之亦然，你会如何对 C# 说你想使用整数投影本身？C# 将如何解决这个问题？

而且 C# 作用域解析是非常一致的，无论您在其他变量之前还是在其他变量之后声明它，它们都是相同的。例如[http://www.anicehumble.com/2012/05/java-said-c-said-scope-consistency.html](http://www.anicehumble.com/2012/05/java-said-c-said-scope-consistency.html)

为了消除这些情况的歧义，C# 不允许您编译具有相同级别的变量名称的程序

这一切都是为了以**明确的方式**向编译器表达你的**意图**。而 C# 在这方面做得很好

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:18:26.790

（编译器）不清楚第二个“x”（在 之后`=>`）是指哪个“x”。

如果你这样写：

```
var Foo = FoobBar.Select(y => x);
var x = somefunction(); 
```

那么`x`lambda中的那个会与'somefunction'结果发生冲突。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T07:28:28.430

您不能在同一范围内声明两个具有相同名称的变量。

“相同范围”意味着它们都在当前范围内

```
void method()
{
    int a;
    int a; //wrong!
} 
```

或者一个在当前范围内，另一个在子范围内。

```
void method()
{
    int a;
    for(;;)
    {
        int a; //wrong again!
    }
} 
```

这是设计使然，适用于任何变量，从`int`s 到 lambda 引用。**

# java - 在java中处理印地语

> ID：10715138
> 
> 赞同：2
> 
> 时间：2012-05-23T07:14:20.063
> 
> 标签：java, hindi

我有一个链接“http://bkwsu.org/thoughtText?lang=hi”，我从中检索了 json 数据，从中提取了印地语中的“文本”，然后是 java。然后我尝试将这个印地语文本发布到 fb 页面。现在问题是当我将数据发布到 fb 页面时，它会显示一些乱码。这是我的代码：

```
import java.util.*;
import java.io.*;
import com.restfb.*;
import java.net.*;
import com.restfb.json.*;
import com.restfb.types.*;
public class MurliPost
{
    public static void main(String args[])throws Exception{
        String temp1="",temp = "";
        URL u=new URL("http://bkwsu.org/thoughtText?lang=hi");
        HttpURLConnection uc=(HttpURLConnection) u.openConnection();
        uc.setDoOutput(true);
        uc.setDoInput(true);
        uc.setRequestProperty("User-Agent","Mozilla/5.0 (Windows NT 5.1) AppleWebKit/534.29 (KHTML, like Gecko) Chrome/12.0.733.0 Safari/534.29");
        uc.setRequestProperty("Connection","keep-alive");
        uc.setRequestProperty("Accept","text/html,application/xhtml+xml,application/xml");
        uc.setRequestProperty("Accept-Language","en-US,en;q=0.8");
        uc.setRequestProperty("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.3");
        uc.setRequestMethod("GET");
        uc.setInstanceFollowRedirects(false);
        BufferedReader br = new BufferedReader(new InputStreamReader(uc.getInputStream()));
        while ((temp=br.readLine())!=null){temp1+="\n"+temp;}
        String murli=temp1.substring(temp1.indexOf("'text':'")+8,temp1.indexOf("',\n'topic':"));
        murli=murli.replace("\\r\\n\\r\\n","\n\n");
        murli=murli.replace("\\r\\n","\n\n");
        murli=murli.replaceAll("[ \t]+", " ");
        Date date=new Date();
        murli=String.valueOf(date.getDate())+"/"+String.valueOf(date.getMonth()+1)+"/"+String.valueOf(1990+date.getYear())+"\n\n"+murli;
        System.out.println(murli);
        DefaultFacebookClient facebookClient=new DefaultFacebookClient("your access token goes here");
        JsonObject j=facebookClient.fetchObject("me/accounts",JsonObject.class);
        JsonArray acc=j.getJsonArray("data");
        for(int i=0;i<acc.length();i++) 
            if(acc.getJsonObject(i).getString("name").equals("Brahma Kumaris")) {
                DefaultFacebookClient facebookClient1=new DefaultFacebookClient(acc.getJsonObject(i).getString("access_token"));
                String posturl=acc.getJsonObject(i).getString("id")+"/feed";
                FacebookType publishMessageResponse=facebookClient1.publish(posturl,FacebookType.class,Parameter.with("message",murli));
                System.out.println("success");
                break;
            }
    }
} 
```

那么如何在java中处理这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:25:42.510

您应该在实例化 InputStreamReader 时指定编码，否则默认系统编码将应用于 GET 请求的输出，如果它与响应中返回的编码不匹配，则会损坏字符。

# javascript - jQuery获取对调用脚本标签的引用

> ID：10715146
> 
> 赞同：0
> 
> 时间：2012-05-23T07:14:48.827
> 
> 标签：javascript, jquery, html

我不确定问题的标题是否正确，以及我的问题在多大程度上是有效的。

这是场景：

// HTML

```
<script src="/script.js" data-app="app.js" /> 
```

// 脚本.js

```
$(function () {

  var script = // ???

}); 
```

在 js 代码中，我想获取对原始标签的引用，即在“/script.js”上初始化加载的那个，所以我可以检查`data-app`属性。

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:19:27.037

您可以枚举脚本`document.scripts`并通过其`src`属性识别您的脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:20:02.700

```
$('script').last().data('app'); 
```

请注意，这可能**不在**DOM 就绪块中。唯一可以访问当前脚本标签的地方是它第一次执行的时候。诸如 DOM 就绪事件之类的异步回调不符合此条件。您可以简单地将值存储在变量中，然后从事件内部使用它：

```
(function() {
    var app = $('script').last().data('app');
    $(document).ready(function() {
        // do stuff
    });
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:22:06.277

我认为没有“正确”的方式来获取您的标签。但是，理论上，当您的脚本运行时，相应的标签应该是最后插入到文档中的标签。因此，将这样的代码投入`script.js`工作：

```
var child = document;
while (child && child.localName != "script")
  child = child.lastChild;

if (child)
  alert("My script tag: " + child); 
```

您需要在脚本加载时运行此代码，如果在初始加载后需要它，请记住脚本标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:31:52.500

```
document.scripts[document.scripts.length-1].src 
```

我不知道什么浏览器支持它（IE和chrome，是的）

# asp.net - 动态添加的验证器不验证（甚至不添加到源中）

> ID：10715148
> 
> 赞同：0
> 
> 时间：2012-05-23T07:14:58.670
> 
> 标签：asp.net, validation, requiredfieldvalidator

我有一个控件作为 .cs 文件，我在其中动态添加控件，并且此 cs 文件被添加到占位符中。第一次创建表时，某些行会被跳过，这些跳过的行会显示为下拉列表的选定索引更改事件。

现在，当我在 selectedindexchanged 事件上添加这些行时，该行被添加，但与之相关的必填字段甚至不会呈现到源上。只有第一次添加的必填字段验证器才会显示。

我需要验证在选定索引更改事件上创建的这些行吗？感谢和问候

这是代码:)

调用 AddInput 方法，其中 id 为文本框，并传递了一个验证器，该验证器被添加到此控件中。

```
protected void AddInput(string id, string text, System.Web.UI.WebControls.TextBox textbox, System.Web.UI.WebControls.BaseValidator validator)
{
    AddLiteral(@"<tr>");
    AddInputTDLedetekst();

    if (text != string.Empty)
    {
        System.Web.UI.WebControls.Label labNavn = new Label();
        labNavn.AssociatedControlID = id;
        labNavn.Text = text;
        labNavn.ID = id + "_newLabel";

        AddLiteral(labNavn);
        if (text != string.Empty && !text.Trim().Contains(":"))
            AddLiteral(":");
        if (validator != null && textbox.Enabled)
            if (validator is RequiredFieldValidator)
            {
                if (validator.ErrorMessage == string.Empty)
                    validator.ToolTip = HentOrd("Feltet skal udfyldes");
                AddLiteral(@"<span class=""mandatoryfield"">*</span>");
            }
    }
    AddLiteral(@"</td>");

    AddInputTDInput();
    if (textbox.CssClass == string.Empty)
        if (textbox.TextMode == TextBoxMode.MultiLine)
            textbox.CssClass = "textarea";
        else
            textbox.CssClass = "textinput";

    textbox.ID = id;
    AddLiteral(textbox);

    if (validator != null)
    {
        validator.ForeColor = System.Drawing.Color.Orange;
        validator.Style.Add("Font-Size", "8pt");
        validator.Style.Add("Font-Weight", "bold");

        if (string.IsNullOrEmpty(validator.ErrorMessage))
        {
            validator.ForeColor = System.Drawing.Color.Orange;
            validator.Style.Add("Font-Size", "8pt");
            validator.Style.Add("Font-Weight", "bold");
            validator.ErrorMessage = HentOrd("feltet skal udfyldes");
        }
        validator.Display = ValidatorDisplay.Static;
        validator.SetFocusOnError = true;
        if (string.IsNullOrEmpty(validator.ControlToValidate))
            validator.ControlToValidate = id;
        validator.CssClass = "ValidationError";
        validator.SetFocusOnError = true;
        validator.ID = "_rfv" + id;
        AddLiteral(validator);
    }
    AddLiteral(@"</td>");

    AddLiteral(@"</tr>");

} 
```

# json - 避免从输入/输出 JSON 中包装对象类型名称（CXF Web 服务）

> ID：10715149
> 
> 赞同：6
> 
> 时间：2012-05-23T07:15:15.743
> 
> 标签：json, cxf

我有一个类似这样的 CXF Web 服务：

```
@Service("MyWebService")
public class MyWebService implements IMyWebService {    
    @Autowired
    private IMyService MyService;

    public ResponseObject doSomething(RequestObject requestObject) {
        ResponseObject responseObject = new ResponseObject;     
        .
        // do something....
        .
        .        
        return responseObject;
    }
} 
```

需要输入 JSON，这样说：

```
{ "requestObject" : { "amount" : 12.50, "userName" : "abcd123" } } 
```

并生成如下输出 JSON：

```
{ "responseObject" : { "success" : "true", "errorCode" : 0 } } 
```

有没有办法配置 CXF，使其接受以下格式的输入 JSON：

```
{ "amount" : 12.50, "userName" : "abcd123" } 
```

我需要在输入和输出 JSON 中去掉对象类型名称“requestObject”/“responseObject”。这甚至可能吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-25T10:54:22.430

如果您使用的是 maven，则 JSONProvider 类在这里：

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-rs-extension-providers</artifactId>
    <version>2.7.5</version>
</dependency> 
```

您可能需要另一个 json 提供程序属性来实现您的目标：

```
<jaxrs:providers>
     <bean class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
           <property name="dropRootElement" value="true"/>
           <property name="dropCollectionWrapperElement" value="true"/>
           <property name="serializeAsArray" value="true"/>
           <property name="supportUnwrapped" value="true"/>
     </bean>
</jaxrs:providers> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T13:31:23.960

如果您通过 springs xml 配置文件（如 applicationContext.xml）配置 json 提供程序，则只需添加以下配置即可。

```
<jaxrs:providers>
            <bean class="org.apache.cxf.jaxrs.provider.json.JSONProvider">
                <property name="dropRootElement" value="true" />
                <property name="supportUnwrapped" value="true" />
            </bean>
</jaxrs:providers> 
```

dropRootElement 告诉 json 提供者删除根元素。有关更多配置和理解，请参阅此[JSON 支持](https://cwiki.apache.org/confluence/display/CXF20DOC/JAX-RS+Data+Bindings#JAX-RSDataBindings-JSONsupport)。

# .net - 是否 PrincipalSearchResult 自动处理其集合中的所有元素？

> ID：10715159
> 
> 赞同：14
> 
> 时间：2012-05-23T07:16:29.597
> 
> 标签：.net, directoryservices, principalsearcher

在 MSDN 文档中找不到关于此的任何内容。

即是否足够做，说：

```
using(PrincipalSearcher searcher = ...)
{
    foreach (var principal in searcher.FindAll())
    {
        ... do something ...
    } // The PrincipalSearchResult<T> returned by searcher.FindAll is disposed here
} 
```

这是我见过的大多数例子，或者我应该这样做：

```
using(PrincipalSearcher searcher = ...)
{
    foreach(var principal in searcher.FindAll())
    {
        using (principal)
        {
            // ... do something ...
        }
    } 
} 
```

后者（在迭代期间显式处理每个项目）看起来“更安全” - 即符合显式处理所有 IDisposable 对象的准则 - 但它有点混乱；例如，它禁止使用 LINQ 来迭代搜索结果。

回应@Rup 的评论：

> 您可以编写一个从父迭代器返回一个结果的 yield 迭代器

是的，我认为这将有助于启用 LINQ。类似于以下扩展方法：

```
public static IEnumerable<T> EnumerateAndDispose<T>(this IEnumerable<T> collection) where T : IDisposable
{
    foreach (T item in collection)
    {
        using (item)
        {
            yield return item;
        }
    }
} 
```

可以用作：

```
searcher.FindAll().EnumerateAndDispose().Select(... use LINQ ...) 
```

但是有必要吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-31T13:46:57.417

一般来说，在很多情况下，不调用 Dispose() 不会导致大问题：编写良好的一次性对象将实现与在终结器中清理事物所需的相同逻辑。（免责声明：我不是说“不要调用 dispose”：它的存在是有原因的！例如，Finalization 可能会在以后发生。我只是在此处描述后果）。

但是，AD 对象是一个明显的例外。特别`SearchResultCollection`是因遭受此问题而闻名（参考：MSDN（包括类文档和其他文章）和[Active Directory：设计、部署和运行 Active Directory](http://books.google.it/books?id=exlzxcsE-7QC&lpg=PA696&ots=JE-bIYLmG-&dq=SearchResultCollection%20dispose&hl=it&pg=PA696#v=onepage&q=SearchResultCollection%20dispose&f=false)）。似乎由于技术原因无法在其终结器中释放资源，因此不调用 dispose 会导致内存泄漏。

正如 Scott 和 Joe 所指出的，许多 MSDN 示例并未对集合中的项目调用 dispose；*但是，Ryan Dunn，前 Windows Azure 技术布道者和.NET 开发人员目录服务编程指南*的合著者，建议对[这篇博文中的](http://dunnry.com/blog/2005/06/23/AQuickReminderOnDisposeAndForeach.aspx)每个项目使用调用 dispose 。从帖子：

> 通常，始终对以下对象类型显式调用 Dispose()：
> 
> *   目录条目
> *   SearchResultCollection（来自 .FindAll()）
> *   DirectorySearcher（如果您没有明确设置 SearchRoot）

我相信这是最接近“权威来源”的地方；*但是*我个人的看法是：

*   如果可以，请致电处置。不会有任何坏处，尤其是如果您可以使用 Joe 的扩展方法恢复 LINQ 功能
*   去使用反射器/ilspy/ildasm和/或像[dotTrace](http://www.jetbrains.com/profiler/)这样的内存配置文件来真正了解发生了什么（基本上，斯科特已经做过，但更深入）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T16:21:54.587

我最初来到该网站是为了问同样的问题，但看到你的问题让我有动力打破[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)并弄清楚自己是否确实做到了。

首先是搜索结果的dispose函数：

```
// System.DirectoryServices.AccountManagement.PrincipalSearchResult<T>
public void Dispose()
{
    if (!this.disposed)
    {
        if (this.resultSet != null)
        {
            lock (this.resultSet)
            {
                this.resultSet.Dispose();
            }
        }
        this.disposed = true;
    }
} 
```

从那里我检查了`resultSet.Dispose()`（在我的情况下 resultSet 是 a `ADDNLinkedAttrSet`）

```
// System.DirectoryServices.AccountManagement.ADDNLinkedAttrSet
public override void Dispose()
{
    try
    {
        if (!this.disposed)
        {
            if (this.primaryGroupMembersSearcher != null)
            {
                this.primaryGroupMembersSearcher.Dispose();
            }
            if (this.queryMembersResults != null)
            {
                this.queryMembersResults.Dispose();
            }
            if (this.currentMembersSearcher != null)
            {
                this.currentMembersSearcher.Dispose();
            }
            if (this.memberSearchResults != null)
            {
                this.memberSearchResults.Dispose();
            }
            if (this.memberSearchersQueue != null)
            {
                foreach (DirectorySearcher directorySearcher in this.memberSearchersQueue)
                {
                    directorySearcher.Dispose();
                }
                this.memberSearchersQueue.Clear();
            }
            IDisposable disposable = this.members as IDisposable;
            if (disposable != null)
            {
                disposable.Dispose();
            }
            IDisposable disposable2 = this.membersEnum as IDisposable;
            if (disposable2 != null)
            {
                disposable2.Dispose();
            }
            if (this.membersQueue != null)
            {
                foreach (IEnumerable enumerable in this.membersQueue)
                {
                    IDisposable disposable3 = enumerable as IDisposable;
                    if (disposable3 != null)
                    {
                        disposable3.Dispose();
                    }
                }
            }
            if (this.foreignGroups != null)
            {
                foreach (GroupPrincipal groupPrincipal in this.foreignGroups)
                {
                    groupPrincipal.Dispose();
                }
            }
            this.disposed = true;
        }
    }
    finally
    {
        base.Dispose();
    }
} 
```

您可以看到 foreach 循环，它正在迭代它拥有的所有成员。因此，它正在为每个成员进行 Dispose。

所以，是的，它确实处理了所有成员，然后处理了一些成员。

# javascript - 带有 setInterval 的 JS 转换

> ID：10715160
> 
> 赞同：0
> 
> 时间：2012-05-23T07:16:29.623
> 
> 标签：javascript, setinterval, transitions

我知道有 css 过渡，但我想在文本上应用过渡（而那件事不能在 css 中制作）。我想要一个自定义的过渡。

你能给我一个你画曲线的网站，它给你js计算吗？（或类似的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:25:39.527

当我使用一些视觉功能时，我需要将浮点数设置为表格单元格。不是原生设置，但有动画：0.1 .0.15.. 0.2... 0.3........ 1 间隔很短。闪烁。我像这样使用thomething：

```
 value = 150
 step = value / 50; // 50 iterations, use preffered for you    
 timer_id = setInterval(function()
 {
   next_iteration += step
   if (next_iteration >= value)
   {
     next_iteration = value
   }
   field.text(next_iteration)
   if (next_iteration >= value)
   {
     clearInterval(timer_id);
     return true
   }
 }, 0 /* zero or more, this is pause between iterations */) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:46:44.537

您绝对应该在“[数学：缓入，使用带有时间约束的 Hermite 曲线缓出位移](https://stackoverflow.com/questions/3367308/math-ease-in-ease-out-a-displacement-using-hermite-curve-with-time-constraint)”中看到。可能这个问题与您的问题有点不同，但是有一个很好的链接到“[插值技巧](http://sol.gfxile.net/interpolation/)”，这反过来可以为您阐明**“轻松输入/输出”**技术。该链接确实值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:24:42.520

您可以在 css3 中进行文本转换，有关演示，请访问[此处](http://www.catswhocode.com/blog/8-examples-of-stunning-css3-text-effects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:24:45.623

可以使用 Jquery 的 animate() 来完成基本的转换；如果您想要更复杂的路径，我想这不会满足您的需求。

但是有一个类似的问题： [jQuery中的复杂动画](https://stackoverflow.com/questions/5206804/complex-animation-in-jquery)

参考： [http ://weepy.github.com/jquery.path/](http://weepy.github.com/jquery.path/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-24T00:52:26.060

我知道这是旧的，但是...尝试使用一些方程来计算运动中特定点的位置，使用简单的方程。这是我发现的一个可以轻松进出的

```
Math.easeInOutCubic = function (t, b, c, d) {
    t /= d/2;
    if (t < 1) return c/2*t*t*t + b;
    t -= 2;
    return c/2*(t*t*t + 2) + b;
}; 
```

this combined with the seInterval function can be very effective and gives you loads of control. just ask if you want more info...

# jython - 用于 Java 的 Reg Jython Python 包装

> ID：10715162
> 
> 赞同：0
> 
> 时间：2012-05-23T07:16:33.870
> 
> 标签：jython, jython-2.5

我被分配了一项任务，将 Java 独立应用程序转换为 Python Web 应用程序。用 Python 语言重新编码整个模块需要花费大量时间和精力。因此有人建议我快速总结一下 Python 并让代码正常工作（ jython.org）（Jython 是 JAVA 的 Python 包装）.. 任何人都可以指导我如何开始，因为我是 Python 和 Jython 的新手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:58:30.587

为了让你开始：

如果您熟悉 Java，那么您应该可以毫无问题地进入 Jython 提示符。像其他任何一样执行它`.jar`。如果您没有下载独立的 jython.jar，请确保在您的类路径中包含 Jython 库。

假设您的 Java 应用程序的包名为`com.stackoverflow.q10715162`，并编译为`.jar`in `C:\jars\your_app.jar`。

然后，您可以在 Jython 中访问它的类。在 Jython 提示符处：

```
>>> import sys
>>> sys.path
['', 'C:\\jython\\Lib', 'C:\\jython\\jython.jar\\Lib', '__classpath__', 
'__pyclasspath__'] 
```

`sys.path`除了其他内容外，这里还有一个目录列表，您的 Jython 发行版在其中查找已编译模块。通过将您编译的 Java 应用程序添加到列表中，它将变得可访问（更深入的信息可在[http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html](http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html)获得）：

```
>>> sys.path.append('C:\\jars\\your_app.jar')
>>> import com.stackoverflow.q10715162 as yourapp
*sys-package-mgr*: processing new jar, 'C:\\jars\\your_app.jar'
>>> dir(yourapp)
['Class1', 'Class2', 'Class3', ...] 
```

通过使用`dir(yourapp)`，您可以看到您在 Java 应用程序中定义的类。`dir(yourapp.Class1)`将列出类中的所有方法、函数等。

您可能希望至少通读 Jython Book 的前几页以熟悉新语法。我发现它比 Java 简单得多。

对于制作 Jython Web 应用程序，我听说`cgi`这是迄今为止以最少开销开始的最快方式：

```
#!/usr/bin/python

print("Content-Type: text/plain\n\n")

print("Hello, World!\n") 
```

本教程似乎很有帮助：[http](http://www.cs.virginia.edu/~lab2q/lesson_1/) ://www.cs.virginia.edu/~lab2q/lesson_1/ 。虽然是针对 Python 的，但几乎所有的都应该适用于 Jython。

当然，如果`cgi`不适合您或您的项目，还有许多其他 Python/Jython Web 服务选项。我已经使用`web2py`并且非常喜欢它。

# wpf - MindFusion WPF 图上的 LinkModified 事件

> ID：10715164
> 
> 赞同：0
> 
> 时间：2012-05-23T07:16:40.567
> 
> 标签：wpf, notifications, diagram

我使用 MindFusion 的 WPF 图表组件（MindFusion.Diagramming.Wpf.Diagram）。

XAML：

```
...
<Grid>
   <diag:Diagram x:Name="diagram"/>
</Grid> 
```

在图表实例上，我订阅了链接修改（.LinkModified）：

代码：

```
diagram.LinkModified += ViewModel.LinkModified; 
```

正如文档所说，我只有在用户修改链接时才会收到此事件。

我的问题是，如果有人知道如果链接在没有用户交互的情况下被修改（例如图表在移动其他元素后自动修改链接），如何获得通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:24:32.493

与此同时，我找到了解决方案：

订阅

```
diagram.LinkRouted 
```

# java - “-”枚举java中的分隔字符串

> ID：10715165
> 
> 赞同：2
> 
> 时间：2012-05-23T07:16:47.483
> 
> 标签：java, enums, compilation

我在使用“-”分隔的字符串在 Java 中创建枚举时遇到问题：

```
public enum CipherList{

   RSA-MD5,AES128-SHA,AES256-SHA;
} 
```

我收到编译错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T07:17:46.980

该`-`符号不能用于 Java 中的标识符中。（如果并且恰好是整数，将如何`RSA-MD5`解析？）`RSA``MD5`

我建议你使用

```
RSA_MD5, AES128_SHA, AES256_SHA; 
```

根据常量^([相关问题](https://stackoverflow.com/questions/3069743/coding-conventions-naming-enums))的 Java 编码约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:18:10.777

枚举常量必须使用有效的 Java 标识符，并且标识符不允许包含破折号。

例如，您可以将破折​​号替换为下划线：

```
public enum CipherList{
   RSA_MD5, AES128_SHA, AES256_SHA;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T07:27:21.070

如果您想使用枚举使用精确的字符串，您可以使用以下方法。

```
enum CipherList{
   CHIP_ONE("RSA-MD5"),CHIP_TWO("AES128-SHA"),CHIP_THREE("AES256-SHA");
   private String code;
   CipherList(String code) {
      code= code;
   }
   String getcode() {
      return code;
   } 
} 
```

# ffmpeg - FFMPEG：MP4 视频无法在 iPhone、iPod、iPad 中正常播放

> ID：10715166
> 
> 赞同：1
> 
> 时间：2012-05-23T07:16:47.517
> 
> 标签：ffmpeg

我正在将视频从 m4v、flv 转换为 iPhone、iPod、iPad 的 MP4。

我正在使用以下命令来转换这些视频

> ffmpeg -y -i video_1336500693.m4v -vcodec libx264 -vpre slow -vpre ipod640 -b 250k -bt 50k -acodec libfaac -ab 56k -ac 2 -s 480x320 video_1336500693.mp4

此 mp4 文件的视频部分工作正常，但音频工作不正常。我为此使用 HTML5。

音频在前 8-10 秒内有效，但在那之后音频不起作用，奇怪的是，如果我向前或向后跳转音频有效。

谁能建议出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:07:49.353

对命令稍作修改就可以了。我添加了`-ar 48000`它并且有效

> ffmpeg -y -i video_1336500693.m4v -vcodec libx264 -vpre slow -vpre ipod640 -b 250k -bt 50k -acodec libfaac -ac 2 -ar 48000 -ab 64k -s 480x320 video_1336500693.mp4

# c++ - 使用 FFMPEG 库接收 RTSP 流

> ID：10715170
> 
> 赞同：38
> 
> 时间：2012-05-23T07:16:57.280
> 
> 标签：c++, c, ffmpeg, rtsp, ip-camera

我的 LAN 上使用 RTSP 流式传输视频有一个 IPCamera。我已经能够使用 ffplay 命令成功捕获并显示它：

```
ffplay rtsp://admin:123456@192.168.2.50:7070 
```

（有认证）

所以我想使用`ffmpeg`库在 C/C++ 中使用编程来实现相同的目的。我想这一定是可能的。

所以让我提出两个简单的问题：

1.  如何使用 FFMPEG 库在 C/C++ 程序中接收流？（只需提供一些 URL/教程，因为谷歌没有帮助）

2.  如何显示收到的视频？（同样在这里，一些很好的 URL 来指导我）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-15T16:22:39.257

对于 rtsp 流，以下内容对我有用（在接收帧后，我将结果保存到 ppm 文件）：

```
 #include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <sstream>

extern "C"
{
    #include <avcodec.h>
    #include <avformat.h>
    #include <avio.h>
    #include <swscale.h>
}

void log_callback(void *ptr, int level, const char *fmt, va_list vargs)
{
   static char message[8192];
   const char *module = NULL;

    if (ptr)
    {
        AVClass *avc = *(AVClass**) ptr;
        module = avc->item_name(ptr);
    }
   vsnprintf_s(message, sizeof(message), fmt, vargs);

   std::cout << "LOG: " << message << std::endl;
}

int main(int argc, char** argv) {

    SwsContext *img_convert_ctx;
    AVFormatContext* context = avformat_alloc_context();
    AVCodecContext* ccontext = avcodec_alloc_context();
    int video_stream_index;

    av_register_all();
    avformat_network_init();
    //av_log_set_callback(&log_callback);

    //open rtsp
    if(avformat_open_input(&context, "rtsp://134.169.178.187:8554/h264.3gp",NULL,NULL) != 0){
        return EXIT_FAILURE;
    }

    if(avformat_find_stream_info(context,NULL) < 0){
        return EXIT_FAILURE;
    }

    //search video stream
    for(int i =0;i<context->nb_streams;i++){
        if(context->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
            video_stream_index = i;
    }

    AVPacket packet;
    av_init_packet(&packet);

    //open output file
    //AVOutputFormat* fmt = av_guess_format(NULL,"test2.mp4",NULL);
    AVFormatContext* oc = avformat_alloc_context();
    //oc->oformat = fmt;
    //avio_open2(&oc->pb, "test.mp4", AVIO_FLAG_WRITE,NULL,NULL);

    AVStream* stream=NULL;
    int cnt = 0;
    //start reading packets from stream and write them to file
    av_read_play(context);//play RTSP

    AVCodec *codec = NULL;
    codec = avcodec_find_decoder(CODEC_ID_H264);
    if (!codec) exit(1);

    avcodec_get_context_defaults3(ccontext, codec);
    avcodec_copy_context(ccontext,context->streams[video_stream_index]->codec);
    std::ofstream myfile;

    if (avcodec_open(ccontext, codec) < 0) exit(1);

    img_convert_ctx = sws_getContext(ccontext->width, ccontext->height, ccontext->pix_fmt, ccontext->width, ccontext->height,
                            PIX_FMT_RGB24, SWS_BICUBIC, NULL, NULL, NULL);

    int size = avpicture_get_size(PIX_FMT_YUV420P, ccontext->width, ccontext->height);
    uint8_t* picture_buf = (uint8_t*)(av_malloc(size));
    AVFrame* pic = avcodec_alloc_frame();
    AVFrame* picrgb = avcodec_alloc_frame();
    int size2 = avpicture_get_size(PIX_FMT_RGB24, ccontext->width, ccontext->height);
    uint8_t* picture_buf2 = (uint8_t*)(av_malloc(size2));
    avpicture_fill((AVPicture *) pic, picture_buf, PIX_FMT_YUV420P, ccontext->width, ccontext->height);
    avpicture_fill((AVPicture *) picrgb, picture_buf2, PIX_FMT_RGB24, ccontext->width, ccontext->height);

    while(av_read_frame(context,&packet)>=0 && cnt <1000)
    {//read 100 frames

        std::cout << "1 Frame: " << cnt << std::endl;
        if(packet.stream_index == video_stream_index){//packet is video
            std::cout << "2 Is Video" << std::endl;
            if(stream == NULL)
            {//create stream in file
                std::cout << "3 create stream" << std::endl;
                stream = avformat_new_stream(oc,context->streams[video_stream_index]->codec->codec);
                avcodec_copy_context(stream->codec,context->streams[video_stream_index]->codec);
                stream->sample_aspect_ratio = context->streams[video_stream_index]->codec->sample_aspect_ratio;
            }
            int check = 0;
            packet.stream_index = stream->id;
            std::cout << "4 decoding" << std::endl;
            int result = avcodec_decode_video2(ccontext, pic, &check, &packet);
            std::cout << "Bytes decoded " << result << " check " << check << std::endl;
            if(cnt > 100)//cnt < 0)
            {
                sws_scale(img_convert_ctx, pic->data, pic->linesize, 0, ccontext->height, picrgb->data, picrgb->linesize);
                std::stringstream name;
                name << "test" << cnt << ".ppm";
                myfile.open(name.str());
                myfile << "P3 " << ccontext->width << " " << ccontext->height << " 255\n";
                for(int y = 0; y < ccontext->height; y++)
                {
                    for(int x = 0; x < ccontext->width * 3; x++)
                        myfile << (int)(picrgb->data[0] + y * picrgb->linesize[0])[x] << " ";
                }
                myfile.close();
            }
            cnt++;
        }
        av_free_packet(&packet);
        av_init_packet(&packet);
    }
    av_free(pic);
    av_free(picrgb);
    av_free(picture_buf);
    av_free(picture_buf2);

    av_read_pause(context);
    avio_close(oc->pb);
    avformat_free_context(oc);

    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-01-11T18:11:22.787

FWIW，我已经更新了@technique 提供的代码，以使用我从 FFMPEG 3.2.2 获得的库。希望这有助于有人谷歌搜索。有一些小的变化可能会让那些偶然发现这个答案的人感到困惑。

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <fstream>
#include <sstream>

extern "C" {
#include <libavcodec/avcodec.h>
#include <libavformat/avformat.h>
#include <libavformat/avio.h>
#include <libswscale/swscale.h>
}

int main(int argc, char** argv) {

    // Open the initial context variables that are needed
    SwsContext *img_convert_ctx;
    AVFormatContext* format_ctx = avformat_alloc_context();
    AVCodecContext* codec_ctx = NULL;
    int video_stream_index;

    // Register everything
    av_register_all();
    avformat_network_init();

    //open RTSP
    if (avformat_open_input(&format_ctx, "rtsp://134.169.178.187:8554/h264.3gp",
            NULL, NULL) != 0) {
        return EXIT_FAILURE;
    }

    if (avformat_find_stream_info(format_ctx, NULL) < 0) {
        return EXIT_FAILURE;
    }

    //search video stream
    for (int i = 0; i < format_ctx->nb_streams; i++) {
        if (format_ctx->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
            video_stream_index = i;
    }

    AVPacket packet;
    av_init_packet(&packet);

    //open output file
    AVFormatContext* output_ctx = avformat_alloc_context();

    AVStream* stream = NULL;
    int cnt = 0;

    //start reading packets from stream and write them to file
    av_read_play(format_ctx);    //play RTSP

    // Get the codec
    AVCodec *codec = NULL;
    codec = avcodec_find_decoder(AV_CODEC_ID_H264);
    if (!codec) {
        exit(1);
    }

    // Add this to allocate the context by codec
    codec_ctx = avcodec_alloc_context3(codec);

    avcodec_get_context_defaults3(codec_ctx, codec);
    avcodec_copy_context(codec_ctx, format_ctx->streams[video_stream_index]->codec);
    std::ofstream output_file;

    if (avcodec_open2(codec_ctx, codec, NULL) < 0)
        exit(1);

    img_convert_ctx = sws_getContext(codec_ctx->width, codec_ctx->height,
            codec_ctx->pix_fmt, codec_ctx->width, codec_ctx->height, AV_PIX_FMT_RGB24,
            SWS_BICUBIC, NULL, NULL, NULL);

    int size = avpicture_get_size(AV_PIX_FMT_YUV420P, codec_ctx->width,
            codec_ctx->height);
    uint8_t* picture_buffer = (uint8_t*) (av_malloc(size));
    AVFrame* picture = av_frame_alloc();
    AVFrame* picture_rgb = av_frame_alloc();
    int size2 = avpicture_get_size(AV_PIX_FMT_RGB24, codec_ctx->width,
            codec_ctx->height);
    uint8_t* picture_buffer_2 = (uint8_t*) (av_malloc(size2));
    avpicture_fill((AVPicture *) picture, picture_buffer, AV_PIX_FMT_YUV420P,
            codec_ctx->width, codec_ctx->height);
    avpicture_fill((AVPicture *) picture_rgb, picture_buffer_2, AV_PIX_FMT_RGB24,
            codec_ctx->width, codec_ctx->height);

    while (av_read_frame(format_ctx, &packet) >= 0 && cnt < 1000) { //read ~ 1000 frames

        std::cout << "1 Frame: " << cnt << std::endl;
        if (packet.stream_index == video_stream_index) {    //packet is video
            std::cout << "2 Is Video" << std::endl;
            if (stream == NULL) {    //create stream in file
                std::cout << "3 create stream" << std::endl;
                stream = avformat_new_stream(output_ctx,
                        format_ctx->streams[video_stream_index]->codec->codec);
                avcodec_copy_context(stream->codec,
                        format_ctx->streams[video_stream_index]->codec);
                stream->sample_aspect_ratio =
                        format_ctx->streams[video_stream_index]->codec->sample_aspect_ratio;
            }
            int check = 0;
            packet.stream_index = stream->id;
            std::cout << "4 decoding" << std::endl;
            int result = avcodec_decode_video2(codec_ctx, picture, &check, &packet);
            std::cout << "Bytes decoded " << result << " check " << check
                    << std::endl;
            if (cnt > 100)    //cnt < 0)
                    {
                sws_scale(img_convert_ctx, picture->data, picture->linesize, 0,
                        codec_ctx->height, picture_rgb->data, picture_rgb->linesize);
                std::stringstream file_name;
                file_name << "test" << cnt << ".ppm";
                output_file.open(file_name.str().c_str());
                output_file << "P3 " << codec_ctx->width << " " << codec_ctx->height
                        << " 255\n";
                for (int y = 0; y < codec_ctx->height; y++) {
                    for (int x = 0; x < codec_ctx->width * 3; x++)
                        output_file
                                << (int) (picture_rgb->data[0]
                                        + y * picture_rgb->linesize[0])[x] << " ";
                }
                output_file.close();
            }
            cnt++;
        }
        av_free_packet(&packet);
        av_init_packet(&packet);
    }
    av_free(picture);
    av_free(picture_rgb);
    av_free(picture_buffer);
    av_free(picture_buffer_2);

    av_read_pause(format_ctx);
    avio_close(output_ctx->pb);
    avformat_free_context(output_ctx);

    return (EXIT_SUCCESS);
} 
```

它可以通过以下方式编译：

```
g++ -w my_streamer.cpp -o my_streamer $(pkg-config --cflags --libs  libavcodec libavformat libswscale libavutil) 
```

我包括了，`-w`因为库中的这些函数有很多弃用警告。您需要安装 pkg-config 以及 libavcodec libavformat libswscale 和 libavutil 库。（h/t @BobCheng 缺少图书馆）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-18T04:53:20.287

FFmpeg 可以像打开本地视频文件一样直接打开 rtsp 流。[这](https://github.com/chelyaev/ffmpeg-tutorial)是一个使用最新版本的 FFmpeg 更新的教程代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T06:11:55.560

检查您的 ./config 文件。可能是它的编译`armlinux`不适用于`x86`. 这就是为什么你得到未定义的参考`'avcodec_register_all'`

这是解决方案： -

```
$ cd ffmpeg 

$export LD_RUN_PATH=/usr/local/lib:/usr/lib:/lib 

$ ./configure

$ make && make install 
```

然后编译你的应用程序。

# c# - 通用列表替换

> ID：10715178
> 
> 赞同：3
> 
> 时间：2012-05-23T07:17:44.043
> 
> 标签：c#, list, generics

所以我试图`list<>`在一个对象中设置一个新的`list<>`. 这个列表可以是任何类型，因此使用泛型。

我得到一个编译时错误，“无法将`System.Collections.Generic.List<object>`表达式转换为类型`System.Collections.Generic.IEnumerable<T>`”有没有办法让它工作？

```
private void MyGenericMethod<T>(FieldInfo field)
{   
    field.SetValue(obj, new List<T>(newObjectList));    // new List<T> allObjects.ConvertAll<IEnumerable>) ???
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:54:08.113

我和达米安在一起。问题一定是 newObjectList，因为将泛型类型的 List 传递给 SetValue 没有问题，因为它接受两个 Object 类型的参数

```
public void SetValue(
Object obj,
Object value
) 
```

如果您创建一个新列表并用另一个集合填充它，它将要求一个 IEnumerable，因此您应该尝试类似

```
field.SetValue(obj, new List<T>(newObjectList as IEnumerable<T>)); 
```

至少，在编译时，它不会抛出任何错误

# android - 在android中使用Fragment在androd4.0中制作项目？

> ID：10715181
> 
> 赞同：-1
> 
> 时间：2012-05-23T07:17:53.507
> 
> 标签：android, fragment

我附上了截图。请检查它们。在截图中，我使用了两个屏幕，第一个屏幕在左侧，第二个在右侧。当我们点击搜索按钮，然后在右侧打开其他屏幕但左侧屏幕不会改变。我们使用片段功能，但我没有在运行时更改右侧屏幕。请描述这个问题，以便我们可以制作这个应用程序。

![在此处输入图像描述](../Images/b6bc8636095bf1e8fd0603e02a3fb6d8.png)

举个例子

![在此处输入图像描述](../Images/67b267ee8cf1bc516006fa6ba46a8805.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:26:49.777

首先，请参阅[http://developer.android.com/design](http://developer.android.com/design) ，了解有关如何使您的 UI 更自然地与 Android 框架一起工作的一些想法。接下来，加载[API Demos](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/index.html)的源代码并找到说明 Fragments 和 ActionBar 的文件。[从FragmentLayout](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/FragmentLayout.html)开始：这是最简单的。

# c# - 上传大文件时抛出“System.OutOfMemoryException”

> ID：10715183
> 
> 赞同：1
> 
> 时间：2012-05-23T07:18:09.127
> 
> 标签：c#, asp.net, file-upload

上传大于 500 MB 的文件时出现以下错误

“抛出了‘System.OutOfMemoryException’类型的异常。”

我的代码如下所示：

```
public readonly string Filename, ContentType;
public readonly int Size;
public readonly byte[] Bytes;

public FileHolder(HttpPostedFile file)
{
            Filename = Path.GetFileName(file.FileName);
            ContentType = GetContentType(file.ContentType, Filename);
            Size = file.ContentLength;
            Bytes = new byte[file.InputStream.Length];          //Here i get error
            file.InputStream.Read(Bytes, 0, Size);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:26:37.127

不要试图一次读取整个流。无论如何，您不会一次获得整个流。

创建一个大小合理的缓冲区，然后一次读取一个块：

```
byte[] buffer = new byte[8192];
int offset = 0;
int left = Size;
while (left > 0) {
  int len = file.InputStream.Read(buffer, 0, Math.Min(buffer.Length, left));
  left -= len;
  // here you should store the first "len" bytes of the buffer
  offset += len;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:23:34.347

您不应该将整个文件加载到字节数组中。相反，您可以直接从输入流处理文件。

# android - 无法使用 twitter4j 登录和推特

> ID：10715185
> 
> 赞同：2
> 
> 时间：2012-05-23T07:18:11.057
> 
> 标签：android, android-intent

在 twitter integartion 中，我遇到以下错误：

oauth.signpost.exception.OAuthCommunicationException：与服务提供商的通信失败：[https ://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)

# javascript - 是否有相当于 Wpf/Silverlight notifyPropertyChanged 方法的 Knockoutjs？

> ID：10715193
> 
> 赞同：1
> 
> 时间：2012-05-23T07:18:49.300
> 
> 标签：javascript, wpf, silverlight, mvvm, knockout.js

是否有相当于 Wpf/Silverlight`notifyPropertyChanged`方法的 Knockoutjs？如何在 UI 中手动调用属性更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:29:36.803

`valueHasMutated`是你要找的：

```
viewModel.name.valueHasMutated(); 
```

# android - ListView 图像的 onClick 侦听器 - Android

> ID：10715201
> 
> 赞同：16
> 
> 时间：2012-05-23T07:19:48.707
> 
> 标签：android, listview, onclicklistener

我`ListView`在右侧有一个图像。我想`onClick`通过单击`ListView`. 请参阅图片以供参考。

![在此处输入图像描述](../Images/4b2da5bf32054b9f89f25b03911cef1b.png)

我知道基本`OnClick`的监听器实现，但这对我来说似乎有点棘手：P

忘了提一下，通过单击实际`ListView`将启动一个新活动，所以我需要维护两个模式。

```
 listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            eventsData.remove(id);
            cursor.requery(); 
        }

    }); 
```

上面的代码通过单击任何列表元素来执行删除`eventsData.remove(id);`是执行此任务的数据库助手。就像我现在说的那样，我需要一种方法来通过单击图像而不是整个列表元素来执行相同的过程，我希望列表元素稍后执行一些其他操作。

我希望现在我清楚一点。

* * *

**解决方案：**

*如果有人遇到同样的情况，那么这里是适配器的完整代码。*

```
 class CustomAdapter extends ArrayAdapter<String> {
 CustomAdapter() {
  super(Activity.this, R.layout.row, R.id.label, items);
}

public View getView(final int position, View convertView,
                    ViewGroup parent) {
  View row=super.getView(position, convertView, parent);
  deleteImg=(ImageView)row.findViewById(R.id.icon);

  deleteImg.setImageResource(R.drawable.delete);      
  deleteImg.setOnClickListener(new OnClickListener() {
      String s = items[position];
    @Override
    public void onClick(View v) {
        Toast.makeText(context, s, Toast.LENGTH_SHORT).show();          
    }
});

  return(row);
} 
```

}

我知道编码有点蹩脚，所以请耐心等待，我只想展示实际的过程。

它对我有用:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T07:24:16.590

你应该在你`Adapter` *不在的地方做`Activity`。*

```
yourImg.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // things you want to do 
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-17T08:09:42.827

> 创建一个接口用于从适配器到活动的通信

```
public interface ListenerActivity        
{    
public void Remove();    
} 
```

在您的适配器类中：

```
class CustomAdapter extends ArrayAdapter<String> {

ListenerActivity listener;

CustomAdapter(YourActivity obj) {
  super(Activity.this, R.layout.row, R.id.label, items);

  listener=obj;
}
 public View getView(final int position, View convertView,
                ViewGroup parent) {
ImageId.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        listener.Remove();
    }
});
} 
```

在您的活动中：

```
class MyActivity extends Activity implements ListenerActivity
{
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
}
 @Override
    public void Remove() {

//Do your remove functionality here
    }         
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T15:09:42.117

添加到最后一个答案并重新考虑这个答案，我添加了一些代码以在删除项目或其他操作后刷新视图：

```
//in your adapter you have to get list of items:

 public CartListAdapter(Context context, int resourceId,
        List<CartItemModel> items) {
    super(context, resourceId, items);
    this.context = context;
    this.items= items;
}

//after that you have to set a listner on the imageView like this:

public View getView(int position, View convertView, ViewGroup parent) {
   holder.imageViewDelete.setOnClickListener(new imageViewClickListener(position));
   // some other lines code ...
   // here we get the item to remove
    rowItem= getItem(position);
    }

//and here the definition of the listner:

private class imageViewClickListene implements OnClickListener {
   int position;
    public imageViewClickListene( int pos)
        {
            this.position = pos;
        }

    public void onClick(View v) {

    // here we  remove the selected item    
        items.remove(rowItem);
            // here we refresh the adapter
        CartListAdapter.this.notifyDataSetChanged();

}
} 
```

它对我有用，享受！

# c++ - MPJ Express Scatterv 和 Gatherv，int[] 位移的目的是什么？

> ID：10715204
> 
> 赞同：1
> 
> 时间：2012-05-23T07:19:58.913
> 
> 标签：c++, mpi, java

问题 #1。

Scatterv 的“位移”参数的目的是什么？它与 Gatherv 有何不同？以及它如何支持地址空间上的“重叠”？你的平均乔位移阵列是什么样的？

```
Scatterv( Object sendbuf, int sendoffset, int[] sendcounts,
int[] displs, Datatype sendtype, Object recvbuf,
int recvoffset, int recvcount, Datatype recvtype,
int root )

Gatherv( Object sendbuf, Object sendbuf, int sendoffset,
int sendcount, Datatype sendtype, Object recvbuf,
int[] recvcounts, int[] displs, Datatype recvtype,
int root ) 
```

问题2。

在 Gatherv 中，两个**sendbuf**参数中的哪一个正在接收或发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:57:43.873

Q1。在散射向量和聚集向量操作中，间隔和计数的目的是相同的。两者都指定每个数据块开始的大缓冲区（`sendbuf`分散，`recvbuf`聚集）中的位置以及它有多少元素。在`Scatterv`这些中，用于定义`sendbuf`要分散到通信器中所有进程的块。`Gatherv`这些用于定义`recvbuf`将来自通信器中所有进程的不同数据块放置在何处。MPI 标准要求**在分散期间不得多次读取单个位置，并且在收集期间不得多次写入单个位置**，即各个块不应重叠，但出于性能原因，大多数（如果不是全部）现有 MPI 实现不会严格执行该约束。根据 Joe 在 MPI 代码中所做的操作，平均 Joe 位移数组看起来会有所不同。因为`Scatterv`和`Gatherv`主要用于在其元素数量不能被通信器中的进程数量整除时启用数据的分散和收集，在大多数情况下`displs[0] = 0`和`displs[i] = sendcounts[0] + sendcounts[1] + ... + sendcounts[i-1]`（或`recvcounts`分别）。

Q2。`sendbuf`，`sendoffset`并`sendcount`指定要收集的数据的本地部分。`recvbuf`，`recvcounts[]`并`displs[]`指定大缓冲区中要收集这些本地片段的部分。

这一切都是用 MPI 标准编写的，恕我直言，这是为数不多的普通人可以阅读的标准之一。

# java - 如何根据某些特定值对地图中的值进行分组？

> ID：10715207
> 
> 赞同：0
> 
> 时间：2012-05-23T07:20:11.640
> 
> 标签：java, dictionary

我有来自地图的值，如下所示

```
Key = 1_1, Value = 02/04/2012
Key = 1_2, Value = 03/04/2012
Key = 1_3, Value = 04/04/2012
Key = 1_4, Value = 05/04/2012
Key = 1_5, Value = 06/04/2012
Key = 1_6, Value = 09/04/2012
Key = 1_7, Value = 10/04/2012
Key = 1_8, Value = 11/04/2012
Key = 1_9, Value = 12/04/2012
Key = 1_10, Value = 13/04/2012
Key = 1_11, Value = 18/04/2012
Key = 1_12, Value = 19/04/2012
Key = 1_13, Value = 20/04/2012
Key = 1_14, Value = 23/04/2012
Key = 1_15, Value = 24/04/2012
Key = 1_16, Value = 25/04/2012
Key = 1_17, Value = 26/04/2012
Key = 1_18, Value = 27/04/2012
Key = 1_19, Value = 30/04/2012
Key = 10_20, Value = 02/04/2012
Key = 10_21, Value = 03/04/2012
Key = 10_22, Value = 04/04/2012
Key = 10_23, Value = 05/04/2012
Key = 10_24, Value = 06/04/2012
Key = 10_25, Value = 09/04/2012
Key = 10_26, Value = 10/04/2012
Key = 10_27, Value = 11/04/2012
Key = 10_28, Value = 12/04/2012
Key = 10_29, Value = 13/04/2012
Key = 10_30, Value = 16/04/2012
Key = 10_31, Value = 17/04/2012
Key = 10_32, Value = 18/04/2012
Key = 10_33, Value = 19/04/2012
Key = 10_34, Value = 23/04/2012
Key = 10_35, Value = 24/04/2012
Key = 10_36, Value = 26/04/2012
Key = 10_37, Value = 27/04/2012 
```

我真的很难将这些值分开并将它们放在单独的地图中。

我想分组如下。

1_1 到 1_19 我想根据“_”拆分并单独获取第一个值并将它们分组到单独的地图中。

像 1 是关键，值将是日期。

编辑：

```
employeeMap =  showExelData(sheetData);
        String previousEemployeeID = "",employeeID[];
        Iterator<Map.Entry> entries = employeeMap.entrySet().iterator();
        while (entries.hasNext()) {
            Map.Entry entry = entries.next();
            employeeID = entry.getKey().toString().split("_");

                // this is the place where i want to check the values if 1 than group the values it can be even  Key = 1_0, Value = 25/04/2012 to  If Key = 1_18, Value = 30/04/2012
     but when the other one comes ex :  Key = 10_0, Value = 25/04/2012 to  If Key = 10_17, Value = 30/04/2012it has to go to new Map 
```

这是我缺乏的地方。}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:00:50.837

您想创建一个`Map`MapS，其中外部 Map 的键是给定 Map 的键的第一个数字。下面的代码未经测试，但您可以将其作为提示...

```
Map<String, Date> givenMap; // this is the given Map
Map<Integer, Map<Integer, Date> > newMap = new HashMap<Integer, Map<Integer, Date> > ();
for (Map.Entry<String, Date> entry : givenMap.entrySet()) {
    String givenKey = entry.getKey();
    Date givenDate = entry.getValue();
    String[] splittedKey = givenKey.split("_");
    int newOuterKey = Integer.parseInt(splittedKey[0]);
    int newInnerKey = Integer.parseInt(splittedKey[1]);
    if (!newMap.containsKey(newOuterKey)) {
        newMap.put(newOuterKey, new HashMap<Integer, Date> ();
    }
    newMap.get(newOuterKey).put(newInnerKey, givenDate);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:55:17.130

如果要将 1_1、1_2 拆分为 1_19.. 使用 String 类的 split() 函数。

前任。

```
String x = 1_19;

String[] y = x.split("_"); 
```

y[0] 将等于 1 并且 y[1] 将是 19

至于将第一个值用作地图中的键，这是不可能的，因为它需要地图中每个条目的唯一键，就像 npinti 在您的帖子中评论的那样。

```
public class Mapping {

    Map<String, String> coMap;
    List<String> coList;

    public Mapping() 
    {
        init();
    }

    public static void main(String[] args) 
    {
        Mapping oMapping = new Mapping();

        Map<String, Map<String, String>> oMap = oMapping.classifyMapEntries();

        for ( String sParentKey : oMapping.coList )
        {
            Map<String, String> oChildMap = oMap.get(sParentKey);
            Iterator<String> oIterator = oChildMap.keySet().iterator();

            System.out.println("Map");
            while( oIterator.hasNext() )
            {
                String sChildKey = oIterator.next();
                System.out.print( "Key: " + sChildKey + ", Value: " 
                                    + oChildMap.get(sChildKey) + "\n");
            }
        }
    }

    private void init()
    {
        coMap = new HashMap<String, String>();
        coList = new ArrayList<String>();

        coMap.put("1_1", "a");
        coMap.put("1_19", "a");
        coMap.put("10_1", "b");
        coMap.put("10_19", "b");
    }

    private Map<String, Map<String, String>> classifyMapEntries()
    {
        Map<String, Map<String, String>> oClassified = 
            new HashMap<String, Map<String,String>>();

        Iterator<String> oIterator = coMap.keySet().iterator();
        while( oIterator.hasNext() )
        {
            String sKey = oIterator.next();

            String sFirst = sKey.substring(0,sKey.indexOf("_"));
            if ( !coList.contains(sFirst) )
            {
                coList.add(sFirst);
            }
        }

        for ( String sKey : coList )
        {
            Map<String, String> oChildMap = new HashMap<String, String>();

            Iterator<String> oIterator2 = coMap.keySet().iterator();
            while( oIterator2.hasNext() )
            {
                String sChildKey = oIterator2.next();
                String sParentKey = sChildKey.substring(0,sChildKey.indexOf("_"));

                if ( sKey.equals(sParentKey) )
                {
                    oChildMap.put(sChildKey, coMap.get(sChildKey));
                }
            }

            oClassified.put(sKey, oChildMap);
        }

        return oClassified;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:57:03.457

从评论的澄清中，我假设您想过滤您的键：一张地图只包含以 开头的键`1_`，另一张以开头`10_`，等等。

使用纯 Java，您可以通过使用 a`Map<String, Map<String, String>>`并迭代原始地图来做到这一点：

```
Map<String, Map<String, String>> filtered = new HashMap<String, Map<String, String>>();
for (Entry<String, String> sourceEntry : source.entrySet()) {
  String keyPart = sourceEntry.getKey().split("_")[0];
  Map<String, String> filteredTarget = filtered.get(keyPart);
  if (filteredTarget == null) {
    filteredTarget = new HashMap<String, String>();
    filtered.put(keyPart, filteredTarget);
  }
  filteredTarget.put(sourceEntry.getKey(), sourceEntry.getValue());
}

Map<String, String> oneMap = filtered.get("1");
assert oneMap.get("1_19").equals("30/04/2012");
assert filtered.get("10").get("10_37").equals("27/04/2012"); 
```

请注意，源地图或过滤地图中的后续更改不会更新其他地图。如果您想拥有类似的东西，*[Guava](http://code.google.com/p/guava-libraries/)*可以提供帮助：

```
Map<String, Map<String, String>> filtered = Maps.newHashMap();
for (Entry<String, String> sourceEntry : source.entrySet()) {
  final String keyPart = sourceEntry.getKey().split("_")[0];
  Map<String, String> filteredTarget = filtered.get(keyPart);
  if (filteredTarget == null) {
    filteredTarget = Maps.filterKeys(source, new Predicate<String>() {

      @Override
      public boolean apply(String input) {
        return input.startsWith(keyPart + "_");
      }

    });
    filtered.put(keyPart, filteredTarget);
  }
}

Map<String, String> oneMap = filtered.get("1");
assert oneMap.get("1_19").equals("30/04/2012");
assert filtered.get("10").get("10_37").equals("27/04/2012");

oneMap.put("1_50", "Test");
assert source.get("1_50").equals("Test"); 
```

# javascript - 希望将浏览器推送/双向通信引入我的 JSF 应用程序

> ID：10715210
> 
> 赞同：-1
> 
> 时间：2012-05-23T07:20:20.400
> 
> 标签：javascript, jsf-2, websocket, tomcat6, long-polling

我正在研究将推送技术引入我的 JSF Web 应用程序的方法。我目前正在使用 JavaScript 轮询来满足这一需求，这对于一个严肃的 Web 应用程序来说成本太高了。

我已经阅读了一些可能的选项，但我不想将我的答案限制在这些选项上，因为我不确定它们有多好，所以我不会命名它们。

我在 Tomcat 6、JSF 2.0 之上运行并在客户端使用 jQuery。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:30:31.873

[PrimeFaces`<p:push>`](http://www.primefaces.org/showcase/push/index.jsf)使用 websocket。这只需要 Jetty 在不同端口上运行在 Tomcat 旁边，因为 Jetty 本身支持 websockets（Tomcat 6 不支持，只有 Tomcat 8 或更新版本支持）。有关详细说明，请参阅[用户指南](http://www.primefaces.org/documentation.html)的第 6 章。另一种选择是[ICEfaces Ajax Push](http://www.icesoft.org/projects/ICEfaces/ajax-push.jsf)。

# iphone - 无法在 xcode 中生成 iOS App 存档

> ID：10715211
> 
> 赞同：178
> 
> 时间：2012-05-23T07:20:25.473
> 
> 标签：iphone, ios, xcode, macos

我从应用程序生成 iOS 应用程序存档时遇到问题。该应用程序编译得很好，甚至可以在模拟器中运行。现在我想做一些临时测试并且无法生成 iOS App Archive。当我单击 Product -> Archive 时，它​​会生成一个通用的 xcode 存档。谁能帮我。我应该提一下，我已经生成了这个应用程序的 iOS App Archive。由于某种原因，它刚刚停止生成 iOS 存档。非常感谢。

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-11-29T07:15:57.193

检查构建设置：

1.  跳过安装对于主要项目目标是否
2.  对于框架（子项目）目标，跳过安装是 YES
3.  在子项目的 Build Phases 中，Copy Headers 需要在 Project 中，而不是 Public *（如果构建静态库则不适用）*
4.  Deployment 下的安装目录有效（例如 /Applications）

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-05-23T20:41:57.380

如果您添加了框架/库，则可能会发生这种情况......您需要编辑该库的目标->构建设置并将“跳过安装”设置设置为“是”。当您重新归档时，XCode 应该再次开始生成“iOS App Archive”而不是“通用 xcode 归档”。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2012-05-29T02:31:58.853

除了**Skip Install**到**Yes**之外，如果您在应用程序项目中打开了另一个 lib/framwork 项目，您必须将标头（如果有）从*公共*移动到**Build Phase** / **Copy Headers**中的*项目*。

 ****![lib/framework 目标的构建阶段](../Images/83062571e5808b2550984138a8dfd8b8.png)

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2013-02-27T19:01:18.427

我做了以下工作以使其适合我：

1.  我有一个 three20 静态库，我使用[cocoapods](http://cocoapods.org/?q=three20)将文件包含在主项目中
2.  遵循所有其他子项目/静态库的跳过安装，并将复制标头从公共切换到项目，如上所述
3.  **最重要的是：**在您的项目使用的每个库中，转到**构建阶段 -> 复制文件**并确保**目标**从更改`Absolute path`为`products directory`. 注意：请参阅下面的提示以缩小搜索范围以找到导致此错误的库。

就是这样！

**提示：**要了解导致存档创建存档文件而不是 ipa 的违规文件，请执行以下操作：

1.  选择存档并单击分发按钮。
2.  选择“保存已构建产品”选项。
3.  点击下一步并保存。
4.  在 Finder 中浏览创建的目录。
5.  “libraries”子目录将标识您需要将 Skip Install 设置为 Yes 的库。
6.  在某些情况下，`usr/local/include`将识别您需要从 Public 移动到 Project 的罪魁祸首头文件，或者您必须从绝对路径更改为产品目录的文件（甚至是您忘记将跳过安装设置为 yes 标志的文件）。但该目录（即 usr/local/include）因您的子库目录结构而异。在许多情况下.. 您将在此处列出上述步骤 3 中的“**复制文件”下列出的****所有**文件。如果您在这里找到它们，那么您对问题的原因有一个明确的答案。

 *** * *

**更新提示：**让生活更简单..上面*提示*中第 4 步下出现的任何文件.. 只需在 xcode 的全局搜索中搜索它.. 你应该立即得到你想要的结果.. 例如，这是我的文件夹的内容（按照上面提示中的步骤）：

![在此处输入图像描述](../Images/16f7d07649b49ce63b611d8a1bc5374a.png)

所以我可以说它与*加密*和*ssl*库有关.. 搜索它们：

![在此处输入图像描述](../Images/dea309f60ccab9faa6a9e5086e3a59df.png)

让我意识到我忘记将跳过安装设置为是。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-09-19T00:34:15.010

如果您导出存档，请打开它并`/urs/local/include`在*产品*中查看尝试[此建议](https://github.com/CocoaPods/CocoaPods/issues/4119#issuecomment-137169818)：

> 在每个 pod 下`Packaging`，`Private Headers Folder Path`和`Public Headers Folder Path`设置为`/usr/local/include`。如果我清除它们，那么我会得到一个有效的存档。

[![在此处输入图像描述](../Images/8bff03eae911ea57909220251c71ce65.png)](https://i.stack.imgur.com/Zhx84.png)

在将我的 React Native 应用程序升级到`0.11.0`Xcode`7`和 CocoaPods后为我工作`0.39.0.beta.4`。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-09-16T15:03:08.133

如果您使用 CocoaPods 以及 WatchKit 或 Today Extension，那么 CocoaPods 存储库中有一个未[解决](https://github.com/CocoaPods/CocoaPods/issues/4021)的问题，解释了您的问题可能是什么。

我的**解决方案**是`Copy Pod Resources`从`Build Phases`. 一旦我这样做了，项目就会按预期编译和存档。

希望这对某人有所帮助，这让我难过了一整天！

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-07-27T05:07:44.127

如果上述任何答案都不起作用，则您的问题可能与`cocoaPods`. 最新的更新`0.38.1`让我搞砸了，但后来我降级了`0.37.1`，事情又恢复了正常。使用`Xcode 6.3.1`

**稍后编辑：**更新到`0.38.2`也将解决此问题。有关导致此问题的原因的更多信息：[Cocoapods 0.38.1 failed to create valid Archive](https://github.com/CocoaPods/CocoaPods/issues/3889)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-12-17T12:20:09.157

虽然我使用的是 Xcode5 并且为我排序的是编辑构建方案 - 尝试所有适用的上述建议对我的情况没有帮助。

我有两个目标，比如“App”和“App FREE”。当我尝试存档免费版本时，我的通用存档问题发生了，我在应用程序的“正常”版本之后添加了该版本。在我的例子中，当我在工具栏中选择它的方案并选择编辑方案时......我看到构建部分有两个目标，即 App 和 App FREE。

我取消选中 App 的所有列，只选中 App FREE 的列，然后单击 OK。下次我选择产品 > 存档时，我的应用程序是免费的，而不是通用存档。:)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-11-19T15:37:03.643

如果您只有一个项目，也许这个解决方案会很有用。当我复制目标时，出现了这个问题。结果，我有两个并行构建的目标。这导致了这个问题。通用 IOS 存档已构建。

要关闭并行构建，请访问

*   管理方案，
*   编辑方案，
*   建造，
*   移除另一个目标。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-10-01T14:57:18.327

更新到 iOS 9 和 Xcode 7 后我遇到了这个问题。Josh H 的解决方案对我有用：

> 在每个 pod 中，在 Packaging 下，Private Headers 文件夹路径和 Public Headers 文件夹路径设置为 /usr/local/include。如果我清除它们，那么我会得到一个有效的存档。

我还为我的 Podfile 制作了一个安装后脚本来自动执行此操作！

```
 post_install do |installer_representation|
        installer_representation.pods_project.targets.each do |target|
            target.build_configurations.each do |config|
                config.build_settings['PUBLIC_HEADERS_FOLDER_PATH'] = [""];
                config.build_settings['PRIVATE_HEADERS_FOLDER_PATH'] = [""];
            end
        end
    end 
```

只需将其添加到 Podfile 的底部并运行`pod install`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-05-30T00:02:04.667

我有这个问题。就我而言，这是由于将 Mac 应用程序目标保留为 iOS 应用程序的依赖项所致。

如此设置的原因是 Mac 应用程序是一个用于为 iOS 应用程序生成一些数据的工具，然后将其包含在捆绑包中。

在构建 iOS 应用程序本身之前，我必须删除该依赖项并单独构建该工具。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2015-06-18T17:12:35.843

在我的场景中，只有在我开始在我主要的 Objective-C 项目中包含 Swift 代码之后，我才得到错误的“通用存档”。在对 Xcode 吐出的存档文件进行大量故障排除和检查后，我注意到该`SwiftSupport`文件夹​​（包含 Swift 运行时所需的 dylib）在我的存档中与香草全新的 Swift 项目应用程序存档中的位置不同.

我找到了`Installation Directory`构建设置，并注意到它在我的项目中设置为自定义路径。我只是删除了它（将其设置为它的通用值`/Applications`），下一个 Build -> Archive 我确实按预期工作，并给了我一个适当的 iOS App Archive。

**TL; DR：**确保您的`Installation Directory`构建设置设置为`/Applications`在您的应用程序中包含 Swift 代码时的默认值，特别是如果您从可能有一些意外遗留构建设置的旧项目文件开始。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-10-29T07:18:12.253

我的工作区中有多个项目（GTL、Pods 和我的主项目），这对我有用：

选择项目，那里将有 2 种类型，**项目**和**目标**。

**对于不是您主要喜欢的项目`GTL`或`PODS`：**

***项目：***

```
Skip Install = NO
Installation Directory = /Applications
// For pods
Private Headers Folder Path = ""
Public Headers Folder Path = "" 
```

***目标：***

```
Skip Install = YES
Installation Directory = /Applications
// For pods
Private Headers Folder Path = ""
Public Headers Folder Path = "" 
```

**对于主项目（通常与您的产品名称相同）：**

***项目：***

```
Skip Install = NO
Installation Directory = /Applications 
```

***目标：***

```
Skip Install = NO
Installation Directory = /Applications 
```

***检查每个项目和目标上的 ios 部署目标，以确保它们都相同。***

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-09-25T11:35:14.453

把它留在这里是为了从同样的旅程中拯救其他人。

我发现我也需要从我的工作区中的静态库目标中删除相同的 Copy Pod Resources 构建阶段。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-01-29T13:33:25.157

除了 Alex L 的回答。

点 3\. 将 'Build Settings' -> 'Public Header Folder Path' 更改为 'include/xxx' 也可以。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-09-12T22:27:03.553

如果以上都没有帮助你......经过很多时间......

**我删除了 Bundle Version 的 Info.plist 中的值，**因为我对 Bundle Version Short 1.0 很满意。**坏的。不要这样做。**

*注意我实际上是通过在右侧的 UI 中编辑它来做到这一点的，没有意识到它会在 Info.plist 文件中放置一个空键。我认为这使它无效。我的捆绑包在存档时显示为其他项目并且没有图标，我无法上传到任何地方。

这归结为 Info.plist 中的无效值。如果它不是有效的存档，请尝试解压缩旧存档并放入/覆盖您当前的存档，并查看它是否在重建存档时修复它。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-06-12T12:13:17.537

1.  转到构建设置并添加

    **yourAppName/Resources/dist.plist**到**代码签名权利**

2.  按**cmd + B**并选择**iOS 设备**或**真实设备**作为构建目标

3.  完成后 -> 滚动到“产品”文件夹并右键单击 yourAppName.app

4.  选择“在 Finder 中显示”

5.  **使用 Name Payload**（**大写“P”**）创建一个文件夹

6.  **将**yourAppName 复制到您的有效负载文件夹中

7.  **从您的有效负载文件夹**创建一个 zip****

***   **将zip**重命名为****yourAppName.ipa****** 

 ******完毕**

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-10-28T15:27:32.070

在尝试了几乎所有事情之后：

*   清理，存档
*   删除 DerivedData，存档
*   重新启动 Xcode（我使用的是 XCode7），存档
*   以上组合...

然后我注意到我的引导分区“可用磁盘空间不足”......大约 1GB 左右。我重新启动，然后获得了大约 18GB 的​​空闲空间。

然后打开 Xcode 和项目，执行存档......令人惊讶的是（在尝试构建存档一个小时后）我终于得到了一个非通用存档。

不知道是空闲磁盘问题修复了它还是重新启动了修复它的 macOS，但它对我有用。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-11-28T14:34:28.697

如果您在 Project>Targets>Build Phases>target dependencies 中有任何 .xcodeproj 文件，请将其从那里删除，然后构建您的 ipa。这个对我有用。干杯

你可以在这里得到答案：[xcode is created generic xcode archive instead of iOS App Archive](https://stackoverflow.com/q/20369290/1733922)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-01-21T09:47:17.307

就我而言，我不得不将 FMDB 和 BlocksKit 都移到静态库中。以前，它们是作为子项目构建的。请记住，您可以使用 lipo 创建通用库。在构建最终产品时，模拟器代码将被自动剥离。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-06-23T11:14:34.407

为了彻底，我发布了我的解决方案。

我在尝试在 Xcode 5.1.1 (5B1008) 中构建 iOS 项目的存档时遇到了完全相同的问题。上述建议都没有解决问题，而且大多数都无关紧要（我没有添加任何框架，并且在我的构建阶段的复制标题部分中没有任何公共条目）。

在我的情况下，解决问题包括简单地关闭我的项目，删除我之前制作的所有存档，转到 Preferences > Accounts，删除我的开发者帐户，退出 Xcode，重新启动，重新添加我的开发者帐户，启动存档过程再次。这立即解决了我的问题。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-03-01T17:28:20.597

另一个可能的原因是在“目标依赖项”中引用了不同平台的项目。在我的特殊情况下，我正在开发一个共享 OSX 和 iOS 代码的项目。在其中一个 iOS 目标中，我不小心添加了一个 OSX 目标作为依赖项。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-11-13T17:18:40.430

因为那是因为我在工作区工作。该项目确实已存档，但不会显示在管理器窗口中。我关闭了工作区并自行打开了项目。存档已在组织者中打开...希望对您有所帮助。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-11-05T18:35:52.820

**我通过仅在 XCode 中打开应用程序项目**解决了这个错误，即。**不打开**包含应用程序和其他项目/库/框架的工作区。

有 2 个单独的项目、一个框架或共享库和一个 iOS 应用程序，我必须打开 2 个不同的 XCode 窗口，每个窗口都通过直接打开*.xcodeproj*文件而不是常见的*.xcworkspace*来打开，以便预先构建每个。

*作为一个很好的副作用，在我执行Clean*之后，XCode 不再重建每个项目的每个目标，从而缩短了构建时间。

*背景：*我正在创建一个开源 SDK 和一个演示 iOS 应用程序。我都在一个工作区中打开过。*在 SDK 目标上将Skip install*设置为*YES*会阻止任何人创建存档，因为它会是空的，所以这不是一个选项。使用*Project*而不是*Public*头文件会导致存档丢失应该分发的头文件，因此这也不是一个选项。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-07-24T23:16:51.510

这在（Xcode 5）中对我有用的方式我有 2 个目标，当我编辑方案时，在方案编辑器的左窗格中，您将看到 [BUILD, RUN, TEST, PROFILE XXX.APP, ANALYZE, ARCHIVE ] 从 BUILD 窗格中，您将看到列表中列出的项目目标。在最右端，您将看到 ARCHIVE 选项，确保只选择一个目标进行归档。

我在我的项目中选择了 2 个目标，我只检查了产品中我想要的目标，它成功了！

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-06-25T04:33:17.967

另一种解决方案，因为以上所有对我都不起作用......

将`User Header Search Paths`（我想`Header Search Paths`也可以优雅地工作）更改为`"$(BUILT_PRODUCTS_DIR)/BlocksKit"`.

**背景**：

在 BlockKit 中，开发人员在主项目中对标头的结构与部署结构不同。因此，您不能引用项目中的标头，而必须引用复制到构建目录中的标头。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-11-18T00:20:09.563

就我而言，我有一个自定义脚本将一些临时文件复制到：

```
${TARGET_BUILD_DIR}/myTempDir 
```

这意味着，在调查存档以检查其内容后，我在 .app 文件旁边发现了一个 myTempDir 文件夹。一旦我修改了脚本以保存其他地方，事情就被排序了。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-06-06T14:31:26.963

尝试在 Framework projet 的 Public Headers 文件夹路径中设置 $(PROJECT_NAME)Headers。您必须去构建库目标的设置，然后将公共标题文件夹路径编辑为 $(PROJECT_NAME)Headers。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-03-03T19:41:54.403

这些解决方案都不适合我。就我而言， Targets->myApp->Signing & Capabilities->Signing Certificate 是**Apple Development 而不是 iOS Distribution**。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2016-08-10T06:49:13.407

在我的情况下，从目标名称中删除下划线修复了它。

不确定是实际的下划线还是名称更改本身起到了作用。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2016-11-29T16:13:02.513

我遇到了类似的问题，但在没有 pod 的 WatchKit 应用程序中。对于 iOS 应用程序，跳过安装已正确设置为 NO，但对于 WatchKit 应用程序，则错误地设置为 NO。

将 WatchKit 应用程序的 Skip Install 更改为 YES（但对于 iOS 应用程序保持它为 NO）解决了问题，并且 Xcode 正确生成了 iOS App Archive 而不是 Generic Xcode Archive。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2017-09-15T06:13:50.930

就我而言，我在复制文件中有一些文件。我刚刚删除了它们，然后一切正常，我实现了 iOS App Archive。转到 Build Phases->Copy Files 并删除文件。希望这能解决您的问题。:)

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-07-31T11:12:41.167

它发生在我使用未定义变量 $(APP_PRODUCT_VERSION) 定义版本的应用程序上

我定义了版本，我可以生成一个 iOS 应用程序。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2018-12-06T10:34:55.700

这适用于像我这样的可怜人，这些解决方案都不起作用，即使是新的单一视图应用程序，构建时也没有任何错误但无法存档。

转到存档位置路径（在 Xcode -> 首选项 -> 位置 -> 存档路径中可用）并删除有问题的日子的文件夹！

该死的苹果！

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2016-06-07T21:50:42.543

在将 OS X 命令行工具添加到我的 iOS 应用程序项目后，我遇到了这个问题，并且默认情况下，命令行工具的目标将跳过安装设置为 NO。由于您显然无法将 OS X 二进制文件安装到 iOS 设备，因此存档默认为通用 Xcode 存档。将此目标的“跳过安装”设置为“是”解决了该问题。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2015-10-13T05:04:40.280

如果将**Xcode 7**与**cocoapods v.0.38.2 一起**使用。尝试`copy pod resources`从今天的扩展目标中删除。

[![在此处输入图像描述](../Images/c6e7072ebed554d4fec9e54a86c6f658.png)](https://i.stack.imgur.com/9Tz98.png)

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2017-01-23T22:30:56.503

就我而言，其他 30 多个答案都不起作用。我们将存档的位置（首选项 -> 位置）设置为指向我们服务器的自定义路径（如果有任何区别，则为 Windows Server 2008）。

一旦我将位置设置回本地机器中的默认位置，它就会生成一个常规的 iOS 应用程序存档。我不确定为什么会这样，但我希望它对其他人也有帮助。

现在我们存储必须手动将 .xcarchive 文件移动到服务器进行存储，但至少通用存档没有问题。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2017-02-15T19:39:16.140

就我而言，我有两个目标（Target1 和 Target2），其中第一个可以归档到“iOS 应用程序”，但第二个只能归档到“其他项目”。因此，对我来说，解决此问题的更快方法是通过以下步骤将 Target2 替换为 Target1 的副本：
1\. 将 Target2 重命名为 Target2_old
2\. 复制 Target1 并将其重命名为 Target2。
3\. 将链接更改为新 Target2 的正确 .plist 文件（来自旧目标），并在您的类中检查“目标成员资格”。
4\. 打开“管理方案...”并删除 Target2_old 的方案，然后为新的 Target2 添加新方案
5\. 选择这个新方案，然后选择产品 -> 存档

* * *

## 回答 #39

> 赞同：-2
> 
> 时间：2012-05-29T12:47:31.087

这不是正确的解决方案，但是，我能够生成 App 存档。我删除了整个项目并重新结帐（我知道，真的很愚蠢，但是经过几个小时的 xcode 拒绝生成应用程序存档后，我会做任何事情）。一旦我设置了正确的代码签名，它就起作用了。所以很可能，xcode 在配置中有一些不匹配。如果有人知道，什么（可能的配置）实际上可以阻止 xcode 生成应用程序存档，我会很高兴听到它。无论如何，谢谢你们。

* * *

## 回答 #40

> 赞同：-10
> 
> 时间：2012-05-23T07:30:23.363

创建存档后，在 Xcode 的管理器中，选择您的存档项目文件并选择`Distribute`.

这会打开另一个窗口，让您可以`Save for Enterprise or Ad-Hoc Deployment`.

这是您想要的选项，在选择“下一步”后，您可以选择要使用的分发配置文件，然后是您希望将 .ipa 保存到的位置。

确保选择`Save for Enterprise or Ad-Hoc Deployment`选项而不是**选项**`Export as Xcode Archive`：

![在此处输入图像描述](../Images/82b99194d1a6e9398e6591a9d701a1a1.png)**********

# less - 在导入时带有绝对路径的lessc

> ID：10715214
> 
> 赞同：5
> 
> 时间：2012-05-23T07:20:41.123
> 
> 标签：less

我正在使用`lessc`更少的编译。但是，我无法导入绝对 LESS 文件，lessc 总是说找不到导入的文件。

例如，

A.少

```
@import /home/laptop/inc/inc.less 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:34:23.833

在我的测试中，绝对路径不起作用。解决方案当然是使它们成为相对路径。因此，当我的主目录中有一个较少的文件时（/Users/Gidgidonihah）

```
/Volumes/remove/less/mixins.less 
```

变成

```
../../Volumes/remove/less/mixins.less 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-24T13:06:51.563

您需要在文件名周围加上引号，并以分号结尾。Less 对语法非常严格。

```
@import "/home/laptop/inc/inc.less"; 
```

# android - 无法使用 android 手机读取 Mifare ultralight

> ID：10715216
> 
> 赞同：0
> 
> 时间：2012-05-23T07:20:50.060
> 
> 标签：android, nfc

我正在使用 USB NFC 阅读器 ACR122U 成功地**在带有静态存储器的 TAG 2 类型 mifare ultralight（48 字节）上写入以下数据**

下面是从第 4 个块写入 TAG 的数据，块大小为 4 个字节

**03 20 d1 01 1c 54 02 65 6e 53 6f 6d 65 20 72 61 6e 64 6f 6d 20 65 6e 67 6c 69 73 68 20 74 65 78 74 2e FE 00**

当我尝试使用启用了 NFC 的 Android 手机（带有 Platform 2.3.7 的 Lava XOLO Model X900）读取数据时，它没有检测到 TAG。

请帮忙！！！

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-12T10:41:56.840

您的手机 NFC 与您使用的 TAG 可能存在兼容性问题，
请在此处查看详细信息。[http://www.andytags.com/nfc-tags-compatibility-issues.html#.UjF9BX-2_2U](http://www.andytags.com/nfc-tags-compatibility-issues.html#.UjF9BX-2_2U)

这是那里提供的大量信息：
恩智浦一直是 NFC 硬件的领先制造商之一，几乎所有 Android 手机在某种程度上都使用了恩智浦硬件。建立 NFC 论坛的目的是为 NFC 创建协议，以便任何硬件和任何符合该协议的微芯片（NFC 标签）都可以兼容。NXP 专门创建 Mifare Classic 1K 芯片是为了与其硬件兼容，而不一定要遵守协议。虽然这些芯片与市场上大多数配备 NFC 的手机和平板电脑的 NXP 硬件兼容，但这些芯片不一定与使用其他制造商硬件的任何手机兼容。在 Nexus 4 和 10、Galaxy S4 以及更新的 2013 Nexus 7 上，使用了不同制造商的 NFC 硬件 (Broadcom)。因此，只有符合 NFC 论坛协议的芯片才能完全兼容，这意味着 Mifare Classic 芯片不兼容。Broadcom NFC 硬件可以读取 Mifare Classic 芯片的唯一信息是 UID#（有点像 NFC 标签的 UPC 代码）。它根本无法写入它们，也无法读取已写入它们的任何其他内容。

# typo3 - Typo3 4.6 更新后后端语言不变

> ID：10715217
> 
> 赞同：0
> 
> 时间：2012-05-23T07:20:51.980
> 
> 标签：typo3, backend

我刚刚将typo3 从4.3.3 升级到4.6.8。

以前，admin 中的语言更改有效，但现在，即使是新创建的用户，它也不起作用。

知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T14:11:59.000

转到“扩展管理器”->“语言包”。在左侧选择您需要的语言，然后单击“从存储库更新”按钮。在 TYPO3 4.6 中，语言处理已经改变，所以我认为你需要更新语言文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:24:30.380

也许这可以帮助你？[http://bugs.typo3.org/view.php?id=11300](http://bugs.typo3.org/view.php?id=11300)

*转到`User tools`> `User settings`>`Admin functions`并从选择框中选择所需的用户`"Simulate backend user"`。然后在用户加载后，只需`"Language"`从`"Language & Personal data"`选项卡中选择适当的。保存它，你就可以开始了。*

*或者尝试删除并重新加载翻译。*

# java - 如何从Java中的另一个类中获取数组

> ID：10715225
> 
> 赞同：0
> 
> 时间：2012-05-23T07:21:27.723
> 
> 标签：java, arrays

我在 First.java 中有一个数组，假设 Second.java 收集数据并放入 First.java 中的数组中。den 我需要从数组中读取 Third.java 以查看已输入的 wad Second.java。

如果我使用“First test = new First();” 我会再次得到一个空白数组......那么我如何从 Third.java 中读取以查看 Second.java 在 First.java 的数组中放入了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:29:00.387

使用[单例设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)，请参阅[java 示例](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)，了解包含 Array 的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:28:17.150

要么制作数组`static`（根据@Jigar 的建议——尽管由于单元测试和并发问题不建议这样做），或者最好传递`First`to的正确实例`Third`。例如

```
class First {
  public Object[] array = ...;
}

class Second {
  public fillArrayAndPassItToThird(Third third) {
    First first = new First();
    // fill in the array...
    // then pass it to Third
    third.processArrayFromFirst(first);
  }
}

class Third {
  public void processArrayFromFirst(First first) {
    // process First.array
  }
} 
```

或者，您可能更喜欢仅传递数组本身而不是完整`First`对象，以减少依赖关系：

```
 third.processArrayFromFirst(first.array);

    ...

  public void processArray(Object[] array) { 
```

# qt - eucKR 和 UTF-8 编码的区别？

> ID：10715227
> 
> 赞同：1
> 
> 时间：2012-05-23T07:21:31.023
> 
> 标签：qt, unix

QT 中的 eucKR 和 UTF-8 编码有什么区别？我想显示韩语使用哪一种？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:32:21.220

从文档：

> Qt 使用 Unicode 来存储、绘制和操作字符串。

由此我了解到 Qt '谈论' Unicode - 所有其他字符集都在 Qt 的文本编解码器系统的帮助下转换为 Unicode。我相信相同的底层系统用于标准文本小部件以及框架的其他部分，例如 QtWebKit。

转换系统在 中直接暴露给用户，它[为 EUC-KR](http://qt-project.org/doc/qt-4.8/codec-euckr.html)[`QTextCodec`](http://qt-project.org/doc/qt-4.8/qtextcodec.html)提供（除其他外）编解码器。

因此，将 EUC-KR 转换为 Unicode 应该很简单：

```
QByteArray encodedString = "...";
QTextCodec *codec = QTextCodec::codecForName("EUC-KR");
QString string = codec->toUnicode(encodedString); 
```

# c++ - C++ 快速排序段错误

> ID：10715233
> 
> 赞同：0
> 
> 时间：2012-05-23T07:22:23.447
> 
> 标签：c++, algorithm, segmentation-fault, quicksort

我正在尝试修改快速排序算法，并实现一个随机数的枢轴，从而试图避免 O(n^2) 问题。我想使用一个随机数，但我的代码给出了分段错误。

```
int random (int num) {
    int random = rand() % (num - 1);
    return random;
}

int* partition (int* first, int* last);
void quickSort(int* first, int* last) {
    if (last - first <= 1) return;

    int* pivot = partition(first, last);
    quickSort(first, pivot);
    quickSort(pivot + 1, last);
}

int* partition (int* first, int* last) {   
    int* pos = (first + random(last - first));
    int pivot = *pos;
    int* i = first;
    int* j = last - 1;

    for (;;) {
        while (*i < pivot && i < last) i++;
        while (*j >= pivot && j > first) j--;
        if (i >= j) break;
        swap (*i, *j);
    }
    swap (pos, i);
    return i;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T07:25:41.537

您的`random()`函数生成范围*之外*的值，而不是范围*内*的值：

```
int random (int num) {
    int random = rand();
    while (random > 1 && random < num - 1) {
        random = rand();
    }
    return random;
} 
```

`partition()`当它试图取消引用越界元素时，这将导致段错误。

我的建议是重写`random()`，并完全避免循环（如果范围很小，循环可能会*非常昂贵）。*

# jsf - RowEdit 事件生成新视图（Primefaces 3.2、JSF、Datatable 单元内编辑）

> ID：10715236
> 
> 赞同：0
> 
> 时间：2012-05-23T07:22:38.690
> 
> 标签：jsf, view, datatable, primefaces, editing

嗨！

我有以下问题。

正如我在标题中所写，我有一个具有单元内编辑行为的数据表！

现在，如果我为 rowEdit 事件添加一个 ajax 组件，我总是会看到这个丑陋的视图，如果我刷新站点，它就会消失。

另外：当 rowEdit 事件发生时，我还实现了一个对话框。但这没关系。因为我也试过没有对话框。

这是带有 dataTable 部分的 html 代码：

```
<p:dataTable var="dataRow"
                first="#{wirkungsgradeEditBean.firstRowIndex}"
                value="#{wirkungsgradeEditBean.wirkgradList}" editable="true"
                id="ea" paginator="true"
                rows="#{wirkungsgradeEditBean.rowsPerPage}"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="15,25,35">
                <p:column headerText="#{msg.table_wirkungsgrade_wirk_reihe}">
                <p:column headerText="#{msg.table_wirkungsgrade_wirk3}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{dataRow.wirk3}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{dataRow.wirk3}" required="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="#{msg.table_wirkungsgrade_wirk4}">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{dataRow.wirk4}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{dataRow.wirk4}" required="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="#{msg.column_head_edit}">
                    <p:rowEditor />
                    <p:commandButton icon="ui-icon-close"
                        styleClass="rainstar-button-small-edit"
                        action="#{wirkungsgradeEditBean.btn_deleteEntryClick()}"
                        update=":form">
                        <f:setPropertyActionListener value="#{dataRow}"
                            target="#{wirkungsgradeEditBean.selectedWirkgrad}" />
                    </p:commandButton>
                </p:column>
                <p:ajax event="rowEdit"
                    listener="#{wirkungsgradeEditBean.btn_editEntryClick}"
                    update=":form"  />
            </p:dataTable> 
```

这是我的意思的图片。

![在此处输入图像描述](../Images/729c5ff0e8bf3ef3a57c456d206758f8.png)

![在此处输入图像描述](../Images/86192673f0b303723370b59f43f2b430.png)

谢谢你！

更新（Ajax 请求返回）

标题

```
 HTTP/1.1 200 OK
       Server: Apache-Coyote/1.1
       X-Powered-By: JSF/2.0
       Cache-Control: no-cache
       Set-Cookie: csfcfc=7Xfn_10Xfn
       Content-Type: text/xml;charset=UTF-8
       Content-Length: 6781
       Date: Thu, 24 May 2012 07:04:43 GMT 
```

XML

```
<partial-response>
   <changes>
     <update id="form"> &lt;form id="form" name="form" method="post"                   action="/rainstar2-webapp/wirkungsgradeEdit.xhtml" enctype="application/x-www-form-urlencoded"&gt; &lt;input type="hidden" name="form" value="form" /&gt; &lt;div id="panelView" class="ui-panel ui-widget ui-widget-content ui-corner-all"&gt;&lt;div id="panelView_content" class="ui-panel-content ui-widget-content"&gt;&lt;tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt56" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;1&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt58" name="ea:0:j_idt58" type="text" value="1" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt58_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt58',{id:'ea:0:j_idt58'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt60" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;65Ti&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt62" name="ea:0:j_idt62" type="text" value="65Ti" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt62_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt62',{id:'ea:0:j_idt62'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt64" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;0.195286&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt66" name="ea:0:j_idt66" type="text" value="0.195286" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt66_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt66',{id:'ea:0:j_idt66'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt68" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;-2.95382&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt70" name="ea:0:j_idt70" type="text" value="-2.95382" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt70_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt70',{id:'ea:0:j_idt70'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt72" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;16.3314&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt74" name="ea:0:j_idt74" type="text" value="16.3314" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt74_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt74',{id:'ea:0:j_idt74'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell" class="ui-editable-column"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt76" class="ui-cell-editor"&gt;&lt;span class="ui-cell-editor-output"&gt;1.50794&lt;/span&gt;&lt;span class="ui-cell-editor-input"&gt;&lt;input id="ea:0:j_idt78" name="ea:0:j_idt78" type="text" value="1.50794" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /&gt;&lt;script id="ea:0:j_idt78_s" type="text/javascript"&gt;PrimeFaces.cw('InputText','widget_ea_0_j_idt78',{id:'ea:0:j_idt78'});&lt;/script&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td role="gridcell"&gt;&lt;div class="ui-dt-c"&gt;&lt;span id="ea:0:j_idt80" class="ui-row-editor"&gt;&lt;span class="ui-icon ui-icon-pencil"&gt;&lt;/span&gt;&lt;span class="ui-icon ui-icon-check" style="display:none"&gt;&lt;/span&gt;&lt;span class="ui-icon ui-icon-close" style="display:none"&gt;&lt;/span&gt;&lt;/span&gt;&lt;button id="ea:0:j_idt81" name="ea:0:j_idt81" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only rainstar-button-small-edit" onclick="PrimeFaces.ab({formId:'form',source:'ea:0:j_idt81',process:'@all',update:'form'});return false;" type="submit"&gt;&lt;span class="ui-button-icon-left ui-icon ui-icon-close"&gt;&lt;/span&gt;&lt;span class="ui-button-text"&gt;ui-button&lt;/span&gt;&lt;/button&gt;&lt;script id="ea:0:j_idt81_s" type="text/javascript"&gt;PrimeFaces.cw('CommandButton','widget_ea_0_j_idt81',{id:'ea:0:j_idt81'});&lt;/script&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/div&gt;&lt;/div&gt;&lt;script id="panelView_s" type="text/javascript"&gt;PrimeFaces.cw('Panel','widget_panelView',{id:'panelView'});&lt;/script&gt; &lt;div class="button-footer"&gt;&lt;button id="j_idt83" name="j_idt83" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left button-header" onclick="PrimeFaces.ab({formId:'form',source:'j_idt83',process:'@all',update:'form'});return false;" type="submit"&gt;&lt;span class="ui-button-icon-left ui-icon ui-icon-plus"&gt;&lt;/span&gt;&lt;span class="ui-button-text"&gt;Neuer Eintrag&lt;/span&gt;&lt;/button&gt;&lt;script id="j_idt83_s" type="text/javascript"&gt;PrimeFaces.cw('CommandButton','widget_j_idt83',{id:'j_idt83'});&lt;/script&gt; &lt;/div&gt;&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt; &lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;&lt;body&gt;&lt;div id="passwdDialog" class="ui-dialog ui-widget ui-widget-content ui-overlay-hidden ui-corner-all ui-shadow"&gt;&lt;div class="ui-dialog-titlebar ui-widget-header ui-helper-clearfix ui-corner-top"&gt;&lt;span class="ui-dialog-title"&gt;???header_password_input???&lt;/span&gt;&lt;/div&gt;&lt;div class="ui-dialog-content ui-widget-content"&gt;???verwaltung_password_eingabe_text???&lt;button id="j_idt89" name="j_idt89" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="PrimeFaces.ab({formId:'form',source:'j_idt89',process:'@all',update:'passwdDialog',oncomplete:function(xhr, status, args){window.location.reload(true);;}});return false;" type="submit"&gt;&lt;span class="ui-button-text"&gt;ok&lt;/span&gt;&lt;/button&gt;&lt;script id="j_idt89_s" type="text/javascript"&gt;PrimeFaces.cw('CommandButton','widget_j_idt89',{id:'j_idt89'});&lt;/script&gt;&lt;button id="j_idt90" name="j_idt90" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="PrimeFaces.ab({formId:'form',source:'j_idt90',process:'@all',update:'passwdDialog'});return false;" type="submit"&gt;&lt;span class="ui-button-text"&gt;abbrechen&lt;/span&gt;&lt;/button&gt;&lt;script id="j_idt90_s" type="text/javascript"&gt;PrimeFaces.cw('CommandButton','widget_j_idt90',{id:'j_idt90'});&lt;/script&gt;&lt;/div&gt;&lt;/div&gt;&lt;script id="passwdDialog_s" type="text/javascript"&gt;$(function() {PrimeFaces.cw('Dialog','widget_passwdDialog',{id:'passwdDialog',draggable:false,resizable:false,modal:true});});&lt;/script&gt;&lt;/body&gt; &lt;/html&gt; &lt;/form&gt;</update>
     <update id="javax.faces.ViewState">3885032117216220483:-4426574710948878891</update>
      </changes>
       </partial-response> 
```

亲切的问候马蒂亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T03:53:13.230

改变你`update=":form"`的`update=":form:ea"``p:ajax`

# c# - 格式异常未处理 输入字符串的格式不正确

> ID：10715238
> 
> 赞同：2
> 
> 时间：2012-05-23T07:22:42.707
> 
> 标签：c#

![例外](../Images/4708df9c3bd936b1e58c955bfb154e39.png)

我在那条线上遇到了一个例外。我的编码是正确的，但仍然出现错误。谁能帮我重写该特定行的代码。我正在使用该行来查看从数据库到文本框的值。getprogress 是来自 web 服务的方法名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:32:34.360

的值`menuitemno.Text`类似于 32.64（有小数），因此无法使用 convert.toint 将小数转换为整数。

用于`Convert.ToInt64(Convert.ToDouble(menuitemno.Text))`转换。

要进行此折扣舍入，您可以执行以下操作：

```
Convert.ToInt64(Math.Floor(Convert.ToDouble(menuitemno.Text))); 
```

如果你需要四舍五入，你可以`Math.Floor`用`Math.Round`.

```
Convert.ToInt64(Math.Round(Convert.ToDouble(menuitemno.Text))); 
```

如果值为`menuitemno.Text`空或具有无效字符，则错误也可能出现。

如果您现在允许在`menuitemno.Text`then 中使用小数位`Int64.TryParse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:28:30.707

使用[int.TryParse()](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

```
int result;
if(int.TryParse( menuitemno.Text, out result))
   progress = web.getprogress(result);
else
   //You have incorrect integer in menuitemno.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T12:00:41.537

使用 RadTextBox 时无需解析任何整数值

```
Hashtable newval = new Hashtable();
int Age = Convert.ToInt32(newval["Age"].ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:27:52.457

似乎 menuitemno 不是可以转换为整数的有效字符串。只需检查 menuitemno.Text 的值，我怀疑它没有整数值。右键单击“menuitemno.Text”并选择快速观看；它将显示价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:28:17.683

文本框的值，*很可能*是i`null`或`empty`，要修复此问题，假设这些值在可接受的范围内，您可以执行以下操作：

```
int i =0; 
int.TryParse(menuitemno.Text, out i);
progress = i; 
```

像这样的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T07:36:59.633

menuitemno 是文本框吗？如果它只接受数字，您应该使用 numericupdown。这样您就不必转换为数字，并且可以很容易地应用限制，例如不允许小数位。

# java - 使用 bigdecimal 在 mysql 中存储百分比值

> ID：10715240
> 
> 赞同：0
> 
> 时间：2012-05-23T07:22:47.077
> 
> 标签：java, mysql, bigdecimal

如何使用 BigDecimal 在 MySQL 中存储百分比值？

我使用以下代码来执行此操作：

```
chngePer=new BigDecimal(st.nextToken().trim().replace("%", "")).divide(BigDecimal.valueOf(100)); 
```

但它给了我numberFormatException。

我正在使用 CSV 文件并将其每个值存储在 stringTokenizer st 中。它的值之一是 -0.45%。我如何将它存储在数据库中？

```
StringTokenizer st=new StringTokenizer(nextLine, ",");
chngePer=new BigDecimal(st.nextToken().trim().replace("%", "")).divide(BigDecimal.valueOf(100)); 
```

**编辑：令牌的内容**

*   “塔塔咨询”
*   654914
*   5
*   +2.2999
*   “+0.19%”
*   “2012 年 5 月 23 日”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:39:36.970

也许您需要删除引号。

# javascript - 当用户在警报框上单击“确定”时运行另一个 javascript

> ID：10715244
> 
> 赞同：9
> 
> 时间：2012-05-23T07:23:08.423
> 
> 标签：javascript, jquery, function, alert

基本上，我有一个脚本，它每 10 秒检查一次数据库，并通过 javascript 警报框通知用户数据是否已更改。但是当用户看到警报并单击“确定”时，我还需要更改数据库。那么，当用户在 javascript 警报上单击“确定”时，是否可以运行 javascript 函数？

所以例如

```
<html>
<head>
<script type="text/javascript">
function show_alert()
{
alert("New data!");
}
</script>
</head>
<body>

<input type="button" onclick="show_alert()" value="Show alert box" />

</body>
</html> 
```

当用户单击确定时，它应该运行此功能

```
 function UpdateDB()
  {
      jQuery.ajax({
       type: "POST",
       url: "update.php",
       data: 'condition=ok',
       cache: false,

     });
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T07:25:47.847

该`alert`函数会暂停代码的执行，直到它被解除。这意味着您希望在单击警报后运行的任何代码都可以简单地放在调用该`alert`方法之后。

```
alert("New data!");
UpdateDB(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T07:25:42.830

你真正要找的是`confirm()`. 我不认为您可以对警报的确定按下采取行动（实际上您不想这样做，因为它不会让用户改变主意！）...

所以...

```
if (confirm("Do you REALLY want this?")){
   //your AJAX CALL HERE
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-23T07:25:15.600

```
function show_alert()
{
    alert("New data!");
    UpdateDB();
} 
```

# windows-phone-7 - Longlistselector Wp7 binding a list inside a list of objects

> ID：10715245
> 
> 赞同：0
> 
> 时间：2012-05-23T07:23:15.380
> 
> 标签：windows-phone-7, silverlight-toolkit

Hello i am having some issues with data binding in silverlight for wp7\. Basically i have trouble binding a list that is inside another list of objects. Here is the example of my classes.

```
public class Movie
    {

        public Movie()
        {
            _Venues = new ObservableCollection<Venue>();
        }

        private String _Title;

        public String Title
        {
            get { return _Title; }
            set { _Title = value; }
        }
        private String _Director;

        public String Director
        {
            get { return _Director; }
            set { _Director = value; }
        }
        private String _Runtime;

        public String Runtime
        {
            get { return _Runtime; }
            set { _Runtime = value; }
        }

        private ObservableCollection<Venue> _Venues;

        public ObservableCollection<Venue> Venues
        {
            get { return _Venues; }
            set { _Venues = value; }
        }

public class Venue
    {
        private String _Date;

        public String Date
        {
            get { return _Date; }
            set { _Date = value; }
        }
        private String _Time;

        public String Time
        {
            get { return _Time; }
            set { _Time = value; }
        }
    }
} 
```

My intention is to set a values from Venues in xaml:

```
 <!-- The template for movie items -->
        <DataTemplate x:Key="moviesItemTemplate">
            <StackPanel Grid.Column="1"  VerticalAlignment="Top">
                <StackPanel Grid.Column="1"  VerticalAlignment="Top" Orientation="Horizontal">
                    <Image delay:LowProfileImageLoader.UriSource="{Binding ImageThumb}"/>
                    <TextBlock Text="{Binding Title}" FontSize="26"  Margin="12,-12,12,6" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </StackPanel>
                <ListBox ItemsSource="{Binding Venues}">
                    <TextBlock Text="{Binding Date}" Foreground="Orange"  />
                </ListBox>
            </StackPanel>
        </DataTemplate>

 <!--ContentPanel contains details text. Place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <toolkit:LongListSelector x:Name="moviesListGropus" Background="Transparent" 
                 ItemTemplate="{StaticResource moviesItemTemplate}"
                 GroupHeaderTemplate="{StaticResource groupHeaderTemplate}"
                 GroupItemTemplate="{StaticResource groupItemTemplate}" >   
                <toolkit:LongListSelector.GroupItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel/>
                    </ItemsPanelTemplate>
                </toolkit:LongListSelector.GroupItemsPanel>
            </toolkit:LongListSelector>
        </Grid>
    </Grid> 
```

In cs code I used a manual loop to get movieGroups instead of a Linq expression but i think that should not be the problem here:

```
ObservableCollection<Group<Movie>> movieGroups = new ObservableCollection<Group<Movie>>();
this.moviesListGropus.ItemsSource = movieGroups;

public class Group<T> : IEnumerable<T>
        {
            public Group(string name, IEnumerable<T> items)
            {
                this.Title = name;
                this.Items = new List<T>(items);
            }

            public override bool Equals(object obj)
            {
                Group<T> that = obj as Group<T>;

                return (that != null) && (this.Title.Equals(that.Title));
            }

            public string Title
            {
                get;
                set;
            }

            public IList<T> Items
            {
                get;
                set;
            }

            #region IEnumerable<T> Members

            public IEnumerator<T> GetEnumerator()
            {
                return this.Items.GetEnumerator();
            }

            #endregion

            #region IEnumerable Members

            System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
            {
                return this.Items.GetEnumerator();
            }

            #endregion
        } 
```

Sadly i cannot provide an Image due to stackoverflows restrictions but the result can be seen on [http://postimage.org/image/as49vtqvn/](http://postimage.org/image/as49vtqvn/)

EDIT 2nd part: The idea is to put another textBlock inside the template which would be responsible for showing the desired Time from the list of Venues. For that i need to go 1 level deeper because venues is a list and i want a specific object from that list. Any suggestions?

```
 <DataTemplate x:Key="moviesItemTemplate">
            <StackPanel Grid.Column="1"  VerticalAlignment="Top">
                <StackPanel Grid.Column="1"  VerticalAlignment="Top" Orientation="Horizontal">
                    <Image delay:LowProfileImageLoader.UriSource="{Binding ImageThumb}"/>
                    <TextBlock Text="{Binding Title}" FontSize="26"  Margin="12,-12,12,6" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </StackPanel>
                <ItemsControl x:Name="venueTime" ItemsSource="{Binding Path= Venue}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Time}" Foreground="Orange" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:24:10.717

The problem is this:

```
<ListBox ItemsSource="{Binding Venues}">
    <TextBlock Text="{Binding Date}" Foreground="Orange"  />
</ListBox> 
```

I suspect what you probably want is:

```
<ListBox ItemsSource="{Binding Venues}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Date}" Foreground="Orange" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

The `TextBlock` you had aribtrarily inside the `ListBox` was being ignored because it wasn't valid at that point.
You need to specify how the items in the listbox should be templated if you don't want the default behaviour. The default behaviour just being a TextBlock with the text of the datacontext. Because you'd passed an object (not text) the framework was calling `ToString()` on it and by default this returns the object's Type and that is what you were seeing.

# java - 限制自定义基类型的接口大小，以便实现自定义类型遵循它

> ID：10715247
> 
> 赞同：1
> 
> 时间：2012-05-23T07:23:28.430
> 
> 标签：java

我想定义一组自定义数据类型，例如。CountryCode、RegionCode、CategoryCode、XYZTypeCode 等（类似于 ISO 标准 CCTS 类型代码）。我想限制所有代码值的最大大小为 6。所以我定义了一个接口，例如。

```
public interface CodeInterface{
    public interface Value{
  public char[] value= new char[6];
  public char[] listID = new char[8];
  public String listName = null;
  } 
 public List<Value> getCodeValues(); 
}
   ...
    public class Country implements CodeInterface{ 
        public List<CodeInterface.Value> getCodeValues() { 
            List<CodeInterface.Value> codeValues = new ArrayList<CodeInterface.Value>();
            CodeInterface.Value singleCodeValue = null;
            //Logic to get data from postgres DB....
            //Assign the code value
            singleCodeValue.content = (char[])resultSet.getString("CODE").toCharArray();
        }
    } 
```

但是分配有语法错误，无法分配“Final CodeInterface.Value.Content”。请提出更好和可扩展的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:27:40.990

老实说，我认为这不是解决问题的好方法。

如果我是你，我会选择一个例外：

```
if (listName.length() > 6)
    throw new IllegalArgumentException("CCTS too long."); 
```

这些字符串很可能是硬编码的（这样的字符串数量有限，而且它们在不久的将来可能不会改变），因此任何错误都很可能出现在代码中并在早期测试中发现。

# iphone - UIScrollView 中的圆形滚动按钮

> ID：10715248
> 
> 赞同：0
> 
> 时间：2012-05-23T07:23:33.080
> 
> 标签：iphone, uiscrollview

我在滚动视图中有一些按钮，我希望它们自动滚动并且以计数方式滚动，即当第一个按钮离开屏幕时，它应该附加到滚动视图的最后一个

简而言之，我想创建滑块类型的效果，其中每个按钮都有图像并且它以循环方式连续移动。

任何人都可以帮助一些代码。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:25:29.227

使用 iCarousel ，太棒了

[https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

iCarousel 是一个类，旨在简化 iPhone、iPad 和 Mac OS 上各种类型的轮播（分页、滚动视图）的实现。iCarousel 实现了许多常见的效果，例如圆柱形、扁平和“CoverFlow”风格的轮播，并提供挂钩来实现您自己的定制效果。与许多其他“CoverFlow”库不同，iCarousel 可以处理任何类型的视图，而不仅仅是图像，因此它非常适合在您的应用程序中以流畅且令人印象深刻的方式呈现分页数据。它还可以通过最少的代码更改在不同的轮播效果之间轻松切换。

自动滚动：

```
- (void) autoScrollAdvertise
{

    iCarousel *ADPlace = viewAdvertise;

    NSInteger count = [ADPlace numberOfItems];

    if ( count > 0 )
    {
        int selected = [ADPlace currentItemIndex];

        [ADPlace scrollToItemAtIndex:((selected+1)%count) animated:YES];
    }

    [self performSelector:@selector(autoScrollAdvertise) withObject:nil afterDelay:ScrollDuration];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T15:46:23.290

你可以试试这个项目

[DMCircularScrollView](https://github.com/malcommac/DMCircularScrollView)

# iphone - MPMovieplayerController 在后台时不播放下一个 URL

> ID：10715250
> 
> 赞同：2
> 
> 时间：2012-05-23T07:23:39.790
> 
> 标签：iphone, ios5, background, mpmovieplayercontroller, nsnotifications

我正在开发一个 iOS 应用程序，我在其中使用 MPMoviePlayerController 流式传输 .mp3 文件。当一个文件的播放完成后，我会获取下一个 url 并播放该文件。一切在前台都很好，但是当我将应用程序移到后台时，当前歌曲播放良好，但是当它完成时，播放下一首歌曲的方法不会被执行。

我在stackoverflow上检查了类似的问题，但解决方案似乎对我不起作用。

任何指向正确方向的指针都会非常有帮助。

提前致谢！

**编辑**：在不同设备上测试应用程序时，我发现该功能在 iOS 5.1 上有效，但在 iOS 4.3 上无效。因此，我创建了一个示例应用程序，该应用程序在完成前一个文件时播放本地文件，并且该应用程序即使在后台也能在所有版本的 iOS 中正确完成其工作。它现在对我来说变得更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:37:14.657

我无法使用 MPMoviePlayerController 做到这一点。

最后使用[了 AudioStreamer](https://github.com/mattgallagher/AudioStreamer/)。

我的应用程序现在运行良好。

谢谢马特！

# django - 在 Django 模板中显示时间戳

> ID：10715253
> 
> 赞同：21
> 
> 时间：2012-05-23T07:23:49.670
> 
> 标签：django, templates, date, timestamp

我需要在 django 模板中显示帖子的时间戳。时间戳如下：

```
"timestamp":1337453263939 in milli seconds 
```

我可以将时间戳转换为日期时间对象并将其呈现在视图中。有没有直接通过模板显示的方式？输出应该是：

```
print(datetime.datetime.fromtimestamp(1337453263.939))
2012-05-20 00:17:43.939000 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-09-17T09:59:43.773

```
{% now "U" %} 
```

这`"U"`是 Unix 纪元的日期格式，也可以与内置[`date`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#date)过滤器一起使用。因此，如果您在变量中有日期：

```
{{ value|date:"U" }} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-23T08:07:25.230

您可以使用自定义模板过滤器（请参阅[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)）。在你的情况下，它可能是这样的：

1.  在具有视图的应用程序中创建目录“templatetags”，以呈现模板。
2.  将代码放入此目录空白文件“__init__.py”和“timetags.py”：

    ```
    from django import template
    import datetime
    register = template.Library()

    def print_timestamp(timestamp):
        try:
            #assume, that timestamp is given in seconds with decimal point
            ts = float(timestamp)
        except ValueError:
            return None
        return datetime.datetime.fromtimestamp(ts)

    register.filter(print_timestamp) 
    ```

3.  在您的模板中，添加

    ```
    {% load timetags %} 
    ```

4.  在模板中使用以下语法：

    ```
    {{ timestamp|print_timestamp }} 
    ```

    在您的示例中，时间戳 = 1337453263.939

这将以本地日期和时间格式打印时间戳。如果要自定义输出，可以通过以下方式修改 print_timestamp：

```
import time
def print_timestamp(timestamp):
    ...
    #specify format here
    return time.strftime("%Y-%m-%d %H:%M:%S", time.gmtime(ts)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:40:02.153

也许您可以使用日期过滤器： [https ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:41:54.450

我不认为日期过滤器需要时间戳，所以除非我正在监督过滤器，否则您可以简单地创建一个？

```
# python
from datetime import datetime

# django
from django import template

register = template.Library()

@register.filter("timestamp")
def timestamp(value):
    try:
        return datetime.fromtimestamp(value)
    except AttributeError, e:
        catch errors.. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:45:20.140

只需编写一个自定义过滤器，将您的时间戳字符串转换为日期时间对象。然后，您可以将其进一步处理为可读的内容（表示您的时间的字符串）并将其返回到您的模板，或者只返回一个 python 日期时间对象并使用 django 的日期过滤器。

所以你可以有这样的东西 {{ timestamp_string|convert_to_datetime|date:'D d M Y' }}

有关此主题的更多信息，请访问：[https ://docs.djangoproject.com/en/dev/howto/custom-template-tags/](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

# eclipse - Eclipse 文件列表按字母顺序排列，独立于文件夹结构

> ID：10715255
> 
> 赞同：0
> 
> 时间：2012-05-23T07:23:52.697
> 
> 标签：eclipse, file, search, navigator

我正在寻找一种在 Eclipse Project Explorer/Navigator 中快速查找文件的方法，而无需知道我需要在哪个子文件夹中查找它。

最好的方法是让 Project Explorer 以字母顺序显示活动项目中的所有源代码文件。

替代项目资源管理器/导航器顶部的“过滤文本”框也可以使用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:40:56.497

尝试`Ctrl+Shift+R`（查找资源）。`*`在 Eclipse 3.7 中，如果您在模式前面加上(ie `*/test/logback.xml`won't find `project/src/logback.xml`) ，您甚至可以包含部分路径。

对于类型，使用`Ctrl+Shift+T`

# javascript - 使用计算javascript动态添加表格行

> ID：10715256
> 
> 赞同：0
> 
> 时间：2012-05-23T07:23:53.867
> 
> 标签：javascript

我的 HTML 看起来像这样

```
<table>
    <tr>
        <td>Input 1</td>
        <td>Input 2</td>
        <td>Total</td>
        <td>&nbsp;</td>
        </tr>
            <tr>
        <td><input></td>
        <td><input></td>
        <td><input disabled></td>
        <td><button value="add">Add</button></td>
        </tr>
        <tr>
        <td>&nbsp;</td>
        <td>Grand Total</td>
        <td><input disabled ></td>
        <td>&nbsp;</td>
        </tr>
    </table> 
```

我正在尝试在两个输入之间进行计算，然后可以使用 javascrtpt 添加新行...请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:35:12.437

您可以通过两种方式为您的表格提供 id，访问您的表格对象，然后通过 table.innerhtnl+= 您的新行标签添加新行。或者也以这种方式

```
function addRow(tableID) {
        inp1 = document.getElementByID(input1).value;
        inp2 = document.getElementByID(input2).value;
        if(your Logic to check inputs)
        {
        var table = document.getElementById(tableID);

        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        cell3.appendChild(element2);
        }
    } 
```

演示访问[这里](http://viralpatel.net/blogs/2009/03/dynamically-add-remove-rows-in-html-table-using-javascript.html)

# c++ - MagickCore 或 ImageMagick 的等效代码是什么？

> ID：10715257
> 
> 赞同：-2
> 
> 时间：2012-05-23T07:23:56.950
> 
> 标签：c++, imagemagick

MagickCore 或 ImageMagick 使用此命令的等效代码是什么？

```
cjpeg -progressive -dct float -qtables qtopt.Q.psnr.$PSNR.000 $FILE.srgb.pnm > $FILE-$PSNR.ipnet.jpg; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:46:37.803

我没有使用 -progressive 并且不知道您在代码中使用的大多数选项，但这应该可以满足您的需求。您可能需要在最终代码中更改 -interlace 的位置。见[http://www.imagemagick.org/script/command-line-options.php#interlace](http://www.imagemagick.org/script/command-line-options.php#interlace)

```
convert input -interlace line output 
```

如果您查看上面链接的页面的其余部分，就会有大量关于量子的信息。

# android - 通过代码获取Android用户定义的设备名称

> ID：10715261
> 
> 赞同：5
> 
> 时间：2012-05-23T07:24:19.340
> 
> 标签：android, device

我想获取用户定义的我的 android 手机设备/手机名称。我已经知道 android.os.Build.MODEL 会返回我设备的确切型号，但我想获得手机用户或所有者的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T15:49:31.133

问题是并非所有 Android 设备都有这样的自定义名称，因此没有直接的方法让它可靠。

我所经历的（至少对于三星而言）是用户定义的名称也用于 WifiP2pDevice 名称：http: [//developer.android.com/reference/android/net/wifi/p2p/WifiP2pDevice.html](http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pDevice.html)

一些制造商还将它用作默认蓝牙名称或主机名，无论如何您可以通过在 adb shell 中使用 dumpsys 来检查手机使用的属性

`dumpsys | grep 'My new phone'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T08:34:26.227

```
String userDeviceName = Settings.Global.getString(getContentResolver(), Settings.Global.DEVICE_NAME);
if(userDeviceName == null)
    userDeviceName = Settings.Secure.getString(getContentResolver(), "bluetooth_name"); 
```

[https://stackoverflow.com/a/66651458/4531734](https://stackoverflow.com/a/66651458/4531734)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-16T03:53:10.897

```
Settings.Global.getString(getContentResolver(), "device_name"); 
```

# iphone - 当前设备的 UIInterfaceOrientation 不工作

> ID：10715266
> 
> 赞同：0
> 
> 时间：2012-05-23T07:24:30.920
> 
> 标签：iphone, ios, orientation

我想知道我设备的当前方向。

```
if([[UIDevice currentDevice] orientation] == UIInterfaceOrientationPortrait)
    {

    } 
```

但这不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:35:35.917

您应该像这样启用设备方向的通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications] 
```

然后可以查询当前方向

**编辑 ：**

来自文档：“此属性的值始终返回 0，除非已通过调用启用了方向通知`beginGeneratingDeviceOrientationNotifications`”（其中 0 是`UIDeviceOrientationUnknown`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:04:09.957

我得到了它，

```
if (UIDeviceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation )) {

} 
```

这工作完美。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:38:46.023

这

```
[[UIDevice currentDevice] orientation] 
```

将返回其中之一

```
UIDeviceOrientationPortrait
UIDeviceOrientationPortraitUpsideDown
UIDeviceOrientationLandscapeLeft
UIDeviceOrientationLandscapeRight 
```

常数。如果您只想检查它是“垂直”还是“水平”，无论是上下颠倒还是左右，只需检查：

`if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]) {...}`

如果要检测方向变化，请覆盖

```
-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {} 
```

或者

```
-(void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {...} 
```

方法。

这对你有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T10:08:06.320

接受的答案中提到的解决方案对我有用。

虽然我的 stmt 1 没有按照以下逻辑执行

```
myOrientation = [[UIApplication sharedApplication] statusBarOrientation];
if(myOrientation == UIInterfaceOrientationPortrait) ||
    (myOrientation == UIInterfaceOrientationPortraitUpsideDown)
{
    // stmt 1;
} 
```

这个对我有用

```
if (UIDeviceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation )) 
{
    // stmt 1;
} 
```

# objective-c - Xcode“po”命令

> ID：10715269
> 
> 赞同：1
> 
> 时间：2012-05-23T07:24:38.467
> 
> 标签：objective-c, nslog, po

调试时，我需要检查私有[NSString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)成员的值，例如名为 str 的值。后：

```
 self.str = xxxxxxx; 
```

我在控制台中输入了“po self.str”，但只得到了“（NSString *）$ 37 = 0x00000000”
所以我尝试了：

```
 NSLog("%@", self.str); 
```

…然后我看到了字符串值。

## 为什么我不能使用命令“po”检查 var 的值？

现在我知道这是因为我使用[lldb](https://en.wikipedia.org/wiki/LLDB_%28debugger%29)作为调试器，而不是[gdb](https://en.wikipedia.org/wiki/GNU_Debugger)。所以“po”（[打印对象](http://support.apple.com/kb/ta45906)）命令只能显示指针的地址。在使用 lldb 时是否有任何关于打印对象描述的解决方案？

**更新：**我发现`self`自己不可用。我猜这个问题与类实例有关，它是一个静态变量。是因为`po`找不到指针的原因`self`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:46:32.907

您需要像没有点符号的方法一样调用它

```
po [self str] 
```

或者，如果您知道支持变量名称，则可以直接打印它

```
po _str 
```

# jquery - 在继续过程之前让我的 div 消失

> ID：10715271
> 
> 赞同：2
> 
> 时间：2012-05-23T07:24:45.300
> 
> 标签：jquery, jquery-animate

我有以下 jQuery 脚本：

```
function fctSaveSuccess(data) {
    fctHideLoadingDlg();
    alert('continue...');
    ...
}

function fctHideLoadingDlg(disableBtn) {
    $("#loading").fadeTo(5000, 0.5, function () {
        $("#loading").dialog('destroy').remove();
    });
} 
```

我想要实现的是让我的加载 div（一种等待的弹出窗口）慢慢消失。但它不起作用，因为当调用 fctHideLoadingDlg 时，即使我设置了 5000 的淡入淡出，它也会继续执行下面的代码......

知道如何防止这种情况吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:43:17.743

这是很正常的。的执行`fctSaveSuccess`不会被阻塞，因为`fctHideLoadingDlg`调用后会立即返回`fadeTo`。`fadeTo`传递了一个回调，该回调将在完成时运行，但不会阻塞。

您可以在代码中采用相同的回调路由。函数是 Javascript 中的对象，因此它们也可以很容易地作为参数传递：

```
function fctSaveSuccess(data) { 
    var afterHide = function () {
        alert('continue...'); 
        /* rest of your code */
    };
    fctHideLoadingDlg(afterHide); 
} 

function fctHideLoadingDlg(callback, disableBtn) { 
    $("#loading").fadeOut(5000, function () { 
        callback();
        $("#loading").dialog('destroy').remove(); 
    }); 
} 
```

[jsFiddle 演示](http://jsfiddle.net/uDNtY/3/)

# ajax - 无法在 JSF 2 应用程序上捕获 ajax 错误

> ID：10715274
> 
> 赞同：3
> 
> 时间：2012-05-23T07:24:59.950
> 
> 标签：ajax, jsf-2, primefaces

我碰巧不明白为什么如果发生异常我无法在 ap:ajaxStatus 上收到警报

我基本上在 facelet 页面中有这段代码

```
<p:ajaxStatus onerror="alert('Error occurred!')" />

<p:commandLink  title="Delete" process="@this" 
    actionListener="#{myBean.deleteData}">
    <h:outputText value="Delete" />                 
</p:commandLink> 
```

在我的 bean 上，我提出了一个异常来测试 ajax 状态

```
public void deleteData(ActionEvent event) {
    throw new CustomException("Testing");
} 
```

我不确定，但不会在 ajax 请求上触发警报。

我检查了萤火虫并看到了这个 ajax 响应。

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><changes><update id="javax.faces.ViewState"><![CDATA[5240489117331224423:7642972336085906948]]></update></changes></partial-response> 
```

但是当我检查服务器日志时，我看到它已注册

```
javax.faces.event.AbortProcessingException: /pages/members.xhtml @208,128 actionListener="#{myBean.deleteData}": com.test.CustomException: Testing 
```

为什么会这样？

Primefaces 3.2/Glassfish/JSF 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:41:04.193

来自 Primefaces 3.2 文档`p:ajaxStatus`：

```
onerror: Client side callback to execute when an ajax request fails. 
```

在 Firebug 中，您会收到常规的 ajax 响应。所以请求没有失败。据我了解，失败意味着没有响应或响应无效。您看到的是预期的行为。

更新：正如 perissf 所评论的，通常的方法是在您的操作方法中生成一个 FacesMessage 并`h:messages`使用您的 ajax 请求更新一个标签。

# c# - Windows应用程序中DataGridView中的货币格式

> ID：10715276
> 
> 赞同：5
> 
> 时间：2012-05-23T07:25:12.697
> 
> 标签：c#, datagridview, formatting

我无法在 DataGridView 上显示货币格式。你们能看一下这段代码吗？

```
private void dataGridView1_DataBindingComplete(object sender,
                                   DataGridViewBindingCompleteEventArgs e)
{
    objPreview.dataGridView1.Columns["Debit"].DefaultCellStyle.Format = "c";
    objPreview.dataGridView1.Columns["Credit"].DefaultCellStyle.Format = "c";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:29:53.577

尝试添加这个

```
objPreview.dataGridView1.Columns["Debit"].ValueType = Type.GetType("System.Decimal")
objPreview.dataGridView1.Columns["Credit"].ValueType = Type.GetType("System.Decimal") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T07:29:21.940

如果它是 Windows 窗体，而不是在将数据绑定到网格之前编写此代码...在表单构造函数中如下所示...

```
public Form1()
{
   this.dataGridView1.Columns["UnitPrice"].DefaultCellStyle.Format = "c";
} 
```

如果它的 ASP.Net 尝试类似`DataFormatString="{0:c}"`

```
<asp:BoundField HeaderText="Price/Unit" 
                DataField="UnitPrice" SortExpression="UnitPrice" 
                DataFormatString="{0:c}">
                    <ItemStyle HorizontalAlign="Right"></ItemStyle> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:32:51.627

您能否检查（断点或其他东西）DataBindingComplete 事件被触发。所以至少我们知道它不是

（已编辑）所以如果它被解雇了检查这可能会有所帮助

[http://msdn.microsoft.com/en-us/library/k4sab6f9](http://msdn.microsoft.com/en-us/library/k4sab6f9)

也许通过创造一种新风格会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-09T07:58:47.637

您也可以将其用于 Windows 窗体：（或 WPF 或 ASP 的等效项，...）

```
yourColumn.DefaultCellStyle.Format = "#,#";

// And add below if you want
yourColumn.DefaultCellStyle.NullValue= "0"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T08:59:35.810

如果您已经将 DataSource 绑定到 DataGridView，则可以通过设置每个单元格格式来设置单元格样式，例如：

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
  row.Cells["Debit"].Style.Format = "c";
  row.Cells["Credit"].Style.Format = "c";  
} 
```

确保您的值是数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-05T17:27:48.933

尝试将@Pranay Rana 建议的代码添加到 DataGridView 上的**CellFormatting**事件中：

```
private void NameOfYourGridGoesHere_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    this.NameOfYourGridGoesHere.Columns["UnitPrice"].DefaultCellStyle.Format = "c";
} 
```

# profile - 如何在媒体基础中为解码器设置 wmv 规范信息

> ID：10715280
> 
> 赞同：0
> 
> 时间：2012-05-23T07:25:31.287
> 
> 标签：profile, specifications, ms-media-foundation, wmv

在一些多媒体框架中，我们在 WMV 解析器和 WMV 解码器之间发送规范信息，例如 VC1 Profile Type (AP/SP/MP) 和比特流格式 (RCV) 作为第一帧。规范信息用于初始化 WMV 解码器。

我正在使用默认的 Media Foundation WMV 源和我自己的 WMV 解码器 MFT。当我从 MFT 转储数据时，它只有视频数据，没有规格信息。所以，我认为规范信息是使用其他接口设置的。

有人可以给我一个关于这个的垃圾信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:03:12.540

如果您的意思是 VC1 序列头，请通过规范信息查看[MF_MT_USER_DATA](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693533%28v=vs.85%29.aspx)属性。当 MF Session Manager 调用`SetOutputType()`解码器 MFT 时，它`MF_MT_USER_DATA`以 blob 形式提供。以下片段可能会给您一个提示。

```
HRESULT SetOutputType(DWORD dwStreamID, IMFMediaType* pmt, DWORD dwFlags)
{
   ...

   BYTE* seqData;
   DWORD seqLength;
   HRESULT hr;

   hr = pmt->GetBlobSize(MF_MT_USER_DATA, &seqLength);
   if (SUCCEEDED(hr))
   {
      seqData = (BYTE*) malloc(seqLength);

      if (seqData != NULL)
      {
        hr = pmt->GetBlob(MF_MT_USER_DATA, seqLength, &seqLength);
      }
   }

   /* Use MF_MT_USER_DATA to do something. */

   ...
} 
```

# android - 将图像画布保存在 sd 卡中 Java Null 指针异常

> ID：10715287
> 
> 赞同：0
> 
> 时间：2012-05-23T07:25:45.030
> 
> 标签：android

我正在开发一个应用程序，我需要在其中绘制并将其保存为 sd 卡中的图像

```
 public void onClickSave()
        {

            FrameLayout v = (FrameLayout) findViewById(R.id.main_frame);
            v.setDrawingCacheEnabled(true);

            v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
            v.layout(0, 0, v.getWidth(), v.getHeight());
            v.buildDrawingCache(true);
            Bitmap bm = Bitmap.createBitmap(v.getDrawingCache());
            v.setDrawingCacheEnabled(false);
            if (bm != null) {
                try {
                    String path = Environment.getExternalStorageDirectory().toString();
                    OutputStream fOut = null;
                    File file = new File(path, "screentest.jpg");
                    fOut = new FileOutputStream(file);
                    bm.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                    fOut.flush();
                    fOut.close();                     
                }
                catch (Exception e) {
                    e.printStackTrace();
                    Toast.makeText(getContext(), e.toString(),1000).show();
                }
            } 
```

并且函数调用发生在这里

```
 Button btn_save=(Button) findViewById(R.id.button3);
        btn_save.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v) 
            {
                // TODO Auto-generated method stub

                drawView.onClickSave();

            }
        }); 
```

我在日志中得到错误：

```
05-23 12:46:25.413: W/dalvikvm(669): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-23 12:46:25.423: E/AndroidRuntime(669): FATAL EXCEPTION: main
05-23 12:46:25.423: E/AndroidRuntime(669): java.lang.NullPointerException
05-23 12:46:25.423: E/AndroidRuntime(669):  at com.page2.DrawView.onClickSave(DrawView.java:173)
05-23 12:46:25.423: E/AndroidRuntime(669):  at com.page2.Draw$3.onClick(Draw.java:60)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.view.View.performClick(View.java:2408)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.view.View$PerformClick.run(View.java:8816)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.os.Handler.handleCallback(Handler.java:587)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.os.Looper.loop(Looper.java:123)
05-23 12:46:25.423: E/AndroidRuntime(669):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-23 12:46:25.423: E/AndroidRuntime(669):  at java.lang.reflect.Method.invokeNative(Native Method)
05-23 12:46:25.423: E/AndroidRuntime(669):  at java.lang.reflect.Method.invoke(Method.java:521)
05-23 12:46:25.423: E/AndroidRuntime(669):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-23 12:46:25.423: E/AndroidRuntime(669):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-23 12:46:25.423: E/AndroidRuntime(669):  at dalvik.system.NativeStart.main(Native Method) 
```

我的xml是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@android:color/white" >
<FrameLayout
 android:id="@+id/main_frame"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@android:color/white" android:layout_weight="0.1">

<ImageView
     android:id="@+id/imageView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
      /> 

</FrameLayout>
<RelativeLayout
 android:id="@+id/relativeLayout1"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
   android:layout_weight="0.9" android:layout_gravity="bottom" android:layout_marginTop="-10dp">
 <Button
     android:id="@+id/button2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentTop="true"
     android:layout_centerHorizontal="true"
     android:text="Redo" />
 <Button
     android:id="@+id/button1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:text="Undo" />
 <Button
     android:id="@+id/button3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"
     android:layout_alignParentTop="true"
     android:text="Save" />
 </RelativeLayout>
</LinearLayout>This is my xml 
```

给我一些其他方式将画布绘制作为图像存储在 sd 卡中我的应用程序在我单击保存按钮时强制关闭请帮助我提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:01:16.503

我怀疑

```
 FrameLayout v = (FrameLayout) findViewById(R.id.main_frame); 
```

返回**空**

使用调试器或日志记录检查

当您的视图不包含 FrameLayout 它是

*   不是由您的 xml 创建的
*   或“main_frame”已在其他函数中删除

如果这段代码真的在第 173 行

```
 public void onClickSave() 
```

这比这很可疑，因为没有获得参考。这可能暗示代码和 apk 已过时。尝试重建项目（project->clean on eclipse）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:56:47.123

在使用它之前尝试构建你的绘图缓存：

```
v.buildDrawingCache(); 
```

# internationalization - 如何在 Firebug 中删除本地化

> ID：10715292
> 
> 赞同：1
> 
> 时间：2012-05-23T07:26:12.490
> 
> 标签：internationalization, firebug

上次 Firebug 更新后，所有标签都被翻译成法语，但我没有问过。我真的无法摆脱它。我现在在法国，但我所有的语言环境、所有偏好都设置为英语（英国），只有时区设置为 (UTC+01:00) 布鲁塞尔、哥本哈根、马德里、巴黎。同时我有英文版的火狐。

PS这真的让我发疯。有谁知道如何强制 Firebug 只使用英语而不翻译成任何其他语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:30:44.787

特别是对于 Firebug，将 extensions.firebug.useDefaultLocale 设置为 true 应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:33:00.213

[快速语言环境切换器](https://addons.mozilla.org/en-US/firefox/addon/quick-locale-switcher/?src=search)为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:34:06.153

现在已修复。事实上，我什么也没做。我有 10.0.3 (ESR) 版本的 FireFox。在我更新到 10.0.6 后，该错误消失了。Firebug 版本保持不变 1.9.2。

# android - 在滚动视图中使用画布绘图的问题

> ID：10715293
> 
> 赞同：1
> 
> 时间：2012-05-23T07:26:13.533
> 
> 标签：android, canvas, scrollview

我可以将 editText 添加到滚动视图和任何其他组件，但是当我尝试插入绘图画布时，什么都没有出现。我显示代码以获取更多信息

```
package prueba.android.ondraw;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.LinearLayout;

public class Prueba_ondrawActivity extends Activity {
    private static final String LOGTAG = "";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main); 
        LinearLayout layout = (LinearLayout) findViewById(R.id.layout);

        MyView v = new MyView(this);

        layout.addView(v);

    }
    private class MyView extends View{
        public MyView(Context context) {
            super(context);
        }
        protected void onDraw(Canvas canvas) {
            int j = 0;
            for(int i=0;i<10;i++){
                super.onDraw(canvas);
                Paint paint = new Paint();
                paint.setColor(Color.CYAN);
                paint.setAntiAlias(true);
                int ancho= canvas.getWidth();
                String ancho2 = "" + ancho;
                Log.e(LOGTAG,ancho2);
                canvas.drawRect(0, 0,200,200, paint);
                j= j+100;
            }
        }
    }
} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="150dp"
        android:layout_height="400dp"
        android:layout_marginLeft="100dp"
        android:background="#FFFFFF"
        > 
        <LinearLayout
            android:id="@+id/layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

我希望有人能给我一个解决方案，因为它找不到如何在滚动视图中绘制

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T07:47:00.067

您什么也看不到，因为您的自定义视图没有大小。要么使用 LayoutParams，要么直接传入像素大小。你也可以实现`onMeasure`一些更多信息在[这里](http://developer.android.com/guide/topics/ui/custom-components.html)

```
layout.addView(v,300,300); 
```

此外，您不需要在每次迭代时调用 super.onDraw 或创建新的 Paint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:35:43.793

如果您只想绘制并显示它，那么您可以在 ScrollView 中放置一个 ImageView 并像这样显示它：

```
newBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
canvas = new Canvas(newBitmap);
canvas.drawSomething();
imageView.setImageBitmap(newBitmap); 
```

希望这可以帮助 ;）

# php - 编辑 bmp txt 客户端，保存到服务器并重新加载图像？

> ID：10715295
> 
> 赞同：0
> 
> 时间：2012-05-23T07:26:35.443
> 
> 标签：php, ajax, client-side, edit, bmp

我认为这应该是可能的！

我想将 ASCII 文本从我网站上托管的位图图像中提取到客户端（作为字符串），并通过一些 javascript string.replace() 操作将其提供给它。然后我想将它发布回服务器并更新正在显示的图像。我确信这将需要 AJAX 和/或 PHP，我还是个新手。

如果您有任何关于如何实现这一目标的建议或想法，我将不胜感激。

谢谢

# arduino - Arduino GSM库电话号码位置

> ID：10715302
> 
> 赞同：2
> 
> 时间：2012-05-23T07:27:07.437
> 
> 标签：arduino, gsm

使用 Arduino GSM 库获取经过身份验证的呼叫和短信。我想存储授权电话号码的位置（一个字节）而不是电话号码（很多字节）。

但是 GetAuthorizedSms 不给我位置，只是电话号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:49:15.543

如果您查看 sms.cpp，您可以看到他们使用 gsm.ComparePhoneNumber(i, ph) 将位置 i 上的电话号码与您拥有的电话号码进行比较。

```
byte get_phonenr_position(char *ph)
{
    byte i;
    for(i = 1; i <= 20; i++)
        if (gsm.ComparePhoneNumber(i, ph))
            return i;
    return 0;
} 
```

应该可以工作，但效率不高，因为您必须通过串行接口询问模块。我`last_authorized`在`SMSGSM`(and `CallGSM`) 类中添加了一个变量：

```
sms.cpp:
                     // phone numbers are identical
                     // authorization is OK
                     // ---------------------------
+                    last_authorized = i;
                     ret_val = GETSMS_AUTH_SMS;
                     break;  // and finish authorization
                 }
sms.h:
      char GetAuthorizedSMS(byte position, char *phone_number, char *SMS_text, byte max_SMS_len,
                           byte first_authorized_pos, byte last_authorized_pos);
     char DeleteSMS(byte position);
+    // set by CallStatusWithAuth
+    byte last_authorized;
}; 
```

并从我的 SMSGSM 实例中读取该变量。（对于 CallGSM 我也做了同样的事情）。

# javascript - 删除/删除动态创建的表详细信息

> ID：10715307
> 
> 赞同：0
> 
> 时间：2012-05-23T07:27:22.240
> 
> 标签：javascript, html

我有一个带有空表的 HTML div 部分：

```
<div id="report_result" class="container">
        <table cellpadding="0" cellspacing="0" border="0" class="dataTable" id="example">
        </table>
</div> 
```

现在我根据页面中使用的参数动态创建表头和正文：

```
function runreport(datastring)
{
        var tables_header = $('<thead><tr><th>Flow State</th><th>Flow Logging Id</th><th>Co-relation Id</th></tr></thead><tbody></tbody>');
        ('#example').empty(); // added later
        tables_header.appendTo('#example');
} 
```

有一个“运行报告”按钮，单击时会调用带有用户选择选项的“运行报告”功能。

第一个时间表很好，但如果用户只是重新单击“运行报告”按钮，表格的内容就会重复等等。因此，每次单击都会添加表头。

因此，我想在创建之前删除所有表格的标题、行、页脚等：

但即使是第一次，我也会收到一个错误：

```
"#example".empty is not a function
[Break On This Error]   

('#example').empty(); 
```

但是[http://api.jquery.com/empty/](http://api.jquery.com/empty/)说明了这种方法 - 那为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:29:40.917

你忘了`$`括号前面的：

```
$('#example')... 
```

# jquery - JQuery Sortable - 从“接收”事件中禁用“更新”事件？

> ID：10715317
> 
> 赞同：2
> 
> 时间：2012-05-23T07:28:11.287
> 
> 标签：jquery, jquery-ui

我正在使用可排序的有序列表并根据以下内容对数据库进行更新：

1.  将新项目拖到列表中，调用“receive”事件进行数据库插入
2.  对列表进行排序，更新数据库中的显示顺序。

现在由于“更新”和“接收”事件都是可排序的一部分，并且每个都设置为执行 ajax 发布（异步），我无法控制这些事件的顺序。我需要在“更新”事件之前触发并完成“接收”事件。

我的想法是从接收事件中取消绑定更新事件，然后重新绑定或手动调用更新事件，但我无法让它工作。

我是 jquery 的新手，所以非常感谢任何帮助！！！

在此先感谢，乍得

```
 $("#myMovieListItems").sortable({
            receive: OnReceive,
            update: OnSortableUpdate,
            placeholder: 'ui-state-highlight',
            containment: 'document',
            revert: true
        });
function OnReceive(event, ui) {
            //Disable the update event and manually call it on success of this event
            $("#myMovieListItems").unbind("update");

            //Set ID of new list element with it's original value
            var newItem = $(this).data().sortable.currentItem;
            newItem.attr('id', $(ui.sender).attr('id'));

            //Get Data to pass to AJAX method
            droppedID = newItem.attr('id');
            droppedName = $.trim(newItem.first().contents().filter(function () {
                return this.nodeType == 3;
            }).text());

            messageContainer.html(progressMessage);
            source = "Facebook";

            $.ajax({
                type: 'POST',
                url: GetSiteRoot() + 'DesktopModules/Incite/MovieRotation/Handlers/Sortable.asmx/InsertMovie',
                data: '{strMovieName: \'' + droppedName + '\', intMovieListID: \'' + movieListID + '\', strSource: \'' + source + '\', strSourceID: \'' + droppedID + '\'}',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: OnAddMovieSuccess,
                error: OnSortableUpdateError
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:28:10.080

我只是在 sortable 上遇到了同样的问题，最终使用了来自 underscore.js 的 debounce

[http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

它可以将事件处理程序包装在计时器中，例如您可能触发了多个事件但只想调用一次处理程序。对于可排序的，我在接收和更新时触发一个自定义事件，然后有一个去抖动处理程序来监听它，并且随着时间的推移，确保它只在收到最后一个事件时被调用一次。

# php - 将 PHP 变量传递回 jQuery $.ajax 函数

> ID：10715321
> 
> 赞同：4
> 
> 时间：2012-05-23T07:28:22.287
> 
> 标签：php, jquery, ajax, variables, post

**1\. HTML**

我有一个输入要求用户输入他们的 PIN 码：

`<input type="text" name="pin" maxlength="4" id="pin" />`

**2.javascript**

当用户输入 4 个字符时，jQuery 函数会触发一个 ajax 调用来处理 PHP 文件中的 PIN 并返回相应的站点名称：

```
$("input#pin").keyup(function() {
    var PIN = $("this").val();

    if (PIN.length == 4) {

        var dataString = "PIN=" + PIN;

        $.ajax({
            type: "POST",
            url: "pins.php",
            dataType: "json",
            data: dataString,
            cache: false,
            success: function(site)
                {
                    console.log("site name is:" + site);
                }
        });
    }
}); 
```

**3.PHP**

`pins.php`包含以下代码：

```
<?php
$pin = $_POST["PIN"];

if ($pin == "faf9") {
    $site = "pgv";
}

echo $site;
?> 
```

**问题**

我似乎无法将值`$site`返回到 ajax 调用的成功函数中。`null`如果 pin 不相等，控制台日志报告为值`faf9`，如果我输入正确的 pin，则没有日志。

我似乎无法弄清楚我要去哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T07:30:38.730

将数据类型更改为：

```
dataType: 'HTML', 
```

就这些 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:30:49.667

你的 php 返回一个字符串，但你期待一个`JSON`对象。更改`$.ajax`函数内的数据类型属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:32:16.657

对于`dataType: "json"`，您必须返回 json 对象。如果没有，请用适当的喜欢`dataType: "html"`或`dataType: "text"`

`$site`此外，如果您不想要 null 返回值，则需要进行初始化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T07:36:53.860

进行如下修改：

*   替换`var PIN = $("this").val();`为`var PIN = $(this).val();`

*   ~~替换`var dataString = "PIN=" + PIN;`为`var dataString = PIN;`~~

*   替换`dataType: "json",`为`dataType: "html",`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T07:32:12.673

这个 m8 与您的确切问题无关，但我认为您应该 `$(this)` 不带引号使用

# c# - 如何在 Castle.ActiveRecord 中将 HasAndBelongsToMany 与字典一起使用

> ID：10715326
> 
> 赞同：0
> 
> 时间：2012-05-23T07:28:41.043
> 
> 标签：c#, nhibernate, activerecord

我正在尝试设置一组数据模型，如下所示：

```
[ActiveRecord, JoinedBase]
public class Locale : DataType
{
    private int m_id;
    private String m_DisplayName;
    private String m_Code;

    public Locale() 
    {
    }

    [PrimaryKey]
    public override int Id
    {
        get { return m_id; }
        set { m_id = value; }
    }

    [Property]
    public String DisplayName
    {
        get { return m_DisplayName; }
        set { m_DisplayName = value; }
    }

    [Property]
    public String Code
    {
        get { return m_Code; }
        set { m_Code = value; }
    }
}

[ActiveRecord, JoinedBase]
public class LocaleStringInstance : DataType
{
    private int m_id;
    private String m_text;

    public LocaleStringInstance() 
    {
    }

    [PrimaryKey]
    public override int Id
    {
        get { return m_id; }
        set { m_id = value; }
    }

    [Property]
    public String Text
    {
        get { return m_text; }
        set { m_text = value; }
    }
}

[ActiveRecord(Lazy=true), JoinedBase]
public class LocaleString : DataType
{
    private int m_id;
    private IDictionary<Locale, LocaleStringInstance> m_LocaleStrings;

    public LocaleString() 
    {
    }

    [PrimaryKey]
    public override int Id
    {
        get { return m_id; }
        set { m_id = value; }
    }

    [HasAndBelongsToMany(typeof(LocaleStringInstance),
        RelationType.Map, ColumnRef="LS_Col_Ref", ColumnKey = "LocaleStringInstance_id", Table = "LocaleStringMapping", 
        RelationType = RelationType.Map, Cascade = ManyRelationCascadeEnum.AllDeleteOrphan,
        Lazy = true, Index = "Locale", IndexType= "Locale")]
    virtual public IDictionary<Locale, LocaleStringInstance> LocaleStrings 
    {
        get { return m_LocaleStrings; }
        set { m_LocaleStrings = value; }
    }
} 
```

主要问题在于尝试对此处的最后一个属性“LocaleStrings”进行建模。这个想法是一个特定的 LocaleString 将为每个已定义的“语言环境”提供一个字符串。字典应该代表这一点。

不幸的是，当我尝试使用 ActiveRecord 注册这些类型时，出现以下错误： ActiveRecordException：{“无法确定类型：区域设置，用于列：NHibernate.Mapping.Column(Locale)”} System.Exception {NHibernate.MappingException}

这是因为“IndexType”设置为“Locale”。但是应该设置什么？我尝试将完整的命名空间添加到 Locale 的开头，但没有成功。我还尝试设置为字符串和 int，它们在注册期间自然会起作用，但是当我尝试实际使用该对象时失败，因为无法将 Locale 转换为字符串或整数。

有谁知道如何正确使用这个 RelationType.Map 和 IndexType ？我怎样才能获得一个可以满足我要求的模型？

谢谢

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:03:33.360

尝试使用 Locale 的程序集限定名称，即：“NameSpace.For.Locale, LocaleAssembly”

您是否尝试过不指定索引类型？ActiveRecord 应该从 IDictionary<> 的通用参数中获取类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:15:38.193

不幸的是，目前似乎无法使用 Castle.ActiveRecord 对所描述的关系进行建模，因为它不支持 NHibernate 理解它所需的所需参数。

# jsf - 我可以从会话和视图 bean 中获取信息吗？

> ID：10715329
> 
> 赞同：0
> 
> 时间：2012-05-23T07:28:54.673
> 
> 标签：jsf, primefaces

用户可以在浏览器上打开另一个选项卡并查看同一个站点。在这种情况下，他将有相同的会话，但视图不同。作为一个练习，我正在构建一个 jsf，primefaces 站点。用户首先登录，他的登录信息存储在会话 bean 中。如果他随后打开另一个选项卡，他可以查看站点的不同页面，每个选项卡查看不同的页面。我需要在视图 bean 中捕获此信息。

我的问题是，如果我在视图 bean 中，我如何从会话 bean 中获取信息？这可能是不可能的，在这种情况下，解决问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:38:24.983

我想这是可能的。您可以从更窄的 bean 访问范围更广的 bean。例如，您可以从请求范围内访问任何类型的 bean。并且应用程序范围的 bean 可以被任何其他 bean 使用。尝试注入您的会话作用域 bean 以查看作用域。喜欢这里：
[http ://www.mkyong.com/jsf2/injecting-managed-beans-in-jsf-2-0/](http://www.mkyong.com/jsf2/injecting-managed-beans-in-jsf-2-0/)

这里也几乎与您的问题重复：[JSF2 Can't reach SessionScoped bean from ViewScoped as ManagedProperty](https://stackoverflow.com/questions/8194748/jsf2-cant-reach-sessionscoped-bean-from-viewscoped-as-managedproperty)

# jsf-2 - 向 JSF 页面显示 HTML 输入流

> ID：10715332
> 
> 赞同：0
> 
> 时间：2012-05-23T07:29:00.837
> 
> 标签：jsf-2, myfaces

通过使用 XML 和 XSLT（转换），我将 HTML 代码作为流。

我想将该代码与 JSF 组件绑定。我正在使用实现 JSF 2.0 的 MyFaces 2.1.6。

请提出一种将流绑定到 JSF 组件的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:26:50.030

将其转换为`String`并显示在`<h:outputText escape="false">`.

```
<h:outputText value="#{bean.html}" escape="false" /> 
```

# aptana - APTANA：什么是 JS 断点，为什么它们在 PHP 文件类中？

> ID：10715333
> 
> 赞同：1
> 
> 时间：2012-05-23T07:29:02.393
> 
> 标签：aptana

我正在开发一个基于 Joomla 的 php 项目！我正在使用 Aptana。我正在为组件编写类，在 Aptana 的编辑器中，我注意到在类声明行的行号附近有一个小蓝点。

指向它 Aptana 告诉我以下消息

> JS 断点 [/path/to/myfile.php, line: ##]

但是在我的课堂上没有JS代码，只有php。

为什么 Aptana 告诉我这个信息？如何调整 Aptana 的设置以更好地处理此类消息？

非常感谢，阿达莫“Aerendir”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:30:24.307

我在我的 Aptana PHP 项目中注意到相同的蓝点和消息。双击行号会放置或删除这些断点。就我而言，我一定是在单击折叠按钮时意外创建了断点。

所以要回答你的问题，断点就在那里，因为你创建了一个，你可以通过双击蓝点或行号来删除它。

我希望这有助于改善您的 Aptana 体验。我已经使用 Aptana 大约 4 个月了，希望我能早点发现它。

# java - Android 应用程序因解析器异常而意外关闭

> ID：10715338
> 
> 赞同：0
> 
> 时间：2012-05-23T07:29:38.153
> 
> 标签：java, android

我的应用程序在从 gps 活动转移到浏览活动后关闭。下面是错误。

```
> com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper]
> Parser exception for C:\filepath\AndroidManifest.xml: Element type
> "activity" must be followed by either attribute specifications, ">" or
> "/>" 
```

我找到了原因，即：

> “ *...没有找到一个外部 jar。我认为这些会被添加到工作区中，而不是从它们的来源调用，例如从 \Downloads。显然不是。* “

是否有解决方案或提示来解决此问题？

清单文件是

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"

    package="coms.molaroute.mu"

    android:versionCode="1"

    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-permission android:name="android.permission.INTERNET"/>

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

    <application

        android:icon="@drawable/ic_launcher"

        android:label="@string/app_name" >
        <activity
            android:name=".AlertWebsite"

            android:label="@string/app_name" >

            <intent-filter>

                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />

            </intent-filter>

        </activity>

        <activity android:name=".PlanJourney"></activity>

    <activity android:name=".SendAlert"></activity>

        <activity android:name=".GetLocation"></activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T09:45:34.640

这是 Eclipse IDE 中的常见错误。

*   检查清单文件的语法错误
*   清理你的项目（例如 build->clean 或删除 /bin-folder）
*   转到项目/包资源管理器
*   右键单击清单文件
*   **证实！**

现在一切都应该好了。

# wpf - WPF 阻止使用所有者窗口

> ID：10715341
> 
> 赞同：0
> 
> 时间：2012-05-23T07:29:56.823
> 
> 标签：wpf, showdialog, owner, ownership

我正在使用带有 C# 的 WPF。我有一个全屏的窗口。在这个窗口上，我打开一个对话框。我的对话框只是另一个设计不同且以该所有者为中心的窗口。

在第一个对话框中，我有一个按钮可以关闭此对话框但会打开另一个对话框。我是这样实现的：

```
Window w = new FinalScreen();
w.Owner = this.Owner;
w.Topmost = true;
w.ShowDialog();
this.Close(); 
```

不管第一个对话框是用 Show 还是 ShowDialog 调用的，第二个对话框都不是 TopMost，也就是说后面显示的我的主窗口是可以点击的。

我得到的是，当此对话框以主窗口为中心打开时，用户可以单击主窗口上暴露的后按钮（对话框未覆盖）。

我怎样才能阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:11:26.803

听起来你可能会更好地使用带有 2 页的“向导”界面。
这里有一个示例：
[MSDN 上的 WPF 向导示例](http://msdn.microsoft.com/en-us/library/aa972123.aspx)

# apache - 将任何 url（无论是 https 还是 http）永久重定向到 ssl 证书适用于 apache 的特定 https url

> ID：10715343
> 
> 赞同：0
> 
> 时间：2012-05-23T07:30:05.033
> 
> 标签：apache, mod-rewrite

我正在尝试将解析到同一网络服务器的各种 url 重定向到我拥有 ssl 证书的域上。我的 apache conf 有以下重写规则：

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST}   !^(https?://(www\.)?)?my\.domain\.org [NC,OR]
RewriteCond %{HTTPS_HOST}   !^(https?://(www\.)?)?my\.domain\.org [NC]
RewriteRule ^(.*)$ https://my.domain.org$1 [R=301,L] 
```

然后跟随虚拟主机

```
 <VirtualHost *:443>
   ...
 </VirtualHost> 
```

上述规则适用于[http://example.org](http://example.org)到[https://my.domain.org](https://my.domain.org)。它们也适用于[http://my.domain.org](http://my.domain.org)到[https://my.domain.org](https://my.domain.org)。它们不适用于但不适用于[https://example.org](https://example.org)到[https://my.domain.org](https://my.domain.org)。浏览器给出与主机不匹配的证书的警告页面。有什么想法在我的情况下出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:45:01.527

可能不是重写规则 - 而是您设置的（裸机或 SNI）虚拟主机和证书对。即主机名的值硬编码到这些虚拟主机的证书中。

人们会期望将该服务器的证书颁发给 *.example.org 并具有 example.org 的主题替代名称。

您可以使用“openssl x509 -text -noout -in cert.pem”进行检查。

# redis - OSGi Redis 共享池配置

> ID：10715344
> 
> 赞同：0
> 
> 时间：2012-05-23T07:30:05.720
> 
> 标签：redis, osgi, connection-pooling

我正在使用以下配置使用 jedis 客户端连接到 redis。我想创建 OSGi 共享池服务，以便将其导出并在其他捆绑包中使用。请让我知道该怎么做。

```
<bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">
    <property name="maxActive" value="200" />
    <property name="maxIdle" value="50" />
    <property name="maxWait" value="3000" />
    <property name="testOnBorrow" value="${jedis.testOnBorrow}" />
</bean>

<bean id="jedisPool" class="redis.clients.jedis.JedisPool">
    <constructor-arg index="0" ref="jedisPoolConfig" />
    <constructor-arg index="1" value="${jedis.host}" />
    <constructor-arg index="2" value="${jedis.port}" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:32:31.937

查看 API 文档，JedisPool 不使用支持接口，因此您需要推出自己的接口来准确定义您的应用程序需要共享的操作。然后创建一个具体的基类来扩展或封装您的 JedisPool 实例并将其导出为 OSGi 服务。

根据您在上面的代码片段中使用的依赖注入 API，Spring DM 和蓝图都有简单的服务导出元素，这将简化 OSGi 服务部分的导出，因此您可以专注于接口和支持的 POJO。

# itextsharp - 如何在 itextSharp 5.2.1 dll 中使用 HeaderFooter 类

> ID：10715346
> 
> 赞同：1
> 
> 时间：2012-05-23T07:30:21.350
> 
> 标签：itextsharp

我使用了 itextSharp 4.1.2 dll。那里有 HeaderFooter 类。但是在 itextSharp 5.2.1 dll 中我没有得到 HeaderFooter 类。所以谁能告诉我如何使用 itextSharp 5.2.1 dll 使用相同的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:09:46.980

该类已在 iText(Sharp) 5 中删除，请参阅[5.0.0 更改日志](http://itextpdf.com/history/?branch=50&node=500)`HeaderFooter`的最后一项。

添加页眉和页脚是通过更实用的范例实现的：页面事件。有关如何使用页面事件的示例，请参阅此[问题和相应的答案。](https://stackoverflow.com/questions/1032614/itextsharp-creating-a-footer-page-of)

# java - 使用其源代码作为字符串创建一个 java 类

> ID：10715347
> 
> 赞同：1
> 
> 时间：2012-05-23T07:30:22.460
> 
> 标签：java, class, annotations, code-generation

假设我有这个字符串：并且我需要在另一个类中生成一个类？请任何人对此提出建议？**

```
 String sourceCode = "public class Test {   " +
        "public void myMethod(@Mandatory String s){"+
        "System.out.println( \"myMethod : \"+s);}"+

 "@SuppressWarnings(\"unused\")"+
 "private void mySecondMethod(String s2){"+
    "System.out.println(\"mySecondMethod : \"+s2);}"+ 

 "}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:34:36.803

您可以使用动态生成 java 类`Java Compiler API`

[http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:35:38.370

您可以使用[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)。

链接中有例子。

# excel - 具有 2 个值的单元格。显示 1 并隐藏另一个

> ID：10715352
> 
> 赞同：0
> 
> 时间：2012-05-23T07:30:40.667
> 
> 标签：excel

我的问题是我在 Excel 中创建了一个具有各种值的下拉菜单。现在要在其他单元格中引用这些单元格，我想将值分配给下拉列表的选定值。

例如：如果我在单元格 A1 的下拉菜单中选择“是”，则单元格 A1 的值应更改为 0，但仍显示“是”。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:09:12.717

您可以使用自定义数字格式`"NO";;"YES"`。然后它应该显示`YES`为 0 和`NO`1。

每种格式都分为几个部分：`<POSITIVE>;<NEGATIVE>;<ZERO>;<TEXT>` ，有关详细信息，请参阅[http://support.microsoft.com/kb/264372/en](http://support.microsoft.com/kb/264372/en)

# ios4 - 我可以将我的应用程序本地化为 iPhone 不支持的语言吗？

> ID：10715353
> 
> 赞同：0
> 
> 时间：2012-05-23T07:30:46.983
> 
> 标签：ios4, ios5, localization

我想在 iPhone 中开发一个支持英语和爱尔兰语的多语言应用程序。但我才知道 iPhone 设置中没有爱尔兰语。所以我想知道如何在我的应用程序中添加爱尔兰支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:44:00.550

作为开发人员，您可以让您的应用程序做任何事情，包括以您喜欢的任何方式显示文本。您将无法使用 Apple 的内置工具，这些工具依赖于系统设置来确定用户的语言并从 Localizable.strings 文件中推送文本。

但是，您可以在您的应用程序中进行设置，您可以在其中提供切换语言的功能。就您的文本而言，您将希望使用与任何本地化系统相同的基本逻辑：

1) 将所有应用内文本环绕在根据用户选择的设置显示英语或爱尔兰语的功能中 2) 将英语字符串导出到文件中 3) 在单独的文件中将英语字符串翻译成爱尔兰语

您编写的函数可以类似于[gettext](http://www.gnu.org/software/gettext/)所做的。如果设置为“爱尔兰语”，则从爱尔兰语文件中提取等效字符串。如果设置是英文，就打印英文。

尽管您将无法使用 Apple 的工具，但您可以在 Gettext 的基本逻辑上快速重新创建此功能以完成相同的事情。

如果您选择本地化为 Apple 支持的语言，请遵循此[iOS 应用本地化教程](http://www.ibabbleon.com/iphone_app_localization.html)。

# html - 拉伸背景图像设置为 hr 标签

> ID：10715362
> 
> 赞同：0
> 
> 时间：2012-05-23T07:31:20.880
> 
> 标签：html, css, background-image

我有一个网页，我有`hr`标签来分隔页面中的部分。

我正在使用 css 将图像作为背景应用于 hr 标签。

hr 标签占用 100% 的宽度，但图像不会占据整个标签。

如何强制图像占据`hr`标签占据的整个区域？

是否有任何拉伸属性可用于端到端拉伸图像？

下面是代码：

```
hr
{

    background: url("images/new/edge-top.png") no-repeat scroll 0 0 transparent;
    color: transparent;
    height: 10px;
    margin: 0 auto;
    width: auto;
    clear: both;
    border: 0 none;
    display: block;
    padding: 0px;

} 
```

在此处检查生成的图像：

![在此处输入图像描述](../Images/a8e4b2e9ef161cee3133ac144ac47d1a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:36:01.530

CSS3 对此有一些新的选择。尝试

```
background-size: x% x%; 
```

在这里您可以阅读新背景模块**[的规范](http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size)**。

但是请注意，这 在 IE 中的[支持非常差！](http://caniuse.com/#search=background-s)（有人惊讶吗？）

# java - ClassNotFoundException: javax.servlet.AsyncContext in Jetty hello world in eclipse

> ID：10715363
> 
> 赞同：8
> 
> 时间：2012-05-23T07:31:20.927
> 
> 标签：java, jetty

我已经按照链接[http://wiki.eclipse.org/Jetty/Tutorial/Jetty_HelloWorld](http://wiki.eclipse.org/Jetty/Tutorial/Jetty_HelloWorld)教程（使用 Eclipse）。并在[这里查看了现有的stackoverflow](https://stackoverflow.com/questions/9037492/classnotfoundexception-javax-servlet-asynccontext-in-jetty-hello-world)

我正在使用聚合码头 8.0.0.jar 和 8.1.3.jar 以及 servlet-api-2.5.jar。我已将这 2 个 jar 添加到类路径中，并且还包括 slf4j-simple-1.6.4.jar。

我还在

`
2012-05-23 15:23:06.813:WARN:oeji.nio: java.lang.NoClassDefFoundError: javax/servlet/AsyncContext

```
at org.eclipse.jetty.server.HttpConnection.<init>(HttpConnection.java:155)
at org.eclipse.jetty.server.AsyncHttpConnection.<init>(AsyncHttpConnection.java:19)
at org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection.<init>(SelectChannelConnector.java:309)
at org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection.<init>(SelectChannelConnector.java:303)
at org.eclipse.jetty.server.nio.SelectChannelConnector.newConnection(SelectChannelConnector.java:286)
at org.eclipse.jetty.server.nio.SelectChannelConnector$ConnectorSelectorManager.newConnection(SelectChannelConnector.java:364)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.<init>(SelectChannelEndPoint.java:71)
at org.eclipse.jetty.server.nio.SelectChannelConnector.newEndPoint(SelectChannelConnector.java:274)
at org.eclipse.jetty.server.nio.SelectChannelConnector$ConnectorSelectorManager.newEndPoint(SelectChannelConnector.java:370)
at org.eclipse.jetty.io.nio.SelectorManager$SelectSet.createEndPoint(SelectorManager.java:938)
at org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:497)
at org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:283)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
at java.lang.Thread.run(Thread.java:679)

   Caused by: 
    java.lang.ClassNotFoundException: javax.servlet.AsyncContext
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at org.eclipse.jetty.server.HttpConnection.<init>(HttpConnection.java:155)
at org.eclipse.jetty.server.AsyncHttpConnection.<init>(AsyncHttpConnection.java:19)
at org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection.<init>(SelectChannelConnector.java:309)
at org.eclipse.jetty.server.nio.SelectChannelConnector$SelectChannelHttpConnection.<init>(SelectChannelConnector.java:303)
at org.eclipse.jetty.server.nio.SelectChannelConnector.newConnection(SelectChannelConnector.java:286)
at org.eclipse.jetty.server.nio.SelectChannelConnector$ConnectorSelectorManager.newConnection(SelectChannelConnector.java:364)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.<init>(SelectChannelEndPoint.java:71)
at org.eclipse.jetty.server.nio.SelectChannelConnector.newEndPoint(SelectChannelConnector.java:274)
at org.eclipse.jetty.server.nio.SelectChannelConnector$ConnectorSelectorManager.newEndPoint(SelectChannelConnector.java:370)
at org.eclipse.jetty.io.nio.SelectorManager$SelectSet.createEndPoint(SelectorManager.java:938)
at org.eclipse.jetty.io.nio.SelectorManager$SelectSet.doSelect(SelectorManager.java:497)
at org.eclipse.jetty.io.nio.SelectorManager$1.run(SelectorManager.java:283)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:598)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:533)
at java.lang.Thread.run(Thread.java:679) 
```

`

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T07:38:34.000

我认为您需要 servlet api 3，而不是 2.5。[AsyncContext](http://docs.oracle.com/javaee/6/api/javax/servlet/AsyncContext.html)是在 Servlet 3.0 中引入的，它在 2.5 中不存在。

# jquery - jQuery 如果多个输入之一有任何值，则添加一个类

> ID：10715367
> 
> 赞同：0
> 
> 时间：2012-05-23T07:31:50.383
> 
> 标签：jquery, forms, each

如果页面上六个文本字段之一中有任何输入，则尝试将类添加到按钮。得到一个控制台错误，上面写着“ `Uncaught TypeError: Object [object Object] has no method 'value'`”，指的是我的`var val`行。

语法？谢谢你的帮助。

HTML：

```
<input id="a" class="answer" type="text">
<input id="b" class="answer" type="text"> 
```

JavaScript：

```
var val = $('.answer').each(function(){
    $(this).value();
});

if (/^\s*$/.test(val)){
    $('#theOne').addClass('show');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:33:23.267

方法是[`val`](http://api.jquery.com/val/)，不是`value`：

```
var val = $('.answer').each(function(){
    $(this).val();
}); 
```

您可能一直在考虑本机`value`属性（就效率而言，这可能更可取）：

```
var val = $('.answer').each(function(){
    this.value;
}); 
```

但是，这些都无助于看到您的`each`循环实际上并没有做任何事情。您可以使用`filter`来查看您的任何输入是否具有值：

```
var inputs = $(".answer").filter(function() {
    return this.value;
});
if(inputs.length) {
    $('#theOne').addClass('show');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:48:28.483

```
$('.answer').each(function(){
    $.trim($(this).value()).length>0? $('#theOne').addClass('show') : '';
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:36:49.487

```
if ($('.answer').filter(function(){return $(this).val() != '';}).length) {
   $('#theOne').addClass('show');
} 
```

# google-analytics - 事件跟踪谷歌分析无法正常工作

> ID：10715371
> 
> 赞同：0
> 
> 时间：2012-05-23T07:32:00.087
> 
> 标签：google-analytics, event-tracking

我添加了一个事件来跟踪我的应用程序的下载次数。这是我使用的代码：

```
<div class="downloadiphone" style="top: 319px; left: 463px;">
<a class="blocklink" title="Download for your iPhone" 
href="http://itunes.apple.com/se/app/mikz/id477146876?mt=8"  
onClick="_gaq.push(['_trackEvent', 'Iphone', 'Download', 'HomepageB2C']);” 
target="_blank">x</a>
</div> 
```

当我查看 Google 分析时，它显示**我的 60 次访问发送了事件。0 总事** ​​件 代码有问题吗？我已经在几周前安装了它，所以它肯定会正确报告事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:50:21.150

在跟踪代码收到来自 Google 服务器的有效响应之前，访问者的浏览器可能会离开您的页面。尝试在允许正常链接行为发生之前引入轻微延迟。它在旧版本的 Google Analytics 中有很好的记录，但在异步文档中却没有：

[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55527](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:14:18.077

看起来您正在使用异步事件代码，但请确保您也在使用异步跟踪代码。我们也遇到过类似的情况，在我们更新到最新的跟踪代码之前，新的事件代码无法正常工作。您的跟踪代码应如下所示：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-9705946-1']);
_gaq.push(['_trackPageview']);

(function() {var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})(); 
```

# java - java.lang.NoClassDefFoundError: org.openqa.selenium.android.AndroidWebDriver 在使用 android 的 WebDriver 中出错

> ID：10715378
> 
> 赞同：0
> 
> 时间：2012-05-23T07:32:29.583
> 
> 标签：java, android, webdriver, selenium-webdriver, junit4

我正在尝试使用 Webdriver 使用带有 JUnit 的 eclipse 在模拟器上测试网站。但我总是得到：

```
java.lang.NoClassDefFoundError: org.openqa.selenium.android.AndroidWebDriver
at my.empty.project.test.SdkDemoTest.setUp(SdkDemoTest.java:22)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:545)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1551) 
```

在我添加的 Java 构建路径引用的库中：

*   android_webdriver_library.jar
*   android_webdriver_library-srcs.jar
*   番石榴12.0.jar
*   selenium-java-2.21.0.jar
*   selenium-server-2.21.0.jar
*   selenium-server-standalone-2.0b2.jar
*   selenium-server-standalone-2.21.0.jar

代码如下。有人有这样的问题，也许可以帮助解决它？

提前致谢。

```
package my.empty.project.test;
import android.test.ActivityInstrumentationTestCase2;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.android;
import org.openqa.selenium.android.AndroidWebDriver;
import my.empty.project.MyAndroidProjectActivity;
public class SdkDemoTest extends ActivityInstrumentationTestCase2<MyAndroidProjectActivity>{
    private WebDriver driver;
public SdkDemoTest() {
    super("my.empty.project", MyAndroidProjectActivity.class);}
     @Override
          protected void setUp() throws Exception {
 driver = new AndroidWebDriver(getActivity());
        }
@Override
        protected void tearDown() {
           driver.quit();
        }
        public void testSDKdemoprep() {
            driver.get("http://sdkdemoprep.playphone.pluto.vn.ua/");
            WebElement element = driver.findElement(By.xpath("/html/body/img"));
            element.click();
            element = driver.findElement(By.xpath("/html/body/div[3]/div/div[9]/div[7]/div/div[2]/div/div[2]/div/div[2]"));
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:47:47.640

我遇到了这个问题，终于找到了解决方案。

> 1）右键单击项目>构建路径>配置构建路径>排序和导出
> 
> 2）选择并检查“android_webdriver_library.jar”
> 
> 3）将 jar 文件移动到“Android 4.X”下方和“Android Dependencies”上方（或）将其放在最高位置。
> 
> 4）单击按钮，“全选”并确定。

转到项目>清洁；现在运行测试。

这仅适用于**“java.lang.NoClassDefFoundError: org.openqa.selenium.android.AndroidWebDriver”**错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T04:03:02.200

It took me awhile, but I finally figured this out.

All though my situation is a little different than yours since you are doing:

```
super("my.empty.project", MyAndroidProjectActivity.class);} 
```

While I am doing:

```
super("simple.app", SimpleAppActivity.class); 
```

Which is one of the Default Extra projects provided with the Web Driver Installation it should still apply since you'll need to make the modification to the `my.empty.project`

What I did was I had both Projects from the Google Web Driver extra imported into Eclipse, this left me with:

1.  SimpleApp
2.  TestAnAnroidWebApp

Which had the first working just fine but not the second which is what was throwing the:

```
java.lang.NoClassDefFoundError: org.openqa.selenium.android.AndroidWebDriver
at simple.app.test.SimpleGoogleTest.setUp(SimpleGoogleTest.java:21)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1661) 
```

What I figured out was I had to add the Libraries from the TestAnAndroidWebApp Project into the SimpleApp project. Those two library entries were:

```
 1\. guava-r09.jar
 2\. android_webdriver_library.jar 
```

But, as I found with Android its not as simple as Copying and Pasting so what I did was follow this [Answer already on Stack Overflow](https://stackoverflow.com/a/3643015) on how to import the Jar files and add them to my Libraries list.

This is so that they would be considered Dalvik-converted and bundled into my simple.app (Or my.empty.project in your case) which then gets copied to the Android Emulator.

This allowed me to get past the exception.

**Note:** It probably isn't required to bundle the `guava-r09.jar` but I did so anyway during my initial attempts and haven't re-tested without it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T00:22:49.573

我最近自己遇到了这个问题。我不确定确切的解决方案是什么，但以下步骤为我解决了这个问题。确保库位于项目的子目录中。由于我使用的是 eclipse，我注意到 eclipse 并不总是重建项目，所以我在重建之前从我的 bin/ 文件夹中删除了 apk。在那之后，我没有再遇到这个问题。

编辑：我相信您收到的错误是命名空间问题。应该是：org.openqa.selenium.android。**库**.AndroidWebDriver

我认为这个更改是在通过 Google SDK 发布 AndroidWebDriver 之后对 selenium 树进行的，因此 wiki 中的大部分文档都反映了已发布的 jar，而不是当前 svn 树中的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T09:48:47.490

假设您使用的是 JUnit。尝试稍微改变一下测试：

```
@Before
@Override
      protected void setUp() throws Exception {
      driver = new AndroidWebDriver(getActivity());
    }

@Test
public void testSDKdemoprep() {
        driver.get("http://sdkdemoprep.playphone.pluto.vn.ua/");
        WebElement element = driver.findElement(By.xpath("/html/body/img"));
        element.click();
        element = driver.findElement(By.xpath("/html/body/div[3]/div/div[9]/div[7]/div/div[2]/div/div[2]/div/div[2]"));
    }

@After
@Override
    protected void tearDown() {
       driver.quit();
    } 
```

换句话说：如果你不使用`@Before`,`@Test`和`@After`注释，你必须以某种方式告诉程序它必须以某种方式启动驱动程序。因此，您可以尝试的其他方法是稍微更新测试方法：

```
 public void testSDKdemoprep() {
        setUp(); // Here you are telling to start the driver
        driver.get("http://sdkdemoprep.playphone.pluto.vn.ua/");
        WebElement element = driver.findElement(By.xpath("/html/body/img"));
        element.click();
        element = driver.findElement(By.xpath("/html/body/div[3]/div/div[9]/div[7]/div/div[2]/div/div[2]/div/div[2]"));
        tearDown(); // stop the driver
    } 
```

# yql - Yahoo YQL：通过坐标查找城市 WOEID

> ID：10715381
> 
> 赞同：5
> 
> 时间：2012-05-23T07:32:45.547
> 
> 标签：yql, yahoo-api

如果我使用YQL知道城市的纬度和经度，如何获取城市的WOEID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-25T17:35:20.360

对于那些仍在尝试通过坐标查找 WOEID 的人来说，其他答案现在已经过时了。使用数据表`geo.placefinder`查询经纬度，返回结果中会出现WOEID。

通过 YQL：

```
SELECT * FROM geo.placefinder WHERE text="{$seedLat}, {$seedLon}" and gflags="R" 
```

*（[在 YQL 控制台上进行测试](http://developer.yahoo.com/yql/console/?q=SELECT%20%2a%20FROM%20geo.placefinder%20WHERE%20text%3D%2246.9062324%2C-102.78000830000002%22%20and%20gflags%3D%22R%22)。）*

通过 REST：

```
http://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20geo.placefinder%20WHERE%20text%3D%22{$seedLat}%2C{$seedLon}%22%20and%20gflags%3D%22R%22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T03:04:52.780

可以参考官方网页：http: [//developer.yahoo.com/boss/geo/docs/free_YQL.html](http://developer.yahoo.com/boss/geo/docs/free_YQL.html)

这是一个例子：select * from geo.placefinder where text="37.416275,-122.025092" and gflags="R"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-03T06:51:08.340

看起来 Yahoo 已将`geo.placefinder`表设为非公开，这意味着访问需要有效的应用程序 ID 和 OAuth 身份验证（请参阅[免费的非商业 YQL 表使用](https://developer.yahoo.com/boss/geo/docs/free_YQL.html)）。如果您只需要 WOEID 并且您知道城市和州，则可以使用该`geo.places`表：

```
select * from geo.places where text="Hanover, PA" AND placeTypeName.code = 7 
```

`[YQL Console](http://developer.yahoo.com/yql/console/?q=select%20*%20from%20geo.places%20where%20text%3D%22Hanover%2C%20PA%22%20AND%20placeTypeName.code%20%3D%207)`

如果找到结果，则 WOEID 将返回为`data.query.results.place.woeid`.

然而，这并不完美。在宾夕法尼亚州，我们在搜索“汉诺威”时（至少）有三个地方可以显示（约克县的汉诺威、比弗县的汉诺威镇和卢塞恩县的汉诺威镇）。使用此方法进行搜索时，这可能会或可能不会影响您的结果。使用邮政编码应该会提高结果的准确性，并且可以使用以下`boundingBox`属性按已知纬度/经度过滤结果：

```
select * from geo.places where text="Eagle, Wisconsin" AND
  boundingBox.southWest.latitude <= 42.9147280 AND
  boundingBox.southWest.longitude <= -88.4426340 AND
  boundingBox.northEast.latitude >= 42.9147280 AND
  boundingBox.northEast.longitude >= -88.4426340 AND
  placeTypeName.code = 7 
```

`[YQL Console](http://developer.yahoo.com/yql/console/?q=select%20*%20from%20geo.places%20where%20text%3D%22Eagle%2C%20Wisconsin%22%20AND%20boundingBox.southWest.latitude%20%3C%3D%2042.9147280%20AND%20boundingBox.southWest.longitude%20%3C%3D%20-88.4426340%20AND%20boundingBox.northEast.latitude%20%3E%3D%2042.9147280%20AND%20boundingBox.northEast.longitude%20%3E%3D%20-88.4426340%20AND%20placeTypeName.code%20%3D%207)`

您仍然需要提供几个必需键之一（`text`是一个有效的必需键），因此这不符合仅按地理坐标搜索的条件，但希望这算作次优。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T09:32:55.783

使用 YQL 控制台，您可以搜索 'placeTypeName.code' 为 7 的最近地点

[http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console/)

```
SELECT * FROM geo.places WHERE text="{$seedLat}, {$seedLong}" AND placeTypeName.code = 7 
```

此查询的 REST 查询类似于：

```
http://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20geo.places%20WHERE%20text%3D%22{$seedLat}%2C%20{$seedLong}%22%20AND%20placeTypeName.code%20%3D%207&format=json&diagnostics=true&callback= 
```

显然用你自己的坐标替换`$seedLat`和:)`$seedLong`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-05T23:39:50.107

以前的答案都不再有效，但这确实有效。

您需要在查询中组合闪烁表，如下所示： `select place.woeid from flickr.places where lat="" and lon="" and api_key=""`

从 Flickr 获取 API KEY 是即时的： [https ://www.flickr.com/services/apps/create/](https://www.flickr.com/services/apps/create/)

# ios - UINavigationController 在顶部有一个差距

> ID：10715386
> 
> 赞同：1
> 
> 时间：2012-05-23T07:33:11.117
> 
> 标签：ios, uinavigationcontroller

我通过代码添加了一个 UINavigationController，但它在顶部留下了一个间隙.. 大约 20 px .. ![在此处输入图像描述](../Images/492e45ec1cb1c28f7e0a05e5f5b5b5e0.png)

如果我切换到其他选项卡并返回此选项卡，它会消失，但是在导航栏移动到正确位置之前大约 0.2 秒可以看到它。

我已经搜索 StackOverflow 但我找不到解决方案...

这是我的代码的一部分：

appDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    .....
    UIViewController *vc1 = [[Tab1 alloc] initWithNibName:@"Tab1" bundle:nil];
    UIViewController *vc2 = [[FreshEpisodeController alloc] initWithNibName:@"FreshEpisodeController" bundle:nil];
    UIViewController *vc3 = [[Tab3 alloc] initWithNibName:@"Tab3" bundle:nil];
    UIViewController *vc5 = [[DownloadListController alloc] initWithNibName:@"DownloadListController" bundle:nil];
    self.tabBarController = [[UITabHost alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:vc2, vc1, vc3, vc5, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    .....
} 
```

Tab3.m

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [[self view] addSubview:mNavController.view];
        self.title = NSLocalizedString(@"Collection List", @"Collection List");
        self.tabBarItem.image = [UIImage imageNamed:@"tab3"];
    }
    return self;
} 
```

在 Tab3.xib 中，我有一个`UIView`和`UINavigationController`(mNavController)

如果我将 Tab3 设置为第一次显示（我将其放在第一个选项卡上），则间隙不存在，但如果我将其放在第二个选项卡上，它会显示我是否切换到查看 Tab3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T13:00:58.897

*在ViewController*的*Attributes*部分中将**Under Top Bars**属性设置为**未选中**可能会有所帮助。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:46:40.367

尝试这样做

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [[self view] addSubview:mNavController.view];
        mNavController.view.frame = self.view.bounds; //here you assign the subView frame to fit superView area
        self.title = NSLocalizedString(@"Collection List", @"Collection List");
        self.tabBarItem.image = [UIImage imageNamed:@"tab3"];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:36:05.727

将视图控制器的“wantsFullScreenLayout”属性设置为“YES”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T08:09:33.130

添加`UINavigationController (mNavController)`with`viewDidLoad`方法，代码应该是这样的：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    [[self view] addSubview:mNavController.view];
    self.title = NSLocalizedString(@"Collection List", @"Collection List");
    self.tabBarItem.image = [UIImage imageNamed:@"tab3"];
} 
```

现在享受......**

# jquery - 如何连接字符串中同时包含 (" ") 和 (' ') 的字符串

> ID：10715388
> 
> 赞同：1
> 
> 时间：2012-05-23T07:33:18.633
> 
> 标签：jquery

我想连接一个字符串，但我遇到了问题。实际上我在字符串中有 (" ") 和 (' ') 。这里是

```
var $a = $ul.find("li a[title='Image 1']").addClass("active"); 
```

我想用一个变量替换一个（图 1）

```
imageIndex = parseInt(imageIdArray[1]) + 1;
var $a = $ul.find("li a[title='Image +imageIndex']").addClass("active"); //Replace 1 
```

我该如何连接它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:34:40.570

```
var $a = $ul.find("li a[title='Image " + imageIndex + "']").addClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:37:54.387

将其更改为`$ul.find("li a[title='Image " + imageIndex + "']")`

# c++ - 二叉树的列表实现是否可扩展？

> ID：10715389
> 
> 赞同：2
> 
> 时间：2012-05-23T07:33:21.610
> 
> 标签：c++, stl, tree, binary-tree

我正在编写一个简单的编解码器。树将被预先计算，一旦构建就不会有任何更改。它只会被搜索。

平衡二叉树的所有叶节点都是信号值，内部节点是近似压缩表示。

如果我有大量叶节点，使用 stl 向量的列表实现是否可扩展？目前我不知道有多大。

如果我有 4 个叶节点，则列出实现，例如 1,2,3,4,5,6,7

然后的孩子

```
root(1)-> 2,3
2->4,5
3->6,7 
```

所以我可以简单地使用他们在向量中的位置跳转到孩子们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:43:31.763

在这种情况下，使用“列表”或“数组”不应该造成任何问题（因为树是不可变的）。O(log n) 搜索的唯一要求是快速随机访问（即对给定索引的 O(1) 访问）。

您可以使用 a`vector`或 a `deque`，两者都合适。`vector`如果系统找不到足够大的内存块来容纳所有元素，您可能会遇到可伸缩性问题，尽管从一开始它应该证明更简单。如果您遇到此障碍，请切换到`deque`，尽管您可能会失去一些速度，但由于其分散的性质，它应该可以让您进一步成长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:53:52.607

我更喜欢使用 MAX_ELEMENTS 预先分配的树节点数组（主要在初始化时分配）而不是 stl 向量，原因很简单，因为所有树节点都连续位于堆上以便在运行时更快地访问。

我说更快的访问主要是因为指针跳转可能与分布式 stl 向量元素不一致，因为列表中的元素数量非常庞大（比如溢出 32 位数字）

您可以从处理器的 L1 高速缓存访​​问角度从高速缓存行未命中来查看它。

# perl - Perl - 按客户端计数#循环

> ID：10715394
> 
> 赞同：1
> 
> 时间：2012-05-23T07:24:47.407
> 
> 标签：perl

我有以下子将计算每个客户的购买次数。它曾经只有/总是 4 个类别，下面的脚本就足够了。

客户名单：

*   阿尔法01
*   阿尔法02
*   阿尔法03
*   alpha04
*   布拉沃01
*   布拉沃02
*   布拉沃03
*   布拉沃04

由于列表已经增长到 >4，我需要帮助来修改脚本。我希望脚本灵活。脚本可以继续循环运行，直到找到最后一个/最大的可用数字（只是一个想法），而不是将“MYClientNo”固定为某个数字/值，然后只有它会停止并返回该值。

例如，“alpha”可以达到 06，“bravo”可以达到 22。但我预计它不会很快超过 100。任何人都可以帮忙吗？

```
sub GetCountMyClient {
    my @Line1 = @_;
    my @Count = (0, 0, 0, 0);
    foreach $myclient (@Line1) {
        my @MYClient       = split(/\s+/, $myclient);
        my @MYClientOutput = split(/:/, $MYClient[4]);
        #print $MYClientOutput[0]. "\n";
        my $MYClientNo     = substr($MYClientOutput[0], -2);
        #print $MYClientNo . "\n";
        if($MYClientNo eq "01") {
            $Count[0]+= 1;
        } elsif($MYClientNo eq "02") {
            $Count[1]+= 1;
        } elsif($MYClientNo eq "03") {
            $Count[2]+= 1;
        } elsif($MYClientNo eq "04") {
            $Count[3]+= 1;
        }
    }
    return @Count;
} 
```

PS：我尽力识别代码，它在文本框中看起来正确，但不是在预览中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:59:23.573

使用散列 ( `%count`)，其中散列键是客户端编号，散列值是计数。或者，您可以使用带有客户端编号的数组作为数组索引。

```
sub GetCountMyClient {
    my @Line1 = @_;
    my %count;

    foreach $myclient (@Line1) {
        my @MYClient       = split(/\s+/, $myclient);
        my @MYClientOutput = split(/:/, $MYClient[4]);
        #print $MYClientOutput[0]. "\n";
        my $MYClientNo     = substr($MYClientOutput[0], -2);
        #print $MYClientNo . "\n";
        $count{$MYClientNo}++;
    }
    return %count;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:19:58.720

你可能会在这里找到`count_by`对[`List::UtilsBy`](https://metacpan.org/module/List%3a%3aUtilsBy)你有帮助的东西。

```
use List::UtilsBy qw( count_by );

my %count = count_by { $_ =~ m/(\d+)$/ } @client_names; 
```

假设该`@client_names`数组仅包含客户端的名称，这将返回一个散列，给出每种数字字符串的结尾数。

# symfony - 如何将应用程序目录与作曲家合并

> ID：10715395
> 
> 赞同：0
> 
> 时间：2012-05-23T07:33:39.837
> 
> 标签：symfony

我想升级到 Symfony 2.1，但我不熟悉使用 git 以及与其他包的依赖关系。

我尝试使用 Composer 下载 Knp-Symfony-Version 并尝试修复 composer.json 中的版本，但似乎存在不兼容...

有人可以向我发布我必须做的步骤吗？

问候

编辑：

我知道克隆了 symfony/symfony 的 master 分支。

```
git clone https://github.com/symfony/symfony 
```

比我加载作曲家：

```
curl -s http://getcomposer.org/installer | php 
```

而且您可以安装软件包：

```
php composer.phar install 
```

剩下的唯一问题是我如何下载应用程序（和网络）目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:34:18.157

我应该看起来更好...

symfony-standard 版本还有一个 master 分支：[https ://github.com/symfony/symfony-standard](https://github.com/symfony/symfony-standard)

医生做剩下的..

# php - Zend 表单与普通 HTML 表单的区别 Zend Framework

> ID：10715400
> 
> 赞同：2
> 
> 时间：2012-05-23T07:33:59.463
> 
> 标签：php, zend-framework, zend-form

只是想知道zend表单和普通html表单之间是否有区别？

我开始知道我们可以简单地在视图文件中添加 HTML 表单并且它可以工作，但是表单元素的 isValid 函数不适用于普通的 HTML 表单。还有其他区别吗？

我是第一次构建 Zend Framework 应用程序，并且很难在 zend 表单中使用 css，所以我想知道是否可以在使用 zend 验证功能（如 isValid）的同时使用普通表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:36:03.397

来自[Zend Form 手册](http://framework.zend.com/manual/en/zend.form.introduction.html)

> Zend_Form 简化了 Web 应用程序中的表单创建和处理。它执行以下任务：
> 
> 元素输入过滤和验证
> 
> 元素排序
> 
> 元素和表单渲染，包括转义
> 
> 元素和表单分组
> 
> 元素和表单级别的配置

正是`Element and Form rendering, including escaping`因为生成的标记给大多数人带来麻烦的第三项，所以他们放弃了 Zend Form，但也不得不放弃其他人的便利。

但是，您可以通过使用 viewScript 装饰器来两全其美。[我在这里](https://stackoverflow.com/a/8451723/212940)的回答给出了一个如何做到这一点的例子，所以我不会在这里重复自己。

基本上，Zend Form 将表单创建封装到一个类中，以便于操作/验证。表单提供了属性和方法，使创建和操作表单更加容易。

HTML 表单只是没有附加功能的标记，除非您自己编写。Zend Form 将为您生成该标记，或者您可以自己生成它，如链接答案中所示。

有关更多信息，您可能需要阅读这篇关于[Zend_Form 的装饰器的](http://devzone.zend.com/1240/decorators-with-zend_form)文章，作者是 Zend Framework 的首席开发人员 Mathew Weier O'Phinney。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T17:53:40.273

如果你愿意，你可以把它们混合起来。您可以向元素添加验证规则，向表单添加元素，并针对表单或每个表单元素进行验证。但是您不需要渲染表单（带有 Zend_Form_Element_Hash 或类似的表单除外。）

```
<?php

$form = new Zend_Form;
$form->setMethod('GET');

$e1 = new Zend_Form_Element('first');
    $e1->setRequired(true);
$e2 = new Zend_Form_Element('second');
    $e2->setRequired(true);
$submit = new Zend_Form_Element_Submit('submit', array(
        'label' => 'Do something'
    ));
$form->addElements(array($e1, $e2, $submit));

if(isset($_GET) && count($_GET)) {
    if ($form->isValid($_GET)) {
        echo 'Valid';
    } else {
        echo 'Invalid';
    }
}

?>
<form method="get" action="">
    First:<input type="text" name="first" id="first" value="">
    Second:<input type="text" name="second" id="second" value="">
    <input type="submit" name="submit" id="submit" value="Go for it">
</form> 
```

# django - 如何在 Django 中使用复选框小部件从 MultipleChoiceField 保存数据

> ID：10715401
> 
> 赞同：2
> 
> 时间：2012-05-23T07:34:18.083
> 
> 标签：django, django-models, django-forms, django-views, django-orm

我有一个 Tutor 模型，它有一个 ManyToManyField 到一个名为 Subjects 的模型，我正在尝试使用 MultipleChoiceField 渲染 Tutor 表单，虽然它被正确渲染，但值没有保存在数据库中，我想我是在我看来做错了什么。

供参考，这里是模型

```
class Subjects(models.Model):
    subject = models.CharField(max_length=100)

class TutorProfile(models.Model):
    user = models.OneToOneField(User, primary_key=True)
    subject = models.ManyToManyField(Subjects) 
```

我已经用一些对象填充了我的主题模型

这是表格，

```
class TutorForm(forms.Form):
      subjectfield = forms.MultipleChoiceField(choices = ((sub.pk, sub.subject) for sub in Subjects.objects.all()), widget=forms.CheckboxSelectMultiple()) 
```

这是视图，

```
def someview(request):
    if request.method == 'POST':
      form = TutorForm(request.POST)
      if form.is_valid():
        subjects = form.cleaned_data['subjectfield']
        for sub in subjects:
          form.subject.add(sub)
        form.save() 
```

但是这些值没有保存在数据库中，请帮助:(

**编辑**
我终于在 Mohasen Hassani 的回答的帮助下弄清楚了

必须根据下面 Mohasen 的回答编辑表格，但必须像这样更改视图，

```
def someview(request):
  if request.method == 'POST':
    form = TutorForm(request.POST)
    if form.is_valid():
      t = TutorProfile(user.username=somebody)
      t.save()

      subjects_list = request.POST.getlist('subject')
      counter = 0
      for sub in subjects_list:
        sub_pk = subjects_list.__getitem__(counter)
        sub_entity = Subjects.objects.get(pk=sub_pk) #The model to which we are related
        data.subject.add(sub_entity)
        counter = counter+1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:12:43.810

编辑您的表格以：

```
subjects = forms.ModelMultipleChoiceField(
        queryset=Subjects.objects.all(),
        widget=forms.CheckboxSelectMultiple) 
```

在视图中：您必须首先创建/保存没有主题的 TutorProfile，然后单独提供其主题字段。像这样：

```
def someview(request):
    if request.method == 'POST':
      form = TutorForm(request.POST)
      if form.is_valid():
        t = TutorProfile(user.username=somebody)
        t.save()
        t.subjects = form.cleaned_data['subjects'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:36:09.993

更改您的表格：

```
class TutorForm(forms.ModelForm):
    class Meta:
        fields = ('subject',) 
```

而你的观点：

```
if form.is_valid():
    form.save() 
```

# c# - Linq to SQL 组和前 25 名

> ID：10715403
> 
> 赞同：1
> 
> 时间：2012-05-23T07:34:31.007
> 
> 标签：c#, asp.net, linq-to-sql, count

我的数据库中有两个表，如下所示：

用户：

```
userid(int)
username(varchar) 
```

分数：

```
scoreid(int)
result(bit)
attackinguserid(int) (same as User.userid) 
```

它们还包含其他信息，但现在这并不重要。我想要的是获得 score = true 的前 25 名用户并像这样显示它们：

```
Username: Won:
Peter     28
Mike      25
Kim       20 
```

等等......我一直在尝试的代码是这样的：

```
var winners = (from s in dc.Scores
                       from u in dc.Users
                       where (s.result) && (s.attackinguserid == u.userid)
                       group u by s
                       into groups
                       select new
                                  {
                                      Username= groups.Key,
                                      Won= groups.Count()
                                  }
                      ).OrderByDescending(x => x.Seire).Distinct().Take(25);

        gvBestPlayers.DataSource = winners; //gvBestPlayers = gridview
        gvBestPlayers.DataBind(); 
```

但这给了我在 DataBind() 上的错误。错误：NotSupportedException 未被用户代码处理。成员“System.Web.UI.Page.Title”不支持 SQL 转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:28:37.893

我自己解决了。这是工作代码：

```
var winners = (from s in dc.Scores 
               from u in dc.Users 
               where (s.result) && (s.attackinguserid == u.userid) 
               group s by u 
               into groups 
               select new 
               { 
                   Username= groups.Key.username, 
                   Won= groups.Count() 
               }).OrderByDescending(x => x.Seire).Distinct().Take(25).ToList(); 

gvBestPlayers.DataSource = winners; 
gvBestPlayers.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:23:01.560

试试这个..

```
var a = (from s in dc.Scores
                     join u in dc.Users on s.attackinguserid equals u.userid
                     let count = dc.Scores.Where(id => id.attackinguserid == u.userid ).Count()
                     where s.result == true
                     select new { Username = u.username, Won = count }).ToList().Distinct(); 
```

# java - 将 inputStream 从 ZipFile 转换为字符串

> ID：10715404
> 
> 赞同：3
> 
> 时间：2012-05-23T07:34:36.120
> 
> 标签：java, string, inputstream, zipfile

这里我的 Web 应用程序的主要功能是上传 .zip 文件并将其存储在服务器端，但在此之前我需要执行以下任务： 1.) .zip 文件包含 xml 文件，我必须先验证xml 文件使用架构。2.) 如果 xml 文件有效，我需要将 xml 文件的内容转换为字符串，而不需要从输入流中解压缩文件。

我成功地验证了 xml 文件，但是在从输入流转换字符串时出现以下异常： **“java.io.EOFException: Unexpected end of ZLIB input stream”**

我已经尝试了 Stack Overflow 和其他论坛站点中提供的所有解决方案，但我还没有成功。任何帮助将不胜感激：

以下是代码：

```
try
    {
        ZipFile zipFileUtil = new ZipFile(zipFile);
        Enumeration<? extends ZipEntry> zipFileContents = zipFileUtil.entries();
        while(zipFileContents.hasMoreElements())
        {

            ZipEntry zipEntry = zipFileContents.nextElement();
            if(zipEntry.getName().equals("File.xml"))
            {
                InputStream sourceFile = zipFileUtil.getInputStream(zipEntry);
                if(isValidAsPerXSD(sourceFile))
                {
                    //At this line Exception is Generated
                    String xmlContent = IOUtils.toString(sourceFile);
                }
            }
        }

    }
    catch(Throwable t)
    {
        System.out.println("Exception: "+t.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:44:05.583

您不能两次读取流“sourceFile”！输入流应该按顺序读取到最后。您必须将其关闭并重新打开。

```
InputStream sourceFile = zipFileUtil.getInputStream(zipEntry);
if(isValidAsPerXSD(sourceFile))
{
    sourceFile.close();
    sourceFile = zipFileUtil.getInputStream(zipEntry);
    //At this line Exception is Generated
    String xmlContent = IOUtils.toString(sourceFile);
}
sourceFile.close(); 
```

# nunit - 打开一个url失败，错误信息：接口未知。（来自 HRESULT 的异常：0x800706B5）Interop.SHDocVw

> ID：10715409
> 
> 赞同：1
> 
> 时间：2012-05-23T07:34:44.403
> 
> 标签：nunit, watin, webtest

当我尝试打开一个 url 并登录时，我正在使用 WatiN 和 Nunit 进行网络测试。以下错误打断了我：

```
ADP.OneHR.ATC.Production_SmokingTests.Production_LoginAndOpenOnePageTests.BeginTest(2):
System.Exception : Failed to write log! The interface is unknown. (Exception from 
HRESULT: 0x800706B5)Interop.SHDocVw at SHDocVw.IWebBrowser2.get_HWND()
at WatiN.Core.Native.InternetExplorer.IEBrowser.get_hWnd()
at WatiN.Core.Browser.get_hWnd()
at WatiN.Core.UtilityClasses.CaptureWebPage.CaptureWebPageToFile(Stream stream,
    ImageCodecs imagetype, Boolean writeUrl, Boolean showGuides, Int32 scalePercentage, Int32 quality)
at WatiN.Core.UtilityClasses.CaptureWebPage.CaptureWebPageToFile(String filename, 
    Boolean writeUrl, Boolean showGuides, Int32 scalePercentage, Int32 quality)
at WatiN.Core.DomContainer.CaptureWebPageToFile(String filename)
at ADP.OneHR.ATF.CommonSettings.TestResultLoggingModule.WriteToLogFile(IE ie, 
    String caseName, Boolean result, String actualResult) in     
D:\ADPTest\ADP.OneHR.Test\ADP.OneHR.Test\CommonSettings\TestResultLoggingModule.cs:line 109 
```

# powershell - 具有动态上下文参数值的选择字符串

> ID：10715421
> 
> 赞同：1
> 
> 时间：2012-05-23T07:35:33.810
> 
> 标签：powershell, pipeline

我想执行一些日志分析。下面列出的示例日志文件。我知道如何使用过程/脚本解决此问题，但我想知道如何使用管道等以“powershell 样式”完成此问题

日志文件包含带有文件名和组件列表的字符串。它们中的每一个都可以“通过”或“失败”。我想打印以“Checking”开头的所有行，其中至少有一个 FAILED 组件。

* * *

```
Checking : C:\TFS\Datavarehus\Main\ETL\SSIS\DVH Project\APL_STG1_Daglig_Master.dtsx

Checking : C:\TFS\Datavarehus\Main\ETL\SSIS\DVH Project\COPY_STG1_APL_Dekningsgrupper_Z1.dtsx
    SQLCommand [Z1 APL_Dekningsgrupper] FAILED the VA1 check (table name as source)
    SQLCommand [APL_Dekningsgrupper] passed the VA1 check
    SQLCommand [FAK_Avkastningsgaranti_Kollektiv] FAILED the VA1 check (table name as source)

Checking : C:\TFS\Datavarehus\Main\ETL\SSIS\DVH Project\DM_DVH_BpBedrift_InvesterteFond 1.dtsx
    SQLCommand [DVH] passed the VA1 check
    SQLCommand [Avtale Kurs] passed the VA1 check 
```

* * *

乍一看，我需要类似的东西

```
gc logtxt | select-string -pattern 'FAILED' -context <nearest line starting with "Checking" in begining direction>,<lines count from CheckingLine to "LineWith 'FAILED'"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:19:31.293

粗略的版本：

```
$line = $null
gc test.txt | %{ 
    if($line){ 
        if($_ -match "FAILED"){
            $line
            $line = $null
        }
    }
    if($_ -match "^Checking"){
        $line = $_
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:29:02.277

感谢您的提示。最后我得到了以下工作代码：

```
gc test.txt | Foreach {
    if ($_.StartsWith('Checking'))  {
        $pkname = $_
    }
    if ($_.Contains('FAILED')) { 
        if (!($pkname.equals($printed_pkname))) {
        $pkname; 
        $printed_pkname=$pkname} 
        $_ }
    } 
```

# php - 使用jquery在div中刷新标题

> ID：10715427
> 
> 赞同：0
> 
> 时间：2012-05-23T07:35:56.587
> 
> 标签：php, javascript, jquery, html

我有一个 login.php 文件：

```
if(...) {
  ...
header('Refresh: 1; url="login.php"';
} else {
echo '<form name="submit">...</form>';
} 
```

和带有jquery的代码：

```
$('#resetreq').live('submit', function() {
    $.post('login.php', $(this).serialize(), function (
            data, textStatus) {
        $('#resetPwDiv').html(data);
    });
    return false;
}); 
```

和，在哪里显示表格。如何使用在 div 中刷新的 javascript 进行工作刷新？我想在提交按下后刷新一次。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T11:27:19.333

在jquery中，我们可以使用这个刷新div

$("#divId").load(location.href + " #divId>*", "");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:41:28.113

你 m8 想使用函数变量事件，然后使用预定义的函数 event.preventDefault(); 使您的提交不重定向到 php 页面。

```
$('#resetreq').live('submit', function(event) {
    event.preventDefault();
    $.post('login.php', $(this).serialize(), function (
            data, textStatus) {
        $('#resetPwDiv').html(data);
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:12:56.353

由于 .live 已被弃用，您应该使用 .on()：

```
$(element).on('submit', function(e){...}) 
```

如果你需要监听 AJAX 生成的内容的事件，你可以这样做：

```
$(document).on('submit','#resetreq', function(e) {
e.preventDefault();
    $.post('login.php', $(this).serialize(), function (data) {
        $('#resetPwDiv').html(data);
    });
    return false;
}); 
```

# java - Java 中的 PriorityQueue 说明

> ID：10715428
> 
> 赞同：1
> 
> 时间：2012-05-23T07:36:01.187
> 
> 标签：java, priority-queue

在下面的代码中，我想在创建 PrioriyQueue 时知道 10 的意义。我知道它的初始容量，但它会影响性能吗？

```
import java.util.*;

class Test {
    static class PQsort implements Comparator<Integer> { // inverse sort
        public int compare(Integer one, Integer two) {
            return two - one; // unboxing
        }
    }

    public static void main(String[] args) {
        int[] ia = { 1, 5, 3, 7, 6, 9, 8 }; // unordered data
        PriorityQueue<Integer> pq1 = new PriorityQueue<Integer>(); // use
                                                                    // natural
                                                                    // order
        for (int x : ia)
            pq1.offer(x);
        for (int x : ia)
            // review queue
            System.out.print(pq1.poll() + " ");
        System.out.println("");
        PQsort pqs = new PQsort(); // get a Comparator
        PriorityQueue<Integer> pq2 = new PriorityQueue<Integer>(10, pqs); // use
                                                                            // Comparator
        for (int x : ia)
            // load queue
            pq2.offer(x);
        System.out.println("size " + pq2.size());
        System.out.println("peek " + pq2.peek());
        System.out.println("size " + pq2.size());
        System.out.println("poll " + pq2.poll());
        System.out.println("size " + pq2.size());
        for (int x : ia)
            // review queue
            System.out.print(pq2.poll() + " ");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:37:27.757

[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)解释：

> 优先级队列是无界的，但具有控制用于存储队列元素的数组大小的内部容量。它总是至少与队列大小一样大。随着元素被添加到优先级队列中，其容量会自动增长。增长政策的细节没有具体说明。

换句话说，如果发现队列花费了太多时间来增长其内部数组，那么能够指定初始容量是一种优化性能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:40:53.293

API 文档确实解释了容量是什么。它是内部数组的大小。

[http://download.java.net/jdk7/archive/b123/docs/api/java/util/PriorityQueue.html](http://download.java.net/jdk7/archive/b123/docs/api/java/util/PriorityQueue.html)

```
Allowing you to specify an initial capacity is a small optimization. 
If you know how many entries you will need, you can save the (tiny) time 
spent growing the queue to the required size, by sizing it correctly 
from the start. 
```

# javascript - 从 MVC 3 调用小程序

> ID：10715432
> 
> 赞同：4
> 
> 时间：2012-05-23T07:36:14.207
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor, applet

我需要从 MVC 3 应用程序调用一个 java 小程序。

1.在视图中，我放置小程序标签：

```
<form action="/Home/FileStorage" method="post" enctype="multipart/form-data">
<applet code = "applet.AppletDemo.class" 
        archive = "@Url.Content("~/Java/Applets/applet.jar")" + "," + "@Url.Content("~/Java/Applets/commons-codec-1.4.jar")" +","+
            "@Url.Content("~/Java/Applets/commons-io-1.4.jar")" +","+ "@Url.Content("~/Java/Applets/commons-logging-1.1.1.jar")" +","+ "@Url.Content("~/Java/Applets/commons-httpclient-3.1.jar")"
        width = "700" height = "500">
        <param name="tenantID" value="1"/>  
        <param name="userID" value="1"/>
        <param name="siteID" value="1"/>
</applet>
</form> 
```

2.我已经把jar文件放在了文件夹里`Java/Applets`。

3.但是小程序没有被触发去那个视图。

请通过让我知道错误来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:54.583

尽管它是一个 ASP.NET 答案，但考虑到 ASP.NET 与 ASP.NET MVC 位于同一基础上，请看[一下这个](https://stackoverflow.com/questions/6764671/is-there-an-easy-way-to-incorporate-a-java-applet-in-an-asp-net-page)成功回答的问题。

[这里](https://stackoverflow.com/questions/1711909/running-java-applet-in-asp-net-mvc-application?rq=1)和[这里](https://stackoverflow.com/questions/5371059/issue-calling-applet-functions-from-java-script?rq=1)还有其他值得关注的来源。

看看这是否有帮助并告诉我。谢谢

# java-me - J2me Createplayer 不适用于三星手机

> ID：10715433
> 
> 赞同：0
> 
> 时间：2012-05-23T07:36:18.053
> 
> 标签：java-me, samsung-mobile, mmapi

我正在尝试创建 J2me 应用程序，它将捕获图像并将其上传到服务器上。

我使用以下代码捕获图像。

```
 player = Manager.createPlayer("capture://video");
 player.realize();
 videoControl = (VideoControl) (player.getControl("VideoControl")); 
```

上面的代码适用于所有诺基亚手机，它不显示相机来捕捉图像，在三星手机中也不例外。

请引导我访问支持三星 java 的手机的捕获图像代码的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:04:17.177

我也经历过同样的情况。您需要*添加对 player.start() 的调用*。
就我而言，我是**在**获取并调整了 videoControl 之后完成的。

# java - GWTTestCase 给了我一个错误

> ID：10715439
> 
> 赞同：2
> 
> 时间：2012-05-23T07:36:57.590
> 
> 标签：java, gwt, testing

我使用 GWTTestCase 编写简单的测试，这里是：

```
public class SampleTest extends GWTTestCase {

    @Override
    public String getModuleName() {
        return "path.to.my.one.and.only.Module";
    }

    public void testSome() {
        assertNotNull(null);
    }
} 
```

但是当我运行**mvn test**时，测试失败并出现下一个错误：

```
[ERROR] Unable to find type 'java.lang.Object'
   [ERROR] Hint: Check that your module inherits 'com.google.gwt.core.Core' either directly or indirectly (most often by inheriting module 'com.google.gwt.user.User')
Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.648 sec <<< FAILURE! 
```

我的模块中有“com.google.gwt.user.User”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:21:22.530

该错误表明您需要`com.google.gwt.core.Core`在`gwt.xml`文件中继承，并不是说您的类应该扩展/实现它。

因为你没有提供`gwt.xml`。我举个例子。

在您的 gwt.xml 中尝试一下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE 
    module 
    PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.3.0//EN" 
    "http://google-web-toolkit.googlecode.com/svn/tags/2.3.0/distro-source/core/src/gwt-module.dtd">

<module rename-to="hello">
    <inherits name="com.google.gwt.core.Core" />
    <source path="foo" /> <!-- Your package name -->
</module> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T10:20:51.030

我设法通过*修复我的 JRE 定义*来解决此问题，为此请转到**Window** > **Preferences** > **Java** > **Installed JREs** > **Add your JRE's correct path。**你去吧！

# android - 在 Eclipse 中打开现有项目

> ID：10715444
> 
> 赞同：-1
> 
> 时间：2012-05-23T07:37:10.303
> 
> 标签：android, eclipse

当我尝试在 Eclipse 中打开 Excising Project 时。它在项目中显示错误，但在其他系统中没有任何其他运行良好。但是，当我在 Eclipse 中打开相同的`File-->Import-->select General--> Excising Project in Workspace-->Select Root Directory -->here`

我选择了我的项目文件夹，之后我可以完全导入项目，所有导入的东西。但它显示错误，不知道那个错误是什么，帮我解决这个问题..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:41:59.343

也许`Eclipse menu -> Project -> Clean..`可以帮助错误消失？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:45:36.893

您可能没有根据该特定项目的详细信息下载框架，这可能是导致此问题的原因，，，尝试检查项目属性中是否指定了构建目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:58:33.737

您还可以更改编译器级别`Right click -> Propertis -> Java Compiler`，或者某些**库**未**导入**此项目。是很多可能性，给我们一个错误报告。

# javascript - window.open- 标题标签未在 chrome 中显示

> ID：10715445
> 
> 赞同：1
> 
> 时间：2012-05-23T07:37:13.823
> 
> 标签：javascript, asp.net, google-chrome, title, window.open

我正在使用 window.open() 在 javascript 中打开新窗口

> window.open("UpdateEmailRemainder.aspx", "", "width=630,height=500,status,resizable, top=" + top + ",left=" + left);

在 UpdateEmailRemainder.aspx.cs 我在服务器端代码中设置了标题标签：

> this.Title = "添加邮件提醒";

但是，标题仍然是“无标题”。在 ie 中效果很好。

更新：我

*   尝试使用 HTML，但仍然无法正常工作
*   如果您多次刷新窗口，请打开开发人员工具（f12）或打开页面源 - 出现标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:51:53.810

`<title></title>`您可以在HTML中编写标题。

# python - PyGTK：移动自定义构建工具提示窗口

> ID：10715447
> 
> 赞同：2
> 
> 时间：2012-05-23T07:37:27.670
> 
> 标签：python, matplotlib, pygtk

我已经在其中构建了带有 matplotlib 图形的 PyGTK 应用程序。我也想使用自定义构建的工具提示窗口。工具提示值根据鼠标在图形上的位置而变化。

我的问题是，我无法将工具提示窗口移动到鼠标旁边，因为我不知道**如何在屏幕上获取鼠标位置**

这是我的剥离代码：

```
def figPrepare(self):   #initialize graph
        #figure preparation stuff

        #custom tooltip window
        tooltip = gtk.Window(gtk.WINDOW_POPUP)
        lbl = gtk.Label()
        tooltip.add(lbl)
        lbl.show()

        figure.canvas.set_tooltip_window(tooltip)
        figure.canvas.props.has_tooltip = True
        #events
        figure.canvas.mpl_connect('figure_enter_event',lambda w: tooltip.show())
        figure.canvas.mpl_connect('motion_notify_event',lambda w: self.updateTooltip(tooltip, lbl))
        figure.canvas.mpl_connect('figure_leave_event',lambda w: tooltip.hide())

    def updateTooltip(self, win, lbl):
        lbl.set_text(str(time.time()))
        win.move(w.x, w.y) 
```

此代码移动工具提示窗口，但值基于 matplotlib 图形，而不是屏幕中的绝对位置。

有人可以指出我如何将工具提示窗口移动到鼠标指针旁边吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:26:07.533

我找到了解决方案：

```
def updateTooltip(self, win, lbl):
    lbl.set_text(str(time.time()))
    x, y, mods = win.get_screen().get_root_window().get_pointer()   #this gets absolute mouse possition on screen
    win.move(x+15, y+10) 
```

# algorithm - 线段树中的延迟传播？

> ID：10715450
> 
> 赞同：3
> 
> 时间：2012-05-23T07:37:30.257
> 
> 标签：algorithm, segment-tree, lazy-propagation

好吧，我试图在 Codechef 上解决这个[翻转硬币的问题。](http://www.codechef.com/problems/FLIPCOIN/)正在用段树解决它。但获得时间限制超过。我搜索了一下，发现必须使用惰性传播。但我无法理解。我的更新功能递归工作（从上到下）。请给出一些提示或举例说明。还要指出我必须更改代码的地方。

在掷硬币时，如果节点值为 1，则在更新期间将其更改为 0，如果为 0，则将其更改为 1。

start 和 end 是原始数组的限制。tree 是段树数组。

```
void update(int node, int start, int end,int pos)//pos=position to update
{
    if(start==end) tree[node]=(tree[node]==0) ? 1 : 0;
    else
    {
        int mid=(start+end)/2;
        if(mid>=pos) update(2*node + 1, start, mid, pos);
        else update(2*node + 2, mid+1, end, pos);

        tree[node]=tree[2*node +1] + tree[2*node +2];
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T10:05:43.210

延迟传播意味着仅在需要时更新。它是一种允许以渐近时间复杂度 O(logN) 执行范围更新的技术（这里的 N 是范围）。

假设您要更新范围 [0,15]，然后您更新节点 [0,15] 并在节点中设置一个标志，表示要更新它的子节点*（使用标记值，以防标志不是用过）*。

可能的压力测试案例：

**0 1 100000**

**0 1 100000**

**0 1 100000** ...重复 Q 次（其中 Q = 99999），第 100000 个查询将是

**1 1 100000**

在这种情况下，大多数实现会坐下来翻转 100000 个硬币 99999 次，只是为了最终回答一个简单的查询并超时。

使用延迟传播，您只需将节点 [0,100000] 翻转 99999 次并设置/取消设置要更新其子节点的标志。当询问实际查询本身时，您开始遍历其子级并开始翻转它们，将标志向下推并取消设置父级标志。

哦，请确保您使用了正确的 I/O 例程（scanf 和 printf，而不是 cin 和 cout，如果它的 c++ 的话）希望这能让您了解延迟传播的含义。更多信息： [http ://www.spoj.pl/forum/viewtopic.php?f=27&t=8296](http://www.spoj.pl/forum/viewtopic.php?f=27&t=8296)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T01:29:14.030

我将惰性更新操作与正常更新操作进行对比，以及这如何改变查询操作。

在正常的单个更新操作中，您更新树的根，然后递归地仅更新树的所需部分（从而为您提供`O(log(n))`速度）。如果您尝试对范围更新使用相同的逻辑，您可以看到它如何恶化`O(n)`（考虑非常广泛的范围，并看到您主要需要更新树的两个部分）。

因此，为了克服这个`O(n)`想法，只有在您真正需要时才更新树（查询/更新先前更新的段，从而使您的更新变得懒惰）。所以这是它的工作原理：

*   树的创建完全一样。唯一的细微差别是您还创建了一个数组，其中包含有关潜在更新的信息。
*   当你更新树的节点时，你还要检查它是否需要更新（从之前的更新操作），如果是 - 你更新它，标记孩子将来要更新并取消标记节点（懒惰）
*   当您查询树时，您还检查节点是否需要更新，如果需要更新它，将其标记为子节点并在之后取消标记。

下面是一个更新和查询的例子（解决最大范围查询）。如需[完整代码，请查看本文](http://se7so.blogspot.com/2012/12/segment-trees-and-lazy-propagation.html)。

```
void update_tree(int node, int a, int b, int i, int j, int value) {
    if(lazy[node] != 0) { // This node needs to be updated
        tree[node] += lazy[node]; // Update it
        if(a != b) {
            lazy[node*2] += lazy[node]; // Mark child as lazy
            lazy[node*2+1] += lazy[node]; // Mark child as lazy
        }
        lazy[node] = 0; // Reset it
    }

    if(a > b || a > j || b < i) // Current segment is not within range [i, j]
        return;

    if(a >= i && b <= j) { // Segment is fully within range
        tree[node] += value;
        if(a != b) { // Not leaf node
            lazy[node*2] += value;
            lazy[node*2+1] += value;
        }
        return;
    }

    update_tree(node*2, a, (a+b)/2, i, j, value); // Updating left child
    update_tree(1+node*2, 1+(a+b)/2, b, i, j, value); // Updating right child
    tree[node] = max(tree[node*2], tree[node*2+1]); // Updating root with max value
} 
```

和查询：

```
int query_tree(int node, int a, int b, int i, int j) {
    if(a > b || a > j || b < i) return -inf; // Out of range

    if(lazy[node] != 0) { // This node needs to be updated
        tree[node] += lazy[node]; // Update it
        if(a != b) {
            lazy[node*2] += lazy[node]; // Mark child as lazy
            lazy[node*2+1] += lazy[node]; // Mark child as lazy
        }
        lazy[node] = 0; // Reset it
    }

    if(a >= i && b <= j) // Current segment is totally within range [i, j]
        return tree[node];

    return max(query_tree(node*2, a, (a+b)/2, i, j), query_tree(1+node*2, 1+(a+b)/2, b, i, j));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:40:44.023

要仅将 5..15 标记为“是”，您只需要以下内容。操作只涉及 7 个节点，比不使用延迟传播的情况要少得多。可以证明，最多`2logn - 1`可能涉及到节点，`n`范围在哪里。

```
 0..31u
         /    \
      0..15u 16..31n
      /    \
   0..8u  9..15y
   /   \
0..4n  5..8y 

(u: unknown, look deeper; y: yes; n: no) 
```

如果没有延迟传播，段树并不比普通数组好。

如何实施的更多细节留给您。你应该自己解决。

# ruby-on-rails - 在 CSS 中传递 ruby 标签

> ID：10715454
> 
> 赞同：1
> 
> 时间：2012-05-23T07:38:07.123
> 
> 标签：ruby-on-rails, css, ruby, ruby-on-rails-3

我想动态更改我的应用程序背景。对于该背景图像，我将图像保存在只有一行的数据库中，如果我上传新的背景图像，它将更新数据库的第一行并且它也会影响背景。

这是我的查看代码

```
<%=ChangeBackdrops.first.media.url%> 
```

这是我的CSS

```
body {
  background-image: url(/../../../images/back.jpg);
  background-repeat:no-repeat;
  background-position:center center;
  background-attachment:fixed;
  -o-background-size: 100% 100%, auto;
  -moz-background-size: 100% 100%, auto;
  -webkit-background-size: 100% 100%, auto;
  background-size: 100% 100%, auto;
} 
```

如何在该 CSS 中传递我的 ruby​​ 标签？是这样的意思吗？

```
background-image: url(<%=ChangeBackdrops.first.media.url%>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:09:25.967

最简单的方法就是`style`在渲染视图时将代码放在标签内。`application.html.erb`尝试在（例如）中编写以下代码：

```
<head>
  ...
  <link rel="stylesheet" ... /> <!-- load your common stylesheet --!>
  <!-- and now override the background-image --!>
  <style>
    body {
      background-image: url("#{ChangeBackdrops.first.media.url}");
    }
  </style>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:55:34.210

你用什么版本的rails？您使用资产管道吗？在这种情况下，您只需将 erb 扩展名添加到您的 css 文件并使用您建议的行`<%=ChangeBackdrops.first.media.url%>`。您可能想查看[本指南](http://guides.rubyonrails.org/asset_pipeline.html)，它的“预处理”部分

# lucene - 标记器会删除空格吗？

> ID：10715455
> 
> 赞同：2
> 
> 时间：2012-05-23T07:38:09.457
> 
> 标签：lucene, tokenize, stringtokenizer

Lucene 的标准分词器会删除空格和空行吗？我一直在阅读 API（[StandardTokenizer](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/analysis/standard/StandardAnalyzer.html)），但没有指定。也许标记器默认情况下会这样做，我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:43:15.167

是的。Lucene 标记器从文档中获取可索引的术语，其中不包括空格。不过，它们确实在原始文档中保留了令牌的偏移量。

这记录在以下文档中[`StandardTokenizer`](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/analysis/standard/StandardTokenizer.html)：

*   在标点符号处拆分单词，删除标点符号。

（空格是标点符号。）

# php - 从 php 脚本执行 proc_open 以连接到 pgsql 时出错

> ID：10715457
> 
> 赞同：0
> 
> 时间：2012-05-23T07:38:16.023
> 
> 标签：php, postgresql, centos, proc-open

我的 PHP 脚本试图将 .sql 文件导入 postgres DB（Cent OS）。

要从它使用的 PHP 脚本连接数据库：

```
$sCMD = 'psql -p '.$aDSNInfo['port'].' -d '.$aDSNInfo['database'];
$aDescriptors = array(
    0 => array('pipe', 'r'),
    1 => STDOUT, 
    2 => STDERR
);
$ahPipes = null;
$hProcess = @proc_open($sCMD, $aDescriptors, $ahPipes);
if (!is_resource($hProcess)) fail('unable to start pgsql'); 
```

它向我显示错误：“无法启动 pgsql”。

当我从 proc_open 中删除 @ 符号时，它会显示错误消息....

`" proc_open() [<a href='function.proc-open'>function.proc-open</a>]: Descriptor item must be either an array or a File-Handle in <b>/home/nominati/public_html/Nominatim/utils/setup.php"`

虽然 $aDescriptors 已经是一个数组。是否有任何与用户权限相关的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:51:04.177

尝试删除标准错误：

```
$aDescriptors = array(
    0 => array('pipe', 'r'),
    1 => STDOUT
//    2 => STDERR
); 
```

我不知道为什么，但这让它可以在我的 Debian 机器上运行。

# php - 如何使用 Amazon Web Services (AWS) 同步会话？

> ID：10715461
> 
> 赞同：3
> 
> 时间：2012-05-23T07:38:25.947
> 
> 标签：php, session, amazon-ec2, amazon-web-services, amazon-elb

我们正在使用 Amazon Web Services (AWS)，并且我们有多个 Web 服务器和一个负载均衡器。Web 服务器的问题是，$_SESSION 对于每个服务器都是唯一的。我在 $_SESSION 中保留了一些关于用户的信息。

同步此信息的正确方法是什么？有什么方法可以统一保存这些会话的地方，还是我应该使用 MySQL 来存储这些数据（我不太喜欢最后一个选项）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T21:53:10.707

我认为您正在寻找的是“粘性会话”。如果我是对的，亚马逊为您提供了两种不同的选择。

负载均衡器（基于持续时间，我推荐这个）[http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html#US_EnableStickySessionsLBCookies](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html#US_EnableStickySessionsLBCookies)

以及基于应用程序的会话粘性 [http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html#US_EnableStickySessionsAppCookies](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html#US_EnableStickySessionsAppCookies)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T08:21:05.140

虽然在概念上类似于您出于某种原因试图避免使用的 MySQL 选项，但在[Amazon Web Services (AWS)](http://aws.amazon.com/)中使用的一个非常吸引人的选项是最近引入[的使用 Amazon DynamoDB 在 PHP 中进行可扩展会话处理](http://aws.typepad.com/aws/2012/04/scalable-session-handling-in-php-using-amazon-dynamodb.html)，它解决*了 PHP 中的典型会话处理不可扩展*，因此无论如何都需要某种自定义解决方案：

> 会话用于跨多个 HTTP 请求保存短期数据 [...]。**PHP 的本机会话处理程序将会话数据存储到本地文件系统；但是，这种方法在分布式 Web 应用程序中变得不可靠**。在随后的请求中，用户可能不会被路由到同一台服务器，从而导致数据被有效地遗忘。用户将被注销并感到困惑。
> 
> 为了克服这个问题，PHP 开发人员实施了**自定义解决方案，****使用数据库、共享文件系统、Memcache 服务器、防篡改 cookie 和其他存储机制**来存储用户的会话数据。[...] *[强调我的]*

根据您的用例，您可能希望相应地尝试这种可能非常快的会话存储。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:46:58.880

要添加到上述答案，您正在寻找像 DynamoDB 这样的分布式缓存，这是一项付费的亚马逊服务。它使用起来非常快速和出色，但如果您正在寻找其他一些开源替代品，您可以查看以下内存读/写选项。

1.  Memcached - 高读/写比率的理想选择。开发者社区的轻量级和大力支持。
2.  JCS - Java 缓存系统 - 非常灵活，适用于面临低读/写比率的系统。自定义复制也很棒，并且取决于粘性级别，这总是可以像 Web 应用程序的简单内存读/写一样快，因为 ELB 保持一定程度的粘性。因此，一旦会话被定向到另一个实例，只有那时会话信息才会被复制。我们使用它，到目前为止已经取得了很好的效果。
3.  EhCache - 已建立缓存框架，但其分布式缓存产品并非完全免费使用。可能是一种矫枉过正，因为它确保了在这种情况下可能并不真正需要的完整复制。

# javascript - 通过 JQuery 在选择中选择选项

> ID：10715466
> 
> 赞同：3
> 
> 时间：2012-05-23T07:38:43.937
> 
> 标签：javascript, jquery, html, html-select

我有一个包含以下选项的选择：

```
<select>
     <option value="1">A</option>
     <option value="2">B</option>
     <option value="3">C</option>
</select> 
```

我不知道值是什么，但在我的 JQuery 代码中，我想选择选项二，因为我知道文本是 B（但没有别的）。

如何做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:41:35.567

您可以使用[`:contains()`](http://api.jquery.com/contains-selector/)选择器：

```
$('option:contains("B")').prop('selected', true); 
```

或者：

```
$('option')
    .filter(function() {
        return this.text == 'B'; 
    })
    .prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:42:25.630

如果您不确定值是什么，但知道里面的文本是什么，您可以使用`:contains()`选择器获取相应的选项，获取其值，*然后*设置选择。

请注意，`:contains()`执行子字符串匹配，因此`:contains(foo)`将同时选择`<p>foo</p>`和`<p>barfoobar</p>`（正如[ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)[在评论中](https://stackoverflow.com/questions/10715466/selecting-options-in-a-select-via-jquery/10715529#comment13915710_10715529)指出的那样）。

要对选择进行更精细的控制，您需要`.filter()`我在下面提到的选项。

```
// relevant option
//     : not entirely sure if .val() will get an option's value
var _optionval = $('option:contains("B")').attr('value');

// set select value
$('select').val(_optionval); 
```

### 编辑

我根据您对杰克回答的评论分享以下内容。

`:contains()`基本上旨在对元素的内容进行匹配。没有绕过那个。

但是，您可以使用类似的东西`.filter()`来编写更复杂的代码。

```
$('option').filter(function () {

    // we want the option (or optionS) with text that starts with "foo"
    return $(this).text().indexOf('foo') === 0;

    // or maybe just something with an exact match
    //
    // return $(this).text() === 'foo';
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:45:19.483

```
<select id="select_id">
 <option value="1">A</option>
 <option value="2">B</option>
 <option value="3">C</option>
</select>

$("#select_id option").each(function (){
   if($(this).text()=='B'){
       // DO what you want to  
   }
}); 
```

此代码将在带有文本“B”的选择字段中选择您的任何选项。我想这就是你想要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:39:37.530

试试这个（确保你给你的选择一个 ID，我用过`mySelect`）：

```
$("#mySelect").val($("#mySelect:option:contains('B')").val()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T07:53:12.123

```
$('option').each(function(){
    var t=this
    if(t.text=='B'){
       t.selected='selected';
    }
});​ 
```

# visual-studio-2010 - Visual Studio 2010 突然运行慢了很多

> ID：10715469
> 
> 赞同：0
> 
> 时间：2012-05-23T07:38:52.100
> 
> 标签：visual-studio-2010

我已经在 VS2010 中从事 C# Winforms 项目大约 3 个月了，一切都运行顺利 - 直到今天！

VS2010 在编码时运行良好，在项目调试时也运行良好。然而，问题在于这两个阶段之间的过渡。每当我开始调试（或退出调试）时，VS2010 都会挂起 30 秒，并且窗口会在标题中显示“未响应”一段时间，然后再恢复工作。

其次，这是否相关我不知道，但我每天都将我的工作备份为压缩文件，并且由于我不断添加代码，备份文件的大小每天都会增加一点。然而，昨晚，在保存我的工作后，我注意到文件大小减少了大约 10%——但我的项目没有任何遗漏。

除了令人讨厌的挂断和阻碍开发之外，我担心某些东西可能会被破坏，并且害怕失去这个项目的想法。

有没有人知道可能发生了什么/导致这些挂断切换到调试模式和从调试模式切换，并且这个问题实际上已经出现“一夜之间”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:56:46.960

我在其他地方找到了这个提示，它对我有用

在运行命令中，运行以下命令：

开发环境/重置设置

这会将 IDE 重置为首次使用

# ruby-on-rails - 警告：使用 cURL 传递 xml 时无法批量分配这些受保护的属性

> ID：10715471
> 
> 赞同：0
> 
> 时间：2012-05-23T07:39:02.880
> 
> 标签：ruby-on-rails, xml

我正在使用 rails 2.3.5、ruby 1.9.3、rubygems 1.8.24 和 mac os x lion

我正在使用 cURL 传递这个文件“invoice.xml.erb”：

```
<invoice>
....
<invoice_detail>
....
</invoice_detail>
</invoice> 
```

我期望填写发票字段以及 invoice_details 字段，但是当我通过 cURL 命令时，仅填写发票字段，并发生此错误：警告：无法批量分配这些受保护的属性：inventoryDocId，invoice_detail

这是我的模型：

发票.rb

```
class Invoice < ActiveRecord::Base
set_table_name "inventoryDocHeader"
set_primary_key "inventoryDocId"
has_many :invoice_detail, :foreign_key => "inventoryDocId"
attr_accessible :inventoryDocId, :originDocId, :siteCode, :transCode, :typeCode, :docCode,    :partyTerms,:locationCode, :otherCharges, :grossPrice, :netPrice, :amountPaid, :amountPending, :amountReturned, :RSiteCode, :RInventoryDocId, :RDocCode, :ROriginDocId, :batchCode, :partyCharges, :partyShipmentTermsText, :estimateVolume, :originCountryId, :consigneeName, :consigneeAddress1, :consigneeAddress2, :consigneeAddress3, :notifyPartyName, :notifyPartyAddress1, :notifyPartyAddress2, :notifyPartyAddress3

 end 
```

invoice_detail.rb

```
class InvoiceDetail < ActiveRecord::Base
set_table_name "inventoryDocDetail"
belongs_to :invoice, :foreign_key => "inventoryDocId"
attr_accessible :inventoryDocId, :lineNumber, :parentLineNumber, :productCode,   :actualQuantity, :unitCode, :contentQuantity, :cost, :price, :commission, :factorRate, :referenceLineNumber
end 
```

欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:47:27.297

`:invoice_detail_attributes`对于第一个错误，您必须添加到 attr_accessible 命令。对于第二个，您是从 Invoice 还是 InvoiceDetails 模型中获取的？

# c# - C#中的运算符重载

> ID：10715478
> 
> 赞同：0
> 
> 时间：2012-05-23T07:39:48.107
> 
> 标签：c#

```
 [Serializable]
        public class ComplexArray
        {
            #region Attributes

            /// <summary>
            /// Array Size
            /// </summary>
            protected int m_iSize;

            /// <summary>
            /// Real part of the data
            /// </summary>
            protected double[] m_dReal;

            /// <summary>
            /// Imaginary part of the data
            /// </summary>
            protected double[] m_dImag;

            #region Construction

            /// <summary>
            /// Default constructor
            /// </summary>
            public ComplexArray()
            {
            }

            public override bool Equals(object o)
            {
                if (this == (ComplexArray)o)
                    return true;
                else
                    return false;
            }

            public static bool operator ==(ComplexArray src1, ComplexArray src2)
            {
                if (src1.m_iSize != src2.m_iSize)
                    return false;

                for (int ii = 0; ii < src1.m_iSize; ii++)
                {
                    if (src1.Real[ii] != src2.Real[ii])
                        return false;
                    if (src1.Imag[ii] != src2.Imag[ii])
                        return false;
                }

                return true;
            }

            public static bool operator !=(ComplexArray src1, ComplexArray src2)
            {

                if (src1 == src2)
                    return false;
                else
                    return true;
            }

    } 
```

我创建了一个名为复数数组的类，该类的目的是保存实数和虚数，并且不同的运算符已被重载，例如 +,*,!=,==

假设某个函数返回这个类的实例。

```
ComplexArray array = GetValue(); 
```

我想检查引用是否有效...

```
 if(array != null)
    {
      //proceed further....
    } 
```

问题：当根据空值检查该值时，会发生异常，因为内部 != 重载函数调用 ==。

运算符重载时如何避免这种情况？或者如何使运算符 != 或 == 检查空值并返回正确的值（真或假）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:24:18.933

如果您可以针对 .NET Framework 4.0，[System.Numerics.Complex](http://msdn.microsoft.com/en-us/library/system.numerics.complex.aspx)看起来就像您需要的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:38:13.987

在`==`和`!=`重载的运算符（在最顶部）内放置以下内容：

```
if (src1 == null || src2 == null)
    return false; 
```

顺便说一句，我发现你的复数实现有点差。您可以使用一些现成的示例，或者至少通读一遍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T10:49:51.690

这可以通过以下代码完成：

```
public override bool Equals(object obj)
{
    var other = obj as ComplexArray;

    if(ReferenceEquals(other, null))
    {
        return false;
    }

    if(ReferenceEquals(this, other)
    {
        return true;
    }

    // ToDo: Do all other comparision beyond reference comparision.
} 
```

同样在 == 运算符中，您必须检查双方：

```
public static bool operator ==(ComplexArray src1, ComplexArray src2)
{
    if(ReferenceEquals(src1, null)
       || ReferenceEquals(src2, null))
    {
        return ReferenceEquals(src1, src2);
    }

    return src1.Equals(src2);
}

public static bool operator !=(ComplexArray src1, ComplexArray src2)
{
    return !(src1 == src2);
} 
```

并且不要忘记，如果您覆盖，`Equals()`您还必须覆盖`GetHashCode()`. [在 SO 上也可以找到](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)一个很好的做事模式。

# c# - 从 URL 获取 html 版本

> ID：10715479
> 
> 赞同：0
> 
> 时间：2012-05-23T07:39:53.650
> 
> 标签：c#, asp.net, .net, html

例如，我有这个 URL `www.pawgoes.nl`：。如果我查看页面源，那么我可以看到这个网站有 version `XHTML 1.0 Transitional`。

我的问题是，.NET 中是否有库或标准功能以编程方式为我提供给定 URL 的 html 版本？因为我有一个庞大的 URL 列表，我需要知道所有这些 URL 的 HTMl 版本

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:34:48.040

使用下面的代码示例，您将获得 doctype，您可以从中提取版本。

```
HtmlWeb webGet = new HtmlWeb();
HtmlDocument document = webGet.Load("http://www.pawgoes.nl/");
string doctype = document.DocumentNode.SelectSingleNode("//comment()").InnerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:40:28.583

不，但这对于自己实现是微不足道的。

使用[WebClient.DownloadString()](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)和可能的[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。

# .net - 使用 DrawImage 方法的空白屏幕

> ID：10715485
> 
> 赞同：2
> 
> 时间：2012-05-23T07:40:14.547
> 
> 标签：.net, wpf, image, drawing, drawimage

我必须使用[DrawingContext.DrawImage](http://msdn.microsoft.com/en-us/library/ms606804%28v=vs.90%29.aspx)方法绘制位图图像。

使用下面的代码一切正常：

```
BitmapImage myImage = new BitmapImage();
myImage.BeginInit();
myImage.UriSource = new Uri("image.png", UriKind.Relative);
myImage.EndInit();

Rect area = new Rect(new Size(myImage.PixelWidth, myImage.PixelHeight));
DrawingVisual myVisual = new DrawingVisual();

using (DrawingContext context = myVisual.RenderOpen())
{ context.DrawImage(myImage, area); } 
```

但前提是图像不超过2Mb左右，即面积（`myImage.PixelWidth x myImage.PixelHeight`）不大于10000x10000。在这种情况下，屏幕保持空白并且没有抛出任何异常（所以我无法判断是否有错误）。

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:11:38.580

渲染它们时，看起来更大的图像尚未加载。尝试以下方法加载位图：

```
BitmapSource myImage = BitmapFrame.Create(
    new Uri("image.png"),
    BitmapCreateOptions.None,
    BitmapCacheOption.OnLoad); 
```

或者这种绝望的尝试：

```
using (Stream fileStream = new FileStream("image.png", FileMode.Open))
{
    BitmapSource myImage = BitmapFrame.Create(
        fileStream, BitmapCreateOptions.None, BitmapCacheOption.OnLoad);
} 
```

# java - 使用 ftp 和 java 解压文件

> ID：10715492
> 
> 赞同：1
> 
> 时间：2012-05-23T07:40:39.333
> 
> 标签：java, ftp, zip

我想使用`FTP`协议将 zip 文件上传到服务器。
1\. 使用 java 压缩文件的最佳方式是什么？
2.稍后我想在**服务器**中解压缩文件。我怎么能用`FTP`and做到这一点`java`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:45:08.390

类`GZipStream`（[GZipOutputStream](http://download.java.net/jdk7/archive/b123/docs/api/java/util/zip/GZIPOutputStream.html)和[GZipInputStream](http://docs.oracle.com/javase/7/docs/api/java/util/zip/GZIPInputStream.html)）应该负责压缩部分。您可以在[这里](http://www.exampledepot.com/egs/java.util.zip/CompressFile.html)查看如何压缩文件以及解压缩文件的[本](http://www.exampledepot.com/egs/java.util.zip/UncompressFile.html)教程。要通过 FTP 上传文件，您可以使用 Apache 的[FTPClient](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:49:14.380

`ZIPOutputStream`您可以使用Java 支持的方式创建 zip 文件。

看看这里 [http://www.java-examples.com/create-zip-file-directory-using-zipoutputstream-example](http://www.java-examples.com/create-zip-file-directory-using-zipoutputstream-example)

稍后上传文件后，您可以使用`ZIPInputStream`.

[http://www.kodejava.org/examples/334.html](http://www.kodejava.org/examples/334.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:47:23.400

Appache Commons 中的 FTPClient 可以帮助您处理 ftp。对于压缩，请查看 java.util.zip。我使用过 Zip I\O 类，发现非常好用

# sql-server - varbinary 和 FOR XML 子句

> ID：10715493
> 
> 赞同：0
> 
> 时间：2012-05-23T07:40:42.917
> 
> 标签：sql-server, xml, tsql, varbinary

如何在 xml 消息中存储 COLUMNS_UPDATED() 返回的值？我想稍后将它返回到 varbinary(max) 变量并执行一些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:22:02.917

将 varbinary 值添加到 XML 类型将其存储为 base64 编码，并且提取该值已经知道如何对其进行解码：

```
declare @v varbinary(1000) = 0x0102030405;
declare @x xml;
set @x = (select @v as value for xml path ('message'), type);
select @x, @x.value(N'(/message/value)[1]', N'varbinary(1000)'); 
```

# jquery - jquery在页面加载上不起作用

> ID：10715498
> 
> 赞同：1
> 
> 时间：2012-05-23T07:40:48.530
> 
> 标签：jquery, asp.net-mvc, fullcalendar, asp.net-mvc-4

我目前正在使用 asp.net mvc 4，并且正在尝试将 fullcalendar 添加到我的项目中。[完整日历可在此处找到： http](http://arshaw.com/fullcalendar/) ://arshaw.com/fullcalendar/

当我单击我的操作链接时，我的日历不会加载。我似乎无法找到为什么它不起作用。

这是代码：

CSHTML

```
@section JavaScript
{
    <link href="@Url.Content("/Content/fullcalendar.css") " rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="@Url.Content("/Scripts/jquery-ui-1.8.11.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("/Scripts/fullcalendar.js")"></script>
    @*    <script type="text/javascript" src="@Url.Content("/Scripts/fullcalendar.min.js")"></script>*@
}
@{
    ViewBag.Title = "Tijdregistratie";
}
<script type='text/javascript'>
    $(document).ready(function () {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $('#calendar').fullCalendar({
            header: {
                left: 'prev',
                center: 'title',
                right: 'next'
            },
            editable: true,
            events: "/TijdRegistratie/GetGeplandeTaken/"
        });
    });
</script>
<div id='calendar'>
</div> 
```

控制器

```
private TijdRegistratieService.ITijdRegistratieService _tijdRegistratieClient;

        public TijdRegistratieController()
        {
            _tijdRegistratieClient = new TijdRegistratieService.TijdRegistratieServiceClient();
        }

        public ActionResult TijdRegistratieOverzicht()
        {

            return View("TijdRegistratieOverzicht");
        }

        public JsonResult GetGeplandeTaken(double start, double end)
        {
            String beginDatum = ConvertFromUnixTimestamp(start).ToString();
            String eindDatum = ConvertFromUnixTimestamp(end).ToString();

            int psnID = (int)HttpContext.Session["userPSNID"];

            var geplandeTaken = _tijdRegistratieClient.GetGeregistreerdeTaken(1, beginDatum, eindDatum);

            var eventList = from e in geplandeTaken
                            select new
                            {
                                id = e.taakID,
                                title = e.BeginUur.Substring(0, e.BeginUur.Length - 3) + " - " + e.EindUur.Substring(0, e.EindUur.Length - 3),
                                start = string.Format("{0:u}", e.BeginDatum),
                                end = string.Format("{0:u}", e.EindDatum)
                                //allDay = false
                            };

            var rows = eventList.ToArray();

            return Json(rows, JsonRequestBehavior.AllowGet);
        }

        private static DateTime ConvertFromUnixTimestamp(double timestamp)
        {
            var origin = new DateTime(1970, 1, 1, 0, 0, 0, 0);

            return origin.AddSeconds(timestamp);
        } 
```

Layout.cshtml（每页自动加载）

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <meta name="viewport" content="width=device-width" />
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="~/Content/autocomplete.css" type="text/css" media="all" />
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script>
    <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.css" />
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i8n/jquery.mobile.datebox.i8n.en.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.js"></script>
    <script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/i8n/jquery.mobile.datebox.i8n.en.js"></script>

    @RenderSection("JavaScript", required: false)
    <script> 
```

所以我目前想知道如何解决这个问题。这是我使用 JQuery 的第二个项目，如果我遗漏了一些明显的东西，请原谅我。

编辑：在 Firefox 中运行时，我在 firebug 中收到以下错误：fullCalendar 不是函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:44:29.250

=)))))

你没有包括“jquery.js”

[从http://jquery.com](http://jquery.com)下载最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:49:29.737

您忘记包含 jQuery 库，检查您链接的演示页面，它包括：

```
<script type='text/javascript' src='/js/fullcalendar-1.5.3/jquery/jquery-1.7.1.min.js'></script> 
```

而你的例子没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:52:16.113

乍一看，您不需要将 2 个参数传递给您的方法吗？

GetGeplandeTaken（**双开始，双结束**）

您的方法是从视图中调用的？如果在 method 上设置断点，那么该参数有什么值吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T13:43:26.157

您必须删除：

```
@section JavaScript
{
    <link href="@Url.Content("/Content/fullcalendar.css") " rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="@Url.Content("/Scripts/jquery-ui-1.8.11.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("/Scripts/fullcalendar.js")"></script>
    @*    <script type="text/javascript" src="@Url.Content("/Scripts/fullcalendar.min.js")"></script>*@
} 
```

从您的 cshtml 页面并将它们添加到您的主加载页面。现在它将加载到每个页面上，并且可以正常工作。

# wordpress - Wordpress OAuth 我无法获取访问令牌

> ID：10715501
> 
> 赞同：1
> 
> 时间：2012-05-23T07:40:57.690
> 
> 标签：wordpress, oauth

我所做的：

1 我要去授权

[https://public-api.wordpress.com/oauth2/authorize?client_id=256&response_type=code&redirect_uri=http%3a%2f%2faltinorge.com%3a333%2findex.fast%3faction%3dwordpress](https://public-api.wordpress.com/oauth2/authorize?client_id=256&response_type=code&redirect_uri=http%3a%2f%2faltinorge.com%3a333%2findex.fast%3faction%3dwordpress)

并获得回调和代码

2 现在我必须获取访问令牌

[https://public-api.wordpress.com/oauth2/token?client_id=256&redirect_uri=http%3a%2f%2faltinorge.com%3a333%2findex.fast%3faction%3dwordpress&client_secret=KH78PsklKI4uACufFdkSA3DyuknaYshQPxmAbROhRFXvLN71B6S4xhS9y3IMQgrant4St&pv_typecodeauthorization_6y3IMqgrant4St&](https://public-api.wordpress.com/oauth2/token?client_id=256&redirect_uri=http%3a%2f%2faltinorge.com%3a333%2findex.fast%3faction%3dwordpress&client_secret=KH78PsklKI4uACufFdkSA3DyuknaYshQPxmAbROhRFXvLN71B6S4xhS9y3IMq4St&code=Cber6PVJVe&grant_type=authorization_code)

但是得到（405）方法不允许

* * *

你能帮助我吗？

谢谢

# php - 如何在 wordpress 主题的不同页面上显示不同的徽标？

> ID：10715502
> 
> 赞同：2
> 
> 时间：2012-05-23T07:40:58.420
> 
> 标签：php, css, wordpress, themes, wordpress-theming

好吧，这是在我当前使用的 wordpress 主题上显示标题部分的代码。

```
<div id="site-branding" class="clearfix">
        <?php
        $logo = isset($options['logo'])? $options['logo']: '';
        if ($logo == ""){
            $hidetitle = $options['hide_title'];
            if ($hidetitle == "No") {

                if(!is_home() || !is_front_page()) { ?>
                    <div class="site-title"><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>"><?php bloginfo('name'); ?></a></div>
                    <div class="site-description"><?php bloginfo('description'); ?></div>
                <?php } else { ?>
                    <h1 class="site-title"><a href="<?php echo esc_url( home_url( '/' ) ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>"><?php bloginfo('name'); ?></a></h1>
                    <div class="site-description"><?php bloginfo('description'); ?></div>

            <?php } }
        } else {
            echo '<div class="site-logo"><a href="'. esc_url( home_url( '/' ) ) .'">';
            echo '<img title="'. get_bloginfo('name') .'" src="' . $logo .'" />';
            echo '</a></div>';
        } ?>
    </div><!-- end #site-branding --> 
```

此代码的第一部分检查徽标的存在。如果徽标不存在，它将仅显示主题的名称和描述，前提是未在主题选项中选中隐藏。它将在主页/首页上设置名称和描述的样式，而在其他页面上使用不同的样式。但是，如果存在徽标，它将在所有页面上显示徽标。

现在我想要实现的是在 Front/Home 页面上以不同的方式（使用 CSS）对**LOGO**进行样式设置，而在其他页面上，我想为 logo 添加一些额外的 css 类。

我尝试在上述代码的第二部分中使用 elseif 语句，但无法获得所需的结果。

请建议我如何正确地做到这一点。

更新：因为我无法发布自己问题的答案，所以我在这里发布。好吧，我在删除了一些 PHP 关闭元素后使用了这段代码，它就像魅力一样。我再次在这里发布它只是为了确保没有错误。

```
if(is_home() || is_front_page()) {
        echo '<h1 class="site-logo"><a href="'. esc_url( home_url( '/' ) ) .'">';
        echo '<img calss="mylogo1" title="'. get_bloginfo('name') .'" src="' . $logo .'" />';
        echo '</a></h1>';
             } else {
        echo '<div class="site-logo"><a href="'. esc_url( home_url( '/' ) ) .'">';
        echo '<img calss="mylogo2" title="'. get_bloginfo('name') .'" src="' . $logo .'" />';
        echo '</a></div>';
        } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:28:02.477

```
if(!is_home() || !is_front_page()) { ?>
    echo '<div class="site-logo"><a href="'. esc_url( home_url( '/' ) ) .'">';
    echo '<img calss="mylogo1" title="'. get_bloginfo('name') .'" src="' . $logo .'" />';
    echo '</a></div>';
<?php } else { ?>
    echo '<div class="site-logo"><a href="'. esc_url( home_url( '/' ) ) .'">';
    echo '<img calss="mylogo2" title="'. get_bloginfo('name') .'" src="' . $logo .'" />';
    echo '</a></div>';
<?php } ?> 
```

我们与您之前使用的相同，为您的每个条件设置不同的类（即 mylogo1/mylogo2）。

# android - 安卓：NeighboringCellInfo

> ID：10715503
> 
> 赞同：0
> 
> 时间：2012-05-23T07:41:02.277
> 
> 标签：android, telephony, signal-strength

Android API 上的 NeighboringCellInfo()，我想知道这个函数返回所有邻居小区吗？结果之一是我们的设备连接的当前单元格？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:12:43.670

是的，它应该。

但我从来没有找到一个设备。如果您发现任何带有任何 Android 操作系统版本的 GSM 设备确实报告了至少一个相邻小区，请在此处报告。谢谢！

您应该能够使用以下代码来获取它们：

```
TelephonyManager tm = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
List<NeighboringCellInfo> neighbours = tm.getNeighboringCellInfo(); 
```

您的 AndroidManidfest.xml 中需要以下权限：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_UPDATES"/> 
```

由于我从未在列表中看到任何结果，因此我不知道当前连接的单元格是否包括在内。我猜它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:45:20.213

是的.. 如@ [d.android.com 所见](http://developer.android.com/reference/android/telephony/NeighboringCellInfo.html)；）

[在这里](https://github.com/android/platform_frameworks_base/blob/master/telephony/java/android/telephony/NeighboringCellInfo.java)，您甚至可以进行更深入的了解。

干杯

# visual-studio-2010 - 如何卸载 nuget 并清除损坏的条目？

> ID：10715504
> 
> 赞同：0
> 
> 时间：2012-05-23T07:41:02.643
> 
> 标签：visual-studio-2010, ajaxcontroltoolkit, nuget

我想通过 nuget 安装 AjaxControlToolkit。但 NuGet 包管理器 GUI 显示错误，如下所示。

![在此处输入图像描述](../Images/7eff306acd5b4541dedf1aab19bac885.png)

即使我尝试安装 AjaxControlToolkit 的新副本，NuGet 也会显示消息：

安装或卸载 nuget 包失败。

我检查了我的项目，没有找到任何 nuget 文件。损坏的条目在哪里以及如何修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:01:54.697

我从来没有遇到过这个特定的错误，但我认为它要么是格式错误的 packages.config（它是一个 XML），要么是 .nupkg 文件已损坏。

您目前是否安装了软件包？- 删除解决方案和 packages.config 中的“packages”文件夹（将其保留在其他地方以供参考，这是已安装软件包的提升），然后重新安装您的软件包。让我知道情况如何。

# delphi - 更改 TCreateParams.WinClassName 或如何找到另一个自己的应用程序的表单句柄是否安全？

> ID：10715507
> 
> 赞同：3
> 
> 时间：2012-05-23T07:41:12.977
> 
> 标签：delphi, winapi, classname, findwindow, createparams

我有两个应用程序，第一个需要从第二个（也是我自己的）但不同的应用程序（不是实例，而是不同的应用程序）中找到表单的句柄。我见过一些技术，但我想知道我想做的事情是否安全，或者什么是有效的方法。

我正在考虑使用`FindWindow`可以传递类名的函数，所以如果我将表单中的`WinClassName`成员更改`CreateParams`为某个唯一值（例如 GUID），那么我将很容易找到这个大窗口机会是我的应用程序中的一个。

需要查找其表格的应用程序：

```
procedure TForm1.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.WinClassName := '{1EE65C52-2F4B-4600-AAE2-079C29AD2220}';
end; 
```

另一个需要从前一个应用程序中查找表单的应用程序：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  FormHandle: HWND;
begin
  FormHandle := FindWindow('{1EE65C52-2F4B-4600-AAE2-079C29AD2220}', nil);
  ShowMessage(IntToStr(FormHandle));
end; 
```

我的问题是：

将此成员更改`TCreateParams`为我想要的任何内容是否安全，或者在某些方面不安全？或者您将如何从您自己的另一个应用程序（不是应用程序实例，而是您自己的另一个应用程序）中查找表单句柄？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T09:48:29.550

是的，这样做是完全安全的。当然，每个不同的类都必须有一个唯一的名称，但要确保是这种情况取决于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T21:58:57.093

与其在两个应用程序中使用相同的类名，不如`TForm1`养成将默认类名更改为更有意义的名称的习惯，例如`TApp1MainForm`和`TApp2MainForm`. 默认情况下， VCL 会自动分配一个表单`ClassName`，`TCreateParams.WinClassName`在`TWinControl.CreateParams()`. 如果您`Name`在设计时更改对象检查器中的表单属性，它会`ClassName`为您更新，那么您不必`TCreateParams.WinClassName`手动更改值。

# extjs - Ext JS 4 无线电组检查事件

> ID：10715511
> 
> 赞同：3
> 
> 时间：2012-05-23T07:41:28.647
> 
> 标签：extjs, radio-button, radio-group, ext4

我正在使用 FormPanel 中的 xtype 在 extJS 4 中创建一个 radioGroup。我试图在检查收音机后立即启用/禁用文本字段。

```
{
xtype: 'radiogroup',
fieldLabel: 'Enable / Disable ',
columns: 2,
vertical: true,
items: [
     {boxLabel: 'Enable', name: 'formtype', inputValue: '1'},
     {boxLabel: 'Disable', name: 'formtype', inputValue:'2',checked:true},
    ]
 } 
```

我很困惑在哪里添加检查/单击事件的侦听器。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:31:30.703

您必须处理每个单选按钮上的“更改”事件。当单选按钮更改（选中）时，启用/禁用文本字段。

举个例子：

```
Ext.create ('Ext.container.Container', {
    renderTo: Ext.getBody () ,
    items: [{
        xtype: 'textfield' ,
        id: 'tf' ,
        disabled: true ,
        fieldLabel: 'My Text'
    } , {
        xtype: 'radiogroup',
        fieldLabel: 'Enable / Disable ',
        columns: 2,
        vertical: true,
        items: [{
            boxLabel: 'Enable',
            name: 'formtype' , 
            inputValue: '1' ,
            listeners: {
                change: function (cb, nv, ov) {
                    if (nv) Ext.getCmp('tf').enable ();
                }
            }
        } , {
            boxLabel: 'Disable', 
            name: 'formtype', 
            inputValue:'2',
            checked: true ,
            listeners: {
                change: function (cb, nv, ov) {
                    if (nv) Ext.getCmp('tf').disable ();
                }
            }
        }]
    }]
}); 
```

再见

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:20:27.577

如果您在广播组本身（而不是在每个按钮上）设置监听器更改事件，您只需处理一个事件。您的侦听器/处理程序将被调用和传递`newVal`，并且`oldVal`. 然后，您可以将 获取`newVal`作为选择的值。

# python - 根据熊猫中的另一个列值有条件地填充列值

> ID：10715519
> 
> 赞同：59
> 
> 时间：2012-05-23T07:41:57.010
> 
> 标签：python, python-3.x, pandas, dataframe, numpy

我有`DataFrame`几列。一列包含使用货币的符号，例如欧元或美元符号。另一列包含预算值。因此，例如，在一行中，它可能意味着 5000 欧元的预算，而在下一行中，它可能意味着 2000 美元的预算。

在熊猫中，我想在我的 DataFrame 中添加一个额外的列，以欧元规范化预算。所以基本上，对于每一行，新列中的值应该是预算列中的值 * 1 如果货币列中的符号是欧元符号，新列中的值应该是预算列的值 *如果货币列中的符号是美元符号，则为 0.78125。

我知道如何添加一列，用值填充它，从另一列复制值等，但不知道如何根据另一列的值有条件地填充新列。

有什么建议么？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-05-23T19:05:57.160

你可能想做

```
df['Normalized'] = np.where(df['Currency'] == '$', df['Budget'] * 0.78125, df['Budget']) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-02-23T14:05:29.237

通过替代样式获得的类似结果可能是编写一个函数，该函数在一行上执行您想要的操作，使用`row['fieldname']`语法访问单个值/列，然后对其执行[DataFrame.apply](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html)方法

这与此处链接的问题的答案相呼应：[pandas create new column based on values from other columns](https://stackoverflow.com/questions/26886653/pandas-create-new-column-based-on-values-from-other-columns/26887820#26887820)

```
def normalise_row(row):
    if row['Currency'] == '$'
    ...
    ...
    ...
    return result

df['Normalized'] = df.apply(lambda row : normalise_row(row), axis=1) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2021-01-27T22:08:13.323

不需要额外导入的选项`numpy`：

```
df['Normalized'] = df['Budget'].where(df['Currency']=='$', df['Budget'] * 0.78125) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-11-20T03:35:29.470

将 Tom Kimber 的建议更进一步，您可以使用函数字典为您的函数设置各种条件。该解决方案正在扩大问题的范围。

我正在使用来自个人应用程序的示例。

```
# write the dictionary

def applyCalculateSpend (df_name, cost_method_col, metric_col, rate_col, total_planned_col):
    calculations = {
            'CPMV'  : df_name[metric_col] / 1000 * df_name[rate_col],
            'Free'  : 0
            }
    df_method = df_name[cost_method_col]
    return calculations.get(df_method, "not in dict")

# call the function inside a lambda

test_df['spend'] = test_df.apply(lambda row: applyCalculateSpend(
row,
cost_method_col='cost method',
metric_col='metric',
rate_col='rate',
total_planned_col='total planned'), axis = 1)

  cost method  metric  rate  total planned  spend
0        CPMV    2000   100           1000  200.0
1        CPMV    4000   100           1000  400.0
4        Free       1     2              3    0.0 
```

# wordpress - 在不同的主机和域之间移动 Wordpress

> ID：10715520
> 
> 赞同：0
> 
> 时间：2012-05-23T07:41:58.220
> 
> 标签：wordpress

[我目前在http://domain1.com/blog](http://domain1.com/blog)上有一个 wordpress 博客

我想把它移到[http://domain2.com](http://domain2.com)

[http://domain1.com/blog](http://domain1.com/blog)和[http://domain2.com](http://domain2.com)托管在两个不同的主机上。

这是我到目前为止所做的：

1.  [在http://domain2.com](http://domain2.com)上安装了 Wordpress（使用幻想）
2.  [使用 FTP 下载http://domain1.com/blog](http://domain1.com/blog)的 wp-content 文件夹并上传到[http://domain2.com](http://domain2.com)
3.  [导出http://domain1.com/blog](http://domain1.com/blog)的 sql 数据库（来自 phpmyadmin）
4.  将所有出现的[http://domain1.com/blog](http://domain1.com/blog)替换为[http://domain2.com](http://domain2.com)（使用 notepad++）
5.  将此 sql 文件导入到[http://domain2.com](http://domain2.com)（使用 phpmyadmin）

现在的问题是...

我无法使用安装时正常工作的用户名和密码登录[http://domain2.com/wp-admin/ 。](http://domain2.com/wp-admin/)

另一个问题是当我将浏览器指向[http://domain2.com](http://domain2.com)时，它只显示一个空白页面。发送了一个 GET 请求（如在 Firebug 中所见），但我只看到一个空白的 HTML 响应。

知道我做错了什么吗？我愿意重新做一遍，只要有人能指导。请？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:23:19.997

在我做同样的事情之前，我也面临同样的问题。

1.  转到主题管理器设置默认主题并检查默认主题是否正常工作。

2.  如果是，那么一切都很好，现在回到你的主题并测试它是否有效。

3.  如果有效，那么这就是您在不同主机和域之间移动 Wordpress 时的技巧。

如果没有，那么可能是您的主题问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:54:46.027

## .htaccess

如果您使用漂亮的永久链接，那么在您的博客根文件夹的文件中也会引用您的 URL 结构`.htaccess`（该文件是隐藏的，因此您可能需要告诉您的文件 GUI 显示它）。

这可能是这样的：

```
# 开始 WordPress

重写引擎开启
重写基础/博客/
重写规则 ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
重写规则。/blog/index.php [L]

# 结束 WordPress

```

您可以`/blog`在那里看到两次，它负责处理子文件夹中的博客 URL。尝试将其更改`/`为您的新设置。

## 盐和钥匙

中有一些安全密钥和盐`wp-config.php`，它们看起来像`define('AUTH_KEY', 'KJnvuwi846%84');`

这些用于密码加密和其他事情。如果您`wp-config.php`不是从旧博客复制的，而是在安装时重新生成的，则很有可能您的密码盐已更改。这将使您的密码无效，这可能是您无法登录的原因。

复制旧的所有 *KEY 和 *SALT 值`wp-config.php`以解决此问题。

# php - 使用 php dom 设置 css 样式

> ID：10715521
> 
> 赞同：1
> 
> 时间：2012-05-23T07:41:59.233
> 
> 标签：php, dom

我正在考虑使用[php dom](http://php.net/manual/en/book.dom.php)类构建我的网站。假设我已经有一个带有正文的文档，如果我像这样向正文添加一个 div：

```
$div = $document->createElement('div');
$document->getElementsByTagName('body')->item(0)->appendChild($div); 
```

有没有办法为这个有多个条目的元素设置一个“样式”属性？例如，最终看起来像这样：

```
<div style="top: 40px; left: 60px;"></div> 
```

我知道我可以这样做：

```
$div->setAttribute('style', 'top: 40px; left: 60px;'); 
```

但我希望无需通过正则表达式解析值即可访问样式的各个方面。这是因为我想在代码的其他部分轻松访问 40px 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:47:40.777

[XML 属性用于将名称-值对与元素相关联。](http://www.w3.org/TR/REC-xml/#NT-Attribute)DOM 不（也不能）知道您将 CSS 放在那里。这是因为 DOM 用于任意 XML 应用程序，而不仅仅是用于 XHTML。CSS 是一个不同的域。所以你必须手动解析它。

或者，看看[http://querypath.org](http://querypath.org)。它[支持直接添加和读取样式属性](http://api.querypath.org/docs/class_query_path.html#afaf2edbbd3305e34939c56d7a3cc8f10)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:48:12.260

像这样的结构（自己写的）怎么样：

```
$div = new Div();
$div->addStyle('top:', '40px;');
$div->addStyle('left:', '60px;');
print_r($div->Style)//for access of all style elements in case you need to modify them
$document->addElement($div);
//in case you need to modify an already added element, just
$document->Elements[17]; //or something similar 
```

希望你会发现一些有用的东西:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-17T09:19:39.980

使用 setAttribute 为当前元素设置一个类并将自定义 css 添加到 style.css 文件

# perl - Perl 和编译时模块加载

> ID：10715523
> 
> 赞同：3
> 
> 时间：2012-05-23T07:42:08.017
> 
> 标签：perl, module

可能是一个奇怪的问题，但请耐心等待（-：当 Perl 使用 'use' 加载模块时，这是一个编译时指令，假设这个模块在这个模块的任何地方都没有使用 'require'，我可以启动一个脚本吗？哪个“使用”该模块，而脚本破坏了从硬盘驱动器中删除模块并确保模块全部加载到内存中？（可以调用它的所有方法等......）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:08:06.593

是的你可以。Perl 在运行之前将源代码编译成内部数据结构（[解析树](http://oreilly.com/catalog/pperl3/chapter/ch18.html)），并且在运行时它不适用于 .pm 文件。因此，在脚本编译并成功启动后，从磁盘中删除模块是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:48:47.583

这适用于在启动时完全加载的简单模块。但是请注意，许多模块使用`AUTOLOAD`功能来延迟加载它们的重部分，直到真正需要某些特定功能。然后，这些模块可能会从几乎任何地方提取所需的源——按功能文件、它们自己的`__DATA__`部分等预先分割。尝试加载您已经删除的文件自然会失败。然而，访问 own`__DATA__`仍然可以工作（尽管我不能确定是因为它被加载到内存中还是因为 perl 持有脚本的打开句柄，防止它在完成之前完全消失）。

# iphone - 根据其内容计算 UIWebView 高度

> ID：10715524
> 
> 赞同：0
> 
> 时间：2012-05-23T07:42:14.087
> 
> 标签：iphone, uitableview, uiwebview

我有一个名为 的类`Announcement`，它有一个`Title`( `NSString`)、一个`Publishing Date`( `NSString`) 和一个`Body`(`NSString`带有 HTML 内容)。

我想以与电子邮件应用程序类似的方式显示它。当您阅读电子邮件时，您会看到前三个“行”（发件人、收件人、标题[日期]），然后是电子邮件的内容。

我只想创建“标题[日期]”行，然后是正文。我想它是一个`UITableView`在第一个单元格上具有 my`Title`和在第二个单元格上的 a `UIWebView`。

但似乎单元格的高度正好是`UIWebView`，所以我的问题是：

如何`UIWebView`根据 my计算 my 的高度`Body`？因为基本上当你垂直滚动时，你滚动整个`UITableView`，当你水平滚动时，你只滚动`UIWebView`内容。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:01:50.247

在 webview 委托方法中，只需尝试以下代码：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView{
    [webviewTopicDesc sizeToFit];
    [webviewTopicDesc setFrame:CGRectMake(webviewTopicDesc.frame.origin.x, webviewTopicDesc.frame.origin.y, 300.0, webviewTopicDesc.frame.size.height)];
} 
```

在此之前，将 webview 高度设为 5.0。

希望对您有所帮助。

在这里，您可以根据字符串获取动态高度。

```
-(CGSize)getDynemicHeight:(int)pintFixWidth :(NSString *)pstrText
{
CGSize maximumSize=CGSizeMake(pintFixWidth, g_Max_Width);
UIFont *myFont = [UIFont fontWithName:g_Default_Font_Name size:g_Default_Font_Size];// font used for label
myFont=[UIFont boldSystemFontOfSize:g_Default_Font_Size];

CGSize sizeS = [pstrText sizeWithFont:myFont 
                   constrainedToSize:maximumSize 
                       lineBreakMode:UILineBreakModeWordWrap];

sizeS.height=sizeS.height+39;

return sizeS;
} 
```

在这里，您必须使用字体样式固定宽度和字体大小。

可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:00:13.913

有几种方法可以找到 a`UIWebView`内容的高度。

以下是一些开始的指针：

[如何在可变高度 UITableView 内根据内容确定 UIWebView 高度？](https://stackoverflow.com/questions/745160/how-to-determine-uiwebview-height-based-on-content-within-a-variable-height-uit)

[如何确定 UIWebView 的内容大小？](https://stackoverflow.com/questions/3936041/how-to-determine-the-content-size-of-a-uiwebview)

[iPhone - 获取 UIWebView 的内容大小](https://stackoverflow.com/questions/10299023/iphone-get-the-content-size-of-uiwebview)

请注意，`UIWebView`在 a中使用 a`UITableView`不一定是一个好主意，特别是如果您`Announcements`在同一个`UITableView`. 如果您只显示一个 Announcement per `UITableView`，您应该能够摆脱它，但对于有很多单元格要滚动的表格，在单元格中使用 webviews 可能会导致性能问题。

Apple 还建议不要使用嵌入`UIWebViews`/ `UITableViews`/ `UIScrollViews`。

从[UIWebView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)：

> **重要提示**：您不应该在 UIScrollView 对象中嵌入 UIWebView 或 UITableView 对象。如果这样做，可能会导致意外行为，因为两个对象的触摸事件可能会混淆并错误处理。

我的 2 美分 :)

# c - 这个 C 声明代码有什么问题？

> ID：10715525
> 
> 赞同：1
> 
> 时间：2012-05-23T07:42:18.717
> 
> 标签：c, windows, console, tui

```
#include <stdlib.h>
#include <Windows.h>
#include <Tchar.h>

HANDLE wHnd;    // Handle to write to the console.
HANDLE rHnd;    // Handle to read from the console.

int _tmain(int argc, _TCHAR* argv[]) {

    // Set up the handles for reading/writing:
    wHnd = GetStdHandle(STD_OUTPUT_HANDLE);
    rHnd = GetStdHandle(STD_INPUT_HANDLE);

    // Change the window title:
    SetConsoleTitle(TEXT("Win32 Console Control Demo"));

    // Set up the required window size:
    SMALL_RECT windowSize = {0, 0, 79, 49};

    // Change the console window size:
    SetConsoleWindowInfo(wHnd, TRUE, &windowSize);

} 
```

报告了一些这样的错误：

```
'SMALL_RECT' : illegal use of this type as an expression  
missing ';' before identifier 'windowSize' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:50:02.540

您正在使用仅支持现在古老的 C90 标准的 MS C 编译器。所有变量都必须在函数体的顶部声明。

```
int _tmain(int argc, _TCHAR* argv[])
{    
    // Set up the required window size:
    SMALL_RECT windowSize = {0, 0, 79, 49};

    // Set up the handles for reading/writing:
    wHnd = GetStdHandle(STD_OUTPUT_HANDLE);
    rHnd = GetStdHandle(STD_INPUT_HANDLE);

    // Change the window title:
    SetConsoleTitle(TEXT("Win32 Console Control Demo"));

    // Change the console window size:
    SetConsoleWindowInfo(wHnd, TRUE, &windowSize);
} 
```

很痛苦，不是吗？！

# sql - 如何在 SQL Server 中进行这种约束？

> ID：10715527
> 
> 赞同：1
> 
> 时间：2012-05-23T07:42:22.650
> 
> 标签：sql, sql-server, constraints

假设有两个表，A 和 B。A
包含字段：id、a1、a2。
B 包含字段：id、b1、b2。

假设基于 id 字段从表 A 到 B 的一对多关系。

现在假设我想在表 b 上创建一个唯一约束，禁止我插入基于 b1、b2 和 a1 的重复记录。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:50:09.110

您必须有一个`a1`出现的副本`B`才能将其作为约束强制执行。如果您不希望您的用户看到它，您将创建一个`_B`包含所有`B`s 列 +的表（例如 ），`a1`然后创建一个隐藏此列的视图（使用合适的插入触发器来填充`a1`） 。`B`

您还应该创建一个`A`over`id`和的超键`a1`，并在这两个列上使用外键约束（可能带有`ON UPDATE CASCADE`），`B`以确保此复制的列正确匹配`A`.

然后您是否决定这应该是唯一的外键，或者继续保持“正确”的外键（超过 just `id`），这是一个品味问题。

* * *

例如：

```
CREATE TABLE dbo.A (ID int not null,a1 int not null,a2 int not null,
    constraint PK_A PRIMARY KEY (id),
    constraint UQ_A_a1_check UNIQUE (id,a1)
)
CREATE TABLE dbo._B (ID int not null,a1 int not null,b1 int not null,b2 int not null,
    constraint PK_B PRIMARY KEY (a1,b1,b2),
    constraint FK_B_A FOREIGN KEY (id) references A (id),
    constraint DRI_B_A_a1_check FOREIGN KEY (id,a1) references A (id,a1) on update cascade
)
GO
CREATE VIEW dbo.B
WITH SCHEMABINDING
AS
    select id,b1,b2 from dbo._B
GO
CREATE TRIGGER T_B_I on dbo.B instead of insert
AS
    INSERT INTO dbo._B (id,a1,b1,b2)
    SELECT i.id,a.a1,i.b1,i.b2
    FROM
       inserted i
          inner join
       dbo.A a
          on
             i.id = a.id
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:50:24.810

一种解决方案是为表 A 中的重复值创建一个函数测试，并添加一个将函数引用到表 B 的 Check 约束。

# asp.net - 实体框架 web 配置文件

> ID：10715530
> 
> 赞同：9
> 
> 时间：2012-05-23T07:42:28.693
> 
> 标签：asp.net, asp.net-mvc, entity-framework

此代码工作正常：

```
<connectionStrings>
    <add name="EFDbContext" connectionString="Data Source=.\SQLEXPRESS; Initial Catalog=myDB;Integrated Security=SSPI;
 " providerName="System.Data.SqlClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\SQLEXPRESS; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

但这段代码不起作用：

```
<connectionStrings>
    <add name="EFDbContext" connectionString="Data Source=.\MSSQLSERVER2008; Initial Catalog=myDb;Integrated Security=SSPI;User ID=useradmin; Password=pass; " providerName="System.Data.SqlClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\MSSQLSERVER2008; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

第二个代码必须在具有 MSQSERVER2008 实例的远程服务器上运行，并且在加载页面时，会出现以下消息：

> 从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。检查内部异常以获取详细信息并确保连接字符串正确。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T12:19:25.053

问题在于集成安全参数。当它设置为 True 时，如果您指定用户和密码，.Net 会尝试打开与当前用户事件的连接。因此，要打开与特定用户的连接，请将 Integrated Security 设置为 False，它将起作用。

```
<connectionStrings>
    <add name="EFDbContext" connectionString="Data Source=.\MSSQLSERVER2008; Initial Catalog=myDb;Integrated Security=SSPI;User ID=useradmin; Password=pass; " providerName="System.Data.SqlClient" />
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=.\MSSQLSERVER2008; Integrated Security=False; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:48:36.317

这是我必须使用动态连接字符串设置进行 EF 连接的操作，尽管我的设置是用户输入，而不是 Web 配置：

```
 // Set the properties for the data source.
        sqlBuilder.ConnectionString = "Integrated Security=SSPI;";
        sqlBuilder.DataSource = serverName;
        sqlBuilder.InitialCatalog = databaseName;
        sqlBuilder.ConnectTimeout = 60;
        sqlBuilder.MultipleActiveResultSets = true;
        if(!string.IsNullOrEmpty(userName) || !string.IsNullOrEmpty(password))
        {
            sqlBuilder.UserID = userName;
            sqlBuilder.Password = password;
            //sqlBuilder.IntegratedSecurity = false;
        }
        else
        {
            sqlBuilder.IntegratedSecurity = true;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T06:24:26.757

确保在您的代码连接字符串是正确的：

```
"Data Source=.\MSSQLSERVER2008; Initial Catalog=myDb;Integrated Security=SSPI;User ID=useradmin; Password=pass;" 
```

检查你的 sql 服务器。

# c# - long.Parse() C#

> ID：10715534
> 
> 赞同：10
> 
> 时间：2012-05-23T07:42:42.977
> 
> 标签：c#, .net-3.5

如何在 C# 中将字符串（例如“-100,100”）转换为 long。

我目前有一行代码是

```
long xi = long.Parse(x, System.Globalization.NumberStyles.AllowThousands); 
```

但是当 x 是“负数”时，这会中断。

**我的方法**：

```
long xi = long.Parse("-100,253,1", 
System.Globalization.NumberStyles.AllowLeadingSign & System.Globalization.NumberStyles.AllowThousands); 
```

错了，因为它坏了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T07:45:21.917

试一试：

```
long xi = long.Parse(x, System.Globalization.NumberStyles.AllowThousands | System.Globalization.NumberStyles.AllowLeadingSign); 
```

很可能是因为您正在声明标志，您可能需要声明所有可能会被击中的标志。我刚刚使用问题中给定的字符串值确认此代码在测试项目中工作。让我知道它是否符合您的要求。在单个参数中声明多个标志时使用 | 代替 ＆

编辑： http: [//msdn.microsoft.com/en-us/library/cc138362.aspx](http://msdn.microsoft.com/en-us/library/cc138362.aspx) 在“作为位标志的枚举类型”标题下找到不同位运算符的解释（这比我想象的更难找到。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T07:59:59.517

为了避免异常，我会使用 TryParse 而不是 Parse，即：

```
long xi;
if (long.TryParse(numberString, System.Globalization.NumberStyles.AllowThousands | System.Globalization.NumberStyles.AllowLeadingSign, null, out xi))
    {
        // OK, use xi
    }
    else
    {
        // not valid string, xi is 0
    } 
```

# c# - IE 使用必应搜索

> ID：10715539
> 
> 赞同：0
> 
> 时间：2012-05-23T07:43:18.547
> 
> 标签：c#, windows-phone-7

当我们简单地在搜索文本框中输入一些文本并且当我们输入一些 URL 然后它导航到网页时，IE（在 windows phone 7 上）如何使用 bing 搜索。他们如何将两者集成到一个文本框中？谁能帮我。提前感谢您的辛勤工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:46:04.173

也许使用[SearchTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.searchtask)（MSDN 链接）？

# ruby-on-rails - 客户端如何在 post 请求中发送参数？

> ID：10715547
> 
> 赞同：1
> 
> 时间：2012-05-23T07:44:11.003
> 
> 标签：ruby-on-rails, json

我正在尝试模拟发布请求，以便我可以重复请求并找出错误，但这里我在文本区域中获取早期请求的参数，参数是 json 字符串，现在我必须提取参数然后重定向到原始网址

我怎么做？？Json 解析器在尝试解析提交的参数时创建错误

> ```
> JSON::ParserError (795: unexpected token at
> 
> '{"data":"[{\"bundles\":[{\"bloody_hell\":\"killer\"}]}]"
> 
> "app_created_at":"2012-04-27 10:18:04", "action":"push",
> 
> "first":"YES", "controller":"syncs"}'): json (1.7.1)
> 
> lib/json/common.rb:149:in `parse' 
> ```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:49:57.623

`"`使用时不必转义`'`，删除`\`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:27:08.067

删除 [] 周围的 "，并添加逗号..

你可以对 json 进行字符串化，你会看到你必须如何模拟它

```
JSON.stringify({data: [{a:1},{b:2}],c:4}) 
```

输出

```
"{"data":[{"a":1},{"b":2}],"c":4}" 
```

# windows - Windows 的“安全删除硬件”对话框如何获得“前景之爱”？

> ID：10715550
> 
> 赞同：10
> 
> 时间：2012-05-23T07:44:19.843
> 
> 标签：windows, winapi, visual-c++, hotkeys, foreground

[Raymond 在博客中介绍](http://blogs.msdn.com/b/oldnewthing/archive/2009/02/26/9445006.aspx)了程序如何通过 using 获取/窃取“前景之爱” `RegisterHotkey`，当被调用时，它将把前景转移到您的应用程序中。

尝试手动执行此操作会惨遭失败（例如，使用`SetForegroundWindow`、`SwitchToWindow`等），因为应用程序不能从用户那里窃取焦点（以便按键不会转到错误的位置）。

麻烦的是，今天我注意到了一些奇怪的事情：

1.  我尝试安全删除外部驱动器。

2.  有约 7 秒的停顿。

3.  *停顿的时候*，我在窗内用力打字。

4.  突然，一个消息框从我的应用程序中*窃取*了前景，而我的输入却进入了消息框。

显然，这没有使用热键机制——然而，Windows 能够从我的应用程序中窃取焦点。

我真的怀疑是否有类似“后门”之类的东西仅用于此特定目的（尽管如果我错了请纠正我），因此，假设不是这种情况，必须有一种方法可以正确地做到这一点，*不* 使用热键机制。

那么问题来了，这是如何实现的呢？

### 笔记：

汉斯指出“后门”是`AttachInputThread`，但我并不真正相信这就是这里发生的事情——特别是因为[雷蒙德说这种方法会导致挂起](http://blogs.msdn.com/b/oldnewthing/archive/2008/08/01/8795860.aspx)。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T14:14:47.090

我想不出比我现在有时间更复杂的测试方法，但仔细查看 SetForegroundWindow 文档， http: [//msdn.microsoft.com/en-us/library/ms633539 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms633539(VS.85).aspx)，在有关可以设置前景的进程的备注下列出的条件之一是：

*   进程收到最后一个输入事件。

除非我弄错了，否则 Windows 资源管理器会接收所有输入事件以检查热键、其他此类窃取焦点的按键以及当前窗口边界之外的鼠标点击等。

由于其永久的“收到最后一个输入事件”状态，Explorer 有资格作为可以设置前景的东西，因此可以导致它导致的 MessageBox 显示为前景，而没有任何特殊功能或未记录的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T05:18:14.043

我已经做了一些实验，据我所知，当且仅当新窗口属于 Windows 资源管理器时才会发生这种情况。例如，某些控制面板在 Explorer 中实现或作为 Explorer 插件实现。我可以通过从“开始”菜单打开“操作中心”来最轻松地重现它（将“开始”菜单配置为在菜单中显示控制面板项目）。

因此，我怀疑这种行为是 Windows 资源管理器拥有桌面窗口这一事实的结果，GUI 将其视为一种特殊情况。

唯一有点奇怪的是，我*无法*使用您正在谈论的 USB 对话框重现此行为，该对话框（当我尝试时）是由单独的进程（rundll32.exe 的实例）生成的。不过，这可能取决于其他因素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T11:02:36.043

如前所述，不同线程的窗口输入是独立处理的。 [`AttachThreadInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681956%28v=vs.85%29.aspx)API 允许共享线程状态，特别是：

> 通过使用 AttachThreadInput 函数，一个线程可以将其输入处理机制附加到另一个线程。[...] 这也允许线程共享它们的输入状态，因此它们可以调用 SetFocus 函数将键盘焦点设置到不同线程的窗口。

现在，当您看到当前处于前台的窗口时，如果您与前台窗口线程的线程状态共享您的线程状态，您`SetFocus`将从那里窃取焦点。

```
CWindow Window = GetForegroundWindow();
if(Window)
{
  const DWORD nWindowThreadIdentifier = Window.GetWindowThreadID();
  const DWORD nThreadIdentifier = GetCurrentThreadId();
  AttachThreadInput(nThreadIdentifier, nWindowThreadIdentifier, TRUE);
  GetDlgItem(IDC_EDIT).SetFocus(); // This succeeds now as we are sharing thread state with foreground window
  AttachThreadInput(nThreadIdentifier, nWindowThreadIdentifier, FALSE);
  m_sAction = _T("Done");
} else
  m_sAction = _T("Nothing to do"); 
```

另见：[源代码片段](http://www.alax.info/trac/public/browser/trunk/Utilities/StealFocusViaAttachInputThread/MainDialog.h#L64)，[二进制](http://www.alax.info/trac/public/browser/trunk/Utilities/StealFocusViaAttachInputThread/_Bin/Win32/Release/StealFocusViaAttachInputThread.exe)

# php - PHP_NEW_EXTENSION() 什么都不做

> ID：10715554
> 
> 赞同：3
> 
> 时间：2012-05-23T07:44:39.707
> 
> 标签：php, makefile, autoconf, php-extension

我想问一下我的猜测是否正确：

我正在编写一个扩展（`C++`用作编程语言），当涉及到实际`make`配置的源和宏时，我的 Makefile 包含以下设置。

```
PHP_PECL_EXTENSION = extensionname
EXTENSIONNAME_SHARED_LIBADD =
PHP_MODULES =
PHP_ZEND_EX = 
```

如果我手动添加我的

```
 PHP_NEW_EXTENSION(extensionname, <listofsourcecodefilenames>...) 
```

也许我必须提供一些额外的信息？我确实尝试构建一些 PHP 源代码附带的库存扩展，一切都很好。

* * *

*这是我的 config.m4*

```
PHP_ARG_WITH(extensionname, enable extensionname,
    [  --with-extensionname        enable extensionname)], no, no)

if test "$PHP_EXTENSIONNAME" != "no"; then
PHP_REQUIRE_CXX()
PHP_EXTENSIONNAME_CFLAGS=""

if test $PHP_EXTENSIONNAME != "yes"; then
    AC_MSG_CHECKING([for required lib in default path])
    for i in $PHP_EXTENSIONNAME /usr/local/ /usr /opt/vendor/liblocation; do
        if test -r $i/include/sqlncli.h; then
            $REQUIREDLIB_DIR=$i
            AC_MSG_RESULT(found in $i)
            break
        fi
    done

    if test -z "$REQUIREDLIB_DIR"; then
        AC_MSG_RESULT([not found])
        AC_MSG_ERROR([please obtain the original required lib for Linux])
    fi

    PHP_CHECK_LIBRARY(requiredlib, RQLCriticalFunction, [
        AC_MSG_RESULT(found)
        PHP_ADD_LIBRARY_WITH_PATH(requiredlib, $REQUIREDLIB_DIR/../lib64, EXTENSIONNAME_SHARED_LIBADD)
        PHP_ADD_INCLUDE($REQUiREDLIB_DIR/include)
    ], [
        AC_MSG_RESULT([not found])
        AC_MSG_ERROR([please install blah-blah])
    ], [
        -L$REQUIREDLIB_DIR/../lib64 -lm
    ])
fi

AC_DEFINE(HAVE_EXTENSIONNAME, 1, [Whether you have extensionname])

PHP_ADD_LIBRARY(stdc++, 1, EXTENSIONNAME_SHARED_LIBADD)

PHP_ADD_INCLUDE('sql.h')
PHP_ADD_INCLUDE('sqlext.h')

PHP_NEW_EXTENSION(extensionname, source1.cpp source2.cpp source3.cpp, $ext_shared)
PHP_SUBST(EXTENSIONNAME_SHARED_LIBADD)
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:29:33.370

一分钟前，我一直在查看[http://www.opensource.apple.com/source/apache_mod_php/apache_mod_php-18.9/php/README.UNIX-BUILD-SYSTEM](http://www.opensource.apple.com/source/apache_mod_php/apache_mod_php-18.9/php/README.UNIX-BUILD-SYSTEM)的类似问题，并注意到您似乎是最后缺少`$ext_shared`：

```
PHP_NEW_EXTENSION(foo, foo.c bar.c baz.cpp, $ext_shared) 
```

# visual-studio-2010 - VC++ 中的设置定时器

> ID：10715555
> 
> 赞同：1
> 
> 时间：2012-05-23T07:44:53.943
> 
> 标签：visual-studio-2010, visual-c++, timer

我需要在我的 VC++ 应用程序中创建 Timer，在我需要设置定时器的地方和定时器超时时，我需要调用一种特定的方法......

我已经看到了 msdn 论坛，并在下面的代码中完成了该操作 `SetTimer(NULL,1,5*1000,TimerProc);`

我的`TimerProc`方法如下

```
void CALLBACK TimerProc(HWND aHwnd, UINT aMessage, UINT_PTR aTimerId, DWORD aTime)
{
    StopProceess();
} 
```

我假设 5 秒后`SetTimer`应该调用`TimerProc`方法，但它永远不会被调用。不知道我在这做错了什么。或请建议是否有其他选择。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:57:25.340

从代码片段中，我很确定您正在编写基于控制台的应用程序。

您可以使用其他类型的计时器，或者如果您并不真正关心精度，那么您错过了一件事以使此计时器正常工作。

即使这是一个控制台应用程序，除非您发送计时器消息，否则不会调用您的计时器回调。做这个：

```
 MSG msg;
    SetTimer(NULL, 1, 5*1000 ,TimerProc);

    while (GetMessage(&msg, NULL, WM_NULL, WM_TIMER)) 
    { 
        DispatchMessage(&msg); 
        if (WM_TIMER == msg.message) 
        {
            break;
        }
    }
    StopProceess(); 
```

考虑使用等待定时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:07:11.210

嗯，在我看来没问题。您是否在 TimerProc 和调用 SetTimer 的程序中设置断点？您需要确保您确实调用了 SetTimer 并且没有真正调用 TimerProc。

接下来我要问的是您是否在消息循环中发送消息？如果您不在消息循环中发送消息，我认为计时器消息永远不会被触发。如果您在程序中执行了一些较长的过程，并且您从未使用相应的 DispatchMessage 调用 GetMessage/PeakMessage，那么这可能会导致计时器消息永远不会被触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:50:08.427

本文[介绍](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644901%28v=vs.85%29.aspx)了创建和销毁计时器。

我找到了一些仍然使用 hWnd 的[示例代码](http://en.wikibooks.org/wiki/Windows_Programming/Interfacing)，有什么理由不使用 hWnd 参数吗？如果一个都用不上，可以试试看传入NULL时代码是否有效。我在示例中注意到他们将回调转换为`TIMERPROC`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T23:02:56.387

使用等待计时器。回调将在第 5 个参数设置的时间后调用，并每隔 6 个参数重复一次。时间过去后，回调被调用，执行一些处理并设置事件允许退出

```
 // ConsoleTimer.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <Windows.h>

#define TIME_LAPS 5 * 1000

HANDLE g_hExitEvent = NULL;

void CALLBACK WaitOrTimerCallback(PVOID lpParameter, BOOLEAN TimerOrWaitFired)
{
        Sleep(5000); // fake long processing
        SetEvent(g_hExitEvent);
}

int _tmain(int argc, _TCHAR* argv[])
{
        HANDLE hNewTimer = NULL;                                                                                                                        //call after
        BOOL IsCreated = CreateTimerQueueTimer(&hNewTimer, NULL, WaitOrTimerCallback, NULL, TIME_LAPS, 
                // repeat
                TIME_LAPS, WT_EXECUTELONGFUNCTION);

        g_hExitEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

        WaitForSingleObject(g_hExitEvent, 15000);

        DeleteTimerQueueTimer(NULL, hNewTimer, NULL);

        return 0;
} 
```

我不检查错误，你应该。

# c# - 如何确定控件是否开始初始化并完成初始化和绑定

> ID：10715556
> 
> 赞同：2
> 
> 时间：2012-05-23T07:44:55.497
> 
> 标签：c#, winforms, data-binding, user-controls

我有一个带有许多不同绑定控件的 WinForms 控件。主控件可以使用父窗体多次显示/隐藏。我想知道控件何时开始初始化（第一次与否），以及其子控件上的所有绑定何时完成。

如果有人有一些想法或方法如何得到这个，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:55:26.210

我认为 Shown 或 Load 事件应该有帮助..

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)

您可以在此处找到所有可能的事件：http: [//msdn.microsoft.com/en-us/library/td1s43eb](http://msdn.microsoft.com/en-us/library/td1s43eb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:25:57.753

问题通过事件组合解决：

转换到初始化状态：

*   构造函数中的初始状态默认值
*   ParentForm.FormClosed
*   Control.ParentChanged

对于转换到正常状态（我需要在所有初始绑定完成后和用户执行某些操作之前转换到此状态）：

*   按键
*   鼠标按下

# java - 如何使用java代码读取文件的所有行？

> ID：10715557
> 
> 赞同：4
> 
> 时间：2012-05-23T07:45:00.513
> 
> 标签：java, file-io, java.util.scanner

我有一个奇怪的问题，我有一个名为 transactionHandler.log 的日志文件。它是一个非常大的文件，有 17102 行。当我在 linux 机器上执行以下操作时，我得到了这个：

```
wc -l transactionHandler.log
17102 transactionHandler.log 
```

但是当我运行以下 java 代码并打印行数时，我得到 2040 作为 o/p。

```
import java.io.*;
import java.util.Scanner;
import java.util.Vector;

public class Reader {

    public static void main(String[] args) throws IOException {     
        int counter = 0; 
        String line = null;

         // Location of file to read
        File file = new File("transactionHandler.log");

        try {

            Scanner scanner = new Scanner(file);

            while (scanner.hasNextLine()) {
                line = scanner.nextLine();
                System.out.println(line);
                counter++;                    
            }
            scanner.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }           
        System.out.println(counter);        
    }
} 
```

你能告诉我原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T08:05:54.373

据我所知，默认情况下`Scanner`用作`\n`分隔符。也许你的文件有`\r\n`. 您可以通过调用`scanner.useDelimiter`或（这更好）尝试使用它作为替代方法来修改它：

```
import java.io.*;

public class IOUtilities
{
    public static int getLineCount (String filename) throws FileNotFoundException, IOException
    {
        LineNumberReader lnr = new LineNumberReader (new FileReader (filename));
        while ((lnr.readLine ()) != null) {}

        return lnr.getLineNumber ();
    }
} 
```

根据[LineNumberReader](http://download.java.net/jdk7/archive/b123/docs/api/java/io/LineNumberReader.html)的文档：

> 一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。

因此它非常适合具有不同行终止字符的文件。

试一试，看看它有什么作用。

# c++ - C++ 快速排序无法正常工作

> ID：10715566
> 
> 赞同：-7
> 
> 时间：2012-05-23T07:45:21.187
> 
> 标签：c++, algorithm, quicksort

我正在尝试修改一些快速排序代码以将随机数作为枢轴。

但是，在测试程序时，它不能正确排序。我不确定为什么这样做。

```
int random (int num) {
    int random = rand() % (num - 1);
    return random;
}

int* partition (int* first, int* last);
void quickSort(int* first, int* last) {
    if (last - first <= 1) return;

    int* pivot = partition(first, last);
    quickSort(first, pivot);
    quickSort(pivot + 1, last);
}

int* partition (int* first, int* last) {
    //--int pivot = *(last - 1);    
    int* pos = (first + random(last - first));
    int pivot = *pos;
    int* i = first;
    int* j = last - 1;

    for (;;) {
        while (*i < pivot && i < last) i++;
        while (*j >= pivot && j > first) j--;
        if (i >= j) break;
        swap (*i, *j);
    }
    swap (*pos, *i);
    return i;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:15:53.697

您的[第一个实现](https://stackoverflow.com/questions/10714207/c-quicksort-pivot-optimization)有效，但对特定数据集的行为退化。原始工作代码中的枢轴是`*(last - 1)`最简单的解决方法，就是将随机元素与`*(last - 1)`. 其余的原始分区代码将保持不变。

# jquery - 如何使用 jquery 将 html 表转换为列表？

> ID：10715570
> 
> 赞同：0
> 
> 时间：2012-05-23T07:45:38.630
> 
> 标签：jquery, html

**我想将下表转换为无序列表：（** 这篇文章没有给出确切的结果：[How to transform HTML table to list with JQuery?](https://stackoverflow.com/questions/577669/how-to-transform-html-table-to-list-with-jquery)）

**我试过这样：**

```
 <script type="text/javascript">

        $(document).ready(function(){

            var list = $("<ul/>");
            var table  = "div." + 'productTable' + " table";
            $(table).find("tr").each(function() {
            var p = $(this).children().map(function() {
            return "<p>" + $(this).html() + "</p>";
            });

            list.append("<li>" + $.makeArray(p).join("") + "</li>");
            });

            $(table).replaceWith(list);

        });
    </script> 

<div class="productTable">
    <table cellspacing="2" cellpadding="2" border="0">
    <tr>
    <td colspan="2"><br>
    <a href="">back to shop by all brands</a>
    </td>
    </tr>
    <tr>
    <td colspan="2"><a href="">back to "P" brands</a></td>
    </tr>
    <tr><td colspan="2"><h1>Paris</h1></td></tr><tr><td valign="top">
    <table cellpadding="1" cellspacing="2" border="0">
    <tr><td valign="top"><img src="" border="0"></td>
    <td></td></tr>
    </table>
    </td>
    </tr>
    <tr><td style="background: #80826C;color: white;text-align:center;font-weight:bold" width="100%">
    Click a department below to see more products from this brand</td></tr>
    </table>
    <table cellspacing="2" cellpadding="2" border="0" width="100%" bgcolor="#e7e7e2">
    <tr><td valign="top"><a href="">Sleds, Skates & Toboggans</a></td>
    <td><img src="img/shim.gif" border="0" width="10" height="1"></td></table>
    <table border="0" cellpadding="0" cellspacing="0">
    <tr><td><img src="img/shim.gif" width="1" height="10" border="0"></td></tr>
    <tr><td style="background: #80826C;color: white;text-align:center;font-weight:bold" width="100%">A few of our products from this brand</td></tr>
    <tr><td><img src="img/shim.gif" width="1" height="10" border="0"></td></tr>
    <tr><td><table><tr><td valign="top" align="center" width="155"><a href="">
    <img src="" border="0" alt="Paris Standard Child Back Pad for E-32 Sled" title="Paris Standard Child Back Pad for E-32 Sled"></a><br>
    <a href="">Paris Standard Child Back Pad for E-32 Sled</a><br>
    <img src="img/shim.gif" width="1" height="19" border="0"><strong>Price:</strong> <strong>$29.99</strong></td><td></td><td></td></tr></table></td></tr></table>
    <table cellspacing="2" cellpadding="2" border="0" width="100%"><tr><td colspan="2"><br><br><a href="">back to "P" brands</a></td></tr>
    <tr><td colspan="2"><br><a href="">back to shop by all brands</a>
    </td></tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:14:09.470

```
 $(document).ready(function () {
                $('table').each(function () {
                    var list = $("<ul/>");

                    $(this).find("tr").each(function () {
                        var p = $(this).children().map(function () {
                            return "<p>" + $(this).html() + "</p>";
                        });

                        list.append("<li>" + $.makeArray(p).join("") + "</li>");
                    });

                    $(this).replaceWith(list);
                });
            });

//Or 

        $(document).ready(function () {
            $('div.productTable table').each(function () {
                var list = $("<ul/>");

                $(this).find("tr").each(function () {
                    var p = $(this).children().map(function () {
                        if ($(this).find('table').length > 0) {
                            var subList = $("<ul/>");

                            var sP = $(this).find('table').children().map(function () {
                                return "<p>" + $(this).html() + "</p>";
                            });

                            subList.append("<li>" + $.makeArray(sP).join("") + "</li>");

                            return $('<div />').append($('<p />').append(subList)).html();
                        }
                        else {
                            return "<p>" + $(this).html() + "</p>";
                        }
                    });

                    list.append("<li>" + $.makeArray(p).join("") + "</li>");
                });

                $(this).replaceWith(list);
            });
        }); 
```

# c - 如何在 UNIX 中包含 C 可用的基本头文件？

> ID：10715572
> 
> 赞同：0
> 
> 时间：2012-05-23T07:45:42.477
> 
> 标签：c, unix, header-files, turbo-c

当我们在 Turbo C 上工作时，我们默认获取所有函数和头文件，我们可以通过 #inlcude 通常包含它们，例如：stdlib.h、math.h

但是当使用这样的头文件编写一个简单的程序时，我得到了错误，因为我无法包含这些文件。这些头文件是不是默认我们可以使用的？如果是，那么如何使用这样的头文件？当我在“math.h”中使用函数 sqrt 时，由于未包含 math.h，因此出现错误，因此我必须将其包含在以下命令中：

```
cc -c aaa.c -I/usr/local/ssl/include
gcc -o aaa aaa.c -I/usr/local/ssl/include -L/usr/local/ssl/lib -lcrypto -lm
./aaa 
```

在此命令中，第二个命令末尾有**-lm以包含 math.h**

同样，我再次使用了*stdlib.h* 中的函数 itoa()，我在 UNIX Solaris 服务器上执行该函数，但它没有被包含在内，并且出现 gettig 错误。现在我不知道如何添加这个头文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:51:07.723

标题`math.h`通常包含在内。代码可以编译。但是，编译器不会找到要**链接**的已编译二进制文件（math.h 的实现） ，除非您指定它这样做。所以你必须在命令中指定 -lm 。

`itoa()`不是 中的标准函数`stdlib.h`，所以不要使用它。您可以改用 sprintf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:48:21.400

您的编译器应提供命令行设置，您可以在其中指定包含目录、库目录等。最好查看编译器文档。

例如，Visual Studio 有一个命令开关 -I 来指定包含文件夹

alt。在某些情况下，它可以指定为环境变量，例如 set INCLUDE=...

这完全取决于您使用的编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:54:00.407

默认情况下，这些是从 libc 导出的标准库函数，它们应该可以在任何 Unix/Linux 风格中使用。您可以使用以下命令检查头文件存在的位置

```
find / -name "stdio.h" 2>/dev/null 
```

还要确保使用 -l libc 链接到 libc

另外，您使用的是哪个编译器？我建议你使用 gcc，这样编译器的包含配置已经完成，你可以按原样使用它并开始使用。

# java - 为不同选项卡下的按钮设置相同的快捷键

> ID：10715573
> 
> 赞同：2
> 
> 时间：2012-05-23T07:45:43.087
> 
> 标签：java, swing, jbutton, key-bindings, keylistener

我有一个多标签框架，我必须为不同标签下的某些按钮设置快捷方式，但它们必须使用相同的键。例如：

> 在 tab1 下，我有一个“Do that”按钮，它应该对 F1 键做出反应，但如果我要切换到 tab2，我应该有一个“Do this”按钮，它也应该对 F1 按钮做出反应，但 tab1 上的操作不应该不会被解雇。

我曾尝试添加`keylistener`到选项卡/键/面板，但如果我要按 F1 键，它仍然是触发的第一个操作。

但我认为原因是我使用了一个开关，它控制关键事件，例如`case KeyEvent.VK_F1:mybutton1.doclick();`

那么如何在不同的选项卡下分离动作以分别做出反应呢？有没有办法让例如焦点标签或其他东西？

问候。

编辑：Swing 动作的一些代码：

```
 private class SwingAction extends AbstractAction {
    public SwingAction() {
        putValue(NAME, "mybutton");
        putValue(SHORT_DESCRIPTION, "Some short description");
    }
    public void actionPerformed(ActionEvent e) {
        mybutton.getInputMap().put(KeyStroke.getKeyStroke("F1"),"pressed");
        mybutton.getActionMap().put("pressed",mybutton.doClick());

    }
} 
```

我得到：

> ActionMap 类型中的 put(Object, Action) 方法不适用于参数 (String, void) 错误，（抱歉这里是 Java/Swing 新手）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:51:39.190

利用

*   [JButton的](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#abstractbutton)[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，您可以为任何实现的 JCOmponents 设置相同的[JBUtton#setAction()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setAction%28javax.swing.Action%29)`Swing Action`

*   [KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) (for `F1`) 输出到`Swing Action`, 在里面`Action`你必须调用[JButton#doClick()](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#doClick%28%29)

*   永远不要将[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)用于[Swing JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:00:00.433

将 a绑定`KeyStroke`到按钮`doClick()`具有视觉和听觉反馈的优势；但是，正如您所观察到的，`doClick()`它不是`Action`. 相反，创建一个`Action`调用给定按钮的`doClick()`方法，并将其绑定到所需的`KeyStroke`，如本[例](https://sites.google.com/site/drjohnbmatthews/keypad-panel)所示。

# java - Selenium 挂起实例化 FirefoxDriver

> ID：10715576
> 
> 赞同：21
> 
> 时间：2012-05-23T07:45:46.717
> 
> 标签：java, selenium, webdriver

我尝试开始使用 selenium（今天下载了当前版本）并复制了他们打开浏览器并执行谷歌搜索的示例。

然而，程序永远挂在第一行`WebDriver driver = new FirefoxDriver();`。

我安装了 Firefox 13。

```
线程转储：
线程[主]
  Thread.sleep(long) 行：不可用 [本机方法] [局部变量不可用]
  FirefoxBinary.sleep(long) 行：218
  FirefoxBinary.clean(FirefoxProfile, File) 行：234
  NewProfileExtensionConnection.start() 行：76
  FirefoxDriver.startClient() 行：200
  FirefoxDriver(RemoteWebDriver).(CommandExecutor, Capabilities) 行：94
  FirefoxDriver.(FirefoxBinary, FirefoxProfile) 行：147
  FirefoxDriver.() 行：85
  Test.main(String[]) 行：24

```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T08:26:30.467

这些情况通常是 Firefox 和 Selenium 在兼容性方面有点“不同步”。

您应该尝试两件事：将 Selenium 更新到最新版本和/或降级 Firefox。密切关注[Selenium 发行说明](https://stackoverflow.com/questions/18609557/where-to-find-selenium-webdriver-release-notes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:25:18.063

Selenium 2.23 中添加了对 Firefox 13 的支持。请参阅[http://code.google.com/p/selenium/source/browse/trunk/java/CHANGELOG](http://code.google.com/p/selenium/source/browse/trunk/java/CHANGELOG)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:46:37.270

通常一个新的浏览器很热 - 我在其他地方寻找问题。Webdriver 或 selenium 服务器。[http://d.pr/i/Q5Dt](http://d.pr/i/Q5Dt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:00:57.440

我一直在使用 Firefox 18，但我刚刚自动更新到 19，这似乎破坏了 webdriver。Mozilla 与以前版本的链接并不突出：

[https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/18.0b7/mac/en-US/](https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/18.0b7/mac/en-US/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-09T18:55:25.050

**在没有设置显示的情况下**尝试在无头 CentOS 服务器上实例化 webdriver 时看到了这种行为。

根据[https://serverfault.com/questions/363827/how-can-i-run-firefox-on-centos-with-no-display](https://serverfault.com/questions/363827/how-can-i-run-firefox-on-centos-with-no-display) - 您可以使用**Xvfb**，它为您提供不需要的 X 服务器连接到物理显示器

# android - 我在 SQLite 中的数据库文件在哪里

> ID：10715580
> 
> 赞同：-1
> 
> 时间：2012-05-23T07:45:58.127
> 
> 标签：android, sqlite

我是 Android 中 SQLite 数据库的新手，我想知道我的数据库文件 (.db) 在哪里创建。下面是我的代码的一部分

```
package com.navigationsystem;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.hardware.SensorManager;

public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME="db";
    public static final String NODE_ID="nodeID";
    //public static final String VALUE="value";

    public static final String CHILD_ID="childID";
    public static final String PARENT_ID="parentID";

    public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
    //db.execSQL("CREATE TABLE constants (_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, value REAL);");
    db.execSQL("CREATE TABLE nodes( nodeID CHAR(1) PRIMARY KEY );");
    db.execSQL("CREATE TABLE edges( childID CHAR(1) NOT NULL, parentID CHAR(1) NOT NULL,PRIMARY KEY(childID,parentID) );");

    ContentValues cv=new ContentValues();
        ...................... 
```

请给我详细信息。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:49:30.637

见下图。它可能会帮助你。

![数据管理系统](../Images/1219d9c0fd6165fbbc65d3809c6ed4d5.png)

# java - 如何获取节点之间的xml数据？

> ID：10715582
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:05.573
> 
> 标签：java, android, xml, xml-parsing

我在我的 Android 应用程序中使用 .Net Web 服务。该服务返回 Message 标记之间的值，如下所示：

```
<Message> CustomerID=10 </Message> 
```

在这里，我如何使用 Android 从这个 Message 标签中获取数据？

我想检索从 Web 服务接收到的 xml 中的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:25:42.333

example for parsing `xml`:

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db;
try {
    db = dbf.newDocumentBuilder();
    Document doc = null;
    doc = db.parse([InputStream]);
    NodeList nl = doc.getElementsByTagName("Message");
    if (nl != null) {
        for (int i = 0; i < nl.getLength(); i++) {
            Node item = nl.item(i);
            String name = item.getNodeName();
            String value = item.getTextContent();
        }
    }
}catch{} 
```

You will get the value between the tags with

```
item.getTextContent() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:22:29.400

使用这个例子你会得到你的解决方案。您不必担心将由默认处理程序处理的标记只有您想声明起始标记 [SAX 示例](http://www.androidpeople.com/android-xml-parsing-tutorial-using-saxparser)仅更改标记...

# objective-c - 相当于 CFStringRef 的 +[NSString stringWithContentsOfURL:usedEncoding:error:]

> ID：10715583
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:12.287
> 
> 标签：objective-c, c, core-foundation

我想知道 `+[NSString stringWithContentsOfURL:usedEncoding:error:]`CoreFoundation 中的等价物是什么？

我知道`(__bridge NSString *)`这次我可以使用这个东西了

在我看来，在objective-c中有几行来制作东西是丑陋的

```
...
CFErrorRef error = NULL;
CFURLRef fileURL = CFBundleCopyResourceURL(bundle,
                                           CFSTR("file"),
                                           CFSTR("txt"),
                                           NULL);

// Ugly piece of objc code in my whole C source file :(
NSError *nsError = (__bridge NSError *)(error);
NSString *nsString = [NSString stringWithContentsOfURL:(__bridge NSURL *)fileURL
                                          usedEncoding:NULL
                                                 error:&nsError];

CFStringRef fileContents = (__brigde CFStringRef)nsString; 
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:56:48.027

你可以尝试使用

```
CFStringCreateFromExternalRepresentation 
```

我会想象代码是这样的，

```
NSData *data = [NSData dataWithContentsOfFile:<path to your file>]
CFStringRef string = CFStringCreateFromExternalRepresentation(NULL, (CFDataRef)data, kCFStringEncodingUTF8); 
```

理想情况下，要访问错误，您还可以使用 NSData 的 dataWithContentsOfFile:options:error:

# ios - 切换2个UIWebViews的内容

> ID：10715584
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:12.557
> 
> 标签：ios, uiwebview, uiscrollview, copy

在我的应用程序中，我有一个包含多个 webview 的滚动视图（我只使用 3 个 webview 进行无限滚动之类的操作）......为了做到这一点，我需要切换 2 个 web 视图的内容（比如将一个 webview 复制到另一个 webview 中？ )...这不能仅通过将 htmlString 从一个 webView 加载到另一个 webView 来完成...

有任何想法吗？非常感谢提前

编辑：代码与本教程非常相似：http: [//mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T13:04:33.980

如果有人关心我已经解决了这个问题，只需将 uiwebvies 添加到一个可变数组中，然后首先在滚动视图中切换它们（可见），然后再将它们切换到该可变数组中（逻辑上）。在上面链接的示例中，“向右滚动”（在 scrollViewDidEndDecelerating:) 中的代码如下所示：

```
 CGRect frame = ((UIView*)[self.arrWebViewsContent objectAtIndex:2]).frame;
        ((UIView*)[self.arrWebViewsContent objectAtIndex:2]).frame = ((UIView*)[self.arrWebViewsContent objectAtIndex:1]).frame;
        ((UIView*)[self.arrWebViewsContent objectAtIndex:1]).frame = ((UIView*)[self.arrWebViewsContent objectAtIndex:0]).frame;
        ((UIView*)[self.arrWebViewsContent objectAtIndex:0]).frame = frame;

        UIView *view_tmp = [self.arrWebViewsContent objectAtIndex:0];
        [self.arrWebViewsContent replaceObjectAtIndex:0 withObject:[self.arrWebViewsContent objectAtIndex:1]];
        [self.arrWebViewsContent replaceObjectAtIndex:1 withObject:[self.arrWebViewsContent objectAtIndex:2]];
        [self.arrWebViewsContent replaceObjectAtIndex:2 withObject:view_tmp]; 
```

# jquery - 如何替换css类背景图片

> ID：10715585
> 
> 赞同：1
> 
> 时间：2012-05-23T07:46:14.190
> 
> 标签：jquery, asp.net-mvc, model-view-controller

我使用 Mvc 和 jquery，我想知道如何让图像显示。

我有

```
<img src="@Url.Action("GetImage", "Dashboard")" id="images" alt="image description" width="100" height="72" /> 
```

在我的脚本标签内，我有

```
<script type="text/javascript">
        getTheme();
        var imageSource = $('#images');
        var newimg = $('.logo');
        newimg.css({'background-image', 'Url('+imageSource+')'});
    </script> 
```

我希望这是来源：图像只是没有显示你能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:54:47.887

我认为这可能会对您有所帮助：

```
<script type="text/javascript">
        getTheme();
        var imageSource = $('#images').attr('src');
        var newimg = $('.logo');
        newimg.css({'background-image', 'Url('+imageSource+')'});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:50:38.050

在您的 imageSource 变量中。我想如果它是图像标签，您需要获取 #images 元素的 src 属性。总的来说，我认为唯一不起作用的是 imageSource 值。有关这方面的更多信息可以帮助解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:52:09.120

改变

```
var imageSource = $('#images'); 
```

到

```
var imageSource = $('#images').attr("src"); 
```

获取实际路径而不是 DOM-Element。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T07:52:49.853

像这样的东西可能吗？

```
newimg.attr('src', imageSource.attr('src')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T07:53:27.987

```
$('#bg_image').removeClass('.logo').addClass('#images'); 
```

和CSS代码：

```
.logo{background-image:url(image1.png);}
#image{background-image:url(image2.png);} 
```

# c# - 使用 WPF 进行透视变换

> ID：10715586
> 
> 赞同：3
> 
> 时间：2012-05-23T07:46:16.690
> 
> 标签：c#, wpf, 3d, 2d

WPF 允许在图形对象上指定线性仿射变换。有了它，您可以进行平移、旋转、缩放、倾斜或这些操作的组合。您可以指定一个 2x3 矩阵。

我想要做的是 2D 空间中的透视变换，它需要 3x3 矩阵，并且从 Photoshop 或 GIMP 已知，您可以在其中独立拖动图像的所有 4 个角。

我尝试使用 WPF 的 3D 功能，设置 a `Viewport3D`， an`OrthographicCamera`并将（2D）对象放置到 xy 平面上。

但我想知道是否没有更简单的方法可以在 WPF 中完成透视变换？

我问也是因为我想对文本进行透视变换：在 2D 中我可以使用 a `TextBlock`，在 3D 中它变得更加复杂，我必须从 a out of a 创建一个`Brush`out `Geometry`of a `FormattedText`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:31:17.067

正如您可以[在此处阅读的，](https://groups.google.com/group/wpf-disciples/browse_thread/thread/6672e591b23a7589)有一些 3rd 方库为 WPF 实现 Silverlight 的 PlaneProjection。

否则你将被迫自己编码。（也许微软会在未来的 .NET 版本中添加 PlaneProjection）

# jsp - 通过 JSP 在 Web GUI 中显示多行超链接

> ID：10715590
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:40.013
> 
> 标签：jsp, user-interface

我有简单的输入字段和搜索按钮，如果单击该按钮，单击后必须从数据库中显示 URL 行，

我在检票口中有一些片段代码可以完成这些功能：

```
item.add(new ExternalLink("itemUrl",
    "http://www.opendata.sk/item/" + solrResultItem.getId(),
    solrResultItem.getId() + ": " +solrResultItem.getName())); 
```

但是类似的东西我想通过GUI中的JSP实现一个页面，该页面将根据ID显示给定的项目。

# css - 带有水平子菜单的水平菜单 css

> ID：10715591
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:40.667
> 
> 标签：css

我希望有人可以帮助我关注。：参见例如： [JSFiddle](http://jsfiddle.net/PhuBQ/) 下拉菜单，我希望一直可见，并显示水平右侧而不是垂直。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:06:39.737

这是一个例子：[http ://www.javascriptkit.com/script/script2/csstopmenu.shtml](http://www.javascriptkit.com/script/script2/csstopmenu.shtml)

顺便说一句，我如何像其他用户在上面所做的那样为问题添加评论？

# magento - 将外部 javascript 文件添加到 magento 标头

> ID：10715596
> 
> 赞同：0
> 
> 时间：2012-05-23T07:46:59.733
> 
> 标签：magento, php

我正在尝试向 magento cms 添加一些外部 javascript 文件，但不知何故，它们似乎不起作用，尽管它们在 head 部分显示正常。

我将以下代码行添加到**head.phtml**

```
<!--pankaj js edition-->

<script src="<?php echo $this->getJsUrl(); ?>jQuery_1205141001.js" type="text/javascript"></script>
<script src="<?php echo $this->getJsUrl(); ?>Common_1205141001.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script> 
```

当页面被渲染时，它们显示在头部，但似乎没有做他们应该做的工作。

难道我做错了什么。因为这些文件在简单的 html 页面中运行良好。我需要在其他地方添加文件吗？很抱歉打扰，但我是 magento 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:56:53.110

这可能有2个问题

1）您正在尝试在第一行中包含的 jQuery_1205141001.js 中执行 jquery，因为稍后您将包含 jquery 库
2）您的 jquery 与原型冲突。为此，您需要在执行任何 jquery 代码之前和包含 jquery 库之后在 phtml 中添加它

```
<script type="text/javascript">
var $j = jQuery.noConflict();
</script> 
```

然后对 jquery 使用 $j.function 而不是 $.function 例如

```
$j(document.documentElement).keyup(function (event) {

  if (event.keyCode == 37) {

    $j('#prev1').click();
  } else if (event.keyCode == 39) {
    $j('#next1').click();
  }
}); 
```

代替

```
$(document.documentElement).keyup(function (event) {

  if (event.keyCode == 37) {

    $('#prev1').click();
  } else if (event.keyCode == 39) {
    $('#next1').click();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:02:54.023

与其直接编辑 head.phtml 文件来添加您的 JS 引用，不如将其真正放入您的主题 local.xml 中，如下所示：

```
<reference name="head">
    <block type="core/text" name="google.cdn.jquery" after="-">
        <action method="setText">
            <text><![CDATA[<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
            <script type="text/javascript">jQuery.noConflict();</script>]]>
            </text>
        </action>
    </block>
    <action method="addItem"><type>skin_js</type><script>js/jQuery_1205141001.js</script></action>
</reference> 
```

还要使用 Firebug 检查 Javascript 错误。如果有导致某些 js 功能失败的 javascript 错误，firebug 会告诉你这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:15:25.240

```
<reference name="head">
      <action method="addJs"><script>[MODULE]/your.js</script></action>

    </reference> 
```

在 magento root 的 js 文件夹中创建与您的模块名称相同的文件夹，并将您的 js 文件复制到此文件夹中。

# sql - 最长前缀匹配

> ID：10715602
> 
> 赞同：1
> 
> 时间：2012-05-23T07:47:29.333
> 
> 标签：sql, postgresql, pattern-matching, longest-prefix

在 PostgreSQL 中获得准确和快速查询以获得最长前缀匹配的最佳方法是什么？

是吗：

```
A.) select * from table where column in (subselect) ;

B.) 从 strpos(column,column2) = 1 的表中选择 *
    按长度排序（column2） desc limit 1 ;

C.) select * from table where column ~ column2
    按长度排序（column2） desc 限制 1

```

我打算在更新中使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:06:17.543

我不知道在 PostgreSQL 中有一个开箱即用的函数。[递归 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)将是一个相当优雅的解决方案的关键元素（在 PostgreSQL 8.4 或更高版本中可用）
。

我假设一个表格`filter`来保存过滤器字符串：

```
CREATE TABLE filter (f_id int, string text); 
```

还有一个`tbl`要搜索最长匹配的表：

```
CREATE TABLE tbl(t_id int, col text); 
```

### 询问

```
WITH RECURSIVE
     f AS (SELECT f_id, string, length(string) AS flen FROM filter)
    ,t AS (SELECT t_id, col, length(col) AS tlen FROM tbl)
    ,x AS (
    SELECT t.t_id, f.f_id, t.col, f.string
          ,2 AS match, LEAST(flen, tlen) AS len
    FROM   t
    JOIN   f ON left(t.col, 1) = left(f.string, 1)

    UNION ALL
    SELECT t_id, f_id, col, string, match + 1, len
    FROM   x
    WHERE  left(col, match) = left(string, match)
    AND    match <= len
    )
SELECT DISTINCT
       f_id
      ,string
      ,first_value(col) OVER w AS col
      ,first_value(t_id) OVER w AS t_id
      ,(first_value(match) OVER w -1) AS longest_match
FROM   x
WINDOW w AS (PARTITION BY f_id ORDER BY match DESC)
ORDER  BY 2,1,3,4; 
```

[在这个相关答案中详细解释了最终 SELECT 的工作原理。](https://stackoverflow.com/questions/8193688/postgresql-running-count-of-rows-for-a-query-by-minute/8194088#8194088)
[sqlfiddle 上的工作演示。](http://sqlfiddle.com/#!1/1b5d6/1)

您没有定义从一组同样长的匹配中选择哪个匹配。我正在从平局中挑选一位任意获胜者。

> 我打算在更新中使用。

PostgreSQL 9.1 引入了[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)，因此您可以`UPDATE`直接在语句中使用它。

# sql - SQL Server 自动去除尾随空格

> ID：10715609
> 
> 赞同：2
> 
> 时间：2012-05-23T07:47:54.433
> 
> 标签：sql, sql-server

> **可能重复：**
> [SQL WHERE 子句匹配带有尾随空格的值](https://stackoverflow.com/questions/4166159/sql-where-clause-matching-values-with-trailing-spaces)

在查询 SQL Server（通过 Management Studio Express 了解其价值）时，我注意到在查询`varchar`字段时，条件中是否有一些尾随空格并不重要，它仍然会匹配。

以下匹配`matched`（因此它忽略搜索条件中的尾随空格）

```
select top 10 * from sometable
where somecolumn = 'matched    ' 
```

我在 2005 年和 2012 年尝试过，结果相同。

任何想法为什么会发生这种情况？它与如何`varchar`存储有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:02:56.760

这是正常行为：http: [//support.microsoft.com/kb/316626/](http://support.microsoft.com/kb/316626/)

'like' 不遵循这种行为：

```
select top 10 * from sometable
where somecolumn like 'matched    ' 
```

不会返回“**匹配**”

# java - 编辑时如何在 JTable 单元格上方显示文本

> ID：10715612
> 
> 赞同：0
> 
> 时间：2012-05-23T07:47:59.207
> 
> 标签：java, swing, jtable

当有人编辑单元格时，我想在 JTable 单元格上方显示文本。文本与工具提示几乎相同，但只有在编辑单元格时才应显示文本，并且文本应保留到编辑完成。

我怎么能做到这样的行为？

到目前为止，我尝试的是覆盖的`getCellEditor`方法，`JTable`但这只会设置标准工具提示，但我需要在编辑时永久显示文本。

```
@Override
public TableCellEditor getCellEditor(int row, int column) {
    TableCellEditor editor = super.getCellEditor(row, column);
    Component component = editor.getTableCellEditorComponent(this, getValueAt(row, column), isCellSelected(row, column), row, column);
    if(component instanceof JTextField) {
        JTextField textfield = (JTextField) component;
        textfield.setToolTipText("tooltip");
    }
    return editor;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:37:47.560

另一种选择是在您开始编辑单元格时也添加一个 JLabel（或任何组件）。每当它停止时，您就删除该组件。

因为您希望工具提示/标签出现在编辑的单元格上方，所以第一行需要一些小技巧。

这是一个显示我的意思的示例：

```
import java.awt.Container;
import java.awt.Point;
import java.util.EventObject;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.table.DefaultTableModel;

public class TestTable {

    public JFrame f;
    private JLabel tooltip;
    private MyTable table;

    public class MyTable extends JTable {

        @Override
        public boolean editCellAt(int row, int column, EventObject e) {
            boolean editCellAt = super.editCellAt(row, column, e);
            if (editCellAt) {
                Point editedCellLocation = getCellRect(getEditingRow(), getEditingColumn(), true).getLocation();
                if (tooltip != null) {
                    removeTooltip();
                }
                tooltip = new JLabel("Hello some nice tooltip");
                tooltip.setOpaque(true);
                tooltip.setSize(tooltip.getPreferredSize());
                if (getEditingRow() == 0) {
                    tooltip.setLocation(editedCellLocation.x, getTableHeader().getHeight() - tooltip.getHeight());
                    getTableHeader().add(tooltip);
                } else {
                    tooltip.setLocation(editedCellLocation.x, editedCellLocation.y - tooltip.getHeight());
                    add(tooltip);
                }
                ((JComponent) tooltip.getParent()).repaint(tooltip.getBounds());
            }
            return editCellAt;
        }

        @Override
        public void editingStopped(ChangeEvent e) {
            super.editingStopped(e);
            removeTooltip();
        }

        protected void removeTooltip() {
            if (tooltip != null) {
                Container parent = tooltip.getParent();
                parent.remove(tooltip);
                ((JComponent) parent).repaint(tooltip.getBounds());
                tooltip = null;
            }
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

    protected void initUI() {
        table = new MyTable();
        table.setModel(new TestTableModel());
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(table));
        f.setVisible(true);
    }

    public class TestTableModel extends DefaultTableModel {

        public TestTableModel() {
            super(new String[] { "DATA" }, 3);
            setValueAt(Double.valueOf(-0.1), 0, 0);
            setValueAt(Double.valueOf(+0.1), 1, 0);
            setValueAt(Double.valueOf(0), 2, 0);
        }
    }

} 
```

# html - Css 使特定的 html 成为两列布局

> ID：10715613
> 
> 赞同：2
> 
> 时间：2012-05-23T07:48:04.007
> 
> 标签：html, css

拥有当前的html：

```
<div id="divFiltros" class="DivFiltrosInforme">
    <div>
        <div>
            <span>FILTROS SELECCIONADOS</span>
        </div>
        <div>
            <span>Fecha desde:</span><span id="spFiltrosFechaDesde">01/01/2012</span>
        </div>
        <div>
            <span>Fecha hasta:</span><span id="spFiltrosFechaHasta">01/01/2012</span>
        </div>
        <div>
            <span>Clientes:</span><span id="spFiltrosClientes">Clientex</span>
        </div>
        <div>
            <span>Sección:</span><span id="spFiltrosSeccion">Cualquiera</span>
        </div>
    </div>
</div> 
```

这个CSS：

```
 .DivFiltrosInforme
{
    text-align: center;
    margin-top: 10px;
    margin-bottom: 10px;
}

    .DivFiltrosInforme > div
    {
        display: inline-block;
        padding-top: 10px;
        padding-bottom: 10px;
        padding-left: 10px;
        padding-right: 10px;
        border-style: solid;
        border-width: 2px;
    }

        .DivFiltrosInforme > div > div
        {
            padding-top: 5px;
            padding-bottom: 5px;
        }

            .DivFiltrosInforme > div > div:first-child > span
            {
                font-weight: bold;
                font-size: 14pt;
            }

            .DivFiltrosInforme > div > div > span
            {
                font-weight: bold;
                font-size: 10pt;
                margin-left: 5px;
                margin-right: 5px;
            } 
```

您将添加哪些 CSS 规则以使其成为 2 列布局（不包括作为标题的第一个 div）。考虑到 div 的数量（包含两个跨度的那些）会有所不同。最好我只想更改 CSS ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:56:31.757

看看**[CSS3 multicol 模块](http://www.w3.org/TR/css3-multicol/)**。

虽然它对 IE 的支持很差。所有其他浏览器都[已经具备](http://caniuse.com/#search=multic).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:26:13.763

你的意思是这样的？

[小提琴](http://jsfiddle.net/4SYZ4/)

我所做的只是添加`width: 50%`到`float:left`这条规则中，但添加了一个`:not`过滤器来过滤掉标题（当然，同时给标题一个标题的 id）：

```
.DivFiltrosInforme > div > div:not(#title)
{
    padding-top: 5px;
    padding-bottom: 5px;
    width: 50%;
    float: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:02:10.323

嗯，我认为你可以在两个 div（两列）上使用浮点数，然后在父 div 上，使溢出：隐藏。

我发现你的代码非常复杂（对我来说）Lolz

这是两列布局的简单代码。

[示例布局@jsFiddle.net](http://jsfiddle.net/JuvarAbrera/S4q7g/1/) <-- 点击 xD

**HTML**

```
<div id="container">
    <div id="left">
    </div>
    <div id="right">
    </div>
</div> 
```

**CSS**

```
#container {
    border:1px solid red;
    width:100%;
    height:auto;
    overflow:hidden
}

#left {
    background:blue;
    width:50%;
    height:100px;
    float:left;
    color:red;
}

#right {
    background:black;
    width:50%;
    height:100px;
    float:left;
    color:white;
} 
```

​</p>

# python - 使用视图装饰器更新 request.POST 或 request.GET

> ID：10715617
> 
> 赞同：7
> 
> 时间：2012-05-23T07:48:23.053
> 
> 标签：python, django

我尝试将我在模板和 js 中使用的代码转换为被包装函数使用的 content_type 和 object_id：

```
def translate_modelcode(function=None,redirect_field_name=None):
    """
    translate an item-code specified in settings to a content_type
    and the item-id to the object_id
    """

    def _decorator(function):
        def _wrapped_view(request, *args, **kwargs):

            item_code=request.REQUEST.get('item-code',None)
            if item_code:
                object_id = request.REQUEST.get('item-id',None)
                # resolve_modelcode get's the models name from settings
                content_type = resolve_modelcode(item_code)
                ud_dict = {'content_type':content_type,
                          'object_id':object_id}
                if request.method == 'GET':
                    request.GET.update(ud_dict)
                else:
                    request.POST.update(ud_dict)

            return function(request, *args, **kwargs)
        return _wrapped_view

    if function is None:
        return _decorator
    else:
        return _decorator(function) 
```

我卡住的地方是 request.POST / request.GET QueryDict 的更新。Django 报告这些 dicts 是不可变的。我该如何更新它们？

从[djangodocs](https://docs.djangoproject.com/en/1.4/ref/request-response/#querydict-objects)我认为 .update 将使用那里描述的“最后一个值逻辑”，我会非常满意。但这并没有发生。创建一个副本并将其重新分配给 request.GET 似乎也不起作用：

```
request.GET = request.GET.copy().update(ud_dict) 
```

SO上有[一个关于这个主题的类似问题](https://stackoverflow.com/questions/9093299/decorator-overwriting-post-get-and-request-in-django-doing-it-right)，但它从未得到令人满意的答案。使用与该问题相同的代码，我只是在更新后得到 request.POST 或 request.GET 的空返回：

```
request._get = request.GET.copy()
import ipdb;ipdb.set_trace()

ipdb> request.GET
ipdb> 
```

那么我能做些什么呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T08:37:04.693

该`update(...)`方法没有返回值，它就地更新其实例。所以`request.GET = request.GET.copy().update(ud_dict)`你应该写而不是

```
request.GET = request.GET.copy()
request.GET.update(ud_dict) 
```

# spring - junit配置文件中的bean定义

> ID：10715620
> 
> 赞同：1
> 
> 时间：2012-05-23T07:48:57.597
> 
> 标签：spring, junit, autowired

我正在使用 junit 来测试我的一些服务。我使用 spring 来注入服务及其所有依赖项。我的测试类如下所示。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/location/MyServiceTest-context.xml"})
@Transactional
public class MyServiceTest extends TestSupport {

    @Autowired
    private MyService myService;

    @Test
    public void testX() throws Exception {
        ...
    }
} 
```

配置文件是：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans      
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

     <bean id="entityBasePackages" class="java.lang.String">
         <constructor-arg value="com.package1.model"/>
     </bean>

     <bean id="bean1" class="org.easymock.EasyMock" factory-method="createMock">
         <constructor-arg value="com.package2.bean1"/>
     </bean>

     <bean id="bean2" class="org.easymock.EasyMock" factory-method="createMock">
         <constructor-arg value="com.package3.bean2"/>
     </bean>

     <context:component-scan base-package="com.package4.MyService"/>

 </beans> 
```

MyService 使用 bean1。bean1 依赖于 bean2，即它使用它。当我像这样运行我的测试时，它工作正常。但是，如果我在配置 xml 中将 bean2 声明在 bean1 之上，则测试失败并显示

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.package2.bean1] 
```

我猜 Spring 会读取文件，当它到达一个 bean 定义时，会尝试连接它——这就是它在我的情况下崩溃的原因。有没有办法告诉 Spring 读取整个文件，然后尝试连接 bean？这样我就可以编写我的 bean 定义而不用担心它们的顺序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:30:40.763

我意识到 bean1 和 bean2 不是最好的选择名称。但这是我使用它们的方式：

```
@Service("bean1")
public class Bean1{

    ...

    @Validators(value = {
            @Validator(validatorClass = Bean2.class, parameters = {@Parameter(0)}, shortCircuit = true)})
    public void someMethod(SomeObject someObject){
         ...
    }

    ...
} 
```

MyService 在内部使用 bean1 服务。

# c# - 在当前布局中对任务和取消令牌调用 Dispose()

> ID：10715622
> 
> 赞同：1
> 
> 时间：2012-05-23T07:49:00.827
> 
> 标签：c#, multithreading, c#-4.0, task, cancellation-token

我有以下代码，我试图弄清楚是否可以在任务和取消令牌上显式调用 dispose。我读过微软建议在任务上调用 dispose() ，除非你必须做一些奇怪的事情才能调用它。我也很欣赏可能有更好的方法来做到这一点，但我很想知道它是否适用于当前的设置。

```
 public void UpdateSProcList(CancellationToken cancelTask)
    {
        Task parentTask = Task.Factory.StartNew(() => 
            {
                //Call the handling method.
                ChildTaskSync(cancelTask);
            });
    }

    public void ChildTaskSync(CancellationToken cancelTask)
    {
        SProcInformationEventArgs sProcListRetrieval = new SProcInformationEventArgs();

        //Check for cancellation.
        if(!cancelTask.IsCancellationRequested)
        {
            try
            {
                ObtainSProcList(sProcListRetrieval);
            }
            catch (AggregateException AEx)
            {
                if (AEx.InnerException is OperationCanceledException) 
                {
                    ....
                }
            }
            finally
            {
                //Call method to raise event.
                OnVerificationCompleted(this, sProcListRetrieval);
            }
        }
        else
        {
            sProcListRetrieval.CarriedOutToCompletion = false;
            OnVerificationCompleted(this, sProcListRetrieval);
        }
    } 
```

第一种方法允许 GUI 线程返回并继续更新 UI。第二种方法检索存储过程列表。

谢谢你的时间。

# jquery - jQuery 表单验证未按预期工作

> ID：10715627
> 
> 赞同：0
> 
> 时间：2012-05-23T07:49:20.027
> 
> 标签：jquery, validation

我不太确定我是否了解如何使用 jquery 的验证插件。我尝试验证一个输入字段（将其设置为必需，最小长度为 1）。然后我尝试提交表单而不在输入字段中输入任何值，但这并没有阻止我提交它。

我的 jQuery 代码如下所示：

```
$(document).ready(function() {
    // ... other non relevant code ...

    $("#organisationsantrag").validate({
        rules: {
            ouKostenstelle: {
                required: true,
                minlength: 1
            }
        },
        messages: {
            ouKostenstelle: {
                required: "Nothing entered",
                minlength: "Too short"
            }
        }
    })
}) 
```

这就是 HTML 部分的样子（因为它是生成的，所以看起来不是很漂亮）：

```
<table>
    <tr>
        <td>
            <FORM NAME="formAbschicken" METHOD="POST" ACTION='http://target' ID="organisationsantrag">
                <table BORDER="0">
                    <tr>
                        <td COLSPAN="2"><HR width="100%"></td>
                    </tr>
                    <tr>
                        <td>Antragsteller</td>
                        <td><INPUT TYPE="TEXT" NAME="cnAntragsteller" ID="cnAntragsteller"  VALUE=""></td>
                    </tr>
                    <tr>
                        <td COLSPAN="2"><HR width="100%" class="trennlinie"></td>
                    </tr>
                    <tr>
                        <td><P CLASS="ouName">Name der OE</P></td>    
                        <td><INPUT TYPE="TEXT" NAME="ouName" CLASS="ouName" ID="ouName" READONLY="READONLY"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td><P CLASS="ouNummer">Betrieb</P></td>    
                        <td><INPUT TYPE="TEXT" NAME="ouNummer" CLASS="ouNummer" ID="ouNummer" READONLY="READONLY"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td><P CLASS="ouKostenstelle">Kostenstelle</P></td>
                        <td><INPUT TYPE="TEXT" NAME="ouKostenstelle" CLASS="ouKostenstelle" ID="ouKostenstelle"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td COLSPAN="2"><HR width="100%" class="trennlinie"></td>
                    </tr>
                    <tr>
                        <td><P CLASS="jbdAntragsteller">Bezeichnung der Funktion</P></td>
                        <td><INPUT TYPE="TEXT" NAME="jbdAntragsteller" CLASS="jbdAntragsteller" ID="jbdAntragsteller" READONLY="READONLY"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td><P CLASS="jbAntragsteller">Planstellen-Nr.</P></td>    
                        <td><INPUT TYPE="TEXT" NAME="jbAntragsteller" CLASS="jbAntragsteller" ID="jbAntragsteller" READONLY="READONLY"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td><P CLASS="ccAntragsteller">Kostenstelle</P></td>
                        <td><INPUT TYPE="TEXT" NAME="ccAntragsteller" CLASS="ccAntragsteller" ID="ccAntragsteller" READONLY="READONLY"  VALUE=""></td>    
                    </tr>
                    <tr>
                        <td><P CLASS="pnAntragsteller">Personalnummer</P></td>
                        <td><INPUT TYPE="TEXT" NAME="pnAntragsteller" CLASS="pnAntragsteller" ID="pnAntragsteller" READONLY="READONLY"  VALUE=""></td>
                    </tr>
                    <tr>
                        <td><P CLASS="cnLeiter">Übergeordneter Leiter</P></td>
                        <td><INPUT TYPE="TEXT" NAME="cnLeiter" CLASS="cnLeiter" ID="cnLeiter" READONLY="READONLY"  VALUE=""></td>
                    </tr>
                    <tr>
                        <td COLSPAN="2"><HR width="100%"></td>
                    </tr>
                    <tr>
                        <td>Visiert durch</td>
                        <td><INPUT TYPE="TEXT" NAME="cnVisum" ID="cnVisum" READONLY="READONLY"  VALUE="Current User"></td>
                    </tr>
                    <tr>
                        <td><P CLASS="directors">Managing Director</P></td>    
                        <td><select name="directors" size="0" CLASS="directors" ID="directors" ></select></td>    
                    </tr>
                    <tr></tr>    
                    <tr>
                        <td></td>    
                        <td><INPUT  TYPE="SUBMIT" NAME="Submit" VALUE="Submit"></td>    
                    </tr>
                </table>
            </FORM>
        </td>
    </tr>
</table> 
```

我没有收到任何错误。这就是为什么我认为我没有得到验证方法的语法。

**更新**：我不知道为什么，但是在我对 jquery 的其他部分进行了一些更改之后它就可以工作了。我还把表单验证部分放在了脚本标签的开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:57:41.070

```
$('[type="submit"]').live('click', function(e) {
    if (!$(this).parents('form').valid()) {
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:39:23.007

迟到总比不到好。

问题与我放置代码的位置有关。由于我使用了一个工作流工具，它为所有网站提供了一个模板，因此我无法将 javascript 放在模板头部部分。我不得不把它放在桌子的一个 td 内。

如果代码是在实际输入出现之前放置的，那么它将不起作用，将其放置在元素之后确实可以解决问题。

# python - 打开一个大的 JSON 文件

> ID：10715628
> 
> 赞同：12
> 
> 时间：2012-05-23T07:49:22.563
> 
> 标签：python, json, nltk

当我尝试打开时，我有一个 1.7 GB 的 JSON 文件，`json.load()`然后它给出了内存错误，如何在 python 中读取 JSON 文件？

我的 JSON 文件是一个包含特定键的大型对象数组。

**编辑：**好吧，如果它只是一大堆对象并且事先知道对象的结构，那么就不需要使用我们可以逐行读取它的工具。一行将只包含数组的一个元素。我注意到这是 json 文件的存储方式，对我来说它的工作原理是：

```
>>>for line in open('file.json','r').readline():
...    do something with(line) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T07:53:04.010

您需要一个增量 json 解析器，如[yajl](http://lloyd.github.com/yajl/)及其 python 绑定之一。增量解析器从输入中读取尽可能少的内容，并在解码有意义的内容时调用回调。例如，要从一个大的 json 文件中只提取数字：

```
class ContentHandler(YajlContentHandler):
    def yajl_number(self, ctx, val):
         list_of_numbers.append(float(val))

parser = YajlParser(ContentHandler())
parser.parse(some_file) 
```

有关更多信息，请参阅[http://pykler.github.com/yajl-py/](http://pykler.github.com/yajl-py/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-17T22:25:23.590

我在**yajl**库周围找到了另一个 python 包装器，即[ijson](https://github.com/ICRAR/ijson)。

由于以下原因，它对我来说比[yajl-py更有效：](http://pykler.github.io/yajl-py/)

*   yajl-py 没有在我的系统上检测到 yajl 库，我必须破解代码才能使其工作
*   ijson 代码更紧凑，更易于使用
*   ijson 可以与 yajl v1 和 yajl v2 一起使用，它甚至有*纯 python yajl 替换*
*   ijson 有非常好的 ObjectBuilder，它不仅可以帮助从解析的流中提取事件，还可以提取有意义的子对象，并且在您指定的级别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T23:27:21.373

我已经将 Dask 用于大型遥测 JSON-Lines 文件（换行符分隔）......
Dask 的好处是它为您做了很多工作。
有了它，您可以读取数据、处理数据并写入磁盘，而无需将其全部读入内存。
Dask 还将为您并行化并使用多个内核（线程）...

有关 Dask 袋的更多信息：
[https ://examples.dask.org/bag.html](https://examples.dask.org/bag.html)

```
import ujson as json #ujson for speed and handling NaNs which are not covered by JSON spec
import dask.bag as db

def update_dict(d):
    d.update({'new_key':'new_value', 'a':1, 'b':2, 'c':0})
    d['c'] = d['a'] + d['b']
    return d

def read_jsonl(filepaths):
    """Read's a JSON-L file with a Dask Bag

    :param filepaths: list of filepath strings OR a string with wildcard
    :returns: a dask bag of dictionaries, each dict a JSON object
    """
    return db.read_text(filepaths).map(json.loads)

filepaths = ['file1.jsonl.gz','file2.jsonl.gz']
#OR
filepaths = 'file*.jsonl.gz' #wildcard to match multiple files

#(optional) if you want Dask to use multiple processes instead of threads
# from dask.distributed import Client, progress
# client = Client(threads_per_worker=1, n_workers=6) #6 workers for 6 cores
# print(client)

#define bag containing our data with the JSON parser
dask_bag = read_jsonl(filepaths)

#modify our data
#note, this doesn't execute, it just adds it to a queue of tasks
dask_bag.map(update_dict)

#(optional) if you're only reading one huge file but want to split the data into multiple files you can use repartition on the bag
# dask_bag = dask_bag.repartition(10)

#write our modified data back to disk, this is when Dask actually performs execution
dask_bag.map(json.dumps).to_textfiles('file_mod*.jsonl.gz') #dask will automatically apply compression if you use .gz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T21:15:09.963

`json`当从本地磁盘访问大数据文件时，我发现 yajl（因此 ijson）比模块慢得多。当与 Cython 一起使用时，这是一个声称比 yajl/ijson 性能更好的模块（仍然比 慢`json`）：

[http://pietrobattiston.it/jsaone](http://pietrobattiston.it/jsaone)

正如作者指出的那样，性能可能比`json`通过网络接收文件时更好，因为增量解析器可以更快地开始解析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T14:11:27.220

对于简单的用途（即遍历顶级数组中的项目），[json-stream-parser](https://pypi.org/project/json-stream-parser/)看起来不错（我没有使用它）。它似乎是一个独立的 JSON 解析器，用 234 行纯 Python 从头开始​​实现。

它不需要将 JSON 存储为“每行一个对象”或类似的东西。JSON 可以是一行，也可以有换行，没关系。

用法：

```
import sys
from json_stream_parser import load_iter
for obj in load_iter(sys.stdin):
    print(obj) 
```

# android - Android 2.x 是否支持 QVGA 分辨率？

> ID：10715636
> 
> 赞同：2
> 
> 时间：2012-05-23T07:49:50.760
> 
> 标签：android, android-manifest, galaxy

基于支持多种屏幕尺寸的Android doc，Android 2.x似乎支持QVGA作为小屏幕尺寸。在我的应用程序清单文件中，我有

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

和

```
<uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="15" /> 
```

但最近，一位客户联系我说 google play 商店说他的三星 Galaxy Y 与我的应用程序不兼容。我查看了 Galaxy Y，唯一让它与其他型号不同的是它有一个小的 3" QVGA (240x320) 显示屏。它正在运行姜饼。

所以我的问题是 QVGA 对 Android 2.x 的支持是否存在任何已知问题？我还四处搜索并在一些应用程序的发行说明中看到，他们特别提到了 QVGA 支持，这让我认为它不支持开箱即用。有人可以证实这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:56:12.693

是的，Android 2.x 支持 QVGA 分辨率显示器。事实上，您甚至可以在 QVGA 显示器上运行最新版本的 Android。

`small`从到的跳跃`normal`仅发生在 3 英寸左右，很大程度上取决于设备制造商。就 Galaxy Y 而言，它很可能实际上是一个`small ldpi`显示器 (QVGA)。

Android 开发者[文档](http://developer.android.com/guide/practices/screens_support.html)指出：

> 小屏幕至少为 426dp x 320dp

对于`ldpi`设备，每个 dp 等于 0.75 像素 - 换句话说，`small`屏幕至少为 320 x 240 像素。只有`small`屏幕支持 QVGA 分辨率。

# asp.net-mvc - 在实体框架中存储对象（一对多关系）

> ID：10715638
> 
> 赞同：1
> 
> 时间：2012-05-23T07:49:59.313
> 
> 标签：asp.net-mvc, entity-framework, one-to-many

实际上，我正在研究简单的项目 MVC4 + EF，其中我有关系应用程序许可证。在应用程序上可能有零个或多个许可证，但每个许可证只有一个应用程序。我注意到操作编辑/创建新许可证存在一些问题。我过去了部分代码。

我的实体域定义：

```
public class Application
{
    public Application()
    {
        Licenses = new List<License>();
    }

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ApplicationID { get; set; }

    public string Name { get; set; }

    public List<License> Licenses { get; set; }
}

public class License
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [HiddenInput(DisplayValue = false)]
    public Guid LicenseID { get; set; }

    [Required]
    public string Name { get; set; }

    public Version Version { get; set; }

    public Application Application { get; set; }
} 
```

应用程序和许可证之间的一对多定义：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Application>()
        .HasMany(app => app.Licenses)
        .WithRequired()
        .Map(conf => conf.MapKey("OwnerID"))
        .WillCascadeOnDelete(false);

    modelBuilder.Entity<License>()
        .HasRequired(lic => lic.Application)
        .WithMany()
        .Map(conf => conf.MapKey("ApplicationID"))
        .WillCascadeOnDelete(false);
} 
```

许可证控制器中的操作：

```
public ActionResult Create(Guid applicationID)
{
    var application = repositoryApps.Applications.FirstOrDefault(a => a.ApplicationID == applicationID);

    var license = new License {Application = application};
    application.Licenses.Add(license);

    return View("Edit", license);
}

public ActionResult Edit(License license)
{
    return View(license);
}

[HttpPost]
public ActionResult Save(License license)
{
    if(ModelState.IsValid)
    {
        repositoryLics.SaveLicense(license);
        TempData["message"] = string.Format("{0} has been saved", license.Name);

        return RedirectToAction("Index", "Application");
    }
    else
    {
        return View("Edit", license);
    }
} 
```

编辑fincense的视图：

```
@using (Html.BeginForm("Save", "License"))
{
    @Html.EditorForModel(Model);

    <input type="submit" value="Save" class="btn btn-primary"/>

    @Html.ActionLink("Cancel", "Index", "Application", null, new {@class = "btn"})
} 
```

我在创建新许可证时遇到问题。我正在调用操作 Create 并将其传递给它的父 ApplicationID。经过一些准备后，我将许可证实例传递给编辑视图，在该视图中可以编辑新创建的对象。在编辑视图（许可证）中，一切似乎都很好。我有一个非空字段应用程序的许可证（我在其中收集了许可证）。当我提交编辑表单时，我将返回操作保存（许可证）。不幸的是，在这个地方属性 Application 等于 null，所以我错过了新创建的许可证和父应用程序之间的关系。

有没有人建议我如何避免这个问题？我应该如何存储新创建的许可证对象？我会感谢任何提示或建议。

问候，
格热戈日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:06:22.053

我在你的课上看不到`ApplicationID`财产`License`！！？？？

您应该添加此属性并将其添加到 EditorTemplate 中，如果您愿意，可能会隐藏。顺便说一句，将您的问题添加`License` `EditorTemplate`到您的问题中，让我们知道。

# c++ - 生成文件中的 qt gui 项目错误

> ID：10715640
> 
> 赞同：1
> 
> 时间：2012-05-23T07:50:00.403
> 
> 标签：c++, windows, eclipse, qt, makefile

我刚刚在 Windows 7 上安装了 qt sdk 和 qt eclipse 插件，之后当我创建一个新的 gui 项目时，我在构建时遇到了这 2 个错误：

```
***make missing separator.Stop. 
```

和

```
make:***[debug]Error 2 
```

第一个错误出现在

```
{.}.cpp{debug\}.obj::
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
    $<
<<//here(it doesn't find any separator) 
```

我该如何解决这两个错误？

我的生成文件：

```
#############################################################################
# Makefile for building: lala
# Generated by qmake (2.01a) (Qt 4.8.1) on: Wed May 23 11:23:51 2012
# Project:  lala.pro
# Template: app
#############################################################################

####### Compiler, tools and options

CC            = cl
CXX           = cl
DEFINES       = -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -    DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 - DQT_THREAD_SUPPORT
CFLAGS        = -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -W3 $(DEFINES)
CXXFLAGS      = -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -GR -EHsc -W3 -w34100 -w34189   $(DEFINES)
INCPATH       = -I"..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\include\QtCore" -   I"..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\include\QtGui" -I"..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\include" - I"..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\include\ActiveQt" -I"debug" -I"." -I"..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\default"
LINK          = link
LFLAGS        = /LIBPATH:"c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib" /NOLOGO /DYNAMICBASE     /NXCOMPAT /DEBUG /MANIFEST /MANIFESTFILE:"debug\lala.intermediate.manifest"   /SUBSYSTEM:WINDOWS "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common- Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*'  processorArchitecture='*'"
LIBS          = c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib\qtmaind.lib c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib\QtGuid4.lib  c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib\QtCored4.lib 
QMAKE         = c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin\qmake
IDC           = c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin\idc.exe
IDL           = midl
ZIP           = zip -r -9
DEF_FILE      = 
RES_FILE      = 
COPY          = copy /y
SED           = 
COPY_FILE     = $(COPY)
COPY_DIR      = xcopy /s /q /y /i
DEL_FILE      = del
DEL_DIR       = rmdir
MOVE          = move
CHK_DIR_EXISTS= if not exist
MKDIR         = mkdir
INSTALL_FILE    = $(COPY_FILE)
INSTALL_PROGRAM = $(COPY_FILE)
INSTALL_DIR     = $(COPY_DIR)

####### Output directory 

OBJECTS_DIR   = debug

####### Files

SOURCES       = main.cpp \
    lala.cpp debug\moc_lala.cpp
OBJECTS       = debug\main.obj \
    debug\lala.obj \
    debug\moc_lala.obj
DIST          = 
QMAKE_TARGET  = lala
DESTDIR        = debug\ #avoid trailing-slash linebreak
TARGET         = lala.exe
DESTDIR_TARGET = debug\lala.exe

####### Implicit rules

.SUFFIXES: .c .cpp .cc .cxx

{.}.cpp{debug\}.obj::
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{.}.cc{debug\}.obj::
$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{.}.cxx{debug\}.obj::
$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{.}.c{debug\}.obj::
$(CC) -c $(CFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{debug}.cpp{debug\}.obj::
$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{debug}.cc{debug\}.obj::
$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{debug}.cxx{debug\}.obj::
$(CXX) -c $(CXXFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

{debug}.c{debug\}.obj::
$(CC) -c $(CFLAGS) $(INCPATH) -Fodebug\ @<<
$<
<<

####### Build rules

first: all
all: Makefile.Debug $(DESTDIR_TARGET)

$(DESTDIR_TARGET): ui_lala.h $(OBJECTS) 
$(LINK) $(LFLAGS) /OUT:$(DESTDIR_TARGET) @<< 
  $(OBJECTS) $(LIBS)
<<
mt.exe -nologo -manifest "debug\lala.intermediate.manifest" - outputresource:$(DESTDIR_TARGET);1

qmake:  FORCE
@$(QMAKE) -o Makefile.Debug lala.pro

dist:
$(ZIP) lala.zip $(SOURCES) $(DIST) lala.pro  ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\qconfig.pri ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\modules\qt_webkit_version.pri ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\qt_functions.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\qt_config.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\exclusive_builds.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\default_pre.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\default_pre.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\debug.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\debug_and_release.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\default_post.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\default_post.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\build_pass.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\rtti.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\exceptions.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\stl.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\shared.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\embed_manifest_exe.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\embed_manifest_dll.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\warn_on.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\qt.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\thread.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\moc.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\win32\windows.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\resources.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\uic.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\yacc.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\lex.prf ..\..\..\..\QtSDK\Desktop\Qt\4.8.1\msvc2010\mkspecs\features\include_source_dir.prf c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\lib\qtmaind.prl  HEADERS RESOURCES IMAGES SOURCES  OBJECTIVE_SOURCES FORMS YACCSOURCES YACCSOURCES LEXSOURCES 

clean: compiler_clean 
-$(DEL_FILE) debug\main.obj debug\lala.obj debug\moc_lala.obj
-$(DEL_FILE) debug\lala.intermediate.manifest debug\lala.exp debug\lala.ilk vc*.pdb vc*.idb

distclean: clean
-$(DEL_FILE) debug\lala.pdb
-$(DEL_FILE) $(DESTDIR_TARGET)
-$(DEL_FILE) Makefile.Debug

check: first

mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_moc_header_make_all: debug\moc_lala.cpp
compiler_moc_header_clean:
-$(DEL_FILE) debug\moc_lala.cpp
debug\moc_lala.cpp: ui_lala.h \
    lala.h
C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin\moc.exe $(DEFINES) $(INCPATH) -   D_MSC_VER=1600 -DWIN32 lala.h -o debug\moc_lala.cpp

compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
-$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_uic_make_all: ui_lala.h
compiler_uic_clean:
-$(DEL_FILE) ui_lala.h
ui_lala.h: lala.ui
c:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin\uic.exe lala.ui -o ui_lala.h

compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean: compiler_moc_header_clean compiler_uic_clean 

####### Compile

debug\main.obj: main.cpp lala.h \
    ui_lala.h

debug\lala.obj: lala.cpp lala.h \
    ui_lala.h

debug\moc_lala.obj: debug\moc_lala.cpp 

####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:20:28.120

这可能是由于您的`Makefile`.

`make***make is a fatal error`，因此它无法继续出现此错误。如果您有行号：缺少分隔符错误指示的信息，请尝试将 TAB 放入该行并重新运行`make`。

其他分隔符是`:`,`=`等等。并且还要检查 Makefile 中是否有空格 b/n 分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:57:42.913

如果您下载了使用`qmake/gcc`工具链编译的 Qt SDK，那么您需要制作规范文件（win32-g++），它`g++`用作编译器，而不是`cl`规范文件建议的（Microsoft Visual C++ 编译器）。

但是如果你有使用`nmake/cl`工具链编译的 Qt SDK，那么你的规范文件是有效的，你只需要使用`nmake`而不是`qmake`.

# visual-studio-2010 - 从基本解决方案继承 Visual Studio 解决方案

> ID：10715646
> 
> 赞同：1
> 
> 时间：2012-05-23T07:50:29.387
> 
> 标签：visual-studio-2010

我有一个受源代码控制的解决方案文件，我想将其扩展到另一个解决方案，其中包含比原始项目更多的项目。但是，我希望每次更新源时都对原始解决方案进行更改以影响我的扩展解决方案。

这可能吗？

# javascript - 在 div 中显示通过 ajax 调用的脚本的进度

> ID：10715649
> 
> 赞同：2
> 
> 时间：2012-05-23T07:50:38.063
> 
> 标签：javascript, ajax, progress

我正在使用 ajax 调用脚本。我想在页面上显示脚本执行的进度。

我的意思是我想在 div 中逐步显示以下消息：

```
//after execution of section 1
Section 1 of script executed successfully.
//after execution of section 2
Section 2 of script executed successfully. 
//after execution of last section
Script execution complete. 
```

我使用的方法是仅在脚本完全执行后才显示所有 3 条消息。

```
var script1_ajax = new XMLHttpRequest();

    script1_ajax.onreadystatechange=function() {            
        if (script1_ajax.readyState==4 && script1_ajax.status==200) {

            document.getElementById('result').innerHTML = script1_ajax.responseText;

        }
    } 
```

我不想将我的脚本分成多个脚本。

请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:57:53.767

有多种技术可用于保持与服务器的连接打开并从该连接获取临时更新，这些技术采用统称“comet” [，在此处进行了描述](http://en.wikipedia.org/wiki/Comet_%28programming%29)。长轮询、带有分块的隐藏 iframe、某些浏览器上的 XHR 等。其中一个或多个可能对您有用。请注意，不同的技术适用于不同的浏览器，每种技术都有优点和缺点。

几年后情况会好很多，那时我们可以依赖[网络套接字](http://dev.w3.org/html5/websockets/)，但目前这不是一个选择，除非您可以将您的站点/应用程序的使用限制在[当前支持它们的少数浏览器中](http://caniuse.com/#feat=websockets)。

# sql - 为每个帐户运行计数查询

> ID：10715654
> 
> 赞同：1
> 
> 时间：2012-05-23T07:51:14.883
> 
> 标签：sql, database, oracle

我正在对 Gerrit 进行一些扩展。我有以下查询来从 gerrit DB 中获取特定 ACCOUNT_ID 的 TOTAL COMMITS、TOTOAL REVIEW COMMENTS...等。

```
with 
  changeids as
    (select change_id from PATCH_SETS where UPLOADER_ACCOUNT_ID=1001961),
  patchcommentstoothers as
    (select count(*) c from patch_comments where AUTHOR_ID!=1001961 AND Change_id in (select change_id from changeids)),
  ownerchanges as
    (select count(*) c from changes where owner_account_ID=1001961 and OPEN='Y'),
  changemessages as
    (select count(*) c from change_messages where AUTHOR_ID=1001961 and change_id not in (select change_id from changeids))
select pcto.c TOT_PATCH_COMMENTS, oc.c TOT_CHANGES, cm.c TOT_CHANGE_MESSAGES
from patchcommentstoothers pcto, ownerchanges oc, changemessages cm; 
```

现在通过上面的查询，我可以获得一个用户的三个计数。我想对所有 ACCOUNT_ID 运行上述查询。像为每个账户运行这个查询（不仅仅是这里的 1001961）并一次性取回所有账户的所有记录。

ACCOUNT 表具有以下列：

```
"REGISTERED_ON" TIMESTAMP (6) NOT NULL ENABLE,
"FULL_NAME"       VARCHAR2(255 BYTE),
"PREFERRED_EMAIL" VARCHAR2(255 BYTE),
"CONTACT_FILED_ON" TIMESTAMP (6),
"MAXIMUM_PAGE_SIZE"   NUMBER(6,0) DEFAULT 0,
"SHOW_SITE_HEADER"    CHAR(1 BYTE) DEFAULT 'N',
"USE_FLASH_CLIPBOARD" CHAR(1 BYTE) DEFAULT 'N',
"DOWNLOAD_URL"        VARCHAR2(20 BYTE),
"DOWNLOAD_COMMAND"    VARCHAR2(20 BYTE),
"COPY_SELF_ON_EMAIL"  CHAR(1 BYTE) DEFAULT 'N',
"DATE_FORMAT"         VARCHAR2(10 BYTE),
"TIME_FORMAT"         VARCHAR2(10 BYTE),
"INACTIVE"            CHAR(1 BYTE) DEFAULT 'N',
"ACCOUNT_ID"          NUMBER(11,0) DEFAULT 0 
```

我宁愿不使用程序。

PS - 我很讨厌 Oracle SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:13:49.397

```
with
  changeids
as
(
  select
    UPLOADER_ACCOUNT_ID,
    change_id
  from
    PATCH_SETS
  group by
    UPLOADER_ACCOUNT_ID,
    change_id
),
  patchcommentstoothers
as
(
  select
    changeids.UPLOADER_ACCOUNT_ID,
    count(*) c
  from
    changeids
  inner join
    patch_comments
      ON  changeids.UPLOADER_ACCOUNT_ID != patch_comments.AUTHOR_ID
      AND changeids.change_id            = patch_comments.change_id
  group by
    changeids.UPLOADER_ACCOUNT_ID 
),
  ownerchanges
as
(
  select
    owner_account_ID,
    count(*) c
  from
    changes
  where
    OPEN='Y'
  group by
    owner_account_ID
),
  changemessages
as
(
  select
    change_messages.AUTHOR_ID,
    count(*) c
  from
    change_messages
  left join
    changeids
      on  changeids.UPLOADER_ACCOUNT_ID = change_messages.AUTHOR_ID
      AND changeids.change_id           = change_messages.change_id
  where
    changeids.change_id IS NULL
  group by
    change_messages.AUTHOR_ID
)

select
  accounts.ACCOUNT_ID,
  pcto.c   TOT_PATCH_COMMENTS,
  oc.c     TOT_CHANGES,
  cm.c     TOT_CHANGE_MESSAGES
from
  accounts
LEFT JOIN
  patchcommentstoothers pcto
    ON accounts.ACCOUNT_ID = pcto.UPLOADER_ACCOUNT_ID
LEFT JOIN
  ownerchanges          oc
    ON accounts.ACCOUNT_ID = oc.owner_account_ID
LEFT JOIN
  changemessages        cm
    ON accounts.ACCOUNT_ID = cm.AUTHOR_ID
; 
```

CTE 现在计算每个用户的值。

最后的选择假定您有一个`user`列出所有用户的表。

如果您按用户过滤最终查询，CTE 将只计算最终结果中的用户的结果。

# ios - 如何为uitableview的所有行和所有部分创建索引路径？

> ID：10715655
> 
> 赞同：9
> 
> 时间：2012-05-23T07:51:16.223
> 
> 标签：ios, xcode, uitableview, nsindexpath

我有一张有 n 个部分的桌子。每个部分包含一行。如何为表创建索引路径？有一种方法可以为所有可见行创建索引路径`[self.tableView indexPathsForVisibleRows]`我需要类似的东西`indexPathsForAllRows`

我需要所有这些来仅更新表中的数据，因为方法`[self.tableView reloadData];`会使用页眉和页脚更新所有表。这就是为什么我必须使用`reloadRowsAtIndexPaths`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T08:30:36.937

您不需要重新加载*所有*行。您只需要重新加载可见单元格（这就是`indexPathsForVisibleRows`存在的原因）。

`cellForRowAtIndexPath:`一旦它们变得可见，屏幕外的单元格将获取它们的新数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-21T06:39:46.547

这是 Swift 3 中的解决方案

```
func getAllIndexPaths() -> [IndexPath] {
    var indexPaths: [IndexPath] = []

    // Assuming that tableView is your self.tableView defined somewhere
    for i in 0..<tableView.numberOfSections {
        for j in 0..<tableView.numberOfRows(inSection: i) {
            indexPaths.append(IndexPath(row: j, section: i))
        }
    }
    return indexPaths
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-25T23:11:41.920

我`UITableView`根据@Vakas 的回答做了一个扩展。还必须检查节和行`> 0`以防止空`UITableView`s 崩溃：

```
extension UITableView{
    func getAllIndexes() -> [NSIndexPath] {
        var indices = [NSIndexPath]()
        let sections = self.numberOfSections
        if sections > 0{
            for s in 0...sections - 1 {
                let rows = self.numberOfRowsInSection(s)
                if rows > 0{
                    for r in 0...rows - 1{
                        let index = NSIndexPath(forRow: r, inSection: s)
                        indices.append(index)
                    }
                }
            }
        }
        return indices
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-19T11:38:21.237

此代码将为您提供完整的索引：

```
extension UITableView {
    func allIndexes() -> [IndexPath] {
        var allIndexes: [IndexPath] = [IndexPath]()

        let sections = self.sectionCount() ?? 0
        if sections > 1 {
            for section in 0...sections-1 {
                let rows = self.rowCount(section: section) ?? 0
                if rows > 1 {
                    for row in 0...rows-1 {
                        let index = IndexPath(row: row, section: section)
                        allIndexes.append(index)
                    }
                } else if rows == 1 {
                    let index = IndexPath(row: 0, section: section)
                    allIndexes.append(index)
                }
            }
        } else if sections == 1 {
            let rows = self.rowCount(section: 0) ?? 0
            if rows > 1 {
                for row in 0...rows-1 {
                    let index = IndexPath(row: row, section: 0)
                    allIndexes.append(index)
                }
            } else if rows == 1 {
                let index = IndexPath(row: 0, section: 0)
                allIndexes.append(index)
            }
        }
        return allIndexes
    }
} 
```

# php - 在 money_format 函数中出现致命错误

> ID：10715658
> 
> 赞同：10
> 
> 时间：2012-05-23T07:51:26.993
> 
> 标签：php

为什么会出现这个错误？

代码：

```
setlocale(LC_MONETARY, "en_US");
$pricetotal = money_format("%10.2n", $pricetotal); 
```

服务器详细信息。

```
Apache Version : 2.2.21  
PHP Version : 5.3.8 
```

我收到以下错误

```
Fatal error: Call to undefined function money_format() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T07:56:08.237

从[手册](http://php.net/manual/en/function.money-format.php)：

> 仅当系统具有功能`money_format()`时才定义该`strfmon` 功能。例如，Windows 没有，因此`money_format()`在 Windows 中未定义。

`money_format()``strfmon()`正如手册所述，它基本上是 C 库函数的包装器。

如果您查看评论，[Rafael M. Salvioni 有一个实现](http://www.php.net/manual/en/function.money-format.php#89060)。值得一试。[您可以使用function_exists()](http://php.net/manual/en/function.function-exists.php)检查它是否已经定义。

[这个 StackOverflow 问题](https://stackoverflow.com/questions/6369887/alternative-to-money-format-function-in-php-on-windows-platform)的答案提供了更多（并且可能更好）的替代方案（[谢谢 danielson317](https://stackoverflow.com/questions/10715658/getting-fatal-error-in-money-format-function/10715728?noredirect=1#comment48020238_10715728)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-04T18:47:12.643

对于那些 money_format 不起作用的，您可以使用：

```
$price = number_format($price, 2); echo “$”.$price; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:56:07.550

也许这个？

> 笔记：
> 
> 仅当系统具有功能`money_format()`时才定义该`strfmon`功能。例如，Windows 没有，因此`money_format()`在 Windows 中未定义。
> 
> [http://php.net/money_format](http://php.net/money_format)

# knockout.js - 多选列表框中的knockoutjs复杂数组数据绑定

> ID：10715661
> 
> 赞同：0
> 
> 时间：2012-05-23T07:51:28.673
> 
> 标签：knockout.js, complex-data-types

我在 knockoutjs 网站上找到了示例。在这里，它们将值绑定到多选列表框。但他们使用的是非常简单的可观察数组。 **availableCountries**和**selectedCountries**。

```
<p>
    Choose some countries you'd like to visit:
    <select data-bind="options: availableCountries, selectedOptions: chosenCountries" size="5" multiple="true"></select>
</p>

<script type="text/javascript">
    var viewModel = {
        availableCountries : ko.observableArray(['France', 'Germany', 'Spain']),
        chosenCountries : ko.observableArray(['Germany']) // Initially, only Germany is selected
    };

    // ... then later ...
    viewModel.chosenCountries.push('France'); // Now France is selected too
</script> 
```

但是我的模型太复杂了，提到我模型的部分是json格式。

```
"JobOrderDelivTranscript" : [{
        "TranscriptType" : {
            "Id" : 1,
            "Name" : null,
            "CreatedBy" : 0,
            "CreatedDate" : "0001-01-01T00:00:00",
            "ModifiedBy" : 0,
            "ModifiedDate" : "0001-01-01T00:00:00",
            "IsActive" : false,
            "EntityStatus" : 0,
            "ErrorMessage" : null,
            "ExternalID" : 0,
            "ExternalSystemID" : 0
        },
        "Id" : 1,
        "Name" : null,
        "CreatedBy" : 0,
        "CreatedDate" : "0001-01-01T00:00:00",
        "ModifiedBy" : 0,
        "ModifiedDate" : "0001-01-01T00:00:00",
        "IsActive" : false,
        "EntityStatus" : 0,
        "ErrorMessage" : null,
        "ExternalID" : 0,
        "ExternalSystemID" : 0
    }, {
        "TranscriptType" : {
            "Id" : 2,
            "Name" : null,
            "CreatedBy" : 0,
            "CreatedDate" : "0001-01-01T00:00:00",
            "ModifiedBy" : 0,
            "ModifiedDate" : "0001-01-01T00:00:00",
            "IsActive" : false,
            "EntityStatus" : 0,
            "ErrorMessage" : null,
            "ExternalID" : 0,
            "ExternalSystemID" : 0
        },
        "Id" : 2,
        "Name" : null,
        "CreatedBy" : 0,
        "CreatedDate" : "0001-01-01T00:00:00",
        "ModifiedBy" : 0,
        "ModifiedDate" : "0001-01-01T00:00:00",
        "IsActive" : false,
        "EntityStatus" : 0,
        "ErrorMessage" : null,
        "ExternalID" : 0,
        "ExternalSystemID" : 0
    }
] 
```

这里我的“ **selectedCountries** ”将是 JobOrderDelivTranscript()。如果我选择第一个选项，它应该与 JobOrderDelivTranscript()[0].TranscriptType.Id 映射。在他们的示例中，他们使用的是字符串数组，但我必须绑定复杂的数据。我怎样才能做到这一点。

即使我尝试使用自定义绑定

```
ko.bindingHandlers['selectedCustomOptions'] = {
            getSelectedValuesFromSelectNode: function (selectNode) {
                var result = [];
                var nodes = selectNode.childNodes;
                for (var i = 0, j = nodes.length; i < j; i++) {
                    var node = nodes[i], tagName = ko.utils.tagNameLower(node);
                    if (tagName == "option" && node.selected)
                        result.push(ko.selectExtensions.readValue(node));
                    else if (tagName == "optgroup") {
                        var selectedValuesFromOptGroup = ko.bindingHandlers['selectedCustomOptions'].getSelectedValuesFromSelectNode(node);
                        Array.prototype.splice.apply(result, [result.length, 0].concat(selectedValuesFromOptGroup)); // Add new entries to existing 'result' instance
                    }
                }
                return result;
            },
            'init': function (element, valueAccessor, allBindingsAccessor) {
                ko.utils.registerEventHandler(element, "change", function () {
                    var value = valueAccessor();
                    var valueToWrite = ko.bindingHandlers['selectedCustomOptions'].getSelectedValuesFromSelectNode(this);
                    ko.jsonExpressionRewriting.writeValueToProperty(value, allBindingsAccessor, 'value', valueToWrite);
                });
            },
            'update': function (element, valueAccessor) {
                if (ko.utils.tagNameLower(element) != "select")
                    throw new Error("values binding applies only to SELECT elements");

                var newValue = ko.utils.unwrapObservable(valueAccessor());
                if (newValue && typeof newValue.length == "number") {
                    var nodes = element.childNodes;
                    for (var i = 0, j = nodes.length; i < j; i++) {
                        var node = nodes[i];
                        if (ko.utils.tagNameLower(node) === "option")
                            ko.utils.setOptionNodeSelectionState(node, arrayIndexOf(newValue, ko.selectExtensions.readValue(node)) >= 0);
                    }
                }
            }
        };

        function arrayIndexOf (array, item) {
            if (typeof Array.prototype.indexOf == "function")
                return Array.prototype.indexOf.call(array, item);
            for (var i = 0, j = array.length; i < j; i++)
                if (array[i].TranscriptType.Id() === item.Id)
                    return i;
            return -1;
        } 
```

我已经选择了选项，但 json 数据没有得到更新。

有什么简单的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:34:54.973

我不是 100% 我理解你的问题，但似乎你正在尝试使用 selectedOptions 绑定绑定到一个复杂的对象。有两种方法可以做你想做的事。第一种是结合使用 optionsValue 绑定和计算来将您的绑定 id 拉到对象根级别（不幸的是，optionsValue 绑定仅适用于根，因此`optionsValue: 'TranscriptType.Id'`不起作用）。

```
<p>Choose some countries you'd like to visit:</p>
<select data-bind="options: availableCountries, optionsText: optionsText, 
      optionsValue: 'id', selectedOptions: 
      chosenCountries" size="5" multiple="true"></select>

<p data-bind="text: ko.toJSON(chosenCountries)">
</p>

var JobOrderDelivTranscript = function(id) {
    var self = this;
    this.TranscriptType = {
        Id : id
    }
    this.id = ko.computed(function() {
        return self.TranscriptType.Id
    });
}; 
```

[http://jsfiddle.net/madcapnmckay/6K6kH/](http://jsfiddle.net/madcapnmckay/6K6kH/)

第二种方法是不使用 optionsValue，在这种情况下 KO 将使用对象引用来测试相等性。只要您在您的 selectedCounties 数组中保留相同的对象引用，一切都会正常工作。

```
var viewModel = function () {
    var self = this;
    this.availableCountries = ko.observableArray([
        new JobOrderDelivTranscript("Some Transcript 1"),
        new JobOrderDelivTranscript("Some Transcript 2"),
        new JobOrderDelivTranscript("Some Transcript 3")]);

    this.chosenCountries = ko.observableArray([ self.availableCountries()[0] ]);

    this.optionsText = function(option) {
        return option.TranscriptType.Id;
    };        
};

var vm = new viewModel();
vm.chosenCountries.push(vm.availableCountries()[1]); 
```

[http://jsfiddle.net/madcapnmckay/hmsqf/](http://jsfiddle.net/madcapnmckay/hmsqf/)

两种方式各有利弊，这取决于您的具体情况，哪种方式是正确的。

**编辑**

要使用映射插件做同样的事情，您需要使用[“高级用法”下](http://knockoutjs.com/documentation/plugins-mapping.html)的文档中介绍的映射选项。

这是一个你应该能够适应的例子。

[http://jsfiddle.net/madcapnmckay/hmsqf/2/](http://jsfiddle.net/madcapnmckay/hmsqf/2/)

为了更好地构建您的代码，我建议创建许多 javascript 类，就像我在 Order 示例中所做的那样，这允许将逻辑包含在离散块中。我也不建议使用旧的 jquery 选择器，许多 KO 初学者认为可以将两者混合使用。在我看来，它稀释了视图模型和视图之间的关注点分离。为什么`$(selector).click`在可以使用`click`绑定时使用 a 。

希望这可以帮助。

# c# - 后面代码中的异步 MSXML2 XMLHTTP 请求

> ID：10715662
> 
> 赞同：0
> 
> 时间：2012-05-23T07:51:28.860
> 
> 标签：c#, .net, xmlhttprequest, msxml4

我希望异步 HTTP 回调在 C# 中使用 MSXML2 API 工作。我通过winform调用它。

```
 x = new MSXML2.XMLHTTPClass();
        x.open("POST", "http://localhost/MyHandler.ashx", true, null, null);
        x.send("<test/>");
        x.onreadystatechange = ???? //// What to specify here in C#?
        var response = x.responseText; //// Works great synchronous! 
```

我尝试了 Action()、匿名代表、匿名类型，但没有任何效果！可悲的是，在互联网上存在这个[VB.NET 模块驱动的解决方案](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757030%28v=vs.85%29.aspx)，但我不确定如何在 C# 中完成。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:55:51.997

在`WinForms`应用程序中使用 a`WebRequest`代替。它基本上以相同的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:13:11.377

```
try {
            System.Net.HttpWebRequest oHTTPRequest = System.Net.HttpWebRequest.Create("URL of Request") as System.Net.HttpWebRequest;
            System.Net.HttpWebResponse oHTTPResponse = oHTTPRequest.GetResponse as System.Net.HttpWebResponse;
            System.IO.StreamReader sr = new System.IO.StreamReader(oHTTPResponse.GetResponseStream);
            string respString = System.Web.HttpUtility.HtmlDecode(sr.ReadToEnd());
        } 
        catch (Exception oEX) 
        {
            //Log an Error
        }
    } 
```

# python - Python unicode 代码点到 unicode 字符

> ID：10715669
> 
> 赞同：22
> 
> 时间：2012-05-23T07:52:08.560
> 
> 标签：python, encoding

我正在尝试将一些中文、俄文或各种非英文字符集写入平面文件以进行测试。我陷入了如何将 Unicode 十六进制或十进制值输出到其相应字符的问题上。

例如，在 Python 中，如果您有一组硬编码的字符，就像`абвгдежзийкл`您分配的那样`value = u"абвгдежзийкл"`，没有问题。

但是，如果您将一个十进制或十六进制十进制（如 1081 / 0439）存储在一个变量中，并且您想用它对应的实际字符（而不仅仅是输出 0x439）将其打印出来，该怎么做？上面的 Unicode 十进制/十六进制值是指`й`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-23T07:53:41.150

**Python 2**：使用[`unichr()`](http://docs.python.org/2/library/functions.html#unichr)：

```
>>> print(unichr(1081))
й 
```

**Python 3**：使用[`chr()`](https://docs.python.org/3/library/functions.html#chr)：

```
>>> print(chr(1081))
й 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-16T16:46:56.960

所以这个问题的答案是：

1.  将十六进制值转换为十进制`int(hex_value, 16)`
2.  然后用 得到对应的字符串`chr()`。

总结一下：

```
>>> print(chr(int('0x897F', 16)))
西 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-07T20:32:28.923

在处理包含解析一些 JSON 的项目时，我遇到了类似的问题。我有很多字符串，所有非 ASCII 字符都像这样转义：

```
>>> print(content)
\u0412\u044B j\u0435\u0441\u0442\u0435 \u0438\u0437 \u0420\u043E\u0441\u0441\u0438\u0438?
...
>>> print(content)
\u010Cemu jesi na\u010Dinal izu\u010Dati med\u017Euslovjansky jezyk? 
```

逐个符号地转换这种混合`unichr()`将是乏味的。我最终决定的解决方案：

```
content.encode("utf8").decode("unicode-escape") 
```

第一个操作（编码）产生如下字节串：

```
b'\\u0412\\u044B j\\u0435\\u0441\\u0442\\u0435 \\u0438\\u0437 \\u0420\\u043E\\u0441\\u0441\\u0438\\u0438?'
b'\\u010Cemu jesi na\\u010Dinal izu\\u010Dati med\\u017Euslovjansky jezyk?' 
```

第二个操作（解码）将字节字符串转换为 Unicode 字符串，但`\\`替换为`\`，它“解包”字符，结果如下：

```
Вы jесте из России?
Čemu jesi načinal izučati medžuslovjansky jezyk? 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-08T22:37:34.047

如果遇到错误：

> ValueError：unichr() arg 不在范围内（0x10000）（窄 Python 构建）

在尝试使用 转换十六进制值`unichr`时，您可以通过执行以下操作来解决该错误：

```
>>> n = int('0001f600', 16)
>>> s = '\\U{:0>8X}'.format(n)
>>> s
'\\U0001F600'
>>> binary = s.decode('unicode-escape')
>>> print(binary) 
```

# tfs - TFS 构建自动化（添加到解决方案的新项目未显示在构建输出目录中）

> ID：10715671
> 
> 赞同：1
> 
> 时间：2012-05-23T07:52:13.880
> 
> 标签：tfs, build-process, build-automation, build-definition

我们已经建立了定义，它正在构建解决方案并根据需要将二进制文件复制到输出目录。但是当我向解决方案添加一个新项目时，新项目的二进制文件不会复制到构建输出文件夹中。

添加新项目时是否需要对构建定义进行任何更改，因为如果我对现有项目进行任何更改，则构建输出会根据更改正确更新。每当将新项目添加到解决方案中时，我是否需要执行任何刷新操作来构建定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:13:54.617

您可以检查几件事。

源代码管理中的文件夹是否映射到构建定义的工作区？可能是源没有被带到构建服务器。如果您的解决方案中没有其他项目对丢失的项目有任何依赖关系，您将不会看到任何错误。

要检查的另一件事是您设置要构建的配置。在您的构建定义中检查构建过程中的配置（例如“Release”、“Any CPU”）。然后在 Visual Studio 中打开您的解决方案并在解决方案资源管理器中右键单击解决方案，选择“配置管理器”并确保存在相同的配置，如果它确实确保项目设置为针对该配置构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:30:57.110

我认为获得效果的唯一方法是，如果您实际上是在构建定义中构建另一个 *.sln。

如果您使用相同的 sln 并且所有内容都已构建，则没有理由不复制新程序集的二进制文件。
如果由于某种原因源不可用，您的构建将失败。

**编辑**
（在评论“*我们没有使用此构建定义构建任何其他解决方案。它正在成功构建解决方案*”之后）

我认为您需要分享一些额外的信息。
您是说在您的构建代理中，您会在`Sources`两者下看到：

C:\Builds\1...\Sources\SolutionName\OldProject\bin\"Config"\OldProject.dll
C:\Builds\1...\Sources\SolutionName\NewProject\bin\"Config"\NewProject.dll

但`Binaries`只有在

C:\Builds\1...\Binaries\"Config"\OldProject.dll 下？

# visual-studio-2010 - 为什么我不能在未导入的文件中有重复的定义？

> ID：10715672
> 
> 赞同：0
> 
> 时间：2012-05-23T07:52:15.537
> 
> 标签：visual-studio-2010

假设我有五个文件；fileA.cpp、fileA.hpp、fileB.cpp、fileB.hpp 和 main.cpp。两个头文件都定义了函数`void help()`。我想在我的 main.cpp 文件中使用 fileA.cpp 和 fileB.cpp 中的函数之间切换。我试过只是切换标题包含，但视觉工作室抱怨重复定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:55:35.647

那是一个链接器错误。将有一个`fileB.obj`和`fileA.obj`（和`main.obj`）链接在一起以形成可执行文件。`fileA.obj`并且`fileB.obj`都将包含 的定义`void help()`，从而导致多个定义错误。它与更改中的 include 指令无关`main.cpp`。

建议包含`void help()`在 a 中`namespace`：

**文件A.hpp**：

```
namespace filea
{
    void help();
} 
```

**文件A.cpp**：

```
namespace filea
{
    void help()
    {
        // implementation
    }
} 
```

**文件B.hpp**：

```
namespace fileb
{
    void help();
} 
```

**文件B.cpp**：

```
namespace fileb
{
    void help()
    {
        // implementation
    }
} 
```

**主.cpp**：

```
#include <fileA.hpp>
using filea::help;

//#include <fileB.hpp>
//using fileb::help; 
```

# php - File_exists 但不包括

> ID：10715675
> 
> 赞同：2
> 
> 时间：2012-05-23T07:52:18.720
> 
> 标签：php

我正在尝试包含一个文件，但它似乎不起作用 - 这是整个代码：

```
if (file_exists('config/categories.php')) {
    include ('config/categories.php'); 
} 

foreach ($categories as $cat_sef => $cat_name) {
    echo '<a href="'.$full_domain.$cat_sef.'" alt="#">'.$cat_name.'</a><br />';
} 
```

config/categories.php 的内容只是一个数组：

```
$categories = array("category-1" => "Category 1", 
"category-2" => "Category 2", 
"category-3" => "Category 3") 
```

我知道该文件存在，因为以下工作：

```
if (file_exists('config/categories.php')) {
    echo "file exists";
} 
```

但是，如果我将 categories.php 中的数组替换为：

```
echo "testing"; 
```

也不会显示任何内容。据我所知，该文件存在，但似乎没有包含一些内容。如果我将类别文件重命名为其他名称，我将收到“无此类文件”错误（文件不存在）。

使用原始代码片段，我得到的错误是：

```
Notice: Undefined variable: categories 
```

但正如您所见，它是在 categories.php 文件中定义的。

它起作用的唯一方法是将数组代替我的代码的 if (file_exists) 部分，我不想这样做，因为其他部分依赖于该 categories.php 文件，所以我不想欺骗多个文件中的数组。

有谁知道这可能是什么？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:01:51.557

你有两个选择：

*   用于`include(dirname(__FILE__).'/config/categories.php')`确保您包含同一个文件而不是另一个“config/categories.php”

*   仔细检查 categories.php 是否包含像这样的打开 php 标签`<?php`。看起来很明显，但我在代码审查中不止一次看到了这一点。

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:07:37.943

您只是将 $categories 包含在**if**运算符范围内，因此您不能在外部使用 $categories 。只需在包含之前引入 $categories

```
$categories = null;
if (file_exists('config/categories.php')) {
    include ('config/categories.php'); 
} 

foreach ($categories as $cat_sef => $cat_name) {
    echo '<a href="'.$full_domain.$cat_sef.'" alt="#">'.$cat_name.'</a><br />';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:15:26.287

`file_exists`并且`include`不要以同样的方式寻找文件。包括使用该`include_path`选项并在不同目录中搜索您的文件。

如果您真的想知道是否可以包含文件，则应使用绝对路径。

另一件事。如果您的`foreach ($categories`代码在函数内部，则需要将`$categories`变量定义为全局变量。因为`include`总是在全局范围内完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:13:45.633

`include_once`如果您之前已经包含此文件，请使用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-15T16:01:57.653

如果您的文件存在，请检查 php.ini 文件并设置`short_tag_open=on`. 它可能有效。

# java - Android EditText 一次只接受一个字符？

> ID：10715677
> 
> 赞同：0
> 
> 时间：2012-05-23T07:52:26.363
> 
> 标签：java, android, input, textbox

我有一个奇怪的问题。

我的应用程序的 EditText 字段在模拟器（为 Android 4.0 设置）和实际设备（运行 Android 2.2）中工作得很好。我可以将整个文本（一个单词）输入到 Edittext 中，保存文本，然后软键盘就会消失。

但是，当应用程序在运行 Android 4.0 的实际设备上运行时，在软键盘完全消失之前，我只能在 EditText 中输入一个字符。要继续，我必须触摸 EditText，软键盘会在一个字符输入后重新出现和消失，一次又一次。

**谁能向我解释有什么问题？我需要在我的代码中包含什么来处理这个问题？**

非常感谢。

# c# - C# windows 形成奇怪的行为

> ID：10715678
> 
> 赞同：2
> 
> 时间：2012-05-23T07:52:30.933
> 
> 标签：c#

我有两个表格。(Form1和Form2) Form1_load方法，我调用创建Form2。

但是，Form2 仍位于 Form1 之下。如何在 Form1 之上获取 Form2？我不想将 form2.TopMost 设置为 true，因为它是全屏形式并且会拒绝用户的选项卡。我试过 focus()，它只是不会把 Form2 带到前面。

我不想隐藏 Form1，因为用户可能需要返回它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T07:56:53.253

你试过：`form2.BringToFront()`？
编辑：
您也可以使用`form2.ShowDialog()`，这应该在前面显示表格，而不能集中表格1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:07:08.770

您打开第二个表格太早了。窗体的 Load 事件在窗体暴露之前触发，这意味着窗体 2 显示在窗体 1 之前，因此在显示时它被窗体 1 覆盖。

当 Form1 的 Shown 事件被触发时，您可以通过打开 Form2 来获得所需的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:00:23.930

你可以使用 SetForegroundWindow(form2.Handle)

你需要这个声明：

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool SetForegroundWindow(IntPtr hWnd); 
```

因为您是从 Load 处理程序调用它，所以当 form1 的 Load 之后，form1 被带到顶部时，您可能处于竞争状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:00:52.383

您可以使用 Form2.ShowDialog() 方法。请记住，在关闭 Form2 之前，这将不允许您返回到 Form 1。如果 Form2 依赖于来自 Form1 的数据，我宁愿使用 ShowDialog() 否则您将不得不使用线程和事件来更新 Form2，具体取决于 Form1 中的事件。

# c# - CancellationTokenSource.CancelAfter() 是否泄漏？

> ID：10715688
> 
> 赞同：5
> 
> 时间：2012-05-23T07:53:07.740
> 
> 标签：c#, .net, .net-4.0, task-parallel-library, .net-4.5

[Async Targeting Pack](http://www.microsoft.com/en-us/download/details.aspx?id=29576)的发布促使我使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)来查看那里提供了哪些[基于任务的异步模式 (TAP)](http://www.microsoft.com/en-us/download/details.aspx?id=19957)扩展方法（其中一些我已经自己实现以在 VS2010 中使用）。我偶然发现了 for 的[`.CancelAfter(TimeSpan)`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtokensource.cancelafter%28v=vs.110%29.aspx)方法`CancellationTokenSource`（它是 .NET 4.0 的 Async Targeting Pack 中的扩展方法，但在 .NET 4.5 中是实例方法），并认为这可能是一种为各种操作实现超时的好方法t 本机有超时，但支持取消。

但是查看 Async Targeting Pack 中的实现，似乎如果关联`Task`完成或取消，则计时器继续运行。

```
/// <summary>Cancels the <see cref="T:System.Threading.CancellationTokenSource" /> after the specified duration.</summary>
/// <param name="source">The CancellationTokenSource.</param>
/// <param name="dueTime">The due time in milliseconds for the source to be canceled.</param>
public static void CancelAfter(this CancellationTokenSource source, int dueTime)
{
    if (source == null)
    {
        throw new NullReferenceException();
    }
    if (dueTime < -1)
    {
        throw new ArgumentOutOfRangeException("dueTime");
    }
    Timer timer = new Timer(delegate(object self)
    {
        ((IDisposable)self).Dispose();
        try
        {
            source.Cancel();
        }
        catch (ObjectDisposedException)
        {
        }
    });
    timer.Change(dueTime, -1);
} 
```

假设我使用此方法为经常使用的基于 TAP 的操作提供超时，并用`.CancelAfter()`. 现在假设用户提供了 5 分钟（300 秒）的超时值，并每秒调用此操作 100 次，所有操作均在几毫秒后成功完成。在每秒 100 次调用的 300 秒之后，所有这些操作将累积 30,000 个运行计时器，即使这些任务很久以前就成功完成了。他们最终都会过去并运行上面的委托，这可能会抛出一个`ObjectDisposedException`等。

这不是有点泄漏，不可扩展的行为吗？当我实现超时时，我使用了`Task/TaskEx.Delay(TimeSpan, CancellationToken)`，并且当相关任务结束时，我取消了，`.Delay()`以便停止并释放计时器（毕竟它是一个 IDisposable，它确实包含非托管资源）。这种清理是不是过于热心了？让数以万计的定时器同时运行（并可能在以后抛出数以万计的捕获异常）的成本对于普通应用程序的性能真的无关紧要吗？`.CancelAfter()`与正在完成的实际工作相比，开销和泄漏几乎总是微不足道的，通常应该被忽略吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T10:51:09.713

试试吧，把它推到极限，看看会发生什么。我无法使用 1000 万个计时器让工作集超过 90 MB。System.Threading.Timer 非常便宜。

```
using System;
using System.Threading;

class Program {
    public static int CancelCount;
    static void Main(string[] args) {
        int count = 1000 * 1000 * 10;
        for (int ix = 0; ix < count; ++ix) {
            var token = new CancellationTokenSource();
            token.CancelAfter(500);
        }
        while (CancelCount < count) {
            Thread.Sleep(100);
            Console.WriteLine(CancelCount);
        }
        Console.WriteLine("done");
        Console.ReadLine();
    }
}

static class Extensions {
    public static void CancelAfter(this CancellationTokenSource source, int dueTime) {
        Timer timer = new Timer(delegate(object self) {
            Interlocked.Increment(ref Program.CancelCount);
            ((IDisposable)self).Dispose();
            try {
                source.Cancel();
            }
            catch (ObjectDisposedException) {
            }
        });
        timer.Change(dueTime, -1);
    }
} 
```

# c++ - 为什么名称修改不会破坏我的程序？

> ID：10715689
> 
> 赞同：1
> 
> 时间：2012-05-23T07:53:11.703
> 
> 标签：c++, main, function-signature

> **可能重复：**
> [main() 在 C++ 中是否重载？](https://stackoverflow.com/questions/6408183/is-main-overloaded-in-c)

这是我的代码：

```
#include <iostream>

int main(void* a, void* b)
{
    std::cout << "hello standalone " << std::endl;                      
    return 0;
} 
```

不同的参数在name mangling之后应该有不同的符号名（`void* a, void* b)`应该不同于`(int, char**`），但是这个程序在运行时没有任何问题。

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:00:45.410

因为`main`是一种特殊情况，编译器会为它生成特殊代码。通常，`main`将从`crt0`用 C 编写的启动例程（通常在较旧的编译器中调用）中调用，因此编译器将生成`main`就好像它已声明一样`extern "C"`。但这绝不是必需的。这只是一个典型的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:54:55.953

这取决于编译器。main 的标准要求签名是：

```
int main()
int main(int argc, char** argv)
int main(int argc, char* argv[]) 
```

但除此之外，编译器还可以自由提供其他签名。

例如，gcc 4.3.4 拒绝您的代码 - [http://ideone.com/XZp2h](http://ideone.com/XZp2h)

MSVS 抱怨未解决的外部问题。

# android - Android InApp Billing 大多数时候都会给出 RESULT_ERROR

> ID：10715697
> 
> 赞同：1
> 
> 时间：2012-05-23T07:53:51.217
> 
> 标签：android, in-app-purchase

我的 IAP 集成存在严重问题。分析显示这些统计数据：

*   结果_取消：3432
*   结果_错误：374
*   RESULT_OK：11

我了解那些 RESULT_CANCELLED 事件，但为什么会有这么多 RESULT_ERROR 事件？

另外，当我只是尝试输入一些调试信息时，我很困惑，因为我找不到可以为我提供有关实际错误的一些信息的地方。

我正在使用 Google 的 IAP 示例代码。

那么，知道在哪里寻找错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:41:13.483

由于我们遇到了同样的问题，我们尝试隔离流并查看导致这种行为的原因。

尽管我们对高错误率没有很好的解释，但我们确实发现，在许多情况下，android 市场应用程序在没有连接时返回 RESULT_ERROR 而不是预期的 RESULT_SERVICE_UNAVAILABLE (wtf!?)

一旦我们有更多数据，我会更新

最好的，兹维

# enums - javado Doclet enum - 如何从枚举中获取可能的值以在我自己的 doclet 中使用？

> ID：10715701
> 
> 赞同：1
> 
> 时间：2012-05-23T07:54:03.723
> 
> 标签：enums, javadoc, doclet

使用 javadoc 时，枚举通常是这样记录的：

```
/**
* Doc for enum
*/
public enum Something {
  /**
  * First thing
  */
  FIRST_THING,
  /**
  * Second thing
  */
  SECOND_THING;
} 
```

我的问题是，使用 JavaDoc Doclets，我可以获得该枚举的 classDoc ( [Javadoc ClassDoc](http://docs.oracle.com/javase/6/docs/jdk/api/javadoc/doclet/com/sun/javadoc/ClassDoc.html) )，但我无法获得可能值的注释，甚至无法获得可能值本身。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:56:35.520

[`enumConstants()`](http://docs.oracle.com/javase/6/docs/jdk/api/javadoc/doclet/com/sun/javadoc/ClassDoc.html#enumConstants%28%29)似乎是您正在寻找的东西。

# java - 如何使用 java 或 javascript 读取 Ical Feed

> ID：10715702
> 
> 赞同：1
> 
> 时间：2012-05-23T07:54:04.287
> 
> 标签：java, xpages, xpages-ssjs

我在 Xpages 上处理 ene groupcalendar 并将导入 ICAL 文件。

我会输入这个 ULR：[http ://webtermine.de/?ec3_ical_nordrhein-westfalen](http://webtermine.de/?ec3_ical_nordrhein-westfalen)

在我的日历中使用响应 ics 文件。

我的问题是如何获取文件并读取 java/javascript 中的内容我不知道该怎么做，希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:59:38.463

如果你想要一个 java（不是 javascript）解决方案，你可以使用[ical4j](http://sourceforge.net/projects/ical4j/)框架

# android - 在 android 中使用 Google docs API 进行 OCR

> ID：10715715
> 
> 赞同：6
> 
> 时间：2012-05-23T07:55:19.667
> 
> 标签：android, ocr, google-docs-api

我正在尝试开发一个使用 OCR 的 android 应用程序。该应用程序应该能够扫描名片和其他文档以提取内容。

是否可以使用 Google Docs Api 实现这一点？我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T04:10:16.420

[Google Documents List API](https://developers.google.com/google-apps/documents-list/#uploading_documents_using_optical_character_recognition_ocr)允许上传 PDF 或图像并自动执行 OCR 以提取其文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T07:54:58.493

您可以使用[Tesseract](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CEQQFjAC&url=http://code.google.com/p/tesseract-ocr/&ei=BBuCUfDXK4q3rAfcuoG4CA&usg=AFQjCNHJqIxrcpf5ItbWx8JTRFJOvQIXVA&sig2=NA70vRC7sspFuNO4VTqL-g&bvm=bv.45960087,d.bmk)。它是一个强大的库，它也有 java wrapper [Tess4j](http://tess4j.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-13T10:31:36.840

您可以使用[Google Cloud Vision API](https://cloud.google.com/vision/)。每月 1-1000 个单位免费。你可以[在这里查看价格](https://cloud.google.com/vision/docs/pricing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:09:42.407

也许你会发现[OpenCV](https://github.com/billmccord/OpenCV-Android)很有用。它是一个强大的原生库，带有 Android 包装器。

# ios - iPhone 上的错误 LLDB 行为（C struct sizeof）

> ID：10715721
> 
> 赞同：1
> 
> 时间：2012-05-23T07:55:37.917
> 
> 标签：ios, xcode

我已将以下 C 代码编译为各种基本 iOS 应用程序的一部分：

```
typedef struct {
    unsigned long long l1;
    int l2;
} AAA;
int l;
l = sizeof(AAA); 
```

在 iPhone 3 设备（升级到最新的 iOS 5.1）上运行此代码时，LLDB（XCode 4.3.2）调试器告诉变量的值`l`是 12，但是`sizeof(AAA)`是 16。

```
(lldb) p l
(int) $0 = 12
(lldb) p sizeof(AAA)
(unsigned int) $1 = 16 
```

在 iPhone 模拟器上运行相同的代码行为正常（两者`l`都是`sizeof(AAA)`12）

它是已知的吗？我错过了什么吗？

# python - 奇怪的 IPython ipdb 行为

> ID：10715724
> 
> 赞同：19
> 
> 时间：2012-05-23T07:55:44.673
> 
> 标签：python, ipython, pdb

我有一些非常奇怪的行为，我只是不理解，因此无法解释，所以我希望这里有人可以帮助我。我注意到的第一件事是 ipdb 不再让我定义变量：

```
ipdb> what=5
ipdb> what
*** NameError: name 'what' is not defined
whatelse=6 
```

过了一会儿，我发现 ipdb 在我的输入中返回了这个（再次运行代码之后）：

```
dir()
ipdb> ['args', 'content_type', 'function', 'ipdb', 'item_code', 'kwargs', 'object_id', 'request', 'ud_dict', 'update_querydict', 'what', 'whatelse']
what=5
ipdb> what
5
ipdb> whatelse=7
ipdb> whatelse
ipdb> 6
whatelse
ipdb> 7
whatelse
ipdb> 6
whatelse
ipdb> 7 
```

对我来说，这看起来就像我有两个交错的调试会话，我可以以某种奇怪的交替模式访问它们。我怎样才能摆脱它？

**编辑：** 杀死所有python进程并重新运行代码确实有帮助。现在一切都恢复正常了。但由于我只是不明白发生了什么，我会对所发生的事情的答案以及如何重现该行为非常感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-29T01:11:34.613

如果您有两个进程都在消耗`stdin`，它们可能会导致与您所描述的非常相似的症状。

```
>>> import subprocess
>>> subprocess.Popen('python', shell=True)
<subprocess.Popen object at 0x0000000001DEFEB8>
>>> Python 2.6.5 (r265:79096, Mar 19 2010, 18:02:59) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
>>> a = 5
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> a
5
>>> a = 6
>>> a
5
>>> a
6
>>> a
5
>>> a
6
>>> a
5
>>> a
6 
```

我第一次调用`a`时，它是未定义的，即使我已经在上面的行中定义了它。我再次调用它，它是 5。然后我将它设置为 6，随后的每个调用都在两者之间交替。这似乎正是您正在经历的。

`stdin`是行缓冲，导致*交替*的文本行传递给交替的进程，在这种情况下是两个 Python 实例。

# objective-c - 标签换行

> ID：10715726
> 
> 赞同：0
> 
> 时间：2012-05-23T07:56:06.747
> 
> 标签：objective-c

我想在我的 iphone 标签中写两行，我应该做的是：

```
NSString *received = [[NSString alloc] initWithFormat:@"Rocio\n,%@",[[NSString alloc] initWithData:receivedData encoding:NSASCIIStringEncoding]];  

self.label.text = received; 
```

所以，“\n”是LF。

为什么它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:57:30.047

默认标签只能显示 1 行文本。使用`setNumberOfLines:`方法设置您需要的行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:14:09.337

我加：

```
self.label.lineBreakMode = UILineBreakModeWordWrap;
self.label.setNumberOfLines=0; 
```

[看看](https://stackoverflow.com/questions/3417103/n-not-working-in-uilabel)_

# android - Android 从 URL 安装 apk

> ID：10715737
> 
> 赞同：5
> 
> 时间：2012-05-23T07:56:41.713
> 
> 标签：android, download, apk

我的应用程序验证是否有我的应用程序的新版本（我的应用程序不在 Play 商店中）并自动将 apk 文件下载到 sdcard/download。然后我想开始安装并使用以下代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "file.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

但它显示弹出“解析错误：解析包时出现问题”

在我的 AndroidManifest 中，我已经获得了许可：

```
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
    <uses-permission android:name="android.permission.DELETE_PACKAGES"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-13T16:43:04.973

我有一个类似的错误信息。我的问题的根源是我将`apk`下载的文件保存到我的`application data`目录而不是`sdcard`. 通过保存到`/sdcard/myprog.apk`我能够毫无问题地进行安装。

由于我能够通过网络浏览器下载来进行安装，因此只需弄清楚这些下载的去向，然后当我以编程方式下载以保存在同一位置时。

我发现以下内容对我的更新过程非常有用：[使用 Android 下载一个文件，并在 ProgressDialog 中显示进度，](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)然后我使用了类似于您必须进行安装的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:03:25.337

您是否可以手动安装文件，当apk具有损坏的清单文件时，解析包的错误问题就来了。首先检查您下载的文件的手动安装是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T09:39:25.727

您需要在文件路径之前添加“file://”。像这样的东西：

```
intent.setDataAndType(Uri.parse("file://" + filepath), "application/vnd.android.package-archive");
startActivity(intent); 
```

# iis - IIS 7 ISAPI 处理程序映射缓存

> ID：10715739
> 
> 赞同：0
> 
> 时间：2012-05-23T07:56:46.170
> 
> 标签：iis, caching, dll, iis-7, isapi

我对 IIS 7 中的 ISAPI 处理程序映射有疑问。

我添加了一个映射，我想知道如何配置服务器以缓存整个内容。

我的 web.config 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <handlers>
            <remove name="ISAPI-dll" />
            <add name="Orgmanager Search Handler Dir De" path="orgmanager.dll" verb="*" modules="IsapiModule" scriptProcessor="D:\inetpub\wwwroot\orgmanager\dir_de\orgmanager.dll" resourceType="Unspecified" requireAccess="Execute" preCondition="bitness32" />
        </handlers>
        <caching>
            <profiles>
                <add extension=".dll" policy="CacheUntilChange" kernelCachePolicy="CacheUntilChange" />
                <add extension=".html" policy="CacheUntilChange" kernelCachePolicy="CacheUntilChange" />
                <add extension=".pl" policy="CacheUntilChange" kernelCachePolicy="CacheUntilChange" />
            </profiles>
        </caching>
    </system.webServer>
</configuration> 
```

这是由服务器缓存的吗？如果没有，我如何配置整个东西来缓存？

谢谢和问候： Spinne

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:23:18.283

为扩展使用通配符？

```
<add extension="*" policy="CacheUntilChange" kernelCachePolicy="CacheUntilChange" /> 
```

# java - jasper 报告未正确打印

> ID：10715742
> 
> 赞同：0
> 
> 时间：2012-05-23T07:57:07.620
> 
> 标签：java, jasper-reports

我正在使用 jasper 报告打印，我使用 netbeans 的 ireport 插件创建了报告，所以当我看到预览看起来不错时，但是当我打印数据时，它的格式不正确，只有标题带出现在打印页面中，下面是我的代码

```
 void showResports(){
    try{
      // OriginalExportOriginalExport 
         String reportName ="";
        //ExportReport4.jasperExportReport4.jasper
        if(export.equalsIgnoreCase("1")){
  reportName = "src/reports/OriginalExport.jasper";
        }
        else if(export.equalsIgnoreCase("0")){
         reportName = "src/reports/ExportReport4.jasper";

        }
//  InputStream is = this.getClass().getClassLoader().getResourceAsStream(reportName);
  InputStream in=new FileInputStream(reportName);

  if(in==null|| connection==null) return ;
  JasperPrint jp = JasperFillManager.fillReport(in, null, connection);
  System.out.println("Object of Jasper Print created");

              JRViewer jv = new JRViewer(jp);

     //Insert viewer to a JFrame to make it showable
            JFrame jf = new JFrame();
            jf.getContentPane().add(jv);
            jf.validate();
            jf.setVisible(true);
            jf.setSize(new Dimension(800,600));
            jf.setLocation(300,100);
            jf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                /*
   * 
   * 
  File f=new File(reportName);
  if(f.exists()) System.out.println("Yes Yes File is there");
  else 
  System.out.println("File is not there"+f.getAbsolutePath());
   */

   }catch(Exception e){
    e.printStackTrace();}

    }// showReports

} 
```

请帮助我很担心

编辑：我在 JRViewer 中查看文件，然后简单地打印它，当我从 ireport netbean 插件另存为 pdf 时，也只有标题出现，我不知道是什么问题，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:34:36.847

尝试更改 Jframe 的大小。还尝试首先将您的报告导出为文件（使用任何 JRExporter 实现）以查看生成的报告是否正常。

# c# - MvvM Light：来自事件的信使

> ID：10715746
> 
> 赞同：1
> 
> 时间：2012-05-23T07:57:20.913
> 
> 标签：c#, wpf, mvvm-light

我正在开发一个 MvvM - 基于 Light 的应用程序。在这个应用程序中，我启动了一个异步 HttpReqest。然后，当我得到响应时，我启动了一个事件，在这种情况下，我正在广播一条消息以切换到另一个视图。但是当我执行这段代码时，我得到了一个 InvalidOperation 异常：调用线程无法访问这个对象，因为另一个线程拥有它。

这是我的代码：

```
public class MainLoginViewModel : ViewModelBase
{
    readonly LoginRequest _httpRequest = new LoginRequest();

    public MainLoginViewModel()
    {
        _httpRequest.IsValid += IsUserValid;
    }

    private void ExecuteLoginKeyPressCommand()
    {
        _httpRequest.BeginCheckIfUserIsValid();      
    }

    private static void IsUserValid(object sender, EventArgs e)
    {
        var infoView = new MainInfoView();

        if ((bool)sender)
        {
            infoView.Dispatcher.Invoke(DispatcherPriority.Normal,
                                   new Action(
                                       () => Messenger.Default.Send(infoView, Properties.Resources._mainLoginMessangerToken)));
        }
    } 
} 
```

在这个类中，我定义了我的 LoginRequest 类，它检查用户是否有效。该事件正在返回一个布尔值。如果用户有效，我将 Messenger 类中的新视图发送到另一个处理视图的 ViewModel：

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {
        SelectedView = new MainLoginView();
        Messenger.Default.Register<MainInfoView>(this, Properties.Resources._mainLoginMessangerToken, PasswordChanged);
    }

    private void PasswordChanged(MainInfoView obj)
    {
        SelectedView = obj;
    }       

    public UserControl SelectedView
    {
        get
        {
            return _selectedViewProperty;
        }

        set
        {
            if (_selectedViewProperty == value)
            {
                return;
            }

            var oldValue = _selectedViewProperty;
            _selectedViewProperty = value;
            RaisePropertyChanged(() => SelectedView, oldValue, value, true);
        }
    }  
} 
```

那么我在这里误解了什么吗？有人可以帮我吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:10:42.533

您需要使用调度程序从非 UI 线程更新 UI 元素。当您从异步请求中获得响应时执行的代码不在 UI 线程上。

[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher(v=vs.95).aspx)

# php - 是否有任何库可以帮助从可与 PHP 一起使用的矩形区域中提取 pdf 中的文本

> ID：10715749
> 
> 赞同：0
> 
> 时间：2012-05-23T07:57:30.467
> 
> 标签：php, pdf, pdftotext, pdf-to-html

我正在寻找一些（最好是免费的）库，它可以帮助从指定的矩形区域中提取 PDF 文本，该矩形区域由左、上、宽和高参数指定。它应该可以在 linux 系统上与 PHP 一起使用。您能否建议这样一个库和一个工作示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-29T15:38:36.947

## 命令行

PHP 也可以使用外部命令行工具。因此，如果这是您的选择...

如果您使用命令行`pdftotext`——***但只有 Poppler 版本，而不是 XPDF 版本！***-- 你有这些可选的 CLI 参数：

```
  -x : 裁剪区域左上角的 x 坐标
  -y : 裁剪区域左上角的 y 坐标
  -W：裁剪区域的宽度（以像素为单位）（默认为 0）
  -H：裁剪区域的高度（以像素为单位）

```

一个工作示例：

首先，让我们使用 Ghostscript 从 Bash 手册页创建一个 PDF：

```
man -t bash | gs -o man-bash.pdf -sDEVICE=pdfwrite - 
```

接下来，让我们从中提取一些文本。使用宽度 200、高度 100 和左上角`(200,200)`{你在这里从左上角计算为定位在`(0,0)`}：

```
kp@mbp:~$ pdftotext -f 1 -l 1 -x 200 -y 200 -W 200 -H 100 man-bash.pdf -

 Shell 和 Ut 的一致实现
 标准 1003.1)。Bash 可以配置为 POS

 描述中记录的演员外壳选项
 外壳被调用。另外，bash 解释

 存在选项，然后从 s 读取命令

```

**请注意我**`-f`对(for **first** page) 和`-l`(for last page)的用法。如果您不使用它，将为多页 PDF 的每一页打印相应的文本区域。**`pdftotext`**

 **与此屏幕截图比较：

![带有 Bash 手册页的 PDF 屏幕截图，选中的矩形被突出显示](../Images/e08e5589e99680fc653a0305992c4b6e.png)

看起来它按预期工作，不是吗？

## 图书馆

### 波普勒

Poppler 也可以用作库。但是我对这种方法没有任何经验（对 PHP 也没有太多经验）。

### TET

如果您找不到满足您要求的免费库，请查看从 PDF 中提取文本的最佳工具：[**TET，文本提取工具包**](http://www.pdflib.com/newsticker/single-news/article/pdflib-tet-4-product-family-available/)。TET 是[**PDFlib.com**](http://www.pdflib.com/)产品系列的一部分。

PDFlib.com 是 Thomas Merz 的公司。如果您不认识他的名字：Thomas Merz 是“PostScript and PDF Bible”的作者之一。

TET 的第一个化身是[**图书馆**](http://www.pdflib.com/products/tet/)。那个可能可以做任何你想做的事情，包括页面上每个元素的位置信息。

pdflib.com 还提供了该技术的另一个化身，即[**Acrobat 的 TET 插件**](http://www.pdflib.com/products/tet-plugin/)。第三个化身是[**PDFlib TET iFilter**](http://www.pdflib.com/products/tet-pdf-ifilter/)。这是适用于 Windows 桌面的独立工具。***两者都是免费的（如啤酒），可用于私人、非商业目的。***

TET 比 Adob​​e 自己的文本提取要好得多。它为我提取了其他工具（包括 Adob​​e 的）只吐出垃圾的文本。

试试看。**

# opends - Opends：如何让随机密码生成工作？

> ID：10715750
> 
> 赞同：0
> 
> 时间：2012-05-23T07:57:30.943
> 
> 标签：opends

我正在尝试在首次创建用户帐户或重置密码时启用随机密码生成。首先，我没有得到任何证据表明这是否可以在创建帐户时完成。如果有人能证实这一点，将不胜感激。

其次，我已经配置并启用了随机密码生成器，并将其附加到我的密码策略中。根据文档，如果客户请求中未提供密码，则密码修改扩展操作与密码生成器一起生成一个新密码。但这不起作用。这是否适用于任何类型的特殊操作？请帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T19:02:12.393

随机密码生成器在 OpenDJ（OpenDS 的积极开发的分支，但我确信它在 OpenDS 中也是如此）中默认启用。它不能在创建帐户时使用，因为没有将生成的密码返回给客户端应用程序的机制。因此，生成密码的正确方法是创建没有密码的帐户，然后使用 ldappasswordmodify（或密码修改扩展操作）来生成一个。如果没有指定新密码，这将自动完成。这就是说，它不能以匿名用户的身份完成。因此，将其作为目录管理员执行，但指定创建帐户的 DN：ldappasswordmodify -D "cn=directory manager" -w password -a "dn:uid=user.0,ou=people,dc=example,dc=com " LDAP密码修改操作成功生成密码：cye99shz

我希望这有帮助。

亲切的问候，

卢多

# php - PHP 将 MySQL 结果合并到一个变量中

> ID：10715752
> 
> 赞同：0
> 
> 时间：2012-05-23T07:57:40.990
> 
> 标签：php, mysql, variables

我正在尝试在我正在处理的网站底部构建要添加的城镇列表，我可以在这个 PHP 块中回显变量 fine，但是当我尝试在另一个 PHP 块中回显 $result1 时只返回第一个结果，而不是整个列表。

有什么想法吗？

```
$result = mysql_query("SELECT town FROM jb_town_postcodes");
$results = array();
while($row = mysql_fetch_assoc($result))
echo $results1 =  $row['town']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:59:06.480

```
while($row = mysql_fetch_assoc($result))
$results[]= $row['town'];

print_r($results); 
```

现在

例如

`echo $results[0]`将打印第一个值，例如 Wolverhampton `echo $results[2]`将打印 Cannock

`echo $results[count($results)-1]`将打印最后一个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:02:24.910

每次迭代你都会在 $result1 中保存一个来自 $result 的新值——这就是为什么在循环之后你只有最后一个城镇。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:04:33.030

试试这个：

```
$result = mysql_query("SELECT town FROM jb_town_postcodes");
$results = array();

while($row = mysql_fetch_assoc($result))
  // at every iteration, store value of 
  // $row['town'] to new index of $results1
  $results1[] =  $row['town'];

// now use $results anywhere 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:14:50.443

你应该使用大括号；）

```
while($row = mysql_fetch_assoc($result))
{
  $results[]= $row['town']; 
} 
```

# mongodb - 更新 mongodb 中的子对象

> ID：10715754
> 
> 赞同：3
> 
> 时间：2012-05-23T07:57:47.317
> 
> 标签：mongodb, casbah

考虑在我的 mongo 收藏中添加以下条目。

```
{
  "id" : "_0001",
  "map" : {
            "foo" : 1
          }
} 
```

现在我需要在内部地图中添加一个条目。像

```
{
  "id" : "_0001",
  "map" : {
            "foo" : 1,
            "bar" : 2,
          }
} 
```

`map`不是，`list`所以我不能`$push`在那里使用。有没有办法在mongo中做到这一点。而且我正在通过 casbah 访问数据库。如果可以，请记下 casbah 代码。

注意：-**地图不应该是一个列表**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:06:07.530

你有没有尝试过：

```
db.test.update({ _id : "_0001"}, { $set : { "map.bar" : 2}}) 
```

# jquery - 在jquery mobile中固定菜单div元素

> ID：10715755
> 
> 赞同：0
> 
> 时间：2012-05-23T07:57:49.113
> 
> 标签：jquery, html, css, jquery-mobile

我在 jquery mobile 中开发的页面左侧有一个菜单 div。问题是当页面滚动时，菜单也会随着页面滚动到上方。我希望菜单一直固定。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:01:11.173

```
#div_id{
  position:fixed;
  } 
```

我认为这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:00:34.367

`position: fixed;`在 CSS 中使用：

```
#myDiv {
    position: fixed;
    top: 100px;
    left: 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T12:50:40.843

```
#myDiv {
position: fixed!important;

  z-index: 1000!important;

top:55px !important

} 
```

# symfony - DoctrineFixturesBundle：LoadRubricaData::load() 中的致命错误

> ID：10715765
> 
> 赞同：0
> 
> 时间：2012-05-23T07:59:05.290
> 
> 标签：symfony, doctrine-orm

我无法启动我的简单 Fixture，我以正确的方式安装了捆绑包，并将 2 行放入 autoload.php 和 Appkernel.php 中，如此处所述[，](http://symfony.com/it/doc/current/bundles/DoctrineFixturesBundle/index.html)然后我创建了我的 Fixture 类，如下所示：

```
<?php

namespace ABCBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use ABCBundle\Entity\Rubrica;

class LoadRubricaData implements FixtureInterface
{
    public function load(ObjectManager $manager)
    {
        $rubrica = new Rubrica();
        $rubrica->setX("XXX");
        $manager->persist($rubrica);
        $manager->flush();
    }
}
?> 
```

但是当我尝试从 CLI 启动它时

> php 应用程序/控制台原则：fixtures:load

我得到：

> 致命错误：ABCBundle\DataFixtures\ORM\LoadRubricaData::load() 的声明必须与 [...]ABCBundle/DataFixtures/ORM/LoadRubricaData.php 中的 Doctrine\Common\DataFixtures\FixtureInterface::load() 的声明兼容在第 10 行

但是如果你去看看那个界面你会发现它是正确的：

```
interface FixtureInterface
{
    /**
     * Load data fixtures with the passed EntityManager
     *
     * @param Doctrine\Common\Persistence\ObjectManager $manager
     */
    function load(ObjectManager $manager);
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:35:41.933

该死，我忘了添加行

```
use Doctrine\Common\Persistence\ObjectManager; 
```

# c# - 提取的文件始终是只读的

> ID：10715768
> 
> 赞同：0
> 
> 时间：2012-05-23T07:59:16.850
> 
> 标签：c#, permissions, readonly, file-attributes

我正在提取 ISO，然后从提取的 ISO 中复制一个文件夹。问题是提取的文件是只读的。我尝试从属性菜单和 c# 中的代码更改它。都没有奏效。

我用于提取 ISO 的代码在另一个问题中：[extract ISO with winrar automatic with c# or batch](https://stackoverflow.com/questions/10579964/extract-iso-with-winrar-automatically-with-c-sharp-or-batch)

我正在寻找一种方法来更改提取的 ISO 的属性，以便我可以从其子文件夹中复制，或者只更改子文件夹的权限。

提前致谢

**更新**

新代码

```
 string[] folderToName = txtCopyFrom.Text.Split('\\');
        string isoName = folderToName[folderToName.Length - 1];
        isoName = isoName.Remove(isoName.Length - 4, 4);

        string copyTestFrom = txtCopyTo.Text + @"\"+ isoName + @"\Test\subTest";
        string[] folderName = txtCopyFrom.Text.Split('\\');
        string folderTestTo = folderName[folderName.Length - 1];
        folderTestTo = folderTestTo.Remove(folderTestTo.Length - 4, 4);
        string copyTest = txtCopyTo.Text;
        System.IO.Directory.CreateDirectory(copyTest);

        DirectoryInfo di = new DirectoryInfo(copyTestFrom);
        di.Attributes &= ~FileAttributes.ReadOnly;

        foreach (FileInfo fi in di.GetFiles())
        {
            fi.IsReadOnly = false;

            string destinationPath = Path.Combine(copyTest, Path.GetFileName(copyTestFrom));
            File.Copy(copyTestFrom, destinationPath);
        }
        MessageBox.Show("Files Copied"); 
```

subTest 中的文件不是只读的，只有文件夹本身是只读的。

目标路径转到 C:\users\mydocs\ISODump\subTest

`access denied`抛出异常后，我仍然可以手动复制文件夹

**更新 2**

*解决方法*

出于我的目的，找到了解决方法。`directory.move`通过移动文件夹而不是复制它来达到我想要的目的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:10:59.987

你可以试试这个来改变属性：

```
foreach (string fileName in System.IO.Directory.GetFiles(path))
{
    System.IO.FileInfo fileInfo = new System.IO.FileInfo(fileName);

    fileInfo.Attributes |= System.IO.FileAttributes.ReadOnly;
    // or
    fileInfo.IsReadOnly = true;
} 
```

您可以尝试将此属性递归地设置为所有子目录和文件：

```
DirectoryInfo di = new DirectoryInfo(directorypath);
public void Recurse(DirectoryInfo directory)
{
    foreach (FileInfo fi in directory.GetFiles())
    {
        fi.IsReadOnly = false; // or true
    }

    foreach (DirectoryInfo subdir in directory.GetDirectories())
    {
        Recurse(subdir);
    }
} 
```

[测试用户是否具有对文件夹的写入权限](https://stackoverflow.com/questions/1410127/c-sharp-test-if-user-has-write-access-to-a-folder)-[检查它](https://stackoverflow.com/questions/130617/how-do-you-check-for-permissions-to-write-to-a-directory-or-file)， *如果仍然存在问题，那么我认为解决方案应该是使用* [Windows Shell API](http://www.codeproject.com/KB/shell/csdoesshell2.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:11:16.647

尝试使用此代码

```
 fileInfo.IsReadOnly = False 
```

代替

```
fileInfo.Attributes = FileAttributes.Normal 
```

上面的代码有问题：这些行，给定您的评论之一

```
"C:\Documents and Settings\user\My Documents\ISO DUMP!!\extracted ISO\Test\subtetst"
                                                                           ^^^^^^^^
string folderTestTo = folderName[folderName.Length - 1];            
folderTestTo = folderTestTo.Remove(folderTestTo.Length - 4, 4);            
string copyTestTo = folderTestTo; 
```

将在 copyTestTo 中返回此值：

```
subt 
```

然后你做

```
string destinatationPath = Path.Combine(copyTestTo, 
                                        Path.GetFileName(copyTestFrom)); 
```

这将返回像这样的路径不可能的东西

```
 "subt\C:\Documents and Settings\user\My Documents\ISO DUMP!!\extracted ISO\Test\subtetst" 
```

我认为你应该仔细检查代码中的这些段落，在那里设置一些断点并检查你的 vars 的值

# actionscript-3 - 如何使用动作脚本和 flex 将变量值放入 arraycollection？

> ID：10715770
> 
> 赞同：2
> 
> 时间：2012-05-23T07:59:20.923
> 
> 标签：actionscript-3, apache-flex

我有一个变量，我想使用 actionscript 和 flex 将这个变量放入 arraycollection 或数组中

以下是代码

```
var xyz:int=30;

var myArray:Array = [ {Month: "January", Views_Week1:xyz}, { Month: "June",        

    Views_Week2: 13 }, { Month:" December", Views_Week3: 14} ];

pageViews= new ArrayCollection(myArray); 
```

或者

```
pageViews= new ArrayCollection(myArray);
[
    { Month: January, Views_Week1: xyz},
    { Month:June, Views_Week2: 13},
    { Month: december, Views_Week3: 14}]) 
```

请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:09:28.137

```
pageViews= new ArrayCollection(myArray); 
```

看起来不错。然而，第二个没有意义，你在哪里初始化`ArrayCollection`然后尝试再次分配对象（这不会发生，因为有`;`语句结束标记）。

这对你不起作用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:41:23.020

那是行不通的。定义变量时，它基本上只存在于该范围内。您可以在类的范围内将其声明为 [Bindable]，因此该类将使用 PropertyChangeEvent.PROPERTY_CHANGE 类型的 PropertyChangeEvent 传播更改。这将允许您使用带有 <{} /> 声明性绑定的 BindingUtils、ChangeWatcher 和 MXML 数据绑定。

您需要定义一个类，声明该类或字段 [Bindable]，然后创建该类的实例并通过 ArrayCollection 引用这些实例。使用 vanilla 对象不会让你到达某个地方，因为它们不能调度事件。

```
 package
    {
      [Bindable]
      public class Person
      {
        public var name:String;

        public function Person(n:String)
        {
          name = n;
        }
      }
    }

    const source:Array = [new Person('Fred')]
        , collection:IList = new ArrayCollection(source); 
```

数据绑定依赖于一些关键机制，如事件分派，这是需要牢记的。此外，以一种或另一种方式，对正在更改的数据的引用需要在需要更改通知的不同范围内。

# ajax - $jquery - $.ajax XML - .find .text

> ID：10715779
> 
> 赞同：2
> 
> 时间：2012-05-23T08:00:06.067
> 
> 标签：ajax, jquery

我是 jquery 和 ajax 的新手，所以请原谅我缺乏专业的陈述。

我已将我的 XML 文件加载到`success: function(xml)`.

然后我打电话给：

```
$(xml).find("name").each (function() {
    var name = '<li>name: ' + $(this).find("name").text() + '</li>';
    $('#name').append(name);
}); 
```

`<li>`正如我所期望的那样，我在页面上获得了 3 个新元素，这非常有效。然而，我没有看到`<name>Network</name>`标签之间的文本。

我`$(find)`用 (xml) 替换了该方法，只是为了看看会发生什么，它将所有 3 个名称返回到所有 3 个名称中`<li>`（关闭但没有雪茄！）

我怀疑`$(this)`我使用的方法在某种程度上是错误的，但对我做错了什么有点困惑。

请问有正确方向的指点吗？

编辑 -

XML 片段：

```
<soap:Envelope>
    <soap:Body>
        <ns2:getAccountsResponse>
            <Accounts>
                <acc??ountId>1</accountId>
                <address/>
                <city/>
                <country/>
                <creationDate>2012-04-11T00:00:00+01:00</creationDate>
                <description/>
                <fax/>
                <name>Network</name>
                <origin>??Support_4</origin>
                <phone/>
                <postalCode/>
                <state/>
                <webSite/>
            </Accounts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:08:49.430

鉴于您的 XML 结构替换此行：

```
var name = '<li>name: ' + $(this).find("name").text() + '</li>'; 
```

有了这个：

```
var name = '<li>name: ' + $(this).text() + '</li>'; 
```

这是因为在`each()`循环内部，`this`关键字已经引用了`<name />`元素，所以不需要`find()`它。

# c# - 本地 ASP.NET 网站在没有 Internet 的情况下无法运行

> ID：10715780
> 
> 赞同：1
> 
> 时间：2012-05-23T08:00:11.713
> 
> 标签：c#, asp.net, visual-studio-2008, internet-explorer-8, internet-explorer-9

我在 Visual Studio 2008 中创建了一个 ASP.NET Web 应用程序。当我连接到 Internet 时，该网站运行，但是当我没有 Internet 时，它不会启动（它只是不断地不断加载）。这是某种类型的异常：该网站在我的 PC 上是本地的，因此它应该在没有 Internet 的情况下运行。任何线索/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:11:20.970

如果您使用的是 firefox 并且在代理后面，则需要将 localhost 添加到您的“无代理”列表中。这是工具 - 选项 - 高级 - 网络 - 设置 - 并将其添加到列表中。我相当肯定 IE 也有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:07:53.177

也许你正在使用一些外部资源：数据库、像 jQuery 这样的 JavaScript 文件、统计脚本等。尝试删除它并检查页面是否加载。

# algorithm - 用于解决 .net 中的非线性优化任务的库

> ID：10715782
> 
> 赞同：3
> 
> 时间：2012-05-23T08:00:15.357
> 
> 标签：algorithm, computer-science, mathematical-optimization, numerical-methods

我试图实现 SVM 实现。在这个问题中，我需要解决非线性优化问题。任何人都可以建议我为 .NET 平台提供一个库，非常感谢。

如果有人可以建议他用于 SVM 的东西，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:17:30.303

我假设您问题中的首字母缩写词 SVM 表示支持向量机。在这种情况下，您需要求解器进行线性或二次规划（取决于公式）。我可以为 .NET 平台命名几个包含线性或二次规划求解器的库：

*   [来自 CenterSpace 的 NMath](http://www.centerspace.net/)
*   [来自 RTMath 的 FinMath](https://www.rtmath.net/products/finmath/)
*   [极致优化](http://www.extremeoptimization.com/)

它们都是商业软件（但大多数都为非商业用途提供特殊的学术许可，只需少量资金）。此外，大多数用于数值优化的专业库（如[MOSEK](http://www.mosek.com/)、[CPLEX](http://www-01.ibm.com/software/integration/optimization/cplex-optimizer/)、[Gurobi](http://www.gurobi.com/)等）都包含 .NET 平台的包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T04:02:30.597

我不知道 SVM 代表什么。但我知道[ALGLIB](http://www.alglib.net/)在 .net 中提供了一些很好的优化算法。此外，您可以考虑包装提供许多不同算法的[NLOpt 。](http://ab-initio.mit.edu/wiki/index.php/NLopt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T20:50:39.177

我没有使用 SVM（支持向量机？）的经验，但是对于具有潜在非线性约束的基于梯度的大规模非线性优化，这里有一个 .NET“适配器”到[IPOPT](https://github.com/cureos/csipopt)[优化](https://projects.coin-or.org/Ipopt)器。

[如果您需要针对较少变量的无导数方法，您可以在此处](https://github.com/cureos/cscobyla)找到 Michael Powell 的无导数 COBYLA2 优化器的 C# 端口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T22:49:29.070

我尝试使用 Accord.net 主要是因为它是免费的。

# c# - Pay Pal IPN 延迟 - 是休眠站点解决方案

> ID：10715786
> 
> 赞同：0
> 
> 时间：2012-05-23T08:00:31.120
> 
> 标签：c#, asp.net, paypal, paypal-ipn

我在网站上使用 pay pal 订阅。
当用户通过支付宝付款时，我等待 IPN 消息将其保存在数据库中。
此外，在付款用户从 pay pal 重定向到我的网站后，我必须检查 IPN 消息是否存储在数据库中，并基于此我在数据库中做一些其他的事情。
问题是当用户被重定向到站点时，有时会发生 IPN 消息不存在所以我不能做我想做的事。
所以我想以某种方式停止应用程序三秒钟，但我从来没有做过这样的事情，我不知道这样做是否好。

IPN 消息延迟几秒钟是否正常？

如果我说`Thread.Sleep(3000)`是否可以以这种方式在 Web 应用程序中显示动画加载器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:40:09.407

您可以查看[paypal ipn 概述](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)，会发现您需要一种不同的方法。

“IPN 消息服务并不假定您的听众会及时收到所有消息。由于互联网并非 100% 可靠，消息可能会丢失或延迟。为了处理传输和接收延迟或失败的可能性， IPN 消息服务实现了一种重试机制，该机制会以不同的时间间隔重新发送消息，直到您确认已成功接收到消息。消息可能会在原始消息之后的四天内重新发送。

“IPN 消息服务不应被视为实时服务。您的结帐流程不应等待 IPN 消息才允许完成。如果您的网站等待 IPN 消息，结帐处理可能会因系统负载而延迟并且由于重试的可能性而变得更加复杂。”

一种解决方案是在付款到达之前不启用内容，但正如您所见，它可能需要长达四天的时间。

其他解决方案是，当您通过 paypal API 创建订阅时，您会收到包含订阅信息的响应。（例如，如果您使用定期付款，则 create_recurring 付款资料中的响应）。在此之后，您可以相信他会付费并启用内容。（当然有可能用户可以在付款前取消订阅，如果时间太长的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:17:10.923

> 如果我说 Thread.Sleep(3000) 是否可以以这种方式在 Web 应用程序中显示动画加载器？

不，您将完全卡住您的应用程序而没有取得任何成果。所以解决方案可以是使用计时器。

所以试试：

```
Timer timer = new Timer();
timer.Interval = 3000;
timer.Tick += new EventHandler(timer_Tick);

//diplay the animated loader and start the timer 

timer.Enabled = true; 
```

* * *

```
void timer_Tick(object sender, EventArgs e)
{
     //Elapsed 3000 milliseconds so you have to stop the timer
     timer.Enabled = false;

     //Now redirect the user
} 
```

# css - iOS 5 上的固定定位

> ID：10715788
> 
> 赞同：0
> 
> 时间：2012-05-23T08:00:39.043
> 
> 标签：css, ios5, jquery-mobile, css-position

`position: fixed;`滚动时iOS 5上的问题有什么解决方案吗？由于 DOM 在滚动期间冻结，因此固定元素不会随着文档短暂滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:36:58.083

从 iOS5 开始，这不再是问题。不再需要 iScroll 或其他任何东西。

此外，您可以通过添加“本机”样式的弹性滚动

```
-webkit-overflow-scrolling:touch; 
```

到你的 CSS 表。

尽管如此，它仍然存在一些问题，在这一点上AFAIK。

# macos - 将 Mac Cocoa 控件与 OpenFrameworks 和 GLUT 一起使用

> ID：10715792
> 
> 赞同：0
> 
> 时间：2012-05-23T08:00:47.700
> 
> 标签：macos, cocoa, glut, openframeworks

我正在努力弄清楚如何让 Mac Cocoa Controls 与 OpenFrameworks 一起工作。

我正在寻找的是一种创建可可控件并将它们作为子视图添加到开放框架使用的窗口的方法。因为它是 GLUT，所以我不知道在哪里可以获得可以添加子视图的指针。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:06:30.677

由于我不在 Mac 上，我无法对其进行测试，但 openFrameworks 最有希望的插件是来自 memo [here](https://github.com/memo/msalibs/tree/master/ofxCocoa)的插件。它用 Cocoa 代替了 GLUT 的东西，但似乎有点过时了。我建议看一下这个插件附带的示例代码，看看它是否符合您的需要，并且可以作为“在它之上”添加可可控件的开始。如果它不是正确的，你可以在[这里](http://ofxaddons.com/)查看官方的 openFrameworks 插件索引，还有其他几个可可插件，也许他们也可以完成这项工作。

# sql - SQL 联合开销

> ID：10715793
> 
> 赞同：0
> 
> 时间：2012-05-23T08:00:51.040
> 
> 标签：sql, sql-server, performance, union

我在使用联合时遇到性能问题。我有两个具有相同列结果但来自不同表的 sql 查询：

```
SELECT COL1, COL2, COL3
FROM TABLE1 
```

（大约需要 4 秒才能完成）和：

```
SELECT COL1, COL2, COL3
FROM TABLE2 INNER JOIN TABLE3 ON ID 
```

这也需要大约 4 秒才能完成。当我使用`UNION ALL`这两个查询时，结果需要 22 秒才能完成。

有什么提高性能的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:11:43.000

UNION 子句通过在 select 子句上使用 DISTINCT 并创建一些临时表来删除重复项，这些都是性能昂贵的任务。您是否需要这些重复项？

查看[Pinal Dave 的此链接，](http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/)它详细分析了使用 UNION 和 UNION ALL，以及执行计划分析。

如果没有表结构的详细视图，我也会检查这些选择子句是否正确使用了索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:03:41.313

尝试使用`UNION ALL`- 它避免找到重复项。最好不要在`UNION`没有`ALL`and的情况下使用`DISTINCT`，除非你真的需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:04:30.573

与性能问题一样：衡量。

所以下一步是从你的数据库中获取执行计划并查看它。如果您不了解该计划，请提出一个新问题。

# android - Android：使用 HMP 服务器时拒绝 Cookies (DIALOGIC)

> ID：10715796
> 
> 赞同：2
> 
> 时间：2012-05-23T08:01:05.967
> 
> 标签：android, json, http, httpwebrequest

> **可能重复：**
> [通过 HttpClient 接受所有 Cookie](https://stackoverflow.com/questions/8279970/accept-all-cookies-via-httpclient)

我正在使用 HMP 服务器，我正在尝试将数据发送并获取到 IP 地址为 192.168.1.1 的 hmp 服务器。我收到以下警告，无法通过 HMP 服务器获取系统数据。

这是我得到的警告。

```
05-23 13:24:06.993: W/ResponseProcessCookies(1362): Cookie rejected:"BasicClientCookie[version=1,name=visit,domain=.146.152.86.82,path=/,expiry=Wed May 23 13:34:06 IST 2012]". Domain attribute ".146.152.86.82" violates RFC 2965: effective host name does not domain-match domain attribute.
 05-23 13:24:07.123: W/System.err(1362): org.json.JSONException: No value for scalars
 05-23 13:24:07.133: W/System.err(1362):    at   org.json.JSONObject.get(JSONObject.java:354)
 05-23 13:24:07.133: W/System.err(1362):    at org.json.JSONObject.getJSONArray(JSONObject.java:544) 
```

我不明白为什么它使用这个 146.152.86.82.. 而不是这个 192.168.1.1.. 任何人都可以帮助我。

这不是一个重复的问题。谢谢你。

# javascript - Javascript解码html实体

> ID：10715801
> 
> 赞同：63
> 
> 时间：2012-05-23T08:01:29.340
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何使用 jQuery 解码 HTML 实体？](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)

我想转换这个文本：

```
"&lt;p&gt;name&lt;/p&gt;&lt;p&gt;&lt;span style="font-size:xx-small;"&gt;ajde&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;da&lt;/em&gt;&lt;/p&gt;" 
```

到 html，带有标签和 Javascript 或 Jquery 中的所有内容。这该怎么做？

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-05-23T08:03:44.670

```
var text = '&lt;p&gt;name&lt;/p&gt;&lt;p&gt;&lt;span style="font-size:xx-small;"&gt;ajde&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;da&lt;/em&gt;&lt;/p&gt;';
var decoded = $('<textarea/>').html(text).text();
alert(decoded); 
```

这会设置一个新元素的 innerHTML（未附加到页面），导致 jQuery 将其解码为 HTML，然后使用 .text() 将其拉回。

[现场演示](http://jsfiddle.net/aZxjG/)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-23T08:03:48.043

[此线程](https://stackoverflow.com/questions/1147359/how-to-decode-html-entities-using-jquery)中有一个 jQuery 解决方案。尝试这样的事情：

```
var decoded = $("<div/>").html('your string').text(); 
```

这将设置一个新`<div>`元素的 innerHTML（未附加到页面），导致 jQuery 将其解码为 HTML，然后使用`.text()`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-23T08:04:04.310

使用 jQuery 最简单的方法是：

```
var text = '&lt;p&gt;name&lt;/p&gt;&lt;p&gt;&lt;span style="font-size:xx-small;"&gt;ajde&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;da&lt;/em&gt;&lt;/p&gt;';

var output = $("<div />").html(text).text();
console.log(output); 
```

**演示：http:** [//jsfiddle.net/LKGZx/](http://jsfiddle.net/LKGZx/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T08:05:05.603

我想你正在寻找这个？

```
$('#your_id').html('&lt;p&gt;name&lt;/p&gt;&lt;p&gt;&lt;span style="font-size:xx-small;"&gt;ajde&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;da&lt;/em&gt;&lt;/p&gt;').text(); 
```

# elasticsearch - 没有文档的 ElasticSearch 方面结果

> ID：10715812
> 
> 赞同：16
> 
> 时间：2012-05-23T08:02:13.013
> 
> 标签：elasticsearch

我正在尝试获取已编入索引的某些事件的直方图，但我只希望响应中的“方面结果”而不是搜索+方面结果。

这是我正在运行的查询的示例：

```
curl -XGET 'http://localhost:9200/main/events/_search?pretty=true' -d '
{
   "facets" : {
    "histo1" : {
       "query" : {
            "query_string" : {"query":"*:*"}
        },
         "date_histogram" : {
            "field" : "time",
            "interval" : "minute"
        }
    }
  }
}
' 
```

所以在结果中我想要

```
"facets" : {
"histo1" : {
  "_type" : "date_histogram",
  "entries" : [ {
    "time" : 1337700000,
    "count" : 76
  } ]
} 
```

部分，没有与查询匹配的所有文档。

这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-23T12:30:25.187

您可以使用[count](http://www.elasticsearch.org/guide/reference/api/search/search-type/) search_type：

```
curl -XGET 'http://localhost:9200/main/events/_search?search_type=count&pretty=true' -d '
{
  "facets" : {
    "histo1" : {
       "query" : {
            "query_string" : {"query":"*:*"}
        },
         "date_histogram" : {
            "field" : "time",
            "interval" : "minute"
        }
    }
  }
}
' 
```

或者，您可以设置`"size":0`为您的查询，但效率会降低：

```
curl -XGET 'http://localhost:9200/main/events/_search?pretty=true' -d '
{
  "facets" : {
    "histo1" : {
       "query" : {
            "query_string" : {"query":"*:*"}
        },
         "date_histogram" : {
            "field" : "time",
            "interval" : "minute"
        }
    }
  },
  "size":0
}
' 
```

# android - 如何开发一个 Spinner 根据用户选择改变 ImageView 的图像

> ID：10715813
> 
> 赞同：0
> 
> 时间：2012-05-23T08:02:14.637
> 
> 标签：android, bitmap, hashmap, spinner, out-of-memory

我正在尝试开发一个可以根据用户选择更改 ImageView 图像的微调器。我已经成功开发了如下代码但是我想问一下是否可以以更容易管理的方式开发它

我的想法是将它开发成这样的格式：

```
HK_map,R.drawable.map_101
UK_map,R.drawable.map_102
US_map,R.drawable.map_103 
```

我应该使用 hashmap 还是 arraylist？你能帮我一些关于如何改进它的建议吗？非常感谢提前

# 我当前的代码[更新]

```
package tool.mobile;

import java.util.ArrayList;
import java.util.List;   
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.Spinner;

public class SpinnerActivity extends Activity implements OnItemSelectedListener{

private ImageView view2;
private Spinner spinner2;
private ArrayAdapter adapter2;
private List<HashMap<String, String>> items;
private Bitmap snoop;

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.bible_help_1);

spinner2 = (Spinner) findViewById(R.id.spinner1);
view2 = (ImageView) findViewById(R.id.imageView1);

items = fillMaps();

SimpleAdapter adapter=new SimpleAdapter(this,items,R.layout.bible_help_spinner,
                new String[]{"name"},
                new int[]{R.id.title});

spinner2.setAdapter(adapter);

spinner2.setOnItemSelectedListener(this);

spinner2.setVisibility(View.VISIBLE);

}

public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
    long arg3) {

HashMap map = (HashMap)items.get(arg2);
String Drawing_1= map.get("Drawing").toString();
int resID = getResources().getIdentifier(Drawing_1, "raw", "tool.mobile"); 
Bitmap snoop= BitmapFactory.decodeStream(getResources().openRawResource(resID));
imageshow.setImageBitmap(snoop);
imageshow.setTag(resID);
imageshow.setTag(resID);

}

public void onNothingSelected(AdapterView<?> arg0) {  
}

private List<HashMap<String, String>> fillMaps()
    {
        List<HashMap<String, String>> items = new ArrayList<HashMap<String,String>>();

        HashMap<String,String> i = new HashMap<String,String>();
            i.put("name","HK_map");
            i.put("Drawing", "map_101");
            items.add(i);

            i = new HashMap<String,String>();
            i.put("name","US_map");
            i.put("Drawing", "map_102");
            items.add(i);

return items;}

} 
```

# 当前问题

目前，我在查看几张图像后面临内存不足的问题，您能给我一些解决问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:08:07.650

我认为您应该使用它，`HashMap`因为它为您提供了**键值**对功能来容纳*地图名称*及其*图像资源*值

# sql - 在 postgresql 中触发后，NEW 运算符不起作用

> ID：10715814
> 
> 赞同：0
> 
> 时间：2012-05-23T08:02:20.353
> 
> 标签：sql, postgresql, plpgsql

在 postgresql 8.4.11 中，此触发器不起作用。更新后，字段 modified_date 不会更新。

```
CREATE OR REPLACE FUNCTION  upd_date() RETURNS TRIGGER AS $test$
DECLARE
BEGIN
  NEW.modified_date := clock_timestamp();
  RETURN new;
END;
$test$
LANGUAGE 'plpgsql'; 

CREATE TRIGGER myTable_upd_date
after update 
ON myTable
FOR EACH ROW
EXECUTE PROCEDURE upd_date(); 
```

如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:08:58.193

您不能在**after**触发器中更改值，因为它是在值被持久化*之后触发的。*

您需要将其更改为`BEFORE UPDATE`触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:12:55.617

在更新之前而不是之后触发触发器。

# c# - 应该如何管理自定义业务线软件的身份验证

> ID：10715819
> 
> 赞同：1
> 
> 时间：2012-05-23T08:02:50.823
> 
> 标签：c#, security, authentication, password-encryption

我正在为一家公司编写业务线软件，我们希望对用户进行身份验证，以便我们可以管理工作流程并进行一些审核。基本上，由于某些网络限制，我的雇主不希望我背负 Windows 身份验证（我真的不想进入它，但它混合了糟糕的网络设置和老板想知道是否有其他方法做它）

我正在使用 c#、wpf、MVVM、PRISM

我读过一些关于散列密码、加盐等的内容，我读得越多，我意识到我真的不应该写这个程序的安全部分，因为我基本上是合格的 faaaaaar。

Eric Lippert 对安全性有一个非常好的基本介绍，他在其中一开始就警告读者不要设计自己的安全系统，因为你知道的不够多。

我想知道，有什么替代品？

既然我不应该自己写，我想知道我应该从哪里得到它？

我是否聘请安全专家来编写它？

是否有我应该与之交互的第三方安全程序？

我是否将设计外包但自己实施？

谁是我应该关注的这个行业的大玩家？

*（我[在 IT Security Exchange 上](https://security.stackexchange.com/questions/15284/how-should-one-manage-authentication-on-custom-line-of-business-software)创建了这个问题，但我想知道 SO 有什么要说的，因为它正在编程）*

* * *

# 编辑

为了回答人们在那里提出的一些问题，我对我的[IT 安全交换问题进行了一些调整。](https://security.stackexchange.com/questions/15284/how-should-one-manage-authentication-on-custom-line-of-business-software)如果您想了解更多信息，请查看它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:35:21.970

我认为您应该看看远程安全性-即使您不打算使用远程处理，原则也很好。请参阅[.NET Remoting Security Solution Part I](http://msdn.microsoft.com/en-us/library/ms973911.aspx ".NET 远程安全解决方案第一部分")和[“.NET Remoting Security Solution Part II](http://msdn.microsoft.com/en-us/library/ms973909 ".NET 远程安全解决方案第二部分")。这可以帮助您构建 SSO（单点登录）解决方案。或者要求用户使用 Windows 内置凭据框重新输入密码：[显示Windows Vista/7 的 C# 中的身份验证对话框](https://stackoverflow.com/questions/4134882/show-authentication-dialog-in-c-sharp-for-windows-vista-7 "在 C# 中为 windows Vista/7 显示身份验证对话框")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:27:19.697

警告：一些无耻的自我推销包括在以下内容中：

听起来您正在寻找的是标准许可证管理，适用于 SaaS 类型的应用程序或桌面。您正在寻找的基本功能是创建和管理用户列表并让应用程序自动遵循该列表。根据应用程序对内部业务流程的机密性或重要性，您可能需要考虑您的具体要求。

一旦您开始控制访问（对任何事物），就会产生令人不快的潜在后果：要么阻止合法用户访问，要么允许非法用户访问的安全漏洞（例如，一个简单的命名用户/密码挑战和响应系统允许用于帐户共享——有意或无意）。

如果您尝试进行审计​​，您需要知道系统足够可靠以提供准确的数据。

我们公司提供[出色的许可证管理解决方案](http://wibu.us/products/codemeter-license-central.html)；还有其他选择。一个好的系统应该（一旦设置和集成）允许您轻松地为单个用户或组设置业务规则——例如，也许您希望允许一组 20 人在任何时候运行 5 个应用程序实例，但是不是 6\. 或者您可能想为临时用户提供一个在特定日期到期的临时帐户。自己滚动这些功能可能很困难，但一个好的 LM 系统应该让它完全不费力。

我向您保证，使用可靠的第 3 方解决方案（短期和长期）将比构建和维护自己的代码更便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:58:55.617

我想我们现在已经解决了这个问题。[SteveS](https://security.stackexchange.com/users/28/steves)在[我的 IT 安全交换问题](https://security.stackexchange.com/questions/15284/how-should-one-manage-authentication-on-custom-line-of-business-software#comment24056_15284)上发布了一个关于使用 WCF、WIF 和 ASP.NET 成员资格提供程序的好主意。这并不理想，因为我将编写一些代码，所以它会很不安全。

然而，它似乎是最好的选择，因为它利用了 Microsoft 构建的安全技术，而我只是将它们缝合在一起。

我只是担心接缝。

# localization - Vala、资源和本地化

> ID：10715821
> 
> 赞同：3
> 
> 时间：2012-05-23T08:02:59.380
> 
> 标签：localization, resources, internationalization, embedded-resource, vala

在 vala 中处理资源（如图像、文件等）的最佳方法是什么？有没有资源管理系统？本地化应用程序的最佳方式是什么？我从 .NET 环境来到 Vala，本地化和资源管理只是小菜一碟，但我现在完全迷失在 Vala 中。

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T22:13:48.887

GIO 2.32 引入了 GResource。Vala 文档位于[http://valadoc.org/#!api=gio-2.0/GLib.Resource，C](http://valadoc.org/#!api=gio-2.0/GLib.Resource)位于[http://developer.gnome.org/gio/stable/gio-GResource.html](http://developer.gnome.org/gio/stable/gio-GResource.html)

GResource 的想法是您使用[glib-compile-resources](http://developer.gnome.org/gio/stable/glib-compile-resources.html%20glib-compile-resources)创建 C 代码，然后可以将其包含在您的 Vala 应用程序中（您可能希望创建一个简单的 VAPI 来配合它）。我还不知道 Vala 中的任何示例（glib 2.32 刚刚发布），但它应该非常简单。

不过，传统上，Linux 上的软件只是将资源保存在 XDG 目录中的单独文件中。然后根据硬编码值和/或环境变量确定路径... GLib 甚至包含使这变得容易的函数（它们位于[GLib.Environment](http://valadoc.org/#!api=glib-2.0/GLib.Environment)命名空间中）。

至于 i18n/l10n，我知道的大多数软件都使用 gettext。这些函数绑定在 GLib 命名空间中（GLib._、GLib.dgettext、GLib.dngettext 等）。唯一真正的复杂性是您需要[在 Vala 包含 gi18n-lib.h 之前在 C 级别定义 GETTEXT_PACKAGE](https://stackoverflow.com/questions/7221754/how-can-i-use-gettext-in-vala)。如果您直接从 valac 编译为可执行文件，您只需传递 -X -DGETTEXT_PACKAGE=foo。如果您使用的是构建系统，您需要弄清楚如何在该构建系统中添加 C 标志（对于自动工具，您只需将它们添加到您的 *_CFLAGS 变量中）。

之后，大部分工作都在于构建系统集成，并且就像在 C 中一样工作，这应该很容易让您找出您正在使用的任何构建系统（例如，在 Google 搜索“gettext autotools”，得到 161k命中）。

# c# - DataGridViewColumn.Index 不同于 dataGridView.Columns["colName"].Index

> ID：10715822
> 
> 赞同：0
> 
> 时间：2012-05-23T08:03:07.993
> 
> 标签：c#, winforms

我有一个 DataGridView，里面有一些列。例如，我有 colService 列，我的 DatagridView 称为 dgvServices。那么下面的值就不同了。

```
colService.Index
dgvServices.Columns[colService.Name].Index 
```

我还检查了他们的 DisplayIndex 属性，它也不同。在我的 datagridview 中，我有一些隐藏的列。此外，一些列绑定到数据表列，而其他列则没有。为什么这两个值不同？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:03:10.290

事实证明，问题的发生是因为 DGV 的 AutoGenerateColumns 属性设置为 true。这样，当数据源分配给 DGV 时，会创建新列并覆盖现有列。将 AutoGenerateColumns 设置为 false 可以解决问题。

# php - 如何将 nofollow 属性添加到 wordpress 类别列表？

> ID：10715823
> 
> 赞同：2
> 
> 时间：2012-05-23T08:03:09.007
> 
> 标签：php, wordpress, themes, wordpress-theming, nofollow

好吧，此代码获取类别列表并将其显示在分配帖子的主题中。我想将 nofollow 标签添加到此列表中。我在网上冲浪并找不到解决方案。我找到的唯一解决方案是修改 wordpress 核心文件。但我不想修改核心文件。

```
<footer class="entry-meta">
        <?php
            /* translators: used between list items, there is a space after the comma */
            $category_list = get_the_category_list( __( ', ', 'basically' ) );

            $meta_text = __( 'Category: %1$s', 'basically' );

            printf(
                $meta_text,
                $category_list,
                get_permalink(),
                the_title_attribute( 'echo=0' )
            );
        ?> 
```

还有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:13:28.297

```
<?php

foreach( (get_the_category() ) as $category ) {
    $category_link[] = '<a href="' . get_category_link( $category->cat_ID ) . '"'
                     . ' title="' . $category->cat_name . '" rel="nofollow">'
                     . $category->cat_name . '</a>';
}

printf( __( 'Category: %1$s', 'basically' ), implode( ', ', $category_link ) );

?> 
```

它将在内部工作`the_loop()`，要在循环外使用它，您必须提供帖子 ID，`get_the_category()`因此它应该是`get_the_category( $post->ID )`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-08T16:30:09.520

也试试这个：

```
<footer class="entry-meta">
        <?php
            /* translators: used between list items, there is a space after the comma */
            $cat_list = get_the_category_list( __( ', ', 'basically' ) );
            $category_list = str_replace('rel="category tag"','rel="category tag nofollow"',$cat_list);    

            $meta_text = __( 'Category: %1$s', 'basically' );

            printf(
                $meta_text,
                $category_list,
                get_permalink(),
                the_title_attribute( 'echo=0' )
            );
        ?> 
```

# compare - 代码流失计算器（不适用于版本控制系统）

> ID：10715827
> 
> 赞同：2
> 
> 时间：2012-05-23T08:03:29.630
> 
> 标签：compare, code-metrics

给定两个项目版本，我想计算代码流失指标。

例子：

> 输入：两个文件夹，包含项目两个版本的 C 和 Header 文件

* * *

> 输出：每个文件中添加/更改/删除的行数列表

我尝试了一些工具，即[BeyondCompare](http://www.scootersoftware.com/)和[WinMerge](http://winmerge.org/?lang=de)。问题是，第一个要求所有文件都在同一个目录中，否则你只能比较它们而没有指标，第二个主要是一个可视化工具，也没有给我指标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:17:33.210

您可能会考虑的工具之一是[WebDiff](http://java.uom.gr/~nikos/webdiff.html#Service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:39:34.980

对于 .NET 代码，此类任务可以通过 NDepend [Code Query LINQ (CQLinq)](http://www.ndepend.com/Features.aspx#CQL)查询来完成，例如（注意如何选择代码指标）：

```
from t in JustMyCode.Types
where t.IsPresentInBothBuilds() &&
      t.CodeWasChanged() // Only match types where code has been changed 
                         // between the two versions
let tOld = t.OlderVersion()
select new { t,
  newLoc = t.NbLinesOfCode,
  oldLoc = tOld.NbLinesOfCode,
  newNbMethods =t.Methods.Count(),
  oldNbMethods =t.Methods.Count(),
  newNbFields =t.Fields.Count(),
  oldNbFields =t.Fields.Count(),
} 
```

![在此处输入图像描述](../Images/562e40871f9f6b45b67d45e9af92fd8f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T06:58:59.287

您的版本是否存储在版本控制系统（例如，SVN、Git）中？如果是，那么您可以通过查看版本控制系统日志（已经给出添加/更改/删除的行）来计算您的流失指标，即使这两个版本不是连续提交。

# java - Eclipse 插件 - 如何在视图插件中打开编辑器

> ID：10715828
> 
> 赞同：1
> 
> 时间：2012-05-23T08:03:31.370
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我之前没有写过任何 Eclipse 插件，所以我的问题对你们中的一些人来说可能很愚蠢，但是是否可以在我的新 Eclipse 视图中打开 Eclipse 中可用的编辑器之一？

好吧，实际上我不知道如何打开任何编辑器，甚至是那里的简单文本区域，我只是搜索了一些示例，但它们都只是在表格或树中显示一些简单的数据。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:59:46.670

正如@vainolo 所提到的，编辑器和视图在 Eclipse 应用程序中是两个不同的东西。

> 视图用于在 RCP 应用程序中显示信息；它们也可用于更改数据。视图扩展了抽象类 ViewPart。编辑器扩展了抽象的 EditorPart。两者都扩展了 WorkbenchPart。
> 
> 编辑器通常要求用户明确选择“保存”以将更改应用到数据，而视图通常会立即更改数据。所有编辑器都在同一区域中打开。

要在 Eclipse 应用程序中创建编辑器，您可以遵循这个[Eclipse 编辑器教程](http://www.vogella.com/articles/EclipseEditors/article.html)。

您还可以阅读描述开发 Eclipse RCP 应用程序的[Eclipse RCP 教程。](http://www.vogella.com/articles/EclipseRCP/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:30:50.743

编辑器和视图是不同的动物，所以你不能只是混搭。[此常见问题解答](http://wiki.eclipse.org/FAQ_What_is_the_difference_between_a_view_and_an_editor%3F)解释了差异。

您还可以查看[这个不错的 eclipse 插件开发教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)。这对我来说是一个很好的起点。

# objective-c - 模态窗口未关闭

> ID：10715831
> 
> 赞同：1
> 
> 时间：2012-05-23T08:03:37.343
> 
> 标签：objective-c, cocoa, nswindow, nswindowcontroller, nsapplication

我正在运行一个自定义 NSWindowController 作为模式窗口。

首先，我这样展示它：

```
ProgressWindow *pWin = [[ProgressWindow alloc] initWithWindowNibName:@"ProgressWindow" andXmlContent:nil];        
[NSApp runModalForWindow:[pWin window]]; 
```

然后我想从 ProgressWindow 的 NSWindowController 中解除它。为此，我在 windowDidLoad 函数中设置了以下代码（只是为了测试）：

```
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:2]];
[self testMethod]; 
```

正如预期的那样，它在 2 秒后调用 testMethod 方法应该关闭模态窗口，但我似乎没有找到方法。我试过`[NSApp stopModal]`, `[NSApp abortModal]`, `[self close]`, 把它做成一张纸然后打电话`[self.window orderOut:nil];[NSApp endSheet:self.window];`，但似乎没有任何效果。要么什么都没有发生，要么窗口在另一个位置重新打开。我不知道为什么会这样，初始化代码只被调用一次。

谁知道怎么关闭？？？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T09:50:47.577

我相信您以不正确的方式使用 RunLoop。RunLoop 是一个循环，它管理应用程序中 GUI 小部件的显示和交互，如果您停止主 RunLoop，您的应用程序将停止更新。

由于您使用的是 runUntilDate，因此您将停止处理 GUI 更新，因为主 RunLoop 已停止。

要获得您需要的功能，您可以在运行循环中使用 addTimer 或使用单独的 NSTimer 并使用参数选择器启动 stopModal 消息。

# google-analytics - 在 Google Analytics 中，如何自定义不同页面的数据？

> ID：10715837
> 
> 赞同：2
> 
> 时间：2012-05-23T08:03:48.957
> 
> 标签：google-analytics

在谷歌分析中，我正在发送事件，页面访问信息，但我想在特定页面中自定义信息页面，有多少事件被触发。请问我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:38:24.587

不确定是否理解问题，但您在内容/事件部分有一个页面报告，这有帮助吗？

它显示在哪个页面上发生了哪个事件。

# asp.net - 如何不让 _Layout 每次都渲染？

> ID：10715838
> 
> 赞同：0
> 
> 时间：2012-05-23T08:03:53.117
> 
> 标签：asp.net, asp.net-mvc-3

我创建了一个MVC3的测试项目，该项目只有一个剃须刀布局。在布局中我使用jquery创建动态菜单，我只想得到效果是当我点击这些菜单时，它应该在正文段中返回不同的局部视图，并且布局菜单应该记住我点击布局的菜单状态页。

但结果是，每次点击菜单，布局都会重新渲染，菜单状态又恢复了，请问怎么解决？

这是我的代码！！！任何人都可以帮助我吗？谢谢！

```
 <!DOCTYPE html>
            <html>
            <head>

                <title>@ViewBag.Title</title>
                <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
                <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
                <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
                <script type="text/javascript">
                    $(function () {
                              $(".sidebar1 dl dd").hide();
                              $(".sidebar1 dl dt").click(function () {
                              $(".sidebar1 dl dd").not($(this).next()).hide();

                              $(this).next().slideToggle(500);

                        });
                    });

            </script>

            </head>
            <body>
            <div class="container">
              <div class="header"><a href="#"><img src="/Content/images/logo.png" alt="logo" name="Insert_logo" width="180" height="90" id="Insert_logo" style="background-color: #C6D580; display:block;" /></a>

                <!-- end .header --></div>
              <div class="sidebar1">

                <dl class="nav">
                  <dt><a href="#">aaaaa</a></dt>
                    <dd>
                        <ul>
                      <li><a href="#">AAAA</a></li>
                          <li><a href="#">BBBB</a></li>
                          <li><a href="#">CCCC</a></li>

                        </ul>
                    </dd>
                  <dt><a href="#">aaaaa</a></dt>
                    <dd>
                        <ul>
                      <li><a href="#">AAAA</a></li>
                          <li><a href="#">BBBB</a></li>
                          <li><a href="#">CCCC</a></li>

                        </ul>
                    </dd>
               </dl>
            </div>
            <div class="content">

            @RenderBody()
            </div>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:09:36.527

如果需要，您可以指定每个页面上使用的布局。如果您不想要布局，只需将其设置为 null。把它放在页面顶部：

```
@{
  layout = null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:44:23.703

用户，

你在哪里：

```
<div class="content"> 
```

您需要将其更改为：

```
<div id="content"> 
```

然后，您需要定位您的部分视图以更新该 div。这意味着您的控制器操作应该返回 PartialView()，而不是 View()。此外，无需担心上述任何问题，您只需尝试将点击功能更改为：

```
$(function () {
    $(".sidebar1 dl dd").hide();
    $(".sidebar1 dl dt").click(function (e) {
        $(".sidebar1 dl dd").not($(this).next()).hide();

        $(this).next().slideToggle(500);
        e.preventDefault();
        return false;
    });
}); 
```

由于您没有显示 ajax 代码，因此可能需要更多，但我敢打赌，如果您在 ajax 调用中遵循标准，那么这一切都会通过上述更改自行解决。

# ios - 根据 plist 文件中的设置固定图像

> ID：10715841
> 
> 赞同：0
> 
> 时间：2012-05-23T08:04:21.680
> 
> 标签：ios, xcode, image, plist

我有一个关于这种结构的许多要点的列表：

```
Category1
-item0
 -name
 -coordinates
-item1
 -name
 -coordinates
-item2
 -name
 -coordinates

Category2
-item0
 -name
 -coordinates
-item1
 -name
 -coordinates
-item2
 -name
 -coordinates 
```

现在我用这个显示图钉图像：

```
pinView.image = [UIImage imageNamed:@"pin1.png"]; 
```

**如何为不同类别“Category1，Category2”显示不同的图钉图像？非常感谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:09:13.330

您可以将图像名称添加到 plist 中，例如

```
Category1
-imageName
-item0
-name
-coordinates
-item1 
```

我假设您将 plist 作为字典加载，然后您可以使用

```
NSString *catName = @"Catergory1";
NSDictionary *dict = ...
pinView.image = [UIImage imageNamed:[[dict objectForKey:catName] valueForKey:@"imageName"]]; 
```

# javascript - Fullcalendar - 水平调整事件大小

> ID：10715842
> 
> 赞同：0
> 
> 时间：2012-05-23T08:04:29.117
> 
> 标签：javascript, jquery, resize, fullcalendar, jquery-ui-resizable

有人知道一种方法可以使**fullCalendar中的事件****水平**调整大小吗？

我正在搜索它，但我没有找到任何东西。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:08:21.267

我认为您正在寻找的是 Google 日历样式，不是吗？在这种情况下，看看这个项目：[https](https://github.com/themouette/jquery-week-calendar) ://github.com/themouette/jquery-week-calendar我一直在使用它并且非常稳定和活跃。

# regex - 检查字符串是 X 还是不是 X

> ID：10715845
> 
> 赞同：4
> 
> 时间：2012-05-23T08:04:36.250
> 
> 标签：regex

我可以使用正则表达式检查字符串是否等于给定关键字。这是一个例子：

```
Regex: /^hello$/
String: hello
Result: matches, as expected

Regex: /^goodbye$/
String: goodbye
Result: matches, as expected

Regex: /^bye$/
String: bye bye
Result: does not match, as expected 
```

我无法实现的是检查字符串是否不等于关键字。以下是我正在尝试做的一些示例：

```
Regex: ^(?!hello).*$
String: bye
Result: matches, as expected

Regex: ^(?!hello).*$
String: bye bye
Result: matches, as expected

Regex: ^(?!hello).*$
String: say hello
Result: matches, as expected

Regex: ^(?!hello).*$
String: hello you
Result: does not match, but should match because "hello you" is not equal to "hello" 
```

我想我很接近，`^(?!hello).*$`但需要帮助。这是另一个例子：

```
Regex: ^(?!fresh\sfruits).*$
String: fresh fruits
Result: does not match, as expected

Regex: ^(?!fresh\sfruits).*$
String: lots of fresh fruits
Result: matches, as expected

Regex: ^(?!fresh\sfruits).*$
String: fresh fruits, love them.
Result: does not match, but should match 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:18:30.363

让我们将失败的情况添加到您的表达式中：

```
^(hello.+|(?!hello).*)$ 
```

所以第一位匹配 hello 后跟任何保存空字符串的内容。（我刚刚完成了一个自动机课程，不禁将其视为 ε:P）。第二位匹配不以 开头的任何内容`hello`。

我认为这涵盖了所有可能的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:07:05.887

`^(?!hello$)`（放下`.*`）

（...固定后视/前瞻混淆）

# symfony - 在控制器内部调用控制器

> ID：10715849
> 
> 赞同：2
> 
> 时间：2012-05-23T08:05:07.523
> 
> 标签：symfony

为什么在控制器内部调用控制器时会出现以下错误？

> 致命错误：在第 149 行的 /home/web/project/ *symfony2* /vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php中的非对象上调用成员函数 get()

在控制器中，我调用了一个扩展类`Controller`：

```
class DemoController extends Controller
{
    public function indexAction()
    {
        $object = new \Acme\DemoBundle\Service\Object();
        $object->method();
    }
    // ...
} 
```

类是这样的：

```
# Acme/DemoBundle/Service/Object.php
class Object extends Controller
{
    public function method()
    {
        $em = $this->getDoctrine()->getEntityManager(); // the problem
        // ...
    }
} 
```

当我`$this`在控制器中调用服务、原则或其他类似的东西时，发生了错误。否则，它会起作用。

例如，我如何在此类中使用教义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T09:45:01.483

尝试

```
$object->setContainer($this->container); 
```

在你打电话之前`method()`

编辑：基本上扩展服务是个坏主意，`Controller`但如果你**真的**需要这样做，请尝试添加这个

```
your.service:
  class: Your\Class
  arguments: [...]
  calls:
    - [ setContainer, [@service_container] ] 
```

在您的服务配置文件中（可能`service.yml`）

# jquery - Chrome 中的 JSON 后退按钮，IE 中的重新加载按钮（显示为裸数据）

> ID：10715852
> 
> 赞同：8
> 
> 时间：2012-05-23T08:05:36.243
> 
> 标签：jquery, ruby-on-rails, ruby, internet-explorer, google-chrome

在任何事情之前：[$.getJSON 后退按钮显示 JSON 返回数据而不是页面](https://stackoverflow.com/questions/2037295/getjson-back-button-showing-json-return-data-not-the-page)没有帮助，以及[https://groups.google.com/group/angular/browse_thread/thread/3787ad609c0beb77/eb1b57069dab9f63](https://groups.google.com/group/angular/browse_thread/thread/3787ad609c0beb77/eb1b57069dab9f63)没有帮助，互联网也没有帮助没有帮助。

这是问题：

我从页面中调用 url 来获取 json 数据，然后在同一页面内使用 jquery 模板呈现这些数据。

想象一下，我们在[http://someurl.com/search](http://someurl.com/search)页面上，我们正在开始这样的请求

```
$.ajax({
  url: '/searchthis', //important, this is NOT THE SAME URL
  cache: false,
  type: 'GET',
  headers: {
    "Accept": "application/json",
  },
  dataType: 'json'
  success: function(data) {
    doSomethingWithResults(data);
  }
}); 
```

Rack 响应将缓存控制标头设置为无缓存：

```
Cache-Control:no-cache 
```

一切正常，但如果您在 Chrome 中离开页面转到另一个页面，然后按后退按钮，您将看到裸 JSON 数据。当您在 IE8 中点击重新加载按钮时，也会出现相同的行为。如果您只需在地址栏中的 url 上按 Enter，两者都可以正常工作。

我不知道如何解决这个问题，因为 Chrome 的人不会这样做（参见[http://code.google.com/p/chromium/issues/detail?id=108425](http://code.google.com/p/chromium/issues/detail?id=108425)）

在我看来，这似乎是浏览器方面的误解，因为它缓存了它确实不应该缓存的东西（响应标头），并且它缓存了错误的 url 下的东西（因为 JSON 请求没有命中相同的 URL）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:05:47.043

问题实际上是 Rails：Chrome 和 IE 都请求没有特定格式的最后一个响应，所以 Rails 只接受第一个响应块，在我的例子中恰好是 json。将 html 块放在 json 块前面解决了这个问题。

```
respond_to do |format|
  format.html { ... } //important because the request comes with no specific format
  format.json { ... }
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-10T22:16:53.373

我对 Chrome 也有同样的问题。我的控制器的方法确实有`format.html`

```
respond_to do |format|
  format.html
  format.js
end 
```

似乎 Chrome 缓存了结果，所以我可以通过在我的 ajax 请求中添加一个数据条目来解决这个问题，如下所示：

```
$.ajax({
   url: '/restful/path',
   data: { format: 'js' }, // This line here
   dataType: 'json'
}); 
```

或者您可以通过将格式附加到请求的末尾来传递格式，只需确保您`(.:format)`的路线中有选项

```
$.ajax({
   url: '/restful/path.js',
   dataType: 'json'
}); 
```

希望这可以帮助某人

# c# - 在“MainView”中设置 DataContext 过滤到所有“ChildView”

> ID：10715857
> 
> 赞同：3
> 
> 时间：2012-05-23T08:06:06.030
> 
> 标签：c#, .net, wpf, mvvm, user-controls

我想知道这是否是 .NET 的标准功能：在 中设置 时`DataContext`，`ParentView`它会过滤到所有`child views`.

假设你有 ParentView、ChildView1 和 ChildView2：

```
<UserControl x:Class="DXWPFApplication1.ParentView"
             xmlns:view="clr-namespace:DXWPFApplication1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <view:ChildView1  x:Name="childView1"/>
    </Grid>
</UserControl>

<UserControl x:Class="DXWPFApplication1.ChildView1"
             xmlns:view="clr-namespace:DXWPFApplication1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <view:ChildView2  x:Name="childView2"/>
    </Grid>
</UserControl> 
```

ParentView背后的代码：

```
public ParentView() 
        {
            InitializeComponent();

            DataContext = "ViewModel"; //BreakPoint here

            //
            //When the first DataContext is set, all the DataContext's below are set as well
            //

            childView1.DataContext = DataContext;
            childView1.childView2.DataContext = DataContext;
        } 
```

**注意：第一次设置时的断点`DataContext`**

为什么我只设置了 ParentView 时所有的 DataContexts 都设置了`DataContext`？

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:12:41.110

这是标准行为，通常是需要的。为防止出现这种情况，请在标记中将 DataContext 设置为 {x:Null}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:13:09.547

可视化树中的组件从其父级继承数据上下文。您的子视图位于父视图的可视化树中，因此它将获得分配的父上下文。如果要更改它（例如在子视图构造函数中或在 xaml 中`<view:ChildView2 DataContext="{x:Null}" x:Name="childView2"/>`），则需要将其显式设置为不同的值。

为什么这样做：因为它几乎总是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:19:06.557

Willem 如果您为每个视图使用单独的 ViewModel，您应该做的是嵌套您的 ViewModel。

所以说你有`MainViewModel`暴露的属性`ChildViewModel1`和`ChildViewModel2`. 然后您将子用户控件的绑定设置为

`DataContext="{Binding ChildViewModel1}"`和

`DataContext="{Binding ChildViewModel2}"`分别

主视图始终将其 DataContext 维护为`MainViewModel`

# eclipse - eclipse中是否有显示当前控制流的快捷方式？

> ID：10715859
> 
> 赞同：1
> 
> 时间：2012-05-23T08:06:17.867
> 
> 标签：eclipse, editor

我通常会偶然发现复杂的业务逻辑并迷失在复杂代码的迷雾中。所以我需要找到我到底在哪里，我会去看看究竟是哪个流控制或分支导致我进入当前的语句。我记得 JBuilder 有一个功能，它可以让我覆盖在编辑器上，显示我在哪里，那么 Eclipse 有这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:32:14.620

我前段时间为我的论文写了这个插件。[http://eclipsefcg.sourceforge.net/](http://eclipsefcg.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:29:21.233

一个更以“控制流”为中心的解决方案（比我下面的原始答案）是：

[**控制流图工厂 3.7**](http://marketplace.eclipse.org/node/679)

> ![图标](../Images/6949fba5f332435c063bf86c2a5799e3.png)Control Flow Graph Factory 是一个 Eclipse 插件，它**从 java 字节码生成控制流图**，编辑它们并导出为 GraphXML、DOT 或多种图像格式。

![源代码可视化器](../Images/eb4f71cf2c8e78393b3c2811f856dd42.png) ![源代码图](../Images/fffd26cd0bc4b82a94167d8ef61e28c5.png)

* * *

但是在静态方面，在编码时，您可以添加[Mylyn 插件](http://www.eclipse.org/mylyn/)，以便在探索某些代码时隔离您想要的特定上下文（请参阅“ [Task-Focused Interface](http://wiki.eclipse.org/index.php/Mylyn/User_Guide#Task-Focused_Interface) ”）：

![聚焦导航器视图](../Images/9763dd50927de324914df3a0cbc80bea.png)

如果没有 Mylyn，您将拥有至少显示您所在功能的[大纲视图：](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/coutline.htm)

![大纲视图](../Images/c3158a137d8362dcfe643160dd4d2b2d.png)

* * *

在运行时方面，您拥有 Debug 透视图，它将显示您在 Debug 会话的任何时间点在代码中的位置。
请参阅“[使用 Eclipse 进行 Java 调试 - 教程](http://www.vogella.com/articles/EclipseDebugging/article.html)”

![日食调试视图](../Images/82442b636c9f734dc32ecb2af27238fb.png)

# html - 避免打印时剪切 HTML 表格单元格

> ID：10715863
> 
> 赞同：1
> 
> 时间：2012-05-23T08:06:35.200
> 
> 标签：html, css

我有一个包含许多要打印的表格的 HTML 文档。问题是，有时，纸的末端到达一行的中间，所以一半打印在一个页面中，其余的在下一页打印，甚至将单行文本分成两部分。

有没有办法避免这种情况？

注意：我已经阅读[了这个问题](https://stackoverflow.com/questions/1763639/how-to-deal-with-page-breaks-when-printing-a-large-html-table)，但我需要一个不涉及 CSS 的解决方案，因为它不能在目标计算机上工作，我无法改变它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:27:16.720

即使使用 CSS，由于浏览器对 CSS 分页的支持有限（从您所指问题的答案中可以看出），这个问题也很困难。

多年来，这个问题一直存在，我认为没有人为此目的增加了 HTML 技巧。有一些技巧可以通过将段落或列表放在一个单元格表格中来尝试防止其在段落或列表中出现分页符，但这只是偶尔有效，此外，在您的情况下，您已经有一个表格。

所以恐怕没有解决办法，除了使用导致额外垂直间距的`pre`元素，比如包含空行的元素（将整个表格推到下一页——这当然可能会使情况变得更糟） ，如页面格式和纸张大小，与您的预期不同）或将一个表格分成两个表格，它们之间可能有额外的空间（甚至更成问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:31:15.863

如果目标计算机不支持（足够的）CSS，那么您可以在服务器上创建一个 PDF 文档。如果设置`Content-Type`正确，浏览器将下载文档并启动系统的PDF阅读器。

如果这是不可能的，那么就没有解决方案。

# iphone - 模拟器中的文档文件夹为空。我的 db.sqlite 在哪里？

> ID：10715865
> 
> 赞同：2
> 
> 时间：2012-05-23T08:06:40.180
> 
> 标签：iphone, xcode, sqlite, documents

我读到我应该在这条路径中找到我的 sqlite db：

~/Library/Application Support/iPhone Simulator/YOUR-IOS-VERSION/Applications/UNIQUE-KEY-FOR-YOUR-APP/Documents

但是文件夹是空的。当我在模拟器中运行我的应用程序时，我可以查询数据库。db 最初位于我的应用程序的资源文件夹中。

我正在使用 xcode 3.2.6 和 OS X 10.6.8

有没有其他地方我可以找到它？

非常感谢。拉波

```
-(void)insertError:(Frage *) f 
           answer2:(NSString *) answer2 
           answer3:(NSString *) answer3 
 {

    int resconn = sqlite3_open([pathDB UTF8String], &database);

    if (resconn == SQLITE_OK) {

        NSString * sql = @"Insert into errors (id, answer2,answer3) values (?,?,?)";
        const char * sqlStatement = [sql UTF8String];

        sqlite3_stmt * compiledStatement;

        if (sqlite3_prepare_v2(database, sqlStatement, -1 , &compiledStatement, NULL) == SQLITE_OK) {
            sqlite3_bind_text(compiledStatement, 1, [f.id UTF8String], -1 , SQLITE_TRANSIENT);
            sqlite3_bind_int(compiledStatement, 2, [answer2 intValue]);
            sqlite3_bind_int(compiledStatement, 3, [answer3 intValue]);
        } 
        if (!sqlite3_step(compiledStatement) == SQLITE_DONE) {
            //
        }   
        sqlite3_finalize(compiledStatement);

    }
    sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:02:59.437

为了访问应用程序 Documents 文件夹中的资源数据库，您首先需要在应用程序启动时将其复制到那里。

如果数据库文件位于 xcode 项目的资源文件夹中，它不会自动复制到应用程序的文档目录中。

为此，您可以使用：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSError *error;

NSString *databasePath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"YOUR_DB_IN_RESOURCES"];

[[NSFileManager defaultManager] copyItemAtPath:databasePath 
                                                toPath:[NSString stringWithFormat:@"%@/%@",documentsDirectory,@"YOUR_DB"]
                                                 error:&error]; 
```

然后，您将能够使用现有代码访问现在位于文档文件夹中的数据库（`[pathDB UTF8String]`应该指向文档目录而不是资源）。

正如您所提到的，您仍然可以在资源中使用数据库，但每次重新启动应用程序时都会将其擦除。诀窍是将数据库复制到您的文档文件夹中，直到从设备中手动删除应用程序为止（文档文件夹也在应用程序更新期间保留，因此当用户更新应用程序时您的数据库仍然存在）。

希望这可以帮助 ：）

# javascript - 为什么 Google Maps JavaScript 在我第二次点击时没有正确显示地图？

> ID：10715867
> 
> 赞同：0
> 
> 时间：2012-05-23T08:06:54.733
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google Maps JavaScript API v3 在我的 Web 应用程序中的地图上显示位置。在我的 html 中，我有：

```
<script src="jquery-mainpage.js"></script>
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB4LCwxrO5EzHnAQXCkP9fjREUEhOPCol4&sensor=false">
</script> 
```

这就是我在点击更新按钮时制作地图的方式`jquery-mainpage.js`：

```
$('#updatebtn').unbind("click");
$('#updatebtn').bind('click', function(){
    var keystring = $('#key').text();
    $.ajax({
        type: 'POST',
        url: 'http://localhost:8888/jsgooglemaps',
        data: {keystr: keystring},
        success: function(result) {
            var obj = jQuery.parseJSON(result);
            var centerLatLng = new google.maps.LatLng(obj.centerLat, 
                obj.centerLong);
            var myOptions = {
                center: centerLatLng,
                zoom: 17,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                draggable: true
            };

            var map = new google.maps.Map(
                document.getElementById("map_canvas_1"),
                myOptions);

            var markerArray = obj.locations;
            for(var i=0;i<markerArray.length;i++){
                var myLatlng = new google.maps.LatLng(
                    markerArray[i].latitude, 
                    markerArray[i].longitude);
                var marker = new google.maps.Marker({
                    clickable: true,
                    position: myLatlng,
                    map: map,
                    zIndex: i
                });
                google.maps.event.addListener(marker, "click", function() {
                    var tempLatLng = new google.maps.LatLng(0, 0);
                    this.setVisible(false); 
                    this.setPosition(tempLatLng);
                    var j = this.getZIndex();
                    markerArray[j].latitude = 0;
                    markerArray[j].longitude = 0;
                });
            }
        }
    });
}); 
```

第一次点击它显示一切正确。但是当我再次单击更新按钮时，它不会正确显示地图。我附上两个屏幕截图。谁能告诉我为什么会这样。提前致谢。第一次点击地图![在此处输入图像描述](../Images/f1f3d9843dd67028e97f8ec4e1a1af7e.png)

当我再次单击更新按钮时映射![在此处输入图像描述](../Images/3c8a2ba9fdb4b1c6a4053f6538d291a8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:43:49.830

您不想重复创建地图的新实例，因为有一个已知错误会阻止以前地图实例的内存被垃圾收集。查看此问题以及讨论和结果答案：[销毁地图实例的正确方法是什么？](https://stackoverflow.com/q/10485582/1314132)

在该问题的答案中，有一个视频链接，指向 Google 地图团队的 Chris Broadfoot 和 Luke Mahe 在 Google Maps Office Hours 会议期间展示的视频，该视频解释了他们不支持涉及重复创建地图实例的用例。您最好保留地图的单个实例并在整个用户会话中重复使用相同的地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:57:01.623

我正在从 ajax 成功代码创建 map_convas_1 div，并在更新完成后将其删除。然后每当用户单击更新按钮时再次创建它。它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T15:51:40.427

有用。非常感谢，您的“从 div 中删除代码”选项对我有用，我的问题是第二次它不起作用，如果我调整屏幕大小它可以工作，但不是用户调整屏幕大小的自然方式看地图。

我正在使用 Jquery 删除 div 代码。在我的情况下，我使用的是 jquery 对话框，然后当我关闭对话框时，我将 div 中的 html（谷歌地图显示地图）替换为原始 div 代码。

我原来的 div 代码是

```
<div id="mapaLocalsub" style="width:500px; height:450px; " ></div> 
```

我注意到，在谷歌地图工作后，它用很多东西和样式填充了 div，然后在我的 Jquery.dialog 的关闭函数中，我用我原来的 div 代码替换了 html：

```
$( "#mapaLocal" ).dialog({
      height: 450,
      width: 500,
      modal: true,
      close: function() {
      $( "#mapaLocal" ).html("<div id=\"mapaLocalsub\" style=\"width:500px;     height:450px; \" ></div>");
      }
}); 
```

但当然，您可以在关闭函数或创建地图之前调用的函数中使用 Jquery html 方法，希望对您有所帮助。

```
$( "#mapaLocal" ).html("<div id=\"mapaLocalsub\" style=\"width:500px;     height:450px; \" ></div>"); 
```

# xml - 使用 XSLT 过滤非引用的成员节点

> ID：10715873
> 
> 赞同：2
> 
> 时间：2012-05-23T08:07:09.707
> 
> 标签：xml, xslt

OpenStreetMap xml 文档由一组“node”元素和一组“way”元素组成（除其他外）。

“节点”元素可以（可选地）嵌套“标签”元素。

“way”元素由“node”元素的有序列表组成，由嵌套元素“nd”引用，它们的属性“ref”指向“node”元素的属性“id”。

这里有一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<osm version="0.6" generator="CGImap 0.0.2">
  <node id="1726631203" lat="50.8500083" lon="4.3553223" visible="true" version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z"/>
  ...
  <way id="160611697" user="toSc" uid="246723" visible="true" version="1" changeset="11385198" timestamp="2012-04-22T14:57:19Z">
    <nd ref="1726631203"/>
    <nd ref="1726631223"/>
    <nd ref="1726631213"/>
    <nd ref="1726631205"/>
    <nd ref="1726631185"/>
    <nd ref="1726631203"/>
  </way>
  ...
</osm> 
```

我的问题是如何使用 XSLT 进行以下转换？

*   过滤所有未被任何方式元素引用的节点元素。
*   过滤引用未包含在源 xml 文档中的节点元素的方式元素。
*   将属性“可见”更改为“假”，更改为没有“标记”子元素的任何“节点”元素。

任何其他元素都应保留在生成的 xml 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:46:17.967

> 我的问题是如何使用 XSLT 进行以下转换？
> 
> *   过滤所有未被任何方式元素引用的节点元素。
>     
>     
> *   过滤引用未包含在源 xml 文档中的节点元素的方式元素。
>     
>     
> *   将属性“可见”更改为“假”，更改为没有“标记”子元素的任何“节点”元素。

**这种转变满足了所有三个要求：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kND-By-Ref" match="way/nd" use="@ref"/>
 <xsl:key name="kNodeById" match="node" use="@id"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="node[not(key('kND-By-Ref', @id))]"/>
 <xsl:template match="way[nd[not(key('kNodeById', @ref))]]"/>

 <xsl:template match="node[not(tag)]/@visible">
  <xsl:attribute name="visible">false</xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档时**（适合创建以包含每个需求的案例）：

```
<osm version="0.6" generator="CGImap 0.0.2">
    <node id="1726631203" lat="50.8500083" lon="4.3553223" visible="true"
      version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z">
      <tag/>
 </node>
    <node id="1726631223" lat="50.8500083" lon="4.3553223" visible="true"
      version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z"/>
    <node id="ZZZZZZZ" lat="50.8500083" lon="4.3553223" visible="true"
      version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z"/>
    <way id="160611697" user="toSc" uid="246723" visible="true"
      version="1" changeset="11385198" timestamp="2012-04-22T14:57:19Z">
        <nd ref="1726631203"/>
        <nd ref="1726631223"/>
    </way>
    <way id="160611698" user="toSc" uid="246723" visible="true"
      version="1" changeset="11385198" timestamp="2012-04-22T14:57:19Z">
        <nd ref="1726631203"/>
        <nd ref="1726631223"/>
        <nd ref="1726631213"/>
        <nd ref="1726631205"/>
        <nd ref="1726631185"/>
        <nd ref="1726631203"/>
    </way>
</osm> 
```

****产生****所需的正确结果**（执行所有过滤并将其中一个元素的`visible`属性转换为）：`node``false`**

 ****```
<osm version="0.6" generator="CGImap 0.0.2">
   <node id="1726631203" lat="50.8500083" lon="4.3553223"
    visible="true" version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z">
      <tag/>
   </node>
   <node id="1726631223" lat="50.8500083" lon="4.3553223"
    visible="false" version="6" changeset="9938190" timestamp="2011-11-24T22:05:32Z"/>
   <way id="160611697" user="toSc" uid="246723" visible="true"
    version="1" changeset="11385198" timestamp="2012-04-22T14:57:19Z">
      <nd ref="1726631203"/>
      <nd ref="1726631223"/>
   </way>
</osm> 
```

**说明**：

1.  身份规则被三个模板覆盖，每个模板实现三个要求之一。

2.  具有空主体的两个覆盖模板实现了两个过滤要求。

3.  我们使用键来方便有效地通过属性查找s，并通过属性`node`查找s 。`id``nd``ref`

4.  属性值替换要求在第三个覆盖模板中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:45:53.593

像这样的东西应该工作：

```
<xsl:for-each select="//osm/node">
   <xsl:if test="//osm/way/nd[@ref=current()/@id]">

     <xsl:copy-of select=".">

   </xsl:if>
</xsl:for-each> 
```

诀窍是如果 xpath 表达式返回一个或多个结果，则 if 节点中的测试返回 true。您可以使用相同的技术来检查 tag 属性是否存在。不幸的是，当您需要更改属性时，您需要手动复制其他属性（xsl：复制除*可见*属性之外的所有子元素，而不是简单地使用 xsl:copy-of）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:24:19.620

这似乎有效：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:template match="node">
    <xsl:if test="//osm/way/nd[@ref=current()/@id]">
      <xsl:choose>
        <xsl:when test="tag">
          <xsl:copy-of select="."/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy>
            <xsl:copy-of select="@*[not(local-name(.) = 'visible')]"/>
            <xsl:attribute name="visible">false</xsl:attribute>
          </xsl:copy>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

xsl:if 测试是从上一个答案中复制的，并消除了未引用的节点。

当子标签不存在时，xsl:choose 中的位将可见属性设置为 false。这是一种*无需*单独复制所有属性即可更改属性值的方法；但它忽略标签以外的任何子元素。

我还没有解决方式元素的过滤问题。****

# arrays - 如何处理 Numpy 中的圆度数？

> ID：10715880
> 
> 赞同：0
> 
> 时间：2012-05-23T08:07:34.487
> 
> 标签：arrays, numpy, geometry, degrees

我需要在 numpy 中计算一些方向数组。我将 360 度分为 16 组，每组覆盖 22.5 度。我想要组中间的 0 度，即获取 -11.25 度和 11.25 度之间的方向。但问题是我怎样才能得到 168.75 度和 -168.75 度之间的组？

```
a[numpy.where(a<0)] = a[numpy.where(a<0)]+360
for m in range (0,3600,225):
        b = (a*10 > m)-(a*10 >= m+225).astype(float)    
        c = numpy.apply_over_axes(numpy.sum,b,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:20:32.580

如果你想把数据分成16组，中间有0度，你为什么要写`for m in range (0,3600,225)`？

```
>>> [x/10\. for x in range(0,3600,225)]
[0.0, 22.5, 45.0, 67.5, 90.0, 112.5, 135.0, 157.5, 180.0, 202.5, 225.0, 247.5,
 270.0, 292.5, 315.0, 337.5]
## this sectors are not the ones you want! 
```

我会说你应该从`for m in range (-1125,36000,2250)`（注意，现在我使用的是 100 因子而不是 10）开始，这会给你你想要的组......

```
wind_sectors = [x/100.0 for x in range(-1125,36000,2250)]
for m in wind_sectors:
    #DO THINGS 
```

* * *

我不得不说我不太了解你的脚本和它的目标......为了处理圆形度数，我建议如下：

*   一种条件，您将有问题的数据放置在其中，即您必须处理零附近的转换；
*   放置所有其他数据的条件。

例如，在这种情况下，我打印数组中属于每个扇区的所有元素：

```
import numpy

def wind_sectors(a_array, nsect = 16):
    step = 360./nsect
    init = step/2
    sectores = [x/100.0 for x in range(int(init*100),36000,int(step*100))]

    a_array[a_array<0] = a_arraya_array[a_array<0]+360

    for i, m in enumerate(sectores):
        print 'Sector'+str(i)+'(max_threshold = '+str(m)+')'
        if i == 0:
            for b in a_array:
                if b <= m or b > sectores[-1]:
                    print b

        else:
            for b in a_array:
                if b <= m and b > sectores[i-1]:
                    print b
    return "it works!"

# TESTING IF THE FUNCTION IS WORKING:
a = numpy.array([2,67,89,3,245,359,46,342])

print wind_sectors(a, 16)

# WITH NDARRAYS:

b = numpy.array([[250,31,27,306], [142,54,260,179], [86,93,109,311]])

print wind_sectors(b.flat[:], 16) 
```

* * *

**关于** `flat` **和** `reshape` **功能：**

```
>>> a = numpy.array([[0,1,2,3], [4,5,6,7], [8,9,10,11]])
>>> original = a.shape
>>> b = a.flat[:]
>>> c = b.reshape(original)
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
>>> b
array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])
>>> c
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]]) 
```

# php - php服务器到服务器推送通信

> ID：10715881
> 
> 赞同：1
> 
> 时间：2012-05-23T08:07:36.827
> 
> 标签：php, web-services, sockets, server-push

到目前为止，我有 2 台服务器（A，B），B 正在拉 A 获取信息。现在我正在寻找将信息从 A 推送到 B 的可能性。

由于 B 仍会不时拉动，因此推动可能会结束“一劳永逸”。

我能想到的最简单的解决方案是 w webservice over HTTP 将信息从 A 发布到 B。还有其他有效的 (php) 解决方案吗？

套接字连接怎么样？这是 php 的有效方法吗？或者从 HTTP 切换到 UDP（开销更少？）

有没有你知道的基准？

感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:14:19.250

假设纯 PHP：

HTTP POSTing 是我心目中最简单的解决方案。

使用套接字连接，除非您有一个无限期地在 B 上侦听的套接字（我什至不会考虑这一点），否则无论如何您都需要 A 到 POST B 来设置套接字。

我认为如果您要传输大量数据，套接字连接可能会有一些好处，但如果不是，我会坚持使用 POST。

# android - 如何让我的页脚一直显示？

> ID：10715892
> 
> 赞同：0
> 
> 时间：2012-05-23T08:08:22.907
> 
> 标签：android, android-listview

我有一个 xml 中的 listView 和一个我想在另一个 xml 中显示的页脚。页脚显示但仅在列表底部。如何让页脚一直显示？

这是我的列表视图 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     />
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >
<TextView
    android:id="@+id/borrowerName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="14sp"
     >
</TextView>

<TextView
    android:id="@+id/borrowerGroupCode"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>

<TextView
    android:id="@+id/borrowerLoanAmount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="12sp"
    >
</TextView>
</LinearLayout>
<CheckBox
    android:id="@+id/check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="5px"
    android:layout_marginRight="5px" >
</CheckBox>   
</RelativeLayout> 
```

这是我的页脚 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<Button
android:id="@+id/disburse"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/submit"
/>
</LinearLayout> 
```

这是我放在 onCreate 方法中的代码：

```
View footer = getLayoutInflater().inflate(R.layout.loan_disbursement_footer, null);
getListView().addFooterView(footer);

setListAdapter(adapter);
Button button = (Button)findViewById(R.id.disburse);
button.setOnClickListener(this); 
```

非常感谢帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:20:42.887

将页脚设置为

```
align_parent_bottom=true 
```

然后将您的列表视图设置为

```
layout_above="footer" 
```

# php - 如何将此 PHP 正则表达式转换为 JS

> ID：10715893
> 
> 赞同：-4
> 
> 时间：2012-05-23T08:08:31.110
> 
> 标签：php, javascript, regex

我有以下在 PHP 中工作的 RegEx，但我不知道如何转换它以便它在 JS 中工作。

```
$string='test/again/'
preg_replace('/[^\/]+\/$/', '', $string) 
```

这需要这个：测试/再次/

并使其成为：测试/

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:10:22.597

这[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)应该可以解决问题

```
var string = 'test/again/'
string = string.replace(/[^\/]+\/$/,''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:10:09.447

`/[^\/]+\/$/`应该做的伎俩。

**编辑**：我看到你编辑了你的帖子，你的 RegExp 现在看起来一样了。你又问什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T08:13:32.917

使用`.replace()`：

[演示](http://jsfiddle.net/Daedalus/XEy8p/)

```
var string = 'test/again/';
var result = string.replace(/[^\/]+\/$/, ''); 
```

# c - C /绑定多个套接字[在不同的端口上]

> ID：10715895
> 
> 赞同：0
> 
> 时间：2012-05-23T08:08:41.860
> 
> 标签：c, sockets

我想在不同的端口上绑定 4 个套接字。不知何故，我总是得到`: Address already in use`错误。对于第一个循环，`case PORT1`它正在工作，但是在第二次运行时，我得到了上述错误。如果有人可以仔细查看我的代码，那就太好了。

输出如下所示：

```
thread 0 started, pc_packet_receiver 
sock_fd[8]
sock_fd[8], fdmax[8]
sock_fd[9]
error: could not bind UDP socket, port2
: Address already in use 
```

如您所见，`printf`循环中的第一个被处理了两次，并且何时`bind`调用`PORT2`程序崩溃。

*   `sock_fd`是一个文件描述符数组
*   `sock_addr_port[1..4]`是四个不同的`struct sock_addr`
*   这些值`PORT1/PORT2/PORT3/PORT4`被定义在一个`enum [1..4]`
*   最后，我想将所有内容添加`sock_fd[i]`到 a`FD_SET`中以处理它们`select`

非常感谢您的帮助。

```
for(i = 0; i < 4; i++) {

    if((sock_fd[i] = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
        perror("error: could not open UDP socket\n");
        exit(EXIT_FAILURE);
    }

    printf("\tsock_fd[%d]\n", sock_fd[i]);

    switch (i+1) {
        case PORT1:
            bzero(&sock_addr_port1, sock_len_port1);
            sock_addr_port1.sin_family = AF_INET;
            sock_addr_port1.sin_port = htons(ETH_PORT1);
            sock_addr_port1.sin_addr.s_addr = htonl(INADDR_ANY);

            if(bind(sock_fd[i], (struct sockaddr *) &sock_addr_port1, sock_len_port1) < 0) {
                perror("error: could not bind UDP socket, port1\n");
                exit(EXIT_FAILURE);
            }

            break;
        case PORT2:
            bzero(&sock_addr_port2, sock_len_port2);
            sock_addr_port2.sin_family = AF_INET;
            sock_addr_port2.sin_port = htons(ETH_PORT2);
            sock_addr_port2.sin_addr.s_addr = htonl(INADDR_ANY);

            if(bind(sock_fd[i], (struct sockaddr *) &sock_addr_port2, sock_len_port2) < 0) {
                perror("error: could not bind UDP socket, port2\n");
                exit(EXIT_FAILURE);
            }

            break;
        case PORT3:
            bzero(&sock_addr_port3, sock_len_port3);
            sock_addr_port3.sin_family = AF_INET;
            sock_addr_port3.sin_port = htons(ETH_PORT3);
            sock_addr_port3.sin_addr.s_addr = htonl(INADDR_ANY);

            if(bind(sock_fd[i], (struct sockaddr *) &sock_addr_port3, sock_len_port3) < 0) {
                perror("error: could not bind UDP socket, port3\n");
                exit(EXIT_FAILURE);
            }

            break;
        case PORT4:
            bzero(&sock_addr_port4, sock_len_port4);
            sock_addr_port4.sin_family = AF_INET;
            sock_addr_port4.sin_port = htons(ETH_PORT4);
            sock_addr_port4.sin_addr.s_addr = htonl(INADDR_ANY);

            if(bind(sock_fd[i], (struct sockaddr *) &sock_addr_port4, sock_len_port4) < 0) {
                perror("error: could not bind UDP socket, port4\n");
                exit(EXIT_FAILURE);
            }

            break;
        default:
            break;
    }

    FD_SET(sock_fd[i], &read_fds);
    fdmax = sock_fd[i];
    printf("sock_fd[%d], fdmax[%d]\n", sock_fd[i], fdmax);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:18:00.317

`ETH_PORT2`现在正在运行另一个进程。`netstat -tan`当您在命令行上运行（`-tn`在 Windows 上）时，您应该能够看到这一点。

谷歌“哪个进程使用哪个端口”，看看你如何找到这个进程。

# javascript - 在 JQuery 中调用 Web 服务并将返回的 Json 分配给 JS 变量

> ID：10715897
> 
> 赞同：0
> 
> 时间：2012-05-23T08:08:54.607
> 
> 标签：javascript, jquery, json, web-services

这是我第一次尝试使用 JQuery、Json 和调用 Web 服务。所以请耐心等待。

我需要使用 JQuery 调用 webserivce，然后返回一个 Json 对象，然后我想将其保存到 javascript 变量中。我试着写一点东西。我只需要有人确认这确实是你的做法。在我实例化它并可能在我公司的服务器上搞砸一些东西之前。无论如何，这里是：

```
var returnedJson = $.ajax({
    type: 'Get',
    url: 'http://172.16.2.45:8080/Auth/login?n=dean&p=hello'
}); 
```

就是这样，使用 JQuery 调用 web 服务并将返回的 jsonObject 分配给 javascript 变量。谁能确认这是正确的？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:10:56.833

> 谁能确认这是正确的？

这将取决于您存储此脚本的域。由于浏览器内置的[相同来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您无法发送跨域 AJAX 请求。这意味着如果提供此脚本的页面未托管在`http://172.16.2.45:8080`此查询上，则将无法正常工作。确保您不违反此政策的最佳方法是使用相对 url：

```
$.ajax({
    type: 'Get',
    url: '/Auth/login?n=dean&p=hello'
}); 
```

同源策略限制有多种解决方法，但可能需要您修改您尝试使用的服务。如果您需要执行跨域 AJAX 调用，这是一个[很好的指南，其中涵盖了一些可能的解决方法。](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)

您的代码还有另一个问题。您已将`$.ajax`调用结果分配给某个`returnedJson`变量。但这不是 AJAX 的工作方式。AJAX 是异步的。这意味着该`$.ajax`函数将立即返回，同时请求继续在后台执行。一旦服务器完成处理请求并返回响应，结果将在`success`您需要订阅的回调中可用，并将自动调用：

```
$.ajax({
    type: 'Get',
    url: '/Auth/login?n=dean&p=hello',
    success: function(returnedJson) {
        // use returnedJson here
    }
}); 
```

关于您的代码的另一个评论：您似乎正在调用一个执行身份验证并发送用户名和密码的 Web 服务。为避免通过网络以明文形式传输此信息，强烈建议使用 SSL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:14:54.883

```
var returnedJson = $.ajax({
    type: 'Get',
    url: 'http://172.16.2.45:8080/Auth/login?n=dean&p=hello'
}); 
```

如果你这样做，这`returnedJson`将是一个 XHR 对象，而不是你所追求的 json。您想在成功回调中处理它。像这样的东西：

```
$.ajax({
    // GET is the default type, no need to specify it
    url: 'http://172.16.2.45:8080/Auth/login',
    data: { n: 'dean', p: 'hello' },
    success: function(data) {
         //data is the object that youre after, handle it here
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:15:05.857

[jQuery ajax 函数](http://api.jquery.com/jQuery.ajax)不返回数据，它返回一个jQuery [jqHXR 对象](http://api.jquery.com/jQuery.ajax/#jqXHR)。

您需要使用成功回调来处理数据，并且还需要处理与 Darin 提到的相同的源策略。

# jquery - 如何获得 datepicker 的值？有变化的事件吗？

> ID：10715902
> 
> 赞同：0
> 
> 时间：2012-05-23T08:09:25.013
> 
> 标签：jquery, jquery-ui

嗨，我对 Date-, Timepicker 有一个大问题。我需要在通过 AJAX 在后台提交的表单中使用它，问题是该值始终为空（空字符串）。我猜 Picker 在提交表单时设置了值，但在这种情况下它并没有真正提交。

1）我如何获得价值？

2）是否有任何改变的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:11:31.747

> 1）我如何获得价值？

[`getDate`方法](http://jqueryui.com/demos/datepicker/#method-getDate)来了 或者，当然，读取底层证券的价值`input`。

> 2）是否有任何改变的事件？

是的，有[`onSelect`活动](http://jqueryui.com/demos/datepicker/#event-onSelect)。

可能值得（重新）查看[文档](http://jqueryui.com/demos/datepicker/)...

* * *

令人惊讶的是，上面的深层链接似乎不太有效。对于`getDate`，请转到[文档](http://jqueryui.com/demos/datepicker/)并单击“方法”，然后单击“getDate”。对于`onSelect`，请转到[文档](http://jqueryui.com/demos/datepicker/)并单击“选项”，然后单击“onSelect”。

# android - 如何使用 GPS Tracker 获取手机的当前位置？

> ID：10715905
> 
> 赞同：0
> 
> 时间：2012-05-23T08:09:29.537
> 
> 标签：android, gps, location

我需要以编程方式使用 GPS 获取我的移动当前位置。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:16:36.973

[在官方android文档](http://developer.android.com/training/basics/location/currentlocation.html)的培训页面中有完整的解释如何获取当前位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:15:27.743

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, gpsListener);

LocationListener gpsListener = new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {
            //          

        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }; 
```

# file - 将二叉树存储在文件中

> ID：10715908
> 
> 赞同：2
> 
> 时间：2012-05-23T08:09:40.973
> 
> 标签：file, binary-tree, store

```
How to store a binary tree in a file & then read back.(Its not necessarily a BST)

               A
            /     \
          B        C
        /   \
       D    E 
```

为此，我们可以使用 (A(B(D),(E)),(C)) 之类的东西将其存储在文件中。但是如果树节点的数据中有 '(' , ',' 字符呢？那么如何存储它以便我们可以检索它并构造原始 BT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:14:29.210

答案仍然在你的问题中。您可以将字符存储在引号中，并且在阅读这些字符时，每当遇到引号时，请继续阅读直到找到下一个，然后删除引号。如果树中有引号，则可以使用其他特殊字符对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:18:43.670

如果您想将相当任意的数据结构存储为文本文件，请考虑使用[YAML](http://yaml.org)。大多数语言都有可用的编码器/解码器库。

如果这是为了家庭作业，或者您想知道如何自己实现它，请使用[转义字符](http://en.wikipedia.org/wiki/Escape_character)的常见想法。如果您不熟悉该概念，请参阅该链接中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T03:28:37.343

您必须知道可以使用哪些分隔符。例如，假设空格是分隔符，即节点数据不包含空格，则可以使用这种表示形式存储在文件中： ( A ( B ( D ) (E) ) ( C ) ) 可以替换任何其他合适的分隔符的空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-28T17:16:31.603

In case you'd have brackets in node - `(` or `)`, you'd have to [escape them](https://en.wikipedia.org/wiki/Escape_character), e.g. with backslash `\`. Of course you'd always have to check for backslash when you are parsing the data. This would slow down your parser a bit, so if speed would matter a lot, you should choose a separator character that is not valid node character at all.

# objective-c - 有没有办法区分按下的左右 Shift 键？

> ID：10715910
> 
> 赞同：8
> 
> 时间：2012-05-23T08:09:47.637
> 
> 标签：objective-c, macos, cocoa, nsevent

我可以识别用户何时使用以下代码按下任何 Shift 键：

```
-(void)flagsChanged:(NSEvent *)theEvent
{
    if ([theEvent modifierFlags] & NSShiftKeyMask)
        //. . .
} 
```

但是有什么方法可以区分按下的是右Shift键还是左Shift键？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T08:39:07.470

你可以这样做：

```
-(void)flagsChanged:(NSEvent *)theEvent {

    if ([theEvent modifierFlags] == 131330) {
        NSLog(@"Left shift pressed!");
    }

    if ([theEvent modifierFlags] == 131332) {
        NSLog(@"Right shift pressed!");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-24T13:38:16.483

在斯威夫特：

```
let isLeftShift = event.modifierFlags.rawValue & UInt(NX_DEVICELSHIFTKEYMASK) != 0
let isRightShift = event.modifierFlags.rawValue & UInt(NX_DEVICERSHIFTKEYMASK) != 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-04-19T10:48:05.610

```
static __INLINE void i_modifier_flags(
                        NSUInteger flags,
                        bool_t *rshift, bool_t *rctrl, bool_t *rcommand, bool_t *ralt,
                        bool_t *lshift, bool_t *lctrl, bool_t *lcommand, bool_t *lalt)
{
    *rshift = ((flags & 131332) == 131332) ? TRUE : FALSE;
    *rctrl = ((flags & 270592) == 270592) ? TRUE : FALSE;
    *rcommand = ((flags & 1048848) == 1048848) ? TRUE : FALSE;
    *ralt = ((flags & 524608) == 524608) ? TRUE : FALSE;
    *lshift = ((flags & 131330) == 131330) ? TRUE : FALSE;
    *lctrl = ((flags & 262401) == 262401) ? TRUE : FALSE;
    *lcommand = ((flags & 1048840) == 1048840) ? TRUE : FALSE;
    *lalt = ((flags & 524576) == 524576) ? TRUE : FALSE;
} 
```

# php - 如何显示或保存电子邮件而不是在本地主机上实际发送它们？

> ID：10715915
> 
> 赞同：1
> 
> 时间：2012-05-23T08:10:01.753
> 
> 标签：php, email, localhost, wamp

我正在开发一个 php 项目，其中所有电子邮件都通过 mail() 函数发送。准备和测试这些电子邮件是一个相当大的问题，因为 mail() 函数在本地主机上失败，我应该不断地重写我的代码以在发送之前打印出电子邮件，检查它并假设在服务器上它可以发送。

有没有办法以某种方式管理这种情况？如果有一种方法可以将消息保存在硬盘上或仅将它们发送到一个特定的电子邮件地址，而不是真正的收件人，我将非常高兴，无需或稍微修改代码。非常感谢一些有用的软件或建议。

谢谢！

PS 在本地主机上，我使用 WAMP 包作为网络服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T08:30:58.553

[http://www.toolheap.com/test-mail-server-tool/](http://www.toolheap.com/test-mail-server-tool/)

用于 Windows 的测试邮件服务器工具很棒！每次您在本地主机上发送电子邮件时，它只会在您最喜欢的电子邮件阅读器（即 Outlook、邮箱等）中弹出该电子邮件

我专门用它来测试我在 WAMP 上的所有网络应用程序！

无需更改服务器 - 只需下载并安装 - 然后发送电子邮件并查看它的运行情况。

哦 - 它是免费的！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T08:21:40.507

这是我找到解决此问题的解决方案。1\. 在 wamp 目录的某处创建**sendmail.php**文件，例如 d:\wamp\apps\sendmail.php。这是它的来源：

```
/* Path where emails will be stored */
define('DST', 'd:/wamp/tmp/sendmail/');
/* Extract the message from the stdin */
$message = '';
while(($line = fgets(STDIN)) !== false) {
    $message .= $line;
}
/* Save message to file */
file_put_contents(DST.date('Y-m-d_H-i-s_').md5($message).'.eml', $message); 
```

2\. 取消注释并将**php.ini中的****sendmail_path**参数编辑为：

 **```
sendmail_path = "D:\wamp\bin\php\php5.3.5\php.exe D:\wamp\apps\sendmail.php" 
```

通过 mail() 函数发送的所有消息都将被捕获并存储在指定的目录中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T08:13:22.223

安装[假邮件](http://www.lastcraft.com/fakemail.php)。它充当本地 SMTP 服务器并将所有邮件保存在一个文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T08:16:36.177

您可以包装`mail()`函数，例如：

```
function my_send_mail(/*...*/) {
   if (is_localhost()) {
      // just save the mail to text.
   } else {
      // call mail() and send mail
   }
} 
```

并使用此函数而不是直接使用 mail()。**

# r - Sweave，包括源 R-Function 文件

> ID：10715916
> 
> 赞同：4
> 
> 时间：2012-05-23T08:10:04.250
> 
> 标签：r, latex, sweave

我在文件 aR 中写入了一个 Rjob，它调用在文件 bR 中写入的函数，以及一个 snw 文件 c.snw。我通过“R CMD c.snw”调用 c​​.snw。

我正在寻找一种可能性，只通过 \SweaveInput{aR} 将 aR 包含到 c.snw 中，但是从 aR 调用的函数的代码也应该写在 tex 文件中。这意味着 Sweave 会跟踪包含的主 R 文件（此处为 aR）中的所有 source() 命令。

谁能建议如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T19:13:11.867

`knitr`我想在这种情况下，有了这个包裹，生活会更轻松。您可以读`a.R`为一个块`label-a`，并将其写入`c.Rnw`：

```
<<read-code>>=
read_chunk('a.R', labels = 'label-a')
@
<<label-a>>
@ 
```

当你用 编译`c.Rnw`时`library(knitr); knit('c.Rnw')`，`a.R`将包含在结果中（相当于将代码复制粘贴到块中`label-a`）。这在. [_](http://yihui.name/knitr/demo/externalization/)`knitr`

`\SweaveInput{}`不用于输入R源代码；您只能输入 Rnw 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:22:10.637

`source("b.R", echo = TRUE)`我敢肯定，如果你使用in ，你会得到你想要的`a.R`。

# html - 水平菜单 css 与所有时间可见的水平子菜单

> ID：10715917
> 
> 赞同：0
> 
> 时间：2012-05-23T08:10:06.803
> 
> 标签：html, css

我希望有人可以帮助我：

我想要一个带有水平子菜单的水平菜单 - 一直可见，子菜单水平显示，而不是垂直下拉。我创建了一个垂直下拉菜单 - 我无法将子菜单更改为持续水平显示的 bilve

参见[示例小提琴](http://jsfiddle.net/PhuBQ/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:21:59.317

看到这个小提琴：http: [//jsfiddle.net/PhuBQ/7/](http://jsfiddle.net/PhuBQ/7/)

子菜单始终可见并且水平显示。

# c# - vba中Web服务的参数是什么

> ID：10715918
> 
> 赞同：0
> 
> 时间：2012-05-23T08:10:06.980
> 
> 标签：c#, wcf, vba, parameters, endpoint

我想知道用 VBA 调用 WCFService 的不同参数是什么？我发现了这个：

```
Dim addr As String
addr = "service:mexAddress=""net.http://y000zvk:7878/_vti_bin/Services/RetrieveList.svc/mex"","
addr = addr + "address=""net.http://y000zvk:7878/_vti_bin/Services/RetrieveList.svc/mex"","
addr = addr + "contract=""ServiceReference1.RetrieveList"", contractNamespace=""http://test.com"","
addr = addr + "binding=""basicHttpBinding"",bindingNamespace=""http://tempuri.org/"""

Dim service1 As Object
Set service1 = GetObject(addr)

MsgBox service1.GetSiteTitle() 
```

但是我真的不知道在合同中要pu什么，绑定，绑定Namespace参数。我用 C# 创建了我的 WCF 服务，这是我的 app.config 端点：

```
<client>
        <endpoint address="http://y000zvk:7878/_vti_bin/Services/RetrieveList.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_RetrieveList"
            contract="ServiceReference1.RetrieveList" name="BasicHttpBinding_RetrieveList" />
</client> 
```

你有什么想法我可以调用我的网络服务吗？有关我处于调试模式时的信息，我收到此错误：

无法初始化 MetadataExchangeClient 实例，因为方案“net.http”没有可用的绑定。您可以在构造函数中提供绑定，或指定配置名称。参数名称：方​​案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:28:34.570

而不是 net.http -> 使用 http

我假设你已经编辑了一个 net.tcp:// 地址并且只替换了一半的方案？

# email - 如何在 Spock 中模拟特定领域的闭包

> ID：10715919
> 
> 赞同：5
> 
> 时间：2012-05-23T08:10:08.507
> 
> 标签：email, grails, multipart, spock

我想测试一个使用 grails 电子邮件插件发送电子邮件的 Grails 控制器。我不知道如何模拟`sendMail`闭包以使交互起作用。这是我最新版本的测试代码：

```
def 'controller should send a multipart email'() {
    given: 'a mocked mailService'
        controller.mailService = Mock(grails.plugin.mail.MailService)
        controller.mailService.sendMail(*_) >> Mock(org.springframework.mail.MailMessage)
    when:
        controller.sendNow()
    then:
        1* _.multipart(true)
} 
```

控制器代码看起来像您期望的那样，例如：

```
def mailService
def sendNow() {
    mailService.sendMail {
        multipart true
        to 'example@example.org'
        from 'me@here.com'
        subject 'a subject'
        body 'a body'
    }
} 
```

如果我运行这个测试，我会得到 0`multipart`次交互调用而不是 1 次。该`given:`块的第二行对我来说似乎很可疑，但如果我尝试模拟 a`Closure`而不是`org.springframework.mail.MailMessage`我的测试崩溃。我还应该提到控制器本身按预期工作（它等不及我先弄清楚单元测试）。

## 已编辑

啊哈，几个小时后重新看代码，我明白为什么上面的代码不起作用了；为了让我捕捉`multipart`和其他 DSL 调用，我必须模拟闭包本身，而不是 sendMail 方法（我不能这样做，因为闭包是在控制器本身内部定义的）。我可能能做的是检查方法的*参数*，`sendMail`看看所有必要的东西都传递给它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T04:24:13.183

我能够通过以下方式在 Spock 中实现这一点：

```
def messageBuilder
def bodyParams
def setup(){
    def mockMailService = new MockFor(MailService)
    mockMailService.ignore.sendMail{ callable ->
        messageBuilder = new MailMessageBuilder(null, new ConfigObject())
        messageBuilder.metaClass.body = { Map params ->
            bodyParams = params
        }
        callable.delegate = messageBuilder
        callable.resolveStrategy = Closure.DELEGATE_FIRST
        callable.call()
    }
    service.mailService = mockMailService.proxyInstance()
} 
```

还有一个示例测试：

```
def "sendEmailReceipt_passesCorrectParams"(){
    when:
        def receiptItems = [] << [item: "item1", price: 100]
        service.sendEmailReceipt(receiptItems, "some@email.com")

    then:
        messageBuilder.message.to[0] == "some@email.com"
        messageBuilder.message.subject == "My subject"
        bodyParams.view == "/mailtemplates/emailReceipt"
        bodyParams.model.receiptItems == data
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T08:31:49.440

您可以安装**greenMail**插件，并在**集成**测试中使用它：

从 greenmail 插件主页：

```
import com.icegreen.greenmail.util.*

class GreenmailTests extends GroovyTestCase {
    def mailService
    def greenMail    

    void testSendMail() {
        Map mail = [message:'hello world', from:'from@piragua.com', to:'to@piragua.com', subject:'subject']        

        mailService.sendMail {
            to mail.to
            from mail.from
            subject mail.subject
            body mail.message
        }        

        assertEquals(1, greenMail.getReceivedMessages().length)        
        def message = greenMail.getReceivedMessages()[0]        
        assertEquals(mail.message, GreenMailUtil.getBody(message))
        assertEquals(mail.from, GreenMailUtil.getAddressList(message.from))
        assertEquals(mail.subject, message.subject)
    }    

    void tearDown() {
        greenMail.deleteAllMessages()
    }
} 
```

我不是 Spock 专家，但您应该能够将此 junit 测试翻译成 spock 风格。

来源： http: [//grails.org/plugin/greenmail](http://grails.org/plugin/greenmail)

**更新，通过模拟 sendMail 替代**

这是对 Gregor 更新的回答。在我看来，你必须模拟 sendMail 方法，并且在这个方法内部有一个存根，它实现了闭包中使用的不同属性和方法。让我们称之为评估者。您将初始化闭包的委托给 evaluatro，并执行闭包。评估者应该有断言。你看我在这里使用了更多的junit概念。我不知道你能多么容易地将它转化为 spock 概念。您可能可以使用 spock 的行为检查工具。

```
class MailVerifier {
    void multiPart(boolean v){
        //...
    }

    void to(String address){
        //...
    }

    boolean isVerified() {
        //check internal state obtained by the appropriate invocation of the methods
    }
}

def sendMail(Closure mailDefintion) {
    def evaluator = createMailVerifier()
    mailDefinition.delegate = evaluator

    mailDefinition()

    assert evaluator.verified
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T09:13:09.807

在此处查看插件测试：[插件集成测试](https://github.com/gpc/grails-mail/blob/master/test/integration/grails/plugin/mail/MailServiceTests.groovy)和此处：[插件单元测试](https://github.com/gpc/grails-mail/blob/master/test/unit/grails/plugin/mail/MailMessageBuilderTests.groovy)。在我看来，你很难模拟所有 MailService 依赖项——构建邮件消息的工厂和构建器。只有当我的控制器的 sendNow 被调用时，我才会进行测试。

编辑

我找到[了这个答案](https://stackoverflow.com/a/4578200/411905)。根据它，您可以尝试：

```
def 'controller should send a multipart email'() {
    given: 'a mocked mailService'
        def mockMailService = new Object()
        def mockMessageBuilder = Mock(MessageBuilder)
        mockMailService.metaClass.sendMail = { callable ->
            callable.delegate = mockMessageBuilder
            callable.resolveStrategy = Closure.DELEGATE_FIRST
            callable.call()
        }
        controller.mailService = mockMailService
    when:
        controller.sendNow()
    then:
        1* mockMessageBuilder.multipart(true) 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T15:57:40.200

```
def mailService = Mock(MailService)
mockMailService.metaClass.sendMail = { ... your logic ... }
controller.mailService = mailService 
```

# php - 是否可以在 PHP 中重新定义运算符？

> ID：10715922
> 
> 赞同：1
> 
> 时间：2012-05-23T08:10:11.953
> 
> 标签：php, object, operators, operator-overloading

> **可能重复：**
> [php中的比较运算符重载](https://stackoverflow.com/questions/3111668/comparison-operator-overloading-in-php)

我可以在 PHP 的对象中重新定义诸如“<”、“<=”之类的逻辑运算符吗？我知道你可以用 Java、C# 或 C++ 做这个，但我不知道这是否可以用 PHP

我的想法是我有一堆对象，如果他的日期属性更小，我想告诉 PHP 一个对象比其他对象少。

我的主要替代方法是使用**usort**函数，但我想知道是否有更优雅的方法

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T08:11:09.703

不，PHP 不支持运算符重载。

# php - 卸载 php 扩展：反向 dl()

> ID：10715925
> 
> 赞同：4
> 
> 时间：2012-05-23T08:10:22.207
> 
> 标签：php, runtime, php-extension

对各位大师来说，PHP 中是否有任何隐藏的宝石可以在运行时卸载特定的扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:11:16.980

不，这是[**不可能的**](https://bugs.php.net/bug.php?id=53957)，而且很可能永远不会：

> **[2011-02-08 11:34 UTC] rasmus@php.net**
> 按请求卸载扩展从性能的角度来看根本不可行。而且您显然不能为下一个请求卸载并让它卸载，因为下一个请求可能是针对期望扩展存在的页面。

但是，`dl()`无论如何都不鼓励使用 - 在最近的版本中，它仅在 CLI 版本中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:27:44.160

从另一个角度来看：不可能从正在运行的 PHP 解释器中删除扩展，因为它可能以不可逆的方式修改了 PHP 解释器的状态。例如，许多扩展在加载时注册类；这些模块中没有代码可以在卸载时取消注册这些类。更糟糕的是，如果您的脚本已经在运行，它可能已经包含这些类的实例，如果在类定义消失的情况下进行操作，这会使解释器崩溃。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-29T11:35:49.817

至于解决方法，如果您使用 PHP CLI 或其内置服务器 ( `php -S`)，您始终可以指定`-n`/`--no-php-ini`来忽略您的`php.ini`，因此它将在运行时卸载所有扩展。对测试很有用。

# tfs - 从 TeamCity 运行 MSBuild 脚本失败

> ID：10715931
> 
> 赞同：0
> 
> 时间：2012-05-23T08:10:38.723
> 
> 标签：tfs, msbuild, teamcity

我正在将团队的 CI 从 TFS 迁移到 TeamCity。

作为我构建的一部分，我需要更新一些文件并将更改检查回 TFS。我创建了一个简单的 MSBuild 脚本，用于签出文件、更新它们并重新签入更改。

该脚本在我的机器上运行良好，但是当我从 TeamCity 运行它时，出现以下错误： *TF30063：您无权访问...*

有没有办法只运行 MSBuild 步骤和另一个用户？有没有办法授予 TeamCity 的代理连接到 TFS 所需的权限

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:31:52.600

您是否将 Team City Agent 帐户添加到 Team Foundation Server 中的团队项目安全组？

# asp.net - DB中的Oracle字符串大于UI

> ID：10715933
> 
> 赞同：1
> 
> 时间：2012-05-23T08:10:42.293
> 
> 标签：asp.net, database, string, oracle, encoding

有一个字符串，它来自文本字段，并且有 200 个字符的限制。oracle DB 表中的字段最大值为 200 个字符。应用程序崩溃，说它不能将 212 个字符写入最多 200 个字符的字段。问题显然出在数据库级别，就像在具有相同表和 CRUD 的其他数据库上一样，一切顺利。

怀疑这个问题可能在于编码差异，我做了一个

`SELECT * FROM NLS_DATABASE_PARAMETERS;`

在两个数据库上。结果是相同的，`NLS_CHARACTERSET`在两种情况下都显示 `AL32UTF8`. 可能是什么问题？

PS 这是 ASP.NET 应用程序，如果有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:40:43.433

如果 NLS_LENGTH_SEMANTICS 参数也相同，则列的定义可能不同：VARCHAR2(200 BYTE) vs VARCHAR2(200 CHAR)？

HTH。

亚历山德罗

# python-3.x - 在 PyGobject 中动态调整 GtkLayout 的大小

> ID：10715939
> 
> 赞同：2
> 
> 时间：2012-05-23T08:11:13.593
> 
> 标签：python-3.x, gtk, gtk3, pygobject

我正在寻找一种方法来自动“缩放以适应” GtkLayout 的内容，具体取决于它允许占用的空间量。

这是我的解决方案：

```
class MyLayout(Gtk.Layout):
    def __init__(self, document, **args):
        Gtk.Layout.__init__(self, **args)
        doc_width = 0
        doc_height = 0
        self.document = document

        # Determine the size of the document, I want to display
        for page in self.document.pages:
            doc_width = max(doc_width, page.width)
            doc_height += page.height
        self.aspect_ratio = doc_height / doc_width

        self.connect("draw", self.draw)

    def draw(self, widget, context):
        w = self.get_allocated_width()
        h = self.get_allocated_width()*self.aspect_ratio
        self.set_size(w, h) # sets the _content_ size, not the actual widget size
        print("draw") 
```

不幸的是，这会导致每次调整窗口大小时都会调用 draw() 两次，这很慢，一旦我实际上需要在布局中绘制一些东西。

这个问题的正确解决方案是什么？

最好的问候，
Fabian Henze

**解决方案：**我前段时间找到了解决方案。它[在我](https://github.com/flyser/cournal/blob/master/cournal/viewer/layout.py)[的](https://github.com/flyser/cournal/blob/master/cournal/viewer/pagewidget.py)项目中。我没有时间从中提取一个最小的例子。如果有人愿意这样做，我很乐意接受它作为答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:10:15.250

我的猜测是，这可能是父母多次重新绘制孩子并由层次结构对象触发的问题。

我扩展了您的示例以在绘制流程上显示更多详细信息。

```
from gi.repository import Gtk

class MyLayout(Gtk.Layout):
    def __init__(self, document, **args):
        Gtk.Layout.__init__(self, **args)
        doc_width = 0
        doc_height = 0
        self.document = document

        # Determine the size of the document, I want to display
        for page in self.document.pages:
            doc_width = max(doc_width, page.width)
            doc_height += page.height
        self.aspect_ratio = doc_height / doc_width

        self.connect("draw", self.draw)

    def do_realize(self):
        Gtk.Layout.do_realize(self)
        print ('do_realize')

    def do_show(self):
        Gtk.Layout.do_show(self)
        print ('do_show')

    def do_draw(self, widget):
        Gtk.Layout.do_draw(self, widget)
        print ('do_draw'), widget

    def draw(self, widget, context):
        print widget, context
        w = self.get_allocated_width()
        h = self.get_allocated_width() * self.aspect_ratio
        self.set_size(w, h) # sets the _content_ size, not the actual widget size
        print("draw")

class page(object):
    def __init__(self, width, height):
        self.width = width
        self.height = height

class document(object):
    def __init__(self):
        self.pages = [page(20, 10), page(40, 30)]

layout = MyLayout(document())
win = Gtk.Window()
layout.show()
win.add(layout)
win.show()
Gtk.main() 
```

对我来说，输出是：

```
do_show
do_realize
<MyLayout object at 0xb6b0ef54 (__main__+MyLayout at 0x898e950)> <cairo.Context object at 0xb73237f0>
draw
do_draw <cairo.Context object at 0xb73237f0>
<MyLayout object at 0xb6b0ef54 (__main__+MyLayout at 0x898e950)> <cairo.Context object at 0xb73237f0>
draw
do_draw <cairo.Context object at 0xb73237f0>
<MyLayout object at 0xb6b0ef54 (__main__+MyLayout at 0x898e950)> <cairo.Context object at 0xb73237f0>
draw
do_draw <cairo.Context object at 0xb73237f0>
<MyLayout object at 0xb6b0ef54 (__main__+MyLayout at 0x898e950)> <cairo.Context object at 0xb73237f0>
draw
do_draw <cairo.Context object at 0xb73237f0>
<MyLayout object at 0xb6b0ef54 (__main__+MyLayout at 0x898e950)> <cairo.Context object at 0xb73237f0>
draw
do_draw <cairo.Context object at 0xb73237f0> 
```

我可以看到绘图信号在 do_draw 内部小部件函数之前发出，并且被多次触发。

# sql - 我的查询需要很长时间才能运行，为什么？

> ID：10715943
> 
> 赞同：0
> 
> 时间：2012-05-23T08:11:19.050
> 
> 标签：sql

我有一个查询返回 ca 1800 条记录（不多），但运行时间很长（10 秒），但我不明白为什么？这是我需要很长时间的查询：

```
SELECT tb_KonzeptFunktionen.Konzept AS KonzeptID, tb_KonzeptFunktionen.Funktion,
    tb_KonzeptFunktionen.Version, 
    qryFunktionen_Übersicht.ID,
    qryFunktionen_Übersicht.Fehlerpfad_Kommentar AS Kommentar, 
    qryFunktionen_Übersicht.Fehlerpfadname, 
    qryFunktionen_Übersicht.Fehlerpfad_CDT, 
    qryFunktionen_Übersicht.Fehlerpfad_Kommentar, 
    qryFunktionen_Übersicht.symptombasiert, 
    qryFunktionen_Übersicht.Beschreibung_vorhanden, 
    qryFunktionen_Übersicht.Max_Pfad, 
    qryFunktionen_Übersicht.Max_Info, 
    qryFunktionen_Übersicht.Max_Status, 
    qryFunktionen_Übersicht.Max_Strategie, 
    qryFunktionen_Übersicht.Max_Prüfplan, 
    qryFunktionen_Übersicht.Min_Pfad, 
    qryFunktionen_Übersicht.Min_Info, 
    qryFunktionen_Übersicht.Min_Status, 
    qryFunktionen_Übersicht.Min_Strategie, 
    qryFunktionen_Übersicht.Min_Prüfplan, 
    qryFunktionen_Übersicht.Sig_Pfad, 
    qryFunktionen_Übersicht.Sig_Info, 
    qryFunktionen_Übersicht.Sig_Status,
    qryFunktionen_Übersicht.Sig_Strategie, 
    qryFunktionen_Übersicht.Sig_Prüfplan, 
    qryFunktionen_Übersicht.Plaus_Pfad, 
    qryFunktionen_Übersicht.Plaus_Info, 
    qryFunktionen_Übersicht.Plaus_Status, 
    qryFunktionen_Übersicht.Plaus_Strategie, 
    qryFunktionen_Übersicht.Plaus_Prüfplan, 
    qryFunktionen_Übersicht.Beschreibung_allgemein, 
    qryFunktionen_Übersicht.Funktionsname        
FROM tb_KonzeptFunktionen RIGHT JOIN qryFunktionen_Übersicht 
    ON tb_KonzeptFunktionen.Funktion = qryFunktionen_Übersicht.Funktionsname
WHERE (((tb_KonzeptFunktionen.Konzept)=[Formulare]![frm_Fahrzeug]![ID])) 
```

这是与上述查询相关的另一个查询：

```
SELECT tbFunktionen_Übersicht.*, 
    tbFunktionen.Funktionsname, 
    tbFunktionen.Funktionsbeschreibung, 
    tbFunktionen.diagnoserelevant, 
    tbFunktionen.ID AS FunktionsID
FROM tbFunktionen_Übersicht INNER JOIN tbFunktionen 
    ON tbFunktionen_Übersicht.Funktion = tbFunktionen.ID
ORDER BY tbFunktionen.Funktionsname, tbFunktionen_Übersicht.Fehlerpfadname; 
```

我为出现在**ORDER** oder **JOINS**中的字段添加了索引，但没有效果如果可能，请您帮帮我吗？

* * *

请参考这篇[文章](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/8193aa29-9835-48a9-ae1c-512e95b15304/#94c6803e-5a09-4bb2-be5f-3f3b85c2d0f4)，你可以找到答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:31:57.113

对我来说，PDO 改进了我的 sql 查询：[http ://www.php.net/manual/en/intro.pdo.php](http://www.php.net/manual/en/intro.pdo.php)

```
 //SQL-HANDLING*******************************************************//
//*********************************************************************//
//General Example-----------------
//$sqlHandling = new sqlHandling;
//$sqlHandling->connectSQL($sqlArray['host'], $sqlArray['user'],$sqlArray['pass'], $sqlArray['dbName']);
    //$tableNameArray = $sqlHandling->showTablesSQL($sqlHandling->dbh);
class sqlHandling{

    //PDO - Object/ callItOutside with: $sqlClass->dbh
    public $dbh = null;

//connectDataBase-------------------//
    //-----------------
    //example: $dbh = connectSQL('localhost','admin','1admin','test');
    //start transaction
    //$dbh->beginTransaction();
    //-----------------
    //end transaction
    //$dbh->commit();
    //$dbh = null;
    //-----------------
    //1:SQL-Location
    function connectSQL($host, $user, $pass, $dbname){
        //endPrevTransaction
        if($this->dbh != null){
            $this->dbh->commit();
            $this->dbh = null;
        }
        //establish connection
        try{
            $this->dbh = new PDO('mysql:host='.$host.';dbname='.$dbname, $user, $pass);
            $this->dbh->exec('SET CHARACTER SET utf8');
            return $this->dbh;
        }catch(PDOException $e){
            print 'Error!: ' . $e->getMessage() . '<br/>';
            die();
            return FALSE;
        }
    }
//createColumnSQL-------------------//
    //example: createColumnSQL($dbh, 'backupexample', array('SomeName1 VARCHAR(30)', 'SomeName2 VARCHAR(30)', 'SomeName3 VARCHAR(30)', 'SomeName4 VARCHAR(30)'));
    //1:PDO connection/2:table/3:array holding columns
    function createColumnSQL($dbh, $table, $columns){
        //cicle through each array
        foreach($columns as $tempColumn){
            //set query
            $query = 'ALTER TABLE `'.$table.'` ADD COLUMN '.$tempColumn;
            //send the query
            $stmt = $dbh->prepare($query);
            //send the data
            $stmt->execute();
        }
    }
} 
```

这只是我的 PDO sqlHandling 类的一个工作示例。我知道retrieveAllValues 不会进一步帮助您，但您可以采用此代码供您使用。

制造商

# windows-phone-7 - 在 webRequest 回调中知道发送者

> ID：10715952
> 
> 赞同：0
> 
> 时间：2012-05-23T08:11:39.227
> 
> 标签：windows-phone-7

大家好，

我有许多使用相同导航事件处理程序的 webView，我插入了它们正在导航的 uri，执行 httpwebrequest（添加 cookie），然后在 webview 中设置内容并使用 javascript 添加 css。

但有时我失去了对发件人的引用，我不太明白如何解决这个问题，我不想做 4 导航事件处理程序..

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
        {

            wb1.Navigate(new Uri(site + notif, UriKind.Absolute));
            wb2.Navigate(new Uri(site + comptes, UriKind.Absolute));
            wb3.Navigate(new Uri(site + virements, UriKind.Absolute));
            wb4.Navigate(new Uri(site + autres, UriKind.Absolute));

            wb1.Navigating += new EventHandler<NavigatingEventArgs>(wb_Navigating);
            wb2.Navigating += new EventHandler<NavigatingEventArgs>(wb_Navigating);
            wb3.Navigating += new EventHandler<NavigatingEventArgs>(wb_Navigating);
            wb4.Navigating += new EventHandler<NavigatingEventArgs>(wb_Navigating);
        }

        void wb_Navigating(object sender, NavigatingEventArgs e)
        {
            Uri uri = e.Uri;
            e.Cancel = true;

            cookieContainer = new CookieContainer();
            //Add cookies here

            HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(uri);
            req.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.0.3705;)";
            req.Method = "POST";
            req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
            req.CookieContainer = cookieContainer;
            req.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), req);
        }

        private void ReadWebRequestCallback(IAsyncResult callbackResult)
        {
            HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
            HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

                using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
                {
                    string results = httpwebStreamReader.ReadToEnd();

                    Deployment.Current.Dispatcher.BeginInvoke(() => OnUiThreadResponse(results));

                }
                myResponse.Close();
        }

        private void OnUiThreadResponse(string results)
        {
            //HERE i need to know which WebBrowser fired the navigating event
            wbi.NavigateToString(results);
            //Add css with JS
            wbi.InvokeScript("");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:27:35.753

发出请求时，您可以将 传递`sender`给回调，或者您可以内联回调并通过闭包访问发送者。

# ruby-on-rails-3 - 谷歌地图还可以提取我的地址中的哪些其他部分，例如城市、州和国家？

> ID：10715961
> 
> 赞同：0
> 
> 时间：2012-05-23T08:12:19.330
> 
> 标签：ruby-on-rails-3, google-maps, google-maps-api-3

我正在使用这个名为[Geocoder](https://github.com/alexreisner/geocoder)的 gem ，它是 Ruby on rails 的一部分。您可以选择要使用的地理编码服务，我选择了谷歌地图。现在它在**高级地理编码**部分中指出，如果我熟悉地理编码服务，我实际上可以为我的数据库中的列解析并获取更多数据，例如城市、州、国家等。

我的问题是，我在哪里可以看到 Google 可以为我解析的所有内容的列表？我想在我的数据库中添加更多信息，例如省、州等。我在哪里看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:21:53.180

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

查看此页面上的一些示例 JSON/XML 输出。如您所见，您可以获得街道地址、邮政编码、地区、城市、国家、地区和任何其他可用信息。

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "1600",
               "short_name" : "1600",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "Amphitheatre Pkwy",
               "short_name" : "Amphitheatre Pkwy",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Mountain View",
               "short_name" : "Mountain View",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Santa Clara",
               "short_name" : "Santa Clara",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "California",
               "short_name" : "CA",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "United States",
               "short_name" : "US",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "94043",
               "short_name" : "94043",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "1600 Amphitheatre Pkwy, Mountain View, CA 94043, USA",
         "geometry" : {
            "location" : {
               "lat" : 37.42291810,
               "lng" : -122.08542120
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 37.42426708029149,
                  "lng" : -122.0840722197085
               },
               "southwest" : {
                  "lat" : 37.42156911970850,
                  "lng" : -122.0867701802915
               }
            }
         },
         "types" : [ "street_address" ]
      }
   ],
   "status" : "OK"
} 
```

# c# - 如何使用 .NET API 在 Google Drive 中创建文件夹？

> ID：10715962
> 
> 赞同：7
> 
> 时间：2012-05-23T08:12:20.037
> 
> 标签：c#, .net, google-drive-api

我正在使用 C#、Google .NET API。如何在 Google Drive 根目录中创建文件夹？任何代码都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T13:00:08.833

可以将文件夹视为具有特殊 MIME 类型的文件：“application/vnd.google-apps.folder”。

以下 C# 代码应该是您需要的：

```
File body = new File();
body.Title = "document title";
body.Description = "document description";
body.MimeType = "application/vnd.google-apps.folder";

// service is an authorized Drive API service instance
File file = service.Files.Insert(body).Fetch(); 
```

有关更多详细信息，请查看文档：[https ://developers.google.com/drive/folder](https://developers.google.com/drive/folder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T16:48:55.210

```
//First you will need a DriveService:

ClientSecrets cs = new ClientSecrets();
cs.ClientId = yourClientId;
cs.ClientSecret = yourClientSecret;

credential = GoogleWebAuthorizationBroker.AuthorizeAsync(
                        cs,
                        new[] { DriveService.Scope.Drive },
                        "user",
                        CancellationToken.None,
                        null
                    ).Result;

DriveService service = new DriveService(new BaseClientService.Initializer()
                {
                    HttpClientInitializer = credential,
                    ApplicationName = "TheAppName"
                });

//then you can upload the file:

File body = new File();
body.Title = "document title";
body.Description = "document description";
body.MimeType = "application/vnd.google-apps.folder";

File folder = service.Files.Insert(body).Execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-25T06:50:26.837

在 Google Drive API 中，文件夹只不过是具有 Mime 类型的文件：`application/vnd.google-apps.folder`

在 API v2 中，您可以使用：

```
 // DriveService _service: Valid, authenticated Drive service
    // string_ title: Title of the folder
    // string _description: Description of the folder
    // _parent: ID of the parent directory to which the folder should be created

public static File createDirectory(DriveService _service, string _title, string _description, string _parent)
{
    File NewDirectory = null;

    File body = new File();
    body.Title = _title;
    body.Description = _description;
    body.MimeType = "application/vnd.google-apps.folder";
    body.Parents = new List<ParentReference>() { new ParentReference() { Id = _parent } };
    try
    {
        FilesResource.InsertRequest request = _service.Files.Insert(body);
        NewDirectory = request.Execute();
    }
    catch(Exception e)
    {
        MessageBox.Show(e.Message, "Error Occured");
    }
    return NewDirectory;
} 
```

要在根目录创建文件夹，您可以`"root"`作为父 ID 传递。

# iphone - AudioQueueStart 缓慢

> ID：10715963
> 
> 赞同：0
> 
> 时间：2012-05-23T08:12:21.157
> 
> 标签：iphone, audio-recording

我现在在开发一个语音应用，需要频繁启动录音设备，但是每次AudioQueueStart都需要0.3 s，我看到apple的sample：speakhere，它的启动录音也需要这么长的时间。有没有办法缩短每次开始录制的时间？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:14:01.110

这里问了一个类似的问题：[Delay when using AudioQueueStart()](https://stackoverflow.com/questions/1066627/delay-when-using-audioqueuestart)

似乎没有办法解决它，而不是使用另一个库。[详细信息在这篇博](https://stackoverflow.com/questions/1066627/delay-when-using-audioqueuestart)文的第一部分。

# python - 通过一次追加一行来创建 Pandas 数据框

> ID：10715965
> 
> 赞同：1220
> 
> 时间：2012-05-23T08:12:31.843
> 
> 标签：python, pandas, dataframe, append

我知道 Pandas 旨在加载一个完全填充的`DataFrame`，但我需要**创建一个空的 DataFrame 然后逐一添加行**。做这个的最好方式是什么？

我成功地创建了一个空的DataFrame：

```
res = DataFrame(columns=('lib', 'qty1', 'qty2')) 
```

然后我可以添加一个新行并用以下内容填充一个字段：

```
res = res.set_value(len(res), 'qty1', 10.0) 
```

它有效，但看起来很奇怪：-/（添加字符串值失败。）

如何向我的 DataFrame 添加新行（具有不同的列类型）？

* * *

## 回答 #1

> 赞同：820
> 
> 时间：2014-07-22T13:10:25.313

您可以使用`df.loc[i]`，其中带有索引的`i`行将是您在数据框中指定的行。

```
>>> import pandas as pd
>>> from numpy.random import randint

>>> df = pd.DataFrame(columns=['lib', 'qty1', 'qty2'])
>>> for i in range(5):
>>>     df.loc[i] = ['name' + str(i)] + list(randint(10, size=2))

>>> df
     lib qty1 qty2
0  name0    3    3
1  name1    2    4
2  name2    2    8
3  name3    2    1
4  name4    9    6 
```

* * *

## 回答 #2

> 赞同：687
> 
> 时间：2013-07-05T20:38:13.783

如果您可以预先获取数据框的所有数据，则有一种比附加到数据框更快的方法：

1.  创建一个字典列表，其中每个字典对应一个输入数据行。
2.  从此列表创建一个数据框。

我有一个类似的任务，逐行附加到数据帧需要 30 分钟，并从几秒钟内完成的字典列表创建一个数据帧。

```
rows_list = []
for row in input_rows:

        dict1 = {}
        # get input row in dictionary format
        # key = col_name
        dict1.update(blah..) 

        rows_list.append(dict1)

df = pd.DataFrame(rows_list) 
```

* * *

## 回答 #3

> 赞同：348
> 
> 时间：2017-12-26T14:02:37.133

在向数据框添加大量行的情况下，我对**性能**感兴趣。所以我尝试了四种最流行的方法并检查了它们的速度。

## **表现**

1.  使用 .append （[NPE 的回答](https://stackoverflow.com/a/10716007/4960953)）
2.  使用 .loc（[弗雷德的回答](https://stackoverflow.com/a/24888331/4960953)）
3.  使用 .loc 进行预分配（[FooBar 的回答](https://stackoverflow.com/a/24913075/4960953)）
4.  最后使用 dict 并创建 DataFrame（[ShikharDua 的回答](https://stackoverflow.com/a/17496530/4960953)）

**运行时结果（以秒为单位）：**

| 方法 | 1000 行 | 5000 行 | 10 000 行 |
| --- | --- | --- | --- |
| 。附加 | 0.69 | 3.39 | 6.78 |
| .loc 没有 prealloc | 0.74 | 3.90 | 8.35 |
| .loc 与 prealloc | 0.24 | 2.58 | 8.70 |
| 听写 | 0.012 | 0.046 | 0.084 |

所以我自己通过字典使用加法。

* * *

**代码：**

```
import pandas as pd
import numpy as np
import time

del df1, df2, df3, df4
numOfRows = 1000
# append
startTime = time.perf_counter()
df1 = pd.DataFrame(np.random.randint(100, size=(5,5)), columns=['A', 'B', 'C', 'D', 'E'])
for i in range( 1,numOfRows-4):
    df1 = df1.append( dict( (a,np.random.randint(100)) for a in ['A','B','C','D','E']), ignore_index=True)
print('Elapsed time: {:6.3f} seconds for {:d} rows'.format(time.perf_counter() - startTime, numOfRows))
print(df1.shape)

# .loc w/o prealloc
startTime = time.perf_counter()
df2 = pd.DataFrame(np.random.randint(100, size=(5,5)), columns=['A', 'B', 'C', 'D', 'E'])
for i in range( 1,numOfRows):
    df2.loc[i]  = np.random.randint(100, size=(1,5))[0]
print('Elapsed time: {:6.3f} seconds for {:d} rows'.format(time.perf_counter() - startTime, numOfRows))
print(df2.shape)

# .loc with prealloc
df3 = pd.DataFrame(index=np.arange(0, numOfRows), columns=['A', 'B', 'C', 'D', 'E'] )
startTime = time.perf_counter()
for i in range( 1,numOfRows):
    df3.loc[i]  = np.random.randint(100, size=(1,5))[0]
print('Elapsed time: {:6.3f} seconds for {:d} rows'.format(time.perf_counter() - startTime, numOfRows))
print(df3.shape)

# dict
startTime = time.perf_counter()
row_list = []
for i in range (0,5):
    row_list.append(dict( (a,np.random.randint(100)) for a in ['A','B','C','D','E']))
for i in range( 1,numOfRows-4):
    dict1 = dict( (a,np.random.randint(100)) for a in ['A','B','C','D','E'])
    row_list.append(dict1)

df4 = pd.DataFrame(row_list, columns=['A','B','C','D','E'])
print('Elapsed time: {:6.3f} seconds for {:d} rows'.format(time.perf_counter() - startTime, numOfRows))
print(df4.shape) 
```

PS：我相信我的实现并不完美，也许可以做一些优化。

* * *

## 回答 #4

> 赞同：327
> 
> 时间：2012-05-23T08:14:43.650

您可以使用`pandas.concat()`或`DataFrame.append()`。有关详细信息和示例，请参阅[合并、连接和连接](http://pandas.pydata.org/pandas-docs/stable/merging.html)。

* * *

## 回答 #5

> 赞同：208
> 
> 时间：2020-07-04T22:15:04.030

# NEVER grow a DataFrame!

Yes, people have already explained that you should NEVER grow a DataFrame, and that you should append your data to a list and convert it to a DataFrame once at the end. But do you understand why?

Here are the most important reasons, taken from my post [here](https://stackoverflow.com/a/56746204/4909087).

1.  It is always cheaper/faster to append to a list and create a DataFrame in one go.
2.  Lists take up less memory and are a much lighter data structure to work with, append, and remove.
3.  `dtypes` are automatically inferred for your data. On the flip side, creating an empty frame of NaNs will automatically make them `object`, which is bad.
4.  An index is automatically created for you, instead of you having to take care to assign the correct index to the row you are appending.

## This is The Right Way™ to accumulate your data

```
data = []
for a, b, c in some_function_that_yields_data():
    data.append([a, b, c])

df = pd.DataFrame(data, columns=['A', 'B', 'C']) 
```

## These options are horrible

1.  **`append` or `concat` inside a loop**

    `append` and `concat` aren't inherently bad **in isolation**. The problem starts when you iteratively call them inside a loop - this results in quadratic memory usage.

    ```
    # Creates empty DataFrame and appends
    df = pd.DataFrame(columns=['A', 'B', 'C'])
    for a, b, c in some_function_that_yields_data():
        df = df.append({'A': i, 'B': b, 'C': c}, ignore_index=True)  
        # This is equally bad:
        # df = pd.concat(
        #       [df, pd.Series({'A': i, 'B': b, 'C': c})], 
        #       ignore_index=True) 
    ```

2.  **Empty DataFrame of NaNs**

    Never create a DataFrame of NaNs as the columns are initialized with `object` (slow, un-vectorizable dtype).

    ```
    # Creates DataFrame of NaNs and overwrites values.
    df = pd.DataFrame(columns=['A', 'B', 'C'], index=range(5))
    for a, b, c in some_function_that_yields_data():
        df.loc[len(df)] = [a, b, c] 
    ```

## The Proof is in the Pudding

Timing these methods is the fastest way to see just how much they differ in terms of their memory and utility.

[![enter image description here](../Images/0f59961086a724c74f86b91d7e829a1c.png)](https://i.stack.imgur.com/sGIV6.png)

[Benchmarking code for reference.](https://gist.github.com/Coldsp33d/ea080f580ab3a3b75c2f40c201d50164)

* * *

It's posts like this that remind me why I'm a part of this community. People understand the importance of teaching folks getting the right answer with the *right* code, not the right answer with *wrong* code. Now you might argue that it is not an issue to use `loc` or `append` if you're only adding a single row to your DataFrame. However, **people often look to this question to add more than just *one* row** - often the requirement is to iteratively add a row inside a loop using data that comes from a function (see [related question](https://stackoverflow.com/q/13784192/4909087)). In that case it is important to understand that iteratively growing a DataFrame is not a good idea.

* * *

## 回答 #6

> 赞同：124
> 
> 时间：2014-07-23T14:21:45.483

如果您事先知道条目数，则应通过提供索引来预先分配空间（以不同答案中的数据示例为例）：

```
import pandas as pd
import numpy as np
# we know we're gonna have 5 rows of data
numberOfRows = 5
# create dataframe
df = pd.DataFrame(index=np.arange(0, numberOfRows), columns=('lib', 'qty1', 'qty2') )

# now fill it up row by row
for x in np.arange(0, numberOfRows):
    #loc or iloc both work here since the index is natural numbers
    df.loc[x] = [np.random.randint(-1,1) for n in range(3)]
In[23]: df
Out[23]: 
   lib  qty1  qty2
0   -1    -1    -1
1    0     0     0
2   -1     0    -1
3    0    -1     0
4   -1     0     0 
```

**速度比较**

```
In[30]: %timeit tryThis() # function wrapper for this answer
In[31]: %timeit tryOther() # function wrapper without index (see, for example, @fred)
1000 loops, best of 3: 1.23 ms per loop
100 loops, best of 3: 2.31 ms per loop 
```

并且 - 从评论中 - 大小为 6000，速度差异变得更大：

> 增加数组的大小（12）和行数（500）使速度差异更加显着：313ms vs 2.29s

* * *

## 回答 #7

> 赞同：92
> 
> 时间：2015-06-24T21:06:31.733

```
mycolumns = ['A', 'B']
df = pd.DataFrame(columns=mycolumns)
rows = [[1,2],[3,4],[5,6]]
for row in rows:
    df.loc[len(df)] = row 
```

* * *

## 回答 #8

> 赞同：79
> 
> 时间：2016-02-23T16:43:07.890

`ignore_index`您可以使用该选项将单行附加为字典。

```
>>> f = pandas.DataFrame(data = {'Animal':['cow','horse'], 'Color':['blue', 'red']})
>>> f
  Animal Color
0    cow  blue
1  horse   red
>>> f.append({'Animal':'mouse', 'Color':'black'}, ignore_index=True)
  Animal  Color
0    cow   blue
1  horse    red
2  mouse  black 
```

* * *

## 回答 #9

> 赞同：76
> 
> 时间：2014-04-30T17:31:04.917

为了有效地追加，请参阅*[如何向 pandas 数据框添加额外的行](https://stackoverflow.com/questions/19365513/how-to-add-an-extra-row-to-a-pandas-dataframe/19368360#19368360)*和[*设置放大*](http://pandas-docs.github.io/pandas-docs-travis/indexing.html#setting-with-enlargement)。

`loc/ix`通过**不存在的**键索引数据添加行。例如：

```
In [1]: se = pd.Series([1,2,3])

In [2]: se
Out[2]:
0    1
1    2
2    3
dtype: int64

In [3]: se[5] = 5.

In [4]: se
Out[4]:
0    1.0
1    2.0
2    3.0
5    5.0
dtype: float64 
```

或者：

```
In [1]: dfi = pd.DataFrame(np.arange(6).reshape(3,2),
   .....:                 columns=['A','B'])
   .....:

In [2]: dfi
Out[2]:
   A  B
0  0  1
1  2  3
2  4  5

In [3]: dfi.loc[:,'C'] = dfi.loc[:,'A']

In [4]: dfi
Out[4]:
   A  B  C
0  0  1  0
1  2  3  2
2  4  5  4
In [5]: dfi.loc[3] = 5

In [6]: dfi
Out[6]:
   A  B  C
0  0  1  0
1  2  3  2
2  4  5  4
3  5  5  5 
```

* * *

## 回答 #10

> 赞同：48
> 
> 时间：2017-08-06T05:06:38.667

为了 Pythonic 方式：

```
res = pd.DataFrame(columns=('lib', 'qty1', 'qty2'))
res = res.append([{'qty1':10.0}], ignore_index=True)
print(res.head())

   lib  qty1  qty2
0  NaN  10.0   NaN 
```

* * *

## 回答 #11

> 赞同：34
> 
> 时间：2017-10-13T12:16:23.673

您还可以建立列表列表并将其转换为数据框 -

```
import pandas as pd

columns = ['i','double','square']
rows = []

for i in range(6):
    row = [i, i*2, i*i]
    rows.append(row)

df = pd.DataFrame(rows, columns=columns) 
```

给予

```
    我双正方形
0 0 0 0
1 1 2 1
2 2 4 4
3 3 6 9
4 4 8 16
5 5 10 25

```

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2018-08-30T03:19:43.577

我想出了一个简单而好方法：

```
>>> df
     A  B  C
one  1  2  3
>>> df.loc["two"] = [4,5,6]
>>> df
     A  B  C
one  1  2  3
two  4  5  6 
```

请注意评论中提到的性能警告。

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2016-07-13T09:49:18.073

这不是对 OP 问题的答案，而是一个玩具示例来说明[ShikharDua 的答案](https://stackoverflow.com/questions/10715965/create-a-pandas-dataframe-by-appending-one-row-at-a-time/17496530#17496530)，我发现它非常有用。

虽然这个片段是微不足道的，但在实际数据中，我有 1,000 行和许多列，我希望能够按不同的列进行分组，然后对多个目标列执行下面的统计信息。因此，有一种可靠的方法来一次构建一行数据框是非常方便的。谢谢ShikharDua！

```
import pandas as pd

BaseData = pd.DataFrame({ 'Customer' : ['Acme','Mega','Acme','Acme','Mega','Acme'],
                          'Territory'  : ['West','East','South','West','East','South'],
                          'Product'  : ['Econ','Luxe','Econ','Std','Std','Econ']})
BaseData

columns = ['Customer','Num Unique Products', 'List Unique Products']

rows_list=[]
for name, group in BaseData.groupby('Customer'):
    RecordtoAdd={} #initialise an empty dict
    RecordtoAdd.update({'Customer' : name}) #
    RecordtoAdd.update({'Num Unique Products' : len(pd.unique(group['Product']))})
    RecordtoAdd.update({'List Unique Products' : pd.unique(group['Product'])})

    rows_list.append(RecordtoAdd)

AnalysedData = pd.DataFrame(rows_list)

print('Base Data : \n',BaseData,'\n\n Analysed Data : \n',AnalysedData) 
```

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2021-03-06T13:53:27.903

If you always want to add a new row at the end, use this:

```
df.loc[len(df)] = ['name5', 9, 0] 
```

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2019-10-21T07:26:08.263

You can use a generator object to create a Dataframe, which will be more memory efficient over the list.

```
num = 10

# Generator function to generate generator object
def numgen_func(num):
    for i in range(num):
        yield ('name_{}'.format(i), (i*i), (i*i*i))

# Generator expression to generate generator object (Only once data get populated, can not be re used)
numgen_expression = (('name_{}'.format(i), (i*i), (i*i*i)) for i in range(num) )

df = pd.DataFrame(data=numgen_func(num), columns=('lib', 'qty1', 'qty2')) 
```

To add raw to existing DataFrame you can use append method.

```
df = df.append([{ 'lib': "name_20", 'qty1': 20, 'qty2': 400  }]) 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2016-07-18T09:54:03.790

创建一个**新记录（数据框）**并添加到**old_data_frame**。

传递**值**列表和相应的**列**名以创建**new_record** (data_frame)：

```
new_record = pd.DataFrame([[0, 'abcd', 0, 1, 123]], columns=['a', 'b', 'c', 'd', 'e'])

old_data_frame = pd.concat([old_data_frame, new_record]) 
```

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2018-09-05T19:30:54.273

这是在 Pandas 中添加/追加一行的方法`DataFrame`：

```
def add_row(df, row):
    df.loc[-1] = row
    df.index = df.index + 1
    return df.sort_index()

add_row(df, [1,2,3]) 
```

它可用于在空的或填充的 Pandas DataFrame 中插入/追加一行。

* * *

## 回答 #18

> 赞同：8
> 
> 时间：2019-12-30T01:35:57.360

Instead of a list of dictionaries as in [ShikharDua's answer](https://stackoverflow.com/questions/10715965/create-a-pandas-dataframe-by-appending-one-row-at-a-time/17496530#17496530), we can also represent our table as a **dictionary of lists**, where each list stores one column in row-order, given we know our columns beforehand. **At the end we construct our DataFrame once.**

For *c* columns and *n* rows, this uses one dictionary and *c* lists, versus one list and *n* dictionaries. The list-of-dictionaries method has each dictionary storing all keys and requires creating a new dictionary for every row. Here we only append to lists, which is constant time and theoretically very fast.

```
# Current data
data = {"Animal":["cow", "horse"], "Color":["blue", "red"]}

# Adding a new row (be careful to ensure every column gets another value)
data["Animal"].append("mouse")
data["Color"].append("black")

# At the end, construct our DataFrame
df = pd.DataFrame(data)
#   Animal  Color
# 0    cow   blue
# 1  horse    red
# 2  mouse  black 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2020-03-26T14:09:19.123

If you want to add a row at the end, append it as a list:

```
valuestoappend = [va1, val2, val3]
res = res.append(pd.Series(valuestoappend, index = ['lib', 'qty1', 'qty2']), ignore_index = True) 
```

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2016-11-11T18:18:09.947

另一种方法（可能不是很好）：

```
# add a row
def add_row(df, row):
    colnames = list(df.columns)
    ncol = len(colnames)
    assert ncol == len(row), "Length of row must be the same as width of DataFrame: %s" % row
    return df.append(pd.DataFrame([row], columns=colnames)) 
```

您还可以像这样增强 DataFrame 类：

```
import pandas as pd
def add_row(self, row):
    self.loc[len(self.index)] = row
pd.DataFrame.add_row = add_row 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2020-05-01T14:39:16.887

All you need is `loc[df.shape[0]]` or `loc[len(df)]`

* * *

```
# Assuming your df has 4 columns (str, int, str, bool)
df.loc[df.shape[0]] = ['col1Value', 100, 'col3Value', False] 
```

or

```
df.loc[len(df)] = ['col1Value', 100, 'col3Value', False] 
```

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2020-06-13T15:09:31.163

```
initial_data = {'lib': np.array([1,2,3,4]), 'qty1': [1,2,3,4], 'qty2': [1,2,3,4]}

df = pd.DataFrame(initial_data)

df

lib    qty1    qty2
0    1    1    1
1    2    2    2
2    3    3    3
3    4    4    4

val_1 = [10]
val_2 = [14]
val_3 = [20]

df.append(pd.DataFrame({'lib': val_1, 'qty1': val_2, 'qty2': val_3}))

lib    qty1    qty2
0    1    1    1
1    2    2    2
2    3    3    3
3    4    4    4
0    10    14    20 
```

You can use a *for* loop to iterate through values or can add arrays of values.

```
val_1 = [10, 11, 12, 13]
val_2 = [14, 15, 16, 17]
val_3 = [20, 21, 22, 43]

df.append(pd.DataFrame({'lib': val_1, 'qty1': val_2, 'qty2': val_3}))

lib    qty1    qty2
0    1    1    1
1    2    2    2
2    3    3    3
3    4    4    4
0    10    14    20
1    11    15    21
2    12    16    22
3    13    17    43 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-08-25T15:47:04.097

让它变得简单。通过将列表作为输入，该列表将作为一行附加到数据框中：

```
import pandas as pd
res = pd.DataFrame(columns=('lib', 'qty1', 'qty2'))
for i in range(5):
    res_list = list(map(int, input().split()))
    res = res.append(pd.Series(res_list, index=['lib', 'qty1', 'qty2']), ignore_index=True) 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2020-04-30T14:07:19.370

You can concatenate two DataFrames for this. I basically came across this problem to add a new row to an existing DataFrame with a character index (not numeric).

So, I input the data for a new row in a duct() and index in a list.

```
new_dict = {put input for new row here}
new_list = [put your index here]

new_df = pd.DataFrame(data=new_dict, index=new_list)

df = pd.concat([existing_df, new_df]) 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-08-22T12:39:32.367

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-10-11T18:46:55.567

If all data in your Dataframe has the same dtype you might use a NumPy array. You can write rows directly into the predefined array and convert it to a dataframe at the end. It seems to be even faster than converting a list of dicts.

```
import pandas as pd
import numpy as np
from string import ascii_uppercase

startTime = time.perf_counter()
numcols, numrows = 5, 10000
npdf = np.ones((numrows, numcols))
for row in range(numrows):
    npdf[row, 0:] = np.random.randint(0, 100, (1, numcols))
df5 = pd.DataFrame(npdf, columns=list(ascii_uppercase[:numcols]))
print('Elapsed time: {:6.3f} seconds for {:d} rows'.format(time.perf_counter() - startTime, numOfRows))
print(df5.shape) 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-12-21T09:57:20.403

If you have a data frame `df` and want to add a **list** `new_list` as a new row to `df`, you can simply do:

```
df.loc[len(df)] = new_list 
```

If you want to add a new **data frame** `new_df` under data frame `df`, then you can use:

```
df.append(new_df) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-02-19T06:35:18.530

pandas.DataFrame.append

DataFrame.append(self, other, ignore_index=False, verify_integrity=False, sort=False) → 'DataFrame'

### Code

```
df = pd.DataFrame([[1, 2], [3, 4]], columns=list('AB'))
df2 = pd.DataFrame([[5, 6], [7, 8]], columns=list('AB'))
df.append(df2) 
```

With ignore_index set to True:

```
df.append(df2, ignore_index=True) 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-04-17T17:54:13.050

Before going to add a row, we have to convert the dataframe to a dictionary. There you can see the keys as columns in the dataframe and the values of the columns are again stored in the dictionary, but there the key for every column is the index number in the dataframe.

That idea makes me to write the below code.

```
df2 = df.to_dict()
values = ["s_101", "hyderabad", 10, 20, 16, 13, 15, 12, 12, 13, 25, 26, 25, 27, "good", "bad"] # This is the total row that we are going to add
i = 0
for x in df.columns:   # Here df.columns gives us the main dictionary key
    df2[x][101] = values[i]   # Here the 101 is our index number. It is also the key of the sub dictionary
    i += 1 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-06-25T07:25:56.357

This code snippet uses a list of dictionaries to update the data frame. It adds on to [ShikharDua's](https://stackoverflow.com/questions/10715965/create-a-pandas-dataframe-by-appending-one-row-at-a-time/17496530#17496530) and [Mikhail_Sam's](https://stackoverflow.com/questions/10715965/create-a-pandas-dataframe-by-appending-one-row-at-a-time/47979665#47979665) answers.

```
import pandas as pd
colour = ["red", "big", "tasty"]
fruits = ["apple", "banana", "cherry"]
dict1={}
feat_list=[]
for x in colour:
    for y in fruits:
#         print(x, y)
        dict1 = dict([('x',x),('y',y)])
#         print(f'dict 1 {dict1}')
        feat_list.append(dict1)
#         print(f'feat_list {feat_list}')
feat_df=pd.DataFrame(feat_list)
feat_df.to_csv('feat1.csv') 
```

* * *

## 回答 #31

> 赞同：-3
> 
> 时间：2017-10-13T17:48:52.617

这将负责将项目添加到空 DataFrame。问题是`df.index.max() == nan`对于第一个索引：

```
df = pd.DataFrame(columns=['timeMS', 'accelX', 'accelY', 'accelZ', 'gyroX', 'gyroY', 'gyroZ'])

df.loc[0 if math.isnan(df.index.max()) else df.index.max() + 1] = [x for x in range(7)] 
```

# javascript - 图像在浏览器中完成大小调整后如何运行功能？(JS/JQuery)

> ID：10715975
> 
> 赞同：1
> 
> 时间：2012-05-23T08:13:11.047
> 
> 标签：javascript, jquery, image-resizing

我有一个包含两包图像的页面（大的和小的，比如 10-30 个），它们的大小必须动态调整为当前浏览器窗口的大小，然后由另一个函数处理。我知道在浏览器中调整大小通常是个坏主意，但服务器上的需求+遗留代码也是如此。站点使用 JQuery。

代码（缩短的）如下所示：

```
imageResizeBox(imgSmallHeight, '.box img'); // resize images to some height, parameters are size and selector
imageResizeBox(imgBigHeight, '.imagebig img'); // resize other images to another     height
processImages(); // process both packs of images (do positioning based on new dimensions) 
```

这是调整大小功能：

```
function imageResizeBox(size, selector) {
var max_size = size;

$(selector).each(function (i) {
    if (this.complete) {
        resizeImg(this);
    } else {
        $(this).load(function () {
            resizeImg(this);
        });
    }
});

function resizeImg(img) {
    if ($(img).height() > $(img).width()) {
        var h = max_size;
        var w = Math.ceil($(img).width() / $(img).height() * max_size);
    } else {
        var w = max_size;
        var h = Math.ceil($(img).height() / $(img).width() * max_size);
    }
    $(img).css({
        height:h,
        width:w
    });
} 
```

}

我需要在浏览器中完成前两个功能后调用 processImages() 函数（图像大小调整完全完成），否则定位不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:42:18.507

在里面调用你的代码

```
$(document).ready(**call your code here**); 
```

加载所有图像后准备运行，请参阅规范[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# indesign-server - 迭代设计服务器中的所有参数

> ID：10715978
> 
> 赞同：2
> 
> 时间：2012-05-23T08:13:16.120
> 
> 标签：indesign-server

要在 Indesign Server 中接收参数，您只需调用：

```
app.scriptArgs.getValue("myvar"); 
```

但是当我喜欢遍历所有参数时，Indesign Server 似乎不明白如何做到这一点。有一种方法`app.scriptArgs.getElements();`，但您仍然无法获得任何参数，[请参阅文档](http://jongware.mit.edu/idcsjs5.5/pc_ScriptArg.html)。

有人有想法吗？我喜欢接收传递给脚本的所有参数的数组列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T08:58:34.703

通过谷歌搜索后，我想我找到了解决方案。

```
var Log = new File("~/Desktop/Indd_Report.log" );
Log.open("w");

Log.writeln("app.scriptArgs.getValue(\"ArgumentArray\") = " + app.scriptArgs.getValue("ArgumentArray"));
var _ArugmentArray = app.scriptArgs.getValue("ArgumentArray").split(":");
for(var i=0; i < _ArugmentArray.length; i++ ){
    Log.writeln("_ArugmentArray[i] = " + _ArugmentArray[i]);
}

Log.close(); 
```

试运行...

```
C:\Program Files\Adobe\Adobe InDesign CS5 Server x64>sampleclient -host localhost:18385 "C:\test.jsx" ArgumentArray="One":"Two":"Three" 
```

最后，在调用 SOAP 服务之前，您需要添加以下代码

```
params.scriptArgs.push({name: "ArgumentArray", value:(Value+":"+Value)); 
```

参考链接[http://forums.adobe.com/thread/853668](http://forums.adobe.com/thread/853668)

# error-handling - Quartz.net cron 触发器只触发一次

> ID：10715980
> 
> 赞同：0
> 
> 时间：2012-05-23T08:13:17.027
> 
> 标签：error-handling, quartz.net, repeat, crontrigger

开始在我的项目中使用 Quartz.net。但是卡住了。使用 cron 触发器只会触发一次，然后停止。什么可能导致这个问题？

以下是 cron 触发器的掩码：

```
0 0/7 * * * ?
0 0/10 * * * ? 
```

他们看起来对我很好，日志中也不例外。我是否明确设置了一些选项来使 cron 触发器重复触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:34:46.343

对于任何可能有相同行为的人。注意你的Job，尝试手动运行几次，看看下次运行是否不会出现异常。对我来说，下一次运行导致了一些温莎异常，而这个异常并没有引发第二次机会异常。我在调试窗口中偶然发现它是第一次机会异常，后来它以某种方式由 Quartz.dll 处理。注意 VS 中的调试窗口 =] 有时它可以让你开心。

# c# - 如何避免 VS 程序集循环引用以访问 DI 容器（Ninject）？

> ID：10715986
> 
> 赞同：1
> 
> 时间：2012-05-23T08:13:37.260
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject

想象一下，我有一个包含 2 个类库项目的解决方案：project1 公开了一些接口，project2 公开了一些接口，并且（！）使用了 project1 的接口。我也有 project3，它设置了具有所有必要接口绑定的 Ninject 内核模块。如下所示：

```
public class Dependencies : NinjectModule
{
    public override void Load()
    {
        Bind<IFileSystemWatcherFactory>().To<FileSystemWatcherFactory>();
        Bind<IFileSystemWatcher>().To<FileSystemWatcher>();
        Bind( typeof( IRepository<> ) ).To( typeof( NHibernateRepository<> ) );
        Bind<IFileSystemHelper>().To<FileSystemHelper>();
        Bind<IFileSystemInfoAdapter>().To<FileSystemInfoAdapter>();
        Bind<IFolderMonitor>().To<FolderMonitor>();
        Bind<IFolderMonitorBrowser>().To<FolderMonitor>();
        Bind<IFileManager>().To<FileManager>();
    }
}

public class DiContainer
{
    private static IKernel _container;
    public static IKernel Instance
    {
        get
        {
            if ( _container == null )
                _container = new StandardKernel( new Dependencies() );

            return _container;
        }
    }

    private DiContainer() { }

} 
```

为了设置绑定，project3 需要引用 project1 和 project2。为了使用 DI 容器，project2 需要对 project3 的引用 - 但我无法添加它，因为 VS 显示添加此引用会导致循环依赖的错误消息。

如何处理那个问题？我应该在 XML 中配置依赖项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:21:24.947

如果您的 project2 必须在 project3 中引用您的合成根目录，那么您在其中做错了什么。你很可能正在做

```
kernel.Get<ISomeDependency>() 
```

正确的方法是使用工厂。看看工厂扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:01:14.833

您可以将接口移动到另一个程序集。

依赖倒置和依赖注入很好地结合在一起，但如果你不小心，*可能会纠缠在一起。*

只是需要一些时间来习惯你如何构建你的项目。

**编辑**：

好的，可能不是那么简单:) 但你应该把相关的位分开。将布线包含在作为解决方案一部分的某些基础设施项目中可能会更容易。它不必是一个单独的项目，因为它与您的解决方案密切相关。

# c# - Windows 8 Metro 应用程序的显示名称

> ID：10715993
> 
> 赞同：1
> 
> 时间：2012-05-23T08:13:56.417
> 
> 标签：c#, windows-8

你能告诉我如何隐藏或删除我的应用程序的显示名称吗？我想添加一个图像徽标而不是应用程序的显示名称。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:20:12.050

更改`Package.appxmanifest`文件的部分`DefaultTile`：

```
<DefaultTile ShowName="noLogos" /> 
```

或者通过使用集成的 Visual Studio 设计器。

# javascript - 比较两个图像是否相等（跨域）

> ID：10715994
> 
> 赞同：1
> 
> 时间：2012-05-23T08:13:59.973
> 
> 标签：javascript, selenium, selenium-ide

我正在寻找一种方法来检查特定图像是否已使用 Selenium IDE 加载到网页上。

我的第一次尝试是生成图像的哈希值，但这似乎用 javascript 是不可能的。然后我发现如果将图像加载到画布中然后调用 toDataUrl()，则可以对图像进行 base64 编码。但是，如果图像位于另一个域中，这将不起作用。

我的图像服务器提供了一个标准的“找不到图像”-图像。我想通过将加载的图像与失败的图像进行比较来检查特定图像是否已成功加载。您对如何实现这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:44:08.670

您是否将“硒签名”视为 ide 的插件？[https://addons.mozilla.org/en-US/firefox/addon/selenium-ide-signature/](https://addons.mozilla.org/en-US/firefox/addon/selenium-ide-signature/)

它将对元素进行 crc32 签名，例如 *html=50D5FBD3*css=5BBF6784*img=81AD9F9D* 您只需要*** *img=81AD9F9D* ***部分来验证图像。