# StackOverflow 问答 000645000-000645999

# java - Hibernate Core 每日/每周构建 Maven 存储库

> ID：645002
> 
> 赞同：1
> 
> 时间：2009-03-13T23:45:29.787
> 
> 标签：java, hibernate, maven-2

我正在寻找一个包含每日或每周构建的 Hibernate Core 的 Maven 存储库。更具体地说，我正在尝试获得一个包含[错误修复](http://opensource.atlassian.com/projects/hibernate/browse/HHH-3636)的休眠核心版本，该版本已于 2008 年 12 月 9 日签入。不幸的是，最新的休眠核心是 2008 年 9 月构建的 3.3.1GA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T00:02:20.637

[在这里](http://www.hibernate.org/422.html)查看 Hibernate Core 的 Maven 指南，它解释了为快照存储库配置项目。当前的 3.4.0 快照是在 1 月 21 日拍摄的（参见[http://snapshots.jboss.org/maven2/org/hibernate/hibernate-core/](http://snapshots.jboss.org/maven2/org/hibernate/hibernate-core/)）。

# clearcase - 每个开发人员都应该知道的基本 clearcase 概念是什么？

> ID：645008
> 
> 赞同：65
> 
> 时间：2009-03-13T23:49:43.740
> 
> 标签：clearcase

每个开发者都应该知道的 Clearcase 版本控制系统的核心概念是什么？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2009-03-14T11:10:07.893

***核心***概念？

*   **集中式（复制）VCS**：ClearCase 介于集中式 VCS 世界（一个或多个“集中式”存储库或 VOBS - 版本对象库 - 每个开发人员必须访问才能提交）和分布式 VCS 世界之间。
    但它也支持“复制”模式，允许您在远程站点 (MultiSite ClearCase) 中复制存储库、发送增量和管理所有权。（尽管随之而来的许可费用相当高）
    这不是一个真正的“去中心化”模型，因为它不允许并行*并发*进化：分支掌握在一个 VOB 或另一个；您只能为在那里掌握的分支签入主 VOB，尽管您对任何副本的任何分支具有只读访问权限。

*   **线性版本存储**：每个文件*和目录*都有一个线性历史；它们之间没有直接关系，例如 DAG VCS（有向无[环图](http://en.wikipedia.org/wiki/Directed_acyclic_graph)），其中文件的历史记录链接到链接到提交的目录之一。
    这意味着

    *   当您比较两个提交时，您必须比较所有文件和目录的列表以找到增量，因为提交不是跨文件或目录的原子，这意味着对构成一个的所有文件的所有更改没有单一名称逻辑增量。
    *   这也意味着**[合并](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_merge_base_cc.htm)**必须通过历史探索（见下一点）找到一个共同的*[基础贡献者（并不总是与共同的祖先相同）。](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_merge_base_cc.htm)*

        （Git 处于该频谱的另一端，既分散又面向 DAG：

        *   如果其图的节点与不同提交的节点具有相同的“id”，则不必进一步探索：所有子图都保证相同
        *   两个分支的合并实际上是一个 DAG 中两个节点的内容的合并：递归并且非常快速地找到一个共同的祖先）

[替代文本 http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.hlp.doc/cc_main/images/merg_base_contrib.gif](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.hlp.doc/cc_main/images/merg_base_contrib.gif)

*   **三向合并：要合并两个版本，ClearCase 必须在它们的线性历史中找到一个基于公共的贡献者，这**[对于复杂的版本树](http://groups.google.com/group/comp.software.config-mgmt/browse_thread/thread/aaed6a7dfb14ba0e)（分支/子分支/子子/分支，...）可能相当长，并且基本的[ClearCase 合并](http://www.tips5.com/how-merge-works-in-clearcase)命令合并一个文件或目录，但它不是递归的。它只影响单个文件或没有文件的单个目录（`ct findmerge`是递归的）

*   **以文件为中心**（与其他最近的以存储库为中心的 VCS 相反）：这意味着提交是逐个文件的，而不是“修改文件集”：事务是在文件级别的。多个文件的提交不是原子的。
    （几乎所有其他*现代*工具都是“以存储库为中心”，具有原子提交事务，但第一代系统，如 RCS、SCCS、CVS 和大多数其他较旧的系统都没有该功能。）

*   **id-managed**：每个文件和目录都有一个唯一的 id，这意味着它们可以随意重命名：它们的历史不会改变，因为 id 仍然是“元素”。另外，目录将在其历史记录中检测到文件的任何添加/抑制。`rmname`当一个文件被“移除”（

（创建两个大小和内容相同的文件，它们将在 Git 中获得相同的 id——一个 SHA1 密钥——并且只会在 Git 存储库中存储一次！在 ClearCase 中不是这样。
另外，如果两个文件具有相同的path 和 name 在两个不同的分支中创建，它们的 id 不同意味着这两个文件永远不会被合并：它们被称为“*邪恶双胞胎*”）

*   **分支是一等公民**：大多数 VCS 将分支和标签视为相同：历史中的一个点，新的线性历史可以从该点开始（分支）或附加描述（标签）。
    对于 ClearCase 来说并非如此，其中分支是引用版本号的一种方式。任何版本号都从 0（仅在 ClearCase 中引用）到 1、2、3 等开始。每个分支都可以包含一个新的版本号列表（又是 0、1、2、3）。
    这不同于其他版本号是唯一的并且一直在增长的系统（如 SVN 中的修订版），或者只是唯一的（如 Git 中的 SHA1 键）。

*   **path-accessed**：要访问某个版本的文件/目录，您需要知道其扩展路径（由分支和版本组成）。它被称为“扩展路径名”：`myFile@@/main/subBranch/Version`.

（Git 确实通过 id 引用所有内容——基于 SHA1——：版本 [或提交]、树 [或目录的版本] 和 blob [或文件的版本，或者更确切地说是文件的*内容*]。所以它是“id-accessed”或“id-referenced”。
对于 ClearCase，id 指的是“元素”：目录或文件，无论其版本是什么。）

*   **悲观锁和乐观锁**：（ClearCase 中的保留或非保留签出）：即使是悲观锁（保留签出）也不是真正的悲观锁，因为其他用户仍然可以签出该文件（尽管处于“非保留模式”）：他们可以更改它，但必须等待第一个用户提交他的文件（签入）或取消请求。然后他们将合并同一文件的结帐版本。
    （注意：“保留”结帐可以由所有者或管理员释放其锁定并变为未保留）

*   **便宜的分支**：一个分支不会触发所有文件的副本。它实际上什么也没触发：任何未检出的文件都将保留在其原始分支中。只有修改过的文件才会将其新版本存储在声明的分支中。

*   **平面文件存储**：VOB 以简单文件的专有格式存储。这不是一个具有简单查询语言的数据库。

*   **本地或网络工作区访问**：

    *   本地工作区是通过结帐到硬盘驱动器（快照视图的“更新”）。
    *   网络工作空间是通过动态视图，通过网络（无本地副本，即时访问）和本地文件（签出的文件或私有文件）结合版本化文件和目录访问。远程（版本化）和本地（私有）文件的组合允许动态视图看起来像经典硬盘驱动器（而实际上任何“写入”的文件都存储在关联的视图存储中）。
*   **集中驱逐存储**：[视图]存储用于保存一些数据并避免与中央引用进行一些或任何通信。
    工作区可以有：

    *   分散的存储：就像`.svn`到处都是子目录
    *   集中式存储：类似于 ClearCase 中的视图存储，它们包含有关视图显示的文件的信息，并且该存储对于视图来说是唯一的。
    *   被驱逐的存储：存储不是视图/工作区本身的一部分，但可以位于计算机上的其他位置，甚至可以位于 LAN/WAN 外部

（Git 本身没有“存储”。它`.git`实际上是所有的存储库！）

*   **面向元数据**：任何“键值”都可以附加到文件或目录，但是这对数据本身不会被历史化：如果值发生变化，它会覆盖旧值。

（这意味着该机制实际上比 SVN 的“属性”系统弱，其中属性可以有历史；
另一端的 Git 不太热衷于元数据）

*   **基于系统的保护**：与文件/目录或存储库关联的所有者和权限基于底层系统的权限管理。ClearCase 中没有应用账户，用户组直接基于 Windows 或 Unix 现有组（这在异构环境中相当具有挑战性，有 Windows 客户端和 Unix VOB 服务器！）

（SVN更像是“基于服务器”的保护，Apache服务器可以得到第一级的保护，但必须用钩子完成才能拥有更细粒度的权限
。Git没有直接的权限管理，必须通过钩子来控制在存储库之间推送或拉取期间）

*   **可用的钩子**：任何 ClearCase 操作都可以成为钩子的目标，称为触发器。它可以是前操作或后操作。

*   **CLI 管理**：cleartool 是命令行界面，可以从中执行所有操作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-03-14T00:01:32.963

ClearCase 是一个好用的野兽。慢，有车，而且很贵。我为应对使用 CC 所做的一些事情是：

1.  入住时请务必发表好评。
2.  使用通用配置规范，不要经常更改。
3.  切勿尝试通过 VPN 或慢速网络连接使用 CC。
4.  启动时关闭加载关闭CC医生。
5.  不要将文件移动到不同的目录。
6.  为每个文件安排至少 2 分钟的签入时间。
7.  快照视图很慢，但动态视图更慢。
8.  养成尽早并经常签入的开发习惯，因为保留文件和合并很痛苦。
9.  默认情况下，让所有开发人员签出未保留的文件。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-14T05:07:03.930

我们使用 CC 已经超过十五年了。它有很多很好的功能。

我们所有的开发都是在分支上完成的；我今天创建了一对，用于几组不同的更改。当我检查到分支时，我让一位同事审查更改，然后合并回 /main/LATEST - 这恰好是我需要去的地方。如果它是针对分支上的较旧版本，那将不会更难。

我的临时分支的合并是全自动的；在我签出文件时，没有人更改过我处理的文件。尽管默认情况下结帐是保留（锁定）的，但您始终可以稍后取消保留结帐，或创建未保留的结帐。当更改需要几天时间时，我的临时分支与主分支的重新同步很容易并且通常是自动的。合并工具没问题；对我来说最大的问题是我的服务器机器离我的办公室（或家）大约 1800 英里，所以那个距离上的 X 有点慢（但不是不能忍受的）。我没有使用过更好的合并工具，但这可能没什么意义，因为我没有使用任何其他图形合并工具。

视图（动态视图）在我们的设置中很快。我没有使用过快照视图，但是当我可以提供帮助时，我不会在 Windows 上工作（我们的团队在 Windows 上使用快照视图；我不清楚为什么）。我们有复杂的分支系统，但是主要的开发是在 /main/LATEST 上完成的，而发布工作是在一个分支上完成的。在 GA 之后，维护工作在特定于发布的分支上完成，并向前合并到 /main/LATEST（通过任何中间版本）。

CC 确实需要优秀的管理员——我们有他们并且很幸运能够这样做。

CC 的使用并非微不足道，尽管目前，我发现 'git' 就像 CC 对那些没有使用过它的人一样令人生畏。但基本原理是相同的——结账、更改、签入、合并、分支等等。目录可以分支 - 谨慎 - 当然是版本控制的。那是无价的。

我没有看到办公室从 CC 切换。

* * *

## 嵌入式版本号 - 好还是坏？

我写：

> 我对 CC 的最大问题是它没有将版本号嵌入到源文件中——git 也有这个问题，AFAICT。我能明白为什么；不过，我不确定我是否喜欢放弃这种可追踪性。所以，在我的大部分个人工作中，我仍然使用 RCS（甚至不是 CVS）。有一天，我可能会切换到 git - 但这将是一个颠簸，并且需要大量工作来重新配置围绕（SCCS 和）RCS 配置的发布系统。

作为回应，@VonC 指出：

> 我们一直认为这种做法是邪恶的（将元数据信息混合到数据中），引入了“合并地狱”。另请参阅[如何在 Java 文件中获取 Clearcase 文件版本](http://www.cmcrossroads.com/component/option,com_fireboard/func,view/id,23023/catid,31/Itemid,593/#23028)。当然，您可以使用触发器进行 RCS 关键字替换（[Clearcase 手册：检查触发器示例](http://www.ibm.com/developerworks/rational/library/4311.html#N1046A)），前提是您使用了[适当的合并管理器](http://www.ibm.com/developerworks/rational/library/05/1213_diebolt/index.html)。

这次讨论暴露了几个问题，它们都混在一起了。我的观点近乎过时，但背后有一个基本原理，我会花时间把它们写下来（被生活搞砸了——可能需要多次编辑才能完成）。

### 背景

我在 1984 年学习 SCCS，大约在 RCS 发布的时间（我相信是 1983 年），但 SCCS 在我的机器上，互联网充其量只是新生。我在 90 年代中期不情愿地从 SCCS 转到 RCS，因为 SCCS 日期格式多年来一直使用两位数，而且尚不清楚 SCCS 是否会在时间上普遍固定（确实如此）。在某些方面，我不像 SCCS 那样喜欢 RCS，但它有一些优点。在商业上，我的雇主使用 SCCS 直到 1995 年年中，但他们从 1994 年初开始切换到 Atria ClearCase，一次处理一个单独的产品集。

### 早期的 ClearCase 实验与触发器 - 并合并地狱

我们的项目后来迁移了，当时已经有了一些 CC 经验。部分因为我坚持，我们通过签入触发器将版本控制信息嵌入到源文件中。这持续了一段时间——但只是一段时间——因为正如 VonC 所说，它会导致合并地狱。问题是，如果带有标签 /main/branch1/N 的版本与来自公共基本版本 /main/B 的 /main/M 合并，则文件的提取版本包含一行，每个版本都有编辑 -冲突。而且这种冲突必须手动解决，而不是自动处理。

现在，SCCS 有了 ID 关键字。ID 关键字有两种格式，一种用于正在编辑的文件，另一种用于未编辑的文件：

```
Edit         Non-Edit
%I%          9.13
%E%          06/03/09
%Z%          @(#)
%M%          s.stderr.c 
```

如果您尝试对 SCCS 文件的可编辑版本进行 3 路合并（使用 %x% 表示法），则包含元数据的行不会发生冲突，除非您更改了这些行上的元数据（例如，通过从 US-样式 %D% 日期到英国样式 %E% 日期 - SCCS 不支持 ISO 样式 2009-03-15 日期作为标准。）

RCS 也有关键字机制，关键字也有两种格式，一种是针对尚未插入 RCS 的文件，另一种是针对具有以下内容的文件：

```
Original       After insertion
$Revision$     $Revision: 9.13 $
$Date$         $Date: 2009/03/06 06:52:26 $
$RCSfile$      $RCSfile: stderr.c,v $ 
```

区别在于关键字后面的“$”和“:”、空格、文本、空格，最后是“$”。我没有对 RCS 进行足够的合并来确定它对关键字信息的作用，但我注意到如果它将扩展和“收缩”符号视为等效（不管扩展材料的内容如何），那么合并可以在没有冲突的情况下发生，在合并的输出中留下约定的符号，当签入后检索结果文件时，它将被适当地扩展。

### ClearCase 问题是缺少合适的合并管理器

正如我在对 SCCS 和 RCS 的讨论中指出的那样，如果完成 3 路合并，以正确（收缩或可编辑）格式处理关键字，则不存在合并冲突。

CC 的问题（从这个角度来看——显然，CC 的实现者不同意）是它缺乏处理关键字的系统，因此也缺乏适当的合并管理器。

如果有处理关键字的系统和适当的合并管理器，那么：

*   系统会自动将元数据嵌入到适当标记的文件中。
*   在合并时，系统会识别出带有元数据标记的行不会发生冲突，除非标记发生不同的变化——它会忽略元数据内容。

这样做的缺点是它需要一个特殊的差异工具来识别元数据标记并对其进行特殊处理，或者它需要将提供给差异工具的文件进行规范化（元数据标记被简化为中性形式 - $Keyword$ 或RCS 和 SCCS 术语中的 %K%）。我确信这一点额外的工作是它不被支持的原因，我一直觉得在如此强大的系统中是短视的。我对 RCS 或 SCCS 表示法没有特别的依恋——SCCS 表示法在某些方面更容易处理，但它们本质上是等价的——并且可以使用任何等价的表示法。

### 为什么我仍然认为文件中的元数据很好

我喜欢在源代码中包含元数据，因为我的源代码（而不是我雇主的源代码）分布在[源](http://aegis.sourceforge.net/)代码控制系统的保护之外。也就是说，它主要是开源的——我让所有人都可以使用它。如果有人报告文件中的问题，特别是在他们修改过的文件中，我认为知道他们从哪里开始会很有帮助，这由源文件中的原始元数据表示。

在这里，SCCS 比 RCS 有一个优势：SCCS 关键字的扩展形式与常规文本没有区别，而 RCS 关键字仍然看起来像关键字，因此如果其他人已将材料导入自己的 RCS 存储库，则他们的元数据会替换我的元数据，SCCS 不会以同样的方式发生问题（其他人必须工作才能覆盖元数据）。

因此，即使有人拿走了我的一大块源代码并对其进行了修改，其中通常有足够的标签来识别它的来源，而不是让我推测它基于哪个版本。反过来，这也让我们更容易看出问题的哪些部分是我造成的，以及问题的哪些部分是他们造成的。

现在，在实践中，开源的工作方式，人们并不像你想象的那样迁移代码。他们倾向于相当紧密地坚持发布的版本，仅仅是因为在下一次正式发布时偏离太昂贵了。

我不确定您应该如何确定源自您的工作并从那时起经过修订的一段源代码的基本版本。不过，找到正确的版本似乎是做到这一点的关键，如果代码中有指纹，那就更容易了。

所以，这就是我为什么喜欢在源文件中嵌入版本信息的一个适度的总结。这在很大程度上是历史性的——SCCS 和 RCS 都这样做了，我喜欢他们这样做的事实。它可能是古老的遗物，是 DVCS 时代要告别的东西。但我还没有完全相信这一点。但是，可能需要更多的文章来解释我的发布管理机制的来龙去脉，才能了解我为什么要这样做。

推理的一个方面是关键文件，例如“stderr.c”和“stderr.h”，基本上被我的所有程序使用。当我发布一个使用它的程序时，我只是确保我拥有最新的版本——除非有一个需要回溯版本的接口更改。我已经有一段时间没有遇到这个问题了（我在 2003 年进行了系统重命名；这引起了一些过渡性的头痛，但是 Perl 脚本让我可以很容易地实现重命名）。我不知道有多少程序使用该代码 - 100 到 200 之间的某个地方是一个合理的猜测。今年的一系列变化（9.x 系列）仍然有些投机性；我还没有最终决定是否保留它们。它们也是实现的内部，不影响外部接口，所以我不 我现在还不需要下定决心。我不确定如何使用 git 来处理它。我不想将库代码构建成必须在构建我的软件之前安装的库——这对我的客户来说太繁重了。因此，每个程序将继续分发库代码的副本（另一种繁重的），但只有程序需要的库代码，而不是整个库。我为每个程序挑选并选择使用哪些库函数。所以，我不会导出整个子树；实际上，涵盖库代码中最后更改的提交通常与涵盖程序中最后更改的提交完全无关。我什至不确定 git 是否应该为库使用一个存储库，为使用它的程序使用另一个存储库，还是应该使用一个更大的通用存储库。

好的-足够的wittering。我所拥有的对我有用；不一定适合所有人。它对 VCS 没有特别的要求——但它确实需要文件中嵌入的版本元数据，而 CC、Git 和（我认为）SVN 对此有问题。这可能意味着我是一个有问题的人——为失去的过去挂断电话。但我重视过去所提供的东西。（我可以侥幸逃脱，因为我的大部分代码都没有分支。我不确定分支会产生多大的不同。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-14T00:35:38.293

我与 clearcase 一起工作了 6 年的大部分时间，并且普遍认为它是可以忍受的。它确实有一定的学习曲线，但是一旦你习惯了这些怪癖，你就可以顺利地使用它。一个非常称职的 CC 管理员知道自己在做什么，这对于除琐碎设置之外的任何事情都是必不可少的。除非你有一个，否则人们会遇到问题，很快就会有关于“ClearCase”问题的讨论。然后管理层将不得不通过切换到其他方式进行干预，这只会浪费所有相关人员的时间。CC 不是一个糟糕的产品，只是有时人们对它了解甚少。

以下是我认为重要的几个概念，其中一些并非完全面向 CC -

*   结帐不同于常规的类似 CVS 的结帐概念。签出时会锁定文件，直到签入。
*   移动文件没有问题。事实上，这完美无缺。
*   版本树对于理解文件发生的事情至关重要。对于活动文件，它们可能会变得非常混乱，但是当您习惯观看它们时，它会成为一种非常有用的工具，并且是其他源代码控制工具（例如 SVN）中非常缺乏的工具（在某种程度上）。
*   在任何情况下都不要使用动态视图。这不值得。
*   在创建新的分支、流或项目之前，请咨询您的管理员，以确保您创建的内容真正能为您提供最佳服务。开始新的代码库时，请确保通过提前计划从一开始就获得流和项目布局。如果可能的话，以后更改它是一个真正的头痛。
*   微调用户权限并为常见事件设置触发器，以防止常见错误或强制执行策略。服务器是非常可配置的，对于您遇到的大多数问题，可能有一个合理的解决方案。
*   对开发人员进行从基本概念到高级操作的任何方面的教育。可以使用 cleartool 找到问题所在的高级用户可以降低管理员的负担。
*   不要留下悬空的流和视图。当开发人员离开项目时，有人可以删除他在他的机器上拥有的所有视图并删除他所有的私有流。不保持服务器清洁会导致...它变脏并且随着时间的推移变慢。当您对所有流和视图执行“查找所有签出”时，您不应该看到由不再存在的人签出的文件。
*   为子分支强制执行“始终在交付前变基”策略，以避免人们在交付与最近更改冲突的代码时“破坏集成流”。
*   [持续集成](http://en.wikipedia.org/wiki/Continuous_Integration)- 当每个开发人员或团队在自己的分支上工作时，不要让集成流停滞。如果不交付稳定的更改，则每 X 次每个人都必须至少重新定位到最新的集成基线时强制执行一次。这确实很难做到，特别是对于大型项目，但另一种选择是“集成地狱”，在月底没有人做任何事情 3 天，而一些可怜的草皮试图让所有的变化结合在一起

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-14T04:51:13.903

如何在 ClearCase 之上使用 git！

*   [Git 后台，在幕后和低处](http://www.littleredbat.net/mk/blog/story/63/)
*   [Git 的 Clearcase](http://blog.charleso.org/2008/10/clearcase-for-git.html) , git-cc 桥

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T02:27:39.180

我使用 Clearcase 和 SVN 成功地完成了许多大中型项目。两者都是很棒的工具，但使用它们的团队需要记录在案的流程。创建一个描述您将如何使用版本控制系统的过程。

1) 为您的版本控制系统查找或创建最佳实践文档。这是[subversion](http://svn.collab.net/repos/svn/trunk/doc/user/svn-best-practices.html)的一个，将其调整为您的 Clearcase 流程。所有开发者都必须遵守相同的游戏计划。

基本上决定你是要“总是分支”还是“从不分支”。

从不分支方案：

*   从不分支方案是 SourceSafe 在签出期间锁定文件并在签入期间可用的地方使用的方案。此方案适用于小型（1 或 2 个开发人员）团队项目。

始终分支方案：

*   始终分支方案意味着开发人员为每个错误修复或功能添加创建分支。大型项目需要此方案，该项目有负责人（buildmeister）管理 Clearcase 中的 /main/LATEST 或 SVN 中的 /trunk 允许哪些更改。
*   始终分支方案意味着您可以经常签入而不必担心破坏构建。只有在您的错误修复或功能完成并将其合并到 /main/LATEST 之后，您才能打破构建的唯一机会。

“需要时分支”是一种折衷方案，可能最适合许多项目。

2) 使用 Clearcase（和 Subversion）你必须学会​​合并——合并是你的朋友。学习使用 Clearcase 的合并功能或使用[Beyond Compare](http://www.scootersoftware.com/)或 emacs-diff 之类的工具。如果您的项目模块化良好（许多小的解耦文件），您将受益于合并期间更少（或没有）冲突。

3）享受。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-01-05T20:05:01.533

如果您使用的是 ClearCase，请确保您使用它附带的 UCM 和复合组件。

它使您的所有分支/合并都毫不费力。我说的是运行 6 个月的主要重组分支，涉及数万次更改，包括目录重命名、文件重命名等，它们会自动解决 99.9% 的增量。

此外，我们只使用 SnapShot 视图，而不是动态视图。我们的快照视图加载速度比您从网络驱动器拖放 (Windows) 相同的源树要快。

我对 UCM 的唯一抱怨是历史不能跨越组件。如果将一个组件拆分为多个新组件，则每个新组件都从 /main/0 开始。

# iphone - 强制 UIView/UIVIewController 方向

> ID：645010
> 
> 赞同：6
> 
> 时间：2009-03-13T23:51:00.180
> 
> 标签：iphone, cocoa-touch

我们正在编写一个专门处于横向模式的应用程序。我们在根视图上使用变换将其旋转到 LandscapeRight，然后由该视图加载的每个视图共享坐标系。这一切都很好，很花哨，除了我们的一个视图有一个 UIWebView 对象，该对象正在由视图控制器加载。我们试图查看的站点没有其内容填充视图。当我在移动 Safari 中以横向模式查看同一站点时，它看起来是正确的。我的猜测是，我们用来托管 WebView 的视图控制器仍然认为它处于纵向模式，因为查询属性的 interfaceOrientation 返回“1”......有没有办法欺骗视图/视图控制器认为它是在特定的方向？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-17T22:58:54.720

希望您已经找到了答案，但您可能会尝试告诉您的应用程序以横向模式开始，而不是强制它始终旋转到该方向。然后，如果您的根视图的 shouldAutorotateToInterfaceOrientation 仅在横向模式下返回 yes，我敢打赌您将拥有您正在寻找的行为。

这家伙似乎有一个关于如何做这一切的很好的教程。 [http://www.dejoware.com/blogpages/files/iphone_programming_landscape_view_tutorial.html](http://www.dejoware.com/blogpages/files/iphone_programming_landscape_view_tutorial.html)

# c# - C# 中的结构或数据集列表？

> ID：645016
> 
> 赞同：3
> 
> 时间：2009-03-13T23:53:04.887
> 
> 标签：c#, arrays, list, dataset

我有一些我想处理的数据。两个字符串和两个数字，我说有 8000 行数据。

数据集是这里使用的最佳选择，还是我可以使用结构并拥有结构列表？

列表和数据集之间会有很大的性能差异吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T00:07:49.623

`DataSet`s 和`DataTable`s 通常更冗长并且有一些访问开销，但通常可以与您正在使用的任何数据绑定类型的东西互操作。

如果您有选择（即您没有被某些使用`DataTable`s 的组件所吸引），我强烈建议您使用适当的强类型集合，例如泛型`List`、`Dictionary`或`SortedDictionary`. 我建议，如果您的项目有长期的运行，那么从长远来看，灵活性和透明度将使您受益。

PS 两个字符串和两个数字足够大，我怀疑你会看到将其设为 a`struct`而不是类的任何好处。当然，您应该自己分析它，但这是我的直觉。我同意帖子中提到的如果这是过早优化的情况，您应该确保您了解两者之间的根本区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T00:16:16.750

好的，我是根据有限的数据进行推断的，但是您在结构列表和数据集之间进行询问的事实对我来说意味着您对 C# 有点陌生，并且没有被介绍到结构是[ValueType](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)，因此存在于堆栈中。您可能听说过结构可以在某处为您提供“更好的性能”，并希望为您的 8000 项列表获得最佳性能。

首先，我相信您过早地进行了优化。不。在你的程序范围内做任何事情。如果您自己以编程方式（可能从 XML 或平面文件）构建这个包含 8000 个项目的列表，我建议您使用***对象***列表，因为这对您来说是最容易编程的。您的帖子并不意味着您在两个表格数据集之间存在关系，因此不需要 DataSet。

也就是说，如果您以某种方式从数据库接收该列表，并且您当前的数据层是 ADO.NET 2.0（因此返回 DataSets 和 DataTables），那么我会说使用它。如果您从数据库接收列表但尚未定义数据层，我建议您查看[LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)或[Entity Framework](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)。

再次提醒您不要过早优化，尤其是考虑到您似乎不了解结构的工作原理。同样，这是一个假设，如果我错了，我会提前道歉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T00:03:06.360

取决于“合作”对您意味着什么。如果我在 DataGridView 或类似的其他控件中显示数据，我会选择 DataSet/DataTable 路由。为您提供对数据进行一些简单过滤的能力。

同样，List 与 DataSet 的性能差异取决于您在做什么。列表非常适合遍历容器和这种性质的事物。DataSets 和DataTables 提供了诸如ReadXML() 之类的简单操作（当然，假设您已经将数据保存在XML 中），它们将获取您的元素、创建列并为您填充行。这很方便。

除非您在相当严格的硬件上运行，或者其他线程/进程还有很多其他工作，否则 8000 个项目并不是一个非常大的数据量。我会根据我打算用它做什么来选择我的容器。如果我使用数据绑定，我会选择 DataSet。

# git - 使用 Git，子树合并具有子模块的外部项目的最佳方法是什么？

> ID：645019
> 
> 赞同：4
> 
> 时间：2009-03-13T23:56:14.567
> 
> 标签：git, version-control, git-submodules, subtree

我正在使用 Git 存储库来存储与我正在开发的网站相关的所有内容。该存储库包含与该站点相关的所有文件，包括文档、模型、原始分层图像等，以及我放在`www`子目录中的 Web 根目录。

我现在想开始将我选择使用的 CMS 与项目的其余部分集成；CMS 是一个开源项目，它也由 Git 管理（如果重要的话，托管在 GitHub 上）。显然 CMS 需要在`www`子目录中，但它不会是唯一的东西 - 会有 CSS 文件、图像、CMS 模板等等等。因此，我选择了使用子树合并策略将外部项目添加到我的存储库。因为我可能在某个时候想要修改原始项目，并回馈更改，所以我从 GitHub 克隆了 CMS 存储库，并从我的克隆中完成了子树合并。

问题是，外部项目（即CMS）有我想要包含的子模块。确保子模块集成到主项目中的最佳方法是什么？我是否必须为每个子模块进行子树合并？

我不太可能想要修改子模块，但我可能会修改一两个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-08-20T17:56:14.910

进行子树合并（以及随后再次拆分，以便您可以向上游提交补丁）的一种更简单的方法是尝试实验性[git subtree](http://github.com/apenwarr/git-subtree)工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T17:01:42.287

Git[子模块](http://git.or.cz/gitwiki/GitSubmoduleTutorial)包含另一个项目的特定签出，并且不会自动保持最新。因此，处理 CMS 子模块的最简单方法可能是跟踪它们作为远程分支来自的存储库。这样您就可以随时了解子模块来自的项目的更改。

使用子树合并使得将更改提交回 CMS 项目变得更加复杂（也许*挑剔是正确的词）；*如果您希望提交许多更改，也许可以编写脚本。

# dns - [i.][m.] HTTP 地址

> ID：645040
> 
> 赞同：2
> 
> 时间：2009-03-14T00:14:05.023
> 
> 标签：dns, http-headers, web-hosting

我注意到在网络上，一些网站有专门用于图像或子域信息的子域，例如 i.domain.com。我想知道这有什么好处？这种“方法”有名称吗？我在哪里可以获得更多关于这方面的信息？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T00:16:13.927

并行化图像/脚本下载。

某些浏览器一次只能打开 2 个并发连接到给定**域**。如果您有 20 个图像/脚本要下载，则一次只能下载 2 个 x10。如果您使用不同的域（子域），您可以增加并发下载量。

例如，StackOverflow 将图像放在 i.stackoverflow.com 下以帮助提高速度。

**编辑**

正如理查德（在评论中）指出的那样，HTTP 规范强烈建议 2 个并发连接限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T00:41:11.323

'一世。' 由于乍得解释的原因，经常用于图像。它还有一点点，在“i”下有图像。允许来自主域的更多请求而不会干扰图像。

特别是，每次包含外部 <script>(*) 时，浏览器都必须阻止在脚本下渲染页面的其余部分，直到获取并执行脚本文件。如果 script 元素上方有 20 张图像，则这些图像都已经排队，并且可能在 script 元素之前被提取，从而导致渲染页面有很大延迟。

对于像脚本这样的重要资源使用不同的主机名（即使在同一个域中），图像请求不会阻塞更重要的样式表和脚本资源的管道；相反，它们将并行发生。

当然，通过为图像和其他大型资源（如视频文件）使用不同的主机名，您将来可以将它们启动到第二台服务器上。

（*：除非你使用 <script defer>，但它很少使用并且不全球支持。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-14T00:44:28.880

除了拥有更多的同时浏览器连接外，静态内容（图像、CSS、Javascript）通常被委托给[CDN](http://en.wikipedia.org/wiki/Content_Delivery_Network)，这需要一个新的子域。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T00:15:28.123

m.cnn.com 适用于移动设备。节省打字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T00:41:59.060

您可以[将无 cookie 的子域](http://developer.yahoo.com/performance/rules.html#cookie_free)用于静态内容（图像、脚本、样式表等）。

静态内容不需要 cookie，因此发送/接收它们只是浪费带宽。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T00:56:49.193

它还可以帮助管理对另一个子域上内容的访问，因为您可以放心地假设来自 i.yoursite.com 的所有内容只能通过 www.yoursite.com 链接

以 apache 为例，您可以放置​​一个带有一些简单规则的 .htaccess，以在子域的根目录中定义对图像的访问权限。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-14T18:23:22.230

为某些资源使用单独的子域有几个原因：

*   **并行下载**   HTTP 规范将[同时连接的数量](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4)限制为两个连接：

    > 使用持久连接的客户端应该限制他们维护到给定服务器的同时连接的数量。单用户客户端不应与任何服务器或代理保持超过 2 个连接。

    但是，尽管[大多数浏览器支持每台服务器同时连接两个以上](http://stevesouders.com/ua/report.php)，但存在一个限制，并且分发请求将允许更多的同时连接。

*   **静态内容**   由于图像、样式表和脚本大多是静态内容，它们可以交换到专门提供静态内容的不同服务器。因此，用于处理服务器端语言的不必要的加载模块不会阻碍服务器传递内容。

*   **无 Cookie 子域**   Cookie 很有帮助，但可能会导致不必要的流量，因为它们是随每个有效请求一起发送的。因此，[将 cookie 限制在`www.`子域中](http://developer.yahoo.com/performance/rules.html#cookie%5Ffree)是一个很好的做法。

请参阅[Yahoo! 的网站加速最佳实践，](http://developer.yahoo.com/performance/rules.html)了解更多有用的加速技巧。

# c++ - 指向成员函数继承的 C++ 指针

> ID：645046
> 
> 赞同：7
> 
> 时间：2009-03-14T00:16:49.087
> 
> 标签：c++, function, pointers, callback

我需要能够让一个超类执行由继承自它的类定义的回调。我对 C++ 比较陌生，据我所知，成员函数指针的主题似乎是一个非常模糊的领域。

我已经看到了问题的答案和讨论各种事情的随机博客文章，但我不确定他们中是否有任何人在这里专门处理我的问题。

这是一个简单的代码块，说明了我正在尝试做的事情。该示例可能没有多大意义，但它准确地类似于我正在尝试编写的代码。

```
class A {
    protected:
    void doSomething(void (A::*someCallback)(int a)) {
        (*this.*someCallback)(1234);
    }
};

class B : public A {
    public:
    void runDoIt() { doSomething(&B::doIt); }
    void runDoSomethingElse() { doSomething(&B::doSomethingElse); }
    protected:
    void doIt(int foo) {
        cout << "Do It! [" << foo << "]\n";
    }
    void doSomethingElse(int foo) {
        cout << "Do Something Else! [" << foo << "]\n";
    }
};

int main(int argc, char *argv[]) {
    B b;
    b.runDoIt();
    b.runDoSomethingElse();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-14T01:54:45.093

问题是 的成员函数`B`不是 的成员函数`A`，即使`B`派生自`A`。如果您有`void (A::*)()`，则可以在 any 上调用它`A *`，而不管指向的对象的实际派生类型如何。

（当然，同样的原则也适用于 a `A &`。）

假设`B`派生自`A`，并`C`派生自`A`；如果可以将 a `void (B::*)()`(say) 视为 a `void (A::*)()`，则可以执行以下操作：

```
A *c=new C;
A *b=new B;
void (A::*f)()=&B::fn;//fn is not defined in A
(c->*f)(); 
```

的成员函数`B`将在类型的对象上调用`C`。结果充其量是不可预测的。

基于示例代码，并假设不使用 boost 之类的东西，我倾向于将回调构造为一个对象：

```
class Callback {
public:
    virtual ~Callback() {
    }

    virtual Do(int a)=0;
}; 
```

然后调用回调的函数以某种方式获取这些对象之一，而不是普通的函数指针：

```
class A {
protected:
    void doSomething(Callback *c) {
        c->Do(1234);
    }
}; 
```

然后，您可以为每个您有兴趣调用的派生函数设置一个回调。以 doIt 为例：

```
class B:public A {
public:
    void runDoIt() {
        DoItCallback cb(this);
        this->doSomething(&cb);
    }
protected:
    void doIt(int foo) {
        // whatever
    }
private:
    class DoItCallback:public Callback {
    public:
        DoItCallback(B *b):b_(b) {}

        void Do(int a) {
            b_->doIt(a);
        }
    private:
        B *b_;
    };
}; 
```

减少样板文件的一个明显方法是将成员函数指针放入回调中，因为派生的回调可以自由地处理特定类型的对象。这将使回调更通用一点，因为当回调时，它将调用 B 类型对象上的任意成员函数：

```
class BCallback:public Callback {
public:
    BCallback(B *obj,void (B::*fn)(int)):obj_(obj),fn_(fn) {}

    void Do(int a) {
        (obj_->*fn_)(a);
    }
private:
    B *obj_;
    void (B::*fn_)(int);
}; 
```

这将使 doIt 像这样：

```
void B::runDoIt() {
    BCallback cb(this,&B::doIt);
    this->doSomething(&cb);
} 
```

这可能会被“改进”，尽管并非所有读者都可以通过以下方式看到它：

```
template<class T>
class GenericCallback:public Callback {
public:
    GenericCallback(T *obj,void (T::*fn)(int)):obj_(obj),fn_(fn) {}

    void Do(int a) {
        (obj_->*fn_)(a);
    }
private:
    T *obj_;
    void (T::*fn_)(int);
}; 
```

使用它，上面的 runDoIt 函数可以变成：

```
void B::runDoIt() {
    GenericCallback<B> cb(this,&B::doIt);
    this->doSomething(&cb);
} 
```

（通用回调也可以在成员函数指针本身上进行模板化，尽管在大多数情况下这不太可能提供任何实际优势。它只是更多的输入。）

我发现以这种方式构建事物效果很好，因为它不需要继承。因此，它对要回调的代码几乎没有限制，这在我看来总是一件好事，而且我发现这超过了难以完全消除的冗长。不可能根据示例来判断这种方法是否真的适合，但是......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-14T00:26:01.467

如果您可以使用 boost 库，我建议您使用 boost::function 来完成手头的任务。

```
class A {
public:
   void doSomething( boost::function< void ( int ) > callback )
   {
      callback( 5 );
   }
}; 
```

然后任何继承（或外部类）都可以使用 boost::bind 进行调用：

```
class B {
public:
   void my_method( int a );
};
void test()
{
   B b;
   A a;
   a.doSomething( boost::bind( &B::my_method, &b, _1 ) );
}; 
```

我没有检查确切的语法，而是从头顶输入了它，但这至少接近正确的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T00:37:59.210

为了您的目的，C++ 提供了比成员函数指针更好的构造。（一般来说，您不必在正确编写的纯 C++ 中使用函数指针）。我的脑海中有两个选择：

1) 在 A 上创建一个名为 doIt() 的纯虚函数。从 doSomething() 调用 doIt()。在 B 上，保留一个枚举成员变量来指示您想要做什么，并在调用 doSomething() 之前设置它。覆盖 B 中的 doIt()，其实现将成员枚举切换/封装到您希望运行的底层代码。

2) 使用单个 doIt() 纯虚方法创建一个 DoInterface 类。为您的 Class B 创建它的派生类，它有一个指向拥有 B 实例的指针，并在您的每个 DoInterface 实现中实现 doIt() 调用 B 上的适当函数。doSomething() 将 DoInterface 的实例作为参数。这称为回调对象模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T00:34:18.280

您试图将派生类中定义的方法调用为方法基类。
但是这个函数没有在基类中定义。

# c# - 每次触发事件时，如何将 C# 变量值注册到 Javascript 变量

> ID：645056
> 
> 赞同：2
> 
> 时间：2009-03-14T00:24:16.870
> 
> 标签：c#, asp.net, javascript

我在 .aspx 页面的 C# 代码隐藏中有一个事件处理程序。每次触发此事件处理程序时，我都希望它更新 Javascript 变量。我以为我可以做这样的事情。

```
int scale = (int)myObject.Scale;
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "JSVariables", "scale=" + scale, true); 
```

然而，正如前面向我指出的那样[，](https://stackoverflow.com/questions/644874/why-does-this-javascript-variable-im-creating-via-c-only-get-updated-once) RegisterClientScript 首先检查脚本是否已注册，如果已注册，则不执行任何操作。本质上，变量会更新一次，然后再也不更新。

是否可以不断更新此值？

我真正能用 Ajax 做的最多就是拥有一个静态 Web 方法。出于一些无需在此解释的原因，我不能使用 WCF 或 Web 服务，而静态 Web 方法的问题在于静态位。

还有其他方法吗？

我在想也许是一些会话技巧，但我还不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T00:30:37.027

退后一步，重新审视你真正想做的事情，看看是否有另一种方法来完成它，这可能是个好主意。例如，首先触发事件处理程序的原因是什么。如果浏览器/javascript 中发生的某些操作可能会导致事件处理程序触发，那么每当该操作发生时启动 HttpRequest 并查看服务器端变量是否已更改可能会更容易。

# c++ - 具有多个文件夹的 Visual Studio 项目

> ID：645062
> 
> 赞同：25
> 
> 时间：2009-03-14T00:32:41.500
> 
> 标签：c++, visual-studio, visual-studio-2008, directory

是否有一种简单的方法可以在 Visual Studio 项目中使用多个文件夹？它具有看起来像文件夹的“过滤器”，但是能够在 VS 中创建文件夹并将文件插入其中会非常好。是否有启用此行为的加载项或秘密选项？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-03-14T00:48:22.867

使用 VC++，文件夹不直接对应于文件系统上的内容。它们只是用来帮助您以独立的方式组织您的项目。

他们做出这个设计决定的原因是因为使用 C++ 你通常有许多包含和源目录。

**更多关于过滤器：**

在“解决方案资源管理器”窗口的顶部，您将看到一个工具栏按钮，将鼠标悬停在上面时会显示“显示所有文件”。如果按下此按钮，它不会向您显示文件夹/过滤器结构。如果未按下此按钮，则会显示文件夹/过滤器结构。

要添加新文件夹/过滤器，请右键单击解决方案的项目并选择添加 -> 新过滤器。

请注意，对于您创建的每个文件夹/过滤器，您可以进入文件夹/过滤器属性并设置以下内容：

*   解析文件：是否解析该文件夹中的文件自动补全
*   SCC 文件：此文件夹中的文件是否应考虑进行源代码控制
*   过滤器：指定此文件夹默认保存的文件类型。

# c# - 为什么通过 OleDb 在 Access 数据库中调用我的 UPDATE 查询不起作用？

> ID：645063
> 
> 赞同：3
> 
> 时间：2009-03-14T00:32:54.947
> 
> 标签：c#, sql, ms-access, oledb

**更新 2：我解决了这个问题，请参阅我的答案。**

* * *

我正在使用 OleDb 从 C# 调用 Microsoft Access 数据库中的查询，但我的更新查询无法正常工作。

不会引发错误，但更新不会持久保存在数据库中。

任何人都可以对此有所了解吗？

* * *

**数据库中的SQL查询：**

```
UPDATE tableName SET tableName.LastPolledDtg = LastPolledDtg
WHERE tableName.key = ID; 
```

**C＃：**

```
OleDbCommand command = new OleDbCommand();
SetCommandType(command, CommandType.StoredProcedure, "NameOfQueryInAccessDatabase");
AddParamToSQLCmd(command, "@ID", OleDbType.Integer, 4, ParameterDirection.Input, id);
AddParamToSQLCmd(command, "@LastPolledDtg", OleDbType.Date, 4, ParameterDirection.Input, DateTime.Now);
using (OleDbConnection connection = new OleDbConnection("connectionString"))
{
command.Connection = connection;
connection.Open();
result = command.ExecuteNonQuery();
} 
```

**连接字符串：**

```
"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\Documents and Settings\\Administrator\\Desktop\\dev\\src\\Website\\App_Data\\tracking.mdb" 
```

* * *

**更新1：**

我试图通过创建一个包含单个表和单个查询的新数据库来缩小可能性，并确保在运行 C# 更新表时关闭访问。

更新仍未执行。我怀疑这是语法问题（也可能是权限问题？），但是如果没有任何错误消息，很难调试！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T11:16:01.937

刚刚解决了这个问题 - 它是参数的命名 - 似乎您不能将查询中的参数命名为与任何字段相同。

从以下位置更改查询：

```
UPDATE tableName SET tableName.LastPolledDtg = LastPolledDtg
WHERE tableName.key = ID; 
```

到：

```
UPDATE tableName SET tableName.LastPolledDtg = LastPolledDtgArg
WHERE tableName.key = ID; 
```

...并使用参数名称更改更新调用 C# 使其写入数据库。

**但是，还有一个小麻烦：**将 C# 中的参数顺序保留原样，导致数据库中的 LastPolledDtg 字段更新为最小日期（1899 年或其他时间）。重新排序将参数添加到 OleDbCommand 以匹配它们在 SQL 中的出现修复了此问题。

所以 C# 应该是这样的：

```
OleDbCommand command = new OleDbCommand();
SetCommandType(command, CommandType.StoredProcedure, "NameOfQueryInAccessDatabase");
AddParamToSQLCmd(command, "@LastPolledDtgArg", OleDbType.Date, 4, ParameterDirection.Input, DateTime.Now);
AddParamToSQLCmd(command, "@ID", OleDbType.Integer, 4, ParameterDirection.Input, id);
using (OleDbConnection connection = new OleDbConnection("connectionString"))
{
command.Connection = connection;
connection.Open();
result = command.ExecuteNonQuery();
} 
```

我爱访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T10:36:47.257

您的更新查询有点令人困惑（您将`LastPolledDtg`其用作字段*和*值）。如果您的意思是定义列的参数，那么它将不起作用。

否则，请尝试使用以下`PARAMETER`语法在 Access 中重写您的查询，例如：

```
PARAMETERS LastPolledDtgArg Text ( 255 ), ID Long;
UPDATE tableName SET tableName.LastPolledDtg = [LastPolledDtgArg]
WHERE tableName.key = [ID]; 
```

如果这不起作用，请尝试直接从 C# 使用 SQL 进行查询，而不是尝试执行存储的查询。

**别的东西**

重新排序您的参数，以便它们以与在 Query 中定义的顺序相同的顺序传递，以便您传递`LastPolledDtArg`before的值`ID`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T11:34:54.047

在 ms-access 中，**参数的顺序必须与 SQL 语句的顺序相同**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T00:39:35.820

我不是 Access 编码器，但听起来可能正在使用隐式事务。这意味着当您执行数据修改命令时，会自动打开一个事务，该事务必须在您的代码中显式提交/回滚。

无论是那个还是由于某种原因，您的更新都不会影响任何行。

# open-source - 将开源项目转变为非营利组织？

> ID：645067
> 
> 赞同：2
> 
> 时间：2009-03-14T00:34:32.803
> 
> 标签：open-source

一些最伟大和最成功的开源项目只是通过首先成为一个非营利组织/基金会才开始变得更容易获得财务/经济杠杆（即合同工作）。

*开源项目成为非营利组织通常*需要哪些必要的设置步骤，先决条件是什么，以及该过程中的潜在陷阱 - 以及管理负担，一旦您真正成为非营利组织？

值得麻烦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T00:41:05.457

这是相当多的工作。如果项目足够大，它可能是值得的。

我建议[阅读有关该主题的内容](http://www.nolo.com/encyclopedia/articles/sb/creating_np.html)。成立非营利组织（在美国）很像成立公司，但控制较少。您需要跳过许多障碍，主要的好处是税收状况。

但是，如果您获得足够的捐款，那可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T00:42:32.333

查看[软件自由法表演，第 0x00 集，](http://www.softwarefreedom.org/podcast/2008/nov/11/0x00-intro/)从 9:00 开始。我希望他们有成绩单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T00:48:44.597

一个非营利组织至少需要 3 人组成董事会。图、律师或会计师、工程师和经理/前台人员组成了一个好的创业团队。实际上，在董事会层面，每个人都应该（理想情况下）了解业务的所有 3 个（或 5 个）方面。此外，这三个人需要相处得足够好，专注于业务的发展，而不是陷入自我斗争、小便比赛和琐事。在某些方面，你与商业伙伴的关系比你的婚姻/SO/gf 更复杂（也更重要）。真的！由于在繁忙的业务中，您可能会花更多的时间与您的合作伙伴在一起，而不是您的合作伙伴。

因此，非营利组织是一项业务，如果将其视为一种爱好，它就会失败。如果你有一个引人注目的产品、一个优秀的团队、正确的推销（无论是对客户还是捐赠者/资助者，它仍然是一个推销），以及足够的时间，你可能会获得很多乐趣并取得成功。

享受！

# c# - 将 DataList 绑定到字典

> ID：645074
> 
> 赞同：1
> 
> 时间：2009-03-14T00:37:35.560
> 
> 标签：c#, asp.net

我有一个要绑定到 DataList 的字典。但我也想为 DataList 的 DataKeyField 属性使用 Dictionary 的 Key 值。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T04:48:23.910

是的。使用 "Key" 作为 DataKeyField：

```
<asp:DataList ID="datalist" runat="server" DataKeyField="Key">
    <ItemTemplate>
        <asp:Label runat="server" Text='<%# Eval("Value") %>'></asp:Label>
    </ItemTemplate>
</asp:DataList> 
```

代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Dictionary<string, string> dictionary = new Dictionary<string, string>()
    {
        {"a", "aaa"},
        {"b", "bbb"},
        {"c", "ccc"}
    };
    datalist.DataSource = dictionary;
    datalist.DataBind();

    for (int i = 0; i < datalist.Items.Count; i++)
    {
        Response.Write(string.Format("datalist.DataKeys[{0}] = {1}<br />", i, datalist.DataKeys[i]));
    }
} 
```

# programming-languages - 尝试让编程语言做一些不该做的事情是个好主意吗？

> ID：645078
> 
> 赞同：2
> 
> 时间：2009-03-14T00:39:48.360
> 
> 标签：programming-languages

例如，只是为了好玩，我正在考虑拥有一个我的所有 JavaScript 文件都可以通过的 PHP 脚本；现在，这与作为正则表达式的可爱的小虫子相结合，导致了整个世界的可能性（无论好坏）。目前，我只是让 JavaScript 在结构上是 Pythonic，如下所示：

一个简单的函数，它接受一个参数并在它是 2 和/或 3 的倍数时显示数字：

```
<script>
function show_mults_23(k):
    for (x = 0; x < k; x++):
        if (x % 2 == 0):
            document.body.innerHTML += x;
            document.body.innerHTML += ' is a multiple of 2.<br/ >';
        if (x % 3 == 0):
            document.body.innerHTML += x;
            document.body.innerHTML += ' is a multiple of 3.<br />';
</script> 
```

很朴实吧？; p

不过，说真的，我很好奇这样的概念是否曾经在开发环境中实现过。速度明显下降了很多，但除此之外，这样的想法还有依据吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-14T00:45:08.303

对那些必须跟随你而不这样做的维护程序员表现出一些仁慈。为了修复错误，他们不仅需要了解 Javascript 和 PHP，还需要了解您创建的这个邪恶的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-14T00:45:10.500

总的来说，我会说这是一个非常好的主意，也是一个非常糟糕的主意。

做这样有趣的技巧有助于更好地理解这两种语言及其工作方式。它可以很有趣，并且是一次很棒的学习体验。

另一方面，我会极力避免为生产中的任何事情这样做。您编写的代码对除您之外的任何人都没有意义，并且可能会很慢，容易出错等。

然而，有时我不得不为“真正的”工作拼凑一些可怕的东西，而玩这样的游戏帮助我弄清楚如何解决我的环境/语言/图书馆/等中一些据说非常严格的限制.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T00:56:13.750

[GWT](http://code.google.com/webtoolkit/)是类似的东西。它将 Java 代码编译成 javascript，虽然它功能更强大，并且有更多的细节，比如 IDE 支持、背后的大型社区等等......

编写自己的编译为 javascript 的语言听起来是一个有趣的项目。不过，就我个人而言，我不想用一种由一个人开发和维护的语言进行开发，并且除了语法糖之外没有任何理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-09-21T22:58:31.853

也许这个问题的标题应该是“您是否应该假装您使用与您实际编码的语言不同的语言进行编码”，而我的回答是“绝对不是”。

在您的示例中，您正在发明一种具有与 javascript 相同功能的新语言，只是您是唯一知道它的人。它的唯一目的是告诉读者你更喜欢 Python 的结构而不是 Javascript 的结构。我不想学习一门新语言只是为了表达这种观点。

[使用宏使 C 看起来像 Pascal](http://bytes.com/topic/c/answers/219683-pros-cons-define-begin)是另一个例子，出于同样的原因被嘲笑。

一种较温和的形式（也是我最讨厌的一种）是使用空格来歪曲语法，通常在 C 中，如：

```
int* p; 
```

（您假装与 相比`*`更紧密地绑定`int`到`p`，与解析器看到它的方式相反。）

# algorithm - 如何找到空闲区域的矩形？

> ID：645089
> 
> 赞同：1
> 
> 时间：2009-03-14T00:44:33.357
> 
> 标签：algorithm, tcl, area

任何人都可以帮助我如何在具有 n 个矩形障碍物的边界框区域中为空间绘制矩形吗？可能有任意数量的轴平行矩形障碍物，这不是一个独特的情况，因此需要考虑不同的极端情况。最好使用最大水平条算法吗？如何？

问题描述：

1.SUB1和SUB2是障碍物，你不会触及SUB1和SUB2的内部，你需要找到所有SUB外部的所有空闲区域，并从中创建矩形。

2.您将需要在空闲区域矩形上找到所有可能的矩形，并相应地从左到右扫过而不与SUB相交；

在这种情况下，最大水平空间矩形的总数应该是 7，或者通常是 3n+2（其中 n 是障碍物的数量）： [alt text http://img25.imageshack.us/img25/452/pic1gts.png](http://img25.imageshack.us/img25/452/pic1gts.png)

[替代文字 http://img22.imageshack.us/img22/3417/pic2h.png](http://img22.imageshack.us/img22/3417/pic2h.png)

[替代文字 http://img16.imageshack.us/img16/5818/pic3h.png](http://img16.imageshack.us/img16/5818/pic3h.png)

[替代文字 http://img13.imageshack.us/img13/2151/pic4.png](http://img13.imageshack.us/img13/2151/pic4.png)

点击查看图片： http: [//img25.imageshack.us/img25/452/pic1gts.png](http://img25.imageshack.us/img25/452/pic1gts.png) [http://img22.imageshack.us/img22/3417/pic2h.png](http://img22.imageshack.us/img22/3417/pic2h.png) [http://img16.imageshack.us/img16 /5818/pic3h.png](http://img16.imageshack.us/img16/5818/pic3h.png) [http://img13.imageshack.us/img13/2151/pic4.png](http://img13.imageshack.us/img13/2151/pic4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T01:44:03.887

您是在寻找最简单的算法，还是寻找最优最少分割矩形的算法？

从最容易编码的算法开始作为基线，这对于许多应用程序本身来说可能已经足够好了。这很容易编写和理解。

初始化您的矩形列表以仅包含一个，即屏幕矩形。

现在，对于每个障碍物，遍历矩形列表。如果矩形与障碍物相交，则从列表中删除矩形并插入新的、较小的矩形以避开障碍物。这是一个小子问题，只需查看障碍物的哪一部分与矩形相交即可轻松解决。您最终可能会得到 0、1、2、3 或 4 个新的子矩形。（考虑障碍物相交一个角、两个角、所有角、无角无边、无角和1条边、无角和2条边的六种情况。）

对所有障碍物重复此操作，您将得到一个分割矩形列表，这些矩形覆盖您的区域而不会碰到障碍物。它不是最好的少数，但它是一个很好的起点和 10 分钟的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T02:04:23.837

是的，我正在寻找最少的分割矩形。

我想对你的建议做一点澄清。“初始化您的矩形列表以仅包含一个，即屏幕矩形”。

屏幕矩形是指外部边界画布吗？然后，矩形列表中只有一个矩形。

“现在，对于每个障碍物，遍历矩形列表。如果矩形与障碍物相交，则从列表中删除矩形并插入新的、较小的矩形以避开障碍物。”

要继续进行上述操作，我是否应该根据障碍物的每个共线边缘（4 个边缘 - 左、右、上、下）进行比较？这意味着检查 4 个角点处的每个 SUB1 和 SUB2 边缘以查看它是否与彼此相交或与画布边界框相交。这是正确的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T03:39:05.217

角拼接数据结构可以为您做到这一点。不过，我不知道任何开源实现。最初的或至少是规范的论文是 Ousterhout（Tcl 成名）： [http ://www.eecs.berkeley.edu/Pubs/TechRpts/1983/6352.html](http://www.eecs.berkeley.edu/Pubs/TechRpts/1983/6352.html)

# sql - SQL - 在给定特定 WHERE 子句的情况下查找下一行和上一行

> ID：645102
> 
> 赞同：9
> 
> 时间：2009-03-14T00:50:46.197
> 
> 标签：sql, mysql

我有一个 bbPress 论坛使用的名为 bb_posts 的 MySQL 表。它有一个名为 topid_id 的自动增量字段和另一个名为 topic_poster 的字段。

我正在尝试编写一个函数来查找“同一作者的下一篇文章”。因此，例如，假设用户在显示主题 123 的特定页面上。如果您执行 SQL 查询：

```
SELECT *
FROM `bb_topics`
WHERE `topic_poster` = 5
ORDER BY `topic_id` ASC 
```

这可能会返回以下行：

```
topic_id 主题海报
6 5
50 5
123 5
199 5
2039 5

```

我想做的是编写一个返回这两行的 SQL 查询：

```
topic_id 主题海报
50 5
199 5

```

这将是 topic_id 为 123 的行之前的行，以及该行之后的行。

如果在一个查询中执行此操作太难，则将其分解为两个查询绝对可以...

我想避免执行整个 SQL 查询（“SELECT * FROM `bb_topics`WHERE `topic_poster`= 5”）并循环遍历结果，因为结果集有时很大。

这可能吗？:-)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-14T00:59:17.987

下一个：

```
SELECT * FROM `bb_topics` 
      WHERE `topic_id` = 
      (select min(`topic_id`) FROM `bb_topics` where `topic_id` > 123
         and `topic_poster` = 5) 
```

前一个：

```
SELECT * FROM `bb_topics` 
      WHERE `topic_id` = 
      (select max(`topic_id`) FROM `bb_topics` where `topic_id` < 123
         and `topic_poster` = 5) 
```

两个都：

```
SELECT * FROM `bb_topics` 
      WHERE `topic_id` = 
      (select min(`topic_id`) FROM `bb_topics` where `topic_id` > 123
                     and `topic_poster` = 5)
      or `topic_id` = 
      (select max(`topic_id`) FROM `bb_topics` where `topic_id` < 123
                        and `topic_poster` = 5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T01:59:53.160

看看这个[老问题](https://stackoverflow.com/questions/169233/mysql-conditionally-selecting-next-and-previous-rows)。

我的猜测是 LIMIT 1 的 UNION 比我在此处回答中的聚合表现更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T00:57:01.597

**注意：**在投反对票之前，请阅读评论和问题的第一版;-)

根据定义**，RDBMS 表上的数据是无序的**。这意味着当您运行查询时，如果您不指定 ORDER BY 子句，则一个查询的顺序可能与另一个查询不同。此外，您**必须考虑下一个查询将（或至少可能）返回不同的 order**。

假设可能是数据库上的另一个用户插入了一条新记录，并且 RDBMS 考虑将它放在您正在考虑的行之间。或者 DBA 正在在线将表移动到另一个表（例如，这在 Oracle 中是可能的），在这种情况下，可以随时更改数据。

对于您的问题，您必须构建一种*查询结果缓存*来确定查询的前后行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T01:04:50.937

这是完成此任务的一种微妙但有效的方法，它甚至适用于不支持子查询的旧版本的 MySQL——

> > ```
> > SELECT *    
> > FROM bb_topics AS bb1    
> > LEFT JOIN bb_topics AS bb2    
> >     ON bb1.topic_poster = bb2.topic_poster    
> >     AND bb2.topic_id > bb1.topic_id    
> > LEFT JOIN bb_topics AS bb3  
> >     ON bb1.topic_poster = bb3.topic_poster    
> >     AND bb3.topic_id > bb1.topic_id    
> >     AND bb3.topic_id < bb2.topic_id  
> > WHERE bb1.topic_poster = 5  
> >     AND bb3.topic_id IS NULL 
> > ```

这将为您提供下一个相邻的帖子。如果不是不言而喻，我可以为下一篇文章填写对称条款。

编辑 - 次要更正的 alii。

# css - IE中的CSS边框宽度加倍

> ID：645119
> 
> 赞同：1
> 
> 时间：2009-03-14T01:04:06.447
> 
> 标签：css

我的 CSS 样式有问题。

边框宽度在 IE 中翻了一番，但在 Mozilla、Opera、Safari 中，没问题。

这是我的代码：

```
.subPane{
border: #FF33FF thin dashed;
} 
```

'thin' 的宽度是 1px，但在 IE 中查看时，它已经像 2px。

:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T01:06:03.713

试试这个 ：

```
.subPane{
border: 1px dashed #FF33FF;
} 
```

[http://www.w3.org/TR/CSS2/box.html#propdef-border](http://www.w3.org/TR/CSS2/box.html#propdef-border)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T01:05:35.820

您可能只想将宽度指定为 1px，而不是使用定性标签。这将受到所有浏览器的尊重。

# c# - 哪个更快：SqlCommand.Parameters[string] 或 .Parameters[int]？

> ID：645122
> 
> 赞同：4
> 
> 时间：2009-03-14T01:05:58.533
> 
> 标签：c#, .net, sql, performance, ado.net

首选哪种方式？

```
SqlCommand = new SqlCommand(query);

command.Parameters.Add("@Foo");
command.Parameters[0].Value = Foo;
command.Parameters.Add("@Bar");
command.Parameters[1].Value = Bar;

// or

command.Parameters.Add("@Foo");
command.Parameters.Add("@Bar");
command.Parameters["@Foo"].Value = Foo;
command.Parameters["@Bar"].Value = Bar; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-14T01:10:55.103

另外两个选项：

```
command.Parameters.AddWithValue("@Foo", Foo);

command.Parameters.Add("@Foo").Value = Foo; 
```

此外，我认为它们之间的速度差异不足以让您根据它进行选择；选择对您和您的团队最易读的一个。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-14T01:14:25.423

严格来说，使用 int 重载会更快。原因是底层集合存储为数组并使用整数偏移量。当您调用字符串重载时，它会将参数转换为 int，然后本质上调用 int 重载。

真正的问题是“这重要吗”？除非您可能有数千个参数，否则这不太可能很重要。即使这样，您也无法确认这是一个问题，直到分析器说它是。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-14T01:16:02.893

您不需要创建参数然后添加它们然后填充它们。这将很快变得完全笨拙。

“最佳实践”方法是使用`AddWithValue`：

```
command.Parameters.AddWithValue("@ParamName", Value); 
```

就“速度”而言，这是过早优化的经典案例。当您的整体设计仍然需要大量工作时，您根本不需要关注如此小的速度差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T04:48:32.680

无论速度如何，使用编号参数的问题在于，如果底层存储过程的参数顺序发生更改，您的代码将需要重新编译。

想象一下，proc 是从两段不同的代码中使用的，但是您不知道第二种用法是在参数列表的中间添加一个具有默认值的新参数。由于您使用的是编号参数，因此您刚刚无意中破坏了一些东西。

问题不在于哪个更快。问题是哪个更健壮，因为速度差异可能相对较小，除非您非常努力地打击该存储过程。这可能意味着您需要提出一些解决方案来优化您的系统，而不是寻找这会带来的那种小的优化。

# macos - Mac 上的 Intellij IDEA：重新格式化代码不起作用

> ID：645124
> 
> 赞同：1
> 
> 时间：2009-03-14T01:08:23.753
> 
> 标签：macos, intellij-idea

我似乎无法让“重新格式化代码”在我的 Mac 版本的 Intellij 上工作。我正在使用 30 天试用版。

更新和澄清；

它什么也没做，根本没有重新格式化。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-14T20:10:04.720

对我来说很好。也许您正在使用不支持重新格式化的文件类型。但是为了可用性，在这种情况下应该禁用重新格式化选项。您可以联系 IntelliJ IDEA 团队（并希望获得试用服务）。或者，如果您认为这是一个错误，请[提交报告](http://www.jetbrains.com/support/support.jsp?pr=IDEA&ask=Bug%20Report)或提出[改进请求](http://www.jetbrains.com/support/support.jsp?pr=IDEA&ask=Suggestion)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-25T23:28:07.210

原来我有问题

我有一个包含“源”的目录结构，例如

```
/my/Path/To/**Source**/My/web/Project/Source/ 
```

这让 Intellij 感到困惑，从而阻止它正确读取我的目录结构。正因为如此，我真正的“源”目录没有被识别出来。如果没有将我的 *.java 文件存储在定义的“源”目录中，Intellij 不知道如何格式化我的文件。我错误地认为 Intellij 只需通过文件扩展名就能知道。

# licensing - GeoServer 可以在商业应用程序中使用吗？

> ID：645126
> 
> 赞同：6
> 
> 时间：2009-03-14T01:10:02.033
> 
> 标签：licensing, gis, gpl, geoserver

[GeoServer](http://geoserver.org/display/GEOS/Welcome)在 GPLv2 下获得许可。我知道这意味着我不能从这个应用程序中制作衍生商业作品。例如，我不能将新接口、插件等作为闭源应用程序添加到 GeoServer。

但是，我可以将它用作前端封闭源应用程序的后端服务器吗？一个符合 oGC 的地图服务器，它公开了某些符合 OGC 的接口来使用地图和数据。还有一些其他的 GIS 服务器可以执行此操作，例如 MapServer（免费）和 ArcGIS Server（商业）。

因此，假设我创建了一个闭源 Flex GIS 框架，用于通过符合 OGC 的 Web 服务使用数据。如果我出售此应用程序，并将 GeoServer（未修改）作为安装的一部分（包括适当的许可证）包含在内，我是否违反了 GPL？

如果有的话，我如何在商业闭源应用程序中使用 GeoServer？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T01:22:47.010

我想我在这里找到了答案。

[http://geoserver.org/display/GEOSDOC/Do+I+need+a+proprietary+license+FAQ](http://geoserver.org/display/GEOSDOC/Do+I+need+a+proprietary+license+FAQ)

> 我是使用专有系统访问 GeoServer 的 WFS 和 WMS 的集成商，我需要购买许可证吗？
> 
> 不，GPL 仅在您链接代码时生效。如果您在标准接口后面工作，则无需购买专有许可证。
> 
> 我是使用 GeoServer 和专有数据库的集成商，我需要购买许可证吗？
> 
> 不，GPL 不涵盖您正在集成的数据库。事实上，如果它支持，那么我们将无法让 GeoServer 支持 ArcSDE、Oracle 和 DB2。
> 
> 我使用 GeoServer 的核心模块构建了一个新的 Geo-chicken 服务，但没有使用任何 W*S 服务，我是否必须发布我的代码？
> 
> 目前，您确实必须发布您的代码，或获得专有许可证。但社区正在考虑在 LGPL 许可下发布核心模块的计划。如果您对此类许可协议感兴趣，请与我们联系，因为我们对允许人们在核心之上构建新服务非常感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T01:40:48.200

是的，如果您不出售该应用程序并对其应用 GPL。

如果你卖掉它，你就会遵守很多规则；）

# c++ - Linux中的全局键盘挂钩？

> ID：645129
> 
> 赞同：1
> 
> 时间：2009-03-14T01:11:46.430
> 
> 标签：c++, linux, hook, global

如何在 Ubuntu (Linux) 中编写全局键盘钩子（如 Windows 的 Hook）

在 C/C++ 或 Python 中

# video - Google 视频使用的 mp4 编码？

> ID：645131
> 
> 赞同：1
> 
> 时间：2009-03-14T01:13:57.267
> 
> 标签：video, encoding, mp4, codec

我有一台 HTC Touch HD，从 Google Video 下载的 mp4 视频在视频和音频质量方面都表现最佳。所以我想知道 Google Video 究竟使用哪些设置将视频编码为 mp4，以便我可以将它复制到 Google Video 上不可用的视频。一个读取 mp4 文件并告诉您所有编码信息的工具将是完美的，或者如果您知道描述 Google Video 的 mp4 格式的官方网站，那就更好了。

我正在寻找以下信息：

**视频编码**

*   视频分辨率（例如 480x640）
*   每秒帧数（例如 25 fps）
*   比特率（例如 1Mbit/s）
*   编解码器（例如 H.264）

**音频编码**

*   采样率（例如 44100 Hz）
*   比特率（例如 128Kbit/s）
*   音频通道（例如 2 个）
*   编解码器（例如 AAC）

我希望任何人都可以提供帮助，即使这不一定与编程相关。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-14T01:35:47.557

大多数视频解复用器都可以为您提供此信息。[例如 AVIDemux](http://fixounet.free.fr/avidemux/)、[mplayer](http://www.mplayerhq.hu/)和[VLC](http://www.videolan.org/vlc/)都具有转储视频文件细节的信息模式，包括一些编解码器设置。

# vmware - 在 Windows 2008 虚拟服务器上启用 Hyper-V 角色

> ID：645133
> 
> 赞同：0
> 
> 时间：2009-03-14T01:15:47.667
> 
> 标签：vmware, hyper-v

我有一个运行 Windows 2008 Standard 的 VMware 虚拟机，我想启用 Hyper-V 角色以进行学习，但 VMware 工作站说我的处理器不支持虚拟化功能。

我的开发机器使用支持硬件虚拟化的 Core2Duo E8200。

我必须在 VMware 上进行任何其他设置才能启用此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T02:11:53.117

Hyper-V 是一种硬件虚拟化解决方案，不能在虚拟机上运行。如果要启用 Hyper-V，则需要在具有硬件虚拟化支持的 X64 机器上执行此操作，并在 BIOS 中启用执行禁用位。

并非所有硬件都支持虚拟化，您可以使用 Steve Gibson 的一个小工具来查看您的系统是否支持它：[Securable](http://www.grc.com/securable.htm)

希望这可以帮助。

# security - 将自定义 Asp.net 应用程序部署到与 Sharepoint 相同的 IIS 站点

> ID：645135
> 
> 赞同：2
> 
> 时间：2009-03-14T01:16:20.410
> 
> 标签：security, sharepoint

我正在尝试在与 Sharepoint 相同的站点上设置 Asp.net 应用程序。所以[http://sharepointurl](http://sharepointurl)是 sharepoint 的 url，要访问应用程序，url 将是[http://sharepointurl/MyCustomWebApp/](http://sharepointurl/MyCustomWebApp/)。我已在此级别设置了 IIS 应用程序，但尝试使用 bin 中的自定义 dll 运行应用程序会导致错误

“请求类型为 'Microsoft.SharePoint.Security.SharePointPermission, Microsoft.SharePoint.Security, Version= 的权限12.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c' 失败。”

我试图签署 dll 并将其注册到共享点服务器 GAC，但随后我收到：

“System.Security.SecurityException：该程序集不允许部分受信任的调用者。”

如果我从应用程序 bin 目录中删除 DLL，页面会加载，但我会失去其中需要的功能。

编辑：仅当 Dll 在 bin 中时才会发生错误，它不依赖于 Dll 中的任何一行代码。

IIS 版本 6 Sharepoint：WSS 3.0 Windows Server 2003

更新：我运行了“caspol -machine -addfulltrust（dll 路径）”，它成功了，但我仍然收到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-17T18:10:58.367

我终于解决了这个问题。我认为部分问题是通过尝试人们建议的不同方法来解决的，但最终解决的方法是在 web.config 中添加“<trust level="Full" originUrl=""/>”。对于不知道它的任何人都应该进入 system.web 部分。我还需要添加几个 dll。将 dll 添加到 GAC 有助于但没有解决所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T03:33:19.223

一旦您在 SharePoint 中使用 IIS 网站（在 SharePoint 中称为 Web 应用程序），那么您的 ASP.NET 应用程序就不再只是一个 ASP.NET 应用程序。它是一个 SharePoint 应用程序（当然，SharePoint 在 ASP.NET 上运行）。也就是说，除非您在 web.config 中四处挖掘以撤消 SharePoint 为您的特定虚拟目录放置的许多 http 处理程序。

但是，将 ASP.NET 应用程序移动到在 SharePoint 中运行并没有本质上的错误。将您的程序集/程序集放入 GAC 可能会有所帮助，但看起来这对您来说失败了。您的程序集是否可以引用 GAC 中没有的其他程序集？那可能是你的问题。

如果您的程序集不在 GAC 中，则可以在 SharePoint 内的 ASP.NET 页面和 Web 部件中使用它（但不能用于工作流、事件处理程序、自定义字段、功能接收器等）。但是，这有点痛苦，因为您可能需要设置代码访问安全 (CAS)，这不是一个简单的过程。我不确定 SPContext.Current.Web.CurrentUser.LoginName 是否需要 CAS 策略，并且我倾向于仅将其用于 Web 部件而不是 ASP.NET 页面。使用 SharePoint 快速搜索 CAS 让我来到这里：[http](http://blog.thekid.me.uk/archive/2007/02/17/code-access-security-cas-and-sharepoint.aspx) ://blog.thekid.me.uk/archive/2007/02/17/code-access-security-cas-and-sharepoint.aspx这看起来是一个好的开始如果你真的想深入研究 CAS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T15:43:43.707

是的，caspol.exe 是您在这里获得幸福的关键。请参阅[使用代码访问安全策略工具配置安全策略](http://msdn.microsoft.com/en-us/library/a0ke3k86.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T01:36:45.987

将排除托管路径添加到 SharePoint 中，这样它就不会尝试“干扰”您的自定义 Web 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T19:15:21.060

它涉及 .NET 安全性。有两种方法可以解决此问题，并且都涉及将“完全信任”添加到您的 SharePoint 网站。原因是 SharePoint 和您的应用程序无权访问彼此的资源。

1.  **手动方式**：在您的 IIS 网站文件夹（通常为“wwwroot”）根目录下的 machine.config 或 web.config 文件中添加“完全信任”。这可能不是一个好主意，因为它会为您与 SharePoint 并行运行的每个 ASP.NET 应用程序提供完全信任。这是一个短期的、严厉的修复，类似于使用管理员访问解决所有代码安全问题。

2.  **自动化方式**：针对您的应用程序 DLL 运行 caspol（代码访问安全策略工具）。这有点棘手，因为它要求您对多个文件夹和 DLL 执行相同的操作。但这是完成你想做的事情的最安全的方法。

# java - 使用隐式 Graphics 参数调用 Java 方法，例如 repaint() 或访问 JPanel 中的 Graphics

> ID：645137
> 
> 赞同：0
> 
> 时间：2009-03-14T01:18:38.050
> 
> 标签：java, graphics

例如，当您调用 repaint() 时，会调用 repaintComponent(Graphics)，然后您可以从类外部调用它而无需参数 Graphics。

我想要一个函数，它接受更多我正在使用的参数，但我仍然希望能够用它进行绘制，所以我需要能够进行这样的调用（例如 repaint() 调用 repaintComponent(Graphics )) 或访问 Graphics 以调用该函数，假设无论如何都会通过显式调用 repaintComponent() 来重新绘制它。

我一直在考虑将数据放入对象中然后进行绘制，但我不确定它是否有效，而且我认为它会非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T21:19:21.060

您不能对 GUI 进行任何组件绘制，除非且仅在处理 O/S 绘制事件时才会触发事件调度线程上的 Java 绘制事件。Repaint 不会调用 paint() 或它的任何派生词——它会请求对组件的某个区域进行重新绘制，并会触发一个绘制事件。

您需要以某种方式设置您需要在组件中绘制的信息，无论是通过设置属性（例如 Swing）还是子类化并将设置器添加到子类化组件中。将数据放入对象后，将该对象设置到组件中应该是微不足道的。

您还可以使用paint(Graphics) 方法创建一个单独的对象，将该对象与您的组件相关联，然后从对象paint 中调用它的绘画方法——我过去这样做是为了将绘画问题分离到大量的对象。

# c# - C#，StringToEnum，我可以把它变成一个通用函数吗

> ID：645144
> 
> 赞同：4
> 
> 时间：2009-03-14T01:32:35.160
> 
> 标签：c#

我想要一个简单的帮助方法将字符串转换为枚举。类似于以下内容，但它不喜欢将 T 作为 Enum.Parse 中的第一个参数。错误是 T 是类型参数，但用作变量。

```
public static T StringToEnum<T>(String value)
        {
            return (T) Enum.Parse(T,value,true) ;
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T01:34:34.470

试试这个：

```
public static T StringToEnum<T>(String value)
{
     return (T)Enum.Parse(typeof(T), value, true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T01:37:04.417

```
public static T StringToEnum<T>(String value)
{
    return (T) Enum.Parse(typeof(T),value,true) ;
} 
```

您所做的就像使用“int”作为类型，但它不是类型对象。要获取 Type 对象，您将使用 typeof(int)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T02:45:44.783

这是我使用的方法扩展。

```
/// <summary>
/// Will parse and string value and return the Enum given.  Case is ignored when doing the parse.
/// </summary>
/// <param name="typeOfEnum">The type of the Enum to Parse</param>
/// <param name="value">The string value for the result of the Enum</param>
/// <param name="errorValue">If an error is encountered this value is returned.  (For example could be an Enum)</param>
/// <returns>Returns Enum Object</returns>
public static T ToEnum<T>(this string value)
{
    return (T)Enum.Parse(typeof(T), value, true);
} 
```

# database - 用于 ORM 验证的大型/复杂数据集？

> ID：645156
> 
> 赞同：0
> 
> 时间：2009-03-14T01:42:41.317
> 
> 标签：database, orm, data-modeling

我正在寻找免费提供的示例数据来进行一些 ORM 验证和性能测试。我的主要要求是：

*   区分类型：需要包含某种继承，例如Party -> Person and Organisation；
*   合理复杂的数据模型；
*   一些相当大的表（至少在数十万行中）；
*   多平台：至少有 Oracle、MySQL 和 SQL Server；
*   容易理解。例如，CRM 应用程序就是我所说的易于理解的东西。人们了解客户、客户等等。

谁能指出我这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T01:58:38.623

SQL Server AdventureWorks 数据库符合您的大多数条件。它有[大约 69 个表](http://msdn.microsoft.com/en-us/library/ms124438.aspx)和大量数据。它[带有脚本](http://msdn.microsoft.com/en-us/library/ms143758.aspx)，因此通过一些编辑可以使其与 Oracle 和 MySQL 一起使用。有[业务场景](http://msdn.microsoft.com/en-us/library/ms124825.aspx)和用例。

但不确定它是否具有区分类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T01:59:28.513

你想达到什么目的？

*   “ORM 验证”这可能意味着什么？它完全有效吗？它能解决你的问题吗？这个复杂的模型将如何帮助您确定 ORM 是否能解决您的问题？

*   “性能测试”。这有一定的意义。

为什么不直接设计应用程序的模型？为什么不看看 ORM 对于您的特定应用程序是否具有足够的性能？

* * *

**编辑**

看来您有一个 iBatis ORM 模型；关于 pBatis，您想了解什么？你的选择是什么？

*   有用？移植您的模型。

*   它有性能吗？移植模型和数据中性能最差的部分并使用它。

其结果是 pBatis 适用性的无可争辩的证据。任何其他基准都只是一个基准——并且值得商榷。

# c++ - #include 指令：相对于哪里？

> ID：645165
> 
> 赞同：48
> 
> 时间：2009-03-14T01:47:28.887
> 
> 标签：c++, include, c-preprocessor

我查看了*The C++ Programming Language*试图找到这个问题的答案。当我`#include "my_dir/my_header.hpp"`在标题中时，它在哪里寻找这个文件？它是相对于标题，相对于包含它的源文件还是其他什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-14T01:55:02.503

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-14T01:55:10.850

它相对于当前源文件和给定的任何搜索路径（-I 表示 gcc）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-14T02:02:25.760

这取决于您在 #include 指令中使用的语法：

```
#include "path-spec"
#include <path-spec> 
```

引用形式：此形式指示预处理器在包含#include 语句的文件的同一目录中查找包含文件，然后在包含（#include）该文件的任何文件的目录中查找。然后预处理器沿着 /I 编译器选项指定的路径搜索，然后沿着 INCLUDE 环境变量指定的路径搜索。

尖括号形式：这种形式指示预处理器首先沿着 /I 编译器选项指定的路径搜索包含文件，然后在从命令行编译时，沿着 INCLUDE 环境变量指定的路径搜索包含文件。

path-spec 是一个文件名，前面有一个目录规范。文件名必须命名现有文件。path-spec 的语法取决于编译程序的操作系统。

此信息应在您的特定 C++ 预处理器参考的文档中，以上内容来自[MSDN 上的这篇文章，](http://msdn.microsoft.com/en-us/library/36k2cdd4(VS.80).aspx)其中有更多关于该主题的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-14T01:55:41.393

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T02:35:41.250

其实现已定义。文件（例如 foo.h）上的那些 #include"my_dir/xxy.hpp" 与文件相关（foo.h 和 my_dir 在目录层次结构中处于同一级别）。对于某些（大多数？）编译器，您可以使用标志来使用这些 < > (#include

我知道 gcc / g++ 提供了 -I 标志。因此，您可以使用 g++ -I /home [...] 指示 xxy.hpp 文件位于 /home/my_dir/ 目录中。我有一段时间没有使用任何其他 C/C++ 编译器了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-10-25T12:28:04.423

对于 GCC 版本 <= 3.0，尖括号形式不会在包含文件和包含文件之间生成依赖关系。因此，如果您希望您的 makefile 自动生成依赖项，则必须对应包含在依赖项树中的文件使用带引号的形式。

# c++ - 如何编写适用于 32 位和 64 位的 std::bitset 模板

> ID：645168
> 
> 赞同：10
> 
> 时间：2009-03-14T01:49:00.410
> 
> 标签：c++, templates, 64-bit, bitsets

考虑以下代码

```
template<unsigned int N> void foo(std::bitset<N> bs)
{ /* whatever */ }

int main()
{
    bitset<8> bar;
    foo(bar);
    return 0;
} 
```

g++ 在 64 位上抱怨这一点，因为 <8> 被解释为无符号长整数，它与模板不完全匹配。如果我将模板更改为 unsigned long int，则 32 位编译会抱怨。

显然，解决此问题的一种方法是将 bitset<8> 更改为 bitset<8ul>，但是有没有办法重新编写*模板*部分，以便它可以与数字文字的默认解释一起使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T03:21:11.483

问题不在于你是否写`8u`或`8`。问题与函数模板的模板参数类型有关。它的类型必须与声明中使用的类型相匹配`std::bitset`。这是`size_t`根据标准（部分`23.3.5`）

```
namespace std {
    template<size_t N> class bitset {
    public:
    // bit reference:
        ... 
```

数组维度是个例外，您可以使用任何整数类型（当然`bool`，唯一可以接受的大小是`1`）：

```
// better size_t (non-negative), but other types work too
template<int N> void f(char(&)[N]); 
```

但在其他情况下，类型必须匹配。请注意，这仅适用于自动推导的模板参数，但不适用于显式给定的参数。原因是对于推导的，编译器试图找出实际模板参数和它从调用中推导出的内容之间的最佳匹配。然后不允许许多其他隐式转换。如果您明确提出论点，则可以进行全部转换（忽略使用`size_t`now 来说明我的观点的解决方案）

```
template<int N> void foo(std::bitset<N> bs)
{ /* whatever */ }

int main() {
    bitset<8> bar;
    foo<8>(bar); // no deduction, but full range of conversions
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T02:23:49.453

使用`size_t`. 至少 MSDN 这么说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T02:09:15.900

无论平台如何，数字文字都应解释为 int

# javascript - 剪贴板管理与网站

> ID：645182
> 
> 赞同：2
> 
> 时间：2009-03-14T02:00:28.230
> 
> 标签：javascript, html, flash, clipboard, copy-paste

我想知道如何像一些流行的网站一样将文本放入剪贴板。我见过像 www.photobucket.com 和 www.hulu.com 这样的网站以某种方式自动复制到剪贴板并跨浏览器。我该怎么做？

我看到了一种跨浏览器的方式来使用 flash，但它不适用于当前版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T04:58:18.990

看看这个： [http ://ajaxian.com/archives/seeding-the-clipboard-in-flash10-with-zero-clipboard](http://ajaxian.com/archives/seeding-the-clipboard-in-flash10-with-zero-clipboard)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T05:26:20.763

一个选项是[Clippy](http://github.com/mojombo/clippy/tree/master)，“一个非常简单的 Flash 小部件，可以将任意文本放置到客户端的剪贴板上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T04:19:12.780

好吧，由于 Firefox 出于安全原因禁用了在 JS 中使用剪贴板，并且您需要跨浏览器支持，因此不可能完全得到您想要的。

但实际上，像 Photobucket 这样的网站并没有做你想做的事，而是实际上只是在你点击它时为你选择了整个文本框。

一个快速的谷歌将有助于找到如何......这是我使用搜索词发现的一件事`javascript automatically select textbox`......

[http://www.dynamicdrive.com/forums/archive/index.php/t-17992.html](http://www.dynamicdrive.com/forums/archive/index.php/t-17992.html)

# opengl-es - 如何确定模型中的哪个三角形位于屏幕坐标 x,y 处？

> ID：645183
> 
> 赞同：0
> 
> 时间：2009-03-14T02:01:20.273
> 
> 标签：opengl-es

为 OpenGL ES 开发，因此无法访问 glut 或 glu。

我想知道确定哪个三角形落在 (x,y) 的屏幕点下的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T02:18:55.533

我相信您正在寻找“采摘”。

# c# - linq to object的最佳对象结构？

> ID：645195
> 
> 赞同：1
> 
> 时间：2009-03-14T02:14:08.993
> 
> 标签：c#, winforms, linq, linq-to-objects

我有一个程序将数据存储在内存中的对象中，您可以将其视为内存中的小型数据库。我想使用 LINQ to Objects 对内存中的对象运行一些简单的查询。是否有一个我应该用于内存对象的首选结构。在深入这个项目之前，我应该阅读任何好的资源吗？

编辑：这是有关该应用程序的更多信息。

它是一个 winforms 应用程序，也可以作为服务运行。它将最多跟踪大约 10k 个对象的状态。每个对象都是相当独立的，所以我认为我不需要做很多连接（如果有的话）。因为它可以作为服务运行，所以我添加了一个可以查询对象信息的接口。查询将提出问题并将不修改它们的对象分组。每个对象看起来更像是一个客户对象，而不是一个产品对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-15T06:35:04.017

雷克斯，先问几个问题：

*   这是 WinForms/WPF 应用程序还是 ASP.NET？可能是相关的，因为当为每个用户/会话/等复制时，内存中的“小”占用空间可能会变得“大”。

*   'small db' - 你在这里说的有多小？10kb、100kb、1Mb？实际上，我认为大小并不像您选择的结构那么重要（在限制范围内，例如物理 RAM！），但它可能对其他回答者有帮助。

*   '简单查询' - 你能提供更多关于对象和查询的信息吗？您是否有一个`Customer`with `Name,Address,Age`，或者您是否更多地考虑`Products`将多个`Sizes`放置在多个`Orders`具有不同`Payment`s 的多个中......或者更复杂的东西？

然后是一些想法：

*   保持对象图/树/层次结构平坦（特别是您希望查询的属性）。Linqing on`where Customer.Zipcode = 90210`似乎并没有太大的不同，`where Customer.Address.Zipcode = 90210`但在我看来，嵌套对象越复杂，框架创建高效查询的难度就越大。

*   如果您已经提前知道查询将是什么，并且它们对您的应用程序很重要，那么也许您应该“构建”数据结构来支持查询，而不是仅仅依赖 Linq？举个例子，[searcharoo.net](http://searcharoo.net/)搜索引擎将其所有数据作为对象存储在内存中（很容易达到 1-2Mb 或更多），但查询机制是一对非常快速的自定义`Hashtables`（[ref ）。](http://searcharoo.net/SearcharooV2/)

谈到您的评论**，将内存中的小型数据库视为小型数据库**，有两种“产品”可能对您有用：

*   [索引 Linq](http://www.codeplex.com/i4o)应该允许您在对象集合上指定*索引*以使某些查询更快。这是一项正在进行的工作，但可能对您的需求有用。

*   [ComponentOne LiveLinq](http://labs.componentone.com/LiveLinq/)的网站说“LiveLinq 使用索引和其他优化来加速内存中的 LINQ 查询”。这听起来很像`Indexed Linq`，但将是一个商业产品。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T11:25:31.367

有很多资源展示了如何执行 LINQ to POCO（普通旧 CLR 对象）。这里有一些可以帮助您入门...

[MSDN 概述](http://msdn.microsoft.com/en-us/library/bb397919.aspx)

[简单示例代码](http://www.hookedonlinq.com/LINQtoObjects5MinuteOverview.ashx)

[详细示例代码](http://www.codeguru.com/csharp/csharp/net30/article.php/c13699)

# c# - 在 C# 中管理大对象

> ID：645199
> 
> 赞同：3
> 
> 时间：2009-03-14T02:19:53.457
> 
> 标签：c#, memory-management

我有大量的树状结构对象。我有一个问题，应用程序使用的内存量开始接近 >1GB，这意味着机器上的性能下降并且内存不足指令。

我设法通过使用 sqlite 将对象放入表中来解决这个问题，从而有效地管理数据，但这不再是一个可能的解决方案（原因我不会在这里讨论）。

您对管理这类事情有什么建议？我没有（真正的）数据库可以使用，所以我认为一个解决方案是以某种方式模仿 sqlite 过程并使用一些文件备份存储 - 纯点网中是否已经存在任何东西，或者它是一个复杂的滚动你自己的情况?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T05:12:20.423

当您开始存储大量对象时，对象分配开销成为一个真正的问题。例如，对于在 32 位系统上运行的 .NET，分配任何对象至少需要 16 个字节。在 64 位系统上，每个对象最少需要 24 个字节。如果您的单个对象很小，那么分配开销是一个巨大的代价。

你说你有一个“树状结构”。如果没有关于您的应用程序的更多详细信息，我不能肯定地说这适用，但大多数树结构需要指向子节点的指针和（有时）返回父节点的指针。尽管树很有用，但它们有时会产生非常大的开销。父链接和子链接需要树使用的总内存的 50% 或更多的情况并不少见。

在 C# 中，您可以通过使用结构而不是对象来减轻分配开销，因为结构本质上没有分配开销。当然，缺点是您必须处理有时非常不方便的值类型语义。

也可以将许多树结构折叠成数组，消除子链接和父链接，从而节省大量内存。这通常以更复杂的代码和运行时效率的一些损失为代价。

在我的工作中，我经常需要在内存中保存非常大的集合（数亿个节点）。当内存中有 2.5 亿条记录时，节点中的每 4 个字节需要另外 1 GB 的 RAM。即使在 16 GB 的机器上，维护这样的数据结构也需要非常仔细地考虑内存的使用方式。

If you must keep the entire thing in memory, then I would suggest that you make your tree nodes structs if at all possible. You should also consider alternate ways to store your tree--ways that eliminate explicit links to parents or children. Without more more information about your particular application, I can't make more specific recommendations.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T02:35:48.053

听起来您需要调查[Memory Mapped Files](http://en.wikipedia.org/wiki/Memory-mapped_file)。我没有使用过这篇[CodeProject 文章](http://www.codeproject.com/KB/recipes/MemoryMappedGenericArray.aspx)，但它似乎是一个很好的起点。

本质上，您将使用[Win32 来实现内存映射文件](http://msdn.microsoft.com/en-us/library/ms810613.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T02:53:43.673

几个显而易见的问题： 1\. 为什么需要一次存储这么大这么大的树结构？2\. 这些数据首先来自哪里？

无论您对这些问题有什么答案，您都可能不需要一次将所有数据都存储在内存中。将大量数据保存到磁盘并仅读取您当时需要的位。不管怎样，这似乎是你要去的方向。除了 RDMS 之外，.NET 中还有很多可能的地方可以存储数据；平面文件、xml 文件、隔离存储等。或者您可以使用任何系统为您提供这些数据（问题 #2），以便一次将其提供给较小的位？如果您绝对需要在内存中存储大型树结构。研究一些树结构算法，甚至可能是数据压缩？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T03:30:39.247

[SQL Server Express](http://www.microsoft.com/express/sql/default.aspx)是免费的。

# javascript - AJAX 和 Javascript 缓存效率问题

> ID：645201
> 
> 赞同：2
> 
> 时间：2009-03-14T02:20:57.323
> 
> 标签：javascript, ajax, caching, performance

我正在构建一个单页查看的简单博客（别担心，它是逐步构建的），因此我发送 AJAX 请求，该请求返回要插入页面的 HTML。

存储/缓存稍后添加到 DOM 中的信息 (HTML) 的最有效方法是什么？

考虑到它们包含整篇文章的 HTML，我敢使用 JavaScript 保存多少信息（用户可能返回的旧条目）？如果我以某种方式确保客户端浏览器缓存 AJAX 应用程序的状态（例如 getHTML.php?article=4）以便它返回 HTML 而不真正发送 AJAX 请求（在它已经被要求一次）？

提前致谢，

威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T13:28:14.513

让浏览器缓存这些请求不是更好吗？

```
 getHTML.php?article=4 
```

为此类请求重新发明轮子是愚蠢的。

**我认为您应该缓存的唯一内容是您*知道*用户将切换到查看的数据。**以 Digg 为例——他们以 Javascript 中对象的格式缓存每次提交的评论。当用户想要查看此评论时，函数只需将其以正确的格式插入到文档中。但是，并非所有评论都被缓存。只有最有可能被查看的顶部。

您可以“切换”以显示/隐藏的任何信息，都可以缓存，甚至预加载。您还可以使用上面指出的`visibility: hidden`and技术。`display:none`这样，您只需将它们转置到 DOM 并在需要时简单地显示和隐藏该元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T05:39:34.380

我建议您将它们缓存在 DOM 本身的某个地方，无论是在它们的自然位置还是在“缓存”`div`中，只需隐藏它们或它们的容器（`visibility: hidden`）。在 DOM 周围移动它们（例如`final_container.appendChild(cache.removeChild(cached_item))`）并根据需要显示它们。在处理中等数量的缓存信息时，这应该在内存效率、速度和简单性方面为您带来最大的收益。

在您的 AJAX 回复标头中使用适当的缓存指令，浏览器还可以像处理常规页面一样为您的 AJAX 回复执行缓存。

查看[此浏览器端缓存文章](http://ajaxpatterns.org/Browser-Side_Cache)以获取想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T19:47:20.017

我同意 Gary 的观点，您可能会质疑您是否真的想为此付出努力。如果你真的经历了它，我相信你有充分的理由。

如果你真的想要，你可能可以将每篇文章/页面/任何内容缓存为一个单独的 JavaScript 文件，其中包含带有 HTML 内容的真正轻量级的 JSON。

# javascript - 我可以在不滚动网页的情况下更新 window.location.hash 吗？

> ID：645202
> 
> 赞同：28
> 
> 时间：2009-03-14T02:21:55.450
> 
> 标签：javascript, browser-history, back-button, deep-linking

使用 JavaScript，有没有办法在不滚动网页的情况下更新 window.location.hash？

我有可点击的标题元素，可以直接在它们下方切换 div 的可见性。单击标题时我想要历史记录中的 /foo#bar ，但不希望页面滚动。因此，当导航离开 /foo#bar 时，我将能够使用后退按钮并让 ID 在 window.location.hash 中的 div 在返回时可见。

这种行为可能吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-03-03T12:04:45.000

要在不重新加载/滚动页面的情况下更改哈希，您现在可以简单地使用 html5 `history.pushState`。

```
history.pushState(null,null,'#hashexample'); 
```

所有主流浏览器都支持它：

[http://caniuse.com/history](http://caniuse.com/history)

医疗器械网络：

[https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history#The_pushState().C2.A0method](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history#The_pushState().C2.A0method)

另请注意，我们在这里使用的最后一个 url 参数，它可以是任何 url，因此不限于哈希。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2010-06-14T23:19:37.680

尽可能简单

```
var scrollmem = $('html,body').scrollTop();
window.location.hash = hash;
$('html,body').scrollTop(scrollmem); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2010-04-08T07:14:29.877

您可以尝试的另一件事是临时更改哈希指向的元素的 id。为我工作！

```
function changeHashWithoutScrolling(hash) {
  var id = hash.replace(/^.*#/, ''),
      elem = document.getElementById(id)
  elem.id = id+'-tmp'
  window.location.hash = hash
  elem.id = id
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T02:33:26.263

这种行为很有可能。您应该查看一些为您提供此功能而开发的库。

真正简单的历史：[http](http://code.google.com/p/reallysimplehistory/) ://code.google.com/p/reallysimplehistory/ SWFAddress：[http ://www.asual.com/swfaddress/](http://www.asual.com/swfaddress/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-05T23:29:05.347

想为凯瑟琳的回答添加评论，但我还没有代表 -

Great solution however it wasn't working for me in Chrome as $('html').scrollTop() always returns 0 - a minor edit resolves the issue:

```
scrollmem = $('html').scrollTop() || $('body').scrollTop();
window.location.hash = hash;
$('html,body').scrollTop(scrollmem); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-03T11:27:40.153

Bas on the answer from Sunny I made this function that also avoids undefined and nulls:

```
 function changeHashWithoutScrolling(hash) {
        var id;
        var elem;

        id = hash.replace(/^.*#/, '');

        if (id) {
            elem = document.getElementById(id);

            if (elem) {
                elem.id = id + '-tmp';
                window.location.hash = hash;
                elem.id = id;
            }
        }
    } 
```

# java - java.rmi.NoSuchObjectException：表中没有这样的对象

> ID：645208
> 
> 赞同：28
> 
> 时间：2009-03-14T02:24:12.073
> 
> 标签：java, exception, rmi

我正在编写一个非常简单的 RMI 服务器，并且`java.rmi.NoSuchObjectExceptions`在单元测试中看到断断续续。

我在同一个对象上有一串远程方法调用，虽然前几个通过，但后来的有时会失败。我没有做任何事情来取消注册两者之间的服务器对象。

这些错误并不总是出现，如果我设置断点，它们往往不会出现。那些 Heisenbugs，当通过减慢执行调试器的速度查看它们时，它们的竞争条件会消失？我的测试或服务器代码中没有多线程（尽管可能在 RMI 堆栈内部？）。

我通过 Eclipse 的 JUnit 插件在 Mac OS X 10.5 (Java 1.5) 上运行它，并且 RMI 服务器和客户端都在同一个 JVM 中。

什么会导致这些异常？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-05-12T18:17:13.170

**保持对实现接口的对象的强引用`java.rmi.Remote`，使其保持[可访问](http://java.sun.com/docs/books/jls/third_edition/html/execution.html#12.6.1)，即不符合垃圾回收条件。**

下面是一个演示[`java.rmi.NoSuchObjectException`](http://java.sun.com/javase/6/docs/api/java/rmi/NoSuchObjectException.html). 该脚本是自包含的，在单个 JVM 中创建一个 RMI 注册表以及一个“客户端”和一个“服务器”。

只需复制此代码并将其保存在名为`RMITest.java`. 使用您选择的命令行参数编译和调用：

*   **`-gc`** (default) Explicitly instruct the JVM to make "a best effort" to run the garbage collector after the server is started, but before the client connects to the server. This will likely cause the `Remote` object to be reclaimed by the garbage collector *if the strong reference to the `Remote` object is **released***. A `java.rmi.NoSuchObjectException` is observed when the client connects after the `Remote` object is reclaimed.
*   **`-nogc`** Do not explicitly request garbage collection. This will likely cause the `Remote` object to remain accessible by the client regardless of whether a strong reference is held or released *unless there is a sufficient **delay** between the server start and the client call such that the system "naturally" invokes the garbage collector and reclaims the `Remote` object*.
*   **`-hold`** Retain a strong reference to the `Remote` object. In this case, a class variable refers to the `Remote` object.
*   **`-release`** (default) A strong reference to the `Remote` object will be released. In this case, a method variable refers to the `Remote` object. After the method returns, the strong reference is lost.
*   **`-delay<S>`** The number of seconds to wait between server start and the client call. Inserting a delay provides time for the garbage collector to run "naturally." This simulates a process that "works" initially, but fails after some significant time has passed. Note there is no space before the number of seconds. Example: `-delay5` will make the client call 5 seconds after the server is started.

Program behavior will likely vary from machine to machine and JVM to JVM because things like `System.gc()` are only hints and setting the `-delay<S>` option is a guessing game with respect to the behavior of the garbage collector.

On my machine, after `javac RMITest.java` to compile, I see this behavior:

```
$ java RMITest -nogc -hold
received: foo
$ java RMITest -nogc -release
received: foo
$ java RMITest -gc -hold
received: foo
$ java RMITest -gc -release
Exception in thread "main" java.rmi.NoSuchObjectException: no such object in table
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:178)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:132)
    at $Proxy0.remoteOperation(Unknown Source)
    at RMITest.client(RMITest.java:69)
    at RMITest.main(RMITest.java:46) 
```

Here is the source code:

```
import java.rmi.Remote;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.rmi.server.UnicastRemoteObject;
import static java.util.concurrent.TimeUnit.*;

interface RemoteOperations extends Remote {
    String remoteOperation() throws RemoteException;
}

public final class RMITest implements RemoteOperations {
    private static final String REMOTE_NAME = RemoteOperations.class.getName();
    private static final RemoteOperations classVariable = new RMITest();

    private static boolean holdStrongReference = false;
    private static boolean invokeGarbageCollector = true;
    private static int delay = 0;

    public static void main(final String... args) throws Exception {
        for (final String arg : args) {
            if ("-gc".equals(arg)) {
                invokeGarbageCollector = true;
            } else if ("-nogc".equals(arg)) {
                invokeGarbageCollector = false;
            } else if ("-hold".equals(arg)) {
                holdStrongReference = true;
            } else if ("-release".equals(arg)) {
                holdStrongReference = false;
            } else if (arg.startsWith("-delay")) {
                delay = Integer.parseInt(arg.substring("-delay".length()));
            } else {
                System.err.println("usage: javac RMITest.java && java RMITest [-gc] [-nogc] [-hold] [-release] [-delay<seconds>]");
                System.exit(1);
            }
        }
        server();
        if (invokeGarbageCollector) {
            System.gc();
        }
        if (delay > 0) {
            System.out.println("delaying " + delay + " seconds");
            final long milliseconds = MILLISECONDS.convert(delay, SECONDS);
            Thread.sleep(milliseconds);
        }
        client();
        System.exit(0); // stop RMI server thread
    }

    @Override
    public String remoteOperation() {
        return "foo";
    }

    private static void server() throws Exception {
        // This reference is eligible for GC after this method returns
        final RemoteOperations methodVariable = new RMITest();
        final RemoteOperations toBeStubbed = holdStrongReference ? classVariable : methodVariable;
        final Remote remote = UnicastRemoteObject.exportObject(toBeStubbed, 0);
        final Registry registry = LocateRegistry.createRegistry(Registry.REGISTRY_PORT);
        registry.bind(REMOTE_NAME, remote);
    }

    private static void client() throws Exception {
        final Registry registry = LocateRegistry.getRegistry();
        final Remote remote = registry.lookup(REMOTE_NAME);
        final RemoteOperations stub = RemoteOperations.class.cast(remote);
        final String message = stub.remoteOperation();
        System.out.println("received: " + message);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-14T08:58:55.340

需要考虑的其他一些问题 - 首先，您是在引用对象实例还是存根接口本身消失了？如果某个对象实例消失了，出于通常的原因，它会被取消引用并被 GC 处理，但如果是接口，那么您的 RMI 服务器端点循环会因某种原因退出。

到目前为止我发现的最好的调试工具是打开 java.rmi.server.logCalls=true 属性（参见[http://java.sun.com/j2se/1.5.0/docs/guide/rmi/javarmiproperties .html](http://java.sun.com/j2se/1.5.0/docs/guide/rmi/javarmiproperties.html) ) 并在您的日志窗口中观看所有精彩的信息。这告诉我每次发生了什么。

乔斯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-24T03:06:45.977

I have the same problem and now I've solved it. The solution is simple, you MUST create strong reference 'object' to avoid the object being GC'd.

for example in your server class:

```
...
private static ServiceImpl serviceImpl = null;

public static void register (int port) {
    serviceImpl = new ServiceImpl();
    Registry registry = LocateRegistry.createRegistry(port);
    registry.rebind ("serviceImpl", serviceImpl);
}

public static void main(String[] args) throws RemoteException, NotBoundException {
    register(1099);    
    ...the rest of your code...
} 
```

So, it protects "serviceImpl" object from being GC'd. CMIIW

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-02-04T01:25:27.980

there is one point missing in the above discussion. There is something that is called distributed garbage collection (DGC). If there are no living local and remote references to a distributed object the GC is allowed to remove the object from memory. There is a sophisticated algorithm to verify this. The nice code snippet from above is indeed a good demonstration of the effectiveness of the DGC.

What somehow looks like a feature is nothing but the designed behavior!

Frank

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T04:51:40.940

不看代码就很难回答这个问题（我想代码会大到不能在这里发布）。然而，使用奥卡姆剃刀，你有两种可能

*   服务器对象必须以某种方式取消注册
*   由于断点停止了错误，这绝对是一个竞争条件。

我建议您仔细检查代码路径，牢记以上两点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-21T09:01:20.660

While using spring remoting (rmi) i bumped into this error. My service wasn't garbage collected.

After turning on debug logging for "org.springframework" i discovered that my server was registering the service on the default port (1099) instead of the port the client was trying to connect to.

I thought everything port wise was ok cause "java.rmi.server.logCalls=true" did show some output on server when client was trying to connect.

When getting this error double check the ports (the service and registry one).

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-07-20T11:15:18.540

Got the same error but probably for the other (yet unknown) reason.

I was casting exported object to the type of my remote interface and then while binding to name I was getting NoSuchObjectException. Removing casting fixed the problem.

Briefly:

```
public interface MyRemoteInterface extedns Remote {
    ...
}

public class MyRemoteObject implements MyRemoteInterface {
    ...
}

public static MyRemoteObject obj = new MyRemoteObject();

public static void main(String[] args) {
    //removing cast to MyRemoteInterface fixes the problem
    this.obj = UnicastRemoteObject.exportObject((MyRemoteInterface) this.obj, 0);

    //unless the above cast is removed, this throws NoSuchObjectException occasionally
    LocateRegisry.getRegistry("127.0.0.1", 1099).bind("name", this.obj);
} 
```

# iphone - 如何从 UITabBarController 访问 _tabBar 实例

> ID：645211
> 
> 赞同：0
> 
> 时间：2009-03-14T02:26:21.727
> 
> 标签：iphone, uitabbarcontroller

我正在尝试从 UITabBarController 访问 _tabBar 实例。我试图在某些情况下隐藏 tabBar，为此，我向 UITabBarController 添加了一个扩展，我可以在其中访问 _tabBar 实例，并调用 setHidden 消息。这在为模拟器编译时有效，但是当我为设备编译时，出现以下错误

“_OBJC_IVAR_$_UITabBarController._tabBar”，引用自：_OBJC_IVAR_$_UITabBarController._tabBar$non_lazy_ptr in UITabBarController+TabBar.o

我需要在编译器标志中添加什么？以及为什么在为模拟器编译时它会起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-17T05:21:51.217

根据 UITabBarController 的文档：

> 您永远不应尝试操作存储在此属性中的 UITabBar 对象本身。如果您尝试这样做，选项卡栏视图将引发异常。要为标签栏界面配置项目，您应该将一个或多个自定义视图控制器分配给 viewControllers 属性。标签栏从您指定的视图控制器中收集所需的标签栏项目。
> 
> 此属性提供的选项卡栏视图仅适用于您希望使用 UIActionSheet 类的 showFromTabBar: 方法显示操作表的情况。

如果您将 UITAbBarController 推送到导航控制器堆栈上，您可以将 hidesBottomBarWhenPushed 属性设置为 YES，这将起作用。

UITAbBarController 的超类中可能还有另一个 API 可以执行此操作。如果不是，您可以遍历子视图层次结构并隐藏必要的层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-24T05:27:37.443

自 iPhone OS 3.0 起可访问

# installation - 如何快速设置开发者机器？

> ID：645218
> 
> 赞同：6
> 
> 时间：2009-03-14T02:34:05.810
> 
> 标签：installation, hardware

我知道这是可以做到的，我已经看到它使用一些前端 gui 工具（在内部使用 robocopy）完成了。

我即将开始一个新项目，并且我已经完成了设置桌面，其中包含该机器上所需的所有工具。我现在想要的是一个工具或实用程序......我可以说这里是一个文件夹，（和其他一些文件夹......）拿这个并准备某种安装程序，当它在任何机器（winxp sp3）上运行时会将所有这些程序复制/安装到该机器上。

除此之外，我将构建服务器虚拟化，我不是在谈论虚拟化和幻像。我有一些软件实用程序可以让程序员的生活更轻松（例如带有各种插件的 IDE（具有正确的配置和版本）、小型软件工具（tcp 监视器）等），我想将它们添加到开发人员机器中。

* * *

### 更新：

我认为没有人完全阅读这个问题。我说我已经看到这件事完成了，通过一些生成安装程序的前端 gui 程序我无法找到执行此操作的程序，它在内部使用 robocopy，您可以将其复制到可再分发的位置（pendrive/networkdrive /ftp/http...列表继续）...执行后，该程序会将所有程序和文件复制到运行此设置的目标机器上...我不是在谈论简单的文件复制...这将是一个简单的批处理/powershell脚本...我认为这可以很容易地完成...如果没有任何结果我会这样做...但是robocopy可能会跳过像launchy和shell这样的程序扩展...

* * *

### 更新：

好的...我给了它另一个想法（现在我已经做了一个解决方法...）...有没有人知道可以生成安装程序的程序，如 installshield 等...并且免费提供...

* * *

### 更新：

我是个顽固的混蛋…… nullsoft 可编写脚本的安装系统吹响了我的号角。多亏了这一点，我现在有了一个 setup.exe，我可以在任何系统上运行它，并使该系统感觉像是任何优秀的 Java 开发人员的家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T02:38:06.533

试试[http://www.symantec.com/norton/ghost](http://www.symantec.com/norton/ghost)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T03:01:27.727

我在虚拟机（Virtual Server 2005）上托管了几个不同的基本开发环境配置。一旦我对它们感到满意，我就会对它们进行[sysprep](http://en.wikipedia.org/wiki/Sysprep)处理。现在，当我需要特定项目类型的环境时，我会使用我需要的配置克隆 VM，启动它，然后我就开始工作了。最棒的是，如果我破坏了 VM，我需要做的就是从一个 sysprep 映像重新开始。这是一个节省时间的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-29T06:35:36.077

NSIS 是这种魔术技巧的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T02:39:16.280

如果您的机器有性能/内存问题，Acronis Trueimage 是一个好方法！（如果您想要完全重新安装）。

我们使用 VMWare 从网络或便携式硬盘提供完整映像。您可以从相同的（自定义）主机环境中受益，该环境会根据客人的变化进行项目更改。对于更大的项目，我们会考虑 VMWare 视图，因为我们已经运行了一个已部署的 ESX 集群。

如果您只搜索软件分发实用程序，您应该看看[Microsoft SMS](http://www.microsoft.com/SMServer/default.mspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T05:22:32.317

如果您碰巧在 Windows 环境中开发 ASP.NET，[Microsoft Web 平台安装程序](http://www.microsoft.com/web/channel/products/WebPlatformInstaller.aspx)是让新工作站快速启动和运行的好选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T15:11:07.527

也许您正在谈论[Robocopy GUI](http://download.microsoft.com/download/f/d/0/fd05def7-68a1-4f71-8546-25c359cc0842/UtilitySpotlight2006_11.exe)。我自己没试过，所以不知道是不是你要的。

否则，Ghost 应该能够只选择一些文件夹和文件，而不仅仅是完整的操作系统，这可能是一个更好的选择，但不确定您是否可以将软件部署在主机上的其他目录中。

或者，如果您实际上要对很多机器执行此操作，那么也许像[Microsoft 的 SMS](http://www.microsoft.com/smserver)这样的部署软件会起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T03:26:56.540

使用虚拟化包的安装程序是显而易见的技术答案，但您还应该考虑一些书面流程。

经常发生在我身上的一件事是，我一直在想“我只做一次，或者如果我必须再做一次，我会记住我加载了什么，我从哪里得到的，以及我是如何做到的配置它。”

...我通常是错的。我几乎总是最终复制一个环境，因为我有另一台机器，或者我在另一个位置工作，或者发生了故障等。

所以，我强烈建议先保留书面记录，但不要太复杂。一些简单的东西，比如：包的名称、当前版本以及加载它的原因。

如果您一次又一次地开始做某事，您可能想要开始放下步骤，尤其是如果它是共享资源。如果您需要做很多事情，您可以将所有软件映像保存在一个位置，例如共享文件夹或 USB 闪存驱动器。

（在勇敢的新 Web 2.0 世界中，您可以使用像 Fogbugz 这样的工单跟踪器在线跟踪这些东西，每个系统类型一张工单......）

需要记住的主要一点是，这些配置通常会影响自己的生命，并且远远超出您的预期。您可能需要支持新的操作系统、新版本等。

# javascript - 创建动态表单元素（具有递增的名称属性）

> ID：645231
> 
> 赞同：1
> 
> 时间：2009-03-14T02:40:46.650
> 
> 标签：javascript, jquery, forms

如何动态创建表单元素并为其提供动态递增的输入名称属性？我正在使用 jquery，但对任何解决方案持开放态度。

我有一个看起来像这样的 div：

`<div>`

`<input type="text" name="title1" />`

`<input type="text" name="body1" />`

`<select name="photo1" size="1">`

`<option value="0">foo</option>`

`</select>`

`</div>`

我想克隆它 n 次并将名称值增加 1，例如，第二个 div 看起来像这样（只有名称值发生变化）：

`<div>`

`<input type="text" name="title2" />`

`<input type="text" name="body2" />`

`<select name="photo2" size="1">`

`<option value="0">foo</option>`

`</select>`

`</div>`

使用 jquery 克隆 div 很简单：

```
$(文档).ready(函数(){
    $('.toClone').click(function(){
        $(this).clone(true).insertAfter(this);
     });
});

```

但我无法自动增加动态创建的 div 字段的名称值。
任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T03:02:42.730

你用什么处理这个？使用 PHP，您可以命名字段`title[]`、`body[]`等，以便将它们作为数组发送。这将是最好的方法，因为克隆将是微不足道的。据我所知，它同样适用于其他技术。无论如何，如果您真的想按照自己的方式进行操作：

```
$(document).ready(function(){
    $('.toClone').click(function(){
        var el = $(this).clone(true).insertAfter(this);
        var regex = new RegExp(/^(.+)(\d+)$/);
        $(el).find(':input').each(function() {
            var match = $(this).attr('name').match(regex);
            $(this).attr('name', match[1] + (++match[2]));
        });
    });
}); 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T02:52:03.253

可以通过以下方式更改名称属性字段：

```
var i = 1;
$(this).clone(true).attr('name', 'title' + i).insertAfter(this); 
```

然后你只需要管理增加变量。

# iphone - 转换 UINavigationBar 颜色？

> ID：645232
> 
> 赞同：4
> 
> 时间：2009-03-14T02:43:36.177
> 
> 标签：iphone, cocoa-touch

我基本上是在尝试复制 iPhone 上 iPod 应用程序的行为，当您选择一首歌曲时，音乐播放器视图会滑入，并且导航栏会转换为新颜色。

我的应用程序设置为基于选项卡的应用程序，每个选项卡都`UITabBarController`嵌套了一个。`UINavigationController`每个选项卡内部都有`UINavigationController`一个 UITableView。当我在表格中选择一个项目时，我习惯于`pushViewController`滑动到下一个视图，并且我`hidesBottomBarWhenPushed`在下一个视图控制器中进行了设置，以便将选项卡滑开。该行为非常接近 iPod“正在播放”页面，几乎是完美的。

最后一个问题是我无法转换导航栏的颜色，例如 iPod 应用程序中的导航栏如何从蓝色变为黑色。我可以在新视图出现后强制改变颜色（在 中`viewWillAppear`），但这种变化是突然的，并且不会模仿 iPod 应用程序的行为，具有淡入淡出效果。

有谁知道我在这里想念什么？它似乎是我在多个应用程序中看到的非常简单和常见的 UI，但似乎没有明显的方法来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-08-06T20:07:37.930

安德鲁的回答实际上效果很好，但我会添加两件事以使其更好地工作：

1.  通过类别而不是子类提供功能。多，少得多的混乱。
2.  仅在绝对必要时使用过渡。这样做的原因是，当使用这种技术时，原始标题文本只是消失了，而不是从侧面滑落。这是微妙的，但如果它发生在条形样式实际上没有改变的过渡期间，则会更加明显。所以我避免了这种情况。

这是我的类别代码（我在 UINavigationBar 和 UIToolbar 的类别中都有它）：

```
- (void)setBarStyle:(UIBarStyle)barStyle animated:(BOOL)animated {
    if (animated && self.barStyle != barStyle) {
        CATransition *transition = [CATransition animation];
        transition.duration = 0.2;
        transition.timingFunction = [CAMediaTimingFunction
            functionWithName:kCAMediaTimingFunctionEaseIn];
        [self.layer addAnimation:transition forKey:nil];
    }

    [self setBarStyle:barStyle];
} 
```

这就是我使用它的方式：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [[UIApplication sharedApplication]
        setStatusBarStyle:UIStatusBarStyleBlackTranslucent animated:YES];
    [self.navigationController.navigationBar
        setBarStyle:UIBarStyleBlackTranslucent animated:YES];
    [self.navigationController.toolbar
        setBarStyle:UIBarStyleBlackTranslucent animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-20T14:54:22.510

您可以为状态栏样式更改设置动画以创建非常接近的效果。

```
- (void)viewWillAppear:(BOOL)animated {
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:animated];
    self.navigationController.navigationBar.barStyle = UIBarStyleBlackOpaque;
} 
```

正如您所注意到的，导航栏样式会立即更改，但状态栏的动画更改仍然提供了过渡的整体外观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T23:08:59.220

我做了一个解决方案，可能更符合您的要求。

*   创建一个自定义子类`UINavigationBar`。
*   覆盖`setBarStyle:`如下

代码：

```
- (void)setBarStyle:(UIBarStyle)style {
    //Fade our content, ie background, from one style to another
    CATransition *transition = [[CATransition new] autorelease];
    transition.type = kCATransitionFade;
    transition.duration = 0.2;
    [self.layer addAnimation:transition forKey:@"content"];

    [super setBarStyle:style];
} 
```

*   配置您的导航控制器以使用此子类
    *   在 IB 中，您可以在检查器中设置类

# django - 可以在 Django 的错误页面（HTTP 404 和 500）中扩展基本视图吗？

> ID：645248
> 
> 赞同：2
> 
> 时间：2009-03-14T02:57:30.013
> 
> 标签：django, django-templates, custom-error-pages

Django 的[视图文档](http://docs.djangoproject.com/en/dev/topics/http/views/#the-500-server-error-view)指出“默认的 500 视图不向该模板传递任何变量，并且使用空的 Context 呈现以减少出现其他错误的机会”，但是可以使用[`{% extends %}`](http://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#extends)标签来重用 500 中的基本视图吗？服务器错误页面 ( `500.html`)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T03:08:12.560

是的，我们有一个非常基本的模板，我们从中扩展了 404 和 500 模板。只要您的基本模板不依赖于自定义上下文，您就应该很好。

# javascript - 在 jQuery 获取的 HTML 上调用 typeface.js？

> ID：645260
> 
> 赞同：1
> 
> 时间：2009-03-14T03:11:57.543
> 
> 标签：javascript, jquery, ajax, types, typeface.js

我有一个页面，我正在获取一个 Wordpress 主索引来处理通过 jQuery.ajax 导入的“新闻提要”。我还在同一页面上使用 typeface.js 以获得更好的字体控制。我想在 Ajax'd HTML 中的元素上调用 typeface.js。问题是我不知道该怎么做，因为我不熟悉它的结构。它没有正常意义上的调用函数，否则我只会在成功的 ajax 请求中使用这些函数。

有没有人有使用 typeface.js 的经验来帮助我？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-02-12T01:16:40.877

将返回的内容附加到文档后，您可以调用： _typeface_js.renderDocument() 它将呈现新内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T17:42:25.667

只有在对内容进行 Ajax 处理后才能包含 typeface.js，因此它也适用于该内容。

要动态包含文件，您可以试试这个[jQuery 插件](http://www.arashkarimzadeh.com/index.php/jquery/17-includemany-jquery-include-many.html)。

# awk - 无法在 AWK 中将多个字符设置为字段分隔符

> ID：645263
> 
> 赞同：2
> 
> 时间：2009-03-14T03:14:41.780
> 
> 标签：awk

我想将 -[space] 作为 AWK 中的字段分隔符。

例如，

```
awk -F-[space] {' print $1 '} 
```

如何在 AWK 中使用多个字符作为字段分隔符？

**[编辑]**

**弗拉德命令的确切输出**

```
$echo /Users/Sam/Dropbox/Education/Chemistry/Other\ materials/*.pdf | sed -e 's: : - :g'
/Users/Sam/Dropbox/Education/Chemistry/Other - materials/CHE_IB_LAB.pdf - /Users/Sam/Dropbox/Education/Chemistry/Other - materials/Lecture19_20_21.pdf 
```

**Vlad 使用 sed 的命令的确切输出**

```
$echo /Users/Sam/Dropbox/Education/Chemistry/Other\ materials/*.pdf
/Users/Sam/Dropbox/Education/Chemistry/Other materials/CHE_IB_LAB.pdf /Users/Sam/Dropbox/Education/Chemistry/Other materials/Lecture19_20_21.pdf 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T03:20:43.013

`awk`了解您的引用:)，但请注意 GNU`-F`将扩展正则表达式 (ERE) 作为其参数，因此如果您想要文本匹配而不是 ERE 匹配，您可能还需要相应地转义，例如

```
awk -F '- ' '{ print $1 }' 
```

**更新**

您的最新评论仍不清楚。

1.  **您磁盘上 PDF 文件的完整**路径是什么
2.  您需要这些文件的确切输出是什么？

我需要一个具体的例子，例如

1.  对于以下文件：

    ```
    ../Phy/Phy1/file1.pdf
    ../Phy/file2.pdf
    ../Che/Che1/file3.pdf
    ../Che/file4.pdf
    ../file5.pdf
    ../Phy2/file6.pdf 
    ```

2.  我想显示：

    ```
    PhyPhy1 file1.pdf - Phy file2.pdf - Che/Che1 file3.pdf - Che file4.pdf 
    ```

请注意，对于上面的示例文件，命令：

```
echo lpr ../{Che,Phy}/{*.pdf,*/*.pdf} 
```

只会*显示*：

```
lpr Che/file4.pdf
lpr Che/Che1/file3.pdf
lpr Phy/file2.pdf
lpr Phy/Phy1/file1.pdf 
```

让我们先把这部分弄好，然后我们会担心破折号等。

* * *

**更新**

好的。*请运行以下几乎*等效的命令之一或两者：

```
echo Dropbox/Mas/edu/{Phy,Che}/*.pdf | sed -e 's: : - :g'
ls -1d Dropbox/Mas/edu/{Phy,Che}/*.pdf | paste -s -d '|' - | sed -e 's:|: - :g' 
```

然后请编辑您的原始帖子并添加以下内容，*分开*：

1.  上述命令的确切输出（复制粘贴）
2.  *您更改*的上述命令的确切输出以满足您的需要

# tortoisesvn - VisualSVN 多次要求我输入登录名和密码让我很烦

> ID：645267
> 
> 赞同：1
> 
> 时间：2009-03-14T03:16:57.813
> 
> 标签：tortoisesvn, visualsvn

我的 VisualVSN 连接到 Active Directory。我使用 Tortoise 作为客户端。当我使用 SVNSERVE 和文本文件进行身份验证时，它只要求我输入一次登录名/密码。现在，当我连接时，它会多次询问我。为了解决这个问题，我必须选中“保存身份验证”信息复选框。我可以这样做，但我不希望我的密码以明文形式存储在我计算机的某个地方。难道我没有办法让它识别我已经以有效域用户身份登录到我的 PC 并使用我的会话信息对我进行身份验证这一事实吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T07:34:31.407

如果您使用“保存身份验证”功能，您的密码**不会**以明文形式保存，而是使用您的登录凭据加密。您可以自己检查：身份验证数据保存在 %APPDATA%\Subversion\auth 下 - 您不会在其中找到纯文本（除非您使用的是 Win9x）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T07:17:26.207

您是在询问 VisualVSN Server 或 Visual Studio 插件，还是两者兼而有之？

你使用什么协议？尝试使用 https 连接到 svn - 这样它就可以使用 SSPI 进行身份验证，而您根本不必输入密码。

# c++ - 在 COM 中：我应该在 CoCreateInstance 之后调用 AddRef 吗？

> ID：645268
> 
> 赞同：25
> 
> 时间：2009-03-14T03:17:44.877
> 
> 标签：c++, com

CoCreateInstance 是在我正在创建的接口上自动调用 AddRef 还是应该在之后手动调用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-14T03:41:53.870

与 COM 的合同是任何时候你从这样的函数中获得一个对象，例如 CoCreateInstance()、QueryInterface()（这是 CoCreateInstance() 最终调用的）等，被调用者总是在返回之前调用 AddRef()，并且完成后，调用者（你）总是 Release()。

您可以使用 CComPtr<> 使这更简单，它只是做正确的事。

现在，如果您需要将此指针传递给另一个希望它在对象生命周期之后可用的对象，那么您需要在传递它之前调用 AddRef()。

我推荐[Don Box 的 Essential COM](https://rads.stackoverflow.com/amzn/click/com/0201634465)以进一步阅读该主题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-14T03:26:44.373

简而言之：**没有**。

您**无需**在代码中调用[AddRef](http://msdn.microsoft.com/en-us/library/ms691379(VS.85).aspx)。

**COM 对象**具有的引用计数器在[CoCreateInstance](http://msdn.microsoft.com/en-us/library/ms686615.aspx)之后为 1 。

因此，如果您调用[Release](http://msdn.microsoft.com/en-us/library/ms682317(VS.85).aspx)，引用计数器将为 0 并且 COM 对象将被释放。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T04:33:59.123

规则的一个例外：CComObject<>::CreateInstance() 不执行 AddRef。调用后必须这样做。

# mysql - 运行时查询分析和优化

> ID：645270
> 
> 赞同：1
> 
> 时间：2009-03-14T03:18:31.443
> 
> 标签：mysql, database, performance, runtime, query-optimization

我想知道是否有某种运行时机制可以观察针对我的数据库服务器运行的查询；记录每个“类型”有多少查询正在运行；查看这些查询的性能；然后，根据此运行时数据，建议需要添加/删除哪些索引。

我目前正在与 MySQL 作斗争；如果您知道其他数据库供应商的类似工具，我也很想知道。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T04:01:48.673

我建议试试[Jet Profiler](http://www.jetprofiler.com/)。免费版本有点受限，但我仍然觉得它很有用。它将完成您所要求的大部分工作，但您可能很难找到一个可以为您建议索引的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T14:28:10.767

[New MySQL Query Profiler](http://dev.mysql.com/tech-resources/articles/using-new-query-profiler.html)（从 5.0.37 开始）怎么样？谷歌还有[一些](http://www.google.com/search?q=mysql+profiler)。

# html - 背景图像不会拉伸整个页面宽度

> ID：645279
> 
> 赞同：7
> 
> 时间：2009-03-14T03:25:29.743
> 
> 标签：html, css

在[这个页面上](http://chaletsdesbouleaux.com/)，我有一个 2 色调的背景。页面结构如下：

```
<body>
  <div id="upbg"/>
  <div id="container"/>
</body 
```

这个背景是通过在 upbg 中添加深色背景图像和在 body 上添加较浅背景图像来实现的。upbg 的 css 是：

```
#upbg {
  background: #FFFFFF url(images/bg-dark.jpg) repeat-x scroll 0 0;
  height: 275px;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
} 
```

如果您使浏览器窗口非常窄，以至于出现滚动条，那么如果您向右滚动，您会注意到 upbg 的背景图像不会填满页面的整个宽度。

我的猜测是这是因为“宽度：100%”是指浏览器窗口的宽度，而不是页面的整个宽度，有没有办法解决这个问题？

谢谢，唐

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-14T03:55:04.303

> 我的猜测是这是因为“宽度：100%”是指浏览器窗口的宽度，而不是页面的整个宽度，有没有办法解决这个问题？

100% 意味着它将与它所定位的父元素一样宽（在这种情况下，`body`，其宽度将基于其父元素的宽度，`html`）。除非您另外指定，否则它将与浏览器窗口一样宽。

问题是，你有另一个孩子`body`可以比`body`: 都更宽，`#container`并且`#footer`它们的样式总是至少是`1026px`宽的。这不会扩大它们的父元素，因为我们已经确定它们将与浏览器窗口一样宽；相反，他们*溢出*了他们的父母。对此的默认响应是显示滚动条，以便您可以滚动并查看溢出的内容；如果您将样式添加`overflow:hidden`到`html`or `body`，您会发现您的内容和页脚被剪裁到浏览器窗口的大小，并且没有显示滚动条。

有几个简单的解决方案：

1.  将#content 和#footer 包裹在#upbg 中，而不是放在它们前面。然后删除现有样式，并按如下方式设置样式：`position: absolute; padding-top:25px; background: url(images/bg-dark.jpg) repeat-x scroll 0 0;`这完成了两件事：您不再为#upbg 指定宽度，因此允许它变得足够宽以包含其新子项，并且它允许您摆脱很多现在不必要的样式（您还需要清除您设置的填充`body`，以及一些样式`#content`）。交替，
2.  去掉 and 上的最小宽度`#content`，`#footer`这样它们就不会溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T06:12:21.573

简单地说，如果您可以使用整个背景，您可以使用宽度和高度设置为 100% 的绝对定位图像，并用 body tagk 包裹。将其他元素的 z-index 设置为高于背景图像。

```
 <head>
  ...
  <style>
    .virtualBg{
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 0;
    }
  </style>
 </head>
 <body>
   <img src="path/to/bg.jpg" class="virtualBg" />
   ...
 </body> 

```

但我建议使用包含两种色调的垂直裁剪图像，然后为 body 元素重复 x 的背景。

# c# - Facebook Connect 与使用 ASP.NET Membership Provider 的站点集成

> ID：645289
> 
> 赞同：12
> 
> 时间：2009-03-14T03:28:17.397
> 
> 标签：c#, asp.net, asp.net-mvc, facebook

是否有任何最佳实践或示例说明如何使用 Membership 提供程序（或类似的东西）将 Facebook 连接与现有 ASP.NET 应用程序最佳集成。我确信我可以做一些事情，但是，如果有一些关于这方面的信息和最佳实践来减轻任何安全问题，那就太好了。目前我可以让用户“连接”并获取他们的信息，但是，我希望尽可能安全地处理它们，并且尽可能与现有用户相似。特别是，我希望他们在“用户”表中有一个条目。

对于与 ASP.NET MVC 相关的任何信息，这将非常有帮助。

迄今为止我发现的一些有用的链接：

*   [http://facebooktoolkit.codeplex.com/Thread/View.aspx?ThreadId=45825](http://facebooktoolkit.codeplex.com/Thread/View.aspx?ThreadId=45825)
*   [Facebook 连接和 ASP.NET](https://stackoverflow.com/questions/323019/facebook-connect-and-asp-net)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-16T03:58:04.040

查看 RPXNow： [https ://rpxnow.com/](https://rpxnow.com/)

它将允许您将您的应用程序与一系列 OpenId 提供程序集成，我相信其中包括 Facebook，以及一个漂亮整洁的 API。如果您只希望 facebook 作为提供者，您可能希望在别处寻找

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-12-12T17:58:43.477

[https://rpxnow.com/](https://rpxnow.com/)已更名为“Janrain”并已商业化。很高兴了解它背后的技术，以便创建自己的解决方案。

有谁知道像“Janrain”这样的开源免费解决方案？还是适合 ASP.NET MVC 2 的好教程？

# c++ - 如何在没有微控制器的情况下用 C++ 连接 LED 灯？

> ID：645290
> 
> 赞同：3
> 
> 时间：2009-03-14T03:30:05.113
> 
> 标签：c++, led

我想在没有微控制器的情况下点亮/关闭 LED。我希望通过编写 C++ 程序来控制 LED。但我遇到的问题是连接它们有没有免费的方法！！！！

如果相关，我正在使用 Windows XP。

我有 LED，但我没有微控制器。

好吧，我找到了一些功能，但它们的标题不起作用，那么有人可以帮我找到标题吗？

这是我正在谈论的一个例子：

```
poke(0x0000,0x0417,16);
gotoxy(1,1);
printf("Num Lock LED is now on    r");
delay(10); 
```

另外，有人有“内核编程”电子书吗？

我还需要一个电路图来显示连接 LED 的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T03:36:26.470

这完全取决于您拥有哪种硬件，这决定了您需要哪种驱动程序。那时，我得到了一个简单的 LED 并将其放入打印机 LPT 端口。然后我可以向地址 0x0378h 写入一个字节，其中的位确定引脚是否有电（使用 linux）。对于 Windows，您需要一个允许您直接访问 lpt 端口的驱动程序。我当时也和一个朋友一起做的，效果很好（我们建立了一个红绿灯:)）阅读[此页面](http://logix4u.net/)（单击左侧的并行端口。出于某种原因，我无法直接链接到它）了解有关详细信息视窗。并`man outb`在 linux 上阅读。现在，那个港口真的很老了。但是，如果您周围有一些机器仍然有一台，我认为玩它会很有趣。

无论如何，我有一个带有整洁 LED 的 Fritz 盒子。可以通过连接到它，然后在iirc 中`telnet`写入一些东西（我忘记了数字） 。`/proc/led`然后内核驱动程序解释该数字并使正确的 LED 闪烁。这是另一种方式：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T04:08:57.500

玩微控制器很有趣。[arduino](http://www.arduino.cc/)是一个开源板，带有很好的开发工具。[像这样](http://www.moderndevice.com/)的一些板起价约为 15 美元

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T03:34:01.453

你得给我们更多的细节。什么样的电脑，什么样的操作系统等等。

您可能至少需要购买一些 LED 和一些东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T04:11:55.123

这篇 CodeProject 文章[Controlling LEDs with Parallel Port](http://www.codeproject.com/KB/cs/csppleds.aspx?display=PrintAll&fid=21021&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=326&select=821302)可能很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T03:33:33.060

好吧，您想寻找微电子领域的开发套件。我要赌一把，说你不熟悉电子产品？

微控制器没什么好怕的，如果您从 Atmel 或 Microchip 获得一个不错的开发套件，那么他们为您提供的手册和模板非常简单。但是您将需要 12c LED 之外的某种硬件来执行此操作。

您能否提供有关您想要做什么的更多信息？如果你只是想计算灯打开和关闭的频率，我可以给你一个简单的电路，这是白痴的证明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-14T22:37:20.920

在 Windows 上，这将切换键盘上的灯：

（例如滚动锁定灯）

```
INPUT input[2];
ZeroMemory(input, sizeof(input));        
input[0].type = INPUT_KEYBOARD;
input[0].ki.wVk = VK_SCROLL;
input[1].type = INPUT_KEYBOARD;
input[1].ki.wVk = VK_SCROLL;
input[1].ki.dwFlags = KEYEVENTF_KEYUP;
SendInput(2, input, sizeof(INPUT)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-24T01:04:06.587

您需要一个具有与端口通信的适当权限的驱动程序 - 从这里开始：[http ://www.beyondlogic.org/porttalk/porttalk.htm](http://www.beyondlogic.org/porttalk/porttalk.htm)

另请查看[http://www.lvr.com/parport.htm#Programming](http://www.lvr.com/parport.htm#Programming)以获取有关如何访问并行端口的更多编程资源。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T18:27:39.927

这是一个相当简单的工作。如果您的机器具有并行（25 针打印机端口）标准端口，那么它很好，否则您可以购买任何“USB 到并行转换器”形式。

一旦它在你的机器上工作然后。使用以下标准 API 来控制并行端口的各种数据引脚：getport() setport()

那一切...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-10T15:46:17.193

```
poke(1.1x00021,1.1x0417,16);
gotoxy(12,12);
printf("Num Lock LED is now on    r");
Sleep(100); 
```

我在这里做了一些改变，我认为它会起作用，所以试试这个。

# sql-server - 在服务器资源管理器中从家里访问我的 SQL 服务器

> ID：645302
> 
> 赞同：1
> 
> 时间：2009-03-14T03:39:54.887
> 
> 标签：sql-server, connectivity

在我的局域网上，我在一台机器上运行 SQL Server 2005，而我的开发人员机器（另一台机器）上有 VS2008，我可以使用计算机名和本地局域网从 Visual Studio 中的服务器资源管理器访问 SQL Server名称即：mspc2.ourcompany.local 所以，我知道它一切正常，运行良好，我可以看到上面的表格和所有内容。

现在，SQL Server 机器有一个指向它的公共 IP，我目前只使用它来远程桌面进入机器，以便在家里四处寻找。

那么，我需要做什么才能从家里的笔记本电脑上的 Visual Studio 或不在 LAN 上的任何其他计算机上访问该 SQL Server？我已经关闭了该机器上的所有软件防火墙，并且我正在硬件路由器上进行直通，以让所有到该公共 IP 的流量/端口路由到该机器的 LAN IP。

我可以毫无问题地使用远程桌面访问那台机器。

我尝试在服务器资源管理器中输入公共 IP 地址，但它回来并说无法连接。

那么我需要做些什么来打开那台机器，让我从异地访问它上面的 SQL Server？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T03:46:24.090

你最好在你的网络中设置一个安全的 VPN 并以这种方式访问​​ SQL Server，而不是让它公开访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T03:47:26.787

尝试检查该特定计算机上 SQL Server 正在侦听的端口，并确保您在工作 LAN/网关上设置了端口转发和/或在您的笔记本电脑、家庭 LAN/网关和工作 LAN 之间畅通了端口/Gateway 和 SQL 框本身。

要检查 SQL 正在使用哪个端口，请使用通常位于开始 -> 程序 -> Microsoft SQL Server 2005 -> 配置工具中的 SQL 配置管理器。

打开后，展开 LHS 树“SQL Server 2005 Network Configuration”并检查 TCP/IP 是否已启用。右键单击 TCP/IP 并选择属性，然后选择 IP 地址选项卡。默认端口为 1433。

正如其他人已经提到的，建立与工作网络的 VPN 连接是更安全且推荐的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T04:05:14.873

您可能还需要确保 SQL Server Browser 服务正在运行，如果在打开端口 1433（或您设置的任何端口）后仍然看不到它，等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T03:54:23.573

要从您的主设备通过 Management Studio 访问该设备，您必须确保 TCP/IP 端口 1433 在服务器和客户端防火墙上均已打开。这是握手端口（或者您可以更改默认端口并通过 xxx.xxx.xx.xx,portnum 作为地址访问它）。握手完成后，客户端和服务器实际上将通过不同的端口进行通信，因此这也必须打开。 **[您可以在此处](http://support.microsoft.com/kb/287932)****找到更多信息。**

不过，一般而言，您应该只需将 Management Studio 指向 IP 地址即可。到达该框后，您需要通过 SQL 登录帐户登录（不要使用 sa - 请参阅下面的建议）。

如果您仍然遇到问题，请运行 SQL Server 配置管理器（在 SQL Server 菜单上）并确保 TCP/IP 已启用（请参阅网络配置下的协议）并且 SQL Server 对来自框外的连接开放。最后，如果您*仍然*遇到问题，请检查您本地的网络：在 Windows 目录（或 System32）中找到 CliConfig.exe 并运行它以确定您是否也在使用 TCP/IP。

好的 - 关于安全性的几句话：

我的第一条建议是认识到您在当前配置中非常脆弱。为帮助减少漏洞，请确保运行 SQL Server 表面分析并在适当时遵循其建议。

您还需要禁用 sa 帐户（转到安全、登录并找到 sa，右键单击并选择属性，然后单击状态，然后在“登录”下单击禁用）。您将使用您的管理 Windows 用户帐户而不是 sa 来访问该框。最后，创建一个新的 SQL 登录帐户和一个难以从远程计算机上使用的密码。你看，一旦黑客发现 1433 端口打开，sa 帐户就会不断受到攻击（在躲在防火墙后面之前，我每天收到 16,000+）。其他帐户名称不会。

# oop - 正确的OO Pong

> ID：645303
> 
> 赞同：10
> 
> 时间：2009-03-14T03:40:20.503
> 
> 标签：oop

**我应该如何设计一个“合适的”OO Pong？**

正确的想法是任何元素都可以改变：球、球场和桨的形状，添加障碍，甚至“通电”，比如“可以将球粘在桨上”。

现在，两个更紧迫的问题是：

*   谁检查碰撞？和
*   当确实发生碰撞时，谁告诉球如何反弹？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T03:43:31.837

我想你可以制作一个物理引擎对象，在给定的时间间隔内不断更新。它会检查碰撞、移动球、计算反弹角度等。

编辑#1：为了添加更多细节，“游戏物理”对象将存储对其他游戏对象（如球和桨）的引用。游戏物理对象将有一个“更新”方法，该方法将在游戏运行时连续调用。此方法将执行的一些步骤是：

*   获取桨的当前位置（由玩家控制）。
*   根据球之前的速度和方向以及自上次更新以来经过的时间来更新球的位置。
*   检测与其他物体（桨、墙等）的碰撞。
*   根据任何碰撞重新计算球的速度和方向。

只是一些想法。

编辑#2：更详细地阐述面向对象的重点......

各种物理对象，如球和桨，会将固有的物理状态和参数（位置、速度、质量等）存储为**属性**。游戏物理对象本质上将所有物理运动方程表示为**方法**。

举个例子……假设你想模拟空气摩擦对球的影响。球对象将存储诸如“速度”和“阻力系数”之类的属性。游戏物理对象将有一种方法来计算对象上的空气阻力，方法是获取该对象的必要属性并将它们插入给定的[流体阻力](http://en.wikipedia.org/wiki/Drag_(physics))方程。

通过以这种方式封装事物，可以更轻松地更新代码。例如，如果您想对流体阻力使用不同的方程，您需要进行的唯一修改就是对游戏物理对象的适当方法进行修改。其他对象都不需要修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T04:00:54.260

在我看来，法院将是进行检查的合适对象，或者根据逻辑的复杂程度，一个用于处理碰撞的单独类（即像 gnovice 所说的某种物理引擎）。

球和桨不必相互了解，因为它们在面向对象的意义上没有直接关系。一个不包含另一个，也不从另一个派生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T04:23:21.523

在这样的典型环境中。每个对象都有机会响应与它们碰巧与之交互的所有其他对象发生碰撞的事件。在某种伪（python）代码中：

```
class Moveable:
     def Update(self):
          self.move()

class Ball(Moveable):
     def Collide(self, target):
          self.restore() # move out of the bounding box 
                         # of whatever we collided into from 
          self.reflect() # change direction after bouncing
          if target is a Paddle:
              self.speedup() # Make it a little harder after hitting a paddle

class Paddle(Moveable):
     def Collide(self, target):
         if target is a Ball:
             self.AwardSomePoints()

def main_loop():
    ...
    while True:
        for thing_one in Moveables:
            thing_one.Update()

            for thing_two in Moveables:
                if thing_one is not thing_two 
                        and thing_one is touching thing_two:
                    thing_one.collide(thing_two) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-11T12:29:43.567

我喜欢使用模型-视图-控制器方法，所以在这种情况下，您将拥有一个游戏控制器来处理控制碰撞，但在深入研究时，它只会控制一个控制器......在这里解释太复杂了，我我没那么聪明，所以检查一下：

[http://en.wikipedia.org/wiki/Model-view-controller](http://en.wikipedia.org/wiki/Model-view-controller)

# c# - 清除 Cookie 不起作用？设置过期日期方法

> ID：645305
> 
> 赞同：1
> 
> 时间：2009-03-14T03:41:07.193
> 
> 标签：c#, asp.net, cookies

我正在调用以下代码：

```
protected void SetCookieValue(
    string sCookieName, object oValue, DateTime dtExpires)
{
    Response.Cookies[sCookieName].Value = Utility.ToStringValue(oValue);
    Response.Cookies[sCookieName].Expires = dtExpires;
    Response.Cookies.Add(Response.Cookies[sCookieName]);
} 
```

日期设置为 30 天前：

```
SetCookieValue(sCookieName, null, DateTime.Now.AddDays(-30.0)); 
```

为了强制cookie过期。它在我的开发盒（Windows 7、IIS7）上运行，但现在在 IIS6 上失败。我没有更改此代码，它似乎已经工作了一年多，但是在生产站点上，我无法清除此 cookie。

兼容模式下的 IE8 浏览器（用于开发和生产。

有任何想法吗？

* * *

感谢您朝正确的方向轻推。这就是我最终得到的结果：

```
protected void SetCookieValue(
        string cookieName, object value, DateTime expireDate)
{
    HttpCookie cookie = new HttpCookie(cookieName);
    cookie.Value = Utility.ToStringValue(value);
    cookie.Expires = expireDate;

    if (Request.Cookies[cookieName] != null)
    {
        Response.SetCookie(cookie);
    }
    else
    {
        Response.Cookies.Add(cookie);
    }
} 
```

因此，当我杀死一个 cookie 时，我使用名称、空值和 DateTime.MinValue 到期日期调用此方法。如果 cookie 存在，它会被更新，如果不存在，它会在过期时添加。

我想使用相同的函数来创建或杀死一个 cookie，从而将其排除在自己的 DeleteCookie 方法之外。我还完全重命名了饼干，以确保我从新开始。我可能会得到一点用户的反对，但是哎呀！:)

**谢谢！答案被标记为让我朝着正确方向前进的人。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T04:20:09.457

您应该从[Request.Cookies](http://msdn.microsoft.com/en-us/library/ms525394.aspx)检索 cookie ，然后将过期的 cookie 添加到[Response.Cookies](http://msdn.microsoft.com/en-us/library/ms524757.aspx)：

```
public void DeleteCookie(string cookieName)
{
    if (Request.Cookies[cookieName] != null)
    {
        HttpCookie myCookie = new HttpCookie(cookieName);
        myCookie.Expires = DateTime.Now.AddDays(-1d);
        Response.Cookies.Add(myCookie);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T03:57:11.710

我不是 asp.net 专家，但根本没有玩弄你的代码，唯一让我觉得奇怪的是你在打电话：

```
Response.Cookies.Add(Response.Cookies[sCookieName]); 
```

在已经打电话之后

```
Response.Cookies[sCookieName].Value = Utility.ToStringValue(oValue);
Response.Cookies[sCookieName].Expires = dtExpires; 
```

这对我来说似乎是多余的，可能会导致一些奇怪的行为。而且，根据我有限的经验，前两行就是你真正需要的。

另一种选择是，虽然 IE8 仍处于预发布阶段，但它可能在 cookie 处理方面存在一些问题。尝试使用其他浏览器，看看是否仍然得到相同的结果。

# python - 可以在不使用 Python 库的情况下发出 GET 请求吗？

> ID：645312
> 
> 赞同：679
> 
> 时间：2009-03-14T03:44:22.350
> 
> 标签：python

如果我知道内容将是一个字符串，那么在 Python 中进行 HTTP GET 的最快方法是什么？我正在搜索文档以获取快速的单行代码，例如：

```
contents = url.get("http://example.com/foo/bar") 
```

但是我使用谷歌能找到的只有`httplib`和`urllib`- 我无法在这些库中找到快捷方式。

标准 Python 2.5 是否具有上述某种形式的快捷方式，还是我应该编写一个函数`url_get`？

1.  我不希望将炮击的输出捕获到`wget`or `curl`。

* * *

## 回答 #1

> 赞同：942
> 
> 时间：2009-03-14T03:48:24.290

蟒蛇 3：

```
import urllib.request
contents = urllib.request.urlopen("http://example.com/foo/bar").read() 
```

蟒蛇2：

```
import urllib2
contents = urllib2.urlopen("http://example.com/foo/bar").read() 
```

[`urllib.request`](https://docs.python.org/library/urllib.request.html)和的文档[`read`](https://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)。

* * *

## 回答 #2

> 赞同：455
> 
> 时间：2013-04-08T01:30:40.973

您可以使用一个名为[requests](https://requests.kennethreitz.org/en/master/)的库。

```
import requests
r = requests.get("http://example.com/foo/bar") 
```

这很容易。然后你可以这样做：

```
>>> print(r.status_code)
>>> print(r.headers)
>>> print(r.content) 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-03-14T16:40:06.503

如果您希望使用 httplib2 的解决方案成为 oneliner，请考虑实例化匿名 Http 对象

```
import httplib2
resp, content = httplib2.Http().request("http://example.com/foo/bar") 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-03-14T16:13:13.010

看看[httplib2](https://github.com/httplib2/httplib2)，它——除了很多非常有用的特性——提供了你想要的东西。

```
import httplib2

resp, content = httplib2.Http().request("http://example.com/foo/bar") 
```

其中 content 将是响应正文（作为字符串），而 resp 将包含状态和响应标头。

虽然它不包含在标准 python 安装中（但它只需要标准 python），但它绝对值得一试。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-02-24T21:18:23.413

`urllib3`使用强大的库很简单。

像这样导入它：

```
import urllib3

http = urllib3.PoolManager() 
```

并提出这样的请求：

```
response = http.request('GET', 'https://example.com')

print(response.data) # Raw data.
print(response.data.decode('utf-8')) # Text.
print(response.status) # Status code.
print(response.headers['Content-Type']) # Content type. 
```

您也可以添加标题：

```
response = http.request('GET', 'https://example.com', headers={
    'key1': 'value1',
    'key2': 'value2'
}) 
```

更多信息可以在[urllib3 文档](https://urllib3.readthedocs.io/)中找到。

`urllib3`比内置`urllib.request`或`http`模块更安全、更容易使用并且稳定。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-01-01T15:11:48.113

无需进一步必要的导入，此解决方案就可以工作（对我而言）- 也可以使用 https：

```
try:
    import urllib2 as urlreq # Python 2.x
except:
    import urllib.request as urlreq # Python 3.x
req = urlreq.Request("http://example.com/foo/bar")
req.add_header('User-Agent', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36')
urlreq.urlopen(req).read() 
```

在标题信息中未指定“User-Agent”时，我经常难以抓取内容。然后通常使用以下内容取消请求：`urllib2.HTTPError: HTTP Error 403: Forbidden`或`urllib.error.HTTPError: HTTP Error 403: Forbidden`。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-12-10T12:13:36.867

实际上，在 Python 中，我们可以从文件中读取 HTTP 响应，这是从 API 读取 JSON 的示例。

```
import json
from urllib.request import urlopen

with urlopen(url) as f:
    resp = json.load(f)

return resp['some_key'] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-09-16T06:22:04.507

**如何发送标头**

蟒蛇 3：

```
import urllib.request
contents = urllib.request.urlopen(urllib.request.Request(
    "https://api.github.com/repos/cirosantilli/linux-kernel-module-cheat/releases/latest",
    headers={"Accept" : 'application/vnd.github.full+json"text/html'}
)).read()
print(contents) 
```

蟒蛇2：

```
import urllib2
contents = urllib2.urlopen(urllib2.Request(
    "https://api.github.com",
    headers={"Accept" : 'application/vnd.github.full+json"text/html'}
)).read()
print(contents) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-01-05T01:21:33.460

theller 的 wget 解决方案非常有用，但是，我发现它不会在整个下载过程中打印出进度。如果您在reporthook 中的打印语句之后添加一行，那就完美了。

```
import sys, urllib

def reporthook(a, b, c):
    print "% 3.1f%% of %d bytes\r" % (min(100, float(a * b) / c * 100), c),
    sys.stdout.flush()
for url in sys.argv[1:]:
    i = url.rfind("/")
    file = url[i+1:]
    print url, "->", file
    urllib.urlretrieve(url, file, reporthook)
print 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-03-14T16:47:32.553

这是 Python 中的 wget 脚本：

```
# From python cookbook, 2nd edition, page 487
import sys, urllib

def reporthook(a, b, c):
    print "% 3.1f%% of %d bytes\r" % (min(100, float(a * b) / c * 100), c),
for url in sys.argv[1:]:
    i = url.rfind("/")
    file = url[i+1:]
    print url, "->", file
    urllib.urlretrieve(url, file, reporthook)
print 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-05-22T17:08:22.980

如果您专门使用 HTTP API，还有更方便的选择，例如[Nap](https://github.com/kimmobrunfeldt/nap)。

例如，以下是自2014 年*5 月 1 日*以来从 Github 获取要点的方法：

```
from nap.url import Url
api = Url('https://api.github.com')

gists = api.join('gists')
response = gists.get(params={'since': '2014-05-01T00:00:00Z'})
print(response.json()) 
```

更多示例：[https ://github.com/kimmobrunfeldt/nap#examples](https://github.com/kimmobrunfeldt/nap#examples)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-06-24T14:18:05.250

优解轩，Theller。

为了让它与 python 3 一起工作，请进行以下更改

```
import sys, urllib.request

def reporthook(a, b, c):
    print ("% 3.1f%% of %d bytes\r" % (min(100, float(a * b) / c * 100), c))
    sys.stdout.flush()
for url in sys.argv[1:]:
    i = url.rfind("/")
    file = url[i+1:]
    print (url, "->", file)
    urllib.request.urlretrieve(url, file, reporthook)
print 
```

此外，您输入的 URL 应该以“http://”开头，否则会返回未知 url 类型错误。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-29T23:02:00.720

对于`python >= 3.6`，您可以使用[dload](https://pypi.org/project/dload/)：

```
import dload
t = dload.text(url) 
```

* * *

对于`json`：

```
j = dload.json(url) 
```

* * *

安装：
`pip install dload`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-03-06T16:26:21.400

如果您想要较低级别的 API：

```
import http.client

conn = http.client.HTTPSConnection('example.com')
conn.request('GET', '/')

resp = conn.getresponse()
content = resp.read()

conn.close()

text = content.decode('utf-8')

print(text) 
```

# macos - 如何在 Mac OSX 中检测新的或修改的文件

> ID：645321
> 
> 赞同：5
> 
> 时间：2009-03-14T03:51:34.500
> 
> 标签：macos, file, filesystems, fsevents

在 Windows 操作系统中，MS 提供了 ReadDirectoryChangesW 和 FindFirstChangeNotification API 来检测新的或修改的文件，Mac OSX 是否也提供相同的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T04:34:18.297

在 Mac OS X Leopard中使用[文件系统事件 API](http://developer.apple.com/documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html)[监控文件更改](http://developer.apple.com/mac/articles/cocoa/filesystemevents.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T00:36:14.197

有关 Python 实现，请参阅[http://pypi.python.org/pypi/MacFSEvents/0.2.1](http://pypi.python.org/pypi/MacFSEvents/0.2.1)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T04:29:09.590

OS X 提供了一个名为[FSEvents](http://developer.apple.com/documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html)的框架，不过我不太了解它的细节。

# apache-flex - 如何阻止数据网格的第一行 itemRenderer 实例化/添加/初始化/等两次？

> ID：645323
> 
> 赞同：4
> 
> 时间：2009-03-14T03:54:25.553
> 
> 标签：apache-flex, actionscript-3, flex3, mxml, itemrenderer

在 Flex DataGrid 的第一行中，itemRenderer 将初始化两次。跟踪结果显示 flex 框架可能正在创建第一行的 itemRenderer 的两个实例。在一个更复杂的应用程序中，itemRenderer 包含一个数据绑定的 ColorPicker，我们看到由于这个问题而发生了无限循环。只有第一行的 itemRenderer 被初始化了两次。有没有办法覆盖 flex 的行为并阻止这种情况发生？下面的代码演示了这个问题：

主要应用：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" initialize="on_initialize(event);">
<mx:Script>
<![CDATA[
/**
 * This experiment shows how the first row's itemrenderer is instantiated/added/initialized twice.
 * We've never even noticed this before we found that a data-bound ColorPicker enters a infinite
 * loop when it is within an itemRenderer.
 */
    import mx.collections.ArrayCollection;
    import mx.events.FlexEvent;

    private var dg_array:Array;
    private var dg_arrayCollection:ArrayCollection;

    private function on_initialize(event:FlexEvent):void {
        dg_array = new Array();
        dg_arrayCollection = new ArrayCollection();
        dg_arrayCollection.addItem("item 1");
        dg_arrayCollection.addItem("item 2");

        dg.dataProvider = dg_arrayCollection;
    }
]]>
</mx:Script>
<mx:DataGrid id="dg" width="100%" height="100%" rowCount="5">
    <mx:columns>
        <mx:DataGridColumn headerText="Name" itemRenderer="SimpleItemRenderer"/>
    </mx:columns>
</mx:DataGrid>
</mx:Application> 
```

简单项目渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="400" height="300" initialize="//on_initialize(event);">
<mx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        [Bindable]
        override public function set data(value:Object):void { _data = value; }                 
        override public function get data():Object { return _data; }
        private var _data:Object;

        private function on_initialize_textInput(event:FlexEvent):void {
            trace("initialize:event.target="+event.target+", " + _data); // runs twice, for the first item only

        }

        private function on_creationComplete_textInput(event:FlexEvent):void {
            trace("creationComplete:event.target="+event.target+", " + _data); // runs twice, for the first item only
        }
    ]]>
</mx:Script>
<mx:TextInput text="{data}" id="textInput" initialize="on_initialize_textInput(event);" creationComplete="on_creationComplete_textInput(event);"/>
</mx:Canvas> 
```

缩写输出：

初始化：event.target=ItemRenderers0.dg...SimpleItemRenderer12.textInput，null 初始化：event.target=ItemRenderers0.dg...SimpleItemRenderer24.textInput，null 创建完成：event.target=ItemRenderers0.dg...SimpleItemRenderer24.textInput，项目 1 初始化：event.target=ItemRenderers0.dg...SimpleItemRenderer29.textInput，null creationComplete：event.target=ItemRenderers0.dg...SimpleItemRenderer29.textInput，项目 2 creationComplete：event.target=ItemRenderers0.dg...SimpleItemRenderer12 .textInput，第 1 项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-25T18:35:50.427

[更新了 Peter Ent 在 itemRenders 上的系列链接](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-25T01:16:06.110

您的 itemRenderer 没有真正正确实施，这可能是您的问题的原因

被覆盖的 set data 方法应该设置 super.data = value。您不需要实现自己的 _data 属性，因为 Flex 容器实现了 IDataRenderer 并且已经拥有它。我认为，如果不运行您的代码，您就会遇到缓存/回收问题。

我通常更喜欢做的是创建一个**[Bindable] 私有 myProperty:Object**（通常是扩展 EventDispatcher 的自定义 MyObjectVO）。然后，在我的设置数据方法中，我将设置**super.data = value**后跟**if(value!=null) myProperty=value**。

这允许我强输入我的实际数据，保持与 Canvas（或其他容器）实现的 IDataRenderer 接口相关的机制完好无损，并确保数据被正确回收。

初始化广告创建完成是 itemRenderers 中的不良事件，因为它们实际上是被回收的，而且这些方法的行为不像人们期望或希望的那样。

我无法表达[Peter Ent 在 itemRenders 上的这个系列](http://weblogs.macromedia.com/pent/archives/2008/03/itemrenderers_p.html)对我有多么有益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-25T23:55:10.360

嗯，他是对的，我有同样的错误，第一个 itemRenderer 被调用了两次，你可以在官方论坛看到我的帖子：

[http://forums.adobe.com/thread/604259](http://forums.adobe.com/thread/604259)

并在这里填写了一个错误：

[https://bugs.adobe.com/jira/browse/SDK-26010](https://bugs.adobe.com/jira/browse/SDK-26010)

# ruby-on-rails - 如何在 hostgator 上部署 Ruby on Rails 应用程序？

> ID：645332
> 
> 赞同：5
> 
> 时间：2009-03-14T03:59:52.623
> 
> 标签：ruby-on-rails, ruby

如何在 hostgator 上部署 Ruby on Rails 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T05:52:22.387

谷歌是你的朋友。第一次点击“hostgator rails”。

[http://forums.hostgator.com/ruby-rails-support-t13038.html?t=13038](http://forums.hostgator.com/ruby-rails-support-t13038.html?t=13038)

# windows - 如果部署 PC 具有不同的字体 DPI，您如何计算适当的字体大小？

> ID：645348
> 
> 赞同：1
> 
> 时间：2009-03-14T04:12:18.350
> 
> 标签：windows, vb6, dpi

我试图找出目标 Windows 机器上的字体 DPI 大小并修改我们应用程序的字体，使其看起来与目标机器与开发机器具有相同 dpi 时的大小相同。（因此，较大的目标 DPI 意味着我们会使字体比开发时更小）。

**我想知道下面的解决方案是否有任何问题，特别是 LOGPIXELSX=88 是否正确。**

**背景**

我调整表单上所有控件和字体的大小以匹配当前的 Windows 屏幕分辨率。但是，如果有人将他们的字体 DPI 设置得更高，我们需要考虑这一点并使字体*更小*（因此它最终在屏幕上是正确的尺寸）。我们的字体已经很大了（尤其是我们用屏幕分辨率调整了它们的大小）。来自较高 DPI 的额外大小使文本过大。

**到目前为止我的解决方案据** 我所知，如果我们使用 GetDeviceCaps 如下，然后获取 CurrentFontDPI 并执行此操作：（由于新的屏幕分辨率而忽略字体大小修改）：

NewFontSize=CurrentFontSize * (DevelopmentDPI/CurrentFontDPI)

```
 Function CurrentFontDPI
  Dim hwnd, hDC, logPix, r As Long
  Dim  LOGPIXELSX=88
  hwnd = GetDesktopWindow()
  hDC = GetDC(hwnd)
  logPix = GetDeviceCaps(hDC,LOGPIXELSX )
  r = ReleaseDC(hwnd, hDC)
  CurrentFontDPI= logPix 
```

结束函数

仅供参考，上面的代码是“相关的 SO 问题][1] 中更大例程的一部分。我遗漏了其余代码 b/c，它似乎至少有一个错误（它有 NewFont=OldFont * (NewDPI- OldDPI）如果 DPI 没有改变，它会给你零高度字体）

[1]：[http](http://www.BungalowSoftware.com) ://www.BungalowSoftware.com 测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T05:01:20.247

这是[来自 Microsoft](http://msdn.microsoft.com/en-us/library/ms969894.aspx)的一篇关于编写 DPI 感知应用程序的好文章。（请注意，这篇文章与发布到您的相关问题的文章不同。）

LOGPIXELSX 是 Windows 系统调用的参数；它不是 DPI 值。

在 VB6 (IIRC) 中，您可以使用开发时的 TwipsPerPixel（X 和 Y）与运行时的 TwipsPerPixel（X 和 Y）的比率作为确定如何缩放的另一种方法。与您的 DPI 比率相同，但它利用了内置的 VB 属性。

# opengl - 如何混合一个已经有纹理的四边形

> ID：645350
> 
> 赞同：0
> 
> 时间：2009-03-14T04:14:47.737
> 
> 标签：opengl, textures, alphablending

我做了一个四边形，上面有很好的纹理。纹理具有 Alpha 通道 (RGBA)。我用纹理替换了四边形`(GL_REPLACE)`，所以现在我有一个带有（半）透明像素的广告牌。

到目前为止，没有问题。

但是现在我想*混合整个*广告牌，所以它的*整体不透明度发生了变化*。

**我该怎么做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T04:23:19.790

GL_MODULATE，而不是 GL_REPLACE，在将颜色设置为纯白色后，带有适量的 alpha。（例如 glColor(1,1,1,0.5)）

（在 OpenGL 上应该可以正常工作。似乎它在 ES 上也会很好。）

# windows - 所有 Windows PC 显示器上的每英寸像素数是标准的吗？GetDeviceCaps WinAPI 调用中的 (LogPixelsX)

> ID：645352
> 
> 赞同：7
> 
> 时间：2009-03-14T04:16:23.037
> 
> 标签：windows, dpi

*对于 Windows PC 显示器，我不是指 Windows CE 或手持设备等。*

**澄清**
下面的一些人错误地认为我在问显示器上的 DPI（每英寸点数）是多少。我要的是[GetCaps](http://msdn.microsoft.com/en-us/library/ms929230.aspx) API 调用中 LogPixelsX 的值：

**LOGPIXELSX** 沿屏幕宽度每逻辑英寸的像素数。

在我看到的示例中，它设置为 88，与屏幕 DPI*无关*。似乎是一个幻数类型的常数。

在一个相关的[问题](https://stackoverflow.com/questions/645348/how-can-you-calculate-the-appropriate-font-size-if-the-deployment-pc-has-a-differ "关于SO的问题")中，我使用 GetDeviceCaps 来计算当前的屏幕字体 DPI。我发现的代码示例都有：

常量 LOGPIXELSX = 88

这对于所有显示器（甚至是宽屏显示器和普通显示器）都一样吗？如果没有，我如何为当前显示找到它。（MSDN 表明它对于*特定*计算机上的所有监视器都是相同的。

在具有多个显示监视器的系统中，该值对于所有监视器都是相同的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-14T06:11:43.650

要回答您对问题的澄清：

LOGPIXELSX 是您传递给 GetDeviceCaps 以获得当前显示器分辨率的参数（技术上是水平分辨率，但所有现代显示器都具有相同的水平和垂直分辨率）。是的，它总是 88 - 如果您想从 GetDeviceCaps 获得不同的值，您将传入不同的值。例如，要获取每个像素的位数，您需要传递 BITSPIXEL 常量，即 12。这些魔术常量在 Windows API 文件 WINGDI.h 中定义。

MSDN中的注释不是指参数，而是返回值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-14T04:37:02.660

Windows 将始终具有 96 DPI 的分辨率，除非您在显示设置中更改它。在 XP 上，您可以在“显示属性”->“设置”下的“高级”对话框中找到它；我不知道它在其他版本的 Windows 中在哪里找到。

您是正确的，GetDeviceCaps(LOGPIXELSX) 将返回 DPI，但有一点需要注意。从 Vista 开始，Windows 可能会对您实际配置的分辨率撒谎。您需要让您的应用程序具有 DPI 感知能力，以获取配置的真实情况。这是一个 Microsoft 页面，提供了一些详细信息，特别强调了 Windows 7 中的变化。

[http://msdn.microsoft.com/en-us/library/dd464659(VS.85).aspx](http://msdn.microsoft.com/en-us/library/dd464659(VS.85).aspx)

还有另一个链接：

[http://msdn.microsoft.com/en-us/library/ms701681(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms701681(VS.85).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T04:53:27.050

请参阅[SetProcessDPIAware()](http://msdn.microsoft.com/en-us/library/ms633543(VS.85).aspx)（对于 Vista）和[GetDeviceCaps(...)](http://msdn.microsoft.com/en-us/library/dd144877(VS.85).aspx)以获取 DPI。

XP 有 96 或 120 dpi。Vista 实际上有一个滑块可以通过 DPI 设置的“连续体”进行调整。在 Vista 上，DWM 负责缩放您的应用程序，除非您明确指出您是 DPI 感知的。对于 XP，您应该同时计划 96 和 120。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-16T07:22:49.720

对于图像，图像分辨率（DPIX，DPIY）将采用其他恒定的监视器分辨率。图像 dpi 的 twips 到像素转换如下：

```
 public struct RECT_TAG
    {
        public int iLeft;
        public int iTop;
        public int iHeight;
        public int iWidth;
    }
    public static RECT_TAG ConvertTwipsToPixels(RECT_TAG pobjRect, int plXDPI, int plYDPI)
    {
        pobjRect.iLeft = pobjRect.iLeft * plXDPI / 1440;
        pobjRect.iTop = pobjRect.iTop * plYDPI / 1440;
        pobjRect.iWidth = pobjRect.iWidth * plXDPI / 1440;
        pobjRect.iHeight = pobjRect.iHeight * plYDPI / 1440;
        return pobjRect;

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T04:20:49.547

Windows 中的两个标准 DPI 设置是 96 dpi（正常尺寸）和 120 dpi（大尺寸）。我确信有一个 Win32 调用来获取此设置，但我不确定在哪里指导你。MSDN 可能有你的答案。

**编辑：**我应该澄清一下，Windows是指Windows XP

# python - 实现基于节点的图形界面？

> ID：645354
> 
> 赞同：22
> 
> 时间：2009-03-14T04:16:37.217
> 
> 标签：python, user-interface, directed-graph

我想实现一个节点接口，基本上是一个[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，其中每个节点对其输入连接执行操作，并输出一些东西（你可以连接到另一个节点）

一些示例应用程序：

*   [苹果“摇一摇”](http://www.apple.com/shake/) ——[截图](http://images.apple.com/es/shake/images/index_hero.jpg)
*   [铸造厂“核弹”](http://www.thefoundry.co.uk/pkg_overview.aspx?ui=CBC2593A-2C9F-4EF9-84BE-C198B0171453) ——[截图](http://upload.wikimedia.org/wikipedia/en/5/5a/Nuke_screenshot.png)
*   [MindNode](http://www.mindnode.com/) - [截图](http://www.mindnode.com/wordpress/wp-content/uploads/2007/12/mn-screen-2.png)
*   [vvvv](http://vvvv.org/) -[截图](http://vvvv.org/tiki-index.php?page=screenshots)
*   [石英作曲家](http://developer.apple.com/graphicsimaging/quartz/quartzcomposer.html)-[截图](http://img24.imageshack.us/img24/8969/quartzcomposer.png)

* * *

作为第一个目标，我想要一个只有 2 个节点的*图形应用程序。*一个“数字”，它简单地输出一个固定的数字，一个“加”节点，它接受两个输入并输出两者的总和。

正如人们到目前为止所回答的那样，我对如何在代码中表示数据有一个粗略的想法，例如在 Python 的伪代码中：

```
class Number:
    def __init__(self, value):
        self.value = value

    def eval(self):
        return self.value

class Add:
    def __init__(self, input1, input2):
        self.input1 = input1
        self.input2 = input2

    def eval(self):
        return self.input1.eval() + self.input2.eval()

a = Number(20)
b = Number(72)

adder = Add(a, b)
print adder.eval() 
```

我将如何围绕此包装自定义 GUI？像下面这样的东西，但手绘略少！

![节点 UI 模型](https://i.stack.imgur.com/h0l6N.png)

我从哪里开始？我目前计划用 Objective-C/Cocoa 编写它，尽管我非常愿意接受其他语言的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T05:38:55.460

我将从建模一些基本接口开始（在 OOP 意义上，而不是 GUI 意义上）。在我看来，您将拥有一个接受输入集合和单个输出的节点。您没有说明数据类型有多广泛，但您需要一些合适的方法来表示您的输入/输出。对于您的第一个目标，这可能是一个整数。

在一些通用的 C 风格 OOP 语言中（希望它有意义）：

```
class Node<T> {
    Node<T>[] inputs;
    T eval();
}

class AdderNode extends Node<int> {
    int eval() {
        int accum = 0;
        for (inputs : i)
            accum += i.eval();
        return i;
    }
}

class ConstNode<int I> extends Node<int> {
    int eval() { return I; }
}

AdderNode a;
a.inputs.add(ConstNode<2>());
a.inputs.add(ConstNode<3>());
a.eval(); 
```

您可以通过将 int 替换为一些抽象类、泛型或接口来对此进行扩展。当然，实际实现会因实际语言而异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T06:32:34.660

我将从对有趣的操作进行建模开始。最终，您会将它们连接到 UI，但那是方向盘和油门踏板，而不是引擎。

您尝试构建的内容与编程语言有很多共同点：变量、值、类型、表达式、评估等。许多隐喻都是适用的，可能会提供一些指导。

如果您使用的是 .NET 3.5，则可以选择[Expression Trees](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，它允许您在运行时表示和编译代码表达式。

例如，为您的第一个目标建模：

```
using System.Linq.Expressions;

ConstantExpression theNumber2 = Expression.Constant(2);
ConstantExpression theNumber3 = Expression.Constant(3);

BinaryExpression add2And3 = Expression.Add(theNumber2, theNumber3); 
```

要调用表达式，我们需要`add2And3`用一个方法包装。这是通过 lambda 表达式完成的：

```
Expression<Func<int>> add2And3Lambda = Expression.Lambda<Func<int>>(add2And3); 
```

`Func<int>`表示一个不带参数并返回一个`int`. 在 C# 中，由 表示的代码`add2And3Lambda`将是：

```
() => 2 + 3 
```

所以我们有一个表达式树，它的根是一个方法。因为方法是*可调用*的，我们可以将树编译成底层委托类型的实例：

```
Func<int> add2And3Func = add2And3Lambda.Compile(); 
```

现在我们可以调用我们构建的代码：

```
int theNumber5 = add2And3Func(); 
```

支持 .NET 语言可用的每个表达式。

想象一下图中的每个节点都有一个`Expression`关联。这可能会让您了解表达式树的强大功能以及它们如何帮助您完成这项任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-23T18:37:02.720

我发现了一些关于在 Cocoa 中实现这样一个接口的有用信息：

*   [Intro to Quartz](http://cocoadevcentral.com/d/intro_to_quartz/) and [Intro to Quartz II](http://cocoadevcentral.com/d/intro_to_quartz_two/) - 描述 NSView 中的基本绘图
*   [Cocoadev 上的FlowChartView](http://www.cocoadev.com/index.pl?FlowChartView) - 几乎是我一直在寻找的，Quartz Composer 接口的实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T09:45:37.753

所有这些节点系统的共同点是它们描述了一种函数式编程语言。一个函数接受多个参数并返回一个结果，无论它的设计目的是什么。一些例子：

*   图形：模糊（图像、内核、半径）-> 图像

*   数学：加（数字，数字）-> 数字

*   关系：过滤器（表，谓词）-> 表

基本上，这归结为`Func<object[], object>`（C#）之类的函数签名。

您将面临如何使您的节点系统持久化的问题。你想让一个节点的结果只被另一个节点（树）或多个节点（图）用作参数吗？

一棵树的例子，直接有一个子节点的参数：

```
Add(
  Multiply(
    Constant(5),
    Constant(4)
  ),
  Multiply(
    Constant(5),
    Constant(3)
  )
) 
```

图示例，将所有节点存储在列表中并且仅使用引用：

```
A := Constant(5)
B := Constant(4)
C := Constant(3)

D := Func(Multiply, A, B)
E := Func(Multiply, A, C)

F := Func(Add, D, E) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-29T12:52:51.587

我在研究类似的解决方案时偶然发现了这个线程。最近我在 github [https://github.com/nodebox/nodebox](https://github.com/nodebox/nodebox)上发现了一个不错的项目， 这似乎正是您正在寻找的。至少可以从项目中提取和采用编辑器组件。

问候，斯蒂芬

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T21:15:43.947

也许[bwise](http://wiki.tcl.tk/8537)有什么有趣的事情？

[本页](http://wiki.tcl.tk/9219)下半部分显示了使用 bwise 创建一个以两个数字作为输入的乘法块的示例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-12T21:14:56.507

我实现了一个执行图，就像你在这个项目中描述的那样： [GRSFramework](http://gabyx.github.io/GRSFramework/)

源代码可以在[这里](https://github.com/gabyx/GRSFramework/tree/master/common/include/GRSF/logic)找到。

目前，我正致力于在项目[ExecutionGraph](https://github.com/gabyx/ExecutionGraph)中发布该系统的更好、更干净的版本。
你可能也会感兴趣。

然后还有来自 Google 的 TensorFlow 库，它有一个类似的系统实现了[TensorFlow](https://www.tensorflow.org/)

# windows - 跟踪选定或指向的单词/行/段落的 Windows 界面

> ID：645361
> 
> 赞同：1
> 
> 时间：2009-03-14T04:21:00.903
> 
> 标签：windows, winapi

有人知道如何获取用户将鼠标指向的段落吗？它不应该依赖于使用的应用程序。

一个很好的例子是字典应用程序，当您按住 ctrl 时右键单击它会翻译单词。

我很好奇他们是如何做到的，因为我正在考虑创建单词学习工具，该工具还可以记住遇到新单词的句子。

谢谢。

更新： [从其他应用程序问题中捕获选定的文本](https://stackoverflow.com/questions/513883/capture-text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T06:42:49.487

您正在考虑使用可访问性 API（例如，盲人的屏幕阅读器使用）。有关使用详情，请参阅[MSDN 的 UI 自动化页面。](http://msdn.microsoft.com/en-us/library/ms753107.aspx)

# if-statement - 是否正在编写 `if (foobar == ("this" || "that"))` 来检查 foobar 是否等于任何主要语言支持的“this”或“that”？

> ID：645362
> 
> 赞同：7
> 
> 时间：2009-03-14T04:22:22.540
> 
> 标签：if-statement, programming-languages

我对能够用这样的某种语言编写 if 语句有微弱的记忆：

```
if (foobar == ("this" || "that")) 
```

代替：

```
if (foobar == "this" || foobar == "that") 
```

后者更冗长，因此对我的审美吸引力较小。

任何主要语言都支持以前的约定吗？这是否没有得到广泛支持的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T04:37:23.547

[Icon](http://www.cs.arizona.edu/icon/index.htm)编程语言具有此功能。

通过使用生成器，你可以做到

```
if i = (0 | 1) then write("0 or 1") 
```

如果 i = 0 或 i = 1，则成功。您甚至可以这样做：

```
if (i | j | k) = (0 | 1) then write("0 or 1") 
```

如果 i、j 或 k 中的任何一个等于 0 或 1，则成功。

这背后的基本思想是，这些`(1|2|3..)`序列中的每一个都创建一个生成器，该生成器将依次返回每个值，直到它用完值。当您在这样的布尔位置中使用生成器时，将从生成器请求值，直到比较成功。当您在比较的任一侧组合两个生成器时，将尝试所有可能的组合，直到一个成功。（如果值不相等，则相等运算符“失败”而不是返回 false。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T04:35:35.393

我似乎记得帕斯卡有一个`in`声明，如：

```
if x in (foo, bar) then
  ... 
```

至于为什么它没有得到更广泛的支持，让我大吃一惊。这似乎是一块相当不错的语法糖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T04:43:44.047

我记得使用该语法的唯一地方是大约 25 年前的 COBOL。

我怀疑它没有得到广泛支持的原因是因为它会导致编译器无法解决的歧义。在您的具体情况下，这不是一个特别的问题，因为“this”和“that”是字符串，条件 OR 运算符没有意义。但是考虑一下这个片段，在像 C 这样的语言中，条件的结果是布尔值 0 或 1：

```
int a = 22;
int b = 99;
int rslt = SomeFunction();
if (rslt == (a || b)) 
```

此时编译器无法可靠地确定您想要什么。您是否打算这样做：

```
if (rslt == a || rslt == b) 
```

或者，您是否打算：

```
if ((rslt == 0 && a == 0 && b == 0) || (rslt == 1 && a == 1 && b == 1)) 
```

您可以限制可以使用此类语法的类型，但随后您将异常堆积在理想情况下应该是正交语法的基础上。这会使用户感到困惑并使编译器复杂化。

它还强制表达式在条件语句中的计算方式与在赋值语句中的不同。这无疑也会使编译器复杂化。

它当然可以工作，但我认为它需要带有重载符号的新语法，并且所有这些都是为了获得可疑的收益。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T05:02:51.147

交互式小说（文本冒险）创作语言[Inform](http://www.inform-fiction.org/)使用“或”运算符支持它（与通常的逻辑或不同，写为“||”）：

```
if (qty==2 or 3)
    print "some";
else
    print "many"; 
```

> 这是否没有得到广泛支持的原因？

这有点特殊的魔法；除了简单的示例表达式之外，尚不清楚它在其他任何东西中的作用。

```
if (n or 8==m+(1 or 2) or 7) // plausible
if (qty<4 or 5) // huh?
a= "cat" or "dog" // er 
```

Python 和其他现代脚本语言中可用的“if value in (sequence)”表示法现在可能已经占据了这个利基市场。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T04:49:37.747

该`||`运算符是一个二元运算符，它接受两个操作数并返回一个值。由于大多数主要语言中表达式的计算方式，不可能使用该语法来检查一个值是否等于一组值中的一个。这就是为什么大多数主要语言都不支持它的原因。

`in`但是，@1800 INFORMATION 发布的语法受到许多语言的支持。如果您的语言不支持它，您可以创建一个名为`in()`or的函数，该函数`in_array()`接受两个参数，一个值和一个数组，`true`如果数组包含该值，则返回。（例如，PHP 有一个内置的[in_array()](http://php.net/in_array)函数。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-15T09:14:13.400

在 Python 中你可以这样写

```
if(foobar in ('this', 'that', 'and something else')) 
```

('this', 'that', 'and something else') - 这是一个列表类型。

所以，我认为在任何 oop 语言中，您都可以创建自己的类：

```
MyClass(object):

  List values

  def in(value):
     return search_value_in_values(value) 
```

并写出这样的东西：

```
if(new MyClass('this', 'that', 'and something else').in(foobar)) 
```

# django - 我应该使用 git 来部署网站吗？

> ID：645363
> 
> 赞同：11
> 
> 时间：2009-03-14T04:22:46.563
> 
> 标签：django, git, deployment, project-management

我有一个在 django 上运行的网站，（但问题适用于任何东西，php 等）

目前我正在使用[unison](http://www.cis.upenn.edu/~bcpierce/unison/)来部署我的更改，我（有点习惯）喜欢它，因为在此之前我是手动进行的！

现在，当我被 git 弄湿的时候，我开始喜欢它了！而且我正在考虑是否应该使用它而不是统一来部署我的更改！

这样，如果以某种方式部署它们被证明是一场灾难，我将获得能够恢复我的更改的额外好处！

问题是：

*   git适合部署网站吗？

*   我应该注意的任何事情/问题/陷阱？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-11T19:54:00.597

我使用 git 来跟踪我的网站，并像这样部署它：

```
git archive --format=tar --prefix="homepage/" master | gzip | ssh webserver "tar xvz -C ~/public_html" 
```

这值得一点解释。git 的归档命令将导出 master 分支的文件，该文件使用 gzip 压缩以最小化网络流量。它是通过 ssh 远程接收的，它被解压缩到最终的目标目录中。

我使用的部署脚本还有更多内容，但这是最重要的部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-16T17:32:34.130

你可以看看在Djangonauts 中流行的 Fabric [......](http://pypi.python.org/pypi/Fabric/0.0.3)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-14T05:14:31.743

如果问题是你是否可以使用 git 来部署你的 django 应用程序，那么答案是肯定的！

但是，流行应用程序的生产部署可能会变得复杂 - 并且不仅仅是回滚文件。您可能需要运行数据库脚本（升级和降级脚本）、重新启动 cron 作业或移动文件。

作为部署过程的一部分，您可能希望完整备份代码库，以便可以回滚任意数量的版本。

一种方法是使用 Capistrano 为您自动执行整个部署过程。您在开发环境中编写脚本并发出命令，例如：cap deploy、cap deploy_with_migrations、cap rollback 等，从登录一直到备份过程和运行 DB 脚本，一切都是自动化的。通过使部署自动化，您可以消除生产环境中的错误。我最近与一个组织进行了交谈，该组织在部署过程中意外删除了整个数据库，并且需要从备份中恢复所有内容。部署错误确实会破坏您的业务，因此如果您认真对待它，您希望将其自动化。

虽然 Capistrano 是一个基于 Ruby 的部署工具，通常与 Rails 一起使用，但它的自动化功能是不可知的。互联网上有许多帖子讨论了使用 Capistrano 部署 Django 应用程序的好处（google - django capistrano）。

您也可以[在此处查看此链接](http://www.unessa.net/en/hoyci/2007/06/using-capistrano-deploy-django-apps/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-03-14T04:38:33.203

好吧，我使用 SVN 来部署我的网站，所以我会说去吧！请记住，每次更新网站的代码时，您可能必须重新启动/重新加载服务器（我不确定 Django 或您运行它的任何东西是否能够解决这个问题）。

# c# - 如何使用单层感知器为 ocr 训练网络？

> ID：645375
> 
> 赞同：1
> 
> 时间：2009-03-14T04:30:46.013
> 
> 标签：c#, ocr, neural-network, perceptron

我正在开发一个程序来使用 OCR 技术从图像中识别字符。到目前为止，我使用了一种扫描图像的方法，但现在我必须使用神经网络。请解释什么是单层感知器以及如何使用它来训练网络。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T04:48:04.100

我将您的部分问题输入[谷歌](http://www.google.com.au/search?hl=en&q=single+layer+perceptron+how+to+use+it+to+train+the+network.&meta=)： [http ://en.wikipedia.org/wiki/Feedforward_neural_network](http://en.wikipedia.org/wiki/Feedforward_neural_network)

您也可以使用这篇 CodeProject 文章，[使用神经网络创建光学字符识别 (OCR) 应用程序](http://www.codeproject.com/KB/dotnet/simple_ocr.aspx?display=Print)作为起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T07:36:37.850

听起来像是对感知​​器/人工神经网络的基本解释可能会对您有所帮助。我写了一篇文章《An Intuitive Example of Artificial Neural Network (Perceptron) Detecting Cars / Pedestrians from a Self-driven Car》

[https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10)

你可以检查一下。希望您会发现它很有用。

[[ ![在此处输入图像描述](https://i.stack.imgur.com/vhReW.jpg)]](https://www.spicelogic.com/Journal/Perceptron-Artificial-Neural-Networks-10) [2](https://i.stack.imgur.com/vhReW.jpg)

# sharepoint - 如何在 sharepoint 中创建子列表

> ID：645378
> 
> 赞同：7
> 
> 时间：2009-03-14T04:33:41.717
> 
> 标签：sharepoint

是否可以在 sharepoint 中创建子列表？我目前正在使用文件夹来组织我的内容，但是在以编程方式访问它们时，文件夹在 sharepoint 中是一个完全不同的概念。

我想实现类似：
-web
----List A
---------Sub List 1
---------Sub List 2
----List B
----- ----子列表1
---------子列表2

编辑1：

我正在尝试在网络下方有一个可排序的列表。目前，我通过创建具有自定义 SortOrder 列和标题的自定义文件夹来实现此目的。文件夹标题最终将成为公共站点上的部分标题，每个文件夹中的项目将成为部分下面的内容。有没有更好的方法来做一些看起来相当微不足道的事情？

谢谢你的帮助

编辑2（对杰森的回应）：

好吧，我们希望保持内容井井有条。假设我们有一份公司领导名单。在此列表中，我们有主席、首席执行官、董事文件夹。然后每个文件夹都有项目（人）。有没有更好的方法来组织这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-14T04:42:05.830

具体来说，没有。SharePoint 中不能有嵌套列表。

但是，您可以通过多种方式获得与最终用户非常相似的东西。有两种选择：

第一个选项是分组。包括您要分组的列（例如，对于包含城市名称的列表，您可能希望按州或国家/地区分组 - 或两者），然后设置视图以按该（或那些）列分组。

第二种方法是在同一个站点（必须是同一个站点）中使用两个单独的列表，并使用查找列类型将一个列表链接到另一个列表（例如，您创建一个列表来保存国家列表，一个列表来保存州和第三个列表，用于保存城市列表，其中包括州和国家/地区的查找列）。您只能进行一级查找，因此您不能，例如，在州列表中有国家的查找列，然后将州列表链接到城市列表并显示城市所在的国家；您可以很好地显示州（如果您在州列表上创建一个计算列以显示“州、国家/地区”，那么您可以在城市列表中显示结果）但仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T02:16:16.903

您不能在 SharePoint 中有子列表，但如果您的所有列表都将具有相同的元数据，您可以确定文档库中有文件夹。所有的文档库都是一个用来存放文档的列表。您可以在其中放置子文件夹以及所有这些。

话虽如此，我认为您在这里看到的很多反对意见是，这种“子列表”的想法并没有真正发挥 SharePoint 的真正威力，因为您使用的是 SQL 之类的关系数据库。理想情况下，您不应该考虑“子列表”本身。我认为你真正应该考虑的是列表的不同视图，它本身或多或少是一个数据库表。只需在每个特定视图中过滤掉您想要和不想要的项目，就最终用户而言，他们看到的只是他们自己的数据。然后，您可以通过[调用它们](http://msdn.microsoft.com/en-us/library/ms425858%28v=office.14%29.aspx)以编程方式访问这些视图。

```
SPView view = yourList.Views["View Name"];
SPListItemCollection items = list.GetItems(view); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-09T22:10:33.353

SharePoint 2007 没有继承 List-in-List 支持，但是...

在 SP2007 的给定站点集中，您*可以有多个站点（实际上是 Web），并且站点（实际上是 Web）可以具有子站点（实际上是子站点）。*这可以用来模拟上面的“List-in-List”。该方法**可能并不理想**，但如果所有站点（实际上是 Web）都在同一个站点集合中（不要与站点混淆），那么*对于某些任务*来说使用起来并不难。在这种情况下，以下将是：

```
-网站集
----网络A
---------子列表1
---------子列表2
---------Web C（为什么不呢？）
----网络B
---------子列表1
---------子列表2

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T16:59:47.120

这是一个需要子列表的示例（我的问题:)）。我正在为我们部门的各种课程收集教科书信息。我真的只需要一次课程信息，然后是与该课程相关的每本书的信息：

GER 555、教科书名称、POC（讲师）信息等教科书名称、ISBN、VER、作者等教科书名称、ISBN、VER、作者等教科书名称、ISBN、VER、作者等

有些课程有多达 8 本书，而且每次都必须填写表格，这让导师很痛苦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T04:40:53.993

SharePoint 中没有子列表的概念。您可以通过使用 Lookup 字段来达到预期的效果。

你能告诉我们更多关于你想要完成的事情吗？

为什么你需要子列表？为什么不为要在公共站点上显示的每个内容区域提供单独的列表？

* * *

更新：

我能想到几种不同的方法：

1.  将选择字段添加到对每个人进行分类的列表中。您将能够创建视图以过滤列表中的项目，并创建 CAML 查询以通过编程方式选择您感兴趣的项目。您应该能够轻松地分割列表以显示在公共页面上。

2.  如果这些是职称，它们可以存储在 AD 中并通过配置文件导入功能导入 SharePoint。然后，您可以开发 Web 部件（可能已经存在），以向用户显示具有特定配置文件属性（在本例中为“标题”）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T05:53:19.023

我认为真正的问题是阻碍“子列表”。如果它是“列表中的列表”，那么我认为它是无法访问的。至少据我所知。

如果您只想链接不同站点或文件夹中的两个列表，只要它们在同一个站点集合下，就可以完成。（如果我轻读了你的帖子，那么对不起！暂停你的阅读！）有几种方法：

1.  看看[这个帖子](http://blah.winsmarts.com/2007-10-Performing_joins_between_SharePoint_lists.aspx)。
2.  [Sharepoint List Collection](http://www.boostsolutions.com/listcollection.html)或[Sharepoint Cascaded Lookup](http://www.boostsolutions.com/cascaded-lookup.html)等工具可能是您理想的方式。麻烦的是大部分都是通过数据视图来操作的。

希望对PS有帮助。这是个好问题！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-24T01:43:49.510

我已设法在自定义列表中创建文档集 (SharePoint 2010)。这有点意外，我不确定这样做是否明智（乐于接受建议）。

我想按“组织”对列表进行分区，并且我想为每个组织设置一个会议记录文档集，其中包含每个组织的会议记录。我使用的步骤：

*   根据列表项为 Minutes 创建内容类型
*   基于 Document Set 为 Minutes Document Set 创建的内容类型
*   为分钟创建自定义列表
*   添加了 Minutes 和 Minutes 文档集作为内容类型
*   删除了 Document 作为列表的内容类型

现在我可以在列表中创建 Minutes 文档集并将 Minutes 列表项添加到这些文档集中 - 附带条件是我正在使用 PowerShell 创建文档集，因为当我尝试使用浏览器进行创建时，SharePoint 告诉我我不能（这很奇怪，因为有一次我确实使用浏览器创建了一个文档集，但是在某个地方停止工作了）。

访问文档时，它不会显示文档集视图。该视图专门用于库，如果您尝试使用它在列表中显示文档集的内容，SharePoint 会报错。

正如我上面提到的，这是一个意外，因为我不知道你不应该这样做。使用风险自负。

# javascript - 快速的 Javascript 表格排序器？

> ID：645397
> 
> 赞同：14
> 
> 时间：2009-03-14T04:48:29.387
> 
> 标签：javascript, jquery

我有一个大约 250 行的表格（可能在 6 个月内翻倍），[这个页面](http://www.reviews-web-hosting.com/wizard.html)上有 50 列（警告：IE 速度慢）。我正在使用[JQuery Table sorter](http://tablesorter.com/docs/)。但是 IE 7 太慢了：它给出了一个关于慢速 javascript 的警告，并询问我是否要停止它。我花了很多时间来提高性能，所以它适用于所有其他浏览器：

*   仅对文本和数字进行排序
*   删除了除 2 个解析器之外的所有解析器
*   创建了一个包含所有值的额外表，比为每个单元格执行 node.textContent() 快得多
*   删除了小写，修剪等。

我的 javascript 版本在[这里](http://www.reviews-web-hosting.com/js/jquery.tablesorter.js)。我想我不能再优化它了。我正在寻找另一种表排序器的快速实现，或者我可能忘记的任何好的优化，以便 IE 7 不会抱怨执行时间。

**编辑：**我已经禁用了 35 列的排序，对于 IE 来说还是太长了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T05:11:56.023

我使用[sorttable](http://www.kryogenix.org/code/browser/sorttable/)一个非常快速的表格排序 JavaScript 库。（不是 JQuery）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T08:07:30.397

我是 Christian Bach 的 jQuery 表格排序器的忠实粉丝... [http://tablesorter.com/docs/](http://tablesorter.com/docs/)

*   紧凑而快速
*   在多列上排序
*   动态斑马条纹
*   可选的元数据扩展使事情变得更容易
*   用于对文本、html、数字等进行排序的解析器（易于自定义）
*   CSS 样式标题（当然）
*   跨浏览器：IE 6.0+、FF 2+、Safari 2.0+、Opera 9.0+

![在此处输入图像描述](https://i.stack.imgur.com/vmYgF.png)

**编辑**：任何对 tablesorter 感兴趣的人都应该看看 Mottie 用它做了什么：[https ://github.com/Mottie/tablesorter](https://github.com/Mottie/tablesorter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T05:11:12.593

大多数运行缓慢的 JScript 解决方案与 DOM 有很多交互。目前，您正在逐行进行 DOM 级编辑，这在 IE 中需要很长时间。如果您在字符串中构建 HTML，然后将其立即放入 DOM，它会快很多。（在上一次 PDC 上有一些演示正好显示了这一点。）

但这里故事的寓意是你的桌子很大。您可能会考虑使用 REST，使用表分页和排序以及一些服务器端逻辑。我认为这可以更快，并且可以与 JQuery 一起正常工作。（而且它仍然是一个 AJAX 解决方案。）它甚至可以为您节省一些带宽......

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-25T19:35:21.367

注释掉对 applyWidget 及其各自绑定的任何引用以及删除未使用的解析器对 IE6 中的 500 行表有很大的影响（是的，我知道，但它仍然不会死）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T05:24:15.853

您可以做的最糟糕的事情之一是使用 eval() ，我在您的代码中看到了这一点。您应该分析您的代码并查看瓶颈在哪里。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T16:25:29.880

一个很棒且强大的选项是这个 jQuery 插件，称为[DataTables](http://datatables.net/)。

*   可变长度分页
*   即时过滤
*   具有数据类型检测的多列排序
*   智能处理列宽
*   显示来自几乎任何数据源 DOM、Javascript 数组、Ajax 文件和服务器端处理（PHP、C#、Perl、Ruby、AIR、Gears 等）的数据
*   表格视口的滚动选项
*   完全国际化
*   jQuery UI ThemeRoller 支持
*   坚如磐石 - 由一套 2900 个单元测试支持
*   各种各样的插件公司。编辑器、TableTools、FixedColumns 等
*   免费！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-15T19:36:30.337

如果您正在使用非常大的数据库，请尝试**使用 DataTables**（jQuery 插件）的服务器端。

基本上，DataTables 所做的所有分页、过滤、排序等都可以交给服务器（或任何其他数据源）。

完整示例：http: [//datatables.net/examples/data_sources/server_side.html](http://datatables.net/examples/data_sources/server_side.html)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-07-15T14:57:47.720

函数 buildCache(table) 中的问题 第 219 行错误：'all_data' 未定义

# sql-server - NHibernate 不会持久化 DateTime SqlDateTime 溢出

> ID：645399
> 
> 赞同：5
> 
> 时间：2009-03-14T04:49:28.247
> 
> 标签：sql-server, nhibernate, datetime

我正在开发一个以 NHibernate 作为后端的 ASP.NET MVC 项目，并且在获取一些日期以写回我的 SQL Server 数据库表时遇到了一些麻烦。

这些日期字段不可为空，因此这里关于如何设置可空日期时间的许多答案都没有帮助。

基本上，当我尝试保存具有 DateAdded 和 LastUpdated 字段的实体时，我得到了 SqlDateTime 溢出异常。过去我遇到过类似的问题，我试图将日期时间字段写入 smalldatetime 列，更新列上的类型似乎可以解决问题。我的直觉是，表定义或某些类型的不兼容数据类型会出现问题，并且溢出异常有点笨拙。

我附上了表定义的示例和 NHibernate 尝试运行的查询，任何帮助或建议将不胜感激。

```
CREATE TABLE [dbo].[CustomPages](
    [ID] [uniqueidentifier] NOT NULL,
    [StoreID] [uniqueidentifier] NOT NULL,
    [DateAdded] [datetime] NOT NULL,
    [AddedByID] [uniqueidentifier] NOT NULL,
    [LastUpdated] [datetime] NOT NULL,
    [LastUpdatedByID] [uniqueidentifier] NOT NULL,
    [Title] [nvarchar](150) NOT NULL,
    [Term] [nvarchar](150) NOT NULL,
    [Content] [ntext] NULL
)

exec sp_executesql N'INSERT INTO CustomPages (Title, Term, Content, LastUpdated, DateAdded, StoreID, LastUpdatedById, AddedById, ID) VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)',N'@p0 
nvarchar(21),@p1 nvarchar(21),@p2 nvarchar(33),@p3 datetime,@p4 datetime,@p5 uniqueidentifier,@p6 uniqueidentifier,@p7 uniqueidentifier,@p8 uniqueidentifier',@p0=N'Size and Colour 
Chart',@p1=N'size-and-colour-chart',@p2=N'This is the size and colour chart',@p3=''2009-03-14 14:29:37:000'',@p4=''2009-03-14 
14:29:37:000'',@p5='48315F9F-0E00-4654-A2C0-62FB466E529D',@p6='1480221A-605A-4D72-B0E5-E1FE72C5D43C',@p7='1480221A-605A-4D72-B0E5-E1FE72C5D43C',@p8='1E421F9E-9A00-49CF-9180-DCD22FCE7F55' 
```

作为对答案/评论的回应，我正在使用 Fluent NHibernate，生成的映射如下

```
 public CustomPageMap() {

            WithTable("CustomPages");

            Id( x => x.ID, "ID" )
                .WithUnsavedValue(Guid.Empty)
            .   GeneratedBy.Guid();

            References(x => x.Store, "StoreID");

            Map(x => x.DateAdded, "DateAdded");
            References(x => x.AddedBy, "AddedById");
            Map(x => x.LastUpdated, "LastUpdated");
            References(x => x.LastUpdatedBy, "LastUpdatedById");

            Map(x => x.Title, "Title");
            Map(x => x.Term, "Term");
            Map(x => x.Content, "Content");

        }  

    <?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" default-lazy="false" assembly="MyNamespace.Core" namespace="MyNamespace.Core">
<class name="CustomPage" table="CustomPages" xmlns="urn:nhibernate-mapping-2.2">
<id name="ID" column="ID" type="Guid" unsaved-value="00000000-0000-0000-0000-000000000000"><generator class="guid" /></id>
<property name="Title" column="Title" length="100" type="String"><column name="Title" /></property>
<property name="Term" column="Term" length="100" type="String"><column name="Term" /></property>
<property name="Content" column="Content" length="100" type="String"><column name="Content" /></property>
<property name="LastUpdated" column="LastUpdated" type="DateTime"><column name="LastUpdated" /></property>
<property name="DateAdded" column="DateAdded" type="DateTime"><column name="DateAdded" /></property>
<many-to-one name="Store" column="StoreID" /><many-to-one name="LastUpdatedBy" column="LastUpdatedById" />
<many-to-one name="AddedBy" column="AddedById" /></class></hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-07-27T09:56:30.420

其实背后的原因是：

当 NHibernate 从数据库中读取该行时，该值为空，这就是会话所记住的。当对象被 NHibernate 重新水化时，日期设置为值 DateTime.MinValue。当 Session 与 db 同步时，NHibernate 假定发生了某些变化，因为 currentState 和 previousState 不同并尝试更新行。这反过来又失败了，因为 DateTime.MinValue 不适合 SqlServer 日期时间列。

**解决方案：** 通过放置让您的日期时间为空？在日期时间结束时，如**日期时间？**或**可为空**

完整的文章可以在以下位置找到：[nhibernate-sqldatetime-overflow-issue](http://barchitect.blogspot.com/2009/07/nhibernate-sqldatetime-overflow-issue.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-21T13:28:59.453

我遇到了相同的问题表，其中包含不可为空的日期时间列和保存时的 SqlDateTime 溢出。

在我的情况下，实际问题是保存触发了 session.flush ，这会导致更新之前使用同一会话加载的某些对象。该对象确实存在“应使用可空日期时间字段的日期时间字段”问题。

换句话说：尝试在保存或更新之前执行 session.flush 以检查问题是否可能是由于之前使用相同的会话对象引起的。

希望对任何人都有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-16T21:18:38.643

您问题中的 SQL 脚本在我的 SQL 2005 安装中执行得很好（一旦我修复了 gbn 发现的报价问题）。而且您的映射看起来也很好。很抱歉帮不上忙。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-23T19:21:48.183

仅供参考，我一直致力于将现有应用程序从各种嵌入式数据访问方法迁移到 NHibernate。这个问题很快就出现了，我找到了一个简单的解决方案，可以最大限度地减少对现有功能应用程序代码的影响。因为我们在某些情况下是逐层迁移的，所以数据类接口需要尽可能保持稳定。这里的解决方案是继续为公共接口使用 DateTime 类型，为私有字段类型添加扩展方法以将 MinValue 转换为 null 并返回到访问器中的私有字段，并将 nHibernate 映射到私有字段。

杰夫

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T12:01:19.617

我正在使用 s#architecture/fluentnhibernate 创建此映射，我已升级到最新版本，它似乎工作正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-14T09:43:46.527

为什么@p3 和@p4 有2x 单引号？复制粘贴错误？

查不出来（这里没有安装SQL），但是[毫秒分隔符](http://technet.microsoft.com/en-us/library/ms187819(SQL.90).aspx)应该不是“点”，即“2009-03-14 14:29:37.000”

@p3 是“之前”，@p4 是“之后”：

```
exec sp_executesql
  N'INSERT INTO CustomPages (Title, Term, Content, LastUpdated, DateAdded, StoreID, LastUpdatedById, AddedById, ID)
  VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)',
  N'@p0 nvarchar(21),@p1 nvarchar(21),@p2 nvarchar(33),@p3 datetime,@p4 datetime,@p5 uniqueidentifier,@p6 uniqueidentifier,@p7 uniqueidentifier,@p8 uniqueidentifier',

    @p0=N'Size and Colour Chart',
    @p1=N'size-and-colour-chart',
    @p2=N'This is the size and colour chart',
    @p3=''2009-03-14 14:29:37:000'', --quotes + dot wrong?
    @p4='2009-03-14 14:29:37.000', --quotes + dot correct?
    @p5='48315F9F-0E00-4654-A2C0-62FB466E529D',
    @p6='1480221A-605A-4D72-B0E5-E1FE72C5D43C',
    @p7='1480221A-605A-4D72-B0E5-E1FE72C5D43C',
    @p8='1E421F9E-9A00-49CF-9180-DCD22FCE7F55' 
```

# django - Django命名的url，通用视图？

> ID：645407
> 
> 赞同：2
> 
> 时间：2009-03-14T04:53:17.050
> 
> 标签：django, django-templates, django-urls

所以，这是我的 urls.py 之一

```
urlpatterns = patterns('items.views',
    url(r'^(?P<item_id>[\d+])/$', 'view_listing', name="item_view"),
) 
```

在我的模板中，我可以这样做：`<a href="{% url item_view 1 %}">here</a>`我会得到一个指向正确页面的链接。一切都很好！

但是，这里还有一个

```
urlpatterns = patterns('django.views.generic.list_detail',
    (r'^(?P<slug>[\w-]+)/$', 'object_detail', dict(page_info, slug_field='slug'), "page_view"),
) 
```

但是在我的模板中，如果我尝试这个：`<a href="{% url page_view slug='TermsAndConditions' %}">Terms and Conditions</a>`或者`<a href="{% url page_view 'TermsAndConditions' %}">Terms and Conditions</a>`它会因为这个错误而出错：

```
TemplateSyntaxError at /

Could not parse the remainder: ''TermsAndConditions '' from ''TermsAndConditions '' 
```

有谁知道是否可以将命名 url 与通用视图和`url`模板标签一起使用？还是让它与通用视图一起工作的正确方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:55:05.200

Django 中的模板系统只支持双引号，这就解释了你在使用单引号时遇到的语法错误。你需要做

```
{% url page_view slug="TermsAndConditions" %} 
```

如果你省略引号， Django的东西你指的是一个*名为*`TermsAndConditions`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-28T20:41:15.370

解决方案是

```
<a href='{% url page_view slug="TermsAndConditions" %}'>Terms and Conditions</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T05:09:54.093

不要在字符串 "TermsAndConditions" 周围加上引号：

```
{% url page_view slug=TermsAndConditions %} 
```

# flash - 如何在不先上传到服务器的情况下操作用户文件？

> ID：645409
> 
> 赞同：0
> 
> 时间：2009-03-14T04:54:30.387
> 
> 标签：flash, actionscript-3

是否可以用 AS3 向用户提示文件选择屏幕，获取选择的文件数据并直接在电影中使用，而无需先将此文件上传到服务器然后再取回？我想要像 FileReference 这样的东西来使用户能够选择许多图像文件，然后我想直接在电影中显示/操作这些图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-23T14:06:14.910

我听说在 Flash Player 10 中，您实际上可以做到这一点。我自己没有测试过，但我看过几个演示视频。这是谷歌发现的可能相关的东西。

[http://dynamicflash.com/2008/07/flash-player-10-local-file-access/](http://dynamicflash.com/2008/07/flash-player-10-local-file-access/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T05:58:46.050

由于安全问题，不允许在 Flash 应用程序中访问本机文件系统。AIR 在不影响安全性的同时弥补了这一差距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-20T20:41:06.170

是的你可以。

见[http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/](http://www.mikechambers.com/blog/2008/08/20/reading-and-writing-local-files-in-flash-player-10/)

# asp.net - GridView的RowDataBound函数

> ID：645415
> 
> 赞同：2
> 
> 时间：2009-03-14T04:58:52.607
> 
> 标签：asp.net, vb.net

我有一个`DataTable`包含 3 个字段`ACount`：`BCount`和`DCount`. 如果`ACount < 0`那时我需要在`GridView`. 如果`ACount > 0`那时我必须在该列中显示“D”（在标签中）。与`BCount`和相同`DCount`。如何在`RowDataBound`函数中进行此条件检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T05:45:39.017

GridView[`OnRowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.onrowdatabound.aspx)事件是你的朋友：

```
<asp:gridview
  id="myGrid" 
  onrowdatabound="MyGrid_RowDataBound" 
  runat="server">

  <columns>
    <asp:boundfield headertext="ACount" datafield="ACount"  />
    <asp:boundfield headertext="BCount" datafield="BCount" />
    <asp:boundfield headertext="DCount" datafield="DCount" />
    <asp:templatefield headertext="Status">
      <itemtemplate>
        <asp:label id="aCount" runat="server" />
        <asp:label id="bCount" runat="server" />
        <asp:label id="dCount" runat="server" />
      </itemtemplate>
    </asp:templatefield>
  </columns>
</asp:gridview>

// Put this in your code behind or <script runat="server"> block
protected void MyGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if(e.Row.RowType != DataControlRowType.DataRow)
  {
    return;
  }

  Label a = (Label)e.Row.FindControl("aCount");
  Label b = (Label)e.Row.FindControl("bCount");
  Label d = (Label)e.Row.FindControl("dCount");

  int ac = (int) ((DataRowView) e.Row.DataItem)["ACount"];
  int bc = (int) ((DataRowView) e.Row.DataItem)["BCount"];
  int dc = (int) ((DataRowView) e.Row.DataItem)["DCount"];

  a.Text = ac < 0 ? "S" : "D";
  b.Text = bc < 0 ? "S" : "D";
  d.Text = dc < 0 ? "S" : "D";
} 
```

我不确定您希望在哪里渲染“S”和“D”字符，但您应该能够重新调整以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T08:13:17.553

这对我有用....我一定是误解了一些东西，所以我不得不用 [ 或 ] 替换 ASP 的尖括号，所以请注意这一点。

```
 [asp:TemplateField runat="server" HeaderText="Header"]
 [ItemTemplate]
 [asp:Label ID="theLabel" runat="server" Text='[%# Eval("DataSource").ToString() 
  %]'][/asp:Label]
 [/ItemTemplate]
 [/asp:TemplateField]

 protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
 {
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Label newLabel = (Label)e.Row.FindControl("theLabel");

        if (newLabel.Text.Length > 20) //20 is cutoff length
        {
            newLabel.Text = lbl.Text.Substring(0, 20);

            newLabel.Text += "...";
        }
    }
} 
```

# guid - DOCX 中唯一 ID 的最佳位置（Open XML WordprocessingDocument）

> ID：645418
> 
> 赞同：8
> 
> 时间：2009-03-14T04:59:51.763
> 
> 标签：guid, openxml

如果 DOCX 文件被移动或重命名，我正在寻找一种方法来识别它们。原因很明显，我正在使用 Open XML SDK，构建一个超链接检查器。

完美运行，至少它可以在文档中添加或更新超链接。

但是，问题是，如果我重命名一个外部文件（source.docx + target.docx 为 targetB.docx），链接就会断开。我可以找到损坏的链接（只需检查链接文件是否在给定位置）。

但我想要更多。我希望能够通过搜索目录（docx）中的所有文档并扫描它们是否是“目标”来恢复丢失的链接。最简单的方法应该是存储在文档属性中某处的 GUID，如果文档被重命名或编辑（校验和不适用），它不会改变。

然后我创建一个单独的链接列表和相应的 ID，如果任何文档被重命名，我只需更新链接。我希望这个概念是清楚的。

所以有几个基本问​​题：

*   是否有“最佳实践”将此“自定义信息”存储在 Open XML 文档中
*   文字处理文档 (DOCX) 是否已经有一些由 Word 创建的唯一标识符
*   您将在哪里保存映射（超链接目标的 GUID）

我希望问题很清楚，如果没有，我会尝试澄清，如果有问题，请发表评论..

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T00:01:17.297

因为这是五年前的事，我希望你能找到答案。如果其他人对此感兴趣，最好的办法是在 ZIP 存档 (\docProps\custom.xml) 中创建一个新的自定义属性并将您的元数据存储在其中。最简单的方法是在 Word UI 中生成一个以查看它们是如何工作的，但您最终会在 DOCX 存档中得到一个 custom.xml，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes">
  <property fmtid="{D5CDD505-2E9C-101B-9397-08002B2CF9AE}" pid="2" name="test">
    <vt:lpwstr>chris</vt:lpwstr>
  </property>
</Properties> 
```

这些工作的原理都记录在[ECMA 376](http://www.ecma-international.org/publications/standards/Ecma-376.htm)中，这是记录文件格式的标准。

据我所知，Word 不存储任何 GUID 来唯一标识文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-20T08:10:50.290

[从 Office 2013](https://docs.microsoft.com/en-us/dotnet/api/documentformat.openxml.office2013.word.persistentdocumentid?view=openxml-2.8.1)创建新文档时，MS Word 会生成唯一 ID (GUID) 。它将它放在 <w:settings> 元素内的文件“\word\settings.xml”中，作为“ **docId** ”名称。

例如在 MS Word 2016 中：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:settings xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:w15="http://schemas.microsoft.com/office/word/2012/wordml" xmlns:w16se="http://schemas.microsoft.com/office/word/2015/wordml/symex" mc:Ignorable="w14 w15 w16se">
    <w15:docId w15:val="{982A3D80-A23D-4148-8230-4160F3D87FF5}"/>
</w:settings> 
```

**请注意**，制作文件副本时，MS Word 不会更改它。因此，如果创建每个新文件而不是从另一个文件复制，这是一种可靠的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T06:40:02.613

Acrobat/PDF 有类似的东西。查找[Bates 编号](http://en.wikipedia.org/wiki/Bates_numbering)，该编号用于通过输入唯一编号来识别文档。

您通常应该将其放在元数据部分（如果有）。或者，将自定义部分添加到保留映射的 docx 文件中（当然，保持在规范的范围内）。（我对 docx 格式不是很熟悉，所以你会弄明白的。）

# mysql - 用于 ToDo 列表的 MySQL？

> ID：645422
> 
> 赞同：1
> 
> 时间：2009-03-14T05:03:31.393
> 
> 标签：mysql

我经常有诸如“待办事项”和“完成工作”之类的清单。如果它的工作方式类似于：

> mysql add-to-column-in-table "博客更正"
> 
> mysql 读取表中的列在哪里匹配博客“博客”

我可以使用 MySQL 来完成这项工作吗？您是否将其用于日常事务？

**[澄清]**我需要把我的东西整理到桌子上。仅我就有 30 多个不同的待办事项列表。它们与其他列表有不同的关系。它们组织起来很麻烦，而且一些列表往往会变旧。

这个问题的一个原因是我不确定 Ubuntu 上的配置。mysql-file 太多，例如“mysql-admin”和“mysql-common”。我需要一些易于使用且易于上手的简单软件包。它应该只在本地工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T05:13:07.130

我不确定我是否真的理解你的问题。你能澄清一下吗？

您当然可以使用 mysql（或任何数据库）来制作待办事项列表。在频谱的一端，您可以将其设为一个包含两个字段的表：

```
todo (id, description) 
```

只需在列表中添加和删除即可：

```
INSERT INTO `todo` (`description`) VALUES ('buy milk');
DELETE FROM `todo` WHERE `id` = 3; 
```

然后，您可以添加一些标志，以便在完成后跟踪项目：

```
todo (id, description, isDone)    -- isDone would be a 0 or 1 
```

然后找到你所有的待办事项：

```
SELECT description FROM todo WHERE isDone = 0; 
```

您可以不断添加新功能，例如日期、类别、紧急程度、任务和子任务（例如：制作早餐可能有“买牛奶”、“吐司面包”等子任务）等。只需选择合适的即可满足您的需求。在任何情况下，MySQL 都能满足您的需求。

Ps：不要忘记记事本对这些任务的强大功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T05:41:57.247

您可以使用 MySQL 或更好，但您可以使用 SQLite3（您不需要运行进程及其快速）。

如果您想要的只是一个基于文本的待办事项列表，您可以在命令行上运行我会查看 Gina Trapani 的[todo.txt](http://ginatrapani.github.com/todo.txt-cli/)。您将获得查询数据库的大部分好处，但使用针对待办事项相关活动（查询日期、上下文等）进行了优化的出色 CLI

# c - C system() 调用失败并出现错误“未终止的字符串”

> ID：645423
> 
> 赞同：2
> 
> 时间：2009-03-14T05:06:23.463
> 
> 标签：c

我有一小段 c 代码应该在我的 linux 机器上运行 awk 命令。然而，对于我的生活，它不会执行。如果我直接在终端中运行它，awk 就可以工作。

我当前失败的命令

```
system("awk '{ printf \"%d \n\", $12 }' results.dat | sort -n"); 
```

它失败了

```
awk: { printf "%d 
awk:          ^ unterminated string 
```

您还如何转义双引号以使命令运行？另外为什么这会失败，但是当我用 printf 替换系统调用时它会打印？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-14T05:08:30.323

也许你应该再次逃脱`\n`，如

```
system("awk '{ printf \"%d \\n\", $12 }' results.dat | sort -n");
//                         ^ note the extra \ 
```

因为我认为`\n`应该是`printf`.

您当前的构造调用`system`带有参数

```
awk '{ printf "%d 
", $12 }' results.dat | sort -n 
```

# c++ - 在 Windows 环境中使用 C++ 进行 GUI 开发

> ID：645425
> 
> 赞同：5
> 
> 时间：2009-03-14T05:08:26.843
> 
> 标签：c++, windows, user-interface

首先，请理解。我搜索了这个并搞砸了几个星期。我终于放弃了单打独斗，决定向这个可爱的社区寻求帮助。

我想为 Windows 编写 GUI 应用程序。原因是我想移植我最喜欢的命令行应用程序以拥有一个界面。我虽然'嘿，这不应该这么难'。

所以我用谷歌搜索了几个小时，很清楚我需要什么。我下载了 Qt 并安装了所有东西。接下来我找到了一个教程，旨在使用我当前的 IDE (Bloodshed Dev C++) 来使用 Qt。在那之后一切都变得一团糟。

我很困惑现在该怎么办。有人说我的 IDE 太旧了，需要更换。有人说我必须以不同的方式配置 Windows。有人建议使用 Visual Studio C++（或任何 Microsoft IDE）。

这是您需要您的建议和帮助的地方。我应该做什么/安装/升级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T12:38:57.050

从 4.5 版开始，Qt 现在与官方的跨平台 Qt IDE QtCreator 一起打包。只需下载并安装 Qt 4.5，您就可以免费获得一个功能齐全的（库、IDE、表单设计器、资源编辑器）开发环境。

[http://www.qtsoftware.com/downloads](http://www.qtsoftware.com/downloads)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T05:26:41.213

好的，这有两个部分。

第一个是在 Windows 下，您将需要一个 Windows GUI 库。您可以通过多种方式写入 Windows API，但*最简单*的是使用 Microsoft 自己的。这意味着以某种形式选择 Visual Studio。

QT、Wx 和 otehrs 都是构建在基本 Windows API 之上的实用程序库。它们有利于移植到其他平台，但它们必然会增加一些复杂性。

对于 C++，您需要一个编译器。同样，对于 Windows，最简单的方法是使用 Visual Studio，但还有其他可用的编译器。最常见的免费版本将是 GNU 编译器。获得这些的简单方法是使用 Cygwin，但这是一个类似 UNIX 的环境。

我认为结论是，对于初学者来说，最好使用 Visual Studio。

一旦你得到它，网上和微软都有很多教程来学习使用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-14T06:55:02.733

您有很多选择，并且可以使用 Charlie Martin 所描述的很多工具。我认为如果你想要最简单的路径，你应该使用[wxDev-C++](http://wxdsgn.sourceforge.net/)，它是与 wxWidgets GUI 库捆绑在一起的 Dev-C++。安装后，您可以直接开发GUI应用程序，无需额外配置。也许 Dev-c++ 是一个旧的 IDE，但你已经使用它并且你知道它。wxWidgets 是一个可靠的 GUI 库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T10:08:29.320

如果您不担心跨平台支持，Visual Studio 2008 + [WTL将是一个很好的组合。](http://sourceforge.net/projects/wtl)Qt 看起来很棒，但对于一个简单的应用程序来说，它可能是多余的——分发一个 Qt 应用程序意味着交付一堆 DLL，而您对 WTL 的依赖关系较少。

只是我的2c。我不想在这里引发任何火焰战争。:)

[维基百科](http://en.wikipedia.org/wiki/Windows_Template_Library)

[The Code Project 上精彩的 WTL 文章系列](http://www.codeproject.com/KB/wtl/wtl4mfc1.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T11:43:28.760

我使用[Ultimate++ http://ultimatepp.org/](http://ultimatepp.org/)进行跨平台 C++ GUI 开发。它还有一个完整的网络、数据库等实用程序库和一个非常好的 IDE。它是 BSD 许可的，所以用它做你想做的事没有问题。它也有很好的社区支持。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T07:02:22.747

虽然可以使用您当前的 IDE 和 Qt 之类的工具包，但如果您正在寻找阻力最小的路径，您应该使用 Visual Studio。您会在这条路上找到最好的文档和最多的支持。查看免费的[Express Edition](http://www.microsoft.com/express/)（如啤酒）。然后去拿一本关于这个主题的好书，比如 Charles Petzold 的[Programming Windows](http://www.charlespetzold.com/pw5/)。你应该准备好了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-17T01:38:40.687

首先，Dev-C++ 不再处于开发阶段，并且似乎已被大量错误所遗弃。其次，**如果**您想坚持使用 Windows API，请查看我的小[对话框模板](http://networkdls.com/Software.Asp?Review=24)项目。

我刚刚添加了 Visual Studio 2008、Code::Blocks 和 Dev-C++ 的项目文件，只是为了让你动起来。如果您需要其他任何东西，请告诉我，因为我很乐意为您提供帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-17T01:57:37.490

以下假设您针对的是仅限 Windows 的平台（如果您正在寻找跨操作系统 - 那么许多其他帖子涵盖了各种选项）。

您可能很幸运，因为您已经拥有一个可以从命令行运行的应用程序。完全可以使用其中一种 .Net 语言工作并访问您现有的应用程序。任何 .Net 语言（C#、VB.Net、托管 C++）都可用于非常快速地构建 UI 并绑定 UI 组件和事件，然后将调用调用到现有应用程序 - 传递必要的命令行参数。

另一种选择：托管 C++ 实际上允许您在同一个项目中混合托管（.Net 代码）和非托管代码（符合标准的 C++ - 即您现有的应用程序）（即使是大量代码的相同文件）。这允许您访问许多现代 IDE 功能和 .Net 库，以获取您想要添加的任何全新内容。您只需使用一些项目设置和“它就可以工作”（嗯 - 可能有一些学习的东西，但它很容易）。

虽然我有完整版的 Visual Studio，但我相信免费的“Express”版本 ( [http://www.microsoft.com/express/product/](http://www.microsoft.com/express/product/) ) 能够胜任其中的许多任务。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-14T10:45:42.680

Dev C++ 不再处于积极开发中（无论如何有点不正常）。如果您想要一个支持 Windows GUI 开发的开源 IDE，请尝试[Code::Blocks](http://www.codeblocks.org/)。

# git - 有 buildbot 轮询 git 存储库以获取新提交吗？

> ID：645430
> 
> 赞同：8
> 
> 时间：2009-03-14T05:11:25.790
> 
> 标签：git, continuous-integration, buildbot

是否有一个[buildbot](http://buildbot.net/trac)插件可以轮询 git 存储库中的新提交，例如当前包含的[`changes.SVNPoller`](http://github.com/djmitche/buildbot/blob/d4ec886c3740a4f97ab172b81c9a9b94eb6f00d3/buildbot/changes/svnpoller.py)？

我找到的最接近的是[git_buildbot.py](http://github.com/djmitche/buildbot/blob/d4ec886c3740a4f97ab172b81c9a9b94eb6f00d3/contrib/git_buildbot.py)，但它作为提交后挂钩工作，因此不适用于我的设置（使用 Github 和 buildbot 在 github 提交后无法访问的机器上） - 只需轮询 git 存储库会完美地工作。

我目前每小时运行一次构建，但除非有什么改变，否则运行测试没有任何意义。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-06-18T18:07:20.060

**更新：** Buildbot 项目的好心人已将 GitPoller 作为 0.8.2 版的官方变更源，并对原始版本进行了一些改进。

* * *

我们公司也有类似的情况，GitHub 的 post-commit 钩子无法访问我们的构建机器。我编写了一个`GitPoller`可以像`SVNPoller`.

可以在这里找到：http: [//github.com/wimba/buildbot/blob/master/buildbot/changes/gitpoller.py](http://github.com/wimba/buildbot/blob/master/buildbot/changes/gitpoller.py)

并像这样使用：

```
from buildbot.changes.gitpoller import GitPoller
c['change_source'] = GitPoller('git@example.com:foobaz/myrepo.git',
                               branch='great_new_feature') 
```

它将创建一个本地存储库以供使用（位置可配置），并且仅经过测试，`git 1.7`因此您的里程可能会有所不同。

希望它会在某个时候被适当地拉入 Buildbot 项目，但到目前为止它一直在为我们工作，并希望它对其他人有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-22T15:08:16.563

我根本没有玩过 buildbot 但你不能做 a`git fetch`然后看看输出`git log master..origin/master`吗？如果没有新的提交，则输出将为空（当然，您可以使用大量其他选项`git log`）。如果有新的提交，那么只需执行一个`git merge`并开始您的构建/测试周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-31T14:46:01.173

我喜欢 gitpoller.py 方法，但目前我发现它有点受限（例如不发送修订、项目参数），所以找到了一个不同的解决方案：

我从远程克隆了我自己的存储库，并且 git_buildbot.py 由 post-merge 钩子调用（如 git_buildbot.py 中所述）。我有一个小循环在睡觉，git 拉入那个 repo，这将触发 post-merge 钩子。

# c++ - 使用模板

> ID：645432
> 
> 赞同：0
> 
> 时间：2009-03-14T05:12:09.220
> 
> 标签：c++, templates

我一直在尝试获取一个将字符串中的字符转换为大写字母的模板。

我需要在整个程序中多次这样做。

所以我会使用模板。

```
template <string theString>
string strUpper( string theString )
{
    int myLength = theString.length();
    for( int sIndex=0; sIndex < myLength; sIndex++ )
    {
        if ( 97 <= theString[sIndex] && theString[sIndex] <= 122 )
        {
        theString[sIndex] -= 32;
        }
    }   
   return theString;
} 
```

现在只要模板有效！有什么建议么？“字符串”标识符应该是立即标志。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T05:31:18.457

您显然在谈论`C++`（还没有标签，所以我认为这里是 C++）。好吧，你似乎想说

> 作为模板的参数，我接受任何*模拟字符串的类型*

可悲的是，目前这还不可能。它需要`concept`下一个 C++ 版本中的功能。[这](http://www.youtube.com/watch?v=Ot4WdHAGSGo)是关于他们的视频。

如果你想保持通用，你可以做的是接受`basic_string<CharT, TraitsT>`，例如，如果你想接受宽字符串和窄字符串

```
template <typename CharT, typename TraitsT>
std::basic_string<CharT, TraitsT> strUpper(basic_string<CharT, TraitsT> theString ) {
    typedef basic_string<CharT, TraitsT> StringT;
    for(typename StringT::iterator it = theString.begin(); 
        it != theString.end(); 
        ++it) 
    {
        *it = std::toupper(*it, std::locale());
    }   
    return theString;
} 
```

它也不会接受碰巧也是*字符串*的其他或自定义字符串类。如果你想要这样，让它完全不受它接受和不接受的东西的影响

```
template <typename StringT>
StringT strUpper(StringT theString) {
    for(typename StringT::iterator it = theString.begin(); 
        it != theString.end(); 
        ++it) 
    {
        *it = std::toupper(*it, std::locale());
    }   
    return theString;
} 
```

您必须告诉该库的用户他们必须公开哪些功能和类型才能使其工作。编译器不会知道该合约。相反，它只会在调用具有非字符串类型的函数时抛出错误消息。通常，您会发现一页页的错误消息，并且很难找到问题的真正原因。为标准的下一版本提出的概念功能很好地解决了这个问题。

如果你*不*打算写这样一个通用函数，你可以继续写一个像这样的普通函数

```
std::string strUpper(std::string theString) {
    for(std::string::iterator it = theString.begin(); 
        it != theString.end(); 
        ++it) 
    {
        *it = std::toupper(*it, std::locale());
    }   
    return theString;
} 
```

如果您一开始*并不*打算发明该函数来学习，而是因为您没有找到另一个已经编写好的算法，请查看 boost [string 算法](http://www.boost.org/doc/libs/1_38_0/doc/html/string_algo.html)库。然后你可以写

```
boost::algorithm::to_upper(mystring); 
```

# garbage-collection - 垃圾收集的副作用？

> ID：645440
> 
> 赞同：3
> 
> 时间：2009-03-14T05:19:51.997
> 
> 标签：garbage-collection, raii

这可能是一个非常容易解决的问题，但我是那种看到什么东西粘在墙上的人。对于垃圾收集运行时提供的内存和生命周期管理的所有好处，是否存在由应用程序与其垃圾收集器之间的竞争条件导致的程序不确定性的明显案例？是否出现了针对此类事物的防御性编程格式塔？当然，习惯于 RAII 的程序员在 GC 面前必须吸取教训。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T11:21:43.403

垃圾收集的问题在于它只管理内存资源。不幸的是，程序员必须管理很多很多其他资源类型：

*   文件和套接字句柄
*   数据库连接
*   同步对象
*   gui资源

这仅仅是列举的一小部分。要成功管理这些，您确实需要 RAII 习语中体现的概念。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-14T06:02:36.307

我认为您误解了自动垃圾收集的工作原理。应用程序和正确实现的垃圾收集器之间的竞争条件是不可能的，即使在原则上也是如此。垃圾收集器只收集应用程序*无法访问*的对象。

由于两者中只有一个可以“拥有”给定对象，因此不会发生竞争条件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-14T06:04:50.483

大约六年前我搬到 .NET 世界时，我对 GC 感到不安，我理所当然地认为它应该慢得多，而且我要更加小心我的内存分配以避免产生表演狂。

六年后我可以告诉你，我的观点已经完全改变了！这些年来我只能回忆起*一次*内存泄漏，原因是忘记了 .Dispose()。将其与 C++ 进行比较，在 C++ 中，您每小时编码都会产生内存泄漏...... ;-)

我最近被迫回到 C++ 世界，我完全惊呆了！我曾经使用过这个并*喜欢*它吗？*感觉*我在 C# 中的工作效率至少是 C++ 的 10 倍。最重要的是：GC 内存分配器速度如此之快，以至于我仍然无法相信。看看这个问题，我不得不得出结论，在我的特定情况下，.NET 版本（C# 或 C++/CLI）的执行速度是 C++ MFC 版本的 10 倍：[C++ string memory allocation](https://stackoverflow.com/questions/608370/c-string-memory-management)。

我已经完全转变了——但我花了很长时间才完全接受它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-28T04:55:30.213

当我第一次开始在 CI 中编程时，我必须非常有条理地使用我的 malloc 和 realloc，并且我必须释放所有我不使用的东西。这是一项简单的任务，只需完成一些小的大学作业，例如创建二叉树。简单的...

现在，当我开始开发一个使用全 C 语言编写的 GUI 的应用程序时，我不得不多思考少编程，因为我必须注意可能的内存泄漏。这变得很麻烦。我宁愿有一半的产品而不是一半的产品。

我开始转向 Java 和 C#。我喜欢我所要做的就是取消引用一个对象，然后垃圾收集器会过来为我捡起它。我还注意到，使用 Java 的 Swing（如预期的那样）我的程序运行速度有点慢，但它是可以管理的。

在我的发现中，由于处理器变得更便宜，内存变得更便宜和更快，而且 GUI 程序比以前消耗更多的内存。垃圾收集器确实有助于使产品的内存泄漏问题最小化。真的很方便，可能会导致不良的编码习惯，但是可以补救。

编辑：

[另请参阅此](https://stackoverflow.com/questions/1424660/garbage-collection-vs-non-garbage-collection-programming-languages)内容，它可能会帮助您回答您的问题。好读的海事组织

# web-services - 从 Web 服务转发 URL

> ID：645442
> 
> 赞同：0
> 
> 时间：2009-03-14T05:23:11.770
> 
> 标签：web-services

我们的系统架构如下：

WebApplication --> MediatorService ---> 服务提供者 --> 设备

WebApplication --> 处理输入并插入数据库。

MediatorService --> 是一个 WebService 应用程序，它在运行 WebApplication 的同一台服务器上或在不同的服务器上运行

服务提供商 --> SMS 服务提供商，它路由从中介服务应用程序发送的消息。

设备 --> 接收来自服务提供商的消息并与该消息相关的行为。

使用的技术：

Java/J2EE、Apache Tomcat Server、Struts2.0框架

问题 ：

1.  如何从 MediatorService 应用程序服务提供商发送消息

    我使用了 response.SendRedirect("Service Provider URL")，但奇怪的是它不起作用，即使它工作它不是正确的解决方案，因为在场景中 URL 不应该改变。

    即向服务提供商发送短信应该是后端处理

2.  如果我使用 response.SendRedirect("Service Provider URL") 我不能得到服务提供者返回的响应。

3.  应该使用 Requestdispatcher.Forward(request,response) 或任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-14T07:02:19.347

如果我错了，请纠正我...听起来您的 Web 应用程序正在向您的中介者发出 Web 服务调用，然后中介者必须以某种方式将请求转发给服务提供商。通常，Web 服务调用是带有 XML 正文的 HTTP POST，所以我不认为使用 Web 应用程序执行 SendRedirect/Forward 将能够将请求转发给服务提供商。

您的服务提供商是否公开了 Web 服务接口？如果是这样，您的中介可能应该只是向提供者发出另一个 Web 服务调用，然后提供者可以使用正常的 HTTP 响应来响应中介，然后中介可以响应 Web 应用程序。

# objective-c - 如何在 Objective-C 中使用自定义委托

> ID：645449
> 
> 赞同：52
> 
> 时间：2009-03-14T05:30:54.043
> 
> 标签：objective-c, cocoa-touch, delegates

我需要了解 Objective-C 中委托方法的用法。谁能指出我正确的来源？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-08-02T03:43:24.357

您需要为您的类声明一个委托协议。类的委托协议和接口的示例`Foo`可能如下所示：

```
@class Foo;
@protocol FooDelegate <NSObject>
@optional
- (BOOL)foo:(Foo *)foo willDoSomethingAnimated:(BOOL)flag;
- (void)foo:(Foo *)foo didDoSomethingAnimated:(BOOL)flag;
@end

@interface Foo : NSObject {
     NSString *bar;
     id <FooDelegate> delegate;
}

@property (nonatomic, retain) NSString *bar;
@property (nonatomic, assign) id <FooDelegate> delegate;

- (void)someAction;

@end 
```

不要忘记在`@implementation`.

这段代码所做的是声明一个名为 FooDelegate 的协议；符合此协议的类将被声明为`@interface SomeClass : SuperClass <FooDelegate> {}`. 因为这个类符合协议`FooDelegate`，所以它现在可以实现下面的方法`FooDelegate`（要求实现这些方法，使用`@required`代替`@optional`）。最后一步是`Foo`在符合 的类中实例化一个对象`FooDelegate`，并为该`Foo`对象设置其委托属性：

```
Foo *obj = [[Foo alloc] init];
[obj setDelegate:self]; 
```

现在，您的类已准备好接收来自`Foo`已正确设置其委托的对象的消息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T09:44:19.387

委托对于手动控制应用程序中视图控制器数组内的传输非常有用。使用委托，您可以很好地管理控制流。

这是自己的代表的小例子....

1.  创建一个协议类....（仅限.h）

**SampleDelegate.h**

```
#import
@protocol SampleDelegate
@optional

#pragma Home Delegate

-(NSString *)getViewName;

@end 
```

2.  在要委托另一个类的类中导入上述协议类。在我的前任这里。我正在使用 AppDelegate 来委托 HomeViewController 的对象。

还要在 Delegate Reference < > 中添加上面的 DelegateName

**ownDelegateAppDelegate.h**

```
#import "SampleDelegate.h"

@interface ownDelegateAppDelegate : NSObject <UIApplicationDelegate, SampleDelegate>
{

} 
```

**ownDelegateAppDelegate.m**

```
//setDelegate of the HomeViewController's object as
[homeViewControllerObject setDelegate:self];

//add this delegate method definition
-(NSString *)getViewName
{
    return @"Delegate Called";
} 
```

**HomeViewController.h**

```
#import
#import "SampleDelegate.h"

@interface HomeViewController : UIViewController 
{

    id<SampleDelegate>delegate;
}

@property(readwrite , assign) id<SampleDelegate>delegate;

@end 
```

**HomeViewController.h**

```
- (void)viewDidAppear:(BOOL)animated 
{

    [super viewDidAppear:animated];
    UILabel *lblTitle = [[UILabel alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    lblTitle.text = [delegate getViewName];
    lblTitle.textAlignment = UITextAlignmentCenter;
    [self.view addSubview:lblTitle];

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T14:39:18.197

首先，您可以看看 Apple 对委托方法的看法。该文档提供了一些关于委托的全部内容的书面信息，并解释了如何使用定义和支持委托的 AppKit 类以及如何将委托支持编码到您自己的对象之一中。

请参阅[与对象通信](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

（如果您对编写自己的委托支持感兴趣，请跳至“为自定义类实现委托”部分。）

委托方法最重要的方面是它们使您能够自定义和影响对象的行为，而无需对其进行子类化。

希望能帮助您入门。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-22T19:55:29.187

如果有问题的对象已`delegate`分配给您编写的类，例如 a`controller`那么定义为该对象类的方法的`delegate`方法必须由分配的类实现。这使您可以有效地控制对象的行为，而无需对对象的类进行子分类以覆盖可能需要大量重复行为的行为。它是可可触控设计中更清洁的部分之一。

这是您应该在前几个介绍和教程中了解可可触摸的内容。就像[Cocoa 的这个教程是我的女朋友](http://www.cimgf.com/2008/10/01/cocoa-touch-tutorial-iphone-application-example/)一样。事实上，他们把`delegate`解释做了一个大胆的大标题。

# git - 在 Git 的根提交之前插入一个提交？

> ID：645450
> 
> 赞同：263
> 
> 时间：2009-03-14T05:31:11.470
> 
> 标签：git, version-control, rebase, git-rebase

我之前问过如何压缩 git 存储库中[的前两个提交](https://stackoverflow.com/questions/598672/git-how-to-squash-the-first-two-commits)。

虽然这些解决方案相当有趣，并且不像 git 中的其他一些东西那样令人费解，但如果您需要在项目开发过程中多次重复该过程，它们仍然有点伤脑筋。

所以，我宁愿只经历一次痛苦，然后就可以永远使用标准的交互式变基。

那么，我想要做的是有一个空的初始提交，该提交只是为了成为第一个而存在。没有代码，什么都没有。只是占用空间，因此它可以成为 rebase 的基础。

那么我的问题是，拥有一个现有的存储库，我该如何在第一个提交之前插入一个新的空提交，并将其他所有人向前推进？

* * *

## 回答 #1

> 赞同：371
> 
> 时间：2009-03-15T07:45:24.160

有两个步骤来实现这一点：

1.  创建一个新的空提交
2.  重写历史以从这个空提交开始

为方便起见，我们会将新的空提交放在临时分支`newroot`上。

# 1.创建一个新的空提交

有多种方法可以做到这一点。

### 仅使用管道

最干净的方法是使用 Git 的管道直接创建提交，避免接触工作副本或索引或签出哪个分支等。

1.  为空目录创建一个树对象：

    ```
    tree=`git hash-object -wt tree --stdin < /dev/null` 
    ```

2.  围绕它包裹一个提交：

    ```
    commit=`git commit-tree -m 'root commit' $tree` 
    ```

3.  创建对它的引用：

    ```
    git branch newroot $commit 
    ```

如果您足够了解您的外壳，您当然可以将整个过程重新安排成一个单行程序。

### 没有管道

使用常规瓷器命令，您无法在不检查`newroot`分支并重复更新索引和工作副本的情况下创建空提交，没有充分的理由。但有些人可能会觉得这更容易理解：

```
git checkout --orphan newroot
git rm -rf .
git clean -fd
git commit --allow-empty -m 'root commit' 
```

请注意，在缺少`--orphan`switch 的非常旧版本的 Git 上`checkout`，您必须将第一行替换为：

```
git symbolic-ref HEAD refs/heads/newroot 
```

# 2.重写历史以从这个空提交开始

你有两个选择：变基，或者干净的历史重写。

### 变基

```
git rebase --onto newroot --root master 
```

这具有简单的优点。但是，它还会在分支上的每次最后提交时更新提交者名称和日期。

此外，对于一些极端情况的历史，它甚至可能由于合并冲突而失败——尽管事实上你正在基于一个不包含任何内容的提交。

### 历史改写

更简洁的方法是重写分支。与 不同的是`git rebase`，您需要查找您的分支从哪个提交开始：

```
git replace <currentroot> --graft newroot
git filter-branch master 
```

显然，重写发生在第二步；这是需要解释的第一步。它的作用是`git replace`告诉 Git，每当它看到对要替换的对象的引用时，Git 应该转而查看该对象的替换。

使用`--graft`开关，您告诉它的内容与正常情况略有不同。你说还没有替换对象，但是你想用`<currentroot>`它自己的精确副本替换提交对象，*除了*替换的父提交应该是你列出的那个（即`newroot`提交）。然后`git replace`继续为您创建此提交，然后声明该提交作为您原始提交的替换。

现在，如果您执行 a `git log`，您将看到事情已经如您所愿：分支从`newroot`.

但是，请注意，`git replace` *它实际上并没有修改历史记录*——也不会传播到您的存储库之外。它只是将本地重定向添加到您的存储库，从一个对象到另一个对象。这意味着没有其他人看到这种替换的效果——只有你。

这就是为什么该`filter-branch`步骤是必要的。随着`git replace`您为根提交创建具有调整的父提交的精确副本；`git filter-branch`然后对所有以下提交也重复此过程。那是历史实际上被重写的地方，以便您可以分享它。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-03-16T11:02:53.263

合并亚里士多德 Pagaltzis 和 Uwe Kleine-König 的答案和 Richard Bronosky 的评论。

```
git symbolic-ref HEAD refs/heads/newroot
git rm --cached -r .
git clean -f -d
# touch .gitignore && git add .gitignore # if necessary
git commit --allow-empty -m 'initial'
git rebase --onto newroot --root master
git branch -d newroot 
```

（只是把所有东西放在一个地方）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-29T15:55:35.817

我喜欢亚里士多德的回答。但是发现对于大型存储库（> 5000 次提交），filter-branch 比 rebase 工作得更好，原因有几个：1）它更快 2）当存在合并冲突时它不需要人工干预。3）它可以重写标签——保留它们。请注意，filter-branch 有效，因为每个提交的内容都没有问题——它与此“变基”之前完全相同。

我的步骤是：

```
# first you need a new empty branch; let's call it `newroot`
git symbolic-ref HEAD refs/heads/newroot
git rm --cached -r .
git clean -f -d

# then you apply the same steps
git commit --allow-empty -m 'root commit'

# then use filter-branch to rebase everything on newroot
git filter-branch --parent-filter 'sed "s/^\$/-p <sha of newroot>/"' --tag-name-filter cat master 
```

请注意，“--tag-name-filter cat”选项意味着将重写标签以指向新创建的提交。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-31T13:57:10.720

我认为使用`git replace`and`git filter-branch`是比使用 a 更好的解决方案`git rebase`：

*   更好的性能
*   更容易且风险更小（您可以在每个步骤中验证您的结果并撤消您所做的......）
*   与多个分支一起工作，保证结果

其背后的想法是：

1.  在过去创建一个新的空提交
2.  用一个完全相似的提交替换旧的根提交，除了新的根提交被添加为父提交
3.  验证一切是否符合预期并运行`git filter-branch`
4.  再次验证一切正常并清理不再需要的 git 文件

这是前 2 个步骤的脚本：

```
#!/bin/bash
root_commit_sha=$(git rev-list --max-parents=0 HEAD)
git checkout --force --orphan new-root
find . -path ./.git -prune -o -exec rm -rf {} \; 2> /dev/null
git add -A
GIT_COMMITTER_DATE="2000-01-01T12:00:00" git commit --date==2000-01-01T12:00:00 --allow-empty -m "empty root commit"
new_root_commit_sha=$(git rev-parse HEAD)

echo "The commit '$new_root_commit_sha' will be added before existing root commit '$root_commit_sha'..."

parent="parent $new_root_commit_sha"
replacement_commit=$(
 git cat-file commit $root_commit_sha | sed "s/author/$parent\nauthor/" |
 git hash-object -t commit -w --stdin
) || return 3
git replace "$root_commit_sha" "$replacement_commit" 
```

您可以毫无风险地运行此脚本（即使在执行您以前从未做过的操作之前进行备份也是一个好主意；）），如果结果不是预期的，只需删除文件夹中创建的文件并重`.git/refs/replace`试； )

一旦您验证了存储库的状态是您所期望的，运行以下命令来更新**所有分支**的历史记录：

```
git filter-branch -- --all 
```

现在，您必须看到 2 个历史记录，旧的和新的（有关`filter-branch`更多信息，请参阅帮助）。您可以比较 2 并再次检查是否一切正常。如果您满意，请删除不再需要的文件：

```
rm -rf ./.git/refs/original
rm -rf ./.git/refs/replace 
```

您可以返回您的`master`分支并删除临时分支：

```
git checkout master
git branch -D new-root 
```

现在，一切都应该完成；）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-09T21:00:41.557

要在存储库的开头添加一个空提交，如果您忘记在“git init”之后立即创建一个空提交：

```
git rebase --root --onto $(git commit-tree -m 'Initial commit (empty)' 4b825dc642cb6eb9a060e54bf8d69288fbee4904) 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-17T22:44:10.883

我成功地使用了亚里士多德和肯特的答案：

```
# first you need a new empty branch; let's call it `newroot`
git checkout --orphan newroot
git rm -rf .
git commit --allow-empty -m 'root commit'
git filter-branch --parent-filter \
'sed "s/^\$/-p <sha of newroot>/"' --tag-name-filter cat -- --all
# clean up
git checkout master
git branch -D newroot
# make sure your branches are OK first before this...
git for-each-ref --format="%(refname)" refs/original/ | \
xargs -n 1 git update-ref -d 
```

`master`除了标签之外，这还将重写所有分支（不仅仅是）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2011-01-17T19:27:47.877

`git rebase --root --onto $emptyrootcommit`

应该很容易做到这一点

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-06T12:28:56.370

我很兴奋并为这个漂亮的脚本写了一个“幂等”版本……它总是会插入相同的空提交，如果你运行它两次，它不会每次都改变你的提交哈希。所以，这是我对**git-insert-empty-root**的看法：

```
#!/bin/sh -ev
# idempotence achieved!
tmp_branch=__tmp_empty_root
git symbolic-ref HEAD refs/heads/$tmp_branch
git rm --cached -r . || true
git clean -f -d
touch -d '1970-01-01 UTC' .
GIT_COMMITTER_DATE='1970-01-01T00:00:00 +0000' git commit \
  --date='1970-01-01T00:00:00 +0000' --allow-empty -m 'initial'
git rebase --committer-date-is-author-date --onto $tmp_branch --root master
git branch -d $tmp_branch 
```

是否值得额外的复杂性？也许不是，但我会用这个。

这也应该允许对 repo 的多个克隆副本执行此操作，并最终得到相同的结果，因此它们仍然兼容......测试......是的，它确实有效，但还需要删除并添加你的再次远程，例如：

```
git remote rm origin
git remote add --track master user@host:path/to/repo 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-02-18T16:17:06.093

要切换根提交：

首先，首先创建您想要的提交。

其次，使用以下命令切换提交的顺序：

**git rebase -i --root**

一个编辑器将与提交一起出现，直到根提交，例如：

**选择 1234 旧根消息**

**pick 0294 中间的一个提交**

**选择要放在根目录的 5678 提交**

然后，您可以将所需的提交放在第一行，方法是将其放在第一行。在示例中：

**选择要放在根目录的 5678 提交**

**选择 1234 旧根消息**

**pick 0294 中间的一个提交**

退出编辑器，提交顺序将发生变化。

PS：要更改 git 使用的编辑器，请运行：

**git config --global core.editor *name_of_the_editor_program_you_want_to_use***

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-14T08:08:44.007

好吧，这就是我想出的：

```
# Just setting variables on top for clarity.
# Set this to the path to your original repository.
ORIGINAL_REPO=/path/to/original/repository

# Create a new repository…
mkdir fun
cd fun
git init
# …and add an initial empty commit to it
git commit --allow-empty -m "The first evil."

# Add the original repository as a remote
git remote add previous $ORIGINAL_REPO
git fetch previous

# Get the hash for the first commit in the original repository
FIRST=`git log previous/master --pretty=format:%H  --reverse | head -1`
# Cherry-pick it
git cherry-pick $FIRST
# Then rebase the remainder of the original branch on top of the newly 
# cherry-picked, previously first commit, which is happily the second 
# on this branch, right after the empty one.
git rebase --onto master master previous/master

# rebase --onto leaves your head detached, I don't really know why)
# So now you overwrite your master branch with the newly rebased tree.
# You're now kinda done.
git branch -f master
git checkout master
# But do clean up: remove the remote, you don't need it anymore
git remote rm previous 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-05-07T17:29:29.667

这是我的`bash`脚本基于[Kent](https://stackoverflow.com/users/270812)的改进答案：

*   完成后，它会检查原始分支，而不仅仅是`master`；
*   我试图避免临时分支，但`git checkout --orphan`仅适用于分支，而不是分离头状态，因此它已被签出足够长的时间以进行新的根提交，然后将其删除；
*   `filter-branch`它在（Kent 在其中留下一个占位符用于手动替换）期间使用新根提交的哈希值；
*   该`filter-branch`操作仅重写本地分支，而不是远程分支
*   作者和提交者元数据是标准化的，因此根提交在存储库中是相同的。

* * *

```
#!/bin/bash

# Save the current branch so we can check it out again later
INITIAL_BRANCH=`git symbolic-ref --short HEAD`
TEMP_BRANCH='newroot'

# Create a new temporary branch at a new root, and remove everything from the tree
git checkout --orphan "$TEMP_BRANCH"
git rm -rf .

# Commit this empty state with generic metadata that will not change - this should result in the same commit hash every time
export GIT_AUTHOR_NAME='nobody'
export GIT_AUTHOR_EMAIL='nobody@example.org'
export GIT_AUTHOR_DATE='2000-01-01T00:00:00+0000'
export GIT_COMMITTER_NAME="$GIT_AUTHOR_NAME"
export GIT_COMMITTER_EMAIL="$GIT_AUTHOR_EMAIL"
export GIT_COMMITTER_DATE="$GIT_AUTHOR_DATE"
git commit --allow-empty -m 'empty root'
NEWROOT=`git rev-parse HEAD`

# Check out the commit we just made and delete the temporary branch
git checkout --detach "$NEWROOT"
git branch -D "$TEMP_BRANCH"

# Rewrite all the local branches to insert the new root commit, delete the 
# original/* branches left behind, and check out the rewritten initial branch
git filter-branch --parent-filter "sed \"s/^\$/-p $NEWROOT/\"" --tag-name-filter cat -- --branches
git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d
git checkout "$INITIAL_BRANCH" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-09-12T09:24:30.083

结合最新和最伟大的。没有副作用，没有冲突，保留标签。

```
git log --reverse

tree=`git hash-object -wt tree --stdin < /dev/null`
commit=`git commit-tree -m 'Initialize empty repository' $tree`
echo $commit # copy below, interpolation didn't work for me

git filter-branch --parent-filter 'sed "s/^\$/-p <commit>/"' --tag-name-filter cat master

git log --reverse 
```

请注意，在 GitHub 上，您将丢失 CI 运行数据，并且 PR 可能会搞砸，除非其他分支也得到修复。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-18T08:28:04.107

遵循 Aristotle Pagaltzis 和其他人的回答，但使用更简单的命令

```
zsh% git checkout --orphan empty     
Switched to a new branch 'empty'
zsh% git rm --cached -r .
zsh% git clean -fdx
zsh% git commit --allow-empty -m 'initial empty commit'
[empty (root-commit) 64ea894] initial empty commit
zsh% git checkout master
Switched to branch 'master'
zsh% git rebase empty
First, rewinding head to replay your work on top of it...
zsh% git branch -d empty 
Deleted branch empty (was 64ea894). 
```

请注意，您的 repo 不应包含等待提交的本地修改。
我猜， Note`git checkout --orphan`将适用于新版本的 git。
请注意，大多数情况下`git status`都会提供有用的提示。

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2009-03-14T05:49:02.907

启动一个新的存储库。

将您的日期设置回您想要的开始日期。

以您希望的方式做所有事情，调整系统时间以反映您希望以这种方式完成的时间。根据需要从现有存储库中提取文件，以避免大量不必要的输入。

到了今天，交换存储库就完成了。

如果你只是疯狂（成熟）但相当聪明（可能，因为你必须有一定的聪明才智才能想出这样的疯狂想法），你会编写这个过程。

当您决定希望过去一周后以其他方式发生时，这也会变得更好。

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2011-06-27T09:40:24.530

我知道这篇文章很旧，但这个页面是谷歌搜索“插入提交 git”时的第一个页面。

为什么要把简单的事情复杂化？

你有ABC，你想要ABZC。

1.  `git rebase -i trunk`（或 B 之前的任何内容）
2.  在 B 行更改选择以编辑
3.  进行更改：`git add ..`
4.  `git commit`（`git commit --amend`这将编辑 B 而不是创建 Z）

[您可以`git commit`在此处进行任意数量的操作以插入更多提交。当然，第 5 步你可能会遇到麻烦，但是用 git 解决合并冲突是你应该具备的技能。如果没有，请练习！]

5.  `git rebase --continue`

很简单，不是吗？

如果您理解`git rebase`，添加“根”提交应该不是问题。

玩得开心！

# java - 在 Java 客户端和 .NET 服务器之间建立通信

> ID：645462
> 
> 赞同：2
> 
> 时间：2009-03-14T05:44:24.573
> 
> 标签：java, .net, remoting, interop

我想使用 .NET 和 Java 客户端（Android 应用程序）创建一个服务器。

客户端将通过移动网络连接到服务器，因此不可能使用 tcp 套接字进行双向通信。

我想为客户端登录开发一个逻辑：

客户端将用户名和密码发送到服务器和服务器回复（已连接/未连接）。然后，如果客户端已连接，它将开始使用 tcp 套接字发送数据流。

到目前为止，我已经查看了一些关于 Java/.Net 互操作性和远程处理的教程，但仍然没有找到上述登录逻辑的解决方案。

我非常感谢有关如何创建登录逻辑或任何好的教程推荐的任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T05:54:24.190

从来没有针对 Android 进行过编码，我真的不知道它的局限性。但是，我想说您最好的选择可能是通过肥皂或 restful web 服务使用 HTTP 通信。

我建议为您的 .Net 服务器端组件查看 WCF。这将允许您部署 Soap 连接器或 Rest 连接器或两者。然后，您可能能够为您的登录逻辑使用标准的 HTTP 基本身份验证。

使用基于 Soap 或 Rest 的服务，您将能够使用 Java 的众多肥皂库中的任何一个，或者您可以使用 Java 的内置库手动完成所有 HTTP 工作。

# java - 您更喜欢哪一个：Java Web Start 还是 Java Applet？

> ID：645464
> 
> 赞同：5
> 
> 时间：2009-03-14T05:44:38.037
> 
> 标签：java, applet, java-web-start

作为程序员和最终用户，您认为哪个更好，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-14T06:31:33.553

小程序*通常*很慢​​，很糟糕，在浏览器中不合适，无法打印，让其他一切都感觉很慢......我只是讨厌当我去某个地方并且小程序开始加载时。小程序是一个很大的失败，幸运的是正在慢慢消亡。

Web Start 非常适合制作为桌面应用程序并解决部署问题（集中部署）的应用程序。下载应用程序以在浏览器外部的 JVM 中执行。它们可以链接到桌面，离线启动...最后但同样重要的是，**您**可以选择是否使用 Web Start 应用程序。

小程序：0 - 网络开始：**1**

编辑：我使第一句话不那么通用。有成功实现小程序，毫无疑问。我只是对全球有负面看法，因为我看到的错误小程序或用法比好的小程序多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T04:10:58.050

根据我的经验，客户不希望他们的程序在浏览器中运行。但是，从 Java6 更新 10 开始，小程序可以在浏览器之外的单独进程中运行。这个吸引人的特性可能会填补小程序和 JWS 之间的空白。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T06:42:12.080

Applets 的问题是 JVM 版本。虽然理论上 JVM 在实践中是向后兼容的，但实际上它不是，我记得我一直不得不在系统 JVM 上运行两个不同的小程序（两者都由同一供应商生产——如果不是同一程序员）。

从理论上讲，Java Web Start 解决了这个问题，因为它允许用户指定要使用的 JVM，但我仍然有这个问题。如果你有一个代理服务器——虽然大多数公司环境都有——我在那里也遇到了各种各样的问题。

作为程序员和用户，我个人的选择是可下载的`SETUP.EXE`，其中包含 JAR 和用于应用程序的 JVM 版本。我们发现，当您以这种方式控制整个环境时，应用程序更加可靠。您失去了通过 Web Start 获得的简单升级，但我认为这是值得付出的代价。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T21:14:33.613

我认为两者都有自己的位置。多年来，我们部署了多个重要的小程序并取得了巨大的成功，唯一的兼容性问题是事件模型在 Java 1 到 Java 2 之间的转换引起的。它们是交付给我们客户的一种非常有效的方式，并且是部署起来比 WebStart 简单得多。

另一方面，WebStart 在部署/更新注意事项和应用程序功能之间提供了很好的折衷。

我还编写了一个动态下载启动器类，它可以在启动应用程序之前从 HTTP 地址更新自身和应用程序 - 这对于将应用程序交付到桌面并保持更新非常有效。

我个人更喜欢 JVM 作为先决条件，而不是随应用程序一起安装 - 我发现我的应用程序在各种平台（Windows、OSX、Linux 和 OS/400）上从 Java 2 到 Java 6 都没有兼容性问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-23T22:26:00.653

作为用户，我更喜欢小程序。普通用户拥有 Windows XP。显然他们并不关心速度，尽管超过 30 秒的加载时间可能很烦人。

作为一名程序员，我更喜欢 Java Web Start。它更快，在我看来更好。我认为，如果您决定使用哪个，这主要是个人选择的问题。

# css - 将 Wordpress 主题转换为纯 XHTML+CSS

> ID：645465
> 
> 赞同：7
> 
> 时间：2009-03-14T05:44:57.007
> 
> 标签：css, wordpress, xhtml

所以互联网上有很多关于如何将您的 XHTML+CSS 主题转换为 Wordpress 的帖子，但我有一个 Wordpress 主题并且想将它转换（或取消转换）回只是 XHTML+CSS。

有没有人这样做过？任何人都知道我可以用来帮助我做到这一点的任何资源（教程等）吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-14T05:59:29.373

Wordpress 呈现 html。如果你想要你的 wordpress 网站的静态版本，你可以使用[Wget](http://www.gnu.org/software/wget/)。

```
wget -l2 -r -p -k -E http://www.example.com/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-16T16:59:28.203

Visit the Wordpress web page in question, right click on the page and select view source. This will give you the XHTML. You can then find the CSS by going to the files linked in the header

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-14T06:04:59.000

让我们用你最喜欢的编辑器打开源代码并用一些测试文本替换 WordPress 函数。如果有`include`or`require`语句，请将其替换为目标文件的内容。

另一方面，您可以在服务器上运行它并将页面保存为 HTML。您将拥有静态主题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-09-09T16:33:25.703

你也可以试试这个名为[真正静态](http://wordpress.org/extend/plugins/really-static/)的插件，它会为你生成静态文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-09T23:56:05.027

我试过这个：

wget -l2 -r -p -k -E [http://www.example.com/](http://www.example.com/)

就它而言，它工作得很好，但它不会拉取 CSS 文件中的图像，因此您需要 ftp 或上传主题文件。

还要确保你的 wordpress 网站使用的是“漂亮的永久链接”，这样你就不会得到像 ( [http://www.example.com/index.html%3Fpage_id=2.html](http://www.example.com/index.html%3Fpage_id=2.html) ) 这样的古怪网址。

这也可能是一个很好的安全措施。尝试破解静态网站。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-16T16:54:34.563

你也可以用艰难的方式来做，然后撕掉 php 文件（删除

首先是 header.php，然后是 single.php（或 page.php 或您尝试复制的任何页面样式），然后是 footer.php

这将允许您在没有网络服务器的情况下执行此操作。

# parsing - 您是否曾经在现实世界的应用程序中有效地使用过词法分析器/解析器？

> ID：645468
> 
> 赞同：16
> 
> 时间：2009-03-14T05:46:09.123
> 
> 标签：parsing, compiler-construction, tokenize, lexical-analysis

最近，我开始学习ANTLR。我知道词法分析器/解析器一起可以用来构建编程语言。

除了 DSL 或编程语言，您是否曾直接或间接使用词法分析器/解析器工具（和知识）来解决现实世界的问题？普通程序员是否有可能在没有词法分析器或解析器知识的情况下解决这些问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-14T05:55:15.937

是的，我用过它们。是的，你可以在没有它们的情况下做事——但任何时候你为工作选择了错误的工具，你都会给自己带来不必要的痛苦。

我个人将技术应用于以下非标准用途的一些示例：

*   从遗留系统生成的报告中抓取数据
*   找出对于正则表达式来说过于复杂的数据模式
*   协议分析
*   基于文本的冒险游戏
*   吃掉 Toledo 的元编程 API（不是它的真名）
*   代码分析/日志分析
*   挑选数据库中的“自由格式”字段
*   还有更多我忘记了（我老了）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-14T06:17:55.960

语法高亮。[Scite](http://www.scintilla.org/SciTE.html)文本编辑器允许您编写自己的词法分析器（在 C++ 中）为任何自定义语言提供语法突出显示。我为 Scite 编写了自己的自定义词法分析器，作为对该主题的复习（我不久前在大学学习过）。

正则表达式通常用作模式匹配和简单语言处理的替代方法。由于 .NET 等框架中改进的 RegEx 支持，近年来这种情况更加普遍。在许多情况下，开发人员甚至可能不知道词法分析/解析技术，因此默认使用使用正则表达式。

然而，正如另一个答案所说，正则表达式很快就会变得低效、缓慢且难以维护，而不仅仅是简单的语法/语言。在这种情况下，解析器/词法分析器通常是最佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T06:21:04.470

是的，我在现实世界中使用过它们——但大多数情况下，您使用词法分析器和解析器创建的自定义语言已被 XML 中定义的语言所取代。更冗长，但你不必做所有这些工作......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T06:23:47.503

是的，我用过它们。我是 ANTLR 的忠实粉丝。我在这里给出了一些关于使用 ANTLR 的提示和技巧，并在[此处](http://www.transitionchoices.com/cgi-bin/article.pl?id=17)[对其](http://www.transitionchoices.com/cgi-bin/article.pl?id=9)进行了简短的认可。可以使用 ad hoc 方法手动编写自己的解析器，但是当您需要扩展解析器应该解析的语言时，要弄清楚如何进行更改要困难得多并且需要更长的时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-14T06:35:00.333

您处理文本输入的任何地方最终都会使用某种词法分析器/解析器，尽管有时它们最终会成为退化的情况（除了逗号作为一种标记类型和逗号作为另一种之外的任何东西。解析一个数字、一个名称、一个数字和行尾。那种事情）从一种角度来看，它`sscanf`可以被认为是词法分析器/解析器生成器的最退化的情况。

至于完整的 lex/yacc 操作？我希望它主要用于[GPL](http://en.wikipedia.org/wiki/General-purpose_programming_language)和属于 DSL 松散定义的事物

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-17T08:17:07.903

只要存在静态文档（例如，文件）或动态文档（例如，随时间发生的流），并且该文档具有任何类型的结构，您就会发现自己需要某种解析器。对于足够简单的结构，您可以使用临时解析（字符串黑客、正则表达式等）。对于不嵌套的结构，您可以使用有限状态机；在这里，词法分析器生成器通常很有帮助。对于复杂的结构，你几乎是一个有组织的解析器。如果您熟悉递归下降样式解析，则可以手动编写解析器。对于非常复杂的结构，解析器生成器几乎总是一个巨大的胜利。

如果您想处理计算机语言，您几乎需要词法分析器和解析器作为起点。它们还不够；你必须对解析器结果做一些事情。

我们所做的词法分析和解析的一个非常壮观的用法是将 1960 年代的语言 JOVIAL 翻译成 C，用于 B-2 隐形轰炸机。请参阅[http://www.semdesigns.com/Products/Services/NorthropGrummanB2.html](http://www.semdesigns.com/Products/Services/NorthropGrummanB2.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-14T06:04:50.903

在许多系统中使用的词法分析器/解析器的一个很好的例子存在于 Apache Lucene（一个开源搜索索引库）中。查询解析器和文档标记器都使用这些技术。虽然我猜您可以将 Lucene 中的查询解析器归类为 dsl 解析器，但它仍然被用于帮助解决现实世界的问题。

就此而言，我确信谷歌正在使用某种词法分析器/解析器来进行自己的查询语法和文档解析。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-14T06:23:42.967

这很有趣 -

我只是手动编写了一个词法分析器/解析器，以允许由 IBindingListView 实现处理简单的基于字符串的查询表达式。这是我实际上能够使用它的代码之外的第一个有用的东西，而不仅仅是听说过它。

非常行人的例子，但在我与他们的经验中我非常行人。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-14T06:30:51.747

我还没有使用其中一个大人物来进行任何词法分析，但是我已经为我从事的项目手动编写了自己的词法分析器。我们必须解析从近太空项目的数据计算机返回的数据，并将其以二进制形式写入 SD 卡。我不得不将这些位分开，将它们从二进制转换为十进制，然后将全部内容写在一个逗号分隔的文件中。

坐下来进行逻辑思考并为手头的任务编写状态机是一件很有趣的事情！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-15T20:23:14.707

是的！我合作的团队已经实现了一个文档生成框架，其中允许（主要是算术）表达式被评估。我们使用解析器从生成的文档的输入/定义中提取表达式，并为它们创建表达式树。然后评估这些树并将评估结果写入最终文档。

# language-agnostic - 学习使用专用服务器

> ID：645471
> 
> 赞同：-1
> 
> 时间：2009-03-14T05:49:06.933
> 
> 标签：language-agnostic

我是一名 ICT 专业的学生，​​我上过几个科目的课程：编码（C#、Java）、Web 开发（XHTML、CSS、JavaScript、PHP）、数据库（MySQL）、计算机技术（ASM 编码、pc 架构）、数据通信（思科网络）。

但我仍然想知道，你如何建立一个真正的大型网络项目，这需要专用服务器。

我已经这样做了 2 年了，我可能会再过一两年毕业，但我还没有开始设置一些大的东西并且不得不花费大量时间来配置它。

我什至不知道如何设置专用服务器。它可能会以其同名而存在：致力于一项任务。但是，那看起来像什么？当我必须检查它时如何使用它？我该如何优化它？如何设置与其他服务器的快速交互以及如何降低服务器负载和带宽使用率。

这些都是我的学校无法为我回答的问题，仅仅是因为他们有一套课程要讲，而且不能超越。至于我自己做，我买不起那种东西。而且我也不喜欢租这样的东西。您为位于数百英里外的一些服务器提供资金。我不希望那样，我希望服务器在步行距离之内。我需要能够走到那台机器前并自己配置它。然而，从财务上讲，这是非常不现实的。

另外，当我想到服务器时，我会想到这些东西：

![替代文字](https://farm1.static.flickr.com/59/208812013_9fda8f6a75.jpg)

认为所有好的服务器都是这样的想法是陈词滥调吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T05:59:09.373

第一的：

大多数“大型服务器”只是具有额外处理器和更多内存的 PC，通常配置在集群或场中。如果您可以在家中将 500 美元的 PC 设置为专用服务器，则同样的原则也适用。在世界上所有的应用程序中，很少有人在真正的“大型机器”上运行，这些机器是具有专门操作的现代大型机。您在家中的单处理器台式机之间的唯一区别是它可以多快完成其专用任务，以及它可以并行运行多少个该任务的实例。

您提供的图片是一个典型的大型数据中心，但您看到的每台机器都有一个服务器，可能运行 Linux、Unix、Windows 或者可能是 Solaris 或其他东西。但在核心，只是一台非常强大的 PC。

第二：

对于您的第一份工作，您不会是这样做的人。还有其他人将设置服务器，他们将授予您部署代码的权限。你的第二份工作很可能是一样的。在此过程中，您将开始学习如何根据需要处理这个问题 - 一开始是一点点，直到您成为专家。

如果您在一个庞大的组织中，那么有人专门负责管理路由器和负载均衡器之类的事情，除非您想学习，否则您无需担心。如果您所在的组织规模不够大，无法证明这一点，那么您可能也没有运行如此大规模的系统，以至于您需要知道如何管理价值 2 万美元的 Cisco 交换机。您可以下载有关如何进行 Windows 负载平衡的文章或购买 500 美元的平衡器并在 30 分钟内阅读手册。您将从小处着手，如果您喜欢处理这种情况，那么下次您将使用 2000 美元的设备。当您使用高端企业硬件时，它似乎不会那么令人生畏，因为它与您上一次从事的工作并没有太大不同。

我开发的 Web 产品运行在一个大型服务器场上，每台服务器都有许多处理器和许多 GB 的内存，以及 TB 的磁盘空间。但你知道吗？他们运行 Windows 2008 Server，您可以[免费下载半年的演示](http://www.microsoft.com/windowsserver2008/en/us/trial-software.aspx)并将其安装在任何机器上。我们开发团队中的每个人都有一个私有的开发服务器，也运行 Windows Server 2008。当我们部署到生产环境时，它本质上只是将我们的程序放在一个更大、更快的版本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T06:23:14.887

专用服务器不必专门用于一项任务，它们也可以用于许多不同的任务。之所以这样命名专用服务器，是因为它为一位客户提供了对整个服务器的完全访问权限，而不是例如共享主机，在这种情况下，客户在被要求离开之前只能使用一定数量的资源。

至于使用专用服务器，这完全取决于它运行的是什么操作系统，如果它运行的是 Windows，你很可能会 RDC'ing 到服务器中来维护它，如果它运行的是某种 Unix 或 Linux，你将最可能通过 SSH 连接到它给你一个终端。它根据您的最终目标而有很大差异！

优化方面有哪些？如果您想优化 Web 应用程序，请对其进行负载测试，如果您想优化数据存储，请测试您的应用程序以确保它充分利用您决定使用的存储后端。这个问题很模糊，没有给出任何你正在寻找的例子。

负载平衡与使用专用服务器完全不同。它是一个硬件/软件，充当一堆服务器的前端，它选择负载最少的服务器来向用户提供请求。有许多不同的软件可以进行负载平衡，以及可以完成相同壮举的硬件。

是的，认为所有服务器都是这样的想法非常陈词滥调。服务器可以是您的标准现成硬件，卡在标准 PC 机箱中。它不必一定大小，也不必安装在机架上。

至于你的学校有非常固定的课程表和课程，你应该考虑让他们参观他们的“数据中心”，这样你就可以看到他们的设置是什么样的。您也可以考虑向他们询问更多信息，或者看看他们是否愿意解释和/或帮助您了解您想要学习的内容！

如果你碰巧有第二台电脑，你可以运行类似 Linux 的东西，你就可以开始试验和学习。它很便宜，而且不会花你很多钱。就我个人而言，我有多台计算机，上面装有各种不同的操作系统，以便我可以进行实验。

# linux - 我应该在嵌入式系统中使用哪种服务器端 Web 技术？

> ID：645476
> 
> 赞同：3
> 
> 时间：2009-03-14T05:58:09.953
> 
> 标签：linux, embedded

我正在开始一个新项目，并试图弄清楚我应该使用哪些技术。这是交易，我正在编写一些将在无线路由器上运行的软件，并且我想提供一个 Web 界面。所以很可能我将不得不做一些服务器端的 Web 开发。唯一的问题是我将要部署它的设备只有 16 MB 的 RAM（Ubiquiti Bullet）。这里有更多信息：

1.) 我将使用 openwrt (linux)。2.) 显然它必须是轻量级的 3.) 这是一个学校项目，所以我可以使用任何我喜欢的技术。

显然 PHP 是显而易见的选择，但还有什么更令人兴奋的吗（我对 PHP 并不着迷）。

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T06:37:03.010

一些更高版本的 OpenWRT 带有一个完全用 lua (LuCi) 编写的接口。你有没有检查过它是否适用？它在标准 CGI 上运行，并由已在 OpenWRT 上运行的嵌入式 Web 服务器调用（这意味着您不必添加另一个软件包）。

查看他们的网站[luci.freifunk-halle.net](http://luci.freifunk-halle.net/)，它显然是一个包含 MVC 的全功能 Web 框架，因此您可以更快地开始！

> LuCI 是用于嵌入式设备的免费 Lua 软件的集合。它包括几个对开发人员有用的工具和库，以及一个 MVC-Webframework 和 Web 用户界面，它是从 8.09 版开始的 OpenWrt Kamikaze 的一部分。LuCI 项目的目标是创建和维护用户友好、稳定和可靠的用户界面和开发框架。

PHP 对于路由器来说相当大，我认为它不能提供您想要的速度！Lua 不是一门很难上手的脚本语言，它与 PHP 没有什么不同，而且 Lua 网站非常好，并且有大量的[文档](http://www.lua.org/docs.html)！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T06:18:59.637

[用 C 写。](http://www.youtube.com/watch?v=XHosLhPEN3k)

轻量级网络服务器和内置模块或 FastCGI。用 C 编写的实际 Web 内容。您将学会欣赏高级语言，并且可能会使用更少的 RAM。

*   [切诺基](http://www.cherokee-project.com/)
*   [nginx](http://nginx.net/)
*   [轻量级](http://www.lighttpd.net/)

或者，找到一个不错的小型 http 库并将 http 服务器嵌入到您的 Web UI 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T08:48:47.623

我在 C 阵营 - 使用你能找到的最小的服务器，它还允许你插入自己的 API 来控制路由器。使用 javascript 将尽可能多的逻辑卸载到浏览器，以检查发送到后端的命令，并将您的设计保持在后端的简单表单/url 处理上。

此链接包含您可以查看的许多服务器的列表。曾经声称只有 1k 行代码，这真是太小了 [http://www.ibm.com/developerworks/web/library/wa-ltwebserv/](http://www.ibm.com/developerworks/web/library/wa-ltwebserv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-16T16:47:47.920

网络服务器不是问题。任何支持 CGI 的轻量级 httpd 选项都可以完成这项工作。对于内容生成，我绝对不会用 C 语言来做。使用 LuCI 框架，并设计一个好的界面！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T17:01:46.717

考虑制作一个[Webmin](http://www.webmin.com/)插件。网民：

*   自带可以做 SSL 的网络服务器
*   可能会挤入 16MB 不费吹灰之力
*   专为修改 Unix 和 Linux 系统的 GUI 前端而设计
*   有一个有据可查的插件 API
*   有大量可以学习的示例模块（插件）

这不是灵丹妙药，但对于它所服务的利基市场，它可以 100% 满足它。唯一的缺点是 API 具有悠久的历史，并不十分优雅，而且您不会用它赢得任何流行语奖项。

# c# - 如何正确使用 if 语句？

> ID：645484
> 
> 赞同：0
> 
> 时间：2009-03-14T06:00:45.017
> 
> 标签：c#

`if`由于语句中的第一行，我无法让它运行。我确定有些东西需要转换，但我不确定是什么。

### 我的代码：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace xx
{
    class Program
    {
        static void Main(string[] args)
        {

           string userInput;
            Console.Write("what number do you choose: ");
            userInput = Console.ReadLine();

            if (userInput > 100)
                Console.WriteLine("I hate myself");
            else
                Console.WriteLine("I love myself");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-14T06:05:07.783

userInput 是一个字符串，您正在尝试将其与 int (100) 进行比较。用户输入需要先转换为 int。

```
int i;

// TryParse() returns true/false depending on whether userInput is an int

if (int.TryParse(userInput, out i))
{
    if (i > 100)
    {
        Console.WriteLine("I hate myself");
    }
    else
    {
        Console.WriteLine("I love myself");
    }
}
else
{
    Console.WriteLine("Input was not a valid number.");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T06:03:25.387

尝试`if (Int32.Parse(userInput) > 100)`
您正在尝试将 Console.ReadLine() 返回的字符串与整数进行比较 - 这就是编译器正在使用的原因。

尽管一种更强大的方法..现在我想到的是使用[Integer.TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

```
int parsedInt;
bool bResult = Int32.TryParse(stringToParse, out parsedInt) 
```

仅当转换/解析操作成功时，bResult 才会为真。这将处理恶意输入。如果成功，输出参数包含您需要的整数值。

# python - 讨论项目的多重继承与组合（+其他事物）

> ID：645493
> 
> 赞同：14
> 
> 时间：2009-03-14T06:04:55.180
> 
> 标签：python, constructor, oop, multiple-inheritance

我正在编写一个用于模拟分布式传感器群的 python 平台。这个想法是最终用户可以编写一个由 SensorNode 行为（通信、日志记录等）组成的自定义节点，并实现许多不同的传感器。

下面的例子简要地演示了这个概念。

```
#prewritten
class Sensor(object):
  def __init__(self):
    print "Hello from Sensor"
  #...

#prewritten
class PositionSensor(Sensor):
  def __init__(self):
    print "Hello from Position"
    Sensor.__init__(self)
  #...

#prewritten
class BearingSensor(Sensor):
  def __init__(self):
    print "Hello from Bearing"
    Sensor.__init__(self)
  #...

#prewritten
class SensorNode(object):
  def __init__(self):
    print "Hello from SensorNode"
  #...

#USER WRITTEN
class MySensorNode(SensorNode,BearingSensor,PositionSensor):
  def CustomMethod(self):
    LogData={'Position':position(), 'Bearing':bearing()} #position() from PositionSensor, bearing() from BearingSensor
    Log(LogData) #Log() from SensorNode 
```

## 新编辑：

首先概述我想要实现的目标：我正在编写一个模拟器来模拟群体智能算法，特别关注移动传感器网络。这些网络由许多小型机器人组成，它们相互交流各个传感器数据，以构建复杂的环境感官地图。

该项目的基本目标是开发一个模拟平台，为传感器提供抽象接口，以便可以将相同的用户实现功能直接移植到运行嵌入式 linux 的机器人群中。由于机器人实现是目标，因此我需要设计成软件节点的行为相同，并且只能访问物理节点所拥有的信息。

作为模拟引擎的一部分，我将提供一组模拟不同类型传感器和不同类型传感器节点的类。我希望从用户那里抽象出所有这些复杂性，以便用户所要做的就是定义节点上存在哪些传感器，以及正在实施哪种类型的传感器节点（移动、固定位置）。

我最初的想法是每个传感器都会提供一个 read() 方法，该方法将返回相关值，但是在阅读了对问题的回答后，我发现可能更具描述性的方法名称会是有益的（.distance(), .position( )、.bearing() 等）。

我最初想为传感器使用单独的类（具有共同的祖先），以便技术更高的用户可以轻松地扩展现有类之一以创建新的传感器，如果他们愿意的话。例如：

```
Sensor
  |
DistanceSensor(designed for 360 degree scan range)
    |           |           |
IR Sensor   Ultrasonic    SickLaser
(narrow)    (wider)       (very wide) 
```

我最初考虑多重继承的原因（尽管它半破坏了继承的 IS-A 关系）是由于模拟系统背后的基本原理。让我解释：

用户实现的 MySensorNode 不应直接访问其在环境中的位置（类似于机器人，通过传感器接口间接访问），同样，传感器不应知道它们在哪里。然而，这种缺乏直接知识带来了一个问题，因为传感器的返回值都取决于它们在环境中的位置和方向（需要对其进行模拟才能返回正确的值）。

SensorNode，作为模拟库中实现的一个类，负责在 pygame 环境中绘制 MySensorNode - 因此，它是唯一应该直接访问环境中传感器节点的位置和方向的类。

SensorNode 还负责环境中的平移和旋转，但是这种平移和旋转是电机驱动的副作用。

我的意思是机器人不能直接改变它们在世界中的位置，它们所能做的就是为电机提供动力，而在世界中的运动是电机与环境相互作用的副作用。我需要在模拟中准确地建模。

因此，要移动，用户实现的功能可以使用：

```
motors(50,50) 
```

作为副作用，此调用将改变节点在世界中的位置。

如果 SensorNode 是使用组合实现的，SensorNode.motors(...) 将无法直接更改实例变量（例如位置），MySensorNode.draw() 也不会解析为 SensorNode.draw()，因此 SensorNode imo 应该使用继承来实现。

在传感器方面，像这样的问题组合的好处是显而易见的，MySensorNode 是由许多传感器组成的——说得够多了。

然而，我看到的问题是传感器需要访问它们在世界中的位置和方向，如果你使用组合，你最终会得到如下调用：

```
>>> PosSensor.position((123,456))
(123,456) 
```

再说一遍 - 想一想，你可以在初始化时将 self 传递给传感器，例如：

```
PosSensor = PositionSensor(self) 
```

然后稍后

```
PosSensor.position() 
```

但是这个 PosSensor.position() 需要访问实例的本地信息（在**init** () 期间作为 self 传递），那么当您可以在本地访问信息时为什么还要调用 PosSensor 呢？同样将您的实例传递给您所组成的对象似乎不太正确，跨越了封装和信息隐藏的界限（即使python在支持信息隐藏的想法方面做得不多）。

如果解决方案是使用多重继承来实现的，这些问题就会消失：

```
class MySensorNode(SensorNode,PositionSensor,BearingSensor):
  def Think():
    while bearing()>0:
      # bearing() is provided by BearingSensor and in the simulator
      # will simply access local variables provided by SensorNode
      # to return the bearing. In robotic implementation, the
      # bearing() method will instead access C routines to read
      # the actual bearing from a compass sensor
      motors(100,-100)
      # spin on the spot, will as a side-effect alter the return
      # value of bearing()

    (Ox,Oy)=position() #provided by PositionSensor
    while True:
      (Cx,Cy)=position()
      if Cx>=Ox+100:
        break
      else:
        motors(100,100)
        #full speed ahead!will alter the return value of position() 
```

* * *

希望这次编辑澄清了一些事情，如果您有任何问题，我很乐意尝试澄清它们

## 旧事：

构造 MySensorNode 类型的对象时，需要调用超类中的所有构造函数。我不想让用户不得不为 MySensorNode 编写一个自定义构造函数，该构造函数从每个超类调用构造函数。理想情况下，我希望发生的是：

```
mSN = MySensorNode()
# at this point, the __init__() method is searched for
# and SensorNode.__init__() is called given the order
# of inheritance in MySensorNode.__mro__

# Somehow, I would also like to call all the other constructors
# that were not executed (ie BearingSensor and PositionSensor) 
```

任何见解或一般性评论将不胜感激，干杯:)

旧编辑：做类似的事情：

```
#prewritten
class SensorNode(object):
  def __init__(self):
    print "Hello from SensorNode"
    for clss in type(self).__mro__:
      if clss!=SensorNode and clss!=type(self):
        clss.__init__(self) 
```

这很有效，因为 self 是 MySensorNode 的一个实例。然而，这个解决方案很混乱。

* * *

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-14T12:11:31.143

如果您想坚持原来的数据图设计，可以通过使用组合来解决传感器架构。您似乎对 Python 很陌生，所以我会尽量减少使用习语。

```
class IRSensor:
    def read(self): return {'ir_amplitude': 12}

class UltrasonicSensor:
    def read(self): return {'ultrasonic_amplitude': 63}

class SickLaserSensor:
    def read(self): return {'laser_amplitude': 55}

class CompositeSensor:
    """Wrap multiple component sensors, coalesce the results, and return
    the composite readout.
    """
    component_sensors = []

    def __init__(self, component_sensors=None):
        component_sensors = component_sensors or self.component_sensors
        self.sensors = [cls() for cls in component_sensors]

    def read(self):
        measurements = {}
        for sensor in self.sensors:
            measurements.update(sensor.read())
        return measurements

class MyCompositeSensor(CompositeSensor):
    component_sensors = [UltrasonicSensor, IRSensor]

composite_sensor = MyCompositeSensor()
measurement_map = composite_sensor.read()
assert measurement_map['ultrasonic_amplitude'] == 63
assert measurement_map['ir_amplitude'] == 12 
```

您使用执行器描述的架构问题是通过使用混合和**代理**（通过`__getattr__`）而不是继承来解决的。（代理可以是继承的一个很好的替代方案，因为要代理的对象可以在运行时绑定/取消绑定。此外，您不必担心使用此技术在单个构造函数中处理所有初始化。）

```
class MovementActuator:
    def __init__(self, x=0, y=0):
        self.x, self.y = (x, y)

    def move(self, x, y):
        print 'Moving to', x, y
        self.x, self.y = (x, y)

    def get_position(self):
        return (self.x, self.y)

class CommunicationActuator:
    def communicate(self):
        return 'Hey you out there!'

class CompositeActuator:
    component_actuators = []

    def __init__(self, component_actuators=None):
        component_actuators = component_actuators \
            or self.component_actuators
        self.actuators = [cls() for cls in component_actuators]

    def __getattr__(self, attr_name):
        """Look for value in component sensors."""
        for actuator in self.actuators:
            if hasattr(actuator, attr_name):
                return getattr(actuator, attr_name)
        raise AttributeError(attr_name)

class MyCompositeActuator(CompositeActuator):
    component_actuators = [MovementActuator, CommunicationActuator]

composite_actuator = MyCompositeActuator()
assert composite_actuator.get_position() == (0, 0)
assert composite_actuator.communicate() == 'Hey you out there!' 
```

最后，您可以将它们与一个简单的节点声明一起使用：

```
from sensors import *
from actuators import *

class AbstractNode:
    sensors = [] # Set of classes.
    actuators = [] # Set of classes.
    def __init__(self):
        self.composite_sensor = CompositeSensor(self.sensors)
        self.composite_actuator = CompositeActuator(self.actuators)

class MyNode(AbstractNode):
    sensors = [UltrasonicSensor, SickLaserSensor]
    actuators = [MovementActuator, CommunicationActuator]

    def think(self):
        measurement_map = self.composite_sensor.read()
        while self.composite_actuator.get_position()[1] >= 0:
            self.composite_actuator.move(100, -100)

my_node = MyNode()
my_node.think() 
```

这应该让您了解刚性类型系统的替代方案。请注意，您根本不必依赖类型层次结构——只需实现一个（可能是隐式的）公共接口。

# 少旧：

仔细阅读问题后，我发现您所拥有的是[钻石继承](http://en.wikipedia.org/wiki/Diamond_problem)的经典例子，这是[使人们逃向](http://code.activestate.com/recipes/146462/)单一继承的邪恶。

您可能不希望这样开始，因为类层次结构在 Python 中意味着蹲下。您要做的是创建一个`SensorInterface`（传感器的最低要求）并拥有一堆“mixin”类，这些类具有完全独立的功能，可以通过各种名称的方法调用。在您的传感器框架中，您不`isinstance(sensor, PositionSensor)`应该说诸如“此传感器可以进行地理定位吗？”之类的话。采用以下形式：

```
def get_position(sensor):
    try:
        return sensor.geolocate()
    except AttributeError:
        return None 
```

这是鸭子打字哲学和[EAFP](http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Exceptions)（比许可更容易请求宽恕）的核心，这两者都是 Python 语言所包含的。

您可能应该描述这些传感器将实际实现的方法，以便我们可以描述如何将 mixin 类用于您的插件架构。

# 老的：

如果他们在一个模块中编写代码，该模块被放入插件包或你有什么，你可以在导入他们的插件模块时神奇地为他们检测类。类似于此片段的内容（未经测试）：

```
 import inspect
 import types

 from sensors import Sensor

 def is_class(obj):
     return type(obj) in (types.ClassType, types.TypeType)

 def instrumented_init(self, *args, **kwargs):
     Sensor.__init__(self, *args, **kwargs)

 for module in plugin_modules: # Get this from somewhere...
     classes = inspect.getmembers(module, predicate=is_class)
     for name, cls in classes:
         if hasattr(cls, '__init__'):
             # User specified own init, may be deriving from something else.
             continue 
         if cls.__bases__ != tuple([Sensor]):
             continue # Class doesn't singly inherit from sensor.
         cls.__init__ = instrumented_init 
```

您可以在具有其他功能[的包中找到模块。](https://stackoverflow.com/questions/487971/is-there-a-standard-way-to-list-names-of-python-modules-in-a-package)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T07:44:16.437

`super`调用 mro 列表中的下一个类。即使您省略了`__init__`某些类的表单，这也有效。

```
class A(object):
  def __init__(self):
    super(A,self).__init__()
    print "Hello from A!"

class B(A):
  def __init__(self):
    super(B,self).__init__()
    print "Hello from B!"

class C(A):
  def __init__(self):
    super(C,self).__init__()
    print "Hello from C!"

class D(B,C):
  def __init__(self):
    super(D,self).__init__()
    print "Hello from D!"

class E(B,C):
  pass 
```

例子：

```
>>> x = D()
Hello from A!
Hello from C!
Hello from B!
Hello from D!
>>> y = E()
Hello from A!
Hello from C!
Hello from B!
>>> 
```

**编辑：**重写答案。（再次）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T09:14:50.200

这是部分解决方案：

```
class NodeMeta(type):
    def __init__(cls, name, bases, d):
        setattr(cls, '__inherits__', bases)

class Node(object):
    __metaclass__ = NodeMeta

    def __init__(self):
        for cls in self.__inherits__:
            cls.cls_init(self)

class Sensor(Node):
    def cls_init(self):
        print "Sensor initialized"

class PositionSensor(Sensor):
    def cls_init(self):
        print "PositionSensor initialized"
        self._bearing = 0

    def bearing(self):
        # calculate bearing:
        return self._bearing

class BearingSensor(Sensor):
    def cls_init(self):
        print "BearingSensor initialized"
        self._position = (0, 0)

    def position(self):
        # calculate position:
        return self._position

# -------- custom sensors --------

class CustomSensor(PositionSensor, BearingSensor):
    def think(self):
        print "Current position:", self.position()
        print "Current bearing:", self.bearing()

class CustomSensor2(PositionSensor, BearingSensor, Sensor):
    pass

>>> s = CustomSensor()
PositionSensor initialized
BearingSensor initialized
>>> s.think()
Current position: (0, 9)
Current bearing: 0 
```

您必须将`__init__`代码从 Node 子类移动到其他方法（我使用过`cls_init`）。

**编辑：**我在看到你的更新之前发布了这个；我会重新阅读您的问题，如有必要，请更新此解决方案。

# .net - 如何在单击gridview中的按钮以及参数时重定向到另一个页面

> ID：645499
> 
> 赞同：1
> 
> 时间：2009-03-14T06:07:17.373
> 
> 标签：.net, vb.net, gridview

我在gridview 的其中一列中有按钮。单击按钮时，我需要将参数重定向到另一个页面以及另一个页面。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-16T07:15:06.190

只需`Server.Transfer(url, true)`对代码隐藏中的按钮单击事件执行一次。

# security - 如何防止用户注册多个帐户以投票给自己

> ID：645509
> 
> 赞同：5
> 
> 时间：2009-03-14T06:18:40.433
> 
> 标签：security, web-applications, social-networking

这个问题不是关于阻止单个用户注册多个帐户。假设无法阻止注册多个帐户，但我们要避免/检测的是用户使用帐户为自己投票时。这将适用于 SO 或 digg 之类的网站，其中用户创建第二个帐户仅用于投票支持他们的第一个帐户。

有什么想法可以防止/检测以这种方式对系统进行游戏吗？任何见解是如何做到的？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T06:23:04.730

该网站的创建者写了关于[Vote Fraud 和 You](https://blog.stackoverflow.com/2008/12/vote-fraud-and-you/)的文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T06:20:51.367

当用户 B 上次从与用户 A 相同的终端点连接时，阻止用户 A 投票支持用户 B。您可以尝试通过 IP 地址、cookie 或两者的组合来跟踪终端身份 - 所有这些都很容易被确定的人击败用户（使用匿名代理或多个 wifi 连接、cookie 清除或使用多个浏览器等）当然，不可避免地不喜欢从后面（例如公司）代理访问您的网站的个人。

如果您的投票模型允许，另一个补充防线将是降低潜在勾结的投票价值，例如，如果用户 A 投票给用户 B，而用户 B 投票给用户 A，那么您可以任意决定将投票分配给两个（每个 0.5 分）；您可以根据现有声誉对此进行细微差别（逐渐停止惩罚具有高声誉的用户），或者不进行细微差别（假设具有高声誉的用户，即使正确地为彼此投票 - 或者如果不诚实则为自己投票 - 不会介意更努力地工作以获得额外的声誉）等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T07:24:57.157

似乎一个明显的迹象是，当一个用户帐户将几乎所有的赞成票投给另一个用户帐户时。

如果我正在编写一个算法来寻找投票欺诈，我可能会这样开始：对于每个用户帐户 A，创建一个直方图，显示对于每个 N=1,2,3,... 的投票数，有多少其他账户获得了来自 A 的 N 票？顺便说一句，我猜这将是一种递减的指数分布，例如，A 已经投票了 100 个帐户一次，50 个帐户两次，25 个帐户 3 次，依此类推……关键是，它在仅仅一个计数很少（在这种情况下，在 N~8 之后）。如果账户 A 过于频繁地支持某个特定账户，您会看到一个非常大的 N 的计数，例如 80 或 100，您可以使用系统标记让您更仔细地查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-18T12:40:15.990

让自己投票的一种更简单的方法是发布智能回复。人们也可以诉诸某种形式的点击劫持来鼓励其他人投票给你，而他们没有采取明确的行动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-17T10:39:43.850

它不可锁定，但我们可以向公众展示一些统计数据，并且可以避免用户这样做。这是我的答案。

1.  如果 StackOverflow 上有两个人，**'A'**和**'B'**。

2.  如果**“B”对****“A”**的投票超过 25 次，那么这应该显示在**A 的**个人资料上。

3.  现在，如果**“B”的**声望超过 500，则表示**“B”**也参与 SO。

4.  如果**“B”的**声望低于 500 并且对**“A”**投票25 次，则可能是“B”是假个人资料。

5.  万一，如果“B”在投票后被删除，那么这应该在某些特殊情况后显示在个人资料上。

**或者**

他们应该是每个用户个人资料的一些统计信息，如下所示：

```
10 up-votes from profiles with above 10,000 rep
27 up-votes from profiles with above 5,000 rep
50 up-votes from profiles with above 3,000 rep
45 up-votes from profiles below 1,000 rep
10 up-votes from deleted profiles.
20 up-votes from inactive profiles. 
```

**或者**

```
20 rep on one up-vote from a person with above 10,000 rep
15 rep on one up-vote from a person with above 5,000 rep
10 rep on one up-vote from a person with above 1,000 rep
05 rep on one up-vote from a person with above 500 rep
02 rep on one up-vote from a person with below 500 rep 
```

或者像上面这样的东西可以提供帮助。

[https://meta.stackexchange.com/questions/35989/how-to-detect-if-users-have-created-more-than-one-profile-to-support-himself-hers/35994#35994](https://meta.stackexchange.com/questions/35989/how-to-detect-if-users-have-created-more-than-one-profile-to-support-himself-hers/35994#35994)

# c# - 如何隐藏 SplitContainer 上的面板？

> ID：645518
> 
> 赞同：45
> 
> 时间：2009-03-14T06:23:47.567
> 
> 标签：c#, .net, winforms

我想将 panel2 隐藏在拆分容器上并让 panel1 使用该空间。我希望设置 Panel2Collapsed 可以解决问题，但没有运气。想法？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2009-03-14T06:43:38.410

在类似的情况下，这对我有用：

```
splitContainer1.Panel2Collapsed = true;
splitContainer1.Panel2.Hide(); 
```

我希望第二个面板在某些情况下根本不可见，所以我以这种方式实现了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T06:30:08.630

在表单设计器中设置`Panel2Collapsed`属性`true`和以编程方式都可以按照您的意愿工作（即 Panel1 然后占据所有空间）......所以必须有其他事情发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T01:12:39.690

```
 this.splitContainerControl1.Panel2.Hide();
            this.splitContainerControl1.Panel2.Height = 0;
            this.splitContainerControl1.IsSplitterFixed = true; 
```

这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-23T08:28:49.960

splitContainer1.PanelVisibility = SplitPanelVisibility.Panel1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-13T18:37:12.497

在 Visual Studio 2017 中，这是一个小技巧。这就是我必须为我工作的。MyControl 在 panel1 内。

```
'vb.net:

MySplitContainer.Panel2Collapsed = True
MySplitContainer.Panel2.Hide()
MySplitContainer.SplitterDistance = MySplitContainer.Height
MySplitContainer.Panel1.Anchor = AnchorStyles.Bottom
MyControl.Height = MySplitContainer.Height

'for C# just add a semi-colon onto the end of each line and it should work. 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-03-14T06:27:56.700

尝试设置 panel2.Visible = false。

# c# - Java只是没有跟上吗？

> ID：645533
> 
> 赞同：20
> 
> 时间：2009-03-14T06:35:20.677
> 
> 标签：c#, java

我一整天都在编写 C# 代码，但最近因为兴趣爱好跳到了 Java，比如为 BlackBerry 和 Android 平台编写代码。一直以来，我都认为，就语言特性而言，Java 和 C# 是一对孪生兄弟。

无论如何，我发现 Java 相当于 C# 1.1 或类似的东西。在 Java 中，我必须编写两倍于 C# 的代码。像对象初始化器、lambda、看在上帝的份上的属性这样的特性会出现在 Java 中吗？我试图浏览 JSR 的东西，但找不到任何东西。

Java根本跟不上吗？还是我根本没有按预期使用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T06:44:26.723

我认为你是对的，Java 没有 C# 引入的很多方便的新特性。许多新的 C# 功能只是编译器技巧（属性、对象初始化程序、扩展方法），您可以在 C# 或 Java 中手动完成。

Java 人可能还没有引入这些新特性，因为他们可能更喜欢保持语言尽可能简单和向后兼容。

我不得不说我现在更喜欢编写 C#。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-14T06:42:56.850

我会说，是的，Java 没有跟上。微软对 Java（和 C++）进行了长时间的认真研究，找出了它们有哪些烦恼，以及缺少哪些功能，并在 C# 的后续版本中修复了其中的许多问题。

此外，Java 设计者似乎试图使他们的语言和解析器尽可能简单，而 C# 设计者并不担心语法糖：属性、委托、lambda 和 LINQ 都是这方面的例子。正如您已经注意到的那样，一勺语法糖会使语言更容易下降。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-14T07:30:01.403

Java 肯定落后了，尽管我会说它比 C# 1.1 更接近 C# 2.0 - 例如，它具有泛型，尽管它们与 C# 中的有些不同。

听到 Java 7 放弃了许多提议的语言特性（尤其是闭包），我感到很失望，但随后[Project Coin](http://openjdk.java.net/projects/coin/)出现了——所以至少我们可能有*一些*小特性值得期待。

我无法看到 Java 在语言方面很快赶上 C#——它们有更多的语言包袱，这使得为了一件事改变语言变得更加困难。尽管听起来微不足道，但已检查的异常为方法签名添加了一个额外的“轴”，这使得某些事情（如闭包）比其他情况更棘手。

（当然 C# 4.0 也出现在我们的视野中……）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-14T07:09:24.713

流行的语言越老，它的代码库就越大，并且对语言的更改以更保守的方式进行，以免破坏现有的代码库，这将是昂贵的修复。

Java 是较老的语言之一。C# 相对较新，可以进行更彻底的更改。与十年不变的 C 和 C++ 相比。

如果您*真的*想要新代码的新语言特性，请尝试另一种与 Java 互操作的基于 JVM 的语言（Groovy、Scala、Clojure）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-14T12:05:34.323

我认为部分问题是经济问题。当 Sun 在市场上处于领先地位时，Java 的出现并非偶然。在 .com 公司购买的所有服务器的推动下，他们的股票在 2000 年 3 月创下历史新高。

当泡沫破灭，所有这些服务器都投放市场时，供过于求需要很长时间才能解决。孙还没有恢复过来。商品服务器功能的增加已经侵蚀了专业 RISC 芯片和 Solaris 曾经拥有的优势。除非你是经济强国，否则你不可能成为军事强国；成为这种规模的创新者也需要现金。

他们失去了很多曾经为公司提供动力的人才（例如，比尔乔伊）。

Sun 本质上是一家硬件公司。Java 的策略，特别是在服务器端，是它有助于推动硬件销售。

我认为 Java 的变化速度因此而受到影响。

Microsoft 继续开发 C#，因为收入不断涌入，Anders 仍在他们身边，他们是一家最终从产品中赚钱的软件公司。这就是他们现在领先的原因。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-14T11:01:42.127

确实你是对的。但是，我认为语言改进的重点已经转移到新的 JVM 语言上，例如[Groovy](http://groovy.codehaus.org/)和[Scala](http://www.scala-lang.org/)。

也许这是一件好事，因为 Java 拥有庞大的用户群，不幸的是，对于应该将哪些特性（如果有的话）以及应该以何种形式添加到语言中，这些用户群几乎无法达成一致。例如，看看这个[民意调查](http://www.java.net/pub/pq/196)。另一方面，Sun 承诺对 JVM 进行改进，以促进动态 JVM 语言的开发和执行，例如[invokedynamic](http://blog.headius.com/2008/09/first-taste-of-invokedynamic.html)指令，[JSR 292](http://jcp.org/en/jsr/detail?id=292)。

对我来说，这是一个不错的妥协。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-14T07:32:47.090

这不是 Swing vs WPF，它们就像粉笔 vs 鱼子酱。

# .net - 重新触发一个VB子程序，如何序列化执行？

> ID：645543
> 
> 赞同：0
> 
> 时间：2009-03-14T06:40:55.000
> 
> 标签：.net, vb.net

对不起，如果这是一个新手问题。

我有一个由计时器触发的 VB.NET 子例程。我发现有时，如果例程运行很长时间，例程会在它仍在运行时再次触发，结果无法预料。这是正常的吗？例程的每个副本是否都在自己的线程中运行？有没有办法序列化例程？现在我使用一个布尔值，在输入时设置为 True，完成后设置为 False，这样我可以在输入时检查例程是否正在运行，但我认为可能会有更优雅的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T06:43:46.943

当您开始执行您的子程序时停止计时器，并在退出时重新启动它。

您可能应该包括错误处理，以便即使在意外退出时也会重新启动计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T07:07:48.523

A`System.Windows.Forms.Timer`是单线程的，所以我很惊讶你会`Tick`在它已经运行时调用事件（根据定义，UI 线程应该被占用，并且无法进行调用）

我可以看到`Tick`事件排队，并按顺序发生......

A`System.Timers.Timer`是多线程的，可能会出现您描述的情况。（如果您使用其中之一，切换到 a`System.Windows.Forms.Timer`至少可以防止事件相互干扰）

# iphone - 使用 Apple ID 可以访问什么？

> ID：645546
> 
> 赞同：-2
> 
> 时间：2009-03-14T06:42:39.770
> 
> 标签：iphone

如果获得 Apple ID，我可以访问什么？

我可以下载示例游戏、访问必要的开发人员信息或其他有关 Objective-C 语言的帮助（例如教程）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T23:29:27.940

如果您指的是 Apple Developer 连接，那么是的，您可以使用免费的 Apple ID 访问所有文档、示例代码和教程。

其他一些资源（例如视频）需要 Apple Developer Connection 的付费会员资格。

另外，你为什么用 cocos2d 标记你的问题，然后没有提及与它有关的任何事情？

# vb.net - 如何在单击gridview中的按钮时重定向到另一个页面

> ID：645553
> 
> 赞同：0
> 
> 时间：2009-03-14T06:47:16.433
> 
> 标签：vb.net

[如何在gridview中单击按钮以及参数时重定向到另一个页面的](https://stackoverflow.com/questions/645499/how-to-redirect-to-another-page-onclicking-on-button-in-gridview-along-with-param)副本

嗨，伙计们，我有一列中有一个带有按钮的gridview。我想重定向到另一个页面以及单击按钮时的参数。是否有任何选项可以在gridview的rowdatabound事件中执行此操作。如果有任何其他选项可以提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T07:33:57.587

如果您希望它是一个执行重定向的按钮，您必须捕获 RowCommand 事件，然后您可以使用所需的选项进行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T07:24:20.153

你的意思是在 Silverlight 中？如果是这样，您可以使用该`HtmlPage.Window.Navigate`方法。

# jquery - 应该 jQuery 的 $(form).submit(); 不在表单标签内触发 onSubmit？

> ID：645555
> 
> 赞同：41
> 
> 时间：2009-03-14T06:51:36.253
> 
> 标签：jquery, onsubmit

我有以下内容：

```
<script type="text/javascript">
function CancelFormButton(button) {
    $(button.form).submit();
}
</script>

<form onsubmit="alert('here');">
<input type="button" value="Cancel" onClick="CancelFormButton(this);" />
</form> 
```

当我单击“取消”按钮时，不会触发来自表单标签的 onsubmit。

这一行反而成功地提交了表单：`$(button.form).submit();`但跳过`alert('here');`了表单标记中的 onsubmit 。

这是正确的还是我做错了什么？

顺便说一句，在这种情况下，我想要这个功能，但我只是想知道我是否会在触发 onsubmit 的浏览器中遇到问题。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-03-14T06:52:58.667

对不起，误解了你的问题。

根据[Javascript - 在调用 form.submit() 时捕获 onsubmit](http://wayback.archive.org/web/20090323062817/http://blogs.vertigosoftware.com/snyholm/archive/2006/09/27/3788.aspx)：

> 最近有人问我：“当我使用 javascript 提交表单时，为什么不会触发 form.onsubmit 事件？”
> 
> 答案：当前的浏览器不遵守 html 规范的这一部分。该事件仅在用户激活时触发 -**并且在由代码激活时不会触发。**

（强调补充）。

**注意：** “由用户激活”还包括点击提交按钮（可能包括来自回车键的默认提交行为，但我没有尝试过）。我相信，如果您（使用代码）单击提交按钮，它也不会被触发。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-06T05:14:52.243

[**此**](http://jsfiddle.net/sFaV9/1/)解决方法将解决@Cletus 发现的问题。

```
function submitForm(form) {
    //get the form element's document to create the input control with
    //(this way will work across windows in IE8)
    var button = form.ownerDocument.createElement('input');
    //make sure it can't be seen/disrupts layout (even momentarily)
    button.style.display = 'none';
    //make it such that it will invoke submit if clicked
    button.type = 'submit';
    //append it and click it
    form.appendChild(button).click();
    //if it was prevented, make sure we don't get a build up of buttons
    form.removeChild(button);
} 
```

适用于所有现代浏览器。
将跨选项卡/生成的子窗口工作（是的，即使在 IE<9 中）。
而且是香草！

只需将 DOM 引用传递给表单元素，它就会确保所有附加的侦听器、onsubmit 以及（如果那时没有阻止）最后提交表单。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-09T11:48:22.920

我想在某些情况下想要这种行为是合理的，但我认为不触发表单提交的代码应该（总是）是默认行为。假设您想捕获表单的提交

```
$("form").submit(function(e){
    e.preventDefault();
}); 
```

然后对输入进行一些验证。如果代码可以触发提交处理程序，你永远不能包括

```
$("form").submit() 
```

在这个处理程序内部，因为它会导致无限循环（将调用 SAME 处理程序，阻止提交、验证和重新提交）。您需要能够在提交处理程序中手动提交表单，而无需触发相同的处理程序。

我意识到这并不能直接回答这个问题，但是这个页面上还有很多关于如何破解这个功能的其他答案，我觉得需要指出这一点（评论太长了）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-10-28T14:45:07.187

我的简单解决方案：

```
$("form").children('input[type="submit"]').click(); 
```

这对我来说是工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-16T11:35:39.067

trigger('submit') 不起作用。因为 onSubmit 方法不会被触发。以下代码适用于我，使用此代码时调用 onSubmit 方法：

`$("form").find(':submit').click();`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T07:34:22.250

尝试在您的函数中触发（）事件：

```
$("form").trigger('submit'); // and then... do submit() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-12T09:02:45.867

代替

`$("form").submit()`

试试这个

```
 $("<input type='submit' id='btn_tmpSubmit'/>").css('display','none').appendTo('form');
 $("#btn_tmpSubmit").click(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-31T03:21:32.340

几年前我发现了这个问题。

最近我尝试“重写”提交方法。下面是我的代码

```
window.onload= function (){
for(var i= 0;i<document.forms.length;i++){
    (function (p){
        var form= document.forms[i];
        var originFn= form.submit;
        form.submit=function (){
            //do something you like
            alert("submitting "+form.id+" using submit method !");
            originFn();
        }
        form.onsubmit= function (){
            alert("submitting "+form.id+" with onsubmit event !");
        }
    })(i);

} 
```

}

```
<form method="get" action="" id="form1">
<input type="submit" value="提交form1" />
<input type="button" name="" id="" value="button模拟提交1" onclick="document.forms[0].submit();" /></form> 
```

它在 IE 中可以，但在其他浏览器中失败，原因与“cletus”相同

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-05T09:03:25.223

解决此问题的最简单解决方案是使用类型提交和触发单击创建“临时”输入：

```
var submitInput = $("<input type='submit' />");
$("#aspnetForm").append(submitInput);
submitInput.trigger("click"); 
```

# wpf - ViewModel 如何知道服务中的数据何时更新？

> ID：645557
> 
> 赞同：3
> 
> 时间：2009-03-14T06:54:35.793
> 
> 标签：wpf, mvvm, idisposable

在我的应用程序中，我有几个 ViewModel 有一个服务（存储库、DAO 等），我们称它为**WidgetService 并**注入它们。

假设这些 ViewModel 之一是所有用户小部件的列表。另一个可能是用于编辑/创建其中一个小部件的 ViewModel。

用户可以在**WidgetListViewModel**支持的**WidgetListView**中查看小部件列表，然后单击按钮添加新小部件。为了创建这个新的 Widget，创建一个**CreateWidgetViewModel**并注入到一些 UserControl/Window 的 DataContext 中，因此，通过 DataTemplates 在 CreateWidgetView 中显示**CreateWidgetViewModel**的**魔力**。此外，**CreateWidgetViewModel**的更新不一定发生在**WidgetListViewModel**的范围内。

 ******当**WidgetListViewModel**被注入 WidgetService 的实例**时**。**CreateWidgetViewModel**被注入了同一个**WidgetService**实例。

现在，当用户在**CreateWidgetView中单击***保存时，将调用***WidgetService**上的*Save*方法，并且小部件将被持久化。现在需要通知**WidgetListViewModel有一个新的 Widget 要显示！**

 *******长时间的积累导致了这个问题：我如何让**WidgetListViewModel**知道它需要显示新的 Widget？

我看过一个[视频](http://www.lab49.com/files/videos/Jason%20Dolinger%20MVVM.wmv)，其中一个来自 Microsoft 的人使用 ViewModel 订阅的服务上的事件来做这种事情。然而，这样做的缺点是，如果服务比视图模型寿命更长，那么视图模型将不会被 GC 处理，直到服务被 GC 处理。我可以将 IDisposable 添加到 ViewModel。但是，当 ViewModel 仅通过 DataTemplates 在 UI 中表示时，何时/如何调用 Dispose？

有人对此有什么建议吗？

为了澄清，我想说我对 MVVM 的解释最接近 Josh Smith 的解释。至少在我的 MVVM 架构上与 Crack.Net 源代码中的架构非常接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T12:03:55.357

好的，鉴于对此没有任何答案，但我想我会尝试一下，但我不是 MVVM 方面的专家。

事件似乎是解决这个问题的方法。但是，正如您所指出的，如果服务的寿命超过 ViewModel，则可能会发生内存泄漏。处理这个问题的最好方法是使用弱事件侦听器。

[弱事件](http://msdn.microsoft.com/en-us/library/aa970850.aspx)允许您连接到具有弱引用的事件，这样如果源对象被 GC 处理，则源对象不会被事件处理程序保持活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T20:01:56.660

使用 Prism 的 ( [http://www.codeplex.com/CompositeWPF](http://www.codeplex.com/CompositeWPF) ) **EventAggregator**，它使用发布者-订阅者模式，提供目标和源元素之间的丢失耦合。非常适合您描述的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T19:50:11.943

我使用了[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)（又名发布/订阅模式）来解决同样的问题。我创建了一个名为 EventAggregator 的类，其中包含所有共享方法和数据成员。我可以在 WidgetListViewModel 上注册一个事件，并在 CreateWidgetViewModel 中发布一个“Widget Created”事件。您可以让 WidgetListViewModel 实现 IDisposable（更好）来取消注册您的事件，或者您可以在 Finalize 方法中取消注册它。结果非常好，最好的部分是两个视图模型不需要对彼此有任何了解。

对于更复杂的事情，或者如果您需要支持服务和应用程序之间的版本差异，您可以实现一个 ModelView 来处理这种事情，从而使您的应用程序的模式为 M-MV-VM-V。它可能看起来有点矫枉过正，但它可以使某些类别的问题更容易维护。我知道我有几个项目希望我插入一个 MV，因为 VM 和撤消代码之间的串扰变得荒谬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-15T10:07:55.657

有几种选择：

1.  使用 ObservableCollection - 这可能是最简单的选择，但是你必须在模型中有某种“主”集合，并且让 UI 直接绑定到这个集合，这可能不是“干净”的 MVVM 架构，但它可能是最简单的方法完成工作。

2.  使用事件并确保您自己清理，这在 MVVM 中并不容易。

3.  使用一些中间人来自动清理事件（如其他人建议的那样），但不要自己编写，这有很多陷阱，WPF 有一个内置类可以做到这一点，但我忘记了名字（如果有人记得名字请留言）。

4.  定期刷新，让 ViewModel 类每 X 秒刷新一次列表，这是在没有某种通知机制的情况下获取更新的唯一方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T13:09:36.660

我同意 Cameron 使用 Wea​​kEvent 模式。我已经为支持 WeakEvent 模式的 ViewModel（在我的示例中我使用名称 PresentationModel）创建了一个基类。

您可能会发现我的示例项目很有用：http: [//www.codeplex.com/CompositeExtensions](http://www.codeplex.com/CompositeExtensions)

jbe

# macos - Mac 可以有多个客户端使用其桌面吗？

> ID：645566
> 
> 赞同：2
> 
> 时间：2009-03-14T07:15:14.497
> 
> 标签：macos, remote-desktop, vnc

我有一台服务器 Mac OSX，我的团队中有 5 台 Windows PC。

所以我在 MAC 上有这个程序，但我希望我的团队中的两个用户能够使用这个程序，有没有一个人可以 VNC 或远程桌面或 MAC 服务器上的其他东西？然后这两个用户都可以在 mac 服务器上使用该程序。

我想我需要两个合法许可证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T08:43:52.597

使用第三方 VNC 服务器可以同时进行多个 GUI 会话。本页描述了[Vine Server (OSXvnc)](http://www.testplant.com/products/vine_viewer/multidesktop)的过程。尽管它提到了 Tiger，但这些步骤也适用于 Leopard。在客户端方面，Leopard 内置的“屏幕共享”是基于 VNC 的，但无法连接第三方服务器。您还需要单独的客户端软件（例如[VNC 的鸡](http://sourceforge.net/projects/cotvnc/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T16:38:36.740

这也可以使用[Aqua Connect](http://www.aquaconnect.net/)来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-12T00:30:27.037

Apple 在 2011 年 7 月发布的 Mac OS X Lion 中“修复”了这个问题。您需要做的就是在“系统偏好设置”中启用屏幕共享（确保设置密码，并允许访问所需的用户帐户），以及Windows 机器上的 VNC 客户端，例如 Terminals 或 TightVNC。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-10-25T16:51:05.920

不，你不能。

> 我们的 Aqua Connect 终端服务器产品。**它目前不可用，但您可以填写此表格，以便在准备就绪时收到通知。**"

# vim - 禁用 vim 的启动消息 (vimdiff, vim -o -O one)

> ID：645568
> 
> 赞同：8
> 
> 时间：2009-03-14T07:15:40.517
> 
> 标签：vim, message, startup

当从命令行使用拆分窗口打开多个文件时，vim 喜欢说明每个文件的文件名、行数和字符数。然后提示用户按回车键继续好东西。

是否有设置或开关来禁用此功能？我正在使用它与 TortoiseSVN 进行比较，当我想要的只是快速浏览一下更改时，消息正在扼杀我的生产力。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T10:28:27.883

你必须玩'shortmess' vim 选项。

```
:help shortmess 
```

在你的 .vimrc 中设置它

```
set shortmess=at 
```

或在 vim 运行期间

```
vim --cmd 'set shortmess=at' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-26T07:19:19.033

Mykola Golubyev 的回答很好，但您可能想要使用`+=`而不是`=`为了保留已经存在的标志。

```
set shortmess+=at 
```

否则，它可能会产生上述评论中提到的副作用。

# c++ - 循环生成向量的大写字符 元素

> ID：645578
> 
> 赞同：0
> 
> 时间：2009-03-14T07:27:03.967
> 
> 标签：c++, vector, loops

在调试时，我认为我做对了。但只有第一个成员作为向量中的第一个元素被更正。

```
while ( !inFile->eof() )
{
    getline( *inFile, str1, ',' );      
    sStruct.str1 = str1;
    getline( *inFile, str2, ',' );
    sStruct.str2 = str2;
    getline( *inFile, str3, ',' );
    sStruct.str3 = atof( str3.c_str() );
    getline( *inFile, str4 );
    sStruct.str4 = atof( str4.c_str() );

    myLength = sStruct.str1.length();

    for( ; sIndex < myLength; sIndex++ )
    { 
        if ( 97 <= str4[sIndex] && str4[sIndex] <= 122 )
        {
            str4[sIndex] -= 32;
        }
    }   

    sStruct.str1 = str1;
    vectorData->push_back( sStruct );
} 
```

在我选择读取文件的方法下实现此代码，只会将第一个结构成员（在本例中为 str1）更改为所有大写字符。对于同一结构成员 str1，所有字符均不受影响。

我的循环没有做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T08:08:18.283

正如评论中已经说明的那样，您应该首先在代码中查看一些内容：

*   在你进入这个 while 循环之前，sIndex 的值是多少？
*   为什么你在 for 循环中使用 str4[] 但获取长度并在 str1 上进行分配？
*   你真的确定，只有 str1 被改为大写吗？给定的代码没有这样做......
*   不要自己进行大写计算，而是使用[toupper()](http://www.cplusplus.com/reference/clibrary/cctype/toupper.html)方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T09:34:59.400

我建议使用标头算法中的转换进行转换，它更干净：

```
transform( str4.begin(), str4.end(), str4.begin(), toupper ); 
```

# c# - NHibernate 一对多映射问题

> ID：645579
> 
> 赞同：2
> 
> 时间：2009-03-14T07:28:06.913
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping, one-to-many

我必须映射两个具有外键关系的简单表。其中一个表是**Contact**包含列**id**（int 类型的主键）、**name**、**address**和**guid**（新添加且不是主键）。另一个是**phone__number**包含列**id**（int 类型的主键）、 contact **___** id （联系人表中 id 的外键）和**phone__number**。

 **Contact 表的映射文件如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="OfflineDbSyncWithNHibernate" default-lazy="true" namespace="OfflineDbSyncWithNHibernate.Models">
  <class name="Contact" table="Contact">
    <id name="Id" column="Id" type="int">
      <generator class="native" />
    </id>

    <property name="Name" column="name" type="string"/>
    <property name="Address" column="address" type="string"/>
    <property name="Guid" column="guid" type="string"/>

    <set lazy="true" batch-size="6" table="phone_number" name="PhoneNumbers" fetch="join" inverse="false" cascade="all" >
      <key foreign-key="FK_contact_phone_number" column="contact_id"/>
      <one-to-many class="PhoneNumber" />
    </set>

  </class>
</hibernate-mapping> 
```

Phone_number 表的映射文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="OfflineDbSyncWithNHibernate" default-lazy="true" namespace="OfflineDbSyncWithNHibernate.Models">
  <class name="PhoneNumber" table="phone_number">
    <id name="Id" column="Id" type="int">
      <generator class="native" />
    </id>
    <property name="ContactId" column="contact_id" />
    <property name="Number" column="phone_number" />
  </class>
</hibernate-mapping> 
```

Contact 和 PhoneNumber 类是：

```
namespace OfflineDbSyncWithNHibernate.Models
{
    public class Contact
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual string Address { get; set; }
        public virtual string Guid { get; set; }
        public virtual PhoneNumbers PhoneNumbers { get; set; }
    }
}

namespace OfflineDbSyncWithNHibernate.Models
{
    public class PhoneNumber
    {
        public virtual int Id { get; set; }
        public virtual int ContactId { get; set; }
        public virtual string Number { get; set; }
    }
}

namespace OfflineDbSyncWithNHibernate.Models
{
    public class PhoneNumbers : List<PhoneNumber>
    {
    }
} 
```

当我分别加载联系人和电话号码时，它可以工作，但是在添加 set 元素以获得一对多关系后，nhibernate 给出了一个错误：

NHibernate.MappingException：为类型 OfflineDbSyncWithNHibernate.Models.Contact 指定的映射信息无效，请检查映射文件中的属性类型不匹配

我是 nHibernate 的新手，所以我不确定 set 元素是否有错误，或者我什至不应该使用它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-29T10:18:36.283

只要记住这个

*   Bag是使用IList实现的
*   Set 是使用 ISet 实现的
*   List 使用 ArrayList 或 List 实现
*   Map 使用 HashedTable 或 IDictionary 实现

如果您想使用 IList，请使用第一条规则，即更改您的 hbm.xml 以使用 Bag 而不是 Set，您的 Phonenumbers 类也应该继承自 IList 而不是 List，如果您想使用 List，您需要更改映射文件以使用 List集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T07:37:38.420

我认为您的 PhoneNumbers 类需要继承自`Iesi.Collections.ISet`. 我不认为.NET 中默认提供了“Set”类型。请参阅休眠[常见问题解答](http://www.hibernate.org/359.html)

> <set> 映射到 Iesi.Collections.ISet。该接口是与 NHibernate 一起分发的 Iesi.Collections 程序集的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T07:51:16.547

您的集合类型应该是一个接口，因为 NHibernate 将提供它自己的类型，当从数据库中检索对象时实现该接口。

如果您将您的收藏定义为

```
public virtual ISet<PhoneNumber> Phonenumbers = new HashedSet<Phonenumber>(); 
```

然后我认为它会起作用。

为了更好地控制对您的收藏的访问，您可以像这样修改您的联系人类：

```
public class Contact
{
    public virtual int Id {get;set;}
    ..

    private ISet<Phonenumber> _phoneNumbers = new HashedSet<PhoneNumber>();

    public ReadOnlyCollection<Phonenumber> PhoneNumbers
    {
        get 
        {
           return new List<Phonenumber>(_phoneNumbers).AsReadOnly();
        }
    }

    public void AddPhonenumber( Phonenumber n )  
    {
        n.Contact = this;
        _phoneNumbers.Add(n);
    }

    public void RemovePhoneNumber( PhoneNumber n )
    {
        ...
    }
} 
```

然后，您必须确保在 Contact 类的映射中，指定 NHibernate 应该访问字段 _phoneNumbers 而不是属性 PhoneNumber：

```
<set name="PhoneNumbers" access="field.camelcase-underscore" ... >
   ...
</set> 
```

# php - 如何在 PHP 中绘制图形？

> ID：645582
> 
> 赞同：23
> 
> 时间：2009-03-14T07:31:19.637
> 
> 标签：php, graphics, draw, graph-drawing

嘿，我想在我的网站中基于 PHP 绘制一个图表（Stdent 标记分布）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-03-14T08:18:37.353

[pChart](http://www.pchart.net/)是另一个很棒的 PHP 图形库。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-07-03T07:09:36.237

```
<?
# ------- The graph values in the form of associative array
$values=array(
    "Jan" => 110,
    "Feb" => 130,
    "Mar" => 215,
    "Apr" => 81,
    "May" => 310,
    "Jun" => 110,
    "Jul" => 190,
    "Aug" => 175,
    "Sep" => 390,
    "Oct" => 286,
    "Nov" => 150,
    "Dec" => 196
);

$img_width=450;
$img_height=300; 
$margins=20;

# ---- Find the size of graph by substracting the size of borders
$graph_width=$img_width - $margins * 2;
$graph_height=$img_height - $margins * 2; 
$img=imagecreate($img_width,$img_height);

$bar_width=20;
$total_bars=count($values);
$gap= ($graph_width- $total_bars * $bar_width ) / ($total_bars +1);

# -------  Define Colors ----------------
$bar_color=imagecolorallocate($img,0,64,128);
$background_color=imagecolorallocate($img,240,240,255);
$border_color=imagecolorallocate($img,200,200,200);
$line_color=imagecolorallocate($img,220,220,220);

# ------ Create the border around the graph ------

imagefilledrectangle($img,1,1,$img_width-2,$img_height-2,$border_color);
imagefilledrectangle($img,$margins,$margins,$img_width-1-$margins,$img_height-1-$margins,$background_color);

# ------- Max value is required to adjust the scale -------
$max_value=max($values);
$ratio= $graph_height/$max_value;

# -------- Create scale and draw horizontal lines  --------
$horizontal_lines=20;
$horizontal_gap=$graph_height/$horizontal_lines;

for($i=1;$i<=$horizontal_lines;$i++){
    $y=$img_height - $margins - $horizontal_gap * $i ;
    imageline($img,$margins,$y,$img_width-$margins,$y,$line_color);
    $v=intval($horizontal_gap * $i /$ratio);
    imagestring($img,0,5,$y-5,$v,$bar_color);

}

# ----------- Draw the bars here ------
for($i=0;$i< $total_bars; $i++){ 
    # ------ Extract key and value pair from the current pointer position
    list($key,$value)=each($values); 
    $x1= $margins + $gap + $i * ($gap+$bar_width) ;
    $x2= $x1 + $bar_width; 
    $y1=$margins +$graph_height- intval($value * $ratio) ;
    $y2=$img_height-$margins;
    imagestring($img,0,$x1+3,$y1-10,$value,$bar_color);imagestring($img,0,$x1+3,$img_height-15,$key,$bar_color);        
    imagefilledrectangle($img,$x1,$y1,$x2,$y2,$bar_color);
}
header("Content-type:image/png");
imagepng($img);
$_REQUEST['asdfad']=234234;

?> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-03-14T07:34:00.597

最好的办法是查找 php_gd2。这是一个相当不错的图像库，附带 PHP（只是在 php.ini 中禁用），不仅可以以几种格式输出完成的图像，它还有足够的功能，你应该能够相当容易地制作出一个好的图表.

编辑：如果我给你几个有用的链接可能会有所帮助：

[http://www.libgd.org/](http://www.libgd.org/) - 你可以在`php_gd2`这里获得最新的
[http://ca3.php.net/gd](http://ca3.php.net/gd) -`php_gd`手册。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-03-14T07:56:55.847

你可以使用[google的chart api](http://code.google.com/apis/chart/types.html)来生成图表。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-03-16T09:09:55.820

有许多库可用于生成图表。

*   [打开 Flash 购物车](http://teethgrinder.co.uk/open-flash-chart-2/)- 基于 Flash
*   [GraPHPite](http://graphpite.sourceforge.net/)
*   [JS 图表](http://www.jscharts.com/)- 基于 Javascript
*   [库图](http://naku.dohcrew.com/libchart/pages/introduction/)

[上面和这里](http://www.smashingmagazine.com/2007/10/18/charts-and-graphs-modern-solutions/)列出了更多。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-07-16T18:42:19.227

到目前为止，最简单的解决方案是只使用 Google Chart API [http://code.google.com/apis/chart/](http://code.google.com/apis/chart/)

您可以制作条形图、饼图、使用 3D，就像使用一些参数构建 url 一样简单。请参阅下面的简单示例。

![这个饼图真的很容易制作](https://chart.apis.google.com/chart?cht=p3&chd=t:30,70&chs=250x100&chl=This|Like)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-03-14T07:44:44.207

还有几个可用于 PHP 的图形库，让您的生活更简单。[JPGraph](http://www.aditus.nu/jpgraph/)是一个很好的（非免费的）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-14T09:09:08.917

对gd2一无所知，但我用gd做了类似的事情，并不难。

转到[http://www.php.net/](http://www.php.net/)并搜索类似的东西

*   图像创建
*   形象线
*   图像串

它不像其他一些解决方案那样华而不实，但是由于您生成图片，它可以在所有浏览器中使用。（猞猁除外... :-)）

/约翰

* * *

**更新：**我差点忘了，这种类型的图片不要使用 jpeg。jpeg 伪影真的很烦人，png 是一个更好的解决方案。

# iphone - 在 iPhone 应用程序之间共享一个 sqlite 数据库

> ID：645584
> 
> 赞同：2
> 
> 时间：2009-03-14T07:33:32.003
> 
> 标签：iphone, sqlite

这可能吗？我可以将数据库复制到用户的主目录，然后使用多个程序访问它吗？我猜答案是“不”，因为它会使复制和粘贴变得非常简单，但我想我会问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T07:47:20.690

没有。这就是 OpenClip 所做的（好吧，不是数据库），但 2.1 打破了它：[http](http://gizmodo.com/5040509/iphone-21-will-break-openclip-copy-and-paste-between-apps) ://gizmodo.com/5040509/iphone-21-will-break-openclip-copy-and-paste-between-apps 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T13:43:08.003

我的印象是两个具有相同顶级捆绑标识符（EG、com.mycompany.xxx 和 com.mycompany.yyy）的应用程序可以访问彼此的共享数据。我会看看我是否能从苹果那里找到一些关于这个的文档......

# objective-c - 如何在 Objective-C / Iphone SDK 中定义一个返回 NSString 的函数

> ID：645589
> 
> 赞同：2
> 
> 时间：2009-03-14T07:37:35.160
> 
> 标签：objective-c, iphone

嗯，我本以为这会更简单一点..

在我的 .h 文件中，我正在尝试以下

```
#import <UIKit/UIKit.h>
@interface myViewController : UIViewController {
}
- (int)doStuff;
- (NSString)doMoreStuff;
@end 
```

编译器标记我的 doMoreStuff 但允许 doStuff.. 任何线索？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T07:39:08.430

```
- (NSString *)doMoreStuff; 
```

因为所有的 Objective-C 对象都被指针引用。

# c++ - 您将如何根据元素的某些属性删除 std::vector 的元素？

> ID：645595
> 
> 赞同：5
> 
> 时间：2009-03-14T07:42:46.597
> 
> 标签：c++, algorithm, stl, vector

例如，如果您有一个`std::vector<MyClass>`，其中`MyClass`有一个公共方法：`bool isTiredOfLife()`，您如何删除返回 true 的元素？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-03-14T07:52:06.670

我更喜欢 remove_if

```
v.erase(remove_if(v.begin(), v.end(), 
                 mem_fun_ref(&MyClass::isTiredOfLife)), 
        v.end()); 
```

[`remove_if`](http://www.sgi.com/tech/stl/remove_if.html)返回指向仍在序列中的最后一个元素之后的迭代器。`erase`擦除从第一个参数到最后一个参数（两个迭代器）的所有内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-14T08:01:32.420

使用 remove_if 是执行此操作的“正确”方法。注意不要使用迭代器来循环和擦除，因为删除项目会使迭代器失效。事实上，任何使用 erase() 作为其主要方法的示例在向量上都是一个坏主意，因为擦除是 O(n)，这将使你的算法 O(n^2)。这应该是一个 O(n) 算法。

我在下面给出的方法可能比 remove_if 更快，但与 remove_if 不同，它不会保留元素的相对顺序。如果您关心维护顺序（即您的向量已排序），请使用 remove_if，如上面的答案所示。如果您不关心顺序，并且要删除的项目数通常小于向量的四分之一，则此方法可能会更快：

```
for( size_t i = 0; i < vec.size(); )
   if( vec[i].isTiredOfLife() )
   {
      vec[i] = vec.back();
      vec.pop_back();
   }
   else
      ++i; 
```

# silverlight - 使用 Silverlight 的 3D 图像（拖放、编辑、旋转、调整大小、放大和缩小）

> ID：645596
> 
> 赞同：-4
> 
> 时间：2009-03-14T07:42:57.610
> 
> 标签：silverlight, silverlight-2.0, silverlight-2-rc0

我是silverlight的新手，现在学习基础知识。但我需要实现 3D 图像处理（拖放、编辑、旋转、调整大小、放大和缩小）。请用相应的代码示例、附件进行说明。请尽快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T08:24:09.743

苏伦德拉-chw，

这是一个非常开放的问题：除非您清楚自己要完成的工作（如果有的话，请解释您已经尝试/学到的东西），否则人们很难帮助您。**最重要的是，在像stackoverflow**这样的问答环境中，我们无法为您完成工作。

Silverlight 2.0 不支持*任何*开箱即用的 3D 功能。我想你知道吗？

您可能已经通过 google 找到[了 Kit3D](http://kit3d.codeplex.com/)？它尝试提供 WPF 3D 命名空间/类的子集，以尽可能为您提供一致的 API。它还包含一个示例项目，其中包含 Silverlight 中的许多不同 3D 示例。

另一个有用的信息来源是[Charles Petzold 的书](http://www.charlespetzold.com/3D/)（你应该买）和[博客](http://www.charlespetzold.com/blog/2009/01/Non-Affine-Transforms-in-Silverlight.html)。它主要是关于 WPF 3D，但这些概念将适用于 Kit3D（和 Silverlight 3.0，大概在下周宣布时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-27T21:50:33.173

等待 Silverlight 3。这应该会在今年夏天发布并支持 3D，但您的问题与 3D 无关。

目前 Silverlight 2 支持您描述的所有功能。要获得有关这需要什么的一些信息，我建议下载 Blend 并使用转换属性、旋转、缩放都是该功能的一部分。

至于调整大小和拖放，那是另一回事。在您的控件上，您必须在 LeftMouseButtonDown 和 LeftMouseButtonUp 的事件处理程序上添加一些方法，然后捕获鼠标位置增量以获得移动的方向和距离，然后将其应用于 X 或 Y 平面上 TranslateTransform 的 transformgroup 属性.

你显然必须做一些工作才能达到你想要实现的目标。

# ajax - inlineformset_factory 自定义表单ID

> ID：645603
> 
> 赞同：1
> 
> 时间：2009-03-14T07:52:02.923
> 
> 标签：ajax, django, inline-formset

我正在编写一个使用 ajax 在页面上添加新表单的 Web 应用程序。现有的表单是使用 inlineformset_factory 制作的。当客户端获取表单时，它会将其插入到正确的位置并更新#id_form_type-TOTAL_FORMS"的值（在本例中，form_type 是表单的名称）。

现有表单具有每个字段的名称，例如 name="form_type-1-source"，其中 1 是唯一的表单 ID。

问题是为新表单生成下一个 ID，以便所有表单都不同。我已经提出了一种解决方案，但我不喜欢它。

ajax 调用的 URL 如下所示：

```
(r'^ajax/get_form/(?P<form_type>\w+)$', views.get_form), 
```

获取表单视图：

```
def get_form(request, form_type):
    """
    Returns form for requested model if invoken with ajax.
    If invoken directly returns empty string.

    The form is rendered into HTML using as_p method. 
    """
    if request.method == "GET" and request.is_ajax():
        current_forms_no = int(request.GET["current_forms_no"])
        form_class = all_forms[form_type]
        Formset = inlineformset_factory(Component, form_class.Meta.model, extra=current_forms_no + 1, form = form_class, can_delete = False)
        form = Formset()
        return HttpResponse(form.forms[current_forms_no].as_p())
    else:
        return HttpResponse() 
```

以及调用它的 JavaScript 函数：

```
function add_new_form(event) {
    event.preventDefault();
    form_type = $(this).attr("href");

    // for id generation
    formset = $("#id_" + form_type + "-TOTAL_FORMS");
    current_forms_no = formset.val()

    container = $(this).parent().parent();
    $.get("/ajax/get_form/" + form_type, {"current_forms_no" : current_forms_no}, function(data) {
        container.append(data);
        container.append("<hr>");

        // increment form count so they can be saved on server
        formset.val(parseInt(formset.val()) + 1);
    })
} 
```

我有不止一种形式，所以函数是通用的。我将 form_type 保留在锚的 href 属性中。

所以，我在这里所做的是创建比我需要的更多的表单，我只使用最后一个。

那么，有没有办法告诉 inlineformset_factory 我想首先生成什么 ID？

PS：对不起我的英语不好...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T18:38:02.843

我所做的是创建一个隐藏的额外表单，然后简单地用 Javascript 复制它。即复制最后一个表单，使隐藏的表单可见，并隐藏表单的新副本。

这样您就可以计算页面上的表单数量并将其用于元 Total-Forms 变量。

如果您希望能够删除页面上的表单，则需要对 DELETED 属性进行一些处理。编辑：这是我使用原型 js 的主要功能之一。

```
function add_form_to_formset(formset, callbacks etc...){
   // Management form
   total_forms_element = $('id_' + formset.prefix + '-TOTAL_FORMS');

   var curr_last_id = biggest_id(formset.form_class);
   var last_form = $('id_' + formset.prefix + '-' + curr_last_id + '-id').up();

   // Copy it
   var new_form = last_form.cloneNode(true);

   ...register some buttons like add/remove etc..

   set_form_id(new_form, curr_last_id+1);

   last_form.show();
   last_form.insert({after:new_form});

   // Increment the management form count
   total_forms_element.value = parseInt(total_forms_element.value) + 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-19T10:01:00.127

您可以使用[auto_id 参数](http://docs.djangoproject.com/en/dev/ref/forms/api/#configuring-html-label-tags)来生成具有唯一 ID 的表单，而不是生成表单集工厂：

```
def get_form(request, form_type):
    current_forms_no = int(request.GET["current_forms_no"])
    form_class = all_forms[form_type]
    form = form_class(auto_id='id_%%s_%s' % current_forms_no)
    return HttpResponse(form.as_p()) 
```

# asp.net - 如何在代码隐藏中获取 aspx 中的 DataKeyNames？

> ID：645605
> 
> 赞同：2
> 
> 时间：2009-03-14T07:55:15.147
> 
> 标签：asp.net, vb.net, gridview

我需要在我的 ASP.NET 应用程序 (VB.NET) 的代码隐藏中获取 DataKeyNames。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T08:04:37.480

这种方式（VB.NET代码）：

```
 For Each dkn As String in GridView1.DataKeyNames
     ' -- Do something here with dkn
 Next 
```

`DataKeyNames`是一个字符串数组，因此 GridView 中可以有多个字符串。您可以通过这种方式访问​​数组成员（示例）：

```
Dim FirstKeyName as String = GridView1.DataKeyNames(0) 
```

这是该[属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)[的 MSDN 上的文档`DataKeyNames`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T08:11:14.470

```
Dim s As String = GridView1.DataKeyNames(0) 
```

# php - 使用 phppas 河豚加密（由 wordpress 使用）

> ID：645609
> 
> 赞同：0
> 
> 时间：2009-03-14T08:00:36.103
> 
> 标签：php, wordpress

[这里](http://www.openwall.com/phpass/)是网站。谁熟悉这门课，我的问题是

我将使用在该页面上找到的类来散列成员的密码。代码声明看起来像这样

```
require_once("password.hash.php");
$blowfish = new PasswordHash(8, FALSE);
$blowfish->HashPassword($_POST['password']); 
```

我注意到，当在文本字段中输入密码时，比如说我输入密码*sarmenhb*，创建的哈希值与使用 md5 执行的哈希值不同。我注意到每次输入*sarmenhb*时密码都会不断变化。

我将如何检查用户输入的密码是否与数据库中的密码匹配？

我试过这个

```
$blowfish->checkpassword($_POST['password'],"password in db"); 
```

但什么都没有显示屏幕是空白的。

我在测试中这样做，这就是为什么这些字段没有被转义。我只是想看看它是否有效，但我没有得到任何结果。有替代品吗？？

ps：我不是为wordpress做这个，它只是在我自己的mvc上本地。

**更新：**

我试过这个

```
include("classes/hash.class.php"); 

$sec = new PasswordHash(8, FALSE);
$correct = "sarmenhb";
//pass generated from $sec->HashPassword($correct);
$hash = "\$P$\BeJb51gIUh8Qmb1DAW.Hkt1I4gnm2C1";
$check = $sec->CheckPassword($correct, $hash);

if($check) { print "correct"; }
else { print "incorrect"; } 
```

当我运行它时，输出一直显示不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-15T19:39:23.617

在散列变量中，您有斜杠来转义 $ 但是当散列检查 $P$ 是否为字符串的前 3 个字符时，这些斜杠将成为实际字符串的一部分。如果将其更改为单引号，并删除斜杠，它将起作用

`$hash = '$P$BeJb51gIUh8Qmb1DAW.Hkt1I4gnm2C1';`

我很困惑，虽然你说在做 $blowfish->checkpassword($_POST['password'],"password in db"); 时什么都没有出现，当然什么都不会显示它，它返回 true 或 false 但它除非结合更多代码，否则不会打印任何内容。确保存储在数据库中的密码不会以某种形式转义或更改。尝试打印您使用的变量？

散列密码不会保持不变，因为每次使用时都会对其进行加盐，这没关系，因为散列包含盐，以后可以找到它进行比较。盐只是随机字符/数字/符号，为散列增加更多变化，使其难以破解。

# asp.net - 浏览器关闭后保持我的网络应用程序运行

> ID：645610
> 
> 赞同：1
> 
> 时间：2009-03-14T08:01:04.900
> 
> 标签：asp.net, browser, keep-alive

我有一个 aspx Web 应用程序，可以更新或添加数据库中的文件。客户端通过浏览器访问，其中一项要求是他们可以启动更新并能够在更新继续时关闭浏览器。在我关闭浏览器后它似乎运行了一段时间，但随后它停止了。如何让应用程序为 asp.net 运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T08:05:04.687

[这是您可以通过WF (Workflow Foundation)](http://msdn.microsoft.com/en-us/netframework/aa663328.aspx)很好地解决的问题。为应该在关闭浏览器后仍然存在的任务创建工作流。工作流有自己的线程和独立于 ASP.NET 的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T08:06:34.840

Web 应用程序将继续在应用程序池中运行，但最终会被回收。只要用户会话运行，应用程序就应该保持活动状态，因此通过增加会话超时，您可以解决问题。

更好的方法是将长期运行的任务转移到服务中，但这可能需要重写您的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T08:08:13.433

通常对于长时间运行或异步处理，您希望将请求分派给后端服务来处理。试图让 Web 应用程序保持活动状态以完成处理可能会导致问题，尤其是 HTTP 和会话超时。

一种常见的模式是将请求放在消息队列中，并让后端服务在可能的情况下处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T08:05:30.320

我将创建一个单独的 Windows 服务，您可以将作业从您的 Web 应用程序推送到该服务上，然后在用户再次登录时检查作业的状态。

Windows 服务不会绑定到 asp.net 应用程序域，因此无论您的 Web 应用程序中发生什么，它都会继续运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T08:37:09.960

我遇到了这种模式，您必须将工作与 HTTP 请求分离。我们解决它的方法是将要完成的计算抽象为要安排的事件。因此，假设浏览器中的用户采取了需要在后端进行长期（相对）计算的操作，该计算被赋予类似“doXYZForUser”的名称并给定一个参数向量，如（userId，params ...）和发送到工作队列。在未来的某个时间，用户再次登录并可以看到他们的工作状态。

我正在运行 Java 堆栈和 Java 消息服务 (JMS)，但原理是相同的。来自浏览器的请求将一个事件排入队列，并且浏览器得到一个 ACK​​ 回复，表明该事件在工作队列中。队列由一个完全独立运行的进程管理，我相信在 .NET 中它被称为消息队列。作业出现在队列中得到处理，结果可以放在一个单独的表中，其中包含对启动作业的用户的引用，因此下次他们登录时可以返回作业状态/结果。

# .net - App.config 和 F# Interactive 不工作

> ID：645622
> 
> 赞同：18
> 
> 时间：2009-03-14T08:12:17.883
> 
> 标签：.net, f#

当我正在完善我的小宠物项目时，我试图将所有常量字符串存储在我的 app.config 文件（键、XpathExpressions 等）中。当我运行编译后的 exe 时，效果很好。在交互式外壳中，情况并非如此。

我试图将 .config 文件从我的 bin/Release 目录复制到 obj/Debug & obj/Release 目录，但调用`ConfigurationManager.AppSettings.Item("key")`始终返回 null。

任何建议如何解决这个问题？

最诚挚的问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-09-18T18:09:47.163

F# Interactive**可以**处理依赖文件的可执行`app.config`文件。

这样做的方法是`.fs`在您的项目中有一个文件，该文件根据定义加载您的`.config`条件`COMPILED`：

```
let GetMyConfig() =
  let config  = 
    #if COMPILED 
      ConfigurationManager.GetSection("MyConfig") :?> MyConfig
    #else                        
      let path = __SOURCE_DIRECTORY__ + "/app.config"
      let fileMap = ConfigurationFileMap(path) 
      let config = ConfigurationManager.OpenMappedMachineConfiguration(fileMap) 
      config.GetSection("MyConfig") :?> MyConfig
    #endif 
```

然后在您的脚本文件中引用可执行文件和文件`#load`，`.fs`以便：

`#I "../Build/Path`

`#r "ConfiguredApp.exe"`

`#load "MyConfig.fs"`

执行这三行时，您将在 FSI 窗口中看到类似于以下内容的消息：

`[Loading C:\Svn\trunk\Source\ConfiguredApp\MyConfig.fs]`

`Binding session to 'C:\Svn\Qar\trunk\Build\Path\ConfiguredApp.exe'...`

请注意，您实际上是`app.config`在 FSI 中引用 when （而不是生成的`.exe.config`.）

祝你好运...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-14T20:04:34.763

虽然 FSI 为您的输入动态生成代码，但使用 fsi.exe.config 可以正常工作。

我创建了这个文件：

```
<configuration>
    <appSettings>
        <add key="test" value="bar"/>
    </appSettings>
</configuration> 
```

并将其保存为“fsi.exe.config”（程序文件\fsharp-version\bin）。

然后开始 FSI：

```
> #r "System.configuration";;
--> Referenced 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.configuration.dll'

> System.Configuration.ConfigurationManager.AppSettings.["test"];;
val it : string = "bar" 
```

它也适用于 Visual Studio。（但请注意，您需要将会话重置为拾取更改。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T08:51:49.363

问题在于，FSI 是一个在幕后运行的不同 exe，并且通过动态编译和生成二进制文件做了一些疯狂的技巧。检查以查看[FSI 认为正在运行的程序集](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)。你可能会对你的发现感到惊讶:)

它会抛出一个错误：

> System.NotSupportedException：动态程序集中不支持调用的成员。在 System.Reflection.Emit.AssemblyBuilder.get_Location()

您需要研究如何将 app.config 设置放入动态程序集中。这可能会很痛苦，而且可能不值得。如果它作为编译的二进制文件工作，我会测试那些依赖于 FSI 之外的配置设置的东西。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T10:36:33.450

[也许您可以使用 ConfigurationManager 上的OpenMappedExeConfiguration 方法](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.openmappedexeconfiguration.aspx)手动将 FSI 指向 app.config 文件。

您也可以尝试将程序集加载到单独的 AppDomain 中 - 您可以将任何文件作为配置文件提供给您使用[AppDomainSetup](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.aspx)类自己创建的 AppDomain。

事实仍然是 FSI 不太适合这种情况......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-07T08:29:46.270

我认为我从上面两个投票最多的答案中提供了两全其美的答案（尤其是对于编写 fsx 脚本的人）：

鉴于此 app.config 文件：

```
<configuration>
    <appSettings>
        <add key="foo" value="bar"/>
    </appSettings>
</configuration> 
```

这样读`foo`：

```
let appConfigPath = System.IO.Path.Combine(Directory.GetCurrentDirectory(), "app.config")
let fileMap = ExeConfigurationFileMap()
fileMap.ExeConfigFilename <- appConfigPath
let config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None)
let foo = config.AppSettings.Settings.["foo"].Value
Console.WriteLine(foo) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-09-01T15:01:54.887

设置 APP_CONFIG_FILE “如果足够早”就可以完成这项工作。它似乎无法在 .fsx 文件中尽早完成。所以它需要重置，根据这篇文章： [Change default app.config at runtime](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime/6151688#6151688)

在 F# 中，它看起来像这样：

```
open System
open System.Configuration
open System.IO
open System.Reflection

let appConfigPath = System.IO.Path.Combine(Directory.GetCurrentDirectory(), "App.config")
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", appConfigPath)
typeof<ConfigurationManager>
    .GetField("s_initState", BindingFlags.NonPublic ||| BindingFlags.Static).SetValue(null, 0)
typeof<ConfigurationManager>
    .GetField("s_configSystem", BindingFlags.NonPublic ||| BindingFlags.Static).SetValue(null, null)
(typeof<ConfigurationManager>.Assembly.GetTypes()
    |> Array.find (fun x -> x.FullName = "System.Configuration.ClientConfigPaths"))
    .GetField("s_current", BindingFlags.NonPublic ||| BindingFlags.Static).SetValue(null, null);; 
```

# iphone - 在任何地方实现点击以取消的最佳方法（应用商店下载按钮）？

> ID：645623
> 
> 赞同：2
> 
> 时间：2009-03-14T08:13:45.697
> 
> 标签：iphone, objective-c

我有一个 UI 元素。当我点击它时，它会变为中间状态。在屏幕上的其他任何地方点击应该取消交互，而在 UI 元素上的另一次点击应该继续。

我已经使用保护视图（窗口的子视图和高于所有其他子视图）实现了这一点，然后在动画之前将元素重新设置为保护视图，但我很好奇人们可以想到哪些其他方式来做到这一点，即可能更干净。

我曾想过使用防护窗而不是视图，并弄乱`hitTest:withEvent:`and `pointInside:forEvent:`。这两个的问题是元素的superview没有占据整个屏幕。

这听起来像是一个完美的用例`exclusiveTouch`（任何地方的所有触摸事件都进入该视图），但实际上并非如此（*在该视图中开始的*所有触摸事件都只进入该视图，而不是同时进入其他视图）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T08:29:54.363

完成后，您可以创建另一个`UIWindow`，调用`-makeKeyAndVisible`然后销毁窗口。`UIAlertView`正是这样做来控制整个屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-07T04:10:48.113

我已经编写[了一些](http://github.com/lemnar/downloadable-content-store/tree/master/client)相当干净地实现这种行为的代码。您不需要将元素重新设置为保护视图。您只需要[一个`UIControl`可以将触摸传递给元素的子类](http://github.com/lemnar/downloadable-content-store/blob/master/client/DCSKit/DCSTouchCaptureView.m)。您也不需要破坏防护窗；你可以隐藏它。你`UIApplicationDelegate`可以监听不是主窗口的 s`UIWindowDidBecomeHiddenNotification`发送的`UIWindow`s，然后调用主窗口的`-makeKeyAndVisible`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-30T17:34:55.673

我想出的一个更简单的解决方案是在您正在创建的商店按钮中创建另一个 UIButton，然后将其插入`self`到`keyWindow`应用程序的下方。然后使用该按钮`UIEventTouchDown`取消选择存储按钮并删除自身。奇迹般有效。

# javascript - jQuery click() 奇怪的行为

> ID：645625
> 
> 赞同：0
> 
> 时间：2009-03-14T08:15:34.677
> 
> 标签：javascript, jquery

我想做一个简单的照片库功能。但是，JQuery 的 click() 有一些奇怪的行为。

用户单击前进按钮后，应显示 10 个下一个图像。用户单击后退按钮后，应显示 10 个以前的图像。

在以下代码中，注释了在我的代码中运行良好的 4 行。我希望 JQuery click() 应该与注释行做同样的事情，但事实并非如此。在我向后和向前单击几次后，使用 JQuery click() 的代码不起作用。我想问一下代码的问题在哪里。谢谢你。

```
<script type="text/javascript">
$(document).ready(function() { 

var numImages = imagesObj.images.image.length;
var imagePath = "images/";
var currentIndex = 0;

function changeImageList(startIndex){

    var imageIndex = 0;
    $("#imagesList img").css("display","none");
    for (var i=startIndex; i<numImages && i<startIndex + 10; i++)
    {
        var imageId = "image" + imageIndex;
        var image = imagesObj.images.image[i];

        $("#" + imageId).attr("src",imagePath + image.imageurl).css("display","");

        imageIndex++;
    }

    currentIndex = startIndex;
    if (numImages > currentIndex+10){
        $('#forward').css("cursor","pointer");
        //document.getElementById("forward").onclick = function(){changeImageList(currentIndex+10);};
        $('#forward').click(function(){  changeImageList(currentIndex+10);});
    }else{
        $('#forward').css("cursor","default");
        //document.getElementById("forward").onclick = function(){};
        $('#forward').click(function(){});
    }

    if (currentIndex < 10){
        $('#backward').css("cursor","default");
        //document.getElementById("backward").onclick = function(){};
        $('#backward').click(function(){});
    }else{
        $('#backward').css("cursor","pointer");
        //document.getElementById("backward").onclick = function(){changeImageList(currentIndex-10);};
        $('#backward').click(function(){changeImageList(currentIndex-10);});

    }
}

    changeImageList(0);

}); 

</script>

</head>
<body>
<table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td align="center"><img id="backward" src="images/lft_arrow.gif" alt="" width="39" height="44" /></td>
        <td id="imagesList" align="center">
        <img id="image0" width="77" style="display:none; cursor:pointer" />
        <img id="image1" width="77" style="display:none; cursor:pointer" />
        <img id="image2" width="77" style="display:none; cursor:pointer" />
        <img id="image3" width="77" style="display:none; cursor:pointer" />
        <img id="image4" width="77" style="display:none; cursor:pointer" />
        <img id="image5" width="77" style="display:none; cursor:pointer" />
        <img id="image6" width="77" style="display:none; cursor:pointer" />
        <img id="image7" width="77" style="display:none; cursor:pointer" />
        <img id="image8" width="77" style="display:none; cursor:pointer" />
        <img id="image9" width="77" style="display:none; cursor:pointer" />
        </td>
        <td align="center"><img id="forward" src="images/rgt_arrow.gif" alt="" width="39" height="44" /></td>
      </tr>
    </table>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T08:38:27.430

这是事件绑定的正常行为：当您调用 时`click`，事件回调被**添加**到元素中，**并且不会替换**现有的回调。当您多次单击后退和前进按钮时，您为`click`事件分配了多个处理程序，现在您知道这很糟糕:)

您的问题有两种解决方案：

1.  在您分配新事件之前使用例如`$('#backward').unbind('click')`，这是您代码的简单修复。
2.  仅将一个事件分配给具有相对索引的按钮，例如`$('#backward').click(function(){ changeImageList(-10);});`. 我发现它会在开始`changeImageList`计算时进行简单的检查`startIndex`，但您仍然必须将光标设置为默认/指针。

# sql - SQL Server Compact Edition 中的子查询

> ID：645631
> 
> 赞同：7
> 
> 时间：2009-03-14T08:26:17.100
> 
> 标签：sql, sql-server-ce

我试图在 SQL Server CE 数据库中执行此操作，但数据库引擎不断报告错误。

```
SELECT  C.guid, C.name, C.updated, 
        C.hddsize, C.hddavailable, C.hddfree, 
        C.ramsize, C.profiles, C.cpu, 
        (SELECT COUNT(D.id) AS numprogs 
            FROM ComputerData AS D 
            WHERE D.computer_id = C.id) AS numprograms 
FROM Computers AS C; 
```

有人告诉我 SQL Server CE 支持子查询。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-15T16:08:05.590

SQL CE 的限制是它不支持返回标量值的子查询。返回集合的子查询被解析得很好。

Grayson 的答案中连接中的子查询返回一个集合，因此它应该可以工作。有时在连接条件中无法避免标量子查询。通过使用“IN”而不是“=”，可以欺骗解析器。

请参阅我对[这个问题](https://stackoverflow.com/questions/470009/how-can-i-make-this-query-in-sql-server-compact-edition/648038#648038)的回答。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-14T08:45:35.073

我在查询方面的唯一经验是使用 MySQL，但希望它足够相似。

您的查询对我来说看起来很奇怪，因为您的子查询在 SELECT 子句中。我以前从未见过……但显然它在 MySQL 中受支持。通常子查询出现在 FROM 或 LEFT JOIN 或 JOIN 之后。

您的示例很简单，您可以使用 LEFT JOIN 来实现它：

```
SELECT C.guid, ..., COUNT(distinct D.id) as numprogs
FROM Computers AS C
LEFT JOIN ComputerData as D ON D.computer_id = C.id 
```

在这种情况下，LEFT JOIN 是要使用的正确连接类型，因为即使 D 表中没有特定 C 记录的匹配记录，您的结果集仍将包含该 C 记录，并且 numprogs 将为零，因为您会期望。

如果你真的想使用子查询，试试这个：

```
SELECT C.guid, ..., S.numprogs
FROM Computers AS C
LEFT JOIN
(SELECT computer_id, COUNT(*) as numprogs
 FROM ComputerData GROUP BY computer_id) AS S
ON C.id=S.computer_id 
```

我建议简化您的查询，使其成为应该工作但不起作用的最简单的查询。然后告诉我们您的数据库引擎返回的具体错误消息。

编辑：我在[MySQL 章节中查看了关于子查询](http://dev.mysql.com/doc/refman/5.1/en/scalar-subqueries.html)的内容，您似乎应该尝试在子查询之后删除“as numprograms”子句……也许您对子查询中出现的列的命名没有任何选择在您已经编写了子查询之后。

# c# - ListView 的动态事件处理程序？

> ID：645633
> 
> 赞同：0
> 
> 时间：2009-03-14T08:27:42.480
> 
> 标签：c#, .net, asp.net, .net-3.5

今天我遇到了另一个问题，第二次来这里寻求帮助，这一定是我的特殊运气。我真的需要这方面的帮助。

我有一个 listView 控件，上面有一个按钮控件。我正在尝试向此按钮添加事件处理程序，在来到这里之前我搜索了很多，但我发现的示例要么对我不起作用，要么对于我作为初学者的理解来说太复杂了。

我需要向按钮添加事件处理程序，因此当按下按钮时，将在服务器端执行某些功能（事件处理程序）。

这是我最上面的aspx代码

 `````
EnableEventValidation="false" 
````  `然后是 ListView 本身：

 ``List of all the books that are currently in the Library.

```
 <table width="630" cellpadding="2" cellspacing="5"/>
    <tr style="background-color:#DBE2E2;">
        <th>Image</th>
        <th>Book</th>
        <th>Description</th>

    </tr>
       <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
    </table>

    <p>
    <asp:DataPager ID="pageTopics" runat="server" PageSize="5">
        <Fields>
            <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="true" ShowNextPageButton="false" />
            <asp:NumericPagerField />
            <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="false" ShowNextPageButton="true" ShowLastPageButton="false" />
        </Fields>
    </asp:DataPager>
    </p>
</LayoutTemplate>
<ItemTemplate>
     <tr>
    <td valign="top"> <br />
        <asp:Image ID="book_img" ImageUrl='<%# Eval("book_img") %>' Height="100" Width="100" runat="server" />
    </td>

    <td valign="top"><p><b>Book Name: </b><asp:Label ID="book_name" runat="server" Text='<%# Eval("book_name") %>' /><br />
        <b>Author: </b><asp:Label ID="book_author" runat="server" Text='<%# Eval("book_author") %>' /><br />
    <p></td> 

    <td valign="top"><p><asp:Label ID="book_short_desc" runat="server" Text='<%# Eval("book_short_desc") %>' /><br />
        <b>Sku id: </b><asp:Label ID="book_squ" runat="server" Text='<%# Eval("book_squ") %>' /><br />
        <b>Arrived On: </b><asp:Label ID="book_arrived" runat="server" Text='<%# Eval("book_arrived") %>' />
        <asp:HyperLink ID="bookDesc" runat="server" NavigateUrl='<%# "BookDesc.aspx?id=" + Eval("book_id") %>' Text="To read more..." />
        <asp:Button ID="orderbook" runat="server" CommandName="order" CommandArgument="ordernow" Text="order now" />
    </p></td>

    </tr>
</ItemTemplate> 
````  `在 CodeBehind 中，我尝试执行以下代码：

 `````
override protected void OnInit(EventArgs e)
{
        base.OnInit(e);
        book_list.ItemCommand += new EventHandler<ListViewCommandEventArgs>(book_list_ItemCommand);
}

void book_list_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    testLabel.Text = e.CommandArgument.ToString();
    //throw new NotImplementedException();
} 
````  `但是，当我调试 book_list_ItemCommand 时不会执行。

我真的需要这方面的帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T09:11:35.497

在把我的头撞到墙上之后，我真的找到了一条路。我会把它贴在这里，所以也许有类似问题的人会为自己找到解决方案。

那是我位于 ListView 中的按钮

```
<asp:Button ID="orderbook" runat="server" CommandName="order" CommandArgument="ordernow" OnCommand="Order_Command" Text="order now" /> 
```

在我添加的代码后面

```
protected void Order_Command(object sender, CommandEventArgs e)
    {
        if (e.CommandName == "order")
        {
            testLabel.Text = e.CommandName.ToString();
        }
    } 
```

现在，当我单击按钮时，它会捕获事件。

# asp.net - 数据库架构更改时如何获取编译时错误？

> ID：645637
> 
> 赞同：2
> 
> 时间：2009-03-14T08:31:51.877
> 
> 标签：asp.net, sql, data-binding

当 ASP.NET 项目中发生数据库架构更改时，您使用什么方法来获取编译时错误？

例如，如果您有一个绑定到 DataSource 的 GridView，我只能在模式更改发生时得到运行时错误，而不是编译时错误。Intellisense 在使用数据集、LINQ 等背后的代码上运行良好，但是当我更改架构时，我似乎无法在 ASP.NET 页面上获得编译时错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T08:44:04.140

创建一个单元测试来验证数据访问层的正确性，并确保它涵盖了所有与数据库相关的代码。并非所有内容都可以在编译时捕获...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T08:43:29.290

我能想到的轻松实现此行为的一种方法是将数据绑定到动态 DAL。有一些工具可以帮助生成这个 DAL，我建议看看[SubSonic](http://subsonicproject.com/)。

一旦你有了像 SubSonic 这样的东西，你就可以绑定到生成的业务对象。如果数据库中的模式发生更改，这些业务对象将自动更改，这将破坏您的绑定代码，从而导致编译时错误。

**更新**

Assaf 建议使用单元测试也是一个好主意。它不能解决您所说的问题，但它绝对是应该到位的，并且是标记此类问题的好工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T13:47:01.613

我们使用一个适度的系统（xml 到 c++）从一个独立的描述中创建模式，这个系统还为我们在代码中使用的表和列创建名称，当模式发生变化时，名称会发生​​变化，因为我们的名称最初使用的不再存在，编译器将标记错误。

您可能可以配置很多 DAO 生成工具来做类似的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T15:20:41.997

一种解决方案是对数据库进行版本化并将应用程序构建映射到特定版本（可能在属性文件中）。在您的应用程序的入口点，您可以将预期版本与实际版本进行比较，并相应地处理错误。

我不确定 ASP.net 中的 Migrations in Rails 或 Java 中的 dbdeploy 用于对数据库进行版本控制的等效项是什么。但是任何使模式更改增量和版本化并在版本表中跟踪版本的数据库版本控制工具都适合该目的。

但是，如果您希望在构建应用程序时出现编译时错误，您不妨将架构升级到最新版本作为构建过程的一部分，从而避免首先发生架构更改的可能性。

# open-source - 开源项目中缺乏问题跟踪设施是否可能是不参与/贡献的诱因？

> ID：645639
> 
> 赞同：2
> 
> 时间：2009-03-14T08:33:56.850
> 
> 标签：open-source, bug-tracking, issue-tracking

在决定您是否参与一个相当大的开源项目以便为其代码库做出贡献时，该项目的问题跟踪设施（即跟踪错误和功能请求）对于您做出贡献的决定有多重要？

仍然有许多非平凡的（巨大的代码库）开源项目，它们没有正式进行问题跟踪——虽然一些贡献者可能确实仍然以各种“待办事项”列表的形式私下做这件事，但我个人有发现缺乏可用性和确定使用问题跟踪是缺乏组织、结构和整体项目协调的一个相当可靠的指标。

其他人在想什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T09:17:17.713

我会说这将是一个相当重要的因素。

开放式问题跟踪系统是我所说的“开放式开发流程”的一个组成部分——任何对此感兴趣的人都可以看到开发人员正在做出的决定，并为讨论做出贡献。

有些项目并没有真正的开放问题跟踪系统（或一个好的），但仍然有公开可见的讨论列表，也许是一个总是有人在的 IRC 频道，也许是一个论坛/公告板等。在我看来，这样项目在贡献方面仍然相当有吸引力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T09:49:56.667

我个人发现，虽然我与很多不同的开源项目一起工作，但我从来没有真正成为一个更大的团队的一部分。但是，我确实发现了错误并想报告它们，并想知道之前是否发现了该问题，以及何时以及是否要修复它。

就我个人而言，一个开放的错误跟踪器或邮件列表，我可以在其中发送一封一次性电子邮件以通知人们错误，这比注册邮件列表或注册错误跟踪器要好。我到处都有足够的帐户，我不需要另一个用于该软件的帐户。

因此，报告错误所涉及的摩擦绝对是一个问题，而且能够查看错误的状态并使其可搜索对于确定我是否将我的问题报告给项目有很大帮助。

所以，是的，开放问题跟踪、易于使用、易于查看（浏览一个页面 20 分钟不是我的乐趣），最重要的是，只需很少的摩擦即可获得所需功能/错误的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T09:48:23.910

我参与的许多项目仍然在邮件列表中完成所有工作。如果出现错误（并得到确认，并且可以修复），则将其放入存储库中的某种 BUGS 文件中。随着事情得到解决，文件中的条目会被记录下来。

不是我的偏好，而是其他贡献者习惯和喜欢的。可能是有人不想麻烦托管错误系统、处理它可能吸引的垃圾邮件等。难道该项目没有收到很多错误或功能请求？

“你应该”的真正问题真的围绕着代码，不是吗？或者通过与任何特定的团队合作，您可以学到/教多少？如果您开始做出贡献并表现出友好和有用的态度，那么在提出 trac 或 bugzilla 之类的建议时，您可能不会遇到任何阻力。

唯一能让我考虑避开任何给定项目的是完全缺乏任何类型的版本控制。但是，即使那样，我也必须权衡我将放弃的东西与管理带有活泼合并的补丁的麻烦。

# javascript - document.viewport.getHeight() 不准确？

> ID：645642
> 
> 赞同：2
> 
> 时间：2009-03-14T08:37:15.140
> 
> 标签：javascript, prototypejs

关于 Scriptaculous 的 Effect.Move 演示，可以在[这里](http://wiki.github.com/madrobby/scriptaculous/effect-move)找到：

```
<style type="text/css">
  a#move_demo { background:#fa0000; color:#fff; padding:5px; border:1px solid #000; }
</style>

<div class="demo">
  <a href="#" id="move_demo" onclick="new Effect.Move(this, { x: 60, y: -30 }); return
false;">Click me for a demo!</a>
</div> 
```

对于包含它的单个页面，document.viewport.getHeight() 返回 32，而对于宽度，这很好。

为什么会这样？不应该是视口的高度，而不是文档顶部到底部的高度吗？

有解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T10:08:08.603

事实证明，您需要一个正确的 DOCTYPE 才能使其正常工作，否则 Prototype 将处于“怪癖模式”，这不会让 getheight() 按预期工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
```

# c# - 如何在 NHibernate 中映射两个具有外键关系的表？

> ID：645645
> 
> 赞同：1
> 
> 时间：2009-03-14T08:43:14.377
> 
> 标签：c#, .net, database, nhibernate, nhibernate-mapping

有两个表，**Contact**和**Phone__number**。**Phone_number 包含一个列 contact_id，它是Contact**表中 id 的外键。如何在 Nhibernate 中映射这两个表，以便在我的联系人类中获得电话号码列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T09:11:48.973

领域类：

```
public class Contact
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<Phone> Phones { get; set; }
}

public class Phone
{
    public virtual int Id { get; set; }
    public virtual string Number { get; set; }
} 
```

以及它们对应的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    namespace="MyNamespace" assembly="MyAssembly"
    default-lazy="true">
  <class name="Phone" table="Phone__number">
    <id name="Id" column="pho_id" unsaved-value="0">
      <generator class="native" />
    </id>
    <property name="Number" column="pho_number" />
  </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    namespace="MyNamespace" assembly="MyAssembly"
    default-lazy="true">
  <class name="Contact" table="Contact">
    <id name="Id" column="cnt_id" unsaved-value="0">
      <generator class="native" />
    </id>
    <property name="Name" column="cnt_name" />
    <bag name="Phones">
      <key column="contact_id" />
      <one-to-many class="Phone" />
    </bag>
  </class>
</hibernate-mapping> 
```

或者，如果您更喜欢表达映射的[流畅方式：](http://fluentnhibernate.org/)

```
using System;
using System.Collections.Generic;
using System.Data;
using System.IO;
using FluentNHibernate.Cfg;
using FluentNHibernate.Cfg.Db;
using FluentNHibernate.Mapping;
using NHibernate;

class Program
{
    static void Main(string[] args)
    {
        if (File.Exists("data.db3"))
        {
            File.Delete("data.db3");
        }

        using (var factory = CreateSessionFactory())
        {
            // Create schema and insert sample data
            using (var connection = factory.ConnectionProvider.GetConnection())
            {
                ExecuteQuery("create table contacts(cnt_id int, cnt_name string)", connection);
                ExecuteQuery("create table phones(pho_id int, pho_number string, contact_id int)", connection);
                ExecuteQuery("insert into contacts (cnt_id, cnt_name) values (1, 'Contact 1')", connection);
                ExecuteQuery("insert into phones (pho_id, pho_number, contact_id) values (1, '12345A', 1)", connection);
                ExecuteQuery("insert into phones (pho_id, pho_number, contact_id) values (2, '12345B', 1)", connection);
                ExecuteQuery("insert into phones (pho_id, pho_number, contact_id) values (3, '12345C', 1)", connection);
                ExecuteQuery("insert into phones (pho_id, pho_number, contact_id) values (4, '12345D', 1)", connection);
            }

            using (var session = factory.OpenSession())
            using (var tx = session.BeginTransaction())
            {
                var contact = session.Get<Contact>(1);
                foreach (var phone in contact.Phones)
                {
                    Console.WriteLine(phone.Number);
                }
                tx.Commit();
            }
        }
    }

    private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
            .Database(
                SQLiteConfiguration.Standard.UsingFile("data.db3").ShowSql()
            )
            .Mappings(
                m => m.FluentMappings.AddFromAssemblyOf<Program>()
            )
            .BuildSessionFactory();
    }  

    static void ExecuteQuery(string sql, IDbConnection connection)
    {
        using (var command = connection.CreateCommand())
        {
            command.CommandText = sql;
            command.ExecuteNonQuery();
        }
    }
}

public class Phone
{
    public virtual int Id { get; set; }
    public virtual string Number { get; set; }
}

public class Contact
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<Phone> Phones { get; set; }
}

public class PhoneMap : ClassMap<Phone>
{
    public PhoneMap()
    {
        WithTable("phones");
        Id(x => x.Id, "pho_id");
        Map(x => x.Number, "pho_number");
    }
}

public class ContactMap : ClassMap<Contact>
{
    public ContactMap()
    {
        WithTable("contacts");
        Id(x => x.Id, "cnt_id");
        Map(x => x.Name, "cnt_name");
        HasMany<Phone>(x => x.Phones)
            .WithForeignKeyConstraintName("contact_id")
            .AsBag();
    }
} 
```

# xslt - XSLT：合并重复场景

> ID：645652
> 
> 赞同：6
> 
> 时间：2009-03-14T08:49:17.453
> 
> 标签：xslt, tags, grouping

我有一个这样的 XML

```
<ContractInfo  ContractNo="12345">
                <Details LastName="Goodchild">                        
                        <Filedata  FileName="File1"/>
                </Details>
</ContractInfo>

<ContractInfo  ContractNo="12345">
                <Details LastName="Goodchild">                        
                        <Filedata  FileName="File2"/>
                </Details>
</ContractInfo>

<ContractInfo  ContractNo="123456">
                <Details LastName="Goodchild">                        
                        <Filedata  FileName="File2"/>
                </Details>
</ContractInfo> 
```

我希望我的输出 XML 是这样的

```
<ContractInfo  ContractNo="12345">
                <Details LastName="Goodchild">                        
                        <Filedata  FileName="File1"/>
                        <Filedata  FileName="File2"/>
                </Details>
</ContractInfo>

<ContractInfo  ContractNo="123456">
                <Details LastName="Goodchild">                        
                        <Filedata  FileName="File2"/>
                </Details>
</ContractInfo> 
```

在这里，与匹配“contractNo”有关的“FileData”需要在输出中组合。可以使用 XSLT 实现这种转换吗？

提前致谢。

斯里尼

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T10:02:19.540

以下 XSLT 1.0 转换产生正确的结果：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes" />

  <xsl:key name="contract" match="ContractInfo" use="@ContractNo" />
  <xsl:key name="filedata" match="Filedata" use="../../@ContractNo" />

  <xsl:template match="ContractInfo">
    <xsl:if test="generate-id() = 
                  generate-id(key('contract', @ContractNo)[1])">
      <xsl:copy>
        <xsl:apply-templates select="key('contract', @ContractNo)/Details | @*" />
      </xsl:copy>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Details">
    <xsl:if test="generate-id(..) = 
                  generate-id(key('contract', ../@ContractNo)[1])">
      <xsl:copy>
        <xsl:apply-templates select="key('filedata', ../@ContractNo) | @*" />
      </xsl:copy>
    </xsl:if>
  </xsl:template>

  <!-- copy everything else (root node, Filedata nodes and @attributes) -->
  <xsl:template match="* | @*">
    <xsl:copy>
      <xsl:apply-templates select="* | @*" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

请注意`<xsl:key>`，结合使用`generate-id()`来标识匹配节点集的第一个节点，从而有效地将相等的节点分组在一起。

您可以通过`<xsl:sort>`在`<xsl:apply-templates>`. 为了清楚起见，我没有包括在内。

我的测试输出是：

```
<root>
  <ContractInfo ContractNo="12345">
    <Details LastName="Goodchild">
      <Filedata FileName="File1"></Filedata>
      <Filedata FileName="File2"></Filedata>
    </Details>
  </ContractInfo>
  <ContractInfo ContractNo="123456">
    <Details LastName="Goodchild">
      <Filedata FileName="File2"></Filedata>
    </Details>
  </ContractInfo>
</root> 
```

# apache - 你如何 htdigest 400 个用户帐户？

> ID：645659
> 
> 赞同：9
> 
> 时间：2009-03-14T08:57:57.667
> 
> 标签：apache, htdigest

您如何为 400 个用户生成用户帐户来进行负载测试？

Htdigest 每次都强制你输入密码，我尝试过类似的 dos 管道

```
echo password > htdigest -c realm username%1 

htdigest -c realm username%1 < password.txt 
```

但它不工作......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-14T09:55:41.537

您还可以查看 trac 在其网站上分发的 python 脚本以获取 htdigest 密码，然后您可以将其自动化：

[在没有 Apache 的情况下生成 htdigest 密码](http://trac.edgewall.org/wiki/TracStandalone#GeneratingPasswordsWithoutApache)

他们还建议按照以下方式进行一些工作：

> 可以使用 md5sum 实用程序使用以下方法生成摘要密码文件：

```
$ printf "${user}:trac:${password}" | md5sum - >>user.htdigest 
```

> 并从末尾手动删除“ -”并将“$ {user}：trac：”添加到'to-file'的行首。

* * *

我已经在 FreeBSD 上对此进行了测试，不确定这是否适用于 Linux 或 Windows，因此您可能需要对其进行一些修改：

```
(echo -n "user:realm:" && echo -n "user:realm:testing" | md5) > outfile 
```

输出文件包含：

```
user:realm:84af20dd88a2456d3bf6431fe8a59d16 
```

与 htdigest 相同：

```
htdigest -c outfile2 realm user 
```

在 outfile2 中输出

```
user:realm:84af20dd88a2456d3bf6431fe8a59d16 
```

它们都是相同的，从而证明了命令行实现的正确性！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-14T09:53:14.520

（旁白：在 unix/linux 上，第一个应该是：

```
echo password | htdigest -c realm username$1 
```

)

由于 htdigest 没有任何很好的方法来传递密码，我会用它[`expect`](http://expect.nist.gov/)来自动化这个过程。

[来自 http://www.seanodonnell.com/code/?id=21 的示例](http://www.seanodonnell.com/code/?id=21)：

```
#!/usr/bin/expect
#########################################
#$ file: htpasswd.sh
#$ desc: Automated htpasswd shell script
#########################################
#$
#$ usage example:
#$
#$ ./htpasswd.sh passwdpath username userpass
#$
######################################

set htpasswdpath [lindex $argv 0]
set username [lindex $argv 1]
set userpass [lindex $argv 2]

# spawn the htpasswd command process
spawn htpasswd $htpasswdpath $username

# Automate the 'New password' Procedure
expect "New password:"
send "$userpass\r"

expect "Re-type new password:"
send "$userpass\r" 
```

如果需要，用户可以将其转换为 Windows 作为练习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-05T18:23:59.927

这是一个脚本，它将读取用户名列表，为每个用户生成一个随机密码，并将它们输出到一个 htdigest 文件和一个纯文本文件。它已经在 Linux 上进行了测试，但可能需要针对其他系统进行修改。特别是，`md5sum`可能是`md5`，并且`head`总是接受`-c`标志。

```
#!/bin/bash

# auth realm for digest auth
AUTH_REALM=MyRealm

# file locations

# a file containing a list of user names,
# one name per line, e.g.,
# $ cat users.txt
# joe
# curly
# larry
USER_FILE=users.txt

# htdigest file, needs to exist
HTDIGEST_FILE=passwd.htdigest

# insecure password file
PASSWD_FILE=passwd.txt

# read the names from the user file
while read username
  do
  # generate a pseudo-random password
  rand_pw=`< /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c8`

  # hash the username, realm, and password
  htdigest_hash=`printf $username:$AUTH_REALM:$rand_pw | md5sum -`

  # build an htdigest appropriate line, and tack it onto the file
  echo "$username:$AUTH_REALM:${htdigest_hash:0:32}" >> $HTDIGEST_FILE

  # put the username and password in plain text
  # clearly, this is terribly insecure, but good for
  # testing and importing
  echo "$username:$rand_pw" >> $PASSWD_FILE
done < $USER_FILE 
```

这是输入和结果的样子，首先是用户名文件：

```
$ cat users.txt 
joe
curly
larry 
```

运行脚本：

```
$ ./load_users.bash 
```

生成的 htdigest 文件：

```
$ cat passwd.htdigest
joe:MyRealm:2603a6c581f336f2874dbdd253aee780
curly:MyRealm:fd3f9d87bba654439d5ba1f32c0286a8
larry:MyRealm:c1c3c0dc50a9b97e9f7ee582e3fce892 
```

和纯文本文件：

```
$ cat passwd.txt 
joe:aLnqnrv0
curly:3xWxHKmv
larry:7v7m6mXY 
```

# printing - 如何在两行中打印 JTable 标题？

> ID：645665
> 
> 赞同：1
> 
> 时间：2009-03-14T09:09:01.493
> 
> 标签：printing

程序是打印一个 JTabel，使用的函数是

```
JTabel jt=new JTable();
MessageFormat headerFormat= new MessageFormat("My World Tomorrow");
MessageFormat footerFormat = new  MessageFormat("Page {0}");

jt.Print(JTabel.Format,headerFormat,footerFormat); 
```

查询是：如何在两行中打印标题

```
My World 
Tomorrow 
```

累了以下解决方案：

```
new MessageFormat("My world \n Tomorrow");
new MessageFormat("My world \r\n Tomorrow");
new MessageFormat("My world" System.getProperty("line.separator")+"Tomorrow" 
```

);

没有任何效果。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2011-09-12T08:41:22.027

尝试这个。

```
PrinterJob job = PrinterJob.getPrinterJob();
MessageFormat[] header = new MessageFormat[3];
header[0] = new MessageFormat("");
header[1] = new MessageFormat("line 1");
header[2] = new MessageFormat("line 2");

MessageFormat[] footer = new MessageFormat[2];
footer[0] = new MessageFormat("footer 1");
footer[1] = new MessageFormat("footer 2");
job.setPrintable(new MyTablePrintable(tblmunim, PrintMode.FIT_WIDTH, header, footer));

if (job.printDialog())
  try {
    System.out.println("Calling PrintJob.print()");
    job.print();
    System.out.println("End PrintJob.print()");
  }
  catch (PrinterException pe) {
    System.out.println("Error printing: " + pe);
  } 
```

最初发布在这里[http://sandeepsharma11.blogspot.com/2010/12/java-how-to-print-table-with-multi-line.html](http://sandeepsharma11.blogspot.com/2010/12/java-how-to-print-table-with-multi-line.html)

# iphone - 有针对 iPhone 开发者的专业课程（认证计划）吗？

> ID：645667
> 
> 赞同：5
> 
> 时间：2009-03-14T09:09:55.297
> 
> 标签：iphone

有针对 iPhone 开发者的专业课程（认证计划）吗？像 Microsoft .NET 开发人员的 MCAD 和 PHP 开发人员的 Zend。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T14:06:34.407

我个人并不太重视认证计划——当然不会过于真实的经验。

如果你只是想要培训，Big Nerd Ranch 有几个 iPhone 课程。仅在欧洲和美国。时间表在[http://www.bignerdranch.com/schedule.shtml](http://www.bignerdranch.com/schedule.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T09:35:47.497

我不知道有任何针对 iPhone 开发者的认证计划。但是有一些免费的在线资源，比如[斯坦福大学](http://www.stanford.edu/)提供的这门课程：

[CS 193P - iPhone 应用程序编程](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)

有 20 个讲座可以下载为 PDF 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-15T19:29:30.177

我不知道任何认证课程，但除了参加培训的地点列表之外，Apple 的全球开发者大会是一次很棒的学习体验。除了几条技术指导之外，他们还设有实验室，您可以在其中与 Apple 工程师进行一对一的互动。我发现整个事情非常值得。

[http://developer.apple.com/WWDC/](http://developer.apple.com/WWDC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T12:51:17.513

我在 3 月份参加了培训课程，并获得了我的 iPhone 开发者认证。这是相当坚实的。该链接是 - [http://www.theunbounded.com/iPhone/iPhone-Developer-Training.asp](http://www.theunbounded.com/iPhone/iPhone-Developer-Training.asp)

希望这可以帮助。

-杰伊

# silverlight - 在 Silverlight 2 中将图像绑定到图像

> ID：645677
> 
> 赞同：2
> 
> 时间：2009-03-14T09:27:53.943
> 
> 标签：silverlight, image, binding

我正在构建一个 Silverlight 2 应用程序，我需要将一些图像绑定到 XAML 中声明的 Image 对象。我正在应用程序中进行一些其他绑定，它工作得很好，我只有图像有问题！

这是它的 XAML：

```
<Image Source="{Binding Path=ThumbNail}" Style="{StaticResource ThumbNailPreview}" /> 
```

这是 C# 代码隐藏：

```
ThumbNail = (string)story.Element("thumbnail").Attribute("src") 
```

我只是从 XAML 文件中解析 URL。当我尝试对所有 ThumbNail 属性执行 foreach 循环时，它会按预期返回 URL。正如我所说，所有其他绑定都很好，所以它必须是 Image 控件和 ThumbNail 属性之间的问题。我还尝试将数据类型从字符串转换为 Uri，但什么也没发生。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T09:52:52.243

我认为这已经在 StackOverflow 中被询问和回答[了](https://stackoverflow.com/questions/20586/wpf-image-urisource-and-data-binding)

关键是 ImageSource 属性不是字符串而是 System.Windows.Media.Imaging.BitmapImage 类型，所以需要转换。

高温高压

# c# - 文件输入选择

> ID：645678
> 
> 赞同：-2
> 
> 时间：2009-03-14T09:32:29.907
> 
> 标签：c#, file, input

我想在不使用数据连接的情况下读取 microsoft word 文件，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T13:34:19.883

“.doc”不是一种简单的基于文本的文件格式。您必须使用互操作进行操作。

包括 COM 库“Microsoft Word 12.0 对象库”。创建一个 ApplicationClass 并使用属性 Documents 打开您的文档。

```
 object wordPath = null;
        object missing = System.Reflection.Missing.Value;

        wordPath = @"C:\sample.doc";

        // Create Interop object
        ApplicationClass word = new ApplicationClass();
        word.Visible = false;

        // Open document
        Document doc = word.Documents.Open(ref wordPath,
            ref missing, 
            ref missing, 
            ref missing, 
            ref missing, 
            ref missing, 
            ref missing, 
            ref missing, 
            ref missing,
            ref missing,
            ref missing,
            ref missing,
            ref missing,
            ref missing,
            ref missing,
            ref missing);

        // Set document as active for interaction
        doc.Activate();

        // Select the whole content of the word document
        word.Selection.WholeStory();

        // Get the text from the document
        string text = word.Selection.Text; 
```

[Scott C. Reynolds](http://scottcreynolds.com/archive/2007/05/03/c-and-word-interop---a-few-tips.aspx)的博客上有一个很好的介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T09:50:50.020

如果“doc”是指“Word 2003 文档”，那么它不是一个以纯文本文件开头的文件——它是一种二进制文件格式。我不确定它是否记录在任何地方，尽管像 Open Office 这样的项目显然已经对其进行了逆向工程。

如果“doc”是指其他意思，请澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T10:20:14.287

Word 文档使用 .doc 扩展名，并且可以选择以基于 XML 的格式保存。如果您可以选择这样做，则可以使用 XML 解析库来获取内容。整个模式非常复杂，但您可以通过简单的方式从中提取一些有用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:53:30.153

```
object wordPath = null;
    object missing = System.Reflection.Missing.Value;

wordPath = @"C:\sample.doc";

// Create Interop object
ApplicationClass word = new ApplicationClass();
word.Visible = false;

// Open document
Document doc = word.Documents.Open(ref wordPath,
                                   ref missing, 
                                   ref missing, 
                                   ref missing, 
                                   ref missing, 
                                   ref missing, 
                                   ref missing, 
                                   ref missing, 
                                   ref missing,
                                   ref missing,
                                   ref missing,
                                   ref missing,
                                   ref missing,
                                   ref missing,
                                   ref missing,
                                   ref missing);

// Set document as active for interaction
doc.Activate();

// Select the whole content of the word document
word.Selection.WholeStory();

// Get the text from the document
string text = word.Selection.Text; 
```

# php - 匹配单词然后匹配潜在的括号字符串，然后匹配潜在的方括号字符串

> ID：645683
> 
> 赞同：2
> 
> 时间：2009-03-14T09:40:04.320
> 
> 标签：php, regex

我有一个脚本，我需要从文本字符串中取出三个部分，并将它们返回到一个数组中。经过几次尝试和失败后，我无法让它工作。

文本字符串可能如下所示：

```
某个地方
某个地方（通常是括号中的文字）
某个地方（通常是括号中的文字）[有时甚至是括号中的文字]
```

我需要将这些字符串分成三个：

```
{Some place} ({often text in parentheses}) [{even text i括号有时}]
```

哪个应该返回：

```
1：某个地方
2：经常在括号中输入文字
3：有时甚至括号中的文字
```

我知道这应该是一件容易的事，但我无法解决正确的正则表达式。这将在 PHP 中使用。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T09:47:50.183

尝试这样的事情：

```
$result = preg_match('/
  ^ ([^(]+?)
  (\s* \( ([^)]++) \))?
  (\s* \[ ([^\]]++) \])?
  \s*
  $/x', $mystring, $matches);

print_r($matches); 
```

请注意，在此示例中，您可能对 $matches[1]、$matches[3] 和 $matches[5] 最感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T09:45:17.583

将问题拆分为三个正则表达式。在第一个之后，您在第一个括号之前获得每个字符，保存您的位置 - 与您刚刚提取的字符串的长度相同。

然后在第二步中，做同样的事情，但把所有东西都抓到右括号。（嵌套括号使这有点复杂，但不是太多。）再次，保存指向第二个字符串末尾的指针。

获得第三个字符串是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T09:46:28.360

我可能会用三个正则表达式来做，从括号和方括号开始，如果失败则回退到更少的项目。

```
^(.*?)\s+\((.*?)\)\s+\[(.*?)\]\s+$ 
```

如果失败，请尝试：

```
^(.*?)\s+\((.*?)\)\s+$ 
```

如果这也失败尝试：

```
^\s+(.*?)\s+$ 
```

我确信它们可以组合成一个正则表达式，但我不会尝试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T09:48:04.067

像这样的东西？

```
([^(]++)(?: \(([^)]++)\))?(?: \[([^\]]++)\])? 
```

# wcf - Silverlight 的 NetDataContractSerializer 等效项？

> ID：645695
> 
> 赞同：0
> 
> 时间：2009-03-14T09:52:48.860
> 
> 标签：wcf, silverlight, web-services, serialization

有没有人开发或知道我可以找到 NetDataContractSerializer 的 Silverlight 实现的地方？

此[WCF 和 Silverlight 比较](http://msdn.microsoft.com/en-us/library/cc896571(VS.95).aspx)表明 Silverlight 不附带 NetDataContractSerializer 的实现。

我希望避免自己开发一个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-16T02:39:37.600

我可能错了，但我认为 CSLA 的 Silverlight 版本包含某种形式的二进制[序列化](http://www.lhotka.net/weblog/SilverlightSerializer.aspx)程序。我认为它与 NetDataContractSerializer 不兼容，因此您需要在服务器和客户端上都使用它（CSLA 也有 Windows 风格）。[您可以在http://www.lhotka.net/cslalight/](http://www.lhotka.net/cslalight/)免费获得完整的框架（带有源代码）

# .net - 表单加载时间长，如何隐藏加载和显示进度？

> ID：645698
> 
> 赞同：0
> 
> 时间：2009-03-14T09:53:49.340
> 
> 标签：.net, winforms

我正在使用一个组件非常繁重的表单，需要很长时间才能设置。设置的一部分是第三方控件的行为，我无法收集进度。(DevExpress XtraScheduler)。这会冻结应用程序。

我需要设置表单上的哪些属性以便在后台加载表单以及我应该对哪些事件进行内容处理？

编辑：

我知道 BackgroundWorker，但是如果我在 BW 上推送表单的创建，我怎么知道该过程何时完成？我的意思是，我是否可以让表单自行准备（记住我无法控制组件在做什么）并通知 BW 它已完成准备？那会是什么活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T10:11:37.503

如果您的应用程序的初始加载需要时间，您可以考虑[添加启动画面](https://stackoverflow.com/questions/392864/c-splash-screen-problem)。如果它是辅助形式，那么[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类是一个出色的组件，它允许您在后台线程上执行耗时的任务，而不会冻结您的主 GUI 线程。[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)、[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)和[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件特别有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T15:58:02.157

VB.NET 启动画面非常适合这一点。如果您使用 C# 工作，您可以导入 Microsoft.VisualBasic 以获得相同的效果。您的主窗体在后台加载，启动画面在前台平稳运行。

# jsp - 如何为 JSP 页面启用 debug_mode

> ID：645702
> 
> 赞同：1
> 
> 时间：2009-03-14T09:57:04.857
> 
> 标签：jsp, oc4j

当您在编写 JSP 页面并在 Oracle OC4J 或 Application Server 下运行时遇到严重的编译错误时，您最终会在屏幕上显示以下内容：

> 500 内部服务器错误 OracleJSP：发生错误。请咨询您的应用程序/系统管理员以获得支持。程序员应考虑将 init-param debug_mode 设置为“true”以查看完整的异常消息。

我已经看到了关于如何/在哪里设置 debug_mode init-param 的不同建议。有什么选择？

另外，这是 Oracle 特有的，还是 JSP 标准特性？对于其他应用程序服务器，该技术有何不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-08T15:45:38.577

## 到目前为止的解决方案...

选项 1：将 debug_mode 参数添加到 OC4J global-web-application.xml

*   该设置将应用于 OC4J 容器中的所有应用程序
*   有关详细信息，请参阅@Mork0075 的回复（请注意，OC4J 容器名称和应用程序名称特定于为 Oracle 的 Secure Enterprise Search 启用调试的示例）

选项 2：添加到应用程序的 web.xml

*   显然，允许更局部的变化
*   还有其他可能有用的设置（developer_mode、encode_to_java、emit_debuginfo）

例如：

```
<servlet>
<servlet-name>jsp</servlet-name>
<servlet-class>oracle.jsp.runtimev2.JspServlet</servlet-class>
<init-param>
    <param-name>debug_mode</param-name>
    <param-value>true</param-value>
</init-param>
<init-param>
    <param-name>developer_mode</param-name>
    <param-value>true</param-value>
</init-param>
<init-param>
    <param-name>encode_to_java</param-name>
    <param-value>true</param-value>
</init-param>
<init-param>
    <param-name>emit_debuginfo</param-name>
    <param-value>true</param-value>
</init-param>
</servlet> 
```

由于这些选项是为类 oracle.jsp.runtimev2.JspServlet 设置的，因此它显然是特定于 Oracle OC4J/Application Server 安装的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T10:05:59.420

请转到 $ORACLE_HOME/oc4j/j2ee/OC4J_SEARCH/config/global-web-application.xml

以这种方式扩展 servlet 节点：

```
<servlet>
<servlet-name>jsp</servlet-name>
<servlet-class>oracle.jsp.runtimev2.JspServlet</servlet-class>
<init-param>
<param-name>debug_mode</param-name>
<param-value>true</param-value>
</init-param> 
```

重新启动 OC4J 就可以了。也看看 $ORACLE_HOME/oc4j/j2ee/OC4J_SEARCH/application-deployments/ses_query/application.log

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T15:45:38.397

假设您使用的是 Eclipse，如果您不想经历为 jsps 配置调试的痛苦，MyEclipse 插件提供了非常好的开箱即用的 JSP 调试功能。

# excel - 使用 VB 将固定宽度的文本导入 Excel 2003

> ID：645703
> 
> 赞同：0
> 
> 时间：2009-03-14T09:58:15.353
> 
> 标签：excel, vba, text, width, fixed

我有一个固定宽度的文本文件，我想将每行中的某些空格自动导入 Excel 2003 工作表的特定单元格。你能帮助我吗？

我将重新表述我的问题，因为前一个问题不是很清楚。我需要阅读特定字符（即 12-17、23-29）并将它们放在 Excel 表中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T18:08:47.090

是的，这是可能的。检查导入向导中的“固定长度”选项，并告诉 Excel 每个字段有多少个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T13:38:38.047

Excel 将在读取文本时解析出所有空格和前导零。如果可以，请将您的文本文件格式化为带有分隔值的 CSV，并将您的值格式化为公式，如下所示：

```
=" Value 1",="0000",="     more spaces     ",="    " 
```

这将保留这些值。

# sql - 获取最新答案 SQL 查询的问题

> ID：645712
> 
> 赞同：0
> 
> 时间：2009-03-14T10:07:21.680
> 
> 标签：sql, sql-server, sql-server-2005

我有一个模型：

问题 - ID - CreatedOn

答案 - ID - CreatedOn - QuestionID

不，我想用最新答案获得第一个问题。

我正在使用 SQL Server 2005。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T10:14:05.580

```
Select top 1 *
from questions, answers
where question.id = answers.questionid
order by answers.createdon desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T13:35:48.817

我会尝试这样的事情

```
SELECT Id, CreatedOn    
FROM Question Q    
WHERE Q.id IN    
(SELECT DISTINCT TOP 5 A.QuestionID FROM Answer A ORDER BY A.CreatedOn) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T10:13:17.063

像这样的东西：

从问题中选择前 1 个问题在 Questions.Id=Answers.QuestionID ORDER BY Answers.CreatedOn DESC 上加入答案；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T10:14:00.040

```
select top 1 Question from questions
  inner join answers on questions.Id = answers.QuestionId
order by answers.CreatedOn desc 
```

很抱歉回复评论的延迟，我没​​有时间更早地测试它：

这变得更加复杂，但这样的事情应该可以工作：

```
select top 5 Question from questions
  inner join answers on questions.Id = answers.QuestionId
GROUP BY Question
ORDER BY max(answers.CreatedOn) desc 
```

这似乎是一种[标准模式](http://weblogs.sqlteam.com/jeffs/archive/2007/12/13/select-distinct-order-by-error.aspx)，可以有效地从表中获取一组不同的数据，而不包括记录集中的按列排序。

请注意，您要选择的元素数量（在本例中为 5）在 SQL 中必须是一个常量。如果您有使用 LINQ to SQL 之类的优势，您可以在 LINQ 中编写它并将取款金额作为变量。

因此，作为对最新评论的回应，您只需将 max(answers.CreatedOn) 添加到 select 语句中：

```
select top 5 Question, max(answers.CreatedOn)
from questions
  inner join answers on questions.Id = answers.QuestionId
GROUP BY Question
ORDER BY max(answers.CreatedOn) desc 
```

# visual-studio - 测试视图在视觉工作室中不断消失

> ID：645726
> 
> 赞同：0
> 
> 时间：2009-03-14T10:19:34.163
> 
> 标签：visual-studio

我的笔记本电脑和台式机（工作和家庭）上都有 Visual Studio 2008 TS。
出于某种原因，我笔记本电脑上的那个一直从我的窗口布局中删除测试视图窗口。
我可以通过 Test=>windows=>test 视图把它放回去，但是一旦我的测试运行结束，窗口就会再次出现。很讨厌，因为我不能那样看到测试结果。

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-15T22:56:13.407

尝试对您的视图进行“重置”（即所有打开的窗口、位置和位置），然后重新排列它们。当我的“待更改”窗口不断重复和/或消失时，它对我有用。

# c# - .NET 中的模块是什么？

> ID：645728
> 
> 赞同：56
> 
> 时间：2009-03-14T10:20:23.397
> 
> 标签：c#, .net, module

模块到底是什么？模块、类和函数之间有什么区别？如何访问 C# 中的模块？

我问这个是因为我想在运行时计算仅某些特定函数的 IL 代码的校验和（不使用代码签名）。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-03-14T10:29:16.277

模块是程序集中代码的逻辑集合。您可以在一个程序集中拥有多个模块，并且每个模块都可以用不同的 .NET 语言编写（据我所知，VS 不支持创建多模块程序集）。

程序集包含模块。模块包含类。类包含函数。

是的，您可以在运行时通过反射访问程序集、模块、类、函数、属性、字段等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-14T16:59:50.933

作为其他答案的补充：

MSDN 声明：“模块是没有程序集清单的 Microsoft 中间语言 (MSIL) 文件。”。

通过使用程序集链接器 (al.exe) 实用程序生成程序集清单，可以将模块“链接”在一起。如果我没记错的话，CLR 可以为程序集加载单个模块，以便只加载必要的模块。

编辑：找到对 Netmodules 的[更好描述](https://docs.microsoft.com/en-us/archive/blogs/junfeng/netmodule-vs-assembly)以及您想要它们的原因。

SO上有另一个[问题](https://stackoverflow.com/questions/610758/calculating-the-checksum-of-the-code-at-runtime)涉及校验和主题。答案提到使用 GetILAsByteArray 方法获取 IL。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-07-15T14:06:40.663

## 一份文件

这就是一个模块。

```
module: A single file containing content that can be executed by the VES 
```

`VES`（读取 .NET 程序集并将其转换为机器代码的程序在哪里。）请参阅[http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf) Partition I 第 16 页。

--

程序集是文件系统（模块）中文件的一致集合。请参阅[http://msdn.microsoft.com/en-us/library/zst29sk2(vs.71).aspx](http://msdn.microsoft.com/en-us/library/zst29sk2(vs.71).aspx)

显然，类定义是在文件（模块）itelf 中定义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-21T15:18:22.793

还有一个与程序集和编译无关的VB“模块”语句，类似于C#静态类：

[https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/statements/module-statement](https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/statements/module-statement)

> Module 语句定义了在其命名空间中可用的引用类型。模块（有时称为标准模块）类似于类，但有一些重要区别。每个模块只有一个实例，不需要创建或分配给变量。模块不支持继承或实现接口。请注意，模块不是类或结构意义上的类型——您不能将编程元素声明为具有模块的数据类型。
> 
> 您只能在命名空间级别使用模块。这意味着模块的声明上下文必须是源文件或命名空间，并且不能是类、结构、模块、接口、过程或块。您不能将模块嵌套在另一个模块或任何类型中。有关详细信息，请参阅声明上下文和默认访问级别。
> 
> 模块与您的程序具有相同的生命周期。因为它的成员都是共享的，所以它们的生命周期也与程序的生命周期相同。
> 
> 模块默认为好友访问。您可以使用访问修饰符调整其访问级别。有关详细信息，请参阅 Visual Basic 中的访问级别。
> 
> 一个模块的所有成员都是隐式共享的。

简而言之，VB 中的模块类似于 C# 静态类

# database - 小型数据仓库的免费数据库

> ID：645729
> 
> 赞同：1
> 
> 时间：2009-03-14T10:23:43.230
> 
> 标签：database, open-source, data-warehouse

对于相对较小的数据仓库系统，您会使用哪个免费数据库？

是否有任何“特殊”数据库，例如免费提供的多维数据库？

哪个免费的关系数据库最适合这项工作？

我所说的数据仓库系统是指一个将接收一些插入、很少更新、几乎没有删除和大量复杂选择的系统。以星型模式结构化（如果数据库是关系型的）。

小的意思是主事实表中大约有 100.000 条记录，可能是 10 个维度，最大的包含 5.000 条记录。

免费我的意思是免费的内部商业用途。

编辑：由于到目前为止我大多只得到一个免费数据库列表，让我指定一些有趣/需要的功能：

*   外连接（必须）
*   inlineviews / subselects（几乎必须）
*   物化视图（不错）
*   智能查询优化器（越智能越好）
*   支持维度、汇总、多维数据集查询（不错）
*   解析函数（oracle中的名字，不知道在其他数据库中是如何命名的）（不错）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:10:41.687

我们使用[Firebird](http://www.firebirdsql.org/)取得了非常好的结果。它是免费的、开源的，可在所有主要平台上运行，并支持所有重要的数据库功能。有很多优秀的工具可以用来管理数据库，比如 IB-Expert，它有一个免费（有限但足够好）版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T13:07:26.250

*   [SQLite](http://www.sqlite.org/)
*   [数据库](http://hsqldb.org/)
*   [MySQL](http://www.mysql.com/)
*   [PostgreSQL](http://www.postgresql.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T10:29:29.600

如果数据总量 < 4 GB，您可以使用 Oracle XE。

编辑：Jens Schauder 提出了新的“要求”。我相信 ProgeSQL、MySQL 和 SQLite 不支持分析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T14:36:40.433

SQL Server Express 呢？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-16T04:07:31.163

如果数据仓库的目的不是以某种方式改善公司的财务状况，那么您应该省力并忘记浪费时间。

如果数据仓库真的要以某种方式为公司赚钱，那么在真正的系统上花几块钱可能不是不合理的。

# asp.net - 使网站/项目可移植 - 检查清单

> ID：645732
> 
> 赞同：1
> 
> 时间：2009-03-14T10:27:22.117
> 
> 标签：asp.net, vb.net, ajax, portability, custom-server-controls

晚上好/早上/之后/中午。

我有一个 ASP.net 3.5 网站，我在 VWD 2008 Express 中使用 vb.net，我也在使用 MS SQL Server 2008 Express，我使用了 ajax 选项卡和由[http://www.4guysfromrolla 开发的文本框字符计数器控件。 com/](http://www.4guysfromrolla.com/)数据库与 MS SQL Server Management Studio Express 相连，文件存储在 SQL 默认的“Data”文件夹中。

整个项目的代码和表格都存放在我E盘的一个文件夹中。我需要将整个项目交给另一个必须完成的同事，请按步骤描述我如何使我的网站可移植（就像我可以把它全部放在一个文件夹中，他可以在他的闪存盘中随身携带）。

还有一件事，我已经完成了我的项目，我需要将它发送给另一个程序员。

谁能提出类似的建议：清单或必须做的清单来实现这一目标？

PS：我在尝试将项目从一台服务器移动到另一台服务器时遇到问题，该项目似乎在寻找 AJAX 控件的 dll 和我最初解压缩它们所在的文件夹的文本框计数器，我认为在我的桌面上，虽然当我将这些控件添加到工具选项卡时，我创建了一个新选项卡，然后我从解压缩控件源代码的地方选择 dll，这还不够吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T10:51:48.047

我对所有解决方案都使用以下文件夹结构

*   **解决方案**

    *   **文档**

    *   **库**

    *   **脚本**

    *   **sql**

    *   **源代码**

**docs** - 包含所有文档

**libs** - 包含解决方案使用的所有非 GAC 框架 dll。您应该先将 dll 复制到此处，然后以这种方式引用它们，它们是 src 文件夹中的重生引用。

**scripts** - 为没有安装 VS 的设计师和构建服务器构建脚本

**sql** - 用于创建数据库的所有 sql 脚本

**src** - 我们将这个文件夹分解为以下文件/文件夹结构的解决方案的所有源

*   解决方案.sln
*   项目1
*   项目2
*   网站1
*   网站2

ETC

现在，当您复制解决方案文件夹时，所有内容都是相对的，因此可以正常工作。

我建议您将项目添加到源代码管理中，我建议您使用[Subversion/SVN](http://www.collab.net/downloads/subversion/)和[TortoiseSVN](http://tortoisesvn.net/downloads)客户端

# svn - 巨大的 svn 结帐使 apache (dav_svn) 消耗了服务器上的所有内存 - 有什么提示吗？

> ID：645733
> 
> 赞同：4
> 
> 时间：2009-03-14T10:27:36.560
> 
> 标签：svn, apache, ssl, performance

服务器上的 apache2/dav_svn/ssl/subversion 中是否有任何设置可以使整体在大型结账时表现更好（或至少不消耗所有内存）？

我对如何降低内存消耗的建议特别感兴趣。

这个问题的原因：

上周我们的 svn 服务器出现问题 - 它停止响应所有请求，并且管理员通知我们所有内存已被 apache 占用。我们在 apache 上使用 mod_dav 通过 ssl 访问我们的 subversion 存储库。

内存不足的原因是我的一位同事进行了约 2.5GB 的大检查，其中可能包含一些大小超过 500MB 的文件。我听说他尝试了多次，所以可能有几个进程挂在服务器上。

服务器管理员说你不应该在 subversion 中存储这么大的文件，但我不同意——如果它们对项目至关重要，我总是希望它们在存储库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-17T12:37:59.073

这是 SVN/Apache/SSL 的一个众所周知的问题

有一些解决方法，但目前似乎没有 100% 修复。阅读[此问题](http://subversion.tigris.org/issues/show_bug.cgi?id=3084)以获取更多信息。

一些建议的解决方法：

*   使用 VisualSVN Server 1.6.3（win32、非 SSL 和 SSL）
*   不要使用 SSL
*   使用 SSLSessionCache shm:key 指令
*   使用匹配的 svnclient 和服务器
*   [..]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T10:52:02.197

在许多情况下，“表现得更好”和“消耗更少的内存”是不相容的。

当使用更多内存（例如缓存）时，通常会获得性能。因此，虽然我了解您的问题是关于如何保持低内存消耗，但请注意 SVN 会因此变慢。

服务器管理员在 SVN 中保留巨大的（它们是二进制文件吗？）文件是正确的。SVN 主要用于源代码 - 小型文本文件。如果您需要在某个地方维护相关数据、输入、测试数据、资源、第 3 方依赖项等的版本。我建议您在某个共享位置创建一个二进制存储库并使用目录结构 + 可能是符号链接来反映版本控制存在于您的 svn 存储库中。

使您的 SVN 尽可能精简（但不是精简！）有真正的优势。SVN 的结帐速度非常慢，这是众所周知的，因为它的设计（与分支相比，这是一个非常繁重的操作，例如，它非常便宜）。更快的结账和责备等，转化为更快的开发周期。所以我发现在一些备份的网络共享上“手动”维护一个非代码存储库而不是将*所有内容*保存在 svn 中是值得的。

还要记住，你不能真正把你想要的*一切都*放在 svn 中。你不会把平台 sdk 放在那里，对吧？因此，使用外部存储库可以让您在其中放置*更多*内容，从而为您提供更完整的解决方案。

在不相关的说明中：最便宜的解决方案可能只是添加更多 RAM。我实际上已经尝试过基于“RAM-disk”的 SVN 存储库解决方案，它们的速度非常快。

# mysql - 用户无法远程连接 MySQL

> ID：645735
> 
> 赞同：2
> 
> 时间：2009-03-14T10:28:10.943
> 
> 标签：mysql, networking, connection, connectivity

**问题**

(Windows XP) LAN 上其他 IP 的用户突然无法连接到我的本地 MySQL 服务器。

**背景**

我已经在我的本地 Windows 计算机上设置了 MySQL，以便网络上的其他计算机可以访问 root 帐户。我已将每个 IP 添加为 root 的主机。直到几周前，一切都完美无缺，我可以通过编程方式连接到服务器并使用各种 MySQL 管理工具。然而，现在 MySQL 服务器只是拒绝来自这些 IP 的连接，我不知道为什么。

我所做的网络更改是：更改两（三）台计算机的网卡并摆弄 MySQL 设置。这些都不应该导致这个问题。我尝试添加一个包含所有相关主机的新用户，但我得到了相同类型的错误：

> MySQL 错误号 1045 用户 'root'@'shop' 的访问被拒绝（使用密码：是）

奇怪的是，使用计算机名称“shop”而不是 IP。我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T11:19:05.063

不知何故，现在似乎解析了 IP，并使用了主机名。您是否授予对 root@shop 的访问权限？你刷新权限了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T10:33:17.263

首先想到的是 Windows 防火墙，如果您在主机上交换 NIC，它可能会重新启用。

我的下一个建议是在主机上使用像[Wireshark](http://www.wireshark.org/)这样的嗅探器，看看数据包到底发生了什么。您可以使用过滤器来减少输出 - 它们非常简单易用。这个工具为我节省了无数小时的调试时间。

-编辑-

另一个可能的原因可能是您的服务器以某种方式决定将 IP 解析为主机名，在这种情况下，IP 地址可能不再起作用 - 需要将主机名添加到允许列表中。不确定它是否适用于 MySQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T10:30:07.583

你能在 MySQL 中关闭 TCP 连接吗？

另外，您的防火墙中是否打开了 MySQL 端口？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T11:29:31.373

如果您更改了 IP（DHCP？），如果您将 mysqld 绑定到您的局域网 IP，请确保在 my.cnf 中更正它：

```
[mysqld]
...
bind-address=192.168.x.y 
```

# java - 如何在开发基于 Java EE 的 Web 应用程序时提高生产力

> ID：645746
> 
> 赞同：26
> 
> 时间：2009-03-14T10:39:28.903
> 
> 标签：java, performance, jakarta-ee, web-applications

我想知道您如何解决与其他技术堆栈（[Seaside](http://www.seaside.st/)、[Ruby on Rails](http://rubyonrails.org/)等）相比，基于 Java EE 的 Web 应用程序开发的生产力似乎较低的问题。

约束是：

*   完成的 Web 应用程序必须可部署在符合 Java EE 的应用程序容器上
*   如果可能，应保留以前对基于 Java 的解决方案的投资，即与基于 Java 的系统和库的本机互操作性应该是可能的
*   由于团队结构，Java 作为实现语言是首选，尽管基于 JVM 的语言（即 Groovy）也可以接受。
*   生成的系统需要在架构上是合理的
*   生成的系统需要可扩展和可维护

为了不让这变成哲学讨论，我只对基于实践经验的建议感兴趣。可能的示例包括特定领域的语言、框架和 MDSD。

如果您指向一个抽象类的解决方案（如 MDA / MDSD），请提供有关您如何实现它的详细信息以及有关常见陷阱和最佳实践的信息。

如果您不同意基于 Java EE 的 Web 应用程序开发意味着生产力低下的假设，我也想听听您的推理。

*编辑：* 由于答案比我预期的要少得多，我也会接受失败尝试的说法，基本上将问题扩展到“在开发基于 Java EE 的 Web 应用程序时如何（不）提高生产力？”。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-03-21T15:58:02.617

我相信~~Java EE~~ Java 堆栈实际上非常好。有几个原因可以解释 Java EE 的低生产率：

*   作为“企业堆栈”，它经常被用来创建[无聊、丑陋、“足够好”</a> 的应用程序，而且一般来说，](https://blog.codinghorror.com/the-great-enterprise-software-swindle/)[企业往往不会吸引](http://www.paulgraham.com/artistsship.html)热爱编程、思考和关心他们所做工作的优秀开发人员. 企业界的软件质量不是很好。
*   作为赚钱的企业堆栈，软件供应商试图向他们出售一些东西。他们创造了巨大、复杂和昂贵的解决方案，并不是因为它们很好，而仅仅是因为它们可以将它们出售给企业。
*   企业通常非常规避风险，他们所做的一切都更好地“标准化”。标准是*在*某些技术被证明成功之后或*之前*创建的。在这两种情况下，这对企业（和 Java）都是不利的。企业最终要么太晚使用好的技术，要么使用彻底失败的技术。后一种情况也非常危险，因为它会产生一种错误的看法，即如果技术标准化并且每个人都在使用它，它就必须是好的（否则完全失败）。
*   从历史上看，Java EE 平台似乎吸引了很多架构师和大公司的开发人员，他们晋升为架构师，其唯一目的是创建更多层、更多框架、更多抽象和更复杂。

并不是没有好的 Java 工具和框架；是有太多不好的，太多过度设计的，太多的官僚程序和方法，太多无用的标准。

在如此混乱的世界中，影响生产力的不仅仅是您选择的特定工具。这主要是关于你，关于你的价值观，关于你如何拒绝社区、供应商、同事和经理向你提出的大多数解决方案。这是关于你逆流而上，关于*你的*常识，关于*你*质疑每一个主流信仰和“最佳实践”。

也就是说，仅靠工具不会对您的生产力产生太大影响，相反，合适的人也可以使用劣质工具提高生产力。

我的建议：

*   不要仅仅因为它是标准的、每个人都使用它或者因为它是 Sun 官方推荐的技术而使用它。仅当您个人认为它是您工作的最佳工具时才使用该技术。这样，您可能会发现自己在拒绝 JSF、JSP、Web 服务、JMS、EJB、JTA、OSGi、MDA 等技术。
*   保持简单，用你的常识，质疑一切。您真的需要发布您的对象以进行远程访问吗？您是否真的需要创建另一个抽象层以便可以从 Hibernate 切换到 TopLink？您真的需要在每次需要时将数据与 XML 转换十次吗？你真的需要 XML 模式吗？你真的需要所有可配置的东西都可以互换吗？在运行时？由非开发人员？
*   保持过程简单。敏捷。[_](http://agilemanifesto.org/) 你真的需要那个文件吗？你真的需要在一个巨大的表格中描述每个屏幕，获得批准，将它输入到一些自制的工具中，然后生成 JSP 吗？您是否有称职的程序员，或者您先设计所有内容而程序员只“翻译”成 Java？
*   HTML 的所见即所得设计不起作用。
*   图形编程通常不起作用。这包括[作为蓝图](http://martinfowler.com/bliki/UmlAsBlueprint.html)的[UML和作为编程语言](http://martinfowler.com/bliki/UmlAsProgrammingLanguage.html)的UML 、MDA、绘制页面流程图。代码生成很糟糕。
*   永远不要[在使用之前设计一个框架](http://martinfowler.com/bliki/FoundationFramework.html)，总是[收获一个框架](http://martinfowler.com/bliki/HarvestedFramework.html)。
*   更喜欢只有很少 XML 配置的框架。
*   争取低 LOC 计数。查看代码中的实际*字符*。每个角色都很重要吗？思考。你能做些什么来让你的代码更小？你需要那个课吗？它有什么作用？为什么你需要这样做？
*   测试不是神牛；您不需要 100% 的测试覆盖率。只测试有意义的。如果很难测试，那就让它更简单；或者根本不测试它。不要测试视觉外观。

最后，一些具体的 Java 建议：

*   对于表示层，请尝试[Tapestry](http://tapestry.apache.org/)。为什么我喜欢它？因为使用 Tapestry，您可以创建漂亮的代码。它是专门为此设计的，因此**您的代码可以很漂亮**。*你的*代码。我所说的漂亮是指一切重要的东西——它简短、易于更改、易于阅读、易于创建抽象并且仍然灵活，它不会试图隐藏您正在为 Web 开发的事实。当然，让你的代码变得漂亮的仍然是*你。*
*   随意使用 Hibernate，尤其是对于 CRUD 和大型应用程序。不要打扰JPA。不过，这不是灵丹妙药，使用 ORM，您总是会用一组问题交换另一组问题。
*   只需一点 Spring，您应该不需要太多，因为您已经小心避免了所有 Java EE 陷阱。谨慎使用依赖注入。
*   毕竟，您可能会发现 Java 语言过于冗长，并且在抽象出您复制/粘贴的代码时不是很有帮助。如果您想进行实验，请尝试使用 Scala。问题是 Scala 的主要卖点是您可以获得现代语言的所有好处，同时仍然保持类型安全，同时没有*可靠*的IDE 支持。习惯了超酷的 Java IDE，除非有稳定可靠的 IDE 支持，否则切换到 Scala 没有多大意义。足够稳定是不够的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-14T12:37:13.357

[Spring](http://www.springsource.org/)、[Hibernate](http://www.hibernate.org/)、[Wicket](http://wicket.apache.org/)等框架无疑有助于简化和加速 Web 开发，因为它们提供了高度的可测试性并很好地集成。但是，即使您拥有一套良好的开发实践，也不足以达到 RoR 生产力。仍然需要太多的技术材料和管道。

[Grails](http://www.grails.org/Home)可能是这张图片中更接近 RoR 的缺失部分。这是我的下一个实验。

顺便说一句，我的 MDA 经验与生产力提高相反，所以我不会提及它们（实际上，MDA 正在扼杀我们的生产力）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-22T18:00:03.890

[Javarebel](http://www.zeroturnaround.com/javarebel/)可以大大减少使用 Java 进行 Web 开发的时间。

让我在这里引用官方网站：

> JavaRebel 是一个 JVM 插件 (-javaagent)，它使您能够立即查看对代码的更改，而无需重新部署应用程序或执行容器重启。如果您厌倦了看着日志滚动，并希望看到您的更改以便继续前进 - JavaRebel 是您最好的新朋友。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-22T19:13:14.760

讨论 Java EE 生产力时有一点很重要：您应该使用 Java EE 5 和 EJB3.x，因为与以前的版本相比，它们提供了更高水平的生产力（和功能）。

遵守标准的 Java EE 规范是绝对重要的，例如使用 Hibernate 而不是 JPA 对生产力没有好处。使用 JPA 时回退到 Hibernate 功能没有任何限制，但是通过使用 Hibernate 而不是 JPA，您将被锁定在单一的持久性提供程序中，没有廉价的出路。使用标准背后的整个想法是相同的：概念上的灵活性（通过插入不同的实现）和可用的可扩展性（如果绝对必要，通过使用专有扩展）。Java EE 5 和 EJB3 是朝这个方向迈出的一大步。当然，您希望最小化任何专有功能，但如果某些功能看起来绝对必要，这是一个好兆头，它们将成为下一个版本的规范的一部分......

Java EE 生产力的主要障碍在于其对企业的关注（提供比大多数项目所需的更多的东西）和遗留问题（向后兼容性）。在 JSF 和状态管理的表示层中还有很多工作要做 - 关注[JSR-299](http://jcp.org/en/jsr/detail?id=299)来解决这些以及其他改进。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-20T12:27:52.550

人们经常提到基于动态语言的 RoR 和类似框架是更有生产力的环境，但我真的很想知道是否有硬数据支持这一点。这并不容易，因为应该确保她没有将苹果与橙子进行比较。应考虑项目类型（Web 2.0、企业应用程序）和团队规模等因素。然而，对于小型项目来说，很明显这样的框架确实比 Java EE 更有生产力。所以这是一个简短的参数列表，用于支持这一点，以及在 Java 世界中您可以为它们做些什么。

## Ruby 是一种更直观、更简洁的语言。你可以用更少的代码做同样的事情。

我不认为你可以在 Java 中拥有相同的东西，除非你当然使用在 JVM 中运行的动态语言（JRuby、Scala、Groovy）。否则，您的 IDE 可以提供帮助。在 Jave 中，IDE 是必不可少的工具，如果您学会使用它（代码生成、片段、重构），它将给您回报。事实上，您可以使用 Java IDE 完成许多使用 Ruby 或 Python IDE 根本无法完成的事情。此外，您还拥有静态类型语言的好处。键入可能需要更多时间，但它可以帮助您避免常见错误。

## Ruby 使用起来更有趣。使开发人员更快乐、更高效。

和上面一样。不过，我认为这是高度主观的论点。

## 约定优于配置使事情变得更快

像 Spring 或 Guice 这样的依赖注入框架可以提供帮助

## 脚手架，MVC 已经为你准备好了。

Java MVC 框架可以再次提供帮助

## 数据库变得容易。将数据库项目加载为对象。可以即时更改数据库。

Hibernate、iBatis 或其他 ORM 框架可以提供帮助。使用[Hibernate Tools](http://www.hibernate.org/255.html)，您可以使用 yml 文件实现与 RoR 中类似的功能

## 立即加载新模块

Maven 或 Ant Ivy 可以提供帮助

## 易于部署以进行测试

您的 IDE 或 Jetty 可以提供帮助。事实上，使用 Java 进行调试更容易

## 测试与框架集成。使用模拟对象有助于测试

依赖注入框架可以帮助模拟对象。JUnit 是单元框架的先驱。我认为 Java 不容易测试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-23T07:30:49.963

[Grails](http://grails.org/)是一个非常模仿 Ruby on Rails 的 Java webapp 框架，具有相似的原则（DRY、CoC）和生产力提升，但基于现有的 Java 框架（Spring、Hibernate 等）。

几周以来，我一直在使用 Grails 开展一个探索性项目（之前没有使用 Grails 或 Groovy 的经验），我印象非常深刻。有一些粗糙的边缘 - 它不像 RoR 那样成熟，但是您可以快速获得结果，并且永远不会感觉框架会妨碍您。

也许这个具体的例子能很好地说明：我想在单个网页的网格中编辑域对象的二维数组，发现生成的 HTML 请求数据自动映射到域对象（由 Spring MVC 提供，我相信) 有一个错误，导致某些数据被映射到错误的对象。我在网上看了一个小时，但显然没有人遇到或解决过这个问题。最终我决定放弃自动映射并“手动”进行 - 然后发现我只花了大约 10 行代码......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-21T08:47:05.117

对于与持久性相关的东西，我肯定会选择 Spring 和 Hibernate。

为什么是春天？

使用 Spring 而不是另一个框架的优点是 Springs 的理念是“**非侵入性的**”。通常，当您使用框架时，您很可能会开始依赖该框架，如果应用程序被认为运行更长的时间而您还必须进行维护等，这可能是一个糟糕的问题。Spring 使用 so -称为**“控制反转”（IoC）模式**。基本上你的代码不会（它可以但不是必须）调用 Spring，但 Spring 会调用你（好莱坞原则：“不要打电话给我，我会打电话给你”）。因此，例如，您可以**使用普通的 POJO**（普通的旧 Java 对象）并且您不必从任何与框架相关的类/接口继承。软件工程中的另一个大问题（如果不是最大的）是依赖关系。您将争取尽可能减少它们，因为它们会使您的生活更加艰难（尤其是在以后的维护中）。**Spring**通过配置文件和**依赖注入**模式管理组件的实例化，极大地减少了组件之间的依赖关系。我不想继续，最好的事情是你开始阅读[Spring 官方网站](http://www.springsource.org/)上的一些教程。最初可能需要一些时间来理解，但一旦你掌握了它，你将获得很多好处。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-21T16:42:28.623

从 Jython 2.5 开始，您可以使用 django 来满足您列出的要求。从 django 项目生成 war 文件并将它们部署在 J2EE 应用程序服务器上非常容易。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-23T07:08:44.617

只是想提出另一个想法……您实际上可以使用 JRuby 和 Rails（类似于之前关于 Django 和 Jython 的评论）。

如果您将 JRuby 与 Rails 和 JRuby Rack 一起使用（可能还有其他一些实用程序……我并不是真正开始进行集成的人），您可以将 JRuby Rails 添加到现有的 Java Web 应用程序中。我们有一个使用 Tomcat 部署的遗留 JSP 应用程序，现在开始使用 Rails 仅使用该设置添加新页面（除了在必要时扩展 JSP 端）。到目前为止，它已经相当成功，尽管我们没有在 Rails 中实现任何主要的高流量页面，所以我不知道它的扩展性如何。

我们可以完全访问会话，甚至设置了从 Rails 页面调用 JSP 的机制（例如现有的页眉和页脚类型 JSP 包括）。完全集成 2 需要一些努力和反复试验，但如果可以选择 Rails 和 JRuby，我强烈推荐它（作为 Ruby 的个人粉丝）。

一位同事涉足了 JBoss Seam，这是一个由 Gavin King（为我们带来 Hibernate 的人）开发的框架，旨在模拟 Rails。看过两者之后，我觉得 Rails 更容易开发。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-23T10:27:55.403

使用 AOP（面向方面​​编程）进行横切方面，如日志记录、授权等。您可以使用 Spring AOP 或 AspectJ。它使代码变得整洁且易于维护。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-23T11:58:24.377

在过去的几年里，我一直在使用[Jboss Seam ，并发现它是在 Java EE（利用 EJB3、Hibernate、Facelets）中开发的一种非常高效的方式。](http://seamframework.org/)我还做一些奇怪的 PHP 编码，老实说，我使用 Seam 更有效率（尽管这可能也表明我的 PHP 技能。）

对我来说，有几个亮点是：

*   代码的热部署（绝对必备）
*   用 Facelets 干燥
*   基于注释的配置
*   广泛的插入式组件（尤其是 ajax4jsf）
*   Jboss Tools 的 IDE 支持

IDE 和命令行中有一些工具可以以类似于 RoR 的方式构建框架代码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-22T13:10:01.560

我会选择用Scala 编写的[Lift 框架。](http://liftweb.net/)只需切换到[Scala](http://www.scala-lang.org/) ，您就会看到极大的生产力提升。Scala 也非常稳定，从 Scala 代码调用 Java 代码非常容易。不仅如此，它还与 Java 非常相似，但增加了一些特性。对于一些示例，您应该参考[Java 开发人员需要了解的关于 Scala 的 5 件事。](http://blog.lostlake.org/index.php?/archives/26-5-Things-a-Java-developer-needs-to-know-about-Scala.html)Twitter 将把它的部分代码库转移到 Scala。

您永远不会“卡在”一段代码上，因为您只需考虑如何在 Java 中完成它并编写类似的代码。一流的函数和演员将为您提供更大的生产力提升，并且都在 Scala 中。Scala 当然是静态类型的，并且具有类似于 Java 的性能。

我将引用 Lift 框架的作者对其进行描述：

> Lift 借鉴了现有框架中的精华，提供
> 
> *   Seaside 的高度精细的会话和安全性 Rails 快速闪现
> *   Django 的“不仅仅是包含 CRUD”
> *   Wicket 对设计师友好的模板风格（请参阅 Lift View
>     First）
> 
> 由于 Lift 应用程序是用 Scala 编写的，一种优雅的新 JVM 语言，您仍然可以使用您最喜欢的 Java 库并部署到您最喜欢的 Servlet 容器。使用您已经编写的代码并部署到您已经配置的容器！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-06-02T20:02:02.483

一些基本规则：

1.  [踢出应用服务器](http://www.atomikos.com/Publications/J2eeWithoutApplicationServer)- 在周转和质量方面取得巨大胜利。如果需要，保留一个 Web 容器，但在 Spring 和/或 Hibernate 中配置所有内容，以便 web.xml 最小化。

2.  测试所有内容，您现在可以执行第 1 步（无需部署时 XML 或代码生成：所有内容都已在开发中配置）。

3.  使用 Wicket 实现您的 Web 层 - 不再需要 JSP；Wicket 的生产力提高了 10 倍，而且易于测试（参见步骤 2）。

4.  使用 SCRUM 和敏捷开发方法

结果是 Java 生产力达到了 4GL 所允许的水平——我们在[Atomikos](http://www.atomikos.com)有几个我们这样做的迁移项目。因为我们从 4GL 平台迁移到 Java/Java EE，所以我们可以比较两者的估计值。

另请参阅此博客文章：[http://blog.atomikos.com/?p=87](http://blog.atomikos.com/?p=87)

高温高压

盖伊

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-03-23T11:03:33.680

好吧，我不是真正的 Java 人，所以我不能说太多，除了... JSF

我们尝试使用它一段时间，这是一场灾难。Almots 的所有基本步骤都必须通过大量的痛苦，没有文档，没有示例，没有社区知识。我们当时使用了一个用于 Eclipse 的插件（Exadel Studio），我们查看了其他一些 JSF 框架，它们都是不兼容的并且文档不完整。事实上，在我们尝试过的所有方法中，只有 Sun 框架（忘记了它的名字，基于 NetBeans）可以创建一个新的 JSF 项目，甚至可以开箱即用地编译。其余的需要很多天的 apache 配置和其他东西，这对于没有经验的人来说是一个真正的挑战（尽管我做到了）。

我们的团队花了几个月的时间在几周后用 ASP.NET 完成了一些事情。人们在 JSF 和 ASP.NET 方面都缺乏经验。

如果 JSF 生态系统仍然像 2007 年那样糟糕，我建议完全避免它，无论如何生产力都是不可能的。也许坚持使用 JSP 或经过时间证明且开发良好的东西？

# c++ - 在 Visual Studio 中的项目之间共享预编译头文件

> ID：645747
> 
> 赞同：42
> 
> 时间：2009-03-14T10:39:46.813
> 
> 标签：c++, visual-c++, precompiled-headers, pch

我有一个包含许多 Visual C++ 项目的解决方案，所有项目都使用 PCH，但有些项目针对特定项目的需要打开了特定的编译器开关。

这些项目中的大多数在各自的 stdafx.h（STL、boost 等）中共享相同的标题集。我想知道是否可以在项目之间共享 PCH，这样我就可以拥有一个解决方案中的大多数项目都可以使用的通用 PCH，而不是为每个项目编译每个 PCH。

似乎可以在项目设置中将 PCH 的位置指定为共享位置，所以我有预感这可以工作。我还假设使用共享 PCH 的所有项目中的所有源文件都必须具有相同的编译器设置，否则编译器会抱怨 PCH 和正在编译的源文件之间的不一致。

有没有人试过这个？它有效吗？

一个相关的问题：这样的分片 PCH 是否应该过度包容，还是会影响整体构建时间？例如，共享 PCH 可能包含许多广泛使用的 STL 标头，但某些项目可能只需要`<string>`和`<vector>`. 当优化器不得不丢弃所有由 PCH 拖入项目的未使用的东西时，使用共享 PCH 节省的时间是否必须在构建过程的稍后阶段归还？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2010-11-13T04:05:40.787

是的，这是可能的，我可以向您保证，节省的时间非常可观。编译 PCH 时，必须从创建 PCH 文件的项目中复制`.pdb`和`.idb`文件。就我而言，我有一个简单的两个文件项目，它正在创建一个 PCH 文件。标头将是您的 PCH 标头，源将被告知在项目设置下创建 PCH - 这类似于您在任何项目中通常会执行的操作。正如您所提到的，您必须为每个配置具有相同的编译设置，否则会出现差异并且编译器会抱怨。

每次重建或每次重新编译 PCH 时都复制上述文件会很痛苦，因此我们将其自动化。要自动复制，请执行预构建事件，将上述文件复制到适当的目录。例如，如果您正在编译`Debug`和`Release`构建 PCH，请将 PCH 项目中的文件复制`Debug`到依赖项目的`Debug`. 所以复制命令看起来像这样

> 复制 PchPath\Debug*.pdb Debug\ /-Y

注意`/-Y`最后。在第一次构建之后，每个后续构建都会增量编译，因此如果再次替换文件，Visual Studio 会抱怨符号损坏。如果它们确实损坏了，您始终可以执行重建，这将再次复制文件（这次它不会跳过它们，因为它们不再存在 - 清理会删除文件）。

我希望这有帮助。我花了很长时间才能够做到这一点，但这是值得的。我有几个项目依赖于一个大框架，PCH 只需要编译一次。现在所有的依赖项目都编译得非常快。

> 编辑：与其他几个人一起，我在 VS2010 和 VS2012 下对此进行了测试，它似乎确实可以正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-03-13T09:45:53.990

虽然这是一个老问题，但我想给出一个在 Visual Studio 2017 中有效且不涉及任何复制的新答案。唯一的缺点：编辑和继续不再起作用。

基本上你必须为预编译的头文件创建一个新项目，并让所有其他项目依赖它。这是我所做的：

一步步：

1.  在您的解决方案中创建一个新项目，其中包括标题（从这里称为 pch.h）和一个包含 pch.h 的单行 cpp 文件。该项目应创建一个静态库。设置新项目以创建预编译头文件。所有项目都需要可以访问输出文件。对我来说，这与 IntDir 相关，但对于默认设置，它可能与 $(SolutionDir) 相关。pch 项目必须只定义所有其他项目也有。

    [![pch项目设置](https://i.stack.imgur.com/GZAOR.png)](https://i.stack.imgur.com/GZAOR.png)

2.  让所有其他项目都依赖于这个新项目。否则构建顺序可能是错误的。

    [![项目参考](https://i.stack.imgur.com/2zcEg.png)](https://i.stack.imgur.com/2zcEg.png)

3.  Setup all other projects to use the pch.h. See, how the output file parameters are the same as in the pch project. Additional include directories also need to point to the pch.h directory. Optionally you can force include the pch file in every cpp (or you include it manually in the first line of every cpp file).

    [![pch](https://i.stack.imgur.com/2yZgl.png)](https://i.stack.imgur.com/2yZgl.png) [![包括](https://i.stack.imgur.com/ulvBe.png)](https://i.stack.imgur.com/ulvBe.png) [![包括](https://i.stack.imgur.com/Aq6TC.png)](https://i.stack.imgur.com/Aq6TC.png)

    4.  Setup all projects (including the pch project) to use the same compiler symbol file (the linker symbol file is not affected). Again, in my example this is OutDir but in your solution this might vary. It has to point to the same file on disk. The Debug Information Format needs to be set to C7 (see screenshot above), otherwise Visual Studio will not be able to compile projects in parallel. [![数据库](https://i.stack.imgur.com/oPNUr.png)](https://i.stack.imgur.com/oPNUr.png)

I hope I didn't forget anything. For my solution (130k loc, 160 projects) this lead to a compile time of ~2:30mins instead of ~3:30mins.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T19:14:22.117

这似乎是不可能的，因为每个源文件都必须针对编译 PCH 的同一 PDB 进行编译。该死。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-12-16T18:02:48.777

Samaursa 的回答对我有用。

我还看到了这个有效的[链接](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/665d4183-f85c-481d-bada-03283b310099)（在底部附近寻找雷金纳德的答案）。

这个使用`copy`Reginald 的使用`xcopy`（我更喜欢`xcopy`）。不管怎样，谢谢——这大大加快了我的构建速度。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-14T10:52:21.307

对我来说，这听起来像是一个“收益递减”的案例。假设包含公共头文件直接浪费每个 .cpp 文件 1 秒，并且每个目标（DLL/EXE）有 10 个 .cpp 文件。通过对每个目标使用 .pch，您可以为每个目标节省 10 秒。如果您的整个项目有 10 个目标，则整个构建可以节省 1.5 分钟，这很好。

但是，通过将整个项目的文件减少到一个 .pch，您只能再节省 9 秒。这值得么？额外的工作（设置起来可能要复杂得多，因为 VS 向导不支持非标准配置）只节省了十分之一。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-20T12:51:34.460

在 2012 年，您可以使用 PDB 并从仅将 pch 和依赖于 pch lib 的主项目构建到同一目录中的 lib 项目构建 pch（不复制），不幸的是，这不适用于 2013+除了通过冗长的工作-一轮。

# c# - 表单布局在智能设备的可视 C# 中不可见->Windows CE 5.0->设备应用程序项目

> ID：645755
> 
> 赞同：1
> 
> 时间：2009-03-14T10:49:35.977
> 
> 标签：c#, .net, compact-framework, embedded

我正在为 Windows CE 6.0 开发一个应用程序。

当我启动 Windows CE 5.0 设备应用程序项目时，IDE 在解决方案资源管理器中向我显示表单，但设计器中没有表单布局。相反，它显示为类似于 openFileDialog 控件的控件。 [替代文字 http://img7.imageshack.us/img7/7130/formdesignererrorpictur.jpg](http://img7.imageshack.us/img7/7130/formdesignererrorpictur.jpg)

如果我在 Windows 应用程序项目上尝试，不会出现同样的问题。我错过了安装任何必需的 API 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-15T17:43:43.707

**由于 API 冲突，我的表单布局已降级。** 因为同一个库的多个版本可能是导致此类问题的原因。我已经安装了 .net compact framework 1、2、3 和 3.5 SP1。我卸载了所有，然后当 Visual Studio 要求安装 .net compact framework 2 时。我得到了适当的布局。

# java - 如何通过浏览器本地下发Java程序

> ID：645756
> 
> 赞同：2
> 
> 时间：2009-03-14T10:51:20.450
> 
> 标签：java, mysql, jdbc, browser, language-features

我想编写一个完全在一台机器上本地运行的应用程序——不需要连接到互联网或任何外部机器。

我在想，使用 Web 浏览器作为这个应用程序的平台是个好主意，这样我就不必搞乱很多 UI 的东西——我可以相当快地将网页拼凑在一起，并利用CSS 在整个应用程序中获得一致的样式。

但是，我想与相关机器上的 MYSQL 数据库进行交互。考虑到这一点，我想我可以以某种方式使用 Java 来处理用户从应用程序输入的信息，并通过 JDBC 将其传送到数据库。

我知道我可以使用小程序来执行此操作，但不利的一面是我希望用户能够将文件保存到本地机器 - 我已经读过小程序在沙箱中运行，这会阻止它们获得任何访问本地机器。

我也知道我可以使用 PHP，但我想利用 Java 非常适合的面向对象设计。

有没有人有任何想法、建议或指向教程/网页的链接可以帮助我决定如何最好地解决这个问题。

任何想法都非常感谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T13:52:28.717

我知道你说过你不想在 java 中搞乱 GUI 的东西，但是你看过 java web start 吗？它几乎完全满足您的需求；用户通过 Web 浏览器单击链接，您的应用程序已部署在他们的机器上，它甚至会检查以确保使用了正确的 JVM。因为它是一个完整的应用程序而不是一个小程序，所以您的应用程序不会被沙箱化，并且您的程序中没有任何访问限制（除了普通的 java 东西..），例如，这很容易做你提到的事情并与 mySQL DB 交谈。唯一的缺点，就是我之前提到的，是你必须用java设计一个UI。

[Web Start 维基百科页面](http://en.wikipedia.org/wiki/Java_Web_Start)

[Sun Web Start 上的常见问题解答](http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/faq.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T11:04:50.513

如果您对基于 Java EE 的 Web 开发感到满意，您可能只是将您的应用程序与 Tomcat 或 Jetty 捆绑在一起。

如果您不想只为一个应用程序运行独立的 servlet 容器，您还可以将 Jetty 嵌入到可运行的 Java 应用程序中（请参阅[此处](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)的文档）。

无论哪种方式，您都可以利用现有的 Java EE 框架（Spring JDBC、Hibernate、所有这些 Web 框架）来抽象出技术复杂性，尽管使用嵌入式 Jetty，您可能需要为您的 Web 应用程序框架编写某种集成层选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T12:39:26.643

[Grails](http://www.grails.org/Quick+Start)可能是一个有用的起点。它将为您提供一个独立的 Web 服务器解决方案，并通过动态生成的网页处理 JDBC 要求和 CRUD（创建-读取-更新-删除）功能。通过网页提供数据库接口的应用程序应该花费最少的精力。

（仅供参考。Grails 是[Rails](http://rubyonrails.org/)的 Java 等价物）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T12:25:20.157

我认为你应该试试[Restlet](http://www.restlet.org/)，一个轻量级的休息框架。本教程向您展示了如何启动本地网络服务器，并在几分钟内通过浏览器提供“Hello World”（不是开玩笑！），并且有很多扩展可以满足任何类型的需求。

结合[Java Web Start](http://java.sun.com/javase/technologies/desktop/javawebstart/index.jsp)，您可以将应用程序部署并启动到本地主机，这应该是您所需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T13:07:07.920

使用 JDBC 并不意味着您必须编写一个小程序，您可以在任何类型的应用程序中使用 JDBC：桌面应用程序、Web 应用程序、EJB、MDB 等。

您想在服务器端使用浏览器和 Java 吗？然后去使用它并使用 Servlet / JSP。考虑可能使用表示框架（[Wicket](http://wicket.apache.org/)、Struts2、Spring MVC、...），[Hibernate](http://www.hibernate.org/)用于数据访问，Spring 用于其他设施和布线。[Grails](http://www.grails.org/)也是一个好主意。

顺便说一句，我不是 PHP 专家，但 PHP 具有面向对象的功能（在 PHP4 中引入，在 PHP5 中增强），因此如果您选择 PHP，您不会牺牲一切。

所以这真的取决于你想做什么。如果您想编写一些 Java（webapp 或桌面应用程序）：选择 Java。如果您想快速放置几个网页并拥有一个 apache 服务器，请选择 PHP。如果您寻求真正的高生产力，请选择[RoR](http://rubyonrails.org/)或 Grails。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-14T13:33:17.437

如果你想把它作为一个小程序来做，你可以。签署小程序并授予它对本地网络的权限（以这种方式连接到 MYSQL 服务器）......这应该是可能的。 [这是一个关于它的教程](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T14:54:30.627

你可以试试 GWT + Google Gears

GWT 是一个类似于 Swing 的用于浏览器的 GUI 工具包。Google Gears 是一个浏览器端数据库。您的应用程序完全采用 Javascript 编写，位于单个 HTML 文件中，并且兼容跨浏览器。

GWT 应用程序可以进行服务器调用，Gears 可以与服务器数据库同步。因此，您无需将应用数据完全限制在本地桌面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-14T15:21:07.253

如果你对一些实验感兴趣，比如新东西，并且想重用过多的 Java 库（包括 JDBC），那么你可能会对基于[Scala的](http://www.scala-lang.org)[lift web 框架](http://liftweb.net/)感兴趣。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-14T13:59:20.477

正如有人已经建议的那样，您可以在您的应用程序中使用嵌入式码头服务器，并让您的用户使用某种 shell 脚本或批处理脚本来启动它。您只需要向 Java Web 应用程序和您的应用程序投诉您的布局目录。IE：

```
我的应用程序
   应用程序/
      WEB-INF/
         库/
         班级/
         web.xml
   开始.bat |
   start.cmd - 取决于您的客户端操作系统
   开始.sh |

```

然后，您只需要在 start.[bat|cmd|sh] 中启动 Jetty，并将您的**应用程序**作为您的 webaplication 上下文，然后您就完成了！

# parsing - 算术表达式的语法

> ID：645762
> 
> 赞同：0
> 
> 时间：2009-03-14T10:57:45.710
> 
> 标签：parsing, grammar

我被分配了一项为算术表达式创建解析器的任务（带有括号和一元运算符）。所以我只想知道这个语法是否正确，它是否是 LL(1) 形式并且在为此构建解析表时遇到了真正的问题

```
 S  -> TS'
 S' -> +TS' | -TS' | epsilon
 T  -> UT'
 T' -> *UT' | /UT' | epsilon
 U  -> VX
 X  -> ^U | epsilon
 V  -> (W) | -W | W | epsilon
 W  -> S | number 
```

* * *

*优先级（从高到低）*

```
 (), unary –
 ^
 *, /
 +, - 
```

*二元运算符的结合性*

```
 ^ = right
 +, -, *, / = left 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T11:13:24.563

> 它是 LL(1) 形式吗？

要判断语法是否为 LL(1)，您需要扩展产生式规则。如果您可以生成任何导致左侧出现在右侧的第一件事的产生式序列，则语法不是 LL(1)。

例如，考虑以下规则：

```
X --> X | x | epsilon 
```

这显然不能成为 LL(1) 语法的一部分，因为如果应用最左边的产生式，它就是左递归的。但是这个呢？

```
X --> Y | x
Y --> X + X 
```

这也不是 LL(1) 语法，但它更微妙：首先你必须应用 X --> Y，然后应用 Y --> X + X 才能看到你现在有 X --> X + X ，这是左递归的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T11:15:21.767

一元加号运算符似乎缺少任何东西。试试这个...

V -> (W) | -W | +W | ε

# c# - Forms.ToolStripMenuItemInternalLayout 中的 NullReferenceException

> ID：645763
> 
> 赞同：0
> 
> 时间：2009-03-14T10:58:38.700
> 
> 标签：c#, .net

我通过自动崩溃报告收到这个奇怪的异常，我无法弄清楚是什么原因造成的：

```
V2009.3.0.0 - System.NullReferenceException - :System.Drawing.Rectangle get_ImageRectangle():0
Version: MaxTo2009.3.0.0
Exception: System.NullReferenceException
Error message: Object reference not set to an instance of an object.
Stack trace: 
  at System.Windows.Forms.ToolStripMenuItemInternalLayout.get_ImageRectangle()
  at System.Windows.Forms.ToolStripMenuItem.OnPaint(PaintEventArgs e)
  at System.Windows.Forms.ToolStripItem.FireEvent(EventArgs e, ToolStripItemEventType met)
  at System.Windows.Forms.ToolStrip.OnPaint(PaintEventArgs e)
  at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer, Boolean disposeEventArgs)
  at System.Windows.Forms.Control.WmPaint(Message& m)
  at System.Windows.Forms.Control.WndProc(Message& m)
  at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
  at System.Windows.Forms.ToolStrip.WndProc(Message& m)
  at System.Windows.Forms.ToolStripDropDown.WndProc(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
  at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
  at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

这似乎发生在很多人身上，但我无法重现它。[我在谷歌上找到的线索](http://social.msdn.microsoft.com/Forums/de-DE/vcsharpexpresseditionde/thread/9b50cd49-4c86-43ee-82f8-d5c9e0df5108/)（基本上只有一篇文章，是德语的，我不太了解）告诉我这与菜单项的选中状态有关。由于我在早期版本中没有看到这个错误，并且我在这个版本中只更改了一个菜单项，这很可能是罪魁祸首：

```
private void toolStripMenuItemPassiveMode_CheckedChanged(object sender, EventArgs e)
{
    // Calls into an unmanaged DLL and uses PostMessage
    SetPassiveMode(toolStripMenuItemPassiveMode.Checked);
    String title;
    String text;
    if (toolStripMenuItemPassiveMode.Checked && !Settings.PassiveMode)
    {
        title = "Temporarily passive";
        text = "You have temporarily put MaxTo into passive mode. MaxTo will only intercept maximizations while you are holding the modifier key.\n\nIf you want passive mode to be the default, you have to set it in the options.";
        notifyIcon.ShowBalloonTip(10000, title, text, ToolTipIcon.Info);
    }
    else if (!toolStripMenuItemPassiveMode.Checked && Settings.PassiveMode)
    {
        title = "Temporarily active";
        text = "You have temporarily put MaxTo into active mode. MaxTo will now intercept all window maximizations.\n\nIf you want active mode to be the default, you have to set it in the options.";
        notifyIcon.ShowBalloonTip(10000, title, text, ToolTipIcon.Info);
    }
} 
```

菜单项的 Checked 属性在整个代码中的两个位置进行了修改，但据我所知，它们没有任何可疑之处。

来自 .designer.cs：

```
this.toolStripMenuItemPassiveMode.CheckOnClick = true;
this.toolStripMenuItemPassiveMode.ImageScaling = System.Windows.Forms.ToolStripItemImageScaling.None;
this.toolStripMenuItemPassiveMode.Name = "toolStripMenuItemPassiveMode";
this.toolStripMenuItemPassiveMode.Size = new System.Drawing.Size(172, 28);
this.toolStripMenuItemPassiveMode.Text = "&Passive mode";
this.toolStripMenuItemPassiveMode.CheckedChanged += new System.EventHandler(this.toolStripMenuItemPassiveMode_CheckedChanged); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T15:09:37.827

Haivng 查看了反射器中的框架代码，可能是您与非托管 dll 的互操作在 OnPaint 发生时/之前修改了检查状态。CheckedImage 属性在 get_ImageRectangle 中使用，但如果未选中按钮，则返回 null。通常我会想象这不会是一个问题，因为项目的状态没有改变中间绘画。

也许不是将 toolStripMenuItemPassiveMode.Checked 传递到您的 SetPassive() 方法中，而是先将其读入方法范围 bool 并将其传递进去？

实际上我自己并没有弄乱代码，这只是一个半猜测。

# hardware - 如何证明代码没有损坏，但硬件损坏了？

> ID：645768
> 
> 赞同：2
> 
> 时间：2009-03-14T11:06:49.213
> 
> 标签：hardware, benchmarking

我敢肯定它到处重复。您可以“感觉”网络速度慢，或者机器速度慢或其他什么。但是服务器/机箱日志没有显示任何内容，因此 IT 不相信您。你做什么工作？

您的回归花费了两倍的时间...但这还不够好吧您使用 dd 等传输 100 GB，但是...这还不够。好的，您将服务器放置在不同的机箱中 2 周，它工作正常……但是……这还不够……

那么如何让 IT 更换机箱？

更具体地说：是否有任何套件可以在两个设置上运行（应该是相同的），它可以显示网络/cpu/磁盘访问的差异.. IT 会相信哪个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T11:27:05.340

计算机不会像我们一样老化和变慢。如果您的服务器变慢了——实际上变慢了，不仅仅是因为您使用的其他计算机都在变快而感觉变慢了——那么这是有原因的，并且您可能能够修复它。我会尝试清理一些磁盘空间，对磁盘进行碎片整理，并检查正在运行的其他进程（也许有人向系统添加了更多应用程序，而您只是没有获得那么多周期）。

如果您的应用使用数据库，您可能需要分析查询性能并查看某些索引是否正常。当数据量很少时执行良好的查询如果必须使用表扫描，则可能会随着数据量的增长而开始花费很长时间。作为一名前“IT”人员，我也不愿意将硬件放在问题上，因为有人告诉我系统正在变慢。我想知道发生了什么变化，看看我是否能让系统按应有的方式运行。如果应用程序只是在硬件上增长了——在你进行了适当的优化之后——那么升级是一个合理的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T11:13:47.777

运行标准基准套件。与“工作”的类似计算机相比，看看它是否能准确定位内存、cpu、总线或磁盘。

有关一些提示，请参阅[http://en.wikipedia.org/wiki/Benchmark_(computing)#Common_benchmarks](http://en.wikipedia.org/wiki/Benchmark_(computing)#Common_benchmarks)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T12:08:08.747

*证明*某事的唯一方法是进行严格的审计。

现在传统上，我们应该在两个不同的集合之间保持系统不变，同时改变我们感兴趣的变量。在这种情况下，变量是运行代码的硬件。因此，简单来说，您应该审核您的软件在两组不同硬件上的运行情况，其中一组是您不满意的硬件。并看到差异。

现在，如果你要正确地做到这一点，我相信你是，你首先需要提出一个[零假设](http://en.wikipedia.org/wiki/Null_hypothesis)，比如：

> “应用程序的缓慢与我们使用的特定硬件无关”

现在你开始[反驳那个假设](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)以支持[另一种假设](http://en.wikipedia.org/wiki/Alternative_hypothesis)。收集到足够的结果后，您可以对它们应用统计分析，以确定任何差异是否具有[统计显着性](http://en.wikipedia.org/wiki/Statistical_significance)。有一些分析可以找出您需要多少数据，然后比较两组数据以确定差异是随机的还是非随机的（这会反驳您的零假设）。您所做的测试类型将主要取决于您的数据，但聪明的人已经制作了[清单来帮助我们做出决定](http://www.graphpad.com/www/Book/Choose.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T11:41:28.360

听起来您的主要问题是被 IT 倾听，但原始技术数据可能无法说服合适的人。从企业获得支持可能会对您有所帮助，这意味着谈论金钱。

幸运的是，这两个平台已经包含了一个共同的软件——应用程序本身——旨在为某人赚钱或省钱。为什么不衡量它可以多快做到这一点，例如处理订单需要多长时间？

通过测量您的应用程序花费多长时间处理每个子任务或数据源，您可以大致了解正在执行的底层硬件。写入本地数据库，或处理大于 RAM 的数据结构会影响磁盘，进行网络调用会影响网络硬件，CPU 绑定计算会影响那里。

这些数据永远不会像基准一样精确，并且可能需要昂贵的编码，但更容易将其发现的内容转换为货币术语。Log4j 的[NDC 和 MDC](http://wiki.apache.org/logging-log4j/NDCvsMDC)功能，以及[Springs AOP](http://www.javalobby.org/java/forums/t44746.html)可能是您很好的启用工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T09:22:52.077

从 Windows 2000 中的开始/运行运行 perfmon.msc 到 Vista。然后只需为 CPU、磁盘等添加计数器。

对于 SQL 查询，您应该捕获实际查询，然后手动运行它们以查看它们是否很慢。

例如，如果使用 SQL Server，请从“工具”、“SQL Server Profiler”运行探查器。然后在您的程序中执行一些操作并查看捕获的任何可疑数据库调用。将其中一个查询复制并粘贴到管理工作室的新查询窗口中并运行它。

对于网络，您应该尝试人为地限制您的网络速度，看看它如何影响您的代码（例如，[Traffic Shaper XP](http://bandwidthcontroller.com/trafficShaperXp.html)是一个简单的免费软件限制器）。

# c++ - 像 C++ 中分离声明和定义的优点和缺点是什么？

> ID：645778
> 
> 赞同：12
> 
> 时间：2009-03-14T11:18:21.680
> 
> 标签：c++, language-design, declaration, definition

在 C++ 中，函数、变量和常量的声明和定义可以像这样分开：

```
function someFunc();

function someFunc()
{
  //Implementation.
} 
```

事实上，在类的定义中，经常会出现这种情况。一个类通常在 .h 文件中声明其成员，然后在相应的 .C 文件中定义这些成员。

这种方法的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-14T12:36:58.757

从历史上看，这是为了帮助编译器。在它使用它们之前，你必须给它一个名称列表——无论是实际用法，还是前向声明（C 的默认函数原型除外）。

现代语言的现代编译器表明这不再是必需品，因此这里的 C 和 C++（以及 Objective-C，可能还有其他）语法是历史包袱。事实上，这是 C++ 的一大问题，即使添加适当的模块系统也无法解决。

缺点是：大量嵌套的包含文件（我之前跟踪过包含树，它们非常大）以及声明和定义之间的冗余——所有这些都会导致更长的编码时间和更长的编译时间（曾经比较过可比较的 C++ 和C# 项目？这是造成差异的原因之一）。必须为您提供的任何组件的用户提供头文件。违反 ODR 的可能性。依赖预处理器（许多现代语言不需要预处理器步骤），这使您的代码更脆弱，更难被工具解析。

优点：不多。您可能会争辩说，出于文档目的，您会在一个地方获得一组函数名称的列表 - 但如今大多数 IDE 都具有某种代码折叠能力，并且任何规模的项目都应该使用文档生成器（例如 doxygen）。使用更简洁、无预处理器、基于模块的语法，工具更容易遵循您的代码并提供更多功能，因此我认为这种“优势”只是没有实际意义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-14T12:52:33.260

这是 C/C++ 编译器如何工作的人工制品。

当源文件被编译时，预处理器将每个#include-statement 替换为包含文件的内容。只有在之后，编译器才会尝试解释这种连接的结果。

然后编译器从头到尾检查该结果，尝试验证每个语句。如果一行代码调用了一个以前没有定义过的函数，它就会放弃。

但是，当涉及到相互递归的函数调用时，存在一个问题：

```
void foo()
{
  bar();
}

void bar()
{
  foo();
} 
```

在这里，`foo`不会编译`bar`未知。如果你切换这两个函数，`bar`将不会编译为`foo`未知。

但是，如果您将声明和定义分开，则可以根据需要对函数进行排序：

```
void foo();
void bar();

void foo()
{
  bar();
}

void bar()
{
  foo();
} 
```

在这里，当编译器处理`foo`它时，它已经知道一个名为 的函数的签名`bar`，并且很高兴。

当然，编译器可以以不同的方式工作，但这就是它们在 C、C++ 和某种程度的 Objective-C 中的工作方式。

缺点：

没有直接的。无论如何，如果您使用 C/C++，这是最好的做事方式。如果您可以选择语言/编译器，那么也许您可以选择一个这不是问题的。将声明拆分为头文件时唯一需要考虑的是避免相互递归的#include-statements——但这就是包含保护的用途。

好处：

*   编译速度：由于所有包含文件都被连接然后解析，减少包含文件中代码的数量和复杂性*将*提高编译时间。
*   避免代码重复/内联：如果您在头文件中完全定义函数，则包含此头文件并引用此函数的每个目标文件都将包含它自己的该函数版本。作为旁注，如果*要*内联，则需要将完整定义放入头文件（在大多数编译器上）。
*   封装/清晰度：定义良好的类/函数集加上一些文档应该足以让其他开发人员使用您的代码。（理想情况下）他们不需要了解代码是如何工作的——那么为什么要求他们筛选呢？*（当然，在需要时*访问实现可能对他们有用的反对论点仍然存在）。

当然，如果您根本对公开函数不感兴趣，您通常仍然可以选择在实现文件中而不是在头文件中完全定义它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-14T11:26:15.373

该标准要求在使用函数时，声明必须在范围内。这意味着，编译器应该能够根据原型（头文件中的声明）验证您传递给它的内容。当然，对于可变参数的函数 - 此类函数不验证参数。

当这不是必需的时候，想想 C。当时，编译器将没有返回类型规范视为默认为 int。现在，假设您有一个函数 foo()，它返回一个指向 void 的指针。但是，由于您没有声明，编译器会认为它必须返回一个整数。例如，在某些摩托罗拉系统上，整数和指针将在不同的寄存器中返回。现在，编译器将不再使用正确的寄存器，而是将您的指针转换为另一个寄存器中的整数。当你尝试使用这个指针的那一刻——所有的地狱都崩溃了。

在标题中声明函数很好。但请记住，如果您在标题中声明和定义，请确保它们是内联的。实现这一点的一种方法是将定义放在类定义中。否则添加`inline`关键字。否则，当标头包含在多个实现文件中时，您将遇到 ODR 冲突。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-14T13:16:25.090

将声明和定义分离为 C++ 头文件和源文件有两个主要优点。第一个是当你的类/函数/任何东西在多个地方时，你可以避免使用[单一定义规则的问题。](http://en.wikipedia.org/wiki/One_Definition_Rule)`#include`其次，通过这种方式，您将接口和实现分开。您的类或库的用户只需要查看您的头文件即可编写使用它的代码。您还可以使用[Pimpl Idiom](http://www.gotw.ca/gotw/024.htm)更进一步，使用户代码不必在每次库实现更改时都重新编译。

您已经提到了 .h 和 .cpp 文件之间代码重复的缺点。也许我写 C++ 代码的时间太长了，但我认为这并没有那么*糟糕*。无论如何，每次更改函数签名时都必须更改所有用户代码，那么还有一个文件是什么？仅当您第一次编写类并且必须从标题复制并粘贴到新的源文件时才令人讨厌。

实践中的另一个缺点是，为了编写（和调试！）使用第三方库的好代码，您通常必须查看它的内部。这意味着即使您无法更改源代码也可以访问它。如果你只有一个头文件和一个编译的目标文件，那么很难确定这个错误是你的错还是他们的错。此外，查看源代码可以让您深入了解如何正确使用和扩展文档可能未涵盖的库。不是每个人都在他们的库中附带 MSDN。伟大的软件工程师有一个讨厌的习惯，就是用你的代码做你做梦都想不到的事情。;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T11:19:21.240

**优势**

只需包含声明，就可以从其他文件中引用类。然后可以稍后在编译过程中链接定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T13:27:34.220

您基本上对类/功能/任何内容有 2 个视图：

声明，您在其中声明名称、参数和成员（在结构/类的情况下），以及您定义函数功能的定义。

缺点之一是重复，但一大优点是您可以将函数声明为`int foo(float f)`并将细节保留在实现中（=定义），因此任何想要使用您的函数 foo 的人只需包含您的头文件和指向您的库的链接/ objectfile，因此库用户和编译器只需要关心定义的接口，这有助于理解接口并加快编译时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-16T20:11:49.893

我还没有看到的一个优势：**API**

任何非开源（即专有）的库或第 3 方代码都不会随分发一起实现。大多数公司都不愿意放弃源代码。简单的解决方案，只需分发允许使用 DLL 的类声明和函数签名。

*免责声明：我并不是说它是否正确、错误或合理，我只是说我已经看到了很多。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-14T11:20:29.117

**坏处**

这会导致很多重复。大多数函数签名需要放在两个或更多（如 Paulious 所指出的）位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-14T12:13:30.543

前向声明的一大优点是，如果仔细使用，您可以减少模块之间的编译时间依赖性。

如果 ClassA.h 需要引用 ClassB.h 中的数据元素，您通常可以在 ClassA.h 中只使用前向引用，并将 ClassB.h 包含在 ClassA.cc 中而不是 ClassA.h 中，从而减少编译时间依赖。

对于大型系统，这可以大大节省构建时间。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-16T19:56:24.470

1.  分离提供了程序元素的干净、整洁的视图。
2.  可以在不披露源代码的情况下创建和链接到二进制模块/库。
3.  链接二进制文件而不重新编译源。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-16T23:23:18.000

如果正确完成，这种分离可以减少只有实现发生变化时的编译时间。

# programming-languages - 具有用户可配置脚本的 Web 应用程序语言？

> ID：645786
> 
> 赞同：0
> 
> 时间：2009-03-14T11:21:53.793
> 
> 标签：programming-languages, scripting

我是一个热心的业余爱好者，并且正在围绕一个想法来“磨我的锯子”。我想启动一个应用程序来允许；

*   由用户群创建表单
*   管理这些表格
*   填写这些表格
*   表格的存储

这些表单将需要某种程度的脚本（即，将字段 1 添加到字段 2 并将结果放入字段 3），理想情况下，它将是 Web 或非常事物客户端（如 Java），并将数据存储在某种形式的 DB 中。

我有很多想法，但我最没有资格回答的第一个是可以使用哪种语言（或多种语言），并包括用户可配置的脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T11:40:10.407

您可能可以使用任何您觉得舒服的语言来开发这样的应用程序（对于脚本部分），您“只”需要为您设计的任何脚本语言实现一些解释器。

为了减少重新发明的轮子的数量，您可能应该寻找一种语言......

*   有一个统一的 API 用于处理嵌入式脚本语言（如[javax.script](http://java.sun.com/javase/6/docs/api/javax/script/package-summary.html)），实现[同质性](http://en.wikipedia.org/wiki/Homoiconicity)的概念或提供强大的脚本支持
*   带来了一个让您感觉舒适的 Web 应用程序框架
*   为您喜欢的数据库提供绑定
*   附带良好的文档

由于有很多语言可以满足这些要求，这基本上是品味和/或职业合理性的问题。通常的嫌疑人可能是：

*   基于 Java EE 的堆栈（同类最佳或“集成”解决方案 Seam）
*   替代的基于 JVM 的语言（如 Groovy 和 Grails 作为 Web 应用程序框架）
*   Ruby 与 Web 应用程序框架，如 Ruby on Rails 或 Sinatra
*   易于托管的 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T11:23:49.797

*Lua*是一种非常强大、通用、易于嵌入的脚本语言，可能正是您正在寻找的。看看[这里](http://www.lua.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T11:44:17.823

[io](http://www.iolanguage.com/)是一种小型、快速且可嵌入的基于原型的语言。

# php - PHP 注意：循环数组时未定义索引

> ID：645788
> 
> 赞同：7
> 
> 时间：2009-03-14T11:24:11.743
> 
> 标签：php, arrays

我正在循环一个这样的二维数组：

```
if (!empty($aka)) {
    foreach ($aka as $ak) {
        if($ak["lang"]=="es") {
            $sptitle=$ak["title"];
        }
    }
} 
```

很简单。如果数组（$aka）不是空的，我会循环遍历它，当它发现“lang”索引等于“es”时，我只需将该索引的“title”值保存在 $sptitle 中。

问题是数组（$aka）包含很多信息，有时没有“lang”索引......我收到这个错误：注意：未定义的索引：lang。

我怎样才能解决这个问题？？？

这是数组的摘录，以帮助您理解。请注意，[1] 没有 [lang] 索引，但 [2] 确实有：

```
[1] => Array
    (
        [title] => "The Lord of the Rings: The Motion Picture"
        [year] => ""
        [country] => "USA"
        [comment] => "promotional title"
    )

[2] => Array
    (
        [title] => "Señor de los anillos: La comunidad del anillo, El"
        [year] => ""
        [country] => "Argentina"
        [comment] => "Chile, Mexico, Peru, Spain"
        [lang] => "es"
    ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-14T11:25:53.050

只需使用[isset](http://php.net/isset)对其进行测试，例如

```
if (!empty($aka)) {
        foreach ($aka as $ak) {
                if(isset($ak["lang"]) && ($ak["lang"]=="es")) {
                        $sptitle=$ak["title"];
                }
        }
} 
```

如果您不知道像 && 这样的布尔运算符如何短路，如果第一个操作数为假，则不会计算第二个操作数。您经常会看到这个习惯用法用于在对第二个操作数进行操作之前检查某物的可用性。

您也可以使用[array_key_exists](http://php.net/array_key_exists) ('lang', $aka) 代替 isset，但它的语义略有不同 - 如果元素设置为`null`，它将返回 true，而 isset 将返回 false。

有趣的是，[isset 的速度至少是 array_key_exists 的两倍](http://us.php.net/manual/en/function.array-key-exists.php#82867)，这可能是因为它是一种语言结构而不是常规的函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-17T15:09:32.300

使用会不会错：

```
if (@$ak['lang']) 
```

我真的很怀念我们仍然不能像这样在 1 中进行 2 次检查的事实

```
if ($ak['lang']) 
```

这是关于 PHP 的美妙之处之一，我只是看不到警告数组键是否在像 PHP 这样的临时脚本语言中初始化的目的。

我不确定 PHP 的开发人员将如何处理这个问题。就个人而言，我有点担心他们正在把 PHP 变成别的东西。别管它。太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-29T12:30:18.580

```
if (@!empty($aka)) {
        foreach ($aka as $ak) {
                if($ak["lang"]=="es") {
                        $sptitle=$ak["title"];
                }
        }
}

or

if ( @$_POST['value'] == 'yes' ) 
 {
   state;
 } 
```

在大多数情况下，这注意到通过使用*@*符号删除..........................

# c# - 可以将私有方法放在我的控制器中，还是应该使用 asp.net mvc 将它们分成某种类型的帮助程序类？

> ID：645794
> 
> 赞同：17
> 
> 时间：2009-03-14T11:26:38.727
> 
> 标签：c#, asp.net-mvc

我有一个控制器，它根据用户类型加载一些下拉列表。例如：

```
public ActionResult Index()
    {
      switch (SessionHelper.ViewLimit)
          {
            case "C":
              ViewData["CustDivision"] = LoadCustDivisions();
              ViewData["Customer"] = LoadCustomers();
              break;
            case "P":
              ViewData["Customer"] = LoadCustomers();
              ViewData["Employee"] = LoadEmployees();
              break;
            case "D":
              ViewData["Customer"] = LoadCustomers();
              ViewData["Division"] = LoadDivisions();
              break;
             default:
              return RedirectToAction("Logout", "Account");
          }
    return View()
    } 
```

首先，switch 语句是否属于控制器，其次，如果是，我应该将 LoadCustomers()、LoadDivisions()、LoadEmployees() 放在哪里？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-22T07:02:16.627

我觉得不——控制器中的私有方法产生的问题比他们解决的问题多。以下是我的理由：

当您想在控制器中创建私有方法时，您已经确定了一段有点“低俗”或重复的代码。这足以创建一个单独的帮助类或将代码移到堆栈中。

一个帮助类，即使只有一种方法，也更容易测试和模拟。它还创建了更强的逻辑关注点分离。这使得调试时更容易处理。

我也同意 tvanfosson 的观点，即使用策略模式来帮助不重新发明轮子并展示对软件开发的更成熟的理解。

但实际上，这是你可以为永恒争论两种方式的情况之一。但这归结为您所追求的工艺水平，或者更准确地说，是愿意接受的工艺水平。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-14T11:44:29.147

如果它们只在这个控制器中使用，我会说让它们对控制器私有是可以的。一旦你发现你在其他地方需要它们，然后寻找将它们迁移到你的 DAL 或帮助程序类。

您的架构的更大问题——使用 switch 语句或策略模式等——很难仅从这个片段中回答。这个 switch 语句并没有特别冒犯我，但是您可能希望 SessionHelper 返回一个策略，该策略将为您加载正确的视图数据。在这种情况下，加载视图的代码将放在策略类中。

```
 DataStrategy strategy = SessionHelper.GetDataStrategy()
  if (strategy == null)
  {
       RedirectToAction("Logout","Account");
  }

  strategy.LoadViewData( ViewData );

  return View(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-14T14:09:28.910

因为 ASP.NET MVC 倾向于约定而不是配置，所以以 Controller 结尾的类上的任何公共方法都被假定为操作方法。如果他们是私人的，他们不是。

所以在控制器类中拥有私有方法是完全可以的。

# c# - 在 ASP.NET MVC 中获取 MembershipUser

> ID：645805
> 
> 赞同：6
> 
> 时间：2009-03-14T11:51:24.293
> 
> 标签：c#, asp.net-mvc, asp.net-membership

我正在用 ASP.NET MVC 编写一个新应用程序。我创建了一个自定义 MembershipProvider，它将会员数据存储在我自己的数据库模式中。一切正常，但是如何在我的应用程序中获取 MembershipUser，以便我可以获得登录用户的用户密钥并加载与该用户相关的模型类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-14T12:13:41.697

您可以使用以下内容：

```
using System.Web.Security;

var user = Membership.GetUser(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T12:14:27.750

使用静态[Membership](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)类使用[GetUser](http://msdn.microsoft.com/en-us/library/40w5063z.aspx)检索用户。您需要在 web.config 文件中配置您的提供程序。登录时，您可能会从表单上的文本框中获取用户名。登录后，您可以从控制器的 User 属性中获取它。

```
string username = this.User.Identity.Name;
MembershipUser user = Membership.GetUser( username ); 
```

# asp.net - Enterprise Java Beans 视频教程

> ID：645809
> 
> 赞同：0
> 
> 时间：2009-03-14T11:56:59.243
> 
> 标签：asp.net, winforms, ejb, enterprise

是否有与 asp.net 和 windowsclient.net 学习部分相同口径的 Enterprise Java Bean 的视频教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T12:02:00.760

谷歌“EJB 视频”……一些帮助您入门

*   [EJB 教程](http://www.youtube.com/watch?v=xf_cXJFYlmY)
*   [EJB3 和 Web 服务](http://www.youtube.com/watch?v=5rwovAl_VNc)
*   [EJB3 和 Web 服务 II](http://www.youtube.com/watch?v=jA4eKtIdUPQ)
*   [Java 持久性和 EJB3](http://www.infoq.com/presentations/ejb-3)

不确定您提到的资源的质量是什么-这些东西对我来说似乎有用

# php - 在没有 Git 的情况下读取 Git 存储库

> ID：645814
> 
> 赞同：25
> 
> 时间：2009-03-14T12:05:35.697
> 
> 标签：php, git, version-control

我正在研究构建一个超小型（最好是 PHP）Web 应用程序的想法，该应用程序将（除其他外）作为 git 存储库的最小前端。

****任何无需执行“git”进程即可****读取 git 存储库**（“.git”文件夹）的库/文章？我正在寻找一个 API 来管理一个 git 存储库。我只对基本功能感兴趣，例如阅读最后一次提交（提交者的名称、提交说明、日期）、显示和遍历分支......**

 **谢谢，阿奈米

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-14T12:09:40.240

[这](http://www.kernel.org/pub/software/scm/git/docs/technical/api-index.html)（git API 文档）会有帮助吗？

以下是关于扩展 php 的资源列表（即提供围绕其他库代码的包装器）：

*   [扩展 php - 概述](http://www.whenpenguinsattack.com/2006/11/15/how-to-write-php-extensions/)
*   [用 C 编写 php 扩展模块](http://www.php.net/~wez/extending-php.pdf)
*   [PHP扩展编写](http://talks.somabo.de/200707_extension_writing.pdf)
*   [编写扩展](http://www.tuxradar.com/practicalphp/20/0/0)
*   [实用 PHP 编程：编写扩展](http://www.ipbwiki.com/Practical_PHP_Programming:Writing_extensions)
*   [扩展 PHP：示例](http://people.apache.org/~nabeel/php/examples/index.html)
*   [编写 PHP 扩展](http://talks.php.net/show/extending-php-apachecon2003)
*   [扩展写作第一部分：PHP和Zend简介](http://devzone.zend.com/node/view/id/1021)
*   [Zend API：破解 PHP 的核心](http://de.php.net/manual/en/internals2.ze1.zendapi.php)
*   [以 PHP 为核心：Zend 引擎的黑客指南](http://de.php.net/manual/en/internals2.php)
*   [使用 MS VC++ 2005 创建 PHP5 扩展](http://blog.slickedit.com/?p=128)
*   [编写 PHP 扩展 (C++)](http://www.cstruter.com/articles/replyarticle.aspx?ContentID=151)

此外，这些似乎也很相关：

*   [git-php](http://code.google.com/p/git-php/)
*   [git 库？](http://aseigo.blogspot.com/2009/01/git-library.html)
*   [纯 Python Git 库](https://launchpad.net/dulwich)
*   [Git 库？](http://kerneltrap.org/mailarchive/git/2008/4/28/1638484)
*   [libgit2 - GitHub 上真正的 git 库](http://kerneltrap.org/mailarchive/git/2008/10/31/3880864)和[libgit2 源代码](https://github.com/libgit2/libgit2)
*   [php-git，一个 libgit2 绑定](https://github.com/libgit2/php-git)
*   [ActionScript3 git 库](http://thillerson.blogspot.com/2008/05/as3-git-library.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-14T13:48:04.483

您可能还想查看[Cgit](http://hjemli.net/git/cgit/)项目，因为他们做了类似的事情（除了他们构建自己的 git 库——也避免`git`直接运行）。

[JGit](http://www.jgit.org/)是一个纯 Java 实现，可能对您有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-09-27T07:52:40.923

也可以试试[glip](http://fimml.at/#glip)，一个 git 的纯 php 实现，它是从 eWiki 中提取的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-24T03:37:23.917

我认为在这种情况下最好的开始可能是Git Wiki 上的[Interfaces Frontends And Tools](http://git.or.cz/gitwiki/InterfacesFrontendsAndTools)页面。
您可以在此处找到指向[eWiki](http://fimml.at/en/ewiki) ( [github](http://github.com/patrikf/ewiki) ) 的链接，该链接据说使用本地（在 PHP 中）访问 Git。

# specifications - 误读规格——你会怎么做？

> ID：645815
> 
> 赞同：0
> 
> 时间：2009-03-14T12:06:01.857
> 
> 标签：specifications

你的项目负责人给了你一个规格，并要求你提供一个估计。你欣然答应，给了他一个数字。您按工作/小时收费。

***但是当项目快要完成***时，您意识到您误读了规范并忘记在您的估算中包含一个大型功能。如果包含该功能，那么整个实施的成本将至少增加 40%。你会怎么做？您会尝试向您的项目所有者解释情况并要求更多的钱吗？

**编辑：当然，由于错误，必须对所有者说我错了。但问题是你会要求更多的美元来弥补缺失的规格吗？**

Eidt 2：我的问题第一次不正确！我只是在项目即将完成时才发现我的错误，而不是在初始阶段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-14T12:11:52.793

我会向我的项目负责人解释这种情况，向他展示缺少的功能不是**我给他的详细成本估算**的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T12:12:51.920

假设您在原始合同中包含了这项工作，而只是忘记了*做*，那么专业的做法是立即道歉并对错误表示遗憾。现在不是大喊大叫的时候。

从那里，您有几个选择，具体取决于项目的性质及其重要性、该客户对您的重要性以及您是否希望从客户那里获得未来的业务。

*   要求对项目进行财务延期；做额外的工作并获得报酬。
*   要求延长财务期限，但要提供一些让交易更甜蜜的东西，例如 3 个月的免费维护和支持。
*   完全免费地完成额外的工作，没有附加条件，因为这是你的错误。

我个人的偏好是选项＃2：立即承认错误，但尝试从这种情况中挽救可行的业务关系。

当然，如果你是敏捷的并且频繁地向客户发布，那么这种情况发生的可能性要小得多！让人们参与其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T12:16:59.007

一旦我意识到自己的错误，我就会承认错误。延长它只会导致更多的痛苦。更糟糕的是，提前改进估算并要求更多的钱，或者努力工作以希望你能弥补你的错误，结果却失败了，不得不在项目后期要求更多的钱？我认为只要您提供更改的理由，项目所有者会很高兴获得更好的估计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T12:07:51.430

> 您会尝试向您的项目所有者解释情况并要求更多的钱吗？

有什么可能的替代方案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T12:15:46.530

@ybo 是对的。解释，表明它不在您的详细估算中，并使用估算中的“错误和遗漏除外”条款来更正错误和遗漏。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-14T12:23:54.077

假设我对这个项目给出了一个固定的价格估计，这通常是我喜欢的工作方式，我会接受它并以原价做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T12:35:06.310

由于您收取 T&M（时间和材料）费用，因此您有两种选择：接受或坦白。

感谢你在这件作品中早早地抓住了这一点，而不是迟到了，那时你只需要把它吸起来。至少现在你可以（可能）在需要时摆脱它。

你所做的是：你向客户解释情况。你说你的这个错误增加了项目的时间（以及成本）40%（或其他），并说客户可以：

1.  免费离开（你会吃掉迄今为止所做的任何开发的成本）；或者
2.  你协商一个新的价格/估计，比原来高 30%。从而为您的错误补偿客户，但也为您提供更多的东西。如果不提供选项 (1)，您将无法做到这一点，否则客户可能会觉得您正在拉动诱饵。

或者，就像我说的，你可以把它吸起来然后去做。这可能会对您的交付时间表造成不利影响，因此它甚至可能不是一种选择。

# parsing - 算术表达式的 First & Follow 集

> ID：645824
> 
> 赞同：1
> 
> 时间：2009-03-14T12:13:54.490
> 
> 标签：parsing, grammar

我想知道我为这个语法制作的 FIRST 和 FOLLOW 集是否正确

```
S -> TS'
S' -> +TS' | -TS' | epsilon
T -> UT'
T' -> *UT' | /UT' | epsilon
U -> VX
X -> ^U | epsilon
V -> (W) | -W | W | epsilon
W -> S | number 
```

* * *

```
FIRST(S) = FIRST(T) = FIRST(U) = FIRST(V) = FIRST(W) = { ( , - , + , number ,     epsilon } 
FIRST(T') = { *, / , epsilon} 
FIRST(S') = { + , - , epsilon}
FIRST(X) = { ^ , epsilon}

FOLLOW(S) = FOLLOW(S') = FOLLOW(V) = {$}
FOLLOW(T) = {+ , - , $ }
FOLLOW(T')= {+, - , $ }
FOLLOW(U) = FOLLOW(X) = { * , / , + , - ,$ }
FOLLOW(W) = { ) , $ } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T12:46:31.323

只是一句话：

你说：

```
FIRST(U) = FIRST(V) 
```

这是正确的，但是，V 可以是 epsilon，这意味着 FIRST(U) = FIRST(V) + FIRST(X)

X 可以是 epsilon。

这些 epsilons 有时会非常令人沮丧。

还有一点要说。只有一些规则： - 大写字母是非终结符 - 小写是终结符 - epsilon 用于空规则 - $ 用于记录输入的结尾。

*   第一(a) = {a}
*   First(A,B) = First(A)，如果 epsilon 不在 First(A) 中
*   First(A,B) = First(A) + First(B)，如果 Epsilon 在 First(A)
*   第一(A|B) = 第一(A) + 第一(B)

*   如果 T 是开始符号，Follow(T) 包括 $

*   如果存在带有 ..TA. 的规则，Follow(T) 包括 First(A)。
*   如果存在规则 A -> ..T，Follow(T) 包括 Follow(A)
*   如果存在规则 A -> ..TB 并且 B 可以是 epsilon，Follow(T) 包括 Follow(A)
*   Follow(T) 从不包含 epsilon

例子：

```
E  = TE'
E' = +TE'|epsilon
T  = FT'
T' = *FT' | epsilon
F = (E) | id

First(E)   = First(T) = First(F) = {(, id}
First(E')  = {+, epsilon}
First(T)   = First(F) = {(, id}
First(T')  = {*, epsilon}
First(F)   = {(, id}

Follow(E)  = {$, )}
Follow(E') = Follow(E) = {$, )}
Follow(T)  = First(E') + Follow(E') = {$, ), +}
Follow(T') = Follow(T) = {$, ), +}
Follow(F)  = First(T') + Follow(T') + Follow(T) = {*, $, ), +} 
```

你的语法要复杂得多，也有点奇怪（你确定语法没有错误吗？），但你可以遵守规则。

# c# - 如何从字符串中实例化类型及其值？

> ID：645826
> 
> 赞同：2
> 
> 时间：2009-03-14T12:15:13.473
> 
> 标签：c#, .net

我有类似这样的代码：

```
class Foo {     
  Dictionary<Type, Object> _dict;

  void Create(string myType, string myValue)
  {
    var instance = Type.Instanciate(myType)  // How do I do this?
    if (var.IsPrimitive)
    {
      var.GetType().Parse(myValue)   // I know this is there...how to invoke?
      Dictionary[instance.GetType()] = instance;
    }
  }

  T GetValue<T>(T myType) { return (T)_dict[T]; }
}

// Populate with values
foo.Create("System.Int32", "15");
foo.Create("System.String", "My String");
foo.Create("System.Boolean", "False");

// Access a value
bool b = GetValue(b); 
```

所以我的问题是：
a）如何实例化类型
b）在支持 Parse 时从字符串解析类型值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-14T12:21:02.337

*   获取类型：[`Type.GetType()`](http://msdn.microsoft.com/en-us/library/system.type.gettype.aspx)
*   从 Type 对象实例化类型：（[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)您的代码中实际上不需要这个。）
*   从字符串转换：[`Convert.ChangeType`](http://msdn.microsoft.com/en-us/library/system.convert.changetype.aspx)

请注意，如果类型不在`mscorlib`或当前正在执行的程序集中，则需要包含程序集名称（如果是强名称，还需要包含版本信息）。

这是使用您的原始代码的完整示例。请注意，`GetValue`它不需要普通参数，因为您已经给出了类型参数 (T)。

```
using System;
using System.Collections.Generic;

public class Foo {     
  Dictionary<Type, Object> _dict = new Dictionary<Type, Object>();

  public void Create(string myType, string myValue)
  {
      Type type = Type.GetType(myType);
      object value = Convert.ChangeType(myValue, type);
      _dict[type] = value;
  }

  public T GetValue<T>() { return (T)_dict[typeof(T)]; }
}

class Test
{
    static void Main()
    {
        Foo foo = new Foo();

        // Populate with values
        foo.Create("System.Int32", "15");
        foo.Create("System.String", "My String");
        foo.Create("System.Boolean", "False");

        Console.WriteLine(foo.GetValue<int>());
        Console.WriteLine(foo.GetValue<string>());
        Console.WriteLine(foo.GetValue<bool>());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T12:20:24.507

> a) 我如何实例化类型

您正在寻找[System.Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)。

> b) 当支持 Parse 时，从字符串中解析类型值。

您正在寻找[System.Convert.ChangeType](http://msdn.microsoft.com/en-us/library/system.convert.changetype.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T12:29:30.990

```
using System.Reflection;

public void Create(string myType, string myValue)
{
    Type type = Type.GetType(myType);
    if (type.IsPrimitive)
    {
        MethodInfo Parse = type.GetMethod("Parse");
        Parse.Invoke(null, new object[] { myValue });
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-14T12:21:32.007

你可以试试 Activator.CreateInstance

它具有接收类型但不带参数的签名，或者带有作为参数的对象数组

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T13:35:37.430

还有一件事：在 Dictionary 中保留对新实例的引用可能会产生意想不到的后果： Dictionary 对该对象的引用将使其永远不会被收集。如果那是您的意图，那没关系，但请确保您首先了解所有含义。

# c# - .NET WinForm GC 问题

> ID：645836
> 
> 赞同：1
> 
> 时间：2009-03-14T12:22:35.593
> 
> 标签：c#, .net, winforms, garbage-collection

这段代码干净吗？

```
private void button1_Click(object sender, EventArgs e)
{
  frmCustomDialog f = new frmCustomDialog();
  if(f.ShowDialog() == DialogResult.OK)
    TextBox1.Text = f.MyCustomProperty;
} 
```

您是否需要关闭或处理表单 f 或其他任何内容？还是自动进行垃圾收集？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T12:27:37.313

是的，您应该处理以下表格：

```
private void button1_Click(object sender, EventArgs e)
{
    using (frmCustomDialog f = new frmCustomDialog())
    {
        if(f.ShowDialog() == DialogResult.OK)
        {
            TextBox1.Text = f.MyCustomProperty;
        }
    }
} 
```

`ShowDialog()`不会处理表单，因为您可以重复使用它并再次显示它。如果您不需要这样做，您应该自己处理它。

来自以下文档[`ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)：

> 与无模式表单不同，当用户单击对话框的关闭表单按钮或设置 DialogResult 属性的值时，.NET Framework 不会调用 Close 方法。相反，该表单被隐藏并且可以再次显示而无需创建对话框的新实例。因为显示为对话框的表单没有关闭，所以当您的应用程序不再需要该表单时，您必须调用该表单的 Dispose 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T12:37:39.613

如果您将表单显示为对话框表单（因为您使用 form.ShowDialog() 调用它），那么您必须手动处理该对象，因为关闭时不会自动调用表单的 Close 方法表格（表格被隐藏了）。

[你可以在这里](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)阅读更多。

# javascript - 模拟窗口。使用 javascript 在 Opera 中出现 onerror

> ID：645840
> 
> 赞同：8
> 
> 时间：2009-03-14T12:24:24.667
> 
> 标签：javascript, opera

我目前正在开发一个 Web 应用程序，我有一个 JS 日志记录机制，可以处理页面内的 js 代码未捕获的 Javascript 错误。我正在使用 window.onerror 来捕获所有此类错误并将它们记录在其他位置。

但是，问题在于没有 window.onerror 事件的 Opera。我能想到的一种方法是，对所有 js 函数代码进行字符串处理，并在正文加载后在这些函数中插入 try catch 块。虽然它在许多情况下不起作用，但是，它至少在某种程度上起作用。

我确信这种方法很糟糕，但是，我想不出更好的方法。请指教。

更新：现在，我正在调用下面的代码来尽可能多地捕获错误。

```
function OnBodyLoad()
{
        var allElements = document.getElementsByTagName("*");
        for(var cnt = 0;cnt < allElements.length;cnt++)
        {
            RegisterAllEvents(allElements[cnt]);
        }
}
function RegisterAllEvents(objToProcess){
    for(var cnt = 0;cnt < objToProcess.attributes.length;cnt++){
        if(IsAttributeAnEvent(objToProcess.attributes[cnt].name))
        {
            objToProcess.attributes[cnt].value =  'try{'+objToProcess.attributes[cnt].value+'}catch(err){LogError("'+ objToProcess.id+'"'+ ',err);}';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-15T20:37:55.363

Opera 11.60+ 支持`window.onerror`.

Opera 的[Dragonfly](http://dev.opera.com/articles/view/introduction-to-opera-dragonfly/)支持[远程调试](http://dev.opera.com/articles/view/remote-debugging-with-opera-dragonfly/)。您可能能够[破解它](https://dragonfly.opera.com/app/core-2-2/)（它都是用 JavaScript 编写的）并自己记录错误（不幸的[是，该协议尚未发布](http://dev.opera.com/articles/view/opera-dragonfly-architecture/#scopeprotocol)）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-06-14T10:48:37.383

你可以在 Opera 中替换 Error.prototype.toString ！

```
window.onerror = function (msg) {
  // send msg to http://errors.net/log.php, for example
  (new Image()).src = 'http://errors.net/log.php?msg=' + encodeURIComponent(msg);
};
if (({}).toString.call(window.opera) === '[object Opera]') {
 (function () {
   var x = Error.prototype.toString;
   Error.prototype.toString = function () {
     var msg = '';
     try {
       msg = x.apply(this, arguments);
       if (typeof (window.onerror) === "function") {
         window.onerror(msg, typeof (this) === 'object' ? this.stack : '', '');
       }
     } catch (e) {}
     return msg;
   };
 }());
} 
```

看来，它不适用于 Opera 11.50...仅适用于早期版本...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T17:22:31.893

这也发生在 Safari、AFAIK 上。

您当然可以做的是为所有 JS 代码创建一个全局 try/catch 块，而不是文本解析 - 如果您遇到以下情况，这可能会很棘手：

```
(function ($){
  $(function (){
  });
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-22T20:29:56.390

这里提到 Opera 现在支持 window.onerror：

[http://my.opera.com/ODIN/blog/2011/11/07/what-s-new-in-opera-development-snapshots-4-november-2011-edition](http://my.opera.com/ODIN/blog/2011/11/07/what-s-new-in-opera-development-snapshots-4-november-2011-edition)

但 window.onerror 似乎在 Opera Mini 中不起作用（例如用户代理“Opera/9.80 (J2ME/MIDP; Opera Mini/7.1.32422/30.3214; U; en) Presto/2.8.119 Version/11.10”）。这使得使用 Opera Mini 在手机上调试 JavaScript 变得非常困难。

# java - 使用 Groovy 解压缩存档

> ID：645847
> 
> 赞同：31
> 
> 时间：2009-03-14T12:28:54.533
> 
> 标签：java, groovy, zip, unzip

Groovy 中是否有内置支持来处理 Zip 文件（groovy 方式）？

还是我必须使用 Java 的 java.util.zip.ZipFile 来处理 Groovy 中的 Zip 文件？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-08-15T02:26:43.900

也许 Groovy 没有对 zip 文件的“本机”支持，但使用它们仍然很简单。

我正在使用 zip 文件，以下是我正在使用的一些逻辑：

```
def zipFile = new java.util.zip.ZipFile(new File('some.zip'))

zipFile.entries().each {
   println zipFile.getInputStream(it).text
} 
```

您可以使用以下`findAll`方法添加其他逻辑：

```
def zipFile = new java.util.zip.ZipFile(new File('some.zip'))

zipFile.entries().findAll { !it.directory }.each {
   println zipFile.getInputStream(it).text
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2010-02-10T16:31:15.420

根据我的经验，最好的方法是使用 Antbuilder：

```
def ant = new AntBuilder()   // create an antbuilder

ant.unzip(  src:"your-src.zip",
            dest:"your-dest-directory",
            overwrite:"false" ) 
```

这样你就不用负责做所有复杂的事情了——蚂蚁会替你处理。显然，如果您需要更精细的东西，那么这将不起作用，但对于大多数“仅解压缩此文件”的情况，这确实有效。

要使用 antbuilder，只需在类路径中包含 ant.jar 和 ant-launcher.jar。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-14T12:32:35.070

AFAIK，没有原生的方式。但是请查看[这篇文章](http://blog.xebia.com/2008/05/25/powerful-groovy/)，了解如何将`.zip(...)`方法添加到 File，这将非常接近您正在寻找的内容。你只需要制定一个`.unzip(...)`方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-25T14:28:36.773

Groovy 通用扩展项目为 Groovy 2.0 及更高版本提供了此功能：[https ://github.com/timyates/groovy-common-extensions](https://github.com/timyates/groovy-common-extensions)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-16T05:41:49.607

以下 groovy 方法将解压缩到特定文件夹 (C:\folder)。希望这可以帮助。

```
import org.apache.commons.io.FileUtils
import java.nio.file.Files
import java.nio.file.Paths
import java.util.zip.ZipFile

def unzipFile(File file) {
    cleanupFolder()
    def zipFile = new ZipFile(file)
    zipFile.entries().each { it ->
        def path = Paths.get('c:\\folder\\' + it.name)
        if(it.directory){
            Files.createDirectories(path)
        }
        else {
            def parentDir = path.getParent()
            if (!Files.exists(parentDir)) {
                Files.createDirectories(parentDir)
            }
            Files.copy(zipFile.getInputStream(it), path)
        }
    }
}

private cleanupFolder() {
    FileUtils.deleteDirectory(new File('c:\\folder\\'))
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-23T10:08:27.640

本文扩展了 AntBuilder 示例。

[http://preferisco.blogspot.com/2010/06/using-goovy-antbuilder-to-zip-unzip.html](http://preferisco.blogspot.com/2010/06/using-goovy-antbuilder-to-zip-unzip.html)

然而，作为一个主要问题 - 有没有办法找出在 groovy/java 中研究新方面时可以使用的所有属性、闭包、映射等？似乎有很多非常有用的东西，但是如何解锁他们隐藏的宝藏呢？现在，NetBeans/Eclipse 代码完整功能在我们这里所拥有的新语言丰富性中似乎受到了无可救药的限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T10:46:41.443

使用 AntBuilder 解压是个好方法。
第二种选择是使用第三方库 - 我推荐[Zip4j](http://www.lingala.net/zip4j/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-27T18:10:26.743

尽管将问题转向另一个方向，但我开始使用 Groovy 来构建我正在构建的 DSL，但最终使用 Gradle 作为起点来更好地处理我想做的许多基于文件的任务（例如.，解压缩和解压缩文件，执行其他程序等）。Gradle 建立在 groovy 可以做的基础之上，并且可以通过插件进一步扩展。

```
// build.gradle
task doUnTar << {
    copy {
        // tarTree uses file ext to guess compression, or may be specific
        from tarTree(resources.gzip('foo.tar.gz'))
        into getBuildDir()
    }
}

task doUnZip << {
    copy {
        from zipTree('bar.zip')
        into getBuildDir()
    }
} 
```

然后，例如（这会将`bar.zip`and提取`foo.tgz`到目录中`build`）：

```
$ gradle doUnZip
$ gradle doUnTar 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2011-08-25T02:19:36.207

```
def zip(String s){
    def targetStream = new ByteArrayOutputStream()
    def zipStream = new GZIPOutputStream(targetStream)
    zipStream.write(s.getBytes())
    zipStream.close()
    def zipped = targetStream.toByteArray()
    targetStream.close()
    return zipped.encodeBase64()
} 
```

# asp.net - 在没有 SSRS 的情况下处理 rdl/rdlc 报告文件？

> ID：645850
> 
> 赞同：3
> 
> 时间：2009-03-14T12:29:42.113
> 
> 标签：asp.net, sql-server, reporting-services, rdl

有没有办法在不使用 SSRS 的情况下在批处理中渲染和导出 rdl 文件？

我不想要 SSRS（IIS + 数据库）的开销，而是想在我自己的批处理/调度服务中处理这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:26:22.850

您可以想象在以托管代码编写的服务器进程中使用[报表查看器控件](http://msdn.microsoft.com/en-us/library/ms251671(VS.80).aspx)。您向控件传递一个数据源（可以是一个 DataTable 内存对象），它将返回一个字节流，您可以将它定向到一个文件中。

该控件有一个 UI，但可以绕过它。

# regex - 在每个 url 的末尾添加斜杠（需要为 nginx 重写规则）

> ID：645853
> 
> 赞同：68
> 
> 时间：2009-03-14T12:33:25.113
> 
> 标签：regex, nginx, rewrite

我尝试在每个网址末尾添加一个“/”：

example.com/art

应该

example.com/art/

我使用 nginx 作为网络服务器。

我需要为此重写规则..

为了更好地理解，请检查：

[http://3much.schnickschnack.info/art/projekte](http://3much.schnickschnack.info/art/projekte)

如果您按下大图片下的小缩略图，它会重新加载并显示此网址：

[http://3much.schnickschnack.info/art/projekte/#0](http://3much.schnickschnack.info/art/projekte/#0)

如果我现在在所有 url 上都有一个斜线（最后），它可以在不重新加载网站的情况下工作。

现在我在 nginx-http.conf 中有这个设置：

```
server {
  listen *:80;
  server_name 3much.schnickschnack.info;
  access_log /data/plone/deamon/var/log/main-plone-access.log;
  rewrite ^/(.*)$ /VirtualHostBase/http/3much.schnickschnack.info:80/2much/VirtualHostRoot/$1 last;
  location / {
    proxy_pass http://cache;
  }
} 
```

如何配置 nginx 以添加斜杠？（我认为我应该重写规则？）

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2010-10-12T08:11:48.733

更有可能我认为你会想要这样的东西：

```
rewrite ^([^.]*[^/])$ $1/ permanent; 
```

正则表达式转换为：“重写所有 URI，不带任何 '.' 在不以 '/' 结尾的 URI + '/'”或简单地说：“如果 URI 没有句点并且不以斜杠结尾，则在末尾添加一个斜杠”

只重写不带点的 URI 的原因使得任何具有文件扩展名的文件都不会被重写。例如，您的图像、css、javascript 等，如果使用一些自己重写的 php 框架，则可以防止可能的重定向循环

另一个常见的重写是：

```
rewrite ^([^.]*)$ /index.php; 
```

这非常简单地将所有没有句点的 URI 重写为您的 index.php（或您将从中执行控制器的任何文件）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-05-19T23:01:30.267

```
rewrite ^([^.\?]*[^/])$ $1/ permanent; 
```

避免休息 url 的查询字符串得到 / 标记。

例如

/myrest/do?d=12345

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-09-25T01:26:39.463

对于 nginx：

```
rewrite ^(.*[^/])$ $1/ permanent; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-12T18:05:37.497

奇怪的是这是谷歌的第一个结果，但没有一个令人满意的答案。我知道有两种很好的方法可以做到这一点。首先是直接检查请求是否会命中文件，如果不是，则仅应用重写条件。例如

```
server {
   # ...
   if (!-f $request_filename) {
     rewrite [^/]$ $uri/ permanent;
   }
   location / {
      # CMS logic, e.g. try_files $uri $uri /index.php$request_uri;
   }
   # ...
} 
```

*第二个，许多人更喜欢，因为如果*不是 100% 必要，他们宁愿避免任何使用，是使用 try_files 在它不会命中文件时将请求发送到命名的位置块。例如

```
server {
   # ...
   location / {
      try_files $uri $uri/ @cms;
   }
   location @cms {
      rewrite [^/]$ $uri/ permanent;
      # CMS logic, e.g. rewrite ^ /index.php$request_uri;
   }
   # ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-01T07:30:31.157

为时已晚，但我想分享我的解决方案，我遇到了斜杠和 nginx 的问题。

```
#case : 
# 1\. abc.com/xyz  => abc.com/xyz/
# 2\. abc.com/xyz/ => abc.com/xyz/
# 3\. abc.com/xyz?123&how=towork => abc.com/xyz/?123&how=towork
# 4\. abc.com/xyz/?123&ho=towork => abc.com/xyz/?123&how=towork 
```

这是我的解决方案

```
server { 
    ....
    # check if request isn't static file
    if ($request_filename !~* .(gif|html|jpe?g|png|json|ico|js|css|flv|swf|pdf|xml)$ ) {
       rewrite (^[^?]+[^/?])([^/]*)$ $1/$2 permanent;
    }
    ....
    location / {
    ....
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-24T08:59:11.230

```
server {
    # ... omissis ...

    # put this before your locations
    rewrite ^(/.*[^/])$ $1/ permanent;

    # ... omissis ...
} 
```

如果您希望`GET`阻止某些类型的请求（比如不是请求）执行此操作（通常是关于`POST`请求，因为`rewrite`将任何请求方法转换为`GET`，这可能会破坏您网站的某些动态功能），请添加一个`if`子句：

```
server {
    # ... omissis ...

    # put this before your locations
    if ($request_method = "GET" ) {
        rewrite ^(/.*[^/])$ $1/ permanent;
    }

    # ... omissis ...
} 
```

您也可以将其`rewrite`放在一个`location`块中（`if`也），以使其更具体。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-12T01:27:56.107

在 Wordpress 中使用来自 anthonysomerset 的重写，我尝试了由于 reirection 循环而访问 /wp-admin 仪表板的问题。但我使用上述条件解决了这个问题：

```
if ($request_uri !~ "^/wp-admin")
{
rewrite ^([^.]*[^/])$ $1/ permanent;
rewrite ^([^.]*)$ /index.php;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-11T19:17:22.010

此规则也解决了查询字符串的情况：

```
location ~ ^/([^.]*[^/])$ {
  if ($query_string) {
    return 301 $scheme://$host/$1/?$query_string;
  }
  return 301 $scheme://$host/$1/;
} 
```

> 正则表达式取自`@marc`的答案： `rewrite ^([^.\?]*[^/])$ $1/ permanent;`

> 添加了正则表达式中的额外斜线`^/`以提高可读性

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-16T06:29:36.127

如果 nginx 在代理后面使用 https，则此代码段会正确重定向`$scheme`

```
map $http_x_forwarded_proto $upstream_scheme {
    "https" "https";
    default "http";
}

server {
    ...
    location / {
        rewrite ^([^.\?]*[^/])$ $upstream_scheme://$http_host$1/ permanent;
    }
    ...
} 
```

在上游代理上传递`X-Forwarded-Proto`标头，例如：

```
location / {
    proxy_set_header X-Forwarded-Proto $scheme;
    ...
} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2009-03-14T12:48:01.087

尝试这个：`^(.*)$ http://domain.com/$1/ [L,R=301]`

这会将没有“/”的所有内容（$1）（状态代码 301）重定向到“$1/”

# ms-access - 禁用警告：您将大量数据复制到剪贴板上

> ID：645861
> 
> 赞同：4
> 
> 时间：2009-03-14T12:39:36.003
> 
> 标签：ms-access, vba, ms-office, ms-access-2007

在调试用 MS Access 2007 编写的查询时（问题在所有以前的版本中也一样），我将运行查询，然后将结果复制到 Excel 中。根据结果​​，我将批处理切换到 Access 以优化结果并返回查询的设计模式。在这一点上，我收到了一个恼人的警告： `you copied a large amount of data onto the clipboard. ...Do you want to save this data on the clipboard?` 我从来不想这样做。

MS Office 剪贴板被禁用，因此此功能在标准 Windows 剪贴板中发生。有没有办法禁用警告并假设 No 作为默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-08-04T02:59:15.220

有一个非常简单的解决方案。仅当剪贴板上有大量内容时才会出现警告消息。因此 - 在关闭之前确保那里只有少量的东西。

例如，在我写的宏中，我这样做：

```
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
Windows("iostatZd15.1").Activate
ActiveWindow.WindowState = xlNormal
ActiveSheet.Range("A1").Copy
ActiveWindow.Close 
```

倒数第二行（紧接收盘前）是一个“虚拟” - 一个用非常少量的数据简单地替换当前（BIG）剪贴板的命令。有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T12:50:10.427

我认为您可能必须禁用 MS 剪贴板。试试这个：

1.  退出所有正在运行的程序。
2.  单击开始，然后单击运行。键入 regedit 并单击确定。
3.  在注册表编辑器中，单击以选择以下子项（文件夹）：`HKey_CURRENT_USER\Software\Microsoft\Office\9.0\Common\General`
4.  在编辑菜单上，指向新建并单击 DWORD 值。选择新值 #1 后，键入 AcbControl，然后按 Enter。
5.  在编辑菜单上，单击修改。在“编辑 DWORD 值”对话框中，单击“基数”下的“十进制”。在数值数据框中键入 1。单击确定并退出注册表编辑器。

注意：您不能通过修改注册表来禁用（或启用）仅为单个 Office 程序的 Office 剪贴板。

这是[MS 知识库文章](http://support.microsoft.com/kb/207438)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T22:16:09.737

根据我的经验，只有在关闭应用程序时才会收到此消息。您是否在返回 Access 之前关闭 Excel？如果是这样，请不要关闭它，看看您是否不再收到该消息。

在尝试产生错误的说明后进行编辑：

避免错误消息的唯一方法是在进入设计视图之前关闭通知，如下所示：

```
 DoCmd.SetWarnings False 
```

并且您希望在完成编辑后重新打开它。

但是没有地方运行此代码，因为您只是使用 Access UI 来编辑查询。

我不太明白*为什么*这个警告被认为是一个问题。也许您正在粘贴、返回设计视图、更改标准、再次运行、再次粘贴？如果是这样，关闭 SetWarnings 可能会奏效。

如果您希望它自动发生，您可以使用 Screen.ActiveDatasheet 对象来执行此操作。您想要做的是编写一个函数：

```
 Public Function ChangeWarnings(bolSetting As Boolean) As Boolean
    DoCmd.Setwarnings bolSetting
  End Function 
```

...然后当您在数据表视图中打开查询时，在“立即”窗口中，键入以下两行：

```
 Screen.ActiveDatasheet.OnActivate = "=ChangeWarnings(False)"
  Screen.ActiveDatasheet.OnDeactivate = "=ChangeWarnings(True)" 
```

您当然也可以编写代码来为您设置它。

请注意——在打开或关闭另一个对象时，它不会“粘住” Screen.ActiveDatasheet 对象。它仅适用于分配事件操作时处于活动状态的数据表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-19T06:18:39.793

您可以设置表单的 OnClose 事件以清除剪贴板。

将以下代码放入数据库中的模块中。

```
Private Declare Function apiOpenClipboard Lib "User32" Alias
"OpenClipboard" (ByVal hWnd As Long) As Long

Private Declare Function apiEmptyClipboard Lib "User32" Alias
"EmptyClipboard" () As Long

Private Declare Function apiCloseClipboard Lib "User32" Alias
"CloseClipboard" () As Long

Function EmptyClipboard()
  If apiOpenClipboard(0&) <> 0 Then
    Call apiEmptyClipboard
    Call apiCloseClipboard
  End If
End Function 
```

然后在表单的关闭事件中使用：

```
EmptyClipboard 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-14T17:23:25.263

对于 Excel：

```
Fexcel = New Microsoft.Office.Interop.Excel.Application
Fexcel.DisplayAlerts = False 
```

对 Access 执行相同操作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-29T00:29:00.213

Application.CutCopyMode = False

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-02T07:33:23.800

我一直遇到这个问题。必须这样做似乎很愚蠢，但是以下解决方案将其杀死。

```
' Copy something small into the clipboard
Range("A1").Copy

' Turn off CutCopyMode i.e., the "crawling ants"
' Application.CutCopyMode = False solves a lot of problems, I do it as a precaution after I copy anything
Application.CutCopyMode = False 
```

CutCopyMode = FALSE 不会关闭所有剪贴板复制（如另一张海报所述）

# php - 正则表达式来解析 define() 内容，可能吗？

> ID：645862
> 
> 赞同：5
> 
> 时间：2009-03-14T12:40:24.223
> 
> 标签：php, regex

我对正则表达式很陌生，这对我来说太先进了。所以我在这里问专家。

**问题** 我想从 php define() 中检索常量/值

```
DEFINE('TEXT', 'VALUE'); 
```

基本上我希望一个正则表达式能够从上面的行返回常量的名称和常量的值。只是 TEXT 和 VALUE 。这甚至可能吗？

为什么我需要它？我正在处理语言文件，我想获取所有情侣（名称，值）并将它们放入数组中。我设法用 str_replace() 和 trim() 等来做到这一点。但这种方式很长，我相信用单行正则表达式可以使它更容易。

注意：VALUE 也可能包含转义的单引号。例子：

```
DEFINE('TEXT', 'J\'ai'); 
```

我希望我没有要求太复杂的东西。:)

问候

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-14T13:34:31.503

对于任何一种基于语法的解析，正则表达式通常都是一个糟糕的解决方案。即使是简单的语法（如算术）也有嵌套，并且正则表达式在嵌套（特别是）时会失败。

[幸运的是，PHP 通过token_get_all() 函数](http://au2.php.net/manual/en/function.token-get-all.php)让您可以访问 PHP 解释器使用的同一个词法分析器，从而为您提供了一个好得多的解决方案。给它一个 PHP 代码的字符流，它会将其解析为标记（“词素”），您可以使用非常简单的[有限状态机](http://en.wikipedia.org/wiki/Finite_state_machine)对其进行一些简单的解析。

运行这个程序（它作为 test.php 运行，所以它会自行尝试）。该文件被故意格式化为错误格式，因此您可以看到它轻松处理。

```
<?
    define('CONST1', 'value'   );
define   (CONST2, 'value2');
define(   'CONST3', time());
  define('define', 'define');
    define("test", VALUE4);
define('const5', //

'weird declaration'
)    ;
define('CONST7', 3.14);
define ( /* comment */ 'foo', 'bar');
$defn = 'blah';
define($defn, 'foo');
define( 'CONST4', define('CONST5', 6));

header('Content-Type: text/plain');

$defines = array();
$state = 0;
$key = '';
$value = '';

$file = file_get_contents('test.php');
$tokens = token_get_all($file);
$token = reset($tokens);
while ($token) {
//    dump($state, $token);
    if (is_array($token)) {
        if ($token[0] == T_WHITESPACE || $token[0] == T_COMMENT || $token[0] == T_DOC_COMMENT) {
            // do nothing
        } else if ($token[0] == T_STRING && strtolower($token[1]) == 'define') {
            $state = 1;
        } else if ($state == 2 && is_constant($token[0])) {
            $key = $token[1];
            $state = 3;
        } else if ($state == 4 && is_constant($token[0])) {
            $value = $token[1];
            $state = 5;
        }
    } else {
        $symbol = trim($token);
        if ($symbol == '(' && $state == 1) {
            $state = 2;
        } else if ($symbol == ',' && $state == 3) {
            $state = 4;
        } else if ($symbol == ')' && $state == 5) {
            $defines[strip($key)] = strip($value);
            $state = 0;
        }
    }
    $token = next($tokens);
}

foreach ($defines as $k => $v) {
    echo "'$k' => '$v'\n";
}

function is_constant($token) {
    return $token == T_CONSTANT_ENCAPSED_STRING || $token == T_STRING ||
        $token == T_LNUMBER || $token == T_DNUMBER;
}

function dump($state, $token) {
    if (is_array($token)) {
        echo "$state: " . token_name($token[0]) . " [$token[1]] on line $token[2]\n";
    } else {
        echo "$state: Symbol '$token'\n";
    }
}

function strip($value) {
    return preg_replace('!^([\'"])(.*)\1$!', '$2', $value);
}
?> 
```

输出：

```
'CONST1' => 'value'
'CONST2' => 'value2'
'CONST3' => 'time'
'define' => 'define'
'test' => 'VALUE4'
'const5' => 'weird declaration'
'CONST7' => '3.14'
'foo' => 'bar'
'CONST5' => '6' 
```

这基本上是一个寻找模式的有限状态机：

```
function name ('define')
open parenthesis
constant
comma
constant
close parenthesis 
```

在 PHP 源文件的词法流中，并将这两个常量视为 (name,value) 对。在这样做时，它处理嵌套的 define() 语句（根据结果）并忽略空格和注释以及跨多行工作。

**注意：**我故意让它忽略了函数和变量是常量名称或值的情况，但您可以根据需要将其扩展为。

还值得指出的是，PHP 在字符串方面非常宽容。它们可以用单引号、双引号或（在某些情况下）根本不带引号来声明。这可能（正如 Gumbo 所指出的那样）是对常量的模棱两可的引用，您无法知道它是什么（无论如何也没有保证的方式），因此您可以选择：

1.  忽略那种风格的字符串（T_STRING）；
2.  查看是否已经用该名称声明了一个常量并替换它的值。但是，您无法知道调用了哪些其他文件，也无法处理有条件创建的任何定义，因此您无法确定是否有任何东西绝对是常数或它具有什么价值；或者
3.  您可以忍受这些可能是常量（这不太可能）的可能性，并将它们视为字符串。

我个人会选择（1）然后（3）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T12:57:05.167

这是可能的，但我宁愿使用[get_defined_constants()](http://de.php.net/manual/en/function.defined.php)。但是要确保你所有的翻译都有一些共同点（就像所有以 T 开头的翻译一样），这样你就可以将它们与其他常量区分开来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T13:30:16.727

试试这个正则表达式来查找`define`调用：

```
 /\bdefine\(\s*("(?:[^"\\]+|\\(?:\\\\)*.)*"|'(?:[^'\\]+|\\(?:\\\\)*.)*')\s*,\s*("(?:[^"\\]+|\\(?:\\\\)*.)*"|'(?:[^'\\]+|\\(?:\\\\)*.)*')\s*\);/is 
```

所以：

```
$pattern = '/\\bdefine\\(\\s*("(?:[^"\\\\]+|\\\\(?:\\\\\\\\)*.)*"|\'(?:[^\'\\\\]+|\\\\(?:\\\\\\\\)*.)*\')\\s*,\\s*("(?:[^"\\\\]+|\\\\(?:\\\\\\\\)*.)*"|\'(?:[^\'\\\\]+|\\\\(?:\\\\\\\\)*.)*\')\\s*\\);/is';
$str = '<?php define(\'foo\', \'bar\'); define("define(\\\'foo\\\', \\\'bar\\\')", "define(\'foo\', \'bar\')"); ?>';
preg_match_all($pattern, $str, $matches, PREG_SET_ORDER);
var_dump($matches); 
```

我知道那`eval`是邪恶的。但这是评估字符串表达式的最佳方式：

```
$constants = array();
foreach ($matches as $match) {
    eval('$constants['.$match[1].'] = '.$match[1].';');
}
var_dump($constants); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T12:55:38.167

您可能不需要过度考虑正则表达式的复杂性——这样的事情可能就足够了

```
 /DEFINE\('(.*?)',\s*'(.*)'\);/ 
```

这是一个 PHP 示例，展示了如何使用它

```
$lines=file("myconstants.php");
foreach($lines as $line) {
    $matches=array();
    if (preg_match('/DEFINE\(\'(.*?)\',\s*\'(.*)\'\);/i', $line, $matches)) {
        $name=$matches[1];
        $value=$matches[2];

        echo "$name = $value\n";
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T14:02:04.060

不是每个文本问题都应该用正则表达式来解决，所以我建议你说明你想要实现的目标，而不是如何实现。

所以，与其使用不是很有用的 php 解析器，也不是使用完全不可调试的正则表达式，为什么不写一个简单的解析器呢？

```
<?php

$str = "define('nam\\'e', 'va\\\\\\'lue');\ndefine('na\\\\me2', 'value\\'2');\nDEFINE('a', 'b');";

function getDefined($str) {
    $lines = array();
    preg_match_all('#^define[(][ ]*(.*?)[ ]*[)];$#mi', $str, $lines);

    $res = array();
    foreach ($lines[1] as $cnt) {
        $p = 0;
        $key = parseString($cnt, $p);
        // Skip comma
        $p++;
        // Skip space
        while ($cnt{$p} == " ") {
            $p++;
        }
        $value = parseString($cnt, $p);

        $res[$key] = $value;
    }

    return $res;
}

function parseString($s, &$p) {
    $quotechar = $s[$p];
    if (! in_array($quotechar, array("'", '"'))) {
        throw new Exception("Invalid quote character '" . $quotechar . "', input is " . var_export($s, true) . " @ " . $p);
    }

    $len = strlen($s);
    $quoted = false;
    $res = "";

    for ($p++;$p < $len;$p++) {
        if ($quoted) {
            $quoted = false;
            $res .= $s{$p};
        } else {
            if ($s{$p} == "\\") {
                $quoted = true;
                continue;
            }
            if ($s{$p} == $quotechar) {
                $p++;
                return $res;
            }
            $res .= $s{$p};
        }
    }

    throw new Exception("Premature end of line");
}

var_dump(getDefined($str)); 
```

输出：

```
array(3) {
  ["nam'e"]=>
  string(7) "va\'lue"
  ["na\me2"]=>
  string(7) "value'2"
  ["a"]=>
  string(1) "b"
} 
```

# python - 通过 Python 脚本更改提示工作目录

> ID：645864
> 
> 赞同：4
> 
> 时间：2009-03-14T12:45:32.980
> 
> 标签：python, windows, scripting

是否可以通过 Python 脚本更改 Windows 命令提示符工作目录？

例如

```
>> cd
>> c:\windows\system32
>> make_decision_change_dir.py
>> cd
>> c:\windows 
```

我尝试了一些不起作用的方法：

```
import os
os.chdir(path) 
```

* * *

```
import os, subprocess
subprocess.Popen("chdir /D \"%s\"" %path, shell=True) 
```

* * *

```
import os, subprocess
subprocess.Popen("cd \"%s\"" %path, shell=True) 
```

* * *

```
import os, subprocess
subprocess.Popen("CD=\"%s\"" %path, shell=True) 
```

据我了解并观察到这些操作会更改当前进程的工作目录 - 这是 Python 进程，而不是执行它的提示。

谢谢。

更新

我想要更改的路径是动态的（基于我正在处理的项目，构建位置的完整路径更改）因此我想用 Python 编写解决方案，而不是使用 Windows 批处理文件。

更新

我最终一起破解了一个批处理文件来做到这一点；（谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T12:52:06.257

我不清楚你想在这里做什么。您是否想要一个可以从 Windows 命令提示符运行的 Python 脚本，该脚本将更改 Windows 命令会话的工作目录？

如果是这样，我有 99.9% 的把握这是不可能的。正如您自己所说，该`python.exe`过程是与 Windows 不同的过程，`cmd.exe`您在 Python 中执行的任何操作都不会影响命令提示符。

您可能可以通过 Windows API 执行某些操作，方法是向 Windows 发送击键或其他操作，但它会非常脆弱。

我能想到的仅有的两个实用选项是将 Python 脚本包装在批处理文件中：

1.  从 Python 脚本输出您想要的目录，读取批处理文件和 CD 中的输出。
2.  从批处理文件启动您的 Python 脚本，允许您的 Python 脚本启动一个新`cmd.exe`窗口并获取批处理文件以关闭原始命令窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T15:33:59.330

我有一个 Python 脚本可以更轻松地在文件树中移动：[xdir.py](http://nedbatchelder.com/code/utilities/xdir_py.html)

简而言之，我有一个 xdir.py 文件，它将 Windows 命令写入标准输出：

```
# Obviously, this should be more interesting..
import sys
print "cd", sys.argv[1] 
```

然后是一个 xdir.cmd 文件：

```
@echo off
python xdir.py %* >%TEMP%\__xdir.cmd
call %TEMP%\__xdir.cmd 
```

然后我创建一个 doskey 别名：

```
doskey x=xdir.cmd $* 
```

最终结果是我可以输入

```
$ x subdir 
```

并更改为子目录。

我在上面链接的脚本做了更多的事情，包括记住历史、维护一堆目录、接受目录的简写等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T14:09:16.320

一种常见的解决方案是两部分脚本。

第 1 部分是 Python，它创建一个包含适当 CD 命令的临时 .BAT 文件。

第 2 部分是临时 .BAT 文件。

花式cd.bat

```
python figurethepath.py >temp.bat
temp.bat 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-15T12:33:24.827

正如人们所提到的，子进程（即您的程序）不能更改父进程（即终端）的当前工作目录。这就是为什么您需要每个人都描述的两个步骤。在大多数 shell 中，有一种方法可以制作宏或函数来执行这个两步功能。

例如，在 中`bash`，您可以创建一个别名来计算路径并更改当前工作目录，类似于[@S.Lott](https://stackoverflow.com/questions/645864/python-scripting-changing-prompt-working-directory/645967#645967)为 Windows 描述的内容：

```
alias my_cd='TMP=`compute_path.py`; cd $TMP;' 
```

请注意，该`cd`命令仍在父进程（终端）中被解释，它能够更改自己的当前工作目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T13:02:21.190

[`subprocess.Popen()`文档页面](http://docs.python.org/library/subprocess.html#subprocess.Popen)说将为子进程创建一个子进程，因此任何工作目录更改都将是该子进程的本地。

> 如果 cwd 不为 None，则**子进程的**当前目录将在执行之前更改为 cwd。请注意，搜索可执行文件时不考虑该目录，因此您不能指定程序相对于 cwd 的路径。

这对于在子过程中明确完成的任何更改都是相同的，类似于问题中出现的命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-12T16:42:26.063

```
imoprt os
os.system("start cmd.exe /k \"cd /d c:\\windows\\system32 & python make_decision_change_dir.py\"") 
```

# css - * CSS hack 的范围是什么？

> ID：645865
> 
> 赞同：5
> 
> 时间：2009-03-14T12:46:05.100
> 
> 标签：css, cross-browser, css-hack

我一直在寻找解决我遇到的 CSS 问题的方法。我曾经使用过一个为 Internet Explorer 创建自定义规则。

```
margin-top:45px;
*margin-top:0px; 
```

这个 hack 是否适用于所有 IE 浏览器？这个 hack 是否出现在任何版本的 Firefox 或 Safari 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-14T12:50:32.670

这适用于 IE7 及以下版本。但请注意，*这不是有效的 CSS*，它可能随时中断。有关各种 CSS hack 及其影响的浏览器的更全面列表，请参见[此处。](http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml)

> 尽管 Internet Explorer 7 更正了属性名称带有下划线或连字符前缀时的行为，但**其他非字母数字字符前缀的处理方式与 IE6 中的相同**。因此，如果您在属性名称前添加星号 (*) 等非字母数字字符，则该属性将在 IE 中应用，而不是在其他浏览器中应用。与连字符和下划线方法不同，CSS 规范没有保留星号作为前缀，因此随着 CSS 规范的发展，使用这种 hack 可能会导致意外行为。

我强烈建议您重新考虑您是否真的需要此 hack，以及是否没有更好的方法来做您想做的事。

# c# - HttpRequest.Files.Count 小于零

> ID：645868
> 
> 赞同：0
> 
> 时间：2009-03-14T12:47:08.310
> 
> 标签：c#, httprequest

HttpRequest.Saveas 将以下内容保存在文件中

```
POST /VoicetrustAP/call.aspx HTTP/1.1
Cache-Control: max-age=3600, max-stale=0
Content-Length: 31988
Content-Type: multipart/form-data; boundary=osb_inet_multipart_boundary
Accept: */*
Expect: 100-continue
Host: 172.20.143.166
Referer: http://172.20.143.166/VoicetrustAP/call.aspx
User-Agent: AvayaVXI/2.0

--osb_inet_multipart_boundary
Content-Disposition: form-data; name="audioDataStream"; filename=20090313115600.ulaw
Content-Type: audio/x-wav
Content-Length: 31578

RIFFR{  WAVEfmt      @  @      fact    {  data { ...data removed....
--osb_inet_multipart_boundary
Content-Disposition: form-data; name="callID"

00000056
--osb_inet_multipart_boundary
Content-Disposition: form-data; name="nextDialogID"

VTDC_CHECK_TD_AUDIO_DATA_ENR
--osb_inet_multipart_boundary-- 
```

但是 HttpRequest.Files.Count 小于零？为什么？

它是 HttpRequest.Files 中的错误吗？

我还可以使用表单变量访问数据。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T19:34:12.013

I suspect although I haven't test it myself that a "less than zero" count actually means "I don't know how many files there are, I have received all of the incoming data stream yet".

# visual-studio - VS2008安装项目安装额外的依赖文件

> ID：645870
> 
> 赞同：3
> 
> 时间：2009-03-14T12:47:59.727
> 
> 标签：visual-studio, installation

在`VS2008`我有一个安装项目，它将一个应用程序的主要输出安装到应用程序文件夹中，并将`Primary Output`类库项目安装到应用程序目录的子文件夹中。

这两个项目都引用了几个第三方程序集（一些`DevExpress` **UI**控件）。

当我安装应用程序时，子文件夹已成功创建，并且类库程序集正确放置在那里。但是，所有第三方程序集也会复制到此文件夹（它们位于主应用程序文件夹*和*子文件夹中）。

另一种完全奇怪的行为 (IMO) 是，如果我从子文件夹中手动删除额外的程序集，然后我在 app 文件夹中运行可执行文件，则删除的程序集会再次复制到子文件夹中。

然后我修改了安装项目，只从它的 Debug 文件夹安装类库程序集（而不是`Primary Output`. 当我安装应用程序时，`DevExpress`DLL*仍然*会进入这两个文件夹。（但是，如果我删除额外的程序集并运行可执行文件，那么这次额外的依赖项不会重新出现。）

这里发生了什么？我想要的只是我添加到子文件夹中的类库`Setup Project`，以及应用程序文件夹中的可执行文件和所有依赖项。

真正让我大吃一惊的是我从这个解决方案中迁移了这个解决方案，`VS2005`而我以前从未遇到过这个问题。是否存在`VS2008`导致这种情况的设置？

# sql-server-2008 - sql profiler 会显示传入的参数值吗？

> ID：645876
> 
> 赞同：0
> 
> 时间：2009-03-14T12:53:30.933
> 
> 标签：sql-server-2008, sql-server-profiler

我正在使用这个第 3 方 sql 跟踪应用程序，因为我安装了 sql server express 2008（只是试用版）。

它只显示传递到服务器的 sql，带有 @p1 之类的参数，而不是参数的实际值，这对我来说并不是那么有用。

内置的 sql profiler 是否会向您显示 .net Web 应用程序传入的实际值，例如 '2342' 或 a = 200 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:13:27.063

是的，它显示了带有已替换参数的查询。当我调试时，我通常只是从探查器中复制 SQL 并将其粘贴到 Management Studio 中并运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T13:30:38.720

它可以。在定义配置文件模板时，您可以指定要查看哪些 sql“事物”以及要为每个“事物”查看哪些列（信息）。因此，如果您没有看到参数，您可能需要修改您正在使用的配置文件模板。

# actionscript - 在动作脚本中获取图像原始宽度和高度

> ID：645878
> 
> 赞同：1
> 
> 时间：2009-03-14T12:56:58.803
> 
> 标签：actionscript

我在 Flex 3 中使用 AS3 创建新图像，但似乎无法获得原始图像的确切尺寸。percentHeight 和 percentWidth 到 100 可以完成这项工作，但 ObjectHandlers 的限制要求我以像素为单位设置图像比例。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-15T01:58:13.370

**注意：**这也适用于在没有ObjectHandler控件的情况下显示Image原始尺寸，只需删除那些不适用的行。

经过数小时的解决方案，我通过actionscript论坛找到了自己的答案，事实上，只有一个解决方案，我很惊讶其他地方没有这样的话题。

```
private function init():void {
    var image:Image = new Image();
    image.source = "http://www.colorjack.com/software/media/circle.png";
    image.addEventListener(Event.COMPLETE, imageLoaded);
    /* wait for completion as Image control is asynchronous,
     * which mean ObjectHandler will attempt to load asap
     * and you are not able to get the correct dimension for scaling.
     * EventListener fixed that.
     */
    this.addChild(image);
    //whenever you scale ObjectHandler control, the image is always fit by 100%
    image.percentHeight = 100;
    image.percentWidth = 100;
}

private function imageLoaded(e:Event):void{
    var img:Image = e.target as Image;
    trace("Height ", img.contentHeight);
    trace("Width ", img.contentWidth);
    var oh:ObjectHandles = new ObjectHandles();
    oh.x = 200;
    oh.y = 200;
    oh.height = img.contentHeight;
    oh.width = img.contentWidth;
    oh.allowRotate = true;
    oh.autoBringForward = true;
    oh.addChild(img);
    genericExamples.addChild(oh);
} 
```

# cocoa-touch - UIImageViews - 层

> ID：645882
> 
> 赞同：0
> 
> 时间：2009-03-14T13:03:35.540
> 
> 标签：cocoa-touch, core-animation

我有 2 个 UIImageViews， IMG1 和 IMG2 。有些人我希望 IMG1 出现在 IMG2 上方，而在其他时候我希望 IMG2 出现在 IMG1 上方。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-14T13:11:22.917

尝试使用

```
[self.view bringSubviewToFront:myImageView]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T14:12:08.450

还，

```
[self.view exchangeSubviewAtIndex:imageView1Index withSubviewAtIndex:imageView2Index]; 
```

如果您知道各个视图的索引，可能会这样做。

# c - 用于简单 C dll 的良好 IDE/编译器

> ID：645883
> 
> 赞同：3
> 
> 时间：2009-03-14T13:04:23.090
> 
> 标签：c, windows, ide, compiler-construction

我正在尝试反汇编一个 C/C++ DLL，并且已经取得了一些进展，但我想创建自己的 C DLL，它具有与原始导出相同的功能，并比较反汇编。

Visual Studio 添加了很多废话，当我删除废话并构建我的项目时，缺少预期的 DLL。

我需要一个轻量级的、最好是 IDE 的工具来编辑和构建非常简单的 C 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:12:00.577

看看[代码::块](http://www.codeblocks.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-14T14:25:57.513

[Dev-C++](http://www.bloodshed.net/devcpp.html)是一个不错且快速的 IDE，与 MingW 配合得很好。

但这一切都被问过和回答[过](https://stackoverflow.com/questions/161437/best-ides-for-c-development)......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-14T18:18:16.160

> 我需要一个轻量级的、最好是 IDE 的工具来编辑和构建非常简单的 C 库。

我发现进行集成的纯 C 语言 Win32 开发的最佳方法之一是使用免费提供的[Lcc Win32 编译器](http://www.cs.virginia.edu/~lcc-win32/)，它带有内置的 IDE，包括资源编辑器。事实上，它真的非常轻巧，可以通过一些手动调整从 USB 记忆棒上运行。

它确实是一个只有 6 mb 的[非常小的下载](http://www.q-software-solutions.de/downloaders/downloader/show_download_locations)，您甚至可以下载一个可选的[Win32 API 帮助文件](ftp://ftp.cs.virginia.edu/pub/lcc-win32/win32hlp.exe)，这在开发时非常有用。

该编译器还附带一个[C 教程](http://www.q-software-solutions.de/pub/tutorial.pdf)，以及[详细说明如何使用集成 Win32 资源编辑器“wedit”](http://www.q-software-solutions.de/pub/manual.exe)的良好用户文档，还有一个关于更复杂开发任务的[高级手册。](http://www.q-software-solutions.de/pub/advanced.pdf)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-14T13:06:36.190

[GCC](http://gcc.gnu.org/) + 任何文本编辑器如[VIM](http://www.vim.org/)是一个非常轻量级的选择。

对于 Windows 开发，您只需要在[MinGW中](http://www.mingw.org/)

**编辑**：如果您迫切需要 IDE，您还可以使用 Eclipse 中的 MinGW 工具和[CDT](http://www.eclipse.org/cdt/)插件。尽管由于安装了 Eclipse，它*增加*了解决方案的重量，但这是我真正用来构建我的小型 DLL（在我的情况下为 JNI 包装器）的方法。

您可以设置小型和直接的 makefile，或者让 Eclipse 自动为您完成，并且只专注于源文件（*.h、*.c）。

使用这种方法而不是其他 IDE 的最佳部分是您不需要 Eclipse 来进一步构建 DLL，因为生成的底层项目文件是标准的，可以由 MinGW（或任何 Unix 发行版）内的集成开发人员直接使用，例如 make、configure , automake 等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-14T16:12:05.930

MinGW 添加了自己的废话。正确安装您的 VC express 并为您省去一生的麻烦。

顺便说一句，您不需要将 Visual Studio 用于其编译器，反之亦然。缺少构建 dll 的奇怪之处可能是因为您没有找到正确的路径。

如果你正在构建 C DLL，你真的会从它的命令行工具集和实用程序、sdks、简单配置等中受益。MS 锁定专有扩展被广泛使用（在你试图模拟另一个 dll 的情况下），你需要的最后一件事正在追逐交叉编译器问题..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-14T14:47:55.010

我将投票支持[Code::Blocks](http://www.codeblocks.org)，这是我使用的（尽管也安装了 VS 2008）。它非常简单和轻量级，但基本上具有您期望从 IDE 中获得的所有功能。它带有几个用于各种 C 和 C++ 开发的预定义项目模板，包括 DLL 模板。

下载包含 MinGW 的版本，您将获得一个完整的轻量级 IDE，可以开始编译。如果您愿意，还可以轻松地将其配置为使用 Visual Studio 编译器而不是 gcc。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-14T17:51:47.767

尝试[打开 Watcom](http://openwatcom.org/index.php/Main_Page)。一个跨平台的产品，受到社区的大力支持，让您可以在 DOS、Windows、OS/2 等多种平台上进行开发。最近发布了 1.8 版。确实有一个轻量级的 IDE

# c++ - 进程暂停后无法恢复

> ID：645888
> 
> 赞同：0
> 
> 时间：2009-03-14T13:08:31.737
> 
> 标签：c++, multithreading, winapi, process, resume

CreateProcess 已暂停，但无法恢复。

这是我的代码：

```
bool success=CreateProcess(m_Process,
             NULL,
             NULL,
             NULL,
             FALSE,
             NORMAL_PRIORITY_CLASS||CREATE_SUSPENDED,
             NULL,
             NULL,
             &suInfo,
             &procInfo);

if(!success){
    MessageBoxA(0,"Could not create process...","ERROR",MB_OK);
    return 1;
    }

    //we created it

//all good so go!
ResumeThread(procInfo.hThread); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-14T13:12:56.673

删除“|”之一。这最终成为一个，因为它在您的情况下是一个逻辑表达式。这个常量是 DEBUG_PROCESS，所以你正在调试子进程。

# python - 有没有办法从 Python 模块构建类似 C 的 DLL？

> ID：645892
> 
> 赞同：7
> 
> 时间：2009-03-14T13:11:49.500
> 
> 标签：python

我有一个 Python 模块，只有常规的全局函数。我需要从另一个只能调用 C DLL 的业务域脚本环境调用它。无论如何构建我的 Python 模块，以便其他代码可以像从 DLL 导出的标准 C 函数一样调用它？这是针对 Windows 环境的。我知道 IronPython，但据我所知，它只能构建 .NET 程序集，它们不能作为 C DLL 函数调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-14T13:24:45.740

看看[这篇](http://www.codeproject.com/KB/cpp/embedpython_1.aspx)Codeproject 文章。一种方法是将您的 python 函数包装在 C dll 中并将其公开给被调用者。

COM 是解决这个问题的二进制协议。但是您必须将这个 python dll 包装在 COM 包装器中。并在调用端添加一些代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T13:41:54.903

标准解决方案是在您的应用程序中嵌入 Python 解释器（它已经是一个 C DLL）。

[https://docs.python.org/extending/windows.html#using-dlls-in-practice](https://docs.python.org/extending/windows.html#using-dlls-in-practice)

[http://docs.python.org/extending/embedding.html](http://docs.python.org/extending/embedding.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-14T13:49:25.853

Py2exe 可以从 python 代码生成 COM dll，通过编译和嵌入 python 代码 + 解释器。AFAIK，它还不支持常规 DLL。为此，请参阅 dirkgently 关于自己嵌入 python 的答案。

# c# - OGNL 库的 .NET 端口

> ID：645900
> 
> 赞同：0
> 
> 时间：2009-03-14T13:17:59.687
> 
> 标签：c#, open-source, ognl

有谁知道这里[OGNL 库](http://www.opensymphony.com/ognl/)的一个好的 .NET 端口？看起来我可以使用这样的东西，到目前为止我发现的唯一一个是在 SourceForge 上[，](http://sourceforge.net/projects/ognlnet/)自 2005 年以来一直没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T13:22:20.737

我也一直在寻找这样的东西。不幸的是，我知道没有任何东西可以在实际项目中使用。对不起！

一个可能有帮助的建议是直接给作者发电子邮件。通常，他们放弃该项目是因为他们发现另一个现有项目的工作更符合他们试图完成的目标。

# wcf - WCF Post / WebRequest Works - WebClient 没有

> ID：645902
> 
> 赞同：3
> 
> 时间：2009-03-14T13:19:51.867
> 
> 标签：wcf, httpwebrequest, webclient

我有一个 WCF 服务声明如下：

```
[OperationContract, XmlSerializerFormat]
[WebInvoke(UriTemplate = "ProessUpload",
   BodyStyle = WebMessageBodyStyle.Bare,
   RequestFormat = WebMessageFormat.Xml)]
void ProcessUpload(ProductConfig stream); 
```

我正在尝试使用 WebClient 调用此服务，但我总是从服务器收到响应 400 (BadRequest)。但是，如果我使用 HttpWebRequest，WCF 会消耗我的帖子并正确响应 200。我还能够使用 Fiddler 成功构造一个请求来调用 WCF 服务。

Web客户端代码

```
WebClient webClient = new WebClient();
webClient.Headers.Add("Content-Type", "application/xml");//; charset=utf-8
try
{
  string result = webClient.UploadString("http://jeff-laptop/SalesAssist.ImageService/Process", "POST", data2);
}
  catch (Exception ex)
{
  var e = ex.InnerException;
} 
```

HttpWebRequest 代码

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://jeff-laptop/SalesAssist.ImageService/Process");
request.ContentType = "application/xml";
request.Method = "POST";
request.KeepAlive = true;

using (Stream requestStream = request.GetRequestStream())
{
  var bytes = Encoding.UTF8.GetBytes(data2);
  requestStream.Write(bytes, 0, bytes.Length);
  requestStream.Close();
}

var response = (HttpWebResponse)request.GetResponse();
var abc = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

正在发送的 XML

```
var data2 = @"<Product><Sku>3327</Sku><NameProduct</Name><Category>Bumper</Category><Brand Id='3'><Collection>14</Collection></Brand></Product>"; 
```

为什么 HttpWebRequest 有效而 WebClient 无效？我看不出通过 Fiddler 发送的标头有真正的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:42:21.377

在发送字符串之前，请尝试在 WebClient 上设置[Encoding属性。](http://msdn.microsoft.com/en-us/library/system.net.webclient.encoding.aspx)由于您没有指定它，我怀疑它默认为 ASCII。引用 UploadString[参考页](http://msdn.microsoft.com/en-us/library/d0d3595k.aspx)。

> 在上传字符串之前，此方法使用 Encoding 属性中指定的编码将其转换为 Byte 数组。此方法在传输字符串时阻塞。要在等待服务器响应的同时发送字符串并继续执行，请使用 UploadStringAsync 方法之一。

```
 webClient.Encoding = Encoding.UTF8; 
```

# html - 有没有办法使用 CSS 突出显示关键字？

> ID：645916
> 
> 赞同：3
> 
> 时间：2009-03-14T13:35:46.180
> 
> 标签：html, css

嗯，这就是上下文：我正在编辑谷歌文档中的乳胶源文件，我想知道是否可以使用 CSS 为任意关键字和包含在美元符号中的文本着色。

例如，给定这个 HTML 文件：

```
<html><body>
\section{Heading 1}
<br>
This is a simple file with a formula $x_1 = x_0 + 1$.
<br>
Here it ends \cite{somebody}.
</body></html> 
```

我想让 CSS 让我看到这个：

```
\section{标题 1}
这是一个简单的文件，公式为 $x_1 = x_0 + 1$。
到此结束\cite{somebody}。

```

我认为它无法完成，因为没有标记隔离我想要格式化的这些构造。

干杯。

编辑：似乎示例输出没有像我预期的那样着色，尽管它在编辑视图中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-14T13:40:42.393

您需要插入一个[span](http://www.w3.org/TR/html401/struct/global.html#h-7.5.4)元素来环绕您想要突出显示的那些位，然后使用不同的背景颜色或其他样式设置它们。

所以不，纯基于 CSS 的解决方案是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-14T13:39:26.813

你的正确。仅在 CSS 中无法做到这一点。然而，在 Javascript 中这样做非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-15T00:55:00.917

正如 Arve 和 Gary 所指出的，我认为纯 CSS 解决方案是不可能的。

但是，如果您能够在您的上下文中使用 javascript 是可能的。我正在使用Alex Gorbatchev 的[SyntaxHighlighter](http://code.google.com/p/syntaxhighlighter/)进行语法高亮任务。只要 SyntaxHighlighter 可以产生的样式符合您的需求，我就会推荐它。

然而，还有一些工作要做。它使用“画笔”插件架构，虽然没有为乳胶定义画笔，但创建画笔应该比从头构建语法高亮解决方案更快。

# .net - NHibernate 中只读列表的最佳实践是什么

> ID：645918
> 
> 赞同：10
> 
> 时间：2009-03-14T13:36:14.387
> 
> 标签：.net, arrays, nhibernate, list, domain-driven-design

我正在研究的域模型具有根聚合和子实体。类似于以下代码：

```
class Order
{
   IList<OrderLine> Lines {get;set;}
}

class OrderLine
{
} 
```

现在我希望我的订单控制线路。像这样的东西：

```
class Order
{
   OrderLine[] Lines {get;}

   void AddLine(OrderLine line);
} 
```

此时我们使用以下模式：

```
class Order
{
   private IList<OrderLine> lines = new List<OrderLine>();
   OrderLine[] Lines {get {return this.lines;}}

   void AddLine(OrderLine line)
   {
      this.orders.Add(line);
   {
} 
```

NHibernate 直接映射到行字段。

现在问题...

*   在这种情况下你会练习什么？
*   有没有人使用方法：public IEnumerable GetLines()
*   您使用什么作为属性的返回类型？可能是 ReadOnlyCollection 或 IEnumerable；
*   可能这不是最好的提问地方吗？请建议。

更新：似乎 IEnumerable 获胜，但解决方案仍然不完美......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-14T22:05:21.603

我这样做：

```
public class Order
{
      private ISet<OrderLine> _orderLines = new HashedSet<OrderLine>();

      public ReadOnlyCollection<OrderLine> OrderLines
      {
          get { return new List<OrderLine>(_orderLines).AsReadOnly(); }
      }

      public void AddOrderLine( OrderLine ol )
      {
          ...
      }
} 
```

然后，当然，在映射中，NHibernate 被告知使用 _orderLines 字段：

```
<set name="OrderLine" access="field.camelcase-underscore" ... >
...
</set> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-14T21:01:23.647

我使用的模式是：

```
class Order
{
   private List<OrderLine> lines = new List<OrderLine>();

   IEnumerable<OrderLine> Lines { get { return this.lines; } }

   void AddLine(OrderLine line)
   {
       this.orders.Add(line);
   }
} 
```

如果您使用的是 NET 3.5，您将获得使用 LINQ 的 IEnumerable 所需的所有搜索功能，并且隐藏您的集合实现。

返回 OrderLine[] 的问题是您的集合可以在外部进行修改，例如：

```
Order.Lines[0] = new OrderLine(). 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-14T21:44:57.300

我将集合公开为 ReadOnlyCollection，并使用 AddX 和 RemoveX 方法来维护集合。我们刚刚切换到 3.5，我正在考虑改为公开 IEnumerable。在大多数情况下，使用 NHibernate 时，子级具有对父级的引用，因此公开 Add 和 Remove 方法可以让您保持这种关系：

```
 public void AddPlayer(Player player)
    {
        player.Company = this;
        this._Players.Add(player);
    }

    public void RemovePlayer(Player player)
    {
        player.Company = null;
        this._Players.Remove(player);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T22:01:36.607

如果我要公开一个不应修改的列表，那么我使用 IEnumerable 和 yield。我发现尝试将 ReadOnlyCollections 与 NHiberante 结合使用很麻烦。

使用这种方法，您仍然拥有通过 NHibernate 映射和填充的专用线路字段；但是，对集合的公共访问是通过迭代器执行的。您不能使用此 Lines 属性在基础列表中添加或删除。

例如：

```
public IEnumerable<OrderLine> Lines {
    get {
        foreach (OrderLine aline in lines) {
            yield return aline;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-25T07:49:31.903

我花了几天时间寻找 NHibernate 中只读列表的最佳方法。这次讨论对我形成适合我们项目的讨论帮助很大。

我开始使用一种方法：

1.  支持字段用于存储集合
2.  IEnumerable<T> 用于公开集合以强制客户端使用 AddLine() 和 RemoveLine() 方法。
3.  除了 IEnumerable 之外，还使用 ​​ReadOnlyCollection 类型。

代码：

```
public class Order
{
    private readonly IList<OrderLine> lines = new List<OrderLine>();

    public virtual IEnumerable<OrderLine> Lines
    {
        get
        {
            return new ReadOnlyCollection<OrderLine>(lines);
        }
    }

    public void AddLine(OrderLine line)
    {
        if (!lines.Contains(line))
        {
            this.lines.Add(line);
            line.Order = this;
        }
    }

    public void RemoveLine(OrderLine line)
    {
        if (lines.Contains(line))
        {
            this.lines.Remove(line);
            line.Order = null;
        }
    }
}

public class OrderLine
{
    public Order Order { get; set; }
} 
```

# image - 如何转换图像（即 pdf）以用于 LaTeX 文档？

> ID：645932
> 
> 赞同：4
> 
> 时间：2009-03-14T13:47:45.077
> 
> 标签：image, pdf, latex

转换各种图像、位图和矢量以用于 LaTeX 和 PDFLaTeX 文档的首选方法是什么？

有很多方法可以做到这一点，一些利用各种 LaTeX 包中的标准包含，另一些则提供更好的结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-14T14:06:25.000

如果您想使用 pdflatex 生成最终输出，则可以将 PDF 图像直接包含到 LaTeX 文档中，但如果您想生成 dvi 文件，则不能。

pdflatex 可以使用 PDF、PNG 和 JPEG

latex/dvips 可以使用 PS、EPS

查看更多详情：

*   [在 LaTeX 文件中包含图像](http://www.johndcook.com/blog/2008/07/24/including-images-in-latex-files/)
*   [观看您在 LaTeX 中命名图形文件的名称](http://www.johndcook.com/blog/2008/10/11/watch-what-you-name-graphics-files-in-latex/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-14T14:01:33.263

我将位图转换为 PNG，将矢量图形（例如 SVG）转换为 PDF。*pdflatex*理解 PNG 和 PDF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-16T00:50:13.400

如果您有一个“PDF 格式”的图像，并且您不想将其包含为 pdf，您可能需要先使用 .pdf 提取完整的图像数据`pdfimages`。其他转换可能仅以降低的分辨率渲染图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T19:44:20.773

基本问题是 a) 您希望以不同方式处理光栅和矢量图像，并且 b) 这会引入潜在的陷阱。

要做的“正确”事情在一定程度上取决于您的最终输出。

如果您的最终输出将是一个 .pdf 文件，并且您现在不需要 pstricks 或其他任何东西，那么您最好只使用 pdflatex 直接生成文件。

在这种情况下：

*   将所有矢量图存储为 .pdf
*   将所有光栅图形存储为 .png（或 jpeg，如果它们最初是 jpeg）
*   使用 graphicsx 包和 \includegraphics{filename-without-suffix}

如果您不执行上述操作，您的光栅图形将被转换为 jpeg，并且可能会获得压缩伪影。如果您可以选择输出，则 png 是最好的选择。

如果您打算使用 .dvi 文件，那么您将需要 .eps 的所有内容。（只要生成边界框文件，就可以 gzip 这些文件）。

如果你小心，你可以做到这两点。我将所有矢量图存储为（压缩的）.eps，因为有一些 .pdf 无法做到的事情 .eps 可以。我将所有光栅图形存储为 .png。使用 make，我可以根据需要为 .dvi 或 .pdf 输出动态生成这些规范版本的临时副本。

上面有人指出了文件名问题。你想避免“。” 在文件名中，并始终避免在您的乳胶文件本身中使用后缀。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-14T13:57:05.570

我目前首选的方式是使用`bmeps`并`epstopdf`包含在 MikTeX 中。用于生成 png 的 pdf 和 eps 版本。

在一个名为 的文件`convertimage.bat`中，

```
 bmeps -p3 -c -e8f -tpng %1.png > %1.eps
epstopdf %1.eps 
```

通过包含在路径和写作中使用`convertimage.bat filenameminusextension`

包含在使用的文件中，

```
 \begin{figure}[h]
\begin{center}
\includegraphics[scale=0.25]{path/to/fileminuxextension}
\caption{My caption here}
\label{somelabelforreference}
\end{center}
\end{figure} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-16T00:09:35.870

正如 John D. Cook 所说，您可用的图像格式取决于您使用的是`latex`还是`pdflatex`.

我发现[ImageMagick](http://imagemagick.com/script/index.php)是一种在格式之间转换图像的有用工具。处理位图图像，加上 ps/pdf/eps（带有 ghostscript）和[无数其他](http://imagemagick.com/script/formats.php)的。可通过`apt`,`macports`等获得。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-14T13:58:41.633

我只使用 Encapsulated PostScript (.eps) 图形（首先使用 NetPBM 转换位图），因为无论如何我总是使用 dvips + ps2pdf，然后我使用 \includegraphics{file}。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-17T19:08:57.773

我使用 Mac，所以我使用 GraphicConverter 加载图像并导出为 PDF。当我绘制图表时，我使用 Omnigraffle，它可以让我导出为 PDF。在 Windows 上，我曾经使用支持 EPS 的 Visio，嵌入也没有问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-14T13:56:08.440

我总是包含 PNG 格式的图像。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-17T19:05:43.663

如果你用 pdflatex 编译你的代码，那么你也可以使用`\includegraphics`在 pdf 中包含图像（你必须包含包`graphix`

# python - 在 Windows 中将 MySQL 与 Python 集成

> ID：645943
> 
> 赞同：102
> 
> 时间：2009-03-14T13:53:28.807
> 
> 标签：python, mysql, windows

我发现在我的 Windows 系统中很难将 MySQL 与 Python 一起使用。

我目前正在使用 Python 2.6。我尝试使用提供的安装脚本编译 MySQL-python-1.2.3b1（应该适用于 Python 2.6？）源代码。安装脚本运行，它不报告任何错误，但它不生成 _mysql 模块。

我还尝试为 Python 2.5 设置 MySQL，但没有成功。使用 2.5 的问题是 Python 2.5 是用 Visual Studio 2003 编译的（我使用提供的二进制文件安装它）。我的 Windows 系统上有 Visual Studio 2005。因此 setuptools 无法生成 _mysql 模块。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2009-05-11T10:43:27.043

[python-mysqldb 的下载页面](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)。该页面包括适用于 Python 2.5、2.6 和 2.7 的 32 位和 64 位版本的二进制文件。

还有[关于摆脱弃用警告](http://sourceforge.net/forum/message.php?msg_id=5808948)的讨论。

**更新**：这是一个旧答案。目前，我建议使用 PyMySQL。它是纯 python，因此它同样支持所有操作系统，它几乎是 mysqldb 的直接替代品，它也适用于 python 3。安装它的最佳方法是使用 pip。您可以从[此处安装它（](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip)[此处](https://stackoverflow.com/a/12476379/7581)有更多说明），然后运行：

```
pip install pymysql 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2010-07-13T22:44:36.323

这可能读起来像你爷爷的建议，但这里的所有答案都没有提到最好的方法：去安装[ActivePython](http://www.activestate.com/activepython/downloads)而不是 python.org windows 二进制文件。我真的很想知道为什么在 Windows 上进行 Python 开发如此简单——直到我安装了 activestate python。我不隶属于他们。这只是简单的事实。把它写在每一面墙上：**Windows 上的 Python 开发 = ActiveState**！然后你就[`pypm install mysql-python`](http://code.activestate.com/pypm/mysql-python/)一切顺利。**没有编译狂欢。没有奇怪的错误。没有恐怖。**五分钟后开始编码并开始实际工作。这是在 Windows 上进行的唯一方法。真的。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-03T19:13:31.087

As Python newbie learning the Python ecosystem I've just completed this.

1.  Install setuptools [instructions](https://stackoverflow.com/questions/309412/how-to-setup-setuptools-for-python-2-6-on-windows)

2.  Install MySQL 5.1\. Download the 97.6MB MSI from [here](http://dev.mysql.com/downloads/mysql/5.1.html#win32) You can't use the essentials version because it doesnt contain the C libraries.
    Be sure to select a custom install, and mark the development tools / libraries for installation as that is not done by default. This is needed to get the C header files.
    You can verify you have done this correctly by looking in your install directory for a folder named "include". E.G C:\Program Files\MySQL\MySQL Server 5.1\include. It should have a whole bunch of .h files.

3.  Install Microsoft Visual Studio C++ Express 2008 from [here](http://www.microsoft.com/express/vc/) This is needed to get a C compiler.

4.  Open up a command line as administrator (right click on the Cmd shortcut and then "run as administrator". Be sure to open a fresh window *after* you have installed those things or your path won't be updated and the install will still fail.

5.  From the command prompt:

    easy_install -b C:\temp\sometempdir mysql-python

    That will fail - which is OK.

    Now open site.cfg in your temp directory C:\temp\sometempdir and edit the "registry_key" setting to:

    registry_key = SOFTWARE\MySQL AB\MySQL Server 5.1

    now CD into your temp dir and:

    python setup.py clean

    python setup.py install

    You should be ready to rock!

6.  [Here](http://www.kitebird.com/articles/pydbapi.html) is a super simple script to start off learning the Python DB API for you - if you need it.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-15T08:11:23.177

我发现一个位置是一个人为python2.6成功构建了mysql，分享链接，[http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe](http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe)

...您可能会在导入 MySQLdb 时看到一个警告，这很好，不会伤害任何东西，

C:\Python26\lib\site-packages\MySQLdb__init__.py:34: DeprecationWarning: sets 模块已弃用 sets import ImmutableSet

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-11-29T14:13:38.903

What about [pymysql](http://code.google.com/p/pymysql/)? It's pure Python, and I've used it on Windows with considerable success, bypassing the difficulties of compiling and installing mysql-python.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-14T14:04:00.233

你不是唯一一个遇到 Python 2.6 和 MySQL 问题的人 ( [http://blog.contriving.net/2009/03/04/using-python-26-mysql-on-windows-is-nearly-impossible/](http://blog.contriving.net/2009/03/04/using-python-26-mysql-on-windows-is-nearly-impossible/) ) . 这是一个解释它应该如何在 Python 2.5 下运行[http://i.justrealized.com/2008/04/08/how-to-install-python-and-django-in-windows-vista/](http://i.justrealized.com/2008/04/08/how-to-install-python-and-django-in-windows-vista/) 祝你好运

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-07-17T22:37:27.703

您可以尝试使用 myPySQL。它真的很容易使用；windows不需要编译，即使你出于任何原因需要编译它，你只需要安装Python和Visual C（不是mysql）。

[http://code.google.com/p/mypysql/](http://code.google.com/p/mypysql/)

祝你好运

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-27T18:24:37.257

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)上的预编译二进制文件对我有用。

1.  `MySQL_python-1.2.5-cp27-none-win_amd64.whl`使用 zip 提取程序打开文件。
2.  将内容复制到 `C:\Python27\Lib\site-packages\`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-27T21:11:21.087

在 Python 3.4 上，我使用 pip install mysqlclient从[http://www.lfd.uci.edu/~gohlke/pythonlibs/安装了 mysqlclient，它正在工作。](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-14T14:05:12.023

Sourceforge 上有[用于 MySQL-Python（2.4 和 2.5）的 Windows 二进制文件](http://sourceforge.net/project/showfiles.php?group_id=22307&package_id=15775)。你试过那些吗？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-02T19:53:09.837

如果您正在寻找 Python 3.2，这似乎是我迄今为止找到的最佳解决方案

*   对于 Python 2.4 - 3.2 [PyMySQL](https://github.com/petehunt/PyMySQL)
*   适用于 Python 2.3 - 2.6[适用于 Python 的 MySQL](http://sourceforge.net/projects/mysql-python)

来源：[http ://wiki.python.org/moin/MySQL](http://wiki.python.org/moin/MySQL)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-03-14T04:15:55.337

因为我在（pylons/pyramid）virtualenv 中运行 python，所以我无法运行之前链接到的二进制安装程序（有帮助）。

我按照威利的回答的步骤遇到了问题，但我确定问题是（可能）我正在运行 Windows 7 x64 安装，这将 mysql 的注册表项放在稍微不同的位置，特别是在我的情况下（注意：我我正在运行版本 5.5）在：“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\MySQL AB\MySQL Server 5.5”。

但是，“HKEY_LOCAL_MACHINE\”不能包含在路径中，否则会失败。

此外，我必须在第 3 步和第 4 步之间重新启动。

在完成所有这些工作后，IMO 从 cygwin 运行整个 python 开发环境会更聪明。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-08-28T13:27:27.097

Got sick of the installation troubles with MySQLdb and tried [pymysql](http://www.pymysql.org/) instead.

Easy setup;

```
git clone https://github.com/petehunt/PyMySQL.git
python setup.py install 
```

And APIs are pretty much the same.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-15T00:25:59.247

您可能还想考虑使用[Cygwin](http://cygwin.org)，它在存储库中有 mysql python 库。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-10-11T17:20:14.247

您还可以将[pyodbc](http://code.google.com/p/pyodbc/)与[MySQL 连接器/ODBC](http://dev.mysql.com/downloads/connector/odbc/)一起使用，以在 Windows 上使用 MySQL。 [Unixodbc](http://www.unixodbc.org/)也可用于使代码在 Linux 上兼容。Pyodbc 使用标准的 Python [DB API 2.0](http://www.python.org/dev/peps/pep-0249/)，因此如果您坚持在 MySQL/PostgreSQL/SQLite/ODBC/JDBC 驱动程序等之间进行切换，应该相对轻松。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-02-21T21:17:50.403

赞成itsadok的回答，因为它也引导我安装python 2.7，它位于：http: [//www.codegood.com/archives/129](http://www.codegood.com/archives/129)

# asp.net - 如何在网站上动态显示 SVN 版本？

> ID：645945
> 
> 赞同：6
> 
> 时间：2009-03-14T13:55:17.350
> 
> 标签：asp.net, svn, revision

我的网站是 SVN repo 的签出版本。我的意思是 .svn 文件夹放在网络服务器上。我不使用网络发布。

我想在页脚中显示当前的项目修订（整个网站）。我怎样才能做到这一点？

如果我使用网络发布，我可以确定构建/发布的修订并将其写为静态 html。

那么如何动态获得修订？直接读取 .svn 文件？有没有更好的方法？

我看到了其他这样的问题，但答案是使用 SubWCRev.exe，不幸的是它不能接受。

**编辑：** *Tarn*在提交时给出了关于 SVN 钩子的有趣想法。还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-14T14:06:46.357

使用[关键字替换](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.special.keywords.html)。启用替换要显示修订信息的文件，并在`$Revision: 144 $`此处放置关键字，例如 。

注意

> $Rev$ 展开以显示文件更改的最后一个修订版，而不是它更新到的最后一个修订版

（见上面的链接）。如果要显示全局存储库修订号，最好使用[svnversion](http://svnbook.red-bean.com/en/1.4/svn.ref.svnversion.re.html)。

另请参阅*相关*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T14:05:05.207

您可以为 SVN 编写挂钩。作为结帐过程的一部分，您可以编写一个挂钩来使用当前构建更新文件。然后您可以在您的站点上读取、缓存和显示该版本号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T15:19:47.837

如果要显示整个/存储库或分支的最新修订号，关键字替换将无济于事，我认为更好的解决方案是使用构建管理/持续集成软件，如[CruiseControl.NET](http://cruisecontrol.net/)或[TeamCity](http://www.jetbrains.com/teamcity/)具有良好的构建脚本.

副本：

*   [如何将 SVN 修订号与我的 ASP.NET 网站同步？](https://stackoverflow.com/questions/163/how-do-i-sync-the-svn-revision-number-with-my-aspnet-web-site)
*   [ASP.NET 显示 SVN 修订号](https://stackoverflow.com/questions/2308/asp-net-display-svn-revision-number)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-14T16:02:35.767

上一个关于 SO 的问题有一些可能对您有用的讨论：[始终使用 SVN 提交相同的文件](https://stackoverflow.com/questions/5948/always-commit-the-same-file-with-svn/5978)。

I've always done it by running a script that would use sed to replace a comment with the current timestamp in my $Rev$ file. That way, the file contents would change and Subversion would commit it. Somewhat manual, but you could write a script to first do that, and then do the actual `svn commit` command.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-14T14:00:57.790

我唯一能想到的是使用 svn CLI 二进制文件并从页面调用它们。这样您就可以去掉其余部分并获取修订号。不过说实话，这是一个有点丑陋的解决方案。

# air - Adobe AIR 应用程序如何找出它是从哪个 URL 下载的？

> ID：645953
> 
> 赞同：3
> 
> 时间：2009-03-14T14:00:06.373
> 
> 标签：air

我们有一个可以从多个域下载的 Adob​​e AIR 应用程序。当它运行时，它应该连接回下载它的站点以获取数据以显示给用户。

到目前为止，我们为每个域都有一个单独的应用程序构建，其中包含硬编码的站点 URL。我想知道 AIR 应用程序有没有办法在运行时找出下载它的 URL（或至少是域）？

我们想要的是从所有不同域提供的单个可下载二进制文件，它仍然可以知道它的原始 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-21T17:39:48.253

没有检索此类信息的功能，如果您考虑一下，那将毫无意义。

最稳定的方法是在包中包含一个外部配置文件。

请注意，您可以使用 ANT 为最终部署自动执行此过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-14T14:38:58.557

没有直接的方法可以做到这一点。

以下是一些想到的选项：

*   为每个站点构建不同的版本（这可以自动化）
*   让用户在首次启动时选择站点
*   尝试使用您拥有的任何资源（时区、语言等）来猜测它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-14T14:09:34.587

这应该如何工作？我看到的唯一解决方案（独立于 AIR）是您使用应用程序提供一个额外的（属性）文件，其中包含从中下载的 URL。所以你不需要为每个域构建一个单独的应用程序，而只需用它打包一个不同的域文件。然后应用程序读取这个文件并执行一些上下文相关的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T23:07:33.283

我现在正试图解决完全相同的问题。看起来您可以修改安装徽章以将参数传递给空中应用程序。从我收集到的值仅在安装或从徽章启动时传递。

我计划研究的是，“AIRBadge.as”中的参数之一是 _appURL，它是徽章所在页面的 URL。我还不知道这个值是否会以某种方式归结为已安装的 AIR 应用程序。但它可能是一个有用的属性。我最终希望 AIR 安装过程将其注入应用程序描述符 xml，但我并没有屏住呼吸。

查看此页面：http: [//archive.davidtucker.net/2008/01/10/air-tip-5-passing-arguments-to-an-application-on-install/#](http://archive.davidtucker.net/2008/01/10/air-tip-5-passing-arguments-to-an-application-on-install/#)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T15:05:28.977

当用户下载时，您可以将他们的 IP 地址存储在您的中央数据库中。然后，当应用程序第一次安装并运行时，应用程序可以访问您的中央数据库以将其 IP 地址与他们下载的服务器相匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-20T03:56:02.547

具有特定名称的 cookie 存储在下载页面上，而 AIR 应用程序正在寻找它？虽然这可能不适用于直接下载。由于知道用于下载它的特定浏览器将是一个问题，因此可能也很难实现。

# iphone - 是否可以在 cocos2d 中使用pickerview？

> ID：645955
> 
> 赞同：2
> 
> 时间：2009-03-14T14:01:31.097
> 
> 标签：iphone, cocos2d-iphone

### 复制：

> [如何使用 cocos2d 在 iphone 应用程序中使用选取器视图？](https://stackoverflow.com/questions/614004/how-can-i-use-picker-view-in-iphone-application-using-cocos2d)

是否可以使用 cocos2d 在 iphone 应用程序中使用 pickerview ？如果可能，那么我可以在我的应用程序中执行此操作吗？我可以在哪里获取此信息。如果没有，那么在 pickerview 中执行此操作的其他解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-14T23:36:32.587

我根本没有研究 cocos2d，但我假设如果你仍然可以访问你的应用程序中的 UIKit 名作，你应该能够创建一个 UIPickerView 的实例。

但是，我不确定您是否能够以您想要的方式使用它，而无需进行一些子类化或编写您自己的。选择器视图旨在供用户从选择中选择项目，而不是由应用程序自动旋转...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-15T00:29:23.427

是的，你可以在 Cocos2DIPhone 中使用 UIKit 控件。

您只需要将它们直接附加到应用程序窗口。

文档和 cocos2d 留言板上都有示例。Riq 在留言板上的问题/反馈也非常出色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T14:50:55.440

我使用以下步骤在我的应用程序中使用了 UIImagePicker 控制器：

```
// 1 - instantiate your picker (in my case UIImagePicker):
pickerController = [[UIImagePickerController alloc] init];
pickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
pickerController.delegate = self;

// 2 - add the picker view as a subview of the actual scene
[[Director sharedDirector] openGLView] addSubview:pickerController.view]; 
```

它对我有用，但过渡不是动画的。

# c# - 如何从另一个对象中更改表单的组件？

> ID：645962
> 
> 赞同：1
> 
> 时间：2009-03-14T14:05:58.683
> 
> 标签：c#

我有一个对象，它在我的 form1-window 中调用。如何从该对象中更改来自 form1-object 的任何内容，例如标签或进程栏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-14T14:10:25.350

让您的对象引用您的表单将是一个糟糕的（圆形）设计。使用接口或委托（回调）。

```
// untested code
class MyObjectClass
{
   public delegate void Reportback(int percentage);

   public void DoSomething(Reportback callBack) { ...; callback(i*100F/total); ...}
}

class Form1: Form
{
   private void reportProgress(int percent) { ...; progressbar1.value = percent; }

   void SomeMethod() {  myObject1.DoSomething(reportprogress); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T21:11:11.093

一般来说，当您发现自己需要一个对象来操作另一个对象的私有字段时，您的设计需要工作。

例如，执行某种长期运行业务逻辑的类不应该更新`ProgressBar`. 首先，这不是它的工作。其次，将业务逻辑的功能与用户界面的实现细节相结合。

如果该类在执行其长期运行的任务时简单地引发事件，那就更好了。例如，看看这个类：

```
public class BusinessLogic
{
    public event EventHandler ProgressChanged;

    private int _Progress;
    public int Progress
    {
        get { return _Progress;  }
        private set
        {
            _Progress = value;
            EventHandler h = ProgressChanged;
            if (h != null)
            {
                h(this, new EventArgs());
            }
        }
    }
} 
```

每当此类中的任何方法设置`Progress`属性时，`ProgressChanged`都会引发事件。在您的表单中，您可以使用如下逻辑实例化对象：

```
private BusinessLogic Task;

private void Form1_Load(object sender, EventArgs e)
{
    Task = new BusinessLogic();
    Task.ProgressChanged += Task_ProgressChanged;
}

void Task_ProgressChanged(object sender, EventArgs e)
{
    taskProgessBar.Value = ((BusinessLogic) sender).Progress;
} 
```

现在，每次`Task`对象中的方法设置`Progress`属性时，`ProgressBar`表单中的 都会更新。

当然，这比让对象更新要多得多的代码`ProgressBar`。但是看看你能从中得到什么。如果您必须将表单重构为两个表单，并将任务移动到一个新表单，您不必接触`BusinessLogic`类。如果您将 your`ProgressBar`从窗体上的控件移到 a`ToolStripProgressBar`上`ToolStrip`，则不必接触`BusinessLogic`类。如果您认为进度报告不重要，则不必接触`BusinessLogic`班级。

从本质上讲，这种方法可以保护`BusinessLogic`类不必了解有关用户界面的*任何信息。*随着程序的发展，这使得更改业务逻辑和用户界面变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T14:13:08.837

我同意 Henk... 但无论如何，如果您更改控件的可见性，您可以修改表单上的任何项目，甚至还有一个属性可以做到这一点。

# coldfusion - ColdFusion 错误：coldfusion.compiler.FactoredNodeAggregation 无法转换为 Coldfusion.compiler.ASTfunctionDefinition

> ID：645979
> 
> 赞同：2
> 
> 时间：2009-03-14T14:19:13.847
> 
> 标签：coldfusion

> Coldfusion.compiler.FactoredNodeAggregation 不能强制转换为 coldfusion.compiler.ASTfunctionDefinition

尝试用具有一些实质性工作流程改进的新自定义标签替换非常非常旧的旧版自定义标签时，我收到上述错误。我对如何调试只有一个想法：注释掉代码的不同部分（二进制搜索样式），直到它编译为止，缩小搜索范围，直到找到问题代码。

有没有其他人以前见过这个错误？知道它可能是什么吗？从上下文来看，听起来我正在尝试使用...某物...作为未定义为函数的函数。这并没有敲响警钟，所以我将尝试二进制搜索的想法。

**更新：**它在 CF 8.0.1 上运行，根本不使用任何`<cfscript>`块。使用注释掉的二进制搜索，我将其范围缩小到`CFThread`启动一个永远不会重新加入页面的后台线程（按设计）。

如果我注释掉线程的全部内容，错误就会消失（因此 cfthread 标记本身似乎没有问题......）。如果我将线程的内容复制到它自己的模板中，该模板将编译得很好（因此线程内容本身似乎没有问题......）......所以......理论上它应该可以工作吗？我不知道。这是我双手举在空中。（WTF？）

我想我已经通过取消注释一小部分而不会返回错误来反驳这个想法，但是 CFThread 应该可以访问创建线程的模板将拥有的本地自定义标签，对吗？所以如果有 foo.cfm，它可以从页面访问`<cf_foo>`，并且线程可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T14:58:12.023

上周，我就这个问题与 Adob​​e 的 ColdFusion 工程团队联系，他们向我确认这是 ColdFusion 中的一个错误。

具体来说，如果线程标签体内的代码行数过多，则会导致编译错误。我在得到答案前一两天发现的解决方法是使用 a`<cfinclude />`从另一个文件中导入您的线程内容；或者将代码放入某个方法中并从线程体内调用该方法。（据推测，自定义标签或其他巧妙的封装方法也可以。）

这解释了让我完全发疯的整个事情的一部分：注释掉线程体的各个部分有时会使其编译......现在我知道这是因为*足够*多的线程体被注释掉了。

他们报告说他们已经修复了这个错误，所以我认为它将在下一个累积热修复（如果有的话）和 ColdFusion 9 中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T15:58:41.237

既然我还不能评论，亚当，这真的是 CF 或 JVM 的错误吗？在 CFFUNCTION 中可以编译多少行代码也有类似的限制，但该限制实际上是在 JVM 中，而不是 CF 标记中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-14T16:56:59.117

哦，那是我以前没见过的。

根据自定义标签的作用，您可以尝试使用`cfabort`- 相同的技术，但只更改一行而不是取消注释和重新注释（这可能很繁琐且耗时），而不是注释掉不同的部分。

此外，您是否能够使用完全简化的参数/等单独测试自定义标签？

如果您能够发布代码，可能会有一些奇怪的东西在一双新的眼睛里跳出来？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-15T14:50:10.067

当您将功能设置为远程时，通常会出现该错误。不过，您使用自定义标签获得它有点有趣。您确定自定义标签中没有任何功能吗？你可以发布代码吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-16T13:44:59.183

奇怪，这是一个编译错误。如果代码库不是太大，我会确保线程中的所有变量和调用的 udfs 都是显式范围的。

接下来，我会将尽可能多的外部引用数据移动到线程参数范围中，以隔离与页面的交互。

最后，如果这不能清除它，我会尝试修改每个变量、函数和 udf 的名称，线程使用一些测试前缀访问一点，以确保您没有遇到您的 vars 或 funcs 之一导致的错误原始页面上下文中 jvm 中的命名空间冲突。

棘手的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-13T18:22:18.693

您是否删除了已编译的类文件并将原始源代码保存到新文件中，以防在保存过程中发生奇怪的事情？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-13T18:28:51.173

您是否尝试过重新安装 CF8.01？也许某些文件已损坏？

# java - Grails 中 ImageTools 插件的问题

> ID：645981
> 
> 赞同：2
> 
> 时间：2009-03-14T14:20:31.083
> 
> 标签：java, image, grails, plugins, groovy

我有一个带有图像域类和控制器的 grails 项目。我刚刚安装了 grails [ImageTools](http://www.grails.org/ImageTools+plugin) 1.0.4 插件，我想为将要上传的图像生成缩略图。

我的图像域类：

```
 class Image {
byte[] data
//String name

byte[] thumbnail

static constraints = {
//name()
    data()
}
} 
```

我的控制器中的“安全”操作：

```
def save = {
def imageInstance = new Image(params)
def imageTool = new ImageTool()
imageTool.load(imageInstance.data)
imageTool.thumbnail(320)
imageInstance.thumbnail = imageTool.getBytes("JPEG") //Here is my problem!
if(!imageInstance.hasErrors() && imageInstance.save()) {
    flash.message = "Image ${imageInstance.id} created"
    redirect(action:show,id:imageInstance.id)
}
else {
    render(view:'create',model:[imageInstance:imageInstance])
}
} 
```

当我启动我的 Grails 应用程序并上传图像时，我收到以下错误消息：

> 错误 200：groovy.lang.MissingMethodException：没有方法签名：ImageTool.getBytes() 适用于参数类型：(java.lang.String) 值：{"JPEG"} Servlet：grails URI：/grailsproject/grails/image /save.dispatch 异常消息：没有方法签名：ImageTool.getBytes() 适用于参数类型：(java.lang.String) 值：{"JPEG"} 原因：groovy.lang.MissingMethodException：没有方法签名：ImageTool.getBytes() 适用于参数类型：(java.lang.String) 值：{"JPEG"} 类：GrailsAuthenticationProcessingFilter At Line：[57]

它说方法 getBytes() 丢失，但该方法仍然可用。我的 IDE intelliJ 也识别不出任何错误。

那么我能做什么呢？有人可以帮我吗？对不起，我的英语不好。如果您是德国人，请查看[http://support-network.info/board/problem-mit-imagetools-getbytes-t3008.html](http://support-network.info/board/problem-mit-imagetools-getbytes-t3008.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-15T17:06:00.787

我使用 Grails 1.0.4。我可以修复此错误消息。我刚刚从 Ricardo（插件开发者）的 git Repository 复制了 getBytes() 方法，并用新的替换了旧的。现在一切正常！我不知道错误在哪里，但我很高兴我解决了它。

非常感谢你们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T19:33:39.987

Looks like that method is a fairly new addition to the class (3/6/2009). If you have verified that that method is in the ./plugins/imagetools/src/groovy/ImageTool.groovy file I'd recommend running:

```
grails clean 
```

If you had been using this plugin prior it might be a cache problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-20T07:06:01.510

我不知道该插件在直接使用 JAI 时真正给了你什么，恕我直言，它并没有做太多。

我在进程外使用 ImageMagick 进行图像转换，从我所看到的结果来看，结果优于使用 JAI 可以完成的结果。当然，如果你不能像亚马逊那样做尽可能多的流量耗尽进程，但是如果你需要尽快获得收入，那么你可能需要考虑我所做的事情。

我使用 apache-commons-exec 有一个很好的界面来处理打开外部进程和从 std 输入和输出读取数据。我使用 JAI 的唯一目的是读取图像的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-15T14:22:58.180

您从 John 那里收到的回复听起来是正确的 - 如果您已经安装了新插件并且可以看到代码，但仅在 IntelliJ 之外不断收到此错误，您应该尝试清理您的 grails 缓存 - 很可能是旧版本的插件在缓存中预编译。

您使用的是 Grails 1.1 吗？我还没有使用最新的 grails 对其进行测试，但我知道它不会将插件保存在项目下，而是保存在单独的目录中。请让我知道，我会尝试一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-12T20:49:49.617

试试这个[http://support-network.info/board/gel%C3%B6st-problem-mit-imagetools-getbytes-t3008.html](http://support-network.info/board/gel%C3%B6st-problem-mit-imagetools-getbytes-t3008.html)

# bash - 睡到特定时间/日期

> ID：645992
> 
> 赞同：109
> 
> 时间：2009-03-14T14:36:03.167
> 
> 标签：bash, sleep, wait

我希望我的 bash 脚本休眠到特定时间。所以，我想要一个像“sleep”这样的命令，它不需要间隔，而是一个结束时间，然后一直睡到那时。

“at”-daemon 不是解决方案，因为我需要在某个日期/时间之前阻止正在运行的脚本。

有这样的命令吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2009-03-14T14:47:17.040

正如 Outlaw Programmer 所提到的，我认为解决方案只是休眠正确的秒数。

要在 bash 中执行此操作，请执行以下操作：

```
current_epoch=$(date +%s)
target_epoch=$(date -d '01/01/2010 12:00' +%s)

sleep_seconds=$(( $target_epoch - $current_epoch ))

sleep $sleep_seconds 
```

要将精度提高到纳秒（实际上更接近毫秒），请使用以下语法：

```
current_epoch=$(date +%s.%N)
target_epoch=$(date -d "20:25:00.12345" +%s.%N)

sleep_seconds=$(echo "$target_epoch - $current_epoch"|bc)

sleep $sleep_seconds 
```

请注意，macOS / OS X 不支持秒以下的精度，您需要使用`coreutils`from`brew`代替 → [请参阅这些说明](https://apple.stackexchange.com/q/135742/14994)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-09-28T13:46:44.693

**样本编辑：2020 年 4 月 22 日星期三，10:30 到 10:55 之间**
（对于阅读样本很重要）

# 通用方法（避免无用的分叉！）

正如 4 年前提出的这个问题，第一部分涉及*旧的*bash 版本：

（注意：这种方法使用`date -f`的不是 POSIX，并且在 MacOS 下不起作用！如果在 Mac 下，转到我的*纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")函数*）

为了减少`forks`，而不是运行`date`两次，我更喜欢使用这个：

## 简单的起始样本

```
sleep $(( $(date -f - +%s- <<< "tomorrow 21:30"$'\nnow') 0 )) 
```

where`tomorrow 21:30`可以替换为`date`将来可以识别的任何日期和格式。

```
if read -rp "Sleep until: "  targetTime ;then
    sleep $(( $(date -f - +%s- <<< "$targetTime"$'\nnow') 0 ))
fi 
```

## 高精度（纳秒）

几乎一样：

```
sleep $(bc <<<s$(date -f - +'t=%s.%N;' <<<$'07:00 tomorrow\nnow')'st-t') 
```

## **下次**到达

 **如果可能，今天达到*下一个`HH:MM`*含义，明天如果太晚：

```
sleep $((($(date -f - +%s- <<<$'21:30 tomorrow\nnow')0)%86400)) 
```

这适用于[bash](/questions/tagged/bash "显示标记为“bash”的问题")、[ksh](/questions/tagged/ksh "显示标记为“ksh”的问题")和其他现代 shell，但您必须使用：

```
sleep $(( ( $(printf 'tomorrow 21:30\nnow\n' | date -f - +%s-)0 )%86400 )) 
```

在[ash](/questions/tagged/ash "显示标记为“灰”的问题")或[dash等](/questions/tagged/dash "显示标记为“破折号”的问题")*较轻*的外壳下。

# *纯* [bash](/questions/tagged/bash "显示标记为“bash”的问题")方式，没有分叉！！

在 MacOS 下测试！

我写了~~一个~~两个小函数：`sleepUntil`和`sleepUntilHires`

```
 Syntax:
 sleepUntil [-q] <HH[:MM[:SS]]> [more days]
     -q Quiet: don't print sleep computed argument
     HH          Hours (minimal required argument)
     MM          Minutes (00 if not set)
     SS          Seconds (00 if not set)
     more days   multiplied by 86400 (0 by default) 
```

由于新版本的 bash 确实提供了`printf`检索日期的选项，因此对于这种新的***睡眠方式，直到 HH:MM***不使用`date`或任何其他分叉，我已经构建了一个小的[bash](/questions/tagged/bash "显示标记为“bash”的问题")函数。这里是：

```
sleepUntil() { # args [-q] <HH[:MM[:SS]]> [more days]
    local slp tzoff now quiet=false
    [ "$1" = "-q" ] && shift && quiet=true
    local -a hms=(${1//:/ })
    printf -v now '%(%s)T' -1
    printf -v tzoff '%(%z)T\n' $now
    tzoff=$((0${tzoff:0:1}(3600*${tzoff:1:2}+60*${tzoff:3:2})))
    slp=$((
       ( 86400+(now-now%86400) + 10#$hms*3600 + 10#${hms[1]}*60 + 
         ${hms[2]}-tzoff-now ) %86400 + ${2:-0}*86400
    ))
    $quiet || printf 'sleep %ss, -> %(%c)T\n' $slp $((now+slp))
    sleep $slp
} 
```

然后：

```
sleepUntil 10:37 ; date +"Now, it is: %T"
sleep 49s, -> Wed Apr 22 10:37:00 2020
Now, it is: 10:37:00

sleepUntil -q 10:37:44 ; date +"Now, it is: %T"
Now, it is: 10:37:44

sleepUntil 10:50 1 ; date +"Now, it is: %T"
sleep 86675s, -> Thu Apr 23 10:50:00 2020
^C 
```

如果目标*在*此之前将一直睡到明天：

```
sleepUntil 10:30 ; date +"Now, it is: %T"
sleep 85417s, -> Thu Apr 23 10:30:00 2020
^C

sleepUntil 10:30 1 ; date +"Now, it is: %T"
sleep 171825s, -> Fri Apr 24 10:30:00 2020
^C 
```

# HiRes time在 GNU/Linux 下使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")

最近的[bash](/questions/tagged/bash "显示标记为“bash”的问题")，从 5.0 版开始添加`$EPOCHREALTIME`带有微秒的新变量。由此有一个`sleepUntilHires`功能。

```
sleepUntilHires () { # args [-q] <HH[:MM[:SS]]> [more days]
    local slp tzoff now quiet=false musec musleep;
    [ "$1" = "-q" ] && shift && quiet=true;
    local -a hms=(${1//:/ });
    printf -v now '%(%s)T' -1;
    IFS=. read now musec <<< $EPOCHREALTIME;
    musleep=$[2000000-10#$musec];
    printf -v tzoff '%(%z)T\n' $now;
    tzoff=$((0${tzoff:0:1}(3600*${tzoff:1:2}+60*${tzoff:3:2})));
    slp=$(((( 86400 + ( now - now%86400 ) +
            10#$hms*3600+10#${hms[1]}*60+10#${hms[2]} -
            tzoff - now - 1
            ) % 86400 ) + ${2:-0} * 86400
          )).${musleep:1};
    $quiet || printf 'sleep %ss, -> %(%c)T\n' $slp $((now+${slp%.*}+1));
    read -t $slp foo
} 
```

请注意：这个用法`read -t`是内置的，而不是`sleep`. 不幸的是，在后台运行时，如果没有真正的 TTY，这将不起作用。如果您打算在后台脚本中运行它，请随意替换`read -t`... （但对于后台进程，请考虑使用和/或代替所有这些）`sleep``cron``at`

跳过下一段进行测试和警告`$ËPOCHSECONDS`！

### 较旧的方法使用`/proc/timer_list`，避免普通用户，由最近的内核！

~~在 Linux 内核下，您会找到一个名为 `/proc/timer_list` 的变量文件，您可以在其中读取 `offset` 和 `now` 变量，时间为 **纳秒**。因此，我们可以计算睡眠时间以达到*最高*所需的时间。~~

（我写这个是为了在非常大的日志文件上生成和跟踪特定事件，一秒钟包含千行）。

```
mapfile  </proc/timer_list _timer_list
for ((_i=0;_i<${#_timer_list[@]};_i++));do
    [[ ${_timer_list[_i]} =~ ^now ]] && TIMER_LIST_SKIP=$_i
    [[ ${_timer_list[_i]} =~ offset:.*[1-9] ]] && \
    TIMER_LIST_OFFSET=${_timer_list[_i]//[a-z.: ]} && \
     break
done
unset _i _timer_list
readonly TIMER_LIST_OFFSET TIMER_LIST_SKIP

sleepUntilHires() {
    local slp tzoff now quiet=false nsnow nsslp
    [ "$1" = "-q" ] && shift && quiet=true
    local hms=(${1//:/ })
    mapfile -n 1 -s $TIMER_LIST_SKIP nsnow </proc/timer_list
    printf -v now '%(%s)T' -1
    printf -v tzoff '%(%z)T\n' $now
    nsnow=$((${nsnow//[a-z ]}+TIMER_LIST_OFFSET))
    nsslp=$((2000000000-10#${nsnow:${#nsnow}-9}))
    tzoff=$((0${tzoff:0:1}(3600*${tzoff:1:2}+60*${tzoff:3:2})))
    slp=$(( ( 86400 + ( now - now%86400 ) +
            10#$hms*3600+10#${hms[1]}*60+${hms[2]} -
            tzoff - now - 1
        ) % 86400)).${nsslp:1}
    $quiet || printf 'sleep %ss, -> %(%c)T\n' $slp $((now+${slp%.*}+1))
    sleep $slp
} 
```

定义两个*只读*变量`TIMER_LIST_OFFSET`和`TIMER_LIST_SKIP`后，该函数将非常快速地访问变量文件`/proc/timer_list`以计算睡眠时间：

## 小测试功能

```
tstSleepUntilHires () { 
    local now next last
    printf -v next "%(%H:%M:%S)T" $((${EPOCHREALTIME%.*}+1))
    sleepUntilHires $next
    date -f - +%F-%T.%N < <(echo now;sleep .92;echo now)
    printf -v next "%(%H:%M:%S)T" $((${EPOCHREALTIME%.*}+1))
    sleepUntilHires $next
    date +%F-%T.%N
} 
```

可能会呈现如下内容：

```
sleep 0.244040s, -> Wed Apr 22 10:34:39 2020
2020-04-22-10:34:39.001685312
2020-04-22-10:34:39.922291769
sleep 0.077012s, -> Wed Apr 22 10:34:40 2020
2020-04-22-10:34:40.004264869 
```

*   下一秒开始时，
*   打印时间，然后
*   等待 0.92 秒，然后
*   打印时间，然后
*   计算还剩 0.07 秒，到下一秒
*   睡眠 0.07 秒，然后
*   打印时间。

## 注意不要混合`$EPOCHSECOND`和`$EPOCHREALTIME`！

阅读我关于[和](https://stackoverflow.com/a/58557346/1765658)[之间区别的警告`$EPOCHSECOND``$EPOCHREALTIME`](https://stackoverflow.com/a/58557346/1765658)

此功能使用`$EPOCHREALTIME`所以不要`$EPOCHSECOND`用于建立*下一秒*：

示例问题：尝试打印下一个四舍五入的时间 2 秒：

```
for i in 1 2;do
    printf -v nextH "%(%T)T" $(((EPOCHSECONDS/2)*2+2))
    sleepUntilHires $nextH
    IFS=. read now musec <<<$EPOCHREALTIME
    printf "%(%c)T.%s\n" $now $musec
done 
```

可能产生：

```
sleep 0.587936s, -> Wed Apr 22 10:51:26 2020
Wed Apr 22 10:51:26 2020.000630
sleep 86399.998797s, -> Thu Apr 23 10:51:26 2020
^C 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-03-14T14:46:23.390

使用`sleep`，但使用 计算时间`date`。你会想用`date -d`这个。例如，假设您想等到下周：

```
expr `date -d "next week" +%s` - `date -d "now" +%s` 
```

只需将“下周”替换为您想要等待的任何日期，然后将此表达式分配给一个值，然后休眠那么多秒：

```
startTime=$(date +%s)
endTime=$(date -d "next week" +%s)
timeToWait=$(($endTime- $startTime))
sleep $timeToWait 
```

全部做完！

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-03-20T11:22:10.793

这是一个简单的 Bash 单行：

```
sleep $(expr $(date -d "03/21/2014 12:30" +%s) - $(date +%s)) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-05-18T09:07:34.000

这是一个完成工作并通知用户剩余时间的解决方案。我几乎每天都用它在夜间运行脚本（使用 cygwin，因为我无法`cron`在 Windows 上工作）

# 特征

*   精确到秒
*   检测系统时间变化并适应
*   智能输出显示剩余时间
*   24小时输入格式
*   返回 true 以便能够与`&&`

# 样品运行

```
$ til 13:00 && date
1 hour and 18 minutes and 26 seconds left...
1 hour and 18 minutes left...
1 hour and 17 minutes left...
1 hour and 16 minutes left...
1 hour and 15 minutes left...
1 hour and 14 minutes left...
1 hour and 10 minutes left...
1 hour and  5 minutes left...
1 hour and  0 minutes left...
55 minutes left...
50 minutes left...
45 minutes left...
40 minutes left...
35 minutes left...
30 minutes left...
25 minutes left...
20 minutes left...
15 minutes left...
10 minutes left...
 5 minutes left...
 4 minutes left...
 3 minutes left...
 2 minutes left...
 1 minute left...
Mon, May 18, 2015  1:00:00 PM 
```

（最后的日期不是函数的一部分，而是由于`&& date`）

# 代码

```
til(){
  local hour mins target now left initial sleft correction m sec h hm hs ms ss showSeconds toSleep
  showSeconds=true
  [[ $1 =~ ([0-9][0-9]):([0-9][0-9]) ]] || { echo >&2 "USAGE: til HH:MM"; return 1; }
  hour=${BASH_REMATCH[1]} mins=${BASH_REMATCH[2]}
  target=$(date +%s -d "$hour:$mins") || return 1
  now=$(date +%s)
  (( target > now )) || target=$(date +%s -d "tomorrow $hour:$mins")
  left=$((target - now))
  initial=$left
  while (( left > 0 )); do
    if (( initial - left < 300 )) || (( left < 300 )) || [[ ${left: -2} == 00 ]]; then
      # We enter this condition:
      # - once every 5 minutes
      # - every minute for 5 minutes after the start
      # - every minute for 5 minutes before the end
      # Here, we will print how much time is left, and re-synchronize the clock

      hs= ms= ss=
      m=$((left/60)) sec=$((left%60)) # minutes and seconds left
      h=$((m/60)) hm=$((m%60)) # hours and minutes left

      # Re-synchronise
      now=$(date +%s) sleft=$((target - now)) # recalculate time left, multiple 60s sleeps and date calls have some overhead.
      correction=$((sleft-left))
      if (( ${correction#-} > 59 )); then
        echo "System time change detected..."
        (( sleft <= 0 )) && return # terminating as the desired time passed already
        til "$1" && return # resuming the timer anew with the new time
      fi

      # plural calculations
      (( sec > 1 )) && ss=s
      (( hm != 1 )) && ms=s
      (( h > 1 )) && hs=s

      (( h > 0 )) && printf %s "$h hour$hs and "
      (( h > 0 || hm > 0 )) && printf '%2d %s' "$hm" "minute$ms"
      if [[ $showSeconds ]]; then
        showSeconds=
        (( h > 0 || hm > 0 )) && (( sec > 0 )) && printf %s " and "
        (( sec > 0 )) && printf %s "$sec second$ss"
        echo " left..."
        (( sec > 0 )) && sleep "$sec" && left=$((left-sec)) && continue
      else
        echo " left..."
      fi
    fi
    left=$((left-60))
    sleep "$((60+correction))"
    correction=0
  done
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-03-14T15:19:30.160

您可以通过向进程发送 SIGSTOP 信号来停止进程的执行，然后通过向其发送 SIGCONT 信号使其恢复执行。

因此，您可以通过发送 SIGSTOP 来停止脚本：

```
kill -SIGSTOP <pid> 
```

然后使用 at 守护进程以同样的方式发送一个 SIGCONT 来唤醒它。

大概，您的脚本会在让自己进入睡眠之前通知它何时想要被唤醒。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-20T18:31:53.023

按照 SpoonMeiser 的回答，这里有一个具体的例子：

```
$cat ./reviveself

#!/bin/bash

# save my process ID
rspid=$$

# schedule my own resuscitation
# /bin/sh seems to dislike the SIGCONT form, so I use CONT
# at can accept specific dates and times as well as relative ones
# you can even do something like "at thursday" which would occur on a 
# multiple of 24 hours rather than the beginning of the day
echo "kill -CONT $rspid"|at now + 2 minutes

# knock myself unconscious
# bash is happy with symbolic signals
kill -SIGSTOP $rspid

# do something to prove I'm alive
date>>reviveself.out
$ 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2010-01-19T03:47:43.833

我想要一个只检查小时和分钟的脚本，这样我就可以每天使用相同的参数运行脚本。我不想担心明天是哪一天。所以我使用了不同的方法。

```
target="$1.$2"
cur=$(date '+%H.%M')
while test $target != $cur; do
    sleep 59
    cur=$(date '+%H.%M')
done 
```

脚本的参数是小时和分钟，所以我可以写如下：

```
til 7 45 && mplayer song.ogg 
```

（til 是脚本的名称）

没有更多的工作迟到了，因为你打错了一天。干杯！

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-05T09:55:32.470

> timeToWait = $(( $end - $start ))

请注意“timeToWait”可能是负数！（例如，如果您指定睡眠到“15:57”，现在是“15:58”）。所以你必须检查它以避免奇怪的消息错误：

```
#!/bin/bash
set -o nounset

### // Sleep until some date/time. 
# // Example: sleepuntil 15:57; kdialog --msgbox "Backup needs to be done."

error() {
  echo "$@" >&2
  exit 1;
}

NAME_PROGRAM=$(basename "$0")

if [[ $# != 1 ]]; then
     error "ERROR: program \"$NAME_PROGRAM\" needs 1 parameter and it has received: $#." 
fi

current=$(date +%s.%N)
target=$(date -d "$1" +%s.%N)

seconds=$(echo "scale=9; $target - $current" | bc)

signchar=${seconds:0:1}
if [ "$signchar" = "-" ]; then
     error "You need to specify in a different way the moment in which this program has to finish, probably indicating the day and the hour like in this example: $NAME_PROGRAM \"2009/12/30 10:57\"."
fi

sleep "$seconds"

# // End of file 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-10-30T13:11:25.963

实际上，我为此确切目的写了[https://tamentis.com/projects/sleepuntil/ 。](https://tamentis.com/projects/sleepuntil/)大多数代码都来自 BSD 'at' 有点过头了，所以它相当符合标准：

```
$ sleepuntil noon && sendmail something 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-14T14:39:32.160

您可以计算从现在到唤醒时间之间的秒数，并使用现有的“睡眠”命令。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-14T15:09:17.440

您也许可以使用“at”向您的脚本发送信号，该脚本正在等待该信号。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-11T12:41:05.297

这是我刚才写的同步多个测试客户端的东西：

```
#!/usr/bin/python
import time
import sys

now = time.time()
mod = float(sys.argv[1])
until = now - now % mod + mod
print "sleeping until", until

while True:
    delta = until - time.time()
    if delta <= 0:
        print "done sleeping ", time.time()
        break
    time.sleep(delta / 2) 
```

该脚本会一直休眠到下一个“舍入”或“尖锐”时间。

一个简单的用例是`./sleep.py 10; ./test_client1.py`在一个终端和`./sleep.py 10; ./test_client2.py`另一个终端中运行。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-19T17:29:33.633

```
 function sleepuntil() {
  local target_time="$1"
  today=$(date +"%m/%d/%Y")
  current_epoch=$(date +%s)
  target_epoch=$(date -d "$today $target_time" +%s)
  sleep_seconds=$(( $target_epoch - $current_epoch ))

  sleep $sleep_seconds
}

target_time="11:59"; sleepuntil $target_time 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-20T19:31:17.317

我组装了一个名为[Hypnos](https://github.com/transitorykris/hypnos)的小实用程序来执行此操作。它使用 crontab 语法进行配置，并在此之前一直阻塞。

```
#!/bin/bash
while [ 1 ]; do
  hypnos "0 * * * *"
  echo "running some tasks..."
  # ...
done 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-06-12T11:13:18.430

为了扩展主要答案，这里有一些关于日期字符串操作的有效示例：

```
sleep $(($(date -f - +%s- <<< $'+3 seconds\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'3 seconds\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'3 second\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'+2 minute\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'tomorrow\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'tomorrow 21:30\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'3 weeks\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'3 week\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'next Friday 09:00\nnow')0)) && ls

sleep $(($(date -f - +%s- <<< $'2027-01-01 00:00:01 UTC +5 hours\nnow')0)) && ls 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-04T14:45:31.110

还要考虑这个简洁的 Bash 单行：

```
sleep $((`date -d "22:00" +%s`-`date  +%s`)) 
```

这是一个 Bash v4.4.20(1) 算术表达式，由两个日期命令替换组成。第一个 date 命令以秒为单位输出您的目标直到时间（自 1970 年以来），后者输出各自的当前时间。这两个数字用减号隔开，用于算术运算。结果，您将秒作为 sleep 命令的参数。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2015-09-11T09:33:23.400

在**OpenBSD**上，以下内容可用于将`*/5`5 分钟[`crontab(5)`](http://mdoc.su/o/crontab.5)的作业压缩为`00`每小时的作业（以确保生成更少的电子邮件，同时以精确的时间间隔执行相同的任务）：

```
#!/bin/sh -x
for k in $(jot 12 00 55)
  do
  echo $(date) doing stuff
  sleep $(expr $(date -j +%s $(printf %02d $(expr $k + 5))) - $(date -j +%s))
done 
```

请注意，这[`date(1)`](http://mdoc.su/o/date.1)也会破坏[`sleep(1)`](http://mdoc.su/o/sleep.1)最终迭代的设计，因为`60`分钟不是有效时间（除非它是！），因此我们不必等待任何额外的时间才能收到我们的电子邮件报告。

另请注意，如果分配给它的迭代时间超过 5 分钟，则`sleep`同样会因设计而失败，因为根本不睡觉（由于将负数解释为命令行选项，而不是环绕到下一个小时甚至永恒），从而确保您的工作仍然可以在分配的小时内完成（例如，如果只有一个迭代需要超过 5 分钟，那么我们仍然有时间赶上，没有任何环绕到下一小时的东西）。

之所以需要，[`printf(1)`](http://mdoc.su/o/printf.1)是因为`date`分钟规范需要两位数。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2020-02-29T16:05:55.290

使用柏油。这是我专门为此编写的一个工具。

[https://github.com/metaphyze/tarry/](https://github.com/metaphyze/tarry/)

这是一个简单的命令行工具，用于等待特定时间。这与将等待一段时间的“睡眠”不同。如果您想在特定时间执行某事或更可能同时执行几件事，例如测试服务器是否可以处理多个非常同时的请求，这将非常有用。您可以在 Linux、Mac 或 Windows 上将它与“&&”一起使用：

```
 tarry -until=16:03:04 && someOtherCommand 
```

这将等到下午 4:03:04，然后执行 someOtherCommand。这是一个 Linux/Mac 示例，说明如何运行所有计划同时启动的多个请求：

```
 for request in 1 2 3 4 5 6 7 8 9 10
   do
       tarry -until=16:03:04 && date > results.$request &
   done 
```

Ubuntu、Linux 和 Windows 二进制文件可通过页面上的链接获得。

# c++ - 为什么'this'是指针而不是引用？

> ID：645994
> 
> 赞同：196
> 
> 时间：2009-03-14T14:37:04.163
> 
> 标签：c++, pointers, reference, this, c++-faq

我正在阅读这个问题[C++ 利弊](https://stackoverflow.com/questions/385297/whats-wrong-with-c-compared-to-other-languages)的答案，并在阅读评论时遇到了这个疑问。

> 程序员经常发现“this”是指针而不是引用令人困惑。另一个困惑是为什么“hello”不是 std::string 类型，而是评估为 char const*（指针）（在数组到指针转换之后） – Johannes Schaub - 2008 年 12 月 22 日 1:56
> 
> 这只表明它没有使用与其他（后来的）语言相同的约定。– le dorfier 2008 年 12 月 22 日 3:35
> 
> 不过，我将“这个”事情称为一个非常微不足道的问题。哎呀，感谢您在我的未定义行为示例中发现了一些错误。:) 虽然我不明白关于大小的信息与第一个中的任何内容有什么关系。根本不允许指针指向分配的内存之外 – jalf 2008 年 12 月 22 日 4:18
> 
> 这是一个不断的指针吗？– yesraaj 2008 年 12 月 22 日在 6:35
> 
> 如果方法是 const int getFoo() const; 这可以是常量 <- 在 getFoo 的范围内，“this”是常量，因此是只读的。这可以防止错误并为调用者提供一定程度的保证，即对象不会更改。– Doug T. 2008 年 12 月 22 日 16:42
> 
> 你不能重新分配“这个”。即你不能做“this = &other;”，因为这是一个右值。但这是 T* 类型，而不是 T const 类型。即它是一个非常量指针。如果你在一个 const 方法中，那么它是一个指向 const 的指针。常数。但指针本身是非常量的 – Johannes Schaub - 2008 年 12 月 22 日 17:53
> 
> 像这样想“this”：#define this (this_ + 0) 其中编译器创建“this_”作为指向对象的指针，并使“this”成为关键字。您不能分配“this”，因为 (this_ + 0) 是一个右值。当然不是这样（没有这样的宏），但它可以帮助理解它 – Johannes Schaub - 2008 年 12 月 22 日 17:55

我的问题是，为什么`this`指针不是引用？使它成为指针的任何特殊原因？

* * *

一些进一步的论点为什么`this`作为参考是有意义的：

*   考虑`Item 1`从`More Effective C++` ：当保证我们有一个有效的对象即不是 NULL 时使用引用（我的解释）。
*   此外，引用被认为比指针更安全（因为我们不能用杂散的指针搞砸内存）。
*   第三，访问引用的语法 ( `.`) 比访问指针 (`->`或`(*)`) 更好更短。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2009-03-14T14:41:27.303

当语言第一次发展时，在真正用户的早期版本中，没有引用，只有指针。添加运算符重载时添加了引用，因为它需要引用才能始终如一地工作。

的用途之一`this`是让对象获得指向自身的指针。如果它是一个参考，我们必须写`&this`. 另一方面，当我们编写赋值运算符时，我们必须使用`return *this`，这看起来更简单`return this`。所以如果你有一张白纸，你可以用任何一种方式争论。但是 C++ 逐渐演变为响应来自用户社区的反馈（就像大多数成功的事情一样）。向后兼容性的价值完全压倒了`this`作为引用或指针的次要优势/劣势。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2009-03-15T19:52:22.367

派对有点晚了......直接从马嘴里说出来，[这就是 Bjarne Stroustrup 必须说的](http://www.stroustrup.com/bs_faq2.html#this)（这在“C++ 的设计和进化”一书中基本上重复或摘自）：

> 为什么“ `this`”不是参考？
> 
> 因为“this”在添加引用之前被引入 C++（实际上是带类的 C）。另外，我选择了“ `this`”来遵循 Simula 的用法，而不是（后来）Smalltalk 使用的“self”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-21T15:47:40.270

除了其他答案之外，由于[Deducing this](https://wg21.link/p0847)在[C++23](https://github.com/cplusplus/draft/pull/5002)中，因此可以引用对其调用成员函数的对象（而不是`this`指针）：

```
struct Foo {
  void bar(this Foo& self) {
    // self is a reference to Foo
  }
};

int main() {
  Foo foo;
  foo.bar();
} 
```

# asp.net - 当用户离开我的网站时如何调用函数？

> ID：645995
> 
> 赞同：0
> 
> 时间：2009-03-14T14:38:48.043
> 
> 标签：asp.net, asp.net-2.0

我正在用 VB.NET/ASP.NET 2.0 开发一个网站。

一旦用户离开我的网站，我想通过在地址栏中输入不同的 URL 来调用事件（服务器端），这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-14T14:43:06.690

调用`onbeforeunload`事件，如下所示：

```
window.onbeforeunload = function () {
    //Your logic
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-14T14:41:01.953

`onbeforeunload`当用户即将离开您的站点时，您可以使用JavaScript 事件触发。

# debugging - 为什么 DebugView 不显示调试消息而 Visual Studio 显示

> ID：645997
> 
> 赞同：6
> 
> 时间：2009-03-14T14:39:00.443
> 
> 标签：debugging, internet-explorer, bho, debugview

我正在开发一个在 Internet Explorer 中运行的浏览器助手对象。我正在编写调试消息，`ATLTRACE("...");`当 Visual Studio 附加到`iexplore.exe`进程时，这些看起来很好，但这对于快速测试来说很慢。DebugView 没有从我的 BHO 中捕获任何内容。

**为什么 DebugView 不显示 BHO 调试消息？**是否与以低完整性级别运行的 Internet Explorer 有关？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-14T15:19:15.433

假设您在 Vista 或更高版本上运行 IE（这听起来像是因为您在谈论完整性级别），您可以将 DebugView 的完整性级别设置为较低的完整性，以便任何应用程序都可以向它发送消息：

```
icacls dbgview.exe /setintegritylevel low 
```

如果您不喜欢将 dbgview 永久设置为低完整性的想法（这可能会使保存日志和诸如此类的东西有点痛苦，因为它们只会进入低完整性存储），您可以运行 dbgview 的特定实例使用 Sysinternals 的`psexec`工具以低完整性：

```
psexec -l dbgview 
```

最后，如果您只担心加载 VS 调试器以附加到进程所需的时间，您可以使用命令行调试器（如 ntsd.exe 或 cdb.exe）。Ntsd.exe 随 Windows 一起提供，但较新的版本附带[“Windows 调试工具”包](http://www.microsoft.com/whdc/devtools/debugging/)，其中还包括非常相似的 cdb.exe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-14T15:36:57.543

对于您的快速测试，Visual Studio 是否仍在运行？如果是这样，那可能会导致此问题。****``````***************