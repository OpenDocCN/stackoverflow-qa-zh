# StackOverflow 问答 12390000-12390999

# java - 自定义 FTP 应用程序：表示状态和错误代码

> ID：12390000
> 
> 赞同：0
> 
> 时间：2012-09-12T14:04:14.843
> 
> 标签：java, oop

假设我想从头开始编写一个 FTP 客户端。在命令通道中，可以在服务器和客户端之间传递各种状态和错误代码，例如：

*   200 命令没问题
*   331 用户名好，需要密码
*   421 服务不可用
*   ...

理想情况下，应保留数字代码和人类可读的消息。

这些应该如何表示？作为某种`Connection`类的枚举？可以做些什么来适应不同的消息或新代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:15:17.827

我更喜欢具有一些逻辑的枚举包含：

```
public enum FTPReturnCode {
     OKAY(200), NAME_OK_PW_NEEDED(331), ... ;
} 
```

由于 FTP 自 1985 年 (rfc959) 以来没有更改，因此您可以将所有 FTP 响应代码添加到 enum 类中。

# ipad - 在 iPad 上获取序列号

> ID：12390003
> 
> 赞同：0
> 
> 时间：2012-09-12T14:04:23.553
> 
> 标签：ipad, ios5

我想获得 iPad 序列号？我发现了两种可以存档的方法，第一种是使用 uuid，但这不是最好的解决方案。因为我需要序列号，因为它位于 iPad 的背面。

另一个解决方案是实现一个已弃用的 github 项目：/

那么是否可以检索印在 iPad 背面的序列号？

如果不可能，是不是因为序列号受到某种保护，所以我不能错过使用它？

[更新]如果无法获取序列号，是否可以获取设备名称？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T04:06:07.573

可以检索 iOS 设备的序列号。但我不确定 Apple 是否允许进入 AppStore 的应用程序这样做。

您将需要这些导入：

```
#import <sys/utsname.h>
#import <dlfcn.h> 
```

以下方法将检索设备**序列号**。

```
+(NSString *) getSerialNumber
{
    NSString *serialNumber = nil;

    void *IOKit = dlopen("/System/Library/Frameworks/IOKit.framework/IOKit", RTLD_NOW);
    if (IOKit)
    {
        mach_port_t *kIOMasterPortDefault = dlsym(IOKit, "kIOMasterPortDefault");
        CFMutableDictionaryRef (*IOServiceMatching)(const char *name) = dlsym(IOKit, "IOServiceMatching");
        mach_port_t (*IOServiceGetMatchingService)(mach_port_t masterPort, CFDictionaryRef matching) = dlsym(IOKit, "IOServiceGetMatchingService");
        CFTypeRef (*IORegistryEntryCreateCFProperty)(mach_port_t entry, CFStringRef key, CFAllocatorRef allocator, uint32_t options) = dlsym(IOKit, "IORegistryEntryCreateCFProperty");
        kern_return_t (*IOObjectRelease)(mach_port_t object) = dlsym(IOKit, "IOObjectRelease");

        if (kIOMasterPortDefault && IOServiceGetMatchingService && IORegistryEntryCreateCFProperty && IOObjectRelease)
        {
            mach_port_t platformExpertDevice = IOServiceGetMatchingService(*kIOMasterPortDefault, IOServiceMatching("IOPlatformExpertDevice"));
            if (platformExpertDevice)
            {
                CFTypeRef platformSerialNumber = IORegistryEntryCreateCFProperty(platformExpertDevice, CFSTR("IOPlatformSerialNumber"), kCFAllocatorDefault, 0);
                if (CFGetTypeID(platformSerialNumber) == CFStringGetTypeID())
                {
                    serialNumber = [NSString stringWithString:(__bridge NSString*)platformSerialNumber];
                    CFRelease(platformSerialNumber);
                }
                IOObjectRelease(platformExpertDevice);
            }
        }
        dlclose(IOKit);
    }
    return serialNumber;
} 
```

获取设置中配置的设备**名称**非常容易。试试下面的方法。

```
+(NSString *) getDeviceName
{
    //RETURNS THE DEVICE NAME CONFIGURED IN SETTINGS
    NSString *nameString = [[UIDevice currentDevice] name];
    return nameString;
} 
```

# ios - CCSprite：当使用 CCSpriteBatchNode 渲染精灵时，setTexture 不起作用

> ID：12390007
> 
> 赞同：1
> 
> 时间：2012-09-12T14:04:33.947
> 
> 标签：ios, cocos2d-iphone, box2d

这是我收到的错误：

***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“CCSprite: setTexture 在使用 CCSpriteBatchNode 渲染精灵时不起作用”

当我试图通过动画运行时。

这是我创作的动画：

```
_tokenAnimation = [[CCAnimation alloc] init];
int frameCount = 12;
for (int i = 1; i <= frameCount; i++)
{
    CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Token Ball 000%d.png", i]];
    [_tokenAnimation addFrame:frame delay:0.1];
} 
```

这是我在调用动画-以前没看过吗？

```
GameObject *creditPickup = [_creditPickups nextSprite];

    creditPickup.position = ccp(_creditPosition.x, _creditPosition.y);
    [creditPickup revive];

    [creditPickup runAction:[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:_tokenAnimation restoreOriginalFrame:NO]]];
    [creditPickup runAction: [CCSequence actions:
                              [CCMoveBy actionWithDuration:5.0 position:ccp(-_winSize.width*1.5, 0)],
                              [CCCallFuncN actionWithTarget:self selector:@selector(invisNode:)], nil]]; 
```

我听说 CCSpriteBatchNode 不好？如果是这样，我怎样才能改变我的精灵表的阅读？

还有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:05:46.030

你的问题就在那里：

> CCSprite：当使用 CCSpriteBatchNode 渲染精灵时，setTexture 不起作用

这意味着作为子项添加到 CCSpriteBatchNode 的 CCSprite 中没有一个可以运行 setTexture 方法。原因是它们都必须使用与其父 CCSpriteBatchNode 相同的纹理。所以 cocos2d 在 sprite-batched 的 sprite 上禁用该方法。

在您的情况下，很可能动画的至少一个精灵帧不在其子精灵播放该动画的 CCSpriteBatchNode 使用的纹理中。

```
I hear something about CCSpriteBatchNode's being bad? 
```

是的，这很糟糕。太糟糕了，它会进行月球漫步。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:08:28.230

试试这个：

```
CCAnimation* animation;

NSMutableArray *animFrames = [NSMutableArray array]; 
CCSpriteFrameCache *cache = [CCSpriteFrameCache sharedSpriteFrameCache];

for(int i=0;i<=12;i++)
{
    CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Token Ball 000%d.png", i]]
    [animFrames addObject:frame];
}

animation = [CCAnimation animationWithSpriteFrames:animFrames];

animation.delayPerUnit =  0.1f;
animation.restoreOriginalFrame = NO;

CCAnimate *AnimAction  = [CCAnimate actionWithAnimation:animation];

CCRepeatForever *anim = [CCRepeatForever actionWithAction:AnimAction];

[creditPickup runAction:anim]; 
```

# node.js - node.js 加入 - 来自 php implode

> ID：12390009
> 
> 赞同：1
> 
> 时间：2012-09-12T14:04:38.170
> 
> 标签：node.js, join, implode

我在 PHP 中有以下代码：

```
$IDs = implode(",", array_keys($result["matches"]));
$sql = "SELECT * FROM table WHERE id IN ($IDs)"; 
```

我正在将它“翻译”成 Node.js，我想 implode 变成了 array.join，所以我尝试了这个：

```
var ids = Object.keys(answer['matches']).join(",");
var sql = "SELECT * FROM xml_it WHERE id IN (" + ids + ")"; 
```

现在，如果我回显 PHP $sql 变量，我会得到预期的结果：

```
SELECT * FROM table WHERE id IN (3187,3220,3233,3245,3246,3251,3253,3256, ... 
```

但是，使用 node.js，我得到了这个：

```
SELECT * FROM xml_it WHERE id_xml IN ([0,1,2,3,4, ... 
```

answer['matches'] 显然是相同的结果（它基本上是 Sphinx 搜索结果）

知道为什么我没有将它作为字符串而是作为对象吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:08:47.307

我认为您需要使用`Object.keys(obj)`镜像来做什么`array_keys`。

现在你抓住了整个对象，而不仅仅是钥匙。

# iphone - 如何使用 CCLayer 截取设备相机的屏幕截图

> ID：12390011
> 
> 赞同：0
> 
> 时间：2012-09-12T14:04:42.077
> 
> 标签：iphone, cocos2d-iphone, uiimagepickercontroller, augmented-reality, cclayer

我已经设置了一个摄像头，并设法在摄像头上方添加了 Cocos2d 层，现在我想截取整个视图的屏幕截图，即摄像头以及摄像头上方图层上的图像。

由于我的 CCLayer 是透明的，因此可以看到相机。

有关如何执行此操作的任何想法/链接/详细信息..？

在此先感谢您的时间 ：）

**编辑：**这是我的屏幕截图代码

```
UIGraphicsBeginImageContext([CCDirector sharedDirector].openGLView.superview.frame.size);
    [[CCDirector sharedDirector].openGLView.superview.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndPDFContext();

    CGRect rect;
    rect = CGRectMake(0, 0, 480, 320);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage],[CCDirector sharedDirector].openGLView.superview.frame);
    UIImage * img =[UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:28:42.040

```
 UIGraphicsBeginImageContext(self.view.frame.size); 
 [self.view.layer renderInContext:UIGraphicsGetCurrentContext()]; 
 UIImage *viewImage=UIGraphicsGetImageFromCurrentImageContext(); 
 UIGraphicsEndImageContext(); 
```

//它会给你uiimage

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:16:59.593

对于所有正在寻找相同事物的人..！我已经使用 AVFoundation 框架让它工作了。 [这是关于如何实现这一目标的一个很好的教程:)](http://invasivecode.tumblr.com/post/18445861158/a-very-cool-custom-video-camera-with)

# asp.net - asp.net 表单提交两次

> ID：12390018
> 
> 赞同：0
> 
> 时间：2012-09-12T14:05:01.660
> 
> 标签：asp.net, double-submit-problem

我有一个带有表单和提交按钮的网页，在服务器端我使用了一个会话值来防止表单提交两次，这就像会话的初始值为 0 并在用户单击提交后将其变为 1按钮，每次提交按钮都会先检查会话值。

但是，当我们的项目发布时，我发现同一个人有两条记录（这意味着我猜他们提交了两次，而且这种情况并不经常发生在一两个人身上），以及这两条记录之间的时间间隔很小，大概0.3秒，所以一开始我以为他们可能会双击提交按钮，但是在我的电脑上尝试后，它仍然只向数据库中插入一条记录

我很困惑这是如何发生的，以及如何防止它？

这是代码：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            Session["IsBackForwordPayment"] = 0;
        }
    }

    protected void submit_Click(object sender, EventArgs e)
    {

       if (Session["IsBackForwordPayment"] != null && Session["IsBackForwordPayment"].ToString() != "0")
            Response.Redirect("~/pages/renewal/duplicaterenewal.aspx");

.......
} 
```

是否有可能因为在检查会话值后程序只是重定向到另一个页面但不终止提交过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:00:02.683

显然 Response.End() 不会停止代码的执行（这就是它所说的）。我在这里发现了这个：

[Response.Redirect 未结束执行](https://stackoverflow.com/questions/372877/response-redirect-not-ending-execution)

完成后，您需要添加一条`return`语句来结束执行`Response.Redirect()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:15:26.557

尝试

```
Response.Redirect("~/pages/renewal/duplicaterenewal.aspx", true); 
```

这将停止在当前页面上执行。

# c# - 泛型和超类型

> ID：12390021
> 
> 赞同：2
> 
> 时间：2012-09-12T14:05:17.763
> 
> 标签：c#, .net, generics, superclass

在我当前的项目中，我们解析从外部供应商处收到的 CSV 文件。但是，由于供应商将来会支持 XML 文件，如果管理层决定我们应该使用 XML 格式，我想提供一种简单的方法来更改我们的代码。

为此，我们的“工人”类应该只引用数据类，而不知道源是 CSV 或 XML 文件。但是，我们确实有一些专门为一个源文件（目前是 CSV）编写的工具（用于调试和测试）。

可能该描述有点不清楚，但我希望下面的示例能够为您提供足够的信息来帮助我。不相关的功能已从类中剥离，类/接口已被重命名，并且整体解决方案已被大大简化，只是为了示例。目前，我有以下设置。

数据“基础”类（实际上可以是任何东西）：这些类由（一个）解析器返回。他们真正做的唯一一件事就是包含数据（可以被视为一种 DTO）。

```
public class Person
{
    public string FirstName { ... };
    public string LastName { ... };
    public int Age { ... };

    public Person()
    {
    }
} 
```

`ICsvObject`interface：CSV 数据对象的接口。这里最重要的是`LoadFromCsv`方法，因为它会被`CsvParser`类使用

```
public interface ICsvObject
{
    int CsvLineNumber { get; set; }
    void LoadFromCsv(IList<string> columns);
} 
```

CSV 数据类：这些通常从数据类继承并实现`ICsvObject`接口

```
public class CsvPerson : Person
{
    public int CsvLineNumber { get; set; }
    public void LoadFromCsv(IList<string> columns)
    {
        if (columns.count != 3)
            throw new Exception("...");

        this.FirstName = columns[0];
        this.LastName = columns[1];
        this.Age = Convert.ToInt32(columns[2]);
    }
} 
```

`IParser`接口：该接口为其他类提供了一种在不知道源文件类型的情况下引用解析器的方法。

```
public interface IParser<T> where T : new()
{
    IList<T> ReadFile(string path);
    IList<T> ReadStream(Stream sSource);
    IList<T> ReadString(string source);
} 
```

`CsvParser`class：该类实现`IParser`接口并提供解析CSV文件的方法。将来，可能会决定为 XML 文件提供解析器。

```
public class CsvParser<CsvObjectType> : IParser<CsvObjectType> where CsvObjectType : new(), ICsvObject
{
    public IgnoreBlankLines { get; set; }

    public ReadFile(string path)
    {
        ...
    }

    public ReadStream(string path)
    {
        ...
    }

    public ReadString(string path)
    {
        List<CsvObjectType> result = new ...;
        For each line in the string
        {
            // Code to get the columns from the current CSV line
            ...

            CsvObjectType item = new CsvObjectType();
            item.CsvLineNumber = currentlinenumber;
            item.LoadFromCsv(columns);
            result.add(item);
        }
        return result;
    }
} 
```

现在我已经解释了一些情况，让我们来解决问题：'Worker' 类不应该为我们使用的解析器类型而烦恼。他们应该从解析器收到的只是一个数据对象列表（例如 Person），他们不需要`ICsvObject`接口提供的额外信息（`CsvLineNumber`在这个例子中以及真实情况下的其他东西）。然而，其他工具应该有能力获得额外的信息（调试/测试程序......）。

所以，我真正想要的是以下内容：

`ParserFactory`类：此类返回特定数据类型的正确解析器。将来切换到 XML 时，必须创建 XML 解析器并更改工厂类。所有其他调用工厂方法的类都应该接收一个有效的`IParser`类而不是一个特定的解析器。

```
public class ParserFactory
{
    //Instance property
    ...

    public IParser<Person> CreatePersonParser()
    {
        return new CsvParser<CsvPerson>();
    }
} 
```

这样做，工作类将调用工厂方法，无论我们使用什么类型的解析器。`ParseFile`之后可以调用该方法以提供“基本”数据类的列表。返回一个 Csv 解析器是可以的（它实现了 IParser 接口）。但是不支持泛型类型。返回`CsvParser<Person>`对工厂有效，但`Person`该类没有实现接口，由于泛型约束`ICsvObject`，不能与该类一起使用。`CsvParser`

返回 CsvParser 类或 IParser 将要求调用类知道我们正在使用哪个解析器，因此这不是一个选项。使用两个通用类型输入（一个用于 CsvObject 类型，一个用于返回类型）创建 CsvParser 类也不起作用，因为其他工具应该能够访问 ICsvObject 接口提供的额外信息。

也值得一提。这是一个正在修改的旧项目。它仍然是 .NET 2.0。但是，在回答时，您可以使用更新的技术（如扩展方法或 LINQ 方法）。以 .NET 2.0 和更新的方式回答这个问题会让你获得更多的荣誉 :-)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:52:18.400

感谢您调查它。

我设法通过创建工人类使用的代理类找到了解决方案：

```
public class CsvParserProxy<CsvObjectType, ResultObjectType> : IParser<ResultObjectType> where CsvObjectType : new(), ResultObjectType, ICsvObject where ResultObjectType : new()
{
    private object _lock;
    private CsvParser<CsvObjectType> _CsvParserInstance;
    public CsvParser<CsvObjectType> CsvParserInstance {
        get {
            if (this._CsvParserInstance == null) {
                lock ((this._lock)) {
                    if (this._CsvParserInstance == null) {
                        this._CsvParserInstance = new CsvParser<CsvObjectType>();
                    }
                }
            }

            return _CsvParserInstance;
        }
    }

    public IList<ResultObjectType> ReadFile(string path)
    {
        return this.Convert(this.CsvParserInstance.ReadFile(path));
    }

    public IList<ResultObjectType> ReadStream(System.IO.Stream sSource)
    {
        return this.Convert(this.CsvParserInstance.ReadStream(sSource));
    }

    public IList<ResultObjectType> ReadString(string source)
    {
        return this.Convert(this.CsvParserInstance.ReadString(source));
    }

    private List<ResultObjectType> Convert(IList<CsvObjectType> TempResult)
    {
        List<ResultObjectType> Result = new List<ResultObjectType>();
        foreach (CsvObjectType item in TempResult) {
            Result.Add(item);
        }

        return Result;
    }
} 
```

然后，工厂类创建返回基本数据对象的 CsvParserProxies。其他人如果想要来自 CsvObjects 的额外信息，可以直接创建 CsvParser 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:33:34.007

我认为你让它变得比必要的更复杂。

为什么不

```
public interface IParser
{
    // this one should be enough as file and string can be accessed via Stream
    IList<Person> ReadStream(Stream sSource); 
    IList<Person> ReadFile(string path);
    IList<Person> ReadString(string source);
} 
```

那么你有

```
public class CsvParser : IParser { ... }
public class XmlParser : IParser { ... } 
```

我认为不需要 CsvPerson/XmlPerson。每个解析器实现只构建普通人，例如：

```
public class CsvParser : IParser
{
    public IList<Person> ReadString(string path)
    {
        List<Person> result = new ...;
        For each line in the string
        {
            // Code to get the columns from the current CSV line
            Person p = new Person();
            p.Name = columns[0];
            p.Age = columns[1].AsInt();
            result.add(item);
        }
        return result;
    }
} 
```

# javascript - 如何为表单中包含的表中的第一个元素设置样式

> ID：12390023
> 
> 赞同：0
> 
> 时间：2012-09-12T14:05:25.367
> 
> 标签：javascript, jquery, css

说我有这个表格：

```
<form>
  <table>
    <tbody>
      <tr>
        <td style="font-family : Arial">
          Sample text
        </td>
      </tr>
    </tbody>
  </table>
</form> 
```

由于我没有它的 id，如何将新样式添加到此表单的第一个，这是我目前所拥有的：

```
form table tbody tr td{
    font-family : Arial;
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:07:18.573

如果`first-child`您希望您的规则仅适用于其父级的第一个子级，请使用：

```
form table tbody tr td:first-child {
    font-family : Arial;
    font-weight: bold;
} 
```

[来自 MDN 的参考](https://developer.mozilla.org/en-US/docs/CSS/:first-child)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:08:05.450

尝试，

```
form table tbody tr td:first-child{
   font-family : Arial;
   font-weight: bold;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:14:04.013

我会按照这里的其他答案使用第一个孩子，但你不一定需要对 css 规则的其余部分如此具体。例如，以下规则就足够了：

```
form td:first-child {
    font-family: Arial;
    font-weight: bold;
} 
```

不仅您的 css 更易于理解和调试，而且如果您需要覆盖此规则，而无需使用其他规则来获取特定的 uber，它会更简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:09:23.253

您可以先分配一个`class`to `td`，然后将 CSS 规则部署到该`class`.

```
<form>
  <table>
    <tbody>
      <tr>
        <td class="firstChild">
          Sample text
        </td>
      </tr>
    </tbody>
  </table>
</form>

form table tbody tr td.firstChild{
    font-family : Arial;
    font-weight: bold;
} 
```

伪选择器`:first-child`是不错的选择，但并非所有浏览器版本都支持。

***[见下表](https://developer.mozilla.org/en-US/docs/CSS/%3afirst-child)***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:10:14.227

您可以使用 CSS`first-child`选择器，如下所示：（注意直接后代选择器，这只会选择表单中第一个表中的`td`每个中的第一个）`tr`

CSS：

```
form > table > tbody > tr > td:first-child {
    font-family: Arial;
    font-weight: bold;
}​ 
```

演示：http: [//jsfiddle.net/SO_AMK/hVChC/](http://jsfiddle.net/SO_AMK/hVChC/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:08:27.107

在您的CSS中，您必须使用第一个孩子

```
form table tbody tr td:first-child{
font-family : Arial;
font-weight: bold;
} 
```

# html - Ajax 调用适用于一台主机，但不适用于另一台主机

> ID：12390026
> 
> 赞同：0
> 
> 时间：2012-09-12T14:05:29.797
> 
> 标签：html, ajax, cross-domain, cross-domain-policy, cross-domain-proxy

我正在对 UPS 地址验证网络服务进行 ajax 调用。

如果我使用此域从我的应用程序进行调用，它可以工作（`http://serverone.org/addrvalidator`）
但如果我使用其他域或 IP 地址而不是域（），它就不起作用`http://servertwo.org/addrvalidator`。
这两个域名都是内部网域。

任何帮助表示感谢，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:22:45.290

看看这个，可能这就是你要找的答案： [Cross-site AJAX requests](https://stackoverflow.com/questions/333532/cross-site-ajax-requests)

# nlp - 关于自然语言过程的顶级会议

> ID：12390028
> 
> 赞同：0
> 
> 时间：2012-09-12T14:05:32.653
> 
> 标签：nlp

自然语言处理领域的顶级会议是什么？该领域最热门的话题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:43:42.713

Some of the biggest conferences:

*   [ACL](http://www.acl2012.org/)
*   [EMNLP](http://emnlp-conll2012.unige.ch/)
*   [NAACL](http://www.naaclhlt2012.org/)
*   [EACL](http://www.eacl.org/)
*   [COLING](http://www.coling2012-iitb.org/)

You can find lists of hot topics in the "call for papers" of any conference. For example: [here](http://emnlp-conll2012.unige.ch/call.html).

# windows-8 - IntPtr.ToInt32() 和 x64 系统

> ID：12390035
> 
> 赞同：7
> 
> 时间：2012-09-12T14:06:05.270
> 
> 标签：windows-8, 64-bit, intptr, overflowexception

在我的 c# dll 中，我有一些这样的代码可以与一些非托管 dll 交互：

```
IntPtr buffer = ...;
TTPOLYGONHEADER header = (TTPOLYGONHEADER)Marshal.PtrToStructure(
                       new IntPtr(buffer.ToInt32() + index), typeof(TTPOLYGONHEADER)); 
```

在安装 Windows 8 之前，在 x64 系统上使用带有 .Net2 和 .Net4 的 AnyCPU 编译的 dll 时，这一直运行良好。

在 Windows 8 中使用 .Net4 dll 时，我在 buffer.ToInt32() 调用中收到 OverFlowException（“算术运算导致溢出。”）。

IntPtr.ToInt32() 的 MSDN 文档说：

“OverflowException：在 64 位平台上，此实例的值太大或太小，无法表示为 32 位有符号整数。”

我想知道为什么这个问题只出现在 Windows 8 中，以及修复它的正确方法是什么。

我应该使用这样的方法，而不是 IntPtr.ToInt32() 调用吗？

```
 internal static long GetPtr(IntPtr ptr)
    {
        if (IntPtr.Size == 4) // x86

            return ptr.ToInt32();

        return ptr.ToInt64(); // x64
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-19T02:45:31.457

您不应该调用任何转换函数只是为了添加和偏移并立即转换回来。 `IntPtr`有*两种*直接添加偏移量的内置方法，

[`IntPtr.Add(buffer, index)`](https://msdn.microsoft.com/en-us/library/system.intptr.add.aspx)

或者干脆

[`(buffer + index)`](https://msdn.microsoft.com/en-us/library/system.intptr.op_addition.aspx)

# eclipse - java.lang.ClassNotFoundException：org.springframework.cglib.proxy.MethodInterceptor

> ID：12390039
> 
> 赞同：1
> 
> 时间：2012-09-12T14:06:11.973
> 
> 标签：eclipse, spring, spring-mvc

在 Eclipse 的 tomcat 中运行 spring MVC 项目时收到此错误。

```
java.lang.ClassNotFoundException: org.springframework.cglib.proxy.MethodInterceptor 
```

谷歌没有关于该错误的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

<tx:annotation-driven />     
<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/" />
<context:component-scan base-package="/"></context:component-scan>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<property name="prefix" value="/WEB-INF/jsp/"></property>
<property name="suffix" value=".jsp"></property>
</bean>

<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" p:maxUploadSize="1000000" />

<bean id="personService" class="PersonService" />

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/database" />
    <property name="username" value="root" />
    <property name="password" value="root" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" /> 
    <property name="packagesToScan" value="/" />
    <property name="hibernateProperties">
        <props> 
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        </props>
    </property>
</bean>

<bean id="transactionManger" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

我已将 cglib-2.2.3.jar 放在我的 lib 文件夹中，但这并没有什么区别。

我有点不知所措。我有这门课，我知道需要什么类，但我不知道如何让 spring 看到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:12:51.063

由于 3.2 M2 Spring 不依赖于外部`cglib`JAR，而是使用自己的副本，该副本已重命名以减少与原始 JAR 可能发生的冲突。

> 从 3.2 M2 开始，我们已经升级到新的 CGLIB 3.0。我们将所有 net.sf.cglib 类重新打包到 org.springframework.cglib 并将它们直接内联到 spring-core JAR 中。这意味着所有 @Configuration 和子类代理功能在 M2 中都是开箱即用的，并且意味着 CGLIB 不会与其他项目发生冲突。

有关更多详细信息，请参见以下链接：

*   [http://www.springsource.org/node/3654](http://www.springsource.org/node/3654)
*   [https://jira.springsource.org/browse/SPR-9669](https://jira.springsource.org/browse/SPR-9669)

所以，我想你在类路径中有不同 Spring 版本的 JAR。确保它们都是 3.2 M2 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:50:52.190

实际上，您没有该类， cglib-2.2.3.jar 不包含它。

你用的是什么版本的spring框架？从 XSD 我看到了对尚未发布的 Spring 3.2 的引用。如果你坚持最新发布的版本（3.1.2）会更好

# java - h:selectOneListbox onchange 和 a4j:support 事件 onchange 冲突

> ID：12390041
> 
> 赞同：0
> 
> 时间：2012-09-12T14:06:16.247
> 
> 标签：java, jsf, ajax4jsf

我在jsp页面中有如下代码...

```
<h:selectOneListbox size="1" id="doseUnit"  onchange="generateSignature(),quantityUnitSelecator()" value="#{templatePrescriptionMaintenanceBackingBean.prescriptionUnit}">
<f:selectItems value="#{templatePrescriptionMaintenanceBackingBean.doseUnit}"/>
<a4j:support ajaxSingle="true" reRender="quantity,signature,signatureHidden,doseWarningList" actionListener="#{templatePrescriptionMaintenanceBackingBean.generatePrescriptionQuantity}"
event="onchange">
</a4j:support> 
```

如果我`event="onchange"`在 a4j 中使用它不会调用我的`generatePrescriptionQuantity`，但如果我使用`event="onblur"`它可以正常工作。所以我认为这是列表框的 onchnage 方法的原因。实际上，我必须在更改时产生这种效果，并且还必须调用该脚本。

* * *

更新

* * *

当我进行以下修改时，第一个选择的问题已解决，但第二个选择（位于第一个 selectone 下方）同样的问题继续存在......我不明白为什么这是 ????

```
<h:selectOneListbox size="1" id="doseUnit" value="#{templatePrescriptionMaintenanceBackingBean.prescriptionUnit}">
<f:selectItems value="#{templatePrescriptionMaintenanceBackingBean.doseUnit}"/>
<a4j:support ajaxSingle="true" reRender="quantity,signature,signatureHidden,doseWarningList" actionListener="#{templatePrescriptionMaintenanceBackingBean.generatePrescriptionQuantity}"
event="onchange" oncomplete="generateSignature(),quantityUnitSelecator()">
</a4j:support> 
```

```
<h:selectOneListbox size="1" id="route" value="#{templatePrescriptionMaintenanceBackingBean.prescriptionRoute}">
<f:selectItems value="#{templatePrescriptionMaintenanceBackingBean.route}"/>
<a4j:support ajaxSingle="true" reRender="quantity,signature,signatureHidden,doseWarningList" actionListener="#{templatePrescriptionMaintenanceBackingBean.generatePrescriptionQuantity}"
event="onchange" oncomplete="generateSignature()">
</a4j:support> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:53:51.607

会不会是您在 h:selectOneListbox 中的 onchange 不能很好地与 a4j:support 中的 onchange 配合使用？尝试从列表框中删除您的 onchange 并将其放在 a4j 标记的 onsubmit 属性中。

# ios - iOS：无法更改 UIBarButtonItem 的颜色

> ID：12390042
> 
> 赞同：0
> 
> 时间：2012-09-12T14:06:16.793
> 
> 标签：ios, ios5, uibarbuttonitem, uiappearance

我基本上有一个 ViewController，它是 UINavigationController 的根 ViewController。基本上我有一个 UIBarButtonItem，当用户按下它时，它的色调应该在红色和绿色之间切换。但是颜色好像没变。我的代码：

```
@interface TestButtonColorViewController (){
    BOOL colorMode;
}
@end

@implementation TestButtonColorViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    colorMode = NO;

    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Change" style:UIBarButtonItemStyleBordered target:self action:@selector(changeColor)];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)changeColor{
    colorMode = !colorMode;

    if (colorMode) {
        [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setTintColor:[UIColor redColor]];
    }
    else {
        [[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], nil] setTintColor:[UIColor greenColor]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:43:39.873

正如 CSmith 所建议的，您应该直接设置色调：

```
- (void)changeColor {
    colorMode = !colorMode;

    if (colorMode) {
        [self.navigationItem.rightBarButtonItem setTintColor:[UIColor redColor]];
    } else {
        [self.navigationItem.rightBarButtonItem setTintColor:[UIColor greenColor]];
    }
} 
```

# java - 在 JFace 表中启用单元格

> ID：12390049
> 
> 赞同：0
> 
> 时间：2012-09-12T14:06:43.003
> 
> 标签：java, jface

我在 jFace 中创建了一个包含列的表，但是当应用程序运行时，该列中的单元格不处于可编辑/启用模式。如何启用表格列中的单元格？

下面是表格和表格列代码：

```
Table Employee = EmployeeViewer.getTable();
Employee.setHeaderVisible(true);
Employee.setLinesVisible(true);
Employee.setLayoutData(new GridData(GridData.FILL_BOTH));

TableColumn Name = new TableColumn(Employee, SWT.LEFT);
Name.setText("Name       ");
Name.pack(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:29:22.743

您需要`Table Column`通过添加`EditingSupport`. 请参阅本教程的[第 2.1 节。](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html)

# jquery - 尽管在静态页面上工作，但 getJSON 函数在 Bootstrap 模式下不起作用

> ID：12390052
> 
> 赞同：0
> 
> 时间：2012-09-12T14:06:55.563
> 
> 标签：jquery, ruby-on-rails, json, action

我有一个奇怪的问题：我正在检查电子邮件是否已经被接收，哪个用户正在输入。

它在简单页面中工作，但是当我尝试在模式上调用它时 - 它不起作用。

这是jQuery：

```
 $('#user_email').focusout(function() {
  $.getJSON('http://127.0.0.1:3000/checkemail.jsonr', { email: $('#user_email').val() }, function(data) 
    { $('#submit').attr('disabled', 'disabled'); }//disable submit
   );
}); 
```

我的 HTML：

```
 <input id="user_email" name="user[email]" size="30" type="email" value="">
        <input class="btn" id="submit" name="commit" type="submit" value="Create an account"> 
```

我的行动和路线：

```
def checkemail
 respond_to do |format|
   format.jsonr do
    if User.where(email: params[:email]).exists? 
      render :json => {
            :status  => :ok,
            :message => "Success!"
            }.to_json
     end
   end
  end
end

...route...
checkemail        /checkemail 
```

还添加了 mimetype

```
 Mime::Type.register_alias "application/json", :jsonr, %w( text/x-json ) 
```

但正如我在日志中看到的那样，该动作似乎没有调用。但是，所有相同的事情都在其他项目中起作用。

有人能告诉我问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:54:31.917

不确定您的模态是如何完成的，但您确定您的模态可以访问相关的 jQuery 函数，它是否包含在内？通过粘贴 alert("test"); 来测试 jQuery focusout 函数是否正在运行；或函数中的某些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:48:53.183

如果你愿意，请投票给这个答案，让我拿出 ajax ruby​​ rails 清单。由于它适用于简单页面而不是模式，因此它必须是一个 javascript 问题。

1) 确保您的 jquery 在 $(document).ready() 块中。2) 在 $('#user_email') 上测试你的 jquery 监听器。我不喜欢 alerts() 但使用 console.log("blah");

3) 尝试一个没有 jsonr 响应的简单 ajax 请求？

这就是我要说的。
祝你好运！

# sql-server - XML DML (Xpath) 查询以禁止重复列。它应该在插入之前测试列是否存在

> ID：12390053
> 
> 赞同：3
> 
> 时间：2012-09-12T14:06:59.203
> 
> 标签：sql-server, xml, xpath, xml-dml

```
update serializedvalue set value.modify(' 
insert         
    <GridDataVisibleColumn>
      <FilterBehavior>StronglyTyped</FilterBehavior>
      <FilterBarMode>Immediate</FilterBarMode>
      <AllowFilter>false</AllowFilter>
      <AllowSort>true</AllowSort>
      <AllowDrag>true</AllowDrag>
      <AllowGroup>true</AllowGroup>
      <AllowResize>true</AllowResize>
      <ShowColumnOptions>false</ShowColumnOptions>
      <HeaderText>DeskLabel</HeaderText>
      <IncrementSeed>1</IncrementSeed>
      <IsIdentity>false</IsIdentity>
      <IsReadOnly>true</IsReadOnly>
      <MappingName>Deskl</MappingName>
      <MinimumWidth>0</MinimumWidth>
      <Width>
        <UnitType>Auto</UnitType>
        <Value>1</Value>
      </Width>
      <DataType>String</DataType>
      <UpdateMode>LostFocus</UpdateMode>
      <IsHidden>false</IsHidden>
    </GridDataVisibleColumn>
    as last into (/GridDataTableProperties/VisibleColumns)[1] 

')
where   Token like '%gridsettings%' 
```

当我使用此查询将节点添加到现有列时。每次运行它都会添加一列。

我想要实现的是它应该检查是否存在具有映射名称的特定节点以及是否存在不添加该节点。否则添加它。

我关注的链接是[http://msdn.microsoft.com/en-us/library/ms175466](http://msdn.microsoft.com/en-us/library/ms175466)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:44:24.550

将您的 XML 放入一个变量中，提取映射名称并在 where 子句中使用它。

```
declare @XML xml
set @XML = '
    <GridDataVisibleColumn>
      <FilterBehavior>StronglyTyped</FilterBehavior>
      <FilterBarMode>Immediate</FilterBarMode>
      <AllowFilter>false</AllowFilter>
      <AllowSort>true</AllowSort>
      <AllowDrag>true</AllowDrag>
      <AllowGroup>true</AllowGroup>
      <AllowResize>true</AllowResize>
      <ShowColumnOptions>false</ShowColumnOptions>
      <HeaderText>DeskLabel</HeaderText>
      <IncrementSeed>1</IncrementSeed>
      <IsIdentity>false</IsIdentity>
      <IsReadOnly>true</IsReadOnly>
      <MappingName>Deskl</MappingName>
      <MinimumWidth>0</MinimumWidth>
      <Width>
        <UnitType>Auto</UnitType>
        <Value>1</Value>
      </Width>
      <DataType>String</DataType>
      <UpdateMode>LostFocus</UpdateMode>
      <IsHidden>false</IsHidden>
    </GridDataVisibleColumn>'

declare @MappingName varchar(50)
select @MappingName = @XML.value('(/GridDataVisibleColumn/MappingName/text())[1]', 'varchar(50)')

update serializedvalue set value.modify(' 
  insert         
    sql:variable("@XML")
    as last into (/GridDataTableProperties/VisibleColumns)[1] 
')
where Token like '%gridsettings%' and
      value.exist('/GridDataTableProperties
                    /VisibleColumns
                      /GridDataVisibleColumn
                        [MappingName = sql:variable("@MappingName")]') = 0 
```

# javascript - javascript 中的命名空间，在 IDE 中具有代码完成/内容辅助支持

> ID：12390054
> 
> 赞同：0
> 
> 时间：2012-09-12T14:07:00.153
> 
> 标签：javascript, eclipse, ide, code-completion

什么是最好的方法/如何让 Eclipse 在大型 javascript 应用程序中提供内容辅助/完成。

我们正在开发一个在前端使用 HTML/javascript 的大型应用程序。我们希望避免使用大量函数使 javascript 环境变得混乱，因此希望为我们的应用程序构建一个命名空间，我们将其称为 app。

为了扩展我们的命名空间，我们希望能够调用 app.namespace("package").function = function(){...}

namespace("package") 如果包退出则解析包，否则创建它。

手头的问题是，这种方法可以帮助我们保持环境清洁，但会使内容辅助更难（或不可能？）

关于如何让这种方法在 eclipse 中使用代码完成和内容辅助的任何想法？周围是否有任何其他 IDE 可以使这成为可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:16:58.483

我为这个问题找到了几个解决方案，它们都没有完全满足我的需求，但每个都有自己的优势。我查看了[Aptana 插件](http://www.aptana.com)、[Visual Web Developer 2010 Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-overview)和[WebStorm](http://www.jetbrains.com/webstorm/)。

# 蚀

对于 Eclipse，我最终选择了 Aptana。这个插件比标准的 eclips JavaScript 透视图有更强的代码完成支持。为了使我们的解决方案有效，我们必须创建“接口”，将可用的内容与我们的实际代码一起发布。我们将这些接口放在映射到我们实际代码的文件结构中，并在构建应用程序时将其省略。

要使 Aptana 插件正常工作，您需要对设置进行一些更改。在“属性”下，您需要将“项目性质”设置为“Web”。其次，您需要编辑“首选项/常规/编辑器/文件关联”，确保将“JavaScript 源代码编辑器”设置为默认值，而*不是*标准的“JavaScript 编辑器”。一旦你重新打开你的 javascript 源文件，你应该准备好了:)

# 视觉 Web 开发者 2010 速成版

实际上这对于js开发来说是相当不错的。不利的一面是安装它会在你的机器上安装很多你不需要的垃圾，而且它需要很长时间并且需要 5 次（5 次！）重新启动才能安装。但是一旦你准备好了，它实际上是在你键入时伪运行你的代码。实际上，所有动态生成的对象都可以通过智能感知提供给您，为您提供类型特定的帮助（字符串、数字、对象等）。为了实现这一目标（我认为我以前从未将这个词与 Microsoft 产品一起使用过）交叉文件引用中的行为，您需要在文件顶部应用一些魔法。

```
/// <reference path="path to another js source file you want intellisense for"> 
```

# 网络风暴

我没有像其他两个那样深入研究这个解决方案，因为我们需要这个产品的商业许可证（非商业用途的免费许可证可用）。看起来您在此 IDE 中也获得了许多可用于可视化 Web 开发人员的功能。事实上，我认为这个 IDE 在 Code Completion 和 Code Assist 三者中为您提供了最多的点击率。我实际上认为你在代码完成下获得了太多的点击，至少我得到了超出范围的点击，因此更难实际使用。希望可以调整此行为，以便您从 IDE 获得更准确的支持，但我没有时间进一步调查。

# 我们的结论

就我们而言，我们可能会选择适用于 eclipse 或 Visual Studio 的 Aptana 插件。Eclipse 是我们的默认 IDE，我们的组织在我们批准的开发工具系列中拥有 Visual Studio，但如果我们事先没有任何已经在使用的首选选择，我会进一步检查 WebStorm。

# javascript - Jquery 标签插件粘贴问题

> ID：12390057
> 
> 赞同：1
> 
> 时间：2012-09-12T14:07:06.687
> 
> 标签：javascript, jquery

我正在使用[XOXCO](https://github.com/xoxco/jQuery-Tags-Input)的 Jquery Tag Plugin 。它很好用，但是当有人粘贴带有逗号的文本时，它不会将它们分开。我试过这个解决方案。**[https://github.com/xoxco/jQuery-Tags-Input/issues/22](https://github.com/xoxco/jQuery-Tags-Input/issues/22)**。但它会两次附加新粘贴的标签。有没有人使用过这个插件并遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:18:50.560

根据他们在 github 上的代码，您可以尝试将其作为解决方法：

```
$('#input').on('paste',function() {
    $(this).trigger('keypress');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T12:00:59.463

另一个简单的解决方案是

```
$('#tags').tagsInput({
    'onAddTag': function(tag) {
        //Remove all newlines
        tag = tag.replace(/\n/g, '');
        //Remove all spaces
        tag = tag.replace(/\s/g, '');
        //check if a comma is find inside var tag
        if (tag.indexOf(',') > 0) {
            $('#tags').importTags(tag);
        };
    }
}); 
```

瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T14:39:19.980

这支持粘贴逗号分隔的字符串

```
onAddTag: function(tag) {
    var tags = tag.split(",");
    if(tags.length > 1) {
        $(this).removeTag(tag);
        return false;
    }
  } 
```

看起来有点奇怪，但标签库已经将逗号视为分隔符，因此删除只是刷新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T12:23:27.643

我找到了 Pit Digger 最初出现双标签问题的原因。 `$(e.target).val()`已经添加了标签。添加`+ ',' + e.tags`只会使标签加倍。在我的解决方案中，我注释掉了旧版本并在上面添加了新行。

原代码：[https ://github.com/xoxco/jQuery-Tags-Input/issues/22](https://github.com/xoxco/jQuery-Tags-Input/issues/22)

```
var tidyTags = function(e) {
    var tags = ($(e.target).val()).split(',');
    //var tags = ($(e.target).val() + ',' + e.tags).split(',');
    var target = $(e.target);
    target.importTags('');
    for (var i = 0, z = tags.length; i<z; i++) {
        var tag = $.trim(tags[i]);
        if (!target.tagExist(tag)) {
            target.addTag(tag);
        }
    }
    $('#' + target[0].id + '_tag').trigger('focus');
}; 
```

# php - 正则表达式将文本移动到关联的锚点并将其包装在一个跨度中

> ID：12390065
> 
> 赞同：0
> 
> 时间：2012-09-12T14:07:31.523
> 
> 标签：php, regex

我目前的 HTML 输出如下：

```
<a href="#">Coats</a> (12) 
```

我想做的是一个正则表达式或以这种方式将数字移动到内部锚点的操作：

```
<a href="#">Coats<span>12</span></a> 
```

输出总是与我发布的格式相同。我只是想消除 ( ) 并将其包装在 span 中，并将其放置在 HTML 结构中没有任何空间用于锚点。

**（没有尝试任何东西，因为我对正则表达式一无所知）**

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:10:28.257

```
 $html = preg_replace('|<a href="(.+?)">(.+?)</a> \((\d+?)\)|i', 
         '<a href="$1">$2<span>$3</span></a>', $html); 
```

需要注意的是，通常不应使用正则表达式来操作 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:46:32.313

我不会使用带有非贪婪量词的句点，例如`.+?`不会匹配所有内容（如换行符），我会使用

*   不匹配的字符类`[^blah]`
*   并注意标签元素之间的空格，因为它在 HTML 中有效（如示例输入所示）

*正则表达式：*

```
(<a\s*href[^>]+>[^<]+)(<\/a>)\s*\(([^)]+)\) 
```

*用。。。来代替：*

```
$1<span>$3</span>$2 
```

*在这里测试：*

[http://regexr.com?324j8](http://regexr.com?324j8)

*PHP代码：*

```
<?php
echo preg_replace('/(<a\s*href[^>]+>[^<]+)(<\/a>)\s*\(([^)]+)\)/','$1<span>$3</span>$2','<a href="#">Coats</a> (12)');
?> 
```

*样本输入：*

```
<a href="#">Coats</a> (12)
<a  href="#">Coats</a> (35)
<a href ="#">Coats</a>   (234546)
<a    href= "#">Coats</a>(1)
<a href="#" >Coats</a> (BlahBlah) 
```

*样本输出：*

```
<a href="#">Coats<span>12</span></a>
<a href="#">Coats<span>35</span></a>
<a href ="#">Coats<span>234546</span></a>
<a href= "#">Coats<span>1</span></a>
<a href="#" >Coats<span>BlahBlah</span></a> 
```

# java - 将 java BitSet 保存到数据库

> ID：12390068
> 
> 赞同：7
> 
> 时间：2012-09-12T14:07:37.607
> 
> 标签：java, jpa, persistence, bitset

与 JPA 合作，我希望能够将 BitSet 保存到数据库中并将其拉回。

假设我有：

```
@Entity
@Table(name = "myTable")
public class MyClass {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "Object_Id")
    protected long id;

    @Column(name = "Tags")
    protected BitSet tags;

... getters & setters etc...
} 
```

我也应该定义一个“columnDefinition”吗？我真的不明白它是如何持久化的（使用 toString()？），而且它是如何从数据库中加载回来的。

你能帮我解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-18T11:50:14.550

更有效的方式（使用`int`代替`byte[]`）需要一个非常简单的自定义类：

```
@Entity
@Access(AccessType.FIELD)
public class SampleEntity {

    @Transient
    private IntBitSet isolationLevel = new IntBitSet(0);

    public static final int USER_BIT = 0;
    public static final int DEVICE_BIT = 1;
    // 2, 3, 4, ...

    public boolean isUserIsolated() {
        return isolationLevel.bitGet(USER_BIT);
    }

    public boolean isDeviceIsolated() {
        return isolationLevel.bitGet(DEVICE_BIT);
    }

    public void setUserIsolated(boolean b) {
        isolationLevel.bitSet(USER_BIT, b);
    }

    public void setDeviceIsolated(boolean b) {
        isolationLevel.bitSet(DEVICE_BIT, b);
    }

    @Access(AccessType.PROPERTY)
    @Column
    public int getIsolationLevel() {
        return isolationLevel.getValue();
    }

    public void setIsolationLevel(int isolationLevel) {
        this.isolationLevel = new IntBitSet(isolationLevel);
    }

    private static class IntBitSet {
        private int value;

        public IntBitSet(int value) {
            this.value = value;
        }

        public int getValue() {
            return value;
        }

        public boolean bitGet(int i) {
            return ((value >> i) & 1) == 1;
        }

        public void bitSet(int i, boolean b) {
            if (b) {
                bitSet(i);
            } else {
                bitUnset(i);
            }
        }
        private void bitSet(int i) {
            value = value | (1 << i);
        }
        private void bitUnset(int i) {
            value = value & ~(1 << i);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:44:07.633

默认情况下，JPA 使用 Java 序列化来持久化未知`Serializable`类型的属性（以便您将序列化表示存储为`byte[]`）。

通常这不是您想要的，因为可以有更有效的方法来表示您的数据。例如，`BitSet`可以有效地表示为一个数字（如果它的大小是有限的），或`byte[]`，或其他东西（不幸的是，`BitSet`不提供进行这些转换的方法，因此您需要手动实现它们）。

当您决定要在数据库中使用哪种数据表示时，您需要告诉 JPA 应用必要的转换。有两种选择：

*   在 getter 和 setter 中实现转换。例如，如下所示：

    ```
    @Entity
    @Table(name = "myTable")
    @Access(AccessType.FIELD)
    public class MyClass {
        ...
        @Transient // Do not store this field
        protected BitSet tags;

        @Access(AccessType.PROPERTY) // Store the property instead
        @Column(name = "Tags")
        byte[] getTagsInDbRepresentation() {
            ... // Do conversion
        }

        void setTagsInDbRepresentation(byte[] data) {
            ... // Do conversion
        }
        ...
    } 
    ```

*   使用特定于提供程序的扩展来隐式执行转换（例如， Hibernate 中的[自定义类型](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch06.html#types-custom)）。这种方法允许您在不同的实体中重用您的类型转换逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T19:25:19.117

您可以在 getter 方法中使用以下任何转换

```
byte[] bytes = bitSet.toByteArray();
long[] longs = bitSet.toLongArray(); 
```

# sql - 为什么这个选择不起作用

> ID：12390073
> 
> 赞同：1
> 
> 时间：2012-09-12T14:08:01.873
> 
> 标签：sql, sql-server

我正在尝试学习 sql，但出现此错误 - 这是什么意思？

我正在尝试：获得 GDP 比欧洲任何国家都高的国家？

错误：

> [Microsoft][ODBC SQL Server Driver][SQL Server]子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。(SQL-21000)

```
select name, gdp from bbc 
where gdp > 
(
    select gdp from bbc
    where region = 'Europe'
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:09:27.203

这意味着查询`select gdp from bbc where region = 'Europe'`返回多于 1 行，并且`where gpd >`条件不能与多个值进行比较。您将需要更新查询以仅返回 1 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:09:17.923

错误的原因是您的子查询返回多个值。

根据您的要求，如果您需要`gdp`大于欧洲 GDP 的**每一个，您应该使用此查询：**

```
SELECT
  name,
  gdp
FROM
  bbc 
WHERE gdp > 
  (
    SELECT
      MAX(gdp)
    FROM
      bbc
    WHERE
      region = 'Europe'
  ) 
```

或者这个，如果你需要`gdp`大于欧洲的国内生产总值的**至少一个**（差异只是`MIN`vs `MAX`）：

```
SELECT
  name,
  gdp
FROM
  bbc 
WHERE gdp > 
  (
    SELECT
      MIN(gdp)
    FROM
      bbc
    WHERE
      region = 'Europe'
  ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:09:49.510

运行这部分查询

从 bbc 中选择 gdp，其中 region = 'Europe'

如果它返回超过 1 行，它将失败。您需要在 where 子句中更具选择性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:09:59.147

您可以尝试使用一个值 - 基于`Min , Max or TOP 1`

注意：您不能将一个值与集合进行比较。

```
select name, gdp from bbc 

where gdp > 

(select TTOP(1) gdp from bbc where region = 'Europe') 
```

或者

```
 select name, gdp from bbc 

    where gdp > 

    (select Max(gdp) from bbc where region = 'Europe') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T14:10:17.097

该消息充分描述了错误：您的表在欧洲有许多国家，因此`>`如果子查询中没有一些聚合或更多约束，则无法应用运算符：

```
select name, gdp from bbc 

where gdp > 

(
select max(gdp) from bbc
where region = 'Europe'

) 
```

相加`max`可确保准确选择一个数字，该数字是所有欧洲国家¹中最高的 GDP 。

* * *

¹你不妨马上选择德国的GDP :)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T14:11:13.830

**[为学术任何操作员](http://msdn.microsoft.com/en-us/library/ms175064.aspx)除尘的好地方！**

```
select name, gdp from bbc 
where gdp > ANY
(
select gdp from bbc
where region = 'Europe'
) 
```

“……比欧洲**任何国家都大……”。**就像回答一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T14:09:22.507

当内部查询返回超过 1 个值时会发生这种情况。尝试：

```
select name, gdp from bbc where gdp > (select TOP 1 gdp from bbc where region = 'Europe') 
```

# c# - 我们是否需要客户端来接受客户端系统上的 SFTP 文件传输？

> ID：12390078
> 
> 赞同：0
> 
> 时间：2012-09-12T14:08:13.777
> 
> 标签：c#, .net, sftp, sharpssh

如果这是一个基本问题，请原谅。

我正在使用 c# (SharpSSH) 进行 SFTP 文件传输，我只想知道我们是否需要在另一个系统上安装一个客户端来接收文件。

请建议我在哪里可以获得相关信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:17:27.500

是的，您需要接收设备上的某些东西，特别是在 SFTP 协议的正确端口上侦听的软件。您没有指定目标服务器，但请参阅[https://serverfault.com/questions/8411/what-is-a-good-ssh-server-to-use-on-windows](https://serverfault.com/questions/8411/what-is-a-good-ssh-server-to-use-on-windows)以了解 Windows SSH 服务器。

请参阅[https://serverfault.com/questions/50577/what-is-the-difference-between-sftp-port-22-or-port-990](https://serverfault.com/questions/50577/what-is-the-difference-between-sftp-port-22-or-port-990)和[https://serverfault.com/questions/74176/what- port-does-sftp-use](https://serverfault.com/questions/74176/what-port-does-sftp-use)以获取有关所用端口的更多信息。

# java - 在 Spring WebFlow 项目中获取 Windows NT 用户信息

> ID：12390080
> 
> 赞同：0
> 
> 时间：2012-09-12T14:08:17.317
> 
> 标签：java, windows, spring, spring-mvc, spring-webflow

我正在开发一个 Spring WebFlow 项目，该公司要求删除登录过程，并以某种方式从工作站获取 windows NT 用户。

有谁知道有什么方法可以做到这一点？

请帮帮我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:20:02.230

您正在寻找的是[NTLM](http://en.wikipedia.org/wiki/NTLM)，快速搜索显示此博客条目：[http ://blog.mediasoft.be/ntlm-with-spring-security-20](http://blog.mediasoft.be/ntlm-with-spring-security-20)

# vb.net - VB.NET - 如何从 PropertyInfo 获取程序集？

> ID：12390082
> 
> 赞同：0
> 
> 时间：2012-09-12T14:08:18.980
> 
> 标签：vb.net, .net-assembly, propertyinfo

我需要能够使用反射动态地实例化一个对象。此时我有一个`PropertyInfo`并且需要在调用该方法`Assembly`之前获取该对象的。`CreateInstance`

代码如下所示：

```
Dim subObjectPropInfo As PropertyInfo = GetPropertyInfo(baseObject, "Name")
Dim asm As Assembly = ?????
Dim subObjType As Type = asm.GetType(subObjectPropInfo.PropertyType.FullName)
Dim subObject As Object = Activator.CreateInstance(subObjType) 
```

问题是：如何从对象中获取需要实例化的`PropertyInfo`对象的程序集？是否可以 ？如果没有，有什么办法呢？

我过去总是使用相同的程序集，所以这样做的方式并不是真正动态的。现在对象来自多个程序集，不能像以前那样完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:13:27.277

尝试使用 PropertyInfo 对象中的 PropertyType.Assembly 属性。

```
subObjectPropInfo.PropertyType.Assembly 
```

# java - 覆盖共享网络文件夹上的 SQLite 数据库

> ID：12390087
> 
> 赞同：0
> 
> 时间：2012-09-12T14:08:46.157
> 
> 标签：java, sqlite

我在共享文件夹上有一个 SQLite3 数据库。我想从 Java 应用程序覆盖 db 文件。尽管此文件的读写流量较低，但我想确保 a) 覆盖不会损坏 db 文件，并且 b) 任何可能希望访问 db 文件的人基本上会看到它被锁定，直到覆盖完成了。我目前的计划看起来像这样......

```
String query = "BEGIN EXCLUSIVE TRANSACTION";
/* Execute this query*/
File sourceFile = new File(LocalPath);
File destFile = new File(DbPath);

InputStream inStream = new FileInputStream(sourceFile);
OutputStream outStream = new FileOutputStream(destFile);

byte[] buffer = new byte[1024];

int length;

while((length = inStream.read(buffer)) > 0) {
    outStream.write(buffer, 0, length);
}

inStream.close();
outStream.close();

/* Now release lock */

query = "ROLLBACK TRANSACTION";

/* Execute query */ 
```

所以在这里阅读 SQLite 的指导[http://www.sqlite.org/howtocorrupt.html](http://www.sqlite.org/howtocorrupt.html)，看起来这个锁会存在于日志中，并在我运行回滚事务时在复制后更新。同时，如果客户端在我复制时尝试访问 Db，我想他们只是找不到该文件，而我的 SQLite 驱动程序假定该 db 不存在。对？

我的问题是......在数据库上加锁是否有争议？有没有更好的策略或方法让数据库看起来被锁定而不是丢失？另外，我是否在数据库损坏中冒着巨大的风险，这使得这不可行？我的另一个想法是锁定 db 文件，将新文件写入不同的名称，然后在写入完成后重命名，然后释放锁......对此有什么想法吗？

不确定覆盖数据库文件是否是一个绝妙的主意，但对于我拥有的资源，我能想到的唯一可行的事情（通过网络在共享文件夹中的数据库上运行大量事务的速度慢得令人无法接受。我知道我在共享文件夹上使用 SQLite 数据库时存在更高的损坏风险）。我正在本地编写更新，然后让用户选择“提交”更改并启动 db 文件复制。

除了回答我的问题外，欢迎对这个案例提出任何一般性建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:11:07.607

[备份 API](http://www.sqlite.org/backup.html)允许您覆盖数据库。

（我不知道你的 Java 包装器是否公开了这个 API。）

# c# - 组合框和实体框架

> ID：12390091
> 
> 赞同：2
> 
> 时间：2012-09-12T14:09:02.433
> 
> 标签：c#, visual-studio-2010, entity-framework-4, combobox

我正在使用 Winforms、C#、VS2010 和实体框架编写一个简单的第一个应用程序。基本上，我正在使用一个丰富的数据库，并且我已经设置了框架，足以成功地使用 Work Order 表的子集填充 DataGridView 控件。

现在，我想在表单 ("cbProjectID") 上放置一个组合框，其值为 ProjectID，DisplayValue 为 ProjectNbr。我只想将项目放在与 WorkOrders 相关的组合框列表中，并且该集合中只有唯一的 ProjectID（一个项目可能有几十个工作订单....）

我假设我需要使用 LINQ 从 EF 生成一个列表。我是 LINQ 的新手，我还没有弄清楚...到目前为止，这是我的代码...

```
using System;
using CPASEntityFramework;
using System.Data.Entity;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace BrowseWorkOrders
{
    public partial class BrowseWOs : Form
    {
        public BrowseWOs()
        {
            InitializeComponent();
        }

        private void BrowseWOs_Load(object sender, EventArgs e)
        {
            var context = new CPASEntities();
            var query = context.tblWorkOrders.Where(c => c.ProjectID==8);
            tblWorkOrderBindingSource.DataSource = query.ToList();

        //  Now, I want to load up the Combo Box with all the projects in the Work Order Table

        }
    }
} 
```

我一直在通过网络试图找到我理解的方法，但我失败了。也许有人可以帮助我。这是我的数据源（我假设我不应该使用 tblProject，而是使用 tblWorkOrder 中的 tblProject 来获取我的子集......）

![实体框架数据源](../Images/5ee1736d2697143aef0dcd5dca0ca888.png)

任何帮助和/或指导将不胜感激。

* * *

这是现在的代码......

```
namespace BrowseWorkOrders
{
    public partial class BrowseWOs : Form
    {
        public BrowseWOs()
        {
            InitializeComponent();
        }

        private void BrowseWOs_Load(object sender, EventArgs e)
        {
            // Following loads up all Projects into the cbProjectID Combo Box

            var context = new CPASEntities();
            var PrID = context.qryProjectIDNbrDescs.ToList();
            cbProjectID.DataSource = PrID;
            cbProjectID.ValueMember = "ID";
            cbProjectID.DisplayMember = "ProjectNbr";
        }

        private void cbProjectID_SelectedIndexChanged(object sender, EventArgs e)
        {
            var context = new CPASEntities();
            var query = context.tblWorkOrders.Where(c => c.ProjectID == (int)cbProjectID.SelectedValue).ToList();
            tblWorkOrderBindingSource.DataSource = query;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:17:51.497

您需要顶部的 tblProject，因为另一个仅用于单个 WorkOrder。但是，您需要使用至少拥有 WorkOrder 的人来过滤列表：

```
var projects = context.tblProjects.Where(p => p.tblWorkOrders.Any()).ToArray();
cbProjectID.DataSource = projects;
cbProjectID.ValueMember = "ProjectID";
cbProjectID.DisplayMember = "ProjectNbr"; 
```

# windows - MSP 文件仅提取属于新组件的文件

> ID：12390096
> 
> 赞同：2
> 
> 时间：2012-09-12T14:09:15.143
> 
> 标签：windows, windows-installer, patch, msp, advanced-installer

我使用旧的（目标映像）msi 和新的（升级映像）创建了一个带有[高级安装程序的补丁。](http://www.advancedinstaller.com)检查 MSP 文件我发现它包含修改过的和全新的文件。问题是在安装过程中它只安装“添加”的文件。现有文件将被忽略。我已经尝试过 MSIEXEC 开关，例如：

*   重新安装=全部
*   REINSTALLMODE=sumo / aums / omus 等...
*   升级=“是”
*   IS_MINOR_UPGRADE = "1"

..以不同的顺序和组合（即“REINSTALLMODE=aums REINSTALL=ALL”），所以不要仅仅通过告诉我尝试 REINSTALLMODE=omus 或类似的东西来回复或评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:25:24.663

在创建补丁时，需要遵循[一组规则，您是否检查过这些规则？](http://www.advancedinstaller.com/user-guide/patches.html)破坏其中之一可能会导致意外行为，例如您现在遇到的行为。

要检查规则，您可以从项目文件之间的差异开始，因为它们是标准 XML 文件，并检查它们的产品代码、组件 GUID 等......例如，文件夹同步是补丁发布时遇到的常见问题创建，因为这会更改组件 GUID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:07:26.010

出于某种奇怪的原因，我想更新的所有核心组件（exe、dll）都设置为“不要在 Windows Installer 中注册此组件”。我想这是某种项目错误，因为它非常古老并且是通过不同的高级安装程序版本（7、8 和 9）迁移的。

无论如何，即使使用了固定补丁，我也无法正确更新我的应用程序。Windows 安装程序不断要求我浏览目标图像 msi 文件（以前版本的缓存安装程序）。

但是，并非我的所有客户都保留这些文件（通常这些缓存文件存储在 %APPDATA% 文件夹中）。所以我找到了一个解决方法：

1.  我已应用“哈希文件”选项以创建[MsiFileHash 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370107%28v=vs.85%29.aspx)
2.  我已将我的 msp 补丁打包在一个引导程序（exe 文件）中，该程序使用 TWICE 启动它，并带有以下命令行参数：

第一次：

```
"myPatch.msp" /n {150F6CE2-8C12-414B-9377-F087A62E6B67} REINSTALLMODE=c /qb 
```

第二次：

```
"myPatch.msp" /n {150F6CE2-8C12-414B-9377-F087A62E6B67} REINSTALLMODE=dep /qb 
```

**REINSTALLMODE=c**开关强制基于哈希的文件比较算法，因此不再需要原始设置源

**REINSTALLMODE=dep**恢复所有其他[丢失的文件、未知或不同（来自目标）版本的文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371182%28v=vs.85%29.aspx)

我希望此解决方法对使用除 Advanced Installer 之外的 MSI/MSP 创作工具的人有用

# java - 从其他 Bean 填充 Bean

> ID：12390099
> 
> 赞同：0
> 
> 时间：2012-09-12T14:09:22.137
> 
> 标签：java, spring, hibernate

我想从其他 bean 中填充 bean。

```
 Example:

 // this is mapped to db using hibernate.
 class A {
    string name;
    string age;
    Date dateA;
    B obj;
 }

 // this was mapped to db but now I'd like to populate it from class A member dateA;
 class B{
    Date date;
 } 
```

当我尝试设置 B 对象时，我得到了 nullpointerexception。知道如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:19:52.873

Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。

```
Mapper mapper = new DozerBeanMapper();
DestinationObject destObject =  mapper.map(sourceObject, DestinationObject.class); 
```

有关更多信息，请关注 [推土机](http://dozer.sourceforge.net/documentation/gettingstarted.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:36:51.807

进行这种映射的一个非常流行的库是[Apache commons BeanUtils](http://commons.apache.org/beanutils/)。

它具有将一个 bean 属性复制到另一个的全面功能。

[您可以在此处](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/package-summary.html#package_description)和[此处查看](https://discursive.atlassian.net/wiki/display/CJCOOK/Working+with+Beans%3a+Commons+BeanUtils)使用示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:27:35.413

You should instantiate `B Obj = new B()` before invoking `obj.setDate()` .

If you are already doing this, If i am missing something please provide sufficient info in the question.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:28:32.617

[Apache Commons BeanUtils](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html) has several different methods to accomplish your goal.

You could use `BeanUtils.copyProperties()`. There is also `BeanUtils.cloneBean()`.

# jquery - 向通过 ajax 提交的表单添加验证

> ID：12390101
> 
> 赞同：0
> 
> 时间：2012-09-12T14:09:25.440
> 
> 标签：jquery, html, validation

表单通过ajax提交。

```
function post(url,formId) {
    jQuery.post(url, jQuery('#' + formId).serialize(), function(d) {
        jQuery("#response").load("<?php echo get_bloginfo('wpurl').'/success.php'; ?>", function() { Cufon.refresh(); });
    });
} 
```

我有这个表格

```
 <form name="checkout_address" method="post" id="shippingF" 
     onsubmit="post('/process.php','shippingF');return false;">
    <div id="shipping-userdetails">
    <fieldset>
    <legend>Recipient Details</legend>
    <div>
    <label for="uname">Company:</label> 
    <input type="text" name="company" value="">
    </div>

    <div>
    <label for="firstname">First Name: </label> <input type="text" id="firstname" name="firstname" value="" size="50">
    </div>

    <div>
    <label for="lastname">Last Name: </label> <input type="text" id="lastname" name="lastname" value="" size="50">
    </div>

    <div>
    <label for="email">Email: </label> <input type="text" id="email" name="email" value="" size="50">
    </div>
    </fieldset>
    </div>
    <input type="submit" value="submit">
    </form> 
```

现在我想在表单上添加验证，以便在提交表单之前首先对其进行验证。如果表单有错误，错误文本将显示在错误字段下方，并且表单未提交。

我是 jquery 的新手。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:11:58.033

我建议使用这样的 jQuery 验证插件：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

# c++ - ＃包括 未找到，文件存在

> ID：12390104
> 
> 赞同：0
> 
> 时间：2012-09-12T14:09:42.410
> 
> 标签：c++, visual-studio-2012, atl

使用 Visual Studio 2012 时可以创建 MFC 项目，但无法编译。找不到所有 ATL 标头。例如，如果我创建了一个简单的基于对话框的 MFC 应用程序，并且我从项目创建中对其进行编译，我会发现 atltrace.h 无法找到（包含在 afx.h 中）。

所以我在我的文件系统中搜索了 atltrace.h，并在“$(VCInstallDir)atlmfc\include\atltrace.h”中找到了它。知道我在项目属性中搜索了 VC++ 目录。对于包含路径，它显示“$(VCInstallDir)include;$(VCInstallDir)atlmfc\include;$(WindowsSDK_IncludePath);”。因此，显然包含 atltrace.h 的文件夹是项目的系统包含文件夹，并且该文件存在于那里。即使#include 导致文件不存在的错误。

你们中有人知道为什么会这样吗？

在此先感谢并问候 Muepe

# javascript - 在 node.js TCP 套接字上复制数据

> ID：12390107
> 
> 赞同：1
> 
> 时间：2012-09-12T14:09:50.647
> 
> 标签：javascript, sockets, node.js, tcp

我正在通过 TCP 套接字连接到节点服务器，并且在每次后续调用中重复写入套接字的数据存在问题。

我的服务器调用以下函数写入每个连接的客户端：

```
clients.forEach(function (client) {
    var string = "hello";
    client.write(string);
    client.on('data', function(data) {
        console.log(data.toString());
    });
}); 
```

这有效并将字符串“hello”广播到每个连接的套接字。这个想法是每个客户端都会回复一个响应，该响应将输出到 console.log。

在每个客户上，我都有以下内容：

```
client.on('data', function(data) {
    console.log(data);  
    var response = "Hello back";
    console.log('RES: ' + response);
    client.write(response);
}); 
```

每个客户端都会收到 hello 并响应请求。问题出现了，在每个 N 响应中，服务器从每个客户端接收 N 次所有内容。

因此，在第一次交换时，它很简单

你好

你好回来

但第二个是：

你好

你好回来

你好回来

任何想法为什么会发生这种情况？我是否需要在每次交换时刷新套接字或其他东西？

# xml - 使用 xslt 删除重复节点，将第一个节点保留在 XML 中

> ID：12390110
> 
> 赞同：-1
> 
> 时间：2012-09-12T14:10:09.903
> 
> 标签：xml, xslt

如果名称重复，我如何删除类型包的节点。我的意思是应该保留第一次出现，而应该删除其他的。看到 package_one 名称在包节点中重复

```
<?xml version="1.0"?>
<coverage branch-rate="0.53968253968278" branch-total="50" line-rate="0.66864343958488" line-total="2000" timestamp="1346297959" version="gcovr 2.3">
<sources>
    <source>
        ./.
    </source>
</sources>
<packages>
<package branch-rate="0.52380952380967" branch-total="15" line-rate="0.75148257968866" line-total="1000" complexity="0.0" name="package_one">
<classes>
<class branch-rate="0.0" complexity="0.0" filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
                <lines>
                    <line branch="false" hits="0" number="128" condition-coverage="100%"/>
                    <line branch="false" hits="0" number="192" condition-coverage="100%"/>                      
                </lines>
            </class>
        </classes>
<class branch-rate="0.5" complexity="0.0" filename="good.cpp" line-rate="1.0" name="good1.cpp">
                <lines>
                    <line branch="false" hits="96" number="8" condition-coverage="100%"/>                       
                </lines>
            </class></package>
    <package branch-rate="0.571428571429" branch-total="10" complexity="0.0" line-rate="0.00593031875463" line-total="1000" name="package_one">
        <classes>
            <class branch-rate="0.0" complexity="0.0" filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
                <lines>
                    <line branch="false" hits="0" number="128" condition-coverage="100%"/>                      
                </lines>
            </class>
        </classes>
    </package>      
</packages> 
```

预期的：

```
<?xml version="1.0"?>
<coverage branch-rate="0.53968253968278" branch-total="50" line-rate="0.66864343958488" line-total="2000" timestamp="1346297959" version="gcovr 2.3">
<sources>
    <source>
        ./.
    </source>
</sources>
<packages><package branch-rate="0.52380952380967" branch-total="15" line-rate="0.75148257968866" line-total="1000" complexity="0.0" name="package_one"><classes>
            <class branch-rate="0.0" complexity="0.0" filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
                <lines>
                    <line branch="false" hits="0" number="128" condition-coverage="100%"/>
                    <line branch="false" hits="0" number="192" condition-coverage="100%"/>                      
                </lines>
            </class>
        </classes><class branch-rate="0.5" complexity="0.0" filename="good.cpp" line-rate="1.0" name="good1.cpp">
                <lines>
                    <line branch="false" hits="96" number="8" condition-coverage="100%"/>                       
                </lines>
            </class></package>      
</packages> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:35:32.190

**I. 这个简单的 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="package[preceding::package]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<coverage branch-rate="0.53968253968278"
 branch-total="50" line-rate="0.66864343958488"
 line-total="2000" timestamp="1346297959" version="gcovr 2.3">
    <sources>
        <source>
        ./.
        </source>
    </sources>
    <packages>
        <package branch-rate="0.52380952380967"
          branch-total="15" line-rate="0.75148257968866"
          line-total="1000" complexity="0.0" name="package_one">
            <classes>
                <class branch-rate="0.0" complexity="0.0"
                 filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
                    <lines>
                        <line branch="false" hits="0" number="128" condition-coverage="100%"/>
                        <line branch="false" hits="0" number="192" condition-coverage="100%"/>
                    </lines>
                </class>
            </classes>
            <class branch-rate="0.5" complexity="0.0"
             filename="good.cpp" line-rate="1.0" name="good1.cpp">
                <lines>
                    <line branch="false" hits="96" number="8" condition-coverage="100%"/>
                </lines>
            </class>
        </package>
        <package branch-rate="0.571428571429"
         branch-total="10" complexity="0.0" line-rate="0.00593031875463"
         line-total="1000" name="package_one">
            <classes>
                <class branch-rate="0.0" complexity="0.0"
                 filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
                    <lines>
                        <line branch="false" hits="0" number="128" condition-coverage="100%"/>
                    </lines>
                </class>
            </classes>
        </package>
    </packages>
</coverage> 
```

**产生想要的正确结果**：

```
<coverage branch-rate="0.53968253968278" branch-total="50" line-rate="0.66864343958488" line-total="2000" timestamp="1346297959" version="gcovr 2.3">
   <sources>
      <source>
        ./.
        </source>
   </sources>
   <packages>
      <package branch-rate="0.52380952380967" branch-total="15" line-rate="0.75148257968866" line-total="1000" complexity="0.0" name="package_one">
         <classes>
            <class branch-rate="0.0" complexity="0.0" filename="eBayBotAPI.cpp" line-rate="0.0" name="BotAPI.cpp">
               <lines>
                  <line branch="false" hits="0" number="128" condition-coverage="100%"/>
                  <line branch="false" hits="0" number="192" condition-coverage="100%"/>
               </lines>
            </class>
         </classes>
         <class branch-rate="0.5" complexity="0.0" filename="good.cpp" line-rate="1.0" name="good1.cpp">
            <lines>
               <line branch="false" hits="96" number="8" condition-coverage="100%"/>
            </lines>
         </class>
      </package>
   </packages>
</coverage> 
```

**说明**：

正确使用和覆盖[**身份规则**](http://www.dpawson.co.uk/xsl/sect2/identity.html)。

* * *

**二、使用密钥的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kElemByName" match="*" use="name()"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "package[not(generate-id()=generate-id(key('kElemByName', name())[1]))]"/>
</xsl:stylesheet> 
```

当这个转换应用于同一个 XML 文档（上图）时，会产生同样想要的正确结果。

**说明**：

正确使用[**同一性规则**](http://www.dpawson.co.uk/xsl/sect2/identity.html)和**[孟池分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**。

* * *

**三、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kElemByName" match="*" use="name()"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "package[not(. is (//package)[1])]"/>
</xsl:stylesheet> 
```

**说明**：

正确使用 XPath 2.0 运算符**[是](http://www.w3.org/TR/xpath-functions/#func-is-same-node)**.

# titanium - 使用tidesdk的多点触控应用

> ID：12390115
> 
> 赞同：0
> 
> 时间：2012-09-12T14:10:16.643
> 
> 标签：titanium, multi-touch, tidesdk

我需要使用 HTML5（Javascript 和 CSS3）开发桌面多点触控应用程序，因为我无法制作 adobe air 应用程序，因为我无法在 actionscript 中开发我正在寻找使用 Tidesdk 或钛的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:38:43.640

如果您正在开发 html5 应用程序，您可能需要等待 1.3.0 版本（即将推出），因为它会有更新版本的 webkit。关注潮汐dk.org 或在推特上关注潮汐。

# spring - 在 Spring 应用程序中运行 junit 测试时访问 h2 Web 控制台

> ID：12390116
> 
> 赞同：27
> 
> 时间：2012-09-12T14:10:16.267
> 
> 标签：spring, junit, h2

我正在构建一个 Spring 应用程序，当我从 Web 浏览器运行 JUnit 测试时，我需要检查我的 H2 内存数据库。

在我的 Spring 配置中，我有一个 bean，它负责创建我的数据库模式并用一些数据填充它，这些数据将在我的 JUnit 测试中使用。我还在我的测试上下文中添加了一个 bean，它创建了一个 Web 服务器，我最终将在其中查找我的数据。

```
<bean id="org.h2.tools.Server-WebServer" class="org.h2.tools.Server"
    factory-method="createWebServer" init-method="start" lazy-init="false">
    <constructor-arg value="-web,-webAllowOthers,-webPort,11111" />
</bean> 
```

一切似乎都很好，因为数据库已正确填充，因为我可以从我的 JUnit 测试中访问其数据，并且 H2 服务器仅在我处于测试阶段时运行（我可以知道，因为如果我尝试访问 my_ip:111111在调试我的测试之前我无法连接，但一旦我开始测试我就可以连接）。

无论如何，如果我从 Web 浏览器打开我的 H2 控制台，则不会显示任何架构。有任何想法吗？？

非常感谢！！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-12-03T14:35:31.660

由于这可能是一个测试调试功能，您可以在运行时使用**@Before**添加它：

```
import org.h2.tools.Server;

/* Initialization logic here */

@BeforeAll
public void initTest() throws SQLException {
    Server.createWebServer("-web", "-webAllowOthers", "-webPort", "8082")
    .start();
} 
```

然后连接到**http://localhost:8082/**

注意：除非您需要将此代码作为 CI 构建的一部分运行，否则您需要在完成调试后删除此代码

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-03T19:32:35.907

以供将来参考，这是另一种方法：

1.  启动数据库和 Web 服务器（版本可能不同）：

    `$ cd .../maven_repository/com/h2database/h2/1.4.194 $ java -cp h2-1.4.194.jar org.h2.tools.Server -tcp -web -browser TCP server running at tcp://169.254.104.55:9092 (only local connections) Web Console server running at http://169.254.104.55:8082 (only local connections)`

2.  将代码中测试的数据库 url 设置为`jdbc:h2:tcp://localhost:9092/mem:mytest`.

3.  运行或调试测试。
4.  在步骤 1 中打开的浏览器窗口中单击`Connect`。

H2 的 Jar 文件可以在[https://mvnrepository.com/artifact/com.h2database/h2](https://mvnrepository.com/artifact/com.h2database/h2)下载。

可以通过`@Before`像 snovelli 的回答一样在测试文件中启动服务器，但前提是在之后建立与数据库的连接，这可能是一个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T14:52:00.900

我想问题是你直接从你的应用程序连接到 h2db。不是通过您使用 bean 启动的服务器。因此，您的应用程序和 h2db-web-interface 不能共享一个内存数据库。

您应该将测试中的 jdbcUrl 更改为类似的东西，`jdbc:h2:tcp://localhost/mem:my_DB;DB_CLOSE_DELAY=-1;MODE=Oracle`并且在浏览器中您应该连接到相同的 url。

使用 jdbc url，`jdbc:h2:tcp://localhost/...`所有连接都将通过 h2db-server，您可以在浏览器中查看数据库状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-19T15:52:11.000

如果您已在属性中将 jdbc url 定义为类似 jdbc:h2:mem:db 的内容，则在创建数据库时，它实际上会获得更长的名称。

将 @Autowired DataSource 数据源添加到您的测试类，在某处设置调试点，并使用 dataSource.getConnection() 检查该数据源并查看 url 属性。如果我此刻正在跑步，那就是

jdbc:h2:mem:43ed83d6-97a1-4515-a925-a8ba53cd322c

将其插入 web cosole 显示了我所期待的一切。

这不是最直接的方法，但确实有效。

# java - Java GC 概念：CMSInitiatingOccupancyFraction

> ID：12390118
> 
> 赞同：17
> 
> 时间：2012-09-12T14:10:21.643
> 
> 标签：java, jakarta-ee, memory, memory-management

我配置了以下内存选项：

`export MEM_OPTS="-Xmx2560m -Xms2560m -XX:NewSize=786m -XX:MaxNewSize=786m -XX:+UseTLAB -XX:MaxPermSize=512m"`

我的GC参数如下：

`export GC1_OPTS="-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:**CMSInitiatingOccupancyFraction=50** -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled -XX:+CMSParallelRemarkEnabled -XX:+UseAdaptiveGCBoundary" export GC2_OPTS="-XX:+ExplicitGCInvokesConcurrent"`

当 CMS 运行时，它会在 2560 MB 的 50% 后运行还是在 512 MB 内存的 50% 后运行？什么概念？

我的总堆内存将等于 2560 + 786 + 512 MB，对吗？

还是`"-XX:NewSize=786m -XX:MaxNewSize=786m"`用于非堆？

请解释一下这个概念。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-12T14:23:41.537

两者都不。老年代的占用率达到50%后才有资格运行，其中老年代的大小是堆的大小减去新生代的大小：2560m - 786m = 1792m，这样就可以在老年代达到896m。但这并不总是唯一的参数。如果您希望它成为唯一的参数，您可能需要添加 -XX:+UseCMSInitiatingOccupancyOnly（尽管根据我的经验，CMS 实际上会在阈值处触发，即使没有它）。

总结一下：

*   `-Xmx`是总堆内存
*   `-XX:NewSize`/`-XX:MaxNewSize`是该堆内新生代的大小范围
*   不同的是老年代的大小范围
*   `-XX:PermSize`/`-XX:MaxPermSize`是永久代的大小范围，也就是非堆内存

# c# - msi 将证书安装到当前用户

> ID：12390123
> 
> 赞同：1
> 
> 时间：2012-09-12T14:10:53.323
> 
> 标签：c#, certificate, windows-installer

我有一个 Visual Studio MSI 安装程序，它应该将我的测试证书安装到当前用户，并将我的测试 CA 安装到根本地计算机。但对于当前用户，它不起作用。我没有收到错误，但它没有添加到其他证书中。我的证书是嵌入式资源。

```
 using (Stream CertStream = Assembly.GetExecutingAssembly().GetManifestResourceStream(GetType(), @"Resources.client_certificate.cer"))
            {
                byte[] RawBytes = new byte[CertStream.Length];
                for (int Index = 0; Index < CertStream.Length; Index++)
                {
                    RawBytes[Index] = (byte)CertStream.ReadByte();
                }

                X509Certificate2 cert = new X509Certificate2(RawBytes);
                X509Store store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
                store.Open(OpenFlags.ReadWrite);
                store.Add(cert);
                store.Close(); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:55:14.343

请注意，Microsoft 已弃用该项目类型，并且不在 VS2012 中。此外，如果您迁移到其他工具（例如 WindowsInstaler XML），您会发现 MSI 扩展使这更容易，而无需编写您自己的自定义操作。如果您选择不迁移到 WiX，您可以在 WiX 中构建一个合并模块并将其合并到您的 VDPROJ MSI。

[证书元素（Iis 扩展）](https://stackoverflow.com/questions/12390123/msi-install-certificates-to-currentuser)

[使用 Windows Installer XML 增强 InstallShield - 证书](http://blog.iswix.com/2011/01/augmenting-installshield-using-windows_19.html)

# ruby-on-rails - 如果用户停留在一个页面中并且不点击应用程序，请检查 Rails 中的活动用户

> ID：12390124
> 
> 赞同：0
> 
> 时间：2012-09-12T14:10:55.360
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试构建一个 Rails 应用程序并尝试查看哪些用户在线。如果用户单击我的应用程序，我知道如何实现向在线用户显示的方法，但假设我的应用程序只有 1 页，因此没有要单击的链接。我如何在线跟踪用户而无需用户点击任何地方？此外，如果用户空闲 15 分钟，我将需要将状态更新为空闲而不是在线，并且如果用户关闭浏览器或导航到另一个页面，则状态将变为离线。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:20:14.753

大概它们以某种方式与页面交互（也许是 ajax？），因此您需要检测这些交互并使用它们来确定用户是否空闲。您可以使用 javascript 的[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)来确定他们何时离开页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:22:31.383

我建议对您的服务器端进行*AJAX ping ，例如：*

```
$.get( '/user_activity/ping' ); 
```

您可以使用[JS 计时器](http://www.w3schools.com/js/js_timing.asp)自动执行此操作，也可以在用户以某种方式与页面交互时显式执行此操作。

# php - PHP 会话限制

> ID：12390127
> 
> 赞同：0
> 
> 时间：2012-09-12T14:11:13.393
> 
> 标签：php, session

我正在升级我不久前建立的网站。此更新是由于在前后页面之间传递数据的错误。

我正在存储应该传入的所有数据`$_SESSION`..但我记得在某处读到这不好，尤其是当数据很大时..所以我想知道，处理时使用的限制是什么`$_SESSION`，如果有是存储和检索运行时数据的任何替代方案..

我还有一个保存功能，可以将数据存储在数据库中以备后用。

希望我能在这里与专家一起找到答案:)

# perl - 给定一个查询字符串和它来自的空表单 html 生成填充 html

> ID：12390129
> 
> 赞同：0
> 
> 时间：2012-09-12T14:11:17.000
> 
> 标签：perl, post, get, query-string, forms

我有一个带有空表单的 html，并且我有填写这些表单时生成的查询字符串。

如何将它们合并到一个填充的 html 页面中？

希望你能给我一个基于 perl 的解决方案。

**编辑：**我有一个基于 WWW::Mechanize 和 perl**的网络爬虫。**我正在保存 html 内容以生成会话的 hmtl 幻灯片，但是我无法使用填充值保存 html。

我查看了机械化源，它正在创建一个 HTML::Form 对象来处理表单。我查看了 HTML::Form 并且看不到如何将对象转回 html，只有一个转储方法。

HTML::Form 代码中有一个部分可以让我生成 POST 或 GET 请求，我认为这可能是通过将请求与原始 html 合并来生成填充 hmtl 的一个很好的起点。

```
if ($method eq "GET") {
    require HTTP::Request;
    $uri = URI->new($uri, "http");
    $uri->query_form(@form);
    return HTTP::Request->new(GET => $uri);
}
elsif ($method eq "POST") {
    require HTTP::Request::Common;
    return HTTP::Request::Common::POST($uri, \@form,
        Content_Type => $enctype);
} 
```

所以我可以在我完成填写表格后在我的机械化程序中使用该代码片段以获取最终的 POST 或 GET 请求，但这就是我所要做的:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:14:37.403

我假设您想显示带有其值的表单。

您所要做的就是将表单元素的值设置为查询字符串中的值。

如果您提供更多信息，我们可以告诉您更具体的答案...

# c++ - C++ Boost库中的链接错误

> ID：12390131
> 
> 赞同：3
> 
> 时间：2012-09-12T14:11:24.460
> 
> 标签：c++, boost, linker, 32bit-64bit

我是 C++ Boost 库的新手。

我已经在 BoostPro Computing 网站上安装了 Boost 1.51，包括 32 位和 64 位版本（位于两个不同的文件夹（boost_1_51 和 boost_1_51_x64）。

我尝试使用 Visual Studio 2005 SP2（在 32 位 Windows 操作系统上）为 x64 构建并得到以下错误：

```
error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ) 
```

我在项目配置中进行了库链接（其他包含和库目录的提升路径）。例如：

> **包括**：C:\Program Files\boost\boost_1_51_x64\
> 
> **库**：C:\Program Files\boost\boost_1_51_x64\lib

谁能帮我找出上面的链接错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T11:51:22.483

从上面的评论：

> 我通过重新安装boost库（64位版本）解决了这个问题。也许我上次安装时出现了一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T13:14:39.247

我通过手动将“boost_system-vc120-mt-1_61.lib”（您的版本将不同）添加到项目中来解决此问题。我正在使用预构建的 Windows 二进制文件[https://sourceforge.net/projects/boost/files/boost-binaries/](https://sourceforge.net/projects/boost/files/boost-binaries/)

# sed - 从最后一行删除逗号

> ID：12390134
> 
> 赞同：8
> 
> 时间：2012-09-12T14:11:32.983
> 
> 标签：sed, awk, grep

如何从文件的最后一行删除逗号？这是文件：

```
# cat ox_data_archive_r_20120727.json
{"name": "secondary_ua","type":"STRING"},
{"name": "request_ip","type":"STRING"},
{"name": "cb","type":"STRING"}, 
```

以下将从所有 3 行中删除逗号。

```
# sed 's/,$/\ /' ox_data_archive_r_20120727.json
{"name": "secondary_ua","type":"STRING"}
{"name": "request_ip","type":"STRING"}
{"name": "cb","type":"STRING"} 
```

我只需要删除最后一个逗号。所以输出应该看起来像这样......

```
# cat newfile.json
{"name": "secondary_ua","type":"STRING"},
{"name": "request_ip","type":"STRING"},
{"name": "cb","type":"STRING"} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-12T14:14:54.120

```
$ cat input.txt
{"name": "secondary_ua","type":"STRING"},
{"name": "request_ip","type":"STRING"},
{"name": "cb","type":"STRING"},
$ sed '$s/,$//' < input.txt
{"name": "secondary_ua","type":"STRING"},
{"name": "request_ip","type":"STRING"},
{"name": "cb","type":"STRING"} 
```

来自[GNU sed](https://www.gnu.org/software/sed/manual/html_node/Addresses.html#Addresses)的文档：

> `$`: 此地址匹配输入的最后一个文件的最后一行，或指定`-i`or`-s`选项时每个文件的最后一行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T14:14:58.500

这应该有效：

```
sed '$ s/,$//g' input_file 
```

*   第一个`$`选择最后一行。

您可以添加`-i`并将`sed`更改应用到您的`input_file`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:28:10.630

awk 的答案肯定比 sed 更冗长：

```
awk 'NR>1 {print prev} {prev=$0} END {sub(/,$/,"", prev); print prev}' file 
```

# ios - iOS UIToolbar 识别触摸

> ID：12390135
> 
> 赞同：0
> 
> 时间：2012-09-12T14:11:33.987
> 
> 标签：ios, uitoolbar

我以编程方式制作了一个垂直（外观）工具栏。使用 initWithFrame 我设置了工具栏的宽度和高度并将其发送到最右边。

现在我在工具栏中添加了一个条形按钮项并为其设置了一个操作。但是当我单击工具栏上的任意位置时，正在发送操作消息。而且我查了发件人，发件人不是工具栏而是按钮。

我尝试了另一个水平放置的工具栏，如果我在按钮附近单击，按钮会被视为已点击。而且由于现在我的工具是垂直的（但根据 iOS 是水平的），单击工具栏上的任意位置都会调用该功能。

我只想在单击按钮而不是工具栏时发送消息。

我想使用苹果提供的相机图标，所以我不赞成使用UIButton。（我可以设置自定义图像，但如果我能避免这种情况会很好）我​​也认为放置水平工具栏并使用 CGAffineTransform 可以解决问题。但是如果有干净的方法会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:16:20.050

使用转换绝对是要走的路。

[通过此函数](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformRotate)运行恒等变换并将其设置为您的条形图上的变换。我认为这是一个非常简单的解决方案。

在使用普通帧初始化后立即设置变换应该不难。为避免拉伸，您可以使用您已经使用的值制作该框架，但交换 x 和 y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:38:26.440

我不相信 UIToolbar 支持垂直方向；滚动自己的类似工具栏的控件可能会更好。

# sql - 为什么如果我为临时全局表选择“打开表”在 SQL Server 2005 中不起作用？

> ID：12390140
> 
> 赞同：0
> 
> 时间：2012-09-12T14:12:04.750
> 
> 标签：sql, sql-server-2005, ssms

我在 Management Studio Express 2005 中遇到问题。

如果我选择`Open Table`临时全局表：

![在此处输入图像描述](../Images/de1a0668e8553ec3b741c25c898738c2.png)

不起作用，出现错误：

![在此处输入图像描述](../Images/94a45223ba2e557dfcba76baa1b728fd.png)

但如果我写

```
SELECT * FROM dbo.##tempResults 
```

然后会出现表格内容。

![在此处输入图像描述](../Images/dd8523649a6659f0a59b8e40fa94d279.png)

这个问题有什么解决办法吗？

我有用于 Management Studio 的 SP4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:36:10.730

这个问题没有解决办法，除了：

(a) 使用永久表而不是全局##temp 表。全局##temp 表比永久表能为您带来什么？它们都同样有效地杀死了并发。

(b) 使用 Script Table As > SELECT TO > New Query Editor Window。它不那么直接，但您仍然不必键入，并且您避免了首先使用 Open Table 的糟糕习惯（这会在基础表上放置各种不必要的锁，因为您*可以*选择在网格，假装你正在使用 Excel）。

(c) 超越 SQL Server 2005。在 SQL Server 2008+ 中，菜单选项 Open Table 消失了，现在有两个单独的选项，编辑前 n 行和选择前 n 行。后者做（b）。

# tsql - 从 tsql 汇总中的小计/总计中删除空值

> ID：12390142
> 
> 赞同：5
> 
> 时间：2012-09-12T14:12:23.103
> 
> 标签：tsql, null, rollup

我目前有一个脚本，它使用汇总聚合一些数据：

```
SELECT 
        CASE 
            WHEN GROUPING(Custodian) = 1 
                THEN 'Grand Total'
            WHEN GROUPING(PortfolioID) = 1
                THEN Custodian+''+'Total'
            ELSE Custodian

        END AS Custodian

    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   SUM(AmountTotalBaseEquiv) AS AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD
    ,   SUM(TotalCashPctNAV) AS TotalCashPctNAV 

FROM @ResultSet
WHERE TotalCashPctNAV > 5
GROUP BY Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV WITH ROLLUP

HAVING GROUPING_ID(Custodian
    ,   PortfolioID
    ,   PortfolioBaseCCY
    ,   [Date]
    ,   AmountTotalBaseEquiv
    ,   ExchangeRate
    ,   AmountTotalBaseEquivUSD
    ,   PortfolioNAVUSD 
    ,   TotalCashPctNAV) IN (1,255,511)

ORDER BY CASE WHEN GROUPING(Custodian) = 1 THEN 2 ELSE 1 END, Custodian, TotalCashPctNAV DESC, PortfolioID 
```

这将返回数据，例如：

```
Custodian   PortfolioID PortfolioBaseCCY Date         AmountTotalBaseEquiv  ExchangeRate    AmountTotalBaseEquivUSD PortfolioNAVUSD TotalCashPctNAV
XXXX        TEST        USD              11/09/2012   85708860.21           1               85708860.21             370253861.3     23.15
XXXX  Total NULL        NULL             NULL         85708860.21           NULL            NULL                    NULL            23.15
ZZZZ        TEST1       GBP              11/09/2012   48427.91              0.6225          77795.84                77795.84        100
ZZZZ        TEST2       GBP              11/09/2012   7772.61               0.6225          12486.12                12486.12        100
ZZZZ        TEST3       USD              11/09/2012   1832627.81            1               1832627.81              17343500.68     10.56
ZZZZ  Total NULL        NULL             NULL         1888828.33            NULL            NULL                    NULL            210.56
Grand Total NULL        NULL             NULL         310273031.4           NULL            NULL                    NULL            1051.71 
```

我希望 NULLS 变为 '' 以便只有 Total 标签和两个总和是该特定行上唯一的数据位，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T19:03:27.647

您可以使用 SQL 中的 ISNull() 函数将 NULL 替换为空格，如下所示：

```
SELECT 
    CASE 
        WHEN GROUPING(Custodian) = 1 
            THEN 'Grand Total'
        WHEN GROUPING(PortfolioID) = 1
            THEN Custodian+''+'Total'
        ELSE Custodian

    END AS Custodian

,   isNUll(PortfolioID,'')
,   isNull(PortfolioBaseCCY,'')
,   isNull([Date],'')
,   SUM(AmountTotalBaseEquiv) AS AmountTotalBaseEquiv
,   isNull(ExchangeRate,'')
,   isNull(AmountTotalBaseEquivUSD,'')
,   isNull(PortfolioNAVUSD,'')
,   SUM(TotalCashPctNAV) AS TotalCashPctNAV 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T19:04:01.993

如果您可以接受 NULL 值在数据行和总行中都显示为空字符串，则可以将所有非字符串列转换为字符串并使用 COALESCE（或 ISNULL），例如：

```
SELECT  
        CASE  
            WHEN GROUPING(Custodian) = 1  
                THEN 'Grand Total' 
            WHEN GROUPING(PortfolioID) = 1 
                THEN Custodian+' '+'Total' 
            ELSE Custodian 

        END AS Custodian 

    ,   COALESCE(PortfolioID,'') AS PortfolioID
    ,   COALESCE(PortfolioBaseCCY,'') AS  PortfolioBaseCCY
    ,   COALESCE(CONVERT(char(10),[Date],101),'') AS [Date]
    ,   SUM(AmountTotalBaseEquiv) AS AmountTotalBaseEquiv 
    ,   COALESCE(CONVERT(char(10),ExchangeRate),'') AS ExchangeRate
    ,   COALESCE(CONVERT(char(20),AmountTotalBaseEquivUSD),'') AS AmountTotalBaseEquivUSD
    ,   COALESCE(CONVERT(char(20),PortfolioNAVUSD),'') AS PortfolioNAVUSD
    ,   SUM(TotalCashPctNAV) AS TotalCashPctNAV

FROM @ResultSet 
WHERE TotalCashPctNAV > 5 
GROUP BY Custodian 
    ,   PortfolioID 
    ,   PortfolioBaseCCY 
    ,   [Date] 
    ,   AmountTotalBaseEquiv 
    ,   ExchangeRate 
    ,   AmountTotalBaseEquivUSD 
    ,   PortfolioNAVUSD  
    ,   TotalCashPctNAV WITH ROLLUP 

HAVING GROUPING_ID(Custodian 
    ,   PortfolioID 
    ,   PortfolioBaseCCY 
    ,   [Date] 
    ,   AmountTotalBaseEquiv 
    ,   ExchangeRate 
    ,   AmountTotalBaseEquivUSD 
    ,   PortfolioNAVUSD  
    ,   TotalCashPctNAV) IN (1,255,511) 

ORDER BY CASE WHEN GROUPING(Custodian) = 1 THEN 2 ELSE 1 END, Custodian, TotalCashPctNAV 
```

否则，您可以像使用 Custodian 一样使用 case 表达式来确定哪些行是总计。例如：

```
CASE WHEN GROUPING(Custodian) + GROUPING(PortfolioId) > 0 THEN '' 
     ELSE PortfolioID END AS PortfolioID 
```

# ios - ipad3 kEAGLDrawablePropertyRetainedBacking 错误——已在 ios 6 中修复？

> ID：12390146
> 
> 赞同：0
> 
> 时间：2012-09-12T14:12:35.387
> 
> 标签：ios, opengl-es, uiviewcontroller, ios6

使用 kEAGLDrawablePropertyRetainedBacking 引用已知错误，如下所述：

[ipad 3 - 带有 kEAGLDrawablePropertyRetainedBacking 和视网膜的 openGL 错误？](https://stackoverflow.com/questions/9753230/ipad-3-opengl-bug-with-keagldrawablepropertyretainedbacking-and-retina)

有没有人在 iOS 6 中尝试过这个？我正在解决这个错误。我正在决定是否应该等待 iOS 6 发布此应用程序，或者继续实施解决方法；不想实施解决方法...

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:32:44.900

好的，回答了我自己的问题：是的！在 iOS 6 最新测试版中尝试了我的应用程序，它按预期工作。

# c# - c#参数值到字符串？

> ID：12390149
> 
> 赞同：2
> 
> 时间：2012-09-12T14:12:46.957
> 
> 标签：c#, visual-studio

好吧，我敢肯定我不是唯一一个想知道这个的人=）

简而言之，是否可以使用 VisualStudio 进行转换：

```
string a1, string a2, string a3, string a4, string a5, string  a6 
```

变成一个字符串，如下所示：

```
"'value1', 'value2', 'value3', 'value4', 'value5', value6'" 
```

（不用担心确切的格式，我可以自己处理）？

背景：我经常有调用接受大量参数的存储过程的函数，有时（调试）我需要构建“exec dbo.storedprocname param1，param2 ....”字符串并直接针对服务器运行它。目前我必须手动构建字符串，我希望有一种简单的方法可以在 VisualStudio 的即时窗口中打印出来

**编辑**（根据大众需求）：我正在使用 Linq2SQL（是的，我知道它已经过时了）并且里面有 100 多个 SP。当我需要调试一个函数时，我会在其中一个函数中设置一个中断，以查看它将传递给数据库的内容。所以这将是 RUNTIME。当它到达断点时：

```
public static void MethodCreatedByLINQ2Sql(string param1, string param2, string param3, ...)
{
    context.mystoredprocedure(param1, param2, param3...); //<---breakpoint
} 
```

我想以某种方式（无需指定每个参数）打印出一个分隔字符串，我可以将其剪切并粘贴到 SSMS2008（试图节省时间）以构建这样的字符串

```
exec dbo.mystoredprocedure [['value1', 'value2', 'value3'......]] <--- pasted value from VisualStudio 
```

不，我不想做 SQLInjections 或类似的事情。我只是想节省时间——其中一些 SP 有 20 多个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:14:33.103

这就是你所追求的吗？

`String paramStr = String.Format("'{0}', '{1}', '{2}', '{3}', '{4}'", a1, a2, a3,a4,a5);`

我应该指出，将这样的字符串发送到数据库会导致[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

**选项 2：**

要打印到中间窗口，您可以使用以下技巧：

1.  创建断点
2.  右键单击红点->“当命中”。
3.  在新屏幕中选择“打印消息”复选框
4.  在文本框中键入上面的 String.Format，但每边都有一个花括号：

`{ String.Format(.....) }`

有关您可以在该消息中打印的参数的更多信息：http: [//msdn.microsoft.com/en-us/library/232dxah7.aspx](http://msdn.microsoft.com/en-us/library/232dxah7.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:42:43.677

我认为最好的方法是[`params`](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)在您的方法中使用以使其更简单：

```
public static void MethodCreatedByLINQ2Sql(params string[] list)
{
    //And then very simply use String.Join()
    string s = String.Join(",", list);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:14:57.213

您可以在调试时在 Visual Studio 的即时窗口中运行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:18:12.720

`String.Join()`允许您连接任意数量的字符串，如下所示：

```
string completeString = String.Join(", ", a1, a2, a3, ... ,aN); 
```

这个重载（它有 5 个不同的）是`.Join(string separator, params object[] values)`

当然，正如已经指出的那样，应该避免这种情况，*尤其是*当您必须使用`EXEC`. 参数化查询是非常可取的（但完全是另一个主题，而且您可以很容易地找到围绕 SO 本身的许多示例）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:18:51.557

在字符串数组中有 a1, a2 ：

```
var a = new string[] { a1, a2, a3... }; 
```

然后以这种方式将它们的值转换为字符串：

```
var v = string.Join("','", a); 
```

无论如何，我建议对您的存储过程使用 Parameter 。上面的技巧对于生成 sql 查询并不干净，因为它可能导致 SQL 注入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:21:55.447

如果您运行 SQL Profiler，它将向您显示 EXEC 语句以及您需要的所有信息。您将不得不尝试使用 Profiler 中的哪些选项最适合您，但通常如果您使用 TSQL_SPs 模板，它应该会为您提供您正在寻找的信息。

当然，对此的限制是，在进行存储过程调用之前，您不会获得字符串，因此如果您在代码中放置断点，则必须在调用 SQL Server 之后。

# sql - SQL Server 整数算术和插入问题

> ID：12390150
> 
> 赞同：0
> 
> 时间：2012-09-12T14:12:47.230
> 
> 标签：sql, sql-server, int, decimal

我有一张表格，显示一个人回复调查的次数。人的`id`和`survey id`是`varchar(10)`的。已回复的列是`int`无`0`响应或`1`响应的 ，并且`databaseId`是`varchar(2)`。它看起来像这样：

```
 personId       surveyId         replied      databaseId
    0001           1366              0             3
    0002           2243              1             1
    0003           6693              0             2
    0004           1246              0             1
    0045           2740              1             4
    ....           ....             ...           ... 
```

`INSERT`我正在尝试获取有关调查响应率的一些汇总统计信息，但是当我尝试将结果放入新表时遇到错误。新表的格式为：

```
 surveyId        respRate
     1366            0.00000
     2243            0.00832
     2244            0.02377
     8875            0.01534
     ....              ... 
```

哪里`surveyId`是`varchar(20)`和`respRate`是一个`decimal(5,5)`。当我使用以下内容尝试插入新表时：

```
insert into summaryTable
  (surveyId, meanrr)  
  SELECT  t1.surveyId
  ,(sum(t1.replied)*1.0 / count(replied)*1.0) meanrr
  FROM (select * from table1 
  where databaseid in ('1','2','3')) t1
  where surveyId is not null
  group by surveyId 
```

我收到以下错误消息：

```
Msg 8115, Level 16, State 8, Line 8
Arithmetic overflow error converting numeric to data type numeric. 
```

我对此进行了一些研究，除了增加目标列的大小（即`decimal(5,5)`--> `decimal(10,10)`）之外没有发现太多，但是当我尝试这个时，我得到了相同的响应。

如果我只是尝试不使用该`insert into`部分的查询部分，它似乎可以工作（或者我只是没有收到错误消息）。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:21:13.327

使用特定的强制转换而不是隐式副作用 ( `*1.0`) 来转换值，例如：

```
cast(
  cast(sum(t1.replied) as float) / cast(count(replied) as float)
  as decimal(6,5)
) meanrr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:25:15.523

您当前的数据类型`decimal (5,5)`不允许值为 1。它基本上意味着总共 5 个数字，所有数字都在小数点的右侧。

我猜你的一行有 100% 的响应率，这将`1.0000`导致溢出。

尝试使用`decimal (6,5)`允许整数的数据类型。

# ruby - Ruby - 遍历数组

> ID：12390153
> 
> 赞同：0
> 
> 时间：2012-09-12T14:12:51.937
> 
> 标签：ruby, arrays, loops

在一个表单中，我有一个来自数据库的产品列表，每个产品在表单中都有这些项目：

```
= text_field_tag 'item['+product.id.to_s+'][]'
= text_field_tag 'item_value1['+product.id.to_s+'][]'
= text_field_tag 'item_value2['+product.id.to_s+'][]' 
```

我正在尝试遍历数组并以这种方式获取所有这些（**item**，**item_value1**，**item_value2**）：

```
params[:item].each_with_index do |val, index|
  puts "#{val[0]} => #{val[1]}"
end 
```

输出如下：

```
191359 => [""]
191361 => [""]
191360 => ["15"]
191212 => [""]
191210 => ["9"]
248974 => [""]
191209 => [""]
190920 => [""]
190919 => [""]
190921 => [""] 
```

但是，如何获取相应产品的所有数据？就像是

```
puts "item: #{item}, item_value1: #{item_value1}, item_value2: #{item_value2}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:23:29.793

这里有三个`item`参数`item_value1`和`item_value2`。迭代 item 只会给你来自参数 items 的值，而不是来自`intem_value1`and `item_value2`。如果这 3 个参数的索引是相对的，那么您可以在代码中使用 index

```
params[:item].each_with_index do |val, index|
  puts "#{params[:item_value1][index]} => #{params[:item_value1][index]}"
end 
```

# java - JMF 的问题

> ID：12390156
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:04.273
> 
> 标签：java, media

![在此处输入图像描述](../Images/8d3d834fbbbe2c6994e14bd929313b09.png)

它是什么，我该如何解决？

另外，我想在我的 Java 屏幕录像机中[使用此代码](http://www.koders.com/java/fid8AE9208DC5FB846910DFD3F935D64E7C9A5BB784.aspx)，但我想在单击屏幕截图时提供图像矢量，而不是从文件夹中读取它。我也想要这方面的帮助。
*对于 berry120*：
![在此处输入图像描述](../Images/b85075c79cf102785e999eef732fd166.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:28:56.563

In terms of the "access restriction" error, it seems to be a similar issue to this one - as in you may be trying to replace a Java library class with one from a jar file (in your case JMF.jar.)

Have a look at this question: [Access restriction on class due to restriction on required library rt.jar?](https://stackoverflow.com/questions/860187/access-restriction-on-class-due-to-restriction-on-required-library-rt-jar) The second answer down (one with 250+ upvotes) is the one that may work in your case - remove and re-add the JRE system library.

# javascript - 为 d3.js 中的多个元素生成 clipPaths

> ID：12390158
> 
> 赞同：3
> 
> 时间：2012-09-12T14:13:08.510
> 
> 标签：javascript, svg, d3.js, geometry, force-layout

我正在尝试创建部分填充的圆圈，就像最终纽约时报政治大会可视化中的圆圈一样：[http ://www.nytimes.com/interactive/2012/09/06/us/politics/convention-word-counts.html](http://www.nytimes.com/interactive/2012/09/06/us/politics/convention-word-counts.html)

![在此处输入图像描述](../Images/1d01c876f6e14d041d32e2b5a382e84a.png)

我为 d3 中的 clipPaths 找到的两个最清晰的代码示例（[https://gist.github.com/1067636](https://gist.github.com/1067636)和[http://bl.ocks.org/3422480](http://bl.ocks.org/3422480)）为每个剪辑路径创建具有唯一 id 的单个 div 元素然后将这些路径应用于单个元素。

我不知道如何从这些示例转到可视化，该可视化具有基于数据值的一组元素中的每个元素的唯一圆形 clipPath，以便我可以创建我的效果。

这是我*到目前为止*所拥有的：

给定具有以下结构的数据：

```
data = [        
    {value: 500, pctFull: 0.20, name: "20%"}, 
    {value: 250, pctFull: 0.75, name: "75%"},
    {value: 700, pctFull: 0.50, name: "50%"},        
] 
```

1) 为数据集中的每个对象创建一个带有圆圈的力图。圆的面积来自对象值。

2) 使用 mbostock 示例[http://bl.ocks.org/3422480中的算法从每个数据点的比例 (pctFull) 计算 k (和 h)](http://bl.ocks.org/3422480)

3) 使用 k 为覆盖圆的适当区域的每个数据点生成一个矩形。

我认为如果我可以将每个矩形的可见性限制在其各自的圆圈内，那么这个插图就可以完成，但这就是我被卡住的地方。我尝试了很多东西，但都没有奏效。

这是jsfiddle：http: [//jsfiddle.net/G8YxU/2/](http://jsfiddle.net/G8YxU/2/)

![在此处输入图像描述](../Images/a27d87af8ff59028fba603e0e709aa09.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T22:11:51.300

在这里看到一个工作小提琴：http: [//jsfiddle.net/nrabinowitz/79yry/](http://jsfiddle.net/nrabinowitz/79yry/)

![在此处输入图像描述](../Images/81523d4252e9bd2e99ff259051397de4.png)

```
// blue circle
node.append("circle")
    .attr("r", function(d, i) {return rVals[i];})
    .style("fill", "#80dabe")                
    .style("stroke", "#1a4876");   

// clip path for the brown circle
node.append("clipPath")
    // make an id unique to this node
    .attr('id', function(d) { return "clip" + d.index })
  // use the rectangle to specify the clip path itself 
  .append('rect')
    .attr("x", function(d, i){ return rVals[i] * (-1);})
    .attr("width", function(d, i){ return rVals[i] * 2;})
    .attr("y", function(d, i) {return rVals[i] - (2  * rVals[i] * kVals[i]);})
    .attr("height", function(d, i) {return 2  * rVals[i] * kVals[i];});

// brown circle
node.append("circle")
    // clip with the node-specific clip path
    .attr("clip-path", function(d) { return "url(#clip" + d.index + ")"})
    .attr("r", function(d, i) {return rVals[i];})
    .style("fill", "#dabe80")                
    .style("stroke", "#1a4876"); 
```

*   看起来为元素指定剪辑路径的唯一方法是使用属性`url(IRI)`中的符号`clip-path`，这意味着您需要根据节点数据为每个剪辑路径提供一个唯一的 ID。我使用了`clip<node index>`id 的形式——所以每个节点都有自己的剪辑路径，节点的其他子元素可以引用它。

*   按照 Mike 的示例，制作两个不同颜色的圆并使用矩形本身作为剪辑路径似乎最简单，而不是制作基于圆圈的剪辑路径。但无论哪种方式，你都可以做到。

# objective-c - '-[__NSCFDictionary setObject:forKey:]: 变异方法发送到不可变对象'

> ID：12390159
> 
> 赞同：1
> 
> 时间：2012-09-12T14:13:13.383
> 
> 标签：objective-c, xcode, immutability, nsmutabledictionary

```
- (NSMutableDictionary *)updateTemplates:(NSMutableDictionary *)oldTemplates
                             forSpecType:(NSString *)specType {
    // oldTemplates is an NSMutableDictionary pulled from a plist
    // specType is used for flexible paths, to eliminate duplicate code

    // Make a dict of the parameters object (about to be overwritten)
    NSMutableDictionary *parameters = [oldTemplates valueForKeyPath:
                  [NSString stringWithFormat:@"root.%@.parameters", specType]];

    // Dump the new data into the matching object
    [oldTemplates setValue:[updateTemplates valueForKeyPath:
                              [NSString stringWithFormat:@"data.%@", specType]]
                forKeyPath:[NSString stringWithFormat:@"root.%@", specType]];

    // Put the parameters back, since they don't exist anymore
    /* Instant crash, with the debugger claiming something is immutable
     * But I just used the exact same method on the line above
     * updateTemplates isn't immutable either; it's only when I try to mutate
       oldTemplates after putting in updateTemplates -- and only the update
       seems to be breaking things -- that I get the exception and crash
    */
    [oldTemplates setValue:parameters forKeyPath:
                  [NSString stringWithFormat:@"root.%@.parameters", specType]];

    return oldTemplates;
} 
```

我可以设置一个循环来一次写入一个对象，`updateTemplates.specType`这样只有那些部分被替换，然后我不必对参数做任何事情，但如果它现在是不可变的，那将是我尝试写入它的时候再次。那对我没有任何好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:41:00.113

如果我没记错的话，从 plist 或 NSUserDefaults 创建的字典默认是不可变的。您必须手动创建一个可变副本：

```
NSMutableDictionary *parameters = [[oldTemplates valueForKeyPath:
           [NSString stringWithFormat:@"root.%@.parameters", specType]] mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:54:21.080

`mutableCopy`制作浅可变副本，而不是深可变副本。如果您有一个`NSDictionary`包含键/值对，其中值是`NSDictionary`实例，`mutableCopy`则将返回一个可变字典，其中包含这些`NSDictionary`不可变实例作为值。

您要么需要进行深层复制，要么使用 plist 序列化功能在启用可变集合选项的情况下解码 plist。或者你可以从旧的集合中创建一个新的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:58:29.293

你可以简单地做：

```
NSMutableDictionary* oldTemplates = [NSMutableDictionary dictionaryWithDictionary:[oldTemplates valueForKeyPath:
                  [NSString stringWithFormat:@"root.%@.parameters", specType]]]; 
```

这将从现有的 NSDictionary 创建一个可变副本

# jquery - 添加手风琴窗格，手风琴不起作用

> ID：12390162
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:26.003
> 
> 标签：jquery, accordion

我可以动态添加新的手风琴窗格，但它们不起作用。有任何想法吗？我假设它们没有被初始化，因为它们是动态添加的。当我添加它们时它们会出现，它们只是不会变成动画。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>MLE Editor</title>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

    <link href="Styles/site.css" rel="stylesheet" type="text/css" />    

<script type="text/javascript">
    $(document).ready(function()
    {
        //Add Inactive Class To All Accordion Headers
        $('.eventHeader').toggleClass('inactive-header');

        //Set The Accordion Content Width
        var contentwidth = $('.eventHeader').width();
        $('.eventContent').css({ 'width': contentwidth });

        //Open The First Accordion Section When Page Loads
        //$('.eventHeader').first().toggleClass('active-header').toggleClass('inactive-header');
        //$('.eventContent').first().slideDown().toggleClass('open-content');

        // The Accordion Effect
        $('.eventHeader').click(function () {
            if($(this).is('.inactive-header')) {
                $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
                $(this).toggleClass('active-header').toggleClass('inactive-header');
                $(this).next().slideToggle().toggleClass('open-content');
            }

            else {
                $(this).toggleClass('active-header').toggleClass('inactive-header');
                $(this).next().slideToggle().toggleClass('open-content');
            }
        });

        return false;
    });

    function addEvent() {
        var eventsContainer = document.getElementById('eventsContainer');
        var events = eventsContainer.innerHTML;
        events = events + '<h2 class="eventHeader">New event</h2><div class="eventContent"><p>Event options</p></div>';
        eventsContainer.innerHTML = events;
    }
</script>
</head>
<body>
    <form id="form1" runat="server">        
        <div id="eventOptions">
            <a href="javascript:addEvent();">Add Event</a>
            <br />
            <div id="eventsContainer"> 
            <h2 class="eventHeader">Old event</h2><div class="eventContent"><p>Event options</p></div>
            </div>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:31:56.800

要让手风琴在新项目上工作，只需将点击处理程序更改为：

```
$(document).on('click','.eventHeader',function () {
  if($(this).is('.inactive-header')) {
    $('.active-header').toggleClass('active-header').toggleClass('inactive-header').next().slideToggle().toggleClass('open-content');
    $(this).toggleClass('active-header').toggleClass('inactive-header');
    $(this).next().slideToggle().toggleClass('open-content');
  }

  else {
    $(this).toggleClass('active-header').toggleClass('inactive-header');
    $(this).next().slideToggle().toggleClass('open-content');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:33:35.130

我建议在动态添加项目时销毁然后重新创建手风琴以获得最佳效果。

# c# - 在 ASP.NET 中流式传输 PowerPoint 文件

> ID：12390166
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:33.497
> 
> 标签：c#, asp.net, .net, httpresponse

我正在生成 PowerPoint 幻灯片，然后即时合并它们，然后通过 HttpResponse 对象流式传输生成的内容，即

```
 HttpResponse response = HttpContext.Current.Response;
            response.Clear();
            response.AppendHeader("Content-Type", "application/vnd.ms-powerpoint");
            response.AppendHeader("Content-Disposition", "attachment;filename=MasterPresentation.pptx;");
            response.BinaryWrite(masterPresentation.ToArray());
            response.Flush();
            response.Close(); 
```

其中**masterPresentation**是 MemoryStream 对象。当我在 PowerPoint 中打开下载的演示文稿时，我收到以下消息：

**PowerPoint 发现 MasterPresentation.pptx 中的内容存在问题。PowerPoint 可以尝试修复演示文稿。**

修复后一切似乎都很好，没有任何内容损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:00:04.840

我正在回答我自己的问题，如果其他人需要解决此问题，您需要做的就是替换：

```
 response.Flush();
        response.Close(); 
```

和

```
 response.End(); 
```

捕获任何异常并且生成的演示文稿不会被破坏。

# sql - 如何从 select 语句的结果中为变量赋值？

> ID：12390168
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:41.810
> 
> 标签：sql, tsql, variables

```
SELECT TOP 1 [FirstName], [LastName]
FROM [table]

DECLARE @firstName VARCHAR(25) 
```

运行上面的查询后，我想将从查询中返回的 [FirstName] 分配给 @firstName。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:17:27.020

```
DECLARE @firstName VARCHAR(25) 

SELECT TOP 1 @firstName = [FirstName] FROM [table] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:17:40.637

像这样：

```
DECLARE @firstName VARCHAR(25), @LastName VARCHAR(25)

SELECT TOP 1 @firstName = [FirstName], @LastName = [LastName]
FROM [table] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:17:43.403

用于[`SET`](http://msdn.microsoft.com/en-us/library/aa259193%28v=sql.80%29.aspx)从查询中分配值：

```
DECLARE @firstName VARCHAR(25)

SET @firstName = (SELECT TOP 1 [FirstName] FROM [table]) 
```

# jquery - 时间轴悬停问题

> ID：12390171
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:46.933
> 
> 标签：jquery, html, css, hover

谁能帮我解决这个问题？我正在努力让 pin 图像在翻转时出现在透明框的前面，但将线保持在框的后面。如果有人对如何解决这个问题有任何建议，我将不胜感激。

提前致谢。

*   麦克风

[http://resources.29kdev.com/timeline/demo.html](http://resources.29kdev.com/timeline/demo.html)

这是HTML：

```
<!DOCTYPE html>
<head>
<meta charset="utf-8">
<!-- Attach our CSS -->
<link rel="stylesheet" href="style.css">  
<!-- Attach necessary JS -->
<script src="http://code.jquery.com/jquery-latest.js"></script>

<title>Timeline</title>  
</head>
<body>

<!-- =======================================

TIMELINE CONTENT 

======================================= -->
<div id ="pagewrap">    
<div id ="wrapper"> 

    <div id="timeline">

        <img src="images/timeline.png">

    </div> <!--end timeline -->

    <ul> <!--begin ul -->

    <div id="pin01" class="handle">
    <div class="handleicon"><img src="images/handle.png"></div>
    <div class="handleinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>
    </div>
</div> 

<div id="pin02"  class="handle">
    <div class="handleicon"><img src="images/handle.png"></div>
    <div class="handleinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>
    </div>
</div>  

<div id="pin03"  class="handle">
    <div class="handleicon"><img src="images/handle.png"></div>
    <div class="handleinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>
    </div>
</div>   

<div id="pin04"  class="handle">
    <div class="handleicon"><img src="images/handle.png"></div>
    <div class="handleinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>                </div>
</div>
<div id="pin05"  class="handle">
    <div class="handlerighticon"><img src="images/handle.png"></div>
    <div class="handleinfo handlerightinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>
    </div>
</div>

</ul> <!--end ul -->

<div id="title">
    <div id="lefttitle">
        <h4>Our Company History</h4>
    </div> <!--end lefttitle-->
    <div id="righttitle">
        <p class="title">Rollover an Event</p>
    </div> <!--end righttitle-->
    <div class="clear"></div>
</div><!--end title --> 
```

```
<!--fadeToggle script -->

<script>
$('.handle').on('mouseover', function(){
$(this).css('z-index', '200000000');
});
$('.handle').on('mouseout', function(){
$(this).css('z-index', '100000000');
});

$('.handleicon').on('mouseover', function(){
$(this).css('z-index', '-200000000');
});
$('.handleicon').on('mouseout', function(){
$(this).css('z-index', '-100000000');
});

$('.handlerighticon').on('mouseover', function(){
$(this).css('z-index', '-200000000');
});
$('.handlerighticon').on('mouseout', function(){
$(this).css('z-index', '-100000000');
});

$(".handle").hover(
    function() {
        $(this).addClass("topdiv");
        $(this).children(".handleinfo").fadeIn("fast");
    },
    function() {

        $(this).children(".handleinfo").fadeOut("fast", function() {$(this).removeClass("topdiv");});
    }
);

$(".handleright").hover(
    function() {
        $(this).addClass("topdiv");
        $(this).children(".handlerightinfo").fadeIn("fast");
    },
    function() {

        $(this).children(".handlerightinfo").fadeOut("fast", function() {$(this).removeClass("topdiv");});
    }
);

$(document).ready(function() {
    $('#backgroundfade').fadeOut(2000, function(){$('#maincontent').fadeTo(1000,1);});
});
</script>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:17:00.133

演示[http://jsbin.com/welcome/22311/edit](http://jsbin.com/welcome/22311/edit)

只需更改您的 jQuery

```
<script>
$('.handle').on('mouseover', function(){
$(this).css('z-index', '200000000');
$(this).find(".handleicon img").css({'z-index':'200000000',"position":"relative"});
});
$('.handle').on('mouseout', function(){
$(this).css('z-index', '100000000');
$(this).find(".handleicon img").css({'z-index': "-1","position":"relative"});
});

$('.handlerighticon').on('mouseover', function(){
$(this).css('z-index', '-200000000');
});
$('.handlerighticon').on('mouseout', function(){
$(this).css('z-index', '-100000000');
});

$(".handle").hover(
    function() {
        $(this).addClass("topdiv");
        $(this).children(".handleinfo").fadeIn("fast");
    },
    function() {

        $(this).children(".handleinfo").fadeOut("fast", function() {$(this).removeClass("topdiv");});
    }
);

$(".handleright").hover(
    function() {
        $(this).addClass("topdiv");
        $(this).children(".handlerightinfo").fadeIn("fast");
    },
    function() {

        $(this).children(".handlerightinfo").fadeOut("fast", function() {$(this).removeClass("topdiv");});
    }
);

$(document).ready(function() {
    $('#backgroundfade').fadeOut(2000, function(){$('#maincontent').fadeTo(1000,1);});
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:03:36.070

`z-index`从图片容器中移除 ( ) `<div class="handleicon">`。
不要将它移到后面，而是将信息框 ( `<div class="handleinfo">`) 和它`<img>`本身移动到前面（图像在信息框上方，例如图像上的 200 和信息框上的 100）。当然，两者都需要`position:relative`这样的`z-index`作品。

Z 索引很复杂。
如果我没记错的话，在`position:relative`元素上使用 z-index 定义了一个新层，并且您不能在放置在该层内的东西之间放置任何东西。通过避免`position:relative`容器 div 上的 ，您无需定义该层，并且可以将图片移动到前面，而不会使 div 的行也出现在前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:51:05.217

这就是我所做的，首先，将您的 Image 放在每个 div 中的句柄类下方。

```
<div id="pin01" class="handle">
    <img src="images/handle.png"></div> 
    <div class="handleicon">
    <div class="handleinfo">
        <h3>Lorem Ipsum</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed cursus euismod metus, nec mollis tellus porttitor ut. Nam id accumsan ante. Proin varius ultricies sem et tincidunt.</p>
    </div>
</div> 
```

您需要在每个 div 上执行此操作。然后在您的 CSS 上，我将您的 handleicon 类的高度更改为 0px

```
.handleicon {
    width: 32px;
    height: 0px;
    position:relative; 
} 
```

# php - 完成 CSV 上传/更新程序

> ID：12390174
> 
> 赞同：0
> 
> 时间：2012-09-12T14:13:54.670
> 
> 标签：php, mysql

我已经构建了一个 PHP/MySQL CSV 上传器/更新器来更新高中橄榄球队的分数。

当我使用 Windows 7 在 XAMPP 上运行此脚本时，“加载数据输入文件”查询出现权限错误。我在 PHPMyAdmin 中检查了我的权限，并且用户拥有所有权限，所以不是这样。

我需要先解决这个问题。我最终通过直接在 PHPMyAdmin 上运行查询来上传所有内容。但是，当我尝试运行两个上传查询时，我的脚本超时。

我在这里要做的过程是上传文件并将记录导入新表（csv_data）。然后我想运行两个更新查询来用 csv_data 表中的新数据更新游戏表。

这两个查询的原因是，就家庭/访客而言，有时错误的团队位于错误的列中。我发现使用 CONCAT() 确实会减慢速度。

所以我需要先用“LOAD DATA INFILE”查询解决我的权限问题，然后想办法加快我的更新查询。有任何想法吗？

```
<?php
require_once('global.php');
if (array_key_exists('submit', $_POST)) {
    if ($_FILES['csv']['error'] > 0){
        echo "Error: " . $_FILES['csv']['error'] . "</br>" . "You have not selected a file or there is another error."; 
    } else {
        $tmp = $_FILES['csv']['tmp_name'];
    }
    if (!$_FILES['csv']['type'] == 'text/csv'){
        echo "Please select a CSV File";
    } else {
        $location = dirname(__FILE__) . '/csv/' . basename($_FILES['csv']['name']);
        move_uploaded_file($tmp, $location);
    }
    $errors = array();
    // Need to get this query to work properly regarding permissions
    $query = $db->prepare("LOAD DATA INFILE ? 
        INTO TABLE csv_data 
        FIELDS TERMINATED BY ',' 
        LINES TERMINATED BY '\n' 
        (game_week, home_team, home_score, visitor_team, visitor_score)");
    if ($query->execute(array($location))) {
        try {
            // Need to figure out how to use LIKE instead of = and do it quickly
            $query_two = $db->prepare("UPDATE game g, csv_data c, team home_team, team visit_team 
                SET g.game_home_score = c.home_score, 
                    g.game_visitor_score = c.visitor_score, 
                    g.game_complete = 'Y' 
                WHERE g.game_week = c.game_week 
                    AND home_team.team_name LIKE CONCAT('%', c.home_team, '%') 
                    AND home_team.team_id  LIKE CONCAT('%', g.game_home_team, '%') 
                    AND visit_team.team_name  LIKE CONCAT('%', c.visitor_team, '%') 
                    AND visit_team.team_id  LIKE CONCAT('%', g.game_visitor_team, '%')");
            if (!$query_two->execute()) {
                $errors[] = 'The first update query failed.';
            }
            $query_three = $db->prepare("UPDATE game g, csv_data c, team home_team, team visit_team 
                SET g.game_home_score = c.visitor_score, 
                    g.game_visitor_score = c.home_score, 
                    g.game_complete = 'Y' 
                WHERE g.game_week = c.game_week 
                    AND home_team.team_name  LIKE CONCAT('%', c.visitor_team, '%') 
                    AND home_team.team_id  LIKE CONCAT('%', g.game_home_team, '%') 
                    AND visit_team.team_name  LIKE CONCAT('%', c.home_team, '%') 
                    AND visit_team.team_id  LIKE CONCAT('%', g.game_visitor_team, '%')");
            if (!$query_three->execute()) {
                $errors[] = 'The second update query failed.';
            }
        } catch(PDOException $e) {
            echo $e->getMessage();
        }
    } else {
        $errors[] = 'CSV Upload Query Failed.';
    }
}
?> 
```

# visual-studio-2010 - 通过 Visual Studio 2010 面向 .NET Framework 4.5

> ID：12390175
> 
> 赞同：170
> 
> 时间：2012-09-12T14:13:58.863
> 
> 标签：visual-studio-2010, visual-studio, .net-4.5

今天我在我的机器上安装了 .NET Framework 4.5，希望能够从 Visual Studio 2010 中使用它，因为它只是一个小更新，不会对 Visual Studio 2010 造成问题。不幸的是我没有，甚至手动删除某些 4.0并添加相应的 4.5 程序集会导致项目中仍引用原始 4.0 程序集。

是否可以从 Visual Studio 2010 定位 4.5 版，如果可以，如何？我真的很想用丝带...

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-09-12T14:33:47.907

Visual Studio 2010 之前的每个版本的 Visual Studio 都与特定的 .NET 框架相关联。（VS2008 是 .NET 3.5，VS2005 是 .NET 2.0，VS2003 是 .NET1.1）Visual Studio 2010 及更高版本允许针对以前的框架版本，但不能用于未来的版本。您必须使用 Visual Studio 2012 才能使用 .NET 4.5。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-11-05T20:43:10.970

我能想到的场景非常有限，但我们假设您无法获得资金来购买 VS2012 或类似的东西。如果是这种情况，并且您拥有 Windows 7+ 和 VS 2010，您也许可以使用我整理的以下 hack，这似乎可行（但我尚未使用此方法完全部署应用程序）。

1.  **备份你的项目文件！！！**

2.  下载并安装包含 .NET 4.5 SDK的[Windows 8 SDK。](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

3.  在 VS2010 中打开你的项目。

4.  在您的项目中创建一个文本文件，命名`Compile_4_5_CSharp.targets`为以下内​​容。（或者只是[在这里](http://pastebin.com/download.php?i=g3f90CQZ)下载- 确保从文件名中删除“.txt”扩展名）：

    ```
    <Project DefaultTargets="Build"
     xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

        <!-- Change the target framework to 4.5 if using the ".NET 4.5" configuration -->
        <PropertyGroup Condition=" '$(Platform)' == '.NET 4.5' ">
            <DefineConstants Condition="'$(DefineConstants)'==''">
                TARGETTING_FX_4_5
            </DefineConstants>
            <DefineConstants Condition="'$(DefineConstants)'!='' and '$(DefineConstants)'!='TARGETTING_FX_4_5'">
                $(DefineConstants);TARGETTING_FX_4_5
            </DefineConstants>
            <PlatformTarget Condition="'$(PlatformTarget)'!=''"/>
            <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
        </PropertyGroup>

        <!-- Import the standard C# targets -->
        <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />

        <!-- Add .NET 4.5 as an available platform -->
        <PropertyGroup>
           <AvailablePlatforms>$(AvailablePlatforms),.NET 4.5</AvailablePlatforms>
        </PropertyGroup>
    </Project> 
    ```

5.  卸载您的项目（右键单击 -> 卸载）。

6.  编辑项目文件（右键单击 -> 编辑 *.csproj）。

7.  在项目文件中进行以下更改：

    一种。将默认值替换为`Microsoft.CSharp.targets`步骤 4 中创建的目标文件

    ```
    <!-- Old Import Entry -->
    <!-- <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" /> -->

    <!-- New Import Entry -->
    <Import Project="Compile_4_5_CSharp.targets" /> 
    ```

    湾。将默认平台更改为`.NET 4.5`

    ```
    <!-- Old default platform entry -->
    <!-- <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform> -->

    <!-- New default platform entry -->
    <Platform Condition=" '$(Platform)' == '' ">.NET 4.5</Platform> 
    ```

    C。添加`AnyCPU`平台以允许针对项目属性中指定的其他框架。这应该`<ItemGroup>`在文件中的第一个标签之前添加

    ```
    <PropertyGroup Condition="'$(Platform)' == 'AnyCPU'">
        <PlatformTarget>AnyCPU</PlatformTarget>
    </PropertyGroup>

    .
    .
    .
    <ItemGroup>
    .
    .
    . 
    ```

8.  保存更改并关闭`*.csproj`文件。

9.  重新加载您的项目（右键单击 -> 重新加载项目）。

10.  在配置管理器（构建 -> 配置管理器）中，确保为您的项目选择了“.NET 4.5”平台。

11.  仍在配置管理器中，为“.NET 4.5”创建一个新的解决方案平台（您可以基于“任何 CPU”）并确保为解决方案选择“.NET 4.5”。

12.  构建您的项目并检查错误。

13.  假设构建完成，您可以通过在源代码中添加对 4.5 特定类的引用来验证您确实以 4.5 为目标：

    ```
    using System;
    using System.Text;

    namespace testing
    {
        using net45check = System.Reflection.ReflectionContext;
    } 
    ```

14.  当您使用“.NET 4.5”平台进行编译时，构建应该会成功。当你在“Any CPU”平台下编译时，你应该得到一个编译器错误：

    ```
    Error 6: The type or namespace name 'ReflectionContext' does not exist in
    the namespace 'System.Reflection' (are you missing an assembly reference?) 
    ```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-29T10:00:03.243

仅供参考，如果您想在 VS2010 中创建安装程序包，不幸的是它仅针对 .NET 4。要解决此问题，您必须添加 NET 4.5 作为启动条件。

将以下内容添加到安装程序的启动条件中（右键单击、查看、启动条件）。

在“搜索目标机器”中，右键单击并选择“添加注册表搜索”。

```
Property: REGISTRYVALUE1
RegKey: Software\Microsoft\NET Framework Setup\NDP\v4\Full
Root: vsdrrHKLM
Value: Release 
```

添加新的“启动条件”：

```
Condition: REGISTRYVALUE1>="#378389"
InstallUrl: http://www.microsoft.com/en-gb/download/details.aspx?id=30653
Message: Setup requires .NET Framework 4.5 to be installed. 
```

在哪里：

378389 = .NET 框架 4.5

378675 = .NET Framework 4.5.1 随 Windows 8.1 一起安装

378758 = .NET Framework 4.5.1 安装在 Windows 8、Windows 7 SP1 或 Windows Vista SP2 上

379893 = .NET 框架 4.5.2

启动条件参考： http: [//msdn.microsoft.com/en-us/library/vstudio/xxyh2e6a (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/xxyh2e6a(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-01T20:54:38.783

我一直在为 VS2010/DNFW 4.5 集成而苦苦挣扎，终于让它工作了。从 VS 2008 开始，引入了 Visual Studio 使用的程序集缓存，称为“引用程序集”。VS 2010 的此文件缓存位于 \Reference Assemblies\Microsoft\Framework.NetFramework\v4.0。Visual Studio 从该位置而不是从框架安装目录加载框架程序集。当微软说 VS 2010 不支持 DNFW 4.5 时，他们的*意思*是在安装 DNFW 4.5 时该目录不会得到更新。一旦你用更新的 DNFW 4.5 文件替换了这个位置的文件，你会发现 VS 2010 可以很高兴地与 DNFW 4.5 一起工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T11:18:41.787

从另一个搜索。为我工作！

“你可以使用 Visual Studio 2010，它确实支持它，前提是你的操作系统支持 .NET 4.5。

右键单击您的解决方案以添加参考（如您所做的那样）。当对话框显示时，选择浏览，然后导航到以下文件夹：

**C:\Program Files(x86)\Reference Assemblies\Microsoft\Framework\.Net Framework\4.5**

你会在那里找到的。”

# mysql - php mysql 加入和计数

> ID：12390179
> 
> 赞同：0
> 
> 时间：2012-09-12T14:14:10.433
> 
> 标签：mysql, join

我有两张桌子`imagesgroup`和`images`

`imagesgroup`具有以下字段`id`和`group_name`

`images`有以下字段`id`，我们在`image_name`其中`category`存储`imagesgroup.id`

现在我想显示所有图像组以及每个图像组的图像数量。

即我想显示这样的东西

组名 | 不。该组中的项目

首页 |10

办公室 | 5

派对 | 0

请帮助我提前感谢一吨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:20:45.650

试试这个：

```
SELECT group_name, COUNT(DISTINCT i.id)
FROM imagesgroup ig
LEFT JOIN images i ON (ig.id = i.category)
GROUP BY ig.id, ig.group_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:12:24.610

感谢所有答案

这对我有用

`SELECT l.group_name ,l.id, COUNT(ld.category) as COUNT FROM imagesgroup AS l LEFT OUTER JOIN images AS ld ON ld.category = l.id GROUP BY l.id ORDER BY l.id`

上述接受的解决方案也可以正常工作

# java - 为什么Java不支持比较器行上的相等比较？

> ID：12390180
> 
> 赞同：8
> 
> 时间：2012-09-12T14:14:14.250
> 
> 标签：java, equality

Java 提供了使用`Comparator`.

现在我的问题是为什么 java 不允许对 equals() 和 hashcode() 做同样的事情。

现在每个集合`contains()`方法都可以轻松地使用这个外部相等提供程序来检查对象是否相等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:42:05.207

[Guava](http://guava-libraries.googlecode.com/)有[`Equivalence`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html)课程，它几乎可以满足您的要求。

您甚至可以将对象包装在 an`Equivalence`中以使用更好的 hashCode() equals() 实现来装饰对象（例如，如果您想使用带有错误 equals() hashCode() 的对象作为 Map 键但没有访问权限到消息来源）

这是一个示例：数组没有正确实现 equals() 和 hashCode()，但这里是 char 数组的等价：

```
private static final Equivalence<char[]> CHAR_ARRAY_EQUIV = new Equivalence<char[]>(){

    @Override
    protected boolean doEquivalent(char[] a, char[] b) {
        return Arrays.equals(a, b);
    }

    @Override
    protected int doHash(char[] chars) {
        return Arrays.hashCode(chars);
    }
}; 
```

示例代码：

```
final char[] first ={'a','b'};
final char[] second ={'a','b'};

Assert.assertFalse(first.equals(second));
Assert.assertFalse(first.hashCode() == second.hashCode());

final Wrapper<char[]> firstWrapped = CHAR_ARRAY_EQUIV.wrap(first);
final Wrapper<char[]> secondWrapped = CHAR_ARRAY_EQUIV.wrap(second);

Assert.assertTrue(firstWrapped.equals(secondWrapped));
Assert.assertTrue(firstWrapped.hashCode() == secondWrapped.hashCode()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:36:37.940

`equals`并且`hashCode`是对于给定的不会改变的概念`Object`。[只有实现者知道根据](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)这些方法的规则应该使用哪些值。一旦他决定了那些，他们就定义了对象的身份，因此永远不应该改变。

另一方面，比较可能高度依赖于上下文。您可以通过实现来定义“自然”顺序`Comparable`。但这不能针对不同的上下文而改变。假设您有一个可以按姓氏、名字、邮政编码、城市排序的联系人列表……您可以通过提供单独`Comparator`的 s （或参数化的 s `Comparator`）轻松地做到这一点。但它不是对象本身固有的，因此它应该是它自己的一个类（它可以实现为静态内部类，具体取决于您的代码约定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:23:45.463

Comparator 接口用于在对集合进行排序时比较对象，它的 compare() 方法返回一个“int”，意思是，比较以一个 int 值结束，可以用来指示对象在排序集合中的位置。

contains() 为集合中的每个实例调用 equals() 方法，以便根据 equals-contract 找出两个实例是否相等。

# c - 具有数据段内存的 C 中的通用静态向量数据类型

> ID：12390183
> 
> 赞同：2
> 
> 时间：2012-09-12T14:14:26.230
> 
> 标签：c, pic

是否可以在不使用堆的情况下在 C 中创建类似 Vector 的通用数据结构。基本上我需要一个数组数据类型，但如果它有一个更通用的版本。

```
typedef struct {
 /* some data types*/
}TYPE1;

typedef struct {
 /* some data types*/
}TYPE2;

typedef struct _GCACHE_T
{
        const int element_size;
        const int count;
        struct _ELEMENT {
                        UBYTE           data[element_size];
                        BOOLEAN         is_valid;
                }element[count];
}GCACHE_T;

GCACHE_T f_cache1 = {sizeof(TYPE1), 15, {0} };
GCACHE_T f_cache2 = {sizeof(TYPE2), 10, {0} }; 
```

上面的代码不会编译，但我提供它是为了更清楚地说明我的要求。

如果允许使用堆内存，这将很容易实现。由于该代码用于小型 micros 堆内存使用是不允许的。

我本可以立即使用，但只是检查它是否可以以通用方式完成。

```
TYPE1 f_cache1[15];
TYPE2 f_cache2[10]; 
```

Vector 不会变大。我也可以使用联合，但有一个内存权衡，所以不愿意使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:11:22.780

C 不支持此类参数（模板、通用）类型。您可以采用类似于 BSD 套接字子系统使用的方法。不同的网络地址（例如 IP 地址和 TCP/UDP 端口号）存储在不同大小的结构中（取决于地址族，例如 IPv4 结构比 IPv6 结构短），但在开始时具有相似的布局。每当需要地址时，都会传递一个指向泛型`struct sockaddr`类型的指针，并从套接字的地址族中推断出正确的结构类型。

C 支持所谓的*灵活数组成员*，但它不能简单地应用于您的情况，因为不仅`struct _ELEMENT`条目的数量不同，而且这些元素的大小可能会根据 的值而有所不同`element_size`。这使得在不参考实际类型的情况下很难以`cache.element[i].data[j]`可移植的方式计算地址。您可以做的是在`GCACHE_T`类型的开头添加一个附加字段，以帮助您识别 的真实大小`struct _ELEMENT`：

```
typedef struct _GCACHE_T
{
    int element_size;
    int count;
    size_t element_stride;
    struct _ELEMENT {
        BOOLEAN         is_valid;
        UBYTE           data[];
    } element[];
} GCACHE_T; 
```

`element_stride`保持具体元素类型的大小（包括任何填充）。请注意，因为 C 只允许结构的最后一个元素是灵活的元素，所以将其`is_valid`移到前面。`data[]`

然后，您将创建特定类型，例如

```
typedef struct _GCACHE_TYPE1_15_T
{
    int element_size;
    int count;
    size_t element_stride;
    struct {
        BOOLEAN         is_valid;
        UBYTE           data[sizeof(TYPE1)];
    } element[15];
} GCACHE_TYPE1_15_T;

GCACHE_TYPE1_15_T f_cache1 = {
    sizeof(TYPE1),
    15,
    // An awful hack to obtain the size of a structure member
    sizeof(((GCACHE_TYPE1_15_T *)0)->element[0])
};

do_something((GCACHE_T *)&f_cache1); 
```

如果您需要声明许多不同的缓存类型，宏会派上用场。现在`do_something()`您可以计算地址，`f_cache1.element[i].data[j]`因为您知道`data`内部字段的偏移量，`struct _ELEMENT`并且您可以计算偏移量，`element[i]`因为单个元素的大小存储在`element_stride`字段中。

是的，我知道，这真的很痛苦……而且我不确定在像 PIC 这样的哈佛架构设备上需要多少指针算法。

# php - fopen 无法打开远程 url

> ID：12390184
> 
> 赞同：0
> 
> 时间：2012-09-12T14:14:26.847
> 
> 标签：php, fopen

我在`fopen`远程 url 上有一些错误。

我必须将一些 xml 数据发布到另一台服务器：因为我希望避免`curl`未安装库的问题，所以我更喜欢使用流。

这是我的代码：

```
$url = 'http://test.mysite.com/index.php?foo=bar';
$params = array('http' => array('method' => 'POST','content' => $data));
$ctx = stream_context_create($params);
$fp  = fopen($url, 'rb', false, $ctx);

if (!$fp) {
     throw new Exception("Problem with $url, $php_errormsg");
}
$response = stream_get_contents($fp); 
```

我在本地计算机（Windows，PHP 5.3.8）上进行了测试，一切都很好，现场测试（Linux PHP 5.3.13）并且没问题，然后我在另一台电脑（Windows 5.2.9）上进行了本地测试。
好吧，在最后一种情况下，`fopen`挂起直到超时。

`allow_url_fopen`开启，防火墙应该没有问题（基本上我是在自称：`localhost/mysite`from `localhost/mysite`）

由于我的几个客户报告了这个错误，我希望进一步调查。
有什么建议吗？
PHP 5.2 中是否存在错误或其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:49:09.383

您的 URL 语法无效。
代替：

```
$url = 'http://test.mysite.com?foo.php'; 
```

和：

```
$url = 'http://test.mysite.com/?foo.php'; 
```

# jboss - 杰克逊在 Jboss / Resteasy

> ID：12390188
> 
> 赞同：2
> 
> 时间：2012-09-12T14:14:37.307
> 
> 标签：jboss, jackson, jboss7.x, resteasy

是否有一种简洁且简单的方法可以在 Jboss - AS 7 中启用 Jackson 实现？

只与杰克逊合作，而不是与 Jettison 合作。

我可以看到 Jboss 对两者都有支持：

> /usr/share/jboss-as/modules/org/jboss/resteasy/resteasy-jettison-provider/main/resteasy-jettison-provider-2.3.2.Final.jar
> 
> /usr/share/jboss-as/modules/org/jboss/resteasy/resteasy-jackson-provider/main/resteasy-jackson-provider-2.3.2.Final.jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:54:32.243

[这个简短的教程](http://www.mkyong.com/webservices/jax-rs/integrate-jackson-with-resteasy/)解释了如何配置 RESTeasy 以使用 Jackson。您可能还想查看[这篇](http://blog.xebia.com/2011/07/12/developing-restful-applications-on-jboss-as-7/)关于在 JBoss AS 7 上设置 restful 应用程序的文章。

# javascript - 将 Radiobutton 和 checkbox 的值添加到 javascript 数据库

> ID：12390191
> 
> 赞同：0
> 
> 时间：2012-09-12T14:14:43.083
> 
> 标签：javascript, android, iphone, windows-phone-7, cordova

我们在第一页 (index.html) 上有两个单选按钮，我们需要将值存储到 javascript 中的数据库中（参见 word 中的附加数据库）。在设置页面上我们还有两个单选按钮，在 index.html 页面上所做的选择必须放入 settings.html 页面并读出选择的选项，如果用户更改选项（在我们的例子中是英语或荷兰语) 我们需要把这个值再次存入数据库，这只能在settings.html页面上实现（用户可以返回index.html页面，这是一次性设置页面）

这是 index.html 和 settings.html 上的两个单选按钮的脚本：

```
<input type="radio" name="set-language" id="dutch" checked />
<label for="dutch" class="flag-nl">Dutch<span></span></label>
<input type="radio" name="set-language" id="english" />
<label for="english" class="flag-uk">English<span></span></label> 
```

我们有同样的问题来取复选框的值，这是我们在设置页面上的代码，对于复选框，我们需要在数据库中添加值，如果用户也能够再次显示它们返回设置页面（这样他就可以看到他之前所做的选择）。此代码仅在 settings.html 页面上可用。

```
<input type="checkbox" name="cards-nsyearcard" id="cards-nsyearcard" />
<label for="cards-nsyearcard">NS jaar/trajectkaart</label>
<input type="checkbox" name="cards-thepassbusiness" id="cards-thepassbusiness" />
<label for="cards-thepassbusiness">ThePass Business</label>
<input type="checkbox" name="cards-thepassweekend" id="cards-thepassweekend" />
<label for="cards-thepassweekend">ThePass Weekend</label>
<input type="checkbox" name="cards-thalys" id="cards-thalys" />
<label for="cards-thalys">Thalys TheCard</label> 
```

我们目前在这部分有点卡住了，所以非常感谢您的帮助。:-)

这是我们正在使用的数据库：

```
 //database storge
  function dbBtn(){
    db.transaction(populateDB,errorCB, successCB);
     $.mobile.changePage("settings_succesfull.html" );
     }
function  loadSettings(){
         db.transaction(queryDB, errorCB);
  }
function bdClick(){
  $.mobile.changePage("settings.html");
     db.transaction(queryDB, errorCB);
 }
 function queryDB(tx) {
     tx.executeSql('SELECT * FROM user', [], querySuccess, errorCB);
}
function querySuccess(tx, results) {
      len = results.rows.length;
        if (len > 0) {
            for (var i=0;i<len;i++) {
                 $("#user-         name").val(results.rows.item(i).userName);
                 $("#user-insertion").val(results.rows.item(i).userInsertion);
                 $("#user-lastname").val(results.rows.item(i).userLastname);
                 $("#user-email").val(results.rows.item(i).userEmail);
            }
        } 
}

function transaction_error(tx, error) {
alert("Database Error: " + error);
}
function tableDB(tx) {
// tx.executeSql('DROP TABLE IF EXISTS user');
        var sql = "CREATE TABLE IF NOT EXISTS user ( "+
        "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
        "userName VARCHAR(50), " +
        "userInsertion VARCHAR(50), " +
        "userLastname VARCHAR(50), " +
        "userEmail VARCHAR(50), " + 
        "age VARCHAR(20))";
         tx.executeSql(sql);
         }
function populateDB(tx) {
        var setName = $("#user-name");
    var setInsertion = $("#user-insertion");
    var setLastName = $("#user-lastname");
    var setEmail = $("#user-email");
    var setGender = $("input:checked");
    tx.executeSql('INSERT INTO USER (userName, userInsertion, userLastname,     userEmail,age) VALUES ("' + setName.val() + '", "' + setInsertion.val() + '", "' +     setLastName.val() + '", "' + setEmail.val() + '","' + setGender.val() + '")');
 }
function errorCB(tx, err) {
    alert("Error processing SQL: "+err);
}
function successCB() {
 //   alert("success! ");
} 
```

# git - 忽略 .gitignore 有什么不好的副作用吗？

> ID：12390194
> 
> 赞同：1
> 
> 时间：2012-09-12T14:14:44.740
> 
> 标签：git, version-control, gitignore

示例 .gitignore：

```
.gitignore
.DS_Store 
.project
.pydevproject
... 
```

添加 .gitignore 不好吗？我不需要跟踪它，我不喜欢混乱。

一个可以接受的答案是，“你是一个爱发牢骚的小子，对不应该惹恼你的事情感到恼火。所以不要浪费我们的时间。”

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:17:17.960

“你是一个爱发牢骚的小子，对不应该惹恼你的事情感到恼火。所以不要浪费我们的时间。”，@NaZer

[忽略 .gitignore 文件本身](https://stackoverflow.com/questions/767147/how-do-i-tell-git-to-ignore-gitignore)

接受的答案解释了为什么它应该在版本控制上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:24:02.973

该`.gitignore`文件旨在与 repo 的所有副本共享。这就是为什么它在工作树中而不是在`.git`目录中的原因。`.git/info/exclude`如果您只想忽略副本中的内容，请将文件放入。例如，如果您使用公司中没有其他人使用的编辑器，或者您正在使用同一工作树中的第二个 VCS。

# java - 刷新Activity内容或添加刷新按钮

> ID：12390203
> 
> 赞同：1
> 
> 时间：2012-09-12T14:15:06.543
> 
> 标签：java, android, refresh

因为我可以刷新一个activity的内容？例如，我有一个菜单和一个按钮，向我发送一个应用程序内容，显示在线信息，但要返回并再次返回，信息不会更新。

这是我的活动。

```
public class Bovalpo extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_bovalpo);

    Button buttonExit = (Button)this.findViewById(R.id.cerrar);
    buttonExit.setOnClickListener(
        new View.OnClickListener() {
            public void onClick(View v) {
                System.exit(0);
            }
        }
    );

    TextView myListView = (TextView) findViewById(R.id.tv);
    try {
        myListView.setText(getPage());
        if(getPage().contains("Abierto")){
            myListView.setTextColor(Color.parseColor("#008000"));
        }else{
            myListView.setTextColor(Color.parseColor("#FF0000"));
        }
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    }

private String getPage() throws MalformedURLException, IOException {
    HttpURLConnection con = (HttpURLConnection) new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=1").openConnection();
    con.connect();

    if (con.getResponseCode() == HttpURLConnection.HTTP_OK) {
        return inputStreamToString(con.getInputStream());
    } else {
        return null;
    }
}

private String inputStreamToString(InputStream in) throws IOException {
    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(in));
    StringBuilder stringBuilder = new StringBuilder();
    String line = null;

    while ((line = bufferedReader.readLine()) != null) {
        stringBuilder.append("Mercado: " + line + "\n");
    }

    bufferedReader.close();
    return stringBuilder.toString();
}

public void lanzar(View view){
 Intent i = new Intent(this, xml7009.class);
 startActivity(i);
}

public void lanzar3(View view){
 Intent i = new Intent(this, tabla7009.class);
 startActivity(i);
} 

public void lanzar4(View view){
    Intent i = new Intent(this, xml6503.class);
    startActivity(i);
}

public void  onClick(View arg0) {
      // TODO Auto-generated method stub
      finish();
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:21:33.777

获取数据并设置列表视图颜色的代码应该被放入，`onResume()`而不是`onCreate`如果您希望它在每次显示 Activity 时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:28:12.933

把你的代码放在这里

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

       // make your work to data bind

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:43:21.287

只需将更新代码放在活动的[onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)方法中即可。当您从其他活动返回时，将调用 OnResume() 方法。但是，例如，当您的活动恢复时，通常会调用 onResume() 方法。如果您打开并关闭对话框，那么您的活动将继续。因此，如果您在 onResume 中调用某些网络调用，那么它将消耗进程和网络速度。

另一种解决方案是使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)方法从下一个活动和活动结果的基础接收结果，您可以调用您的 Web API 或任何工作。您可以在[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)方法中获取下一个活动的结果。但在使用 startActivityForResult 方法之前，请确保下一个活动将通过调用[setResult()](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)方法设置结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:20:57.440

如果您想在每次活动时更新数据，则需要在 onResume 中设置更新的值

像下面

```
@Override
        protected void onResume() {
            super.onResume();

                 try {
                      myListView.setText(getPage());
                      if(getPage().contains("Abierto")){
                       myListView.setTextColor(Color.parseColor("#008000"));
                      }else{
                       myListView.setTextColor(Color.parseColor("#FF0000"));
                      }
                      } catch (MalformedURLException e) {
                         // TODO Auto-generated catch block
                         e.printStackTrace();
                        } catch (IOException e) {
                     // TODO Auto-generated catch block
                       e.printStackTrace();
        }
    } 
```

# event-handling - YUI 数据表：rowsPerPageChage 事件：在更改时获取下拉 ID

> ID：12390205
> 
> 赞同：0
> 
> 时间：2012-09-12T14:15:11.370
> 
> 标签：event-handling, datatable, yui

我从之前的帖子中重新发布了这个问题，因为当我最初问这个问题时，还不清楚。我不确定我真正需要什么，这导致我得到的回应不适用。

原文：[YUI Datatable - 在页面加载后获取 DOM 元素的 ID 并在其他 YUI 事件中使用它](https://stackoverflow.com/questions/12372704/yui-datatable-get-id-of-dom-element-after-page-has-loaded-and-use-it-in-other)

* * *

我的问题是这样的：

我有一个 YUI 数据表。我每页有一行下拉菜单。我需要创建一个事件或事件处理程序，或利用一个现有的，它将处理以下内容：

当（曾经）显示每页行的下拉列表发生更改时，事件处理程序应该获取该下拉列表的 id 并将其传递给另一个函数以用作参数。我的数据表有两个 rowsPerPageDropDown（又名 rppDD）元素。我需要这两个功能。

最好在页面加载时也这样做，但现在这是额外的功劳。

我知道“top” rppDD 元素的 id 当前是“yui-pg0-0-rpp12”，但我的问题源于这样一个事实，即如果我向此页面添加任何代码，该 id 将更改（变为“-rpp13”或相似的东西）。这会影响我的其他功能。所以我想在运行时获取 id（无论它可能是什么）并以这种方式使用它，而不是硬编码它。

第二个函数将在下拉更改后立即运行。它将使用下拉列表的 id 来获取当前选择的值并将其分配给要与第三个函数一起使用的变量。

* * *

到目前为止，这是我所拥有的：在较早的线程中，有人建议我使用事件 rowsPerPageChange。这仅在一定程度上有效。在该事件处理程序中放置一个简单的“hello world”警报证明它仅在页面加载时发出警报。每当我单击并将下拉菜单更改为其他内容时，它就不再发出警报。

下面是我用来测试的函数和代码：

```
var getRppValue = function() {
    YAHOO.util.Event.addListener("rowsPerPageChange", getRppValue.prototype.handleOnAvailable()); 
}

var rppDD_ID = "";

getRppValue.prototype.handleOnAvailable = function() {
    alert("hello world");
    alert(this.id); //should alert "yui-pg0-0-rpp12"
    //rppValue = this.id;
}

var rppEvent = new getRppValue(); 
```

据我所知，此事件仅在页面最初加载时触发/处理。那时，第一个警报按预期提示“hello world”。第二个警报显示“未定义”。目的是第二个警报应该提醒任何 rppDD 元素的 id 是（“yui-pg0-0-rpp12”）。

作为参考，我计划将 id 传递给的函数如下。正如我上面提到的，将 [the|either|both] rppDD 元素的当前值分配给变量 oRPP。然后它调用 endDrag() 函数（利用 oRPP）：

如果我要对 id 进行硬编码，它将是：

```
function getRPP_0(){oRPP = g("yui-pg0-0-rpp12").value;endDrag();}; 
```

我希望它是动态的：

```
function getRPP_0(){oRPP = g(rppDD_ID).value;endDrag();}; 
```

任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:21:57.973

正如我们在聊天中看到的，你有这个：

```
var onRPPChange0 = YAHOO.util.Event.addListener("yui-pg0-0-rpp12", "change", getRPP_0); 
var onRPPChange1 = YAHOO.util.Event.addListener("yui-pg0-1-rpp24", "change", getRPP_1); 
function getRPP_0(){oRPP = g("yui-pg0-0-rpp12").value;endDrag();}; 
function getRPP_1(){oRPP = g("yui-pg0-1-rpp24").value;endDrag();}; 
```

并且您希望能够访问函数中正在更改的元素。

`this`幸运的是，事件处理程序提供了在对象中发生事件的元素。

所以，这有效：

```
var onRPPChange0 = YAHOO.util.Event.addListener(
    "yui-pg0-0-rpp12", "change", function() {

    // Notice that "this" is the element on which the event was fired
    oRPP = this.value;

    endDrag();
}; 
```

这样，您可以轻松地概括您的函数，而无需对 ID 进行硬编码。

# php - Symfony 2：多选分层形式

> ID：12390212
> 
> 赞同：1
> 
> 时间：2012-09-12T14:15:30.893
> 
> 标签：php, forms, symfony, twig

我正在使用 Symfony 2，并且正在构建一个站点，其中有一个用户可以选择的能力列表。我已经成功地构建了一个将权限列表作为复选框的表单，但是，权限是按层次排序的，所以我想使用嵌套列表来展示它们。

我尝试过以这种方式使用自定义表单字段：

```
{% block _useredit_competences_widget %}
    {% for choice in choices %}
    <ul>
        <li>...</li>
    </ul>
    {% endfor %}
{% endblock %} 
```

但是权限在普通数组`choices`中，我只能打印名称，所以我无法访问父母或孩子。

任何线索我怎样才能做到这一点？

# javascript - 重定向到父窗口中的链接

> ID：12390213
> 
> 赞同：0
> 
> 时间：2012-09-12T14:15:32.353
> 
> 标签：javascript, asp.net

在我正在使用的父页面中：

```
function popitup(url) {
            newwindow = window.open("child.aspx", 'name', 
            'height=700,width=800,scrollbars=yes,    
            resizable=no ');
            if (window.focus) { newwindow.focus() }
                return false;
        } 
```

子窗口有一个链接：

```
protected void GridView_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Redirect("Link1.aspx");
} 
```

我在子窗口中被重定向。但我想在父窗口中打开“Link1.aspx”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:23:48.313

您可以使用一些 javascript 在子窗口中完成此操作。查一下`window.opener`楼盘。您可以使用以下方法重定向父级：`window.opener.location.href`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:26:46.417

您可以使用此 javascript 执行

```
window.parent.location = 'Link1.aspx' 
```

# json - 使用 SuperObject 将 JSON 反序列化为具有接口字段的对象

> ID：12390216
> 
> 赞同：3
> 
> 时间：2012-09-12T14:15:43.157
> 
> 标签：json, delphi, interface, deserialization, superobject

我在 DXE2 上使用 SuperObject（序列化工作正常）反序列化包含来自 json 的接口字段的对象时遇到问题。考虑以下：

```
 ITest = interface(IInterface)
    ['{9E5623FF-1BC9-4FFA-919D-80C45EE24F38}']
    function GetField3() : string;
    procedure SetField3(Value: string);
    property FField3: string read GetField3 write SetField3;
  end;

  TTest = class(TInterfacedObject, ITest)
  private
    FField3: string;
    function GetField3() : string;
    procedure SetField3(Value: string);
  public
    property Field3: string read GetField3 write SetField3;
    constructor Create(Field3: string);
  end;

  TMyClass = class(TObject)
  public
    FField1: string;
    FField2: string;
    FTest:  ITest;
    constructor Create(Field1: string; Field2: string; Test: ITest);
  end;

  // TTest-stuff omitted for brevity.

constructor TMyClass.Create(Field1, Field2: string; Test: ITest);
begin
  FField1 := Field1;
  FField2 := Field2;
  FTest := Test;
end;

var
  MyClass:        TMyClass;
  MyClass2:       TMyClass;
  JSONObj:        ISuperObject;
  SuperContext:   TSuperRttiContext;
begin
  MyClass := TMyClass.Create('Test1', 'Test2', TTest.Create('Test3'));
  SuperContext := TSuperRttiContext.Create();
  JSONObj := SuperContext.AsJson<TMyClass>(MyClass);
  WriteLn(JSONObj.AsString);
  MyClass2 := SuperContext.AsType<TMyClass>(JSONObj);
  MyClass2.Free();
  ReadLn;
end. 
```

当执行到`TSuperRttiContext.FromJson.FromClass`检查`FTest`-field 时，doo-doo 会撞到天花板上的螺旋桨（或安装在桌面上，如果您愿意的话）。此时，`Result := FromJson(f.FieldType.Handle, GetFieldDefault(f, obj.AsObject[GetFieldName(f)]), v);`被调用，这将我们带入 SuperObject.pas 代码中有趣的部分。为简洁起见，我将在这里复制它。

```
 procedure FromInterface;
  const soguid: TGuid = '{4B86A9E3-E094-4E5A-954A-69048B7B6327}';
  var
    o: ISuperObject;
  begin
    if CompareMem(@(GetTypeData(TypeInfo).Guid), @soguid, SizeOf(TGUID)) then
    begin
      if obj <> nil then
        TValue.Make(@obj, TypeInfo, Value) else
        begin
          o := TSuperObject.Create(stNull);
          TValue.Make(@o, TypeInfo, Value);
        end;
      Result := True;
    end else
      Result := False;
  end; 
```

分配给的值`soguid`是`ISuperObject`，所以很明显两者不匹配（我正在测试`ITest`，记得吗？）。所以我有点不知道该怎么做。反序列化由一个或多个接口字段组成的任何对象是否违法？

~~这似乎是一个常见的用例，我很难相信。~~我可以理解这样一个事实，即知道要选择给定接口的哪种实现可能并非易事。然而，我从序言中的评论中看到，应该支持接口对象 - [http://code.google.com/p/superobject/source/browse/trunk/superobject.pas#47](http://code.google.com/p/superobject/source/browse/trunk/superobject.pas#47)。

如果有人在那里解决了这个问题，那当然会很棒。谢谢！:)

# jsf-2 - JSF 1.2 与 JSF 2.1 中的 validateLength

> ID：12390218
> 
> 赞同：0
> 
> 时间：2012-09-12T14:15:47.623
> 
> 标签：jsf-2, jsf-1.2

我最近从 JSF 1.2 升级到 JSF 2.1。这是我的代码：

```
Product Code: <h:inputText id="productCode" value="#{dataItem.productCode}" maxlength="25" disabled="#{dataItem.disabled}">
                        <f:validateLength minimum="2" maximum="25" />
                    </h:inputText>
                    <h:message for="productCode" errorClass="error" showSummary="false" /> 
```

JSF 1.2 中 validateLength 的行为是，如果我们在字段 Product Code 中输入值“1”，该值小于允许的最小值 '2'，我将收到错误消息“Value is less than allowed minimum of '2' ”。但是，如果我没有为字段产品代码输入任何值，那么我不会看到任何错误消息。

这种行为改变了 JSF 2.1 的一部分。如果我没有为字段产品代码提供任何值，那么我会收到错误消息“值小于允许的最小值‘2’”。

这种行为真的改变了 JSF 2.1 的一部分吗？

非常感谢您对此的任何想法或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:31:02.470

这实际上是 JSF 1.2 中的一个错误。不应这样验证空的**非必填字段。**

如果要验证需求，请使用`required="true"`.

```
<h:inputText ... required="true"> 
```

如果要控制所需的消息，请设置`requiredMessage`属性（自 JSF2 起新增）：

```
<h:inputText ... required="true" requiredMessage="Please enter value"> 
```

顺便说一句，您也可以控制通用验证消息`validatorMessage`（自 JSF2 以来也是新的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T22:05:43.510

您可以通过添加以下上下文参数来配置此行为：

```
<context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
</context-param> 
```

# java - Subclipse 将包扩展为文件夹（Eclipse、Java、SVN）

> ID：12390219
> 
> 赞同：1
> 
> 时间：2012-09-12T14:15:52.680
> 
> 标签：java, eclipse, svn, subclipse

我的 Java 项目有一个 SVN 存储库。我想同步我的两台计算机，所以我使用 Subclipse 从 Eclipse 提交它。然后，我使用 Subclipse（全新，该项目在另一台计算机上不存在）将它从我的另一台计算机拉到 Eclipse，它似乎已将包膨胀到其各自的文件夹中。（例如： foo.bar.baz.myProject 扩展为 foo/bar/baz/myProject 而不是保留在包结构中）。有谁知道如何取回包视图？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:40:40.837

这只是 Eclipse 中的一个视图选项。将您的包裹展示样式设置为`flat`：

![如何解决](../Images/9e2b0ca12dc49d725f5f8f222a5222cb.png)

如果您缺少包资源管理器本身，您可以将其取回`Window->Show View->Package Explorer`

您可能还想检查您的项目是否是 Java 项目。如果没有，请将其重新导入为 Java 项目，您可能已经没问题了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:24:37.527

发生的事情是 eclipse 没有将您的项目识别为 java 项目。Java 项目在包/文件夹方面得到特殊处理。确保您已在顶级项目级别签入（和签出）您的 .project 文件。请注意，在包资源管理器视图中，默认情况下您可能看不到 .* 文件。您可以单击向下箭头来调整过滤和取消隐藏 .* 文件。

否则，您可以在另一台（第二台计算机）中创建一个测试 java 项目，并将所需的元素复制到您的 .project 文件中。

最后，确保您在 Eclipse 中的包资源管理器中。有几个视图可用于查看您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:25:13.980

听起来您已将代码作为标准项目而不是 Java 项目导入。普通项目不会在项目资源管理器中显示包层次结构。

按照[此链接](http://enarion.net/programming/eclipse-change-general-to-java-project/)中的步骤转换为 Java 项目。

# yii - Yii 验证场景是否可以在 enableClientValidation 设置为 true 的情况下工作？

> ID：12390220
> 
> 赞同：3
> 
> 时间：2012-09-12T14:15:53.797
> 
> 标签：yii

在这里使用 Yii 1.1.8。

有谁知道 Yii 验证场景是否适用于客户端 Yii 验证`'enableClientValidation'=>true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:19:27.670

Yii 将使用您构建表单时设置的场景。

因此，无论表单初始化时的情况如何，都将得到尊重，因为 ActiveForm 使用[Model->getValidators](http://www.yiiframework.com/doc/api/1.1/CModel#getValidators-detail)。

唯一的问题是您的“保存”逻辑的场景发生变化，但这不应该太常见。

# php - Oracle数据库中日期的PHP格式

> ID：12390222
> 
> 赞同：3
> 
> 时间：2012-09-12T14:15:54.667
> 
> 标签：php, oracle

我将日期存储在正在`CREATED`使用的数据库中`select sysdate from dual`，它将存储`9/12/2012 9:26:05 AM`正是我想要的值。

但是，当我使用 PHP（例如`$query[0]['CREATED']`）检索信息时，它会返回`12-SEP-12`

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-25T16:50:16.140

为了完整起见，您可以在开始时设置连接，以便从那一刻起始终以特定格式检索日期，如下所示：

```
// Typical connection boilerplate
$conn_string = $config['engine'] . ':host=' . $config['host'] . ';port=' . $config['port'] . ';dbname=' . $config['dbname'] . ';charset=utf8';

$db = new PDO($conn_string,
    $config['username'],
    $config['password']
);

$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// This is where you prepare your session
// For your case, the format should be 'dd/mm/yyyy hh:mi:ss am' as stated on the previous answers
$db->query("ALTER SESSION SET NLS_DATE_FORMAT = 'DD/MM/YYYY HH24:MI:SS'"); 
```

这样您就可以执行 general `SELECT *`，而不必每次都担心特定`DATE`列的格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:24:25.660

当您检索日期时，它必须从时间点的抽象表示转换为字符串。如果您不指定格式，则默认使用一种格式（通常为`NLS_DATE_FORMAT`）：

```
SQL> select sysdate from dual;

SYSDATE
---------
12-SEP-12 
```

如果您想要特定格式，则必须使用转换功能，例如[`TO_CHAR`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#i1009324)：

```
SQL> SELECT to_char(sysdate, 'dd/mm/yyyy hh:mi:ss am') dt FROM DUAL;

DT
----------------------
12/09/2012 04:25:04 pm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T09:41:04.603

使用 sysdate 转换并使用 DD-MM-YYYY 键入将返回`12-09-2012`：

```
select field name, TO_CHAR(sysdate, 'DD-MM-YYYY') AS sysdate from database name; 
```

# asp.net - Asp.Net Web API 与 Web 服务

> ID：12390224
> 
> 赞同：2
> 
> 时间：2012-09-12T14:16:00.400
> 
> 标签：asp.net, web-services, asp.net-web-api

我有几个使用标准 Web 服务的站点，其结果作为 Json 到 JQuery ajax 调用返回。这些站点不使用任何标准的 .Net 控件或视图状态，它们都是使用 html5 和 JQuery 完成的。示例：http: [//ReactiveWebDesign.Net](http://ReactiveWebDesign.Net)

我开始使用新的 Web API，但我也试图弄清楚如果我进行切换并开始使用新的 Web API，我将获得什么（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:35:10.417

我认为您的问题需要清晰/完善-您真正要问的是什么？

*   如果您问是否“必须”使用控件来使用 ASP.Net 中的 Web 服务。答：当然不是。如果您想快速拼凑一些东西，也就是“设置并忘记”，我们会为您提供控件和/或助手 - 但这并不意味着您不能选择“裸机”。
*   ASP.Net 是一种包含 Web 服务、Web 表单、mvc/razor、数据、脚本等的技术。您可以自由选择使用哪些组件，混合搭配，随心所欲。您可以编写 HTML5、使用 jQuery、使用/使用您自己或第三方的 Web 服务，无论是否使用“控件”或随意混合/匹配。
*   您可以在 ASP.Net 或 .Net/WCF 中构建自己的 Web 服务，使用它们和/或使它们在外部可用。

* * *

更新：

与 ASP.Net 的每一次迭代一样，Microsoft 使事情*变得更容易*。如果您正在寻找创建 Web 服务，新的“Web API”使事情变得更容易，如本[示例](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)所示。

我个人可以说，Web API 示例“看起来”就像 ASP.Net 开发人员已经知道的普通 MVC 项目 - 而不是说 WCF 在成功部署中存在“正确配置”（例如行为设置、端点等） .)。

恕我直言，*轻松*可能是开始使用 Web API 的最佳理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:26:20.943

基本上，你可以获得很多好处，比如 RESTful api、耗尽 IIS（Self-Host）的能力、改进的 IoC 支持等等。更多详情请访问：[http://www.asp。网络/网络API](http://www.asp.net/web-api)

# html - Firefox 15 显示 HTML5 页面缩小了 33%，没有设置覆盖它

> ID：12390226
> 
> 赞同：0
> 
> 时间：2012-09-12T14:16:13.600
> 
> 标签：html, firefox, web-applications, zooming

我使用 Firefox 进行网页设计工作，因为我习惯并喜欢 Firebug 和 Web Developer Toolbar。我现在正在制作一个页面模板，并且无法了解所有内容的外观，因为它已缩小。非 HTML5 网页具有正确的缩放级别。

我用谷歌搜索了很多，但没有找到任何相关的东西。

我想关闭这种行为，必要时使用一些 -moz-* 指令，因为它显示网页的方式与所有其他 HTML5 浏览器不同。

如何？

如果问题是自 Mac 15.0.1 以来的新问题，如果您可以链接修复它的版本，我将暂时接受降级。

注意：这与用户可以使用 Ctrl + 和 - 更改的页面缩放无关。

**编辑：嗯，support.mozilla.com 是正常规模（似乎）。有人可以帮我找到哪些 HTML5 代码会关闭（据说）HiDPI Canvas 或导致此问题的任何原因吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:20:33.787

附加的[默认全缩放级别](https://addons.mozilla.org/en-US/firefox/addon/default-fullzoom-level/)修复了它。

Firefox 15 在域级别存储单独的缩放级别。现在，我正在测试的页面在我自己的域上，我以前从未访问过它（除了在我卸载的旧版本的 Firefox 中 - 它具有正确的缩放），并且我从未将其缩小（最重要的是Ctrl+0 什么都不做，这告诉我浏览器已经决定了 100% 的含义）。这应该意味着缩放级别根据无法更改的隐藏规则（希望）自动分配给域。

但是有了插件就可以了。只是安装它修复了我的页面。

对于其他站点，例如这个站点，您似乎必须进行一些设置。未确认不正确缩放和 HTML5 页面之间的关联，即使我没有找到不能正确缩放的非 HTML5 页面。

# hadoop - 在 hadoop 多节点集群上运行 mahout kmeans

> ID：12390229
> 
> 赞同：1
> 
> 时间：2012-09-12T14:16:19.823
> 
> 标签：hadoop, mahout

我在多节点集群上运行 kmeans。输入大小约为 100mb，我已经像这样修改了 bin/mahout 文件

> .
> 
> .
> 
> .
> 
> MAHOUT_OPTS="$MAHOUT_OPTS -Dmapred.min.split.size=10MB"
> 
> .
> 
> .
> 
> MAHOUT_OPTS="$MAHOUT_OPTS -Dmapred.map.tasks=10"

在每次迭代中，我得到

> 12/09/12 17:05:02 INFO mapred.JobClient: 启动地图任务=1
> 
> 2012 年 12 月 9 日 17:05:02 信息 mapred.JobClient：启动减少任务 = 6
> 
> 2012 年 12 月 9 日 17:05:02 信息 mapred.JobClient：数据本地地图任务 = 1

这是否意味着它在单节点而不是多节点上运行？如果是这样，我在配置中错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:50:16.347

如果你想要更多的分割，当然你想设置最大分割大小而不是最小。它仍然只是对集群的一个建议。

# vb.net - vb.net 更新数据表 - RowChanged

> ID：12390233
> 
> 赞同：0
> 
> 时间：2012-09-12T14:16:33.337
> 
> 标签：vb.net, datatable

我正在尝试更新 datagridview 和图表。
我有一个类，在那个类中我有一个从数据库返回数据表的函数。
我需要 bindingSource 因为这是我更新图表（条形图）
的方式不幸的是，当图表是饼图时，我需要使用数据表进行更新
所以当我加载表单时，我有：

```
gbsGraph.DataSource = graphFunctions.prepareData() 'gbsGraph is a BindingSource
gdtGraphData = graphFunctions.prepareData() 'gdtGraphData  isDataTable
gdv.DataSource = gbsGraph 'gdv is my datagridview
AddHandler gdtGraphData.RowChanged, AddressOf gdtGraphData_RowChanged 'add event for update piechart
fillChart()'code to fill the chart 
```

当用户按下刷新按钮时：

```
Private Sub tsmiRefresh_Click(sender As System.Object, e As System.EventArgs) Handles tsmiRefresh.Click
  gbsGraph.DataSource = graphFunctions.prepareData()' this works and dgv and my bar charts are updated
  gdtGraphData = graphFunctions.prepareData()  'this is should trigger the event gdtGraphData.RowChanged but it doesn't   
End Sub 
```

我的 DataRowChange 自定义事件：

```
Private Sub gdtGraphData_RowChanged(ByVal sender As Object, ByVal e As DataRowChangeEventArgs)
    'Here is code to refill the Pie chart
    'but the event isn't fired
End Sub 
```

所以我的问题是如何更新我的数据表并触发 gdtGraphData_RowChanged 事件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:26:03.090

当数据表内的行内的值发生更改时，将引发行更改事件，而不是当您将数据表的新实例放入变量时...

一个例子：

```
' This will raise the rowchanged event
gdtGraphData.Rows(0)("someField") = 123

' This will not!
gdtGraphData = graphFunctions.prepareData() 
```

您必须将代码重新填充到 tsmiRefresh_Click 内的饼图...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:26:10.357

在这一行

```
gdtGraphData = graphFunctions.prepareData() 
```

您正在删除`DataTable`您收听其`RowChanged`事件的那个。您必须对现有表进行更改才能触发任何事件。

我认为您可以在上面的行之后添加对填充饼图的方法的调用，而不是那样。

# java - 用于在 iOS/android 上为 2D 游戏（如塔防）制作动画的方法

> ID：12390237
> 
> 赞同：1
> 
> 时间：2012-09-12T14:16:45.167
> 
> 标签：java, android, ios, animation, graphics

如果我要在 iOS 或 Android 上制作像塔防这样的游戏，我是否需要广泛使用 OpenGL ES？或者我只是使用纹理而不使用几何变换、闪电、绘制原始形状等其他功能？其次，如果我只使用 sprite-sheet 来为游戏制作动画，我是否可以坚持使用原生平台提供的库而不使用 OpenGL ES？例如在 iOS 上，使用 UIImageView 类的动画方法来执行动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:05:26.103

这是一个如此复杂的问题，你几乎不会得到一个确凿的答案。

简而言之：根本不需要接触 OpenGL 来做游戏。

您描述的每种方法都可以使用，但有各种优点和缺点。Android 内置框架的简短说明：

1.  使用标准视图（如 FrameLayouts）：框架可以完成您的大部分工作（动画、z 排序等），但您会经常遇到奇怪的布局错误和令人惊讶的性能下降。这是因为您实际上是在阅读游戏的 UI 框架。然而，对于一个非常简单的游戏来说，这可能是正确的做法。

2.  使用 Canvas 绘画：Android 包含一个很好且相当快速的 2D 图形库。您可以将它用于游戏，它将为许多游戏提供足够的性能。但是，您必须自己做更多的事情（例如，z-sorting、动画）并且一些高端效果仍然是不可能的

3.  OpenGL ES：最佳性能，最多选择。祝你好运，当你从头开始时，在你获得屏幕上最简单的东西之前，还有**很多**事情要做。另一方面，您可以做其他方法几乎不可能完成的事情。此外，可以为多个平台重用部分代码。

4.  Renderscript：根据我的经验，比直接使用 OpenGL 更糟糕的是，学习曲线更加陡峭。

简而言之，首先设计游戏，然后决定哪个框架可以提供足够的功能而不至于太复杂。

最后：考虑一下*不要*自己做所有的管道，而是看看现有的游戏引擎（例如[Unity ）。](http://unity3d.com/)几乎所有你需要的东西都在那里；此外，其中一些引擎甚至可以跨平台工作：编写您的游戏一次，在 iOS**和**Android 上发布！

# python - 什么是 sre_constants.error：无需重复

> ID：12390238
> 
> 赞同：10
> 
> 时间：2012-09-12T14:16:50.300
> 
> 标签：python, regex

我遇到了一个看似简单的 Python 正则表达式的问题。

```
# e.g. If I wanted to find "mark has wonderful kittens, but they're mischievous.."
p = re.compile("*kittens*") 
```

这将失败并出现错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.7/re.py", line 190, in compile
    return _compile(pattern, flags)
  File "/usr/lib64/python2.7/re.py", line 242, in _compile
    raise error, v # invalid expression
sre_constants.error: nothing to repeat 
```

我可能遗漏了一些非常简单的东西，正则表达式当然不是我的强项！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T14:19:01.167

您将正则表达式与[glob](http://en.wikipedia.org/wiki/Glob_%28programming%29)混淆了。

你的意思是：

```
p = re.compile(".*kittens.*") 
```

请注意，裸星号在 RE 中的含义与在 glob 表达式中的含义不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:19:34.773

`*`是一个元字符，意思是“0个或多个前面的标记”，第一个没有什么可重复的`*`。

也许您正在寻找单词边界：

```
p = re.compile(r"\bkittens\b") 
```

`\b`确保只有整个单词匹配（所以这个正则表达式会失败，咳咳，`"kittenshit"`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T11:40:37.337

问：什么是 re.py、sre.py、sre_constants.py？

答。[https://blog.labix.org/2003/06/16/understanding-pythons-sre-structure](https://blog.labix.org/2003/06/16/understanding-pythons-sre-structure)

代码：

```
our_regex = '.*pattern.*('
try:
 re.compile(our_regex)
except Exception, e:
 print e, type(e)

unbalanced parenthesis <class 'sre_constants.error'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-14T05:36:04.130

它似乎是由 re 模块引发的错误。

要处理它，请导入 sre_constants 模块

这是一个小例子——使用 Pandas 数据框（这是我在看这个时遇到的问题）。

```
import re
import sre_constants

try:
    df=d[d.Ex_Feed.str.contains('*123', regex=True)]
except sre_constants.error as err:
    print("SRE Error")
except Exception as error:
    print("Some other err Err")
    print("{}".format(type(err)))
    junk=1
finally:
    print("It's time for bed said Zeberdee") 
```

希望有帮助

# c# - Windows 窗体中的文本动画

> ID：12390239
> 
> 赞同：2
> 
> 时间：2012-09-12T14:17:02.730
> 
> 标签：c#, winforms, text

我想知道是否有一种方法可以为表单上显示的文本添加一种动画。

当我想到这一点时，我想到的有点类似于您可以在 PowerPoint 中对文本执行的操作（即类似打字机的动画，一次输入一个文本，让整个文本框以某种效果出现等)，我只是想了解您可以使用 Windows 窗体做什么。

目前我正在使用文本框在我的表单应用程序上显示信息，但事后我意识到标签也可以。

**编辑：**原来我毕竟在使用标签，我只是给它一个名字，里面有“文本框”，因为没有更好的描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:10:31.013

```
public partial class Form1 : Form
{
    int _charIndex = 0;
    string _text = "Hello World!!";
    public Form1()
    {
        InitializeComponent();
    }

    private void button_TypewriteText_Click(object sender, EventArgs e)
    {
        _charIndex = 0;
        label1.Text = string.Empty;
        Thread t = new Thread(new ThreadStart(this.TypewriteText));
        t.Start();
    }

    private void TypewriteText()
    {
        while (_charIndex < _text.Length)
        {
            Thread.Sleep(500);
            label1.Invoke(new Action(() =>
            {
                label1.Text += _text[_charIndex];
            }));
            _charIndex++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:06:56.173

现在，我个人不会这样做，因为免费的动画往往会惹恼用户。我只会谨慎地使用动画——当它真正有意义的时候。

也就是说，您当然可以执行以下操作：

```
 string stuff = "This is some text that looks like it is being typed.";
 int pos = 0;
 Timer t;

 public Form1()
 {
     InitializeComponent();
     t = new Timer();
     t.Interval = 500;
     t.Tick += new EventHandler(t_Tick);
 }

 void t_Tick(object sender, EventArgs e)
 {
     if (pos < stuff.Length)
     {
         textBox1.AppendText(stuff.Substring(pos, 1));
         ++pos;
     }
     else
     {
         t.Stop();
     }
 }

 private void button1_Click(object sender, EventArgs e)
 {
     pos = 0;
     textBox1.Clear();
     t.Start();
 } 
```

或类似的东西。它会每半秒打勾并在多行文本框中添加另一个字符。只是某人*可以*做的一个例子。

# c# - 通过 switch 语句失败（有时有效？）

> ID：12390245
> 
> 赞同：2
> 
> 时间：2012-09-12T14:17:18.627
> 
> 标签：c#, switch-statement, fall-through

我有一个 switch 语句，如下所示：

```
switch (condition)
{
    case 0:
    case 1:
        // Do Something
        break;
    case 2:
        // Do Something
    case 3:
        // Do Something
        break;
} 
```

我收到一个编译错误告诉我`Control cannot fall through from one case label ('case 2:') to another`

嗯......是的，你可以。因为你是从`case 0:`到做的`case 1:`。

事实上，如果我删除我`case 2:`的和它相关的任务，代码会编译并且会从`case 0:`into `case1:`.

那么这里发生了什么，我怎样才能让我的案例语句通过并执行一些中间代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T14:19:58.797

堆叠标签和直通标签是有区别的。

C# 支持前者：

```
case 0:
case 1:
    break; 
```

但不会失败：

```
case 2:
    // Do Something
case 3:
    // Do Something
    break; 
```

如果你想要失败，你需要明确：

```
case 2:
    // Do Something
    goto case 3;
case 3:
    // Do Something
    break; 
```

推理很明显，隐式失败会导致代码不干净，特别是如果您有超过一两行代码，并且控制流程如何变得不清楚。通过强制显式失败，您可以轻松地跟随流程。

参考：[msdn](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:19:09.920

引用 MSDN：

“C# 不支持从一个案例标签到另一个案例标签的隐式下降。一个例外是案例语句没有代码。”

基本上，在案例中放入陈述而不包括休息是不合法的。

```
case 1:
case 2:
//do stuff
break; 
```

是合法的

但：

```
case 1:
//do stuff without a break
case 2:
//do stuff
break; 
```

不是。

[http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:19:21.730

因为它们共享相同的代码块`case 0`，所以您不会跌倒。`case 1`这和之前写的`case 1`一样`case 0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:26:03.853

在 C# 中，除非第一个标签没有特定代码，否则不能隐式地从一个标签转到另一个标签。你可以有

```
case 1:
case 2:
    // Do Something
break; 
```

但不是

```
case 1:
    // Do Something
case 2:
    // Do Something
break; 
```

有关更深入的解释，请参阅[msdn 。](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.110%29.aspx)

如果你想明确地通过，你可以使用[goto](http://msdn.microsoft.com/en-us/library/13940fs2%28v=VS.80%29.aspx)指令。这也是使用 goto 不是坏习惯的罕见情况之一。

```
case 1:
    // Do Something
    goto case 2;
case 2:
    // Do Something
break; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:19:40.450

只有当 case 语句之间没有代码时，代码才能在 C# 中“失败”。代码示例推断在案例 2 和案例 3 之间存在代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:20:20.467

这是**不允许**的

```
switch (condition)
{
    case 0:
        // Do Something
    case 1:
        // Do Something
        break;
} 
```

这是允许的

```
 switch (condition)
    {
        case 0:
        case 1:
            // Do Something
            break;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T14:26:41.590

问题是您在案例 2 中做某事，然后试图失败，这是不受支持的。你从 0 到 1 没有任何额外的活动。

# rest - 在 PowerShell 中查看 System.Net.HttPWebRequest 的原始 Xml

> ID：12390246
> 
> 赞同：1
> 
> 时间：2012-09-12T14:17:25.723
> 
> 标签：rest, powershell, system.net.httpwebrequest

全部，

我正在尝试通过 PowerShell 访问一个宁静的 API。该 API 需要几个非标准标头，因此我使用 $request.Headers.Add() 语法。

我收到 (500) 内部服务器错误，所以我知道我离得很近。

我不能使用 WireShark，因为端点是 Https。

如何在 PowerShell 中构建 HttpWebRequest 对象并查看原始 XML？

这是简单的代码：

```
$concat = EncodeBase64("$($username)@$($org):$($password)")

$request = [System.Net.HttpWebRequest]::Create($URL);
$request.Method = "POST";
$request.ContentType = "application/vnd.vmware.vcloud.session+xml;version1.5";
$request.Headers.Add("x-vcloud-authorization", $concat); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:06:51.250

去抓住[Fiddler](http://www.fiddler2.com/Fiddler2/version.asp)并[阅读如何使用它来查看 https 流量](http://www.fiddler2.com/Fiddler/help/httpsdecryption.asp)。

# eclipse-emf - 如何在 ecore 和 gen 模型中使用默认值 = null 设置枚举引用？

> ID：12390250
> 
> 赞同：5
> 
> 时间：2012-09-12T14:17:27.437
> 
> 标签：eclipse-emf, eclipse-emf-ecore, emf

我有一个 Eclass `Vehicle`，它有一个 enum 属性`BreakType breakType`。

`BreakType`在相同的 Ecore 模型中定义为：

```
BreakType{
    DRUM(0), DISC(1), BLADE(2)
} 
```

我想将属性`breakType`默认设置为空。为此，我为属性设置了以下`breakType`属性->

```
DefaultLiteralValue: // it's blank
Unsettable: True

Properties of BreakType enum
Default Value : DRUM=0 // this is shown in editor UI even If i remove it from xml. 
```

在生成 gen-model 和代码之后我得到的是

```
BreakType breakType = DRUM // attribute set with default value 
```

默认情况下，如何将其设置为 null？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:12:54.667

我不认为你可以。如果您未能通过`defaultValueLiteral`属性提供默认值，EMF 会自动选择适合属性类型的值。对于枚举类型，它是它定义的第一个文字值。

您始终可以自己修改生成的代码。或者，也许您应该使用生成的方法来提供不可设置的功能：

```
void unsetAttribute();
boolean isSetAttribute(); 
```

并检查未设置状态而不是`null`值。

# join - Pig 脚本：加入多个文件

> ID：12390252
> 
> 赞同：1
> 
> 时间：2012-09-12T14:17:34.260
> 
> 标签：join, apache-pig, bigdata

我正在读取一个大文件（超过 10 亿条记录）并将其与其他三个文件连接起来，我想知道是否有任何方法可以更有效地避免对大表进行多次读取。小表可能不适合记忆。

```
A = join smalltable1 by  (f1,f2) RIGHT OUTER,massive by (f1,f2) ;
B = join smalltable2 by  (f3) RIGHT OUTER, A by (f3) ;
C = join smalltable3 by  (f4) ,B by (f4) ; 
```

我正在考虑的替代方法是编写一个 udf 并在一次读取中替换值，但我不确定 udf 是否有效，因为小文件不适合内存。实现可能是这样的：

```
A = LOAD massive 
B = generate f1,udfToTranslateF1(f1),f2,udfToTranslateF2(f2),f3,udfToTranslateF3(f3) 
```

欣赏你的想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:59:51.290

Pig 0.10 引入了与 Bloom Filters 的集成[http://search-hadoop.com/c/Pig:/src/org/apache/pig/builtin/Bloom.java%7C%7C+%2522done+%2522exec+Tuple%2522](http://search-hadoop.com/c/Pig:/src/org/apache/pig/builtin/Bloom.java%7C%7C+%2522done+%2522exec+Tuple%2522)

您可以在 3 个较小的文件上训练布隆过滤器并过滤大文件，希望它会产生更小的文件。之后执行标准连接以获得 100% 的精度。

**更新 1** 当您加入不同的键时，您实际上需要训练 2 个布隆过滤器，每个小表一个。

**更新 2** 评论中提到外连接用于扩充数据。在这种情况下，布隆过滤器可能不是最好的选择，它们适用于过滤而不是在外部连接中添加数据，因为您希望保留不匹配的数据。更好的方法是对各个字段（f1、f2、f3、f4）上的所有小表进行分区，将每个分区存储到一个足够小的单独文件中以加载到内存中。比 f1、f2、f3、f4 上的 Group BY 大表和 FOREACH 将组（f1、f2、f3、f4）与相关包传递给用 Java 编写的自定义函数，该函数将小文件的相应分区加载到RAM 并执行增强。

# jquery - 使用 ID 将单选按钮替换为图像

> ID：12390257
> 
> 赞同：2
> 
> 时间：2012-09-12T14:17:49.073
> 
> 标签：jquery, input, radio

我希望用不同的图像替换标准输入收音机，基本上是收音机本身的视觉分级比例，我需要一个跨浏览器解决方案，它不像许多其他人那样依赖使用标签标签。我已经将标签标签用于实际问题文本。我想通过定位输入的 ID 来进行图像切换来做到这一点。这可以用jquery完成吗？正如我所说，标签标签不能用于此，我看到的每个示例都使用标签，这是不可能的。

基本上，这就是我所拥有的代码。

```
 <label>Question Goes Here</label>
 <input type="radio" name="question1" id="Best"    value="5" />
 <input type="radio" name="question1" id="Better"  value="4" />
 <input type="radio" name="question1" id="Average" value="3" />
 <input type="radio" name="question1" id="Worse"   value="2" />
 <input type="radio" name="question1" id="Worst"   value="1" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:25:10.123

```
var images = {
  Best: 'path_to_image',
  Better: 'path_to_image',
  Average: 'path_to_image',
  Worse: 'path_to_image',
  Worst: 'path_to_image'
};

$('input[type=radio][name^=question]').each(function() {
   var id = this.id;
   $(this)
          .hide()  // hide the radio button
          .after('<img src="'+ images[id] +'">'); // insert the image 
                                                  // after corresponding radio
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:33:16.020

我扩展了代码悖论的答案，并添加了可见检查状态的基本功能。这是小提琴：http: [//jsfiddle.net/crowjonah/cfN5t](http://jsfiddle.net/crowjonah/cfN5t)

我重组了插入的内容`.after`，并大量借鉴了[这个答案](https://stackoverflow.com/questions/5112995/is-there-an-easy-way-to-replace-radio-button-with-images-and-a-colored-border-f)，添加了一个`.live`点击功能，该功能将实际检查和取消选中隐藏的单选按钮，并让您有机会使用 CSS 更改其外观。我选择使用 CSS 背景图像而不是实际的图像标签，并将 srcs 存储在 js 变量中，并`.radio-image`为每个输入添加一个类，我们将用作我们的 jQuery 选择器，以仅针对我们想要转换为图像的单选按钮。这是HTML：

```
<label>How good?</label>
 <input type="radio" class="radio-image" name="question1" id="best"    value="5" />
 <input type="radio" class="radio-image" name="question1" id="better"  value="4" />
 <input type="radio" class="radio-image" name="question1" id="average" value="3" />
 <input type="radio" class="radio-image" name="question1" id="worse"   value="2" />
 <input type="radio" class="radio-image" name="question1" id="worst"   value="1" /> 
```

剧本：

```
 $(function() {
    $('input[type=radio].radio-image').each(function() {
        var id = this.id;
        $(this).hide().after('<a class="newrad" href="#"><div class="radio" id="' + id + '"></div></a>');
    });
    $('.newrad').live('click', function(e) {
        e.preventDefault();
        var $check = $(this).prev('input');
        $('.newrad div').attr('class', 'radio');
        $(this).find('div').addClass('checked');
        $('input[type=radio].radio-image').attr('checked', false);
        $check.attr('checked', true);
    });
});​ 
```

和 CSS（我们现在定义图像和可选的检查状态）：

```
label {display:block;}
.radio {
    opacity: 0.5;
    width: 80px;
    height: 80px;
    float: left;
    margin: 5px;
}
.checked {opacity: 1;}
#best {background: url(http://www.placehold.it/80&text=Best);}
#better {background: url(http://www.placehold.it/80&text=Better);}
#average {background: url(http://www.placehold.it/80&text=Average);}
#worse {background: url(http://www.placehold.it/80&text=Worse);}
#worst {background: url(http://www.placehold.it/80&text=Worst);}
​ 
```

# oracle11g - 如何使用 Oracle-Xquery 从存储在多行中的 XML 中检索属性值？

> ID：12390261
> 
> 赞同：1
> 
> 时间：2012-09-12T14:17:54.927
> 
> 标签：oracle11g, xquery

我们正在使用带有 XMLDB 安装的 Oracle 11g 数据库。我们有带有 XMLType 列的表。XML 的结构对于表中的所有行都是相同的。该表还将有其他字段。

现在我只想从所有行中检索特定节点的属性值的值，并将其作为带有一些其他关系字段的字符串。检索到的表列可以是 TemplateId、TemplateVid、TemplatepartId。

XML的结构可以如下：

```
<Template ID=1000 VID=1>
  <TemplateParts>
    <Template ID="4000" VID="1"/>
    <Template ID="4001" VID="1"/>
  </TemplateParts>
</Template> 
```

因此，该表将包含具有 TemplateId、Vid 和 TemplateXML 的模板数据。TemplateXML 字段是一个 XMLType 字段。现在我想以 XML 表的形式检索所有 TemplateId、Vid 及其引用的模板 partId。输出应如下所示：

```
TemplateId - TemplateVid - TemplatePartId - TemplatepartVid
1000           1             4000             1
1000           1             4001             1 
```

所以任何人都想出一个正确的 Xquery 来满足上述要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:23:02.813

您的要求尚不清楚，但希望您能从 StackOverflow 上更广泛的 XQuery 社区获得一些额外的评论，这是一个简单的示例。希望这可以帮助 ：）

```
xquery version "1.0";

<html>
<head>
<title>Sample</title>
</head>
<body>
<div align="center">
<table>
<tr><th>TemplateId</th><th>TemplateVid</th><th>TemplatePartId</th><th>TemplatepartVid</th></tr>
{
    let $sample as element()* := (<root><Template ID="1000" VID="1"><TemplateParts><Template ID="4000" VID="1" /><Template ID="4001" VID="1" /></TemplateParts></Template></root>)
    for $e in $sample/Template
    return
        for $tp in $e/TemplateParts/Template
        return 
            (<tr><td>{data($e/@ID)}</td><td>{data($e/@VID)}</td><td>{data($tp/@ID)}</td><td>{data($tp/@VID)}</td></tr>)
}
</table>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:13:54.280

正如我在之前的评论中提到的，我已经设法从所有行的 xmltype 列中获取存储在节点 /Template/TemplateParts/Template 下的 ID 和 VID。查询如下：

```
select distinct  x.value as TemplatePartId,Y.Value as Vid from 
TempVersion t ,
xmltable('/Template/TemplateParts/Template' passing t.CONTENT columns  value    varchar2(10) path '@ID' ) x,
  xmltable('/Template/TemplateParts/Template' passing t.CONTENT columns  value varchar2(10) path '@VID' ) y
    order by TemplatePartId; 
```

如果有人知道更好的格式，请发布您的示例查询。我需要作为普通查询，因为我的 ORM 工具不支持上述格式。如果您查看上面的查询，您会注意到 XMLTable 表达式将放在 From 子句之后。当我尝试通过我的 LLBLGen ORM 工具形成这个查询时，这会带来麻烦。

# magento - Magento - 获取属性选项的产品数量

> ID：12390262
> 
> 赞同：1
> 
> 时间：2012-09-12T14:17:56.690
> 
> 标签：magento, attributes, count, option, product

我有具有属性和选项的产品。例如 Person 属性有 Man 和 Woman 选项。在首页上，我在左侧列中列出了这些选项=男人，女人我想显示属于该选项的产品的选项数量。

例如 10 个产品在属性 Person 中选择了选项 Man，所以在首页我想要 Man (10)。

任何提示如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:33:02.147

我在评论或自定义实现示例中建议的内容：

```
$person_counts = array();
foreach ($products as $product) {
  if (!isset($person_counts[$product->getPerson()])) {
    $person_counts[$product->getPerson()] = 0;
  }
  $person_counts[$product->getPerson()]++;
}

foreach ($person_counts as $attribute => $count) {
  echo "$attribute ($count)<br />";
} 
```

# cloud - netbeans 7.2 团队服务器云私有项目

> ID：12390263
> 
> 赞同：3
> 
> 时间：2012-09-12T14:17:57.113
> 
> 标签：cloud, private, netbeans-7

一个简单的问题

netbeans 云和团队服务器是否将项目源保密？

我正在寻找一种在 netbeans 中制作项目的方法，只有我可以从可以连接互联网的任何地方访问和编辑，而 no1 可以下载我的源代码？

# java - SOAP Web 服务 - Java 服务器 - iOS 客户端 - SudzC 发送或接收大文件

> ID：12390265
> 
> 赞同：2
> 
> 时间：2012-09-12T14:18:09.450
> 
> 标签：java, ios, soap, sudzc

*我的系统：*

**服务器**：由 JAX WS 2.2.3 (-wsgen) 生成的 Java Soap Web 服务

**客户端**：iOS - SudzC 生成的 Soap Web 服务

* * *

我在 iOS 上使用 SudzC 与 Java Web 服务进行通信。我想将 NSData 文件从 iOS 客户端上传到 Java 服务器或将 byte[] 文件从 Java 服务器下载到客户端。对于少量数据，Web 服务运行良好，但是当数据大于 4MB 时，就会出现问题。如果我发送的文件大于 4MB，则会发生 HTTP 内部错误 500，或者一切都卡住了，我的应用程序崩溃了。

有什么建议么？也许，我应该尝试除 SudzC 之外的其他东西吗？

我知道，要发送和接收大文件，SOAP 有一个称为 MTOM 的机会。这会从 SOAP 消息中提取 base64Binary 数据，并将其打包为 MIME 消息中的单独二进制 http 附件，其方式与电子邮件附件类似。所以我的问题是，如何在 iOS 客户端 SudzC 生成的 Objective-C 程序代码上实现这个选项？在 java 服务器端，MTOM 选项被激活，但在 iOS 客户端我必须实现这个选项？！

也许有人可以帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:12:53.483

我使用 WSClient++ 来生成类并且从来没有遇到过问题。

[http://wsclient.neurospeech.com/](http://wsclient.neurospeech.com/)

我不喜欢 SudzC，当 XML 返回有列表列表时我有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:35:46.303

我使用 SudzC 上传更大的文件（20 + 兆字节），所以问题可能不是来自 SudzC。我记得一开始文件上传也有问题：服务器不接受超过 X 字节的任何内容并且返回错误。

但是，我所看到的是，sudzC 在上传大文件时存在很多内存问题，所以我切换到 wsdl2objc 进行文件上传

# php - Zend 框架的自定义标准化 JSON 响应

> ID：12390271
> 
> 赞同：1
> 
> 时间：2012-09-12T14:18:18.537
> 
> 标签：php, json, zend-framework

我想要[标准化所有 JSON 响应（例如来自视图](https://stackoverflow.com/questions/6607443/standardised-json-response-from-views)的标准化 JSON 响应）。这是 JSON 响应示例

```
{
    "status" : "failure",
    "errors" : {
        "name" : [ "Error text 1", "Error text 2" ],
        "email" : [ "Email error text" ]
    }
} 
```

这是实现我的标准化 JSON 响应的类

```
class JsonResponse
{

    protected $_errors = array();

    public function addError($key, $value) {
        $this->_errors[$key][] = $value;
        return $this;
    }

    public function setFormErrors(Zend_Form_Abstract $form) {
        $this->_errors = $form->getErrors();
        return $this;
    }

    public function __toArray() {
        if (!empty($this->errors)) {
            return array(
                'status' => 'fail',
                'errors' => $errors,
            );
        }
        return array(
            'status' => 'success',            
        );
    }

    public function __toString() {
        return json_encode($this->__toArray());
    }

} 
```

一切都很好，但是使用这个类真的很痛苦。

```
class App_Controller extends Zend_Action_Controller
{

    public function submitAction()
    {
        $form = new App_Form();
        $form->isValid($this->getRequest()->getPost());

        //disabling displaying layout
        $this->_helper->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender(true);

        $response = new JsonResponse();
        $response->setFormErrors($form);

        echo $response;     
    }

} 
```

我是 Zend 框架中的真正菜鸟。**将JsonResponse**包装到的最佳方法是什么？

*   帮手
*   延长`Zend_Controller_Response_Abstract`
*   新的上下文切换
*   实施于`Form`

最好的方法是什么？

[使用 Zend Action Helper ContextSwitch 创建自定义 JSON 响应对象](https://stackoverflow.com/questions/5231584/creating-a-custom-json-response-object-with-zend-action-helper-contextswitch)- 这样做的好方法，但仍然需要太多代码，恕我直言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:16:49.213

IMO，您应该使用上下文切换（`JSON`或您自己的）并使用您喜欢的方式来格式化您的响应数据结构。

好像您正在实施 ajax 表单验证，不是吗？也许你应该看看这个：[Zend form ajax validation on submit](https://stackoverflow.com/questions/5620371/zend-form-ajax-validation-on-submit) (and ask google about `processAjax()`)

# c# - C#中分隔字符的正则表达式和方法

> ID：12390275
> 
> 赞同：1
> 
> 时间：2012-09-12T14:18:22.633
> 
> 标签：c#, regex

在“家庭/汽车”中转换“家庭/汽车”的正则表达式是什么？

```
public string formatedName(string noFormatedName)
{
    string fomatedName = ?¿??; //I want "Family / Car"
    return formatedName;
} 
```

当 noFormatedName = "Family/Car" --> formatedName 将返回 "Family / Car" 但是如果 noFormatedName = "Family / Car" --> formatedName 不会改变字符串，它会返回 "Family / Car"

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:20:17.377

```
fomatedName = Regex.Replace(familyName, "[ ]*/[ ]*", " / "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:22:51.637

您可以使用替换：

> String formatedName = familyName.Replace("/", "/");

# jquery - 如何使用选择的 jquery 在 MVC 3 中发布多个选择值

> ID：12390278
> 
> 赞同：0
> 
> 时间：2012-09-12T14:18:27.157
> 
> 标签：jquery, asp.net-mvc, jquery-chosen

如何使用选择的jquery 插件在 MVC 3 中发布[选定的值。](http://harvesthq.github.com/chosen/)我不知道如何发布我选择的值。到目前为止，这就是我的代码的样子.. ![我的测试页面](../Images/242b80e59e127c47c8a75d478ada63d0.png)

这是我的发布表单，其中包含选择列表和发布到我的控制器的提交按钮。

```
@using (Html.BeginForm("Search", "Home", FormMethod.Post))
{        
    <select data-placeholder="Choose a Category..." class="chzn-select" multiple style="width: 650px;" tabindex="4">
        <option value=""></option>
        @foreach (var item in Model.Categories)
        {
            <option value="@item.Id">@item.Name</option> 
        }
    </select><br/>
    <button type="submit" value="Search" name="button">Search</button>
} 
```

这是我正在使用的模型。

```
 public class CategoryModel
{
    public List<Category> Categories { get; set; }

    public CategoryModel()
    {
        Categories = new List<Category>();

        Category cat = new Category();
        cat.Id = 1;
        cat.Name = "Ekonomi";
        Categories.Add(cat);

        cat = new Category();
        cat.Id = 2;
        cat.Name = "IT";
        Categories.Add(cat);

        cat = new Category();
        cat.Id = 3;
        cat.Name = "Teknik";
        Categories.Add(cat);
    }
}

public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

那么如何从文本框中检索值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:25:44.727

我相信注释将作为参数添加到函数中，因此，在控制器中：

```
Function Index(Optional sortOrder As String = "", Optional searchString As String = "", Optional page As Integer = 1) As ViewResult 
```

在视图中：

```
@Using Html.BeginForm()

    @<p>
        Find by name: @Html.TextBox("SearchString", ViewBag.CurrentFilter)  
        <input type="submit" value="Search" />
    </p>

End Using 
```

您还可以通过 URL 发送参数：

```
@Html.ActionLink("Name", "Index", New With {.sortOrder = ViewBag.NameSortParam}) 
```

注意：这是 VB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T08:00:05.557

1.  将您的选择标签命名为 ex：“naicsCodeSelect”
2.  在控制器中使用 int[] "Tagname" ie:int[] naicsCodeSelect 请参见以下示例：

在视图中：

```
 @Html.DropDownList("naicsCodeSelect", ViewBag.selectNAICS as    List<SelectListItem>, new { @multiple = "true", @class = "form-control col-md-7 col-xs-12 chosen-select" }) 
```

在控制器中：

```
[HttpPost]
    public ActionResult Edit(Industry model, int[] naicsCodeSelect)
    {
        if (!ModelState.IsValid)
       {} 
```

# php - 如何更改 VAR？

> ID：12390279
> 
> 赞同：-1
> 
> 时间：2012-09-12T14:18:32.330
> 
> 标签：php, var

我有一个 PHP 脚本的一部分，但它给出了 T_CLASS 错误。

但我不确定如何将 VAR 元素转换为符合 php5 的代码......有人可以帮助我吗？

```
<?php // Defining the "calc" class
if (!class_exists('calc'))
class calc {
var $number1;
}
?> 
```

ps这只是更大代码的一部分，但它一直说：“PHP语法检查：解析错误：语法错误，第3行代码中出现意外的T_CLASS”。所以错误应该在“class calc {”或“var $number1;”中。请帮助：P

我不得不放置整个代码。只是添加括号给了我一个新的错误。

```
<?php // Defining the "calc" class
if (class_exists('calc')) {
class calc {
var $number1;
}
}
function boek($number1)
{
$result =$number1 * 2;
echo "Om een tekst van $number1 pagina's te redigeren, rekenen wij: <strong>€ $result,-*</strong></br>";
echo "<small>*Deze prijs is slechts een indicatie. Om een vrijblijvende offerte aan te vragen kunt u gebruikmaken van het contactformulier onderaan de pagina. <br/><span style=\"text-decoration: underline;\">Let op: studenten krijgen op vertoon van hun studentenpas 25% korting.</span></small>";
}
}
//Creating object of class
$calc = new calc();
?>
<style type="text/css">
.calcbutton {
Cursor: pointer;
    display: block;
    text-indent: -5000px;
    width: 136px;
    height: 44px;
    border: none;
    background-image: url('http://www.mijncreaties.com/wp-content/themes/GoedVerwoord/images/buttons.png');
    background-repeat: no-repeat;
}
.calcbutton {background-position: top left;}
.calcbutton:hover {background-position: center left;}
.calcbutton:active {background-position: bottom left;}
</style>
<form name="calc" action="" method="POST">
<table>
    <tr>
        <td>Aantal pagina's: </td>
        <td><input type="text" style="padding-left: 3px;" class="calc-form wpcf7-text" name="value1" value="0" onfocus="if (this.value == '0') {this.value = '';}" onblur="if (this.value == '') {this.value = '0';}"><br>
        <input type="hidden" name="oper" value="boek">
        </td>
    </tr>
</table>
<input type="submit" value="Bereken prijs" name="submit" class="calcbutton">
</form>
<?

if($_POST['submit']){
$number1 = $_POST['value1'];
$oper = $_POST['oper'];
if(!$number1){
echo "<p><font color=\"red\">Vul a.u.b. een getal in.</font></p>";
}
if($oper == "boek"){
$calc->boek($number1);
}
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:20:18.790

尝试将其包裹在一组额外的大括号中：

```
<?php // Defining the "calc" class

if (!class_exists('calc')) {
    class calc {
        var $number1;
    }
}

?> 
```

编辑添加：

```
if (class_exists('calc')) {
class calc {
var $number1;

function boek($number1)
{
$result =$number1 * 2;
echo "Om een tekst van $number1 pagina's te redigeren, rekenen wij: <strong>€ $result,-*</strong></br>";
echo "<small>*Deze prijs is slechts een indicatie. Om een vrijblijvende offerte aan te vragen kunt u gebruikmaken van het contactformulier onderaan de pagina. <br/><span style=\"text-decoration: underline;\">Let op: studenten krijgen op vertoon van hun studentenpas 25% korting.</span></small>";
}
}
} 
```

您的右括号在错误的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:20:52.390

用括号括起来`if`：

```
<?php    
// Defining the "calc" class
if (!class_exists('calc')){
    class calc {    
        var $number1;    
    }
}    
?> 
```

有条件地创建函数时，您将遇到同样的问题：

```
<?php    
if (!function_exists('new_function')){
    function new_function{    
       return 'awesome';   
    }
}    
?> 
```

# netty - 如何处理不同的桩线工厂？

> ID：12390280
> 
> 赞同：-1
> 
> 时间：2012-09-12T14:18:35.650
> 
> 标签：netty

我是netty的新手，有一个问题困扰着我，这是请求：我有tcp / ip frame要处理，数据就像53 46 10 FF 83 10 AF，而83是数据类型，可以是81/82/83，不同的数据类型会有不同的管道处理，所以81可能需要发送消息回显，而82不需要。我的想法是创建不同的管道工厂来创建相关的管道来处理不同类型的消息。

我的问题是：当 ServerBootstrap 创建它需要设置管道工厂，所以我可以只有一个管道工厂，以前有人满足过这个要求吗？非常感谢您的审查和回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:40:44.550

管道工厂为每个连接创建一个管道。管道是处理程序的列表。您无法更改管道工厂，但您可以在创建的管道中动态删除/添加处理程序。

您可以创建一个具有处理程序来检测数据类型 (81/82/83) 的管道。在检测到数据类型后，您可以决定添加合适的处理程序进行下一步处理。

# doctrine - 教义：如何在不重建数据库的情况下进行“数据加载”并删除索引表

> ID：12390282
> 
> 赞同：0
> 
> 时间：2012-09-12T14:18:37.660
> 
> 标签：doctrine, symfony-1.4, doctrine-1.2

我的问题是关于`data-load`命令的。

当我发出更多`data-load`命令而不重建表时，表中的 ID 索引被保留，因为表的第一行不以 ID 1 开头。`data-load`命令可以插入来自灯具的数据和第一行的 id表为 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:40:58.963

不，你不能。事实上，`data-load`从数据库中删除所有条目，然后再次加载它们。所以自动增量列不会被重置（因为它执行 a`DELETE`而不是 a `TRUNCATE`）。

你可以做的是在启动之前，在你的桌子上`data-load`做一个。[`TRUNCATE`](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/truncate-table.html)因此，*任何`AUTO_INCREMENT`值都会重置为其起始值*。

否则，您可以使用以下`--and-load`选项`doctrine:build`：

```
./symfony doctrine:build --all --and-load 
```

它将重新生成*所有类和 SQL 文件并重建数据库，*然后*从项目和插件`data/fixtures/`目录*加载数据。

这样，每件事都会是新鲜的，并且 id 会被重置。

# c# - 我可以简化我的课程以使它们更干燥吗？

> ID：12390284
> 
> 赞同：0
> 
> 时间：2012-09-12T14:18:49.250
> 
> 标签：c#

我有如下 ViewModel 类：

```
public class ReferenceDetailsViewModel
{
    public ReferenceDetailsViewModel() {
        this.Timer = new List<long>();
    }
    public IEnumerable<Reference.Grid> Grid { get; set; }
    public List<long> Timer { get; set; }
}

public class ContentDetailsViewModel
{
    public ContentDetailsViewModel() {
        this.Timer = new List<long>();
    }
    public IEnumerable<Content.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public SelectList Types { get; set; }
    public List<long> Timer { get; set; }
} 
```

它们都有一个共同的 Timer 字段，并且在构造函数中初始化。

有没有一种方法可以创建一个 baseViewModel 并让它们继承 Timer 字段，以避免为每个具有计时器的 ViewModel 编码相同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:22:39.957

是的，编写一个抽象类并让具体类继承自它。

```
public abstract class BaseDetailsViewModel
{
    protected BaseDetailsViewModel() {
        Timer = new List<long>();
    }
    public List<long> Timer { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:27:16.693

如果我理解正确，您可以执行以下操作：

```
public abstract class DetailViewModelBase
{
    protected DetailViewModelBase()
    {
        Timer = new List<long>();
    }

    public List<long> Timer { get; set; }
}

public class ReferenceDetailsViewModel : DetailViewModelBase
{
    public IEnumerable<Reference.Grid> Grid { get; set; }
}

public class ContentDetailViewModel : DetailViewModelBase
{
    public IEnumerable<Content.Grid> Detail { get; set; }
    public SelectList Statuses { get; set; }
    public SelectList Types { get; set; }

} 
```

使用“DetailViewModelBase”作为包含“计时器”的 ViewModel 的基类。

问候， C#er

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:27:25.773

如果您可以`IGrid`从两者中提取一个通用接口`Reference.Grid`und `Content.Grid`，您可能会得到

```
public abstract class GridViewModel<TGrid> where T : IGrid {
    protected GridViewModel() {
        Timer = new List<long>();
    }

    public List<long> Timer { get; set; }
    public IEnumerable<TGrid> Details { get; set; }
}

public class ReferenceDetailsViewModel : GridViewModel<Reference.Grid> { 

}

public class ContentDetailsViewModel : GridViewModel<Content.Grid> {
    public SelectList Statuses { get; set; }
    public SelectList Types { get; set; }
    public List<long> Timer { get; set; }
} 
```

我假设您可以忍受重命名`ReferenceDetailsViewModel.Grid`为`ReferenceDetailsViewModel.Details`.

# java - 使用 Eclipse 在 JBoss 上部署时 WEB-INF/lib 文件夹消失

> ID：12390285
> 
> 赞同：2
> 
> 时间：2012-09-12T14:18:49.447
> 
> 标签：java, eclipse, jakarta-ee, maven, seam

我正在尝试在 JBoss 7.1.1 上部署一个简单的 Seam 3 应用程序。该项目使用 Maven，但也是一个动态 Web 项目，因此它可以直接在我配置的 JBoss 服务器上运行。我正在为 Java EE 使用 Eclipse Juno。

项目结构为：

*   源/主/java
*   源/主/资源
*   src/main/webapp
*   源/测试/java
*   源/测试/资源
*   目标
*   pom.xml

问题是，在我执行 mvn:clean 之后，mvn:package -> src/main/webapp/WEB-INF 的所有内容都被复制到“target/project/WEB-INF”文件夹中。此外，WEB-INF 下正常有一个“lib”文件夹。相同的内容出现在 project.war 档案中。

但是，如果服务器正在运行，则在执行“在服务器上运行”或“完全发布”之后，整个 WEB-INF/lib 文件夹将从战争中消失！我检查了 JBoss 部署文件夹中的爆炸战争，一切都在那里，除了这个文件夹..

如果我尝试手动复制它，它可以工作，但我希望能够进行调试，这就是我想使用 Eclipse 方法的原因。

关于发生了什么的任何想法？

在我正在使用的 pom.xml 下方找到：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>test.project</groupId>
<artifactId>test</artifactId>
<packaging>war</packaging>
<version>alpha</version>
<name>test</name>

<properties>
    <seam.version>3.1.0.Final</seam.version>        
    <drools.version>5.4.0.Final</drools.version>
    <jpamodelgen.version>1.1.1.Final</jpamodelgen.version>
    <primefaces.version>3.3</primefaces.version>
    <arquillian.version>1.0.1.Final</arquillian.version>
    <junit.version>4.8.1</junit.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>seam-bom</artifactId>
            <version>${seam.version}</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>${arquillian.version}</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
    </dependencies>
</dependencyManagement>

<dependencies>

    <!--  Commons  -->
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.3</version>
    </dependency>

    <!--  Java EE 6.0  -->
    <dependency>
        <groupId>org.apache.openejb</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0-4</version>
    </dependency>

    <!--  Seam International  -->
    <dependency>
       <groupId>org.jboss.seam.international</groupId>
       <artifactId>seam-international</artifactId>   
       <!--  <scope>runtime</scope>-->
    </dependency>

    <!--  Seam Mail  -->
    <dependency>
        <groupId>org.jboss.seam.mail</groupId>
        <artifactId>seam-mail</artifactId>
        <scope>compile</scope>
    </dependency>

    <!-- Seam Security -->
    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-core</artifactId>
        <version>${drools.version}</version><!--$NO-MVN-MAN-VER$-->
    </dependency>

    <dependency>
        <groupId>org.drools</groupId>
        <artifactId>drools-compiler</artifactId>
        <version>${drools.version}</version><!--$NO-MVN-MAN-VER$-->
    </dependency>       

    <dependency>
        <groupId>org.jboss.seam.security</groupId>
        <artifactId>seam-security</artifactId>
        <scope>compile</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.seam.persistence</groupId>
        <artifactId>seam-persistence</artifactId>
    </dependency>

    <dependency>
        <groupId>org.jboss.seam.transaction</groupId>
        <artifactId>seam-transaction</artifactId>
    </dependency>   

    <!-- Seam Faces required for messages support -->
    <dependency>
        <groupId>org.jboss.seam.faces</groupId>
        <artifactId>seam-faces</artifactId>
    </dependency>

    <dependency>
        <groupId>org.jboss.seam.faces</groupId>
        <artifactId>seam-faces-api</artifactId>
    </dependency>

    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
    </dependency>

    <dependency>
        <groupId>org.jboss.solder</groupId>
        <artifactId>solder-impl</artifactId>
    </dependency>

    <!-- CDI (JSR-299) -->
    <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <scope>provided</scope>
    </dependency>

    <!-- Bean Validation (JSR-303) -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <scope>provided</scope>
    </dependency>

    <!-- Bean Validation Implementation -->
    <!-- Provides portable constraints such as @NotEmpty, @Email and @Url -->
    <!-- Hibernate Validator is the only JSR-303 implementation at the moment, 
        so we can assume it's provided -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.0.0.GA</version>
        <scope>provided</scope>
    </dependency>

    <!-- JSF -->
    <dependency>
        <groupId>org.jboss.spec.javax.faces</groupId>
        <artifactId>jboss-jsf-api_2.0_spec</artifactId>
        <scope>provided</scope>
    </dependency>       

    <!--  Pretty faces  -->
    <!--<dependency>
        <groupId>com.ocpsoft</groupId>
        <artifactId>ocpsoft-pretty-time</artifactId>            
    </dependency>

    <dependency>
        <groupId>com.ocpsoft</groupId>
        <artifactId>prettyfaces-jsf2</artifactId>           
    </dependency>

    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>2.1</version>
    </dependency>-->

    <!--  Prime faces  -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3</version>
    </dependency>

    <!-- Dependencies used in testing -->   

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>

</dependencies>

<build>
    <defaultGoal>package</defaultGoal>
    <finalName>vms</finalName>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                    <classpathContainers>
                        <classpathContainer>org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5</classpathContainer>
                    </classpathContainers>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ejb-plugin</artifactId>
                <configuration>
                    <ejbVersion>3.0</ejbVersion>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>                
            <configuration>
                <!-- activate only when you need to generate the metamodel -->
                <!-- <compilerArgument>-proc:none</compilerArgument> -->
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <additionalBuildcommands>
                    <!-- annoyingly creates a bin directory <buildCommand> <name>org.eclipse.wst.jsdt.core.javascriptValidator</name> 
                        </buildCommand> -->
                    <buildCommand>
                        <name>org.jboss.tools.common.verification.verifybuilder</name>
                    </buildCommand>
                </additionalBuildcommands>
                <additionalConfig>
                    <file>
                        <name>.settings/org.maven.ide.eclipse.prefs</name>
                        <content>eclipse.preferences.version=1
                            fullBuildGoals=process-test-resources
                            includeModules=false
                            resolveWorkspaceProjects=true
                            resourceFilterGoals=process-resources
                            resources\:testResources
                            skipCompilerPlugin=true
                            version=1</content>
                    </file>
                </additionalConfig>
                <additionalProjectFacets>
                    <jst.jsf>2.0</jst.jsf>
                </additionalProjectFacets>
                <additionalProjectnatures>
                    <projectnature>org.eclipse.wst.jsdt.core.jsNature</projectnature>
                    <projectnature>org.jboss.tools.jsf.jsfnature</projectnature>
                </additionalProjectnatures>                 
                <wtpdefaultserver>JBossAS</wtpdefaultserver>
                <wtpversion>2.0</wtpversion>
                <!-- <downloadSources>true</downloadSources> 
                     <downloadJavadocs>true</downloadJavadocs> -->
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin>

    </plugins>
</build>

<profiles>
    <profile>
        <id>distribution</id>
        <activation>
            <property>
                <name>release</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <id>jboss-public-repository</id>
        <activation>
            <property>
                <name>jboss-public-repository</name>
                <value>!false</value>
            </property>
        </activation>
        <repositories>
            <repository>
                <id>jboss-public-repository-group</id>
                <name>JBoss Public Maven Repository Group</name>
                <url>http://repository.jboss.org/nexus/content/groups/public</url>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                    <updatePolicy>never</updatePolicy>
                </snapshots>
            </repository>
            <repository>
                <id>prime-repo</id>
                <name>Prime Repo</name>
                <url>http://repository.primefaces.org</url>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>jboss-public-repository-group</id>
                <name>JBoss Public Maven Repository Group</name>
                <url>http://repository.jboss.org/nexus/content/groups/public</url>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                    <updatePolicy>never</updatePolicy>
                </snapshots>
            </pluginRepository>
        </pluginRepositories>
    </profile>

    <profile>
        <id>jbossas7</id>
        <activation>
            <activeByDefault>true</activeByDefault>
            <property>
                <name>arquillian</name>
                <value>jbossas-managed-7</value>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <configuration>
                        <webResources>
                            <resource>
                                <directory>src/main/resources</directory>
                            </resource>
                        </webResources>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

    <!-- Functional test profiles -->
    <profile>
        <id>ftest</id>
        <activation>
            <property>
                <name>arquillian</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <configuration>
                        <includes>
                            <include>**/ftest/*Test.java</include>
                        </includes>
                    </configuration>
                    <executions>
                        <execution>
                            <id>integration-test</id>
                            <phase>integration-test</phase>
                            <goals>
                                <goal>integration-test</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>verify</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

**编辑**：我也尝试了 JBoss 7 插件（[从这里](http://docs.jboss.org/jbossas/7/plugins/maven/latest/)），现在我可以做一个 mvn:jboss-as:deploy。但是，没有更好的结果..WEB-INF/lib 仍然是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-02T14:36:05.317

在 Eclipse 上，选择您的 Web 项目 -> 右键单击​​ -> 属性 -> 部署程序集 -> 添加 -> Java 构建路径条目 -> Maven 依赖项

通过这个步骤，当完全发布wildfly eclipse时，maven库将包含在WEB-INF/lib中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:00:26.030

你试过 mvn:deploy 吗？注意项目结构的配置是在maven上，而不是在JBoss server

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:11:36.743

不要做`Run as..run on server" or a "Full publish"`

`jpda`在standalone.conf (standalone.conf.bat) 中启用设置并使用远程调试到本地主机。默认端口为 8787。部署战争使用`mvn:jboss-as:deploy`或手动复制`deployments`dir 中的战争文件。

# debugging - FireBug 调试

> ID：12390288
> 
> 赞同：0
> 
> 时间：2012-09-12T14:18:53.430
> 
> 标签：debugging, firefox, firebug

您好，我正在使用 JS 脚本在 Firebug 中进行调试：

```
<body>
    <script type="text/javascript">
        var val = 8;

        function funMul(value) { //1.
            var val = 7;
            val = val*value;
            return val;
            }

        var result = funMul(val);
        document.write('<b>funMul: </b>' + result);
    </script>
</body> 
```

我在 (1.) 行定义了一个断点。但是“步入”似乎不起作用。它不会进入 funMul 函数。它的行为就像“Step Over”一样，只是省略并终止脚本。

那么如何让它真正跳入函数体呢？

附言。是否可以调试像 document.write 这样的 DOM 方法或像 onLoad 这样的事件的代码（“Step Into”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:07:32.657

要进入函数，您需要将调试器放在第 11 行 (var result = funMul(val);)，因为这是调用函数的地方。
或者您直接在函数本身中放置一个断点，第 6 行 (var val = 7;)

# linux - 制作一个可点击的 linux 桌面快捷方式来执行 ant 构建脚本

> ID：12390291
> 
> 赞同：0
> 
> 时间：2012-09-12T14:19:09.560
> 
> 标签：linux, ant, desktop-shortcut

在我的`ubuntu lucid linux`系统中，我在文件夹中有一些`java`代码。我在`~/dev/java/mycode/src`文件夹中有一个 ant 构建`~/dev/java/mycode`文件，它编译 java 文件并制作`jar`并最终执行 jar。我在终端中执行此操作如下

```
cd ~/dev/java/mycode
ant -f mybuildfile.xml 
```

我想创建一个桌面快捷方式，点击它会在终端中发生上述事件。所以我创建了一个`'mylaunchfile'`in`/home/me/dev/java`文件夹并给它`chmod +x`。内容如下

```
#!/bin/bash
ant -f /home/me/dev/java/mycode/mybuildfile.xml 
```

当我打开终端时，cd 到`/home/me/dev/java`并运行

```
>bash mylaunchfile 
```

它正确执行ant并运行java代码。

然后，我创建了一个`desktop launcher`with 命令作为

`bash /home/me/dev/java/mylaunchfile`

.双击此快捷方式不会打开终端或运行 bash 命令或执行任何操作。

我需要什么才能让这个可点击的快捷方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:38:48.810

您需要先更新数据库，然后才能启动命令

```
sudo updatedb 
```

应该做的伎俩。

# mysql - 省略聚合函数

> ID：12390294
> 
> 赞同：-2
> 
> 时间：2012-09-12T14:19:20.450
> 
> 标签：mysql

根据 w3schools group by 需要一个`aggregate_function(column_name)`.

```
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name 
```

如果你提交这个 aggregate_function 会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:25:22.967

如果您正在寻找最佳实践，请不要使用`GROUP BY`，除非您使用的是聚合函数。MySQL 的独特之处在于它允许您在不使用聚合的情况下指定其他列。这在其他 DBMS 中是找不到的。

> MySQL 扩展了 的使用，`GROUP BY`以允许选择 GROUP BY 子句中未提及的字段。

另一个影响`GROUP BY`是它的排序属性。

> 如果您使用`GROUP BY`，则输出行将根据列进行排序，就`GROUP BY`好像您`ORDER BY`对相同的列有一个一样。

如果您不包含任何聚合函数，它很可能会显示`DISTINCT`分组列的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-16T14:45:02.433

根据 MySQL 版本和 ONLY_FULL_GROUP_BY 模式，它要么拒绝查询，要么从每个组中选择任何值（它选择哪个未定义）。

这是对此的详尽描述：[MySQL处理GROUP BY](https://dev.mysql.com/doc/refman/5.7/en/group-by-handling.html)

# python - 在 Python 中检查两个集合是否相等的时间复杂度

> ID：12390298
> 
> 赞同：17
> 
> 时间：2012-09-12T14:19:23.897
> 
> 标签：python, time-complexity

阅读[这个问题](https://stackoverflow.com/questions/7828867/how-to-efficiently-compare-two-unordered-lists-not-sets-in-python)，我想知道 Python 需要多少时间（渐近地说）来评估表达式，例如

```
{1,2}=={2,1} 
```

也就是说，检查[集合类](http://docs.python.org/library/sets.html)的两个实例是否相等。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-12T14:27:20.263

集合之间的比较由第[1848 行](http://hg.python.org/cpython/file/2fa7c104f909/Objects/setobject.c#l1848)[中的](http://hg.python.org/cpython/file/2fa7c104f909/Objects/setobject.c#l1848)[函数`set_richcompare``setobject.c`](http://hg.python.org/cpython/file/2fa7c104f909/Objects/setobject.c#l1848)实现。你会看到相等的实现如下：

1.  如果集合的大小不同，则返回 false。

2.  如果两个集合都已被散列，并且散列不同，则返回 false。

3.  打电话[`set_issubset`](http://hg.python.org/cpython/file/2fa7c104f909/Objects/setobject.c#l1800)。

两组的子集测试如下所示：

```
while (set_next(so, &pos, &entry)) {
    int rv = set_contains_entry((PySetObject *)other, entry);
    if (rv == -1)
        return NULL;
    if (!rv)
        Py_RETURN_FALSE;
}
Py_RETURN_TRUE; 
```

您会看到它是通过迭代第一组的所有元素然后在另一组中查找每个元素来工作的。所以（除非有很多哈希冲突）这在第一组的大小上是线性的。

# r - 在表格对象中插入一列

> ID：12390299
> 
> 赞同：0
> 
> 时间：2012-09-12T14:19:25.753
> 
> 标签：r, tabular

我发现这个关于将嵌套表转换为 LaTeX 格式的[博客（博客链接）](http://www.r-statistics.com/2012/01/printing-nested-tables-in-r-bridging-between-the-reshape-and-tables-packages/)。我喜欢结果，但想在行名之后的开头插入一列到对象中。我习惯于处理数据帧，因此处理这种野兽比典型的列索引更困难。

这是我现在拥有的：

```
 pre         post       
 approach mean  sd    mean  sd   
 1        24.17 8.310 54.33 11.01
 2        25.50 9.434 65.25 16.32
 3        26.33 9.139 63.17 12.53 
```

这就是我希望它看起来的样子：

```
 pre         post       
 approach n  mean  sd    mean  sd   
 1        12 24.17 8.310 54.33 11.01
 2        12 25.50 9.434 65.25 16.32
 3        12 26.33 9.139 63.17 12.53 
```

这是 z 的输入，也是我想插入的 n 的列。

先感谢您。

```
z <- structure(list(24.1666666666667, 25.5, 26.3333333333333, 8.31027111835746, 
    9.4339811320566, 9.13866245766587, 54.3333333333333, 65.25, 
    63.1666666666667, 11.0068848977136, 16.3157759685081, 12.5323822978956), .Dim = 3:4, .Dimnames = list(
    NULL, c("term", "term", "term", "term")), rowLabels = structure(c("1", 
"2", "3"), .Dim = c(3L, 1L), .Dimnames = list(NULL, "approach"), justification = structure(c(NA_character_, 
NA_character_, NA_character_), .Dim = c(3L, 1L)), colnamejust = NA_character_, justify = NA, suppress = 0), colLabels = structure(c("pre", 
"mean", NA, "sd", "post", "mean", NA, "sd"), .Dim = c(2L, 4L), justification = structure(c(NA_character_, 
NA_character_, NA_character_, NA_character_, NA_character_, NA_character_, 
NA_character_, NA_character_), .Dim = c(2L, 4L)), colnamejust = character(0), justify = NA, suppress = 0), table = value * 
    v * approach ~ variable2 * result_variable, formats = structure(c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = 3:4, .Dimnames = list(
    NULL, c("format", "format", "format", "format"))), justification = structure(c(NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA), .Dim = 3:4, .Dimnames = list(
    NULL, c("justification", "justification", "justification", 
    "justification"))), class = "tabular")

structure(c(12L, 12L, 12L), .Names = c("1", "2", "3")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:14:09.010

唯一（已知？）的方法是重新分配重新排序：

```
R> mockup <- data.frame(B=21:23, C=31:33)
R> mockup
   B  C
1 21 31
2 22 32
3 23 33
R> 
```

现在添加A列：

```
R> mockup[,"A"] <- 1:3
R> mockup
   B  C A
1 21 31 1
2 22 32 2
3 23 33 3
R> 
```

并重新排序：

```
R> mockup <- mockup[,c("A", "B", "C")]
R> mockup
  A  B  C
1 1 21 31
2 2 22 32
3 3 23 33
R> 
```

*快速*。开头的新栏目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T15:18:25.950

像这样的东西：

```
z <- data.frame(approach = gl(3, 12), pre = rnorm(36)*50, post = rnorm(36)*60)
library(tables)
tabular(approach ~ (pre + post) * (mean + sd))

      pre          post         
approach mean   sd    mean    sd   
1        -5.431 61.01   3.766 54.76
2        20.408 29.14  -9.261 54.58
3        -7.854 53.55 -30.046 62.41
tabular(approach ~ (n=1) + (pre + post) * (mean + sd))

    pre          post         
approach n  mean   sd    mean    sd   
1        12 -5.431 61.01   3.766 54.76
2        12 20.408 29.14  -9.261 54.58
3        12 -7.854 53.55 -30.046 62.41
tabular(approach + 1 ~ (n=1) + (pre + post) * (mean + sd))

    pre          post         
approach n  mean   sd    mean    sd   
1        12 -5.431 61.01   3.766 54.76
2        12 20.408 29.14  -9.261 54.58
3        12 -7.854 53.55 -30.046 62.41
All      36  2.374 50.06 -11.847 57.46 
```

有关更多详细信息，请参阅包装的[小插图。](http://cran.r-project.org/web/packages/tables/vignettes/tables.pdf)`tables`

# ruby - 如何在 Ruby 中查找数组中的特定字符

> ID：12390301
> 
> 赞同：3
> 
> 时间：2012-09-12T14:19:33.390
> 
> 标签：ruby, arrays, search, include, character

我正在尝试在数组中查找特定字符，但用户正在输入该字符。

我首先对数组排序，然后要求用户输入特定字符，然后我应该查看该字符是否存在于数组具有的任何单词中

出于某种原因，如果在检查字符是否存在时，我“硬编码”一个字符，它可以工作，但如果我尝试查找用户输入的字符，它就不起作用......

```
list = [ 'Mom' , 'Dad' , 'Brother' , 'Sister' ]
puts ("Enter the character you would like to find");
character = gets
for i in 0..(list.length - 1)
if (list[i].include?(#{character}))
puts ("Character #{character} found in the word #{list[i]}");
end 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:21:48.333

这是因为在字符串的末尾`gets`添加了一个。`\n`使用`gets.chomp!`这样您就可以摆脱最后一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:33:29.610

您应该使用“chomp”来去掉输入行末尾的回车。此外，您还可以压缩您的代码。

```
list = [ 'Mom' , 'Dad' , 'Brother' , 'Sister' ]
puts ("Enter the character you would like to find");
character = gets.chomp
list.each do |e|
  puts "Character #{character} found in the word #{e}" if e.include?(character)
end 
```

# ssl - 使用 SSL 保护 JBoss 管理控制台不起作用

> ID：12390304
> 
> 赞同：0
> 
> 时间：2012-09-12T14:19:46.680
> 
> 标签：ssl, https, console, jboss7.x

我在域模式下运行 JBoss AS 7。当我将更改应用到 host.xml 时，我收到以下错误。

[主机控制器] 消息：JBAS014789：遇到意外的元素“{urn:jboss:domain:1.2}socket-binding”

我遵循了这个参考指南。

[https://community.jboss.org/wiki/SecuringAdministrationConsoleWithHttps](https://community.jboss.org/wiki/SecuringAdministrationConsoleWithHttps)

# 主机.xml

```
<management>
        <security-realms>
            <security-realm name="ManagementRealm">
                <authentication>
                    <properties path="mgmt-users.properties" relative-to="jboss.domain.config.dir"/>
                </authentication>
<server-identities>
<ssl>
<keystore path=".keystore" relative-to="jboss.home.dir" password="changeit"/>
</ssl>
</server-identities>
            </security-realm>
            <security-realm name="ApplicationRealm">
                <authentication>
                    <properties path="application-users.properties" relative-to="jboss.domain.config.dir" />
                </authentication>
            </security-realm>
        </security-realms>
        <management-interfaces>
            <native-interface security-realm="ManagementRealm">
                <socket interface="management" port="${jboss.management.native.port:9999}"/>
            </native-interface>
            <http-interface security-realm="ManagementRealm">
                <socket interface="management" port="${jboss.management.http.port:9990}"/>
                <socket-binding https="management-https"/>
            </http-interface>
        </management-interfaces>
    </management> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T00:26:00.250

对特定行和列的配置文件进行正确更改，如堆栈跟踪 ParseError 中所示`[row,col]:[x,y]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T02:34:02.407

我一直在处理同样的问题，由于多种原因，这很棘手。我已经列出了对**standalone.xml**的更改，这些更改让我继续前进。不用说，您需要构建一个密钥库以供参考。

此配置中最有问题的部分是*management.security-realms.security-realm*`<ssl>`中的元素使用的语法与配置 .security-realm 中的元素时不同。我在这里列出了这两个元素以显示对比。您实际上不需要为 Web 服务配置 SSL 来保护您的控制台。我添加了额外的细节来展示它们的不同之处。 *`<ssl>``<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host">`* 

 *```
 <management>
    <security-realms>
        <security-realm name="ManagementRealm">
            <server-identities>
                <ssl protocol="TLS">
                  <keystore path="/my/path/to/certs/my_cert.jks" keystore-password="mypass"/>
                </ssl>
            </server-identities>
            <authentication>
                <properties path="mgmt-users.properties" relative-to="jboss.server.config.dir"/>
            </authentication>
        </security-realm>
    </security-realms>
    <management-interfaces>
        <native-interface security-realm="ManagementRealm">
            <socket-binding native="management-native"/>
        </native-interface>
        <http-interface security-realm="ManagementRealm">
            <socket-binding http="management-console-https"/>
        </http-interface>
    </management-interfaces>
</management>
.
.
.
<profile>
.
.
.
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" enable-lookups="false" secure="true">
        <ssl password="mypass" certificate-key-file="/my/path/to/certs/my_cert.jks" protocol="TLSv1" verify-client="false" certificate-file="/my/path/to/certs/my_cert.jks"/>
    </connector>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem>
.
.
.
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="http" port="8080"/>
    <socket-binding name="https" port="8443"/>
.
.
.
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-console-https" interface="management" port="${jboss.management.console.https.port:9991}"/> 
```

此外，由于您不会使用它，请删除旧的套接字绑定：

```
<socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/> 
```

我希望这个对你有用。*

# jquery-ui-datepicker - jquery datepicker在使用没有年份部分的日期格式时返回错误的年份

> ID：12390305
> 
> 赞同：0
> 
> 时间：2012-09-12T14:19:51.120
> 
> 标签：jquery-ui-datepicker

我使用 jquery datepicker (v1.8.20)，日期格式设置为“D MM d”，如下所示：“Wed September 12”。当我从日历中选择与当前年份不同的年份时，getDate 方法会返回当前年份。此外，当我再次打开日历时，选定的日期和月份都被保留，但当前日期的年份被更改。通常，当日期格式不包含年份时，它看起来像是设置为当前年份。知道如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:34:02.420

Datepicker 仅在输入元素中存储值，因此如果格式字符串中没有年份，datepicker 只是不存储它。[此处](http://bugs.jqueryui.com/ticket/7759)jquery.ui 开发人员之一说，这不是错误，“Datepicker 仅用于选择完整日期”。

无论如何，我在我的项目中遇到了同样的问题，并通过丑陋的技巧解决了它，这迫使 datepicker 存储完整日期：

```
(function($) {
    $.datepicker._selectDateParent = $.datepicker._selectDate;
    $.datepicker._adjustInstDateParent = $.datepicker._adjustInstDate;
    $.datepicker._adjustInstDate = function(inst, offset, period) {

        var fullDate = inst.input.data('fullDate');
        if(fullDate && !period) {
            inst.drawYear = inst.currentYear = fullDate.getFullYear();
        }

        this._adjustInstDateParent(inst, offset, period);
    };
    $.datepicker._selectDate = function(id, dateStr) {
        var target = $(id);
        var inst = this._getInst(target[0]);
        var date = this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay));
        inst.input.data('fullDate', date);

        this._selectDateParent(id, dateStr);
    }
})(jQuery); 
```

我只用 datepicker 1.9.0+ 对其进行了测试，我不确定这是一个很好的解决方案，但它对我有用:)

# javascript - 使用 express.js、backbone.js、connect-assets 的有效设置

> ID：12390308
> 
> 赞同：4
> 
> 时间：2012-09-12T14:20:01.183
> 
> 标签：javascript, node.js, backbone.js, express

我是一个 node.js 新手，我正在尝试设置一个使用 Backbone.js 作为客户端应用程序但位于 express.js 和 node.js 之上的应用程序，因此我也具有服务器端可扩展性。 .

但是，在线上并没有很多关于将这些技术一起使用的干净设置/组织的示例。这个项目应该如何布局，这甚至是我认为的有效技术组合吗？

```
|____app.js
|____assets
| |____css
| |____js
| | |____models
| | |____test.coffee
| | |____views
|____lib
| |____setup.js
|____package.json
|____public
| |____images
| |____javascripts
| |____stylesheets
| | |____style.css
| | |____style.less
|____routes
| |____index.js
| |____user.js
|____views
| |____index.jade
| |____layout.jade 
```

此外，我希望能够用coffeescript（使用connect-assets）编写整个应用程序、Backbone 逻辑和所有内容......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:19:01.450

我还发现那里没有很多好的示例项目模板。

[express-coffee](https://github.com/twilson63/express-coffee)是我发现的一个很好的默认值，它有一些非常有用的默认值，包括您正在寻找的一些东西。

*   连接资产
*   Coffeescript 所有的东西。
*   `mocha`单元测试已经设置。
*   很棒的默认`cake`命令。

我已经在 github 上创建了一个[包含 Twitter Bootstrap 样式和 requireJS 和 Backbone](https://github.com/jgable/express-coffee/tree/bootstrap_2-1)设置的分支，但如果你还是 node.js 的新手，那可能有点吓人。

# javascript - Jquery通过数据链接选择

> ID：12390309
> 
> 赞同：2
> 
> 时间：2012-09-12T14:20:02.313
> 
> 标签：javascript, jquery, selector

我有 10 张带有数据链接属性的图像，想要获取当前页面路径并选择匹配的

```
 var pathname = window.location.pathname;
current = $(".slide img").data('link', pathname);
console.log(current); 
```

这是我到目前为止所拥有的，但它没有返回任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:21:42.680

```
var pathname = window.location.pathname;
current = $(".slide img[data-link='"+ pathname +"']"); // get the image with pathname
console.log(current); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:21:25.610

[`data()`](http://api.jquery.com/jQuery.data/)返回*存储*的数据值，它不选择任何元素。相反，您可以使用[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)：

```
current = $(".slide img[data-link='" + pathname + "']"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:23:06.847

您正在更改`data-link`属性的值而不是选择元素，您可以使用 use`filter`方法。

```
var $current = $(".slide img").filter(function() {
   return $(this).data('link') === pathname;
}); 
```

# objective-c - GLKit 视图控制器性能不佳

> ID：12390311
> 
> 赞同：2
> 
> 时间：2012-09-12T14:20:09.623
> 
> 标签：objective-c, ios, opengl-es, opengl-es-2.0, glkit

我曾经使用帧和渲染缓冲区的手写初始化以及渲染循环来绘制一些动画。现在我正试图将我的东西移动到 GLKit View Controller ，但与我以前的应用程序相比，在某些情况下我的性能非常糟糕。

我的动画分为四个场景，每个场景都有自己的顶点和片段着色器、顶点和纹理数据、gl 程序等。还有一个类定义现在应该渲染哪个场景，所以它创建和销毁实例必要时。我只调用 `[sceneManager draw]`我的渲染循环。

因此，转移到 GLKit 视图控制器，我将其子类化并添加了如下调用：

```
-(void) glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    if (!_myManagerInstance.animationFinished) {
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glClearColor(0.0, 0.0, 0.0, 1.0);

        [_myManagerInstance draw];
    } else {
        self.paused=true;
    }
} 
```

它工作正常，但动画明显滞后（在最坏的情况下约为 15 FPS）。分析应用程序的 OpenGLES 性能显示大量冗余调用，这些调用不是来自我的代码，[请参见图像](http://postimage.org/image/6txr8bwvt/)。我还发现了一个有同样问题的人的[这篇文章](http://blog.world-of-towers.com/first-opengl-profiling/)。那么，我是否以正确的方式使用 GLKit VC？还是我只是缺少一些配置？

# c++ - mingw32 w64 缺少 OpenGL32 库

> ID：12390317
> 
> 赞同：2
> 
> 时间：2012-09-12T14:20:21.287
> 
> 标签：c++, opengl, static-libraries

我在 Win64 (x86_64-w64-mingw32) 上使用 Mingw32 w64。我在 GCC 4.7.1 ruben 版本中没有找到 libopengl32.a。

我怎样才能获得库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:22:52.027

解决您的问题的方法：

1.  访问[http://www.equation.com](http://www.equation.com)。还有另一个 64 位 MinGW 版本，它包含我成功使用的 libopengl32.a。

2.  使用一些 GL 加载库，例如[GLee](http://www.opengl.org/sdk/libs/GLee/)或[GLEW](http://glew.sourceforge.net)。他们只是直接加载 opengl32.dll dll 并避免使用导出 lib 文件。

# ruby-on-rails - 用于多个数据库的测试和 database_cleaner

> ID：12390321
> 
> 赞同：15
> 
> 时间：2012-09-12T14:20:42.237
> 
> 标签：ruby-on-rails, ruby

我们有一个邮箱模型，它使用另一个邮件应用程序也连接到的辅助数据库。这称为使用

```
establish_connection :mail_database 
```

现在，我想我可以尝试将它包装在一个`if`语句中，以便它为测试环境使用不同的连接，但我想知道如何保持这个数据库清洁，最好使用我们已经用于“常规”数据库的 database_cleaner .

我希望有人能把我推向正确的方向。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T14:20:43.387

我有一个使用 rspec (2.12.0) 和使用 database_cleaner (0.9.1 f4b44bb) 测试的 rails3.2.10 应用程序，它有两个用于 mysql 的数据库连接。

这些在*database.yml*中设置，例如：

```
test:
  ...
  database: my_app_test

test_my_second_connection:
  ...
  database: my_second_connection_test 
```

第二个数据库通过建立连接在模型类中连接。

根据[database_cleaner 的手册，我能够在我的](https://github.com/bmabey/database_cleaner)*spec/spec_helper.rb*文件中使用以下设置：

```
require 'database_cleaner'

RSpec.configure do |config|

  config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].strategy = :transaction
  end

  config.before(:each) do
    DatabaseCleaner.start
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].start
  end

  config.after(:each) do
    DatabaseCleaner.clean
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].clean
  end

end 
```

此外，我必须将测试套件的某些部分用于非事务性固定装置。所以我必须在我的规范和这样的设置中添加元信息*:db_truncate => true*以更改测试运行中的策略：

```
config.before(:suite) do
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].strategy = :transaction
end

config.before(:each) do
  if example.metadata[:db_truncation]
    DatabaseCleaner.strategy = :truncation
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].strategy = :truncation
  else
    DatabaseCleaner.start
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].start
  end
end

config.after(:each) do
  DatabaseCleaner.clean
  DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].clean
  if example.metadata[:db_truncation]
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner[:active_record,{:connection => :test_my_second_connection}].strategy = :transaction
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T06:07:55.123

```
****set database to clean by database cleaner in rails:-****
config.before(:suite) do
   DatabaseCleaner[:active_record, :connection => :test].clean_with(:truncation)
end

config.before(:each) do
  DatabaseCleaner[:active_record, :connection => :test].strategy = :transaction
end

config.before(:each) do
  DatabaseCleaner[:active_record, :connection => :test].start
end

config.after(:each) do
  DatabaseCleaner[:active_record, :connection => :test].clean
end 
```

# c++ - 使用 openCV 2.4 无法点击图像的最后几行

> ID：12390323
> 
> 赞同：2
> 
> 时间：2012-09-12T14:20:45.567
> 
> 标签：c++, visual-studio-2010, opencv, mouseevent, mouseclick-event

我正在使用 openCV 2.4 在 Visual Studio 2010 (C++) 中进行照片测量项目。我需要做的是能够单击照片上的任何地方并保存鼠标事件的 x 和 y 坐标。看起来很简单。但是，假设我的照片是 1920 x 1080。如果我尝试单击图像的右下角（甚至通过放大镜单击放大），我只能单击边缘点 (1916,1078)。如果我展开图像，它似乎可以点击得更远，这让我觉得有些不对劲。这是我的代码的主要部分。

创建窗口并设置回调函数的部分

```
// create a window
cvNamedWindow( "mainWin", CV_WINDOW_NORMAL ); 

// set mouse callback
cvSetMouseCallback("mainWin", onMouse);

// show the image
cvShowImage("mainWin", img );

// wait for a key
cvWaitKey(0);

// release the image
cvReleaseImage(&img ); 
```

onMouse 事件

```
void onMouse(int event, int x, int y, int flags, void *param){

switch(event){

    case CV_EVENT_LBUTTONDOWN: //single click
        char Char_Array[20];
        sprintf(Char_Array,"Click: %d, %d", x,y);  
        MessageBoxA(NULL, Char_Array, "ERROR", MB_TASKMODAL | MB_OK);

} 
```

似乎它应该非常简单。关于为什么我无法访问第 1920 列或第 1080 行的任何想法？

# android - Android 应用程序中的 FileNotFoundException：找不到复制文件的路径

> ID：12390328
> 
> 赞同：0
> 
> 时间：2012-09-12T14:20:53.820
> 
> 标签：android, csv, filenotfoundexception

大家下午好，

我在使用 CSV 文件时遇到问题，我想用它来填充 Android 中的动态表。

我将文件放在模拟器的“数据”文件夹中，并执行以下声明来创建文件变量：

```
file = new File("/data/Motors.csv"); 
```

我使用了在此页面的另一个线程上发布的 CSVReader 类（[链接到类](http://code.google.com/p/secrets-for-android/source/browse/trunk/src/au/com/bytecode/opencsv/CSVReader.java)），并且还声明了以下行来进行解析：

```
readerCSV = new CSVReader(new FileReader(file),';','"',0); 
```

在最后一行中，能够创建变量的程序员必须将 Reader（或 FileReader，它没有区别）、分隔符字符、引号字符和行数作为参数发送CSV 阅读器必须跳过。

问题来了，无论在哪个目录中（甚至在根目录中，Java 通过`file.getAbsolutePath();`方法告诉我它是“/”）它总是会在程序抛出**FileNotFoundException**时到达点，我有点沮丧因为我已经有 2 天的时间来解决这个问题了。

如果有人可以帮助我了解我应该做些什么来从正确的目录中获取文件......这将是一个很大的帮助，我可以进一步完成我必须完成的代码。

提前谢谢了！！！！

**编辑** 我找到了打开文件的解决方案：

*   我使用了 2 个文件变量：一个获取外部存储目录的 rout（请参阅[以下链接](https://stackoverflow.com/questions/7305801/android-filenotfoundexception)中的第一个答案），另一个被声明为新文件，如代码中的以下行： `route = Environment.getExternalStorageDirectory(); file = new File(route,"Motors.csv");`

*   后来我再次使用了我找到的 CSV 阅读器类，其中第一个参数来自`FileReader`类型（对不起@Rajesh，但我无法使用你的替代方案，因为你将`FileDescription`参数从CSV 阅读器类传递`AssetManager`给了 CSV 阅读器类，然后我不得不改变整个班级，这对我的问题根本没有帮助）。

现在我根本没有得到例外！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:38:34.630

Android中有多种[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)。文件可以存储在内部和外部存储器中。如果 CSV 文件是静态资源，您可以考虑将文件捆绑在项目的“assets”文件夹中。

如果您使用的是“资产”路线，则以下代码段可以为您提供`CSVReader`.

```
AssetManager am = getAssets();
AssetFileDescriptor afd = am.openFd ("Motors.csv");
FileDescriptor fd = afd.getFileDescriptor();
readerCSV = new CSVReader(fd, ';','"',0); 
```

上面的代码片段不执行错误/异常处理，请记住要注意这一点。您需要将 Motors.csv 文件复制到项目中的“assets”文件夹中。

# excel - 需要替换 excel 2003 的 AVERAGEIFS 公式

> ID：12390332
> 
> 赞同：0
> 
> 时间：2012-09-12T14:21:12.213
> 
> 标签：excel, excel-formula, excel-2003

几天来，我一直在尝试掌握 excel 公式，现在有一个包含 140 个单元格的电子表格，每个单元格的公式略有不同。不幸的是，现在需要将其“简化”到**Excel 2003**。
我试图让我的头脑围绕数组公式，并且`SUMPRODUCT`，但我陷入了困境。

新鲜的眼睛，有人吗？

这是我需要从 2010 年转换为 2003 年的公式：

```
=AVERAGEIFS(Data!S:S,Data!L:L,"Atherstone",Data!T:T,"Service",Data!C:C,">="&K3,Data!C:C,"<="&K4) 
```

`K3`是日期范围的开始，`K4`是结束，`Data!`指`Sheet 2`的是保存所有数据的位置。

（我知道我所有的单元格范围都必须是明确的 - 即 C2:c65536）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:33:33.713

您需要将您的范围指定为固定区域，因为它不会理解`S:S`。

你的公式最终看起来像这样：

> =AVERAGE(IF(Data!L2:L2000="Atherstone",IF(Data!T2:T2000="Service",IF(Data!C2:C2000>=K3,IF(Data!C2:C2000<=K4,Data !S2:S2000)))))

*（未经测试）*

您还需要将其设为**数组**`CTRL`公式，因此 excel 可以通过使用+ `SHIFT`+输入公式来单独查看范围内的每个值，而不是在您完成输入所有内容后`Enter`更常见`Enter`

# python - 如何以 pythonic 方式填充 Pandas 数据框的缺失记录？

> ID：12390336
> 
> 赞同：12
> 
> 时间：2012-09-12T14:21:11.930
> 
> 标签：python, pandas

我有一个像这样的 Pandas 数据框'df'：

```
 X   Y  
IX1 IX2
A   A1  20  30
    A2  20  30
    A5  20  30
B   B2  20  30
    B4  20  30 
```

它丢失了一些行，我想像这样填补中间的空白：

```
 X   Y  
IX1 IX2
A   A1  20  30
    A2  20  30
    A3  NaN NaN
    A4  NaN NaN
    A5  20  30
B   B2  20  30
    B3  NaN NaN
    B4  20  30 
```

有没有一种pythonic方法可以做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T20:42:12.643

您需要构建完整的索引，然后使用数据框的`reindex`方法。像这样...

```
import pandas
import StringIO
datastring = StringIO.StringIO("""\
C1,C2,C3,C4
A,A1,20,30
A,A2,20,30
A,A5,20,30
B,B2,20,30
B,B4,20,30""")

dataframe = pandas.read_csv(datastring, index_col=['C1', 'C2'])
full_index = [('A', 'A1'), ('A', 'A2'), ('A', 'A3'), 
              ('A', 'A4'), ('A', 'A5'), ('B', 'B1'), 
              ('B', 'B2'), ('B', 'B3'), ('B', 'B4')]
new_df = dataframe.reindex(full_index)
new_df
      C3  C4
A A1  20  30
  A2  20  30
  A3 NaN NaN
  A4 NaN NaN
  A5  20  30
B B1 NaN NaN
  B2  20  30
  B3  20  30
  B4  20  30 
```

然后您可以使用该`fillna`方法将 NaN 设置为您想要的任何值。

### 更新（2014 年 6 月）

只是不得不自己重新审视这个......在当前版本的熊猫中，有一个函数可以`MultiIndex`从可迭代的笛卡尔积构建。所以上面的解决方案可能变成：

```
datastring = StringIO.StringIO("""\
C1,C2,C3,C4
A,1,20,30
A,2,20,30
A,5,20,30
B,2,20,30
B,4,20,30""")

dataframe = pandas.read_csv(datastring, index_col=['C1', 'C2'])
full_index = pandas.MultiIndex.from_product([('A', 'B'), range(6)], names=['C1', 'C2'])
new_df = dataframe.reindex(full_index)
new_df
      C3  C4
C1 C2
 A  1  20  30
    2  20  30
    3 NaN NaN
    4 NaN NaN
    5  20  30
 B  1 NaN NaN
    2  20  30
    3  20  30
    4  20  30
    5 NaN NaN 
```

在我看来，相当优雅。

# bash - bash：在命令行上评估替换和替换

> ID：12390343
> 
> 赞同：0
> 
> 时间：2012-09-12T14:21:46.003
> 
> 标签：bash, command-line-interface, readline

有人曾经向我展示了如何用替换的输出替换当前命令（输入行）。我怀疑这是一个 readline 函数，但不记得是哪个。这个想法基本上是，如果你输入类似的东西

```
$ cd `pwd` <READLINE-MACRO such as M-b or C-a> 
```

那么命令行将变为：

```
$ cd /home/username/files 
```

并且在您运行命令后，历史文件将具有`cd /home/username/files`而不是 'cd `pwd`'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:19:24.053

根据[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Miscellaneous-Commands)[的第 8.4.8 节“一些杂项 [Readline] 命令”](http://www.gnu.org/software/bash/manual/bashref.html#Miscellaneous-Commands)*：*

 *> `shell-expand-line (M-C-e)`
> 
> > 像 shell 一样展开该行。这将执行别名和历史扩展以及所有 shell 单词扩展（请参阅[Shell Expansions](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Expansions)）。

因此，只需输入您的命令：

```
cd `pwd` 
```

然后按 Alt+Ctrl+e 以实现命令替换：

```
cd /home/username/files 
```

然后按 Enter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:32:26.690

我猜你会发现这样的情况：首先你跑

> cd`密码`

然后当你运行时：

> `!cd`

它将搜索您的历史 cd 命令并将 `pwd` 替换为 /home/username/files

是吗？*

# javascript - 检查当前国家/地区是否有可用的曲目

> ID：12390346
> 
> 赞同：0
> 
> 时间：2012-09-12T14:21:58.030
> 
> 标签：javascript, spotify

我正在寻找一种方法来检查用户所在国家/地区是否提供曲目。

问题是，我的第 3 方应用程序将在全球范围内使用，因此用户可能会将曲目作为附件发送，而这些曲目在他们的国家/地区无法播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:29:59.317

您可以使用 Spotify Web-API 及其查找功能。

您可以在此处阅读完整文档：[https ://developer.spotify.com/technologies/web-api/lookup/](https://developer.spotify.com/technologies/web-api/lookup/)

如果您`trackdetail`在轨道上请求，您将收到类似这样的响应。

```
...
<availability>
    <territories>AD AE AF AG AL AM AN AO AR AS AT AU AW AZ BA</territories>
</availability>
... 
```

那里有所有可用的国家/地区代码，然后由您的应用程序循环遍历它们或其他。

# actionscript-3 - 这段代码中“as”关键字的意义是什么

> ID：12390347
> 
> 赞同：1
> 
> 时间：2012-09-12T14:22:00.550
> 
> 标签：actionscript-3, apache-flex

```
package
{
    import flash.display.Sprite;
    import flash.media.Sound;
    import flash.media.SoundChannel;

    public class EmbeddedSoundExample extends Sprite
    {
        [Embed(source="smallSound.mp3")]
        public var soundClass:Class;

        public function EmbeddedSoundExample()
        {
          //WHAT DOES "as" keyword DO IN THE FOLLOWING LINE ??
          //*************************************************

            var smallSound:Sound = new soundClass() as Sound;

            //COULD BE WRITTEN AS : 
            //==>>>> var smallSound:Sound = new soundClass() ???
            // OR
            ////==>>>> var smallSound:Sound = new Sound() ???
         //******************************************************

            smallSound.play();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:26:15.533

这是 ActionScript 3 中引入的强制转换运算符。与`as`（与`Type(object)`强制转换相反）的区别在于，如果强制转换失败，结果将是该类型的默认值。更多关于[这里](http://archive.darronschall.com/weblog/2006/02/actionscript-3-casting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:46:47.063

`as`铸造，使用您正在使用的类型之类的数据，不要更改数据。如果您使用 Type(object) 并且无法转换为此类型，则返回默认值（null、zero 或 undefined）

# vb.net - 保存 linq 变量以添加更多 where 子句

> ID：12390348
> 
> 赞同：1
> 
> 时间：2012-09-12T14:22:02.433
> 
> 标签：vb.net, linq, linq-to-sql

我尝试保存“linq-object”，然后添加 where 子句。这将构建但在第一行崩溃，并出现以下错误。我可以看到匿名部分有两种类型，我尝试将其仅转换为其中一种。但是我该如何正确地做到这一点？

> “无法将‘System.Data.Linq.DataQuery `1[VB$AnonymousType_0`2 [SubscriberContact,Subscriber]]’类型的对象转换为‘System.Linq.IQueryable`1[SubscriberContact]

```
Dim subscriberContacts As IQueryable(Of SubscriberContact) =
            (From sc In GetTable(Of SubscriberContact)(), s In GetTable(Of Subscriber)()
             Where sc.Subscriber.SubscriberId = s.SubscriberId)

If Not searchCriteria.CustomerNo = Nothing Then
    subscriberContacts = From sc In subscriberContacts
                         Where sc.Subscriber.CustomerNumber.Value = searchCriteria.CustomerNo()
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:37:02.897

如果您在未来的投影中需要这两种类型，您可以在第一个查询中使用类型推断，如下所示，只需确保不包括排序并将subscriberContacts 分配给有序结果，因为这会改变推断的类型。如果您需要订购，请使用新的变量名称。

```
Dim subscriberContacts =
            (From sc In GetTable(Of SubscriberContact)(), s In GetTable(Of Subscriber)()
             Where sc.Subscriber.SubscriberId = s.SubscriberId)

If Not searchCriteria.CustomerNo = Nothing Then
    subscriberContacts = From sc In subscriberContacts
                         Where sc.Subscriber.CustomerNumber.Value = searchCriteria.CustomerNo()
End If 
```

回顾您的原始查询，您真的需要在这里加入吗？sc.Subscriber 对象与对象图中的 s 相同。

# wcf - 2012 年，MSMQ 对 WCF 中的排队调用是否仍然有效？

> ID：12390352
> 
> 赞同：3
> 
> 时间：2012-09-12T14:22:21.587
> 
> 标签：wcf, concurrency, msmq

我创建了一个 WCF Web 服务，它将数据从 SQL Server 上传到我们的 ISeries。当最终用户完成数据输入（一个批次）后，他们会将批次号“发送”到 Web 服务。然后，Web 服务将该数据上传到 ISeries。不能假设这将是一个快速的过程，并且可能有许多最终用户同时访问 Web 服务。同样，由于数据库在 ISeries 上的设置方式，我无法同时上传这些数据，因为我们可能会遇到锁、触发失败的触发器等。所以，我想以某种方式对这些调用进行排队，以便它们按接收顺序完成.

我一直在寻找执行此操作的方法，并且在 2011 年和更早的讨论 MSMQ 中有很多信息。这仍然是首选的方法吗？可重入并发模式会是更“现代”的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:21:28.523

有很多替代排队系统。由于您有一个 SQL Server，我建议您使用 MSMQ。在这种组合中，您可以使用开箱即用的 TransactionScope 来处理跨数据库和队列系统的事务。

根据我自己的经验，MSMQ 是一个经过验证且稳定的技术堆栈。

# r - 从列值创建新行

> ID：12390354
> 
> 赞同：1
> 
> 时间：2012-09-12T14:22:25.257
> 
> 标签：r, loops, dataframe

我正在为一件事苦苦挣扎：我有一个 R 数据框，其中包含每个人的个人 ID、进入年份和退出年份。看起来像：

```
id  Entry  Exit  
1   1988  1990  
2   1986  1987 
```

我需要一个新的数据框，其中间隔（进入，退出）扩展到它包含的年份，即我需要这个：

```
id Year  
1  1988  
1  1989  
1  1990  
2  1986  
2  1987 
```

我无法创建正确的循环，非常感谢您的帮助。
干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:36:41.047

```
d <- structure(list(id = c(1, 2), Entry = c(1988, 1986), Exit = c(1990, 
                1987)), .Names = c("id", "Entry", "Exit"), row.names = c(NA, 
                                                                                                                      -2L), class = "data.frame")

years <- apply(d, 1, function(x) seq(x[2], x[3]))
ids <- rep(d[, "id"], lapply(years, length))

res <- cbind(ids, unlist(years))
res

# ids     
#[1,]   1 1988
#[2,]   1 1989
#[3,]   1 1990
#[4,]   2 1986
#[5,]   2 1987 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:31:34.833

这里有两个选项：

1.  在应用样式命令中构建一个 data.frame，然后将小的 dfs 堆叠成一个大的。
2.  或者使用 apply-style 命令来处理年份扩展并计算之后需要重复多少次 ID。这就是@LucianoSelzer 在他优雅的回应中所做的。

无论哪种方式都可以正常工作。这是前者的一个例子。

```
dat <- data.frame(id=seq(2),entry=c(88,86),exit=c(90,87))
res <- apply(dat,1,function(x) data.frame(id=x[1],year=seq(x[2],x[3])) )
> res
[[1]]
  id year
1  1   88
2  1   89
3  1   90

[[2]]
  id year
1  2   86
2  2   87 
```

`res`现在是 data.frames 的列表。然后我们可以组合data.frames：

```
library(taRifx)
> stack(res)
  id year
1  1   88
2  1   89
3  1   90
4  2   86
5  2   87 
```

或者在基础 R 中：

> do.call(rbind,res) id 年份 1 1 88 2 1 89 3 1 90 4 2 86 5 2 87

# vtk - vtk 可能的解析错误

> ID：12390355
> 
> 赞同：0
> 
> 时间：2012-09-12T14:22:28.823
> 
> 标签：vtk

我正在尝试可视化此处给出的 vtk 数据[https://www.dropbox.com/sh/51kjftvdko3g6s8/wEe88Id9QN](https://www.dropbox.com/sh/51kjftvdko3g6s8/wEe88Id9QN)。我做错了可能与分辨率有关的事情。我想知道是否有人运行此代码并将结果发送给我。如果这比我拥有的图像更清晰，我认为它更有可能与图形驱动程序有关。在这种情况下，这个问题的原因可能是什么？我的计算机生成的图像也可以在 Dropbox 链接中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:39:20.657

它对我来说看起来是正确的（正在显示一个点网格）。如果您从 vtkStructuredPoints 创建一个 vtkImageData，它将能够在点之间进行插值以显示体积。

# facebook - 如何在应用程序中没有消息警告的情况下重定向到非安全页面？

> ID：12390362
> 
> 赞同：0
> 
> 时间：2012-09-12T14:23:06.697
> 
> 标签：facebook

周一，从我的安全 SSL 网站重定向到非安全网站的所有应用程序都发出了安全警告。无论如何，在没有安全警告的情况下，是否可以从安全网站重定向到非安全网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:38:30.813

在 2011 年 10 月 1 日之后禁用沙盒模式时，需要安全画布 URL。因此，如果用户启用了安全浏览，则您无法将 https 重定向到 http，因为它由 facebook 管理，您需要 SSL 以避免此警告。

# android - 更新 url android 应用程序

> ID：12390364
> 
> 赞同：0
> 
> 时间：2012-09-12T14:23:09.057
> 
> 标签：android

我正在创建一个应用程序，并希望从编辑文本中获取信息以更改 url 中的 api 键

这是我到目前为止所拥有的

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://free.worldweatheronline.com/feed/weather.ashx?q=C96D62C33C38DA35E0405F0AC86017A0&format=xml&num_of_days=2&key=9e87fcbce7114648121009");

    try {
        // Add your data
        Button button1 = (Button) findViewById(R.id.send_button);
        EditText post = (EditText) findViewById(R.id.edit);

        button1.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v){

            }
        });

        HttpResponse response = httpclient.execute(httppost); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:28:01.683

Like this? The http will be excuted after the button is pressed with the text from the EditText as "api key". Hope I didn't misunderstand you...

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Add your data
    Button button1 = (Button) findViewById(R.id.send_button);
    final EditText post = (EditText) findViewById(R.id.edit);

     button1.setOnClickListener(new OnClickListener()
     {
        public void onClick(View v){
             try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://free.worldweatheronline.com/feed/weather.ashx?q=C96D62C33C38DA35E0405F0AC86017A0&format=xml&num_of_days=2&key=" + post.getText().toString());
                HttpResponse response = httpclient.execute(httppost);
             }
             ... catch etc ...
        }
     });
} 
```

}

# perl - 列中的模式匹配

> ID：12390369
> 
> 赞同：1
> 
> 时间：2012-09-12T14:23:25.340
> 
> 标签：perl, bash, unix, sed, awk

**文件 1**

```
A11;F1;BMW
A23;F2;BMW
B12;F3;BMW
H11;F4;JBW 
```

**文件 2**

```
P01;A1;0;0--00  ;123;456;150
P01;A11;0;0--00  ;123;444;208
P01;B12;0;0--00  ;123;111;36
P01;V11;0;0--00  ;123;787;33.9 
```

**输出**

```
-;-;-;P01;A1;0;0--00  ;123;456;150
A11;F1;BMW;P01;A11;0;0--00  ;123;444;208
B12;F3;BMW;P01;B12;0;0--00  ;123;111;36
-;-;-;P01;V11;0;0--00  ;123;787;33.9 
```

**我试过了**

```
awk 'FNR==NR {a[$2] = $0; next }{ if($1 in a) {p=$1;$1="";print a[p],$0}}' File1 File2 
```

但是没有用。

基本上我想从 FILE 1 中获取详细信息并与 FILE2 (master list) 进行比较。

**例子 ：**

FILE2 中的 A1 在 FILE1 中不可用，因此在输出文件中，第一个三个字段为“-”，其余为 FILE2 。现在，我们有了 A11，我们在 FILE1 中获得了详细信息。所以我们从文件 1 和 2 中写入 A11 的详细信息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:36:16.753

我个人会在 Perl 中执行此操作，但由于每个人和他们的母亲都在为您提供 Perl 解决方案，所以这里有一个替代方案：

假设每个文件中的记录具有一致的字段数，并且假设每个文件中的记录按字典顺序按“连接”字段排序，则可以使用`join`：

```
join -1 1 -2 2 -t ';' -e - -o '1.1 1.2 1.3 2.1 2.2 2.3 2.4 2.5 2.6 2.7' -a 2 File1 File2 
```

选项说明：

*   `-1 1`并`-2 2`表示“加入”字段（`A11`、`A23`等）是 中的第一个字段`File1`和 中的第二个字段`File2`。
*   `-t ';'`表示字段由`;`
*   `-e -`表示应将空字段替换为`-`
*   `-o '1.1 1.2 1.3 2.1 2.2 2.3 2.4 2.5 2.6 2.7'`表示您希望每个输出行包含 的前三个字段`File1`，然后是 的前七个字段`File2`。（这就是为什么这种方法要求每个文件中的记录具有一致数量的字段。）
*   `-a 2`意味着您希望`File2`在输出中包含来自的每一行，即使没有来自`File1`. （否则它只会输出在两个文件中都匹配的行。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:33:05.753

通常的 Perl 方式：使用**哈希**来记住主列表：

```
#!/usr/bin/perl
use warnings;
use strict;

my %hash;

open my $MASTER, '<', 'File1' or die $!;
while (<$MASTER>) {
    chomp;
    my @columns = split /;/;
    $hash{$columns[0]} = [@columns[1 .. $#columns]];
}
close $MASTER;

open my $DETAIL, '<', 'File2' or die $!;
while (<$DETAIL>) {
    my @columns = split /;/;
    if (exists $hash{$columns[1]}) {
        print join ';', $columns[1], @{ $hash{$columns[1]} }, q();
    } else {
        print '-;-;-;';
    }
    print;
}
close $DETAIL; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T14:35:43.410

使用 Perl：

```
use warnings;
use strict;
my %file1;
open (my $f1, "<", "file1") or die();
while (<$f1>) {
  chomp;
  my @v = (split(/;/))[0];
  $file1{$v[0]} = $_; 
}
close ($f1);
open (my $f2, "<", "file2") or die();
while (<$f2>) {
  chomp;
  my $v = (split(/;/))[1];
  if (defined $file1{$v}) {
    print "$file1{$v};$_\n";
  } else {
    print "-;-;-;$_\n";
  }
}
close ($f2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T21:20:14.030

perl 解决方案可能包括非常好的模块[Text::CSV](http://search.cpan.org/perldoc?Text%3a%3aCSV)。如果是这样，您可以将值提取到散列中，然后使用该散列进行查找。查找值时，您将为`-;-;-;`查找哈希中的任何未定义值插入空白值。

```
use strict;
use warnings;
use Text::CSV;

my $lookup = "file1.csv";   # whatever file is used to look up fields 0-2
my $master = "file2.csv";   # the file controlling the printing

my $csv = Text::CSV->new({
        sep_char    => ";", 
        eol         => $/,  # to add newline to $csv->print()
        quote_space => 0,   # to avoid adding quotes 
    });

my %lookup;

open my $fh, "<", $lookup or die $!;

while (my $row = $csv->getline($fh)) {
    $lookup{$row->[0]} = $row;    # add entire row to specific key
}
open $fh, "<", $master or die $!; # new $fh needs no close

while (my $row = $csv->getline($fh)) {
    my $extra = $lookup{$row->[1]} // [ qw(- - -) ]; # blank row if undef
    unshift @$row, @$extra;       # add the new values
    $csv->print(*STDOUT, $row);   # then print them
} 
```

**输出：**

```
-;-;-;P01;A1;0;0--00  ;123;456;150
A11;F1;BMW;P01;A11;0;0--00  ;123;444;208
B12;F3;BMW;P01;B12;0;0--00  ;123;111;36
-;-;-;P01;V11;0;0--00  ;123;787;33.9 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T15:23:45.013

这在单行程序中无法方便地完成，因为它涉及读取两个输入文件，但问题并不难

该程序从 中读取所有行`file1`，并使用第一个字段作为键将该行存储在哈希中

然后读取其中的所有行，`file2`并将第二个字段用作访问哈希的键。`//`defined-or 运算符用于打印任一元素的值（如果存在则打印），否则打印默认字符串（如果不存在）

`file2`最后打印当前行

```
use strict;
use warnings;

my %data;

open my $fh, '<', 'file1' or die $!;
while (<$fh>) {
  chomp;
  my $key = (split /;/)[0];
  $data{$key} = $_;
}

open $fh, '<', 'file2' or die $!;
while (<$fh>) {
  my $key = (split /;/)[1];
  print $data{$key} // '-;-;-;', $_;
} 
```

**输出**

```
-;-;-;P01;A1;0;0--00  ;123;456;150
A11;F1;BMWP01;A11;0;0--00  ;123;444;208
B12;F3;BMWP01;B12;0;0--00  ;123;111;36
-;-;-;P01;V11;0;0--00  ;123;787;33.9 
```

# mysql - MYSQL "解释查询" 显示 "key" NULL

> ID：12390373
> 
> 赞同：8
> 
> 时间：2012-09-12T14:23:40.027
> 
> 标签：mysql

我已经让 mysql 解释了以下查询：

```
SELECT carid,pic0,bio,url,site,applet 
FROM cronjob_reloaded 
WHERE 
carid LIKE '%bmw%' 
OR 
carid LIKE '%mer%' 
OR 
age BETWEEN '5' AND '10' 
OR 
category IN ('used') 
ORDER BY CASE 
    WHEN carid LIKE '%bmw%' OR carid LIKE '%mer%' THEN 1 
    WHEN age BETWEEN '5' AND '10' THEN 2 
    ELSE 3 
END 
```

这是解释结果：

```
EXPLAIN SELECT carid, pic0, bio, url, site, applet
FROM cronjob_reloaded
WHERE carid LIKE '%bmw%'
OR carid LIKE '%mer%'
OR carid IS NOT NULL
AND age
BETWEEN '5'
AND '10' 
```

我不明白的是：

![在此处输入图像描述](../Images/e3707026892e0b2769ba21f1f7199924.png)

1.  为什么键为NULL？

2.  我可以让这个查询更快吗？它需要 0.0035 秒 - 对于 1000 行表来说，这是慢还是快？

在我的表中 carid 是表的主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:33:18.220

MySQL 没有找到用于查询的任何索引。

查询的速度取决于您的 CPU，对于这么少的行，还取决于可用的 RAM、系统负载和磁盘速度。您可以使用`BENCHMARK`多次运行查询并以更高的精度对其计时（例如，您执行 100,000 次并将总时间除以 100,000）。

至于索引问题：您的`WHERE`子句涉及`carid`, `age`, `category`（间接地`performerid`）。您应该首先索引`category`（因为您要求直接匹配），`age`最后是`carid`。

```
CREATE INDEX test_index ON cronjob_reloaded ( category, age, carid ); 
```

这汇集了 MySQL`WHERE`在单个索引操作中查询阶段所需的大部分信息。

添加`performerid`可能会加快速度，也可能不会，这取决于几个因素。我会开始没有，也许稍后会测试它。

*更新：原始查询似乎已更改，不再`performerid`出现。*

最后，1000 行通常只需要很少的时间，以至于 MySQL 甚至可能决定*根本不使用索引，*因为它更快地加载所有内容并`WHERE`自行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:27:08.313

As per the docs:

"If key is NULL, MySQL found no index to use for executing the query more efficiently."

Please refer below link for Official document on it.

[Mysql Doc](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html#explain_key)

Edit :

Here are the links for Index

[How mysql Index work's - SO](https://stackoverflow.com/questions/1108/how-does-database-indexing-work)

[How to create index](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

Hope this help !

# asp.net-mvc - MVC PartialView中的下拉（选择）在通过jQuery更改值后不更新文本

> ID：12390378
> 
> 赞同：0
> 
> 时间：2012-09-12T14:23:58.427
> 
> 标签：asp.net-mvc, jquery-mobile, partial-views

我有一个 MVC 2 / jQuery 移动应用程序。

在我的主视图中，我有一个可排序的列表。排序按 url 参数`sortorder`进行。您可以更改排序的下拉列表位于部分视图中，如下所示：

```
<div class="ui-select">
    <select name="sortSelect" id="sortSelect" data-mini="true">
        <option value="opt1">Option 1</option>
        <option value="opt2">Option 2</option>
        <option value="opt3">Option 3</option>
    </select>
</div> 
```

然后我有一个 jQuery 来检查下拉菜单是否已更改。在更改时，它会使用新的下拉值添加或更改 url`sort`参数并重定向到新的 url：

```
$(document).ready(function () {
    $('#sortSelect').change(function () {
        var sortOrder = $('#sortSelect').val();
        var url = document.URL;
        if (url.indexOf("sortorder=") > -1)
            url = url.replace(/sortorder=[^&]+/, "sortorder=" + sortOrder);
        else
            url = url + "&sortorder=" + sortOrder;
        window.location.replace(url);
    });
}); 
```

由于在排序顺序之前还有一些其他参数，因此可以使用＆添加。

要在新加载页面时从 url 设置正确的值，我有以下 jQuery（函数 gup 从 url 读取值）：

```
$('#sortSelect').ready(function () {
    var sortorder = gup('sortorder');
    if (sortorder != '')
        $('#sortSelect').val(sortorder);
} 
```

There is the problem: if I load the site and change the `sortorder` by dropdown, everything works so far. The page is newly loaded with new url parameter and newly sorted list. even the dropdown value is set correctly (I checked this by `alert($('#sortSelect').val()`, but the dropdown text is the old one. If I press F5 the site refreshes, and the dropdown has its correct text...

Any ideas how i can solve the problem? Or what is the problem at all?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:32:52.397

I found the answer on my own. As expected I have to refresh the select (dropdown) with `$("#sortSelect").selectmenu("refresh");` like this:

```
$('#sortSelect').ready(function () { 
    var sortorder = gup('sortorder'); 
    if (sortorder != '') $('#sortSelect').val(unescape(sortorder));
    $("#sortSelect").selectmenu("refresh");
}); 
```

sometimes, easy problems take some time ;)

# c# - 带有 char 数组的非托管联合

> ID：12390379
> 
> 赞同：2
> 
> 时间：2012-09-12T14:24:01.677
> 
> 标签：c#, union, unmanaged

我在 C++ 中有以下内容：

```
struct TestA {
    int i;
    char text[512];
};

struct TestB {
    double n;
    char text[512];
};

union TestUnion {
    struct TestA a;
    struct TestB b;
};

int fnUnmanagedDLL(int which,TestUnion *); 
```

我尝试像这样声明一个 C# 包装器：

```
public class WrapperClass
    {
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public struct TestA
        {
            public int i;
            [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 512)]
            public string text;
        }

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public struct TestB
        {
            public double n;
            [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 512)]
            public string text;
        }
        [StructLayout(LayoutKind.Explicit)]
        public struct TestUnion
        {
            [FieldOffset(0)]
            public TestA a;

            [FieldOffset(0)]
            public TestB b;

        }

        [DllImport("UnmanagedDLL.Dll")]
        public static extern int fnUnmanagedDLL(int which,ref TestUnion obj);
    } 
```

一旦我运行一个引用 WrapperClass.TestUnion 的程序，我就会得到“无法从程序集 'UnmanagedToManaged，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 加载类型 'TestUnion'，因为它在偏移量处包含一个对象字段0 未正确对齐或被非对象字段重叠。”。

这只是一个测试程序。我确实在另一个问题中看到了删除联合的建议。但是，我不知道DLL会提前填充哪个结构。任何人都可以就我做错了什么提供建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:34:11.673

默认编组器无法自动处理此问题。当从非托管函数返回时，它不知道如何编组结构，因为它无法知道`TestUnion`应该使用它的哪一部分。您必须通过更改 p/Invoke 定义以获取 IntPtr、分配缓冲区，然后手动编组为正确的类型来手动进行编组。

在下面的示例中，我假设 的返回值`fnUnmanagedDLL`是您如何确定它填充的结构类型。

```
public class WrapperClass
{
    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public struct TestA
    {
        public int i;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 512)]
        public string text;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
    public struct TestB
    {
        public double n;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 512)]
        public string text;
    }

    public struct TestUnion  // Removed marshal attributes since they cause exceptions
    {
        public TestA a;
        public TestB b;
    }

    [DllImport("UnmanagedDLL.Dll")]
    private static extern int fnUnmanagedDLL(int which, IntPtr obj);

    public static int UnmanagedDLL(int which, ref TestUnion testUnion) {
       IntPtr buffer = Marshal.AllocHGlobal(
                Math.Max(Marshal.SizeOf(typeof(TestA)),
                         Marshal.SizeOf(typeof(TestB)));

       int returnType = fnUnmanagedDLL(which, buffer);
       switch (returnType) {
           case 1: // What ever fnUnmanagedDLL returns for TestA
              testUnion.a = (TestA)Marshal.PtrToStructure(buffer, typeof(TestA));
              break;
           case 2: // What ever fnUnmanagedDLL returns for TestB
              testUnion.a = (TestB)Marshal.PtrToStructure(buffer, typeof(TestB));
              break;
       }

       Marhsal.FreeHGlobal(buffer); // Need to manually free the allocated buffer

       return returnType;
    }
} 
```

# python - sorl-thumbnail 在 django 中不起作用

> ID：12390381
> 
> 赞同：1
> 
> 时间：2012-09-12T14:24:02.930
> 
> 标签：python, django, django-templates, thumbnails, sorl-thumbnail

我正在使用 sorl-thumbnail 在我的 django 项目中动态创建缩略图。

这是我的 HTML 代码是：

```
<html>
<head><title>mypage</title>
<% load thumbnail %}
<div class="logo">
       <a href="">
    {% thumbnail "http://www.aino.se/media/i/logo.png" "40x40" as im %}
        <img src="{{ im.url }}">
        {% endthumbnail %}
       </a>
</div>
</html> 
```

这是我的`settings.py`

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    ..... 

    'django.middleware.cache.UpdateCacheMiddleware',
    "django.middleware.cache.FetchFromCacheMiddleware",

    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
     .......
    "sorl.thumbnail",
)

CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',
        'LOCATION': 'd:/code/,
    }
} 
```

我没有收到任何错误，也没有缩略图！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T19:40:26.390

我有同样的问题。经过一番调查，我发现我的网络服务器（在我的例子中是 nginx）没有对`MEDIA_ROOT`.

不知何故， sorl-thumbnail 在这种情况下默默地失败了。授予 nginx 用户访问权限为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:33:13.983

您确定您的图片链接有效吗？尝试按 `{% empty %}`功能捕获此问题：

```
{% thumbnail "http://www.aino.se/media/i/logo.png" "40x40" as im %}
    <img src="{{ im.url }}">
{% empty %}
    <p>No image</p>
{% endthumbnail %} 
```

正如文件所说：

> 使用空功能，当源解析为空值或无效图像源时，会呈现空部分...：

# javascript - 调用 setTimeout 时出现 NaN 错误

> ID：12390385
> 
> 赞同：1
> 
> 时间：2012-09-12T14:24:10.670
> 
> 标签：javascript

我正在尝试使用一个调用自身并被计数器破坏的 setTimeout 函数。但是，我不断收到一个 NaN 错误。有人能帮我吗？

```
<script language="javascript">
    function Tests() {
        this.i = 0;
    }

    Tests.prototype.increment_test = function () {
        if (this.i > 2) {
            return;
        }
        alert(this.i);
        this.i++;

        setTimeout(this.increment_test, 30);
    }

    ta = new Tests();
    ta.increment_test();
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:27:01.293

`this`不会永久绑定到`increment_test`函数。

您可以`this`在变量中引用，并在匿名函数中使用它。

```
var self = this;
setTimeout(function() { self.increment_test()}, 30); 
```

或者您可以使用`Function.prototype.bind`将调用上下文绑定到函数。

```
setTimeout(this.increment_test.bind(this), 30); 
```

或者您可以制作一个绑定上下文的小实用程序。

```
function _bindCtx(fn, ctx) {
    return function() { return fn.apply(ctx); };
} 
```

并这样称呼它。

```
setTimeout(_bindCtx(this.increment_test, this), 30); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:26:43.577

当`setTimeout`调用一个函数时，它会将其上下文更改为`window`. 所以，里面`increment_test`，`this`不是你想的那样。

你需要这样做：

```
var self = this;
setTimeout(function(){
    self.increment_test();
}, 30); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:28:19.313

从 setInterval 运行函数时，“this”变量中的上下文不是您的对象，而是“window”对象。您需要通过以下方式传递上下文：

```
setTimeout(this.increment_test.apply(this), 30) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:43:43.750

```
function Tests() {
    this.i = 0;
    // Next line added. I think what it's the best solution because it can 
    // increase the speed and reduce the consumption of resources (memory) 
    // when used with setTimeout()
    this.increment_test = this.increment_test.bind(this);
}

Tests.prototype.increment_test = function () {
    if (this.i > 2) {
        return;
    }
    alert(this.i);
    this.i++;

    setTimeout(this.increment_test, 30);
}

ta = new Tests();
ta.increment_test(); 
```

# c# - 存储或附加 for 循环的内容（数组）以传递给另一个函数 - 封装

> ID：12390387
> 
> 赞同：0
> 
> 时间：2012-09-12T14:24:17.610
> 
> 标签：c#, .net, winforms, web-services

我正在使用一个 Windows 应用程序表单，我想要一个按钮来调用 Web 服务 MakeANote。Web 服务需要与登录一起返回的信息以及票证。LogOn 调用有一些输入参数、1 个参考（我听说是输入和输出）和一些输出参数。但它也返回一个“信息”数组。将该数组放入我的变量 pubinfo 中，如下所示：

```
Webservice.Information[] pubinfo = null; //initialize

pubinfo = myflo.LogOn(username, password, ref ticket, out settings, out users,out terms, out currentUser); 
```

所以类型是自定义类型：Webservice.Information[]。数组中的每个信息元素都有 3 个属性：*字符串 ID、字符串名称和布尔 ReversedRead。*

我在想---因为这是用 LogOn 按钮填充的，因此被封装在调用它的方法中，并且---因为我想将此信息传递给另一个 Web 服务 MakeANote，所以我可能会做类似的事情这个：

```
 for (int i = 0; i < pubinfo.Length; i++)
            {
                objInfo = pubinfo[i];
                storePubInfo(objInfo);
                MessageBox.Show("PubInfo stored", "PubInfo");

            } 
```

并将 pubinfo 数组存储在另一个函数中，MakeANote 函数必须调用该函数来单独收集它。这对我来说似乎很乱，但我也想保持简单，因为我是新手。

存储功能如何？像这样简单的事情似乎不起作用。

```
 public void storePubInfo()
       {
          return storePubInfo;
       } 
```

我也可以附加它。那个更好吗？并且返回正常还是我实际上必须有类似 Webservice.Information storePubInfo(var) 的东西

当我单击按钮时，我的记笔记函数会使用票证的参数调用..因此票证可以毫无问题地通过。我的问题是登录时返回的数组 pubinfo。

* * *

如果我试图以错误的方式做这件事，或者有更好的方法来做这件事，我愿意接受想法。*我应该做一些完全不同的事情并在 buttonclick 中执行提取吗？如果是这样，有什么好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:33:02.303

```
class MyClass
{
    List<Webservice.Information> _webServiceInformation = new List<Webservice.Information>()

    public void LogonAndStoreInfo()
    {
        Webservice.Information[] pubinfo = myflo.LogOn(username, password, ref ticket, out settings, out users,out terms, out currentUser);

        for (int i=0; i < pubInfo.Length; i++)
        {
            StorePubInfo(pubinfo);
        }

        Webservice.Information[] myPubInfo = GetPubInfo();
    }

    void StorePubInfo(Webservice.Information info)
    {
        _webServiceInformation.Add(info);
    }

    Webservice.Information[] GetPubInfo()
    {
        return _webServiceInformation.ToArray();
    }
} 
```

# haskell - Haskell 和纯函数结果的记忆

> ID：12390389
> 
> 赞同：7
> 
> 时间：2012-09-12T14:24:18.520
> 
> 标签：haskell, ghc, memoization

> **可能的重复：**
> [GHC Haskell 中的记忆何时自动？](https://stackoverflow.com/questions/3951012/when-is-memoization-automatic-in-ghc-haskell)

因此，纯函数总是为固定输入返回相同的值。也就是说，如果有足够的内存（问题 1），Haskell（更准确地说是 GHC）会自动缓存（记忆）这些结果吗？开发人员是否可以控制它（问题 2）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T14:52:32.203

我投票结束，但简短的回答：

GHC 不会对函数进行任何自动记忆，这可能是一件好事，因为它会使空间复杂性更加难以推理。此外，记忆化通常不是一个非常容易解决的问题，因为它要求函数的参数具有可比性，这对于所有类型（例如，函数）实际上是不可能的。

Haskell 具有非严格的语义。GHC 提供了一个或多或少的按需调用成本模型。尽管由于严格分析器的原因，在高优化级别的惰性评估的开销并没有那么糟糕。

在 Haskell 中使用惰性求值很容易实现记忆。不过要小心空间使用。

```
fib' :: (Integer -> Integer) -> Integer -> Integer
fib' f 0 = 0
fib' f 1 = 1
fib' f n | n > 1 = (f (n - 1)) + ((f (n - 2))

slow_fib :: Integer -> Integer
slow_fib = fib' slow_fib

fibs :: [Integer]
fibs = map (fib' memo_fib) [0..] 

memo_fib :: Integer -> Integer
memo_fib n = fibs !! n 
```

这实际上并没有那么快，并且是空间泄漏，但抓住了一般的想法。您可以[在 Haskell wiki 上了解更多信息](http://www.haskell.org/haskellwiki/Memoization)。

# iphone - 从一个 UIViewController 推送到另一个 UIViewController 时，如何使用 CATransition 为屏幕的一部分设置动画

> ID：12390395
> 
> 赞同：0
> 
> 时间：2012-09-12T14:24:30.350
> 
> 标签：iphone, ipad, ios5, catransition

我有几个 UIViewControllers，它们在右侧包含相同的信息，但在屏幕左侧包含不同的信息。我想从一个过渡到另一个，但只为左侧设置动画，即向上滑动左侧，同时保持右侧静止。

```
-(void)goNextStep{
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
    NSString *identifier = @"";
    if (_model.isLoggedIn) {
        //The user is already logged in, don't display the loginViewController
        // instead take them to the next viewController
        identifier = [_model nextStepIdentifier];
        if ([identifier isEqualToString:@""]) {
            identifier = @"loginController";
        }
    }else{
        identifier = @"loginController";
    }

    UIViewController *nextVC = (UIViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:identifier];

    [nextVC setHidesBottomBarWhenPushed:YES];
    CATransition *transition = [CATransition animation];
    transition.duration = 0.5f;
    transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    transition.type = kCATransitionPush;
    transition.subtype = kCATransitionFromBottom;
    transition.delegate = self;
    //I would love to have
    //transition.rect=MyRect;
    [self.navigationController.view.layer addAnimation:transition forKey:nil];

    [self.navigationController pushViewController:nextVC animated:NO];
} 
```

我想将此过渡限制为屏幕的已定义矩形。

有没有办法将过渡动画限制为矩形？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:44:15.787

导航控制器推送没有办法做到这一点。VC，尤其是容器 VC 的设计理念是一次只有一个控制界面。甚至那个 navigationController.view.layer 也不是你可以操纵的。

类似这样的学校解决方案是使用具有委托（可能还有数据源）出口的视图来实现界面的不变的右侧。想想 UITableView。想要拥有此视图的视图控制器以传统方式将其添加到其层次结构中。无论它出现在哪个 VC 上，它都可能具有相同的数据源（甚至相同的委托）。

但是如何实现预期的过渡呢？我想不出一种方法来准确地得到你正在寻找的东西（也就是说，右边没有任何变化，左边有一个正常的推送转换），但考虑一下：

1）如果信息视图在推送之前在推送的 vc 上都设置为相同的状态，则转换看起来会非常好。2）如果信息视图有一个幻灯片关闭动画，它变得非常瘦 - 刚好足够宽以提供“打开”控件 - 那么您可以在推送转换之前关闭它，在下一个 VC 上将其设置为关闭，并可选择在推送后再次打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:56:00.393

好的，在从 viewController A 到 viewController B 的初始推送中，我找不到处理这种转换的方法，但是我找到了一个似乎效果很好的解决方法，尽管我需要进行更多的按摩才能让它完全按照我需要的方式工作，这是正确的方向。

首先，我在 viewController B 中放置了一个 UIImageView，并在该 viewController 中创建了一个插座。我还给这个 UIImageView 一个标签，1000 为我工作。

接下来，我将 viewController A 中的代码更改为以下内容：

```
-(void)goNextStep{
    UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
    NSString *identifier = @"";
    if (_model.isLoggedIn) {
        //The user is already logged in, don't display the loginViewController
        // instead take them to the next viewController
        identifier = [_model nextStepIdentifier];
        if ([identifier isEqualToString:@""]) {
            identifier = @"loginController";
        }
    }else{
        identifier = @"loginController";
    }

    UIViewController *nextVC = (UIViewController *)[mainStoryboard instantiateViewControllerWithIdentifier:identifier];

    UIImageView *infoImageView = [nextVC infoImageView];
    infoImageView.image = [self transitionImageFromView:self.transImageRect];

    [nextVC setHidesBottomBarWhenPushed:YES];
    [self.navigationController pushViewController:nextVC animated:NO];
} 
```

因此，在推送到下一个 viewController (B) 之前，我抓取了 viewController A 左侧的屏幕截图，并将刚刚添加到 viewController B 的图像设置为该屏幕截图。

现在在 ViewController BI 中添加了以下内容，请忽略不整洁的代码。

```
-(void)viewDidAppear:(BOOL)animated{
    CGRect stage = self.view.bounds;
    CGRect actor =self.formView.frame;
    CGRect spot = actor;
    CGRect cover= self.transitionView.frame;
    cover.origin.y=(0.0 - cover.size.height);
    actor.origin.y = stage.size.height;
    self.formView.frame=actor;

    [UIView animateWithDuration:0.5 animations:^{
        self.formView.frame=spot;
        self.transitionView.frame=cover;

    }];

}

#define kINFO_VIEW_TAG  1000

// answer the info image view
// add this declaration to view controller B .h file
//
- (UIImageView *)infoImageView {
    return (UIImageView *)[self.view viewWithTag:kINFO_VIEW_TAG];
} 
```

这将处理向上移动 UIImageView 和带有登录表单的 UIView 的转换。看起来我什至不需要 CATransition。

# twitter - 使用 API 1.1 获取最新推文

> ID：12390398
> 
> 赞同：26
> 
> 时间：2012-09-12T14:24:42.077
> 
> 标签：twitter

我一直使用这个地址来获取我所有的推文：

[http://api.twitter.com/1/statuses/user_timeline.json?screen_name=enriquemoreno](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=enriquemoreno)

但由于 API 1.1 已经过时并且 API 1 已被弃用，我想我会尝试改变。但是新地址不起作用：

[http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=enriquemoreno](http://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=enriquemoreno)

我错过了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-14T11:18:15.773

[有人](https://plus.google.com/+JasonMayes/posts/j65ntqa5Qd3)用香草 javascript 写了一个（聪明的）片段来获取 twitter 小部件：

```
/*********************************************************************
      #### Twitter Post Fetcher! ####
      Coded by Jason Mayes 2013.
      www.jasonmayes.com
      Please keep this disclaimer with my code if you use it. Thanks. :-)
      Got feedback or questions, ask here: http://goo.gl/JinwJ
    *********************************************************************/
    var twitterFetcher=function(){var d=null;return{fetch:function(a,b){d=b;var c=document.createElement("script");c.type="text/javascript";c.src="http://cdn.syndication.twimg.com/widgets/timelines/"+a+"?&lang=en&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random();document.getElementsByTagName("head")[0].appendChild(c)},callback:function(a){var b=document.createElement("div");b.innerHTML=a.body;a=b.getElementsByClassName("e-entry-title");d(a)}}}();

    /*
    * ### HOW TO USE: ###
    * Create an ID:
    * Go to www.twitter.com and sign in as normal, go to your settings page.
    * Go to "Widgets" on the left hand side.
    * Create a new widget for "user timeline". Feel free to check "exclude replies"
    * if you dont want replies in results.
    * Now go back to settings page, and then go back to widgets page, you should
    * see the widget you just created. Click edit.
    * Now look at the URL in your web browser, you will see a long number like this:
    * 345735908357048478
    * Use this as your ID below instead!
    */

    twitterFetcher.fetch('345170787868762112', function(tweets){
      // Do what you want with your tweets here! For example:
      var x = tweets.length;
      var n = 0;
      var element = document.getElementById('tweets');
      var html = '<ul>';
      while(n < x) {
        if (tweets[n].innerText) {
          html += '<li>' + tweets[n].innerText + '</li>';
        } else {
          html += '<li>' + tweets[n].textContent + '</li>';
        }
        n++;
      }
      html += '</ul>';
      element.innerHTML = html;
    }); 
```

[http://jsfiddle.net/jmayes/maT2Z/](http://jsfiddle.net/jmayes/maT2Z/)

不是最干净的方式，也许不是面向未来的，但目前唯一的解决方案（我知道）在没有 OAuth 和服务器端支持的情况下访问 twitter 数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T04:09:00.993

这似乎是一个非常简单的授权和 php 实现：

[http://profabbynucup.tumblr.com/post/53031776012/display-your-latest-twitter-feed-using-php-and-oauth](http://profabbynucup.tumblr.com/post/53031776012/display-your-latest-twitter-feed-using-php-and-oauth)

# database - 自定义对象中的 url 参数按钮。- 可能的？

> ID：12390400
> 
> 赞同：0
> 
> 时间：2012-09-12T14:24:42.270
> 
> 标签：database, salesforce

我只有一个带有自定义 URL 按钮的自定义对象。我希望按钮链接到另一个自定义对象并传递一些字段。当我将参数设置为文本框的 ID 时，它可以工作，但前提是我手动在 url 中输入一个值。我需要自动获取字段的值。

这不起作用：

```
salesforce.com\customobject\?00Nd00000051jy4={!form_email_address} 
```

如果我使用此链接，新页面只会使用 {!form_email_address} 而不是传递的值填充该字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:00:58.513

如果**from_email_address**是自定义对象中的*自定义字段*，则链接应为：

```
/CustomObjTargetId/e?CustomObjFieldTargetName={!From_email_address__c} 
```

不要忘记**__c**来表示 salesforce 是一个自定义字段。

# node.js - 使用 fluent-ffmpeg 判断文件是视频还是音频

> ID：12390402
> 
> 赞同：4
> 
> 时间：2012-09-12T14:24:59.157
> 
> 标签：node.js, audio, video, ffmpeg

我在 NodeJS 中使用 node-fluent-ffmpeg 模块。fluent-ffmpeg 提供了获取视频和音频文件元数据的功能非常好。

[https://github.com/schaermu/node-fluent-ffmpeg#reading-video-metadata](https://github.com/schaermu/node-fluent-ffmpeg#reading-video-metadata)

我曾尝试在 Mac OS 上使用元数据中的“分辨率”属性来判断文件是纯音频还是视频，即如果 resolution.w 和 resolution.h 均为 0，则该文件是音频。这在 Mac OS 上运行良好。但是发生了一些奇怪的事情，这在使用最新 ffmpeg 的 Windows 平台（我尝试过 Windows 7 64bit 和 Windows 2008）上不起作用。即使我通过 fluent-ffmpeg 放置了一个 .mp3 文件，结果看起来像这样：

```
video:
{
  container:'mp3',
  ...
  resolution: {w:300,h:300},
  resolutionSquare: {w:300,h:300},
  aspectString: '1:1',
  ...
}
audio:
{
  codec:'mp3',
  bitrate:64,
  sample_rate:44100,
  stream:0,
  channels:1
} 
```

我不是为什么会有“分辨率”，因为它是一个纯音频文件。那么有什么可靠的方法可以从元数据中找出文件是纯音频还是视频？或者我应该使用 ffmpeg 命令行来找出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T01:45:44.673

我建议为此使用 ffprobe，有一个不错的模块，称为[node-ffprobe](https://github.com/ListenerApproved/node-ffprobe)

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-11T07:17:05.340

您可以为此使用包“node-ffprobe”。

示例代码：

```
var probe = require('node-ffprobe');
var track = '<ENTER FILE PATH>';
probe(track, function(err, probeData) {
 console.log(probeData);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-11T17:10:25.343

从**fluent-ffmpeg 2.0 开始**，你不需要另一个包。

元数据子模块被**ffprobe()**方法取代。

它是这样使用的：

```
var ffmpeg = require('fluent-ffmpeg');

ffmpeg('/path/to/file.avi').ffprobe(function(err, data) {
  console.dir(data.streams);
  console.dir(data.format);
});

ffmpeg.ffprobe('/path/to/file.avi', function(err, data) {
  console.dir(data.streams);
  console.dir(data.format);
}); 
```

这样，您可以方便地检查分辨率/编解码器或其他流属性以区分彼此。

希望这对使用更新库的任何人都有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T02:43:26.240

我不确定您使用的是什么版本的 fluent-ffmpeg，我也没有在 Windows 平台上测试过；我今天才开始使用 fluent-ffmpeg，我提供的解决方案是基于我的观察。首先我们使用下面的代码来访问元数据。

```
var source = 'vids/source.mp3';

var ffmpeg = require('fluent-ffmpeg');
var Metalib = require('fluent-ffmpeg').Metadata;

var metaObject = new Metalib(source, function(metadata, err) {
  console.log(metadata);
}); 
```

因为它无论如何都显示分辨率，即使它是一个纯音频文件。通过观察两个文件，一个音频文件和一个视频文件，这是我对音频文件的发现**[我只粘贴了下面的音频输出]**。

```
{ ffmpegversion: '1.2.1',
  title: 'juicy-r [the notorious b.i.g. vs. the xx]',
  artist: 'wait what',
  album: 'the notorious xx',
  track: '2/11',
  date: '2010',
  durationraw: '00:04:07.94',
  durationsec: 247,
  synched: true,
  major_brand: undefined,
  video: 
   { container: 'mp3',
     bitrate: 127,
     codec: 'mjpeg',
     resolution: { w: 1425, h: 1416 },
     resolutionSquare: { w: 1425, h: 1416 },
     rotate: 0,
     fps: 0,
     stream: 0,
     aspectString: '475:472',
     aspect: 1.00635593220339,
     pixelString: '1:1',
     pixel: 1 },
  audio: 
   { codec: 'mp3',
     bitrate: 128,
     sample_rate: 44100,
     stream: 0,
     channels: 2 } } 
```

基本上，假设`if(metadata.video.fps)`返回**false**，那么您就知道它是一个音频文件。此外，音频文件还有一个附加属性“通道”，因此您可以尝试检查它是否存在`if(metadata.audio.channels)...`，并希望通过该测试返回**true**

如果您确实找到了更聪明的解决方案，请告诉我！:-)

# jersey - Jersey - 动态挑选资源方法

> ID：12390405
> 
> 赞同：0
> 
> 时间：2012-09-12T14:25:10.857
> 
> 标签：jersey

我想根据某些注释在 Jersey 中动态调用资源方法。例如，如果我在不同的包中有两个相同的资源，具有类似的资源方法......

```
package com.mycompany.controller.v1;

@Component(value = "UsersControllerv1")
@Path("/users")
public class UsersController {

    @GET
    @Version("v1")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Response getUsers() {
    }
}

package com.mycompany.controller.v2;

@Component(value = "UsersControllerv2")
@Path("/users")
public class UsersController {

    @GET
    @Version("v2")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Response getUsers() {
    }
} 
```

其中@Version 是一个自定义注解，用于指定api 的版本。无论如何我可以拦截一个请求（可能使用ResourceFilterFactory），它指定一个版本作为头参数并调用具有匹配版本的特定资源方法

如果尝试这个，我会在启动时收到以下错误

```
12-Sep-2012 14:36:00 com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
SEVERE: Conflicting URI templates. The URI template /users for root resource class   com.mycompany.controller.v2.UsersController and the URI template /users transform to the same regular expression /users(/.*)?
12-Sep-2012 14:36:00 com.sun.jersey.spi.spring.container.servlet.SpringServlet initiate
SEVERE: Exception occurred when intialization
com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
    at com.sun.jersey.spi.spring.container.servlet.SpringServlet.initiate(SpringServlet.java:117)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:719)
    at org.eclipse.jetty.servlet.FilterHolder.doStart(FilterHolder.java:114) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:28:19.987

我从未见过与球衣相关的版本注释的任何用法。我认为这是不可能的（如果是的话，也许你有一个链接可以提供）。

URL 模式必须是明确的（彼此之间）。

如果要提供同一资源的 2 个版本，则必须在 URL 中提供版本。

但是，您可以在查询中设置一个参数，但它实际上并不是资源的 2 个不同版本，而是 1 个版本根据输入参数做出不同的响应。

例如 ：

```
@POST
  @Path("getUsers")
    @Consumes(MediaType.TEXT_PLAIN)
    @Produces(...)
    public String getUsers(final String query){
.... 
```

允许您将任何您想要的内容传递给您的资源。

# c++ - 运算符重载中的类数据封装（私有数据）

> ID：12390408
> 
> 赞同：1
> 
> 时间：2012-09-12T14:25:16.820
> 
> 标签：c++, operator-overloading, encapsulation

下面是代码

### ****编码：****

```
`#include <iostream>
using namespace std;

class Rational {
  int num;  // numerator
  int den;  // denominator
  friend istream& operator>> (istream & , Rational&);
  friend ostream& operator<< (ostream &  , const Rational&);
 public:
  Rational (int num = 0, int den = 1)
    :     num(num), den(den) {}
  void getUserInput() {
    cout << "num = ";
    cin >> num;
    cout << "den = ";
    cin >> den;
  }
  Rational operator+(const Rational &);
};

Rational Rational::operator+ (const Rational& r) { //HERE 
  int n = num * r.den + den * r.num;
  int d = den * r.den;
  return Rational (n, d);
}

istream& operator>> (istream & is , Rational& r)
{
    is >> r.num >> r.den;
}

ostream& operator<< (ostream & os , const Rational& r)
{
    os << r.num << " / " <<  r.den << endl;;
}
int main() {
  Rational r1, r2, r3;
  cout << "Input r1:\n";
  cin >> r1;
  cout << "Input r2:\n";
  cin >> r2;
  r3 = r1 + r2;
  cout << "r1 = " << r1;
  cout << "r2 = " << r2;
  cout << "r1 + r2 = " << r3;
  return 0;
}` 
```

 **问题

上面的代码有一个 operator+ 重载，在 operator+ 定义中我们可以看到`r`访问私有数据的参数（r.num 和 r.den）。为什么 C++ 允许参数访问类之外的私有数据？这是某种特殊情况吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:26:31.567

访问说明符适用于类级别，而不是实例级别，因此该类可以看到任何其他实例`Rational`的私有数据成员 。`Rational`由于您`Rational operator+`是成员函数，因此它可以访问其`Rational`参数的私有数据。

注意：规范的方法是定义一个成员`operator +=`，然后用它来实现一个非成员`operator+`

```
struct Foo
{
  int i;

  Foo& operator+=(const Foo& rhs) 
  { 
    i += rhs.i;
    return *this;
  }

};

Foo operator+(Foo lhs, const Foo& rhs)
{
  return lhs += rhs;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:31:42.623

`Rational::operator+`是一个成员函数，因此它可以访问**每个**对象的**所有**成员。 **`Rational`**

 **编码提示：这种东西通常写成两部分：一个`operator+=`是成员，一个`operator+`不是。像这样：

```
Rational& Rational::operator+=(const Rational& rhs) {
    num = num * rhs.den + den * rhs.num;
    den *= rhs.den;
    return *this;
}

Rational operator+(const Rational& lhs, const Rational& rhs) {
    Rational result(lhs);
    result += rhs;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:29:05.380

> **Why C++ allow the parameter to access private data outside of the class ? Is it some kind of a special case?**

The rule with access specifiers is:
***"Access specifiers apply to per class and not per object"***
So, You can always access `private` members of a class object in member function of that class.

A copy constructor/copy assignment operator are commonly used examples of the rule though we do not notice it that often.

**[Online Sample](http://codepad.org/KG6mlA7i)**:

```
class Myclass
{
    int i;
    public:
       Myclass(){}
       Myclass(Myclass const &obj3)
       { 
            //Note i is private member but still accessible
            this->i = obj3.i;
       }
};

int main()
{
    Myclass obj;
    Myclass obj2(obj);
} 
```

**Good Read:**
[What are access specifiers? Should I inherit with private, protected or public?](https://stackoverflow.com/questions/5447498/what-are-access-specifiers-should-i-inherit-with-private-protected-or-public)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T15:28:59.087

虽然其他张贴者已经解释了 C++ 访问说明符**是如何**工作的，但没有人解释它们**为什么**以这种方式工作。

增加封装是**为了尽量减少**可以访问您的对象内部（即您的数据成员）的代码量，而不是对象的数量。如果访问说明符限制对同一类中其他对象内部的访问，这*不会*增加封装。

封装很重要，因为它意味着更改实现细节将影响最少的代码。增加封装会增加代码的**可维护性**。这是一个构建时的概念，而不是运行时的概念。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-28T05:54:03.247

这个问题揭示了一个误解：“为什么 C++ 允许参数访问类之外的私有数据？”

方法 operator+ 确实属于该类：它在类中声明，在其实现中，您将看到该方法是该类的成员，前缀为 class_name:: 因此，对于 operator+，如果私有成员以外的成员，则无法访问班上。

运算符 << 和 >> 是不同的情况——它们实际上不属于该类，因为它们是由流对象调用的。这就是为什么他们的实现没有前缀 Rational::。为了允许这些操作员访问对象的私有数据，他们在类声明中被声明为类的朋友。通过将函数或类声明为我自己的类的朋友，我表明我相信它们不会篡改我类的私有数据。****

# javascript - Javascript访问变量

> ID：12390412
> 
> 赞同：0
> 
> 时间：2012-09-12T14:25:37.270
> 
> 标签：javascript, variables, scope

我正在使用以下代码（位于文件 swipe.js 中）：

```
$(document).ready(function() {

    $('.ui-slider-handle').live('touchstart', function(){
        // When user touches the slider handle, temporarily unbind the page turn handlers
        doUnbind();
    });

$('.ui-slider-handle').live('mousedown', function(){
    // When user touches the slider handle, temporarily unbind the page turn handlers
    doUnbind();
    });

$('.ui-slider-handle').live('touchend', function(){
    //When the user let's go of the handle, rebind the controls for page turn
    // Put in a slight delay so that the rebind does not happen until after the swipe has been triggered
    setTimeout( function() {doBind();}, 100 );
});

$('.ui-slider-handle').live('mouseup', function(){
    //When the user let's go of the handle, rebind the controls for page turn
    // Put in a slight delay so that the rebind does not happen until after the swipe has been triggered
    setTimeout( function() {doBind();}, 100 );
});

// Set the initial window (assuming it will always be #1
window.now = 1;

//get an Array of all of the pages and count
windowMax = $('div[data-role="page"]').length;

doBind();
});
// Functions for binding swipe events to named handlers
function doBind() {
    $('div[data-role="page"]').live("swipeleft", turnPage);
    $('div[data-role="page"]').live("swiperight", turnPageBack);
    }

function doUnbind() {
    $('div[data-role="page"]').die("swipeleft", turnPage);
    $('div[data-role="page"]').die("swiperight", turnPageBack);
    }

// Named handlers for binding page turn controls
function turnPage(){
    // Check to see if we are already at the highest numbers page
    if (window.now < windowMax) {
    window.now++
    $.mobile.changePage("#page"+window.now, {transition: window.localStorage.getItem("transitionsSettings")}, false, true);
}
else
            {
                window.now= window.now-2;
                $.mobile.changePage("#page"+window.now, {transition: window.localStorage.getItem("transitionsSettings")}, false, true);
}
}

function turnPageBack(){
    // Check to see if we are already at the lowest numbered page
    if (window.now != 1) {
    window.now--;
    $.mobile.changePage("#page"+window.now, {transition: window.localStorage.getItem("transitionsSettings"), reverse: "true"}, true, true);
}
else
            {
                window.now = window.now+2;
                $.mobile.changePage("#page"+window.now, {transition: window.localStorage.getItem("transitionsSettings"), reverse: "true"}, true, true);
}
} 
```

我还有另一个名为 loadFeed.js 的文件。它们都按以下顺序加载到 index.html 中：

```
<script type="text/javascript" src="script/swipe.js"></script>
<script type="text/javascript" src="script/loadFeed.js"></script> 
```

这是 loadFeed.js 文件：

```
google.load("feeds", "1");
alert(window.now);
switch(now)
{
case 1:
    var link = "http://www.zive.sk/rss/sc-47/default.aspx";
    var listviewID = "feedZive";
    break;
case 2:
    var link = "http://mobilmania.azet.sk/rss/sc-47/default.aspx";
    var listviewID = "feedMobil";
    break;
case 3: 
    var link = "http://www.automoto.sk/rss";
    var listviewID = "feedAuto";
    break;
}
alert(link);
alert(listviewID);
alert("#"+listviewID);

function initialize() {
    var feed = new google.feeds.Feed(link);
    feed.setNumEntries(window.localStorage.getItem("entriesNumber"));
    feed.load(function(result) {
        if (!result.error) {
            var feedlist = document.getElementById(listviewID);
            for (var i = 0; i < result.feed.entries.length; i++) {
                var li = document.createElement("li");
                var entry = result.feed.entries[i];
                var A = document.createElement("A");
                A.setAttribute("href",entry.link);
                A.appendChild(document.createTextNode(entry.title));
                li.appendChild(A);
                feedlist.appendChild(li);
            }
            $("#"+listviewID).listview("refresh");
        }
    });
}
google.setOnLoadCallback(initialize); 
```

有没有办法在 loadFeed.js 中访问 window.now 变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:29:57.990

是的。该`window`对象随处可用。它是全局范围变量的麦克爸爸。您可以`window.now`在“loadFeed.js”或任何 javascript 块或文件中使用。

在您的情况下，您将`now`属性添加到`window`文档就绪回调中的对象。所以这不会立即发生。您不应该期望 window.now 立即具有价值。我会建议：

1）将代码包装在“loadFeed.js”中，该代码在`window.now`文档就绪回调中访问，就像大部分 swipe.js 代码一样：

```
 $(document).ready(function() {
        //your code
    }); 
```

或者

2) 在 swipe.js中，`window.now`在文档就绪回调之外给出一个值。

# sql - SQL oracle 下一个值

> ID：12390415
> 
> 赞同：4
> 
> 时间：2012-09-12T14:25:41.847
> 
> 标签：sql, oracle

如何为每个 name1 和 id 获取下一个值（nextname1）？`SQL Oracle.` 我尝试使用分析功能`LEAD`但`LAST_VALUE`不工作：

```
LEAD(name1) OVER (PARTITION BY id ORDER BY id) as nextname1 
```

返回：

```
id name1 (nextname1)
1  AA  (AA)
2  AA  (AA)
3  AA  (MB)
4  MB  (MB)
5  MB  (BB)
6  BB  (BB)
7  BB  (ZZ)
8  ZZ  (null) 
```

我想：

```
id name1 (nextname1)
1  AA  (MB)
2  AA  (MB)
3  AA  (MB)
4  MB  (BB)
5  MB  (BB)
6  BB  (ZZ)
7  BB  (ZZ)
8  ZZ  (null) 
```

注意：我有一张包含数百万条记录的表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:37:40.480

你可以通过两个步骤来做到这一点：

```
SQL> WITH DATA AS (
  2               SELECT 1 id, 'AA' name FROM DUAL
  3     UNION ALL SELECT 2 id, 'AA' name FROM DUAL
  4     UNION ALL SELECT 3 id, 'AA' name FROM DUAL
  5     UNION ALL SELECT 4 id, 'MB' name FROM DUAL
  6     UNION ALL SELECT 5 id, 'MB' name FROM DUAL
  7     UNION ALL SELECT 6 id, 'BB' name FROM DUAL
  8     UNION ALL SELECT 7 id, 'BB' name FROM DUAL
  9     UNION ALL SELECT 8 id, 'ZZ' name FROM DUAL
 10  )
 11  SELECT v.*, max(first_step) OVER (PARTITION BY name) nextname
 12    FROM (SELECT data.*,
 13                 nullif(lead(name) OVER (ORDER BY id), name) first_step
 14            FROM data) v
 15   ORDER BY id;

        ID NA FI NE
---------- -- -- --
         1 AA    MB
         2 AA    MB
         3 AA MB MB
         4 MB    BB
         5 MB BB BB
         6 BB    ZZ
         7 BB ZZ ZZ
         8 ZZ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:27:13.913

No need for analytical functions. Use a nested select:

```
with data as (
  select 1 id, 'AA' name1 from dual union all
  select 2 id, 'AA' name1 from dual union all
  select 3 id, 'AA' name1 from dual union all
  select 4 id, 'MB' name1 from dual union all
  select 5 id, 'MB' name1 from dual union all
  select 6 id, 'BB' name1 from dual union all
  select 7 id, 'BB' name1 from dual union all
  select 8 id, 'ZZ' name1 from dual
)
select d1.id, d1.name1, (
  select name1 
  from data d2
  where d2.id > d1.id
  and d2.name1 <> d1.name1
  and rownum = 1
) nextname1
from data d1 
```

# matrix - 从 GNU Octave 中的矩阵中删除一列

> ID：12390419
> 
> 赞同：55
> 
> 时间：2012-09-12T14:25:55.420
> 
> 标签：matrix, octave

在 GNU Octave 中，我希望能够从矩阵中删除特定的列。为了一般性。我还希望能够从矩阵中删除特定行。

假设我有这个：

```
mymatrix = eye(5)

mymatrix =

Diagonal Matrix

   1   0   0   0   0
   0   1   0   0   0
   0   0   1   0   0
   0   0   0   1   0
   0   0   0   0   1 
```

我想删除第 2 列和第 4 列，但是当我删除第 2 列时，第 4 列的位置已经移动到第 3 列，这让我很头疼。一定有更好的方法！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-11-12T15:00:05.693

如果您不知道确切的列数或行数，您可以使用神奇的“结束”索引，例如：

```
mymatrix(:,2:end)  % all but first column

mymatrix(2:end,:)  % all but first row 
```

这还允许您从矩阵中切出行或列，而无需将其重新分配给新变量。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-09-12T14:27:30.503

**GNU Octave delete Columns 2 and 4 from a Matrix**

```
mymatrix = eye(5); 
mymatrix(:,[2,4]) = []; 
disp(mymatrix) 
```

Prints:

```
1   0   0
0   0   0
0   1   0
0   0   0
0   0   1 
```

**GNU Octave delete Rows 2 and 4 from a Matrix:**

```
mymatrix = eye(5); 
mymatrix([2,4],:) = [];
disp(mymatrix) 
```

Prints:

```
1   0   0   0   0
0   0   1   0   0
0   0   0   0   1 
```

**Time complexity**

GNU Octave's CPU complexity for slicing and broadcasting here is a fast linear time `O(n * c)` where n is number of rows and c a constant number of rows that remain. It's C level single-core vectorized but not parallel.

**Memory complexity**

Working memory complexity is linear: `O(n * 2)` C makes a clone of the two objects, iterates over every element, then deletes the original.

The only time speed will be a problem is if your matrices are unrealistically wide, tall, or have a number of dimensions that blow out your fast memory, and speed is limited by the transfer speed between disk and memory.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-25T11:37:22.957

执行此操作的相反方法：

```
columns_you_want_to_keep = [1, 3, 5]
new_matrix = my_matrix(:,columns_you_want_to_keep) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-12T14:29:36.463

## 如何删除八度音阶中的多个列：

如何删除第 2 列和第 4 列：

```
columns_to_remove = [2 4];
matrix(:,columns_to_remove)=[] 
```

插图：

```
mymatrix = eye(5)
mymatrix =

   1   0   0   0   0
   0   1   0   0   0
   0   0   1   0   0
   0   0   0   1   0
   0   0   0   0   1

columns_to_remove = [2 4];

mymatrix(:,columns_to_remove)=[]

mymatrix =

   1   0   0
   0   0   0
   0   1   0
   0   0   0
   0   0   1 
```

# java - 为什么 JFrame 不会显示在 netbeans 应用程序上下文中？

> ID：12390423
> 
> 赞同：0
> 
> 时间：2012-09-12T14:26:06.363
> 
> 标签：java, swing, netbeans, jframe, visibility

我正在通过 Netbeans API 开发一个应用程序，我需要显示一个`JFrame`对象。我已经在一个独立的 Swing 应用程序中设计了这个框架，它似乎工作正常，但是当我想将它导入我的 Netbeans 应用程序并显示它时。它什么也不做。

据我所知，显示框架的代码很简单：

```
new CustomFrame().setVisible(true); 
```

我还尝试直接从 Netbeans 创建一个新框架，看看它如何与一个简单的框架反应。它导致了同样的问题。

Netbeans API 是否有其他一些要求来显示`JFrame`？

# java - 在 Java 中使用数组实现链表

> ID：12390430
> 
> 赞同：3
> 
> 时间：2012-09-12T14:26:28.283
> 
> 标签：java, arrays, data-structures, linked-list

我最近参加了一次面试，我被要求在 Java 中使用数组实现一个链表。我想不出一个体面的方法来做到这一点。有没有合法的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:29:02.493

You could (for example) have a linked-list of integers by putting your first data item in the element of the array, and the index of the next item in the second element. Although, this would restrict you to storing types that were compatible with/convertible to an index..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:32:10.200

当我们谈论我们习惯于在 Java 中查看列表的方式时，这个问题并没有真正的意义。

有一个接口`List`定义了`get(int index)`一个`set(int index, T value)`用于访问或设置列表数据的方法。

链表是一些 ListItem 类的实例，每个实例都指向下一个，而 LinkedList 本身通常只保存对第一个 ListItem 的引用。然后，如果您想要列表的第 3 个条目，您可以沿着引用“走”到第 3 个条目。

强制一个数组进入这个结构将消除 LinkedList 的整个概念。

# c++ - 我是否需要保护对 std::list（多线程）C++ 中不同键的访问

> ID：12390438
> 
> 赞同：0
> 
> 时间：2012-09-12T14:26:53.830
> 
> 标签：c++, multithreading, list

我有 2 个线程，一个将一对（“键/值”）插入一个列表，另一个从同一个列表中删除一对。现在我可以保证这些线程永远不会修改相同的“键/值”对。

我应该用互斥锁保护列表吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T14:29:00.737

一般来说，对任何 std 容器的任何类型的修改都应该受到绝对保护。

您可以考虑使用 pthread_rwlock，使用读取锁进行读取，使用写入锁进行写入。rwlocks 的好处是您可以同时拥有多个读取器，从而减少锁定争用。或者至少是一个 pthread_mutex。（当然，假设是 Linux）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:33:41.657

好的，这是一个链表，对吧？所以想象你从`A->C->D` 你开始删除`C`。它说“好的，我们需要重定向`A`的`next`ptr。但在此之前，你开始插入`B`。这会在没有被中断的情况下完成，你最终会得到`A->B->C->D`。然后删除继续，改变`A`而不是`B`。你最终得到`A->D`and `nothing->B->who knows?`。所以锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:31:48.420

听起来像需要互斥锁......有列表管理与插入和擦除功能一起使用，您不希望发生冲突。如果您知道列表管理的确切实现细节，您也许可以编写一些特殊代码，这样就不需要互斥锁，但这是您最简单/最安全的路线。从性能的角度来看，您可能只想锁定列表访问区域...即在一个线程中操作->锁定->插入->解锁，在另一个线程中锁定->删除->解锁->操作。

# php - 会员区 php session login 登出

> ID：12390439
> 
> 赞同：0
> 
> 时间：2012-09-12T14:26:58.633
> 
> 标签：php, session, password-protection

我在下面的模型中有一个会员区，但我不确定它是否安全。请告诉我您对此的建议和意见。

我创建了一个名为 members.html 的页面和名为 members.php 的成员区域页面

members.php 中的代码

```
<?
session_start();

if($_SESSION['user_level'] == 0)
{
include 'members.html';
}  

echo "<br /><a href=logout.php>Logout</a>";

?> 
```

在 logout.php

```
<?
session_start();
session_unset();
session_destroy();

header("location:home.html");
exit();
?> 
```

这种编码是否足以被称为受密码保护的页面？我应该添加什么以使其更安全？

谢谢！

编辑.......

编码不起作用。我注销并直接进入会员页面，该页面工作正常。我有点困惑，请帮助我提供代码。

在 checkuser.php 页面中，我有以下会话，

```
 $_SESSION['first_name'] = $first_name;

    $_SESSION['last_name'] = $last_name;

    $_SESSION['email_address'] = $email_address;

    $_SESSION['user_level'] = $user_level; 
```

我有用户在变量 $username 和 $password 中输入的用户名和密码。

编辑..........

我找到了以下答案，现在正在工作。但我不确定这是否正确。

```
if (isset($_SESSION['user_id']))
{
if($_SESSION['user_level'] == 0){
include 'members.html';
}
}
else
{
header("Location: home.html");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:29:50.950

您的会员区页面看起来完全不受保护。我在下面的代码中没有看到任何会话检查。登录用户有哪些会话变量？

```
<?
session_start();

include 'members.html';

echo "<br /><a href=logout.php>Logout</a>";
?> 
```

# android - android intent.getAction() returning null

> ID：12390444
> 
> 赞同：0
> 
> 时间：2012-09-12T14:27:11.437
> 
> 标签：android, android-intent

I've an app that scans qrcodes and nfc tags. when I scan a qrcode I create an intent, put some strings in as extras(contents of qrcode), set the `setAction` to `com.carefreegroup.QRCODE_ACTION`, which is a custom action and then call `startActivity(intent)`.

In the receiving activity the `intent.getAction()` is returning null. I've set an intent filter for the receiving activity in the manifest with an action the same as the calling activity.

Why is the getAction null?

```
public static final String CUSTOM_QRCODE_ACTION = "com.carefreegroup.QRCODE_ACTION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.qrloggedinmain);
        nfcscannerapplication = (NfcScannerApplication) getApplication();

        ////////////////////////get company options///////////////////////////////
        SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
        tagTouchInterval = appSharedPrefs.getString("10", null);
        Long tagtouchinteval = new Long(tagTouchInterval);
        companyOptionTime = 1000* 60 * tagtouchinteval ;

        Button ScanQrCode = (Button)findViewById(R.id.buttonqrscanner);

        ScanQrCode.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.e(TAG, "onclicked scan");

                Intent intent = new Intent(
                        "com.google.zxing.client.android.SCAN");
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

                startActivityForResult(intent, 0);

            }
        });

    }// end of onCreate

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        Log.e(TAG, "in onActivityResult");
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                Log.e(TAG, "result ok");
                ///////////////////////////////
                tagScanTime  = new DateTime();
                thirtySecsAgo = tagScanTime.minus(30000);
                DateTimeFormatter df = DateTimeFormat.forPattern("dd/MMM/yy h:mmaa");
                String formattedScanTime = df.print(tagScanTime);
                Log.e(TAG, "formatted tag scan time = " + formattedScanTime);
                String formattedthirtysecsAgoTime = df.print(thirtySecsAgo);
                Log.e(TAG, "formatted thity secs ago time = " + formattedthirtysecsAgoTime);

                String contents = intent.getStringExtra("SCAN_RESULT");
                Toast.makeText(this, "scanner has found " + contents,
                        Toast.LENGTH_LONG).show();

                String[] splitPayload = contents.split("@");

                type = splitPayload[0];
                compId = splitPayload[1];
                personId = splitPayload[2];
                personName = splitPayload[3];

                Intent QRDataIntent = new Intent(this,
                        NfcscannerActivity.class);

                intent.putExtra("type", type);
                intent.putExtra("compId", compId);
                intent.putExtra("personId", personId);
                intent.putExtra("personName", personName);
                intent.setAction(CUSTOM_QRCODE_ACTION);
                intent.setType("text/plain");
                startActivity(QRDataIntent); 
```

.

```
String intentAction = intent.getAction();

 if ( intentAction.equalsIgnoreCase(QRCODE_ACTION)) {

            Log.e(TAG, "QR Code scanned");
            String _type = intent.getStringExtra("type");
            String _compId = intent.getStringExtra("compId");
            String _personId = intent.getStringExtra("personId");
            String _personName = intent.getStringExtra("personName");

            Log.e(TAG, "payload = " + _type + " " + _compId + " " + _personId + " " + _personName); 
```

.

```
 <activity android:name=".NfcscannerActivity"  >
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="text/plain" />
            </intent-filter>

            <intent-filter>
                <action android:name="com.carefreegroup.QRCODE_ACTION" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="text/plain" />

            </intent-filter>
        </activity> 
```

**[UPDATE1]** This is the whole activity that uses the ZXing library to scan the qrcode. It then sets the captured data in the intent as extras, then explicitly calls the next activity with startActivity().

```
package com.carefreegroup;

import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.ContentValues;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class QrLoggedIn extends Activity{

    private static final String TAG = QrLoggedIn.class.getSimpleName();
    private NfcScannerApplication nfcscannerapplication;
    private String tagTouchInterval;
    private long companyOptionTime;
    private DateTime tagScanTime;
    private DateTime thirtySecsAgo;
    private Boolean carerLoggedIn;
    private String type;
    private String personId;
    private String personName;
    private String compId;
    private Cursor cursor;
    static final String CARER_TYPE = "2";  
    static final String CLIENT_TYPE = "1";
    private final String IN = "in";
    private final String OUT = "out";
    private ContentValues values;
    public static final String CUSTOM_QRCODE_ACTION = "com.carefreegroup.QRCODE_ACTION";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.qrloggedinmain);
        nfcscannerapplication = (NfcScannerApplication) getApplication();

        ////////////////////////get company options///////////////////////////////
        SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
        tagTouchInterval = appSharedPrefs.getString("10", null);
        Long tagtouchinteval = new Long(tagTouchInterval);
        companyOptionTime = 1000* 60 * tagtouchinteval ;

        Button ScanQrCode = (Button)findViewById(R.id.buttonqrscanner);

        ScanQrCode.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.e(TAG, "onclicked scan");

                Intent intent = new Intent(
                        "com.google.zxing.client.android.SCAN");
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

                startActivityForResult(intent, 0);

            }
        });

    }// end of onCreate

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        Log.e(TAG, "in onActivityResult");
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                Log.e(TAG, "result ok");
                ///////////////////////////////
                tagScanTime  = new DateTime();
                thirtySecsAgo = tagScanTime.minus(30000);
                DateTimeFormatter df = DateTimeFormat.forPattern("dd/MMM/yy h:mmaa");
                String formattedScanTime = df.print(tagScanTime);
                Log.e(TAG, "formatted tag scan time = " + formattedScanTime);
                String formattedthirtysecsAgoTime = df.print(thirtySecsAgo);
                Log.e(TAG, "formatted thity secs ago time = " + formattedthirtysecsAgoTime);

                String contents = intent.getStringExtra("SCAN_RESULT");
                Toast.makeText(this, "scanner has found " + contents,
                        Toast.LENGTH_LONG).show();

                String[] splitPayload = contents.split("@");

                type = splitPayload[0];
                compId = splitPayload[1];
                personId = splitPayload[2];
                personName = splitPayload[3];

                Intent QRDataIntent = new Intent(this,
                        NfcscannerActivity.class);

                intent.putExtra("type", type);
                intent.putExtra("compId", compId);
                intent.putExtra("personId", personId);
                intent.putExtra("personName", personName);
                intent.setAction(CUSTOM_QRCODE_ACTION);
                intent.setType("text/plain");
                startActivity(QRDataIntent);

            } else if (resultCode == RESULT_CANCELED) {
                // Handle cancel
                Log.e(TAG, "There's a problem with the scan. Scan result failed");
                Toast.makeText(this, "There's a problem with the scan. Scan result failed",
                        Toast.LENGTH_LONG).show();
            }
        }
    }

} 
```

.

This is a snippet from the receiving activity.

```
 String intentAction = intent.getAction();

    Log.e(TAG, "action of intent = " + intentAction);

    if( intentAction.equalsIgnoreCase(NFC_ACTION)){

    Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

    tagId = bytesToHexString(tag.getId());

    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {

        Log.e(TAG, "NFC Tag scanned");
        // //////////////////////////////////////////////////////////////////////
        // get the messages from the intent
        Parcelable[] rawMsgs = intent
                .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if (rawMsgs != null) {
            msgs = new NdefMessage[rawMsgs.length];
            for (int i = 0; i < rawMsgs.length; i++) {
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        }
    } else {
        Log.e(TAG, "ndef not discovered!!!!!!");
    }

    // ////////////////////////////////////////////////////////////////////////////////////
    // process the msgs array
    for (int i = 0; i < msgs.length; i++) {

        NdefRecord[] records = msgs[i].getRecords();
        Log.e(TAG, "ndefrecord has a length of " + records.length);

        tr = parse(records[i]);
        payload = tr.getText();

        Log.e(TAG, "TextRecord.text = " + tr.getText());

    }

    // /////////////////////////////////////////////////// split the payload
    // using delimiter. assign value at position[0] to tagType
    String[] splitPayload = payload.split("¦");

    tagType = splitPayload[0];
    tagCompany = splitPayload[1];
    tagPerson = splitPayload[2];
    tagUserName = splitPayload[3];

    }else if ( intentAction.equalsIgnoreCase(QRCODE_ACTION)) {

        Log.e(TAG, "QR Code scanned");
        String _type = intent.getStringExtra("type");
        String _compId = intent.getStringExtra("compId");
        String _personId = intent.getStringExtra("personId");
        String _personName = intent.getStringExtra("personName");

        Log.e(TAG, "payload = " + _type + " " + _compId + " " + _personId + " " + _personName); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T18:39:02.640

找到了！

在这段代码中：

```
Intent QRDataIntent = new Intent(this, NfcscannerActivity.class);

intent.putExtra("type", type);
intent.putExtra("compId", compId);
intent.putExtra("personId", personId);
intent.putExtra("personName", personName);
intent.setAction(CUSTOM_QRCODE_ACTION);
intent.setType("text/plain");
startActivity(QRDataIntent); 
```

你把额外的东西设置在变量上`intent`，然后你`startActivity()`用变量调用`QRDataIntent`！它没有动作集，也没有额外内容！

试试这个：

```
Intent QRDataIntent = new Intent(this, NfcscannerActivity.class);

QRDataIntent.putExtra("type", type);
QRDataIntent.putExtra("compId", compId);
QRDataIntent.putExtra("personId", personId);
QRDataIntent.putExtra("personName", personName);
QRDataIntent.setAction(CUSTOM_QRCODE_ACTION);
QRDataIntent.setType("text/plain");
startActivity(QRDataIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T07:00:44.007

只需使用

```
Intent intent = new Intent(this, ClazzName.class);
intent.setAction("action_name"); 
```

# c# - C# 中的打开文件对话框

> ID：12390451
> 
> 赞同：6
> 
> 时间：2012-09-12T14:27:29.847
> 
> 标签：c#, winforms, dialog, label

如何从打开文件对话框中获取结果（即文件名及其位置）？

我的代码：

```
private void selectFileButton_Click( object sender, EventArgs e ) {
    var selectedFile = selectFileDialog.ShowDialog();
    //label name = fileName
    fileName.Text = //the result from selectedFileDialog
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:31:38.003

```
private void selectFileButton_Click( object sender, EventArgs e ) 
{
    Stream fileStream = null;
    //Update - remove parenthesis
    if (selectFileDialog.ShowDialog() == DialogResult.OK && (fileStream = selectFileDialog.OpenFile()) != null)
    {
        string fileName = selectFileDialog.FileName;
        using (fileStream)
        {
           // TODO
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T14:30:44.087

OpenFileDialog 类有一个 FileName 属性。

通常，您要确保用户没有取消对话框：

```
using (var selectFileDialog = new OpenFileDialog()) {
  if (selectFileDialog.ShowDialog() == DialogResult.OK) {
    fileName.Text = selectFileDialog.FileName;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:30:54.183

```
if(selectFileDialog.ShowDialog())
{
  // use the methods and properties on selectFileDialog
  fileName.Text = selectFileDialog.FileName; // Assumes only one file was selected
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:31:15.900

您可以尝试使用此代码

```
if(selectFileDialog.ShowDialog() == DialogResult.OK)
{
        var result = selectFileDialog.FileName; 

        if((myStream = selectFileDialog.OpenFile())!= null)
        {
            // Insert code to read the stream here.
            ..........
            myStream.Close();
        }
    } 
```

# php - PHP用一个字符串调用多个方法

> ID：12390454
> 
> 赞同：0
> 
> 时间：2012-09-12T14:27:37.633
> 
> 标签：php, reflection

我有以下字符串：

```
$str = "methodA()->methodB()->methodC" 
```

我想在一个对象上调用那个“链”

```
$obj->$str 
```

我目前正在与 ()-> 拆分并一一调用，但必须有更好的方法。

我怎样才能在一条线上调用它？谢谢！

编辑：更多上下文信息：

我为 symfony 1.4 创建了一个 Doctrine Behavior，以便能够使用 Zend Lucene 从模式中搜索某些表。

简而言之，我需要一种方式来表达“要获取可搜索字段，您必须调用 methodA()->methodB()->methodC()”的行为

EDIT2：也许我不够清楚。$obj 和 $str 是在运行时确定的，因此您的某些建议不适用。

EDIT3：如果您想知道，我目前正在这样做：

```
 <?php
  $chain = explode("()->",$str);
  $method = array_shift($chain);
  $value = $obj->$method();
  foreach($chain as $method){
    $value = $value->$method();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:36:33.537

在写下我对主要问题的评论后，我想到了一个可能的解决方案，虽然有点冗长和手动（你必须做出尽可能多的案例陈述，因为你对链式方法的数量有合理的期望）。

```
function chain_execute($obj, $str) {
    $chain = explode("->",$str);
    $chain = array_map('trim', $chain);
    $chain_count = count($chain);
    switch($chain_count) {
        case 1:
            return $obj->{$chain[0]}();
            break;
        case 2:
            return $obj->{$chain[0]}()->{$chain[0]}();
            break;
        case 3:
            return $obj->{$chain[0]}()->{$chain[1]}()->{$chain[2]}();
            break;
        // etc.
        default:
            // not a value you were expecting
            throw new Exception('Invalid number of methods chained: ' . $chain_count);
            break;
    }
} 
```

用法是：

```
$result = chain_execute($obj, "methodA->methodB->methodC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:29:08.477

我通常建议不要使用[eval](http://php.net/manual/en/function.eval.php)，但是...

```
eval("$obj->$str;"); 
```

不过，我会重新评估您的情况，并且可能会按预期直接一个接一个地调用每个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:30:11.737

你的方法已经很好但是......试试

```
$str = "{$obj->methodA()->methodB()->methodC()}"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:30:52.930

那是一种邪恶的做法。

你能提供（我很好奇）一个用例吗？

您可以连续使用[call_user_func()](http://php.net/manual/en/function.call-user-func.php)，您可以为此编写一个辅助方法，该方法能够解析您的符号并调用链。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:39:00.323

下面的工作吗？

```
$str = $methodA()->$methodB()->$methodC(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T19:09:59.847

我的回答假设您可以访问方法（methodA、methodB 和 methodC），可以编辑它们，并且每个方法都属于 $obj 是其实例的类。

更新每个方法以返回类的实例，假设它们不返回任何原始数据类型，如 int、bool、string 或其他，这将起作用：

```
<?php
class Example {
    public function methodA() {
        echo "method a\n";
        return $this;
    }
    public function methodB() {
        echo "method b\n";
        return $this;
    }
    public function methodC() {
        echo "method c\n";
        return $this;
    }
}
?> 
```

现在实例化 Example，存储到 $obj 并连续调用你的方法：

```
<?php
$obj = new Example();
$obj->methodA()->methodB()->methodC();
?> 
```

这将输出：

```
method a
method b
method c 
```

# visual-studio-2010 - 安装 Visual Studio 2010 SP1 TeamCity Agent 后无法识别 NAnt Buildrunner

> ID：12390455
> 
> 赞同：1
> 
> 时间：2012-09-12T14:27:38.210
> 
> 标签：visual-studio-2010, teamcity, nant, teamcity-5.0

我最近将我的一个 TeamCity 代理更新到 Visual Studio 2010 SP1。从那时起，此代理不再支持几个 Buildrunner（尤其是 NAnt-Runner）！我可以在另一个代理上重现这种行为。这发生在安装服务包 1 之后。我已将代理升级到没有 sp1 的 Visual Studio 2010，并且所有 buildrunners 仍然可用。我比较了代理的环境变量，但我找不到任何显着差异。

希望你能给我一些答案！

编辑：没有 VS2010 SP1 的代理具有以下 Build-Runners：
Ant。重复查找器 (.NET)、重复查找器 (Java)、FxCop、Inspections、Ipr、Maven2、**MSBuild**、**NAnt**、Rake、命令行、**sln2003**、**sln2005**、**sln2008**

升级后可用的 Buildrunners：
Ant、Duplicates finder (.NET)、Duplicates finder (Java)、FxCop、Inspections、Ipr、Maven2、Rake、Command Line

Edit2：
代理日志的摘录：
INFO - gent.msBuild.MSBuildRunnerBase - Runner MSBuild 未注册：需要 Microsoft .Net Framework 2.0/3.5/4.0 或 Mono
信息 - ver.agent.nant.NAntBuildRunner - Runner NAnt 是未注册：需要 Mono 或 Microsoft .Net Framework 1.1 或 2.0
信息 - ver.agent.nant.NAntBuildRunner - Runner sln2003 未注册：需要 Mono 或 Microsoft .Net Framework 1.1 或 2.0
信息 - gent.msBuild.MSBuildRunnerBase - Runner sln2005 未注册：需要 Microsoft .Net Framework 2.0/3.5/4.0 或 Mono
信息 - gent.msBuild.MSBuildRunnerBase - Runner sln2008 未注册：需要 Microsoft .Net Framework 2.0/3.5/4.0 或 Mono

他再也认不出 .net 框架了。我检查了安装了哪些版本：.Net 2.0 SP2、.Net 3.0 SP2、.Net 3.5 SP1 和 .Net 4 Client/Extended

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:42:10.133

我想我通过在 agent.properties 中添加以下几行来解决我的问题：

```
system.DotNetFramework2.0
system.DotNetFramework3.5
system.DotNetFramework4.0
env.MSBuild=%system.DotNetFramework3.5_x86_Path% 
```

现在，我的代理具有与升级前相同的构建运行程序 :) 似乎 teamcity 5.0-agents 的自动检测无法处理 Visual Studio 2010 Sp1

# java - I keep getting the following error message java.lang.IllegalStateException: Buffers have not been created

> ID：12390457
> 
> 赞同：2
> 
> 时间：2012-09-12T14:27:44.057
> 
> 标签：java, swing, exception, swingworker, netbeans-platform

I keep getting the following error message java.lang.IllegalStateException: Buffers have not been created. This is the first time ever I came across this and don't know how to get rid of it safely. I researched this error message and the only solution I came accross was to use the following:

createBufferStrategy(2);

From my understaning, Java is double buffering by default and I should not need the line above. (By the way, I did not mess with the buffers at all prior to the error). Some say that this message may be shown if you are rendering something outside of the EDT.

The following is just a sample code I wrote to demonstrate what my application does. First of all, the application is written on the NetBeans Platform (RCP). BarcodeInput class receives the data that comes in via a Barcode Scanner connected to a serial port, than a worker BarcodeProcessWorker processes that data further. The way the code is shown below works great without giving me error messages, but if I use the SwingUtilities.invokeLater I get the error message. It does not make any sense to me as I thought that I sould be using the SwingUtilities.invokeLater from a background thread to updated the GUI as all updates should be performed on the EDT.

```
 public final class MainTopComponent extends TopComponent {//NetBeans TopComponent

        public MainTopComponent() {        
            initComponents();//The MainJPanel is created here
            ...
        }

    }

    public class MainJPanel extends javax.swing.JPanel{

        private SerialPortConnection spc;

        public MainJPanel() {
            initComponents();//Paints GUI components
            initSerialPortConnection();//Initialize the Serial Port (SerialPortConnection spc) for the Barcode Scanner
            initBarcode();
        }

        private void initBarcode(){
            BarcodeInput bsi = new BarcodeInput(bspc);
        }

    }

    public class BarcodeInput implements BarcodeSerialPortListener{

        private BarcodeSerialPortConnection bspc;
        private BarcodeJDialog barcodeJDialog;

        public BarcodeInput(BarcodeSerialPortConnection bspc) {
            this.bspc = bspc;
            barcodeJDialog = new barcodeJDialog();//This is just a regular JDialog with some labels displayed and among them is a label called labelBarcode
        }

        public void addToBarcodeSerialPortListenerList() {
            bspc.addToBarcodeSerialPortListenerList(this);
        }

        public boolean isBarcodeJDialogVisible(){
            return barcodeJDialog.isVisible();
        }

        public void showBarcodeJDialog(){
            barcodeJDialog.setVisible(true);
        }

        public void hideBarcodeJDialog(){
            barcodeJDialog.setVisible(false);
        }

        public void setTextOfLabelBarcode(String s){
            barcodeJDialog.setTextOfLabelBarcode(s);
        }

        @Override
        public void stringReveivedFromSerialPort(String serialPortString) {//Overrides the method in the interface BarcodeSerialPortListener
            BarcodeProcessWorker bpWorker = new BarcodeProcessWorker(this, serialPortString);
            bpWorker.execute();//This swing worker class processes the received serial port string
        }

    }

public class BarcodeProcessWorker extends SwingWorker<Void,Void>{

    private BarcodeInput bi;
    private String serialPortString;

    public BarcodeProcessWorker(BarcodeInput bi, String serialPortString){
        this.bi = bi;
        this.serialPortString = serialPortString;
    }

    @Override
    protected Void doInBackground() throws Exception{

        if("SHOW".contains(serialPortString)){

        //First I remove the SHOW from the serialPortString and whatever is left is the data:
        //For example if the barcode had SHOW12345, I end up with 12345 as data. SHOW is just a command
        //that tells my application to display the BarcodeJDialog, where HIDE tells it to hide the BarcodeJDialog.

            ShowBarcode sb = new ShowBarcode(bi, barcodeData);
            sb.show();

        }else if("HIDE".equals(serialPortString){

            bi.hideBarcodeJDialog();//WORKS LIKE THIS, DOES NOT WORK AS SHOWN BELOW

            //If I use the following here, I get that error message
            //  SwingUtilities.invokeLater(new Runnable(){
            //      @Override
            //      public void run(){
            //          bi.hideBarcodeJDialog();
            //      }
            //  });

        }

        return null;
    }

}

public class ShowBarcode {

    private BarcodeInput bi;
    private String barcodeData;

    public ShowBarcode(BarcodeInput bi, String barcodeData){
        this.bi = bi;
        this.barcodeData = barcodeData;
    }

    public void show(){

        bi.setTextOfLabelBarcode(barcodeData);//Set text as 12345
        bi.showBarcodeJDialog();//WORKS LIKE THIS, DOES NOT WORK AS SHOWN BELOW

        //If I use the following here, I get that error message
        //  SwingUtilities.invokeLater(new Runnable(){
        //      @Override
        //      public void run(){
        //      bi.setTextOfLabelBarcode(barcodeData);//Set text as 12345
        //      bi.showBarcodeJDialog();
        //      }
        //  });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:20:05.580

> 我认为我应该使用`SwingUtilities.invokeLater()`后台线程来更新 GUI，因为所有更新都应该在 EDT 上执行。

不，`doInBackground()`通常会调用以下两种方法中的一种或两种，如下[例](https://stackoverflow.com/a/4637725/230513)所示：

*   `publish()`：发布的值应由`process()`在 EDT 上运行的 处理。

*   `setProgress()`：新值在 EDT 上传达给任何已注册的`PropertyChangeListener`.

如果没有令人信服的理由来改变，我只会使用默认的`JComponent`缓冲策略。

# javascript - jQuery doesn't hide content div of the url in $hgroup.attr('data-project')

> ID：12390459
> 
> 赞同：0
> 
> 时间：2012-09-12T14:27:50.017
> 
> 标签：javascript, jquery, css, wordpress

If you click on any of the images project text and image appears however if you click on 'Back To Portfolio' or 'Portfolio' or 'Contact' the project content remains on the left hand side of the website frame rather than disappearing:

[http://www.janinejauvel.com/test/](http://www.janinejauvel.com/test/)

```
 /* Launching a project
     ------------------------------------------------- */

    $('hgroup').click(function() {

        // scroll to top
        $.scrollTo(0, 250);

        $hgroup     = $(this);
        // hide contact 

        if ($('#contact').is(':visible')) {

            $('#contact').stop().slideUp({
                duration: 250, 
                easing: 'easeInOutCubic'
            });
        }

        // show the loading gif in the container
        $('#slideshow-container').html('<div class="loading"><img src="/assets/img/loading.gif" alt="loading"/></div>');

        $('section#work').stop().animate({
            'margin-top' : '+=' +($(window).height() - 55) + 'px'
        }, 700, 'easeInOutCubic', function () {

            // load the project into the slideshow container div
            $('#slideshow-container').load('' + $hgroup.attr('data-project') + ' #content', function() {
                // bind slideshow
                    slideshow.render();
                    $('section#work').css('margin-top', '0px');
            });

        });

        return false;

    });

}, 

this.folioLinkShow  = function() {

    if ($('.slide').length > 1) {

        $('#portfolio-catcher').hover(function() {

            $('nav#show-projects div').slideDown(200);

        }, function () {

            $('nav#show-projects div').slideUp(200);

        });

    } else {

        $('nav#show-projects').unbind();

    }
}, 

this.loadImages     = function() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:35:37.280

```
$('a selector for your buttons').click(function() {
    $('#slideshow-container').hide();
}); 
```

# mysql - Update based on select to find duplicate and smaller than

> ID：12390461
> 
> 赞同：0
> 
> 时间：2012-09-12T14:27:52.383
> 
> 标签：mysql, select, comparison

I have a table named content with the following fields: id (key), title, alias, state and hits.

There are many duplicated records (different ids, but same title and same alias). The "state" field controls if a record is Published (1) or Unpublished (0).

At the moment I was able to unpublish duplicated records:

```
UPDATE content
SET content.state = 0
WHERE content.alias IN
(
  SELECT alias FROM
  (
    SELECT `alias`, COUNT(*) `tot`
    FROM `content`
    GROUP BY `alias`
    HAVING `tot` > 1
  ) AS tmptable
) 
```

but this doesn't take into account which record has the greater "hits".

My goal is to unpublish duplicated records with smaller hits.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:07:45.930

我建议使用此查询：

```
UPDATE content
SET content.state = 0
WHERE content.alias IN
(
    SELECT DISTINCT c1.`alias`
    FROM `content` c1, `content` c2
    WHERE c1.`id` <> c2.`id`
    AND c1.`alias` = c2.`alias`
    AND c1.`hits` <= c2.`hits`
) AS tmptable 
```

子查询将选择命中率较小的重复别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:20:34.203

```
UPDATE content
SET content.state = 0
WHERE content.id NOT IN 
(
  SELECT DISTINCT a.id
  FROM content AS a
  LEFT JOIN content b ON b.alias = a.alias AND a.hits < b.hits
  WHERE b.id IS NULL
) 
```

编辑：几乎和乔斯林写的一样。

# android - Android Proguard 未删除所有日志消息

> ID：12390466
> 
> 赞同：23
> 
> 时间：2012-09-12T14:28:13.017
> 
> 标签：android, logging, obfuscation, proguard

我想创建一个混淆的 android 应用程序。我为此使用 ProGuard。我想自动删除所有 Log.* 消息。我怎样才能做到这一点？我找到[了这篇](https://stackoverflow.com/questions/4435773/android-proguard-removing-all-log-statements-and-merging-packages)文章，但我仍然得到它们。（我使用反编译器来检查混淆）。
proguard-project.txt 如下：

```
-injars       libs/In.jar
-outjars      libs/Out.jar
#-libraryjars  <java.home>/lib/rt.jar
-libraryjars C:/Users/thomas/android-sdks/platforms/android-7/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-renamesourcefileattribute SourceFile
-keepattributes Exceptions,InnerClasses,Signature,Deprecated,
                SourceFile,LineNumberTable,*Annotation*,EnclosingMethod

-keep public class * {
    public protected *;
}

-keepclassmembernames class * {
    java.lang.Class class$(java.lang.String);
    java.lang.Class class$(java.lang.String, boolean);
}

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
}
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** e(...);
} 
```

任何帮助，将不胜感激。
谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-12T21:34:06.180

这只会删除所有调试`Log.d(TAG, "...");`和错误`Log.e(TAG, "...")`调用：

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** e(...);
} 
```

要删除所有日志调用，只需使用以下命令：

```
-assumenosideeffects class android.util.Log { *; } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-28T23:47:53.770

默认的 android Proguard 配置禁用优化。要启用它，请在项目的 project.properties 文件中使用 proguard-android-optimize.txt 而不是 proguard-android.txt

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-17T20:42:37.297

对于任何似乎无法将头围在职业后卫身边的人，您必须确保做两件事。

1：来自@yorkw

```
-assumenosideeffects class android.util.Log { *; } 
```

2：来自@Gallal

在项目的 project.properties 文件中使用：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt 
```

代替

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

这是因为您有两个“开箱即用”的 proguard 选项，因为它们包含在 sdk 中

`android-adk > tools > proguard`

其中包含两个文件：

```
proguard-android.txt
proguard-android-optimize.txt 
```

希望这可以帮助其他人。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-09-09T15:23:56.683

如果你有 Android Studio，你必须修改`build.gradle`你的主应用程序。

在您的 gradle 文件中，您必须将 的用法指定`proguard-android-optimize.txt`为默认文件。

```
buildTypes {
    release {
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'

        // With the file below, it does not work!
        //proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
} 
```

实际上，在默认`proguard-android.txt`文件中，使用两个标志禁用优化：

```
-dontoptimize
-dontpreverify 
```

该`proguard-android-optimize.txt`文件没有添加这些行，所以现在`assumenosideeffects`可以工作了。

然后，如 Eclipse 或其他答案中所述，您只需将以下行添加到您的主 proguard 文件中：

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** e(...);
} 
```

# android - 一个大表单需要几个步骤才能完成，如何在android中实现呢？

> ID：12390467
> 
> 赞同：0
> 
> 时间：2012-09-12T14:28:13.170
> 
> 标签：android, android-activity, state

在我的 android 应用程序中，有一个很大的表单，它分成几个页面。用户可以上一页或下一页，输入的内容不会丢失。

我试图`Activity`为每个页面使用几个 s，但我发现很难保留输入的文本。

在这里使用合适`Activity`吗？或者我应该使用`Fragment`或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:35:08.870

这取决于。您可以轻松地为每个页面使用自定义布局，并使用 ViewAnimator/ViewSwitcher 在它们之间切换。也就是说，如果您有不需要片段好处的非常简单的表单。

为每个页面使用 Activity 是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:04:48.947

我不会为此使用单独`Activity`的 s 或`Fragment`s。它们都相对孤立，并且在不再被查看时可能会丢失数据。

我可能会[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)为此创建一个，它允许您在`View`s 之间滑动。那里有一些示例代码可以显示它是如何使用的。

# c# - Multithreading slower than Singlethreading

> ID：12390468
> 
> 赞同：10
> 
> 时间：2012-09-12T14:28:15.333
> 
> 标签：c#, multithreading, performance

I have the following Code (complete content of 'Program.cs' of console application). The single threaded execution of 'countUp' till 'countUp4' takes 13 sec., the multi threaded execution 21 sec..

I have a Intel Core i5-2400 @ 3.10 GHz, 8 GB Ram, Windows 7 64 Bit. So why is the multi threaded execution slower than the single threaded one?

Is multithreading just useful for not blocking the main routine of simple c# applications? When does multithreading give me an advantage in execution speed?

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        static int counter = 0;
        static int counter2 = 0;
        static int counter3 = 0;
        static int counter4 = 0;

        static void Main(string[] args)
        {
            Console.WriteLine("Without multithreading:");
            Console.WriteLine("Start:" + DateTime.Now.ToString());

            countUp();
            countUp2();
            countUp3();
            countUp4();

            Console.WriteLine("");
            Console.WriteLine("With multithreading:");
            Console.WriteLine("Start:" + DateTime.Now.ToString());

            Thread thread1 = new Thread(new ThreadStart(countUp));
            thread1.Start();
            Thread thread2 = new Thread(new ThreadStart(countUp2));
            thread2.Start();
            Thread thread3 = new Thread(new ThreadStart(countUp3));
            thread3.Start();
            Thread thread4 = new Thread(new ThreadStart(countUp4));
            thread4.Start();

            Console.Read();
        }

        static void countUp()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter++;
            }

            Console.WriteLine(counter.ToString());
            Console.WriteLine(DateTime.Now.ToString());
        }

        static void countUp2()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter2++;
            }

            Console.WriteLine(counter2.ToString());
            Console.WriteLine(DateTime.Now.ToString());
        }

        static void countUp3()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter3++;
            }

            Console.WriteLine(counter3.ToString());
            Console.WriteLine(DateTime.Now.ToString());
        }

        static void countUp4()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter4++;
            }

            Console.WriteLine(counter4.ToString());
            Console.WriteLine(DateTime.Now.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-12T14:37:48.497

这是您可能看不到的原因：[错误共享](http://msdn.microsoft.com/en-us/magazine/cc872851.aspx)，因为这 4 个整数在内存中都并排放置。

**更新 - 前几年的 MSDN 杂志现在仅作为`.chm`文件提供 - 所以您必须[从此处获取 MSDN Mag 的“2008 年 10 月”版本](https://msdn.microsoft.com/magazine/msdn-magazine-issues)，下载后，您必须记住右键单击并“取消阻止”文件Windows 资源管理器中的文件属性对话框（其他操作系统可用！），然后再打开它。您正在寻找由 Stephen Toub、Igor Ostrovsky 和 ​​Huseyin Yildiz 撰写的名为“.Net Matters”的专栏**

这篇文章（通读 - 很棒）展示了内存中并排的值如何在更新时最终导致阻塞，因为它们都位于同一缓存行上。这是您无法从 .Net 代码中禁用的非常低级的阻塞。但是，您可以强制将数据间隔更远，以保证或至少增加每个值位于不同缓存行上的可能性。

这篇文章使用了数组——但它有可能在这里影响到你。

要遵循以下建议，您可以通过稍微更改代码来证明/反驳这一点：

```
class Program 
{ 
    class CounterHolder {
       private int[] fakeInts = new int[1024];
       public int Value = 0;
    }
    static CounterHolder counter1 = new CounterHolder(); 
    static CounterHolder counter2 = new CounterHolder(); 
    static CounterHolder counter3 = new CounterHolder(); 
    static CounterHolder counter4 = new CounterHolder(); 
```

`Value`然后修改您的线程函数以操作每个计数器持有者上的公共字段。

我已经使这些数组比他们需要的要大得多，希望它能证明它更好:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T15:05:59.483

Andreas Zaltan 就是答案。拿代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Diagnostics;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        //static int counter = 0;
        //static int counter2 = 0;
        //static int counter3 = 0;
        //static int counter4 = 0;

        class CounterHolder
        {
            private int[] fakeInts = new int[1024];
            public int Value = 0;
        }
        static CounterHolder counter1 = new CounterHolder();
        static CounterHolder counter2 = new CounterHolder();
        static CounterHolder counter3 = new CounterHolder();
        static CounterHolder counter4 = new CounterHolder(); 

        static void Main(string[] args)
        {
            Console.WriteLine("Without multithreading:");
            Console.WriteLine("Start: " + DateTime.Now.ToString());

            Stopwatch sw = new Stopwatch();
            sw.Start();

            countUp();
            countUp2();
            countUp3();
            countUp4();

            sw.Stop();
            Console.WriteLine("Time taken = " + sw.Elapsed.ToString());

            Console.WriteLine("\nWith multithreading:");
            Console.WriteLine("Start: " + DateTime.Now.ToString());
            sw.Reset();
            sw.Start();

            Task task1 = Task.Factory.StartNew(() => countUp());
            Task task2 = Task.Factory.StartNew(() => countUp2());
            Task task3 = Task.Factory.StartNew(() => countUp3());
            Task task4 = Task.Factory.StartNew(() => countUp4());
            var continuation = Task.Factory.ContinueWhenAll(new[] { task1, task2, task3, task4 }, tasks =>
            {
                Console.WriteLine("Total Time taken = " + sw.Elapsed.ToString());
            });
            Console.Read();
        }

        static void countUp()
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (double i = 0; i < 1000000000; i++)
                counter1.Value++;
            sw.Stop();
            Console.WriteLine("Task countup took: " + sw.Elapsed.ToString());
        }

        static void countUp2()
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (double i = 0; i < 1000000000; i++)
                counter2.Value++;
            sw.Stop();
            Console.WriteLine("Task countUP2 took: " + sw.Elapsed.ToString());
        }

        static void countUp3()
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (double i = 0; i < 1000000000; i++)
                counter3.Value++;
            sw.Stop();
            Console.WriteLine("Task countUP2 took: " + sw.Elapsed.ToString());
        }

        static void countUp4()
        {
            Stopwatch sw = new Stopwatch();
            sw.Start();
            for (double i = 0; i < 1000000000; i++)
                counter4.Value++;
            sw.Stop();
            Console.WriteLine("Task countUP2 took: " + sw.Elapsed.ToString());
        }
    } 
} 
```

用整数运行它，你会得到多线程版本的运行速度稍微慢一些。

```
Serial: 13.88s
Multi-threaded: 14.01 
```

使用上面的建议运行它，您会得到以下信息

![在此处输入图像描述](../Images/cc6cc18af3fb2302202b615724686fb5.png)

为了清楚起见，我已经发布了这个......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:45:55.327

我用秒表重写了你的代码。在我的计算机上，多线程比单线程更快（以下时间）。

此外，您需要在线程上调用**Join**方法以确保它们在退出程序之前完成。

没有多线程时经过的时间:: 00:00:21.6897179

多线程经过的时间:: 00:00:14.7893703

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Diagnostics;

namespace ConsoleApplication1
{
    class Program
    {
        static int counter = 0;
        static int counter2 = 0;
        static int counter3 = 0;
        static int counter4 = 0;

        static void Main(string[] args)
        {
            Stopwatch stopwatch = new Stopwatch();
            stopwatch.Start();

            countUp();
            countUp2();
            countUp3();
            countUp4();

            stopwatch.Stop();
            Console.WriteLine("Time elapsed without multithreading:: {0}",
        stopwatch.Elapsed);

            stopwatch.Reset();
            stopwatch.Start();

            Thread thread1 = new Thread(new ThreadStart(countUp));
            thread1.Start();
            Thread thread2 = new Thread(new ThreadStart(countUp2));
            thread2.Start();
            Thread thread3 = new Thread(new ThreadStart(countUp3));
            thread3.Start();
            Thread thread4 = new Thread(new ThreadStart(countUp4));
            thread4.Start();

            thread1.Join();
            thread2.Join();
            thread3.Join();
            thread4.Join();

            stopwatch.Stop();
            Console.WriteLine("Time elapsed with multithreading:: {0}",
        stopwatch.Elapsed);

            Console.Read();
        }

        static void countUp()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter++;
            }
        }

        static void countUp2()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter2++;
            }
        }

        static void countUp3()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter3++;
            }
        }

        static void countUp4()
        {
            for (double i = 0; i < 1000000000; i++)
            {
                counter4++;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:35:48.980

首先，使用 System.Runtime.Diagnostic 命名空间中的 StopWatch 类而不是 DateTime 进行测量。

其次，您在同步执行后不清除“计数器”。

您应该对所有线程使用并行化，比它更快！初始化新线程的成本很高。顺便说一句，您可以使用 ThreadPool。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:40:02.477

正如 Joeb454 所说，在这种情况下你必须寻找并行处理。您的多线程只会减慢执行速度，因为创建新线程需要“很长时间”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:32:07.347

我不是多线程方面的专家，但我认为您在那里所做的基本上只是将工作从 UI 线程中移开。

如果您有一些长时间运行或密集的工作要做，这绝不是一件坏事，因为它允许您为最终用户保留响应式 UI。为了更快地运行这样的事情，如果我的记忆正确地为我服务，您将需要研究并行处理。

# orchardcms - 果园欢迎词

> ID：12390473
> 
> 赞同：0
> 
> 时间：2012-09-12T14:28:31.090
> 
> 标签：orchardcms

我有一个 Orchard CMS 应用程序，我想更改 Orchard.Web\Core\Shapes\Views\User.cshtml 显示的欢迎消息。具体来说，我想显示在我自己的数据库中定义的用户名，而不是 CMS 存储的用户名。我的数据库模型是在我自己的项目中定义的，该项目已添加到 Orchard 解决方案中。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:10:57.050

只需在您的主题中覆盖该模板。将文件从现在的位置复制到主题/您的主题/视图并开始自定义它。至于更改用户名的来源，您可能是从错误的角度来理解的。当然，您可以使用 WorkContext 注入您自己的服务，但您似乎应该将内置的成员资格类替换为您自己的。然后，原始模板会自然而然地拾取它。您可以使用 SuppressDependency 属性替换现有服务。

# knockout.js - Adding KO computedobservable to nested object created with KO Mapping (with jsfiddle)

> ID：12390475
> 
> 赞同：0
> 
> 时间：2012-09-12T14:28:36.473
> 
> 标签：knockout.js, knockout-mapping-plugin

I'm new to knockout. I have a page that loads some trade data from a wcf call and adds it as a nested ko.observablearray to my view model using ko.mapping.

The loaded trade data has typecode that I need to lookup in a typeCodes array in my viewModel. So i'm trying to use ko.mapping options to create a computed column for each trade added.

[http://jsfiddle.net/russellgove/KXneJ/8/](http://jsfiddle.net/russellgove/KXneJ/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:54:52.033

我认为您需要在调用映射插件时自定义子对象的创建（添加“创建”回调）。这是修改后的[小提琴](http://jsfiddle.net/gbos/9ppcv/5)。

# sharepoint - Does SharePoint 2010 Search Index the data in the non-promoted fields of uploaded InfoPath forms

> ID：12390477
> 
> 赞同：1
> 
> 时间：2012-09-12T14:28:44.193
> 
> 标签：sharepoint, search, infopath

I have an InfoPath document library in which some fields are promoted while others are not. My question is that which of the following will be indexed by SharePoint basic/enterprise/FAST search.

1.  Data in the promoted fields
2.  Data in the non-promoted fields
3.  Data in the attachments

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:29:22.227

1.  是的
2.  不
3.  不

搜索版本（基本版、企业版、快速版）无关紧要。

但是关于第二和第三：InfoPath 表单最终只是 XML 表单（附件是 base64 编码的字符串）。这意味着使用给定 XML 解析器的 SharePoint 搜索可以搜索文件。当您激活对 InfoPath 表单的搜索时，您将获得 InfoPath 文件的全部内容（即整个 XML，包括`<xml... >`），这并不能更容易地查看内容。为此，您必须创建自己的 IFilter，告诉 SharePoint 如何解析您的 InfoPath 表单。

有关一些想法，请参阅[此讨论](http://social.technet.microsoft.com/forums/en-US/sharepointsearch/thread/c67f08c1-f34b-4015-bf53-f0b769daae75)。

# css - 像 ZendFramework 中的 Rails 头部样式

> ID：12390482
> 
> 赞同：0
> 
> 时间：2012-09-12T14:29:06.537
> 
> 标签：css, ruby-on-rails, zend-framework, styles, head

是否可以在 Rails 中做类似的事情（ZendFramework）？

```
<?php $this->headStyle()->captureStart() ?>
body {
    background-color: <?php echo $this->bgColor ?>;
}
<?php $this->headStyle()->captureEnd() ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:45:03.587

嗨，您可以`<header><%=yield :header%></header>`在页眉的 application.html.erb 中，现在假设您想在应用程序的任何其他页面的页眉中添加一些样式，您可以通过`<%= content_for :head do %><style> background-color: <%= somecolor %><% end %>`

我不是php用户，所以我不知道zend，但我希望这能解决你的问题

# html - 表格页脚自动跨越表格宽度

> ID：12390486
> 
> 赞同：8
> 
> 时间：2012-09-12T14:29:11.170
> 
> 标签：html, css, html-table

我有一个表，它具有**动态列数，**具体取决于我收到的数据。我有一个标签，它需要分布在所有列中，与表中的列数无关。

```
<table>
<thead>
<tr>
<th><span>ColA</span></th>
<th><span>ColB</span></th>
<th rowspan='2'><span>Col<br/>  C</span></th>
</tr>
</thead>
<tbody>
</tbody>
<tfoot>
<tr>
<td>Footer content here</td>
</tr>
</tfoot>
</table> 
```

EDIT colspan = 0 为我工作！

```
<td colspan='0'>Footer content here</td> 
```

适用于 FF，但不适用于 Chrome、IE8 :(

编辑 2

colspan = '100%' 这个链接解决了跨浏览器问题 [https://stackoverflow.com/a/5028091/405117](https://stackoverflow.com/a/5028091/405117)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:36:23.320

使用`colspan="0"`
顺便说一句，你`<tfoot>`应该在`<thead>`和`<tbody>`标签之间。

编辑：W3C 推荐的这种做法不是跨浏览器的。谨慎使用！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-20T00:44:20.423

在 colspan 值中放入一个高得离谱的数字（即`colspan="9999"`）并将样式添加`table-layout: auto`到您的表格元素中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T14:35:33.023

使用`colspan`. 您需要通过 jQuery 获取列数，然后设置要拉伸的表格行的 colspan，如下所示：

```
function ColumnCount(){
    var numCols = $("#YourTableID").find('tr')[0].cells.length;
    $('tfoot tr').attr('colspan', numCols.toString());
} 
```

然后您需要将 id`YourTableID`提供给表，如下所示：

```
<table id="YourTableID"> 
```

代替`<table>`.

# amazon-web-services - 使用 AWS Java 开发工具包创建负载均衡器

> ID：12390487
> 
> 赞同：0
> 
> 时间：2012-09-12T14:29:12.260
> 
> 标签：amazon-web-services, amazon-elb

我正在尝试使用 AWS java sdk 创建一个负载均衡器。但是我得到了状态码为 400 的 AmazonServiceException，但其他字段（如 AWS 请求 ID、AWS 错误代码等）为空。我无法了解问题所在。

下面是我用来创建负载均衡器的代码片段。

```
 elb = new AmazonElasticLoadBalancingClient(credentials);
    elb.setEndpoint("endPoint");

    CreateLoadBalancerRequest lbRequest = new CreateLoadBalancerRequest();
    lbRequest.setLoadBalancerName(lbName);
    List<Listener> listeners = new ArrayList<Listener>(1);
    listeners.add(new Listener(lbProtocol, lbPort, instancePort));
    lbRequest.withAvailabilityZones(availablezone1,availablezone2);
    lbRequest.setListeners(listeners);
    try{
         CreateLoadBalancerResult lbResult = elb.createLoadBalancer(lbRequest);
    } catch (AmazonServiceException e){
        e.printStackTrace();
    }catch (AmazonClientException e){
        e.printStackTrace();
    } 
```

我收到以下异常：

状态代码：400，AWS 服务：AmazonElasticLoadBalancing，AWS 请求 ID：null，AWS 错误代码：null，AWS 错误消息：com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:583) at com.amazonaws.http .AmazonHttpClient.executeHelper(AmazonHttpClient.java:317) 在 com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:167) 在 com.amazonaws.services.elasticloadbalancing.AmazonElasticLoadBalancingClient.invoke(AmazonElasticLoadBalancingClient.java:1224) 在 com。 amazonaws.services.elasticloadbalancing.AmazonElasticLoadBalancingClient.createLoadBalancer(AmazonElasticLoadBalancingClient.java:675)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T07:50:32.067

尝试将端点更改为：[https ://elasticloadbalancing.us-east-1.amazonaws.com](https://elasticloadbalancing.us-east-1.amazonaws.com)

# javascript - 在 chrome 扩展中加载内容脚本

> ID：12390489
> 
> 赞同：5
> 
> 时间：2012-09-12T14:29:16.627
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在开发 chrome 扩展时遇到问题。

我有内容脚本：

```
window.addEventListener("load",function(){
   var html = document.getElementsByTagName('html')[0];
   var title = document.getElementsByTagName('title')[0].innerHTML;
   if(html){
      chrome.extension.sendRequest({akce: 'content', title: title},function(response){});
      alert(title);
   }
},false); 
```

然后我有一个 BG 页面：

```
chrome.extension.onRequest.addListener(function(request,sender,sendResponse){
    if(request.akce == 'content'){
        console.log(request.title);
    }
}); 
```

问题是当我开始输入地址栏时，我的内容脚本会加载到自动完成列表中的第一个站点上。正如您在下面的屏幕截图中所见，内容脚本在我在地址栏中按 Enter 之前已加载，并且已加载到我尚未加载的站点上。

我不知道发生了什么。请，请帮助我。

[截屏](http://www.freeimagehosting.net/fv81o)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T12:32:32.843

解决方案是从后台页面注入脚本。

示例：从 bg 页面获取推荐人

```
chrome.tabs.executeScript(tabId,{
    code: "chrome.extension.sendRequest({action: 'content_refer', url: document.referrer},function(response){});"
});

chrome.extension.onRequest.addListener(function(request,sender,sendResponse){
    if(request.action == 'content_refer'){
        wipstats.allPages[sender.tab.id].ref = request.url;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:36:21.743

我猜你已经在 Chrome 中启用了名为“即时浏览”的选项，我前段时间遇到了同样的问题，正是由于这个原因，我禁用了它并且不再使用它。

# visual-studio-lightswitch - 在 Lightswitch 应用程序中关闭本地化

> ID：12390493
> 
> 赞同：0
> 
> 时间：2012-09-12T14:29:27.350
> 
> 标签：visual-studio-lightswitch

我可以在我的 Lightswitch 应用程序中关闭本地化，使其不包含部署包中的所有 bin\[culture]\*.resources.dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:04:37.207

一句话，不，你不能。此“功能”由 Silverlight 提供，而不是 LightSwitch 本身，因此 LS 团队无法直接控制它。

# c++ - 将参数传递给线程

> ID：12390506
> 
> 赞同：0
> 
> 时间：2012-09-12T14:30:20.670
> 
> 标签：c++, multithreading, pthreads, argument-passing

我有一个线程，我希望向其传递 3 个参数。所以，我把它们放在一个结构中，如下所示：

```
struct arg
{
time_t  time1;
float name1;
time_t quantum1;
}; 
```

我通过以下方式传递参数：

```
 arg arg1;
 arg1.time1=(time_t)(int)job.peek(); //job.peek() was 3
 cout<<"job time is "<<arg1.time1<<endl; //this output 3

 arg1.name1=(float)(int)job.returnname(NULL); //job.returnname() was 1
 cout<<"job name is "<<arg1.name1<<endl;// this output 1

 arg1.quantum1=quantum; //quantum was 7
 cout<<"quantum is "<<arg1.quantum1<<endl;//this output 7

 pthread_create(&thread1, NULL, func3, (void*)(&arg1)); 
```

但是当我在线程本身的开头检查这些值时，它们被改变了。

```
 void* timer(void *argum)
 {
 arg *arg1= (arg*)argum;
 cout<<"PROCESS "<<arg1->name1<<" HAS ENTERED THE TIMER"<<endl; //this output arg1->name1 as 1.4013e-45
 cout<<"Time remaining for process is "<<arg1->time1<<endl; //this output arg1->time1 as -1218381144
 cout<<"quantum is "<<arg1->quantum1<<endl; //this output arg1->quantum1 as 5
 } 
```

谁能告诉我为什么会这样？
提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:36:51.007

您不应该将本地对象（即在堆栈上创建）的地址传递到函数之外。您应该使用`malloc`/分配它`new`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:38:02.133

问题是您`arg1`在堆栈上分配，并且该内存超出范围并在线程开始执行之前被重用。`malloc`使用or在堆上分配 arg 对象`new`，完成后不要忘记取消分配它，通常是在您创建的线程中。

# c# - C# HttpClient FormUrlEncodedContent 编码（VS 2012）

> ID：12390511
> 
> 赞同：8
> 
> 时间：2012-09-12T14:30:39.657
> 
> 标签：c#, visual-studio

我正在使用 HttpClient。我正在使用网络表单参数发布。其中一个值（不是名称）是瑞典语外来字符 ö ，#246；ö ASCII：拉丁文小写字母 O 元音变音

手动，IE、Firefox 和 Chrome 都将这个字符转换为 S%F6k，一切正常。但是 VS 2012 C# 版本将它（通过 FormUrlEncodedContent(dict)）转换为 %C3%B6

有没有办法告诉 VS 2012 将其转换为友好的 S%F6k（并且仍然使用 HttpClient）？

我附上了大部分代码，这可能对其他人有帮助（cookies、代理等......）

```
// Create Handler
var handler = new HttpClientHandler();

// Cookies
var cc = new CookieContainer();
handler.CookieContainer = cc;

// Proxy - for fiddler
WebProxy proxy = new WebProxy();
proxy.Address = new Uri("http://localhost:8888");
handler.Proxy = proxy;

// Create the client
var client = new HttpClient(handler);

var request4 = new HttpRequestMessage();

client.DefaultRequestHeaders.Clear();
client.DefaultRequestHeaders.Add("Accept", "text/html, application/xhtml+xml, */*");
client.DefaultRequestHeaders.Add("Accept-Encoding", "gzip, deflate");
client.DefaultRequestHeaders.Add("Accept-Language", "en-US,en;q=0.8,sv-SE;q=0.5,sv;q=0.3");
client.DefaultRequestHeaders.Add("User-Agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)");

// Form Data
var dict4 = new Dictionary<string, string>
{
    { "page", "kantlista" },
    { "kod", "A0004n" },
    { "termin", "H12" },
    { "anmkod", "17113" },
    { "urval", "ant" },
    { "listVal", "namn" },
    { "method", "Sök" } // S%F6k
}; // dict

request4.Content = new FormUrlEncodedContent(dict4);

var value4 = new FormUrlEncodedContent(dict4);
string uri4 = "https://www.ltu.se/ideal/ListaKursant.do";
var response4 = await client.PostAsync(uri4, value4);
response4.Headers.Add("Cache-Control", "no-cache")
response4.EnsureSuccessStatusCode();
string responseBody4 = await response4.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T04:00:12.457

[`FormUrlEncodedContent`](https://msdn.microsoft.com/en-us/library/system.net.http.formurlencodedcontent.aspx "MSDN 文档")类以 utf8 编码对表单数据进行编码。
尝试[`ByteArrayContent`](https://msdn.microsoft.com/en-us/library/system.net.http.bytearraycontent.aspx "MSDN 文档")上课并[`HttpUtility.UrlEncode(String, Encoding)`](https://msdn.microsoft.com/en-us/library/h10z5byc.aspx "MSDN 文档")进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-11T13:20:53.200

只是为了完成@TylerTsai 的回答

代替

```
var dict = new Dictionary<string, string>();
dict.Add("param1", value1);
dict.Add("param1", value2);

var response = await httpClient.PostAsync(endpoint, new FormUrlEncodedContent(dict)); 
```

和

```
 string postData = HttpUtility.UrlEncode(
       $"param1={value1}&param2={value2}",Encoding.GetEncoding(myEncoding));
 byte[] data = System.Text.Encoding.GetEncoding(myEncoding).GetBytes(postData);
 ByteArrayContent content = new ByteArrayContent(data);
 content.Headers.Add("Content-Type", "application/x-www-form-urlencoded");

 var response = await httpClient.PostAsync(endpoint, content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-11T15:16:00.267

通过这个小调整，您可以保留您的字典

```
 var postEncoding= "ISO-8859-1";
    var dict4 = new Dictionary<string, string>
    {
        { "page", "kantlista" },
        { "kod", "A0004n" },
        { "termin", "H12" },
        { "anmkod", "17113" },
        { "urval", "ant" },
        { "listVal", "namn" },
        { "method", "Sök" } // S%F6k
    }; // dict

string postData = HttpUtility.UrlEncode(string.Join("&", dict4.Select(kvp => $"{kvp.Key}={kvp.Value}")) ,Encoding.GetEncoding(postEncoding));

byte[] data = Encoding.GetEncoding(postEncoding).GetBytes(postData);
ByteArrayContent content = new ByteArrayContent(data);
content.Headers.Add("Content-Type", "application/x-www-form-urlencoded");

var response = await httpClient.PostAsync(endpoint, content); 
```

# multithreading - 从不同的线程打印 Hello 和 World

> ID：12390512
> 
> 赞同：0
> 
> 时间：2012-09-12T14:30:39.077
> 
> 标签：multithreading, visual-c++

我创建了一个多线程程序。这里一个线程打印“Hello”，另一个打印“World”，输出将是“Hello World”50 次。它工作正常，但它使用的是事件，它是内核对象，需要在用户模式和内核之间切换。任何人都可以在 VC++ 中建议任何更轻的版本，而不是 C# 或 java。

```
 #include <Windows.h>

static HANDLE event1 = CreateEvent(NULL, TRUE, TRUE, NULL); 
static HANDLE event2 = CreateEvent(NULL, TRUE, TRUE, NULL); 

DWORD WINAPI ThreadHello(  __in  LPVOID lpParameter)
{
    for( int i = 0 ; i < 50 ; i++ )
    {
        WaitForSingleObject(event1, INFINITE);
        ResetEvent(event1);
        printf("%s ", "Hello");
        SetEvent(event2);
    }

    return 1;
}

DWORD WINAPI ThreadWorld(  __in  LPVOID lpParameter)
{
    for( int i = 0 ; i < 50 ; i++)
    {
        WaitForSingleObject(event2, INFINITE);
        ResetEvent(event2);
        printf("%s\n", "World");
        SetEvent(event1);
    }

    return 1;
}

int _tmain(int argc, _TCHAR* argv[])
{
    CreateThread(NULL, 0, ThreadHello, (LPVOID)0, 0, 0);
    CreateThread(NULL, 0, ThreadWorld, (LPVOID)0, 0, 0);

    getchar();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:37:09.270

您为什么要在多个线程中执行此操作？现在您的线程正在以锁步方式执行，这意味着一次只有一个线程在运行。在这种情况下，我会重新设计以使用单个线程。

如果您这样做是为了代码清晰而不是并发执行（很少见，但仍有可能），请考虑使用[fiber](http://en.wikipedia.org/wiki/Fiber_%28computer_science%29)。代码结构与线程几乎相同，但不是设置和等待事件，而是通过调用[SwitchToFiber](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686350.aspx)抢占当前纤程以运行另一个纤程。

您应该使用多线程的主要情况是：

1.  当您遇到可拆分为多个部分的受 CPU 限制的问题时 - 您的打印过程可能受 CPU 限制，但不能拆分为多个部分。您的文件读取问题可能与 CPU 无关。
2.  在处理不支持异步调用的库时，您需要在后台运行一些东西。
3.  因为它使您的代码更简单并且您不关心开销 - 例如在服务器应用程序中处理每个线程的一个请求时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:42:28.293

尝试原子比较和交换，您忙于等待尝试获取锁。它很粗糙，因为它忙于等待，但它会给你一些有用的技术的经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T15:42:32.190

我理解这个问题很笼统。这种情况也可以通过使用[关键部分对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)来解决。

```
DWORD WINAPI ThreadHello(  __in  LPVOID lpParameter)
{
  for( int i = 0 ; i < 50 ; i++ )
  {
    EnterCriticalSection(&csMyCriticalSectionObject);
    printf("%s ", "Hello");
    LeaveCriticalSection(&csMyCriticalSectionObject);
    // now we're ending the threads quantum
    Sleep(0);
    // ThreadWord is waiting on EnterCriticalSection, thus ready to execute and
    // therefore executed next.
  }
  return 1;
}

DWORD WINAPI ThreadWorld(  __in  LPVOID lpParameter)
{
  for( int i = 0 ; i < 50 ; i++)
  {
    EnterCriticalSection(&csMyCriticalSectionObject);
    printf("%s\n", "World");
    LeaveCriticalSection(&csMyCriticalSectionObject);
    // now we're ending the threads quantum
    Sleep(0);
    // ThreadHello is waiting on EnterCriticalSection, thus ready to execute and
    // therefore executed next.
  }
  return 1;
}

// global
CRITICAL_SECTION csMyCriticalSectionObject;

int _tmain(int argc, _TCHAR* argv[])
{
  // initialize the critical section object
  InitializeCriticalSection(&csMyCriticalSectionObject);

  CreateThread(NULL, 0, ThreadHello, (LPVOID)0, 0, 0);
  CreateThread(NULL, 0, ThreadWorld, (LPVOID)0, 0, 0);

  getchar();

  return 0;
} 
```

当您需要多线程缓冲输出时，您应该考虑使用排队机制，例如同步 fifo。所有输出都可以由**任意**数量的线程排队到该队列中。单个输出线程可以出列到输出 (printf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T18:30:46.830

问题域过于模糊和抽象，实际上不符合适当的多线程编程条件。我知道你正处于学习阶段，但你需要真实。您应该接受一些用户输入，读取一些文件，等待一些外部事件（如时间/时间，文件更改，用户登录，下载完成等），在线程（读取器线程，写入器线程）之间正确同步等等。

对于您遇到的问题，您可能想要使用关键部分或读写器锁。

# php - 使用 PHP 从 sitemap.xml 打开随机页面

> ID：12390522
> 
> 赞同：-3
> 
> 时间：2012-09-12T14:31:11.370
> 
> 标签：php, sitemap

我需要创建一个 php 脚本，从 wordpress 博客的 sitemap.xml 打开一个随机页面，但我真的不知道如何去做。有人可以帮我吗？

站点地图位于：http: [//designsuperstars.net/sitemap.xml](http://designsuperstars.net/sitemap.xml)

欢迎任何帮助，波格丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:23:14.437

你可以试试这个简单的脚本

```
$url = "http://designsuperstars.net/sitemap.xml" ;
$xml = simplexml_load_file($url);
$link = $xml->url[mt_rand(0,count($xml->url)-1)]->loc ; // Get Random Location 

Header("Location:" . $link); // Load any page 
```

# python - 如何使用python计算opencv中由3D点组成的弧的弧长？

> ID：12390524
> 
> 赞同：0
> 
> 时间：2012-09-12T14:31:12.107
> 
> 标签：python, opencv

我有一条使用离散点采样的曲线。它不是闭合曲线。我想计算弧长。在 opencv 中，arclength 函数采用 2D 点。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:40:22.523

请记住，采用离散点这将是一个估计值，但计算弧长的粗略方法是简单地将后续点之间的[距离/幅度相加。](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#magnitude)因此，如果`x`是闭合曲线上采样 2D 点的有序列表：

```
sum( magnitude(x[i]-x[i+1]) for i in range(len(points)-1) ) 
```

*如果您知道有关曲线的其他一些属性，则可以更准确地计算出这个...*

.

相同的技术可以应用于更高维度的向量，您可以使用广义公式：

```
def dist(X,Y):
    return math.sqrt(
                     sum( (X[i] - Y[i])**2 for i in len(range(X)) )
                    )

sum( dist(x[i],x[i+1]) for i in range(len(points)-1) ) 
```

# sql - Group By 语句中的重复列

> ID：12390526
> 
> 赞同：6
> 
> 时间：2012-09-12T14:31:17.657
> 
> 标签：sql, oracle11g

我正在尝试将此 Oracle Discoverer 创建的 SQL 脚本转换为可以从发现者外部运行的查询。当我尝试运行脚本时，出现以下错误：

SQL 语句无效，因为它包含以下重复的列名： `LEAF_DETAILS`、`LEAF_DETAILS_DESCR`、`LEAF_DETAILS`、`LEAF_DETAILS_DESCR`。通过为列提供别名来更正语句。

我必须转换大约 100 个这样的脚本，所以我正在寻找一种方法来轻松修改此脚本输出，而无需重新构建每个脚本。有任何想法吗？

```
 SELECT O1890255.LEAF_DETAILS,
         O1890286.ACTIVITY,
         O1890258.LEAF_DETAILS_DESCR,
         O1890261.LEAF_DETAILS,
         O1890261.LEAF_DETAILS_DESCR,
         O1890286.BUSINESS_UNIT,
         O1890286.PROJECT_DESCR,
         O1890287.PROJECT_ID,
         O1890288.LEAF_DETAILS,
         O1890288.LEAF_DETAILS_DESCR,
         O1890287.SUB_PROJECT,
         O1890287.SYSTEM_SOURCE,
         O1890287.YEAR,
         SUM (O1890287.RESOURCE_AMT_BUD),
         SUM (O1890287.RESOURCE_AMT_ACT),
           (SUM (
               DECODE (O1890287.ACCOUNTING_PERIOD,
                       '8', O1890287.RESOURCE_AMT_ACT,
                       0)))
         - (SUM (
               DECODE (O1890287.ACCOUNTING_PERIOD,
                       '8', O1890287.RESOURCE_AMT_BUD,
                       0))),
         SUM (
            DECODE (O1890287.ACCOUNTING_PERIOD,
                    '8', O1890287.RESOURCE_AMT_BUD,
                    0)),
         SUM (
            DECODE (O1890287.ACCOUNTING_PERIOD,
                    '8', O1890287.RESOURCE_AMT_ACT,
                    0)),
         SUM (O1890287.RESOURCE_AMT_ACT - O1890287.RESOURCE_AMT_BUD)
    FROM WAREHOUSE.PPL_RPTD_COST_MGMT01JAN00 O1890255,
         WAREHOUSE.PPL_RPTD_ACTIVITY_BUDG O1890258,
         WAREHOUSE.PPL_RPTD_BUD_ITEMS01JAN00 O1890261,
         WAREHOUSE.PROJECT_DENORMAL_GEN O1890286,
         WAREHOUSE.PROJ_RES_DENORMAL_GEN O1890287,
         WAREHOUSE.SRC_TREE_VW O1890288
   WHERE     (    (O1890255.LEAF_DETAILS = O1890287.ACCOUNT)
              AND (O1890258.LEAF_DETAILS = O1890286.ACTIVITY)
              AND (O1890261.LEAF_DETAILS = O1890287.BUDGET_ITEM)
              AND (O1890286.PROJECT_ID = O1890287.PROJECT_ID)
              AND (O1890288.LEAF_DETAILS = O1890287.SRC))
         AND ( ( (   O1890255.LEAF_DETAILS LIKE '12011'
                  OR O1890255.LEAF_DETAILS = '10700')))
         AND (O1890287.ACTIVITY LIKE '000002F%')
         AND (    O1890287.SUB_PROJECT <> '897'
              AND O1890287.BUDGET_ITEM <> 'CAPBD'
              AND O1890287.SUB_PROJECT <> '896')
         AND (O1890261.LEAF_DETAILS NOT IN ('PLTIS', '14M00'))
         AND (O1890287.ACCOUNTING_PERIOD <= '8')
         AND (O1890287.YEAR = '2012')
         AND (O1890286.BUSINESS_UNIT LIKE '52110')
         AND (O1890287.ACCOUNTING_PERIOD NOT IN (998, 999))
         AND (O1890287.SYSTEM_SOURCE NOT IN ( ('PLT')))
GROUP BY O1890255.LEAF_DETAILS,
         O1890286.ACTIVITY,
         O1890258.LEAF_DETAILS_DESCR,
         O1890261.LEAF_DETAILS,
         O1890261.LEAF_DETAILS_DESCR,
         O1890286.BUSINESS_UNIT,
         O1890286.PROJECT_DESCR,
         O1890287.PROJECT_ID,
         O1890288.LEAF_DETAILS,
         O1890288.LEAF_DETAILS_DESCR,
         O1890287.SUB_PROJECT,
         O1890287.SYSTEM_SOURCE,
         O1890287.YEAR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T04:48:45.397

尝试这个 ：

```
SELECT O1890255.LEAF_DETAILS as LEAF_DETAILS1, O1890286.ACTIVITY, O1890258.LEAF_DETAILS_DESCR as LEAF_DETAILS_DESCR1 , O1890261.LEAF_DETAILS as LEAF_DETAILS2, O1890261.LEAF_DETAILS_DESCR as LEAF_DETAILS_DESCR2, O1890286.BUSINESS_UNIT, O1890286.PROJECT_DESCR, O1890287.PROJECT_ID, O1890288.LEAF_DETAILS as LEAF_DETAILS3, O1890288.LEAF_DETAILS_DESCR as LEAF_DETAILS_DESCR3, O1890287.SUB_PROJECT, O1890287.SYSTEM_SOURCE, O1890287.YEAR, SUM(O1890287.RESOURCE_AMT_BUD), SUM(O1890287.RESOURCE_AMT_ACT), ( SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_ACT,0)) )-( SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_BUD,0)) ), SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_BUD,0)), SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_ACT,0)), SUM(O1890287.RESOURCE_AMT_ACT-O1890287.RESOURCE_AMT_BUD)

FROM WAREHOUSE.PPL_RPTD_COST_MGMT01JAN00 O1890255, WAREHOUSE.PPL_RPTD_ACTIVITY_BUDG O1890258, WAREHOUSE.PPL_RPTD_BUD_ITEMS01JAN00 O1890261, WAREHOUSE.PROJECT_DENORMAL_GEN O1890286, WAREHOUSE.PROJ_RES_DENORMAL_GEN O1890287, WAREHOUSE.SRC_TREE_VW O1890288

WHERE ( ( O1890255.LEAF_DETAILS = O1890287.ACCOUNT ) AND ( O1890258.LEAF_DETAILS = O1890286.ACTIVITY ) AND ( O1890261.LEAF_DETAILS = O1890287.BUDGET_ITEM ) AND ( O1890286.PROJECT_ID = O1890287.PROJECT_ID ) AND ( O1890288.LEAF_DETAILS = O1890287.SRC ) ) AND ( (  ( O1890255.LEAF_DETAILS LIKE '12011' OR O1890255.LEAF_DETAILS = '10700' )  ) ) AND ( O1890287.ACTIVITY LIKE '000002F%' ) AND ( O1890287.SUB_PROJECT <> '897' AND O1890287.BUDGET_ITEM <> 'CAPBD' AND O1890287.SUB_PROJECT <> '896' ) AND ( O1890261.LEAF_DETAILS NOT IN ('PLTIS','14M00') ) AND ( O1890287.ACCOUNTING_PERIOD <= '8' ) AND ( O1890287.YEAR = '2012' ) AND ( O1890286.BUSINESS_UNIT LIKE '52110' ) AND ( O1890287.ACCOUNTING_PERIOD NOT IN (998,999) ) AND ( O1890287.SYSTEM_SOURCE NOT IN (( 'PLT' )) )

GROUP BY O1890255.LEAF_DETAILS, O1890286.ACTIVITY, O1890258.LEAF_DETAILS_DESCR, O1890261.LEAF_DETAILS, O1890261.LEAF_DETAILS_DESCR, O1890286.BUSINESS_UNIT, O1890286.PROJECT_DESCR, O1890287.PROJECT_ID, O1890288.LEAF_DETAILS, O1890288.LEAF_DETAILS_DESCR, O1890287.SUB_PROJECT, O1890287.SYSTEM_SOURCE, O1890287.YEAR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:52:44.387

这将做你想要的。这很丑陋，但它会完成工作。只需将查询粘贴到@query 变量中，然后按 F5；输出是您的新查询。您需要用两个撇号替换任何单个撇号，以将准确的查询放入变量中。

为了自动清理一堆查询，你可以把它变成一个存储过程，并在查询文件中写一些东西到光标，将它们的文本拉到一个变量中，将变量传递给存储过程并将结果输出到一个新文件。

```
Declare @query Varchar(Max),
        @columns Varchar(Max),
        @from Varchar(Max),
        @check Int = -1,
        @checkChar Varchar(1),
        @counter Int = 0,
        @newColumns Varchar(Max);;

Declare @indexes Table (tID Int Identity, indexLoc Int, indexChar Varchar(1))
Declare @colNames Table (tID Int, colName Varchar(512))

Set     @query = 
'SELECT O1890255.LEAF_DETAILS, O1890286.ACTIVITY, O1890258.LEAF_DETAILS_DESCR, O1890261.LEAF_DETAILS, O1890261.LEAF_DETAILS_DESCR, O1890286.BUSINESS_UNIT, O1890286.PROJECT_DESCR, O1890287.PROJECT_ID, O1890288.LEAF_DETAILS, O1890288.LEAF_DETAILS_DESCR, O1890287.SUB_PROJECT, O1890287.SYSTEM_SOURCE, O1890287.YEAR, SUM(O1890287.RESOURCE_AMT_BUD), SUM(O1890287.RESOURCE_AMT_ACT), ( SUM(DECODE(O1890287.ACCOUNTING_PERIOD,''8'',O1890287.RESOURCE_AMT_ACT,0)) )-( SUM(DECODE(O1890287.ACCOUNTING_PERIOD,''8'',O1890287.RESOURCE_AMT_BUD,0)) ), SUM(DECODE(O1890287.ACCOUNTING_PERIOD,''8'',O1890287.RESOURCE_AMT_BUD,0)), SUM(DECODE(O1890287.ACCOUNTING_PERIOD,''8'',O1890287.RESOURCE_AMT_ACT,0)), SUM(O1890287.RESOURCE_AMT_ACT-O1890287.RESOURCE_AMT_BUD)
FROM WAREHOUSE.PPL_RPTD_COST_MGMT01JAN00 O1890255, WAREHOUSE.PPL_RPTD_ACTIVITY_BUDG O1890258, WAREHOUSE.PPL_RPTD_BUD_ITEMS01JAN00 O1890261, WAREHOUSE.PROJECT_DENORMAL_GEN O1890286, WAREHOUSE.PROJ_RES_DENORMAL_GEN O1890287, WAREHOUSE.SRC_TREE_VW O1890288
WHERE ( ( O1890255.LEAF_DETAILS = O1890287.ACCOUNT ) AND ( O1890258.LEAF_DETAILS = O1890286.ACTIVITY ) AND ( O1890261.LEAF_DETAILS = O1890287.BUDGET_ITEM ) AND ( O1890286.PROJECT_ID = O1890287.PROJECT_ID ) AND ( O1890288.LEAF_DETAILS = O1890287.SRC ) ) AND ( (  ( O1890255.LEAF_DETAILS LIKE ''12011'' OR O1890255.LEAF_DETAILS = ''10700'' )  ) ) AND ( O1890287.ACTIVITY LIKE ''000002F%'' ) AND ( O1890287.SUB_PROJECT <> ''897'' AND O1890287.BUDGET_ITEM <> ''CAPBD'' AND O1890287.SUB_PROJECT <> ''896'' ) AND ( O1890261.LEAF_DETAILS NOT IN (''PLTIS'',''14M00'') ) AND ( O1890287.ACCOUNTING_PERIOD <= ''8'' ) AND ( O1890287.YEAR = ''2012'' ) AND ( O1890286.BUSINESS_UNIT LIKE ''52110'' ) AND ( O1890287.ACCOUNTING_PERIOD NOT IN (998,999) ) AND ( O1890287.SYSTEM_SOURCE NOT IN (( ''PLT'' )) )
GROUP BY O1890255.LEAF_DETAILS, O1890286.ACTIVITY, O1890258.LEAF_DETAILS_DESCR, O1890261.LEAF_DETAILS, O1890261.LEAF_DETAILS_DESCR, O1890286.BUSINESS_UNIT, O1890286.PROJECT_DESCR, O1890287.PROJECT_ID, O1890288.LEAF_DETAILS, O1890288.LEAF_DETAILS_DESCR, O1890287.SUB_PROJECT, O1890287.SYSTEM_SOURCE, O1890287.YEAR'

Set     @from = Right(@query,Len(@query)-(CharIndex('FROM',@query)-1))
Set     @columns = Replace(Replace(Replace(@query,@from,''),'SELECT',''),' ','')

While   1 = 1
Begin
        Select  @check = Min(val)
        From   (Select  CharIndex(',',@columns,@check + 1) As val 
                Union
                Select  CharIndex('(',@columns,@check + 1)
                Union
                Select  CharIndex(')',@columns,@check + 1)) As n

        If  (@check = 0)
        Begin
                Break
        End

        Insert  @indexes
        Select  @check, Substring(@columns,@check,1)
End

Delete  i1
From    @indexes i1
Join    @indexes i2
        On  i1.tID = i2.tID+1
        And i1.indexChar = '('
        And i2.indexChar = '('

Delete  i1
From    @indexes i1
Join    @indexes i2
        On  i1.tID = i2.tID-1
        And i1.indexChar = ')'
        And i2.indexChar = ')'      

Declare @indexLoc Int,
        @indexChar Varchar(1)

Declare cur Cursor For      
Select  indexLoc,
        indexChar
From    @indexes;

Open    cur;
Fetch   Next 
From    cur
Into    @indexLoc,
        @indexChar

Select  @checkChar =   (Select  Top 1 indexChar
                        From    @indexes
                        Order   By tID)

While   @@Fetch_Status = 0
Begin
        If      @indexChar = '('
        Begin
                Set @counter = @counter + 1;
        End
        Else    If @indexChar = ')'
        Begin
                Set @counter = @counter - 1;
        End

        If      @counter > 0
        Begin
                Delete  i
                From    @indexes i
                Where   indexLoc = @indexLoc

                Set     @checkChar = @indexChar
        End

        Fetch   Next 
        From    cur
        Into    @indexLoc,
                @indexChar
End
Close   cur;
Deallocate cur;

With    buildBase As
(
        Select  0 As tID, 0 As indexLoc, ',' As indexChar
        Union   All
        Select  Row_Number() Over (Order By tID), indexLoc, indexChar
        From    @indexes
        Where   indexChar Not In ('(',')')
        Union   All
        Select  Count(1) + 1, Len(@columns), ','
        From    @indexes
        Where   indexChar Not In ('(',')')
),      seperateColumns As
(
        Select  Row_Number() Over (Order By i1.tID) as tID,
                Substring(@columns,i1.indexLoc + 1,i2.indexLoc-(i1.indexLoc+1)) As colName
        From    buildBase i1
        Join    buildBase i2
                On  i1.tID = i2.tID-1
),      newNames As
(
        Select  tID,
                Case
                When    colName Like '%(%'
                Then    colName + 
                        ' [Column' + Convert(Varchar(10),Row_Number() Over (Partition By    Case
                                                                                            When    colName like '%(%' Then 1
                                                                                            Else    0
                                                                                            End
                                                                            Order By tID)) + ']'
                Else    colName + 
                        ' [' + Right(colName,Len(colName)-CharIndex('.',colName)) + 
                        Convert(Varchar(10),Row_Number() Over ( Partition By    Right(colName,Len(colName)-CharIndex('.',colName))
                                                                Order By tID)) + ']'
                End     As colName
        From    seperateColumns
)
Insert  @colNames 
Select  tID, colName
From    newNames
Order   By tID

Select  @newColumns = COALESCE(@newColumns + ', ', '') + colName 
From    @colNames 
Order   By tID

Select  'SELECT ' + @newColumns + ' ' + @from 
```

输出：

```
SELECT O1890255.LEAF_DETAILS [LEAF_DETAILS1], O1890286.ACTIVITY [ACTIVITY1], O1890258.LEAF_DETAILS_DESCR [LEAF_DETAILS_DESCR1], O1890261.LEAF_DETAILS [LEAF_DETAILS2], O1890261.LEAF_DETAILS_DESCR [LEAF_DETAILS_DESCR2], O1890286.BUSINESS_UNIT [BUSINESS_UNIT1], O1890286.PROJECT_DESCR [PROJECT_DESCR1], O1890287.PROJECT_ID [PROJECT_ID1], O1890288.LEAF_DETAILS [LEAF_DETAILS3], O1890288.LEAF_DETAILS_DESCR [LEAF_DETAILS_DESCR3], O1890287.SUB_PROJECT [SUB_PROJECT1], O1890287.SYSTEM_SOURCE [SYSTEM_SOURCE1], O1890287.YEAR [YEAR1], SUM(O1890287.RESOURCE_AMT_BUD) [Column1], SUM(O1890287.RESOURCE_AMT_ACT) [Column2], (SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_ACT,0)))-(SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_BUD,0))) [Column3], SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_BUD,0)) [Column4], SUM(DECODE(O1890287.ACCOUNTING_PERIOD,'8',O1890287.RESOURCE_AMT_ACT,0)) [Column5], SUM(O1890287.RESOURCE_AMT_ACT-O1890287.RESOURCE_AMT_BUD)  [Column6] FROM WAREHOUSE.PPL_RPTD_COST_MGMT01JAN00 O1890255, WAREHOUSE.PPL_RPTD_ACTIVITY_BUDG O1890258, WAREHOUSE.PPL_RPTD_BUD_ITEMS01JAN00 O1890261, WAREHOUSE.PROJECT_DENORMAL_GEN O1890286, WAREHOUSE.PROJ_RES_DENORMAL_GEN O1890287, WAREHOUSE.SRC_TREE_VW O1890288  WHERE ( ( O1890255.LEAF_DETAILS = O1890287.ACCOUNT ) AND ( O1890258.LEAF_DETAILS = O1890286.ACTIVITY ) AND ( O1890261.LEAF_DETAILS = O1890287.BUDGET_ITEM ) AND ( O1890286.PROJECT_ID = O1890287.PROJECT_ID ) AND ( O1890288.LEAF_DETAILS = O1890287.SRC ) ) AND ( (  ( O1890255.LEAF_DETAILS LIKE '12011' OR O1890255.LEAF_DETAILS = '10700' )  ) ) AND ( O1890287.ACTIVITY LIKE '000002F%' ) AND ( O1890287.SUB_PROJECT <> '897' AND O1890287.BUDGET_ITEM <> 'CAPBD' AND O1890287.SUB_PROJECT <> '896' ) AND ( O1890261.LEAF_DETAILS NOT IN ('PLTIS','14M00') ) AND ( O1890287.ACCOUNTING_PERIOD <= '8' ) AND ( O1890287.YEAR = '2012' ) AND ( O1890286.BUSINESS_UNIT LIKE '52110' ) AND ( O1890287.ACCOUNTING_PERIOD NOT IN (998,999) ) AND ( O1890287.SYSTEM_SOURCE NOT IN (( 'PLT' )) )  GROUP BY O1890255.LEAF_DETAILS, O1890286.ACTIVITY, O1890258.LEAF_DETAILS_DESCR, O1890261.LEAF_DETAILS, O1890261.LEAF_DETAILS_DESCR, O1890286.BUSINESS_UNIT, O1890286.PROJECT_DESCR, O1890287.PROJECT_ID, O1890288.LEAF_DETAILS, O1890288.LEAF_DETAILS_DESCR, O1890287.SUB_PROJECT, O1890287.SYSTEM_SOURCE, O1890287.YEAR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:29:03.657

*按position*引用分组列，而不是*name*，例如：

```
select col1, col2, sum(col3), col4
from table
group by 1, 2, 4; 
```

仅供参考，此语法选项是 SQL 标准的一部分，适用于所有 SQL 数据库。

# java - 使用 REST api JAVA 连接到 HP ALM

> ID：12390528
> 
> 赞同：1
> 
> 时间：2012-09-12T14:31:28.110
> 
> 标签：java, rest, hp-quality-center

我想使用 java 连接到 HP ALM 11。我听说使用 REST api 我可以连接到 HP ALM。

1) 有人能告诉我在哪里可以获得 REST api 下载及其文档吗？
2) 是惠普提供还是第三方开发？
3) 有没有惠普提供或推荐的api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:05:33.597

REST API 是 HP ALM 11 的一部分。查看有关[REST](http://en.wikipedia.org/wiki/REST)的 Wikipedia 文章了解一些背景信息。

HP 网站上提供了 REST API 文档（需要 HP Passport 登录）：

[http://support.openview.hp.com/selfsolve/document/KM997956/binary/ALM11.00_REST_API.html?searchIdentifier=-765a98c0%3a12de84ca170%3a-27ac&resultType=document](http://support.openview.hp.com/selfsolve/document/KM997956/binary/ALM11.00_REST_API.html?searchIdentifier=-765a98c0%3a12de84ca170%3a-27ac&resultType=document)

# jquery - ASP.NET MVC 3 JQuery 脚本丢失

> ID：12390529
> 
> 赞同：0
> 
> 时间：2012-09-12T14:31:29.143
> 
> 标签：jquery

（提前为长篇道歉，但在我的智慧结束）..

在我的 MVC 3 应用程序中，我遇到了一个奇怪的问题，即 jquery 脚本“丢失”，因为需要一个更好的词。

在我的应用程序中，我有以下 _Layout.cshtml 文件：

```
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("../Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
    <script src="@Url.Content("../Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 

</head>
<body>

    <div class="page">

        <div id = "sidebar"> 
            @{ Html.RenderPartial("_Sidebar"); }               
        </div>

        <div id="main">            
            @RenderBody()
        </div>

        <div id="validationresults">
            <div id="validationresultsinner"></div>
        </div>

        <div id="footer"></div>

    </div>
</body>
</html> 
```

侧边栏本身是一个局部视图，其中包含几个 Ajax.ActionLink，它们将父视图加载到我的 _Layout.cshtml 的“主”区域中。

```
<ul>
<li>@Ajax.ActionLink("Section 1", "WizardParentView", "Section1",null, new AjaxOptions() 
    { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" }, new { id = "sect2" })</li>
<li>@Ajax.ActionLink("Section 2", "WizardParentView", "Section2", null, new AjaxOptions() 
    { UpdateTargetId = "main", InsertionMode = InsertionMode.Replace, HttpMethod = "GET" }, new { id = "sect2" })</li>
</ul> 
```

此 WizardParentView 本身包含一个 Ajax.Begin 表单，该表单与 NuGet 的 MVCWizard.Wizard 一起使用，以托管用户可以浏览的页面选择（例如向导类型页面）

例如

```
@model MyDataModel

@{    
    FormWizardManager<MyDataModel> wm = (FormWizardManager<MyDataModel>)Session["TheSection"];
    Layout = "";    
}

@using (Ajax.BeginForm("WizardParentView", "Section1", new AjaxOptions() {
UpdateTargetId= "wizard", InsertionMode = InsertionMode.Replace }))
{
    <div id="wizard">
    @Html.WizardHeader(wm, true)
    @{Html.RenderAction(wm.CurrentPage.PagePartialView);}
    @Html.WizardFooter(wm, "Next Page " + (wm.Index + 1), "Previous Page" + (wm.Index - 1), "Save this Section")      
    </div>
}

@Content.Script("jquery.validate.js", Url)
@Content.Script("jquery.validate.unobtrusive.min.js", Url)
@Content.Script("UIHelpers.Section1.js", Url) 
```

我还具有一些必需的功能来修改侧栏中的项目文本，以永久反映用户通过向导的进度状态。此文本修改是通过在其他地方执行回发（调用服务器端验证时）的另一位 JQuery 来实现的。如您所见，为了在再次单击侧边栏链接时（在它可能已被修改之后）停止原始侧边栏部分重新加载，我还必须在 WizardParentView 加载时清除布局。

问题是，当我在开发环境（带有 IIS7 Express 或 Visual Studio 2010 Web 开发服务器的 IE9）中运行它时，所有需要 JQuery 或 JQuery.Unobtrusive.Ajax 的页面加载和功能都可以正常工作

但是，在完整的 II7 或 II6 下运行相同的网站（见下文）我发现核心脚本和所有相关功能在前 2 个页面导航尝试中加载和工作正常，但在第三个页面上（例如第三次按下“下一步”） ，JQuery 脚本肯定不再存在。这意味着我的部分视图加载到完整的网页中，并且视图中的任何 jquery 功能都停止工作。

进一步的混乱如下：

**工作** JQuery 1.5.1 IE9、IIS7 Express、Visual Studio Web 开发服务器

**损坏** 的 JQuery 1.5.1 IE9、IIS6、IIS7、IIS7 Express
JQuery 1.5.1 Chrome/Firefox、IIS6、IIS7、II7 Express、Visual Studio Web 开发服务器
JQuery 1.8.1 IE9、IIS6、IIS7、IIS7 Express、Visual Studio Web 开发服务器

我认为即使在第一次加载 WizardParentView 时清除布局也会清除我在 _Layout 中加载的 JQuery 脚本，但是基于 JQuery 的功能在 2-3 次导航尝试后仍然有效然后死掉的事实很奇怪。 . 更不用说应用程序功能至少在上述配置之一中完美运行（JQuery 脚本不应该在所有情况下都被清除吗？或者某种特定的浏览器组合会发生某种奇怪的缓存， JQuery 版本和 Web 服务器？.. 抱歉，我有点不知所措，无法更好地描述它.. 并为令人困惑的解释道歉（在我自己的脑海中，我可以清楚地描述这个问题）:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:00:20.210

你试过改变吗

```
 <script src="@Url.Content("../Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
<script src="@Url.Content("../Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

到

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

以便它可以通过相对路径正确地将服务器路径映射到这些文件？

# eclipse - 使用 VJET 从 Eclipse 运行 Node.js

> ID：12390533
> 
> 赞同：1
> 
> 时间：2012-09-12T14:31:35.587
> 
> 标签：eclipse, node.js, vjet

我正在寻找一个工作流程 - 使用 Node.js 作为本地 Web 服务器。

步骤： 1) 在 Eclipse 中编辑 Node.js 服务器 JavaScript 2) 在启用调试的情况下测试更改 2) 使用 VJET 将 Html 和 JavaScript 编辑到前端。

这可能吗？

我知道：[https ://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)

在创建像标准“静态 Web 项目”这样的项目时，VJET 没有为您提供创建“运行时”/Web 服务器的选项。

更具体地说，我正在寻找使用 Node.js 作为 VJET 项目或静态 Web 项目的运行时。

提前致谢

问候克里斯

# .net - 复杂：框架 3.5 安装但特定框架 3.5 代码不起作用

> ID：12390541
> 
> 赞同：0
> 
> 时间：2012-09-12T14:31:58.643
> 
> 标签：.net

我有一个非常奇怪的问题。在 Windows 2008 DataCenter R2 上，我安装了 IIS 和 Framework 3.5，但是当我运行特定于 DotNet 3.5 的代码时，我遇到了问题。目标是读取所有用户会话（http://weblogs.asp.net/imranbaloch/archive/2010/04/05/reading-all-users-session.aspx）

这是理解问题的代码，也许可以自己测试：

```
object obj = typeof(HttpRuntime).GetProperty("CacheInternal", BindingFlags.NonPublic | BindingFlags.Static).GetValue(null, null);

foreach (FieldInfo ofi in obj.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Instance))
{
Label1.Text += ofi.Name + "<br/>";
} 
```

使用框架 3.5，返回应该是 - _disposed - _caches - _cacheIndexMask - _cacheCommon

但在我的服务器上，结果是 _entries _expires _usage _lock _disposed _totalCount _publicCount _maxCount _maxCountOverload _flushUndercount _insertBlock _useInsertBlock _insertBlockCalls _utcLastTrimCompleted _iSubCache _cacheMultiple _cacheCommon

与框架 2 一样

我有 2 台服务器，一台可以使用我的代码，而 System.Environment.Version 是 2.0.50727.4927，另一台出现问题 System.Environment.Versionis= 2.0.50727.5456

我已经尝试卸载/重新安装 Framework 3.5

我希望有一个人可以帮助我。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:26:50.067

一种方法...通过从零重新安装我的 Windows 2008 R2 DataCenter 服务器，我在“角色/功能”中选择了这个特定的顺序：

1 - 我选中 FrameWork3.5 2 - 系统要求安装 IIS，我选中复选框

而不是相反，即从检查的 IIS 开始并在 Framework 3.5 之后

现在很好，我的代码返回了我想要的：_disposed _caches _cacheIndexMask _cacheCommon

问题没有解决，第一行代码 object obj = typeof(HttpRuntime).GetProperty("CacheInternal", BindingFlags.NonPublic | BindingFlags.Static).GetValue(null, null);

返回一个 CacheMultiple 或 CacheSingle 对象，因此它们是代码末尾的结果

但是为什么从服务器返回的一个或另一个对象不一样呢？

Antoher 重要的一点，System.Environment.Version = 2.0.50727.4927 但在它之前是 2.0.50727.5456 我不知道 2 之间的区别但是问题不是来自这个因为在我的开发机器上，我有 2.0.50727.5456 和第一个代码行返回好的对象：CacheMultiple

# c# - 在 Windows 8/Metro 中更改按钮的 VisualStates

> ID：12390542
> 
> 赞同：1
> 
> 时间：2012-09-12T14:32:04.007
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我有一些要更改 ControlTemplates 的按钮，因此我可以使用图像作为外观。

我有一张正常状态的图像和一张 PointerOver 或 Pressed 状态的图像。

**这是我有点困惑的地方：**我希望它可以在平板电脑和台式机上运行。我尝试设置 Pressed 状态，但它迫使我双击按钮以激活它。如果我设置 PointerOver，点击效果很好；如果我将 PointerOver 和 Pressed 设置为相同，则可以正常工作。**为什么强制单击以激活 Pressed 状态并再次单击以激活按钮 Click/Command？**

如果这是有意的，我是否设置了 PointerOver 和 Pressed 状态以便它在桌面上工作？但这也适用于平板电脑吗？即，如果用户按下一个按钮，他/她显然没有 PointerOver 状态，那么它不会创建我之前描述的场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:19:35.983

如果您未定义状态，则假定该状态与“正常”状态（模板中的默认 xaml）相同。设置 Pressed 和 PointerOver 确实适用于平板电脑。大多数用户不会获得 PointerOver 状态，但有些平板电脑支持笔，当笔悬停在平板电脑上时会显示状态。其他一些平板电脑有传感器，可以检测靠近屏幕的手指。这也将提供 PointerOver 状态。

# .net - resx 中可本地化的文本属性名称

> ID：12390544
> 
> 赞同：0
> 
> 时间：2012-09-12T14:32:09.403
> 
> 标签：.net, winforms, resources, resx

我有一个使用 resx 文件中可本地化的文本属性的脚本。我知道三个这样的属性名称：Text、HeaderText 和 ToolTipText。还有更多这样的属性名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:45:21.230

虽然这里没有广泛列出我在自动定位器中使用的东西

“textfield”、“groupingtext”、“format”、“filteredlisttext”、“expandedtext”、“emptymessage”、“datatextformatstring”、“dataformatstring”、“customfilterdateformat”、“customerrormessage”、
“collapsedtext”、“expandedtext”、“value "、"工具提示"、"文本"、"标题文本"、"名称"、"错误消息"、"标题"、"替代"、"headertooltip”、“alternatetext”、“entitytreetitle”

# php - 如何让 Backbone 和 MongoDB 的 id 无缝工作？

> ID：12390553
> 
> 赞同：12
> 
> 时间：2012-09-12T14:32:34.963
> 
> 标签：php, mongodb, backbone.js

我的 Backbone 应用程序正在与构建在 MongoDB 之上的 REST API 进行通信，因此我的对象的“自然”ID 确实是`MongoIDs`. 当序列化为 JSON 时，它们看起来像：

```
"_id":{"$id":"505099e998dee4db11000001"} 
```

[Backbone 文档](http://backbonejs.org/#Model-idAttribute)提到，您可以为 Backbone 模型的 id 属性指定其他名称（`id`使用`idAttribute`），但是，由于 MongoID 的字符串表示是嵌套的，因此仅使用`idAttribute: '_id'`无助于直接使用 JSON。

除了在服务器端重写属性之外，有没有办法解决这个问题？

*更新：*

这是我在服务器端做的事情：

```
$m = new Mongo();
$posts = $m->mydatabase->posts->find();

$out = array();

foreach ($posts as $post) {
    $out[] = $post;
}

echo json_encode($out); 
```

我知道我可以做类似的事情，`$post['id'] = (string) $post['_id']; unset($post['_id']);`但这正是我想要避免的！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T15:02:31.380

这听起来像是一个很好的例子[`parse()`](http://backbonejs.org/#Model-parse)。

由于您的 Mongo JSON 最终发送：

```
"_id":{"$id":"505099e998dee4db11000001"} 
```

为什么不使用 Backbone 解析来正确命名传入数据？

```
parse: function(response) {
    response.id = response._id['$id'];
    delete response._id;

    return response;
} 
```

或者类似的东西。同样，由于 Backbone 会将 id 作为带有“id”的 JSON 发送，因此您的服务器可能会采用它并以另一种方式“翻译”它。

如果您想使用不同的[id 属性](http://backbonejs.org/#Model-idAttribute)，`_id`您只需将上面的解析替换为以下代码：

```
idAttribute: '_id',

parse: function(response) {
    response._id = response._id['$id'];

    return response;
} 
```

什么最适合你。:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-02T22:34:32.910

最好在浏览器中进行转换，这样您就可以将计算从服务器上移开。所以你想创建一个基础的 MongoModel，然后你可以从 MongoModel 而不是 Backbone.Model 扩展。

```
MongoModel = Backbone.Model.extend({
    // this handle conversion between the mongo's _id and backbone id
    // this is best done on the client side to alleviate server load
    //_id : { "$oid" : ... } <--> id
    parse : function (response) {
        response.id = response._id.$oid;
        delete response._id;
        return response;
    },
    toJSON : function () {
        var
            json = Backbone.Model.prototype.toJSON.apply(this);
        json._id = {'$oid':json.id};
        delete json.id;
        return json;
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T12:56:51.063

Looking at various suggested options I found the easiest would be to do what you want to avoid. (Using parse does work though)

```
$m = new Mongo();
$posts = $m->mydatabase->posts->find();

$out = array();

foreach ($posts as $post) {
    // populate an id field
    $post['id']=$post['_id']->{'$id'},
    $out[] = $post;
}

echo json_encode($out); 
```

Keeping `$post['_id']` if you want your model to send it back when syncing. I prefer correcting the API as more clients might want to connect to it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T07:45:21.187

您的 PHP 代码是 Backbone 将与之交互的 REST API，因此*它*应该将 Mongo 的复杂`_id`属性抽象为`id`您正在寻找的简单字符串。这绝对是 API 的工作。

Backbone 或您的 API 的任何其他使用者不应该对 Mongo 或`_id`.

为什么？因为如果您要从 Mongo 切换到其他没有 的 Db `_id`，那么您的 API 仍然很好，因为曾经暴露的只是`id`，这是超级通用的。因此，您最初的想法实际上是最好的想法（尽管您希望将那段代码抽象为可用于所有模型的东西，而不仅仅是帖子）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T16:16:23.180

在 Ruby 中，我可以执行以下操作：

```
items.find.to_a.map 做 |item|
  来自bsonid（项目）
end.to_json

def frombsonid(obj) obj.merge({'_id' => obj['_id'].to_s}) 结束

```

当您取回数据时，您可以将字符串转换为 BSON::ObjectId

```
def tobsonid(id) BSON::ObjectId.fromstring(id) end 
```

所以想法是用 BSON::ObjectId 的字符串版本替换每个项目中的 _id

在主干中，您可以添加

```
idAttribute: "_id", 
```

在 PHP 中，您将使用不同的语法和方法，但我相信完全可以复制这一点。

# blackberry - 不使用 BB JDE 的 Blackberry 构建创建

> ID：12390555
> 
> 赞同：1
> 
> 时间：2012-09-12T14:32:51.353
> 
> 标签：blackberry, build

我正在开发一个黑莓应用程序，我想在不使用黑莓 JDE 的情况下打包和签署黑莓应用程序。这样做可行吗？

任何帮助深表感谢。提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:52:25.833

最好和最简单的方法是使用[bb-ant-tools](http://bb-ant-tools.sourceforge.net/)。另请查看此[问题](https://stackoverflow.com/questions/8942230/blackberry-ant-build-script-for-more-complex-apps)，您可以在其中找到构建文件及其用法。

# webdriver - Selenium2 WebDriver 在 IE7、XP、Windows7 中找不到元素

> ID：12390560
> 
> 赞同：0
> 
> 时间：2012-09-12T14:33:10.103
> 
> 标签：webdriver, selenium-webdriver

我在运行 XP 和 IE7 的机器上使用 IEDriverServer 2.25.0 和 C# 开发了我的测试自动化。一切正常。我创建了我的解决方案的安装包并部署到另一台机器（Windows7、IE8）中，并且 webdriver 在我测试的网页上找不到元素。

我在另一台 XP、IE7 机器上安装了 Visual Studio 和 C#。当我运行代码时，它与 Windows7 机器中的问题相同。

我尝试将所有区域的保护模式设置为开/关，但它也不起作用。

我想知道是否有任何设置防火墙/防病毒/等...使 webdriver 无法找到 web 元素？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:04:25.910

我发现了问题。我的测试机器应该与网络服务器在同一个网络中。我的网络服务器的 IP 地址是 10.104.200.110，掩码为 255.255.255.0。虽然我的测试机器可以浏览网络服务器，但它的 IP 地址不同。因此，我将 IP 更改为 10.104.200.100，掩码为 255.255.255.0，并且成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:11:25.780

我遇到了 IE7 的问题，我的意思是我认为这只是 IE7 的问题，因为在 IE6、IE8、IE9 上，我必须测试的网页运行良好。该网页已损坏证书（因为这是研发环境）。解决方案是将页面地址添加到受信任的站点。我希望这对某人有所帮助，因为我四处寻找并没有找到任何东西。现在看起来很明显，但没有任何迹象表明问题是因为这个，谷歌页面工作正常，但我应该测试的页面没有。

# iphone - 在没有源代码的情况下集成 iphone 应用程序

> ID：12390571
> 
> 赞同：0
> 
> 时间：2012-09-12T14:33:29.230
> 
> 标签：iphone, ios

我有三个 iPhone 应用程序需要合并为一个。我没有这三个应用程序的任何源代码。我只有ipa文件。有什么办法可以将三个应用程序合二为一吗？例如，香蕉、橙子、苹果等应用程序将被集成到一个名为食物的主应用程序中。所以当用户安装食物时，香蕉、橙子和苹果将包含在我的应用程序中，用户不需要安装三个应用程序。在我的食物应用程序中，用户可以选择香蕉或任何他们喜欢看的东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:40:07.747

> 有什么办法可以将三个应用程序合二为一吗？

**不。**

iOS 应用程序不能嵌入其他应用程序，甚至不能直接相互通信。没有支持的方式来做你所要求的。

*如果*目标应用程序已注册自定义 URL 协议，则可以让一个应用程序启动另一个应用程序，但它们仍然是单独的应用程序。此外，在某些情况下，可以使用 Apple 的 Configurator 或 MDM 等工具一次安装多个应用程序。不过，我不确定这对您的情况是否有用。

# java - 使用 dom4j 从节点获取属性值

> ID：12390575
> 
> 赞同：9
> 
> 时间：2012-09-12T14:33:33.490
> 
> 标签：java, dom4j

我的 XML 的结构类似于下面的示例。我正在尝试使用 dom4j 从 XML 中获取属性值。

```
<baz>
  <foo>
    <bar a="1" b="2" c="3" />
    <bar a="4" b="5" c="6" />
  </foo>
</baz> 
```

目前，节点存储在 List 中，代码如下：

```
public List<Foo> getFoo() {
  String FOO_XPATH = "//baz/foo/*";
  List<Foo> fooList = new ArrayList<Foo>();
  List<Node> fooNodes = _bazFile.selectNodes(FOO_XPATH);

  for (Node n : fooNodes) {
    String a = /* get attribute a */
    String b = /* get attribute b */
    String c = /* get attribute c */
    fooNodes.add(new Foo(a, b, c));
  }

  return fooNodes;
} 
```

[SO上有一个类似但不同的问题](https://stackoverflow.com/a/5391828/823435)，但它使用以下代码返回已知属性键/值对的节点值：

```
Node value = elem.selectSingleNode("val[@a='1']/text()"); 
```

就我而言，代码知道键但不知道值 - 这就是我需要存储的。（当我需要属性值时，来自类似问题/答案的上述片段也会返回节点的文本值。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T14:36:03.193

您必须转换`Node`to`Element`然后使用`attribute`or`attributeValue`方法：

```
for (Node node : fooNodes) {
    Element element = (Element) node;
    String a = element.attributeValue("a");
    ...
} 
```

基本上，从“任何节点”获取属性值是没有意义的，因为某些节点类型（属性、文本节点）没有*属性*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:39:58.540

您还可以使用 xpath 来获取节点属性的值 -

```
 for (Node n : fooNodes) {
    String a = n.valueOf("@a");
    String b = n.valueOf("@b");
    String c = n.valueOf("@c");
    fooNodes.add(new Foo(a, b, c));
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:41:09.153

```
public List<Foo> getFoo() {
  String FOO_XPATH = "//baz/foo/*";
  List<Foo> fooList = new ArrayList<Foo>();
  List<Node> fooNodes = _bazFile.selectNodes(FOO_XPATH);

  for (Node n : fooNodes) {
    Element element = (Element) n;
    String a = element.attributeValue("a");
    String b = element.attributeValue("b");
    String c = element.attributeValue("c");
    fooNodes.add(new Foo(a, b, c));
  }

  return fooNodes;
} 
```

我认为您需要将节点转换为元素，然后才能正常工作。

# jakarta-ee - 带有 Restful Web 服务的 JavaFX2

> ID：12390577
> 
> 赞同：1
> 
> 时间：2012-09-12T14:33:38.403
> 
> 标签：jakarta-ee, jersey, javafx-2

我开始尝试 JavaFX2.2 向 RESTful Web 服务发出请求。为了创建我的网络服务，我遵循了这个 Netbeans 指南： http: [//netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)（基于我的数据库）。

实体、配置和服务包已成功生成，当我通过右键单击我的项目并选择“测试 RESTful Web 服务...”来测试服务时，这一切似乎都可以正常工作（获得 XML 响应）

现在我尝试创建一个 JavaFX2 应用程序来向这个 web 服务发出请求。为此，我使用基于我的 DAPFacadeREST 服务的 Jersey 客户端（也由 Netbeans 7.2 生成）。当我在我的应用程序中点击一个按钮时，将执行以下操作：

```
NewJerseyClient njc = new NewJerseyClient();

String s = njc.find_XML(String.class, "1");  

System.out.println("Output from Server .... \n");
System.out.println(s); 
```

这给了我来自服务器的以下响应：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <dap>
        <adres>Street 1</adres>
        <btw></btw>
        <contactPersoon></contactPersoon>
        <dapid>1</dapid>
        <email>blablabla@skynet.be</email>
        <gemeente>RandomCity</gemeente>
        <land>België</land>
        <naam>Paul The Man</naam>
        <postcode>9999</postcode>
        <tel>+32999 88 77 66</tel>
    </dap> 
```

这个信息是正确的，但现在我被卡住了。我希望将其转换为 JavaFX2 对象，最好是这样的：

```
public class DAP {
    private  SimpleIntegerProperty DAPID = new SimpleIntegerProperty();
    private  SimpleStringProperty naam = new SimpleStringProperty("");
    private  SimpleStringProperty contactPersoon = new SimpleStringProperty("");
    private  SimpleStringProperty adres = new SimpleStringProperty("");
    private  SimpleStringProperty postcode = new SimpleStringProperty("");
    private  SimpleStringProperty gemeente = new SimpleStringProperty("");
    private  SimpleStringProperty land = new SimpleStringProperty("");
    private  SimpleStringProperty telefoonnummer = new SimpleStringProperty("");
    private  SimpleStringProperty btw = new SimpleStringProperty("");
    private  SimpleStringProperty email = new SimpleStringProperty("");

    //constructor, getters & setters below 
```

这甚至可能吗？我的意思是，使用 SOAP，您可以使用代理类，但 SimpleIntegerProperty 在服务器端是未知的（JavaEE 6）。这就是我选择 REST 的原因。这会是与 SOAP 相同的问题吗？因为在服务器端（在 RESTful Web 服务中），生成的实体如下所示：

```
public class DAP implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "DAPID")
private Integer dapid;
@Basic(optional = false)
@NotNull
@Lob
@Size(min = 1, max = 65535)
@Column(name = "Naam")
private String naam;
@Basic(optional = false)
@NotNull
@Lob
@Size(min = 1, max = 65535)
//etc 
```

那些字段“naam”只是一个普通的字符串，我希望它在我的客户端成为一个 SimpleStringProperty。

我已经在 J​​AXB 上进行了一些阅读，但我不知道我应该在客户端创建什么以及我应该在服务器端创建什么。如果我没记错的话，我必须在某处制作一个 xsd 文件？但同样，这会支持 SimpleStringProperty 作为类型吗？

对不起，很长的帖子，但我希望有人能帮助我......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:46:20.550

您可以创建一个`XmlAdapter`来处理`SimpleStringProperty`. 由于 JAXB (JSR-222) 是 JAX-WS (SOAP) 和 JAX-RS (RESTful) Web 服务的标准绑定层，您可以对两者都使用这种方法。`XmlAdapter`看起来像下面这样

```
public class SimpleStringPropertyAdatper extends XmlAdapter<String, SimpleStringProperty> {

   @Override
    public SimpleStringProperty unmarshal(String v) throws Exception {
        return new SimpleStringProperty(v);
    }

    @Override
    public String marshal(SimpleStringProperty v) throws Exception {
        if(null == v) {
            return v;
        }
        return v.getString(); // Or whatever the correct method is
    } 

} 
```

`@XmlJavaTypeAdapter`注释用于配置`XmlAdapter`您可以在包信息中使用类来执行此操作，以`package-info`指定适配器应用于指定类的所有实例。

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=SimpleStringPropertyAdapter.class, type=String.class),
    @XmlJavaTypeAdapter(value=SimpleIntegerPropertyAdapter.class, type=Integer.class),
})
package com.example;

import javax.xml.bind.annotation.adapters.*; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)
*   [http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html](http://blog.bdoughan.com/2011/05/jaxb-and-joda-time-dates-and-times.html)

# android - 在 android 中创建群聊功能，并在 muc.create() 上从服务器获得无响应

> ID：12390579
> 
> 赞同：0
> 
> 时间：2012-09-12T14:33:40.760
> 
> 标签：android, xmpp

我可以通过 ejabbered 进行一对一的聊天。使用我的 wifi 上的 IP 在设备之间成功地在本地设置服务器。但是当创建一个群聊时

```
 MultiUserChat muc = new MultiUserChat(conn1, "myroom@conference.jabber.org");
 muc.create("testbot"); 
```

在搜索时我发现`muc.create()`有问题并`muc.join()`改用。但我想先创建 d 房间。我不确定问题是在服务器端还是客户端

[http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html#create](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html#create)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:00:36.177

我自己找到了解决方案。smack 库中没有问题，而是缺少配置设置。复制并粘贴下面的方法并在登录时调用它。

```
public static void configure(ProviderManager pm) {

    // Private Data Storage

    pm.addIQProvider("query", "jabber:iq:private",
            new PrivateDataManager.PrivateDataIQProvider());

    // Time

    try {

        pm.addIQProvider("query", "jabber:iq:time",
                Class.forName("org.jivesoftware.smackx.packet.Time"));

    } catch (ClassNotFoundException e) {

        Log.w("TestClient",
                "Can't load class for org.jivesoftware.smackx.packet.Time");

    }

    // Roster Exchange

    pm.addExtensionProvider("x", "jabber:x:roster",
            new RosterExchangeProvider());

    // Message Events

    pm.addExtensionProvider("x", "jabber:x:event",
            new MessageEventProvider());

    // Chat State

    pm.addExtensionProvider("active",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    pm.addExtensionProvider("composing",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    pm.addExtensionProvider("paused",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    pm.addExtensionProvider("inactive",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    pm.addExtensionProvider("gone",
            "http://jabber.org/protocol/chatstates",
            new ChatStateExtension.Provider());

    // XHTML

    pm.addExtensionProvider("html", "http://jabber.org/protocol/xhtml-im",
            new XHTMLExtensionProvider());

    // Group Chat Invitations

    pm.addExtensionProvider("x", "jabber:x:conference",
            new GroupChatInvitation.Provider());

    // Service Discovery # Items

    pm.addIQProvider("query", "http://jabber.org/protocol/disco#items",
            new DiscoverItemsProvider());

    // Service Discovery # Info

    pm.addIQProvider("query", "http://jabber.org/protocol/disco#info",
            new DiscoverInfoProvider());

    // Data Forms

    pm.addExtensionProvider("x", "jabber:x:data", new DataFormProvider());

    // MUC User

    pm.addExtensionProvider("x", "http://jabber.org/protocol/muc#user",
            new MUCUserProvider());

    // MUC Admin

    pm.addIQProvider("query", "http://jabber.org/protocol/muc#admin",
            new MUCAdminProvider());

    // MUC Owner

    pm.addIQProvider("query", "http://jabber.org/protocol/muc#owner",
            new MUCOwnerProvider());

    // Delayed Delivery

    pm.addExtensionProvider("x", "jabber:x:delay",
            new DelayInformationProvider());

    // Version

    try {

        pm.addIQProvider("query", "jabber:iq:version",
                Class.forName("org.jivesoftware.smackx.packet.Version"));

    } catch (ClassNotFoundException e) {

        // Not sure what's happening here.

    }

    // VCard

    pm.addIQProvider("vCard", "vcard-temp", new VCardProvider());

    // Offline Message Requests

    pm.addIQProvider("offline", "http://jabber.org/protocol/offline",
            new OfflineMessageRequest.Provider());

    // Offline Message Indicator

    pm.addExtensionProvider("offline",
            "http://jabber.org/protocol/offline",
            new OfflineMessageInfo.Provider());

    // Last Activity

    pm.addIQProvider("query", "jabber:iq:last", new LastActivity.Provider());

    // User Search

    pm.addIQProvider("query", "jabber:iq:search", new UserSearch.Provider());

    // SharedGroupsInfo

    pm.addIQProvider("sharedgroup",
            "http://www.jivesoftware.org/protocol/sharedgroup",
            new SharedGroupsInfo.Provider());

    // JEP-33: Extended Stanza Addressing

    pm.addExtensionProvider("addresses",
            "http://jabber.org/protocol/address",
            new MultipleAddressesProvider());

    // FileTransfer

    pm.addIQProvider("si", "http://jabber.org/protocol/si",
            new StreamInitiationProvider());

    pm.addIQProvider("query", "http://jabber.org/protocol/bytestreams",
            new BytestreamsProvider());

    pm.addIQProvider("open", "http://jabber.org/protocol/ibb",
            new IBBProviders.Open());

    pm.addIQProvider("close", "http://jabber.org/protocol/ibb",
            new IBBProviders.Close());

    pm.addExtensionProvider("data", "http://jabber.org/protocol/ibb",
            new IBBProviders.Data());

    // Privacy

    pm.addIQProvider("query", "jabber:iq:privacy", new PrivacyProvider());

    pm.addIQProvider("command", "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider());

    pm.addExtensionProvider("malformed-action",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.MalformedActionError());

    pm.addExtensionProvider("bad-locale",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadLocaleError());

    pm.addExtensionProvider("bad-payload",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadPayloadError());

    pm.addExtensionProvider("bad-sessionid",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.BadSessionIDError());

    pm.addExtensionProvider("session-expired",
            "http://jabber.org/protocol/commands",
            new AdHocCommandDataProvider.SessionExpiredError());

} 
```

# perl - Selenium::Remote::Driver 或 WWW::Selenium

> ID：12390582
> 
> 赞同：2
> 
> 时间：2012-09-12T14:33:48.717
> 
> 标签：perl, selenium

我应该将哪一个用于新项目？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:55:36.597

两者都需要运行基于 Selenium java 的服务器（据我所知）。

WWW::Selenium 使用较旧的 v1 协议，但围绕它有更多的基础设施。v2 Selenium 服务器向后兼容。

::Driver 使用 v2 协议并且更新。

v1 和 v2 接口之间存在差异，但两者的基本思想是相同的。

所以——总而言之——它们之间并没有太大的区别。我认为无论您选择哪个，您都不会后悔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T00:38:55.647

Selenium 1 和 Selenium 2（分别称为 Selenium RC、Webdriver）的主要区别在于它们驱动浏览器的方式：

Selenium RC 注入 javascript 来驱动浏览器，而 webdriver 使用浏览器内置自动化功能。这意味着如果您使用 webdriver PLUS 或者 C# 或 Java 绑定，则不需要 Selenium 服务器（除非您没有在与浏览器相同的机器上运行测试）。

作为一个 FYI，Selenium-Users 以及 Google 中的 Webdriver 组是很好的资源，拥有活跃的参与者社区。大多数问题在那里得到相对较快的回答。以下链接：

[Webdriver 谷歌群](https://groups.google.com/forum/?fromgroups=#!forum/webdriver) [Selenium-用户谷歌群](https://groups.google.com/forum/?fromgroups=#!forum/selenium-users)

# python - Python：综合类

> ID：12390583
> 
> 赞同：3
> 
> 时间：2012-09-12T14:33:50.983
> 
> 标签：python, class

我可以创建一个`cls1`继承自`cls`.

```
>>> class cls(object):
...     def func(self,arg):
...         print 'func',arg
>>> def func1(self):
...     print "func 1 of cls1"
>>> def func2(self):
...     print "func2 of cls1"
>>> d=dict(func1=func1,func2=func2)
>>> cls1=type('cls1',(cls,),d) 
```

一切都按预期工作：

```
>>> obj=cls1()
>>> obj.func(7)
func 7 
```

我也可以替换`cls1`为`FOO`：

```
>>> cls1=type('FOO',(cls,),d) 
```

这给了我：

```
'cls1': <class '__main__.FOO'>, 
```

这（改变`__name__`变量）是否改变了行为`cls1`以及如何（一切仍然正常）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:50:32.357

你只是在改变你的班级的名字，所以只有当你以某种方式依赖这个名字时才重要：

```
>>> type(obj)
__main__.FOO
>>> isintance(obj, cls1)
True 
```

效果很好，但是酸洗（我认为取决于名称）呢？

比如改名前泡菜`obj`没问题。以后就不行了。

```
PicklingError: Can't pickle <class '__main__.FOO'>: it's not found as __main__.FOO 
```

# c# - 如何从 C# 读取 VB.NET 项目中的“app.config”文件

> ID：12390585
> 
> 赞同：2
> 
> 时间：2012-09-12T14:33:55.987
> 
> 标签：c#, vb.net, app-config

我有一个包含 VB.NET 项目和 C# 项目的解决方案。VB.NET 项目是主要项目。它引用了用于用户管理服务的 C# 项目。两者都连接到同一个数据库。此数据库的连接字符串存储在 VB.NET 项目的 app.config 文件中。它还包含其他用户和应用程序级别设置。我可以使用以下代码行从 C# 内部的配置中读取连接字符串：

```
String connectionString = ConfigurationManager.ConnectionStrings["Kais2012.My.MySettings.ConnectionString"].ConnectionString; 
```

配置文件中包含的其他应用程序级别属性之一称为“TeamId”。我编写了以下代码以从 C# 中读取它。

```
String teamId = ConfigurationManager.AppSettings["Kais2012.My.MySettings.TeamId"]; 
```

这不起作用，我不知道为什么。任何帮助将不胜感激。谢谢。

它不起作用的方式是teamId返回null。这是 app.config 文件的内容。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Kais2012.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Kais2012.My.MySettings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
    <connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">
        <EncryptedData>
            <CipherData>
                <CipherValue>AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAAnnRg1L0cskebQ8b6DT/j0AQAAAACAAAAAAAQZgAAAAEAACAAAADGL7/5UD/77t+gDIMLQ14qVgAVA9qjBwvafuEDlJdYVwAAAAAOgAAAAAIAACAAAAD40OqR3t0UIxD0ipA99JXk24mbdvRuR8Cz6H0PYectmmACAABG2jSkPRAdCw+AbgevlKkdhx9zW/s+ukhIr58LKeEVwmMFwxxATQxa9kQqP2Ooe11FG+AjkwHBKjzKbc8ZFfu4fobbggTLBT4HHGns1HAaXkozUXgNxdR2D1hrAOBJyjmIZhOVLKu2LHnboncRF7/OTd+zuzORsWia/t14H1qkxAVeyoKwqKCCW4yMIcboDSqzuTvZzzU8wFMCOeYBTdr1sgf80LmXMUMq3HdmN6YURu9lGHxZqL4IBvKuoi0S7wCdJ8WuVZN/ZSC73fQuKGXXT2yM/++W110MJCc5h+cmPO6ooAugFgXRgESR5t3DBhHC9ddBQyXSLr3J2AIKyg6xPOsn1mG6p8w5ibcpfDbblToQPo3kVW7D87jq9CsrCX5B4VnLhDO6qIaf5qVBP5eGqBRzYUu6U/+lpcAelg67N2itQPv9+SnEhqmFWJ90wfs8w+Bakk9LATC8IrdaZP77HIgGYyCpMJ5U8BC9DuIB6tO3BD4E9+nc4Mn03D0hxGxidwjr5DM4i9gU8cutO4V/aEWx8oNw/0oDMmsHPMsTXrniFajOgWwKThDCVtojpuW86R0ShedKYtECIvmgIBSefR1NhHcwGAsIWUy0X95hP/921tJzjTAqaMiMGCB9+0/SkpcybGDg1JW5ljxdlgY0Ad8treC4dFWZW7dCIUynEfY+Xg5lOd96q1jhulpQPj9eJbwy/bFA5gcX+UcaUZL3nIhC2jSm41JMRwKtBlsJHGT3ZhQsTQWLZrmmXO+SGMBzyDDbRvNCdZHJvSuyUCH/Qn9mNkrnvcvsPmxQ8aOI/kAAAABN3SIZqA4kCsK5cY1oI+4aT0K6PX3GgGcubKGvSS9ugEjnkZoHdAdenX2q4BpPIXSyqMvVyc15hB1wHmV8vLbG</CipherValue>
            </CipherData>
        </EncryptedData>
    </connectionStrings>
    <system.diagnostics>
        <sources>
            <!-- This section defines the logging configuration for My.Application.Log -->
            <source name="DefaultSource" switchName="DefaultSwitch">
                <listeners>
                    <add name="FileLog"/>
                    <!-- Uncomment the below section to write to the Application Event Log -->
                    <!--<add name="EventLog"/>-->
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="DefaultSwitch" value="Information" />
        </switches>
        <sharedListeners>
            <add name="FileLog"
                 type="Microsoft.VisualBasic.Logging.FileLogTraceListener, Microsoft.VisualBasic, Version=8.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"
                 initializeData="FileLogWriter"/>
            <!-- Uncomment the below section and replace APPLICATION_NAME with the name of your application to write to the Application Event Log -->
            <!--<add name="EventLog" type="System.Diagnostics.EventLogTraceListener" initializeData="APPLICATION_NAME"/> -->
        </sharedListeners>
    </system.diagnostics>
    <userSettings>
        <Kais2012.My.MySettings>
            <setting name="AutoNavigation" serializeAs="String">
                <value>True</value>
            </setting>
            <setting name="UseOsk" serializeAs="String">
                <value>False</value>
            </setting>
            <setting name="AutoHideOsk" serializeAs="String">
                <value>False</value>
            </setting>
            <setting name="StretchReviewColumns" serializeAs="String">
                <value>True</value>
            </setting>
            <setting name="DiscountSkipped" serializeAs="String">
                <value>True</value>
            </setting>
            <setting name="AutoDelay" serializeAs="String">
                <value>0</value>
            </setting>
            <setting name="MinAutoDelay" serializeAs="String">
                <value>1000</value>
            </setting>
        </Kais2012.My.MySettings>
    </userSettings>
    <applicationSettings>
        <Kais2012.My.MySettings>
            <setting name="DummyColumn" serializeAs="String">
                <value>CreationTime</value>
            </setting>
            <setting name="PublisherDBName" serializeAs="String">
                <value>kais_final</value>
            </setting>
            <setting name="PublicationName" serializeAs="String">
                <value>pbl_kais_WAKHUTU-PC</value>
            </setting>
            <setting name="SubscriptionDBName" serializeAs="String">
                <value>KAISEQ_USER001</value>
            </setting>
            <setting name="SubscriberServerName" serializeAs="String">
                <value>USER001</value>
            </setting>
            <setting name="PublisherServerName" serializeAs="String">
                <value>WAKHUTU-PC</value>
            </setting>
            <setting name="PublisherLogin" serializeAs="String">
                <value>sa</value>
            </setting>
            <setting name="PublisherPassword" serializeAs="String">
                <value>xxxxxx</value>
            </setting>
            <setting name="UploadToServer" serializeAs="String">
                <value>1</value>
            </setting>
            <setting name="IpAddress" serializeAs="String">
                <value>172.23.14.94</value>
            </setting>
            <setting name="DownloadFromServer" serializeAs="String">
                <value>2</value>
            </setting>
            <setting name="UploadAndDownload" serializeAs="String">
                <value>3</value>
            </setting>
            <setting name="SubscriberPassword" serializeAs="String">
                <value>xxxxxx</value>
            </setting>
            <setting name="PublishingSubscriberServerName" serializeAs="String">
                <value>SUP01</value>
            </setting>
            <setting name="PublishingSubscriberLogin" serializeAs="String">
                <value>sa</value>
            </setting>
            <setting name="PublishingSubscriberPassword" serializeAs="String">
                <value>xxxxxx</value>
            </setting>
            <setting name="PublishingSubscriberDBName" serializeAs="String">
                <value>KAISEQ_SUP01</value>
            </setting>
            <setting name="publishingSubscriberPublicationName" serializeAs="String">
                <value>pbl_kais_KAISEQ_SUP01</value>
            </setting>
            <setting name="SubscriberLogin" serializeAs="String">
                <value>sa</value>
            </setting>
            <setting name="TeamId" serializeAs="String">
                <value>2</value>
            </setting>
            <setting name="DevMode" serializeAs="String">
                <value>True</value>
            </setting>
            <setting name="DevUsername" serializeAs="String">
                <value>admin</value>
            </setting>
            <setting name="DevPassword" serializeAs="String">
                <value>admin</value>
            </setting>
        </Kais2012.My.MySettings>
    </applicationSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:02:12.923

```
ConfigurationManager.AppSettings[""] 
```

具体来说，指的是配置节，`<appSettings>`而不是一个名为 的自定义配置节组`<applicationSettings>`。将您的配置移动到正确的部分或实施自定义`ConfigurationSection`并使用：

```
ConfigurationManager.GetSection() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T19:07:29.347

用这个 ：

```
System.Configuration.ConfigurationManager.AppSettings[""] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:02:09.040

您可以在 C# 项目中将设置标记为公共（设置属性窗格中的“访问修饰符”），然后您可以从 vb 项目中访问它（不要忘记添加引用）。

```
 Dim settings = New ClassLibraryCSharp.Properties.Settings
 dim con = settings.ConnectionString 
```

**编辑：** 刚刚看到您的问题是针对另一个方向（在 vb 项目中设置，在 c# 项目中阅读）。但你也可以在另一个方向上这样做。

# javascript - 如何将 JSON 数组转换为 Javascript 对象数组

> ID：12390586
> 
> 赞同：-1
> 
> 时间：2012-09-12T14:33:57.457
> 
> 标签：javascript

我从服务器推送了以下 JSON 值。

```
 result=[{"id":1492,"name":"Delhi"},
                 {"id":109,"name":"Coimbatore"},
                 {"id":576,"name":"Konni"},
                 {"id":525,"name":"Kottayam"}
                ] 
```

我知道如何将 JSON 数组转换为 Javascript 数组。这是下面的代码（从 stackoverflow 获得）

```
 var locations = [];
        $.each(result, function(i, obj) {
            locations.push([obj.id,obj.name]);
        }); 
```

我想将此 JSON 数组转换为 JavaScript 对象数组，以便我可以访问这些值，`jarray[0].id`这将为我提供值 1492。请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:37:10.620

你不需要对`result`数组做任何事情。只需使用`result[0].id`，它将评估为`1492`.

# android - Android 应用程序、活动和 UI 线程

> ID：12390588
> 
> 赞同：0
> 
> 时间：2012-09-12T14:34:05.050
> 
> 标签：android, android-ui

我正在开发一个 Android 项目，该项目由几个不同的活动组成，这些活动都与同一个应用程序相关联。我们在应用程序中编码了一些常见任务，因此我们不必复制它们，其中一项任务是定期验证与专用服务器的 TCP 连接——我想是心跳。

如果检测到与服务器的连接丢失，我需要通知用户，并且我希望以一种不需要我检查所有可能的活动来查看当前“最重要”的方式来执行此操作.

有没有办法在不明确知道的情况下对 UI 线程上的任何活动调用 runOnUiThread()？

谢谢，
R。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:39:03.007

> 定期验证 TCP 连接

听起来应该使用[服务](http://developer.android.com/reference/android/app/Service.html)来实现..

如果警报非常简单，并且重要性最小，我建议使用[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)。

如果警报很重要，但不需要用户立即注意，请使用[Notification](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)。

如果警报需要立即引起用户注意，则应使用[Dialog](http://developer.android.com/guide/topics/ui/dialogs.html)。您将无法直接从服务或广播接收器启动对话，因为它们没有与之关联的窗口，但您可以使用意图启动新任务的活动。您可以将活动设置为您想要的任何样式。它甚至可能看起来像一个对话框（或在启动时显示一个对话框）。在新任务中启动活动将确保用户可以导航回他们正在做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:38:25.813

您可以通过发送 Intent 并在要通知的每个 Activity 中注册 BroadcastReceiver 来通知您的 Activity。

服务或应用程序可以是您的上下文：

```
Intent i = new Intent("MY_ACTION_FROM_SERVICE_STRING");
context.sendBroadcast(i); 
```

活动：

```
public class MyActivity extends Activity {
    private ActivityBroadcastReceiver recvr;

    public void onReceiveCommand() {
        //do something
    }
    @Override
    public void onCreate(Bundle b) {
        super.onCreate(b);
        recvr = new ActivityBroadcastReceiver(this);
        this.registerReceiver(recvr,
            new IntentFilter("MY_ACTION_FROM_SERVICE_STRING"));
    }
} 
```

接收者：

```
public class ActivityBroadcastReceiver extends BroadcastReceiver {
    private MyActivity target;
    public ActivityBroadcastReceiver(MyActivity target) {
        this.target = target;
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        target.onReceiveCommand();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:41:53.387

一种简单的方法（我的项目也采用了这种方法）是创建一个基`Activity`类（最好是*Abstracted*），然后为`extend`它创建正常的活动类。这样，您可以在抽象类中放置一段通用代码，这可以帮助您检测当前可见的活动。

此外，您可以`BroadcastReceiver`在基本活动类中设置一个，无论在您的子活动中单独设置它，它都将始终准备好收听广播，然后将其设置为收听从您的 tcp thinggy 发送的广播。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:36:35.703

不要做任何诡计。实施观察者模式，因此任何活动都会在其中注册其侦听器`onResume()`并取消注册`onPause()`，无论您的`Application`目标代码发生什么，您只需将其告知已注册的侦听器，无论它们在什么活动中

# linux - 安装 ssmtp 以发送电子邮件后的 Phantom cron 作业

> ID：12390590
> 
> 赞同：2
> 
> 时间：2012-09-12T14:34:22.430
> 
> 标签：linux, cron, crontab, cron-task

今天安装 ssmtp 以使用终端发送电子邮件后，我每半小时收到一封电子邮件：

```
from:    root <myuser>@gmail.com
to:  root
date:    Wed, Sep 12, 2012 at 2:09 PM
subject:     Cron <root@127> [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -depth -mindepth 1 -maxdepth 1 -type f -cmin +$(/usr/lib/php5/maxlifetime) ! -execdir fuser -s {} 2>/dev/null \; -delete
mailed-by:   gmail.com

content: PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/memcached.so' - /usr/lib/php5/20090626/memcached.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

这些是从我自己的计算机发送的，就像设置了 cron 作业一样。

但我找不到任何计划中的 cron 工作。

我在我的 root 帐户和普通帐户中检查了 crontab `crontab -e`，但两者都是空的（解释 cron 用法的默认注释除外）。

有没有其他方法可以检查这个 cron 作业的执行位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:47:07.420

在我的 linux 机器上，以下目录都可以包含将运行的 cron 脚本：

```
/etc/cron.d/
/etc/cron.daily/
/etc/cron.hourly/  
/etc/cron.monthly/ 
/etc/cron.weekly/ 
```

更具体地说，我在我的 linux 盒子中也发现了你相同的 cron php 脚本，因为我安装了 php，在这里找到它：

```
cat /etc/cron.d/php5

# /etc/cron.d/php5: crontab fragment for php5
#  This purges session files older than X, where X is defined in seconds
#  as the largest value of session.gc_maxlifetime from all your php.ini
#  files, or 24 minutes if not defined.  See /usr/lib/php5/maxlifetime

# Look for and purge old sessions every 30 minutes
09,39 *     * * *     root   [ -x /usr/lib/php5/maxlifetime ] && [ -d /var/lib/php5 ] && find /var/lib/php5/ -type f -cmin +$(/usr/lib/php5/maxlifetime) -print0 | xargs -n 200 -r -0 rm 
```

php 脚本不发送电子邮件，运行该 php 脚本的 cron 守护程序会发送它。这样做是因为脚本输出了一些错误，并且 cron 向 root 发送了一封电子邮件以通知该错误。因为安装了 ssmtp 发送到 root 的邮件给你。

要使 cron 不发送有关该 php 脚本的电子邮件，请`>/dev/null 2>&1`在 php 脚本行的末尾添加。

然后重启cron`/etc/init.d/crond restart`

这应该可以防止 cron 再次向您发送垃圾邮件:-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:41:33.597

在必须的 linux 发行版中，您将找到一个 /var/spool/cron 目录，其中包含每个具有 cron 作业设置的用户的文件或目录。我会从那里寻找幻影 cron 工作开始。

# facebook - 喜欢 DotNetNuke 的按钮代码

> ID：12390591
> 
> 赞同：-1
> 
> 时间：2012-09-12T14:34:24.427
> 
> 标签：facebook, dotnetnuke

我管理一个使用 DotNetNuke 的网站，我可以添加一个 html 模块，但我试图从这里使用类似按钮[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)它生成代码我，这一切都很好，但是当我将此代码添加到我的网站时它没有任何效果，你能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:46:08.510

我希望这可以帮助你 [dotnetnuke 博客的 facebook 按钮](http://www.dotnetnuke.com/Resources/Blogs/EntryId/2741/Adding-a-Facebook-Like-Button-to-Your-DotNetNuke-Blog.aspx)

# qt - 为什么 Qt QColor 是 QtGUI 的一部分 - 可能的解决方法？

> ID：12390592
> 
> 赞同：6
> 
> 时间：2012-09-12T14:34:31.510
> 
> 标签：qt, qtgui

我正在构建一个应用程序的命令行版本，该应用程序利用 QColor 跨平台处理颜色数据。

出于某种原因，这种数据类型是 QtGUI 的一部分，即使它与 Widget 没有任何关系——有什么方法可以在不与 GUI 链接的情况下获得此类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:52:23.950

可能是因为它包含了 QPainter 类中用于绘制颜色的所有钩子。是的，在一个完美的设计中，可以将所有这些抽象出来，但 Qt 主要是一个 gui 库，时间就是金钱。

但由于它是开源的，您可以复制 Qcolor .h/.cpp 并自己修改它们。如果您只需要颜色空间转换例程，您可能只需使用.h

注意：Qt 是 LGPL，因此对 Qt 代码（但不是您自己的应用程序）的任何修改的源代码都必须提供给您应用程序的任何用户。

# hta - 复制文件时vbscript hta冻结

> ID：12390594
> 
> 赞同：0
> 
> 时间：2012-09-12T14:34:33.520
> 
> 标签：hta, copying

我有一个 HTA，它可以将一组文件复制到 USB 记忆棒中，作为创建 USB 实用程序磁盘的一部分。它可以正常工作，但问题是 HTA 在复制过程运行时变得无响应。

```
Const FOF_CREATEPROGRESSDLG = &H0&
sub CopyFiles(driveletter) ' Copys Files to the new USB Disk showing progress bar 

  if radio(0).checked Then 
    Set objFilesys = CreateObject("Scripting.FileSystemObject")
    Set objShell = CreateObject("Shell.Application")
    driveletter = ((driveletter) & "\")
    Set objFolder = objshell.NameSpace(driveletter)
    pathstring = objFilesys.GetAbsolutePathName("c:") 
    objFolder.CopyHere pathstring & "\" & "*.*", FOF_CREATEPROGRESSDLG
    exit sub
  elseif radio(1).checked Then
    Set objFilesys = CreateObject("Scripting.FileSystemObject")
            set objShell = CreateObject("shell.application")
    pathstring = userselections.txtFile.value   
        if objFilesys.fileExists(pathstring & "\" & "kernel.sys") then
            driveletter = ((driveletter) & "\")
            Set objFolder = objshell.NameSpace(driveletter) 
                    objFolder.CopyHere pathstring & "\" & "*.*", FOF_CREATEPROGRESSDLG
        Else
            msgbox "Error! The Specified path does not contain valid Install Files", vbcritical 
        end if
  end if 
end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:13:58.767

您的问题似乎是 shell.application 的 CopyHere 方法是异步的——它不会在您复制时暂停执行。

“objFolder.CopyHere”启动，然后立即调用“Exit Sub”，导致您的代码在 CopyHere 完成之前失去控制。

有一些[使 CopyHere 同步的示例](https://stackoverflow.com/questions/2888972/write-to-file-using-copyhere-without-using-wscript-sleep)

[这是一种](http://social.msdn.microsoft.com/Forums/fi/clr/thread/760ea95b-4c3e-4f48-a0f6-9d728d5580da)适用于拉链的方法，但可以根据您的需要进行调整。

# visual-studio-2010 - 每次迭代创建新的测试计划还是编辑现有的？

> ID：12390599
> 
> 赞同：0
> 
> 时间：2012-09-12T14:34:52.427
> 
> 标签：visual-studio-2010, testing, tfs, microsoft-test-manager

我们`Microsoft Test Manager`用来测试应用程序。我们最初`Test Plans`为要测试的每个应用程序创建。所以我们的测试计划有这样的结构：

> 应用 A
> 应用 B
> 应用 C

现在，在每次迭代中，我们都会获得新的构建进行测试。

那么，我们应该保持相同的测试计划并编辑其适当的字段（*使用中的构建、迭代、配置*......）还是为每次迭代创建新的更好？像这样的东西：

> 应用程序 A - 迭代 1
> 应用程序 A - 迭代 2
> 应用程序 B - 迭代 1
> 应用程序 B - 迭代 2
> 应用程序 C - 迭代 1
> 应用程序 C - 迭代 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:48:32.650

考虑到定义及其测试计划的一个小变通方法：

> 测试计划过程和计划本身作为与项目团队的其他成员、测试人员、同行、经理和其他利益相关者进行沟通的工具。这种交流使测试计划能够影响项目团队，项目团队也能够影响测试计划，尤其是在组织范围内的测试政策和动机方面；测试范围、目标和要测试的关键领域；项目和产品风险、资源考虑和限制；以及被测项目的可测试性。您可以通过分发一两个测试计划草案和通过审查会议来完成这种沟通。这样的草案将包括许多注释，例如：
> 
> [待定：Jennifer：请告诉我，对于每个系统测试执行周期，将测试项目发布到测试实验室的计划是什么？]
> 
> [Dave - 请让我知道哪个版本的测试工具将用于之前增量的回归测试。]
> 
> 当您记录这些问题的答案时，测试计划就成为了测试人员与项目团队其他成员之间先前讨论和协议的记录。测试计划还可以帮助我们管理变更。在项目的早期阶段，随着我们收集更多信息，我们会修改我们的计划。随着项目的发展和情况的变化，我们会调整我们的计划。书面测试计划为我们提供了衡量此类修订和更改的基准。此外，在主要里程碑更新计划有助于使测试与项目需求保持一致。当我们运行测试时，我们会根据结果对我们的计划进行最终调整。每次出现差异时，您可能没有时间或精力来更新您的测试计划，因为某些项目可能非常动态。在第 6 章 [布莱克，2001 年]，我们描述了一种记录测试计划差异的简单方法，您可以使用数据库或电子表格来实施。您可以将这些更改记录包含在定期测试计划更新中，作为测试状态报告的一部分，或作为项目结束测试摘要的一部分 (c) ISTQB 基础书籍

我建议您更新现有的测试计划，以便在整个应用程序开发生命周期中看到任何修改或更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:26:38.593

为每个新版本创建一个新的测试计划是否有意义？

通常为功能创建测试计划。并在功能（功能规格）发生变化时进行相应更新。但那是在理想世界中。

从这里我可以告诉“使用中的构建、迭代、配置......”你在谈论测试报告而不是计划。为什么没有包含测试计划的文档。以及本文档中的一个单独的
例如表，您将在其中更新（添加一行）用于测试的配置、构建、环境？

# php - 从 the_tags 中排除自定义标签

> ID：12390602
> 
> 赞同：1
> 
> 时间：2012-09-12T14:35:05.500
> 
> 标签：php, wordpress, tags, hide

我使用[the_tags](http://codex.wordpress.org/Function_Reference/the_tags)来显示我的 Wordpress 网站的帖子标签，我使用以下代码：

```
<?php the_tags('',' • ',''); ?> 
```

我需要从打印列表中排除/隐藏两个名为`featured`和的标签。**这样做最有效的方法是什么？**请只建议简单的解决方案，不要提出会减慢包含数千个标签和每小时页面浏览量的网站的心理查询。`billed`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:41:51.703

这是唯一更简单且不加载我正在考虑的页面的方法：

```
<?php
    $links = array();
    foreach(get_the_tags() as $this_tag) {
        if ($this_tag->name != "featured" && $this_tag->name != "billed"){
           $links[] = '<a href="'.get_tag_link($this_tag->term_id).'">'.$this_tag->name.'</a>';
        }
    }
    echo implode(' • ', $links);
?> 
```**

# actionscript-3 - DataGrid.selectedIndex 内存泄漏

> ID：12390605
> 
> 赞同：0
> 
> 时间：2012-09-12T14:35:11.843
> 
> 标签：actionscript-3, apache-flex, memory, datagrid, memory-leaks

我注意到 DataGrid 中的内存泄漏，如果我没有选择一个项目，我可以 GC 我的 dataGrid，如果选择了任何东西，那么 dataGrid 会导致内存泄漏......这是最简单的例子：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               minWidth="955" minHeight="600">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.collections.ArrayList;

            import spark.components.gridClasses.GridColumn;

            [Bindable]
            private var columns:ArrayList = new ArrayList;

            [Bindable]
            private var dataProvider:ArrayCollection = new ArrayCollection;

            private function onCreationComplete():void
            {
                dataProvider.addItem({id:1});

                var column:GridColumn = new GridColumn;
                column.dataField = id;
                columns.addItem(column);

                container.selectedIndex = 0;
            }

            private function gotoOne():void
            {
                currentState = one;
            }

            private function gotoTwo():void
            {
                columns = null;

                currentState = two;
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="one"/>
        <s:State name="two"/>
    </s:states>

    <s:Button click="gotoOne()" label="one"/>
    <s:Button click="gotoTwo()" label="two" left="150"/>

    <s:DataGrid id="container" top="30" includeIn="one" itemDestructionPolicy="auto"
                creationComplete="onCreationComplete()" columns="{columns}"
                dataProvider="{dataProvider}"/>
</s:Application> 
```

如果您注释掉“container.selectedIndex = 0;”行 DataGrid 很好地进行了 GC。任何想法如何使用所选项目 GC DataGrid？我正在使用 flex 4.6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:51:41.290

这不是内存泄漏，而是活动项目的循环。

`onCreationComplete`当您在场景中完成渲染和显示数据网格时调用，您必须在单击网格（`selectedItem`事件）时添加项目。

# oracle - 在 oracle 时间戳列中插入时间戳

> ID：12390606
> 
> 赞同：1
> 
> 时间：2012-09-12T14:35:12.740
> 
> 标签：oracle, timestamp

我有一个表，其中有一列具有数据类型`TIMESTAMP(0)`

当我使用

```
INSERT INTO TEST_TIMESTAMP VALUES(SYSDATE) 
```

它以以下示例格式插入日期

`12-SEP-12 10.31.19.000000000 AM`

我想知道如何在表格中插入以下时间戳格式

`12-SEP-12 10.31.19`和`12-SEP-12 10.31.19 AM`

我尝试`TO_CHAR`在插入`SYSDATE`表格时指定一些格式，但它不起作用。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:40:05.377

当您存储 a`TIMESTAMP`时，它将始终以最大精度（使用小数秒）存储数据。

我认为您想要做的是提供一种格式来显示从数据库中检索日期的日期。

你可以这样做：

```
select to_char(timestampColumnName,'DD-MON-YY HH24:MI:SS') "Date" from test_timestamp 
```

或者

```
select to_char(timestampColumnName,'DD-MON-YY HH:MI:SS AM') "Date" from test_timestamp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T14:07:51.457

您可以很容易地退回它，例如：

> 从 DUAL 中选择 to_char(sysdate,'DD-MON-YY HH24:MI:SS');
> 
> > 在你的情况下使用：
> > 
> > > INSERT INTO TEST_TIMESTAMP(column_name) VALUES(to_char(sysdate,'DD-MON-YY HH24:MI:SS'));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T22:10:50.347

你错过了额外的（）。

```
INSERT INTO TEST_TIMESTAMP
VALUES (TO_TIMESTAMP('12-SEP-12 10.31.19', 'DD-MON-YY HH.MI.SS'));

INSERT INTO TEST_TIMESTAMP
VALUES (TO_TIMESTAMP('12-SEP-12 10.31.19 AM', 'DD-MON-YY HH.MI.SS AM')); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-03T14:50:25.670

```
TO_CHAR(SYSDATE, 'DD/MM/YYYY HH24:MI:SS') 
```

这适用于列类型插入模式`to_char`。

# c++ - 如何仅在特定像素颜色上绘制多边形？

> ID：12390608
> 
> 赞同：5
> 
> 时间：2012-09-12T14:35:19.497
> 
> 标签：c++, opengl

我已经在屏幕上绘制了多个不同颜色的多边形，现在我必须绘制另一个不同颜色的多边形，但是这个多边形应该只绘制在那些具有特定颜色的像素上。

我在自己的“层”中同时渲染每个不同颜色的多边形（=一次一种颜色）。它们可以互相覆盖；最新层覆盖所有以前的层。图像中的黑色是“无多边形”区域：空白区域，它也应该忽略它。

所以，基本上我只是渲染多边形，然后多边形的第 N 层（不是第一层）必须被下一个多边形层掩盖，它下面的其他任何东西都不应该受到影响。

所需方法的图像：

![在此处输入图像描述](../Images/ee5ef62bcdb8e676980a5877a818495c.png)

我可以用什么方法来用 OpenGL 实现这一点？如果可能的话，我更喜欢非着色器解决方案（？）。

我目前能做的唯一方法是将每个图层分别渲染到内存中，然后自己检查像素并“手动”组合图层，但这似乎是一种非常慢的方法，虽然可行，但速度很重要这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:11:39.883

要为此使用模板缓冲区，您可以做的是：

确保您请求的上下文具有模板缓冲区，这是特定于窗口系统的，所以我不会在这里介绍。调用`glGet(GL_STENCIL_BITS)`以确保您获得足够数量的位。

模板缓冲区在每个像素旁边维护一个整数，并允许您在绘制事物时对其进行修改。绘制每一层时，将模板缓冲区设置为在绘制每一层时设置为特定值。你这样做

```
 //draw layer N
 glEnable(GL_STENCIL_TEST);
 glStencilFunc(GL_ALWAYS, N, -1); 
 glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE); 
```

现在，当您绘制每一层时，绘制到屏幕上的最后一个多边形也将其层号存储到模板缓冲区中。

此时，当您想返回并绘制绿色星形时，您只需告诉它仅在模板缓冲区等于 N 的像素上绘制。

```
 //draw only where stencil == N
 glEnable(GL_STENCIL_TEST);
 glStencilFunc(GL_EQUAL, N, -1);
 glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
 drawStar(); 
```

# apache-poi - Apache POI HSSF：从给出不正确链接地址的单元格中读取具有数字符号（#）的超链接地址

> ID：12390611
> 
> 赞同：1
> 
> 时间：2012-09-12T14:35:25.503
> 
> 标签：apache-poi

# 重现问题的步骤：-

1.  创建一个 xls 文件，其中包含一个带有超链接的单元格。（超链接的地址应包含数字符号 (#)。例如“http://www.bailii.org/databases.html#uk”）

2.  尝试读取超链接的地址。它将给出链接地址为“uk”。只有地址数字符号（#）之后的字符被认为是超链接地址。

# 代码片段：-

字符串 strLinkAddress = cell.getHyperlink().getAddress();

它将返回“uk”作为链接地址，而不是“http://www.bailii.org/databases.html#uk”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:06:32.063

改为使用`cell.getHyperlink().getLabel()`。您也可以在此处查看[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.poi/poi/3.8/org/apache/poi/hssf/usermodel/HSSFHyperlink.java#HSSFHyperlink)，了解 POI 如何处理 .xls 文件中可能存在的不同类型的超链接。

**编辑**

好的，所以如果标签与地址不匹配，我们的工作就更难了。这对我来说有点骇人听闻。因此，如果我们检查`HSSFHyperlink`类并查看不同的枚举，类似的东西`http://www.google.com`将`LINK_URL`是我们所期望的类型。类似的东西`http://www.bailii.org/databases.html#uk`会解析为 type `LINK_DOCUMENT`。但它不是一个文档，它是一个 URL！检查 class `HyperlinkRecord`，我在第 245 行之前看到了评论：

`Text describing a place in document. In Excel UI, this is appended to the address, (after a '#' delimiter). This field is optional. If present, the HLINK_PLACE must be set.`

同一类的第699 行`HLINK_PLACE`中`isDocumentLink`的 make 返回 true，因此将其分类为文档链接，而不是 URL 链接。

因此，每当链接中出现 # 时，POI 将其视为文档中的链接，这似乎是一种设计行为。不知道我是否称其为错误，只是它不像您希望的那样工作。

# sql - 如何将 ROW_NUMBER() 分配给列？

> ID：12390612
> 
> 赞同：4
> 
> 时间：2012-09-12T14:35:26.210
> 
> 标签：sql, sql-server, sql-server-2005

读完[这个问题](https://stackoverflow.com/questions/1293390/sql-to-output-line-number-in-results-of-a-query)后，我还有另一个类似的问题。有没有一种简单的方法可以让这个 SQL 语句工作？

```
update [Insurances] set [RowNo]=ROW_NUMBER() over (order by [RowNo]) 
```

我有一`RowNo`列要在删除记录时更新。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T14:40:52.343

```
UPDATE t1 
SET t1.RowNo = s.RowNo  
FROM  [Insurances] t1
INNER JOIN
(
     SELECT Id, ROW_NUMBER() OVER( ORDER BY Somefield DESC) RowNo
     FROM Insurances
) s ON t1.Id = s.Id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:39:54.300

我会将表加入子查询（不确定您是否可以在 SQL Server 中执行此操作）或创建一个视图并将表加入到更新中：

```
CREATE VIEW InsurancesView AS
SELECT insuranceID, ROW_NUMBER() OVER ( ORDER BY RowNo ) AS newRowNo
  FROM Insurances; 
```

（假设您有一个名为 的主键`insuranceID`）

```
UPDATE Insurances AS i
 INNER JOIN InsurancesView AS iv
    ON i.insuranceID = iv.insuranceID
   SET i.RowNo = iv.newRowNo; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-10T14:39:03.167

```
WITH cte AS
(
SELECT Id, ROW_NUMBER() OVER(ORDER BY Name ) RowNo FROM lu_Domain
)
UPDATE dbo.lu_Domain
SET SortOrder = cte.RowNo
FROM dbo.lu_Domain d
INNER JOIN cte ON cte.id = d.Id 
```

# jquery - 使用 jquery 添加动态字段 - 一次克隆多个字段

> ID：12390616
> 
> 赞同：0
> 
> 时间：2012-09-12T14:35:38.437
> 
> 标签：jquery, html, forms, field, fieldset

我想知道是否有人可以提供帮助，我有一个每次需要克隆 4 个字段的表单。

基本上我有一行（这是我想要克隆的，里面有所有东西） - 但是每个元素都有一个数字来识别它，还有一个 ID 等。所以基本上当我添加一个额外的行时，我需要它来更改相应的数字加 1，但是如果连续有 4 个元素，我需要它们每次整体增加 4，所以克隆的元素为 1，将变为 5，即 2 变为 6，依此类推。

我的表单代码如下，希望能更有意义。

我试过使用Sheepit！jquery 插件，但无法使数字彼此顺序增加。

```
<div class="row">
    <div class="element">
        <label id="label-element-15" class="label">
            <span class="labelelementvalue">Weight</span>
            <span class="required">*</span>
        </label>
        <div class="errormessage" id="errormessage-element-15"></div>
        <div class="option-container">
            <input class="af-inputtext af-formvalue  " type="text" name="element-15" id="element-15" value="">
        </div>
        <input type="checkbox" style="display:none" value="15" checked="" name="requiredelement[]" id="requiredelement-15">
    </div>
    <div class="element">
        <label id="label-element-16" class="label">
            <span class="labelelementvalue">Length</span>
            <span class="required">*</span>
        </label>
        <div class="errormessage" id="errormessage-element-16"></div>
        <div class="option-container">
            <input class="af-inputtext af-formvalue  " type="text" name="element-16" id="element-16" value="">
        </div>
        <input type="checkbox" style="display:none" value="16" checked="" name="requiredelement[]" id="requiredelement-16">
    </div>
    <div class="element">
        <label id="label-element-17" class="label">
            <span class="labelelementvalue">Width</span>
            <span class="required">*</span>
        </label>
        <div class="errormessage" id="errormessage-element-17"></div>
        <div class="option-container">
            <input class="af-inputtext af-formvalue  " type="text" name="element-17" id="element-17" value="" >
        </div>
        <input type="checkbox" style="display:none" value="17" checked="" name="requiredelement[]" id="requiredelement-17">
    </div>
    <div class="element">
        <label id="label-element-18" class="label" >
            <span class="labelelementvalue">Height</span>
            <span class="required">*</span>
        </label>
        <div class="errormessage" id="errormessage-element-18"></div>
        <div class="option-container">
            <input class="af-inputtext af-formvalue" type="text" name="element-18" id="element-18" value="">
        </div>
        <input type="checkbox" style="display:none" value="18" checked="" name="requiredelement[]" id="requiredelement-18">
    </div>
</div> 
```

所以基本上它在隐藏复选框中显示 element-[number] 或 value="[number]" 的地方是我想在每个克隆上增加的数字。

任何帮助将非常感激！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:00:22.420

[这是一个小提琴](http://jsfiddle.net/QRPhP/2/)

基本上，你只需要得到一个柜台。

```
var counter = 19; //start index

//clone is a button I created to clone the row
$('#clone').click(function() {
    //clone the first row
    var newRow =  $('div.row:first').clone();

    //for every div.element, update the name, id, value 
    newRow.find('div.element').each(function() {
        $(this).find('label.label').attr('id', 'label-element-' + counter);
        $(this).find('input.af-inputtext').attr('name', 'element-' + counter).attr('id', 'element-' + counter);
        $(this).find('input[type="checkbox"]').val(counter);

        //increment the counter
        counter++;

    });

    //insert the new row after the last one
    $('div.row:last').after(newRow);

    //return false... just because clone is a <a> tag
    return false;

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:52:53.987

试图给你一个例子：

```
var row = $('div.row .element:last').clone(true);
row.find('input[name^=element-]').map(function() {
   this.name = 'element-' + ( parseInt( this.name.replace('element-',''), 10) + 1 );
   this.id = 'element-' + ( parseInt( this.id.replace('element-',''), 10) + 1 );
})
row.appendTo('div.row'); 
```

***[一个例子](http://jsfiddle.net/3CSUq/5/)***

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-05T12:48:43.723

```
<fieldset id="woc_fieldset">
    <legend>Worker Compensation</legend>
    <table border="0">
    <tr>
    <td>Carier </td>
    <td><input type="text" name="worker_compensation_carrier" id="worker_compensation_carrier" value="" required="required"/></td>
    </tr>
    <tr>
    <td>Phone Number</td>
    <td><input type="text" name="worker_compensation_phone" id="worker_compensation_phone" class="phone" value="" required="required"/></td>
    </tr>
    <tr>
    <td>Premium</td>
    <td><input type="text" name="worker_compensation_premium" id="worker_compensation_premium" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Renewal Date</td> 
    <td><input type="text" name="worker_compensation_renewal_date" id="worker_compensation_renewal_date" value=""  required="required"/></td>
    </tr>
    </table>
    <button type="button" id="delete" onclick="remclone();">Delete</button>
</fieldset>
<button type="button" id="add" onclick="cloneit('#woc_fieldset','woc_class1');">Add</button>

<fieldset id="gel_fieldset">
    <legend>General Liability</legend>
    <table border="0">
    <tr>
    <td>Carier</td>
    <td><input type="text" name="general_liability_carrier" id="general_liability_carrier" value="" required="required"/></td>
    </tr>
    <tr>
    <td>Phone Number</td>
    <td><input type="text" name="general_liability_phone" id="general_liability_phone" value="" required="required"/></td>
    </tr>
    <tr>
    <td>Premium</td>
    <td><input type="text" name="general_liability_premium" id="general_liability_premium" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Renewal Date</td>
    <td><input type="text" name="general_liability_renewal_date" id="general_liability_renewal_date" value="" required="required" /></td>
    </tr>
    </table>
    <button type="button" id="delete" onclick="remclone();">Delete</button>
</fieldset>
<button type="button" id="add" onclick="cloneit('#gel_fieldset','woc_class2');">Add</button>

<fieldset id="goh_fieldset">
    <legend>Group Health</legend>
    <table border="0">
    <tr>
    <td>Carier</td>
    <td><input type="text" name="group_health_carrier" id="group_health_carrier" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Phone Number</td>
    <td><input type="text" name="group_health_phone" id="group_health_phone" value=""  required="required" /></td>
    </tr>
    <tr>
    <td>Premium</td>
    <td><input type="text" name="group_health_premium" id="group_health_premium" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Renewal Date</td>
    <td><input type="text" name="group_health_renewal_date" id="group_health_renewal_date" value=""  required="required"/></td>
    </tr>
    </table>
    <button type="button" id="delete" onclick="remclone();">Delete</button>
</fieldset>
<button type="button" id="add" onclick="cloneit('#goh_fieldset','woc_class3');">Add</button>

<fieldset id="prop_fieldset">
    <legend>Property</legend>
    <table border="0">
    <tr>
    <td>Carier</td>
    <td><input type="text" name="property_carrier" id="property_carrier" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Phone Number</td>
    <td><input type="text" name="property_phone" id="property_phone" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Premium</td>
    <td><input type="text" name="property_premium" id="property_premium" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Renewal Date</td>
    <td><input type="text" name="property_renewal_date" id="property_renewal_date" value=""  required="required"/></td>
    </tr>
    </table>
    <button type="button" id="delete" onclick="remclone();">Delete</button>
</fieldset>
    <button type="button" id="add" onclick="cloneit('#prop_fieldset','woc_class4');">Add</button>

<fieldset id="com_fieldset">
    <legend>Commercial Auto</legend>
    <table border="0">
    <tr>
    <td>Carier</td>
    <td><input type="text" name="commercial_auto_carrier" id="commercial_auto_carrier" value=""  required="required"/></td>
    </tr>
    <tr>
    <td>Phone Number</td>
    <td><input type="text" name="commercial_auto_phone" id="commercial_auto_phone" value="" required="required" /></td>
    </tr>
    <tr>
    <td>Premium</td>
    <td><input type="text" name="commercial_auto_premium" id="commercial_auto_premium" value="" required="required" /></td>
    </tr>
    <tr>
    <td>Renewal Date</td>
    <td><input type="text" name="commercial_auto_renewal_date" id="commercial_auto_renewal_date" value="" required="required" /></td>
    </tr>
    </table>
    <button type="button" id="delete" onclick="remclone();">Delete</button>
</fieldset>
    <button type="button" id="add" onclick="cloneit('#com_fieldset','woc_class5');">Add</button>

<fieldset>
    <legend>Upload Document</legend>
    <table border="0">
    <tr>
    <td>Policy</td>
    <td><input type="file" name="policy_pdf" id="file"></td>
    </tr>
    <tr>
    <td>Certificate Of Insurance</td>
    <td><input type="file" name="certificate_of_insurance_pdf" id="file"></td>
    </tr>
    <tr>
    <td>Loss Run Permission</td>
    <td><input type="file" name="loss_run_permission_pdf" id="file"></td>
    </tr>
    </table>
</fieldset> 
```

# jquery - 尝试使用 jQuery 在“this”的滚动事件中获取 offset() 值，但为此获得“undefined”

> ID：12390619
> 
> 赞同：0
> 
> 时间：2012-09-12T14:35:42.197
> 
> 标签：jquery

我正在尝试`offset()`使用 jQuery 获取“this”的滚动事件中的值，但为`this`.

我的特定用例的代码，并对发生的情况进行了评论：

```
$canvas_frame.contents().find(".ar4 .Tm.aeJ").scroll(function(event){
        log("SCROLLING!");
        log(this); // successfully logs the DOM element in the console
        log($(this).offset()); // ERROR
        log($(this).css("top")); // works
    });
}; 
```

因此，虽然所有元素都被成功检测到，但在 jQuery 选择器元素上调用 .offset() 方法会失败：`Uncaught TypeError: Cannot read property 'pageYOffset' of undefined`

我怎样才能在不失败的情况下获得该价值？

### 更新

我已更正此示例实际收到的错误消息。

### 更新 2

我注意到的是，将元素记录到控制台需要一点时间，好像最初 jQuery 结果是空的，但后来它被填充了。有什么想法吗？

### 更新 3

我用 JSFiddle 创建了一个演示，它在一个简单的页面中工作。[http://jsfiddle.net/victorbstan/PBfNu/](http://jsfiddle.net/victorbstan/PBfNu/) 但是，我的代码试图在 iframe 中查找元素，脚本通过 Chrome 扩展嵌入到页面中。我仍然想知道为什么我的代码不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T14:38:38.800

这不是一个完整的答案，因为我仍然不确定如何解决它。但这可能会有所帮助。

我认为这是由[http://crbug.com/20773](http://crbug.com/20773)引起的。我最初尝试使用此补丁：

```
$ sed -ri 's/(win\.page[XY]Offset)/win \&\& \1/' jquery.js 
```

那时错误消失了，尽管我有时会得到`null`结果`offset()`。

# extjs - ExtJS 中的 waitMsg 消息

> ID：12390624
> 
> 赞同：0
> 
> 时间：2012-09-12T14:35:56.623
> 
> 标签：extjs, extjs4.1, downtime

我正在使用

```
Ext.getCmp('my_form').submit(
{
  url: 'http://does-not-respond.onion/',
  method : 'POST',
  waitMsg : 'Please wait...',
  timeout: 5,
  params :
  { 
```

“请稍候”窗口不会消失。我怎样才能让它消失并提醒消息？如果服务器没有响应，我希望它消失并显示错误消息，就像互联网已经消失一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:08:46.807

尝试检查`failureType`表单操作的失败

```
Ext.getCmp('my_form').submit({
  url     : 'http://does-not-respond.onion/',
  method  : 'POST',
  waitMsg : 'Please Wait...',
  timeout : 5,
  params  : {},
  success : function(){console.log('success...');},
  failure: function(form, action){
                if (action.failureType === Ext.form.action.Action.CONNECT_FAILURE) {
                    Ext.Msg.alert('Error',
                        'Status:'+action.response.status+': '+
                        action.response.statusText);
                }
            }
}); 
```

参考[Ext.form.action.Action-property-failureType](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.action.Action-property-failureType)

# javascript - 如何移动到数组的上一个/下一个元素

> ID：12390626
> 
> 赞同：21
> 
> 时间：2012-09-12T14:36:01.743
> 
> 标签：javascript, arrays

假设我们有一个整数列表：

```
var fibonacci = [1,1,2,3,5,8,13,21]; 
```

我希望能够以下列方式获取下一个和上一个元素（只是移动元素指针，而不修改数组）（例如，可能没有原型来重新定义 Array 接口，但为什么不这样做）：

```
fibonacci.prev(); // returns false
fibonacci.next(); // returns 1
fibonacci.next(); // returns 1
fibonacci.next(); // returns 2
fibonacci.next(); // returns 3
fibonacci.next(); // returns 5
fibonacci.next(); // returns 8

fibonacci.prev(); // returns 5

fibonacci.next(); // returns 8
fibonacci.next(); // returns 13
fibonacci.next(); // returns false 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-12T14:39:26.797

如果要将列表保留为`Array`，则必须对其进行更改`[[prototype]]`以使其看起来像一个可迭代的集合：

```
Array.prototype.next = function() {
    return this[++this.current];
};
Array.prototype.prev = function() {
    return this[--this.current];
};
Array.prototype.current = 0; 
```

现在每个人都`Array`将拥有方法`prev`和`next`，以及`current`指向“当前”元素的属性。一个警告：`current`属性可以被修改，从而导致不可预测的结果。

Post scriptum：我不建议在索引超出范围时进行制作`prev`和`next`返回。`false`如果你真的想要，你可以将方法更改为：

```
Array.prototype.next = function() {
    if (!((this.current + 1) in this)) return false;
    return this[++this.current];
}; 
```

**2016 年年中更新**

我正在更新这个答案，因为它似乎仍在收到意见和投票。我应该澄清一下，给定的答案是*概念证明，*通常*扩展本机类的原型是一种不好的做法*，应该在生产项目中避免。

特别是，这并不多，因为它会弄乱`for...in`循环 - 对于数组应该始终避免这种做法，而且对于遍历它们的元素*绝对是一种不好的做法 - 而且因为从 IE9 开始，我们可以可靠地做到这一点：*

```
Object.defineProperty(Array.prototype, "next", {
    value: function() { return this[++this.current]; },
    enumerable: false
}); 
```

主要问题是扩展本机类*不是面向未来的*，即 ECMA 可能会`next`为数组引入一种可能与您的实现不兼容的方法。即使是非常常见的 JS 框架，它也已经发生了——最后一种情况是[MooTools 的`contains`数组扩展](https://esdiscuss.org/topic/having-a-non-enumerable-array-prototype-contains-may-not-be-web-compatible)，它导致[ECMA 将名称更改为`includes`](http://www.2ality.com/2016/02/array-prototype-includes.html)（糟糕的举动，IMO，因为我们已经`contains`在[`DOMTokenList`](https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList)像`Element.classList`.

话虽如此，并不是说你*不能*扩展原生原型，而是你应该知道你在做什么。我能给你的第一个建议是选择不会与未来标准扩展冲突的名称，例如，`myCompanyNext`而不是仅仅`next`. 这会让你失去一些代码优雅，但会让你睡得安稳。

更好的是，在这种情况下，您可以有效地扩展`Array`类：

```
function MyTraversableArray() {
    if (typeof arguments[0] === "number")
        this.length = arguments[0];
    else this.push.apply(this, arguments);

    this.current = 0;
}
MyTraversableArray.prototype = [];
MyTraversableArray.prototype.constructor = MyTraversableArray;
MyTraversableArray.prototype.next = function() {
    return this[++this.current];
};
MyTraversableArray.prototype.prev = function() {
    return this[--this.current];
}; 
```

此外，在 ES6 中，扩展原生类更容易：

```
class MyTraversableArray extends Array {
    next() {
        return this[++this.current];
    }
} 
```

唉，转译器[很难处理原生类扩展](https://phabricator.babeljs.io/T1424)，并且 Babel 删除了它的支持。但这是因为它们不能*完全*复制对我们的案例没有影响的一些行为，所以你可以坚持使用上面的旧 ES3 代码。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-12T15:16:58.807

我通常建议不要添加东西，`Array.prototype`因为那里有大量非常糟糕的 JavaScript。例如，如果您设置`Array.protoype.next = function () {}`并且有人有以下代码，那么就会出现问题：

```
var total = 0, i, myArr = [0,1,2];
for(i in myArr) {
    total += myArr[i];
}
total; //is probably "3next" 
```

这种对循环的不良使用在`for-in`外面非常普遍。`Array`所以你通过添加到的原型来自找麻烦。但是，构建一个包装器来做你想做的事情是很容易的：

```
var iterifyArr = function (arr) {
    var cur = 0;
    arr.next = (function () { return (++cur >= this.length) ? false : this[cur]; });
    arr.prev = (function () { return (--cur < 0) ? false : this[cur]; });
    return arr;
};

var fibonacci = [1, 1, 2, 3, 5, 8, 13];
iterifyArr(fibonacci);

fibonacci.prev(); // returns false
fibonacci.next(); // returns 1
fibonacci.next(); // returns 1
fibonacci.next(); // returns 2
fibonacci.next(); // returns 3
fibonacci.next(); // returns 5
fibonacci.next(); // returns 8
fibonacci.prev(); // returns 5
fibonacci.next(); // returns 8
fibonacci.next(); // returns 13
fibonacci.next(); // returns false 
```

几点注意事项：

首先，您可能希望它返回`undefined`，而不是`false`超过终点。其次，由于此方法`cur`使用闭包隐藏，因此您无法在数组上访问它。所以你可能想要一个`cur()`方法来获取当前值：

```
//Inside the iterifyArr function:
    //...
    arr.cur = (function () { return this[cur]; });
    //... 
```

最后，您的要求不清楚“指针”保持多远。以如下代码为例（假设`fibonacci`设置如上）：

```
fibonacci.prev(); //false
fibonacci.prev(); //false
fibonacci.next(); //Should this be false or 1? 
```

在我的代码中，它会是`false`，但您可能希望它是`1`，在这种情况下，您必须对我的代码进行一些简单的更改。

哦，因为它是函数返回`arr`，所以你可以在定义它的同一行上“迭代”一个数组，如下所示：

```
var fibonacci = iterifyArr([1, 1, 2, 3, 5, 8, 13]); 
```

这可能会让你的事情变得更干净。您还可以通过重新调用`iterifyArr`数组来重置迭代器，或者您可以编写一个方法来轻松重置它（只需设置`cur`为 0）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-22T09:23:40.070

下**一个**方面现在内置到数组中，因为从 ES2015 开始，数组是*可迭代*的，这意味着您可以获得具有`next`方法的迭代器（但请继续阅读“prev”部分）：

```
const a = [1, 2, 3, 4, 5];
const iter = a[Symbol.iterator]();
let result;
while (!(result = iter.next()).done) {
  console.log(result.value);
}
```

迭代器只能前进，而不是双向。当然，您通常不会显式使用迭代器，通常会将其用作某些迭代构造的一部分，例如`for-of`：

```
const a = [1, 2, 3, 4, 5];
for (const value of a) {
  console.log(value);
}
```

您可以轻松地给自己一个双向迭代器：

1.  通过制作一个接受数组并返回迭代器的独立函数，或者

2.  通过子类`Array`化和覆盖子类中的迭代器，或者

3.  通过用您自己的替换默认`Array`迭代器（只要确保它在前进时与默认迭代器完全相同！）

这是一个带有子类的示例：

```
class MyArray extends Array {
  // Define the iterator function for this class
  [Symbol.iterator]() {
    // `index` points at the next value we'll return
    let index = 0;
    // Return the iterator
    return {
      // `next` returns the next
      next: () => {
        const done = index >= this.length;
        const value = done ? undefined : this[index++];
        return { value, done };
      },
      // `prev` returns the previous
      prev: () => {
        const done = index == 0;
        const value = done ? undefined : this[--index];
        return { value, done };
      }
    };
  }
}

// Demonstrate usage:
const a = new MyArray("a", "b");
const i = a[Symbol.iterator]();
console.log("next", JSON.stringify(i.next()));
console.log("next", JSON.stringify(i.next()));
console.log("next", JSON.stringify(i.next()));
console.log("prev", JSON.stringify(i.prev()));
console.log("prev", JSON.stringify(i.prev()));
console.log("prev", JSON.stringify(i.prev()));
console.log("next", JSON.stringify(i.next()));
```

```
.as-console-wrapper {
  max-height: 100% !important;
}
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-04T21:28:38.310

ES6 为我们提供了生成器函数，可以让我们非常简单地打印出一个数组，如下所示

```
function* data() {
  yield* [1, 1, 2, 3, 5, 8, 13, 21];
}

var fibonnacci = data();

fibonnacci.next()
> {value: 1, done: false}

fibonnacci.next()
> {value: 1, done: false}

fibonnacci.next()
> {value: 2, done: false}

fibonnacci.next()
> {value: 3, done: false}

fibonnacci.next()
> {value: 5, done: false}

fibonnacci.next()
> {value: 8, done: false}

fibonnacci.next()
> {value: 13, done: false}

fibonnacci.next()
> {value: 21, done: false}

fibonnacci.next()
> {value: undefined, done: true} 
```

但是，[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators)中确实存在一个示例程序，它可以帮助将斐波那契数列打印到我们喜欢的元素。

```
function* fibonacci() {
  var fn1 = 0;
  var fn2 = 1;
  while (true) {  
    var current = fn1;
    fn1 = fn2;
    fn2 = current + fn1;
    var reset = yield current;
    if (reset) {
        fn1 = 0;
        fn2 = 1;
    }
  }
}

var sequence = fibonacci();
console.log(sequence.next().value);     // 0
console.log(sequence.next().value);     // 1
console.log(sequence.next().value);     // 1
console.log(sequence.next().value);     // 2
console.log(sequence.next().value);     // 3
console.log(sequence.next().value);     // 5
console.log(sequence.next().value);     // 8
console.log(sequence.next(true).value); // 0
console.log(sequence.next().value);     // 1
console.log(sequence.next().value);     // 1
console.log(sequence.next().value);     // 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-20T06:16:00.347

比修改原生对象的原型更安全的是为额外需要的数组函数创建工厂函数：

```
const moreArrayFunctions = arr => ({
    current: 0,
    arr,
    next(){

        if( this.current >= ( this.arr.length - 1 ) ){
             this.current = this.arr.length - 1;
        }else{
            this.current++;
        }

        return this.arr[this.current];
    },
    prev(){

        if( this.current <= 0 ){
            this.current = 0;
        }else{
            this.current--;
        }

        return this.arr[this.current];
    }
});

const fibonacci = moreArrayFunctions([1,1,2,3,5,8,13,21]);

fibonacci.next();
fibonacci.prev();
fibonacci.current 
```

# asp.net - 将复选框绑定到详细信息视图

> ID：12390628
> 
> 赞同：0
> 
> 时间：2012-09-12T14:36:06.080
> 
> 标签：asp.net

我正在尝试将复选框绑定到详细信息视图作为布尔值 1,0。数据库列设置为位而不是空值。下面是我的代码，

```
<EditItemTemplate>
    <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%#  Convert.ToBoolean(Eval("level"))%>' />
</EditItemTemplate>
<ItemTemplate>
    <asp:CheckBox Enabled="false" ID="CheckBox1" runat="server"  Checked='<%#  Convert.ToBoolean(Eval("level"))%>' />
</ItemTemplate>
<InsertItemTemplate>
    <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%#  Convert.ToBoolean(Eval("level"))%>' />
</InsertItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:00:46.780

当您使用编辑或插入模板时，您必须使用`Bind`. `Eval`只是一种方式，因此您的对象正在尝试插入空值。

```
<EditItemTemplate>
    <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("level") %>' />
</EditItemTemplate>
<ItemTemplate>
    <asp:CheckBox Enabled="false" ID="CheckBox1" runat="server" Checked='<%#  Convert.ToBoolean(Eval("level"))%>' />
</ItemTemplate>
<InsertItemTemplate>
    <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("level") %>' />
</InsertItemTemplate> 
```

# jquery - 修改现有的 jQuery 以在滑块幻灯片下方设置动画按钮

> ID：12390632
> 
> 赞同：1
> 
> 时间：2012-09-12T14:36:11.307
> 
> 标签：jquery, html, function, slideshow, uislider

希望有人可以帮助解决这个问题。

我正在调整网站上的一些代码（我的 jQuery 知识相当初级）。

前面的编码器使用索引来为幻灯片下的小方块（以及许多其他的小方块）制作动画。

代码摘录如下所示：

```
$(document).ready(function(event){
SlideAreaData = [
// Our Commitment
    {
        Blurbs:[
            // 0 
            "We believe that businesses...",
            // 1
            "We can...",
            // 2
            "We will always..."
        ],
        SlideData:{// SlideNumber : [BlurbIndex,ListIndex,HighlightClass,SlideArrow]
            // Our Commitment landing
            0 :[0,0,'colour_blue','images/BlueArrow'],
            // Our Commitment
            1 :[1,1,'colour_blue','images/BlueArrow'],
            2 :[2,2,'colour_blue','images/BlueArrow']
        },
        Links:[[0,'background_blue'],[1,'background_blue'],[2,'background_blue'],[3,'']]// length of slides at end
    }
... 
```

滑块功能

```
 $('.slidebox_window').each(function(i,e){
    /*ContentArea*/
    var Blurbs = SlideAreaData[i].Blurbs;
    var SlideData = SlideAreaData[i].SlideData;
    var LinkData = SlideAreaData[i].Links;

    var SlideView = 0;
    var SlideBlurb = 0;
    var SlideLinkIndex = 0;
    var SlideHighlight = 'colour_blue';
    var _Startup = true;

    var SlideWindow = $(e);
    var Slides = $(e).children('.slidebox_slide');
    var Navlist = $(e).parentsUntil('#ContentArea').find('.slidebox_list > li');
    var BlurbDiv = $(e).parentsUntil('#ContentArea').find('.slidebox_blurb');
    var Progress = $(e).parentsUntil('#ContentArea').find('.slidebox_progress');

    var ButtonLeftImg = SlideWindow.find('.slidebox_nextz>img').eq(0);
    var ButtonRightImg = SlideWindow.find('.slidebox_nextz>img').eq(1);

    Navlist.each(function(i,e){
        $(e).click(function(event){
            SkipToSlide(LinkData[i][0]);
        });
    });

    var SkipToSlide = function(next,direction){
        if(direction != 1)
            direction = -1;
        if(next==SlideView || Slides.is(':animated') || BlurbDiv.is(':animated'))
            return;
        Slides.eq(next).css({'left':direction*640});
        Slides.filter(':eq('+SlideView+'),:eq('+next+')').animate({left:(direction==1?'-':'+')+'=640'},500,'easeOutElastic')
        HighlightSlide(next);
    };

    var HighlightSlide = function(next){
        if(next == SlideView /*&& !_Startup*/)
            return;
        info = SlideData[next];// 0:BlurbIndex, 1:LinkIndex, 2:HighlightClass

        size = LinkData[info[1]+1][0] - LinkData[info[1]][0];
        current = next - LinkData[info[1]][0];
        highlight = LinkData[info[1]][1];
        if(info[1] != SlideLinkIndex || _Startup){
            // Highlight active link
            Navlist.eq(SlideLinkIndex).removeClass(SlideHighlight);
            Navlist.eq(info[1]).addClass(info[2]);
            // Manage progress display
            if(size > 1){
                Progress.html(Array(size+1).join('<div></div>'));
                Progress.children().each(function(i,e){
                    $(e).on('click',function(){
                        SkipToSlide(LinkData[info[1]][0]+i);
                    }).css('cursor','pointer');
                });
            }else{
                Progress.html('');
            }
            SlideHighlight = info[2];
            SlideLinkIndex = info[1];
        }
        //SlideWindow.find('.slidebox_nextz>img').attr('src',info[3]);
        ButtonLeftImg.attr('src',info[3]+'L.png');
        ButtonRightImg.attr('src',info[3]+'R.png');
        Progress.children().removeClass(highlight).eq(current).addClass(highlight);

        if(SlideBlurb != info[0] /*|| _Startup*/){
            text = Blurbs[info[0]];
            test = BlurbDiv.clone().appendTo('#TestArea');//$('#TestArea').
            test.html(text).css({'height':'auto','width':BlurbDiv.outerWidth(true)});

            BlurbDiv.animate({opacity:0},250,function(){
                BlurbDiv.animate({height:test.height()},250,function(){
                    BlurbDiv.html(text);
                    BlurbDiv.animate({opacity:1},250,function(){
                        test.remove();
                    });
                });
            });
            SlideBlurb = info[0];
        }

        SlideView = next;
    };
    Highlighters[i] = HighlightSlide; 
```

然后每张幻灯片下的html是：

```
 <div style="top:-3px;position:relative;left:206px;height:57px;width:212px;text-align:center;" class="slidebox_progress">
        <div></div>
        <div></div>
        <div></div>
    </div> 
```

我已经尝试了索引的所有可能变化，以尝试让我的部分正常工作。只是无法解决。

所有代码都可在[http://www.leanproductions.co.uk/dev/](http://www.leanproductions.co.uk/dev/)

我正在努力工作的部分在底部，我们的承诺。

抱歉，这里有这么多代码，其中大部分可能不需要，正如我所说的那样，链接中的所有内容都可用。

任何帮助都将不胜感激。卢克

# php - 通过 PHP 插入标签 v 类别

> ID：12390635
> 
> 赞同：0
> 
> 时间：2012-09-12T14:36:16.753
> 
> 标签：php, wordpress, tags, categories

我试图插入类别

```
$apples = "granny smith" 
```

作为新帖子的一部分。

我可以使用以下脚本轻松创建带有 TAG 的新帖子：

```
$my_post = array(
    'post_title' => $title,
    'post_content' => $content,
    'post_status' => 'publish',
    'post_author' => 1,
    'tags_input' => $apples,
    'post_type' => 'post'
    );
wp_insert_post( $my_post ); 
```

但出于某种原因，尽管 WP 法典列出

```
'post_category' 
```

对于类别，以下代码不会创建新类别“granny smith”，而是将新帖子输入为“未分类”：

```
$my_post = array(
    'post_title' => $title,
    'post_content' => $content,
    'post_status' => 'publish',
    'post_author' => 1,
    'post_category' => $apples
    'post_type' => 'post'
    );
wp_insert_post( $my_post ); 
```

有人可以帮我写代码吗？我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:40:57.123

根据[文档](http://codex.wordpress.org/Function_Reference/wp_insert_post)，看起来应该将类别添加为具有类别 ID 的数组：

```
$id_for_category_ganny_smith = 12;
$my_post = array(
    'post_title' => $title,
    'post_content' => $content,
    'post_status' => 'publish',
    'post_author' => 1,
    'post_category' => array($id_for_category_ganny_smith),
    'post_type' => 'post'
    );
wp_insert_post( $my_post ); 
```

该文档指出：

> 类别需要作为与数据库中的类别 ID 匹配的整数数组传递。即使仅将一个类别分配给帖子也是如此。

如果您不知道要添加的类别的 id，可以尝试以下操作：

```
$apples_slug = "granny_smith"
$my_post = array(
    'post_title' => $title,
    'post_content' => $content,
    'post_status' => 'publish',
    'post_author' => 1,
    'post_type' => 'post'
    );
$post_ID = wp_insert_post( $my_post );
wp_set_post_terms( $post_ID, $apples_slug, 'category') 
```

# css - 当使用 Selenium2/Webdriver 将其编码为 div 时，如何断言复选框被选中

> ID：12390636
> 
> 赞同：0
> 
> 时间：2012-09-12T14:36:19.230
> 
> 标签：css, checkbox, webdriver, selenium-webdriver

我有一个不是“真实”复选框的复选框。CSS看起来像：

```
<li id="privileges:1" class="ui-tree-parent default" data-rowkey="1">
   <div class="ui-tree-node ui-state-default" aria-checked="true" aria-selected="true" aria-expanded="true" role="treeitem">
      <span class="ui-helper-clearfix ui-tree-node-content ui-corner-all ui-tree-selectable-node">
         <span class="ui-tree-icon ui-icon ui-icon-triangle-1-s"></span>
         <span></span>
         <div class="ui-tree-checkbox ui-widget">
            <div class="ui-tree-checkbox-box ui-widget ui-corner-all ui-state-default">
               <span class="ui-tree-checkbox-icon ui-icon ui-icon-check"></span> 
```

选中复选框时会出现最后一个跨度。

我的同事有以下代码，经过审查，它似乎是黑魔法，不应该验证任何东西：

```
WebElement checkedBox = findElementByXpath("//li[@id='privileges:1']/div[@aria-checked='true']/span/div/div");
@SuppressWarnings("unused")
Boolean isChecked;
isChecked = checkedBox.findElement(By.xpath("//li[@id='privileges:1']/div[@aria-checked='true']/span/div/div")).isSelected(); 
```

使用 Selenium2/Webdriver 检查复选框的最佳方法是什么？

这不起作用：

```
WebElement checkedBox = findElementByClass("//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon.ui-icon.ui-icon-check']");
assertTrue(checkedBox.isEnabled()); 
```

也没有：

```
WebElement checkedBox = findElementByClass("//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon.ui-icon.ui-icon-check']");
assertTrue(checkedBox.isDisplayed()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:20:29.370

您有句号/句号，空格应该在 XPath 中。

句点/句号仅适用于 CSS 选择器。此外，您似乎正在使用 By ClassName 函数并传入 XPath 查询。我会假设这只是一个错字。

这就是你所拥有的：

```
//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon.ui-icon.ui-icon-check'] 
```

它应该是：

```
//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon ui-icon ui-icon-check'] 
```

提示以防你不知道：如果你打开 Chrome 开发者工具，直接进入控制台，输入：

```
$x("//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon.ui-icon.ui-icon-check']") 
```

你会看到它什么也没返回。

这样做：

```
$x("//li[@id='privileges:1']/div/span/div/div/span[@class='ui-tree-checkbox-icon ui-icon ui-icon-check']") 
```

它会返回一些东西。Firebug 和 Chrome 开发者工具都可以用来执行 CSS**和**XPath 选择器。因此，您可以查看问题出在 Selenium 还是您正在使用的选择器上。

# c# - 如何将 Code first Fluent API 用于继承数据结构？

> ID：12390645
> 
> 赞同：0
> 
> 时间：2012-09-12T14:36:46.843
> 
> 标签：c#, entity-framework, ef-code-first, datamapper

我有一个代码优先应用程序，它的定义如下：

```
public abstract class Entity
{
    [Key]
    public int Id { get; set; }

    public DateTime CreatedOn { get; set; }
}

public class Post : Entity
{
    public string Text { get; set; }
    public virtual ICollection<UserObject> Likes { get; set; }
} 

public class Blog : Post
{
    public string Title { get; set; }
    public string Content { get; set; }
}

public class Comment : Post
{
    public string Content { get; set; }
    public virtual Post Parent { get; set; }
}

public class UserObject : Entity
{
    public string Username { get; set; }
    public string Login { get; set; }
}

public class Profile : UserObject
{
    public DateTime DoB { get; set; }
    public string Avatar { get; set; }
    public ICollection<Blog> Blogs { get; set; } 
} 
```

这个想法是：一个个人资料可以有很多博客，一篇文章（博客或评论）可以有很多赞。我想要在数据库上这样的东西：

表帖

```
Id
... 
```

表配置文件

```
Id
... 
```

表帖赞

```
Id
PostId
UserId 
```

表简介博客

```
Id
UserId
BlogId 
```

我试过但无法获得 Fluent API 来生成这些方案。我尝试了多对多关系，但是因为我的数据结构有继承，所以它不起作用。

如何在 Fluent API 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:49:23.857

这是一个对我有用的模式：

流畅的映射：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Profile>()
                .Map(m => m.ToTable("Profiles"));

            modelBuilder.Entity<Post>()
                .HasMany(p => p.Likes)
                .WithMany()
                .Map(m =>
                    {
                        m.ToTable("PostLikes");
                        m.MapLeftKey("PostId");
                        m.MapRightKey("UserId");
                    });

            modelBuilder.Entity<Profile>()
                .HasMany(p => p.Blogs)
                .WithMany()
                .Map(m =>
                {
                    m.ToTable("ProfileBlogs");
                    m.MapLeftKey("UserId");
                    m.MapRightKey("BlogId");
                });
        } 
```

创建了这个数据库：

![在此处输入图像描述](../Images/90300fa1c6f4567ffdec37e82a7fb13e.png)

# c# - 如何编辑我们使用存储过程从数据库中获取的值？

> ID：12390648
> 
> 赞同：0
> 
> 时间：2012-09-12T14:36:58.480
> 
> 标签：c#, sql-server, winforms

我有点卡在这里。我想编辑使用存储过程从数据库中获取的某些字段。我正在尝试发送已将所有内容存储在“电子邮件”表中的电子邮件信息。从“电子邮件”表中获取信息后，我想编辑从数据库中获取的正文信息，然后使用我创建的电子邮件服务将其发送给用户。以下是我到目前为止所做的。我创建了一个哈希表并在那里存储了值：

```
MembershipUser qiUser = ((GenericMembershipProvider)Membership.Provider).GetUser(objSubAccount.CreatedByUser, false);

            Hashtable mailKeywords = new Hashtable();
            mailKeywords.Add("[AccountNumber]", objSubAccount.AccountNumber);
            mailKeywords.Add("[AccountSubmissionDate]", objSubAccount.SubmittedOn.ToString());
            mailKeywords.Add("[FBONameTitle]", objSubAccount.FBO1FirstName.Trim().Length == 0 && objSubAccount.FBO1MiddleInitial.Trim().Length == 0 && objSubAccount.FBO1LastName.Trim().Length == 0
            ? objSubAccount.FBO1AccountTitling : objSubAccount.FBO1FirstName + " " + objSubAccount.FBO1MiddleInitial + " " + objSubAccount.FBO1LastName);
            mailKeywords.Add("[QIName]", objSubAccount.CompanyName);
            mailKeywords.Add("[QIUserName]", qiUser.UserName);
            mailKeywords.Add("[QIUserEmailAddress]", qiUser.Email);
            mailKeywords.Add("[WireEmailNotification1]", objSubAccount.WireEmailNotification1);
            mailKeywords.Add("[WireEmailNotification2]", objSubAccount.WireEmailNotification2);
            mailKeywords.Add("[WireEmailNotification3]", objSubAccount.WireEmailNotification3); 
```

现在我已将这些值分配给类 EmailContent 的不同属性，如下所示：

```
EmailContent objEmailContent = new EmailContent();
            objEmailContent = EmailContent.GetEmailContentType(EmailContentType.WireroomGroup);
            objEmailContent.To = BancorpConfig.WireroomReceiverEmail;
            objEmailContent.Sender = BancorpConfig.WireRoomSenderEmail;
            objEmailContent.Subject = EmailContent.ReplacePlaceHolder(objEmailContent.Subject, mailKeywords);
            objEmailContent.Body = EmailContent.ReplacePlaceHolder(objEmailContent.Body, mailKeywords);
            objEmailContent.From = BancorpConfig.WireRoomSenderEmail;
            objEmailContent.MailDate = System.DateTime.Now; 
```

现在我想要做的是，当我在 objEmailContent.Body 中获得值时，我想编辑它，就好像它们在 WireEmailNotificaion1 列中没有值一样，然后应该删除括号“（）”。如果它们是 WireEmailNotification1，则该值应显示为 (aa@gmail.com) 否则不应显示任何值，也应删除括号。

邮件正文如下：

```
New QI Sub Account Application Submitted<br />
Account Number: ([AccountNumber])<br />
FBO Name/Account Title: ([FBONameTitle]) <br />
Application Submitted Date: ([AccountSubmissionDate])<br />
QI Name: ([QIName])<br />QI User Name: ([QIUserName])<br />
QI User Email Address: ([QIUserEmailAddress])<br />
Wire Email Notification 1: ([WireEmailNotification1])<br/>
Wire Email Notification 2: ([WireEmailNotification2])<br/>
Wire Email Notification 3: ([WireEmailNotification3])<br/>
Please add account to the Caller ID’s on Schedule A of the Wire Agreement. 
```

如果它们在 WireEmailNotification1、WireEmailNotification2、WireEmailNotification3 中没有值，我将如何从正文中删除括号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:57:26.143

如果我理解正确，您有一个模板，并且您想从数据库中获取一些值并将其放入消息正文中。当我有这个要求时，我实际上创建了 HTML 模板以及您想要放置动态内容的位置，定义了一些标签（就像您所做的那样），然后找到每个标签并将其替换为相应的字段。

其他选项（不是很好），那么既然您在数据库中拥有所有内容，您可以编写一个程序给您最终的消息正文（很容易在程序中映射字段）。您可以为此使用 Exec 'select * from '。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:05:54.433

这对你来说有可能吗？：

*   从模板中删除括号。
*   仅在需要时使用三元运算符添加它们

例子：

```
mailKeywords.Add("[WireEmailNotification1]", objSubAccount.WireEmailNotification1 != "" ? "(" + objSubAccount.WireEmailNotification1 + ")" : "" ); 
```

这与说（注意括号）相同：

```
 if (objSubAccount.WireEmailNotification1 != "")
        {
            mailKeywords.Add("[WireEmailNotification1]", "(" + objSubAccount.WireEmailNotification1+ ")" ); 
        }
        else
        {
            mailKeywords.Add("[WireEmailNotification1]","");
        } 
```

# objective-c - 我想知道我是否需要在项目的某些文件中通知 URL 网络服务（我的应用程序访问）

> ID：12390651
> 
> 赞同：3
> 
> 时间：2012-09-12T14:37:06.107
> 
> 标签：objective-c, ios, web-services, app-store

我正在开发一个访问 Web 服务的 iOS 应用程序，我想知道是否需要在项目的任何文件中通知 URL 网络服务（我的应用程序访问），以便在应用程序批准期间进行分析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:41:37.123

无需通知 Apple 您正在使用哪些服务或为什么使用这些服务。

在我工作的公司中，我们发布了许多应用程序并且从未遇到过问题，因此您可以从应用程序中使用它们而无需担心

# c# - WebResources 嵌入式资源和 Javascript 如何在另一个嵌入式资源中使用它们？

> ID：12390652
> 
> 赞同：0
> 
> 时间：2012-09-12T14:37:07.663
> 
> 标签：c#, javascript, custom-controls, embedded-resource

我之前问过一个类似的问题，但反应很弱，所以不确定我的措辞是否正确。

我目前在 asp.net 页面上有一个自定义服务器控件。但是，该控件使用完全嵌入的 JavaScript 和图像资源。我的程序集正确设置了所有 Web 资源，并且我一直成功地将图像等用作图标。

但是现在，如果可能的话，我想直接在 javascript 文件中使用嵌入的网络资源图像。到目前为止，我已经尝试了以下方法，但没有成功：

```
document.getElementById('button').src = 'WebResource("NAMESPACE.FOLDER.IMAGE.png")';
document.getElementById('button').src = '<%WebResource("NAMESPACE.FOLDER.IMAGE.png")%>'; 
```

我不确定还有什么可以尝试的，因为我的大部分谷歌搜索似乎都遇到了死胡同。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:06:41.790

我相信您正在寻找 WebResourceAttribute.PerformSubstitution 属性：

[MSDN 上的 WebResourceAttribute.PerformSubstitution](http://msdn.microsoft.com/en-us/library/system.web.ui.webresourceattribute.performsubstitution%28v=vs.100%29.aspx)

我们在定义嵌入式资源的项目的 AssemblyInfo.cs 文件中使用它：

[程序集：System.Web.UI.WebResource("*", "文本/css", PerformSubstitution = true)]*

 ***编辑：**

装配信息.cs

```
[assembly: System.Web.UI.WebResource("Project.Content.Styles.css", "text/css", PerformSubstitution = true)]
[assembly: System.Web.UI.WebResource("Project.Images.Sprite.png", "image/png")] 
```

Content/Styles.css（嵌入式资源）

```
.icon {
    background-image: url(<%=WebResource("Project.Images.Sprite.png")%>);
} 
```*

# ios - 删除应用程序时是否可以取消所有通知？

> ID：12390655
> 
> 赞同：0
> 
> 时间：2012-09-12T14:37:10.273
> 
> 标签：ios, cocoa-touch, notifications, uilocalnotification

我正在开发一个提醒到期日期的应用程序。我已经使用`Uilocanotification`重复间隔（，，，`NSMonthCalendarUnit`）`NSDayCalendarUnit`实现了相同的功能`NSDayCalendarUnit`。

例如。我在 2012 年 3 月 10 日设置了本地通知，如果我从 iPad/iPhone 删除应用程序。我再次重新安装应用程序我仍然收到重新安装之前设置的旧通知。是否可以`cancelallNotification`删除应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:18:56.397

我的猜测是你可以只检查你的应用程序何时安装并运行：

```
- (void)cancelAllLocalNotifications 
```

IE

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if([defaults objectForKey:@"FIRST-TIME-CHECK"] == null){
      [[UIApplication sharedApplication] cancelAllLocalNotifications];
      [defaults setValue:@"WHATEVER" forKey:@"FIRST-TIME-CHECK"];
} 
```

# sql - 比较两组数据的 SQL 查询

> ID：12390656
> 
> 赞同：1
> 
> 时间：2012-09-12T14:37:21.730
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有一张像下面这样的桌子

```
CREATE TABLE [dbo].[MyTable](
    [MyTableID]    [int]           IDENTITY(1,1) NOT NULL,
    [ContainerID]  [int]           NOT NULL,
    [FIELD_A]      [nvarchar](15)  NOT NULL,
    [FIELD_B]      [nvarchar](15)  NOT NULL,
    [FIELD_C]      [nvarchar](15)  NOT NULL,
    [FIELD_D]      [nvarchar](50)  NULL,
 CONSTRAINT [PK_MyTable] PRIMARY KEY CLUSTERED ( [MyTableID] ASC )
    WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,
    ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 80) ON [PRIMARY]
) ON [PRIMARY] 
```

简单来说，`FIELD_A`和`FIELD_B`由分组。`FIELD_C``FIELD_D``ContainerID`

考虑到每个容器包含大约 2k 条记录，我想执行一个返回两个`ContainerID`. 例如，在比较容器 1 和容器 2 时，我需要知道：

*   1 中存在多少条记录，2 中没有，反之亦然
*   两个容器中存在多少条记录

获得这些结果的最简单方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:42:32.787

这是一个开始：

```
-- rows for 1 but not in 2:

SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 1
EXCEPT
SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 2;

-- rows for 2 but not in 1:

SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 2
EXCEPT
SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 1;

-- rows in both:

SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 1
INTERSECT
SELECT FIELD_A, FIELD_B, FIELD_C, FIELD_D FROM dbo.MyTable WHERE ContainerID = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:46:33.350

这应该可行，您必须索引所有四个“field_x”字段，但它仍然不会很快

```
SELECT isnull(t1.Field_A,t2.Field_A) Field_A, isnull(t1.Field_B,t2.Field_B) Field_B
, isnull(t1.Field_C,t2.Field_C) Field_C, isnull(t1.Field_D,t2.Field_D) Field_D
,CASE WHEN t1.MyTableId IS NULL THEN 1 ELSE 0 END
,CASE WHEN t2.MyTableId IS NULL THEN 1 ELSE 0 END
FROM
(SELECT * FROM MyTable WHERE ContainerId=@ContainerId1) t1
FULL OUTER JOIN 
(SELECT * FROM MyTable WHERE ContainerId=@ContainerId2) t2
ON t1.Field_A=t2.Field_A AND t1.Field_B=t2.Field_B 
AND t1.Field_C=t2.Field_C AND t1.Field_D=t2.Field_D 
```

# android - Android AsyncTask ProgressDialog 轮换不同配置

> ID：12390657
> 
> 赞同：1
> 
> 时间：2012-09-12T14:37:25.280
> 
> 标签：android, android-asynctask, progressdialog, screen-rotation

在屏幕旋转期间，我设法使用了带有不确定进度条的 Asynctask。Asynctask 只启动一次，进度条在旋转时恢复，就像我想要的那样。

我有不同的纵向和布局方向布局。布局包括一个按钮和一个文本视图。layout-land中textview的大小和文本颜色不同。方向是风景。

问题是当我在 asynctask 运行时旋转屏幕时，它无法更新 onPostExecute 方法中的文本视图。当我旋转时，它会使用 layout-land 文件重新创建活动。但是为什么我不能更新我的 Textview？

**布局\activity_main.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">

    <Button 
        android:text="Start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startClicked"
        />
    <TextView
        android:id="@+id/hello"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</LinearLayout> 
```

**布局土地\activity_main.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal">

    <Button 
        android:text="Start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startClicked"
        />
    <TextView
        android:textSize="36dp"
        android:textColor="#ff0000"
        android:id="@+id/hello"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />

</LinearLayout> 
```

**MainActivity.java：**

```
package com.example.asynctaskconfig;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

    public class MainActivity extends Activity {
        static String data;
        static ProgressDialog pd;
        MyAsyncTask task;
        TextView tv;

        @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.activity_main);

            tv = (TextView) findViewById(R.id.hello);

            if (getLastNonConfigurationInstance() != null) {
                task = (MyAsyncTask) getLastNonConfigurationInstance();
                if (task != null) {
                    if (!(task.getStatus().equals(AsyncTask.Status.FINISHED))) {
                        showProgressDialog();
                    }
                }
            }
        }

        @Override
        public Object onRetainNonConfigurationInstance() {
            if (pd != null)
                pd.dismiss();
            if (task != null)
                return (task);
            return super.onRetainNonConfigurationInstance();
        }

        private void showProgressDialog() {
            if (pd == null || !pd.isShowing()) {
                pd = new ProgressDialog(MainActivity.this);
                pd.setIndeterminate(true);
                pd.setTitle("DOING..");
                pd.show();
            }
        }

        private void dismissProgressDialog() {
            if (pd != null && pd.isShowing())
                pd.dismiss();
        }

        public class MyAsyncTask extends AsyncTask<String, Void, Boolean> {
            @Override
            protected void onPreExecute() {
                showProgressDialog();
            }

            @Override
            protected Boolean doInBackground(String... args) {
                try {
                    Thread.sleep(5000);
                    data = "result from ws";
                } catch (Exception e) {
                    return true;
                }
                return true;
            }

            protected void onPostExecute(Boolean result) {
                if (result) {
                    dismissProgressDialog();
                    updateUI();
                }
            }
        }

        private void updateUI() {
            tv.setText(data == null ? "null" : data);
        }

        public void startClicked(View target) {
            task = new MyAsyncTask();
            task.execute("start");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:27:23.840

我所做的如下：

**1-**添加`android:freezesText="true"`到我所有的 TextViews。这使 TextViews 能够在配置更改时保存它们的状态。

**2-**使您的 AsyncTask 成为`static inner class.`

**3-**修改`AsyncTask`以保留对它所在的 Activity 的引用。因此 AsyncTask 可以通过此引用访问 Activity 的 UI 小部件。

**4-**在这里，重要的是在屏幕旋转期间保持有效的活动参考。因此，重写`onDestroy`方法并从 AsyncTask 中取消绑定 Activity。因此，任务不会保留旧的（死的）活动。

**5-**在`onRetainNonConfigurationInstance`，如果任务仍在运行，用当前活动更新其活动引用，因此它成功地绑定到新活动。

**6-**最后，在 中`onPostExecuteMethod`，通过活动引用访问活动的 UI 元素。

完整的工作解决方案：

> 布局\activity_main.xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">

    <Button 
        android:text="Start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startClicked"
        />
    <TextView
        android:freezesText="true"
        android:id="@+id/hello"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />
</LinearLayout> 
```

> 布局土地\activity_main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal">

    <Button 
        android:text="Start"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="startClicked"
        />
    <TextView
        android:freezesText="true"
        android:textSize="36dp"
        android:textColor="#ff0000"
        android:id="@+id/hello"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".MainActivity" />
</LinearLayout> 
```

> MainActivity.java：

```
package com.example.asynctaskconfig;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {
    static ProgressDialog pd;
    MyAsyncTask task;
    TextView tv;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_main);

        tv = (TextView) findViewById(R.id.hello);

        if (getLastNonConfigurationInstance() != null) {
            task = (MyAsyncTask) getLastNonConfigurationInstance();
            if (task != null) {
                task.activity = this;
                if (!(task.getStatus().equals(AsyncTask.Status.FINISHED))) {
                    showProgressDialog();
                }
            }
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (task != null) {
            task.activity = null;
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        if (pd != null)
            pd.dismiss();
        if (task != null)
            return (task);
        return super.onRetainNonConfigurationInstance();
    }

    private void showProgressDialog() {
        if (pd == null || !pd.isShowing()) {
            pd = new ProgressDialog(MainActivity.this);
            pd.setIndeterminate(true);
            pd.setTitle("DOING..");
            pd.show();
        }
    }

    private void dismissProgressDialog() {
        if (pd != null && pd.isShowing())
            pd.dismiss();
    }

    static class MyAsyncTask extends AsyncTask<String, Void, String> {
        MainActivity activity;

        public MyAsyncTask(MainActivity activity) {
            this.activity = activity;
        }

        @Override
        protected void onPreExecute() {
            activity.showProgressDialog();
        }
        @Override
        protected String doInBackground(String... args) {
            try {
                Thread.sleep(8000);
                return "data from ws";
            } catch (Exception e) {
                return "exception";
            }
        }

        protected void onPostExecute(String result) {
            activity.dismissProgressDialog();
            activity.tv.setText(result == null ? "null" : result);
        }
    }

    public void startClicked(View target) {
        task = new MyAsyncTask(this);
        task.execute("start");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:47:46.013

试试这个：

```
private void updateUI() {
    final TextView tv = (TextView) findViewById(R.id.hello);
    tv.setText(data == null ? "null" : data);
} 
```

如果失败，是否可能是时间问题？也就是说，会不会是方​​向变化时完成的任务？为了安全起见，如果任务完成，您可以`onCreate`通过添加调用来修改您的方法：`updateUI()`

```
 @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_main);

        tv = (TextView) findViewById(R.id.hello);

        if (getLastNonConfigurationInstance() != null) {
            task = (MyAsyncTask) getLastNonConfigurationInstance();
            if (task != null) {
                if (!(task.getStatus().equals(AsyncTask.Status.FINISHED))) {
                    showProgressDialog();
                } else
                    updateUI();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:49:29.003

您的问题本质上是您尝试更改的 TextView 不再是屏幕上可见的 TextView 。轮换导致 Android 放弃旧的 Activity 并构建一个新的 - 完成 xml 文件中的所有视图。因此，您的 TextView 'tv' 仍然是旧活动的一部分，更改将无济于事。

现在获得您想要的行为的最简单方法是再次查找 textview，即在您的 updateUI 方法中再次使用“findViewById”，您应该没问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:50:42.967

在这种情况下，您可能不希望在方向更改时重新创建活动。您可以通过将其添加到清单中的活动来处理活动中的方向更改：

```
android:configChanges="keyboardHidden|orientation" 
```

然后覆盖 onConfigurationChanged：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.activity_main);
  tv = (TextView) findViewById(R.id.hello);
} 
```

# php - 保存内容

> ID：12390659
> 
> 赞同：0
> 
> 时间：2012-09-12T14:37:37.870
> 
> 标签：php, html, email, pdf

我有一个生成 html 并使用缓冲区将其添加到 php 字符串的文件

```
<?php ob_start(); ?>

    <table>
     <tr>
      <td>Content</td>
     </tr>
    </table>

<?php     
    $contents = ob_get_contents();
    ob_flush();

    mail($to, $subject, $contents, $headers);
?> 
```

有没有办法使用php将字符串的内容保存为服务器上的pdf文件？我曾尝试使用 FPDF，但它不起作用，因为内容位于页面顶部，并且我从 fpdf 收到输出错误。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:46:42.097

您需要使用`ob_end_clean()`而不是`ob_flush();`

`ob_flush();`将打印 html 而您不希望这样。由于 FPDF 创建 pdf 并需要操作标题（成为 pdf）。如果您首先回显/打印某些内容，php 将自动设置默认标头。一旦设置它们，库就无法修改它们，从而导致错误。

将 ob 的内容放入 var( `$contents = ob_get_contents();`) 后，您就可以使用`ob_end_clean()`. 这将丢弃缓冲区的内容并停止缓冲。

# tridion - Tridion：替换 Query.QueryOperator 方法？

> ID：12390664
> 
> 赞同：3
> 
> 时间：2012-09-12T14:37:49.713
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

**Query.QueryOperator.AND_Field** 我们在 Tridion R5.3 VBscript 模板中使用了这种方法，并且效果很好。最近，在迁移到 Tridion 2011 SP1 时，我们尝试使用这种方法，但它不起作用。我们了解到这种方法在新的 tridion 版本中已被贬低。

根据论坛中的一些帖子，我们还在 CD_Storage_Conf 中启用了以下行：

```
<SearchFilter Name="SearchFilter" Class="com.tridion.broker.components.meta.MsSqlSearchFilterHome" defaultStorageId="defaultdb"/> 
<Item typeMapping="Query" storageId="defaultdb"/> 
```

问题是，“Query.QueryOperator.AND_Field”方法的替代品是什么？我们如何在 C# 中使用这个过滤器？如何使用支持 API 文件中提到的代理查询机制？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T16:01:54.183

在 SDL Tridion 2011 Content Delivery 中，您创建一个对象并使用该方法向其中`Query`添加一个对象。该对象**仅**接受一个 Criteria 对象，但该对象又可以引用树结构中的其他对象。`Criteria``setCriteria``Query`**`Criteria``Criteria`**

 **有关使用 AND 和 OR 运算符创建查询过滤器的良好示例，请参阅SDL LiveContent 的 SDL Tridion 2011 SP1 文档中的[创建过滤器。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0AB6D192D7AB4EC18892631F519EF1DD)

```
// Schema has ID of either 511 (Article) or 34 (Press Release).
ItemSchemaCriteria IsArticle = new ItemSchemaCriteria(511);
ItemSchemaCriteria IsPressRelease = new ItemSchemaCriteria(34);
Criteria IsArticleOrPressRelease = CriteriaFactory.Or(IsArticle, IsPressRelease);

// Type of the item is 16 (Component).
ItemTypeCriteria IsComponent = new ItemTypeCriteria(16);

// Both of the above conditions must be true
Criteria AllCriteria = CriteriaFactory.And(IsArticleOrPressRelease, IsComponent);

// Add these criteria to a query
Query MyQuery = new Query();
MyQuery.Criteria = AllCriteria; 
```**

# c# - MVC 4 Autofac 和通用存储库模式

> ID：12390665
> 
> 赞同：14
> 
> 时间：2012-09-12T14:37:51.930
> 
> 标签：c#, .net, asp.net-mvc, dependency-injection, autofac

我在我的 MVC 4 应用程序中使用了工作单元和通用存储库模式。我要解决的问题是为系统中的每个实体创建存储库存根。为了利用 Autofac Ioc，我必须为每个实体创建一个存储库类和接口，以便我可以在 Autofac 中注册它。

应用开始...

```
builder.RegisterType<SchoolDetailRepository>().As<ISchoolDetailRepository>().InstancePerHttpRequest(); 
```

存储库类

```
 public class SchoolDetailRepository : RepositoryBase<SchoolDetail>, ISchoolDetailRepository
{
    public SchoolDetailRepository(IDatabaseFactory databaseFactory) : base(databaseFactory)
    {
    }
} 
```

界面

```
public interface ISchoolDetailRepository : IRepository<SchoolDetail>
{
} 
```

这似乎是很多额外的工作。

有没有办法注册 Type 的通用存储库而不是创建所有这些空类？

然后在我的服务类中，我可以通过 Ioc 将泛型类型传递给构造函数，例如......

```
public class SchoolService : ISchoolService
{
    private readonly IRepository<SchoolDetail> _schoolRepository;
    private readonly IUnitOfWork _unitOfWork;

    public SchoolService(IRepository<SchoolDetail> schoolRepository, IUnitOfWork unitOfWork)
    {
        this._schoolRepository = schoolRepository;
        this._unitOfWork = unitOfWork;
    }
} 
```

容器配置

```
// Autofac iOC
        var builder = new ContainerBuilder();
        // register controllers
        builder.RegisterControllers(Assembly.GetExecutingAssembly());

        // register services
        builder.RegisterType<MembershipService>().As<IMembershipService>().InstancePerHttpRequest();
        builder.RegisterType<SchoolService>().As<ISchoolService>().InstancePerHttpRequest();
        builder.RegisterType<StudentService>().As<IStudentService>().InstancePerHttpRequest();
        builder.RegisterType<ClassRoomService>().As<IClassRoomService>().InstancePerHttpRequest();
        builder.RegisterType<CourseService>().As<ICourseService>().InstancePerHttpRequest();
        builder.RegisterType<SchoolYearService>().As<ISchoolYearService>().InstancePerHttpRequest();
        builder.RegisterType<EnrollmentService>().As<IEnrollmentService>().InstancePerHttpRequest();
        builder.RegisterType<TeacherService>().As<ITeacherService>().InstancePerHttpRequest();

        // register data infrastructure
        builder.RegisterType<UnitOfWork>().As<IUnitOfWork>().InstancePerHttpRequest();
        builder.RegisterType<DatabaseFactory>().As<IDatabaseFactory>().InstancePerHttpRequest();

        // register repositories
        builder.RegisterType<SchoolRepository>().As<ISchoolRepository>().InstancePerHttpRequest();
        builder.RegisterType<TeacherRepository>().As<ITeacherRepository>().InstancePerHttpRequest();
        builder.RegisterType<MembershipRepository>().As<IMembershipRepository>().InstancePerHttpRequest();
        builder.RegisterType<RoleRepository>().As<IRoleRepository>().InstancePerHttpRequest();
        builder.RegisterType<ProfileRepository>().As<IProfileRepository>().InstancePerHttpRequest();
        builder.RegisterType<UserRepository>().As<IUserRepository>().InstancePerHttpRequest();
        builder.RegisterType<StudentRepository>().As<IStudentRepository>().InstancePerHttpRequest();
        builder.RegisterType<ClassRoomRepository>().As<IClassRoomRepository>().InstancePerHttpRequest();
        builder.RegisterType<CourseRepository>().As<ICourseRepository>().InstancePerHttpRequest();
        builder.RegisterType<EnrollmentRepository>().As<IEnrollmentRepository>().InstancePerHttpRequest();
        builder.RegisterType<SchoolYearRepository>().As<ISchoolYearRepository>().InstancePerHttpRequest();
        builder.RegisterType<GradeLevelRepository>().As<IGradeLevelRepository>().InstancePerHttpRequest();
        //builder.RegisterType<SchoolDetailRepository>().As<ISchoolDetailRepository>().InstancePerHttpRequest();
        builder.RegisterGeneric(typeof(RepositoryBase<SchoolDetail>)).As(typeof(IRepository<SchoolDetail>));

        // build and setup resolver
        IContainer container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

异常来自上面的代码，您给我的表达式在其中运行..

```
builder.RegisterGeneric(typeof(RepositoryBase<SchoolDetail>)).As(typeof(IRepository<SchoolDetail>)); 
```

存储库库

```
public abstract class RepositoryBase<T> where T : class
{
private LearningCompactPilotContext _dataContext;
private readonly IDbSet<T> _dbset;
protected RepositoryBase(IDatabaseFactory databaseFactory)
{
    DatabaseFactory = databaseFactory;
    _dbset = DataContext.Set<T>();
}

protected IDatabaseFactory DatabaseFactory
{
    get; private set;
}

protected LearningCompactPilotContext DataContext
{
    get { return _dataContext ?? (_dataContext = DatabaseFactory.Get()); }
}

... more code 
```

}

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-12T14:46:49.870

您需要Autofac的[开放泛型功能：](http://code.google.com/p/autofac/wiki/OpenGenerics)

```
builder.RegisterGeneric(typeof(RepositoryBase<>))
   .As(typeof(IRepository<>)); 
```

然后您完全按照您的描述使用您的存储库：

```
public class SomeService
{
    private readonly IRepository<SomeEntity> _repository;

    public SchoolService(IRepository<SomeEntity> repository)
    {
        this._repository= repository;
    }
} 
```

# authentication - Alfresco 4.0.d - 带有共享的远程（外部）身份验证

> ID：12390666
> 
> 赞同：1
> 
> 时间：2012-09-12T14:37:54.550
> 
> 标签：authentication, alfresco, alfresco-share

我正在尝试在 Alfresco 前面使用 apache（shibboleth 模块）使用远程身份验证来配置 alfresco - 本质上是在身份验证后将 REMOTE_USER 从 apache 传递到 alfresco。我可以配置 alfresco，我可以在其中成功登录 /alfresco（经典资源管理器 gui），但是 /share（较新的 gui）没有让我登录。有没有人遇到过/解决了这个问题？

以下是一些细节：

1.  使用 shibboleth mod 设置 apache（因为我自动登录到 /alfresco，所以可以使用）

2.  在 apache 中为 /alfresco 和 /share 设置 ajp 条目。

    ### 露天探险家

    ProxyPass /alfresco ajp://127.0.0.1:8009/alfresco

    ProxyPassReverse /alfresco ajp://127.0.0.1:8009/alfresco

    ### 露天分享

    ProxyPass /share ajp://127.0.0.1:8009/share

    ProxyPassReverse /share ajp://127.0.0.1:8009/share

3.  设置tomcat ajp条目

4.  设置 /tomcat/shared/classes/alfresco-global.properties 与

    authentication.chain=external1:external,alfrescoNtlm1:alfrescoNtlm external.authentication.proxyUserName=external.authentication.proxyHeader=external.authentication.enabled=true

5.  在 share-config-custom.xml 中，我在下面输入了建议的 xml 条目：

> 块引用

```
<alfresco-config>

<!-- Repository Library config section -->
<config evaluator="string-compare" condition="RepositoryLibrary" replace="true">
<!--
Whether the link to the Repository Library appears in the header component or not.
-->
<visible>true</visible>
</config>

<config evaluator="string-compare" condition="Remote">
<remote>
<endpoint>
<id>alfresco-noauth</id>
<name>Alfresco - unauthenticated access</name>
<description>Access to Alfresco Repository WebScripts that do not require authentication</description>
<connector-id>alfresco</connector-id>
<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
<identity>none</identity>
</endpoint>

<endpoint>
<id>alfresco</id>
<name>Alfresco - user access</name>
<description>Access to Alfresco Repository WebScripts that require user authentication</description>
<connector-id>alfresco</connector-id>
<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
<identity>user</identity>
</endpoint>

<endpoint>
<id>alfresco-feed</id>
<name>Alfresco Feed</name>
<description>Alfresco Feed - supports basic HTTP authentication via the EndPointProxyServlet</description>
<connector-id>http</connector-id>
<endpoint-url>http://localhost:8080/alfresco/s</endpoint-url>
<basic-auth>true</basic-auth>
<identity>user</identity>
</endpoint>

<endpoint>
<id>activiti-admin</id>
<name>Activiti Admin UI - user access</name>
<description>Access to Activiti Admin UI, that requires user authentication</description>
<connector-id>activiti-admin-connector</connector-id>
<endpoint-url>http://localhost:8080/alfresco/activiti-admin</endpoint-url>
<identity>user</identity>
</endpoint>
</remote>
</config>

<config evaluator="string-compare" condition="Remote">
<remote>
<keystore>
<path>alfresco/web-extension/alfresco-system.p12</path>
<type>pkcs12</type>
<password>alfresco-system</password>
</keystore>

<connector>
<id>alfrescoCookie</id>
<name>Alfresco Connector</name>
<description>Connects to an Alfresco instance using cookie-based authentication</description>
<class>org.alfresco.web.site.servlet.SlingshotAlfrescoConnector</class>
</connector>

<endpoint>
<id>alfresco</id>
<name>Alfresco - user access</name>
<description>Access to Alfresco Repository WebScripts that require user authentication</description>
<connector-id>alfrescoCookie</connector-id>
<endpoint-url>http://localhost:8080/alfresco/wcs</endpoint-url>
<identity>user</identity>
<external-auth>true</external-auth>
</endpoint>
</remote>
</config> 
```

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:32:29.110

尝试定义一个名为“alfrescoHeader”的连接器：

```
 <connector>
        <id>alfrescoHeader</id>
        <name>Alfresco Connector</name>
        <description>Connects to an Alfresco instance using header and cookie-based authentication</description>
        <class>org.alfresco.web.site.servlet.SlingshotAlfrescoConnector</class>
        <userHeader>X-Alfresco-Remote-User</userHeader>
     </connector> 
```

当然，将标题名称更改为您正在使用的名称。然后，在 alfresco 端点中使用它：

```
 <endpoint>
        <id>alfresco</id>
        <name>Alfresco - user access</name>
        <description>Access to Alfresco Repository WebScripts that require user authentication</description>
        <connector-id>alfrescoHeader</connector-id>
        <endpoint-url>http://localhost:8080/alfresco/wcs</endpoint-url>
        <identity>user</identity>
        <external-auth>true</external-auth>
     </endpoint> 
```

# java - XStream - 如果 XML 中不存在带注释的字段，如何引发异常

> ID：12390669
> 
> 赞同：3
> 
> 时间：2012-09-12T14:38:02.570
> 
> 标签：java, xml, deserialization, xstream

我有这样的事情：

Java 类

```
.....
@XStreamAlias("SOME_TAG")
    private String someAttribute;
.....

<ROOT>
    <ANOTHER_TAG>VALUE</ANOTHER_TAG>
</ROOT> 
```

在我的xml中我需要有这个“SOME_TAG”，如果由于某种原因它丢失了我需要抛出一个异常。

我可以用 XStream 做吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:58:51.757

我不是 xstream 的实验用户，但我会这样做：

1.  创建一个 dtd 文件或 xsd 文件，您可以在其中指定所需的元素，然后您可以根据 dtd 或 xsd 文件验证 xml 文件。或者，
2.  在类中创建一个验证方法，用于验证任何字段是否为空或您需要执行的任何其他验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:38:01.180

纯粹使用 XStream 我认为你有两个选择：

1.  XStream 使用与 JDK 序列化相同的机制，因此您可以简单地`Object readResolve()`在您的类中实现一个正在反序列化的方法。此方法在对象已初始化并且所有字段都由 XStream 设置后调用，因此您可以使用此方法检查您的`someAttribute`字段是否存在`null`- 如果是，则可以抛出异常。（可以在此处找到 XStream 的示例：http: [//x-stream.github.io/faq.html#Serialization_initialize_transient](http://x-stream.github.io/faq.html#Serialization_initialize_transient)

2.  另一种选择是为您的班级编写一个自定义[转换器](http://x-stream.github.io/converter-tutorial.html)，并在那里检查该字段是否已填写。

# php - PHP get_class 的功能

> ID：12390679
> 
> 赞同：0
> 
> 时间：2012-09-12T14:38:33.437
> 
> 标签：php

谁能解释为什么`get_class`函数在下面返回不同的值？具体来说，当它在基类中调用和在派生类中调用时应该做什么？

```
abstract class bar {
    public function __construct()
    {
        var_dump(get_class($this)); //prints 'foo'
        var_dump(get_class()); // prints 'bar'
    }
}

class foo extends bar {
}

new foo; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:42:28.933

[在文档](http://bg2.php.net/manual/en/function.get-class.php)中似乎很好地解释了，但这里是：

`get_class($instance)`返回`$instance`实例的类，不管你在哪里调用它；`get_class($this)`行为方式相同，返回`$this`.

`get_class()`*返回定义*调用它的方法的类，因此它`bar`在您的示例中返回，因为这`__construct()`是定义的位置（即使您通过继承调用它）。

# php - 如何限制 ffmpeg 内存使用量

> ID：12390682
> 
> 赞同：15
> 
> 时间：2012-09-12T14:38:34.807
> 
> 标签：php, ffmpeg

我正在使用 ffmpeg 在 PHP 中使用此命令将 1080p 视频转换为 MP4。

```
$command = FFMPEG.' -i ' . $src . ' -sameq -strict -2 -vcodec libx264 -ar 22050 -y ' . $dest.'.mp4 2>&1'; 
exec($command,$output,$status); 
```

问题是该进程使用了​​大量内存〜1600MB，这是我的服务器不允许的，因此 ffmpeg 被终止。我可以将ffmpeg的内存使用限制在600-700MB左右吗？

任何帮助是极大的赞赏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:50:43.017

这与 PHP 无关。它是关于如何限制 FFMPEG 内存使用的。

简短的回答不！

看这里：[http ://hwdmediashare.co.uk/forum/27-development-customisation/54700-limit-ffmpeg-memory-usage](http://hwdmediashare.co.uk/forum/27-development-customisation/54700-limit-ffmpeg-memory-usage)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-28T03:37:02.180

视频编解码器主要负责高内存使用。

因此，需要解决内存使用问题的是编码器，而不是直接使用 FFmpeg。我不确定如何修复`x264`的内存使用，但我尝试了较新的 x26 **5**，在我的情况下它只使用 1.6 GB，而 libx264 因询问超过 2 GB 内存限制而失败（每个进程，在 32-位系统）。

所以，对我有用的是使用：

```
ffmpeg -i input -pix_fmt yuv420p -c:v hevc -x265-params crf=23 out.mp4 
```

（省略参数以处理音频。）

但一般的做法是尝试其他编码器。如果 x265 不起作用，我打算尝试 mpeg4 和 vp9，也许还有其他的。如果这些都不起作用，那么进一步的选项包括查看编码器的设置（尽管没有出现明显且与内存使用直接相关的内容）：

```
ffmpeg -h encoder=mpeg4 
```

* * *

更新：实际上，事实证明 YouTube 还不接受 HEVC（又名 H.265）（它只在上传完成后才让我知道）。所以，就像我上面建议的那样，我选择了 VP9，这次用前 50 帧进行了试运行。我使用了类似于我找到[的指南的设置（](http://wiki.webmproject.org/ffmpeg/vp9-encoding-guide)*恒定质量*设置，尽管我应该使用更多他们建议的参数）：

```
ffmpeg.exe -i <input> -pix_fmt yuv420p -c:v libvpx-vp9 -pass 1 -b:v 0 -crf 20 -f webm pass1.webm

ffmpeg.exe -i <input> -pix_fmt yuv420p -c:v libvpx-vp9 -pass 2 -b:v 0 -crf 20 -f webm pass2.webm 
```

（请注意，这`pass1.webm`几乎是空的。）

另请注意，尽可能首选两次通过。它在所有方面都更好，包括整体更快的编码。

使用这些设置，一个 4K 分辨率的 73 秒剪辑需要大约 16 个小时来编码——这是使用一个核心，因为我忘了指定`-threads`. 虽然速度很慢，但 FFmpeg 的内存使用量仅上升到大约 0.6 GB。生成的文件为 300 MB，与未压缩的帧相比，我看不到任何质量损失（因此`-crf 20`可能有点太低了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:52:40.090

事实上，视频编码是一项 CPU 和内存密集型工作。如果你想这样做，你需要为它提供必要的记忆。

由于您想将 1080p .mov 转换为相同质量的 .mp4，我假设您只是想更改文件的格式而不是重新编码。

ffmpeg -i input.mov -acodec copy -vcodec copy out.mp4

将很快完成并且没有任何内存开销

如果您只想更改音频编解码器，请不要提供编解码器部分。

如果输入视频编解码器不适合您 [所以不能选择复制]，请尝试为 vcodec 进行 mpeg4 编码。在那里编码更便宜，但我不能保证它总是适合你的内存要求。

# c++ - 在lua中重新定义打印功能的麻烦

> ID：12390684
> 
> 赞同：1
> 
> 时间：2012-09-12T14:38:39.107
> 
> 标签：c++, lua, embed

我正在尝试重新定义[此问题](https://stackoverflow.com/questions/4508119/redirecting-redefining-print-for-embedded-lua)中描述的打印功能。这是我的代码：

```
extern "C"{
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
}

#include <iostream>

using namespace std;

lua_State* L;

static int l_my_print(lua_State* L) {
    int nargs = lua_gettop(L);

    for (int i=1; i <= nargs; i++) {
        if (lua_isstring(L, i)) {
            cout << "!!!" << lua_tostring(L, i) << "!!!" << endl;
        }
    }

    return 0;
}

static const struct luaL_Reg printlib [] = {
  {"print", l_my_print},
  {NULL, NULL} /* end of array */
};

extern int luaopen_luamylib(lua_State *L)
{
  lua_getglobal(L, "_G");
  luaL_register(L, NULL, printlib);
  lua_pop(L, 1);
}

int main(){
    L = luaL_newstate();
    luaL_openlibs(L);
    luaopen_luamylib(L);

    luaL_dostring(L, "print(\"hello\")");

    lua_close(L);

    return 0;
} 
```

当我尝试编译代码时，我得到：

```
$ g++ -I/usr/include/lua5.2 -o embed test.cpp -Wall -Wextra -llua5.2
test.cpp:28:1: error: elements of array ‘const luaL_reg printlib []’ have incomplete type
test.cpp:28:1: error: storage size of ‘printlib’ isn’t known
test.cpp: In function ‘int luaopen_luamylib(lua_State*)’:
test.cpp:33:34: error: ‘luaL_register’ was not declared in this scope
test.cpp:35:1: warning: no return statement in function returning non-void [-Wreturn-type] 
```

谁能解释这里发生了什么？我错过了图书馆还是什么？

**更新**

有人指出，该结构被称为`luaL_Reg`，而不是`luaL_reg`。这解决了我的第一个问题：

```
$ g++ -I/usr/include/lua5.2 -o embed test.cpp -Wall -Wextra -llua5.2
test.cpp: In function ‘int luaopen_luamylib(lua_State*)’:
test.cpp:33:34: error: ‘luaL_register’ was not declared in this scope
test.cpp:35:1: warning: no return statement in function returning non-void [-Wreturn-type] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:41:56.103

第一个错误：是`luaL_Reg`，不是`luaL_reg`。

第二个错误： luaL_register 已弃用（在 Lua 5.2 中），并且仅在包含 Lua 标头之前定义了 LUA_COMPAT_MODULE 时才可用。您应该改用 luaL_setfuncs 。

# jquery - 全方位滚动

> ID：12390690
> 
> 赞同：1
> 
> 时间：2012-09-12T14:39:01.167
> 
> 标签：jquery

所以我正在做一个小型的实验性网络项目，我遇到了一些 jQuery 问题（因为我对 jQuery 很陌生，而且不擅长 jQuery）：为什么我想要实现的是让所有 a.arrow 滚动到它的 url- div（按 ID）。这是一个示例（请注意，背景图片丢失，所以看起来有点悲伤，但这并不重要）：http: [//jsfiddle.net/popmouth/P8Fvq/1/](http://jsfiddle.net/popmouth/P8Fvq/1/) 我很高兴得到帮助，我很想更好地学习jQuery！干杯卡尔

# c# - Lambda 表达式比较运算符 ">",">=" 问题

> ID：12390695
> 
> 赞同：-4
> 
> 时间：2012-09-12T14:39:32.093
> 
> 标签：c#, lambda

当我在实体框架中执行这些运算符（`>`和） lambda 表达式时。`>=`两者都得到相同的结果。

1.  `db.Companies.where(Company => (Compare(Convert(Company.Name), "y") > 0))`
2.  `db.Companies.where(Company => (Compare(Convert(Company.Name), "y") >= 0))`

是 Lambda 表达式比较运算符的问题吗？我改成

1.  `db.Companies.where(Company => (Compare(Convert(Company.Name), "y") > 1))`- 没结果。它**不正确**

2.  `db.Companies.where(Company => (Compare(Convert(Company.Name), "y") >= 1))`- 64 个结果

**源代码**

```
case operatorType.Greater: return Expression.GreaterThan(Expression.Call(typeof(string),
                            "Compare", null, new[] { argLeft, argRight }),
                             Expression.Constant(1, typeof(int)));

case operatorType.GreaterEqual: return Expression.GreaterThanOrEqual(       Expression.Call(typeof(string), "Compare", null, new[]  { argLeft, argRight }),
                        Expression.Constant(1, typeof(int))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:42:27.810

如果你得到相同的结果，意味着没有`Company.Name`等于“Y”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:42:57.030

为什么你会期望答案会有所不同。

*   做什么`Compare`？
*   做什么`Convert`？
*   `Compare(Convert(Company.Name), "y")`评估什么？

如果它评估为`1`或更大，那么两个答案都是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:50:09.630

如果两个查询的结果数量相同，则意味着它`(Compare(Convert(Company.Name), "y")`永远不会等于零。如果它大于零，则两个查询都将返回它；如果它小于零，那么两个查询都不会返回它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:30:50.837

感谢所有回复 Lambda 表达式查询仅是正确的。

```
db.Companies.where(Company => (Compare(Convert(Company.Name), "Test") > 0))
db.Companies.where(Company => (Compare(Convert(Company.Name), "Test") >= 0)) 
```

我将“正确的参数”值更改为“测试”。我有一个记录'名称'与测试。执行以下查询。

```
db.Companies.where(Company => (Compare(Convert(Company.Name), "Test") > 0)) 
```

并显示结果 105（此处未显示带有“测试”的名称**。-正确**

然后我执行了这个

```
db.Companies.where(Company => (Compare(Convert(Company.Name), "Test") >= 0)) 
```

并显示结果 106（此处显示带有“测试”的名称） -**正确**

# algorithm - 哪种算法可以根据历史对列表进行排名

> ID：12390696
> 
> 赞同：0
> 
> 时间：2012-09-12T14:39:32.563
> 
> 标签：algorithm, machine-learning, ranking

*   有 N 个独特的项目。
*   有K个排序列表，每个列表由项目的一小部分组成，每个列表不包含多次相同的项目。
*   输入是未排序的项目列表。
*   该算法应根据 K 个排序列表对列表进行排序。

这是一个例子：

*   有 100 项：item1, item2, ..., item100
*   有一些可用的排名列表：List1：Item1>Item2>Item12，List2：Item12>item93>Item7，List3：Iterm1>Item3>Iterm97，List4：Iterm1>Iterm7>Item2

输入为：Iterm1、Item2、Iterm7 和 Item98。该算法应根据这些列表对输入进行排序。

**在机器学习方面，**我正在寻找一种算法，该算法可以基于许多部分排序的项目列表的训练集预测项目列表（AKA 活动列表）的“正确”顺序，每个部分排序的项目列表可能包含活动列表不包含的其他项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:56:21.453

构造一个以输入元素为节点的有向无环图 (DAG)，当且仅当 Itemi 在某个列表中紧接在 Itemj 之前出现时，才从 Itemi 和 Itemj 定义一条边。然后，您可以通过对 DAG进行[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)来获得所需的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T09:49:19.827

我将从输入（A> B 之间的链接数是权重）组成一个加权图，将其放入 N*N 矩阵，并在矩阵上执行幂迭代（GIYF）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T15:57:02.143

我认为您的意思是排序列表定义了部分排序，是吗？即，如果 Item1 在其中一个列表中出现在 Item2 之前，则应将其视为“更大”。

如果这是正确的，那么要走的路是首先以更方便的形式表示它，例如矩阵`M`，这样`M[1][2]==1`如果 Item1 在列表之一中位于 Item2 之前。然后我们有一个简单的比较器函数：

```
if M[X][Y] == 1:
    return 1 # X > Y
elif M[Y][X] == 1:
    return -1 # Y > X
else
    return 0 # the elements are not comparable 
```

我们现在可以根据这个比较器对输出进行排序。

在排序之前，您可能希望在此矩阵上运行传递闭包（Warshall 算法），例如，如果有列表 Item1>Item3 和 Item3>Item2，但没有列表 Item2 将与 Item1 一起出现。传递闭包允许人们从两个列表中推断出 Item1 应该在 Item2 之前。

# python - python中的时间间隔重叠

> ID：12390698
> 
> 赞同：2
> 
> 时间：2012-09-12T14:39:34.940
> 
> 标签：python, list, datetime, intervals

假设我有时间间隔列表，例如

```
a = [datetime.time(0,0),datetime.time(8,0)] 
```

现在我在列表中有一些间隔，如下所示。

```
b = [[datetime.time(0,0),datetime.time(8,0)], [datetime.time(0,0),datetime.time(10,0)], [datetime.time(0,0),datetime.time(23,59,59)], [datetime.time(15,0),datetime.time(9,0)], [datetime.time(9,0),datetime.time(15,0)]] 
```

我们必须用包含区间 a 的区间过滤列表 b。就像示例中的结果一样。

```
b = [[datetime.time(0,0),datetime.time(8,0)], [datetime.time(0,0),datetime.time(10,0)], [datetime.time(0,0),datetime.time(23,59,59)], [datetime.time(15,0),datetime.time(9,0)]] 
```

注意：我已将结束时间从 00 更改为 23:59:59，但案例仍然存在，因为我们需要了解每天 00:00 到 08:00 的时间间隔包含在 15:00 到 09:00 的时间间隔中

提示：我将 15:00 到 09:00 分为两个时间段：00:00-09:00 和 15:00-23:59:59

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:43:50.277

您的代码有错误（使用`datetime/datetime.time`）。

此代码将从`b`所有不与以下内容重叠的内容中过滤掉`a`：

```
b = [x for x in b if a[0] < x[1] and x[0] < a[1]] 
```

# fabric - 如何安装最新版本的面料

> ID：12390699
> 
> 赞同：6
> 
> 时间：2012-09-12T14:39:35.737
> 
> 标签：fabric, apt-get

如何在debian上安装最新版本的fabric？打电话时

```
apt-get install fabric 
```

正在安装 0.9.1 版。不过最新版本是 1.4.3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T14:43:05.000

[您可以使用pip](http://www.pip-installer.org/en/latest/index.html)或 easy_install从 PyPI 安装最新版本。

例如：

```
apt-get install python-setuptools  # for easy_install
easy_install pip
pip install fabric 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T08:42:28.983

就我而言，我必须安装以下软件包：

```
sudo apt-get update
sudo apt-get install python-dev python-setuptools gcc
sudo easy_install pip
sudo apt-get install libssl-dev libffi-dev
sudo pip install six==1.6.0
sudo pip install fabric 
```

# magento - 是否可以将自定义选项应用于 Magento 中的整个产品类别？

> ID：12390703
> 
> 赞同：1
> 
> 时间：2012-09-12T14:39:58.193
> 
> 标签：magento, categories, options, product

我正在为 Magento 提供动力的珠宝店工作，我作为产品添加的样品戒指，我为戒指尺寸创建了一个自定义选项（一个 SELECT 下拉菜单）。

很容易。

我的问题是——如何将该自定义选项应用于戒指类别中的所有产品？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:16:44.707

看起来你在这里使用自定义选项的想法是错误的。如果您计划为所有 Rings 产品使用**Ring Size**，最好创建一个**Ring Size**属性，将其添加到“ *Rings* ”属性组，然后使用此属性组创建您的 Rings 产品。

更新。您需要为您的戒指产品使用可***配置***产品类型。这是如何创建可配置产品的[手册。](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)

总结一下 - 这里是可配置产品功能的简要描述：实际的“可配置”产品是一个虚拟“容器”，其中包含**简单的**物理项目，其内部具有具体的属性选项。

**在您的情况下，您将创建一个由属性Ring Size**配置的可配置产品。然后您将创建一些简单的产品，每个产品都有自己的**戒指尺寸**选项。创建简单产品后，您会将它们分配给可配置产品，因此客户将能够在前端选择所需的**戒指尺寸**。

只是不要忘记在属性创建过程中将**Ring Size**属性标记为“*用于创建可配置产品*”。

# c# - 初学者的反思问题

> ID：12390709
> 
> 赞同：2
> 
> 时间：2012-09-12T14:40:10.383
> 
> 标签：c#, binding, visual-studio-2012

我正在尝试学习 C# 中的反射，并且需要一些关于我的代码的帮助。我很难找到好的代码示例/指南，所以如果我的代码做得不好，我深表歉意。

本质上，我只是想检查给定程序集 dll 中的特定方法名称（路径和方法名称已被编辑）。

问题发生在线路上`object lateBoundObj = asm.CreateInstance(typeName);`，它显示`An object reference is required for the non-static field, method, or property...`

我知道这与静态与非静态有关，并`new Assembly`沿着这些思路创建一个或一些东西，但需要一些帮助来理解这个问题以及如何解决它。

谢谢！

```
 public const string assemblyPath = @"<my file path>";
    Assembly asm;

    static void Main(string[] args)
    {
        //asm = new Assembly();
        Console.Read();

        MethodInfo mi;
        object result = null;
        object[] arguments = new object[] { "ABC123" };

        try
        {
            Assembly assemblyInstance = Assembly.LoadFrom(assemblyPath);
            Type[] types = assemblyInstance.GetTypes();

            foreach (Type t in types)
            {
                mi = t.GetMethod("<my method name>");

                if (mi != null)
                {
                    string typeName = t.FullName;
                    object lateBoundObj = asm.CreateInstance(typeName);
                    result = t.InvokeMember("GetWeb", BindingFlags.Public | BindingFlags.InvokeMethod | BindingFlags.Instance, null, lateBoundObj, arguments);
                    break;
                }
            }
            //set return for find method
        }
        catch (Exception ex) { }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T14:41:14.083

问题是你从来没有给 赋值`asm`，所以它的默认值是`null`。也许您打算`assemblyInstance`改用？

事实上，我不会使用`Assembly.CreateInstance`或根本不会使用`Type.FullName`- 我会使用：

```
object lateBoundObj = Activator.CreateInstance(t); 
```

另请注意，您应该始终避免使用这样的代码：

```
catch (Exception ex) { } 
```

*始终*至少记录异常。理想情况下，不要捕获您根本无法真正“处理”的异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:45:46.907

`asm`永远不会分配变量。你应该打电话`CreateInstance`来`assemblyInstance`代替。

# javascript - 跟踪jqplot垂直折线图的鼠标位置

> ID：12390711
> 
> 赞同：2
> 
> 时间：2012-09-12T14:40:11.150
> 
> 标签：javascript, jquery, jqplot

我想创建一个[jqPlot](http://www.jqplot.com/)折线图，它能够在垂直和水平方向之间改变方向。通过旋转包含图表的 div 元素，我能够使用 CSS 规则来实现这一点。

我到目前为止的工作：http: [//jsfiddle.net/GayashanNA/A4V4y/14/](http://jsfiddle.net/GayashanNA/A4V4y/14/)

但问题是我还想在翻转方向后跟踪鼠标指针和鼠标点击图表上的点，因为我想注释这些点。当图表处于垂直方向时，我无法执行此操作。谁能建议一种方法来做到这一点？还是我以错误的方式解决问题？

*（注意：我可以在水平方向上做到这一点，如果您尝试单击上图中的一个点，您可以观察它。）*

非常感谢和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:00:29.203

我终于找到了解决问题的方法。但我不得不改变 jqPlot 库来实现这一点。为了帮助遇到同样问题的其他人，我将把我的解决方案放在这里。

首先，我必须将以下代码插入到 jquery.jqplot.js 文件的 jqPlot 类中，这是核心库。

```
function jqPlot() {
    //add the following code segment
    var verticallyOriented = false;
    this.setVertical = function(state){
        verticallyOriented = state;
    }
    //don't change other code that isn't mentioned here

    //now you have to change the logic in the getEventPosition function
    //to make sure the new orientation is detected
    function getEventPosition(ev) {
        //change the line starting with var gridPos = ...
        //to the following code segment
        //depending on the orientation the event position calculating algorithm is changed
        if(verticallyOriented){
            var gridPos = {x:ev.pageY - go.top , y:plot.eventCanvas._elem.height() - ev.pageX + go.left};
        } else {
            var gridPos = {x:ev.pageX - go.left, y:ev.pageY - go.top};
        }
        //no change to other code is needed
    }
} 
```

您可以在这里查看一个工作示例：http: [//jsfiddle.net/GayashanNA/yZwxu/](http://jsfiddle.net/GayashanNA/yZwxu/)

更改的库文件的要点：[https ://gist.github.com/3755694](https://gist.github.com/3755694)

如果我做错了什么，请纠正我。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:44:37.650

我从来没有使用过 jqPlot，但我猜你的问题是尝试使用 css rotate()，因为光标插件使用鼠标位置来确定在哪里画线，并且元素的大小在通过旋转转换时不会改变( )，它仍然具有相同的宽度和高度值。

如果你看一下代码，你会看到：

```
if (c.showVerticalLine) {
    c.shapeRenderer.draw(ctx, [[gridpos.x, 0], [gridpos.x, ctx.canvas.height]]);
}
if (c.showHorizontalLine) {
    c.shapeRenderer.draw(ctx, [[0, gridpos.y], [ctx.canvas.width, gridpos.y]]);
} 
```

所以看起来图书馆总是根据鼠标位置在原始元素上绘制线条，这当然不会匹配旋转（）转换后的位置，并且旋转后XY坐标将转换为YX ()。
我会尝试更改原始元素的大小，但我不知道库是否允许您指定要在哪一侧绘制标签。

# tomcat - Cloudbees 虚拟主机与 tomcat 上下文路径

> ID：12390713
> 
> 赞同：0
> 
> 时间：2012-09-12T14:40:17.920
> 
> 标签：tomcat, cloudbees

我有一个在 tomcat 中本地运行的 Web 应用程序，并且我也部署到了 Cloudbees。但是，使用虚拟主机的 cloudbees 与使用上下文路径的本地 tomcat 相比，我遇到了一些问题。

我通过以下方式访问我的本地 tomcat 应用程序

*   `http://localhost:8080/SpringMVC`

在 cloudbees 中，我通过以下方式访问它

*   [http://springmvc.shaunabram.cloudbees.net](http://springmvc.shaunabram.cloudbees.net)

到目前为止一切顺利，但问题是当我尝试提交时。在本地，这成功提交给

*   `http://localhost:8080/SpringMVC/HelloWorld`

但是在 cloudbees 上，它尝试（但失败）提交给

*   `http://springmvc.shaunabram.cloudbees.net/SpringMVC/HelloWorld`

如果我手动将浏览器 URL 修改为

*   `http://springmvc.shaunabram.cloudbees.net/HelloWorld`

一切正常。

[我在这里](https://stackoverflow.com/questions/11957578/app-runs-locally-but-returns-404-running-on-cloudbees)看到了一个类似的问题，但建议的解决方案是

1.  更新 web.xml 以使用前缀路径（例如，我认为 /SpringMVC 在我的情况下），但这会破坏我的本地 tomcat 版本，或者
2.  将应用程序部署为带有 application.xml 的 EAR 文件 - 但迁移到 EE 容器（如 tomcat EE 或 JBoss）将是一项更大的任务。

我曾认为解决方案可能是使用 CloudBees Web 配置文件以某种方式配置应用程序以使用（类似）`http://springmvc.shaunabram.cloudbees.net/SpringMVC`作为我的基本 url，但我看不到任何示例（所有 CloudBees Web 配置文件示例似乎是用于环境特定的数据源）。

非常感谢任何帮助！

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:14:43.157

Web 应用程序永远不应该使用绝对路径，并且总是使用 ServletContext.getContextPath() 构建 URL。我想知道你遇到了这个问题，假设你使用 SpringMVC 为你处理这个问题。

或者，也许您硬编码了一些资源路径，但应该使用它来生成足够的路径，或者使用 scriptlet 来附加上下文路径：

```
<c:url value="/style.css" var="url" />
<link rel="stylesheet" href="${url}" type="text/css"> 
```

或者

```
<link rel="stylesheet" href="${pageContext.request.contextPath}/style.css" type="text/css"> 
```

另请参阅[JSP 中的 Spring MVC 请求 URL](https://stackoverflow.com/questions/6970115/spring-mvc-request-urls-in-jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T03:02:37.893

CloudBees 使用 ROOT 上下文路径 [/] 运行您的应用程序。您至少有两个选项可以让您的应用同时在本地环境和云环境中运行：

*   使用 ROOT 上下文在本地运行您的应用程序（通过将应用程序部署到 webapps/ROOT 或 webapos/ROOT.war）
*   使用 request.getContextPath() 更改用于生成表单的 URL 以构造表单的操作路径

# sql-server - sql server 2008 存储过程，不能在单引号中使用变量

> ID：12390715
> 
> 赞同：2
> 
> 时间：2012-09-12T14:40:22.413
> 
> 标签：sql-server, sql-server-2008, stored-procedures

这是我的存储过程。

```
ALTER PROCEDURE [dbo].[SearchIngredients] 
    @Term NVARCHAR(50) 
AS
BEGIN
    SET NOCOUNT ON;

    SELECT  *
    FROM    dbo.FoodAbbrev
    WHERE   Name LIKE '%@Term%'
    ORDER BY Name

END 
```

我一直没有结果。我认为这是因为我将变量放在单引号中，并且可能 DB 认为这是字符串的一部分，而不是变量。尝试了其他一些方法，仍然无法解决，请帮助我。

我也试过。仍然一无所获。

```
 SET @Term = '''%' + @Term + '%'''

    SELECT  *
    FROM    dbo.FoodAbbrev
    WHERE   Name LIKE @Term
    ORDER BY Name 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T14:41:38.713

简单地;

```
set @Term = '%' + @Term + '%' 
```

您只需将 2 个常量字符串添加到变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T10:58:32.607

正确方法如下：

```
set @FieldValue = '''' + @FieldValue + '''' 
```

# extjs - Extjs 3.4 checkchange 监听器在 Checkcolumn 上不起作用

> ID：12390716
> 
> 赞同：5
> 
> 时间：2012-09-12T14:40:25.560
> 
> 标签：extjs, checkbox, grid, extjs3

我的 checkColumn 的 checkchange 侦听器不起作用。有什么想法为什么不呢？

```
var checked = new Ext.grid.CheckColumn({
  header: 'Test',
  dataIndex: 'condition',
  renderer: function(v,p,record){
        var content = record.data['info'];      
        if(content == 'True'){
              p.css += ' x-grid3-check-col-td'; 
            return '<div class="x-grid3-check-col'+(v?'-on':'')+' x-grid3-cc-'+this.id+'"> </div>';
        }

  },    
  listeners:{
        checkchange: function(column, recordIndex, checked){
              alert("checked");
        }

  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-07T15:18:12.907

在 Ext.ux.grid.CheckColumn 中，添加这个注册 checkchange 事件的初始化方法：

```
initComponent: function(){
  Ext.ux.grid.CheckColumn.superclass.initComponent.call(this);

  this.addEvents(
    'checkchange'
  );
}, 
```

然后在 processEvent 中触发事件：

```
processEvent : function(name, e, grid, rowIndex, colIndex){
  if (name == 'mousedown') {
    var record = grid.store.getAt(rowIndex);
    record.set(this.dataIndex, !record.data[this.dataIndex]);

    // Fire checkchange event
    this.fireEvent('checkchange', this, record.data[this.dataIndex]);

    return false; // Cancel row selection.
  } else {
    return Ext.grid.ActionColumn.superclass.processEvent.apply(this, arguments);
  }
}, 
```

生成的 CheckColumn 组件应如下所示：

```
 Ext.ns('Ext.ux.grid');

  Ext.ux.grid.CheckColumn = Ext.extend(Ext.grid.Column, {
    // private
    initComponent: function(){
      Ext.ux.grid.CheckColumn.superclass.initComponent.call(this);

      this.addEvents(
        'checkchange'
      );
    },

    processEvent : function(name, e, grid, rowIndex, colIndex){
      if (name == 'mousedown') {
        var record = grid.store.getAt(rowIndex);
        record.set(this.dataIndex, !record.data[this.dataIndex]);

        this.fireEvent('checkchange', this, record.data[this.dataIndex]);

        return false; // Cancel row selection.
      } else {
        return Ext.grid.ActionColumn.superclass.processEvent.apply(this, arguments);
      }
    },

    renderer : function(v, p, record){
      p.css += ' x-grid3-check-col-td'; 
      return String.format('<div class="x-grid3-check-col{0}">&#160;</div>', v ? '-on' : '');
    },

    // Deprecate use as a plugin. Remove in 4.0
    init: Ext.emptyFn
  });

  // register ptype. Deprecate. Remove in 4.0
  Ext.preg('checkcolumn', Ext.ux.grid.CheckColumn);

  // backwards compat. Remove in 4.0
  Ext.grid.CheckColumn = Ext.ux.grid.CheckColumn;

  // register Column xtype
  Ext.grid.Column.types.checkcolumn = Ext.ux.grid.CheckColumn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T14:19:34.040

在 ExtJS 3 中，checkcolumn 插件实际上并没有使用 ExtJS 的复选框组件，因此复选框事件不可用。checkcolumn 只是一个扩展的[网格列](http://docs.sencha.com/extjs/3.4.0/#!/api/Ext.grid.Column)，它添加了一个自定义渲染器来设置单元格的样式，就像一个复选框。

默认情况下，您可以监听的唯一事件是 Ext.grid.Column 的事件（[click](http://docs.sencha.com/extjs/3.4.0/#!/api/Ext.grid.Column-event-click)、[contextmenu](http://docs.sencha.com/extjs/3.4.0/#!/api/Ext.grid.Column-event-contextmenu)、[dblclick](http://docs.sencha.com/extjs/3.4.0/#!/api/Ext.grid.Column-event-dblclick)和[mousedown](http://docs.sencha.com/extjs/3.4.0/#!/api/Ext.grid.Column-event-mousedown)）。

[This answer to a similar question](https://stackoverflow.com/a/10795321/3688026) 显示了如何覆盖 CheckColumn 并添加 beforecheckchange 和 checkchange 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T12:19:00.123

简单的答案

当用户单击 extjs 3 网格中的复选框时，复选框选中或取消选中。在网格中使用这个属性：=>`columnPlugins: [1, 2],` 我相信在你的代码中使用这个属性是完美的。

```
xtype:grid,
columnPlugins: [1, 2], 
```

# vim - 如何为不同的文件类型设置 vim 菜单重新加载

> ID：12390721
> 
> 赞同：0
> 
> 时间：2012-09-12T14:40:47.263
> 
> 标签：vim

我使用 vim 来编辑不同的文件类型。似乎 vim 可以正确加载文件类型插件，对于不同的文件类型，突出显示、缩进和注释都运行良好。但菜单栏似乎不起作用。例如。我安装了 vim-latex，因此打开 .tex 文件后，菜单栏有所有菜单 Tex-suite、Tex-enviroment、Tex-Math 等，但是当我切换回 .py 文件时，这些菜单仍然存在......甚至 .tex 文件编译的键盘映射仍然存在。当我键入时`<leader>ll`，vim 仍然在以前的缓冲区中编译 .tex 文件...

当加载不同的文件类型时，我应该如何重置 vim 菜单（和键盘映射）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:01:56.823

我以前不知道*vim-latex*，但它看起来像一个完全接管 Vim 的强大套件，目前不支持在加载后撤消其大量自定义。

您可以通过以下方式摆脱菜单

```
:aunmenu TeX-Suite 
```

并同样通过删除映射

```
:nunmap <buffer> <Leader>ll 
```

但我想简单地退出 Vim 并重新启动它是最简单、实用的解决方案。

当然，您可以针对该项目提出增强请求，但我想这不是他们的优先事项，有些人可能会发现切换缓冲区时切换菜单比延迟菜单更烦人。

# javascript - Spotify 中的持续 setTimeout 调用偶尔会冻结 UI 2 秒

> ID：12390722
> 
> 赞同：2
> 
> 时间：2012-09-12T14:40:48.773
> 
> 标签：javascript, spotify

我一直在开发一个动画 Spotify 应用程序，并且遇到了口吃问题。在尝试尽可能地减少动画代码但仍然遇到卡顿后，我删除了除了 setTimeout 函数之外的所有内容。在调试器中观察时间线确认[卡顿](http://i.imgur.com/iMMGZ.png)仍然存在。

为了测试这个问题，我编写了以下代码片段并在 Spotify 和 chrome 中运行它：

```
var delta;
var newTime;
var oldTime = new Date().getTime();
var startTime = new Date().getTime();
function updateFrame() {
    newTime = new Date().getTime();
    delta = newTime - oldTime;
    if (delta>500 ) {
        console.log(delta + " @ " + Math.round((newTime-startTime)/1000) + " seconds");
    }
    oldTime = newTime;
    setTimeout("updateFrame()",50);
} 
```

在 spotify 中，典型的输出如下所示：

```
 2168 @ 14 seconds
 2150 @ 51 seconds
 2151 @ 111 seconds
 2166 @ 171 seconds
 2174 @ 231 seconds
 2194 @ 291 seconds
 2181 @ 351 seconds
 2259 @ 411 seconds
 2216 @ 471 seconds 
```

在这两秒钟内，整个 Spotify UI 完全没有响应，而音乐继续播放并记录了击键。使用 setInterval，不同的 setTimeout 间隔，以及在更新函数中更改 setTimeout 的位置，似乎都没有任何效果。

在 chrome 中，在选项卡变为非活动状态之前不会记录任何内容：

```
 1002 @ 9 seconds 
 1001 @ 10 seconds 
 1000 @ 11 seconds 
 1001 @ 12 seconds 
 1003 @ 13 seconds 
 1000 @ 14 seconds 
 1006 @ 15 seconds 
```

我不知道如何解决这个问题——我觉得我做错了什么，因为我用过的其他应用程序都冻结了 Spotify。这可能是因为它们不包括持久的 setTimeout 调用，但我不确定如何在没有它们的情况下创建动画。

# c# - C# 3 值集数据的正确数据集是什么？

> ID：12390729
> 
> 赞同：0
> 
> 时间：2012-09-12T14:41:00.803
> 
> 标签：c#, class, dataset

对于 2 值集数据，很明显我可以使用 Dictionary。例如：如果我有“名称”和“位置”作为键值对，我可以使用字典。

3值集呢？我应该使用什么合适的数据集？我有`Name`, `level`, `position`. 唯一独特的是位置。

IE

```
Item1, port0, line20; 
Item1, port1, line21; 
Item2, port0, line22; 
Item2, port1, line23; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:48:16.440

为什么不创建一个合适的类呢？很简单，很短，很有意义。

```
public class FooBar
{
    public string Name {get; set;}
    public string Level {get; set;}
    public string Position {get; set;}
} 
```

然后将其放入`List<FooBar>`or `Dictionary<string, FooBar>`（其中关键是`Position`）。

创建`List`or`Dictionary`允许您通过其属性轻松获取项目

```
var list = new List<FooBar>() {..., ..., ...};
var item = list.Single(f => f.Position == "line21"); // etc.
var other = list.Single(f => f.Name == "Item1"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:48:45.457

您不想创建自己的类型，这就是`class`and`struct`关键字的用途。

```
public struct My3ValueThing
{
    public string Name;
    public int Level;
    public string Position;
} 
```

然后你可以做

```
ISet<My3ValueThing> dataset = new HashSet<My3ValueThing>(); 
```

* * *

如果您想将数据保存在 a 中`Dictionary`并通过某个唯一键查找您的项目，假设`Position`您可以这样做，

```
IDictionary<string, My3ValueThing> data = 
    new Dictionary<string, My3ValueThing>(); 
```

并添加这样的项目

```
var newItem = new My3ValueThing
    {
        Name = "Item1",
        Port = 0,
        Position = "Line20"
    };

data.Add(newItem.Position, newItem); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:44:46.860

我不确定这是否是您的意思，但请尝试使用[Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)类。

它是一个通用类，最多可以容纳 8 个不同类型的值

例如：`Tuple<Item, string, string>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:46:00.870

您可以考虑使用`Tuple`.

```
Tuple<string, string, string> myTuple = new Tuple<string, string, string>(); 
```

您可能遇到的唯一问题是它们并不像`Dictionary`可能那样独特。

MSDN 文档[在这里](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T14:48:59.323

构建一个自定义对象，用值填充它。构建实例数组。然后使用字典作为散列到数组中。（字典，其中 int 是实例的索引。）

老实说，这个问题有很多答案，有很多警告，几乎不可能回答这个问题。您可能需要考虑向我们提供有关您要完成的任务的更多详细信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T14:49:54.020

您也可以只创建一个类来建模您的数据并将其存储在任何`IEnumerable`（例如`List`）

```
public class Item
{
    public Item(int item, int port, int line)
    {
        ItemNum = item;
        PortNum = port;
        LineNum = item;
    }

    public int ItemNum;
    public int PortNum;
    public int LineNum;
}

List<Item> l = new List<Item>();
l.Add(new Item(1, 0, 20));
l.Add(new Item(1, 1, 21));
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T14:51:20.470

对于二值集合数据，我们将使用 2-Tuple ( ) 的集合（`HashSet<T>`或另一个`ISet<T>`明显可能的实现，如果我们要做任何集合操作）`Tuple<T1, T2>`，一个匿名类（在方便时 - 通常特别是在涉及 linq 时）或相关数据的自定义类。

我们将使用字典进行一键单值查找。

对于三值集数据，我们将使用一组 3-Tuple ( `Tuple<T1, T2, T3>`) 和匿名类，或用于相关数据的自定义类。

如果你想要一个二元组键，一个值查找，然后使用`Dictionary<Tuple<T1, T2> TValue>`.

编辑：如果您以前使用过框架版本`Tuple`，那么您的工具包中确实应该有某种元组类，因为它经常出现。使用这样的东西作为起点：

```
public static class Tuple
{
    public static Tuple<T1, T2> Create<T1, T2>(T1 item1, T2 item2)
    {
        return new Tuple<T1, T2>(item1, item2);
    }
    public static Tuple<T1, T2, T3> Create<T1, T2, T3>(T1 item1, T2 item2, T3 item3)
    {
        return new Tuple<T1, T2, T3>(item1, item2, item3);
    }
}
public class Tuple<T1, T2> : IEquatable<Tuple<T1, T2>>
{
    private readonly T1 _item1;
    private readonly T2 _item2;
    public Tuple(T1 item1, T2 item2)
    {
        _item1 = item1;
        _item2 = item2;
    }
    public T1 Item1 { get { return _item1; } }
    public T2 Item2 { get { return _item2; } }
    public bool Equals(Tuple<T1, T2> other)
    {
        return
            ReferenceEquals(this, other)
            ||
            (
                other != null
                && (ReferenceEquals(_item1, other._item1) || (_item1 != null && _item1.Equals(other._item1)))
                && (ReferenceEquals(_item2, other._item2) || (_item2 != null && _item2.Equals(other._item2)))
            );
    }
    public override bool Equals(object obj)
    {
        return Equals(obj as Tuple<T1, T2>);
    }
    public override int GetHashCode()
    {
        int h1 = _item1 == null ? 0 : _item1.GetHashCode();
        int h2 = _item2 == null ? 0 : _item2.GetHashCode();
        return ((h1 << 5) + h1) ^ h2;
    }
}
public class Tuple<T1, T2, T3> : IEquatable<Tuple<T1, T2, T3>>
{
    private readonly T1 _item1;
    private readonly T2 _item2;
    private readonly T3 _item3;
    public Tuple(T1 item1, T2 item2, T3 item3)
    {
        _item1 = item1;
        _item2 = item2;
        _item3 = item3;
    }
    public T1 Item1 { get { return _item1; } }
    public T2 Item2 { get { return _item2; } }
    public T3 Item3 { get { return _item3; } }
    public bool Equals(Tuple<T1, T2, T3> other)
    {
        return
            ReferenceEquals(this, other)
            ||
            (
                other != null
                && (ReferenceEquals(_item1, other._item1) || (_item1 != null && _item1.Equals(other._item1)))
                && (ReferenceEquals(_item2, other._item2) || (_item2 != null && _item2.Equals(other._item2)))
                && (ReferenceEquals(_item3, other._item3) || (_item3 != null && _item2.Equals(other._item3)))
            );
    }
    public override bool Equals(object obj)
    {
        return Equals(obj as Tuple<T1, T2, T3>);
    }
    public override int GetHashCode()
    {
        int h1 = _item1 == null ? 0 : _item1.GetHashCode();
        int h2 = _item2 == null ? 0 : _item2.GetHashCode();
        int h3 = _item3 == null ? 0 : _item3.GetHashCode();
        int h = ((h1 << 5) + h1) ^ h2;
        return ((h << 5) + h) ^ h3;
    }
} 
```

# jquery - jquery 对具有相同类名的三个对象中的第一个执行操作

> ID：12390731
> 
> 赞同：0
> 
> 时间：2012-09-12T14:41:07.257
> 
> 标签：jquery, jquery-ui, jquery-plugins

我的 html 页面中有 3 个选择选项，如下所示

```
 <select class="combo">
    <option value=""></option>
    <option value="1"></option>
    <option value="2"></option>
    <option value="3"></option>
    </select>
    <br/>
    <select class="combo">
        <option value="1"></option>
    <option value="2"></option>
    <option value="3"></option>
    </select>
    <br/>
    <select class="combo">
       <option value="1"></option>
    <option value="2"></option>
    <option value="3"></option>
    </select>
<br/>
<button type="submit" class="search_btn">
                                <img src="media/images/search_icon.png" title="Search" /></button>
                            <input type="text" lang="fa" id="search" name="search"/> 
```

我想如果第一个选择值不为空，则触发一个动作。像这样的东西。

```
if( $('.combo').has('option').length > 0 ) { 
 $('#search').val('');
} 
```

问题是我不知道如何为第一个选择而不是第二个和第三个选择解决此操作（因为它们具有相同的类名）。

请注意，我**不想将 ID 设置为****代码预览**中的第一个选择

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:43:28.047

您可以使用`:first`选择器：

```
if ( $('.combo:has(option):first').length > 0 ) { 
   $('#search').val('');
} 
```

请注意，与第一个`$('.combo:has(option):first')`不同的是`$('.combo:first:has(option)')`，第一个选择`select.combo`具有选项元素的第一个，而第二个`select.combo`仅*在*具有选项元素时才选择第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:43:35.730

您可以尝试使用`:first()`jQuery 提供的选择器 (http://api.jquery.com/first/)

> 给定一个表示一组 DOM 元素的 jQuery 对象，.first() 方法从第一个匹配元素构造一个新的 jQuery 对象。

**[演示](http://jsfiddle.net/AS8wA/2/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:56:29.187

我不确定你想要什么..但要根据这个来回答......

> *我想如果第一个选择值不为空，触发一个动作*

和

> 哎呀。我错过了选择的第一个选项。我刚刚编辑了这个问题。我的意思是，除了第一个“”之外的选择是什么时候

**JS：**

```
if( $('.combo:first').val() == '') {  //assuming not NULL means select value
   $('#search').val('');
} 
```

`:first`用于从选定元素中选择第一个匹配的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:44:38.760

在 jQuery 中使用 :first 选择器来检索第一个选项，如下所示：

```
if ( $('.combo:has(option):first').length > 0 ) { 
   $('#search').val('');
} 
```**

# c# - 将代码从 .NET 4 重写为 .NET 2 C# 的操作

> ID：12390733
> 
> 赞同：1
> 
> 时间：2012-09-12T14:41:10.027
> 
> 标签：c#, .net

> **可能重复：**
> [C# 2.0 泛型：如何创建零参数的 Action 对象](https://stackoverflow.com/questions/1149243/c-sharp-2-0-generics-how-to-create-an-action-object-with-zero-parameters)

我使用代码来委托这样的方法：

> this.Invoke((Action)(() => importProcessExited()));

我收到一个错误：

> 使用泛型类型“System.Action”需要 1 个类型参数。

这行代码应该如何在 .NET 2 中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:42:48.507

您可以简单地创建一个没有类型参数的新委托。

```
delegate void Action(); 
```

# sympy - Sympy - 以派生单位输出结果

> ID：12390734
> 
> 赞同：0
> 
> 时间：2012-09-12T14:41:12.457
> 
> 标签：sympy

> **可能重复：**
> [SymPy：如何根据其他表达式返回表达式？](https://stackoverflow.com/questions/2038100/sympy-how-to-return-an-expression-in-terms-of-other-expressions)

考虑以下：

```
>>>from sympy.physics.units import *
>>>F=1*N
>>>F
kg*m/s**2 
```

在这种情况下，如何强制输出使用派生单位 N？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:39:48.630

不幸的是，SymPy 的单位只适用于基本单位，所以你想要的目前是不可能的。

有一些改进单位系统的工作，以允许用户设置任意基本单位。请参阅[https://github.com/sympy/sympy/pull/1389](https://github.com/sympy/sympy/pull/1389)。它仍然是开发工作，所以有些东西可能还不能用它（而且它还没有包含在主要的 SymPy 开发存储库中）。

# html - 当 Media Player 的 windowlessVideo 参数变坏时，现在怎么办？

> ID：12390741
> 
> 赞同：2
> 
> 时间：2012-09-12T14:41:27.507
> 
> 标签：html, windows, windows-7, media-player, windows-media-player

***背景：***

我们有一个网络“应用程序”，在一个网页上我们有以下内容：

嵌入式 Windows Media Player 对象。它被左侧的列表视图和底部的一些图形元素包围。列表视图（有几个）允许数据输入。因此，会弹出对话框让您输入各种文本。

由于这些弹出对话框（不仅是数据输入对话框，还有常规警报/消息框），嵌入式 Windows Media Player 对象的参数之一是：

```
<param name="windowlessVideo" value="true"> 
```

否则，任何类型的任何对话框都将落后于媒体播放器对象，您将无法看到它。[这是使用 windowlessVideo 解决对话框问题的示例 stackoverflow。](https://stackoverflow.com/questions/1602366/windows-media-player-on-top-other-div "视频")

***这是问题：***

而我们直到越来越多的人开始使用 Windows 7 和 Windows Media Player 12 时才看到这一点，在打开 windowlessVideo 设置的情况下，它会导致性能下降。有点滞后。不是我输入几个单词的延迟类型，一秒钟过去了，然后你会看到我输入的单词终于出现了。不。想象一下输入这句话：

**我正在对话框中输入一些文本。**

当你向上看时，各种字符会丢失，看起来像：

**amtpin int adilg box sme txt。**

所以，你可以想象，这是不可接受的。人们只是不能再输入对话框。

当然，当您查看[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564092%28v=vs.85%29.aspx "微软")时，它会这样说：

> 在 Windows Vista 中，以无窗口模式渲染视频会降低性能。

好的，是的。我看到了。怎么办？

在 Windows Media Player 12 之前，我曾经能够转到工具 -> 选项 -> 性能选项卡，在视频加速下会有一个滑块和一个带有大量其他选项的高级按钮。我之前通过将滑块转到“无”来解决“闪烁”视频问题。所以，我希望有一些媒体播放器设置我可以修改来纠正这个问题。没有。不再有任何视频加速设置，并且“DVD 和视频播放”下有 4 个复选框，它们不会影响任何事情。

同时，如果我所做的只是删除 windowlessVideo 设置，我根本不会遇到那种滞后。我把它加回来，我得到了滞后。我把它拿走，没有滞后。但所做的只是用另一个问题代替一个问题。我可能会修复滞后，但现在我所有的对话框都在媒体播放器后面。

好的，微软。谢谢！你赢了。但是，现在呢？有人有什么想法吗？谢谢！

# c - 关注结构指针

> ID：12390746
> 
> 赞同：0
> 
> 时间：2012-09-12T14:41:39.310
> 
> 标签：c, pointers, struct

我正在做一个项目，我们的教授给了我们代码，其中包含我们无法更改的变量和原型声明。一个是结构，指向该结构的指针的类型定义为`pStudentRecord`：

```
typedef struct
{
  char* firstName;
  char* lastName;
  int id;
  float mark;
}* pStudentRecord; 
```

使用指向此类型的指针称为`g_ppRecords`. 这将是一个指向上述结构的动态指针数组。

这就是我的问题所在。将从文件中读取记录。如果指定的文件名不存在，则创建一个新文件名。`g_ppRecords`每当用户添加第一条新记录时，我都会初始化指针：

```
if(!n) //where n = number of records
  g_ppRecords = (pStudentRecord*)  malloc(sizeof(pStudentRecord));

g_ppRecords[n] = (pStudentRecord) malloc(16); 
```

到目前为止，此代码每次运行时都有效，但我不确定如何。`pStudentRecord`如果我添加更多记录，则将在 中的下一个位置创建一个新指针 ( ) `g_ppRecords`。据我了解，我还没有为那个新指针分配空间，但每次它工作时都没有任何问题。我可以很好地访问新结构的成员，并且我没有收到堆损坏错误或访问冲突或类似的情况。我的担忧是正确的还是我在怀疑自己？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:51:52.320

根据您显示的代码，您的担忧是有效的。

这一行：

```
g_ppRecords = (pStudentRecord*)  malloc(sizeof(pStudentRecord)); 
```

只为*单个* `pStudentRecord`. 把它想象成一个`pStudentRecord`只有一个元素的数组， at `g_ppRecords[0]`。

> 如果我添加更多记录，那么将在`g_ppRecords`.

现在的问题是当您执行此处描述的操作时可能会发生什么。添加新指针时会发生什么？除非您使用`realloc`为 获取更多空间`g_ppRecords`，否则该数组中*没有*空间容纳更多指向记录的指针。如果你`malloc`在第二个元素上有一个新指针，即：

```
g_ppRecords[1] = (pStudentRecord) malloc(16); 
```

`g_ppRecords[1]`然后，您正在使用*尚未*分配的内存。这*似乎*可行，但这段记忆不属于你。继续添加新指针，最终你的程序会中断。或者你的程序可能会因为你的代码的另一部分完全不相关的东西而中断。

解决方法是您最初应该分配您的数组，以便它可以容纳*多个*指针，而不仅仅是一个。你怎么能用你的第一`malloc`行做到这一点？

我应该补充一点，当您为`struct`使用分配内存时，`malloc(16)`您会假设您不应该做出的数据结构，特别是`struct`始终占用 16 个字节。鉴于您的`typedef`: 直接指向来自 anonymous 的指针`struct`，您可以将其更改`16`为更通用的内容，但这与您的问题没有直接关系，您应该向教授询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:09:02.830

作为一般规则，尽量避免使用`malloc( sizeof( type ))`，尤其是当类型被类型转换混淆时。在变量上调用 sizeof 会更安全：`malloc( sizeof x )`。此外，在 C 中，您不应该从 malloc 中转换返回值。换句话说，不是只为一条记录分配空间：

```
g_ppRecords = (pStudentRecord*)  malloc(sizeof(pStudentRecord)); 
```

最好通过以下方式为 n 条记录分配空间：

```
g_ppRecords = malloc( n * sizeof *g_ppRecords ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:45:30.827

```
typedef struct
{
  char* firstName;
  char* lastName;
  int id;
  float mark;
}* pStudentRecord; 
```

这是一个匿名结构。这里有点奇怪，但也许可以教你一些东西。这样做来创建一个新的：

```
pStudentRecord ptr;
ptr = malloc(sizeof(*ptr)); 
```

这将自动分配适量的内存。

您仍然遇到问题，因为您需要 malloc 数组来保存指针。为此，请执行以下操作：

```
pStudentRecord* g_ppRecords = malloc(n * sizeof(pStudentRecord)); 
```

然后，您可以像这样使用 g_ppRecords：

```
pStudentRecord ptr = g_ppRecords[3]; 
```

综上所述，我们有我们的自定义分配器：

```
pStudentRecord* g_ppRecords = malloc(n * sizeof(pStudentRecord));

for (size_t i = 0; i < n; ++i)
{
  pStudentRecord ptr;
  g_ppRecords[i] = malloc(sizeof(*ptr));
} 
```

我在没有编译和测试的情况下编写了所有这些，所以可能会有错误（但这不是我的作业:-)）

# javascript - 带有多个 elseif 的 Javascript if 语句

> ID：12390747
> 
> 赞同：1
> 
> 时间：2012-09-12T14:41:41.970
> 
> 标签：javascript, if-statement, multiple-conditions

我有以下 if 语句用于比较表中同一列中的 2 行。我多次使用相同的代码块在不同的列上执行相同的计算。

基本上，我想要一个箭头显示一行和下一行之间的值移动，以及值落入的阈值。因此，例如，在我下面的代码中，任何高于 15 的值都应该是一个红色箭头，如果之前的值较低，那么箭头应该指向上方。我稍后在代码中使用从另一个位置调用的图像来渲染箭头，因此 if 语句只为我提供了相应箭头的字符串。

正如我上面所说，我多次使用相同的代码块。奇怪的是，输出对某些变量有效，而对其他变量无效；即使它是替换了变量名的完全相同的代码！它给我的错误是有时没有明显的原因。

我的条件是不是太多了？有没有更有效的方法来做我想做的事情？

任何帮助将不胜感激！

谢谢，卡尔

```
var Arrow = " ";
if(KPI[0] > KPI[1] && KPI[0] >= 15)
{
    Arrow = "redarrowup.png";
}
else if(KPI[0] < KPI[1] && KPI[0] >= 15)
{
    Arrow = "redarrowdown.png";
}
else if(KPI[0] = KPI[1] && KPI[0] >= 15)
{
    Arrow = "redarrowflat.png";
}
else if(KPI[0] > KPI[1] && KPI[0] >= 10 && KPI[0] < 15)
{
    Arrow = "yellowarrowup.png";
}
else if(KPI[0] < KPI[1] && KPI[0] >= 10 && KPI[0] < 15)
{
    Arrow = "yellowarrowdown.png";
}
else if(KPI[0] = KPI[1] && KPI[0] >= 10 && KPI[0] < 15)
{
    Arrow = "yellowarrowflat.png";
}
else if(KPI[0] > KPI[1] && KPI[0] < 10)
{   
    Arrow = "greenarrowup.png";
}
else if(KPI[0] < KPI[1] && KPI[0] < 10)
{   
    Arrow = "greenarrowdown.png";
}
else
{
    Arrow = "greenarrowflat.png";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:50:19.530

我建议分别表达不同的概念，然后在最后将它们组合起来。像这样：

```
var arrow;
var movement = "flat";
var band = "green";

if (KPI[0] > KPI[1]) {
    movement = "up";
} else if (KPI[0] < KPI[1]) {
    movement = "down";
}

if (KPI[0] >= 15) {
    band = "red";
} else if (KPI[0] >= 10) {
    band = "yellow";
}

arrow = band + "arrow" + movement + ".png"; 
```

您还可以将这些元素中的每一个都推迟到一个函数中，因此您的最后一行将显示为：

```
arrow = getBand(KPI[0], KPI[1]) + "arrow" + getMovement(KPI[0], KPI[1]) + ".png"; 
```

这将更容易在隔离其他逻辑的情况下更改频段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:51:57.960

我会说：

```
function direction(val1, val2){
  return val1 < val2 ? "down" : val1 == val2 ? "flat" : "up";
}

function color(val){
  return val >= 15 ? "red" : val >= 10 ? "yellow" : "green";
}

var arrow = color(KPI[0]) +"arrow"+ direction(KPI[0], KPI[1]) +".png"; 
```

如果您不理解代码，我总是告诉人们不要复制和粘贴代码。`?:`你可能对这个位不熟悉。它是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)（内联 if）。

如果您需要多个箭头，我建议您也添加一个生成箭头的函数：

```
function arrow(val1, val2){
  return color(val1) +"arrow"+ direction(val1, val2) +".png";
}

var kpiArrow = arrow(KPI[0], KPI[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:50:24.610

乍一看，我会说你有一个“=”，你需要一个“==”（甚至是“===”）。例如

```
if(KPI[0] = KPI[1] && KPI[0] >= 15) 
```

应该是

```
if(KPI[0] == KPI[1] && KPI[0] >= 15) 
```

（或者甚至 === 正如我所说的）。等等。"=" 是一个赋值运算符，它将 KPI[0] 的值设置为 KPI[1] 的值，然后返回该值，因此您实际上是在执行以下操作：

```
KPI[0] = KPI[1];
if(KPI[1] && KPI[0] >= 15) 
```

我怀疑这是意图。也就是说，正如其他几个人已经说过的那样，有更好的方法来构建代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:48:41.743

我认为问题不在于 if 的数量。但是您可以更好地构建代码：

```
var direction, color;

// set direction

if(KPI[0] > KPI[1])
{
  direction = "up";
}
else if(KPI[0] < KPI[1])
{
  direction = "down";
}
else if(KPI[0] == KPI[1]) // there was an error in this condition, by the way
{
  direction = "flat";
}

// set color

if(KPI[0] >= 15)
{
  color = "red";
}
else if(KPI[0] >= 10 && KPI[0] < 15)
{
  color = "yellow";
}
else if(KPI[0] < 10)
{
  color = "green";
}

var Arrow = color + "arrow" + direction + ".png"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:48:49.100

这个怎么样：

```
var arrow = "";

if (KPI[0] >= 15) {
   arrow = "redarrow";
}
else if (KPI[0] >= 10) {
   arrow = "yellowarrow";
}
else if (KPI[0] < 10) {
   arrow = "greenarrow";
}

if (KPI[0] < KPI[1]) {
   arrow += "down.png";
}
else if (KPI[0] > KPI[1]) {
   arrow += "up.png";
}
else if (KPI[0] == KPI[1]) {
   arrow += "flat.png";
} 
```

# php - require_once() 和 autoloader - 如何加载平面 php？

> ID：12390758
> 
> 赞同：2
> 
> 时间：2012-09-12T14:42:15.167
> 
> 标签：php, symfony

我有一个文件（用于 PHP 的 xmlrpc 库），我想将其用于 Symfony2 类（因此在 Symfony2 项目中）。

我不能使用自动加载器，因为写[在这里](http://symfony.com/doc/2.0/components/class_loader.html)

> 它能够*[自动加载器]*从实现以下约定之一的文件中加载类：
> 
> ```
> 1) The technical interoperability standards for PHP 5.3 namespaces and 
>    class names;
> 2) The PEAR naming convention for classes. 
> ```
> 
> 如果您用于项目的类和第三方库遵循这些标准，那么 Symfony2 自动加载器是您唯一需要的自动加载器。

我将要使用的课程不满足其中一项要求。

因此，如果我无法自动加载该文件，因为不可能（据我了解，但我可能会出错）使用`require_once`（或简单地`require`） with `namespace`，这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:08:44.183

假设您有一个名为`xmlrpc.lib.php`以下内​​容的文件：

```
<?php 
class XMLRPC_Server {
    // ...
}

class XMLRPC_Request {
    // ...
}

class XMLRPC_Response {
    // ...
} 
```

您可以创建一个实例`MapClassLoader`来处理它的自动加载：

```
// Create map autoloader
$mapLoader = new MapClassLoader(array(
    'XMLRPC_Server' => __DIR__.'/../library/xmlrpc.lib.php',
    'XMLRPC_Request' => __DIR__.'/../library/xmlrpc.lib.php',
    'XMLRPC_Response' => __DIR__.'/../library/xmlrpc.lib.php',
));

// Register autoloader
$mapLoader->register(); 
```

当这些类之一将被自动加载时，其他类也将被自动加载，因为它们共享相同的 PHP 文件。

# iphone - iPhone Enterprise（内部）与 App Store 分发

> ID：12390763
> 
> 赞同：1
> 
> 时间：2012-09-12T14:42:42.497
> 
> 标签：iphone, app-store, distribution, enterprise

这个说法正确吗？对我来说似乎很奇怪...

来自 Apple 常见问题解答：

* * *

如果我注册了 iOS 开发者企业计划，我可以在 App Store 上分发我的应用程序吗？

只有在标准 iOS 开发者计划中注册的开发者才能在 App Store 上分发应用程序。iOS 开发者企业计划仅允许您通过 Ad Hoc 分发将您的应用程序分发给您组织的员工或成员。

* * *

那么，一家公司如何才能兼得呢？企业和应用商店？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:01:51.053

注册这两个程序。幸运的是，另一个只有 99 美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:49:59.583

如果您想同时发布企业版和 App Store，您将需要两个 iOS 开发者程序

# objective-c - 如何将子视图添加到来自 class2 的 class1 的视图中？

> ID：12390770
> 
> 赞同：0
> 
> 时间：2012-09-12T14:42:55.390
> 
> 标签：objective-c, xcode4.3

我正在尝试做一件非常简单的事情——我有一个用于整个应用程序的主 Xib 文件和另一个用于小视图的 Xib 文件。

我希望小视图（Xib 称为“additionalView.xib”）出现在第一个 Xib（“ViewController.xib”）中。

我已经成功地在“ViewController.m”中做到了，但我想要更多——我想从“additionalView.m”中做到这一点

我在“additionalView.m”中创建了一个名为“openView:”的方法，它看起来像这样：

* * *

```
-(IBAction)openView:(id)sender

{

  ViewController *vc = [[ViewController alloc] init];

  NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"additionalView" owner:self options:nil];    

  UIView *nibView = [nibObjects objectAtIndex:0];

  [vc.view addSubview:nibView];

} 
```

* * *

正在调用该方法并且调试器正在读取行 - 但没有任何反应。没有崩溃 - 没有错误 - 没有大视图中的小视图。

这是为什么？

我知道最后一行可能是把所有事情都搞砸了，但我不知道如何正确表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:50:10.853

尝试

```
 [self.view addView:view.vc]; 
```

但是，我不确定您在这里查看的结构是什么。你说你的 -(IBAction)openView:(id)sender 在你的“additionalView.m”中，但它不是主视图控制器，对吗？您需要在主控制器中执行此操作，因此基本上将 openView: 方法移动到您的 ViewController.m

而且你通常需要一个单独的视图控制器为每个视图保持整洁和独立，所以额外的View.m 应该是 UIViewController 的一个实例，然后你可以从你的主视图中创建它，如下所示：

```
-(IBAction)openView:(id)sender

 {

 AdditionalView *vc = [[AdditionalView alloc] initWithNibName:@"additionalView"];

 [self.view vc.view];

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:50:23.677

您的问题是`ViewController *vc = [[ViewController alloc] init];`创建了一个**新**的视图控制器。因为它是新的，它不是管理显示的视图控制器层次结构中已经存在的那个。

您的方法需要访问现有的视图控制器。它如何做到这一点取决于您的应用程序的结构以及哪个对象具有对原始控制器对象的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T04:44:27.970

您有选择......首先，如果您只需要视图，则不需要创建视图控制器 vc。创建一个 uiview 并添加它。选项 1：按照上面的建议将 ref 传递给应用程序 vc，然后：[appVC.view addsubview:additionalView]

这会将它添加到 main.js 中。

在应用程序委托中使用视图控制器管理器/引用，您可以将其称为委托并将您的视图添加到当前显示视图。

希望这可以帮助

# java - asynctask 和 java 泛型

> ID：12390774
> 
> 赞同：0
> 
> 时间：2012-09-12T14:43:17.030
> 
> 标签：java, android, generics

我有这门课

```
public final class AsyncTaskManager<T extends AsyncTask<?, ?, ?> & IProgressTrackerTask 
       & ICancelTask> 
....
T mAsyncTask;
....
public void setupTask(T asyncTask) {
    mAsyncTask = asyncTask;
    mAsyncTask.execute();
}
..... 
```

但是上线了

```
 mAsyncTask.execute(); 
```

日食 说：

```
Type safety: A generic array of capture#4-of ? is created for a varargs parameter
add @SuppressWarnings("unchecked") 
```

我添加了 suppressWarning，但在执行 doInBackgound 期间出现 ClassCastException。
正如[这里](http://beautifuldiscovery.wordpress.com/2011/03/17/strange-classcastexception-with-asynctask/)所说，在执行 AsyncTask 之前必须检查所有类型。
如何解决我的问题 - 使我的类通用并禁用此警告？
非常感谢！

编辑：只是为了澄清如何使用。我有抽象的 AsyncTask：

```
public abstract class ManagedAsyncTask<T, E, G> extends AsyncTask<T, E, G> 
implements IProgressTrackerTask, ICancelTask { 
```

和正在做实际工作的 AsyncTask：

```
public class GetTask extends ManagedAsyncTask<Void, Void, SearchResult> { 
```

并在活动中：

```
mAsyncTaskManager = new AsyncTaskManager<GetTask>(this, this);
mAsyncTaskManager.setupTask(new GetTask()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:56:10.820

我不太确定它的通用部分，但我认为你得到了那个错误，因为`execute`AsyncTask 上的方法期望方法的参数作为参数`doInBackground`。这将是第一个问号的任何类型的数组`AsyncTask<?, ?, ?>`。如果您不希望在您`doInBackground`的`(Void[])null`.

`execute()`这是 AsyncTask 方法的文档。如果您仍然遇到问题，此页面的其他部分对于配置和使用 AsyncTask 非常有帮助：

[http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28Params...%29)

编辑：只是为了澄清一下`Void`， in`(Void[])null`应该是参数的任何类型`doInBackground`。我假设，由于您没有将任何内容传递给执行，因此您使用 Void 作为该参数来指示没有必要的数据。您可能已经以不同的方式实现它，并且需要相应地强制转换为 null。

# .htaccess - .htaccess 将除 1 以外的所有页面从 https 重定向到 http

> ID：12390785
> 
> 赞同：1
> 
> 时间：2012-09-12T14:43:55.873
> 
> 标签：.htaccess, https

我有两个网站，一个以 http（站点 A）运行 99%，另一个以 https（站点 B）运行 100%。

我想创建一个 htaccess 文件，将用户从站点 B 重定向到站点 A，而无需将其 URL 从 https: 更改为 http: 自动切换到 http:

我在站点 A 上拥有的是：

```
RewriteCond %{HTTPS} on
RewriteRule ^(.*)$ http://sitehere.com/$1 [R,L] 
```

哪个工作得很好，除了我*确实*想在站点 A 上用作 https: 的一个页面。如何从上述 htaccess 规则中排除此页面？（假设我知道要排除的完整路径/文件位置，它是 /news/）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:26:30.563

只需将其添加为条件：

```
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/news/
RewriteRule ^(.*)$ http://sitehere.com/$1 [R,L] 
```

# hsqldb - 获取现有 HyperSQL 表的类型

> ID：12390790
> 
> 赞同：0
> 
> 时间：2012-09-12T14:44:14.200
> 
> 标签：hsqldb

HyperSQL 支持不同的表类型（内存、缓存等）。如何获取现有表的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:44:14.200

```
SELECT HSQLDB_TYPE 
FROM INFORMATION_SCHEMA.SYSTEM_TABLES 
WHERE TABLE_NAME = '<TABLE NAME IN UPPERCASE>' 
```

HSQL 将表名转换为大写，因此查询中的表名也必须为大写。

# java - 如何在没有 url 的 urlencoding 查询部分的情况下使用 java 发布

> ID：12390801
> 
> 赞同：0
> 
> 时间：2012-09-12T14:44:37.480
> 
> 标签：java, url-encoding, urlconnection

我正在尝试使用已签名的 Java 小程序发布到如下网址：

[http://some.domain.com/something/script.asp?param=5041414F9015496EA699F3D2DBAB4AC2|178411|163843|557|1|1|164||attempt|1630315](http://some.domain.com/something/script.asp?param=5041414F9015496EA699F3D2DBAB4AC2|178411|163843|557|1|1|164||attempt|1630315)

但是当java建立连接时，java控制台显示：

网络：连接[http://some.domain.com/something/script.asp?param=5041414F9015496EA699F3D2DBAB4AC2%7C178411%7C163843%7C557%7C1%7C1%7C164%7C%7Cattempt%7C1630315](http://some.domain.com/something/script.asp?param=5041414F9015496EA699F3D2DBAB4AC2%7C178411%7C163843%7C557%7C1%7C1%7C164%7C%7Cattempt%7C1630315)

我不希望 java 对来自 | 的查询中的管道进行 urlencode 到 %7c。我连接的服务似乎没有对参数进行 urldecode，而且我无法更改服务器端代码。java中有没有办法在不转义查询的情况下发布帖子？

我正在使用的java如下：

```
try {
        URL url = new URL(myURL);
        URLConnection connection = url.openConnection();
        connection.setDoOutput(true);

        OutputStreamWriter out = new OutputStreamWriter(
                connection.getOutputStream());
        out.write(toSend);
        out.close();

        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                        connection.getInputStream()));

        String decodedString = "";

        while ((decodedString = in.readLine()) != null) {
            totalResponse = totalResponse + decodedString;
        }
        in.close();

    } catch (Exception ex) {
    } 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:11:10.477

URL 类不进行任何编码。在我的开发服务器上进行测试证实了这种怀疑。您的代码必须`'|'`在问题中包含的代码段之前的某处对字符进行编码。

# sql - 身份列的sql副本作为字符串

> ID：12390803
> 
> 赞同：0
> 
> 时间：2012-09-12T14:44:40.880
> 
> 标签：sql

我正在创建一个简单地创建行副本但更改一些值的过程。

在新创建的记录（这是现有记录的副本）中，我需要其中一个字段是新创建记录的 recordID（自动生成的 IDENTITY 列）的字符串表示形式。

```
CREATE PROC sp @RecordID int
AS
BEGIN
    INSERT INTO TheTable([RecordName], ...)
    SELECT CAST(@RecordID as nvarchar(500)), ...
    FROM TheTable
    WHERE [RecordID] = @RecordID
END 
```

我的代码是错误的，因为它将 RecordName 设置为要复制的记录的 RecordID。我需要 RecordName 与正在创建的记录的 RecordID 相同。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:51:45.740

我认为您描述的内容是不可能的——在语句完成之前身份值不可用——但有一个简单的解决方法：

```
CREATE PROC sp @RecordID int
AS
BEGIN
    INSERT INTO TheTable([RecordName], ...)
    SELECT 'temporary dummy value', ...
    FROM TheTable
    WHERE [RecordID] = @RecordID
    ;

    UPDATE TheTable
    SET [RecordName] = CAST(@@IDENTITY as nvarchar(500))
    WHERE [RecordID] = @@IDENTITY
    ;
END 
```

（请参阅[文档`@@IDENTITY`](http://msdn.microsoft.com/en-us/library/aa933167.aspx)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:52:29.090

听起来您需要分两步执行此操作 - 将新数据插入表中，然后使用新的 recordID 更新记录

例如（假设 Sql Server），

```
declare @myNewID int    

INSERT INTO TheTable([RecordName], ...)
SELECT CAST(@RecordID as nvarchar(500)), ...
FROM TheTable
WHERE [RecordID] = @RecordID

set @myNewID = SCOPE_IDENTITY()

UPDATE TheTable
    set [RecordName] = CAST(@myNewID as nvarchar(500))
WHERE [RecordID] = @myNewID 
```

# php - 如何让 Zend_JSON 创建对象而不是数组

> ID：12390807
> 
> 赞同：3
> 
> 时间：2012-09-12T14:44:57.680
> 
> 标签：php, json, zend-framework

我使用了zend的JSON助手，但我遇到了问题......当我使用这段代码时：

```
$this->_helper->json(array(1 => "value 1", 2 => "value 2")); 
```

我得到一个对象：

```
{1: "value 1", 2: "value 2" } 
```

但是如果键是一个以“0”开头的序列，我会得到一个数组。例如，与：

```
$this->_helper->json(array(0 => "value 0", 1 => "value 1")); 
```

我得到一个数组：

```
["value 0", "value 1"] 
```

每次使用此方法时如何获取对象？（我想要`{0: "value 0", 1: "value 1" }`第二个示例中的结果）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:53:06.853

你可以强制它成为一个对象

```
<?php
$arr = array(1 => "value 1", 2 => "value 2");

$x = json_encode($arr);
var_dump($x);

//use this to force to be an object
$y = json_encode(array(0 => "value 1", 1 => "value 2"), JSON_FORCE_OBJECT);
var_dump($y);

// how it is
$z = json_encode(array(0 => "value1", 1 => "value 2" ));
var_dump($z);
?> 
```

给

```
string(29) "{"1":"value 1","2":"value 2"}"
string(29) "{"0":"value 1","1":"value 2"}"
string(20) "["value1","value 2"]" 
```

# php - 在 PHP 回显语句的新选项卡中打开链接

> ID：12390811
> 
> 赞同：-3
> 
> 时间：2012-09-12T14:45:14.333
> 
> 标签：php, html

PHP 相对较新，我正在使用 PHP 生成一个表，该表填充了数据库中的记录，并在“echo”表中有一个超链接列。有没有一种简单的方法可以让我在点击后获得打开新浏览器选项卡的链接？相关代码如下...

```
echo "<tr align = center bgcolor=white><td><b><a href=view_rfp_detail.php?sna=$sna >$sna</a></b></td><td>$ques</a></td><td>$ans</a></td>"; 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T14:47:39.710

如果您想打开一个新标签，请尝试在锚标签中选择 target = blank

```
<a target = '_blank' href=view_rfp_detail.php?sna=$sna >$sna</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:46:22.263

添加`target="_blank"`到您的标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:46:31.363

你可以这样做：

```
echo "<tr align = center bgcolor=white><td><b><a target=\"_blank\" href=view_rfp_detail.php?sna=$sna >$sna</a></b></td><td>$ques</a></td><td>$ans</a></td>"; 
```

但是，根据用户配置浏览器的方式，这可能会在新选项卡或新窗口中打开链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:58:40.803

```
echo <<<TR
<tr style="text-align: center; background: white">
  <td>
    <strong><a href="view_rfp_detail.php?sna={$sna}" target="_blank">{$sna}</a></strong>
  </td>
  <td>{$ques}</td>
  <td>{$ans}</td>
</tr>
TR 
```

FTFY

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T15:19:49.727

您还可以使用提供相同功能并获得严格验证错误的 javascript。

```
<a onclick="window.open(this.href); return false;" href=view_rfp_detail.php?sna=$sna >$sna</a> 
```

# java - 使用 junit +spring 测试 DAO 文件

> ID：12390813
> 
> 赞同：0
> 
> 时间：2012-09-12T14:45:24.020
> 
> 标签：java, spring, testing, junit, dao

我正在尝试使用 junit 测试 DAO 文件。有没有办法比较用 2 种不同方式执行的同一查询？

junit 是否提供一种以两种方式访问​​数据库的机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:02:14.313

使用 spring 和 junit 对数据执行断言有很多不同。这是一个起点：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:applicationContext-test.xml"})
@Transactional
public abstract class BaseIntegration { 
```

然后您的测试类可以扩展它并像往常一样使用 dao，并对任何数据执行断言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:52:21.850

您可以使用 Assert 类中的方法比较查询的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:53:47.913

要测试 DAO，您可以使用[DBUnit](http://www.dbunit.org/)

# solr - SOLR Ping 请求导致异常

> ID：12390814
> 
> 赞同：1
> 
> 时间：2012-09-12T14:45:29.747
> 
> 标签：solr

我们正在使用 Solr 3.5 并遇到与 Ping Solr 相关的问题。

这是 SolrConfig.xml 中为 Ping 定义的内容

```
<!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler> 
```

这里没有提及文本，但我们仍然收到此错误 HTTP 状态 500 - Ping 查询导致异常：未定义字段文本 org.apache.solr.common.SolrException：Ping 查询导致异常：org.apache.solr 未定义字段文本.handler.PingRequestHandler.handleRequestBody(PingRequestHandler.java:76) 在 org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376 ） 在

任何帮助将不胜感激。

谢谢阿米特什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:53:22.813

您可以像这样修改它：

```
 <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
      <str name="df">a field that is defined in your schema</str>
    </lst>
  </requestHandler> 
```

# mysql - 如何使用mysql从具有相似列的多个表中选择唯一行

> ID：12390815
> 
> 赞同：1
> 
> 时间：2012-09-12T14:45:28.483
> 
> 标签：mysql

我有一个程序可以从外部源下载信息，并为我输入的每个查询提供一个 sql 页面。通常每个标题有 3-6 个查询。每个 sql 页面加载一个新表，所有表都有相同的列。以下是查询 UsedCar 和 NewCar 的结果示例，这是 Title Automotive 中涉及的 6 个查询中的 2 个。

```
CREATE TABLE IF NOT EXISTS NewCar(Name char(255) DEFAULT NULL,
Phone char(255) DEFAULT NULL,
Address char(255) DEFAULT NULL,
Website char(255) DEFAULT NULL,
Email char(255) DEFAULT NULL,
Category char(255) DEFAULT NULL,
UNIQUE KEY Name (Name))
ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

LOCK TABLES NewCar WRITE;
REPLACE INTO NewCar VALUES('whats it Auto','1-888-555-7327','63 Beech Hill Rd, Beechville, NS B1G 2R9','http://www.whatsit.com','','New Car Dealers');
REPLACE INTO NewCar VALUES('Hugh\'s Chev','888-555-6990','376 Main St, lower bohemia, NS B5G 2D6','','','New Car Dealer');
REPLACE INTO NewCar VALUES('Be It Motors Ltd','866-555-2771','90 Main St, Upper Bohemia, NS B9G 2K8','','','New Car Dealers');
UNLOCK TABLES;

CREATE TABLE IF NOT EXISTS UsedCar(Name char(255) DEFAULT NULL,
Phone char(255) DEFAULT NULL,
Address char(255) DEFAULT NULL,
Website char(255) DEFAULT NULL,
Email char(255) DEFAULT NULL,
Category char(255) DEFAULT NULL,
UNIQUE KEY Name (Name))
ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

LOCK TABLES UsedCar WRITE;
REPLACE INTO UsedCar VALUES('whats it Auto','1-888-555-7327','63 Beech Hill Rd, Beechville, NS B1G 2R9','http://www.whatsit.com','','Used Car Dealers');
REPLACE INTO UsedCar VALUES('Hugh\'s Chev','888-555-6990','376 Main St, lower bohemia, NS B5G 2D6','','','Used Car Dealer');
REPLACE INTO UsedCar VALUES('Be It Motors Ltd','866-555-2771','90 Main St, Upper Bohemia, NS B9G 2K8','','','Used Car Dealers');
UNLOCK TABLES; 
```

然后将它们加载到我的数据库中。

我的问题是试图将这些信息提取到我的网页中。我想创建一个链接，显示汽车下的唯一信息，不包括类别。我可以从一张桌子上做到这一点，但无法为多张桌子做到这一点。我已尝试研究该问题并尝试选择 DISTINCT 和 UNIQUE。除了做表 JOIN 和 UNION - 我确信这可能是我忘记的非常愚蠢的事情。

下面是我用来从单个表中绘制的 PHP，该表已被修改为尝试从 2 个表中绘制并返回“未找到记录”。

```
<?php
$result = mysql_query("SELECT DISTINCT Name FROM (SELECT * FROM UsedCar UNION    SELECT*FROM NewCar) ORDER BY name ASC");
if(mysql_num_rows($result) == 0){
echo("no records found");
} ELSE {
echo "<table border='0'; table id='address'>
<tr>
<th>Name</th>
<th>Phone</th>
<th>Address</th>
<th>Website</th>
</tr>";

while($row = mysql_fetch_array($result))

  {
  echo "<tr>";
  echo "<td>" . $row['Name'] . "</td>";
  echo "<td>" . $row['Phone'] . "</td>";
  echo "<td>" . $row['Address'] . "</td>";
  echo '<td><a href="' . $row['Website'] . '" target="_self\">' . $row["Website"] . '</a></td>';
  echo "</tr>";

  }
echo "</table>";
}

?> 
```

很抱歉发了很长的帖子..:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:52:03.537

部分问题是您的 SQL 语法，您缺少子选择上的别名

您不使用别名进行查询（请参阅[SQL Fiddle](http://sqlfiddle.com/#!2/d24fc/9)）：

```
SELECT DISTINCT Name 
FROM 
(
  SELECT * 
  FROM UsedCar 
  UNION    
  SELECT *
  FROM NewCar
) 
ORDER BY name ASC 
```

使用别名有效（参见[SQL Fiddle](http://sqlfiddle.com/#!2/d24fc/8)）

```
SELECT DISTINCT Name 
FROM 
(
  SELECT * 
  FROM UsedCar 
  UNION    
  SELECT *
  FROM NewCar
) x
ORDER BY name ASC 
```

但是，如果您只想要名称，则不需要子查询（请参阅[SQL Fiddle](http://sqlfiddle.com/#!2/d24fc/10)）：

```
SELECT name 
FROM UsedCar 
UNION    
SELECT name
FROM NewCar 
```

# php - wordpress 调用取消定义函数

> ID：12390827
> 
> 赞同：0
> 
> 时间：2012-09-12T14:46:02.300
> 
> 标签：php, wordpress

在事件中，我正在页面中加载一个文件，该文件应包含一个用于聊天的短代码。问题是它说调用未定义的函数。短代码在同一页面上运行良好，但是当从不同的文件（同一目录）加载时它不起作用。

我试过这个：

```
<?php 
$file="/web/htdocs/.../home/wp-content/plugins/quick-chat";
plugin_dir_url($file); ?> 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:50:06.790

解决了。无法从其他文档调用的特定插件存在问题。与其他插件一起工作。谢谢！

# c# - jQuery/c# - 如何判断是否安装了 acrobat 插件和 web 查看器设置是否正确？

> ID：12390828
> 
> 赞同：1
> 
> 时间：2012-09-12T14:46:13.410
> 
> 标签：c#, jquery, html, adobe-reader

在 jQuery 或 c# 中（因为我正在处理 Sharepoint 2010 上的 .aspx 页面）有一种方法可以检测是否安装了 acrobat 插件并启用了 Web 查看器设置。我相信该插件是随 adobe reader 10 及更高版本安装的。我有这个

```
$.each(navigator.plugins, function() {
    if (this.name == "Adobe Acrobat") {
        $('body').append("You have Acrobat");           
    }
}); 
```

但我不确定这是否足够好。

任何人都可以帮忙吗？谢谢。

编辑：这需要至少与 IE9 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:48:37.027

这个插件对你有用：

[http://archive.plugins.jquery.com/project/jqplugin](http://archive.plugins.jquery.com/project/jqplugin)

而不是 jquery 插件怎么还是 JS：

[http://thecodeabode.blogspot.co.uk/2011/01/detect-adobe-reader-plugin.html](http://thecodeabode.blogspot.co.uk/2011/01/detect-adobe-reader-plugin.html)

# php - 写入后在新的浏览器窗口中打开文件（使用 fopen）

> ID：12390829
> 
> 赞同：5
> 
> 时间：2012-09-12T14:46:15.643
> 
> 标签：php

`fopen`我正在编写一个简单的订单系统，其中使用该函数将几个数字（填写在表单中）写入另一个 .php 文件（也可能是 .html） 。这工作正常，但在写入文件后，我希望浏览器实际打开写入的文件，最好是在*新*的浏览器窗口中。这样我的客户可以使用它来打印、用作发票等。

现在我仍然是 php 领域的新手，并且没有使用`fopen`. 但是在我寻找教程等的所有地方，据说`fopen`打开（或写入）一个文件，但就我所经历的而言，它并没有。它似乎只是允许访问指定的文件进行写入和读取，而不是实际显示新写入的页面。

为避免任何混淆：我不想像其他关于 SO 状态的问题一样打开链接。

我的代码：

```
<form action="" method="post">
  <input type="text" id="amountTuna" name="numberTuna" value="0"/>
  <input type="text" id="amountCheese" name="numberCheese" value="0"/>
  <input name="send" id="send" type="submit" value="Post order" />
</form>

<?php
if (array_key_exists('send', $_POST)) { 
  $order = "order.php";
  $fh = fopen($order, 'w') or die("can't open file");//file handler

  fwrite($fh, "Tuna sandwiches: " . stripslashes($_POST['numberTuna']));
  fwrite($fh, "Cheese sandwiches: " . stripslashes($_POST['numberCheese']));

  $fh = fopen($factuur, 'r');
  $fileip = fread($fh, filesize($factuur));
  fclose($fh);
}
?> 
```

尝试不同的`fopen`参数，如`'w'`,`'r'`等`'r+'`似乎没有任何区别。删除`fclose($fh)`似乎也没有任何区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:51:44.187

使用 JS 脚本打开新窗口。例如，紧随其后`fclose($fh)`：

```
echo "<script>window.open($order, '_blank'); window.focus();</script>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:53:54.720

在数据库中存储东西可能会容易得多。

也就是说，使用 fopen 是打开文件本身，在新的浏览器窗口中打开写入的文件将需要一些客户端脚本（即 Javascript）来加载新创建的文件。

谷歌 Javascript window.open()。

汤姆

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:58:55.393

既然你只想写一个可打印的页面..你试过[file_put_contents](http://php.net/manual/en/function.file-put-contents.php)

例子

```
if (isset($_POST['send'])) {
    $file = "test.html";
    $data = "Tuna sandwiches: " . stripslashes($_POST['numberTuna']) . "<br>";
    $data .= "Cheese sandwiches: " . stripslashes($_POST['numberCheese']) . "<br>";
    touch($file);
    file_put_contents($file, $data);
} 
```

# php - 在 php 中的 foreachloop 中使用 while 循环执行 mysql_query

> ID：12390842
> 
> 赞同：0
> 
> 时间：2012-09-12T14:46:33.920
> 
> 标签：php, mysql, xml, foreach, while-loop

您好我正在尝试查看 xml 结果列表，我正在从这些结果中获取 id 并在我的数据库中执行查询以获取更多信息。我已经把它放到了一个 foreach 循环中，然后我的 while 循环得到了 mysql 结果。一切正常，直到我执行 while 循环。我的页面变为空白，我没有收到任何错误。任何帮助将不胜感激！这是我的代码：

```
foreach($data->HotelList->HotelSummary as $info):
    $hotelId = $info->hotelId;
    $title=$info->name;

?>
<!---------------------------------------------------------------------->
<!-----------------Listed hotel results div----------------------------->
<!---------------------------------------------------------------------->
<div class="listResults">

    <div class="hotelListing">
    <div class="hotelThumb">
    <?php 
    //----------Getting thumb url from database by HotelId-------
    $getImages = mysql_query("SELECT Caption FROM HotelImages WHERE ID = '4110'") or die(mysql_error());
    while($r=$mysql_fetch_array($getImages)):
        $img = $r['Caption'];
    ?>
    <img src="" width="200" height="180" alt="test image" class="thumb" />
    <?php endwhile; ?></div>
<?php endforeach; ?> 
```

正如一个注释，我试图得到 num_rows 并且我得到了正确的结果。所以查询正在执行，但是在while循环中发生了一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:50:32.097

你的while循环很糟糕。取出`$`函数前面的。

```
while($r=mysql_fetch_array($getImages)): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:50:36.670

```
while($r=$mysql_fetch_array($getImages)):
    $img = $r['Caption'];
?> 
```

您在`$`之前有一个`mysql_fetch_array()`，删除它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:59:05.020

你的主要问题是你`$`在方法调用（）前面放了一个`$mysql_fetch_array()`。它应该只是`mysql_fetch_array()`。

您不应忽视的一个重要问题是您在循环中调用了一个静态查询。*在循环之外*执行查询，因为结果永远不会改变。然后，您可以将结果存储在一个数组中，并在循环中遍历该数组。这将显着提高代码的性能。

```
<?php
//----------Getting thumb url from database by HotelId-------
$getImages = mysql_query("SELECT Caption FROM HotelImages WHERE ID = '4110'") or die(mysql_error());

$images = array();
while($img = mysql_fetch_array($getImages)) {
    $images[] = $img['Caption'];
}

foreach($data->HotelList->HotelSummary as $info):
    $hotelId = $info->hotelId;
    $title=$info->name;

?>
<!---------------------------------------------------------------------->
<!-----------------Listed hotel results div----------------------------->
<!---------------------------------------------------------------------->
<div class="listResults">

    <div class="hotelListing">
    <div class="hotelThumb">
    <?php 

    foreach($images as $img) :
    ?>
    <img src="" width="200" height="180" alt="test image" class="thumb" />
    <?php endforeach; ?></div>
<?php endforeach; ?> 
```

# c# - 依赖测试

> ID：12390846
> 
> 赞同：0
> 
> 时间：2012-09-12T14:46:43.967
> 
> 标签：c#, visual-studio, automated-tests

好的，所以我使用 Microsoft 测试框架进行测试，我需要以某种方式构建依赖测试。为什么你会说？因为其中一个测试确保我可以从数据库加载数据，而其他测试需要针对该集合进行操作——为了保持测试的自动化特性，我们不想做往返。

我一直在寻找，似乎无法找到一种方法来做几件事：

1.  修饰测试方法，使它们被视为依赖。
2.  在测试之间保持集合。

我尝试了什么？

好吧，关于依赖测试的装饰，不多，因为我似乎找不到为此构建的属性。

关于集合的持久性，我尝试了一个私有类变量并添加到`Properties`测试上下文中。这两者都导致了测试之间的集合丢失。

我希望你能在这里帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:58:16.480

单独创建您的测试，然后使用[Ordered Test](http://msdn.microsoft.com/en-us/library/dd286704%28v=vs.100%29)按您想要的顺序运行它们。

如果任何测试失败，则整个测试被中止并被认为失败：

![在此处输入图像描述](../Images/e7590a564c59f97dda794f99c3270941.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:52:35.917

我想，你需要的是一个`orderer test list`. 您可以在“新项目...”下的测试项目中创建它。有序测试列表是一个包含按指定顺序执行的测试的列表`context`。

顺便说一句：单元测试应该只测试应用程序中最小的单元，而不是大量的操作。因为如果一个单元无法正常工作，您可以轻松找到一个。

# google-drive-api - 从 Google Docs 将文档另存为 docx

> ID：12390847
> 
> 赞同：0
> 
> 时间：2012-09-12T14:46:44.017
> 
> 标签：google-drive-api, google-docs-api

如何使用 API 在本地将文档另存为 .docx？我得到了 URL，并设法做这样的解决方法：

```
 Dim documentUri As Uri = New Uri(feed.Entries(0).Content.AbsoluteUri + "&exportFormat=docx&format=docx")
    Dim stream As Stream = service.Query(documentUri)
    Dim streamReader As StreamReader = New StreamReader(stream)
    Dim streamWriter As StreamWriter = New StreamWriter("C:\\download.docx")
    Dim line As String = streamReader.ReadLine()
    While (line <> Nothing)
        streamWriter.WriteLine(line)
        line = streamReader.ReadLine()
    End While
    streamReader.Close()
    streamWriter.Flush()
    streamWriter.Close() 
```

我的文件已经损坏了。关于我做错了什么的任何想法？

还有其他问题：是否删除了对在 doc 中下载的支持？几周前我已经阅读了文档，它在那里（以及在用户界面中）但再次阅读，即使“doc”选项在那里，也有一条说明它将作为 docx 下载。有什么办法可以将它下载为.doc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:08:22.083

您应该以二进制而不是行的形式读取和写入它。

在请求 doc 或 docx 时，您总是会得到一个 docx。这是 API 的最新更改，但它与 Microsoft 放弃旧二进制格式的政策保持一致。如果你有旧版的 MS Office，你可以下载[兼容包](http://www.microsoft.com/en-us/download/details.aspx?id=3)来查看 docx。

# vba - VBA宏：尝试编码“如果两个单元格相同，则没有，否则向下移动行”

> ID：12390848
> 
> 赞同：0
> 
> 时间：2012-09-12T14:46:48.830
> 
> 标签：vba, excel

**我的目标：**从同一行中的多个报告（已经在同一个电子表格中）获取有关同一主题的所有数据。

**漫无边际的背景故事：**每个月我都会收到一个新的数据转储 Excel 电子表格，其中包含几个并排（跨列）长度可变的报告。这些报告中的大多数都有重叠的主题，但并非完全重叠。幸运的是，当他们谈论同一个主题时，会用数字标注。此数字标记始终是每个报告开头的第一列。但是，由于报告的长度可变，相同的主题不在同一行中。带有数字的列永远不会移动（report1 的数字始终是 A 列，report2 的始终是 G 列，等等）并且数字始终按升序排列。

**我的目标解决方案：** 由于具有升序数字的列没有改变，我一直在尝试为宏编写 VBA 代码，该宏将（例如）活动数据行的数量与 A 列和 G 列的数量进行比较。如果数字是一样的，什么都不做，否则将该行（及其下方）中的所有数据从 G:J 列向下移动一行。然后移动到下一个数据行。

**我试过了：**我写了几个“For Each”和几个循环，用 DataRow + 1 来调用我认为可以进行比较的方法，但它们都失败了。我不知道我只是语法错误还是概念错误。此外，我的搜索都没有发现这个问题，甚至我可以掠夺和拼凑的部分。虽然这可能更多地反映了我的谷歌搜索技巧:)

**任何和所有的帮助将不胜感激！**

注意：如果它很重要，列有标题。我一直在使用 DataRow = Found.Row + 1 来规避。另外，我是这方面的新手并且是自学的，所以请随时详细解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:49:36.060

我想我理解你的目标，这应该有效。它不使用您在阅读您的解释时使用的任何方法，我很清楚如何继续。如果这不是你要找的东西，我很抱歉。

它从预定义的列开始（请参阅 FIRST_ROW 常量）并逐行比较两个单元格（MAIN_COLUMN 和 CHILD_COLUMN）。如果 MAIN_COLUMN < CHILD_COLUMN 它会将 SHIFT_START 和 SHIFT_END 之间的所有内容向下推一行。它一直持续到遇到空行。

```
Sub AlignData()
  Const FIRST_ROW As Long = 2       ' So you can skip a header row, or multiple rows
  Const MAIN_COLUMN As Long = 1     ' this is your primary ID field
  Const CHILD_COLUMN As Long = 7    ' this is your alternate ID field (the one we want to push down)
  Const SHIFT_START As String = "G" ' the first column to push
  Const SHIFT_END As String = "O"   ' the last column to push

  Dim row As Long
  row = FIRST_ROW
  Dim xs As Worksheet
  Set xs = ActiveSheet
  Dim im_done As Boolean
  im_done = False
  Do Until im_done
    If WorksheetFunction.CountA(xs.Rows(row)) = 0 Then
      im_done = True
    Else
      If xs.Cells(row, MAIN_COLUMN).Value < xs.Cells(row, CHILD_COLUMN).Value Then
        xs.Range(Cells(row, SHIFT_START), Cells(row, SHIFT_END)).Insert Shift:=xlDown
        Debug.Print "Pushed row: " & row & " down!"
      End If
      row = row + 1
    End If
  Loop
End Sub 
```

我修改了代码以作为宏工作。您应该能够直接从宏对话框创建它并从那里运行它。只需将代码粘贴到其中并确保**Sub**和**End Sub**行不会重复。它不再接受工作表名称，而是针对当前活动的工作表运行。

# c++ - 将对象传递给重载运算符

> ID：12390850
> 
> 赞同：7
> 
> 时间：2012-09-12T14:46:54.840
> 
> 标签：c++, oop, operator-overloading, runtime-error, insertion

昨天有人给了我一个错误的程序。在 MVS 2010 中工作时，我也发现了问题和替代方法。问题是类的重载插入运算符。它的原型如下...

```
void matrix :: operator << (matrix&) ; 
```

它是从这样的地方调用的......

```
matrix m ;
m.operator << (m) ; 
```

我发现编译器不允许发送与调用函数的引用参数相同的对象。但我不明白这背后的原因以及它会产生什么问题。如果有人能解释一下，我将不胜感激。谢谢。

**编辑：** 实际发生的是，在调试时，它进入函数内部，出来并在执行时`main`，进入外部依赖文件`dbgdel.cpp`并停在这一行。

```
 _ASSERTE(_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T14:58:11.423

给出的代码在`VS2010 SP1`.

如图所示，代码也没有问题，完全合法。声明一个运算符重载然后用 operator 调用它有点奇怪`<<`，就像你可以很容易地写一样`m << m`。

一些猜测：

*   您正在获取`m`操作员实现中某处的地址并意外删除它
*   您超出了运算符实现内部可能存储在矩阵中的值数组的边界。
*   调用代码和被调用代码之间的编译器和链接器假设不匹配。检查您的调用约定、双方的运行时库版本以及任何其他设置，例如 SECURE_SCL 和 interator 调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:00:31.320

在实现方法中`operator <<`确保检查自引用：

```
void matrix :: operator << (matrix& other) 
{
  if (this == &other) 
  {
    /* special processing */
  }
 else
  {
    /* regular code */
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T07:56:45.037

似乎您的程序告诉您堆已损坏：在某些时候它已经超出了数组的边界或通过已释放的指针或类似的东西写入内存。

这些错误很难追踪，因为您不知道它发生的确切时间，但很可能它发生在与错误出现的不同的地方。以您的方式使用参考参数没有问题。

这里有很多关于如何检测堆损坏的建议：

[Win32下的堆损坏；如何定位？](https://stackoverflow.com/questions/1069/heap-corruption-under-win32-how-to-locate)

# php - 如果它是变音符号，fgetcsv 正在吃字符串的第一个字母

> ID：12390851
> 
> 赞同：8
> 
> 时间：2012-09-12T14:47:01.347
> 
> 标签：php, xml, csv, character-encoding, diacritics

我正在将 Excel 生成的 CSV 文件中的内容导入 XML 文档，例如：

```
$csv = fopen($csvfile, r);
$words = array();

while (($pair = fgetcsv($csv)) !== FALSE) {
    array_push($words, array('en' => $pair[0], 'de' => $pair[1]));
} 
```

插入的数据是英语/德语表达。

我将这些值插入 XML 结构并输出 XML，如下所示：

```
$dictionary = new SimpleXMLElement('<dictionary></dictionary>');
//do things
$dom = dom_import_simplexml($dictionary) -> ownerDocument;
$dom -> formatOutput = true;

header('Content-encoding: utf-8'); //<3 UTF-8
header('Content-type: text/xml'); //Headers set to correct mime-type for XML output!!!!

echo $dom -> saveXML(); 
```

这工作正常，但我遇到了一个非常奇怪的问题。当 String 的第一个字母是元音变音时（如`Österreich`or `Ägypten`），该字符将被省略，导致`gypten`or `sterreich`。如果 Umlaut 位于字符串 ( `Russische Föderation`) 的中间，则它会正确传输。类似`ß`或`é`其他的事情也是如此。

所有文件均采用 UTF-8 编码并以 UTF-8 提供。

这对我来说似乎很奇怪和类似错误，但也许我错过了一些东西，这里有很多聪明人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:20:58.617

好的，所以这似乎是`fgetcsv`.

我现在自己处理 CSV 数据（有点麻烦），但它正在工作，我根本没有任何编码问题。

这是我正在做的（尚未优化的版本）：

```
$rawCSV = file_get_contents($csvfile);

$lines = preg_split ('/$\R?^/m', $rawCSV); //split on line breaks in all operating systems: http://stackoverflow.com/a/7498886/797194

foreach ($lines as $line) {
    array_push($words, getCSVValues($line));
} 
```

来自`getCSVValues`这里**[，](http://www.php.net/manual/en/function.split.php#81490)**需要处理这样的 CSV 行（逗号！）：

```
"I'm a string, what should I do when I need commas?",Howdy there 
```

看起来像：

```
function getCSVValues($string, $separator=","){

    $elements = explode($separator, $string);

    for ($i = 0; $i < count($elements); $i++) {
        $nquotes = substr_count($elements[$i], '"');
        if ($nquotes %2 == 1) {
            for ($j = $i+1; $j < count($elements); $j++) {
                if (substr_count($elements[$j], '"') %2 == 1) { // Look for an odd-number of quotes
                    // Put the quoted string's pieces back together again
                    array_splice($elements, $i, $j-$i+1,
                        implode($separator, array_slice($elements, $i, $j-$i+1)));
                    break;
                }
            }
        }
        if ($nquotes > 0) {
            // Remove first and last quotes, then merge pairs of quotes
            $qstr =& $elements[$i];
            $qstr = substr_replace($qstr, '', strpos($qstr, '"'), 1);
            $qstr = substr_replace($qstr, '', strrpos($qstr, '"'), 1);
            $qstr = str_replace('""', '"', $qstr);
        }
    }
    return $elements;

} 
```

相当多的解决方法，但它似乎工作正常。

**编辑：**

还有一个已**[提交的错误](https://bugs.php.net/bug.php?id=55507)**，显然这取决于语言环境设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T09:06:32.933

如果字符串来自 Excel（如果它在字符串的开头，我遇到了字母 ø 消失的问题）......然后这修复了它：

setlocale(LC_ALL, 'en_US.ISO-8859-1');

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T05:29:23.657

如果中间的其他变音符号看起来没问题，那么这不是基本编码问题。它发生在行首的事实可能表明与换行符不兼容。也许 CSV 是使用不同的换行编码生成的。

在不同操作系统之间移动文件时会发生这种情况：

*   Windows：（`\r\n`字符 13 和 10）
*   Linux：（`\n`字符 10）
*   Mac OS：（`\r`字符 13）

如果我是你，我会确认换行符。

如果在 Linux 中：`hexdump -C filename | more`并检查文档。

`sed`如果是这种情况，您可以使用表达式更改换行符。

希望有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-20T16:24:51.713

一个更简单的解决方法（但很脏）：

```
//1\. replace delimiter in input string with delimiter + some constant
$dataLine = str_replace($this->fieldDelimiter, $this->fieldDelimiter . $this->bugFixer, $dataLine);

//2\. parse
$parsedLine = str_getcsv($dataLine, $this->fieldDelimiter);

//3\. remove the constant from resulting strings.
foreach ($parsedLine as $i => $parsedField)
{
    $parsedLine[$i] = str_replace($this->bugFixer, '', $parsedField);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T02:15:17.907

可能是某种`utf8_encode()`问题。[文档页面上的此评论](http://us.php.net/manual/en/function.utf8-encode.php#103126)似乎表明，如果您在已编码时对变音符号进行编码，则可能会导致问题。

也许测试一下数据是否已经用 utf-8 编码[`mb_detect_encoding()`](http://php.net/manual/en/function.mb-detect-encoding.php)。

# c# - 为什么当我指定 0 时 Membership.GeneratePassword 给我 Nonalphanumeric？

> ID：12390852
> 
> 赞同：2
> 
> 时间：2012-09-12T14:47:05.967
> 
> 标签：c#, asp.net, asp.net-membership, forgot-password, non-alphanumeric

我在 C# 应用程序代码中使用了 Membership.GeneratePassword(10, 0)。GeneratePassword 方法生成指定长度的随机密码。

第二个参数指定生成的密码中非字母数字字符（如@、#、!、%、& 等）的最小数量。

我不想要任何非字母数字字符，所以我指定为零。但是，它仍然失败，因为我在执行 Membership.GeneratePassword(10, 0) 时获得了包含非字母数字内容的密码

Lg|1-F;?a4

为什么是竖线（|）、连字符（-）、分号和问号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-27T14:50:04.117

我最终使用了下面的这个解决方法，它使用正则表达式去除非字母数字字符并用随机数替换它们。

```
String newPassword = Membership.GeneratePassword(8, 0); //Second arg only guarantees a minimum number (not maximum) number of alphanumeric characters.
Random rng = New Random();
newPassword = Regex.Replace(newPassword, @"[^a-zA-Z0-9]", rng.Next(0, 10).ToString()); 
```

# jasper-reports - 如果文本很大并在下一页继续，则在 Jasper 报告中打印“Information Cont...”

> ID：12390860
> 
> 赞同：2
> 
> 时间：2012-09-12T14:47:35.580
> 
> 标签：jasper-reports

我正在使用 IReport 4.1.3 来设计我的报告，而且我对 IReport 还是很陌生。报表中有一个要求：如果动态文本大小很大，并且在新页面中继续，则应该在新页面的第一行打印“XXX Continue...”。我还没想好怎么做。有高手可以给点建议吗？例如，第一页可能如下所示：

* * *

**第一章**

呜呜呜呜呜呜呜呜呜呜呜呜

## 等等等等等等......

然后第二页应该是这样的：

* * *

**第一章继续……**

呜呜呜呜呜呜呜呜呜呜呜呜

## 等等等等等等......

# android - Android iText addTemplate Stamp pdf 表单字段覆盖现有 PDF 文档

> ID：12390862
> 
> 赞同：0
> 
> 时间：2012-09-12T14:47:41.700
> 
> 标签：android, itext, pdf-manipulation, android-droidtext

我正在尝试从 Android 中的旧应用程序打开标准 PDF 表单，使用 iText 覆盖表单字段并传递给 Android 上的 Adob​​e Reader 以填写表单。

我已经能够手动创建 TextFields，但我希望将 pdf 文件作为模板来加快流程并更好地控制质量。

这是我到目前为止的代码，它遵循 itext 示例。

```
 AssetFileDescriptor descriptor = getAssets().openFd("standardWO_Template_v1_fo.pdf");
            File templateFile = new File(descriptor.getFileDescriptor().toString());
            PdfReader reader = new PdfReader(intent.getData().getPath());
            reader.selectPages("1");
            PdfReader templateReader = new PdfReader(templateFile.getAbsolutePath());
            PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(file));
            // Stamp the template onto the document
            PdfImportedPage page = stamper.getImportedPage(templateReader, 1);
            PdfContentByte cb = stamper.getOverContent(1);
            cb.addTemplate(page, 0, 0); 
```

我遇到的问题在最后一行。cb.addTemplate(page, 0,0);

Eclipse 报告以下错误。java.awt.geom.AffineTransform 类型无法解析。它是从所需的 .class 文件中间接引用的

据我所知，java.awt.geom.AffineTransform 仅在 Java 中不起作用。

是否有不同的方法来完成我的任务或让 AffineTransform 在 Android 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:13:54.290

经过一番搜索，我找到了这种方法。首先，我必须从在我的 android 项目中使用 iText5.3.1 库更改为 droidText 库。

一旦我安装了 droidText 库，就可以使用以下代码。（和eclipse中的ctrl-o）

```
 File templateFile = new File(dir.getAbsolutePath() + "/templates/standardWO.pdf");
            // Read the incoming file
            PdfReader reader = new PdfReader(intent.getData().getPath());
            // Read the template form information
            PdfReader templateReader = new PdfReader(templateFile.getAbsolutePath());
            // Create the stamper from the incoming file.
            PdfStamper stamper = new PdfStamper(templateReader, new FileOutputStream(file));
            // Import the template information
            PdfImportedPage iPage = stamper.getImportedPage(reader, 1);
            // get the direct content
            PdfContentByte cb = stamper.getUnderContent(1);
            // Add the imported page to the content
            cb.addTemplate(iPage, 0, 0);
            stamper.close();
            Log.v(TAG, "Opening file in adobe reader: " + file.getAbsolutePath());
            loadDocInReader(file); 
```

# jquery - 使用模态花式框（1.3.4）时关闭按钮消失

> ID：12390871
> 
> 赞同：2
> 
> 时间：2012-09-12T14:48:24.170
> 
> 标签：jquery, fancybox

我正在将fancybox 与jquery 一起用于iframe。我设置`modal`为`true`但关闭按钮消失了。我阅读了文档并使用约定“当`true`，' `overlayShow`'设置为' `true`'并且' `hideOnOverlayClick`'，' `hideOnContentClick`'，' `enableEscapeButton`'，' `showCloseButton`'设置为' `false`'”但关闭按钮消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T18:36:31.733

请在这里阅读我的文章。 [http://anvlpopescu.wordpress.com/2013/12/10/jquery-fancybox-modal-iframe-with-close-button/](http://anvlpopescu.wordpress.com/2013/12/10/jquery-fancybox-modal-iframe-with-close-button/)

有一个解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T10:42:20.953

当 "modal": true 然后你可以在显示事件后附加关闭按钮，如

afterShow : function() { $('.fancybox-skin').append(''); }

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T17:55:33.193

您可能需要再次阅读文档（可能更慢）并了解 when`modal`设置为`true`（如您上面所写），然后`showCloseButton`（自动）设置为`false`.

`"showCloseButton": false`( `"modal": true`) 表示关闭按钮不显示，这是预期的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T10:59:06.217

将命名的关闭图像图标`fancybox_sprite.png`放在 css 目录中。

# sql - SQL 子串替换

> ID：12390872
> 
> 赞同：2
> 
> 时间：2012-09-12T14:48:26.220
> 
> 标签：sql, replace, heidisql

我正在使用 HeidiSql，并且我有一个包含 ~1000 个 URL 的数据库。例子：

```
index.php?option=com_flexicontent&view=items&cid=283&id=33
index.php?option=com_flexicontent&view=items&cid=421&id=4411
index.php?option=com_flexicontent&view=items&cid=415&id=4375 
```

我要做的是将`cid=`408 到 477 的值替换为`cid=403`

我做了一个这样的 SQL 脚本：

```
UPDATE jos_menu
SET link = REPLACE(link, "cid=411", 'cid=403') 
```

但是如何在`cid=`不花费 70 秒的情况下将值 408 更改为 477 `REPLACE`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:15:52.143

我不能测试这个，但试试这个

```
UPDATE jos_menu
SET link = REPLACE(link, 'cid=' + SUBSTRING(@str, CHARINDEX( 'cid=', @str) + 4, 3), 'cid=403')
WHERE Cast(SUBSTRING(@str, CHARINDEX( 'cid=', @str) + 4, 3) as Int) > 407 And Cast(SUBSTRING(@str, CHARINDEX( 'cid=', @str) + 4, 3) as Int) < 478 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:14:14.090

在 phpmyadmin 中备份表或数据库并将其保存为 .cvs 文件。使用 excel 进行替换。然后再次将其保存为 .cvs 文件，然后将其重新导入数据库。

# c++ - 如何减少 CMake 引入的不必要的 C++ 库依赖？

> ID：12390874
> 
> 赞同：0
> 
> 时间：2012-09-12T14:48:31.870
> 
> 标签：c++, visual-studio-2010, cmake

现在我正在用 CMake 构建一个 C++ 项目。我发现 CMake 会在项目中引入不必要的库依赖。举个例子，我的项目由四个部分组成：1）lib1 2）lib2 3）lib3 和 4）app：

```
------lib1---
        |----
      lib2---
        |----
      lib3---
        |----
      app--- 
```

中的源代码`app`将构建一个程序，该程序依赖于`lib3`. `lib3`但是，依赖于创建的动态库`lib2`等等。我构建了以下 CMake 脚本来构建 VC10 项目： **1) Root CMakeLists：**

```
 cmake_minimum_required( VERSION 2.6 )

    project (test)

    add_subdirectory(lib1)

    add_subdirectory(lib2)

    add_subdirectory(lib3)

    add_subdirectory(app) 
```

**2) lib1 CMakeLists.txt**

```
add_definitions (-DEXP_STL )
add_library(lib1 SHARED lib1.cxx) 
```

**3) lib3 CMakeLists.txt**

```
add_definitions (-DEXP_STL )
add_library(lib3 SHARED lib3.cxx)
target_link_libraries(lib3 lib2) 
```

**4) 应用程序 CMakeLists.txt**

```
add_executable(app main.cpp)
target_link_libraries(app lib3) 
```

使用这些 CMake 脚本，我可以毫无问题地构建 VC10 项目。但是，我注意到 CMake 会在 VC10 的库之间引入不必要的库依赖。例如，对于`app`应用程序，它只依赖一个库，即 `lib3`. 但是，在 VC10 项目中，我注意到它添加了以下附加依赖项：

```
..\lib3\Debug\lib3.lib
..\lib2\Debug\lib2.lib
..\lib1\Debug\lib1.lib 
```

然而，在 CMake 脚本中，`lib3`应该只引入依赖项。对于我们的示例项目，这可能不是问题，但在其他情况下，引入的冗余库可能会导致编译错误，因为它们需要正确的搜索路径。因此，我想知道是否有办法消除这些不必要的库。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:49:36.433

CMake 可传递地添加依赖库，可以通过将属性 LINK_INTERFACE_LIBRARIES 设置为空字符串来关闭它。如果您执行 SET_TARGET_PROPERTIES(lib3 PROPERTIES LINK_INTERFACE_LIBRARIES "") 那么在链接 app 时，CMake 不会生成从 app 到 lib1 和 lib2 的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:55:50.450

如果您正在创建静态库，那么我同意 CMake 引入了不必要的依赖项。但是，您正在构建动态库，我不认为 CMake 在这里添加了不必要的依赖项。你有一个动态库链。在这种情况下，如果您链​​接 in `lib3`，则链接器也需要拉入`lib2`，这将导致链接器拉入`lib1`以满足链接应用程序的所有符号依赖项。

# iphone - 在 Xcode for iPhone 中构建 Eigen

> ID：12390881
> 
> 赞同：2
> 
> 时间：2012-09-12T14:48:55.680
> 
> 标签：iphone, c++, xcode, clang, eigen

我一直在尝试将 Eigen 库集成到 iPhone 项目中。我在使用矢量化时遇到问题。我必须声明

```
#ifndef EIGEN_DONT_VECTORIZE
#define EIGEN_DONT_VECTORIZE
#endif 
```

在使用 Eigen 类之前。

而且我经常从 PacketMath.h 得到错误。告诉我没有匹配的功能。

有没有人可以帮我解决这个问题？

# php - 在 DataObjectManager 的汇总字段中显示 DataObject 名称

> ID：12390886
> 
> 赞同：1
> 
> 时间：2012-09-12T14:49:02.303
> 
> 标签：php, silverstripe

首先，我使用的是 SilverStripe 2.4.7 版。我正在使用的 DataObject 与 DataObjectManager 和另一个 DataObject 之间存在 has_one 关系。我想在 DataObjectManager 的摘要字段中显示 DataObject 的名称，但我不断收到以下错误。

未捕获的异常：Object->__call()：“Store”上不存在方法“fortemplate”

我认为这是因为我在 has_one 关系中拥有它，但我不确定。有人对我如何做到这一点有任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T00:22:44.587

您收到该错误是因为“Store”在摘要字段中返回 Store 对象。摘要字段不太清楚如何处理该对象，因此它会检查它是否具有“forTemplate”方法，该方法通常会返回使用模板或纯字符串呈现的对象。

这里有两个选项：

1) 在您的 Store 对象上创建 forTemplate() 方法，该方法返回 Store 的 Title（或您想要的任何字段）。

或者

2) 在具有 DataObjectManager 字段的对象上，创建一个返回 Store 标题的 getter 方法。IE..

```
public function getStoreTitle(){
    return $this->Store()->Title
} 
```

然后在 summary_fields 中参考该方法，即...

```
public static $summary_fields = array(
    'StoreTitle'
); 
```

# java - Spring事务中requires_new和嵌套传播的区别

> ID：12390888
> 
> 赞同：89
> 
> 时间：2012-09-12T14:49:16.800
> 
> 标签：java, spring, transactions, propagation

我无法理解传播策略`PROPAGATION_REQUIRES_NEW`和`PROPAGATION_NESTED`传播策略之间的行为差​​异。在我看来，在这两种情况下，当前进程都是回滚的，而不是整个事务。有什么线索吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-09-12T15:11:02.160

请参阅此链接：[PRO​​PAGATION_NESTED 与 PROPAGATION_REQUIRES_NEW？](http://forum.springsource.org/archive/index.php/t-16594.html)Juergen Hoeller 解释得很好。-- *Spring Source Forum于2019年2月28日完全下线，但您可以在下面的引用中阅读文章的相关部分*

> PROPAGATION_REQUIRES_NEW 为给定范围启动一个新的、独立的“内部”事务。该事务将完全独立于外部事务提交或回滚，具有自己的隔离范围，自己的一组锁等。外部事务将在内部事务开始时暂停，并在内部事务完成后恢复完全的。...
> 
> 另一方面，PROPAGATION_NESTED 启动“嵌套”事务，这是现有事务的真正子事务。将会发生的是在嵌套事务开始时将采用保存点。Í如果嵌套事务失败，我们将回滚到该保存点。嵌套事务是外部事务的一部分，因此它只会在外部事务结束时提交。...

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-12T14:55:22.417

PROPAGATION_REQUIRES_NEW ：对每个受影响的事务范围使用完全独立的事务。在这种情况下，底层物理事务是不同的，因此可以独立提交或回滚，外部事务不受内部事务回滚状态的影响。

PROPAGATION_NESTED ：使用具有多个可以回滚的保存点的单个物理事务。这种部分回滚允许内部事务范围触发其范围的回滚，尽管某些操作已回滚，但外部事务能够继续物理事务。此设置通常映射到 JDBC 保存点，因此仅适用于 JDBC 资源事务。

检查[弹簧文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-propagation)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2015-12-04T05:45:42.417

请找出区别

```
1.) Use of NESTED Transaction 
```

如果当前事务存在，则在嵌套事务中执行，其他行为类似于 PROPAGATION_REQUIRED。Spring 支持嵌套事务

2.) 使用 REQUIRED Transaction 支持当前事务，如果不存在则创建一个新事务。. 这意味着银行领域，如提款、存款、更新交易

3.) 使用 REQUIRES_NEW 事务 创建一个新事务，如果存在则暂停当前事务。

# javascript - this.SOMETHING 总是返回 undefined - extjs

> ID：12390889
> 
> 赞同：1
> 
> 时间：2012-09-12T14:49:21.103
> 
> 标签：javascript, extjs, scope, extjs4

我有一个包含选项卡式面板的 portlet。在那个面板中有一个图表。在图表的一个功能中，我做了一个`console.log(this)`并且能够查看所有内容。但是，我的主要意图是使用 value `this.ownerCt`，这表示它存在，但是当我尝试使用它或 console.log 它时，它报告为未定义。如果我做一个`this.id`或`this.idname`我得到实际的身份证。

问题：如果 in 有值，为什么会`this.SOMETHING`返回？`undefined``this`

一些代码花絮：这里是`console.log(this)`.

```
Ext.Class.newClass
  additionalCls: Array[2]
  body: Ext.Element.Ext.core.Element
  childEls: Array[1]
  collapseDirection: "top"
  componentCls: "x-panel"
  componentLayout: Ext.Class.newClass
  componentLayoutCounter: 3
  container: Ext.Element.Ext.core.Element
  dockedItems: Ext.Class.newClass
  el: Ext.Element.Ext.core.Element
  id: "stackedbarportlet-1055"
  itemId: "graph"
  items: Ext.Class.newClass
  ownerCt: Ext.Class.newClass
  xtype: "stackedbarportlet" 
```

我取出了一些实例，但这是它的一般输出！

`console.log(this.ownerCt)`结果： `undefined`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:00:49.610

```
<script>

var t1="";
var t2;

if (t1===undefined)
{
alert("t1 is undefined");
}
if (t2===undefined)
{
alert("t2 is undefined");
}

</script> 
```

如果您运行 t2 未定义，则**this.ownerCt**可能没有价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:16:29.830

[你可以在这里](https://stackoverflow.com/questions/4198912/bizarre-console-log-behaviour-in-chrome-developer-tools)找到你的答案。似乎有时`console.log()`调用会排队并最终在当前语句结束后调用，因此它们的输出不一定像在代码中那样准确地反映对象状态。

至少，当我在自定义 ExtJS 的商店中重写构造函数时，我遇到了类似的行为。

# yii - yii 用户管理编辑字段

> ID：12390890
> 
> 赞同：1
> 
> 时间：2012-09-12T14:49:21.990
> 
> 标签：yii

我已经成功设置了 yii-user-management。感谢这里的帮助。

但是，当我在 profile/fields/admin 中时。

我单击编辑字段，然后在下拉列表中将字段从所需的“否”更改为“是”，然后保存，但没有任何反应。

我也得到：

CDbCommand 执行 SQL 语句失败：SQLSTATE[42000]: Syntax error or access violation: 1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(0) NOT NULL DEFAULT 0' 附近使用正确的语法。执行的 SQL 语句是：ALTER TABLE profile ADD ``(0) NOT NULL DEFAULT 0

创建字段时。

如果您需要一些代码或文件，请告诉我。任何帮助表示赞赏。

这是配置文件/模型/YumProfileField.php

```
class YumProfileField extends YumActiveRecord
{
const VISIBLE_HIDDEN=0;
const VISIBLE_ONLY_OWNER=1;
const VISIBLE_REGISTER_USER=2;
const VISIBLE_USER_DECISION=3;
const VISIBLE_PUBLIC=4; // Field is public even if the user decides to hide it

/**
 * Returns the static model of the specified AR class.
 * @param string $className
 * @return YumProfileField
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

public function isPublic($user = null) {
    if($user == null)
        $user = Yii::app()->user->id;

    if(!$this->visible)
        return false;

    if($privacy = YumUser::model()->findByPk($user)->privacy) {
        if($privacy->public_profile_fields & pow(2, $this->id))
            return true;
    }

    return false;
}

public function tableName()
{
    $this->_tableName = Yum::module('profile')->profileFieldTable;
    return $this->_tableName;
}
public function scopes()
{
    return array(
            'forAll'=>array(
                'condition'=>'visible='.self::VISIBLE_PUBLIC,
                ),
            'forUser'=>array(
                'condition'=>'visible>='.self::VISIBLE_REGISTER_USER,
                ),
            'forOwner'=>array(
                'condition'=>'visible>='.self::VISIBLE_ONLY_OWNER,
                ),
            );
}

public static function itemAlias($type,$code=NULL) {
    $_items = array(
            'field_type' => array(
                'INTEGER' => Yum::t('INTEGER'),
                'VARCHAR' => Yum::t( 'VARCHAR'),
                'TEXT'=> Yum::t( 'TEXT'),
                'DATE'=> Yum::t( 'DATE'),
                'DROPDOWNLIST' => Yum::t('DROPDOWNLIST'),
                'FLOAT'=> Yum::t('FLOAT'),
                'BOOL'=> Yum::t('BOOL'),
                'BLOB'=> Yum::t('BLOB'),
                'BINARY'=> Yum::t('BINARY'),
                'FILE'=> 'FILE',
                ),
            'required' => array(
                '0' => Yum::t('No'),
                '1' => Yum::t('Yes'),
                ),
            'visible' => array(
                self::VISIBLE_USER_DECISION => Yum::t('Let the user choose in privacy settings'),
                self::VISIBLE_PUBLIC => Yum::t('For all'),
                self::VISIBLE_REGISTER_USER => Yum::t('Registered users'),
                self::VISIBLE_ONLY_OWNER => Yum::t('Only owner'),
                self::VISIBLE_HIDDEN => Yum::t('Hidden'),
                ),
            );
    if (isset($code))
        return isset($_items[$type][$code]) ? $_items[$type][$code] : false;
    else
        return isset($_items[$type]) ? $_items[$type] : false;
}
} 
```

YumFieldsController：

```
class YumFieldsController extends YumController
{
const PAGE_SIZE=10;

public function accessRules()
{
    return array(
        array('allow', 
            'actions'=>array('index', 'create', 'update', 'view', 'admin','delete'),
            'users'=>array(Yii::app()->user->name),
            'expression' => 'Yii::app()->user->isAdmin()'
            ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
}

public function actionView()
{
    $this->layout = Yum::module()->adminLayout;
    $this->render('view',array(
        'model'=>$this->loadModel('YumProfileField'),
    ));
}

public function actionCreate() {
    $this->layout = Yum::module()->adminLayout;
    $model = new YumProfileField;

    // add to group?
    if(isset($_GET['in_group']))
        $model->field_group_id=$_GET['in_group'];

    if(isset($_POST['YumProfileField'])) {
        $model->attributes = $_POST['YumProfileField'];

        $field_type = $model->field_type;
        if($field_type == 'DROPDOWNLIST')
            $field_type = 'INTEGER';

        if($model->validate()) {
            $sql = 'ALTER TABLE '.YumProfile::model()->tableName().' ADD `'.$model->varname.'` ';
            $sql .= $field_type;
            if ($field_type!='TEXT' && $field_type!='DATE')
                $sql .= '('.$model->field_size.')';
            $sql .= ' NOT NULL ';
            if ($model->default)
                $sql .= " DEFAULT '".$model->default."'";
            else
                $sql .= (($field_type =='TEXT' || $model->field_type=='VARCHAR')?" DEFAULT ''":" DEFAULT 0");

            $model->dbConnection->createCommand($sql)->execute();
            $model->save();
            $this->redirect(array('view','id'=>$model->id));
        }
    }

    $this->render('create',array(
        'model'=>$model,
    ));
}

public function actionUpdate()
{
    $this->layout = Yum::module()->adminLayout;

    $model = $this->loadModel('YumProfileField');
    if(isset($_POST['YumProfileField']))
    {
        $model->attributes=$_POST['YumProfileField'];

        // ALTER TABLE `test` CHANGE `profiles` `field` INT( 10 ) NOT NULL 
        // ALTER TABLE `test` CHANGE `profiles` `description` INT( 1 ) NOT NULL DEFAULT '0'
        if($model->save())
            $this->redirect(array('view','id'=>$model->id));
    }

    $this->render('update',array(
        'model'=>$model,
    ));
}

public function actionDelete()
{
    $this->layout = Yum::module()->adminLayout;
    if(Yii::app()->request->isPostRequest)
    {
        // we only allow deletion via POST request
        $model = $this->loadModel('YumProfileField');
        $sql = 'ALTER TABLE '.YumProfile::model()->tableName().' DROP `'.$model->varname.'`';
        if ($model->dbConnection->createCommand($sql)->execute()) {
            $model->delete();
        }

        if(!isset($_POST['ajax']))
            $this->redirect(array('index'));
    }
    else
        throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
}

public function actionIndex()
{
    $this->layout = Yum::module()->adminLayout;
    $dataProvider=new CActiveDataProvider('YumProfileField', array(
        'pagination'=>array(
            'pageSize'=>self::PAGE_SIZE,
        ),
        'sort'=>array(
            'defaultOrder'=>'position',
        ),
    ));

    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
}

public function actionAdmin()
{
    $this->layout = Yum::module()->adminLayout;

    $dataProvider=new CActiveDataProvider('YumProfileField', array(
        'pagination'=>array(
            'pageSize'=>self::PAGE_SIZE,
        ),
        'sort'=>array(
            'defaultOrder'=>'position',
        ),
    ));

    $this->render('admin',array(
        'dataProvider'=>$dataProvider,
    ));
}

} 
```

YumProfile.php 模型

```
class YumProfile extends YumActiveRecord
{
const PRIVACY_PRIVATE = 'private';
const PRIVACY_PUBLIC = 'public';

/**
 * @var array of YumProfileFields
 */
static $fields=null;

public function init()
{
    parent::init();
    // load profile fields only once
    $this->loadProfileFields();
}

public function afterSave() {
    if($this->isNewRecord) 
        Yii::log(Yum::t( 'A profile been created: {profile}', array(
                        '{profile}'   =>json_encode($this->attributes))));
    else
        Yii::log(Yum::t( 'A profile been update: {profile}', array(
                        '{profile}' => json_encode($this->attributes))));

    return parent::afterSave();
}

public function recentComments($count = 3) {
    $criteria = new CDbCriteria;
    $criteria->condition = 'id = ' .$this->id;
    $criteria->order = 'createtime DESC';
    $criteria->limit = $count;
    return YumProfileComment::model()->findAll($criteria);
}

public function beforeValidate() {
    if($this->isNewRecord)
        $this->timestamp = time();
    return parent::beforeValidate();
}

/**
 * @param string $className
 * @return YumProfile
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

// All fields that the user has activated in his privacy settings will
// be obtained and returned for the use in the profile view
public function getPublicFields() {
    if(!Yum::module('profile')->enablePrivacySetting)
        return false;

    $fields = array();

    if($privacy = YumUser::model()
            ->cache(500)
            ->with('privacy')
            ->findByPk($this->user_id)
            ->privacy->public_profile_fields) {
        $i = 1;
        foreach(YumProfileField::model()->cache(3600)->findAll() as $field) {
            if(
                    (($i & $privacy) 
                     && $field->visible != YumProfileField::VISIBLE_HIDDEN) 
                    || $field->visible == YumProfileField::VISIBLE_PUBLIC)
                $fields[] = $field;
            $i*=2;
        }
    }
    return $fields;
}

/**
 * Returns resolved table name 
 * @return string
 */
public function tableName()
{
    $this->_tableName = Yum::module('profile')->profileTable;
    return $this->_tableName;
}

public function rules()
{
    $required = array();
    $numerical = array();
    $rules = array();
    $safe = array();

    foreach (self::$fields as $field) {
        $field_rule = array();

        if ($field->required == 1)
            array_push($required, $field->varname);

        if ($field->field_type == 'int'
                || $field->field_type == 'FLOAT'
                || $field->field_type =='INTEGER'
                || $field->field_type =='BOOLEAN')
            array_push($numerical, $field->varname);

        if ($field->field_type == 'DROPDOWNLIST')
            array_push($safe, $field->varname);

        if ($field->field_type == 'VARCHAR' || $field->field_type == 'TEXT') {
            $field_rule = array($field->varname,
                    'length',
                    'max'=>$field->field_size,
                    'min' => $field->field_size_min);

            if ($field->error_message)
                $field_rule['message'] = Yum::t($field->error_message);

            array_push($rules,$field_rule);
        }

        if ($field->match) {
            $field_rule = array($field->varname,
                    'match',
                    'pattern' => $field->match);

            if ($field->error_message)
                $field_rule['message'] = Yum::t( $field->error_message);

            array_push($rules,$field_rule);
        }

        if ($field->range) {
            // allow using commas and semicolons
            $range=explode(';',$field->range);
            if(count($range)===1)
                $range=explode(',',$field->range);
            $field_rule = array($field->varname,'in','range' => $range);

            if ($field->error_message)
                $field_rule['message'] = Yum::t( $field->error_message);
            array_push($rules,$field_rule);
        }

        if ($field->other_validator) {
            $field_rule = array($field->varname,
                    $field->other_validator);

            if ($field->error_message)
                $field_rule['message'] = Yum::t( $field->error_message);
            array_push($rules, $field_rule);
        }

    }

    array_push($rules,
            array(implode(',',$required), 'required'));
    array_push($rules,
            array(implode(',',$numerical), 'numerical', 'integerOnly'=>true));
    array_push($rules,
            array(implode(',',$safe), 'safe'));

    $rules[] = array('allow_comments, show_friends', 'numerical');
    $rules[] = array('email', 'unique');
    $rules[] = array('email', 'CEmailValidator');
    $rules[] = array('privacy', 'safe');

    return $rules;
}

public function relations()
{
    $relations = array(
            'user' => array(self::BELONGS_TO, 'YumUser', 'user_id'),
            'comments' => array(self::HAS_MANY, 'YumProfileComment', 'profile_id'),
            );

    $fields = Yii::app()->db->cache(3600)->createCommand(
            "select * from ".YumProfileField::model()->tableName()." where field_type = 'DROPDOWNLIST'")->queryAll();

    foreach($fields as $field) {
        $relations[ucfirst($field['varname'])] = array(
                self::BELONGS_TO, ucfirst($field['varname']), $field['varname']);

    }

    return $relations;
}

// Retrieve a list of all users that have commented my profile
// Do not show my own profile visit
public function getProfileCommentators() {
    $commentators = array();
    foreach($this->comments as $comment)
        if($comment->user_id != Yii::app()->user->id)
            $commentators[$comment->user_id] = $comment->user;

    return $commentators;
}

public function getProfileFields() {
    $fields = array();

    if(self::$fields)
        foreach(self::$fields as $field) {
            $varname = $field->varname;
            $fields[$varname] = Yum::t($varname);
        }
    return $fields;
}

public function name() {
    return sprintf('%s %s', $this->firstname, $this->lastname);
}

public function attributeLabels()
{
    $labels = array(
            'id' => Yum::t('Profile ID'),
            'user_id' => Yum::t('User ID'),
            'privacy' => Yum::t('Privacy'),
            'show_friends' => Yum::t('Show friends'),
            'allow_comments' => Yum::t('Allow profile comments'),
            );

    if(self::$fields)
        foreach (self::$fields as $field)
            $labels[$field->varname] = Yum::t($field->title);

    return $labels;
}

/**
 * Load profile fields.
 * Overwrite this method to get another set of fields
 * Makes use of cache so the amount of sql queries per request is reduced
 * @since 0.6
 * @return array of YumProfileFields or empty array
 */
public function loadProfileFields()
{
    if(self::$fields===null)
    {
        self::$fields=YumProfileField::model()->cache(3600)->findAll();
        if(self::$fields==null)
            self::$fields=array();
    }
    return self::$fields;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:57:49.280

看起来您正在尝试添加没有名称或类型的列？[MySQL ALTER TABLE 示例](http://dev.mysql.com/doc/refman/5.1/en/alter-table-examples.html)。

另外，请检查您的 db 用户是否有权访问`ALTER TABLE`.

# sql-server - SQL Server 存储过程中的逻辑和检查表

> ID：12390893
> 
> 赞同：0
> 
> 时间：2012-09-12T14:49:30.177
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我终于被存储过程弄湿了，我的第一个过程需要一点帮助。

我得到了基本布局并设置了一个 SP，它只设置两个变量并选择它们，不返回任何信息。

就历史而言，我有两个主记录表`tblRecordsCurrent (RecordID)`和`tblRecordsHistorical (RecordID)`一个父表，它们`tblDataSet (DatasetID)`都有一个 flag `dsCurrent`。

每天我使用新的 DataSetID 将 5000 条记录上传到 tblRecordsCurrent。当我上传新数据集时，前一天的数据集（5000 条记录）被移动到 tblRecordsHistorical 并且 tblDataSet 表中的 DSCurrent 标志更新为 False。

我将为 StoredProcedure 提供一个要移动的 DataSetID，以及目标（当前/历史的“C”或“H”）。首先，我需要检查 DataSetID 是否存在，然后在相关的 tblRecordsCurrent/Historical 中是否有任何记录与 DataSetID。

1 - 我如何确定 DataSetID 是否存在，我认为它是 a `SELECT COUNT(*) from tblDataSet where DataSetID=@DataSet`，但它是如何实现的，我只是这样做：

```
@DataSetExistCount=SELECT COUNT(*) from tblDataSet where DataSetID=@DataSet
if @DataSetExistCount== then
     @errCount = @errCount + 1
else
   >>> MORE LOGIC <<<
END 
```

编辑：

这是我的存储过程的一个很好的开始，如果有人对存储过程中的复杂嵌套逻辑感兴趣，我现在将其发布在一个单独的基于错误捕获的问题下：

[SQL Server 存储过程中的错误处理](https://stackoverflow.com/questions/12403221/error-handling-in-sql-server-stored-procedures)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:58:09.777

您只需检查它是否存在：

```
If Exists ( select 1 from tblDataSet where DataSetID = @dataSet )
begin
   -- Do your move logic
end
else 
begin
    -- Doesn't exist so do something else
end 
```

# c++ - 用 Windows 的时间函数喂 srand()

> ID：12390900
> 
> 赞同：1
> 
> 时间：2012-09-12T14:49:50.383
> 
> 标签：c++, time, visual-studio-2012, gettimeofday

我一直在寻找下面代码补丁的确切 Win 实现。我不是一个优秀的程序员，我的代码最初是在 UNIX 中，但我必须尽可能少地修改它以用于 Win。我从一些谷歌搜索中了解到，主要问题是没有 Win 等效项的“gettimeofday”。但是，我想尽可能地保留相同的程序结构。

```
struct timeval tv;
time_t curtime;
gettimeofday(&tv, NULL);    // ???
curtime = tv.tv_usec;
srand(tv.tv_usec); //time(&curtime) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:48:04.503

如果您需要将随机种子作为亚秒数，请执行以下操作：

```
#ifdef WIN32
::srand( GetTickCount() );
#else
//your existing code
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:24:26.673

您可以使用 Windows 原生函数 GetSystemTimeAsFileTime() 来获取时间并编写一个包装器将其放入 struct timeval 结构中。

# maven - 如何用maven签署一个jar，但改变jdk？

> ID：12390902
> 
> 赞同：1
> 
> 时间：2012-09-12T14:49:53.170
> 
> 标签：maven, plugins, build, java, jarsigner

在我的场景中，我有一个通过 maven 用 JDK6 编译的 jar 文件。这个jar需要签名。所以，我使用了 maven-jarsigner-plugin 来完成这项工作，而且效果很好！

但是，我的任务是签署这个指向 JDK1.5 的 jar。但是jar需要使用JDK6来构建。所以，我的问题是：我可以使用 JDK6 构建 jar，但专门更改为 JDK5 来对其进行签名吗？是否可以？

非常感谢！

罗德里戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:58:20.983

[jarsigner 选项](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html#Options)提到了`-Jjavaoption`可用于将选项传递给 java 解释器的选项。如果您`java -h`按照上述方式运行，则这些选项之一是`-version:<value>`.

看起来`jarsigner:sign`目标有一个元素可以将额外的参数传递给命令行。所以我会尝试添加

```
<arguments>-Jversion:1.5.0</arguments> 
```

或类似的东西。（也许其他人可以帮助该选项的特定格式，我从来没有这样做过。）

# php - 与许多人的关系，没有这个

> ID：12390904
> 
> 赞同：-2
> 
> 时间：2012-09-12T14:49:55.760
> 
> 标签：php, mysql, sql, doctrine

```
User:
id | name
1  | one
2  | two
3  | three
4  | four
5  | five

House:
id | name
1  | London
2  | Barcelona

UserHouse:
id_user | id_house
 1      |  1
 2      |  2
 4      |  1

$q = Doctrine_Query::create()
  ->from('User u')
   // many selectors here
  ->leftJoin('u.UserHouse uh')
  ->addWhere('????????');

$users = $q->execute(); 
```

我想获得所有没有 House 的用户（即 - 不在表 UserHouse 中） - 这应该返回我用户 3 和 5。

我知道，我可以使用：

```
->from('UserHouse uh') 
```

以及与用户的下一个关系，但我必须拥有并使用：

```
 ->from('User u') 
```

因为我将此查询与许多选择器一起使用 - 无法编辑它。我必须从 **->from('User u')开始**

那么我必须填写*->addWhere('????????')*以使我返回没有房子的用户？

如果没有 Doctrine，我怎么能用简单的 SQL 来获得这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:20:06.377

在 SQL 中，这种类型的查询需要所谓的`EXCEPTION JOIN`. 一些 RDBMS 实际上将其实现为单独的类型（例如 DB2），而另一些则需要使用变通方法。在您的情况下，它相当于（在 SQL 中）：

```
SELECT User.* 
FROM User
LEFT JOIN UserHouse
ON UserHouse.id_user = User.id
WHERE UserHouse.id_user IS NULL 
```

这[将产生](http://www.sqlfiddle.com/#!2/a4aa0/1)预期的“不在房子里”记录。

这个网站的很多地方都有类似的例子。

我从来没有使用过 Doctrine，所以我无法帮助你。但我最好的猜测是：

```
addWhere('uh IS NULL') 
```

或者

```
addWhere('uh.id_user IS NULL') 
```

# java - netbeans 的前锋网络服务器连接重置

> ID：12390905
> 
> 赞同：0
> 
> 时间：2012-09-12T14:49:58.213
> 
> 标签：java, ajax, appletviewer

简介：我正在尝试从原始 SCADA 应用程序创建一个实时 Web 应用程序（java - maven over NetBeans），并使用 NetBeans 罢工者 GlobalSMSPro 服务作为小工具来获取异步连接，同时通过内部 tcp 连接无限轮询现场 IED现场主机通过串口连接（现场主机作为网关运行）。-

感兴趣的话题：

在方法 callAsyncronousCallBack() 的 applet.class 中，我更改了：

```
com.strikeiron.GlobalSMSPro service = new com.strikeiron.GlobalSMSPro(); 
```

经过

```
com.strikeiron.GlobalSMSPro service = new com.strikeiron.GlobalSMSPro(new URL("http://ws.strikeiron.com/SMSAlerts4?WSDL"),javax.xml.namespace.QName.valueOf(“http://wsparam.strikeiron.com/SMSAlerts4?WSDL”)); 
```

在 appletviewer 的客户端 DOS 窗口中，我收到以下消息：

```
javax.xml.ws.WebServiceException: Failed to access the WSDL at: http://wsparam.strikeiron.com/SMSAlerts4?WSDL. It failed with: Got connection reset while opening stream from://wsparam.strikeiron.com/SMSAlerts4?WSDL
at com.sun.xml.internal.ws.wsdl.parser.Runtimewsdlparser.tryWithMax<RuntimeWSDLParser.java:173> 
```

.... 英格。Raúl José Puccinelli Equipos Eléctricos – Empresa Provincial de la Energía – 圣达菲 - 阿根廷 - 12-09-2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:44:24.003

我尝试不使用任何防火墙并更改：

> `com.strikeiron.GlobalSMSPro service = new com.strikeiron.GlobalSMSPro(new URL("http://ws.strikeiron.com/SMSAlerts4?WSDL"),javax.xml.namespace.QName.valueOf(“http://wsparam.strikeiron.com/SMSAlerts4?WSDL”));`

经过：

> `com.strikeiron.GlobalSMSPro service = new com.strikeiron.GlobalSMSPro(new URL("http://ws.strikeiron.com/SMSAlerts4?WSDL"),javax.xml.namespace.QName.valueOf("{http://www.strikeiron.com}GlobalSMSPro"));`

# c++ - 使用资源文件进行 C++ 编译期间的错误

> ID：12390908
> 
> 赞同：0
> 
> 时间：2012-09-12T14:50:06.243
> 
> 标签：c++, winapi, resources, compiler-errors

好的，所以我创建了一个运行良好的 C++ Win32 程序。然后我想使用一个自定义图标，所以我创建了一个“resource.h”文件和一个“resource.rc”文件，并将`#include`它们都放在了我的 C++ 源文件中。但是在编译时，第 3 行出现以下错误：

> 数字常量之前的预期不合格 id

我究竟做错了什么？我是不是忘记了什么？

我的 resource.h 文件：

```
#define IDI_MYICON 201 
```

我的 resource.rc 文件：

```
#include "resource.h"

IDI_MYICON ICON "star.ico" 
```

最后是我的 C++ Win32 文件的前三行（有问题的）：

```
#include <windows.h>
#include "resource.h"
#include "resource.rc" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:54:17.760

您不应该将 .rc 文件包含到您的源代码中，而应该将 .h 文件包含在内。您应该使用开发环境的资源编译器将 .rc 文件单独编译成 .res 文件，然后将 .res 文件链接到最终的可执行文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:54:12.000

您不会将`.RC`文件包含到 C++ 文件中。您使用`RC.EXE`（资源编译器）编译它们。这会生成一个文件，您将其与其他文件`.RES`一起提供给链接器。`.OBJ`

# c++ - C ++计算日期之间的差异

> ID：12390925
> 
> 赞同：0
> 
> 时间：2012-09-12T14:50:57.823
> 
> 标签：c++, c++builder, datediff, tdatetime

> **可能重复：**
> [检查两个 TDateTime 变量](https://stackoverflow.com/questions/12386266/checking-two-tdatetime-variables)

我无法计算两个日期之间的差异，然后显示差异。我已经发布了一个先前的问题。

我正在寻求 replaceTime 功能的帮助。我不确定如何/为什么需要使用它。

这是我的代码：

```
TDateTime testFirstDate("11/09/2012");
TDateTime testFirstTime("14:00");

TDateTime testSecondDate("12/09/2012");
TDateTime testSecondTime("16:00");

TDateTime testCombined1 = ReplaceTime(testFirstDate,testFirstTime);
TDateTime testCombined2 = ReplaceTime(testSecondDate,testSecondTime);

TDateTime testDateDifference = testCombined2 - testCombined1;

std::cout << testDateDifference; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:58:34.050

你的代码没有意义。两个日期的差异永远不会是一个新的日期！

我怀疑这部分是错误的：

```
TDateTime testDateDifference = testCombined2 - testCombined1; 
```

两个日期的差异是一个时间段——一个时间跨度（通常以秒为单位）。您是否自己编写了 TDateTime 的实现？

# c# - 尽管首先调用 GetNamespacesInScope，但“未定义命名空间‘x’”

> ID：12390927
> 
> 赞同：1
> 
> 时间：2012-09-12T14:51:02.107
> 
> 标签：c#, .net, xml, xpath

我正在尝试使用 .NET 解析 c# .NET 中的有效 XML 文档`xPathNavigator`。XML 文档的开头如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <soapenv:Body>
        <ns1:myResponse xmlns:ns1="ExampleNS" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
            <myReturn href="#2" /> 
```

如您所见，在根元素上定义了一些命名空间，但稍后`ns1`会定义。当我尝试评估 xPath 查询时`/soapenv:Envelope/soapenv:Body/ns1:myResponse/myReturn`，我得到`XPathException`：

```
Namespace prefix 'ns1' is not defined. 
```

我正在做的是将 XML 文档作为字符串加载到`XmlDocument`对象中。然后我正在创建一个导航器，移动到根元素并调用`GetNamespacesInScope(XmlNamespaceScope.All)`. 我遍历这个集合，其中包含根上定义的、、和的命名空间，并将它们添加到命名空间`xml`管理器`soapenv`。然后我创建一个并调用，并得到异常。`xsd``xsi``xPathNavigator``Evaluate`

代码是这样的：

```
string response = GetXMLString();
var xmlDocument = new XmlDocument();
xmlDocument.LoadXml(response);

var xmlDocumentNavigator = xmlDocument.CreateNavigator();
xmlDocumentNavigator.MoveToFollowing(XPathNodeType.Element);
var xnm = new XmlNamespaceManager(xmlDocument.NameTable);
var namespacesInScope = xmlDocumentNavigator.GetNamespacesInScope(XmlNamespaceScope.All);
if (namespacesInScope != null)
{
    foreach (var prefix in namespacesInScope.Keys)
    {
        xnm.AddNamespace(prefix, namespacesInScope[prefix]);
    }
}

var xPathDocument = new XPathDocument(new StringReader(response));
var xPathNavigator = xPathDocument.CreateNavigator();

xPathNavigator.Evaluate("/soapenv:Envelope/soapenv:Body/ns1:myResponse/myReturn", xnm); 
```

为什么`GetNamespacesInScope`方法不接`ns1`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:13:50.243

问题是`GetNamespacesInScope`只返回导航器当前节点范围内的命名空间（我猜该方法建议:)。

获取所有命名空间的一种技巧是遍历所有元素，获取命名空间，然后仅重新组装唯一的元素。

字典合并代码[由 JonSkeet 提供](https://stackoverflow.com/questions/294138/merging-dictionaries-in-c-sharp)

```
 XPathDocument xpd = new XPathDocument(new StringReader(s));
 XPathNavigator xpn = xpd.CreateNavigator();
 List<IDictionary<string, string>> xmlnsList = new List<IDictionary<string,string>>();
 while (xpn.MoveToFollowing(XPathNodeType.Element))
 {
     xmlnsList.Add(xpn.GetNamespacesInScope(XmlNamespaceScope.All));
 }
 var result = xmlnsList.SelectMany(dict => dict)
              .ToLookup(pair => pair.Key, pair => pair.Value)
              .ToDictionary(group => group.Key, group => group.First());
 if (result != null)
 {
     foreach (var prefix in result.Keys)
     {
         xnm.AddNamespace(prefix, result[prefix]);
     }
 } 
```

**编辑**

根据 Paciv 的评论，如果您真的事先不知道 xml 文档中的命名空间是什么，另一种方法是使用与命名空间无关的 Xpath，并避免嗅探命名空间的问题（并完全消除对命名空间管理器的需要） .

在您的示例中，这将是：

```
xPathNavigator.Evaluate("/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='myResponse']/*[local-name()='myReturn']"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:10:59.657

只需添加您事先知道执行 XPath 查询所需的名称空间怎么样？

你可以写

```
xnm.AddNamespace("MyNS", "ExampleNS"); 
```

进而

```
xPathNavigator
    .Evaluate("/soapenv:Envelope/soapenv:Body/MyNS:myResponse/myReturn", xnm); 
```

只要前缀设计的命名空间相同，前缀是什么都无所谓。

顺便说一句，您应该对 SOAP 名称空间执行相同的操作，因为您将 XPath 查询基于前缀，并且可以生成完全相同的 XML，具有针对相同名称空间的不同前缀。

我会写一些更健壮的东西，适用于不同的 SOAP 生成器，比如

```
string response = GetXMLString();
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.LoadXml(response);
XmlNamespaceManager xnm = new XmlNamespaceManager(xmlDocument.NameTable);
xnm.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/envelope/");
xnm.AddNamespace("ns1", "ExampleNS");

xmlDocument.CreateNavigator()
    .Evaluate("/soapenv:Envelope/soapenv:Body/ns1:myResponse/myReturn", xnm); 
```

# c# - 单机上的Socket编程？

> ID：12390928
> 
> 赞同：6
> 
> 时间：2012-09-12T14:51:04.123
> 
> 标签：c#, .net, sockets

我正在构建一个客户端-服务器聊天应用程序。

它既有服务器部分，也有客户端部分。

是否可以在同一台机器上测试应用程序，或者我真的需要两台不同的计算机来运行应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:52:27.773

是的，可以在同一台机器上测试您的应用程序。

在这种情况下，客户端和服务器的 IP 地址将相同。只需为客户端和服务器打开不同的端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:01:26.467

是的，这是可能的。

*   启动你的服务器，它会监听一个特定的端口（服务器应用程序要么已经定义了一个，要么你必须为它提供一个）。

*   启动客户端应用程序并使用服务器应用程序侦听的端口号连接到您的机器 (127.0.0.1)。

如果您拥有的程序没有为您提供命令行选项来指定它们，您可能必须修改应用程序以更改 IP 地址或端口号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:54:11.127

您可以在同一台机器上进行测试。我现在正在做这件事，因为我输入了这个笔记。:)

当然，您期望的正常事情都适用……例如，您不能在同一端口上测试位于同一接口上的两个侦听器。但是连接到同一个盒子上的服务器的客户端应该没有问题。

当然，在发布之前，您还应该在不同的机器上进行测试。这可能会暴露单框配置没有的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:56:21.140

不需要，你可以绑定相同的IP和不同的端口。他们会工作的。或者您可以安装虚拟机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:53:36.280

您可以在同一台机器上进行测试，只需确保客户端和服务器绑定到不同的端口即可。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:56:26.047

是的，您可以在本地进行测试。您可以使用 的环回地址`127.0.0.1`、您的机器名或 ip 地址进行连接。

如果您正在为您的应用选择端口号，请确保您了解哪些[端口被使用和保留](http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.txt)给其他程序。例如，如果您尝试使用端口 80，您将与运行 Web 服务器的人发生冲突。

此外，虽然本地测试很棒，但您需要确保了解如何在不同的防火墙应用程序和路由器中配置您的应用程序。

# wso2 - REST TO REST 使用 WSO2 ESB

> ID：12390932
> 
> 赞同：10
> 
> 时间：2012-09-12T14:51:21.023
> 
> 标签：wso2, wso2esb

我在服务器上部署了一个 REST 服务，并希望通过 WSO2 ESB 公开它（代理它）并使用 ESB 安全性来保护对服务的访问（可能是通过 ESB 用户数据库中的用户名和密码查看的 HTTP BASIC 身份验证）。我找不到描述如何做的好文档。这可以使用 WSO2 ESB 来完成吗？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:12:08.513

您可以参考[这篇](http://vvratha.blogspot.com/2011/11/invoking-restful-service-via-wso2esb.html)博客文章来为 REST 服务创建代理。为了保护服务，有关于如何保护服务的文章。这就是[其中之一](http://blog.facilelogin.com/2009/02/security-policy-with-wso2-wsas.html)。

我正在添加一个用于保护 REST 服务的新[链接。](http://wso2.org/library/articles/2011/08/finegrained-authorization-restful-services-xacml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T08:22:48.743

您可以为此目的使用 REST API，从 wso2 ESB 4.0.2 开始，它附带 REST API，您可以轻松调用它们，您可以全面了解 REST API 如何在 WSO2 ESB ref [REST API 文章中调用](http://wso2.org/library/articles/2012/09/get-cup-coffee-wso2-way)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T15:22:59.777

对于带有 wso2-esb 用户的 http 基本身份验证，我使用这些序列。

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="ValidacionHttpBasica">
<property name="isAuthorized" value="0" scope="default" type="STRING"/>
<class name="org.wso2.security.HttpBasicAuthOpMediator"/>
<switch source="get-property('isAuthorized')">
    <case regex="0">
        <property name="HTTP_SC" value="401" scope="axis2" type="STRING"/>
        <makefault version="soap11">
            <code xmlns:soap11Env="http://schemas.xmlsoap.org/soap/envelope/" value="soap11Env:Server"/>
            <reason value="Not Authorized"/>
            <role/>
        </makefault>
        <respond/>
    </case>
    <default/>
</switch>
</sequence> 
```

org.wso2.security.HttpBasicAuthOpMediator (wso2-esb 4.9.0) 的代码

```
package org.wso2.security;

import java.util.HashMap;
import java.util.Map;

import org.apache.commons.codec.binary.Base64;
import org.apache.log4j.Logger;
import org.apache.synapse.MessageContext;
import org.apache.synapse.core.axis2.Axis2MessageContext;
import org.apache.synapse.mediators.AbstractMediator;
import org.wso2.carbon.context.CarbonContext;
import org.wso2.carbon.user.api.UserStoreException;

public class HttpBasicAuthOpMediator extends AbstractMediator {

private static final Logger LOGGER = Logger.getLogger(HttpBasicAuthOpMediator.class);

/* (non-Javadoc)
 * @see org.apache.synapse.Mediator#mediate(org.apache.synapse.MessageContext)
 */
public boolean mediate(MessageContext msgctx) {

    boolean isOK = true;

    try {

        //trazearDatos(msgctx);
        org.apache.axis2.context.MessageContext axis2MessageContext = ((Axis2MessageContext) msgctx)
                .getAxis2MessageContext();
        Map<String,String> mHeaders = (Map<String,String>)axis2MessageContext.getProperty("TRANSPORT_HEADERS");

        // 1 - Validacion de cabeceras de seguridad
        String securityHeader = mHeaders.get("Authorization");
        if ( securityHeader==null || securityHeader.trim().length()<7 ) {
            throw new RuntimeException ("Request sin cabecera de Autorizacion");
        }

        // 2 - Validacion de usuario-contrasenya
        String user = validarUsuario(securityHeader);

        // 3 - validacion de operacion asociada a un rol
        if (msgctx.getProperty("SECURITY_OPERATION")!=null && msgctx.getProperty("SECURITY_OPERATION").toString().equalsIgnoreCase("1")) {
            validarOperacion(user,  mHeaders.get("SOAPAction"), msgctx);
        }

        // todo ha ido bien, esta autorizado
        msgctx.setProperty("isAuthorized", "1");

    } catch (Exception e) {
        LOGGER.info("ERROR VALIDACION USUARIO ..." + e.getMessage() );
        //isOK = false;
    }

    return isOK;
}

/**
 * Comprueba que el usuario tiene los roles asociados a la operacion.
 * Si el usuario no tiene los roles, lanza un runtimeExcpetion
 * @param operacion, que se obtiene del soapAction de la cabecera http
 * @param messageContext 
 */
private void validarOperacion(String user, String operacion, MessageContext messageContext) {

    operacion = operacion.replaceAll("\"", "");
    operacion = operacion.replaceAll("'", "");
    //obtener los roles asociados a la operacion
    if ( messageContext.getProperty("SECURITY_OPERATION_" + operacion)!= null ) {
        boolean existeRol = false;
        try {
            String[] rolesOperation =  messageContext.getProperty("SECURITY_OPERATION_" + operacion).toString().split(",");
            Map<String,String> mRolesUser = toMap( CarbonContext.getThreadLocalCarbonContext().getUserRealm().getUserStoreManager().getRoleListOfUser(user) );

            for (String rol : rolesOperation) {
                if (mRolesUser.containsKey(rol)) {
                    existeRol = true;
                    break;
                }
            }
            if (!existeRol) {
                throw new RuntimeException("Usuario sin role para ejecutar operacion");
            }
        } catch (Exception e) {
            throw new RuntimeException("ValidaRoleOperacion:" + e.getMessage() );
        }
    }

}

/**
 * Valida si la cabecera contiene un usuario-contrsenya valido en wso2.
 * Si no lo encuentra lanza un RuntimeExpception.
 * @param cabecera http-header que contiene el usuario-contrsenya en base64.
 */
private String validarUsuario(String cabecera) {

    String credentials = cabecera.substring(6).trim();
    String decodedCredentials = new String(new Base64().decode(credentials.getBytes()));
    String userName = decodedCredentials.split(":")[0];
    String password = decodedCredentials.split(":")[1];

    //CarbonContext ctx = CarbonContext.getCurrentContext();
    CarbonContext ctx = CarbonContext.getThreadLocalCarbonContext();

    try {
        if ( !ctx.getUserRealm().getUserStoreManager().authenticate(userName, password) )  {
            throw new RuntimeException("Usuario-contrasenya incorrecto");
        }
    } catch (UserStoreException e) {
        throw new RuntimeException("UserStoreException:" + e.getMessage() );
    }
    return userName;
}

public void trazearDatos(MessageContext msgctx ) {

    try {

    System.out.println("....INICIO_TRAZEO DATOS...............");
    // CABECERAS HTTP para pbtener operacion, user-password. Es un Map<String, String>
    if ( msgctx.getProperty("TRANSPORT_HEADERS") != null ) {
        Map<String,String> mHeaders = (Map<String,String>)msgctx.getProperty("TRANSPORT_HEADERS");
        for (String key:mHeaders.keySet() ) {
            System.out.println("HEADER_HTTP..." + key + "==" + mHeaders.get(key) );
        }
    } else {
        System.out.println("Es nulo TRANSJPPORT_HEADER, casteamos");
        org.apache.axis2.context.MessageContext axis2MessageContext = ((Axis2MessageContext) msgctx)
                .getAxis2MessageContext();
        Map<String,String> mHeaders = (Map<String,String>)axis2MessageContext.getProperty("TRANSPORT_HEADERS");
        for (String key:mHeaders.keySet() ) {
            System.out.println("(cast) HEADER_HTTP..." + key + "==" + mHeaders.get(key) );
        }
    }

    // PROPERTIES DEL MESSAGE_CONTEXT
    String keyMC;
    for (Object keyObject : msgctx.getPropertyKeySet() ) {
        keyMC = (String)keyObject;
        System.out.println("PROPERTIES_CONTEXT..." + keyMC + "==" + msgctx.getProperty(keyMC));
    }

    // pintamos los roles que tiene asignado el usuario
    CarbonContext carbonctx = CarbonContext.getThreadLocalCarbonContext();

    String[] roles = carbonctx.getUserRealm().getUserStoreManager().getRoleNames();
    for(String role:roles) {
        System.out.println("ROLE_WSO2..." + role);
    }
    System.out.println("....FIN_TRAZEO DATOS...............");

    } catch (Exception e) {
        LOGGER.debug("ERROR TRAZEANDO DATOS VALIDACION USER:" + e.getMessage() );
    }

}

private Map<String,String> toMap(String[] array) {
    Map<String,String> mapa = new HashMap<String,String>();
    if ( array!=null) {
        for (String val : array) {
            mapa.put(val, val);
        }
    }
    return mapa;
} 
```

}

# javascript - 查找最小和最大日期

> ID：12390933
> 
> 赞同：2
> 
> 时间：2012-09-12T14:51:24.250
> 
> 标签：javascript, date, datetime, max, minimum

有一个数组：

```
var a = new Array(); 
```

它包含这样的日期条目：'2012-09-12 09:20'等

我需要使用 javascript 找到最小和最大日期。此代码不适用于时间值。

```
var minT = Math.min.apply(Math, a);
var maxT = Math.max.apply(Math, a); 
```

如何在javascript中解决这个问题？这似乎很复杂，因为我对这种语言不是很有经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:59:19.527

如果您的数组包含`Date`对象，那么这应该可以工作。如果它只包含类似的字符串`'2012-09-12 09:20'`，那么您可以对它们进行排序，并获取第一个和最后一个元素。

```
a.sort(function(a, b){
    return Date.parse(a) - Date.parse(b);
});

var maxT = a[a.length-1];
var minT = a[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:59:16.187

[`Math.min`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min)/[`max`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)只比较数字，不比较字符串。不要使用它们来表示日期，而是使用[`Date`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)- 它们将通过其内部时间戳编号进行比较。尽管如此，max/min 将返回该内部数字，因此您需要将其转换回 a `Date`（请参阅[Min/Max of dates in an array?](https://stackoverflow.com/questions/7143399)）：

但是，如果您想使用字符串或不能使用重新创建的日期，则需要手动运行数组 - 使用 for 循环或仅限 ES5.1 的迭代器方法[`.reduce()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
var min = datestrings.reduce(function(min, cur) {
    return cur < min ? cur : min;
});

// is equivalent to
var min = datestrings[0];
for (var i=1; i<datestrings.length; i++)
    if (datestrings[i] < min)
        min = datestrings[i]; 
```

如果您的代码不需要高效，您也可以对数组进行排序并获取第一个和最后一个值。默认的字母数字排序将为您的日期格式执行此操作，所以这非常简单：

```
datestrings.sort();
var min = datestrings[0],
    max = datestrings[datestrings.lengh-1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:57:10.880

这应该这样做：

```
var maxT=new Date(Math.max.apply(null,a));
var minT=new Date(Math.min.apply(null,a)); 
```

如果您必须使用字符串，您可以定义一个函数：

```
function maxDate(data){
    var max = '';
    for(var i=0; i<data.length; i++)
        if(data[i]>max)
            max=data[i];
    return max;
} 
```

进而：

```
var maxT=maxDate(a); 
```

**免责声明：**第二种方法仅在所有日期字符串格式相同的情况下才有效，如果您的数组中有不同格式的日期，您将无法使用此功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:57:34.937

试试这个：

```
var maxDate=new Date(Math.max.apply(null,dates));
var minDate=new Date(Math.min.apply(null,dates)); 
```

我在较早的[问题上找到了它](https://stackoverflow.com/questions/7143399/min-max-of-dates-in-an-array)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:57:46.913

数组是否填充了 Date 对象？如果是这样，请使用它们进行比较，并使用许多已知算法之一对它们进行排序。

如果没有，请使用 Date 对象重新创建数组，每个对象一个，然后按照我上面所说的对数组进行排序。

# php - 发送多封电子邮件并设置了重写规则

> ID：12390938
> 
> 赞同：0
> 
> 时间：2012-09-12T14:51:41.423
> 
> 标签：php, mod-rewrite

我的 .htaccess 文件中有以下重写规则

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?$1 [L,QSA]

</IfModule> 
```

在 index.php 文件中，我通过 PHP 邮件功能向自己发送了一封电子邮件。

```
<?php
$body = "<html>";
$body .= "<body>";
$body .= $_SERVER['REMOTE_ADDR'];
$body .= "</body>";
$body .= "</html>";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers .= 'From: XXX@domain.com' . "\r\n";

mail('XXX@mail.com', 'IP TEST', $body, $headers, "-fXXX@domain.com");
?> 
```

当我在网络浏览器[http://sub.domain.com](http://sub.domain.com)中访问 URL 时，有两封电子邮件发送给我。

当我访问[http://sub.domain.com/index.php时也是如此](http://sub.domain.com/index.php)

当我在 .htaccess 文件中注释掉所有内容时，只发送一封电子邮件。

我不明白！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:01:35.080

规则中的语法错误：
来自：`RewriteCond %{REQUEST_URI} !=/favicon.ico`
需要：`RewriteCond %{REQUEST_URI} !^/favicon.ico$`

`Network`还要在选项卡中检查所有请求的文件中的萤火虫。它可以帮助调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:19:37.667

如果这是您根目录下的默认文档，则 favicon 请求仍将发送至 index.php。它未能通过 RewriteCond 并成为标准请求。尝试为它返回 404。

```
RewriteEngine on

RewriteBase /

RewriteRule ^favicon.ico$ - [R=404,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L,QSA] 
```

# c# - 访问另一个程序集的隔离存储

> ID：12390945
> 
> 赞同：4
> 
> 时间：2012-09-12T14:52:12.687
> 
> 标签：c#, winforms, isolatedstorage

我的 WinForms 应用程序通过程序集名称将各种设置存储在用户隔离存储中，并且程序集是强命名的。据我了解，隔离是在程序集版本的主要部分完成的，因此将程序集版本从 2.0 更改为 2.n 并没有导致使用不同的隔离存储文件。

但是，我们即将将我们的程序集版本从 2.x 升级到 3.0，这意味着将使用一个新的隔离存储存储。我希望能够将设置从 2.x 迁移到 3。

有没有办法访问另一个程序集的隔离存储。我已经尝试过这些方面的东西：

```
var thisAssembly = Assembly.GetCallingAssembly();
var thisAssemblyName = thisAssembly.GetName();
var publicKey = thisAssemblyName.GetPublicKey();

var blob = new StrongNamePublicKeyBlob(publicKey);
var previousStrongName = new StrongName(blob, "appName", new Version(2, 7, 0, 0));

var previousVersionEvidence = new Evidence();
previousVersionEvidence.AddAssembly("appName");
previousVersionEvidence.AddAssembly(new Version(2, 7, 0, 0));
previousVersionEvidence.AddAssembly(previousStrongName);

var scope = IsolatedStorageScope.Assembly | IsolatedStorageScope.User;
var container = IsolatedStorageFile.GetStore(scope, previousVersionEvidence, null, previousVersionEvidence, null); 
```

新应用程序使用相同的强名称密钥进行签名。我还尝试将以下属性添加到新程序集中：

```
[assembly:IsolatedStorageFilePermission(SecurityAction.RequestMinimum, Unrestricted=true, UsageAllowed=IsolatedStorageContainment.UnrestrictedIsolatedStorage)] 
```

但是，当我调用 GetStore 时，我得到 System.Security.Policy.PolicyException：无法获取执行权限。

# c# - AssemblyInfo.cs 中必须具备什么？

> ID：12390958
> 
> 赞同：7
> 
> 时间：2012-09-12T14:52:49.743
> 
> 标签：c#, attributes, .net-assembly

默认的 AssemblyInfo.cs 如下所示：

```
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("Foobar")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("Foobar")]
[assembly: AssemblyCopyright("Copyright ©  2012")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("e8cd5d7d-5fba-4fe1-a753-f0cc6e052bf2")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

什么是真正必要的？例如，如果我不需要，我可以删除 Guid 和 ComVisible，或者 AssemblyTrademark，因为它只是空的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T14:54:46.067

这只是元数据——这些都不是*必需*的。

`ComVisible`并且`Guid`仅在您与程序集进行 COM 互操作时才需要。其他属性最终作为 DLL 上的元数据（通过`Version`Windows 资源管理器中文件属性对话框的选项卡可见）。

您可以删除该文件，您的应用程序将编译得很好，尽管它没有元数据并且不会是 COM 可见的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T15:03:15.613

真正必要的不是任何属性。但建议使用它们！

```
[assembly: AssemblyVersion("1.0.0.0")] 
```

AssemblyVersion 为程序集提供一个版本，并从 CLR 中用于标识程序集 (StrongName)。AssemblyFileVersion 只是 FileDialog 上的一个属性。

```
[assembly: AssemblyInformationalVersion("1.0.0.0")] 
```

你可以，但有任何你喜欢的其他版本信息。另一个非常好的属性如下：

```
[assembly: SuppressIldasm] 
```

在 ildasm 中打开程序集以查看 IL 代码是禁止的。

关于程序集属性还有很多要写的。您可以查看 MSDN 以获取更多信息。

# asp.net - 在用户控制中使用回发 的 Asp.net 输出缓存替换

> ID：12390959
> 
> 赞同：0
> 
> 时间：2012-09-12T14:52:50.007
> 
> 标签：asp.net, postback, outputcache, substitution

我们有一个站点，所有页面都被输出缓存，即缓存在 aspx 级别，VaryByParam="*"。现在有一个要求来做一个盖洛普控件，即一个小的“这个站点如何为你工作？” 然后当用户单击答案时，会显示结果。

Gallup 实现为添加到母版页的用户控件，因此可以将 Gallups 添加到在 cms 中创建了 Gallup 的任何页面。问题是输出缓存自然会缓存所有点击，因此当用户没有 2 票时，他会看到在对该替代方案进行第一次投票后计算的结果。

现在我正在尝试使用缓存替换。我在用户控件曾经所在的位置添加了一个 asp:Substition 标记，动态加载控件并呈现它（使用这种方法[http://coderwall.com/p/4ajzqq](http://coderwall.com/p/4ajzqq)）。问题是投票触发的回发永远不会被触发。显然，替代控件执行的方法是在页面生命周期之外加载或为时已晚。

有任何想法吗？

问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:39:52.823

我通过跳过替换控件解决了这个问题，只是像往常一样使用用户控件，所以盖洛普/问题视图被缓存了输出。然后在我添加的答案选项的点击处理程序中， `Response.Cache.SetNoServerCaching();` 它从输出缓存中排除了结果视图，因此它被更新了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T19:50:23.747

也可以使用 VaryByCustom 在 Global.asax 中使用 Response.Cache.SetNoServerCaching()。它只需要在 Global.asax 中检测页面是否为回发。[这](https://digitalrumpus.wordpress.com/2015/06/12/use-asp-net-output-caching-safely-with-post-back/)是一个代码示例。

# python - 调用 __unicode__ 方法

> ID：12390962
> 
> 赞同：0
> 
> 时间：2012-09-12T14:53:01.663
> 
> 标签：python, django

python的新手，并试图用来`__unicode_`呈现字符串表示。该代码是 Django 模型的一部分。如何编写`__unicode__`MyType 以便在模板中将其表示形式输出为`123 - 123 South ....`

```
class UsAddress(models.Model):
    #other fields
    zip = us_models.USPostalCodeField()
    country = models.CharField(max_length=2)
    phone = us_models.PhoneNumberField()

    def __unicode__(self):
        return  self.zip + self.country + self.phone

class MyType(models.Model):
    code = models.IntegerField()
    address = UsAddress

    def __unicode__(self):
        return str(self.code) + " - " + unicode(self.address) #self.address.__unicode__() 
```

输出：

```
 <MyType: 219 - <class 'web.models.UsAddress'>> 
```

## 编辑

至少在我的情况下，问题是我没有为这种关系建模。所以我将它添加到 UsAddress。

```
mt = models.ForeignKey(MyType) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:59:33.700

试试这个：

```
class MyType(models.Model):
    code = models.IntegerField()
    address = UsAddress

    def __unicode__(self):
        return u'%s - %s' % (self.code, self.address) 
```

这是[unicode](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#unicode)方法。

然后，您可以像这样在模板中使用它：

```
<p>My object: {{ mytype_obj }}</p> 
```

输出将是：

> 我的对象：123 - 123 South ....

# embedded - 如何构建像 Raspberry Pi 这样的单板计算机来运行 OS？

> ID：12390964
> 
> 赞同：4
> 
> 时间：2012-09-12T14:53:05.703
> 
> 标签：embedded, arm, embedded-linux, microprocessors

我的问题是：如何构建像 Raspberry Pi 这样的单板计算机来运行操作系统？

用户ARM微处理器和debian arm os，可以使用USB等。

像树莓派和其他单板计算机

我搜索但找不到任何帮助我！:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T19:51:05.753

你一无所获的原因可能是因为这是一项专业任务，由在专业知识、设备、工具和资金方面拥有适当资源的公司承担。

能够运行诸如 Linux 等操作系统的高端微处理器使用高引脚密度的表面贴装封装，如 BGA 或 TQFP，这些（尤其是 BGA）需要专门的设备来制造，并且不能可靠或实际地手工组装。引脚数和密度需要使用多层板，这些又需要专业制造。

如果您想要自己的电路板，您必须做的是设计您的电路板，采购组件，然后由合同电子装配厂制造。短期和一次性的成本可能是购买 COTS 开发或应用板的成本的几倍。只有当您最终制造出能够大批量销售的产品时，它才具有成本效益。正是这些数量使 RPi 如此便宜（直到最近才由中国制造）。

即使您设计并构建了自己的电路板，这本身也需要专业知识和技能。此类处理器上的总线速度需要非常特殊的布局，以保持信号完整性和时序并避免 EMC 问题。合适的原理图捕获和电路板布局软件的成本也可能令人望而却步，毫无疑问，有一些功能相当强大的开源工具 - 但您必须找到一个能够生成您的制造商可以用来设置其机器的输出的工具。

一些引脚数少的低端 8 位微控制器适用于手工焊接甚至 DIP 插座，使用面包板或原型板，但这不是您所追求的。

* * *

**[更多想法于 2012 年 9 月 14 日添加]**

这可能只有在以下一项或多项为真时才值得这样做：

*   您的目标是获得电路板设计、制造和培养方面的经验，作为学术或职业发展活动，并且您拥有必要的财务资源。

*   您设想高产量，其中规模经济使其比 COTS 板更便宜。

*   您对 COTS 板不支持的特定功能或外形有产品要求。

*   您的产品要求受到限制，如果针对这些需求量身定制且没有冗余功能的定制板，在足够数量的情况下可能具有成本效益。

请注意，COTS 板有两种类型：旨在集成到更大系统或产品中的应用模块，以及往往具有广泛的外围设备、开关、指示器和连接选项的开发板，并且通常是供您自己使用的原型设计区域。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-05T18:43:10.080

我知道这是一个老问题，但我一直在研究同一件事，可能出于不同的原因，现在它出现在谷歌搜索的顶部，提供了比它提供的更多不问甚至不研究它的理由答案。

有关从头开始构建 linux 运行板所需的概述，此链接非常有用：

[http://hforsten.com/making-embedded-linux-computer.html](http://hforsten.com/making-embedded-linux-computer.html)

它详细说明：

*   硬件方面的最低要求（ARM 处理器、NAND 闪存等）
*   设计电路板的复杂性
*   在板上对新芯片进行编程以包含引导加载程序，然后将它们指向 linux 内核以使芯片引导的过程。

无论 OP 是否希望追求这些挑战中的每一个或只是其中的一些，了解这些挑战是有用的。

这些不会是全部，添加显示器、图形和其他硬件和接口不在其中，但这是一个开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-10T02:19:33.393

单板电脑（SBC）预计会比普通的爱好板承受更多的负载，因此它在PCB和组件方面的结构略显复杂。您应该准备好使用 BGA 封装。SBC 中的几乎所有处理器都是 BGA（无 DIP/QAFP）。[这](http://hforsten.com/making-embedded-linux-computer.html)是我最近遇到的最好的博客文章。它的设计和制造非常好，在 ARM 处理器上运行 Linux。作者在设计和记录过程方面确实做得很好。我希望它可以帮助您了解 SBC 的硬件和软件方面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-11T19:08:37.077

很多答案令人沮丧。**但是，我想说你可以做到，因为我已经用 imx233 做到了**。这并不容易，它不是一个周末项目。我的项目链接是[MyIMX233](https://github.com/samarjit/MyIMX233)。

*   我花了大约4-5个月
*   它并没有花费我太多，我用的是一个小的细尖烙铁。
*   困难的部分是学习设计PCB。
*   下一个任务是找到一家精度足够高、原型价格足够高的 PCB 制造商。
*   下一个任务是采购组件。
*   你可能没有做对，我在第三次迭代时得到了正确的 PCB。之后，我能够反复生产 3 块以上的板，所有这些都运行良好。

PCB 设计 - 我使用了开源 KiCAD。您需要注意在 RAM 和处理器总线以及其他一些高速总线之间进行阻抗匹配。我设法在具有 5mil/5mil 走线空间的 2 层板中做到这一点。

组件采购 - 我通过 mouser 和 element14 获得了一次 imx233 LQFP。RAM - 64MB tssop。

焊接 - 我可以说这里很容易搞砸，但关键是耐心。并且注意不要使用煎锅和焊锡膏进行回流焊接。我真的像这样炸了我的前 2 个处理器。即使是移动维修店的热风焊接也不够好。

引导加载图像 - 我在这里没有太多机会，只是使用了 olimex 的 Archlinux 图像。

如果你想跳过 RAM 和处理器之间的电路设计麻烦，跳过 imx233 并选择 Allwinner V3S。在 2017/2018 年，这将是最简单的方法。

*底线是我的职业是软件工程师，如果我能做到，那么你也能做到。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T09:53:33.493

为什么不使用 FPGA 板？Zynq 的一些东西，比如[Zybo 板](http://www.xilinx.com/products/boards-and-kits/1-4azfte.html)或 Altera 的[DE0-Nano SoCKit](http://www.terasic.com.tw/cgi-bin/page/archive.pl?Language=English&CategoryNo=167&No=941)。

您已经拥有了 ARM 内核、内存等……以及添加您错过的逻辑的可能性。

# c# - 矩形和平行四边形的矩阵

> ID：12390968
> 
> 赞同：0
> 
> 时间：2012-09-12T14:53:20.080
> 
> 标签：c#, wpf, math

System.Drawing.Drawing2D.Matrix 有一个非常方便的构造函数

```
public Matrix(RectangleF rect, PointF[] plgpts) 
```

基本上你可以给出一个矩形和一个变换矩形的平行四边形，然后你得到相应的变换。就我而言，这非常有帮助。

不幸的是，我需要双精度矩阵。有谁知道我如何从矩形和平行四边形计算 System.Windows.Media.Matrix ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:51:06.487

这涉及到一些数学：

您需要计算 2 个碱基之间的转换矩阵。

首先，计算 Rectangle 的基向量，然后计算平行四边形的基向量。

然后，您可以使用例如高斯消元法来计算变换矩阵。

[http://en.wikipedia.org/wiki/Change_of_basis](http://en.wikipedia.org/wiki/Change_of_basis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:00:37.347

布莱克的答案是正确的，但是它可以更容易计算，因为你有一个简单的矩形。

您寻找一个 3x3 矩阵，它具有三个列向量 c1、c2 和 c3。c1 是 (1,0,0) 的图像，c2 是 (0,1,0) 的图像，c3 是 (0,0,1) 的图像。

(0,0,1) 是原点。您可以将其放置在矩形的左下角。所以 c3 是平行四边形的左下角。

(1,0,0) 是 x 轴的方向，长度为 1。因此，c1 是平行四边形的右下角和左下角的差向量除以矩形的宽度。

等于 (0,1,0)。因此，c2 是平行四边形左上角和左下角的差向量除以矩形的高度。

我应该补充一点，您必须为 c1 和 c2 添加 0 作为第三个组件，为 c3 添加 1。

# c# - 为什么 List 和 IEnumerable 有两个完全不同的 Reverse 版本？

> ID：12390971
> 
> 赞同：34
> 
> 时间：2012-09-12T14:53:28.037
> 
> 标签：c#, linq, list, ienumerable, reverse

对于`List`对象，我们有一个名为[Reverse()](http://msdn.microsoft.com/en-us/library/b0axc2h2.aspx)的方法。
它颠倒了“就地”列表的顺序，它不返回任何东西。

对于该对象，我们有一个名为[Reverse()](http://msdn.microsoft.com/en-us/library/bb358497.aspx)`IEnumerable`的扩展方法。 它返回另一个 IEnumerable。

我需要以相反的顺序遍历一个列表，所以我不能直接使用第二种方法，因为我得到一个列表，我不想反转它，只是向后迭代。

所以我可以这样做：

```
for(int i = list.Count - 1; i >=0; i--) 
```

或者

```
foreach(var item in list.AsEnumerable().Reverse()) 
```

我发现它比如果我有一个 IEnumerable 可读性差，就这样做

```
foreach(var item in list.Reverse()) 
```

我不明白为什么这两种方法以这种方式实现，名称相同。这很烦人和令人困惑。

为什么没有一个名为 BackwardsIterator() 的扩展来代替适用于所有 IEnumerable 的 Reverse()？

我对这个选择的历史原因非常感兴趣，而不是“如何做”的东西！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-12T14:57:26.040

值得注意的是，列表方法比扩展方法要老很多。命名可能保持不变，`Reverse`似乎比`BackwardsIterator`.

如果您想绕过列表版本并转到扩展方法，则需要将列表视为`IEnumerable<T>`：

```
var numbers = new List<int>();
numbers.Reverse(); // hits list
(numbers as IEnumerable<int>).Reverse(); // hits extension 
```

或者将扩展方法作为静态方法调用：

```
Enumerable.Reverse(numbers); 
```

请注意，该`Enumerable`版本将需要完全迭代底层可枚举，以便开始反向迭代它。如果您打算对同一个可枚举项多次执行此操作，请考虑永久颠倒顺序并正常迭代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T14:57:34.113

那就写你自己的 BackwardsIterator 吧！

```
public static IEnumerable BackwardsIterator(this List lst)
{
    for(int i = lst.Count - 1; i >=0; i--)
    {
        yield return lst[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-24T08:33:54.283

存在`List<T>.Reverse`早于存在`IEnumerable<T>.Reverse`。他们被命名相同的原因是......无能。这是一个可怕的烂摊子；显然，Linq`IEnumerable<T>`函数应该被赋予一个不同的名称……例如，`Backwards`……因为它们具有完全不同的语义。事实上，它为程序员设置了一个可怕的陷阱——有人可能将`list`from的类型更改`List<T>`为，例如 ，`Collection<T>`然后突然 `list.Reverse();`，而不是原地反转`list`，只是返回一个`IEnumerable<T>`被丢弃的。不能夸大 MS 给这些方法取同名的能力是多么的无能。

为避免该问题，您可以定义自己的扩展方法

```
public static IEnumerable<T> Backwards<T>(this IEnumerable<T> source) => source.Reverse(); 
```

您甚至可以添加一个特殊情况来高效处理可索引列表：

```
public static IEnumerable<T> Backwards<T>(this IEnumerable<T> source) =>
    source is IList<T> list ? Backwards<T>(list) : source.Reverse();

public static IEnumerable<T> Backwards<T>(this IList<T> list)
{
    for (int x = list.Count; --x >= 0;)
        yield return list[x];
} 
```

# jquery - 检查后缀，如果不存在则添加

> ID：12390975
> 
> 赞同：0
> 
> 时间：2012-09-12T14:53:38.397
> 
> 标签：jquery, string, search

我想检查一个 .aspx 后缀，如果它不存在（它是一个 Umbraco 应用程序，所以可能没有它）如果它不存在，我想将它添加到我从中获取的路径中

假设这将是 php 中 strpos 的 jquery 等价物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:59:13.320

这应该工作

```
if (!string.match(/\.aspx$/)) {
  string+='.aspx';
} 
```

# osgi - 在 JBoss 7 的 OSGi 包中注入 HttpService

> ID：12390976
> 
> 赞同：1
> 
> 时间：2012-09-12T14:53:40.057
> 
> 标签：osgi, jboss7.x

我有一个 JBoss 7.1.2 应用程序服务器启动并运行，现在我想在其中部署一个注册 servlet 的 OSGi 包。（类似于 Hello World，但通过 servlet）

可能可以通过 WAB 将其存档，但与在 OSGi 中一样，我认为它也应该在一个简单的非 wab 包中工作。

我使用 Activator 创建了一个捆绑包，如下所示：

```
snip..
    public void start(BundleContext bundleContext) throws Exception {
        ServiceReference<?> httpServiceReference = bundleContext.getServiceReference(HttpService.class.getName());
        System.out.println("ref: " + httpServiceReference);

        HttpService httpService = (HttpService) context.getService(httpServiceReference);
        System.out.println(httpService.getClass().getName());

        try {
            httpService.registerServlet("testservlet", new MyServlet() , null, null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

部署并启动捆绑包后，httpServiceReference 为`null`. 我觉得这很奇怪，因为当我查看 felix Web 控制台时，实际上**有**HtttpService 可用。（来自 pax-web）

有谁知道为什么我的参考在这里可能是空的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:32:16.817

我认为您正在犯经典的 OSGi 错误。在该`start(BundleContext context)`方法中，您将获得对 HttpService 的引用，假设它已经启动。OSGi 容器以某种顺序启动包。如果您的应用程序包在注册的包之前启动，`HttpService`您将获得`null`参考。我怀疑这就是正在发生的事情。改用你可能会更好`ServiceTracker`。

```
public void start(BundleContext bundleContext) throws Exception {       
    ServiceTracker httpServiceTracker = new ServiceTracker(bundleContext, HttpService.class, new ServiceTrackerCustomizer() {

        @Override
        public Object addingService(ServiceReference srf) {
            HttpService httpService = bundleContext.getService(srf);
              try {
                    httpService.registerServlet("testservlet", new MyServlet() , null, null);
                } catch (Exception e) {
                    e.printStackTrace();
                }

        }

        @Override
        public void modifiedService(ServiceReference arg0, Object arg1) {

        }

        @Override
        public void removedService(ServiceReference arg0, Object arg1) {

        }

    });

    httpServiceTracker.open();
} 
```

# asp.net - 在 ASP.NET MVC 中混合输出缓存和动态范围请求

> ID：12390977
> 
> 赞同：0
> 
> 时间：2012-09-12T14:53:41.903
> 
> 标签：asp.net, asp.net-mvc, jplayer, lib.web.mvc

我正在使用[`RangeFilePathResult`](http://tpeczek.blogspot.ca/2011/10/range-requests-in-aspnet-mvc.html)该类从 MVC 控制器提供 mp3 文件。

动作定义如下：

```
[CacheFilter]
[OutputCache(CacheProfile = "Mp3Cache")]
public RangeFilePathResult Mp3Completed(string f)
{
    FileInfo info = new FileInfo(string.Format("C:\\test\\{0}.mp3", f));
    return new RangeFilePathResult("audio/mpeg", info.FullName, info.LastWriteTimeUtc, info.Length);
} 
```

并且缓存策略如下：

```
<caching>
  <outputCacheSettings>
    <outputCacheProfiles>
      <add name="Mp3Cache" duration="3600" varyByParam="f" location="Any" />
    </outputCacheProfiles>
  </outputCacheSettings>
</caching> 
```

为什么这可以正常工作？似乎您需要明确`varyByHeader`确保范围请求与输出缓存一起使用？我要解决的问题是 iOS 上的 jPlayer 将无法显示 MP3 文件的持续时间，并且在使用传统 FilePathResult 服务时会呈现 NaN - 它在此实现下工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:22:07.960

这里最重要的是对范围请求的响应不是典型的**200 OK**而是**206 Partial Content**。

如果是**206 Partial Content** ，则必须满足几个附加条件：

*   请求必须包含一个`Range`标头字段，指示所需范围，并且可能包含一个`If-Range`标头字段以使请求有条件
*   响应必须包含一个`Content-Range`标头字段，指示包含在此响应中的范围，或者包含每个部分的`multipart/byteranges` `Content-Type`包含`Content-Range`字段。
*   响应必须包含`ETag`和/或`Content-Location`（如果标头将在对同一请求的 200 响应中发送）
*   响应必须包括`Date`

现在每个支持 HTTP 协议的缓存机制（如果`location="Any"`是浏览器、代理服务器和您的托管 IIS）都必须知道**206 Partial Content**不同于**200 OK**并相应地处理它。您可以在下面找到缓存**206 Partial Content**响应的最重要规则：

*   `ETag`如果或`Last-Modified`标头不完全匹配，则缓存不得将 206 响应与其他先前缓存的内容组合
*   不支持`Range`and`Content-Range`标头的缓存不能缓存 206 响应

总结一下，您不需要使用`varyByHeader`，因为每个遵循 HTTP 协议的缓存都知道，在**206 Partial Content**的情况下，`Range`和`Content-Range`标头是变体的一部分。

# r - R：外部函数调用中的 NA/NaN/Inf (arg 1)

> ID：12390978
> 
> 赞同：8
> 
> 时间：2012-09-12T14:53:46.260
> 
> 标签：r, function, na

当我使用名为 HydroMe 的包来拟合模型时，某些数据组将返回以下错误：

```
Error in qr.default(.swts * attr(rhs, "gradient")) : 
 NA/NaN/Inf in foreign function call (arg 1) 
```

实际上，数据组中没有缺失值。代码如下：

```
library(HydroMe)
fortst<-read.csv(file="F:/fortst.csv")
van.lis <-nlsList(y~SSvan(x,Thr, Ths, alp, scal)|Sample,data=fortst) 
```

示例数据可以从这里下载：

```
http://www.fileden.com/files/2012/9/13/3346981/fortst.csv 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:40:16.053

变量`Thr`、`Ths`、`alp`和`scal`不在您的数据框中或`fortst.csv`. 因此，当它们在`y~SSvan(x,Thr, Ths, alp, scal)|Sample`公式中被提及时，它们是 NA。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T18:24:43.883

此错误的一个原因可能是数据框中定义的变量与其实际数据类型不同。例如，您为“日期”变量定义“字符”。

# ajax - Primefaces blockUI 在 ajax 更新后停止工作

> ID：12390985
> 
> 赞同：11
> 
> 时间：2012-09-12T14:54:09.487
> 
> 标签：ajax, jsf-2, primefaces, blockui

我正在尝试创建一个在忙碌时显示 blockUI 的数据表，而且我基本上是成功的。现在，每当我单击两个命令按钮中的任何一个、通过单击标题对数据表进行排序或翻阅数据表时，它都会变灰并显示“正在加载...”。你可以在下面看到它的代码。

问题是，在我使用了其中一个命令按钮（在被阻止的元素上运行 ajax 更新）之后，后续操作不会触发 blockUI（直到我刷新页面）。例如：

*   加载页面
*   单击数据表标题 - blockUI 出现，直到表完成排序
*   单击数据表页面导航按钮之一 - blockUI 出现，直到页面加载
*   **单击其中一个**命令按钮 - blockUI 出现，直到按钮的 actionListener 完成
*   单击数据表标题 - 表排序，但 blockUI 不出现。
*   单击数据表页面导航按钮之一 - 页面加载，但 blockUI 未出现
*   单击其中一个命令按钮 - actionListener 运行并更新表，但不出现 blockUI
*   **重新加载页面**- 一切再次正常

将 commandButtons 的 update="" 属性更改为 ajax="false" 会导致排序/分页始终显示 blockUI，但 commandButtons 永远不会显示 blockUI。

有任何想法吗？

```
<div class="buttonDiv">
    <p:commandButton ... update="resultsPanel" id="submitButton" ... />
    ...
    <p:commandButton ... update="resultsPanel" id="resetScenarioButton" ... />
</div>
<p:panel header="Results Grid" id="resultsPanel">
    ...
    <p:dataTable ... id="VAResults" ... >
        ...
    </p:dataTable>
    ....
</p:panel>
<p:blockUI block="resultsPanel" trigger="submitButton, resetScenarioButton, VAResults">
    Loading...
</p:blockUI> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T16:42:53.143

该`trigger`属性在指定元素上绑定 jQuery 侦听器。但是，如果您更新一个元素，绑定就会丢失。我不知道它是否有效，但您可以尝试`<p:blockUI`将`resultsPanel`. 我怀疑当您更新面板时，blockUI 也会更新，从而将侦听器重新绑定到数据表。

```
<p:panel header="Results Grid" id="resultsPanel">
    ...
    <p:dataTable ... id="VAResults" ... >
        ...
    </p:dataTable>
    ....
    <p:blockUI block="resultsPanel" trigger="submitButton, resetScenarioButton, VAResults">
    Loading...
</p:blockUI>
</p:panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:34:27.580

我遇到了同样的问题和类似的场景：

```
<p:dataTable>
    ....
    <p:ajax event="rowSelect" update="buttons" global="false" onstart="blockMessageButtons.show();" oncomplete="blockMessageButtons.hide();"/>
</p:dataTable>

<p:outputPanel layout="block" id="buttons">
    <!-- content to be blocked -->
</p:outputPanel>

<p:blockUI block="buttons" widgetVar="blockMessageButtons"/> 
```

问题是面板*按钮*既被 ajax 更新，又被 blockUI 阻止。我不得不把它分成两部分：

```
<p:dataTable>
    ....
    <p:ajax event="rowSelect" update="buttons-content" global="false" onstart="blockMessageButtons.show();" oncomplete="blockMessageButtons.hide();"/>
</p:dataTable>

<p:outputPanel layout="block" id="buttons-container">
    <p:outputPanel layout="block" id="buttons-content">
        <!-- content to be blocked -->
    </p:outputPanel>
</p:outputPanel>

<p:blockUI block="buttons-container" widgetVar="blockMessageButtons"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T10:35:38.723

@siebz0r 已经解释了为什么 blockUI 在组件更新时停止工作。

我在模板中为所有其他页面使用了一个 blockUI 元素，因此不想包含更多 blockUI 元素。

如果 blockUI 元素也被更新，则不需要在将要更新的组件内移动 blockUI。

这是一个例子：

```
<p:panel id="surroundingPanel">

    ...

    <p:commandButton value="ButtonName" styleClass="blockUi"
        action="actionToBeExecuted" update=":surroundingPanel :blockUiBinding" />
</p:panel>

<p:outputPanel id="blockUiBinding">
    <p:blockUI block=":elementToBeBlocked" trigger="@(.blockUi)">
        Loading ...
    </p:blockUI>
</p:outputPanel> 
```

该元素`blockUiBinding`可以位于任何位置，只要它可以更新即可。它包装了 blockUI 元素，因为 blockUI 至少生成两个不同的 div。因此，当包装元素更新时，blockUI 也会更新。

# vim - 在插入模式下按 ESC 时 Tmux 崩溃，如何解决？

> ID：12390989
> 
> 赞同：3
> 
> 时间：2012-09-12T14:54:14.820
> 
> 标签：vim, tmux, tmuxinator

我使用 tmux 1.7 和 iTerm2。

当我运行 Vim 并进入插入模式然后按 Esc 键时，我的 tmux 会话崩溃并显示以下消息：

```
[lost server]
% 
```

这一定是 tmux 的问题，因为当我在没有 vimrc 的情况下运行 Vim 时，它也发生了。我也清除了 tmux.conf 文件但没有成功。

如何处理该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:54:28.020

我不得不将 tmux 降级到 1.6 版。现在没有出现这个问题。

# c# - 我应该将对象的自定义属性放在哪里？在 POJO/POCO 类还是服务层？

> ID：12390991
> 
> 赞同：2
> 
> 时间：2012-09-12T14:54:20.103
> 
> 标签：c#, java, n-tier-architecture, business-logic

这个问题是针对我正在处理的 Java 项目的，但也适用于 C#。

无论如何，所以我有一个 MVC Web 项目。在其中，我的数据有三个“层”。

```
com.example.model.dao
com.example.model.entities
com.example.model.service 
```

我`dao`的低级数据库类也是如此。诸如 Hibernate 包装器之类的东西 `entities`是我的 POJO 并且`service`是我的业务逻辑。

现在让我们说其中一个 POJO 是`User`. 在 User 中，它映射到一个名为`users`. 该表（和 POJO）有两个字段，`firstname`和`lastname`. 好的，所以我想在某个地方放置一个名为**getFullName**的方法，它只是连接名字和姓氏。

那么这个方法应该去哪里呢？我想把它放在 POJO 本身。但由于有时我们使用工具从数据库生成 POJO，因此可能会覆盖自定义逻辑。这是一个业务流程吗？

我应该把它放在我的服务实现中吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:59:01.357

在 c# 中，我将使用部分类（它解决了“生成的类”问题：当然，您生成的 POCO 需要是部分的）

```
public partial class User {
   public string GetFullName() {
     return string.Format("{0} {1}", FirstName, LastName);
   }
} 
```

在 Java 中不起作用的解决方案......因为部分类不存在！

因此，这两种语言的“最合适”解决方案可能并不相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:00:20.103

您应该在业务层中实现自定义业务逻辑。在这种情况下，当您生成 POJO 时，它应该在您的服务层中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:58:49.533

我通常将这种类型的方法放在实体本身中，但既然你说它可以被覆盖，你可以为实体使用一个帮助类。

```
class UserHelper {
  String getFullName() {
    ...
  } 
  ... more methods
} 
```

我不认为获取一个人的全名是一个业务流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:13:14.363

我们在项目中遇到了同样的问题，所以我们这样做了：

```
@MappedSuperclass
public class UserDTO {
   // this is the class which can be regenerated by code generator, and only contains database fields
}

@Entity
public class User extends UserDTO {
   // this is the class containing more business methods, methods do things that are not part of the database columns
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T15:23:12.920

和这里的许多开发人员一样，我对设计模式、最佳实践和标准非常严格，但是......

...规则总是有例外，或者更准确地说是指导方针。

开发人员通常将这种功能放在逻辑层，但在某些情况下，可以将其添加到 Plain Old (Java / C# / ...) 对象中。

伪代码：

```
class DataAccessLayerPerson
{
  public FirstName
  {
    get; set;
  }

  public MiddleName
  {
    get; set;
  }

  public LastName
  {
    get; set;
  }

  public getFullName()
  {
     return FirstName + MiddleName + LastName;
  }
}

class BusinessLogicLayerPerson
{
  public FirstName
  {
    get; set;
  }

  public MiddleName
  {
    get; set;
  }

  public LastName
  {
    get; set;
  }

  public FullName
  {
    get; set;
  }
} 
```

一个类似的常见情况是，当一个表有一个在概念上用作布尔值的字段，但在编程上用作 char(1) 存储“f”或“t”，或者作为整数或位，我必须在编程中使用它们作为布尔值。

因此，我在数据访问层使用了一些逻辑，并将这些字段作为布尔值进行读写。

干杯。

# .net - 在 ASP.NET MVC 控制器上注入我自己的自定义依赖项的正确方法是什么？

> ID：12390994
> 
> 赞同：0
> 
> 时间：2012-09-12T14:54:21.453
> 
> 标签：.net, asp.net-mvc, dependency-injection

`Initialize`我有一个架构，其中所有默认依赖项都通过and自动注入`OnActionExecuting`。这一切都像一个魅力，因为在运行时（不是测试），默认的控制器激活器将调用这些方法并传入正确的具体对象。美好的。

当我有一个无法在`Initialize`and`OnActionExecuting`方法中注入的自定义依赖项时，我的问题就开始了。

示例：

```
public class MyController
{
    private IEmailSender emailSender = null;
} 
```

好吧..在运行时`emailSender`将为空，除非我将其设置为其他值。在这种情况下，我最终会得到一些不太好的东西，比如：

```
public class MyController
{
    private IEmailSender emailSender = null;
    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
         if(this.emailSender == null)
              this.emailSender = new SomeConcreteEmailSender();
    }
} 
```

丑陋的。我不想做这种“如果为空，则实例化”的事情。

一种更复杂的注入`IEmailSender`方式是创建我自己的`ControllerActivator`，它只会在运行时（而不是测试）中调用，并且会`IEmailSender`自动注入而无需执行此“if”。但我不想`ControllerActivator`为每个需要注入的控制器创建自定义。

话虽如此，对于 ASP.NET 控制器的自定义依赖注入，什么被认为是标准的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:55:45.717

> 话虽如此，对于 ASP.NET 控制器的自定义依赖注入，什么被认为是标准的？

构造函数注入：

```
public class MyController: Controller
{
    private readonly IEmailSender _emailSender;

    public MyController(IEmailSender emailSender)
    {
        _emailSender = emailSender;
    }

    ... actions using the _emailSender here ...
} 
```

对于不希望使用现有依赖注入框架的人（例如，他们在一家技术上不识字的白痴决定应该使用哪些框架的公司工作），这被认为是*穷人的依赖注入*（请不要使用）使用什么不使用）或者懒得编写自定义依赖解析器：

```
public class MyController: Controller
{
    private readonly IEmailSender _emailSender;

    public MyController(): this(new SomeConcreteEmailSender())
    {
    }

    public MyController(IEmailSender emailSender)
    {
        _emailSender = emailSender;
    }

    ... actions using the _emailSender here ...
} 
```

# python - 在一个字符串中多次匹配一个字符类

> ID：12390997
> 
> 赞同：0
> 
> 时间：2012-09-12T14:54:43.870
> 
> 标签：python, regex, string

我正在编写一个简短的脚本来清理文件夹和文件名以上传到 SharePoint。由于 SharePoint 很挑剔，并且除了简单的不允许字符之外还有一些文件名规则（例如，不允许多个连续的句点），因此似乎正则表达式是要走的路，而不是简单地替换单个字符。然而，一种似乎不起作用的表达式是：

```
[/<>*?|:"~#%&{}\\]+ 
```

作为一个简单的字符类匹配，我希望它可以正常工作，并且它似乎在记事本++中这样做。我的期望是这样的字符串

```
St\r/|ng 
```

使用上述正则表达式将匹配 \、/ 和 |。然而，无论我做什么，我只能让字符串匹配第一个反斜杠，或者它遇到的那个类中的任何字符的第一个。这是通过 Python re 库完成的。有谁知道这里的问题是什么？导入 os、sys、shutil、re

```
def cleanPath(path):
    #Compiling regex...
    multi_dot = re.compile(r"[\.]{2,}")
    start_dot = re.compile(r"^[\.]")
    end_dot = re.compile(r"[\.]$")
    disallowed_chars = re.compile(r'[/<>*?|:"~#%&{}\\]+')
    dis1 = re.compile(r'\.files$')
    dis2 = re.compile(r'_files$')
    dis3 = re.compile(r'-Dateien$')
    dis4 = re.compile(r'_fichiers$')
    dis5 = re.compile(r'_bestanden$')
    dis5 = re.compile(r'_file$')
    dis6 = re.compile(r'_archivos$')
    dis7 = re.compile(r'-filer$')
    dis8 = re.compile(r'_tiedostot$')
    dis9 = re.compile(r'_pliki$')
    dis10 = re.compile(r'_soubory$')
    dis11 = re.compile(r'_elemei$')
    dis12 = re.compile(r'_ficheiros$')
    dis13 = re.compile(r'_arquivos$')
    dis14 = re.compile(r'_dosyalar$')
    dis15 = re.compile(r'_datoteke$')
    dis16 = re.compile(r'_fitxers$')
    dis17 = re.compile(r'_failid$')
    dis18 = re.compile(r'_fails$')
    dis19 = re.compile(r'_bylos$')
    dis20 = re.compile(r'_fajlovi$')
    dis21 = re.compile(r'_fitxategiak$')
    regxlist = [multi_dot,start_dot,end_dot,disallowed_chars,dis1,dis2,dis3,dis4,dis5,dis5,dis6,dis7,dis8,dis9,dis10,dis11,dis12,dis13,dis14,dis15,dis16,dis17,dis18,dis19,dis20,dis21]
    print("************************************\n\n"+path+"\n\n************************************\n")
    for x in regxlist:
        match = x.search(path)
        if match:
            print("\n")
            print("MATCHED")
            print(match.group())

    print("___________________________________________________________________________")
    return path

#testlist of conditions that should be found, some OK, some bad
testlist = ["string","str....ing","str..ing","str.ing",".string","string.",".string.","$tring",r"st\r\ing","st/r/ing",r"st\r/|ng","/str<i>ng","str.filesing","string.files"]
testlist_ans = ["OK","Match ....","Match ..","OK","Match .","Match .","Match . .","OK",r"Match \ ","Match /",r"Match \/|","Match / < >","OK","Match .files"]
count = 0
for i in testlist:
    print(testlist_ans[count])
    count = count + 1

    cleanPath(i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:00:03.207

```
re.sub(pattern,new_txt,subject) #replace all instinces of pattern with new_txt
re.findall(pattern,subject) #find all instances 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:05:26.337

你使用什么 Python re 命令？

你应该使用：[re.findall](http://docs.python.org/library/re.html#re.findall)

# .htaccess - 启用 suphp 后上传脚本不起作用

> ID：12390999
> 
> 赞同：0
> 
> 时间：2012-09-12T14:54:46.217
> 
> 标签：.htaccess, upload, php, suphp

我的 php 脚本在我的 centos 中上传文件 - apache 服务器工作正常。今天我在服务器中启用了 suphp，之后该脚本没有上传任何文件。我之前在 .htaccess 中使用过“php_flag register_globals on”。但我从“.htaccess”中删除了该行，以防止出现 500 服务器错误。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:32:12.737

经过长时间的搜索和测试，我自己找到了解决方案。刚刚创建了一个php.ini文件并添加了一行：register_global = on

并删除了 .htaccess 中的所有 php 标志。现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-09T07:16:51.720

如您所见，参数必须在**php.ini**文件中，并且必须指示 suPHP 读取该文件。此答案中的更多信息：[php.ini not being read (Debian / ISP Config)](https://stackoverflow.com/questions/9370192/php-ini-not-being-read-debian-isp-config)

**但;** 如果您的上传脚本需要`register_globals`启用，则可能是写得不好或过时了。您应该尽量避免使用`register_globals`，因为它会构成安全威胁。更多相关信息：[PHP 中的 register_globals 是什么？](https://stackoverflow.com/questions/3593210/what-are-register-globals-in-php)