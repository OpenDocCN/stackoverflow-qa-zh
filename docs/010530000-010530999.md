# StackOverflow 问答 10530000-10530999

# php - 如何在服务器上安全地存储文件

> ID：10530001
> 
> 赞同：8
> 
> 时间：2012-05-10T08:16:36.147
> 
> 标签：php, mysql, database, image

**我在做什么：**

我基本上需要创建一个由用 PHP 编写的登录页面保护的网站，一旦登录，您就有一个读取整数的搜索栏，并且数据被发送到一个 PHP 脚本，该脚本检索一个以数字为名称的图像。

（我将在此服务器上存储几千张图片以供搜索 - 库存图片）

-

**我需要帮助：**

根据我的研究，我了解到由于速度和效率低下，您“不”使用 MySQL 等数据库来存储实际图像。如果您不将其存储在数据库中，而是按照建议将其保留在服务器的文件系统中，如果有人在地址栏中键入直接 URL，它不会将它们带到我服务器上的文件中吗？

你如何防止这种情况。如果没有成功通过登录页面，我不想在我的服务器上查看任何文件。

感谢您的帮助，任何见解或建议将不胜感激。这对我来说很重要，因为将来会添加更复杂的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T08:33:31.730

通过 PHP（或任何其他脚本）处理文件下载的推荐方法是使用所谓的“X-Sendfile”响应标头。

PHP 脚本处理身份验证，一旦验证，它将设置一些响应标头和一个“X-Sendfile”，告诉 Web 服务器发送文件；脚本结束，Web 服务器接管。

请参阅此处以获取一个简单的示例：

[http://www.jasny.net/articles/how-i-php-x-sendfile/](http://www.jasny.net/articles/how-i-php-x-sendfile/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:12:41.973

这对于您的情况来说可能有点过头了，但这就是我正在考虑在我正在开发的应用程序上这样做的方式：

首先，有4个服务器，一个web服务器，一个中间件服务器，一个数据服务器

当有人向 Web 服务器发送请求时，Web 服务器会连接到中间件服务器并请求文件，并传递用户凭据（如会话密钥）和请求的文件。中间件连接到数据库并验证会话和用户对该文件的权限。如果他们有权访问，它将返回错误或二进制数据。如果你在 web 服务器和中间件服务器上都关闭了输出缓冲，你可以从中间件服务器发送 100k 块到 web 服务器，web 服务器将在接收第二块时输出第一个块。

文件本身可以通过 ftp、sftp 或其他文件共享方式存储在数据库服务器上

它绝对不如使用 x-sendfile 高效，但是如果有人能够 pwn 您的 Web 服务器，他们仍然无法访问该文件 - 在上述情况下，他们会。Web 服务器是唯一的公共服务器，因此其余服务器应连接在专用网络上。

您还可以将数据发送到将加密/解密实际文件数据的加密服务器

如果有人对如何改进这一点有任何想法，我很感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:26:38.310

你可以这样做 像这样在php中编写资源服务

```
image.php?requestid=..... 
```

在该文件中，您获取 requestid 并从数据库中读取实际链接（本地链接），读取图像文件然后将数据输出到浏览器

```
$id = $_GET['requestid'];
$link = get_local_link_from_id($id);  // return /images/file1.png......
$data = file_get_contents($link);
header('Content-Type', 'image/png');
echo $data; 
```

但我认为你不应该那样做，只是随机重命名文件并创建很多......

# x86 - TARGET_HAS_PRECISE_SMC 是什么意思？

> ID：10530005
> 
> 赞同：0
> 
> 时间：2012-05-10T08:16:55.537
> 
> 标签：x86, qemu, self-modifying

我只看到 x86 定义了 TARGET_HAS_PRECISE_SMC (target-i386/cpu.h)，评论说，

```
/* support for self modifying code even if the modified instruction is
   close to the modifying instruction */
#define TARGET_HAS_PRECISE_SMC 
```

我想知道它的含义并想了解更多信息，但谷歌搜索无济于事。你介意对此有所了解吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:30:03.703

IIRC，如果修改的代码在同一页或缓存块中，则有些处理器不会保持缓存一致性，并且会使处理器执行原始指令而不是新指令。

具有这种行为的处理器会有这个*undefined*。

# javascript - 如何通过 JQuery 删除 div 上应用的 css？

> ID：10530009
> 
> 赞同：1
> 
> 时间：2012-05-10T08:17:04.943
> 
> 标签：javascript, jquery, css

在我的应用程序开始时，我添加了一个加载页面。为了将此加载页面视为我的应用程序的第一页，我`display: none`在第二页的全局 div 中添加了一个。

一秒钟后，我想`display: none`从我的全局 div 中删除这个 css，而不删除这个 div 的整个 css 类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:18:14.913

只需使用[`.css`](http://api.jquery.com/css/)将显示属性设置为您想要的任何内容：

```
$("#myDiv").css("display", "block"); 
```

或者：

```
$("#myDiv").show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:18:56.730

```
$("#divId").css("display", ""); 
```

或者：

```
$("#divId").css("display", "block"); 
```

或者：

```
$("#divId").css("display", "what you want"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:18:30.557

假设您的 div 作为 id，您可以简单地这样做：

```
$('#your_div_id').css('display', 'block'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T08:19:11.120

你可以这样做：

```
$('#div').show(); 
```

或者，如果您想显式更改 CSS 值：

```
$('#div').css('display', 'block'); 
```

# windows-phone-7 - 对齐应用程序栏按钮

> ID：10530010
> 
> 赞同：2
> 
> 时间：2012-05-10T08:17:06.537
> 
> 标签：windows-phone-7

是否可以在 Windows Phone 7 上对齐/重新排列应用程序栏按钮？

![在此处输入图像描述](../Images/df1930e94ac3b8e486176256674ec068.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:45:57.283

我不认为这是你应该想要的。

应用程序栏是一个在所有 Windows Phone 应用程序中外观和感觉都相同的控件。因此，用户在使用您的应用程序时拥有更好的体验，因为他们熟悉您在应用程序中使用的所有控件。

您应该遵循很多这样的约定，这会使您的应用程序变得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:23:42.597

简短的回答：不，除非您开发自己的控件来模仿其行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T07:31:20.667

创建一个全透明的按钮图像，然后添加该按钮并在您想要的间隙处禁用它。

编辑添加：这为您提供了您在建议的布局中显示的空白空间，但您不能做更多的事情。

# linux - 为 fedora 编译和构建 cobbler 源代码 rpm

> ID：10530011
> 
> 赞同：1
> 
> 时间：2012-05-10T08:17:09.560
> 
> 标签：linux, build, fedora, rpm, rpmbuild

最近我读了这篇文章[http://howto.basjes.nl/linux/doing-pxe-without-dhcp-control](http://howto.basjes.nl/linux/doing-pxe-without-dhcp-control)并想尝试使用 cobbler。

因为我需要最新的 cobbler 才能在我的 Fedora 上运行，而且我需要从源代码编译和安装，而不是使用`yum install`. 我是 linux 编程的初学者，想了解更多。

我[对 Github 上的 cobbler 文档 wiki 进行了研究，它显示了关于“](https://github.com/cobbler/cobbler/wiki/Download%20Instructions) **Fedora 的源 RPM 构建说明**”的非常简单的指南

```
Install python-setuptools and python-devel from yum
rpmbuild --rebuild cobbler*.src.rpm
install the RPM, which is now built in /usr/src/redhat/RPMS/noarch
satisfy any dependencies you have by using yum and the stock Fedora repos 
```

`rpmbuild --rebuild cobbler*.src.rpm`我从 Github 下载了源代码，并在“cobbler”文件夹下执行时收到错误消息。说`"there is no such cobbler*.src.rpm"`存在。

我通过运行“make install”再试一次，它似乎工作，因为我看到有输出但我找不到输出文件？

谁能告诉我如何在 Fedora 16 上编译和安装 cobbler 源代码？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T22:04:43.683

Makefile 中内置了一个用于构建 rpm 的目标。因此，假设您安装了所有必需的工具，只需在源代码树的根目录中发出此命令

```
make rpms 
```

应该将一组 rpm 构建到源根目录中的 rpm-build 子目录中。

PS 我通常使用 CentOS，我需要添加 EPEL 存储库来获取 PyYAML rpm（需要构建 cobbler rpm）

# google-app-engine - 您将如何从 appengine servlet 提供 Google 云存储文件？

> ID：10530013
> 
> 赞同：2
> 
> 时间：2012-05-10T08:17:16.423
> 
> 标签：google-app-engine, jakarta-ee, google-cloud-storage

用户上传了一些文件，我存储在 Google Cloud Storage 中。现在用户回来了，想从我的应用程序显示的列表中下载文件。他/她单击链接并调用 servlet。该 servlet 背后的代码是什么样的？另外，我不想公开这些对象。这是我的样子：有没有更简单的方法来做到这一点？谢谢。

```
public class ServeGSObject extends HttpServlet {
    FileService fileService = FileServiceFactory.getFileService();
    public void doGet(HttpServletRequest request, HttpServletResponse response){
        String fullFilePath = request.getParameter("objectPath");
        AppEngineFile file = new AppEngineFile(fullFilePath);
        try {
            FileReadChannel channel = fileService.openReadChannel(file, false);
            BufferedInputStream bis = new BufferedInputStream(Channels.newInputStream(channel));
            BufferedOutputStream bos = new BufferedOutputStream(response.getOutputStream());
            response.setHeader("Content-Disposition", "inline;filename=\"" + file.getNamePart() + "");
            int b = 0;
            while((b = bis.read()) != -1) {
                bos.write(b);
            }
            bos.flush();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:36:26.390

您可以使用生成`blobKey`与您的 Google Storage 文件对应的临时文件[`blobstoreService.createGsBlobKey`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#createGsBlobKey%28java.lang.String%29)

[并使用https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)像常规 blobstore 文件一样提供它[`blobstoreService.serve(blobKey, res)`](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)

# php - 没有结果，网络服务

> ID：10530015
> 
> 赞同：1
> 
> 时间：2012-05-10T08:17:21.357
> 
> 标签：php, web-services, zend-framework, soap

我需要开发一个简单的 SOAP 服务，它只允许客户端调用它的方法并获取一个字符串值，我在 PHP ZEND 框架上有以下文件，一旦我转到这个地址 >>> [http://localhost/Zend/MyProject /library/client.php](http://localhost/Zend/MyProject/library/client.php) 结果是 >> ID:<<< 我正在使用 MAMP ，请帮我整理一下，谢谢

```
<?php
class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {

        $this->getHelper('viewRenderer')->setNoRender(true);

          // initialize server and set URI
          $server = new Zend_Soap_Server(null, 
            array('uri' => 'http://localhost/Zend/MyProject/public/index'));

          // set SOAP service class
          $server->setClass('Example_Manager');

         $server->setObject(new Example_Manager());

          // handle request
          $server->handle();
          //$request = $server ->getLastRequest();
    }
}

?php
class Example_Manager {

    /**
     * Returns list of all products in database
     *
     * @return array
     */
    public function getProducts($name) 
    {
      return “Product" .$name //should be without semicolon
    }

}
?>

<?php
// load Zend libraries
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Soap_Client');
try {
// initialize SOAP client
$options = array(
  'location' => 'http://localhost/Zend/MyProject/public/index/',
  'uri'      => 'http://localhost/Zend/MyProject/public/index/',
);

  $client = new Zend_Soap_Client(null, $options);  
  $id = $client->getProducts("Here");
  print_r($id);
  echo "ID:" .$id. "<<<";

} catch (SoapFault $s) {
  die('ERROR: [' . $s->faultcode . '] ' . $s->faultstring);
} catch (Exception $e) {
  die('ERROR: ' . $e->getMessage());
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:36:08.823

getProducts 方法中存在语法错误，缺少分号。要快速检查您的 sytnax 是否正确，您可以使用 php -l

# batch-file - 想要创建 .bat 文件来自动运行 ccleaner

> ID：10530018
> 
> 赞同：0
> 
> 时间：2012-05-10T08:17:24.217
> 
> 标签：batch-file

我想做计划任务来清理我的电脑。所以我创建了 .bat 文件来运行程序 .ie
`start /d "C:\Programfile\cclener" ccleaner.exe

从这个 cclener.exe 可以打开，但问题是打开一个选项卡后，ccleaner 中有一个“干净”的选项卡，需要手动干预才能单击该选项卡。我想创建程序以及上述程序以自动运行 cleane，并且在一小时的时间间隔后，其他程序将运行，即`taskkill /IM ccleaner.exe`关闭该程序。

程序会是这样的

```
start /d "C:\Programfile\cclener" cclener.exe
.........
...........
..........
(In the above "..." program need to write to click the TAB "clean")  
..........  
(Then program to maintain a time gap for 1 hour)  
taskkill /IM ccleaner.exe 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:24:30.133

您可能想阅读以下内容：[http ://www.piriform.com/docs/ccleaner/advanced-usage/command-line-parameters](http://www.piriform.com/docs/ccleaner/advanced-usage/command-line-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:25:50.010

我认为 ccleaner 具有自动启动清理的参数（这在此类程序上很正常，请尝试搜索此内容） ***编辑**：查看 Edwins 帖子 :-)

我认为不可能通过批处理文件“单击”程序中的选项卡和按钮。您可以使用 AutoIt 脚本实现此目的：

[http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/)

例如，您可以在此处移动鼠标并单击某个按钮。要终止任务，我会在任务属性中使用 win7（如果您使用的是 win7）的任务管理中的自动终止功能，您可以说如果任务未成功完成，则应在何时终止该任务。

希望这可以帮助。最好的问候，没有人。

# opencv - 使用 OpenCV 使用 haar 人脸检测时，有没有办法测量置信度？

> ID：10530023
> 
> 赞同：9
> 
> 时间：2012-05-10T08:17:40.230
> 
> 标签：opencv, face-detection, face-recognition

我使用 OpenCVs HAAR 级联人脸检测开发了一个人脸检测应用程序。该算法工作正常，但每隔一段时间它会在墙上或其他不是面孔的东西上找到图案。
我想对怀疑为面孔的对象进行额外检查，但我只想对我不相信它们是面孔的对象进行检查。有没有办法为 HAAR 级联人脸检测检测到的人脸获得“置信度”级别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-07T09:01:04.157

OpenCV 通过 CascadeClassifier 类的函数“detectMultiScale”中的参数“weights”提供置信度，您需要将标志“outputRejectLevels”设置为 true

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:26:12.047

OpenCV 实际上为任何特定对象找到了多个结果，每个检测到的区域在很大程度上相互重叠；然后将它们组合在一起并形成“邻居数”计数。这个计数就是所谓的信心。

执行对象检测时，其中一个参数是返回命中之前的最小邻居。增加它会减少误报，但也会减少可能检测到的人脸的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T19:39:28.733

为什么不对同一张图像运行多个 haar 级联（训练不同），看看它们是否产生相似的结果？让他们投票，就像它一样。因此，如果只有一个级联找到给定的面孔而其他级联没有，那将使您对给定的面孔失去信心。

我能够实时在 iPhone 视频源上同时运行 3 个级联，因此在许多正常情况下性能应该不是问题。更多信息： [http ://rwoodley.org/?p=417](http://rwoodley.org/?p=417)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T16:21:06.093

不是您问题的直接答案，但这可能有助于减少错误检测。

您可以通过调整 MinNeibhbours、CV_HAAR_FIND_BIGGEST_OBJECT 和 Size 值来减少错误检测。

int MinNeighbours = 7;

face_cascade.detectMultiScale(frame_gray, faces, 1.1, MinNeighbours, CV_HAAR_FIND_BIGGEST_OBJECT, Size(60, 60));

# android - 在我的位置附近生成随机位置

> ID：10530031
> 
> 赞同：1
> 
> 时间：2012-05-10T08:18:18.590
> 
> 标签：android, geolocation, range

我想在我的位置周围的圆圈内生成随机纬度/经度对。

目前我已经实现了一个位置监听器，每次我得到一个新位置时，我都想在我附近绘制随机位置。

我能够计算 2 个已经存在的位置之间的距离，并知道它是否在我的范围内：

```
public List<Location> filter(Location current, List<Location> locations, int radius) {
    List<Location> results = new ArrayList<Location>();
    for (Location loc : locations) {
        if (current.distanceTo(loc) <= radius) {
            results.add(loc);
        }
    }
    return results;
} 
```

但实际上，我找不到如何在我的范围内生成位置。

这里有什么帮助吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:33:59.223

自己随机生成坐标怎么样？使用当前位置，您可以对这些数字设置限制。使用当前坐标和半径，您可以获得随机数的跨度。随机新 X 的跨度 = 旧 X +- 半径

我建议生成一个介于 -1 和 1 之间的随机数，然后将它与半径相乘。这意味着生成坐标的最大值是半径（最小值是-radius）。将此值添加到当前位置坐标可为您提供介于 Old X +- 半径之间的值。概括：

**（-1和1之间的随机数）*半径+（旧x）=旧x半径内的新x。**

随机数的示例代码（OBS！从 0 到 1）：

```
import java.util.Random;

Random r = new Random();
double zeroToOne = r.nextInt(1001) / 1000 
```

这是关于随机的 java 文档：[随机](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T08:33:59.117

这似乎是一件好事。如果你想看看：[http ://android-er.blogspot.com/2011/02/get-list-of-address-from-location-using.html](http://android-er.blogspot.com/2011/02/get-list-of-address-from-location-using.html)

我想，通常它一直在工作，但我无法尝试在设备上设置它

# r - 带有黄土线的散点图，黄土在给定区域中不显示线

> ID：10530036
> 
> 赞同：1
> 
> 时间：2012-05-10T08:18:53.633
> 
> 标签：r, region, scatter, loess

我在这里绘制染色体的长度值

![在此处输入图像描述](../Images/472e48cdb0689b4cabaa7d0874c0a426.png)

没有点的中间区域没有数据，不应该得到黄土线。如何修改我的代码以阻止该区域上的黄土线？数据是连续的，但我可以添加行以使用一些特殊值标记空白区域或添加带有标签的列？但是如何在命令中使用它？

我当前的命令：

```
library(IDPmisc)

# plot settings (edit here)
spanv<-0.05
pointcol1="#E69F00"
pointcol2="#56B4E9"
pointcol3="#009E73"
points=20
linecol="green"
xlabs=paste(onechr, " position", " (loess-span=", spanv, ")", sep="")

data1<-NaRV.omit(data[,c(2,7)]) # keep only x and y for the relevant data 
                                # and clean NA and Inf
ylabs='E / A - ratio'
p1<-ggplot(data1, aes(x=start, y=E.R)) +
ylim(0,5) +
geom_point(shape=points, col=pointcol1, na.rm=T) +
geom_hline(aes(yintercept=1, col=linecol)) +
geom_smooth(method="loess", span=spanv, fullrange=F, se=T, na.rm=T) +
xlab(xlabs) +
ylab(ylabs) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:03:09.690

我会做以下两件事之一：

1.  在`loess()`之外进行拟合`ggplot()`，分别预测两个区域，并将每组预测添加到具有自己`geom_line()`图层的图中。
2.  与上述类似，但这次是在`ggplot()`操作范围内。将两层添加到绘图中，而不是一层，都使用`geom_smooth()`，但重要的是更改`data`提供给每个的参数以仅引用数据的一个或另一部分。

对于后者，可能类似于：

```
....
geom_smooth(data = data[1:n, ], method="loess", span=spanv, fullrange=FALSE, 
            se=TRUE, na.rm=TRUE) +
geom_smooth(data = data[m:k, ], method="loess", span=spanv, fullrange=FALSE, 
            se=TRUE, na.rm=TRUE)
.... 
```

where`n`和`m`and`k`指的是标记第 1 组结束和第 2 组开始和结束的索引，需要您直接定义或提供。

# c# - “总是”捕获鼠标滚轮事件并滚动父？

> ID：10530045
> 
> 赞同：2
> 
> 时间：2012-05-10T08:19:13.400
> 
> 标签：c#, winforms, user-controls, scroll, mousewheel

我有一个 winforms 应用程序，它使用几个 UserControls 填充可滚动区域。我的问题是，只要此应用程序视图可见，是否总是捕获鼠标滚轮滚动？当然，这个应用程序是活跃的焦点。

现在，我必须单击为所有可以滚动的控件显示的滚动条，以使鼠标滚轮滚动工作。我想忽略或跳过这个。我希望能够单击放置在可滚动区域中的这些 UserControls 之一中的文本字段之一，然后如果我通过鼠标滚轮滚动，则此 UserControl 不应该是尝试滚动的那个，但是这个可滚动此 UserControl 与所有其他 UserControl 一起放置的区域（父级）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:54:48.047

`IMessageFilter`以您的主要形式实施：

```
public partial class YourForm : Form, IMessageFilter
{
    // Your code.

    public bool PreFilterMessage ( ref Message m )
    {
        if ( m.Msg == 0x20A )
        {
            NativeMethods.SendMessage ( controlToScroll.Handle , m.Msg , m.WParam , m.LParam );
            return true;
        }
        return false;
    }
} 
```

通过在其构造函数中调用以下内容，将您的表单注册为消息过滤器。

```
Application.AddMessageFilter ( this ); 
```

`SendMessage`具有以下签名：

```
internal class NativeMethods
{
    [DllImport ( "user32.dll" , CharSet = CharSet.Auto )]
    public static extern IntPtr SendMessage ( IntPtr hWnd , Int32 Msg , IntPtr wParam , IntPtr lParam );
} 
```

# html - 直接声明元素的（最小/最大）宽度/高度或使用 100% 并从外部继承

> ID：10530051
> 
> 赞同：0
> 
> 时间：2012-05-10T08:19:44.207
> 
> 标签：html, css, inheritance, height

这个[**小提琴**](http://jsfiddle.net/junior87/qqQyy/)显示了我拥有的标记的一个非常基本的版本。我希望`.module-container`'s 在 230px（最小高度）和 300px（最大高度）之间调整大小。基本上我想知道的是是否设置最小/最大高度`.row`并给出`.module-container`'sa`height: 100%;`或明确地给每个`.module-container`一个（最小/最大）高度以及 100% 的高度，并且包含`.row`只是换行像这样围绕它

```
min-height: 14.375em; /* 230px, 1em=16px */
height: 100%;
max-height: 18.75em; /* 300px, 1em=16px */ 
```

我期望的是 div 在 230px 和 300px 之间增长。但是，当包含`.row`容器没有明确的高度并因此环绕每个容器时，这是否有效`.column`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:33:06.233

将其设置在`.module-container`. 无需设置`height: 100%;`，因为任何`block`关卡元素都会展开以包裹其内部元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:44:50.730

`% height`当其父元素具有高度属性时，块元素可以具有。

`html`, `body`,`div.row`和所有其他父元素都必须设置为`height:100%`或者它自己的高度值。

# jmeter - JMeter 访问日志采样器过滤器

> ID：10530054
> 
> 赞同：0
> 
> 时间：2012-05-10T08:19:55.847
> 
> 标签：jmeter

我正在使用 JMeter 测试 Tomcat 服务器上的真实调用。如何使用访问日志过滤功能过滤呼叫？例如，我不想运行包含参数“system=filter”的 url。

谢谢马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:44:02.070

你有两个选择。

1) 使用诸如 grep/sed/awk 之类的程序去除您想要跳过的调用。
2) 创建自定义 logParser 插件或过滤器。

有关此采样器的更多信息，请参阅[手册](http://jmeter.apache.org/usermanual/component_reference.html#Access_Log_Sampler)，有关创建解析器或过滤器的详细信息，您可能需要使用[邮件列表](http://jmeter.apache.org/mail.html)来获取更多细节。

# java - Eclipse 用正则表达式查找/替换注释行

> ID：10530055
> 
> 赞同：3
> 
> 时间：2012-05-10T08:20:06.140
> 
> 标签：java, regex, eclipse

我有一些包含如下注释的类：

```
...
...
...
/*     */ 
/*     */   public void startApplication()
/*     */   {
/*  57 */     initializeFields();
/*  58 */     this.run = true;
/*  59 */     new Thread(this).start();
/*     */   }
/*     */ 
/*     */   public void stopApplication() {
/*  63 */     this.run = false;
/*     */   }
/*     */ 
/*     */   public void run()
/*     */   {
...
...
... 
```

而且我必须清理`/* */`课堂上的所有字符串。我应该使用哪个正则表达式来使用 Eclipse 的查找/替换工具来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:21:47.903

这是 Jd-GUI，我已经需要相同的正则表达式 :)

```
/\*.*?\*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:25:33.097

点击`CTRL+SPACE`文本框，它会给你正则表达式的建议。[您可以在此讨论](https://stackoverflow.com/questions/1372748/eclipse-regular-expression-search-and-replace)中找到更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:23:05.920

您可以使用: `/\*\s+\d*\s+\*/`，或者如果您还想去掉代码前的空格，假设它是一个选项卡，请使用`/\*\s+\d*\s+\*/\t`. 可以选择将最后一个选项卡更改为特定数量的空格 -`\s+`例如，如果您只使用 ，它将丢失您不想要的缩进！

# visual-studio-2010 - 如何在silverlight的网格上绘制图像？

> ID：10530063
> 
> 赞同：0
> 
> 时间：2012-05-10T08:20:27.493
> 
> 标签：visual-studio-2010, image, grid, silverlight-3.0

我正在使用 Silverlight 3.0 制作应用程序。在该应用程序中，我在网格上绘制波形。现在我想在波形底部重复显示图像。我没有得到我现在必须做的事情？请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:32:10.913

Silverlight 不支持此功能。但是，您可以创建自己的支持平铺的图像控件或使用[ExImage 之](http://www.codeproject.com/Articles/54147/ExImage-A-Silverlight-control-very-similar-to-the)类的东西。其他选项是使您的 Silverlight 主机透明并使用 CSS 作为背景。

# c - 如何在c中使用子字符串函数？

> ID：10530064
> 
> 赞同：7
> 
> 时间：2012-05-10T08:20:34.327
> 
> 标签：c, substring

我有一个字符串，我希望它的子字符串从第 5 个位置到最后一个位置。我应该使用哪个功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T08:22:54.547

如果您不会将原始字符串用于其他任何内容，则可以直接使用`&s[4]`。如果您需要副本，请执行

```
char new_str[STR_SIZE + 1] = {0};
strncpy(new_str, &s[4], STR_SIZE); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T08:25:38.133

您可以使用头文件`memcpy()`中的函数。`string.h`

`memcpy()`在内存块之间复制字节数据，有时称为缓冲区。这个函数不关心被复制的数据类型——它只是进行精确的逐字节复制。函数原型是

```
void *memcpy(void *dest, void *src, size_t count); 
```

参数 dest 和 src 分别指向目标和源内存块。count 指定要复制的字节数。返回值为 dest。

如果两个内存块重叠，该函数可能无法正常运行—— src 中的某些数据可能在被复制之前被覆盖。使用`memmove()`下面讨论的函数来处理重叠的内存块。`memcpy()`将在下面的程序中演示。

您还可以在此处找到这些函数的示例： [http ://www.java-samples.com/showtutorial.php?tutorialid=591](http://www.java-samples.com/showtutorial.php?tutorialid=591)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T08:45:03.243

如果您还知道要从中获取子字符串的字符串中的字符，则可以使用 strstr 函数。它定位子字符串。但是，如果您不知道要从中检索的字符，那么您可以使用 strcpy 或 strncpy 来获取 Eric 提到的字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-22T15:47:37.037

```
void substr(char *s, int a, int b, char *t) 
{
    strncpy(t, s+a, b);
} 
```

最简单但高效的解决方案。声明一些 t char 变量来保存结果，然后只需将 s 作为要操作的字符串传递，a 作为初始偏移量，b 作为要提取的字符串的长度。

```
char t[255]="";
substr(s, a, b, t); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-29T17:53:39.647

`s+4`

这提供了问题中要求的子字符串，而不是子字符串的副本。' `s+4`' 返回字符串 's' 的第 5 个位置的子字符串。这是 C 中的一种有效的原始操作，不使用任何函数调用。

如果应用程序需要制作结果的本地副本，例如，如果结果将被修改：

```
 char substring[strlen(s)-3] ;
    strcpy(substring, s+4) ; 
```

请注意，这需要一个允许可变大小数组的现代 C 编译器。对于非本地副本，使用 malloc 分配子字符串（例如`char *substring = (char *)malloc(strlen(s)-3) ;`），这适用于任何 C 编译器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-29T18:24:16.603

我将解释为什么 C 没有标准的子字符串函数，而不是告诉您如何提取子字符串（其他答案已经完成*）*。

如果 C 确实有一个子字符串函数，它的声明可能看起来像这样：

```
char *substr(const char *instring, size_t pos, size_t len); 
```

这将获取输入 string ，提取从 position 开始`instring`的长度子字符串，并将其作为新字符串返回。`len``pos`

但 64,000 美元的问题是，*它如何返回新字符串*？

它可以为新字符串动态分配空间，但 C 的实用程序函数通常不会这样做。（我想到的唯一例外是`strdup`，它甚至不是标准的 C 函数。）

它可以在其中插入一个 '\0' 字符`instring`，然后返回一个指向 的指针`instring`，但这显然会修改`instring`，这样的函数不应该这样做。（事实上​​，这就是为什么我推测`substr`这里的假设函数会接受一个`const char *`指针。）

所以事实证明，在 C 中，实际上不可能编写一个适当的“实用”子字符串函数，它不进行任何动态内存分配，也不修改原始字符串。

所有这一切都是由于 C 没有一流的字符串类型这一事实造成的。

修改原始字符串是否可以接受完全是调用者的决定。如何为提取的子字符串分配内存完全由调用者决定。`substr`因此，假设函数几乎没有什么可做的了。它只是一些指针运算，将它封装在“substr”函数中可能会很好，但它并没有真正为调用者节省任何工作，所以调用者在决定如何做之后最好自己做指针运算它想要处理那些更难的问题。

如果调用者愿意修改原始字符串，那么这样做很简单：

```
char instring[] = "marshmallow";
int pos = 3, len = 5;
instring[pos + len] = '\0';
char *substr = &instring[pos];
printf("%s\n", substr; 
```

如果调用者想要分配单独的内存，无论是作为数组还是通过调用`malloc`，这也很简单：

```
char *substr = malloc(len + 1);
strncpy(substr, &instring[pos], len);
substr[len] = '0'; 
```

因此，如果 C 有一流的字符串类型，它`substr`的标准库中肯定会有一个函数——但既然没有，那就没有。（相比之下，C++*确实*有一个 first-clss`string`类型，并且它有一个与之配套的`substr`方法。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T08:31:33.950

如果我理解正确，您需要使用一些分隔符，以便将字符串分解为子字符串。例如“one#two#three”分为一二三。如果是这样的话：

```
#include <stdio.h>
#include <string.h>
int main()
{
    char test[] = "one#two#three";
    char* res;
    res = strtok(test, "#");
    while(res) {
        printf("%s\n", res);
        res = strtok(NULL, "#");
    }

    return 0;
} 
```

您使用要标记的字符串调用 strtok() 一次。以下每个调用都应传递 NULL，以便继续使用第一次调用的字符串。另请注意，strtok 可能会修改原始指针，因此如果它是动态分配的，则应在将其传递给 strtok 之前将其保存。

# ms-word - 从 Word 复制到 TextEdit 文档时去除隐藏字符

> ID：10530065
> 
> 赞同：0
> 
> 时间：2012-05-10T08:20:36.613
> 
> 标签：ms-word, newline, textedit

我承认我在这里过得很糟糕。

我有一个读取 txt 文件并上传到数据库的 C 程序。

如果您将数据直接输入到 TextEdit 中，它可以正常工作。如果您在 Microsoft Word 中创建数据并复制它，它就无法正常工作。主要问题是如何`newline`工作，尽管 MySQL 调用也因为隐藏字符而变得混乱。

我一直在搞乱十六进制检查，`\r`但那里有混乱的数据。当我打印一个十六进制转储时，终端输出会做一些可以预见的疯狂事情，比如跳回一行、覆盖已经打印的字符等等。我一直在`isprint(`尝试消除隐藏的角色，但无论如何还是有一些事情发生。

那么...有没有办法将 Word 中的数据“干净”复制到 TextEdit 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:40:11.617

您可以使用十六进制编辑器首先查看文件中存在的额外字符。在此基础上，您可以思考应该存在的东西以及您不想要的任意东西。稍后您还可以尝试在文本编辑中使用一些选项来禁用额外字符。希望这会有所帮助。

# json - 返回 json 序列化的 MAP 来自泽西 RESTFUL 服务

> ID：10530070
> 
> 赞同：0
> 
> 时间：2012-05-10T08:21:06.860
> 
> 标签：json, serialization, annotations, jaxb, jersey

我想返回一个如下所示的 json 答案：

```
{ "key": "value",
  "Key2": "value2",
  "params": {"paramKey1":"ParamValue1",
             "paramKey2":"ParamValue2",
             "paramKeyN":"ParamValueN"
            }
} 
```

其中参数的键和值来自`MAP<String,String>` ie - 要序列化的类应支持未知数量的参数和相应的值。

我试着在我的课上：

```
@XmlRootElement
public class myclass {

private int key;
private int key2;

private Map<String,String> _params;

@XmlElement
public int getKey() {
    return key;
}

@XmlElement
public int getKey2() {
    return key2;
}

@XmlElement
public HashMap<String,String> getParams() {
    return (HashMap<String,String>)_params;
}

} 
```

但它不会渲染参数图，仅：

```
{ "key": "value",
  "Key2": "value2",
  "params": null
} 
```

我认为我需要用其他东西注释 getParams 但我不确定是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:30:50.413

尝试将变量名更改`_params`为`params`。这不符合 JAXB 命名约定，因为我记得并且可能导致错误。

# javascript - Javascript - 如果不在数组中，则添加 - 如果在数组中，则更新数量

> ID：10530073
> 
> 赞同：0
> 
> 时间：2012-05-10T08:21:16.297
> 
> 标签：javascript

下面是我的简单购物车代码，唯一的问题是第一个盒子里的物品可以正常工作，但第二个盒子不行。

[http://itsuite.it.brighton.ac.uk/ols11/cart](http://itsuite.it.brighton.ac.uk/ols11/cart/) - 添加“bumblebee”项目，然后重复并正确计数。现在尝试第二次下拉几次。

Javascript：

```
var ids = []
var names = []
var qtys = []
var prices = []
var total = []

function newcart (id, desc, qty, price)
{
    var lengthofid = ids.length
    var i = 0
    while (i < lengthofid)
    {
        if (id == ids[i])
        {
            qtys[i] = parseInt(qtys[i]) + parseInt(qty)
            prices[i] = parseInt(prices[i]) + parseInt(price)
            i = lengthofid + 1;
        }else{
            ids.push(id)
            names.push(desc)
            qtys.push(qty)
            prices.push(price)
        }
        i++

    }
    if ( i == 0 )
    {
        ids.push(id)
        names.push(desc)
        qtys.push(qty)
        prices.push(price)
    }
    alert(names)
    alert(qtys)
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:37:36.837

您在此页面中有两个表单，并且选择标签具有相同的名称，那么您应该像这样调用该函数

首先在第一个表单 item1 中下拉：
试试这个

```
newcart(item1.prodid.value,item1.desc.value,item1.qty.value,item1.price.value); 
```

首先在第一个表单 item2 中下拉：然后试试这个

```
newcart(item2.prodid.value,item2.desc.value,item2.qty.value,item2.price.value); 
```

desc 和 price 也是如此，我认为不鼓励使用这样的两种形式，尤其是对于 IE 中的兼容性问题，“在我的情况下，形式内的形式”不起作用

# caching - 需要一个可以设置自定义缓存键的 http 代理

> ID：10530083
> 
> 赞同：4
> 
> 时间：2012-05-10T08:21:47.420
> 
> 标签：caching, redirect, squid, http-proxy

我需要设置一个可以为返回的内容设置自定义缓存键的 http 代理。squid2.7 似乎可以使用 storeurl_rewrite_program 特性来做到这一点，但是这个特性还没有移植到 squid3。有没有其他方法可以做到这一点，无论是使用 squid 还是其他一些 http 代理软件？如果该软件还可以与外部服务器合作，对缓存对象进行访问控制，这是一个好处，但并不是立即需要的。

用例是我想缓存经常使用的数据，以便从其他缓慢的存储中快速访问。该存储通过 http 访问到前端，该前端始终返回 302（临时移动）重定向到实际保存数据的冗余磁盘服务器之一。我要缓存的数据文件是公共的、静态的，通常大小为几 GB，因此非常适合缓存。但是，重定向 url 将包含身份验证令牌，因此始终是唯一的，有效地否定了缓存。另一方面，从重定向 url 重建原始 url 是微不足道的，所以如果代理服务器可以做到这一点并将其用于缓存键，那么缓存就会恢复正常运行。

将 storeurl_rewrite_program 功能导入 squid3 在这里被标记为重要：

[http://wiki.squid-cache.org/RoadMap/Squid3](http://wiki.squid-cache.org/RoadMap/Squid3)

但它是否会成为 squid3.3 甚至 squid3.4 还存在很大的不确定性，而 squid2.7 计划随着 squid3.2 的发布而被淘汰。

关于访问控制，squid 似乎应该能够使用 external_acl_type 功能来做到这一点，但是在这个阶段提供对受保护数据的缓存访问并不是非常重要，所以现在我认为这只是顶部的糖。

# android - Android ScrollView检测结束/完成滚动动画

> ID：10530085
> 
> 赞同：1
> 
> 时间：2012-05-10T08:21:51.973
> 
> 标签：android, scrollview

我的问题很简单：我想检测 ScrollView 何时结束滚动动画。

*   我们无权访问 ScrollView 的 Scroller 对象。
*   ScrollView.onScrollChanged 在参数 t 和 oldt 相同时不被调用（在滚动结束时）

我能找到的唯一可行的解​​决方案是下面的那个，它每 100 毫秒检查一次滚动是否结束，这对我来说听起来很可怕。[https://stackoverflow.com/a/10198865/1310343](https://stackoverflow.com/a/10198865/1310343)

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:48:35.190

尝试扩展 ScrollView 类并覆盖 onScrollChanged 方法。那应该行得通。使用“getMaxScrollAmount”方法，您应该能够找到滚动是否完成。

# android - MapView 没有从 ViewPager 中删除？

> ID：10530087
> 
> 赞同：3
> 
> 时间：2012-05-10T08:22:06.533
> 
> 标签：android, android-viewpager

在我的应用程序中，我试图在 ViewPager 中实现地图视图。我在应用程序中有 4 个不同的页面。MapView 在第 4 页。我确实成功加载了地图，但是当我滑回第一页时，必须使用 destroyItem() 方法销毁第四个视图。如果我滑动到第 4 页，它会从第 3 页崩溃，在 logcat 中显示错误：

```
05-10 13:14:50.152: E/AndroidRuntime(620): java.lang.IllegalStateException: You are only allowed to have a single MapView in a MapActivity 
```

我知道 MapActivity 中只有一个地图视图。但我无法解决它 - 任何人都可以帮助我吗？

代码如下：

```
public Object instantiateItem(View collection, int position) {

   LayoutInflater inflater = (LayoutInflater) collection.getContext()
         .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   context = collection.getContext();
   int resId = 0;
   int flag = resId;
   switch (position) {
   case 0:
      resId = R.layout.farleft; // first
      view = inflater.inflate(resId, null);

      break;
   case 1:
      resId = R.layout.left; // second
      view = inflater.inflate(resId, null);

      break;
   case 2:
      resId = R.layout.right; // third
      view = inflater.inflate(resId, null);

      break;
   case 3:
      resId = R.layout.mylocator;
      view = inflater.inflate(resId, null);
      break;

   }
   ((ViewPager) collection).addView(view, 0);

   return view;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {

   ((ViewPager) arg0).removeView((View) arg2);
   Log.d("destroyItem", "" + arg2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:07:42.527

我找到了解决方案。在包含 Map 并由 ViewPager 使用的片段中，放置：

```
private View myView;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    if (this.myView == null){
        this.myView = inflater.inflate(R.layout.my_layout, container, false);
    }
    else if (this.myView.getParent() != null) {
        FrameLayout parentView = (FrameLayout) this.myView.getParent();
        parentView.removeView(this.myView);
    }

    return this.myView;

} 
```

它对我来说很好，告诉我它是否适合你；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:33:19.090

Android View Pager 的一个问题是必须手动完成回收视图。在您的情况下，视图可能尚未被销毁，但在再次实例化视图时会再次创建。您可以保存每个页面的视图，然后在 instanceiteItem 中返回它（如果它尚未被销毁）。

# sql - OR 条件使查询执行缓慢

> ID：10530088
> 
> 赞同：2
> 
> 时间：2012-05-10T08:22:07.203
> 
> 标签：sql, oracle

我正在尝试执行带有`WHERE`子句的查询（在 Oracle SQL 中），如下所示：

```
 SELECT booking_line_id
FROM booking_line
WHERE    (booking_line_id in
  (SELECT sbli.booking_line_id
   FROM search_booking_line_index sbli,
     policy_record pr,
     policy_record_revision prr
   WHERE sbli.attribute_name = 2209
   AND sbli.policy_record_id = pr.policy_record_id
   AND pr.latest_revision_id = prr.policy_record_revision_id
   AND LOWER(prr.broker_reference) LIKE '%123%')); 
```

执行计划：

```
|   0 | SELECT STATEMENT       |                        | 19027 |   334K|   455   (3)| 00:00:03 |
|   1 |  NESTED LOOPS          |                        | 19027 |   334K|   455   (3)| 00:00:03 |
|   2 |   VIEW                 | VW_NSO_1               | 19027 |   241K|   449   (2)| 00:00:03 |
|   3 |    HASH UNIQUE         |                        | 19027 |   798K|            |          |
|*  4 |     HASH JOIN          |                        | 19027 |   798K|   449   (2)| 00:00:03 |
|*  5 |      HASH JOIN         |                        |   464 | 13456 |    31   (4)| 00:00:01 |
|*  6 |       TABLE ACCESS FULL| POLICY_RECORD_REVISION |   464 |  9280 |    21   (0)| 00:00:01 |
|*  7 |       TABLE ACCESS FULL| POLICY_RECORD          |  4067 | 36603 |     9   (0)| 00:00:01 |
|*  8 |      INDEX RANGE SCAN  | SBLI_ATTRIBUTE_CDX     |   166K|  2282K|   416   (1)| 00:00:03 |
|*  9 |   INDEX UNIQUE SCAN    | BOOKING_LINE_PK        |     1 |     5 |     1   (0)| 00:00:01 | 
```

此查询执行速度非常快，并立即返回行。但是，如果我添加`OR`如下条件，查询将挂起（或需要很长时间）：

```
 SELECT booking_line_id
FROM booking_line
WHERE 1=0 or   (booking_line_id in
  (SELECT sbli.booking_line_id
   FROM search_booking_line_index sbli,
     policy_record pr,
     policy_record_revision prr
   WHERE sbli.attribute_name = 2209
   AND sbli.policy_record_id = pr.policy_record_id
   AND pr.latest_revision_id = prr.policy_record_revision_id
   AND LOWER(prr.broker_reference) LIKE '%123%')); 
```

执行计划：

```
|   0 | SELECT STATEMENT               |                           |   166K|   811K|   484   (2)| 00:00:03 |
|*  1 |  FILTER                        |                           |       |       |            |          |
|   2 |   INDEX FAST FULL SCAN         | BOOKING_LINE_PK           |   166K|   811K|    66   (5)| 00:00:01 |
|   3 |   NESTED LOOPS                 |                           |     1 |    43 |   419   (1)| 00:00:03 |
|   4 |    NESTED LOOPS                |                           |     1 |    23 |   418   (1)| 00:00:03 |
|*  5 |     INDEX RANGE SCAN           | SBLI_ATTRIBUTE_CDX        |     1 |    14 |   417   (1)| 00:00:03 |
|*  6 |     TABLE ACCESS BY INDEX ROWID| POLICY_RECORD             |     1 |     9 |     1   (0)| 00:00:01 |
|*  7 |      INDEX UNIQUE SCAN         | POLICY_RECORD_PK          |     1 |       |     1   (0)| 00:00:01 |
|*  8 |    TABLE ACCESS BY INDEX ROWID | POLICY_RECORD_REVISION    |     1 |    20 |     1   (0)| 00:00:01 |
|*  9 |     INDEX UNIQUE SCAN          | POLICY_RECORD_REVISION_PK |     1 |       |     1   (0)| 00:00:01 | 
```

预计这应该与第一个查询花费相同的时间。但令人惊讶的是，它没有。

任何人都可以帮我解释同样的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:05:43.690

至少在 11gR2 中，计划和执行完全相同。这是我的设置：

```
CREATE TABLE table1 AS SELECT * FROM dba_objects WHERE object_id IS NOT NULL;
CREATE TABLE table2 AS SELECT * FROM dba_objects WHERE object_id IS NOT NULL 
                                                   AND object_type = 'VIEW';

ALTER TABLE table1 ADD CONSTRAINT table1_pk PRIMARY KEY (object_id);
ALTER TABLE table2 ADD CONSTRAINT table2_pk PRIMARY KEY (object_id); 
```

第一个查询的执行计划：

```
SQL> EXPLAIN PLAN FOR SELECT * FROM TABLE1
  2                    WHERE OBJECT_ID IN (SELECT OBJECT_ID FROM TABLE2);

SQL> SELECT * FROM TABLE(dbms_xplan.display);

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 2776518249
--------------------------------------------------------------------------------
| Id  | Operation                    | Name      | Rows  | Bytes | Cost (%CPU)|
--------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |           | 31523 |  6772K|   584   (1)|
|   1 |  MERGE JOIN                  |           | 31523 |  6772K|   584   (1)|
|   2 |   TABLE ACCESS BY INDEX ROWID| TABLE1    |   396K|    78M|   575   (1)|
|   3 |    INDEX FULL SCAN           | TABLE1_PK |   396K|       |    77   (0)|
|*  4 |   SORT JOIN                  |           | 31523 |   400K|    10  (30)|
|   5 |    INDEX FULL SCAN           | TABLE2_PK | 31523 |   400K|     7   (0)|
--------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   4 - access("OBJECT_ID"="OBJECT_ID")
       filter("OBJECT_ID"="OBJECT_ID")

SQL> 
```

对于第二个查询：

```
SQL> EXPLAIN PLAN FOR SELECT * FROM TABLE1
  2             WHERE 1 = 0 OR OBJECT_ID IN (SELECT OBJECT_ID FROM TABLE2); 

SQL> SELECT * FROM TABLE(dbms_xplan.display);

PLAN_TABLE_OUTPUT
--------------------------------------------------------------------------------
Plan hash value: 2776518249
--------------------------------------------------------------------------------
| Id  | Operation                    | Name      | Rows  | Bytes | Cost (%CPU)|
--------------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |           | 31523 |  6772K|   584   (1)|
|   1 |  MERGE JOIN                  |           | 31523 |  6772K|   584   (1)|
|   2 |   TABLE ACCESS BY INDEX ROWID| TABLE1    |   396K|    78M|   575   (1)|
|   3 |    INDEX FULL SCAN           | TABLE1_PK |   396K|       |    77   (0)|
|*  4 |   SORT JOIN                  |           | 31523 |   400K|    10  (30)|
|   5 |    INDEX FULL SCAN           | TABLE2_PK | 31523 |   400K|     7   (0)|
--------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
   4 - access("OBJECT_ID"="OBJECT_ID")
       filter("OBJECT_ID"="OBJECT_ID") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:52:20.123

似乎是因为您使服务器更改执行计划。第一个查询是使用内部连接执行的，这就是它如此之快的原因。但在第二个过程中，必须检查第一个条件，然后在需要时进行选择。您可以像这样更改查询：

```
select ... 
 from t
 left join t2
 where 1=0 or t2.id is not null 
```

# xcode - 使用 xcode 构建应用程序时出错

> ID：10530094
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:22:38.560
> 
> 标签：xcode, build

我总是得到错误：

> 代码签名错误：找不到与应用程序标识符“...”匹配的有效配置文件

这是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:40:21.627

发生此错误是因为您的应用程序包标识符与您的配置文件中的应用程序标识符不同。
要解决此问题，请将应用程序 Info.plist 文件中的 Bundle Identifier 属性替换为配置文件中的应用程序标识符。

# mysql - -bash 命令未找到

> ID：10530101
> 
> 赞同：1
> 
> 时间：2012-05-10T08:22:59.200
> 
> 标签：mysql, macos, unix, homebrew

我是 Mac 新手，正在关注视频并输入`export PATH="$HOME/opt/git/bin:$PATH"`我相信这搞砸了我的路径，我现在无法安装 MySQL。当我尝试安装自制软件时，我得到了`-bash: homebrew: command not found.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:35:15.650

homebrew 的命令是`brew`，不是`homebrew`。

您可以通过重新启动 shell 来重置路径。如果您在 ~/.bash_profile 中更改了它，请先使用 TextEdit 或类似方法对其进行编辑以删除有问题的行，然后重新启动 shell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:28:36.157

退出 Terminal.app 并重新启动；设置的环境变量`export`不应在启动后持续存在。

（您可能需要明确关闭窗口，以防 Lion 的自动窗口恢复受到干扰。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T12:35:57.310

这可以解决您的问题，将以下内容复制并粘贴到您的终端窗口中，然后按 Enter：

```
echo export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:$PATH" >> ~/.profile 
```

进而：

```
source ~/.profile 
```

# java - Java - 解析字符串并每 100 个字符添加换行符

> ID：10530102
> 
> 赞同：14
> 
> 时间：2012-05-10T08:23:04.920
> 
> 标签：java, regex

`\n`我想问如何解析字符串并每 100 个字符添加一个换行符（ ）。我知道您可以使用正则表达式解析字符串，但不知道以后如何进行。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-10T08:29:15.907

你可以这样做：

```
String str = "....";
String parsedStr = str.replaceAll("(.{100})", "$1\n"); 
```

这将用相同的 100 个字符替换每 100 个字符，并在末尾添加一个新行。

将`(.{100})`捕获一组 100 个字符。第二`$1`个中的将放入组的内容。然后`\n`将附加到刚刚匹配的 100 个字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T08:30:01.193

很简单：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < str.length(); i++) {
    if (i > 0 && (i % 100 == 0)) {
        sb.append("\n");
    }

    sb.append(str.charAt(i));
}

str = sb.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:26:25.750

也许可以试试这个？

```
String stringToParse = "abcde";

for(int i = 0; i < stringToParse.size(); i = i + 100){
   stringToParse = ((StringBuffer) stringToParse ).insert(i, "\n").toString();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T08:28:38.760

无需通过正则表达式解析字符串，只需拆分即可。

```
String s = "your very long String";
String[] splited = new String[s.size() / 100 + 1];
for (int i = 0; i < splited.length(); i++) {
  splited[i] = s.subString(0, 100);
  s = s.subString(100);
} 
```

**编辑**

```
StringBuilder sb = new StringBuilder();
for(int i = 0; i< splited.size(); i++) {
  sb.append(splited[i]);
  sb.append("\n");
}
String stringWithNewLines = sb.toString(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T08:36:45.637

我建议使用 StringBuilder。它是高效的，可以完全适合您的任务。

```
String originalString = ... ;

// The new length of the string is
int newLength = originalString.length() +(int) Math.ceil ( originalString.length() / 100.0 );

StringBuilder builder = new StringBuilder ( newLength ); 
```

我将字符串的每 100 个字符部分称为“块”，以便轻松查看发生了什么。

```
int chunkStart = 0;

while ( chunkStart < originalString.length() )
{
    // We find the index of the end of the chunk.
    int endOfThisChunk = Math.min ( chunkStart + 100, originalString.length() );

    // and this chunk to builder
    builder.append ( originalString.substring( chunkStart, endOfThisChunk ) );

    // append the new line character
    builder.append ( '\n' );

    // set the next spot for chunkStart
    chunkStart = endOfThisChunk;
}

return builder.toString(); 
```

希望有帮助！如果您需要更多解释，请告诉我！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T08:41:49.670

我认为这比 % 100 快一点并重复附加

```
function(String input) {
    // array represantation of the String
    final char[] inputArray = input.toCharArray();
    // same length + amount of newlines (i.e. length / 100)
    final char[] outputArray = new char[inputArray.length + (inputArray.length/100)];
    int i = 0;
    int o = 0;
    while(i < inputArray.length) {
        // copy every 100th substring
        System.arraycopy(inputArray,i,outputArray,o,100);
        i += 100;
        o += 101;
        outputArray[o] = '\n';
    }
    // copy rest
    if(i < inputArray.length) {
        System.arraycopy(inputArray,i,outputArray,o,inputArray.length-i);
    }
    return(outputArray.toString());
} 
```

虽然未经测试

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T08:31:41.143

因为您不能只在 Java 中向常规[字符串添加更多字符。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)您应该使用[StringBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)来执行此操作。

您可以使用 for 循环遍历字符串，然后在每 100 个字符之后循环：

```
String string = "Some long string ...";
StringBuffer buffer = new StringBuffer();

for(int i = 0; i < string.length(); i++) {
    // Append a \n after every 100th character.
    if((i > 0) && (i % 100) == 0) {
        buffer.append("\n");
    }
    // Just adds the next character to the StringBuffer.
    buffer.append(string.charAt(i));
}

String parsedString = buffer.toString(); 
```

# javascript - 即使鼠标悬停在孩子上也解除绑定

> ID：10530112
> 
> 赞同：3
> 
> 时间：2012-05-10T08:23:53.630
> 
> 标签：javascript, jquery

我有以下 HTML

```
<ul>
<li class="operation>Lorem ... <span rel="popover" data-content="Impsum">%</span></li>
<li class="operation>Lorem ... <span rel="popover" data-content="Impsum">%</span></li>
<li class="operation>Lorem ... <span rel="popover" data-content="Impsum">%</span></li> 
```

当鼠标移过列表项时，我想在 span 元素中淡入淡出，当鼠标移离该项目时，我想淡出。但是，如果鼠标越过跨度本身，即使在鼠标移开后，我也希望它保持可见。我做了几次尝试，但每次鼠标不再结束时跨度都会消失。您可能会在下面找到最后 2 次尝试

```
$(".operation").on("mouseenter", function(event){
$(this).children("span[rel=popover]").fadeIn(200);
}).on("mouseleave", function(event){
  $(this).children("span[rel=popover]").fadeOut(200);
});

$("span[rel=popover]").off("mouseleave", function(event){
    $(this).fadeOut(200);
}); 
```

和

```
$(".operation").on("mouseenter", function(event){
 $(this).children("span[rel=popover]").fadeIn(200);
}).on("mouseleave", function(event){
  $(this).children("span[rel=popover]").fadeOut(200);
});

$("span[rel=popover]").hover(function(){
  $(this).off("mouseleave", function(event){
    $(this).fadeOut(200);
  });
}); 
```

我错过了什么吗？我该如何解决？

感谢，并有一个愉快的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:28:09.027

我会做这样的事情：

```
$('.operation').hover(function () {
    var i = $(this).index();
    $('span').eq(i).stop(true).animate({'opacity' : 1}, 200);
}, function () {
    $('span').animate({'opacity' : 0}, 200);    
});

$('span').hover(function () {
    $(this).animate({'opacity' : 1}, 200);
}, function () {
    return false;
}); 
```

我倾向于不使用`fadeIn`和`fadeOut`方法来处理悬停事件，因为 jQuery 有一个有趣的小错误，如果用户快速连续多次将光标移到元素上，它会逐渐（且不可逆转地）降低元素的不透明度。

您可以包含一个`stop`方法来结束任何当前动画。传递参数`true`清除动画队列。

你可以在这里看到我的工作示例：http: [//jsfiddle.net/xKy49/2/](http://jsfiddle.net/xKy49/2/)

如果它们在悬停时表现不同，则跨度不能是列表项的子元素。

另外，不要忘记关闭你的类声明！后面应该有双引号 `operation`：

```
<li class="operation">Lorem ... 
```

# objective-c - 本地化 iPhone 应用程序

> ID：10530123
> 
> 赞同：1
> 
> 时间：2012-05-10T08:24:33.207
> 
> 标签：objective-c, xcode, localization

我正在使用 xCode 4.3.2，对于我的新 iPhone 项目，我添加了阿拉伯语和英语的字符串文件，它们适用于 iPhone 语言更改。但我需要通过单击 UIButton 来加载/更改应用程序语言。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:04:43.117

[如何在运行时更改 iPhone 应用程序语言？](https://stackoverflow.com/questions/1576904/how-to-change-iphone-app-language-during-runtime)这可能会对您有所帮助。

# wcf - 如何让我的 HttpModule 只为 Rest Service 调用调用

> ID：10530127
> 
> 赞同：0
> 
> 时间：2012-05-10T08:25:25.433
> 
> 标签：wcf, rest, wcf-security, token

我有一个 WCF 服务应用程序，其中有一些 Rest 服务和一些常规的 WCF 服务。

我添加了一个 HttpModule 来拦截对 Rest 服务的服务调用，并验证请求标头中的令牌并允许访问该服务。这适用于我的 Rest 服务。

当我调用 WCF 服务时，它转到 HTTPModule，然后我在客户端收到异常“远程服务器返回意外响应：(400) 错误请求。”

如何确保我的 HttpModule 只为 Rest 服务调用，而不是为我的 WCF Soap 服务调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:28:03.940

我想你不能，因为这两种方法（REST 和 SOAP）都使用 GET 和 POST 动词，所以你不能过滤它。

尝试将这两个服务放在不同的路径中，每个路径都有自己的模块。

# coronasdk - 如何在另一个之后播放一个序列？

> ID：10530128
> 
> 赞同：2
> 
> 时间：2012-05-10T08:25:26.293
> 
> 标签：coronasdk

我声明了两个这样的序列：

```
*rest of code for sprite sheet already written above*  
sprite.add(sprite1,"eyes",1,7,500,1)   
sprite.add(sprite1,"ears",8,13,500,1)  
local instance = sprite.newSprite(sprite1)  
instance.x = display.contentWidth/2  
instance.y = display.contentHeight/2 
```

然后我试着像这样玩它们，它们之间有一些延迟：

```
local function move1()  
instance:prepare("eyes")  
instance:play()  
end

local function move2()  
instance:prepare("tails")  
instance:play()  
end

timer.performWithDelay(1000,move1,1)  
timer.performWithDelay(2000,move2,1) 
```

但这不起作用，因为一旦调用了第二个函数，精灵就会从其原始位置移位。换句话说，它消失了几秒钟。最初，我认为它试图同时播放两个序列，但后来，我将它设置为只循环一次，它仍然给我这个问题。任何人都知道我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T06:23:53.530

[http://developer.anscamobile.com/reference/index/spriteinstanceaddeventlistener](http://developer.anscamobile.com/reference/index/spriteinstanceaddeventlistener)

# python - 如何在 web.py 中形成验证反馈

> ID：10530129
> 
> 赞同：1
> 
> 时间：2012-05-10T08:25:27.967
> 
> 标签：python, forms, web.py

我想用html写表格，比如

```
form    
    input type.....   
    input type..... 
```

然后在py中写这个：

```
f = forms.register_form()
if not f.validates():
    return render.register(f) 
```

问题是，如果表单没有通过验证，我该如何将信息反馈给用户。速度上有没有像#springbind这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:44:17.933

让我用我的一个 web.py 项目的片段来回答：

```
bookeditform = form.Form(
    form.Textbox('title', form.notnull),
    form.Textbox('author', form.notnull),
    form.Textbox('year', 
        form.Validator('Must be a number', lambda x: not x or int(x) > 0)),
)

# ...

class NewBookHandler:
    def GET(self):
        f = bookeditform()
        return render.bookedit(f, "New book")

    def POST(self):
        f = bookeditform()
        if f.validates():
            newid = db.insert('book', title=f.d.title, 
                              author=f.d.author, year=f.d.year)
            raise web.seeother('/book/%s' % newid)
        else:
            return render.bookedit(f, "New book") 
```

回顾：

*   在处理程序中， on `GET`，只需呈现空表单。
*   在 上`POST`，加载表单，并检查其是否有效。
    *   如果是，请执行所需的操作，并将**用户重定向到成功页面**。永远不要在 上渲染任何东西`POST`，因为用户可以刷新页面，重新执行相同的操作。
    *   如果没有，请重新渲染表单（它将包含输入的数据，并会显示错误消息）。

# actionscript-3 - 如何让白色部分消失？

> ID：10530132
> 
> 赞同：0
> 
> 时间：2012-05-10T08:25:38.670
> 
> 标签：actionscript-3

我有两个轮子（精灵），每个轮子都有一个装载器，当旋转时会出现白色部分。加载器在 Sprite 内部居中，我试图让白色部分消失。

![在此处输入图像描述](../Images/1166c417d89bfce5b4309e989920fc5e.png)

有任何想法吗？

任何指针，真的很感激它对actionscript 3来说还是相当新的。

```
 //create the first wheel
  backgroundURL = new URLRequest();
  backgroundLoader = new Loader();
  myWheelSprite = new Sprite();
  backgroundURL.url = "images/wheelimage.jpg";
  backgroundLoader.load(backgroundURL);

  //Use contentLoaderInfo.addEventListener to find out the image width and height.
  backgroundLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,backgroundLoaderimageFinishedLoading);
  myWheelSprite.x = 60;
  myWheelSprite.y = 60;
  myWheelSprite.addEventListener(MouseEvent.CLICK, myMouseClickFunction);
  trace("myWheelSprite X = "+myWheelSprite.x);

  //create the second wheel
  backgroundURL2 = new URLRequest();
  backgroundLoader2 = new Loader();
  myWheelSprite2 = new Sprite();
  backgroundURL2.url = "images/wheelimage.jpg";
  backgroundLoader2.load(backgroundURL);

  //Use contentLoaderInfo.addEventListener to find out the image width and height.   backgroundLoader2.contentLoaderInfo.addEventListener(Event.COMPLETE,backgroundLoader2imageFinishedLoading);
  myWheelSprite2.x =480;
  myWheelSprite2.y = 480;
  trace("myWheelSprite2 X = "+myWheelSprite2.x);

//My code to rotate the image.

function myMouseClickFunction(event:MouseEvent) {
  var myTimeline:TimelineMax = new TimelineMax({repeat:10});
  myTimeline.append(TweenLite.to(myWheelSprite, 10, {rotation:360, ease:Linear.easeNone}));  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:26:46.670

您所看到的是最左侧图像的白色背景与右侧图像重叠。

这里最好的解决方案是使用支持透明度的图像格式，在你的情况下 PNG 可能是最好的。

使用 Photoshop 之类的工具去除白色部分并再次保存图像，Flash 会尊重透明度，一切都会看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:27:13.460

“.jpg”是你的问题。JPG 格式不支持透明度。然而，PNG 确实如此。

# jquery - jQuery UI Datepicker - onSelect 获取选定日期+3天

> ID：10530134
> 
> 赞同：4
> 
> 时间：2012-05-10T08:25:47.137
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我尝试使用 jQuery UI 日期选择器，使用两个文本字段来创建日期范围。第一个文本字段“start_date”将设置开始日期，第二个文本字段“end_date”将设置结束日期。

我到目前为止的代码是这样的：

```
$('#start_date').live(
    'focus',
    function()
    {
        $('#end_date').datepicker(
            {
                dateFormat: 'dd MM yy',
                minDate: new Date(),
                maxDate: new Date(2012, 9, 15),
                stepMonths: 2,
                numberOfMonths: 2
            }
        );

        $(this).datepicker(
            {
                dateFormat: 'dd MM yy',
                minDate: new Date(),
                maxDate: new Date(2012, 9, 15),
                stepMonths: 2,
                numberOfMonths: 2,
                onSelect: function(dateText, inst)
                {
                    var instance = $( this ).data("datepicker");

                    var date = $.datepicker.parseDate(instance.settings.dateFormat, dateText, instance.settings);

                    $('#end_date').datepicker('option', 'minDate', dateText);
                }
            }
        );
    }
); 
```

**注意**：我使用 live 和 focus 事件，因为我的所有页面内容都加载了 AJAX 调用。也许这对或错，但这不是我想在这里问的；）

上面的代码对我来说是正确的并且工作正常，但我喜欢做的是将'end_date'元素的值**设置为选定的+3天。**

到目前为止，当我在“start_date”元素中选择一个日期时，“end_date”元素会更改为与“start_date”相同的日期，这就是我想要更改的。“end_date”将比“start_date”元素添加 3 天后的选择。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T08:32:39.160

将 end_date 设置为 +1 天

```
onSelect: function(dateText, inst) {
    $('#start_date').datepicker('option','minDate', new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay));
    var toDate = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);//Date one month after selected date
    var oneDay = new Date(toDate.getTime()+86400000);
    document.getElementById('end_date').value =$.datepicker.formatDate('dd/mm/yy', oneDay);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T08:38:49.313

Hiya**演示** [http://jsfiddle.net/96Lbf/](http://jsfiddle.net/96Lbf/)

此演示将设置`to`文本框，并`+3 days`考虑“从日期选择”。

**jQuery代码**

```
 $(function() {
        $( "#from, #to" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            onSelect: function( selectedDate ) {
                if(this.id == 'from'){
                  var dateMin = $('#from').datepicker("getDate");
                  var rMin = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + 1); 
                  var rMax = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + 3); 
                  //$('#to').datepicker("option","minDate",rMin);
                  //$('#to').datepicker("option","maxDate",rMax);  
$('#to').val($.datepicker.formatDate('mm-dd-yy', new Date(rMax)));                    
                }

            }
        });
    }); 
```

**html**

```
<div class="demo"> 

<label for="from">From</label> 
<input type="text" id="from" name="from"/> 
<label for="to">to</label> 
<input type="text" id="to" name="to"/> 

</div>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T15:36:51.233

> 如果月 = 4，我想看 car1 图片。如果月份 = 5，我想看 car3 图片。我该怎么做？

```
//..............
onSelect: function( selectedDate ) {
  if(this.id == 'from'){
    var dateMin = $('#from').datepicker("getDate");
    var rMin = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + 0);
    alert (rMin.getMonth());
    if(rMin.getMonth() == 4){ 
      var image1=new Image();
      image1.src="car1.jpg"
      if(rMin.getMonth() ==5){
        var image2=new Image()
        image2.src="car3.jpg";
      }                           
    }
  }
} 
```

```
 <label for="from">From</label> 
    <input type="text" id="from" name="from"/> 

    <label for="pics">pics</label> 
    <input type="image"
           src="car1.jpg"
           id="pics"
           name="pics"
           alt="Submit"
           width="48" height="48">

............... 
```

# ruby-on-rails - rspec 测试期间方法中的断点

> ID：10530138
> 
> 赞同：1
> 
> 时间：2012-05-10T08:25:54.847
> 
> 标签：ruby-on-rails, debugging, rspec, breakpoints

我想在 rspec 测试期间在方法中启动调试器。我知道，我可以在规范中做到这一点（[就像在这个问题中一样](https://stackoverflow.com/questions/5446594/running-ruby-debug-in-rspec)），我`--debug`在我的`.rspec`文件中。

我想`debugger`输入一个正在测试的方法：

```
it "should be OK" do
    User.ok? should be_true
end

class User
    def ok?
        do_something
        debugger      #here is my breakpoint
        do_something
    end
end 
```

当我执行与该示例类似的操作并运行 rspec （使用`rake spec`or`guard`或`rspec`）时，断点不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:33:29.520

您应该将调试器 gem 放在 gemfile 中的 :test 组下。

```
gem 'debugger', group: [:development, :test] 
```

# testing - 动态更改 UI 测试的连接字符串

> ID：10530140
> 
> 赞同：0
> 
> 时间：2012-05-10T08:26:09.603
> 
> 标签：testing, database-connection, ui-testing, webaii

我正在使用 WebAii 库进行 UI 测试 - 我想测试我的组件是否显示与数据库中的记录相同的记录，因此我需要切换应用程序的连接字符串以指向测试数据库，以便仅在运行测试时。最好的方法是什么？如何在运行应用程序之前动态更改连接字符串？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:43:22.463

您是否[将连接字符串存储在 Web.config 文件中](http://msdn.microsoft.com/en-us/library/ms178411.aspx)？如果是这样，我会在开始测试之前部署一个新的 Web.config，然后[使用命令行发送一个 IISRESET](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/95826e7a-bac4-4e1f-bcb6-c52d49c9d7f4.mspx?mfr=true)。

仅供参考，这些是我们整天在[WebAii 专用公共论坛](http://www.telerik.com/automated-testing-tools/community/forums/test-studio-express/automation-framework.aspx)上回答的问题。

Cody Telerik 技术支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T00:37:18.223

它是一个什么样的应用程序？这首先可能表明代码没有很好地分解。其次，通常有一个单独的环境来测试代码。

例如，如果您[使用 Visual Studio 部署到 ASP.NET ，则可以在部署到](http://msdn.microsoft.com/en-us/library/dd394698%28v=vs.110%29)*test.contoso.com*与 www.contoso.com时使用[Web.config 文件转换](http://www.asp.net/web-forms/tutorials/deployment/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-web-config-file-transformations-3-of-12)来设置不同的值。[转换语法](http://msdn.microsoft.com/en-us/library/dd465326)允许您在部署不同的配置时定义新的连接字符串，或从基本 Web.config 更改现有的连接字符串。

 *如果您有一个单一的环境并对其进行控制，您可能会编写几个（Power）shell 脚本来在测试之前将带有“测试”连接字符串的 web.config 复制到您的应用程序根目录。然后在运行测试后运行第二个脚本以重置原始 web.config。

如果您有权访问您将运行测试的上下文中的部署目录，您甚至可以简单地将 Web.test.config 文件包含在您的单元测试项目中。在`[AssemblyInitialize]`：

1.  文件复制 _\\{your app server}{your app directory}\Web.config 到*\\{your app server}{your app directory}\Web.config.orig*。
2.  *将Web.test.config*文件复制到*\\{your app server}{your app directory}\Web.config*。
3.  睡几秒？

然后在`[AssemblyCleanup]`.

也存在其他策略。您可以在调试模式下为您的应用程序构建一个覆盖，以检查各种内容（特殊文件、附加配置、cookie、额外查询字符串）。或者您可以在您的应用程序中有一个设置管理器，您可以在安排测试时在测试设置中进行检测（单击 UI 以更改数据库设置）。

但是，您很可能通过分解代码来减少依赖关系，从而获得最好的复合奖励。然后你可以编写存根/模拟/伪造数据库的单元测试。您可以使用代码覆盖率工具来验证您是否测试了特定场景，或者查看其他集成测试是否会在此时重复覆盖率。*

# javascript - jQuery单击功能可从元素中删除属性并在单独单击时恢复属性

> ID：10530143
> 
> 赞同：1
> 
> 时间：2012-05-10T08:26:27.587
> 
> 标签：javascript, jquery, html, svg

我在 SVG 画布上有可以根据调色板着色的元素。如果单击特定颜色，我将尝试添加无填充选项，如果选择了任何其他颜色，则删除该属性。

js代码：

```
if(!$selectedElems){return;}                                                                                

$selectedElems.each(function(){

$(this)[($(this).prop('tagName') === 'g' ? 'find' : 'filter')]('text[fill],rect[fill],circle,path').attr('fill',colour);

var $noFillColour =     $('#mainToolFill div.toolPopup a.color15');
var $otherColour =      $('#mainToolFill div.toolPopup a:not("color15")');

if($($noFillColour).bind('click')) {
    alert ($noFillColour);
    $selectedElems.attr('fill-opacity', '0');
}else{
  ($($otherColour).bind('click'));
    alert ($otherColour);
    $selectedElems.removeAttr('fill-opacity');
} 
```

我怀疑变量有问题。正如我在警报中看到的对象对象。第一个事件正在触发，因此填充不透明度将应用于所选元素，但这与选择哪种颜色无关。单击另一种颜色将自动删除填充不透明度属性。

我还想知道 :not 选择器是否有问题。我也试过：

```
var $otherColour = $('#mainToolFill div.toolPopup a').not('#mainToolFill div.toolPopup a.color15'); 
```

如果有人可以对此有所了解，将不胜感激。我注意到这可能不是实现这一点的最经济的方式。

如果您需要查看更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:31:31.847

我想我有一些工作：

```
$('#mainToolFill div.toolPopup a.color15').bind('click',function() {
        $selectedElems.attr('fill-opacity','0');
});

$('#mainToolFill div.toolPopup a:not(".color15")').bind('click',function() {
        $selectedElems.removeAttr('fill-opacity');
}); 
```

唯一的问题是它可能很昂贵，仅在选择 color15 后才添加填充不透明度，但是任何其他颜色通常会删除填充不透明度属性，即使它不存在（除了在这种情况下颜色15）。

# xcode - 将 ZXing 集成到 iphone App 中的问题

> ID：10530146
> 
> 赞同：0
> 
> 时间：2012-05-10T08:26:34.533
> 
> 标签：xcode, ios4, xcode4, qr-code, zxing

我正在尝试在 iPhone 中开发 QRCode 阅读器应用程序。我正在尝试使用 ZXing SDK。我已经成功运行了 ZXing 提供的示例应用程序。但是我正在尝试按照 Zxing 给出的自述文件中的说明开发新的应用程序。但是当我尝试在构建阶段添加 ZxingWidget 时。它会添加，但它显示如下![在此处输入图像描述](../Images/d1dce47e6a5b831804badf8c26687363.png)

我认为这会给我带来问题。当我尝试运行应用程序时，它会给出诸如 Lexical 或 Prepocessor 问题 File not found 之类的错误。

将文件添加到应用程序时是否做错了什么？实际上，首先我通过拖放将 ZxingWidget.xcodeproj 添加到我的应用程序中。但是当我们将图像或文件添加到 xcode 时，它​​不会提供任何警报窗口，您希望像类似的那样复制。接下来我将 cpp 和 iphone 文件夹添加到 xcode 应用程序。后来我根据阅读添加了框架。请任何人帮助我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T08:31:22.423

如果你在真机上运行，​​问题就解决了。我不知道原因。但我想这与构建产品路径有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:18:37.243

如果没有真正的错误消息，很难提供帮助。在问题导航器中，您可以右键单击 > 在日志中显示以查看可以复制和粘贴的完整错误。

也就是说，听起来有点像找不到标题（尽管我只是猜测没有真正的错误消息。）如果是这样，请仔细检查[自述](http://code.google.com/p/zxing/source/browse/trunk/iphone/README)文件的第 4 步和第 5 步。

# c - 创建线程时如何设置stack_size、stack_addr和guardsize

> ID：10530150
> 
> 赞同：1
> 
> 时间：2012-05-10T08:26:38.787
> 
> 标签：c, pthreads, posix

这些天我正在阅读[APUE](https://rads.stackoverflow.com/amzn/click/com/0201433079)，刚刚发现了一个问题。

一种常见的使用方法`pthread_attr_setstack`是

1.  `malloc`一段记忆
2.  通过方法设置`addr`and`length`

然后，我的问题来了，如果我想使用保护大小来保护我的数据怎么办？假设我需要`A`内存`B`字节和保护大小的字节。

我应该`malloc` `A+B`字节，还是`malloc` `A`字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:41:25.363

实际上 pthread 库本身提供了一个 API 来[设置保护大小](http://linux.die.net/man/3/pthread_attr_setguardsize)

```
int pthread_attr_setguardsize(pthread_attr_t *attr, size_t guardsize); 
```

但请注意，如果您正在设置堆栈位置或大小，无论是使用函数 [`pthread_attr_setstack(3)`](http://linux.die.net/man/3/pthread_attr_setstack)还是[`pthread_attr_setstackaddr(3)`](http://linux.die.net/man/3/pthread_attr_setstackaddr)，您都将忽略保护大小属性（即，系统不会创建保护区域）：您有责任处理堆栈溢出（也许通过[`mprotect(2)`](http://linux.die.net/man/2/mprotect)在您分配的堆栈末尾手动定义保护区。

因此，针对您的具体问题，是`A+B`的，如果您希望使用`pthread_attr_setstack`. 否则，如果您对默认堆栈大小没问题，则使用该`pthread_attr_setstack`函数。

在这里阅读[`pthreads`](http://www.cognitus.net/html/howto/pthreadSemiFAQ_5.html)。还可以在该部分下专门阅读有关线程堆栈管理[的信息](https://computing.llnl.gov/tutorials/pthreads/)`Stack Management`

# java - 使用 GWTP 创建表

> ID：10530152
> 
> 赞同：2
> 
> 时间：2012-05-10T08:26:42.600
> 
> 标签：java, json, html-table, gwtp

我开始熟悉 GWTP。我试图在 Piriti 映射器的帮助下输出一个包含 JSON 值的表。它不是一个真正的项目代码，它只是一个尝试理解 GWTP，所以这可能不是最漂亮的解决方案（事实上，它不是一个肯定的）。以下是此过程中涉及的两位演示者：

（`FirstPresenter`使用`ProductListPresenter`，这是一个小部件，我不确定是否应该在这里使用小部件，但是，根据[这个对话](http://groups.google.com/group/gwt-platform/browse_thread/thread/1bec69f557fda229/57135899295ae4bf)，小部件可能会起作用）：

```
public class FirstPresenter extends
        Presenter<FirstPresenter.MyView, FirstPresenter.MyProxy> {

    public static final Object SLOT_RATE = new Object();
    public static final Object SLOT_PRODUCT = new Object();
    private IndirectProvider<ProductListPresenter> productListFactory;

    public interface MyView extends View {
        public Panel getListProductPanel();
    }

    @Inject ProductListPresenter productListPresenter;

    @ProxyCodeSplit
    @NameToken(NameTokens.first)
    public interface MyProxy extends ProxyPlace<FirstPresenter> {
    }

    @Inject
    public FirstPresenter(final EventBus eventBus, final MyView view,
            final MyProxy proxy, Provider<ProductListPresenter> productListFactory) {
        super(eventBus, view, proxy);

        this.productListFactory = new StandardProvider<ProductListPresenter>(productListFactory);
    }

    @Override
    protected void revealInParent() {
    }

    @Override
    protected void onBind() {
        super.onBind();
    }

    @Inject
    PlaceManager placeManager;

    @Override
    protected void onReset() {
        super.onReset();
        setInSlot(SLOT_PRODUCT, null);
        for (int i = 0; i < 2; i++) { //TODO: change hardcoded value 

            productListFactory.get(new AsyncCallback<ProductListPresenter>() {

                @Override
                public void onSuccess(ProductListPresenter result) {
                        addToSlot(SLOT_PRODUCT, result);
                }

                @Override
                public void onFailure(Throwable caught) {

                }
            });

        }
    }

} 
```

`ProductListPresenter`: _

```
public class ProductListPresenter extends
        PresenterWidget<ProductListPresenter.MyView> {

    @Inject ProductListPiritiJsonReader reader;

    public interface MyView extends View {
        public Label getNameLabel();
        public Label getCompanyLabel();
        public Label getSerialLabel();
        public Label getPricesLabel();
    }

    @Inject
    public ProductListPresenter(final EventBus eventBus, final MyView view) {
        super(eventBus, view);
    }

    @Override
    protected void onBind() {
        super.onBind();
    }

    @Override
    protected void onReset() {
        super.onReset();

        try {
            RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "/jsongwtproject/products.json");
            rb.setCallback(new RequestCallback() {
                @Override
                public void onResponseReceived(Request request, Response response) {
                    ProductList productList = reader.read(response.getText());
                    for (Product product : productList.getProductList()) {
                        fetchDataFromServer();
                    }
                }
                @Override
                public void onError(Request request, Throwable exception) {
                    Window.alert("Error occurred" + exception.getMessage());
                }
            });
            rb.send();
        } 
        catch (RequestException e) {
            Window.alert("Error occurred" + e.getMessage());
        }
    }
    //Takes the JSON string and uses showProductListData(String jsonString)  method
    public void fetchDataFromServer() {
        try {
            RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "/jsongwtpproject/products.json");
            rb.setCallback(new RequestCallback() {
                @Override
                public void onResponseReceived(Request request, Response response) {
                    showProductListData(response.getText());                    
                }
                @Override
                public void onError(Request request, Throwable exception) {
                    Window.alert("Error occurred" + exception.getMessage());
                }
            });
            rb.send();
        } 
        catch (RequestException e) {
            Window.alert("Error occurred" + e.getMessage());
        }
    }
    //Uses Piriti mappers to take JSON values
    private void showProductListData(String jsonString) {
        ProductList productList = reader.read(jsonString);
        for (Product product : productList.getProductList()) {
            StringBuffer priceSb = new StringBuffer();
            for (Double price : product.getPrices()) {
                priceSb.append(price + ", ");
            }

            getView().getNameLabel().setText(product.getName());
            getView().getCompanyLabel().setText(product.getCompany());
            getView().getSerialLabel().setText(product.getSerialNumber());
            getView().getPricesLabel().setText(priceSb.toString());
            //break;

        }
    }   

} 
```

和`ProductListView.ui.xml`：

```
<g:HTMLPanel>
<table border="1">
    <tr>
        <td><g:Label ui:field="nameLabel" /> </td>
        <td><g:Label ui:field="companyLabel" /> </td> 
        <td><g:Label ui:field="serialLabel" /> </td>
        <td><g:Label ui:field="pricesLabel" /> </td> 
    </tr>
    </table>
</g:HTMLPanel> 
```

JSON 中有两种产品。

以下是这段代码发生的情况：第一行`Product1`​​出现，然后它变为包含 ' 值的第一行`Product2`，然后再次它包含`Product1`' 值，然后再次`Product2`'，然后第二行`Product1`出现，然后它更改为包含 ' 值的第二行`Product2`，然后它再次包含`Product1`' 值，然后再次`Product2`'。

所以，有两个产品和两行，在这段代码中值被改变了两次，但最后表只包含`Product2`'s 值。如果`break;`未注释，则`Product1`' 值在第一行输出两次，然后在第二行中，则表仅包含这些`Product1`' 值。

我明白为什么会这样。但我还没有弄清楚如何做出正确的输出。如果有人能告诉我如何做正确的输出，或者，提供一个例子（或者告诉我哪个部分，例如小部件的使用，是非常错误的），那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:43:51.483

您的代码的问题在于您的 ProductListView.ui.xml 中确实没有真正的表。

当然，如果从服务器检索到两条记录，这部分代码会被调用两次：

```
getView().getNameLabel().setText(product.getName());
getView().getCompanyLabel().setText(product.getCompany());
getView().getSerialLabel().setText(product.getSerialNumber());
getView().getPricesLabel().setText(priceSb.toString()); 
```

第二次调用会覆盖第一次调用的值。

改进代码的要点：

1.  您可能想阅读有关创建真实表格视图的 CellTable 的信息。
2.  不要将 PresenterWidget 本身用作数据持有者，而是创建一个将传递给数据库并使用它来检索数据的 DTO。

# cakephp - Cakephp 复杂查询

> ID：10530153
> 
> 赞同：0
> 
> 时间：2012-05-10T08:26:45.840
> 
> 标签：cakephp, find

我有 sql 代码，我想用 cake php 做，但我不知道怎么做，我不想那样做

```
$obj->查询($sql);
```

这是我的查询：

```
“选择 dbfiles.amount, MONTHNAME(cases.enquiry_date) 作为 Month FROM cases
   INNER JOIN services ON cases.id = services.case_id
   INNER JOIN dbfiles ON services.id = dbfiles.service_id
   WHERE case.status = 2 AND YEAR(cases.enquiry_date) = '2012' AND dbfiles.type = 'INV'
   AND case.currency = 'EUR' GROUP BY dbfiles.invoice_num ORDER BY Month DESC; "

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:34:17.623

假设 $obj 属于类`Case`

```
$obj->find('all', array(
   'fields' => array('dbfiles.amount', 'MONTHNAME(cases.enquiry_date) as MONTH',
   'joins' => array(
      array(
         'table' => 'services',
         'type' => 'INNER',
         'conditions' => array('cases.id = services.case_id'),
         'foreignKey' => false
      ),
      array(
         'table' => 'dbfiles',
         'type' => 'INNER',
         'conditions' => array('services.id = dbfiles.service_id'),
         'foreignKey' => false
      )
   ),
   'conditions' => array('cases.status' => 2, ... the rest of your WHERE clauses)
) 
```

# jquery - 检索数值

> ID：10530155
> 
> 赞同：0
> 
> 时间：2012-05-10T08:26:46.670
> 
> 标签：jquery, jquery-mobile

大家好，我想知道如何通过 jquery 在这个 url 中检索 47 的值，以便我可以使用这个值来显示与 id 关联的特定记录

```
...../Rate.aspx#/HotelMobileBooking/Room.aspx?RT=47 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:28:05.547

只需使用正则表达式即可。`/Room\.aspx\?RT=(\d+)/`做这项工作：

```
> /Room\.aspx\?RT=(\d+)/.exec('/Rate.aspx#/HotelMobileBooking/Room.aspx?RT=47')[1]
'47' 
```

如果要访问*当前*URL 中的值，使用`location.hash`访问`#...`url 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:30:32.753

无需使用正则表达式。如果`RT`是查询字符串中的唯一参数，只需使用`split()`

```
url = ".../Rate.aspx#/HotelMobileBooking/Room.aspx?RT=47";
url.split("?RT=")[1]; //47 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:30:21.147

这个问题告诉您如何使用 jQuery 检索查询字符串值：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

假设您发布的 URL 是您所在页面的 URL...

# android - Cordova 1.7.0 + childbrowser (Android)

> ID：10530162
> 
> 赞同：0
> 
> 时间：2012-05-10T08:27:17.010
> 
> 标签：android, cordova, childbrowser

我收到这个错误。

ReferenceError：找不到变量：文件中的cordova：///android_asset/www/childbrowser.js:87

我已经完成了所有这些：

要安装插件，请将 www/childbrowser.js 移动到项目的 www 文件夹，并在 html 文件中 phonegap.js 之后包含对它的引用。

将图像文件文件夹 www/childbrowser 复制到项目的 www 文件夹。请注意，您需要整个文件夹，而不仅仅是图像。

在您的项目中创建一个名为“src/com/phonegap/plugins/childBrowser”的目录，并将 ChildBrowser.java 移动到其中。

在您的 res/xml/plugins.xml 文件中添加以下行：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T17:35:41.623

我在 Eclipse 中从 phonegap 的演示中工作时遇到了同样的问题。他们使用在“hello world”中添加这一行：

`<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>`

但是当你下载新的 phonegap 时，它应该是：

`<script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>`

现在它对我有用:)

# android - Android 相机方向问题

> ID：10530165
> 
> 赞同：9
> 
> 时间：2012-05-10T08:27:32.193
> 
> 标签：android

以垂直格式拍摄的照片以横向格式保存，反之亦然。我正在使用此意图使用 Android 相机

```
Intent captureImage = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
captureImage.putExtra(MediaStore.EXTRA_OUTPUT, imageFileUri);               
startActivityForResult(captureImage, CAMERA_PIC_REQUEST); 
```

onActivityResult() 我只是将图像 URL 保存到我的数据库并在列表视图中显示它。但有方向变化。如果我从图库中选择图像并保存它，也会发生同样的情况。

我想要拍摄照片的方向。我不想改变它。有没有人对此有解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T08:51:07.940

有些设备在拍摄后不会旋转图像，而只是将其方向信息写入 Exif 数据。因此，在使用拍摄的照片之前，您应该调用如下方法：

```
private int resolveBitmapOrientation(File bitmapFile) throws IOException {
        ExifInterface exif = null;
        exif = new ExifInterface(bitmapFile.getAbsolutePath());

        return exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
    } 
```

检查其方向。然后申请：

```
private Bitmap applyOrientation(Bitmap bitmap, int orientation) {
        int rotate = 0;
        switch (orientation) {
            case ExifInterface.ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            default:
                return bitmap;
        }

        int w = bitmap.getWidth();
        int h = bitmap.getHeight();
        Matrix mtx = new Matrix();
        mtx.postRotate(rotate);
        return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
    } 
```

并在您的列表视图中使用这个新的位图。或者最好在拍摄照片后立即调用此方法并用新的旋转照片覆盖它。

如果您将位图数据作为 Uri 接收，则可以使用以下方法检索其文件路径：

```
public static String getPathFromURI(Context context, Uri contentUri) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT &&
            DocumentsContract.isDocumentUri(context, contentUri)) {
        return getPathForV19AndUp(context, contentUri);
    } else {
        return getPathForPreV19(context, contentUri);
    }
}

private static String getPathForPreV19(Context context, Uri contentUri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = context.getContentResolver().query(contentUri, projection, null, null, null);
    if (cursor != null && cursor.moveToFirst()) {
        try {
            int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            return cursor.getString(columnIndex);
        } finally {
            cursor.close();
        }
    }

    return null;
}

@TargetApi(Build.VERSION_CODES.KITKAT)
private static String getPathForV19AndUp(Context context, Uri contentUri) {
    String documentId = DocumentsContract.getDocumentId(contentUri);
    String id = documentId.split(":")[1];

    String[] column = { MediaStore.Images.Media.DATA };
    String sel = MediaStore.Images.Media._ID + "=?";
    Cursor cursor = context.getContentResolver().
            query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                    column, sel, new String[]{ id }, null);

    if (cursor != null) {
        try {
            int columnIndex = cursor.getColumnIndex(column[0]);
            if (cursor.moveToFirst()) {
                return cursor.getString(columnIndex);
            }
        } finally {
            cursor.close();
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T10:28:11.070

您也可以按照以下方式进行操作：

```
static Uri image_uri;
static  Bitmap taken_image=null;

                image_uri=fileUri; // file where image has been saved

          taken_image=BitmapFactory.decodeFile(image_uri.getPath());
          try
            {
                ExifInterface exif = new ExifInterface(image_uri.getPath()); 
//Since API Level 5
                int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

                switch(orientation) {
                    case ExifInterface.ORIENTATION_ROTATE_90:
                        taken_image=decodeScaledBitmapFromSdCard(image_uri.getPath(), 200, 200);
                        RotateBitmap(taken_image, 90);
                        break;
                    case ExifInterface.ORIENTATION_ROTATE_180:
                        taken_image=decodeScaledBitmapFromSdCard(image_uri.getPath(), 200, 200);
                        RotateBitmap(taken_image, 180);

                        break;
                    case ExifInterface.ORIENTATION_ROTATE_270:
                        taken_image=decodeScaledBitmapFromSdCard(image_uri.getPath(), 200, 200);
                        RotateBitmap(taken_image, 270);

                        break;
                    case ExifInterface.ORIENTATION_NORMAL:
                        taken_image=decodeScaledBitmapFromSdCard(image_uri.getPath(), 200, 200);
                        RotateBitmap(taken_image, 0);

                        break;
                }

            }
            catch (OutOfMemoryError e)
            {
                Toast.makeText(getActivity(),e+"\"memory exception occured\"",Toast.LENGTH_LONG).show();

            }

public Bitmap RotateBitmap(Bitmap source, float angle) {
    Matrix matrix = new Matrix();
    matrix.postRotate(angle);

    round_Image = source;
    round_Image = Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);

    return Bitmap.createBitmap(source, 0, 0, source.getWidth(), source.getHeight(), matrix, true);
} 
```

# java - 如何在jar中运行java可执行文件

> ID：10530166
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:27:36.187
> 
> 标签：java

我已经开发了我的“hello wold”java 程序并将其打包在一个 .jar 文件中，但我未能将它作为计算机上的可执行软件运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:30:29.900

例如，您必须使用 IDE 生成“可运行的 JAR”。如果您使用的是 Eclipse，请执行“右键单击您的项目 > 导出... > Java > 可运行 JAR 文件”。获得 JAR 文件后，使用命令运行它`java -jar myRunnableJarFile.jar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:37:52.303

您需要一个名为 META-INF 的文件夹中的 MANIFEST.MF 文件。将以下内容写入 MANIFEST.MF：

```
Manifest-Version: 1.0
Main-Class: your.package.HelloWorld 
```

将此文件夹/文件与您编译的类文件一起打包。然后打开一个终端（或在 Windows 操作系统的 Start/Execute 中键入“cmd”）并编写以下内容以启动您的应用程序：

```
java -jar yourapp.jar 
```

然后，只要您的系统类路径上有 Java RE，它就应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:29:43.453

你熟悉命令行吗？如果是这样，请导航到您的 jar 所在的文件夹并输入以下内容：

java -jar 文件名.jar

# git - 如何清理 git repo 只留下最新的快照？

> ID：10530167
> 
> 赞同：1
> 
> 时间：2012-05-10T08:27:42.233
> 
> 标签：git

有时我克隆 git repo 不是为了开发——而只是为了最前沿的版本。现在我用

```
git clone --depth=1 <URL> 
```

但那时我并不知道。所以我有一些完整的回购 - 我只想在每个回购中留下最新的 shapshot。如何做到这一点？

**编辑**：

我想如果我会这样做

```
rm -rf .git
git init
git add .
git commit 
```

我将失去原始来源 - 并且以后无法`git pull`。

**编辑 2**：

也许最简单的方法就是删除 repos 和

```
git clone --depth=1 <URL> 
```

他们再次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:41:00.697

更简单地说，您可以使用相同的 克隆这些存储库`--depth=1`，并复制远程存储库的配置（请参阅`.git/config`旧存储库中的文件并将相关部分复制到新存储库中的部分。

# ios - 在 MKPointAnnotation 上执行后端操作

> ID：10530169
> 
> 赞同：0
> 
> 时间：2012-05-10T08:27:46.267
> 
> 标签：ios, ios5, mkmapview, mkannotation, mkannotationview

我使用 MKPointAnnotation(s) 在 MKMapView 上填充了几个位置。在点击注释时，我会使用 UIActionSheet 菜单显示一些选项。这些选项有一些删除功能，当用户点击 UIActionSheet 上的删除选项时，会删除地图上选定的注释。问题是我无法确定单击了哪个注释点，我似乎没有参考它。

添加注解点的代码是：

```
while(looping array of locations)
{
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
annotationPoint.coordinate = {coord of my location}
annotationPoint.title = [anObject objectForKey:@"castTitle"];
annotationPoint.subtitle = [anObject objectForKey:@"storeName"];

[self.mainMapView addAnnotation:annotationPoint];
} 
```

在点击注释时显示 UIActionSheet 的代码是：

```
-(MKAnnotationView*)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView *pinView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];

    pinView.animatesDrop = YES;
    pinView.canShowCallout = YES;
    pinView.pinColor = [self getAnnotationColor];

    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self action:@selector(showOptions:) forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    return pinView;
}

-(IBAction)showOptions:(id)sender
{
        UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:NSLocalizedString(@"", @"") delegate:self cancelButtonTitle:NSLocalizedString(@"Cancel", @"Cancel") destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"Delete", @"Delete"),      nil];

        [sheet showInView:[self.view window]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T18:56:04.803

您还可以创建一个继承自 MKPointAnnotation 的类，并添加一个 id 属性，然后使用您的类：

```
@interface MyPointAnnotation : MKPointAnnotation 

@property int pointId;

@end 
```

然后在您的视图控制器中使用它：

创建注释：

```
 MyPointAnnotation *myAnnotation = [[MyPointAnnotation alloc]init];
    myAnnotation.coordinate= someCoordinates;
    [myAnnotation setTitle:@"i am annotation with id"];
    myAnnotation.pointId = 1;
    [self.mapView addAnnotation:myAnnotation]; 
```

如果您有一组坐标，则可以循环并创建注释。

您甚至可以通过其 id 自定义注释视图：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{

MKPinAnnotationView *view=(MKPinAnnotationView*)[self.mapView dequeueReusableAnnotationViewWithIdentifier:@"reuseme"];
  if (!view) {
      view=[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"reuseme"];
  }

  if (((MyPointAnnotation *)annotation).pointId == 1)
  {
      //the annotation with id 1.
  }
return view;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:43:55.993

似乎有两种方法。

如果一次只能选择一个注释，则可以访问`-selectedAnnotations`封闭的属性`MKMapView`。

另一种方法是检查`sender`in `showOptions:`，它是对`UIButton`触发操作的 的引用。找出它的附件`MKAnnotationView`，它会给你相关的`-annotation`。然后，您可以将其作为 ivar 存储，或者（我的首选方法）使用一些运行时魔法 - 以`objc_setAssociatedObject()`声明的形式`<objc/runtime.h>`- 将对注释的引用附加到操作表，从而允许在其委托回调中轻松检索。

（如果需要，您实际上可以在按钮创建阶段执行此操作，并将对注释的引用附加到 UIButton，可以直接在操作表中提取`showOptions:`并重新附加到操作表。

但`[MKMapView selectedAnnotations]`我认为如果它适合您的需求，这是更简单的方法。

# sql - 如何在 SQL 查询中处理一列中的多币种（精度和比例）

> ID：10530171
> 
> 赞同：1
> 
> 时间：2012-05-10T08:28:03.610
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我在表中有三列

```
TransactionDate---DateTime
TotalAmount---DECIMAL(18,4)
CurrencyCode---nVarchar(10)

TotalAmount-------------CurrencyCode
1000.5000----------------KD (Kuwaiti Dinnar) which must be 1000.500
5500.2000----------------ETB (Eithopian Birr)
2500.1500----------------USD (United States Dollars) which must be 2500.15 
```

我将这些多种货币存储在一列中......现在我想通过在 SQL 查询中使用 SUM() 函数来获取每天或每月的报告......但是 SUM必须根据每种货币的精度或规模来完成。即....如果货币是美元，那么

```
SUM(2500.15) 
```

如果货币是KD，那么

```
SUM(1000.500) 
```

如果 ETB 然后

```
SUM(5500.2000) 
```

像这样的东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:27:46.177

您可能应该将每种货币以最小的可能单位存储为整数。

例如，如果要存储美元，则应将值存储为“便士数”，而不是精度为 2 的十进制美元数。$1.00 变为 100。

当您执行“SUM”时，您可能需要“按货币分组”以使结果有意义。您的客户端软件需要知道如何正确显示每种货币，但不要让这干扰数据在数据库中的存储方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T10:46:22.937

```
SELECT CurrencyCode, SUM(TotalAmount)
FROM dbo.your_table
GROUP BY CurrencyCode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:36:29.257

根据您的问题（含糊不清），您是否正在尝试将货币转换为您的货币类型？

我认为这可能是您的示例数据的样子：

```
TransactionDate TotalAmount CurrencyCode
2012-06-01      12          KD
2012-06-01      25          KD
2012-06-01      55          ETB
2012-06-01       6          ETB
2012-06-01      13          USD
2012-06-01      10          USD 
```

你试图完成的逻辑是ex。如果 CurrencyCode = KD 则 sum(TotalAmount)*conversion rate （假设这是您列出的数字）

询问：

```
Select
  sum(
    case when [CurrencyCode] = 'KD' then [TotalAmount]*1000.500 
        when [CurrencyCode] = 'ETB' then [TotalAmount]*5500.2000 
        when [CurrencyCode] = 'USD' then [TotalAmount]*2500.1500 
        else 0 end) as [TotalCalcAmount]
From [SomeTable]
--Where [TransactionDate] between '2012-06-01' and '2012-06-30' --Commented out for test purposes 
```

SQLFiddle 解释：[http ://sqlfiddle.com/#!3/ade6e/3](http://sqlfiddle.com/#!3/ade6e/3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:52:45.943

这不能通过使用一列来实现，您应该为每个货币总和使用三列并相应地设置它们的精度，例如

```
 Select SUM(2500.15) as USD, SUM(1000.500) as KD, SUM(5500.2000) as ETB 
```

# javascript - 使用字符串中的开始和结束词以及javascript中的子字符串索引查找子字符串？

> ID：10530175
> 
> 赞同：0
> 
> 时间：2012-05-10T08:28:07.510
> 
> 标签：javascript

如果我将开始和结束标签/单词赋予函数并返回子字符串及其在 java 脚本中的开始和结束索引，如何在字符串中查找子字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:35:08.807

像这样的一些功能

```
extractword(str, start, end){
  var startindex = str.indexOf(start);
  var endindex = str.indexOf(end, startindex);
  if (startindex !=-1 && endindex !=-1 &&  endindex  > startindex )
    return str.substring(startindex , endindex )
} 
```

或者如果你知道可以使用一些正则表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:46:26.143

您想使用此代码：

```
function extractText(strToParse, strStart, strFinish){
  return strToParse.match(strStart + "(.*?)" + strFinish)[1];
}

extractText("first second third", "first", "third");​ 
```

这是一个简单的 [例子](http://jsfiddle.net/qFTMp/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:36:16.900

要在字符串中查找子字符串的索引，您应该使用[indexof 方法](http://www.w3schools.com/jsref/jsref_indexof.asp)。

要提取子字符串，我们使用[substring 方法](http://www.w3schools.com/jsref/jsref_substring.asp)。

如果在阅读了有关方法的文档后，您尝试了这些方法但仍有疑问，请发布您的代码，以便我们进一步提供帮助。

# css - Windows VS MacOS 上不同大小的字体渲染。怎么解决？

> ID：10530183
> 
> 赞同：1
> 
> 时间：2012-05-10T08:28:37.870
> 
> 标签：css, fonts

我一直想知道为什么我的字体在 Windows 上看起来比在 OSX 上更小，更糟糕。

屏幕截图 Mac VS Windows：[http ://screencast.com/t/UUxqLRhM](http://screencast.com/t/UUxqLRhM)

那是因为我在某些规则上使用了“em”而不是“px”吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:45:51.387

（这是来自评论，但我会发布作为答案。）

这对你来说没什么，罪魁祸首是不同的字体渲染引擎。Mac OS X 试图完全按照它们的设计呈现字体，而 Windows 试图稍微改变它们以使其更具可读性。问题是，对于某些字体和大小，它实际上使它们看起来更糟。（[这篇文章](http://www.codinghorror.com/blog/2007/06/font-rendering-respecting-the-pixel-grid.html)是关于这个主题的好读物。）

如果你把字体变大，它可能会让它在 Windows 上看起来更好。我敢说，如果你去掉粗体字重，它看起来也会更干净。您也可以尝试不同的字体。

总的来说，你所能做的就是玩不同的设置，看看什么看起来不错，什么不好看；实际的渲染是你无法控制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:42:30.267

不同的浏览器确实有不同的标准字体大小。Maybo 其他字体类型和显示操作系统字体的不同方式。100% 相同的外观是……不可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:40:33.107

MAC 和 PC 处理字体的方式不同，但这不是这里发生的事情。您设置了一种非网络安全字体“MyHelveticaBold”，并且窗口使用的字体显然与 Mac 上的字体不同。如果您不想使用[网络安全字体](http://www.w3schools.com/cssref/css_websafe_fonts.asp)，那么您应该使用可以在访问时提供给用户的[开源网络字体。](https://developers.google.com/webfonts/)

有一些 CSS 属性可以调整字体的呈现方式，例如 -webkit-font-smoothing。在这里阅读更多：http: [//blog.typekit.com/2011/01/26/css-properties-that-affect-type-rendering/](http://blog.typekit.com/2011/01/26/css-properties-that-affect-type-rendering/)

# vim - 如何检测 Vimrc 函数中的大写锁定

> ID：10530185
> 
> 赞同：10
> 
> 时间：2012-05-10T08:28:39.117
> 
> 标签：vim, capslock

在 Vim 中编辑代码时，我会经常在使用 ALL CAPS 编写内容时使用大写锁定。但是，当我完成大写部分时，我经常忘记关闭大写锁定。这会导致无止境的痛苦（因为，即 j 向下移动，但 J 将当前行与下面的行连接起来）。

通常，我想在退出插入模式时关闭大写锁定。如何在我的 .vimrc 中添加一些内容，以便在退出插入模式时关闭大写锁定？或者，如果我在退出插入模式时打开了大写锁定，我怎么能在我的 .vimrc 中添加一些东西，以便它会提醒我（状态行？哔声？任何警报都可以）？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:58:51.713

与所有其他应用程序一样，Vim / GVIM 位于终端/窗口管理器抽象之上，因此无法直接访问底层的原始键盘功能。因此，获取 Caps Lock 信息将涉及混乱且特定于平台的 hack。

相反，我建议您使用 Vim 功能在 Vim 中“模拟”Caps Lock，因为这没有您提到的问题。看看文章[Insert-mode only Caps Lock](http://vim.wikia.com/wiki/Insert-mode_only_Caps_Lock)，它详细解释了这一点。

# symfony - 如何使用 MopaBootstrapBundle 重用 Twitter-bootstrap 提供的变量？

> ID：10530187
> 
> 赞同：0
> 
> 时间：2012-05-10T08:29:02.393
> 
> 标签：symfony, twitter-bootstrap

我将[Symfony2.0](https://github.com/symfony/symfony/tree/2.0/)与提供 Twitter-bootstrap 的[MopaBootstrapBundle v2.x_sf2.0 一起使用。](https://github.com/phiamo/MopaBootstrapBundle/tree/v2.x_sf2.0/)实际上，我在文档中包含了主要的 Less[文件](https://github.com/phiamo/MopaBootstrapBundle/tree/v2.x_sf2.0#Using)。该文件包括来自 Twitter-bootstrap 的所有 Less 文件。我的问题是我无法访问其他文件中 TwitterBootstrap 提供的 mixins。

```
 {% stylesheets filter='less
       '@MopaBootstrapBundle/Resources/public/less/mopabootstrapbundle.less'
       '@MyBundle/Resources/public/less/myfile.less'
    %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
    {% endstylesheets %} 
```

解决此问题的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:42:15.100

在你的包中获取 mixin 和变量的一种方法是将 mopabootstrap.less 文件复制到`@MyBundle/Resources/public/less/bootstrap.less`并修改导入的路径以指向 MopabootstrapBundle。我还将添加一个额外的最后一个导入，称为`@import "bootstrap-override.less";`附加元素的样式。

您的样式表块将如下所示：

```
{% stylesheets filter='less
   '@MyBundle/Resources/public/less/bootstrap.less'
%}
<link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
{% endstylesheets %} 
```

如果您需要更改核心引导文件之一（您可能需要 variables.less），只需将它们复制到您的项目并更改 bootstrap.less 中的导入路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T23:22:51.597

我有一个类似的问题，我无法在我的自定义 less 文件中访问 variables.less 中的变量。所以我创建了一个包来帮助解决这个问题，也许有人会发现它很有用。

[https://github.com/realtyhub/BootstrapBundle](https://github.com/realtyhub/BootstrapBundle)

[https://packagist.org/packages/realtyhub/bootstrap-bundle](https://packagist.org/packages/realtyhub/bootstrap-bundle)

# coldfusion - CF（如果..headerlocation）？

> ID：10530189
> 
> 赞同：0
> 
> 时间：2012-05-10T08:29:06.043
> 
> 标签：coldfusion

我正在尝试制作一个 CF 代码，它将从用户名 = #session.username# 的表“用户”中选择“欢迎”行。

如果“欢迎”= 1，那么我希望它引导用户访问 /me/index.cfm

我是 CF 的新手，这怎么可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:54:19.567

首先，您需要通过它的声音进行数据库查询：

```
<cfquery name="getWelcome" datasource="yourDSN">
  SELECT welcome
  FROM users
  WHERE username = <cfqueryparam value="#session.username#" cfsqltype="CF_SQL_VARCHAR"> 
</cfquery> 
```

然后您需要检查查询中的值，并考虑到查询可能根本找不到任何东西的事实。

```
<cfif NOT getWelcome.recordcount>
<!--- do something, maybe redirect to the login page --->

</cfif>

<cfif getWelcome.welcome EQ 1>
  <cflocation url="/me/index.cfm">
</cfif> 
```

这里最重要的是使用cfqueryparam 来防止SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:51:53.473

你可以这样写：

```
<cfif welcome EQ 1>
<cflocation url="/me/index.cfm">
</cfif> 
```

# sql-server - tSQLt TRUSTWORTHY 和 CLR 要求

> ID：10530190
> 
> 赞同：6
> 
> 时间：2012-05-10T08:29:06.357
> 
> 标签：sql-server, testing, sqlclr, tsqlt

tSQLt测试框架需要为[数据库](http://tsqlt.org/)设置 TRUSTWORTHY ON，并为服务器启用 SQL CLR。

为什么需要这些？是否可以在没有 CLR 对象的情况下实现相同/相似的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T20:41:39.163

以下功能完全作为 CLR 代码实现，如果没有 CLR，将特别困难（而且可能不可能）：

*   CaptureOutput：用于记录和验证打印到控制台的输出
*   SuppressOutput：在内部用于帮助保持控制台清除因重命名对象而产生的警告（特别是在 FakeTable 中）
*   ResultSetFilter：捕获从产生多个结果集的存储过程产生的特定结果集所必需的
*   AssertResultSetsHaveSameMetaData：用于比较两个结果集的元数据
*   NewConnection：允许在新连接中执行任意 SQL 命令。当连接的某些属性必须不同时，用于测试。（如果我没记错的话，这可能是今天 TRUSTWORTHY ON 的唯一原因）。

除此之外，tSQLt 在内部使用 CLR 为非常大的字符串生成格式化输出，例如可以通过比较两个表生成的字符串；以及在重命名对象时生成新的对象名称（例如 FakeTable 或 SpyProcedure）。

可以想象，可以修改 tSQLt 以删除这些功能，并且仍然可以使用其基本功能集（当然有一些限制）。然而，当我们展望 tSQLt 的未来版本时，很可能在 CLR 中会做更多的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-19T13:59:39.597

不再需要 TRUSTWORTHY ON。请参阅发行说明： [http ://tsqlt.org/748/tsqlt-v1-0-5873-27393-release-notes/](http://tsqlt.org/748/tsqlt-v1-0-5873-27393-release-notes/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T12:03:31.577

如果您想使用 tSQLt，您可能别无选择，只能启用 SQL CLR。

有一种方法可以通过创建非对称密钥来绕过将数据库设置为 TRUSTWORTHY ON 的要求 - 请参阅[http://msdn.microsoft.com/en-us/library/ms345106.aspx](http://msdn.microsoft.com/en-us/library/ms345106.aspx)。

如果这是不可接受的，还有其他不需要在数据库中创建对象的数据库单元测试工具 - 例如[DbFit](http://benilovj.github.com/dbfit)

# facebook - 测试 Facebook 连接/断开连接

> ID：10530194
> 
> 赞同：0
> 
> 时间：2012-05-10T08:29:34.873
> 
> 标签：facebook, disconnect

我正在为我们的用户开发一些服务，这将有助于我们网站上的一些操作......

我正在实施 oAuth 2.0 并且与 FB 应用程序的连接工作正常......但我想重做测试......所以为此我需要从我们的网站断开 FB 应用程序/FB 会话......所以我可以重新测试连接...

有简单的方法吗？我试过 FB.logout(); 但这确实也让我从 FB 中注销，并且实际上并没有断开应用程序与网站的连接....

有什么建议吗？是删除所有 cookie 和会话的唯一方法吗？要删除哪些 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:48:15.987

没有尝试过，但这应该（理论上）有效。

```
<?php
$_SESSION['state'] = $_SESSION['code'] = $_SESSION['access_token'] = $_SESSION['user_id'] = '';
$_REQUEST['state'] = $_REQUEST['code'] = $_REQUEST['access_token'] = $_REQUEST['user_id'] = '';
?> 
```

# c# - 尝试为 SxS C#.NET COM DLL 调用 CoCreateInstance 时出现 HRESULT 0x80070002 (FILE_NOT_FOUND)

> ID：10530195
> 
> 赞同：2
> 
> 时间：2012-05-10T08:29:43.330
> 
> 标签：c#, com, side-by-side

我正在尝试从本机 COM 客户端中的 C#.NET DLL 创建一个 COM 对象。这是 C#.NET 代码

```
using System;
using System.Reflection;
using System.Runtime.InteropServices;

[assembly: AssemblyVersion("1.0.0.0")]
[assembly: Guid("3B6B6C37-A5BC-45DF-878E-E9D5C8B009D8")]

namespace NetTestCom
{
    [ComImport]
    [Guid("508012FC-26A9-4985-A985-3EBB03D8D3A6"),
        ComVisible(true)]
    public interface ITestClass
    {
        int StrToInt(String S);
    }

    [Guid("A3D56E20-0792-42D9-B2DD-BB8A8AD75394"),
        ComVisible(true)]
    public class TestClass : ITestClass
    {
        public int StrToInt(String S)
        {
            return Convert.ToInt32(S);
        }
    }
} 
```

如果我告诉 Visual Studio 为 COM 互操作注册它并调用 CoCreateInstance，它会按预期工作。

现在我想使用相同的 DLL 作为免费注册的并行 COM。我将依赖项添加到我的应用程序清单

```
<dependency>
  <dependentAssembly>
    <assemblyIdentity
      type="win32"
      name="NetTestCom.X"
      version="1.0.0.0" />
  </dependentAssembly>
</dependency> 
```

并创建一个文件 NetTestCom.X.manifest

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity
    type="win32"
    name="NetTestCom.X"
    version="1.0.0.0" />

  <clrClass
    clsid="{A3D56E20-0792-42D9-B2DD-BB8A8AD75394}"
    progid="NetTestCom.TestClass"
    threadingModel="Both"
    name="NetTestCom.TestClass"
    runtimeVersion="v2.0.50727" >
  </clrClass>

  <file name="NetTestCom.dll"></file>
</assembly> 
```

现在，当我尝试调用 CoCreateInstance 时，我得到 HRESULT 0x80070002。应用程序、DLL 和清单都在同一个目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:13:50.360

清单中似乎有问题。我将此依赖声明用于应用程序清单

```
<dependency>
  <dependentAssembly>
    <assemblyIdentity
      name="NetTestCom"
      version="1.0.0.0"
      processorArchitecture="MSIL" />
  </dependentAssembly>
</dependency> 
```

并且此清单为 NetTestCom.manifest （使用[GenMan32.exe](https://blogs.msdn.com/b/junfeng/archive/2007/04/14/genman32-a-tool-to-generate-sxs-manifest-for-managed-assembly-for-registration-free-com-net-interop.aspx?Redirected=true)生成）

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <assemblyIdentity
        name="NetTestCom"
        version="1.0.0.0"
        processorArchitecture="MSIL" />
    <clrClass
        clsid="{A3D56E20-0792-42D9-B2DD-BB8A8AD75394}"
        progid="NetTestCom.TestClass"
        threadingModel="Both"
        name="NetTestCom.TestClass"
        runtimeVersion="v2.0.50727">
    </clrClass>
    <file name="NetTestCom.dll">
    </file>
</assembly> 
```

现在它按预期工作。

# content-management-system - 是否有针对错字 3 的 eu_ldap 扩展的更新指南？

> ID：10530213
> 
> 赞同：0
> 
> 时间：2012-05-10T08:30:52.097
> 
> 标签：content-management-system, typo3, openldap, intraweb

我正在尝试模拟 Intranet CMS 并为typo3 安装了 eu_ldap 扩展。不幸的是，下载的指南已经过时了，而且当前的手册对于错字 3 的初学者几乎没有什么用处。是否可以从扩展中创建节点，还是必须在 ldap 服务器中定义？或者可以在typo3中创建用户，然后通过ldap进行身份验证，或者是否必须在操作系统上完成。我想构建一个 Intranet 系统并创建可以使用其他扩展创建资源的用户，但我也想构建访问控制。简而言之，我不明白哪些功能被委派给扩展，哪些必须在服务器端构建。目前，关于如何创建域，我最好的猜测是创建一个域对象，每个页面充当域根，它对应于 ldap 中的一个节点（例如 ou=Members），然后在其中创建一个 ldap 服务器对象该页面上的错字3，假设这是可行的（如果这是解决方法）如何创建用户并为其提供acls？然后添加到这个域例如？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:56:54.760

该扩展仅提供身份验证服务。因此，可以通过在扩展程序中提供连接数据将 TYPO3 连接到您的 ldap，然后每次登录尝试都不会在 TYPO3 端进行检查，而是重定向到 ldap 系统。这只是发回是否允许用户登录，并可能提供有关用户和分配的组的更多信息。

ldap 系统对 TYPO3 内部的结构一无所知，但您可以使用组来限制访问。

大多数 ldap 扩展都是这样工作的，取决于您是想为前端、后端还是两者提供登录，也可能有更好的扩展适合您的情况。你必须更具体一点

> 我想构建一个 Intranet 系统并创建可以使用其他扩展创建资源的用户，但我也想构建访问控制。

你希望他们创造什么样的资源？这意味着前端还是后端？您到底想要什么访问控制？页面或内容或插件/扩展或后端模块？

# plsql - plsql更新语句

> ID：10530214
> 
> 赞同：0
> 
> 时间：2012-05-10T08:30:59.270
> 
> 标签：plsql

我想写一个更新程序

哪种方法最好

1)**方法一**

```
if(condition)="P"

update table 
set fields1
 where field2 = "2" ;

else(condition)="U"
update table
 set fields1
 where field3 = "3" ; 
```

**2) 方法二**

```
 case condition
   when "p"
update table 
set fields1
 where field2 = "2" ;

   when "u"
   update table
 set fields1
 where field3 = "3" ; 
```

我应该使用哪种方法是否有使用它的理由以及为什么另一种方法不是一个好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:43:44.433

```
update table t
  set ...
  where (condition='P' and field2='2') or (condition='U' and field3='3') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T07:46:16.017

我建议您使用**CASE**，因为与**IF相比，** **CASE**更高效且可读性更高。但是如果你有小桌子而且只有 2 个案例要检查.. 我认为这没有任何意义..

# c++ - C++ ofstream：总是写在第一行

> ID：10530216
> 
> 赞同：0
> 
> 时间：2012-05-10T08:31:14.360
> 
> 标签：c++, io, overwrite

我想知道如何始终写入文件的第一行。我有数字要通过文本文件共享给另一个软件，我想在第一行定期写下这些数字。

谢谢。

欧

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:50:49.500

如果你想完全重写文件，丢弃它的内容然后简单地使用`trunc`模式。但是，如果您要保留任何其他内容，那么最简单的方法是将文件读入内存，更改第一行并将所有内容写回。我认为除非您覆盖相同数量的字符，否则无法直接更改第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:25:33.020

如果文件不是很大，那么您可以编写一个新的新文件，在除自定义第一行之外的每一行进行复制。然后更换原件。

```
void ReplaceFirstLine(string filename)
{
ifstream infile;
ofstream outfile;
infile.open(filename.c_str(), ios_base::in);
outfile.open("tempname.txt", ios_base::out);

bool first = true;
string s;
while (getline(infile, s, '\n'))
    {
    if (first)
        outfile << "my new first line\n";
    else
        outfile << s << endl;
    first = false;
    }

infile.close();
outfile.close();
::CopyFileA("tempname.txt", filename.c_str(), FALSE); // or Linux equivalent
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:35:04.693

看看这两个函数：

ostream& seekp (streampos pos); ostream& seekp (streamoff off, ios_bas:seekdir dir);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:50:01.417

也许这可以解决您的问题

```
 ofstream out("foo.txt");
 out << "foo";
 out << "\r" << "bar"; 
```

这将留下一个只有 bar 的文件。

第二种方法：如果文件只包含一行，您可以`ofstream::trunc`在每次写入后打开并关闭它

# python - 你能推荐一些 Python HTTP 客户端库吗？

> ID：10530217
> 
> 赞同：17
> 
> 时间：2012-05-10T08:31:19.100
> 
> 标签：python, httpclient

我想使用 Python 从某些网站捕获信息。我希望 HTTP 客户端满足以下条件：

1.  支持HTTPS

2.  不会使用太多内存，不应该产生很多进程或线程。

3.  有清晰的文档并得到积极支持

* * *

我知道`requests`,`tornado`或`gevent`-httpclient 可以完成我的任务，但我不知道哪个是最好的？或者还有其他选择吗？

或者，如果有一些其他的选择写在`C`/中`c++`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-10T08:33:56.403

使用[`requests`](http://docs.python-requests.org/en/latest/index.html). 它具有各种库中最相同的 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T12:12:05.337

另一种选择是[`httplib2`](https://code.google.com/p/httplib2/)。

*   简单（因此有效）
*   支持所有需要和 Python 3
*   不在 Github 上
*   在下一次提交之前可能会过去几个月（部分原因是它可以正常工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T15:21:00.617

这是另一个建议：

1.  **[GRequests](https://github.com/kennethreitz/grequests)**允许您使用带有 Gevent 的请求来轻松地发出异步 HTTP 请求。
2.  **[httplib2](https://github.com/httplib2/httplib2)**
3.  **[要求](https://github.com/requests/requests)**
4.  **[treq](https://github.com/twisted/treq)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-11T19:00:59.057

我发现 urllib3 是一个不错的选择。它为您设置请求池并轻松处理 SSL。

另外我认为 requests 现在在后台使用它。

[http://urllib3.readthedocs.io/en/latest/](http://urllib3.readthedocs.io/en/latest/)

# mysql - MySQL：左连接和不同表中具有相同名称的列

> ID：10530218
> 
> 赞同：10
> 
> 时间：2012-05-10T08:31:28.417
> 
> 标签：mysql

考虑：

```
SELECT * FROM `product` left join category on product.category_id = category.id 
```

此查询工作正常。但问题是，product 表和 category 表都有名为“name”和“id”的字段。所以当我获取这个查询的结果时，它只给了我一个名字和一个 ID，但我想要 ID 和名字。

我怎样才能做到这一点而不必重命名字段？*是否可以使用product_name*和*category_name*等自定义名称返回？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:33:45.063

您可以为字段添加别名：

```
SELECT
    a.id,
    a.name,
    a.category_id,
    b.id AS catId,
    b.name AS catName
FROM
    product AS a
LEFT JOIN
    category AS b ON a.category_id = b.category.id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T08:33:17.113

使用“AS”关键字，如：

```
SELECT product.id AS pid, category.id AS cid ... FROM `product` left join category on product.category_id = category.id 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T08:33:55.223

使用带有`AS`关键字的别名：

```
SELECT p.id AS product_id, p.name AS product_name, c.id AS cat_id, c.name AS cat_name
FROM `product` AS p
LEFT JOIN category AS c ON p.category_id = c.id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T08:33:54.780

```
SELECT p.*,c.* FROM product p LEFT JOIN category c on p.category_id = c.id; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-10T08:34:58.760

试试这个：

```
SELECT product.id AS productid, 
       category.id AS categoryid, ...
FROM `product` left join category 
       on product.category_id = category.id 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-26T18:22:17.993

我在 Node.js 项目中使用 MySQL 时遇到了类似的问题。

我发现，如果您仍想使用`select *`而不是列出所有列并使用别名，则可以使用以下方法：

```
SELECT *, category.id AS cId, category.name AS cName 
FROM product LEFT JOIN category ON product.category_id = category.id 
```

换句话说，只需为名称冲突的连接列创建别名。您不需要其他列或表名上的别名。

# java - 为什么命令行实用程序在使用 java 程序调用时需要很长时间才能给出输出？

> ID：10530220
> 
> 赞同：1
> 
> 时间：2012-05-10T08:31:34.220
> 
> 标签：java, linux, multithreading, process, processbuilder

我正在使用带有命令行实用程序的 libdmtx，它读取 ECC200 数据矩阵条形码的图像文件，读取它们的内容，并将解码的消息写入标准输出。我在 linux 平台上的 java 程序中使用了命令行实用程序。我正在使用 ubuntu linux。我已经在我的 linux 机器上安装了 libdmtx。当我调用命令时

dmtxread -n /home/admin/ab.tif

在 linux 终端上，它立即给出图像中条形码的解码值，即在 15 秒内。但是当我要使用我的 java 程序为同一个文件调用这个相同的命令时，该程序需要大量时间，即对于上面的相同命令和相同文件，平均需要 16 分钟。

以下是我调用上述命令的java代码

```
 public class Test {
 public static void main(final String[] args) throws IOException, InterruptedException {
     //Build command 
     List<String> commands = new ArrayList<String>();
     commands.add("dmtxread");
     commands.add("-n");
     commands.add("/home/admin/ab.tif");
     System.out.println(commands);
     //Run macro on target
     ProcessBuilder pb = new ProcessBuilder(commands);
     pb.redirectErrorStream(true);
     Process process = pb.start();

     //Read output
     StringBuilder out = new StringBuilder();
     BufferedReader br = new BufferedReader(new      InputStreamReader(process.getInputStream()));
     String line = null, previous = null;
     while ((line = br.readLine()) != null){
         System.out.println(line);
     }

     //Check result
     if (process.waitFor() == 0)
         System.out.println("Success!");
     System.exit(0);

     //Abnormal termination: Log command parameters and output and throw             ExecutionException
     System.err.println(commands);
     System.err.println(out.toString());
     System.exit(1);
 }
 } 
```

我想请教专家

请任何人解释我为什么java程序需要这么长时间来调用一个简单的命令，如果该命令直接在命令提示符下运行，它将在15秒内被调用。

请谁能告诉我减少这个时间的解决方案。

我猜该程序花费了这么多时间，因为 JVM 内部线程正在调用该进程。我的猜测是对的吗？如果是，那么我该如何克服这个问题。

请指导我解决这个问题。感谢您！

# javascript - 如何在 Tridion 中实现功能区工具栏按钮时链接弹出 JavaScript 和弹出 aspx 页面？

> ID：10530221
> 
> 赞同：5
> 
> 时间：2012-05-10T08:31:35.867
> 
> 标签：javascript, tridion

我正在为组件视图实现功能区工具栏按钮。

当我单击 RTF 字段时，该按钮将被启用。当我单击按钮时，它将打开一个 aspx 页面。当 aspx 页面打开时，相应的 JavaScript 应该默认初始化。但就我而言，它没有发生。
我为 JavaScript 和 aspx 页面提供了通用名称。请建议如何调试此问题并获得解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:09:21.990

你是说你的 JavaScript 文件根本没有被包含进来吗？

或者“初始化”方法没有被调用？

如果是前者，您应该查看您的依赖项。通常，您的编辑器配置文件中有一个组，其中包括 .js 文件和可选的 .css 文件。然后，您将在 .aspx.cs 文件中包含对该组的依赖，方法是包含一个 ControlResources 属性（传入组的名称）。

如果问题是你的“初始化”方法没有被调用，你应该检查你是否正在注册视图（例如`$display.registerView(FullNameOfYourClassIncludingNamespce)`在你的 JavaScript 文件的底部调用）

# database-design - 数据库命名约定 - 前缀

> ID：10530232
> 
> 赞同：0
> 
> 时间：2012-05-10T08:32:27.367
> 
> 标签：database-design, naming-conventions

我知道有很多针对这个问题的问题。尽管有很多好的命名约定建议，但我们的团队中进行了辩论。

一个团队成员坚持我们应该这样命名我们的表：sProducts 和这样的主键：ProductGuid

他的系统中有两个前缀（s，h），所以 s 代表静态和 h - 抱歉，我真的不知道。我可以看到那里绝对没有逻辑。他说每个大型的预言机和 ibm 系统都是这样工作的。我从未使用过 oracle 或 ibm 系统，那么是否有添加 s 和 h 之类的前缀的约定？它们代表什么？

有人在那里，谁也这样做？我很抱歉这个问题 - 但我不想总是添加一个 s 并且不知道为什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T01:14:32.447

> 他说每个大型的预言机和 ibm 系统都是这样工作的。

这是一个相当大胆的声明。很可能他是错的，即使我对数据库一无所知，我也会这么说。（我曾在 800 多家公司担任顾问。我从未见过这种情况。）

用表名编码今天的信念会为明天带来问题。表变成视图，视图变成表，视图变成表值函数，静态表变成，嗯，明天的“h-word”并不罕见。

当静态表格最终成为 h 字时，您将如何处理表格？留下名字吗？现在，每次需要找到该表时，您都必须更加努力地思考。把名字改成h字？现在你已经破坏了所有依赖它是静态的应用程序。更改名称并使用旧名称创建可更新视图？似乎很多工作一开始就可以通过一个好名字来避免。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T21:51:42.823

我对你提出的问题感到困惑。您提到“后缀”，但您显示“前缀”。

这里有很多宗教问题...

我在字段/列/属性的上下文中介绍了这一点。其他种类的东西也需要有一致的形式。

许多命名约定的根源——与命名标准不同——是 IBM 1970 年代的“OF 语言”。

OF 使用 PRIME-MODIFIER-CLASS 格式，为客户帐号生成 CUST-ACCT-NO。

一个好名字希望能完成几项任务……表明它是什么类型的数据（例如日期或文本）以及它对业务的意义。

CLASS 词（后缀，但匈牙利表示法中的前缀）将是今天类似于数据类型的内容的简短列表。日期、文本、代码、标志（今天的二进制）、金额等。

CLASS 单词不应该超过一打或两个。

PRIME/MODIFIER 词将更侧重于系统支持的业务问题。

无论如何……最难的部分是保持一致。

BIG no no 将 CODE 缩写为 CD 和 CDE。

破折号 (-)、下划线 (_)、camelCase 等分隔符问题由技术环境决定，不值得讨论。

在所有这些问题中，最重要的问题是一致性……人类最不擅长的事情。

没有正确的命名约定。如果你的梦想太复杂以至于别人无法理解，那么你就做出了错误的选择。

顺便说一句......命名约定是我们主要处理的......一个模糊的想法，幸运的是，它被写在一本尘土飞扬的，被遗忘的手册中。

命名标准是自动执行的，就像你的编译器一样。

我曾在一个大型系统上工作过，该系统具有出色的命名约定（由 DBA 强制执行）......能够浏览数据元素或段落名称并知道它是最解放的感觉。

# google-plus - 我的 Google+ 按钮和点击次数？

> ID：10530237
> 
> 赞同：0
> 
> 时间：2012-05-10T08:32:54.827
> 
> 标签：google-plus

我的网站上有 google+，直到昨天早上，我的点击次数超过了 350 次，然后无缘无故地开始下降大约每分钟 2-3 次，而且还在继续下降？有谁知道是什么导致了这个问题？我的网站是[http://www.dj-to-hire.com](http://www.dj-to-hire.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:47:38.070

您的标记存在一些问题，但它们似乎不会影响 +1 按钮。

首先，让我们解决一些小问题。您`<link rel="canonical" href="index.html" />`应该包含目标页面的完整 URL。它应该看起来像`<link rel="canonical" href="http://www.dj-to-hire.com" />`

不过，这似乎并没有导致问题，因为您在+1 按钮标记`http://www.dj-to-hire.com`的属性中明确指定。`href`我会做一些挖掘，看看我是否能弄清楚发生了什么。一旦我有东西要报告，我会更新这个答案:)

同时，您能否检查一下[网站管理员工具](http://www.google.com/webmasters/tools/)仪表板，看看它报告的 +1 计数是否仍然与您的按钮一致？

# salesforce - 错误：未知的构造函数

> ID：10530238
> 
> 赞同：0
> 
> 时间：2012-05-10T08:32:54.987
> 
> 标签：salesforce, apex-code, visualforce

我创建了一个自定义对象“Assure__c”和一个自定义顶点类“insEnfant”，如下所示：

```
<apex:page standardController="Assure__c" extensions="insEnfant"  standardStylesheets="true">
    <apex:sectionHeader title="Ajouter un assuré"
        subtitle="{!$User.FirstName}" help="/help/doc/user_ed.jsp?loc=help"></apex:sectionHeader>
    <apex:form >
        <apex:pageBlock title="Nouveau assuré" id="thePageBlock" mode="edit">
            <apex:pageBlockButtons >
                <apex:commandButton action="{!save}" value="Enregistrer"></apex:commandButton>
                <apex:commandButton action="{!cancel}" value="   Annuler   "></apex:commandButton>
            </apex:pageBlockButtons>

            <apex:pageBlockSection title="Liste des enfants" columns="1"
                rendered="{!IF(Assure__c.Nombre_enfants__c > 0, true, false)}">

            <apex:pageBlockTable value="{!accts}" var="a" id="table">
                <apex:facet name="footer">
                    <apex:commandLink value="Ajouter" action="{!addRow}" rerender="table,error"/>
                </apex:facet>

                <apex:column headerValue="Nom">
                    <apex:inputHidden value="{!Assure__c.Name}" id="theHiddenInput"/>
                </apex:column>
                <apex:column headerValue="Nom">
                    <apex:inputField value="{!a.Name}"/>
                </apex:column>
                <apex:column headerValue="Prénom">
                    <apex:inputField value="{!a.Prenom__c}"/>
                </apex:column> 
                                <apex:column headerValue="Né le">
                    <apex:inputField value="{!a.Date_de_naissance__c}"/>
                </apex:column>   
                                <apex:column headerValue="Lieu de naissance">
                    <apex:inputField value="{!a.Lieu_de_naissance__c}"/>
                </apex:column>   
                                <apex:column headerValue="Situation">
                    <apex:inputField value="{!a.Situation__c }"/>
                </apex:column>                          
            </apex:pageBlockTable>

            </apex:pageBlockSection>

            </apex:pageblock>
    </apex:form>
</apex:page>

public class insEnfant{

    public List<Enfants__c> accts {get; set;}

    public insEnfant(){
        accts = new List<Enfants__c>();
        accts.add(new Enfants__c());
    }

    public void addrow(){
        accts.add(new Enfants__c());
    }

    public PageReference save(){
        insert accts;
        PageReference home = new PageReference('/home/home.jsp');
        home.setRedirect(true);
        return home;
    }
} 
```

但是当我试图保存它时，我得到了这个错误：

```
Error: Unknown constructor 'insEnfant.insEnfant(ApexPages.StandardController controller)'
Create Apex method 'insEnfant.insEnfant(ApexPages.StandardController controller)' 
```

由于我是 salesforce.com 的新手，任何人都可以给我这个代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:43:42.883

看看[http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_extension.htm](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_extension.htm)，它解释了控制器扩展需要有一个构造函数，该构造函数接受一个`StandardController`as 参数。（您提供了一个不带参数的构造函数。）该页面上有一些示例代码可能对您有所帮助。

# java - 上传大文件后，Commons FTPClient 挂起

> ID：10530240
> 
> 赞同：3
> 
> 时间：2012-05-10T08:33:02.433
> 
> 标签：java, apache, upload, apache-commons, ftp-client

我正在使用 Apache Commons FTPClient 3.1 进行简单的文件上传。storefile() 适用于较小的文件（小于 100MB），但是当我尝试上传大于 100MB 的文件时，它会完成上传但只是挂起。

我试过像其他人建议的那样进入被动模式，但似乎并没有解决问题。我已经尝试了多个具有相同结果的 FTP 服务器，所以我猜它不是主机。

这是我正在做的事情的要点：

```
ftpClient.connect(...);
ftpClient.login(...);
ftpClient.enterLocalPassiveMode();
boolean success = ftpClient.storeFile(...);
if(success)
... 
```

对于大文件，该程序在第 4 行挂起，但确实成功上传了文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:41:09.813

[https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html)

它的超时。此链接可能会有所帮助。

控制通道保活特性：在文件传输过程中，数据连接忙，而控制连接空闲。FTP 服务器知道控制连接正在使用，因此不会因为缺乏活动而关闭它，但是网络路由器要知道控制连接和数据连接是相互关联的要困难得多。一些路由器可能会将控制连接视为空闲，如果数据连接上的传输时间超过路由器允许的空闲时间，则将其断开。对此的一种解决方案是通过控制连接发送安全命令（即 NOOP）以重置路由器的空闲计时器。启用如下：

```
 ftpClient.setControlKeepAliveTimeout(300); // set timeout to 5 minutes 
```

这将导致文件上传/下载方法大约每 5 分钟发送一次 NOOP。

# c# - wince 上的提示横幅

> ID：10530242
> 
> 赞同：0
> 
> 时间：2012-05-10T08:33:07.247
> 
> 标签：c#, windows-ce, dllimport, c#-2.0

我正在使用一个发送消息的类

```
EM_SETCUEBANNER = 0x1501; 
```

并且在我的桌面应用程序上运行良好..

现在我希望在 wince 上做同样的事情：我已经将 dllimport 从 user32.dll 更改为 coredll.dll，程序不会崩溃，但没有显示 cuebanner...

有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:17:13.573

根据 MSDN [here](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761639.aspx)和[here](http://msdn.microsoft.com/en-us/library/kb01s86y.aspx)它适用于 Windows XP 及更高版本。[此页面](http://www.danielmoth.com/Blog/TextBox-Prompt.aspx)还表明它不适用于 Windows CE。

# api - 浏览器套接字 API？

> ID：10530260
> 
> 赞同：0
> 
> 时间：2012-05-10T08:34:12.627
> 
> 标签：api, sockets, firefox, browser

我尝试将 websockets 用于 WebGL 中的一个小游戏，但由于 websockets/浏览器支持不稳定而完全失败。你知道除了 Flash 套接字之外的任何东西，可以用来在我的游戏中实时创建的 Ajax 吗？请只用firefox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:40:14.490

好吧，你在那里限制了你的选择。坦率地说，Flash 套接字可能是您目前最稳定的选择，如果稳定性比使用即将推出的标准更让您关注，那么使用插件的选择应该是一个简单的选择。

不过，我并不完全清楚是什么原因导致您放弃 Websockets。当您说“不稳定”时，您的意思是 API 一直在发生变化（它已经发生了变化），它无法保持连接，或者浏览器支持受到限制？（您确实只说 Firefox，所以我无法想象这会是一个问题。）

唯一想到的其他 HTML5 解决方案是[WebRTC](http://en.wikipedia.org/wiki/WebRTC)，它将具有类似 UDP 的持久连接，但我不确定是否有任何浏览器实际实现了它的那部分。与此同时，当 API 稳定下来时，我建议通过[Socket.io](http://socket.io/)使用 Websockets ，因为它们在抽象出一些兼容性怪癖方面做得相当好（如果 Websockets 不可用，甚至可以回退到 Flash 套接字。 )

使用尖端技术进行开发的一部分是接受它们通常是移动目标的事实。值得非常认真地问自己：我更关心标准还是稳定性？在某些时候，它们会汇合到同一个东西上，但我们还没有。

# actionscript-3 - Flash Builder 4 - 在逐步调试时在浏览器中查看输出？

> ID：10530263
> 
> 赞同：0
> 
> 时间：2012-05-10T08:34:23.967
> 
> 标签：actionscript-3, debugging, ide, flash-builder

如您所知，当我设置断点并逐步运行项目时，浏览器就会挂起，并且只有在我恢复执行后才能在浏览器中查看应用程序。

我只是想知道在调试模式下逐步执行时是否有任何方法可以查看浏览器中的更改。

如果它得到官方支持，那么是否有任何破解或解决方法？

我想**直观**地看到变化，请不要建议任何其他调试方法（如跟踪和日志记录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:22:58.500

这些天我发现这是不可能的，因为当我们在断点处调试时，附加到浏览器的调试器会冻结浏览器。

但是，我找到了一种在浏览器执行时查看输出的方法

我们所需要的只是将浏览器和 Flash 构建器并排或堆叠排列，以便 fb 和浏览器都可见。现在，当您逐步执行时，您可以看到浏览器中的视觉变化。

如果您有分屏（双显示器），这会容易得多

唯一需要注意的是，它不显示补间动画，在大多数情况下这不应该是一个问题（至少对我来说）

希望这可以帮助一些人

# jsp - 如何在 JSP 中编写方法并调用它们？

> ID：10530267
> 
> 赞同：1
> 
> 时间：2012-05-10T08:34:53.823
> 
> 标签：jsp

以下是我的jsp代码。我是 JSP 的新手。我收到代码后显示的错误

```
<body>
<%!
    public ArrayList<ArrayList<Leg>> trip;
    public void routeManager(){
        Location stLoc = new Location(60.2040521,24.96185113,"1023");
        Location endLoc = new Location(60.17936316, 24.92282214 ,"1130");
        RouteRetriever hrr = new RouteRetriever();
        trip = hrr.getRoutes(stLoc, endLoc, false);
    }
%>
<%  routeManager();
    System.out.println("Im here AA");%>
<%= out.println("Hello World:"+hrr.size()) %>
<p>Booooooooooooo!</p>
</body> 
```

错误：

```
An error occurred at line: 30 in the jsp file: /index.jsp
The method print(boolean) in the type JspWriter is not applicable for the arguments (void) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:45:07.317

我觉得你应该改变

```
<%= out.println("Hello World:"+hrr.size()) %> 
```

到（只是输出）

```
<%= "Hello World:"+trip.size() %> 
```

或者如果您想使用 println（将 <%= 更改为 <%）：

```
<% out.println("Hello World:"+hrr.size()); %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:18:53.433

`<%=%>`并且`out.println`不一起去。

改变

到

```
<% out.println("Hello World:"+hrr.size()); %> 
```

`<%=%>``out.write`是Jsp页面编译时转换成的简写

# sql - Crystal Reports 中的嵌套 SQL 命令

> ID：10530273
> 
> 赞同：2
> 
> 时间：2012-05-10T08:35:07.807
> 
> 标签：sql, crystal-reports, sqlcommand, crystal-reports-xi

是否可以将命令的结果用于 Crystal Reports 中的另一个命令？

例如，我有一个命令

```
SELECT foo FROM bar WHERE foo2 IN (list) 
```

另存为 command_1
现在我想要

```
SELECT xfoo FROM xbar WHERE xfoo2 IN (command_1.foo) 
```

在一个简单的情况下，我意识到我可以将它们结合起来

```
SELECT xfoo FROM xbar WHERE xfoo2 IN (SELECT foo FROM bar WHERE foo2 IN (list)) 
```

但在我的现实世界中，由于嵌套 SELECT 太多而给我带来了错误。

如果有人想给出一个具体的而不是一般的答案，我的现实世界的例子：

现有命令另存为`pnr`：

```
SELECT DISTINCT rem.pop_pid
FROM a_remiss rem
INNER JOIN a_bestall best ON rem.arem_id = best.arem_id
JOIN a_prov prov ON best.apro_id = prov.apro_id
WHERE prov.pro_provdat >= {ts '2006-01-01 00:00:00'}
AND prov.pro_provdat <= {ts '2011-12-31 23:59:59'}
AND best.ana_analyskod IN ('PKREAT', 'PKREA', 'PKREAN')
AND (
rem.pop_pid LIKE '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9] 1[89]'
OR rem.pop_pid LIKE '[01][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9] 20'
) 
```

想要额外的新命令：

```
SELECT arem_id, apro_id, ana_analyskod
FROM a_bestall
WHERE ana_analyskod IN('ABSBIK', 'BCRPS')
AND arem_id IN (
SELECT arem_id
FROM a_remiss
WHERE rem_ank_dttm >= {ts '2006-01-01 00:00:00'}
AND rem_ank_dttm <= {ts '2012-01-31 23:59:59'}
AND pop_pid IN pnr.pop_pid
) 
```

*编辑：修复了现在使嵌套 SELECT 工作的代码错误，但能够嵌套命令仍然很好。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:05:10.797

简短的回答是否定的，命令不能嵌套。

如果您可以让语法在查询工具中工作，那么它应该在命令中工作。

如果您仍然遇到语法错误，请考虑使用不同的数据库驱动程序。我注意到“本机”驱动程序比 ODBC 做得更好。

# iphone - UIImage无法检测到触摸

> ID：10530275
> 
> 赞同：1
> 
> 时间：2012-05-10T08:35:13.173
> 
> 标签：iphone

我使用下面的代码来检测 UIImage 上的触摸

//

```
#import <UIKit/UIKit.h>

@interface KUIImageView : UIImageView
{

        CGPoint startLocation;
}
@end

@implementation KUIImageView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    // Retrieve the touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    startLocation = pt;
    [[self superview] bringSubviewToFront:self];
}
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event {
    // Move relative to the original touch point
    CGPoint pt = [[touches anyObject] locationInView:self];
    CGRect frame = [self frame];
    frame.origin.x += pt.x - startLocation.x;
    frame.origin.y += pt.y - startLocation.y;
    [self setFrame:frame];
}

@end 
```

我在 touchesBegan 处设置断点

但是没有触发

UIImage 通过使用在 UIScrollView 上

```
[aScrollView addObject:aUIImageView]; 
```

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:36:01.487

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // here
        self.userInteractionEnabled = YES;
    }
    return self;
} 
```

# quickbooks - 使用 webconnector 将我的数据同步到 Quick Books 时出现 ReceiveResponseXML 错误

> ID：10530278
> 
> 赞同：0
> 
> 时间：2012-05-10T08:35:26.403
> 
> 标签：quickbooks, qbwc

我正在使用 webconnector 将我的数据同步到快速书桌面。我收到以下错误。

> ```
> > QBWC1042: ReceiveResponseXML failed Error message:
> > System.Web.Services.Protocols.SoapException: Server was unable to
> > process request. ---> System.NullReferenceException: Object reference
> > not set to an instance of an object.    at
> > QuickBooksItemOps.extractItemQueryResponses(String response, Session
> > sess) in
> > c:\inetpub\wwwroot\QWCInvoiceSample\service\App_Code\QuickBooksItemOps.cs:line
> > 39    at SampleController.processLastAction(Session sess, String
> > response) in
> > c:\inetpub\wwwroot\QWCInvoiceSample\service\App_Code\SampleController.cs:line
> > 188    at QWCInvoiceSample.receiveResponseXML(String ticket, String
> > response, String hresult, String message) in
> > c:\inetpub\wwwroot\QWCInvoiceSample\service\App_Code\QWCInvoiceSample.cs:line
> > 290    --- End of inner exception stack trace --- More info:
> > StackTrace =    at
> > System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage
> > message, WebResponse response, Stream responseStream, Boolean
> > asyncCall)    at
> > System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String
> > methodName, Object[] parameters)    at
> > QBWebConnector.localhost.WCWebServiceDoc.receiveResponseXML(String
> > ticket, String response, String hresult, String message)    at
> > QBWebConnector.localhost.WCWebService.receiveResponseXML(String
> > ticket, String response, String hresult, String message)    at
> > QBWebConnector.SOAPWebService.receiveResponseXML(String wcTicket,
> > String response, String hresult, String message)    at
> > QBWebConnector.WebService.do_receiveResponseXML(String wcTicket,
> > String response, String hresult, String message, Boolean& success,
> > Boolean& timeout) Source = System.Web.Services 
> ```

你能指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:42:43.927

您的 C# 代码引发错误。修复你的代码。

```
> System.Web.Services.Protocols.SoapException: Server was unable to
> process request. ---> System.NullReferenceException: Object reference
> not set to an instance of an object.    at
> QuickBooksItemOps.extractItemQueryResponses(String response, Session
> sess) in
> c:\inetpub\wwwroot\QWCInvoiceSample\service\App_Code\QuickBooksItemOps.cs:line
> 39    at SampleController.processLastAction(Session sess, String
> response) in
> c:\inetpub\wwwroot\QWCInvoiceSample\service\App_Code\SampleController.cs:line
> 188 
```

或者至少发布您的代码以及您正在解析的 qbXML 响应，以便我们可以帮助您解决问题。

# javascript - 在 JavaScript 中，如何从字符串中提取纬度和经度

> ID：10530279
> 
> 赞同：1
> 
> 时间：2012-05-10T08:35:31.007
> 
> 标签：javascript, regex, latitude-longitude, string-parsing

我正在从数据库中提取一个字符串，该字符串需要分别解析为纬度和经度，该字符串被定义为“点”，格式如下：

`(2.340000000,-4.50000000)`

我正在尝试删除括号，然后用该方法解析它们，`split()`但我无法想出一个正确完成工作的正则表达式：

到目前为止，我已经尝试了许多替代方案，并且

```
var latlong = "(2.34000000, -4.500000000)"
latlong.replace('/[\(\)]//g','');
var coords = latlong.split(',');
var lat = coords[0];
var long = coords[1]; 
```

如果我运行它，我得到的只是： `NaN, -4.500000`

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:41:22.313

[似乎有效](http://jsfiddle.net/cYrh5/1/)，但你有一个额外的斜线

```
var value = '(2.340000000,-4.50000000)';

//you had an extra slash here
//           ''''''''''''''''v
value = value.replace(/[\(\)]/g,'').split(',');

console.log(value[0]);
console.log(value[1]);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:58:35.843

```
 var latlong = "(2.34000000, -4.500000000)"
 var coords = latlong.replace(/[\(\) ]/g,'').split(',');

 console.log(coords[0])
 console.log(coords[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:39:37.700

您可以删除拆分，只需将 match 函数与`\((\-?\d+\.\d+), (\-?\d+\.\d+)\)`将返回两个坐标的正则表达式一起使用。Firebug 控制台输出：

```
>>> "(2.34000000, -4.500000000)".match(/\((\-?\d+\.\d+), (\-?\d+\.\d+)\)/);
["(2.34000000, -4.500000000)", "2.34000000", "-4.500000000"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:44:27.610

您可以尝试使用[`math`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)功能：

```
var latlong = "(2.34000000, -4.500000000)"
var coords = latlong.match(/\((-?[0-9\.]+), (-?[0-9\.]+)\)/);

var lat = coords[1];
var long = coords[2];
alert('lat: ' + lat);
alert('long: ' + long); 
```

# android - 具有可变皮肤的Android应用程序

> ID：10530281
> 
> 赞同：1
> 
> 时间：2012-05-10T08:35:31.800
> 
> 标签：android, themes, skin

我想给用户选项来更改应用程序的皮肤或主题。比方说可下载的皮肤或内置的皮肤数量。有什么想法如何实施吗？

# c# - 引用的项目未通过引用的程序集进行

> ID：10530284
> 
> 赞同：1
> 
> 时间：2012-05-10T08:35:41.930
> 
> 标签：c#, visual-studio, reference, assemblies

这已被问过几次，但其他各种答案都与客户资料有关，在这种情况下这不是问题。

我有一个具有以下结构的解决方案文件：

*   解决方案
    *   项目一
        *   Nuget 对 ServiceStack 的引用
    *   项目 2
        *   项目 1 的项目参考

问题是nuget包引用了ServiceStack.Common，它很高兴地将其引入项目1，但是在构建项目2时，引用没有被执行（我假设这是因为它没有在任何地方使用）。

环顾一下以前有过这种情况的其他人，他们倾向于只引用项目 2 中的 ServiceStack.Common 来解决它，但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:42:31.050

如果您想携带 ServiceStack.Common 甚至不引用它，那么您可以将其复制到 Project2 项目属性 -> 构建事件下的 Post 或 Pre build event 命令行选项中的所需路径。

# c++ - 你如何循环读取 C++ 套接字？

> ID：10530285
> 
> 赞同：1
> 
> 时间：2012-05-10T08:35:45.200
> 
> 标签：c++, string, sockets, loops

你如何循环读取 C++ 套接字。

```
stringstream ss;
while (1) {
    char buf [2];
    ssize_t e = read(fd, buf, 2);

    ss << buf[0];
    ss << buf[1];

    cout << e << endl;
    cout << buf[0] << endl;
    cout << buf[1] << endl;

    if (e <= 0) {
        break;
    }
}
string msg = "";
ss >> msg; 
```

当我 telnet 并输入 hello 然后输入以进行测试时，我得到了

```
2
h
e
2
l
l
2
o

1 
```

它只是在那里等待，没有循环。发生了什么，我如何读取套接字？

如何使用 EOF 来表示

1.  远程登录

2.  buf 在 write(fd, buf, bufSize) 的上下文中；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:11:45.413

> 如何使用 EOF 来表示
> 
> 1) 远程登录
> 
> 2) 写上下文中的buf(fd, buf, bufSize)；

首先，您要发出信号的不是 EOF。它是“消息结束”或“您刚刚收到的数据是一个完整的协议数据单元，您现在应该处理它”。答案是，*无论你想要什么*，只要双方同意。

例如，您可以`~`专门保留字符以标记消息的结尾。为了指示消息的结束，一方发送一个`~`. 对方知道，当它收到一个 时`~`，之前的所有内容都是一条消息，之后的所有内容都是一条新消息。

您还可以在发送实际消息之前发送消息的长度。您可以在文本中执行此操作，后跟零字节或换行符。或者，您可以将每条消息设为一行。

您可以这样做，但是在您的特定应用程序中最有意义，但您实际上必须这样做。

TCP 会在两种情况下为您做到这一点：

1）当一方完成发送并且知道另一方无论如何都不会再发送数据时，它可以`close`在套接字上使用。对方将读取已发送的其余数据，然后`read`返回`0`。

2）当一方不再发送任何数据但另一方可能发送更多数据时，它可以`shutdown`连接它的一方。但它永远无法发送更多数据。另一方将知道此关闭，并且如果专门为此进行编码，则可以继续发送数据，直到关闭它的一半。然后对方`read`将返回零。（请注意，如果您对一个并非设计用于接收它的程序执行此操作，它可能会感到困惑并且没有意识到它仍然可以向您发送数据。）

否则，一切都取决于你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:38:49.567

你是什​​么意思没有循环？再打一些，按回车，你会看到更多的输出..

如果你完成了，你必须按 Ctrl+D 来表示输入结束 (EOF)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:13:56.073

TCP 数据包是流，而不是文件。如何读取流由您决定。

通常，如果您在一端写入 20 个字节，则在一次读取中您将在另一端获得 20 个字节，除非使用一些常见的 tcp/ip 选项。

有以下假设。一些假设是：

假设所有的脚手架代码都在那里。

假设我犯了错误并自己调试。

假设处理了所有字节顺序问题。

假设您足够聪明，不会将浮点类型作为二进制发送。

*   一些程序员选择使用以长度为前缀的数据包并读取长度字节（2），然后读取该长度表示的尽可能多的字节，就像这样。

    ```
     unsigned char buffer[MAX_CHAR] = "";
     unsigned char length = 0;
     int bytesRead = 0;

     read( fd, sizeof( length ), &length );
     // Handle failure from read
     while( bytesRead < length )
     {
         int readRv = read( fd, &buffer[bytesRead], length - bytesRead );
         if( readRv <= 0 )  // 0 usually means socket was closed. -1 is an erro
         {
             // Handle socket error/closed socket
         }
         else if( readRv < length )
         {
             bytesRead += readRv;
         }
         else if( readRv == length )
         {
             bytesRead = readRv;
             break;
         }
     } 
    ```

*   一些程序员阅读可用的内容并寻找数据包结束标记

    ```
     unsigned char buffer[MAX_CHAR] = "";
     unsigned char length = 0;
     int bytesRead = 0;
     int readRv = read( fd, buffer, sizeof( buffer ) );
     int eopFound = 0;

     if( (eopFound = findEndOfPacketMarker( buffer )) > 0 )
     {
         // Less than 0 = error.
     }
     else if( eopFound == 0 )
     {
         // No end of packet, must read more bytes here
     }
     else
     {
         // Found an end of packet marker
     }

     // Here you deal with bytes that are "over read"
     // Either the
     // 1) packet was bigger than buffer,
     // 2) there were bytes left over after the EOP marker
     // 3) Martians crapped in your code and screwed it all up. :) 
    ```

*   一些程序员使用一组固定大小的数据包和一个数据包类型 id

    ```
    int packetType;

     unsigned char buffer[MAX_CHAR] = "";
     unsigned char length = 0;
     int bytesRead = 0;

     read( fd, sizeof( packetType ), &packetType );
     read( fd, getLengthFromPacketType( packetType ), buffer ); 
    ```

这应该涵盖大多数事情......如果您有更多问题，请在评论中与`@`JimR thingy 一起提问，以便它显示为我阅读的消息。

# sql-server - 在 sql server 2008 中使用 unicode 文本

> ID：10530290
> 
> 赞同：7
> 
> 时间：2012-05-10T08:36:08.000
> 
> 标签：sql-server, unicode, collation

我想在我的网站中使用 unicode 文本。我在数据库中有 nvarchar(max) 数据类型来存储数据。当我将 unicode 文本保存到数据库中时，它工作正常。但是，当我尝试执行一些 sql 操作时，unicode 文本更改为“?????” 例如，下面的查询

```
declare @unicodetext nvarchar(250)
set @unicodetext='बन्द'
select @unicodetext 
```

结果

![sqlunicode](../Images/79e06b656cf9303d534746e9d2d127a2.png)

解决方案是什么？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T08:41:24.637

尝试

```
declare @unicodetext nvarchar(250)
set @unicodetext = N'बन्द'
select @unicodetext 
```

也许您注意到 SQL Server`N`在为您生成 DDL 脚本时会使用任何带引号的字符串输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:42:26.837

您必须将数据库排序规则设置为接受此类字符的排序规则，或者您可以像这样在您的选择中添加排序规则子句（谷歌告诉我这是一个印地语字符）

```
declare @unicodetext nvarchar(250)
set @unicodetext='बन्द'
select @unicodetext
COLLATE Indic_General_90_CI_AS 
```

那行不通，但我在 SQL Server 2005 的 BOL 上找到了这个：

> 4 在 SQL Server 2005 中不推荐使用印地语排序规则，因为此 SQL Server 版本中使用了 Windows 2000 排序表。排序规则仍然存在于服务器中，但在未来的 SQL Server 版本中将不支持它，并且它不会显示在 ::fn_helpcollat​​ions() 中。
> 
> 5 在 SQL Server 2005 中不推荐使用 Hindi 和 Lithuanian_Classic 排序规则。这些排序规则仍然存在于服务器中，但在未来的 SQL Server 版本中将不再支持它们，并且它们不会出现在 ::fn_helpcollat​​ions() 中。

2008年：

> 印地语（印度）- 在服务器级别不可用

# sharepoint-2010 - SharePoint 主页模板类型

> ID：10530292
> 
> 赞同：0
> 
> 时间：2012-05-10T08:36:11.863
> 
> 标签：sharepoint-2010

我有一个全新的 SharePoint 2010 安装。在使用它时，我不小心将主页设置为文档存储（我以管理员身份登录）。在将主页转换为文档存储之前，如何重置主页以显示原始选项？

我试过`Site Actions -> Reset site definition`了，但这没有帮助。

**解决方案**

SharePoint 不允许更改网站定义。允许选择站点定义的页面 ([YOUR-SITE]/_layouts/templatepick.aspx) 说：

> 模板选择 网站模板决定了哪些列表和功能将在您的新网站上可用。根据每个模板的描述以及您打算如何使用新站点来选择站点模板。创建后可以自定义站点的许多方面。但是，一旦创建了站点，就无法更改站点模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:52:56.487

要选择一个页面作为主页，请导航到该页面并单击页面功能区。您将在功能区的“页面操作”部分看到“制作主页”按钮，然后在显示的弹出提示中确认操作。

# java - Java 将数据写入文件并下载？

> ID：10530293
> 
> 赞同：1
> 
> 时间：2012-05-10T08:36:14.543
> 
> 标签：java, desktop-application, filechooser

我是 Java 的新手，面临桌面应用程序的问题。我必须写入数据并将其输出为“data.txt”（意味着不将文件写入固定位置）并让用户下载此文件。我在互联网上搜索了很多，但没有得到任何适当的解决方案。欢迎所有建议。

注意：我使用的是 NetBeans IDE 7.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:45:42.153

将数据保存在流中，然后显示 FileChooser 对话框，让用户决定将文件保存到何处。然后将流写入所选文件。

可以在此处阅读有关文件选择器的更多信息：http: [//docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:58:31.493

一旦你在服务器上创建了你的文件，你就可以做类似的事情来向我的客户发送图像文件（在我的情况下，它是一个`JSP`但它实际上并不重要你的客户在哪里）：

```
/**
 * Writes file with a given path to the response.
 * @param pathToFile
 * @param response
 * @throws IOException if there was some problem writing the file.
 */
public static void writeFile(String pathToFile, ServletResponse response) throws IOException {
    try(InputStream is = new FileInputStream(pathToFile);
        OutputStream out = new Base64OutputStream(response.getOutputStream());){
        IOUtils.copy(is, out);
    }
} 
```

这些是它使用的导入：

[导入 org.apache.commons.codec.binary.Base64OutputStream；](http://commons.apache.org/codec/)

[导入 org.apache.commons.io.IOUtils；](http://commons.apache.org/io/)

在客户端（在您的桌面应用程序中），您将使用相同的[IOUtils](http://commons.apache.org/io/)从[Base64](http://commons.apache.org/codec/)对其进行解码，然后您可以将其存储在您想要的任何地方。对于这一点，@Matten 实际上给出了一个简洁的解决方案（+1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:02:17.713

我有例子，`JFileChooser`但很抱歉仍然没有明白你对下载的看法。

```
BufferedOutputStream buff = null;
BufferedReader reader = null;
JFileChooser fileChooser;
File file;

fileChooser.showSaveDialog(this);

file = new File(fileChooser.getSelectedFile().toString());
file.createNewFile();

reader = new BufferedReader(new StringReader("String text"));
buff = new BufferedOutputStream(new FileOutputStream(file));

String str;
while ((str = reader.readLine()) != null) {
    buff.write(str.getBytes());
    buff.write("\r\n".getBytes());
} 
```

# app-store - App Store 上的相同应用

> ID：10530296
> 
> 赞同：1
> 
> 时间：2012-05-10T08:36:36.120
> 
> 标签：app-store, appstore-approval

是否可以在 App Store 上拥有相同的应用程序，但使用两个不同的开发者帐户，并且名称略有不同？

我需要将应用程序从一个开发帐户移动到另一个帐户，但我希望先将其上传到新帐户，然后再将其从旧帐户中删除。

有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:52:28.467

这两个应用程序必须具有唯一且不同的 iTunes Connect 名称和不同的 Bundle ID。确定这是否可行的唯一可靠方法是提交新应用程序，然后查看 Apple 是否批准它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:19:28.390

我已经看到 Arawella corp 的同一个应用程序“智能闹钟”以免费版本和付费版本的形式出售。他们本质上在应用商店中有两次相同的应用，只是图标不同。如果一家这么大的公司可以侥幸逃脱，你可能也可以（付费版和免费版）

# vba - 如果使用 vb 脚本调用宏将被禁用

> ID：10530299
> 
> 赞同：5
> 
> 时间：2012-05-10T08:37:15.253
> 
> 标签：vba, vbscript

我正在尝试使用 vbs 调用我的 excel 宏。这是我的代码片段。

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("C:\Folder\Test_PO.xls")
objExcel.Application.Visible = True
objExcel.Application.Run "C:\Folder\Test_PO.xls!Data_Analysis"
objExcel.ActiveWorkbook.Close
objExcel.Application.Quit
WScript.Echo "Finished."
WScript.Quit 
```

现在这里的问题是我能够打开文件，但是宏在这里被禁用并显示给我`'macro may not be present or may be disabled'`。我确定我正在调用正确的宏名称，但是一旦打开文件，我已将宏配置为从中运行的加载项选项卡就会消失。如果我手动打开文件，这不会打开，我可以看到选项卡并从选项卡本身运行宏。有什么建议我可以克服这个问题并让宏运行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:42:32.070

尝试这个

```
Dim objExcel, objWorkbook 

Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("C:\Folder\Test_PO.xls")
objExcel.Visible = True
objExcel.Run "Data_Analysis"
objWorkbook.Close
objExcel.Quit

Set objWorkbook = Nothing
Set objExcel = Nothing

WScript.Echo "Finished."
WScript.Quit 
```

**编辑**

如果宏在一个模块中，那么上面的内容会有所帮助。如果宏在工作表中说，Sheet1 然后替换该行

```
objExcel.Run "Data_Analysis" 
```

和

```
objExcel.Run "sheet1.Data_Analysis" 
```

**跟进**

试试这个代码。

```
Dim objExcel, objWorkbook, ad, FilePath

Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True

For Each ad In objExcel.AddIns
    If ad.Name = "Converteam.xla" Then
        FilePath = ad.Path & "\Converteam.xla"
        Exit For
    End If
Next

objExcel.Workbooks.Open (FilePath)

Set objWorkbook = objExcel.Workbooks.Open("C:\Folder\Test_PO.xls")

objExcel.Run "Data_Analysis_Converteam"
objWorkbook.Close
objExcel.Quit

Set objWorkbook = Nothing
Set objExcel = Nothing

WScript.Echo "Finished."
WScript.Quit 
```

**解释**：

使用时`CreateObject`，默认情况下不安装加载项。请看这个链接。

**主题：在 Excel 中使用 CreateObject 命令时加载项不加载**

**链接**： http: [//support.microsoft.com/kb/213489/](http://support.microsoft.com/kb/213489/)

您必须加载加载项，然后调用相关的宏。此外，您的宏的名称不是`Data_Analysis`但是`Data_Analysis_Converteam`

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:47:22.123

要添加到 Siddhart 的答案 - 您可以像这样在 VBScript 中加载所需的插件：

```
objExcel.RegisterXLL("analys32.xll") 'For XLL addins
objExcel.Workbooks.Open(objExcel.LibraryPath & "\analysis\atpvbaen.xla") 'For standard XLA addins
objExcel.Workbooks.Open("C:\Program Files\MyAddins\MyAddin.xla") 'for custom XLA addins 
```

# perl - 是否可以为依赖于用户输入的模块编写自检？

> ID：10530300
> 
> 赞同：3
> 
> 时间：2012-05-10T08:37:16.733
> 
> 标签：perl, unit-testing, user-input

是否可以为依赖于用户输入的模块编写自测，还是因为用户输入错误的可能性太大而通常不这样做？

编辑：

假设我有一个函数`Hello World`在用户点击时返回`up_key`- 然后在测试错误击键的后果之前，我想测试`Hello World`如果`up_key`按下了该函数是否真的返回。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:46:18.830

为一个需要输入的单元编写测试是正常的，部分*原因是*“用户犯了错误”。您必须确定有效输入和无效输入之间的区别。应该测试单元/模块，不仅要查看它是否使用有效输入做正确的事情，而且还要检查它是否使用无效输入做正确的事情（例如，识别它并返回适当的错误）。

即，测试的一部分应该故意输入无效输入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:49:44.603

我通常认为用户输入是一个附在主应用程序上的黑盒子。在测试的时候，这个黑盒子其实很容易被一些mock object替换；那么这个对象的属性将被用作测试参数。

而且，顺便说一句，你不打算以某种方式处理错误的输入吗？)

# python - 如何使用 Python 脚本从 CSV 文件中过滤

> ID：10530301
> 
> 赞同：15
> 
> 时间：2012-05-10T08:37:24.323
> 
> 标签：python, csv, filter

我有包含三列的 abx.csv 文件。我想过滤具有`Application`as的数据并将其`Central`写入同一个 .csv 文件

```
User ID   Name        Application  

001       Ajohns      ABI
002       Fjerry      Central
900       Xknight     RFC
300       JollK       QDI
078       Demik       Central 
```

我需要在同一个 .csv 文件中写入`User ID,Name,Apllication`三列（修改现有文件）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T08:54:16.707

```
import csv
reader = csv.reader(open(r"abx.csv"),delimiter=' ')
filtered = filter(lambda p: 'Central' == p[2], reader)
csv.writer(open(r"abx.csv",'w'),delimiter=' ').writerows(filtered) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T08:55:49.777

您应该使用不同的输出文件名。即使您希望名称相同，您也应该使用一些临时名称，最后重命名文件。否则你必须首先将文件读入内存

```
import csv
with open('infile','r'), open ('outfile','w') as fin, fout:
    writer = csv.writer(fout, delimiter=' ')            
    for row in csv.reader(fin, delimiter=' '):
        if row[2] == 'Central':
             writer.writerow(row) 
```

# xslt - XSL sum() 和变量/循环

> ID：10530302
> 
> 赞同：0
> 
> 时间：2012-05-10T08:37:29.023
> 
> 标签：xslt, sum, matching, addition

我一直试图弄清楚为什么我的变量分配总和不起作用，而且我的表输出在整个表中只重复第一个元素。我试图让这段代码做的是让每个学生的学生 ID 打印在第一列中，该 ID 的学生姓名在第二列中，然后分配一个变量来保存学生在他们的 3 次评估中的总分已完成在第三栏中打印他们的总分，然后根据他们的总分分配 HD、D、C、P 或 F，例如 HD 是 85+，D 是 75+，但不高于 84。等.

有人可以告诉我哪里出错了吗？我对 XML/XSL 还是新手，所以欢迎批评。

等级.xsl

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">

    <xsl:variable name="StudentAmount" select="count(document('AssessmentItems.xml')/assessmentList/unit/studentList/student)"/>
    <xsl:variable name="totalmark" select="sum(document('AssessmentItems.xml')/assessmentList/unit/*
    [//assessmentList/unit/assessmentItems/assessment/@studId = //assessmentList/unit/studentList/student/@sid])"/>

  <html>
  <body>
    <h2>Grade Report for <xsl:value-of select="assessmentList/unit/@unitId"/> - <xsl:value-of select="assessmentList/unit/unitName"/></h2>
    <p>Number of students in this unit: <xsl:value-of select="$StudentAmount"/></p>

    <table border="1">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Total Mark</th>
        <th>Grade</th>
      </tr>
      <xsl:for-each select="assessmentList/unit/studentList/student">
      <tr>
        <td><xsl:value-of select="document('AssessmentItems.xml')/assessmentList/unit/studentList/student/@sid"/></td>
        <td><xsl:value-of select="document('AssessmentItems.xml')/assessmentList/unit/studentList/student"/></td>
        <td><xsl:value-of select="document('AssessmentItems.xml')/assessmentList/unit/assessmentItems/assessment/mark"/></td>

        <xsl:choose>
        <xsl:when test="$totalmark &gt; 85">
        <td color="blue">HD</td>
        </xsl:when>

        <xsl:when test="$totalmark &gt; 75">
        <td color="black">D</td>
        </xsl:when>

        <xsl:when test="$totalmark &gt; 65">
        <td color="black">C</td>
        </xsl:when>

        <xsl:when test="$totalmark &gt; 50">
        <td color="black">P</td>
        </xsl:when>

        <xsl:otherwise>
        <td color="red">F</td>
        </xsl:otherwise>
        </xsl:choose>

      </tr>
      </xsl:for-each>
    </table>

    </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

这是文件 AssessmentItems.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="grade.xsl"?>
<assessmentList>
    <unit unitId="3311">
        <unitName>Learn To Read</unitName>
        <studentList>
            <student sid="1001">Lisa Simpson</student>
            <student sid="1002">Barney Rubble</student>
            <student sid="1003">Donald Duck</student>
        </studentList>
        <assessmentItems>
            <assessment name="Assignment 1" weight="20">
                <mark studId="1001">12</mark>
                <mark studId="1002">18</mark>
                <mark studId="1003">9</mark>
            </assessment>
            <assessment name="Assignment 2" weight="25">
                <mark studId="1001">23</mark>
                <mark studId="1002">14</mark>
                <mark studId="1003">12.5</mark>
            </assessment>
            <assessment name="Quiz" weight="15">
                <mark studId="1001">13</mark>
                <mark studId="1002">9</mark>
                <mark studId="1003">6</mark>
            </assessment>
            <assessment name="Final Exam" weight="40">
                <mark studId="1001">38</mark>
                <mark studId="1002">21</mark>
                <mark studId="1003">20.5</mark>
            </assessment>
        </assessmentItems>
    </unit>
</assessmentList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:31:16.650

A very quick glance at your code reveals that the predicate

```
[//assessmentList/unit/assessmentItems/assessment/@studId = //assessmentList/unit/studentList/student/@sid] 
```

is obviously wrong, because it has the same value (either true or false) for every element in your source document.

Correcting it requires more study of the problem than I have time for. But you seem to have fallen victim to the "if it doesn't work then put '//' at the front" fallacy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:58:22.603

首先，因为您只处理单个 XML 文档，所以根本不需要对 document('AssessmentItems.xml') 的常量引用。所以，例如

```
<xsl:value-of 
   select="document('AssessmentItems.xml')/assessmentList/unit/studentList/student/@sid"/> 
```

可以只替换

```
<xsl:value-of select="/assessmentList/unit/studentList/student/@sid"/> 
```

这就引出了第二个问题。上面的 xpath 是相对于 XML 的文档元素的，它将返回它找到的第一个学生的@sid，而不是你当前所在的学生的@sid。您可以在您的情况下简单地执行此操作

```
<xsl:value-of select="@sid"/> 
```

另一个问题是您在 XSLT 的顶部定义变量**totalmarks**，而实际上它应该在您的**xsl:for-each**范围内定义，以便它特定于当前学生

```
<xsl:variable name="totalmark" select="sum(../../assessmentItems/assessment/mark[@studId = current()/@sid])" /> 
```

实际上，最好在这里使用一个键来查找结果

```
<xsl:key name="marks" match="mark" use="@studId" /> 
```

并获得学生的总成绩......

```
 <xsl:variable name="totalmark" select="sum(key('marks', @sid))" /> 
```

最后一条评论，虽然不是问题，但通常最好使用**xsl:apply-templates**而不是**xsl:for-each**，因为这样可以避免过多的缩进，并允许更好的代码重用。

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:key name="marks" match="mark" use="@studId"/>

   <xsl:template match="/">
      <xsl:variable name="StudentAmount" select="count(/assessmentList/unit/studentList/student)"/>
      <html>
         <body>
            <h2>Grade Report for 
               <xsl:value-of select="assessmentList/unit/@unitId"/>- 
               <xsl:value-of select="assessmentList/unit/unitName"/>
            </h2>
            <p>Number of students in this unit: 
               <xsl:value-of select="$StudentAmount"/></p>
            <table border="1">
               <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Total Mark</th>
                  <th>Grade</th>
               </tr>
               <xsl:apply-templates select="assessmentList/unit/studentList/student"/>
            </table>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="student">
      <xsl:variable name="totalmark" select="sum(key('marks', @sid))"/>
      <tr>
         <td>
            <xsl:value-of select="@sid"/>
         </td>
         <td>
            <xsl:value-of select="."/>
         </td>
         <td>
            <xsl:value-of select="$totalmark"/>
         </td>
         <xsl:choose>
            <xsl:when test="$totalmark &gt; 85">
               <td color="blue">HD</td>
            </xsl:when>
            <xsl:when test="$totalmark &gt; 75">
               <td color="black">D</td>
            </xsl:when>
            <xsl:when test="$totalmark &gt; 65">
               <td color="black">C</td>
            </xsl:when>
            <xsl:when test="$totalmark &gt; 50">
               <td color="black">P</td>
            </xsl:when>
            <xsl:otherwise>
               <td color="red">F</td>
            </xsl:otherwise>
         </xsl:choose>
      </tr>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的 XML 时，将输出以下 HTML

```
<html>
   <body>
      <h2>Grade Report for 3311- Learn To Read</h2>
      <p>Number of students in this unit: 3</p>
      <table border="1">
         <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Total Mark</th>
            <th>Grade</th>
         </tr>
         <tr>
            <td>1001</td>
            <td>Lisa Simpson</td>
            <td>86</td>
            <td color="blue">HD</td>
         </tr>
         <tr>
            <td>1002</td>
            <td>Barney Rubble</td>
            <td>62</td>
            <td color="black">P</td>
         </tr>
         <tr>
            <td>1003</td>
            <td>Donald Duck</td>
            <td>48</td>
            <td color="red">F</td>
         </tr>
      </table>
   </body>
</html> 
```

请注意，这假定您的 XML 中只有一个**单元**元素。如果您的实际 XML 有多个单元，并且您希望每个单元都有一个单独的表，那么这不是问题，您只需要确保单元 id 是**xsl:key**的一部分，这样您就可以查找给定的结果给定单元的学生。

# c# - 执行接受命令行参数的程序

> ID：10530303
> 
> 赞同：5
> 
> 时间：2012-05-10T08:37:29.923
> 
> 标签：c#

如何在c#中执行接受命令行参数的程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T08:39:51.297

使用[Process](http://msdn.microsoft.com/en-us/library/ccf1tfx0)类的[Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5)方法。

> 通过指定应用程序的名称和一组命令行参数来启动进程资源，并将资源与新的进程组件相关联。

例子：

```
Process.Start("IExplore.exe", "C:\\myPath\\myFile.htm"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T08:40:38.130

[ProcessStartInfo 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)

> ProcessStartInfo 与 Process 组件一起使用。当您使用 Process 类启动进程时，除了附加到正在运行的进程时可用的信息之外，您还可以访问进程信息。

```
ProcessStartInfo startInfo = new ProcessStartInfo("IExplore.exe");
startInfo.Arguments = "www.northwindtraders.com";
  Process process = Process.Start(startInfo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T08:43:58.063

尝试这个

```
 ProcessStartInfo startInfo = new ProcessStartInfo();        
   startInfo.FileName = "C:\etc\Program Files\ProgramFolder\Program.exe";
   startInfo.Arguments = "C:\etc\desktop\file.spp C\etc\desktop\file.txt";
   Process.Start(startInfo); 
```

或者您可以尝试链接 [http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa288457%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T08:40:24.833

```
ProcessStartInfo p = new ProcessStartInfo(@"prg_name", @"args");
Process process = Process.Start(p); 
```

# c# - 不同语言的总结 C#

> ID：10530306
> 
> 赞同：3
> 
> 时间：2012-05-10T08:37:35.533
> 
> 标签：c#, .net, visual-studio, xml-documentation

我需要为两种不同的语言做摘要，我知道如何为一种语言做总结

```
/// <summary>
/// Constructor
/// </summary>
/// <param name="FilePath">Full path to file</param> 
```

我怎样才能添加德语变体？

可能吗？如果是，请给我一些例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:40:52.317

不幸的是，XML 文档“系统”没有那么灵活。

我没有适合您的解决方案，但是您可以考虑使用一些 XML 编辑器来获取 Visual Studio 生成的原始 XML 并将其翻译成德语 - 如果 XML 结构保持不变，您可以使用普通工具 ( SandCastle 或其他）来生成德语文档。

更新：

[@ta.speot.is](https://stackoverflow.com/users/242520/ta-speot-is) 在他的[评论中](https://stackoverflow.com/questions/10530306/summary-in-different-languages-c-sharp/10530358#comment13621098_10530306)[链接到](https://stackoverflow.com/questions/6221140/how-to-localize-the-documentation-of-a-net-library)的方法很有趣并且可以工作。

通常，您拥有不同语言的文档注释的完整副本，仅使用元素`xml:lang`上的属性`<summary>`- 生成的文档将包含所有 XML 元素，您可以使用 XSLT 转换和选择语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:40:53.293

不，这是不可能的，afaik。VS XML 文档机制目前仅支持每个类成员一个注释块。

# php - 从 MySQL 表中读取多项选择

> ID：10530309
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:37:44.733
> 
> 标签：php, mysql, html

有没有办法从一个数据库的三个不同列中选择三个下拉（或类似）记录，而不是使用 PHP 代码`table A`将我的选择插入另一个？`table B`

*   第一个选择是从 A 列读取和呈现数据
*   第二个选择是从 B 列读取和呈现数据
*   第三个选择是从 C 列读取和呈现数据

在我选择之后，我想在`Table B`适当的条件下发布我的选择。

* * *

**MySQL`TABLE A`**

```
    -------------------------------------------------
    | 上校 | 栏B | 上校 C | 栏 D | 上校 E | 上校 F |
    -------------------------------------------------
    英格兰 | | | | | |
    法国 | 0 | 1 | 1 | 尼基 | 亚当斯 |
    俄罗斯 | 1 | 2 | 0 | 瑞奇 | 高美 |
    丹麦 | 0 | 3 | 1 | 汤米 | 罗米 |
    德国 | 0 | 4 | 1 | 鲍比 | 大块头 |
    芬兰 | 1 | 5 | 0 | 蒂米 | 齐格 |

```

* * *

**MySQL`TABLE B`**

```

    -----------------
    | 栏 D | 上校 E |
    -----------------
    | 尼基 | 亚当斯 |

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:45:43.150

您必须先从 tableA 中获取值，
然后将其插入 tableB，
然后将其从 tableA中删除

# python - python中的str性能

> ID：10530315
> 
> 赞同：89
> 
> 时间：2012-05-10T08:38:01.210
> 
> 标签：python, string, performance, python-3.x, python-2.7

在分析一段 python 代码（`python 2.6`最多`3.2`）时，我发现 `str`将对象（在我的例子中是整数）转换为字符串的方法几乎比使用字符串格式化慢一个数量级。

这是基准

```
>>> from timeit import Timer
>>> Timer('str(100000)').timeit()
0.3145311339386332
>>> Timer('"%s"%100000').timeit()
0.03803517023435887 
```

有谁知道为什么会这样？我错过了什么吗？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-10T08:43:28.690

`'%s' % 100000`由编译器求值，相当于运行时的常量。

```
>>> import dis
>>> dis.dis(lambda: str(100000))
  8           0 LOAD_GLOBAL              0 (str)
              3 LOAD_CONST               1 (100000)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE        
>>> dis.dis(lambda: '%s' % 100000)
  9           0 LOAD_CONST               3 ('100000')
              3 RETURN_VALUE 
```

`%`运行时表达式并不（显着）快于`str`：

```
>>> Timer('str(x)', 'x=100').timeit()
0.25641703605651855
>>> Timer('"%s" % x', 'x=100').timeit()
0.2169809341430664 
```

请注意`str`，正如@DietrichEpp 所说，这仍然稍慢，这是因为`str`涉及查找和函数调用操作，同时`%`编译为单个立即字节码：

```
>>> dis.dis(lambda x: str(x))
  9           0 LOAD_GLOBAL              0 (str)
              3 LOAD_FAST                0 (x)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE        
>>> dis.dis(lambda x: '%s' % x)
 10           0 LOAD_CONST               1 ('%s')
              3 LOAD_FAST                0 (x)
              6 BINARY_MODULO       
              7 RETURN_VALUE 
```

当然，对于我测试过的系统（CPython 2.7），以上是正确的；其他实现可能会有所不同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-10T08:41:42.593

想到的一个原因是`str(100000)`涉及全局查找的事实，但`"%s"%100000`没有。必须在`str`全局范围内查找全局。这并不能解释全部差异：

```
>>> Timer('str(100000)').timeit()
0.2941889762878418
>>> Timer('x(100000)', 'x=str').timeit()
0.24904918670654297 
```

正如**thg435**所指出的，

```
>>> Timer('"%s"%100000',).timeit()
0.034214019775390625
>>> Timer('"%s"%x','x=100000').timeit()
0.2940788269042969 
```

# android - 在android中为多页表单创建UI的有效方法

> ID：10530318
> 
> 赞同：1
> 
> 时间：2012-05-10T08:38:24.597
> 
> 标签：android

我在想，如果我们必须为 android 平板电脑创建具有像物理表单这样的字段的表单，比如开设银行账户或保险的表单，即具有相同 UI 组件的多个页面表单，几乎除了某些可能有其他表单之外。那么实现这一目标的最佳方法是什么？它是否像为所需数量的 xml 页面或任何其他想法应用 UI 组件的默认方式？请让我知道你的建议。

# android - android列表内容通知

> ID：10530322
> 
> 赞同：0
> 
> 时间：2012-05-10T08:38:36.807
> 
> 标签：android

如何计算列表框中的项目总数并显示在文本框中？

我想动态添加列表中的项目数，并显示在括号中的标题前面以及它的图像前面，就像显示待处理请求的通知一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:48:36.830

尝试

```
myJList.getModel().getSize(); 
```

获取列表框中的项目。并将其设置为文本框的文本。

替换`myJList`为您的列表。

# android - 如何对依赖于网络连接的 Android 服务进行单元测试

> ID：10530329
> 
> 赞同：5
> 
> 时间：2012-05-10T08:39:00.483
> 
> 标签：android, unit-testing, sockets, service

我有一个 Android 服务，它通过在 TCP 上来回传递消息来处理与游戏同步服务器的通信。

我希望能够对该服务的行为进行单元测试。也就是说，当在线上看到数据时，数据被读取、解析并发出有效的相应意图，并且当服务接收到意图时，它正确地创建要发送到服务器的消息。

我对单元测试不是特别擅长，但我正试图让单元测试成为我实践的一部分。我不知道如何处理这样的事情。感觉好像我需要模拟套接字并伪造输入和输出流，但我真的不知道该怎么做，尤其是当它适用于 Android 时。

这是（为简洁起见，大幅缩减）服务：

```
public class GameSyncService extends Service {
    Thread mInputThread = new Thread() {

        /**
         * Parse commands from a message string, broadcast the command intents, and
         * return the remainder of the message
         * @param message The message to parse for commands
         * @returns the remaining characters
         */
        private String parseCommands(String message) {
            // Parse the command, Broadcast the Intent and return any remainder
        }

        @Override
        public void run() {
            String message = "";
            int charsRead = 0;
            char [] buffer = new char[BUFFER_SIZE];
            while(!Thread.interrupted()) {
                try {
                    while ((charsRead = mIn.read(buffer)) != -1) {
                        message += new String(buffer).substring(0, charsRead);
                        message = parseCommands(message);
                    }
                } catch (IOException e) {
                    Log.d(LOG_TAG, "Error receiving response: " + e.getLocalizedMessage());
                    disconnectFromServer();
                    connectToServer();
                }
            }
        }
    };

    private BroadcastReceiver mMessageSender = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            String message = intent.getStringExtra("message");
            sendMessage(message);
        }

    };

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    private void sendMessage(String message) {
        new SendCommandMessageTask().execute(message);
    }

    /**
     * Create a new connection to the server
     */
    private void connectToServer() {
        try {
            if (mSocket == null) {
                mSocket = new Socket(mHost, mPort);
                mOut = new PrintWriter(mSocket.getOutputStream());
                mIn = new BufferedReader(new InputStreamReader(mSocket.getInputStream()), BUFFER_SIZE);
                sendMessage("Handshake:|" + pInfo.versionName);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * Disconnect from the server and reset the socket to null
     */
    private void disconnectFromServer() {
        if (mSocket != null) {
            try {
                mIn.close();
                mOut.close();
                mSocket.close();
                mSocket = null;
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    @Override
    public int onStartCommand(Intent i, int flags, int startId) {
        Log.d(LOG_TAG, "GameSyncService Started");
        mHost = i.getStringExtra("host");
        mPort = i.getIntExtra("port", 9000);
        connectToServer();
        mInputThread.start();
        return START_STICKY;
    }

    @Override
    public void onCreate() {
        registerReceiver(mMessageSender, new IntentFilter(COMMAND_MESSAGE_SEND_ACTION));
        try {
            pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
        } catch (NameNotFoundException e) {
            e.printStackTrace();
        }
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        unregisterReceiver(mMessageSender);
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:20:28.203

欢迎来到嘲讽的世界。您需要做的事情可以在[Android Mock](http://code.google.com/p/android-mock/)的帮助下轻松完成。您应该在项目的使用 Android Mock wiki 页面[编写测试](http://code.google.com/p/android-mock/wiki/WritingTestsUsingAndroidMock)中阅读有关期望如何与 Android Mock 一起工作的信息。

我要做的是实现一个封装底层 TCP/socket 调用的 Socket 服务。然后使用 Android Mock，模拟您的 Socket 服务并使用 Expectations 来验证正确的数据是由更高级别的方法（如 GameSyncService ）传入的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:17:24.610

我确实在我自己的项目中发现了这个问题，我通常尝试在配置类中注入真正的实现（在这种情况下是你的 Socket 或你想要模拟的东西）或模拟类。

我还发现[Roboguice](http://code.google.com/p/roboguice/)库非常有用，它有助于在这个配置类上注入某个类的实例。

注入您的 Socket 类将转到您的配置类并实例化您定义的构造函数。

`@Inject Socket socket; //on your game class`

`bind(Socket.class).toInstance(socketImplentation); //on your Application class`

有了这个，您可以创建一个 Android 测试项目，该项目可以在其 @SetUp 中定义您将在此测试中使用套接字的模拟实现，或者在另一个测试中使用消息模拟等。

希望它有助于这个想法:)

# objective-c - 如何决定是否可以隐藏默认的 EKCalendar 'Calendar'？

> ID：10530330
> 
> 赞同：8
> 
> 时间：2012-05-10T08:39:01.890
> 
> 标签：objective-c, cocoa-touch, calendar, eventkit

我正在编写一个处理日历的应用程序。在应用程序中，我显示了所有可用日历的列表，供用户启用或禁用。我*没有*将`EventKitUI`框架用于我自己的设计和 UI。

`calendars`通过轮询对象的属性，我得到了一份整洁的日历列表`EKEventStore`。但是，在我的设备上，`EKCalendar`该列表中有一个对象*未*​​显示在`EKEventKitUI`. 这是调试器中对象的描述：

```
EKCalendar <0xcea6b60> {title = Agenda; type = Local; allowsModify = YES; color = #711A76;} 
```

我正在用荷兰语运行我的 iPhone，这就是为什么标题是“议程”而不是“日历”的原因，但如果你用英语运行 iPhone，这就是你会看到的。看起来这是 iOS 的默认日历，但由于我已将所有日历设置为与 iCloud 同步，因此内置日历应用程序已禁用它。我也想在我自己的应用程序中禁用它，但我不知道如何。

从查看[属性`EKCalendar`](https://developer.apple.com/library/ios/#documentation/DataManagement/Reference/EKCalendarClassRef/Reference/Reference.html)我无法辨别一个决定我应该“隐藏”哪个日历。这个默认日历的`type`属性是“本地”，但如果有人不使用 iCloud，我想所有的日历都是本地类型的。`subscription`不是，也不是`allowsContentModifications`。我见过[一些人根据它的 title 隐藏默认日历的例子](https://stackoverflow.com/questions/8535501/array-of-calendars)，但正如你所看到的，标题是本地化的，因此非常不切实际，感觉不对。

**为了与常规 iCal/Calendar 应用程序显示的日历列表平行，决定哪个日历是默认日历以及是否隐藏它的技巧是什么？**

***编辑：****虽然问题被标记为已回答，但答案包含一个很大的“不，你不能”。我通过添加设置面板开关来“隐藏本地日历”为我的用户解决了这个问题，但这是一个非常非常不雅的解决方案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:59:05.610

要以粗体字回答您的问题，没有可用于确定是否应隐藏或显示日历的神奇属性。

但是，如果您的理论是正确的，如果其他日历类型可用（iCloud/MobileMe、Exchange、CalDAV 等），日历应用程序隐藏“本地”日历，那么您可以使用`EKSource`数组在代码中镜像其逻辑`EKEventStore`

```
EKEventStore *store = [[EKEventStore alloc] init];

for (EKSource *source in store.sources)
    if (source.sourceType == EKSourceTypeExchange || source.sourceType == EKSourceTypeCalDAV)
    {
        //Your custom logic here to determine if the local cal should be hidden.
        break;
    } 
```

您可以在此处找到 EKSourceType 常量的完整列表：http: [//developer.apple.com/library/ios/#documentation/EventKit/Reference/EKSourceClassRef/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKSourceClassRef/Reference/Reference.html)

# sql - 如果 SQL Server 中列的值为 0，则选择默认值

> ID：10530331
> 
> 赞同：1
> 
> 时间：2012-05-10T08:39:02.673
> 
> 标签：sql, sql-server-2008

如果列有 0 值，我需要选择像 'xyz' 和其他选择列值

例如，

```
 id    col1   col2
 1       0     abc
 2       2     xyz 
```

我需要选择此表中的所有列，但`col1`如果有 0 则需要显示“xyz”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:44:53.857

```
select id,
       case when col1 = '0' then 'xyz' else convert(varchar, col1) end as col1,
       col2
from table 
```

您必须使用 CASE :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:41:13.463

```
Select id, Case when col1 = 0 then 'xyz' else cast(col1  as varchar(10)) end as col1, col2 from table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:47:21.187

```
select id,
       case 
         when col1 = 0 then 'xyz' 
         else cast(col1 as varchar(50))
       end as result_column,
       col2
from table 
```

# asp.net-mvc - 如何使 .Net MVC 中的多层架构更干（实体框架）

> ID：10530336
> 
> 赞同：2
> 
> 时间：2012-05-10T08:39:42.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, n-tier-architecture

我目前正在构建一个大型 Web 项目，尝试做所有正确的事情，将事物拆分为外观、服务、DAO（存储库）、助手等

也将 DI 与 Ninject 一起使用

现在，也许这只是因为它接近项目的开始，但感觉就像在数据库中设置简单的调用需要很长时间？

每次我想进行新的调用或做某事时，至少需要通过每个服务层编写 4 个方法，将事情一路备份等等。每次在 db 层中更改某些内容时，都必须通过域对象手动复制更改，以及更新手动将 DAO 对象转换为域对象的方法（使用分部类在 DaoObject 的构造函数中接受 DomainObjects，并在每个 DaoObject 上使用 ToDomainObject 方法）

在每个读取 DAO 方法的末尾循环遍历每个 DaoObject 将其转换为域对象，感觉很乱。

我们正在使用实体框架 DBfirst。有什么聪明的方法可以让这个过程更加干燥，还是我们只需要等到我们的应用程序的基本基础构建完成，然后事情就会开始变得更容易，因为大部分管道已经铺设等等。尤其是当您想通过组合现有服务来制作新服务时，它会很好。

尤其是在业务逻辑层手动重新创建 DAO 对象感觉很臃肿，但是我可以理解，实际的思考方式是 DAO 层实际上是映射到业务层，与使用上下文设计器。IE 业务层决定了它需要什么数据，而不关心它实际来自哪里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:10:32.470

肯定会加快您添加新功能所需时间的一件事是使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)自动将您的 DAO 转换为域对象。没有更多无聊的手动属性映射！

将所有层很好地分开确实会带来一些额外的管道，但是您可以将每个逻辑组件完全分开，易于测试，易于更换。作为一个大型项目，我认为从长远来看，开销肯定会支付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:46:24.863

查看 T4 模板生成功能。它可用于根据对 DAO 的更改生成\重新生成实体。

看看[http://www.blogfor.net/2009/09/03/generating-business-layer-code-t4-against-a-linq-to-sql-dal/](http://www.blogfor.net/2009/09/03/generating-business-layer-code-t4-against-a-linq-to-sql-dal/)

和

[http://imaginarydevelopment.blogspot.in/2010/01/t4-generates-my-business-objects-for-me.html](http://imaginarydevelopment.blogspot.in/2010/01/t4-generates-my-business-objects-for-me.html)

得到一些想法。

# c# - C#中的基本算术运算是原子的吗

> ID：10530337
> 
> 赞同：4
> 
> 时间：2012-05-10T08:39:46.073
> 
> 标签：c#, thread-safety, locking, arithmetic-expressions

基本算术运算线程安全吗？

例如，如果`++`对一个全局变量进行操作，它将从不同的线程中修改，是否需要对其进行锁定？

例如

```
void MyThread() // can have many running instances
{
    aGlobal++;
} 
```

或者应该是

```
void MyThread()
{
    lock( lockerObj)
    {
        aGlobal++;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T08:42:40.280

[规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)总结得很好。第 5.5 节，“变量引用的原子性”：

> 以下数据类型的读写是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。此外，上一个列表中具有基础类型的枚举类型的读取和写入也是原子的。其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不保证是原子的。除了为此目的设计的库函数之外，不能保证原子读-修改-写，例如在递增或递减的情况下。

结论：

*   独立读/写是原子的（但仅适用于某些数据类型）
*   读/修改/写（例如`i++`）*永远不是*原子的
*   当还不能保证原子性时，您可以使用[`Interlocked`](http://msdn.microsoft.com/en-us/library/System.Threading.Interlocked.aspx)类方法来实现原子性

在`Interlocked`功能不够的情况下，除了使用同步原语之外别无选择，例如[`Monitor.Enter`](http://msdn.microsoft.com/en-us/library/de0542zz.aspx)（编译器也通过`lock`语句公开）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:42:40.503

*在大多数类型（不是较长的类型，通常是 64 位以上）上，独立*读取和写入是原子的。但是您想要的是原子地阅读、更改然后编写——这绝对**不是**原子的。

如果您需要增加一个值，则可以使用`System.Threading.Interlocked`具有静态`Increment`和`Decrement`动作的类。

如果您需要进行更复杂的求和，那么使用同步`lock`或其他构造是唯一的方法。或者使事物像在消息传递系统中一样不可变，这样您就不会遇到任何共享数据访问问题，但这通常是无法实现的，除非是预先设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:42:58.317

两者都不是......你应该去`System.Threading.Interlocked.Increment(ref int location)`代替。这是无锁的，因为它确保处理器以完全想要的顺序执行读取和写入（指令 - 是原子的） - 而不使用则为`System.Threading.Interlocked.Increment`处理器提供了重新排序指令的机会。

做大锤（或没有其他可能性，因为您可能正在做大量的操作），您也可以使用`lock`- 但即使在这些情况下，我也宁愿`System.Threading.ReaderWriterLockSlim`改用。

顺便说一句 -[一个很好的阅读](https://stackoverflow.com/questions/154551/volatile-vs-interlocked-vs-lock)！

# java - 对象构造是否是原子的？

> ID：10530348
> 
> 赞同：0
> 
> 时间：2012-05-10T08:40:15.727
> 
> 标签：java, multithreading, concurrency

java ThreadSafe 中的对象构造是什么？请参考以下代码片段。

```
//We have some peace of code
public ABCClass(SomeOtherClass obj) {

    obj.setState(XYZ);

} 
```

然后某处有 50 个线程同时构造 ABCClass 对象。在构造时，我们正在改变 SomeOtherClass 对象的状态。

我的问题是这个构造过程是原子的，否则线程将看到 SomeOtherClass 对象的陈旧状态，因为它们在所有 ABCClass 实例之间共享。

**编辑：** obj 对象在所有构造函数中共享。

```
class SomeOtherClass{

private Status state;

public void setState(Status st){

    this.state=st;
}   

} 
//  Test Class
class TestClass{

public static void main(String[] args) {

    final SomeOtherClass smc=new SomeOtherClass();

    for(int i=0;i<50;i++)
    {
        new Thread(new Runnable() {

            @Override
            public void run() {
                new ABCClass(smc);

            }
        }).start();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:10:48.750

您的问题与构造函数无关，而是`SomeOtherClass obj`在线程之间共享它并同时对其进行变异——这是一个并发问题。您必须确保该对象的所有突变都是线程安全的。

# 更新

从下面的评论中证明了这一点的代码：

```
public class Test {
  static Test t1;
  public Test() {
    System.out.println("Constructing Test");
    t1 = this;
    try { Thread.sleep(2000); } catch (Exception e) {}
    System.out.println("Almost done");
  }
  public static void main(String[] args) throws InterruptedException {
    new Thread() { public void run() { new Test(); }}.start();
    Thread.sleep(1000);
    System.out.println(t1);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:58:10.033

我不认为构造过程是原子的，内存分配和初始化是复合动作。此外，如果您传入相同的对象 OBJ 以在 50 个线程中构造对象，那么方法 obj.setState(XYZ) 应该是线程安全的……这就是您要确保的全部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:55:37.660

如果您的 SomeOtherClass 的对象在 ABCClass 内并且它是静态的，您可以在此静态对象上进行同步。

如果您的 SomeOtherClass 的对象在 ABCClass 内并且它不是静态的，那么您不必关心同步，因为每个对象只实例化一次 - 这意味着构造只为 ABCClass 的对象调用一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:52:10.633

如果每个线程都在创建新对象并修改其状态，那么并发性就不是问题，因为每个线程都有自己的对象要处理。

如果一个对象被多个线程修改，就会出现问题。在这种情况下，您需要提供访问共享对象的同步方式。

[在此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/)阅读有关它的更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T08:42:43.757

对象将在每个线程的上下文中创建，它将是原子的，没有线程可以看到其他线程的状态，所以没有副作用但是如果对象/实例变量（静态）在线程之间共享，那么您可能需要提供并发控制

# c# - Autofac 使用 Assembly.Load 注册 dll

> ID：10530349
> 
> 赞同：8
> 
> 时间：2012-05-10T08:40:16.197
> 
> 标签：c#, asp.net-mvc-3, model-view-controller, autofac

我正在尝试注册一个名为“BigEye.Business”的 dll，并将该文件引用到 mvc 3 项目。但是当我试图在那个 dll 中获取一个对象的实例时，autofac 说它没有注册。这是我注册和解析对象的方式：

```
private static IContainer SetDIContainer()
        {
            var builder = new ContainerBuilder();
            builder.RegisterControllers(Assembly.GetExecutingAssembly());
            builder.RegisterType<UserAuthManager>().As<IUserAuth>().InstancePerHttpRequest();
            builder.RegisterType<SessionManager>().As<ISession>().InstancePerHttpRequest();

            //Here is the code to register that dll
            var services = Assembly.Load("BigEye.Business");
            builder.RegisterAssemblyTypes(services);
            IContainer container = builder.Build();
            DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

            return container;
        }

        public static T GetInstance<T>()
        {
            IContainer container = SetDIContainer();

            using(var httpRequestScope = container.BeginLifetimeScope("httpRequest"))
            {
                return httpRequestScope.Resolve<T>();
            }

        } 
```

当我调用 GetInstance 函数时，我得到“请求的服务 'BigEye.Interfaces.Business.IUser' 尚未注册”。我应该在 Business dll 中注册所有组件吗？有没有办法做到这一点？因为业务中的对象和服务会随时间变化。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T09:26:57.440

我假设您的程序集包含该`IUser`接口的一个或多个实现。现在，当您运行时：

```
 builder.RegisterAssemblyTypes(services); 
```

在没有任何附加参数的情况下，您实际上是在*由 class 键入的*该程序集中注册所有类型。您可能会看到此解析有效：

```
GetInstance<SomeSpecificUserImplementation>(); 
```

为了*通过 interface*为您的服务设置密钥，只需执行以下操作：

```
 builder.RegisterAssemblyTypes(services).AsImplementedInterfaces(); 
```

现在您的所有服务都将由它们实现的接口而不是特定类作为键，因此以下将起作用：

```
GetInstance<IUser>(); 
```

# java - 将字符串数组转换为 ArrayList

> ID：10530353
> 
> 赞同：197
> 
> 时间：2012-05-10T08:40:30.470
> 
> 标签：java

我想将`String`数组转换为`ArrayList`. 例如字符串数组是这样的：

```
String[] words = new String[]{"ace","boom","crew","dog","eon"}; 
```

如何将此字符串数组转换为 ArrayList？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-05-10T08:41:48.537

为此使用此代码，

```
import java.util.Arrays;  
import java.util.List;  
import java.util.ArrayList;  

public class StringArrayTest {

   public static void main(String[] args) {  
      String[] words = {"ace", "boom", "crew", "dog", "eon"};  

      List<String> wordList = Arrays.asList(words);  

      for (String e : wordList) {  
         System.out.println(e);  
      }  
   }  
} 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2012-05-10T08:43:15.787

```
new ArrayList( Arrays.asList( new String[]{"abc", "def"} ) ); 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2012-05-10T11:25:59.223

使用[集合#addAll()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#addAll-java.util.Collection-T...-)

```
String[] words = {"ace","boom","crew","dog","eon"};
List<String> arrayList = new ArrayList<>(); 
Collections.addAll(arrayList, words); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-05-10T08:43:13.947

```
String[] words= new String[]{"ace","boom","crew","dog","eon"};
List<String> wordList = Arrays.asList(words); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-05-10T08:50:03.460

在大多数情况下`List<String>`应该足够了。无需创建`ArrayList`

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List; 
```

...

```
String[] words={"ace","boom","crew","dog","eon"};
List<String> l = Arrays.<String>asList(words);

// if List<String> isnt specific enough:
ArrayList<String> al = new ArrayList<String>(l); 
```

# jquery - 如何删除花式框右上角的（X）

> ID：10530356
> 
> 赞同：0
> 
> 时间：2012-05-10T08:40:41.947
> 
> 标签：jquery, fancybox

如果我只是“显示：无”fancybox的十字（X）来隐藏它可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:44:22.360

在调用 fancybox 时，添加以下选项：

```
'showCloseButton':false 
```

例如：

```
$('#your_id').fancybox({'showCloseButton':false}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:25:08.457

试试下面的代码：

```
'closeBtn':false 
```

隐藏关闭按钮。

# silverlight - Silverlight 用户控制位置

> ID：10530364
> 
> 赞同：1
> 
> 时间：2012-05-10T08:41:09.217
> 
> 标签：silverlight, user-controls, web-parts, translation

我在用于执行查询的 Web 部件中有一个用户控件。用户控件的高度可以增长到某个点，具体取决于有多少结果。这可能导致用户控件的 Header 被推到可视区域之外。

我想获取用户控件的位置，当 Y 坐标为负时移动用户控件，使 Y 坐标为正值。

我正在使用这篇文章中的代码来获取用户控件的位置： [确定 UIElement 的位置](https://stackoverflow.com/questions/3114322/translating-x-y-coordinate?answertab=active#tab-top)

但是现在我有了这个位置，我不知道如何移动用户控件。我尝试使用`userControl.SetValue(Canvas.TopProperty, 15.0)` 但没有效果。

还有另一种方法可以做到这一点吗？

谢谢你的帮助！

编辑：添加了 XAML 提取

```
<UserControl x:Class="Gazetteer.Search" 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:sys="clr-namespace:System;assembly=mscorlib"
xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
mc:Ignorable="d"
d:DesignHeight="336" d:DesignWidth="342" BorderBrush="{x:Null}">

<Grid x:Name="LayoutRoot" Background="#FFE2E2E2" MinHeight="80" MinWidth="280">

    <StackPanel Margin="10">
        <StackPanel Margin="10" Orientation="Horizontal">
            <RadioButton x:Name="townlandRB" Margin="5" Checked="radioBtnCheck"
            GroupName="Search Type" Content="Townland" />
            <RadioButton x:Name="sitecodeRB" Margin="5" Checked="radioBtnCheck"
            GroupName="Search Type" Content="Site Code" />
        </StackPanel>            
    </StackPanel>

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:33:06.627

定位取决于您的用户控件所在的容器类型。Canvas.TopProperty 什么都不做，除非父级实际上是一个 Canvas。

改为使用 TranslateTransform 移动对象。

# java - 公历 Day_Of_Week 返回错误的日期

> ID：10530369
> 
> 赞同：0
> 
> 时间：2012-05-10T08:41:17.707
> 
> 标签：java, gregorian-calendar

> **可能重复：**
> [Java 日历设置不正确](https://stackoverflow.com/questions/4598036/java-calendar-setting-incorrectly)

我有这个代码：

```
GregorianCalendar cal = (GregorianCalendar) GregorianCalendar.getInstance(Locale.FRENCH);
cal.setFirstDayOfWeek(Calendar.MONDAY);
cal.set(Integer.parseInt(Year), Integer.parseInt(Month), Integer.parseInt(Day));
int weekday= cal.get(Calendar.DAY_OF_WEEK); 
```

如果我通过例如 2012-04-02（星期一）工作日 = 4。如果我通过 2012-04-06（星期五）工作日 = 1。所以 gregorianCalendar 认为星期五是第一天，尽管我说星期一是第一天天？如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:44:34.233

4 in`GregorianCalendar`是 5 月，而不是 4 月，所以答案是正确的。当您插入 4 as`Calendar.MONTH`时，日期实际上是 02/05/2012，即星期三。

请记住，月份是从 0 开始的。

# c# - 使用 DataPager 时，GridView 在回发时丢失数据

> ID：10530370
> 
> 赞同：0
> 
> 时间：2012-05-10T08:41:21.000
> 
> 标签：c#, asp.net, gridview, viewstate, datapager

我有一个 CustomGridView（扩展 GridView）和一个 DataPager，在 .net 3.5 中一切正常，但在 .net 4 中却不行。问题是当回发发生在第一个页面以外的页面上时，网格的视图状态会丢失。这是一个大型项目，并且在每次回发时都进行数据绑定不是一种选择，因为要更新的代码太多（我们开始了，但我们只创建了更多错误）。

我已经测试了内置的 DataPager webcontrol，并且我自己制作了相同的结果。我们知道我们应该为网格使用内置寻呼机，但该解决方案是不可能的，因为要更新的代码太多。

问题出现在使用 CustomGridView 的所有页面上，并且在 gridpage 1 上一切正常

这是一个已知问题，是否有解决方法？

我给你一个简单项目的代码，但出现了同样的问题（在 .net 3.5 中工作，但不是在 .net 4 中工作）：

WebForm1.aspx：

```
<cc1:SimpleCustomGridView ID="CustomGridView1" runat="server" 
        AutoGenerateColumns="false" PageSize="4" AllowPaging="true" 
        onpageindexchanging="CustomGridView1_PageIndexChanging" 
        onrowcommand="CustomGridView1_RowCommand" EnableViewState="true" ViewStateMode="Enabled" Visible="true">
        <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="lnkButton" runat="server" Text='<%#Eval("Name") %>' CommandName="lnkClick" CommandArgument='<%#Eval("Id") %>'></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        </Columns>
    </cc1:SimpleCustomGridView>
    <br />
    <uc:DataPager ID="DataPager" runat="server" CustomGridViewID="CustomGridView1" /> 
```

WebForm1.aspx.cs：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        DataBind(0);
    }
}

private void DataBind(int pageIndex)
{
    int rowIndex = pageIndex * CustomGridView1.PageSize;
    int pageSize = CustomGridView1.PageSize;
    int total;
    List<DataContainer> list = DataContainer.GetData(rowIndex, pageSize, out total);
    CustomGridView1.RowCount = total;
    CustomGridView1.DataSource = list;
    CustomGridView1.DataBind();
}

protected void CustomGridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    if (e.NewPageIndex > -1)
    {
        CustomGridView1.PageIndex = e.NewPageIndex;
        DataBind(e.NewPageIndex);
    }
}

protected void CustomGridView1_RowCommand(object sender, GridViewCommandEventArgs e) { } 
```

SimpleCustomGridView.cs：

```
public class SimpleCustomGridView : GridView
{
    public override int PageIndex
    {
        get
        {
            if (ViewState[this.ClientID + "PAGEINDEX"] == null)
                ViewState[this.ClientID + "PAGEINDEX"] = 0;
            return (int)ViewState[this.ClientID + "PAGEINDEX"];
        }
        set
        {
            base.PageIndex = value;
            ViewState[this.ClientID + "PAGEINDEX"] = value;
        }
    }

    public int RowCount
    {
        set
        {
            HttpContext.Current.Session[this.ClientID + "TOTALPAGECOUNT"] = value;
        }
        get
        {
            return HttpContext.Current.Session[this.ClientID + "TOTALPAGECOUNT"] == null ? 0 :
                Convert.ToInt32(HttpContext.Current.Session[this.ClientID + "TOTALPAGECOUNT"]);
        }
    }

    public void GotoPage(int pageIndex)
    {
        GridViewPageEventArgs args = new GridViewPageEventArgs(pageIndex);
        OnPageIndexChanging(args);
    }
} 
```

CustomGridViewpager.ascx.cs：

```
public partial class CustomGridViewpager : UserControl
{
    public string CustomGridViewID { get; set; }

    private SimpleCustomGridView _gridView;

    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        _gridView = (SimpleCustomGridView)Parent.FindControl(CustomGridViewID);
    }

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);

        int totalRows = _gridView.RowCount;
        int pageIndex = _gridView.PageIndex;
        int pageSize = _gridView.PageSize;
        int totalPages = (int)Math.Ceiling(totalRows / (double)pageSize);

        StringBuilder sb = new StringBuilder();
        sb.Append(pageIndex + 1);
        sb.Append("/");
        sb.Append(totalPages);
        PageIndexLabel.Text = sb.ToString();

        PrevPageButton.Visible = pageIndex > 0;
        NextPageButton.Visible = pageIndex < totalPages - 1;

    }

    protected void NextPageButton_Click(object sender, EventArgs e)
    {
        _gridView.GotoPage(_gridView.PageIndex + 1);

    }

    protected void PrevPageButton_Click(object sender, EventArgs e)
    {
        _gridView.GotoPage(_gridView.PageIndex - 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:46:51.417

试试把webform`DataBind(0);`的方法里面`OnPreRender()`

```
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    DataBind(0);
} 
```

# java - 在struts2应用程序中使用复选框删除

> ID：10530371
> 
> 赞同：0
> 
> 时间：2012-05-10T08:41:20.843
> 
> 标签：java, checkbox, struts2

我想在我的 struts2 应用程序中使用复选框来实现删除功能。我在我的 jsp 页面中使用显示标签来显示报告。我需要提供带有报告的复选框以删除选定的报告。我已经在我的 jsp 页面中尝试过这段代码：

```
<s:form name="listPage">
<display:table name="egnreports" class="table" id="egnreports" requestURI=""  export="true" pagesize="30">

<display:column>
 <s:checkbox name="checked" fieldValue='%{egnreports.id}' />
</display:column>

<display:column value="<%=egnreports_rowNum%>" title="S.No." />

<display:column property="createDate" sortable="true" titleKey="egnreport.createDate" style="width:13.5%"/>

<-- Other Table data here -->

</display:table>
</s:form>
<c:out value="${buttons}" escapeXml="false" /> 
```

在我的动作课中，我使用了这个：

```
 private String[] checked; 

public String[] getChecked() {

    return checked;
}

public void setChecked(String[] checked) {

    this.checked=checked;

} 
```

当我尝试检索选定的值以删除相应的报告时，我得到一个空指针异常：

```
for (String code : checked) { 

    System.out.println(code + " is selected"); 
    System.out.println("id="+egnreport.getId());
        egnreportManager.remove(egnreport.getId());
        saveMessage(getText("ireport.deleted"));
        } 
```

如果我使用

```
<display:column>
 <input type="checkbox" name="checked" value="${egnreports.id}"/>
 </display:column> 
```

代替 s:checkbox 标记，我可以看到报告页面中的值（使用 firebug），但它们仍然没有填充到操作类中。

使用

```
<input type="checkbox" name="checked" value="${egnreports.id}"/> 
```

我明白了

```
<td> <input type="checkbox" value="5" name="checked"> </td> 
```

作为呈现的 html，而与

```
<s:checkbox name="checked" fieldValue='%{egnreports.id}' /> 
```

我明白了

```
<td> 
<div id="wwgrp_egnDeskReports_checked" class="wwgrp"> 
<div id="wwctrl_egnDeskReports_checked" class="wwctrl"> 
<input id="egnDeskReports_checked" type="checkbox" value="" name="checked"> 
<input type="hidden" value="" name="__checkbox_checked"> 
</div> 
</div> 
</td> 
```

我也不能使用`"${egnreports.id}"`with`s:checkbox`来获取 id 的值。我哪里做错了？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:32:15.173

我有解决方案：我必须使用 fieldValue="%{#attr.egnreports.id}" 即，

```
<s:checkbox name="checked"  fieldValue="%{#attr.egnreports.id}" value="false"/> 
```

传递检查的值。还记得在表单标签中包含按钮，我之前没有注意这个：

```
<c:out value="${buttons}" escapeXml="false" />    
</s:form> 
```

:-)

# vb.net - 查询文本文件

> ID：10530377
> 
> 赞同：0
> 
> 时间：2012-05-10T08:41:42.483
> 
> 标签：vb.net, text, oledb

嘿，有没有办法使用 OleDB 或其他方式查询文本文件。只需要能够像下面这样查询它：

```
 Dim connectionString As String
    connectionString = "Provider=?????????????????;Data Source=C:\Data\theFile.txt"
    connection = New System.Data.OleDb.OleDbConnection(connectionString)
    connection.Open()

    Dim sqlString As String
    sqlString = "SELECT * FROM Categories"
    Dim command As New System.Data.OleDb.OleDbCommand(sqlString, connection)
    'Retrieve data 
    reader = command.ExecuteReader() 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:45:25.443

像这样试试。

```
con = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|;Extended properties='text;HRD=yes;FMT=Delimited'") 
```

[http://www.connectionstrings.com/textfile](http://www.connectionstrings.com/textfile)

# r - R：根据日期将患者分配到新的和后续的

> ID：10530378
> 
> 赞同：0
> 
> 时间：2012-05-10T08:41:45.523
> 
> 标签：r

致所有 R 专家..

我有一个地区的 60000 个心血管疾病（CVD）条目的数据集。数据主要包括：患者编号、他来保健中心的日期以及他所在的村庄、他的保健中心等许多其他变量。

基于每个患者在一年内只允许访问一次的定义，我想将其应用于数据集。也就是说，如果这次访问是新的（一年中的第一次访问）或后续访问（一年中的重复访问），我想在每个患者旁边分配。这是我的 str() 数据。

```
> str(cvd1)
'data.frame':   59686 obs. of  51 variables:
 $ Age           : num  3532642 3555351 3575931 3599113 3622295 ...
 $ Centre        : Factor w/ 8 levels "L","M","N","SH",..: 2 2 2 2 2 2 2 2 2 2 ...
 $ Date          : Date, format: "2006-11-21" ...
 $ DoB           : Date, format: "1966-01-01" ...

  $ Ptnum          : Factor w/ 7469 levels "5011","5057",..: 4398 2105 2105 2105 2105 4352 1304 1304 1304 1304 ...
  $ Sex           : Factor w/ 3 levels "F","M","UNKNOWN": 1 1 1 1 1 2 1 1 1 1 ... 
```

这只是一个例子来说明我想要做什么：

```
list = 1:8
Ptnum = c(1,2,1,4,1,2,1,3)
date = c("01/01/2000", "01/01/2000","24/02/2000", "26/03/2006", "04/05/2001",
"05/05/2007","05/05/2001","05/05/2007")
cvddata = data.frame(Ptnum, date) 
```

将日期格式化为 R 日期对象

```
 cvddata$date = dmy(date) 
```

所以，ptnum(1)，第一次访问是新病例，ptnum(1)的第三次访问是（跟进，，一年内到来）。ptnum(1) 的第 5 次访问是（新的，在他第一次访问一年之后），但他的第 7 次访问是（跟进，因为他在距离上一次访问不到一年的时间内，即 2001 年 4 月 5 日）。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:34:02.037

不知道`dmy`从哪里来。我会这样做`as.Date`：

```
Ptnum = c(1,2,1,4,1,2,1,3)
date = c("01/01/2000", "01/01/2000","24/02/2000", "26/03/2006", "04/05/2001",
"05/05/2007","05/05/2001","05/05/2007")
cvddata = data.frame(Ptnum, date)
cvddata$date = as.Date(date, format="%d/%m/%Y")
cvddat.ord$new1yr <- with(cvddat.ord, 
                        ave(as.numeric(date), Ptnum, 
                                  FUN=function(x) c(1000, diff(x) ) > 365) )
cvddat.ord
 #---------------
  Ptnum       date new1yr
1     1 2000-01-01      1
3     1 2000-02-24      0
5     1 2001-05-04      1
7     1 2001-05-05      0
2     2 2000-01-01      1
6     2 2007-05-05      1
8     3 2007-05-05      1
4     4 2006-03-26      1 
```

# c# - 如何解析 XML 差异以仅显示差异

> ID：10530381
> 
> 赞同：7
> 
> 时间：2012-05-10T08:41:56.080
> 
> 标签：c#, xml

[我使用MS XmlDiffPatch 工具](http://msdn.microsoft.com/en-us/library/aa302294.aspx)比较了两个序列化对象的 xml 。（C＃）

XML 示例 1：

```
<HotelBookingView xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
  <Id>119</Id> 
  <RoomId>1</RoomId> 
  <NumberNights>4</NumberNights>
  <CourseBookings>       
   <CourseHotelLink> 
    <Id>0</Id> 
   </CourseHotelLink> 
 </CourseBookings> 
</HotelBookingView> 
```

XML 示例 2：

```
<HotelBookingView xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
  <Id>119</Id> 
  <RoomId>1</RoomId> 
  <NumberNights>5</NumberNights>
  <CourseBookings>       
   <CourseHotelLink> 
    <Id>0</Id> 
   </CourseHotelLink> 
 </CourseBookings> 
</HotelBookingView> 
```

（NumberNights 已从 4 变为 5）

他们之间的区别：

```
<?xml version="1.0" encoding="utf-8" ?> 
  <xd:xmldiff version="1.0" srcDocHash="14315823970661993399" options="IgnoreChildOrder" fragments="no" xmlns:xd="http://schemas.microsoft.com/xmltools/2002/xmldiff">
  <xd:node match="1">
   <xd:node match="3">
    <xd:change match="1">5</xd:change> 
   </xd:node>
  </xd:node> 
```

关于如何处理差异以仅显示两者之间的差异的任何建议？

我想要一个只显示 NumberNights 的最终显示：oldvalue (4), new value (5)

Xml Diff Tool 有一个 GetHtml() 函数，但它会显示所有值并突出显示已更改的值。目前，为了获得差异，我查看了 CSS 'lightgreen' 的生成 html，然后进行字符串操作以找到节点的名称.. 对于一个充满审计数据的表来说，这太疯狂了，而且真的很慢！任何更好的想法表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T22:00:14.757

您确定要使用 XmlDiffPatch 吗？我们使用[了 xmldiff](http://www.lprp.fr/soft/xml/xmldiff/xmldiff_en.php3)，它具有更有意义的输出（在我看来）。在您上面的示例中，输出将类似于

```
<HotelBookingView xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:diff="http://www.via.ecp.fr/~remi/soft/xml/xmldiff" diff:status="below"> 
  <NumberNights diff:status="modified">4|5</NumberNights>
</HotelBookingView> 
```

`|`这会保留标签结构，指示哪些标签已修改内容，并显示由竖线 ( ) 字符分隔的先前/当前值。

# ios - asiformdata请求上传图片，(null)处不存在文件

> ID：10530383
> 
> 赞同：0
> 
> 时间：2012-05-10T08:42:22.000
> 
> 标签：ios, upload, asiformdatarequest

我使用asiformdatarequest框架上传图片，代码如下：

```
 NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
    NSString *path1=[paths objectAtIndex:0];
    NSString *filename=[path1 stringByAppendingPathComponent:@"logo.png"];  
    NSLog(@"image path = %@",filename);
    [request setFile:[NSURL URLWithString:filename] forKey:@"avatar"];
    [request startSynchronous]; 
```

我的日志：

```
image path = /Users/tanlusheng/Library/Application Support/iPhone Simulator/5.1/Applications/5473E6FF-0D3A-48CD-8728-0219CF25BC80/Documents/logo.png
Error Domain=ASIHTTPRequestErrorDomain Code=6 "No file exists at (null)" UserInfo=0x6b4c610 {NSLocalizedDescription=No file exists at (null)} 
```

我在我的项目中添加了一张图片。但为什么找不到文件？我在模拟器中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:47:03.997

当您尝试发送图像时，您是在尝试从应用程序`Documents`目录发送图像，而不是主包。除非您已将图像显式放置在`Documents`目录中（您很可能通过代码执行此操作），否则它不会存在。

试试这个：

```
NSString *filename = [[NSBundle mainBundle] pathForResource:@"logo" ofType:@"png"];  
[request setFile:[NSURL URLWithString:filename] forKey:@"avatar"];
[request setDelegate:self]; //Make sure this class receives request alerts
[request setDidFinishSelector:@selector(someMethod:)]; //Which method to call when finished
[request startAsynchronous]; 
```

注意我还更改了异步启动的请求。您真的不想同步上传，否则您的应用程序将停止执行，直到请求完成。我还添加了自我委托和请求完成时的选择器。

然后，您可以在此处处理已完成的查询：

```
- (void)someMethod:(ASIHTTPRequest *)request
{
    NSString *response = [request responseString];
    NSLog(@"%@", response);
} 
```

如果您仍然收到 null 错误，请确保图像具有*Target Membership*。为此，请在 Xcode 中选择您的图像，并确保在右侧的*Target Membersip下勾选了小框。*这将确保图像在构建时是应用程序的一部分。

# php - update_with_media 使用 abraham 的 twitteroauth

> ID：10530385
> 
> 赞同：8
> 
> 时间：2012-05-10T08:42:28.660
> 
> 标签：php, twitter, twitter-oauth

我正在尝试使用 Abraham 的 twitteroauth 库（TwitterOAuth v0.2.0-beta2）实现来自 ajax 的 upload_with_media 请求。我对基本帖子没有任何问题，但是当我尝试包含媒体时，我得到以下回复：

```
"{"request":"\/1\/statuses\/update_with_media.json","error":"Error creating status."}" 
```

我发布媒体的代码如下所示：

```
 $image = $_FILES["media"]["tmp_name"];

    $parameters = array(
        'media[]'  => "@{$image};type=image/jpeg;filename={$image}",
        'status'   => $status
      );

    if(isset($reply_id)) {
        $parameters['in_reply_to_status_id'] = $reply_id;
    }
    $post = $twitteroauth->post('https://upload.twitter.com/1/statuses/update_with_media.json', $parameters);
    echo json_encode($post); 
```

我已经验证所有数据都正确地发送到这个脚本，甚至设法使用上面的相同数据和 tmhOAuth 库来获得一个 update_with_media 帖子，但是由于我的小部件的其余部分使用 twitteroauth，我更愿意保持统一。我也尝试过在结尾加上和不带 .json 的情况下，没有发现任何区别。谁能给我看一个使用 twitteroauth 成功实现 update_with_media 的例子？我似乎无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-10T13:11:46.013

在几个小时内使用 twitterauth 库处理 UPDATE_WITH_MEDIA 的解决方案后，我发现以下解决方案可以正常工作：

*   [首先：此处](https://dev.twitter.com/docs/twitter-libraries)从 Twitter Dev 链接的 PHP 原始库不起作用。

不适用于 UPDATE_WITH_MEDIA

*   经过搜索和搜索，我找到了相同的库，但有一个修复程序。你可以在这里找到它： [https ://github.com/tomi-heiskanen/twitteroauth/tree/77795ff40e4ec914bab4604e7063fa70a27077d4/twitteroauth](https://github.com/tomi-heiskanen/twitteroauth/tree/77795ff40e4ec914bab4604e7063fa70a27077d4/twitteroauth)

基本的区别是原版有函数“post”，没有“$multipart”参数。此参数允许发送 Twiiter 在文档中要求的内容：多部分 enctype 帖子。所以最后基本代码如下：

```
$image_path="folder/image.jpg";

$handle = fopen($image_path,'rb');
$image  = fread($handle,filesize($image_path));
fclose($handle);

$params = array(
  'media[]' => "{$image};type=image/jpeg;filename={$image_path}",
  'status'  => "Put your message here, must be less than 117 characters!"
);
$post = $connection->post('statuses/update_with_media', $params, true); 
```

重要的！如果您使用原始库尝试此代码，您会发现错误。您必须从上面的链接下载并替换项目中的两个文件（OAuth.php 和 twitteroauth.php）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T17:57:37.473

尝试使用 codebird-php [https://github.com/mynetx/codebird-php](https://github.com/mynetx/codebird-php)

事实证明，尽管它在 Twitter 建议的 php 库列表中排在最后，但它确实起到了作用。只需从 git repo 中获取 codebird.php 和 cacert.pem 即可。

```
 include_once('codebird.php');
    \Codebird\Codebird::setConsumerKey($consumer_key, $consumer_secret);
    $cb = \Codebird\Codebird::getInstance();
    $cb->setToken($token, $token_secret);
    $status = 'Gamo, I just tweeted with an image!';
    $filename = '/home/asdf/test.png';
    $cb->statuses_updateWithMedia(array('status' => $status, 'media[]' => $filename)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-07T12:35:24.193

原始库尚不包含上传媒体**功能**。您可以查看[https://github.com/natefanaro/twitteroauth](https://github.com/natefanaro/twitteroauth)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:10:39.973

我建议您使用 Fiddler2 或一些类似的工具来检查和比较使用 twitteroauth 和 tmhOAuth 发出的消息。你会看到不同之处。

根据我的经验，这就是使用 update_with_media.{xml,json} 向 Twitter 发送 HTTP POST 的样子。我相信，您使用的后缀只会影响响应。（您的应用必须以特定于您的应用的方式设置 Authorization 标头。）

您想让 twitteroauth 发布类似以下内容

```
POST https://upload.twitter.com/1/statuses/update_with_media.xml HTTP/1.1
Authorization: OAuth oauth_callback="oob", oauth_consumer_key="xxxxxxxxxxxx", oauth_nonce="7774328k", oauth_signature="pUYjRnccmrBYiO1j9cliETsw%2B5s%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1318300521", oauth_token="59152613-vrlZ2edX56PudQtBmpAWd3SPDt9cPyAhibO7ysl6W", oauth_version="1.0"
Content-Type: multipart/form-data; boundary=======c49479438c600bf59345e======
Host: upload.twitter.com
Content-Length: 7320
Connection: Keep-Alive

--======c49479438c600bf59345e======
Content-Disposition: form-data; name="status"

working on a Tweet tool that uses the OAuth Manager library.
--======c49479438c600bf59345e======
Content-Disposition: file; name="media[]"; filename="ThisIsAPicture.png"
Content-Type: image/png

  ...binary png data here...

--======c49479438c600bf59345e======-- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-10T11:41:21.240

我想发送带有状态参数的 url 链接

喜欢：把你的消息放在这里

# ruby-on-rails - Jbuilder：如何合并 2 个顶级数组？

> ID：10530394
> 
> 赞同：5
> 
> 时间：2012-05-10T08:42:50.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json, jbuilder

我有两个顶级数组，它们具有相同的格式。我想合并它们：

```
json = Jbuilder.encode do |json|
  json.(companies) do |json, c|
    json.value c.to_s
    json.href employee_company_path(c)
  end
  json.(company_people) do |json, cp|
    json.value "#{cp.to_s} (#{cp.company.to_s})"
    json.href employee_company_path(cp.company)
  end
end 
```

所以输出如下：`"[{value: "a", href: "/sample1"}, {value: "b", href: "/sample2"}]"`

但是上面的代码不起作用。它仅包括第二个数组：`"[{value: "b", href: "/sample2"}]"`

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-29T00:08:48.210

我知道两种选择：

1.  在迭代之前组合数组，这适用于鸭子的多个源数组：

    ```
    def Employee
      def company_path
        self.company.company_path if self.company
      end
    end

    [...]

    combined = (companies + company_people).sort_by{ |c| c.value }
    # Do other things with combined

    json.array!(combined) do |duck|
      json.value(duck.to_s)
      json.href(duck.company_path)
    end 
    ```

2.  或者当你有鸭子和火鸡时，组合 json 数组：

    ```
    company_json = json.array!(companies) do |company|
      json.value(company.to_s)
      json.href(employee_company_path(company))
    end

    people_json = json.array!(company_people) do |person|
      json.value(person.to_s)
      json.href(employee_company_path(person.company))
    end

    company_json + people_json 
    ```

在这两种情况下，都不需要调用 #to_json 或类似的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-26T19:58:02.683

Yuri 的回答让我很接近，但对我来说最终的解决方案就是在我的`.jbuilder`文件中这样做。

```
json.array!(companies) do |company|
  json.value(company.to_s)
  json.href(employee_company_path(company))
end

json.array!(company_people) do |person|
  json.value(person.to_s)
  json.href(employee_company_path(person.company))
end 
```

我放入数组的顺序是组合数组的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T10:04:54.873

```
result =  []
companies.each do |c|
  result << {:value => c.to_s, :href => employee_company_path(c)
end
company_people.each do |c|
  result << {:value => "#{cp.to_s} (#{cp.company.to_s})", :href => employee_company_path(cp.company)
end
# at this point result will be an array of companies and people which just needs converting to json.
result.to_json 
```

# jsf - Primefaces 自动完成功能第一次不起作用

> ID：10530396
> 
> 赞同：2
> 
> 时间：2012-05-10T08:42:54.633
> 
> 标签：jsf, autocomplete, primefaces

我第一次和第二次都使用相同的查询。我看到第一次调用了完整的方法，但是在计算结果之后，它们没有在 UI 上发送。有人遇到过这个问题吗？您对如何解决这个问题有任何想法吗？

```
<p:autoComplete id="filterByMachine" value="#{notificationListViewLazyModel.selectedMachine}"  scrollHeight="500" 
                                completeMethod="#{notificationListViewLazyModel.complete}" converter="#{notificationListViewLazyModel.converter}" 
                                var="p" itemLabel="#{p.platformName} #{p.serial} #{p.sitename}"  
                                itemValue="#{p}" forceSelection="true" size="48" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-25T15:42:12.730

我不确定这个问题是否相关，但同样的情况也发生在我们身上。在将问题跟踪到数据库级别后，我们发现了发生了什么。

不知何故，当用户第一次输入文本时，自动完成组件会在查询字符串中添加两个前导空格。

修剪查询字符串为我们解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:27:08.457

您的 itemValue 是一个对象，因此您需要实现一个转换器（[实现转换器](https://stackoverflow.com/questions/4635302/object-as-itemvalue-in-fselectitems)）。

itemValue 是项目值，它作为请求参数传递给服务器，但该值是指向 SelectItem 实例 ( [ref](https://stackoverflow.com/questions/325616/difference-between-value-and-itemvalue) ) 的值绑定表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-11T08:50:14.940

我也有同样的问题。当我单击该字段时它不起作用但是当我选择该字段并开始编写它自动完成的东西时。

表达式之间的值字段中也有空格字符（在第二个和第三个 # 字符之前）；

```
 itemLabel="#{p.platformName} #{p.serial} #{p.sitename}" 
```

当我单击该字段时，它仍然存在。但是当我选择该字段时，它会在写入选定区域时自动选择并替换我的写作。所以它有效;）

例子;

```
 itemLabel="#{p.platformName}#{p.serial}#{p.sitename}" 
```

# string - 替换bash中的确切字符串

> ID：10530397
> 
> 赞同：0
> 
> 时间：2012-05-10T08:42:56.163
> 
> 标签：string, bash, sed

我有一个看起来像这样的列表：

```
server
server.apple.com
server.apple.com
server
server.apple.com 
```

现在，我想将“.apple.com”添加到仅显示“服务器”的行中。我试过 sed ：

```
sed -e 's/\bserver\b/server.apple.com/g' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:47:45.223

你可以使用：

```
sed 's/^server$/server.apple.com/g' 
```

`^`表示行首和`$`行尾。

您也不需要`-e`参数，因为这只是基本的正则表达式。

如果您想要不区分大小写的搜索`server`（也匹配`SERVER`和`SErvEr`），您可以使用该`I`功能，但是各种版本不支持它`sed`：

```
sed 's/^server$/server.apple.com/Ig' 
```

如果您没有`sed`支持的版本，`I`您可以使用：

```
sed 's/^[Ss][Ee][Rr][Vv][Ee][Rr]$/server.apple.com/g' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:47:47.097

```
sed 's/^server$/server.apple.com/g' inputfile 
```

`^`表示一行的开头和`$`结尾，因此这仅匹配那些没有附加文本的行。

# asp.net-mvc-3 - 为什么此代码返回没有 ViewName 的视图结果？

> ID：10530401
> 
> 赞同：2
> 
> 时间：2012-05-10T08:43:05.117
> 
> 标签：asp.net-mvc-3

我在一个名为 AdminController 的控制器中有一些代码。

```
public ActionResult Login()
{
    AdminModel model = new AdminModel();
    return View(model);
} 
```

当我在测试方法中检查视图时......

```
 var result = controller.Login();

 //assert
 Assert.IsInstanceOfType(result, typeof(ViewResult));
 Assert.AreEqual("Login", ((ViewResult)result).ViewName); 
```

它不显示视图名称。但是肯定会返回登录视图。我想知道为什么没有设置视图名称？我以为它默认为动作结果方法名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:02:37.600

`viewName`仅当您在返回视图时设置参数时才会设置 ViewName 。例如：

```
return View("Login", model); 
```

否则，如果未设置视图名称，则使用默认视图。

因此，要测试默认视图，您的断言应该写成：

```
Assert.AreEqual("", ((ViewResult)result).ViewName); 
```

# javascript - 主干和历史推送状态

> ID：10530402
> 
> 赞同：3
> 
> 时间：2012-05-10T08:43:05.727
> 
> 标签：javascript, backbone.js, browser-history, backbone-routing

使用主干，有什么方法可以在历史记录中存储一些数据，以便在调用 back 时可以检索它？

在非主干应用程序中，我的应用程序将类似于以下内容。执行动作时：

```
//When doing some action
history.pushState(mycurrentData, title, href) 
```

以及以下内容以恢复当前数据以防万一：

```
function popState(event) {  
    if (event.state) { 
        state = event.state;
        //get my data from state
    }
}
window.onpopstate = popState; 
```

我需要在我的主干应用程序上应用相同的行为。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T14:03:16.237

此时，直接使用 Backbone 是不可能的

[http://backbonejs.org/docs/backbone.html#section-139](http://backbonejs.org/docs/backbone.html#section-139)

您可以在代码中的该点看到几行：

`window.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, frag);`

因此，它一直将数据设置为一个空对象。

那么，要使这项工作正常进行，您必须自己存储数据，并在路由触发时使用其他方法来检索数据。

就个人而言，我认为值得修补 Backbone 以允许在历史中存储数据。但这是 Backbone 问题列表的一个想法 :)

**编辑**

看起来有人想这样做，但被击落：[https ://github.com/documentcloud/backbone/pull/660](https://github.com/documentcloud/backbone/pull/660)

# c# - 从其他表单上的按钮单击事件处理程序刷新控件或重新加载表单

> ID：10530409
> 
> 赞同：0
> 
> 时间：2012-05-10T08:43:23.477
> 
> 标签：c#, winforms, refresh, reload, findcontrol

我`GridView`在 Liste_Form 中有一个按钮，在 Close_Form 中有一个按钮。

当我单击 Close_Form 上的按钮时，如何刷新`Gridview`Liste_Form 中的内容？

或者重新加载 Liste_Form。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:31:42.840

Define event on Close_Form (of course consider better name for event):

```
public event EventHandler SomethingHappened; 
```

Raise this event inside button click event handler:

```
private void Button_Click(object sender, EventArgs e)
{
    if (SomethingHappened != null)
        SomethingHappened(this, EventArgs.Empty);
} 
```

Subscribe to this event on Liste_Form:

```
Close_Form closeForm = new Close_Form();
closeForm.SomethingHappened += Close_Form_SomethingHappened; 
```

Refresh your list in this event handler:

```
private void Close_Form_SomethingHappened(object sender, EventArgs e)
{
    // refresh GridView
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:18:34.280

你有几种方法可以做到这一点。我可能建议的一种方法是将委托传递给构造函数中的第二种形式：

```
Form2 myForm2 = new Form2(RefreshGrid); // assign to a Form2 local variable 
```

...您在 Form1（网格所有者）中定义了`RefreshGrid`方法：

```
void RefreshGrid(){
   // perform grid refresh
} 
```

...这样`myForm2`您就可以在单击按钮时执行操作：

```
void OnButtonClicked(object sender, EventArgs e){
   refreshAction();
} 
```

# android - 如何通过 Intent 从 SD 卡打开 PDF

> ID：10530416
> 
> 赞同：55
> 
> 时间：2012-05-10T08:43:37.010
> 
> 标签：android, pdf, android-intent

我正在尝试启动一个`Intent`以在我的应用程序的资产文件夹中打开一个 pdf。我已经阅读了几十篇文章，但仍然卡住了。显然我需要先将 pdf 复制到 sd 卡，然后启动`Intent`. 它仍然不起作用。

我认为问题在于`Intent`启动，所以我只是试图打开一个文件“example.pdf”，我使用以下代码复制到 SD 卡上：

```
Log.w("IR", "TRYING TO RENDER: " + Environment.getExternalStorageDirectory().getAbsolutePath()+"/example.pdf");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(Environment.getExternalStorageDirectory().getAbsolutePath()+"/example.pdf"), "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

try {
    startActivity(intent);
    Log.e("IR", "No exception");
} 
catch (ActivityNotFoundException e) {
    Log.e("IR", "error: " + e.getMessage());
    Toast.makeText(InvestorRelations.this, 
        "No Application Available to View PDF", 
        Toast.LENGTH_SHORT).show();
} 
```

这是我的 LogCat 输出。

```
05-10 10:35:10.950: W/IR(4508): TRYING TO RENDER: /mnt/sdcard/example.pdf
05-10 10:35:10.960: E/IR(4508): No exception 
```

除非运行此代码，否则我会得到以下 Toast（不是由我的应用程序生成的）

“不支持的文档类型”

但我可以通过安装的 PDF 查看应用程序手动打开文档。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-05-10T08:48:58.953

试试这个代码，显示来自 /sdcard 的 pdf 文件

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/example.pdf");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), "application/pdf");
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-02-26T12:33:54.117

对于 Android Nougat 及更高版本，必须完成更多工作，否则应用程序将无法打开`.pdf`文件。我们必须设置一个临时权限才能`URI`使用`FileProvider`：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
     File file=new File(mFilePath);
     Uri uri = FileProvider.getUriForFile(this, getPackageName() + ".provider", file);
     intent = new Intent(Intent.ACTION_VIEW);
     intent.setData(uri);
     intent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
     startActivity(intent);
 } else {
     intent = new Intent(Intent.ACTION_VIEW);
     intent.setDataAndType(Uri.parse(mFilePath), "application/pdf");
     intent = Intent.createChooser(intent, "Open File");
     intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(intent);
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-25T16:37:56.130

从这里下载源代码（[以编程方式从 android 中的 sdcard 中打开 pdf 文件](https://deepshikhapuri.wordpress.com/2017/04/24/open-pdf-file-from-sdcard-in-android-programmatically/)）

添加此依赖项：

```
compile ‘com.github.barteksc:android-pdf-viewer:2.0.3’ 
```

**活动主.xml：**

```
<?xml version=”1.0″ encoding=”utf-8″?>
<RelativeLayout xmlns:android=”http://schemas.android.com/apk/res/android&#8221;
xmlns:tools=”http://schemas.android.com/tools&#8221;
android:id=”@+id/activity_main”
android:layout_width=”match_parent”
android:layout_height=”match_parent”
android:background=”#efefef”&gt;

<ListView
android:layout_width=”match_parent”
android:id=”@+id/lv_pdf”
android:divider=”#efefef”
android:layout_marginLeft=”10dp”
android:layout_marginRight=”10dp”
android:layout_marginTop=”10dp”
android:layout_marginBottom=”10dp”
android:dividerHeight=”5dp”
android:layout_height=”wrap_content”&gt;

</ListView>
</RelativeLayout> 
```

**MainActivity.java：**

```
package com.pdffilefromsdcard;

import android.Manifest;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.Environment;
import android.support.v4.app.ActivityCompat;
import android.support.v4.content.ContextCompat;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.Toast;

import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class MainActivity extends AppCompatActivity {

ListView lv_pdf;
public static ArrayList<File> fileList = new ArrayList<File>();
PDFAdapter obj_adapter;
public static int REQUEST_PERMISSIONS = 1;
boolean boolean_permission;
File dir;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
init();

}

private void init() {

lv_pdf = (ListView) findViewById(R.id.lv_pdf);
dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
fn_permission();
lv_pdf.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
Intent intent = new Intent(getApplicationContext(), PdfActivity.class);
intent.putExtra(“position”, i);
startActivity(intent);

Log.e(“Position”, i + “”);
}
});
}

public ArrayList<File> getfile(File dir) {
File listFile[] = dir.listFiles();
if (listFile != null && listFile.length > 0) {
for (int i = 0; i < listFile.length; i++) {

if (listFile[i].isDirectory()) {
getfile(listFile[i]);

} else {

boolean booleanpdf = false;
if (listFile[i].getName().endsWith(“.pdf”)) {

for (int j = 0; j < fileList.size(); j++) {
if (fileList.get(j).getName().equals(listFile[i].getName())) {
booleanpdf = true;
} else {

}
}

if (booleanpdf) {
booleanpdf = false;
} else {
fileList.add(listFile[i]);

}
}
}
}
}
return fileList;
}
private void fn_permission() {
if ((ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED)) {

if ((ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, android.Manifest.permission.READ_EXTERNAL_STORAGE))) {
} else {
ActivityCompat.requestPermissions(MainActivity.this, new String[]{android.Manifest.permission.READ_EXTERNAL_STORAGE},
REQUEST_PERMISSIONS);

}
} else {
boolean_permission = true;

getfile(dir);

obj_adapter = new PDFAdapter(getApplicationContext(), fileList);
lv_pdf.setAdapter(obj_adapter);

}
}

@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
super.onRequestPermissionsResult(requestCode, permissions, grantResults);
if (requestCode == REQUEST_PERMISSIONS) {

if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {

boolean_permission = true;
getfile(dir);

obj_adapter = new PDFAdapter(getApplicationContext(), fileList);
lv_pdf.setAdapter(obj_adapter);

} else {
Toast.makeText(getApplicationContext(), “Please allow the permission”, Toast.LENGTH_LONG).show();

}
}
}

} 
```

**活动_pdf.xml：**

```
<?xml version=”1.0″ encoding=”utf-8″?>
<LinearLayout xmlns:android=”http://schemas.android.com/apk/res/android&#8221;
android:layout_width=”match_parent”
android:background=”#ffffff”
android:layout_height=”match_parent”
android:orientation=”vertical”&gt;

<com.github.barteksc.pdfviewer.PDFView
android:id=”@+id/pdfView”
android:layout_margin=”10dp”
android:layout_width=”match_parent”
android:layout_height=”match_parent” />
</LinearLayout> 
```

**PdfActivity.java：**

包 com.pdffilefromsdcard;

```
import android.os.Bundle;
import android.support.annotation.Nullable;
import android.support.v7.app.AppCompatActivity;
import android.util.Log;

import com.github.barteksc.pdfviewer.PDFView;
import com.github.barteksc.pdfviewer.listener.OnLoadCompleteListener;
import com.github.barteksc.pdfviewer.listener.OnPageChangeListener;
import com.github.barteksc.pdfviewer.scroll.DefaultScrollHandle;
import com.shockwave.pdfium.PdfDocument;

import java.io.File;
import java.util.List;

public class PdfActivity extends AppCompatActivity implements OnPageChangeListener,OnLoadCompleteListener {

PDFView pdfView;
Integer pageNumber = 0;
String pdfFileName;
String TAG=”PdfActivity”;
int position=-1;

@Override
protected void onCreate(@Nullable Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_pdf);
init();
}

private void init(){
pdfView= (PDFView)findViewById(R.id.pdfView);
position = getIntent().getIntExtra(“position”,-1);
displayFromSdcard();
}

private void displayFromSdcard() {
pdfFileName = MainActivity.fileList.get(position).getName();

pdfView.fromFile(MainActivity.fileList.get(position))
.defaultPage(pageNumber)
.enableSwipe(true)

.swipeHorizontal(false)
.onPageChange(this)
.enableAnnotationRendering(true)
.onLoad(this)
.scrollHandle(new DefaultScrollHandle(this))
.load();
}
@Override
public void onPageChanged(int page, int pageCount) {
pageNumber = page;
setTitle(String.format(“%s %s / %s”, pdfFileName, page + 1, pageCount));
}
@Override
public void loadComplete(int nbPages) {
PdfDocument.Meta meta = pdfView.getDocumentMeta();
printBookmarksTree(pdfView.getTableOfContents(), “-“);

}

public void printBookmarksTree(List<PdfDocument.Bookmark> tree, String sep) {
for (PdfDocument.Bookmark b : tree) {

Log.e(TAG, String.format(“%s %s, p %d”, sep, b.getTitle(), b.getPageIdx()));

if (b.hasChildren()) {
printBookmarksTree(b.getChildren(), sep + “-“);
}
}
}
} 
```

谢谢！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-22T15:00:13.947

接受的答案现在已经过时了。使用[FileProvider](https://developer.android.com/reference/android/support/v4/content/FileProvider.html)进行[文件共享](https://developer.android.com/training/secure-file-sharing/setup-sharing.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-15T00:47:02.807

此代码允许从您的 SD 卡中提取 pdf 文件

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("application/pdf");
startActivityForResult(intent, 200); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T08:49:19.907

这可能与资产文件夹中的文件被压缩有关。

尝试将其移动到您的`res/raw/`文件夹。

更多信息：[https ://stackoverflow.com/a/4432804/413127](https://stackoverflow.com/a/4432804/413127)

# iphone - 格式 MSISDN 号码 xcode iPhone

> ID：10530418
> 
> 赞同：0
> 
> 时间：2012-05-10T08:43:43.210
> 
> 标签：iphone, objective-c, ios

谁能告诉我如何在 xcode iPhone 应用程序中格式化 MSISDN 号码。我的 MSISDN 号码为“(911-111-1111)”。我需要删除数字之间的括号和“-”。我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:48:27.177

> ```
> mobile = @"(911-111-1111)";
> mobile = [mobile stringByReplacingOccurrencesOfString:@" " withString:@""];
> mobile = [mobile stringByReplacingOccurrencesOfString:@"(" withString:@""];
> mobile = [mobile stringByReplacingOccurrencesOfString:@")" withString:@""];
> mobile = [mobile stringByReplacingOccurrencesOfString:@"-" withString:@""];
> mobile = [mobile stringByReplacingOccurrencesOfString:@";" withString:@""];
> mobile = [mobile stringByReplacingOccurrencesOfString:@"," withString:@""]; 
> ```

这将删除所有多余的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:50:52.807

有很多方法可以做到这一点（几乎所有这些都可以通过快速检查[NSString](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)和[NSMutableString](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)类引用找到）。

如果你想做的只是剥离字符，我可能会做类似的事情

```
NSString *newString = [oldString stringByReplacingOccurrencesOfString:@"(" withString:@""];
newString = [newString stringByReplacingOccurrencesOfString:@")" withString:@""];
newString = [newString stringByReplacingOccurrencesOfString:@"-" withString:@""]; 
```

这不是最有效（或必然是“优雅”）的方式，但它具有可读性最强的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:55:18.160

我想这样做

```
 NSString *string = [oString stringByReplacingOccurrencesOfString:@"(" withString:@""];
    string = [string stringByReplacingOccurrencesOfString:@")" withString:@""];
    string = [string stringByReplacingOccurrencesOfString:@"-" withString:@""]; 
```

这样做你只会得到数字，这是你需要的。快乐的编码:)

# actionscript-3 - Flash Player 11 与 10 ByteArray 错误 #2030 与 PixelBender

> ID：10530422
> 
> 赞同：0
> 
> 时间：2012-05-10T08:43:53.807
> 
> 标签：actionscript-3, flash, bytearray, pixel-bender, flash-player-11

我正在尝试通过 unitzeroone[演示的](http://unitzeroone.com/blog/2009/03/18/flash-10-massive-amounts-of-3d-particles-with-alchemy-source-included/)PixelBender 部分使用 3d 投影，即使没有炼金术像素绘图，它本身也很可爱。问题是在 Flash Player 11+ 中查看时它不起作用。从 Flash CS4 或 CS5（但*不是*CS5.5）发布时，SWF 预览良好。当 SWF 在本地打开时，我们的设置似乎使用 FP10 调试播放器，效果很好，但是如果您将相同的 SWF 拖到安装了最新 Flash Player (11+) 的浏览器 (chrome/FF) 中，则会引发以下错误在 ByteArray.readFloat() 上：

```
Error #2030: End of file was encountered. 
```

...在 ByteArray.readFLoat()...第一次被调用时抛出。就在我完成 ByteArray.writeFloats 循环之后，我知道 ByteArray 在那个时候充满了数据。再次 - 此代码在 FP10 上完美运行，但在 FP11 上失败。我已经尝试捕获错误，它会按照您的预期跟踪错误，但我仍然坚持如何使这个 ByteArray 代码在 Flash Player 11 中工作。

我已经尽我所能在谷歌上搜索了这个，发现了很多关于 #2030 错误和 ByteArrays 的引用，但似乎没有一个能如此清楚地区分 FP10 和 FP11。 [这是 SWF 文件](http://client-projects.com/emusic/emusic_200x250_proto.swf)。

有任何想法吗？仅在 FP11 中存在的 ByteArrays 的 write() 或 read() 函数是否存在问题？有解决方法吗？

谢谢！

-案子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:58:12.807

我想通了，虽然我不完全明白问题是什么。Flash 播放器 11 似乎要求我在运行 ShaderJob 后立即将 PixelBender 输出 ByteArray 上的位置重置为 0。

```
var job:ShaderJob = new ShaderJob(shader, MyByteArray, 1024, 1);
job.start(true);
MyByteArray.position = 0 
```

FP10 不需要这个 - 我猜它是在 ShaderJob 之后自动重置位置？一定是因为 PixelBender 在 2 个 Flash 播放器版本中的实现方式略有不同？

# java - 如何找到图像的主色？

> ID：10530426
> 
> 赞同：14
> 
> 时间：2012-05-10T08:44:06.583
> 
> 标签：java, imagemagick, jmagick

我们可以使用 java、imagemagick 或 jmagick 找到图像中哪种颜色占主导地位吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T08:52:20.993

在java中迭代每个像素并确定颜色

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.util.Collections;
import java.util.Comparator;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import javax.imageio.ImageIO;
import javax.imageio.ImageReader;
import javax.imageio.stream.ImageInputStream;

public class ImageTester {

    public static void main(String args[]) throws Exception {
        File file = new File("C:\\Users\\Andrew\\Desktop\\myImage.gif");
        ImageInputStream is = ImageIO.createImageInputStream(file);
        Iterator iter = ImageIO.getImageReaders(is);

        if (!iter.hasNext())
        {
            System.out.println("Cannot load the specified file "+ file);
            System.exit(1);
        }
        ImageReader imageReader = (ImageReader)iter.next();
        imageReader.setInput(is);

        BufferedImage image = imageReader.read(0);

        int height = image.getHeight();
        int width = image.getWidth();

        Map m = new HashMap();
        for(int i=0; i < width ; i++)
        {
            for(int j=0; j < height ; j++)
            {
                int rgb = image.getRGB(i, j);
                int[] rgbArr = getRGBArr(rgb);                
                // Filter out grays....                
                if (!isGray(rgbArr)) {                
                        Integer counter = (Integer) m.get(rgb);   
                        if (counter == null)
                            counter = 0;
                        counter++;                                
                        m.put(rgb, counter);                
                }                
            }
        }        
        String colourHex = getMostCommonColour(m);
        System.out.println(colourHex);
    }

    public static String getMostCommonColour(Map map) {
        List list = new LinkedList(map.entrySet());
        Collections.sort(list, new Comparator() {
              public int compare(Object o1, Object o2) {
                return ((Comparable) ((Map.Entry) (o1)).getValue())
                  .compareTo(((Map.Entry) (o2)).getValue());
              }
        });    
        Map.Entry me = (Map.Entry )list.get(list.size()-1);
        int[] rgb= getRGBArr((Integer)me.getKey());
        return Integer.toHexString(rgb[0])+" "+Integer.toHexString(rgb[1])+" "+Integer.toHexString(rgb[2]);        
    }    

    public static int[] getRGBArr(int pixel) {
        int alpha = (pixel >> 24) & 0xff;
        int red = (pixel >> 16) & 0xff;
        int green = (pixel >> 8) & 0xff;
        int blue = (pixel) & 0xff;
        return new int[]{red,green,blue};

  }
    public static boolean isGray(int[] rgbArr) {
        int rgDiff = rgbArr[0] - rgbArr[1];
        int rbDiff = rgbArr[0] - rgbArr[2];
        // Filter out black, white and grays...... (tolerance within 10 pixels)
        int tolerance = 10;
        if (rgDiff > tolerance || rgDiff < -tolerance) 
            if (rbDiff > tolerance || rbDiff < -tolerance) { 
                return false;
            }                 
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-19T07:35:11.477

我刚刚发布了一个非常简单的算法，可以简单地用 Java 翻译。它被称为[颜色查找器](http://pieroxy.net/blog/pages/color-finder/index.html)并在 JavaScript 中工作。

该线程中提出的解决方案可能会被图像中的一些白色字符所抛弃，而我的确实试图找到最突出的颜色，即使所有像素并不是真正完全相同的颜色。

[这是一个现场演示](http://pieroxy.net/blog/pages/color-finder/demo.html)。

如果你觉得这有用，请告诉我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T10:21:33.633

这是一个棘手的问题。例如，如果您有一小块颜色完全相同的区域和一大块颜色略有不同的不同颜色的区域，那么简单地寻找最常用的颜色不太可能给您想要的结果。通过定义一组颜色以及您认为“成为”该颜色的 RGB 值范围，您将获得更好的结果。

该主题在 ImageMagick 话语服务器上进行了详细讨论，例如： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12878](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=12878)

另请参阅[获取图像主色的快速方法](https://stackoverflow.com/questions/5050250/fast-way-of-getting-the-dominant-color-of-an-image)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-10T08:49:39.000

使用纯java，您可以迭代每个像素并计算每种颜色包含的频率......

伪代码：

```
Map<Color, Integer> color2counter;
for (x : width) {
   for (y : height) {
      color = image.getPixel(x, y)
      occurrences = color2counter.get(color)
      color2counter.put(color, occurrences + 1)
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T08:55:07.033

假设您使用加色方案，其中 (0,0,0) 是黑色， (255, 255, 255) 是白色（如果我弄错了，请纠正我）。此外，如果您只想从 RGB 中找到主色：

我有一个想法，你们中的任何人都可以自由检查，那就是有 3 个变量，每个变量存储一个 RGB 值，并将图像中每个像素的适当值添加到每个变量中，然后除以 (255*numOfPixels)得到颜色的比例。然后比较 3 个比率：红色为 0.60，绿色为 0.5，这意味着红色更占优势。

这只是一个想法，可能需要调整......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-28T19:41:00.290

换句话说，我们可以使用 Color Thief 库来完成这项工作。更多信息可以在[这里](https://github.com/SvenWoltmann/color-thief-java)和[这里](http://lokeshdhakar.com/projects/color-thief/)找到。

感谢@svenwoltmann 和@lokeshdhakar。

# javascript - 如何阻止用户在两个不同的选项卡/窗口中打开相同的信息？

> ID：10530427
> 
> 赞同：1
> 
> 时间：2012-05-10T08:44:17.817
> 
> 标签：javascript, jquery

在我的应用程序中，我需要阻止用户在两个不同的选项卡/窗口中打开相同的链接（链接是动态的而不是静态的），因为链接生成的 id 基础我不允许用户在不同的选项卡中打开相同的 id 信息。

我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:50:33.557

我认为您最接近的是：

*   仅向登录用户提供信息
*   为每个页面生成一个随机令牌（并跟踪哪些令牌与哪些页面相关联）
*   使用 Ajax 每*n*秒 ping 一次服务器，在请求中传递令牌
*   *如果服务器响应“已在n 次 3*秒内收到来自同一用户的同一页面的不同令牌”或未收到响应，则`document.body.innerHTML = ''`

当然，这对用户来说是一件可怕的事情，并且可以通过在调试工具中破解 JS 或仅通过复制/粘贴或截取信息的屏幕截图来轻松击败。

**Web 浏览器的设计目的不是为了限制用户使用他们获取的信息可以下载的内容**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T05:27:31.683

您可以使用本地存储来标记在加载活动中打开的页面，并在加载检查中卸载时重置标记检查是否设置了标记，然后限制其他允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:47:53.273

如果您使用 window.open() 为窗口命名，它不会打开多个窗口/选项卡。

例子：

```
window.open("http://www.google.com", "myWindow"); 
```

如果你有一个 id 来区分窗口，代码可能是这样的：

```
window.open("url_for_id", "window" + id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:49:01.233

我不认为你能做到这一点。但是您可以这样做每次用户查看页面时生成一个令牌并将其存储到会话以及页面中您可以防止用户从两个选项卡提交数据

# bash - 使用索引数组从文件中删除行

> ID：10530438
> 
> 赞同：2
> 
> 时间：2012-05-10T08:44:59.847
> 
> 标签：bash, sed

我正在尝试从文件中删除一些特定的行。我有一个索引数组来保存哪些行将被删除。对于这个问题，我使用了以下命令。但是，它只删除索引数组的第一个成员指向的一行。我无法删除其余的行。命令有问题吗？

```
**sed -i ${index_array}'d' $file_name** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:50:34.153

这可能对您有用（GNU sed 和 BASH）：

```
sed -i ''"${index_array[*]/%/d;}"'' file 
```

或者：

```
sed -i -f - <<<"${index_array[@]/%/d;}" file 
```

或者：

```
echo "${index_array[@]/%/d;}" | sed -i -f - file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:56:03.543

```
nums=$(echo ${index_array[@]} | sed 's/ /\\|/')

sed = input_file | sed '
{
N
s/\n/ /
}
' | sed "/^$nums /d" | sed 's/^[0-9]* //' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:03:30.253

它应该是：

```
for i in "${index_array[@]}"
do
    sed -i "${i}d" "$filename"
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T13:13:13.220

```
for line in "${index_array[@]}"; do sed_script+=" -e '/^$line\$/d'"; done
sed -i "$sed_script" file 
```

# properties - 如何根据注册表中的值构建注册表搜索

> ID：10530448
> 
> 赞同：1
> 
> 时间：2012-05-10T08:45:17.767
> 
> 标签：properties, wix, registry

我有一个注册表值，其中包含要使用的配置的当前版本

HKLM\SOFTWARE\companyname\productname\CurrentVersion = 13.5

我可以成功地搜索它并使用它来获取它的值

```
<Property Id="CURRENTVERSION">
  <RegistrySearch Id="CurrentVersionID" Root="HKLM" Type="raw"
                  Key="SOFTWARE\companyname\productname\CurrentVersion"></RegistrySearch>
</Property> 
```

但现在我需要根据这个 CURRENTVERSION 值搜索另一个注册表值，位于

SOFTWARE\companyname\productname\CURRENTVERSION\ConfigPath

```
<Property Id="CONFIGPATH">
  <RegistrySearch Id="ConfigPathId" Root="HKLM" Type="raw"
                  Key="SOFTWARE\companyname\productname\CURRENTVERSION\ConfigPath"></RegistrySearch>
</Property> 
```

有人可以为我提供一种方法来做到这一点，最好是一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:37:08.450

您应该尝试在 [] 内的第二个注册表搜索中包含 CURRENTVERSION，如下所示：

```
<Property Id="CONFIGPATH">
    <RegistrySearch Id="ConfigPathId" Root="HKLM" Type="raw"
              Key="SOFTWARE\companyname\productname\[CURRENTVERSION]\ConfigPath">
    </RegistrySearch>
</Property> 
```

我尚未对其进行测试，但这就是您通常在 WiX 中访问属性值的方式。

Alternatively, you can define variables in the RegistrySearch element in the Utils extension. These variables can then be used in other registry searches. Check out the following link for an example: [http://wix.sourceforge.net/manual-wix3/bundle_define_searches.htm](http://wix.sourceforge.net/manual-wix3/bundle_define_searches.htm)

# php - 使用 PHP CURL 上传文件

> ID：10530449
> 
> 赞同：1
> 
> 时间：2012-05-10T08:45:25.333
> 
> 标签：php, curl

我有一个连接到 API 的前端 php 应用程序。应用程序通过 PHP curl 与 API 对话，因为这是唯一的通信模式。

我需要将文件上传到服务器，这些文件是从浏览器中获取并发送到服务器的。

使用 curl 将多部分文件发送到服务器的最佳方式是什么？

目前我正在使用 $_POST 发送文件，但我认为不建议这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:50:41.180

如果您使用 curl POST，那么您可以使用 @ 将文件添加到 POST

```
// same as <input type="file" name="fileField">
$post = array(
    "fileField"=>"@/path/to/file.jpg",
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
```

[google](http://bit.ly/LlSMy9)上有很多结果

# android - Android 4.0 套接字问题

> ID：10530451
> 
> 赞同：0
> 
> 时间：2012-05-10T08:45:28.673
> 
> 标签：android

好吧，Android 4.0 不允许在 UI 线程上联网。所以我做了一个新线程。

```
public class NetThread extends Thread {
    BukkitController bc;
    Socket sock;
    ObjectOutputStream outstream;
    ObjectInputStream instream;
    boolean loaded=false;
    String ServerIP="192.168.123.103";
    String id="ssw";
    String pw="ssw";
    ArrayList<String> plist=new ArrayList<String>();
public void run(){
    try {
        sock=new Socket(ServerIP,3560);
        outstream=new ObjectOutputStream(sock.getOutputStream());
        instream=new ObjectInputStream(sock.getInputStream());
        //LOGIN
        outstream.writeObject("SIGN "+id+" "+pw);
    } catch (Exception e){}
        Object tmp;
        try{
        outstream.writeObject("PLIST");
        plist=(ArrayList<String>) instream.readObject();
        } catch ( Exception e){
        }

    loaded=true;
    while(true){}
}
public void Write(String msg){
    try {
        outstream.writeObject(msg);
    } catch ( Exception e){
    }
} 
```

}

在 UI 线程中，我创建了对象：

```
m_nt=new NetThread();
m_nt.start(); 
```

用 LogCat 测试后，我发现源停止在：

```
sock=new Socket(ServerIP,3560); 
```

我该如何解决这个问题？我没有错误，只是冻结在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:54:13.130

用这个：

```
try{
sock=new Socket(InetAddress.getByName(ServerIP),3560);
//more here
}
catch {Exception e}
{
Log.e("MyThread", "Error " + e.getMessage());
e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:51:13.150

您不能在 Honeycombe 的 UI 线程上执行网络 IO。从技术上讲，这在早期版本的 Android 上是可能的，但这是一个非常糟糕的主意，因为它会导致您的应用程序停止响应，并可能导致操作系统因您的应用程序行为不端而杀死您的应用程序。您需要运行后台进程或使用 AsyncTask 在后台线程上执行网络事务。

在 Android 开发者网站上有一篇关于Painless Threading[链接](http://developer.android.com/resources/articles/painless-threading.html)的文章，它很好地介绍了这一点，并且将为您提供比此处实际提供的更深入的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:56:33.893

我建议使用 Asynctask 来处理您的网络代码。虽然我不得不承认你的代码只是停止很奇怪。如果服务器不可用，您应该得到一个异常。

有关 AsyncTasks 的更多信息，请查看[Android 开发人员](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - Java，如何将数组硬编码为 ArrayList

> ID：10530452
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:45:32.620
> 
> 标签：java, arrays, arraylist

我想创建一个产品类型的 ArrayList

如何将数组插入 ArrayList？

```
public Inventory()
{
    products = new ArrayList<ProductLine>();
    products.add(new ProductLine("A0001", 10.90, 9.90, 100, "N/A"));
    products.add(new ProductLine("B0010", 12.00, 7.50, 125, "5"));
    products.add(new ProductLine("C0100", 3.00, 2.30, 1000, "16"));
    products.add(new ItemisedProductLine("D1000", 2600, 2490, 2, Arrays.asList("a b d", "e f g h", "i j k l"))));
    products.add(new ProductLine("E0001", 699, 509, 3, Arrays.asList(new serialNumbers("CCCC333333"),new serialNumbers("DDDD444444"), new serialNumber("AAAA222222"))));
} 
```

我收到一个错误：

```
"missing ';' 
expecting ')'...") 
```

将数组硬编码为 ArrayList 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:51:13.650

第 7 行末尾不是有一个额外的“)”吗？

# ios - IOS文件加密

> ID：10530454
> 
> 赞同：-2
> 
> 时间：2012-05-10T08:45:37.347
> 
> 标签：ios, ipad, security

我们发现第三方软件工具可以通过 USB 端口完全访问 ipad 文件系统，不受任何限制（加密或密码）您可以查看和复制 iPad 上的任何文件。不需要越狱。有没有人在 ipad 上使用过文件加密，以便我们可以加密我们想要保护的文件？

我必须说，Apple 没有提及任何内容，也不承认非 Apple 软件可以轻松绕过所有 Apple 安全措施。

是否有任何加密库/api 我可以用来加密比如说 PDF 文件，以便在从 ipad 复制时无法打开它们？

我们主要与 Adob​​e Air 合作创建简单的 IOS 应用程序。是否有任何文件安全选项可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:01:00.367

在某些方面你是对的。

1) 如果设备已解锁（输入了 pin/密码）或设备没有解锁 pin/密码，则文件未加密可通过[libimobiledevice](http://www.libimobiledevice.org/)和 co 访问。

2）您可以使用openssl添加额外的加密......查看我的旧[帖子](https://stackoverflow.com/questions/7868754/is-my-encryption-safe-as-openpgp-smime)或检查openssl的SMIME功能。

# django - Django south：重新运行第一次迁移

> ID：10530455
> 
> 赞同：6
> 
> 时间：2012-05-10T08:45:37.723
> 
> 标签：django, django-models, django-south

我在应用程序的模型声明中犯了一个错误，现在需要重新运行初始迁移。

除了删除这个应用程序的表格和南方迁移历史中的条目之外，还有其他方法吗？

我的设置：

Django 1.3.1

南 0.7.3

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T08:49:57.753

```
./manage.py migrate myapp zero 
```

[文档](http://south.aeracode.org/docs/commands.html#migrate)

# eclipse - GPE 上 GWT 的自动保存

> ID：10530464
> 
> 赞同：0
> 
> 时间：2012-05-10T08:46:14.023
> 
> 标签：eclipse, gwt

安装了最新的 GPE，并在 Eclipse 3.7.2 中创建了一个 GWT 项目。

在启动 GWT 之前，如果修改了当前 GWT 项目的源文件`Development Mode`，如何使该功能生效？`Autosave`

启用`Autosave`功能的标准方法在下面对其没有影响，

```
On "Window -> Preferences -> General -> Workspace"
enabling "Save automatically before build" + "Build automatically" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:41:00.423

这可能是因为启动开发模式与构建项目不同。但是，当有未保存的更改时，会弹出一个对话框，要求您在启动前保存更改。它还具有“始终在启动前保存更改”选项。您可以使用它在启动前自动保存更改。

# java - 如何在hadoop 0.23.0 MR2上运行和编译java程序

> ID：10530466
> 
> 赞同：1
> 
> 时间：2012-05-10T08:46:16.863
> 
> 标签：java, hadoop, javac

我创建了一个 .java 文件以在 cloudera hadoop 上运行。要编译它，

```
 javac -classpath $HADOOP_COMMON_HOME/share/hadoop/mapreduce/hadoop-mapreduce-client- core-3.0.0-SNAPSHOT.jar -d multifetch_classes MultiFetch.java 
```

错误：

```
MultiFetch.java:12: package org.apache.hadoop.conf does not exist
import org.apache.hadoop.conf.Configuration;
                         ^ 
MultiFetch.java:13: package org.apache.hadoop.conf does not exist
import org.apache.hadoop.conf.Configured;
                         ^
MultiFetch.java:14: package org.apache.hadoop.fs does not exist
import org.apache.hadoop.fs.Path;
                       ^
MultiFetch.java:15: package org.apache.hadoop.io does not exist
import org.apache.hadoop.io.Text; 
```

我是否选择了错误的 jar 来执行文件，或者我是否遵循错误的程序来编译 java 文件。请让一些人纠正这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:04:46.900

大多数上述错误与无法找到 Hadoop 库来编译您的示例应用程序有关。

一个基于 Java 的示例 Map/Reduce 示例构建命令如下：

```
$javac \
 -classpath ${HADOOP_HOME}/hadoop-${HADOOP_VERSION}-core.jar \
 -d wordcount_classes \
 WordCount.java 
```

就我而言，jar 文件是`hadoop-0.20.203.1-SNAPSHOT-core.jar`. 如果你看一下你的命令，你会发现有些地方不对：

```
javac -classpath $HADOOP_COMMON_HOME/share/hadoop/mapreduce/hadoop-mapreduce-client- core-3.0.0-SNAPSHOT.jar -d multifetch_classes MultiFetch.java 
```

您可以做的是您可以通过使用`classpath`上面示例中给出的方法来构建您的示例。

# mysql - 从现有查询创建 count() 查询

> ID：10530469
> 
> 赞同：1
> 
> 时间：2012-05-10T08:46:30.890
> 
> 标签：mysql, count, jooq

**编辑：**我使用 1.6.8 版的 jOOQ；在较新的版本中，这应该可以工作（见答案）

我正在为我的 Java Web 应用程序编写一个网格模型，用于`Jooq`处理通过分页、排序等获取数据...

首先，我创建一个选择`factory.select(...)`并将这个 ( `SelectConditionStep`) 作为参数传递给我的网格模型，我在其中添加所需的`.limit()`和`.orderBy()`基于参数的。

但我现在的问题是我还需要知道结果的总数（不仅仅是 1 页）来计算总页数。所以我的问题是是否有可能以某种方式从给定的`SelectConditionStep`.

我想将其包装为计数查询中的子查询；就像是：

（不起作用，只是为了展示这个想法）

```
factory.select(count()).from(selectConditionStep)... 
```

**在 MySQL 中，我会这样做：**

```
select count(*) from (select ...) as r 
```

**我拥有的当前代码：**

```
 private final SelectConditionStep selectStep;
        ...

        @Override
        public int getAvailableRows() {

            JooqSelect select = new JooqSelect() {

                @SuppressWarnings("unchecked")
                protected Result<Record> select(Connection connection) throws SQLException {

                    Factory create = new Factory(connection, dialect);              
                    create.attach(selectStep);

                    /* This does not compile, just to show what I need */               
                    return create.select(count()).from(selectConditionStep).fetch();
                }
            };

            session.doWork(select); 

            /* Get result */
            return select.getResult()...;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:53:47.223

您更新的示例提到了`count()`未知。这其实是[`DSL.count()`](https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#count())。你有三个选择：

*   使用[`selectCount()`](https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#selectCount())而不是`select(count())`. 这是一种方便的方法
*   完全限定[`DSL.count()`](https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/impl/DSL.html#count())函数
*   从工厂静态导入所有方法：

    ```
    import static org.jooq.impl.DSL.*; 
    ```

### 引用`XYZStep`类型：

附带说明一下，您永远不会觉得需要`XYZStep`直接引用 jOOQ 类型，它们仅用作实现内部 DSL 的辅助类型。[这是一篇博客文章，解释了替代方案是什么](https://blog.jooq.org/2020/03/06/create-empty-optional-sql-clauses-with-jooq/)。

# java - Java Textfield 打印查询

> ID：10530481
> 
> 赞同：0
> 
> 时间：2012-05-10T08:47:11.687
> 
> 标签：java, swing, netbeans, uitextfield, jtextfield

嗨，我想从数字 1 循环到 10，并在我的 netbeans TextField 中将它们全部打印出来。

我尝试将文本字段放在循环中，但它覆盖了最后一个值，因此它不起作用。知道如何解决这个问题吗？谢谢

代码：

```
private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {

 String test = null;
 int i = 0;

    while(i<10){
     test = String.valueOf(i);
     test = test+"/n"
    }

    jTextField3.setText(test); 

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:52:53.710

假设您正在寻找一个 JTextArea。尝试这样的事情：

```
JTextArea textArea = new JTextArea();
for(int i=0;i<10;i++)
   textArea.append(i+"\n"); 
```

TextField 通常用于输入，即用户可以输入内容的“行”。TextArea 可能是您想要的。在这里您应该调用该`append()`方法，输入要附加的值并添加换行符`\n`

如果它覆盖了您的最后一个值，请确保您在循环之外创建字段，然后调用 refrence. 如果您`JTextArea textArea = new JTextArea();`在循环内执行此操作，则每次迭代都会创建一个新区域，覆盖您拥有的区域

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:51:57.987

不看代码很难说；当您寻求帮助时，您应该发布它的相关部分。

我的猜测是你正在做类似的事情。

```
myTextField.setValue(Integer.toString(i)); 
```

`set`总是删除以前的值并添加一个新值。

除此之外，JTextField 不支持多行。尝试使用 JTextArea。

# java - Selenium Java 示例（是否需要 Selenium IDE）？

> ID：10530483
> 
> 赞同：1
> 
> 时间：2012-05-10T08:47:17.953
> 
> 标签：java, selenium, webdriver, selenium-rc, selenium-ide

是否需要下载 Selenium IDE 才能执行 Selenium 示例？

我正在尝试在 Java 上执行 Selenium 应用程序。请帮助我完成步骤和示例......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:36:32.347

No, it is not necessary.

**Selenium IDE** is a tool (a Firefox addon) for recording testcases without writing any code. It works internally with Selenium RC and can export it's code to some languages.

If you want to write Java code, use **Selenium RC** or **Selenium 2 (WebDriver)** with any Java IDE you like.

As Selenium 2 is recommended nowadays, you should use that. [This page from WebDriver docs is full of examples.](http://seleniumhq.org/docs/03_webdriver.html#selenium-webdriver-api-commands-and-operations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:13:40.573

如果您想手动编写 selenium 代码，则无需下载 selenium IDE。但是如果要直接获取java代码，则需要下载。在这种情况下，您可以记录一个测试用例，然后可以在 java 中导出它。所以这是你的选择..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:58:38.980

Selenium 文档说您可以使用任何 IDE，唯一的要求是 selenium.jar 应该在您的类路径中。我认为您应该使用 Eclipse IDE。按照配置的链接。 [使用 Eclipse 配置 Selenium](http://seleniumhq.org/docs/appendix_installing_java_driver_client.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:56:20.297

Selenium IDE 是 Firefox 的插件。它仅用于记录您的测试，以便节省时间。录制的代码可以导出为您想要的语言（Java、PHP、Python 等）

# magento - 如果内容存在，magento 显示选项卡

> ID：10530484
> 
> 赞同：0
> 
> 时间：2012-05-10T08:47:19.047
> 
> 标签：magento, tabs, product

我正在使用现代主题中的 tab.phtml 来创建产品选项卡，但是我已将其切换为使用 jquery 和 jquery-ui，因为我需要直接链接到选项卡。

因此，简而言之，代码与现代主题中的代码几乎相同。

```
 <div id="tabs">
<ul>
    <?php foreach ($this->getTabs() as $_index => $_tab): ?>
        <?php if($this->getChildHtml($_tab['alias'])): ?>
            <li class="<?php echo !$_index?' active first':(($_index==count($this->getTabs())-1)?' last':'')?>"><a href="#<?php echo $_tab['alias'] ?>"><?php echo $_tab['title']?></a></li>
        <?php endif; ?>
    <?php endforeach; ?>
</ul>
<div class="clearer"></div>
<?php foreach ($this->getTabs() as $_index => $_tab): ?>
    <?php if($this->getChildHtml($_tab['alias'])): ?>
        <div class="product-tabs-content" id="<?php echo $_tab['alias'] ?>"><?php echo $this->getChildHtml($_tab['alias']) ?></div>
    <?php endif; ?>
<?php endforeach; ?>
</div> 
```

我正在catalog.xml下使用相同的方法添加自定义选项卡：

```
<action method="addTab" translate="title" module="catalog"><alias>how-to-use</alias><title>How to Use</title><block>catalog/product_view</block><template>catalog/product/view/how-to-use.phtml</template></action> 
```

但是我注意到“追加销售”选项卡仅在分配了追加销售产品时出现。如果有要显示的内容，我想使用相同的功能来显示自定义产品属性。

所以我要问的是加售如何检测到没有分配产品，所以没有显示标签，所以我可以为我的自定义标签执行此操作。我的自定义选项卡 phtml 文件如下所示：

```
<?php $_howtouse = $this->getProduct()->getHowToUse(); ?>
<?php if ($_howtouse): ?>
<div class="std">
    <?php echo $this->helper('catalog/output')->productAttribute($this->getProduct(), $_howtouse, 'howtouse') ?>
</div> 
```

任何帮助都非常感谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:10:06.683

upsell.phtml 中的第一行代码控制外观：

```
<?php if(count($this->getItemCollection()->getItems())): ?> 
```

我推测您的代码只是评估为 true 并始终显示该部分。$this->getProduct()->getHowToUse() 你的输出是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:01:37.587

原来我的上面有 1 行：

```
<?php $_howtouse = $this->getProduct()->getHowToUse(); ?> 
```

这意味着它注册为有一些内容都是空白。摆脱了它现在可以工作的空白。

# xml - 如何在 Marklogic 中编写不等于查询？

> ID：10530485
> 
> 赞同：2
> 
> 时间：2012-05-10T08:47:21.010
> 
> 标签：xml, xquery, marklogic

我有以下 xml 结构：-

```
<patent-assignors>
  <patent-assignor>
    <name>VOLPENHEIN, ROBERT A.</name>
    <execution-date>
      <date>19841204</date>
    </execution-date>
  </patent-assignor>
</patent-assignors>

<patent-assignees>
  <patent-assignee>
    <name>PROCTER &amp; GAMBLE COMPANY, THE</name>
    <address-2>A CORP. OF  OHIO</address-2>
    <city>CINCINNATI</city>
    <state>OHIO</state>
  </patent-assignee>
</patent-assignees> 
```

我想返回那些**专利转让人**姓名不等于**专利受让人**姓名的记录。但我不想使用 where 子句，因为它会减慢查询速度。我想过滤搜索本身的结果。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:31:22.450

This works for the provided example. Haven't tested with multiple assignees, or explored performance.

```
/patent[patent-assignors/patent-assignor/name != patent-assignees/patent-assignee/name] 
```

Based on

```
xdmp:document-insert('/patent.xml',
  <patent>
    <patent-assignors>
      <patent-assignor>
        <name>VOLPENHEIN, ROBERT A.</name>
        <execution-date>
          <date>19841204</date>
        </execution-date>
      </patent-assignor>
    </patent-assignors>
    <patent-assignees>
      <patent-assignee>
        <name>PROCTER &amp; GAMBLE COMPANY, THE</name>
        <address-2>A CORP. OF  OHIO</address-2>
        <city>CINCINNATI</city>
        <state>OHIO</state>
      </patent-assignee>
    </patent-assignees>
  </patent>
) 
```

# jcarousel - jcarousel 图像在 chrome 上滚动不正确

> ID：10530487
> 
> 赞同：1
> 
> 时间：2012-05-10T08:47:25.587
> 
> 标签：jcarousel

$j("#carousel2_2").jcarousel({ vertical: false, start: 1, scroll: 1, visible: 1, animation: 'normal', easing: 'swing', auto: parseInt(1), wrap: '圆形'，itemFallbackDimension：430

```
}); 
```

问题出在 chrome 中，它不能正确滚动。它不会滚动到第一个图像的整个宽度并转到第二个，而是部分滚动到第二个，然后是第二个和第三个等等。

为什么？

# c# - 打开一个新表单并从数据库c#中打开保存的图像文件

> ID：10530488
> 
> 赞同：1
> 
> 时间：2012-05-10T08:47:27.053
> 
> 标签：c#, winforms, switch-statement

我有一个链接到我的 c# 应用程序的数据库。当用户单击查看时，switch 语句会检查文件类型是什么，并显示相关查看器。当它是图像时，我希望打开一个新表单并显示该图像。图像保存在 varribale ofdSelectPicture 中，我已经以新形式尝试过

```
picShowPicture.Image = Image.FromFile(ofdSelectPicture.FileName); 
```

但这似乎无济于事。所以我猜它是我需要告诉它打开的case语句。

因此，我所追求的是当用户单击视图以查看要打开的新表单以及保存以显示图像的图像文件路径时。这是 switch 语句

```
 switch (textBox5.Text)
        {
            case "Picture":
                picture_viewer picture_viewer = new picture_viewer();

                picture_viewer.Show();
                break;

            case "Video":
                MessageBox.Show("video working");
                break;

            case "Audio":
                MessageBox.Show("audio working");
                break;

            case "URL":
                System.Diagnostics.Process.Start(textBox1.Text);
                break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:55:43.587

您需要将`pictureBox`对象设置为公共，然后在显示表单之前设置属性，最好使用在表单`.Image`中声明的​​方法来做到这一点`picture_viewer`

```
public void SetImage(string fileName)
{
   // Set the size of the PictureBox control.
    //this.pictureBox1.Size = new System.Drawing.Size(140, 140);
    this.pictureBox1.Image = Image.FromFile(fileName);
} 
```

然后

```
switch (textBox5.Text)
{
   case "Picture":
         picture_viewer picture_viewer = new picture_viewer();
         picture_viewer.SetImage(ofdSelectPicture.FileName)
         picture_viewer.Show();
   break; 
```

# xaml - 访问任务内的 XAML 控件时出现异常

> ID：10530497
> 
> 赞同：0
> 
> 时间：2012-05-10T08:48:19.420
> 
> 标签：xaml, windows-runtime, winrt-xaml, c++-cx

如果我尝试访问任务（和 task::then）中的 XAML 控件，我的 Metro XAML 应用程序总是会因异常而停止。相同的代码在任务之外没有任何问题。我没有找到任何答案 - 我错过了什么？

VS11 调试器报告：Concurrency::unobserved_task_exception

例外：应用程序调用了为不同线程编组的接口。

非常感谢您的帮助！

```
void MyClass::MyMemberFunction()
{
    xamlStoryboard->Stop(); // ok
    xamlImage->Source = ref new BitmapImage(); // ok

    task<void> atask([this] ()
    {
        xamlStoryboard->Stop(); // exception!
        xamlImage->Source = ref new BitmapImage(); //exception!
    });

    atask.then([this] ()
    {
        xamlStoryboard->Stop(); // exception!
        xamlImage->Source = ref new BitmapImage(); //exception!
    });
} 
```

如果我们添加 task_continuation_context::use_current() 作为第二个参数，atask.then() 延续代码将无异常运行：

```
 atask.then([this] ()
    {
        xamlStoryboard->Stop(); // now ok!
        xamlImage->Source = ref new BitmapImage(); // now ok!
    }, task_continuation_context::use_current()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:27:35.297

您正在从 UI/Dispatcher 线程以外的线程调用您的 UI 元素。您需要使用 control.Dispatcher.InvokeAsync() 调用 UI 元素的方法，否则请确保您没有从后台线程调用它们。

# java - Java 连接池实现

> ID：10530508
> 
> 赞同：2
> 
> 时间：2012-05-10T08:49:08.327
> 
> 标签：java, database, object, connection, pool

如果有可能实现它，你能看看我的连接池吗？

```
public class ConnectionPool {
    private static List<DBConnection> pool = null;
    private static int available = 0;
    private ConnectionPool() {}

    public static DBConnection getConnection() {
        if (pool == null) {
             pool = new ArrayList<DBConnection>();
             for (int i = 0; i < 3; i++) {
                 try {
                    pool.add(new DBConnection());
                    available++;
                } catch (SQLException e) {
                    e.printStackTrace();
                }
             }
        }
        if (pool.size() > 0) {
            available--;
            return pool.remove(available);
        } else {
            return null;
        }
    }

    public static void returnConnection(DBConnection c) {
        pool.add(c);
        available++;
    }
} 
```

我只使用一个数组，客户端应该向连接池询问连接使用它，然后将其返回到连接池。

```
 Connection connection = ConnectionPool.getConnection();
  connection.execute("insert into users values('"+user.getUsername()+"', '"+user.getPassword()+"', '"+user.getGroup()+"', '"+banned+"', '"+broker+admin+sharehodler+company+"')");      
  ConnectionPool.returnConnection(connection);
  connection = null; 
```

请我需要有关此实施的反馈。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:00:13.380

有一些点使这个实现非常有问题。

*   线程安全。如果多个线程与池一起工作怎么办？您没有将列表锁定在读/写访问权限上。
*   静态最大池大小为 3 个连接，您也可以立即创建所有连接，无论它们是否需要。一种常见的策略是创建一堆连接并在需要时创建更多连接，直到达到允许/配置的最大值。
*   你只有静态方法。应该可以有多个池，这意味着您需要`ConnectionPool`.
*   无法将 host+dbname+user+password 传递给创建的连接。
*   您无需处理“断开”的连接 - 如果现有连接出现问题，您可能必须重新创建连接。这比我开始使用池之前所想的要重要得多。
*   使用配置值而不是静态值，参见第 2 点
*   最后：当然，自己编写这些东西很有趣——但是如果您需要一个项目池，请选择一个现有的，例如[c3p0](http://www.mchange.com/projects/c3p0/index.html)或[tomcat 连接池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)。

我确信还有更多需要指出的地方，但除非这些都已修复，否则继续下去是没有用的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T09:08:18.537

池实现的一个大问题是您将裸连接传递给池的调用者。这意味着有人可以从您的池中获取连接，将其关闭，然后将其返回到池中。这很**糟糕**。

解决这个问题的正常方法是使用委托包装返回的连接对象，并让它们忽略对 close 方法的调用（或者更好的是，让 close() 安全地将底层连接返回到池中）。

其他主要问题：

*   如果在事务中间返回连接会发生什么？
*   如果连接以某种方式损坏或断开连接会发生什么？它会留在游泳池里吗？

总而言之，您应该重用现有的连接池实现，而不是自己编写。如今，许多类型 4 驱动程序都在驱动程序中包含自己的连接池。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T08:53:19.607

一些想法：

*   您的代码不是线程安全的。也许在这方面工作。
*   getConnection() 中的代码过多。真的需要延迟初始化吗？
*   available 没用，可以用 pool.size() 代替。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T09:02:26.467

AFAIK，

*   您的`getConnection()`方法需要更改为`Connection`仅检索对象。

    准备连接和池应该从 getConnection() 方法中删除，并以这样的方式添加，以便在`ConnectionPool`第一次加载类时。

    此外，您还需要处理一些其他属性，例如`connection timeout`,`purging` 等，以使其适用于所有场景。

    使其线程安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-07T13:47:11.073

其他成员已经提出了很多建议。我有一些模型实现，想分享给新访客。这是代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Iterator;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

abstract class ObjectPool<T> {
    private ConcurrentLinkedQueue<T> pool;
    ScheduledExecutorService executorService;

    ObjectPool(int minObjects) {
        pool = new ConcurrentLinkedQueue<T>();
        for (int i = 0; i < minObjects; i++) {
            pool.add(createObject());
        }
    }

    ObjectPool(final int minObjects, final int maxSize, final long interval){
        pool = new ConcurrentLinkedQueue<T>();
        for (int i = 0; i < minObjects; i++) {
            pool.add(createObject());
        }

        executorService = Executors.newSingleThreadScheduledExecutor();
        executorService.scheduleWithFixedDelay(new Runnable(){

            public void run() {
                int size = pool.size();
                while(size > maxSize){
                    pool.remove();
                }
                Iterator i = pool.iterator();
                while(i.hasNext()){
                    T t = (T) i.next();
                    if(checkExpiry(t)){
                        System.out.println("Expiry existed...");
                        i.remove();
                    }
                }

                while(pool.size() < minObjects){
                    System.out.println("Adding more objects to pool");
                    pool.add(createObject());
                }
            }

        }, interval, interval, TimeUnit.MILLISECONDS);

    }

    public T borrowObject() {
        if (pool.peek() == null)
            return createObject();
        return pool.remove();
    }

    public void addObject(T obj) {
        if (obj == null)
            return;
        pool.add(obj);
    }

    public abstract T createObject();

    public abstract boolean checkExpiry(T t);
}

class MultithreadQuery extends Thread{
    private ObjectPool<Connection> pool;
    private int threadNo;
    String query;
    MultithreadQuery(ObjectPool<Connection> pool,int threadNo, String query){
        this.pool = pool;
        this.threadNo = threadNo;
        this.query = query;

    }
    @Override
    public void run(){
        Connection con = pool.borrowObject();
        Statement stmt;
        try {
            stmt = con.createStatement();
            System.out.println("Query started for thread->"+ threadNo);
            ResultSet rs=stmt.executeQuery(query);
            while(rs.next())  
            System.out.println(rs.getInt(1)+"  "+rs.getString(2)+"  "+rs.getString(3));
            System.out.println("closing connection....");
            con.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }  
        pool.addObject(con);        
        System.out.println("Query ended for thread->"+ threadNo);
    }
}

public class ObjectPoolPatternDemo {
    ObjectPool<Connection> pool;

    public void setUp(){
        pool = new ObjectPool<Connection>(4, 10, 1) {

            @Override
            public Connection createObject() {
                Connection con;
                try {
                    con = DriverManager.getConnection("URL","Username","Password");
                    return con;
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }

            @Override
            public boolean checkExpiry(Connection conn) {
                boolean expiryFlag = false;
                try {
                    if(conn.isClosed())
                        expiryFlag = true;

                } catch (SQLException e) {
                    e.printStackTrace();
                }
                return expiryFlag;
            }
        };
    }

    public static void main(String[] args) throws SQLException {
        ObjectPoolPatternDemo oppd = new ObjectPoolPatternDemo();
        oppd.setUp();

        ExecutorService es = Executors.newFixedThreadPool(4);
        String query = "select * from TABLE";
        es.execute(new MultithreadQuery(oppd.pool,1,query));
        es.execute(new MultithreadQuery(oppd.pool,2,query));
        es.execute(new MultithreadQuery(oppd.pool,3,query));
        es.execute(new MultithreadQuery(oppd.pool,4,query));
        es.execute(new MultithreadQuery(oppd.pool,5,query));
        es.execute(new MultithreadQuery(oppd.pool,6,query));

        es.shutdown();
        try {
            es.awaitTermination(1, TimeUnit.DAYS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        System.out.println("finally completed...");
    }
} 
```

# javascript - 为什么 getComputedTextLength() 在 Chrome 和 Firefox 中给出不同的结果？

> ID：10530509
> 
> 赞同：6
> 
> 时间：2012-05-10T08:49:11.530
> 
> 标签：javascript, svg

我在 SVG 文本元素上使用 getComputedTextLength() 来换行文本行。但是，我在 Firefox 和 Chrome 中得到不同的结果。这是一个使用 Chromium 18.0 和 Firefox 12.0 给出不同结果的示例：http: [//jsfiddle.net/cBSp4/2/](http://jsfiddle.net/cBSp4/2/)

为什么结果不同，更重要的是，它是否可以修复？

（来自 getBBox() 的值似乎没问题，所以我现在使用它作为解决方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T10:45:21.820

[当大型 SVG 文本重写上线](http://mcc.id.au/blog/2013/07/firefox-svg-text-improvements)时，应该在 Firefox 25 中修复。

# javascript - Javascript - 为什么调用函数在 closour 中定义？

> ID：10530514
> 
> 赞同：0
> 
> 时间：2012-05-10T08:49:27.520
> 
> 标签：javascript, global-object

我见过许多 js 框架（包括 jquery）在其主要功能范围内使用闭包。例如，

```
var obj = (function(){
    return {
        test : function(){
            alert('test');
        }
    }
})();
obj.test() 
```

jquery 源， [http://code.jquery.com/jquery-1.7.2.js](http://code.jquery.com/jquery-1.7.2.js)

围绕“功能”需要额外的“封闭”吗？或者如果我们像这样使用它有什么区别，

```
var obj = function(){
    return {
        test : function(){
            alert('test');
        }
    }
}();
obj.test() 
```

两者都具有相同的行为，并且函数定义本身将所有局部变量放在一个新的范围内……那么为什么要额外的闭包呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:51:35.130

它添加了“大”对象\库函数，而不是将它们添加到全局对象中。

您粘贴的两个选项就像以下之间的区别：

```
var foo = (2);
var foo = 2; 
```

*没有不同...*

* * *

**更新：**

现在我了解您的问题，**括号**不会在 javascript 中创建新范围，只会创建函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:10:53.437

这只是一种能够轻松区分自执行函数和普通函数的约定。

# html - 为什么有些 HTML 文档可以显示写得很清楚的特殊字符（例如 ä）而不需要代码（例如 ä）

> ID：10530516
> 
> 赞同：1
> 
> 时间：2012-05-10T08:49:32.680
> 
> 标签：html, chars

我正在制作一个包含德语和法语内容的小网站。一些文档正确显示文本，即使所有变音符号都写为 äöü 而不是代码。其他文档需要代码，但我找不到文档之间的区别。

当试图用谷歌搜索答案时，我只能找到大量的代码参考，但没有解释为什么有些文档不需要它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:52:30.963

任何 HTML 文档（或任何文本文档）都被*编码*为某种编码——这是字符和代表它们的值之间的映射。不同的编码意味着不同的字符。

许多页面使用 UTF-8 一种 Unicode 编码，它们在 HTTP 标头或页面本身的 Meta 标签（Content-Type）中声明 - 这样的页面可以直接使用大多数字符。

您应该阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:53:18.033

1) html-code (meta) 中的字符集声明 2) 文档的编码。例如...如果您使用 UTF-8 并且在 ISO 8859-1 中有一个文档（例如 js 文件），那么某些浏览器会向您显示 ISO 8859-1 中的站点，这会破坏您的 äöüß， ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:10:40.690

因为，根据[HTML 规范](http://www.w3.org/TR/html4/charset.html#h-5.2 "W3C")：

> 创作工具（例如，文本编辑器）可以用他们选择的字符编码对 HTML 文档进行编码

一些文档使用可以直接表示字符的编码（例如*iso-8859-1*或*Windows-1252*或*utf-8*`ä` ） ；其他人使用无法使用的编码（例如*us-ascii*），因此需要使用字符实体引用`&auml;`。

# android - 覆盖菜单键长按并长按启动应用程序

> ID：10530517
> 
> 赞同：0
> 
> 时间：2012-05-10T08:49:36.490
> 
> 标签：android, android-menu, long-press

我想做这样的事情-

1.覆盖菜单键长按的默认动作（即启动软键盘）。

2.每当用户长按菜单键时，我的应用程序就会启动。

3.此外，我的应用程序可能不需要在前台，即即使有人从任何其他应用程序长按菜单键，我的应用程序也应该启动。

这是可能吗？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:50:56.960

> 这是可能吗？如何？

通过制作您自己的固件，您可以在其中将此功能添加到操作系统，并通过在您自己的个人手机（以及您可以说服运行它的任何其他人的手机）上部署您的自定义固件。

这对于常规的 Android SDK 应用程序是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T01:12:16.740

是的，你可以，只需 root 你的设备（例如使用 Cyanogenmod）并转到设置、Cyanogenmod 设置和输入设置。你会在那里找到选项。可以在此处找到 G2x 的生根说明：http: [//forum.xda-developers.com/showthread.php? t=1039985](http://forum.xda-developers.com/showthread.php?t=1039985)

# jquery - 如何在延迟加载期间在图像占位符顶部显示“正在加载”的 gif 图像

> ID：10530520
> 
> 赞同：2
> 
> 时间：2012-05-10T08:49:42.713
> 
> 标签：jquery, jquery-plugins, jquery-events

我正在使用这个 jQuery 插件来延迟加载我的图像。[懒加载器](http://www.appelsiini.net/projects/lazyload)

它工作正常。我只想在所有尚未加载的图像之上显示一个“加载”图像（可能是 gif），当图像加载时它会消失。

任何想法如何做到这一点。

**仅供参考：**我使用 1x1 gif 图像作为占位符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:42:43.360

我`demo project`满足您的要求，这对我来说很好，请为此使用以下代码。

在头部：

```
<script src="jquery.min.js" type="text/javascript"></script>
    <script src="jquery.lazyload.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $(function () {
                $("img.lazy").lazyload({
                    event: "sporty"
                });
            });
            $(window).bind("load", function () {
                var timeout = setTimeout(function () { $("img.lazy").trigger("sporty") }, 5000);
            }); 
        });
    </script>
    <style type="text/css">
        #container
        {
            height: 600px;
            overflow: scroll;
        }
    </style> 
```

身体 ：

```
<div id="container">
        <img class="lazy" width="765" height="574" src="loadingcirclests16.gif" data-original="bmw_m1_hood.jpg" /><br />
        <img class="lazy" width="765" height="574" src="loadingcirclests16.gif" data-original="bmw_m1_side.jpg" /><br />
        <img class="lazy" width="765" height="574" src="loadingcirclests16.gif" data-original="viper_1.jpg" /><br />
        <img class="lazy" width="765" height="574" src="loadingcirclests16.gif" data-original="viper_corner.jpg" /><br />
    </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T13:52:22.540

我在**Wordpress**主题中使用了**Lazy Load 。**并为动画加载器尝试了以下解决方案。

 **1.  作为图像占位符，我使用了一个带有透明背景的小型 64x64 gif。
    [图片](https://i.imgur.com/yDqBi9N.gif)

2.  我为图像设置了 CSS 样式，使其具有彩色背景和加载器 GIF 作为背景图像。

    ```
    .lazyload{
        background-color:#555;
        background-image:url(loader.gif);
        background-repeat:no-repeat;
        background-position:center;
    } 
    ```

    [图片](https://i.imgur.com/0LXPeq0.gif)

3.  运行脚本

    ```
    $("img.lazyload").lazyload({
        effect : "fadeIn"
    }); 
    ```

    或更新版本的插件：

    ```
    lazyload(); 
    ```

它应该用 scr 属性替换彩色背景和加载器图像。并且`background`样式不会对图像产生影响。

[代码笔](https://codepen.io/mortalis/pen/JMEbjy)。**

# mysql - 合并单个表中的行显示重复的结果

> ID：10530522
> 
> 赞同：1
> 
> 时间：2012-05-10T08:49:49.983
> 
> 标签：mysql

我正在开发一个简单的 PHP 和 MySQL 项目，它具有签入和签出功能。

我在合并单个表中的行时遇到了一点问题。以下是您可以在不合并行的情况下看到的原始数据。

> ```
> mysql> SELECT * FROM clock;
> +--------+---------+---------------------+----------+
> | log_id | user_id | xtimestamp           | text     |
> +--------+---------+---------------------+----------+
> |      1 | 1000     | 2012-05-10 07:47:06 | CHECKIN  |
> |      2 | 1003     | 2012-05-10 07:47:23 | CHECKIN  |
> |      3 | 1002     | 2012-05-10 07:47:36 | CHECKIN  |
> |      4 | 1002     | 2012-05-10 07:47:49 | CHECKOUT |
> |      5 | 1003     | 2012-05-10 07:48:11 | CHECKOUT |
> |      6 | 1000     | 2012-05-10 07:48:23 | CHECKOUT |
> |      7 | 1000     | 2012-05-10 07:48:52 | CHECKIN  |
> +--------+---------+---------------------+----------+ 
> ```

这是我的 SQL 查询，用于合并单个表上的行以具有签入和签出视图。

```
SELECT a.log_id as 'ID'
 , a.user_id as 'User_ID'
 , a.xtimestamp as 'CHECKIN'
 , b.xtimestamp as 'CHECKOUT' 
FROM clock a, clock b 
WHERE a.info = 'CHECKIN' 
AND b.info = 'CHECKOUT' 
AND a.user_id = b.user_id 
GROUP BY a.log_id; 
```

这是查询的结果。

```
+----+---------+---------------------+---------------------+
| ID | User_ID | CHECKIN             | CHECKOUT            |
+----+---------+---------------------+---------------------+
|  1 | 1000    | 2012-05-10 07:47:06 | 2012-05-10 07:48:23 |
|  2 | 1003    | 2012-05-10 07:47:23 | 2012-05-10 07:48:11 |
|  3 | 1002    | 2012-05-10 07:47:36 | 2012-05-10 07:47:49 |
|  7 | 1000    | 2012-05-10 07:48:52 | 2012-05-10 07:48:23 |
+----+---------+---------------------+---------------------+ 
```

正如您在上面的结果中看到的，有 4 条记录返回，但应该是 3 条，因为在 ID 7 和 user_id 1000 上还没有 CHECKOUT 记录，id 1 和 id 7 具有相同的 CHECKOUT 日期。

我想要实现的是这样的

```
+----+---------+---------------------+---------------------+
| ID | User_ID | CHECKIN             | CHECKOUT            |
+----+---------+---------------------+---------------------+
|  1 | 1000    | 2012-05-10 07:47:06 | 2012-05-10 07:48:23 |
|  2 | 1003    | 2012-05-10 07:47:23 | 2012-05-10 07:48:11 |
|  3 | 1002    | 2012-05-10 07:47:36 | 2012-05-10 07:47:49 |
|  7 | 1000    | 2012-05-10 07:48:52 | null                |
+----+---------+---------------------+---------------------+ 
```

或者像这样

```
+----+---------+---------------------+---------------------+
| ID | User_ID | CHECKIN             | CHECKOUT            |
+----+---------+---------------------+---------------------+
|  1 | 1000    | 2012-05-10 07:47:06 | 2012-05-10 07:48:23 |
|  2 | 1003    | 2012-05-10 07:47:23 | 2012-05-10 07:48:11 |
|  3 | 1002    | 2012-05-10 07:47:36 | 2012-05-10 07:47:49 |
+----+---------+---------------------+---------------------+ 
```

如果有人有一个好主意，请分享..非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:55:48.200

也许是这样的：

```
SELECT
    MIN(CASE WHEN info='CHECKIN'  THEN xtimestamp ELSE NULL END) AS CHECKIN,
    MAX(CASE WHEN info='CHECKOUT'  THEN xtimestamp ELSE NULL END) AS CHECKOUT,
    MAX(log_id) AS ID,
    User_ID
FROM
    clock
GROUP BY
    User_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:01:12.537

```
SELECT   check_in.log_id           AS `CHECKIN ID`
  ,      check_in.user_id          AS `User_ID`
  ,      check_in.xtimestamp       AS `CHECKIN`
  ,      MIN(check_out.xtimestamp) AS `CHECKOUT` 
FROM     clock                     AS `check_in`
  JOIN   clock                     AS `check_out`
      ON (
           check_out.info = 'CHECKOUT'
       AND  check_in.info = 'CHECKIN'
       AND  check_in.user_id     = check_out.user_id
       AND  check_in.xtimestamp <= check_out.xtimestamp
      )
GROUP BY check_in.log_id, check_in.user_id, check_in.xtimestamp; 
```

# erlang - erlang 中的 inet_addr 功能

> ID：10530531
> 
> 赞同：0
> 
> 时间：2012-05-10T08:50:42.197
> 
> 标签：erlang, erlang-ports

正如问题所说，是否有任何功能或模块可以执行`inet_addr`？

谷歌的结果没有建议任何直接的方式，或者我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:05:55.233

您可以使用 inet_parse:address，然后将结果列表转换为二进制。例如

```
16> list_to_binary(tuple_to_list(element(2,inet_parse:address("192.168.42.2")))). 
```

<<192,168,42,2>>

# javascript - 正则表达式用分组引号分割空格

> ID：10530532
> 
> 赞同：2
> 
> 时间：2012-05-10T08:50:43.753
> 
> 标签：javascript, regex

我曾尝试在 JS 中拆分字符串，例如..

```
'a b c' => ['a','b','c']
'a bb cc dd' => ['a','bb','cc','dd]
'a "bb cc" dd' => ['a','bb cc', 'dd']
"a 'bb cc' dd" => ['a','bb cc', 'dd'] 
```

我如何在 JS 正则表达式中做到这一点？我试过了

```
/\w+|"(?:\\"|[^"])+"/g 
```

但它返回...

```
'a b c' => ['a','b','c']
'a bb cc dd' => ['a','bb','cc','dd]
'a "bb cc" dd' => ['a','"bb cc"', 'dd']
"a 'bb cc' dd" => ['a','bb','cc', 'dd'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:19:37.363

假设你有一个字符串：

```
var s = "a b c 'd e f' g \"h i j\" k"; 
```

您可以使用以下方法轻松匹配令牌：

```
/"[^"]*"|'[^']*'|\S+/g 
```

那个模式：

*   匹配用双引号括起来的字符串，或者...
*   匹配用单引号括起来的字符串，或者...
*   匹配非空格。

但是，结果标记将用引号括起来。
以下是删除这些引号的方法示例：

```
var words = [];
s.replace(/"([^"]*)"|'([^']*)'|(\S+)/g,
         function(g0,g1,g2,g3){
              words.push(g1 || g2 || g3 || '');
         }); 
```

这有一些技巧，但想法是我们选择不为空的组（这是一个错误的值是 JavaScript）。您可以使用 实现相同的目标`exec`，但我认为代码更混乱。

工作示例： http: [//jsfiddle.net/snS62/](http://jsfiddle.net/snS62/)（警告 - 警报）

要还允许转义字符，您可以使用：

```
/"([^\\"]*(?:\\.[^\\"]*)*)"|'([^\\']*(?:\\.[^\\']*)*)'|(\S+)/g 
```

# mysql - 无法让 isql 连接到 odbc

> ID：10530533
> 
> 赞同：0
> 
> 时间：2012-05-10T08:50:44.350
> 
> 标签：mysql, odbc

它与pyodbc一起工作正常：

```
pyodbc.connect('DRIVER={MySQL ODBC 3.51 Driver};SERVER=db-server;DATABASE=web;UID=tool;PWD=loot') 
```

但我无法让 isql 连接：

```
$ isql -v db-server tool loot
[IM002][unixODBC][Driver Manager]Data source name not found, and no default driver specified
[ISQL]ERROR: Could not SQLConnect

$ cat /etc/odbcinst.ini
[MySQL ODBC 3.51 Driver]
DRIVER=/usr/lib64/libmyodbc3.so
UsageCount=1 
```

如何告诉 isql 使用正确的驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:37:14.347

isql 的第一个参数需要是存在于 /etc/odbc.ini 中的数据源名称。当您通过 pyodbc 连接时，您没有使用 DSN，而是使用了无 DSN 连接。在 /etc/odbc.ini 中创建一个名为 db-server 的 DSN，使用 driver=MySQL ODBC 3.51 驱动程序以及 mysql ODBC 驱动程序需要连接的任何其他属性，然后重新运行 isql。

# video - ffmpeg：如何在视频末尾添加帧或黑色？

> ID：10530538
> 
> 赞同：2
> 
> 时间：2012-05-10T08:51:08.453
> 
> 标签：video, ffmpeg, frames

如何在任何视频的末尾复制任意数量的最后一帧副本？或者，如何在任何视频的末尾添加黑框？这可以通过脚本和ffmpeg来完成吗？当然，任何其他工具都可以，只要该操作是可编写脚本的。

困难在于应该支持所有视频格式，或者至少支持尽可能广泛的视频格式。该脚本应采用任何视频格式，而无需手动更改每个视频的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:01:36.380

看看 FFMpeg 文档进行连接，看看你能想出什么。

> [如何加入视频文件？](http://ffmpeg.org/faq.html#How-can-I-join-video-files_003f)

如果是我，我会研究一些可以按照以下方式做的事情：

1.  使用您尝试添加到末尾的黑色帧的预制视频（与您要添加的视频在同一文件夹中）并检查视频是否具有相同的格式。我会让这个预制视频成为一种常用的默认格式，并且可以连接（MPEG）。

2.  如果视频具有不同的格式，请找出您要添加的视频的格式，并使用 ffmpeg 将其编码为与黑色视频相同的格式。您还可以检查要添加的视频是否采用适当的格式进行连接，然后只需将黑色视频更改为该格式以提高速度（也可以只拥有一堆允许的所有格式的预制黑色视频连接）。

3.  两个视频格式相同后，将它们连接起来。如果您希望它们采用不同的格式，请再次使用 ffmpeg 将它们编码为您的选择。请注意，根据 ffmpeg 文档，应将 -same_quant 选项或高比特率设置传递到 ffmpeg 以在所有转换中保持高质量。

如果你可以让它工作，这里唯一的缺点是你必须单独制作你正在添加的帧的视频，而不是动态或通过命令。

# javascript - 将鼠标悬停在图像区域上以更改图像 src

> ID：10530542
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:51:23.540
> 
> 标签：javascript, html, css, image

基本上，我有一个（文本）图像，我想在不同区域的翻转时将其更改为其他四个图像之一。不同之处在于，在滚降时，我希望它保持原来的状态，除非我的鼠标进入不同的区域。我已经尝试过图像映射和诸如此类的东西，但我似乎无法做到这一点。就我的整体编码知识而言......好吧，我上周开始了，但我已经到了那里。

[这是我（某种）意思的图像概述的链接。](http://i.imgur.com/HnD2v.jpg)

我知道它可能已经在某个地方得到了回答，但我真的还没有找到任何有效的东西——我所管理的只是完全消失或不适用于多张图像的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:53:30.200

你可以使用图像映射

[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)

这是一个很棒的工具，试试吧。这并不难:)

# django - 如何使用 TastyPie PATCH 更新密码

> ID：10530547
> 
> 赞同：2
> 
> 时间：2012-05-10T08:51:44.970
> 
> 标签：django, tastypie

我了解 TastyPie 的基础知识，但自定义 ModelResource 方法让我很困惑。我正在尝试进行 PATCH api 调用以更新用户的密码，并且数据未通过该`set_password()`方法运行，因此使用原始值而不是数据库中的 HASH 进行更新。这是我的模型资源：

```
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['is_active', 'is_staff', 'is_superuser']
        authorization = Authorization() 
        detail_allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
        filtering = {
             'username': ALL,
        }
        authentication = ApiKeyAuthentication() 
```

我假设我需要在`obj_update`这里使用该方法，但不确定如何格式化它以`set_password`在用户表中更新实际对象之前通过该方法运行密码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:03:50.913

您应该使用 hydrate 方法来处理这个 raw_password 到所有情况（POST、PUT、PATCH）的哈希转换。我个人定义了一个虚拟字段`raw_password`，以免引起命名空间冲突，因为 Tastypie 允许您返回从 GET 请求中收到的 POST/PUT/PATCH 对象（除了是一个好习惯）：

```
def hydrate(self, bundle):
    if bundle.data.has_key('raw_password'):
        u = User(username='dummy')
        u.set_password(bundle.data['raw_password'])
        bundle.data['password'] = u.password
    return bundle 
```

# iphone - 使用 xml 加载特定的缩略图？

> ID：10530548
> 
> 赞同：0
> 
> 时间：2012-05-10T08:51:52.230
> 
> 标签：iphone, ios, xml, xml-parsing, youtube-api

我已设法从 youtube 加载缩略图，但如何选择每个视频存在的六个缩略图之一？

```
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/default.jpg' height='90' width='120' time='00:02:42' yt:name='default'/>
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/mqdefault.jpg' height='180' width='320' yt:name='mqdefault'/>
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/hqdefault.jpg' height='360' width='480' yt:name='hqdefault'/>
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/1.jpg' height='90' width='120' time='00:01:21' yt:name='start'/>
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/2.jpg' height='90' width='120' time='00:02:42' yt:name='middle'/>
<media:thumbnail url='http://i.ytimg.com/vi/dTI0KDuQl_4/3.jpg' height='90' width='120' time='00:04:03' yt:name='end'/> 
```

例如，我想要第三个（hqdefault）。

我使用 mwfeedparser 尝试了以下操作：

```
else if ([currentPath isEqualToString:@"/feed/entry/media:group/media:thumbnail"]) {
                    NSArray *urlArray = [currentElementAttributes objectForKey:@"url"];                   
                    item.thumbnail = urlArray;  
                    processed = YES;
                } 
```

在我的视图控制器中，我输入了：

```
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[item.thumbnail objectAtIndex:3] URLString]]];
    cell.videoThumbnail.image = [UIImage imageWithData:data]; 
```

但它一直在崩溃：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:14:59.533

我想如果您尝试使用异步图像，这对于在后台下载图像很有用.....下面的链接可能会给您一些想法，以便从背景中一张一张下载您的图像....

[http://www.geekygoodness.com/2009/09/13/a-simple-cocoa-asynchronous-image-loader-class-to-use-in-your-iphone-app/](http://www.geekygoodness.com/2009/09/13/a-simple-cocoa-asynchronous-image-loader-class-to-use-in-your-iphone-app/)

希望，这对你有帮助

# internet-explorer - 如何处理 IE 上的基本身份验证

> ID：10530553
> 
> 赞同：0
> 
> 时间：2012-05-10T08:52:01.060
> 
> 标签：internet-explorer, authentication, selenium

我在处理 IE9（平台 =WINDOWS 7）上的基本身份验证时遇到问题。有人可以帮我解决这个问题。

我已按照本博客中提到的步骤进行操作。

[http://aleetesting.blogspot.in/2011/10/selenium-webdriver-tips.html](http://aleetesting.blogspot.in/2011/10/selenium-webdriver-tips.html)

有人可以帮我解决这个问题。

谢谢拉古拉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T07:21:59.210

我也遇到了这个问题，所以以防万一其他人需要它：

请参阅这篇 Microsoft 文章： http: [//support.microsoft.com/kb/834489/EN-US](http://support.microsoft.com/kb/834489/EN-US) 向下滚动到“帮我修复它”部分，下载并运行提供的文件。

我还尝试按照他们的描述手动编辑注册表，这在 Windows 7 / IE9 上是不够的。运行“为我修复它”使其工作。

# javascript - 为什么 HTML SCRIPT 标签不受同源策略的约束

> ID：10530554
> 
> 赞同：31
> 
> 时间：2012-05-10T08:52:01.357
> 
> 标签：javascript, cross-domain, standards

我问这个问题是因为我们将开发一个应该通过 javascript 共享跨源数据的应用程序。一种可能的解决方案似乎是 JSONP，因为它使用 SCRIPT 标签从其他域中提取数据。但是，我想避免我们在假设 SCRIPT 标签不受 sop 约束并且在某些时候浏览器禁止此功能的情况下实现我们很棒的代码的情况。

任何人都可以阐明 SCRIPT 标签允许跨域请求的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T09:01:11.147

我想[这份](https://datatracker.ietf.org/doc/html/draft-abarth-principles-of-origin-00)题为“同源政策原则”的草案解释了（尽管很简短）每个人的想法：

> 原则上，用户代理可以将每个 URL 视为一个单独的主体，并将每个文档与每个其他 URL 隔离，除非文档明确表明它信任该 URL。不幸的是，这种设计对开发人员来说很麻烦，因为 Web 应用程序通常由许多协同作用的资源组成。
> 
> 作为近似，用户代理将 URL 组合到称为源的保护域中。特别是，如果两个 URL 具有相同的方案、主机和端口，则它们属于同一来源（即，代表相同的主体）。

简而言之：如果一切都受制于 SOP，那么构建 Web 将会更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:35:49.547

原因是因为遗产。它是多年前建立的，如果现在改变，太多的网站将会失败。加上安全隐患是众所周知的，因为它已经存在了很长时间。

# ios - 照片 Flash 动画，如 iPad 中的 Photo Booth Mac 应用程序

> ID：10530555
> 
> 赞同：1
> 
> 时间：2012-05-10T08:52:03.243
> 
> 标签：ios, ipad, animation

我需要在 iOS 的 Photo Booth Mac 应用程序中显示 Photo Flash Animation。

那怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:31:46.780

Photo Booth for Mac 中的“闪光灯”只是一个白色表面，不是吗。为了复制它，我会：

1.  创建一个覆盖整个屏幕的透明窗口（如果有多个屏幕，则创建多个窗口）。

2.  `CALayer`在窗口内放置一个。然后动画图层的背景颜色从透明变为白色并返回。

3.  从屏幕上移除窗口。

# python - 如何仅在绘图顶部删除空间 - matplotlib

> ID：10530557
> 
> 赞同：2
> 
> 时间：2012-05-10T08:52:10.310
> 
> 标签：python, django, matplotlib

我在网上看到很多帖子和答案试图回答这个问题。
但是使用`bbox_inches = 'tight'`图例消失了。

这是我的一个数字： ![在此处输入图像描述](../Images/9fa967af035b24b7d0e5a5cc69bdd6fe.png)

由于我在图框之外有图例，因此我只想删除顶部和底部的空白区域。

任何人都知道如何删除至少顶部的空白？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T10:37:09.387

你试过使用`subplots_adjust()`吗？例如，请参阅@DaveP 对此问题的回答：[Reduce left and right margins in matplotlib plot](https://stackoverflow.com/questions/4042192/reduce-left-and-right-margins-in-matplotlib-plot)

另外，请查看@Tian Chu 对同一问题的回答。

编辑：这对我有用：

```
import matplotlib.pyplot as plt
fig=plt.figure()
ax=fig.add_subplot(111)
ax.plot([1,2,3],[5,6,7],'gs-')
plt.subplots_adjust(top=0.99, right=0.99)
plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:50:22.383

我通常不使用该`bbox_inches = 'tight'`功能，因为正如您已经发现的那样，它不能非常可靠地工作。我宁愿制作一个带边界的 PDF，然后使用外部工具裁剪它们。为了从 python 无缝地做到这一点，我使用

```
os.system('pdfcrop %s %s &> /dev/null &'%(pdf_in, pdf_out)) 
```

这`pdf_in`是您从 matplotlib 生成的 PDF，`pdf_out`将是您的最终结果。

# c# - 使用 C# 从另一个列表中排除一个列表的项目

> ID：10530560
> 
> 赞同：0
> 
> 时间：2012-05-10T08:52:15.210
> 
> 标签：c#, winforms, list, optimization

关于如何从另一个列表中排除一个列表的项目，我有一个相当具体的问题。诸如 except() 之类的常见方法不会这样做，原因如下：

*   如果列表中的重复项具有“偶数”索引 - 我需要删除 THIS 元素和它之后的 NEXT 元素。
*   如果列表中的重复项有一个“奇数”索引 - 我需要删除这个元素和一个元素之前**它。
*   一个列表中可能会出现多次相同的重复项。即一个可能带有“奇数”索引，另一个可能是“偶数”。

我不是在寻求解决方案，因为我自己创建了一个。然而，在多次执行此方法后 - “ANTS 性能分析器”显示该方法经过了整个执行时间的 75%（40 秒中的 30 秒）。问题是：**是否有更快的方法来执行相同的操作？**我试图优化我当前的代码，但它仍然缺乏性能。这里是：

```
private void removedoubles(List<int> exclude, List<int> listcopy)
{
    for (int j = 0; j < exclude.Count(); j++)
    {
        for (int i = 0; i < listcopy.Count(); i++)
        {
            if (listcopy[i] == exclude[j])
            {
                if (i % 2 == 0) // even
                {
                    //listcopy.RemoveRange(i, i + 1);
                    listcopy.RemoveAt(i);
                    listcopy.RemoveAt(i);
                    i = i - 1;
                }
                else //odd
                {
                    //listcopy.RemoveRange(i - 1, i);
                    listcopy.RemoveAt(i - 1);
                    listcopy.RemoveAt(i - 1);
                    i = i - 2;
                }
            }
        }
    }
} 
```

在哪里：

*   exclude - 仅包含重复项的列表。此列表最多可能包含 30 个元素。
*   listcopy - 应检查重复的列表。如果发现“排除”中的重复项 -> 执行删除操作。此列表最多可能包含 2000 个元素。

我认为 LINQ 可能会有所帮助，但我不太了解它的语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:02:17.340

更快的方法 ( `O(n)`) 是执行以下操作：

1.  遍历`exclude`列表并将其变为`HashSet`( `O(n)`)
2.  在检查中，检查被测试的元素是否在集合中（再次`O(n)`），因为测试是否存在于 a`HashSet`中`O(1)`。

也许你甚至可以改变你的算法，让`exclude`集合`HashSet`从一开始就是一个，这样你就可以省略第 1 步并获得更快的速度。

（你目前的方式是`O(n^2)`。）

* * *

编辑：
另一个想法如下：您可能正在创建某个列表的副本并让此方法修改它？（根据参数名称猜测。）然后，您可以将其更改为：将*原始*数组传递给方法，并让方法分配新数组并返回它（您的方法签名应该比类似的东西`private List<int> getWithoutDoubles(HashSet<int> exclude, List<int> original)`）。

* * *

编辑：
如果您按以下方式重新组织输入数据可能会更快：由于项目总是成对删除（偶数索引+以下奇数索引），您应该提前将它们配对！这样你的列表 if ints 就变成了成对的 int 列表。这样你的方法可能是这样的：

```
private List<Tuple<int, int>> getWithoutDoubles(
              HashSet<int> exclude, List<Tuple<int, int>> original)
{
    return original.Where(xy => (!exclude.Contains(xy.Item1) &&
                                 !exclude.Contains(xy.Item2)))
           .ToList();
} 
```

（您删除第一个或第二个项目在排除集合中的对）。而不是`Tuple`，也许您可​​以将项目打包到您的自定义类型中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T21:37:50.933

这是获得结果的另一种方法。

```
var a = new List<int> {1, 2, 3, 4, 5};

var b = new List<int> {1, 2, 3};

var c = (from i in a let found = b.Any(j => j == i) where !found select i).ToList(); 
```

c 将包含 4,5

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T08:56:37.427

反转您的循环，使它们从 0 开始`.Count - 1`并转到 0，因此您不必`i`在其中一种情况下进行更改，并且`Count`每个集合仅评估一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T09:03:23.200

您可以将 List 转换为 LinkedList 并尝试一下吗？List.RemoveAt() 比 LinkedList.Remove() 更昂贵。

# .net - 如何在 Visual Studio Web 性能和负载测试中登录以进行调试？

> ID：10530567
> 
> 赞同：2
> 
> 时间：2012-05-10T08:52:39.903
> 
> 标签：.net, visual-studio, logging

我正在调试 Visual Studio (2010) Web 负载测试。当作为负载测试运行时，不能调试，只能作为“单一”测试。我想要 Console.WriteLine、Trace.WriteLine 或 Debug.WriteLine 之类的东西

有这样的内置功能还是我必须设置 log4net/nlog/whatever？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:20:32.943

`Trace.WriteLine`应该可以工作 - 如果您以管理员身份从 Sysinternals（免费，可从 Microsoft 获得）运行 DebugView，我确实看到 Trace.WriteLine 被丢弃了。

我的示例代码：

```
using System.Diagnostics;

namespace ConsoleApplication1 {
    internal class Program {
        private static void Main ( string[] args ) {
          Trace.WriteLine ( "xxxxxxxxxxxxxxxxxxxx" );
        }
    }
} 
```

调试视图显示了这一点：

![在此处输入图像描述](../Images/6ba94f025b353282b5d21fffb2f69722.png)

它显示了更多条目，因为 Visual Dtudio、驱动程序和可能其他应用程序也可能调用底层 API。因此，您可能想要使用过滤器或突出显示。

另一个提示：DebugView 捕获一台机器的输出。

# java - 在 Struts2 中访问多键映射

> ID：10530568
> 
> 赞同：3
> 
> 时间：2012-05-10T08:52:40.093
> 
> 标签：java, collections, map, struts2, multikey

Struts2 支持多键映射吗？

如果是这样，我可以像访问它一样，

```
<s:property value="multiKeuMap[#k1][#k2][#k3]"> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:36:26.317

下面的代码片段使用两个键从多键映射中检索值。（使用 ognl 表达式）。

```
 MultiKeyMap keyMap = new MultiKeyMap();//MultiKeyMap Creation
    keyMap.put("1","2","OneTwo");//storing value
    OgnlContext context = new OgnlContext();// Ognl Context
    context.put("vap", keyMap);
    Object expression = Ognl.parseExpression("vap.get(\"1\",\"2\")");// Ognl expression //to retrive value from multikeyMap
    System.out.println(Ognl.getValue(expression, context));//Printing value. 
```

你能根据你的要求试试这个表达式吗？“multiKeuMap.get(\"k1\",\"k2\")”

在 Jsp 页面中，您可以尝试使用此表达式**“multiKeuMap.get('k1','k2')”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:37:45.513

Struts OGNL 支持 Java 集合，但不支持 MultiKeyMap。

Apache Struts 文档说它支持 Maps、Lists 和 Sets。

[http://struts.apache.org/2.0.11.2/docs/ognl.html](http://struts.apache.org/2.0.11.2/docs/ognl.html)

# formatting - 在另一个页面上显示（包括）MediaWiki 目录 (TOC)

> ID：10530569
> 
> 赞同：3
> 
> 时间：2012-05-10T08:52:49.530
> 
> 标签：formatting, wiki, mediawiki, tableofcontents

在 MediaWiki 中，我们希望在另一个页面上显示目录（来自多个页面）。我们知道这可以自动完成，例如，如果我们像这样包含第 1、2 和 3 页：

```
{{:Page 1}}
{{:Page 2}}
{{:Page 3}} 
```

在第 X 页上，然后第 X 页显示第 1、2 和 3 页的组合 TOC。

但是我们想要一个在 X 页上的表格，它在一个单独的单元格中显示每个 TOC。有没有办法单独包含每个 TOC？

我尝试`<noinclude></noinclude>`在第 1、2 和 3 页上的文本周围使用标签，然后强制在外部（使用`__TOC__`）创建一个目录，但这只会在 X 页上创建一个 TOC（使用 X 页的内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:08:06.593

你不能。对于当前页面中出现的所有部分，目录是在每个页面中动态生成的。

当您包含其他页面的部分（或至少部分标题）时，它们将显示在页面 X 的 TOC 中。如果您包含`__TOC__`魔术词，则意味着仅生成页面 X 的目录。

三种解决方案：

1.  包括第 1、2 和 3 页的部分（标题）。即使包含在`<div style="display:none;">`一个非常丑陋的方式中，它们也会显示在第 X 页的目录中。
2.  手动将 TOC 表复制到页面 X。您可以通过使用浏览器查看生成的页面 1、2 和 3 的 HTML 源来查看它们的 HTML。
3.  编写一个允许从其他页面嵌入 TOC 的扩展。它可能会引入一个新的解析器函数`{{toc:<pagename>}}`，并能够在另一个页面的上下文中调用 toc 生成函数。
4.  仅包括部分标题作为列表。在第 1、2 和 3 页中，您需要写

    ```
    == <onlyinclude><includeonly>##</includeonly> Heading Number One </onlyinclude> ==
    === <onlyinclude><includeonly>###</includeonly> Part One of Heading Number One </onlyinclude> ===
    ... 
    ```

    您可以将其包含在第 X 页的表格中

    ```
    {{:Page 1}} 
    ```

    它应该显示为一个编号列表，如 TOC。

# c# - 使用 sql db 表连接数据集

> ID：10530573
> 
> 赞同：0
> 
> 时间：2012-05-10T08:52:57.933
> 
> 标签：c#, sql, sql-server, c#-4.0, ado.net

我需要执行如下所示的查询，其中包含一个数据集。

```
UPDATE <OrderDataset> 
SET FKProduct = P.PKProduct 
FROM <OrderDataset> DS 
INNER JOIN tblCustomer C ON DS.FKCustomer = C.PKCustomer 
INNER JOIN tblProduct P ON C.PKCustomer = P.FKCustomer 
INNER JOIN tblStock S ON S.FKProduct = P.PKProduct 
AND DS.RotationNumber = S.RotationNumber 
AND ISNULL(DS.RotationLineNo,'NULL') = ISNULL(S.RotationLineNo,'NULL') 
WHERE DS.FKProduct IS NULL 
```

有没有办法实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:56:25.563

没有直接的方法可以做到这一点。

您可以将数据集中的表作为参数传递给sql server存储过程，然后在sp中执行jon。.

[如何将数据表作为参数传递给sp](https://stackoverflow.com/questions/10295326/should-you-make-multiple-insert-calls-or-pass-xml/10295812#10295812)

# php - 如何使用 facebook 和 twitter 登录但没有 curl 扩展？

> ID：10530574
> 
> 赞同：-3
> 
> 时间：2012-05-10T08:53:01.243
> 
> 标签：php, facebook, twitter

如何使用 facebook 和 twitter 登录但没有 curl 扩展？我需要在云系统中使用 facebook 和 twitter 登录，所以我需要没有 curl 扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:02:22.360

只是没有安装 curl 还是您的 PHP 配置不允许传出连接？值得先检查一下。

您也可以使用套接字而不是 curl，它们更底层，但可以让您实现您想要的。

# bash - 意外标记“完成”附近的语法错误

> ID：10530575
> 
> 赞同：0
> 
> 时间：2012-05-10T08:53:05.583
> 
> 标签：bash, shell

我运行我的 shell 脚本但返回一个错误“意外标记‘完成’附近的语法错误”，我想知道为什么会这样？重要的是我可以在另一台计算机上运行它...

请参阅下面的代码：

```
input=$1
folder=$2
output=$3
while read line
do
  url=`echo $line | awk -F'\t' '{print $2}'`
  id=`echo $line | awk -F'\t' '{print $2}' | sed 's/http:\/\/buy.yahoo.com.tw\/gdsale\/gdsale.asp?gdid=//g'`
  ans=`echo $line | awk -F'\t' '{print $3}'`
  flag=`grep "$ans" $folder/$id".spec"`
  if [ -n "$flag" ]; then
      echo "yes   $line" >> $3
  else
      echo "no    $line" >> $3
  fi
done < $input 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:10:12.173

如果它在一台机器上运行而不在另一台机器上运行，则不同机器上的脚本文件存在差异。也许你在一台机器上有不同的行尾——用`dos2unix`

# language-design - 为什么在许多编程语言中，循环语句中的“继续”不被称为“下一步”

> ID：10530583
> 
> 赞同：1
> 
> 时间：2012-05-10T08:53:40.030
> 
> 标签：language-design

为什么在许多编程语言中，循环语句中的“继续”不被称为“下一个”，而是被称为“继续”

“继续”完全没有意义，与它的实际功能不符。事实上，它中断了当前的循环迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-23T14:01:01.833

我想答案是`continue`来自 C（甚至是它的前辈）。许多语言属于 C 家族或至少受 C 的影响。

至于它没有意义，我从来没有遇到过任何麻烦。在遇到 C 之前，我没有使用过一种编程语言`next`（所以你的里程可能会有所不同）。如我所见，`continue`继续循环（并`break`停止循环）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-23T14:16:37.227

我同意几篇“继续”从 C 继承的帖子。K&R 正在创建一种现代编程语言，同时保持汇编语言的大部分效率和灵活性。我认为从汇编语言的角度来看，“继续”比“下一步”更有意义。（注意：自从我看到任何汇编语言代码以来已经有几十年了。）

# automation - 将变量字符串移动到顶部的自动方法

> ID：10530585
> 
> 赞同：0
> 
> 时间：2012-05-10T08:53:42.710
> 
> 标签：automation

我有数千个 HTML 文件，每个文件都有一个以相同字符开头但结尾不同的字符串。我想要一种自动化方法将每个文件的字符串移动到顶行。这是问题的布局：

```
001.html source:
lksjds
65:99430
lksdmls

002.html source:
kjsndsk
65:09i

003.html source:
knknknkn
sderokfeokfr
65:3498u
lksdmlsre 
```

现在，我希望它们看起来像这样 [使用正则表达式查找 65:*，然后将其移至顶部]：

```
001.html source:
65:99430
lksjds
lksdmls

002.html source:
65:09i
kjsndsk

003.html source:
65:3498u
knknknkn
sderokfeokfr
lksdmlsre 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:10:36.570

这是`grep`在 Unix 上的 bash shell 中使用文件 003.html 的解决方案：

```
 FILE="003.html"
   PATTERN="^65:.*"
   TEMP_FILE="${RANDOM}"

   grep --color=never "${PATTERN}" "${FILE}" > "${TEMP_FILE}"
   grep -v "${PATTERN}" "${FILE}" >> "$TEMP_FILE"
   mv "${TEMP_FILE}" "${FILE}" 
```

这可以是单行的，并放置`for`在每个 Html 文件上迭代的循环中，如下所示：

```
 for FILE in $(ls *.html); do PATTERN="^65:.*"; TEMP_FILE="${RANDOM}"; grep --color=never "${PATTERN}" "${FILE}" > "${TEMP_FILE}" ; grep -v "${PATTERN}" "${FILE}" >> "$TEMP_FILE"; mv "${TEMP_FILE}" "${FILE}"; done 
```

# c# - 在 ASP.NET MVC 中从一个页面到另一个页面传递敏感数据的最佳方法是什么？

> ID：10530588
> 
> 赞同：4
> 
> 时间：2012-05-10T08:54:08.093
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在设计一个 Web 应用程序，它必须从一个页面到另一个页面传递敏感信息（如用户的帐号），直到用户完成（该应用程序就像一个向导），用于记录目的。存储此数据的最佳方式是什么，以便流程中的每个页面都可以访问数据？我应该将它存储在会话中吗？在数据库中，然后在最后删除它？一些我还没有想到的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:36:33.087

我个人尽量避免使用[会话](https://stackoverflow.com/questions/5220980/is-it-a-good-practice-to-avoid-using-session-state-in-asp-net-mvc-if-yes-why-a)。以下是我在处理向导类型场景时所知道的选项：

**选项1**

使用[Nadeem Afana 的博客](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)中讨论的 JQuery 。页面将一页一页地显示给用户，但直到最后一页才提交信息。

**选项 2**

每个页面上的信息都敏感吗？是否可以对其进行结构化，以便仅在最后一页上要求提供敏感信息？[如果是这样，您可以按照Darin Dimitrovs 的回答](https://stackoverflow.com/a/6403485/265247)中讨论的那样跨页面序列化数据，而不是在最后一页上提供后退按钮。或者，可以使用相同的 MVC Futures 序列化软件轻松加密序列化的数据，尽管我不确定您的信息有多敏感以及您是否想要依赖它。答案还提到了诸如*Stepy 之*类的替代方案，但我对此没有经验。

**选项 3**

如果信息很敏感，您可以在请求之间将信息写入/读取到数据库。

**选项 4**

最后，如果您不能使用上述任何方法，那么我将使用 Session 或 TempData（它是会话的包装器），但请注意使用 TempData，如果用户刷新页面，则信息将丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:59:33.723

会话对我来说听起来不错，它（几乎）自动消失。
如果您偏执，那么您可以对其进行加密或将其存储在其他地方并通过哈希找到它。那么这个“其他地方”就是你的下一个保存点 - 足够 - ？

只要确保它没有到达网络客户端。

# windows-phone-7 - wp7发送位置信息多类

> ID：10530593
> 
> 赞同：0
> 
> 时间：2012-05-10T08:54:19.167
> 
> 标签：windows-phone-7

我有多个页面应用程序，我想将信息发送到我的数据库。无论页面是什么，我都想根据我的时间段发送信息（用户的当前位置）。有没有像类或方法这样独立于项目工作的东西。我的意思是无论页面是什么，或者当前的课程是否继续工作？我不想在更改页面时调用此过程？

谢谢。对不起我的翠绿。我想不出如何搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:20:57.113

您可以从应用程序对象创建一个全局对象或使用静态单例。

# django - Django：尝试添加新应用时出错

> ID：10530595
> 
> 赞同：0
> 
> 时间：2012-05-10T08:54:30.570
> 
> 标签：django, django-apps, django-comments

我正在尝试按照此处的步骤操作：

[http://dev.svetlyak.ru/optional-email-in-django-comments-en/](http://dev.svetlyak.ru/optional-email-in-django-comments-en/)

使 Django 评论应用程序中的“电子邮件地址”字段可选。具体来说，我创建了一个名为“mycomments.py”的文件，其内容如下：

```
from django import forms
from django.contrib.comments.forms import CommentDetailsForm
from django.utils.translation import ungettext, ugettext_lazy as _

class CommentForm(CommentDetailsForm):
    email = forms.EmailField(label=_("Email address"), required=False)

def get_form():
    return CommentForm 
```

并将其放在我的 Django 项目的根文件夹中（包含 manage.py 和 settings.py 的同一文件夹）。然后，我在 settings.py 文件中添加了“mycomments”，如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.comments',
    'blogs',
    'mycomments',
)

COMMENTS_APP = 'mycomments' 
```

但是当我执行“python manage.py runserver”时，出现以下错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x8bb208c>>
Traceback (most recent call last):

File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/runserver.py", line 88, in inner_run
self.validate(display_num_errors=True)

File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 249, in validate
num_errors = get_validation_errors(s, app)

File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 35, in get_validation_errors
for (app_name, error) in get_app_errors().items():

File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 146, in get_app_errors
self._populate()

File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 61, in _populate
self.load_app(app_name, True)

File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 83, in load_app
if not module_has_submodule(app_module, 'models'):

File "/usr/local/lib/python2.7/dist-packages/django/utils/module_loading.py", line 17, in module_has_submodule
for entry in package.__path__:  # No __path__, then not a package.

AttributeError: 'module' object has no attribute '__path__' 
```

并且开发服务器没有启动。我做错什么了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:10:22.783

Django 应用程序应该（至少）是一个包含文件`__init__.py`的目录`models.py`。所以创建`mycomments`目录，放入你的代码`__init__.py`并在那里添加空`models.py`。

# c# - 将 html 代码转换为 Windows Phone 中 RichTextBox 的 xaml

> ID：10530596
> 
> 赞同：1
> 
> 时间：2012-05-10T08:54:31.103
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

如何格式化此 html 代码：

```
<p>For the iPhone do the following:
<ul>
<li>Go to AppStore</li>
<li>Search by M&#229lApp</li>
<li>Download</li></ul>
</p><p>
Android To do this:
<ul>
<li>Go to the Market</li>
<li>Search by M&#229lApp</li>
<li>Download</li>
</ul>
</p> 
```

进入 Windows Phone 中 RichTextBox 的 XAML？

**更新**

所以结果应该是：

对于 iPhone，请执行以下操作：

*   前往应用商店
*   按 MålApp 搜索
*   下载

要做到这一点：

*   赶集
*   按 MålApp 搜索
*   下载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:42:53.050

在您的代码中，您可以将 <li> 标记替换为 •

见[http://www.fileformat.info/info/unicode/char/2022/index.htm](http://www.fileformat.info/info/unicode/char/2022/index.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T12:19:00.700

基本方法是验证 html 是否有效，然后将内容转换为 XAML 等效项。

网上有[很多这样的例子](https://www.google.com/search?hl=en&q=convert%20xaml%20to%20html)

在服务器上进行这样的转换并将格式化的版本拉到手机上然后使用[XamlReader.Load](http://msdn.microsoft.com/en-us/library/cc190359%28v=vs.95%29)显示的性能要高得多。

**更新**
对于 HTML 中的每个元素，您只需将一个新的 TextBlock 添加到容器（可能是 a `StackPanel`）中，并且对于`<li>`您只想用符号作为前缀的项目来表示项目符号并适当地调整左边距。您可能会受益于定义适当的样式，然后为要转换的元素应用适当的样式。

# c# - System.Runtime.Caching.MemoryCache 列出缓存实例

> ID：10530599
> 
> 赞同：0
> 
> 时间：2012-05-10T08:54:45.203
> 
> 标签：c#, .net

我在.net 4 中使用带有多个命名缓存实例的内存缓存。我想知道有没有办法列出当前内存中的所有缓存实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:19:25.560

如果没有对它们的引用，就无法获取当前在内存中的缓存实例。

因此，解决方案是自己列一个清单，并以这种方式进行跟踪。

```
List<System.Runtime.Caching.MemoryCache> cacheInstances = new List<System.Runtime.Caching.MemoryCache>(); 
```

然后在创建新对象时添加到该列表`MemoryCache`（并在销毁时删除）。

MemoryCache 并不是什么神奇的东西，您可以将其视为对使用的改进：

```
Dictionary<String, Object> myCache 
```

或`hashtable`改为。

MemoryCache 的好处是您可以获得对象到期 (TTL)，当缓存接近某些存储限制（访问优先级队列）时，您可以更好地控制删除最近使用较少的项目。

因此，如果您想知道内存中当前有哪些 MemoryCache 实例，那么您需要引用它们，我很确定您无法访问不同进程的内存缓存，因此只会存在您创建的 MemoryCaches。

# asp.net - 限制对 Asp.Net 应用程序的并发访问

> ID：10530603
> 
> 赞同：1
> 
> 时间：2012-05-10T08:54:59.667
> 
> 标签：asp.net, sql, sql-server

我想限制对 Internet 或 Intranet Web 应用程序的并发访问。

我希望能够允许一定数量的并发访问，假设我想使用相同的用户名允许最多 20 个并发访问。

我可以想象在登录时创建一个会话并将其保存到数据库中并增加一个计数器，但是如果用户注销，则无法从数据库中删除它并减少计数器，因为用户可能只是关闭浏览器。

伙计们，您认为最好的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:12:22.873

您是对的，您无法知道用户是否只是杀死了他的浏览器或拉了绳子。

创建一个每 30 秒执行一次 Ajax 调用的计时器并记录它。如果用户在 60 秒内没有出现在此日志中 - 将他们扔到服务器上。
这不会阻止某人在夜间打开浏览器并占用一个插槽。

还有[另一个答案](https://stackoverflow.com/a/10530930/521554)提到了“最后一个活动”字段。另一方面，当有人需要让他们的浏览器保持打开状态以查看超过几分钟超时限制的内容时，这会造成混乱。

如果有人由于用户/超时限制而被淘汰；我认为如果有一个插槽再次打开，让他们以完全透明的方式再次自动登录会很好。

不用想太多，我相信这个解决方案会产生其他问题。

编辑掉：
正如我评论的那样——20 个用户——你真的解决了正确的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:16:28.020

您可能希望在会话中有一个“lastactive”字段。当有人尝试登录或以其他方式创建会话时，您可以查询在一段时间内（例如 15 分钟）内活跃的所有会话，并使用结果计数来告诉您有多少并发会话处于活跃状态。

# html - 使用“#”（主题标签）发推文

> ID：10530606
> 
> 赞同：1
> 
> 时间：2012-05-10T08:55:11.510
> 
> 标签：html, url, twitter, tweets

我尝试用“#”在 Twitter 上发布一条消息。问题是，例如，当我发推文时：

```
<a href="http://twitter.com/home?status=#some message">To Twitter</a> 
```

或者

```
<a href="http://twitter.com/home?status=&#35;some message">To Twitter</a> 
```

那么“一些消息”将不会显示 - **#**或**#**之后的所有内容都将被删除。

存在任何方式，如何附加到消息标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T08:59:04.457

使用`%23`：

```
<a href="http://twitter.com/home?status=%23some message">To Twitter</a> 
```

* * *

`&#35;`是[HTML 编码](http://jsfiddle.net/y2k26/)，`%23`是[URL 编码](http://www.albionresearch.com/misc/urlencode.php)。

# php - Drupal imagecache 第一次不工作

> ID：10530607
> 
> 赞同：0
> 
> 时间：2012-05-10T08:55:13.523
> 
> 标签：php, drupal, drupal-6, drupal-modules

我在时事通讯中为我的横幅图像使用图像缓存。我正在上传图像并将其发送到邮件。问题是图像不是第一次加载。如果我再次来编辑页面，它将发送带有正确图像的邮件

```
$output = "
<html>
   <body>";

$output.= theme( 'imagecache', 'banner_img', 'images/motel_wright-1.1.png', 'Wright Motel', 'Wright Motel' );

$output.= "
   </body>
 </html>";

 print $output; 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:03:15.337

我有过类似的问题。几点建议：

1）当您使用主题功能时，您可能需要重建注册表。尝试

[http://api.drupal.org/api/drupal/includes!theme.inc/function/drupal_theme_rebuild/7](http://api.drupal.org/api/drupal/includes!theme.inc/function/drupal_theme_rebuild/7)

2）如果上述失败，您将需要使用 xdebug 并找出首先没有触发 drupal 中的哪个函数。

请在此处发布您的发现。

# python - 在python中使用jenkinsapi触发参数化构建

> ID：10530616
> 
> 赞同：3
> 
> 时间：2012-05-10T08:55:39.763
> 
> 标签：python, jenkins

我正在使用以下代码在[jenkinsapi中创建工作](http://packages.python.org/jenkinsapi/)

```
from jenkinsapi.jenkins import *
from jenkinsapi.job import *
import os.path
import urllib2

jenkin = Jenkins('http://hudsonserver','hudson','hudson')

file0=open("data.log")
file1=open("full.log")

myJob = Job("http://hudsonserver/job/LTT_JOB/","LTT_JOB", jenkin)
parameters = {"data.log":file0,"full.log":file1,"REQUESTER_EMAIL_ID":"test@test.com"}
print myJob.get_last_buildnumber()

myJob.invoke('check',False,False,3,15,parameters) 
```

在 invoke() 调用中，我使用了令牌“检查”。由于参数的表示方式，调用似乎失败了，谁能告诉参数的以下表示是否正确？

```
parameters = {"data.log":file0,"full.log":file1,"REQUESTER_EMAIL_ID":"test@test.com"} 
```

如果有人能指出用 jenkinsapi 编写的示例，我将非常有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:25:14.913

不，这绝对是不正确的。参数 dict 将被转换为 GET 参数。并且文件对象无法转换为字符串。您可以将文件路径作为参数传递并在 CI 作业中写入或读取它们。

# iphone - 如何在 iPhone 应用程序开发中运行多个 SQlite 查询

> ID：10530619
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:55:48.840
> 
> 标签：iphone, objective-c, ios, ipad, sqlite

我正在开发一个应用程序，我想从 SQlite 中的多个表中获取数据。

```
-(void)checkAndCreateDatabase{
    BOOL success;
    NSFileManager *fileManager=[NSFileManager defaultManager];
    success=[fileManager fileExistsAtPath:databasePath];
    if(success)
        return;

    NSString *databasePathFromApp = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:databaseName];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
}
-(void)readData{
    sqlite3 *database;
    genderList=[[NSMutableArray alloc]init];
    if(sqlite3_open([databasePath UTF8String], &database)== SQLITE_OK){
        const char *sqlStatement = "select name from gender";
        sqlite3_stmt *compiledStatement;
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL)==SQLITE_OK){
            while (sqlite3_step(compiledStatement)==SQLITE_ROW) {
                NSInteger pId = sqlite3_column_int(compiledStatement, 0);
                NSString *stringName=[NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                db *info =[[db alloc]initWithID:pId andName:stringName];
                [genderList addObject:info];
            }            
        }
        sqlite3_finalize(compiledStatement);
    }
    sqlite3_close(database);
} 
```

在上面的代码中，我从性别中传递了一个查询选择名称。同时我想通过从内容中选择名称并将其保存在不同的数组中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:04:44.060

您可以使用类似的代码

```
-(NSUInteger)getCounter:(NSUInteger)id{
    NSUInteger final=0;

    NSMutableArray *ar=[[NSMutableArray alloc] init];
    NSString *strQuery=[NSString stringWithFormat:@"select qty from Datatable where id=?"];
    const char *query=[strQuery UTF8String];
    sqlite3_stmt *compiledStmt;
    if(sqlite3_open([self.dbPath UTF8String], &database)==SQLITE_OK) {
        if(sqlite3_prepare_v2(database, query, -1, &compiledStmt, NULL)==SQLITE_OK){
            sqlite3_bind_int(compiledStmt, 1, id);
            while (sqlite3_step(compiledStmt)==SQLITE_ROW) {
                GET_Integer(qty,0);
                final=qty;
                [ar addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:qty],@"qty",nil]];
            }
        } else {
            NSLog(@"Invalid query");
        }
    } else {
        NSLog(@"error while opening database.");
    }

    return final;
} 
```

对整数使用内联函数

```
#define GET_Integer(_TO_,_FROM_) NSUInteger _TO_; { \
_TO_ = sqlite3_column_int(compiledStmt,_FROM_); \
} 
```

也多用

```
#define PUT_Value(_TO_,_FROM_) { \
    NSString *str=[dObj valueForKey:_FROM_]; \
    if(!str) str=@" "; \
    sqlite3_bind_text(compiledStmt,_TO_,[str UTF8String],-1,SQLITE_TRANSIENT); \
}

#define PUT_Integer(_TO_,_FROM_) { \
    NSInteger numbr=[[dObj valueForKey:_FROM_] intValue]; \
    sqlite3_bind_int(compiledStmt,_TO_,numbr); \
}

#define PUT_Double(_TO_,_FROM_) { \
CGFloat doubleX=[[dObj valueForKey:_FROM_] floatValue]; \
sqlite3_bind_double(compiledStmt,_TO_,doubleX); \
}

#define GET_Value(_TO_,_FROM_) NSString *_TO_; { \
const unsigned char *c=sqlite3_column_text(compiledStmt,_FROM_); \
_TO_= c ? [NSString stringWithUTF8String:(char*)c] : @"" ; \
}

#define GET_Double(_TO_,_FROM_) double _TO_;{ \
_TO_=sqlite3_column_double(compiledStmt,_FROM_); \
} 
```

# android - Android，使用有效电池使用的传感器检测运动

> ID：10530622
> 
> 赞同：3
> 
> 时间：2012-05-10T08:55:58.237
> 
> 标签：android, android-sensors

我想向我的应用程序添加一项功能（通常将其大部分功能作为服务运行），以便它可以监控何时拿起设备。

我的计划（虽然我不确定这是最好的方法）是使用加速度计来监控运动。

阅读 android 文档，它说您应该尽快取消注册传感器，因为它会在几个小时内耗尽电池电量。

所以我的问题是，有没有办法有效地使用传感器，以免耗尽电池，但在拿起设备时仍能检测到设备的运动？

或者有没有更好的方法来做到这一点。

目前我正在像这样注册传感器：

```
mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL); 
```

# drupal - Drupal 7 使用块查看上下文过滤器，默认值不能正常工作，使用

> ID：10530627
> 
> 赞同：0
> 
> 时间：2012-05-10T08:56:21.477
> 
> 标签：drupal, view

我创建了一个基于 url 显示内容的视图：例如：domain.com/projects/[username]/[projectname]，它显示了特定用户的项目，效果很好。另外，我想在侧边栏显示这个用户的相关项目，所以我创建了一个块视图，使用上下文过滤器和默认值。

因为我的 url 是项目/用户名，通过使用 URL 中的默认值 -> 原始值，所以我将路径组件设置为 2。但这对我不起作用。

例如：假设我的用户名是“abc”。

在预览中，如果 url 路径是“projects/abc”，尽管用户名在 url 路径的 2ed 组件中，但它不会显示任何内容。

如果url路径是“abc/*”，会显示相关内容，也就是说只要用户名在url路径的第一个参数中就可以了。

我没有发生什么，似乎将路径组件配置为 2 不起作用。我很纳闷，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:10:33.537

哟错过了一些东西。我认为您的每个用户都有一个 url 别名。例如'user/1' 有 url 别名 'abc'。上下文过滤器的 URL 组件适用于直接 url，而不适用于别名。例如，用户 url 'abc' 的第二个组成部分将是 '1'，因为原始 url 是 'user/1'。您可以通过在工作视图标题中打印参数来轻松调试它，自己尝试一下：

```
<?php print arg(0) . '<br>' . arg(1); ?> 
```

对于具有别名“abc”的用户/1，我接下来收到：
用户
1
对于路径“abc/*”，这是第二个组件，但
对于路径“项目/用户名”，它不是 3-rd，因为此 url 没有别名对于 [uid] 组件，您必须使用 projects/[uid] 或其他验证参数，例如您可以检查项目的 autor。在上下文过滤器的默认值设置中选择“来自 UR 的用户 ID”并选中“同时查找节点并使用节点作者”选项。

# jquery - Jquery中的类似滑块

> ID：10530632
> 
> 赞同：-1
> 
> 时间：2012-05-10T08:56:27.187
> 
> 标签：jquery, slider, gallery

我在谷歌中寻找与本网站类似的主滑块：http: [//www.coxarchitecture.com.au](http://www.coxarchitecture.com.au)

您可以在主页中看到图像是如何像相机效果一样移动的，稍后会通过描述淡出

你们知道任何脚本吗，或者可以指导我如何使用 JQuery 添加这样的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:11:00.430

虽然我很犹豫要不要找你，

[http://tobia.github.com/CrossSlide/](http://tobia.github.com/CrossSlide/)

查看底部的示例。

# c# - 可级联一对一，必选：必选与EF的关系

> ID：10530636
> 
> 赞同：0
> 
> 时间：2012-05-10T08:56:42.723
> 
> 标签：c#, entity-framework, foreign-keys, one-to-one

我有一个`Video`类和一个`MediaContent`由 1-1 链接的类，必需：必需的关系：每个类都`Video`必须有 1 个关联`MediaContent`。删除一个`MediaContent`对象必须导致关联`Video`对象的删除。

使用fluent API，可以将关系建模如下：

```
modelBuilder.Entity<Video.Video>()
            .HasRequired(v => v.MediaContent).WithRequiredPrincipal(mc => mc.Video)
            .WillCascadeOnDelete(true); 
```

在添加迁移以反映数据库中的此更改时，这是根据外键转录关系的方式：

```
AddForeignKey("MediaContents", "MediaContentId", "Videos", "VideoId", cascadeDelete: true); 
```

更新数据库，我收到以下错误：

```
Cascading foreign key 'FK_MediaContents_Videos_MediaContentId' cannot be created where the referencing column 'MediaContents.MediaContentId' is an identity column. 
```

删除该`WillCascadeOnDelete(true)`属性会消除错误，但我不确定我是否理解原因。无论是否打开级联，都不应该出现错误吗？我理解这个问题的方式是，错误来自这样一个事实，即自动增量（或任何 id 生成策略）的生成`VideoId`和处理，这可能与外键约束相矛盾。`MediaContentId`但我看不出这与删除级联有什么关系......

我错过了什么？更一般地说，您将如何建模与 EF 的可级联的一对一、必需：必需的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:53:59.323

我避免使用 modelBuilder 笨拙的方法，并通常使用简单的 POCO 和属性 - 您可以使用它们来实现您的目标，如下所示：

```
public class Video
{
    public int Id { get; set; }

    // Adding this doesn't change the db/schema, but it is enforced in code if
    // you try to add a Video without a MediaContent.
    [Required]
    public MediaContent MediaContent { get; set; }
}

public class MediaContent
{
    [ForeignKey("Video")]
    public int Id { get; set; }

    public Video Video { get; set;}
} 
```

# javascript - 我可以将这些嵌套的javascript“if”语句简化为一个吗？

> ID：10530637
> 
> 赞同：0
> 
> 时间：2012-05-10T08:56:44.423
> 
> 标签：javascript, jquery, if-statement

所以我有两个变量，animationFlag 和 ajaxFlag。我还有一个函数设置，它根据浏览器对转换的支持返回 true 或 false。我希望发生的是，如果 ajaxFlag 为真且 animationFlag 为真，它只运行此淡入淡出函数。但是在没有过渡支持的浏览器中，animationFlag 永远不会变为真，所以我需要检查它是否支持过渡，然后仅在不支持过渡时检查 ajaxFlag。我尝试用 || 将它们分开 和 && 在不同的组合中，但我真的需要这种嵌套。

单个 if 语句将是 WAYYYY 很好，那么，是否可以将其合并为一个？谢谢！

```
 function checkDone() {
        if (!supportsTransitions) {
            if (ajaxFlag) {
                setTimeout(function(){
                    fadeInModal();
                },100)
            }
        } else {
            if (ajaxFlag && animationFlag) {
                setTimeout(function(){
                    fadeInModal();
                },100)
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T08:58:04.063

这应该工作

```
if (ajaxFlag && (animationFlag || !supportsTransitions)) {
    // ...
} 
```

# thrift - 如何在生产中运行 Ruby Thrift 服务器？

> ID：10530638
> 
> 赞同：5
> 
> 时间：2012-05-10T08:56:56.733
> 
> 标签：thrift

我需要使用 Ruby 实现 Thrift API。

*   在生产环境中运行服务器有哪些选择？
*   什么是最好的选择？

目前我只是实例化一个 SimpleServer 并在其上调用 #serve。这显然是一个糟糕的解决方案，因为如果出现任何问题，我需要重新启动服务器（所以我正在使用脚本对其进行监控）。另外，我假设它是单线程的。

我意识到这是一个非常基本的问题，我很惊讶我无法通过谷歌搜索找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:50:39.653

我有同样的问题，一直无法找到答案。但是您可能会发现 ruby​​doc.info 上的[BaseServer](http://rubydoc.info/gems/thrift/0.9.0/frames)页面很有帮助。

我猜`ThreadPoolServer`, `ThreadedServer`, or`MongrelHTTPServer`可能是生产 RPC 服务器的更好选择。随着我进一步调查，这个答案将被更新。

# c# - 从单词 c# 的末尾删除特定字符串

> ID：10530639
> 
> 赞同：0
> 
> 时间：2012-05-10T08:57:02.060
> 
> 标签：c#, c#-4.0

我可以执行以下操作以从单词末尾删除特定字符串吗？

```
public static HashSet<string> stringtoremove = new HashSet<string>
         ...............
         .................
    public static string stepone(this string word)
        {
            if (stringtoremove(word.EndsWith))
            {
             word =   ..................................;
            }
            return word;
        } 
```

我试过了，但它不起作用。我错过了我的代码中的某些内容吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:01:19.563

最好的选择是使用正则表达式；看看[Replace 方法](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)。

```
string input = "test testabc test123 abc abctest";
string pattern = @"(abc\b)";
string replacement = "";
Regex rgx = new Regex(pattern);
string result = rgx.Replace(input, replacement);

Console.WriteLine("Original String: {0}", input);
Console.WriteLine("Replacement String: {0}", result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:06:51.313

我假设您实际上想查看[`HashSet<String>`](http://msdn.microsoft.com/en-us/library/bb353005.aspx)给定的字符串参数是否以这些单词之一结尾。如果是这样，请将其从字符串的末尾删除。

您可以使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb549039.aspx)来确定集合中的第一个字符串，它也是给定单词的结尾：

```
var firstMatch = stringtoremove.FirstOrDefault(str => word.EndsWith(str));
if (firstMatch != null)
    return word.Substring(0, word.Length - firstMatch.Length);
else
    return word; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:08:22.423

为什么不使用[String.TrimEnd](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)方法？

```
word = word.TrimEnd(charsToTrim) 
```

# qt - 小部件样式主题颜色关键字

> ID：10530640
> 
> 赞同：1
> 
> 时间：2012-05-10T08:57:05.593
> 
> 标签：qt, pyqt, pyqt4

我正在使用它来设置小部件的背景颜色：

```
self.setStyleSheet('QLineEdit { background-color: gray; }') 
```

现在我想而不是`'gray'`写一个关键字（类似`*button*`），它放置由当前主题为按钮定义的颜色。有没有这样的关键字，或者我必须自己使用`QApplication.palette().button().color()`并将颜色放入样式表中？

![在此处输入图像描述](../Images/1d57bfce4f680fb0a87d32aeff0c790b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:17:15.023

我认为您正在寻找[PaletteRole](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#paletterole)：

```
QLineEdit { background-color: palette(button); } 
```

# linux - 在 bash 脚本和 awk 命令中需要帮助

> ID：10530642
> 
> 赞同：0
> 
> 时间：2012-05-10T08:57:24.027
> 
> 标签：linux, bash, awk

我需要一个 bash 脚本来递归地打印文件夹名称和文件名（在 stdo/p 中）。例如：我有一个像 /earth/plants/flowers/rose/rose.jpg 这样的文件夹结构。

```
/earth/plant/fruits/apple/apple.jpg.
/earth/animals/carni/lions.jpg
/earth/animals/herbi/omni/dog.jpg 
```

现在我需要像这样列出这些文件和文件夹，我的意思是我的 O/P 脚本应该是，

```
planet=earth
category=animal (plant) 
sub cat = carni 
name = lion.jpg. 
```

我试过了

```
`find / -name "*" -print | awk -F"/" '{ print "\n planet=",$2,"\n category=",$3,"\n sub cat=",$4,"\n Name=",$5, $6 }'` 
```

上面的命令给了我下面的 O/P。

```
planet=earth 
category=animal (plant)  
sub cat = carni 
name = lion.jpg 
```

但是在某些情况下，我还有其他文件夹，例如“ `/earth/animals/herbi/omni/rabbit.jpg`”，在这种情况下，输出顺序会发生变化，例如：

```
planet=earth 
category=animal 
sub cat = herbi 
name = omni 
rabbit.jpg 
```

所以我需要在几个地方列出额外的子猫。喜欢

```
planet=earth
category=animals
sub cat = herbi
add cat = omni
name = rabbit.jpg 
```

所以如何用一个脚本来做到这一点。除了 awk 之外的脚本也是受欢迎的。

```
`find / -name "*" -print | awk -F"/" '{ print "\n planet=",$2,"\n category=",$3,"\n sub cat=",$4,"\n Name=",$5,$6}`` 
```

在这种情况下，5 美元中​​的任何内容将仅打印为名称。所以需要这样的东西。

```
 ``find / -name "*" -print | awk -F"/" '{ print "\n planet=",$2,"\n category=",$3,"\n sub cat=",$4,"\n add cat =",$5,(if $5 = foldername print  "add cat = omni")  name = $6 }'"``. 
```

谢谢，维杰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:20:57.070

```
awk -F"/" '{
    print "\n planet=", $2, "\n category=", $3, "\n sub cat=", $4
    for (i = 5; i < NF; i++) print " add cat=", $i
    print " Name=",$NF
}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T05:12:24.553

你可以试试这个 - 塞满了 bashisms，在其他 shell 中不起作用：

*（查找命令在这里）* `| while IFS=/ read root planet category rest; do`

```
 echo "planet=$planet"
    echo "category=$category"
    size="$(stat -c %s "/$planet/$category/$rest")"
    while [[ "$rest" == */* ]]; do
       subcat="${rest%%/*}"
       rest="${rest#*/}"
       echo "subcategory=$subcat"
     done
     echo "name=$rest"
     echo "size=$size"
     echo
done 
```

此外，`-name "*"`在 find 命令上是多余的。但你可能`-type f`至少想要。

# spring - 数据列表中每个项目的 Spring Batch-Repeat 步骤

> ID：10530652
> 
> 赞同：3
> 
> 时间：2012-05-10T08:58:15.580
> 
> 标签：spring, spring-batch

这是一个艰难的过程，但我相信它并非闻所未闻。

我有两个数据集，国家和人口统计。国家数据集包含国家名称和其人口统计数据的 ID。

人口统计数据集是从国家到郊区的分层数据集。

这两个数据集都是每周从第 3 方提取的。

我需要将人口统计数据分成文件，每个国家/地区一个。

到目前为止，我所拥有的步骤是 1）拉国家 2）拉人口 3）（这是必需的）循环国家数据集，调用“将国家人口统计数据写入文件”

是否有可能以某种方式重复通过当前国家/地区ID的步骤？

**编辑：添加了 PartitionHandler 示例的链接**

谢谢杰布里斯托。下面的链接显示了使用 JavaTask 对象的 addArgument 覆盖 PartitionHandler 来传递参数的用法，但它看起来像开发人员的大量繁重工作，而不是 Spring 批处理的目标“特定于业务问题”。 [http://www.activeeon.com/blog/all/integration/distribute-a-spring-batch-job-on-the-proactive-scheduler](http://www.activeeon.com/blog/all/integration/distribute-a-spring-batch-job-on-the-proactive-scheduler)

我还在您的原始链接第 7.4.3 节中看到了。将输入数据绑定到步骤这是在 7.4.2 的上下文中。分区器，这个看起来很刺激

```
<bean id="itemReader" scope="step"
    class="org.spr...MultiResourceItemReader">
  <property name="resource" value="#{stepExecutionContext[fileName]}/*"/>
</bean> 
```

我不认为有人在玩这个的一些示例 XML 配置吗？

1.  分区器
2.  将动态值传递给分区内的步骤

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-14T22:59:00.987

是的，看看 spring-batch 的分区功能！[http://static.springsource.org/spring-batch/reference/html-single/index.html#partitioning](http://static.springsource.org/spring-batch/reference/html-single/index.html#partitioning)

基本上，它允许您使用“分区器”来创建新的执行上下文以传递给处理程序，然后处理程序对该信息进行处理。

虽然分区是为并行化而设计的，但其默认并发数为 1，因此您可以从小处着手，然后逐步提高以匹配您可以使用的硬件。由于我假设每个国家/地区的数据不依赖于其他国家/地区（至少在下载人口统计步骤中），因此您的工作可以利用基本的并行化。

/编辑：添加示例。

这是我所做的（或多或少）：首先，XML：

```
<beans>
  <batch:job id="jobName">
    <batch:step id="innerStep.master">
      <batch:partition partitioner="myPartitioner" step="innerStep"/>
    </batch:step>
  </batch:job>
  <bean id="myPartitioner" class="org.lapseda.MyPartitioner" scope="step">
    <property name="jdbcTemplate" ref="jdbcTemplate"/>
    <property name="runDate" value="#{jobExecutionContext['runDate']}"/>
    <property name="recurrenceId" value="D"/>
  </bean>
  <batch:step id="summaryDetailsReportStep">
    <batch:tasklet>
      <batch:chunk reader="someReader" processor="someProcessor" writer="someWriter" commit-interval="10"/>
    </batch:tasklet>
  </batch:step>
</beans> 
```

现在一些Java：

```
public class MyPartitioner implements Partitioner {
  @Override 
  public Map<String, ExecutionContext> partition(int gridSize) {
    List<String> list = getValuesToRunOver();
    /* I use treemap because my partitions are ordered, hashmap should work if order isn't important */
    Map<String, ExecutionContext> out = new TreeMap<String, ExecutionContext>(); 
    for (String item : list) {
      ExecutionContext context = new ExecutionContext();
      context.put("key", "value"); // add your own stuff!
      out.put("innerStep"+item, context);
    }
    return out;
  }
} 
```

然后，您只需从上下文中读取，就像从步骤中的正常步骤或工作上下文中读取一样。

# google-earth - 带有 WPF 的 Google 地球，不使用 HwndHost

> ID：10530653
> 
> 赞同：0
> 
> 时间：2012-05-10T08:58:16.983
> 
> 标签：google-earth, google-earth-plugin

在我的项目中，我想将 Google 地球嵌入其中一个用户控件。我在网上看到很多例子，人们说如何使用winforms来做。我已经看到了一些实际将它集成到**WPF**中的示例，但是使用**WindowsFormsHost/HwndHost** *我正在消除它以避免空域问题*。

*在我的脑海中，就像拥有一个渲染引擎类并在控件中有一个图像，并使用后台缓冲从图像上的渲染引擎类中绘制数据。*

有没有人在不使用 WindowsFormsHost/HwndHost 的情况下集成了 Google 地球？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:55:25.867

尝试使用 D3DImage。WPF 提供一个回调来填充后台缓冲区。看看 WPF 博士在 Code Project 上的精彩示例。您可以在此处找到示例。

[http://www.codeproject.com/Articles/28526/Introduction-to-D3DImage](http://www.codeproject.com/Articles/28526/Introduction-to-D3DImage)

〜约格什

# vb.net-2010 - 如何使用来自 msaccess 表的过滤数据填充 vb.net 中的组合框

> ID：10530654
> 
> 赞同：0
> 
> 时间：2012-05-10T08:58:21.500
> 
> 标签：vb.net-2010, sqlconnection

我真的很感激我能得到的任何帮助。

我的问题是我将 Combobox1 绑定到 BindingSource 并且 DataMember 和 ValueMember 属性链接并正常工作。对于我的一生，我不知道如何使用 Combobox1 的值（选定的 valuemember）来过滤我在 Combobox2 上显示的结果。我迫切需要一种简单的方法来做到这一点。

我的失败代码如下

```
Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    Dim conn As New SqlConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\Database1.mdb") 'This line fails

    Dim strSQL As String = "SELECT * FROM Questions WHERE Section='" & ComboBox1.ValueMember & "'"
    Dim da As New SqlDataAdapter(strSQL, conn)
    Dim ds As New DataSet
    da.Fill(ds, "Disk")

    With ComboBox2 'Here i try to populate the combobox2
        .DataSource = ds.Tables("Questions")
        .DisplayMember = "Question_String"
        .ValueMember = "Question_Code"
        .SelectedIndex = 0
    End With
End Sub 
```

我不断收到如下系统级错误 {"Keyword not supported: 'provider'."}

我尝试了其他一些选项，但我得到的错误似乎更神秘，有人可以帮我解决这个问题。我会很感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:02:23.687

`Dim conn As New OleDBConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source='|DataDirectory|\Database1.mdb'")`

此外，您的查询必须使用字符串而不是对象，因此请尝试...

`Dim strSQL As String = "SELECT * FROM Questions WHERE Section='" & ComboBox1.ValueMember.toString & "'"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:18:52.440

Here are a couple of observations about your code that I hope you find helpful:

First, you might want to look at this MSDN help on how to move your database connection string out of the code and into a configuration file. This is especially important for your code to work to work more seemlessly across different environment (dev box, staging, production, etc) - [Connection Strings and Configuration Files (ADO.NET)](http://msdn.microsoft.com/en-us/library/ms254494(v=vs.100).aspx)

I also noticed that you never explicitly open or close the connection. Per [this entry on stack overflow](https://stackoverflow.com/questions/2472854/does-dataadapter-fill-close-its-connection-when-an-exception-is-thrown), you should be ok, but keep in mind that if you happen to change the code to explicitly open the connection you will also need to close it.

I also noticed that you aren't using a parameterized query. This makes your code vulnerable to a SQL Injection attack. [Here](http://weblogs.asp.net/scottgu/archive/2006/09/30/Tip_2F00_Trick_3A00_-Guard-Against-SQL-Injection-Attacks.aspx) is a link to a blog posting by Scott Guthrie 'Tip/Trick: Guard Against SQL Injection Attacks'. You never know who may copy and paste your block of code with this bad practice.

Finally, you do the following query (with appropriate mods from other answers:

```
Dim strSQL As String = "SELECT * FROM Questions WHERE Section='" & ComboBox1.ValueMember.toString & "'" 
```

And subsequently only use Question_String, and Question_Code in your code. You might want to consider changing your query to only pull the columns you need. This is especially helpful when you have tables with many columns. Otherwise you will needlessly pull data your code never actually needs. So your query would become:

```
 Dim strSQL As String = "SELECT Question_String, Question_Code FROM Questions WHERE Section='" & ComboBox1.ValueMember.toString & "'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:38:15.037

因为您将提供程序用于不需要它的连接，因为提供程序应该是 SQL 驱动程序。

我不知道您使用的是什么数据库（好吧，该文件是访问文件），但您需要检查您是否有正确的连接字符串

见[http://www.connectionstrings.com/sql-server-2008#p2](http://www.connectionstrings.com/sql-server-2008#p2)

# javascript - CSS/JQuery 链接悬停不会触发

> ID：10530655
> 
> 赞同：0
> 
> 时间：2012-05-10T08:58:23.940
> 
> 标签：javascript, jquery, html, css

我在使用 jquery 悬停设置时遇到问题。我使用在此站点上找到的稍作修改的解决方案（示例 5a）：[http ://webdesignerwall.com/tutorials/jquery-tutorials-for-designers](http://webdesignerwall.com/tutorials/jquery-tutorials-for-designers)

基本上我的设置应该像这样工作：悬停在链接元素（**#1**）上会触发 em（**#2**）元素上的淡入淡出。**#3是****#1**和**#2**后面的缩略图。

它昨天有效，但后来我设法打破了它。我尝试检查拼写错误并删除不必要的代码，但无法正常工作:(

我获取了必要的代码位并将它们放在**JSFiddle**上。我以前从未使用过它，所以我希望我没有做错任何事.. 这是网址：http: [//jsfiddle.net/kuFDT/3/](http://jsfiddle.net/kuFDT/3/)

html:

```
<ul class="showcase">
<li>
    <a href=""> asd </a>         // #1
        <em> doop derk </em>     // #2
    <div class="sample"></div>   // #3
</li>
</ul> 
```

jQuery：

```
$(document).ready(function() {

$(".showcase a").hover(function() {
        $(this).next("em").fadeIn(200);
    }, function() {
        $(this).next("em").fadeOut(200);
    });

}); 
```

CSS：

```
.showcase a:link { width:300px; height:200px; float:left; background-color: #f2f2f2; }

.showcase { list-style: none outside none; }

.showcase li {
    float:left;
    z-index:-20;
    position: relative;
}

.showcase em {                        
    height:50px;
    width:300px;
    left:0;
    top:280px;
    display:none;
    position:absolute;
    z-index:-5;
    color: white;
    background-color: orange;
}

div.sample {
    width:300px;
    height:300px;
    float:left;
    background-color:#B3B3B3;
    position:absolute;
    top:0;
    left:0;
    z-index:-10;
} 
```

感谢您花时间阅读这篇长篇大论！

-维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:03:35.403

您没有在 jsFiddle 中加载 jQuery 库，加载 Lib 后它工作正常 :)

[Jsfiddle 链接](http://jsfiddle.net/joycse06/kuFDT/5/)

# python - 在 Chrome 缓存中打开“索引”文件

> ID：10530665
> 
> 赞同：0
> 
> 时间：2012-05-10T08:59:05.440
> 
> 标签：python, google-chrome, indexing, browser-cache

我在Chrome Cache目录下找到'Index'文件，但不知道怎么打开，这个文件对我分析缓存很重要，而且我还找到了一个有用的缓存软件，[http://www. nirsoft.net/utils/chrome_cache_view.html](http://www.nirsoft.net/utils/chrome_cache_view.html)，这是我想做的，但是没有源代码...帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:13:33.750

查看[取证维基](http://www.forensicswiki.org/wiki/Google_Chrome)和[铬开发维基](http://www.chromium.org/developers/design-documents/network-stack/disk-cache#TOC-Index-File-Structure)。

也许与：[Chrome 缓存分析](https://stackoverflow.com/questions/10470999/chrome-cache-analysis)重复？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T02:56:40.320

这是我在 Stackoverflow 中的并行问题链接之后发现的

[http://www.chromium.org/developers/design-documents/network-stack/disk-cache](http://www.chromium.org/developers/design-documents/network-stack/disk-cache) [http://src.chromium.org/viewvc/chrome/trunk/src/net/disk_cache/disk_format.h?view =标记](http://src.chromium.org/viewvc/chrome/trunk/src/net/disk_cache/disk_format.h?view=markup)

# java - 使用哪一个 - executeUpate 或 list - 插入、更新和选择？

> ID：10530667
> 
> 赞同：1
> 
> 时间：2012-05-10T08:59:08.027
> 
> 标签：java, hibernate, stored-procedures

我用以下 sql 语句编写了一个存储过程

1.  在表 a 中插入一行
2.  更新表 b 中的一行
3.  在错误表中插入一行
4.  选择查询列出错误表中的记录数

我可以使用 query.list() 吗？它会正确执行所有插入、更新和返回列表吗？

我认为我们不能使用 query.executeUpdate() 因为它只返回在最后一个 sql 语句中更新或插入的行数。

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:27:54.067

如果它是存储过程，您可以像这样使用

```
 try
   {
      con  = connectionPool.getConnection();
      proc = con.prepareCall("{ call set_death_age(?, ?) }");
      proc.setString(1, dyingBard.getName());
      proc.setInt(2, age);
      proc.execute();
   }
      catch (SQLException e) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:03:41.410

[http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate/](http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate/)

有关如何使用休眠调用存储过程的示例，请参见上面的链接

如果你使用的是 spring，你也可以通过 Spring JdbcTemplate 调用存储过程。

# php - 跨 2 个不同主机的 2 个 MySQL 连接

> ID：10530668
> 
> 赞同：0
> 
> 时间：2012-05-10T08:59:15.487
> 
> 标签：php, mysql, connection

我在不同的主机中有 2 个连接数据库（MySQL），如下所示：

```
//database 1
$dbhost='localhost';
$dbuser='user1'; 
$dbpass='pass1';
$dbname='dbname1';

//database 2
$dbhostams='192.168.16.3';
$dbuserams='user2';
$dbpassams='pass2';
$dbnameams='dbname2';  

function dbconnection($dbhost,$dbuser,$dbpass,$dbname){
    if(!mysql_connect($dbhost,$dbuser,$dbpass)){
        echo "Error occure on opening connection or database. Period.";
    }else{
        if(!mysql_select_db($dbname)){
            echo "Error occure on select databases !";
        }
    }
}
function dbconnectionams($dbhostams,$dbuserams,$dbpassams,$dbnameams){
    $cxn = mysql_connect($dbhostams,$dbuserams,$dbpassams,$dbnameams);
    if( $cxn === FALSE ) {  
        die('mysql connection error: '.mysql_error()); 
    }else{
        if( !mysql_select_db($dbnameams) ){
            echo "Error occure on select databases !";
        }
    }
} 
```

当我使用：

```
dbconnection($dbhost,$dbuser,$dbpass,$dbname); 
```

在我的页面代码中，并使用：

```
dbconnectionams($dbhostams,$dbuserams,$dbpassams,$dbnameams); 
```

在同一页面的另一行代码中，发生错误，如下所示：

```
警告：用户访问被拒绝：'apache@localhost'（使用密码：否）
/home/firman/html/fdrsimpeg/sdm-aam/include/dbclass.php 在第 17 行

警告：MySQL 连接失败：用户访问被拒绝：'apache@localhost'
（使用密码：否）在 /home/firman/html/fdrsimpeg/sdm-aam/include/dbclass.php
在第 17 行

mysql连接错误：

```

我必须怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:04:43.033

您需要将 true 作为第四个参数传递给 mysql_connect 函数。

```
$database1 = mysql_connect($host1, $user1, $pass1); 
$database2 = mysql_connect($host2, $user2, $pass2, true); 

mysql_select_db('database1', $database1);
mysql_select_db('database2', $database2); 
```

要查询您的数据库，请使用以下命令：

```
mysql_query('SELECT * FROM table', $database1);
mysql_query('SELECT * FROM table', $database2); 
```

在 Stackoverflow 上查看此答案 ....[链接](https://stackoverflow.com/a/274919/326016)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:08:07.790

首先，更改变量名称，您将更容易阅读代码......其次，问题似乎出在连接上，因为它检测到用户名是“apache”。检查函数中的变量名称...更改它们并重试。

```
//database 1
$dbhost='localhost';
$dbuser='user1'; 
$dbpass='pass1';
$dbname='dbname1';

//database 2
$dbhostams='192.168.16.3';
$dbuserams='user2';
$dbpassams='pass2';
$dbnameams='dbname2';  

function dbconnection($_dbhost,$_dbuser,$_dbpass,$_dbname){
    if(!mysql_connect($_dbhost,$_dbuser,$_dbpass)){
        echo "Error occure on opening connection or database. Period.";
    }else{
        if(!mysql_select_db($_dbname)){
            echo "Error occure on select databases !";
        }
    }
}
function dbconnectionams($_dbhostams,$_dbuserams,$_dbpassams,$_dbnameams){
    $cxn = mysql_connect($_dbhostams,$_dbuserams,$_dbpassams,$_dbnameams);
    if( $cxn === FALSE ) {  
        die('mysql connection error: '.mysql_error()); 
    }else{
        if( !mysql_select_db($dbnameams) ){
            echo "Error occure on select databases !";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:24:20.353

您的全局变量（`$dbhost`,`$dbuser`等）不在您的函数调用范围内；例如，如果这些函数调用发生在另一个函数中，您将需要使用`global`关键字在函数中声明变量以便访问它们（否则 PHP 认为您指的是本地同名的不同变量功能）：

```
function foo() {
  global $dbhost, $dbuser, $dbpass, $dbname;
  dbconnection($dbhost,$dbuser,$dbpass,$dbname);
} 
```

阅读有关[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:51:23.213

我没有看到任何明显错误，我按照提供的代码测试了您的代码并且两个连接都有效。

检查是否在您的 php.ini 中设置了`mysql.default_user`等`mysql.default_host`

# c# - 如何将谓词传递给 C# 中的函数？

> ID：10530669
> 
> 赞同：8
> 
> 时间：2012-05-10T08:59:18.077
> 
> 标签：c#, asp.net, c#-4.0, predicate

我有 ：

```
 public void InitializeStatusList(DropDownList list)
    {
       var dictionaryEntries = GetEntriesFromDatabase();
       list.DataSource = dictionaryEntries.Where(entry => entry is EntryStatus1 || entry is EntryStatus2);
       list.DataBind();           
    } 
```

我有很多这样的功能。我想编写`dictionaryEntries`查询条件作为谓词传递的通用函数。

例如：

```
public void InitializeStatusList(DropDownList list)
{
    CommonInitializeStatusList(DropDownList list, entry => entry is EntryStatus1 || entry is EntryStatus2);
}

public void CommonInitializeStatusList(DropDownList list, ??????????????? predicate)
{                       
    var dictionaryEntries = GetEntriesFromDatabase();
    list.DataSource = dictionaryEntries.Where(predicate);
    list.DataBind();        
} 
```

代表什么`???????????????`

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T09:01:54.500

`Func<Entry, bool> predicate`应该工作，变量`Entry`的类型在哪里。`entry`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T09:26:30.743

你可以这样做：

```
public void InitializeStatusList(DropDownList list)
{    
    Func<Entry,bool> predicate=entry=>entry is EntryStatus1 || entry is EntryStatus2;
    CommonInitializeStatusList(list, predicate);
}

public void CommonInitializeStatusList(DropDownList list, Func<Entry,bool> predicate)
{                                 
    var dictionaryEntries = GetEntriesFromDatabase();    
    list.DataSource = dictionaryEntries.Where(predicate);
    list.DataBind();

} 
```

# wpf - 如何从 MEF 组件提供 XAML 资源

> ID：10530670
> 
> 赞同：5
> 
> 时间：2012-05-10T08:59:18.353
> 
> 标签：wpf, resources, mef, resourcedictionary

我有一个导入 MEF 组件，它在导入向导打开时动态加载。一旦用户选择了她想要处理的导入类型，对导入向导对话框的控制就会传递给所选的导入组件。当然，导入组件需要为向导对话框提供资源（例如`DataTemplate`s）。目前这是通过`DataTemplateSelector`导入组件提供的 s 实现的。他们访问`ResourceDictionary`导入组件的程序集的本地。

但正如您可以想象的那样，这很乏味：我必须为每个`DataTemplate`提供的代码添加代码，WPF 不会自动使用正在显示`DataTemplate`的类型的权限。`ViewModel`

以前有人解决过这个问题吗？你们如何在插件环境中提供资源？

感谢您提前提供任何帮助。

此致

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T13:35:27.123

我不知道在哪里找到了这个小技巧，但是您可以做的一件事是在编写外部程序集时动态导入资源字典。

在每个包含资源的程序集中，您可以通过隐藏代码并进行如下注释来导出一个或多个 ResourceDictionary 对象：

```
[Export(typeof(ResourceDictionary))]
public partial class Resources : ResourceDictionary
{
    public Resources()
    {
        InitializeComponent();
    }
} 
```

现在您需要一个组件来解析`[ImportMany] IEnumerable<ResourceDictionary> resourceDictionaries`并执行以下操作：

```
 //Merge exported resource dictionaries from all composed sources into the application
        foreach (var resourceDictionary in resourceDictionaries)
        {
            Application.Current.Resources.MergedDictionaries.Add(resourceDictionary);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:16:56.417

如果您导入的组件将仅包含在应用程序的特定区域中，则您可以仅将组件的根 ViewModel 的 DataTemplate 添加到表示组件所在区域的 FrameworkElement 的资源中。然后，所有其他 DataTemplate（对于导入组件中的其他 ViewModel）将包含在组件根 ViewModel 的 DataTemplate 的资源中。

# javascript - 在 Javascript 中跟踪社交按钮点击

> ID：10530671
> 
> 赞同：0
> 
> 时间：2012-05-10T08:59:25.533
> 
> 标签：javascript, iframe, social-networking

在一个网站上，我有一些社交按钮（tweet、facebook like、google+1、..）。它们中的大多数是使用 iframe 插入的。

任务是跟踪与这些按钮的使用交互：如果有人 +1 的内容 - AJAX 请求应该更新我在服务器上的本地统计信息。

但是，由于安全限制，使用 JS 我无法访问 iframe 的内容：无法绑定“点击”事件。

那么，如何跟踪这些社交按钮的点击次数呢？

* * *

可能的解决方案：

1.  将“click”绑定到 iframe 对象本身：它不起作用。
2.  内联添加按钮，不带 iframe。不行：我还应该显示每个按钮的点赞数。
3.  尝试使用社交服务 API 在没有 iframe 的情况下插入。并非所有服务都支持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:07:39.087

你不能。如果你能捕捉到对它们的点击，你也可以触发对它们的点击，这将是非常糟糕的（想象一下色情网站让你自动“喜欢”它们）。

您唯一能做的就是使用各个站点的 API 来检索点赞/+1/等的人数。您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:10:47.357

来自主要公司的大多数社交按钮都可以让您的 Javascript 检测按钮何时被按下。他们通常通过 Javascript 事件来做到这一点。

换句话说，他们会告诉您的代码他们已被按下，您不必自己检测它。

**推特**

[关于他们的 javascript 事件的信息](https://dev.twitter.com/docs/intents/events)

**Facebook**

您需要使用 XFBML 版本的按钮。[来自 Facebook Like](http://developers.facebook.com/docs/reference/plugins/like/)按钮

> > 我如何知道用户何时点击了“赞”按钮？
> > 
> > 如果您使用的是 XFBML 版本的按钮，您可以通过[FB.Event.subscribe](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)订阅 'edge.create' 事件。

**谷歌+1**

请参阅`callback`他们的文档中的参数。请参阅[+1 标签属性](https://developers.google.com/+/plugins/+1button/#plusonetag-parameters)部分。您为他们的按钮提供了一个 Javascript (JS) 函数。然后，当按下按钮时，他们会调用您的 JS。简单的！

# tridion - 在 SDL Tridion 2011 SP1 中使用 Tom.Net API 获取 Xhtml 字段的完整 XML 源

> ID：10530672
> 
> 赞同：5
> 
> 时间：2012-05-10T08:59:31.383
> 
> 标签：tridion

我正在研究 SDL Tridion 2011 SP1 中的 Tom.Net API。我正在尝试检索 XhtmlField 的“源”部分。

我的来源看起来像这样。

```
<Content>
    <text>
        <p xmlns="http://www.w3.org/1999/xhtml">hello all<strong>
            <a id="ID1" href="#" name="ZZZ">Name</a>
        </strong></p>
    </text>
</Content> 
```

我想获取这个“文本”字段的来源并处理带有 name 的标签`a`。

我试过以下：

```
ItemFields content = new ItemFields(sourcecomp.Content, sourcecomp.Schema);
XhtmlField textValuesss = (XhtmlField)content["text"]; 

XmlElement  textxmlelement = textValuesss.Definition.ExtensionXml;

Response.Write("<BR>" + "count:" + textxmlelement.ChildNodes.Count);
for (int i = 0; i < textxmlelement.ChildNodes.Count; i++)
{
    Response.Write("<BR>" + "nodes" + textxmlelement.ChildNodes[i].Name);
}

//get all the nodes with the name a
XmlNodeList nodeswithnameA = textxmlelement.GetElementsByTagName("a");
foreach (XmlNode eachNode in nodeswithnameA)
{
    //get the value at the attribute "id" of node "a"
    string value = eachNode.Attributes["id"].Value;
    Response.Write("<BR>" + "idValue" + value);
} 
```

我没有得到任何输出。此外，我得到的计数为零。

我得到的输出：

> 计数：0

尽管我在该领域有一些子标签，但我不明白为什么 0 会以`Count`.

任何人都可以建议所需的修改。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T10:16:33.890

ItemField.Definition 允许访问字段的*架构定义*，而不是字段内容，因此您不应使用 ExtensionXml 属性来访问内容（这就是它为空的原因）。此属性用于在架构定义中存储扩展数据。

要使用包含 XML/XHTML 内容的字段，我只需访问组件的 Content 属性，因为这已经是一个 XmlElement。您需要注意内容的命名空间，因此在查询此 XmlElement 时使用 XmlNamespaceManager。例如，以下将为您提供对名为“文本”的字段的引用：

```
XmlNameTable nameTable = new NameTable();
XmlNamespaceManager nsManager = new XmlNamespaceManager(nameTable);
nsManager.AddNamespace("custom", sourceComp.Content.NamespaceURI);
XmlElement fieldValue = (XmlElement)sourceComp.Content.SelectSingleNode(
                                "/custom:Content/custom:text", nsManager); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T10:01:54.007

```
textValuesss.Definition.ExtensionXml 
```

这是错误的属性（定义导致 Schema 字段定义，而 ExtensionXml 用于由扩展编写的自定义 XML 数据）。

您想改用 textValuesss.Value 并将其加载为 XML。之后，您可能应该将 SelectSingleNode 与包含 XHTML 名称空间的特定 XPath 查询一起使用。或者使用 Linq to XML 来查找元素。

# c# - C# Listview 不能用按钮编辑它

> ID：10530677
> 
> 赞同：1
> 
> 时间：2012-05-10T08:59:56.340
> 
> 标签：c#, forms, function, listview

我有个问题; 我正在尝试在 C# Forms 中创建一个列表视图，然后使用按钮对其进行编辑。

但它不会编辑它。你能帮帮我还是给我一个小费。

listView 已打开`Form1`，并且在第二个 foreach 循环中我可以看到它已编辑，但在`Form1` `ListView`我没有看到任何更改。它仍然是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:04:42.827

尝试这个

```
frm.InitializeComponent(); 
```

# apache-flex - 在容器上捕获 mouseEevents，绕过其子项

> ID：10530678
> 
> 赞同：0
> 
> 时间：2012-05-10T09:00:11.363
> 
> 标签：apache-flex, flex4

我正在使用 Flex 4.6 构建一个 RIA 应用程序，该应用程序包含一个主边界容器（页面），该边界容器（页面）可以包含一些其他边界容器（图形或文本元素）。

我在页面上添加了一个事件监听器来监听点击事件：

```
page.addEventListener(MouseEvent.CLICK, clickHandler, true); 
```

clickHandler 看起来像这样：

```
private function clickHandler(event:MouseEvent):void
{
    // Remove event listeners
    page.removeEventListener(MouseEvent.CLICK, clickHandler, true);

    // Get click position
    objX = event.localX;
    objY = event.localY;
} 
```

我的问题是，虽然事件的 currentTarget 始终是页面（正常），但目标可以是页面或其子页面之一，然后 localX 不会给我页面上的位置，而是在子页面上。

有没有办法确保页面始终是事件的目标？像停止页面上的捕获阶段这样它不会更深入？

在此先感谢您的帮助

达雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:23:12.363

我想你可能问错了问题。据我了解，您想要相对于“页面”的 x/y 位置。您可以使用[DisplayObject#globalToLocal()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#globalToLocal%28%29)函数来找到它。

只需获取全局坐标并将它们转换为相对于“页面”的局部坐标：

```
var coordinates:Point = new Point(event.stageX, event.stageY);
coordinates = page.globalToLocal(coordinates);
objX = coordinates.x;
objY = coordinates.y; 
```

# entity-framework - 存储库模式和实体框架包括

> ID：10530687
> 
> 赞同：1
> 
> 时间：2012-05-10T09:00:23.020
> 
> 标签：entity-framework, repository-pattern

我正在将存储库模式与 EF 一起使用，我认为我对此非常满意，但仍然存在一个问题；

如果我想急切加载实体，最好的方法是什么？

例如，我有一个映射到实体的存储库：

```
public class EFFooRepository : IFooRepository
{
     public IQueryable<Foo> GetFoo()
     {
        .....
     }
} 
```

如果我想获取 Foo 和 Bar 对象怎么办

```
db.Foo.Include("Bar") 
```

但是我的存储库只返回 Foo，所以我需要创建另一个方法 GetFooAndBar 吗？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-09T16:02:58.367

我也有同样的经历。当我实现存储库模式时，我希望能够使用 DbSet<T> 实现的 IQueryable<T> 和 IEnumerable<T>，而不暴露 DbSet<T>（旧信息隐藏）

因此我认为让所有的 IQueryable / IEnumerable 函数调用 Repository 中 DbSet<T> 的相应函数就足够了。

直到今天，这对于我所有的 IQueryable<T> 函数来说已经足够了。今天我发现除了 IQueryable.Include 有你描述的同样的问题。没有编译器错误，但没有加载数据。

经过广泛的结果，我发现原因在[QueryableExtensions.Include Method (IQueryable, String)的 MSDN 描述中有所描述](https://msdn.microsoft.com/en-us/library/system.data.entity.queryableextensions.include(v=vs.113).aspx#M:System.Data.Entity.QueryableExtensions.Include%60%602(System.Linq.IQueryable%7B%60%600%7D,System.Linq.Expressions.Expression%7BSystem.Func%7B%60%600,%60%601%7D%7D))

> 此扩展方法调用源 IQueryable 对象的 Include(String) 方法（如果存在此类方法）。**如果源 IQueryable 没有匹配方法，则此方法不执行任何操作。**

所以我所要做的就是在我的存储库中编写一个匹配的包含语句，该语句将调用相应的 DbSet 存储库。IQueryable / IEnumerable 函数只是调用 DbSet 的相应函数：

```
public class Repository<T> : 
    System.Linq.IQueryable<T>, System.Collections.Generic.IEnumerable<T>,
    System.Linq.IQueryable, System.Collections.IEnumerable
    where T : class, new()
{
    public Repository(DbContext dbContext)
    {
        this.dbContext = dbContext;
        this.dbSet = dbContext.Set<T>();
    }

    public readonly DbSet<T> dbSet;
    private readonly DbContext dbContext;

    public virtual DbQuery<T> Include(string path)
    {
        return this.dbSet.Include(path);
    }

    // other Repository functions: Find / Add / Update / Remove etc 
```

为了完整性，IQueryable / IEnumerable 实现：

```
 #region IQueryable
    IEnumerator<T> IEnumerable<T>.GetEnumerator()
    {
        return ((IQueryable<T>)this.dbSet).GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return ((IEnumerable)this.dbSet).GetEnumerator();
    }

    Type IQueryable.ElementType
    {
        get { return ((IQueryable<T>)this.dbSet).ElementType; }
    }

    System.Linq.Expressions.Expression IQueryable.Expression
    {
        get { return ((IQueryable)this.dbSet).Expression; }
    }

    IQueryProvider IQueryable.Provider
    {
        get { return ((IQueryable)this.dbSet).Provider; }
    }
    #endregion IQueryable 
```

现在以下工作，地址包括：

```
using (MyDbContext dbContext = new MyDbContext(...))
{
    Repository<Customer> customers = new Repository<Customer>(dbContext);
    var happyCustomers = customers
        .Include(customer => customer.Address)
        .Where(customer => customer.IsHappy);
    Show(happyCustomers);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:07:20.333

如果您启用了延迟加载，则可以加载`Bar`后者（当您要访问该属性时）。但是，如果您想编写一个同时加载数据的方法，`Foo`是`Bar`的，您需要编写特定的存储库方法。

# command-line - 如何通过Windows XP中的命令行检查给定文件是否位于给定目录下的任何位置？

> ID：10530689
> 
> 赞同：0
> 
> 时间：2012-05-10T09:00:43.347
> 
> 标签：command-line, batch-file, windows-xp, cmd

因此，例如我需要检查文件 C:\windows\system32\whatever.dll 是否位于 c:\windows 中。是否有可能以类似的方式`if not exists ...`，但在这里`if %file% lies in %directory%`？

编辑：我知道我正在寻找的文件的路径。问题归结为比较字符串，即检查目录的路径是否包含在文件路径的开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:14:47.193

你可以做类似的事情

```
if not exists %directory%\%file% 
```

通过这种方式，您可以创建一个完整的文件路径名，例如“c:\myfolder\yourfolder\myfile.txt”并检查它是否存在

***更新***
这应该可以工作（但未经测试）

```
:: starting folder
set RootPath=c:\myfolder\yourfolder\

::check all subfolder
for /R "%RootPath%" %%d IN (.) DO ( 
    echo %%d

    :: check all file in each subfolder
    for %%f IN ("%%~d\*.*") DO (

        :: check if your file exist 
        IF "%%~nxf"=="filenameImLookingFor.txt" (
              echo Found file here "%%~f"
        )
    )
) 
```

*   **%%~nxf** 将扩展为带有扩展名的 filname，没有路径
*   “〜”还确保扩展变量永远不会包含前缀/后缀双引号，这样您就可以添加自己的双引号而不会出现意外的双引号（这显然会搞砸）

这是 FOR 变量的有用语法列表（来自 FOR 命令的帮助）

> 您现在可以使用以下可选语法：
> 
> ```
> %~I         - expands %I removing any surrounding quotes (")
> %~fI        - expands %I to a fully qualified path name
> %~dI        - expands %I to a drive letter only
> %~pI        - expands %I to a path only
> %~nI        - expands %I to a file name only
> %~xI        - expands %I to a file extension only
> %~sI        - expanded path contains short names only
> %~aI        - expands %I to file attributes of file
> %~tI        - expands %I to date/time of file
> %~zI        - expands %I to size of file
> %~$PATH:I   - searches the directories listed in the PATH
>                environment variable and expands %I to the
>                fully qualified name of the first one found.
>                If the environment variable name is not
>                defined or the file is not found by the
>                search, then this modifier expands to the
>                empty string 
> ```
> 
> 可以组合修饰符以获得复合结果：
> 
> ```
> %~dpI       - expands %I to a drive letter and path only
> %~nxI       - expands %I to a file name and extension only
> %~fsI       - expands %I to a full path name with short names only
> %~dp$PATH:I - searches the directories listed in the PATH
>                environment variable for %I and expands to the
>                drive letter and path of the first one found.
> %~ftzaI     - expands %I to a DIR like output line 
> ```

# xcode - 在 Xcode 4 中显示方法定义/描述

> ID：10530695
> 
> 赞同：2
> 
> 时间：2012-05-10T09:01:02.567
> 
> 标签：xcode, xcode4, methods, definition

有没有办法在 Xcode iOS 项目中为我的方法添加描述，以便在使用 OPTION + 单击所需的方法时可以快速查看详细信息，就像可以在 Apple 的 API 方法上完成一样（下面的案例）？

![在此处输入图像描述](../Images/e2b421716c3c0f878ae7d37f128a0851.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:25:13.317

如果我理解正确，那么所有这些工具都是用于生成文档而不是用于添加方法的描述。我对吗？

# ruby-on-rails - 使用 rails 中的 forem gem 格式化帖子

> ID：10530699
> 
> 赞同：0
> 
> 时间：2012-05-10T09:01:16.890
> 
> 标签：ruby-on-rails

我在使用 forem gem 格式化 html 时遇到问题。

在 _post.html.erb 里面你会发现这一行：`<%= forem_format(post.text) %>`

但是，当我查看帖子时，我会在输出中看到 html。例如，如果我输入`<b> HI </b>`，我会在输出中看到确切的行。

我确实尝试安装 RedCloth gem，然后把这`<%= RedCloth.new(post.text).to_html %>`没有产生错误，但不幸的是我仍然只`<b> HI </b>`在输出中看到。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:20:21.297

有点晚了，但想知道吗？你试过 html_safe

`<%= RedCloth.new(post.text).to_html.html_safe %>`

# php - 如何将字符串转换为非字母数字字符的驼峰式大小写？

> ID：10530702
> 
> 赞同：3
> 
> 时间：2012-05-10T09:01:34.670
> 
> 标签：php, regex, string

我需要将字符串转换为驼峰式大小写，这很容易使用：

```
mb_convert_case($str, MB_CASE_TITLE, "UTF-8") 
```

但是如果字符串包含非字母数字字符怎么办：

```
$str = 'he said "hello world"';
echo mb_convert_case($str, MB_CASE_TITLE, "UTF-8"); 
```

结果是：

```
He Said "hello World" 
```

但是我需要：

```
He Said "Hello World" 
```

我们该如何处理呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:16:26.553

用正则表达式。

如果您只打算使用非重音拉丁字符，它可以很简单

```
$str = 'he said "hello WORLD"';
echo preg_replace('/\b([a-z])/e', 'strtoupper(\'$1\')', strtolower($str)); 
```

[这匹配任何前面有单词边界](http://www.regular-expressions.info/wordboundaries.html)的小写无重音拉丁字母。该字母被替换为等效的大写字母。

如果您希望它也可以与其他语言和脚本一起使用，您将不得不花哨：

```
$str = 'he said "καλημέρα ΚΌΣΜΕ"'; // this has to be in UTF-8
echo preg_replace('/(?<!\p{L})(\p{Ll})/eu',
                  'mb_convert_case(\'$1\', MB_CASE_UPPER, \'UTF-8\')',
                  mb_convert_case($str, MB_CASE_LOWER, 'UTF-8')); 
```

要理解这一点，您需要参考 PCRE 的[Unicode](http://www.regular-expressions.info/unicode.html)功能，并注意我已将`u`修饰符添加到[`preg_replace`](http://php.net/manual/en/function.preg-replace.php). 这匹配任何具有大写等效项（带有 pattern `\p{Ll}`）的 unicode 字母，前提是它前面没有任何其他字母（带有 pattern 的[负向lookbehind](http://www.regular-expressions.info/lookaround.html)`\p{L}`）。然后将其替换为等效的大写字母。

**[看到它在行动](http://ideone.com/aGPmR)**。

**更新：**看起来您打算仅将空格视为单词边界。这可以通过正则表达式来完成

```
(?<=\s|^)([a-z])
(?<=\s|^)(\p{Ll}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:12:52.513

使用手册！:D 在 php.net 上找到

```
<?php

function ucwordsEx($str, $separator){

      $str = str_replace($separator, " ", $str);
      $str = ucwords(strtolower($str));
      $str = str_replace(" ", $separator, $str);
      return $str;

}
/*
Example:
*/
echo ucwordsEx("HELLO-my-NAME-iS-maNolO", "-");
/*
Prints: "Hello My Name Is Manolo"
*/

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:30:08.637

对于非 unicode 字符，以下将用于将字符串转换为驼峰式大小写：

```
preg_replace('/\b([a-z])/e', 'strtoupper("$1")', strtolower($str)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:09:09.113

尝试这样的事情（根据 PHP.net 评论）

```
$str = 'he said "hello world"';
echo preg_replace('/([^a-z\']|^)([a-z])/ie', '"$1".strtoupper("$2")', strtolower($str)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-22T17:43:17.373

这是非常简单的代码

```
echo  ucwords('he said '.ucwords('"hello world"')) ; 
```

**输出**他说你好世界

# google-analytics - 谷歌分析和潜在客户捕获

> ID：10530707
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:02:01.583
> 
> 标签：google-analytics

这是我想要实现的目标：

我有一个带有潜在客户捕获表格的登录页面（名称电子邮件电话）。我正在运行 adwords 广告系列来捕捉这些潜在客户。

我想知道有什么方法可以用关键字和广告系列来标记每个潜在客户。通过这种方式，我将能够知道哪些广告系列为我带来了优质的潜在客户。

如果有任何可用的示例代码，那就太好了。

PS 我的广告系列是自动标记的，因此我无法从 URL 和 UTM 参数中捕获数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:28:02.800

您只需要在该潜在客户上[定义一个目标。](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55515)
你可以定义这个目标：

*   在表单验证后重定向访问者的 URL（如果有的话）
*   如果不是您[将](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)在表单提交中添加的事件

然后在分析广告报告中获取所有统计信息。

注意：不要忘记在您的 Adwords 广告系列上启用[自动标记功能。](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55590)

# graphics - OpenCV中与多边形相交的点

> ID：10530712
> 
> 赞同：4
> 
> 时间：2012-05-10T09:02:15.137
> 
> 标签：graphics, opencv

**我的输入**

我有一个`vector<Point2f>`包含多边形轮廓的。我还有一个需要与这个多边形相交的点列表。

**问题**

我想计算这些点中有多少与多边形相交。我想对多个多边形重复此计算，以查看哪个包含最多的点。

OpenCV 是自己实现这样的交集功能，还是我需要自己实现交集功能？我担心如果我尝试自己实现它，结果会不必要地缓慢。如果 OpenCV 做不到，还有其他免费的图形库可以完成这个任务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T10:15:18.413

[pointPolygonTest](http://opencv.willowgarage.com/documentation/cpp/imgproc_structural_analysis_and_shape_descriptors.html#cv-pointpolygontest)完全符合您的要求，并且经过了很好的优化。该参数是`Mat`您可以使用带有点向量的构造函数制作的参数。

> 该函数确定该点是在轮廓内部、外部还是位于边上（或与顶点重合）。它相应地返回正（内部）、负（外部）或零（在边缘）值。当 measureDist=false 时，返回值分别为 +1、-1 和 0。否则，返回值是点和最近轮廓边缘之间的有符号距离。

不过，您的问题似乎很容易并行化，即每批候选多边形都可以在不同的线程上运行，所以如果您担心性能，我肯定会考虑这一点。

# android - 在 Android webview 中播放视频

> ID：10530716
> 
> 赞同：0
> 
> 时间：2012-05-10T09:02:21.773
> 
> 标签：android, video, webview

我正在尝试在 android webview 中播放视频。我做了我的谷歌研究并尝试了所有建议的例子，但不幸的是它们都不起作用。这是我正在使用的：

```
webview.setWebChromeClient(new WebChromeClient() {

         @Override
         public void onShowCustomView(View view, CustomViewCallback callback) {
             super.onShowCustomView(view, callback);
             if (view instanceof FrameLayout){
                 FrameLayout frame = (FrameLayout) view;
                 if (frame.getFocusedChild() instanceof VideoView){
                     VideoView video = (VideoView) frame.getFocusedChild();
                     frame.removeView(video);
                     setContentView(video);
                     video.setOnCompletionListener(new OnCompletionListener() {

                        @Override
                        public void onCompletion(MediaPlayer mp) {
                            mp.stop();
                            setContentView(R.layout.loaddata_qrurl);
                        }
                    });
                     video.setOnErrorListener(new OnErrorListener() {

                        @Override
                        public boolean onError(MediaPlayer mp, int what, int extra) {
                            return false;
                        }
                    });
                     video.start();
                 }
             }
         }
         }); 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:18:35.370

这在 android 2.3 及更高版本中是可能的。只需在 webview 中调用 index.html 页面。并将您的视频和 index.html 放在资产文件夹中。根据我的经验，这是可行的。

1.  索引.html

    ```
    <!DOCTYPE html>
    <html>
    <head>
    </head>
    <body>
    what is your name ?
        <input id="name" value="" />
        <button onClick="sayhello()">Say hello</button>

        <video width="260" height="320" controls="controls">
            <source src="swipe_tabs.mp4" type="video/mp4" />
            <object data="swipe_tabs.mp4" width="240" height="320">
                <embed src="swipe_tabs.mp4" width="240" height="320" />
            </object>
        </video> 
    </body>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T07:22:36.023

我将视频文件放在 RAW 文件夹中，并通过以下代码访问 default.html 文件中的视频文件：

```
video.src ="android.resource://ProjectPackageAame/raw/test";
video.type = "video/mp4";      
video.load(); 
video.play(); 
```

它像我想要的那样播放视频。还在 AndroidManifest 文件中添加了以下行。

```
 android:hardwareAccelerated="true" 
```

尝试这个

# java - 发送电子邮件异常错误消息

> ID：10530718
> 
> 赞同：0
> 
> 时间：2012-05-10T09:02:25.543
> 
> 标签：java, email, jsp, servlets

我的 servlet 中有以下内容`doPost`，将记录插入到 postgres 数据库中，然后向用户发送有关购买的电子邮件。我测试了插入，它运行良好，但是当我尝试为发送电子邮件添加代码时，发生异常错误，我不明白为什么。

我什至在一个标准的单独的 java 应用程序中测试了发送电子邮件功能，它工作正常。这是我的代码

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("Start");
        HttpSession s = request.getSession(true);
        String firstName = (String) s.getAttribute("firstName");
        String lastName = (String) s.getAttribute("lastName");
        String email = (String) s.getAttribute("email");
        String creditCard = (String) s.getAttribute("cCard");

        if (s.getAttribute("bookingCart") != null) {
            System.out.println(firstName);
            if(firstName == null || lastName == null || email == null || creditCard == null) {
                response.sendRedirect("MasterController?confirmBooking=true&error=Data+not+valid");
                return;
            }
            bookingDTO booking = (bookingDTO) s.getAttribute("bookingCart");
            bookingsDAO bookingsDAO = new JDBCBookingsDAO();
            bookingsDAO.confirmPaymentBooking(booking.getId() , email, firstName, lastName, creditCard);
            System.out.println("Booking updated");
            String msg = "Dear Customer,\n Thnk you for Using Our website \n Please use link below to confirm your Booking\n"+
                         " ";
             // Recipient's email ID needs to be mentioned.
              String to = "brice2nic3@gmail.com";

              // Sender's email ID needs to be mentioned
              String from = "brice2nic3@gmail.com";

              // Assuming you are sending email from localhost
              String host = "smtp";

              System.out.println("Proterpies");
              // Get system properties
              Properties properties = System.getProperties();
              System.out.println("Booking updated1");
              // Setup mail server
              properties.setProperty("mail.smtp.host", host);
              System.out.println("Booking updated2");
              // Get the default Session object.
              Session session = Session.getDefaultInstance(properties);
              System.out.println("Booking updated3");
              try{
                  System.out.println("Booking updated4");
                 // Create a default MimeMessage object.
                 MimeMessage message = new MimeMessage(session);
                 System.out.println("Booking updated5");
                 // Set From: header field of the header.
                 message.setFrom(new InternetAddress(from));
                 System.out.println("Booking updated6");
                 // Set To: header field of the header.
                 message.addRecipient(Message.RecipientType.TO,
                                          new InternetAddress(to));
                 System.out.println("Booking updated7");
                 // Set Subject: header field
                 message.setSubject("This is the Subject Line!");
                 System.out.println("Booking updated8");
                 // Now set the actual message
                 message.setText("This is actual message");
                 System.out.println("Booking updated9");
                 // Send message
                 Transport.send(message);
                 System.out.println("Sent message successfully....");
              }catch (MessagingException mex) {
                 mex.printStackTrace();
              }
            s.removeAttribute("bookingCart");
            s.setAttribute("bookingCart", null);
            s.removeAttribute("bookingAmount");
            s.setAttribute("bookingAmount", null);
        } else {
            System.out.println("Booking not updated");
            response.sendRedirect("MasterController?retHome=true");
            return;
        }
        System.out.println("redirected to masterController");
        response.sendRedirect("MasterController?Message=Booking+Successful");
    } 
```

我的异常信息是：

```
java.lang.NoClassDefFoundError: javax/mail/MessagingException
    java.lang.Class.getDeclaredConstructors0(Native Method) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:25:56.847

原因`NoClassDefFoundError`是特定类在 Classpath 中不可用。第三方 API `mail.jar`应`/WEB-INF/lib`在您的 Web 应用程序下

您可能正在使用 jar 命令运行程序，并且清单文件的 ClassPath 属性中未定义类

# api - Tridion 2011 中的 StructureGroup IsPublishable 属性

> ID：10530720
> 
> 赞同：9
> 
> 时间：2012-05-10T09:02:33.373
> 
> 标签：api, tridion

我想知道现在（在 Tridion 2011 中）结构组“IsPublishable”的旧属性在哪里。

看起来这已经发生了一些变化，因为我在 API 上搜索了它，但我找不到任何东西。不再是财产，但现在有必要从不同的地方恢复此信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T09:45:57.600

是`StructureGroup.IsActive`财产

# jquery - 如何在jQuery中做这些效果？（褪色悬停和滑动图标）

> ID：10530723
> 
> 赞同：0
> 
> 时间：2012-05-10T09:02:41.380
> 
> 标签：jquery

我一直在寻找对链接有类似影响的脚本，如下所示：http: [//applemaybe.com/](http://applemaybe.com/)

在顶部菜单上查看，单击链接，悬停状态不会立即出现而是消失，图标也以一种很好的方式向上滑动。我需要能产生完全相同效果的脚本。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:25:40.763

他们实际上是在使用 CSS3 过渡。如果您接受它并不适用于所有浏览器，因为它是一种视觉效果，我建议您也这样做。在 JavaScript 中执行此操作可能不会产生好的结果，也可能会产生较差的性能结果。

在 CSS3 中执行此操作既简单又快速。在提到的网站上，他们只有这个 CSS3 类：

```
a, .link {
    -moz-transition: color 0.4s ease-in-out 0s;
    ...
} 
```

但是，在这种情况下，它仅适用于 Firefox。您应该注意 CSS3 尚未完成，因此它可能会在未来发展。

有关 CSS3 过渡的文档，请参阅[此页面](http://www.w3schools.com/css3/css3_transitions.asp)。

# php - php脚本结束后如何启用提交按钮？

> ID：10530727
> 
> 赞同：0
> 
> 时间：2012-05-10T09:02:59.473
> 
> 标签：php, ajax

如何在 php 脚本结束后启用 sumbit 按钮？

例如：

在我的 index.php 页面中，我有一个默认禁用的提交按钮，在 php 脚本 (script.php) 结束后，我想启用它。

sp far 的想法是在 script.php 的末尾放置一个布尔变量，所以当它结束时我将其设置为 true。但是如何继续检查布尔变量是否更改为 true？我猜我们使用 ajax...我已经知道如何禁用 html 按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:31:31.787

在脚本执行结束时创建一个文件，并在前端不断检查该文件是否存在。这就是您在 jQuery 中执行此操作的方式。

```
function ft(){
    $.ajaxSetup({
        cache: false 
    });
    $.ajax({
        url: "enable.txt", 
        method: 'get',
        error: function(){return true;}, //if 404 error continue the request
        success: function(data){
            $("#your_element").attr("disabled","false");
            window.clearInterval(timeOutId); //Stop the request of getting the file,
        }
    });               
};

$(document).ready(function(){
    timeOutId = window.setInterval("ft()", 10000); //repeat after 10 seconds.
}); 
```

# django - 同一实例上的 Django 多个站点

> ID：10530729
> 
> 赞同：0
> 
> 时间：2012-05-10T09:03:10.103
> 
> 标签：django, sites, multiple-sites

我怎样才能获得一些功能相似但外观和内容不同的网站 - 所有数据都会不同。

即时更改 SITE_ID 并编写自己的模板加载器和静态文件查找器（不同站点的相同 URL /static/ 表示不同的类别）并将 ForeignKey 添加到所有站点？

还是有其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:14:58.023

在同一实例上拆分 Django 站点是一项微妙的操作。首先，您必须牢记您的模型。与 FlatPages 一样，您的模型可能包含 Sites 表的 ManyToManyField，因此您可以根据需要根据当前站点过滤内容。

关于模板和静态数据，我喜欢马克的回答，但你可以用不同的方式来做。您可以将模板和静态文件夹拆分为具有不同主题和模板配置的多个文件夹。例如，您可能只有一组模板和两个“主题”，如下所示：

```
templates 
    / normal_set
static 
    / themes 
        / blue
        / red 
```

您可以创建一个名为 SiteConfiguration 的表，其中包含一个指向 Sites 表的 OneToOneField。此配置表将包含站点的模板文件夹的名称和主题文件夹的名称，以便您可以在站点之间共享属性。也许您可以稍后缓存它以避免过于频繁地访问数据库。也许把这个建议和马克的建议混在一起。

我假设您的用户在每个站点上都保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:49:18.830

我做了和你类似的事情。

我的观点中有一个辅助方法可以获取主机。

def getHost(request): return request.META['SERVER_NAME']

然后根据主机，我的静态目录分为 2 个站点 static/host1/ static/host2/

我对模板做同样的事情，我将它分成 2 个目录并调用适当的一个！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T20:42:09.763

为这个确切的用例设计了 2 个软件包：

对于 Django 1.8+，有[https://bitbucket.org/levit_scs/django-polla](https://bitbucket.org/levit_scs/django-polla)

如果您使用的是旧版本的 Django，您可以使用[https://bitbucket.org/uysrc/django-dynamicsites/overview](https://bitbucket.org/uysrc/django-dynamicsites/overview)

尽管这个答案已经很晚了，但我确实希望它可以帮助人们绊倒这个问题

# ios - IBAction UIButton 触发延迟

> ID：10530736
> 
> 赞同：8
> 
> 时间：2012-05-10T09:03:32.270
> 
> 标签：ios, sdk, uibutton, ibaction

我有一个 UIButton 连接到 Interface Builder 中的 IBAction。

**问题：**

*   按钮的动作触发和取消突出显示都需要一点时间才能发生。

**事实：**

*   视图结构：
    *   看法
        *   10 个按钮（通过 UIControlEventTouchUpInside 连接到 IBAction
        *   视图（子视图）
            *   手势识别器
            *   文本域
*   Subview有一个UITapGestureRecognizer，其中delaysTouchesBegan和delaysTouchesEnded都设置为NO
*   该动作发生在主线程中。
*   测试一个简单的按钮（没有图片或标题，只有一个简单的 NSLog），结果是一样的

**问题：** 为什么发射和取消突出显示延迟？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T08:34:17.480

最后，我在某处添加了一些 UIGestureRecognizer，忘记将 delaysTouchesBegan 设置为 NO =(

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T09:31:46.437

好的，我认为因为`UITapGestureRecognizer`.. 尝试执行以下操作：

1.  连接`IBOutlet`到您的按钮。

2.将`UITapGestureRecognizer`委托分配给您的 ViewController。

3.在yourViewController中实现这个手势委托方法

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer 
       shouldReceiveTouch:(UITouch *)touch {
    return (! [yourButton pointInside:[touch locationInView:yourButton] withEvent:nil]);
} 
```

这将使点击被您的按钮而不是识别器识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:21:21.120

确保您的触摸事件设置为按钮的第一次接触，这将是触地事件，否则操作将延迟，直到您选择的任何其他事件完成（即内部修饰，外部修饰等）。

# c - 链接实际上是如何在内部发生的？

> ID：10530739
> 
> 赞同：2
> 
> 时间：2012-05-10T09:03:38.100
> 
> 标签：c, gcc, linker, glibc

有些问题我无法得到答案。任何帮助都非常有用。

1.  在 C 编译模型中，链接实际上是如何发生的？
2.  如果我使用 Linux 和 GCC，如何`glibc`链接到主程序。是静态链接还是动态链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:07:54.607

1.  对于您的第一个问题，简单的单项答案是不够的。阅读以下资源

    1.  [cprogramming.com 上有关链接的文章](http://www.cprogramming.com/compilingandlinking.html)

    2.  [维基百科文章](http://en.wikipedia.org/wiki/Linker_%28computing%29)

    3.  [手册页`ld`](http://linux.die.net/man/8/ld-linux)

    4.  [所以发布](https://stackoverflow.com/questions/1951498/what-is-the-difference-between-linking-and-loading-in-c-language)

2.  `glibc`除非您为链接器指定选项，否则它是动态链接的**。**[`-static`](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)在*正常*情况下，静态链接一个巨大的库`glibc`是没有帮助的。

# class - 弗雷格课程如何运作？

> ID：10530740
> 
> 赞同：7
> 
> 时间：2012-05-10T09:03:40.953
> 
> 标签：class, types, functional-programming, frege

似乎弗雷格关于类型类的想法与 Haskell 有很大不同。尤其是：

*   语法似乎有所不同，没有明显的原因。

*   函数类型不能有类实例。（似乎是一个相当奇怪的规则......）

*   语言规范说明了在子类实例声明中实现超类。（但如果你有钻石继承……这不会是一个错误，但不能保证以某种方式工作？）

*   Frege 对实例的外观不那么挑剔。（类型别名是允许的，类型变量不需要是不同的，等等）

*   方法可以声明为`native`，尽管它的含义并不完全清楚。

*   看来您可以编写`type.method`访问方法。同样，没有说明这意味着什么或为什么有用。

*   子类声明可以为超类方法提供默认实现。（？）

简而言之，如果知道这些东西的人可以写一个关于这些东西如何工作的解释，那将会很有用。它在语言规范中列出，但描述有点简洁。

（关于语法：我觉得 Haskell 的实例语法比较合乎逻辑。“如果 X 是 Y 和 Z 的实例，那么它也是 Q 的实例，方式如下……” Haskell 的类语法一直显得有点奇怪对我来说。如果 X 实现`Eq`了，这并不*意味着*它实现了`Ord`，这意味着它*可以*实现`Ord`，如果它愿意的话。我不确定一个更好的符号会是什么......）

* * *

根据英戈的回答：

*   我假设为超类方法提供默认实现仅在您“一次性”声明您的实例时才有效？

例如，假设`Foo`是 的超类`Bar`。假设每个类都有三个方法（`foo1`、`foo2`、`foo3`、`bar1`、`bar2`、`bar3`），并`Bar`为`foo1`. 这应该意味着

```
实例吧 FB 在哪里
  富二 = ...
  foo3 = ...
  酒吧1 = ...
  酒吧2 = ...
  酒吧3 = ...

```

应该管用。但这会起作用吗：

```
实例 Foo FB 在哪里
  富二 = ...
  foo3 = ...

实例吧 FB 在哪里
  酒吧1 = ...
  酒吧2 = ...
  酒吧3 = ...

```

*   所以如果我`native`在类声明中声明一个方法，那只是设置该方法的*默认*实现？

所以如果我做类似的事情

```
类 Foobar f 在哪里
  foo :: f -> Int
  本地富

  酒吧 :: f -> 字符串
  本地酒吧

```

那么这只是意味着如果我为某个 Java 本机类编写一个空实例声明，然后`foo`映射到`object.foo()`Java 中？

特别是，如果一个类方法被声明为`native`，如果我选择，我仍然可以为它提供一些*其他*实现吗？

*   每个类型 [constructor] 都是一个命名空间。我知道这对臭名昭著的命名字段问题有什么帮助。我不确定你为什么要在这个命名空间的范围内声明其他东西......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:29:38.780

您似乎已经非常仔细地阅读了语言规范。伟大的。但是，不，类型类/实例与 Haskell 2010 没有本质区别。只是一点点，那一点是符号。

你的观点：

广告 1\. 是的。规则是约束（如果有的话）附加到类型上，类名跟在关键字后面。但是当多参数类型类被添加到语言中时，这将很快改变，有利于 Haskell 语法。

ad 2\. 同时全面支持函数类型。这将包含在下一个版本中。不过，当前版本仅支持 (a->b)。

广告 3\. 是的。考虑我们的分类类层次结构 Functor -> Applicative -> Monad。您可以只编写以下内容而不是 3 个单独的实例：

```
instance Monad Foo where
    -- implementation of all methods that are due Monad, Applicative, Functor 
```

广告 4\. 是的，目前。但是，多参数类型类将会发生变化。语言规范建议遵守 Haskell 2010 规则。

ad 5\. 如果您使用类型类对 Java 类层次结构建模，您将需要它。本机函数声明对于类型类/实例没有什么特别之处。因为你可以在一个类中拥有一个注解和一个默认实现（就像在 Haskell 2010 中一样），你可以以原生声明的形式拥有它，它给出 a）类型和 b）实现（通过引用Java 方法）。

广告 6\. 这是正交性。正如你可以在 M 是一个模块的情况下编写 M.foo 一样，你可以在 T 是一个类型（构造函数）时编写 T.foo，因为两者都是命名空间。另外，如果你有“记录”，`T.f x`当弗雷格无法推断出`x`.

```
foo x = x.a + x.b    -- this doesn't work, type of x is unknown
-- remedy 1: provide a type signature
foo :: Record -> Int  -- Record being some data type
-- remedy 2: access the field getter functions directly
foo x = Record.a x + Record.b x 
```

ad 7\. 是的，例如，Ord 在比较方面具有 (==) 的默认实现。因此，您可以在不实现 (==) 的情况下创建某事物的 Ord 实例。

希望这可以帮助。一般来说，必须说，语言规范需要 a) 完成和 b) 更新。如果只有一天有36个小时......

此处还讨论了句法问题：[https ://groups.google.com/forum/?fromgroups#!topic/frege-programming-language/2mCNWMVg5eY](https://groups.google.com/forum/?fromgroups#!topic/frege-programming-language/2mCNWMVg5eY)

- - 第二部分 - - - - - -

您的示例将不起作用，因为如果您定义`instance Foo FB`，则无论其他实例和子类如何，这都必须成立。仅当不存在 Foo 实例时，才会使用 Bar 中的默认 foo1 方法。

> 那么这只是意味着如果我为某个 Java 原生类编写了一个空实例声明，那么 foo 会映射到 Java 中的 object.foo() 吗？

是的，但它取决于本机声明，它不必是该 java 类的 Java 实例方法，也可以是静态方法或另一个类的方法，或者只是成员访问等。

> 特别是，如果一个类方法被声明为原生的，如果我选择，我仍然可以为它提供一些其他的实现吗？

当然，就像任何其他默认类方法一样。假设默认类方法是使用模式防护实现的，这并不意味着您必须在实现中使用模式防护。

看，

```
native [pure] foo "javaspec" :: a -> b -> c 
```

只是意味着：请为我创建一个`foo`a -> b -> c 类型的 frege 函数，该函数恰好使用*javaspec*进行实现。（具体应该如何在语言参考的第 6 章中描述。还没有完成。抱歉。）例如：

```
native pure int2long "(long)" :: Int -> Long 
```

编译器将看到这在语法上是一个强制转换操作，当它看到时：

```
 ... int2long val ... 
```

它将生成java代码，如：

```
((long)(unbox(val)) 
```

除此之外，它还将制作一个包装器，以便您可以，例如：

```
map int2long [1,2,4] 
```

关键是，如果我告诉你：有一个函数 XYz，如果不查看源代码，你将无法判断它是原生函数还是常规函数。因此，`native`这是将 Java 方法、运算符等提升到 Frege 领域的方法。实际上，在 Haskell 中称为“primOp”的所有内容都只是 Frege 中的本机函数。例如，

```
pure native + :: Int -> Int -> Int 
```

（当然，这并不总是那么容易。）

> 每个类型 [constructor] 都是一个命名空间。我知道这对臭名昭著的命名字段问题有什么帮助。我不确定你为什么要在这个命名空间的范围内声明其他东西......

它使您可以对顶级命名空间进行更多控制。除此之外，您不必*在那里*定义其他内容。一旦我致力于这种简单的方法来解决记录字段问题，我只是没有看到禁止它的理由。

# android - 崩溃android ViewPager +相机

> ID：10530742
> 
> 赞同：1
> 
> 时间：2012-05-10T09:03:44.843
> 
> 标签：android, camera, android-viewpager

在我的应用程序中，我使用`ViewPager`. 我创建了几个空白页。在页面预览`ViewPager`上放置相机，如 development.android.com 中所述。但是当我尝试运行应用程序时它失败了。如何解决这个问题呢 ？

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
private SurfaceHolder mHolder;
private Camera mCamera;

public CameraPreview(Context context, Camera camera) {
    super(context);
    mCamera = camera;

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    // deprecated setting, but required on Android versions prior to 3.0
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();
    } catch (IOException e) {
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // empty. Take care of releasing the Camera preview in your activity.
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.

    if (mHolder.getSurface() == null){
      // preview surface does not exist
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e){
      // ignore: tried to stop a non-existent preview
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here

    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e){
    }
}
} 
```

主要活动：

```
public class CamActivity extends Activity {
private List<View> mPages;
    private View mPage1;
    private View mPage2;
    private View mPage3;

    private Camera mCamera;
    private CameraPreview mPreview;
    private FrameLayout preview;

    private ViewPager mPager;
    private TitlePageIndicator mTitleIndicator;

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       initUi();

       mCamera = getCameraInstance();

       mPreview = new CameraPreview(this, mCamera);

   }

   public static Camera getCameraInstance(){
       Camera c = null;
       try {
           c = Camera.open(); // attempt to get a Camera instance
       }
       catch (Exception e){
           // Camera is not available (in use or does not exist)
       }
       return c; // returns null if camera is unavailable
   }

   private void initUi() {
       LayoutInflater inflater = LayoutInflater.from(this);
       mPages = new ArrayList<View>();

       mPage1 = inflater.inflate(R.layout.page1, null);
       mPage1.setTag(getString(R.string.capture));

       mPage2 = inflater.inflate(R.layout.page2, null);
       mPage2.setTag(getString(R.string.text2));

       mPage3 = inflater.inflate(R.layout.page3, null);
       mPage3.setTag(getString(R.string.text3));

       mPages.add(mPage1);
       mPages.add(mPage2);
       mPages.add(mPage3);

       MainPageAdapter adapter = new MainPageAdapter(mPages);
       mPager = (ViewPager) findViewById(R.id.viewpager);
       mPager.setAdapter(adapter);
       mPager.setCurrentItem(0);

       mTitleIndicator = (TitlePageIndicator) findViewById(R.id.indicator);
       mTitleIndicator.setViewPager(mPager);
       mTitleIndicator.setCurrentItem(0);

       mTitleIndicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {

        public void onPageSelected(int position) {
            Toast.makeText(CamActivity.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
            if(position == 0) {
                preview = (FrameLayout) findViewById(R.id.camera_preview);
                preview.addView(mPreview);
            }
        }

        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        public void onPageScrollStateChanged(int state) {
        }
    });
}
} 
```

DDMS 输出：

```
05-10 09:15:44.696: D/dalvikvm(1135): GC_EXTERNAL_ALLOC freed 55K, 51% free 2682K/5379K,   external 1541K/1559K, paused 775ms
05-10 09:15:47.746: D/gralloc_goldfish(1135): Emulator without GPU emulation detected.
05-10 09:19:54.329: D/AndroidRuntime(1135): Shutting down VM
05-10 09:19:54.329: W/dalvikvm(1135): threadid=1: thread exiting with uncaught exception (group=0xb68ad4f0)
05-10 09:19:54.410: E/AndroidRuntime(1135): FATAL EXCEPTION: main
05-10 09:19:54.410: E/AndroidRuntime(1135): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.addView(ViewGroup.java:1871)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.addView(ViewGroup.java:1828)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.addView(ViewGroup.java:1808)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.app.cam.CamActivity$1.onPageSelected(CamActivity.java:97)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.viewpagerindicator.TitlePageIndicator.onPageSelected(TitlePageIndicator.java:709)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:438)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.support.v4.view.ViewPager.onTouchEvent(ViewPager.java:1527)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.View.dispatchTouchEvent(View.java:3885)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at  android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.os.Looper.loop(Looper.java:130)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at java.lang.reflect.Method.invokeNative(Native Method)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at java.lang.reflect.Method.invoke(Method.java:507)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-10 09:19:54.410: E/AndroidRuntime(1135):     at dalvik.system.NativeStart.main(Native Method)
05-10 09:20:02.030: I/Process(1135): Sending signal. PID: 1135 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:44:18.490

尝试通过添加一个额外的参数来改变你的调用 inflate ：

```
mPage1 = inflater.inflate(R.layout.page1, null, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:27:27.200

```
if(position == 0) {
     preview = (FrameLayout) findViewById(R.id.camera_preview);
     preview.addView(mPreview);
} 
```

在这里，您试图一遍又一遍地添加您的 mPreview 视图，而 logcat 中的 java 显然表示您不能这样做......

因此，在尝试再次添加之前尝试删除它：

```
if(position == 0) {
     preview = (FrameLayout) findViewById(R.id.camera_preview);
     if(preview.getChildCount() > 0)
         preview.removeAllViews();
     preview.addView(mPreview);

} 
```

# android - 点击 AdMob 广告后退按钮后的 Android 未返回正确的 Acitvity

> ID：10530743
> 
> 赞同：1
> 
> 时间：2012-05-10T09:03:53.873
> 
> 标签：android

我有一个带有“主菜单”活动的应用程序。用户可以从那里转到 Activity1 或 Activity2。在 Activity1 中以编程方式加载 AdMob 广告，在 Activity2 中它们是从 xml 文件中自动加载的。问题是，当我点击后退按钮时，点击广告并在 Activity1 中加载它后，我返回到主菜单而不是 Activity1。在 Activity2 中返回工作正常。这是为什么？Activity1 中与广告相关的代码：

```
public class Activity1 extends Activity implements OnClickListener, AdListener{
    AdView ads;

    public void onReceiveAd(Ad ad) {}
    public void onFailedToReceiveAd(Ad ad, AdRequest.ErrorCode error){}

    public void onPresentScreen(Ad ad){}
    public void onDismissScreen(Ad ad){}
    public void onLeaveApplication(Ad ad){}
    ...

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
        ads.setAdListener(this);
        ads.loadAd(new AdRequest());
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
        ads = (AdView) findViewById(R.id.adView);
        ads.setAdListener(this);
        ads.loadAd(new AdRequest());
    }
} 
```

# sql - 为什么查询要求参数值？

> ID：10530744
> 
> 赞同：1
> 
> 时间：2012-05-10T09:04:05.667
> 
> 标签：sql, ms-access-2010

我为 MS Access 编写了 SQL 代码。

**除 12345 之外的所有值都是文本 (VARCHAR)。**

```
INSERT INTO TABLE
VALUES (12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

当我执行它时，它要求所有文本字段的参数。

我该如何克服这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:14:25.137

错误信息到底是什么？

```
INSERT INTO TABLE
VALUES (12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

仅当您提供的值的数量等于表中的字段数时才能成功执行，您可以不指明字段名称。

但是，如果您的值数不等于表上的字段数，那么您必须指定要将值放入哪个特定字段名。

```
INSERT INTO table (field1,field2,field3,field4,field5,field6,field7,field8)
VALUES (12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

如果您有 9 个字段并且您不想包含第 9 个字段，则将其设置为 NULL，或者如果您的第 9 个字段可能是唯一编号，则将其设置为自动增量，您不必输入字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:33:04.970

您需要在查询中指定列的名称：

```
INSERT INTO TABLE (col1, col2, clo3, .., col8)VALUES 
(12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:42:55.307

由于您只插入 8 个值，因此您的插入语句需要进行小改动。你的表中有 9 个值。

假设您没有将值插入表的最后一列，那么语句应该是这样的

```
INSERT INTO TABLE
VALUES (12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689',null) 
```

如果它是第一列

```
INSERT INTO TABLE
VALUES (null,12345, 'Mary', 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

只需将 null 放在您未插入的第 n 个位置，例如它比 3 列

```
INSERT INTO TABLE
VALUES (12345, 'Mary', null, 'Jones', '123 George St', 'Canberra', 'ACT', '1000', '0298754689') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:08:39.830

查询中缺少字段名称。

```
Insert into <TableName> (Fieldsname)
Values (values) 
```

[http://msdn.microsoft.com/en-us/library/bb208861(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/bb208861(v=office.12).aspx)

# jquery - 将子元素从一个列表项复制到另一个

> ID：10530745
> 
> 赞同：0
> 
> 时间：2012-05-10T09:04:10.440
> 
> 标签：jquery

我有两个清单。一个无序列表和一组充当列表的 div。无序列表有 4 个列表项，也有 4 个 div。

我想要实现的是从每个 div 复制标题并将其放在每个列表项中。换句话说，第一个 div 的标题应该对应于第一个列表项的标题。

到目前为止，我所能实现的只是循环遍历 div 并提醒我要复制的标题，如下所示，但我不知道如何继续。

```
<div class="container">
    <div class="nav-list">
        <ul>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
     </div>
    <div class="tab-list">
        <div class="tab-item">
            <h3>To be copied</h3>
        </div>
        <div class="tab-item">
            <h3>To be copied</h3>
        </div>
        <div class="tab-item">
            <h3>To be copied</h3>
        </div>
        <div class="tab-item">
            <h3>To be copied</h3>
        </div>
    </div>
</div>

$('.tab-list .tab-item').each(function(index) {
    alert(index + ': ' + $(this).children('h3').text());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:10:49.980

尝试这个：

```
$('.tab-list .tab-item').each(function(index) {
    $('.nav-list').children('ul').children().eq(index).html($(this).children('h3').text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:13:06.470

尝试这个：

```
$('.tab-list .tab-item').find('h3').each(function(index) {
    that = $(this).text();
    $('li').eq(index).text(that + $('li').eq(index).text())
}); 
```

[http://jsfiddle.net/kuFDT/3/](http://jsfiddle.net/kuFDT/3/)

您还可以克隆`h3`标签而不是复制它们的文本：

```
$('.tab-list .tab-item').find('h3').each(function(index) {
    that = $(this).clone();
    $('li').eq(index).before(that)
}); 
```

[http://jsfiddle.net/kuFDT/14/](http://jsfiddle.net/kuFDT/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:09:51.003

这个小提琴应该可以解决问题：http: [//jsfiddle.net/pndCd/](http://jsfiddle.net/pndCd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:09:58.540

尝试这个：

```
var list = $('.nav-list li');
$('.tab-list .tab-item').each(function(i) {
    list.eq(i).text($(this).find('h3').text())
}); 
```

见[http://jsfiddle.net/EDpM7/](http://jsfiddle.net/EDpM7/)

# php - php文件上传警告信息

> ID：10530750
> 
> 赞同：0
> 
> 时间：2012-05-10T09:04:26.603
> 
> 标签：php, file-upload, php-ini

我需要上传一个视频文件。这是我的代码

```
 if(($_FILES["file"]["type"]=="application/octet-stream") || ($_FILES["file"]["type"]=="video/x-ms-wmv"))
          {
        if($_FILES["file"]["error"] > 0)
          {
          echo "Error: ".$_FILES["file"]["error"]."<br />";

          }
        else if(file_exists("videos/" . $_FILES["file"]["name"]))
              {
              echo $_FILES["file"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["file"]["tmp_name"],"videos/".$_FILES["file"]["name"]);

        $filename=$_FILES["file"]["name"];  
        $type=$_FILES["file"]["type"];
        $size=($_FILES["file"]["size"]/1024);
        $path="".$_FILES["file"]["name"];
       if(($ins=mysql_query("insert into achieva_video values('','".$_REQUEST['vname']."','".$_REQUEST['courid']."','".$filename."','".$path."','".$size."','".$type."','Active')"))==true)
        {
            header("location:viewcoursevideo.php?ins=1");
        }  
        else
        {
            echo("<script>alert('Failure Please try again later');</script>");
        }
     }
          }

    else
     {
      echo "<script>alert('Invalid File Type');</script>)";

     } 
```

当我尝试上传视频文件时，我对这条警告消息感到有些困惑。

```
"PHP Warning:  POST Content-Length of 9311816 bytes exceeds the limit of 8388608 bytes in Unknown on line 0" 
```

> 我在 php ini 中设置了以下首选项：

```
 memory limit = 150M
  upload file size = 120M 
  post max size = 120M 
```

该文件尚未更新。这需要很长时间，只是显示这个警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:36:53.767

消息似乎很清楚：您将上传限制设置为 8M（8388608 字节），并且您正在上传 9M（9311816 字节）的文件。您真的确定 php.ini 中的这些设置有效吗？

```
 memory limit = 150M
 upload file size = 120M 
 post max size = 120M 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:40:13.110

不应该是这样吗？（下划线，最大值！）

```
memory_limit = 150M
upload_max_filesize = 120M
post_max_size = 120M 
```

# c++ - boost::asio::io_service 优先级如何工作？

> ID：10530751
> 
> 赞同：8
> 
> 时间：2012-05-10T09:04:38.833
> 
> 标签：c++, sockets, boost, boost-asio

我`boost::asio::io_service`用来管理一些异步 TCP 通信。这意味着我创建一个`boost::asio::ip::tcp::socket`并给予`io_service`它。当我开始通信时，它的示意图如下：

`Async Resolve -> Callback -> Async Connect -> Callback -> Async Write -> Callback -> Async Read`

我省略了解析和绑定等部分。假设 Socket 已经绑定到一个端口并且主机名被解析（所以 connect 意味着建立到端点的真实连接）

现在的重点是我可以用同一个`io_service`对象启动多个异步连接。这意味着，例如，虽然在我的`io_service`线程中程序即将获取`Async Write`一些数据，但主线程将调用`Async Resolve`on Socket （但使用相同的`io_service`）。这意味着我`io_service`现在有一些并行工作要做 - 我想知道它将如何优先处理工作？

例如它是这样的

```
Main Thread              |      io_service Thread
-------------------------+-----------------------------------------------
SocketA->Async Connect   |
//Some other Stuff       |     SocketA->Callback from Async Connect
                         |     SocketA->Async Write
SocketB->Async Connect   |      
                         |     --> ? 
```

现在在这一点上，我不得不承认我不太确定它是如何`io_service`工作的。在第四行中，现在需要执行两个不同的异步函数。

是否`io_service`能够`Async Connect`同时`Async Write`进行？如果是这种情况，很明显总是会调用首先完成的函数的回调。

如果`io_service`没有能力这样做，它将按什么顺序完成工作**？**如果`SocketA Async Write`将首先调用，它的回调也将首先被调用。实际上，在 SocketA 上的整个操作完成之前，总会有工作。

**编辑 ：**

根据 ereOns 的评论，我试图让我的问题更加准确：

从`io_service`线程的角度来看——`SocketA Async Connect`调用是异步的还是同步的？从我的主线程的角度来看，它当然是异步的（它只是调度命令然后继续）。但是在`io_service`线程中这个特定的`Connect`调用会阻塞其他操作吗？

换句话说：一个`io_service`人在读取另一个套接字时是否能够连接到一个套接字？

另一个例子是，如果我`Async Connect`在我的 main 函数中一个接一个地调用 2：

```
SocketA->AsyncConnect();
SocketB->AsyncConnect(); 
```

假设来自 SocketA 的主机有点慢，需要两秒钟才能回答。因此，当 SocketA 尝试连接时，SocketB 会同时连接还是必须等到 SocketA 完成/超时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T12:09:58.367

所有工作都在`io_service.run()`运行的线程中完成。

但是，对任何`async_`方法的调用**都不会**`io_service.run()`阻塞这个特定线程：它的行为与在多个事件上调用时完全一样`select()`，并且每当引发此类事件时都会“返回”（调用回调）。也就是说，如果你打电话：

```
socketA->async_connect();
socketB->async_connect(); 
```

`socketB`还不如先连接，`socketA`然后首先调用关联的回调，仍然在线程`io_service.run()`运行中。

这就是 Boost Asio 的全部优点：它会在更合适的时候非常小心地处理轮询、等待和引发事件，从而为您留下“简单”的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T13:05:02.270

您不应该在这里尝试预测异步操作的执行顺序。`async_connect`只需发出信号`io_service`并立即返回。真正的工作是在`io_service`对象的事件处理循环 ( `io_service::run`) 中完成的，但您不知道确切的细节。它很可能使用特定于操作系统的异步 IO 功能。

目前尚不清楚您要达到的目标。也许你应该使用同步操作。也许您应该使用线程同步功能。也许`io_service::run_one`会帮助你（它最多执行一个处理程序）。

也许你会想`io_service::run`在不同的线程中多次调用，创建一个线程池。这样一个长完成处理程序就不会阻塞所有其他处理程序。

```
boost::asio::io_service service;
const size_t ASIO_THREAD_COUNT = 3;
boost::thread_group threadGroup;
for (size_t i = 0; i < ASIO_THREAD_COUNT; ++i)
        threadGroup.create_thread(boost::bind(&boost::asio::io_service::run,
            &service, boost::system::error_code())); 
```

# javascript - 在窗口调整大小时重新计算表格高度

> ID：10530756
> 
> 赞同：0
> 
> 时间：2012-05-10T09:04:49.773
> 
> 标签：javascript, jquery, html, css

我有这个功能可以做 3 件事：

*   tr悬停
*   专注于显示在同一行的两个单独的表格
*   从第一个表计算 tr 高度，并将第二个表的高度设置为 tr 。

* * *

```
<script>
$(function() {
    var rows = $('.interactive tr');
    rows.click(function () {
        var i = $(this).GetIndex() + 1; // nth-child is 1-based
        rows.removeClass('selectedRow');
        rows.filter(':nth-child(' + i + ')').addClass('selectedRow');
    });

    rows.hover(function(){
        var i = $(this).GetIndex() + 1;
        rows.filter(':nth-child(' + i + ')').addClass('hoverx');
    },function(){         
        rows.removeClass('hoverx');
    });

    $("table:first tr").each(function(i) {
        $("table:last tr").eq(i).height($(this).height());
    });
});

jQuery.fn.GetIndex = function(){
    return $(this).parent().children().index($(this));
}
</script> 
```

这个函数很好用，但是**在调整浏览器大小时**我遇到了问题，因为该函数没有重新计算 tr 高度。

这破坏了所有的桌子设计。

谁能帮我解决这个问题：如何在调整浏览器大小时从第一个表重新计算 tr 高度并从第二个表设置为 tr。

这是`fiddle example:` [http://jsfiddle.net/Ksb2W/59/](http://jsfiddle.net/Ksb2W/59/)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:53:14.907

您需要将高度计算放在一个调整大小函数中，同时保持您拥有的那个，这样它就可以完成加载或移动到调整大小函数之前的工作

```
$(document).ready(function(){
    $(window).resize(function() {
        // get first table tr height
        // apply to second table tr height
    });
}); 
```

你可以看到这里调用了调整大小 [http://jsfiddle.net/Ksb2W/103/](http://jsfiddle.net/Ksb2W/103/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:26:49.547

这不是一个完整的答案，但有几件事需要检查，可能会让你到达你要去的地方。

*   暂时放入一个按钮或其他会调用您的调整大小功能的东西。然后调整窗口大小，然后调用函数。这将告诉您问题是在使用`$(window).resize`函数本身还是在函数本身中触发函数。

*   如果问题出在函数本身，则可能是您的某些问题出在浏览器缓存中。尝试调用 .hide() 然后调用 .show() 。

# javascript - 如何驱动开关/旋转按钮来切换使用 Javascript 显示的内容

> ID：10530759
> 
> 赞同：0
> 
> 时间：2012-05-10T09:04:56.760
> 
> 标签：javascript, button, toggle

我正在尝试构建一个控件，用户可以在其中处理左右按钮以更改 inline 的显示内容。我把 html 部分放在这里：http: [//jsfiddle.net/Argoron/E5MsU/](http://jsfiddle.net/Argoron/E5MsU/) 这个想法是，当用户单击左键或右键时，显示的内容会在可用列表中循环

*   s，一次显示一个。列表项的数量和内容将是动态的。

    我不确定如何处理 javascipt 部分。有人可以指出我正确的方向吗？

    提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:17:47.677

这样的事情可能是一个开始。

您需要检查一下您是在列表的开头还是结尾，但希望您能理解。如果您有任何问题，请告诉我

[http://jsfiddle.net/leereichardt/E5MsU/1/](http://jsfiddle.net/leereichardt/E5MsU/1/)

# android - Android：停止在方向更改时重新创建活动

> ID：10530760
> 
> 赞同：20
> 
> 时间：2012-05-10T09:05:00.050
> 
> 标签：android, android-activity, oncreate, onconfigurationchanged

我的 main.xml 布局中有一个带有两个按钮的列表视图。单击一个按钮后，我将动态创建一个文本视图并将其添加到屏幕底部以确认用户交互。当用户单击第二个按钮（确认按钮）时，我需要将该文本添加到列表视图。为了支持横向模式，我在 layout-land 文件夹中有相同的布局文件。当我单击第一个按钮时，它正在创建一个带有一些文本的文本视图并在屏幕底部添加。现在，如果更改设备方向，则它正在加载景观 main.xml 并且活动正在重新创建。所以我的文本视图正在崩溃。我怎样才能防止在方向改变时重新进行活动。（但它应该选择其他布局文件）。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-10T09:12:02.110

只需在 androidmanifest.xml 中编辑 Activity Tag。

```
<activity
            android:configChanges="keyboardHidden|orientation"
            android:name=".testActivity"
            android:label="@string/app_name"></activity> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-25T11:35:30.313

您应该添加***screenSize***

如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

**在 API 级别 13 中添加。**

那么它应该是这样的

```
<activity
                android:configChanges="keyboardHidden|orientation|screenSize"
                android:name=".testActivity"
                android:label="@string/app_name"></activity> 
```

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

# c# - 如何在多个音轨之间进行选择，将 RenderFile 用于我的 Filtergraph 构造？

> ID：10530765
> 
> 赞同：1
> 
> 时间：2012-05-10T09:05:13.503
> 
> 标签：c#, .net, directshow, directshow.net

我正在用 C# 开发一个应用程序，我正在使用 DirectShow.NET 库来呈现具有多个音轨的 .AVI 文件

如何在多个音轨之间切换？我正在使用 RenderFile 来构建我的过滤器图，而不是手动构建它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:10:14.543

如果支持在音轨之间切换，管道中的过滤器之一（多路分解过滤器）将公开[`IAMStreamSelect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319793%28v=vs.85%29.aspx)接口，您可以使用它来切换音轨。

> 该`IAMStreamSelect`接口从解析器过滤器上的可用流中进行选择。例如，一个文件可能包含以多种语言（如英语、德语和法语）编码的音频流。应用程序可以使用此界面来选择播放哪种语言。

您可以使用`ICaptureGraphBuilder2::FindInterface`方法在您的过滤器图中快速定位接口。

# javascript - 无法识别 Mozilla Firefox 中的右键单击事件

> ID：10530769
> 
> 赞同：3
> 
> 时间：2012-05-10T09:05:21.733
> 
> 标签：javascript, jquery

我正在尝试为右键单击事件添加一些行为。奇怪的是，我根本无法使事件处理工作。

这是 jQuery 代码：

```
$('body').on('click', '#wrapper', null, function(ev){
    if (ev.which === 2 || ev.which === 3){
        alert("Here!");
    }
}); 
```

我认为该事件已被触发，但无法识别为“右键单击”。永远不会显示警报消息。我究竟做错了什么？谢谢！

*LE：我可以用 来识别左击事件`ev.which === 1`。所以那里没有问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:24:52.150

而不是`click`使用`mousedown`：

```
$('body').on('mousedown', '#wrapper', null, function(ev){
    if (ev.which === 2 || ev.which === 3){
        alert("Here!");
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:27:11.370

使用 javascript 你可以试试这个

```
document.onmousedown = ListenMouseClick
document.onmouseup = ListenMouseClick

function ListenMouseClick() 
{
if (window.event.button==2 )
    {
        alert('right click')
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:27:57.673

轻松使用三元运算符和 ' `mousedown`' 或 ' `contextmenu`'

[http://jsfiddle.net/49Ldy/](http://jsfiddle.net/49Ldy/)

```
$('body').on('mousedown','#wrapper',function(ev){
   var evt = ev.which === 3 ? alert('rightClick') : alert('someOtherButton');
}); 
```

或者：

```
$('body').on('mousedown','#wrapper',function(ev){
    var evt = ev.which === 3 ? alert('rightClick') : (ev.which === 2 ? alert('auxClick') : alert('someOtherButton'));
}); 
```

或者：

```
$('body').on('contextmenu','#wrapper',function(){
    alert('rightClick');
    return false;
}); 
```

# c# - 空堆栈跟踪。可能的？

> ID：10530772
> 
> 赞同：4
> 
> 时间：2012-05-10T09:05:45.323
> 
> 标签：c#, stack-trace

是否存在堆栈跟踪可以完全为空的情况？我收到了一个从机器事件属性复制的事件日志文本，其中包含以下内容：

> > **说明**：发生未处理的异常，进程已终止。
> > 
> > **应用程序 ID**：默认域
> > 
> > **进程 ID**：123
> > 
> > **异常**：System.OutOfMemoryException
> > 
> > **消息**：引发了“System.OutOfMemoryException”类型的异常。
> > 
> > **堆栈跟踪**：
> > 
> > [有关详细信息，请参阅http://go.microsoft.com/fwlink/events.asp](http://go.microsoft.com/fwlink/events.asp)上的帮助和支持中心。

堆栈跟踪对我来说看起来很可疑。我在论坛和文档上搜索了很多 - Stack Trace 没有任何内容是空的。只有 MSDN 提到“*由于优化期间发生的代码转换（例如内联），StackTrace 属性可能不会像预期的那样报告尽可能多的方法调用。* ”但根本没有任何方法调用报告。

在我联系确认之前，我需要确定一下，因为这是一个多层次的沟通，需要时间来回复。

对我怀疑堆栈跟踪不能为空的任何更正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:16:58.353

要在事件日志中创建消息，`Exception.StackTrace`必须检索字符串属性。计算此属性的值涉及创建一个**新** `StackTrace`对象。如果应用程序内存不足，这可能是不可能的，因为分配失败。这可以解释为什么缺少堆栈跟踪。

当应用程序内存不足时，甚至像日志记录这样的错误处理也可能由于缺乏资源而失败。在您的情况下，您至少知道触发失败是内存不足的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:09:54.530

有时，调用堆栈本身可能是 OOM 的原因（调用堆栈中太多）。

所以......你看到了问题。

或者堆可能已经耗尽，或者......或者，请参阅@Oded 评论！

# ssl - 验证证书冗余中间体

> ID：10530774
> 
> 赞同：1
> 
> 时间：2012-05-10T09:05:54.590
> 
> 标签：ssl, openssl

我有一个客户希望对其证书进行非常严格的验证。

我建议他们使用“openssl verify”，但似乎这不像“s_client”那么严格。

例如：假设我有一个中间链 A、B、C（其中 A 是站点，C 指向根目录，B 是中间节点），但是一些根本没有连接的中间节点会渗透到证书中。让我们称之为 X - 证书现在包含 A、B、X、C。

s_client 将失败，而 verify 不会。我还检查了一些在线服务——大多数都不会失败。例如， [digicert](http://www.digicert.com/help/)将失败 - 说明链已损坏。

我尝试寻找一个 openssl 验证标志，我什至尝试运行 s_server 然后使用 s_client 验证无济于事。

有没有办法对此进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T17:14:03.180

使用 gnutls 包中的“certtool”，而不是 openssl。

好链条：

```
$ cat A B C | certtool -e
Certificate[0]: <subject for A>
    Issued by: <subject for B>
    Verifying against certificate[1].
    Verification output: Verified.

Certificate[1]: <subject for B>
    Issued by: <subject for C>
    Verifying against certificate[2].
    Verification output: Verified.

Certificate[2]: <subject for C>
    Issued by: <subject for C>
    Verification output: Verified.

Chain verification output: Verified. 
```

坏链：

```
$ cat A B X C | certtool -e
Certificate[0]: <subject for A>
    Issued by: <subject for B>
    Verifying against certificate[1].
    Verification output: Verified.

Certificate[1]: <subject for B>
    Issued by: <subject for C>
    Verifying against certificate[2].
Error: Issuer's name: <subject for X>
certtool: issuer name does not match the next certificate 
```

# c# - 是否有 ac# lib 可以将数据拟合到正态分布？

> ID：10530777
> 
> 赞同：1
> 
> 时间：2012-05-10T09:06:12.957
> 
> 标签：c#, math, normal-distribution

我发现了一个[类似的问题](https://stackoverflow.com/questions/7504278/are-there-any-libraries-in-c-sharp-that-can-fit-the-data-to-normal-distribution)，但没有确切的答案。

我需要的是一个真实世界的数据集：`List<double>`并假设它符合正态分布。我需要得到分布（平均值和 sdv）。我正在使用[math.net](http://www.mathdotnet.com/)来计算我的应用程序中的数据。math.net 可以做到这一点以及如何做到这一点？或者是否有任何其他 C# 库可以做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T04:05:12.230

[维基百科](http://en.wikipedia.org/wiki/Normal_distribution#Estimation_of_parameters)为您提供了计算正态分布参数估计值的公式。表达式很简单，因此您实际上不需要任何第三方库来执行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T04:33:04.993

我在 CenterSpace NMath 团队。我们使用稳健的信任域最小化器来解决这个非线性拟合问题。根据您的数据，您可以使用维基百科上详细记录的更广泛可访问[的 Levenberg-Marquardt最小化算法来执行此操作。](http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm)

[http://www.centerspace.net/distribution-fitting-demo/](http://www.centerspace.net/distribution-fitting-demo/)

不，我们的图书馆不是免费的……但是这段代码可能会给你一些想法。

最好的，

保罗

# android - Androidplot：Increment_by_vals

> ID：10530780
> 
> 赞同：1
> 
> 时间：2012-05-10T09:06:31.653
> 
> 标签：android, graph, charts, androidplot

我正在使用 Androidplot 创建我的图表。

我想使用

```
oneChart.setDomainStep(XYStepMode.INCREMENT_BY_VAL, 1); 
```

命令，但每次我运行我的应用程序并想绘制图表时，应用程序在黑屏后崩溃。如何解决这个问题？

logcat 中不会抛出异常或错误。

如果我使用`SUBDIVIDE`一切正常。

更多代码：

```
XYPlot oneChart = (XYPlot) findViewById(R.id.oneChart);
XYSeries[] series = new SimpleXYSeries(
                Arrays.asList(nX), 
                Arrays.asList(nY),
                getTitle);
    oneChart.disableAllMarkup();
            oneChart.getGraphWidget().setMarginTop(10);
            oneChart.getGraphWidget().setMarginRight(30);
            oneChart.getGraphWidget().getGridBackgroundPaint().setColor(Color.LTGRAY);
            oneChart.getGraphWidget().getGridLinePaint().setColor(Color.BLACK);
            oneChart.getGraphWidget().getDomainOriginLinePaint().setColor(Color.BLACK);
            oneChart.getGraphWidget().getRangeOriginLinePaint().setColor(Color.BLACK);
            oneChart.getGraphWidget().getGridLinePaint().setPathEffect(new DashPathEffect(new float[]{1,1}, 1));        
            oneChart.getBorderPaint().setStrokeWidth(1);
            oneChart.getBorderPaint().setAntiAlias(true);
            oneChart.getBorderPaint().setColor(Color.LTGRAY);

        LineAndPointFormatter seriesFormat = new LineAndPointFormatter(
                Color.rgb(0, 0, 200), // line color
                Color.rgb(0, 0, 100), // point color
                Color.rgb(100, 100, 240)); // fill color (optional)
        Paint lineFill = new Paint();
    lineFill.setAlpha(200);        
    lineFill.setShader(new LinearGradient(0, 0, 0, 250, Color.WHITE, Color.BLUE, Shader.TileMode.CLAMP));
        seriesFormat.setFillPaint(lineFill);
    oneChart.addSeries(series, seriesFormat); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:29:22.610

那条线似乎是正确的。我已经测试过了。为我们提供更多代码。

编辑：我已经使用一些随机值测试了您的代码，包括行`oneChart.setDomainStep(XYStepMode.INCREMENT_BY_VAL, 1);`.

一切似乎都很好。除了我改变的那件事

```
XYSeries[] series = new SimpleXYSeries( 
```

到

```
SimpleXYSeries series = new SimpleXYSeries ( 
```

![绘图图像](../Images/b26a8bd512494f5c7e0d7b10a7105a07.png)

这是**main.xml**布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="#FFFFFF">

<com.androidplot.xy.XYPlot android:id="@+id/oneChart"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:layout_marginTop="0px" android:layout_marginLeft="0px"
    android:layout_marginRight="0px" title="My Plot" />
</LinearLayout> 
```

PSSorry 迟到的回复。

# android - 在主屏幕小部件上使用画布绘制

> ID：10530781
> 
> 赞同：3
> 
> 时间：2012-05-10T09:06:38.427
> 
> 标签：android, android-widget, bitmap, imageview, android-canvas

我想要的输出：

带有自定义字体的小部件（主屏幕小部件）上的文本

我的问题：

*   不能在小部件的 textview 上使用自定义字体（因为 TextView 不能在小部件中直接访问，我们必须使用远程视图来使用它们。）

所以我想使用imageview并使用画布在位图上绘制文本，然后在imageview上设置这个位图。到目前为止，一切正常，但只有两件事。

我不知道，

*   如何使我的文本在中心垂直和水平设置？（垂直和水平意味着，垂直和水平都在中心）

*   如何使我的文本填满位图的整个空间？

我正在使用以下代码在小部件上显示一些文本。

```
Bitmap bitmap = Bitmap.createBitmap(200, 200, Config.ARGB_8888);

Canvas canvas = new Canvas(bitmap);

Paint paint = new Paint();

paint.setColor(Color.YELLOW);
canvas.drawPaint(paint);

paint.setColor(Color.GREEN);
paint.setStyle(Style.FILL);

canvas.drawText("Test", 50, 50, paint); 
```

以下是输出。 ![在此处输入图像描述](../Images/7d420b344ffc5f26f5952e247ab6122c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:12:13.380

1- 在小部件的 textview 上设置字体运行时

```
I dont know that either 
```

2-将文本设置为居中并填充容器

```
Please see the following code:

 float size = 1.0f;

 Bitmap bitmap = Bitmap.createBitmap(200, 200, Config.ARGB_8888);

 Canvas canvas = new Canvas(bitmap);

 Paint paint = new Paint();

 paint.setColor(Color.YELLOW);
 canvas.drawPaint(paint);

 paint.setColor(Color.GREEN);
 paint.setStyle(Style.FILL);

 Rect rect = new Rect();
 paint.getTextBounds("Test", 0, 4, rect);

 float width = 1.0f;

 while (width<200 && rect.height()<200)
 {
  size++;
  paint.setTextSize(size);

  width = paint.measureText("Test");
  paint.getTextBounds("Test", 0, 4, rect);

 }

 size--;
 paint.setTextSize(size);

 canvas.drawText("Test", 100-width/2, 100+rect.height()/2, paint); 
```

我试图附上屏幕截图，但它不允许我添加，因为我是新用户。（菜鸟：P）

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:30:33.893

1.  无法在小部件的 textview 上使用自定义字体

    ```
    TextView tv=(TextView)findViewById(R.id.custom);
    Typeface face=Typeface.createFromAsset(getAssets(),"fonts/Verdana.ttf");
    tv.setTypeface(face); 
    ```

    如果您想在画布中使用相同的内容，则将面设置为绘制您使用的 obj。

2.  如何使我的文本在中心垂直和水平设置？

3.  在画布中作为您的绘图文本通过paint obj。然后你可以设置paint obj

    ```
    mPaint.setTextAlign(Align.CENTER); 
    ```

或者您可以向左或向右放置。您不能垂直或水平设置，因为您绘制文本，因此您可以垂直或水平绘制所需的内容。

例如，您需要绘制文本 SAM

1.  水平表示 canvas.drawText("SAM", 50, 50, paint);

2.  真正的意思

    ```
     canvas.drawText("S", 50, 50, paint);
           canvas.drawText("A", 50, 51, paint);
           canvas.drawText("M", 50, 52, paint); 
    ```

    注意：那么您可能会认为 mPaint.setTextAlign(Align.CENTER) 是右还是左。例如，如果您的宽度为 100 并且您开始从 20 像素到 50 像素进行书写，则意味着它会尝试将其保持在 20 到 50 像素的中心。不在中心宽度为 100 像素。

3.  如何使我的文本填满位图的整个空间？

你不会在这里找到任何包装内容，因为在 Canvas 中我们必须自己。

所以首先检查你有多少空间并填充给定的 x 和 y 值，并预先更改文本大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:31:02.600

你好为什么你不能在 TextView 上使用自定义字体：我认为你可以只继承 TextView 并添加三个默认文本视图构造函数

```
 if (!isInEditMode()) {
              Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/ds_digib.ttf");
              setTypeface(tf);
    } 
```

使您的文本垂直和水平设置

看到这个[链接](http://www.pocketmagic.net/?p=1625)

![在此处输入图像描述](../Images/bd6065fededa62b413968b2ca4b9ee90.png)

希望这可以帮助您解决问题

# d3.js - 使用 D3.js 动态更新树形图元素

> ID：10530789
> 
> 赞同：0
> 
> 时间：2012-05-10T09:07:16.680
> 
> 标签：d3.js, treemap

我正在尝试使用 D3.js 和以下示例实现树形图：http: [//mbostock.github.com/d3/ex/treemap.html](http://mbostock.github.com/d3/ex/treemap.html)

到目前为止，它工作得很好。

我的问题是，如果我想使用转换为一组全新的数据刷新树形图项，我做不到。如果我重新初始化树图对象，我只能这样做。

我们举一个简单的例子：

数据集 1：产品 1、产品 2、产品 3……数据集 2：LOC1、LOC2、LOC3、LOC4……

我想在两个数据集之间切换时有一个过渡动画，这两个数据集具有不同的元素数量和不同的大小（值）。同样，我只能通过基本上删除父 DIV id ($("#treemap_1").empty();) 的元素来做到这一点，然后使用新数据集重新创建整个树图。

抱歉，我对 D3.js 很陌生，所以也许这很明显。:)

谢谢和最好的问候，本斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:43:50.507

可能和[我的问题](https://stackoverflow.com/q/10520280/111884)一样。

[问题在于树图是`sticky`](https://stackoverflow.com/a/10520641/111884).

# .net - 尝试使用 linq to xml 和 xpath 修改 xml

> ID：10530790
> 
> 赞同：0
> 
> 时间：2012-05-10T09:07:18.367
> 
> 标签：.net, linq, linq-to-xml

我无法使用 linq to xml 修改 xml。这是我正在使用的代码：

在下面的代码中，Parameters[0] 的值为“payments”

```
XElement modMethodXElement = new XElement(xdoc1.XPathSelectElement("//INPUT[@VALUE='SLN7DEACTIVATION']/METHOD[@NAME='"+Parameters[0]+"']"));
                modMethodXElement.SetAttributeValue("PARAMETERS", "ParameterValue"); 
```

这是我正在尝试修改的 xml 的一部分：

```
SESSIONANALYSER>
  <AP>
    <MODES>
      <NI>
        <STATEINFORMATION TYPE="PREPAID">
          <INIT INVALIDINPUTRESPONSE="-2">
            <INPUT VALUE="SLN7ACTIVATION">
              <METHOD NAME="CHECKSUBSCRIBERBALANCE" PARAMETERS="SLN7" POSSIBLEACTIONS="FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE" MAINTAINSESSION="NO" RESPONSE="-4" NEXTLEVEL="" />
              <METHOD NAME="SETPSOINUCIP" PARAMETERS="SLN7" POSSIBLEACTIONS="FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE" MAINTAINSESSION="NO" RESPONSE="-4" NEXTLEVEL="" />
              <METHOD NAME="SENDMESSAGE" PARAMETERS="" POSSIBLEACTIONS="FALLOUTONSUCCESS" MAINTAINSESSION="NO" RESPONSE="0" NEXTLEVEL="" />
            </INPUT>
            <INPUT VALUE="SLN7DEACTIVATION">
              <METHOD NAME="UNSETPSOINUCIP" PARAMETERS="SLN7" POSSIBLEACTIONS="FALLOUTON_FAILUREREGION_SETPSOFAILED_FALSE" MAINTAINSESSION="NO" RESPONSE="-4" NEXTLEVEL="" />
              ***<METHOD NAME="payments" PARAMETERS="fsdg" POSSIBLEACTIONS1="fg,f" MAINTAINSESSION="fdjfg89" RESPONSE="ndfgm" NEXTLEVEL="msdfm"></METHOD>***
              <METHOD NAME="SENDMESSAGE" PARAMETERS="23" POSSIBLEACTIONS1="FALLOUTONSUCCESS" MAINTAINSESSION="yes" RESPONSE="format" NEXTLEVEL="msdfm"></METHOD>
              <METHOD NAME="payments" PARAMETERS="12" POSSIBLEACTIONS1="FALLOUTONSUCCESS" MAINTAINSESSION="yes" RESPONSE="format" NEXTLEVEL="msvm"></METHOD>
              <METHOD NAME="SENDMESSAGE" PARAMETERS="23" POSSIBLEACTIONS1="FALLOUTONSUCCESS" MAINTAINSESSION="yes" RESPONSE="0" NEXTLEVEL="3"></METHOD>
              <METHOD NAME="SENDMESSAGE" PARAMETERS="23" POSSIBLEACTIONS1="FALLOUTONSUCCESS" MAINTAINSESSION="NO" RESPONSE="format" NEXTLEVEL="3"></METHOD>
            </INPUT>
          </INIT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:51:52.007

我不确定您为什么要创建 XElement 的新实例？我会像这样简单地选择给定的元素，然后 xdoc1 将包含更改后的属性。

```
 XElement modMethodXElement = xdoc1.XPathSelectElement("//INPUT[@VALUE='SLN7DEACTIVATION']/METHOD[@NAME='" + arg + "']");

        modMethodXElement.SetAttributeValue("PARAMETERS", "ParameterValue"); 
```

# c# - 如何在 WPF 中直接使用自定义依赖属性？

> ID：10530791
> 
> 赞同：0
> 
> 时间：2012-05-10T09:07:19.223
> 
> 标签：c#, wpf, data-binding, dependency-properties

**编辑**：我根据 Thorstens Answer 使用枚举更改了代码，但没有用。

我正在使用依赖属性来影响我正在创建的 WPF 控件。我是 WPF 的新手，所以我不确定自己做错了什么，也找不到合适的文章来解释它。

例如，我试图通过 Dep 属性定义控件的可见性。在这种情况下，该属性将是：

```
public static readonly DependencyProperty IconVisibilityBoldProperty = 
DependencyProperty.Register("IconVisibilityBold", typeof(Visibility), typeof(RTFBox),
new PropertyMetadata(Visibility.Hidden), VisibilityValidateCallback);
private static bool VisibilityValidateCallback(object value)
{
 Visibility prop = (Visibility) value;
 if (prop == Visibility.Hidden || prop == Visibility.Visible)
 {
  return true;
 }
 return false;
}
public Visibility IconVisibilityBold
{
 get
 {
  return (Visibility)GetValue(IconVisibilityBoldProperty);
 }
 set
 {
  SetValue(IconVisibilityBoldProperty, value);
 }
} 
```

**编辑：**对于正确的 XAML，寻找 Slugarts 的答案。用于此的 XAML 条目（在本例中为 ToggleButton）将是

```
<ToggleButton Visibility="{Binding Path=IconVisibilityBold}" ToolBar.OverflowMode="Never" x:Name="ToolStripButtonBold" Command="EditingCommands.ToggleBold" ToolTip="Bold">
<Image Source="Images\Bold.png" Stretch="None"/>
</ToggleButton> 
```

我已经输出了属性，它显示为“隐藏”，因为元数据默认值应该暗示，但显然我在绑定上做错了。我要在那里写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:28:18.277

您正在尝试绑定到父控件的属性而不引用它，并且它不会被隐式设置。您需要将 ToggleButton 绑定中的 ElementName 设置为您正在创建的 UserControl 的名称（如果它还没有 x:Name 属性，则给它一个 x:Name 属性）。

```
<UserControl x:Name="rtfBox">
<ToggleButton Visibility="{Binding ElementName=rtfBox, Path=IconVisibilityBold}" ... />
...
</UserControl> 
```

此外，您应该遵循前面的答案，这些答案正确地指出 Visibility 属性是一个枚举而不是一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:12:19.843

所以你的属性是一个字符串......但它必须是一个可枚举的：

```
namespace System.Windows
{
    public enum Visibility : byte
    {
        Visible,
        Hidden,
        Collapsed,
    }
} 
```

您必须将文本框绑定到数据上下文或将其用作正确访问属性的参考

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:15:48.370

的属性需要一个类型的`ToggleButton`值。您需要更改代码以使用它而不是字符串：`Visibility``System.Windows.Visibility`

```
public static readonly DependencyProperty IconVisibilityBoldProperty = 
DependencyProperty.Register("IconVisibilityBold", typeof(System.Windows.Visibility), typeof(RTFBox));

public System.Windows.Visibility IconVisibilityBold
{
 get
 {
  return (System.Windows.Visibility)GetValue(IconVisibilityBoldProperty);
 }
 set
 {
  SetValue(IconVisibilityBoldProperty, value);
 }
} 
```

# c# - 克隆数据结构的任何声明方式？

> ID：10530793
> 
> 赞同：2
> 
> 时间：2012-05-10T09:07:24.293
> 
> 标签：c#, python, json

我现在正在从事的项目需要一些声明性的方式来定义一堆实验的设置。

到目前为止，我已经找到了这样的解决方案。有一些数据结构使用 JSON 公开默认设置：

```
{
    "trustRatio": 0.7,
    "filter.coefA": 0,
    "filter.coefB": 1,
    "filter.coefC": 2,
    "filter.coefD": 3
} 
```

然后要设置一个实验，我们必须指定在运行实验时将更改哪个字段。现在我这样做：

```
{
    "path": "filter.coefA",
    "values": [0, 1, 2, 3, 4, 5]
} 
```

或者

```
{
    "path": "filter.coefA",
    "min": 0
    "max": 5,
    "step": 1
} 
```

然后我将默认设置和“渐变”设置都实例化为字典，并使用“路径”键创建一堆实验设置，使用默认设置作为样板，将值作为实验里程碑。

该解决方案可以使用我正在使用的 Python 或 CSharp 轻松实现，但它不是最好的，因为我分别存储默认和“渐变”设置。另一件事是我不能使用这样的层次结构：

```
{
    "trustRatio": 0.7,
    "filter":
    {
        "coefA": 0,
        "coefB": 1,
        "coefC": 2,
        "coefD": 3
    }
} 
```

因为字典在 Python 和 CSharp 中实现此解决方案时施加的约束。

有谁知道是否有任何 Python 或 CSharp（或至少其他 CLR 兼容语言，如 FSharp）工具可以通过在现场声明“梯度”来获得一系列实验设置，如下所示：

```
{
    "trustRatio": 0.7,
    "filter":
    {
        "coefA": [0, 1, 2, 3, 4, 5],
        "coefB": 1,
        "coefC": 2,
        "coefD": 3
    }
} 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:52:32.013

在 Python 中，有几个用于克隆字典结构的内置方法：dict.copy() 和[copy.deepcopy()](http://docs.python.org/library/copy.html) Deepcopy 将处理多维字典到任何深度，AFAIK。所以你可以： -

```
>>> gradient = {
...    "trustRatio": 0.7,
...    "filter":
...    {
...        "coefA": [0, 1, 2, 3, 4, 5],
...        "coefB": 1,
...        "coefC": 2,
...        "coefD": 3
...    }
... }
>>>
>>> gradient2 = gradient.copy()
>>> print gradient2
{'filter': {'coefD': 3, 'coefA': [0, 1, 2, 3, 4, 5], 'coefB': 1, 'coefC': 2}, 'trustRatio': 0.7}
>>> import copy
>>> print copy.deepcopy( gradient )
{'filter': {'coefD': 3, 'coefA': [0, 1, 2, 3, 4, 5], 'coefB': 1, 'coefC': 2}, 'trustRatio': 0.7}
>>> gradient.copy() == copy.deepcopy( gradient ) == gradient
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:29:21.013

经过网络搜索后，我已经为这个问题实现了自己的解决方案。它正是我想做的。它的描述可以在[这里](http://yfilonov.blogspot.com/2012/05/turning-objects-inside-out.html)找到。和 CSharp 源代码以及[这里](https://github.com/Singletone/Lab)的一些示例。

# tree - 在 SWT 中以编程方式滚动 TreeViewer

> ID：10530794
> 
> 赞同：1
> 
> 时间：2012-05-10T09:07:44.620
> 
> 标签：tree, treeview, swt, scrollbar, horizontal-scrolling

我有两个 TreeViewer 组件。水平滚动条必须同步。我尝试过使用 setSelection 和 setTopItem 方法，但都对其他树没有影响。只有 ScrollBar 被移动，而不是树。

```
final ScrollBar rightScrollBar = tree_1.getHorizontalBar();
rightScrollBar.addListener(SWT.Selection, new Listener() {
        @Override
        public void handleEvent(Event event) {
             //       tree.setSelection(tree_1.getSelection());
        }
    }); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:30:11.210

不幸的是，编程水平滚动是不可能的。事实上，一般来说，使用`ScrollBar`对象滚动是不可能的。您提到的方法`setTopItem(TreeItem item)`仅适用于**垂直**滚动，这不是您想要的，对吧？但是对于垂直滚动，该方法应该有效。

# java - 在 J2ME 中测量 AttributedString 的宽度

> ID：10530795
> 
> 赞同：6
> 
> 时间：2012-05-10T09:07:50.333
> 
> 标签：java, java-me, fontmetrics

我正在针对 J2ME 中的 Java [Personal Basis Profile](http://java.sun.com/products/personalbasis/)编写代码。我需要以像素为单位测量[AttributedString的宽度。](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/AttributedString.html)

在 Java SE 中，我会从我的 AttributedString 中获取一个[AttributedCharacterIterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/AttributedCharacterIterator.html)并将其传递给[FontMetrics](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/FontMetrics.html) #getStringBounds，但在 J2ME PBP 中，FontMetrics 没有`getStringBounds`方法或任何其他接受 CharacterIterator 的方法。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-25T23:07:22.183

我为此非常努力。我需要将面板的大小调整为 AttributedString 的宽度。我的解决方案是：

```
double GetWidthOfAttributedString(Graphics2D graphics2D, AttributedString attributedString) {
    AttributedCharacterIterator characterIterator = attributedString.getIterator();
    FontRenderContext fontRenderContext = graphics2D.getFontRenderContext();
    LineBreakMeasurer lbm = new LineBreakMeasurer(characterIterator, fontRenderContext);
    TextLayout textLayout = lbm.nextLayout(Integer.MAX_VALUE);
    return textLayout.getBounds().getWidth();
} 
```

它使用**LineBreakMeasurer**为字符串查找 TextLayout，然后简单地检查 TextLayout 的与。（环绕宽度设置为 Integer.MAX_VALUE，因此比该宽度更宽的文本将被截断）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T06:54:20.007

您**可以找到以像素为单位的文本宽度**。

```
String text = "Hello world";
int widthOfText = fontObject.charsWidth(text.toCharArray(), 0, text.length()); 
```

现在，您将在变量**widthOfText**中获得以像素为单位的文本宽度；

# objective-c - 按下自定义单元格的文本标签时不会触发 didSelectRowAtIndex

> ID：10530796
> 
> 赞同：1
> 
> 时间：2012-05-10T09:07:53.687
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ipad

`didSelectRowAtIndex`当我按下单元格的 UITextLabel 时不会触发，即使当我触摸它周围的空白区域时它也会触发。我还注意到这个问题只发生在 iPad 上。在 iPhone 上一切正常。我使用在 IB 中设计的自定义单元格。这是我的代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

            NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
            NSArray *contents = [[self sectionContents] objectForKey:key];
            return [contents objectAtIndex:indexPath.row];
        }

        - (void) viewDidLoad
        {
[super viewDidLoad]
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSString *powerKey = @"Power Settings";

[keys addObject:powerKey];

[contents setObject:[NSArray arrayWithObjects:cellTwo, cellThree, updatePeriodCell, nil] forKey:powerKey];
[self setSectionKeys:keys];
[self setSectionContents:contents];
        } 
```

我所有的细胞都是属性。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:46:24.927

解决方案非常简单——上面还有另一个视图`UITableView`

# php - 变量名在引号内

> ID：10530798
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:07:54.950
> 
> 标签：php, string, variables

我想知道在引号内写变量名是否 100% 正确。

我的意思是，有什么理由这样做

```
echo "Hello my name is " . $name; 
```

代替

```
echo "Hello my name is $name"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:15:45.983

两者都很好，而且它是用户偏好，您会发现它更具可读性 - 我个人更喜欢连接变量的第一种方法。

但是，请记住：

```
echo "Hello my name is $name"; 
```

不一样

```
echo 'Hello my name is $name'; 
```

第二个将按字面意思输出：

```
Hello my name is $name 
```

要记住的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:26:57.523

实际上，正如我已经评论过的，以这种方式编写是 100% 正确的 PHP 语法。PHP 不会给你一个语法错误。但是你会知道通过执行你的代码，如果不确定，在手册中查找语言。

所以简短的回答是：是的，100% 正确。

然后你问*“有什么理由去做”* - 我强烈建议你定义原因，因为客观地说，没有理由。接受的答案中给出的“指标”具有误导性，因为问题（实际上在技术上永远不能严格）没有被足够隔离（甚至可能），这导致比较错误的数字。

如果要计算两者之间的差异，则实际上没有可以衡量的差异-零，nada，什么都没有。

此外，它甚至会有所不同，有时甚至一个更快，有时另一个（如果您运行它，代码/演示见下文）：

```
10 runs à 100 000 iterations:

  single |  double  |   diff    |   real   
---------+----------+-----------+----------
0.014578 | 0.016206 | -0.001628 | -0.000000
0.015382 | 0.016352 | -0.000970 | -0.000000
0.015050 | 0.016156 | -0.001106 | -0.000000
0.015630 | 0.016280 | -0.000650 | -0.000000
0.015259 | 0.016220 | -0.000961 | -0.000000
0.015189 | 0.016190 | -0.001001 | -0.000000
0.014612 | 0.016264 | -0.001652 | -0.000000
0.015672 | 0.016257 | -0.000585 | -0.000000
0.015171 | 0.016251 | -0.001080 | -0.000000
0.014855 | 0.016166 | -0.001311 | -0.000000 
```

如果你不断升级你的 PHP 版本，你的“代码”将会得到更多的改进，而不是想知道哪个更快。

经验法则：除非你没有遇到瓶颈，否则永远不要突然“优化”。你会让你的代码更糟糕。

你给出写这个或那个方式的原因，因为你需要阅读你的代码。

![在此处输入图像描述](../Images/9474be581a3db5043ea259adb7d6dd06.png)

[http://codepad.viper-7.com/z5p2xf](http://codepad.viper-7.com/z5p2xf)

```
<?php
/**
 * @link http://stackoverflow.com/questions/10530798/variable-name-inside-quotation-marks
 */
header('Content-Type: text/plain');

$iterations = 100000;
$runs = 10;
printf("%d runs à %s iterations:\n\n", $runs, number_format($iterations, 0, '', ' '));

$plateaux = 0;
for ($r = 0; $r < $runs; $r++) {
    $time = microtime(true);
    for ($i = 1; $i < $iterations; $i++) {
        ;
    }
    $plateaux += microtime(true) - $time;
}
$plateaux = $plateaux / $runs;

$results = array();

for ($r = 0; $r < $runs; $r++) {
    $result = &$results[];
    $time = microtime(true);
    for ($i = 1; $i < $iterations; $i++) {
        "name$i";
    }
    $result[1] = microtime(true) - $time;

    $time = microtime(true);
    for ($i = 1; $i < $iterations; $i++) {
        "name" . $i;
    }
    $result[0] = microtime(true) - $time; #
    unset($result);
}

echo "  single |  double  |   diff    |   real   \n";
echo "---------+----------+-----------+----------\n";

foreach ($results as $result) {
    $delta1 = $result[0] - $plateaux;
    $delta2 = $result[1] - $plateaux;
    $diff = $delta1 - $delta2;
    printf("%f | %f | %f | %f\n", $delta1, $delta2, $diff, $diff / $iterations);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:38:21.427

唯一的区别是性能，将变量名插入引号使用更多的处理器。
示范：

```
<?php
$name='name';
$time = microtime(true);
for ($i=1; $i<100000; $i++){
    $name = "name".$i;
    echo "Hello my name is " . $name;
}
echo '<br>*** duration:'.(microtime(true)-$time).' milliseconds ***<br>';
$time = microtime(true);
for ($i=1; $i<100000; $i++){
    $name = "name$i";
    echo "Hello my name is $name";
}
echo '<br>*** duration:'.(microtime(true)-$time).' milliseconds ***<br>';
?> 
```

在 Intel core I3-2120 3.3Ghz 上运行此脚本会返回：
*** duration:0.25428795814514 毫秒*******持续时间：2.8928861618042 毫秒 ****** 

 ***区别不大，只是为了展示概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:09:19.940

这纯粹是一种偏好，两者都是 100% 正确的。尽管为了可读性，我更喜欢第一种连接方法。***

# c# - 要在按钮单击时在特定行中显示复选框

> ID：10530799
> 
> 赞同：-2
> 
> 时间：2012-05-10T09:08:01.877
> 
> 标签：c#, javascript, jquery, asp.net

我有一个每行都有一个链接按钮的gridview，在链接按钮单击时，我想为单击按钮的特定行中的单元格显示复选框，还希望根据其中的值保持它们（复选框）处于选中状态或未选中状态特定的细胞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:12:06.493

我不想做你的工作，但我可以给你一些想法......

*   使用 jQuery
*   为您的链接设置事件处理程序：`$(selector).click(function(){...});`
*   在函数内部，尝试获取链接按钮的行父对象：`var tr = $(this).parent('tr');`
*   获取并迭代该行的所有列：`$.each(tr.find('td'), function(i, td){...})`
*   为每一列添加或添加一个新的复选框元素，无论是否选中：`td.prepend('<input type="checkbox" checked="checked"/>');`

尝试编码...

# visual-studio-2010 - 如何检查菜单创建的窗口是否存在

> ID：10530802
> 
> 赞同：1
> 
> 时间：2012-05-10T09:08:09.147
> 
> 标签：visual-studio-2010, add-in, ssms

我创建了菜单“运行它！”。它必须创建我的窗口。在 SSMS 中应该只有一个。一切都很好，但是如果窗口已经打开并且我单击菜单，我会收到一个错误并且窗口已关闭。如何检查窗口是否已经存在并且不尝试创建它而只激活它？

```
 try
            {
                newWinobj1 = wins2obj.CreateToolWindow2(addinobj, AssemblyLocation,
                  controlName, controlDescription, controlGuid, ref ctlobj);
                newWinobj1.Linkable = false;
                newWinobj1.IsFloating = false;
                newWinobj1.Visible = true;
            }
            catch (Exception x)
            {
                OutputText("My Window [" + controlName +"]:"+x.Message);
            } 
```

解决了。解决方案：仅当用户单击 x 时窗口才会隐藏。需要勾选并设置Visible=true；

# python - Tastypie 与 ImageKit 的关系

> ID：10530803
> 
> 赞同：0
> 
> 时间：2012-05-10T09:08:09.830
> 
> 标签：python, django, tastypie, django-imagekit

考虑这些伪模型：

```
class Product:
    name = charfield

class ProductImage:
    image = foreignKey(Product) 
```

还有这个资源

```
class ProductResource(ModelResource):
    images = fields.RelatedField('path.to.resources.ProductImageResource', 'images__all', full=True)

    class Meta:
        queryset = Product.objects.all()
        resource_name = 'products' 
```

返回的 JSON 是：

```
{

    "meta": { ... },
    "objects": [
        {
            "name": "Test",
            "images": "[<ProductImage: ProductImage object>, <ProductImage: ProductImage object>]",
        }
    ]

} 
```

当然这没什么用，我只需要列出实例的一些属性。这是否仅适用于脱水方法：

```
def dehydrate(self, bundle):
    bundle.data['images'] = list()
    for x in ProductImage.objects.filter(base_product__id=bundle.data['id']):
        bundle.data['images'].append(x.thumbnail)
    return bundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:18:02.260

您是否尝试为您的 ProductImage 定义一个 unicode 定义，以便打印您想要的属性，而不是“ProductImage：ProductImage 对象”？

# c++ - gmtime 同时改变两个指针

> ID：10530804
> 
> 赞同：4
> 
> 时间：2012-05-10T09:08:10.847
> 
> 标签：c++, datetime

我有这个代码：

```
time_t tt = time(NULL);
tm* currentTime = gmtime(&tt);
tm* storedTime = gmtime(&m_time); 
```

其中 m_time 是构建时的 time_t 成员数据集。当我用这个数据成员设置 storedTime 时，当前时间获取相同的值，好像两个 tm 指针都指向同一个变量。这是预期的行为吗？我怎么能分开 tm 结构来比较时间？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:13:04.670

从有关文档`gmtime`：

> 该结构由 gmtime 和 localtime 函数**静态分配**和共享。**每次调用这些函数中的任何一个时，都会覆盖此结构的内容**。

使用此代码创建副本：

```
time_t tt = time(NULL);

tm currentTime = *gmtime(&tt);
tm storedTime = *gmtime(&m_time); 
```

（这里的指针尊重等价于`memcpy(&currentTime, gmtime(&tt), sizeof(tm))`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:15:01.630

他们很可能正在返回本地静态变量的地址。例如

```
struct tm *gmtime(struct time_t *tt)
{
    static struct tm local_tm;
    /* do work */
    return &local_tm;
} 
```

查看互联网上的手册页（我谷歌“man gmtime”），这是一个共同的主题，这不是一个可重入函数，甚至可能与其他函数共享一个返回值：

> POSIX.1-2001 说：“asctime()、ctime()、gmtime() 和 localtime() 函数应返回两个静态对象之一的值：分解的时间结构和 char 类型的数组。执行任何函数都可以覆盖任何其他函数在这些对象中返回的信息。”

# c# - LINQ 组然后对结果组进行排序

> ID：10530806
> 
> 赞同：25
> 
> 时间：2012-05-10T09:08:12.393
> 
> 标签：c#, .net, linq, entity-framework

我有一个包含以下 3 列的表，ID、ShortCode、UploadDate。

我想使用 LINQ 按短代码对结果进行分组（并保留所有结果），然后对这些组进行排序并返回一个列表。

我有以下内容：

```
 rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
.ToList<PDFDocument>().
GroupBy(b=>b.ShortCode)
.SelectMany(b=>b).ToList<PDFDocument>() 
```

我想返回按 ShortCode 分组的所有结果，按 UploadDate 排序的每个组中的项目以及排序的组，以便首先包含最新文档的组。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-10T09:27:27.127

尝试

```
rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
    .AsEnumerable()
    .OrderByDescending(d => d.UploadDate)
    .GroupBy(d => d.ShortCode)
    .SelectMany(g => g)
    .ToList(); 
```

这应该

*   按上传日期排序项目（降序所以最新的在前）
*   然后按短代码对它们进行分组 - 所以在每个组中，项目仍然是排序的
*   这些组仍然按降序排列，因此无需再次排序
*   最后将结果连接到一个列表中

如果性能是一个问题，你最好做

```
rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
    .AsEnumerable()
    .GroupBy(d => d.ShortCode)
    .Select(g => g.OrderByDescending(d => d.UploadDate))
    .OrderByDescending(e => e.First().UploadDate)
    .SelectMany(e => e)
    .ToList(); 
```

它分别对每个组的内容进行排序，而不是先对所有内容进行排序然后分组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T09:17:48.677

事实上，你不想按短代码分组，你想按它们排序。因此，以下查询应该可以解决问题：

```
rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
.ToList()
.OrderBy(b => b.ShortCode)
.ThenBy(b => b.UploadDate)
.ToList() 
```

**编辑** 如果你真的想使用 GroupBy，你可以这样做：

```
 rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
.ToList()
.GroupBy(b => b.ShortCode)
.SelectMany(grouping => grouping.OrderBy(b => b.UploadDate))
.ToList() 
```

但我不鼓励它。如果您一开始就不想组，那么创建组是没有意义的！

**第二次编辑**

我也没有让您想要 UpdateTime 订购的组。它使查询有点复杂：

```
rawData.Provider.CreateQuery<PDFDocument>(qb.rootExperession)
.ToList()
.GroupBy(b => b.ShortCode)
.Select(grouping => grouping.OrderByDescending(b => b.UploadDate))
.OrderByDescending(grouping => grouping.First().UploadDate)
.SelectMany(grouping => grouping)
.ToList() 
```

# html - 我可以关闭 CSS 中的链接，例如书签安装页面吗？

> ID：10530812
> 
> 赞同：1
> 
> 时间：2012-05-10T09:08:37.760
> 
> 标签：html, css, bookmarklet

我知道如何使用 CSS 来关闭或更改网页上链接的外观（即锚标记），但我想完全关闭它们。我想为书签安装页面执行此操作。例如，[美味工具页面](http://www.delicious.com/tools)有一个书签，您可以将其拖到浏览器的收藏夹栏上。但是在安装页面上，因为小书签不可避免地是一个链接，如果你想拖动它，你也可能不小心点击它。这可能会让新手感到困惑，所以我想关闭 CSS 中的链接行为，同时保持 HTML 完好无损，因为小书签需要它才能工作。

我怀疑这是可能的，因为它是行为改变而不是格式改变，但如果可能的话会很棒吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:10:27.167

这对于纯 CSS 是不可能的。

但是，您可以使用 javascript/jquery 阻止浏览器跟踪该链接：

```
$("a.bookmarklet").click(function(e){
   e.preventDefault();
}); 
```

[**-- 看演示 --**](http://jsfiddle.net/KG8Ms/)

# c# - 使用 EF 4.1 更新时的例外情况

> ID：10530817
> 
> 赞同：1
> 
> 时间：2012-05-10T09:09:03.493
> 
> 标签：c#, entity-framework-4.1

我正在使用 EntityFramework 代码优先方法。这是插入和更新的方法：

```
 private void SaveCandidates(Container container, List<Candidate> candidates, bool isInsert)
    {

            var alreadyExists = false;

            foreach (candidate matchingOrderCandidate in candidates)
            {
                alreadyExists = container.Candidates.Any(i => i.Id == candidate.Id);

                if (!alreadyExists && isInsert)
                {
                    container.Entry(candidate).State = EntityState.Added;
                }

                if (alreadyExists && !isInsert)
                {
                    container.Entry(candidate).State = EntityState.Modified;

                }

            }
            container.SaveChanges();
    } 
```

但是在更新的情况下，它会抛出异常

> [System.InvalidOperationException] = ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

我首先插入候选人，然后运行一些自动过程，然后调用此方法进行更新，如果更新，我会在`container.SaveChanges()`. 任何帮助都将受到高度重视。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:56:14.150

这里似乎已经解决了同样[的问题 ObjectStateManager 中已经存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象](https://stackoverflow.com/questions/5672255/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-the-object) 尝试改用

```
container.Entry(candidate).State = EntityState.Modified; 
```

这：

```
exist = container.Candidates.FirstOrDefault(i => i.Id == candidate.Id);
if(exist != null) container.Entry(exist).CurrentValues.SetValues(candidate); 
```

# javascript - 使用 Google Maps Api v3 绘制区域边界，就像在 Google Maps 网页中一样

> ID：10530818
> 
> 赞同：3
> 
> 时间：2012-05-10T09:09:05.013
> 
> 标签：javascript, google-maps-api-3

[如果我在Google 地图网页](http://maps.google.es/maps?q=province%20of%20huelva,%20ES)中搜索“huelva 省，ES” ，我会得到一个标记和带有颜色层的省份边界，缩小时甚至会被填充。

是否可以使用 Google Maps API 来获取该多边形（或图层、json 对象……），甚至可以更改其颜色，只需像在 Google Maps 网页中一样提供查询字符串？

现在我必须使用区域 LatLng 值来绘制多边形，但如果我可以获得只提供搜索字符串的多边形，那就太好了。

感谢你们！

# drag-and-drop - javafx拖放移动图标

> ID：10530829
> 
> 赞同：1
> 
> 时间：2012-05-10T09:09:54.420
> 
> 标签：drag-and-drop, javafx-2

我正在使用 JavaFX2 上的拖放操作。鼠标光标之后的拖动对象（可能是拖动对象的克隆）可能与 JavaFX 场景生成器上的一样。

*这是我的示例源代码：*

```
Pane pane;
private void dragAndDropExample() {
    pane = new Pane();
    pane.setPrefSize(800, 600);
    TitledPane titlePane = new TitledPane("Partial Order", pane);
    add(titlePane, 0, 2);

    pane.getChildren().add(createCircle(350, 300, Color.RED));
    pane.getChildren().add(createCircle(250, 300, Color.BROWN));

    pane.setOnMouseMoved(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) { 
            if (circleToMove != null) { 
                circleToMove.setCenterX(event.getX());
                circleToMove.setCenterY(event.getY()); 
            }

        }
    });
}

Circle circleToMove;

private Circle createCircle(double x, double y, Color color) {
    final Circle c = new Circle(x, y, 25);
    c.setFill(color);

    c.setOnDragDetected(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent arg0) {
            System.out.println("SetOnDragDetected");
            c.setFill(Paint.valueOf("blue"));
            Dragboard db = c.startDragAndDrop(TransferMode.COPY_OR_MOVE);
            ClipboardContent content = new ClipboardContent();
            content.putString("foo " + c.hashCode());
            db.setContent(content);
            arg0.consume();
            circleToMove = c;
        }
    });

    c.setOnMouseClicked(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) {
            System.out.println("Mouse clicked");
        }
    });

    c.setOnMouseReleased(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) {
            System.out.println("Mouse Released");
            circleToMove = null;
        }
    });

    c.setOnDragExited(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent event) {
            System.out.println("SetOnDragExited");
            System.out.println(event.getGestureSource());

        }
    });

    c.setOnDragOver(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent event) {
            System.out.println("setOnDragOver " + c.hashCode());
            c.setFill(Paint.valueOf("white"));
            event.acceptTransferModes(TransferMode.COPY_OR_MOVE);
            event.consume();
        }
    });

    c.setOnDragDropped(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent arg0) {
            System.out.println("setOnDragDropped");
            c.setFill(Paint.valueOf("black"));

            if (arg0.getGestureSource() instanceof Circle) {

                if (arg0.getDragboard().hasString()) {
                    System.out.println(c.hashCode() + " hat jetzt " + arg0.getDragboard().getString());
                }
            }
        }
    });

    c.setOnDragEntered(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent arg0) {
            System.out.println("setOnDragEntered");

        }
    });

    return c;
} 
```

我尝试在窗格上使用 mouseEvent，但在拖放过程中不会触发此事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T13:05:15.533

您使用了错误的处理程序。有拖动事件用于在窗格之间拖动项目。如果您只想移动已处理的对象，请使用以下代码：

```
private Circle createCircle(double x, double y, Color color) {
    final Circle c = new Circle(x, y, 25);
    c.setFill(color);

    c.setOnMouseDragged(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent event) {
            c.relocate(event.getSceneX() - c.getRadius(), event.getSceneY() - c.getRadius());
        }
    });

    return c;
} 
```

您也可以尝试查看[Ensemble 演示中的下一个子样本：](http://download.oracle.com/otndocs/products/javafx/2.1/samples/Ensemble/index.html#SAMPLES/Scenegraph/Events/Mouse%20Events)

# ruby-on-rails - Paperclip gem 是否支持.doc 上传？

> ID：10530830
> 
> 赞同：0
> 
> 时间：2012-05-10T09:09:54.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我可以使用 Paperclip接受、 和s 的上传`.pdf`，但无法正常工作。`.gif``.jpeg``.doc``.xls`

模型中的回形针代码如下所示：

```
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" } 
```

这是迁移：

```
class AddAttachmentAvatarToDocuments < ActiveRecord::Migration
  def self.up
    add_column :documents, :avatar_file_name, :string
    add_column :documents, :avatar_content_type, :string
    add_column :documents, :avatar_file_size, :integer
    add_column :documents, :avatar_updated_at, :datetime
  end

  def self.down
    remove_column :documents, :avatar_file_name
    remove_column :documents, :avatar_content_type
    remove_column :documents, :avatar_file_size
    remove_column :documents, :avatar_updated_at
  end
end 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:40:45.653

为什么有人会使用 a`.doc`或 an`.xls`作为他们的头像？

您正在告诉 Paperclip 制作上传文件的缩略图，这不适用于非 image-y 文件。如果您想允许上传多种类型的文件但只为图像制作缩略图，请尝试[有条件地调整大小](https://github.com/thoughtbot/paperclip/wiki/Conditionally-resizing-images)。

# c# - App_Code 类不自动完成，不能在项目的其余部分使用它

> ID：10530834
> 
> 赞同：0
> 
> 时间：2012-05-10T09:10:07.210
> 
> 标签：c#, asp.net

我正在创建一个站点，并认为我会正确地做到这一点，所以我创建了一个`App_Code`目录并在其中创建了一个类。

当我编辑类文件时，自动完成不再起作用，我可以忍受，但是，无论我在我的主站点做什么，我都无法访问或引用类文件。

我尝试在文件顶部放置一个 using 语句，但它只是抛出一个错误，在代码中创建类的实例，但抛出和错误

有人可以让我知道我哪里出错了吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:13:01.937

确保你的班级是`public`

**编辑：**正如[@Oded](https://stackoverflow.com/questions/10530834/app-code-class-not-auto-completing-and-cant-use-it-in-rest-of-project/10530880#comment13621976_10530880)评论的那样，删除`Namespace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:47:46.400

`App_Code`用于`Website projects`而不用于`Web Application projects`。对于 Web 应用程序项目，它不会按预期工作。[MSDN](http://msdn.microsoft.com/en-us/library/t990ks23.aspx)

您的项目是网站还是 Web 应用程序？

# php - Smarty 模板引擎能否显示 € HTML 实体

> ID：10530835
> 
> 赞同：1
> 
> 时间：2012-05-10T09:10:12.860
> 
> 标签：php, templates, smarty, php-5.3

我遇到了 Smarty 模板引擎的问题，我无法`&euro;`以 € 的价格显示，但我可以使用较旧的`&#0128;`.

Smarty 代表这个角色有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:12:50.003

不，smarty 不关心你使用的字符。

但是，我会使用正确的 UTF8 字符而不是实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:14:09.503

这是html和编码的问题，Smarty不在乎

# c# - 两次和每小时之间的 LINQ 过滤

> ID：10530838
> 
> 赞同：2
> 
> 时间：2012-05-10T09:10:17.447
> 
> 标签：c#, linq

我有一个 LINQ 查询，目前是这样的：

```
var query = from l in Records
            where l.time >= time1 && l.time <= time2
            select l; 
```

但是，Records 集合过去每两秒记录一次，现在它每小时记录一次。我需要一种仅从旧数据中抓取一个记录一小时的方法，以便返回的数据更有意义，因此我不会返回每 2 秒记录的数月数据......任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:45:10.967

因此，您每小时只需要一条记录。这意味着您需要按小时分组：

```
var query = records
            .Where(r => r.time >= time1 && r.time <= time2)
            .Select(r => new
            {
                Hour = new DateTime(r.time.Year, r.time.Month, r.time.Day, r.time.Hour, 0, 0),
                Record = r
            })
            .GroupBy(x => x.Hour)
            .Select(grp => grp.First().Record); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:26:11.087

您应该按小时分组并为每个小时选择第一个元素。

试试这个：

```
var query = from l in Records
            where l.time >= time1 && l.time <= time2
            group l by l.time.Hour into g
            select g.First(); 
```

# ios - 使用 iOS 5 AV Foundation 和 core-image 实时确定一张纸的角

> ID：10530846
> 
> 赞同：3
> 
> 时间：2012-05-10T09:10:39.613
> 
> 标签：ios, avfoundation, core-image

我目前正在构建一个相机应用程序原型，它应该能够识别桌子上的纸张。关于这个的线索是它应该实时识别，所以我捕获了相机的视频流，在iOS 5中可以很容易地用AV基础完成。我看着[这里](https://developer.apple.com/library/ios/#qa/qa1702/_index.html)和[这里](https://developer.apple.com/itunes/?destination=adc.apple.com.4088182973.04088182975.4092394222?i=1953465245)

他们在那里做一些基本的物体识别。

我发现在这个实时环境中使用 OpenCV 库不能以高效的方式工作。

所以我需要的是一种算法来确定没有 OpenCV 的图像的边缘。

有没有人有一些示例代码片段来说明如何做到这一点或指出我正确的方向。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T17:25:25.357

你将无法在 iOS 中使用当前的 Core Image 实现来做到这一点，因为角点检测需要一些 Core Image 尚不支持的操作。[但是，我一直在开发一个名为GPUImage](https://github.com/BradLarson/GPUImage)的开源框架，它确实具有所需的功能。

为了找到对象的角点，您可以使用我刚刚开始工作的 Harris 角点检测算法的 GPU 加速实现。您可能需要调整阈值、灵敏度和输入图像大小以适用于您的特定应用程序，但它能够返回在场景中找到的纸片的角落：

![哈里斯角球](../Images/414ee0252601b79c525c779792203730.png)

它还会找到该场景中的其他角，因此您可能需要使用二进制阈值操作或稍后的一些处理来识别哪些角属于一张矩形纸，哪些属于其他对象。

[如果您有兴趣，我会在 Signal Processing](https://dsp.stackexchange.com/questions/401/how-to-detect-corners-in-a-binary-images-with-opengl/2237#2237)中描述它的工作过程，但要在您的应用程序中使用它，您只需从 GitHub 获取最新版本的 GPUImage 并将 GPUImageHarrisCornerDetectionFilter 设置为 GPUImageVideoCamera 实例的目标。然后，您只需添加一个回调来处理从此过滤器返回给您的角数组。

在 iPhone 4 上，边角检测过程本身在 640x480 视频上以 ~15-20 FPS 的速度运行，但我当前的 CPU 绑定边角制表例程将其减慢到 ~10 FPS。我正在努力用一个应该更快的基于 GPU 的例程来替换它。iPhone 4S 目前以 20-25 FPS 的速度处理一切，但我应该能够再次显着提高那里的速度。希望这对您的应用程序来说足够接近实时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:33:02.763

我使用 Brad 的库 GPUImage 来做到这一点，结果是完美的，但足够好。

在检测到的哈里斯角中，我的想法是选择：

*   工作表左上角的最左上角
*   工作表右上角的最右上角
*   等等

@Mirco - 你找到更好的解决方案了吗？

@Brad-在您的屏幕截图中，您使用哪些 Harris 过滤器参数来检测到 5 个角？我还有很多...

# ios - 如何使用Cmake为IOS生成静态库的xcode项目？

> ID：10530849
> 
> 赞同：5
> 
> 时间：2012-05-10T09:10:44.060
> 
> 标签：ios, xcode, cmake

我正在尝试使用 Cmake 生成 ASSIMP 的 Xcode 项目。我知道它的工作区文件夹中已经有一个。而我只是想创造自己。我尝试编写 cmakelist.txt：

```
cmake_minimum_required(VERSION 2.8)

project(assimp)

set(CMAKE_XCODE_EFFECTIVE_PLATFORMS "-iphoneos;-iphonesimulator")
set(CMAKE_OSX_SYSROOT iphoneos5.1)
set(CMAKE_OSX_ARCHITECTURES $(ARCHS_STANDARD_32_BIT))

add_subdirectory(assimp) 
```

然后我运行了这个命令：

```
#!/bin/bash
cd "$(dirname "$0")"/assimp
if [ ! -d xcode ]
then
    mkdir xcode
fi
cd xcode
cmake -G Xcode ../.. -DINSTALL_LIBS=ON -DCMAKE_INSTALL_PREFIX=../.. -DBUILD_SHARED_LIBS=OFF -DBUILD_ASSIMP_TOOLS:BOOL=OFF -DENABLE_BOOST_WORKAROUND=ON

# Device or simulator
xcodebuild -target install -configuration Release 
```

它生成 Xcode 项目，但在产品中是 libassimp.dylib 并得到“目标指定产品类型 'com.apple.product-type.library.dynamic'，但对于 'iphoneos' 平台没有这样的产品类型”错误。

如何将“com.apple.product-type.library.dynamic”更改为静态？我设置了 -DBUILD_SHARED_LIBS=OFF 但它没有用。

我在网上搜索并找不到导致问题的原因。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T04:14:06.357

在 /code/ 目录的 cmakelist.txt 中有一行： ADD_LIBRARY( assimp SHARED 只需将 SHARED 更改为 STATIC

我正在使用的cmakelist：

```
cmake_minimum_required(VERSION 2.8.6)

project(assimp)

# Set the Base SDK (only change the SDKVER value, if for instance, you are building for iOS 5.0):
set(SDKVER "5.1")
set(DEVROOT "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer")
set(SDKROOT "${DEVROOT}/SDKs/iPhoneOS${SDKVER}.sdk")
if(EXISTS ${SDKROOT})
    set(CMAKE_OSX_SYSROOT "${SDKROOT}")
else()
    message("Warning, iOS Base SDK path not found: " ${SDKROOT})
endif()

# Will resolve to "Standard (armv6 armv7)" on Xcode 4.0.2 and to "Standard (armv7)" on Xcode 4.2:
set(CMAKE_OSX_ARCHITECTURES "$(ARCHS_STANDARD_32_BIT)")

# seamless toggle between device and simulator
set(CMAKE_XCODE_EFFECTIVE_PLATFORMS "-iphoneos;-iphonesimulator")

include_directories(
  ${CMAKE_CURRENT_SOURCE_DIR}
)

add_subdirectory(assimp) 
```

# entity-framework - Linq-to-Entities / Entity Framework 中的连接

> ID：10530855
> 
> 赞同：1
> 
> 时间：2012-05-10T09:11:02.577
> 
> 标签：entity-framework

我想在 Linq-to-Entities 中执行以下任务，这些任务可以在 SQL 中轻松完成。请在这方面提供帮助。

```
select 0 as eid, 'Select' as eName

union

select eid , empcode + '' + empname as eName 
from tblemp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:24:55.470

这比 Meysam 创造的链接还要容易。

```
CoreUtil.ToEnumerable(new Employee { Name = "Select" })
    .Concat(context.Employees.AsEnumerable()) 
```

`ToEnumerable`你会更经常使用的一个非常有用的小功能在哪里：

```
public static class CoreUtil
{    
    public static IEnumerable<T> ToEnumerable<T>(params T[] items)
    {
        return items;
    }
} 
```

# magento - 需要帮助使用 "if" 和 "empty" 和 "echo" Magento

> ID：10530857
> 
> 赞同：0
> 
> 时间：2012-05-10T09:11:18.673
> 
> 标签：magento, echo

抱歉，我只是自学成才，但遇到了一些问题。

我目前有一个自定义属性，只有当该属性没有价值时，我才想回显价格。这就是我现在所拥有的，但目前两者都调用。这是针对产品 list.phtml 页面的。在过去的 3 个小时里一直在试验，但不知道该怎么做。

```
<div class="product-pricerange" id="product-pricerange">
   <?php echo $_product->getResource()->getAttribute('pricerange')->getFrontend()->getValue($_product) ?>
</div>

   <?php echo $this->getPriceHtml($_product, true) ?> 
```

在此先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:35:42.643

您应该能够通过将其包装在 IF 语句中来实现这一点，如下所示：

```
<div class="product-pricerange" id="product-pricerange">
    <?php if(!$_product->getData("your_attrubute")):?>
        <?php echo $this->getPriceHtml($_product, true) ?>
    <?php endif;?>
</div> 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:47:01.263

您还可以使用 hasData() 功能

```
<div class="product-pricerange" id="product-pricerange">
  <?php if($_product->hasPricerange()):?>
    <?php echo $this->getPriceHtml($_product, true) ?>
  <?php endif;?>
</div> 
```

# wpf - 如何在 WPF 中有效地更改控件模板？

> ID：10530858
> 
> 赞同：0
> 
> 时间：2012-05-10T09:11:22.000
> 
> 标签：wpf, controltemplate

主题是我已经定义了一个绑定到 DataContext 的自定义控件。我希望根据 DataContext 的特定属性值动态更改控件模板。

我想到了两种方法，但我不知道哪种方法更好。

1.不要在ResourceDictionary中使用控件模板，控件的所有细节都在C#代码中定义。当DataContext的属性值发生变化时，使用DependencyProperty回调方法来渲染控件。

2.在ResourceDictionary 中定义控件模板并使用DataTrigger 更改'Control.Template' 属性。

在我的应用程序中，会创建数千个这种类型的实例，因此如果 ControlTemplate 更改无效，这是不可接受的。

您能给我一些建议或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:47:09.223

如果涉及数千个复杂控件实例，则使用任何标准 WPF 技术都可能无效。请参阅[http://msdn.microsoft.com/en-us/magazine/dd483292.aspx](http://msdn.microsoft.com/en-us/magazine/dd483292.aspx)。

我会使用 MultiBinding + IMultiValueConverter 到 Control.Template 依赖属性，因为 Template 将依赖于多个 DataContext 属性，并且可能会涉及复杂的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:24:39.937

也许您可以`ContentPresenter`在您的控件中使用 a 来自`ControlTemplate`定义部分控件。您可以`DataTemplate`为那些自动应用的可定制部分提供 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:33:04.317

我会使用带有数据触发器的样式来控制显示哪个模板。像这个例子：

```
<Style x:Key="Die1Face" TargetType="{x:Type Button}">
        <Setter Property="Template" Value="{StaticResource dieNone}" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=ThrowDie1[0]}" Value="1" >
                <Setter Property="Template" Value="{StaticResource dieOneA}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=ThrowDie1[0]}" Value="2" >
                <Setter Property="Template" Value="{StaticResource dieTwoA}" />
            </DataTrigger>
    </Style.Triggers>
    </Style> 
```

这将为您提供所需的灵活性。

# spring - Spring 应用程序在配置文件中找不到数据源

> ID：10530859
> 
> 赞同：0
> 
> 时间：2012-05-10T09:11:25.463
> 
> 标签：spring, configuration, datasource, jndi

当我将我的 spring 应用程序（Spring 2.5.6）部署到 Tomcat（6.0）上时，启动失败并出现

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateSessionFactory' defined in class path resource [C.xml]: Cannot resolve reference to bean 'dataSource' while setting bean property 'dataSource'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'dataSource' is defined 
```

我的 web.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="[snip]" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>[snip]</display-name>
<welcome-file-list>
   [snip]
</welcome-file-list>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:All.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>[snip]</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>[snip]</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

all.xml 导入了一些配置文件：

```
<import resource="A.xml"/>
<import resource="B.xml"/>
<import resource="C.xml"/>
... 
```

B.xml 定义了一个数据源：

```
<jee:jndi-lookup id="dataSource" jndi-name="[snip]"/> 
```

C.xml 创建一个休眠会话工厂，引用来自 B.xml 的数据源：

```
<bean id="hibernateSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="mappingResources">
        <list>
            <value>[snip]</value>
            <value>[snip]</value>
        </list>
    </property>
    <property name="hibernateProperties">
  <props>
       [snip]
  </props>
</property>
<property name="dataSource" ref="dataSource" />
</bean> 
```

当我部署我的 WAR 文件时，会发生上述异常。我的问题是：

1.  为什么？
2.  为什么在我编写的用于测试spring配置有效性的JUnit测试中没有出现相同的异常？这是测试：

    @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(locations = { "/All.xml" }) 公共类 ImfSpringConfigurationTest { [snip]] }

注意：在 JUnit 测试中，我使用不同的 All.xml 文件将 B.xml 替换为定义数据源的文件，而无需 jndi 查找，如下所示：

```
<bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource"
    p:driverClassName = "oracle.jdbc.driver.OracleDriver"
    [snip] /> 
```

**

事实证明，这个配置是正确的。是在一些相同的配置文件上运行的另一个模块的部署引发了异常，而不是这个部署过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:24:49.977

尝试使用通配符运算符拉入顶级上下文：

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/classes/spring*.xml</param-value>
</context-param> 
```

# linq - 使用例外扩展方法时的问题

> ID：10530860
> 
> 赞同：0
> 
> 时间：2012-05-10T09:11:30.173
> 
> 标签：linq, c#-4.0

下面的代码有什么问题？

```
var newContextElementCollection = new List<NewContextElements>();  
var res = from eleCollection in newContextElementCollection                     
          where eleCollection.Property.Except(new List<string> { "Password", "Some Other Value" })
          select eleCollection; 
```

`NewContextElementCollection`班级：

```
public class NewContextElements
{
    public string Property { get; set; }    
    public string Value { get; set; }
} 
```

我收到此错误：

> 实例参数：无法从 'string' 转换为 'System.Linq.IQueryable' 错误 2 'string' 不包含 'Except' 的定义和最佳扩展方法重载 'System.Linq.Queryable.Except(System.Linq.可查询，
> 
> System.Collections.Generic.IEnumerable)' 有一些无效参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:16:19.510

`Property`是一个字符串，而不是一个`IEnumerable<string>`，这是您的`Except`子句可以处理的。

```
var res= from eleCollection in newContextElementCollection
     where eleCollection.Property !=  "Password"
     select eleCollection; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:42:13.567

```
var excluded = new List<string> { "Password","Some Other Value" };
var res = newContextElementCollection.Where(m => !excluded.Contains(m.Property)); 
```

# sql - Sql - 按笛卡尔积中的值排序

> ID：10530862
> 
> 赞同：0
> 
> 时间：2012-05-10T09:11:44.263
> 
> 标签：sql, sql-server-2008, sql-server-ce, cartesian-product

假设我有以下数据：

```
Product
IdPk  |  Name
-------------
guid1 |  Printer
guid2 |  Oil
guid3 |  Etc.
guid4 |  Etc..

ProductPart
PartIdPk| ItemId | PartName
-------------------------
guid100 | guid1  | Ink
guid101 | guid1  | Paper
guid102 | guid2  | Automobile Fuel
guid103 | guid2  | Cooking

ProductPartType
TypeIdPk| ItemId | PartId  | TypeName
---------------------------------
guid200 | guid1  | guid100 | Cyan            < Types of ink
guid201 | guid1  | guid100 | Magenta
guid202 | guid1  | guid100 | Black
guid203 | guid1  | guid100 | Yellow
guid204 | guid1  | guid101 | Photocopier     < Types of paper
guid205 | guid1  | guid101 | Envelope
guid206 | guid1  | guid101 | Card
guid207 | guid2  | guid102 | Petrol          < Types of automobile fuel
guid208 | guid2  | guid102 | Diesel
guid209 | guid2  | guid103 | Olive           < Types of cooking oil
guid210 | guid2  | guid103 | Sunflower 
```

因此，每个产品都有一个或多个零件，每个零件都有一种或多种类型。

我想选择一个产品、它的零件和它的类型。假设我可能有数千个条目，所以通常我想在选择的同时进行过滤。这三个表通常会导致笛卡尔产品查询，鉴于这种情况，我需要运行一个查询，该查询相当于“给我按（部件为 Ink 的类型名称）排序的前 2 个产品，然后（类型名称在部分是烹饪）”

有没有人有任何想法？提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:45:50.070

您正在寻找的只是表上的基本连接查询：

```
select ppt.*, pp.PartName, p.Name
from ProductPartType ppt join
     ProductPart pp
     on ppt.PartId = pp.PartId join
     Product p join
     pp.ItemId = p.idPK
where <whatever> 
```

然后你可以做任何你想做的查询。“顶部”查询不清楚，因为没有自然的东西可以订购。

我确实对您的数据结构有疑问，因为您在产品部件和产品部件类型级别都有产品。出于一致性目的，最好只在级别上使用它，可能是产品部分。

通常，“笛卡尔积”连接用于指代交叉连接，而不是等连接。为了提高性能，您可以在表中添加索引。但是，您可能不需要它们。

# android - 安装后的 APK 文件在 Android 设备上是如何布局的？

> ID：10530866
> 
> 赞同：2
> 
> 时间：2012-05-10T09:11:55.757
> 
> 标签：android, apk

我猜APK文件在安装后没有以解压的形式存储在设备上。但是在应用程序运行时是否将其解压缩到某个内存缓冲区？还是将其解包存放在某个临时位置？

我主要从访问打包资产的运行时含义的角度感兴趣。

# .net - ListView 如果多行可见

> ID：10530869
> 
> 赞同：0
> 
> 时间：2012-05-10T09:12:18.180
> 
> 标签：.net, wpf, listview, visibility

如何将 ListViews 可见性绑定到计算？仅当 DataContexts 集合（IEnumerable）中有多个记录时，我希望 Listviews 可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:27:28.560

您可以在**ViewModel**上创建一个属性**CollectionAny**，它将调用**IEnumerable.Any()**方法。您可以直接从**ViewModel**返回**Visibility**，但**MVVM**模式不建议这样做。因此，您可以使用转换器，例如**BooleanToVisibilityConverter**。如果可以将集合包装到**ICollecitionView**接口，则可以使用其**IsEmpty**属性。如果这是您的选择 - 您不需要引发**PropertyChanged**事件。

 ******这里将布尔属性绑定到可见性的示例：

```
<!-- Inside your resources define the converter instance -->
<BooleanToVisibilityConverter x:Key="B2VConverter">
...

<ListView 
    ...
    Visibility="{Binding Path=CollectionAny, Converter={StaticResource B2VConverter}}" 
    ...
/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:34:01.597

像这样通过转换器将列表视图的可见性绑定到集合

```
<ListView x:Name="listView" 
ItemsSource="{Binding CollectionWithObjectsIn}" 
Visibility="{Binding CollectionWithObjectsIn, Converter={StaticResource      
 CollectionCountToVisibilityConverter}}"/> 
```

在您必须创建的 CollectionCountToVisibilityConverter 中，您将检查传入的集合中的项目数，然后返回正确的可见性值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:29:01.587

你可以绑定`Visibility`到`HasItems`：

```
<Style>
    <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=myList, Path=HasItems}" Value="False">
            <Setter Property="UIElement.Visibility" Value="Collapsed" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```******

# android - 我应该把谷歌网站的服务器端代码放在哪里？

> ID：10530872
> 
> 赞同：0
> 
> 时间：2012-05-10T09:12:24.620
> 
> 标签：android

我正在开发一个应用程序，我从中将一些数据发布到我的网页上。从我的 android 应用程序中，我使用 http POST 发送请求。这是我的网站：[https ://sites.google.com/site/aycsdk/advertisement](https://sites.google.com/site/aycsdk/advertisement)

我正在学习[http://webhole.net/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/](http://webhole.net/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/)上的教程。我的问题是，我应该在哪里粘贴我的网站的服务器端代码，以便它可以从应用程序接收数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:21:44.803

Google 协作平台不支持您提到的帖子所要求的服务器端 PHP 脚本。考虑一个允许 PHP 的托管解决方案。

也看看这个答案[https://stackoverflow.com/a/4577661/1321873](https://stackoverflow.com/a/4577661/1321873)

# objective-c - NSString 通过删除初始零？

> ID：10530873
> 
> 赞同：12
> 
> 时间：2012-05-10T09:12:34.560
> 
> 标签：objective-c, cocoa-touch, nsstring

如何从 中删除前导零`NSString`？

例如我有：

`NSString *myString;`

具有`@"0002060"`,`@"00236"`和等值`@"21456"`。

如果出现任何前导零，我想删除它们：

例如，将前一个转换为`@"2060"`,`@"236"`和`@"21456"`。

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T09:14:01.547

**对于较小的数字：**

```
NSString *str = @"000123";      
NSString *clean = [NSString stringWithFormat:@"%d", [str intValue]]; 
```

**对于超出 int32 范围的数字：**

```
NSString *str = @"100004378121454";     
NSString *clean = [NSString stringWithFormat:@"%d", [str longLongValue]]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T05:51:10.967

这实际上是一个非常适合正则表达式的情况：

```
NSString *str = @"00000123";

NSString *cleaned = [str stringByReplacingOccurrencesOfString:@"^0+"              
                                                   withString:@"" 
                                                      options:NSRegularExpressionSearch 
                                                        range:NSMakeRange(0, str.length)]; 
```

只有一行代码（从逻辑上讲，为清楚起见添加了换行符）并且它处理的字符数没有限制。

正则表达式模式的简要说明：

这`^`意味着模式应该锚定到字符串的开头。我们需要它来确保它不匹配数字序列中的合法零。

该`0+`部分意味着它应该匹配一个或多个零。

放在一起，它匹配字符串开头的一个或多个零序列，然后用空字符串替换它 - 即，它删除前导零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:33:02.990

```
 - (NSString *) removeLeadingZeros:(NSString *)Instring
 {
        NSString *str2 =Instring ;

        for (int index=0; index<[str2 length]; index++) 
        {
           if([str2 hasPrefix:@"0"]) 
               str2  =[str2 substringFromIndex:1];
            else
                break;
        }
        return str2;

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T05:13:57.370

下面的方法也给出了输出。

```
NSString *test = @"0005603235644056";

// Skip leading zeros
NSScanner *scanner = [NSScanner scannerWithString:test];
NSCharacterSet *zeros = [NSCharacterSet
                         characterSetWithCharactersInString:@"0"];
[scanner scanCharactersFromSet:zeros intoString:NULL];

// Get the rest of the string and log it
NSString *result = [test substringFromIndex:[scanner scanLocation]];
NSLog(@"%@ reduced to %@", test, result); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T15:55:50.707

除了adali的回答，如果您担心字符串太长（即大于9个字符），您可以执行以下操作：

```
NSString *str = @"000200001111111";
NSString *strippedStr = [NSString stringWithFormat:@"%lld", [temp longLongValue]]; 
```

这会给你结果：200001111111

否则，`[NSString stringWithFormat:@"%d", [temp intValue]]`可能会因为溢出而返回 2147483647。

# php - 如何检索存储的数据库数据（即从下拉列表中选择的数据）作为下拉列表中的选定数据

> ID：10530885
> 
> 赞同：0
> 
> 时间：2012-05-10T09:13:16.033
> 
> 标签：php, phpmyadmin

到目前为止我所做的是将下拉选择的数据存储到数据库中，我现在想要的是基于在文本框中输入的用户名并单击搜索按钮，要选择的下拉项目是存储在中的数据数据库以及用户可以根据需要选择的值列表。

我只想知道如何用来自数据库的选定数据替换文本 Select from here 以及允许用户在下拉列表中根据需要编辑数据并在单击提交按钮后再次将其保存在数据库中.

代码同时存储数据如下

```
<?php
if( $_POST['registerbtn']){
$getuser=    mysql_real_escape_string(trim($_POST['user']));
$selected_value = $_POST['selectID'];
if($selected_value != 0){
require("./connect.php");
$query=mysql_query("SELECT * FROM user_details WHERE username='$getuser'");
$numrows= mysql_num_rows($query);
if($numrows == 0) { 
mysql_query("INSERT INTO user_details  VALUES (  '','$getuser','$selected_value')");
}
 else
$errormsg = "There is already a user with that username ." ;
mysql_close();
}
else
 $errormsg = "You  must select a linecard";
}
//code to fill dropdown 
require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);
$options = "<option value = '0'>  Select  from here </option>";
while($rownw = mysql_fetch_array($rs)){
$options .= "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
}
mysql_close() ;

$form = "<form action='./reg.php'  method='post'>
<table>
<tr>
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td>
</tr>

<tr>
<td>  Username  </td>
<td>  <input type='text' name='user'  value='$getuser' />  </td>
</tr>

<tr>
<td> Select  Linecard </td>
<td>  <Select name='selectID' > $options  </select> </td>
</tr>

<tr>
<td>   </td>
<td>  <input type='submit' name='registerbtn' value='Register' />  </td>
</tr>

</form>";

echo $form;
?> 
```

根据在文本框中写入的用户名从数据库中检索数据到下拉列表中的代码如下

```
<?php
if( $_POST['savebtn']){
$search = $_POST['search'];
if($search == '' )
{
$errormsg1 = "Enter something in the search box";
}
else
{
require("./connect.php");
$query = mysql_query("SELECT  * FROM user_details  WHERE  username = '$search'");
$numrows= mysql_num_rows($query);
$rows=mysql_fetch_assoc($query);
if($numrows == 1)
{
$getuser = $rows['username'];
$select_id= $rows['linecard_id'];
//selection table where linecard_name is stored along with select_id   for the linecard_name to be displayed 
$query1  = mysql_query("SELECT *  FROM selection  WHERE  select_id = '$select_id' ") ;
$rows1=mysql_fetch_assoc($query1);
$linecard_name= $rows1['linecard_name'];
echo $linecard_name;

$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);
while($rownw = mysql_fetch_array($rs)){
if( $select_id == $rownw['select_id'])  {
echo $select_id;
$options .= "<option value = ". $select_id ." > " .$linecard_name. " </option> ";
}
}

}
else
$errormsg1 = "Username was Not found";
mysql_close() ;
}
}

?>

<?php
$form ="<form action='ad.php' method='post' id='search' >
<div class='place'>
<tr>
<td>  </td>
<td>  <font color='red' > $errormsg1 </font> </td>
</tr>

<div class='frm2'> <input  type='text'  size='15'  value='$search'  name='search'    /> </div>
<div class='frm3'>      <input type='submit'   name='savebtn'  /> </div>
<div class='clear'> </div>
</div> 
</form>";
echo $form;
?>

<?php
require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection "."ORDER BY linecard_name";
$rs = mysql_query($sql);
$options = "<option value = '0'>  Select  from here </option>";
while($rownw = mysql_fetch_array($rs)){
$options .= "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
}
mysql_close() ;
$form = "<form action='./reg.php'  method='post'>
<table>
<tr>
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td>
</tr>
<tr>
<td>  Username  </td>
<td>  <input type='text' name='user'  value='$getuser' />  </td>
</tr>

<tr>
<td> Select  Linecard </td>
<td>  <Select name='selectID' > $options  </select> </td>
</tr>
<tr>
<td>   </td>
<td> <input type='submit' name='savebtn' value='Save' />   </td>
</tr>
</form>";
echo $form;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:22:18.063

请更改您的代码如下：

```
 <?php
        require("./connect.php");
        $sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
        $rs = mysql_query($sql);

        echo "<form action='./reg.php'  method='post'> 
            <table>
              <tr> 
                <td>  </td>
                <td>  <font color='red'> $errormsg </font> </td> 
             </tr>         
             <tr>
                <td>  Username  </td>
                <td>  <input type='text' name='user' />  </td> 
             </tr>         
             <tr>
                <td> Select  Linecard </td> 
             <td>";
     ?>
           <Select name='selectID'>  
              <option value= '0' >  Select  from here </option>  
              <?php

                   while($rownw = mysql_fetch_array($rs)){
                     echo "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
                    }
                ?>
               </select>    
             </tr> 

            <tr>
                <td>   </td>
                <td> <input type='submit' name='registerbtn' value='Register' />   </td> 
            </tr>

        </table> 
     </form>    
 <?php   
    mysql_close() ;
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:22:52.670

您可以将选项存储到一个变量中，让我们称之为 $options 然后将其插入到您的 $form 变量中。最后，您可以随心所欲地回显它。

```
<?php
require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);

$options = "<option value= '0' >  Select  from here </option>";
while($rownw = mysql_fetch_array($rs)){
    $options .= "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
} 
mysql_close() ;

$form = "<form action='./reg.php'  method='post'> 
<table>
<tr> 
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td> 
</tr> 

<tr>
<td>  Username  </td>
<td>  <input type='text' name='user' />  </td> 
    </tr> 

<tr>
<td> Select  Linecard </td> 
<td> <Select name='selectID'> $options </select>
</tr> 

<tr>
<td>   </td>
<td> <input type='submit' name='registerbtn' value='Register' />   </td> 
</tr>

</table> 
</form>"; 

echo $form; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:27:33.440

尝试这样做

```
<?php
require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);
?>
<form action="<?php echo $_SERVER['SCRIPT_NAME']; ?>" method="POST">
<table>
<tr> 
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td> 
</tr> 

<tr>
<td>  Username  </td>
<td>  <input type='text' name='user' />  </td> 
</tr> 
<?php   while($rownw = mysql_fetch_array($rs)){ ?>
<tr>
<td> Select  Linecard </td> 
<td> <Select name='selectID'> <?php  echo "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> "; ?>  </select>
</tr> 
<?php } //end of while loop ?>
<tr>
<td>   </td>
<td> <input type='submit' name='registerbtn' value='Register' />   </td> 
</tr>

</table> 
</form>; 
```

# delphi - TActionMainMenuBar 菜单中的 RadioItems

> ID：10530887
> 
> 赞同：4
> 
> 时间：2012-05-10T09:13:27.770
> 
> 标签：delphi, delphi-xe2

我使用 TActionMainMenuBar 来显示基于 TActions 的菜单。我通过设置相同的 GroupIndex 对操作进行分组。所以它们可以像 RadioGroup 一样操作，但问题是绘制的是检查而不是单选按钮。

有什么办法可以改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:17:01.047

这是我对`TPlatformDefaultStyleActionBars`.

![在此处输入图像描述](../Images/bef8e8502c0c5b9447082885d54a1a1f.png)

大多数代码只是从标准单元复制而来，除了`TFixedThemedMenuItemStyle.DoDrawMenuCheck`.

`TXPStyleMenuItem`请注意，如果您想在 Vista 之前的操作系统上运行您的软件，您也必须覆盖。

```
uses
  // ... add these units
  StdStyleActnCtrls, XPStyleActnCtrls, XPActnCtrls, ImgList, Types, Themes, 
  StdActnMenus, ThemedActnCtrls, ListActns, UxTheme;

type
  TFixedThemedMenuItemStyle = class(TThemedMenuItem)
  private
    FCheckRect: TRect;
    FGutterRect: TRect;
    FPaintRect: TRect;
    FSubMenuGlyphRect: TRect;
    FSeparatorHeight: Integer;
    procedure DoDrawMenuCheck;
    procedure DoDrawText(DC: HDC; const Text: string; var Rect: TRect; Flags: Longint);
  protected
    procedure DrawGlyph(const Location: TPoint); override;
  public
    procedure CalcBounds; override;
  end;

  TFixedPlatformDefaultStyleActionBars = class(TPlatformDefaultStyleActionBars)
  public
    function GetControlClass(ActionBar: TCustomActionBar;
      AnItem: TActionClientItem): TCustomActionControlClass; override;
    function GetStyleName: string; override;
  end;

  TForm1 = class(TForm)
    ActionMainMenuBar1: TActionMainMenuBar;
    ActionManager1: TActionManager;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private

    Style: TFixedPlatformDefaultStyleActionBars;

  public

  end;

implementation

procedure TForm1.FormCreate(Sender: TObject);
begin
  Style := TFixedPlatformDefaultStyleActionBars.Create();
  ActionManager1.Style := Style;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  Style.Free();
end;

procedure TFixedThemedMenuItemStyle.CalcBounds;
const
  CheckMarkStates: array[Boolean] of Integer = 
    (MC_CHECKMARKDISABLED, MC_CHECKMARKNORMAL);
  SubMenuStates: array[Boolean] of Integer = (MSM_DISABLED, MSM_NORMAL);
var
  DC: HDC;
  LFont: HFONT;
  LTheme: HTheme;
  LBounds: TRect;
  LImageSize: TPoint;
  LHeight, LWidth, Offset: Integer;
  LGlyphSize, LGutterSize, LSeparatorSize, LSubMenuGlyphSize: TSize;
  LCheckMargins, LGutterMargins, LMenuItemMargins, LSeparatorMargins, LSubMenuGlyphMargins: TMargins;
begin
  // Fill in parent object's private fields.
  inherited;

  DC := CreateCompatibleDC(0);
  try
    LFont := SelectObject(DC, Screen.MenuFont.Handle);
    try
      Font.Assign(Screen.MenuFont);
      inherited;
      LTheme := ThemeServices.Theme[teMenu];
      LHeight := 0;
      LWidth := 0;

      // Check/Glyph
      GetThemePartSize(LTheme, DC, MENU_POPUPCHECK,
        CheckMarkStates[Enabled], nil, TS_TRUE, LGlyphSize);
      GetThemeMargins(LTheme, DC, MENU_POPUPCHECK,
        CheckMarkStates[Enabled], TMT_CONTENTMARGINS, nil, LCheckMargins);
      // Gutter
      GetThemePartSize(LTheme, DC, MENU_POPUPGUTTER, 0, nil, TS_TRUE, LGutterSize);
      GetThemeMargins(LTheme, DC, MENU_POPUPGUTTER, 0, TMT_SIZINGMARGINS, nil, LGutterMargins);
      // Menu item
      GetThemeMargins(LTheme, DC, MENU_POPUPITEM, MPI_NORMAL, TMT_SIZINGMARGINS, nil, LMenuItemMargins);
      GetThemePartSize(LTheme, DC, MENU_POPUPSUBMENU, SubMenuStates[Enabled], nil, TS_TRUE, LSubMenuGlyphSize);
      GetThemeMargins(LTheme, DC, MENU_POPUPSUBMENU, SubMenuStates[Enabled], TMT_CONTENTMARGINS, nil, LSubMenuGlyphMargins);

      // Calculate check/glyph size
      LImageSize := GetImageSize;
      if LImageSize.Y > LGlyphSize.cy then
        LGlyphSize.cy := LImageSize.Y;
      if LImageSize.X > LGlyphSize.cx then
        LGlyphSize.cx := LImageSize.X;
      Inc(LHeight, LGlyphSize.cy);
      Inc(LWidth, LGlyphSize.cx);

      // Add margins for check/glyph
      Inc(LHeight, LCheckMargins.cyTopHeight + LCheckMargins.cyBottomHeight);
      Inc(LWidth, LCheckMargins.cxLeftWidth + LCheckMargins.cxRightWidth);
      FCheckRect := Rect(0, 0,
        LGlyphSize.cx + LCheckMargins.cxRightWidth + LCheckMargins.cxRightWidth,
        LGlyphSize.cy + LCheckMargins.cyBottomHeight + LCheckMargins.cyBottomHeight);

      // Add size and margins for gutter
      Inc(LWidth, LGutterMargins.cxLeftWidth);
      FGutterRect.Left := LWidth;
      FGutterRect.Right := FGutterRect.Left + LGutterSize.cx;
      Inc(LWidth, LGutterSize.cx + LGutterMargins.cxRightWidth);

      // Add margins for menu item
      Inc(LWidth, LMenuItemMargins.cxLeftWidth + LMenuItemMargins.cxRightWidth);
      Offset := LWidth - TextBounds.Left - LMenuItemMargins.cxRightWidth;
      LBounds := TextBounds;
      OffsetRect(LBounds, Offset, -1);
      TextBounds := LBounds;

      // Add size of potential submenu glyph
      Inc(LWidth, LSubMenuGlyphSize.cx);
      Inc(LWidth, LSubMenuGlyphMargins.cxLeftWidth);
      Inc(LWidth, LSubMenuGlyphMargins.cxRightWidth);
      // Add Width of menu item to FSubMenuGlyphRect before using
      FSubMenuGlyphRect := Rect(-LSubMenuGlyphMargins.cxRightWidth - LSubMenuGlyphSize.cx,
        (Height - LSubMenuGlyphSize.cy) div 2,
        -LSubMenuGlyphMargins.cxRightWidth,
        ((Height - LSubMenuGlyphSize.cy) div 2) + LSubMenuGlyphSize.cy);

      // Add margins for menu short cut
      if ActionClient <> nil then
      begin
        LBounds := Rect(0, 0, 0, 0);
        DoDrawText(DC, ActionClient.ShortCutText, LBounds, DT_CALCRECT or DT_NOCLIP);
      end
      else
        LBounds := ShortCutBounds;
      Offset := FSubMenuGlyphRect.Left - LBounds.Right -
        LMenuItemMargins.cxRightWidth - LSubMenuGlyphMargins.cxLeftWidth;
      OffsetRect(LBounds, Offset, 0);
      // Add Width of menu item to ShortCutBounds before using
      ShortCutBounds := LBounds;
      Inc(LWidth, LMenuItemMargins.cxLeftWidth + LMenuItemMargins.cxRightWidth);

      // Adjust size if separator
      if Separator then
      begin
        GetThemePartSize(LTheme, DC, MENU_POPUPSEPARATOR, 0, nil, TS_TRUE, LSeparatorSize);
        GetThemeMargins(LTheme, DC, MENU_POPUPSEPARATOR, 0, TMT_SIZINGMARGINS, nil, LSeparatorMargins);
        LHeight := LSeparatorSize.cy + LSeparatorMargins.cyBottomHeight;
        LWidth := LSeparatorSize.cx;
        FSeparatorHeight := LSeparatorSize.cy;
      end;

      FGutterRect.Top := 0;
      FGutterRect.Bottom := LHeight;
      SetBounds(Left, Top,
        LWidth + TextBounds.Right - TextBounds.Left + ShortCutBounds.Right - ShortCutBounds.Left,
        LHeight);
    finally
      SelectObject(DC, LFont);
    end;
  finally
    DeleteDC(DC);
  end;
end;

// THE ONLY SERIOUS DIFFERENCE: RENDERING BULLETS INSTEAD OF CHECKMARKS FOR RADIO ITEMS
procedure TFixedThemedMenuItemStyle.DoDrawMenuCheck;
const
  CheckMarkBkgs: array[Boolean] of Integer = (MCB_DISABLED, MCB_NORMAL);
  CheckMarkStates: array[Boolean] of Integer = (MC_CHECKMARKDISABLED, MC_CHECKMARKNORMAL);
  RadioMarkStates: array[Boolean] of Integer = (MC_BULLETDISABLED, MC_BULLETNORMAL);
begin
  if IsChecked then
  begin
    DrawThemeBackground(ThemeServices.Theme[teMenu], Canvas.Handle,
      MENU_POPUPCHECKBACKGROUND, CheckMarkBkgs[Enabled], FCheckRect, nil);
    if not HasGlyph then
    begin
      if IsGrouped then
      begin
        DrawThemeBackground(ThemeServices.Theme[teMenu], Canvas.Handle,
          MENU_POPUPCHECK, RadioMarkStates[Enabled], FCheckRect, nil);
      end
      else
      begin
        DrawThemeBackground(ThemeServices.Theme[teMenu], Canvas.Handle,
          MENU_POPUPCHECK, CheckMarkStates[Enabled], FCheckRect, nil);
      end;
    end;
  end;
end;

procedure TFixedThemedMenuItemStyle.DoDrawText(
  DC: HDC; const Text: string; var Rect: TRect; Flags: Integer);
const
  MenuStates: array[Boolean] of Integer = (MPI_DISABLED, MPI_NORMAL);
var
  Options: TDTTOpts;
begin
  // Setup Options
{$IF NOT DEFINED(CLR)}
  FillChar(Options, SizeOf(Options), 0);
  Options.dwSize := SizeOf(Options);
{$ELSE}
  Options.dwSize := Marshal.SizeOf(TypeOf(Options));
{$IFEND}
  Options.dwFlags := DTT_TEXTCOLOR or DTT_COMPOSITED;
  if Flags and DT_CALCRECT = DT_CALCRECT then
    Options.dwFlags := Options.dwFlags or DTT_CALCRECT;

  // Retrieve text color
  GetThemeColor(ThemeServices.Theme[teMenu], MENU_POPUPITEM,
    MenuStates[Enabled or ActionBar.DesignMode], TMT_TEXTCOLOR, Options.crText);

  // Draw menu item text
  DrawThemeTextEx(ThemeServices.Theme[teMenu], DC, MENU_POPUPITEM,
    MenuStates[Enabled or ActionBar.DesignMode], Text, Length(Text), Flags, Rect, Options);
end;

procedure TFixedThemedMenuItemStyle.DrawGlyph(const Location: TPoint);
var
  LImageSize, LLocation: TPoint;
begin
  if (Action is TCustomAction) and TCustomAction(Action).Checked then
    DoDrawMenuCheck;
  if HasGlyph then
  begin
    LImageSize := GetImageSize;
    LLocation.X := ((FCheckRect.Right - FCheckRect.Left) - LImageSize.X) div 2;
    LLocation.Y := ((FCheckRect.Bottom - FCheckRect.Top) - LImageSize.Y) div 2;
    inherited DrawGlyph(LLocation);
  end;
end;

type
  TActionControlStyle = (csStandard, csXPStyle, csThemed);

function GetActionControlStyle: TActionControlStyle;
begin
  if Win32MajorVersion >= 6 then
  begin
    if ThemeServices.Theme[teMenu] <> 0 then
      Result := csThemed
    else
      Result := csXPStyle;
  end
  else
    if CheckWin32Version(5, 1) then
      Result := csXPStyle
    else
      Result := csStandard;
end;

function TFixedPlatformDefaultStyleActionBars.GetControlClass(ActionBar: TCustomActionBar;
  AnItem: TActionClientItem): TCustomActionControlClass;
begin
  if ActionBar is TCustomActionToolBar then
  begin
    if AnItem.HasItems then
      case GetActionControlStyle of
        csStandard: Result := TStandardDropDownButton;
        csXPStyle: Result := TXPStyleDropDownBtn;
      else
        Result := TThemedDropDownButton;
      end
    else
      if (AnItem.Action is TStaticListAction) or
         (AnItem.Action is TVirtualListAction) then
        Result := TCustomComboControl
      else
        case GetActionControlStyle of
          csStandard: Result := TStandardButtonControl;
          csXPStyle: Result := TXPStyleButton;
        else
          Result := TThemedButtonControl;
        end
  end
  else if ActionBar is TCustomActionMainMenuBar then
    case GetActionControlStyle of
      csStandard: Result := TStandardMenuButton;
      csXPStyle: Result := TXPStyleMenuButton;
    else
      Result := TThemedMenuButton;
    end
  else if ActionBar is TCustomizeActionToolBar then
  begin
    with TCustomizeActionToolbar(ActionBar) do
      if not Assigned(RootMenu) or
         (AnItem.ParentItem <> TCustomizeActionToolBar(RootMenu).AdditionalItem) then
        case GetActionControlStyle of
          csStandard: Result := TStandardMenuItem;
          csXPStyle: Result := TXPStyleMenuItem;
        else
          Result := TFixedThemedMenuItemStyle;
        end
      else
        case GetActionControlStyle of
          csStandard: Result := TStandardAddRemoveItem;
          csXPStyle: Result := TXPStyleAddRemoveItem;
        else
          Result := TThemedAddRemoveItem;
        end
  end
  else if ActionBar is TCustomActionPopupMenu then
    case GetActionControlStyle of
      csStandard: Result := TStandardMenuItem;
      csXPStyle: Result := TXPStyleMenuItem;
    else
      Result := TFixedThemedMenuItemStyle;
    end
  else
    case GetActionControlStyle of
      csStandard: Result := TStandardButtonControl;
      csXPStyle: Result := TXPStyleButton;
    else
      Result := TThemedButtonControl;
    end
end;

function TFixedPlatformDefaultStyleActionBars.GetStyleName: string;
begin
  Result := 'My fixed platform style';
end; 
```

# jquery - jQuery自动完成：设置链接的标题

> ID：10530888
> 
> 赞同：0
> 
> 时间：2012-05-10T09:13:33.733
> 
> 标签：jquery, jquery-ui, autocomplete

如果我做 ：

```
var countryList = [
    "London",
    "Milan",
    "New York"
];

$("#divDest").autocomplete({
    source: countryList
}); 
```

插件将呈现如下内容：

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 21; top: 243px; left: 768px; display: none; width: 131px;">
    <li class="ui-menu-item" role="menuitem">
        <a class="ui-corner-all" tabindex="-1">London</a>
    </li>

    <li class="ui-menu-item" role="menuitem">
        <a class="ui-corner-all" tabindex="-1">Milan</a>
    </li>

    <li class="ui-menu-item" role="menuitem">
        <a class="ui-corner-all" tabindex="-1">New York</a>
    </li>
</ul> 
```

好吧，假设我不仅要在链接上添加国家名称，还要在`title`属性中添加一些其他信息（例如，每个国家/地区的 ID）。如 ：

```
<a class="ui-corner-all" tabindex="-1" title="country_3523">New York</a> 
```

我怎么能用那个插件来做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:50:57.453

```
 _renderItem: function( ul, item) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( $( "<a></a>" ).text( item.label ).attr('title', item.title) )
            .appendTo( ul );
    }, 
```

# ruby-on-rails - 链接以编辑另一个模型

> ID：10530890
> 
> 赞同：0
> 
> 时间：2012-05-10T09:13:38.077
> 
> 标签：ruby-on-rails

我有 2 个具有以下关联的模型。

目标.rb

```
has_one :progress 
```

进度.rb

```
belongs_to :goal 
```

在目标索引页面中，我有一个链接，假设可以编辑该特定目标的进度记录，但我无法通过它找到进度记录的正确记录 ID。我的 link_to 代码如下。它将传递目标 id 而不是正确的进度 id。

应用程序/视图/目标/index.html.erb

```
<%= link_to 'Progress', edit_progress_path(goal) %> 
```

我该怎么办。

谢谢你。

干杯，阿兹伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:57:38.843

我喜欢使用 Rails 的“魔法”：

```
<%= link_to 'Progress', [:edit, goal.progress] %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:43:02.730

您不应该将`goal`对象传递给方法，而是将`progress`对象传递给`edit_progress_path`方法：

```
<%= link_to 'Progress', edit_progress_path(goal.progress) %> 
```

# android - 如何在android中将字符串转换为xml？

> ID：10530897
> 
> 赞同：0
> 
> 时间：2012-05-10T09:13:59.537
> 
> 标签：android, xml, xml-serialization

我需要将 List 中的数据转换为 XML 字符串。目前我在android中使用以下方法作为转换方法，

```
 private String writeXml(List<DataItem> item)
   {

    XmlSerializer serializer = Xml.newSerializer();
    StringWriter writer = new StringWriter();
    try {
        serializer.setOutput(writer);
        serializer.startDocument("UTF-16",null);
        serializer.startTag("", "MainData"); 
        serializer.startTag("", "Data"); 
        for (DataItem in: item)
            { 
            serializer.startTag("", "Key");
            serializer.text(in.getKey());
            serializer.endTag("", "Key");
            serializer.startTag("", "Value");
            serializer.text(in.getValue());
            serializer.endTag("", "Value");  
            }

        serializer.endTag("", "Data");
        serializer.endTag("", "MainData");
        serializer.endDocument();

        System.out.println(writer.toString());
        return writer.toString();

    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

我在 C# 中见过这种方法

```
 XmlSerializer serializer = new XmlSerializer(typeof(List<DataItem>));
        StringWriter sw = new StringWriter();

        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("","");
        serializer.Serialize(sw, tempdataitems,ns);

        form.AddField("EX" + i ,  sw.ToString()); 
```

但是在尝试这个时它显示

```
 Syntax error on token ">", Expression expected after this token 
```

在......的最后

```
 new XmlSerializer(typeof(List<DataItem>)); 
```

是否可以在android中使用相同的方法？或者还有其他方法可以进行相同的转换吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:31:40.387

您确定您的项目对象不包含“>”字符吗？如果是这样，你必须逃避它。

# android - 使用图像过滤列表视图

> ID：10530898
> 
> 赞同：0
> 
> 时间：2012-05-10T09:14:00.427
> 
> 标签：android, listview

我已经创建了自己的自定义 ListView 适配器，所以我试图过滤一些项目，任何想法我可以如何做到这一点。在标准适配器中很容易，所以我尝试了这个，但它不起作用：

```
import android.app.ListActivity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class lista_imagini extends ListActivity{

    String[] items={"lorem", "ipsum", "dolor", "sit", "amet",
            "consectetuer", "adipiscing", "elit", "morbi", "vel",
            "ligula", "vitae", "arcu", "aliquet", "mollis",
            "etiam", "vel", "erat", "placerat", "ante",
            "porttitor", "sodales", "pellentesque", "augue",
            "purus"};

    ImageAndTextAdapter adaptor = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.clist);

        final ListView ls = getListView();
        if (ls == null) Log.d("DHA", "Cacat");
        ls.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getApplicationContext(), ls.getItemAtPosition(arg2).toString(), Toast.LENGTH_LONG).show();

            }

        });

        adaptor = new ImageAndTextAdapter(getApplicationContext(),R.layout.customlist,items);
        setListAdapter(adaptor);

    }

    public class ImageAndTextAdapter extends ArrayAdapter<String> {

        private LayoutInflater mInflater;

        private String[] mStrings;

        private int mViewResourceId;

        public ImageAndTextAdapter(Context ctx, int viewResourceId,
                String[] strings) {
            super(ctx, viewResourceId, strings);

            mInflater = (LayoutInflater)ctx.getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);

            mStrings = strings;

            mViewResourceId = viewResourceId;
        }

        @Override
        public int getCount() {
            return mStrings.length;
        }

        @Override
        public String getItem(int position) {
            return mStrings[position];
        }

        @Override
        public long getItemId(int position) {
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            convertView = mInflater.inflate(mViewResourceId, null);

            ImageView iv = (ImageView)convertView.findViewById(R.id.icon2);
            iv.setImageResource(R.drawable.fail);

            TextView tv = (TextView)convertView.findViewById(R.id.label2);
            tv.setText(mStrings[position]);

            return convertView;
        }
    }

    public void testnow(View V)
    {
        items[3] = "Heeee";
        adaptor.getFilter().filter("ipsum");
        adaptor.notifyDataSetChanged();
        getListView().refreshDrawableState();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:10:28.687

您将不得不扩展过滤器类。然后您将获得更改 getCount 和 getItem。[检查此答案以获取示例](https://stackoverflow.com/questions/2519317/how-to-write-a-custom-filter-for-listview-with-arrayadapter)

# android - Androidplot：改进轴布局（删除截止值）

> ID：10530902
> 
> 赞同：4
> 
> 时间：2012-05-10T09:14:11.210
> 
> 标签：android, graph, charts, androidplot

在 Androidplot 上，我的 Axis Vals 被切断了，所以最后的值只显示了一半。如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T16:42:54.677

如果 Coretek 的解决方案不适合你，因为它不适合我，我发现这个解决方案可以产生所需的输出：

```
YOURPLOT.getGraphWidget().setGridPaddingRight(AmountOfSpaceDesired);
YOURPLOT.getGraphWidget().setGridPaddingTop(AmountOfSpaceDesired); 
```

这不仅会移动您的轴以不再被切断，还会移动您的图表。我想在顶部有一点额外的空间，我之前有一个点与右侧另一个点接触的地方一起接触。

我希望这可以帮助某人，因为它帮助了我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T09:17:59.913

```
dynamicPlot.getGraphWidget().setMarginTop(4);
dynamicPlot.getLegendWidget().setHeight(14); 
```

幸运的是，我仍然在 androidplot 论坛缓存中找到了一些东西。

# html - 在 Flash 中提供不错的 HTML 渲染支持

> ID：10530903
> 
> 赞同：0
> 
> 时间：2012-05-10T09:14:12.513
> 
> 标签：html, actionscript-3, flash

由于 htmlText 属性非常有限，在 Flash 播放器中呈现 HTML + CSS 的最佳解决方案是什么？

# ios - Titanium Appcelerator ACS - (iPhone) 无法接收成功发送的推送通知

> ID：10530905
> 
> 赞同：2
> 
> 时间：2012-05-10T09:14:23.530
> 
> 标签：ios, titanium, push-notification, appcelerator

对于我的钛移动应用程序，我想集成 ACS 推送通知。作为第一步，我浏览了 Push Notifications 文档。我已经按照文档中的说明配置了 iOS 的设置。我创建了两个 ACS 用户（比如说 A 和 B）并使用以下代码将他们订阅到我的自定义频道。

```
Cloud.PushNotifications.subscribe({
   channel: '4fa8c8bfb6855370430092d1',
   device_token: '0BCE1064500FBF6F122BB0000007D1B5F96BAC345FD0A950FD456098D36E0345'
}, function (e) {
     if (e.success) {
        alert('Success');
     } else {
       alert('Error:\n' +
        ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

现在，在我的 ACS 推送通知设置下，我可以看到我目前有 2 个 iOS 客户端订阅了推送通知。使用下面的代码，我从 ACS_UserA 已登录的设备 A 发送了一条广播消息。

```
Cloud.PushNotifications.notify({
   channel: '4fa8c8bfb6855370430092d1',
   payload: 'Welcome to push notifications'
}, function (e) {
     if (e.success) {
        alert('Success');
     } else {
          alert('Error:\n' +
         ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

我收到“成功”的警报。但是，我无法在 ACS_UserB 已登录的另一个设备 B 中收到通知。

根据此处的文档，我应该在“回调”回调中收到推送消息。但它永远不会被调用。

```
Ti.Network.registerForPushNotifications({
types: [
     Ti.Network.NOTIFICATION_TYPE_BADGE,
     Ti.Network.NOTIFICATION_TYPE_ALERT,
     Ti.Network.NOTIFICATION_TYPE_SOUND
],
 success:function(e) {
    Ti.API.info('Device Token :  '+e.deviceToken);
},
 error:function(e) {
    Ti.API.warn("push notifications failed: "+e);
},
 callback:function(e) {
    alert ('Push received');
}
}); 
```

Titanium SDK 版本：2.0.2 (04/18/12 12:18 0684d32) Titanium Studio，构建：2.0.1.201204132053 iPhone 设备系列：iphone iPhone SDK 版本：5.0 iPhone 模拟设备：iphone。

需要严重破解这个。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:59:32.263

您的应用程序 ID 是：***com.companyname.applicationname***吗？确保您不使用***com.companyname。****代替！

# android - 无法处理我的模拟器上的 CheckData 按钮

> ID：10530908
> 
> 赞同：0
> 
> 时间：2012-05-10T09:14:42.827
> 
> 标签：android

当我在模拟器上单击 CheckData 按钮时，它显示一个

```
> error:  android.content.ActivityNotFoundException: Unable to find
> explicit activity class {app.login/app.login.DatabaseSample}; have you
> declared this activity in your AndroidManifest.xml? 
```

但我已在 android mnaifest.xml 中声明为

```
 package="app.login"<application
        android:icon="@drawable/ic_launcher"        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"            android:name=".LoginappActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".SaveData"> </activity>
        <activity android:name=".CheckData"></activity>
        <activity android:name=".DatabaseSample"> </activity>

    </application> 
```

这是我的 CheckData.java 文件

```
public class CheckData extends ListActivity  {     
    TextView selection;
    public int idToModify; 
    DataManipulator dm;

    List<String[]> names1 =null ;
    String[] stg1;
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.check);
          dm = new DataManipulator(this);
          names1 = dm.selectAll();

        stg1=new String[names1.size()]; 

        String stg;

        for (String[] name : names1) {stg = name[1];
        }

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(   
                this,android.R.layout.simple_list_item_1,stg1);
        this.setListAdapter(adapter);
        selection=(TextView)findViewById(R.id.selection);

    }      

    public void onListItemClick(ListView parent, View v, int position, long id) {
        selection.setText(stg1[position]);
    }
} 
```

Logcat 是

```
05-10 12:42:03.292: E/AndroidRuntime(606): FATAL EXCEPTION: main
05-10 12:42:03.292: E/AndroidRuntime(606): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.login/app.login.DatabaseSample}: java.lang.NullPointerException
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.os.Looper.loop(Looper.java:137)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-10 12:42:03.292: E/AndroidRuntime(606):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 12:42:03.292: E/AndroidRuntime(606):  at java.lang.reflect.Method.invoke(Method.java:511)
05-10 12:42:03.292: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-10 12:42:03.292: E/AndroidRuntime(606):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-10 12:42:03.292: E/AndroidRuntime(606):  at dalvik.system.NativeStart.main(Native Method)
05-10 12:42:03.292: E/AndroidRuntime(606): Caused by: java.lang.NullPointerException
05-10 12:42:03.292: E/AndroidRuntime(606):  at app.login.DatabaseSample.onCreate(DatabaseSample.java:16)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.Activity.performCreate(Activity.java:4465)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-10 12:42:03.292: E/AndroidRuntime(606):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-10 12:42:03.292: E/AndroidRuntime(606):  ... 11 more 
```

在模拟器上显示不幸的是 loginapp 已停止

这是我的 DatabaseSample.java 文件

```
public class DatabaseSample extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        View button1Click = findViewById(R.id.Button01add);
        button1Click.setOnClickListener(this);
        View button2Click = findViewById(R.id.Button01home);
        button2Click.setOnClickListener(this);        

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){

        case R.id.Button01add:
            Intent i = new Intent(this, SaveData.class);  
            startActivity(i);
            break;
        case R.id.Button01home:
            Intent i1 = new Intent(this, CheckData.class);  
            startActivity(i1);
            break;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:35:37.883

在您的 Logcat 中，这显示`DatabaseSample`Activity，这意味着您正在尝试打开`DatabaseSample`，这未在 Manifest 中声明，

另一方面，您是说您的意图是打开`CheckData`Activity。

请检查一下，如果您打开的是`Activity`正确`onClick()`的`Button`.

似乎您正在从一个示例开发您的项目，其中`DatabaseSample`是一个`Activity`，在进行更改时，您`DatabaseSample`从清单中删除了但没有从 Java 代码中删除，这就是它没有给您任何编译时错误的原因。

# php - 如何在 robots.txt 文件中阻止此类 URL？

> ID：10530909
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:14:44.090
> 
> 标签：php, url, block, robots.txt, robot

这是两组条件，我想用`/search/jobdescription?`and阻止所有 url`search/jobdescription/`

1)`http://<--sitename-->/search/jobdescription?id=0154613&css=a&act=a`

2)`http://<--sitename-->/search/jobdescription/id/0154613/css/a/act/a`

如何在 robots.txt 文件中阻止这两种情况。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:19:55.117

很简单：

```
User-agent: *
Disallow: /search/jobdescription 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:20:12.270

您还可以使用[X-Robots-Tag HTTP 标头来](https://developers.google.com/webmasters/control-crawl-index/docs/robots_meta_tag?hl=fr-FR "机器人元标记和 X-Robots-Tag HTTP 标头规范")防止索引。

# windows - 用于检查系统中已安装程序及其版本的脚本

> ID：10530911
> 
> 赞同：3
> 
> 时间：2012-05-10T09:14:47.283
> 
> 标签：windows, vbscript, batch-file, wmi

我遇到了编写脚本的任务，该脚本首先在 Windows 服务器上启动 32 位 Websphere MQ 客户端的静默安装。然后检查是否安装成功......所以我写了以下脚本：

```
 @echo off
  REM Author : Akshay Sinha
  REM Date Created : 07/05/2012
  REM Installing Websphere MQ.......
  Msiexec /q /i "%CD%\MSI\IBM WebSphere MQ.msi" /l*v .\install.log /m mif_file             TRANSFORMS="1033.mst" AGREETOLICENSE="yes"
  echo Script to check if the installation failed !!!
  echo Waiting for installaion to complete.......
  REM Script will wait for 2 mins, This is to ensure that install.log gets fully             generated.
  ping 123.45.67.89 -n 1 -w 120000 > nul
  echo Wait Over
  find /C "Installation operation failed" "%CD%"\install.log > tmp.log
  for /f "tokens=1,2,3 delims=:" %%a in (tmp.log) DO (
  SET /a FOUND_STR=%%c
  echo %FOUND_STR%
  )
  del tmp.log
  SET %FOUND_STR%=%FOUND_STR: =%
  echo %FOUND_STR%
  if %FOUND_STR% EQU 0 (
  echo Installation Of MQ completed without any errors!!!!!
  EXIT /B 0
  )
  if %FOUND_STR% GTR 0 (
  echo There were errors while installing MQ.. Pls Verify!!!
  EXIT /B 1
  ) 
```

该脚本适用于全新安装。即，如果上述软件尚未安装在系统上。

但是，我需要增强此脚本，以便它应该检查系统中现有的 Websphere MQ 安装及其版本。--如果版本不是我们需要的版本（当然，我将从命令行提供），它应该启动卸载。

问题是我不想使用搜索文件系统的方法。那么如何使用 WMI 类完成此任务。？？我查找了 Win32_Product 类，但它只返回了一个已安装的程序（尽管我的系统上安装了 40 个应用程序）。所以我想知道：1）在系统上搜索特定程序的具体方法是什么.（我对 VbScripting 或批处理编程持开放态度） 2）已安装软件的注册表项的值是否在所有系统中保持相同，并且是否因不同的 virsions 而有所不同？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:05:00.880

您可能不需要 WMI 来实现这一点。只需在注册表中查询`hklm\software\Microsoft\Windows\CurrentVersion\Uninstall\`密钥，然后检查返回的值。

从这段代码开始......

```
for /f "tokens=*" %%a in ('reg query hklm\software\Microsoft\Windows\CurrentVersion\Uninstall\ ^| find /i "IBM Websphere MQ" ') do (
 echo %%a
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:27:25.987

感谢 PA 的提示。但是我想出了一个使用 VBScript 的解决方案。我从我原来的批处理文件中调用这个脚本。实际上，我编写了一个 vb 脚本，它列举了在以下位置可用的不同注册表项：

```
 SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\ 
```

并搜索“IBM WebSphere MQ”作为“DisplayName”。找到后，它将列出其版本号和“产品代码”。请注意，我们可以从命令行使用“产品代码”进行安装...以下是我编写的脚本。我把它贴在这里供大家使用。请放心使用.......

```
 '------------------------------------------------------------------------------------      
  'Script Name : listMQ.vbs
  'Author      : Akshay Sinha
  'Created     : 05/10/12
  'Description : This Script attempts to check if the correct version of Websphere MQ             is already installed on the system.
  '            : If found the Script will exit with a ERRORLEVEL of 0.
  '            : If found but not of correct version... Script will exit with a 
  '              ERRORLEVEL of 1..Which in turn will initiate a Uninstalation      
  '            : If not found, Script will exit with a ERRORLEVEL of 2 and initiate a 
  '              a fresh installation.
  '            : Syntax: at command prompt ->
  '            : C:>Cscript listMQ.vbs
  '            : Check the value of %ERRORLEVEL% after execution. 
  '            : C:>echo %ERRORLEVEL%. Should give 0,1 or 2
  '------------------------------------------------------------------------------------

    Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE

    strComputer = "."
    strKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
    strEntry1a = "DisplayName"
    strEntry1b = "QuietDisplayName"
    strEntry1c = "DisplayVersion"
    strEntry1d = "UninstallString"

    Set objReg = GetObject("winmgmts://" & strComputer & "/root/default:StdRegProv")
    objReg.EnumKey HKLM, strKey, arrSubkeys
    WScript.Echo "Installed Applications" & VbCrLf
intVersionNum="1.0.0.0"
    For Each strSubkey In arrSubkeys
    intRet1 = objReg.GetStringValue(HKLM, strKey & strSubkey, strEntry1a, strValue1)
if intRet1 <> "" Then
objReg.GetExpandedStringValue HKLM, strKey & strSubkey, strEntry1a, strValue1
intCompare=StrComp("IBM WebSphere MQ",strValue1,vbTextCompare)
    IF intCompare = 0 THEN
objReg.GetExpandedStringValue HKLM, strKey & strSubkey, strEntry1c, intVersionNum
strUninstall=strSubkey
WScript.Echo "Congratulations!! Websphere MQ is already installed on this system"
        WScript.Echo strEntry1a & " : " & strValue1 
        WScript.Echo strEntry1c & " : " & intVersionNum 
    END IF
End If
Next

IF intVersionNum="1.0.0.0" THEN
        WScript.Echo "Sorry Websphere MQ was not found on this system" 
        WScript.Quit 2
END IF

intVersionCompare=StrComp("7.0.1.5",intVersionNum,vbTextCompare)
IF intVersionCompare = 0  THEN
WScript.Echo "Congratulations!! Correct version of Websphere MQ is installed" 
WScript.Echo "Uninstall String for this product is : " & strUninstall
WScript.Quit 0
ELSE
WScript.Echo "Wrong Version of MQ installed"
WScript.Echo "Initiating Unistallation....."
WScript.Quit 1
END IF 
```

这是一个非常不言自明的脚本。如果您遇到任何问题，请告诉我。

# c# - 不检查 web.config 文件的身份验证

> ID：10530913
> 
> 赞同：2
> 
> 时间：2012-05-10T09:14:49.567
> 
> 标签：c#, asp.net, entity-framework, asp.net-membership, forms-authentication

我正在尝试使用 ASP.NET 表单身份验证功能，但我不可能将每个成员都添加到 Web 配置文件中，因为可能有数千人在使用该应用程序。我只是想知道是否可以在表单身份验证中执行以下所有操作？

1.  用户登录。
2.  标记要授权的用户。
3.  允许访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T09:16:32.247

使用[MemebrshipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)基础设施。

您可以使用现有的 SqlMemebrshipProvider（它使用专用的 SQL DB 来保存数据）或滚动您自己的继承基类。

然后将其安装在 Web.config 中（如底部同一篇文章中所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:21:42.840

您可以通过 create user 方法使用 Membership 提供程序。[Membershipprovider.createuser](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.createuser.aspx)

创建伪代码

```
Membership.CreateUser(
 username, password, email,
question, answer, isApproved,
 out flag);
if(flag== MembershipCreateStatus.Success)
    {
// success!  

    } 
```

你也可以参考这个链接来实现

1.  [会员提供者](http://odetocode.com/articles/427.aspx)
2.  [成员资格、角色、个人资料](http://www.4guysfromrolla.com/articles/120705-1.aspx)
3.  [自定义会员提供者](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)

# jquery - FancyBox '未捕获的类型错误：无法调用未定义的方法'隐藏''

> ID：10530916
> 
> 赞同：5
> 
> 时间：2012-05-10T09:15:12.030
> 
> 标签：jquery, css, fancybox

我一直在玩花式盒子。我在 CakePHP 框架中工作，并制作了一个管理面板。这个面板有几个选项，我通过 AJAX 将它们加载到页面本身的 Div 中。

现在，当我将图像放入此 div 并尝试使用 Fancybox 时，单击图像（放大）时出现此错误：

```
Uncaught TypeError: Cannot call method 'hide' of undefined
N
I
b.fn.fancybox
f.event.dispatch
f.event.add.h.handle.i 
```

现在这是我的 ajax 加载器（functions.js）

```
$(".cmsPage").click(function() {
    var url = $(this).attr("href");

    $.ajax({
        url: url,
        success: function(data){
            $("#admin_wrapper").fadeIn('slow');
            $("#admin_content").fadeIn('slow');
            $("#admin_close").fadeIn('slow');
            $("#admin_content").html(data);

        }
    });
    return false;
}); 
```

admin_content 是显示图像的位置：

```
#admin_content{
    display:none;
    position:absolute;
    z-index:10;
    background-color:#fff;
    opacity:1;
    width:1000px;
    min-height:500px;
    top:1%;
    color:black;
    padding:10px;
    margin:10px;
    border:solid black 1px;
    border-radius:5px;          
} 
```

但是，如果我转到页面本身（不使用 ajax），它工作得非常好。

有什么东西可以推翻fancybox吗？这个错误对我来说不是那么清楚。[我在这里](http://groups.google.com/group/fancybox/tree/browse_frm/month/2010-08/c43fd9a7b7ff8774?rnum=141&_done=%2Fgroup%2Ffancybox%2Fbrowse_frm%2Fmonth%2F2010-08%3Ffwc%3D1%26)尝试了一切但我没有使用wordpress。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T03:07:16.087

我遇到了同样的错误，因为我愚蠢地在页面上包含了 jquery.fancybox.js 两次。只需删除第二个电话，问题就应该得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T13:27:48.250

我有同样的问题，问题是，fancybox 不止一次被初始化。只需要确保，初始化一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-10T03:04:08.477

我也遇到过这个问题。问题是我保存了一个 jsFiddle 的源代码，我一直在努力在服务器沙箱环境中对其进行测试。当从 jsFiddle 初始化 fancyBox (1.3.4) 时，它创建了很多隐藏的 div 以及与灯箱构建方式相关的这些。一旦我注意到这一点并`<divs>`从源代码中删除了所有这些额外内容，它就可以正常工作了。

# html - 我应该在哪里安装 webkit 的插件？

> ID：10530920
> 
> 赞同：2
> 
> 时间：2012-05-10T09:15:39.430
> 
> 标签：html, c, linux, flash, webkit

我想用webkitGTk播放html视频或本地视频，所以需要一些插件，例如libflashplayer.so。我想知道我应该在哪里安装这些插件以及如何找到它？我的工作环境：ubuntu11.10;webkitGTK;GTK+3.0;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:42:14.797

如何为 linux 安装一步一步的 flash 播放器。

当您尝试为您的 linux 操作系统安装 flash 播放器时，您下载文件 libflashplayer.

第 1 步：访问 Adob​​e 网站并下载适合您的 flash 播放器 libflashplayer.so 32-bit/64bit 版本。然后解压到 libflashplayer.so 文件。

```
[http://labs.adobe.com/downloads/flashplayer10.html][1] 
```

第2步：

cd 到文件夹有文件 libflashplayer.so 并安装

如果您使用的是 FireFox：

```
sudo mv libflashplayer.so /usr/lib/mozilla/plugins/libflashplayer.so 
```

如果您使用的是 Google Chrome + Firefox

```
sudo mv libflashplayer.so /usr/lib/mozilla/plugins/libflashplayer.so

sudo mkdir /opt/google/chrome/plugins

sudo cp /usr/lib/flashplugin-installer/libflashplayer.so /opt/google/chrome/plugins 
```

# c# - 如何解析不同格式的地理坐标

> ID：10530922
> 
> 赞同：2
> 
> 时间：2012-05-10T09:15:43.030
> 
> 标签：c#, parsing, textbox, coordinates

有谁知道可以从一个字符串解析地理坐标而无需预先指定格式的 C# 库。目标是启用“类似谷歌”的数据输入和解释。

应该支持的一些格式：

*   "12 34.56'N 123 45.55'E"
*   “12°N 34°W”
*   "12.345°N 123.456°E"
*   ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:26:03.960

我一直在研究一个可以解析坐标字符串的简单地理空间库。它被称为[Geo](https://github.com/sibartlett/Geo)，并在 LGPL 下获得许可。

Coordinate 类有一个静态 Parse 方法和几个静态 TryParse 方法。

# java - Java Class.cast() 与普通转换相比的效率？

> ID：10530923
> 
> 赞同：3
> 
> 时间：2012-05-10T09:15:43.877
> 
> 标签：java, casting

我正在研究一个泛型类，我想使用 Class.cast() 进行一些转换，以避免那些讨厌的未经检查的转换警告或方法上的 @SupressWarning 注释。

我认为 Class.cast() 应该与直接投射基本相同。但像所有反射方法一样，情况可能并非如此。有谁知道它们之间的确切区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:18:41.020

我建议尽可能使用 Class.cast() 而不是 @SuppressWarnings。

不要关心这里的性能。如果您有性能问题，请分析您的应用程序，如果这成为热点，我会感到非常惊讶。

# javascript - 页面加载时显示和隐藏微调器

> ID：10530927
> 
> 赞同：1
> 
> 时间：2012-05-10T09:16:02.520
> 
> 标签：javascript, html

当页面加载以及用户执行 AJAX 请求时，如何显示和隐藏微调器（使用 spin.js）？我正在考虑启动微调器的 onload 消息，但该事件意味着内容已加载，因此可能是放置它的不好地方。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:20:34.553

在 AJAX 请求中，最好在 AJAX 调用之前启动微调器并在成功响应时隐藏。

当页面加载时，您可以在`<script>`标签后加载微调器的位置添加`<body>`标签，并在`onload`触发事件时隐藏该微调器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:24:33.100

你应该阅读更多关于 AJAX 的内容。对我来说，在谈论 AJAX 请求时提到 onLoad 事件有点奇怪。

只是一个提示：在启动 AJAX 请求时开始显示微调器，并在您的请求返回您想要的/完成后停止它。

*   [Ajax 快速简单](http://blog.webandnow.com/blog/2008/02/17/ajax-fast-and-easy/)
*   [w3schools ajax](http://www.w3schools.com/ajax/default.asp)
*   [阿贾克斯示例](http://www.degraeve.com/reference/simple-ajax-example.php)
*   [教程列表](http://www.javascriptsource.com/ajaxTutorials)
*   也许也很有趣：[jQuery（对于绝对初学者）](http://blog.themeforest.net/tutorials/jquery-for-absolute-beginners-day-2/)

# php - 验证后邮件不发送

> ID：10530931
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:16:30.337
> 
> 标签：php, javascript, forms, email

这是我昨晚提出的一个问题的扩展版本，但更详细。我所有的 php 文件和 js 文件都在一个名为 js 的文件夹中，从我的 html 页面向下一层。我有一个联系表格，可以使用 php mail 将我的购物车内容和表单输入邮寄到我的电子邮件中。我正在验证提交时的表单：

```
<form name="theForm" id="theForm" onsubmit="return validateFormOnSubmit(this)"> 
```

使用此提交按钮：

```
<input type=submit name=Submit value=Send style=cursor:pointer/> 
```

验证正常工作，这里是代码（validate.js）：

```
function setSelRange(inputEl, selStart, selEnd) { 
if (inputEl.setSelectionRange) { 
inputEl.focus(); 
inputEl.setSelectionRange(selStart, selEnd); 
} else if (inputEl.createtextRange) { 
var range = inputEl.createtextRange(); 
range.collapse(true); 
range.moveEnd('character', selEnd); 
range.moveStart('character', selStart); 
range.select(); 
} 
}

window.onload=function(){
setSelRange(document.theForm.textbox, 0, 0);
}

function validateFormOnSubmit(theForm) {
var reason = "";
reason += validateName(theForm.name);
reason += validatePhone(theForm.phone);
reason += validateEmail(theForm.emaile);

if (reason != "") {
alert("Some fields need correction:\n" + reason);
return false;
}

simpleCart.checkout()
}

function validateEmpty(fld) {
var error = "";

if (fld.value.length == 0) {
    fld.style.background = '#3399ff'; 
    error = "The required field has not been filled in.\n"
} else {
    fld.style.background = 'White';
}
return error;  
}

function trim(s)
{
return s.replace(/^\s+|\s+$/, '');
}

function validateName(fld) {
var error = "";
var illegalChars = /\W/; // allow letters, numbers, and underscores

if (fld.value == "") {
    fld.style.background = '#3399ff'; 
    error = "Please enter a name.\n";
} else if ((fld.value.length < 2) || (fld.value.length > 30)) {
    fld.style.background = '#3399ff'; 
    error = "The nme is too long!\n";
} else {
    fld.style.background = 'White';
}
return error;
}

function trim(s)
{
return s.replace(/^\s+|\s+$/, '');
}

function validateEmail(fld) {
var error="";
var tfld = trim(fld.value);                        // valu
trimmed off
var emailFilter = /^[^@]+@[^@.]+\.[^@]*\w\w$/ ;
var illegalChars= /[\(\)\<\>\,\;\:\\\"\[\]]/ ;

if (fld.value == "") {
    fld.style.background = '#3399ff';
    error = "Please enter an email address.\n";
} else if (!emailFilter.test(tfld)) {              //test email for illegal characters
    fld.style.background = '#3399ff';
    error = "Please enter a valid email address.\n";
} else if (fld.value.match(illegalChars)) {
    fld.style.background = '#3399ff';
    error = "The email address contains illegal characters.\n";
} else {
    fld.style.background = 'White';
}
return error;
} 

function validatePhone(fld) {
var error = "";
var stripped = fld.value.replace(/[\(\)\.\-\ ]/g, '');    

if (fld.value == "") {
    error = "Please enter a phone number.\n";
    fld.style.background = '#3399ff';
 } else if (isNaN(parseInt(stripped))) {
    error = "The phone number can only contain numbers.\n";
    fld.style.background = '#3399ff';
 } else if (!(stripped.length == 10)) {
    error = "The phone number is the wrong length.     area        code.\n";
    fld.style.background = '#3399ff';
}
return error;
} 
```

当表单成功验证时，我想然后运行函数 simpleCart.checkout() ：（来自上面的代码）

```
 if (reason != "") {
alert("Some fields need correction:\n" + reason);
return false;
}

simpleCart.checkout()
} 
```

这是我要调用的**simpleCart.js中的函数（设置为 emailCheckout）：**

```
me.checkout = function() {
    if( me.quantity === 0 ){
        error("Cart is empty");
        return;
    }
    switch( me.checkoutTo ){
        case PayPal:
            me.paypalCheckout();
            break;
        case GoogleCheckout:
            me.googleCheckout();
            break;
        case Email:
            me.emailCheckout();
            break;
        default:
            me.customCheckout();
            break;
    }
};

me.emailCheckout = function() {    

itemsString = "";
for( var current in me.items ){ 
    var item = me.items[current];
    itemsString += item.name + " " + item.quantity + " " + item.price + "\n";
}   

var form = document.createElement("form");
form.style.display = "none";
form.method = "POST";
form.action = "js/sendjs.php";
form.acceptCharset = "utf-8";
form.appendChild(me.createHiddenElement("wsp_key", wsp_key));
form.appendChild(me.createHiddenElement("wsp_code", wsp_code));
form.appendChild(me.createHiddenElement("textbox", textbox));
form.appendChild(me.createHiddenElement("name",name));
form.appendChild(me.createHiddenElement("phone",phone));
form.appendChild(me.createHiddenElement("emaile",emaile));
form.appendChild(me.createHiddenElement("jcitems", itemsString));
form.appendChild(me.createHiddenElement("jctotal", me.total));
document.body.appendChild(form);
form.submit();
document.body.removeChild(form);
} 
```

它从表单和操作 sendjs.php 中接收购物车信息、输入和验证码密钥和代码，然后将其邮寄给我：

（来自上面的代码）

```
form.action = "js/sendjs.php"; 
```

如果验证码正确，它将邮寄给我并重定向到“from-accepted.php”页面，如果不正确，它将重定向到“form-rejected.php”页面（sendjs.php）：

```
<?php
include_once("wsp_captcha.php");

if(WSP_CheckImageCode() != "OK") {
header('location:/form-rejected.php');
die();
}
$to      = 'diysoakwells@hotmail.com';
$subject = 'Order Inquiry';
$jcitems = " <p><b>ORDER:</b></p><p> " . $_POST['jcitems']."<p/>" .     "<p><b>Total:</b>     $" . $_POST['jctotal']."</p>";
$time = date ("h:i A"); 
$date = date ("l, F jS, Y");
$headers = "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= 'From: inquiry@diysoakwells.com' . "\r\n" .
'Reply-To: noreply@diysoakwells.com' . "\r\n" .
'X-Mailer: PHP/' . phpversion();
$name = $_POST['name'];
$phone = $_POST['phone'];
$emaile = $_POST['emaile'];
$textbox = $_POST['textbox'];
$text = "<html><body><p>This form was submitted on Your Web Site on \n $date at\n $time</p><p><b>Message:</b>\n$textbox</p><p><b>Customers Email Address:</b>$emaile</p><p><b>Customers Name:</b> $name </p><p><b>Customers Phone    Number:</b> $phone </p></html></body>";
$body = $text . $jcitems;
mail($to, $subject, $body, $headers);
Header('Location: ../form-accepted.php');
?> 
```

**问题是验证后不会操作 sendjs.php 并且只是重新加载联系页面。调试器没有显示错误，我已经通过其他方式测试了 simpleCart.checkout，它应该可以工作。很抱歉这篇文章的长度，但我很困惑并且正在失去业务（并且为了让它工作而睡了很多觉）没有这个表格起作用。**

这是该页面的链接：

[http://www.diysoakwells.com.au/cart.php](http://www.diysoakwells.com.au/cart.php)

有没有人有什么建议？我现在必须跳出一个小时，但我会监控这篇文章，当我回来时，至少在接下来的四五个小时内解决这个问题，或者直到问题解决。提前致谢。

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:38:16.130

在 Chrome 中我得到了这个错误： Uncaught TypeError: Cannot read property 'textbox' of undefined on validate.js:16

顺便说一句，我被重定向到[http://www.diysoakwells.com.au/form-rejected.php](http://www.diysoakwells.com.au/form-rejected.php)，所以帖子看起来还可以。以前它不起作用，因为我的购物车是空的

# jquery - 在 VS2010 中启用 jQuery Intellisense 而不引用本地 jQuery（或在每个文件中）

> ID：10530933
> 
> 赞同：4
> 
> 时间：2012-05-10T09:16:43.513
> 
> 标签：jquery, visual-studio-2010, intellisense, javascript-intellisense

所以我一直在研究 jQuery，并认为如果我正在从事的项目使用 vsdoc 会很好。

问题是为项目启用 Intellisense 的所有方法都不合适。

我需要能够在不引用每个文件中的 vsdoc 的情况下启用 IntelliSense，而且我们目前还使用 jQuery CDN，因此需要一个选项而不修改任何代码本身，是否有任何选项或任何允许我添加外部 jsdoc 的选项？

所以澄清一下，我正在寻找一种在不修改我的 VS2010 项目的情况下启用 jQuery IntelliSense 的方法，希望通过 VS2010 选项或其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:44:00.293

如果你`jquery-vsdoc.js`除了你的`jquery.js`，仅仅引用`jquery.js`就足以让 IntelliSense 运行。它可能不仅适用于 jquery，而且适用于其他带有 -vsdoc.js 的文件（也可能是 .debug.js）。[支持“-vsdoc.js”智能感知文档文件的 VS2008 SP1 修补程序](http://blogs.msdn.com/b/webdevtools/archive/2008/11/07/hotfix-to-enable-vsdoc-js-intellisense-doc-files-is-now-available.aspx)。这篇文章是关于 VS2008 的，我写的是 VS2010，但我认为陈述是有效的（我只尝试过`jquery-vsdoc.js`）。此技术适用于 .aspx，但不适用于 .html。

您还可以使用母版页查看[JScript IntelliSense 常见问题解答](http://blogs.msdn.com/b/webdevtools/archive/2008/11/18/jscript-intellisense-faq.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T04:37:24.897

转到 Tools-Options-Text Editor-Javascript-Intellisense-References 并在 Implicit Web 组中放置对您正在使用的 jquery 版本的 intellisense 文件的引用。

![在此处输入图像描述](../Images/18fc5059a78a24be9a0c7e05bf958854.png)

要使用 intellisense 获取最新的 jquery 文件，请使用 nuget 包安装程序，默认情况下它将创建一个脚本文件夹并将 jquery version.js、min.js 和 intellisense.js 文件放入...从那里您可以将它们复制到大多数 Microsoft 参考资料都放置在该位置，通常位于

在包管理器控制台中安装包 jquery。

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\JavaScript\References 
```

# c++ - 模板类 typedef - 在类外使用

> ID：10530934
> 
> 赞同：3
> 
> 时间：2012-05-10T09:16:51.613
> 
> 标签：c++, visual-studio-2010, templates

我有这样的课：

```
struct WorkItemResultData;

template <typename ExecutionPolicy>
class Engine
{
public:
    typedef std::shared_ptr<WorkItemResultData> WorkItemResultData_ptr;
} 
```

`typedef`不依赖于任何模板参数。有没有办法在类`Engine::WorkItemResultData_ptr`之外使用类型`Engine`？

*编辑*我知道我可以像 awoodland 那样使用它，提出下面的解决方案，但我的 typedef 独立于类型参数，并且希望能够在不指定特定引擎类型的情况下执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:31:52.117

由于 typedef 根本不依赖`Engine`，你可以把它从类中拉出来：

```
typedef std::shared_ptr<WorkItemResultData> WorkItemResultData_ptr;

template <typename ExecutionPolicy>
class Engine {...}; 
```

如果你想保持封装，只需使用命名空间：

```
namespace Engine
{
    typedef std::shared_ptr<WorkItemResultData> WorkItemResultData_ptr;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T09:19:51.073

> 有没有办法`Engine::WorkItemResultData_ptr`在 Engine 类之外使用类型？

是的，但您需要说明`typename`它是否在模板上下文中，例如：

```
template <typename T>
void foo() {
  typename Engine<T>::WorkItemResultData_ptr instance;
} 
```

如果没有类型，您将无法访问它`typedef`。但是，有三种可能的解决方法：

1.  `typedef`模板外！- 如果它不依赖于类型，它可能与模板没有太大关系。
2.  使用 bodge 并参考`Engine<void>::WorkItemResultData_ptr`.
3.  有一个非模板基类，其中包含 typedef 并从中继承。然后您可以访问非模板基类。

# google-maps - 如何在多边形的每个坐标点放置标记？

> ID：10530937
> 
> 赞同：0
> 
> 时间：2012-05-10T09:17:00.827
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试在谷歌地图 v3 上创建一个多边形，并在多边形的每个 LatLng 点显示一个标记。当您单击任何标记时，信息窗口应显示标记所在的坐标。

到目前为止，我已经在地图上绘制了一个多边形，当您单击它时，它将显示多边形的每个坐标。我需要下一步的帮助。我想在每个点放置一个标记，当单击告诉 LatLng 坐标时将显示一个信息窗口。到目前为止我所做的链接位于[http://www.sugarcube.ie/TEST/googlemaps/conor/polygonPoints.html](http://www.sugarcube.ie/TEST/googlemaps/conor/polygonPoints.html) 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:34:39.180

嗨，如果您有实际设置的坐标：

[看这里制作标记](https://developers.google.com/maps/documentation/javascript/reference#Marker)

另请参阅[此处](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)以获取有关标记的信息窗口

如果您需要更多帮助，请不要害怕问，我有一些示例代码，我目前无法访问它，抱歉。

以下是 google 关于如何创建信息窗口的示例代码：

```
var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
var myOptions = {
  zoom: 4,
  center: myLatlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var contentString = '<div id="content">'+
    '<div id="siteNotice">'+
    '</div>'+
    '<h2 id="firstHeading" class="firstHeading">Uluru</h2>'+
    '<div id="bodyContent">'+
    '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
    'sandstone rock formation in the southern part of the '+
    'Northern Territory, central Australia. It lies 335 km (208 mi) '+
    'south west of the nearest large town, Alice Springs; 450 km '+
    '(280 mi) by road. Kata Tjuta and Uluru are the two major '+
    'features of the Uluru - Kata Tjuta National Park. Uluru is '+
    'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
    'Aboriginal people of the area. It has many springs, waterholes, '+
    'rock caves and ancient paintings. Uluru is listed as a World '+
    'Heritage Site.</p>'+
    '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
    'http://en.wikipedia.org/w/index.php?title=Uluru</a> (last visited June 22, 2009).</p>'+
    '</div>'+
    '</div>';

var infowindow = new google.maps.InfoWindow({
    content: contentString
});

var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    title:"Uluru (Ayers Rock)"
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

我认为您的问题在于事件处理程序，此示例仅处理一个标记和一个信息窗口，在您的情况下，您将需要 2 个数组，一个用于所有标记，一个用于所有信息窗口，以及某种 for 循环，每个标记都有一个事件监听器被创建并且它被绑定到一个特定的信息窗口，这正是我在我的项目中必须做的，我保证我会在今天晚些时候上传代码我只是暂时无法访问它，

你正在寻找类似的东西

```
 var markers = new Array();
    var infowindows - new Array();

//Fill the markers with the co-ordinates needed using push method
//then

for(i=0;i<markers.length;i++)
{
   google.maps.event.addListener(markers[i], 'click', function() {
  infowindows[i].open(map,markers[i]);
});
} 
```

希望这可以帮助 ！！

# jquery - 选择 div 的所有包含元素

> ID：10530938
> 
> 赞同：1
> 
> 时间：2012-05-10T09:17:03.387
> 
> 标签：jquery, performance, jquery-selectors

我想选择容器中的所有元素，例如 div。容器中的元素类型无关紧要，并且应该可以选择那些没有分配任何类的元素，以尽可能保持灵活性。我想将这个快速编写的“logo-ticker”构建为一个 jQuery 插件：

[http://apkunden.de/dev/index.html](http://apkunden.de/dev/index.html)

目标是使它可以与任何 html 元素一起使用，而不仅仅是 imgs。我知道实现此目的的一种非常常见的方法是使用分配给任何相关元素的类。但事实证明我是一个懒惰的人，我不想分配所有这些类：D。

现在我知道 jQuery 中有 all 选择器（“*”），我想做这样的事情：

```
 $("#container").find("*"); 
```

但随后在 jQuery API 页面上有一个警告，即所有选择器非常慢。现在的问题是，使用 ("*") 选择器是否有意义。如果它对性能有那么大的影响，我宁愿不要偷懒......

有这方面经验或建议的人吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:20:28.640

从 JQuery 规范（[链接](http://api.jquery.com/children/)）：

> .children( [选择器] )
> 
> 描述：获取匹配元素集中每个元素的子元素，可选地由选择器过滤。

所以在你的情况下：

```
 $("#container").children(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:20:35.170

来自相同的[文档](http://api.jquery.com/all-selector/)（强调我的）：

> 注意： all 或通用选择器非常慢，**除非单独使用**。

那句话暗示 that`$(this).find('* > p')`比 慢得多`$(this).find('*')`，所以我认为这样做很安全，老实说，我想不出更好的方法（如高效），因为您的要求是`get all elements`

编辑：

根据我的评论，来自`children()`文档：

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:21:50.733

你可以使用

```
 $("#container").children() 
```

jquery中的方法，你想循环遍历结果吗？子元素是否也包含子元素是否重要？

至于速度，如果使用 all 选择器比任何其他选择器慢，我会感到惊讶，因为它们肯定是基于结果的数量。（虽然可能是错的）

# solr - Solr 中有多个 data-config.xml 或不同的导入处理程序？

> ID：10530939
> 
> 赞同：2
> 
> 时间：2012-05-10T09:17:10.843
> 
> 标签：solr, dataimporthandler, dih

我需要使用 DIH 导入多个数据库和 rss 源。

是否有可能使用多个*data-config.xml*？或者即使只使用一个，有没有办法配置不同的导入处理程序？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T14:53:25.637

您可以在任何 DIH 配置中创建多个数据源。

如果这不能解决问题，您可以在 solrconfig.xml 中创建多个请求处理程序。处理程序配置的参数之一是定义 xml 的“config”。所以你可以——

```
<pre>
<requestHandler name="/dataimport"
    class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str> 
    </lst>
</requestHandler> 
```

和 ...

```
<requestHandler name="/dataimport2"
    class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config-two.xml</str> 
    </lst>
</requestHandler> 
```

# java - java中特殊字符的正则表达式

> ID：10530942
> 
> 赞同：4
> 
> 时间：2012-05-10T09:17:15.770
> 
> 标签：java, regex, replace

```
public static final String specialChars1= "\\W\\S";
String str2 = str1.replaceAll(specialChars1, "").replace(" ", "+");

public static final String specialChars2 = "`~!@#$%^&*()_+[]\\;\',./{}|:\"<>?";
String str2 = str1.replaceAll(specialChars2, "").replace(" ", "+"); 
```

不管`str1`是什么，我都希望删除除字母和数字以外的所有字符，并将空格替换为加号 ( `+`)。

我的问题是，如果我使用`specialChar1`，它不会删除一些字符，如`;`, `'`, `"`，如果我使用`specialChar2`它会给我一个错误：

```
java.util.regex.PatternSyntaxException: Syntax error U_REGEX_MISSING_CLOSE_BRACKET near index 32: 
```

这怎么可能实现？我已经搜索但找不到完美的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T09:24:49.327

这对我有用：

`String result = str.replaceAll("[^\\dA-Za-z ]", "").replaceAll("\\s+", "+");`

对于此输入字符串：

> / *-+!@#$%^&* ())";:[]{}\ |wetyk 678dfgh

它产生了这个结果：

> +wetyk+678dfgh

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T09:25:11.827

`replaceAll`需要一个正则表达式：

```
public static final String specialChars2 = "[`~!@#$%^&*()_+[\\]\\\\;\',./{}|:\"<>?]"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T09:47:29.863

您的第一个正则表达式的问题在于，这`"\W\S"`意味着找到一个由两个字符组成的序列，其中第一个不是字母或数字，后跟一个不是空格的字符。

你的意思是`"[^\w\s]"`。这意味着：找到一个既不是字母也不是数字也不是空格的单个字符。（我们不能使用`"[\W\S]"`，因为这意味着找到一个不是字母或数字或不是空格的字符——这基本上都是可打印的字符）。

第二个正则表达式是一个问题，因为您试图使用保留字符而不转义它们。您可以将它们包含在`[]`大多数**字符**（不是全部）没有特殊含义的地方，但整个事情看起来很混乱，您必须检查您是否错过了任何标点符号。

例子：

```
String sequence = "qwe 123 :@~ ";

String withoutSpecialChars = sequence.replaceAll("[^\\w\\s]", "");

String spacesAsPluses = withoutSpecialChars.replaceAll("\\s", "+");

System.out.println("without special chars: '"+withoutSpecialChars+ '\'');
System.out.println("spaces as pluses: '"+spacesAsPluses+'\''); 
```

这输出：

```
without special chars: 'qwe 123  '
spaces as pluses: 'qwe+123++' 
```

如果您想将多个空格组合为一个，请`+`改用`"\s+"`正则表达式（请记住转义斜杠）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-26T07:39:18.567

我有一个类似的问题要解决，我使用了以下方法：

```
text.replaceAll("\\p{Punct}+", "").replaceAll("\\s+", "+"); 
```

### 带有时间基准标记的代码

```
public static String cleanPunctuations(String text) {
    return text.replaceAll("\\p{Punct}+", "").replaceAll("\\s+", "+");
}

public static void test(String in){
    long t1 = System.currentTimeMillis();
    String out = cleanPunctuations(in);
    long t2 = System.currentTimeMillis();
    System.out.println("In=" + in + "\nOut="+ out + "\nTime=" + (t2 - t1)+ "ms");

}

public static void main(String[] args) {
    String s1 = "My text with 212354 digits spaces and \n newline \t tab " +
            "[`~!@#$%^&*()_+[\\\\]\\\\\\\\;\\',./{}|:\\\"<>?] special chars";
    test(s1);
    String s2 = "\"Sample Text=\"  with - minimal \t punctuation's";
    test(s2);
} 
```

## 样本输出

```
In=My text with 212354 digits spaces and 
 newline     tab [`~!@#$%^&*()_+[\\]\\\\;\',./{}|:\"<>?] special chars
Out=My+text+with+212354+digits+spaces+and+newline+tab+special+chars
Time=4ms
In="Sample Text="  with - minimal    punctuation's
Out=Sample+Text+with+minimal+punctuations
Time=0ms 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-24T19:01:21.990

@npinti

使用 "\w" 与 "\dA-Za-z" 相同

这对我有用：

```
String result = str.replaceAll("[^\\w ]", "").replaceAll("\\s+", "+"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T17:55:31.780

你可以使用这样的正则表达式：

`[<#![CDATA[¢<(+|!$*);¬/¦,%_>?`:#="~{@}\]]]#>]`

**从表达式的开头和结尾删除“#”**

问候

# c# - 存储过程 - ADO.NET

> ID：10530943
> 
> 赞同：0
> 
> 时间：2012-05-10T09:17:16.747
> 
> 标签：c#, sql-server, ado.net

我有一个存储过程：

```
create procedure sp_PaymentForm_getAll
as
begin
    begin TRAN

    select * from PaymentForm

    WAITFOR DELAY '00:00:10'

    SELECT * FROM PaymentForm pf where pf.ID = 1

    if @@error <> 0
    begin
        rollback
        return
    end

    commit
end 
```

我在 ADO.NET 中调用此存储过程，但 ADO.NET 获得第一次选择的结果

```
SELECT * FROM PaymentForm 
```

我想得到第二个结果`SELECT`：

```
SELECT * FROM PaymentForm pf where pf.ID = 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:23:14.553

使用[SqlDataReader.NextResult()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.nextresult.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:22:32.520

你可以加：

```
SET NOCOUNT ON; 
```

在您的 SP 的开头，以避免多个结果集。[或者，您可以使用reader.NextResult()](http://msdn.microsoft.com/en-us/library/system.data.idatareader.nextresult.aspx)浏览从您的 SP 返回的多个结果集（如果需要 ）

# c - C中奇怪的变量参数问题

> ID：10530945
> 
> 赞同：1
> 
> 时间：2012-05-10T09:17:23.860
> 
> 标签：c, variables, clang

调用以下简化函数时，我在最后一条语句中收到 EXC_BAD_ACCESS 错误：

```
void test(char *param, ...) {
  va_list vl;
  va_start(vl, param);
  double a = va_arg(vl, double);
  double b = va_arg(vl, double);
  double *result = va_arg(vl, double*);
  *result = a*b;
  va_end(vl);
} 
```

该函数通过以下方式调用：

```
double result;
test("blub", 3, 3, &result); 
```

我正在使用 Xcode 的 clang 编译器（Apple LLVM 编译器 3.1）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T09:25:38.233

我认为问题在于您发送`double`as`3`而不是`3.0`. 法线`3`将被视为整数，但在`test`函数中，您正在检索比`int`大多数平台上更大的双精度数，您最终可能会读取错误的位置，从而导致 `EXC_BAD_ACCESS`生成运行时信号

# .net - Silverlight - 根据条件禁用网格中的按钮

> ID：10530947
> 
> 赞同：0
> 
> 时间：2012-05-10T09:17:26.113
> 
> 标签：.net, silverlight, xaml, datagrid

我是 silverlight 的新手，我必须根据条件在网格中禁用简单的任务禁用按钮！我知道在 asp.net 中这很容易，但我无法弄清楚如何在 Silverlight 中做到这一点。

Xml代码：

```
 <sdk:DataGrid Style="{StaticResource DataGridStyle}" Width="900" SelectionMode="Extended" RowDetailsVisibilityMode="Collapsed" ItemsSource="{Binding Path=PagedRooms}" SelectedItem="{Binding Path=CurrentRoom, Mode=TwoWay}" AutoGenerateColumns="False" x:Name="outerdatagrid" >
                    <sdk:DataGrid.RowDetailsTemplate>
                        <DataTemplate>
                            <sdk:DataGrid  ItemsSource="{Binding Path=ResourceAllocationTimePeriods, Mode=TwoWay}" x:Name="unblockBedGrid" AutoGenerateColumns="False" Width="850" Height="Auto" HorizontalAlignment="Left" Grid.Row="1" SelectedItem="{Binding Path=CurrentResourceAllocationTimePeriod, Mode=TwoWay}">                                    
                                <sdk:DataGrid.Columns>
                                    <sdk:DataGridTextColumn IsReadOnly="True"  Header="Allocated From" Binding="{Binding Path=StartDate,Mode=OneWay, Converter={StaticResource dateConverter}}" />
                                    <sdk:DataGridTextColumn IsReadOnly="True"  Header="Allocated To" Binding="{Binding Path=EndDate,Mode=OneWay, Converter={StaticResource dateConverter}}" />              
                                    <sdk:DataGridTemplateColumn>
                                        <sdk:DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button Height="23" Name="btnReleaseBed" Content="Release" Command="{Binding Path=ReleaseBedCommand}" />
                                            </DataTemplate>
                                        </sdk:DataGridTemplateColumn.CellTemplate>
                                    </sdk:DataGridTemplateColumn>                                      
                                </sdk:DataGrid.Columns>
                            </sdk:DataGrid>
                        </DataTemplate>
                    </sdk:DataGrid.RowDetailsTemplate>
                </sdk:DataGrid> 
```

# c# - 按字母顺序显示的下拉列表数据项

> ID：10530950
> 
> 赞同：1
> 
> 时间：2012-05-10T09:17:41.543
> 
> 标签：c#, javascript, html

如何在下拉菜单中获取按字母顺序显示的数据项列表？我使用了 OderBy，但没有得到我想要的结果......请帮助。

```
SelectCommand="SELECT [CompanyID], [Company] FROM [Company]  ORDER BY [CompanyID], [Company] DESC">
<SelectParameters> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:19:00.233

先排序`Company`：

```
ORDER BY [Company], [CompanyID] 
```

* * *

您目前正在订购`CompanyID`（我假设它是一个主键整数），然后是`Company DESC`. 这意味着它将按数字对记录进行排序`CompanyID`，然后任何匹配的（我怀疑会），然后按公司名称 ZA 排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:22:00.740

应该按公司名称订购...所以

```
SELECT  * FROM Table ORDER BY Company 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:19:41.357

```
ORDER BY [Company], [CompanyID] ASC 
```

# objective-c - 来自任何应用程序的数据使用情况

> ID：10530951
> 
> 赞同：10
> 
> 时间：2012-05-10T09:17:45.337
> 
> 标签：objective-c, ios

我想了解每个应用程序使用了多少来自 3G 的数据。这在 iOS 5.x 中可行吗？在 iOS 4.x 中呢？我的目标是例如：

*   地图从您的数据计划中消耗了 3 MB
*   邮件从您的数据计划中消耗了 420 kB

等等等等。这可能吗？

编辑：我刚刚发现这样做的应用程序：[Data Man Pro](http://itunes.apple.com/us/app/dataman-pro-real-time-data/id433617332?mt=8)

![在此处输入图像描述](../Images/e447910c5487d1809e2bfebcf993420f.png)

编辑2：我开始赏金了。加分用于使这一点清楚的答案。我知道这是可能的（来自 Data Man Pro 的屏幕），我确信解决方案是有限的。但是解决方案是什么以及如何实施。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T10:00:25.223

这些只是提示而不是解决方案。我想了很多次，但从来没有真正开始实施整个事情。

1.  首先，您可以计算查询网络接口的传输字节数，看看[这个 SO answer](https://stackoverflow.com/questions/7946699/iphone-data-usage-tracking-monitoring/8014012#8014012) for code 和一个关于 iOS 上网络接口的很好的解释；

2.  使用*sysctl*或类似的系统功能来检测当前正在运行的应用程序（对于*运行，*我的意思是进程状态设置为 RUNNING，就像 OSX 上的*ps*或*top*命令一样。从未尝试过我只是假设这在 iOS 上是可能的，希望应用程序作为非特权用户运行没有问题），因此您可以推断哪些应用程序正在运行并保存这些应用程序的流量统计信息。显然，考虑到应用程序在后台运行的可能性，很难确定哪个应用程序正在传输数据。
    还可以检索有关每个进程/应用程序的网络活动信息，就像*nettop*在 OSX Lion 上所做的那样，不幸的是*nettop*使用私有框架 NetworkStatistics.framework 所以你不能挖掘它的实现；

3.  考虑时间；

我的 2 美分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T09:27:47.657

不，iOS 中的所有应用程序都是沙盒化的，这意味着您无法访问应用程序之外的任何内容。我不相信这是可能的。我也不相信数据流量保存在设备上的这个级别，因此苹果会在页面`network`或.`usage``Settings.app`

除此之外，并不是每个人都有“数据计划”。例如，在瑞典，数据流量是免费的，没有大小或速度的限制。

# jaxb - MOXy JAXB：如何使用具有不同精度的 BigDecimalAdapter

> ID：10530967
> 
> 赞同：1
> 
> 时间：2012-05-10T09:18:36.213
> 
> 标签：jaxb, eclipselink, moxy

我有一个 BigDecimalAdapter 来格式化我模型的所有 BigDecimal 类型。package-info 文件中的声明是：

```
@XmlJavaTypeAdapters({@XmlJavaTypeAdapter(value=BigDecimalAdapter.class,type=BigDecimal.class)}) 
```

我的问题是我必须用不同的精度格式化几个 BigDecimal。

例如，我有两个对象：

```
public class Invoice {

    @XmlPath("InvoiceTotals/InvoiceTotal/text()")
    private BigDecimal invoiceTotal;
} 
```

和

```
public class Discount {

    @XmlPath("DiscountAmount/text()")
    private BigDecimal discountAmount;

} 
```

现在，如果值是：

```
invoice.invoiceTotal = 10.000000000;
discount.discountAmount = 25.00000000; 
```

如何在最终 XML 中获得下一个结果？

```
<invoiceTotal>10.00<invoiceTotal/>
<discountAmount>25.0000<discountAmount/> 
```

我的意思是，第一种情况下有 2 个小数，第二种情况下有 4 个小数。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:59:34.370

您将需要`XmlAdapter`为 的每个表示引入一个`BigDecimal`。然后，`XmlAdapter`您需要在属性级别注册它们，而不是在包级别注册。下面是一个例子。

**发票**

```
public class Invoice {

    @XmlPath("InvoiceTotals/InvoiceTotal/text()")
    @XmlJavaTypeAdapter(value=BigDecimalTwoPlacesAdapter.class)
    private BigDecimal invoiceTotal;
} 
```

**折扣**

```
public class Discount {

    @XmlPath("DiscountAmount/text()")
    @XmlJavaTypeAdapter(value=BigDecimalFourPlacesAdapter.class)
    private BigDecimal discountAmount;

} 
```

# iphone - 如何在 UiView 中拖动 UIBezierPath

> ID：10530968
> 
> 赞同：1
> 
> 时间：2012-05-10T09:18:36.200
> 
> 标签：iphone, objective-c, ios, xcode, uibezierpath

我成功地创建了`UIBezierPath`现在我想在拖动事件（`UIPanGestureRecognizer`）上拖动 UIView 中的该路径并获取该路径竞争的当前位置点。

是否有可能我们只能将 UIBezierPath 从一个地方拖到另一个地方？在 UI 视图中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:27:44.943

如果你允许我自吹自擂，我不久前在一篇名为[CGPath Hit Testing](http://oleb.net/blog/2012/02/cgpath-hit-testing/)的博文中写了一篇关于这个主题的博文。我在文章中谈到的演示应用程序具有您正在寻找的功能。

# akka - 如何在 Akka 中正确启动临时演员？

> ID：10530969
> 
> 赞同：6
> 
> 时间：2012-05-10T09:18:38.723
> 
> 标签：akka

我正在构建与 Akka 中的 ask 模式类似（但不完全相同）的东西，我需要在其中实例化一个处理单个消息然后自杀的临时 actor。我已经为每个请求使用了一次 actorOf() 实现了基本的工作流程，但这感觉不太对，因为它每次都会在新路径上注册一个新的演员。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:11:12.117

听起来您需要使用[future](http://doc.akka.io/docs/akka/current/java/futures.html)。据我了解，Akka futures 为您处理 actor 的创建和处置；如果您`flatMap`将多个future 放在一起，您会注意到一些future 在同一个actor 中执行，而对于另一些future，则会创建一个新的。无耻地解释文档：

```
import akka.japi.Function;
import java.util.concurrent.Callable;
import akka.dispatch.Futures;
import akka.dispatch.OnComplete;

Future<String> f = Futures.future(new Callable<String>() {
  public String call() {
    return "Hello" + "World";
  }
}, system.dispatcher()).andThen(new OnComplete<String>() {
    public void onComplete(Throwable err, String result) {
        // do something with the err and/or result
    }
   });
}); 
```

我想像上面这样的东西可能就足够了？查看文档以获取更多示例...

@viktor-clang 可能不知道，但我认为您不应该特别担心在一般情况下产生的演员数量；创建它们比创建 OS 线程便宜得多。

# ios - 从多个版本迁移核心数据

> ID：10530970
> 
> 赞同：5
> 
> 时间：2012-05-10T09:18:40.813
> 
> 标签：ios, core-data-migration

**问题**

*   我得到了 4 个版本的核心数据模型（轻量级迁移）
*   在版本 5 中需要手动创建映射模型（将数据类型从 nsnumber 更改为 nsstring）
*   从 v4 迁移到 v5 可以很好地使用映射模型，但是对于具有不同版本 (1-3) 的用户，我该如何处理这种迁移？

[在非连续版本之间迁移](https://stackoverflow.com/q/5594241/147564)并尝试使用那里提到的[渐进式迁移](http://media.pragprog.com/titles/mzcd/code/ProgressiveMigration/AppDelegate.m)时，我已经阅读了一些 SO post Core Data Migration 错误，但它在全新安装时失败，因为在`progressivelyMigrateURL:`

```
NSDictionary *sourceMetadata = 
  [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:type
                                                             URL:sourceStoreURL
                                                           error:error];
  if (!sourceMetadata) return NO; 
```

并且在`- (NSPersistentStoreCoordinator*)persistentStoreCoordinator;`

```
if (![self progressivelyMigrateURL:url
                              ofType:NSXMLStoreType
                             toModel:mom
                               error:&error]) {
    [[NSApplication sharedApplication] presentError:error];
    return nil;
  }
  //END:progressivelyMigrateCall
  //START:persistentStoreCoordinator

  if (![persistentStoreCoordinator addPersistentStoreWithType:NSXMLStoreType
                                                configuration:nil
                                                          URL:url
                                                      options:nil
                                                        error:&error]) {...} 
```

这使得`addPersistentStoreWithType:`无法到达

我是否需要更改任何内容才能完成这项工作？

不确定我是否需要完成所有这些工作，因为我在[这里](https://stackoverflow.com/questions/9790705/core-data-lightweight-migration-crashes-after-app-update#comment12571158_9859661)阅读了一些评论，指出核心数据会自动完成所有这些艰苦的工作，但还找不到任何文档。

# java - Dispose() 不适用于每一帧

> ID：10530973
> 
> 赞同：4
> 
> 时间：2012-05-10T09:18:43.423
> 
> 标签：java, swing, notifications, popup, dispose

当数据库中的数据（股票名称和价格）与雅虎财经的数据（股票名称和价格）匹配时，我的程序会提醒用户。[在HarryJoy](http://harryjoy.com/2011/07/01/create-new-message-notification-pop-up-in-java/)的帮助下，我能够实现弹出通知。

现在的问题是，所有功能仅适用于最后一帧（YHOO）。5 秒后或当我单击 closeButton 时，它不会 dispose()。谢谢！

![弹出窗口](../Images/bc6705bfa08f654bffb4fd1facf7a984.png)

```
 if (stockPriceDB == popStockValue)
    {                       

        String header = "Stock: "  + stock.getTicker() + " is now @ " +  stock.getPrice();          
        String message = "";

        popUpFrame = new JFrame();
        popUpFrame.setSize(320,90); 
        popUpFrame.setUndecorated(true);                                    
        popUpFrame.getContentPane().setLayout(new GridBagLayout());

        GridBagConstraints constraints = new GridBagConstraints();
        constraints.gridx = 0;
        constraints.gridy = 0;
        constraints.weightx = 1.0f;
        constraints.weighty = 1.0f;
        constraints.insets = new Insets(5, 5, 5, 5);
        constraints.fill = GridBagConstraints.BOTH;
        JLabel headingLabel = new JLabel(header);

        ImageIcon headingIcon = new ImageIcon("images/alert.gif");          
        headingLabel.setIcon(headingIcon);          

        popUpFrame.getContentPane().add(headingLabel, constraints);
        constraints.gridx++;
        constraints.weightx = 0f;
        constraints.weighty = 0f;
        constraints.fill = GridBagConstraints.NONE;
        constraints.anchor = GridBagConstraints.NORTH;                          

        closeButton = new JButton(); 

        closeButton = new JButton(new AbstractAction("x") 
        {
        private static final long serialVersionUID = 1L;

        public void actionPerformed(final ActionEvent e) 
            {
                popUpFrame.dispose();
            }
        });

        closeButton.setMargin(new Insets(1, 4, 1, 4));
        closeButton.setFocusable(false);
        popUpFrame.getContentPane().add(closeButton, constraints);
        constraints.gridx = 0;
        constraints.gridy++;
        constraints.weightx = 1.0f;
        constraints.weighty = 1.0f;
        constraints.insets = new Insets(5, 5, 5, 5);
        constraints.fill = GridBagConstraints.BOTH;                 

        JLabel messageLabel = new JLabel(message);  
        popUpFrame.getContentPane().add(messageLabel, constraints);
        popUpFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        popUpFrame.setVisible(true);

        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Insets toolHeight = Toolkit.getDefaultToolkit().getScreenInsets(popUpFrame.getGraphicsConfiguration());
        popUpFrame.setLocation(screenSize.width - popUpFrame.getWidth(), screenSize.height - toolHeight.bottom - (popUpFrame.getHeight() * (x+1)));

        new Thread()
        {                           
        public void run() 
            {
                try 
                {
                    Thread.sleep(5000); 
                    popUpFrame.dispose(); 
                } 
                catch (InterruptedException e) 
                {
                    e.printStackTrace();
                }
            };

        }.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T09:27:02.803

我怀疑您遇到的问题是您正在将一个变量传递给一个外部代码（在这种情况下是一个不同的线程），`popUpFrame`然后您为每个循环实例分配一个新对象。

**这种方法容易出错**，因为您丢失了您传递的参考。因为每次创建新对象时都会覆盖它。因此，我认为您可能只能接近最新的一个。

**为避免此类情况**，您传递给外部代码的变量应该始终是`final`，或者在实例化外部进程时将对其的引用存储在外部代码中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T09:39:19.320

正如 Boro 所注意到的，您正在为所有帧重用相同的 popupFrame 变量。当然它只能存储一个帧，你创建的最后一个。所有其他人都丢失了。因此，当您调用 popupFrame.dispose() 时，您实际上会`JFrame`独立于您按下的“X”按钮处理最后创建的

但我认为选择制作这么多帧实际上并不是一个好主意。您应该拥有一个包含一组 JPanel 的 JFrame，您将在 5 秒后或按下“X”按钮时将其删除。

# jquery - jquery中的日期格式

> ID：10530980
> 
> 赞同：-1
> 
> 时间：2012-05-10T09:19:03.267
> 
> 标签：jquery

我试图通过 jquery 在我的应用程序中显示日期，但日期格式不是实际格式，它显示
**/Date(1337157963000)/**
如何管理它，我正在使用**VS2008** ，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:22:21.903

尝试在这里查看 [如何格式化 Microsoft JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)

您的日期`/Date(1337157963000)/` 是 JSON 格式。要作为日期时间，您必须将其转换为日期时间

`var date = new Date(parseInt(jsonDate.substr(6)));`（在 javascript 中）

或者对于 C#，请阅读[如何将 DateTime 从 JSON 转换为 C#？](https://stackoverflow.com/questions/249721/how-to-convert-datetime-from-json-to-c)

# php - AJAX 请求不起作用（POST）

> ID：10530984
> 
> 赞同：2
> 
> 时间：2012-05-10T09:19:11.330
> 
> 标签：php, javascript, mysql, ajax

我对使用 AJAX 的 POST 请求有一点问题。数据似乎没有存储在数据库中。当我使用 GET 而不是 POST 时，它起作用了，但问题是它发送了大量数据，因为它是来自页面上画布的图像数据。我试图打印出发送的数据的大小，以确保在发送之前它实际上是正确的（大约 10500 个字符长）。

这是 Javascript/AJAX 代码：

```
if(type == "DrawingData" && Drawer)
{
    var CanvasData = canvas.toDataURL("image/png"); 
    var url = "DB_Com.php";
    var params = "DrawingData="+CanvasData;

    xmlhttp.open("POST", url, true);

    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");

    xmlhttp.send(params);
} 
```

这是PHP代码：

```
if(isset($_POST['DrawingData']))
{
    $Image = mysql_real_escape_string($_POST['DrawingData']);

    $query = "UPDATE BlackboardDrawing SET Data = '$Image'";
    mysql_query($query) or die(mysql_error());
} 
```

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:54:14.707

您的 Ajax 看起来不错，但您需要发布要更新的行 ID。：

```
if(type == "DrawingData" && Drawer)
{
    var CanvasData = canvas.toDataURL("image/png"); 
    var url = "DB_Com.php";
    var rowid = 'your_row_id';
    var params = "DrawingData="+CanvasData+"rowid="+rowid;

    xmlhttp.open("POST", url, true);

    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");

    xmlhttp.send(params);
} 
```

并更改您的 PHP 脚本：

```
if(isset($_POST['DrawingData']))
{
    $Image = mysql_real_escape_string($_POST['DrawingData']);
    $rowid = (int)$_POST['rowid'];
    $query = "UPDATE BlackboardDrawing SET Data = '$Image' WHERE id='$rowid'";
    mysql_query($query) or die(mysql_error());
} 
```

# mysql - 如何在查询中获取 MySQL 状态

> ID：10530987
> 
> 赞同：6
> 
> 时间：2012-05-10T09:19:18.270
> 
> 标签：mysql, database

是否可以在 MySQL 查询中使用服务器状态变量？

我可以从“显示状态”中看到各种指标，但如何计算派生值（例如查询缓存命中率）

```
show global status like 'Qcache_inserts';
show global status like 'Qcache_not_cached';
show global status like 'Qcache_hits'; 
```

我如何获得 Qcache_hits/(Qcache_hits+Qcache_inserts+Qcache_not_cached)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:43:33.463

通常，您可以通过以下选择访问该信息：

```
SELECT
   VARIABLE_NAME,
   VARIABLE_VALUE
 FROM
   INFORMATION_SCHEMA.GLOBAL_STATUS 
```

你可以像这样进行你想要的计算：

```
select (g1.VARIABLE_VALUE / (g1.VARIABLE_VALUE + g2.VARIABLE_VALUE + g3.VARIABLE_VALUE)) as result
FROM INFORMATION_SCHEMA.GLOBAL_STATUS g1
inner join INFORMATION_SCHEMA.GLOBAL_STATUS g2
inner join INFORMATION_SCHEMA.GLOBAL_STATUS g3
where g1.VARIABLE_NAME = 'Qcache_hits'
and g2.VARIABLE_NAME = 'Qcache_inserts'
and g3.VARIABLE_NAME = 'Qcache_not_cached' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:04:37.437

是的你可以。代替“SHOW STATUS”，使用“SELECT VARIABLE_VALUE FROM GLOBAL_STATUS”并像任何其他表一样继续。

该表位于`INFORMATION_SCHEMA`数据库中。

示例查询：

```
SELECT VARIABLE_VALUE FROM GLOBAL_STATUS WHERE VARIABLE_NAME="Qcache_inserts" 
```

希望这可以帮助 ！

# java - 从 AMQ 读取文件

> ID：10530988
> 
> 赞同：0
> 
> 时间：2012-05-10T09:19:22.653
> 
> 标签：java, jakarta-ee, activemq, apache-camel

大家好，我正在使用 AMQ 创建消费者和生产者。现在的重点是我正在从骆驼读取文件（它将是 xml、csv 或简单文本文件）并发送到 AMQ 主题，现在问题是当另一个消费者想要读取该文件时，我该如何阅读这个该消费者的文件（xml、txt 或 csv）。我通过从体系结构中删除骆驼并将文件转换为字节然后在主题上发送 ByteMessage 来解决它。但我想知道有没有其他方法可以做到这一点？如果我仍然想使用骆驼，我该怎么办，因为它释放了很多努力。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:07:30.433

不确定我是否理解正确。但是您想读取文件，将其发送到 AMQ。from("file:/etc/myfiles").to("jms:topic:mytopic"); 或类似的？

但是，如果另一个应用程序应该对它感兴趣，那么您想保留该文件。

Camel 提供了多种选择来避免读取已经传输的文件。delete=true 用于删除、移动到本地 .camel 目录等。

Camel 网站上有很好的文档。 [http://camel.apache.org/file2](http://camel.apache.org/file2)

您可能应该详细说明一下以获得更准确的答案。