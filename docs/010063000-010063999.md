# StackOverflow 问答 10063000-10063999

# javascript - jquery ui布局高度太短

> ID：10063002
> 
> 赞同：0
> 
> 时间：2012-04-08T13:02:10.800
> 
> 标签：javascript, jquery-ui, layout

我正在尝试将布局与[jquery-ui-layout](http://layout.jquery-dev.net)放在一起，但无法克服高度问题。

这是HTML代码：

```
<body>
<div id="wrapper">
    <div id="header">
        <a class="logo" href="/">
            <img src="/media/bdo.png" width="154" height="38"/>
        </a>
        <ul class="top-menu">
            <li><a href="/">report fill out</a></li>
            <li><a href="/reports_browser/">browse reports</a></li>
        </ul>
        <div class="user">
            hi there
            </div>
    </div>
    <div id="content">

    <div class="ui-layout-west" id="consultants">west</div>
    <div class="ui-layout-center" id="contacts">center</div>
    <div class="ui-layout-east" id="details">east</div>

    </div>
</div>
<div id="footer">
    <ul class="links">
        <li><a href="#">help</a></li>
        <li><a href="#">report an issue</a></li>
    </ul>
</div>
</body> 
```

[我对所有页面都使用了styles.css](http://pastebin.com/fHbtYDLb)（过去到这里相当大）。

我用于此的 javascript 也相当简单：

```
<script type="text/javascript">
$(document).ready(function(){
    myLayout = $("#content").layout({
        applyDefaultStyles: true
    });
    myLayout.sizePane('west',500);
});
</script> 
```

但是输出是所有三个面板都很短，如下面的屏幕截图所示。如何修复布局的高度以适应整个页面并一直到页脚？ ![在此处输入图像描述](../Images/6e804a5b21078b758048b4320a8690b1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:08:59.830

布局管理器将使用容器的大小来确定其布局逻辑。在这种情况下，您没有为内容 div 指定任何高度`<div id="content">...</div>`。就像一个简单的例子一样改变你的CSS：

```
#content {
    float: left;
    clear: both;
    width: 100%;
    height: 500px;
    padding: 10px 0 20px;
} 
```

如果你想让内容`fill`在页眉和页脚之间有空间，你应该使用两种布局，一种用于北（页眉）、中心（内容）、南（页脚），然后在你的内容中再次为你的西、中心应用第二种布局，东面板。

# php - 一个包含 3 个提交的表单；如何保留最终提交的数据？

> ID：10063010
> 
> 赞同：4
> 
> 时间：2012-04-08T13:03:48.983
> 
> 标签：php, forms

我创建了一个 PHP 表单，它要求用户从邮政编码值列表中选择一个邮政编码。

用户按两次提交：-一次进入地址选择菜单，该菜单将显示带有值的选择下拉菜单-第二次按“确定”按钮选择与其邮政编码值对应的地址

我需要在提交表单时保留所选邮政编码值的值。我已经尝试设置在会话中选择的邮政编码下拉值......但是当用户按下表单提交时它会变得很多。

即使在用户按下其中一个提交时刷新页面后，如何保留所有表单值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:22:27.553

*“即使在用户按下其中一个提交后刷新页面后，我如何才能保留所有表单值？”*

阅读您的问题，我不明白是否每个提交的表单都实际提交到服务器，但我会假设是这样。我还假设您正在尝试使用 PHP 会话来完成此操作。

当用户提交表单时，将值服务器端保存在 PHP 会话中

```
//Start the session
session_start();
//Save the values
$_SESSION["foo"] = $_POST["bar"];
... 
```

如果在选择地址后，用户被重定向到初始表单并且您想要填充：

```
//Start the session
<?php
   session_start();
?> 
```

```
<!-- Populate HTML form based on previously submitted values -->
<input type="text" name="foo" value="<?php echo $_SESSION["foo"] ?>" />
... 
```

最终提交后，您应该将所有提交的值保存在`$_SESSION`数组中。`session_start()`在尝试处理任何与会话相关的事情之前，不要忘记总是这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:08:34.867

简短的回答是我认为您不能跨多个表单跟踪表单数据。

我还没有看过你的项目，所以可能不完全理解要求，但我建议你考虑使用 AJAX。查看[jQuery post() 手册](http://api.jquery.com/jQuery.post/)，实际上它非常简单。这样做的好处是允许您在完成第一个表单后更新页面。

编辑：对不起，我的意思是您不能在单个 $_POST 中访问多个表单数据。当然，您可以将其存储在 $_SESSION 中（请记住正确启动会话）。

# bash - Bash - 如何计算 C 源文件函数调用

> ID：10063014
> 
> 赞同：1
> 
> 时间：2012-04-08T13:04:25.137
> 
> 标签：bash, shell

我想为 C 源文件中定义的每个函数查找它被调用的次数以及在哪一行。我是否应该搜索看起来像 C 中的函数定义的模式，然后计算该函数名称出现的次数。如果是这样，我该怎么做？常用表达？任何帮助将不胜感激！

```
#!/bin/bash
if [ -r $1 ]; then
       #??????
else    
        echo The file \"$1\" does NOT exist
fi 
```

最终结果是：（请报告任何错误）

```
 10 if [ -r $1 ]; then
 11         functs=`grep -n -e "\(void\|double\|char\|int\) \w*(.*)"  $1 | sed 's/^.*\(void\|double\|int\) \(\w*\)(.*$/\2/g'`
 12         for f in $functs;do
 13                 echo -n  $f\(\) is called:
 14                 grep -n $f $1 > temp.txt
 15                 echo -n `grep -c -v -e "\(void\|double\|int\) $f(.*)" -e"//" temp.txt`
 16                 echo " times"
 17                 echo -n on lines:
 18                 echo -n `grep  -v -e "\(void\|double\|int\) $f(.*)" -e"//" temp.txt | sed -n 's/^\([0-9]*\)[:].*/\1/p'`
 19                 echo
 20                 echo
 21         done    
 22 else    
 23         echo The file \"$1\" does not exist
 24 fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:23:50.647

这可能有点工作。第一位找到函数定义，如

```
<datatype> <name>(<stuff>) 
```

并拔出`<name>`. 然后 grep 获取该字符串。在很多情况下这不起作用，但如果您尝试制作一个适用于某些程序的简单 shell 脚本，这可能是一个不错的起点。

```
functions=`grep -e "\(void\|double\|int\) \w*(.*)$" -f input.c | sed 's/^.*\(void\|double\|int\) \(\w*\)(.*$/\2/g'`
for func in $functions
do
  echo "Counting references for $func:"
  grep "$func" -f input.c | wc -l
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:32:31.587

你可以试试这个正则表达式

```
(^|[^\w\d])?(functionName(\s)*\() 
```

例如搜索所有`printf`出现

```
(^|[^\w\d])?(printf(\s)*\() 
```

要使用这个表达式，`grep`你必须使用选项`-E`，像这样

```
grep -E "(^|[^\w\d])?(printf(\s)*\()" the_file.txt 
```

最后一点，这个解决方案错过的是跳过评论块中的出现。

# algorithm - sharir kosaraju 算法和顶点

> ID：10063015
> 
> 赞同：0
> 
> 时间：2012-04-08T13:04:29.193
> 
> 标签：algorithm, data-structures, directed-graph

假设我们在有向图上运行 sharir kosaraju 算法。我们在这张图上有一个弧 (u,v)。在这个算法中，我们有两个 DFS 通道。现在假设我们将顶点 u 插入到第一个深度树 T 中。 v 会出现在哪里？它是在较早或以后创建的另一棵树中吗？提前致谢 ！

我正在为考试而学习......所以我猜这是一种家庭作业，但我真的不知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T13:33:07.423

[Kosaraju 的算法](http://en.wikipedia.org/wiki/Kosaraju%27s_algorithm)基于这样一个事实，即图的转置具有与原始图相同数量的强连通分量 (SCC)。

1) 你有一个图 G 和一个空的 Stack S。

2) 当 S 不包含 G 中的所有节点时，选择一个随机顶点 u 并对 u 进行 DFS。在此 DFS 期间完成对节点 v 的探索后，将节点 v 推入 S。

回到你的问题，如果有一个有向边 (u,v)，v 肯定会在 u 之前插入到堆栈 S 中。但是，在 v 的插入和 u 的插入之间可以有更多的节点。

3）你做G的转置的DFS，通过从堆栈S中弹出顶点，直到S为空。这将为您提供图表 G 中的所有 SCC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T04:11:25.503

维基：[http](http://en.wikipedia.org/wiki/Kosaraju%27s_algorithm) ://en.wikipedia.org/wiki/Kosaraju%27s_algorithm很有启发性。我已经实现了算法，它可以在这里找到。

[http://khanna111.com/wordPressBlog/2012/04/11/strongly-connected-components-of-a-graph/](http://khanna111.com/wordPressBlog/2012/04/11/strongly-connected-components-of-a-graph/)

首先要了解的是，在通过后的第一步中堆栈中的顶部元素将是父元素，而在第二步中，它们将更早地弹出并在转置上操作，其中在原始图将在转置中保持强连接。

第一次通过的全部原因是让父母到达堆栈的顶部。

# jquery-ui - jQuery水平ui滚动不计算Chrome中的outerWidth

> ID：10063025
> 
> 赞同：1
> 
> 时间：2012-04-08T13:05:52.830
> 
> 标签：jquery-ui, google-chrome, width, horizontal-scrolling

我在使 jQuery 水平 ui 滚动条在 Chrome 中工作时遇到问题。它在 FireFox 甚至 IE 中都可以正常工作，但在 Chrome 中我根本无法让它计算出我的“内容”区域的正确宽度。“容器”有一个 920px 的固定宽度，所以没问题，但我的“内容”是“在这个页面上”，正好是 4983px 宽，但是当使用 outerWidth() 甚至 outerWidth(true) 计算时，它会返回一个胡说八道的价值比它应该的要小得多！ [这是我正在处理的页面的链接](http://sites.publishyours.com.br/silviamecozzi/pt/obra/deserto_das_palmas.php)。

这是我到目前为止的代码。这是一团糟，因为我仍在工作并做一些测试......

```
 var container = $('.gallery');
var content = $('.content', container);

var itemsWidth = content.outerWidth(true) - container.width();

var width = 0;
$('figure').each(function() {
    width += $(this).width();
});

console.log('I dont know if I chose width: ' + width);
console.log('Or if I chose itemsWidth: ' + itemsWidth);
console.log('Actually, none of them is working on Chrome/webkit browsers');

$('.slider', container).slider({
    min: 0,
    max: itemsWidth - 20,

    stop: function(event, ui){
        content.animate({ 'margin-left' : ui.value * -1}, 500);
    },

    slide: function(event, ui){
        console.log(ui.value);
        content.css('margin-left',ui.value * -1);

    }
}); 
```

请注意，我试图以两种不同的方式计算宽度值：itemsWidth (var) 和 width (var)。它们都不起作用。奇怪的是......如果你不断刷新浏览器（Chrome），它最终会抓住“内容”的正确宽度，但这就像每 10-15 次尝试一次 =\

这似乎是一个 Chrome/Webkit 错误，但我不知道如何解决这个问题！感谢您的时间和帮助！

# java - 无法使用 jdbc 将数据插入到 db 中的表中

> ID：10063032
> 
> 赞同：0
> 
> 时间：2012-04-08T13:06:55.727
> 
> 标签：java, sql, jdbc

我在通过 JDBC 创建的表中插入新数据行时遇到问题。它在 ExecuteUpdate() 行之后抛出 SQLException。

下面我提供了一个在该数据库中创建数据库和表的代码。第二部分的代码应该将值插入到 PatientData 表的行中。

```
public class DbSetUp {

private static Connection con;
private static String mySqlString = "CREATE TABLE PatientsData" +
        "(id INTEGER PRIMARY KEY," +
        "fname VARCHAR(30) NOT NULL," +
        "lname VARCHAR(30) NOT NULL," +
        "sex VARCHAR(1) NOT NULL," +
        "insurance VARCHAR(1) NOT NULL," +
        "profession VARCHAR(30) NOT NULL)";
//private boolean end;
private static String strTemp = "CREATE TABLE PatientsTemp" +
        "(id INTEGER PRIMARY KEY," +
        "name VARCHAR(256) NOT NULL," +
        "date DATE NOT NULL," + 
        "temp NUMERIC NOT NULL)";

public static void main(String[] args) {

    try {
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
    } catch (ClassNotFoundException e) {
        System.out.println("Driver not found");
        e.printStackTrace();
    }   

    try {
        con = DriverManager.getConnection("jdbc:derby:PatientDb;create=true");
    } catch (SQLException e) {
        System.out.println("Db not found");
        e.printStackTrace();
    }

    Statement statement = null;
    try{
        statement = con.createStatement();
        statement.execute(mySqlString);
        statement.execute(strTemp);

    } catch(SQLException ex){
        ex.printStackTrace();
    }

} 
```

上面的代码工作正常，没有异常。我假设两个表都已创建并且数据库存在:)

不是应该插入数据的部分：

```
public Patient createNewPatient(int id, String fname, String lname,
        String sex, String insurance, String profession) {

    try {
        DriverManager.registerDriver(new org.apache.derby.jdbc.EmbeddedDriver());
    } catch (SQLException e1) {
        System.out.println("to na poczatku");
        e1.printStackTrace();
    }

    try{
        con = DriverManager.getConnection("jdbc:derby:PatientDb"); 
        PreparedStatement ps = con.prepareStatement("INSERT INTO PatientsData VALUES(?,?,?,?,?,?)");
        System.out.println("Prepared Statement");
        ps.setInt(1, id);
        System.out.println("set int id");
        ps.setString(2, fname);
        ps.setString(3,lname);
        ps.setString(4,sex);
        ps.setString(5, insurance);
        ps.setString(6,profession);
        System.out.println("set string profession");
        result = ps.executeUpdate();
        System.out.println(result);
        return new Patient(id,fname,lname,sex,insurance,profession);
        //System.out.println("set string profession");

    } catch(SQLException e){
        System.out.println("SQL exception");
        return null;
    }

} 
```

行：result = ps.executeUpdate(); 抛出 SQLException，我不知道错误在哪里。我已将 derby.jar 添加到我的构建路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:43:51.090

你的 SQL 语句是错误的

```
INSERT INTO PatientsData VALUES(?,?,?,?,?,?) 
```

必须是

```
INSERT INTO PatientsData(columnname1,columname2...) VALUES(?,?,?,?,?,?) 
```

我怀疑...并没有真正阅读有关该功能的信息，但看起来不错。

啊误读了...它是一个德比查询...我的格式来自MS SQL ..所以..如果它的答案不知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T07:01:27.827

问题是您试图在 ID 列中插入重复值

确保您正在为 ID 生成唯一值。

# jquery-mobile - 在 JQuery Mobile 中切换横向和纵向视图

> ID：10063033
> 
> 赞同：0
> 
> 时间：2012-04-08T13:07:00.457
> 
> 标签：jquery-mobile, orientation

我正在开发一个 JQuery Mobile 应用程序。根据设备是横向还是纵向视图，我的应用程序将对相同数据有不同的视图。目前，我正在使用以下代码检测该更改：

```
$(window).bind("orientationchange", function (e, ui) {
  alert("orientation changed: " + e.orientation);
}); 
```

从这里开始，我不知道该去哪里。我想改变看法。但是，我不想重新加载视图，因为我希望它尽可能快。如何根据方向显示不同的视图？那个 HTML 看起来像什么？我知道单个视图是这样定义的：

```
<div id="myPage" data-role="page">
  <div data-role="header">
    <a href="#" data-icon="arrow-l" data-iconpos="notext" class="ui-btn-left jqm-home">Back</a>
    <h1>My App</h1>
  </div>

  <div data-role="content">
    <!-- Page content goes here -->
  </div>
</div> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:00:53.167

创建一个多页面布局，一个页面具有纵向视图，另一个具有横向视图，然后在事件中调用`$.changePage()`以在它们之间切换。`orientationChange`

# iphone - 目标 C 数组初始化抛出 EXEC_BAD

> ID：10063035
> 
> 赞同：0
> 
> 时间：2012-04-08T13:07:19.003
> 
> 标签：iphone, objective-c, ios

这有什么问题我得到 EXEC_BAD

```
self.allLessonsArray = [NSArray arrayWithObjects: [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects:@"Title", @"Description", @"LessonID", @"LessonSuffix", @"LibraryImage", @"Price", @"IsFree", nil] forKeys: [NSArray arrayWithObjects: @"First Lesson", @"This is a test description of our first lesson, this lesson is just a copy of Sample StoryApp which we will replace with our first Color Lesson for Very Small Kids. Design of that lesson is still to be discussed with our designer.", 1, @"Less1", @"LibLess1Image.jpg", 0, 1, nil]], [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects:@"Title", @"Description", @"LessonID", @"LessonSuffix", @"LibraryImage", @"Price", @"IsFree", nil] forKeys: [NSArray arrayWithObjects: @"Second Lesson", @"I want to give some description to this title but its so time consuming and boring to write. So here i go - Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.", 2, @"Less2", @"LibLess2Image.png", 0.99, 0, nil]], nil]; 
```

格式化：

```
self.allLessonsArray = [NSArray arrayWithObjects: 
                        [NSDictionary dictionaryWithObjects: 
                         [NSArray arrayWithObjects:
                          @"Title",
                          @"Description",
                          @"LessonID",
                          @"LessonSuffix",
                          @"LibraryImage",
                          @"Price",
                          @"IsFree",
                          nil] 
                                                    forKeys: 
                         [NSArray arrayWithObjects:
                          @"First Lesson", 
                          @"This is a test description of our first lesson, this lesson is just a copy of Sample StoryApp which we will replace with our first Color Lesson for Very Small Kids. Design of that lesson is still to be discussed with our designer.",
                          1, 
                          @"Less1",
                          @"LibLess1Image.jpg",
                          0, 
                          1, 
                          nil]
                         ], 
                        [NSDictionary dictionaryWithObjects: 
                         [NSArray arrayWithObjects:
                          @"Title", 
                          @"Description", 
                          @"LessonID", 
                          @"LessonSuffix",
                          @"LibraryImage", 
                          @"Price",
                          @"IsFree",
                          nil] 
                                                    forKeys: 
                         [NSArray arrayWithObjects: 
                          @"Second Lesson",
                          @"I want to give some description to this title but its so time consuming and boring to write. So here i go - Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.", 
                          2, 
                          @"Less2",
                          @"LibLess2Image.png", 
                          0.99,
                          0,
                          nil]
                         ], 
                        nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T13:32:12.650

`NSArray`对象只能包含对象。每个整数都需要转换为`NSNumber`.

特别是第二个嵌入`NSArray`包含

```
0, 1 
```

应该是

```
[NSNumber nunberWithInt:0], [NSNumber nunberWithInt:1] 
```

或制作字符串：

```
@"0", @"1" 
```

为了便于阅读，请将嵌入`NSArray`的 s`NSDictionary`拆分成单独的语句。写得更清楚的代码可能更容易发现错误。

例子：

```
NSArray *lessonKeys = [NSArray arrayWithObjects:@"Title", @"Description", @"LessonID", @"LessonSuffix", @"LibraryImage", @"Price", @"IsFree", nil];
NSArray *lesson1Values = [NSArray arrayWithObjects: @"First Lesson", @"This is a test description of our first lesson, this lesson is just a copy of Sample StoryApp which we will replace with our first Color Lesson for Very Small Kids. Design of that lesson is still to be discussed with our designer.", [NSNumber numberWithInt:0], @"Less1", @"LibLess1Image.jpg", [NSNumber numberWithInt:0], [NSNumber numberWithInt:1], nil];
NSArray *lesson2Values = [NSArray arrayWithObjects: @"Second Lesson", @"I want to give some description to this title but its so time consuming and boring to write. So here i go - Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.", [NSNumber numberWithInt:2], @"Less2", @"LibLess2Image.png", [NSNumber numberWithFloat:0.99 ], [NSNumber numberWithInt:0], nil];

NSDictionary *lesson1 = [NSDictionary dictionaryWithObjects: lesson1Values forKeys: lessonKeys];
NSDictionary *lesson2 = [NSDictionary dictionaryWithObjects: lesson2Values forKeys: lessonKeys];

self.allLessonsArray = [NSArray arrayWithObjects: lesson1, lesson2, nil]; 
```

我猜测更好的 var 名称。数组也可以进行更好的格式化。注意消除了重复的`NSArray`课程密钥。

在读取的 plist 文件中，这可能会更好。这将允许在不需要更改代码的情况下进行更改和添加课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T13:30:30.403

这些字面数字是问题所在。集合必须包含 NSObject。如果你用 NSNumbers 替换它们（并确保键和值的计数匹配）它应该没问题。

# c++ - unordered_set 将元素存储为指针

> ID：10063037
> 
> 赞同：4
> 
> 时间：2012-04-08T13:07:35.117
> 
> 标签：c++, pointers, hash, equality, unordered

缩小范围：我目前正在使用[Boost.Unordered](http://www.boost.org/doc/libs/1_49_0/doc/html/unordered.html)。我看到两种可能的解决方案：

1.  定义我自己的[平等谓词和散列函数](http://www.boost.org/doc/libs/1_49_0/doc/html/unordered/hash_equality.html)，并利用模板（也许`is_pointer`）来区分指针和实例；

2.  简单地`boost::hash`通过提供`hash_value(Type* const& x)`散列来扩展；并将`==`运算符重载添加为带有参数的自由函数，`(Type* const& x, Type* const& y)`以进行相等性检查。

我不确定这两种变化是否真的可行，因为我没有测试它们。我想知道你处理这个问题。欢迎实施:)

**编辑1：** 这个呢？

```
template<class T>
struct Equals: std::binary_function<T, T, bool> {
    bool operator()(T const& left, T const& right) const {
        return left == right;
    }
};

template<class T>
struct Equals<T*> : std::binary_function<T*, T*, bool> {
    bool operator()(T* const& left, T* const& right) const {
        return *left == *right;
    }
}; 
```

**编辑2：**

我刚刚定义：

```
friend std::size_t hash_value(Base const& base) {
    boost::hash<std::string> hash;

    return hash(base.string_);
}

friend std::size_t hash_value(Base* const& base) {
    return hash_value(*base);
} 
```

进而：

```
Derived d1("x");
Derived d2("x");

unordered_set<Base*> set;

set.insert(&d1);

assert(set.find(&d2) == end()); 
```

调试器说`friend std::size_t hash_value(Base* const& base)`永远不会调用（GCC 4.7）。这是为什么？

**编辑 3：** 我发现`template <class T> std::size_t hash_value(T* const& v)`在`boost/functional/hash.hpp`第 215 行（Boost 1.49）是 Boost 对指针的专门化，它只是掩盖了您在**EDIT 2**`hash_value`中的自定义实现，例如我的。因此，这里似乎唯一的方法是创建一个自定义 Hash Functor。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T13:15:30.133

对于散列函数，您可以选择专门化`boost::hash`（或`std::hash`在较新的标准中）或定义新的仿函数类。这些替代方案同样有效。

对于相等运算符，您需要定义一个新的仿函数，因为您不能在指针上重新定义相等运算符。它是一个内置运算符（在函数术语中定义为`bool operator==( T const *x, T const *y )`）并且不能被替换。

这两者都可以通过`operator()`在非模板类中使用模板来通用定义。

```
struct indirect_equal {
    template< typename X, typename Y >
    bool operator() ( X const &lhs, Y const &rhs )
        { return * lhs == * rhs; }
}; 
```

对哈希器遵循类似的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:21:09.720

考虑到原始帖子中的所有编辑，我想提供满足我需求的完整解决方案：

**1.平等：**

```
template<class T>
struct Equal: ::std::binary_function<T, T, bool> {
    bool operator()(T const& left, T const& right) const {
        ::std::equal_to<T> equal;

        return equal(left, right);
    }
};

template<class T>
struct Equal<T*> : ::std::binary_function<T*, T*, bool> {
    bool operator()(T* const & left, T* const & right) const {
        Equal<T> equal;

        return equal(*left, *right);
    }
}; 
```

**2\. 散列：**

```
template<class T>
struct Hash: ::std::unary_function<T, ::std::size_t> {
    ::std::size_t operator()(T const & value) const {
        ::boost::hash<T> hash;

        return hash(value);
    }
};

template<class T>
struct Hash<T*> : ::std::unary_function<T*, ::std::size_t> {
    ::std::size_t operator()(T* const & value) const {
        Hash<T> hash;

        return hash(*value);
    }
}; 
```

所以现在我可以继续使用 Boost `hash_value`，并且它不会被 Boost 的默认实现屏蔽为指针类型（参见**EDIT 3**）。

**3\. 示例：**

在我的应用程序中，我有一个薄包装器`unordered_set`，现在看起来像这样：

```
template<class T, class H = Hash<T>, class E = Equal<T> >
class Set {
public:

// code omitted...

    bool contains(const T& element) const {
        return s_.find(element) != end();
    }

    bool insert(const T& element) {
        return s_.insert(element).second;
    }

// code omitted...

private:
    ::boost::unordered::unordered_set<T, H, E> s_;
}; 
```

所以如果我们有一些基类：

```
class Base {
public:
    Base(const ::std::string& string) {
        if (string.empty())
            throw ::std::invalid_argument("String is empty.");

        string_ = string;
    }

    virtual ~Base() {
    }

    friend bool operator==(const Base& right, const Base& left) {
        return typeid(right) == typeid(left) && right.string_ == left.string_;
    }

    friend bool operator!=(const Base& right, const Base& left) {
        return !(right == left);
    }

    friend ::std::size_t hash_value(Base const& base) {
        ::boost::hash<std::string> hash;

        return hash(base.string_);
    }

    friend ::std::size_t hash_value(Base* const& base) {
        return hash_value(*base);
    }

private:
    ::std::string string_;
}; 
```

还有一些派生类：

```
class Derived: public Base {
public:
    Derived(const ::std::string& string) :
            Base(string) {
    }

    virtual ~Derived() {
    }
}; 
```

然后我们甚至可以使用多态性（顺便说一句，这是我的主要意图）：

```
Derived d1("¯\_(ツ)_/¯");
Derived d2("¯\_(ツ)_/¯");

Set<Base*> set;

set.insert(&d1);

assert(set.contains(&d2)); 
```

希望这可以帮助。欢迎任何建议。**

# mysql - Mysql多次连接和计数

> ID：10063041
> 
> 赞同：2
> 
> 时间：2012-04-08T13:08:08.550
> 
> 标签：mysql, join

我正在尝试创建一个连接两个表并返回计数的 SQL 语句。即使没有找到计数的项目，我也需要返回所有记录。

如果我这样做：

```
SELECT s.subject,s2.subject from subjects s 
left join subjects s2 on s.parent_id = s2.id 
```

这很好，但没有计数。我尝试通过这样做将它加入到我需要依靠的另一个表中：

```
SELECT s.subject,s2.subject,count(q.id) from subjects s 
left join subjects s2 on s.parent_id = s2.id 
join questions q on q.subject_id = s.id 
```

但我只得到一个根本没有任何意义的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:13:15.347

如果您可以有零`COUNT`个问题，则需要`LEFT JOIN`将

```
SELECT s.subject, s2.subject, NVL(q.q_count,0) as question_count 
FROM subjects s 
LEFT JOIN subjects s2 ON s.parent_id = s2.id 
LEFT JOIN (SELECT q.subject_id, count(1) as q_count 
  FROM questions q
  GROUP BY q.subject_id) q ON q.subject_id = s.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:19:23.890

试试这个：

```
 SELECT s.subject, s2.subject, COUNT(q.id) 
 FROM subjects s 
 LEFT JOIN subjects s2 ON s.parent_id  = s2.id 
 LEFT JOIN questions q ON q.subject_id = s.id 
 GROUP BY s.subject_id, s2.subject_id, q.subject_id 
```

# mysql - 在服务器上转换时间戳会在 PHP 和 MySQL 中产生不同的结果

> ID：10063046
> 
> 赞同：2
> 
> 时间：2012-04-08T13:08:59.200
> 
> 标签：mysql, date, time, timezone, timestamp

考虑一下。在我的服务器上，我像这样转换（UTC/GMT）时间字符串：

```
strtotime('Fri Feb 18 21:08:38 +0000 2011') 
```

我的服务器返回

```
1298063318 
```

这是正确的，因为我测试的所有[unix](http://www.gaijin.at/olsutc.php) [时间戳](http://www.4webhelp.net/us/timestamp.php?action=stamp&stamp=1298063318&timezone=0) [转换器都返回相同的结果。](http://www.epochconverter.com/)反之亦然，如果我插入的不是日期而是时间戳，我会返回上面给出的时间字符串。**但是**如果我在我的服务器上转换时间戳：

```
date("Y-m-d H:i:s", 1298063318); 
```

我返回的日期与预期不同（即“Fri Feb 18 21:08:38 +0000 2011”）：

```
2011-02-18 22:08:38 
```

所以休息了一个小时。这可能是因为我的服务器时区设置在欧洲/巴黎，因此它将时间戳转换为 UTC/GTM + 1。但是 MySQL 在同一台服务器上运行并具有相同的时区，给了我另一个结果：

```
SELECT FROM_UNIXTIME(1298063318) = 2011-02-18 22:08:15 
```

换句话说，它关闭了 18 秒。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:26:08.730

对于 MySQL，[闰秒](http://en.wikipedia.org/wiki/Leap_second)校正用于日期函数（[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/time-zone-leap-seconds.html)）。对于 PHP 日期函数，不考虑闰秒。出于这个原因，您现在得到了 24 秒的差异。

您可以尝试以下方法来解决您的问题： http: [//pumka.net/2010/10/24/why-mysql-timestamp-is-24-seconds-different-from-php/](http://pumka.net/2010/10/24/why-mysql-timestamp-is-24-seconds-different-from-php/)

PS。38 - 15 = 23

# npapi - NPAPI 插件未显示在 about:plugins in google chrome

> ID：10063048
> 
> 赞同：3
> 
> 时间：2012-04-08T13:09:33.567
> 
> 标签：npapi

我已经浏览了这个论坛中关于这个问题的问题，但我没有找到任何与我所面临的问题相关的问题。我已经编写了一个 NPAPI 插件，它可以与 GtkLauncher（带有 webkit）和 firefox 一起正常工作，但使用 google-chrome（18.0.1025.151），该插件甚至没有出现在 about:plugins 中。我在 Ubuntu 10.10 上运行。

当我在 google-chrome 中加载插件时，在浏览器中我无法加载插件错误，但控制台上没有显示任何内容。我怀疑我的 NP_Initialize 函数是否被调用。

这是 NP_Initialize 代码：

```
-------------------------------
NPError OSCALL
NP_Initialize(NPNetscapeFuncs *npnf
#if !defined(_WINDOWS) && !defined(WEBKIT_DARWIN_SDK) 
    , NPPluginFuncs *nppfuncs)
#else
)
#endif

{
MEDIA_DEBUG_PRINT("\nwcf Media plugin: NP_Initialize");
    if(npnf == NULL)
        return NPERR_INVALID_FUNCTABLE_ERROR;
    if(HIBYTE(npnf->version) > NP_VERSION_MAJOR)
        return NPERR_INCOMPATIBLE_VERSION_ERROR;

    npnfuncs = npnf;

    #if !defined(_WINDOWS) && !defined(WEBKIT_DARWIN_SDK)
        NP_GetEntryPoints(nppfuncs);                            
    #endif

    return NPERR_NO_ERROR;

}

NPError OSCALL
NP_GetEntryPoints(NPPluginFuncs *nppfuncs) 
{

    MEDIA_DEBUG_PRINT("\nwcf Media plugin: NP_GetEntryPoints"); 
    nppfuncs->version = (NP_VERSION_MAJOR << 8) | NP_VERSION_MINOR; 
    nppfuncs->newp = nevv; 
    nppfuncs->destroy = destroy; 
    nppfuncs->getvalue = getValue; 
    nppfuncs->event = handleEvent; 
    nppfuncs->setwindow = setWindow; 

    return NPERR_NO_ERROR;
} 
```

我知道有一个用于跨浏览器开发的 Firebreath 框架，我计划使用它，但目前我需要让我的插件在 chrome 上运行。

有人可以帮我解决我的问题吗？

谢谢和问候， 苏维克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:27:11.070

Chrome 往往对事情的启动方式有点挑剔。我在这里看不到任何可能导致您的问题的东西，但是 Chrome 因拒绝不符合预期的插件而臭名昭著。您的问题很可能在以后出现；你说你怀疑你的 NP_Initialize 是否被调用，如果我是你，我会验证这一点。让它写入 /tmp/ 中的文件或确保。

此外，您还没有提供任何其他入口点，例如 NP_GetPluginVersion 或 NP_GetMimeDescription。这些对于 linux 插件也是必需的，并且很可能会导致这样的问题。作为参考，请查看[FireBreath 的 X11 入口点文件](https://github.com/firebreath/FireBreath/blob/master/src/PluginAuto/X11/np_x11main.cpp)。

最后，您安装插件的方式可能是由 mozilla 而不是 chrome 找到的；你是怎么安装的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:46:37.190

如果您的插件没有显示在 chrome://plugins 中，那么它在初始插件扫描期间失败。尝试使用`--debug-plugin-loading`标志运行，这应该会在注册插件失败时为您提供日志语句。

# ruby-on-rails - Bundle 无法在 Mac OSX 10.7 上安装 RMagick gem

> ID：10063051
> 
> 赞同：24
> 
> 时间：2012-04-08T13:09:59.140
> 
> 标签：ruby-on-rails, ruby, rvm, rmagick

我已经使用 ImageMagick 安装程序脚本[https://github.com/maddox/magick-installer](https://github.com/maddox/magick-installer)安装了 ImageMagick 。我在 OSX Lion 10.7 上，使用 RVM，Ruby 1.9.3p125。

问题似乎出在 MagickWand.h 这里是完整的日志

```
/Users/pdjimeno/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for /usr/bin/gcc... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
Package MagickCore was not found in the pkg-config search path.
Perhaps you should add the directory containing `MagickCore.pc'
to the PKG_CONFIG_PATH environment variable
No package 'MagickCore' found
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... no

Can't install RMagick 2.13.1\. Can't find MagickWand.h.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/pdjimeno/.rvm/rubies/ruby-1.9.3-p125/bin/ruby 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-17T23:52:29.457

修复此设置当前 imagemagick 安装的包含路径：

使用 brew 安装 ImageMagick

```
brew install imagemagick 
```

查找库

```
$ mdfind MagickWand.h
/usr/local/Cellar/imagemagick/6.7.5-7/include/ImageMagick/wand/MagickWand.h 
```

安装 rmagick gem

```
$ C_INCLUDE_PATH=/path gem install rmagick 
```

例子：

```
$ C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.7.5-7/include/ImageMagick/ gem install rmagick 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-15T03:20:58.827

如果您收到包裹`xxx`未找到。

找到包并将其 dir 路径添加到您的or文件中的`PKG_CONFIG_PATH`变量。`~/.bash_login``~/.bash_profile`

例子：

如果您收到错误消息：

```
Package MagickCore was not found in the pkg-config search path. 
```

查找文件所在的位置：

```
$ mdfind magickcore.pc
/usr/local/homebrew/Cellar/imagemagick/6.7.7-6/lib/pkgconfig/MagickCore.pc 
```

添加到您的 bash_login 或 bash_profile：

`export PKG_CONFIG_PATH="/opt/local/lib/pkgconfig:/usr/local/homebrew/Cellar/imagemagick/6.7.7-6/lib/pkgconfig/:$PKG_CONFIG_PATH"`

记得获取 bash_login/profile 文件

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-04-08T13:23:27.617

我建议您使用[brew](https://brew.sh/)来管理您的二进制依赖项。[您可以使用brew](https://brew.sh/)轻松安装 imageMagick ，如下所示：

```
brew install imagemagick 
```

这是我的系统上的：

```
imagemagick 6.7.1-1
http://www.imagemagick.org
Depends on: jpeg, libtiff, little-cms, jasper
/usr/local/Cellar/imagemagick/6.7.1-1 (1389 files, 32M)
http://github.com/mxcl/homebrew/commits/master/Library/Formula/imagemagick.rb 
```

在机器和 ruby​​ 版本方面，我的设置与您相同。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-04-21T22:38:36.210

在撰写本文时，imagemagick 7 是通过 安装的默认版本`brew install imagemagick`，但与`rmagick`. 通过以下方式解决此问题：

1.  使用自制软件删除当前安装的 imagemagick 版本

`brew uninstall imagemagick`

2.  安装 imagemagick 6：

`brew install imagemagick@6`

3.  使用 pkgconfig 变量运行 gem install （可能必须`sudo`取决于您的配置）

`PKG_CONFIG_PATH=/usr/local/opt/imagemagick@6/lib/pkgconfig gem install rmagick`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-06-04T10:07:27.403

还找到了使用自制软件的解决方案：

```
brew remove --force pkg-config
brew install pkg-config 
```

进而

```
gem install rmagick 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-28T12:11:44.177

1) 通过安装程序安装

[http://cactuslab.com/imagemagick/](http://cactuslab.com/imagemagick/)

2）尝试 gem install rmagick

如果检查 wand/MagickWand.h... 无
类型

```
mdfind MagickWand.h 
```

找到类似的东西

```
/Users/user/ImageMagick-6.8.3/include/ImageMagick-6/wand/MagickWand.h 
```

并输入终端

```
C_INCLUDE_PATH=/Users/user/ImageMagick-6.8.3/include/ImageMagick-6/ gem install rmagick 
```

如果，在那之后你有这个错误（因为有它）“在 pkg-config 搜索路径中找不到包 MagickCore。”

类型

```
mdfind MagickCore.pc 
```

找到类似 /opt/ImageMagick/lib/pkgconfig/MagickCore.pc 的东西

最后在终端类型中：

```
PKG_CONFIG_PATH=/opt/ImageMagick/lib/pkgconfig/ gem install rmagick 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-02-13T16:33:17.293

Andrey Yasinishyn 的解决方案对我有用：

```
mdfind MagickCore.pc 
```

找到类似 /opt/ImageMagick/lib/pkgconfig/MagickCore.pc 的东西

最后在终端类型中：

```
PKG_CONFIG_PATH=/opt/ImageMagick/lib/pkgconfig/ gem install rmagick 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-13T14:10:46.243

当我遇到这个问题时，它抱怨找不到 MagickCore.pc，所以我这样做了；

```
$ mdfind MagickCore.h
/usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick/magick/MagickCore.h
/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick/magick/MagickCore.h

$ export PKG_CONFIG_PATH=/usr/local/Cellar/imagemagick/6.8.0-10/lib/pkgconfig/
$ gem install rmagick 
```

它奏效了！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-31T18:13:50.347

我尝试了一切，但最终的解决方案是：

`brew uninstall --force imagemagick`# 删除所有版本

然后

`brew install imagemagick@6`

最后

`gem install rmagick`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-21T21:01:40.573

值得一提的是，我在 Ruby ree-1.8.7-2012-02 上遇到了这个问题。这是我修复它的方法：

我删除了 ImageMagick 并重新安装了它

```
brew remove imagemagick 
brew install imagemagick --disable-openmp --build-from-source 
```

然后我在 /usr/local/Cellar/imagemagick/6.8.9-7/lib/ 中添加了这些符号链接

```
ln -s libMagick++-6.Q16.5.dylib libMagick++.dylib
ln -s libMagickCore-6.Q16.2.dylib libMagickCore.dylib
ln -s libMagickWand-6.Q16.2.dylib libMagickWand.dylib 
```

然后我删除了 Ruby 版本并重新安装了它

```
rvm remove ree-1.8.7-2012-02
rvm install ree-1.8.7-2012-02 
```

终于安装了Gem

```
gem install rmagick -v '2.12.2' 
```

希望这可以帮助。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-12-01T03:39:37.690

对于 El Capitan 用户，

PKG_CONFIG_FILE 和 C_INCLUDE_PATH 都需要包括在内。对我有用的命令是：

`sudo C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.9.2-4/include/ImageMagick/ PKG_CONFIG_PATH=/usr/local/Cellar/imagemagick/6.9.2-4/lib/pkgconfig/ gem install rmagick`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-05-23T18:48:24.197

我必须添加两个 env 变量才能使其工作。像这样的东西

```
C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick/ PKG_CONFIG_PATH=/opt/local/lib/pkgconfig:/usr/local/Cellar/imagemagick/6.7.7-6/lib/pkgconfig/ gem install rmagick 
```

# html - 三角浮子

> ID：10063053
> 
> 赞同：1
> 
> 时间：2012-04-08T13:10:32.477
> 
> 标签：html, css, css-float

有没有办法制作一个三角形浮动，使页面看起来像下面这样：

```
 This is a sampe
        Page that has a 
    Triangle left float
That looks kind of cool. 
```

从理论上讲，里面的内容自然会是可变的，所以我更喜欢以“自动”的方式来做，这样当实际的单词/描述进入时，它不会影响我必须放置内容的位置。您可以自由使用任何 HTML/CSS/JS 组合，但越简单越好 =)

如果它有帮助，最初我尝试将不同长度的 div 向左浮动并保持清晰的左侧，但是当我放置文本时，它自然而然地出现在所有内容之后并且向右浮动不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:23:30.443

这是一个想法：将一些浮动块彼此相邻放置，每一行都比下一行高。这将创建一个（透明的）三角形块。

```
body {line-height:1.2em}
.blk1 {float:left; width:10px; height:6.0em}
.blk2 {float:left; width:10px; height:4.8em}
.blk3 {float:left; width:10px; height:3.6em}
.blk4 {float:left; width:10px; height:2.4em}
.blk5 {float:left; width:10px; height:1.2em} 
```

HTML 将是

```
<div class="blk1"></div>
<div class="blk2"></div>
<div class="blk3"></div>
<div class="blk4"></div>
<div class="blk5"></div>
<div>Your text here.</div> 
```

示例[jsFiddle](http://jsfiddle.net/EsHKb/)。你能用它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:29:21.850

[一旦在浏览器中实现了CSS 排除和形状](http://dev.w3.org/csswg/css3-exclusions/)模块，这种布局将变得更加容易（看起来 Chrome 金丝雀构建展示了一些初始支持。）

# javascript - 如何知道有多少用户同时浏览你的网页？

> ID：10063056
> 
> 赞同：0
> 
> 时间：2012-04-08T13:10:59.160
> 
> 标签：javascript, asp.net

我需要使用asp.net查找，

在任何特定时间有多少用户正在浏览我的网站。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:30:30.433

1.  如果您使用的是 ASP.NET 成员资格提供程序 - [Membership.GetNumberOfUsersOnline()](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getnumberofusersonline.aspx)

2.  或者您可以尝试其中一种[ASP.NET 性能计数器](http://msdn.microsoft.com/en-us/library/fxk122b4.aspx)。 **State Server Sessions Active** 当前活动的用户会话数。此计数器仅在运行状态服务器服务 (aspnet_state) 的计算机上可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:22:48.077

您可以使用应用程序变量并在 Global.asax 中的 *Session_Start* 期间增加它。当*Session_End* 事件被触发时，这个变量也需要减少。

# c# - 使用变量设置热键

> ID：10063057
> 
> 赞同：1
> 
> 时间：2012-04-08T13:11:47.763
> 
> 标签：c#, variables

我正在使用下面的代码作为热键，并想为它使用一个变量，但它不允许我：

```
private globalKeyboardHook Pvt = new globalKeyboardHook();
private globalKeyboardHook Group = new globalKeyboardHook();
string pvtHotkey = Properties.Settings.Default["pvtHotkey"].ToString();
Pvt.HookedKeys.Add(Keys.F5);
Pvt.KeyDown += new KeyEventHandler(ghk_startPvt);
Group.HookedKeys.Add(Keys.F6);
Group.KeyDown += new KeyEventHandler(ghk_startGroup); 
```

我想这样做：

```
string pvtHotkey = Properties.Settings.Default["pvtHotkey"].ToString();
Pvt.HookedKeys.Add(pvtHotkey);
Pvt.KeyDown += new KeyEventHandler(ghk_startPvt); 
```

错误“System.Collections.Generic.List.Add(System.Windows.Forms.Keys)”的最佳重载方法匹配有一些无效参数

'System.Collections.Generic.List.Add(System.Windows.Forms.Keys)' 的最佳重载方法匹配有一些无效参数

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:30:58.017

# 问题

如果我错了，请纠正我，但您似乎使用的是代码项目文章[A Simple C# Global Low Level Keyboard Hook](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)中的源文件。
如果是这种情况，那么您将收到此错误，因为 HookedKeys 列表旨在包含 Keys 枚举，而不是字符串。

```
 public List<Keys> HookedKeys = new List<Keys>(); 
```

# 解决方案

您可以通过在将字符串添加到列表之前将其转换为 Keys 枚举来解决此问题。

## 包括：

```
 using System.ComponentModel; 
```

## 代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        string pvtHotkey = Properties.Settings.Default["pvtHotkey"].ToString();
        Keys converted = (Keys)TypeDescriptor.GetConverter(typeof(Keys)).ConvertFromString(pvtHotkey);
        Pvt.HookedKeys.Add(converted);
        Pvt.KeyDown += new System.Windows.Forms.KeyEventHandler(ghk_startPvt);
    }

    void ghk_startPvt(Object sender, System.Windows.Forms.KeyEventArgs e)
    {
        System.Console.WriteLine("Pressed!");
        e.Handled = true;
    } 
```

# php - 将对象重写为数组？

> ID：10063061
> 
> 赞同：0
> 
> 时间：2012-04-08T13:12:57.737
> 
> 标签：php, arrays, object

我正在使用 curl 从网站获取一些数据。在我处理它之后，我设法让它进入这个状态：

```
Array ( 
[GraphicRiver] => Array ( [0] => stdClass Object 
    ( 
        [id] => 698515 
        [item] => Alien Icons Set 
        [url] => http://graphicriver.net/item/alien-icons-set/698515 
        [user] => chaoscod3r 
        [thumbnail] => http://2.s3.envato.com/files/23574322/Thumb.jpg 
        [sales] => 5 
        [rating] => 0 
        [cost] => 5.00 
        [uploaded_on] => Mon Oct 24 17:16:20 +1100 2011 
        [tags] => alien icons, clean icons, easy editing, icons pack, minimalist icons pack, resizable, simple icons, vector icons, vector shapes 
        [category] => icons/miscellaneous 
        [live_preview_url] => http://3.s3.envato.com/files/23574321/Preview.jpg 
    )
)

) 
```

但是我想要的不是那个stdClass对象而是数组，那么我该如何重写这种数组来制作那个对象和数组呢？

这是我用来获取上述内容的方法：

```
public function all_items_by_site($user_name) {

  $items_by_marketplace = $this->user_items_by_site($user_name);

  $marketplaces = array();

  $items = array();

  foreach ($items_by_marketplace as $key) {
     $marketplaces[] = array(
        'Marketplace'  => $key->site,
        'Items'        => $key->items
     );
  }

  foreach ($marketplaces as $key) {
     $items[$key['Marketplace']] = $this->new_files_from_user($user_name, $key['Marketplace']);
  }

  return $items;

} 
```

我正在使用这个 api 包装器作为我想要开发的基本 api 包装器：[https](https://github.com/JeffreyWay/Envato-Marketplace-API-Wrapper-in-PHP) ://github.com/JeffreyWay/Envato-Marketplace-API-Wrapper-in-PHP 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T13:21:13.907

您可以轻松地将`stdClass`对象转换为数组：

```
$array = (array)$object; 
```

在您的具体情况下，这将是：

```
foreach ($array['GraphicRiver'] as &$item) {
    $item = (array)$item;
}
unset($item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:24:54.363

最简单的方法（虽然它不是真正的语义方式）是使用`json_encode`和`json_decode`这样的组合：

```
$array = json_decode(json_encode($orig), true); 
```

这很容易，但我不会为大型阵列推荐它。
另一种方法是遍历您的数组并应用类型转换`(array)`：

```
$array = array_map(function($el) {
    return (array)$el;
}, $orig); 
```

# xamarin.ios - 访问图像、创建联系人和恢复图像

> ID：10063070
> 
> 赞同：0
> 
> 时间：2012-04-08T13:14:02.263
> 
> 标签：xamarin.ios, xamarin.android

我不想使用 Mono 来做到这一点，但 Mono 是如此透明，问题实际上是关于 Android 和 iOS API 的。

我想做以下事情：

*   读取所有联系人，发送到服务器
*   读取图库中所有可用的图像，发送到服务器
*   从服务器下载联系人，恢复到联系人
*   从服务器下载图像，恢复到图库

现在，我知道我可以从 iOS 和 Android 读取联系人。其余的我不太确定。是否可以从图库中获取所有图像？是否可以通过编程方式创建联系人？是否可以以编程方式创建图像并存储到画廊？

我有兴趣为 iOS 和 Android 做上面提到的事情！我有可能吗？如果应用程序提示用户完全访问所提到的库（联系人和图库），那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:21:24.107

如果你想要一个跨 iOS 和 Android 的统一 API，你应该研究[Xamarin.Mobile API](http://xamarin.com/mobileapi)。

它们已经涵盖了联系人，您应该[提交一个请求，让他们考虑一个通用的照片库](https://docs.google.com/a/xamarin.com/spreadsheet/viewform?formkey=dFBlbEtBZmZaT3pIYnBTRHZOQWV4cFE6MQ)API——开发人员也希望使用跨平台的方式来使用它是有道理的。

# mysql - Ruby Mysql - 加载 .sql 文件并执行

> ID：10063074
> 
> 赞同：0
> 
> 时间：2012-04-08T13:15:01.333
> 
> 标签：mysql, ruby

我正在尝试将 ruby​​ 脚本中的 .sql 文件加载到字符串中，然后执行它。

出于某种原因，我收到了语法错误，但是如果我将语句直接复制并粘贴到 mysql 中，它就可以正常工作。

这是我的做法：

```
text = File.read(src_sql_file)
new_text = text.DOINGSOMEGSUBSTUFF
@dbh.select_db(dbname)
sql = @dbh.prepare(new_text) 
sql.execute() 
```

我也试过这个：

```
sql = @dbh.prepare(new_text)  do |sth|
  sth.execute()
end 
```

我总是得到：

```
Error message: You have an error in your SQL syntax; check the manual that corresponds to 
your MySQL server version for the right syntax to use near

'CREATE TABLE `the_logs` (
`id` INT( 11 ) NOT NULL AUTO_INCREMENT PR' at line 5 
```

用于此的 sql 如下所示：

```
CREATE TABLE `the_logs` (
`id` INT( 11 ) NOT NULL AUTO_INCREMENT PRIMARY KEY,
`timestamp` INT( 11 ) NOT NULL ,
... 
```

知道如果我使用准备做错了吗？我也试过查询..也没有用。

任何帮助是极大的赞赏。吨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:27:29.587

我希望您用来与 MySQL 对话的任何库都希望一次处理一个语句，并且您一次将几个语句传递给它。

尝试用分号分割字符串并单独执行每个语句。

# javascript - Html画布滚动

> ID：10063075
> 
> 赞同：0
> 
> 时间：2012-04-08T13:15:02.917
> 
> 标签：javascript, html

我有一个带有单个元素的网页：一个 3000x3000 的画布，我想将浏览器滚动居中在一个点（具有可变坐标）。我是 html 和 javascript 的初学者，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:39:01.703

滚动窗口：[window.scrollTo(x, y)](https://developer.mozilla.org/en/DOM/window.scrollTo)

# android - 为什么WebView会出现NullPointerException？

> ID：10063076
> 
> 赞同：0
> 
> 时间：2012-04-08T13:15:10.157
> 
> 标签：android, webview, nullpointerexception, fragment

我尝试了谷歌搜索的每个示例，但它不起作用。当我在 Sony Tablet S 中运行我的应用程序时，LogCat 中显示 NullPointerException，然后强制关闭。:(

非常感谢你。

```
public class Lesson_4 extends Fragment {
WebView myWebView;
WebChromeClient chromeClient;
WebViewClient wvClient;
/**
 * (non-Javadoc)
 * 
 * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater,
 *      android.view.ViewGroup, android.os.Bundle)
 */

public View onCreateView(final LayoutInflater inflater,
        final ViewGroup container, Bundle savedInstanceState) {

    if (container == null) {
        return null;
    }

    LinearLayout mLinearLayout = (LinearLayout) inflater.inflate(
            R.layout.lessons4, container, false);

    myWebView = (WebView) (getView().findViewById(R.id.webView));
    myWebView.setWebChromeClient(new WebChromeClient());
    myWebView.setWebViewClient(wvClient);
    myWebView.getSettings().setJavaScriptEnabled(true);
    myWebView.getSettings().setPluginsEnabled(true);
    myWebView.loadUrl("http://www.youtube.com/watch?v=iNcNOMiSQ5I");   

    return mLinearLayout;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:03:47.727

您应该在发生 NPE 的代码中发布堆栈跟踪和行号，但我认为它是`myWebView = (WebView) (getView().findViewById(R.id.webView));`. 不应该`myWebView = (WebView) mLinearLayout.findViewById(R.id.webView);`吗？当然，这`mLinearLayout`必须包含您的`webView`.

您不能在 onCreateView() 中使用 getView()，因为您尝试获取的视图尚未创建。因此 NullPointerException。

# java - rxtx 错误 0x3e3 IO 操作中止且设置参数无效

> ID：10063077
> 
> 赞同：0
> 
> 时间：2012-04-08T13:15:14.227
> 
> 标签：java, serial-port, rxtx

我是一个编程新手，我想问一些关于使用 java 和 rxtx 进行串行端口编码的建议。此错误“..\rxtx\src\termios.c(2350) 处的错误 0x3e3：由于线程退出或应用程序请求，I/O 操作已中止。” 出来但有时我没有注意到它在我打开串行端口连接时出现

```
try
            {
                System.out.println("opening port...");
                commPort = portIdentifier.open(this.getClass().getName(),2000);
                }
            catch(PortInUseException ex)
            {
                System.err.println(ex.getMessage());
                } 
```

当它连接时，当我设置参数时，它会给我一个“无效参数”错误。这是我设置参数的代码：

```
try
                {
                    System.out.println("setting params...");
                    this.serialPort.setSerialPortParams(
                        baudRate,
                        SerialPort.DATABITS_8,
                        SerialPort.STOPBITS_1,
                        SerialPort.PARITY_NONE);
                    this.serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_NONE);
                    }
                catch(UnsupportedCommOperationException ex)
                {
                    System.err.println(ex.getMessage());
                    } 
```

我已经在网上研究了将近 3 天了。我真的很绝望，所以任何帮助将不胜感激。

谢谢瘦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:37:25.890

你的波特率设置是多少？？？

**serialPort 在哪里设置为 commPort；**

```
 if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort; 
```

termios.c

```
if ( !SetCommState( index->hComm, &dcb ) )
    {
        report( "SetCommState error\n" );
        YACK();
        return -1;
    } 
```

# localization - 本地化 HTML 文件/并行文件编辑

> ID：10063078
> 
> 赞同：0
> 
> 时间：2012-04-08T13:15:19.907
> 
> 标签：localization, editor, text-editor

由于时间限制，我开发了一个 Web 应用程序，其中许多**特定于语言的字符串已直接硬编码**为大型 HTML/Javascript 静态文件。由于编码不佳，代码和内容没有正确分离。

为了实现**快速而肮脏的本地化**，我正在寻找某种文本编辑器，它允许“标记”文件的本地元素并将它们变成“自定义字段”。然后可以将这些字段存储在某个资源文件中，并独立于共享结构进行翻译，以生成文件的多个本地化版本。

我意识到我可以通过“简单”的模板机制自己做到这一点，例如通过保留一个包含**{%welcome_message%}**等字段的共享根文件和一个用于字段翻译的 csv 文件，然后生成本地化文件。

但是有没有一种**文本编辑器**可以以一种快速、用户友好的方式做到这一点？例如，我们可以在编辑文件时直接在哪里查看/修改自定义字段值（以及根部分）？

例如，一个文本编辑器功能/插件会很棒，它允许通过区分一组文件中的“根”和“本地化”部分来进行某种**并行文件编辑。**

（注意：目前我正在使用 diff/merge 工具来实现这种结果，但是随着我们添加更多语言，它会变得越来越麻烦）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:18:29.213

我认为这可以帮助您进行并行文件编辑[http://www.sublimetext.com/](http://www.sublimetext.com/)。

# xpages - 带日期时间的 Domino 8.5.3 回归

> ID：10063080
> 
> 赞同：2
> 
> 时间：2012-04-08T13:15:20.867
> 
> 标签：xpages, lotus-domino

我们最近一直在测试 8.5.3，并发现了日期时间值如何在 xpage 上呈现的新问题。

**问题：**

任何仅包含时间值（例如，上午 11:00）的日期时间字段在 xpages 上的可编辑字段中显示时都会由于 TZ 转换为不同的值。

如果服务器在印度 (GMT + 5.30)，它会增加 5.5 小时并将上午 11:00 显示为下午 4:30。基本上，除非指定，否则它假定所有时间为 GMT。这个新值在保存时也会保存在文档中（因此它将其存储为 04/08/2012 04:30:00 PM ZE5B），结果破坏了原始值。

这在 8.5.2 或更早版本中没有发生，并且影响了我们的几个应用程序。

有没有人以前见过这个并且可以提出修复或解决方法。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T15:46:29.937

LO67745：XPAGES：日期时间选择器上未显示正确时间 [http://www-01.ibm.com/support/docview.wss?uid=swg1LO67745](http://www-01.ibm.com/support/docview.wss?uid=swg1LO67745)

8.5.3 FP3 已修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T07:27:47.393

您是否检查了应用程序属性？您可以指定要使用的时区。服务器或浏览器。当您打开 PMR 时，请在此处发布 PMR 编号。

# c++ - 如何使 doxygen 仅为网页（不适用于 tex/PDF）创建“包含...的依赖关系图”？

> ID：10063084
> 
> 赞同：3
> 
> 时间：2012-04-08T13:16:29.543
> 
> 标签：c++, linux, graph, documentation, doxygen

因此，虽然[SVG 是可缩放和可浏览的](http://195.19.243.13/documentation/html/da/d05/file__service_8h.html)，而且看起来很乱，但总的来说还可以：

![在此处输入图像描述](../Images/3395412c9e4b886200191b05efb2e397.png)

`Include dependency graph` [内部 PDF 文件（第 195 页）](http://195.19.243.13/documentation/cloud_observer_cpp_docs.pdf)看起来真的很乱：

![在此处输入图像描述](../Images/90fc6a5ec04f58470d2581e32d96c5e3.png)

[我通过 Linux 上的此类脚本](http://code.google.com/p/cloudobserver/source/browse/trunk/CloudLoader/docs-installer-linux.sh?r=2220)通过以下命令自动生成我的文档：

```
 doxygen
            cd release/latex/

            pdflatex refman.tex
            makeindex refman.idx
            pdflatex refman.tex 
```

这会为我生成 HTML 和 PDF 文档。我该如何更改我的[doxygen 文件](http://code.google.com/p/cloudobserver/source/browse/trunk/CloudServer/documentation/Doxyfile?r=2220)或脚本，以便在我的 tex/PDF 文件中没有“包含...的依赖关系图”，同时仍然将它们包含在 HTML 文档中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:01:00.890

在 Doxygen 配置文件中似乎没有执行此操作的机制，但是您可以在两次 Doxygen 运行之间自定义文件以获得您正在寻找的行为。例如，您可以在 Doxyfile 中禁用 HTML 和 LATEX 生成：

```
GENERATE_HTML = NO
GENERATE_LATEX = NO 
```

然后您可以调用 Doxygen 两次，一次用于启用 HTML（带 DOT），一次用于 LATEX（不带 DOT）。在您的脚本中，这看起来像：

```
( cat Doxyfile ; echo "GENERATE_HTML = YES" ) | doxygen -
( cat Doxyfile ; echo "GENERATE_LATEX = YES" ; echo "HAVE_DOT = NO" ) | doxygen - 
```

这将禁用`DOT`tex/PDF 输出中的所有基于图形。如果您想包含一些但不包含其他内容，则需要微调要为 tex/PDF 启用/禁用的特定选项。

有关从命令行自定义 Doxyfile 的更多信息，请参阅[Doxygen 常见问题解答。](http://www.doxygen.nl/manual/faq.html)

# android - 我该如何解决这个RelativeLayout？

> ID：10063085
> 
> 赞同：2
> 
> 时间：2012-04-08T13:16:46.097
> 
> 标签：android, layout

我希望看到以下布局工作：

```
--------------------------
| -----------            |
| |TextView1|            |
| -----------            |
| ---------------------- |
| |EditText1           | |
| ---------------------- |
| -----------            |
| |TextView2|            |
| -----------            |
| ---------------------- |
| |EditText2           | |
| ---------------------- |
| -----------            |
| |TextView3|            |
| -----------            |
| ---------------------- |
| |                    | |
| |                    | |
| |                    | |
| |      ImageView     | |
| |                    | |
| |                    | |
| |                    | |
| |--------------------| |
|   --------- --------   |
|   |Button1||Button2|   |
|   --------- --------   |
| ---------------------| |
| |     ButtonBar      | |
| ---------------------- |
|------------------------| 
```

我的问题：我不能让 Button1 和 Button2 在这个布局中工作。它们要么在 ImageView 下方，隐藏在 ButtonBar 后面，要么在 ImageView 底部和 ButtonBar 顶部之间缩小到什么都没有。

当前的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/footer" >

    <TextView
        android:id="@+id/textPostUser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="user" />

    <EditText
        android:id="@+id/editPostUser"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/textPostUser"
        android:hint="user"
        android:maxLength="40" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textPostComment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/editPostUser"
        android:text="comment" />

    <EditText
        android:id="@+id/editPostComment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/textPostComment"
        android:hint="comment"
        android:maxLength="200"
        android:maxLines="3" >
    </EditText>

    <TextView
        android:id="@+id/textPostCharacterCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/editPostComment"
        android:text="characters"
        android:textSize="5pt" />

    <ImageView
        android:id="@+id/imagePostResult"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/textPostCharacterCount"
        android:src="@drawable/camera_icon" />

    <Button
        android:id="@+id/buttonPostRotateLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@id/imagePostResult"
        android:text="left" />

    <Button
        android:id="@+id/buttonPostRotateRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@id/imagePostResult"
        android:layout_toRightOf="@id/buttonPostRotateLeft"
        android:text="right" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/footer"
    style="@android:style/ButtonBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/buttonPostSave"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="save" />
</LinearLayout>

</RelativeLayout> 
```

如何使左/右按钮出现在图像视图下方和按钮栏上方？我想至少将 fill_parent 保持在 ImageView 的高度/宽度中，因为它可以在不同的分辨率上很好地缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:24:34.177

为什么不把两个按钮放在一个水平的 LinearLayout 中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:29:38.947

您的 ImageView 设置为 fill_parent，因此下面的按钮没有空间了。您可以切换按钮和图像视图，以便在已包含按钮时图像视图占用所有剩余空间：

```
 <Button
        android:id="@+id/buttonPostRotateLeft"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="left" />

    <Button
        android:id="@+id/buttonPostRotateRight"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/buttonPostRotateLeft"
        android:text="right" />

    <ImageView
        android:id="@+id/imagePostResult"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/buttonPostRotateLeft"
        android:layout_below="@id/textPostCharacterCount"
        android:src="@drawable/camera_icon" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:28:38.747

您的按钮设置为`android:layout_alignParentBottom="true"`，以及线性布局。后者将隐藏前者，因为它在 xml 代码中位于最后。

尝试将按钮放在线性布局中，并将其对齐到页脚上方`android:layout_above="@+id/footer"`

# php - 需要 UTF-8 php 文件

> ID：10063086
> 
> 赞同：4
> 
> 时间：2012-04-08T13:17:12.443
> 
> 标签：php, encoding, utf-8, include, require

关于以 UTF-8 编码 PHP 文件，我遇到了非常奇怪的问题。例如，我有两个文件：index.php 和 require.php。在 index.php 文件中我有这个代码

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
</head>
<?php
require 'require.php';
?>
<body>
<a></a>
</body>
</html> 
```

在 require.php 我只有空的 PHP 标签

```
<?php

?> 
```

当我打开 index.php 并使用 Chrome 的 Element Inspector 查看输出 HTML 时，我得到以下信息：

```
<html>
<head>
<meta charset="UTF-8">
</head>
<body>
"
"
<a></a>
</body>
</html> 
```

注意body开头的两个奇怪的引号。如果我从 PHP 代码中删除 require 语句或只是删除它们消失的标签。更奇怪的是，如果我在 require.php 文件中回显某些内容，它会在这两个引号之间输出。如果我在 require.php 中将编码从 UTF-8 更改为 ANSI，问题就会消失

我一直在寻找答案几个小时，并没有找到有同样问题的单身人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-28T08:01:18.467

添加标题后变得更糟。虽然，将文件转换为没有 BOM 的 UFT-8 对我有用！谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:10:23.503

尝试添加`header('Content-type: text/html; charset=utf-8');`index.php，并从 require.php 中删除结尾的 '?>'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-07T22:38:24.343

如果您要发送纯文本文件，则需要此...

```
<?php
    header('Content-type: text/plain; charset=utf-8');
    print('中文。');
?> 
```

要发送 HTML，您需要将标题的“text/plain”更改为“text/html”。

# android - 清单文件的 Android Market 问题

> ID：10063088
> 
> 赞同：0
> 
> 时间：2012-04-08T13:17:30.150
> 
> 标签：android, android-manifest, google-play

我在 Market 上发布时遇到问题。我的应用程序不使用自动对焦功能，但是当我在市场上发布它时，我在控制台中看到以下内容：

```
android.hardware.camera
android.hardware.camera.autofocus 
```

以下是我在清单文件中请求的权限和功能：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

谁能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:28:17.020

`<uses-feature>`您的清单中是否包含正确的标签？这意味着只有

```
<uses-feature android:name="android.hardware.camera" /> 
```

该文档指出：

> 例如，如果应用程序请求 CAMERA 权限但没有为 android.hardware.camera 声明元素，Google Play 认为该应用程序需要一个摄像头，并且不应向其设备不提供摄像头的用户展示。

*来自[基于隐式特征的过滤](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#implicit)*

You can check [this list](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions) and see that the two features mentioned by you are assumed when you use the camera permission and don't state anything in your manifest. Add the above code snippet and it should get reduced to just the camera-feature.

# struts - struts动作类和业务服务层

> ID：10063090
> 
> 赞同：4
> 
> 时间：2012-04-08T13:17:40.543
> 
> 标签：struts, coupling

我在处理服务层上完成的“业务验证”时有一个问题。下面的代码显示了一个典型的账户资金转账示例，验证资金充足，转账金额小于定义的限制。

在此示例中，调用者必须处理和捕获 Action 类中定义的异常，并使用相应的 ActionError 来显示错误消息。

对所有业务验证使用异常是“必须”的吗？

如果我决定不为此使用异常，我将不得不在业务层中定义相应的 ActionError（这违反了耦合/内聚）规则在某种意义上。

应该如何处理由服务层传播回 Action 类的消息？

```
public void transfer(String fromAccount, String toAccount, double amount) throws InsufficientFundsException, TransferLimitException, FactoryException { 
    try { 
        Account from = getAccountHome().findByPrimaryKey( 
new AccountKey(fromAccount)); 
        Account to = getAccountHome().findByPrimaryKey( 
new AccountKey(toAccount)); 
        if (from.getBalance() < amount) 
            throw new InsufficientFundsException(); // Add action errors

        if (from.getTransferLimit() > amount) 
            throw new TransferLimitException();  // Add action errors
        to.deposit(amount); 
        from.withdraw(amount); 
    } catch (Exception e) { 
        throw new FactoryException( 
"cannot perform transfer. Nested exception is " + e); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T15:25:40.487

您的业​​务应该在模型中处理，并且您的业务逻辑中遇到的任何问题都应该传播给调用者，在本例中是 Struts Action 类。

但是您不想将您的 Struts 类（Action、ActionForm、ActionError、ActionMessage 等）与模型耦合，因此您基本上有两种方法可以通知调用者任何问题：

*   返回一些调用者可以检查的错误代码；
*   抛出一些调用者可以捕获的异常。

我**更喜欢使用异常**，因为无论执行链有多深，它们都可以从业务层内部的任何地方抛出到顶层。这使业务代码保持干净，因为您不必像第一种方法那样冒泡错误代码。

然后异常将被 Action 类捕获，并将它们转换为 ActionError 对象以显示在视图中。只要确保你没有过度使用它并最终[扔掉厨房水槽](http://today.java.net/article/2006/04/04/exception-handling-antipatterns#throwingTheKitchenSink)，否则你的 Action 课程将挤满过多的 try-catch 块。此外，您可以让异常传播并创建某种[异常处理程序](http://struts.apache.org/1.x/apidocs/org/apache/struts/action/ExceptionHandler.html)，以捕获从下面抛出的所有异常并根据异常类型重定向到适当的视图。

# python - Django从unicode编码中提取字符串

> ID：10063091
> 
> 赞同：0
> 
> 时间：2012-04-08T13:17:41.060
> 
> 标签：python, django, string, unicode

我有以下字符串，我想从中提取“gcc-4.3.2”和“C”

```
u"u'gcc-4.3.2' u'C'" 
```

我试过 smart_str() 并且输出如下

```
"u'gcc-4.3.2' u'C'" 
```

现在我做了 split(" ")

```
tokens = ["u'gcc-4.3.2'", "u'C'"] 
```

然后我尝试了

smart_str(tokens[0])，但它给了我同样的东西

```
"u'gcc-4.3.2'" 
```

如何从中提取 gcc-4.3.2 ？

（我也想为其他值做，所以我不想硬编码）

任何帮助，将不胜感激，

谢谢，

潘卡伊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:22:04.920

您在这里的真正问题似乎是您获得的是值的表示而不是值的表示。

```
>>> x = u"gcc-4.3.2"
>>> x
u'gcc-4.3.2'
>>> repr(x)
"u'gcc-4.3.2'"
>>> str(x)
'gcc-4.3.2' 
```

如果您对从中获得价值的地方有任何控制权，我会先去那里处理。

警告：Unicode 不同是有原因的，如果你有 unicode 字符，你可能会遇到问题：

```
>>> x = u"ĝĝ"
>>> x
u'\u011d\u011d'
>>> repr(x)
"u'\\u011d\\u011d'"
>>> str(x)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128) 
```

如果您无法控制所获取的数据，则 的值`repr(x)`是您可以评估的表达式：

```
>>> x = "u'gcc-4.3.2'"
>>> eval(x)
u'gcc-4.3.2' 
```

但是，请注意 eval[由于多种原因非常不安全](https://stackoverflow.com/questions/1832940/is-using-eval-in-python-a-bad-practice)。

如果您想更安全地处理提取 unicode 字符串，您可以执行以下操作：

```
>>> import re
>>> x = "u'gcc-4.3.2' u'C'"
>>> re.findall("u'(.*?)'", x)
['gcc-4.3.2', 'C'] 
```

在这里，我们使用正则表达式来提取包含在`u''`. 我们`.*?`用来使操作不贪婪，确保我们最终不会`["gcc-4.3.2' u'C"]`成为我们的输出。

# http - 如何从 netty 中的 HTTP 服务器请求处理程序正确调用 HTTP 客户端？

> ID：10063092
> 
> 赞同：2
> 
> 时间：2012-04-08T13:17:42.833
> 
> 标签：http, events, netty

我正在使用 netty 3.3.1 开发自定义 HTTP 服务器。

我需要实现这样的东西

1.  HTTP 服务器接收请求
2.  HTTP 服务器解析它并调用 HTTP 请求作为其他机器的客户端
3.  HTTP Server 等待（2）中发送的请求的响应
4.  HTTP 服务器根据 (3) 中收到的内容发送对 (1) 请求的响应

这意味着客户端请求 (2) 必须表现为同步的。

我写的是基于[HttpSnoopClient 示例](http://netty.io/docs/stable/xref/org/jboss/netty/example/http/snoop/HttpSnoopClient.html)但它不起作用，因为我收到

```
java.lang.IllegalStateException: 
await*() in I/O thread causes a dead lock or sudden performance drop. Use addListener() instead or call await*() from a different thread. 
```

我已经从上面提到的示例中重构[了代码](http://netty.io/docs/stable/xref/org/jboss/netty/example/http/snoop/HttpSnoopClient.html)，现在它看起来不再像这样了（从 HttpSnoopClient 的第 7f 行开始）：

```
 ChannelFuture future = bootstrap.connect(new InetSocketAddress(host, port));
    future.addListener(new ChannelFutureListener() {
      public void operationComplete(ChannelFuture future) {
        if (!future.isSuccess()) {
          System.err.println("Cannot connect"); 
            future.getCause().printStackTrace();
            bootstrap.releaseExternalResources();
            return;
          }
          System.err.println("Connected");

          Channel channel = future.getChannel();

          // Send the HTTP request.
          channel.write(request);
          channel.close();

          // Wait for the server to close the connection.
          channel.getCloseFuture().addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) {
              System.err.println("Disconnected"); 
              bootstrap.releaseExternalResources(); // DOES NOT WORK?
            }
          });   
        }
    });

  } 
} 
```

`run()`上面示例中的命令在`messageReceived`我的 herver 处理程序的函数中调用。

所以它变成了异步的并且避免了 await* 函数。请求被正确调用。但是 - 因为我不知道的原因 - 这条线

```
 bootstrap.releaseExternalResources(); // DOES NOT WORK? 
```

不起作用。它抛出一个异常，说我无法杀死我当前正在使用的线程（这听起来很合理，但仍然没有给我一个答案，如何以不同的方式做到这一点）。

我也不确定这是正确的方法吗？

也许您可以推荐一个netty中此类事件编程技术的教程？通常，如何处理一些必须按指定顺序调用并相互等待的异步请求？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:46:54.950

如果你真的想在关闭时释放引导程序，你可以这样做：

```
channel.getCloseFuture().addListener(new ChannelFutureListener() {
    public void operationComplete(ChannelFuture future) {
        System.err.println("Disconnected"); 
        new Thread(new Runnable() {
            public void run() {
                bootstrap.releaseExternalResources();
            }
        }).start();
    }
}); 
```

# scheme - 如何在 Scheme 函数中声明一个列表？

> ID：10063098
> 
> 赞同：0
> 
> 时间：2012-04-08T13:18:58.153
> 
> 标签：scheme

我想在方案函数中声明一个空列表。为了实现这一点，我使用了 let。我知道 let 的结构

```
(let (name1 value1) (name2 value2)...) 
```

但是当我将它应用到我的函数中时

```
(let (new-list '())) 
```

我收到一条错误消息，上面写着“让：期望绑定一个变量和一个表达式，但发现了其他东西”我该如何解决它，知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T13:27:46.050

Let 需要一个绑定列表和一个 s 表达式。

`(let ((name1 value1) (name2 value2) ...) expression-to-evaluate-with-the-bindings)`

你需要另一层括号。

[R6RS](http://www.r6rs.org/final/html/r6rs/r6rs-Z-H-14.html#node_idx_394)的RTFM了解血腥细节。

# asp.net - 从不同页面访问服务器控件

> ID：10063101
> 
> 赞同：1
> 
> 时间：2012-04-08T13:19:30.103
> 
> 标签：asp.net

我有一个`GridView`，`PageA`我希望能够`DataBind()`从 GridView 的方法调用`PageB`？

基本上`PageB`是一个将包含在弹出控件中的表单，当用户填写表单的字段`PageB`并提交时，我将关闭弹出控件，然后我想刷新`GridView`父页面（PageA），我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:47:20.497

在页面 A 上编写一个类似 RefreshGrid 的 javascript 函数，您可以编写各种方法来从此 javascript 函数刷新网格，例如

1）将您的网格放在更新面板中并在该更新面板上创建一个触发按钮控件，在javascript中调用此触发控件的单击事件，这将部分回发页面并刷新更新面板。还有其他方法。。

2）从弹出关闭按钮上的弹出，写下一行

```
window.opener.RefreshGrid(); window.close(); 
```

而已。

如果要传递任何参数，可以将其作为参数传递给 RefreshGrid 函数。

还有很多方法，这是我使用的一种。

# java - SciTE：使用新添加的库时 Java 中的 ClassNotFoundException（但不在命令提示符下）

> ID：10063103
> 
> 赞同：0
> 
> 时间：2012-04-08T13:20:25.857
> 
> 标签：java, command-prompt, classnotfoundexception, scite

我目前正在使用 SourceForge ( [http://jtidy.sourceforge.net/](http://jtidy.sourceforge.net/) ) 提供的 JTidy 库中的 Tidy 类。

我已经将该`.jar`库添加到 CLASSPATH 中，并且可以在 SciTE 中编译 Java 程序而不会出现任何错误。但是当我尝试运行程序时，SciTE 会打印出以下输出：

```
>java -cp . SourceViewer3
Exception in thread "main" java.lang.NoClassDefFoundError: org/w3c/tidy/Tidy
    at SourceViewer3.main(SourceViewer3.java:65)
Caused by: java.lang.ClassNotFoundException: org.w3c.tidy.Tidy
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more
>Exit code: 1 
```

注意：第 65 行是我调用 Tidy 类的构造函数的地方，

```
Tidy tidy = new Tidy(); 
```

但是当我尝试在命令提示符下运行程序时，它运行顺利，没有任何问题。如何解决 SciTE 中的问题？

附加信息：我使用的是 Windows 7 64 位、SciTE 3.0.3 和 Java 版本“1.7.0_02”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:37:29.727

没关系，现在解决了。

事实证明，我必须使用命令“java（java 类名）”而不是使用 SciTE 使用的默认命令“java -cp .（java 类名）”来运行它，这样它就不会覆盖CLASSPATH 环境变量。

打扰了^^;;

# javascript - 用 inner.html.data 更新 jQueryUI 进度条

> ID：10063107
> 
> 赞同：2
> 
> 时间：2012-04-08T13:20:59.977
> 
> 标签：javascript, jquery, ajax

我这里有基本的 jQueryUI 进度条代码；

```
<script>
    $(function() {
        $("#progressbar").progressbar({
            value: 50,
        });
    });
</script> 
```

然后我有一个脚本页面，它处理当前的上传进度并像这样反馈它；

```
document.getElementById('progressbar').innerHTML = iPercentComplete.toString(); 
```

然后更新这个的inner.html；

```
<div id="progressbar">&nbsp;</div> 
```

我需要的是让进度条与进度条 div 中正在更新的值保持一致。这可能吗？如果有怎么办？如果需要，我还可以将代码添加到 script.js 页面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:26:00.383

```
$( "#progressbar" ).progressbar( "value" , iPercentComplete.toString() ); 
```

对于动画，请参阅： [如何为 jQuery UI 进度条的值设置动画？](https://stackoverflow.com/questions/5047498/how-do-you-animate-the-value-for-a-jquery-ui-progressbar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:24:42.647

```
document.getElementById('progressbar').innerHTML = iPercentComplete.toString();
$( "#progressbar" ).progressbar({value: iPercentComplete}); 
```

# visual-studio-2010 - 在 VS 2010 中一步修复 resharper 中的所有问题或警告

> ID：10063109
> 
> 赞同：0
> 
> 时间：2012-04-08T13:21:18.403
> 
> 标签：visual-studio-2010, resharper

有没有办法一步解决所有问题或警告，比单独解决每个问题更好？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:21:48.637

最好的工具是`CTRL+ALT+F`

有关快捷方式的介绍以及您可以使用它执行的操作，请参[见此链接。](http://www.jetbrains.com/resharper/features/code_formatting.html)

# visual-studio - 在我的 VS2010 中，我缺少参考

> ID：10063112
> 
> 赞同：0
> 
> 时间：2012-04-08T13:21:51.283
> 
> 标签：visual-studio, reference, add-in

使用 Microsoft.SqlServer.Management.UI.VSIntegration.ObjectExplorer；

[http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.ui.vsintegration.objectexplorer.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.ui.vsintegration.objectexplorer.aspx)

这是缺失的，我尝试添加但无法在我的 .net 引用中找到它这是一个屏幕截图 ![在此处输入图像描述](../Images/83733c7c155d05c16b7a9c23b48e5566.png)

知道如何获得此参考吗？

# guid - 要反序列化 JSON.NET 的空 GUID 的正确格式是什么？

> ID：10063118
> 
> 赞同：12
> 
> 时间：2012-04-08T13:23:15.080
> 
> 标签：guid, json.net

使用 JSON.NET 将空 GUID 发送到服务器进行反序列化的正确格式是什么？

`"{"id":"","name":"Test"}"`结果是`"Unrecognized Guid format."`

`"{"id":null,"name":"Test"}"`结果是`"Value cannot be null."`

`"{"id":"00000000-0000-0000-0000-000000000000","name":"Test"}"`有效，但我不想强迫客户提供这个。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-11T21:17:45.547

您提到的格式确实是“正确”的格式。但是您也可以通过使用自定义来支持其他格式`JsonConverter`- 请参阅下面的代码以获取示例。

```
public class StackOverflow_10063118
{
    public class Foo
    {
        public Guid guid;
        public int i;

        public override string ToString()
        {
            return string.Format("Foo[i={0},guid={1}]", i, guid);
        }
    }
    class GuidConverter : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return typeof(Guid) == objectType;
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            switch (reader.TokenType)
            {
                case JsonToken.Null:
                    return Guid.Empty;
                case JsonToken.String:
                    string str = reader.Value as string;
                    if (string.IsNullOrEmpty(str))
                    {
                        return Guid.Empty;
                    }
                    else
                    {
                        return new Guid(str);
                    }
                default:
                    throw new ArgumentException("Invalid token type");
            }
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            if (Guid.Empty.Equals(value))
            {
                writer.WriteValue("");
            }
            else
            {
                writer.WriteValue((Guid)value);
            }
        }
    }
    public static void Test()
    {
        Foo foo = new Foo { guid = Guid.Empty, i = 123 };
        JsonSerializer js = new JsonSerializer();
        js.Converters.Add(new GuidConverter());
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        js.Serialize(sw, foo);
        Console.WriteLine(sb.ToString());
        StringReader sr = new StringReader(sb.ToString());
        Foo foo2 = js.Deserialize(sr, typeof(Foo)) as Foo;
        Console.WriteLine(foo2);
    }
} 
```

# mysql - ProcessMaker 安装错误

> ID：10063120
> 
> 赞同：0
> 
> 时间：2012-04-08T13:23:25.493
> 
> 标签：mysql, wamp

我尝试使用我的 WAMP 服务器（本地计算机）安装 ProcessMaker，我成功完成了所有步骤。但是在安装它时它会失败，并显示一条错误消息，指出 wf_workflow 数据库和 rb_workflow 数据库的“数据库不是空的”

在安装测试页面中，这两个字段带有红色符号。

请帮我解决这个问题，因为我是这个软件的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:57:32.237

当您尝试在具有另一个实例的服务器中安装 ProcessMaker 时，通常会引发该错误。您有两个选项，并且在该安装屏幕上，您必须激活“高级”设置，这将允许您覆盖现有安装或重命名工作区和数据库名称。

# java - 我写了一个通用的有序数组类，比较元素时插入方法出现空指针错误

> ID：10063129
> 
> 赞同：0
> 
> 时间：2012-04-08T13:24:36.727
> 
> 标签：java, arrays, algorithm, generics

```
public class GenericOrderedArray<T extends Comparable<T>> {

private T[] a;
private int n;

public GenericOrderedArray(Class<T> clazz, int max) {
    a = (T[]) Array.newInstance(clazz, max);
    n = 0;
}

public void insert(T value) {
    int j;
    for (j = 0; j < n; j++)
                    //this is where error goes ,the compare to method throws a null pointer exception
        if (a[j] != null && a[j].compareTo(value) > 0)
            break;
    for (int k = n; k < j; k--)
        a[k] = a[k - 1];
    a[j] = value;
    n++;
}

public boolean delete(T value) {
    boolean result = false;
    int hit = find(value);
    if (hit == -1)
        return result;
    else {
        for (int i = hit; i < n; i++) {
            a[i] = a[i + 1];
        }
        n--;
    }
    return result;
}

    //binary search implements find method 
public int find(T value) {
    int lowerBound = 0;
    int upperBound = n - 1;
    int curIn;
    while (true) {
        curIn = (lowerBound + upperBound) / 2;
        if (a[curIn].equals(value))
            return curIn;
        else if (lowerBound > upperBound) {
            return -1;
        } else {
            if (a[curIn].compareTo(value) < 0)
                lowerBound = curIn + 1;
            else {
                upperBound = curIn - 1;
            }
        }
    }

}

public static void main(String[] args) {
    int max = 100;
    GenericOrderedArray<Integer> ints = new GenericOrderedArray<>(Integer.class, max);
    ints.insert(2);
    ints.insert(4);
    ints.insert(1);
}
} 
```

该数组比较每个元素并将移动的较小元素放到较低的索引中。这可能是一个愚蠢的问题。比较元素时发生异常，但我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:43:34.727

```
for (int k = n; **k < j**; k--)
    a[k] = a[k - 1]; 
```

我认为你应该有**k > j**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:38:18.797

我的猜测是，当您插入第一个元素时，您将 a[j] 与要插入的元素进行比较。但是，由于第一次插入元素时 a[0] 处没有元素，因此将抛出 NPE。

您应该通过检查第一个元素是否为 NULL 来启动插入方法。如果 a[0]=NULL 您只需在其中插入元素，否则您继续比较语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:48:58.513

你的代码对我有用。在 Linux、jdk6 和 jdk7 上试过。
通常，比较方法可能在代码中抛出 NPE 的唯一方法是当您将 null 作为值传递时，因为您检查 a[j] 是否为 null。确保您没有将 null 传递给 insert 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:10:00.307

如果您检查[Comparable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html#compareTo%28java.lang.Object%29)接口文档。它指出：

> 实现者必须确保所有 x 和 y 的 sgn(x.compareTo(y)) == -sgn(y.compareTo(x))。（这意味着 x.compareTo(y) 必须抛出异常 iff y.compareTo( x) 抛出异常。)

因此，如果您尝试将任何内容与 null 进行比较，则应该存在 NPE。

# ruby-on-rails - 我应该在哪里添加我写的 Rack 模块（确切地说是一个类）？（导轨）

> ID：10063134
> 
> 赞同：2
> 
> 时间：2012-04-08T13:25:29.993
> 
> 标签：ruby-on-rails, rack

我写了一个简单的 Rack 模块，我把它放在一个我命名为`rack_gist.rb`. 在我的`config.ru`文件中的某个地方，我`use Rack::Gist`用来调用该模块。我知道该模块可以正常工作，并且我知道`use Rack::Gist`它放置在正确的位置，因为当我将代码放在文件`rack_gist.rb`顶部时`config.ru`，一切正常。

我正在使用 Rails 3.2.2。我想将模块的代码分隔在一个`rack_gist.rb`文件中，所以我`config.middleware.use Rack::Gist`在文件中添加了该行`config/application.rb`。我的问题是：**我现在应该把`rack_gist.rb`文件放在哪里？我应该在任何地方要求什么吗？**

为了更清楚，这是我的模块

```
 module Rack
      class Gist
        def initialize(app)
          @app = app
        end
        def call(env)
          status, @headers, response = @app.call(env)
          if html?
            #do something I don't want to bother you with
          end
          [status, @headers, response]
        end
        private
        def html?
          @headers["Content-Type"].include? "text/html"
        end
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:00:21.017

恕我直言，这是你可以做的。将代码放入 lib 目录`lib/rack_gist.rb`

将 lib 初始化程序添加到初始化程序

```
#config/initializers/lib_loader.rb
Dir[File.expand_path(File.join(Rails.root.to_s,'lib','*.rb'))].each {|f| require f} 
```

然后您的模块应该可以将其添加到配置中。

# javascript - 使用 simple_form 设置数据内容

> ID：10063137
> 
> 赞同：3
> 
> 时间：2012-04-08T13:25:36.517
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, simple-form

我在 Rails 3.2.1 中使用 Simple_form

一切都很好，除了我需要为 bootstrap popover 的 input_html 设置“数据内容”属性

但是，当我使用以下 Rails/Ruby 不喜欢代码时，因为“数据内容”方法中有一个破折号：

```
<%= f.input :first_name, :required => true, :label => "First Name", :autofocus => true, :input_html => {:rel => "tooltip", :title => "Testing!", :data-content => "Popover content"} 
```

我得到一个错误：

```
 undefined local variable or method `content' 
```

有谁知道如何使用 simple_form 为输入元素设置数据内容？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:29:37.290

您不能`-`在 ruby​​ 符号中使用，但可以使用类似`"data-content"`. 所以，这可能会起作用：

```
<%= f.input :first_name, :required => true, :label => "First Name", :autofocus => true, :input_html => {:rel => "tooltip", :title => "Testing!", 'data-content'=> "Popover content"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:30:18.827

我认为您可以按如下方式使用数据设置：

```
<%= f.input blar..., :input_html => { :data => { content: => "Popover content"}} 
```

这应该给你一个属性`data-content="Popover content"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:30:04.217

您不能在符号名称中使用连字符。`:data-content`被解释为`:data - content`=> 符号`:data`减去 `content.

相反，用引号括起来`... "data-content" => "Popover content" ...`

# debian - debian：无法登录连接到 MySQL 服务器

> ID：10063139
> 
> 赞同：0
> 
> 时间：2012-04-08T13:26:03.990
> 
> 标签：debian

当我试图连接到我的 debian 服务器上的 MySQL 服务器时，它给出了一个错误 belwo。

```
 mysql -u root -p
    Enter password:
    ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

当我输入：

```
ls -l /var/run/ | grep mysqld
drwxr-xr-x 2 mysql       root        4096 2012-04-08 16:07 mysqld 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:31:18.773

尝试连接到服务器的 TCP 端口而不是 UNIX 套接字。尝试提供 -h localhost。

# asp.net - 将 Azure 表存储用于 ASP.NET 会话

> ID：10063142
> 
> 赞同：5
> 
> 时间：2012-04-08T13:26:20.397
> 
> 标签：asp.net, session, azure, azure-table-storage

在 Azure 中，会话不是粘性的，因此`InProc`当您有多个 Web 角色实例时使用会话是不够的（您应该这样做，否则您不会被保证 99.95% 正常运行时间的 Windows Azure 计算 SLA 所涵盖。）。

因此，我想将 Azure 表存储用于 ASP.NET 会话。我对 SQL Azure 比较熟悉，但是还没有使用过 Azure 表存储。

有人告诉我，执行此操作的适当方法是使用[ASP.NET Universal Providers](http://nuget.org/packages/System.Web.Providers)以及少量`web.config`技巧。

到目前为止，我还不能让这个工作。围绕这个主题有[各种各样](http://www.intertech.com/Blog/post/Session-State-in-Windows-Azure.aspx)的帖子，但其中很多都指向 using `Microsoft.Samples.ServiceHosting.AspProviders.TableStorageSessionStateProvider`，这看起来像是发布 Universal Providers 的先驱。

目前，我的`web.config` `sessionState`部分如下所示：

```
<sessionState mode="Custom"
              customProvider="TableStorageSessionStateProvider">
  <providers>
    <clear/>
    <add name="TableStorageSessionStateProvider"
         type="System.Web.Providers.DefaultSessionStateProvider"/>
  </providers>
</sessionState> 
```

但是，使用它会给我一个错误，因为提供者需要有一个`connectionStringName`属性。

对于 Azure 表存储，这应该是什么样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:06:08.720

我不认为通用提供者对表存储有任何支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T13:06:58.650

或者您可以使用 AppFabric 缓存：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg278339.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg278339.aspx)

# java - Django 中的 Java 应用程序上下文

> ID：10063145
> 
> 赞同：1
> 
> 时间：2012-04-08T13:27:09.697
> 
> 标签：java, python, django, servlets

对于基于 Servlet 的 Web 应用程序，存在称为应用程序上下文的东西。它是一个可从应用程序中的任何位置访问的对象，可用于存储与应用程序上下文相关的数据。

Django中有这样的东西吗？如果不是，那么 Django 中可用于应用程序上下文用例的替代方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:41:10.120

我猜[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)会是类似的 - 至少在每个用户的基础上。全局变量需要手动持久化（DB、redis、...）——总而言之，Django比具有全局应用程序上下文的 Servlet更倾向于[无共享。](http://en.wikipedia.org/wiki/Shared_nothing_architecture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:31:56.117

在 Django 中似乎没有这样的东西，有可以使用的线程局部变量，但它们与应用程序上下文并不完全相同。

# visual-studio-2010 - 预构建事件复制命令以代码 1 退出

> ID：10063146
> 
> 赞同：29
> 
> 时间：2012-04-08T13:27:27.187
> 
> 标签：visual-studio-2010, pre-build-event

我在预构建事件中有以下内容：

```
copy /y $(ProjectDir)ThirdPartyAssemblies\ $(TargetDir) 
```

这会导致以下错误：

> 命令“复制 /y C:\Users\myusername\Documents\Visual Studio 2010\Projects\mysolution\myproject\ThirdPartyAssemblies* C:\Users\myusername\Documents\Visual Studio 2010\Projects\mysolution\myproject\bin\Debug\ " 以代码 1 退出。

我也在后期构建事件中尝试过它并得到同样的错误。然而，当我运行命令时，它会在控制台窗口中导致（错误中的那个）它工作正常。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-08T13:32:35.670

我不确定这是否与您收到的错误有关，但您需要在路径/文件名周围加上引号，因为其中有空格。

复制 /y "C:\Users\myusername\Documents\Visual Studio 2010\Projects\mysolution\myproject\ThirdPartyAssemblies*" "C:\Users\myusername\Documents\Visual Studio 2010\Projects\mysolution\myproject\bin\Debug\ "

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-11T21:40:10.297

`copy /y "$(SolutionDir)MyProject\myFile.xxx" "$(TargetDir)"`对我不起作用。我把头发拉了 45 分钟，直到我偶然发现[这个页面](http://support.microsoft.com/kb/240268)，然后尝试：

```
xcopy /y "$(SolutionDir)MyProject\myFile.xxx" "$(TargetDir)" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T12:03:05.460

此外，您可以通过宏来完成。在 Post/Pre Build Event 命令行中，展开宏。

```
copy  "$(TargetPath)" "$(SolutionDir)MyProject\Bin\Debug\"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T07:50:23.307

检查您在命令提示符中写入的路径，它找不到文件或文件夹。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-05-22T03:55:26.440

就我而言，我在每个项目上将解决方案配置从发布更改为调试，它解决了问题。

# xdebug - 使用 PHPStorm 和虚拟主机在 MAMP PRO 上设置 XDebug

> ID：10063149
> 
> 赞同：3
> 
> 时间：2012-04-08T13:27:46.893
> 
> 标签：xdebug, mamp, phpstorm

我是调试新手，终于找到了一些时间来玩它。但我无法让调试器在 PHPStorm (2.1) 中工作。

我在 Mac (Snow Leopard) 上并使用 MAMP PRO (2.0.1)。XDebug 已安装（默认 MAMP - 2.1.0）并处于活动状态。

我遵循的教程之一是：http: [//blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)

我用这个工具来生成书签： http: [//www.jetbrains.com/phpstorm/marklets/](http://www.jetbrains.com/phpstorm/marklets/)

在 PHPStorm 中，我单击“开始侦听 PHP 调试连接”按钮，在 Web 浏览器中，我使用链接“开始调试器”。然后我刷新网页并期待在 PHPStorm 中发生一些事情。但什么也没有发生。

应该有什么事情发生吧？

我认为这可能与我正在使用的虚拟主机（在 MAMP PRO 中创建）有关。当我在做一个项目时，我正在使用像 dev.companyname.com 这样的 URL

它可以与不同的虚拟主机一起运行还是我必须使用“localhost”？我怎样才能让这个东西工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T04:20:30.990

我在让 XDebug 与 MAMP Pro 和 PHPStorm 一起工作时遇到了同样的问题，但我终于弄明白了。这是我所做的：

1.  通过启动 MAMP编辑`php.ini`文件，然后转到 File->Edit Template->PHP->your PHP version 并添加：

    `[xdebug] zend_extension="/Applications/MAMP/bin/php/php5.3.6/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so"
    xdebug.remote_enable=1`

2.  `Start debugger`为、`Stop debugger`和`Debug this page`从此[书签生成器](http://www.jetbrains.com/phpstorm/marklets/)添加书签

3.  在 PHPStorm 中设置要触发的断点
4.  点击`Start debugger`书签
5.  在 PHPStorm 中，单击`Start Listen PHP debug connections`图标
6.  加载将触发断点的页面并且应该这样做

有关详细信息，请参阅 Jetbrains[教程帖子](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T02:40:48.413

旧版本有很多答案。使用 Mamp 2.2 和 PHPStorm 7.1 (OSX 10.9) 非常简单

**MAMP：**

通过 MAMP 为您正在使用的版本编辑 PHP.ini 以启用 XDebug，正如 Allen 描述的那样，删除“;” 在 zend_extension 前面添加 xdebug.remote_enable=1

**PHP风暴：**

1.  运行->编辑配置

2.  添加新的 PHP Web 应用程序

3.  配置一个新的服务器，主机是'localhost'，端口是'8888'，并设置启动URL（/myapp）

就是这样，点击调试，你很高兴，很容易。

# html - 如何安排html页脚元素自动中断

> ID：10063150
> 
> 赞同：0
> 
> 时间：2012-04-08T13:27:51.460
> 
> 标签：html, css

我的网站上有以下页脚

![在此处输入图像描述](../Images/42a8bbae486dd51914d7890acf641fe5.png)

用这个 html

```
<div class="footer_wrapper">
    <div class="top">
        <div class="footer_menu_block_float">
            <h1>Footer section</h1>
            <ul>
                <li>One</li>
                <li>Two</li>
                <li>Three</li>
                <li>Three</li>
                <li>Three</li>
                <li>Three</li>
                <li>Three</li>
                <li>Three</li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
    <div class="bottom"></div>
</div>​ 
```

的高度`footer_menu_block_float`是固定的。

```
.footer_wrapper .top div.footer_menu_block_float {
    height: 140px;
    float: left;
    width: 200px;
    margin: 10px 20px 0px 10px;
} 
```

正如你所看到的，一些文本被隐藏了。到达页脚底部时是否可以在右侧继续？例如，从 3 开始，4 将在 1 旁边，5 在 2 旁边，依此类推。知道怎么做吗？也许我应该使用div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:41:11.670

我的想法是制作两个`ul`s 并浮动它们。看到这个小提琴：http: [//jsfiddle.net/T5822/](http://jsfiddle.net/T5822/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:45:23.123

我刚刚发现这个解决方案非常有用

```
<div class="footer_wrapper">
        <div class="top">
            <div class="footer_menu_block_float">
                <h1>Footer section</h1>
                <div>One</div>
                <div>Two</div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="bottom"></div>
    </div> 
```

和

```
.footer_wrapper .top div.footer_menu_block_float div{
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:31:07.897

代替

```
height: 140px; 
```

经过

```
min-height: 140px; 
```

所以最小高度是 200px 但可以变大

玩得开心 ：）

# vb.net - ListBox & 二维数组 VB.net

> ID：10063156
> 
> 赞同：0
> 
> 时间：2012-04-08T13:28:32.037
> 
> 标签：vb.net, multidimensional-array, listbox

我是 VB 新手，我正在尝试从二维数组填充列表框，但我不知道从哪里开始。有人可以帮助我并指出正确的方向吗

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:30:31.577

尝试这个：

```
listBox1.MultiColumn = true;
    listBox1.DataSource = cars; 
```

# ruby - Ruby 中重做和重试语句的目的是什么？

> ID：10063166
> 
> 赞同：7
> 
> 时间：2012-04-08T13:29:38.493
> 
> 标签：ruby, flow-control, redo

我能想到的唯一用例`redo`是诸如写入套接字或从数据库读取之类的操作，但如果这些操作失败一次，后续尝试很可能也会失败，所以这对我来说仍然有点毫无意义，至于`retry`我真的想不出任何有用的情况。

这对我来说似乎毫无意义，因为我不知道或不使用 Ruby，但我渴望有朝一日创造一门很棒的语言，所以我想至少知道一些最流行的语言的设计背后的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T16:31:09.877

这个想法是你在调用`redo`or之前改变一些东西`retry`，希望你所做的任何事情都会在第二次起作用。我没有 的示例`redo`，但我们`retry`在我正在处理的应用程序中找到了 的用途。基本上，如果您有一些代码可能由于外部原因（例如网络）而失败，但是每次运行代码时执行前置条件检查成本太高，您可以`retry`在一个`begin...rescue`块中使用。不确定这是否清楚，所以我将直接进入示例。

基本上，我们有一些代码可以使用`Net:SFTP`. 该目录*应该*存在，但在某些特殊情况下，它还没有建立。如果它不存在，我们想尝试一次。但是每次都执行网络访问来检查目录是否存在会太昂贵，特别是因为它只有在特殊情况下才会不存在。所以我们这样做：

```
tried_mkdir = false
begin
  # Attempt to access remote directory
  ...
rescue Net::SFTP::StatusException
  raise if tried_mkdir
  tried_mkdir = true
  # Attempt to make the remote directory
  ...
  retry
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T19:52:25.107

用例`redo`可能是用户输入检查：

```
nums = Array.new(5){[rand(1..9), rand(1..9)]}
nums.each do |num1, num2|
  print "What is #{num1} + #{num2}: "
  redo unless gets.to_i == num1 + num2
end 
```

# magento - 如何显示每个字幕 在 magento 菜单中

> ID：10063168
> 
> 赞同：2
> 
> 时间：2012-04-08T13:29:44.047
> 
> 标签：magento

嗨，我正在尝试在 magento 菜单中添加字幕或第二行。我找到了一些代码，但无法编辑默认主题的 navigation.php。是否可以为每个类别使用不同的属性或在类别管理的一般信息选项卡中添加额外的字段？

有人试过吗？

谢谢！马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:45:23.790

最好的方法是创建一个本地代码池扩展并添加一个名为“subtitle”的附加 eav 属性或任何您想要对对象进行分类的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:03:42.590

您想要的是一种为类别创建属性的方法。目前，Magento 不允许您在 UI 中执行此操作。

如果你想要一个预制的扩展，[DeltaCats](http://www.magentocommerce.com/magento-connect/deltacats-6930.html)是我在 Magento Connect 中知道的唯一一个允许你用完整的 UI 做到这一点的扩展。

如果你想省钱自己做，[Incho](http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/)有一个我自己用过的教程，可以验证它在 Magento 1.6 上是否有效。

# c# - asp.net mvc EF 导航属性在代码中同名

> ID：10063169
> 
> 赞同：0
> 
> 时间：2012-04-08T13:29:48.573
> 
> 标签：c#, entity-framework, ef-code-first

我有这两个模型

```
 public class Group
    { 
    [Key]
    public int GroupID { get; set; }

    [Required]
    public string GroupName { get; set; }
}

public class User
{
    [Key]
    public int UserID { get; set; }

    [Required]
    [StringLength(20)]

    public string UserName { get; set; }

    [Required]
    public string Password { get; set; }   
    public virtual Group Groups { get; set; }
} 
```

使用代码优先方法，它在生成数据库时创建 Groups_GroupID 作为用户表中的外键。使用显示名称指定 GroupID 也不起作用，因为它正在创建相同的名称。那么我将如何让它在用户表中生成 GroupID？我正在使用 EF 4.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T13:35:31.370

在导航属性上使用[ForeignKey](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.foreignkeyattribute%28v=vs.103%29.aspx)属性

```
public class User
{
    [Key]
    public int UserID { get; set; }

    [Required]
    [StringLength(20)]

    public string UserName { get; set; }

    [Required]
    public string Password { get; set; } 

    [ForeignKey("GroupId")]  
    public virtual Group Groups { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:29:04.037

这有效...

```
public class User
{
    [Key]
    public int UserID { get; set; }

    [Required]
    [StringLength(20)]

    public string UserName { get; set; }

    [Required]
    public string Password { get; set; }

    public int GroupId { get; set; }
    public virtual Group Groups { get; set; }
} 
```

但是您可能希望这样做以处理您可能希望许多用户属于一个组和/或一个用户属于许多组的情况。

```
public class Group
    { 
    [Key]
    public int GroupID { get; set; }

    [Required]
    public string GroupName { get; set; }

    public List<User> Users { get; set; }
}

public class User
{
    [Key]
    public int UserID { get; set; }

    [Required]
    [StringLength(20)]

    public string UserName { get; set; }

    [Required]
    public string Password { get; set; }

    public List<Group> Groups { get; set; }
} 
```

# mysql - JSP：这是一个合适的 MySQL 类吗？

> ID：10063170
> 
> 赞同：0
> 
> 时间：2012-04-08T13:30:02.337
> 
> 标签：mysql, jsp

我在我的小型 JSP 项目中遇到了 MySQL 的问题。我之前问过一个关于这个的问题（http://stackoverflow.com/questions/9860129/jsp-mysql-jar-file-stops-working），这是一个基于该问题的信息表单的后续问题。

该类工作，页面从数据库中获取信息几天，然后它停止工作，直到我重新启动 Tomcat 服务器或再次部署 war 文件。

这是我的 MySQL 连接类，任何想法将不胜感激：

```
public class Connect {
    final String host = "localhost";
    final String username = "admin";
    final String password = "admin";   
    String connectionURL = "jdbc:mysql://" + host + ":3306/db?user=;password=";
    Connection connection = null;
    Statement statement = null;

    public Connect() {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            connection = (Connection) DriverManager.getConnection(connectionURL, username, password);
            statement = (Statement) connection.createStatement();
        } catch (SQLException ex) {
            Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public ResultSet executeQuery(String query) {
            ResultSet result = null;
            try {
                    if (statement != null) {
                            result = statement.executeQuery(query);

                    } else {
                            System.out.println("Null");
                    }
        } catch (SQLException ex) {
                Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        }
            return result;
    }
    public boolean execute(String query) {
            System.out.println(query);
            boolean result = false;
            try {
                    if (statement != null) {
                            result = statement.execute(query);
                    } else {
                            System.out.println("Null");
                    }
        } catch (SQLException ex) {
                Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
        }
            return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:07:12.607

看起来你从来没有关闭连接，所以几天后连接池和/或你的 MySQL 服务器已经用完了免费连接。

您是为每个查询创建一个新的 Connect 类，还是重复使用相同的类（如果是，您将如何处理多线程？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:29:04.517

```
 public class Connect {
            final String host = "localhost";
            final String username = "admin";
            final String password = "admin";   
            String connectionURL = "jdbc:mysql://" + host + ":3306/db?user=;password=";
            Connection connection = null;
            Statement statement = null;

    public Connect() {
    try {
           Class.forName("com.mysql.jdbc.Driver").newInstance();
           connection = (Connection) DriverManager.getConnection(connectionURL,      username, password);

          } catch (Exception ex) {
                    out.println("Exception is: " +ex)
                    } 
            }

            public ResultSet executeQuery(String query) {
                    ResultSet result = null;
                    try {

                            statement=(Statement)connection.createStatement();
                            result = statement.executeQuery(query);
                            if(result>0){
                                 result=true;
                               }else{
                                   result=false;
                                  } 
                         } catch (SQLException ex) {
                           Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
                         }finally{
                         if(statement!=null){try{statement.close;}catch(SQLException logOrIgnore){}}
                          if(connection!=null){try{connection.close;}catch(SQLException logOrIgnore){}}
        }
                    return result;
            }
            public boolean execute(String query) {
                    System.out.println(query);
                    boolean result = false;
                    try {

                           statement=(Statement)connection.createStatement();
                           result = statement.executeQuery(query);
                          if(result>0){
                              result=true;
                           }else{
                               result=false;
                           }
                       } catch (SQLException ex) {
                            Logger.getLogger(Connect.class.getName()).log(Level.SEVERE, null, ex);
                           }finally{
                             if(statement!=null){try{statement.close;}catch(SQLException logOrIgnore){}}
                            if(connection!=null){try{connection.close;}catch(SQLException logOrIgnore){}}
        }
                         return result;
      }

     } 
```

# asp.net - ASP.NET Web API：OAuth 服务提供者

> ID：10063173
> 
> 赞同：12
> 
> 时间：2012-04-08T13:30:22.223
> 
> 标签：asp.net, rest, oauth, authorization, asp.net-web-api

我想为基于 ASP.NET Web API 的 RESTful Web API 添加 OAuth 授权。最好能够使用 [Authorize] 属性。你能给我创建自己的服务提供者或使用一些图书馆的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:13:02.553

FWIW，这是计划在下一次发布（这将是一个候选版本）。因此，如果您可以等到那个时候，您将通过演示/样本开箱即用。

[http://aspnetwebstack.codeplex.com/wikipage?title=路线图](http://aspnetwebstack.codeplex.com/wikipage?title=Roadmap)

由于代码是开源的，我建议关注[codeplex 项目](http://aspnetwebstack.codeplex.com/)以了解其进展情况。通过这种方式，您可以利用所构建的内容，而无需等待官方 RC。

# scala - Play Framework 2.0 中的堆叠动作

> ID：10063178
> 
> 赞同：2
> 
> 时间：2012-04-08T13:30:44.463
> 
> 标签：scala, playframework-2.0

我想做一些类似的事情：

```
def findUser[ A ]( bp: BodyParser[ A ] )( id: Int )( f: User => Action[ A ] => Result )
def findProfile[ A ]( bp: BodyParser[ A ] )( id: Int )( f: Profile => Action[ A ] => Result ) 
```

两者（以及更多）可以互换使用，或者如下：

```
def create = findUser( parse.json ) { user => findProfile( parse.json ) { profile => implicit request => ... 
```

我与 parse.json 相关的两个问题（我认为我可以通过将 JsValue 作为动作中的主体解析器传递并将其从签名中删除来解决。并且能够使用其中一个或多个动作随意...有什么想法吗？

谢谢！

**更新**

将答案移至回答评论...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:17:34.207

我能够使用以下签名使其工作。这是重构的主体解析器...您可以将这些辅助函数（bodyParser、findUser、findProfile）放在一个特征中并使用它们扩展控制器...您还可以完全从签名中删除主体解析器并传递解析。 json 在操作中并产生 findUser( id ) 而不是 findUser( )( id )。

```
val bodyParser = parse.json //(I had to include the entire path to it...)
def findUser[ A ]( bp: BodyParser[ A ] = bodyParser )( id: Int )( f: User => Request[ A ] => Result )

def find( id: Int ) =
    IsLoggedIn( ) {
        findUser( )( id ) {
        user =>
        findProfile( )( user.id ){
            profile =>
            request =>
                Ok( toJson( profile ) )
} } } 
```

如果您知道更清洁的方法，请告诉我。

# scala - 在列表中搜索具有相同日期的对象

> ID：10063179
> 
> 赞同：0
> 
> 时间：2012-04-08T13:30:47.843
> 
> 标签：scala

我正在使用 find 搜索列表，使用模式匹配查找，过滤器，foldLeft（以及使用 Joda 进行日期相等）。

我需要搜索对象列表并找到与不同对象具有相同日期的匹配项。

```
case class DD(time: Date, value: Double)
case class UT(time: Date, name: String, value: Double) 
```

给定一个 UT 列表

```
var sdf = new SimpleDateFormat("yyyy-MM-dd")
var utList = Seq(UT(sdf.parse("2012-02-11"), "adf", 1), UT(sdf.parse("2012-02-13"), "adf", 2),UT(sdf.parse("2012-02-16"), "addf", 3) 
```

查找具有匹配 DD.time 的所有 UT 的最有效方法？

或者，更好的是，将列表拆分为两个子列表，其中一个列表不包含匹配项，另一个列表包含具有匹配 DD.time 的 UT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:06:58.750

用于`utList.filter(ut => ut.time == dd.time)`获取所有匹配时间

用来`utList.partition(ut => ut.time == dd.time)`分区。

鉴于 dd 是 DD 的一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:03:48.820

我想我错过了一些东西，但是......：

```
val (matchingDate, notMatchingDate) =
  utList partition {_.time == sdf.parse("2012-02-13")} 
```

如果您只有一个`DD`实例`someDd`：

```
utList partition {_.time == someDd.time} 
```

# asp.net - 如何使用 asp.net 和 json 实现 jquery-ui 自动完成？

> ID：10063182
> 
> 赞同：0
> 
> 时间：2012-04-08T13:31:15.280
> 
> 标签：asp.net, json, jquery-ui, jquery-ui-autocomplete

我正在研究 asp.net 和 jquery，现在我正在尝试在 PHP 中实现一个简单的自动完成功能，我可以这样做：

这是客户端代码：

```
<link type="text/css" rel="stylesheet" href="css/jquery-ui-1.8.17.custom.css"/>
    <script type="text/javascript" src="jquery-1.7.1.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.5.custom.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function()
        {
            $('.auto').autocomplete(
            {
                source: "search.php", 

                focus: function(event, ui) {
        $(idField).val(ui.item.value);
        $(this).val(ui.item.label);
        return false;
    },

                select: function(event, ui) {
        //$(this).val(ui.item.label);
        $(this).val(ui.item.label);
        var a = "#"+$(this).attr('id');

        $(a+"hidden").val(ui.item.value);
        return false;
    }
                //minLength: 3
            });
        });
    </script> 
```

这是我进行搜索的代码：

```
<?php

$host = "localhost"; 
$user = "root"; 
$password = ""; 
$db = "isproj2"; 

// open connection 
$connection = mysql_connect($host, $user, $password) or die ("Unable to connect!"); 

// select database 
mysql_select_db($db) or die ("Unable to select database!"); 
$text = mysql_real_escape_string($_GET['term']);

$query = "Select SupplierName, SupplierID from tbl_supplier where SupplierName LIKE '%$text%'";
$result = mysql_query($query);
$data = array();

$first = true;
while ($row = mysql_fetch_array($result)) {
    $data[] = array('label' => $row['SupplierName'], 'value' => $row['SupplierID']);
}
echo json_encode($data);
?> 
```

我想要做的是像这样的 asp.net，在我读过的一些文章中，我需要使用 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:47:04.553

jQuery 自动完成只需要一个 json 对象来填充可能的值。它是如何在服务器上生成的并不重要。您确实可以使用正式的 webservcie，我猜 asp.net 有非常巧妙的方法来生成这些。虽然我不是专家。

只要从您的 asp.net 代码返回的响应与 php 代码的响应相似，自动完成功能就会起作用。

# c# - LuaInterface：访问对象属性

> ID：10063184
> 
> 赞同：0
> 
> 时间：2012-04-08T13:31:43.793
> 
> 标签：c#, lua, luainterface

我正在使用 LuaInterface 为我希望在 Lua 中可用的一些对象注册一个 getter。例如：

```
 public MyObject getObjAt(int index)
    {
        return _myObjects[index];
    } 
```

我的 Lua 文件：

```
obj = getObjAt(3) 
print(obj.someProperty)    // Prints "someProperty"
print(obj.moooo)           // Prints "moooo"
print(obj:someMethod())    // Works fine, method is being executed 
```

在 Lua 中返回公共对象属性后，我该如何访问它们？这甚至可能还是我必须为每个对象属性编写getter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:41:25.707

您可能会发现此代码有助于理解如何访问属性：

```
class Lister
{
    public string ListObjectMembers(Object o)
    {
        var result = new StringBuilder();
        ProxyType proxy = o as ProxyType;

        Type type = proxy != null ? proxy.UnderlyingSystemType : o.GetType();

        result.AppendLine("Type: " + type);

        result.AppendLine("Properties:");
        foreach (PropertyInfo propertyInfo in type.GetProperties())
            result.AppendLine("   " + propertyInfo.Name);

        result.AppendLine("Methods:");
        foreach (MethodInfo methodInfo in type.GetMethods())
            result.AppendLine("   " + methodInfo.Name);

        return result.ToString();
    }
} 
```

并注册函数：

```
static Lister _lister = new Lister();
private static void Main() {
    Interpreter = new Lua();

    Interpreter.RegisterFunction("dump", _lister,
    _lister.GetType().GetMethod("ListObjectMembers"));
} 
```

然后在 Lua 中：

```
print(dump(getObjAt(3))) 
```

# .htaccess - .htaccess 重写规则不想像以前那样工作

> ID：10063190
> 
> 赞同：0
> 
> 时间：2012-04-08T13:32:32.073
> 
> 标签：.htaccess

我一直在使用重写规则，但这很奇怪。

该站点托管在 dev.domain.com 上，htaccess 代码是

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

RewriteRule ^order/([^/]+) order.php?id=$1 [QSA]
... 
```

但是，当我访问[http://dev.domain.com/order/4](http://dev.domain.com/order/4)时，$_GET 没有通过，以前从未遇到过此类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:47:26.377

1.  检查这[`AllowOverride`](http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride)不会限制你。例如，如果它设置为`None`- 这将完全禁用整个 .htaccess 支持，Apache 根本不会在磁盘上查找 .htaccess 文件。

2.  检查是否[`MultiViews`](http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html#multiviews)启用。众所周知，这会与 mod_rewrite 一起产生意想不到的结果。

3.  在规则中添加“L”标志 -`[L,QSA]`以在该点停止规则执行。也许您还有其他未在此处发布的规则会影响行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:26:36.400

问题是 Nginx 根本不支持 .htaccess ，必须以自己的方式进行..

# python - 我正在使用 PyInstaller 将 .py 文件转换为 .exe 文件，但我遇到了困难？

> ID：10063193
> 
> 赞同：1
> 
> 时间：2012-04-08T13:33:17.767
> 
> 标签：python, cmd, exe, pyinstaller

我已将其更改为 .spec 文件，之后它会告诉我运行 build.py。我这样做了，但它出现了 Build.py：错误：只需要一个 .spec 文件，然后什么也不做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T17:53:50.270

我建议您使用标准的 PyInstaller 脚本 pyinstaller.py，它将所有其他脚本组合到一个界面中。

只需输入：

> python pyinstaller.py your_script.py

PyInstaller 将创建一个 Build 和 Dist 文件夹，并将您的 exe 放在 Dist 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:13:16.117

以下是我用来制作exe的内容。

使用 python ../pysinstaller-1.5/Configure.py

python ../pyinstaller-1.5/MakeSpec.py -F --noconsole -n name-of-the-app path-to-your main-.py-file

python ../pyinstaller-1.5/Build.py path-to-name-of-the-app.spec-file-produced

注意：您应该只需要在全新安装后运行一次配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T19:10:55.490

如果您像我一样在路径变量中设置了 pyinstaller，那么您所要做的就是：

pyinstaller -F

它会自动生成其他所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:02:58.667

1.  将您的脚本放在一个新文件夹中。
2.  运行第一个脚本（`configure.py`如果有记忆的话）
3.  运行第二个脚本（`make.py yourfolder\yourscript.py`再次从内存中）
4.  运行最后一个脚本( `build.py yourfolder\yourscript.spec`)

你现在应该有一个exe。祝你好运。

# lisp - 替换elisp中关联列表中的项目

> ID：10063195
> 
> 赞同：31
> 
> 时间：2012-04-08T13:33:45.717
> 
> 标签：lisp, elisp, associative-array

我在 emacs lisp 中有一个 alist，例如：

```
(setq a1
 '((:k1 . 1)
   (:k2 . 2)
   (:k3 . 3))) 
```

我想将：k1 的值更改为 10，例如`(:k1 . 10)`。我怎么做？

我试过`(setf (assoc :k1 a1) '(:k1 . 10))`了 - 它没有用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-08T13:55:05.900

使用 alists，您通常会在旧的 cons 前面添加一个新的 cons 以“遮蔽”旧值，如下所示：

```
(add-to-list 'a1 '(:k1 10)) 
```

执行此操作`(assoc :k1 a1)`后将返回 10。

如果您想“撤消”您的更改以便`assoc`再次返回您的旧值，请使用以下代码：

```
(setq a1 (delq (assoc :k1 a1) a1)) 
```

这将删除 from 的第一个**匹配**项。`:k1``a1`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-26T05:44:47.207

从 Emacs 25.1 开始，`alist-get`它是一个地方表单，因此您可以执行以下操作：

```
(setf (alist-get :k1 a1) 10) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-08T14:54:40.597

`setf`宏不知道，`assoc`但您仍然可以以稍微手动的方式使用该方法：

```
(let ((item (assoc :k1 a1)))
  (setf (car item) :k1)
  (setf (cdr item) 10)) 
```

如果只需要为给定汽车设置 cdr（而不是同时替换两者），那么我们可以将其简化为：

```
(setf (cdr (assoc :k1 a1)) 10) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-14T06:20:57.160

这个更短更简单的版本适用于我的 Emacs Lisp (MAC Lisp)：

```
(setcdr (assoc :k1 a1) 10) 
```

或者，如果您碰巧使用的是 Common Lisp：

```
(rplacd (assoc :k1 a1) 10) 
```

（请注意，当涉及到返回的值时，setcdr 和 rplacd 的行为可能略有不同。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-10T12:31:23.673

怎么样`assq-delete-all`：

```
(setq sql-product-alist
      (cons '(ms-tsql :server ....)
            (assq-delete-all 'ms-tsql sql-product-alist))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-11T22:36:51.027

这是基于 givenkoa 建议的功能-

```
(defun alist-set (alist-symbol key value)
  "Set KEY to VALUE in alist ALIST-SYMBOL."
  (set alist-symbol
        (cons (list key value) 
              (assq-delete-all key (eval alist-symbol))))) 
```

用法 -

```
(let ((foo '((a 1) (b 2))))
  (alist-set 'foo 'a 3)
  foo) ; => ((a 3) (b 2)) 
```

# ssrs-2008 - 在报表的其他部分显示文本框的值

> ID：10063196
> 
> 赞同：4
> 
> 时间：2012-04-08T13:33:52.697
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

在报表表中有这个公式来计算发票的小计。这是公式：

```
=Sum(Fields!LineTotal.Value) 
```

该文本框称为 TextBoxSubTotal。我想在报告的另一部分显示它，例如在我显示小计、税金、运费和应付总额的标题区域中。

您能告诉我如何在报表其他部分的 TextBoxSubTotal 中显示此值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:02:11.910

您是否尝试过创建报告变量？创建一个新变量并将发票计算放入新变量的表达式中。然后从两个文本框中引用报告变量。

两个文本框的源代码如下所示：

```
=Variables!TestVariable.Value 
```

[http://msdn.microsoft.com/en-us/library/dd255208(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/dd255208%28SQL.105%29.aspx)

# mysql - 桌面应用程序的数据库托管

> ID：10063197
> 
> 赞同：0
> 
> 时间：2012-04-08T13:34:09.903
> 
> 标签：mysql, database, jdbc, hosting, desktop

我的 java 桌面应用程序需要一个数据库托管解决方案。java 应用程序必须通过互联网通过 jdbc.i 连接到远程数据库，已经搜索过网络，但只有带有数据库的网络托管出现，远程数据库必须配置用户名密码..主机名，端口号，数据库名称，稍后可用于通过 jdbc 连接到该数据库。SomeBody 可以帮助找到专门用于这种目的的网站吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:51:12.033

我还没有尝试过，但我有同样的要求，并[从 xeround 找到了这个](http://xeround.com/blog/2012/03/free-cloud-services-for-application-developers)

# ios - 为什么在 observeValueForKeyPath 内启动此请求时，获取的请求不是最新的？

> ID：10063206
> 
> 赞同：1
> 
> 时间：2012-04-08T13:36:15.073
> 
> 标签：ios, core-data, key-value-observing

我有一个关于核心数据和通知的问题。阅读 Apple 文档后，我没有找到答案。

这就是问题所在：
我有一个具有一对多关系的托管对象。我想知道何时从这种关系中添加或删除了一个对象。（一个“类别”有很多“项目”）我用它来知道何时添加或删除项目的类别：

```
[category addObserver:self forKeyPath:@"items" 
   options:NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew 
   context:nil]; 
```

然后调用这个方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath 
   ofObject:(id)object change:(NSDictionary *)change context:(void *)context; 
```

问题：
假设一个类别有 2 个项目，我删除了其中一个。现在该类别只有 1 个项目。但是，如果我从 启动一个获取的请求`observeValueForKeyPath`，它会说该类别有 2 个项目，但这是错误的，因为它现在有 1 个。

我想这是因为`observeValueForKeyPath`在保存上下文时调用，`[context save:&error]`（这是我在 Apple 文档中找到的唯一内容），也许修改`[context save:&error]`在行结束之前无效。因此，为了测试我的理论，我修改了我的`observeValueForKeyPath`代码，并将所有代码移到了一个方法中，我使用了：

```
 [self performSelector:@selector(launchFetchedRequest) 
   withObject:nil afterDelay:0]; 
```

为了在下一个运行循环中执行该方法，也就是在`[context save:&error]`. 瞧，现在一切正常。

那么，如果我想在内部启动一个 fetch 请求`observeValueForKeyPath`，我是否必须在下一个运行循环中启动它？这是正常行为吗？你通常是怎么做的？

我想知道你对这个话题的看法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T00:55:16.600

我从来没有尝试过从那里取货。此外，您没有说明您使用哪个 MOC 来实现更改，以及您使用哪个 MOC 来查询。

尽管如此，大多数与 fetch 相关的问题没有返回您认为应该返回的内容，这是由于 shouldRefreshRefetchedObjects 设置的结果。

确保正确配置您正在使用的 NSFetchRequest 的 shouldRefreshRefetchedObjects 属性，以便为您提供所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T01:31:05.887

里卡多，

使用`object`参数。这是你的`category`收藏。您所要做的就是查看其中的内容，因此您实际上不需要运行查询并点击托管对象上下文。

这里的问题是通知事件在集合更改（KVO）时被触发并使用另一个线程循环，并且主线程尚未将更改传播到托管对象上下文中。如果你使用了`object`参数，它应该是正确的。

# xcode - 我在 iOS xcode 4.3 中几乎有一个统一的搜索栏，但只有一个词？

> ID：10063208
> 
> 赞同：0
> 
> 时间：2012-04-08T13:36:37.150
> 
> 标签：xcode, url, search

除非我尝试搜索两个以上的单词，否则一切似乎都运行良好。因此，“apple”作为搜索被发送到谷歌，但“apple stuff”无法加载。有任何想法吗？此外，我将谷歌搜索添加到 didfailtoload 中，但返回了一个 didfailtoload 循环。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField {

    webView.delegate = self;

    if ([urlField.text hasPrefix:@"http://"]) {

        [webView loadRequest: [NSURLRequest requestWithURL: [NSURL URLWithString:urlField.text]]];
        [urlField resignFirstResponder];
        return NO;

    } else if ([self isProbablyURL:urlField.text]) {

    NSString *query = [urlField.text stringByReplacingOccurrencesOfString:@" " withString:@"+"];
    NSURL *urlQuery = [NSURL URLWithString:[NSString stringWithFormat:@"http://%@", query]];
    NSURLRequest *request = [NSURLRequest requestWithURL:urlQuery];
    [webView loadRequest:request]; 
    [urlField resignFirstResponder];
    return NO;

    } else {

        ([self performGoogleSearchWithText:urlField.text]);
        [urlField resignFirstResponder];
        return YES;

    }
}

- (void)performGoogleSearchWithText:(NSString *)text {

    // Make a google request from text and mark it as not being "fallbackable" on a google search as it is already a Google Search
    NSString *query = urlField.text;
    NSURL *urlQuery = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/search?hl=en&site=&source=hp&q=%@", query]];
    NSURLRequest *request = [NSURLRequest requestWithURL:urlQuery];
    [webView loadRequest:request];

}

- (BOOL)isProbablyURL:(NSString *)text {

     // do something smart and return YES or NO
    NSString *urlRegEx =
    @"((\\w)*|(m.)*|([0-9]*)|([-|_])*)+([\\.|/]((\\w)*|(m.)*|([0-9]*)|([-|_])*))+";
    NSPredicate *urlTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", urlRegEx]; 
    return [urlTest evaluateWithObject:urlField.text];
    //return NO;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:18:33.340

您正在`-performGoogleSearchWithText:`使用用户提供的搜索字符串创建一个 Google URL。但是，如果查询包含多个单词，单词之间会有空格，NSURL 将拒绝创建 URL，因为它包含无效字符。为了使它起作用，您必须将空格字符替换为等效的百分比转义字符，例如 %20。

在该`-performGoogleSearchWithText:`方法的以下版本中，我使用 NSStrings`+stringByAddingPercentEscapesUsingEncoding:`方法将搜索字符串中在 URL 中无效的字符替换为 URL 百分比编码的等效字符。

```
- (void)performGoogleSearchWithText:(NSString *)text {
    // Make a google request from text and mark it as not being "fallbackable" on a google search as it is already a Google Search
    NSString *query = [text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *urlQuery = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/search?hl=en&site=&source=hp&q=%@", query]];
    NSURLRequest *request = [NSURLRequest requestWithURL:urlQuery];
    [webView loadRequest:request];
} 
```

注意：我使用了传入的文本参数，而不是使用`urlField.text`.

# vim - Vim：完成菜单项颜色

> ID：10063210
> 
> 赞同：4
> 
> 时间：2012-04-08T13:37:11.987
> 
> 标签：vim, autocomplete

Vim 的补全功能包括区分不同类型的选项。我现在正在编写自己的自动完成功能。因此，我喜欢对条目进行不同的着色，每种类型都使用一种颜色。

正如 Vim 文档所述，这应该是可能的：

> “种类”项使用单个字母来表示完成的种类。这可用于以不同的方式显示完成（不同的颜色或图标）。目前可以使用这些类型：
> 
> ```
>  v       variable 
>     f       function or method     
>     m       member of a struct or class        
>     t       typedef                              
>     d       #define or macro 
> ```

这可用于以不同的方式显示完成（不同的颜色或图标）。`How?`我在 Vim 帮助中没有找到任何内容。菜单（hl-PMenu）的高亮设置似乎只针对整个菜单，而不针对不同类型。

补全现在看起来是这样的（后面的字母是类型：

```
variable1          v
str()              f 
```

所有菜单项都具有相同的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:34:29.553

I normally flick through [jellybeans](https://github.com/nanotech/jellybeans.vim) as a reference as it's quite complete (and the author is quite receptive to pull requests)

# neo4j - 如何在 Cypher-query 中返回关系的结束节点？

> ID：10063211
> 
> 赞同：1
> 
> 时间：2012-04-08T13:37:17.803
> 
> 标签：neo4j, cypher

以下 Cypher-Query 从匹配的关系索引中返回所有关系：

```
start r=relationship:concept_contained_in_report('concept_id:2') return r 
```

如何返回这些关系的所有端节点而不是关系本身？

我希望像

```
 start r=relationship:concept_contained_in_report('concept_id:2') return r.end 
```

但这不起作用，因为 end （端节点）不是关系的属性。

谢谢乔格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:58:08.327

你可以试试

```
start r=relationship:concept_contained_in_report('concept_id:2')
match ()-[r]->endNode
return endNode 
```

基本上，将关系与其开头和结尾相匹配。您不关心开头，因此不要为其分配标识符。为结束节点分配一个标识符并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T00:49:31.107

或者在 Neo4j 2.0+ 中，您也可以尝试以下代码：

```
start r=relationship:concept_contained_in_report('concept_id:2')
return endNode(r) as eNode 
```

他们提供了一个非常方便的功能，嗯。

# performance - 将 C/C++/Pascal/等。如果它是一种无堆栈语言，会大大慢吗？

> ID：10063212
> 
> 赞同：0
> 
> 时间：2012-04-08T13:37:27.383
> 
> 标签：performance, language-design, stackless

还有一个相关的问题：堆栈跟踪/类似的调试功能会是什么样子？

如果这是一个愚蠢的问题，请原谅我，但我对低级编程知之甚少。我知道大多数 CPU 都有与堆栈相关的指令，但是经过适当优化的无堆栈语言真的会慢得多吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T00:49:34.173

简短的回答：如果您的问题*需要*堆栈，那么语言/硬件内置的堆栈可能会比您编写的堆栈快很多。

让我们想想什么是“无堆栈语言*”*。

最初的 Fortran 语言没有堆栈的概念。你能写的只是一个大的 MAIN 程序。然后发现能够编写子例程并调用它们非常有用，因此添加了它以及返回值的函数。然而，正如我个人发现的那样，如果你让 MAIN 调用了一个子例程 A，然后它调用了 B，然后 B 会发现自己再次调用了 A，你猜怎么着？机器会“挂在返回循环中”，因为当 A 试图返回 MAIN 时，它会返回到 B，而 B 又会返回到 A，依此类推。它无法记住不止一件要返回的东西。

因此，对于某些问题，在那个 Fortran 中，如果不编写自己的堆栈，就无法解决问题。也就是说，您将拥有一个数组和一个整数变量，通过索引该数组来跟踪下一步要做什么，并且您最终会做一些后来被称为“push”和“pop”的事情。

这被发现非常有用，它被内置到后来的语言中。有多种方法可以做到这一点。在机器开始有内置堆栈之前，像 PL/1 这样的语言会有效地创建一个堆栈，其形式为不断分配和删除的激活记录的链表。（效率不是很高，但确实有效。）

所以如果你的语言没有堆栈，而你试图解决某些问题，你将不得不从活的语言中凿出你自己的堆栈，因为问题只是需要它。这种问题的一个例子是深度优先树行走。

所以如果你能做到这一点，语言是否“无堆栈”？

# css - DIV 周围的边框

> ID：10063213
> 
> 赞同：0
> 
> 时间：2012-04-08T13:37:45.037
> 
> 标签：css, html, web, border

我一直在用 Firefox 构建这个网站，没有出现任何问题，当我开始使用 chrome 进行跨浏览器测试时，我注意到我的`<div>`.

![在此处输入图像描述](../Images/5b94ce809b1b35810735c9f0e5a614e2.png)

这就是它应该看起来像没有边界

![在此处输入图像描述](../Images/e384e38f75f9dad8974df40a2a276bb7.png)

但是，当我单击 div 的空白区域之一时，请注意 div 周围的浅黄色边框。

我之前在图像上遇到过类似的问题，因此我添加了 a`border:0`并解决了，但是，对于这个问题，我尝试了`border:0`, `border:none`，`outline:0`但它们似乎都不起作用。

这是非常紧急的，我感谢你们的任何帮助。

请不要犹豫，问我任何可能有助于解决这个问题的问题。

提前致谢

**编辑**

刚刚得知这是chrome的焦点指示器，常规的`border:0`，`border:none`适用于这种类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:49:44.500

使用伪选择器 Element:focus { Outline:none; }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:41:38.473

那个黄色边框是“焦点”指示器。而在 IE 中它是一个虚线轮廓，Chrome 会添加一个这样的黄色边框。

不幸的是，我还没有找到一种可靠的方法来摆脱它，但是请仔细检查您是否已将去除边框的样式添加到正确的元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:49:40.103

如果在 css 中调用该 div，则该 div 的样式应该在一个块中。 maindiv 让它独立

```
.div{
border:0px;
} 
```

# iphone - MPMusicPlayerController 在后台暂停并在应用程序进入前台时恢复

> ID：10063216
> 
> 赞同：2
> 
> 时间：2012-04-08T13:38:15.193
> 
> 标签：iphone, background, resume, mpmusicplayercontroller

我已经实现了 MPMusicPlayerController 来播放库中的音乐。当应用程序进入后台时，我暂停它，当它回到前台时，我希望它恢复。它暂停得很好，但从头开始。这是代码...

AppDelegate.m

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [self.appMusicPlayer pause];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [self.appMusicPlayer play];
} 
```

主视图控制器.m

```
- (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection 
{
    [self dismissModalViewControllerAnimated: YES];
   appdelegate.selectedSongCollection=mediaItemCollection; 
    appdelegate.appMusicPlayer = [MPMusicPlayerController applicationMusicPlayer];

    [appdelegate.appMusicPlayer setQueueWithItemCollection:appdelegate.selectedSongCollection];
    [appdelegate.appMusicPlayer play];
    [btnStop setHidden:NO];
    [btnMusic setHidden:YES];
}

- (void) mediaPickerDidCancel: (MPMediaPickerController *) mediaPicker 
{   
    [self dismissModalViewControllerAnimated: YES]; 
} 
```

当应用程序进入前台时如何恢复它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:03:45.643

我会查看曲目的 currentPlaybackTime。MPMusicPlayerController 有一个 currentPlaybackTime 属性。当应用程序要进入后台时，只需保存此值（作为一个属性应该可以正常工作），然后在 WillEnterForeground 中，使用相同的属性值来设置当您恢复时的 currentPlaybackTime。

# c# - 尝试单击按钮登录网站（Httpwebrequest - cookie）

> ID：10063220
> 
> 赞同：3
> 
> 时间：2012-04-08T13:38:46.363
> 
> 标签：c#, wordpress, cookies, httpwebrequest, webbrowser-control

几周前我刚刚开始使用 C#。我有一项我正在尝试执行的任务，但不确定我现在执行的方式是否正确。

我正在尝试登录一个网站（在我的情况下是 WordPress 网站 - 以获得更好的选择）并使用 C# 在管理面板中导航

到目前为止，我所做的是创建一个新项目——Windows 窗体应用程序。

以下代码 - 使用密码/用户名和其他参数作为 POST 向网站发送请求

```
private void button2_Click(object sender, EventArgs e)
{
    CookieContainer cookieJar = new CookieContainer();
    CookieContainer cookieJar2 = new CookieContainer(); // will use this later
    string testaa = ""; // will use this later
    string paramaters = "log=xxxx&pwd=xxxx&testcookie=1&redirect_to=http://www.example.com/wp-admin/&wp-submit=Log In";
    string strResponse;
    HttpWebRequest requestLogin = (HttpWebRequest)WebRequest.Create("http://www.lyndatobin-howes.com/wp-login.php");
    requestLogin.Method = "POST";
    requestLogin.AllowAutoRedirect = false;
    requestLogin.ContentType = "application/x-www-form-urlencoded";
    requestLogin.CookieContainer = cookieJar;
    requestLogin.ContentLength = paramaters.Length;
    StreamWriter stOut = new StreamWriter(requestLogin.GetRequestStream(), Encoding.ASCII);
    stOut.Write(paramaters);
    stOut.Close();
} 
```

然后我有这段代码来获取响应的cookie。

```
HttpWebResponse response = (HttpWebResponse)requestLogin.GetResponse();
foreach (Cookie c in response.Cookies)
{
    cookieJar2.Add(new Cookie(c.Name, c.Value, c.Path, c.Domain));
} 
```

然后我有这个来读取响应+关闭一些流。

```
StreamReader stIn = new StreamReader(requestLogin.GetResponse().GetResponseStream());
strResponse = stIn.ReadToEnd();
string responseFromServer = stIn.ReadToEnd();
webBrowser1.DocumentText = responseFromServer;
stIn.Close();
response.Close(); 
```

然后我尝试将上述cookie用于我尝试访问的页面，如下所示：

```
HttpWebRequest requestLogin2 = (HttpWebRequest)WebRequest.Create("http://www.example.com/wp-admin/");
requestLogin2.Method = "POST";
requestLogin2.AllowAutoRedirect = false;
requestLogin2.ContentType = "application/x-www-form-urlencoded";
requestLogin2.CookieContainer = cookieJar2;
requestLogin2.ContentLength = paramaters.Length;
StreamWriter stOut2 = new StreamWriter(requestLogin2.GetRequestStream(), System.Text.Encoding.ASCII);
stOut2.Write(paramaters);
stOut2.Close();

StreamReader stIn2 = new StreamReader(requestLogin2.GetResponse().GetResponseStream());
strResponse = stIn2.ReadToEnd();
string responseFromServer2 = stIn2.ReadToEnd();
webBrowser1.DocumentText = responseFromServer2;
richTextBox2.Text += "\n\n\n" + responseFromServer2;
stIn.Close(); 
```

好吧，由于某种原因它不起作用，我已经尝试了一个星期。

我尝试显示标题 - 在第一次请求查看我返回的标题之后。然后查看我构建的cookie（cookieJar2），它们似乎不一样..

无论如何，任何关于此事的帮助都会很棒并受到高度赞赏。我试图提供尽可能多的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:44:05.427

使用[Fiddler](http://www.fiddler2.com/fiddler2/)和/或[Wireshark](http://www.wireshark.org/)并比较成功的请求（使用某些浏览器发出）和失败的请求......然后通过删除/添加任何需要的东西来模仿代码中的成功请求，通常[Cookie](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)是此类中的“罪魁祸首”之一情况 - 有时是特定的推荐人或类似的......

一些网站对自动登录使用保护措施...

除了编码部分：检查他们的条款/条件是否禁止以这种方式自动登录！

# c - 在 C 中释放字符串

> ID：10063222
> 
> 赞同：11
> 
> 时间：2012-04-08T13:39:09.730
> 
> 标签：c, free

如果我要写：

```
char *a=malloc(sizeof(char)*4);
a="abc";
char *b="abc"; 
```

我需要释放此内存，还是由我的系统完成？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T13:46:19.793

在您的情况下，您将无法释放动态分配的内存，因为您正在丢失对它的引用。

试试这个：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  char *a=(char*)malloc(sizeof(char)*4);
  printf("Before: %p\n",a);
  a = "abc";
  printf("After: %p\n",a);
  free(a);
  char *b = "abc";

  return 0;
} 
```

您将获得

```
Before: 0x100100080
After: 0x100000f50 
```

你会看到这两个指针是不同的。这是因为字符串文字`"abc"`被放置在二进制文件的数据扇区中，当你这样做时

```
a = "abc" 
```

您正在将指针更改为指向`a`常量文字字符串`"abc"`，并且您正在丢失先前分配的内存。调用`free`on`a`不再正确，因为它不再指向有效的动态分配地址。要保留指针并能够释放它，您应该复制字符串

```
strncpy(a, "abc", 4) 
```

这将有效地将字符从文字复制到动态分配的方法，保留原始指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T13:45:34.023

你这里有内存泄漏。当您设置 时`a="abc"`，您并没有填充刚刚分配的内存，而是重新分配指针以指向静态字符串“abc”。 `b`指向相同的静态字符串。

您想要的是[`strncpy(a, "abc", 4)`](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)，它将“abc”的内容复制到您分配的内存中（`a`指向）。

然后你需要在完成后释放它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T13:41:36.993

您不能使用 C 以这种方式分配字符串

```
a = "abc" 
```

但是，如果你使用，`malloc`那么你必须使用`free`，像这样

```
free(a); 
```

但是请注意，如果您`free(a)`在示例中使用，则会出现错误。因为在`malloc`您将指针`a`值更改为静态字符串之后`"abc"`；所以接下来`free(a)`尝试释放一个静态数据。你得到了错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T13:45:51.873

简单的回答是，不是。你的代码也有问题。

具体答案：

```
char *a=malloc(sizeof(char)*4); 
```

你分配内存，所以你应该释放它。

```
a="abc"; 
```

这会将指向常量字符串的指针分配给您的`char* a`，通过这样做，您会丢失指向在第一行中分配的内存的指针，您永远不应该释放常量字符串。

使用`strcpy(a,"abc");`而不是`a="abc";`将字符串移动到分配的内存中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T13:41:02.277

是的，您需要释放 malloc 返回的内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T15:39:02.920

是的，它会导致内存泄漏。系统无法处理此案。

# python - 理解 Python 中的缩进

> ID：10063223
> 
> 赞同：1
> 
> 时间：2012-04-08T13:39:24.933
> 
> 标签：python, indentation

我在学校开始学习 Python，作为家庭作业，我们必须制作一个刽子手游戏。我唯一的问题是它似乎总是尝试缩进所有内容，即使我这样做了，它仍然需要缩进。

这是我的代码：

```
import random
global guess

def checkGuess():
    turns = 5
    n = 0
    guess = input('Please guess a letter:')
    guesslen = len(guess)
    while len(guess) > n:
        if guesslen >1:
            print ('Please only guess a single letter.')
            checkGuess()
        elif guess in secretWord:
            print (guess)
            n = n+1
            checkGuess()
        elif guess not in secret:
            turns -= 1
            print ('Nope.')
            print (turns), 'more turns'
            if turns < 5: print ('        OMMMMMD')
            if turns < 5: print ('       MMMMMMMMM')
            if turns < 5: print ('      =MMMMMMMMM?')
            if turns < 5: print ('      ,MMMMMMMMM:')
            if turns < 5: print ('       MMMMMMMMM')
            if turns < 5: print ('        .MMMMM,')
            if turns < 5: print ('                       ')
            if turns < 3: print ('  ZMMMMMMMMMMMMMMMMM7L')
            if turns < 3: print (' MMMMMMMMMMMMMMMMMMMMM')
            if turns < 3: print ('MMMMMMMMMMMMMMMMMMMMMMM')
            if turns < 3: print ('MMMMMMMMMMMMMMMMMMMMMMM')
            if turns < 3: print ('MMMMIMMMMMMMMMMMMMIMMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print ('MMMM DMMMMMMMMMMMM MMMM')
            if turns < 3: print (' ZD  DMMMMM?MMMMMM  DO')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 2: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('     DMMMMM MMMMMM')
            if turns < 1: print ('      MMMM+ ?MMMM')
            if turns == 0:
            print ('The answer is'), (secretWord)

print('H A N G M A N')
secretWord = random.choice (['crocodile','elephant','penguin','pelican', 'leopard', 'hamster', 'lion',])
i = ('')
g = len(secretWord) <--- THIS IS THE LINE WHERE THE PROBLEM IS
length = 0
print (secretWord)
while g > length:
    i = i + (' _')
    length = length + 1
print(i)
guess = ('')
checkGuess() 
```

我已经尝试了本网站和其他网站上已经建议的所有方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T13:43:21.843

实际上问题出在第 57 行。你有一个`if`语句，但你没有缩进它的内容。

```
 if turns == 0:
        print ('The answer is'), (secretWord) 
```

应该

```
 if turns == 0:
            print ('The answer is'), (secretWord) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T13:57:45.107

问题：

1.  你不跟踪猜测

2.  使用全局变量进行轮次和猜测，轮次和猜测变量应在您的函数之外

3.  while(guess)> n 应该是 if(guess) > n

4.  使用 raw_input 而不是 input

5.  在获胜循环中添加guesses.append(guess)

6.  检查猜测是否生成单词：

    如果排序（列表（secretWord））==排序（列表（猜测））：

7.  你搞砸了所有的变量名，秘密 - secretWord..

8.  后添加缩进

    如果转== 0：

9.  if turn == 0: ... 添加这样的 else 块 "else: checkGuess()"

# iphone - IOS https认证

> ID：10063224
> 
> 赞同：5
> 
> 时间：2012-04-08T13:39:26.527
> 
> 标签：iphone, objective-c, https

我希望我的应用程序对设备进行身份验证，即通过 https 传递用户名和密码。

我看了几个例子，基本上构建了以下内容：

```
-(void)authentication
{
    //setting the string of the url taking from appliance IP.
    NSString *urlString =[NSString 
                          stringWithFormat:
                          @"http://%@",appliance_IP.text];
    //define the url with the string
    NSURL *url = [NSURL URLWithString:urlString];

    //creating request
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    //setting credential taking from the username and password field
    NSURLCredential *credential = [NSURLCredential credentialWithUser:username.text password:password.text persistence:NSURLCredentialPersistenceForSession];

    NSURLProtectionSpace *protectionSpace=
    [[NSURLProtectionSpace alloc]initWithHost:urlString port:443 protocol:@"https" realm:nil authenticationMethod:nil ];

    [[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace];

    [ NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:NULL];

} 
```

由于我使用了我需要更多理解的示例，上面示例中的 NSURLConnection 不包含用户名和密码，我该如何添加它？因此请求还将包含用户名和密码，或者最好传递该信息。当前请求仅包含 url 字符串。

谢谢急诊室

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T14:44:35.010

当发出需要身份验证的请求时，您将收到对 didReceiveAuthenticationChallenge 的回调，您的处理方式如下：

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
   if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust])
   {
       if ([challenge.protectionSpace.host isEqualToString:MY_PROTECTION_SPACE_HOST])
       {
           [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
       }

       [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
   }
   else if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodHTTPBasic])
   {
      if ([challenge previousFailureCount] == 0)
      {
          NSURLCredential *newCredential;

          newCredential = [NSURLCredential credentialWithUser:MY_USERNAME
                        password:MY_PASSWORD
                        persistence:NSURLCredentialPersistenceForSession];

          [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
      }
      else
      {
          [[challenge sender] cancelAuthenticationChallenge:challenge];

          // inform the user that the user name and password
          // in the preferences are incorrect

          NSLog (@"failed authentication");

          // ...error will be handled by connection didFailWithError
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:40:38.227

您必须使用`NSURLConnectionDelegate`委托来处理`NSURLConnection`事件。

对于身份验证，有两种委托方法：`connection:canAuthenticateAgainstProtectionSpace:`和`connection:didReceiveAuthenticationChallenge:`

[请参阅URL 加载系统编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1)中的示例

# javascript - 以编程方式缩小网页

> ID：10063228
> 
> 赞同：0
> 
> 时间：2012-04-08T13:40:47.767
> 
> 标签：javascript, zooming

我们构建了一个在 19 英寸屏幕上完美运行的 Web 应用程序（在 Firefox 上作为 KIOSK 运行）。它包括许多图像和放置在这些图像周围的内容文本。在我们将设备更改为 18.5 英寸屏幕之前它运行良好。现在，它周围有滚动条。内容和图片不合适。我们需要缩小 Firefox 以使其完全适合屏幕，但这不是我们想要的。

有没有办法将页面中的所有内容缩放到正常大小的 90%。所以我们不必手动缩小Firefox？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:43:45.383

您也许可以`transform: scale(.9)`在`body`元素上使用。尽管将来我会建议使用媒体查询来构建响应式设计。

那将是`-moz-transform: scale(.9)`专门针对 Firefox 的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:43:32.153

显示器的物理尺寸并不重要。重要的是该屏幕上显示的分辨率。找出旧屏幕的分辨率设置为什么，并查看新屏幕是否支持相同的分辨率。如果是这样，太好了，设置它。如果没有，您最好重新设计布局以处理不止一种特定的分辨率......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T11:14:09.860

解决方案有 2 个步骤：

1.  使除字体之外的所有内容都变得灵活。例如：表格、div、菜单。
2.  编辑字体大小。

编辑字体大小也会使网站看起来越来越小。

# php - 使用php将数据输出到excel电子表格的最佳方法是什么

> ID：10063237
> 
> 赞同：2
> 
> 时间：2012-04-08T13:41:28.500
> 
> 标签：php, excel

我希望能够将数据输出到电子表格，并一直在查看各种包，例如 PHPExcel 和此处列出的其他一些包 PHP_excel 的 [替代方案](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)

简单地说，如果可能的话，我想将特定文本写入指定的单元格和颜色代码某些单元格。这样做最简单的形式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:55:33.630

如果您想要诸如颜色之类的单元格格式，那么我当然会推荐[PHPExcel](http://www.phpexcel.net) ...尽管我确实有一定的开发人员偏见。

尽管提供了广泛的附加功能，但它易于使用。您无需指定要编写的 Excel 文件格式，Excel BIFF 文件或 Office Open XML：PHPExcel 两者都提供。它仍然受支持（与许多替代方案不同）；并且有很多示例展示了如何在库包本身中使用它，还有一个有用的留言板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:46:32.197

除了“着色”部分，我绝对建议您使用**CSV 文件**（所有电子表格程序都完全支持）：

> **逗号分隔值 (CSV)**文件以纯文本形式存储表格数据（数字和文本）。纯文本意味着文件是一个字符序列，没有数据需要被解释为二进制数。CSV 文件由任意数量的记录组成，由某种换行符分隔；每条记录由字段组成，由其他字符或字符串分隔，最常见的是文字 TAB 或逗号。通常，所有记录都有相同的字段序列。

**例子 ：**

```
Year,Make,Model,Length
1997,Ford,E350,2.34
2000,Mercury,Cougar,2.38 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T13:50:25.123

如果您对使用 PHP Excel 不感兴趣，可以考虑使用[CSV 格式](http://en.wikipedia.org/wiki/Comma-separated_values)。

此链接应该对您有所帮助。 [http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php) [http://www.imf.org/external/help/csv.htm](http://www.imf.org/external/help/csv.htm)

但请记住，在 csv 单元格或行中不能有任何属性，如您的案例颜色代码。excel文件可以简单地保存为excel本身的csv文件

如果您不喜欢 csv，请考虑使用[Open Document](http://en.wikipedia.org/wiki/OpenDocument)格式，它比 excel 的专有 xml 更易于编辑。但是excel可能需要一个插件（OpenXML/ODF Translator Add-in for Office）来阅读它

看看[http://sourceforge.net/projects/ods-php/](http://sourceforge.net/projects/ods-php/)

您也可以阅读此[http://www.oasus.ca/ODS_V2.pdf](http://www.oasus.ca/ODS_V2.pdf)

# sql - 如何获得每个外键的最小值

> ID：10063240
> 
> 赞同：4
> 
> 时间：2012-04-08T13:41:57.207
> 
> 标签：sql, database, postgresql

给定下表：

```
student   discipline   mark
-------   ----------   ----
   1         math       5 
   1      phylosophy    4
   1      literature    3
   2         math       2
   2      phylosophy    5
   2      literature    5 
```

为每个学生获得最低分数的最佳方法是什么？（结果应该是 [3,2]）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T13:43:00.760

使用该`MIN`功能。

```
SELECT student, MIN(mark)
FROM result_table
GROUP BY student 
```

如果您需要他们获得最低分数的纪律，您可以执行以下操作：

```
SELECT result_table.*
FROM result_table 
JOIN (SELECT student, MIN(mark) as min_mark
  FROM result_table
  GROUP BY student) lowest_result ON result_table.student = lowest_result.student 
AND result_table.mark = lowest_result.min_mark 
```

这将显示学生得分最低的结果。请注意，如果学生在多个科目中具有相同的最低分数，这将为学生返回两行。为避免这种情况，您可以`MIN`在学科、`GROUP BY`学生和标记周围添加另一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T13:56:22.443

如果您需要将纪律作为输出的一部分，则以下内容可能比使用子选择稍快（因为只需要对表进行一次扫描），但它可能仅适用于较大的表。

```
select student,
       discipline, 
       mark as lowest_mark
from (
   select student,
          discipline,
          mark,
          row_number() over (partition by student order by mark) as rn
   from the_table
) t
where rn = 1 
```

它总是会为每个学生返回一行。如果有两个学科具有相同的分数，则没有定义将采取哪一个学科。

如果您确实希望在最低标记多次出现时返回多行，则可以使用以下命令：

```
select student,
       discipline, 
       mark as lowest_mark
from (
   select student,
          discipline,
          mark,
          min(mark) over (partition by student) as min_mark
   from the_table
) t
where mark = min_mark 
```

如果你不需要纪律，而只需要最低分，那么 GavinCattell 的第一句话就是要走的路。

# c# - 如何删除在c#中创建的动态文本框

> ID：10063251
> 
> 赞同：-2
> 
> 时间：2012-04-08T13:43:30.360
> 
> 标签：c#, winforms, dynamic, textbox

```
TextBox[] txt = new TextBox[4];
for (int i = 0; i < 5; i++)
{
    txt[i] = new TextBox();
    txt[i].Text = "button" + i;
} 
```

这些是创建动态文本框的代码。我不知道如何删除这些按钮。后来我发现了如何使用这个文本框，这可能会对你的项目有所帮助，这是完全删除文本框的功能。

```
private void CleanForm(Control ctrl)
    {
        foreach (Control c in ctrl.Controls)
        {
            if (c is TextBox)
            {
                ((TextBox)c).Dispose();
                CleanForm(this);
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:01:26.993

由于您在创建文本框时保留了对它们的引用，因此`txt`您可以简单地枚举它以将其删除。

```
foreach(TextBox t in txt){
    this.Controls.Remove(t);
    t.Dispose();
}

txt = new Textbox[] {}; // this removes all references to those textboxes. null would work too. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:05:34.617

此外，代码*似乎*并不完整，我想说的是，它可能是一个问题：

`TextBox`控件为了出现在`Form/Control`必须成为`Controls`收藏它的成员。换句话说，要“删除”（我想你说的是从界面中删除），你可以简单地做这样的事情：

```
ctrl.Controls.Remove(textBoxControl);
textBoxControl.Dispose(); 
```

希望这可以帮助。

# haml - 搜索按钮在使用轮胎的弹性搜索中不起作用

> ID：10063255
> 
> 赞同：0
> 
> 时间：2012-04-08T13:43:44.307
> 
> 标签：haml

每当我尝试写一个词来搜索它时，我什么也得不到，就好像 Seach 的按钮被禁用了一样。我已经索引了我的博文。

```
this is for search
%h1 My Blog

= form_tag blog_posts_path, method: :get do 
  %p    
= text_field_tag :query, params[:query]
= submit_tag "Search", name: nil
- @blog_posts.each do |blog_post|
  %p
    %b= link_to blog_post.title, blog_post

  %p= blog_post.content

  %p{style: "float: right;"}
    = link_to "Delete", blog_post, method: :delete, confirm: "Are you sure you want to delete this post?"
    %hr{style: "clear: both;"}

%br

= link_to 'New Post', new_blog_post_path 
```

这个索引 marina@ubuntu:~/project$ rake db:setup 为 BlogPost 生成的索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T00:33:25.587

尝试将`text_field_tag`和嵌套在`submit_tag`下`form_tag`，在您的代码中，这些是兄弟节点。

```
%p
  = form_tag blog_posts_path, method: :get do   
    = text_field_tag :query, params[:query]
    = submit_tag "Search", name: nil 
```

# c++ - 我可以安全地将指向 const 成员的指针转换为相同类型但非 const 吗？

> ID：10063259
> 
> 赞同：1
> 
> 时间：2012-04-08T13:44:01.513
> 
> 标签：c++, c++11, member-function-pointers, member-pointers

...即使[指向成员函数的指针是奇怪的动物](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx "VC++ 指向成员函数的指针")？

我正在编写一个库来将 C++ 类绑定到 Lua。我必须处理将某些类型对象推入 Lua 堆栈（并将它们强制转换为 void*）而导致的类型擦除。出于这个原因，也是为了避免针对不同类型的数据（非 const 和 const 对象、非 const 和 const 成员，以及将来将 volatile 和 non volatile 的所有内容加倍......）的不同模板过度增殖，我管理通过简单地设置某个标志，在运行时绑定到 Lua 的对象的常量。

现在，我正在处理指向成员函数的指针。到目前为止，按照我的设计，如果我可以安全地将指向 const 成员函数的指针转换为非常量，然后为非常量重用相同的模板，并在运行时使用上述标志处理常量，我会很高兴。

但还有另一个提示让我怀疑这是否真的可能。考虑下面的代码：

```
#include <iostream>
#include <typeinfo>
using namespace std;

struct A{
    const int a;
    int b;
};

template<typename T> struct tmpl;

template<typename Class, typename FT> struct tmpl<FT(Class::*)>{
    static void f(){
        cout<<"non const"<<endl;
    }
};

//Try commenting this out, code compiles, both A::a and A::b instantiate the first template
template<typename Class, typename FT> struct tmpl<const FT(Class::*)>{
    static void f(){
        cout<<"const"<<endl;
    }
};

int main(){
    cout<<typeid(&A::a).name()<<endl;   //prints "M1AKi"
    tmpl<decltype(&A::a)>::f();         //prints "const"
    cout<<typeid(&A::b).name()<<endl;   //prints "M1Ai"
    tmpl<decltype(&A::b)>::f();         //prints "non const"
    //Let's do what it seems that can be done implicitly (providing only one template specialization) in an explicit way
    int(A::*memb)=(int(A::*))&A::a;
    cout<<typeid(memb).name()<<endl;    //prints "M1Ai"
    tmpl<decltype(memb)>::f();          //prints "non const"
} 
```

似乎无论[这些动物甚至可以改变自己的大小](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/09/70002.aspx "VC++ 指向成员函数的指针")，在某些情况下，您都可以安全地（或至少`const_cast`）将它们转换为其他类型（如果它们有意义的话）。

那么，我的推理在其中一个步骤中是否存在严重错误，或者我可以这样做，而不管编译器如何？我可以用指向 const 成员函数的指针以同样的方式玩吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:57:00.067

在“非常量”特化中，FT 被简单地推导出为包含 const 限定符。它没有消失，它只是传递进来。

试试这个：

```
template<typename Class, typename FT> struct tmpl<FT(Class::*)>{
    static void f(){
        if ( std::is_const< FT >::value ) {
            cout<<"const as non const"<<endl;
        } else {
            cout<<"non const"<<endl;
        }
    }
}; 
```

[http://ideone.com/g2Eie](http://ideone.com/g2Eie)

如果你想杀死一个`const`, then`const_cast`是唯一可行的工作工具。

# matlab - 使用带有概率的随机生成器使用matlab

> ID：10063261
> 
> 赞同：3
> 
> 时间：2012-04-08T13:44:07.660
> 
> 标签：matlab, probability

以下代码生成具有给定成功概率的随机数：

```
 n=[randi([0 1],1,8) ones(1,8)];
         n= n(randperm(10)); 
```

如果上述行重复，将生成随机（不可预测的）值：

这是第一次运行的 n：

```
 n =     1     0     1     0     0     1     1     1     1     1 
```

这是第二次运行的 n：

```
 n =     1     1     1     0     1     1     1     1     1     1 
```

如何使生成器以更高的概率选择已选为失败（0）的数量？

也就是第二轮的人2、3、4输的概率更大。这并不意味着他们必须失败。

条目 1 到 10 是 10 个不同的用户输出。

好的，让我们说始终最多 30% 的条目将为 0。在每次执行上述操作时。然而，这是随机完成的。因此，10 个中的任何 3 个的最大值都可以为零。

我不想改变成功的概率。只是控制哪一个为零。

为了进一步澄清我想要什么：如果将“随机”选择 3 为零，那么让先前选择的三个有更高的概率被选中而不被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:57:06.547

这是具有以下逻辑的解决方案：

1.  最多生成 3 个故障，随机分配它们
2.  确定步骤 2 中有多少失败
3.  让之前的失败有更高的机会再次失败

请注意，我假设它同样可能有 0、1、2 或 3 次失败。

```
nRuns = 5;
allRuns = zeros(nRuns,10); %# stores success and failure for all runs

%# (1) generate from 0 to 3 failures (each outcome is equally likely)
nFailures = randi([0 3],1);
tmp = randperm(10);

firstRun = tmp > nFailures
allRuns(1,:) = firstRun;

%# (2) decide how many failures occur in the 2nd run (each outcome is equally likely)
for iRun = 2:nRuns
%# as the loop has been added later
%# I use "2" to indicate any next run
nFailures2 = randi([0 3],1);

%# (3) give previous failures a higher chance to fail again
failIdx = find(~allRuns(iRun-1,:));
successIdx = find(allRuns(iRun-1,:));
%# 5x higher chance of failing for previous failures
failCandidates = [repmat(failIdx,1,5),successIdx];

failCandidatesRand = failCandidates(randperm(length(failCandidates)));

%# if you have R2012a or later
failCandidatesRand = unique(failCandidatesRand ,'stable');
toFail = failCandidatesRand (1:nFailures2);

%# alternatively, if you have R2011b or earlier
toFail = zeros(nFailures2,1);
toFail(1) = failCandidatesRand(1);
ii = 2;
kk = 2;
while ii < (nFailures2+1)
if ~any(toFail==failCandidatesRand(kk));
toFail(ii) = failCandidatesRand(kk);
ii = ii + 1;
end
kk = kk + 1;
end

%# write failures
nextRun= true(1,10);
nextRun(toFail) = false

allRuns(iRun,:) = nextRun;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:27:14.953

也许你想要这样的东西：

```
n1 = rand(1, 8) > 0.5;
n2 = rand(1, 8) > (n1 * 0.5 + ~n1 * 0.6); 
```

这将以相等的概率生成第一组 0 和 1。对于n2，如果n1中对应的值为1，那么有50%的概率是0或者1。如果n1中的对应值=0，那么有60%的概率是0。

感谢您澄清问题。让我们再试一次！我认为您可以为此使用[randsample](http://www.mathworks.co.uk/help/toolbox/stats/randsample.html)。这有点混乱，因为似乎没有不替换的加权采样选项。

```
N = ones(1, 10);
for round=1:10
  failures = randi([1, 3]);
  indices = [];
  while (numel(unique(indices)) < failures)
    indices = randsample(10, failures, true, [N + ~N*1.1]);
  end
  N = ones(1, 10);
  N(indices) = 0;
  disp(N);
end 
```

# php - 如何从字符串中删除最后一个字符

> ID：10063262
> 
> 赞同：4
> 
> 时间：2012-04-08T13:44:16.897
> 
> 标签：php, string

这可能是一项简单的任务。但我是 PHP 新手。

我正在为特定目的创建从数据库获取的一串值。

如何从字符串中删除最后一个字符。

```
$str='';
foreach($dataarray as $value)
{
   $str.=$value."##";
 } 
```

它给了我类似的字符串`ABC##DEF##GHI##`

我必须删除最后 2 个字符`##`

**编辑：**

已在此处显示示例代码。实际 y 数组是二维的。所以不能用`implode()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T13:46:48.097

如果该`implode`方法不合适，则在`foreach`循环之后，您可以尝试以下功能之一：

[http://www.php.net/manual/en/function.rtrim.php](http://www.php.net/manual/en/function.rtrim.php)

```
$str = rtrim($str,'#'); 
```

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

```
$str = substr($str,-2); 
```

如果你有一个二维数组，你仍然可以`implode`像这样使用函数：

```
$a = array();
foreach( $foo as $bar )
  foreach( $bar as $part )
    $a[] = $part;
$str = implode('##',$a); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T13:46:40.647

你可能会更好地使用内[爆](http://php.net/manual/en/function.implode.php)而不是这个循环？

```
implode ( "##" , $dataarray  ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T13:46:55.003

你可以使用 PHP 的函数[implode](http://php.net/implode)

`$str = implode("##", $dataarray);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-17T04:23:50.193

```
<?php
$str = "1,2,3,4,5,";
echo chop($str,",");
?> 
```

它将从字符串 $str 中删除最后一个逗号 (,)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-30T09:58:08.657

使用 substr：

```
$str = substr($str,0, -2); 
```

[http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T13:46:54.400

您可以`Implode()`用于制作这样的字符串，而不是手动制作

```
implode("##",$dataarray); 
```

顺便说一句，您可以像下面这样删除最后一个字符：

```
substr($str,0,(strlen($str)-2)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T13:49:06.430

有几种方法可以解决，但是：

```
$str = rtrim($str, "#"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-08T13:52:21.780

[http://php.net/manual/en/function.substr-replace.php](http://php.net/manual/en/function.substr-replace.php)

```
$newstr = substr_replace($longstr ,"",-2); 
```

这将通过获取 $longstr 并删除最后两个字符来创建 $newstr。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-08T14:04:26.717

也许

```
$str='';
$first = true;
foreach($dataarray as $value) {
     if(!$first) {
          $str .= "##";
     }
     else {
          $first = false;
     }
     $str .= $value;
 } 
```

# android - Appcelerator Titanium Mobile showTimePickerDialog 未显示

> ID：10063263
> 
> 赞同：1
> 
> 时间：2012-04-08T13:44:52.117
> 
> 标签：android, appcelerator

我在 Appcelerator Q&A 上发布了这个，但我感觉这个地方有点死了。所以...

我已经看到关于 showDate/TimePickerDialog 的 1.8的[错误报告，并已升级到 2.0.1。](https://jira.appcelerator.org/browse/TIMOB-7880)日期选择器工作正常，但时间选择器既不显示也不出错。

这有效：

```
datepicker.showDatePickerDialog({
    value: My.date,
    callback : function(e) {
        if(!e.cancel) {

        }
    }
}); 
```

这什么都不做：

```
timepicker.showTimePickerDialog({
    value: My.date,
    callback : function(e) {
        if(!e.cancel) {

        }
    }
}); 
```

和：

```
var datepicker = Ti.UI.createPicker({
    type : Ti.UI.PICKER_TYPE_DATE,
    minDate : new Date(),
    value : My.date,
    selectionIndicator : false,
    useSpinner : true,
    height : height,
    zIndex : 5
});

var timepicker = Ti.UI.createPicker({
    useSpinner : true,
    selectionIndicator : true,
    type : Ti.UI.PICKER_TYPE_TIME,
    height : height,
    value : My.date,
    zIndex : 5
}); 
```

任何想法为什么日期有效但时间无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:55:00.337

我的回复晚了一年，但我也遇到了这个问题。对我有用的是将时间选择器添加到视图中。在调用选择器对话框之前。

```
var timePickerView = Ti.UI.createView({...});
var pickerTime = Titanium.UI.createPicker({...});
timePickerView.add(pickerTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T19:52:44.257

尝试使用本地 var timepicker。我有同样的问题，这个技巧帮助了我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T18:13:40.583

我刚刚遇到了这个问题，我通过从`showTimePickerDialog`方法中删除 value 属性来解决它，这样时间选择器就会显示在顶部。

这是文档的另一个示例，说明方法支持属性但实际上不支持，或者在这种情况下会导致组件中的错误。

# java - 在 Android 中使用 KSOAP2 发送 SOAP 消息

> ID：10063264
> 
> 赞同：1
> 
> 时间：2012-04-08T13:45:06.333
> 
> 标签：java, android, web-services, ksoap2, android-ksoap2

您好我正在尝试使用 KSOAP2 2.6.2 android 程序集连接到部署在 glassfish 3.1.1 上的 java WebService。从我的安卓程序。这是我的命名空间

```
public static final String SERVICE_NAMESPACE = "za.co.n7.mobilebackup";
public static final String SERVICE_URL = "http://ipaddress:8080/MobileBackupServiceImplService/MobileBackupServiceImpl/"; 
```

这是我的发送方法

```
 final String METHOD_NAME = "Login";
    SoapObject results = null;
    SoapObject request = null;
    HttpTransportSE loginHttpTransport = null;
    try {
        request = new SoapObject(MBUtil.SERVICE_NAMESPACE, METHOD_NAME);
        request.addProperty("username", username);
        request.addProperty("password", MBUtil.hashPassword(password));

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.bodyOut=request;
        envelope.enc = SoapSerializationEnvelope.ENC;
        envelope.env="http://schemas.xmlsoap.org/soap/envelope/";

        // Web method call
        loginHttpTransport = new HttpTransportSE(MBUtil.SERVICE_URL);
        loginHttpTransport.debug = true;
        loginHttpTransport.call(MBUtil.SERVICE_URL + METHOD_NAME, envelope);

        results = (SoapObject) envelope.getResponse();

        System.out.println("Received Result without issue");

    } catch (Exception e) {
        e.printStackTrace();
        System.out.println(loginHttpTransport.requestDump);
        System.out.println(loginHttpTransport.responseDump);
    } finally {
        finish();
    } 
```

我在 DDMS LogCat 中收到以下错误。

```
04-08 15:30:42.508: W/System.err(1454): org.xmlpull.v1.XmlPullParserException: unexpected type (position:END_DOCUMENT null@1:0 in   java.io.InputStreamReader@4056c7a8) 
04-08 15:30:42.508: W/System.err(1454):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
04-08 15:30:42.508: W/System.err(1454):     at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1413)
04-08 15:30:42.508: W/System.err(1454):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
04-08 15:30:42.508: W/System.err(1454):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
04-08 15:30:42.519: W/System.err(1454):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)
04-08 15:30:42.519: W/System.err(1454):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
04-08 15:30:42.519: W/System.err(1454):     at za.co.n7.mobilebackup.LoginActivity.connect(LoginActivity.java:149)
04-08 15:30:42.519: W/System.err(1454):     at za.co.n7.mobilebackup.LoginActivity$DoLoginRequest.run(LoginActivity.java:116)
04-08 15:30:42.519: W/System.err(1454):     at android.os.Handler.handleCallback(Handler.java:587)
04-08 15:30:42.519: W/System.err(1454):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 15:30:42.519: W/System.err(1454):     at android.os.Looper.loop(Looper.java:123)
04-08 15:30:42.519: W/System.err(1454):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-08 15:30:42.519: W/System.err(1454):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 15:30:42.519: W/System.err(1454):     at java.lang.reflect.Method.invoke(Method.java:507)
04-08 15:30:42.519: W/System.err(1454):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 15:30:42.528: W/System.err(1454):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 15:30:42.528: W/System.err(1454):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经复制了我的 SOAP 消息并将其粘贴到soapUI 中，它得到了结果。谁能帮助我，我已经为此苦苦挣扎了几个小时。这是我的 SOAP 消息的示例

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
  <v:Header/>
  <v:Body>
      <n0:Login id="o0" c:root="1" xmlns:n0="za.co.n7.mobilebackup">
         <username i:type="d:string">umohduke</username>
         <password i:type="d:string">c4066ed69b81d6b2b25f76405195c83ddaeecd8dbd3866f17912b895a72bc059</password>
      </n0:Login>
   </v:Body>
</v:Envelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:34:16.623

试试这个方法：

**使用 Android 将文件发送到 Web 服务器。**

```
FileInputStream fileInputStream = null;
try {
    fileInputStream = new FileInputStream(image);
} catch (FileNotFoundException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
}

bitmap=BitmapFactory.decodeStream(fileInputStream);
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
byte[] data = baos.toByteArray();
IMAGE= Base64.encodeBytes(data);
Log.e("THE IMAGE BYTES",""+IMAGE); 
```

图像是要发送到 Web 服务器的字符串。

来源：[aruljack 的博客（我的）](http://aruljack.blogspot.in/2012/08/its-ksoap-codes-to-send-image-and-file.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:44:57.350

我不确定，但试试这个：

```
public static final String SERVICE_NAMESPACE = "http://za.co.n7.mobilebackup"; 
```

代替

```
public static final String SERVICE_NAMESPACE = "za.co.n7.mobilebackup"; 
```

# email - 通过 AppleScript 发送带有附件的电子邮件

> ID：10063266
> 
> 赞同：5
> 
> 时间：2012-04-08T13:45:13.087
> 
> 标签：email, applescript, attachment, automator

所以我希望能够使用 applescript 发送带有附件的电子邮件。我有一位老师经常让我们做实验并要求我们通过电子邮件发送它们，所以我决定将 hazel 和 applescript 结合起来让这更容易。

基本上，当我将文档导出到文件夹中的 pdf 时，hazel 会检测到它并将其发送到另一个文件夹，然后该文件夹调用发送带有附件的电子邮件所需的脚本。完成后，hazel 将文件放回原始文件夹中，并在名称后附加一个 _sent，这样它就不会再次发送它。（除非文件刚刚导出为 pdf，否则该文件夹始终为空）

我的问题是文件没有附加到电子邮件中。（而且大多数时候我的脚本出错，说它没有成功运行，但这不是重点）。

我使用automator遇到了同样的问题，文件没有附加。我尝试了几个代码，但总是遇到同样的问题。发送电子邮件时未附加任何文件。这是代码：

```
tell application "Finder"
set folderPath to folder "Macintosh HD:Users:user_directory:Desktop:Send_Mail"
set fileList to name of file 1 in folderPath
end tell

set theSubject to fileList
set theBody to "Hello sir. Here is my " & fileList
set theAddress to "Some Email"
set theAttachment to fileList
set theSender to "Some Sender"

tell application "Mail"
set theNewMessage to make new outgoing message with properties {subject:theSubject,         content:theBody & return & return, visible:true}
    tell theNewMessage
    set visibile to true
    set sender to theSender
    make new to recipient at end of to recipients with properties {address:theAddress}
    try
        make new attachment with properties {file name:fileList} at after the last word of the last paragraph
        set message_attachment to 0
        log "message_attachment = " & message_attachment
    on error
        set message_attachment to 1
    end try
    #tell content
    #   make new attachment with properties {file name:theAttachment, path:fileList}

    #end tell
    #send
    end tell
end tell 
```

我在事件日志中得到的唯一消息是“缺失值”。我不明白什么可能会丢失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:39:37.130

You are mixing up the file name and the file path - the **file name** property of the attachment is the file to attach. You should also log any errors in your try statement, so that you can see what it is - for example, you will get an error trying to use a Finder reference for the attachment instead of an alias.

```
tell application "Finder"
    set folderPath to folder "Macintosh HD:Users:user_directory:Desktop:Send_Mail:"
    set theFile to first file in folderPath as alias
    set fileName to name of theFile
end tell

set theSubject to fileName
set theBody to "Hello sir. Here is my " & fileName
set theAddress to "Some Email"
set theAttachment to theFile
set theSender to "Some Sender"

tell application "Mail"
    set theNewMessage to make new outgoing message with properties {subject:theSubject, content:theBody & return & return, visible:true}
    tell theNewMessage
        set visibile to true
        set sender to theSender
        make new to recipient at end of to recipients with properties {address:theAddress}
        try
            make new attachment with properties {file name:theAttachment} at after the last word of the last paragraph
            set message_attachment to 0
        on error errmess -- oops
            log errmess -- log the error
            set message_attachment to 1
        end try
        log "message_attachment = " & message_attachment
        #send
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-06T16:14:35.540

我尝试了来自 user866649 的脚本，但它对我不起作用。经过一番谷歌搜索后，我发现了一个小技巧：你告诉消息的内容添加附件。我的代码现在是：

```
tell application "Finder"
    set folderPath to folder "Macintosh HD:Users:username:folder:"
    set theFile to first file in folderPath as alias
    set fileName to name of theFile
end tell
set theSubject to "Filename: " & fileName
set theBody to "Filename in attachment: " & fileName
set theAddress to "mail@example.com"
set theAttachment to theFile
set theSender to "Name of Sender"
tell application "Mail"
    set theNewMessage to make new outgoing message with properties {subject:theSubject, content:theBody & return & return, visible:true}
    tell theNewMessage
        set visibile to true
        set sender to theSender
        make new to recipient at end of to recipients with properties {address:theAddress}
    end tell
    tell content of theNewMessage
        try
            make new attachment with properties {file name:theAttachment} at after the last word of the last paragraph
            set message_attachment to 0
        on error errmess -- oops
            log errmess -- log the error
            set message_attachment to 1
        end try
        log "message_attachment = " & message_attachment
    end tell
    delay 10
    tell theNewMessage
        send
    end tell
end tell 
```

当然，根据需要替换用户名/文件夹/邮件地址/发件人姓名。

从命令行运行脚本：

```
osascript path/to/script 
```

在 Mac OS Catalina 上测试。编辑：看起来邮件需要一段时间来附加文件，具体取决于大小。添加延迟似乎有助于解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-12T06:33:44.860

如果附件仍未发送，请激活邮件。

# delphi - TRegistry 可以写 REG_NONE 值吗？

> ID：10063271
> 
> 赞同：5
> 
> 时间：2012-04-08T13:46:00.820
> 
> 标签：delphi, delphi-xe2

我正在尝试使用 TRegistry 处理扩展的 OpenWithProgids 键。我没有看到 TRegistry 可以写入这些值（这需要一种 REG_NONE。）我知道我可以使用 API RegSetValueEx 函数来设置这些值，但我想知道我是否在 TRegistry 中遗漏了一些可以做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:51:47.533

确实`TRegistry`没有对`REG_NONE`价值观的直接支持。但是，使用受保护的 hack，您可以欺骗它创建零长度的二进制`REG_NONE`值：

```
type
  TRegistryHack = class(TRegistry);
....
TRegistryHack(Registry).PutData(ValueName, nil, 0, rdUnknown); 
```

您需要使用受保护的黑客来访问`PutData`受保护的成员。一种更简洁的方法是使用类助手或派生自的真正类`TRegistry`，但您明白了。

# asp.net - 如何让 swf 文件自动播放？

> ID：10063273
> 
> 赞同：0
> 
> 时间：2012-04-08T13:46:13.533
> 
> 标签：asp.net, flash, actionscript, macromedia

我的任务是将宏媒体应用程序转换为 Web 应用程序。一旦 exe 启动，应用程序似乎以 shell.swf 开头。我已经尝试嵌入项目的不同 swf 文件，我发现的一件事是，如果 shell.swf 以某种方式启动，则整个项目在没有 exe 的情况下工作。我一直在用 CS5.5 flash Professional 打开和运行 shell.swf。*我没有源项目。

这引出了我的问题。此应用程序的所有 swf 文件在嵌入到 aspx 时都会自动运行，但 shell.swf 除外，它似乎是应用程序的指导文件。**如何让这个 shell.swf 从 aspx 加载事件中自动运行？**我非常需要模仿 Flash Professional 的播放按钮。这是一个交互式应用程序，用于教育年轻人了解布法罗河，它有些强大。我几乎可以肯定，一旦我可以让 shell.swf 在网页上运行，整个应用程序就会正常运行。

我一直在使用 AspNetFlash，但一直无法达到预期的效果。我需要让它运行，以便客户端可以在接下来的几个月内使用该程序，同时我正在重写应用程序来存储用户交互数据。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:38:57.430

SWF 文件自动播放，它只取决于内容。根据我对“exe”文件的理解，我自己用 C# 完成了这个。因此，我假设如果您将 shell SWF 嵌入到 html 页面上，它将播放其他内容，只需确保所有内容与原始内容的顺序相同，例如，其他 SWF 在其文件夹目录中的位置。

# android - 图像显示为黑色背景 OPENGL ES Android

> ID：10063279
> 
> 赞同：0
> 
> 时间：2012-04-08T13:46:32.233
> 
> 标签：android, opengl-es

嗨，我正在 Android 上使用 OPENGL Es，我正在尝试在我的应用程序上显示图像。当我显示图像（图像规格为 64x64 像素）时，图像上出现黑色背景，但是当我输入以下代码时：

```
 public void draw(GL10 gl) {
... 
.. 
 gl.glAlphaFunc( GL10.GL_GREATER, 0 ); 
```

黑色背景消失了，但我的图像中出现了奇怪的颜色。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:09:13.767

您需要使用混合。像这样的东西应该工作：

```
gl.glEnable(gl.GL_BLEND);
gl.glBlendFunc(gl.GL_SRC_ALPHA,gl.GL_ONE_MINE_SRC_ALPHA); 
```

您可以使用`glAlphaFunc`并*接近*您的结果这一事实表明，图像本身至少是可以的。

# windows-7 - 无法使用 WAMP 在 Windows 7 上安装 PEAR

> ID：10063288
> 
> 赞同：0
> 
> 时间：2012-04-08T13:47:45.117
> 
> 标签：windows-7, installation, wamp, pear

在我更改 pear.ini 的默认位置并将我的更改`php.ini`为 后`phar.require_hash -> off`，我仍然收到以下错误

11.配置文件名称：`e:\`

12.CLI路径`php.exe`：`E:\software\wamp\bin\php\php5.3.10`

1-12, 'all' 或 Enter 继续：开始安装...

PHP致命错误： `Call to undefined method PEAR_Error::set()`在`phar://E:/software/wamp/bin/php/php5.3.10/pear/go-pear.phar/PEAR/Start.php on line 301`

PHP堆栈跟踪：

PHP 1。`{main}() E:\software\wamp\bin\php\php5.3.10\pear\go-pear.phar:0`

PHP 2。`require_once() E:\software\wamp\bin\php\php5.3.10\pear\go-pear.phar:1236`

PHP 3。`PEAR_Start_CLI->run() phar://E:/software/wamp/bin/php/php5.3.10/pear/go-pear.phar/index.php:7`

PHP 4。`PEAR_Start->doInstall() phar://E:/software/wamp/bin/php/php5.3.10/pear/ go-pear.phar/PEAR/Start/CLI.php:57`

```
Fatal error: 
Call to undefined method PEAR_Error::set() in phar://E:/software/wa
mp/bin/php/php5.3.10/pear/go-pear.phar/PEAR/Start.php on line 301

Call Stack:
0.0273    1174752   1\. {main}() E:\software\wamp\bin\php\php5.3.10\pear\go-p
ear.phar:0

0.0276    1171720   2\. require_once('phar://E:/software/wamp/bin/php/php5.3.
10/pear/go-pear.phar/index.php') E:\software\wamp\bin\php\php5.3.10\pear\go-pear
.phar:1236

0.0622    5496272   3\. PEAR_Start_CLI->run() phar://E:/software/wamp/bin/php
/php5.3.10/pear/go-pear.phar/index.php:7

102.2854    5508080   4\. PEAR_Start->doInstall() phar://E:/software/wamp/bin/p
hp/php5.3.10/pear/go-pear.phar/PEAR/Start/CLI.php:57 
```

顺便说一句，我在我的 Windows 7 上使用了 wamp 安装程序，所以我没有 go-pear.bar，相反，我下载了 go-pear.phar，并像：php 一样运行它`pear/go-pear.phar`，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:32:11.767

这是我解决问题的方法。可能对某些人有帮助。

`local`我为范围安装了梨。我没有尝试使用系统范围，因为我遇到了一些权限问题来编辑`pear.ini`.

我按照下面的文章完成了它。

[梨，PHPUnit](http://amiworks.co.in/talk/installing-pear-and-phpunit-on-wamp-and-windows-7/)

`go-pear`我从以下网址下载了文件，

[go-pear.phar](http://blog.stuartherbert.com/php/2012/05/10/getting-pear-working-on-windows-7/)

在继续安装之前，我重新启动了系统以正确应用注册表设置`PHPUnit`。

**注意：** `Pear channel` for`symfony`已从`pear channel-discover pear.symfony-project.com`移至`pear channel-discover pear.symfony.com`。

# algorithm - 在二维数组中找到局部最小值

> ID：10063289
> 
> 赞同：8
> 
> 时间：2012-04-08T13:48:10.447
> 
> 标签：algorithm

给定一个由 N ^(2 个)不同整数组成的 N×N 数组 a，设计一个 O(N) 算法来找到一个局部最小值：一对索引*i*和*j*使得：

*   `a[i][j] < a[i+1][j]`
*   `a[i][j] < a[i-1][j]`
*   `a[i][j] < a[i][j+1]`
*   `a[i][j] < a[i][j-1]`

我在一本在线算法书籍《[Java 编程简介》第 4.2 章：排序和搜索](http://introcs.cs.princeton.edu/java/42sort/)中找到了这个问题。

它类似于问题 35（同一页）：

*   给定一个由 N 个实数组成的数组，编写一个静态方法以在对数时间内找到局部最小值（索引*i*满足`a[i-1] < a[i] < a[i+1]`）。

它有某种基于二进制搜索的解决方案，我无法找到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:37:44.420

[Robert Sedgewick 和 Kevin Wayne](http://algs4.cs.princeton.edu/14analysis/)的网络版书籍 Algorithms 中也提到了同样的问题。[（参见“创造性问题”部分，问题 19）](http://algs4.cs.princeton.edu/14analysis/)。

作者在[该链接](http://algs4.cs.princeton.edu/14analysis/)中给出的问题提示是：

**在第 N/2 行中找到最小值，检查列中的邻居 p 和 q，如果 p 或 q 更小，则在该一半中重复出现。**

*更好的方法是：在第 N/2 行中找到最小值，检查其列中的所有条目，如果我们在列中获得较小的条目，则在较小的列条目所属的行中重复出现。*

例如。对于下面的数组，N=5：

```
1  12  3   1  -23  
7   9  8   5   6
4   5  6  -1  77
7   0  35 -2  -4
6  83  1   7  -6 
```

第 1 步：中间一行是 [ `4 5 6 -1 77`]。IE。行号 3。

第 2 步：当前行中的最小条目是`-1`。

第 3 步：最小条目（即`-1`）的列邻居是`5`和`-2`。`-2`是最小的邻居。它在第 4 行。

继续执行步骤 2-3，直到我们得到[本地 min](http://mathworld.wolfram.com/LocalMinimum.html)。

**编辑：**

例如@anuja 的评论中提到的 *（主要问题是 n×n 数组。这个输入是 3×4 数组，但我们可以使用它）*：

```
1 2 3  4 
5 1 6 -1
7 3 4 -2 
```

第 1 步：中间一行是`[5 1 6 -1]`。IE。行号 2。

![在此处输入图像描述](../Images/7b0bd342d97092f333d7f62286a76693.png)

第 2 步：当前行中的最小条目是`-1`。

![在此处输入图像描述](../Images/5bff2e35998c57e94eae68b68c6a18e3.png)

第 3 步：最小条目（即`-1`）的列邻居是`4`和`-2`。 `-2`是最小列邻居。它在第 3 行。

![在此处输入图像描述](../Images/8924c29de0eb5c3abc4550273a37dbb5.png)

迭代到第 2 步：-2 在其行中最小，在其相邻列中最小。所以我们以 -2 作为局部最小值的输出结束。

![在此处输入图像描述](../Images/b9d2215fceea0dfa80668a80109963aa.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T13:51:21.767

**更新**：这个答案是假设边不是局部最小值，因为它们不是由原始问题陈述中的四个比较定义的。在这种情况下，这个答案是正确的（不可能）。如果您重新定义问题以使边缘可以是局部最小值，则每个矩阵都至少包含一个局部最小值 - 因此您可以使用分而治之的方法。

**如果边缘单元不能是局部最小值：**

上述问题没有解决方案。一个 N×N 数组需要 O(N^2) 时间来读取元素。由于矩阵中的任何地方都可能有一个局部最小值“隐藏”，因此可以证明这是必要的。

如果您打算要求 O(N^2) 算法，那么简单地遍历每个元素并将其与其 4 个邻居进行比较需要 O(N^2) 时间。

要么你记错了面试问题（还有更多问题），要么这只是一个微不足道的编码练习。

**证明**：

```
1\. Construct a NxN matrix such that each cell has the value M[i,j] = N*i + j.
2\. Select a random x,y (1 < x < N and 1 < y < N) and assign M[x,y] = -1 
```

该矩阵只有一个局部最小值 (M[x,y])，其位置与其他单元格中的值**无关**。因此，其他单元格**不提供**有关其位置的信息，因此不可能有任何系统来搜索它，它的搜索结果优于预期的 (N^2/2) 个单元格 = O(N^2)。

（换句话说，你也可以搜索一个几乎全为零的矩阵 M[i,j] = 0 除了 M[x,y] = -1 的最小值。）

这个证明取决于能否在步骤 1 中构造一个没有局部最小值的矩阵。 **如果边缘单元可能是局部最小值，那么每个矩阵都必须有一个，**并且这个证明不再成立。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T14:07:30.503

访问一个随机单元格。如果它的四个邻居中的任何一个具有较小的值：转到该单元格。如果没有一个邻居更小，则您处于局部最小值。如果可能具有相同值的单元格，则避免循环会有点困难。

更新：

我们可以选择最小的邻居，而不是访问一个邻居。

最困难的拓扑似乎是两个“同心”螺旋的情况，其中一个充当螺旋堤。在最坏的情况下，这仍然需要大约 N/2 步。（N=细胞数。）

# iphone - 在 X 方向旋转两个 UIImageView

> ID：10063290
> 
> 赞同：1
> 
> 时间：2012-04-08T13:48:28.173
> 
> 标签：iphone, ios, ios5, core-animation, catransform3d

我想旋转两个图像，我将一个图像放在另一个图像后面，但是当我使用以下代码旋转它们时，后面的图像将在前面的图像之上，我分配了它们的 ZPOstion，但它们没有变化

这个链接是我在旋转之前查看的链接[http://i39.tinypic.com/ivv2ah.png](http://i39.tinypic.com/ivv2ah.png)

并在旋转[http://i43.tinypic.com/ic05xj.png](http://i43.tinypic.com/ic05xj.png)

这是怎么发生的

```
 [UIView animateWithDuration:0.2 animations:
     ^{
         CALayer *myLayer=self.image2.layer;
         CABasicAnimation *animation = [CABasicAnimation  animationWithKeyPath:@"transform.rotation.x"];
         animation.fromValue = [NSNumber numberWithFloat:(1 * M_PI/Down)]; 
         animation.toValue = [NSNumber numberWithFloat:(1 * M_PI/UP)]; 
         animation.repeatCount =0; 
         animation.duration=0.2;
         [animation setRemovedOnCompletion:NO];
         animation.timingFunction = [CAMediaTimingFunction
                                     functionWithName:kCAMediaTimingFunctionLinear]; 
         [self.image2.layer addAnimation:animation forKey:@"transform.rotation.x"];
         CATransform3D transform = CATransform3DIdentity;
         transform.m34 = (1/500.0f);
         transform = CATransform3DRotate(transform, (1 * M_PI/UP), 1, 0,0);
         myLayer.transform=transform;
     }
   completion:^(BOOL finished) 
     {
         self.image2.postion=@"UP";
     }];

    [UIView animateWithDuration:0.2 animations:
     ^{
         CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.x"];
         animation.fromValue = [NSNumber numberWithFloat:(1 * M_PI/Down)]; 
         animation.toValue = [NSNumber numberWithFloat:(1 * M_PI/UP)]; 
         animation.repeatCount =0;
         animation.duration=0.2;
         [animation setRemovedOnCompletion:NO];
         animation.timingFunction = [CAMediaTimingFunction
                                     functionWithName:kCAMediaTimingFunctionLinear]; 
         [card.layer addAnimation:animation forKey:@"transform.rotation.x"];
         CATransform3D transform = CATransform3DIdentity;
         transform.m34 = (1/500.0f);
         transform = CATransform3DRotate(transform, (1 * M_PI/UP), 1, 0,0);
         card.layer.transform=transform;
     }
    completion:^(BOOL finished) 
     {
         card.postion=@"UP";
     }]; 
```

CArdImage 是自定义 UIImageView 这就是我改变的

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) 
{
    self.layer.anchorPoint=CGPointMake(0.5, 1.0);
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = (1/500.0f);
    transform = CATransform3DRotate(transform, (1 * M_PI/2.5), 0.5, 0,0);
    self.layer.transform=transform;
    self.postion=@"UP";
  }
  return self;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:26:22.197

一个可能的原因是动画彼此不同步。尝试将两个动画块放在一起：

```
[UIView animateWithDuration:0.2 animations:
 ^{
     CALayer *myLayer=self.image2.layer;
     CABasicAnimation *animation = [CABasicAnimation  animationWithKeyPath:@"transform.rotation.x"];
     animation.fromValue = [NSNumber numberWithFloat:(1 * M_PI/Down)]; 
     animation.toValue = [NSNumber numberWithFloat:(1 * M_PI/UP)]; 
     animation.repeatCount =0; 
     animation.duration=0.2;
     [animation setRemovedOnCompletion:NO];
     animation.timingFunction = [CAMediaTimingFunction
                                 functionWithName:kCAMediaTimingFunctionLinear]; 
     [self.image2.layer addAnimation:animation forKey:@"transform.rotation.x"];
     CATransform3D transform = CATransform3DIdentity;
     transform.m34 = (1/500.0f);
     transform = CATransform3DRotate(transform, (1 * M_PI/UP), 1, 0,0);
     myLayer.transform=transform;

     // second animation code
     CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform.rotation.x"];
     animation2.fromValue = [NSNumber numberWithFloat:(1 * M_PI/Down)]; 
     animation2.toValue = [NSNumber numberWithFloat:(1 * M_PI/UP)]; 
     animation2.repeatCount =0;
     animation2.duration=0.2;
     [animation2 setRemovedOnCompletion:NO];
     animation2.timingFunction = [CAMediaTimingFunction
                                 functionWithName:kCAMediaTimingFunctionLinear]; 
     [card.layer addAnimation:animation2 forKey:@"transform.rotation.x"];
     CATransform3D transform = CATransform3DIdentity;
     transform.m34 = (1/500.0f);
     transform = CATransform3DRotate(transform, (1 * M_PI/UP), 1, 0,0);
     card.layer.transform=transform;
 }
completion:^(BOOL finished)
 {
     self.image2.postion=@"UP";
     card.postion=@"UP";
 }]; 
```

# perl - 用于定位子例程调用的 Perl 调试器

> ID：10063296
> 
> 赞同：0
> 
> 时间：2012-04-08T13:49:44.160
> 
> 标签：perl, debugging

我在一些脚本上运行 perl -d 。该脚本使用了一些导致它崩溃的子程序，我怎样才能找到脚本实际调用该子程序的位置？（它可以在脚本使用的任何模块中，而不仅仅是脚本本身）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:02:00.917

看看Devel::Trace 模块。您应该能够使用它跟踪程序执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T15:19:44.787

使用该`T`命令在崩溃后打印堆栈跟踪。使用该`t`命令在执行期间切换跟踪。

所有这些都记录在调试器在线帮助 -`h`命令中。

# azure - Azure Tables 中的非规范化聊天消息

> ID：10063298
> 
> 赞同：0
> 
> 时间：2012-04-08T13:49:46.643
> 
> 标签：azure, chat, messages, azure-table-storage, denormalization

我正在使用 Windows Azure 为移动社交网络构建服务器后端。

我有这 3 个实体：

1.  用户 - 存储在 SQL Azure 中
2.  **线程（ 2 个用户**之间的某种关系，然后能够相互发送消息） - 存储在 SQL Azure 中
3.  消息 - 存储在 Azure 表中

当我将消息存储在按线程 ID 分区的 Azure 表中时，我希望在聊天时有良好的性能（向/从线程发送/读取消息）。

但我还需要能够为用户提供最新线程列表（recent = 包含最新消息）。换句话说，我需要在显示时按最后一条消息日期订购线程。

扫描许多不同的表分区并查找消息显然会成为性能杀手，因此我需要以某种方式将数据非规范化到其他表分区，以便能够有效地获取最新的线程。

根据您的经验，最佳策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:43:01.340

选择批处理解决方案始终是一种解决方法，这让我想起了大型机等旧计算。没有什么可以替代在线/实时系统。

如果您选择批处理解决方案，它将使您的系统在启动时过时，并将阻止未来的任何技术创新。

当您的 Azure 数据库开始变得太大而无法查询时，Microsoft 建议使用联合。基本上，这意味着将您的数据拆分到多个数据库中，并在代码中使用兼容的访问逻辑。

首先查看此演示应用程序：[SQL Azure Federations Tutorial -- Entity Framework](http://code.msdn.microsoft.com/windowsazure/SQL-Azure-Federation-a2d0eccf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:30:24.780

编辑：经过进一步思考，这是一个更好的建议（我认为）：

有一个消息 ATS 表。该表将容纳两种类型的消息：发送的消息和接收的消息。每次用户发送消息时，将其存储在表中作为“已发送”，然后作为“已接收”（或任何您想调用的类型）。

按以下方式对消息表中的所有消息进行分区：

(UserId) - PartitionKey, (long.Max - Timestamp.Ticks) - RowKey

作为额外的属性，您可以存储 ThreadId、Sent/Received 区分等。

如果您想保证您的消息被插入两次而不会出现问题，请使用 Queue 和 Worker 角色。

该方案按用户划分所有内容。您将能够在一个时间范围内显示该用户的所有消息，并且始终按降序显示。

# windows-phone-7 - Windows Phone 不显示图像

> ID：10063299
> 
> 赞同：1
> 
> 时间：2012-04-08T13:49:49.250
> 
> 标签：windows-phone-7

在下面的代码中，当我启动应用程序时，图像“imgNew”没有显示在画布上，所有其他图像都显示。它是倒数第四个：

```
<Image Height="100" HorizontalAlignment="Left" Margin="12,656,0,0" Name="imgNew" Source="/Elementals;component/NoughtsAndCrosses/NACImages/N%26C_new_1.png" Stretch="Fill" Tap="imgNew_Tap" VerticalAlignment="Top" Width="150" /> 
```

* * *

```
 <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.Background>
        <ImageBrush ImageSource="/Elementals;component/Main/HomeImages/bg_fire_3.png" />
    </Grid.Background>
    <Image Height="458" HorizontalAlignment="Left" Margin="12,154,0,0" Name="imgGrid" Source="/Elementals;component/NoughtsAndCrosses/NACImages/Grid.png" Stretch="Fill" VerticalAlignment="Top" Width="458" />
    <Image Height="120" HorizontalAlignment="Left" Margin="27,171,0,0" Name="LeftTop" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="LeftTop_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="181,171,0,0" Name="MiddleTop" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="MiddleTop_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="335,171,0,0" Name="RightTop" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="RightTop_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="335,479,0,0" Name="RightBottom" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="RightBottom_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="181,479,0,0" Name="MiddleBottom" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="MiddleBottom_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="27,479,0,0" Name="LeftBottom" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="LeftBottom_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="335,325,0,0" Name="RightMiddle" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="RightMiddle_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="181,325,0,0" Name="MiddleMiddle" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="MiddleMiddle_Tap" VerticalAlignment="Top" Width="120" />
    <Image Height="120" HorizontalAlignment="Left" Margin="27,325,0,0" Name="LeftMiddle" Source="/Elementals;component/NoughtsAndCrosses/NACImages/empty.png" Stretch="Fill" Tap="LeftMiddle_Tap" VerticalAlignment="Top" Width="120" />
    <TextBlock Height="30" HorizontalAlignment="Left" Margin="10,46,0,0" Name="lblPlayerX" Text="X Points:" VerticalAlignment="Top" />
    <TextBlock Height="30" HorizontalAlignment="Left" Margin="11,10,0,0" Name="lblPlayerO" Text="O Points:" VerticalAlignment="Top" />
    <Image Height="100" HorizontalAlignment="Left" Margin="12,656,0,0" Name="imgNew" Source="/Elementals;component/NoughtsAndCrosses/NACImages/N%26C_new_1.png" Stretch="Fill" Tap="imgNew_Tap" VerticalAlignment="Top" Width="150" />
    <Image Height="178" HorizontalAlignment="Left" Margin="56,325,0,0" Name="lblX" Source="/Elementals;component/NoughtsAndCrosses/NACImages/WHo_First_3.png" Stretch="Fill" VerticalAlignment="Top" Width="180" Tap="lblX_Tap" />
    <Image Height="138" HorizontalAlignment="Left" Margin="35,154,0,0" Name="lblWhosGo" Source="/Elementals;component/NoughtsAndCrosses/NACImages/WHo_First_2.png" Stretch="Fill" VerticalAlignment="Top" Width="420" />
    <Image Height="180" HorizontalAlignment="Left" Margin="251,325,0,0" Name="lblO" Source="/Elementals;component/NoughtsAndCrosses/NACImages/WHo_First_4.png" Stretch="Fill" VerticalAlignment="Top" Width="192" Tap="lblO_Tap" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:50:29.280

您是否将“构建操作”设置为该图像的内容？确保你做到了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:52:17.423

我猜它被文件名中的 HTML 编码字符弄乱了。%26 与 & 符号相同`&`，这很可能会导致您出现问题。我建议您将文件重命名为不带特殊字符的名称。

# java - 将soap：地址位置从http更改为https

> ID：10063300
> 
> 赞同：0
> 
> 时间：2012-04-08T13:49:57.637
> 
> 标签：java, web-services, soap, axis2

是的，我的应用程序服务器在 https 上运行。客户要求将肥皂地址从 http 更改为 https。

客户要求，只要他想要 2 通过浏览器查看 wsdl，soap 地址应该以 https 的形式出现

我已经在axis2.xml中添加了这个......

```
<transportReceiver name="https"      class="org.apache.axis2.transport.http.SimpleHTTPServer"> <parameter     name="port">8443</parameter> 
</transportReceiver> 
```

我在 service.xml 中添加了以下内容

```
<transports> <transport>HTTPS</transport> </transports> 
```

在封闭标签之后，但它给了我以下错误。

它给了我例外

```
org.apache.axis2.deployment.DeploymentException: Service [ RTAPDevService] is trying to expose in a transport : <transports> <transport>HTTPS</transport> </transports> and which is not available in Axis2 – 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:11:06.120

这就是我所做的：

**创建证书**

`keytool -genkey -alias localhost -keypass password -keystore /choose/a/path/localhost.bin -storepass password -keyalg RSA`

**在 tomcat 中为 AXIS2 启用服务器端 SSL**

`Server.xml`在tomcat中添加以下内容：

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
       maxThreads="150" scheme="https" secure="true"
       clientAuth="false" sslProtocol="TLS"
       keystoreFile="/choose/a/path/localhost.bin"
       keystorePass="password" keyAlias="localhost"/> 
```

**更改axis2.xml**

（您可以同时使用：http 和 https）

```
<transportReceiver name="http"
               class="org.apache.axis2.transport.http.AxisServletListener">
               <parameter name="port">8080</parameter>
           </transportReceiver>
<transportReceiver name="https"
               class="org.apache.axis2.transport.http.AxisServletListener">
               <parameter name="port">8443</parameter>
           </transportReceiver> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:55:49.020

**service.xml**中有错字。它应该是 ：

```
<transports><transport>https</transport></transports> 
```

不是 HTTPS。

您的**wsdl**将如下所示：

```
 <wsdl:service name="SampleService">
<wsdl:port name="SampleServiceHttpsSoap11Endpoint" binding="ns:SampleServiceSoap11Binding">
<soap:address location="https://localhost:8443/Axis2HttpsProject/services/SampleService.SampleServiceHttpsSoap11Endpoint/"/>
</wsdl:port>
<wsdl:port name="SampleServiceHttpsSoap12Endpoint" binding="ns:SampleServiceSoap12Binding">
<soap12:address location="https://localhost:8443/Axis2HttpsProject/services/SampleService.SampleServiceHttpsSoap12Endpoint/"/>
</wsdl:port>
<wsdl:port name="SampleServiceHttpsEndpoint" binding="ns:SampleServiceHttpBinding">
<http:address location="https://localhost:8443/Axis2HttpsProject/services/SampleService.SampleServiceHttpsEndpoint/"/>
</wsdl:port>
</wsdl:service> 
```

还有一件事，确保你已经添加了**http-core** jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T14:37:42.633

在standalone.xml中我做了这些改变：

```
 <subsystem xmlns="urn:jboss:domain:webservices:1.2">
        <modify-wsdl-address>true</modify-wsdl-address>
        <wsdl-host>jbossws.undefined.host</wsdl-host>
        <wsdl-port>443</wsdl-port>
        <endpoint-config name="Standard-Endpoint-Config"/> 
```

# android - 使用 RoboGuice + Robolectric 测试 RadioGroup 时遇到问题

> ID：10063302
> 
> 赞同：0
> 
> 时间：2012-04-08T13:50:22.617
> 
> 标签：android, tdd, radio-group, roboguice, robolectric

我已经用很多不同的方式看了这个，我只剩下了一点头发，我想我会把它放在那里，希望有人已经尝试过了。

我正在尝试为启用 Roboguice 的活动编写 Robolectric 测试。具体来说，我正在尝试编写确保 RadioGroup 行为的测试。

问题在于，在运行测试时，RadioGroup 不像 RadioGroup 并强制执行一次只检查一个 RadioButton 的行为。我可以通过断言和调试器看到我可以一次检查组中的所有三个按钮。

RadioGroup 非常简单：

```
<RadioGroup
    android:id="@+id/whenSelection"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/whenToday"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/today" />

    <RadioButton
        android:id="@+id/whenYesterday"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/yesterday" />

    <RadioButton
        android:id="@+id/whenOther"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/earlier" />

</RadioGroup> 
```

然后我应该指出我运行应用程序的行为，行为是我所期望的（如果我单击任何一个单选按钮，只有一个保持选中状态，而其他两个未选中）。所以，理论上，这个测试应该通过：

```
 -- snip--
    Assert.assertTrue(whenToday.isChecked());
    Assert.assertFalse(whenYesterday.isChecked());
    Assert.assertFalse(whenOther.isChecked());

    whenYesterday.performClick();

    Assert.assertTrue(whenYesterday.isChecked());
    Assert.assertFalse(whenToday.isChecked());
    -- snip -- 
```

但是，最后一个断言失败了，调试器确认第一个按钮 whenToday 保持选中状态。

这是完整的测试类：

```
@RunWith(InjectedTestRunner.class)
public class MyTest {
    @Inject ActivityLogEdit activity;

    RadioButton whenToday;
    RadioButton whenYesterday;
    RadioButton whenOther;

@Before
public void setUp() {
    activity.setIntent(new Intent());
    activity.onCreate(null);

    whenSelection = (RadioGroup) activity.findViewById(R.id.whenSelection);
    whenToday = (RadioButton) activity.findViewById(R.id.whenToday);
    whenYesterday = (RadioButton) activity.findViewById(R.id.whenYesterday);
    whenOther = (RadioButton) activity.findViewById(R.id.whenOther);       
}

@Test
public void checkDateSelectionInitialState() throws Exception {
    Assert.assertTrue(whenToday.isChecked());
    Assert.assertFalse(whenYesterday.isChecked());
    Assert.assertFalse(whenOther.isChecked());
    Assert.assertEquals(View.GONE, logDatePicker.getVisibility());

    whenYesterday.performClick();

    Assert.assertTrue(whenYesterday.isChecked());
    Assert.assertFalse(whenToday.isChecked());
  }
} 
```

我已经尝试了我能想到的每一种不同的方式。我觉得我在做一些愚蠢的事情或缺少一些基本概念。请帮忙！

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:22:54.727

我收到了其中一位开发者对 Robolectric Group 帖子的回复：

> 您正在谈论的功能（选中单选按钮将取消选中组中的所有其他单选按钮）尚未在 Robolectric 中实现。随时提出功能请求： [https](https://github.com/pivotal/robolectric/issues/) ://github.com/pivotal/robolectric/issues/ 如果我没记错，请尝试更改您的测试以在 RadioGroup 上使用 getCheckedRadioButtonId() 而不是在 RadioButtons 上使用 isChecked()--I相信落实了。

请注意，我也尝试过`getCheckedRadioButtonId()`，它也没有实现（总是返回-1）。

安德鲁

# java - 加载用户在 JTable 中插入的所有单元格内容，并将这些内容作为对象存储在 LinkedList 中

> ID：10063306
> 
> 赞同：1
> 
> 时间：2012-04-08T13:51:35.730
> 
> 标签：java, swing, jtable

我有一个有 2 列的 JTable，这个 JTable 有 N 行（其中 N 取决于其他任务）并在每个单元格中显示之前设置一个默认值。对于每一行，都有一个 String 和一个 int 值。

我需要这个表，当我点击*OK*按钮时，发送所有单元格数据（在这些由用户编辑之后）作为对象与链接列表中的 2 个数据（行 x 列 x）耦合。（对象构造函数*JOB*接收一个*String*和一个*int*尚未完成。）

我该如何编码？？？

这是使用我的 JTable 和 2 个按钮（确定和取消）生成窗口的代码：

```
 /**
     * Create the frame.
     */
    public InsertJobWindows() {
        setTitle("Welcome");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 551, 293);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        JPanel panel_1 = new JPanel();

        JButton btnNewButton = new JButton("    OK   ");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            }
        });
        panel_1.add(btnNewButton);

        JButton btnNewButton_1 = new JButton("Cancel");
        btnNewButton_1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                InsertJobWindows.this.dispose();
            }
        });

        JPanel panel = new JPanel();

        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        table.getSelectionModel().addListSelectionListener(
                new ListSelectionListener() {
                    public void valueChanged(ListSelectionEvent event) {
                        int viewRow = table.getSelectedRow();
                        JLabel statusText=new JLabel();
                        if (viewRow < 0) {
                            //Selection got filtered away.
                            statusText.setText("");
                        } else {
                            int modelRow = 
                                table.convertRowIndexToModel(viewRow);
                            statusText.setText(
                                String.format("Selected Row in view: %d. " +
                                    "Selected Row in model: %d.", 
                                    viewRow, modelRow));
                        }
                    }
                }
        );

                //Create the scroll pane and add the table to it.
                JScrollPane scrollPane = new JScrollPane(table);

                        //Set up column sizes.
                        initColumnSizes(table);

        panel_1.add(btnNewButton_1);
        GroupLayout gl_contentPane = new GroupLayout(contentPane);
        gl_contentPane.setHorizontalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING, false)
                        .addComponent(panel_1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(panel, GroupLayout.DEFAULT_SIZE, 525, Short.MAX_VALUE))
                    .addContainerGap())
        );
        gl_contentPane.setVerticalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addComponent(panel, GroupLayout.PREFERRED_SIZE, 213, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED, 61, Short.MAX_VALUE)
                    .addComponent(panel_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
        );
        GroupLayout gl_panel = new GroupLayout(panel);
        gl_panel.setHorizontalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(11)
                    .addComponent(scrollPane, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(12, Short.MAX_VALUE))
        );
        gl_panel.setVerticalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(5)
                    .addComponent(scrollPane, GroupLayout.DEFAULT_SIZE, 197, Short.MAX_VALUE)
                    .addContainerGap())
        );
        panel.setLayout(gl_panel);
        contentPane.setLayout(gl_contentPane);

    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel)table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer =
            table.getTableHeader().getDefaultRenderer();

        for (int i = 0; i < 2; i++) {
            column = table.getColumnModel().getColumn(i);

            comp = headerRenderer.getTableCellRendererComponent(
                                 null, column.getHeaderValue(),
                                 false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;

            comp = table.getDefaultRenderer(model.getColumnClass(i)).
                             getTableCellRendererComponent(
                                 table, longValues[i],
                                 false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;

            if (DEBUG) {
                System.out.println("Initializing width of column "
                                   + i + ". "
                                   + "headerWidth = " + headerWidth
                                   + "; cellWidth = " + cellWidth);
            }

            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    class MyTableModel extends AbstractTableModel {
        private String[] columnNames = {"JobName", "time"};
        int numJobs=JobManager.loadNumJob();
        private Object[][] data = getDefaultTableData();

        public Object[][] getDefaultTableData(){
            Object[][] tabella=new Object[numJobs][2];
            for(int i=0; i<numJobs; i++){
                for(int j=0; j<2; j++){
                    tabella[i][j]="insert the correct data";
                }
            }

            return tabella;
        }

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return numJobs;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        public boolean isCellEditable(int row, int col) {
            return true;
        }

        public void setValueAt(Object value, int row, int col) {
            if (DEBUG) {
                System.out.println("Setting value at " + row + "," + col
                                   + " to " + value
                                   + " (an instance of "
                                   + value.getClass() + ")");
            }

            data[row][col] = value;
            fireTableCellUpdated(row, col);

            if (DEBUG) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        public void run() {
            try {
                InsertJobWindows frame = new InsertJobWindows();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:51:13.003

更改您的表格模型以保存一个`LinkedList`（或更简单地说，一个`List`）您的工作。

有点像这样：

```
public class Job {
    public int time; // Should n't this be a long?
    public String jobName;
}

class MyTableModel extends AbstractTableModel {
    private String[] columnNames = {"JobName", "time"};
    int numJobs=JobManager.loadNumJob();
    private List<Job> data = getDefaultTableData();

    public List<Job> getDefaultTableData(){
        List<Job> jobs = new LinkedList<Job>();
        for(int i=0; i<numJobs; i++) {
            Job job = new Job();
            job.time = /* Some int value */ 0;
            job.jobName= /* Some string value */ "";
            jobs.add(job);
        }

        return jobs;
    }

    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return jobs.size();
    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        if (col==0) {
            return data.get(row).jobName;
        } else if (col==1) {
            return data.get(row).time;
        }
        return null;
    }

    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    public boolean isCellEditable(int row, int col) {
        return true;
    }

    public void setValueAt(Object value, int row, int col) {
        if (DEBUG) {
            System.out.println("Setting value at " + row + "," + col
                               + " to " + value
                               + " (an instance of "
                               + value.getClass() + ")");
        }

        if (col==0) {
            data.get(row).jobName = value; // Here do the casts and necessary checks.
        } else if (col==1) {
            data.get(row).time= value; // Here do the casts and necessary checks.
        }
        fireTableCellUpdated(row, col);

        if (DEBUG) {
            System.out.println("New value of data:");
            printDebugData();
        }
    } 
```

# asp.net - 如何从 Json 数据响应中填充 asp:LinkBut ton

> ID：10063311
> 
> 赞同：0
> 
> 时间：2012-04-08T13:52:14.300
> 
> 标签：asp.net, json

首先为我的英语道歉。我是 json 领域的新手。我的问题是我无法将 json 响应中接收的数据解析为 asp:LinkBut​​ton 或任何 asp:element，因为我无法创建正确的 sintax。特别是，我想要做的是：

```
<script type="text/javascript">
    $.getJSON("http://www.carqueryapi.com/api/0.3/?callback=?", { cmd: "getMakes",   min_year:"1941", max_year:"2012"}, function (data) {

             var makes = data.Makes;
             for (var i = 0; i < makes.length; i++) {   

                 ($("<asp:LinkButton ID=\"lb" + i +"\" runat=\"server\" />").text(makes[i].make_display )).appendTo("#lbProva");
             }
         });
<script>

<ul id="lbProva" class="lb_prova" >

    </ul> 
```

我希望有人可以帮助我，因为我尝试了很多可能性，但没有一个是正确的。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:05:45.860

实际上，您只能在服务器上创建服务器控件。所以问题是如何将 AJAX 调用响应传递给服务器并强制它刷新页面上的所需区域。

第一个变体

```
<script type="text/javascript">
    $(function () {
        $.getJSON("http://www.carqueryapi.com/api/0.3/?callback=?", { cmd: "getMakes", year: "2009" },
        function (data) {
            //The 'data' variable contains all response data.
            var makes = $.map(data.Makes, function (make) { return make.make_display; }).join(";");
            document.getElementById("<%= CarMakersHiddenField.ClientID %>").value = makes;
            __doPostBack("<%= CarMakersUpdatePanel.ClientID %>", "");
        });
    });
</script>

<asp:UpdatePanel runat="server" ID="CarMakersUpdatePanel" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:HiddenField runat="server" ID="CarMakersHiddenField" />
        <asp:BulletedList runat="server" ID="MakersList" DisplayMode="LinkButton">
        </asp:BulletedList>
    </ContentTemplate>
</asp:UpdatePanel> 
```

服务器代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    MakersList.Items.Clear();
    foreach (var maker in CarMakersHiddenField.Value.Split(';'))
    {
        MakersList.Items.Add(maker);
    }
} 
```

如果您需要将一些复杂的对象（如制造商对象数组）传递给服务器，则第二种方法更适合。在这种情况下，您可以在客户端将此对象序列化为 JSON 字符串，并在服务器上对其进行反序列化。看起来像以前的版本有一些变化：

```
<script type="text/javascript">
    $(function () {
        $.getJSON("http://www.carqueryapi.com/api/0.3/?callback=?", { cmd: "getMakes", year: "2009" },
        function (data) {
            //The 'data' variable contains all response data.
            var serializedString = Sys.Serialization.JavaScriptSerializer.serialize(data.Makes);
            document.getElementById("<%= CarMakersHiddenField.ClientID %>").value = serializedString;
            __doPostBack("<%= CarMakersUpdatePanel.ClientID %>", "");
        });
    });
</script> 
```

标记与第一个版本相同。服务器代码：

```
[Serializable]
public class Make
{
    public string make_id;
    public string make_display;
    public bool make_is_common;
    public string make_country;
}

protected void Page_Load(object sender, EventArgs e)
{
    MakersList.Items.Clear();
    if (!String.IsNullOrEmpty(CarMakersHiddenField.Value))
    {
        var serializer = new DataContractJsonSerializer(typeof(Make[]));
        using (var stream = new MemoryStream(Encoding.Unicode.GetBytes(CarMakersHiddenField.Value)))
        {
            var makes = serializer.ReadObject(stream) as Make[];
            if (makes != null)
            {
                foreach (var maker in makes)
                {
                    MakersList.Items.Add(new ListItem(maker.make_display, maker.make_id));
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:55:44.590

您不能在客户端的 javascript 中创建 asp.net 服务器控件。如果要在客户端使用 json 数据，则必须将其应用于已生成的 html 控件。

# autocomplete - 基于 edismax 类型错误的 Solr 自动完成

> ID：10063318
> 
> 赞同：0
> 
> 时间：2012-04-08T13:53:53.203
> 
> 标签：autocomplete, solr, edismax

我在尝试基于 edismax 类型实现自动完成时收到以下错误。

```
SEVERE: java.lang.IllegalStateException: field "locality_ng" was indexed without position data; cannot run PhraseQuery (term=львів)
at org.apache.lucene.search.PhraseQuery$PhraseWeight.scorer(PhraseQuery.java:241)
at org.apache.lucene.search.DisjunctionMaxQuery$DisjunctionMaxWeight.scorer(DisjunctionMaxQuery.java:145)
at org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:317)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:551)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:324)
at org.apache.solr.search.SolrIndexSearcher.getDocListNC(SolrIndexSearcher.java:1275) 
```

架构类型：

```
 <fieldType name="text_suggest" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="1" splitOnCaseChange="1" splitOnNumerics="1" preserveOriginal="1" />
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0" splitOnNumerics="0"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>

    <!-- autocomplete_edge : Will match from the left of the field, e.g. if the document field
         is "A brown fox" and the query is "A bro", it will match, but not "brown"
    -->
    <fieldType name="autocomplete_edge" class="solr.TextField">
        <analyzer type="index">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.PatternReplaceFilterFactory" pattern="([\.,;:_])" replacement=" " replace="all"/>
            <filter class="solr.EdgeNGramFilterFactory" maxGramSize="50" minGramSize="2"/>
        </analyzer>
        <analyzer type="query">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.PatternReplaceFilterFactory" pattern="([\.,;:_])" replacement=" " replace="all"/>
            <filter class="solr.PatternReplaceFilterFactory" pattern="^(.{50})(.*)?" replacement="$1" replace="all"/>
        </analyzer>
    </fieldType>

    <!-- autocomplete_ngram : Matches any word in the input field, with implicit right truncation.
         This means that the field "A brown fox" will be matched by query "bro".
         We use this to get partial matches, but these whould be boosted lower than exact and left-anchored
    -->
    <fieldType name="autocomplete_ngram" class="solr.TextField">
        <analyzer type="index">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EdgeNGramFilterFactory" maxGramSize="20" minGramSize="2"/>
        </analyzer>
        <analyzer type="query">
            <!--charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/-->
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="0"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.PatternReplaceFilterFactory" pattern="^(.{20})(.*)?" replacement="$1" replace="all"/>
        </analyzer>
    </fieldType> 
```

架构字段

```
 <!-- AutoComplete fields
         Construct documents containing these fields for all suggestions you like to provide
         Then use a dismax query to search on some fields, display some fields and boost others
     -->
    <field name="locality_id" type="int" indexed="true" stored="true" required="true"/>
    <!-- The main text to return as the suggestion. This is not searched -->
    <field name="locality_suggest" type="text_suggest" indexed="true" stored="true" omitNorms="true" multiValued="true" />

    <!-- A variant of textsuggest which only matches from the very left edge -->
    <copyField source="locality_suggest" dest="locality_nge"/>
    <field name="locality_nge" type="autocomplete_edge" indexed="true" stored="false" multiValued="true" />

    <!-- A variant of textsuggest which matches from the left edge of all terms (implicit truncation) -->
    <copyField source="locality_suggest" dest="locality_ng"/>
    <field name="locality_ng" type="autocomplete_ngram" indexed="true" stored="false" omitNorms="true" omitTermFreqAndPositions="true" multiValued="true" /> 
```

solr 配置，使用以下带有 edismax 类型的请求处理程序：

```
 <requestHandler class="solr.SearchHandler" name="autocomplete" >
<lst name="defaults">
    <str name="defType">edismax</str>
    <str name="rows">10</str>
    <str name="fl">*,score</str>
    <str name="qf">locality_suggest locality_ng^5.0 locality_nge^10.0</str>
    <str name="debugQuery">false</str>
</lst> 
```

仅当查询在单词后包含特定符号（如 + - $ @）时才会发生此错误

львів+в київ+а

任何建议都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:43:36.660

改变

```
 <field name="locality_ng" type="autocomplete_ngram" indexed="true" stored="false" omitNorms="true" omitTermFreqAndPositions="true" multiValued="true" /> 
```

进入

```
 <field name="locality_ng" type="autocomplete_ngram" indexed="true" stored="false" omitNorms="true" multiValued="true" /> 
```

# excel - 分析循环测试数据的最佳程序

> ID：10063319
> 
> 赞同：2
> 
> 时间：2012-04-08T13:53:54.047
> 
> 标签：excel, matlab, wolfram-mathematica, cycle

我已经对钢接头进行了一些循环测试。测试条件包括每个幅度值应用 3 个周期并使用三个不同的幅度。

现在我有一个包含旋转和力矩值的巨大文本文件，但我需要使用回归分析方法确定图表每个分支的刚度。因此我需要分开每个周期。

你推荐吗

*   数学，
*   MATLAB,
*   Excel，
*   或其他最适合使这项任务更容易的程序？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:43:22.500

目前尚不清楚您要在问题中寻找什么。我对 Mathematica 或 Excel 也不太了解，但我会尽可能多地说明如何使用 Matlab 来解决这个问题。

当您说“分离每个周期”时，我假设您的意思是您的文本文件包含有关所有 3 个周期的数据，并且您希望将其划分为有关每个单独周期的 3 个单独的数据集。我猜Matlab会导入你的数据文件（文件->导入数据菜单非常灵活，我已经成功地使用了它，例如30MB的文件，但是如果你的文件是数百MB，那可能是个问题）。

假设数据文件有一些结构，我希望您可以对其进行切片以实现所需的分区，例如

```
cycle1 = data(1:3:end, :); %If data from cycles are stored in alternate rows
cycle1 = data(1:end/3, :); %If data from cycles are stored in blocks of rows
cycle1 = data(:, 3);       %If data from cycles are stored in separate columns 
```

等如果您对文件结构的描述发表评论，我可能会提供进一步的帮助。

关于回归分析，Matlab 有几个[工具](http://www.mathworks.co.uk/help/techdoc/data_analysis/f1-6010.html)；[polyfit](http://www.mathworks.co.uk/help/techdoc/ref/polyfit.html)非常灵活，可能会满足您的要求。我对材料一无所知，但如果您解释刚度和测量变量之间的关系，我可能会提供更好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:21:42.340

Mathematica 很棒，但就最广泛的工具而言，我会选择 R，也许它是 glm 包。还有许多其他合适的包，甚至用于回归的神经网络或随机森林可能会成为一个有趣的替代方案，所有这些都可以在 R 中免费获得。

# emacs - 在 emacs 中如何控制显示编译结果的窗口？

> ID：10063325
> 
> 赞同：2
> 
> 时间：2012-04-08T13:54:42.987
> 
> 标签：emacs, erlang

我使用 emacs 进行 erlang 编程。根据`http://emacswiki.org/emacs/CompileCommand`，我已经配置 cc c 进行重新编译。在 emacs 框架中，打开了 6 个窗口，前 3 个用于 erlang 源代码的读写。在下面的窗口中，一个用于编译窗口。但是当不同的窗口处于活动状态并重新编译时，*编译*窗口会随机切换。如何在一个特定的窗口中修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T15:25:52.410

如果您开始阅读 at `C-h``f` `display-buffer` `RET`（或手册 at `M-:` `(info "(elisp) Choosing Window")` `RET`），您会发现许多可以修改行为的方法。

它可能会有点复杂，但在重新编译函数中可能只需要这样的东西：

```
(let ((display-buffer-overriding-action
       '(display-buffer-reuse-window)))
  (compile)) 
```

当我想把东西放在一个地方时，我总是使用专用窗口，所以你可能会发现这很有用：

`M-:` `(info "(elisp) Dedicated Windows")` `RET`

我使用`toggle-window-dedicated`从[Pin Emacs 缓冲区到 windows 的函数（对于 cscope）](https://stackoverflow.com/questions/43765/pin-emacs-buffers-to-windows-for-cscope/65992#65992)（另请参阅[如何使这个 Emacs 框架保持其缓冲区而不被调整大小？](https://stackoverflow.com/questions/5151620/how-do-i-make-this-emacs-frame-keep-its-buffer-and-not-get-resized/5182111)）

# service - 未找到 Web 服务端口 {http://ttdev.com/ss}p1

> ID：10063326
> 
> 赞同：0
> 
> 时间：2012-04-08T13:54:48.337
> 
> 标签：service, web

我是 Web 服务的新手，我买了一本书并开始从中学习，WSDL 是：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ttdev.com/ss" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="SimpleService" targetNamespace="http://ttdev.com/ss">
  <wsdl:types>
    <xsd:schema targetNamespace="http://ttdev.com/ss">
      <xsd:element name="concatRequest">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="s1" type="xsd:string" />
            <xsd:element name="s2" type="xsd:string"></xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="concatResponse" type="xsd:string">

      </xsd:element>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="concatRequest">
    <wsdl:part element="tns:concatRequest" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="concatResponse">
    <wsdl:part element="tns:concatResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:portType name="SimpleService">
    <wsdl:operation name="concat">
      <wsdl:input message="tns:concatRequest"/>
      <wsdl:output message="tns:concatResponse"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="SimpleServiceSOAP" type="tns:SimpleService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="concat">
      <soap:operation soapAction="http://ttdev.com/ss/NewOperation"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="SimpleService">
    <wsdl:port binding="tns:SimpleServiceSOAP" name="p1">
      <soap:address location="http://localhost:8080/ss/p1"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

我运行 SimpleService_P1_Server，它正在工作，但是当我运行客户端时： SimpleService_P1_Client 我得到了这个异常：

```
Apr 8, 2012 9:51:47 AM com.ttdev.ss.SimpleService_Service <clinit>
INFO: Can not initialize the default wsdl from src/main/resources/SimpleService.wsdl
Exception in thread "main" javax.xml.ws.WebServiceException: Port {http://ttdev.com/ss}p1 not found.
    at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:328)
    at org.apache.cxf.jaxws.ServiceImpl.getPort(ServiceImpl.java:319)
    at javax.xml.ws.Service.getPort(Unknown Source)
    at com.ttdev.ss.SimpleService_Service.getP1(SimpleService_Service.java:56)
    at com.ttdev.ss.SimpleService_P1_Client.main(SimpleService_P1_Client.java:49) 
```

谢谢，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T05:01:34.447

前段时间我也遇到过类似的问题。您可能希望在“src/main/resources”之前使用前缀“file:”。这是结果代码：

```
WSDLToJava.main(new String[] { "-client", "-d", "src/main/java",
            "file:src/main/resources/SimpleService.wsdl" }); 
```

# transactions - 使用 db session 时如何在 sql alchemy 中使用事务？

> ID：10063328
> 
> 赞同：13
> 
> 时间：2012-04-08T13:55:03.193
> 
> 标签：transactions, sqlalchemy

我在我的项目中使用 sql alchemy，我使用了 db session，

```
engine = create_engine(configuration)
db_session = scoped_session(sessionmaker(autocommit=False,
                                     autoflush=False,
                                     bind=engine))

Base = declarative_base()
Base.query = db_session.query_property()

def init_db():    
    import models
    Base.metadata.create_all(bind=engine) 
```

数据库会话用作：

```
db_session.merge(order)      #order(model) in object
db_session.commit() 
```

现在我想将数据插入两个表订单和订单行项目，所以我需要事务，如： 1\. 在第一个插入中，我希望插入的订单的 id 在第二个插入查询中使用 2\. 如果第二个插入查询失败，那么第一个查询应该回滚

```
Try:
    #begin transaction/How to begin transaction?
    order=db_session.add(order)      #insert into order
    #is need to commit db_session here as I need inserted orders id
    #here actually db_session.commit() needed to get order's id(auto generated) 
    #if db_session committed here then sql alchemy starts new session       

    order_line_item.id = order.id
    db_session.add(order_line_item)    #insert into order line line item

    db_session.commit()
    #check transaction status if failed then rollback, How to check status?

except:
    db_session.rollback() 
```

如何使用交易？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T07:06:15.333

Lafada 建议的嵌套交易不适用于这种情况。A`flush()`会做得很好，例如

```
db_session.begin()
try:
    db_session.add(order)

    db_session.flush()

    order_line_item.id = order.id
    db_session.add(order_line_item)

    db_session.commit()
except:
    db_session.rollback() 
```

或者更好的是，如果您在订单和订单项之间正确设置了关系，您甚至不应该费心手动分配 id。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T14:47:50.533

你应该使用`relationship`SQLAlchemy 的特性，所以你不必乱用外键。因此，例如，您的订单项目可能看起来像（我假设您有一个多对一的关系）：

```
class OrderLineItem(Base):
    id = Column(Integer, primary_key=True)
    order_id = Column(Integer, ForeignKey('orders.id'))
    order = relationship('Order', backref='order_line_items') 
```

在插入时，您只需分配订单实例：

```
order_line_item.order = order
session.add(order)  # you even don't have to insert the item! 
```

在教程中查看更多详细信息：http: [//docs.sqlalchemy.org/en/latest/orm/relationships.html](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T04:02:11.257

你必须像用户[嵌套事务](http://docs.sqlalchemy.org/en/latest/core/connections.html#nesting-of-transaction-blocks)一样

```
top_trans = connection.begin()
try:
    #begin transaction/How to begin transaction?
    order_trans = connection.begin()
    order=db_session.add(order)      #insert into order
    order_trans.commit()

    order_line_item.id = order.id
    order_line_trans = connection.begin()
    db_session.add(order_line_item)    #insert into order line line item

    order_line_trans.commit()
    #check transaction status if failed then rollback, How to check status?

except:
    top_trans.rollback() 
```

您也可以使用[两阶段](http://docs.sqlalchemy.org/en/latest/orm/session.html?highlight=begin_twophase#managing-transactions)事务。两者各有优势，哪一款适合你，你可以使用

# function - 有没有办法在 VBScript 中的退出函数之前始终执行一些代码

> ID：10063342
> 
> 赞同：1
> 
> 时间：2012-04-08T13:57:59.600
> 
> 标签：function, vbscript, exit, qtp

我想编写一个函数，其中有多个“退出函数”语句。有没有办法让我确保在执行退出功能之前始终运行一些清理代码？

这就是我真正想做的事情，我想在我的测试自动化项目中设置一个标准，即某个函数应该在任何函数的代码开始之前运行，并在退出函数之前运行另一个函数。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:06:01.387

由于在 VBScript 中将函数包装在函数中并不容易（预计会出现参数传递问题），因此您应该使用一个类：

```
Class cWrap
  Private m_sName
  Public Function init(s)
    Set init = Me
    m_sName  = s
    WScript.Echo "*** enter", m_sName
  End Function ' init
  Private Sub Class_Terminate()
    WScript.Echo "*** leave", m_sName
  End Sub ' Class_Terminate
End Class ' cWrap

Function f1(n)
  f1 = "f1 called"
  Dim o : Set o = New cWrap.init("f1")
End Function ' f1

Function f2(n)
  f2 = "f2 called"
  Dim o : Set o = New cWrap.init("f2")
End Function ' f2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:57:50.580

Ekkehard.Horner 的包装类非常有用，如果您有超出函数范围的事情要做，例如秒表、运行堆栈查看器或 err 对象上的异常捕获器。但是当您在函数范围内有事情要做并且包装类呈现无用时，您可以考虑使用该`Do Loop While False`模式：

```
Function DoSomeMessyStuff()
    Do
        call doStuff()
        If somecondition Then Exit Do
        call doMoreStuff()
        If somecondition Then Exit Do
        call doEvenMoreStuff()
        If somecondition Then Exit Do
        call andEvenMoreStuffHere()
    Loop While False ' Always exits

    ' Finally: 
    call cleanUpTheMess()

End Function 
```

# ios - 将数据离线保存在数据库中

> ID：10063343
> 
> 赞同：0
> 
> 时间：2012-04-08T13:58:04.607
> 
> 标签：ios, database, sqlite, cordova

我想知道是否有类似于 SQLite 的技术可以让我在包括 iPhone 在内的不同平台上离线保存数据。

我正在使用 Phonegap，所以我不知道有什么限制，以及是否可以使用 SQLite，或者有更好的方法吗？

它现在在 Android 上运行良好，但在 iOS 上会一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:50:20.300

请参阅基于 W3C Web SQL 数据库规范和 W3C Web 存储 API 规范的[PhoneGap 存储 API 。](http://docs.phonegap.com/en/1.5.0/phonegap_storage_storage.md.html#Storage)它适用于 Android、IOS 和 Blackberry。

# asp.net - ADO.NET数据服务和数据源控件有什么区别

> ID：10063347
> 
> 赞同：2
> 
> 时间：2012-04-08T13:58:46.623
> 
> 标签：asp.net, wcf, ado.net

我试图了解 ADO.NET 数据服务和数据源控件之间的区别，用于处理通过 ASP.NET webforms 处理的数据。据我所知，数据源控件是一组控件，包括简单的 SQLDataSource 到 EntityDataSource。SQLDataSource 需要直接进入数据库，因此不需要访问实体模型，但与实体一起工作的 EntityDataSource 需要访问 EDM ......可能有些东西不清楚或有太多东西重叠。MS docs 对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:12:24.260

**ADO.net 数据服务**（WCF 数据服务）和**数据源控件**只是两个不同的东西。

**数据源控件**只是将数据绑定到 UI 控件（Gridview、Listview 等）的控件。（*如果你看一下[**MSDN**](http://msdn.microsoft.com/en-us/library/ms227679.aspx)，所有这些控件的驱动`System.Web.UI.Control`和它们的命名空间都是 `System.Web.UI.WebControls`*）。要将数据绑定到 UI 控件，数据可以来自各种来源，例如来自数据库、xml、edm 或对象集合等... 数据源控件连接到这些数据源并从这些数据源中检索数据，并使其可用于 UI控件绑定，无需代码。（*如果您的 ui 控件需要直接绑定到数据库，您将使用 SqlDataSource，或者如果您使用实体数据模型（数据库上的附加层），您将使用 EntityDataSource。*）

**[WCF 数据服务](http://msdn.microsoft.com/en-us/library/cc668792.aspx)**[（正式名称为 ADO.net 数据服务）是一个使用开放数据协议 ( OData](http://odata.org) ) 作为 REST-ful 方式在 Web 服务中公开数据层的框架它实际上是运行时与 Web 服务和实体框架的组合。它也被称为 Microsoft 的 N 层数据访问解决方案，因为 WCF 数据服务还包括一个客户端组件，该组件负责跟踪您对客户端上的数据所做的更改，将这些更改推送回数据库，并在使用时保存它们实体框架模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:05:00.850

“ADO.NET 数据服务有助于创建更自然地将数据集成到 Web 的灵活服务。它通过实体数据模型依赖于数据的语义，并将这些数据服务作为可寻址 URI 上的 REST 样式资源呈现。所以交互可以通过简单的 HTTP（GET、SET、DELETE）发生。”

[谈话要点：ADO.NET 数据服务](http://blogs.msdn.com/b/publicsector/archive/2009/02/17/talking-points-asp-net-data-services.aspx)

# internationalization - 从 Scala 模板访问翻译的 i18n 消息（播放！国际化）

> ID：10063349
> 
> 赞同：2
> 
> 时间：2012-04-08T13:58:54.860
> 
> 标签：internationalization, playframework-2.0

在我的游戏中！2.0 应用程序我想定义以下语言：

```
# The application languages
# ~~~~~
application.langs=en-GB,de-DE,nl-NL 
```

我还创建了 3 个以相应语言代码结尾的文件：

```
Messages.en-GB
Messages.de-DE
Messages.nl-NL 
```

当我在没有任何请求翻译密钥的情况下启动应用程序时，我收到以下错误消息：

```
conf/application.conf: 12: Key 'de-DE' may not be followed by token: ',' (if you intended ',' to be part of the value for 'de-DE', try enclosing the value in double quotes) 
```

此外，当尝试从 Scala 模板访问消息时，我仍然看到相同的消息。我通过以下代码请求消息：

```
@Messages("login.page") 
```

我根据 Play 手册所做的上述更改：[http](http://www.playframework.org/documentation/2.0/JavaI18N) ://www.playframework.org/documentation/2.0/JavaI18N 。所以我有两个问题：

1.  如何设置默认语言并像在 1.2.4 中一样更改它（Lang.change("en-GB")）
2.  如何从 Scala 模板访问消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T09:36:06.943

在你的 scala 文件中使用：

```
<h1>@Messages("pack.key")</h1> 
```

在你的java文件中使用：

```
String title = Messages.get("pack.key"); 
```

不要忘记在您的语言列表周围添加引号：conf/application.conf

```
application.langs="en-GB,de-DE,nl-NL" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:59:57.517

在 Play 中无法更改语言！2.0，请参阅此讨论：[http ://groups.google.com/group/play-framework/browse_thread/thread/744d523c169333ac/5bfe28732a6efd89?show_docid=5bfe28732a6efd89](http://groups.google.com/group/play-framework/browse_thread/thread/744d523c169333ac/5bfe28732a6efd89?show_docid=5bfe28732a6efd89)

这张票：[https ://play.lighthouseapp.com/projects/82401-play-20/tickets/174-20-i18n-add-ability-to-define-implicit-lang-for-java-api#ticket- 174-4](https://play.lighthouseapp.com/projects/82401-play-20/tickets/174-20-i18n-add-ability-to-define-implicit-lang-for-java-api#ticket-174-4)

虽然，当您注册多种语言时，您应该将它们括在双引号中，如下所示：

```
application.langs="en-GB,de-DE,nl-NL" 
```

然后你可以像这样从 scala 模板访问它们：

```
@Messages.get("login.title") 
```

所以目前默认语言是文件**消息**中定义的语言（没有任何前缀！！）

或者您可以只使用 @Messages("not.logged.in")

# java - 递归函数JAVA中的返回值

> ID：10063350
> 
> 赞同：3
> 
> 时间：2012-04-08T13:59:03.653
> 
> 标签：java, search, return

我设计了一个递归调用自身的函数。但是 return 语句并没有做我想做的事情。我们已经通过 print 检查了是否达到了返回值，但它并没有返回到初始函数。它输入的语句：

```
if(depth==0 && pb.isGoalState()){
            System.out.println("!!!!!WOOOOOW!!!!!");
            return pb;
} 
```

println 显示得很好，但是当 pb 返回时，事情变得很奇怪。

当它回到函数时：

```
result = DLS(pb,depth); //never returns here!!!
System.out.println("Here: "+result.toString()); 
```

它永远不会打印出上面的打印件。我看不出有什么问题！我检查了我自己设计的其他方法。

```
private puzzleBoard IDS(String initial){
        puzzleBoard pb = new puzzleBoard(initial,0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());
        int depth=0;
        puzzleBoard result=new puzzleBoard("999999999",0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());
        while(true){//Repeat
            System.out.println("DP "+depth);
            result = DLS(pb,depth);
            System.out.println("Here: "+result.toString());
            if(result.isGoalState())
                return result;
            depth++;
        }

        }

    private puzzleBoard DLS(puzzleBoard pb, int depth){
        System.out.println("AVskilj depth "+depth+" "+(depth==0 && pb.isGoalState()));
        pb.printPuzzle();
        if(depth==0 && pb.isGoalState()){
            System.out.println("!!!!!WOOOOOW!!!!!");
            return pb;
        }
        else if(depth>0){
            for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
                puzzleBoard tmp;
                tmp=child.next();
                tmp.printPuzzle();
                DLS(tmp,(depth-1));
            }

        }
        else
            return new puzzleBoard("999999999",0,new Vector<Integer>(),new Vector<puzzleBoard>(),new Vector<puzzleBoard>());
        return pb;
        } 
```

* * *

所以我的问题现在仍然在这部分代码中

```
for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
                DLS(child.next(),(depth-1));
            } 
```

当我在 DLS(child.next(),(depth-1)); 之前不使用 return 时 它按预期遍历每个孩子，但由于缺少返回而不会存储该值。当我在它之前使用 return 时，它只会遍历迭代器中的第一个子节点并忽略其余部分，因为 return 语句终止了循环。

如何解决这个问题？我也想不出别的办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:08:51.760

在本次迭代中：

```
 for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
                puzzleBoard tmp;
                tmp=child.next();
                tmp.printPuzzle();
                DLS(tmp,(depth-1));
            } 
```

看线：

```
DLS(tmp,(depth-1)); 
```

DLS 返回一个`puzzleBoard`对象，但您不使用从该行返回的对象，因此返回的递归对象将被忽略。我没有验证您的方法的更正，但您应该从这里开始。顺便说一句，如果孩子板的数量很大，这个函数可能需要很长时间，因为你在每个孩子上调用它。

**编辑：**这是如何处理从 DLS 退回的板的示例：

```
 else if(depth>0){
       for(Iterator<puzzleBoard> child = generateSuccessorsIDS(pb).iterator(); child.hasNext();){
                    puzzleBoard tmp;
                    tmp=child.next();
                    tmp.printPuzzle();
                    puzzleBoard resultPB = DLS(tmp,(depth-1));

                    // mergre resultPB with current puzzle board (e.g. pb.addChild(resultPB));
                }

       return pb;
} 
```

# java - 如何放大java swing面板

> ID：10063351
> 
> 赞同：1
> 
> 时间：2012-04-08T13:59:04.020
> 
> 标签：java, swing

我创建了一些面板，其中包含许多组件作为图像文本...。现在我有一个问题。客户告诉我面板太小了。是否有一些选项可以放大整个面板，或者我必须一个一个放大组件？

更新：

由此：![在此处输入图像描述](../Images/02bd6963f9b720f6cfe50918abaef31e.png)

对此：![在此处输入图像描述](../Images/a0f4331b7b33761775a6b7aa2aba784e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:06:40.443

一切都取决于使用`LayoutManager`，

```
Is there some option to enlarge this whole panel or I have to enlarged 
components one by one 
```

-> 不，基本上这就是为什么存在那里的原因，`LayoutManager`其中大多数是专门为此创建的，，，，（也许没有），今天是最好的方法 `GridLayout``GridBagLayout``BoxLayout``glue``BorderLayout``MigLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:07:54.930

这取决于，如果你有一个 GridLayout 或某个 Layout 女巫设置所有组件以某种顺序，例如，相同距离的所有组件或所有组件像一个矩阵，如果你放大面板，所有组件都会放大它。如果没有，您必须手动放大。

# python - python，如何增量创建线程

> ID：10063353
> 
> 赞同：5
> 
> 时间：2012-04-08T13:59:08.760
> 
> 标签：python, multithreading

我有一个大约 60,000 个项目的列表 - 我想向数据库发送查询以检查它们是否存在以及它们是否返回一些计算结果。我运行了一个普通查询，在逐个遍历列表时，查询已经运行了 4 天。我想我可以使用线程模块来改进这一点。我做了这样的事情

```
if __name__ == '__main__':
  for ra, dec in candidates:
    t = threading.Thread(target=search_sl, args=(ra,dec, q))
    t.start()
  t.join() 
```

我只测试了 10 个项目，它运行良好 - 当我提交 60k 个项目的整个列表时，我遇到了错误，即“超出了最大会话数”。我想做的是一次创建可能 10 个线程。当第一束线程完成执行时，我发送另一个请求，依此类推。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T14:04:04.907

您可以尝试使用多处理模块中提供的进程池。以下是 python 文档中的示例：

```
from multiprocessing import Pool

def f(x):
    return x*x

if __name__ == '__main__':
    pool = Pool(processes=4)              # start 4 worker processes
    result = pool.apply_async(f, [10])    # evaluate "f(10)" asynchronously
    print result.get(timeout=1)           # prints "100" unless your computer is *very* slow
    print pool.map(f, range(10))          # prints "[0, 1, 4,..., 81]" 
```

[http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)

尝试增加进程数，直到达到系统可以支持的最大值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T14:52:30.333

### 在线程化之前改进你的查询（过早的优化是万恶之源！）

您的问题是在单个数据库上有 60,000 个不同的查询。对每个项目进行一次查询意味着打开连接和调用数据库游标会话的大量开销。

线程化这些查询可以加快您的进程，但会产生另一组问题，例如数据库过载和允许的最大会话数。

### 第一种方法：将许多项目 ID 加载到每个查询中

相反，请尝试改进您的查询。您可以编写一个查询来发送一长串产品并返回匹配项吗？也许是这样的：

```
SELECT item_id, * 
FROM   items
WHERE  item_id IN (id1, id2, id3, id4, id5, ....) 
```

Python 为这种 if 查询提供了方便的接口，因此`IN`子句可以使用 Pythonic 列表。这样，您可以将长长的项目列表分解为 60 个查询，每个查询有 1,000 个 id。

### 第二种方法：使用临时表

另一种有趣的方法是使用您的项目 ID 在数据库上创建一个临时表。只要连接存在，临时表就会持续存在，因此您不必担心清理工作。也许是这样的：

```
CREATE TEMPORARY TABLE 
           item_ids_list (id INT PRIMARY KEY); # Remember indexing! 
```

使用适当的 Python 库插入 id：

```
INSERT INTO item_ids_list   ...                # Insert your 60,000 items here 
```

得到你的结果：

```
SELECT * FROM items WHERE items.id IN (SELECT * FROM items_ids_list); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T14:20:27.717

首先，您只加入最后一个线程。不能保证最后完成。你应该这样使用：

```
from time import sleep
delay = 0.5
tlist = [threading.Thread(target=search_sl, args=(ra,dec, q)) for ra, dec in candidates ]
map(lambda t:t.start(), tlist)
while(any(map(lambda t:t.isAlive()))): sleep(delay) 
```

第二个问题是目前正在运行的 60K 线程需要非常庞大的硬件资源 :-) 最好将您的任务排队，然后由工作人员处理。必须限制工作线程的数量。像那样（没有测试过代码，但我希望这个想法很清楚）：

```
from Queue import Queue
from threading import Thread
from time import sleep
tasks = Queue()
map(tasks.put, candidates)
maxthreads = 50
delay = 0.1
try:
    threads = [Thread(target=search_sl, args=tasks.get()) \
               for i in xrange(0,maxthreads) ]
except Queue.Empty:
    pass
map(lambda t:t.start(), threads)

while not tasks.empty():
    threads = filter(lambda t:t.isAlive(), threads)
    while len(threads) < maxthreads:
        try:
            t = Thread(target=search_sl, args=tasks.get())
            t.start()
            threads.append(t)
        except Queue.Empty:
            break
    sleep(delay)

while(any(map(lambda t:t.isAlive(), threads))): sleep(delay) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:30:55.693

由于它是一个 IO 任务，因此线程或进程都不适合它。如果您需要并行化计算任务，您可以使用它们。因此，请保持现代感™，将类似的东西`gevent`用于并行 IO 密集型任务。

[http://www.gevent.org/intro.html#example](http://www.gevent.org/intro.html#example)

# java - 不同类型的二维数组

> ID：10063354
> 
> 赞同：15
> 
> 时间：2012-04-08T13:59:19.660
> 
> 标签：java, data-structures

我想创建一个二维数组，我想在其中存储数据库中的记录。所以可以说第一个是类型`int`，第二个是类型`String`（这里我只描述一个记录，所以基本上是 db 列的类型）。我该怎么做？数组是正确的数据结构吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T14:03:02.160

我不确定我是否在关注，但您可能正在寻找[`Map<Integer,String>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html). 或`Map<Integer,List<String>>`。[看看[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)和[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html) ]

`Map`允许将键 [ `Integer`] 关联到值 [`String`或`List`]。

`Map`还允许快速查找键及其附加值。

(*)`Map<Integer,List<String>>`如果你想附加一个`String`以上，你应该使用`Integer`，或者你可以使用 apache commons[`MultiMap`](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T14:02:04.470

数组只能包含一种类型。如果该类型恰好是，`Object`那么它可以存储`Object`及其任何子类型，但这听起来不像您在这里想要完成的。

听起来您所描述的是一个用于存储数据库信息的二维数组，数组中的每个元素都是其中一行中的一列。这**不是**记录数组，而是列数据数组。

相反，只需存储一维记录数组，其中数组的每个元素都是对整个 DB 行的引用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-08T14:08:41.410

你可以在这个的帮助下做同样的事情

```
Object[][] o = new Object[10][10];

o[0][0] = 1;
o[0][1] ="hello";

System.out.println(o[0][0]);
System.out.println(o[0][1]); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T14:03:14.483

您可以使用

```
HashMap<Integer, ArrayList<String>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-16T06:22:57.827

如果您只想拥有一列 String 数据和另一列 int 数据，您可以考虑这样做：

声明一个二维字符串数组

```
String[][] words = new String[][]; 
```

您的第一列可以包含所有字符串数据。第二列可以包含数字数据，但采用字符串的形式。您可能需要使用 Integer.toString() 和 Integer.parseInt() 方法来执行此操作

```
words[index][index] = Integer.toString(Integer.parseInt(args)); 
```

我不确定您究竟希望达到什么目标，但您可以考虑修改此代码段以满足您的需求

# c++ - MSBuild 是否需要安装 Visual Studio？

> ID：10063355
> 
> 赞同：5
> 
> 时间：2012-04-08T13:59:21.640
> 
> 标签：c++, visual-studio-2010, visual-c++, msbuild, build-automation

我正在使用 Atlassian Bamboo 设置构建服务器。MSBuild 包含在 .NET 框架中，所以我相信我至少可以在没有 VS2010 的情况下构建 .NET 应用程序。

我们主要使用 C++ 开发 - 我需要在构建服务器上安装 Visual Studio 来构建 .vcxproj C++ 项目，还是只能使用 MSBuild 来完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T14:04:58.150

不，您只需要工具集（库），请参阅：http: [//msdn.microsoft.com/en-us/library/dd293607%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd293607%28v=vs.100%29.aspx)

# database - Perl：为具有两列的选项卡文件创建索引

> ID：10063358
> 
> 赞同：0
> 
> 时间：2012-04-08T13:59:53.453
> 
> 标签：database, perl, indexing, samtools, bam

我有一个巨大的制表符分隔文件，其中包含多达 2 亿行（通常约为 2000 万）和两列：第一列包含一个最多 40 个字符的 ASCII 字，第二列包含一个整数。

我想做以下步骤：

1.  按第一列排序
2.  删除重复行以使所有行唯一
3.  读出第一列中给定条目的所有行

我有 3 GB 的内存限制（因此将所有数据读入散列将不起作用），无限的硬盘空间并希望在单核上运行脚本。我打算并行运行几个脚本，所以对硬盘的读写操作不应该太高。

考虑到文件的大小，应该如何继续执行我的脚本（在 Perl 中）？

考虑到文件的大小，您建议第一步使用哪种算法？

第 3 步是我认为最复杂的部分。我该如何处理？我不熟悉索引算法。你能推荐一个最适合这个问题的吗？有没有我可以使用的 Perl 模块？

首先将文件转换为二进制文件是否有意义（例如将 SAM 转换为 BAM）？如果是，您是否有任何转换和处理此类文件的说明或算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:14:33.917

将整个文件读入[SQLite](http://www.sqlite.org/)数据库将是我的第一次尝试。

像这样定义表：

```
create table mytuples (
    mykey varchar(40),
    myval integer,
    constraint tuple_pk primary key(mykey, myval) on conflict ignore
); 
```

一个使用[DBI](http://search.cpan.org/perldoc/DBI)忽略插入错误的简单脚本应该可以做到这一点。

### 未经测试，并省略错误检查

```
#!/usr/bin/env perl

use strict; use warnings;
use autodie;

use DBI;

my ($infile) = (@ARGV);

open my $in, '<', $infile;

my $dbh = DBI->connect('dbi:SQLite:some.db', undef, undef, {
        AutoCommit => 0,
        RaiseError => 0,
    },
);

while (my $line = <$in>) {
    my ($key, $val) = split ' ', $line;
    $dbh->do(q{INSERT INTO mytuples VALUES(?, ?)}, undef, $key, $val);
}

$dbh->commit;
$dbh->disconnect; 
```

这最终可能比初始处理的命令行慢，但您可能会欣赏使用 SQL 的灵活性`sort`。`grep`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:27:26.963

使用系统排序对文件进行排序。最新的 GNU Sort 有一个并行选项。运行 uniq ，然后一次一行地读取已排序的文件，并注意第一列何时更改很容易。排序使用排序/合并算法，将文件分成更小的块进行排序然后合并，所以只要你有足够的磁盘，除了速度之外内存不是问题。

# css - 我该如何扩展这个标签？

> ID：10063360
> 
> 赞同：1
> 
> 时间：2012-04-08T14:00:25.437
> 
> 标签：css

这是我今天早些时候问题的简化版本，因为我没有得到满意的答复。

我在这个小提琴中有一个 HTML 和 CSS 代码：http: [//jsfiddle.net/wNGHz/](http://jsfiddle.net/wNGHz/)

调整父框架的大小时，如何`<input>`自动调整大小？

笔记：

*   我更喜欢只使用 CSS 而不是 JavaScript。
*   `<input>`应该与父级的左右边缘有 100px 的距离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:14:55.977

> @thirtydot 在语义上我想要一个更简单的 HTML。我可以换 行`<input>`，`<div>`但是为了给另一个元素添加样式而添加一个元素只是很奇怪。我想知道是否有人有更好的解决方案。

不幸的是，没有更好的方法。`input`它与被[替换元素](http://reference.sitepoint.com/css/replacedelements)的事实有关，这意味着它与非替换元素（例如`div`.

一个区别是它`position: absolute; left: 0; right: 0`在 an 上的工作方式`input`与它在`div`（WebKit 除外）上的工作方式不同。

最好的解决方法是将 包装`input`在 a 中`div`：

[http://jsfiddle.net/thirtydot/wNGHz/6/](http://jsfiddle.net/thirtydot/wNGHz/6/)

```
<div class="inputContainer">
    <input type="text" value="test" />
</div>

.inputContainer {
    position: absolute;
    left: 50px;
    right: 50px;
}
input {
    width: 100%;
    background-color: red;
    color: white;
    border: none;
} 
```

当你有时，`input { width: 100%; }`通常最好也添加`box-sizing: border-box`, 以使任何`padding`和`border`on`input`被计算在内`width: 100%`：http: [//jsfiddle.net/thirtydot/wNGHz/7/](http://jsfiddle.net/thirtydot/wNGHz/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:49:07.943

您可以以更好的方式做到这一点。

```
<div class="inputContainer">
<input type="text" value="test" />
</div>

input {
width: 100%;
margin:0 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:01:41.453

我知道的唯一纯 CSS 方式是在以下位置添加宽度：http `%`: [//jsfiddle.net/PeeHaa/wNGHz/1/](http://jsfiddle.net/PeeHaa/wNGHz/1/)

# apache2 - 带有 Apache2 SSL 的 Spring WebFlow2 前端生成 http url 而不是 https

> ID：10063364
> 
> 赞同：0
> 
> 时间：2012-04-08T14:01:16.757
> 
> 标签：apache2, tomcat7, spring-webflow

我有面向 Spring webapp 的 Apache2 SSL，如下所示：

ProxyPass / [http://localhost:8080/](http://localhost:8080/)

ProxyPassReverse / [http://localhost:8080/](http://localhost:8080/)

一切正常...我的意思是所有链接...都是正确的，并且通常 webapp 可以正常工作，因此问题不在于应用程序或 SSL ..

除了启动/取消网络流：它们生成 http URL 而不是 https://

我在这里找到了一个主题：

forum.springsource.org/showthread.php?70730-Webflow-2-0-and-reverse-proxy

他们说这不是 Spring WebFlow 的问题......

在这种情况下有什么解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:46:08.857

如果所有对 Tomcat 连接器的请求都是通过在 httpd 终止的 SSL 接收的，那么您可以将以下内容添加到连接器中：

```
scheme="https" secure="true" 
```

这告诉 Tomcat 将连接视为通过 SSL 连接直接到 Tomcat 接收。这在通过 http 代理时是必需的，因为 http 中没有将 SSL 信息传递给 Tomcat 的机制。有一些方法可以通过 http 标头传递这些信息。查看 Tomcat 中的 SSLValve 文档。

或者，使用 AJP 将起作用，因为 AJP 将 SSL 信息从 httpd 传递到 Tomcat。

# php - php需要相对路径

> ID：10063370
> 
> 赞同：1
> 
> 时间：2012-04-08T14:02:44.807
> 
> 标签：php, relative-path, include-path

当我在索引页面中需要任何 PHP 文件时，我看到一个错误：

我的配置文件：

```
define( "APP_ROOT", realpath( dirname( __FILE__ ) ).'/' ); 
```

我的包含/要求文件放置：

```
localhost/test/includes/ 
```

失败的代码和错误：

```
require_once(APP_ROOT .'includes/test1.php');
require_once(APP_ROOT .'includes/test2.php');

failed to open stream: No such file or directory in C:\xampp\htdocs\test\includes\test.php on line 38 
```

我的问题是什么？我怎样才能为任何相对路径解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:09:50.940

看起来你的文件是从 /test/includes 调用的，所以 APP_PATH 是 C:\xampp\htdocs\test\includes\，所以你试图要求 C:\xampp\htdocs\test\includes\includes/test1.php等等。

回显 APP_PATH 并查看它打印的内容。

你最好让所有的包含相互关联，然后你只需要玩游戏从你的 index.php 导入一个 common.php 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:12:37.787

也许`realpath(dirname(__DIR__))`

# sql - 用于将 nvarchar 字符串转换为 UTF-8 的 T-SQL 代码（用于 URL 百分比编码）

> ID：10063371
> 
> 赞同：4
> 
> 时间：2012-04-08T14:02:52.317
> 
> 标签：sql, tsql, reporting-services, uri, utf

我需要为 SSRS 报告生成一个 URL 字符串（以便将其与我们的 CRM 软件链接）。报告名称为希伯来语。当我将 URL 字符串（带有 Heb）发送到 Internet Explorer 时，它无法识别该地址，因为它没有使用百分比编码（顺便说一句，它在 Firefox 中工作正常）。（以这种方式仅发送带有英文的 URL 可以正常工作。）

无论如何，我尝试执行编码。我成功地将其转换为带有 UNICODE 字符的 URI。我需要获取**UTF-8**中的 URI 。例如，字母 'י' 应转换为 '%d7%99' 而不是 '%05%D9'。

我提供了一个链接： [带有代码的表格，供您使用（如果需要）。](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=1424&unicodeinhtml=hex)

我需要 1 个字符的转换\编码功能。我可以自己构建完整字符串的其余脚本/函数。

我使用了一个使用 master.sys.fn_varbintohexstr 函数的脚本。不过，正如我所说，结果不适合 IE。

以下：

```
SELECT master.sys.fn_varbintohexstr((CAST (N'י' AS varbinary))) 
```

将得到 0xd905，我将其格式化为百分比编码。我应该得到'd7 99'。

> 总结：我将一个希伯来字符转换为 URI 百分比编码。我得到一个 unicode 结果。我希望 > 得到一个 utf8 结果。输入 = 'י'。当前输出 = %d9。想要的输出 = %d7%99

我怎样才能得到这些结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:16:12.447

我不得不处理一些类似的问题，您可能希望考虑两种方法；第一个是在查询中将您的数据转换为 HTML，然后在 RDL 中将结果呈现为 HTML，第二个是使用 JQuery 在客户端识别那些具有不正确值的单元格，然后转换该单元格（再次使用 JQuery ）。第二个选项的好处是，如果服务器渲染在 Firefox 上工作，则不会调用转换开销。不利的一面是，如果您不将报告呈现为 HTML，它将无法正常工作。

对于第一个选项，在 select 语句中，您需要更改相应的列以生成看起来像的 nvarchar 值

`<span style="font=yourfont;" charset="UTF-8"><a href="yourdestination.com" target="_blank">linkname</a></span>`

使用该字符串作为数据，然后将其分配给适当的列（或单元格，根据需要）

在 RDL 设计器中，将字段的占位符拖到设计器上，然后右键单击占位符并选择[占位符属性](http://forums.asp.net/t/1603517.aspx/1)，然后您可以选择将内容显示为 HTML。

# stored-procedures - Code First 中的存储过程与不同的表

> ID：10063376
> 
> 赞同：0
> 
> 时间：2012-04-08T14:03:09.173
> 
> 标签：stored-procedures

我正在使用 Code First 并使用 EF 4.1。我对使用存储过程有疑问。假设如果我的存储过程从 2 个或 3 个表中获取值，我将如何获得结果？我怎样才能检索结果？结果的类型是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:02:03.910

好吧，我不认为，使用 Code First 方法，您将能够获得存储过程。实际上，代码优先/存储过程就像矛盾修饰法。查看此博客：http: [//blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-release-candidate-available.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/15/ef-4-1-release-candidate-available.aspx)

在此博客中，请参阅该部分。

```
What’s Not in EF 4.1?
Stored Procedure support in Code First 
```

还有一种根本不使用存储过程的思想，看看这个博客，它很有趣:) [http://weblogs.asp.net/fbouma/archive/2003/11/18/38178.aspx](http://weblogs.asp.net/fbouma/archive/2003/11/18/38178.aspx)

# wpf - 环绕面板中用户控件的 WPF MVVM 动态集合

> ID：10063377
> 
> 赞同：0
> 
> 时间：2012-04-08T14:03:12.643
> 
> 标签：wpf, mvvm

我是 WPF 新手，但创建了一个带有包装面板的窗口，其中包含从后面的代码动态添加的用户控件实例的集合。每个用户控件最终将显示从数据库调用返回的行中的数据。我想让它遵循 MVVM，但在架构上有点卡住。我想我需要有一个用户控件的视图模型和一个拥有用户控件视图模型的 observablecollection 的窗口的视图模型。如何将其绑定到视图侧的包装面板，以便包装面板看到用户控件视图模型的集合并知道为集合中的每个实例建立用户控件？

我认为一旦这一切都正确绑定，我可以让后台工作人员定期查询数据库并创建/更新用户控件视图模型对象，如果我从 INotifyPropertyChanged 继承并在我的用户控件视图模型中触发属性更改事件一切都应该根据绑定进行更新。这听起来正确吗？

我已经看到了一些基本示例，例如绑定到列表框的字符串的 observablecollection，但我在将其应用于更复杂的情况时遇到了麻烦。任何关于一般架构或我应该从哪里开始的建议都非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T23:12:28.840

基本上，您需要一个可枚举控件，该控件为 ObservableCollection 中的每个元素都有一个项目。控件的项目将需要模板化以使用您的自定义控件显示数据

为此，请创建一个 ObservableCollection 来保存您的数据对象并将其用作 ListBox 的 ItemsSource。然后需要更改 ListBox 以在 WrapPanel 而不是默认布局中显示其项目。修改 ListBox 的 ItemTemplate 以对每个列表项使用您的自定义用户控件。

视图模型：

```
public class WindowViewModel
{
     public ObservableCollection<MyDatabaseObject> DatabaseObjects { get; set; }
}

public class MyDatabaseObject : INotifyPropertyChanged
{
     public event PropertyChangedEventHandler PropertyChanged;

     public string DbName 
     { 
         get { return _dbName; }
         set { 
                _dbName = value;
                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("dbName");
         } 
     }

     private _dbName;
} 
```

xml:

```
 <Grid>
    <ListBox ItemsSource="{Binding DatabaseObjects}">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <MyUserControl Title="{Binding DbName}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T21:33:55.913

你在找`ItemsControl`课吗？为您的ItemUserControlViewModel`ItemsControl.ItemTemplate`设置为 a `DataTemplate`（-> 项目用户控件视图）。并`ItemsControl.ItemsPanel`设置为`ItemsPanelTemplate`a `WrapPanel`。

ItemControl 的`ItemsSource`属性将绑定到您的`ObservableCollection<ItemUserControlViewModel>`from `WindowViewModel`。

# javascript - 不使用 jQuery 的平滑滚动

> ID：10063380
> 
> 赞同：88
> 
> 时间：2012-04-08T14:03:24.307
> 
> 标签：javascript, html

我正在编写一个页面，我只想对 UI 使用原始 JavaScript 代码，而不受插件或框架的任何干扰。

现在，我正在努力寻找一种无需 jQuery 即可顺利滚动页面的方法。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2017-04-30T09:00:19.910

JavaScript 中的原生浏览器平滑滚动是这样的：

```
// scroll to specific values,
// same as window.scroll() method.
// for scrolling a particular distance, use window.scrollBy().
window.scroll({
  top: 2500, 
  left: 0, 
  behavior: 'smooth' 
});

// scroll certain amounts from current position 
window.scrollBy({ 
  top: 100, // negative value acceptable
  left: 0, 
  behavior: 'smooth' 
});

// scroll to a certain element
document.querySelector('.hello').scrollIntoView({ 
  behavior: 'smooth' 
}); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-08T14:07:36.240

试试这个[平滑滚动演示](http://web.archive.org/web/20140213105950/http://itnewb.com/tutorial/Creating-the-Smooth-Scroll-Effect-with-JavaScript)，或类似的算法：

1.  使用获取当前顶部位置`self.pageYOffset`
2.  获取元素的位置，直到您要滚动到的位置：`element.offsetTop`
3.  做一个 for 循环到达那里，这将非常快，或者使用计时器来平滑滚动到那个位置`window.scrollTo`

* * *

另请参阅此问题的[其他流行答案](https://stackoverflow.com/a/19808153/59087)。

* * *

安德鲁约翰逊的原始代码：

```
function currentYPosition() {
    // Firefox, Chrome, Opera, Safari
    if (self.pageYOffset) return self.pageYOffset;
    // Internet Explorer 6 - standards mode
    if (document.documentElement && document.documentElement.scrollTop)
        return document.documentElement.scrollTop;
    // Internet Explorer 6, 7 and 8
    if (document.body.scrollTop) return document.body.scrollTop;
    return 0;
}

function elmYPosition(eID) {
    var elm = document.getElementById(eID);
    var y = elm.offsetTop;
    var node = elm;
    while (node.offsetParent && node.offsetParent != document.body) {
        node = node.offsetParent;
        y += node.offsetTop;
    } return y;
}

function smoothScroll(eID) {
    var startY = currentYPosition();
    var stopY = elmYPosition(eID);
    var distance = stopY > startY ? stopY - startY : startY - stopY;
    if (distance < 100) {
        scrollTo(0, stopY); return;
    }
    var speed = Math.round(distance / 100);
    if (speed >= 20) speed = 20;
    var step = Math.round(distance / 25);
    var leapY = stopY > startY ? startY + step : startY - step;
    var timer = 0;
    if (stopY > startY) {
        for ( var i=startY; i<stopY; i+=step ) {
            setTimeout("window.scrollTo(0, "+leapY+")", timer * speed);
            leapY += step; if (leapY > stopY) leapY = stopY; timer++;
        } return;
    }
    for ( var i=startY; i>stopY; i-=step ) {
        setTimeout("window.scrollTo(0, "+leapY+")", timer * speed);
        leapY -= step; if (leapY < stopY) leapY = stopY; timer++;
    }
} 
```

* * *

相关链接：

*   [https://www.sitepoint.com/smooth-scrolling-vanilla-javascript/](https://www.sitepoint.com/smooth-scrolling-vanilla-javascript/)
*   [https://github.com/zengabor/zenscroll/blob/dist/zenscroll.js](https://github.com/zengabor/zenscroll/blob/dist/zenscroll.js)
*   [https://github.com/cferdinandi/smooth-scroll/blob/master/src/js/smooth-scroll.js](https://github.com/cferdinandi/smooth-scroll/blob/master/src/js/smooth-scroll.js)
*   [https://github.com/alicelieutier/smoothScroll/blob/master/smoothscroll.js](https://github.com/alicelieutier/smoothScroll/blob/master/smoothscroll.js)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-08-29T18:38:38.743

## 算法

滚动一个元素需要`scrollTop`随着时间的推移改变它的值。对于给定的时间点，计算一个新`scrollTop`值。要平滑地制作动画，请使用[平滑步长算法](http://en.wikipedia.org/wiki/Smoothstep)进行插值。

计算`scrollTop`如下：

```
var point = smooth_step(start_time, end_time, now);
var scrollTop = Math.round(start_top + (distance * point)); 
```

在哪里：

*   `start_time`是动画开始的时间；
*   `end_time`是动画结束的时间`(start_time + duration)`；
*   `start_top`是`scrollTop`开始时的值；和
*   `distance`是期望的结束值和起始值之间的差`(target - start_top)`。

一个强大的解决方案应该检测动画何时被中断，等等。阅读我关于[没有 jQuery](https://coderwall.com/p/hujlhg)的平滑滚动的文章了解详细信息。

## 演示

请参阅[JSFiddle](http://jsfiddle.net/0uwg96sh/)。

## 执行

编码：

```
/**
    Smoothly scroll element to the given target (element.scrollTop)
    for the given duration

    Returns a promise that's fulfilled when done, or rejected if
    interrupted
 */
var smooth_scroll_to = function(element, target, duration) {
    target = Math.round(target);
    duration = Math.round(duration);
    if (duration < 0) {
        return Promise.reject("bad duration");
    }
    if (duration === 0) {
        element.scrollTop = target;
        return Promise.resolve();
    }

    var start_time = Date.now();
    var end_time = start_time + duration;

    var start_top = element.scrollTop;
    var distance = target - start_top;

    // based on http://en.wikipedia.org/wiki/Smoothstep
    var smooth_step = function(start, end, point) {
        if(point <= start) { return 0; }
        if(point >= end) { return 1; }
        var x = (point - start) / (end - start); // interpolation
        return x*x*(3 - 2*x);
    }

    return new Promise(function(resolve, reject) {
        // This is to keep track of where the element's scrollTop is
        // supposed to be, based on what we're doing
        var previous_top = element.scrollTop;

        // This is like a think function from a game loop
        var scroll_frame = function() {
            if(element.scrollTop != previous_top) {
                reject("interrupted");
                return;
            }

            // set the scrollTop for this frame
            var now = Date.now();
            var point = smooth_step(start_time, end_time, now);
            var frameTop = Math.round(start_top + (distance * point));
            element.scrollTop = frameTop;

            // check if we're done!
            if(now >= end_time) {
                resolve();
                return;
            }

            // If we were supposed to scroll but didn't, then we
            // probably hit the limit, so consider it done; not
            // interrupted.
            if(element.scrollTop === previous_top
                && element.scrollTop !== frameTop) {
                resolve();
                return;
            }
            previous_top = element.scrollTop;

            // schedule next frame for execution
            setTimeout(scroll_frame, 0);
        }

        // boostrap the animation process
        setTimeout(scroll_frame, 0);
    });
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-20T21:19:36.567

我在这里做了一个没有 jQuery 的例子：http: [//codepen.io/sorinnn/pen/ovzdq](http://codepen.io/sorinnn/pen/ovzdq)

```
/**
    by Nemes Ioan Sorin - not an jQuery big fan 
    therefore this script is for those who love the old clean coding style  
    @id = the id of the element who need to bring  into view

    Note : this demo scrolls about 12.700 pixels from Link1 to Link3
*/
(function()
{
      window.setTimeout = window.setTimeout; //
})();

      var smoothScr = {
      iterr : 30, // set timeout miliseconds ..decreased with 1ms for each iteration
        tm : null, //timeout local variable
      stopShow: function()
      {
        clearTimeout(this.tm); // stopp the timeout
        this.iterr = 30; // reset milisec iterator to original value
      },
      getRealTop : function (el) // helper function instead of jQuery
      {
        var elm = el; 
        var realTop = 0;
        do
        {
          realTop += elm.offsetTop;
          elm = elm.offsetParent;
        }
        while(elm);
        return realTop;
      },
      getPageScroll : function()  // helper function instead of jQuery
      {
        var pgYoff = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;
        return pgYoff;
      },
      anim : function (id) // the main func
      {
        this.stopShow(); // for click on another button or link
        var eOff, pOff, tOff, scrVal, pos, dir, step;

        eOff = document.getElementById(id).offsetTop; // element offsetTop

        tOff =  this.getRealTop(document.getElementById(id).parentNode); // terminus point 

        pOff = this.getPageScroll(); // page offsetTop

        if (pOff === null || isNaN(pOff) || pOff === 'undefined') pOff = 0;

        scrVal = eOff - pOff; // actual scroll value;

        if (scrVal > tOff) 
        {
          pos = (eOff - tOff - pOff); 
          dir = 1;
        }
        if (scrVal < tOff)
        {
          pos = (pOff + tOff) - eOff;
          dir = -1; 
        }
        if(scrVal !== tOff) 
        {
          step = ~~((pos / 4) +1) * dir;

          if(this.iterr > 1) this.iterr -= 1; 
          else this.itter = 0; // decrease the timeout timer value but not below 0
          window.scrollBy(0, step);
          this.tm = window.setTimeout(function()
          {
             smoothScr.anim(id);  
          }, this.iterr); 
        }  
        if(scrVal === tOff) 
        { 
          this.stopShow(); // reset function values
          return;
        }
    }
 } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-09T13:48:55.290

现代浏览器支持 CSS“滚动行为：平滑”属性。因此，我们甚至根本不需要任何 Javascript。只需将其添加到 body 元素，并使用通常的锚点和链接。 [滚动行为 MDN 文档](https://developer.mozilla.org/en/docs/Web/CSS/scroll-behavior)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-08-16T11:20:12.307

您可以使用新的 **滚动行为**CSS 属性。

例如，将以下行添加到您的 CSS。

```
html{
    scroll-behavior:smooth;
}
```

这将产生原生的平滑滚动功能。

在此处查看[演示](https://shakiltech.com)

所有现代浏览器都支持**滚动行为**属性。

[阅读有关滚动行为的更多信息](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-21T18:08:24.767

我最近开始在无法选择 jQuery 的情况下解决这个问题，所以我在这里记录我的解决方案只是为了后代。

```
var scroll = (function() {

    var elementPosition = function(a) {
        return function() {
            return a.getBoundingClientRect().top;
        };
    };

    var scrolling = function( elementID ) {

        var el = document.getElementById( elementID ),
            elPos = elementPosition( el ),
            duration = 400,
            increment = Math.round( Math.abs( elPos() )/40 ),
            time = Math.round( duration/increment ),
            prev = 0,
            E;

        function scroller() {
            E = elPos();

            if (E === prev) {
                return;
            } else {
                prev = E;
            }

            increment = (E > -20 && E < 20) ? ((E > - 5 && E < 5) ? 1 : 5) : increment;

            if (E > 1 || E < -1) {

                if (E < 0) {
                    window.scrollBy( 0,-increment );
                } else {
                    window.scrollBy( 0,increment );
                }

                setTimeout(scroller, time);

            } else {

                el.scrollTo( 0,0 );

            }
        }

        scroller();
    };

    return {
        To: scrolling
    }

})();

/* usage */
scroll.To('elementID'); 
```

该`scroll()`函数使用显示[模块模式](https://stackoverflow.com/a/5647397/4746328)将目标元素的 id 传递给其`scrolling()`函数 via `scroll.To('id')`，该函数设置函数使用的值`scroller()`。

**分解**

在`scrolling()`：

*   `el`: 目标 DOM 对象
*   `elPos`：返回一个函数，通过`elememtPosition()`该函数每次调用目标元素相对于页面顶部的位置。
*   `duration`: 转换时间，以毫秒为单位。
*   `increment`：将目标元素的起始位置分为40步。
*   `time`：设置每一步的时间。
*   `prev`: 目标元素在`scroller()`.
*   `E`: 保存目标元素在 中的位置`scroller()`。

实际工作由`scroller()`继续调用自身（通过`setTimeout()`）的函数完成，直到目标元素位于页面顶部或页面无法再滚动。

每次`scroller()`调用它都会检查目标元素的当前位置（保存在变量中`E`），如果它是`> 1`OR`< -1`并且页面是否仍然可滚动，则将窗口移动`increment`像素 - 向上或向下取决于`E`是正值还是负值。什么时候`E`既不是`> 1`OR `< -1`，也不是`E`===`prev`函数停止。我`DOMElement.scrollTo()`在完成时添加了该方法，只是为了确保目标元素位于窗口顶部（并不是说您会注意到它超出了一小部分像素！）。

第`if`2 行的语句通过检查其先前位置 ( )`scroller()`来检查页面是否正在滚动（在目标可能朝向页面底部并且页面无法进一步滚动的情况下）。 `E``prev`

它下面的三元条件在接近零时减小该`increment`值。`E`这会阻止页面以一种方式超调，然后弹回以超调另一种方式，然后弹回以再次超调另一种方式，乒乓风格，无穷大甚至更远。

如果您的页面超过 c.4000px 高，您可能希望增加三元表达式的第一个条件（此处为 +/-20）和/或设置该`increment`值的除数（此处为 40）中的值。

玩弄`duration`，设置的除数`increment`，以及三元条件下的值`scroller()`应该允许您定制功能以适合您的页面。

*   [JSFiddle](https://jsfiddle.net/BnPck/rdetuhyL/1/)

*   *NBTested 在 Lubuntu 上的最新版本的 Firefox 和 Chrome 以及 Windows8 上的 Firefox、Chrome 和 IE 中进行测试。*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-16T22:10:23.543

我做了这样的东西。我不知道它是否在 IE8 中工作。在 IE9、Mozilla、Chrome、Edge 中测试。

```
function scroll(toElement, speed) {
  var windowObject = window;
  var windowPos = windowObject.pageYOffset;
  var pointer = toElement.getAttribute('href').slice(1);
  var elem = document.getElementById(pointer);
  var elemOffset = elem.offsetTop;

  var counter = setInterval(function() {
    windowPos;

    if (windowPos > elemOffset) { // from bottom to top
      windowObject.scrollTo(0, windowPos);
      windowPos -= speed;

      if (windowPos <= elemOffset) { // scrolling until elemOffset is higher than scrollbar position, cancel interval and set scrollbar to element position
        clearInterval(counter);
        windowObject.scrollTo(0, elemOffset);
      }
    } else { // from top to bottom
      windowObject.scrollTo(0, windowPos);
      windowPos += speed;

      if (windowPos >= elemOffset) { // scroll until scrollbar is lower than element, cancel interval and set scrollbar to element position
        clearInterval(counter);
        windowObject.scrollTo(0, elemOffset);
      }
    }

  }, 1);
}

//call example

var navPointer = document.getElementsByClassName('nav__anchor');

for (i = 0; i < navPointer.length; i++) {
  navPointer[i].addEventListener('click', function(e) {
    scroll(this, 18);
    e.preventDefault();
  });
} 
```

**描述**

*   `pointer`— 获取元素并检查它是否具有属性“href”，如果是，则去掉“#”
*   `elem`——不带“#”的指针变量
*   `elemOffset`—“滚动到”元素从页面顶部的偏移量

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-31T19:32:53.920

您可以使用

```
document.querySelector('your-element').scrollIntoView({behavior: 'smooth'}); 
```

如果要滚动到页面顶部，只需在顶部放置一个空元素，然后平滑滚动到该元素即可。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-01T07:54:26.650

```
<script>
var set = 0;

function animatescroll(x, y) {
    if (set == 0) {
        var val72 = 0;
        var val73 = 0;
        var setin = 0;
        set = 1;

        var interval = setInterval(function() {
            if (setin == 0) {
                val72++;
                val73 += x / 1000;
                if (val72 == 1000) {
                    val73 = 0;
                    interval = clearInterval(interval);
                }
                document.getElementById(y).scrollTop = val73;
            }
        }, 1);
    }
}
</script> 
```

**x** = scrollTop
**y** = 用于滚动的 div 的 id

**注意：** 为了让 body 滚动，给 body 一个 ID。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-04T20:37:05.683

JavaScript 中有许多不同的平滑滚动方法。下面列出了最常见的。

* * *

要在准确的时间内滚动到某个位置，[`window.requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)可以使用，每次计算出合适的当前位置。不支持[`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout)时可以使用类似的效果。`requestAnimationFrame`（要使用以下功能滚动到特定元素，只需将位置设置为`element.offsetTop`。）

```
/*
   @param pos: the y-position to scroll to (in pixels)
   @param time: the exact amount of time the scrolling will take (in milliseconds)
*/
function scrollToSmoothly(pos, time) {
    var currentPos = window.pageYOffset;
    var start = null;
    if(time == null) time = 500;
    pos = +pos, time = +time;
    window.requestAnimationFrame(function step(currentTime) {
        start = !start ? currentTime : start;
        var progress = currentTime - start;
        if (currentPos < pos) {
            window.scrollTo(0, ((pos - currentPos) * progress / time) + currentPos);
        } else {
            window.scrollTo(0, currentPos - ((currentPos - pos) * progress / time));
        }
        if (progress < time) {
            window.requestAnimationFrame(step);
        } else {
            window.scrollTo(0, pos);
        }
    });
} 
```

演示：

```
/*
   @param time: the exact amount of time the scrolling will take (in milliseconds)
   @param pos: the y-position to scroll to (in pixels)
*/
function scrollToSmoothly(pos, time) {
    var currentPos = window.pageYOffset;
    var start = null;
    if(time == null) time = 500;
    pos = +pos, time = +time;
    window.requestAnimationFrame(function step(currentTime) {
        start = !start ? currentTime : start;
        var progress = currentTime - start;
        if (currentPos < pos) {
            window.scrollTo(0, ((pos - currentPos) * progress / time) + currentPos);
        } else {
            window.scrollTo(0, currentPos - ((currentPos - pos) * progress / time));
        }
        if (progress < time) {
            window.requestAnimationFrame(step);
        } else {
            window.scrollTo(0, pos);
        }
    });
}
```

```
<button onClick="scrollToSmoothly(document.querySelector('div').offsetTop, 300)">
Scroll To Div (300ms)
</button>
<button onClick="scrollToSmoothly(document.querySelector('div').offsetTop, 200)">
Scroll To Div (200ms)
</button>
<button onClick="scrollToSmoothly(document.querySelector('div').offsetTop, 100)">
Scroll To Div (100ms)
</button>
<button onClick="scrollToSmoothly(document.querySelector('div').offsetTop, 50)">
Scroll To Div (50ms)
</button>
<button onClick="scrollToSmoothly(document.querySelector('div').offsetTop, 1000)">
Scroll To Div (1000ms)
</button>
<div style="margin: 500px 0px;">
DIV<p/>
<button onClick="scrollToSmoothly(0, 500)">
Back To Top
</button>
<button onClick="scrollToSmoothly(document.body.scrollHeight)">
Scroll To Bottom
</button>
</div>
<div style="margin: 500px 0px;">
</div>
<button style="margin-top: 100px;" onClick="scrollToSmoothly(500, 3000)">
Scroll To y-position 500px (3000ms)
</button>
```

对于更复杂的情况，可以使用[SmoothScroll.js 库](https://github.com/LieutenantPeacock/SmoothScroll)，它可以处理垂直和水平平滑滚动、在其他容器元素内滚动、不同的缓动行为、从当前位置相对滚动等等。

```
var easings = document.getElementById("easings");
for(var key in smoothScroll.easing){
    if(smoothScroll.easing.hasOwnProperty(key)){
        var option = document.createElement('option');
        option.text = option.value = key;
        easings.add(option);
    }
}
document.getElementById('to-bottom').addEventListener('click', function(e){
    smoothScroll({yPos: 'end', easing: easings.value, duration: 2000});
});
document.getElementById('to-top').addEventListener('click', function(e){
    smoothScroll({yPos: 'start', easing: easings.value, duration: 2000});
});
```

```
<script src="https://cdn.jsdelivr.net/gh/LieutenantPeacock/SmoothScroll@1.2.0/src/smoothscroll.min.js" integrity="sha384-UdJHYJK9eDBy7vML0TvJGlCpvrJhCuOPGTc7tHbA+jHEgCgjWpPbmMvmd/2bzdXU" crossorigin="anonymous"></script>
<!-- Taken from one of the library examples -->
Easing: <select id="easings"></select>
<button id="to-bottom">Scroll To Bottom</button>
<br>
<button id="to-top" style="margin-top: 5000px;">Scroll To Top</button>
```

或者，您可以传递一个选项对象，[`window.scroll`](https://developer.mozilla.org/en-US/docs/Web/API/window/scroll)该对象滚动到特定的 x 和 y 位置，并[`window.scrollBy`](https://developer.mozilla.org/en-US/docs/Web/API/window/scrollBy)从当前位置滚动一定量：

```
// Scroll to specific values
// scrollTo is the same
window.scroll({
  top: 2500, 
  left: 0, 
  behavior: 'smooth' 
});

// Scroll certain amounts from current position 
window.scrollBy({ 
  top: 100, // could be negative value
  left: 0, 
  behavior: 'smooth' 
}); 
```

演示：

```
<button onClick="scrollToDiv()">Scroll To Element</button>
<div style="margin: 500px 0px;">Div</div>
<script>
function scrollToDiv(){
var elem = document.querySelector("div");
window.scroll({
      top: elem.offsetTop, 
      left: 0, 
      behavior: 'smooth' 
});
}
</script>
```

如果您只需要滚动到一个元素，而不是文档中的特定位置，您可以使用[`Element.scrollIntoView`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)with `behavior`set to `smooth`。

```
document.getElementById("elemID").scrollIntoView({ 
  behavior: 'smooth' 
}); 
```

演示：

```
<button onClick="scrollToDiv()">Scroll To Element</button>
<div id="myDiv" style="margin: 500px 0px;">Div</div>
<script>
function scrollToDiv(){
    document.getElementById("myDiv").scrollIntoView({ 
      behavior: 'smooth' 
   });
}
</script>
```

现代浏览器支持[`scroll-behavior`CSS 属性](https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior)，该属性可用于使文档中的滚动平滑（无需 JavaScript）。锚标签可以通过给锚标签 a`href`加上要滚动`#`到`id`的元素来使用）。您还可以为`scroll-behavior`特定容器设置属性，如 a`div`以使其内容平滑滚动。

演示：

```
html, body{
  scroll-behavior: smooth;
}
```

```
<a href="#elem">Scroll To Element</a>
<div id="elem" style="margin: 500px 0px;">Div</div>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-20T14:11:57.677

这是我的解决方案。适用于大多数浏览器

```
document.getElementById("scrollHere").scrollIntoView({behavior: "smooth"}); 
```

[文档](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)

```
document.getElementById("end").scrollIntoView({behavior: "smooth"});
```

```
body {margin: 0px; display: block; height: 100%; background-image: linear-gradient(red, yellow);}
.start {display: block; margin: 100px 10px 1000px 0px;}
.end {display: block; margin: 0px 0px 100px 0px;}
```

```
<div class="start">Start</div>
<div class="end" id="end">End</div>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-02T07:26:28.817

使用以下平滑滚动可以正常工作：

```
html {
  scroll-behavior: smooth;
}
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-18T14:48:43.760

这是我的变化：

```
let MenuItem = function ( _menuItem ) {

    // I had a sticky header, so its height had to be taken into account when scrolling
    let _header = document.querySelector('.site-header');

    let _scrollToBlock = function( e, menuItem ) {

            let id = menuItem.getAttribute('href'), // the href attribute stores the id of the block to which the scroll will be
                headerHeight = _header.offsetHeight; // determine the height of the header
            id = id.replace(/#/, ''); // remove the # sign from the id block
            let elem = document.getElementById( id ), // define the element to which we will scroll
                top = elem.getBoundingClientRect().top + window.scrollY - headerHeight; // determine the height of the scroll
            window.scroll({
                top: top,
                left: 0,
                behavior: 'smooth'
            });

        },
        _addEvents = function() {

            _menuItem.addEventListener('click', function (e){
                e.preventDefault(); // Disable redirect on click
                _scrollToBlock(e, _menuItem);
            });

        },
        _init = function() {
            _addEvents();
        };

    _init();

};

// Initialize the class MenuItem to all links with class .menu__item
document.querySelectorAll('.menu__item').forEach( function(item) {
    new MenuItem(item);
} ); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-06-04T13:52:09.263

这是对我有用的代码。

```
`$('a[href*="#"]')

    .not('[href="#"]')
    .not('[href="#0"]')
    .click(function(event) {
     if (
       location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
       &&
       location.hostname == this.hostname
        ) {

  var target = $(this.hash);
  target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
  if (target.length) {

    event.preventDefault();
    $('html, body').animate({
      scrollTop: target.offset().top
    }, 1000, function() {

      var $target = $(target);
      $target.focus();
      if ($target.is(":focus")) { 
        return false;
      } else {
        $target.attr('tabindex','-1'); 
        $target.focus(); 
      };
    });
    }
   }
  }); 
```

`

# mysql - MySQL从具有不同列号的多个表中选择

> ID：10063381
> 
> 赞同：1
> 
> 时间：2012-04-08T14:03:32.437
> 
> 标签：mysql, select

我是 MySQL 新手，所以我真的需要一些帮助来解决我面临的一个问题：我在同一个数据库中有**7 个**表，其中包含一些来自测试的数据：这 7 个表有不同的列，但它们都有这些列：

> *   `name`.
> *   `second_name`.
> *   `status`.

`status`添加了每个学生的当前状态（接受或拒绝），我想使用从 7 个表中选择,*来*`name`显示。`second_name` *`where status = accepted`*

 *我设法从 1 个表中显示

```
SELECT name, second_name FROM test1 WHERE status="accepted"; 
```

但是我不知道如何从所有 7 中显示。如果有人能给我一个提示，这对我来说将是一个真正的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:07:28.743

如果您不介意多次接受的测试重复学生姓名，您可以尝试使用`UNION ALL`：

```
(SELECT name, second_name FROM test1 WHERE status='accepted')
UNION ALL
(SELECT name, second_name FROM test2 WHERE status='accepted')
UNION ALL
(SELECT name, second_name FROM test3 WHERE status='accepted')
-- ...and so on 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:45:04.590

恕我直言，最好将数据库规范化以在单独的表中包含所有名称、第二名和状态，并执行唯一选择而不是 UNION 以提高性能。*

# mysql - 使用Vector在Java中的JTable中显示更改的mysql表内容

> ID：10063382
> 
> 赞同：-1
> 
> 时间：2012-04-08T14:03:40.670
> 
> 标签：mysql, vector, jtable, jframe

我有一个存储无线传感器模拟结果日志的 mysql 表。它存储每个传感器节点的节点 ID，每个节点的能量和每个传感器的状态，即它是处于发送状态还是接收状态等。现在我想创建一个 JTable，它为每行显示 5 个字段，它们是： NodeId ，剩余能量，已发送数据包数，已接收数据包数，已损坏数据包数。

我正在使用以下查询：

SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='sending'

SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='corrupted'

SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='recieved'

SELECT MIN(energi) FROM node WHERE nodeid='i'

获取 JTable 内容的字段。以下是我编写的代码：请帮我解决这个问题。

我无法显示 JTable。

```
import java.util.Vector.*;
import java.sql.*;
        JFrame f = new JFrame();
        f.setSize(800,800);
        f.setVisible(true);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

         Connection Db=null;
         ResultSet Results,res,rest,re;
         String stetus;
         Vector data = new Vector();
         Vector row = new Vector(50);
         JPanel p = new JPanel();
           Vector<String> columnNames = new Vector<String>();
            double energi,nodeid,en;

            String url= "jdbc:mysql://localhost:3306/prowler";
            String username="root";
            String password = "not telling you";

                   try {
                           Class.forName("com.mysql.jdbc.Driver");
                           Db= DriverManager.getConnection(url,username,password); 
                   }
                     catch(ClassNotFoundException cnf) {
                            System.err.println("Unable to load JDBC bridge" + cnf);   
                            System.exit(1);
                       }

                      catch(SQLException se) {
                               System.err.println("Cannot connect to database" + se);
                               System.exit(2);

                      }

                     int num = Integer.parseInt(name.getSelectedText());   

                        for(int i=1;i<=num;i++)  {

                            row.addElement(i);

                             try {
                     Statement st = Db.createStatement();
                      Results = st.executeQuery("SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='sending'");

                   row.addElement(Results.getObject(1));

                             }
                     catch(SQLException se) {
                         System.out.println("Query Not Executed" + se);
                      }

                            try {
                     Statement st = Db.createStatement();
                      res = st.executeQuery("SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='corrupted'");
                      row.addElement(res.getObject(1));

                      }
                     catch(SQLException se) {
                         System.out.println("Query Not Executed" + se);
                      }

                             try {
                     Statement st = Db.createStatement();
                      rest = st.executeQuery("SELECT COUNT(*) FROM node WHERE nodeid='i' AND stetus='recieved'");

                       row.addElement(rest.getObject(1));
                            }
                     catch(SQLException se) {
                         System.out.println("Query Not Executed" + se);
                      }

                                    try {
                     Statement st = Db.createStatement();
                      re = st.executeQuery("SELECT MIN(energi)  FROM node WHERE nodeid='i'");

                      row.addElement(re.getObject(1));
                            }
                     catch(SQLException se) {
                         System.out.println("Query Not Executed" + se);
                      }

                  data.addElement(row);

                        }                                           

                  columnNames.add("Node Id");
                  columnNames.add("Packets Sent");
                  columnNames.add("Packets Corrupted");
                  columnNames.add("Packets Recieved");
                  columnNames.add("Energy Left");

   JTable table = new JTable(data,columnNames);
JScrollPane jsp = new JScrollPane(table);
p.add(jsp);
f.add(p); 
```

![表节点架构](../Images/8baa65475e64fe2d5e0f2a6ea06083bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:14:47.323

好吧，如果我得到你，这很简单，比如

```
Select nodeid, 
Count(case stetus when 'sending' then 1 else null end) as Sent,
Count(case stetus when 'received' then 1 else null end) as Received,
Count(case stetus when 'corrupted' then 1 else null end) as Corrupted,
Min(energi) as remaining
From Node Group By NodeId 
```

我认为

计数内的案例操作是一个偷偷摸摸的把戏。Count(SomeColumnName) 将跳过空值，但您可以计算一个表达式，因此您可以一起 bash 一个，当您不希望它在计数中时，它是空值。

# android - Android非激活开发手机升级

> ID：10063387
> 
> 赞同：-1
> 
> 时间：2012-04-08T14:04:20.817
> 
> 标签：android, upgrade, dev-phone

如果我购买二手的、未激活的（没有像 At&T 或 Verizon 等运营商服务的）三星手机（例如）并且它上面有 android 2.1 并且制造商声明它是可升级的，我仍然可以使用它升级到 2.2无线网络连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:19:37.190

它应该可以通过三星通过 PC 软件或 OTA 进行升级，这应该不是问题，或者您只需将手机 root 并加载与氰基兼容的 rom，例如：[http ://wiki.cyanogenmod.com/维基/Samsung_Galaxy_S](http://wiki.cyanogenmod.com/wiki/Samsung_Galaxy_S)。

# python - Matplotlib：绘制两个图像之间的差异

> ID：10063389
> 
> 赞同：3
> 
> 时间：2012-04-08T14:04:50.013
> 
> 标签：python, image, matrix, matplotlib

我正在使用 Python 和 Matplotlib 进行绘图。

我有两个矩阵（灰度图像），如下所示：

```
x = np.array([[0,1,0], [1,0,1]])
y = np.array([[0,0.4,0], [1,0,1]]) 
```

我想绘制一个新图像 z ，它显示 x 和 y 之间的差异（比如绿点），并将其他点保留为灰度。因此，在前面的示例中，如果 1 是黑色，0 是白色，则 z 应该是一个相同的图像，其中一个绿点对应于 x 和 y 之间的差异（在本例中为 0.4）。

这样做的目的是为手写数据图像中的 k-means 算法执行动画，以观察算法是如何工作的。

我希望这很清楚，对不起我的英语。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:15:06.200

最简单的解决方案包括首先计算输入数据的 RGBA 颜色，对其进行操作以设置与您的特殊颜色（绿色）不同的值，然后使用简单`imshow()`的修改后的 RGBA 数组进行绘图。这是如何做到的：

```
>>> rgba_values = cm.gray(y)  # All RGBA values for your input value, with levels of gray
>>> rgba_values[x != y] = [0, 1, 0, 1]  # Set the points where x and y differ to green (RBG = 0, 1, 0)
>>> imshow(rgba_values, interpolation='nearest') 
```

`x`数组之间不同的数据点`y`现在为绿色： ![灰色为共同数据，绿色为差异的图像](../Images/1bb9f0920dfd5cabb12cc56718ea7776.png)

如果您想在之前显示的图像上覆盖绿色点，您可以执行类似的操作并将 alpha 通道设置为 0，您不想修改原始图像：

```
>>> y_gray = cm.gray(y)  # RGBA image with gray levels
>>> imshow(y_gray, interpolation='nearest')  # Image of one of the arrays
>>> diff_points = numpy.empty_like(y_gray)  # Preparation of an overlay with marked points only
>>> diff_points[x == y, 3] = 0  # Common points not overwritten: alpha layer set to 0
>>> diff_points[x != y] = [0, 1, 0, 1]  # Green for points that differ
>>> imshow(diff_points, interpolation='nearest') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:47:20.730

另一种可能的方法是更改​​颜色图以便以不同的方式显示某些值，

```
import matplotlib.cm, matplotlib.pyplot as plt, numpy as np, copy
x = np.array([[0,1,0], [1,0,1]])
y = np.array([[0,0.4,0], [1,0,1]])
y_mod = y.copy()
y_mod[x != y] = np.nan # filling the differing pixels with NaNs    
xcm = copy.copy(matplotlib.cm.gray) # copying the gray colormap
xcm.set_bad(color='green', alpha=0.5) # setting the color for "bad" pixels"
plt.imshow(y_mod, cmap=xcm, interpolation='none') 
```

这种方法的一个优点是您可以稍后重用此颜色图。

# qt - 如何在 wxWidgets 中绘制三次贝塞尔曲线？

> ID：10063396
> 
> 赞同：5
> 
> 时间：2012-04-08T14:06:07.573
> 
> 标签：qt, wxwidgets

在 Qt 中，可以使用以下代码绘制三次贝塞尔曲线。

```
QPainter painter(this);
painter.setRenderHint(QPainter::Antialiasing, true);

QPainterPath path;
path.moveTo(80, 320);
path.cubicTo(200, 80, 320, 80, 480, 320);

painter.setPen(QPen(Qt::black, 8));
painter.drawPath(path); 
```

如何使用 wxWidgets 绘制相同的曲线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T00:05:10.797

您可以查看 wxGraphicsPath::AddQuadCurveToPoint。

# android - 解析 XML 时出现 Android org.xmlpull.v1.XmlPullParserException

> ID：10063397
> 
> 赞同：7
> 
> 时间：2012-04-08T14:06:18.130
> 
> 标签：android, android-xml, xmlpullparser

我有一种情况，我调用了一个 Web 服务，它在 XML 信封中返回了一些 HTML。像：

```
<xml version="1.0" cache="false">
<head/>
<body>
<table>
<tr>
   <td>
        <a href="link-to-prev-post">
           <text color="red"><< Prev</text>
        </a>
   </td>
   <td>
        <a href="link-to-next-post">
           <text color="red">| Next >></text>
        </a>
   </td>
</tr>
</table>
</body>
</xml> 
```

我必须检索**链接到上一篇文章**和**链接到下一篇文章的**链接。所以我可以通过这些链接获取更多数据。

我正在使用**XmlPullParser**来解析上面提供的 XML/HTML。要获取下一个/上一个项目的链接，我正在执行以下操作：

```
if (xmlNodeName.equalsIgnoreCase("a")) {
                link = parser.getAttributeValue(null, "href");

            } else if (xmlNodeName.equalsIgnoreCase("text")) {
                color = parser.getAttributeValue(null, "color");

                if (color.equalsIgnoreCase("red") && parser.getEventType() == XmlPullParser.START_TAG) {
                        // check for next/prev blog entries links
                        // but this parser.nextText() throws XmlPullParserException
                        // i think because the nextText() returns << Prev which the parser considers to be wrong
                        String innerText = parser.nextText();
                        if (innerText.contains("<< Prev")) {
                            blog.setPrevBlogItemsUrl(link);                             
                        } else if (innerText.contains("Next >>")) {
                            blog.setNextBlogItemsUrl(link);
                        }
                    }

                    link = null;
                }
            } 
```

它在执行**parser.nextText()时抛出****XmlPullParserException** ...，此时文本元素的值是**<< Prev** .. 我认为由于文本中存在**<<**

 ******LogCat 详细信息是：

```
04-08 18:32:09.827: W/System.err(688): org.xmlpull.v1.XmlPullParserException: precondition: START_TAG (position:END_TAG </text>@9:2535 in java.io.InputStreamReader@44c6d0d8) 
04-08 18:32:09.827: W/System.err(688):  at org.kxml2.io.KXmlParser.exception(KXmlParser.java:245)
04-08 18:32:09.827: W/System.err(688):  at org.kxml2.io.KXmlParser.nextText(KXmlParser.java:1382)
04-08 18:32:09.827: W/System.err(688):  at utilities.XMLParserHelper.parseBlogEntries(XMLParserHelper.java:139)
04-08 18:32:09.827: W/System.err(688):  at serviceclients.PlayerSummaryAsyncTask.doInBackground(PlayerSummaryAsyncTask.java:68)
04-08 18:32:09.827: W/System.err(688):  at serviceclients.PlayerSummaryAsyncTask.doInBackground(PlayerSummaryAsyncTask.java:1)
04-08 18:32:09.836: W/System.err(688):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-08 18:32:09.836: W/System.err(688):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-08 18:32:09.836: W/System.err(688):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-08 18:32:09.836: W/System.err(688):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-08 18:32:09.836: W/System.err(688):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-08 18:32:09.836: W/System.err(688):  at java.lang.Thread.run(Thread.java:1096) 
```

我希望我已经澄清了我的问题。

# 解决方案

受[Martin](https://stackoverflow.com/users/940321/martin-nordholts)将接收到的数据首先转换为字符串的方法的启发，我以一种混合方法处理了我的问题。

1.  将接收到的**InputStream**的值转换为字符串，并将错误字符替换为 * （或任何你想要的）：如下

    ```
    InputStreamReader isr = new InputStreamReader(serviceReturnedStream);

    BufferedReader br = new BufferedReader(isr);
    StringBuilder xmlAsString = new StringBuilder(512);
    String line;
    try {
        while ((line = br.readLine()) != null) {
            xmlAsString.append(line.replace("<<", "*").replace(">>", "*"));
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
    ```

2.  现在我有一个包含正确 XML 数据的字符串（就我而言），所以只需使用普通的 XmlPullParser 来解析它，而不是自己手动解析它：

    ```
    XmlPullParserFactory factory = XmlPullParserFactory.newInstance();

    factory.setNamespaceAware(false);

    XmlPullParser parser = factory.newPullParser();
    parser.setInput(new StringReader(xmlAsString.toString())); 
    ```

希望这对某人有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T11:40:10.120

是的，可能会抛出异常，因为根据 XML 1.0 规范中的第[2.4 节字符数据和标记，这是无效的 XML：](http://www.w3.org/TR/REC-xml/#syntax)

> [...] 左尖括号 (<) 不得以 [其] 字面形式出现，[...]

如果您将该 XML 放入 Eclipse，Eclipse 将抱怨 XML 无效。如果您能够修复 Web 服务，您应该修复生成的 XML，方法是使用实​​体引用（例如`&lt;`CDATA [）](http://en.wikipedia.org/wiki/CDATA)。

如果您对 Web 服务没有权力，我认为最简单的方法是使用一些自定义代码手动解析它，也许使用[正则表达式](http://developer.android.com/reference/java/util/regex/Pattern.html)，这取决于您对一般性的宽松要求。

# 示例代码

以下是解析上述 XML 文件的方法。请注意，您可能希望改进此代码以使其更通用，但您至少应该有一些东西开始：

```
 // Read the XML into a StringBuilder so we can get get a Matcher for the
    // whole XML
    InputStream xmlResponseInputStream = // Get InputStream to XML somehow
    InputStreamReader isr = new InputStreamReader(xmlResponseInputStream);
    BufferedReader br = new BufferedReader(isr);
    StringBuilder xmlAsString = new StringBuilder(512);
    String line;
    try {
        while ((line = br.readLine()) != null) {
            xmlAsString.append(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }

    // Look for links using a regex. Assume the first link is "Prev" and the
    // next link is "Next"
    Pattern hrefRegex = Pattern.compile("<a href=\"([^\"]*)\">");
    Matcher m = hrefRegex.matcher(xmlAsString);
    String linkToPrevPost = null;
    String linkToNextPost = null;
    while (m.find()) {
        String hrefValue = m.group(1);
        if (linkToPrevPost == null) {
            linkToPrevPost = hrefValue;
        } else {
            linkToNextPost = hrefValue;
        }
    }

    Log.i("Example", "'Prev' link = " + linkToPrevPost + 
            " 'Next' link = " + linkToNextPost); 
```

使用您的 XML 文件，logcat 的输出将是

```
I/Example (12399): 'Prev' link = link-to-prev-post 'Next' link = link-to-next-post 
```******

# c++ - C++ 数据结构（标准库）转储（如 python 打印函数）

> ID：10063401
> 
> 赞同：0
> 
> 时间：2012-04-08T14:06:55.983
> 
> 标签：c++, data-structures, recursion, recursive-datastructures

当我在 python 中编程时，只需在屏幕上打印您想要检查的任何数据结构非常方便。对于 STL 数据结构，C++ 中是否存在类似的东西？

它应该递归数据结构的内容，并使用集合、地图、对等特定布局打印它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:15:59.557

请参阅[此处](https://stackoverflow.com/questions/4850473/pretty-print-c-stl-containers)和[此处](http://louisdx.github.com/cxx-prettyprint/)以获取漂亮的打印标准库容器。

# git - Git日志输出日志文件

> ID：10063407
> 
> 赞同：87
> 
> 时间：2012-04-08T14:07:53.810
> 
> 标签：git, logging

我正在做一个大学课程的作业，我使用 Git 作为这个作业的版本控制。我一直在做的游戏已经完成。然而，随着我的提交，我想提交 Git 日志，有效地显示我在处理它期间的进度。

我试过这个：

```
git log --stat > log.log 
```

但它或多或少只是给了我非常难以理解的东西。什么是命令，以便我可以对此进行很好的格式化？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-08T14:15:40.363

我建议使用与默认格式不同的格式。我通常的选择是带有图表的摘要，但单独的一行摘要通常可以解决问题。

**选项 1：** *带图表的单行摘要*

```
git log --pretty=format:'%h : %s' --graph > log.log 
```

***结果是：***

```
* 2d3acf9 : ignore errors from SIGCHLD on trap
*   5e3ee11 : Merge branch 'master' of git://github.com/dustin/grit
|\
| * 420eac9 : Added a method for getting the current branch.
* | 30e367c : timeout code and tests
* | 5a09431 : add timeout protection to grit
* | e1193f8 : support for heads with slashes in them
|/
* d6016bc : require time for xmlschema 
```

**选项 2：** *没有图表的单行摘要*

```
git log --pretty=format:'%h was %an, %ar, message: %s' > log.log 
```

***结果是：***

```
a6b444f was Scott Chacon, 5 days ago, message: dammit, this is the second time this has re
49d77f7 was Scott Chacon, 8 days ago, message: modified index to create refs/heads if it i
9764edd was Hans Engel, 11 days ago, message: Add diff-lcs dependency
e1ba1e3 was Hans Engel, 11 days ago, message: Add dependency for Open4
0f87b4d was Scott Chacon, 12 days ago, message: merged recent changes 
```

[您可以在此处](https://git-scm.com/docs/pretty-formats)的文档中找到更多格式选项。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-14T03:43:54.737

试试这条线

`git log > log.txt`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-14T04:11:49.920

```
git log --oneline --decorate > log.txt 
```

# pthreads - 这个演员阵容和任务是关于什么的？

> ID：10063409
> 
> 赞同：1
> 
> 时间：2012-04-08T14:07:55.997
> 
> 标签：pthreads, preprocessor, mutex

我正在阅读 Richard Stevens 在 unix 环境中的高级编程。
线程同步类中有一段代码（第 11 章）。这是显示如何避免许多相同类型的共享结构的竞争条件的代码。
这段代码显示了两个用于同步的互斥锁。一个用于列表`fh`（一个跟踪所有 foo 结构的列表）和`f_next`字段，另一个用于结构`foo`
*代码是：*

```
#include <stdlib.h>
#include <pthread.h>
#include <stdio.h>
#include <unistd.h>

#define NHASH 29
#define HASH(fp) (((unsigned long)fp)%NHASH)

struct foo *fh[NHASH];

pthread_mutex_t hashlock = PTHREAD_MUTEX_INITIALIZER;

struct foo {
  int             f_count;
  pthread_mutex_t f_lock;
  struct foo     *f_next; /* protected by hashlock */
  int             f_id;
  /* ... more stuff here ... */
};

struct foo * foo_alloc(void) /* allocate the object */
{
  struct foo  *fp;
  int         idx;

  if ((fp = malloc(sizeof(struct foo))) != NULL) {
      fp->f_count = 1;
      if (pthread_mutex_init(&fp->f_lock, NULL) != 0) {
          free(fp);
          return(NULL);
      }
      idx = HASH(fp);
      pthread_mutex_lock(&hashlock);
      ///////////////////// HERE -----------------
      fp->f_next = fh[idx];
      fh[idx] = fp->f_next;
      //////////////////// UPTO HERE -------------
      pthread_mutex_lock(&fp->f_lock);
      pthread_mutex_unlock(&hashlock);
      /* ... continue initialization ... */
      pthread_mutex_unlock(&fp->f_lock);
  }
  return(fp);
}

void foo_hold(struct foo *fp) /* add a reference to the object */
....... 
```

**疑问是**
**1)**`HASH(fp)`预处理器在做什么？
我知道它正在对`fp`存储的内容进行类型转换，然后对其取模。但是，在函数中，`foo_alloc`我们只是传递了新分配的 foo 结构的地址。
我们为什么要这样做 我知道这会给我一个 0 到 28 之间的整数 - 存储在数组中`fh`。但是为什么我们要对地址取模。为什么会有这么多随机化？

**2）**假设我接受，现在这两行在做什么（也在代码中突出显示）：

```
fp->f_next = fh[idx];
fh[idx] = fp->f_next; 
```

我希望最初`fh[idx]`有我分配给`f_next`foo 字段的任何垃圾值，并且在下一行发生了什么，再次进行相同的分配，但顺序相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:45:26.087

`struct foo *fh[NHASH]`是一个哈希表，并使用`HASH`宏作为哈希函数。

1)`HASH(fp)`计算索引来决定`fh`存储在哪里`fp`，`fp`并使用地址作为关键字来计算索引。我们可以轻松地将地址类型转换为长类型。

2）使用链表来避免散列冲突称为分离链，我认为下面的代码是对的，你可以在书中查看：

```
fp->f_next = fh[idx];
fh[idx] = fp; 
```

将fp元素插入到链表的头部，`fh[idx]`初始值为`fh[idx]`null。

# emacs - 是否可以在 Emacs 中分离 minibuffer 和 echo 区域？

> ID：10063410
> 
> 赞同：5
> 
> 时间：2012-04-08T14:08:08.367
> 
> 标签：emacs, elisp, minibuffer

我很好奇，是否可以将回显区域和迷你缓冲区分开，所以两个不同的地方（行、窗格、框架）用于消息的输出和命令的输入。

正如[Hide Emacs echo area during inactivity](https://stackoverflow.com/questions/5079466/hide-emacs-echo-area-during-inactivity)中所说，完全摆脱 echo area 是不可能的，但一些建议是：

*   [将 minibuffer 移动到专用窗口](http://www.emacswiki.org/emacs/Dedicated_Minibuffer_Frame)；
*   [过滤回显区域中的消息](http://emacswiki.org/emacs/EchoArea#toc2)- 例如，仅打印回显区域中的击键并将`*Messages*`缓冲区用于其他消息。

我有什么选择？理论上是否可以分离回声区域和迷你缓冲区？理论上是否需要重写 C 源代码并重新编译 Emacs？请发表任何想法和想法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T01:17:45.880

根据手册并查看 C 代码，我相信答案是“否”。

`M-:` `(info "(elisp) Echo Area Customization")` `RET`说：

> 变量 `max-mini-window-height' 指定了调整 minibuffer 窗口大小的最大高度，也适用于 echo 区域（这实际上是 minibuffer 窗口的特殊用途；*note Minibuffer Misc::)。

该`Minibuffer Misc`链接没有进一步讨论该特定点，但如果回显区域明确使用迷你缓冲区窗口，那么您将无法将它们分开。

**编辑：**

为了确认，如果您查看 C 函数的源代码`message3_nolog()`，`xdisp.c`它会获取所选帧的 minibuffer 的帧，选择该帧，然后`echo_area_display()`使用当前选择的帧的 minibuffer 窗口作为回显区域窗口。

(Emacs 24.0.95)

所以minibuffer和echo区域使用的“mini window”确实是一模一样的，就像手册说的那样。

我能想到的唯一可能性是尝试找到一种自动将回显区域消息*复制*到其他窗口的方法，但是由于这一切都发生在 C 代码中，在未暴露给 elisp 的函数中，我怀疑这也是不可能的。

**编辑2：**

> 理论上是否需要重写 C 源代码并重新编译 Emacs？

如果你需要真正的分离，那么是的，我相信就是这样。

如果复制方法足够，您*可以*通过建议所有可能导致将消息写入回显区域的函数来纯粹在 elisp 中进行管理。您可以从这里开始阅读以了解这可能意味着什么：

`M-:` `(info "(elisp) The Echo Area")` `RET`

（但是如果你真的很想实现这个，我建议你最好把时间花在 C 中工作并提供一个允许进行这种分离的补丁，因为我有点怀疑所有这些建议是否可靠在长期。）

# ruby-on-rails - 找不到生成器主题

> ID：10063411
> 
> 赞同：0
> 
> 时间：2012-04-08T14:08:08.397
> 
> 标签：ruby-on-rails, spree

尝试使用 Spree。

```
rails g spree:install
rails g theme my_theme 
```

哪个返回：

```
Can not find generator theme 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:22:56.643

似乎没有安装/设置主题生成器。如果您只是运行`rails g`，您应该会看到所有可用生成器的列表。这份清单说了什么？

# silverlight - 样式中的 Silverlight 绑定问题

> ID：10063412
> 
> 赞同：0
> 
> 时间：2012-04-08T14:08:21.217
> 
> 标签：silverlight, xaml, binding

我正在尝试将设置器值绑定到属性，但我不断收到灾难性错误 0x8000ffff

试过这个：

```
<ItemsControl.Style>
    <Style TargetType="ContentPresenter">
        <Setter Property="Grid.Row"
                Value="{Binding GridRow}" />
        <Setter Property="Grid.Column"
                Value="{Binding GridColumn}" />
    </Style>
</ItemsControl.Style> 
```

然后这个：

```
<ItemsControl.Style>
    <Style TargetType="ContentPresenter">
        <Setter Property="Grid.Row"
                Value="0" />
        <Setter Property="Grid.Column"
                Value="0" />
    </Style>
</ItemsControl.Style> 
```

我必须升级到 SL5 才能获得 TargetType。第二个示例删除了任何绑定尝试，但仍然“灾难性地”失败。

> ```
> <ItemsControl.ItemsPanel>
>     <ItemsPanelTemplate>
>         <layout:MatrixGrid />
>     </ItemsPanelTemplate>
> </ItemsControl.ItemsPanel> 
> ```

我正在尝试在网格中创建一个数据矩阵（如其他人在示例中所述）。

ItemsControl（在 Silverlight 中）没有 ItemContainerStyle 元素，所以我正在尝试这个，到目前为止还没有运气。

> ```
> <ListBox.ItemsPanel>
>     <ItemsPanelTemplate>
>         <layout:MatrixGrid />
>     </ItemsPanelTemplate>
> </ListBox.ItemsPanel>
> <ListBox.ItemContainerStyle>
>     <Style TargetType="ContentPresenter">
>         <Setter Property="Grid.Row"
>                 Value="{Binding GridRow}" />
>         <Setter Property="Grid.Column"
>                 Value="{Binding GridColumn}" />
>     </Style>
> </ListBox.ItemContainerStyle> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:22:08.523

[Style.TargetType](http://msdn.microsoft.com/en-us/library/system.windows.style.targettype%28v=vs.95%29.aspx)属性设置样式所针对的类型。尝试将其设置为`ItemsControl`，这可能是它下降的原因。

# c# - Objective C 前端 - Java/C# 后端

> ID：10063415
> 
> 赞同：1
> 
> 时间：2012-04-08T14:08:38.533
> 
> 标签：c#, java, objective-c, c, xml

我需要为在 Objective C 中完成的 iPad 应用程序构建一个后端。对此我有两种选择，一种是 Java，另一种是 C#。使用其中任何一个内置的后端，我必须将后端和前端放在一起的选项是什么？一种选择是使用 XML 消息传递。还有哪些其他选择？

另外，这样做的标准方法是什么？即如果我们有一个客观的 C 前端，那么后端应该在什么位置，两者之间应该使用什么通信机制？

我做了一些研究，确信 Java 或 C# 中的任何一个都可以工作，但我找不到太多关于如何让它们与前端一起工作的信息？（请记住其他人会做前端）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:43:37.190

你有几件事要考虑。有线协议和消息协议。

有线协议：

这将包含诸如消息 ID、发件人、主题、类型、时间戳、消息大小等内容。这与消息协议一样重要。为了推荐 Wire 协议，我需要更多地了解您的系统。如果您想要一个适用于所有这些平台的简单 Wire 协议，您可以查看 STOMP。它是一个简单的基于 ASCII 的消息传输协议。它对于调试消息等很有用。ActiveMQ 和 RabbitMQ 是支持 STOMP 的代理系统。我更喜欢 RabbitMQ。

简单的 STOMP 消息：

```
SEND
destination:/queue/a
content-type:text/plain

hello queue a
^@ 
```

您还可以将 HTTP 用作简单的有线协议。它很简单，并且像 STOMP 一样基于 ASCII。另外 SOAP 通常使用 HTTP 作为它的传输协议。SOAP 通常还使用 XML 作为其消息格式来编码消息的信封、标头和正文。

还有 JSON-RPC。

消息格式：

Wire 协议中的大部分信息用于确定消息的去向、是否到达那里、消息中包含什么类型的信息等。通常它仅由您放置的消息传递系统用于发送和接收消息. 您的业​​务逻辑感兴趣的是消息内容本身。您需要一种对双方都理解的内容进行编码的方法。有很多选择：JSON、XML、Google 的 protobuf（二进制）。

如果没有更多关于您需要做什么的知识，我将很难推荐其中的任何一个。他们每个人都有自己的长处和短处。

有线和消息协议的真实映射：

UPS、美国邮政、联邦快递 = 妈妈的电汇协议信、贷款申请、生日贺卡 = 信息

# bash - 如何向 bash 添加内部命令？

> ID：10063417
> 
> 赞同：8
> 
> 时间：2012-04-08T14:08:44.293
> 
> 标签：bash, command

我不是指别名或函数。我实际上想在`bash`源代码中添加一个全新的内部命令。

这样，当我编译它时，它会将我的新命令内置到 shell 本身中。

这样做的步骤是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T14:15:41.810

这实际上是作为对[更具体问题](https://stackoverflow.com/questions/10060500/bash-how-to-evaluate-ps1-ps2)（如何将评估的`PS1`输出获取到变量）的答案的一部分出现的，我认为该过程值得拥有自己的问答，更概括为修改`bash`源代码的过程。

以下是添加内部命令的步骤，该命令`evalps1`旨在为您提供与主提示字符串相同的输出。它基于版本`4.2`代码库。

**第1步。**

首先，进行更改，`support/mkversion.sh`以免您将其与“真实”混淆`bash`，并且 FSF 可以出于保修目的否认所有知识 :-) 只需更改一行（我添加了`-pax`一点）：

```
echo "#define DISTVERSION \"${float_dist}-pax\"" 
```

该脚本是创建并影响从: 、变量等`version.h`获取版本信息的所有各种方式的脚本。`bash``--version``$BASH_VERSION`

**第2步：**

更改`builtins/Makefile.in`以将新的源文件添加到组合中。这需要许多步骤。

(a) 添加`$(srcdir)/evalps1.def`到`DEFSRC`. 该`def`文件包含有关内部命令以及实现代码的信息。

(b) 添加`evalps1.o`到`OFILES`. 这只会使您的代码与`bash`.

(c) 添加所需的依赖项：

```
evalps1.o: evalps1.def $(topdir)/bashtypes.h $(topdir)/config.h \
           $(topdir)/bashintl.h $(topdir)/shell.h common.h 
```

**第 3 步：**

添加`builtins/evalps1.def`文件本身，这是运行`evalps1`命令时执行的代码：

```
This file is evalps1.def, from which is created evalps1.c.
It implements the builtin "evalps1" in Bash.

Copyright (C) 1987-2009 Free Software Foundation, Inc.

This file is part of GNU Bash, the Bourne Again SHell.

Bash is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Bash is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Bash.  If not, see <http://www.gnu.org/licenses/>.

$PRODUCES evalps1.c

$BUILTIN evalps1
$FUNCTION evalps1_builtin
$SHORT_DOC evalps1
Outputs the fully interpreted PS1 prompt.

Outputs the PS1 prompt, fully evaluated, for whatever nefarious purposes
you require.
$END 
```

其中大部分是 GPL 许可证（因为我从 修改它`exit.def`），如上所示，最后有一个非常简单的函数来获取和解码`PS1`，使用与 shell 本身使用的相同的函数：

```
#include <config.h>
#include "../bashtypes.h"
#include <stdio.h>
#include "../bashintl.h"
#include "../shell.h"
#include "common.h"

int
evalps1_builtin (list)
     WORD_LIST *list;
{
  char *ps1 = get_string_value ("PS1");
  if (ps1 != 0)
  {
    ps1 = decode_prompt_string (ps1);
    if (ps1 != 0)
    {
      printf ("%s", ps1);
    }
  }
  return 0;
} 
```

在这种情况下，代码本身非常简单，尽管它使用了我认为不必要的复杂缩进/大括号规则和 K&R 样式的预原型函数声明——为了保持一致性，我将它们与当前代码保持一致。

代码只是调用该函数来获取`PS1`环境变量，然后调用另一个解码提示字符串的函数。最后，它将解码后的字符串输出到标准输出。

当然，您可以用自己的代码替换该代码（以及将命令和文件名更改为`evalps1`其他名称），具体取决于您的特定需求。

**第4步：**

只需在顶级目录中构建东西：

```
./configure
make 
```

* * *

`bash`出现在该顶级目录中的可执行文件可以重命名为`paxsh`（例如），尽管我怀疑它是否会像它的祖先一样流行:-)

运行它，你可以看到它在运行，从一个真正的`bash`shell 开始：

```
pax> mv bash paxsh

pax> ./paxsh --version
GNU bash, version 4.2-pax.0(1)-release (i686-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

pax> ./paxsh

pax> echo $BASH_VERSION
4.2-pax.0(1)-release

pax> echo "[$PS1]"
[pax> ]

pax> echo "[$(evalps1)]"
[pax> ]

pax> PS1="\h: "

paxbox01: echo "[$PS1]"
[\h: ]

paxbox01: echo "[$(evalps1)]"
[paxbox01: ] 
```

# javascript - jsTree create_node 回调函数不起作用

> ID：10063418
> 
> 赞同：0
> 
> 时间：2012-04-08T14:08:45.937
> 
> 标签：javascript, jquery, jquery-plugins, jstree

使用 jsTree，当使用该**`create_node`**函数向我的树添加节点时，我试图添加一个回调函数，根据[https://github.com/vakata/jstree/blob/v.1.0/dist/jstree.js#L3549](https://github.com/vakata/jstree/blob/v.1.0/dist/jstree.js#L3549) .

但是，它似乎没有执行，如此处所示-> [http://jsfiddle.net/thapar/e3nMg/](http://jsfiddle.net/thapar/e3nMg/)单击时**`Add Root Item`**（`console.log()`至少希望说“嗨”）。

知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-20T01:55:15.177

jstree 版本 3，有一个 create_node 事件：

“创建节点时触发”：

[http://www.jstree.com/api/#/?q=.jstree%20Event&f=create_node.jstree](http://www.jstree.com/api/#/?q=.jstree%20Event&f=create_node.jstree)

```
$(function() {
    var $root = $('#jstree').jstree({
        "core" : {
            check_callback : true
        },
        "themes" : {},
        "ui" : {},
        "plugins" : [ "dnd", "state","themes", "html_data", "ccrm", "ui" ],

    });     

    $('#jstree').on('create_node.jstree', function(e, data) {
        console.log('hi', data);
    });

    $('#add_root').click(function() {
        $root.jstree(true).create_node($root, "sub4");
    });
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:08:06.200

[根据http://www.jstree.com/documentation/core](http://www.jstree.com/documentation/core)上的文档，看起来`.create_node`函数的“回调”参数在内部使用。它指出您应该改为侦听该事件。您可以这样做（假设您使用的代码与您的[JSFiddle](http://jsfiddle.net/thapar/e3nMg/)帖子中的代码相同：

```
$('.colors').bind('create_node.jstree', function (e, data) {
   console.log('hi', data.rslt.obj);
}); 
```

​</p>

# marklogic - 如何从脚本在 marklogic 中创建数据库

> ID：10063421
> 
> 赞同：5
> 
> 时间：2012-04-08T14:08:57.560
> 
> 标签：marklogic

我们已经开始了一个使用 marklogic 来存储文档的新项目。为了让应用程序运行，我们需要创建一个数据库、一个森林、新用户并设置一个 XDBC 服务器。使用 Marklogic 提供的 Web 管理工具很容易做到这一点，但要从持续集成服务器运行它，我们需要自动化它。有什么方法可以从命令行执行（例如 sqlserver 的 sqlcmd.exe 或 oracle 中的 sql plus）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T14:39:59.800

只要您使用 MarkLogic 5.x，最简单的方法就是使用配置管理器。这个基于 Web 的工具允许您将整个数据库和应用程序服务器配置导出到可以进行版本控制的单个 xml 文件。然后也可以导入它以完全设置或重新配置您的 MarkLogic 实例。

为了将其用作持续集成的一部分，您必须编写配置导入的脚本。您可以创建一个具有一个端点的 http 服务器，该端点调用配置 API 来执行加载，如下文所述：http: [//community.marklogic.com/pubs/5.0/apidocs/package-api.html](http://community.marklogic.com/pubs/5.0/apidocs/package-api.html)。这个基于 https 的服务可以通过 ANT 或任何其他 CI 工具轻松调用。

或者，特别是如果您还没有在 5.x 上运行，您可以编写整个过程的脚本，而不是使用配置包。所有的管理任务都记录在这里：http: [//community.marklogic.com/pubs/5.0/books/adminAPI.pdf](http://community.marklogic.com/pubs/5.0/books/adminAPI.pdf)。然后，您必须编写配置数据库、应用程序服务器等所需的所有代码，然后如上所述通过 http 服务器公开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:56:15.630

感谢 Clark Richey 的帮助，我可能已经找到了一种自动配置 MarkLogic 服务器 5.x 的方法（尽管绝不简单）。

例如，如果您想自动创建 xdbc 服务器，请转到存在手动配置的 xdbc 服务器的实例的查询控制台。使用以下 xquery 为 xdbc 服务器生成一个包文件（在我的例子中称为 sample-server ）。

> 在“/MarkLogic/package/package.xqy”处导入模块命名空间包=“http://marklogic.com/package/package”；
> 
> 让 $my-package := package:create()
> 
> 返回包：add-appserver($my-package, "Default", "sample-server")

您现在将看到一个包 xml，其中包含创建和配置 xdbc 服务器所需的所有信息。将其保存在文件中或剪贴板上。现在转到您要配置的 marklogic 实例的查询控制台。使用以下 xquery 在实例上实际安装它。

> 在“/MarkLogic/package/package.xqy”处导入模块命名空间包=“http://marklogic.com/package/package”；
> 
> let $package := {粘贴您保存在文件/剪贴板中的包 xml step1}
> 
> 返回包：安装（$包）

您现在将获得一个 xml 结果，表明该包已被写入。

现在是在我的 CI 环境中自动执行此操作的所有重要步骤。我会编写一个自定义 ant/nant 任务（或者在我的特定情况下是一个 powershell cmdlet），它从文件系统读取配置文件，使用 XCC（和管理员凭据）连接到 ML，因为创建数据库和应用程序服务器之类的东西需要它) 然后执行上面定义的完全相同的 xquery。然后我可以在我的源代码控制中对配置文件进行版本控制，这样我就可以在全新安装的 ML 上自动创建/配置数据库，而无需任何手动干预。还有其他更好的方法吗？？

# usb - 用于嵌入式 linux 的 USB 3G 调制解调器

> ID：10063424
> 
> 赞同：0
> 
> 时间：2012-04-08T14:09:42.220
> 
> 标签：usb, modem, 3g

我对 linux 世界还很陌生，我必须在嵌入式 linux 上开发一个通过互联网发送数据的应用程序。我必须选择带有 SIM 卡座的 USB 3G 调制解调器。如果有人能帮助我选择一个可以成功运行或在嵌入式 linux 上受支持的 USB 3G 调制解调器，我将不胜感激。

谢谢恩比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:11:16.787

我使用 Pantech 调制解调器和 Debian ARM linux 进行实时船只跟踪。

Linux 可以使用 cdc_acm 和 ppp 内核模块来驱动市场上的许多 USB 调制解调器。您可能需要根据嵌入式平台的剥离程度来编译这些模块。或者，您可以使用像 Raven 或 MultiTech 这样的交钥匙系统，但它们会消耗更多的能量。

避免使用带有 SD 卡等附加硬件的 USB 调制解调器。这些调制解调器需要专门的驱动程序（许多在开源中不可用）在暴露实际调制解调器之前剥离非调制解调器硬件层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-29T19:34:31.150

使用 ModemManager 支持的调制解调器，这是许多主要 Linux 发行版中的开源项目，无需重新发明轮子！

支持的调制解调器： [https ://www.freedesktop.org/wiki/Software/ModemManager/SupportedDevices/](https://www.freedesktop.org/wiki/Software/ModemManager/SupportedDevices/)

项目来源： [https ://www.freedesktop.org/wiki/Software/ModemManager/](https://www.freedesktop.org/wiki/Software/ModemManager/)

# php - php中什么是好的用户登录概念？

> ID：10063427
> 
> 赞同：1
> 
> 时间：2012-04-08T14:10:07.203
> 
> 标签：php, mysql, authentication, login

目前，在成功登录后，我在 cookie 中添加 md5($username) md5($password)，然后每次用户浏览每个页面上的站点时，一个函数都会将这些 cookie 验证到数据库。

它工作得很好，我很满意。但是有什么更好的我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:21:27.473

您正在使用它很好，`md5`但`PHP`还有其他选项可以用来提高安全性

这里有一个帖子：[登录 cookie 安全性](https://stackoverflow.com/questions/10049186/login-cookies-security/10049292#10049292) ，我在其中详细解释了保护 PHP Cookies

您还可以看到：[http](http://www.phpclasses.org/browse/file/25025.html) ://www.phpclasses.org/browse/file/25025.html .. 一个简单的类，您需要做的就是将加密替换为具有`RSA`或`DES`

如果您需要更多信息，您可以添加评论

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:22:45.673

当用户登录成功时，在`$_SESSIONS[]`. 然后在其他页面中，只需检查 SESSION 数组中是否设置了此值。如果设置，则用户已登录。否则，重定向到登录页面。

如果您想在用户下次访问您的网站时添加自动登录功能，请设置 cookie。因此，在加载页面时，请检查是否设置了 SESSION 中的值。否则，请检查 cookie。如果 cookie 设置了登录签名，则直接设置 SESSION 值。否则，重定向到登录页面。

我认为，使用 SHA 风格进行散列比使用 MD5 更好。如果可能，请尝试使用 SHA-512。

# sql-server - VS2010 我缺少参考

> ID：10063430
> 
> 赞同：0
> 
> 时间：2012-04-08T14:10:33.927
> 
> 标签：sql-server, visual-studio, reference, add-in

使用 Microsoft.SqlServer.Management.SqlStudio.Explorer；

![在此处输入图像描述](../Images/46c56bcfdea6f23b4f799b6ecd381b4f.png)

找不到这个请协助 **[更新]**

在此文件夹 C:\Program Files (x86)\Microsoft SQL Server\110\ 中找到了 dll（在 Windows 资源管理器中只需搜索缺少的引用并添加 .dll）

![在此处输入图像描述](../Images/c91f3e026c0bf4079a4cba45983b5cf7.png) **[更新]** 好吧，我的错误我将目标框架更改为 .Net 4 客户端配置文件，但必须更改为 .Net4 框架并且构建成功

所以无法解决这个我还需要做什么？

这是困扰我的终极错误 ![在此处输入图像描述](../Images/897198c25fb772334b4f19d0721cb486.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:19:07.937

你写的是一个命名空间，而不是一个程序集。您可能正在寻找`Microsoft.SqlServer.Management.SDK.SqlStudio`组装。

请注意，并非所有程序集都列在此对话框中。例如，这可以在（程序文件）`Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\`目录中找到，您可以使用该`Browse`功能添加引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:19:42.140

您可能会发现此博客条目很有用： [https ://www.sqlskills.com/blogs/jonathan/sql-server-2012-extended-events-add-in-to-manage-2008r2-instances/](https://www.sqlskills.com/blogs/jonathan/sql-server-2012-extended-events-add-in-to-manage-2008r2-instances/)

# assembly - 组装 MIPS TA1 说明

> ID：10063431
> 
> 赞同：0
> 
> 时间：2012-04-08T14:10:36.577
> 
> 标签：assembly, mips, instructions

有人可以指向一个列表或包含所有汇编 (MIPS) TAL 指令的东西吗？

我相信

```
mul $8, $17, $20 
```

会变成

```
mult  $17, $20
mflo  $8 
```

但我无法找到所有说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:18:57.217

假设您的意思是 MIPS 汇编器伪操作码，[这里](http://en.wikipedia.org/wiki/MIPS_architecture#Pseudo_instructions)有一个列表可以帮助您入门。我不知道“TAI”或“TAL”指令应该是什么。

# javascript - 使用属性等于选择器时转义元素名称中的方括号

> ID：10063433
> 
> 赞同：0
> 
> 时间：2012-04-08T14:11:39.670
> 
> 标签：javascript, jquery, regex

请考虑以下代码：

`$('[name='+temp[i][0]+']').prev().addClass('form_error');`

其中 temp[i][0] 是一个数组项，其中包含一个包含方括号的表单字段的名称（因为它代表一个复选框数组） `name_of_field[]`，.

为了使它工作，我知道我应该转义表单字段名称中的方括号。但是，由于我是正则表达式的新手，我似乎无法正确理解它。谁能给我正确的代码？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:15:24.423

只需引用该值，然后转义引用：

```
var name = temp[i][0];
name = name.split('"').join('\\"');                   // Escaped " is \\"
$('[name="'+name+'"]').prev().addClass('form_error'); 
```

这也解释了其他有效名称，但无效的选择器字符，例如`$`.

如果您真的想使用正则表达式，那么以下内容就足够了（故意使用单行代码来表明短代码并不总是可读的）：

```
$('[name="' + temp[i][0].replace(/"/g, '\\"') + '"]').prev().addClass('form_error');
//            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T07:19:27.423

I thought I might clarify this, as I will no doubt be going back to this issue again.

The above problem may be best solved with the above 'regular expression' replacement, however, if you are just trying to access a statically named element(s) like below, then here is your simple guide:

```
<input type="text" name="mytextelement[]" />
<input type="text" name="mytextelement[]" />

<script>
//using vanilla javascript

document.querySelector('[name="mytextelement\[\]"]'); //gets the first element only

document.querySelectorAll('[name="mytextelement\[\]"]'); //gets an array of above elements

//using jQuery

$('[name="mytextelement\[\]"]'); //gets all elements

<script> 
```

# magento - cataloginventory_stock_status_idx 表的意义何在？

> ID：10063434
> 
> 赞同：7
> 
> 时间：2012-04-08T14:11:42.670
> 
> 标签：magento

我已经非常努力地理解cataloginventory_stock 关系——我知道stock_item 和stock_status 表都会在库存项目被修改时更新，但我无法弄清楚stock_status_idx 表是否真的是必需的。

据我所知，stock_status_idx 表包含与 stock_status 表相同的信息。它只是一个临时表吗？如果我手动更新 stock_item 和 stock_status 表，但没有更新 stock_status_idx 表，我没有看到任何错误的库存状态问题。

问题是..我认为它以某种方式用于缓存/索引器。但是，即使我没有修改 stock_status_idx 表，库存状态在后端和前端都显示得很好。

那么，stock_status_idx 表的意义何在？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-18T21:47:13.380

我想知道同样的问题并决定挖掘，因为我无法在任何地方找到答案。似乎 _tmp 和 _idx 被用作索引数据的临时持有者。

例如，您可以查看其中的`reindexAll()`方法`app/code/core/Mage/Catalog/Model/Resource/Category/Indexer/Product.php`，您将了解它在生成索引时使用 _idx 表来临时存储它的数据：

```
$this->useIdxTable(true);
...
$idxTable = $this->getIdxTable();
....
$query = $select->insertFromSelect($idxTable, ... 
```

在同一方法结束时，您会注意到一个不错的`$this->syncData()`方法调用。你可能猜到了！该函数存在 `app/code/core/Mage/Index/Model/Resource/Abstract.php`并正在这样做，将_idx与main同步：

```
$this->_getWriteAdapter()->delete($this->getMainTable());
$this->insertFromTable($this->getIdxTable(), $this->getMainTable(), false);
$this->commit(); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T15:28:44.837

idx 表仅在 Magento 需要根据库存项目选择许多产品时使用，因此这些表上的索引比使用主库存表更快。

我建议您也将数据写入此表。或者更好的是，使用 Magento API 或 Magento App over PHP 写入 Magento 数据库，更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T15:58:28.813

我出于同样的原因（直接在 Mysql 中更新库存数量）对此进行了研究，并将使用 Magento 的内置索引器功能和 "cataloginventory_stock" 。我喜欢这个功能，因为它只需要几秒钟就可以在我的服务器上运行。

您可以访问 magento 索引器并获取一些不错的信息

/[您的商店主页]/shell 然后运行：/usr/bin/php -f indexer.php info

这是仅运行目录库存重新索引的 crontab 行： 30 3 * * * /usr/bin/php -f /home/client/www/shell/indexer.php --reindex cataloginventory_stock

# mysql - MySQL 查询值 + 1

> ID：10063440
> 
> 赞同：0
> 
> 时间：2012-04-08T14:13:01.323
> 
> 标签：mysql, sql, phpmyadmin

我想更新表中特定值的列自动增加，我使用了这个查询：

```
Update wp_postmeta 
set meta_value = 11622 + 1
WHERE  `meta_key` =  '_thumbnail_id'
ORDER BY  `wp_postmeta`.`post_id` ASC 
```

它的工作，但 meta_value 列中的所有值都变得相等，任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:14:55.913

```
Update wp_postmeta 
set meta_value = (meta_value + 1)
WHERE  `meta_key` =  '_thumbnail_id' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:21:21.057

可以使用下面的sql，“update”sql中不需要“ORDER BY”。

```
Update wp_postmeta 
set meta_value = meta_value+1
WHERE  `meta_key` =  '_thumbnail_id' 
```

# c# - 给定场景的适当模式

> ID：10063444
> 
> 赞同：0
> 
> 时间：2012-04-08T14:14:12.450
> 
> 标签：c#, .net, design-patterns, hierarchy

我正在为存在以下实体的服务开发 .NET 包装器：

*   **根**属性名称、文件、文件夹、项目
*   **项目**属性名称、方法创建、重命名、删除
*   **文件**属性名称、方法创建、重命名、删除
*   **文件夹**属性 名称、文件、文件夹、方法 创建、重命名、删除

如您所见，根实体（即单例）可以保存一些文件、文件夹和项目。项目只能由 Root 持有，不能存在于任何文件夹中。另一方面，文件和文件夹可以由根实体和文件夹实体持有。

我试图弄清楚将这种情况投射到代码中的最佳方法是什么。

Service.Root 将是一个单例属性，可能没有更多的东西。

Service.Root.Files & Service.Root.Folders - 我应该为此目的制作文件和文件夹类的自定义集合吗？如果是，我是否应该仅通过这些集合上的方法创建文件和文件夹类的新实例？或者我应该允许开发人员通过为它创建一个公共构造函数来创建文件/文件夹而不显式引用服务？我猜不会？因为例如重命名文件会调用与网络一起使用的 Service 上的方法。那么文件、项目和文件夹的每个实例都应该引用服务吗？

这个问题可能很混乱，但我不知道如何解释，对不起。一般来说，我问的是制作文件/项目/文件夹类型的自定义集合是否是个好主意，或者公开通用集合是否更好。此外，如果您知道我的意思，这些公开的集合是否应该是只读的并通过调用 Service.CreateNewFile() 而不是 Service.Folders[0].Add(New File()) 创建新文件。

感谢您提供讨论此类开发模式的任何努力和/或良好链接。

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:17:19.187

您可以同时使用两者来实现您的目标。将集合公开为属性将为用户提供最灵活和熟悉的界面。但是，对集合进行更多控制，将它们公开为只读属性，然后提供添加、删除等方法，将为类设计者提供更多控制。这可能会导致更少的问题，因为只能通过有限的接口访问集合。因此，您的权衡是灵活性与控制之间的一种。这两种方法都行得通。

# c# - 带有 Gridview、Access、DateTime 和转换的 C#

> ID：10063447
> 
> 赞同：-1
> 
> 时间：2012-04-08T14:14:50.307
> 
> 标签：c#, database, string, datetime, gridview

我一直在经历这些议案，但似乎仍然无法做到这一点。我在从访问数据库填充的网格视图中有文本框。它们都是日期时间值。在后端代码中，我试图遍历所有这些值，然后应用条件格式。由于某些未知原因，我无法从网格视图中的这些文本框中获取值，当我这样做时，应用程序会将它们视为字符串而不是日期时间。转换是徒劳的，因为同样的错误，“字符串未被识别为有效的日期时间。” 不断弹出。

关于如何从 gridview 文本框中获取值，然后将它们从字符串转换为日期时间格式的任何想法？

这是到目前为止的代码......

```
for (int p = 0; p < rowscount; p++)
 {
     var myLabel2 = (TextBox)GridView1.Rows[p].Cells[0].FindControl("Label2");
     var myLabel4 = (TextBox)GridView1.Rows[p].Cells[0].FindControl("Label4");

     DateTime start = Convert.ToDateTime(myLabel2.Text).Date;
     DateTime now = DateTime.Now.Date;
     DateTime end = Convert.ToDateTime(myLabel4.Text).Date;

     if (now >= start && now <= end)
     {
         myLabel2.BackColor = Color.Chartreuse;
         myLabel4.BackColor = Color.Chartreuse;
         myLabel7.BackColor = Color.Chartreuse;
         myLabel9.BackColor = Color.Chartreuse;
     }
     else
     {
         myLabel2.BackColor = Color.White;
         myLabel4.BackColor = Color.White;
         myLabel7.BackColor = Color.White;
         myLabel9.BackColor = Color.White;
     }
 } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:21:33.570

```
DateTime date = DateTime.ParseExact(myLabel2.Text, "dd/MM/yyyy", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:40:55.713

这看起来像日期时间格式问题。您的 GridView 以一种方式将日期时间转换为字符串，并且您尝试使用不同的格式将其转换回日期时间。而不是`Convert.ToDateTime`尝试使用[`DateTime.ParseExact(String, String, IFormatProvider)`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
CultureInfo provider = CultureInfo.InvariantCulture;
string format = "dd/MMM/yyyy h:mm tt zzz";
DateTime result = DateTime.ParseExact(dateString, format, provider); 
```

使用适用于您的案例的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:43:23.357

文本框都在第一列`GridView1`吗？对于代码：

```
var myLabel2 = (TextBox)GridView1.Rows[p].Cells[0].FindControl("Label2");
var myLabel4 = (TextBox)GridView1.Rows[p].Cells[0].FindControl("Label4"); 
```

这意味着您的文本框的名称是“Label2”和“Label4”，它们都在您`Cells[0]`用来获取它们的第一列中。你必须确保这一点。

您可以在上面的代码中添加断点，并对其进行调试。您可以查看是否 `myLabel2`有`myLabel4`任何价值。

# jquery - 我怎样才能得到html 使用 jQuery 标记的内容

> ID：10063451
> 
> 赞同：0
> 
> 时间：2012-04-08T14:15:07.217
> 
> 标签：jquery, html, html-select

我有一个简单的选择标签：

```
<select>
  <option></option>
  <option></option>
</select> 
```

然后我想使用 jQuery 获取选项的内容：

```
var s=$('select option');
for(var i=0;i<s.length;i++){
    console.log(s[i]);
} 
```

它只会显示`"<option>"`，没有内容。

如果我使用`console.log(s[i].html());`，它会告诉我这是错误的。

那么如何获取内容呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:28:26.390

您不需要 jQuery 来获取文本内容。

安`HTMLOptionElement`有一个`.text`财产。

```
var s = $('select option');

for(var i = 0; i < s.length; i++) {
    console.log(s[i].text);
} 
```

* * *

虽然如果你想要`.outerHTML`元素*（你的问题有点困惑）*，你可以这样做......

```
var s = $('select option');

for(var i = 0; i < s.length; i++) {
    console.log(s[i].outerHTML);
} 
```

...虽然这只是最近才在 Firefox 中可用，所以您可以创建一种方法来修补它...

```
function outerHTML(el) {
    return el.outerHTML || document.createElement('div')
                                   .appendChild(el.cloneNode(true))
                                   .parentNode
                                   .innerHTML;
} 
```

...并像这样使用它...

```
var s = $('select option');

for(var i = 0; i < s.length; i++) {
    console.log(outerHTML(s[i]));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:17:24.597

假设“内容”是指选项的文本值，试试这个：

```
$("select option").each(function() {
    console.log($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:17:26.173

使用[text()](http://api.jquery.com/text/)方法提取元素的文本节点值

# qt - 不想在我的对话框上有关闭按钮

> ID：10063454
> 
> 赞同：2
> 
> 时间：2012-04-08T14:15:29.513
> 
> 标签：qt

是否可以从 QDialog 中删除关闭按钮？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T14:29:42.867

使用[窗口](http://qt-project.org/doc/qt-4.8/widgets-windowflags.html) [标志](http://qt-project.org/doc/qt-4.8/qt.html#WindowType-enum)。例如：

```
QDialog d(0, Qt::CustomizeWindowHint|Qt::WindowTitleHint);
d.exec(); 
```

# c# - 如何使用事件溯源模式处理事件处理程序中的代码修改

> ID：10063459
> 
> 赞同：1
> 
> 时间：2012-04-08T14:16:06.207
> 
> 标签：c#, design-patterns, event-sourcing

我正在尝试使用事件溯源模式，但有一件事让我很困扰。

如果我更改某些事件处理程序的源代码会怎样规则检查。

这是否意味着事件处理代码应该是不可变的？（一旦你写了它，你就再也不会碰它了）。我真的不喜欢这个主意。

***经过不久的研究和思考，我得出结论，Event 是一个消息，并且像 SOA 中的任何消息一样，它应该是版本化的。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:25:33.960

我假设我们正在讨论在 C# 4.0 中实现[http://www.martinfowler.com/eaaDev/EventSourcing.html 。](http://www.martinfowler.com/eaaDev/EventSourcing.html)

一般来说，作为一个库编写者，如果你创建一个公共方法、属性或事件，你就向消费者承诺你不会去改变它。

如果您想增加事件传递的对象类型的灵活性，请发送对象类型的 arg，并在处理时使用反射来确定您收到的内容，并正确分派它。

规则检查和异常传播可以通过 Calcelable 事件来处理，或者通过简单地在 arg 中打包和发送异常来处理。但是你必须问自己——这些东西是如何影响被观察物体的状态的？

# c# - 使用时间跨度显示总持续时间

> ID：10063462
> 
> 赞同：1
> 
> 时间：2012-04-08T14:16:27.087
> 
> 标签：c#, asp.net, .net, datetime, timespan

我需要帮助来显示这样的东西。如果您认识，这是我们 Stack Overflow 帐户的会员期限。

```
member for  2 years, 3 months 
```

我需要稍微修改一下。我的条件和显示格式如下：

```
 Conditions              Display Format
1\. Below 7 days  ->       Days (5 days)
2\. 7 -30 days    ->       Weeks, days   ( 2 Weeks, 3 Days) in case of 17 days.
3\. 30 - 365      ->       Months, Weeks, Days (4Months, 2Weeks, 2Days) in case of 136 days
3\. 365 or grter  ->       Years, Months only (2years, 3 Months)

What I did: 
```

我正在使用 Timespan 来获取日期差异。但我对我的输出不满意。我有一个会员，其注册在 2-3 天后将 2 个月大，但仍然显示 1 个月前。这是我的代码：

```
 TimeSpan ts = DateTime.Now - Convert.ToDateTime(company.RegistrationDate);

                 if (ts.Days > 365)
                    membersince.InnerText = string.Format("{0} years", (ts.Days / 365));
                else if (ts.Days < 30)
                    membersince.InnerText = string.Format("{0} days", ts.Days);
                     else if(ts.Days > 30)
                    membersince.InnerText = string.Format("{0} months", (ts.Days/30)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:32:57.640

您可以使用[Time Period Library for .NET库的](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)**DateDiff**类：

```
// ----------------------------------------------------------------------
public void DateDiffSample()
{
  DateTime date1 = new DateTime( 2009, 11, 8, 7, 13, 59 );
  Console.WriteLine( "Date1: {0}", date1 );
  // > Date1: 08.11.2009 07:13:59
  DateTime date2 = new DateTime( 2011, 3, 20, 19, 55, 28 );
  Console.WriteLine( "Date2: {0}", date2 );
  // > Date2: 20.03.2011 19:55:28

  DateDiff dateDiff = new DateDiff( date1, date2 );

  // elapsed
  Console.WriteLine( "DateDiff.ElapsedYears: {0}", dateDiff.ElapsedYears );
  // > DateDiff.ElapsedYears: 1
  Console.WriteLine( "DateDiff.ElapsedMonths: {0}", dateDiff.ElapsedMonths );
  // > DateDiff.ElapsedMonths: 4
  Console.WriteLine( "DateDiff.ElapsedDays: {0}", dateDiff.ElapsedDays );
  // > DateDiff.ElapsedDays: 12
  Console.WriteLine( "DateDiff.ElapsedHours: {0}", dateDiff.ElapsedHours );
  // > DateDiff.ElapsedHours: 12
  Console.WriteLine( "DateDiff.ElapsedMinutes: {0}", dateDiff.ElapsedMinutes );
  // > DateDiff.ElapsedMinutes: 41
  Console.WriteLine( "DateDiff.ElapsedSeconds: {0}", dateDiff.ElapsedSeconds );
  // > DateDiff.ElapsedSeconds: 29
} // DateDiffSample 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:25:07.103

为什么这是个问题？如果一个人的年龄是 57 天，那么`57 / 30 == 1`. 如果您希望`2`摆脱这种情况，那么您应该

1）确保您的除法结果是双倍的（只需除以`30.0`而不是`30`）。原因是这`int / int`也是一个`int`.

简单测试：
`(57 / 30).GetType().Name == Int32`
`(57 / 30.0).GetType().Name == Double`

也`(int)1.9 == 1`。

2）`Math.Round()`结果。这将是实际的数学舍入，而不是仅删除小数点后的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T14:38:31.467

只需使用`TotalDays`which 会给你加倍（并且更“政治上”正确，`Days`就像组件一样，尽管在你的情况下是相似的），并且`Math.Round()`正如@Ilia 已经建议的那样“最近”。

```
Math.Round(ts.TotalDays); 
```

...或者

```
String.Format("{0:0.##}", ts.TotalDays); 
```

...这应该给你喜欢`1.7 months`（我记得我的头脑或测试你的获胜格式）

**这更像是一个逻辑和用户界面问题**，如何“呈现”给用户。

编辑：仅`TotalDays`用于格式化为`1.7`- 或使用 Math.Round 获得一个月

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:52:50.640

```
static public string calculateAge(DateTime birthDate, DateTime now)
{
  birthDate = birthDate.Date;
  now = now.Date;

  var days = now.Day - birthDate.Day;
  if (days < 0)
  {
    var newNow = now.AddMonths(-1);
    days += (int)(now - newNow).TotalDays;
    now = newNow;
  }
  var weeks = days / 7;
  days = days - weeks * 7;
  var months = now.Month - birthDate.Month;
  if (months < 0)
  {
    months += 12;
    now = now.AddYears(-1);
  }
  var years = now.Year - birthDate.Year;

  if (years > 0)
  {
    if (months > 0)
      return string.Format("{0} Years, {1} Months", years, months);
    else
      return string.Format("{0} Years", years);
  }
  if (months > 0)
  {
    var builder = new StringBuilder();
    builder.AppendFormat("{0} Months", months);
    if (weeks > 0)
      builder.AppendFormat(", {0} Weeks", weeks);
    if (days > 0)
      builder.AppendFormat(", {0} Days", days);
    return builder.ToString();
  }
  if (weeks > 0)
  {
    if (days > 0)
      return string.Format("{0} Weeks, {1} Days", weeks, days);
    return string.Format("{0} Weeks", weeks);
  }

  return string.Format("{0} Days", days);
} 
```

# php - Yii更新mysql时出错

> ID：10063465
> 
> 赞同：0
> 
> 时间：2012-04-08T14:16:48.077
> 
> 标签：php, yii

我在更新 mysql 中的表时遇到问题。我正在使用 yii 框架。这是我的更新代码：

```
$sql='UPDATE bs_user SET is_activated=1 WHERE (email=:mail AND guid=:guid)';
$command=Yii::app()->db->createCommand($sql);
$command->bindValue(':mail', $model['mail'], PDO::PARAM_STR);
$command->bindValue(':guid', $model['guid'], PDO::PARAM_STR);
$result=$command->execute(); 
```

我收到以下错误：

> CDbCommand 执行 SQL 语句失败：SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; 尝试重新启动事务。执行的 SQL 语句是：UPDATE bs_user SET is_activated=1 WHERE (email=:mail AND guid=:guid)

“选择”的类似代码效果很好。

我怎么解决这个问题？

# java - 我的 logout.jsp 代码的其他修复

> ID：10063466
> 
> 赞同：0
> 
> 时间：2012-04-08T14:16:53.240
> 
> 标签：java, jsp

各位晚上好

我需要有关如何修复 logout.jsp 代码的帮助。我正在使用 MVC。为了提取我的问题，我的问题是我有这个 SidePannel.jsp 和 Content.jsp 放在我的 index2.jsp 中。SidePannel.jsp 包含在 Content.jsp 中链接的链接，Content.jsp 将根据在 SidePannel.jsp 中单击的链接显示相应的值。问题是每次我实现我的 logout.jsp 时，它都可以工作，但仅在 Content.jsp 中，到 login.jsp 的重定向将显示在 content.jsp 中，Sidepannel.jsp 仍将保留并仍在工作。无论如何在 login.jsp 中完全重定向整个系统？我将把 LogOut.jsp 链接放在哪里？

对于我到目前为止所做的事情。

LogOut.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>El Tres</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<%
if(session.getAttribute("username")== null ||     session.getAttribute("username").equals(""))
{
session.invalidate();
response.sendRedirect("login.jsp");
response.setHeader("Pragma", "No-cache");
response.setHeader("Cache-Control", "no-cache");
response.setHeader("Cache-Control", "must-revalidate");
response.setDateHeader("Expires",-1);
}
%>
</body>
</html> 
```

侧面板.jsp

```
<body>
<%
String role = (String) session.getAttribute("userRole");

if(role.equals("Admin")){
%>
<jsp:include page="SidePanelAdmin.jsp"/>
<%
}
else
{
%>
<jsp:include page="SidePanelFaculty.jsp"/>
<%
}
%>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:36:13.550

听起来您正在使用`<iframe>`或类似的东西将内容和侧面板页面嵌入到 mainf“索引”页面中。

我建议您改为使用 JSP 包含进行嵌入。这将比 iframe 更有效，因为只提供一个文档而不是三个。它还将解决您当前的问题......如果我正确理解您的描述。

# algorithm - 在解决重复问题时，地板和天花板何时重要？

> ID：10063468
> 
> 赞同：12
> 
> 时间：2012-04-08T14:17:19.480
> 
> 标签：algorithm, math, recurrence, asymptotic-complexity

在解决重复问题时，我遇到了忽略地板和天花板的地方。

来自[CLRS](https://rads.stackoverflow.com/amzn/click/com/0262033844) *（第 4 章，第 83 页）*的示例，其中忽略了地板：

![在此处输入图像描述](../Images/0c075e29034f7107216baf3a0a89ff96.png)

[这里](http://www.csee.umbc.edu/%7Enam1/TA/HWSols/hw2sol.pdf)（*第 2 页，练习 4.1-1*）是一个忽略上限的示例：（ *编辑：我从公众舆论中得知这有点可疑。）*

![在此处输入图像描述](../Images/a4a122cd65f27d928e818c9eee4e4955.png)

事实上，在[CLRS](https://rads.stackoverflow.com/amzn/click/com/0262033844) ( *pg.88* ) 中提到：

**“解决重复问题时，地板和天花板通常无关紧要”**

我的问题：

1.  这里的“通常”是指所有情况吗？如果是的话，我可以一直忘记它们。
2.  如果不是，那么**在解决重复问题时，地板和天花板何时真正重要**？

*注意：这不是作业问题。我在刷新我的 DS 和算法概念时想到了它。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T14:59:35.427

对于所有*x* ，地板和天花板函数满足以下不等式：

*   *x* −1 < ⌊ *x* ⌋ ≤ *x*

*   *x* ≤ ⌈ *x* ⌉ < *x* +1

因此，在第一个示例中，我们有 ⌊ *n* / 2⌋ ≤ *n* / 2。此外，由于对数是单调递增函数，我们知道 lg ⌊ *n* / 2⌋ ≤ lg( *n* / 2)。把这些放在一起，我们得到第一个不等式 2( *c* ⌊ *n* / 2⌋ lg ⌊ *n* / 2⌋) + *n* ≤ *cn* lg( *n* / 2) + *n*。

第二个示例实际上包含一个错误：*c* lg ⌈ *n* / 2⌉ + 1 永远不会小于但可以等于*c* lg( *n* / 2) + 1。但是，确实*c* *lg* ⌈ *n* / 2⌉ + 1 ≤ *c* lg( *n* / 2 + 1) + 1，然后我们可以从上面通过*c* lg( *n* / 2) + 2 来限制它（假设*n* ≥ 2），从而得出所需的结论*T* ( *n* ) ∈ *O* (lg *n* )。

事实上，第二个示例也包含其他错误：即使使用以下段落中所述的假设（您没有引用），最后一个 = 符号应该是 ≤。

（Ps. 唷，没有 LaTeX 打字真的很痛苦。这就是为什么最好在[math.SE](http://math.stackexchange.com)上问这些问题。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T15:12:54.870

您的两个示例都可以通过主定理进行分析。[Akra-Bazzi 定理](http://en.wikipedia.org/wiki/Akra-Bazzi_method)概括了主定理，并给出了何时可以忽略小扰动的充分条件（扰动 h(x) 为 O(x/log 2 ^x )）。对于 Akra–Bazzi 可分析的整数索引递归，您可以*始终*忽略地板和天花板，因为它们的扰动最多为 1。

Akra-Bazzi 未涵盖的每一个重复在算法和数据结构的背景下都非常奇特。

# python - 使用 pyQT 处理文件

> ID：10063472
> 
> 赞同：0
> 
> 时间：2012-04-08T14:17:55.407
> 
> 标签：python, xml, pyqt, file-handling, qstring

我正在开发一个钢琴学习软件。为此，我需要保存用户注册的配置文件的详细信息。现在我正在使用 python 文件处理，但有一些问题。那么我应该怎么做才能使用 XML 或 Qstring 文件。假设我必须为每个配置文件保存 user_name(string),lesson_id(integer)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:29:31.323

对于如何解决这个问题，您有多种选择。决定使用哪一个的最大因素取决于您需要如何访问这些数据。如果此数据仅用于您的应用程序的内部使用，则您不需要使用 XML 等通用格式。

**数据库**

因为您正在 Qt 中编写钢琴应用程序，所以我认为唯一合适的数据库解决方案是 sqlite3。PyQt 具有用于此功能的 QtSql 模块。请参阅[QSqlDatabase](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsqldatabase.html)。这可以与可移植和嵌入式的 sqlite3 一起使用。如果您不需要进行查询，则此方法可能会过大。如果您需要做的只是调出保存的配置文件，请查看其他方法。这种数据库方法会稍微增加打包应用程序的大小。

**[设置](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsettings.html)**

我通常使用[QSettings](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsettings.html)来保存有关界面的状态信息（大小、位置、各种小部件的上次设置），但您可以保存任何您想要的东西。它会自动为当前平台使用适当的用户位置和格式。

**简单酸洗**

如果您只想使用手动保存配置文件的方法，您可以使用[cPickle腌制您的配置文件数据](http://docs.python.org/library/pickle.html#module-cPickle)

```
import cPickle

data = {'user_name': 'foo', 'lesson_id': 5}
with open('/path/to/profile.file', 'wb') as profile:
    cPickle.dump(data, profile) 
```

如果您确实需要人类可读的格式，您可以在这里轻松地使用 json：

```
import json

data = {'user_name': 'foo', 'lesson_id': 5}
with open('/path/to/profile.file', 'wb') as profile:
    json.dump(data, profile) 
```

在这种情况下，我个人的建议是使用 QSettings。它自动基于用户，用于存储配置文件数据。

# java - ArrayList 比较并获取共享值

> ID：10063475
> 
> 赞同：1
> 
> 时间：2012-04-08T14:18:38.583
> 
> 标签：java, arraylist

我正在努力寻找解决以下问题的方法。我有 4 个不同的 ArrayList 从数据库中获取它们的值。它们的大小可以从 0（包括）到任何时候。每个列表也可能具有不同的大小和值。我想要有效地做的是：比较所有非 0 大小的列表并检查它们是否有一些共同的整数以及这些值是什么。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T14:21:40.700

如果您需要所有公共整数的集合，不包括空整数：

```
List<List<Integer>> lists = ...
Collection<Integer> common = new HashSet<Integer>(lists.get(0));
for (int i = 1; i < lists.size(); i++) {
   if (!lists.get(i).isEmpty()) 
     common.retainAll(lists.get(i));
} 
```

最后，`common`将包含对所有这些都通用的整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:23:42.400

您可能想要使用 apache commons[`CollectionUtils.intersection()`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#intersection%28java.util.Collection,%20java.util.Collection%29)来获取两个集合的交集......

迭代地生成交集，如果完成后它不为空 - 你有一个公共元素，它就在这个结果集合中。

关于空列表：只需检查它`size()`是否为 0，如果是 - 跳过此列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T14:26:49.857

您可以对 ArrayList 对象使用集合交集操作。

像这样的东西：

```
List<Integer> l1 = new ArrayList<Integer>();

l1.add(1);
l1.add(2);
l1.add(3);

List<Integer> l2= new ArrayList<Integer>();
l2.add(4);
l2.add(2);
l2.add(3);

List<Integer> l3 = new ArrayList<Integer>(l2);
l3.retainAll(l1); 
```

现在，l3 应该只有 l1 和 l2 之间的共同元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:26:06.497

你可以这样做。如果要搜索多个元素，请将搜索置于循环中。

列出 aList = new ArrayList(); aList.add(新整数(1));

if(aList !=null && !aList.isEmpty()) { if(aList.contains(1)) { System.out.println("知道了"); } }

# javascript - Javascript/AJAX 仅在调试时有效

> ID：10063481
> 
> 赞同：1
> 
> 时间：2012-04-08T14:19:56.927
> 
> 标签：javascript, ajax

目前我正在尝试动态填充网站。当我单步执行代码时，它运行良好。但是，当我按预期在页面加载时运行它时，它不起作用。相关代码为：

```
<body onload="populate_all(string)";>

function populate_all(string)
{
  var split = string.split(" ");
  for(i = 0; i < split.length; i++)
  {
    populate(split[i], 'main'); 
  }
} 

function populate(string, location)
{
  if (string.length==0)
  { 
   document.getElementById(location).innerHTML="";
   return;
  }

  if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
  }
  else
  {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

  xmlhttp.onreadystatechange=function()
 {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
        var divTag = document.createElement("div");

        divTag.className ="info";

        divTag.innerHTML = xmlhttp.responseText;

        document.getElementById(location).appendChild(divTag);
  }
 }
 xmlhttp.open("GET","populate.php?string="+string,true);
 xmlhttp.send();
 } 
```

我已经阅读了这个问题，足以确定 php 不是问题。基本上：我在一个循环中多次运行带有 AJAX 的 javascript 函数，并且代码仅在我调试它时才有效。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:21:18.747

1.  `xmlhttp`本地[声明。](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)
2.  使用**不同**的变量名称作为`location`. [`location`](https://developer.mozilla.org/en/window.location)是一个全局变量，它保存着操纵当前位置的属性和方法。

    ```
    function populate(string, s_location) {
        var xmlhttp; 
    ```

目前，您不断覆盖方法`xmlhttp`中的变量`populate`。结果，`xmlhttp`对象指向最后一个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T16:01:41.237

对我来说是这样的：[在成功函数之外使用 javascript 变量](https://stackoverflow.com/questions/17691528/use-javascript-variable-outside-success-function/17691643#17691643)

在调用 $.getJSON 等时，附加调试器会修复/更改时间和范围。我正在从定时后台事件触发的 xhr 响应中更新表格单元格值，并且我需要在嵌套的成功函数中进行单元格更新。随着调试器的附加，事情神奇地起作用了。

# javascript - 在 Javascript 中运行代码以使 PHP 和 HTML 文件从 ONLOAD 事件运行

> ID：10063482
> 
> 赞同：0
> 
> 时间：2012-04-08T14:20:13.303
> 
> 标签：javascript, php, html, dom-events, onload

作为一个新手，我正在尝试运行一个 PHP 文件，然后在 HTML `onload="Trigger();"`正文中自动使用一个 HTML 文件。

随附的是我的代码，但即使`onload`正在访问 Javascript 代码，它也不起作用。

```
<html>
    <head>
        <meta http-equiv="Content-Language" content="en-ca">
        <meta name="GENERATOR" content="Microsoft FrontPage 5.0">
        <meta name="ProgId" content="FrontPage.Editor.Document">
        <script src="jquery.js" language="javascript1.2" type="text/javascript"></script>
        <script src="swapstyle.js" language="javascript1.2" type="text/javascript"></script>
        <script src="cookie.js" language="javascript1.2" type="text/javascript"></script>
        <script language="Javascript">
            function Trigger() {
                document.Trigger.action = "http://www.Website.com/ISP.php";
                document.Trigger.target = "_top";
                document.Trigger.submit();
                document.Trigger.action = "http://www.Website.com/Home.html";
                document.Trigger.target = "_top";
                document.Trigger.submit();
                return true;
            }
        </script>
    </head>
    <body onload="Trigger();"></body>
</html> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:22:17.537

看起来您需要在加载时提交两个表单。在您的 HTML 中创建两个表单，但问题是您的目标是同一个框架，所以当一个正在提交时，另一个也在尝试（您可以计时以便一个提交，另一个等到它被提交或定位另一个像这样的框架：

```
<body onload="trigger();">
    <form name="php-form" action="http://www.Website.com/ISP.php" target="_top">
    <form name="htm-form" action="http://www.Website.com/Home.html" target="_another">
</body> 
```

然后：

```
function trigger(){ 
    document.php-form.submit(); 
    document.htm-form.submit();
} 
```

或一种定时方法，因此一个在使用相同目标后不久提交另一个：

```
<body onload="trigger();">
    <form name="php-form" action="http://www.Website.com/ISP.php" target="_top">
    <form name="htm-form" action="http://www.Website.com/Home.html" target="_top">
</body>

function trigger(){ 
    document.php-form.submit();
    setTimeout(function(){ document.htm-form.submit(); }, 2000); // 2 seconds after

} 
```

希望这会有所帮助。

# jsp - 检索图像并显示它而不在 Web 容器中暴露其路径

> ID：10063485
> 
> 赞同：0
> 
> 时间：2012-04-08T14:20:33.103
> 
> 标签：jsp, captcha

在我的大学 JSP 项目中，对于用户注册，我使用类似 CAPTCHA 的身份验证，并且我有一些具有简单数学挑战的图像（例如 2 * 5 = ？）。请注意，我没有使用任何第三方 API（如 reCAPTCHA）来满足此类要求，因为它需要我的项目能够访问 Internet，而我在项目演示期间无法访问。

现在，当用户单击注册表单中的提交时，我将在模态对话框中随机加载我收藏的任何图像。那么，加载图像的首选方式是什么，以使用户无法看到图像的真实路径（例如`<img src="/captcha-images/img2343.jpg"/>`），或者是否有任何其他首选（机器人安全）方式来执行此类用户验证而不使用图像或任何第三方图书馆。我知道在真正的 webapps 中使用了这样的库，但我提到了不使用任何此类的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:26:46.767

您通常会做的是通过调用动态页面来获取图像。img 标签可以接受任何类型的 URL，重要的是调用返回的标头。

因此，您可以使用以下网址

```
<img src="/captcha-images/security.action"/> 
```

只是作为一个例子。只要 security.action 返回的东西在浏览器看来是图像，它就会被渲染为图像。

在 security.action 中，您将拥有根据当前会话生成正确图像的所有逻辑，并确保验证码验证具有正确的凭据。

# database - 在表视图中开发大量数据的最佳方法是什么？

> ID：10063486
> 
> 赞同：0
> 
> 时间：2012-04-08T14:20:38.607
> 
> 标签：database, xcode, parsing, core-data, tableview

我是应用程序开发的新手。我正在使用 Xcode 4.3.2。我正在尝试使用带有表格视图的标签栏开发应用程序。在表格视图中，当用户选择一个城市时，我需要列出大约 100 个城市和有关这 100 个城市的信息。基本上，我已经在 Excel 电子表格中拥有了有关城市的数据。我真的找不到我想要达到的目标的好例子。我听说过解析 XML、SQLite、Core Data、数据库等的术语，但我不确定这是否是我需要做的。谢天谢地，我会接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:25:41.520

如果表中的数据正在更改或编辑，那么通过使用数据库，您将避免滚动带有这些微小更改的新补丁（您只需更改数据库中的值）

如果数据相同并且在很长一段时间内不会更改并且您打算修补应用程序，那么您只需要该数据的来源（电子表格）

对于解析数据，你可以使用任何东西，当显示 100 个城市时，这取决于你要查询的总数据有多大，它需要多快，你只需要对其进行基准测试。

如果您要查询大约 500k 条记录，并且需要做一些“弄清楚”并且加载时间太长。然后，将您的数据转换为 xml 然后解析它可能会给您带来更好的性能。

您至少必须设计自己的方式来实现您想要实现的目标。检查性能并对其进行调整以找到合适的位置。

现在，我将其视为解决未知问题。花一些时间建立一些东西。这将帮助您更好地了解潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:38:53.767

虽然数据库很好，但对于几百个元素，您可以容忍低效率。如果您现有的数据在 Excel 电子表格中，将它们导入您的应用程序的最简单方法是将 Excel 电子表格导出为逗号分隔值 (CSV)，然后让您的应用程序读取 CSV 文件。（如果您的 Excel 电子表格有多个工作表，则需要分别转换每个工作表。）

你如何解析 CSV？请参阅[iPhone：如何将 CSV 格式转换为 NSData 或 NSString？](https://stackoverflow.com/q/4507636/1318452)

你最终会得到 NSString 的数组。您可能需要为您的城市数据定义一个新类，并将导入数据中的每一行转换为一个城市元素。

如果您需要了解更多信息，从电子表格中发布几行可能会有所帮助。

# xcode - 如何将 .mm 文件添加到项目中？

> ID：10063490
> 
> 赞同：1
> 
> 时间：2012-04-08T14:21:21.927
> 
> 标签：xcode, object

我需要添加一个包含 ObjectC 和 C++ 的 .mm 文件，我想知道如何使用 XCode 4 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:25:53.220

这样做绝对没有问题，只需将**.mm**文件添加到项目中，XCode 就会将其编译为 Objective-C++。

唯一需要注意的是，与该 ObjC++ 代码关联的**.h**不得包含任何 C++ 特定代码，或者包含该标头的每个文件也必须是**.mm**。

这是因为 XCode 会根据单个文件使用不同的编译器，因此如果找到**.m**文件，它将尝试将其编译为纯 ObjC 而不是 ObjC++。您可以强制使用 che ObjC++ 编译器对其进行编译，但我建议您遵循所描述的原则或将其他文件重命名为**.mm**以避免使事情变得复杂。

# javascript - Javascript重写mousedown上的所有外部链接？

> ID：10063493
> 
> 赞同：1
> 
> 时间：2012-04-08T14:21:58.183
> 
> 标签：javascript, redirect, url-rewriting

如何使用单个 onmousedown 事件重写所有**外部链接？**

有点像 facebooks 用它的链接垫片做的事情

**请查看有关链接垫片的原始 Facebook 文章**：http : [//on.fb.me/zYAq0N](http://on.fb.me/zYAq0N)

**要求：**

*   应该适用于 mainsite.com 上的所有子域。

*   应该将 example.com 重定向到 mainsite.com/link.cgi?u=http://example.com

*   只应重定向不属于 mainsite.com 的链接。

**用途：**

这是为了保护私有网络应用程序的用户的安全，并保护推荐人。

正如 FB 文章中所指出的，最好在运行中进行以获得良好的 UI。

因此，当用户将鼠标悬停在某个链接上时，它会显示正确的链接，但是当他单击它时，js 会将其重定向到 my.site.com/link.cgi=http://link.com

提前致谢

**已解决：[https :](https://gist.github.com/2342509) **//gist.github.com/2342509****

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T14:31:48.200

对于单个链接：

```
function $(id){ return document.getElementById(id); }
$(link).onclick = function(){ this.href = "http://otherlink.com"; }

<a href="http://example.com" id="link">My Sheisty Link</a> 
```

因此，要获取所有外部链接：

```
window.onload = function(){
var links = document.getElementsByTagName("a");
for(a in links){
  var thisLink = links[a].href.split("/")[2];
  if(thisLink !=== window.location.hostname){
    links[a].href = "http://mainsite.com/link.cgi?u=" + links[a]; }
  // Or you could set onclick like the example above
  // May need to accommodate "www"
}} 
```

* * *

**编辑：**
找到了[这个答案](https://stackoverflow.com/a/1760127/731314)并有了更好的主意。

```
document.onclick = function (e) {
 e = e ||  window.event;
 var element = e.target || e.srcElement;

if (element.tagName == 'A') {
 var link = element.href.split("/")[2];
  if(link !=== window.location.hostname){
    links[a].href = "http://mainsite.com/link.cgi?u=" + links[a]; }
    return false; // prevent default action and stop event propagation
  }else{ return true; }
}}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:40:30.247

如果您使用 jQuery，那么以下将起作用

```
$('a:link').mousedown(function() { 
  this.href = 'http://my.site.com/link.cgi=' + this.href; 
}); 
```

否则

```
var anchors = document.getElementsByTagName('a');
for(var i = 0; i < anchors.length; i++) {
  var a = anchors[i];
  if(a.href) {
    a.addEventListener('mousedown', function(e) {
      this.href = 'http://my.site.com/link.cgi=' + this.href;
    }, false);
  }
} 
```**

# asp.net-mvc - 显示带有列标题的空白 JQGrid

> ID：10063494
> 
> 赞同：0
> 
> 时间：2012-04-08T14:22:01.247
> 
> 标签：asp.net-mvc, jqgrid

我想在页面加载时显示带有所有列标题但没有任何数据行的 JQGrid。

基于通过自动完成的用户选择，我想用数据填充 JqGrid。

问题是每次页面加载期间都会自动填充网格。

我怎样才能解决这个问题？

这就是我在 VS2008 MVC2 中使用网格的方式

```
jQuery('#jgrid').jqGrid({
    autowidth: true,
    altRows: true,
    altclass: 'grdAltRwClr',
    datatype: 'xml',
    forceFit: true,
    gridview: true,
    height: 290,
    mtype: 'post',
    rowList: [10, 20, 30],
    rowNum: 10,
    pager: '#pager',
    pagerpos: 'right',
    recordpos: 'left',
    rownumbers: false,
    scrollrows: false,
    sortname: 'roledtlid',
    toolbar: [true, "top"],
    url: rootPath + 'RoleDetail/JGridData',
    beforeSelectRow: function(rowid, e) { return false; },
    gridComplete: function() { GridComplete() },
    colModel: [
          { name: 'act', label: 'View', resizable: false, search: false, sortable: false, title: false, width: 6, index: 'act' }
        , { name: 'roledtlid', label: 'R.Detail id', width: 15, index: 'roledtlid' }
        , { name: 'roleid', label: 'Role id', width: 10, index: 'roleid' }
        , { name: 'rolename', label: 'Role Name', width: 25, index: 'rolename' }
        , { name: 'pageid', label: 'Page ID', width: 10, index: 'pageid' }
        , { name: 'pgname', label: 'Page Name', width: 30, index: 'pgname' }
        , { name: 'canadd', label: 'Add', width: 10, index: 'canadd' }
        , { name: 'canedit', label: 'Edit', width: 10, index: 'canedit' }
        , { name: 'candel', label: 'Delete', width: 10, index: 'candel' }
        , { name: 'canview', label: 'View', width: 10, index: 'canview' }
         ]
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:39:17.020

不要提供网址。而是将您的数据类型设置为“本地”并使用类似于以下的代码：

```
 var mySearchData = // Get your search data...

    $.post('@Url.Action("Getars")', mySearchData, function(gridData) {
        var rowIds = $('#carGrid').jqGrid('getDataIDs');

        for (var i = 0, len = rowIds.length; i < len; i++) {
            var currRow = rowIds[i];
            $('#carGrid').jqGrid('delRowData', currRow);
        }

        $('#carGrid').jqGrid('setGridParam', { data: gridData }).trigger('reloadGrid');
    }).error(function (jqXHR, textStatus) {
        app.showErrorAlert(jqXHR.responseText);
    });
} 
```

# android - Android Canvas.drawLine 不流畅，不一致

> ID：10063495
> 
> 赞同：3
> 
> 时间：2012-04-08T14:22:03.970
> 
> 标签：android, android-canvas, android-view

我正在尝试使用`Canvas.drawLine`方法来绘制多边形

这是我正在使用的代码

```
Canvas canvas = new Canvas(cache);
Paint paint = new Paint();
paint.setStrokeWidth(16);
paint.setColor(this.currentDrawing.getColor());
paint.setFlags(Paint.ANTI_ALIAS_FLAG);
systemCanvas.drawBitmap(cache, 0, 0, paint);
paint.setStrokeCap(Cap.ROOUND);
canvas.drawLine(from.getLeft(), from.getTop(), to.getLeft(), to.getTop(), paint); 
```

这是我得到的输出：

![在此处输入图像描述](../Images/fa3784e334c00f90f73ab6c624374f4e.png)

注意线条的渲染方式，它们在圆形上断裂并且连接不顺畅。我理解为什么会发生这种情况，但我不知道如何使它顺利和一致。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-03T07:41:50.043

您可能还想这样做

mPaint.setAntiAlias(true);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:35:38.693

请检查此答案，因为它与您的问题相似：

[Android 如何沿着手指画一条平滑线](https://stackoverflow.com/questions/8287949/android-how-to-draw-a-smooth-line-following-your-finger)

请让我知道这可不可以帮你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T18:01:02.267

您需要激活硬件加速。如果你不激活这个，你就不能使用antialias、cap、join等方法。

# c - 为什么更改 SO_RCVBUF 的值不起作用？

> ID：10063497
> 
> 赞同：9
> 
> 时间：2012-04-08T14:22:15.300
> 
> 标签：c, sockets, buffer, setsockopt

我正在制作一个创建 RAW 套接字以读取所有流量的程序。在调用 socket() 和 recvfrom() 之间（最后一个在循环中以从缓冲区中取出所有数据包）我等待 5 秒。

当我运行程序时，我用“更快模式”（快速填充缓冲区）的 hping3 命令向我的程序发送了大约 200 个数据包。5 秒过后，我的程序会从缓冲区中提取大约 150 个数据包。

我尝试更改接收缓冲区的大小以获得更好的结果：

```
int a = 65535;
if ( (setsockopt(sockfd, 0, SO_RCVBUF, &a ,sizeof(int)) ) < 0 )
{
    fprintf(stderr, "Error setting sock opts..\n");
} 
```

然而，无论 «a » 的值是 1 还是 10000000，似乎都没有任何变化，我仍然从缓冲区中获得约 150 个数据包。

有什么问题？

编辑：« a » 的值通过`getsockopt`调用进行验证。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T15:04:12.610

如果操作系统似乎仍然无法正常工作，您也可能会受到操作系统的限制。检查以下值：

```
/proc/sys/net/core/rmem_default
/proc/sys/net/core/rmem_max 
```

如果它是您在示例中所说的 TCP，而不是实际的原始套接字，您还可以检查以下值：

```
/proc/sys/net/ipv4/tcp_mem 
```

如果您在这些文件上运行 cat，它们会向您显示当前设置。要永久更改它们，请使用 sysctl。在开始更改之前写下这些设置是个好主意。这是有关进行这些更改的精彩教程：http: [//fasterdata.es.net/fasterdata/host-tuning/linux/](http://fasterdata.es.net/fasterdata/host-tuning/linux/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-08T14:38:21.640

的`level`论点`setsockopt`应该是`SOL_SOCKET`，而不是`0`：

```
int a = 65535;
if (setsockopt(sockfd, SOL_SOCKET, SO_RCVBUF, &a, sizeof(int)) == -1) {
    fprintf(stderr, "Error setting socket opts: %s\n", strerror(errno));
} 
```

# internet-explorer - 浏览器文档模式问题

> ID：10063498
> 
> 赞同：1
> 
> 时间：2012-04-08T14:22:30.277
> 
> 标签：internet-explorer, dojo, ie8-compatibility-mode

我们使用dojo 开发了一个应用程序，它在ie8 和FF 中运行良好。但是在测试过程中，由于一些测试人员将他们的 IE8 文档模式设置为默认为 IE7 标准，因此我们的应用程序的 UI 和某些功能无法正常工作。我们尝试使用如下元标记以编程方式更改文档模式，但它似乎不起作用..任何人都可以帮助解决这个浏览器兼容性问题..以编程方式。

```
<meta http-equiv="X-UA-Compatible" content="IE=8"> 
```

# linux - 批处理模式 SSH 给出错误“未设置 TERM 环境变量”

> ID：10063499
> 
> 赞同：9
> 
> 时间：2012-04-08T14:22:31.943
> 
> 标签：linux, ssh

我确保在 .bashrc 中定义了 TERM。

但是，在批处理模式下运行 ssh 时，我得到：

```
 $ ssh pc-lab7 "echo $TERM; echo $0"
    TERM environment variable not set.
    linux
    -bash 
```

如果我在交互模式下运行 ssh，我看不到这个错误。

如何消除此错误消息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-26T13:33:03.600

使用`-t`ssh 选项分配 tty

```
 -t      Force pseudo-tty allocation.  This can be used to execute arbitrary
         screen-based programs on a remote machine, which can be very useful,
         e.g. when implementing menu services.  Multiple -t options force tty
         allocation, even if ssh has no local tty. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T14:37:17.943

我终于找到了这个烦人的“未设置TERM环境变量”警告的原因。

事实证明，当 ssh 在没有交互式用户的情况下以批处理模式执行时，在启动脚本中调用“清除”命令将产生此错误。

注释掉脚本中的“清除”行为我解决了这个问题。

# jquery - Flexslider 在 ipad/iphone 上无法正常工作

> ID：10063504
> 
> 赞同：1
> 
> 时间：2012-04-08T14:23:17.310
> 
> 标签：jquery, flexslider

我在 1 个站点上有 2 个 flexslider。两者都有不同的 ID，都有绑定到它们的 flexslider，具有不同的设置：1 个元素将幻灯片设置为 true，第二个元素将幻灯片设置为 false。

在 PC 上，这按预期工作。

在 iPad、iPhone 和 Android 上，两个滑块都会自动进行幻灯片放映。多么可怕的问题！

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:51:39.050

只是禁用不工作的触摸启动

```
// slider.eventType = ('ontouchstart' in document.documentElement) ? 'touchstart' : 'click';
  slider.eventType = "click"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T02:39:24.160

如果使用 Avada 主题：

Flexislider > 设置

**控制设置**

*UN* -勾选选项 [ ] 在触摸屏设备上启用触摸滑动导航

# javascript - google chrome iframe body onLoad 不起作用？

> ID：10063507
> 
> 赞同：0
> 
> 时间：2012-04-08T14:23:47.097
> 
> 标签：javascript, google-chrome, iframe, onload

**编辑：它确实有效（抱歉）。**此脚本中的某些内容导致它在 google chrome 中停止：

```
function checkLocation() {
  var loc = top.location.href;
  var suffix = "subpage.html";
  if (loc.indexOf(suffix, loc.length - suffix.length) !== -1) {
      top.location.href = "index.html";
  }
} 
```

**原帖：**

我已经安装了 IE 9、FF 3.6.3、Chrome (18.0.1025.151) 和 Safari 5.1.5。

这适用于除谷歌浏览器之外的所有浏览器。

我有一个包含命名 iframe 的 HTML 布局。iframe src 更改以显示不同的页面。在其中一个页面上，我有一个在 body 标记中加载 onLoad 的脚本。当页面仅在谷歌浏览器的 iframe 中加载时，此脚本不会加载 - 它在其他浏览器中运行良好。此外，如果我将页面直接加载到谷歌浏览器（而不是通过 iframe）中，它就可以正常工作。

我该如何解决？

这是一个示例代码：

```
index.html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html> <head> <title> Example Page </title> </head>
       <body> <a href="subpage.html" target="targetFrame">View subpage</a><BR/>
              <iframe name="targetFrame"> </iframe>
       </body>
</html>

subpage.html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html> <head> <title> Subpage </title>
              <script type="text/javascript" src="subpage.js"> </script>
       </head>
       <body onLoad="initialise()"> Hello </body>
</html>

subpage.js
function initialise() {
    alert("Script loaded.");
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:41:23.657

原来它只是一个安全例外

```
Unsafe JavaScript attempt to access frame
with URL file:///C:/Users/.../website/index.html
from frame
with URL file:///C:/Users/.../website/subfolder/subpage.html.
Domains, protocols and ports must match. 
```

上线后应该没问题。

# java - 关于三元运算符..！

> ID：10063511
> 
> 赞同：-5
> 
> 时间：2012-04-08T14:24:05.287
> 
> 标签：java

我的程序中有条件...

```
boolean allow = false;  
    if RewardsSupport.isRewardsEnabled()) {  
        allow = true;         
    }  
    return (allow); 
```

你能帮我按照三元运算符转换上面的代码吗..!!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T14:26:17.493

重点是什么？为什么不只是有这个：

```
return RewardsSupport.isRewardsEnabled() 
```

此外，它应该被称为`areRewardsEnabled()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T14:26:15.233

这里没有理由使用三元运算符。由于你的值已经是布尔值，你真的应该说`return RewardsSupport.isRewardsEnabled();`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T14:26:28.513

对于涉及布尔值的事物，您不需要三元运算符：

```
boolean allow = RewardsSupport.isRewardsEnabled(); 
```

如果你想返回一个整数，你可以使用这样的三元条件运算符：

```
int reward = RewardsSupport.isRewardsEnabled() ? rewardAmount : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:25:27.760

以下解决方案根据要求使用三元运算符：

```
return RewardsSupport.isRewardsEnabled() ? true : false; 
```

# python - 如何将 wx.TextCtrl 中的字母输入转换为所有大写字母？

> ID：10063512
> 
> 赞同：0
> 
> 时间：2012-04-08T14:24:53.397
> 
> 标签：python, validation, wxpython

我正在尝试`wx.TextCtrl`根据[对 SO 上另一个问题的响应](https://stackoverflow.com/a/3405979/289572)编写我的第一个验证器，该问题应该执行以下操作：

> 所有字母都应打印为大写字母，并且文本字段应仅包含大写字母和数字。

但是，我的尝试在两个方面失败了：

*   当我更改我的模板（取自[链接的响应](https://stackoverflow.com/a/3405979/289572)）时，文本字段中不会添加任何内容。

*   我无法将小写字母更改为大写字母。

这是我的尝试：

```
import wx
import string

########################################################################
class CharValidator(wx.PyValidator):
    ''' Validates data as it is entered into the text controls. '''

    #----------------------------------------------------------------------
    def __init__(self, flag):
        wx.PyValidator.__init__(self)
        self.flag = flag
        self.Bind(wx.EVT_CHAR, self.OnChar)

    #----------------------------------------------------------------------
    def Clone(self):
        '''Required Validator method'''
        return CharValidator(self.flag)

    #----------------------------------------------------------------------
    def Validate(self, win):
        return True

    #----------------------------------------------------------------------
    def TransferToWindow(self):
        return True

    #----------------------------------------------------------------------
    def TransferFromWindow(self):
        return True

    #----------------------------------------------------------------------
    def OnChar(self, event):
        keycode = int(event.GetKeyCode())
        if keycode < 256:
            if keycode > 96 & keycode < 123:
                keycode = keycode - 32
            #print keycode
            key = chr(keycode)
            #print key
            return
        event.Skip()

########################################################################
class ValidationDemo(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Text Validation Tutorial")

        panel = wx.Panel(self)
        textOne = wx.TextCtrl(panel, validator=CharValidator('no-alpha'))

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(textOne, 0, wx.ALL, 5)
        panel.SetSizer(sizer)

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = ValidationDemo()
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:55:21.560

您的演示框架的 wxPython 小部件树结构存在一些问题。这将允许您在文本控件中编写：

```
class ValidationDemo(wx.Frame):
    """"""
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Text Validation Tutorial")

        textOne = wx.TextCtrl(self, validator=CharValidator('no-alpha'))

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(textOne, 1, wx.ALL| wx.EXPAND, 5)
        self.SetSizer(sizer)
        self.Fit() 
```

在 Validator 方面，您不会在计算后将您的信件发送到 textcontrol。更糟糕的是，你总是返回并扼杀事件。

这有效（我在评论中解释）：

```
def OnChar(self, event):
    keycode = int(event.GetKeyCode())
    #
    # get the widget where the text entry takes place
    object = self.GetWindow()
    #
    # for upper-case and for numbers, let the event go
    if (58 > keycode > 47) or ( 91 > keycode > 64):
        event.Skip()
    #
    # for lower-case, convert to upper and write it yourself
    elif 123 > keycode > 96:
        keycode = keycode - 32
        key = chr(keycode)
        object.write(key) 
```

注意我正在`self.GetWindow()`为每个 char 事件调用。在您的情况下，只有一个控件使用验证器，您`self.object`只能在验证器初始化时定义一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:18:37.123

实际上，验证功能的所有混乱都是不必要的。您只需要一个事件处理程序（请注意，它写得很草率，并且硬编码到特定`textOne`对象而不是获取输入对象）。

此外，移动 idwa 似乎是一个不错的选择`InsertionPoint`：

```
import wx

class ValidationDemo(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, wx.ID_ANY, 
                          "Text Validation Tutorial")

        panel = wx.Panel(self)
        self.textOne = wx.TextCtrl(panel)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.textOne, 0, wx.ALL, 5)
        panel.SetSizer(sizer)

        self.Bind(wx.EVT_TEXT, self.OnTextType, self.textOne)

    def OnTextType(self, event):
        self.textOne.ChangeValue(unicode.upper(self.textOne.GetValue()))
        self.textOne.SetInsertionPointEnd()

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = ValidationDemo()
    frame.Show()
    app.MainLoop() 
```

# sql - 当我按上/下使用不同的顺序时出现 SQL 错误

> ID：10063513
> 
> 赞同：1
> 
> 时间：2012-04-08T14:25:04.233
> 
> 标签：sql, postgresql

这在 postgres 8.4 中不起作用：

```
SELECT DISTINCT col1 FROM mytable
  ORDER BY UPPER(col1); 
```

但这有效：

```
SELECT DISTINCT col1 FROM mytable
  ORDER BY col1; 
```

我知道数据库是先应用 DISTINCT 然后再应用 UPPER 还是先转换为 UPPER 然后应用 DISTINCT 可能会有点混乱。根据它如何应用的顺序，可能会得到不同的结果。不确定 SQL 标准在这方面是否有任何说明。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T21:13:39.340

许多 SQL 引擎只允许您对正在选择的列进行排序。所以修复将 UPPER(col1) 添加到选择中。

```
SELECT DISTINCT UPPER(col1), col1 FROM mytable ORDER BY UPPER(col1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T12:27:07.823

只是偶然发现了同样的问题，在我的特定上下文中，以下实现起来更简单：

```
select * from (select distinct col1 from mytable) x order by upper(col1) 
```

我没有费心进行任何性能测试（在我的情况下，数据量相当低），但这可能甚至可以提高速度，因为排序可能发生在明显更少的数据上（Postgres 文档说排序发生在应用 DISTINCT 之前，而方式上面我们先DISTINCT，然后排序）。

# list - 列表长度，插入元素

> ID：10063516
> 
> 赞同：4
> 
> 时间：2012-04-08T14:25:16.480
> 
> 标签：list, prolog

我正在尝试在 Prolog 中编写一个程序，它将一个元素插入到某个位置，例如

```
?- ins(a, [1,2,3,4,5], 3, X).
X = [1,2,a,3,4,5]. 
```

我有以下代码：

```
ins(X,[H|T],P,OUT) :-
   length([T3],P),
   concatenate(X,[H],T),
   ins(...). 
```

问题是它`X`从后面插入给定索引中的元素（我什至知道问题出在哪里->`length([T3],P)`这显然是列表的长度从后面而不是从头开始）。`X`我试图记住当“截断元素的数量”= 时我截断并插入了多少元素`P`，但我无法在 Prolog 中真正写出来。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:03:13.283

```
% ins(Val,List,Pos,Res)

ins(Val,[H|List],Pos,[H|Res]):- Pos > 1, !, 
                                Pos1 is Pos - 1, ins(Val,List,Pos1,Res). 
ins(Val, List, 1, [Val|List]). 
```

如果 Pos = 0 或 Pos > length(List) + 1，则谓词失败

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T15:13:48.250

让我们在这里说明你想要什么。例如，您可以说：“我想在元素`List`之后拆分我的输入，`Position - 1`以便我可以在那里插入一个新元素”。

直接翻译`append/3`（DCG会更好）：

```
ins(Element, List, Position, Result) :-
    PrefixLength is Position - 1,
    length(Prefix, PrefixLength),
    append(Prefix, Suffix, List),
    append(Prefix, [Element], Temp),
    append(Temp, Suffix, Result). 
```

或者你可以说：“我想在不接触任何东西的情况下经历我那个`List` `Position - 1`时代的元素，然后插入`Element`，然后再不接触任何东西”。

这一次的直接翻译是：

```
ins2(Element, List, 1, [Element|List]).
ins2(Element, [Head|Tail], Position, [Head|Result]) :-
    Position > 1,
    NewPosition is Position - 1,
    ins2(Element, Tail, NewPosition, Result). 
```

你也可以这样说：“我的输入`List`是一个等于我的列表，`Result`除了它没有我`Element`的`Position`元素。” 并意识到如果你使用 swi-prolog，谓词会立即解决这个问题：

```
ins3(Element, List, Position, Result) :-
    nth1(Position, Result, Element, List). 
```

底线是：清楚地说明问题是什么，解决方案应该简单明了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-30T22:15:39.913

**TL;DR：**要将`E`位置处的项目`I1`插入列表`Es0`，我们不需要编写递归代码。

相反，我们可以将工作（以及对正确处理的担忧！）委托给通用的辅助谓词，所有这些都是[Prolog 序言](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue)的一部分。为了定义`ins_/4`我们写：

```
ins_(E, Es0, I1, Es) :-
     maplist (any_thing, Es, [_|Es0]),
     append (Prefix, Suffix, Es0),
     length ([_|Prefix], I1),
     append (Prefix, [ E|后缀], Es)。

任何事物（_， _）。% 辅助谓词（上面使用过）

```

注意`maplist(any_thing, Es, [_|Es0])`相当于`same_length(Es, [_|Es0])`。

使用 GNU Prolog 版本 1.4.4（64 位）的示例查询^(1、2、3 ：)

```
?- ins_(X, [a,b,c,d,e], N1, Xs)。            
  N1 = 1, Xs = [ X ,a,b,c,d,e]
; N1 = 2, Xs = [a, X ,b,c,d,e]
; N1 = 3, Xs = [a,b, X ,c,d,e]
; N1 = 4, Xs = [a,b,c, X ,d,e]
; N1 = 5, Xs = [a,b,c,d, X ,e]
; N1 = 6, Xs = [a,b,c,d,e, X ]
; 错误的。

?- ins_(X, [a,b,c,d,e], 3, Xs)。
  Xs = [a,b, X ,c,d,e]
; 错误的。

?- ins_(X, Xs0, 3, [a,b, c ,d,e])。            
  X = c, Xs0 = [a,b,d,e]
; 错误的。

```

让我们不要忘记最一般的查询！

```
?- ins(X, Es0, I1, Es)。
  Es0 = []，I1 = 1，Es = [ X ]
;
  Es0 = [A], I1 = 1, Es = [ X ,A]
; Es0 = [A], I1 = 2, Es = [A, X ]
;
  Es0 = [A,B], I1 = 1, Es = [ X ,A,B]
; Es0 = [A,B], I1 = 2, Es = [A, X ,B]
; Es0 = [A,B], I1 = 3, Es = [A,B, X ]
;
  Es0 = [A,B,C], I1 = 1, Es = [ X ,A,B,C]
; Es0 = [A,B,C], I1 = 2, Es = [A, X ,B,C]
; Es0 = [A,B,C], I1 = 3, Es = [A,B, X ,C]
; Es0 = [A,B,C], I1 = 4, Es = [A,B,C, X ]
;
  Es0 = [A,B,C,D], I1 = 1, Es = [ X ,A,B,C,D]
; ...

```

公平枚举所有解决方案，**OK！**

**编辑：**我重复了@m09 在他对 SWI-Prolog 7.3.11 和 SICStus Prolog 4.3.2[的回答](https://stackoverflow.com/a/10063864/4609915)`ins3/4`中定义 的最一般的查询（两者都具有 library predicate ）。我很惊讶地看到展示不同程序语义的底层实现（wrt“公平枚举”）。你自己看！`nth1/4``nth1/4`

```
% SICStus Prolog 4.3.2 % SWI Prolog 7.3.11
% %
?- ins3( X , Es0, I1, Es)。% ?- ins3( X , Es0, I1, Es)。
  I1 = 1, Es0 = [], Es = [ X ] % I1 = 1, Es = [ X |Es0]
; % ; I1 = 2, Es0 = [_A|_Z],
  I1 = 1, Es0 = [_A], Es = [ X ,_A] % Es = [_A, X |_Z]
; I1 = 2, Es0 = [_A], Es = [_A, X ] % ; I1 = 3, Es0 = [_A,_B|_Z],
; % Es = [_A,_B, X |_Z]
  I1 = 1, Es0 = [_A,_B], Es = [ X ,_A,_B] % ; I1 = 4, Es0 = [_A,_B,_C|_Z],
; I1 = 2, Es0 = [_A,_B], Es = [_A, X ,_B] % Es = [_A,_B,_C, X |_Z],
; I1 = 3, Es0 = [_A,_B], Es = [_A,_B, X ] % ; I1 = 5, Es0 = [_A,_B,_C,_D|_Z],
; % Es = [_A,_B,_C,_D, X |_Z]
... % ...

```

* * *

^(**脚注 1：**上面显示的所有示例查询都会普遍终止。)
^(**脚注 2：** GNU Prolog toplevel 给出的答案已经打印了一些。)
^(**脚注 3：**上述代码*按原样*使用，不需要额外的库谓词。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:21:35.870

```
ins(Element,List,Nth,Result) :-
    length([_|L0],Nth),
    append(L0,[_|R],List),
    append(L0,[Element|R],Result). 
```

# python - Python 脚本使用 Windows 调度程序意外终止

> ID：10063522
> 
> 赞同：1
> 
> 时间：2012-04-08T14:25:51.753
> 
> 标签：python, windows, scheduler

我有一个 Python 脚本，它遍历一些对象并从 xml 格式的 url 获取数据并将其存储在 MySQL 数据库中。我在下面附上了一个（简化的）脚本版本。我使用 Windows 任务计划程序安排脚本每天运行一次。脚本和调度在大多数情况下都可以正常工作，但每月一次或两次，脚本在中途某个地方意外终止，没有任何记录的异常。当我检测到脚本已终止并手动重新运行脚本时，它会在没有任何问题且没有任何更改的情况下完成。当脚本提前终止时，Windows 调度程序从不报告任何问题，即“历史记录”选项卡只报告操作完成/任务完成，就像一切都按计划进行时一样。

**脚本的简化版本：**

```
for Obj in objects:
   t=0
   dbdata = ''
   logger.info('Object: {s}\tID: {i}'.format(s=Obj.name, i=Obj.id))
    try:
        url = 'http://www.xyz.com/webproxy/DataProxy.aspx?Object=' + Obj.id
        logger.debug(url)
        data = urlopen(url)
        dom = minidom.parse(data)
        for node in reversed(dom.getElementsByTagName('t')):
            dbdata = dbdata + str(node.getAttribute('t')) + '\t' + str(float(node.getAttribute('p'))) + '\t' + str(int(node.getAttribute('v'))) + '\t' + str(node.getAttribute('id')) + '\t' + str(node.getAttribute('b')) + '\t' + str(node.getAttribute('s')) + '\n'
            t=t+1
        if len(dbdata)>0:
            cursor.execute(sql,(Obj.id,Obj.name,daydb,dbdata))
        logger.info('# rows: {n}'.format(n=t)
    except HTTPError, e:
        logger.error(e.msg)
        logger.error('HTTPError. Error code: ' + str(e.code))
    except ExpatError, ex:
        logger.error(ex.msg)
        logger.error('Expat Error. Error code: ' + str(ex.code))
    except Exception, e:
        logger.error(e.msg)
        logger.error('Exception. Error code: ' + str(e.code)) 
```

有没有人知道为什么脚本每隔一段时间就会过早终止，或者我可以在脚本或日程安排中做些什么来避免这个问题，或者至少让正在发生的事情更加清晰？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:02:17.323

你说：“没有任何记录的异常”？

这可能是因为 Exception 不是所有异常的基类

```
>>> help(Exception)
Help on class Exception in module exceptions:

class Exception(BaseException)
 |  Common base class for all non-exit exceptions.
 |  
 |  Method resolution order:
 |      Exception
 |      BaseException
 |      __builtin__.object 
```

BaseException 是基类。

但是，如果您想获得所有例外情况，我建议您这样做：

```
try:
   ...
except:
    import sys
    error_type, error, traceback = sys.exc_info() 
```

这样您还可以捕获 SystemExit

```
>>> SystemExit.mro()
[<type 'exceptions.SystemExit'>, <type 'exceptions.BaseException'>, <type 'object'>] 
```

# php - 在 Web 表单上一次提交的多个操作

> ID：10063529
> 
> 赞同：0
> 
> 时间：2012-04-08T14:26:22.307
> 
> 标签：php

我有一个带有 PayPal 捐赠按钮的网络表单。我该如何设置，以便当用户单击提交按钮时，表单的详细信息会发送到我的电子邮件地址，然后用户会被定向到 PayPal 进行捐赠？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:39:00.740

```
<?php
// ...
if(mail([...])) { // try to send email
    header("Location: http://PayPal.com/..."); // If mail was sent successfully the user will be redirected
}
else {
// error sending mail
}
?> 
```

请参阅[http://php.net/manual/de/function.mail.php](http://php.net/manual/de/function.mail.php)以使用 mail()-function。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:34:59.703

您将`action`表单的属性设置为处理请求的 php 脚本的 url。在您的脚本中，您调用 php`mail()`函数，然后调用 php `Header('Location: www.paypal.com/etc.../?query=bla&query2=blo&etc')`，它将用户重定向到 paypal。

# java - Java - 库路径错误

> ID：10063530
> 
> 赞同：4
> 
> 时间：2012-04-08T14:26:22.957
> 
> 标签：java, path

我正在尝试启动我的 java 游戏，但 java 命令行有一些问题：

这是我输入的内容：

`C:\>java -Djava.library.path=%cd%\lib -jar game.jar`

这就是我得到的：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/lwjgl/LWJGLException
    at com.game.Main.main(Main.java:7)
    Caused by: java.lang.ClassNotFoundException: org.lwjgl.LWJGLException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

我可以使用 Eclipse（使用作为 Java 应用程序运行）开始我的游戏，但在菜单之后出现以下错误：

```
Exception in thread "Thread-5" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.lwjgl.Sys$1.run(Sys.java:72)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:65)
    at org.lwjgl.Sys.loadLibrary(Sys.java:81)
    at org.lwjgl.Sys.<clinit>(Sys.java:98)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:129)
    at com.game.displaygui.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

`lwjgl.jar`已放入文件夹`\lib`。

你能解释一下我明白了吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T14:34:19.800

这是因为 lwjgl 库由两个组件组成：

*   包含 Java 代码的**.jar文件**
*   和本机二进制库（根据您的操作系统，可以是**.so**或**.dll**或**.dylib ）**

您遇到的第一个错误是因为您正在设置库路径，该路径应该包含本*机*库，但它确实包含 .jar。所以你得到了一个`java.lang.NoClassDefFoundError`，因为你应该将库路径设置为包含本机库的文件夹，或者将类路径设置为包含真正的*lwjgl.jar*文件。

使用 Eclipse 遇到的第二个错误是后续步骤：您的类路径包含 jar 库，但无法找到附加到它的本机库，您可以通过以下方式修复它：

![在此处输入图像描述](../Images/ff93fd3f0e3f8468ec8843fa60a2ddd8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:33:19.893

您应该明确指定要包含哪些 lib 文件（由 ; 分隔）：

```
-cp %cd%\lib\lwjdl.jar;%cd%\lib\<another-lib>.jar 
```

不要试图使用通配符 *，因为它弊大于利（根据以前的经验:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:35:09.833

您可以使用该`java.library.path`选项指定要加载的本机库的位置。在该选项指向的位置，您将放置LWJGL 所需的所有文件`dll`或文件。`.so`另一方面，您需要通过`-classpath`选项确保所有必需的 JAR 文件都在您的类路径中。目前，您的 JAR 文件位于错误的目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:36:22.257

在 Eclipse 中，如果您使用 maven。

将以下内容添加到项目“运行”：“VM 选项”。

```
-Djava.library.path=yourpath/youproject/java/target/natives 
```

# php - 基于 URL 变量的搜索

> ID：10063537
> 
> 赞同：0
> 
> 时间：2012-04-08T14:27:00.963
> 
> 标签：php, mysql, search

我希望我的搜索专注于 URL 字符串中的变量。目前它使用基于表单的搜索。

它使用这个

```
<?php
    include('db.php');  // include your code to connect to DB.
    $tbl_name="mobile";     //your table name

$whereClauses = array(); 
if (! empty($_POST['Model'])) $whereClauses[] ="model='".mysql_real_escape_string($_POST['Model'])."'"; 
if (! empty($_POST['Mins'])) $whereClauses[] ="minutes='".mysql_real_escape_string($_POST['Mins'])."'"; 
if (! empty($_POST['Texts'])) $whereClauses[] ="texts='".mysql_real_escape_string($_POST['Texts'])."'"; 
if (! empty($_POST['Freegifts'])) $whereClauses[] ="free_gift='".mysql_real_escape_string($_POST['Freegifts'])."'"; 
if (! empty($_POST['Network'])) $whereClauses[] ="network_name='".mysql_real_escape_string($_POST['Network'])."'"; 
if (! empty($_POST['Merchant'])) $whereClauses[] ="merchant_category='".mysql_real_escape_string($_POST['Merchant'])."'"; 
$where = ''; 
if (count($whereClauses) > 0) { $where = ' WHERE '.implode(' AND ',$whereClauses); } 
$sql = mysql_query("SELECT * FROM $tbl_name".$where); 
?> 
```

但是，我已将此添加到我的页面：

```
<?php
    $model = $_GET['model']; //gets model from URL
    $mins = $_GET['mins']; //gets mins from URL
    $texts = $_GET['texts']; //gets mins from URL
    $freegift = $_GET['free-gift']; //gets mins from URL
    $network = $_GET['network']; //gets mins from URL
    $plan = $_GET['plan']; //gets mins from URL
?> 
```

它需要如此，所以并非所有变量都是必需的。任何帮助，将不胜感激。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:37:12.217

有许多选项将返回 value 或 NULL：

```
<?php
       $model = (isset($_GET['model']) ? $_GET['model'] : NULL);
        $mins = (isset($_GET['mins'])  ? $_GET['mins']  : NULL);    
       $texts = (isset($_GET['texts']) ? $_GET['texts'] : NULL); 
    $freegift = (isset($_GET['free-gift']) ? $_GET['free-gift'] : NULL);
     $network = (isset($_GET['network'])   ? $_GET['network']   : NULL);
        $plan = (isset($_GET['plan'])  ? $_GET['plan']  : NULL);
?> 
```

这将从相应的 $_GET 元素中获取变量，前提是只有一组。

* * *

替代语法（更短）：

```
<?php
       $model = ($_GET['model'] ? $_GET['model'] : NULL);
        $mins = ($_GET['mins']  ? $_GET['mins']  : NULL);    
       $texts = ($_GET['texts'] ? $_GET['texts'] : NULL); 
    $freegift = ($_GET['free-gift'] ? $_GET['free-gift'] : NULL);
     $network = ($_GET['network']   ? $_GET['network']   : NULL);
        $plan = ($_GET['plan']  ? $_GET['plan']  : NULL);
?> 
```

* * *

替代方案（虽然未经测试）：

```
<?php
$vars = array('model','mins','texts','free-gift','network','plan');

foreach($vars as $value) {
    $$value = (isset($_GET[$value]) ? $_GET[$value] : NULL);
}
?> 
```

* * *

***编辑：*** 为了基于它设置 WHERE 子句，我建议：

```
<?php
$vars = array('model','mins','texts','free-gift','network','plan');

foreach($vars as $value) {
    $$value = (isset($_GET[$value]) ? $_GET[$value] : NULL);
    unset $vars[$value];  //sweeping the NULL ones
}
$where_clause = $vars[0]; //the only remaining value after previous cleanup
?> 
```

# jqgrid - 如何使 jqgrid 高级搜索对话框键盘可访问

> ID：10063539
> 
> 赞同：1
> 
> 时间：2012-04-08T14:27:09.310
> 
> 标签：jqgrid

[如何在 jqgrid 高级搜索窗口中启用输入的答案](https://stackoverflow.com/questions/9655775/how-to-enable-enter-in-jqgrid-advanced-search-window)描述 了如何在 jqgrid 高级搜索对话框中启用输入和其他键。

在高级搜索对话框中单击添加组、添加子组、删除规则或删除组按钮后，Enter 和其他键仍然被忽略。如何将焦点设置到添加的元素或删除剩余元素以启用 Enter 和其他键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:04:43.343

高级搜索对话框的当前版本（参见`jqFilter`中的定义`grid.filter.js`）**重新创建**对话框的所有控件以更改某人。请参阅看起来的[reDraw](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.filter.js#L174-181)代码

```
this.reDraw = function() {
    $("table.group:first",this).remove();
    var t = this.createTableForGroup(p.filter, null);
    $(this).append(t);
    if($.isFunction(this.p.afterRedraw) ) {
        this.p.afterRedraw.call(this, this.p);
    }
}; 
```

怎样才能看到第一行`$("table.group:first",this).remove();`删除了所有过滤器的内容。当前的焦点将丢失，并且会出现您描述的问题。

我建议修复`reDraw`使用 document.activeElement 元素的代码，该元素最初是在 Internet Explorer 中引入的（至少在 IE4 中），并且现在所有 Web 浏览器都支持它，因为它是 HTML5 标准的一部分（参见[此处](http://www.w3.org/TR/html5/editing.html#document-level-focus-apis)）。原来有焦点的元素会被销毁，以后就不能再设置焦点了。所以我建议保存元素的元素名称及其类（如`input.add-group`or `input.add-rule.ui-add`）并在搜索对话框中找到元素的位置。稍后，在重新创建对话框元素后，我们将焦点设置在具有相同索引的元素上。

我建议将代码更改为`reDraw`以下

```
this.reDraw = function() {
    var activeElement = document.activeElement, selector, $dialog, activeIndex = -1, $newElem, $buttons,
        buttonClass,
        getButtonClass = function (classNames) {
            var arClasses = ['add-group', 'add-rule', 'delete-group', 'delete-rule'], i, n, className;
            for (i = 0, n = classNames.length; i < n; i++) {
                className = classNames[i];
                if ($.inArray(className, arClasses) >= 0) {
                    return className;
                }
            }
            return null;
        };
    if (activeElement) {
        selector = activeElement.nodeName.toLowerCase();
        buttonClass = getButtonClass(activeElement.className.split(' '));
        if (buttonClass !== null) {
            selector += '.' + buttonClass;
            if (selector === "input.delete-rule") {
                $buttons = $(activeElement).closest('table.group')
                    .find('input.add-rule,input.delete-rule');
                activeIndex = $buttons.index(activeElement);
                if (activeIndex > 0) {
                    // find the previous "add-rule" button
                    while (activeIndex--) {
                        $newElem = $($buttons[activeIndex]);
                        if ($newElem.hasClass("add-rule")) {
                            activeElement = $newElem[0];
                            selector = activeElement.nodeName.toLowerCase() + "." +
                                getButtonClass(activeElement.className.split(' '));
                            break;
                        }
                    }
                }
            } else if (selector === "input.delete-group") {
                // change focus to "Add Rule" of the parent group
                $newElem = $(activeElement).closest('table.group')
                    .parent()
                    .closest('table.group')
                    .find('input.add-rule');
                if ($newElem.length > 1) {
                    activeElement = $newElem[$newElem.length-2];
                    selector = activeElement.nodeName.toLowerCase() + "." +
                        getButtonClass(activeElement.className.split(' '));
                }
            }
            $dialog = $(activeElement).closest(".ui-jqdialog");
            activeIndex = $dialog.find(selector).index(activeElement);
        }
    }
    $("table.group:first",this).remove();
    $(this).append(this.createTableForGroup(this.p.filter, null));
    if($.isFunction(this.p.afterRedraw) ) {
        this.p.afterRedraw.call(this, this.p);
    }
    if (activeElement && activeIndex >=0) {
        $newElem = $dialog.find(selector + ":eq(" + activeIndex + ")");
        if ($newElem.length>0) {
            $newElem.focus();
        } else {
            $dialog.find("input.add-rule:first").focus();
        }
    }
}; 
```

[**就像在下一个演示**](http://www.ok-soft-gmbh.com/jqGrid/SearchOnEnter2.htm)中可以看到的那样，在按下“添加子组”或“添加规则”按钮后，搜索对话框中的焦点保持不变。如果按下“删除组”，我将其设置在前一行组的“添加规则”按钮上。

[另一个演示](http://www.ok-soft-gmbh.com/jqGrid/SearchOnEnter3.htm)使用按钮的 jQuery UI 样式和按钮中的文本（请参阅[答案](https://stackoverflow.com/a/8854864/315935)）。单击“删除”（规则或组）按钮后，我尝试将焦点设置到上一个“添加规则”按钮，因为将焦点设置在另一个“删除”（规则或组）按钮上我觉得很危险。

另外在我使用的演示中

```
afterShowSearch: function ($form) {
    var $lastInput = $form.find(".input-elm:last");
    if ($lastInput.length > 0) {
        $lastInput.focus();
    }
} 
```

因为在对话框打开时将初始焦点设置在最后一个输入字段上似乎很有意义。

**更新**：我发现将焦点设置在当前单击的按钮“添加子组”、“添加规则”或“删除组”上也很有意义。在第一次用鼠标单击某个按钮然后想继续使用键盘工作的情况下，人们看到的优势。所以我建议换[行](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.filter.js#L230)

```
inputAddSubgroup.bind('click',function() { 
```

到

```
inputAddSubgroup.bind('click',function(e) {
    $(e.target).focus(); 
```

更改[线路](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.filter.js#L251)

```
inputAddRule.bind('click',function() { 
```

到

```
inputAddRule.bind('click',function(e) {
    $(e.target).focus(); 
```

和[线](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.filter.js#L291)

```
inputDeleteGroup.bind('click',function() { 
```

到

```
inputDeleteGroup.bind('click',function(e) {
    $(e.target).focus(); 
```

和[线](https://github.com/tonytomov/jqGrid/blob/v4.3.1/js/grid.filter.js#L512)

```
ruleDeleteInput.bind('click',function() { 
```

到

```
ruleDeleteInput.bind('click',function(e) {
    $(e.target).focus(); 
```

# c# - 任务异步模式和错误/异常/取消处理

> ID：10063542
> 
> 赞同：2
> 
> 时间：2012-04-08T14:27:47.057
> 
> 标签：c#, exception-handling, task-parallel-library

我经常有顶级功能工作的应用程序，例如

```
public Result5 ProcessAll() {
    var result1 = Process1();
    var result2 = Process2();
    var result3 = Process3(result1);
    var result4 = Process4(result1, result2);
    return Process5(result1, result2, result3, result4);
} 
```

Process* 函数的共同点是：

*   IO Bound（数据库、文件系统、Web 服务）
*   可能会抛出刚刚在调用堆栈中向上传播的异常
*   对于一些应该停止处理并返回的非异常错误可能会返回错误

顶层函数也在后台线程上运行，可以取消。这意味着完整的实现看起来像

```
public Result5 ProcessAll(CancellationToken cancellationToken) {
    Result1 result1 = Process1();

    if (result1 == null)
        return null;
    cancellationToken.ThrowIfCancellationRequested();

    Result2 result2 = Process2();

    if (result2 == null)
        return null;
    cancellationToken.ThrowIfCancellationRequested();

    Result3 result3 = Process3(result1);

    if (result3 == null)
        return null;
    cancellationToken.ThrowIfCancellationRequested();

    Result4 result4 = Process4(result1, result2);

    if (result4 == null)
        return null;
    cancellationToken.ThrowIfCancellationRequested();

    return Process5(result1, result2, result3, result4);
} 
```

现在让我们假设我需要通过尽可能多地并行运行来加快速度。

还假设 Process* 函数实现任务异步模式并使用 IO 完成端口或类似端口。

我还没有找到任何好的模式。
如果我忽略错误/异常/取消，它看起来像这样。

```
public Result5 ProcessAll(CancellationToken cancellationToken) {
    Task<Result1> task1 = Process1Async();
    Task<Result2> task2 = Process2Async();

    Task<Result3> task3 = task1.ContinueWith(_ => Process3Async(task1.Result)).Unwrap();

    Task<Result4> task4 = Task.Factory.ContinueWhenAll(new[] { task1, task2 }, 
                                                       _ => Process4Async(task1.Result, task2.Result)).Unwrap();

    // This will trigger all exceptions captured
    Task.WaitAll(new[] { task1, task2, task3, task4 });

    return Process5(task1.Result, task2.Result, task3.Result, task4.Result);
} 
```

（我知道这可以像运行 task4 同步一样进行优化，并且 WaitAll 不是必需的，但我只是在这里展示一个模式）

如果我现在尝试处理错误和异常，它可能如下所示：

```
public Result ProcessAll(CancellationToken cancellationToken) {
    Task<Result1> task1 = Process1Async();
    Task<Result2> task2 = Process2Async();

    // Process 3 should not run if task1 or task2 failed or returned error
    Task<Result3> task3 = task1.ContinueWith(_ => {
         if (task1.IsFaulted || task1.Result == null)
             return null;
         if (task2.IsFaulted || (task2.IsCompleted && task2.Result == null)
             return null;
         return Process3Async(task1.Result);
    }).Unwrap();

    // Process4 should not start if any of Process1,Process2 or Process3 returned error or throw exception
    Task<Result4> task4 = Task.Factory.ContinueWhenAll(new[] { task1, task2 }, _ => {
                                                       if (task1.Faulted || task1.Result == null)
                                                           return null;
                                                       if (task2.Faulted || task2.Result == null)
                                                           return null;
                                                       if (task3.Faulted || (task3.IsCompleted && task3.Result == null))
                                                           return null;
                                                       return Process4Async(task1.Result, task2.Result)).Unwrap();

    Task.WaitAll(new[] { task1, task2, task3, task4 });
    if (task1.Result == null || 
        task2.Result == null || 
        task3.Result == null || 
        task4.Result == null)
        return null;
    return Process5(task1.Result, task2.Result, task3.Result, task4.Result);
} 
```

现在我需要进行取消检查:-)

我现在的问题是：
**所有这些对早期任务中的失败、错误和取消的检查变得容易出错并且不是非常可扩展的。我是否在这里遗漏了一些重要的事情并且以错误的方式做事？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:09:27.837

我只能在所有较早的进程都完成后启动进程 3、4 和 5，但无论如何你都没有并行性。所以你不需要为他们使用任务。您只需要使用前两个任务，这会使问题变得更容易。如果您选择将它们作为任务启动，这些任务将始终等待前任，从而消除任何并行性。

# android - 如何强制 ListView 中元素的位置

> ID：10063543
> 
> 赞同：0
> 
> 时间：2012-04-08T14:28:14.677
> 
> 标签：android, listview, position, adapter, items

我有一个活动，它只是列出`Pair<String, String>`对象。我有一个自定义的`TextWithSubTextAdapter`，它扩展了 ArrayAdapter：

> public View getView(int position, View convertView, ViewGroup parent) {
> 
> ```
>  View view;
>   if (convertView == null)
>   {
> 
>       LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
> 
>       view = li.inflate(R.layout.text_sub, null);
> 
>       TextView tv = (TextView)view.findViewById(R.id.mainText);
>       tv.setText(mCategories.get(position).first);
> 
>       TextView desc = (TextView)view.findViewById(R.id.subText);
>       desc.setText(Html.fromHtml(mCategories.get(position).second));
> 
>   }
>   else 
>   {
>       view = (View) convertView;
>   }
>   return view; 
> ```
> 
> }

mCategories 是一个`ArrayList<Pair<String, String>>`

然后我调用`lv.setAdapter(new TextSubTextAdapter(this, Common.physConstants));` 只要我有一组有限的元素，它就很好用，因为我不需要滚动。但是，当我添加足够的元素时，滚动后，项目会交换它们的位置，如下所示：

![普通视图](../Images/b4dcaa5b47acc31350c4f14188593d42.png)![所有的地狱都松了](../Images/c0aafae3e8fc4caa9e4f77336e93d0eb.png)

我怀疑这种行为是由于我打电话造成的`mCategories.get(position)`。因为视图永远不会保留在后台，Android 每次都会重新生成它们，所以我永远不会得到相同的项目，因为`position`很少会有相同的值。

有没有办法获得一个恒定的 id，这可以让我获得具有固定位置的项目？我尝试使用 getItemID，但我不明白如何实现它。

注意：每个字符串都来自 strings.xml 文件。在启动时，它们永远不会被比较，并且被实例化一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:46:46.203

当您滚动列表时，Android 会动态重用滚动到屏幕外的视图。这些 convertViews 还没有应该在这个位置的内容。您必须手动设置。

```
 View view;
  if (convertView == null)
  {
      LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

      view = li.inflate(R.layout.text_sub, null);
  }
  else 
  {
      view = convertView;
  }
  TextView tv = (TextView)view.findViewById(R.id.mainText);
  tv.setText(mCategories.get(position).first);

  TextView desc = (TextView)view.findViewById(R.id.subText);
  desc.setText(Html.fromHtml(mCategories.get(position).second));

  return view; 
```

# c# - WCF RESTful 服务配置获取 404

> ID：10063544
> 
> 赞同：0
> 
> 时间：2012-04-08T14:28:20.730
> 
> 标签：c#, .net, json, wcf, rest

我正在尝试第一次通过 JSON 使用简单的 WCF RESTful。我的界面在下面，但调用 MemberLogon() 方法的 URL 是什么？

我以为会是这样：

```
http://localhost:49701/Exchange.svc/?membershipNumber=6519548&blah=abc 
```

但我得到了 404。我感觉这与我的 Web.Config 中的服务配置有关。帮助！

我的界面和类是：

```
[ServiceContract]
public interface IExchange
{
    [System.ServiceModel.OperationContract(Name = "MemberLogon")]
    [WebInvoke(UriTemplate = "/?membershipNumber={membershipNumber}&blah={blah}", Method = "GET", ResponseFormat = WebMessageFormat.Json)]
    Member MemberLogon(string membershipNumber, string blah);
}

[System.Runtime.Serialization.DataContract]
public class Member
{
    [System.Runtime.Serialization.DataMember]
    public string Username { get; set; }
} 
```

配置是：

```
 <system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="MyNamespace.MyClass.ExchangeBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="MyNamespace.MyClass.ExchangeBehavior" name="MyNamespace.MyClass.Exchange">
    <endpoint address="" binding="webHttpBinding" contract="MyNamespace.MyClass.IExchange" />
  </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:43:15.200

代码和界面看起来不错。你可以试试这个配置吗？

```
<system.serviceModel>
            <behaviors>
              <endpointBehaviors>
                <behavior name="MyNamespace.MyClass.ExchangeBehavior">
                  <webHttp/>
                </behavior>
              </endpointBehaviors>
            </behaviors>
            <services>
              <service name="MyNamespace.MyClass.Exchange">
                <endpoint address="" binding="webHttpBinding" behaviorConfiguration="MyNamespace.MyClass.ExchangeBehavior" contract="MyNamespace.MyClass.IExchange" />
              </service>
            </services>
       </system.serviceModel> 
```

# python - Python中负股息的模

> ID：10063546
> 
> 赞同：8
> 
> 时间：2012-04-08T14:28:26.750
> 
> 标签：python, modulo

一直在寻找其他答案，但我仍然不明白 python 中负数的模

例如 df 的答案

```
x == (x/y)*y + (x%y) 
```

所以 (-2)%5 = -2 - (-2/5)*5 = 3 是有道理的

这不是 (-2 - (-2/5)*5) =0 还是我疯了？ [具有负值的模运算 - 奇怪的事情？](https://stackoverflow.com/questions/43775/modulus-operation-with-negatives-values-weird-thing)

与 [python中的这个负数模](https://stackoverflow.com/questions/3883004/negative-numbers-in-python)相同 他从哪里得到-2？

最后，如果符号取决于股息，为什么负股息与正股息的输出不一样？

例如的输出

```
print([8%5,-8%5,4%5,-4%5]) 
```

是

```
[3, 2, 4, 1] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T14:38:56.787

在 Python 中，模数是根据两个规则计算的：

*   `(a // b) * b + (a % b) == a`， 和
*   `a % b`与 具有相同的符号`b`。

将此与整数除法向下舍入（向 -∞ 方向）这一事实相结合，并解释了由此产生的行为。

如果你这样做`-8 // 5`，你得到 -1.6 向下舍入，即 -2。将其乘以 5 得到 -10；2 是您必须添加到该数字才能得到 -8 的数字。因此，`-8 % 5`为 2。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T13:51:25.790

在 Python 中，`a // b`定义为 floor(a/b)，与大多数其他语言中整数除法定义为 trunc(a/b) 不同。`a % b`=的解释存在相应的差异`a - (a // b) * b`。

*原因*是 Python 对`%`运算符 (and )的定义`divmod`通常比其他语言更有用。例如：

```
def time_of_day(seconds_since_epoch):
    minutes, seconds = divmod(seconds_since_epoch, 60)
    hours, minutes = divmod(minutes, 60)
    days, hours = divmod(hours, 24)
    return '%02d:%02d:%02d' % (hours, minutes, seconds) 
```

使用此函数，如您所料，`time_of_day(12345)`返回。`'03:25:45'`

但是纪元*前*12345 秒是几点钟呢？使用 Python 的定义`divmod`，`time_of_day(-12345)`正确返回`'20:34:15'`.

如果我们重新定义`divmod`以使用`/`and的 C 定义会`%`怎样？

```
def divmod(a, b):
    q = int(a / b)   # I'm using 3.x
    r = a - b * q
    return (q, r) 
```

现在，`time_of_day(-12345)`返回`'-3:-25:-45'`，这不是一天中的有效时间。如果标准 Python`divmod`函数以这种方式实现，则必须编写特殊情况代码来处理负输入。但是对于地板式的划分，就像我的第一个例子一样，它只是工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T14:41:28.707

这背后的基本原理实际上是[最小残留](http://www.proofwiki.org/wiki/Definition%3aLeast_Positive_Residue)的数学定义。Python 尊重这个定义，而在大多数其他编程语言中，模运算符实际上更像是“除法后的提醒”运算符。要计算 的最小余数`-5 % 11`，只需将 11 与 -5 相加，直到在 范围内得到一个正整数，`[0,10]`结果为 6。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:38:46.807

当您除以整数 (-2/5)*5时，**不会**计算为 -2，就像在您习惯的代数中那样。尝试将其分解为两个步骤，首先评估括号中的部分。

1.  (-2/5) * 5 = (-1) * 5
2.  (-1) * 5 = -5

第 1 步的原因是您正在执行 int 除法，在 python 2.x 中，它返回相当于浮点除法结果的四舍五入到最接近的整数。

在 python 3 及更高版本中， 2/5 将返回一个浮点数，请参阅[PEP 238](http://www.python.org/dev/peps/pep-0238/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T14:38:56.350

查看[此 BetterExplained 文章](http://betterexplained.com/articles/fun-with-modular-arithmetic/)并查看 @David 的评论（第 6 条）以了解其他人在谈论什么。

由于我们使用整数工作，因此我们进行 int 除法，在**Python**中，与**C相比，它会***降低*答案。有关这方面的更多信息，请阅读[Guido 的文章](http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html)。

 **至于你的问题：

```
>>> 8 % 5  #B'coz (5*1) + *3* = 8
3
>>> -8 % 5 #B'coz (5*-2) + *2* = -8
2 
```

希望有帮助。一开始我也很困惑（现在仍然如此）！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-14T08:28:53.350

说 -a % b 需要计算。例如。r= 11 % 10 在 11 之后找到下一个可以被 10 整除的数字，即在 11 之后将下一个数字除以得到余数 0。

在上述情况下，它的 20 除以 10 得到 0。因此，20-11 = 9 是需要添加到 11 的数字。

如果 60 个弹珠需要平均分配给 8 个人的概念，实际上除以 60/8 后得到的是 7.5，因为你不能将弹珠减半，60 之后的下一个可以被 8 完全整除的值是 64。因此 4需要添加更多的弹珠，以便每个人都能分享弹珠的乐趣。

这就是 Python 在使用模运算符除负数时的做法。**

# ruby-on-rails - 为在端口 3000 上运行的 Rails 应用程序设置 Apache 反向代理

> ID：10063549
> 
> 赞同：1
> 
> 时间：2012-04-08T14:29:00.997
> 
> 标签：ruby-on-rails, apache, passenger

我管理一个运行多个 PHP/MySQL 网站的小型 VPS。它正在运行 CentOS（尽管是稍微修改的 VSP 版本 x86）。一切运作良好。但是，现在我想在我的 VPS 上托管的某个域上运行 Rails 3 应用程序。问题是，该应用程序需要 cPanel 尚不支持的 Rails 3。如果我 ssh 到服务器并`rails s`在应用程序的文件夹中运行，它运行顺利，我可以在`siegedog.com:3000`. 但是，我想将所有请求重定向`siegedog.com`到端口 3000。

我已经读过这将假设设置一个反向代理，它将它为 siegedog 获得的所有请求重定向到 Mongrel，它应该在端口 3000 上运行。我查看了很多教程，但其中大多数都令人困惑和/ 或完全过时。

我也试过乘客。但是，cpanel 不允许编辑我的 httpd.conf。所以我使用了一个包含在那里的单独文件，并在远程文件中添加了额外的配置参数，只是为了解决`Default server page`问题，并且在 apache 错误日志中没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:41:13.957

好吧，多亏了 John Douthat，我设法使用以下 .htaccess 文档轻松地设置了我的应用程序：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^siegedog\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.siegedog\.com$
RewriteRule ^(.*) "http\:\/\/127\.0\.0\.1\:3000\/$1" [P,L] 
```

另外，要从我调用的 ssh 连接启动它：

```
nohup rails s & 
```

在 rails 应用程序的根目录中。现在一切都很好！

# javascript - element.style.display='none' 不起作用

> ID：10063554
> 
> 赞同：0
> 
> 时间：2012-04-08T14:29:49.497
> 
> 标签：javascript

```
<html>
<head>
<script type="text/javascript">

function nameofmonth(month)
 {  
 var monthname=new  Array("January","February","March","April","May","June","July","August","September","October","November","December")
  return monthname[month]
}  
 function monthdays(month,year)
 {
  var daysofmonth=new Array(31,28,31,30,31,30,31,31,30,31,30,31)
  if(year%4==0)
  daysofmonth[1]=29  
  return daysofmonth[month]   
  }
 function close(){

 document.getElementById("container").style.display='none'
 }

 function table()
  {
   var now=new Date()
   var hour=now.getHours()
   var minute=now.getMinutes()
   var second=now.getSeconds()
   var date=now.getDate()
   var month=now.getMonth() 
   var year=now.getFullYear()
   now.setFullYear(year,month,1)
   var firstday=now.getDay()
   var monthname=nameofmonth(month)
   var daysofmonth=monthdays(month,year)
    if(firstday>0)
      var k=-(firstday-1)
    else
      k=1
   var table="<table border=5 cellspacing=3cellpadding=8>"
   table +="<tr><th colspan=7>"+monthname + date+"th</th> <td  style='cursor:pointer' onclick='close()'>[close]</td></tr>"
   table +="<tr><th>sun</th><th>mon</th><th>tue</><th>wed</th><th>thu</th><th>fri</><th>sat</th></tr>"
   for(var i=0;i<5;i++)
    {
     table+="<tr>"
     for(var j=0;j<7;j++)
      {
        if(k<=daysofmonth && k>0)
          { if(k==date)
             table+='<td id="clock" bgcolor="aqua">'+k+'</td>'
          else
           table+='<td style="cursor:pointer">'+k+'</td>'
           k=parseInt(k)

         }
      else
         table+="<td></td>"
         k++
       }
  table+="</tr>"
  document.getElementById("calender").innerHTML=table  
}
}

</script>
</head>
<body>
<input type="text" onclick="table()"/>
<table id="container"><tr><td id="calender"></td></tr></table>

</body>
</html> 
```

这是我单击文本框后出现的日历代码。这是表格中的一个关闭单元格。单击关闭时，将调用 close() 函数并且日历将消失。但这没有发生。为什么？请帮助我...提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:41:16.227

这与分号无关。这些大多是可选的，在此示例中不需要。该函数`close()`是保留的，不能被 调用`onclick`。只需重命名`close()`为类似的名称`closeCalendar()`，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:48:57.937

`close`是一个`javascript Keyword`你应该使用另一个词而不是`close`你的函数名称来获取更多信息查看[JavaScript Reserved Words](http://www.quackit.com/javascript/javascript_reserved_words.cfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:15:07.907

这是一个如何更优雅地工作的[演示](http://jsfiddle.net/mplungjan/ChtXh/)

```
<input type="text" id="cal" onclick="table(this)"/>
<div id="container">
    <div id="calender"></div>
</div> 
```

```
function nameofmonth(month)  {  
  return ["January","February","March","April","May","June","July","August","September","October","November","December"][month];
}  

function closeIt(){
  document.getElementById("container").style.display='none';
}

function table(cal) {
   var now=new Date(),
      hour=now.getHours(),
      minute=now.getMinutes(),
      second=now.getSeconds(),
      date=now.getDate(),
      month=now.getMonth(),
      year=now.getFullYear();
   now.setFullYear(year,month,1);
   var firstday=now.getDay(),
       monthname=nameofmonth(month);
   now.setFullYear(year,now.getMonth()+1,0); // last of this month
   var daysofmonth=now.getDate();
   var k=(firstday>0)?-(firstday-1):1;
   var table="<table border=5 cellspacing=3 cellpadding=8>"
   table +="<tr><th colspan=7>"+monthname + date+"th</th> <td  style='cursor:pointer' onclick='closeIt()'>[close]</td></tr>"
   table +="<tr><th>sun</th><th>mon</th><th>tue</><th>wed</th><th>thu</th><th>fri</><th>sat</th></tr>";
   for(var i=0;i<5;i++) {
     table+="<tr>";
     for (var j=0;j<7;j++) {
       if (k<=daysofmonth && k>0) {
         if (k==date) table+='<td id="clock" bgcolor="aqua">'+k+'</td>';
         else table+='<td style="cursor:pointer" onclick="document.getElementById(\''+cal.id+'\').value=\''+(month+1)+'/'+k+'/'+year+'\'">'+k+'</td>';
       }
       else table+="<td></td>";
       k++
     }
     table+="</tr>";
    }     
    document.getElementById("calender").innerHTML=table+"</table>";  

} 
```

# java - 测量消息传输速度

> ID：10063555
> 
> 赞同：5
> 
> 时间：2012-04-08T14:29:50.870
> 
> 标签：java, time

我正在制作一个网络应用程序，我想显示消息从发送者到接收者所花费的时间。

您认为哪些方式适合实现此功能？

我的想法是将当前时间存储在消息上并与接收端的时间进行比较。尽管在 java doc 上它说当前给定的时间可能因操作系统而异。

> 我应该如何获取当前时间，以便在每个操作系统上都相同？（或者只是 OSX 并获胜）

ps：在大多数情况下，应用程序只是发送消息而不期望返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T14:36:54.727

除非源和目标都同步到同一个时间源，否则系统时间可能会相差几秒钟，如果源和目标位于不同的时区并且您使用本地时间，则甚至可能相差几个小时。

您可以做的是测量从发送数据包到收到回复的时间。这不是 100% 安全的，因为两个数据包可以通过两条不同的路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:40:07.243

最好的方法是使用 NTP（网络时间协议）服务器来同步两台机器上的时间。您还可以从您的应用程序中查询 NTP 服务器并获取正确的时间，然后将其用于您的计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:41:39.753

如果接收者是请求消息的人，那么您可以记录发出请求的确切时间以及消息返回的时间。它们之间的区别在于您正在寻找的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T14:46:53.107

约阿希姆是对的。除非两台机器都有与可靠时钟同步的时钟，否则您没有太多机会测量点对点消息所花费的时间。

你更擅长测量往返时间；即从发送消息到收到回复所经过的时间。您可以使用不与任何外部源同步的时钟来测量它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T14:48:46.333

TDOA（到达时间差）可能是您最准确的赌注。它不需要两台主机之间的时间同步，并且仍然为您提供非常准确的 RTT。

您基本上测量了 4 次不同的时间：

```
x1 = sender send time
y1 = receiver receive time
y2 = receiver send time
x2 - sender receive time 
```

因此您可以通过减去接收器 (y) 的处理时间来计算 RTT：

```
x2 - (y2 - y1) - x1 
```

对于 java 中最精确的当前时间，请使用 System.nanoTime();

# android - 在 android 中使用 PopupWindow

> ID：10063556
> 
> 赞同：0
> 
> 时间：2012-04-08T14:29:56.760
> 
> 标签：android, popupwindow

使用`popupWindow mWindow.showAtLocation (view Gravity.NO_GRAVITY, -100, -100);`

知道源代码中处理ViewManager的addView X <0, Y <0吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T08:35:18.310

此代码对我有用请尝试一下

```
 public void btnMyPicsClick(View v) {
    thredFlag = 1;
    outLineImage.setVisibility(View.INVISIBLE);
    saveImageAdapter = new SaveImageAdapter(DrawAppActivity.this);
    LayoutInflater inflater = (LayoutInflater) DrawAppActivity.this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    DisplayMetrics displayMetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
    final PopupWindow popupWindow = new PopupWindow(inflater.inflate(
            R.layout.mypicturesgrid, null, false), 1230, 250, true);
    popupWindow.showAtLocation(findViewById(R.id.relativeLayoutBottom),
            Gravity.LEFT, 30, -240);
    View myPoppyView = popupWindow.getContentView();
    Button btnClose = (Button) myPoppyView.findViewById(R.id.btnColorClose);
    GridView gvOutLine = (GridView) myPoppyView
            .findViewById(R.id.gvOutline);
    gvOutLine.setAdapter(saveImageAdapter);
    gvOutLine.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            String path = saveImageAdapter.fileName[position]
                    .getAbsolutePath();
            File file = new File(path);
            Uri uri = Uri.fromFile(file);
            myPicImageUri = Uri.fromFile(file);
            DisplayMetrics metrics = getApplicationContext().getResources()
                    .getDisplayMetrics();
            int w = metrics.widthPixels;
            int h = metrics.heightPixels;
            Bitmap bmp;
            try {
                bmp = BitmapFactory.decodeStream(getContentResolver()
                        .openInputStream(uri));
                Bitmap scaledBitmap = Bitmap.createScaledBitmap(bmp, w, h,
                        true);
                drawingSurface.setBitmap(scaledBitmap);
                drawingSurface.clear();
                popupWindow.dismiss();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
    btnClose.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            popupWindow.dismiss();
        }
    });
} 
```

# jquery - jQuery限制div内的图像

> ID：10063561
> 
> 赞同：1
> 
> 时间：2012-04-08T14:30:53.400
> 
> 标签：jquery, image, html, pagination

我正在尝试上传一些图像并将它们添加到 div 容器中。

我的问题是要上传 1000 多张图片，所以如果我将它们上传到同一个 div 滚动条会显示，但它对我的用户来说看起来不错。所以我想为这些图片添加分页。

我找到了适合我需要的这个[站点](http://tympanus.net/codrops/2009/11/17/jpaginate-a-fancy-jquery-pagination-plugin/)（[示例 5](http://tympanus.net/jPaginate/)），因为它实际上包含一个简单的 div，结构如下：

```
 <div id="paginationdemo" class="demo">
                    <h1>Demo 5</h1>
                    <div id="p1" class="pagedemo _current" style="">Page 1</div>
                    <div id="p2" class="pagedemo" style="display:none;">Page 2</div>
                    <div id="p3" class="pagedemo" style="display:none;">Page 3</div>
                    <div id="p4" class="pagedemo" style="display:none;">Page 4</div>
                    <div id="p5" class="pagedemo" style="display:none;">Page 5</div>
                    <div id="p6" class="pagedemo" style="display:none;">Page 6</div>
                    <div id="p7" class="pagedemo" style="display:none;">Page 7</div>
                    <div id="p8" class="pagedemo" style="display:none;">Page 8</div>
                    <div id="p9" class="pagedemo" style="display:none;">Page 9</div>
                    <div id="p10" class="pagedemo" style="display:none;">Page 10</div>
                    <div id="demo5">                   
                    </div>

 </div> 
```

它的脚本是：

```
 <script type="text/javascript">
   $(function () {
       $("#demo5").paginate({
           count: 10,
           start: 1,
           display: 7,
           border: true,
           border_color: '#fff',
           text_color: '#fff',
           background_color: 'black',
           border_hover_color: '#ccc',
           text_hover_color: '#000',
           background_hover_color: '#fff',
           images: false,
           mouse: 'press',
           onChange: function (page) {
               $('._current', '#paginationdemo').removeClass('_current').hide();
               $('#p' + page).addClass('_current').show();
           }
       });
   });

    </script> 
```

这就是我动态上传图像的方式

```
 $.each(data.result, function (index, file) {
                    $('#p1').append("<img class='LoadclickImage' align='left' style='height:48px;width:75px;' src='Uploads/" + file.name + "' width='75' height='50'  href='Uploads/" + file.name + "' >");
                }); 
```

现在会发生什么，如果我添加它们附加到同一页面的图像并且列表正在增加，那么我如何将图像限制到特定的 div 并通过动态创建它来将它们添加到下一页，因为我不知道他们将上传多少个法师，如果超过则尝试将它们附加到下一页。

如果有人有更好和最简单的想法，他们可以分享。我喜欢听他们说:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:28:48.410

您将不得不控制将图像附加到哪个“页面”div。您已经在循环中附加图像，所以您已经完成了一半。

可能有一种方法可以通过 jQuery 选择器做到这一点，但我没有那么多 jQuery kung-foo。因此，我使用 html 属性来跟踪“页面”div 是否已满。

在我的代码中，我正在附加

标签并使用一组数字。这种方式更容易测试，但与主要逻辑没有区别。

这是我的HTML...

```
<div id="p1" full="no" class="pagedemo _current" style="">Page 1</div>
<div id="p2" full="no" class="pagedemo">Page 2</div>
<div id="p3" full="no" class="pagedemo">Page 3</div>
<div id="p4" full="no" class="pagedemo">Page 4</div>
<div id="p5" full="no" class="pagedemo">Page 5</div>
<div id="p6" full="no" class="pagedemo">Page 6</div> 
```

这是我的剧本...

```
<script>
    $(document).ready(function () {
        var images = 65;

        for(var i = 1; i <= images; i++)
        {
            var page = $('.pagedemo[full="no"]').first();

            $(page).append("<p>" + i + "</p>");

            if ($(page).children("p").length == 10)
            {
                $(page).attr('full', 'yes');
            }
        }
    });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:27:48.783

这是我将如何解决它（但假设所有图像将在一个 ajax 请求中同时加载）。

```
<div id="paginationdemo" class="demo">
    <h1>Demo 5</h1>
    <div id="pagesContainer">
        <div id="p1" class="pagedemo _current"></div>
    </div>
    <div id="demo5"></div>
</div> 
```

Javascript：

```
var imagesPerPage = 4, pageNumber = 1;

function onAjaxSucceded(data) {
    var pagesContainer = $('#pagesContainer'),
        imagesInPage = 0,
        divPage = $("#p1");

    $.each(data.result, function(index, file) {
        if (imagesInPage >= imagesPerPage) {
            imagesInPage = 1;
            pageNumber += 1;
            divPage = $('<div/>', {id : "p" + pageNumber}).addClass('pagedemo').hide().appendTo(pagesContainer);
        } else {
            imagesInPage += 1;
        }
        var src = 'Uploads/' + file.name;
        $('<img>', {src: src, href: src, "class": 'LoadclickImage', align: 'left'}).appendTo(divPage);
    });

    $("#demo5").paginate({
        count: pageNumber,
        start: 1,
        display: Math.min(7, pageNumber),
        border: true,
        border_color: '#fff',
        text_color: '#fff',
        background_color: 'black',
        border_hover_color: '#ccc',
        text_hover_color: '#000',
        background_hover_color: '#fff',
        images: false,
        mouse: 'press',
        onChange: function(page) {
            $('#paginationdemo ._current').removeClass('_current').hide();
            $('#p' + page).addClass('_current').show();
        }
    });
} 
```

这是**现场演示**：http: [//jsfiddle.net/protron/gbzsR/7/](http://jsfiddle.net/protron/gbzsR/7/)

# android - Android(2.3.3) 中的下拉菜单

> ID：10063564
> 
> 赞同：1
> 
> 时间：2012-04-08T14:31:22.150
> 
> 标签：android, menu

我想为 Android 2.3.3 构建一个下拉菜单。但我不知道该怎么做。有人可以推荐一些例子（Github 等）吗？这将非常有帮助。下面有一个下拉菜单的示例图片。

谢谢

![Dropbox菜单](../Images/ccd6d5dfe2d52705afa765fe238ce248.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:50:13.843

我认为它是 android 3.0 及更高版本中操作栏的一部分。 [http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

要在早期版本中使用它，您必须自己创建它，或者我认为您可以使用开源操作栏。像[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

您可以在相对布局中构建一个列表并使其不可见，直到您按下按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:39:59.833

对我来说看起来像一个普通的[Spinner](http://developer.android.com/reference/android/widget/Spinner.html)。

这是一个例子：http: [//developer.android.com/resources/tutorials/views/hello-spinner.html](http://developer.android.com/resources/tutorials/views/hello-spinner.html)

# c# - linq-to-sql 获取序列包含多个元素

> ID：10063569
> 
> 赞同：2
> 
> 时间：2012-04-08T14:31:50.443
> 
> 标签：c#, linq-to-sql

我有一个看起来像这样的查询：它需要一个 ID 列表 (ThelistOfIDs) 作为参数，并且我正在对计数进行分组。

```
var TheCounter = (from l in MyDC.SomeTable
                  where ThelistOfIDs.Contains(l.ID)
                  group l by l.Status into groups
                  select new Counter()
                  {
                      CountOnes = (from g in groups
                                   where g.Status == 1
                                   select g).Count(),

                      CountTwos = (from g in groups
                                   where g.Status == 2
                                   select g).Count(),
                  }).Single(); 
```

基本上，我不明白为什么会出现错误。我不想从数据库中取回 entore 集合并在 linq-to-object 中进行计数；我想在数据库中进行计数并带回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:41:49.310

我没有将您的查询放入我的 IDE 或使用 C# 编译，但我想问题是 `groups`在您的查询中是而`IGrouping<Tkey, Telm>`不是`IQueryable<Tkey>` （类型在哪里，`Tkey`类型在哪里）。`l.Status``Telm``l`

我认为您对使用分组运算符感到困惑。

你想得到的是我猜：

```
var queryByStatus = from l in MyDC.SomeTable
                    where ThelistOfIDs.Contains(l.ID)
                    group l by l.Status;

var counter = new Counter() 
              {
                  CountOnes = queryByStatus.Where(l => l.Key == 1).Count(),
                  CountTwos = queryByStatus.Where(l => l.Key == 2).Count(),
              }; 
```

**编辑**：

替代查询，为了获得相同的结果，将对 DB 的所有操作移到原始查询中，以便仅查询一次 DB。

```
var queryCountByStatus = from l in MyDC.SomeTable
                    where ThelistOfIDs.Contains(l.ID)
                    group l by l.Status into r
                    select new { status = r.Key, count = r.Count() };

 var countByStatus = queryCountByStatus.ToList();

 var counter = new Counter() 
               {
                    CountOnes = countByStatus.FirstOrDefault(l => l.status == 1).count,
                    CountTwos = countByStatus.FirstOrDefault(l => l.status == 2).count,
               }; 
```

**笔记：**

我的编辑部分中的查询仅查询数据库一次并返回映射`Status`-> `Count`。

请注意，在我的原始查询中，只需要对 DB 进行两次调用 - 两者都返回单个数字 - 一个用于`CountOnes`，一个用于`CountTwos`.

在*编辑*查询中，完成了一个返回 table的查询`{ { 1, CountOnes}, {2, CountTwos } }`。其他行只是将结果（一组项目）转换为具有某些对象作为属性的单个对象，并在这两个值上物理完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:38:50.577

您按状态分组，然后从该组进行投影 - 但每个唯一状态（===组）仍然会有一行。

所以：我建议你没有一个唯一的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:49:41.987

这可能是你想要得到的......
（它适用于我拥有的用户表，但应该是相同的）

```
var statuscounts = (from u in db.Users
                    where u.UserStatus > 0
                    group u by u.UserStatus into groups
                    select new { Status = groups.Key, Count = groups.Count() });

// do this to iterate and pump into a Counter at will
foreach (var g in statuscounts)
    Console.WriteLine("{0}, {1}", g.Status, g.Count); 
```

......甚至是这样的......

```
var counter = statuscounts.AsEnumerable()
                    .Aggregate(new Counter(), (c, a) => {
                            switch (a.Status)
                            {
                                case 1: c.CountOfOnes = a.Count; return c;
                                case 2: c.CountOfTwos = a.Count; return c;
                                case 3: c.CountOfThrees = a.Count; return c;
                                default: c.CountOfOthers = a.Count; return c;
                            }}); 
```

...重点是，如果您已经分组，则应该使用分组结果，它的类型`IGrouping<out TKey, out TElement>`是关键是您的状态，它是`IEnumerable<>`您的记录。

希望这可以帮助

# iphone - 在设备上分配 UIPickerView 值问题

> ID：10063570
> 
> 赞同：0
> 
> 时间：2012-04-08T14:32:05.907
> 
> 标签：iphone, ios, xcode, xcode4.2

我在设备上面临这个问题，即分配选择器的选定行值需要太多时间才能显示在标签上，而在模拟器上它工作正常。

下面是代码：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
    if (pickerView == rewardsName) {

    NSString *selectedReward = [self.rewards objectAtIndex:row];

    if ([reward1.text length]==0){
        //set label 1

        reward1.text = selectedReward;
    }
    if ([reward2.text length]==0){
        //set label 2

        reward2.text = selectedReward;
    }
    if([reward3.text length]==0){
        //set label 3.

        reward3.text = selectedReward;
    }
    }

    else if(pickerView == selectNamazPicker){

        aNumberString = [self.namazArray objectAtIndex:row];

        NSLog(@"aNumberString:: %@", aNumberString);
    } 
} 
```

谁能告诉我可能是什么问题...我找不到...

**

```
EDITED:
ISSUE RESOLVED: 
```

**

```
For others who would face this issue.

I don't know whether it was creating the problem or not. But I did make these changes to my code.

In my .h file, previously I was just defining properties of UILabels (reward1, reward2 etc) with IBOutlet and not ivars. But then I defined ivars as IBOutlet UILabel reward1; etc and eliminated IBOutlet from properties then it started working fine. 

Now the problem has resolved. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:18:19.007

对于其他将面临这个问题的人。

我不知道它是否造成了问题。但我确实对我的代码进行了这些更改。

在我的 .h 文件中，以前我只是用 IBOutlet 而不是 ivars 定义 UILabel 的属性（reward1、reward2 等）。但后来我将 ivars 定义为 IBOutlet UILabel reward1; 等并从属性中消除 IBOutlet 然后它开始正常工作。

现在问题已经解决了。

# ruby - 从 Savon SOAP 请求中删除命名空间

> ID：10063571
> 
> 赞同：2
> 
> 时间：2012-04-08T14:32:13.410
> 
> 标签：ruby, xml, soap, savon

我有这个使用[Savon](https://github.com/rubiii/savon)的代码，我正在尝试开始工作。

```
require "savon"
require "time"

Gyoku.configure do |config|
  config.convert_symbols_to(&:tap)
end

client = Savon::Client.new("https://www.cfhdocmail.com/TestAPI2/DMWS.asmx?WSDL")

response = client.request(:CreateMailing) do
  soap.body = {
    Username: "Username",
    Password: "Password",
    ProductType: "A4Letter",
    IsMono: false,
    IsDuplex: true,
    DespatchASAP: false,
    DespatchDate: Time.parse("2012-04-09"),
    AddressNameFormat: "Full Name",
    ReturnFormat: "JSON"
  }
end 
```

输出看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema"             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:wsdl="https://www.cfhdocmail.com/LiveAutoAPI/" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ins0="https://www.cfhdocmail.com/LiveAutoAPI/">
    <env:Body>
        <ins0:CreateMailing>
            <ins0:Username>Username</ins0:Username>
            <ins0:Password>Password</ins0:Password>
            <ins0:ProductType>A4Letter</ins0:ProductType>
            <ins0:IsMono xsi:nil="true" />
            <ins0:IsDuplex>true</ins0:IsDuplex>
            <ins0:DespatchASAP xsi:nil="true" />
            <ins0:DespatchDate>2012-04-09 00:00:00 +0200</ins0:DespatchDate>
            <ins0:AddressNameFormat>Full Name</ins0:AddressNameFormat>
            <ins0:ReturnFormat>JSON</ins0:ReturnFormat>
        </ins0:CreateMailing>
    </env:Body>
</env:Envelope> 
```

但我希望它看起来像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CreateMailing xmlns="https://www.cfhdocmail.com/LiveAutoAPI/">
      <Username>Username</Username>
      <Password>Password</Password>
      <ProductType>A4Letter</ProductType>
      <IsMono/>true</IsMono>
      <IsDuplex>true</IsDuplex>
      <DespatchASAP>false</DespatchASAP>
      <DespatchDate>2012-04-09 00:00:00 +0200</DespatchDate>
      <AddressNameFormat>Full Name</AddressNameFormat>
      <ReturnFormat>JSON</ReturnFormat>
    </CreateMailing>
  </soap:Body>
</soap:Envelope> 
```

我怎么做？

我目前收到此错误

```
Server did not recognize the value of HTTP Header SOAPAction: CreateMailing. (Savon::SOAP::Fault) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:20:29.250

这些变化解决了我的问题。

```
client.request(:web, "CreateMailer") do |soap|
  soap.input = [
    "CreateMailer", { 
      xmlns: "https://www.cfhdocmail.com/LiveAutoAPI/"
    }
  ]
  soap.element_form_default = :unqualified
  soap.body = {
    Username: "Username",
    Password: "Password",
    ProductType: "A4Letter",
    IsMono: false,
    IsDuplex: true,
    DespatchASAP: false,
    DespatchDate: Time.parse("2012-04-09"),
    AddressNameFormat: "Full Name",
    ReturnFormat: "JSON"
  }
  client.http.headers.delete("SOAPAction")
end 
```

感谢[@sluukkonen](https://stackoverflow.com/questions/10063571/remove-namespace-from-savon-soap-request#comment12885965_10063571)的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:11:28.847

可能有更好的方法来做到这一点，但我能弄清楚如何*完全按照*我需要的方式获取 XML 正文的唯一方法是构建我自己的 XML。我的模型中有一个 to_xml 方法，它被称为`soap.body = { to_xml }`.

```
def to_xml
  xml = Builder::XmlMarkup.new(indent: 2)
  xml.instruct!
  xml.Username "Username"
  xml.Password "Password"
end 
```

# lucene.net - 在 word 文档和其他网站中搜索

> ID：10063574
> 
> 赞同：0
> 
> 时间：2012-04-08T14:32:51.753
> 
> 标签：lucene.net, orchardcms

有没有办法在 Orchard 中配置 lucene.net 以在 Orchard 根目录下的目录中搜索 word 文档的内容。有没有办法让它索引另一个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:37:38.507

如果您可以以某种方式将内容添加为 Orchard 中的内容项，则可以`OnIndexing`在`ContentHandler`.

这样的事情应该这样做：

```
public class WordDocumentContentHandler: ContentHandler {
    public WordDocumentContentHandler() {
        OnIndexing<ContentPart>((context, part) => {
            // Detect if the part has the field containing the URL to the document
            // and analyze it here. 
        });
    }
} 
```

# sql - 如何比较 SQL SELECT 语句中的两个字段，然后根据此结果选择其他字段？

> ID：10063575
> 
> 赞同：0
> 
> 时间：2012-04-08T14:33:02.513
> 
> 标签：sql, database, vb.net

我有一个包含公司产品列表的表格。他们输入关于他们有多少库存以及他们希望被提醒需要订购新库存的水平的数据。

例如：

```
 +-------+-------+----------------+
    |column1|column2|column1<=column2|
    +-------+-------+----------------+
    |value1 |value1 |   true         |
    |value2 |value3 |   false        |
    |value4 |value4 |   true         |
    +-------+-------+----------------+ 
```

我想以用户可以浏览的形式列出所有真实结果。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:36:27.683

怎么样 `SELECT * FROM mytable WHERE column1<=column2`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:41:30.903

使用 SQL，我会建议这样的语句：

```
SELECT * FROM table WHERE column1 <= column2 
```

# scala - 更改 scala mutable.HashMap 的默认容量/负载因子

> ID：10063579
> 
> 赞同：8
> 
> 时间：2012-04-08T14:34:45.683
> 
> 标签：scala, collections

我目前正在使用 scala 2.9.1。我创建一个 mutable.HashMap 使用：

```
> val m = mutable.HashMap.empty[Int, Int] 
```

我对scala有点陌生。在 java 中，我能够在 HashMap 的构造函数中指定容量和负载因子。我无法在scala中找到任何方法来做同样的事情。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T14:38:58.830

根据 API，这似乎是不可能的。一种解释是强烈反对可变集合，不可变集合不需要默认容量信息，因为在构建时必须知道项目的数量。

但是，请注意，如果您`HashMap`通过许多可用的集合方法构造集合（包括 mutable 和 immutable ），Scala 将隐式使用默认容量信息。例如，如果您调用`map`a `HashMap`，它将使用`map`defined on `TraversableLike`（如下所示），并且您可以看到它为提供该容量信息的构建器提供了“大小提示”。

```
def map[B, That](f: A => B)(implicit bf: CanBuildFrom[Repr, B, That]): That = {
  val b = bf(repr)
  b.sizeHint(this)
  for (x <- this) b += f(x)
  b.result
} 
```

# c# - WinForm：按下多个键

> ID：10063580
> 
> 赞同：4
> 
> 时间：2012-04-08T14:34:45.943
> 
> 标签：c#, winforms

我正在做一个简单的游戏，比如“太空侵略者”，我遇到了一个问题。我试图为用户提供从左到右随心所欲地移动的可能性，同时可以使用“空格键”进行拍摄。

我的问题是：当我按下超过 1 个键时，只有 1 个功能运行。

这里有一些我试过的东西：

1.  将密钥存储在一个`List<Keys>`（但我没有找到任何执行功能的好方法，一切都变得一团糟）

    2.key_down事件的正常处理如下：

    ```
    protected void Form1_keysDown(object obj, KeyEventArgs e)
    {
        (e.KeyData == Keys.Space)
            spaceShip.FireBullets();

        if (e.KeyCode == Keys.Left)
            spaceShip.MoveLeft();

        if (e.KeyCode == Keys.Right)
            spaceShip.MoveRight();
     } 
    ```

我的问题是：什么是使这项工作的好方法？

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T15:06:00.367

当您按住它时，您依赖于键盘控制器重复该键。当您按下另一个键时，它会停止工作。这需要不同的方法。

首先，您需要一个枚举来指示飞船的运动状态，其中包含 NotMoving、MovingLeft 和 MovingRight 等值。将该类型的变量添加到您的类中。您将需要 KeyDown*和*KeyUp 事件。当您获得 KeyDown 时，例如 Keys.Left，然后将变量设置为 MovingLeft。当您获得 Keys.Left 的 KeyUp 事件时，首先检查状态变量是否仍然是 MovingLeft，如果是，则将其更改为 NotMoving。

在您的游戏循环中，使用变量值来移动飞船。一些示例代码：

```
 private enum ShipMotionState { NotMoving, MovingLeft, MovingRight };
    private ShipMotionState shipMotion = ShipMotionState.NotMoving;

    protected override void OnKeyDown(KeyEventArgs e) {
        if (e.KeyData == Keys.Left)  shipMotion = ShipMotionState.MovingLeft;
        if (e.KeyData == Keys.Right) shipMotion = ShipMotionState.MovingRight;
        base.OnKeyDown(e);
    }
    protected override void OnKeyUp(KeyEventArgs e) {
        if ((e.KeyData == Keys.Left  && shipMotion == ShipMotionState.MovingLeft) ||
            (e.KeyData == Keys.Right && shipMotion == ShipMotionState.MovingRight) {
            shipMotion = ShipMotionState.NotMoving;
        }
        base.OnKeyUp(e);
    }

    private void GameLoop_Tick(object sender, EventArgs e) {
        if (shipMotion == ShipMotionState.MovingLeft)  spaceShip.MoveLeft();
        if (shipMotion == ShipMotionState.MovingRight) spaceShip.MoveRight();
        // etc..
    } 
```

# assembly - MIPS 从内存地址返回值

> ID：10063594
> 
> 赞同：2
> 
> 时间：2012-04-08T14:36:27.097
> 
> 标签：assembly, mips

我必须在汇编（MIPS）中编写一个函数来返回数组的最大值。

C代码是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int MaxAssembly(int *ptr, int num_elements); 

int main ( ) 
{ 
  int n=9; 
  int tab[] = {2, -8, 0, 25, 14, 2, 9, 15, -32}; 
  printf("The maximum is %d \n", MaxAssembly(tab,n)); 
```

`MaxAssembly`是我必须在汇编中编程的功能。

我不适合找到最大值。我在阅读函数参数时遇到的问题。我已经制作了这段代码来做一些测试。

```
 .data

    .text
    .globl  MaxAssembly

MaxAssembly:
    add $9,$5,$zero
    move    $2,$9
    jr  $ra 
```

执行此代码，我可以看到我正在按预期读取第二个函数参数。它打印在屏幕上将`The maximum is 9` 代码更改为：

```
 .data

    .text
    .globl  MaxAssembly

MaxAssembly:
    move    $2,$4
    jr  $ra 
```

我可以看到它正在读取函数的第一个参数作为内存地址，并打印在屏幕上`The maximum is 2143429780`。到目前为止正在按预期工作。

问题是当我尝试读取存储在该内存地址的元素（数组的第一个元素）时。我遇到了一个分段错误......我正在这样做：

```
 .data

    .text
    .globl  MaxAssembly

MaxAssembly:
    lw      $16,0($4)
    move    $2,$16
    jr  $ra 
```

What am I doing wrong? wasn't `lw`supposed to store at `$16` the first item of the array? Using `lb`is the same

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:47:35.320

Yes, `lw $s0, 0($a0)` will read a full word from the address in `$a0` to `$s0`. Unlike, lb, memory access via lw must use word-aligned addresses (i.e., two LSB are zero). I suspect that's where the problem occur.

# jquery - JQuery跨域基本认证调用

> ID：10063597
> 
> 赞同：10
> 
> 时间：2012-04-08T14:36:51.363
> 
> 标签：jquery, spring-security, cross-domain, basic-authentication, cors

我已经使用 Spring MVC 构建了一个 REST API 后端，并使用 Spring Security 使用基本身份验证进行保护。

我想从 Javascript 客户端对 REST API 进行跨域 ajax 调用。我不想使用 JSONP，因为我不想局限于 GET 调用。我使用 CORS，并且在服务器端放置了正确的标头。

假设我的 REST API 在域 localhost:8087 上，而我的客户端在 localhost:8086 上，这是跨域调用。

在我的 Javascript 客户端中，我使用 jQuery 进行 ajax 调用：

```
<script>
        $.ajax ({
            url: "http://localhost:8087/SpringMVC/users/user1",
            beforeSend: function (xhr) { xhr.setRequestHeader ("Authorization", "Basic xxxxxxxxxxxx"); },
            success: function(val) { console.log(val); alert("success" + val); },
            error: function(val) { console.log(val); alert("error" + val); }
        });
</script> 
```

我的问题是 jQuery 没有在 HTTP 请求中发送 Authorization 标头，我不知道为什么。我不明白，因为我是在 beforeSend 方法中做的，所以它应该在 HTTP 请求中。结果：我有一个 401 错误。

当我从同一个域 localhost:8087（不再是跨域）尝试脚本时，我没有问题。

这怎么可能 ？

我的脚本只是一个测试。我不打算将我的用户名/密码放在客户端。但我想测试如何对基本的身份验证保护的 REST API 进行 ajax 调用。我想我必须在服务器端发送以确保我的用户名/密码的安全，REST API 向我发送回一个 cookie，并且我不需要再将用户名/密码传递给我的下一个 ajax 调用到 REST API。我对吗 ？

我已经用 Chrome Advanced REST 客户端测试了我的 REST API，它的工作原理就是这样。对于第一个请求，我需要传递授权标头。然后就不需要了。我的 javascript Web 客户端也应该这样工作吗？我打算使用带有 Backbone 的 Node.JS 来构建它。

非常感谢。

**EDIT2**：似乎真的是一个CORS浏览器问题。我在服务器端为 OPTIONS 方法添加了标题 Access-Control-Allow-Methods，它适用于 Chrome。我可以毫无错误地访问 JSON 响应。但我仍然需要为下一个请求使用授权标头。如何告诉 jQuery 使用发送的 cookie？

当我尝试使用 Firefox 11 时，我无法访问 json 响应并且出现错误：

```
"NetworkError: 401 Non-Autorisé - http://localhost:8087/SpringMVC/users/user1" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T12:32:25.243

显然，Chrome 和 Firefox 对跨域请求的处理方式有所不同。在执行跨域请求之前，他们使用 HTTP OPTIONS 方法执行所谓的“预检”请求。Chrome 和 Firefox 之间的区别在于 Chrome 还会发送带有凭据的 Authorization 标头，而 Firefox 则不会。

然后，它仍然是一个 Spring Security 配置问题。我的 url /users/* 对于所有 HTTP 方法都是安全的，包括 OPTIONS。对于 Firefox，由于未发送 Authorization 标头，因此我的请求未获得授权。如果我将我的安全 url /users/* 仅限于 GET 方法，那么它非常适用于 Firefox。所以我只需要在我的 Spring 安全配置中添加它：

```
<intercept-url pattern="/users/*" access="isAuthenticated()" method="GET"/> 
```

之后，我可以选择：我可以在拦截 URL 中添加其他要保护的方法，除了 OPTIONS，或者我可以在 Spring MVC 控制器中将 HTTP 方法调用限制为 GET，它甚至会根据Java 文档。我选择了第二种解决方案。但是，如果有人找到一种解决方案来强制 Firefox 像 Chrome 一样发送凭据，那就太好了，我会选择这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T15:37:34.313

*rico*提出的 Spring Security 配置方案的另一个选项是：

```
<http ... use-expressions="true">
    <intercept-url pattern="/users/*" access="permitAll" method="OPTIONS"/>
    <intercept-url pattern="/users/*" access="isAuthenticated()"/>
    ...
</http> 
```

HTTP OPTIONS 请求将始终通过身份验证，而任何其他 HTTP 方法都不会。

请注意元素中的`use-expressions`XML 属性设置为**true 。**`<http>`然后 Spring Security 将期望元素的`access`属性`<intercept-url>`包含**Spring EL 表达式**，如**permitAll**和**isAuthenticated()**。

# iphone - iOS/UIFont - 减少字体宽度

> ID：10063601
> 
> 赞同：2
> 
> 时间：2012-04-08T14:37:13.813
> 
> 标签：iphone, ios, cocoa-touch, fonts, uifont

我有`UILabel`一个固定大小的。不幸的是，在极少数情况下，我需要放入其中的文本不适合！我尝试过减小字体大小，但它需要减小很多，以至于看起来很糟糕。

是否可以以某种方式更改字体宽度？UIFont 似乎没有任何属性可以让我这样做？我需要使用 UIWebView 并使用 CSS 吗？我不太了解 CSS，因此如果这是解决此问题的最佳方法，我们将不胜感激。

或者，还有其他方法可以解决这个问题吗？

谢谢克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:57:48.943

缩小文本宽度的最简单方法是对标签层应用变换：

```
label.layer.transform = CATransform3DMakeScale(desiredWidth/textWidth, 1.0, 1.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:10:20.327

您的意思是要在保持高度的同时水平挤压它吗？这是可以实现的，最高可达常规宽度的 60%。除此之外，它看起来很糟糕。

这是 UILabel 子类的 drawRect ，如有必要，它在任一轴上独立挤压。

```
// This drawRect for a UILabel subclass reproduces most common UILabel formatting, but does not do truncation, line breaks, or scaling to fit.
// Instead, it identifies cases where the label text is too large on either axis, and shrinks along that axis.
// For small adjustments, this can keep text readable.  In extreme cases, it will create an ugly opaque block.
- (void) drawRect:(CGRect)rect;
{
    CGRect bounds = [self bounds];
    NSString *text = [self text];
    UIFont *font = [self font];

    // Find the space needed for all the text.
    CGSize textSize = [text sizeWithFont:font];

    // topLeft is the point from which the text will be drawn.  It may have to move due to compensate for scaling, or due to the chosen alignment.
    CGPoint topLeft = bounds.origin;

    // Default to no scaling.
    CGFloat scaleX = 1.0;
    CGFloat scaleY = 1.0;

    // If the text is too wide for its space, reduce it.
    // Remove the second half of this AND statement to have text scale WIDER than normal to fill the space.  Useless in most cases, but can be amusing.
    if ((textSize.width>0) && (bounds.size.width/textSize.width<1))
    {
        scaleX = bounds.size.width/textSize.width;
        topLeft.x /= scaleX;
    }
    else
    {
        // Alignment only matters if the label text doesn't already fill the space available.
        switch ([self textAlignment])
        {
            case UITextAlignmentLeft :
            {
                topLeft.x = bounds.origin.x;
            }
                break;

            case UITextAlignmentCenter :
            {
                topLeft.x = bounds.origin.x+(bounds.size.width-textSize.width)/2;
            }
                break;

            case UITextAlignmentRight :
            {
                topLeft.x = bounds.origin.x+bounds.size.width-textSize.width;
            }
                break;
        }
    }

    // Also adjust the height if necessary.
    if ((textSize.height>0) && (bounds.size.height/textSize.height<1))
    {
        scaleY = bounds.size.height/textSize.height;
        topLeft.y /= scaleY;
    }
    else
    {
        // If the label does not fill the height, center it vertically.
        // A common feature request is for labels that do top or bottom alignment.  If this is needed, add a property for vertical alignment, and obey it here.
        topLeft.y = bounds.origin.y+(bounds.size.height-textSize.height)/2;
    }

    // Having calculated the transformations needed, apply them here.
    // All drawing that follows will be scaled.
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, scaleX, scaleY);

    // Begin drawing.
    // UILabels may have a shadow.
    if ([self shadowColor])
    {
        [[self shadowColor] set];
        CGPoint shadowTopLeft = CGPointMake(topLeft.x+[self shadowOffset].width/scaleX, topLeft.y+[self shadowOffset].height/scaleY);
        [text drawAtPoint:shadowTopLeft withFont:font];
    }

    // The text color may change with highlighting.
    UIColor *currentTextColor;
    if ((![self isHighlighted]) || (![self highlightedTextColor]))
        currentTextColor = [self textColor];
    else
        currentTextColor = [self highlightedTextColor];

    // Finally, draw the regular text.
    if (currentTextColor)
    {
        [currentTextColor set];
        [text drawAtPoint:topLeft withFont:font];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T14:42:39.033

您可以将`minimum font size`UILabel 的 设置为较小的值，并检查`Autoshrink`以使其自动缩小。此参数在 Interface Builder 中可用。

内部实现将减少字距，即字符之间的间距宽度。但它实际上不能减小宽度。

这是你更好的选择。如果您对结果仍然不满意。您可能需要更改您的设计。

# php - 使用php上传swf文件？

> ID：10063602
> 
> 赞同：1
> 
> 时间：2012-04-08T14:37:31.950
> 
> 标签：php, file, upload, flash

这可能听起来很基本，但我想我还是会问。

我想要做的是将 swf 文件上传到特定文件夹中，以便用户可以上传游戏，我可以查看它们以确保它们是安全的。

我不完全确定我会如何做到这一点。这是我在 w3schools.com 上找到的一个简单代码，我尝试修改但无济于事。

```
 <?php
if ((($_FILES["file"]["type"] == "application/swf"))
&& ($_FILES["file"]["size"] < 20000))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "games/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "games/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }

?> 
```

我将可上传的文件类型更改为 application/swf，但是当我实际上传 swf 文件时，它只是说“文件无效”

我在谷歌上搜索了一个 swf 文件上传脚本，没有找到任何东西，所以我想我会在这里试试运气。

谢谢

# c++ - 在 createwindow(...) 之后，如何给窗口一个颜色？

> ID：10063604
> 
> 赞同：4
> 
> 时间：2012-04-08T14:37:52.373
> 
> 标签：c++, window, background-color, createwindow

我创建了一个句柄为 handle_parent 的窗口。然后我创建了一个子窗口，如下所示：

```
hwnd_child = CreateWindow(child_class_name, _T(""),
WS_CHILDWINDOW, 0, 0, 0, 0, hwnd_parent, (HMENU)0, ghinst, NULL);
ShowWindow(win->hwndSplitterBar, SW_SHOW);
UpdateWindow(win->hwndSplitterBar); 
```

我想设置子窗口“孩子”的颜色。如果我什么都不做，默认情况下颜色是灰色的。我怎么能设置它的颜色？我想保持颜色为黑色永久，无论如何都要改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:55:28.080

创建所需颜色的画笔，然后在调用注册窗口类时将其传递`hbrBackground`给结构的成员。[`WNDCLASS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633576.aspx)[`RegisterClass`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633586.aspx)

当您调用时，系统会自动删除此笔刷，`UnregisterClass`因此一旦您将笔刷交给`RegisterClass`您，您就可以忘记它，并且不得尝试自行删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T14:14:22.997

这个例子可能会有所帮助：

```
//Setting the background color of a window during window class registration
WNDCLASS wc = { 0 } ( or WNDCLASS wc; memset(&wc, 0, sizeof(wc)); )
...
...
...
wc.hbrBackground = CreateSolidBrush(0x000000ff); // a red window class background
...
...
RegisterClass(&wc);

// Setting the background during WM_ERASEBKGND
LRESULT CALLBACK YourWndProc(HWND hwnd, UINT umsg, WPARAM,LPARAM)
{
   switch( umsg )
   {
      case WM_ERASEBKGND:
      {
         RECT rc;
         GetClientRect(hwnd, &rc);
         SetBkColor((HDC)wParam, 0x000000ff); // red
         ExtTextOut((HDC)wParam, 0, 0, ETO_OPAQUE, &rc, 0, 0, 0);
         return 1;
      }
      // or in WM_PAINT
      case WM_PAINT:
      {
         PAINTSTRUCT ps;
         RECT rc;
         HDC hdc = BeginPaint(hwnd, &ps);
         GetClientRect(hwnd, &rc);
         SetBkColor(hdc, 0x000000ff); // red
         ExtTextOut(hdc, 0, 0, ETO_OPAQUE, &rc, 0, 0, 0);
         EndPaint(hwnd, &ps);
         break;
      }
      ...
      ...
      ...
      default:
         return DefWindowProc(...);
   }
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-09T15:06:44.437

使用 CreateSolidBrush()::

WNDCLASS wc = { 0 } ( 或 WNDCLASS wc; memset(&wc, 0, sizeof(wc)); ) ... wc.hbrBackground = CreateSolidBrush(RGB(255,0,0)) 或 CreateSolidBrush(0x000000ff); // 一个红色窗口类背景

# android - 如何从 tabview 中的列表活动开始新活动

> ID：10063606
> 
> 赞同：2
> 
> 时间：2012-04-08T14:38:25.023
> 
> 标签：android

我正在开发新的应用程序，我使用选项卡视图作为父布局。我正在使用 TabHost 在我的应用程序中显示 3 个选项卡。这些选项卡中的每一个都有单独的 Activity，其中包含一个 ListView。这工作正常。当您单击 ListView 中的某个项目时，它当前会加载一个全新的 Activity 全屏并离开 TabHost。我想在 TabHost 中加载这些活动。从列表视图调用另一个活动后，我想保留标签视图。

谢谢你们的回复。这是我需要您帮助的代码。

################HelloTabWidget

//此类显示带有 3 个选项卡的选项卡视图 - 客户、公司和城市。

```
 public class HelloTabWidget extends TabActivity {
    //public class HelloTabWidget extends ActivityGroup {
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Resources res = getResources();

        TabHost tabHost = getTabHost(); 
        TabHost.TabSpec spec; 
        Intent intent; 
        intent = new Intent().setClass(this, CustomerTabView.class);
        spec = tabHost
                .newTabSpec("Customer")
                .setIndicator("Customer",
                        res.getDrawable(R.drawable.ic_tab_Customer))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, CompanyTabView.class);
        spec = tabHost
                .newTabSpec("Company")
                .setIndicator("Company",
                        res.getDrawable(R.drawable.ic_tab_Company))
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, CityTabView.class);
        spec = tabHost
                .newTabSpec("City")
                .setIndicator("City", res.getDrawable(R.drawable.ic_tab_City))
                .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(0);
    }
} 
```

################CustomerTabView

//此类显示客户姓名的列表视图。单击列表中的任何项目时，它应该打开客户详细信息页面，并保持相同的选项卡视图。

```
public class CustomerTabView extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String[] category = getResources().getStringArray(
                R.array.category_array);
        setListAdapter(new ArrayAdapter<String>(this, R.drawable.list_items,
                category));
        ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                //Need this logic where I can retain the tab view and call new activity class for customerdetails view.                 

                Intent intent; 
                intent = new Intent(CustomerTabView.this,
                        C_DetailActivity.class);
                startActivity(intent);
                finish();
            }

        });
    }
} 
```

################C_DetailActivity

单击 customertabview 中的任何项目时，此活动类会被调用，显示客户的详细信息。

```
public class C_DetailActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        TextView textview = new TextView(this);
        textview.setText("This is the Customer Details view");
        setContentView(textview);
    }
} 
```

调用 C_DetailActivity 类后，标签视图消失。我想保留主选项卡视图。所以需要这个逻辑，我可以保留选项卡视图并为 customerdetails 视图调用新的活动类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:51:09.050

```
ListView lv = (ListView) findViewById(R.id.myListView);
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView parent, View v, int position, long id) {
        LocalActivityManager manager = getLocalActivityManager();
        String currentTag = tabHost.getCurrentTabTag();
        manager.destroyActivity(currentTag, true);
        manager.startActivity(currentTag, new Intent(this, newClass.class));
    }
}); 
```

未经测试，但这样的事情应该可以工作。如果不是，我会帮你解决它。

# c++ - 使用 TDD 进行 Ogre 游戏编程

> ID：10063608
> 
> 赞同：1
> 
> 时间：2012-04-08T14:38:36.117
> 
> 标签：c++, testing, tdd, ogre3d, ogre

[我想问一下，在使用Ogre](http://www.ogre3d.org/)用 C++ 创建 3D 游戏时使用[TDD](http://en.wikipedia.org/wiki/Test-driven_development)概念是否值得？我知道我可以在创建我的算法（如寻路、人工智能、分页等）和游戏逻辑时使用它，但它可以用于测试绘图方面吗？我的意思是如果绘制了正确的对象，是否设置并使用了正确的动画以及许多其他我不想列举的“事物”。

我已经搜索了几天，但*我没有找到我可以接受的答案*。
基本上游戏开发的哪一部分应该使用TDD，哪一部分不应该？3D游戏开发需要TDD吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:50:46.083

Ogre 使用了如此多的 Singleton 和其他全局状态，我发现很难看到如何为它实现有意义的测试——即使忽略测试渲染图像准确性的难度。

# asp.net-mvc-3 - 配置 Lightspeed 以在 MVC3 Web 项目中使用

> ID：10063617
> 
> 赞同：0
> 
> 时间：2012-04-08T14:39:28.800
> 
> 标签：asp.net-mvc-3, configuration, lightspeed

我有一个关于在 MVC3 Web 应用程序中使用 LightSpeed 的问题。我正在创建一个 REST Api 项目，我想在其中使用 LightSpeed，但[官方配置指南](http://www.mindscapehq.com/documentation/lightspeed/Basic-Operations/LightSpeed-Configuration-Basics)非常模糊。官方文档说需要将以下几行添加到文件 web.config 中：

```
<configSections>
   <section name="lightSpeedContexts" 
              type="Mindscape.LightSpeed.Configuration.LightSpeedConfigurationSection, Mindscape.LightSpeed" />
</configSections>

<lightSpeedContexts>
  <add name="Test" />
</lightSpeedContexts>

<lightSpeedContexts>
  <add name="Test" dataProvider="SQLite3" />
</lightSpeedContexts> 
```

我尝试在根目录中的 web.config 中添加以下行：

```
<configSections>
    <section name="lightSpeedContexts"
              type="Mindscape.LightSpeed.Configuration.LightSpeedConfigurationSection, Mindscape.LightSpeed" />
  </configSections>

  <lightSpeedContexts>
    <add name="Default" connectionStringName="Prod" dataProvider="MySQL5" />
  </lightSpeedContexts>

  <connectionStrings>
    <add name="Prod" connectionString="server=localhost;User Id=production;password=xxx;Persist Security Info=True;database=CBS"/>
  </connectionStrings> 
```

这会在我启动 Web 应用程序时引发异常，告诉我在应用程序中不能多次指定 configSections。默认情况下，根 web.config 文件没有指定任何这些。

我不确定在哪里放置这个配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:20:36.650

好的，我找到了解决问题的方法。

I moved out the configSections that were in the two sub web.config files (in each Views folder) and put the contents in the main web.config file, then I added the lightSpeedContexts and connectionStrings in the main web.config file.

# asp.net-mvc - 我如何在 layout.cshtml 中使用数据库数据

> ID：10063618
> 
> 赞同：2
> 
> 时间：2012-04-08T14:39:32.313
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在 asp.net 中，当我使用母版页时，我可以使用后面的母版页代码来运行共享代码。在 MVC 中我该怎么做。所有页面都使用 layout.cshtml 但没有任何共享控制器。

在我的布局中，我有一些必须从数据库加载的数据，但是没有地方可以编写这些代码并填充 viewbag 以将数据发送到 layout.cshtml

```
<div class="page">
    <header  >
        <div id="title">
            <h1>Management</h1>
        </div>
        <div id="logindisplay">
            @Html.Partial("_LogOnPartial")
        </div>
    <br />
    <br />
        <nav>
            <ul id="menu">
                       // these data must load from db
            </ul>
        </nav>
    </header>
    <section id="main">
        @RenderBody()
    </section>
    <footer>
    </footer>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:46:03.150

在共享目录中，您可以放置​​将在您的 Web 应用程序中使用的所有文件（如母版页和部分视图），希望在它们被多次使用的情况下（用于部分视图）。没有共享控制器，但您可以创建一个 CommonController 来处理菜单等内容。

我不知道您需要在视图中显示哪些其他数据，但看看您的示例，您似乎想在 ul 标记中显示菜单项。

我会有一个代表菜单项的类，例如：

```
public class MenuItem
{
     public int MenuId { get; set; }
     public string MenuName { get; set; }
} 
```

我总是为每个视图创建一个视图模型。这更好，因为这样您就只有视图上所需的字段。永远不要将您的域对象直接发送到视图。

视图模型看起来像这样，它可以包含许多其他属性，但对于这个演示，我将只包含 meu 项。

```
public class MyViewModel
{
     // This will contain the menu items that you want displayd in your view
     public IEnumerable<MenuItem> MenuItems { get; set; }
} 
```

您的操作方法（在称为 CommonController 之类的控制器中）：

```
public ActionResult MyActionMethod
{
     MyViewModel viewModel = new MyViewModel
     {
          // Here you do a database call to populate your menu items
          // This GetAllMenuItems method returns a list of MenuItem objects
          MenuItems = menuItemService.GetAllMenuItems()
     };

     return View(viewModel);
} 
```

创建一个从 CommonController 获取数据的局部视图（您需要使用上面的操作方法创建它）。循环遍历 MenuItems 中的每个 MenuItem，并在 li 标签中显示名称。

```
<ul>

     @foreach (var item in Model.MenuItems)
     {
          <li>item.MenuName</li>
     }

</ul> 
```

我希望这有帮助。剩下的事情我留给你做，然后阅读更多文章。互联网上有很多信息描述了您想要做什么。您只需要花时间阅读这些文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:43:15.260

有几个选项。您可以使用局部视图（使用它自己的控制器和视图模型），也可以使用基本控制器。使用基本控制器，每个控制器都将其用作祖先，您可以使用基本控制器来加载通用数据元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T17:32:41.687

我知道这篇文章很旧，但我突然遇到了同样的问题，我发现我们可以使用我正在使用 vb 的 Razor 轻松地以布局形式访问 VB。您可以为 c# 修改此代码。我正在使用`@Imports System.Data.SqlClient`. 这段代码对我来说非常有效，我想要你所描述的

```
 <li class="treeview">
                    <a href="#">
                        <i class="fa fa-indent"></i>
                        <span>Transaction</span> <i class="fa fa-angle-left pull-right"></i>

                        <span class="label label-primary pull-right"></span>
                    </a>
                    <ul class="treeview-menu scrollbar">
                        @Code
                            Using conn As New SqlConnection(connectionString)
                                Dim sSql = "SELECT * FROM SM_OBJECT_INFO WHERE menu_name = 'Transaction' Order By group_index, index_no"
                                Dim formname As String
                                Dim formtitle As String
                                Dim cmd As SqlCommand = New SqlCommand(sSql, conn)
                                conn.Open()
                                Dim rst As SqlDataReader = cmd.ExecuteReader
                                Do While rst.Read()
                                    formname = rst!form_name
                                    formtitle = rst!object_name
                                    @<li><a href=@formname>@formtitle</a></li>
                                Loop
                            End Using
                        end code
                    </ul>
                </li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T07:36:55.470

这篇文章对我有用——下面我正在详细写——在共享目录中，您将在您的 Web 应用程序中使用的所有文件（如母版页和部分视图）放在共享目录中，希望它们的使用次数超过一次（对于部分视图）。没有共享控制器，但您可以创建一个 CommonController 来处理菜单等内容。

我不知道您需要在视图中显示哪些其他数据，但看看您的示例，您似乎想在 ul 标记中显示菜单项。

我会有一个代表菜单项的类，例如：

```
public class MenuItem
{
     public int MenuId { get; set; }
     public string MenuName { get; set; }
} 
```

我总是为每个视图创建一个视图模型。这更好，因为这样您就只有视图上所需的字段。永远不要将您的域对象直接发送到视图。

视图模型看起来像这样，它可以包含许多其他属性，但对于这个演示，我将只包含 meu 项。

```
public class MyViewModel
{
     // This will contain the menu items that you want displayd in your view
     public IEnumerable<MenuItem> MenuItems { get; set; }
} 
```

您的操作方法（在称为 CommonController 之类的控制器中）：

```
public ActionResult MyActionMethod
{
     MyViewModel viewModel = new MyViewModel
     {
          // Here you do a database call to populate your menu items
          // This GetAllMenuItems method returns a list of MenuItem objects
          MenuItems = menuItemService.GetAllMenuItems()
     };

     return View(viewModel);
} 
```

创建一个从 CommonController 获取数据的局部视图（您需要使用上面的操作方法创建它）。循环遍历 MenuItems 中的每个 MenuItem，并在 li 标签中显示名称。

```
<ul>

     @foreach (var item in Model.MenuItems)
     {
          <li>item.MenuName</li>
     }

</ul> 
```

我希望这有帮助。剩下的事情我留给你做，然后阅读更多文章。互联网上有很多信息描述了您想要做什么。您只需要花时间阅读这些文章。

* * *

这是在 MVC 中实现 asp.net 母版页功能的非常有用的文章。即，如果我们想要一个对每个页面都通用的功能[MVC 中的每个控制器/视图] 都需要遵循本文的步骤。我遇到了一次本文未提及的问题，将在下面分享 - 当我们将创建部分视图时，该部分视图将在 _layout 页面上调用以在每个视图中共享.. 我们必须写 - @{Html.RenderAction("BindMenu ", "Common");} 在 _Layout 页面上。因为我是新手，所以我试图调用部分视图，例如 - @Html.Partial("~/Views/Shared/_HeaderMenuPartial.cshtml", Model.MenuItemsList) 这不起作用。

# xcode - 升级到 Xcode 4.3.2 后，iPad 的 iOS 模拟器无法运行

> ID：10063619
> 
> 赞同：1
> 
> 时间：2012-04-08T14:39:50.707
> 
> 标签：xcode, ios-simulator

几天前，我通过从开发者门户下载并运行安装文件升级到 Xcode 4.3.2。从那时起，我可以在我的设备上测试应用程序，也可以在 iPhone 的 iOS 模拟器上测试它们而不会出现问题。但是，iPad 模拟器运行不佳。附上截图。

1.  主页按钮不出现。
2.  状态栏不出现。
3.  模拟器看起来像一个带有最小化和最大化图标的窗口（仅启用了最大化图标），并且还有一个带有版本号的标题。

任何人都可以请建议，模拟器的屏幕截图位于以下位置。 [http://postimage.org/image/68pa1t7l9/](http://postimage.org/image/68pa1t7l9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:54:42.160

iPad 模拟器中缺少皮肤，一个解决方案是使用键盘快捷键，Cmd+Shift+H 用于 Home，Cmd+1 / 2 / 3 调整窗口大小以适应您的屏幕以避免滚动条等。

# eclipse - 为什么我在 Eclipse 中看到大量减少的公共 JBoss Maven 存储库？

> ID：10063631
> 
> 赞同：0
> 
> 时间：2012-04-08T14:41:22.480
> 
> 标签：eclipse, maven, jboss, repository, m2eclipse

正如您在本文末尾的图片中看到的那样，Eclipse 中的 JBoss 存储库中只有几个工件可用。但是，如果您在[https://repository.jboss.org/nexus/index.html#view-repositories;public-jboss~browsestorage](https://repository.jboss.org/nexus/index.html#view-repositories;public-jboss~browsestorage)在线浏览它，则有数百个。我已经多次重建和更新索引。我已经检查了“启用完整索引”。我已将存储库 URL 从 https 更改为 http 并返回。我当然搜索过网络，但无法修复它。我**不**支持代理。

以下是一些版本信息：

*   Ubuntu 10.10
*   Eclipse 靛蓝 3.7.2
*   Maven 3.0.4

托管在 Apache 上的 Maven 中央存储库工作正常，但 JBoss 存储库却不行。我在 ~/.m2/ 目录中使用 settings.xml 配置了 Maven。每当我进行更改时，我都会重新加载 settings.xml。

**这是我的 settings.xml**

```
<settings xmlns="http://maven.apache.org/settings/1.0.0"  
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

 <profiles>
    <profile>
      <id>jboss-public-repository</id>
      <repositories>
        <repository>
          <id>jboss-public-repository-group</id>
          <name>JBoss Public Maven Repository Group</name>
          <url>http://repository.jboss.org/nexus/content/groups/public-jboss/</url>
          <layout>default</layout>
          <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </releases>
          <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </snapshots>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <id>jboss-public-repository-group</id>
          <name>JBoss Public Maven Repository Group</name>
          <url>http://repository.jboss.org/nexus/content/groups/public-jboss/</url>
          <layout>default</layout>
          <releases>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </releases>
          <snapshots>
            <enabled>true</enabled>
            <updatePolicy>never</updatePolicy>
          </snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>jboss-public-repository</activeProfile>
  </activeProfiles>
</settings> 
```

**Maven 存储库浏览器看起来像这样**

[Maven 存储库浏览器，JBoss 存储库中的工件很少](http://i.stack.imgur.com/ilqVV.png)

# objective-c - setCompletionBlock 中的 AFNetworking EXC_BAD_ACCESS

> ID：10063633
> 
> 赞同：1
> 
> 时间：2012-04-08T14:41:28.173
> 
> 标签：objective-c, ios, ios5, afnetworking

我正在开发一个 iOS 应用程序，并且在使用 AFNetworking 发出 http 请求时遇到了一些问题。

当我运行代码时，出现错误：EXC_BAD_ACCESS(code=2 address=0x0)。当我尝试 setCompletionBlock 时发生错误。

我是 Objective-C 的新手，这让我很困惑。

先感谢您。感谢大家的帮助！

```
#import "AFNetworking.h"
#import <Cordova/CDV.h>
#import "UploadImg.h"

@implementation UploadImg

- (void) uploadImg:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options{
    NSURL *url = [NSURL URLWithString:@"http://test.com/mobile/"];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

    NSData *imageData = [NSData dataFromBase64String:[arguments objectAtIndex:1]];

    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    [params setObject:@"TEST_STYLE" forKey:@"styleType"];

    NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload.php" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:imageData name:@"imageName" fileName:@"image.png" mimeType:@"image/png"];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"success");
    } 
    failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error");
    }];

    [operation start];
}

@end 
```

![在此处输入图像描述](../Images/457a67a3f45a21c0e839d412224e8c57.png)

再次感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T14:06:36.737

我能够通过更改构建设置来解决这个问题。

在链接标题下更改“其他链接器标志”，单击 -weak_library 条目并将其替换为 -weak-lSystem

来自问题：[在 iPhone Simulator 4.3/XCode 4.2 和 4.0.2 中使用 Blocks 崩溃应用程序](https://stackoverflow.com/questions/6738858/use-of-blocks-crashes-app-in-iphone-simulator-4-3-xcode-4-2-and-4-0-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T23:54:39.453

欢迎来到有趣的 Objective-C 世界，@kev_addict！

当您遇到`EXC_BAD_ACCESS`异常时，了解详细信息会有所帮助，以查看有问题的调用的堆栈跟踪是什么样的。

没有任何额外的信息，我的直觉告诉我你的问题在于你从数组中获取图像数据的方式。有什么理由不让这种方法`UIImage`争论吗？期望这个方法接受一个需要图像数据的数组似乎很奇怪——在第二个位置，不少于。

# jquery - 简单的 jquery 动画要么不起作用，要么仅在 Firefox 中闪烁

> ID：10063637
> 
> 赞同：0
> 
> 时间：2012-04-08T14:41:36.947
> 
> 标签：jquery, css, slider, jquery-animate

几天前我发布了一些与此相关的内容......但我仍然没有解决它。[您可以在http://www.doublezerofilms.com](http://www.doublezerofilms.com)上看到它，我在这里有一个 jsfiddle：http: [//jsfiddle.net/kz29p/](http://jsfiddle.net/kz29p/)这个简单的滑块适用于除 Firefox 之外的所有应用程序。我想知道是否有人知道是否存在已知问题或解决方法。或者...对于你们 jquery 大师，如果我有一个 FF 不喜欢的冲突脚本。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:08:55.777

大约一年多以前，Flash/Firefox 添加了一项优化，尝试不加载不可见的 Flash 项目。而且，只有当它们变得可见时，才会真正加载闪光灯。我怀疑这里发生的事情是您的闪光灯最初不可见，因此无法加载。然后，当您制作动画时，它会变得可见并尝试加载，从而导致一些显示问题。

此外，您的自定义缓动功能在 jsFiddle 中不起作用。如果我删除 jsFiddle 中的自定义缓动功能并更改视频的初始位置，使其在开始时稍微可见，那么它似乎可以工作。在 Firefox 中的动画结束时，它仍然有一点闪烁（消失，然后再次显示），我不知道是什么原因造成的。

`right`在这里，您可以在删除自定义缓动并通过更改初始位置使其最初稍微可见后看到结果：http: [//jsfiddle.net/jfriend00/D85bR/](http://jsfiddle.net/jfriend00/D85bR/)

我还认为，如果您在 iframe 和嵌入式 Flash 对象完成加载之前开始制作动画，您很容易遇到问题。我知道您现在在制作动画之前会延迟 1 秒，但这在所有情况下可能还不够。我不知道如何检测 iframe 和另一个域上的嵌入式 Flash 对象何时完成加载。

**编辑：**

如果我从您的动画中删除高度和宽度，以便它只是为`right`值设置动画，那么闪光灯就会消失。我不确定您为什么要为高度和宽度设置动画，因为它们在您的 CSS 中预设为正确的大小。

你可以在这里看到它在没有 flash 的情况下在 Firefox 中工作：http: [//jsfiddle.net/jfriend00/pJKLL/](http://jsfiddle.net/jfriend00/pJKLL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:45:46.133

这可能是导致问题的缓动函数，删除缓动属性为我在 Firefox 中解决了问题。

# c# - 我的 MVC3 razor 视图中的 if 语句问题

> ID：10063648
> 
> 赞同：2
> 
> 时间：2012-04-08T14:43:15.523
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我需要根据模型中的变量值修改剃刀视图中元素的显示。

我所拥有的是 Model.PartitionKey ，它是一个六个字符串。我需要编写一个 if 语句来检查该字符串的第 3 个和第 4 个字符是否为“00”。

这是我到目前为止所拥有的：

```
@using (Ajax.BeginForm(
    action,
    "Contents",
    null,
    new AjaxOptions
    {
        UpdateTargetId = "update-message",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST",
        OnSuccess = success,
        OnFailure = "ajaxOnFailure"
    }, new { @id = "dialogForm", @class = "content ui-widget dialog-admin" }))
{

<div class="float-left">
    @Html.LabelFor(model => model.Status)
    @if (action == "Edit" || action == "Create") {
        @Html.DropDownList("Status", null, new { @class="drop-down", id = "dialogStatus", style="width: 120px" })
    }
    else
    {
        @Html.TextBox("Status", (string)ViewBag.Status, new { @readonly = true })      
    }
</div> 

@if ( Model.PartitionKey.Substring(2,2) == "00") {  
<div class="float-left">
    Html.LabelFor(model => model.Link)
    if (action == "Edit" || action == "Create") {
        Html.TextBoxFor(model => model.Link, new { size = 25 })
    } else {
        Html.TextBoxFor(model => model.Link, new { size = 25, @readonly = true })
    }
</div> 
} 
```

问题是它在第 3 个字符“f”上以 @if 开头的行中有一条错误消息，上面写着“@ 字符之后的 if 关键字意外”。

请注意，我在第一个代码块中的 if 之前有 @ 字符。然而，它只是在它抱怨的第二个代码块中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:55:08.087

尝试

```
@using (Ajax.BeginForm(
    action,
    "Contents",
    null,
    new AjaxOptions
    {
        UpdateTargetId = "update-message",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST",
        OnSuccess = success,
        OnFailure = "ajaxOnFailure"
    }, new { @id = "dialogForm", @class = "content ui-widget dialog-admin" }))
{

<div class="float-left">
    @Html.LabelFor(model => model.Status)
    @if (action == "Edit" || action == "Create") {
        @Html.DropDownList("Status", null, new { @class="drop-down", id = "dialogStatus", style="width: 120px" })
    }
    else
    {
        @Html.TextBox("Status", (string)ViewBag.Status, new { @readonly = true })      
    }
</div> 

if ( Model.PartitionKey.Substring(2,2) == "00") {  
<div class="float-left">
    @Html.LabelFor(model => model.Link)
    @if (action == "Edit" || action == "Create") {
        @Html.TextBoxFor(model => model.Link, new { size = 25 })
    } else {
        @Html.TextBoxFor(model => model.Link, new { size = 25, @readonly = true })
    }
</div> 
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T15:21:34.350

我认为你不能在那种 if 里面有一个 if 。尝试打开一个代码块

```
@{ if (boolean)
    {
         // some code
         if (boolean)
         {
             //some code
         }
    } 
} 
```

试试看是否有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T16:10:57.310

使用这样的东西

```
@{
  if (Boolean)
  {
    // execute code here
  }
  else
  {
    // execute else code here
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T18:02:46.987

根据以下链接：

1.  [http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)
2.  [“@”字符后出现意外的“foreach”关键字](https://stackoverflow.com/questions/4946334/razor-unexpected-foreach-keyword-after-character)
3.  [http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

我知道上面的评论中提到了它，但它可能会有所帮助。因此，根据所附的内容，以下代码是否有效：

```
@using (Ajax.BeginForm(
action,
"Contents",
null,
new AjaxOptions
{
    UpdateTargetId = "update-message",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "POST",
    OnSuccess = success,
    OnFailure = "ajaxOnFailure"
}, new { @id = "dialogForm", @class = "content ui-widget dialog-admin" }))
{

<div class="float-left">
    @Html.LabelFor(model => model.Status)
    @if (action == "Edit" || action == "Create") {
        @Html.DropDownList("Status", null, new { @class="drop-down", id = "dialogStatus", style="width: 120px" })
    }
    else
    {
        @Html.TextBox("Status", (string)ViewBag.Status, new { @readonly = true })      
    }
</div> 

@if ( Model.PartitionKey.Substring(2,2) == "00") {  
<div class="float-left">
    Html.LabelFor(model => model.Link)
    if (action == "Edit" || action == "Create") {
        @Html.TextBoxFor(model => model.Link, new { size = 25 })
    } else {
        @Html.TextBoxFor(model => model.Link, new { size = 25, @readonly = true })
    }
</div> 
} 
```

# php - PHP 将数组 'a'、'b'、'c' 转换为 'a/b/c'、'a/b'、'a'

> ID：10063651
> 
> 赞同：4
> 
> 时间：2012-04-08T14:43:41.720
> 
> 标签：php, arrays, dns, uri

我有一个 uri 并希望从完整的 uri 下降开始获得一系列零件，直到我只有第一个 uri 段作为零件。我也有域，但是这些片段从末端开始缝合。

```
String 'a/b/c' to array('a/b/c', 'a/b', 'a')
String 'test.domain.com' to array('test.domain.com', 'domain.com', 'com') 
```

根据我的初始方法和答案中的第二种方法以及第三种方法，我想知道哪种方法最快，也许还有第四种方法更好......

方法一：

```
function explode_special($delimiter, $string, $reverse = false)
{
    if (strpos($string, $delimiter) === false) return array($string);

    $segments = explode($delimiter, $string);

    if ( ! $reverse)
    {
        array_walk($segments, function($v, $k, $d) use(&$segments, &$delimiter) {
            $d[$k] = implode($delimiter, array_slice($segments, 0, (count($segments) - $k)));
        }, &$parts);
    }
    else
    {
        array_walk($segments, function($v, $k, $d) use(&$segments, &$delimiter) {
            $d[$k] = implode($delimiter, array_slice($segments, $k));
        }, &$parts);
    }

    return $parts;
} 
```

方法二：

```
function explode_special($delimiter, $string, $reverse = false)
{
    if (strpos($string, $delimiter) === false) return array($string);

    $segments = explode($delimiter, $string);

    $parts = array();

    while ($segments)
    {
        $parts[] = implode($delimiter, $segments);

        if ($reverse)
        {
            array_shift($segments);
        }
        else
        {
            array_pop($segments);
        }
    }

    return $parts;
} 
```

方法三：

```
function explode_special($delimiter, $string, $reverse = false)
{
    if (strpos($string, $delimiter) === false) return array($string);

    $parts = array($string);

    for ($i = substr_count($string, $delimiter); $i > 0; $i--)
    {
        $parts[] = $string = $reverse
        //  ? trim(strstr($string, $delimiter), $delimiter)
            ? substr($string, strpos($string, $delimiter) + 1)
            : substr($string, 0, strrpos($string, $delimiter));
    }

    return $parts;
} 
```

输出：

```
// explode_special('/', 'a/b/c') = array('a/b/c', 'a/b', 'c');
// explode_special('.', 'test.domain.com', true) = 
//     array('test.domain.com', 'domain.com', 'com'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:46:28.207

```
function multisplit($delim,$str) {
    $parts = explode($delim,$str);
    $arr = Array();
    while($parts) {
        $arr[] = implode($delim,$parts);
        array_pop($parts);
    }
    return $arr;
} 
```

使用该函数，您只需调用`multisplit("/","a/b/c");`它就会返回`['a/b/c','a/b','a']`. 同样，调用`multisplit(".","test.domain.com");`并获取`['test.domain.com','test.domain','test']`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:39:42.040

What you think about this with regex

```
function splitString($string,$delim) {
    $arr = array();
    preg_match_all('~['.$delim.']~U',$string,$delimCounter);
    $arr[] = $string;
    for ($i = 0;$i<count($delimCounter[0]);$i++) {
        $string = $arr[] = preg_replace('~^[^.]*['.$delim.']~',"",$string);
    }
    return $arr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:12:41.170

我想出了以下

```
<?php

header("Content-type: text/plain"); //For display purposes only

/**
 * Returns an array of strings with diminishing elements of $string according to $delimiter
 *
 * @param string $string        The string
 * @param string $delimiter     The delimiter
 *
 * @return string[]             Array of strings
 */
function degrading_split($string, $delimiter) {
    $exploded = explode($delimiter, $string);   //Array version of the string
    $result   = array();                        //Initialize result array

    foreach ($exploded as $key => $value) {     //Iterate the array

        $result[] = implode(                    #Implode...
            $delimiter,                         #Using the original delimiter
            array_slice($exploded, $key)        #The complete $exploded array starting from the current $key
        );
    }

    return $result;

}

print_r(degrading_split("a/b/c/d", "/")); 
```

# java - Android编程复制音频文件（mp3）？

> ID：10063652
> 
> 赞同：1
> 
> 时间：2012-04-08T14:43:47.367
> 
> 标签：java, android, mp3, inputstream, outputstream

我正在尝试创建一个 mp3 文件的副本。这我需要修剪那个 mp3 文件。所以我猜可以使用输入、输出流。可以正常文本文件类型的复制将能够创建一个文件可以播放。对java中的文件处理有很好的了解的人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T16:57:46.453

MP3 文件是二进制文件。所以只要你复制MP3使用二进制文件操作复制就会成功。

但是，要修剪 MP3 文件，您需要了解 MP3 文件的结构。MP3 文件由一系列 MP3 帧组成。每个帧都以 MP3 标头开始，然后是数据。MP3 帧头包含信息，您可以使用这些信息找到帧长度。

有关 MP3 标头的更多详细信息，[请访问 http://www.id3.org/mp3Frame](http://www.id3.org/mp3Frame)

因此，只要您以整数帧复制，就可以了。即便如此，解码器也会忽略不完整的帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-28T13:48:01.220

下面的代码是复制 mp3 文件或其他所有内容的解决方案。我从未经历过修剪部分。但是，我认为仅通过指定所需的缓冲区量来修剪文件在逻辑上是可能的。）实际上*dst*是目录中复制文件的名称。

```
private void copyFile(String src, String dst) {
    FileInputStream inputStream; // create an input stream
    FileOutputStream outputStream; // create an output stream
    try {
        inputStream = new FileInputStream(src); // create object
        outputStream = openFileOutput(dst, Context.MODE_PRIVATE); // save your file in private mode, which makes it inaccessible by other applications
        int bufferSize;
        byte[] bufffer = new byte[512]; // I think logically here could be useful for trimming the file. I mean just copy an specified part of the file.
        while ((bufferSize = inputStream.read(bufffer)) > 0) {
            outputStream.write(bufffer, 0, bufferSize);
        }
        inputStream.close();
        outputStream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是关于如何复制文件的建议，它将以您的应用程序包名称将它们复制到内部存储中。此外，我还没有测试装饰部分。所以，我不确定。

还有一件事，您可以通过以下方式获取应用程序的路径目录

```
getFilesDir(); 
```

# apache - 已启用 Commons Fileupload 安全管理器

> ID：10063653
> 
> 赞同：0
> 
> 时间：2012-04-08T14:43:53.027
> 
> 标签：apache, tomcat, wso2

我正在尝试以 blob 的形式将文件上传到数据库，在此期间文件上传程序将临时文件写入磁盘。

由于安全原因，我正在使用 Wso2 Stratos 应用程序服务器（基于 Tomcat）阻止将此类临时文件写入磁盘。我附上了错误的堆栈跟踪。

我正在使用 Apache Commons Fileupload 库。这是我的上传类[http://paste.org/47685](http://paste.org/47685)并且从第 57 行抛出错误。我需要避免编写临时文件我该如何解决这个问题？

这是我的错误日志

```
java.security.AccessControlException: access denied (java.io.FilePermission F:\W
SO2ST~1.2\bin\..\tmp\upload_4e2fd9dc_1368bb5a330__7ffa_00000002.tmp write)
    at java.security.AccessControlContext.checkPermission(AccessControlConte
xt.java:323)
    at java.security.AccessController.checkPermission(AccessController.java:
546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkWrite(SecurityManager.java:962)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:169)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.commons.io.output.DeferredFileOutputStream.thresholdReache
d(DeferredFileOutputStream.java:178)
    at org.apache.commons.io.output.ThresholdingOutputStream.checkThreshold(
ThresholdingOutputStream.java:224)
    at org.apache.commons.io.output.ThresholdingOutputStream.write(Threshold
ingOutputStream.java:128)
    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:103)
    at org.apache.commons.fileupload.util.Streams.copy(Streams.java:66)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadB
ase.java:366)
    at org.apache.commons.fileupload.servlet.ServletFileUpload.parseRequest(
ServletFileUpload.java:126)
    at controler.UploadDocumentServlet.doPost(UploadDocumentServlet.java:62)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:273
)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270
)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:3
05)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.
java:165)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:298)
    at org.apache.catalina.core.ApplicationFilterChain.access$000(Applicatio
nFilterChain.java:57)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilt
erChain.java:193)
    at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilt
erChain.java:189)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:100)
    at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonS
tuckThreadDetectionValve.java:154)
    at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:399)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcesso
r.java:396)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.pr
ocess(Http11NioProtocol.java:356)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoin
t.java:1534)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
    at java.lang.Thread.run(Thread.java:705) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:13:52.540

所以你没有权限写入`F:\W SO2ST~1.2\tmp\upload_4e2fd9dc_1368bb5a330__7ffa_00000002.tmp`，你有权限写入文件系统上的任何目录吗？（如果该 tmp 文件夹不存在，那么这可能是您的问题）

如果是这样，您只需将您的 tmp 目录配置为`factory`您可以写入的目录（应该有一个 tmp 文件夹供活动用户使用，您可以在其中存储文件，例如 C:\Documents and Settings\MyUser\Temp 等像那样）

*   [DiskFileItemFactory.setRepository(文件)](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/disk/DiskFileItemFactory.html#setRepository%28java.io.File%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:50:23.240

我想出了如何解决这个临时文件问题。默认情况下 DiskFileItemFactory() 大小为 10,240 字节，如果文件超过此数量，它将创建一个临时文件用于存储文件。这就是我的文件超过 10,240 字节大小的错误。所以通过增加filefactory对象的大小来解决这个问题。请参阅此链接 [http://www.techiepark.com/tutorials/file-upload-using-java](http://www.techiepark.com/tutorials/file-upload-using-java)

# javascript - 如何使用 jQuery 设置 span 元素的内部 HTML

> ID：10063654
> 
> 赞同：3
> 
> 时间：2012-04-08T14:44:13.163
> 
> 标签：javascript, jquery

以下给了我错误*Uncaught SyntaxError: Unexpected identifier*：

```
$('span.xtro').html('');
$('span.xtro').html('<input type='button' class='newbutton send' value='Send request' onclick= 
                      "javascript:request('send','1','2');'>'); 
```

**我该如何纠正？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T14:46:55.237

您没有转义单引号：

```
$('span.xtro').html('<input type="button" class="newbutton send" value="Send request"'
                  + ' onclick="request(\'send\',\'1\',\'2\');">'); 
```

你也可以摆脱第一个`$('span.xtro').html('');`，你不应该需要它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T15:00:58.117

这不是使用 jQuery 的最佳方式……不推荐使用 onclick 属性。这是另一种选择

```
//note wrapping with double quotes and using single ones inside 
var $el = $( "<input type='button' class='newbutton send' value='Send request'>" );
$el.on( 'click', function(){ request('send','1','2'); } ); 
$('span.xtro').html('').append( $el ); 
```

**编辑**将 $el.bind 更改为 $el.on，这是现在使用的

# ruby - 从 Ruby 哈希中转移一个特定的匹配键值对

> ID：10063662
> 
> 赞同：1
> 
> 时间：2012-04-08T14:45:48.303
> 
> 标签：ruby

我有一个 Ruby 哈希：

```
@tags = { "project_status" => { "title" => "Project status" }, 
          "milestones"     => { "title" => "Milestones"},
          "lessons"        => { "title" => "Lessons"}, 
          "tasks"          => { "title" => "Tasks"} } 
```

我想`shift`从这个哈希中取出特定的键值对。例如，如果我对`"milestones"`标签感兴趣，那么`shift`在哈希上会给我：

```
=> ["milestones", {"title"=>"Milestones"}] 
```

这正是我想要的。

**除了**我不知道如何选择特定的键值对。

我可以写一些东西来遍历哈希，直到找到匹配的键然后调用`shift`，但我假设有一个更干净的“Ruby方式”来做到这一点:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T14:57:48.547

`delete`可能是您正在寻找的。它从哈希中删除相应的键（而`shift`从数组中删除项目）

```
tags = { "project_status" => { "title" => "Project status" }, 
          "milestones"     => { "title" => "Milestones"},
          "lessons"        => { "title" => "Lessons"}, 
          "tasks"          => { "title" => "Tasks"} }

def shift hash, key
  [key, hash.delete(key)] # removes key/value pair
  # [key, hash[key]] # leaves key/value pair
end          

shift tags, 'milestones' # => ["milestones", {"title"=>"Milestones"}]
tags # => {"project_status"=>{"title"=>"Project status"}, "lessons"=>{"title"=>"Lessons"}, "tasks"=>{"title"=>"Tasks"}} 
```

# android - 层列表中忽略的大小属性

> ID：10063666
> 
> 赞同：7
> 
> 时间：2012-04-08T14:46:39.130
> 
> 标签：android, attributes, size, shape

在下面的代码中，形状占据了 layer-list 的整个高度和宽度，这意味着它忽略了 size 属性。（但它确实会监听 top、left 和 right 属性）。我还尝试将高度作为项目的属性而不是形状，这没有效果。

```
<layer-list >    

    <item ..... />

    <item   
        android:top="2dp"
        android:left="7dp"
        android:right="7dp">
        <shape android:shape="rectangle" >
            <size android:height="12dp" />
            <gradient
                android:startColor="#ddffffff"
                android:endColor="#00ffffff"
                android:angle="270" />
        </shape>
    </item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T16:12:13.113

如果您使用图像视图将此可绘制对象设置为源，则考虑使用 centerInside

```
<ImageView android:src="@drawable/sample_layer_list" android:scaleType="centerInside" android:layout_width="match_parent" android:layout_height="match_parent"/> 
```

除此选项外，该选项的其余部分要么适合整个画布，要么修剪形状。

其他选项可能是更改 imageView 本身的大小。

我注意到的一件事是，无论图层列表中最大可绘制对象的大小是多少，图层列表中的所有形状都被缩放到那个

希望能帮助到你。

# cocoa - NSWindowController 窗口？

> ID：10063672
> 
> 赞同：1
> 
> 时间：2012-04-08T14:47:07.923
> 
> 标签：cocoa, window, osx-lion, automatic-ref-counting, nswindowcontroller

我有一个基于菜单栏的应用程序，当单击图标时，它会显示一个窗口。这一切在 Mac OS X Lion 上运行良好，但由于某种原因，Snow Leopard 和较早版本的 Mac OS X 上发生错误。任何时候`[TheWindowController window]`调用该方法都会停止，但应用程序会继续运行。因此，我不认为窗口只是零，它在某种程度上是腐败的。

我不知道为什么会发生这种情况，就像我说的，它只发生在 Mac OS X Snow Leopard 中。顺便提一句。我使用 ARC，如果这很重要的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:46:53.407

您正在加载一个在 10.6 上使用 10.7 特定功能 Cocoa Autolayout 的 NIB，但它不理解它。如果您希望支持在 10.6 上运行，则需要避免使用此类功能。您应该能够在 NIB 上设置部署目标，然后会针对该部署目标不支持的功能显示警告。

此外，如果您还没有这样做，您需要对目标的构建设置执行类似的操作。设置部署目标。不幸的是，对于使用 10.7 中引入的功能的代码，这不一定会导致警告。您可以设置一个替代构建配置，该配置针对 10.6 SDK 构建并针对它进行编译，以了解您在何处使用 10.6 后的功能。有关详细信息，请参阅 Apple 的[SDK 兼容性指南](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)。

# php - PHP 密码学良好实践？

> ID：10063673
> 
> 赞同：0
> 
> 时间：2012-04-08T14:47:10.587
> 
> 标签：php, cryptography

所以我听说过`md5()`，而且`sha1()`都过时了，而且可能坏了。我听说这`crypt()`也不是一个可行的解决方案。

如果是这种情况，谁能指出 PHP 中当前最新的密码学良好实践是什么？我在网上搜索过，但没有找到任何最新/潜在的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T16:59:14.723

单独的哈希加盐也已过时，并且通常不再在密码哈希方案中得到认可。并行计算这样的哈希值太容易了（即使是每个用户的盐），一个足智多谋的攻击者最有可能破坏这样的方案。

您应该改用某种形式的迭代散列。除了将盐应用于您的密码之外，这种算法还人为地减慢了整个散列过程（加密散列通常被设计为尽可能快，同时保持固定的“安全裕度”）。达到此目标的合适原语通常被认为是 bcrypt、scrypt 或 PBKDF2 算法。有关如何在 PHP 中使用 bcrypt 的讨论，请参见例如[此答案。](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

# r - 随机森林中的采样错误

> ID：10063675
> 
> 赞同：0
> 
> 时间：2012-04-08T14:47:18.327
> 
> 标签：r

我想在 R 中为 randomForest 设置不同的 sampsize。我希望看到 3 个不同的 RF 返回，但是 R 中发生的错误“（列表）对象不能被强制输入'整数'”

我的代码如下

```
 sampsize_vect<-vector("list",3)
    sampsize_vect[[1]]<- rep(6670,3)
    sampsize_vect[[2]]<- c(1000)
    sampsize_vect[[3]]<- c(5000,5000)
    for (i in 1:3) {
    RF <- randomForest (x,y,sampsize=sampsize_vect[i],node.size=3,do.trace=FALSE,importance=TRUE,ntree=150,,forest=TRUE)
    print(RF)
    } 
```

为什么会发生这种情况以及如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:58:18.703

它与随机森林没有任何关系。你只是`[`在你应该使用的时候使用`[[`（反之亦然，我想）。

更改`sampsize = sampsize_vect[i]`为`sampsize = sampsize_vect[[i]]]`。永远记住，使用列表`[[`选择一个*元素*，而`[`选择一个*子列表*。

# nullpointerexception - JavaFX 项目通过 jar/jnpl 启动时的 T2KFontFactory 异常

> ID：10063676
> 
> 赞同：0
> 
> 时间：2012-04-08T14:47:25.820
> 
> 标签：nullpointerexception, javafx-2

当我尝试通过可执行 jar 文件运行 JavaFX 项目时遇到问题：“运行应用程序时出现异常”。运行 jnpl 文件给了我更多信息：关于 java.lang.NullPointerException 和 T2KFontFactory 的巨大错误消息（如“在 com.sun.t2k.T2KFontFactory.resolveFontFiles（未知来源）”等）。

我在使用 WebView 时也收到了相同的异常（但它有效）。

我在网上看到很多关于这个问题的帖子，但没有人知道解决方案。我正在使用最新的 JavaFX 2.0.3，JRE 版本 1.7.0_03-b05 Java HotSpot(TM) Client VM，Windows 7。谢谢！

编辑：我测试了一些 JavaFX 示例，它们运行良好。

“正文限制为 30000 个字符；您输入了 58302”，所以我将截取一些信息：

```
Java Plug-in 10.4.1.99
Using JRE version 1.7.0_03-b05 Java HotSpot(TM) Client VM
User home directory = C:\Users\user
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
----------------------------------------------------
java.lang.NullPointerException
    at com.sun.t2k.T2KFontFactory.resolveFontFiles(Unknown Source)
    at com.sun.t2k.T2KFontFactory.resolveWindowsFonts(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFullNameToFileMap(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFontResource(Unknown Source)
    at com.sun.t2k.T2KFontFactory.createFont(Unknown Source)
    at com.sun.javafx.font.PrismFontLoader.font(Unknown Source)
    at javafx.scene.text.Font.font(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.ParsedValue.convert(Unknown Source)
    at com.sun.javafx.css.StyleHelper.lookup(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.preferredSize(Unknown Source)
    at javafx.scene.Scene.impl_initPeer(Unknown Source)
    at javafx.stage.Window$13.invalidated(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.set(Unknown Source)
    at javafx.stage.Window.setShowing(Unknown Source)
    at javafx.stage.Window.show(Unknown Source)
    at javafx.stage.Stage.show(Unknown Source)
    at javafx.stage.Stage.impl_showAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate$8.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate.setVisible(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit$Caller.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit.callAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showErrorDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showMessageDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
    at javafx.event.Event.fireEvent(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.postProcess(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.access$6200(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.access$1300(Unknown Source)
    at javafx.scene.Scene.impl_processMouseEvent(Unknown Source)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.notifyMouse(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
    at com.sun.t2k.T2KFontFactory.resolveFontFiles(Unknown Source)
    at com.sun.t2k.T2KFontFactory.resolveWindowsFonts(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFullNameToFileMap(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFontResource(Unknown Source)
    at com.sun.t2k.T2KFontFactory.createFont(Unknown Source)
    at com.sun.javafx.font.PrismFontLoader.font(Unknown Source)
    at javafx.scene.text.Font.font(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.ParsedValue.convert(Unknown Source)
    at com.sun.javafx.css.StyleHelper.lookup(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.preferredSize(Unknown Source)
    at javafx.scene.Scene.impl_initPeer(Unknown Source)
    at javafx.stage.Window$13.invalidated(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.set(Unknown Source)
    at javafx.stage.Window.setShowing(Unknown Source)
    at javafx.stage.Window.show(Unknown Source)
    at javafx.stage.Stage.show(Unknown Source)
    at javafx.stage.Stage.impl_showAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate$8.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate.setVisible(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit$Caller.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit.callAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showErrorDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showMessageDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
    at javafx.event.Event.fireEvent(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.postProcess(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.access$6200(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.access$1300(Unknown Source)
    at javafx.scene.Scene.impl_processMouseEvent(Unknown Source)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.notifyMouse(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
    at com.sun.t2k.T2KFontFactory.resolveFontFiles(Unknown Source)
    at com.sun.t2k.T2KFontFactory.resolveWindowsFonts(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFullNameToFileMap(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFontResource(Unknown Source)
    at com.sun.t2k.T2KFontFactory.createFont(Unknown Source)
    at com.sun.javafx.font.PrismFontLoader.font(Unknown Source)
    at javafx.scene.text.Font.font(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.ParsedValue.convert(Unknown Source)
    at com.sun.javafx.css.StyleHelper.lookup(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.preferredSize(Unknown Source)
    at javafx.scene.Scene.impl_initPeer(Unknown Source)
    at javafx.stage.Window$13.invalidated(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.set(Unknown Source)
    at javafx.stage.Window.setShowing(Unknown Source)
    at javafx.stage.Window.show(Unknown Source)
    at javafx.stage.Stage.show(Unknown Source)
    at javafx.stage.Stage.impl_showAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate$8.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate.setVisible(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit$Caller.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit.callAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showErrorDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showMessageDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
    at javafx.event.Event.fireEvent(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.postProcess(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.access$6200(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.access$1300(Unknown Source)
    at javafx.scene.Scene.impl_processMouseEvent(Unknown Source)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.notifyMouse(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
    at com.sun.t2k.T2KFontFactory.resolveFontFiles(Unknown Source)
    at com.sun.t2k.T2KFontFactory.resolveWindowsFonts(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFullNameToFileMap(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFontResource(Unknown Source)
    at com.sun.t2k.T2KFontFactory.createFont(Unknown Source)
    at com.sun.javafx.font.PrismFontLoader.font(Unknown Source)
    at javafx.scene.text.Font.font(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.ParsedValue.convert(Unknown Source)
    at com.sun.javafx.css.StyleHelper.lookup(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.preferredSize(Unknown Source)
    at javafx.scene.Scene.impl_initPeer(Unknown Source)
    at javafx.stage.Window$13.invalidated(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.set(Unknown Source)
    at javafx.stage.Window.setShowing(Unknown Source)
    at javafx.stage.Window.show(Unknown Source)
    at javafx.stage.Stage.show(Unknown Source)
    at javafx.stage.Stage.impl_showAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate$8.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate.setVisible(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit$Caller.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit.callAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showErrorDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showMessageDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
    at javafx.event.Event.fireEvent(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.postProcess(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.access$6200(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.access$1300(Unknown Source)
    at javafx.scene.Scene.impl_processMouseEvent(Unknown Source)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.notifyMouse(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
    at com.sun.t2k.T2KFontFactory.resolveFontFiles(Unknown Source)
    at com.sun.t2k.T2KFontFactory.resolveWindowsFonts(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFullNameToFileMap(Unknown Source)
    at com.sun.t2k.T2KFontFactory.getFontResource(Unknown Source)
    at com.sun.t2k.T2KFontFactory.createFont(Unknown Source)
    at com.sun.javafx.font.PrismFontLoader.font(Unknown Source)
    at javafx.scene.text.Font.font(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.converters.FontConverter.convert(Unknown Source)
    at com.sun.javafx.css.ParsedValue.convert(Unknown Source)
    at com.sun.javafx.css.StyleHelper.lookup(Unknown Source)
    at com.sun.javafx.css.StyleHelper.transitionToState(Unknown Source)
    at javafx.scene.Node.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.control.Control.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Parent.impl_processCSS(Unknown Source)
    at javafx.scene.Node.processCSS(Unknown Source)
    at javafx.scene.Scene.doCSSPass(Unknown Source)
    at javafx.scene.Scene.preferredSize(Unknown Source)
    at javafx.scene.Scene.impl_initPeer(Unknown Source)
    at javafx.stage.Window$13.invalidated(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
    at javafx.beans.property.BooleanPropertyBase.set(Unknown Source)
    at javafx.stage.Window.setShowing(Unknown Source)
    at javafx.stage.Window.show(Unknown Source)
    at javafx.stage.Stage.show(Unknown Source)
    at javafx.stage.Stage.impl_showAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate$8.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.DialogTemplate.setVisible(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory$3.call(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit$Caller.run(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.FXPluginToolkit.callAndWait(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showErrorDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.FXUIFactory.showMessageDialog(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.fx.ui.ErrorPane$1.handle(Unknown Source)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
    at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
    at javafx.event.Event.fireEvent(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.postProcess(Unknown Source)
    at javafx.scene.Scene$ClickGenerator.access$6200(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.process(Unknown Source)
    at javafx.scene.Scene$MouseHandler.access$1300(Unknown Source)
    at javafx.scene.Scene.impl_processMouseEvent(Unknown Source)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
    at com.sun.glass.ui.View.notifyMouse(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

再次编辑：是的，我的操作系统是俄语）我尝试了 2.1 版本，但没有帮助。之后我下载了 FX 2.2（开发者预览版）并收到了新的错误消息：

```
CacheEntry[file:/D:/Labs/Javal/JavafxApp/dist/lib/eclipselink-2.3.0.jar]: updateAvailable=false,lastModified=Mon Apr 09 18:26:17 EEST 2012,length=6732665
CacheEntry[file:/D:/Labs/Javal/JavafxApp/dist/lib/javax.persistence-2.0.jar]: updateAvailable=false,lastModified=Mon Apr 09 18:26:20 EEST 2012,length=143658
CacheEntry[file:/D:/Labs/Javal/JavafxApp/dist/lib/mysql-connector-java-5.1.19-bin.jar]: updateAvailable=false,lastModified=Mon Apr 09 18:26:23 EEST 2012,length=831026
CacheEntry[file:/D:/Labs/Javal/JavafxApp/dist/JavafxApp.jar]: updateAvailable=false,lastModified=Mon Apr 09 18:26:09 EEST 2012,length=9616796 
```

我试图解决这个问题，但是，我认为我误解了这个问题：我有 mysql-connector-java-5.1.18，并将其更改为最新的：mysql-connector-java-5.1.19，但有关此的消息没走……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:45:36.540

你有本地化的操作系统吗？它看起来像[http://javafx-jira.kenai.com/browse/RT-18767](http://javafx-jira.kenai.com/browse/RT-18767)

此问题已在 FX 2.1 中得到修复，您可以在此处获取：[http ://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)

# python - 有向图节点：跟踪后继者和前驱者

> ID：10063677
> 
> 赞同：2
> 
> 时间：2012-04-08T14:47:30.023
> 
> 标签：python, directed-graph

我正在尝试实现一个`Node`表示有向图中的节点的类，该类特别具有一组后继和前驱。我想`Node.predecessors`并且`Node.predecessors`表现得像集合，特别是我想迭代它们的元素，添加和删除元素，检查包含，并从可迭代中设置它们。但是，在`node_1.sucessors.add(node_2)`它应该是 True之后`node_1 in node_2.pedecessors`。

似乎可以编写一个新的子类`set`来实现这个魔法，但据我所知，这样一个类的实现会非常麻烦，因为它必须知道`Node`它所属的对象以及它是前任还是继任者，并且需要一些特殊的方法进行加法等，这样`node_1.sucessors.add(node_2)`就不会调用`node_2.predecessors.add(node_1)`，从而导致无限循环。

动态生成两个属性之一`(node for node in all_nodes if self in node.sucessors)`应该是可能的，但是我需要跟踪属于一个图的所有节点，如果我只有一个图但使用一个图，这很容易（将其添加到`weakref.WeakSet`类属性中）`__init__`如果我有多个不相交的图，所有节点的大集合会导致大量计算工作，而且我看不到如何修改前辈集合。

有人对此有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T14:57:32.607

如果您将 add 方法包装在您的类中，然后在该包装方法中，您只需使用前任和后继两个属性。像这样的东西

这是我想到的第一个解决方案：

```
class Node:

    def __init__(self):
        self.pred = set()
        self.suce = set()

    def addSucessor(self, node):
        self.suce.add(node)
        node.pred.add(self) 
```

# c# - groupBy 使用我的 innerClass 在多个列上

> ID：10063681
> 
> 赞同：-1
> 
> 时间：2012-04-08T14:48:38.800
> 
> 标签：c#, linq

我尝试按 StringId 分组，然后按名称分组

```
var a = myList
                .GroupBy(item => new TcGroupByKey() 
{StringId = item.Id, ChannelName = item.ChannelName}).ToList(); 
```

我创建了这个内部类`TcGroupByKey`

所以我可以将结果传递给`TrackingChannelRow`ctor

并且会得到强类型参数而不是`object`

```
 public TrackingChannelRow(ManageTcModel.TcGroupByKey tcGroupByKey,
            IGrouping<ManageTcModel.TcGroupByKey, TrackingChannelItem> subChannels,
            IEnumerable<Manager.TrackingChannels.Model.ToolbarItem> toolbars,
        IEnumerable<Manager.TrackingChannels.Model.BundleItem> bundles)
        { 
```

但是 group by 不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:02:27.013

您要求 linq 按他不认识的对象对列表进行分组。

有什么问题：

```
var a = myList.GroupBy(Id).GroupBy(ChannelName).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:27:44.790

我认为您正在寻找的是按复合键分组...

类似于 Marc 在这篇文章[Linq to SQL with Group by中描述的内容](https://stackoverflow.com/a/1210695/417747)

关键是使用“匿名”类型 - 而不是像你那样命名的类型 - LINQ 可以转换为 SQL，否则会出现问题并且代码只能运行“post SQL”（所以你先枚举然后分组但丢失SQL 集成、性能）。

所以，在你的情况下，它会是这样的......

```
new {StringId = item.Id, ChannelName = item.ChannelName} 
```

...代替`new TcGroupByKey() {StringId = item.Id, ChannelName = item.ChannelName}`

在匿名（有效）或命名类型中执行“选择”也存在类似的问题（不会 - 除非如上所述，您将 SQL 和仅 C# 的表达式部分分开，有点简化）。

希望这可以帮助

# mysql - mysql错误字段列表中的未知列

> ID：10063683
> 
> 赞同：1
> 
> 时间：2012-04-08T14:48:47.230
> 
> 标签：mysql

嘿，我正在尝试以下 sql 查询：

```
$sql = mysql_query("INSERT INTO feeds (FileLocation,Title,feeddate,nameofuploader,type) 
   VALUES('".mysql_real_escape_string($putItAt)."','".mysql_real_escape_string($_POST['title'])."      ',now(),". $_SESSION['name'] .",'file')") 
```

但它给了我错误：'字段列表'中的未知列'Ankit2'，其中Ankit2是要插入的值有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T14:52:04.987

您忘记在 $_SESSION 变量周围加上单引号！

```
$sql = mysql_query("INSERT INTO feeds (FileLocation,Title,feeddate,nameofuploader,type) 
   VALUES('".mysql_real_escape_string($putItAt)."','".mysql_real_escape_string($_POST['title'])."      ',now(),'". $_SESSION['name'] ."','file')") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:59:00.497

sql字符串对吗？请试试这个来检查你的 sql 字符串：

```
$sql_str = "INSERT INTO feeds (FileLocation,Title,feeddate,nameofuploader,type) VALUES('".mysql_real_escape_string($putItAt)."','".mysql_real_escape_string($_POST['title'])."      ',now(),". $_SESSION['name'] .",'file')"；
print $sql_str; 
```

检查 sql_st

# xpages - xe:restService 在页面渲染后不加载数据

> ID：10063690
> 
> 赞同：2
> 
> 时间：2012-04-08T14:49:26.080
> 
> 标签：xpages, xpages-extlib

我有一个包含以下内容的 xPage：

```
<xe:restService id="restService" preventDojoStore="false">
    <xe:this.service>
        <xe:viewJsonService viewName="vwChartData"
            contentType="text/json">
            <xe:this.columns>
                <xe:restViewColumn columnName="x" name="valuex"></xe:restViewColumn>
                <xe:restViewColumn columnName="y" name="valuey"></xe:restViewColumn>
            </xe:this.columns>
        </xe:viewJsonService>
    </xe:this.service>
</xe:restService> 
```

页面加载后如何获取数据？据我了解，它应该创建一个 Dojo 存储，尽管它从不加载数据。

当我将 xe:djxDataGrid 添加到页面时，对用户隐藏它，我可以通过直接引用 restService 变量或通过 djxDataGrid 轻松访问创建的 Dojo Store 中的数据。

**解决方案：**

```
<xp:scriptBlock>
    <xp:this.value><![CDATA[XSP.addOnLoad( function() {
    var ds = eval('restService');
    ds.fetch({
        onComplete : function(items, request) {
            console.log(items);
        }
    });
});]]></xp:this.value>
</xp:scriptBlock> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:31:30.293

当您在使用数据网格时查看源代码时，您会看到链接 Dojo 商店所需的所有源代码。观看 XSP.onLoad 以获取触发代码。

# bug-tracking - 使用 VOTING 进行问题跟踪

> ID：10063691
> 
> 赞同：4
> 
> 时间：2012-04-08T14:49:31.390
> 
> 标签：bug-tracking, issue-tracking

我们公司使用 HP Quality Center 来管理/跟踪缺陷和其他类型的问题。

我希望有一个单独的系统或与 QC 的一些集成，这将允许我团队中的开发人员对问题进行投票。

这可以在QC上做吗？它是其他问题跟踪器的固有特性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:47:39.453

投票可以在[jira](http://confluence.atlassian.com/display/JIRA/Watching+and+Voting+on+an+Issue "观看和投票的问题")中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:54:21.093

[Gemini](http://www.geminiplatform.com/)可以对问题、错误等进行投票。

# ruby-on-rails - 为什么 will_paginate gem 将所有结果返回到一个页面但显示下一个和上一个链接？

> ID：10063692
> 
> 赞同：1
> 
> 时间：2012-04-08T14:49:34.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, rubygems, will-paginate

我花了过去几个小时找出为什么 will_paginate 不能在我的用户帐户区域页面“site.com/”（用户/新）上工作，但可以在其他页面上工作，例如 site.com/search、site.com /浏览。

有什么办法可以解决我目前的问题吗？用户帐户区域页面与用户注册的页面相同，但隐藏了注册内容。这是我的根路径（site.com/）。

显示下一个和上一个链接，但所有结果都显示在一个页面上。

**控制器：**

```
class UsersController < ApplicationController
  include UsersHelper
  include MessagesHelper

  def new
    @user = User.new 
    if logged_in?
      @current_user = User.find_by_username(current_user.username)
      @default_photo = Photo.find(current_user.profile.photo_id) if current_user.profile.photo_id
      @micropost = Micropost.new(:user_id => users_id)
      @microposts = current_user.microposts.page(params[:page]).per_page(1)
      @default_image = default_profile_image
      @comment = Comment.new(:user_id => current_user.id) 
```

**HTML/HAML：**

```
.microposts
  = render 'users/partials/micropost_form'
  - if @current_user.microposts.any?            
    = render 'users/partials/microposts'
    = will_paginate @microposts 
```

**我的一些微博部分**

```
<% @current_user.microposts.each do |m| %>
        <% if m.poster_id.nil? %>
       <div class="postHolder">
        <nav class="micropostOptions">
         <ul class="postMenu">
           <li class="deletePost"><%= link_to content_tag(:span, "Delete post"), m, :method => :delete, :confirm => "Are you sure?", :title => m.content, :class => "message_delete" %>
           </li>
           <li class="disableCommenting"><%= link_to content_tag(:span, "Pause commenting"), "2" %></li>
           <li class="blockCommenter"><%= link_to content_tag(:span, "Block commenter"), "3" %></li>
           <li class="openInNewWindow"><%= link_to content_tag(:span, "Open in new window"), "4" %></li>
           <li class="reportAbuse"><%= link_to content_tag(:span, "Report abuse"), "5" %></li>
         </ul>  
       </nav> 
```

### 更新

嗯，我刚刚在我的用户控制器中创建了一个单独的操作，称为`microposts`给它自己的路由和视图，然后在该页面上尝试 will_paginate，但它仍然在一页上返回所有结果。使困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:16:56.940

感谢 Jeremy 上面的评论，修复了。我更改了我的部分，以便它引用@microposts 而不是@current_user.microposts，我的问题就解决了。不知道我怎么会错过。

# java - 异步任务使我的应用程序崩溃

> ID：10063694
> 
> 赞同：0
> 
> 时间：2012-04-08T14:49:37.287
> 
> 标签：java, android, http, listview, android-asynctask

我正在尝试从 HttpPost 下载字符串，并且正在使用 Async 类来执行此操作。但是，当我运行该应用程序时，它崩溃了。这是我第一次使用 Async 类，恐怕我做了一些很傻的事情，你能帮我找出错误吗？

请注意，我还想在获取字符串时更新我的​​列表视图。我试图这样做，购买将它们放在单独的方法中。

代码：

```
public static final String PREFS_NAME = "MyPrefsFile";
    BufferedReader in = null;
    String data = null;
    String username;
    List headlines;
    List links;
    String password;
    ArrayAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            // listview method
            ContactsandIm();
        new loadcontactsandIm().execute(PREFS_NAME);

    }

    public class loadcontactsandIm extends AsyncTask<String, Integer, String> {
        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();

            /* login.php returns true if username and password is equal to saranga */
            HttpPost httppost = new HttpPost("http://gta5news.com/login.php");

            try {

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("username", username));
                nameValuePairs.add(new BasicNameValuePair("password", password));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                Log.w("HttpPost", "Execute HTTP Post Request");
                HttpResponse response = httpclient.execute(httppost);
                Log.w("HttpPost", "Execute HTTP Post Request");
                in = new BufferedReader(new InputStreamReader(response.getEntity()
                        .getContent()));
                StringBuffer sb = new StringBuffer("");
                String l ="";
                String nl ="";
                while ((l =in.readLine()) !=null) {
                    sb.append(l + nl);  
                }
                in.close();
                 data = sb.toString();
                 ListView lv = getListView();
                 lv.setTextFilterEnabled(true);

                headlines.add(data);

                setListAdapter(adapter);
                return null;

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return data;
        }

        private StringBuilder inputStreamToString(InputStream is) {
            String line = "";
            StringBuilder total = new StringBuilder();
            // Wrap a BufferedReader around the InputStream
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            // Read response until the end
            try {
                while ((line = rd.readLine()) != null) {
                    total.append(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
            // Return full string
            return total;
        }

        }

    public void ContactsandIm() {
        headlines = new ArrayList();

        //get prefs
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String username = settings.getString("key1", null);
        String password = settings.getString("key2", null);
        if(username.equals("irock97"))  {
            Toast toast=Toast.makeText(this, "Hello toast", 2000);
            toast.setGravity(Gravity.TOP, -30, 50);
            toast.show();

        } else {
            Toast toast=Toast.makeText(this, "Hello toast", 2000);
            toast.setGravity(Gravity.TOP, -30, 150);
            toast.show();
        }
        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

    }

} 
```

日志猫：

```
03-25 13:47:37.356: E/AndroidRuntime(2484): FATAL EXCEPTION: AsyncTask #1
03-25 13:47:37.356: E/AndroidRuntime(2484): java.lang.RuntimeException: An error occured while executing doInBackground()
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.lang.Thread.run(Thread.java:1096)
03-25 13:47:37.356: E/AndroidRuntime(2484): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.ViewRoot.requestLayout(ViewRoot.java:594)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.View.requestLayout(View.java:8125)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.View.requestLayout(View.java:8125)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.View.requestLayout(View.java:8125)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.view.ViewGroup.removeAllViews(ViewGroup.java:2255)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:196)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.app.Activity.setContentView(Activity.java:1647)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.app.ListActivity.ensureList(ListActivity.java:314)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.app.ListActivity.getListView(ListActivity.java:299)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at com.gta5news.bananaphone.ChatService$loadcontactsandIm.doInBackground(ChatService.java:87)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at com.gta5news.bananaphone.ChatService$loadcontactsandIm.doInBackground(ChatService.java:1)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-25 13:47:37.356: E/AndroidRuntime(2484):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:02:33.490

您在 doInBackground 中设置 ListView 适配器。永远不要在 UI 线程之外操作 UI

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T15:03:21.130

您不能与主线程以外的任何其他线程中的 UI 元素进行交互。您需要在`onPostExecute`方法中完成 ListView 的所有交互。

基本上，您将希望在 doInBackground 方法中编译来自 Web 请求的所有数据，存储在您的任务实例中，然后在 onPostExecute 上获取列表视图并设置适配器并使用数据填充。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T20:59:39.037

你在 doInBackground 工作吗，并在 onPostExecute 上使用你的工作结果。

例子：

```
public class TestActivity extends Activity 
{
  private GetTask getTask;
  public ListView fList;

  @Override
  public void onCreate(Bundle savedInstanceState) 
  {
    getTask = new GetTask(); 
    getTask.execute();
    fList = (ListView) findViewById(R.id.lstview);
  }

  public class GetTask extends AsyncTask<Void, Void, List> 
  {
    @Override
    protected List doInBackground(Void... params) {
      return load();
    }      

    @Override
    protected void onPostExecute(List result) {
        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

      fList.setAdapter(adapter);
    }
  }

  private List load() { 
    // get your data from http
    // add to your list, probably you can use model.
    List headlines;
    headlines.add(data);

    return headlines;
  }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T16:02:32.737

首先，您不能在 doInBackground() 中处理任何 UI 相关任务到 UI 相关任务，我们有一个方法调用 onPostExecute() ，我们可以在其中处理所有与 ui 相关的任务。如果您仍然不想使用这些方法并在 doInBackground( ) 然后你在下面的代码中执行它::::

```
runOnUiThread(new Runnable() {
public void run() {
//your UI related code stuff    
    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    headlines.add(data);
    setListAdapter(adapter); //do what you like here
}
}); 
```

# maven - 为什么m2e添加依赖总是为零

> ID：10063696
> 
> 赞同：0
> 
> 时间：2012-04-08T14:50:18.050
> 
> 标签：maven, dependencies, m2e

当我尝试在 pom.xml 中添加依赖项时，结果始终为零。比如，我输入“log4j”，选择依赖 UI 显示“log4j”的结果 (0) 如何从中央存储库中搜索结果？这是我的 settings.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings
  xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <localRepository>G:/Maven/repository</localRepository>
  <pluginGroups>
  </pluginGroups>

  <proxies>
  </proxies>
  <servers>
  </servers>

  <mirrors>
  </mirrors>

  <profiles>
  </profiles>

</settings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:55:06.113

为什么不尽可能简单地使用：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings
  xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <localRepository>G:/Maven/repository</localRepository>
</settings> 
```

# r - 如何旋转ggplot2中的轴标签？

> ID：10063701
> 
> 赞同：11
> 
> 时间：2012-04-08T14:50:38.700
> 
> 标签：r, ggplot2

我有以下使用 ggplot2 生成的图表![在此处输入图像描述](../Images/7afcfed582a4abd2002ded30cf3f8c5b.png)

我有`finalPlot`ggplot 对象。添加我使用的标签

```
finalPlot + stat_bin() + scale_x_continuous('Solution Cost') + scale_y_continuous('Number of Solutions')` 
```

如何更改 y 轴标签的方向以使其显示为水平，并在可能的情况下将其跨越两条线，例如

```
Number of
Solutions 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-27T02:22:34.173

ggplot2 的最新版本中的语法发生了变化；如果你尝试上面的答案，你会得到

> 错误：改用“主题”。（已失效；最后在 0.9.1 版中使用）

这些天你应该使用

```
finalPlot + ylab("Number of\nSolutions") + theme(axis.title.y = element_text(angle=0)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T15:00:15.940

对于轴文本的旋转角度，您需要使用`element_text()`. 有关一些示例，请参见[SO 上的这篇文章。](https://stackoverflow.com/questions/1330989/rotating-and-spacing-axis-labels-in-ggplot2)对于两行以上的间距，我会`"\n"`在字符串中要放置换行符的位置添加一个。

这将为 y 轴文本设置正确的方向并强制换行：

```
finalPlot + ylab("Number of\nSolutions") + 
    theme(axis.title.y = element_text(angle = 0)) 
```

# python - Python 中的 DFT 比 C 花费的时间要长得多

> ID：10063704
> 
> 赞同：2
> 
> 时间：2012-04-08T14:51:01.643
> 
> 标签：python, dft

我目前正在将一些 C 代码翻译成 Python。此代码用于帮助识别射电天文学中使用的 CLEAN 算法引起的错误。为了进行这种分析，强度图、Q Stokes 图和 U Stokes 图的傅里叶变换值必须在特定像素值处找到（由 ANT_pix 给出）。这些地图只是 257*257 的数组。

下面的代码用 C 运行需要几秒钟，但用 Python 运行需要几个小时。我很确定它经过了极大的优化，因为我对 Python 的了解很差。

谢谢你提供的所有帮助。

**更新**我的问题是是否有更好的方法来实现 Python 中的循环，这将加快速度。我已经在这里阅读了很多关于 Python 的其他问题的答案，建议尽可能避免在 Python 中嵌套 for 循环，我只是想知道是否有人知道一种很好的方法来实现下面的 Python 代码之类的东西，没有循环或更好优化循环。我意识到这可能是一项艰巨的任务！

到目前为止，我一直在使用 FFT，但我的主管想看看 DFT 会产生什么样的差异。这是因为天线位置通常不会出现在精确的像素值上。使用 FFT 需要四舍五入到最接近的像素值。

我使用 Python 作为 CASA，用于减少射电天文数据集的计算机程序是用 Python 编写的，在其中实现 Python 脚本远比 C 容易得多。

**原始代码**

```
def DFT_Vis(ANT_Pix="",IMap="",QMap="",UMap="", NMap="", Nvis=""):

UV=numpy.zeros([Nvis,6])
Offset=(NMap+1)/2
ANT=ANT_Pix+Offset;

i=0
l=0
k=0
SumI=0
SumRL=0
SumLR=0

z=0

RL=QMap+1j*UMap
LR=QMap-1j*UMap

Factor=[math.e**(-2j*math.pi*z/NMap) for z in range(NMap)]

for i in range(Nvis):
    X=ANT[i,0]
    Y=ANT[i,1]

    for l in range(NMap):

        for k in range(NMap):

            Temp=Factor[int((X*l)%NMap)]*Factor[int((Y*k)%NMap)];

            SumI+=IMap[l,k]*Temp
            SumRL+=RL[l,k]*Temp
            SumLR+=IMap[l,k]*Temp               

        k=1

    UV[i,0]=SumI.real
    UV[i,1]=SumI.imag
    UV[i,2]=SumRL.real
    UV[i,3]=SumRL.imag
    UV[i,4]=SumLR.real
    UV[i,5]=SumLR.imag
    l=1
    k=1
    SumI=0
    SumRL=0
    SumLR=0

return(UV) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:03:55.713

您可能应该使用 numpy 的傅立叶变换代码，而不是自己编写： http: [//docs.scipy.org/doc/numpy/reference/routines.fft.html](http://docs.scipy.org/doc/numpy/reference/routines.fft.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:50:40.080

如果您有兴趣提高脚本的性能，[cython](http://cython.org/)可能是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T19:32:47.800

我不是 FFT 专家，但我的理解是 FFT 只是一种计算 DFT 的快速方法。所以对我来说，你的问题听起来像是你正在尝试编写一个冒泡排序算法，看看它是否能给出比快速排序更好的答案。它们都是会给出相同结果的排序算法！

所以我质疑你的基本前提。我想知道您是否可以仅更改数据的舍入并从 SciPy FFT 代码中获得相同的结果。

此外，根据我的 DSP 教科书，FFT 可以产生比长期计算 DFT 更准确的答案，这仅仅是因为浮点运算不精确，而且 FFT 在找到正确答案的过程中调用的浮点运算更少。

如果你有一些工作的 C 代码来执行你想要的计算，你总是可以包装 C 代码让你从 Python 调用它。此处讨论：[在 Python 中包装 C 库：C、Cython 还是 ctypes？](https://stackoverflow.com/questions/1942298/wrapping-a-c-library-in-python-c-cython-or-ctypes)

回答您的实际问题：正如@ZoZo123 指出的那样，从 更改为 将是一个巨大的`range()`胜利`xrange()`。使用`range()`，Python 必须构建一个数字列表，然后在完成后销毁该列表；Python 只是创建了`xrange()`一个迭代器，一次生成一个数字。（但请注意，在 Python 3.x 中，`range()`创建了一个迭代器并且没有`xrange()`.）

此外，如果此代码不必与您的其余代码集成，您可以尝试在 PyPy 下运行此代码。这正是 PyPy 最能优化的那种代码。PyPy 的问题是目前你的项目必须是“纯”Python，而且看起来你正在使用 NumPy。（有一些项目可以让 NumPy 和 PyPy 一起工作，但这还没有完成。） [http://pypy.org/](http://pypy.org/)

如果此代码确实需要与您的其余代码集成，那么我认为您需要查看 Cython（如 @Krzysztof Rosiński 所述）。

# android - Dialog中TextView的可见性

> ID：10063713
> 
> 赞同：2
> 
> 时间：2012-04-08T14:52:36.603
> 
> 标签：android, dialog, textview, visibility

我有一个对话框，它是使用以下代码创建的：

```
final Dialog dialog1 = new Dialog(Test.this);
dialog1.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog1.setContentView(R.layout.test_layout);
dialog1.setCancelable(true);
... 
```

布局文件“test_layout.xml”包含一个典型的 TextView：

```
<TextView
    android:id="@+id/tv_username"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="10dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:text="Test" /> 
```

在某些情况下，我希望在代码中将此 TextView 设置为不可见（消失）。我试过以下：

```
TextView tv = (TextView) dialog1.findViewById(R.id.tv_username);
tv.setVisibility(TextView.GONE); 
```

但是 TextView 仍然出现在对话框中。如果我在布局 xml 文件中设置 android:visibility="gone" 它不会出现在对话框中。但我需要通过代码来完成。

这里是整个代码：

```
 if (whichButton == 1) {

           final Dialog dialog1 = new Dialog(Test.this);
                                       dialog1.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog1.setContentView(R.layout.test_layout);
            dialog1.setCancelable(true);

            TextView tv = (TextView) dialog1.findViewById(R.id.tv_username);
            tv.setVisibility(View.GONE);

        ...
        dialog1.show();
} 
```

这里是整个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="250dp"
    android:layout_height="match_parent"
>
    <TextView
        android:id="@+id/tv_name"
        android:paddingTop="10dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:textSize="14dp"
        android:text="Name:" />
    <EditText
        android:id="@+id/username"
        android:hint="@string/enterName"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:maxLength="15"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:scrollHorizontally="true"
        android:capitalize="words"
        android:singleLine="true"
        android:gravity="fill_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <TextView
        android:id="@+id/tv_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Test" />
    <TextView
        android:id="@+id/tv_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:textSize="14dp"
        android:text="@string/message" />
    <EditText
        android:id="@+id/tip"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:maxLength="290"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:scrollbars="vertical"
        android:inputType="textMultiLine"
        android:capitalize="words"
        android:gravity="fill_horizontal"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <Button
        android:id="@+id/button"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/send_message" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:38:04.783

尝试 `tv.setVisibility(View.INVISIBLE);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:52:40.370

我找到了解决方案或解决方法。

该对话框是在 AlertDialog 的 onClick 方法中创建的。

现在我使用 showDialog() 方法并在相应的回调方法中处理它。它在那里工作正常。

我不明白为什么会这样，但我只想告诉其他用户他们如何解决这个问题。

如果有人能提出澄清，我会很高兴。

# python - 网格置换算法 - 固定行顺序

> ID：10063717
> 
> 赞同：3
> 
> 时间：2012-04-08T14:52:59.087
> 
> 标签：python, algorithm, permutation, array-algorithms

想象一个 3x3 的网格：

```
[A, B, %]
[C, %, D]
[E, F, G] 
```

百分比`%`代表空白/位置。

这些行可以像串上的珠子一样移动，这样第一行的配置排列可以是以下任何一个：

```
[A, B, %] or [A, %, B] or [%, A, B] 
```

第二行也是如此。第三行不包含空槽，因此无法更改。

考虑到每一行的可能排列，我正在尝试生成所有可能的网格。

输出应产生以下网格：

```
[A, B, %]    [A, B, %]    [A, B, %]
[C, D, %]    [C, %, D]    [%, C, D]
[E, F, G]    [E, F, G]    [E, F, G]

[A, %, B]    [A, %, B]    [A, %, B]
[C, D, %]    [C, %, D]    [%, C, D]
[E, F, G]    [E, F, G]    [E, F, G]

[%, A, B]    [%, A, B]    [%, A, B]
[C, D, %]    [C, %, D]    [%, C, D]
[E, F, G]    [E, F, G]    [E, F, G] 
```

我尝试了一种查看每一行并左右移动空间的方法，然后从中生成新的网格并递归。我将所有网格保存在一个集合中，并确保我只生成尚未检查的位置以防止无限递归。

但是，我的算法似乎效率极低（每个排列约 1 秒！！）而且看起来也不是很好。我想知道是否有一种雄辩的方式来做到这一点？特别是在python中。

我有一些模糊的想法，但我确信有一种方法可以做到这一点，我忽略了它的简短而简单。

**编辑：** 3x3 只是一个例子。网格可以是任何大小，真正重要的是行组合。例如：

```
[A, %, C]
[D, E, %, G]
[H, I] 
```

也是一个有效的网格。

**编辑2：**字母必须保持顺序。例如`[A, %, B] != [B, %, A]`并且`[B, A, %]`无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:15:07.803

首先，您必须为每一行获得所有所需的排列。然后计算所有行的叉积。

可以通过使用字母 [A,B,%] 并改变起始索引来简单地计算线的排列：

```
import itertools
# Example: line = ['A','B','%']
def line_permutations(line):
   if '%' not in line:
       return [line]
   line.remove('%') # use copy.copy if you don't want to modify your matrix here
   return (line[:i] + ['%'] + line[i:] for i in range(len(line) + 1)) 
```

使用 itertools.product 最容易实现叉积

```
matrix = [['A','B','%'], ['C', '%', 'D'], ['E', 'F', 'G']]
permutations = itertools.product(*[line_permutations(line) for line in matrix])
for p in permutations:
    print(p) 
```

此解决方案在内存和 CPU 要求方面是最佳的，因为永远不会重新计算排列。

示例输出：

```
(['%', 'A', 'B'], ['%', 'C', 'D'], ['E', 'F', 'G'])
(['%', 'A', 'B'], ['C', '%', 'D'], ['E', 'F', 'G'])
(['%', 'A', 'B'], ['C', 'D', '%'], ['E', 'F', 'G'])
(['A', '%', 'B'], ['%', 'C', 'D'], ['E', 'F', 'G'])
(['A', '%', 'B'], ['C', '%', 'D'], ['E', 'F', 'G'])
(['A', '%', 'B'], ['C', 'D', '%'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['%', 'C', 'D'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['C', '%', 'D'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['C', 'D', '%'], ['E', 'F', 'G']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:17:56.347

定义一个叫做循环的函数

```
>>> def cycle(lst):
    while True:
        lst=lst[1:]+lst[0:1] if '%' in lst else lst
        yield lst 
```

*   给定一个迭代器，这将生成并返回一个循环左移。
*   现在您必须将网格中的每一行传递给循环生成器，以便总迭代与行的长度相匹配
*   现在使用 itertools.product 查找生成的行循环组合的所有组合。
*   如果没有空槽，则不生成循环置换

最终结果如下

```
>>> for g in list(itertools.product(*[[x for (x,y) in zip(cycle(row),
           range(0,len(row) if '%' in row else 1))] for row in grid])):
    for r in g:
        print r
    print "="*10 
```

对于您的网格，这将生成

```
['B', '%', 'A']
['%', 'D', 'C']
['E', 'F', 'G']
===============
['B', '%', 'A']
['D', 'C', '%']
['E', 'F', 'G']
===============
['B', '%', 'A']
['C', '%', 'D']
['E', 'F', 'G']
===============
['%', 'A', 'B']
['%', 'D', 'C']
['E', 'F', 'G']
===============
['%', 'A', 'B']
['D', 'C', '%']
['E', 'F', 'G']
===============
['%', 'A', 'B']
['C', '%', 'D']
['E', 'F', 'G']
===============
['A', 'B', '%']
['%', 'D', 'C']
['E', 'F', 'G']
===============
['A', 'B', '%']
['D', 'C', '%']
['E', 'F', 'G']
===============
['A', 'B', '%']
['C', '%', 'D']
['E', 'F', 'G']
=============== 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:19:11.703

一个天真的实现：

```
g=[['A', 'B', '%'],
['C', '%', 'D'],
['E', 'F', 'G']]

from collections import deque
from itertools import product

def rotations(it):
    d = deque(it,len(it))
    for i in xrange(len(it)):
         d.rotate(1)
         yield list(d)

for i in product(*[rotations(x) if '%' in x else [x] for x in g]):
    print i 
```

给出：

```
(['%', 'A', 'B'], ['D', 'C', '%'], ['E', 'F', 'G'])
(['%', 'A', 'B'], ['%', 'D', 'C'], ['E', 'F', 'G'])
(['%', 'A', 'B'], ['C', '%', 'D'], ['E', 'F', 'G'])
(['B', '%', 'A'], ['D', 'C', '%'], ['E', 'F', 'G'])
(['B', '%', 'A'], ['%', 'D', 'C'], ['E', 'F', 'G'])
(['B', '%', 'A'], ['C', '%', 'D'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['D', 'C', '%'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['%', 'D', 'C'], ['E', 'F', 'G'])
(['A', 'B', '%'], ['C', '%', 'D'], ['E', 'F', 'G']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T15:19:59.967

这里是。请注意，一方面这种方法不太干净，但它允许您仅计算一次 # len(matrix[0])-1 的排列并将它们用作输出的模板。

```
from itertools import permutations,product

def charPermutation(matrix):
    permutation_list=list(permutations(["%%"]+["%s"]*(len(matrix[0])-1))) #Compute once, use infinitely
    perms={i:[] for i in range(len(matrix))}
    for it,line in enumerate(matrix):
        chars=list(set(line)-set(["%"]))
        if sorted(line)==sorted(chars):
            perms[it]+=["".join([str(i) for i in line])]
        else:
            for p in permutation_list:
                perms[it]+=["".join(["".join(p) % tuple(chars)])]
        perms[it]=list(set(perms[it]))
    return product(*[[list(k) for k in i] for i in perms.values()]) 

g=[
   ["A", "B", "%"],
   ["C", "%", "D"],
   ["E", "F", "G"]]

for x in charPermutation(g):
    print [i for i in x]

[['A', '%', 'B'], ['C', 'D', '%'], ['E', 'F', 'G']]
[['A', '%', 'B'], ['%', 'C', 'D'], ['E', 'F', 'G']]
[['A', '%', 'B'], ['C', '%', 'D'], ['E', 'F', 'G']]
[['%', 'A', 'B'], ['C', 'D', '%'], ['E', 'F', 'G']]
[['%', 'A', 'B'], ['%', 'C', 'D'], ['E', 'F', 'G']]
[['%', 'A', 'B'], ['C', '%', 'D'], ['E', 'F', 'G']]
[['A', 'B', '%'], ['C', 'D', '%'], ['E', 'F', 'G']]
[['A', 'B', '%'], ['%', 'C', 'D'], ['E', 'F', 'G']]
[['A', 'B', '%'], ['C', '%', 'D'], ['E', 'F', 'G']] 
```

# arrays - 我想从 [string[]]$Servers 中删除“localhost”

> ID：10063718
> 
> 赞同：0
> 
> 时间：2012-04-08T14:53:10.733
> 
> 标签：arrays, string, powershell

我想`localhost`从字符串中删除，但以下命令不起作用。有什么想法为什么不呢？

选项1：

```
[string[]]$Servers = '"localhost","tbhserver"'
$Servers = $servers | Where-Object {$_ -ne "localhost"} 
```

选项2：

```
[string[]]$Servers = '"localhost","tbhserver"'
$Servers 
[System.Collections.ArrayList]$servers = $servers
$servers.Remove("localhost") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:58:36.797

在我看来，您只是将一个字符串 '"localhost","tbhserver"' 分配给 $Servers，而不是两个字符串。

这行得通吗？

```
$Servers = @("localhost", "tbhserver")
$Servers = $Servers | Where-Object {$_ -ne "localhost"} 
```

我现在不在 Windows 机器上，所以我无法对此进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:03:06.763

您还可以使用 -ne 参数：

```
$servers = 'localhost', 'tbhserver'
$servers = $servers -ne 'localhost' 
```

# javascript - 每个循环从 jQuery 创建 JSON

> ID：10063720
> 
> 赞同：5
> 
> 时间：2012-04-08T14:53:22.307
> 
> 标签：javascript, jquery, json

我在板上挖掘的所有问题并没有真正回答我的问题。所以我会问这里的专家。首先，非常感谢您继续阅读。我真的很欣赏 Stackoverflow 的全部意义，希望我现在可以做出贡献，因为我是会员。

我想基于从另一个 JSON 对象设置的变量动态创建一个 JSON 对象，每个循环使用一个 jQuery。我认为我的语法和可能我对这些东西的了解有点偏离。

我想最终得到以下 JSON 结构：

```
{
  desktop:{
    title:300,
    rev:200
  }
} 
```

其中“桌面”是来自另一个不在此循环中的 JSON 对象的值，我可以称之为没问题，实际上它实际上是我在另一个 JSON 对象上设置的名称值。我正在遍历对象中称为列的数组，但想设置一个包含所有宽度的单独对象，因为列是可调整的，并且可以通过另一个框架访问，我将把它推到，我想保留这些宽度。

我试图从循环中做到这一点：

```
var colWidths = {};
$.each(columns, function(i) {
    colWidths.desktop.title = columns[i].width;
}); 
```

我可以成功提醒 columns[i].width 。我遇到的问题是创建和访问它。我所做的一切似乎都是正确的，但事实并非如此。也许是我或我的设置？你能告诉我如何正确编码吗？或者，如果不可能，我可以创建一个 Javascript 对象。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:05:38.293

欢迎来到 Stackoverflow。你没有写任何你得到的错误信息，所以我假设如下。

```
// prepare the object correctly first
var colWidths = {
   desktop: {
      title: 0
   }
};
// then ADDING each value with += instead of = 
// (because in your code you will just have the last value)
$.each(columns, function(i) {
    colWidths.desktop.title += columns[i].width;
}); 
```

**编辑**

```
var grid = {
    "name": "desktop",
    "columns": [
        {
        "id": "icons",
        "width": 50},
    {
        "id": "title",
        "width": 200},
    {
        "id": "name",
        "width": 300},
    {
        "id": "revision",
        "width": 400}
    ]
};

var columns = grid.columns;
var gridName = grid.name;

var colWidths = {};

// CHANGE HERE
colWidths[gridName] = {}; 

$.each(columns, function(c) {

   var col = columns[c];
   var colname = col.id;
   var colwidth = col.width;

   // CHANGE HERE
   var thisGrid = colWidths[gridName];
   if(!thisGrid[colname]) thisGrid[colname] = 0;

   thisGrid[colname] += colwidth;

});

//alert(colWidths.desktop.title);​
document.write(JSON.stringify(colWidths));

// RESULT:
// {"desktop":{"icons":50,"title":200,"name":300,"revision":400}} 
```

# android - 有没有人使用 Eclipse 插件成功地将使用 GPS 的 Android 应用程序转换为 Blackberry PlayBook

> ID：10063723
> 
> 赞同：0
> 
> 时间：2012-04-08T14:53:40.773
> 
> 标签：android, gps, location, blackberry-playbook

我尝试将使用 GPS 的功能性 android 应用程序转换为 Playbook，它可以在设备上编译、加载和运行，但在尝试访问 GPS 时挂起。我发现应该显示一个用户提示，要求获得访问 GPS 位置的权限，但它从未出现。我正在使用android权限“android.permission.ACCESS_FINE_LOCATION”并且也尝试过粗略，但我无法让该用户提示出现。此外，该应用程序未列在设置>>安全>>应用程序权限中。

GPS 确实可以在设备上与其他应用程序一起使用，但我没有使用 Google Maps API

有没有人使用 GPS 成功完成此操作，如果是，您必须使用哪些权限或解决方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T12:55:35.950

如果您将应用程序侧加载到设备上，则不会收到有关权限的提示，您的应用程序也不会出现在“安全”->“应用程序权限”部分中。有关详细信息，请参阅[此线程](http://supportforums.blackberry.com/t5/Android-Runtime-Development/GPS-permission-in-android-app-to-bar-file/td-p/2349121)。

不过，不能怪你放弃 Playbook - 开发完全是痛苦的，就像所有其他 BlackBerry 平台一样！

# python - 何时以编程方式创建自定义 Django 权限？

> ID：10063727
> 
> 赞同：7
> 
> 时间：2012-04-08T14:53:59.460
> 
> 标签：python, django, permissions

Django 1.4 的权限/身份验证文档提供了以下代码片段，用于以编程方式创建自定义权限：

**编辑：（**我想将其用于*不一定*与特定模型类相关联的权限，而是跨多种类型的更通用权限。）

```
from django.contrib.auth.models import Group, Permission
from django.contrib.contenttypes.models import ContentType

content_type = ContentType.objects.get(app_label='myapp', model='BlogPost')
permission = Permission.objects.create(codename='can_publish',
                                       name='Can Publish Posts',
                                       content_type=content_type) 
```

[来源](https://docs.djangoproject.com/en/1.4/topics/auth/#programmatically-creating-permissions)

我的问题是这段代码应该放在*哪里。*显然这些应该只创建一次，但我不想在 shell 中这样做。似乎这应该存储在某个文件中。（为了文档的缘故。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:57:37.277

`permissions`通常只需使用元属性将所需的权限添加到相应的模型类就足够了。

这是来自[官方文档](https://docs.djangoproject.com/en/1.4/topics/auth/#custom-permissions)：

```
class Task(models.Model):
    ...
    class Meta:
        permissions = (
            ("view_task", "Can see available tasks"),
            ("change_task_status", "Can change the status of tasks"),
            ("close_task", "Can remove a task by setting its status as closed"),
        ) 
```

# dreamweaver - 在 Dreamweaver CS4 中添加“书签”？

> ID：10063728
> 
> 赞同：1
> 
> 时间：2012-04-08T14:54:09.557
> 
> 标签：dreamweaver, cs4

有谁知道“书签”一行代码的方法，以便以后参考？

如果我可以标记一行代码，例如“某天需要修复”或“此处设置 XYZ 变量”等，那将非常有帮助...

目前我只是滚动浏览代码以查找评论或使用查找功能，但我的一些项目包含太多 JS 文件，这可能会变得很耗时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:10:50.937

根据Adob​​e 论坛上的[这篇](http://forums.adobe.com/message/4504871)文章和其他帖子，Dreamweaver 中没有书签功能。显然它已被添加到请求的功能列表中。

# visual-studio - vs2010 XAML Find 高亮很淡

> ID：10063730
> 
> 赞同：1
> 
> 时间：2012-04-08T14:54:12.260
> 
> 标签：visual-studio, visual-studio-2010, search

正如您在下图中看到的那样，当我使用“查找下一个”按钮搜索单词时，我正在搜索的单词上的突出显示非常褪色且难以看到。

![在此处输入图像描述](../Images/c8c6275150b2cbc68b7e2cc2878d740d.png)

但是当我用 F3 搜索它时，我可以更好地看到突出显示，因为它位于蓝色背景上。

![在此处输入图像描述](../Images/789b607778a93525e15b566faf877d91.png)

有没有办法在“查找下一个”按钮上也应用蓝色背景？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:36:59.223

我认为您正在寻找的设置是工具->选项->环境->字体和颜色->显示文本编辑器的设置->非活动选定文本。

我将我的颜色切换为您在下面的屏幕截图中看到的红色作为测试，但从您的问题描述中，您需要将非活动选定文本设置为与选定文本相同的值。

![在此处输入图像描述](../Images/69d18f943f23343dbb7921faae85546f.png)

# workflow-foundation-4 - 从 InArgument 获取变量名

> ID：10063736
> 
> 赞同：0
> 
> 时间：2012-04-08T14:55:36.430
> 
> 标签：workflow-foundation-4

我有一个自定义活动，用户在重新托管的设计器环境中从下拉列表中选择一个变量。我的问题是我想获取变量的名称及其值。
假设我的自定义活动有“InArgument MyVar { get; set; }”。我目前通过解析“（（Microsoft.VisualBasic.Activities.VisualBasicValue）MyVar.Expression）.ExpressionText”来获取变量的名称。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:19:49.343

在运行时之前，您无法确定参数的真实值。

但是，您可以使用这些扩展方法将其设为默认值：

```
 public static T GetImediateValueOrDefault<T>(Activity<T> activity, ModelItem modelItem)
    {
        if (activity == null)
            return default(T);

        var exprAsLiteral = activity as Literal<T>;
        if (exprAsLiteral != null)
            return exprAsLiteral.Value;

        var exprAsVbValue = activity as Microsoft.VisualBasic.Activities.VisualBasicValue<string>;
        if (exprAsVbValue != null)
            return modelItem.GetDefaultValueOfScopedVariable<T>(exprAsVbValue.ExpressionText);

        return default(T);
    }

    public static T GetDefaultValueOfScopedVariable<T>(this ModelItem modelItem, string variableName)
    {
        IEnumerable<ModelItem> scopedVariables = modelItem.GetScopedVariables();
        ModelItem variableModelItem = scopedVariables.FirstOrDefault(v => Equals(variableName, v.Properties["Name"].ComputedValue));
        if (variableModelItem == null)
            throw new KeyNotFoundException();

        Variable<T> variable = variableModelItem.GetCurrentValue() as Variable<T>;
        if (variable == null)
            return default(T);

        return GetImediateValueOrDefault(variable.Default, modelItem);
    } 
```

*不保证，慎用*

# netlogo - NetLogo 的 LeJOS 扩展

> ID：10063738
> 
> 赞同：1
> 
> 时间：2012-04-08T14:56:04.023
> 
> 标签：netlogo, lejos-nxj

我是 Lejos 的新手，有一个简短的问题。是否有任何 LeJOS 扩展可以与 NetLogo 结合使用？我需要用 Netlogo 运行 Lejos 并将它们都插入 Eclipse。但我不能在 java 中使用 Netlogo。所以我想知道是否可以将 LeJOS 作为扩展名添加到 Netlogo 中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T15:11:39.507

我没有听说过任何这样的扩展。不过应该可以使用 NetLogo 扩展 API 构建一个；见[https://github.com/NetLogo/NetLogo/wiki/Extensions-API](https://github.com/NetLogo/NetLogo/wiki/Extensions-API)

# jsf - jsf数据表的行ID

> ID：10063739
> 
> 赞同：0
> 
> 时间：2012-04-08T14:56:27.013
> 
> 标签：jsf, datatable, rowid

我想在我的 JSF 数据表的行中做一些操作，为此我需要行的 id。但是当我看到通过firebug生成的html时。我注意到 id 只为 JSF 组件而不是 tr 和 td 生成。有什么方法可以定义 row(tr) 的 id 这是我的代码

```
<h:datatable value = "#{bean.list}" var = "row">
   <h:column> 
       #{row.name}
   </h:column>
   <h:column> 
       #{row.address}
   </h:column>
   <h:column> 
       #{row.phone no}
   </h:column>
   <h:column> 
       <h:selectBooleanCheckbox id="checkbox" value="#{row.sportsStudent}" />
   </h:column>
</h:datatable> 
```

我的数据表下方有一个按钮，上面写着“仅显示体育学生”，我的列表应仅显示体育学生，标题将更改为“显示所有学生”。现在应该显示所有学生。所以我在想我是否有 tr 的 id 。我可以使用 jquery 隐藏/显示该行。那我可以这样做吗？

提前致谢。

塔伦·马丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T16:43:47.413

你有几个选择。我可以提出其中的两个：

1.  您可以将带有描述的类添加到数据表中的某些列。例如，体育学生班是`sport`和`ordinary`其他人。然后您可以隐藏/显示所有包含`ordinary`类元素的行。
2.  在服务器上过滤学生。发送将重新呈现您的表格的 ajax 请求，只留下体育学生。如果您使用一些支持ajax 的JSF 库，例如primefaces，您可以非常简单地做到这一点。

# actionscript-3 - 如何将 Paypal 与 Flash 连接以进行游戏

> ID：10063740
> 
> 赞同：2
> 
> 时间：2012-04-08T14:56:27.833
> 
> 标签：actionscript-3, flash, paypal

我在谷歌和这个网站上寻找过类似的东西，但只找到了详细说明网站程序的答案。如何使用 Paypal 或其他网站在游戏内进行金融交易？是否有任何 API/库？如果可能，请在 AS3 中提供解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:32:30.317

是的，有一个 PayPal API，您需要查看 paypal 文档以了解更多信息，除了实现这一点，不久前我有一些脚本可以在 actionScript 中为 PayPal 制作基本的 ECART，我会检查我的备份文件，看看我是否还有它们，我是通过谷歌找到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:41:51.463

Paypal 有几个将他们的新数字商品支付方式集成到 Flash 中的简短示例，但它要么涉及将 javascript 嵌入到您的 swf 周围的 html 中并使用 ExternalInterface 与之对话，要么在弹出窗口中打开另一个页面。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_IntegratingDigitalGoodsInFlash](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_IntegratingDigitalGoodsInFlash)

# windows - 如何“自动运行”没有管理员权限的程序？

> ID：10063741
> 
> 赞同：0
> 
> 时间：2012-04-08T14:56:30.233
> 
> 标签：windows, registry

在我们的软件中，用户可以选择在系统启动时使应用程序“自动运行”。但是，用户可能没有管理员权限。在这种情况下，他将无权更新注册表。我已经尝试了以下两种没有管理员权限的路径，但访问被拒绝。

```
HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows\\CurrentVersion\\Run
HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Run 
```

那么，无论平台（Win7、Vista、XP 等）如何，有什么方法可以“自动运行”一个没有管理员权限的程序？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:19:16.943

您不需要管理员权限来写入 HKCU\Software\Microsoft\Windows\CurrentVersion - ACL 允许当前用户读取和写入该密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:09:34.870

对此最合理的解释是您的防病毒软件阻止了您写入此密钥的尝试。是的，有人可能已将 ACL 应用于该密钥以拒绝您的写访问权限，但这不太可能。另一方面，防病毒软件对修改该特定密钥的程序例外是很常见的。

# java - 使用 java.nio 在文件更改时引发创建/移动/删除事件

> ID：10063742
> 
> 赞同：4
> 
> 时间：2012-04-08T14:56:32.097
> 
> 标签：java, filesystems, nio, watch

对于我想在文件系统中更改条目时更新条目的媒体库，我想通过使用[此示例尝试“新”java.nio](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)[文件监视功能](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。 我希望在创建、移动（重命名）或删除文件时获得有用的事件，但这是在 windows7 上观看文件夹时发生的情况（尚未尝试其他操作系统）：

格式：
[ThreadName] DEBUG 2012-04-09 18:20:35.934 GroupNumber-COMMAND：路径
ThreadName：每个监视文件夹在其自己的线程中运行，具有不同的 id
GroupNumber：使用相同 GroupNumber 发送的消息同时发送（通常..）
COMMAND：接收到的命令
Path：接收到的路径

```
Rename:
[Watch0] DEBUG 2012-04-09 18:20:35.934 2-ENTRY_DELETE: C:\tmp\tmp\test.avi
[Watch0] DEBUG 2012-04-09 18:20:35.935 2-ENTRY_CREATE: C:\tmp\tmp\test1.avi
[Watch0] DEBUG 2012-04-09 18:20:35.936 3-ENTRY_MODIFY: C:\tmp\tmp
[Watch0] DEBUG 2012-04-09 18:20:35.937 4-ENTRY_MODIFY: C:\tmp\tmp\test1.avi

[Watch4] DEBUG 2012-04-09 18:43:47.965 18-ENTRY_DELETE: F:\tmp\test.avi
[Watch4] DEBUG 2012-04-09 18:43:47.966 18-ENTRY_CREATE: F:\tmp\test1.avi
[Watch4] DEBUG 2012-04-09 18:43:47.967 19-ENTRY_MODIFY: F:\tmp\test1.avi

Create:
[Watch0] DEBUG 2012-04-09 18:22:02.055 5-ENTRY_CREATE: C:\tmp\test.avi
[Watch0] DEBUG 2012-04-09 18:22:02.066 6-ENTRY_MODIFY: C:\tmp\test.avi
[Watch0] DEBUG 2012-04-09 18:22:03.460 7-ENTRY_MODIFY: C:\tmp\test.avi
//Note the 1.4'' delay between the last two messages. 
//This is the time required to actually copy the file

Move in same watch folder:
[Watch0] DEBUG 2012-04-09 18:18:42.395 0-ENTRY_DELETE: C:\tmp\test.avi
[Watch0] DEBUG 2012-04-09 18:18:42.396 0-ENTRY_MODIFY: C:\tmp\tmp
[Watch0] DEBUG 2012-04-09 18:18:42.396 1-ENTRY_CREATE: C:\tmp\tmp\test.avi
[Watch0] DEBUG 2012-04-09 18:18:42.396 1-ENTRY_MODIFY: C:\tmp\tmp\test.avi

Move to other watch folder on same drive:
[Watch1] DEBUG 2012-04-09 18:23:24.341 8-ENTRY_CREATE: C:\tmp2\test.avi
[Watch0] DEBUG 2012-04-09 18:23:24.341 8-ENTRY_DELETE: C:\tmp\test.avi
[Watch1] DEBUG 2012-04-09 18:23:24.342 10-ENTRY_MODIFY: C:\tmp2\test.avi
//The two 8 are lying. Both messages are being sent from different threads
//and the shared counter hasn't been incremented by any yet. The next entry has been 
//incremented by two!

Move to other watch folder on different drive:
[Watch4] DEBUG 2012-04-09 18:25:42.324 11-ENTRY_CREATE: F:\tmp\test.avi
[Watch4] DEBUG 2012-04-09 18:25:42.338 12-ENTRY_MODIFY: F:\tmp\test.avi
[Watch4] DEBUG 2012-04-09 18:25:42.703 13-ENTRY_MODIFY: F:\tmp\test.avi
[Watch3] DEBUG 2012-04-09 18:25:49.433 14-ENTRY_DELETE: C:\tmp2\test.avi
//Note that the last delete message is being sent from another thread then the first ones.
//This is because the source and destination WatchDirs aren't the same

Delete:
[Watch9] DEBUG 2012-04-05 21:22:02.921 ENTRY_DELETE: C:\tmp\test (2011).mkv 
```

有一组必须解释的“命令+路径”，而不是单个事件。例如，删除由单个命令组成，而重命名和“在同一文件夹中移动”也以删除命令开头，但将由它们未来的命令定义。此外，例如可以并行移动多个文件，这将最终出现在属于不同操作的命令的随机列表中，必须以某种方式对其进行排序。

我能想到的最好的是[这个类](https://github.com/taconaut/pms-mlx/blob/jre7/ps3mediaserver/src/main/java/net/pms/medialibrary/watch/ManagedFolderWatcher.java)，其中事件在被接收时被排入队列，然后在另一个线程中被接收后检查片刻（1s）（如果正在生成其他事件并且属于相同的事件，则给一些时间'事件组'）。

这适用于重命名、移动、创建或删除单个文件，但如果开始并行复制多个文件或复制一批文件，则不再有效。

我需要的任何实现是否已经存在（似乎是一个常见的用例）？或者有人知道如何解决这个问题以涵盖所有情况？

最后，它必须适用于 windows、linux 和 osx。

一个更复杂的例子，也应该支持

```
[Watch0] DEBUG 2012-04-09 19:10:17.774 0-ENTRY_CREATE: C:\tmp\tmp\testlarge.avi
[Watch0] DEBUG 2012-04-09 19:10:17.825 0-ENTRY_MODIFY: C:\tmp\tmp\testlarge.avi
[Watch0] DEBUG 2012-04-09 19:10:17.826 1-ENTRY_MODIFY: C:\tmp\tmp
[Watch0] DEBUG 2012-04-09 19:12:09.516 2-ENTRY_DELETE: C:\tmp\tmp\testsmall.avi
[Watch0] DEBUG 2012-04-09 19:12:09.516 3-ENTRY_CREATE: C:\tmp\testsmall.avi
[Watch0] DEBUG 2012-04-09 19:12:09.517 3-ENTRY_MODIFY: C:\tmp\testsmall.avi
[Watch0] DEBUG 2012-04-09 19:12:09.521 4-ENTRY_MODIFY: C:\tmp\tmp
[Watch0] DEBUG 2012-04-09 19:14:13.025 5-ENTRY_MODIFY: C:\tmp\tmp\testlarge.avi 
```

在这里，一个小文件正在被移动，而一个大文件正在被创建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:56:26.507

我看到的一件事是您为每个事件创建一个新线程，并使用 na 锁定对象来同步您的线程。

如果您创建一个 ExecutorService 会更好，即重写您的代码，例如：

```
private ExecutorService executorService;

private class WatchEventHandler implements Callable {

    WatchEvent<?> event;

    public WatchEventHandler(final WatchEvent<?> event) {
        this.event = event;
    }

    @Override
    public void call() throws Exception{
        // do something with the event

        // fireFileWatchAction();

    }    
}

public ManagedFolderWatcher(DOManagedFile managedFolder) throws IOException {
   executorService = Executors.newFixedThreadPool(10);
   ...
} 
```

并在您的运行/处理事件方法中

```
public void run() {
    try {
       while(true) {

          WatchKey key = watcher.take();
          ....

          for (WatchEvent<?> event : key.pollEvents()) {
              ...
              // in my oppinon there is no need to delay the event 
              executorService.schedule(new WatchEventHandler(event));
          }
          ...

       }
    } catch (InterruptedException ie) {
        // todo: propper error handling
        log.error("Thread interrupted", ie);
    } catch (ClosedWatchServiceException cwse) {
        // todo: propper error handling
        log.error("WatchService allready closed.", cwse);
    }

} 
```

当您以这种方式实现它时，您甚至不需要您的锁定对象`eventEntrySyncObj`，并且您的 Callable/Command 具有触发 fileWatchAction 事件所需的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T15:20:39.690

对 java nio 文件观察器不是很熟悉，但我使用[jnotify 库](http://jnotify.sourceforge.net/)从文件系统中获取事件，它非常好，并且可以与 windows 和 linux 一起使用。

如果您想以任何方式使用 nio，请尝试查看此处：[https ://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes](https://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T03:31:41.497

你得到的事件就是你将得到的事件。在 Windows 上。在 Linux 上，当您查看文件夹时，您只会获取该文件夹的事件，而不是该文件夹中的文件。我相信它在 OS X 上更加粗糙，尽管我从未在那里处理过它。这意味着如果你在看`/tmp`，你会看到`ENTRY_CREATE /tmp/tmp/`但不是`ENTRY_CREATE /tmp/tmp/test.avi`

我通过查看文件夹，在 Set 中累积更改通知，然后定期对 Set 中提到的所有文件进行操作来处理类似的问题。（有一个 Set 正在更新，另一个 Set 正在扫描和清除，我会交换哪个 Set 是哪个。）

简而言之，我放弃了试图弄清楚文件何时被移动、复制或附加。我只是将每次创建或修改都视为创建与先前文件无关的新文件。在实践中，其他任何事情都是行不通的，至少在我的情况下，我正在跟踪服务器上的数百万个文件。

# android - 应用样式 EditText 元素

> ID：10063745
> 
> 赞同：0
> 
> 时间：2012-04-08T14:57:35.253
> 
> 标签：android, user-interface

我正在开发一个 Android 应用程序。

为了使 UI 更具吸引力，我想缩小 EditText 文本并应用背景颜色和形状。

我还必须能够从 EditText 中删除该元素。

看看这个 [谷歌加应用](http://www.google.co.in/imgres?um=1&hl=en&sa=N&biw=1366&bih=653&tbm=isch&tbnid=NXeLGq_hZcZ1SM%3a&imgrefurl=http://www.androidsocialmedia.com/apps/google-plus-rolled-out-in-a-big-way-with-android-app&docid=YjG1NjInIbTFlM&imgurl=http://www.androidsocialmedia.com/wp-content/uploads/2011/07/google-plus-android-5.jpg&w=480&h=800&ei=N6WBT7uKBYPQrQfckM3PBQ&zoom=1&iact=hc&vpx=562&vpy=233&dur=1253&hovh=290&hovw=174&tx=94&ty=103&sig=105716919121830335083&page=1&tbnh=149&tbnw=89&start=0&ndsp=21&ved=1t:429,r:16,s:0,i:101)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:34:40.430

将其用作 Xml 文件来四舍五入您的 EditText 并将颜色设置为您想要的任何颜色......

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
    <solid android:color="#eeffffff" />
    <corners android:bottomRightRadius="8dip"
        android:bottomLeftRadius="8dip"  android:topRightRadius="8dip"
        android:topLeftRadius="8dip"/>
</shape> 
```

# android - Android：如何启动 Android Market（Play 商店）并了解如何从我自己的应用程序关闭

> ID：10063749
> 
> 赞同：0
> 
> 时间：2012-04-08T14:57:43.627
> 
> 标签：android, google-play

我实现了一些可以启动 Play Store 的应用程序。这是某种防火墙，它必须知道用户在哪里关闭然后 Play 商店。我怎样才能成为某种信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:12:27.193

[开始活动结果](https://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)？

# actionscript-3 - 如何从 .SWF 容器中导出资产？

> ID：10063753
> 
> 赞同：-7
> 
> 时间：2012-04-08T14:58:16.237
> 
> 标签：actionscript-3, flash

Given 是 Hubworld 网站上的一个在线 swf，它将两个配置 XML 加载到一个 .swf 文件中，然后显示一个游戏。可以在此处找到包含两个配置文件的 Flash 副本。(http://db.tt/zYT9Owg5)。如果解压缩到一个文件夹中，它会加载两个 XML 文件并正确显示所有内容。问题是，怎么拆？

我尝试反编译该文件，但它只显示为一个（大部分）空文件，其中包含一个符号和一些杂项标签，尽管文件本身包含数百个向量。（http://i.imgur.com/si6gq.png）。我非常怀疑是否存在任何形式的加密或混淆，因为这是儿童游戏，我拆散了许多其他游戏而没有问题。我怎样才能从容器中检索上述文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:05:46.753

swf 包含另一个嵌入为 ByteArray 的 swf。我不知道为什么，但这可能是一种混淆技术。

[您可以通过在SWFWire Debugger](http://www.swfwire.com/debugger)中运行 swf 查看实际资产。此应用程序将从 ByteArray 加载的 swf 转储到与 fashion.swf 相同的文件夹中。然后，您可以在反编译器或[SWFWire Inspector](http://www.swfwire.com/inspector)中加载它，如果您只想查看资产。

# java - 在 java 和 c++ 之间使用 Socket 进行 IPC 的优缺点是什么？

> ID：10063755
> 
> 赞同：1
> 
> 时间：2012-04-08T14:58:34.170
> 
> 标签：java, c++, ipc

我最近被迫找到最适合 java 和 c++ 之间通信的 IPC 协议。

我搜索了 SO 以找到最好的协议，我发现在 SO 中套接字是最好的方法。但我找不到任何关于插座的优缺点的信息！所以我想知道这个协议的优点，也想知道其他协议与套接字的优点，以便为我的应用程序选择最佳协议。

我的两个应用程序很可能在同一台机器上运行。

**更新**我应该首先选择我的协议，然后我可以决定在哪个系统配置上运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:42:51.867

最好的 IPC 方法实际上取决于您的通信类型：消息传递、确保互斥执行、共享数据是各种 IPC，但套接字并不是所有 3 的解决方案。

考虑或提供信息，您希望在应用程序之间以何种形式传递信息。也许你会找到一个典型的场景（比如生产者-消费者问题）。

如果您遇到消息传递问题，原则上类似于老式 TCP 服务，那么套接字是一个好主意，因为它们经过充分测试且易于调试；它们提供完全解耦，但与管道相比，在本地运行并没有缺点，因为内核可以有效地阻塞一个应用程序（发送方或接收方）。

套接字可以是 UDP、TCP 或 Unix 套接字。在任何情况下，您都不需要带有套接字的本地 IPC 的网卡。

# silverlight - WP7 - 在自动完成框中输入时隐藏键盘

> ID：10063759
> 
> 赞同：3
> 
> 时间：2012-04-08T14:59:03.490
> 
> 标签：silverlight, windows-phone-7, autocomplete

我正在使用自动完成框，当我按键盘上的 Enter 键时，我想从自动完成框中移除焦点。

我尝试使用 OnKeyDown 方法，但它不会检测到被按下的回车键（它检测到所有其他键）。

如何检测用户按下回车键？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:40:31.600

幸好我解决了！（我觉得现在问这个问题有点愚蠢）。

事实证明，虽然 OnKeyDown 适用于大多数控件，但为了检测在使用自动完成控件时按下的回车键，您需要使用 OnKeyUp。

# php - 根据另一个表中的值对表进行mysql查询

> ID：10063760
> 
> 赞同：0
> 
> 时间：2012-04-08T14:59:27.967
> 
> 标签：php, mysql

我有以下查询，它工作正常。如果您看到查询，您会注意到有一个名为 的变量`$code`，我使用它来手动设置它的值，如下所示`$code="1001";`

```
function check1() { 

$code="1001";

 $getData = $this->db->query("SELECT * FROM vouchers 
 LEFT JOIN  details on vouchers.voucher_no = details.voucher_no 
LEFT JOIN   accounts on accounts.code = vouchers.account_code 
WHERE (voucher_type='1' AND t_code=$code)

 UNION ALL

SELECT * FROM vouchers 
LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
LEFT JOIN   accounts on accounts.code = details.t_code 
 WHERE (voucher_type='0' AND account_code=$code)

 ");

       if($getData->num_rows() > 0)
        return $getData->result_array();
        else
        return null;
} 
```

当我在视图文件中显示结果时，我使用以下脚本：

```
 <?php if(count($records) > 0) { ?>

  <?php $i = $this->uri->segment(3) + 0; foreach ($records as $row){ $i++; ?>

  <?php echo $row['voucher_date']; ?>  
  <?php echo $row['name']; ?> 
  <?php echo $row['amount']; ?>    <br>

<?php  } ?>

<?php } else { echo "No Record Found";} ?>

<?php 
$sum = 0;
foreach ( $records as $row ) {
 $sum += str_replace(",", "", $row['amount']);
}
?> 

  Total: <?php  echo  number_format( $sum, 2 );?> 
```

现在我想做的是`$code`从下面的 mysql 表中获取 的值并获取其所有值的结果，这样当我在我的视图文件中显示结果时，它不仅显示结果，`$code="1001"`而且显示`$code="1002"`, `$code="1003"`。

为了实现我想要的，我必须更改上面的 mysql 查询。但我不明白该怎么做，请你告诉我。

提前致谢：）

表名：accounts

```
code   name 
1001    Cash Account
1002    Advertising Expense
1003    Accounts Receivable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:03:21.813

```
SELECT * FROM vouchers 
 LEFT JOIN  details on vouchers.voucher_no = details.voucher_no 
LEFT JOIN   accounts on accounts.code = vouchers.account_code 
WHERE voucher_type='1' AND t_code IN (SELECT * FROM code_table)

 UNION ALL

SELECT * FROM vouchers 
LEFT JOIN details on vouchers.voucher_no = details.voucher_no 
LEFT JOIN   accounts on accounts.code = details.t_code 
 WHERE voucher_type='0' AND account_code IN (SELECT * FROM code_table) 
```

# android - 从图库设置应用背景

> ID：10063763
> 
> 赞同：0
> 
> 时间：2012-04-08T14:59:42.877
> 
> 标签：android, background, gallery, sharedpreferences

我有一个应用程序使用共享首选项从一些预先确定的图像中设置背景，但我想让用户能够从他们的图库中选择图像。我怎样才能做到这一点？

下面的代码：

```
int bak;
int em;
int lo;
int lay;
SharedPreferences data;
public static String filename = "bg";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    lo = R.layout.main;
    data = getSharedPreferences(filename, 0);
    lay = data.getInt("lout", lo);          
    setContentView(lay);

    em = R.drawable.bakgrund;
    data = getSharedPreferences(filename, 0);
    bak = data.getInt("bakgrund", em);

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    RelativeLayout bg = (RelativeLayout) findViewById(R.id.might);
    bg.setBackgroundResource(bak); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:25:36.450

在 onCreate 方法中添加这些行以从您的图库中选择图像：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),0); 
```

并在 onCreate 下方添加此方法：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case 0:
            data.getDataString()
            if (resultCode == RESULT_OK) {
                try {
                    Bitmap bitmap = MediaStore.Images.Media.getBitmap(_activity.getContentResolver(), data.getDataString());
                    RelativeLayout bg = (RelativeLayout) findViewById(R.id.might);
                    Drawable drawable = new BitmapDrawable(getResources(), bitmap);
                    bg.setBackgroundDrawable(drawable);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                break;
            }
    }
} 
```

此外，在清单文件中添加此权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# python - 您如何检查电子邮件服务器 (gmail) 中的某个地址并根据该地址运行某些内容？

> ID：10063767
> 
> 赞同：1
> 
> 时间：2012-04-08T15:00:09.257
> 
> 标签：python, email, pop3

我一直在尝试使用'import poplib'来访问gmail，因为我在设置中打开了Pop-但是我实际上如何检查消息的'发件人'地址，然后基于它运行一些东西？另外，从消息中删除“正文”文本的命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:33:25.197

有模块 rfc822

我猜来自 poplib 的消息可以从服务器下载。

然后放入一个文件

```
>>> f = StringIO.StringIO(message)
>>> import rfc822 
```

并传递给

```
>>> rfc822.Message(f) 
```

试试这个.. 并查看模块文档。我希望它有所帮助。

* * *

还有另一个python模块：

```
>>> import email
>>> email.message_from_string(...) 
```

这应该为您提供对标题的读取访问权限，并且还支持多种格式的正文内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:42:38.037

以下是使用 imaplib 获取 GMail 收件箱中每封邮件的主题和发件人的方法。

```
import imaplib
from email.parser import HeaderParser

conn = imaplib.IMAP4_SSL('imap.gmail.com')
conn.login('username@gmail.com', 'password')

# Select the mail box
status, messages = conn.select('INBOX')

if status != "OK":
    print "Incorrect mail box"
    exit()

if int(messages[0]) > 0:

    for message_number in range(1,int(messages[0])+1):  
        data = conn.fetch(message_number, '(BODY[HEADER])')
        parser = HeaderParser()
        msg = parser.parsestr(data[1][0][1])
        print "Subject: %s" % msg['subject']
        print "From: %s" % msg['from'] 
```

您可能需要更多信息。从[官方 imaplib 文档](http://docs.python.org/library/imaplib.html)开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:44:50.297

从[文档](http://docs.python.org/library/poplib.html)中：

```
POP3.retr(which)

Retrieve whole message number which, and set its seen flag. Result is in form (response, ['line', ...], octets). 
```

因此，假设您已将 的结果`retr()`放入名为 的变量`response`中，则消息的行将作为列表存储在`response[1]`. 通过[RFC 2822](http://www.ietf.org/rfc/rfc2822.txt)，我们知道标头与邮件正文之间用空行分隔。邮件的发件人将在`From:`标题行中。所以我们可以遍历消息的行，当我们得到一个空行时停止，当我们看到以 . 开头的行时为我们的发送者设置一个变量`From:`。

```
sender = None
for line in response[1]:
    if line.startswith("From: "):
        sender = line.partition(" ")[2].strip()
    elif line == "":
        break 
```

如果您打算对标头做很多事情，那么按标头名称将它们放入字典中可能会很有用。由于每个标题都可以出现多次，因此字典中的每个值都应该是一个列表。

```
 headers = {}
 for line in response[1]:
     if line == "":
        break
     line = line.partition(" ")
     key = line[0].strip().rstrip(":")
     value = line[2].stirp()
     headers.setdefault(key, []).append(value) 
```

在此之后，您可以使用`headers["From"][0]`获取消息的发件人。

我想展示执行此操作的基本方法，因为它不是很复杂，但 Python 可以为您完成大部分工作。同样，假设您的`retr()`结果在`response`：

```
 import email

 # convert our message back to a string and parse it
 headers = email.parsefromstring("\n".join(response[0]), headersonly=True)
 print headers["From"]  # prints the sender 
```

[您可以在电子邮件模块](http://docs.python.org/library/email.message.html)的文档中找到有关消息对象的更多信息。

`From:`除了电子邮件地址之外，电子邮件消息的行可能还有其他文本，例如发件人的姓名。您可以使用正则表达式提取电子邮件地址：

```
sender = re.find(r".*[ <](.+@.+)\b", headers["From"]).match(1) 
```

# c# - 如何以编程方式向 datagridview 添加新行

> ID：10063770
> 
> 赞同：172
> 
> 时间：2012-04-08T15:00:21.867
> 
> 标签：c#, winforms, datagridview, row

如果添加行`DataTable`

```
DataRow row = datatable1.NewRow();
row["column2"]="column2";
row["column6"]="column6";
datatable1.Rows.Add(row); 
```

怎么样`DataGridView`？？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-04-08T15:07:44.330

你可以做：

```
DataGridViewRow row = (DataGridViewRow)yourDataGridView.Rows[0].Clone();
row.Cells[0].Value = "XYZ";
row.Cells[1].Value = 50.2;
yourDataGridView.Rows.Add(row); 
```

或者：

```
DataGridViewRow row = (DataGridViewRow)yourDataGridView.Rows[0].Clone();
row.Cells["Column2"].Value = "XYZ";
row.Cells["Column6"].Value = 50.2;
yourDataGridView.Rows.Add(row); 
```

另一种方式：

```
this.dataGridView1.Rows.Add("five", "six", "seven","eight");
this.dataGridView1.Rows.Insert(0, "one", "two", "three", "four"); 
```

来自：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-11-14T04:51:31.997

像这样：

```
var index = dgv.Rows.Add();
dgv.Rows[index].Cells["Column1"].Value = "Column1";
dgv.Rows[index].Cells["Column2"].Value = 5.6;
//.... 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2016-01-01T23:45:43.943

假设您有一个未绑定到数据集的 datagridview，并且您希望以编程方式填充新行...

这是你如何做到的。

```
// Create a new row first as it will include the columns you've created at design-time.

int rowId = dataGridView1.Rows.Add();

// Grab the new row!
DataGridViewRow row = dataGridView1.Rows[rowId];

// Add the data
row.Cells["Column1"].Value = "Value1";
row.Cells["Column2"].Value = "Value2";

// And that's it! Quick and painless... :o) 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-04-08T15:05:20.643

像这样：

```
 dataGridView1.Columns[0].Name = "column2";
 dataGridView1.Columns[1].Name = "column6";

 string[] row1 = new string[] { "column2 value", "column6 value" };
 dataGridView1.Rows.Add(row1); 
```

或者您需要使用属性单独设置值[`.Rows()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)，如下所示：

```
 dataGridView1.Rows[1].Cells[0].Value = "cell value"; 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2013-09-26T15:13:33.647

**使用Add()**在 DGV 中添加没有行的新行会引发*SelectionChanged*事件，然后您才能插入任何数据（或在 Tag 属性中绑定对象）。

**从RowTemplate**创建一个克隆行更安全恕我直言：

```
//assuming that you created columns (via code or designer) in myDGV
DataGridViewRow row = (DataGridViewRow) myDGV.RowTemplate.Clone();
row.CreateCells(myDGV, "cell1", "cell2", "cell3");

myDGV.Rows.Add(row); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-02-28T23:13:31.563

如果 dgrview 为空，这就是我添加行的方式：（myDataGridView 在我的示例中有两列）

```
DataGridViewRow row = new DataGridViewRow();
row.CreateCells(myDataGridView);

row.Cells[0].Value = "some value";
row.Cells[1].Value = "next columns value";

myDataGridView.Rows.Add(row); 
```

根据文档：“CreateCells() 清除现有单元格并根据提供的 DataGridView 模板设置其模板”。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-01-17T10:03:10.583

如果网格与 DataSet / 表绑定，则最好使用 BindingSource 之类的

```
var bindingSource = new BindingSource();
bindingSource.DataSource = dataTable;
grid.DataSource = bindingSource;

//Add data to dataTable and then call

bindingSource.ResetBindings(false) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-08-08T07:45:47.467

这是另一种方法

```
 private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        dataGridView1.ColumnCount = 3;

        dataGridView1.Columns[0].Name = "Name";
        dataGridView1.Columns[1].Name = "Age";
        dataGridView1.Columns[2].Name = "City";

        dataGridView1.Rows.Add("kathir", "25", "salem");
        dataGridView1.Rows.Add("vino", "24", "attur");
        dataGridView1.Rows.Add("maruthi", "26", "dharmapuri");
        dataGridView1.Rows.Add("arun", "27", "chennai"); 
    } 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-01-20T17:49:37.847

如果您需要操作除单元格值字符串之外的任何内容（例如添加标签），请尝试以下操作：

```
DataGridViewRow newRow = (DataGridViewRow)mappingDataGridView.RowTemplate.Clone();
newRow.CreateCells(mappingDataGridView);

newRow.Cells[0].Value = mapping.Key;
newRow.Cells[1].Value = ((BusinessObject)mapping.Value).Name;
newRow.Cells[1].Tag = mapping.Value;

mappingDataGridView.Rows.Add(newRow); 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-03-31T10:55:33.333

**如果您正在绑定列表**

```
List<Student> student = new List<Student>();

dataGridView1.DataSource = student.ToList();
student .Add(new Student());

//Reset the Datasource
dataGridView1.DataSource = null;
dataGridView1.DataSource = student; 
```

**如果您正在绑定 DataTable**

```
DataTable table = new DataTable();

 DataRow newRow = table.NewRow();

// Add the row to the rows collection.
table.Rows.Add(newRow); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-08-07T07:56:48.243

```
yourDGV.Rows.Add(column1,column2...columnx); //add a row to a dataGridview
yourDGV.Rows[rowindex].Cells[Cell/Columnindex].value = yourvalue; //edit the value 
```

您还可以创建一个新行，然后将其添加到 DataGridView 中，如下所示：

```
DataGridViewRow row = new DataGridViewRow();
row.Cells[Cell/Columnindex].Value = yourvalue;
yourDGV.Rows.Add(row); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-02T16:17:10.947

如果有人想将 DataTable 添加为 gridview 的源，那么 -

```
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("column1"));
dt.Columns.Add(new DataColumn("column2"));

DataRow dr = dt.NewRow();
dr[0] = "column1 Value";
dr[1] = "column2 Value";

dt.Rows.Add(dr);

dataGridView1.DataSource = dt; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-02-02T14:59:42.090

```
//Add a list of BBDD
var item = myEntities.getList().ToList();
//Insert a new object of type in a position of the list       
item.Insert(0,(new Model.getList_Result { id = 0, name = "Coca Cola" }));

//List assigned to DataGridView
dgList.DataSource = item; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-10-17T02:45:16.960

从 dataGridView 复制行并在同一 dataGridView 中添加新行的示例：

```
DataTable Dt = new DataTable();
Dt.Columns.Add("Column1");
Dt.Columns.Add("Column2");

DataRow dr = Dt.NewRow();
DataGridViewRow dgvR = (DataGridViewRow)dataGridView1.CurrentRow;
dr[0] = dgvR.Cells[0].Value; 
dr[1] = dgvR.Cells[1].Value;              

Dt.Rows.Add(dR);
dataGridView1.DataSource = Dt; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-03-25T15:32:40.407

```
//header
dataGridView1.RowCount = 50;
dataGridView1.Rows[0].HeaderCell.Value = "Product_ID0";

//add row by cell 
 dataGridView1.Rows[1].Cells[0].Value = "cell value"; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-01-15T18:02:17.657

考虑一个 Windows 应用程序并使用按钮单击事件将这段代码放入其中。

```
dataGridView1.Rows
                .Add(new object[] { textBox1.Text, textBox2.Text, textBox3.Text }); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-02-03T16:26:49.463

如果您已经定义了 a `DataSource`，您可以获取`DataGridView`´s`DataSource`并将其转换为`Datatable`.

然后添加一个新的`DataRow`并设置字段值。

将新行添加到`DataTable`并接受更改。

在 C# 中它会是这样的..

```
DataTable dataTable = (DataTable)dataGridView.DataSource;
DataRow drToAdd = dataTable.NewRow();

drToAdd["Field1"] = "Value1";
drToAdd["Field2"] = "Value2";

dataTable.Rows.Add(drToAdd);
dataTable.AcceptChanges(); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-28T04:20:37.913

当 DataGrid 绑定到表时，我发现这不止一次有用。

```
 DataTable dt = (DataTable)dgvData.DataSource;
        DataRow row = dt.NewRow();
        foreach (var something in something)
        {
           row["ColumnName"] = something ;               
        }
        dt.Rows.Add(row);
        dgvData.DataSource = dt; 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2017-01-02T17:55:18.407

```
string[] splited = t.Split('>');
int index = dgv_customers.Rows.Add(new DataGridViewRow());
dgv_customers.Rows[index].Cells["cust_id"].Value=splited.WhichIsType("id;"); 
```

但请注意，`WhichIsType`是我创建的扩展方法。

# c# - 为什么 .NET String.EqualsHelper 似乎使用一半大小的整数和长整数

> ID：10063773
> 
> 赞同：0
> 
> 时间：2012-04-08T15:00:57.447
> 
> 标签：c#

查看 String.EqualsHelper 和 String.CompareOrdinalHelper (.NET 2 & 4) 的实现，在我看来，比较假设 int 字节大小为 2，long 字节大小为 4。我认为实际大小为 4 和.NET 32 位世界中的 8 个。我错过了什么？这里有什么问题吗？[查看 .NET 框架中的 EqualsHelper 方法](https://stackoverflow.com/q/5927545/1320384)和[http://www.netframeworkdevs.com/common-language-runtime/string-comparision-24141.shtml](http://www.netframeworkdevs.com/common-language-runtime/string-comparision-24141.shtml)中的源代码示例。

来自 Reflector（框架 2）的逆向工程源代码：

```
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
private static unsafe bool EqualsHelper(string strA, string strB)
{
    int length = strA.Length;
    if (length != strB.Length)
    {
        return false;
    }
    fixed (char* str = ((char*) strA))
    {
        char* chPtr = str;
        fixed (char* str2 = ((char*) strB))
        {
            char* chPtr2 = str2;
            char* chPtr3 = chPtr;
            char* chPtr4 = chPtr2;
            while (length >= 10)
            {
                if ((((*(((int*) chPtr3)) != *(((int*) chPtr4))) || (*(((int*) (chPtr3 + 2))) != *(((int*) (chPtr4 + 2))))) || ((*(((int*) (chPtr3 + 4))) != *(((int*) (chPtr4 + 4)))) || (*(((int*) (chPtr3 + 6))) != *(((int*) (chPtr4 + 6)))))) || (*(((int*) (chPtr3 + 8))) != *(((int*) (chPtr4 + 8)))))
                {
                    break;
                }
                chPtr3 += 10;
                chPtr4 += 10;
                length -= 10;
            }
            while (length > 0)
            {
                if (*(((int*) chPtr3)) != *(((int*) chPtr4)))
                {
                    break;
                }
                chPtr3 += 2;
                chPtr4 += 2;
                length -= 2;
            }
            return (length <= 0);
        }
    }
}

private static unsafe int CompareOrdinalHelper(string strA, string strB)
{
    int num = Math.Min(strA.Length, strB.Length);
    int num2 = -1;
    fixed (char* str = ((char*) strA))
    {
        char* chPtr = str;
        fixed (char* str2 = ((char*) strB))
        {
            char* chPtr2 = str2;
            char* chPtr3 = chPtr;
            char* chPtr4 = chPtr2;
            while (num >= 10)
            {
                if (*(((int*) chPtr3)) != *(((int*) chPtr4)))
                {
                    num2 = 0;
                    break;
                }
                if (*(((int*) (chPtr3 + 2))) != *(((int*) (chPtr4 + 2))))
                {
                    num2 = 2;
                    break;
                }
                if (*(((int*) (chPtr3 + 4))) != *(((int*) (chPtr4 + 4))))
                {
                    num2 = 4;
                    break;
                }
                if (*(((int*) (chPtr3 + 6))) != *(((int*) (chPtr4 + 6))))
                {
                    num2 = 6;
                    break;
                }
                if (*(((int*) (chPtr3 + 8))) != *(((int*) (chPtr4 + 8))))
                {
                    num2 = 8;
                    break;
                }
                chPtr3 += 10;
                chPtr4 += 10;
                num -= 10;
            }
            if (num2 == -1)
            {
                goto Label_0101;
            }
            chPtr3 += num2;
            chPtr4 += num2;
            int num3 = chPtr3[0] - chPtr4[0];
            if (num3 != 0)
            {
                return num3;
            }
            return (chPtr3[1] - chPtr4[1]);
        Label_00E7:
            if (*(((int*) chPtr3)) != *(((int*) chPtr4)))
            {
                goto Label_0105;
            }
            chPtr3 += 2;
            chPtr4 += 2;
            num -= 2;
        Label_0101:
            if (num > 0)
            {
                goto Label_00E7;
            }
        Label_0105:
            if (num > 0)
            {
                int num4 = chPtr3[0] - chPtr4[0];
                if (num4 != 0)
                {
                    return num4;
                }
                return (chPtr3[1] - chPtr4[1]);
            }
            return (strA.Length - strB.Length);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T19:10:36.990

```
chPtr3 += 2; 
```

这使指针前进了四个*字节*，两个*字符*。一个 char 在 .NET 中是 2 个字节，它以 utf-16 编码存储一个字符。增加一个 char 指针会将其前移一个字符，两个字节。

这里真正发生的是对 int* 的强制转换。这使得算法更快，同时比较两个字符。它在 32 位 cpu 上运行良好，它的寄存器大到足以容纳两个字符（2 x 16 位 = 32 位）。将指针前移 10 个字符的代码部分相当于循环展开，这是一种使循环更快的常见优化策略。

该算法没有针对 64 位 cpu 进行优化，它可以同时将 4 个字符与单个指令进行比较。必然如此，这仍然是托管代码，因此可以编译为 32 位或 64 位机器代码，具体取决于它运行的 CPU 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:18:10.753

Char 是两个字节。Int 是四个字节。Int 比较在一次比较中比较四个字节或 2 个字符。

操作 'char_pointer + 2' 将 char 指针增加 2 个字符或 4 个字节。

单次递增的大小（+4 字节）与单次比较的大小（+4 字节）相同

# php - PHP：从数组中选择孩子

> ID：10063774
> 
> 赞同：2
> 
> 时间：2012-04-08T15:00:57.977
> 
> 标签：php, arrays

```
$array = array(
    array(
        'key1',
        'text 1 text 1 text 1'
    ),

    array(
        'key2',
        'text 2 text 2 text 2'
    ),

    array(
        'key3',
        'text 3 text 3 text 3'
    )
); 
```

对不起标题，没有例子很难解释。

用户想要阅读一些文本。例如， 的文本`key2`。因此，当输入为 时`key2`，我想显示文本：`text 2 text 2 text 2`。

但是如何使用 PHP 选择该文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T15:03:49.387

如果可以的话，我认为使用密钥作为数组中的实际密钥：

```
$array = array("key1" => "text 1 text 1",
                "key2" => "text 2 text 2",
                "key3" => "text 3 text 3");

//now use this:
echo $array["key2"]; 
```

如果无法操作数组，可以使用循环创建数组，如上所述：

```
$newArray = array();
foreach($array as $sub){
    $newArray[$sub[0]] = $sub[1];
} 
```

仅当您确定键始终是第一个元素而文本始终是第二个时，这才有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T15:08:40.190

由于它来自您的数据库（根据您的评论），这取决于您需要多久执行一次。

有两种选择，要么重新格式化整个数组，这将花费一些时间，但使以后的查找速度更快，或者你只需​​遍历数组以查找键。如果您需要进行多次查找，前一种解决方案是最好的，后者最适合单次查找。

所以，对于一个单一的查找，你可以做

```
function find_key($arr, $needle)
{
  foreach ($arr as $el)
  {
    list($key,$value) = $el;
    if ($needle == $key)
      return $value;
  }
  return false;
}

print find_key($array, 'key2'); // returns "text 2 text 2 text 2". 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T15:05:19.930

如果您需要动态获取想要的键，则需要遍历数组并匹配想要的“键”：

```
$wanted = "key2";
$text = NULL;

foreach ( $array as $V ){
    if ( $V[0] == $wanted ){
        $text = $V[1];
        break;
    }
} 
```

正如@Lex 建议的那样，重构目标数组真的是个好主意......

# android - Android ICS 解锁屏幕 - 查看

> ID：10063778
> 
> 赞同：0
> 
> 时间：2012-04-08T15:01:32.143
> 
> 标签：android, view, locking, android-4.0-ice-cream-sandwich

我想知道是否有一个我可以使用的视图，它看起来像 ICS 中的解锁圆形视图（Android 4.0）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T17:09:07.553

对于正在寻找此问题答案的开发人员：

[GlowPad 库](https://play.google.com/store/apps/details?id=net.sebastianopoggi.samples.ui.GlowPadSample)

# c++ - 从 te 数组函数中删除元素

> ID：10063779
> 
> 赞同：0
> 
> 时间：2012-04-08T15:01:50.277
> 
> 标签：c++, algorithm, visual-c++, visual-c++-2010

是否有任何已经实现的函数具有 initialArray、sizeOfInitialArray、outArray 和 sizeOfOutArray 参数，在创建精确元素大小的新数组后，采用一个数组并删除特定元素，如下所示：

```
void removeElement(int *initialArray, int sizeOfInitialArray, int *& outArray, int & sizeOfOutArray)
 {
       // some code here
 } 
```

我知道我记得有一些函数完全按照我的意愿处理代码，买了我忘记了那个函数的名称。

提前感谢您的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:07:37.573

请参阅从 stl 中[删除](http://www.cplusplus.com/reference/algorithm/remove/)..它将就地处理然后您可以创建一个新数组并返回..

未测试！完整的代码将是

```
#include <algorithm>
void removeElement(int *initialArray, int sizeOfInitialArray, int ValueToBeRemoved, int      *& outArray, int & sizeOfOutArray)
{
 int* endOfArray = initialArray+sizeOfInitialArray;
 endOfArray = remove(initialArray,endOfArray,ValueToBeRemoved);
 sizeOfOutArray = (endOfArray - initialArray);
 outArray = new int[sizeOfOutArray];
 memcpy(outArray,initialArray,(endOfArray - initialArray)*sizeof(int));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:14:31.280

你可以使用擦除删除成语

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <iterator>

bool f (int value) { return value % 2; }

int main()
{
    std::vector<int> v = { 10, 11, 2, 3, -1 };
    v.erase(std::remove_if(v.begin(), v.end(), f), v.end());
    std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, " ")); 
} 
```

如果我理解正确

# simulation - 使用 Verilog 在 FPGA 上模拟 MIPS 处理器

> ID：10063785
> 
> 赞同：2
> 
> 时间：2012-04-08T15:02:32.347
> 
> 标签：simulation, mips, verilog, fpga, hdl

我正在尝试使用 Verilog 在 FPGA 上模拟一个简单的 MIPS 处理器。这是我的代码：

```
module MIPS_Processor(output reg[7:0] LEDs, input[7:0] Switches);
    reg [31:0] memory[0:4095];   // 4K memory cells that are 32 bits wide
    reg [31:0] code[0:1023];     // 1K memory cells that are 32 bits wide
    reg [31:0] registers[0:31];  // 32 registers that are 32 bits wide
    reg [31:0] PC;               // The program counter

    reg [31:0] instruction;
    reg [5 :0] op;
    reg [4 :0] rs;
    reg [4 :0] rt;
    reg [4 :0] rd;
    reg [4 :0] shamt;
    reg [5 :0] funct;
    reg signed [15:0] immediate_offset;
    reg [25:0] target;

    reg [1:0] instruction_type; // 00 --> R | 01 --> I | 10 --> J | 11 --> EXTRA

    reg [31:0] rs_value;
    reg [31:0] rt_value;
    reg [31:0] rd_value;

    initial
        begin
            PC = 0;

            /* Here we insert the code in the code array */
            code[0] = 32'b00010010000000000000000000000000; // start : input  s0   # read switches.
            code[1] = 32'b00010010000000000000000000000001; //         output s0   # write leds.
            code[2] = 32'b00001000000000000000000000000000; //         j      start
            code[3] = 32'b00000100000000000000000000000000; // END OF CODE
        end

    always
        begin : loop_block
            // 1\. Fetch an instruction from memory
            instruction = code[PC];

            // 2\. Increment the program counter register (by the instruction length)
            PC = PC + 1;

            // 3\. Decode the instruction
            /*
                The instructions are:
                                            6   5    5    5    5    6
                                           _____________________________
                or    rd, rs, rt           | 0 | rs | rt | rd | 0 | 0x25 |

                                             6    5    5        16
                                           _____________________________
                ori  rt, rs, immediate    | 0xd | rs | rt |  immediate  |

                                            6   5    5    5    5    6
                                           _____________________________
                and  rd, rs, rt           | 0 | rs | rt | rd | 0 | 0x24 |

                                             6    5    5        16
                                           _____________________________
                andi rt, rs, immediate    | 0xc | rs | rt |  immediate  |

                                            6   5    5         16
                                           _____________________________
                beq  rs, rt, offset       | 4 | rs | rt |    offset     |

                                            6   5    5    5    5    6
                                           _____________________________
                sub  rd, rs, rt           | 0 | rs | rt | rd | 0 | 0x22 |

                                            6   5    5    5    5    6
                                           _____________________________
                add  rd, rs, rt           | 0 | rs | rt | rd | 0 | 0x20 |

                                            6    5    5       16
                                           _____________________________
                addi rt, rs, immediate    | 8 | rs | rt |   immediate   |

                                            6             26
                                           _____________________________
                j    target               | 2 |         target          |

                                            6   5    5    5    5    6
                                           _____________________________
                slt  rd, rs, rt           | 0 | rs | rt | rd | 0 | 0x2a |

                                             6     5    5        16
                                           _____________________________
                lw   rt, rs[offset]       | 0x23 | rs | rt |   offset   |

                                             6     5    5        16
                                           _____________________________
                sw   rt, rs[offset]       | 0x2b | rs | rt |   offset   |

                ::EXTRA INSTRUCTIONS::

                                            6    5            21
                                           _____________________________
                input  rs                 | 4 |  rs  |        0         |

                                            6    5            21
                                           _____________________________
                output rs                 | 4 |  rs  |        1         |

            */
            op[5:0] = instruction[31:26];
            case(op)
                0: /* R-type */
                    begin
                        rs = instruction[25:21];
                        rt = instruction[20:16];
                        rd = instruction[15:11];
                        shamt = instruction[10:6];
                        funct = instruction[5:0];
                        instruction_type = 2'b00;
                    end

                1: /* END OF CODE */
                    begin
                        disable loop_block;
                    end

                2: /* J-type */
                    begin
                        target = instruction[25:0];
                        instruction_type = 2'b10;
                    end

                4: /* EXTRA */
                   begin
                        rs = instruction[25:21];
                        funct = instruction[20:0];
                        instruction_type = 2'b11;
                    end

                default: /* I-type */
                    begin
                        rs = instruction[25:21];
                        rt = instruction[20:16];
                        immediate_offset = instruction[15:0];
                        instruction_type = 2'b01;
                    end
            endcase

            // 4\. Fetch operands, if any, usually from registers
            case(instruction_type)
                2'b00: /* R-type */
                    begin
                        rs_value = registers[rs];
                        rt_value = registers[rt];
                    end

                2'b01: /* I-type */
                    begin
                        rs_value = registers[rs];
                    end
                2'b11: /* EXTRA */
                    begin
                        if(funct == 1) rs_value = registers[rs];
                    end
            endcase

            // 5\. Perform the operation
            case(instruction_type)
                2'b00: /* R-type */
                    begin
                        case(funct)
                            2'h20: /* add  rd, rs, rt */
                                begin
                                    rd_value = rs_value + rt_value;
                                end
                            2'h22: /* sub  rd, rs, rt */
                                begin
                                    rd_value = rs_value - rt_value;
                                end
                            2'h24: /* and  rd, rs, rt */
                                begin
                                    rd_value = rs_value & rt_value;
                                end
                            2'h25: /* or    rd, rs, rt */
                                begin
                                    rd_value = rs_value | rt_value;
                                end
                            2'h2a: /* slt  rd, rs, rt */
                                begin
                                    rd_value = rs_value < rt_value? 1 : 0;
                                end
                        endcase
                    end

                2'b01: /* I-type */
                    begin
                        case(op)
                            4: /* beq  rs, rt, offset */
                                begin
                                    if(rs_value < rt_value) PC = immediate_offset;
                                end
                            8: /* addi rt, rs, immediate */
                                begin
                                    rt_value = rs_value + immediate_offset;
                                end
                            1'hc: /* andi rt, rs, immediate */
                                begin
                                    rt_value = rs_value & immediate_offset;
                                end
                            1'hd: /* ori  rt, rs, immediate */
                                begin
                                    rt_value = rs_value | immediate_offset;
                                end
                            2'h23: /* lw   rt, rs[offset] */
                                begin
                                    rt_value = memory[rs + immediate_offset];
                                end
                            2'h2b: /* sw   rt, rs[offset] */
                                begin
                                    memory[rs + immediate_offset] = rt_value;
                                end
                        endcase
                    end

                2'b10: /* J-type */
                    begin
                        case(op)
                            2: /* j    target */
                                begin
                                    PC = target;
                                end
                        endcase
                    end

                2'b11: /* EXTRA */
                    begin
                        case(funct)
                            0: /* input  rs */
                                begin
                                    rs_value[7:0] = Switches;
                                end

                            1: /* output rs */
                                begin
                                    LEDs = rs_value[7:0];
                                end
                        endcase
                        if(funct == 1) rs_value = registers[rs];
                    end
            endcase

            // 6\. Store the results
            case(instruction_type)
                2'b00: /* R-type */
                    begin
                        registers[rd] = rd_value;
                    end
                2'b01: /* I-type */
                    begin
                        case(op)
                            8: /* addi rt, rs, immediate */
                                begin
                                    registers[rt] = rt_value;
                                end
                            1'hc: /* andi rt, rs, immediate */
                                begin
                                    registers[rt] = rt_value;
                                end
                            1'hd: /* ori  rt, rs, immediate */
                                begin
                                    registers[rt] = rt_value;
                                end
                            2'h23: /* lw   rt, rs[offset] */
                                begin
                                    registers[rt] = rt_value;
                                end
                        endcase
                    end
                2'b11: /* EXTRA */
                    begin
                        if(funct == 0) registers[rs] = rs_value;
                    end
            endcase

            #100; /* Delay */

        end
endmodule 
```

我`output reg[7:0] LEDs`在 FPGA 设备和 FPGA`input[7:0] Switches`的 8 个开关上连接了 8 个 LED。代码编译没有任何错误。但不幸的是，它不起作用。LED 应显示开关的状态，但它们始终处于关闭状态。

但是，当我尝试像块`LEDs[7:0] = 8'b11111111;`内部一样对 LED 状态进行硬编码时`initial`，LED 一直保持打开状态。而当我放在块`LEDs[7:0] = 8'b11111111;`内时`always`，LED 一直保持关闭状态。FPGA好像没有执行`always`block里面的代码，怎么回事？我是否以错误的方式实施设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:51:30.490

您可以使用 Verilog 模拟器来模拟此代码，但您将无法合成此代码并将其加载到 FPGA 上。正如评论所说，用于 FPGA 的可合成 Verilog 代码将有一个时钟。它应该有这样的结构

```
always @* begin : combinational_logic
    //...
end

always @(posedge clk) begin : sequential_logic
    //...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T00:17:02.227

您的代码数组的内容看起来也有问题。数组反汇编为：

```
BEQ     $16, $0, 0x4
BEQ     $16, $0, 0x8
J       0x0
BLTZ    $0, 0x4 
```

# css - 媒体查询最小宽度在 Opera、FF 和 IE 中未正确触发

> ID：10063787
> 
> 赞同：3
> 
> 时间：2012-04-08T15:02:35.467
> 
> 标签：css, firefox, width, viewport, media-queries

[我在页面http://test.lovecpokladu.cz/detail-mince?id=2461](http://test.lovecpokladu.cz/detail-mince?id=2461)上使用媒体查询，如下所示：

```
@media all and (min-width: 660px) {
    ... styles for box decoration ...
} 
```

并使用这个元视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
```

当我将 Chrome 的窗口大小调整为 660 像素（仅测量 HTML 页面，而不是窗口边框）时，样式会正确应用。样式不适用于 659px，这是正确的。

问题在于 Opera、IE 和 Firefox。只要宽度达到大约 642px，样式就会应用 :( 我观察到这些浏览器在更多内容时会更快地触发 min-width，即使在最大宽度条件下甚至在另一个网站（由我构建）上也是如此。

问题可能出在哪里？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:23:53.213

BODY 或 HTML 中的滚动条宽度问题 - 大约 16-18 像素。

该怎么办？

1.  错误的解决方案 - 设置为 BODY 或 HTML `overflow-y: scroll`。
2.  实验性解决方案 - 尝试将滚动条从 BODY 或 HTML 移动到第一个包装器 DIV。

像这样：

```
body, html { overflow: hidden; height: 100%; }
div.wrapper { overflow: auto; height: 100%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:25:46.303

我只是遇到了同样的问题并找到了解决方案，至少对我来说是这样。我没有对它进行很多测试，所以如果有什么我没有考虑到，请告诉我。

在媒体查询中，我将正文的最小宽度设置为媒体查询的最小宽度。有用！

```
@media only screen
and (min-width : 1060px) {
    body{
        min-width: 1060px;
    }
    #main-content{
        text-align: right;
        padding-left: 0;
    }
} 
```

我在这里为这个问题和解决方案做了一个例子：

[http://gehirnstroem.at/media-query.htm](http://gehirnstroem.at/media-query.htm)

[http://gehirnstroem.at/media-query-solved.htm](http://gehirnstroem.at/media-query-solved.htm)

# php - 没有外键约束的 Doctrine 2 关联

> ID：10063792
> 
> 赞同：11
> 
> 时间：2012-04-08T15:03:16.127
> 
> 标签：php, database, symfony, doctrine-orm

我正在将遗留的 PHP 应用程序转换为 Symfony 2。目前应用程序数据不是很一致，所以我想避免创建外键约束。我的“产品”实体类中有以下注释：

```
class Product {

  // some definitions

  /**
   * @ORM\ManyToOne(targetEntity="Manufacturer")
   * @ORM\JoinColumn(name="manufacturer_id", referencedColumnName="id" )
   */
  private $Manufacturer;
} 
```

当我这样做时`app/console doctrine:schema:update`，我得到了 SQL 命令

```
 ALTER TABLE products ADD CONSTRAINT FK_F6FA18741C3BF575 
   FOREIGN KEY (manufacturer_id) REFERENCES manufacturer(id); 
```

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-06T14:02:28.683

我最近不得不经历同样的过程，幸运的是有一个简单的解决方案，只需添加`nullable=true`到列的注释中。

只要现有数据有效，这将起作用，在我的情况下，我必须将 0 更改为 NULL，并将不再存在的键更改为 NULL。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T15:12:01.513

基本上你不能阻止生成 sql 命令。至少不是不深入研究 Doctrine 代码。

但是，您不需要将约束实际应用于您的数据库。没有它们，D2 也能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T12:41:23.827

您应该省略 ManyToMany 和 JoinColumn 定义，并使用扩展自动生成的产品存储库的公共 getManufacturer 方法处理自定义产品存储库中的制造商属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T13:03:28.413

我对相同的命令有问题。我得到了例外：

> SQLSTATE[HY000]: 一般错误: 1005 无法创建表 'xxx.#sql-66c_3e' (errno: 150)

对我来说，它有助于将该列声明为唯一（在您的案例 ID 中）。

现在`app/console doctrine:schema:update`再次运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-09T08:07:51.257

您必须将丢失的外键设置为空，然后您可以设置约束。以下查询为您提供数据集中要更改的 ID：

```
select p.id from product p
left join manufacturer m on m.id=p.manufakturer_id
where m.id is null 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-05-31T08:05:21.580

尝试添加 onDelete="CASCADE" 之类的

```
* @ORM\JoinColumn(name="manufacturer_id", referencedColumnName="id", onDelete="CASCADE") 
```

# php - 使用 json_encode 发送 html 最后返回“null”字符串

> ID：10063798
> 
> 赞同：1
> 
> 时间：2012-04-08T15:03:58.403
> 
> 标签：php, jquery, ajax, json, wordpress

我正在使用它来加载 php 函数并将它们发送到插件中的 javascript，例如：

```
function me_nav_query_submit() {

    $urlcall = nav_me_paises(); /* fetches a large html string */
    $response = json_encode($urlcall); /* encode to display using jQuery */

    //header( "Content-Type: application/json" );
    echo $response;

    exit;
} 
```

我在页面上插入 html，使用

```
function(response) {
    jQuery('#navcontainer').html(response);
} 
```

一切正常，除了我在结果的最后得到一个“空”字符串。

`json_encode()`文档讨论了非 utf-8 字符上的空字符串，但情况似乎并非如此。我也试过使用`utf8_encode()`没有成功。我在这里阅读了很多关于 SO 的其他问题，但其中大多数要么谈论返回为 null 或错误 UTF-8 编码的给定值，在我的情况下一切正常，然后将“null”附加到末尾。

**注意：**在 WP Codex 中建议定义 header() 调用，但我评论它是因为它给出了“headers already sent”错误。

有任何想法吗？

**编辑**这是调用的函数：

```
function nav_me_paises() {
    ?>
   <ul class="navcategorias">
        <?php $tquery = $_POST['wasClicked']; ?>
        <?php $navligas = get_terms($tquery,'hide_empty=0') ?>
        <?php foreach ($navligas as $liga) : ?>
            <?php $link = get_term_link($liga); ?>
            <li class="liga"><a href="<?php echo $link; ?>" ><?php echo $liga->name; ?></a></li>
        <?php endforeach; ?>
    </ul>
    <?php
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:14:21.517

nav_me_paises() 没有返回任何东西。html 块被视为输出！

```
function nav_me_paises() {
 $output = '<ul class="navcategorias">';
 $tquery = $_POST['wasClicked'];
 $navligas = get_terms($tquery,'hide_empty=0')
 foreach ($navligas as $liga) {
   $link = get_term_link($liga);
   $output .= '<li class="liga"><a href="'.$link.'" >'.$liga->name.'</a></li>';
  }
  $output .='</ul>';
  return $output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:14:48.263

`nav_me_paises()`不返回任何东西。将这个“无”传递`json_encode()`给给`"null"`。转换函数，使其返回 HTML 而不是输出它

```
function foo()
{
};

var_dump(json_encode(foo())); 
```

> ```
> string(4) "null" 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:19:56.977

另外，如果它只是纯 HTML，为什么是 json 呢？发给JS就行了，它会是一个字符串存储在一个变量中，你正常处理。

我想你想做的就是把 HTML 放在某个 div 中，因为你不会将它解析成 DOM 并处理它的元素......因为如果你这样做，你就不会使用 HTML。

# iphone - 无法处理自定义 URL 方案时提供故障转移 URL

> ID：10063801
> 
> 赞同：2
> 
> 时间：2012-04-08T15:04:17.507
> 
> 标签：iphone, objective-c, ios, app-store, custom-url

我有两个我构建的 iPhone 应用程序，它们有自己的自定义 URL 并且在应用程序商店中。我们称它们为 App A 和 App B。

App A 的界面是一个 UIWebView，它从我运行的远程服务器获取其标记。我想在应用程序 A 中实现的行为是这样的：

*   如果使用 App B 的自定义 URL 生成链接，并且在设备上安装了 App B，请打开 App B。这很容易通过检查完成`UIApplication canOpenURL:`，如果返回`YES`，则调用`UIApplication openURL:`.

*   如果 App B 的自定义 URL 生成链接，并且设备上没有安装 App B，则转到 App B 的应用商店页面。

以下是我打算如何处理第二个：

*   在自定义 URL 中包含一个 URL 参数，该 URL 包含指向 App B 的应用商店页面的链接。如果`canOpenURL:`返回`NO`整个 URL，则打开该参数指定的 URL。

那应该行得通。但这感觉有点 hacky，因为这意味着 App A 必须知道如何解析 App B 的自定义 URL 以检索备用链接。这似乎是不太理想的封装。`canOpenURL:`返回时我应该使用其他约定来提供故障转移 URL`NO`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T01:10:35.080

您是否总是在 AppA 中为 AppB 打开这些 URL？

如果是这样，那么为什么需要在 URL 中添加指向 AppB 的 App Store 页面的链接？

为什么 AppA 不能“知道” AppB 的 App Store URL，如果“canOpenURL”对自定义 URL 方案返回 NO，那么它只会将用户发送到该 App Store 页面？

这似乎是一个更清洁的解决方案。

PS：我知道这是一个老问题，但这个问题有几个赞成票，还没有得到回答，所以也许这会对某人有所帮助......

# android - Android 应用程序中的选项菜单布局

> ID：10063803
> 
> 赞同：2
> 
> 时间：2012-04-08T15:04:49.177
> 
> 标签：android, list, layout, menu, options

我是 Android 开发新手，我已经搜索过我的问题 - 我想我没有使用正确的关键字 :(

我想在我的应用程序中有这样的菜单：

![在此处输入图像描述](../Images/14fa7d4daf62f1c594ede4dc29d42dd6.png)

我得到的是：

![在此处输入图像描述](../Images/e1aea21553fcb696be4ebd74969cd05d.png)

第一个屏幕截图是在 Google 制作的计算器应用程序中拍摄的。

现在的问题是：我如何按照他们的方式创建它？我检查了谷歌，这个页面，developer.android.com ~ 没有:(

我查了一下，如何为标准创建自定义视图

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();       
    inflater.inflate(R.menu.mainmenu, menu);
    return true;
} 
```

但这总是看起来几乎一样，除了背景颜色，“一行中有多少项目”等 - 不像我想要的那样。

* * *

好的，查看 Google 的示例源，我发现它有问题

```
 <activity
        android:theme="@android:style/Theme.NoTitleBar" > 
```

在我的 AndroidManifest.xml

如果我将其更改为

```
 <activity
        android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen" > 
```

它完美地工作。但这会导致另一个问题......

使用 Theme.NoTitleBar 我得到了一个漂亮的 TabWidget： ![在此处输入图像描述](../Images/4d8a04da06053611b7e515d8394ed4c3.png)

使用 Theme.Holo.NoActionBar.Fullscreen 我得到了这个： ![在此处输入图像描述](../Images/faf411c99b2c59101f3a0fa438b48acd.png)

这也会影响我所有的按钮等等:(有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:24:04.983

你没有做错什么。外观只是在各种 android 版本上发生了变化。

计算器屏幕截图应在 Android 4 设备上拍摄，而您的屏幕截图应在 android 2.3 设备上拍摄。您可以通过使用各种 android 版本 (1) 设置模拟器并在其中运行您的应用程序来测试这一点。使用相同的代码库时，外观会相应改变。

我建议不要改变这一点，您的用户很可能已经习惯了他们特定 android 版本的外观和感觉。在这里脱颖而出不是一件好事（恕我直言）。

*(1) 对 2.2 进行测试。或更低，2.3 和 4.0。这些是主要的变化。*

# actionscript-3 - 保存文本字段输入

> ID：10063804
> 
> 赞同：1
> 
> 时间：2012-04-08T15:04:50.567
> 
> 标签：actionscript-3, flash, fla

在问我的问题之前，我会稍微解释一下……我已经创建了许多可以从主菜单加载和卸载的游戏。

玩家在玩任何游戏之前在主菜单上输入他们的名字，当玩家完成游戏时，我想节省他们的时间（完成游戏所花费的时间）并将这段时间卸载回主菜单。

有什么方法可以将使用 AS3 的时间保存到 word 文档或类似的东西中？我无法使用 php 将时间发送到我的网站，因为这些游戏将在比赛中使用，并且都需要与 Internet 配合使用。

有什么想法吗？

编辑：

```
 var dataloader:URLLoader = new URLLoader();
    var dataarray:Array = new Array(); // do this where you intialise other vars

    function preparesave() 
    {
        dataloader.load(new URLRequest("savedata.txt"));
    }

    dataloader.addEventListener(Event.COMPLETE,savedata);

    function savedata (event:Event) 
{
    dataarray = event.target.data.split(/\n/);
    dataarray.push(MyTimer);

    var bytes:ByteArray = new ByteArray();
    var fileRef:FileReference = new FileReference();

    for (var i = 0; i < dataarray.length;i++) 
    {
        bytes.writeMultiByte(dataarray[i] + "\n", "iso-8859-1");
        bytes.writeMultiByte('English Game Time: ',"iso-8859-1");
        bytes.writeMultiByte(HourText.text.toString(),"iso-8859-1");
        bytes.writeMultiByte(':',"iso-8859-1");
        bytes.writeMultiByte(MinuteText.text.toString(),"iso-8859-1");
        bytes.writeMultiByte(':',"iso-8859-1");
        bytes.writeMultiByte(SecondText.text.toString(),"iso-8859-1");
    }

    fileRef.save(bytes,"savedata.txt")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:28:22.120

您可以为此目的使用 cookie(sharedObject)。请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/SharedObject.html)

```
var data:SharedObject = SharedObject.getLocal("userdata");
    data.startTime = new Date().time; 
```

如果您再次需要 startTime，您可以通过 cookie 和变量名检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:34:02.723

对于少量数据，您最好通过使用 SharedObjects 来使用 automaticoo 的解决方案。它们需要最少的时间来设置，并且是存储少量数据的有效方式。

但是，如果它不适合您，您可以随时加载/保存到文本文件。您可以使用 ByteArrays 和 FileReferences 来做到这一点。

由于您提出了保存到 word 文件，我建议保存到文本文件将是实现目标的最佳方式（尽管除了您的 word doc. 建议之外，我不确定..您的目标有点不清楚)

这是保存到文本文件的非常快速的演示。如果您也需要帮助加载它，请告诉我。

```
function savedata() {
var bytes:ByteArray = new ByteArray();
var fileRef:FileReference = new FileReference();
bytes.writeMultiByte(playername + "\n", "iso-8859-1");
bytes.writeMultiByte(playerscore.toString(),"iso-8859-1");
fileRef.save(bytes,"savedata.txt");
} 
```

这很简单。通过使用 writeMultiByte，我们可以在保存文本文件之前根据需要写入尽可能多的数据！如果您有需要保存的数据数组，这将特别有用。

无论如何，“iso-8859-1”只是对正在使用的字符集/文件格式的引用。我不确定你是否可以简单地写 utf-16 等。我一直只是使用就像上面写的那样。

此处文本文件中的结果如下：

彼得

9547（但上升一行）

要加载，您可以按行拆分数据，从而生成一个包含字符串和整数/数字的数组（但是您的分数可能会起作用）。再次，让我知道您是否需要帮助。

我不确定这是否是实现您所追求的最有效的方法，因为您的目标对我来说并不完全清楚，但它对我自己来说是一种非常有用的方式来存储大量数据，我'如果您将所有玩家的分数相加，我猜您想要这样做。

编辑：

**好的，对于您在下面提出的问题：**

1.  保存多个用户的分数很简单。只需有一个数组从文本文件加载数据（如果文本文件存在），然后将新分数添加到数组的末尾，然后保存回文本文件。

这是一个例子：

```
var dataloader:URLLoader = new URLLoader();
var dataarray:Array = new Array(); // do this where you intialise other vars

function preparesave() {
    dataloader.load(new URLRequest("savedata.txt"));
}

dataloader.addEventListener(Event.COMPLETE,savedata);
function savedata (event:Event) {
    dataarray = event.target.data.split(/\n/);
    dataarray.push(playername);
    dataarray.push(playerscore);
    var bytes:ByteArray = new ByteArray();
    var fileRef:FileReference = new FileReference();
    for (var i = 0; i < dataarray.length;i++) {
        bytes.writeMultiByte(dataarray[i] + "\n", "iso-8859-1");
    }
    fileRef.save(bytes,"savedata.txt")
} 
```

这样做是获取任何现有的保存数据，将其推送到数组（保存文件中的一行是一个数组数据条目），添加适当的数据，然后将其推送回保存文件。

(2) 要在主菜单中加载它，只需将此代码放在主菜单的框架中。

```
dataloader.load(new URLRequest("savedata.txt"));
dataloader.addEventListener(Event.COMPLETE,loaddata);
function loaddata (event:Event) {
    dataarray = event.target.data.split(/\n/);
} 
```

这会将所有现有数据加载到数组中。从那时起你做什么取决于你。

# iphone - 理解 Core Data 中的一对多关系

> ID：10063808
> 
> 赞同：0
> 
> 时间：2012-04-08T15:05:25.153
> 
> 标签：iphone, objective-c, ios, core-data

我有一个实体`Tag`和一个实体`Note`。一个`note`对象可以有几个`tags`，一个`tag`对象可以有几个`notes`。所以说现在我有一个`Note`对象`note1`，我有`tag`对象`tag1`和`tag2`. 我添加到对象中`note1`的注释。然后我也添加到对象。我的问题是，系统范围内只有 1 个实例吗？还是现在有两份，一份用于，一份用于？`set``tag1``note1``tag2``note1``note1``tag1``tag2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:14:41.437

好吧，可能有也可能没有超过 1 个对`note1`系统范围的引用（您可能已经在其他地方获取了对象），但两者都`tag1`将`tag2`具有*相同* `note1`的对象（这就是您对相同“实例”的意思，对吗？） . 那个——如果你已经正确配置了关系——将有两个标签，即`tag1`和`tag2`。

# jquery - 不显眼的 javascript 和动态 html

> ID：10063812
> 
> 赞同：1
> 
> 时间：2012-04-08T15:05:54.953
> 
> 标签：jquery, html, dynamic, unobtrusive-javascript

我正在寻找一种`data-*`在动态 html 场景中制作不显眼的 javascript（通过属性）的方法。假设我们有一个`input`代表 jquery-ui 日期选择器的元素：

```
<input type="date" data-min-date="today" /> 
```

以及起作用的js：

```
(function(){
    $(function () {
        $("input[type=date]").each(function () {
            var el = $(this);
            el.datepicker(el.data());
        });
    });
})(jQuery); 
```

现在我需要不显眼的跨浏览器方式将裸输入转换为日期选择器。输入将被动态添加。一般来说，我无法控制添加日期选择器的代码。通常，代码将通过[jquery.ajax.unobtrusive](http://nuget.org/packages/jQuery.Ajax.Unobtrusive)或[jquery-pjax](http://pjax.heroku.com/)作为服务器端预渲染 html 注入（它们都使用 jQuery.html() 方法）。但我需要更通用的解决方案，它适用于所有支持 jQuery 的场景。

我查看了[突变事件](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-MutationEvent)，但 IE 不支持它们。

完整的 jsfiddle-example [http://jsfiddle.net/zv9Rt/1/](http://jsfiddle.net/zv9Rt/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:37:17.723

使用[$.delegate](http://api.jquery.com/delegate/)：

```
(function(){
  $(function () {
    $('body').delegate("input[type=date]", function () {
        var $el = $(this);
        $el.datepicker($el.data());
    });
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:38:03.973

只需使用[.on()](http://api.jquery.com/on/)。

这是一个示例：http: [//jsfiddle.net/H7ZUa/1/](http://jsfiddle.net/H7ZUa/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:18:31.643

使用[Livequery](http://docs.jquery.com/Plugins/livequery) •[文档](http://docs.jquery.com/Plugins/livequery#API_Documentation)。

```
$("input[type=date]").livequery(function() {
    var el = $(this);
    el.datepicker(el.data());
}); 
```

# delphi - 将字符串与数字相乘

> ID：10063819
> 
> 赞同：1
> 
> 时间：2012-04-08T15:07:00.633
> 
> 标签：delphi, delphi-7

我如何将一个字符串乘以一个数字以在标签标题中实现该字符串的 n 次重复，即如果 n = 5 则 's'*n= 'sssss' 将成为标签标题。

沿着这些线的任何东西都会返回运算符不适用于操作数类型的错误。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T15:10:45.763

没有内置运算符可以满足您的需求。您的代码可以在 Python 中运行，但不能在 Delphi 中运行。

如果您的字符串是单个字符，那么您可以使用[`StringOfChar`](http://docwiki.embarcadero.com/Libraries/en/System.StringOfChar)：

```
Caption := StringOfChar('s', n); 
```

对于更长的输入字符串，请使用[`DupeString`](http://docwiki.embarcadero.com/Libraries/en/System.StrUtils.DupeString)单元`StrUtils`：

```
Caption := DupeString('blah', n); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T15:09:41.100

Delphi 不允许这种语法。但是，有一个名为 的函数`DupeString`，`StrUtils.pas`这相当于同一件事：

```
Label1.Caption := DupeString('test', 4); 
```

# c# - 使用 Outlook 的 C# 发送电子邮件

> ID：10063821
> 
> 赞同：0
> 
> 时间：2012-04-08T15:07:21.220
> 
> 标签：c#

我想编写使用 Outlook 发送电子邮件的应用程序，我找到[了这个](http://jptarqu.blogspot.com/2010/06/send-email-from-c-using-outlooks-com.html)链接。我试试这个，它对我来说是完美的，但我在这里唯一想念的是将文件附加到邮件的选项，有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:30:26.643

最好改用 MailMessage。
这里有一个关于如何将其与附件一起使用的示例（向下滚动到“示例”）：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)

您不仅会获得一个用于发送邮件的托管框架，而且运行代码的任何人都不需要安装和运行 Outlook。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:28:51.283

如果您因某种原因而无法使用 Outlook，请尝试以下操作：

```
using Outlook = Microsoft.Office.Interop.Outlook;

int pos = (int)email.Body.Length + 1;
int attType = (int)Outlook.OlAttachmentType.olByValue;
email.Attachments.Add("file.txt", attType, pos, "File description."); 
```

在哪里：

```
Outlook.MailItem email = (Outlook.MailItem)_outlookAppInstance.CreateItem(Outlook.OlItemType.olMailItem); 
```

# php - 仅从数组中删除带有数字的值 - PHP

> ID：10063822
> 
> 赞同：2
> 
> 时间：2012-04-08T15:07:33.377
> 
> 标签：php, arrays, digits

我有一个这样的数组

```
array(
      1=>hello,
      2=>foo,
      3=>192,
      4=>keep characters AND digits like a1e2r5,
); 
```

我要做的就是删除仅包含数字的行`(3=>192)`，并返回一个像这样的数组：

```
array(
      1=>hello,
      2=>foo,
      3=>keep characters AND digits like a1e2r5,
); 
```

我尝试使用**array_filter**但没有得到它的工作。有人可以告诉我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T15:14:34.763

```
$data = array( 1 => "hello", 
               2 => "foo", 
               3 => "192", 
               4 => "keep characters AND digits like a1e2r5", 
             );

$result = array_filter( $data, 
                        function($arrayEntry) { 
                            return !is_numeric($arrayEntry);
                        }
                      ); 
```

或者使用更现代的 PHP，带有箭头函数：

```
$result = array_filter( $data, 
                        fn($arrayEntry) => !is_numeric($arrayEntry)
                      ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:10:07.183

您可以使用循环和 intval 函数。

```
$filteredArray = array();
foreach($array as $element){
    //this works because PHP is weakly typed
    if(intval($element) != $element){
        $filteredArray[] = $element;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:20:39.377

你确定你正确使用了array_filter吗？这是您问题的最佳解决方案。

```
// named callback for backwards compatibility, but use an anonymous function
// if you have a high enough php version.
function callback($item) { return !is_numeric($item); }

$result = array_filter($a, 'callback');
print_r($result);

// optional - causes numeric keys to be in order
$result = array_values($result);
print_r($result); 
```

使用来自问题的示例输入作为 $a 的输出：

```
Array
(
    [1] => hello
    [2] => foo
    [4] => keep characters AND digits like a1e2r5
)

Array
(
    [1] => hello
    [2] => foo
    [3] => keep characters AND digits like a1e2r5
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T03:50:55.460

我很惊讶没有人在任何答案中提到这一点：使用数字测试并不是一个完整的解决方案。如果它们被评估为数字，则使用数字测试将删除一些包含非数字字符的元素。具体来说，{e, -, .}

```
$data=array(
  1=>'hello',
  2=>'foo',
  3=>'192',
  4=>'keep characters AND digits like a1e2r5',
  5=>'1.4',
  6=>'-42',
  7=>'1e2',
  8=>'1.23e4',
); 
function callback1($arrayEntry) { 
    return !is_numeric($arrayEntry);
}
$result = array_filter( $data, 'callback1');

echo '<pre>';
print_r($result);

echo '<hr>';
function callback2($arrayEntry) { 
    return !preg_match('/^[0-9]+$/', $arrayEntry);
}
$result = array_filter( $data, 'callback2');
print_r($result); 
```

# html5boilerplate - PHP 文件中的 HTML5Boilerplate 构建脚本 CSS 参考

> ID：10063824
> 
> 赞同：1
> 
> 时间：2012-04-08T15:07:40.540
> 
> 标签：html5boilerplate

我正在尝试使用 Html5Boilerplate 构建我的网站，并且大多数情况下它都按我的意愿进行。但是，我仍然无法在我的 PHP 文件中更新 CSS 引用。

我的文件夹结构如下：

```
 css/style.css
    page/header.php 
```

现在在 header.php 文件中我有：

```
 <!-- scripts concatenated and minified via ant build script-->
        <link rel='stylesheet' href='css/style.css'/>
    <!-- end scripts--> 
```

我希望构建的 header.php 文件具有以下内容：

```
 <link rel='stylesheet' href='css/a4cd4c0.css'/> 
```

但不幸的是，它没有更新参考。

在 project.properties 文件中，我有： file.pages = page/* 它正在剥离 header.php 文件中的注释，所以我知道构建脚本不会跳过该文件。

我尝试过各种变体，例如：

```
 <!-- CSS concatenated and minified via ant build script-->
        <link rel='stylesheet/css' type='text/css' href='css/style.css'/>
    <!-- end CSS--> 
```

但这也没有起到任何作用。. .

有没有人尝试在他们的 PHP 文件中使用 Html5Boilerplate 更新他们的 CSS 文件？我可以尝试什么来让构建脚本更新引用？我的最后一个问题是：如果我使用以下行来包含我的 CSS，我可以让构建脚本更新引用吗？

```
 <link rel='stylesheet/css' type='text/css' href='<?PHP echo(CSS_PATH) ?>style.css'/> 
```

**编辑**：通过在 build.xml 文件中摆弄，我不仅让它工作，而且我的 php echo 也能正常工作。在 build.xml 文件的第 623 行附近，我更改了以下行：

```
 <replaceregexp match="&lt;link rel=['&quot;]?stylesheet['&quot;]?\s+href=['&quot;]?(.*)/${file.root.stylesheet}(?:\?.*)?['&quot;]?\s*&gt;" 
        replace="&lt;link rel='stylesheet' href='\1/${css.sha}.css'&gt;" flags="m"> 
```

至

```
 <replaceregexp match="href=['&quot;]?(.*\?&gt;)${file.root.stylesheet}(?:\?.*)?['&quot;]?" 
        replace="href='\1${css.sha}.css'" flags="m"> 
```

希望这可以帮助遇到类似问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:32:19.070

根据您使用的 HTML5Boilerplate 版本，答案很可能在于删除 .htaccess 文件中专门关于“基于内置文件名的缓存清除”的注释。

这是[HTML5 Boilerplate 4.1](http://html5boilerplate.com/)的代码部分。

```
`<IfModule mod_rewrite.c>
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.+)\.(\d+)\.(js|css|png|jpg|gif)$ $1.$3 [L]
 </IfModule>` 
```

不建议编辑或修改 build.xml 文件；

*   编辑 .htaccess 文件效率更高。
*   您增加了无法通过 HTML5 样板的更新和发布来验证您的应用程序的风险。

# javascript - javascript中的二维数组通过ajax发布到服务器

> ID：10063826
> 
> 赞同：1
> 
> 时间：2012-04-08T15:07:46.703
> 
> 标签：javascript, ajax, jquery, asp.net-ajax

我在javascript中有一个二维数组。

```
 var erg = new Array();
        for (var i in val) {
            erg[i] = new Array();
            for (var j in val[i]()) {
                erg[i][j] = val[i]()[j]();
            }

        } 
```

但是当我想将它发布到服务器时，只有一维数组被传递。(尔格[i])

```
 $.ajax({
            url: '/Document/UpdateTableValues',
            type: 'POST',
            data: {
                docid: documentId,
                page: self.CurrentPage(),
                elementid: element.Values()[1](),
                text: erg
            },
            success: function (data) {
                self.SaveState("Dokument gesichert");
            }
        }); 
```

如何将整个阵列发送到服务器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:10:20.727

只有一个错误：使用`text: erg +""`而不是`text: erg`.

# spring-mvc - JSR 验证 API 中的本地化支持，用于验证失败时的消息

> ID：10063827
> 
> 赞同：1
> 
> 时间：2012-04-08T15:08:23.653
> 
> 标签：spring-mvc, bean-validation, jsr

我正在使用 spring 3.0.2 来开发一个简单的基于 web 的应用程序，比如 twitter。我的服务器端验证与 JSR 验证 API 配合得很好，但是在验证失败时我找不到任何方法在 JSR 验证 API 中国际化消息。

我在代表应用程序中的用户的模型类**Spitter.java上使用以下注释。**

> 公共类 Spitter 实现 Serializable{
> 
> ```
> private Long id;
> 
> @Size(min=8, max=15, message="some msg..")
> @Pattern(regexp="^[a-zA-Z0-9]+$", message="some msg..")
> private String username;
> 
> @Size(min=8, max=15, message="some msg..")
> private String password;
> 
> @Size(min=3, max=15, message="some msg..")
> private String name;
> 
> @Pattern(regexp="^$",message="some msg..")
> private String email;
> 
> @NotNull(message="some msg..")
> @NumberFormat(style= NumberFormat.Style.NUMBER)
> @Min(value=14, message="some msg..")
> @Max(value=99, message="some msg..")
> private Integer age;
> 
> //getter setter not shown
> 
> } 
> ```

我在验证失败时检查了 JSR 验证 API 以获取本地化支持，但找不到相同的。

有什么办法可以实现国际化。

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T15:41:24.483

您可以将 ValidationMessages.properties 文件与适当定制的消息一起放入您的类路径中。您可以覆盖当前的消息集，例如：

```
javax.validation.constraints.NotNull.message=may not be null 
```

或者如果您想使用自己的自定义消息：

```
 @NotNull(message="{custom.message}") 
```

ValidationMessages.properties 文件中应存在的条目。

此信息在第 4.3.1.1 节中提供。JSR 303 规范

# continuous-integration - 哪些构建服务器可以与 NAT 后面的工作人员一起运行？

> ID：10063828
> 
> 赞同：5
> 
> 时间：2012-04-08T15:08:28.573
> 
> 标签：continuous-integration, nat, build-server

我正在寻找构建服务器，自动化服务器的持续集成，这些服务器可以具有**位于 NAT 之后**的客户端（工作人员）并且需要对客户端进行**非 root**访问。

这意味着工作是连接到服务器并要求新工作的人，而不是相反的人。

我知道应该可以设置 VPN 或反向 ssh 解决方案，但这超出了这个问题的范围。我只是在寻找简单的设置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T21:46:51.703

[这是 Jenkins 文档中](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-Masteronpublicnetwork%2Cslaveswithinfirewall)关于访问防火墙后面的从站的内容。不过，我自己从未尝试过在防火墙后面运行从属服务器。

如果您决定使用 JNLP，您将需要考虑如何启动（或者，更重要的是，重新启动）您的从站（根据我的经验，从站连接可能会时不时地无缘无故地中断）。例如，我们通过 VNC 连接到从机并通过快捷方式重新启动从机（[无头](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds#Distributedbuilds-Launchslaveagentheadlessly)运行从机）。

# google-app-engine - 使用 JDO 将 GAE 数据存储结果存储到 FlexTable

> ID：10063829
> 
> 赞同：0
> 
> 时间：2012-04-08T15:08:28.790
> 
> 标签：google-app-engine, gwt, jdo, gwt-rpc

这似乎是一项简单的任务，但在搜索文档的某个地方 - 我错过了连接。

我有一个存储在 GAE 中的菜单，可以返回查询结果：

```
public String[] getMeals() throws NotLoggedInException {
    checkLoggedIn();
    PersistenceManager pm = getPersistenceManager();
    List<String> meals = new ArrayList<String>();

    try {
        Query q = pm.newQuery(Meal.class, "user == u");
        q.declareParameters("com.google.appengine.api.users.User u");
        q.setOrdering("createDate");
        List<Meal> myMeals = (List<Meal>) q.execute(getUser());

        for (Meal myMeal : myMeals) {
            meals.add(myMeal.getMealID());
        }
    } finally {
        pm.close();
    }
    return (String[]) meals.toArray(new String[0]);
} 
```

有了这些结果，我想将它绑定到 FlexTable。使用 stockwatcher 示例，我设法将我的 ID 绑定到 FlexTable，但是我缺少如何将结果集中的其他字段与它绑定的概念。（我在GAE中的字段是mealID、mealType和mealDate）

从上面，我们可以看到我将 mealID 扔进了一个列表。我也知道我的其他字段*必须*存在于查询中，因为我没有做任何事情来过滤它们。事实上，如果我将代码更改为：

膳食。添加（myMeal.getMealID（），myMeal.getMealType（），myMeal.getMealDate（））；

它返回所有数据，但 flex 表将每个项目视为一个新行，而不是一行中的三个字段。

所以我的问题是：我应该如何捕获我的记录并将它们发送到我的 FlexTable 以便我可以将 FlexTable 绑定到结果集？

供参考，客户端代码：

```
private void loadMeals() {
    // load meals from server service MealService
    mealService.getMeals(new AsyncCallback<String[]>() {
        public void onFailure(Throwable error) {
            handleError(error);
        }
        public void onSuccess(String[] meals) {
            displayMeals(meals);
        }
    });

}

private void displayMeals(String[] meals) {
    for (String meal : meals) {
        displayMenu(meal, meal, meal);
    }
} 
```

flextable 填充如下：

餐ID | 餐食类型 | 用餐日期
1 | 1 | 1
2 | 2 | 2
3 | 3 | 3

我*希望*它像这样填充：

餐ID | 餐食类型 | 用餐日期
1 | 早餐 | 2012
年 12 月 22 日 2 | 午餐 | 2012年 12 月 22
日 3 | 零食 | 2012 年 12 月 23 日

提前感谢您的意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T21:13:27.533

[这个问题与通过 GWT RPC 传递类对象](https://stackoverflow.com/questions/958879/problems-passing-class-objects-through-gwt-rpc)的问题重复

按照该链接中的详细信息，以及 oDesk 的少量雇佣帮助让我继续前进。主要监督是需要 {appname}.gwt.xml 中的入口点类并将模型类放在共享包中。

# linq - 在 linq 中使用“from”属性

> ID：10063833
> 
> 赞同：3
> 
> 时间：2012-04-08T15:09:00.507
> 
> 标签：linq, linq-to-sql

在我的课堂上，我有一个名为“from”的属性，但我不能在我的 linq 语句中使用它？

有什么解决方案或者我必须更改我的属性名称？

```
lst1 = (from p in db.adv where p.isShowInMainPage && p.isShowInHeader && (p.from <= DateTime.Now)  orderby p.id descending select p);

lst2= (from p in db.adv where p.isShowInMainPage && !p.isShowInHeader orderby p.id descending select p); 
```

当我使用**p.from**时发生 编译错误：

```
Error   14  ; expected 
```

在 SQL 中，我们可以使用 [] ([from]) 。LINQ中是否有类似的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T15:15:37.157

开头的 (@from) 应该在 C# 中工作，在 VB.NET 中你使用 [from]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:46:48.813

您可以按照@Ales 所说的那样做，并在属性名称前使用@ 符号。或者，您可以将属性重命名为`From`使用 Pascal 大小写 - .NET[大写约定](http://msdn.microsoft.com/en-us/library/ms229043.aspx)设计指南建议对属性使用 Pascal 大小写。

# list - 了解 Swi-prolog 中的拆分

> ID：10063838
> 
> 赞同：3
> 
> 时间：2012-04-08T15:09:43.297
> 
> 标签：list, prolog

我有这个代码用于将输入列表分成两半。好像没问题。

```
halve(List,A,B) :- halve(List,List,A,B), !.
halve(B,[],[],B).
halve(B,[_],[],B).
halve([H|T],[_,_|T2],[H|A],B) :-halve(T,T2,A,B). 
```

好的，所以我尝试对其进行解码。开头很清楚：

“减半列表和 2 个逻辑变量”是这样的：

```
halve(List,A,B) 
```

(1) 然后继续这部分：

```
:- halve(List,List,A,B). 
```

这意味着，我正在从第一个列表中创建新的两个列表（列表、列表）还是什么？什么*确切地*代表“：-”？我猜新的列表 = 一半将是 A 和 B，对吧？

(2) 其次，拜托，我不太明白这两行：

```
halve(B,[],[],B).
halve(B,[_],[],B). 
```

也许你可以用一些例子来解释一下，好吗？

(3) 好吧，我希望经过你对（1）和（2）的解释，我会自己得到最后一部分……

```
halve([H|T],[_,_|T2],[H|A],B) :- halve(T,T2,A,B). 
```

非常感谢你帮助我。

* * *

好的，我们的第一个问题已经有了解决方案。长话短说，它的工作原理是这样的：

```
halve([1,2,3,4,5],[1,2],[3,4,5]). 
->true 
```

如果您注意到它将列表分成两半，但如果列表包含奇数个元素，则后半部分是较大的部分。

现在我想要获得的是让**第一个更大**。

所以我在想这个：

我要达到这个：

```
Halves_div([1,2,3],A,B).
A=[1,2],
B=[3]. 
```

假设我的输入是列表：[1,2,3]。所以我将从拆分列表的头部和尾部开始：`[H|T]`然后我将合并`H`新的空列表 - 我的第一半（`A`）。之后我有 A=[1]、B=[] 和 Input=[2,3]。

对于合并，我有：

```
merge([],List,List).
merge([H|T],List,[H|New]) :- merge(T,List,New). 
```

还有一件事-我需要检查第一半是否已经> =第二半，对吗？

所以这是我的想法，我希望你能帮助我的唯一一件事就是把它写在序言中。我有点困惑如何把它放在一起。

谢谢！

* * *

看来我的解决方案太复杂了，我找到了更好的东西！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T15:47:27.360

首先，Prolog 子句如下所示：

```
Head :- Body 
```

您可以将其解读为“`Head`如果`Body`”或“`Body`暗示`Head`”。

请注意，有时您只有

```
Head 
```

那是因为 Head 总是`true`。`Head`在这种情况下，我们宁愿称其为事实，而不是称其为子句。

所以在这里，我们有：

```
halve(List,A,B) :- halve(List,List,A,B). 
```

这意味着`halve(List, A, B)`如果为真，`halve(List, List, A, B)`则为真。具体来说，这只是一种委托 to 工作的`halve/3`方式`halve/4`，即所谓的工作者谓词。

为什么我们需要一个工作者谓词？好吧，因为在这里我们想使用另一个变量来计算我们的`A`和`B`项。但是我们不能这样做，`halve/3`因为 3 个参数点`halve/3`已经被输入列表 、`List`结果的前半部分和结果的后半部分`A`占用`B`。

关于这`List, List`件事，这只是说我们`halve/4`使用相同的第一个和第二个参数调用的一种方式，就像在任何编程语言中一样。

然后有趣的事情开始了。Prolog 将尝试证明`halve/4`对于某些给定参数是正确的。让我们来说明一下我们以`halve/3`这种方式调用的执行：

```
?- halve([1, 2], A, B). 
```

然后，如果您遵循我之前所说的内容，Prolog 现在将尝试通过以下参数`halve/3`证明这是真的：`halve/4``halve([1, 2], [1, 2], A, B).`

为此，Prolog 有 3 个选择。第一个选择是以下子句：

```
halve(B,[],[],B). 
```

显然，那是行不通的。因为当 Prolog 将尝试通过统一将调用者的第二个参数“放入”被调用者的第二个参数时，它会失败。因为 `[1, 2]`不能统一`[]`。

只剩下两个选择，下一个是：

```
halve(B,[_],[],B). 
```

同样的事情，Prolog 无法统一`[1, 2]`，`[_]`因为`_`它只是一个变量（如果您遇到问题，请参阅[我](https://stackoverflow.com/questions/8555289/what-is-the-difference-between-a-list-with-anything-and-anything/8555328#8555328)关于匿名变量的帖子）。`_`

因此，Prolog 必须找到解决您提出的问题的唯一机会是最后一个子句，即：

```
halve([H|T],[_,_|T2],[H|A],B) :- halve(T,T2,A,B). 
```

在这里，Prolog 会想办法统一事物，让我们看看是哪种方式：

*   我们必须与`[1, 2]`统一`[H|T]`。这意味着`H = 1.`和`T = [2].`
*   我们必须与`[1, 2]`统一`[_,_|T2]`。这意味着`T2 = [].`
*   现在我们开始使用下一个统一来构建我们的结果，即`A = [H|A']`（我准备了第二个`A`，因为变量是局部范围的，它们不一样）。在这里我们告诉我们，当我们从子句的主体计算结果时，我们将添加`H`到它。在这里`H`，`1`我们已经知道`A`will 的第一个元素是`1`。

Ok ok，统一成功，棒棒哒！我们可以进入条款的主体。它只`halve/4`是以递归方式调用这些值（如上计算）：

```
halve([2], [], A, B). 
```

在这里，我们重新开始。虽然这次事情会很快，因为 Prolog 的首选将是一个很好的选择：

```
halve(B,[],[],B). 
```

可以统一为

```
halve([2], [], A, B). 
```

具有这些值：`A = []`和`B = [2]`。

所以这是一个很好的步骤，我们现在达到了递归的“基本情况”。我们现在只需要从下到上构建我们的结果。还记得我们`halve/4`上面几步递归调用谓词的时候吗？我们已经说过 的第一个元素`A`是`1`。现在我们知道尾巴是`[]`，所以我们可以说`A = [1]`。我们没有说明任何特别的内容`B`，因此`B = [2]`结果保持不变。

既然我详细说明了执行，您可能想知道，为什么会这样？好吧，如果你注意的话，你会注意到第二个参数的`halve/4`通过速度是第一个参数的两倍。`[H|T]`与`[_, _|T2]`。这意味着当我们用第二个参数到达列表末尾时，第一个参数仍然在我们列表的中间。这样我们就可以把事情分成两部分。

我希望我能帮助你抓住这里工作中的一些微妙之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:57:19.353

`halve(List,A,B)`复制`List`to的前半部分`A`并将后半部分与`B`

当我们的列表长度为偶数时，这将是正确的：`halve(B,[],[],B).`

当 out 列表的长度为奇数时，这将是正确的：`halve(B,[_],[],B).`

```
halve([H|T],[_,_|T2],[H|A],B) :- halve(T,T2,A,B). 
```

在这里，我们设置 2 让我们在每一步中将它们称为“指针”，我们将一个元素从列表的开头复制到，`A`因为我们想要获得前半部分。
因为在每一步中，我们从列表中删除 2 个元素，`[_,_|T2]`当列表只有一个左元素或为空时，谓词将停止，然后它将列表的其余部分与`B`. 如果你看不懂使用`trace/0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T01:30:41.857

这个版本可能证明有用...

```
split_in_half(Xs, Ys, Zs) :-  length(Xs, Len),
Half is Len // 2,    % // denotes integer division, rounding down
split_at(Xs, Half, Ys, Zs).

split_at(Xs, N, Ys, Zs) :- length(Ys, N), append(Ys, Zs, Xs). 
```

# php - 调整我的代码以将用户带到搜索结果（如果有）

> ID：10063840
> 
> 赞同：0
> 
> 时间：2012-04-08T15:09:47.260
> 
> 标签：php

这是在页面标题中搜索我的标题的第一种形式。

```
<form action="index.php?cat=search_results&learn_id=1" method="post">
      <div id="topSearchBodyStyle">
        <input type="text" name="search" class="topSearchTextBackground" />
      </div>
      <div id="topSearchButtonStyle">
        <input type="submit" name="submit" class="topSearchButtonBackground" value="" />
      </div>
    </form> 
```

这是名为 searchPage.php 的页面

```
<?php 

    if (isset($_POST['search'])){ 
    $getSearch = clean_text($_POST['search']);
    $connectToDb = "select * from tutorials where tutorial_title like '%".$getSearch."%' and active=1"; 
    $searchResults = $db->query($connectToDb) or die($db->error);
    $numResultas = $searchResults ->num_rows;
        echo "<p class='counter_search'>Found : " . $numResultas . "</p>";
        switch ($numResultas) {

            case 0:
            include "searchPageAdvanced.php";
            break;

            case $numResultas >= 1:
            while($row = mysqli_fetch_array($searchResults)) {

            echo "<a class='counter_linkHeader' href='index.php?cat=tutorials_view&learn_id=5&tutorial_id=".$row['tutorial_id']."'>".$row['tutorial_title']."</a>";
            echo "<p class='counter_description'>";
            $your_desired_width=200;
            $description=$row['content'];
            if (strlen($description) > $your_desired_width) {$description = wordwrap($description, $your_desired_width); $description = substr($description, 0, strpos($description, "\n"))." ..."; } echo $description;
            echo"</p>";    
        }
            break;
            }

    }else{ 
    ?>
    <p>&nbsp;</p>
<table width="875" border="0">
  <tr>
    <td align="center" valign="middle"><img src="http://bytes.com/images/searchError.jpg" width="223" height="147" alt="search error" /></td>
  </tr>
  <tr>
    <td align="center" valign="middle">Sorry you came here by mistake <br />
      please use the search box to get results</td>
  </tr>
</table>
<p>&nbsp;</p>
    <?php
    }
?> 
```

是高级搜索页面。这将搜索内容。

```
<form action="" method="post">

        <input type='text' name='searchAdv' />

        <input type='submit' name='submit_adv' value='Search' id="submit_adv" />
    </form>
    </td>
  </tr>
  <tr>
    <td align='center' valign='middle'><p>Sorry you came here because your search didn't </p>
      <p>meet any of the content try advanced!!</p></td>
  </tr>
</table>

<?php
    if (isset($_POST['submit_adv'])){
    $getSearch = clean_text($_POST['searchAdv']);

    $connectToDb = "select * from tutorials where content like '%".$getSearch."%' and active=1"; 
    $searchResultsAdv = $db->query($connectToDb) or die($db->error);

    while($rowAdv = mysqli_fetch_array($searchResultsAdv)) {

            echo "<a class='counter_linkHeader' href='index.php?cat=tutorials_view&learn_id=5&tutorial_id=".$rowAdv['tutorial_id']."'>".$rowAdv['tutorial_title']."</a>";
            echo "<p class='counter_description'>";
            $your_desired_width=200;
            $description=$rowAdv['content'];
            if (strlen($description) > $your_desired_width) {$description = wordwrap($description, $your_desired_width); $description = substr($description, 0, strpos($description, "\n"))." ..."; } echo $description;
            echo"</p>";    
        }
    }
  ?> 
```

现在问题再次出现在高级搜索页面，搜索页面工作正常

但是当我在高级页面中搜索时，它返回的页面是空的，就像他没有为输入区域拿任何东西一样`SearchAdv`

# html - 如何使广告与菜单对齐？

> ID：10063842
> 
> 赞同：0
> 
> 时间：2012-04-08T15:09:59.553
> 
> 标签：html, css

我正在[一个网站](http://www.apptec.net/)上工作，我必须在菜单下方添加广告，但它们应该与左侧的菜单对齐。我试图对广告应用填充，但是当我增加或减小页面（`CTRL+`或`CTRL-`）的大小时它会导致问题。有没有办法可以将它与菜单对齐并使其与所有浏览器对齐？

提前致谢。这是我所做的，

```
ads{
padding-left:170px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:28:32.827

好的，因为您已经更改了代码，请将此 css 应用于大纲 div。

```
#header .outline {
    margin: 0 auto;
    padding-top: 10px;
    position: relative;
    width: 960px;
    z-index: 15; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:27:00.937

通过将菜单设为相对而广告设为绝对来使用位置属性

```
#menu{
 position:relative;
 width:80%;
 left:10%;
}
#ads{
 position:absolute;
 top:0px;
 width:80%;
 left:10%;
} 
```

使用此代码，无论您如何编辑浏览器的缩放，它都会在一起:) 希望对您有所帮助，祝您好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:13:25.533

利用

```
<style type="text/css">
ads
{
float:right;
}
</style> 
```

希望这会帮助你。

# javascript - jQuery：创建一个循环，首先需要一个时间间隔，然后再更改为另一个

> ID：10063843
> 
> 赞同：0
> 
> 时间：2012-04-08T15:10:04.003
> 
> 标签：javascript, jquery, animation, loops

我有一个在图像之间淡入淡出的循环，其间隔由变量***itemInterval***设置。像这样：

```
 // interval between items
            var itemInterval = 5500;

            // start loop
            var infiniteLoop = setInterval(function() { 

                // initial fade out
                $('.rotating-item').eq(currentItem).fadeOut(fadeTime);

                // set counter
                if (currentItem == numberOfItem -1) {
                    currentItem = 0;
                } else {
                    currentItem++;
                }

                // next item fade in
                $('.rotating-item').eq(currentItem).fadeIn(fadeTime);

            }, itemInterval); 
```

我真正想做的是，如果有一个仅在第一次运行循环时运行的*初始时间间隔，然后是之后每次运行的第二个时间间隔。*

所以当用户打开页面时，第一次淡入淡出很快，但是他们等待下一张图片淡入淡出的时间更长。

我对 Javascript 很陌生，所以如果您能编辑我的代码以使其工作并让我知道您做了什么，我将不胜感激。如果提前感谢您的时间:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:17:02.587

您可以尝试使用普通函数而不是匿名函数：

```
 // interval between items
        var itemInterval = 5500;
        var infiniteLoop;//this contains the id of the interval to be used in clearinterval by the way
        setTimeout(function(){
              // this code will run only once, one second after the page loads.
              myFunc();
              infiniteLoop = setInterval(myFunc, itemInterval);
              // commence loop that will run forever unless you use clearinterval(infiniteLoop);
        }, 1000);
        // start loop

        function myFunc() { 
            // this code will run every time the function is called
            // initial fade out
            $('.rotating-item').eq(currentItem).fadeOut(fadeTime);

            // set counter
            if (currentItem == numberOfItem -1) {
                currentItem = 0;
            } else {
                currentItem++;
            }

            // next item fade in
            $('.rotating-item').eq(currentItem).fadeIn(fadeTime);

        } 
```

这样，您可以手动调用此函数，然后开始它的间隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:21:27.017

尝试这个：

```
// interval between items
var itemInterval = 5500;

// start loop
var infiniteLoop = setInterval("fadeChange()", itemInterval);

function fadeChange() {
// initial fade out
$('.rotating-item').eq(currentItem).fadeOut(fadeTime);

// set counter
if (currentItem == numberOfItem -1) {
    currentItem = 0;
} else {
    currentItem++;
}

// next item fade in
$('.rotating-item').eq(currentItem).fadeIn(fadeTime);
} 
```

这将避免最初调用该函数，并且该函数应每 5.5 秒调用一次。

# c# - 为什么 Process.MainWindowTitle 对于除一个窗口外的所有窗口始终为空？

> ID：10063847
> 
> 赞同：5
> 
> 时间：2012-04-08T15:10:23.593
> 
> 标签：c#, .net, windows

按如下方式访问 Process.MainWindowTitle 时...

```
Process[] processes = Process.GetProcessesByName( "iexplore" ); 
```

...然后遍历生成的数组，我总是以`MainWindowTitle`数组中除一项之外的所有项为空而告终。在我的例子中，我打开了两个 Internet Explorer 窗口，一个带有一个选项卡，一个带有两个选项卡。

运行我的代码，我总是得到我上次活动的窗口和选项卡的 MainWindowTitle - 所有其他人都保持为空。奇怪的是，填充 MainWindowTitle 的进程 ID 总是相同的——如果我在运行我的代码之前激活另一个 IE 窗口或选项卡，进程 ID 总是相同的：

```
 if ( !processes.Any() )
  {
    MessageBox.Show( "TODO - No matching process found" );
    return;
  }

  if ( processes.Count() > 1 )
  {
    foreach ( Process currentProcess in processes )
    {
      // More than one matching process found
      checkedListBox1.Items.Add( currentProcess.Id + " - " + currentProcess.MainWindowTitle + " - " + currentProcess.ProcessName );
    }

    return;
  } 
```

因此输出可能是第一次运行，如：

*   第4824章
*   第3208章
*   **4864 - 谷歌 - Windows Internet Explorer - iexplore**

下一次运行（预先选择另一个 IE 窗口）：

*   第4824章
*   第3208章
*   **4864 - id 软件 - Windows Internet Explorer - iexplore**

我已经阅读了[这篇文章](https://stackoverflow.com/questions/210504/enumerate-windows-like-alt-tab-does?answertab=votes#tab-top)，但我没有进一步解决我的问题（而且它似乎进入了一个有点不同的方向）。

为什么我总是只能得到一个非空的 MainWindowTitle？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:24:22.870

请记住，Internet Explorer 使用托管模型 - 一个 iexplore.exe 实例托管 Internet Explorer 框架，其他 iexplore.exe 实例仅显示选项卡的内容。

唯一具有顶级窗口的 IE 实例是承载框架的 iexplore.exe 进程。

[本文](http://news.softpedia.com/news/Multi-Processes-in-Browsers-Chrome-Internet-Explorer-Firefox-and-WebKit-140535.shtml)讨论了各种 Web 浏览器的多进程架构。据我了解，浏览器正在转向多进程模型——这样一个网页的故障不会影响其他页面。 [本文](http://blogs.msdn.com/b/ie/archive/2008/03/11/ie8-and-loosely-coupled-ie-lcie.aspx)更详细地介绍了 IE 的多进程模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:46:01.110

使这种情况可靠地发生的一种选择（参见上面的评论）是实施[BHO](http://msdn.microsoft.com/en-us/library/bb250436%28VS.85%29.aspx) - esp。该[`DWebBrowserEvents2::WindowStateChanged`事件](http://msdn.microsoft.com/en-us/library/aa768307%28VS.85%29.aspx)在这种情况下很有用。

BHO 是一堆 COM 接口的实现，并被加载到浏览器进程/每个选项卡中……实现它们的最佳方法是在 C++ IMO 中。

但在 .NET 中当然可以这样做（虽然不推荐）：

*   [http://www.codeproject.com/Articles/350432/BHO-Development-using-managed-code](http://www.codeproject.com/Articles/350432/BHO-Development-using-managed-code)
*   [http://www.codeguru.com/csharp/.net/net_general/comcom/article.php/c19613/Build-a-Managed-BHO-and-Plug-into-the-Browser.htm](http://www.codeguru.com/csharp/.net/net_general/comcom/article.php/c19613/Build-a-Managed-BHO-and-Plug-into-the-Browser.htm)
*   [AddIn-Express for IE](http://www.add-in-express.com/programming-internet-explorer/project-template.php)（基于 .NET 的 BHO 的商业库）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T14:04:50.803

我有同样的问题。使用 Teamviewer Host，我们在某些应用程序上有 QuickConnect 按钮。在我的情况下，WinWord。如果您删除或禁用 QuickConnect，MainWindowTitle 将得到增强

# mysql - mysql join 不正确的结果

> ID：10063849
> 
> 赞同：1
> 
> 时间：2012-04-08T15:10:49.893
> 
> 标签：mysql

每个 childrow 都有一个 parentid 和 position。对于具有相同位置的子行，有一行 where `start='1'`。

我想要做的是返回待处理行及其起始行。

应该显示的结果是；开始（欧文）待定（戴夫，保罗）。这是因为它们的位置相同。这是 SQL 小提琴[http://sqlfiddle.com/#!2/e6e54/1](http://sqlfiddle.com/#!2/e6e54/1)

```
 id |  name | parentid|  position|  start  |  pending |
   1 |  mike |    0    |    0     |    0    |     0    |
   2 |  dave |    1    |    1     |    0    |     1    | 
   3 |  paul |    1    |    1     |    0    |     1    |
   4 |  john |    1    |    2     |    1    |     0    |
   5 |  bret |    1    |    2     |    0    |     0    |
   6 |  owen |    1    |    1     |    1    |     0    |
   7 |  rick |    1    |    3     |    1    |     0    |
   8 |  jaye |    1    |    3     |    0    |     0    |

    $getquery = mysql_query("select child.*
from `mytable` child inner join `mytable` parent 
on parent.id=child.parentid
inner join `mytable` child2 on child.parentid=child2.parentid
and child2.pending='1'
where child.start='1' ORDER BY child.id DESC");

while($row=mysql_fetch_assoc($getquery)) {

 $name = $row['name'];

echo "<p>Name: $name </p>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:37:44.850

```
select * from `mytable` order by position, pending 
```

`where position=1`如果这是唯一感兴趣的位置，您可以添加一个子句。

# python - 如何在 Jinja2 模板中使变量永久化？

> ID：10063851
> 
> 赞同：0
> 
> 时间：2012-04-08T15:11:47.120
> 
> 标签：python, jinja2

我在 App Engine 中使用 Jinja2 和 Python 2.7。

在请求处理程序中，我想设置一个永久变量 Jinja2 变量，以便它可用于所有 Jinja2 模板。具体来说，这是一个用户对象，所以当他们登录时，我总是可以提取用户名以显示在网站的所有页面上。

我已经阅读了这个问题和答案：[如何在 Jinja2 模板中访问会话数据（应用引擎上的瓶子框架）？](https://stackoverflow.com/questions/2554174/how-do-i-access-session-data-in-jinja2-templates-bottle-framework-on-app-engine)

但是当我尝试它时，会话变量似乎不是永久的，即当我浏览到另一个模板时，会话变量不再存在。

如何设置永久变量？它会为每个用户独立设置吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:24:47.143

当您的 Jinja 环境针对每个请求创建时，您的变量不会被保存。Webapp2 具有会话、Jinja 和保存数据所需的所有功能。

# c# - 如何在工作组 Windows 7 上访问远程私有 Msmq

> ID：10063854
> 
> 赞同：0
> 
> 时间：2012-04-08T15:12:22.663
> 
> 标签：c#, .net, queue, msmq

如本文标题中所述，我在连接到工作组上 Windows 7 机器上的远程私有 msmq 队列时遇到问题。

我创建了一个本地队列，系统正在运行，并且能够成功地将我的消息排入本地队列，但是当我尝试连接到远程队列以对我的消息进行排队时，我无法访问它。

这两个 msmq 服务都安装在 windows 7 机器上，并尝试使用 winforms c# 访问它。我尝试了很多博客，但不知道我错过了什么。这是我收到的错误消息

> 拒绝访问消息队列系统

这就是我用来连接远程队列的方法

> FormatName:Direct=OS:machinename\private$\TestQueue

我也尝试像这样提供 ipaddress 但没有帮助

> FormatName:Direct=TCP:ipaddress\private$\TestQueue

我浏览了很多博客，但没有任何帮助。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:25:13.067

如果您尝试写入远程队列，则会在您的计算机上本地创建一个传出队列。检查此传出队列的权限，并查看传出队列中是否有任何项目。也许问题不在于远程机器

# android - 检查 JSON 中是否存在子对象

> ID：10063866
> 
> 赞同：8
> 
> 时间：2012-04-08T15:13:53.943
> 
> 标签：android, json, string, gson

我正在使用以下方法检查 JSON 字符串中的对象是否存在：

```
JSONObject json = null;

         try {
            json = new JSONObject(myJsonString);
        } catch (JSONException e) { e.printStackTrace(); } 

        if(json.has("myObject")) System.out.println("EXISTS");

        else System.out.println("DOESN'T EXIST"); 
```

当我尝试检查子对象是否存在时出现问题。例如：

```
...,"queue":{"building":{"q0":{"id":177779,... 
```

**队列**总是存在并且也在**构建**，但**q0**并不总是存在。那么，如何检查**q0**的存在？而且，有没有办法使用 Gson 库来检查它？

先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T15:51:46.877

如果尝试失败，您可以简单地尝试一下并返回 null 。或者你可以将你的尝试分解成小块来监控它失败的地方。

```
/**
 * This method will return the JSONObject q0, if it exists
 * If it doesn't exist it will return NULL
 *
 */
private JSONObject getQZero(JSONObject json)
{   
    try
    {
        return json.getJSONObject("queue").getJSONObject("building").getJSONObject("q0");
    }
    catch (JSONException e)
    {
        // This could be triggered either because there is no q0
        //   or because the JSON structure is different from what was expected.
        return null;
    }    
} 
```

如果要打印每个级别的日志，也可以逐步进行；

```
/**
 * This method will show where your jsonparsing fails.
 * It will throw a JSONOException if the json is way different from what 
 *   was expected, and otherwise it will print a log of where the parsing
 *   failed.
 */
private JSONObject getQZero(JSONObject json) throws JSONException
{       
    // Stop if no queue
    if (! myObject.has("queue") 
    {
        Log.d(TAG, "no queue!");
        return null;
    }

    JSONObject queue = myObject.getJSONObject("queue");

    // Stop if no building
    if (! queue.has("building")
    {
        Log.d(TAG, "no building!");
        return null;
    }

    JSONObject building = queue.getJSONObject("building")

    // Stop if no q0
    if (! building.has("q0"))
    {
        Log.d(TAG, "no q0!");
        return null;
    }

    JSONObject q0 = building.getJSONObject("q0");
    // Q0 is returned here. If the method returned earlier, it returned NULL
    // You could also do nested ifs, but the indentation gets crazy
    return q0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:38:25.780

利用例外对您有利

```
 try {
        JSONObject i = json. getJSONObject("q0");
        // Is there do something
    } catch (JSONException e) { 
       // Isn't there
    } 
```

[http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject(java.lang.String)](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject%28java.lang.String%29)

> JSONException - 如果未找到键或值不是 JSONObject。

# php - preg_replace + UTF-8 在一台服务器上不起作用，但在另一台服务器上起作用

> ID：10063874
> 
> 赞同：5
> 
> 时间：2012-04-08T15:14:57.657
> 
> 标签：php, utf-8, preg-replace

```
echo preg_match("/\b(בדיקה|מילה)\b/iu", "זוהי בדיקה"); 
```

出于某种原因，此代码在我测试过的几台服务器上返回 1，但在一台特定服务器上返回 0。

PCRE 编译时带有 UTF-8 支持和 Unicode 属性支持。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:19:46.940

PHP 使用的 PCRE 版本之间可能存在差异。

PHP 和 PCRE 版本： http: [//php.net/pcre.installation](http://php.net/pcre.installation)

你应该使用 8.10+ (PHP 5.3.4+)

[8.10 版 2010 年 6 月 25 日：](http://www.pcre.org/changelog.txt)

> 1.  添加了 PCRE_UCP 以使 \b、\d、\s、\w 和某些 POSIX 字符类使用 Unicode 属性。(*UCP) 在模式的开头可用于设置此选项。修改 pcretest 以添加 /W 来测试这个工具。添加了 REG_UCP 以使其可通过 POSIX 接口使用。

**编辑：** 刚刚做了一些测试，它在 PHP 5.3.10 上给出 1，在 PHP 5.3.2 和 PHP 5.3.3 上给出 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:25:49.887

它可能取决于 PCRE lib 的版本。为了使事情更加规范化，请尝试使用«UCP动词»：`preg_match('/(*UCP)\b(בדיקה|מילה)\b/iu', 'זוהי בדיקה')`。

它仍然需要 PCRE v8.10，自 5.3.4 或在 compile flag 中提到时随 PHP 一起提供`--with-pcre-regex=DIR`。

[参考（俄语）](http://bolknote.ru/2010/09/08/~2704)

# java - 初始化默认 SSL 上下文失败

> ID：10063882
> 
> 赞同：1
> 
> 时间：2012-04-08T15:15:57.813
> 
> 标签：java, linux, ssl, https, httpclient

我的httpclient项目遇到了一个奇怪的问题。它在其他两个带有java1.6的Centos系统中运行成功。但它在另一台机器（centos 和 java1.6）上失败了。问题是：

```
java.lang.IllegalStateException：初始化默认 SSL 上下文失败
     [java] 在 org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:211)
     [java] 在 org.apache.http.conn.ssl.SSLSocketFactory.(SSLSocketFactory.java:333)
     [java] 在 org.apache.http.conn.ssl.SSLSocketFactory.getSocketFactory(SSLSocketFactory.java:165)
     [java] 在 org.apache.http.impl.conn.SchemeRegistryFactory.createDefault(SchemeRegistryFactory.java:45)
     [java] 在 org.apache.http.impl.client.AbstractHttpClient.createClientConnectionManager(AbstractHttpClient.java:294)
     [java] 在 org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:445)
     [java] at simulativeLogin.WebClientDevWrapper.wrapClient(Unknown Source)
     [java] at simulativeLogin.GetAccessToken.getToken(Unknown Source)
     [java] 在 crawler.FriendshipCrawler.main（未知来源）
     [java] 在 java.lang.reflect.Method.invoke(libgcj.so.10)
     [java] 在 org.apache.tools.ant.taskdefs.ExecuteJava.run(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.taskdefs.ExecuteJava.execute(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.taskdefs.Java.run(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.taskdefs.Java.executeJava(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.taskdefs.Java.executeJava(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.taskdefs.Java.execute(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.UnknownElement.execute(ant-1.7.1.jar.so)
     [java] 在 java.lang.reflect.Method.invoke(libgcj.so.10)
     [java] 在 org.apache.tools.ant.dispatch.DispatchUtils.execute(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Task.perform(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Target.execute(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Target.performTasks(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Project.executeSortedTargets(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Project.executeTarget(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.helper.DefaultExecutor.executeTargets(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Project.executeTargets(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Main.runBuild(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.Main.startAnt(ant-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.launch.Launcher.run(ant-launcher-1.7.1.jar.so)
     [java] 在 org.apache.tools.ant.launch.Launcher.main(ant-launcher-1.7.1.jar.so)
     [java] 引起：java.lang.IllegalStateException
     [java] 在 gnu.javax.net.ssl.provider.X509KeyManagerFactory.engineGetKeyManagers(libgcj.so.10)
     [java] 在 javax.net.ssl.KeyManagerFactory.getKeyManagers(libgcj.so.10)
     [java] 在 org.apache.http.conn.ssl.SSLSocketFactory.createSSLContext(SSLSocketFactory.java:187)
     [java] 在 org.apache.http.conn.ssl.SSLSocketFactory.createDefaultSSLContext(SSLSocketFactory.java:209)

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:38:28.237

这不是你的错。使用另一个JVM，这将解决您的问题。我有同样的问题。我在 Gumstix/linux/jamVM 上运行 Apache HttpClient。我得到了完全相同的例外。这是X509的测试程序。我在我的 Mac mini 上运行它，结果是“SunX509”作为算法；但在 jamVM 上，它是“空的”。试试看。

```
public class TestX509 {
    public static void main(String[] args) {
        String algorithm = Security
            .getProperty("ssl.KeyManagerFactory.algorithm");

        System.out.println("algorithm is " + algorithm);
    }
} 
```

请参阅 gnu.javax.net.ssl.provider.X509KeyManagerFactory.java 的第 108 行的源代码。这就是异常的来源。（因为 'current' 是一个密钥管理器，它是空的。你从前面的测试中知道。）

```
104:   protected KeyManager[] engineGetKeyManagers()
105:   {
106:     if (current == null)
107:       {
108:         throw new IllegalStateException();
109:       }
110:     return new KeyManager[] { current };
111:   }
112: 
```

由于库抛出 IllegalStateException，这是一个 RuntimeException，有人认为它是 GCJ 的错误并在此处报告[http://code.google.com/p/selenium/issues/detail?id=2483](http://code.google.com/p/selenium/issues/detail?id=2483)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:58:43.950

我看到您使用 GCJ 作为 Java 的实现（从原因异常起源于`gnu.javax.net.ssl.provider.X509KeyManagerFactory`类的事实，以及许多堆栈级别的方式`libgcj.so.10`）。不幸的是，这不是官方认可的 Java 版本。它在其实施的几个领域存在许多问题，有时可能会非常棘手。特别是 X.509 密钥处理似乎有问题！（我不知道确实如此，但显然确实如此。）

最简单的解决方法是切换到使用不同的 Java 实现。Sun/Oracle Java 实现绝对不错（我广泛使用它），而且我也听说过有关 OpenJDK 实现的好消息；据我了解，OpenJDK 是删除了某些部分的 Sun JDK（特别是他们从其他地方获得许可的位，我*认为*这是编解码器和 GUI 代码的一部分，但我不确定）。您不想做的是花时间解决没有人推荐使用的 Java 实现中的错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T20:41:23.647

答案在评论中。如果您确实键入`java -version`并查看`java version "1.5.0"`，则需要确保您使用的是 Java 6。它应该说`java version "1.6.0"`

# c++ - 为什么我不能在最新版本的 gcc 中使用 auto 关键字

> ID：10063884
> 
> 赞同：23
> 
> 时间：2012-04-08T15:16:39.357
> 
> 标签：c++

所有，最近我尝试使用 c++11 支持的新功能，我写了这样的语句但是编译器运行失败。

```
auto x = 1; 
```

下面列出的报告错误：

```
D:\DEV\CBCppTest\main.cpp||In function 'int main()':|
D:\DEV\CBCppTest\main.cpp|22|warning: 'auto' changes meaning in C++11; please remove it [-Wc++0x-compat]|
D:\DEV\CBCppTest\main.cpp|22|error: 'x' does not name a type|
||=== Build finished: 1 errors, 1 warnings ===| 
```

为什么 MinGW 上的最后一个 gcc 版本 4.7.0 不能支持这种说法。但是vs10的编译通过了。谁能知道这个问题的原因？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-08T15:19:10.513

“GCC 为 2011 ISO C++ 标准提供实验性支持。可以使用 -std=c++11 或 -std=gnu++11 编译器选项启用此支持；前者禁用 GNU 扩展。”

它来自这里：[c+11 支持](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-23T12:31:08.083

解释一下编译器到底在抱怨什么：`auto`曾经是一个旧的 C 关键字，声明这个变量有*自动存储*。这些关键字与类型系统几乎没有关系，它们指定变量在内存中的表示方式：它们的存储位置（处理器寄存器与主内存/堆栈）以及内存的回收方式。`auto`意味着变量存储在堆栈中（尽管处理器可能会将其优化到处理器寄存器中）并且当变量超出范围时会*自动回收内存 - 这几乎在任何情况下都是正确的选择*¹因此是默认值，所以几乎没有人使用过这个旧`auto`关键字。然而`C++03`仍然为拥有它的代码提供向后兼容性；今天的编译器仍然希望支持遗留代码。

* * *

¹尽管您经常希望*对象*驻留在堆上，但您仍将通过堆栈上的变量访问这些对象；C++ 有自己的使用堆分配内存（等）的方法`new`，`std::vector`你不需要不安全的 C 风格的`malloc`东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-08T15:19:23.730

编译时需要添加`-std=c++11`到g++命令行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-23T12:19:08.697

这是由于 GCC 编译器默认未启用该功能。如果您使用的是 Codeblocks，请转到 Settings --> Compiler 并启用该功能，如图所示 - [http://imgur.com/KrHx8nh](http://imgur.com/KrHx8nh)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-10T22:08:00.637

对我来说，在 g++ 命令行中添加“-std=c++0x””解决了这个问题。

# jquery-ui - 在 jquery 选项卡加载后调用事件

> ID：10063886
> 
> 赞同：13
> 
> 时间：2012-04-08T15:16:52.790
> 
> 标签：jquery-ui, jquery, jquery-tabs

我正在使用 jQuery 选项卡。在其中一个选项卡中是一个所见即所得的编辑器，在显示选项卡后需要刷新该编辑器，但我无法确定在加载选项卡后是否有事件触发。

据我了解，加载事件仅适用于使用 ajax 调用的选项卡。我试过使用它，但它不会触发： [jQuery ui tabs load/tabsload event does not fire](https://stackoverflow.com/questions/9071878/jquery-ui-tabs-load-tabsload-event-does-not-fire)

在那个例子中，他们使用了一个 iframe，它有一个触发的加载事件。我只是使用没有加载事件的 div，也没有像 onshow 事件监听器那样的东西。

我能得到的最接近的是 tabsselect 事件，它在单击选项卡时触发，但在加载新选项卡之前。

当我不使用 ajax 时，加载选项卡后是否会触发任何事件？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T15:30:49.487

你试过活动秀吗？ [http://jqueryui.com/demos/tabs/#event-show](http://jqueryui.com/demos/tabs/#event-show)

```
$( ".selector" ).tabs({
   show: function(event, ui) { ... }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-28T04:16:59.207

show 事件对我不起作用，但 create 事件对我有用：

```
$( ".selector" ).tabs({
   create: function(event, ui) { ... }
}); 
```

[http://api.jqueryui.com/tabs/#event-create](http://api.jqueryui.com/tabs/#event-create)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-08T12:39:26.590

现在该事件被称为`activate`

```
$( ".selector" ).tabs({
  activate: function(event, ui) { ... }
}); 
```

[http://api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

# html - CSS 行高对齐问题

> ID：10063893
> 
> 赞同：1
> 
> 时间：2012-04-08T15:17:58.670
> 
> 标签：html, css

我正在设计一个网站，每页都有报价。我将 CSS 应用到这句话中，以使其看起来最好并脱颖而出。但是我有几个问题。

```
.quote {
  font-size: 18pt;
  padding-top: 50px;
  padding-bottom: 15px;
  text-align: center;
  line-height: 0.25;
}

.speech_mark_large {
  color: #203D69;
  font-size: 120px;
  vertical-align: top;
}
```

```
<div class="quote">
  <span class="speech_mark_large">&ldquo;</span> Leading the way with innovative design of corrugated Point of Sale displays and packaging offering bespoke design to fulfill your brief.
  <span class="speech_mark_large">&rdquo;</span>
</div>
```

也在[JSFiddle](http://jsfiddle.net/446dJ/)上。

我希望引号的两行靠得更近，但是当我应用行高来解决这个问题时，它会将语音标记推到上一行。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T15:57:44.940

您应该`line-height`在完整`.quote`元素上设置。接下来，您设置`vertical-align`为`top`内部`.speech_mark_large`元素。通过更改元素的`line-height`，`.quote`您可以将行间距调整为您认为最好的。

编辑：我添加了`top`and`position`以便`.speech_mark_large`您可以更改引号的垂直位置。

**CSS**

```
.quote {
    font-size:18pt;
    padding-top:15px;
    padding-bottom:15px;
    text-align: center;
    line-height: 30px;
}
.speech_mark_large {
    color:#203D69;
    font-size:50pt;
    vertical-align: top;
    top: 5px;
    position: relative;
} 
```

看到这个更新[的 JSFiddle](http://jsfiddle.net/LxMYv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:25:55.130

试试这个：

```
.speech_mark_large {
color:#203D69;
font-size:50pt;
line-height: 35px;
vertical-align:text-top;
}​ 
```

行高将使它们从内联文本高度中占用更少的空间（这反过来又使它们浮在您的其他文本上）。垂直对齐将通过告诉引号将自己与文本底部对齐而不是正常对齐来解决此问题。

# ios5 - 覆盖scrollViewDidScroll时的问题，但不是UIScrollViewDelegate的所有其他方法

> ID：10063894
> 
> 赞同：2
> 
> 时间：2012-04-08T15:18:12.883
> 
> 标签：ios5, uiscrollview, uiscrollviewdelegate

好的，所以我为这个问题做了所有的研究，但现有的解决方案似乎都没有解决我的问题，所以这里是：

*   我有一个扩展 UIScrollView 的自定义类（并包含一个 UIView）
*   我想覆盖 UIScrollViewDelegate 中的 scrollViewDidScroll 方法（但不是所有方法）

我已经尝试实现这个问题的代码：[How to subclass UIScrollView and make the delegate property private](https://stackoverflow.com/questions/9978279/how-to-subclass-uiscrollview-and-make-the-delegate-property-private)但由于某种原因，它没有做任何事情（被覆盖的自定义方法永远不会被调用）。我也知道，如果您创建实现协议的自定义委托类（根据[iPhone：我是否需要为 UIScrollViewDelegate（或任何委托）实现所有方法），您不必实现 UIScrollViewDelegate 中的所有方法](https://stackoverflow.com/questions/6644630/iphone-do-i-need-to-implement-all-methods-for-uiscrollviewdelegate-or-any-dele)- 但是当我这样做：

**MyScrollViewDelegate.h**

```
@interface MyScrollViewDelegate: NSObject <UIScrollViewDelegate>

-(void)scrollViewDidScroll:(UIScrollView *)scrollView;

@end 
```

**MyScrollViewDelegate.m**

```
@implementation MyScrollViewDelegate

-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    NSLog(@"Custom scrollViewDidScroll called.");
    // -- some more custom code here --
    // ...
}

@end 
```

**在扩展 UIScrollView 的子类中**

```
// this scrollview is initiated by the NIB
- (void)awakeFromNib
{
    ...
    [self setDelegate:[[MyScrollViewDelegate alloc] init]];
} 
```

但是，当它编译并运行时，当我尝试滚动可滚动视图时，它会因 EXC_BAD_ACCESS 和调试控制台中的神秘“（lldb）”消息而崩溃。

所以我有点不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:51:51.680

我确实有一个[如何子类化 UIScrollView 并使委托属性私有](https://stackoverflow.com/questions/9978279/how-to-subclass-uiscrollview-and-make-the-delegate-property-private)的实现。我猜你的代码为什么没有做任何事情：仔细检查你是否真的将滚动视图的 contentSize 设置为大于视图大小的东西。如果它更小，则没有滚动，只是弹跳，并且`scrollViewDidScroll`不会调用。

对于您的代码，您实际上在一行中有两个问题。首先，UIScrollView 的delegate 属性是assign 类型。也就是说，如果委托类没有保留在其他地方，它会在一段时间内消失，你会得到`EXC_BAD_ACCESS`. 其次，通过分配`[[MyScrollViewDelegate alloc] init]`给委托而不释放该对象，您创建了一个引用计数为 1 并且永远不会被释放的孤儿对象。我的猜测是系统在运行时识别孤儿对象并清理它，然后`EXC_BAD_ACCESS`当委托人收到消息时你会得到你的。

如果您更喜欢将您的版本与单独的委托一起使用，我将按如下方式进行修复：

```
@interface MyScrollView: UIScrollView
{
    id<NSObject, MyScrollViewDelegate> dlgt;
    ...
}
...
@end

@implementation MyScrollView
- (void)awakeFromNib
{
    ...
    dlgt = [[MyScrollViewDelegate alloc] init];
    [self setDelegate:dlgt];
}

-dealloc
{
    [dlgt release];
    [super dealloc];
}
@end 
```

不过，不要忘记将 contentSize 设置为大于视图边界的值。否则将没有滚动，也没有委托调用。

# php - PHP & Cron - chdir 不工作

> ID：10063895
> 
> 赞同：0
> 
> 时间：2012-04-08T15:18:13.013
> 
> 标签：php, cron, chdir

我有一个作为守护进程运行的 PHP 脚本。8个线程同时运行。

为确保始终运行 8 个线程，以下 PHP 脚本从 cron 运行，该脚本与 daemon.php 脚本位于同一目录中：

```
<?php

chdir('/root/fb');
if (file_exists('pause')) die();

exec('ps ax | grep -v grep | grep daemon.php',$output);
$output=implode("\n",$output);
$num=8-substr_count($output,'daemon.php');
if ($num>0)
 {
 for($run=0; $run<$num; $run++)
  {
  exec('php daemon.php > /dev/null 2>&1 &');
  sleep(20);
  }
 }

?> 
```

上面将愉快地运行 daemon.php 脚本，但随后发生了一些奇怪的事情，并且 daemon.php 脚本本身有时会认为它在不同的目录中，而不是其他时候。具体来说，我使用了很多`exec`函数来执行其他应用程序，其中许多（但不是全部）认为它们回到了原始目录而不是`/root/fb`.

如果我直接从目录内部执行 daemon.php `php daemon.php`，则不会发生这种情况，并且一切都按预期工作。

非常反常的行为。如何设置它以使 cron 作业的效果与直接从其目录内执行脚本时的效果完全相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:28:43.303

也许简化和更具防御性的编程方法可以帮助您缩小问题范围。

```
<?php

if (!chdir('/root/fb')) die("couldn't chdir");
file_exists('pause')) die("paused");

exec('pgrep -f "php daemon.php"',$output);
$output = implode("\n",$output);
$num = 8 - count($output);
for($run = 0; $run < $num; $run++) {
   /*exec('php daemon.php > /dev/null 2>&1 &');*/
   passthru('echo $PWD');
   sleep(20);
}

?> 
```

# formatting - 如何在代码/预块中添加 Markdown 格式？

> ID：10063896
> 
> 赞同：23
> 
> 时间：2012-04-08T15:18:44.303
> 
> 标签：formatting, markdown

这似乎违背了代码块的目的，但我希望能够在代码块中加粗一些东西。例如，如果我想加粗返回行：

```
int main(void) {
    **return 0;**
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-03T01:58:10.980

您必须按照 [设计](http://daringfireball.net/projects/markdown/syntax)在 HTML 中执行此操作。

> 然而，在 Markdown 代码 span 和 blocks 中，尖括号和 & 符号总是自动编码的。

```
<pre>
int main(void) {
    <b>return 0;</b>
}
</pre> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-10T10:14:50.020

此语法应该可以解决您的问题：

```
    ```
    诠释主要（无效）{
       **返回 0;**
    }
    ```

```

只需在代码块的开头键入三个反引号，它应该可以工作。

# c++ - C++ sizeof 相同值的不同结果

> ID：10063897
> 
> 赞同：1
> 
> 时间：2012-04-08T15:18:52.057
> 
> 标签：c++, visual-studio-2010

我想计算'sizeof'数组：

```
char* arr[] = { "abc", "def" }; 
```

当我`sizeof`在数组初始化后立即手动调用时，它工作正常。但是，如果我将数组传递给某个函数，它不会给出相同的结果。

```
int test(char* b[]) {
    return (int)sizeof(b);
}

int _tmain(int argc, _TCHAR* argv[])
{
    char* arr[] = { "abc", "def" };
    int p = test(arr); // gives 4
    int k = sizeof(arr); // gives 8
    ...
} 
```

所以有什么问题？对不起新手的问题，但我真的很想念它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:23:53.730

当您使用`sizeof`on `arr`in 时`_tmain`，您将获取数组本身的大小，这`2 * sizeof(char*) = 2 * 4 = 8`在您的体系结构中，因为您`char*`的 s 占用`32`位 =`4`字节。

当您使用`sizeof`on `b`in 时`test`，您将获取指向数组第一个元素的指针的大小，该数组`sizeof(char**) = 4`位于您的体系结构中。您使用指针的大小而不是数组的原因是您不能将数组本身传递给函数 - 相反，您可以通过指向它们的第一个元素的指针传递它们。因此，有关数组实际大小的信息在调用中丢失了。换句话说，您的函数的签名`test`等效于`int test(char **b)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T15:23:19.093

这是因为当您在 C 或 C++ 中调用函数时，[数组会衰减为指针](https://stackoverflow.com/questions/1461432/what-is-array-decaying)。

在第一种情况下，编译器将`arr`其视为一个数组；在第二种情况下，它所看到的只是一个指向指针的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:23:31.187

在定义 test 的地方，编译器看不到 b 指向什么。因此， sizeof 给出了指针的大小（实际上是指向指针的指针的大小）。

在 main 内部，可以很好地看到实际大小是两个指针。

确实没有将数组传递给函数这样的事情——只传递指向数组的指针。[] 形式只是语法糖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T15:23:36.747

调用时会丢失大小信息，`test`因为数组衰减为指针。

您必须将数组的大小作为附加参数传递，或者将其固定在参数类型中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T15:31:26.087

欢迎使用 C++。

您根本无法将数组传递给函数。在 C++ 中，数组大部分时间都衰减为指针。您正在尝试传递一个数组，但实际上传递了一个指针，而您的第二个`sizeof`计算结果为该指针的大小。

你不应该关心这些。数组是专门的低级数据结构，只能用于实现更高级别的抽象。改为使用`std::vector`。

# jquery - hashchange 仅当不是点击时

> ID：10063898
> 
> 赞同：2
> 
> 时间：2012-04-08T15:19:06.790
> 
> 标签：jquery, hash, click

我正在使用这个

```
$(window).bind('hashchange', gotohash); 
```

为我的应用添加深层链接。

`<a>`我的问题是，当我单击with时它也会触发，`href=#whatever` 我只想在用户使用浏览器的后退和前进按钮或直接转到其中包含哈希的 url 时使用它。

我正在考虑`hashChangeEnabled=true/false`然后在每次点击时将其关闭

但是有没有更简单的方法来检测它是否是由点击引起的？

最佳做法是什么？

* * *

**我的解决方案**

```
var disableHashChange = false;

$(window).bind('hashchange', function(){
  if(!disableHashChange ){
    gotohash();
  }
  disableHashChange = false;
});

$('.link').click(function(){
  disableHashChange = true;
} 
```

**伊姆斯基的**回答****

 **```
var lastLinkEvent;

$(window).bind('hashchange', function(){
  if(lastLinkEvent != window.location.hash){
    gotohash();
    lastLinkEvent = "";
  }
});

$('.link').click(function(){
    lastLinkEvent = $(this).attr('href');;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:27:11.417

hashchange 事件将在您更改位置时触发，因此如果您不希望在单击链接时触发它，请更改链接 href 属性或添加使用`preventDefault`.

编辑：鉴于您希望链接正常工作，您应该设置一个仅限于链接事件的应用程序变量，例如`lastLinkEvent`并将其设置为包含在其 URL 中的哈希值。然后在您的处理函数中，检查是否`lastLinkEvent`已经是哈希，如果是，则阻止执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:22:45.977

只需检查当前目标是否是一个锚标签或不在 hashchange 内

[http://api.jquery.com/event.currentTarget/](http://api.jquery.com/event.currentTarget/)**

# reporting-services - 将数据集绑定到参数

> ID：10063904
> 
> 赞同：0
> 
> 时间：2012-04-08T15:19:48.373
> 
> 标签：reporting-services

请有人告诉我如何将数据集绑定到使用此过滤条件的参数（@Productcategory 和@PriceRange），或者是否有另一种方法来编写此过滤器。

谢谢艾玛

```
WHERE ( ( ProductCategory.Name = @ProductCategory OR
          ( @ProductCategory = 'All Bike Related' AND 
            ProductCategory.Name IN ('Bikes', 'Components')) OR
          (@ProductCategory ='All')
        ) AND
        ( (@PriceRange = 'Less than 50' AND ListPrice < 50) OR
          (@PriceRange ='50 to 99' AND ListPrice BETWEEN 50 AND 99) OR
          (@PriceRange ='100 to 499' AND ListPrice BETWEEN 100 AND 499) OR
          (@PriceRange ='500 and higher 'AND ListPrice >=500) OR
          (@PriceRange = 'All')
        )
      ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:45:18.743

如果您使用包含所提供的 WHERE 子句的查询从头开始创建报表（假设您正在查询 SQLServer 数据源），那么您应该会发现参数 ProductCategory 和 PriceRange 已自动生成并绑定到您的查询数据集。

但是，要手动添加参数（假设查询已经包含这些条件）：

*   在报告数据窗口中：
    *   对于每个参数，右键单击参数节点并选择`Add Parameter...`。根据需要指定名称和可用/默认值。
    *   展开 Datasets 节点，右键单击要绑定参数的数据集，然后选择`Dataset Properties`。
        *   在对话框中选择“参数”选项`Dataset Properties`，然后从您的查询中添加每个参数名称并将其与相应的报告参数匹配（如上一步中设置的那样）。
        *   单击对话框底部的确定`Dataset Properties`以确认更改。

（注意：这是假设 SSRS 2008 R2 - 所涉及的对话在其他版本的 SSRS 中可能略有不同。）

# java - 在高复制中从 gae datadtore 导入和导出数据

> ID：10063907
> 
> 赞同：0
> 
> 时间：2012-04-08T15:20:09.013
> 
> 标签：java, google-app-engine

我想知道是否可以从在java中配置高复制数据存储的gae应用程序导入和导出数据？

我愿意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:43:25.437

对于上传/下载数据，您可以使用[`bulkloader.py`](https://developers.google.com/appengine/docs/python/tools/uploadingdata).

如果您需要备份，现在可以使用[备份功能](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)将数据存储数据备份到 Blobstore 或 Google Cloud Storage。

# c++ - 如何计算 cilk_spawn 的时间

> ID：10063912
> 
> 赞同：0
> 
> 时间：2012-04-08T15:20:53.053
> 
> 标签：c++, c, execution-time, gprof, cilk

感谢您查看帖子

我正在对一些 Cilk Plus 代码进行基准测试，并希望计算完成“生成”操作所需的时间。我有兴趣只计算进行生成所需的时间，而不是 fib() 所需的计算时间。这可能吗？

将计时器放入以下代码中会按预期工作吗？如果我的想法是正确的，将用 timer_start() 和 timer_stop() 替换“// RRS”，完成工作吗？

```
#include <stdio.h>
#include <stdlib.h>   
int fib(int n)
{
  if (n < 2) return n;
  else {
  // RRS: Start timer t1 here ??
  int x = cilk_spawn fib(n-1);
  // RRS: Stop timer t1 here ??

  int y = fib(n-2);

  // RRS: Start timer t2 here ??       
  cilk_sync;
  // RRS: Stop timer t2 here ??

  return x + y;
  }
}

int main(int argc, char *argv[])
{
  int n = atoi(argv[1]);
  int result = fib(n);
  printf("Fibonacci of %d is %d.\n", n, result);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T16:14:16.183

回答我自己的问题：

我可以在注释行“// RRS”中放置一些计时器启动/停止语句，并忠实地计算生成时间。

感谢关注。

# php - 在 xml 和 php 中获取父元素的索引？

> ID：10063913
> 
> 赞同：0
> 
> 时间：2012-04-08T15:21:03.607
> 
> 标签：php, xml, curl, parent-child

我正在尝试获取父元素，我想到了一个 XML 标记。基本上我需要查看多个`<HotelRoomResponse>`结果并找到包含具有此确切数值的子标签的父标签： `<roomTypeCode>17918</roomTypeCode>`我不确定如何执行此操作或最好的方法。因为然后我需要获取该特定`<HotelRoomResponse>`. 这是一个示例 XML 响应：

```
<HotelRoomResponse>
    <cancellationPolicy> </cancellationPolicy>
    <rateCode>200482409</rateCode>
    <roomTypeCode>17918</roomTypeCode>
    <rateDescription>
       Deluxe Sunset View - All Inclusive-Up to $300Resort Credit
    </rateDescription>
    <roomTypeDescription>
       Deluxe Sunset View - All Inclusive-Up to $300Resort Credit
    </roomTypeDescription>
    <supplierType>E</supplierType>
</HotelRoomResponse> 
```

所以这些结果类型有很多种，我需要遍历它并找到这个特定的类型。

这是我连接到 XML 的方式：

```
$ch = curl_init(); 
$fp = fopen('room_request.xml','w'); 
curl_setopt($ch, CURLOPT_URL, "http://api.ean.com/ean-services/rs/hotel/v3/avail?cid=55505&minorRev=13&apiKey=4sr8d8bsn75tpcuja6ypx5g3&locale=en_US&currencyCode=USD&customerIpAddress=10.184.2.9&customerUserAgent=Mozilla/5.0+(Windows+NT+6.1)+AppleWebKit/535.11+(KHTML,+like+Gecko)+Chrome/17.0.963.79+Safari/535.11&customerSessionId=&xml=<HotelRoomAvailabilityRequest><hotelId>".$hid."</hotelId><arrivalDate>05/14/2012</arrivalDate><departureDate>05/18/2012</departureDate><RoomGroup><Room><numberOfAdults>3</numberOfAdults><numberOfChildren>0</numberOfChildren><childAges>0</childAges></Room></RoomGroup><includeDetails>true</includeDetails></HotelRoomAvailabilityRequest>");  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/xml'));  
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_FILE, $fp); 
$val = curl_exec($ch); 
curl_close($ch);//Close curl session 
fclose($fp); //Close file overwrite 
$avail = simplexml_load_file('room_request.xml'); 
```

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:28:20.753

```
$xml = new SimpleXMLElement('room_request.xml');

/* Search for <HotelRoomResponse><roomTypeCode> */
$result = $xml->xpath('/HotelRoomResponse/roomTypeCode'); 
```

结果将为您提供节点列表，然后您可以检查并在适当时获取父节点

见这里[http://www.php.net/manual/en/simplexmlelement.xpath.php](http://www.php.net/manual/en/simplexmlelement.xpath.php)

编辑 2\. 关键是命名空间

```
 <?php
$ch = curl_init(); 
$fp = fopen('room_request.xml','w'); 
curl_setopt($ch, CURLOPT_URL, "http://travellinginmexico.com/test/room_request.xml");  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/xml'));  
curl_setopt($ch, CURLOPT_HEADER, 0); 
curl_setopt($ch, CURLOPT_FILE, $fp); 
$val = curl_exec($ch); 
curl_close($ch);//Close curl session 
fclose($fp); //Close file overwrite

$xml = new SimpleXMLElement(file_get_contents('room_request.xml'));

/* Search for <HotelRoomResponse><roomTypeCode> */
$xml->registerXPathNamespace('ns2', 'http://v3.hotel.wsapi.ean.com/');
$result = $xml->xpath("HotelRoomResponse[child::roomTypeCode[text() = '153725']]");
foreach($result as $obj=>$node)
{
    var_dump($node->roomTypeCode);
} 
```

通过您发送的示例将获得特定信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:46:34.960

要查找具有值为`HotelRoomResponse`的子节点的所有节点，请使用以下命令：`roomTypeCode``'17918'`

```
$match = $avail->xpath("/HotelRoomResponse[child::roomTypeCode[text() = '17918']]"); 
```

编辑： $match 将是一个包含所有匹配项的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:57:54.027

好的，想通了！！！！这是我用来获取带有 text = value 的节点的内容。然后我得到了所有兄弟元素。

```
// load as file
$contents = new SimpleXMLElement($source,null,true);
$result = $contents->xpath('HotelRoomResponse[roomTypeCode="17918"]');

foreach($result as $key=>$node)
{
  $cancelPolicy = $node->cancellationPolicy;
} 
```

# google-plus-one - Google Plus 按钮计数器的作用与包含 https 的 URL 不同

> ID：10063917
> 
> 赞同：0
> 
> 时间：2012-04-08T15:21:32.540
> 
> 标签：google-plus-one

您可以从[http://www.google.com/webmasters/+1/button/发现](http://www.google.com/webmasters/+1/button/)

Google+ 有不同的计数器；

[http://plus.google.com/-pageid-](http://plus.google.com/-pageid-)或[https://plus.google.com/-pageid-](https://plus.google.com/-pageid-)

在我的情况下，不带 https 的 URL 显示 18 个 +1，而带 https 的 URL 显示 2 个 +1。

问题是 18 +1 没有显示在 Google Plus 页面上，所以我无法与这些用户互动。

同时，其他 Google 工具（例如徽章）使用 https 计算 url。

有没有办法合并这些用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:40:36.693

Google+ 在 SSL 和非 SSL 模式下仍然有不同的计数器。

Google Plus 的 SSL 和非 SSL 版本似乎独立工作，所以我找不到任何方法来计算 SSL 和非 SSL 区域中相同 URL 的 +1。

# google-maps-api-3 - API 3.8：拖动标记后，如果 marker.setMap(null) 则不再出现

> ID：10063926
> 
> 赞同：0
> 
> 时间：2012-04-08T15:22:28.580
> 
> 标签：google-maps-api-3, google-maps-markers

使用 v3.8 版本，我通过拖动标记得到了这种行为。

a) marker.setMap(map) --> 地图上的标记

b) 拖动标记 --> 这是一个拖动标记

c) marker.setMap(null) --> 隐藏标记

d) marker.setMap(map) --> 标记不出现

如果我强制使用 v=3.7，一切正常，在 d) 标记出现在地图中。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:49:04.403

根据 QAH 的评论，这似乎是 3.8 版中的一个错误。请参阅[此错误报告](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4052)并将您的星标添加到其中以帮助修复它。

如您所见，一种解决方法是使用`marker.setVisible(false)`或更早的版本。

# objective-c - Objective-C 中的 import 和 include 有什么区别？

> ID：10063929
> 
> 赞同：-1
> 
> 时间：2012-04-08T15:22:43.723
> 
> 标签：objective-c

> **可能重复：**
> [Objective-C 中的#import 和#include 有什么区别？](https://stackoverflow.com/questions/439662/what-is-the-difference-between-import-and-include-in-objective-c)

当我在 Objective-C 中使用 import 或 include 时，似乎两者都可以工作，这两者有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:32:57.347

..#include 和#import 请求预处理器读取文件并将其添加到其输出中。#include 和 #import 之间的区别在于

*   #include 允许您多次包含同一个文件。
*   #import 确保预处理器只包含一次文件。

C 程序员倾向于使用#include。Objective-C 程序员倾向于使用#import。

在 Objective-C 中编译一个文件需要两遍。首先，预处理器遍历文件。预处理器的输出进入真正的编译器。预处理器指令以 # 开头。最受欢迎的三个是

-＃包括

-＃进口

-＃定义

# php - 如何在 PHP 中使用不同格式转换字符串（xliff 段）

> ID：10063930
> 
> 赞同：0
> 
> 时间：2012-04-08T15:22:45.203
> 
> 标签：php, xml, xslt

我希望将以下字符串从源转换为目标，然后再从目标转换为源。

```
$strSource = '<g id="5">fist test string</g> <d id="20">some random string</d>';
$strTarget = '{1}fist test string{2}some random string{3}'; 
```

我找到的解决方案是使用数组和 preg_replace。

我只是想知道是否有一种有效的解决方案可以使用 xslt 进行这种转换。允许使用附加数据。数据可以包含任何帮助信息。

更新：

这是我使用 preg_match_all 的 target->source 解决方案，只是为了更好地理解：

```
preg_match_all('/(<.*>)(?!\s*<)/U', $strSource, $arrResult);
echo preg_replace('/{(\d+)}/e', 'arrResult[1]["$1" - 1]', $strTarget); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:25:06.733

**XSLT 2.0 支持正则表达式，另一方面是 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pSuffix" select="'FR'"/>

 <xsl:template match="/*">
     <xsl:apply-templates/>
     <xsl:value-of select=
      "concat('{',g[last()]/@id +1, '}')"/>
 </xsl:template>

 <xsl:template match="g">
  <xsl:value-of select=
   "concat('{',@id, '}',
            substring-before(., '_'), '_', $pSuffix
           )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档**（您的“字符串”，包装到单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
  <g id="1">TEST_EN</g> <g id="2">TEST_EN</g>
</t> 
```

**产生想要的正确结果**：

```
{1}TEST_FR{2}TEST_FR{3} 
```

**反向转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pSuffix" select="'EN'"/>

 <xsl:template match="text()" name="makeXml">
   <xsl:param name="pText" select="."/>
   <xsl:param name="pId" select="1"/>

     <xsl:if test=
       "contains($pText, '{') and contains($pText, '}')">
      <xsl:variable name="vPiece" select=
        "substring-before(substring-after($pText, '}'), '{')"/>
      <g id="{$pId}"><xsl:value-of select=
        "concat(substring-before($vPiece, '_'), '_', $pSuffix)"/></g>
      <xsl:call-template name="makeXml">
       <xsl:with-param name="pId" select="$pId +1"/>
       <xsl:with-param name="pText" select=
          "substring-after(substring-after($pText, '}'), '{')"/>
      </xsl:call-template>
     </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于第一个转换的结果时**（再次包装在单个顶部元素中以使其成为格式良好的 XML 文档）：

```
<t>{1}TEST_FR{2}TEST_FR{3}</t> 
```

**产生想要的正确结果**：

```
<g id="1">TEST_EN</g><g id="2">TEST_EN</g> 
```

# android - 在我的应用程序中增加文本大小的问题

> ID：10063933
> 
> 赞同：0
> 
> 时间：2012-04-08T15:22:49.610
> 
> 标签：android, android-widget, textview

我正在尝试从应用程序中增加特定文本视图的大小。我想通过菜单项选择来做到这一点，但遇到了问题。我尝试了以下方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Create an options menu for the activity
    super.onCreateOptionsMenu( menu );

    incrseTxtMenu = menu.add( 0,4,0,"Increase Text Size" );
    incrseTxtMenu.setIcon( R.drawable.ic_menu_plus );
    incrseTxtMenu.setOnMenuItemClickListener( new MenuItem.OnMenuItemClickListener() 
    {
        @Override
        public boolean onMenuItemClick(MenuItem item) 
        {
            // handler.sendMessage( handler.obtainMessage() );
            TextView tempTxt = getTextView();
            tempTxt.setTextSize( 25 );

            return true;
        }
    });

    return true;
} 
```

但这会引发空指针异常。我也试过只使用 intro.setTextSize() 但它会引发同样的错误。如何从此菜单项中访问文本视图？

**更新

```
//Method used to fetch the textview
public TextView getTextView()
{
    return intro;
} 
```

来自日志猫的错误：

```
AndroidRuntime FATAL EXCEPTION: main
java.lang.NullPointerException
at android.omni.Artist_activity$1.handleMessage( Artist_activity.java:32 ) 
```

另外顺便说一句-我正在尝试使用处理程序来更新GUI-假设这是必要的，我是否正确？

**更新 2 XML 代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id = "@+id/tab_one_top_level"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

      <LinearLayout
      android:orientation = "vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

      <TextView

    android:id = "@+id/faq_Intro"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    android:text = "@string/faq_Intro"
    android:typeface = "monospace"
    android:textStyle = "bold"
    android:paddingBottom = "12dp"

      />

      <TextView

    android:id = "@+id/faq_Intro_Info"
    android:layout_width = "wrap_content"
    android:layout_height = "wrap_content"
    android:text = "@string/faq_Intro_Info"
    android:textSize = "10dp"
    android:typeface = "monospace"
    android:textStyle = "bold"

      />

      </LinearLayout>
</ScrollView> 
```

有什么想法吗？

***我的代码解决方案***

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Create an options menu for the activity
    super.onCreateOptionsMenu( menu );

    incrseTxtMenu = menu.add( 0,1,0,"Increase Text Size" );
    incrseTxtMenu.setIcon( R.drawable.ic_menu_plus );

    decrseTxtMenu = menu.add( 0,2,0,"Decrease Text Size" );
    decrseTxtMenu.setIcon( R.drawable.ic_menu_negate );

    return true;

}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    // Increase size menu item
    if( item.getItemId() == 1 )
    {
        intro.setTextSize( myIntroSize += 5 );
        introInfo.setTextSize( myIntroInfoSize += 5 );

    }
    // Derease size menu item
    else if( item.getItemId() == 2 )
    {
        intro.setTextSize( myIntroSize -= 5 );
        introInfo.setTextSize( myIntroInfoSize -= 5 );
    }
    return true;
} 
```

onCreate() 方法像以前一样简单地初始化文本视图。哦，myIntroSize 和 myIntroInfoSize 的值可以是你想要的任何值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:36:31.910

请尝试以下代码并告诉我它是否有效。我不知道怎么回事，只是基于一些预感——

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Create an options menu for the activity
    super.onCreateOptionsMenu( menu );

    incrseTxtMenu = menu.add( 0,4,0,"Increase Text Size" );
    incrseTxtMenu.setIcon( R.drawable.ic_menu_plus );
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if(item.getItemId() == 4){
         TextView tempTxt =  (TextView)findViewById( R.id.faq_intro);
            tempTxt.setTextSize( 25 );
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T16:34:55.537

这个片段对我来说很好用，试试吧。我猜你的问题在于你如何获得 TextView 本身。“你应该使用`findViewbyId(int id)`”

```
 @Override
            public boolean onCreateOptionsMenu(Menu menu) {
            // Create an options menu for the activity
            super.onCreateOptionsMenu( menu );

            MenuItem incrseTxtMenu = menu.add( 0,4,0,"Increase Text Size" );
            incrseTxtMenu.setIcon( android.R.drawable.btn_plus );
            incrseTxtMenu.setOnMenuItemClickListener( new MenuItem.OnMenuItemClickListener() 
            {
                @Override
                public boolean onMenuItemClick(MenuItem item) 
                {
                    TextView tempTxt = (TextView) findViewById(R.id.text);
                    tempTxt.setTextSize( 25 );

                    return true;
                }
            });

        return true;
    } 
```

使用此功能处理菜单选择也更好：

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        return super.onOptionsItemSelected(item);
    } 
```

不使用 setOnMenuItemClickListener

编辑：我没有使用任何处理程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T16:48:44.820

我相信您的问题是当您调用“getTextView();”时

```
TextView tempTxt = getTextView();
tempTxt.setTextSize( 25 ); 
```

此外，当您设置文本的大小时，您应该使用它来确保它们是像素：

```
tempTxt.setTextSize(TypedValue.COMPLEX_UNIT_PX, 25); 
```

在这里阅读： [TextView.setTextSize 行为异常 - 如何为不同的屏幕动态设置 textview 的文本大小](https://stackoverflow.com/questions/3687065/textview-settextsize-behaves-abnormally) [Android TextView setTextSize 错误地增加了文本大小](https://stackoverflow.com/questions/5032355/android-textview-settextsize-incorrectly-increases-text-size)

最好使用“findViewById”创建的对象具有来自 XML 的 ID：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Create an options menu for the activity
super.onCreateOptionsMenu( menu );

MenuItem incrseTxtMenu = menu.add( 0,4,0,"Increase Text Size" );
incrseTxtMenu.setIcon( android.R.drawable.btn_plus );
incrseTxtMenu.setOnMenuItemClickListener( new MenuItem.OnMenuItemClickListener() {
    @Override
    public boolean onMenuItemClick(MenuItem item) {
    TextView text = (TextView) findViewById(R.id.faq_Intro); //faq_Intro from XML
    tempTxt.setTextSize(TypedValue.COMPLEX_UNIT_PX, 25); //corrected

    return true;
    }
});

return true;
} 
```

此外，您可以轻松地使用带有大小写开关的“onOptionsItemSelected”，而不是使用“OnMenuItemCLickListener”：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()){

    case R.id.increasesize:  
         //some code
         break;     

    case R.id.exit:  
        finish();
        break;         

    default:
        return true;
    } 
```

# c++ - 缓冲区大小已更改

> ID：10063934
> 
> 赞同：0
> 
> 时间：2012-04-08T15:22:54.740
> 
> 标签：c++

我正在套接字之间进行简单的通信，这是我的 C++ 代码

```
while(1)
{
    string buffer = "23,45\n";
    const char* foo = buffer.c_str();
    cout << "size of buffer is " << sizeof(buffer)<<endl;
    send (s, foo, sizeof(buffer), 0);
} 
```

奇怪的是第一次迭代，缓冲区的大小如预期的那样是 5，但是自从第二次迭代之后，大小急剧上升到 32。知道为什么吗？非常感谢你。顺便说一句，增加的大小来自前导而空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:27:13.453

运算符返回对象的`sizeof`大小（以字节为单位）。它*不*返回容器类型的长度。您需要使用`std::string::length()`或`std::string::size()`确定字符串的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:27:44.400

我认为您误解了第一次迭代的 5：它一定来自其他地方。`sizeof(buffer)`是在编译时计算出来的——它的大小是`std::string`，所以你应该在每次迭代中看到 32 。

如果您正在寻找字符串的长度，请`buffer.size()`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:27:58.337

`sizeof(buffer)`告诉您`std::string`对象的大小，这与您存储在其中的字符数无关（顺便说一下，在您的示例中是 7，而不是 5）。

# c++ - 关于调度程序代码

> ID：10063937
> 
> 赞同：1
> 
> 时间：2012-04-08T15:23:11.320
> 
> 标签：c++, scheduling

我正在编写一个代码来安排多核计算机不同内核上的进程。我正在使用 linux sched_setaffinity 来安排工作。但是，我不知道调度程序是否可以立即/延迟后知道计划的作业是否已完成。你能告诉我，如何做到这一点？我的调度程序是一个 C++ 程序，所以我无法手动查看。由于调度程序本身正在分配（调度）作业，因此它可能具有一些额外的信息，例如 PID 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:08:06.640

也许您应该在调度程序中处理[SIGCHLD](http://en.wikipedia.org/wiki/SIGCHLD)。每当子进程退出时，您的信号处理函数就会被调用。

# javascript - 无法使用包含 url 变量的 javascript 函数刷新到页面底部

> ID：10063949
> 
> 赞同：0
> 
> 时间：2012-04-08T15:24:47.230
> 
> 标签：javascript

我的 php 页面底部有一些级联下拉菜单。每次用户从下拉列表中选择一个选项时，都会调用以下函数将该选项的值添加到我的 url 变量中。目前页面每次刷新到顶部，这是一个巨大的问题。通常我会使用类似 onCLick="window.location='page.htm#bottom';" 刷新到页面底部，但是当我添加#bottom 时，以下功能停止工作。有人可以帮我调整这个功能，或者给我其他的想法，当功能完成时，它们会刷新到页面底部。

```
function reload5(form){
if(document.getElementById('fda1').checked) {
 var fda = '1';
}else if(document.getElementById('fda0').checked) {
  var fda = '0';
}

var val=form.category.options[form.category.options.selectedIndex].value; 
var val2=form.subcat.options[form.subcat.options.selectedIndex].value;
var val3=form.subcat1.options[form.subcat1.options.selectedIndex].value;
var val4=form.subcat2.options[form.subcat2.options.selectedIndex].value;
var comp1=form.mname.options[form.mname.options.selectedIndex].text;
var itemnum=document.getElementById('item').value; 
var desc=document.getElementById('desc').value;
var quan=document.getElementById('quan').value;
var list=document.getElementById('list').value;
var uom=form.uom.options[form.uom.options.selectedIndex].text;
self.location='add_products.php#bottom?fda=' + fda + '&desc=' + desc + '&quan=' + quan + '&list=' + list + '&uom=' + uom + '&item=' + itemnum + '&cat=' + val + '&cat2=' + val2 + '&cat3=' + val3 + '&cat4=' + val4 + '&comp=' + comp1 ;
} 
```

所以这不起作用：`self.location='add_products.php#bottom?fda=' + fda`

但这确实：`self.location='add_products.php?fda=' + fda`

知道将#bottom放在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:52:48.417

问题是哈希必须在最后的查询字符串之后。见[这篇](https://en.wikipedia.org/wiki/Fragment_identifier)文章。试试这个...（我也清理了代码）

```
function reload5(form){
    var val=form.category.options[form.category.options.selectedIndex].value,
        val2=form.subcat.options[form.subcat.options.selectedIndex].value,
        val3=form.subcat1.options[form.subcat1.options.selectedIndex].value,
        val4=form.subcat2.options[form.subcat2.options.selectedIndex].value,
        comp1=form.mname.options[form.mname.options.selectedIndex].text,
        itemnum=document.getElementById('item').value,
        desc=document.getElementById('desc').value,
        quan=document.getElementById('quan').value,
        list=document.getElementById('list').value,
        uom=form.uom.options[form.uom.options.selectedIndex].text,
        fda;

    if(document.getElementById('fda1').checked) {
         fda = 1;
    } else if(document.getElementById('fda0').checked) {
         fda = 0;
    } else {
         fda = -1;
    }

    window.self.location.href = 'add_products.php?fda=' + fda + '&desc=' + desc + '&quan=' + quan + '&list=' + list + '&uom=' + uom + '&item=' + itemnum + '&cat=' + val + '&cat2=' + val2 + '&cat3=' + val3 + '&cat4=' + val4 + '&comp=' + comp1 + "#bottom";
} 
```

我不明白的是为什么你不使用 Ajax 做一些不会导致页面刷新的事情。

# spring - Spring AOP - 建议不要在子类中覆盖超类方法

> ID：10063957
> 
> 赞同：2
> 
> 时间：2012-04-08T15:26:09.507
> 
> 标签：spring, aop, spring-aop

```
public abstract class AService<T> {
  public T needsToBeAdvised(T param) {
    T result = doSomething(param);
    return result;
  }
}

@Service
public class BService extends AService<B> {
  @Override
  public T needsToBeAdvised(T param) {
    return super.needsToBeAdvised(param);
  }
}

@Service
public class CService extends AService<C> {}

// (B & C implement an interface AType)

@Component
@Aspect
public class MyAspect {
  @Pointcut("execution(* package.AService+.needsToBeAdvised(*))")
  private void aNeedToBeAdvised() {}

  @AfterReturning(pointcut="aNeedToBeAdvised()", returning="param")
  public void interceptNeedsToBeAdvised(JoinPoint joinPoint, AType param) {
    // some action
  }
} 
```

鉴于此设置：

```
bService.needsToBeAdvised(bParam) //is intercepted 
```

但，

```
cService.needsToBeAdvised(cParam) //is NOT. 
```

如何在不覆盖`needsToBeAdvised()`in 的情况下实现这一目标`CService`？

编辑：

我应该补充一点`BService`，`CService`它们都在同一个包中。

如果我将切入点更改为以下内容：

```
@Pointcut("execution(* package.CService.needsToBeAdvised(*))")

cService.needsToBeAdvised(cParam) //is still not intercepted 
```

它起作用的唯一方法是如果我`needsTobeAdvised()`覆盖`CService`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:03:40.777

所有服务都在同一个包中吗？从您的示例代码中，我怀疑`AService`并`BService`在`package`包中，但`CService`在另一个包中。如果服务确实在不同的包中，您有一些选择：

*   移动，使它们在同一个包中
*   将切入点更改为更通用，例如`"execution(* *.A+.needsToBeAdvised(*))`
*   添加更多切入点

# actionscript-3 - 从 AS3 发布到 Twitter

> ID：10063958
> 
> 赞同：1
> 
> 时间：2012-04-08T15:26:13.100
> 
> 标签：actionscript-3, flash, fla

我有一个主菜单和一个游戏，它从该菜单作为单独的 swf 加载。到目前为止，当玩家在主菜单开始时输入他们的名字时，我可以将这个名字发布到 Twitter。此外，当玩家完成游戏时，我会将他们的时间发布到 Twitter 上。

问题是我想从主菜单中获取发布的名称并发送它，并且只有在玩家完成游戏后才会将他们的时间和名称发布到 Twitter。

主菜单中用于调度名称的代码：

```
[CODE]
var NameTextField:TextField = new TextField();
var MyFormat:TextFormat = new TextFormat();

addChild(NameTextField);

SubmitButton.addEventListener(MouseEvent.CLICK, SubmitClicked);

function SubmitClicked(e:MouseEvent)
{
    dispatchEvent(new Event(NameTextField.text, true));
    trace (NameTextField.text);
    NameTextField.selectable = false;
}
[/CODE] 
```

游戏中的代码以接收名称和发布时间到 twitter。

```
[CODE]
navigateToURL(new URLRequest('http://twitter.com/home?status='+encodeURIComponent(+NameTextField.text+" completed Game"+' in a time of '+HourText.text+':'+MinuteText.text+':'+SecondText.text+'')),'_blank');
[/CODE] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:39:32.473

为了在 Twitter 上发帖，您需要经过身份验证。

我建议您使用现有的 api，例如 swfjunkie_com 的 Tweetr 或 Denis Borisenko 的 Twitter-ActionScript-API

查看此帖子以获取示例代码和更多详细信息

[http://www.redcodelabs.com/2012/02/actionscript3-twitter-api/](http://www.redcodelabs.com/2012/02/actionscript3-twitter-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:42:40.093

我假设您已经处理了 Twitter 身份验证..

因此，当用户在主菜单上输入名称时，您可以将名称保存到 javascript 中的保存全局变量中，例如

```
var name = "some name"; 
```

并在用户完成播放后从 as3 调用
ExternalInterface

```
ExternalInterface.call('getName'.. 
```

在 js 中你应该有一个类似的函数

函数 getName() { 返回名称；}

# ios - 是否可以将某个对象的描述（字符串表示）转换为某个类的对象？

> ID：10063960
> 
> 赞同：0
> 
> 时间：2012-04-08T15:26:37.433
> 
> 标签：ios, object

我需要将一个参数传递给 IBAction（但在我的情况下它只有 sender(id) - UIButton），所以我想知道是否可以将某个对象的描述转换为一个对象。现在我将参数作为按钮的 [titleLabel 文本] 传递：

```
 [[button titleLabel]setText:[someObject description]]; 
```

在 IBAction 我得到描述：

```
 - (IBAction)AddToCalendarEvent:(id)sender {
         NSString * description = [[sender titleLabel]text];
         NSLog(@"description is %@", desc);
  } 
```

现在我想将此描述转换为一个对象。可能吗？

**UPD** 我正在用单元格动态填充表格视图。每个单元格都有四个按钮，我希望这些按钮保留一些对象作为参数传递给 IBAction。 ![每个按钮都必须存储日期](../Images/8eae21a90a04cb27165fc763cd6fc759.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:46:36.067

根据我已阅读并当前对您的问题的理解，我认为对您来说最好的解决方案是在您的视图控制器上维护一个按钮数组（或其他一些适当的数据结构）。然后，在每个按钮被点击时调用的操作方法中，您可以在按钮数组中搜索操作方法的发送者。然后，一旦您确定点击了哪个按钮，您就可以使用它在数据模型中查找您要查找的任何数据。您应该将此解决方案应用于您的情况，它可能最终看起来有点不同，但基本想法是合理的。您应该避免在视图中维护状态（在这种情况下是您的按钮），并且看起来您正在从对问题的描述中接近状态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T03:17:14.947

您绝对不会以这种方式转换。

一个简单的选项是将`tag`每个 UIButton 的 设置为唯一的整数，并存储您需要查找的对象数组：

```
- (IBAction)AddToCalendarEvent:(id)sender {
    NSInteger senderTag = [sender tag];
    NSLog(@"Sender index = %d", senderTag);
    // Use this tag as an index to the array.
} 
```

更复杂的方法是继承 UIButton（通常不推荐），以存储与每个 UIButton 关联的数据。然后您可以再次从`sender`.

# .net - XmlSerializer：反序列化字符串数组

> ID：10063961
> 
> 赞同：1
> 
> 时间：2012-04-08T15:26:41.217
> 
> 标签：.net, xml, xmlserializer

鉴于此 XML：

```
<Items>
 <Item>a</Item>
 <Item>b</Item>
</Items> 
```

我怎样才能反序列化这个使用`XmlSerializer`？要么进入某个自定义类型的数组，要么简单地进入`string[]`.

我知道如果最里面的标签被称为“字符串”可以做到这一点，但我想保留一个自定义名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T15:35:14.573

这是演示在 LINQPad 中使用 XmlSerializer 的一种方法

```
void Main()
{
    using(var stream = new StringReader("<Items><Item>a</Item><Item>b</Item></Items>"))
    {
        var serializer = new XmlSerializer(typeof(Container));

        var items = (Container)serializer.Deserialize(stream);

        items.Dump();
    }
}

[XmlRoot("Items")]
public class Container
{
    [XmlElement("Item")]
    public List<string> Items { get; set; }
} 
```

这是使用 XDocument 的另一种方式

```
void Main()
{
    var doc = XDocument.Parse("<Items><Item>a</Item><Item>b</Item></Items>");

    var list = doc.Element("Items").Elements("Item").Select (d => (string)d);

    list.Dump();
} 
```

# python - 如何检查3个字符是否按连续的字母顺序

> ID：10063962
> 
> 赞同：6
> 
> 时间：2012-04-08T15:26:44.867
> 
> 标签：python, sequence, alphabetical

只是好奇，确定 3 个字符的序列是否为连续的字母顺序的最 Pythonic/最有效的方法是什么？

在似乎可行的快速而肮脏的方式之下，其他更好的实现？

我想另一种方法可能是对序列的副本进行排序并将其与原始序列进行比较。不，这不能解释序列中的间隙。

（这不是家庭作业——NPR Sunday Morning 节目的听众会知道）

```
def checkSequence(n1, n2, n3):
    """ check for consecutive sequence of 3 """
    s = ord('a')
    e = ord('z')

#   print n1, n2, n3
    for i in range(s, e+1):
        if ((n1+1) == n2) and ((n2+1) == n3):
           return True

    return False

def compareSlice(letters):
    """ grab 3 letters and sent for comparison """

    letters = letters.lower()
    if checkSequence(ord(letters[0]), ord(letters[1]), ord(letters[2])):
        print '==> seq: %s' % letters
        return True

    return False 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T16:05:59.310

简单的：

```
>>> letters = "Cde"
>>> from string import ascii_lowercase
>>> letters.lower() in ascii_lowercase
True
>>> letters = "Abg"
>>> letters.lower() in ascii_lowercase
False 
```

或者，可以使用`string.find()`.

```
>>> letters = "lmn"
>>> ascii_lowercase.find(letters) != -1
True 
```

我猜使用它的函数看起来像：

```
def checkSequence(*letters):
    return ''.join(letters).lower() in ascii_lowercase 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T15:35:43.100

这是一个很好的pythonic方法来检查任意长的字符序列：

```
def consecutive_chars(l):
    return all(ord(l[i+1])-ord(l[i]) == 1 for i in range(len(l)-1)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T15:38:09.763

```
ord('a') < ord(a)+1 == ord(b) == ord(c)-1 < ord('z') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-08T15:38:30.300

这可以简单地完成为

```
>>> x=['a','b','c']
>>> y=['a','c','b']
>>> z=['c','b','a']
>>> x==sorted(x) or x == sorted(x,reverse=True)
True
>>> y==sorted(x) or y == sorted(y,reverse=True)
False
>>> z==sorted(x) or z == sorted(z,reverse=True)
True
>>> 
```

这样想。字母是连续的，如果它们是升序或降序排序的。

正如评论中指出的那样，如果序列包含孔，这将不起作用，另一种方法是

```
>>> ''.join(x).lower() in string.lowercase
True
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T15:33:00.187

像这样的东西怎么样：

```
l = letters.lower()
if len(l)>=3 and ord(l[0])+2==ord(l[1])+1==ord(l[2]): print "yes"
else: print "no" 
```

# .net - mySql and .net desktop applications

> ID：10063975
> 
> 赞同：0
> 
> 时间：2012-04-08T15:29:13.413
> 
> 标签：.net, mysql, database

after doing some research i'm still not sure if using mysql with .net desktop apps is the right choice. most tutorials for mysql are explained with php and mention that this DB in mainly used in web applications, but the SQL server alternative is either size limited (express version) or quite expensive. i tried this nice tutorial: [http://weblogs.asp.net/gunnarpeipman/archive/2010/12/09/getting-mysql-work-with-entity-framework-4-0.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/12/09/getting-mysql-work-with-entity-framework-4-0.aspx) and created a small WPF + Entity framework application that seems to work nice but i would be happy if someone with more experience in this could give me some advice.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:23:23.933

When you say "desktop app", do you mean that the database is "private" to one instance of the application, or that there are several application instances "talking" to the same database (potentially over the network)?

If the *former* is the case, what you really need is an "embedded" database. There are several options, including:

*   [SQL Server Compact](http://www.microsoft.com/sqlserver/en/us/editions/compact.aspx),
*   [SQL Server 2012 Express LocalDB](http://msdn.microsoft.com/en-us/library/hh510202.aspx) (a deplyment option of [SQL Server 2012 Express](http://www.microsoft.com/sqlserver/en/us/editions/express.aspx)),
*   [SQLite](http://www.sqlite.org/),
*   [Firebird](http://www.firebirdsql.org/manual/fbmetasecur-embedded.html) or [Interbase](http://www.embarcadero.com/products/interbase/product-editions),
*   [Berkeley DB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html),
*   etc...

You could of course also use a client-server DBMS in that scenario, but you'd have to consider whether this might be "too powerful" for your needs, and put unnecessary administration burden on your customers.

If the *latter* is the case, then you definitely need a "real" client-server DBMS.

# c# - 在 C# 中使用 ADO.NET 进行登录身份验证

> ID：10063978
> 
> 赞同：0
> 
> 时间：2012-04-08T15:29:43.067
> 
> 标签：c#, mysql, winforms, ado.net

这是我在 Stackoverflow 的第一次。所以我只想问关于在 C# 中使用 ADO.NET 进行登录身份验证的问题。

就这样吧。

我偶然阅读了一本名为“Syngress - SQL 注入攻击和防御”的电子书，我对书中给出的示例有点困惑。

这是书中的示例代码，我对这些示例感到困惑

```
SqlConnection con = new SqlConnection(ConnectionString);
string Sql = "SELECT * FROM users WHERE username=@username" + "AND password=@password";
cmd = new SqlCommand(Sql, con);
// Add parameters to SQL query
cmd.Parameters.Add("@username",              // name
                   SqlDbType.NVarChar,       // data type
                   16);                      // length
cmd.Parameters.Add("@password",
                    SqlDbType.NVarChar,
                    16);
cmd.Parameters.Value["@username"] = username; // set parameters
cmd.Parameters.Value["@password"] = password; // to supplied values
reader = cmd.ExecuteReader(); 
```

我对“cmd.Parameters.Value”部分感到困惑，因为当尝试编码时，我的 IDE 中没有给出 Parameters.Value ..

所以我所做的是我正在使用 cmd.Parameters.AddWithValue("?cashieruser", cashieruser); 比 Parameters.Value 因为它在 Visual Studio 2010 的 IntelliSense 中找不到。

这是我的代码：

```
public bool isAuth(String cashieruser, String cashierpass)
{
    bool IsAuth = false;
    con.ConnectionString = conString;
    String sql = "SELECT * FROM cashieraccount WHERE cashieruser = ?cashieruser" + "AND cashierpass = ?cashierpass";
    MySqlCommand cmd = new MySqlCommand(sql, con);

    //Add parameters to SQL Query
    cmd.Parameters.Add("?cashieruser", MySqlDbType.VarChar, 35);
    cmd.Parameters.Add("?cashierpass", MySqlDbType.VarChar, 15);

    cmd.Parameters.AddWithValue("?cashieruser", cashieruser);
    cmd.Parameters.AddWithValue("?cashierpass", cashierpass);
    cmd.ExecuteScalar();

    try
    {
       con.Open();
       MySqlDataReader rdr = cmd.ExecuteReader();
       if (rdr.Read())
       {   
          IsAuth = true;
       }
       else
          IsAuth = false;
    }
    finally
    {
       con.Close();
    }
    return IsAuth;
} 
```

所以我得到了一个例外：“参数'？cashieruser'已经被定义。” 那么我将使用什么语法来设置参数并提供值？ *顺便说一句，我正在使用它与 ADO.NET 一起使用的 MySQL*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:39:01.273

在您的第一个示例中，有一个错误。参数是使用索引的集合。
正确的语法是：

```
cmd.Parameters["@username"].Value = username; // set parameters 
cmd.Parameters["@password"].Value = password; // to supplied values 
```

在第二个示例中，您尝试两次添加相同的参数
您可以将创建和值设置与仅允许删除 AddWithValue 行的一行结合起来

```
//Add parameters to SQL Query   
cmd.Parameters.Add("?cashieruser", MySqlDbType.VarChar, 35).Value = cashierUser;   
cmd.Parameters.Add("?cashierpass", MySqlDbType.VarChar, 15).Value = cashierPass; 
```

还应删除 cmd.ExecuteScalar。
连接打开后运行 ExecuteReader。最后，但这可能是一个错字。
在您的查询文本中，第一个 where 条件和查询的第二部分之间没有空格。（真的没有必要在这里连接字符串。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-07T06:17:08.127

您也可以直接在查询中提及变量。像这样..

```
string sQuery = "select * from cashieraccount where cashieruser =" + cashieruser + " and cashierpass =" + cashierpass;
SqlCommand cmd = new SqlCommand(sQuery, con);
SqlDataReader dr = cmd.ExecuteReader();
            if (dr.Read())
            {
                //Login success code
            }
            else
            {
                //Login failed code
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:35:38.077

编码

```
cmd.Parameters.Add("?cashieruser", MySqlDbType.VarChar, 35); 
```

将“?cashieruser”参数添加到 cmd 对象的参数集合中。由于参数已经添加到集合中，您可以像这样设置它的值：

```
cmd.Parameters["?cashieruser"].Value = cashieruser; 
```

或者，如果您尚未使用 Add 方法将参数添加到集合中，则可以使用 AddWithValue 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T15:38:45.760

首先，我认为您应该阅读的示例代码：

```
cmd.Parameters["@username"].Value = username; // set parameters
cmd.Parameters["@password"].Value = password; // to supplied values 
```

其次，您遇到了该异常，因为您尝试添加相同的参数名称两次。如果您使用该`Add()`方法添加参数，然后使用上面的语法设置应该对您的问题进行排序的值。

# javascript - jQuery确认对输入文本的影响

> ID：10063980
> 
> 赞同：0
> 
> 时间：2012-04-08T15:30:08.943
> 
> 标签：javascript, jquery, events

好吧，这就是我想做的：我有一个文本字段和一个文本区域，它们都充当控制台窗口。我正在开发一个非常基本的解释器模拟，它有自己的编程语言和 javascript (jQuery)，所以当我开始执行用户之前键入的程序时，我会遍历所有指令，并在到达特殊指令时 (" leer") 用户必须在此控制台中输入一些内容并暂停程序的执行，我知道当按下 'return' 键时用户已完成输入。当这种情况发生时，程序将继续其正常的执行流程。

现在，此行为与确认框的行为非常相似，因为它等待输入，并且当用户按下任何按钮（是/否）时，执行将继续。

我希望我已经解释得足够清楚，以便你们所有人都知道我的问题是什么。我知道在这里放置一些代码会很棒，但我真的不知道它的哪一部分会有所帮助，所以如果您需要一些代码，请告诉我。

这是页面的外观。 ![chmaquina 执行](../Images/afd330346a296ad34521e180b4580cac.png)

这是用于执行每个程序的代码：

```
this.ejecutarPrograma = function(pidprograma) {
    var programa = this.listaProgramas[pidprograma];
    if(programa == undefined) throw "ERROR!, PID no encontrado"
    var posIni, posEnd;
    posIni = programa.obtenerRbp();
    posEnd = programa.obtenerRlc();
    this.cp = posIni;
    var temp = this.memoria[this.cp].split(/\s+/);
    while (this.cp < posEnd || temp[0] != "retorne") {
        try {
            if (temp[0] == "vaya") {
                this.cp = ACCIONES[temp[0]](this.cp, temp[1], programa);
            }
            else if (temp[0] == "vayasi") {
                this.cp = ACCIONES[temp[0]](this.memoria[0], this.cp, temp[1], temp[2], programa);
            }
            else if (temp[0] == "nueva" || temp[0] == "etiqueta" || temp[0] == "retorne") {
                // nada de nada por aca porque estos ya estan implementados
                this.cp++;
            }
            else {
                this.memoria[0] = ACCIONES[temp[0]](this.memoria[0], temp[1], programa);
                this.cp++;
            }
            var temp = this.memoria[this.cp].split(/\s+/);
        }
        catch (e) {
            throw "Linea " + (this.cp).toString() + ": " + e;
        }
    }
}; 
```

ACCIONES 是一个关联数组，它保留指令的名称，并且作为一个值具有函数，指令“leer”是空的，它只是从输入中获取一个值并将该值复制到程序的变量中

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:35:24.330

我不确定我是否完全理解这个问题，但听起来你正在寻找这个`prompt`功能。

例如：

```
prompt('Please enter your input.'); 
```

用户单击确定后，输入作为字符串返回。如果他们单击取消，则返回 null。

编辑：

在看到您对 imsky 答案的评论后，我想我对您想要做什么有了更好的理解。如我错了请纠正我。

您有一个循环，您希望连续运行直到用户执行某项操作，此时您希望循环等待用户完成，然后继续执行循环？

如果是这种情况，请尝试将循环放入函数中并使用`setTimeout(yourfunction,0)`; 函数的每次迭代，检查用户是否做了某事（这意味着当用户做某事时设置一个变量并从内部检查它`yourfunction()`。如果用户没有做某事，继续循环（通过使用 setTimeout 技巧），否则做任何你需要做的事情，之后你可以再次调用`yourfuntion()`这里唯一的问题是你不能`yourfunction`在执行过程中中断，只能在每个“循环”之间中断。

这是一个例子：http: [//jsfiddle.net/PYabX/](http://jsfiddle.net/PYabX/)

这是有道理的，还是我完全离开了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:33:25.160

听起来您想要控制台输入字段上的[keyup处理程序。](http://api.jquery.com/keyup/)检查事件的键码，如果是回车键，继续处理程序。

编辑：好的，我看到你的代码中有一个while循环。当你点击输入指令时尝试引入另一个 while 循环，并在点击 Enter 时满足它。

# android - Android TCP 套接字

> ID：10063983
> 
> 赞同：3
> 
> 时间：2012-04-08T15:30:57.913
> 
> 标签：android, tcp, azure

我正在尝试在 Android 模拟器中创建一个新的 TCP 套接字。下面是安卓代码：

```
Socket s = new Socket("111.221.88.15", 8080); 
```

但我不断收到 UnknownHost 异常。我能够在 Windows C# 应用程序中创建连接。

该站点是一个测试项目，在 Microsoft Azure 中开发。网址：**http ://tcptest24.cloudapp.net/**

我尝试使用 URL 代替 IP 地址及其各种变体，但我不断收到相同的错误。

希望我被收费时能早日得到回应 :) 没有客户，该网站将毫无用处。

谢谢，阿尼尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T15:33:27.803

您需要将`INTERNET`权限添加到清单中。

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# google-chrome - Chrome 是否错误地显示了这个 SVG 模式？

> ID：10063985
> 
> 赞同：3
> 
> 时间：2012-04-08T15:31:11.000
> 
> 标签：google-chrome, webkit, svg, browser-bugs

我的 HTML5 文件 ( [http://jsfiddle.net/Jbfw2/](http://jsfiddle.net/Jbfw2/) ) 中有以下内联 SVG 代码：

```
<div style="width: 1150px; height: 900px;">
  <svg width="1150" height="900">
    <defs>
      <pattern id="line1" x="0" y="0" width="5" height="200" patternUnits="userSpaceOnUse">
        <path fill="#ffffff" d="M 0 0 L 5 0 L 5 200 L 0 200 Z"/>
        <path id="horizontal" stroke-width="1" stroke="#000" d="M 0 0 L 5 0"/>
        <path id="vertical" stroke-width="1" stroke="#000" d="M 5 0 L 5 200"/>
      </pattern>
    </defs>
    <g id="holder1" transform="translate(4.5,50) matrix(1,2,0,1,0,0)">
      <rect x="0" y="0" width="75" height="200" fill="url(#line1)"></rect>
    </g>
   </svg>
 </div> 
```

此代码在 Safari 和 Firefox 中产生正确的结果。但是，Chrome 不会显示所有垂直线。如果我平移`holder1`而`5`不是`4.5`X 方向，Chrome 会正确显示垂直线。

有人可以告诉我这是否是一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:58:45.620

我不认为这是一个错误，这只是浏览器进行渲染的方式不同。很可能涉及到与图案线的宽度有关的舍入问题。

通过将 translate 的第一个值更改为各种值，我能够使它们“消失”：

IE - 4.8
火狐 - 6.3
铬 - 4.5

我建议将图案线的宽度增加到 2，这样它们就不会被四舍五入，这样当你应用转换时它们就不会被“抹去”。

[http://jsfiddle.net/Jbfw2/1/](http://jsfiddle.net/Jbfw2/1/)

# c# - C# /Javascript /ASP.NET - 从子页面更改 DIV 内容

> ID：10063986
> 
> 赞同：0
> 
> 时间：2012-04-08T15:31:13.537
> 
> 标签：c#, javascript, asp.net, ajax, http

基本上我有一个定义网站基本布局的母版页。我想要做的是，在子页面中更改 div 的内容。我知道我可以使用这个：

```
//((HtmlGenericControl)this.Page.Master.Master.FindControl("friends")).InnerHtml = ""; 
```

但是，例如，如果我想更改 div 并插入无序列表，我不能在其中放置标签。

我该怎么做，如果您可以发布一个示例，我将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:38:58.753

您可以将 div 公开为像 PlaceHolder 这样的服务器端控件，并通过`div.Controls.Add(control);`子表单的服务器端代码向其添加控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:13:53.923

```
 HtmlGenericControl div = (HtmlGenericControl)Page.FindControl("<<div id>>");
 HtmlGenericControl ul = HtmlGenericControl("ul")
 HtmlGenericControl liToAdd = null;
 HtmlGenericControl linkToAdd = null;
        for (int i = 0; i < 10; i++)
        {
            liToAdd = new HtmlGenericControl("li");
            linkToAdd = new HtmlGenericControl("a");
            linkToAdd.InnerText = "demo";
            linkToAdd.Attributes.Add("href", "");
            liToAdd.Controls.Add(linkToAdd);
            ul.Controls.Add(liToAdd);

        }
            div.Controls.Add(ul); 
```

# joomla - 删除 Joomla 2.5 博客中的 Readmore 功能

> ID：10063992
> 
> 赞同：0
> 
> 时间：2012-04-08T15:32:10.017
> 
> 标签：joomla, joomla2.5

我有一个包含几篇文章的类别。我已经设置了菜单以将该类别显示为博客布局，并在此处关闭了 show readmore。

我还在每篇文章的最后添加了“readmore”div，以防止文章被缩短。

当显示类别页面时，两篇文章现在已完整显示，但我想在最后删除那个该死的“阅读更多”。感觉就像是在末尾添加了 readmore 的 hack。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:35:59.177

这很简单......一旦禁用“阅读更多”，您就根本不需要`<hr class="readmore" />`在文章内容中使用。您还可以在文章管理器 > 首选项中取消设置阅读更多。

如果这对您没有帮助，那么您可以尝试次要的 css hack。添加CSS样式。您可以将其添加到模板或文章本身（如果您要添加到文章，请确保您在全局配置中禁用了对超级管理员的过滤）

```
<style type="text/css">
.readmore { display: none; }
</style> 
```

# java - 如何使用java编程语言和jsp搭建个人服务器

> ID：10063993
> 
> 赞同：0
> 
> 时间：2012-04-08T15:32:51.227
> 
> 标签：java, web-services, jsp, httpurlconnection

我想知道这是否可能。我正在考虑使用 java 和 jsp 创建一个服务器客户端应用程序，但不想使用在线托管服务。这是我第一次使用jsp，我对java知之甚少。所以任何建议将不胜感激

[http://www.manageengine.com/products/applications_manager/monitor-tomcat.html?gclid=CNyHxK3Jpa8CFWOc4godL0DEXA](http://www.manageengine.com/products/applications_manager/monitor-tomcat.html?gclid=CNyHxK3Jpa8CFWOc4godL0DEXA)

我已经阅读了有关 tomcat 服务器应用程序的信息，但我不确定该怎么做。

谢谢，

倾斜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:52:39.270

是的，有可能。但是，如果您不了解 JSP 并且您对 Java 知之甚少，那么您需要学习很多东西才能提高工作效率。

我建议您从阅读 Oracle Java 教程和 Oracle JSP 和 Servlet 教程开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:58:18.930

Tomcat 只是一个 Web 服务器/servlet 容器。这意味着它能够接受和处理http请求。但是，您只需要经历一次配置 Tomcat 的麻烦，然后您的 Web 服务器就可以启动并运行。

通常，您在网站上的大部分工作将是开发应用程序本身，然后将其`$TOMCAT_HOME/webapps`作为`.war`文件部署在您的目录中。Tomcat 知道如何从那里处理它。

就应用程序开发而言，我建议查看 Spring Framework。毫无疑问，它是行业标准之一，通过注释配置，您将很快启动并运行。

有大量的博客文章详细介绍了如何使用 Spring 注释。为了获得基础，我推荐[这个很好的，如果有些过时的教程](http://static.springsource.org/docs/Spring-MVC-step-by-step/)。它不使用注释，但它会引导您使用 Spring、Tomcat、JSP 和数据库设置您的第一个网站。

# mysql - MYSQL 多参数搜索

> ID：10063995
> 
> 赞同：0
> 
> 时间：2012-04-08T15:33:11.297
> 
> 标签：mysql, sql, database, search

我在 MySQL 中运行多参数搜索查询时遇到问题：

```
 SELECT item.* from item, attr, attr_xref
    WHERE attr_xref.item = item.id
    AND attr.id = attr_xref.attrID
    AND (
      (attr.name = 'city' AND attr.val LIKE '%new york%')
      OR
      (attr.name = 'floor' AND attr.val = 6)
    ) 
```

查询是用php动态生成的，没有问题。

问题是这个查询不会返回严格的搜索。它将返回城市或楼层等于其搜索值的项目。

如我所见，问题出在`AND attr.id = attr_xref.attrID`此行为具有多个属性的项目返回多个值，删除`OR`运算符我将尝试将单个属性与多个不同的名称和值匹配，但具有一个 ID。

有什么办法可以克服这个吗？

这是一个原始示例，在运行时我可能有超过 2,3 个搜索参数。

谢谢，期待您的帮助！

**编辑：** 通过使用已接受答案中发布的 SQL 查询使其工作，并添加了以下内容：

```
AND (a_city.id IS NOT NULL
OR a_floor.id IS NOT NULL)
GROUP BY imobil.id
HAVING COUNT(*) = 2 
```

您想对结果进行分组然后对其进行计数，'= 2' 表示已传递了多少个参数，这将在 PHP 中计算。谢谢或您的帮助。如果您遇到问题，您可能想阅读此[问题](https://stackoverflow.com/questions/301793/mysql-using-count-in-the-where-clause)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:06:20.263

添加两个左连接，将创建一个具有“floor”的 attr.val 的列和另一个具有“city”的 attr.val 的列，并检查至少一个不为空。

像这样的东西：

```
SELECT 
    item.*
FROM 
    item
JOIN 
    attr_xref ON attr_xref.item = item.id
LEFT JOIN 
    attr a_city ON  a_city.id = attr_xref.attrID 
                AND a_city.name = 'city'
                AND a_city.val LIKE '%new york%'
LEFT JOIN
    attr a_floor ON a_floor.id = attr_xref.attrID
                AND a_floor.name = 'floor'
                AND a_floor.val = 6 
WHERE 
    a_city.id IS NOT NULL 
    OR a_floor.id IS NOT NULL 
```

我没有对其进行测试，但是与此类似的一些方法可能对您有用。

# java - 为枚举构建通用 DynamoDBMarshalling

> ID：10063996
> 
> 赞同：12
> 
> 时间：2012-04-08T15:33:11.647
> 
> 标签：java, generics, annotations, amazon-web-services, amazon-dynamodb

我正在为 DynamoDB 使用适用于 Java 的 Amazon Web Services SDK；试图满足@DynamoDBMarshalling 的接口：

```
Class<? extends DynamoDBMarshaller<? extends Object>> marshallerClass(); 
```

我构建了一个接收任何枚举的编组器：

```
public class EnumMarshaller<T extends Enum<T>> implements DynamoDBMarshaller<T>
{
    @Override
    public String marshall(T getterReturnResult)
    {
        return getterReturnResult.toString();
    }

    @Override
    public T unmarshall(Class<T> clazz, String obj)
    {
        return Enum.valueOf(clazz, obj);
    }
} 
```

问题是，当我尝试在我的字段上使用注释时，我无法弄清楚：

```
public static enum MyEnum {BLA, BLA2}

@DynamoDBMarshalling(marshallerClass=EnumMarshaller<MyEnum>.class)
    public MyEnum getStatus()
    {
        return status;
    } 
```

我不能在泛型类型上调用 .class 并且其他一些尝试出现了不同的错误。我开始认为亚马逊的合同是不可能的......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-06T16:45:25.640

以下对我来说很好：

**马歇尔：**

```
public class EnumMarshaller implements DynamoDBMarshaller<Enum> {
    @Override
    public String marshall(Enum getterReturnResult) {
        return getterReturnResult.name();
    }

    @Override
    public Enum unmarshall(Class<Enum> clazz, String obj) {
        return Enum.valueOf(clazz, obj);
    }
} 
```

**在我的带有枚举的表类中：**

```
@DynamoDBMarshalling(marshallerClass=EnumMarshaller.class)
@DynamoDBAttribute(attributeName = "MyEnum")
public MyEnum getMyEnum() {
   return myEnum;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T23:58:58.297

我通过使用特定的类类型对 JsonMarshaller 进行子类化来解决这个问题：

```
public class FooMarshaller extends JsonMarshaller<Foo>
{
    // No impl required
} 
```

然后将编组注释添加到数据属性中，例如：

```
@DynamoDBMarshalling(marshallerClass = FooMarshaller.class)
public Set<Foo> getFoos()
{
    return foos;
} 
```

如果您必须添加许多类类型会很痛苦，但它确实有效。