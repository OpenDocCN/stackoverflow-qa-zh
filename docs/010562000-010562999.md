# StackOverflow 问答 10562000-10562999

# asp.net - How to access a SQL Server corporate database remotely?

> ID：10562001
> 
> 赞同：0
> 
> 时间：2012-05-12T07:56:54.583
> 
> 标签：asp.net, sql-server-2008-r2

I am a new web developer and in my company they put the web application in one of the servers and the database in another server which is located in the company data center.

Now, there is a problem in one of the ASP.NET applications which is basically about giving one of the users the whole admin right on that system. That system lacks the feature of adding users and giving them this role. So basically I have to access that corporate database and go the UserRoles table and give the user the desired role. So how to do that?

From the web config file, I could be able to know the name and location of the database. The database is SQL Server. And I want now to access it remotely if it is possible. So how to do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:05:28.757

使用最新版本的[SQL Server Management Studio Express](http://www.microsoft.com/en-us/download/details.aspx?id=8961)或[SSMSE 2012](http://www.microsoft.com/betaexperience/pd/SQLEXPCTAV2/enus/default.aspx)连接到远程 Sql Server 数据库并运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:48:33.267

您应该看到您的组织中正在部署哪些实践并遵循它，可能包括：

1.  您正在编写更新 SQL 脚本
2.  联系数据库管理员在生产服务器上部署该脚本

# asp.net-mvc-3 - Handling all exceptions within global.asax

> ID：10562003
> 
> 赞同：1
> 
> 时间：2012-05-12T07:57:20.720
> 
> 标签：asp.net-mvc-3, c#-4.0, exception-handling, iis-7.5

I'm trying to handle all application exceptions within global.asax for an MVC 3 project and whilst everything is working correctly within Cassini, as soon as I deploy to IIS 7.5, IIS starts taking control away from my application and handles many exceptions itself. This has the consequences of bypassing my custom logging and also returning ugly views.

I have a similar approach to Darin's [answer](https://stackoverflow.com/a/4912456/729541) to [this question](https://stackoverflow.com/questions/4911212/how-to-implement-proper-http-error-handling-in-net-mvc-2). Here's what I'm using at the moment.

```
protected void Application_Error(object sender, EventArgs e)
{
    var app = (MvcApplication)sender;
    var context = app.Context;
    var exception = app.Server.GetLastError();

    LogExceptionDetails(exception, Request.Url.PathAndQuery);

    context.Response.Clear();
    context.ClearError();

    string redirectTo = "/error";
    HttpException httpException = exception as HttpException;

    if (httpException != null)
    {
        switch (httpException.GetHttpCode())
        {
            case 403:
                redirectTo += "/forbidden";
                break;
            case 404:
                redirectTo += "/notfound";
                break;
        }
    }

    Response.TrySkipIisCustomErrors = true;

    // I should really change this so I can return a proper statusCode
    Response.Redirect(redirectTo);
} 
```

As an example, navigating to `localhost/app_code` will return an ugly view and won't be logged. I have managed to at least make IIS return my custom views by using:

```
<httpErrors errorMode="Custom" existingResponse="Replace">
    <remove statusCode="403" />
    <error statusCode="403" path="/error/forbidden" responseMode="ExecuteURL" />
    <remove statusCode="404" />
    <error statusCode="404" path="/error/notfound" responseMode="ExecuteURL" />
</httpErrors> 
```

That doesn't solve the logging problem though.

Other things I've tried include:

1.  Setting `existingResponse="PassThrough"`.
2.  Using `<clear />`.
3.  Various combinations of `httpErrors` with and without `customErrors`.
4.  Setting `<modules runAllManagedModulesForAllRequests="true" />`.
5.  `Response.TrySkipIisCustomErrors = true;`

Is there a way to handle this programmatically, whilst keeping things centralised in global.asax, rather than messing around with the web.config?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:46:20.013

是的。这就是我正在做的事情，但不幸的是它并不完美。

首先，关闭自定义错误。

```
<customErrors mode="Off" /> 
```

接下来，将 HttpErrors 更改为详细。请注意，这是我不太喜欢的部分，主要是因为如果您这样做，似乎您可能会使堆栈跟踪可访问。我认为只要您在错误处理中处理所有状态代码，通过使用全部捕获，您应该没问题。如果我错了，请纠正我。

```
<httpErrors errorMode="Detailed" /> 
```

您还需要`catch all route`在 global.asax 中捕获所有与您定义的路由不匹配的 MVC 路由，并将它们发送到您的 404。这可能会出现问题，具体取决于您的路由设置，主要是如果您依赖于 catch all route 来处理您当前的非 404 路由。我使用反射来根据控制器中的 Action 方法定义我的所有路由，因此我不依赖于应用程序路由的全部捕获模式。

最后，处理 global.asax 中的错误。使用catch all（例如500）并为您想要的任何不同的东西执行特殊路由，例如404错误。

```
protected void Application_Error(object sender, EventArgs e)
{
    var ex = Server.GetLastError().GetBaseException();

    Server.ClearError();

    var routeData = new RouteData();
    routeData.Values.Add("controller", "Error");
    routeData.Values.Add("action", "500");

    if (ex.GetType() == typeof (HttpException))
    {
        var httpException = (HttpException) ex;
        var code = httpException.GetHttpCode();

        // Is it a 4xx Error
        if (code % 400 < 100)
        {
            routeData.Values["action"] = "404";
        }
    }

    IController errorController = new ErrorController();
    errorController.Execute(new RequestContext(new HttpContextWrapper(Context), routeData));
} 
```

请注意，在我的示例中，我将除 4xx 错误之外的所有错误都视为 500。此外，在此示例中，我使用了一个名为“ErrorController”的控制器和两个名为“500”和“404”的操作。

我希望这会有所帮助，如果您找到需要将 HttpErrors 设置为“详细”的解决方法，请分享！

# entity-framework - 无法先使用 EF 代码重新创建数据库

> ID：10562004
> 
> 赞同：0
> 
> 时间：2012-05-12T07:57:25.553
> 
> 标签：entity-framework, ef-code-first

我正在努力学习`EF Code first`。最初，我在 ModelClass 上使用 DataAnnotation 尝试了所有约束。而且工作很好。
但现在我正在尝试使用`Fluent API`独立配置文件，但它无法重新创建数据库并抛出此错误

> 无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。

**这是我的模型**

```
public Class User
{
    public string UserID { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
} 
```

**这是我的 DbContext**

```
public class AppContext : DbContext
{
    public DbSet<User> Users { get; set; }

    //Public constructor to Call DropCreateDatabaseIfModelChanges method
    public AppContext()
    { 
        //Calling the Method to ReCreate the database
        Database.SetInitializer(new DropCreateDatabaseIfModelChanges<AppContext>());
    }

    //Overriding OnModelCreating Method to Configure the Model using Fluent API
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
         modelBuilder.Configuration.Add(new UserConfiguration());
    }
} 
```

**这是我的 UserConfiguration 类**

```
public class UserConfiguration : EntityTypeConfiguration<User>
{
     public UserConfiguration()
     {
          //Using Fluent API to configure Model
          HasKey(x => x.UserID);
          Property(x => x.Username).IsRequired().HasMaximumLength(50);
          Property(x => x.Password).IsRequired().HasMaximumLength(50);

     }
} 
```

我无法弄清楚我错在哪里。任何建议都是可观的。

**注意：我使用的是 EF 4.3.1**

**编辑**如果我将配置直接放入方法中，则效果很好
，即`Fluent API``OnModelCreating`

```
//Overriding OnModelCreating Method to Configure the Model using Fluent API
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
         //Instead of Standalone Configuration file
         //modelBuilder.Configuration.Add(new UserConfiguration());

         //putting configuration here only
          modelBuilder.Entity<User>().HasKey(x => x.UserID);
          modelBuilder.Entity<User>().Property(x => x.Username).IsRequired().HasMaximumLength(50);
          modelBuilder.Entity<User>().Property(x => x.Password).IsRequired().HasMaximumLength(50);
    } 
```

但是我不知道它不能与独立配置文件即`UserConfiguration`类一起使用的原因。请有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:53:39.923

错误发生在应用程序的其他部分，由于创建了哪个数据库架构，但`dbo._MigrationHistory`无法在 sqlServer 上创建表，这就是 Codefirst 无法删除数据库的原因，因为所需的信息不存在。当我删除数据库时，它可以正常工作，但我猜浏览器正在显示缓存的数据。当我重新启动系统时，一切都很好。

# json - MVC3 门户处理来自 Web 服务的 JSON 数据

> ID：10562006
> 
> 赞同：0
> 
> 时间：2012-05-12T07:57:28.183
> 
> 标签：json, asp.net-mvc-3, web-services

我必须构建基于 MVC3 ASP.NET 的小型门户，该门户将从其他基于 MVC3 ASP.NET 的 Web 服务接收 JSON 格式的数据。服务将从数据库中获取数据，对其进行序列化，并将其作为 JsonResult 发送。Portal 需要捕获该数据并将其反序列化回模型并将其扔到适当的视图中。

由于我对此有点陌生，我正在考虑将 WebClient 用于门户网站，但我不知道是否有比这更好的东西？想法是在控制器内处理数据。

另外，我将不胜感激任何示例/教程。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:15:41.410

我确实做到了这一点。我使用 HttpWebRequest 和 HttpWebResponse 类创建了一个通用类来使用外部 Web 服务。

使用 HttpWebRequest 类的理由可能是我相信您在使用 HttpWebRequest 时可以获得更精细的控制，因为 WebClient 类本质上是 HttpWebRequest 的包装器。然后将 Web 服务响应反序列化为 Web 门户应用程序中的自定义对象。

我也不会处理控制器中的数据并保持它们更清洁，我将此任务抽象为一个服务类，在该类中需要对响应进行任何验证/修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:11:57.200

我不确定我是否完全理解您的问题，但如果您询问两个 Web 应用程序之间的正确通信方式，我建议您使用`WCF`. 在这种情况下，将通过 SOAP 消息而不是 JSON 进行通信。

但是如果您询问如何将对象序列化为 JSON 格式，那么您可以使用 JSON.NET 库。

[一、WCF简介](http://wcftutorial.net/Introduction-to-WCF.aspx)

[2.JSON.NET](http://json.codeplex.com/)

[3.有用的资源](https://stackoverflow.com/questions/1302946/asp-net-mvc-controlling-serialization-of-property-names-with-jsonresult)

# iphone - How to increment the row of uipicker when it is scrolled in iphone

> ID：10562011
> 
> 赞同：0
> 
> 时间：2012-05-12T07:58:04.590
> 
> 标签：iphone, objective-c

I have a UIPicker which i'm developing through an array. In my array i am currently saving 10 values in it and number of rows of UIPicker counting array, then Picker shows 10 values in it .But my problem is, when i scroll the UIPicker, i want that after the 10th row is scrolled new rows should be automatically added with values filled in it. Actually i have added picker in an action sheet.This is my code through which i am loading data in picker.

```
- (void)viewDidLoad 
{   
    currentData = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",nil];
    [super viewDidLoad];
}

 #pragma mark  UIPickerViewDelegate Methods
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}
-(NSInteger)pickerView:(UIPickerView*)pickerView numberOfRowsInComponent:(NSInteger)component
{
    int count;  
    if ([pickerType isEqualToString:@"picker"])
    {
        count = [currentData count];
    }

    return count;
}
-(NSString*)pickerView:(UIPickerView*)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    NSString *string;
    if ([pickerType isEqualToString:@"picker"])
    {
        NSString *str = @"miles";
        //string = [NSString stringWithFormat:@"%d",[currentData objectAtIndex:row],@"%@",str];
        string = [NSString stringWithFormat:@"%@" @"%@",[currentData objectAtIndex:row],str];
        NSLog(@"%@",string);
    }   
    return string;
}
-(CGFloat)pickerView:(UIPickerView*)pickerView widthForComponent:(NSInteger)component
{
    return 300;
}
-(void)pickerView:(UIPickerView*)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    select = YES;       
    if([barItems objectAtIndex:2]!=0)
    {                   
    if ([pickerType isEqualToString:@"picker"])
    {
        sessoTxt.text = [currentData objectAtIndex:row];
    }                   
}
    else{
        sessoTxt.text = @"Select";
    }    
} 
```

How to increment the row of picker dynamically when it is scrolled after the last array value.Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:19:44.640

您可以查看[http://forums.macrumors.com/showthread.php?p=6120638&highlight=UIPickerView#post6120638](http://forums.macrumors.com/showthread.php?p=6120638&highlight=UIPickerView#post6120638)

# eclipse - Eclipse Marketplace 错误 - 意外异常：org/eclipse/equinox/internal/p2/repository/RepositoryTransport

> ID：10562012
> 
> 赞同：29
> 
> 时间：2012-05-12T07:58:28.753
> 
> 标签：eclipse, eclipse-marketplace

当我尝试在 Eclipse 中浏览 Marketplace 时，它​​给了我这个：

```
Unexpected exception: org/eclipse/equinox/internal/p2/repository/RepositoryTransport
java.lang.reflect.InvocationTargetException 
```

可能是什么问题？任何解决方案？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T12:19:10.550

之所以会出现此问题，是因为您无法通过 eclipse 访问 Internet。上面列出的答案中可能有一个解决方案。我用不同的方法解决了这个问题。Linux 具有内置的 SSH 支持，因此检查本地主机地址始终很重要。而且也不需要绕过流量。所以你可以去

窗口-> 首选项-> 常规-> 网络连接。

现在删除代理绕过并清除 SOCKS IP。

注意：- 如果您有代理服务器，这将起作用。谢谢你

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-03-27T14:27:57.803

**当 Eclipse 中的SOCKS**代理配置不正确时，我遇到了这个问题。我位于 LAN 中的机器使用 HTTP 代理连接到 Internet。在 Eclipse 的**网络连接**选项卡中，我已经配置了 HTTP、HTTPS 和 SOCKS 代理。在这种情况下不需要 SOCKS 代理，在**清除 SOCKS 代理**后，错误消失了，Eclipse Marketplace 变得可以访问了......哇哦！

**解决步骤**

1.  在 Eclipse 中，单击 Windows -> 首选项
2.  在“过滤器”文本框中搜索“网络连接”
3.  正确设置 HTTP 和 HTTPS 代理（如果您使用代理连接到互联网）
    *注意：如果您在没有代理的情况下连接到互联网，请使用“ActionProvider”下拉菜单中的“直接”配置文件设置。否则使用“手动”设置。*
4.  设置 SOCKS 代理（如果您配置了 SOCKS 代理服务器），否则清除此行。
5.  应用更改并保存。

现在，您应该可以访问 Marketplace。

有关Eclipse 中**网络连接配置**的详细信息，请使用以下链接

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-net-preferences.htm&_sm_au_=iDMfvB6nQ​​s52SSSM](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Freference%2Fref-net-preferences.htm&_sm_au_=iDMfvB6nQs52SSSM)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-25T19:05:39.700

我已经安装了 3.7.2 版的 eclipse indigo 并遇到了完全相同的问题（在干净的 eclipse/marketplace 安装之后）。我通过将市场插件更新到更新的版本解决了这个问题（在 eclipse 中，转到“帮助 - > 检查更新”，更新应该在那里列出）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-26T19:54:02.877

我对日食靛蓝也有同样的问题。我发现 eclipse 没有为我的网络找到合适的网络代理，因为默认情况下它使用窗口的代理。所以我只是使用控制面板设置 Windows 网络代理，或者你可以通过 Internet Explorer 设置它。这对我有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-03T16:58:05.530

我有同样的问题，但使用Firefox。通过更改修复它

firefox>工具>选项>高级：网络选项卡：设置：

然后选择自动检测此网络的代理设置。

在我完成这个日食之后，毫无问题地连接到了市场。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-16T06:06:07.657

如果由于各种原因（大学、家庭、工作场所等），您像我一样经常更换代理，那么您很可能会因为 eclipse IDE 中的连接设置配置不当而收到此错误。您所要做的就是使用当前设置并使其进入工作状态。就是这样：

1.  转到窗口-> 首选项-> 常规-> 网络连接。
2.  更改设置：Active Provider-> Manual-> check---> HTTP, HTTPS and SOCS
3.  就是这样，重新启动 Eclipse 就可以了！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-22T21:45:36.850

在 Eclipse 中切换到 JDK 7 后，我最近遇到了这个问题。

我通过将选定的 Installed JRE 更改回 JDK 6（Preferences -> Java -> Installed JREs）解决了这个问题。进行此更改后，我可以访问 Marketplace。

一旦我从市场上完成了我需要的安装，我将安装的 JRE 切换回 JDK 7。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-25T06:36:42.977

我遇到了类似的异常，尝试了所有可能的代理设置，后来发现问题出在`jre7`.

这对我有用：

我更换`jre7`了`jre6`，现在它工作正常。

`jre7`有一些安全问题，因此在访问代理时产生了问题。如果`java1.7`是您的项目要求，您可以安装`jdk1.7`并将 java home 设置为`jdk1.7`，但卸载`jre7`以便 eclipse 后端和其他系统组件将使用`jre6`，但开发的应用程序将是`jdk1.7`兼容的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-09T12:08:00.293

只需检查您的浏览器设置`eclipse windows -> web browser`。Eclipse 读取在此菜单中选择的浏览器的设置。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-05-01T16:56:13.867

我什么也没做。刚刚重新启动eclipse并在一段时间后尝试。有效！！可能是marketplace.eclipse.org 关闭了一段时间。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-17T01:40:53.177

我通过 (1) 将 windows->preferences->gerneral->network connection: Active provider 更改为“Manual”来解决此问题。(2) 配置下面的“代理条目”。由于我的代理在我的本地主机上侦听 8087，因此这是我的配置：

```
http : 127.0.0.1:8087
https : 127.0.0.1:8087 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-08-19T19:48:15.767

这些答案都不是我问题的解决方案（尽管我确信它们会帮助某些人）。我的问题不是代理设置，也不是我的 JVM 版本。我正在使用 Indigo (3.7.2) 并且我的 Marketplace 插件 (MPC) 确实已过时，但 Help -> Check For Updates 没有列出它，所以我花了一段时间才意识到这实际上是问题所在。

我能够通过手动升级 Marketplace 插件，`Help -> Install New Software`选择 Indigo 存储库，然后`Marketplace`从列表中过滤并安装插件来解决问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-11-04T17:35:02.950

如果您使用代理，那么您的 IE Lan 设置中应该有一个配置脚本。您可以在 IE 或 google 设置中找到它。例如在 IE 中

1.  转到“互联网选项->连接->局域网设置”并***确保选择“使用自动配置脚本”***
2.  在eclipse中，转到“Windows->首选项->常规->网络连接并将其设置为“本**机**”
3.  eclipse 应该已经找到并选择了它。例如架构：HTTP
    主机：动态端口：动态提供者：本地身份验证：无用户名：//空白密码：//空白

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-07-03T16:14:30.080

我对 Jrebel 也有同样的问题。我尝试了以上所有方法，对我不起作用。

**解决方案有效：**

1.  重启 Eclipse
2.  转到 - 首选项 > 常规 > 网络连接
3.  更改为直接（全部为空）

Jrebel 成功激活。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-27T15:31:49.897

我有同样的问题。使用 MyEclipse Enterprise Workbench 10.6。我在 IE/Explorer 中正确设置了代理...如果我更改，我将无法退出公司网络。我有互联网就好了。Eclipse 似乎没有使用设置的内容。我实际上不认为 Eclipse 识别 IR 代理......我认为它根本不识别任何代理。因此，如果您支持像我这样的企业安全解决方案，并且需要代理，那么您就不走运了。

**修复：** MyEclipse 正在获取代理，但是您必须告诉它使用它们。在 MyEclipse>Preferences>General>network Connections 下，将 Active Provider 从 direct 更改为 native，您应该仔细检查 ME 发现的本地代理是否正确。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-27T16:20:09.243

转到首选项 => 网络连接

设置代理连接 = 直接

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-09-30T13:08:33.603

如果你有谷歌浏览器。然后转到chrome设置->更改代理设置-> LAN设置，然后选中自动检测设置，然后确定。然后希望事情会开始工作

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-02-11T21:03:44.427

如果您使用 Wi-Fi 或 LAN 连接，则只需转到 Eclipse 首选项 -> 常规 -> 网络连接 -> 活动提供商：在下拉列表中选择“直接”并应用。这解决了问题。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-22T07:08:46.600

我有同样的问题，我通过删除 java7 并在我所有集成的 java 项目的 java 编译器合规性中添加 java6 来解决它。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-26T08:35:19.297

我通过以下方式修复它：
* goto preferences => network connection
* 选择**HTTP**条目并按**Clear**。
* 再次输入代理设置
* 选择**HTTPS**条目并按**Clear**。
* 再次输入代理设置
* 按应用按钮

# php - 返回一些东西以及 FALSE

> ID：10562013
> 
> 赞同：2
> 
> 时间：2012-05-12T07:58:29.033
> 
> 标签：php

我正在建立一个库，我想知道是否有可能以及如何在这里完成最佳方法：基本上我希望有一些不同的消息，我可以根据课堂上的结果显示这些消息。

伪：

```
public function login($username, $password) {
    //query

    if (password hash is verified)

        if (active == false)
            (some sort of MESSAGE HERE! like "User is not activate...")
            return false

        if banned
            some sort of message
            return false
    else

        message (wrong username or password)
        return false
}

And then on the login

if (login(username, password))
    successfully
    redirect
else
    display the message 
```

如何以一种好的方法实现这一点？我假设我需要某种变量，我会给出一个值，然后我会有一些方法（），如果设置它会返回错误消息，到目前为止我是对的吗？我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:02:52.780

在**某些语言中**（例如 Python，通过异常处理构建程序流得到了很好的优化并被普遍接受），您可以让您的登录不返回任何值，但抛出带有描述性错误代码的相关异常。

然后你可以明智地使用伪代码：

```
try
{
    login(user, password);
    redirect(page);
}
catch (MyLoginException ex)
{
    displayMessage();
}
catch (GenericException ex)
{
    ...
} 
```

但这仅适用于某些语言。这对于 C 或 C++ 是不可取的，例如，异常处理非常慢，因此应保留用于处理`unexcepted`情况。**PHP**看起来几乎在同一条船上。

因此，由于您要返回*两个*值（一个布尔值和一个字符串），逻辑上的操作过程就是简单地返回一个`compound`带有布尔值和字符串字段的 LoginResult 对象。

从您的登录方法返回一个 LoginResult 对象的新实例，并使用它的字段来处理重定向和/或显示错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T08:04:08.460

## 全局变量（类似 C）

如果您使用静态类型语言进行编程，您可能会使用全局变量来显示错误消息（这会污染您的全局命名空间）：

```
global $login_error_message;

function login($user, $password)
{
  if(success)
   return true;
  if(failure)
  {
    global $login_error_message;
    $login_error_message = 'Error message';
    return false;
  }
}

if(login($user, $password))
  redirect
else
{
   global $error_message
   echo $error_message;
} 
```

## 成员变量（类似 C++）

这在逻辑上与全局变量相同，但不受污染问题的影响：

```
class LoginClass
{
   private $error_message;

   function login($user, $password)
   {
      if(success)
         return true;
      if(failure)
      {
         $this->error_message = "Error message";
         return false;
      }
   }

   function get_error_message()
   {
      return $this->error_message;
   }
}

$loginInstance = new LoginClass();
if($loginInstance->login($user, $password))
   redirect
else
   echo $loginInstance->get_error_message(); 
```

## 通过引用传递（类似 C/++）

使用通过引用传递的附加参数来返回错误代码（这给函数调用增加了额外的复杂性）：

```
function login($user, $password, &$error_msg)
{
   if(success)
     return true;
   if(fail)
   {
     $error_msg = 'Error message';
     return false;
   }
}

$error_message
if(login($user, $password, $error_message))
   redirect
else
   echo $error_message; 
```

## 混合返回类型

但由于这是 php（所以不是静态类型），您可以执行以下操作：

成功时返回 true （我认为不需要特殊输出），否则返回错误消息。使用该功能时，您会遇到类似的事情：

```
function login($user, $passord)
{
   if(success)
     return true;
   if(failure)
     return "Error message";
 }

$login_result = login($user, $password);
if($login_result === true)//note the ===, as == would be true on non empty strings too
  success
else
  echo $login_result; 
```

## 返回关联数组

当然你也可以返回一个包含两个值的数组：

```
function login($user, $password)
{
  if(success)
     return array("success" => true, "error_msg" => "");
  if(failure);
     return array("success" => false, "error_msg" => "Error message");
}

$login_result = login($user, $password);
if($login_result['success'])
  redirect
else
  echo $login_result['error_message']; 
```

## 返回类实例（类似 C/++）

同样，您可以使用这样的结构：

```
class LoginReturn
{
  public $success;
  public $error_message;

  LoginReturn($success, $error_mesage)
  {
     $this->success = $success;
     $this->error_message = $error_message;
  }
};

function login$user, $password)
{
   if(success)
     return new LoginReturn(true, "");
   if(failure)
     return new LoginReturn(false, "Error message");
}

$login_result = login($user, $password);
if($login_result->success)
  redirect
else
  echo $login_result->error_message; 
```

## 结论

鉴于这些例子，我认为人们可以看到它们的优点和缺点。就我个人而言，我会使用 Member 变量变体，因为它为使用相同错误消息基础结构的更多函数提供了空间，只需将它们放入类中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T09:03:14.400

这个答案只是为了说明我对Nobody的回答的评论，所以请把功劳归于Nobody。您可以编写一个仅用于登录的类，该类可以保存错误消息。

```
class CLogin
{
  public $error_message;

  function login($user, $password)
  {
    if (successfull)
      return true;
    else
    {
      $this->error_message = $error_message;
      return false;
    }
  }
}; 
```

或者您可以简单地通过引用传递错误消息的参数。

**编辑：**

因为我相信[不使用混合类型的返回值](http://www.martinstoeckli.ch/php/php.html#mixedReturnType)非常重要，所以我写了一篇关于此类函数的陷阱的文章。

# jquery - 列表中的 jquery 删除按钮不适用于所有框

> ID：10562014
> 
> 赞同：1
> 
> 时间：2012-05-12T07:58:55.800
> 
> 标签：jquery, button

我有一个列表，每个 li 都包含一个删除按钮，可以在单击时将其删除。我不知道为什么，但该按钮只能应用于列表中的第一项，但不能应用于其余的 li 框。想知道我哪里出错了。

以下是我的php代码脚本和javascript

```
foreach($biz_watchlist as $biz_watchlist1){
  echo '<li class="biz_watch">';
  echo '<table style="width:100%">';
  echo '<td style="width:50%">';
  echo $biz_watch_details['5'];
  echo ' | <a id="remove_watch">remove</a>';
  echo '</td>';
  echo '<td>';
  echo '<span style="float:right">'.$biz_watch_details['19'].'</span>';
  echo '</td>';
  echo '</table>';
  echo '</li>';
}

  <script type="text/javascript">
  $(document).ready(function(){
     $('#remove_watch').click(function(){
      $(this).closest('.biz_watch').fadeOut("slow");
     });
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:03:50.197

`$('#remove_watch')`正在寻找身份证。这就是为什么你只得到第一个对象的结果。id 应该是唯一的。如果您想在多个地方使用它，请将其改为类。

```
 echo ' | <a id="remove_watch">remove</a>'; 
```

应该

```
 echo ' | <a class="remove_watch">remove</a>'; 
```

进而

```
$('.remove_watch').click(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:04:19.063

您在页面上重复 N 次的元素上使用了 id！根据 W3C HTML 规范，id 必须是唯一的。您不能拥有多个具有相同 id 的元素。如果你这样做了，那么对这些元素的操作是未定义的，这意味着每个浏览器在这种情况下都会表现不同。

相反，在重复的元素上使用一个类。类属性用于分组操作：

```
 $('.remove_watch').click(function(){
     $(this).closest('.biz_watch').fadeOut("slow");
 });

 <a class="remove_watch">remove</a> 
```

# javascript - JQuery: Getting content from iframe?

> ID：10562016
> 
> 赞同：0
> 
> 时间：2012-05-12T07:59:23.150
> 
> 标签：javascript, jquery, html

I have a HTML form that is targeted to an IFRAME when "submit" is pressed. This iframe then loads a page (after submit is pressed) that reports whether the data input by the user is valid or not. It simply shows on screen "TRUE" or "FALSE". I want JQuery to check this text on the loaded iframe, and refresh the page if it displays "TRUE".

The question is: How can JQuery get the content of a Iframe?

ps: The FORM sends files. So load() is not an option.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:02:51.617

use jquerys functions .get() or .load() instead of an iframe. more unobstrusive =)

do the validation before sending any data to the server or saving them on the server using jquery.validation: [http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# android - Limiting use of android app

> ID：10562021
> 
> 赞同：0
> 
> 时间：2012-05-12T08:00:20.847
> 
> 标签：android, caching, bandwidth, http-get

Right now, I have developed an android app that is available free on the market. The app basically uses `HTTP GET` to query some data from my personal server. I'm a wee bit worried about bandwidth as my server is hosted and thus has limited monthly transfer.

I was just wondering, is there a robust way to limit the number of requests made by each user per day, say, to 20 requests?

For some background, the app interface is pretty straightforward. Two EditText boxes to capture the HTTP GET parameters and a `Button` to submit the request. This eventually returns some values from a cgi script which populates a `TextView` on the app.

Solutions can be either on app end or server end. An idea I had was to somehow write the number of requests already made to a file and reading the status from there.

Are there better ways of achieving what I want?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:19:35.680

只是一个建议：

**在您的应用程序中**：

为每个设备生成一个唯一的 ID（请参阅[此](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)问题。）并将其与请求一起发送到服务器。

**在您的服务器中**：

存储来自每个设备的请求计数，并根据存储的值应用您想要的任何限制。

* * *

请注意，您可以在服务器端通过 IP 限制请求。这种方法的问题是您还限制了使用共享 IP 连接到 Internet 的用户（例如，连接到接入点的多个设备等）

# javascript - Fewer lines for switch statement?

> ID：10562023
> 
> 赞同：4
> 
> 时间：2012-05-12T08:01:12.717
> 
> 标签：javascript, jquery, switch-statement, conditional-statements

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T08:05:21.337

只需将代码放入数组中，然后您可以简单地检查值是否在数组中。由于您使用的是 jQuery，因此您已经有了[`inArray()`](http://api.jquery.com/jQuery.inArray/)执行此操作的方法。

```
var keycodes = [13, 16, 17, 18, 19]; //and so on

//if the keycode is not found in the array, the result will be -1
if ($.inArray(e.keyCode, keycodes) === -1) { 
    $(this).addClass(fill);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T08:05:34.580

您可以创建不想处理的键的“映射” - 映射查找应该介于`O(1)`和之间`O(log n)`，具体取决于实现。

```
var specialKeys = {
    13: 1, // Enter
    16: 1, // Shift
    ...
    224: 1 // Cmd/FF
};

inputs.keydown(function (e) {
    if (e.keyCode in specialKeys) return;
    $(this).addClass(fill);
}); 
```

或者，由于您的“键”都是整数，您可以填充一个数组，其中索引是键码值。

**根据@bažmegakapa 的建议，**编辑删除了字符串****

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T08:07:11.560

你所拥有的很好。这很清楚，并且会得到相当有效的处理。或者，您可以这样做[`Array#indexOf`](http://es5.github.com/#x15.4.4.14)：

```
var list1 = [
        13,    //Enter
        16,    //Shift
        17,    //Ctrl
        18,    //Alt
        19,    //Pause/Break
        20,    //Caps Lock
        27,    //Escape
        35,    //End
        36,    //Home
        37,    //Left
        38,    //Up
        39,    //Right
        40     //Down
];
var list2 = [
        91,    //Safari, Chrome
        93,    //Safari, Chrome
        224    //Firefox
];
inputs.keydown(function (e) {
    if (list1.indexOf(e.keyCode) !== -1) {
        // ...
    }
    else if (list2.indexOf(e.keyCode) !== -1) {
        // ...
    }
    else {
        $(this).addClass(fill);
    }
}); 
```

但是，如果您丢失了注释，只会减少“行”代码，并且注释（对我而言）似乎很重要。

请注意，一些相当旧的浏览器不会有`Array#indexOf`，因此您可能必须对其进行填充（这很容易做到）。或者`jQuery.inArray`改用，因为您使用的是 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T08:09:55.567

恕我直言，使用您指出的代码更清楚，但为方便起见，您可以使用案例内的条件......

```
case (condition):
//code
break; 
```

就个人而言，我会将所有可能的匹配项放入一个数组中，并使用[phpjs.org中的](http://phpjs.org)[in_array()](http://phpjs.org/functions/in_array:432)来检查要测试的值是否存在。**

# java - How to return physical lock error without waiting in MySQL

> ID：10562024
> 
> 赞同：2
> 
> 时间：2012-05-12T08:01:57.057
> 
> 标签：java, mysql, locking, sql-update, ibatis

in my project using java, ibatic and MySql.

Before any updating data into database, i lock the table with `SELECT FOR UPDATE` query

```
eg: SELECT * FROM MEM_MST WHERE MEM_ID = #memId# FOR UPDATE 
```

It make locking the table properly. but the problem is, for example if two client are update the table in same time. first one is lock the table and update but second one is waiting to update until a lock is released. After then second one also update the data. So, first one updated data is overwrite. Please see the following explanation:

```
Time |  Client 1           | Client 2  
-------------------------------------------------
1    | SELECT FOR UPDATE   | 
2    | UPDATE              | SELECT FOR UPDATE (Waiting) 
3    | COMMIT              | (Waiting)
4    |                     | UPDATE
5    | (Overwritten)       | COMMIT 
```

So, Client 1 updated data is lost

What I want to be is want to simply return the error message to Client 2 instead of waiting until a lock is released.

Please advise me the way to solve above mentioned problem.

* * *

P.S:

I already set the lock wait timeout to 0 in startup Variables, but it still take about 2 second to tell "Lock wait timeout exceeded" message.

furthermore,`SELECT FOR UPDATE NO WAIT` is not working in MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T17:22:58.983

不幸的是，[`innodb_lock_wait_timeout`](http://dev.mysql.com/doc/refman/5.6/en/innodb-parameters.html#sysvar_innodb_lock_wait_timeout)不能设置为低于 1。

您将必须实现自己的同步机制。作为 eggyal 建议的替代方案，您可以在关键表中添加一个“信号量”字段。基本工作流程（伪代码）：

```
START TRANSACTION;
SELECT locked FROM MEM_MST WHERE MEM_ID = @id FOR UPDATE;
if (previous_result == 1) {
    ROLLBACK;
    throw new Exception();
}
UPDATE MEM_MST SET locked = 1 WHERE MEM_ID = @id;
COMMIT; -- from now on, concurrent attempts will fail immediately

START TRANSACTION;
UPDATE MEM_MST SET whatever = @some_value WHERE MEM_ID = @id;
UPDATE MEM_MST SET locked = 0 WHERE MEM_ID = @id; -- release lock
COMMIT; 
```

# java - ActionBarSherlock with options menu bug

> ID：10562030
> 
> 赞同：3
> 
> 时间：2012-05-12T08:03:48.187
> 
> 标签：java, android, android-actionbar, actionbarsherlock

It's a known bug in ActionBarSherlock when you use ActionBar with tabs + FragmentPagerAdapter and each fragment has its own options menu. After the configuration change the whole ActionBar becomes unresponsive. I use ABS 4.0.2 and Android 2.3.3\. The bug is still present. Anybody knows how to bypass it?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-17T10:49:25.727

Android 的默认 ActionBar 效果最好。

您可以拥有选项卡+选项卡的不同片段+每个选项卡的不同选项菜单，只需简单修改

```
onPrepareOptionsMenu(Menu menu) 
```

和使用

```
invalidateOptionsMenu() 
```

但是，为了补偿方向更改，您需要保存和加载选项卡的状态。为此，您将需要修改

```
onSaveInstanceState(Bundle outState)
onCreate(Bundle savedInstanceState) 
```

您可以通过以下方式控制 Fragments 行为

```
onResume() 
```

# ember.js - Ember.Map ：键真的是有序的吗？

> ID：10562033
> 
> 赞同：0
> 
> 时间：2012-05-12T08:04:00.513
> 
> 标签：ember.js

我想使用新的 Ember.Map 对象，我想知道键是否真的是有序的，因为它们存储在 Ember.OrderedSet 中。

如果我像这样遍历地图：

```
map.forEeach(function(key,val){
 console.log(key);
}) 
```

我可以期望以升序或降序查看键吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:56:57.390

来自 Ember.Map#forEach 的源代码：

“保证按插入顺序迭代键。”

# iphone - 如何在 OpenGLES(iPhone) 中重置或清除 glVertexAttribPointer 值？

> ID：10562036
> 
> 赞同：2
> 
> 时间：2012-05-12T08:04:31.983
> 
> 标签：iphone, ios, opengl-es

目前我正在使用简单的游戏应用程序，我对 glVertexAttribPointer 的清除或重新设置值有疑问`glVertexAttribPointer`。有没有可能。你能告诉我吗？

示例代码：

```
glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex))); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:41:07.407

你是什​​么意思 - 重置？如果您不需要特定属性，请禁用它：

```
glDisableVertexAttribArray(GLKVertexAttribPosition); 
```

# javascript - 如何将字符串中出现的不确定数量的 rgb 转换为 JavaScript 中的十六进制？

> ID：10562038
> 
> 赞同：1
> 
> 时间：2012-05-12T08:04:57.203
> 
> 标签：javascript, css, hex, rgb, fireworks

Fireworks CS6 包括一个复制选定对象的 CSS3 属性的面板。

但是，代码过于冗长和混乱，所以我想用 JavaScript 编写一个扩展来清理它。

我已经完成了我需要的一切，除了弄清楚如何将任意数量的 rgb 值转换为它们更小的十六进制代码等价物。

例如，它为渐变返回的典型字符串可能包括：

```
background: -moz-linear-gradient(50% 0% -87deg, rgb(0,0,0) 0%, rgb(0,255,64) 28%, rgb(0,177,122) 40%, rgb(0,0,255) 68%, rgb(37,37,230) 76%, rgb(153,153,153) 100%); 
background: -ms-linear-gradient(-87deg, rgb(0,0,0) 0%, rgb(0,255,64) 28%, rgb(0,177,122) 40%, rgb(0,0,255) 68%, rgb(37,37,230) 76%, rgb(153,153,153) 100%);
background: -o-linear-gradient(-87deg, rgb(0,0,0) 0%, rgb(0,255,64) 28%, rgb(0,177,122) 40%, rgb(0,0,255) 68%, rgb(37,37,230) 76%, rgb(153,153,153) 100%);
background: -webkit-gradient(linear,50% 0%,55% 100%, color-stop(0, rgb(0,0,0)), color-stop(0.28, rgb(0,255,64)), color-stop(0.4, rgb(0,177,122)), color-stop(0.68, rgb(0,0,255)), color-stop(0.76, rgb(37,37,230)), color-stop(1, rgb(153,153,153)));
background: -webkit-linear-gradient(-87deg, rgb(0,0,0) 0%, rgb(0,255,64) 28%, rgb(0,177,122) 40%, rgb(0,0,255) 68%, rgb(37,37,230) 76%, rgb(153,153,153) 100%);
background: linear-gradient(-87deg, rgb(0,0,0) 0%, rgb(0,255,64) 28%, rgb(0,177,122) 40%, rgb(0,0,255) 68%, rgb(37,37,230) 76%, rgb(153,153,153) 100%);
border-color: rgb(198,34,221); 
```

我已经有一个函数可以将 r,g,b 值转换为等效的十六进制值，但是我不确定如何循环遍历字符串并隔离 rgb 组件并转换每个组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:49:49.300

如果您只想捕获这种精确的语法 - 带有三个十进制数字且没有空格的 rgb，那么`string.replace(/rgb\((\d+),(\d+),(\d+)\)/g, yourFunction)`就可以了。第一个参数将是整个 rgb() 序列，接下来的三个将是 R、G 和 B 数字。您将需要返回新字符串来替换整个 rgb()。

# iterator - 使用相同类型的迭代器时“不匹配 operator=”

> ID：10562041
> 
> 赞同：1
> 
> 时间：2012-05-12T08:05:21.143
> 
> 标签：iterator, typedef, operator-keyword, typename

我收到一条非常长的错误消息。我环顾四周，这意味着我的迭代器与它正在迭代的列表的类型不同，但对我来说它看起来一样！

```
template <typename T1, typename T2>
class Map
{
    public:
        Map();
        bool contains_key(const T1& key) const;
    private:
        T1 key;
        T2 value;
        typedef list<Pair<T1, T2> > multiPair;
        multiPair pairList;
};

template<typename T1, typename T2>
inline Map<T1, T2>::Map() { }

template<typename T1, typename T2>
bool Map<T1, T2>::contains_key(const T1& key) const
{
    typename multiPair::iterator pos;
    for(pos = pairList.begin(); pos != pairList.end(); pos++) //error
        if(*pos.get_first() == key)
            return true;
    return false;
} 
```

map1.h:83:31: 错误: 'pos = ((const Map, std::basic_string >*)this)->Map, std::basic_string >::pairList.std 中的 'operator=' 不匹配： :list<_Tp, _Alloc>:: 以 _Tp = Pair, std::basic_string >, _Alloc = std::allocator, std::basic_string >>, std::list<_Tp, _Alloc>::const_iterator = std: :_List_const_iterator, std::basic_string >>' /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_list.h:114:5：注意：候选者是：std::_List_iterator , std::basic_string > >& std::_List_iterator, std::basic_string > >::operator=(const std::_List_iterator, std::basic_string > >&)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:10:00.893

该方法是 const，因此 pairList.begin() 将返回一个 const_iterator。

更改“typename multiPair::iterator pos;” 到“类型名 multiPair::const_iterator pos;”

# sed - 从另一个文件中的文本文件中删除行

> ID：10562045
> 
> 赞同：2
> 
> 时间：2012-05-12T08:05:41.273
> 
> 标签：sed, awk

这是我上一个问题的延续。 [使用 awk 或 sed 根据另一个文件中的最后一个字符从文本文件中删除行](https://stackoverflow.com/questions/10552256/deleting-lines-from-text-files-based-on-the-last-character-which-are-in-another)

我正在尝试使用我之前的示例获得以下输出？我是awk的新手。请提出建议。

```
 csh    1      A   1      27.704   6.347   
 csh    2      A   1      28.832   5.553
 csh    3      A   1      28.324   4.589
 csh    6      A   1      28.378   4.899 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:50:25.677

您需要继承上一个问题中提供此问题规范的任何信息。

这可能对您有用：

```
awk '$3 == "A"' inputfile 
```

您可以用一个 glob 替换“inputfile”，也许`*`，以便处理多个文件，就好像它们是`cat`一起编辑的。

在没有更清楚地表明您希望如何处理多个文件的情况下，这是我能做的最好的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:03:15.337

这可能对您有用：

```
sed '/^ *chs.*A/!d' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T11:11:27.590

从以前的答案中获取一些代码，您可以使用以下代码：

```
while read word; do
    if [[ $word =~ ^(....)(.)$ ]]; then
        filename="yy/${BASH_REMATCH[1]}.txt"
        letter=${BASH_REMATCH[2]}
        [[ -f $filename ]] && sed -i.bak -n "/^ *csh.*$letter/p" $filename
    fi
done < xx.txt 
```

# netbeans - 项目中的 Netbeans 自定义文件

> ID：10562047
> 
> 赞同：0
> 
> 时间：2012-05-12T08:06:11.200
> 
> 标签：netbeans

我需要在 Netbeald 中将一些自定义文件添加到我的 Java 项目中，因此每次构建后它会自动将它们复制到输出文件夹中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:16:53.657

你可以像这样调整你的 build.xml：

```
<target name="-post-jar">
        <copy file="my/dir/file.txt" todir="build/classes/my/package"/>
</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:10:37.793

如果您不将这些文件与 Java 文件一起存储，则将它们所在的目录添加到项目中作为“源包文件夹”

“源包文件夹”中的所有内容都将自动复制到构建目录。

# jsp - 如何在 LIFERAY 中从 first.jsp 重定向到 second.jsp？

> ID：10562050
> 
> 赞同：1
> 
> 时间：2012-05-12T08:06:39.063
> 
> 标签：jsp, redirect, liferay

```
<%
if(my_value==true){
//redirect to page second.jsp
}
%> 
```

这是怎么做的？请帮我解决这个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T19:34:09.893

jsp内部的重定向并不是真正的权宜之计，因为jsp解析下面是渲染阶段，这个阶段的概念是显示内容。

另一方面重定向到动作阶段，在这里您可以决定portlet 下一步应该做什么。

阅读本教程以更好地理解 portlet 的两个阶段： [http ://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/understanding-the-two-phases-of-portlet-execution)

因此，将重定向放在 portlet processAction 方法中：

```
@Override
public void processAction(ActionRequest actionRequest, ActionResponse actionResponse) throws IOException, PortletException {
    //defaultLandingPage = ...
    actionResponse.sendRedirect(defaultLandingPage);
}; 
```

否则，如果您真的想在 jsp 内部执行此操作，您可以在第一个 jsp 中包含第二个 jsp：

```
<liferay-util:include page="second.jsp" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-08T04:28:34.323

```
 <portlet:renderURL var="other">
  <portlet:param name="jspPage" value="/jsp/b.jsp"/>
  </portlet:renderURL>
  <a href="<%=other%>">other</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:51:06.323

response.sendRedirect("");

请注意，路径可以是相对的、绝对的或相对于服务器根目录的路径。此外，如果响应已经提交，它将不起作用。

# c# - 如何在没有 WebBrowser 控制的情况下“呈现”HTML

> ID：10562051
> 
> 赞同：2
> 
> 时间：2012-05-12T08:07:01.617
> 
> 标签：c#, javascript, .net, httpwebrequest, webbrowser-control

首先 - 我不知道“渲染”是否是正确的词。我喜欢从网站获取信息。因此，目前我使用 WebBbrowser 控件。现在我喜欢使用 HttpWebRequests，因为我认为这样更快，并且可以更轻松地使用线程。但我不能使用它们，因为我从 HttpWebRequest 收到的 HTML 输出字符串有很多 JavaScript，我需要的信息将在其中创建。Web 浏览器将 JavaScript “呈现”为可读的 HTML。如何“手动”执行此步骤，以便我可以使用 HttpWebRequests？

我希望你明白，我想要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:28:11.567

[我通过一个名为Awesomium](http://awesomium.com/)的项目解决了我的问题。在这个[线程](http://support.awesomium.com/discussions/questions/499-html-scrapping-with-javascripts)中，您将找到使用已执行的 javascript 获取 html 所需的一切。“特殊部分”是这个：

```
var sourceVal = webView.ExecuteJavascriptWithResult( "document.getElementsByTagName('html')[0].outerHTML;" );

if ( sourceVal != null )
{
    using ( sourceVal )
    {
        html = sourceVal.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:11:37.387

所以如果你需要 javascript 渲染引擎，我建议你看看[selenium](http://seleniumhq.org/)项目。

# windows - 什么是子类化和 API 挂钩？

> ID：10562055
> 
> 赞同：4
> 
> 时间：2012-05-12T08:07:35.053
> 
> 标签：windows, visual-studio, winapi, visual-c++

我对 Windows API 编程相当陌生，我想用外行的话了解什么是子类化和 API Hooking。我正在做一个使用所有者绘制控件的项目，并且我的两个术语不断出现。现在我已经在 CodeProject.com 上看到了很多关于这些主题的详细教程，但问题是它们都使用 MFC，而我是在纯 Win32 中编码。如果有人知道上述主题的任何好的教程，请发布链接。还要尽量避免链接到 msdn，因为新手我很难理解那里写的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T11:38:51.200

外行术语：子类化是通过替换窗口的窗口过程来完成的。它将 Windows 为将消息传递到窗口的调用重定向到您的函数，以便您首先看到这些消息。这使您可以更改窗口的行为，为其提供原始窗口所没有的新功能。这是一种非常常见的技术，操作系统直接支持，SDK 文章[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569%28v=vs.85%29.aspx#winproc_subclassing)。

API 挂钩类似，但适用于 winapi 函数。这样您就可以更改在您未编写的进程中运行的代码的行为。任意地，您可以挂钩 CreateFile() 并更改传递的文件名或故意使其失败。这样做的情况*要*少得多，而且要正确也更难，因为它不是像子分类那样的内置功能。 [Microsoft 的 Detours](http://research.microsoft.com/en-us/projects/detours/)是该技术的一个示例实现。

这两种技术都属于高级编程类别，如果你做得不好，你可能会陷入非常讨厌的麻烦。如果您现在无法阅读 MSDN 文章，请将其留在书架上，直到您准备好为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:19:30.323

如果您正在编程原始 Win32，您可能应该得到 Petzold 的书“Programming Windows”。

# javascript - Div display:none - 只想在内容可见时加载

> ID：10562058
> 
> 赞同：0
> 
> 时间：2012-05-12T08:08:44.100
> 
> 标签：javascript, jquery, html, css

我有一系列以图像为背景的 div，相当大的图像，1-2 MB。

我想做的只是在它们可见时才加载其中的内容。

（默认情况下它们是 display:none 和 onclick 我使用 jquery 将它们向下/向上滑动的各种链接）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:19:38.303

你应该发布你的代码，但我认为这可能是你正在寻找的。

html

```
<a href="#">Link to click</a>
<div id="imgname"></div> 
```

jQuery

```
$('a').click(function(){
 $('div#imgname').html('<img src="image.path" />');
}); 
```

发送 html 并向下滑动 div 块

```
<a href="#">Link to click</a>
<div id="imgname"><img src="image.path" /></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:06:13.863

下面是一个可能可行的想法的粗略草图。为要加载的每张照片创建隐藏的图像标签，直接附加 onload 事件处理程序。`insert`只需获取刚刚加载的图像并创建一个 css`background`规则以插入到适当的`div`.

```
<!DOCTYPE html>
<html>
  <head>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type="text/javascript" charset="utf-8"></script>

    <style type="text/css" media="screen">
      div.placeHolder {
        width: 400px;
        height: 400px;
      }
    </style>
  </head>
  <body>

  <img  data-id='imageA' 
        src='http://some-large-image.jpg' 
        style='display:none;' 
        onload='insert(this);' />

  <div data-id='imageA' class='placeHolder' style='display:none;'></div>

  <script>
    function insert(img){
      $img = $(img);
      $div = $('div.placeHolder[data-id='+$img.attr('data-id')+']');
      var cssSnippet = "transparent url("+ $img.attr('src') +") no-repeat 0 0";
      $div.css('background', cssSnippet).show();
    }
  </script>

  </body>
</html> 
```

# c++ - 别名的别名？

> ID：10562062
> 
> 赞同：0
> 
> 时间：2012-05-12T08:09:17.280
> 
> 标签：c++, alias

是否可以为引用变量创建引用（别名本身的别名）？

如果是，它的应用是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:47:10.747

在 C++98 中，形成对引用类型的引用是非法的。在 C++11 中，有新的*引用折叠*规则，简而言之，对引用的引用仍然只是一个引用（但在左值和右值引用方面存在细微差别）。考虑这段代码：

```
typedef int & ir;
int a;
ir & b = a; 
```

在 C++98 中，最后一行是非法的，因为`ir &`它不是有效类型（试图引用一个引用）。在 C++11 中，引用崩溃并且`ir &`与`int &`.

请记住，引用是不可变的，一旦初始化，您将永远无法更改引用的*目标*。在上面的代码中，`b`将始终是 的别名`a`，并且永远不能更改为其他东西的别名。因此，不需要双重间接，因为它不会让您做任何比普通引用已经可以做的事情更多的事情。

为了完整起见，参考折叠规则如下。假设`T`不是引用类型。然后在概念上我们有：

```
(T&)& == T&    (T&)&& == T&    (T&&)& == T&    (T&&)&& == T&& 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T09:46:29.067

您不能创建对引用的引用，并且 C++ 没有引用引用类型。

如果你使用一个引用来初始化另一个引用，例如：

```
int i = 1;
int &a = i;
int &b = a; 
```

那么你实际所做的就是绑定*to*的`a`引用`b`。`a`是同一个对象的名称，它`i`是一个名称，因此`int &b = a;`具有与 完全相同的效果`int &b = i;`。所以你有两个对同一个对象的引用，`i`.

我不能立即想到在同一个函数中有两个引用的原因，但是如果你有一个`f`接受引用参数的函数，你通常会创建多个引用，并将它传递给另一个`g`也接受引用参数的函数. 然后`f`和`g`每个都有对同一个对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T07:17:23.073

在 Python 中，像这样：

```
a = 1
b = a 
```

经过此处理后，“a”和“b”的 id 相同。

# objective-c - Objective-C - ulong 到 uint32

> ID：10562065
> 
> 赞同：1
> 
> 时间：2012-05-12T08:09:56.157
> 
> 标签：objective-c, uint32, ulong

如何将 ulong 转换为 uint32？一个简单的演员阵容是行不通的。对我有用的是将 long 转换为字符串，然后再次将字符串解析为 int。

然而，这似乎真的是错误的。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T16:06:59.043

就像 Paul R 说的，不确定你所说的“简单演员”是什么意思。以下两项对我来说都很好（注意，我正在使用 ULONGLONG 进行测试）。

1.  直接投：

    `unsigned long long val1 = (unsigned long long)75;
    UInt32 val2 = (UInt32)val1;
    NSLog( @"%qu, %lu", num1, num2 );
    // OUTPUTS: 75, 75`

2.  使用 NSNumber：

    `NSNumber* val1 = [NSNumber numberwithUnsignedLongLong:75];
    NSNumber* val2 = [NSNumber numberwithUnsignedInteger:[val1 usignedIntegerValue]];
    NSLog( @"%qu, %u", [num1 unsignedLongLongValue], [num2 unsignedIntegerValue]];
    // OUTPUTS: 75, 75`

# javascript - 在确认框的情况下控制页面移动到顶部

> ID：10562069
> 
> 赞同：0
> 
> 时间：2012-05-12T08:10:38.773
> 
> 标签：javascript, jquery, web

以下是我的代码片段：

```
$(document).ready(function()
{
    $('table#example td a.delete').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            alert("You Press OK");
        }

    });
}); 
```

我的网格视图位于页面底部。我按确定或取消按钮，页面移动到顶部。

我想保持不变。这个怎么控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:12:18.233

`confirm`它实际上与;没有任何关系。这是您单击链接的事实（我猜该链接有一个`href=""`或`href="#"`其中一个）。`click`浏览器跟随链接，这是链接事件的默认操作。

您需要阻止默认操作，您可以通过`false`从函数返回或接受函数的`event`参数`click`并调用[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).

返回`false`（这既阻止了默认操作，又阻止了对祖先元素的点击冒泡）：

```
$(document).ready(function()
{
    $('table#example td a.delete').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            alert("You Press OK");
        }
        return false;
    });
}); 
```

使用`preventDefault`（这只会阻止默认值，并且不会停止冒泡；祖先元素也会看到点击）：

```
$(document).ready(function()
{
    // Note argument -----------------------------v
    $('table#example td a.delete').click(function(event)
    {
        event.preventDefault();
        if (confirm("Are you sure you want to delete this row?"))
        {
            alert("You Press OK");
        }
    });
}); 
```

# sharepoint - 使用javascript查找当前页面是sharepoint中的列表还是doc-lib页面

> ID：10562072
> 
> 赞同：0
> 
> 时间：2012-05-12T08:11:20.770
> 
> 标签：sharepoint, sharepoint-designer

我想添加一个可以在所有文档库和列表页面上运行的 javascriptcode。（NEwForm.aspx、DispForm.aspx、AllItems.aspx 并且还创建了自定义视图）

这些列表与其他站点页面具有共同的母版页。所以我不能将我的代码放在母版页中。

那么有没有办法在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T16:20:30.893

您应该在寻找库 BaseType

*   自定义列表 [0]
*   文档库 [1]
*   未使用 [2]
*   过时的。使用 0 表示讨论板。[3]
*   调查 [4]
*   问题列表 [5]

SPBaseType 枚举， http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.spbasetype.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spbasetype.aspx)

# java - Android：切换按钮（允许多次点击）

> ID：10562075
> 
> 赞同：0
> 
> 时间：2012-05-12T08:11:46.183
> 
> 标签：java, android, if-statement, toggle, android-camera

我有一个“据说”在不同 if 语句之间切换的按钮，但我没有正确理解它。该按钮应该会经历不同的相机闪光灯状态（ON/AUTO/OFF/TORCH），但它只会经历其中一种状态，而不会经历其余状态。按钮是否正确？还是有不同的切换按钮？

```
 //Flash Button
    final Button flashButton = (Button) findViewById(id.camera_flash);
    flashButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Parameters p = mCamera.getParameters();

            // TODO Auto-generated method stub
            if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_ON){
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("Off");
                Log.e("Torch","MODE OFF");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_OFF){
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                mCamera.setParameters(p);
                mCamera.release();
                mCamera=null;
                flashButton.setText("TORCH");
                Log.e("Torch","MODE TORCH");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_AUTO){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("ON");
                Log.e("Torch","MODE ON");

            }else if(p.getFlashMode() == android.hardware.Camera.Parameters.FLASH_MODE_TORCH){
                p.setFlashMode(Parameters.FLASH_MODE_ON);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","MODE AUTO");

            }else{
                p.setFlashMode(Parameters.FLASH_MODE_AUTO);
                mCamera.setParameters(p);
                mCamera.startPreview();
                flashButton.setText("AUTO");
                Log.e("Torch","MODE AUTO");

            }           
        } 
```

所以基本上，它只会转到`FLASH_MODE_AUTO`然后按钮不再起作用。我的 if 语句是否正确？提前致谢！

更新 ：

这在我的 onCreate() 中。不确定这是否有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T20:11:59.310

不确定这是否有帮助，但请尝试在所有条件下使用“equals(String)”而不是“==”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:47:48.000

您的某些文本以错误的方式出现。例如，您测试 FLASH_MODE_AUTO，然后将 setText 设置为“ON”。您测试 FLASH_MODE_TORCH，然后将文本设置为“AUTO”。在继续之前，您可能需要清除它。然后在程序执行时跟踪程序。

# java - 有或没有 javax.swing.text.Document

> ID：10562076
> 
> 赞同：5
> 
> 时间：2012-05-12T08:11:53.860
> 
> 标签：java, swing, jtextarea

鉴于

```
JTextArea t = new JTextArea();
Document d = t.getDocument();
String word1 = "someWord";
String word2 = "otherWord"
int pos = t.getText().indexOf(word1,i); 
```

和...有什么区别

```
if(pos!= -1){
    t.replaceRange(word2.toUpperCase(), pos, pos+ word1.length());
} 
```

和这个

```
if(pos!= -1){
    d.remove(pos, word1.length());
    d.insertString(pos, word2.toUpperCase(), null);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T08:23:35.960

最终它会做同样的事情。

转到`JTextArea` [此处](http://kickjava.com/src/javax/swing/JTextArea.java.htm)的源代码，您可以在其中发现它正在做同样的事情。我在这里也复制了该方法，您可以在其中找到它正在执行的操作

```
d.remove(pos, word1.length());
    d.insertString(pos, word2.toUpperCase(), null); 
```

如果打电话：

```
 t.replaceRange(word2.toUpperCase(), pos, pos+ word1.length()); 
```

方法。

**该类方法的源代码如下**

```
public void replaceRange(String str, int start, int end) {

    490         if (end < start) {
    491             throw new IllegalArgumentException  ("end before start");
    492         }
    493         Document doc = getDocument();
    494         if (doc != null) {
    495             try {
    496                 if (doc instanceof AbstractDocument) {
    497                     ((AbstractDocument)doc).replace(start, end - start, str,
    498                                                     null);
    499                 }
    500                 else {
    501                     doc.remove(start, end - start);
    502                     doc.insertString(start, str, null);
    503                 }
    504             } catch (BadLocationException e) {
    505                 throw new IllegalArgumentException  (e.getMessage());
    506             }
    507         }
    508     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T23:00:40.833

我同意 Bhavik 的观点，即使是文档听众也不会看到任何区别：

```
txt.getDocument().addDocumentListener(new DocumentListener() {
    @Override
    public void removeUpdate(DocumentEvent pE) {
        System.out.println("removeUpdate: "+pE);
    }
    @Override
    public void insertUpdate(DocumentEvent pE) {
        System.out.println("insertUpdate: "+pE);
    }
    @Override
    public void changedUpdate(DocumentEvent pE) {
        System.out.println("changedUpdate: "+pE);
    }
}); 
```

在这两种情况下都会产生：

```
removeUpdate: [javax.swing.text.GapContent$RemoveUndo@97c87a4 hasBeenDone: true alive: true]
insertUpdate: [javax.swing.text.GapContent$InsertUndo@4ead24d9 hasBeenDone: true alive: true] 
```

# image - R：哪个热图/图像可以在没有任何树状图的情况下获得行排序图？

> ID：10562078
> 
> 赞同：11
> 
> 时间：2012-05-12T08:12:05.857
> 
> 标签：image, r, heatmap

哪个包最适合**仅对行进行排序的热图/图像，但不显示任何树状图或其他视觉混乱（只是在两个轴上具有自动命名标签的 2D 彩色网格）**。除了基本的数字排序，我不需要花哨的聚类。数据是我想要可视化的范围 (0,0.21) 中的 39x10 数字表。

我搜索了 SO（见此[）](https://stackoverflow.com/questions/5638462/r-image-of-a-pixel-matrix)和 R 站点，并尝试了一些。查看[R 图形手册](http://rgm2.lab.nig.ac.jp/RGM2/search.php?query=heatmap)以查看出色的可搜索屏幕截图和相应包列表。

软件包的范围令人困惑——哪一个是首选的热图（如*ggplot2*用于大多数其他绘图）？这是我到目前为止发现的：

*   [base::image](https://stackoverflow.com/questions/5638462/r-image-of-a-pixel-matrix) - 不好，轴上没有名称标签，没有排序/聚类
*   [base::heatmap](http://flowingdata.com/2010/01/21/how-to-make-a-heatmap-a-quick-and-easy-solution/) - 选项比以下选项更难理解：
*   [pheatmap::pheatmap](http://cran.r-project.org/web/packages/pheatmap/index.html) - 很棒，但似乎无法关闭树状图？（任何黑客？）
*   [正如安德烈指出的那样，ggplot2 人们使用 geom_tile](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)
*   [gplots::heatmap.2](http://www.compbiome.com/2010/04/r-heatmaps-with-gplots.html) , [ref](http://cran.r-project.org/web/packages/gplots/index.html) - 似乎受到生物技术人员的青睐，但对于我的目的来说太过分了。（与*ggplot**或 Wickham 教授无关）
*   [plotrix::color2D.matplot](http://rgm2.lab.nig.ac.jp/RGM2/images.php?show=all&query=package:plotrix)也存在

*`base::heatmap`*很烦人，即使使用 args*`heatmap(..., Colv=NA, keep.dendro=FALSE)`*它仍然会在行上绘制不需要的树状图。

现在我要*`pheatmap(..., cluster_cols=FALSE, cluster_rows=FALSE)`*手动对我的表进行预排序，比如这个人：[热图中的行顺序？](https://stackoverflow.com/questions/5320814/order-of-rows-in-heatmap)

附录：要显示每个单元格内的值，请参阅：[将包含值的矩阵显示为热图](https://stackoverflow.com/questions/3789549/display-a-matrix-including-the-values-as-a-heatmap)。我不需要那个，但它很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T21:59:56.003

`pheatmap`您可以使用选项并将`treeheight_row`其`treeheight_col`设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:00:40.760

只是你没有提到的另一个选项......包`bipartite`，因为它就像你说的那样简单

```
library(bipartite)
mat<-matrix(c(1,2,3,1,2,3,1,2,3),byrow=TRUE,nrow=3)
rownames(mat)<-c("a","b","c")
colnames(mat)<-c("a","b","c")
visweb(mat,type="nested") 
```

# mysql - 通过 https 连接到 MySQL

> ID：10562080
> 
> 赞同：0
> 
> 时间：2012-05-12T08:12:21.820
> 
> 标签：mysql, ssl, https

我在单独的服务器上有 Mysql。SSL 证书是否也需要安装在此服务器上？我目前在 https 上遇到错误。

请指教..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T21:01:53.510

修改了httpd.conf，它工作正常。由于连接在专用网络上，因此无需连接到 mysql。

# python - Django 按用户组过滤管理员列表和

> ID：10562081
> 
> 赞同：0
> 
> 时间：2012-05-12T08:12:31.667
> 
> 标签：python, django, django-models, django-admin

嗨，我真的是 django 的菜鸟。请问是否有按用户组过滤列表？在管理员创建用户时，还可以选择创建组。将这些用户分配给某些组后，我有另一个模型，例如员工，其中提供员工信息并链接到用户。所以非常员工必须是用户，也必须是组员工的成员。在创建新员工时，我已经在员工页面上为用户列表创建了一个下拉菜单。

问题是我似乎无法弄清楚如何根据用户组和分配过滤员工页面上显示的用户列表，因为它应该是与用户的 OnetoOne 关系。因此，在创建新员工时，已使用或已链接到特定员工的用户将不会再次显示在该列表中。

我正在考虑使用 Staff.model.count()？要做到这一点，== 用户到员工用户组。但是我应该去哪里定制呢？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:56:39.627

您应该编写自己的 ModelAdmin，然后取消注册用户并使用您的自定义行为向 UserAdmin 注册用户。这样您就可以覆盖查询集、表单等。查看 ModelAdmin 源代码

```
class UserAdmin(admin.ModelAdmin):
    # do stuff

admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

# blackberry - 黑莓的阿拉伯语

> ID：10562084
> 
> 赞同：0
> 
> 时间：2012-05-12T08:13:03.297
> 
> 标签：blackberry, arabic

我是黑莓开发的新手。我获得了对黑莓模拟器的阿拉伯语支持，但我无法在我的黑莓设备中安装阿拉伯语。任何人都可以指导我在我的黑莓手机中安装阿拉伯语。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:21:26.087

您是想修改您的手机以允许您输入阿拉伯语还是只想显示阿拉伯语文本？了解您拥有的设备型号和正在运行的操作系统版本会有所帮助

我在黑莓支持论坛上看到了这篇文章：http: [//supportforums.blackberry.com/t5/Java-Development/Arabic-Font-support-in-blackberry/td-p/1540517](http://supportforums.blackberry.com/t5/Java-Development/Arabic-Font-support-in-blackberry/td-p/1540517)

如果您尝试输入阿拉伯语文本，似乎是否支持在您的设备上输入阿拉伯语文本取决于您的运营商和您的手机。或者，也许您可​​以尝试在 Blackberry App World 中搜索“Arabic IME”以找到可让您输入阿拉伯语文本的第三方应用程序。

如果您只是想编写一个显示阿拉伯文本的应用程序，那么我提供的链接还链接到有关如何实现自定义字体支持的教程。

祝你好运！

# php - 用下一个相同的 id 值替换零 - MySQL

> ID：10562085
> 
> 赞同：0
> 
> 时间：2012-05-12T08:13:16.487
> 
> 标签：php, mysql, views

我使用了另一个表并生成了一个 MySQL 视图，通过使用该视图我编写了以下代码：

```
SELECT staffid,
   CASE Frequency
     WHEN 'Less' THEN COUNT(Frequency)
     ELSE '0'
  END AS LessCount,
  CASE Frequency
     WHEN 'Full' THEN COUNT(Frequency)
     ELSE '0'
  END AS FullCount,
  CASE Frequency
     WHEN 'More' THEN COUNT(Frequency)
     ELSE '0'
  END AS MoreCount
FROM effort_frequency
GROUP BY staffid, Frequency 
```

我使用上面的代码得到下表：

```
+-------+-----------+-----------+-----------+
| staff | lessCount | FullCount | MoreCount |
+-------+-----------+-----------+-----------+
|   10  |    2      |    0      |    0      |
|   10  |    0      |    1      |    0      |
|   10  |    0      |    0      |    3      |
|   11  |    1      |    0      |    0      |
|   11  |    0      |    3      |    0      |
+-------+-----------+-----------+-----------+ 
```

我需要转换它，它应该看起来像：

```
+-------+-----------+-----------+-----------+
| staff | lessCount | FullCount | MoreCount |
+-------+-----------+-----------+-----------+
|   10  |    2      |    1      |    3      |
|   11  |    1      |    3      |    0      |
+-------+-----------+-----------+-----------+ 
```

我们如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:21:06.320

```
SELECT   staffid               AS staff,
         SUM(Frequency='Less') AS lessCount,
         SUM(Frequency='Full') AS FullCount,
         SUM(Frequency='More') AS MoreCount
FROM     effort_frequency
GROUP BY staffid 
```

# spring - Karaf 上的 Spring 应用程序示例

> ID：10562091
> 
> 赞同：3
> 
> 时间：2012-05-12T08:14:17.947
> 
> 标签：spring, apache-karaf

Karaf 2.2.x 中是否有公开可用的 Spring 应用程序示例，特别是使用`@Repository`和其他 Spring 组件注释的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:19:46.373

如果你想使用 Spring 和 Karaf，你很可能绑定到 Spring DM 版本 1.2.1，因此也可能绑定到 Spring 2.5.6。您可能最好切换到蓝图。

# javascript - 专注于

> ID：10562092
> 
> 赞同：0
> 
> 时间：2012-05-12T08:14:23.050
> 
> 标签：javascript, html, css, asp.net-mvc-3

我目前有 2 个画布，分别显示衬衫的正面和背面。我使用了一个列表来选择是显示正面还是背面。我只能使用锚点 ( `#front`) 来解决问题，但这意味着滚动到网页中的特定位置。我是否有其他方法来实现它并在页面加载时将焦点设置到前面的画布上？

```
<ul style="border:0px solid yellow; padding-left:10px;">
    <li id="One">
        <a href="#One" id="first" style="height:20px; width:208px; margin-bottom:-8px; padding-bottom:0px;">
            <span style="margin-left:15px; font-size:medium;">Front Side</span>
        </a>
        <div>
            <canvas id="collage" width="450" height="450" style="margin:0px; padding:0px;"></canvas>
        </div>
    </li>
    <li id="Two">
        <a href="#Two" id="sec" style="height:20px; width:208px; margin-bottom:-8px; padding-bottom:0px;">
            <span style="margin-left:15px; font-size:medium;">Back Side</span>
        </a>
        <div>
            <canvas id="collage2" width="450" height="450" style="margin:0px; padding:0px;"></canvas>
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:17:02.867

你可以给画布一个标签索引：

```
<canvas 
    id="collage" 
    width="450" 
    height="450" 
    style="margin:0px; padding:0px;" 
    tabindex="1">
</canvas> 
```

然后打电话`document.getElementById('collage').focus()`

编辑：除了'focussing'如果问题是模拟点击页面加载和href，您可以使用jQuery执行以下操作：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('#One').click();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T12:21:20.320

```
<script type="text/javascript">
    function focuscanvas() {
        var canvas = document.getElementById('myGame');
        canvas.focus();
    };
</script> 
```

`onclick`每当您需要专注于画布时，将其用作事件。

```
<button type="button" class="btn btn-default" onclick="focuscanvas()" >
    Focus on Collage
</button> 
```

# css - 窗口的绝对 Div 填充剩余部分

> ID：10562093
> 
> 赞同：1
> 
> 时间：2012-05-12T08:14:31.740
> 
> 标签：css, layout, css-position

我有 3 个 div，全部定位：absolute，但我想填充窗口宽度的 div 只会适应其中文本的长度。我希望黄色 div #help 填充窗口的其余部分。

我知道这听起来很菜鸟，但我无法在任何地方找到解决方案。

```
<div id="tab1">tab1</div>
<div id="tab2">tab2</div>
<div id="help">help</div>

    #tab1 {position: absolute;
    bottom; 0px;
    right: 0px;
    width: 50px;
    height: 20px;
    background-color: green;
}

#tab2 {position: absolute;
    bottom; 0px;
    right: 50px;
    width: 50px;
    height: 20px;
    background-color: yellow;
}

#help {position: absolute;
    bottom; 0px;
    right: 100px;
    height: 20px;
    background-color: red;
} 
```

JS 小提琴：http: [//jsfiddle.net/FBWzX/](http://jsfiddle.net/FBWzX/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:18:40.130

如果要`#help`拉伸，可以同时设置`left`和`right`值。这个技巧也适用于`top`and `bottom`。绝对定位元素非常灵活。

```
#help {
    position: absolute;
    left: 0;
    right: 100px;
} 
```

[jsFiddle 演示](http://jsfiddle.net/FBWzX/1/)

# sencha-touch-2 - sencha touch 2 应用程序的警告消息

> ID：10562094
> 
> 赞同：2
> 
> 时间：2012-05-12T08:14:35.670
> 
> 标签：sencha-touch-2

我已经定义了一个名为 header 的容器，并在每个页面上使用它作为 header，但我收到以下警告消息。

> "[Ext.Component#constructor] 注册一个 id ( `header`) 已经被使用的组件。请确保现有组件已被销毁 ( `Ext.Component#destroy()`."

需要帮助的家伙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:10:15.550

如果您使用，而不是使用`id`财产，您将是安全的`itemId`

```
Ext.create('Ext.Component',{itemId: 'header'}); 
```

否则，在实例化具有相同 id 的新组件之前，您需要`destroy()`已经实例化组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T09:54:35.053

`id: 'header'`这是因为您在类定义中进行了硬编码`config`，因此当您第二次启动它时，将显示警告。

更好的方法是`id`仅在您真正需要时通过这种方式创建它：

`Ext.create('your-class-name',{id: your_desired_id})`

# ruby-on-rails - 有什么方法可以让 rack-livereload 运行得更快？

> ID：10562095
> 
> 赞同：2
> 
> 时间：2012-05-12T08:15:03.250
> 
> 标签：ruby-on-rails, ruby

我正在使用 ruby​​_gntp 在 Windows 上使用 rack-livereload。目前，从我保存 CSS 文件到在浏览器中看到结果需要 5 秒钟。5 秒实际上比手动刷新页面的时间要长。

有什么方法可以让 rack-livereload 运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:21:34.957

尝试调低`:min_delay`and `:max_delay`。livereload.js 的默认最小时间是 1000 毫秒，浏览器会慢慢增加检查时间，直到最大（默认 60000 毫秒）。查看此设置是否使其更具响应性：

```
config.middleware.insert_before(
  ::Rack::Lock, ::Rack::LiveReload, :min_delay => 500, :max_delay => 3000
) 
```

# android - ListView上方的Android图像？

> ID：10562102
> 
> 赞同：1
> 
> 时间：2012-05-12T08:16:05.003
> 
> 标签：android, image, listview

我有一个 ListView，它下面有两个水龙头，但我似乎无法弄清楚如何将图像放在 ListView 上方。我试过把一个 ImageView 放在上面，但它不会这样做吗？

这就是它现在的样子。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#FFFFFF">

<ImageView
    android:id="@drawable/frederiksberg"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" 
    android:layout_weight="1"/>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_margin="1dp"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:21:41.847

这很简单，伙计。

采用线性布局 L1。

在 L1 中添加一个 ImageView，Weight tag = 1，并在 L1 中添加列表视图，其宽度和高度必须为填充父级。

使 L1 的方向为垂直..

如果有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:27:34.823

试试这段代码并运行

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/add" android:layout_gravity="center_horizontal"/>

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

它对我来说很好。希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T08:29:14.763

这是使您的父布局成为相对布局的解决方案，因为它会为您提供更多的灵活性。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="122dp"
        android:src="@drawable/ic_launcher" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1" >
    </ListView>

</RelativeLayout> 
```

希望它对你有用..这是我为你发布的完整的 xml 文件，试试吧。

# c# - 我是否需要释放用作函数参数的托管 BSTR

> ID：10562104
> 
> 赞同：4
> 
> 时间：2012-05-12T08:16:22.643
> 
> 标签：c#, com

如果我从非托管代码调用了托管 COM 接口，我是否负责在使用后释放内存，还是由垃圾回收处理？

```
 public void WriteOutFile([In] [MarshalAs(UnmanagedType.BStr)] String data)
 {
      File.WriteAllText(fileName, data);
      //do I need the line below??
      Marshal.FreeBSTR(data);
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:25:35.813

编组涉及将数据从非托管内存复制到托管内存。您不需要释放该`string`实例，因为它是一个托管对象。但是如果在回调调用之前在本机代码中分配内存，则需要在回调调用之后释放本机代码中的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:24:52.210

你不应该释放字符串，因为调用者可能会重用传递的数据，如果你释放它可能会出现错误。原因是它`FreeBSTR`不使用任何引用计数机制并简单地调用[SysFreeString](http://msdn.microsoft.com/en-us/library/8f230ee3-5f6e-4cb9-a910-9c90b754dcd3%28VS.85%29)，顺便假设字符串分配有函数之一`Sys(Re)Alloc...`，在托管代码中您不知道的情况。[此处显示](http://msdn.microsoft.com/en-us/library/xda6xzx7%28v=VS.100%29.aspx)的示例很有趣，想象调用您的*非托管*代码是这个（来自之前的链接）：

```
// shows using the Win32 function 
// to allocate memory for the string: 
BSTR bstrStatus = ::SysAllocString(L"Some text");
if (bstrStatus != NULL)
{
   pBrowser->put_StatusText(bstrStatus);
   // Free the string:
   ::SysFreeString(bstrStatus);
} 
```

并且您已经`put_StatusText(...)`在您的托管代码中实现了我们正在重现您的情况。如您所见，调用者负责在被调用者**之外**分配/释放参数字符串。

# c# - 在循环中创建下拉列表的最佳方法

> ID：10562109
> 
> 赞同：-2
> 
> 时间：2012-05-12T08:17:23.520
> 
> 标签：c#, asp.net

我有两个数据库表，一个是类别表，第二个是类别值表。

对于每个类别，我需要使用第二个表的值创建一个下拉列表。第二步是将这些动态创建的下拉列表放在一个类似于 formview 的组件中，以更新、删除更新并从填充了第三个 db 表的 GridView 中获取 SelectedValue。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:31:14.247

在不知道如何获取数据的情况下，很难给出准确的答案，但您可以考虑两种广泛的方法。用于遍历类别的 foreach 循环，它将类别 id 传递给为该类别构建下拉列表的函数。

```
foreach category in categories
{
  BuildDropDown(category.ID);
}

private void BuildDropDown(int id)
{
  var values = GetValuesByCategoryID(id)
  foreach value in values
  {
    ddl.Items.Add(new ListItem(value, value.Id));
  }
} 
```

或者，另一种方法是在加载页面时获取所有数据。如果您的数据在 2 个表中，则：

```
SELECT * 
FROM tblCategory AS C 
INNER JOIN tblCategoryValue AS CV ON CV.FKCategoryID = C.CategoryID 
```

然后调用它并遍历跟踪 CategoryID，当它发生变化时，是时候发出一个新的下拉列表了。

# javascript - 将 jquery 附加到特定的 id 和类

> ID：10562110
> 
> 赞同：0
> 
> 时间：2012-05-12T08:17:24.893
> 
> 标签：javascript, jquery, append

我似乎无法附加到特定的 id 和类。我希望 Hellow 世界只被附加到第一个

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
var id =94;
    $("#'id',.m").append(" <b>Hello world!</b>");
  });
});
</script>
</head>
<body>
<p id="94" class="postitem m" >This is a paragraph.</p>
<p id="94" >This is another paragraph.</p>
<button>Insert content at the end of each p element</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:31:32.373

两个问题：

1.  `id`值在页面上***必须***是唯一的。您`id`对两个不同的元素使用相同的。

2.  您的`id`值[对 CSS 无效](http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier)。`id`与 CSS 一起使用的值**必须**以字母开头。由于 jQuery 使用 CSS 选择器来查找元素，我强烈建议使用有效的选择器。（这些 ID 对于[HTML4](http://www.w3.org/TR/html401/types.html#type-name)也是无效的，但[HTML5](http://www.w3.org/TR/html5/elements.html#the-id-attribute)允许它们。只是 CSS 不行。）

如果你解决了这两个问题，你会没事的。请注意，如果您有唯一`id`的 s，则不再需要“m”类，除非您将其用于其他用途。

```
<html>
<head>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    var id = 'x94';
    $("#" + id).append(" <b>Hello world!</b>");
  });
});
</script>
</head>
<body>
<p id="x94" class="postitem m" >This is a paragraph.</p>
<p id="x95" >This is another paragraph.</p>
<button>Insert content at the end of each p element</button>
</body>
</html> 
```

[实例](http://jsbin.com/omunud)| [来源](http://jsbin.com/omunud/edit)

* * *

另外：我**强烈**建议向该 HTML 添加一个文档类型。没有一个就是quirks模式，jQuery不支持quirks模式（各种计算都会出错）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T08:19:16.933

[那么一定是这样的](http://jsfiddle.net/NvMAh/)

```
$('#'+id+'.m').append('<b>Hello world!</b>'); 
```

没有`$('#94.m')`空格表示 id 和 class 都必须存在才能匹配

# facebook - Facebook 应用程序 - 没有 SSL

> ID：10562112
> 
> 赞同：1
> 
> 时间：2012-05-12T08:17:47.837
> 
> 标签：facebook, security, ssl, canvas

> **可能重复：**
> [Facebook 应用程序 - 安全画布 - SSL](https://stackoverflow.com/questions/10533676/facebook-app-secure-canvas-ssl)

我正在构建 facebook 应用程序，但看起来我需要购买 SSL。有人能告诉我如何避免购买吗？

（我已经问过了，但没有得到确切的答案）

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T08:43:45.207

使用提供 SSL 的主机（例如前面提到的 Heroku）或使用开源 SSL 提供程序（例如[Open SSL](http://www.openssl.org)或[Let's Encrypt](https://letsencrypt.org/getting-started/) ）创建 SSL 证书是我所见过的绕过购买 SSL 证书的唯一方法用于 Facebook 应用程序。

但是，如果您想创建 Facebook 页面标签应用程序，您可以通过在 Facebook 中安装[静态 HTML：iframe 标签](https://apps.facebook.com/static_html_plus/)应用程序来绕过它，然后将您的网站放在内容输入框内的 iframe 中。

```
<!DOCTYPE html> 
<html>
<head>
<title>Website</title>
</head>
<body>
<iframe src="http://www.example.com" width="520px" height="600px"></iframe>
</body>
</html> 
```

# c# - java的Eventlist的c#等价物是什么

> ID：10562114
> 
> 赞同：-5
> 
> 时间：2012-05-12T08:18:22.437
> 
> 标签：c#, java, list

并在 java 代码到 ac# 代码之间进行某种映射，我已经越过了

```
EventList yourlist; 
```

在java中，我想知道什么，它在c#中的等价物是什么？c# 中的普通列表会相对相同吗？或者 C# 中的 java 的 EventList 有一些非常具体的东西。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T08:24:12.893

编辑：我们现在知道有`EventList`问题的是[SSJ library 中的一个接口](http://www.iro.umontreal.ca/~simardr/ssj/doc/html/umontreal/iro/lecuyer/simevents/eventlist/EventList.html)。目前尚不清楚为什么这不仅仅是一个通用接口，因为它看起来接口中没有任何特定于事件的东西。（这让我对 SSJ 库的设计感到担忧，但也许它的其余部分设计得很好。）

如果您尝试移植使用 SSJ 的代码，则需要移植 SSJ 库本身，或者找到一些等效的代码。

*不过，*在您更熟悉 C# 和 .NET 之前，我不建议您这样做。首先学习语言和平台的基础知识，然后你将在以后更好地移植代码。

* * *

*直接*移植Java代码不是一个好主意，成员对成员。相反，您应该*习惯性*地移植它。找出Java 代码试图建模的*概念，然后找出在 C# 中建模相同想法的最合适方法。*有时代码看起来很相似，有时则不会。

Java 对事件没有任何*语言*支持——大概`EventList`是类似的东西（尽管它不是核心 Java 库的一部分，所以我们无法确定）。在 C# 中，您通常只使用一个事件，例如

```
public event EventHandler SomeEvent; 
```

有关它们的更多信息，请参阅[我关于代表和事件的文章。](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

当然，如果`EventList`与事件处理程序无关，您会想要做一些不同的事情——我们需要更多的上下文才能为您提供更多帮助。

# c# - 如何添加 SUM 列（在数据网格视图中）以汇总来自其他数据表的关系的数据？

> ID：10562115
> 
> 赞同：0
> 
> 时间：2012-05-12T08:18:30.087
> 
> 标签：c#, postgresql, datagridview, sum

好的，所以我有两张桌子。

第一个是“服务”，其中包含有关汽车、日期、在汽车上工作的员工等信息。

第二张表是“服务日志”。它包含以下内容：

`ID ID_Service Text Price`

`1 1 blabla 50`

`2 1 gfdgfd 75`

两个表都有自己的数据网格视图。

我想在第一个数据网格中添加列“Sum”，它显示所有价格的总和。对于此示例，它将是 75。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:57:32.937

如果“服务日志”表示“价格表”，请尝试编写以下查询：

```
SELECT ..., SUM([Price]) FROM xyz WHERE ID_Service=x OR ID_Service=y 
```

而不是在列设置中使用 Eval 并且您将生成新列 whitch 将被命名为“Columnx”，其中 x 等于查询中列的索引。您必须使用 WHERE...OR... 来选择在汽车上完成的所有事情。

或者，如果“服务日志”表示所有已在服务中完成的汽车的所有维修列表，请尝试编写以下查询：

```
SELECT ..., SUM([Price]) FROM Service_journal WHERE ID_Service=CarServiceNumber 
```

此 SQL 查询将获取已完成的所有服务/维修价格的摘要。此查询基于对 ID_Service 的理解，因为这意味着 id whitch 对于一辆车上的所有维修都是常见的。

有点不清楚的问题。希望这可以帮助。

# php - 在我的 PHP 站点中发布值返回 null

> ID：10562124
> 
> 赞同：1
> 
> 时间：2012-05-12T08:20:20.053
> 
> 标签：php, ubuntu, memory-limit

> **可能重复：**
> [PHP 警告：113 字节的 POST 内容长度超出未知中 -1988100096 字节的限制](https://stackoverflow.com/questions/6315358/php-warning-post-content-length-of-113-bytes-exceeds-the-limit-of-1988100096-b)

我正在向 php 文件提交表单，但在帖子中没有任何内容来自表单并检查 apache error_log 并得到以下错误：

```
PHP Warning:  Unknown: POST Content-Length of 273 bytes exceeds the limit of -201326592 bytes in Unknown on line 0, 
```

请建议我如何解决此错误。

在我的`php.ini`设置中

```
upload_max_filesize 2000M
post_max_size 800M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:37:20.360

如果您[按照建议](https://stackoverflow.com/questions/6315358/php-warning-post-content-length-of-113-bytes-exceeds-the-limit-of-1988100096-b)，您会发现建议是 2000M 超出了您机器的有符号整数限制，因此整数值被截断并变为负数。要达到最大上传大小，请设置

`upload_max_filesize = 2147483647`

并且不要将 2000M 用于 php.ini 中的任何其他整数属性

# algorithm - 分析算法中的递归

> ID：10562125
> 
> 赞同：3
> 
> 时间：2012-05-12T08:20:36.217
> 
> 标签：algorithm, recursion, time-complexity

这是我的算法课上的一个老作业问题。我有解决问题的办法，但即使经过多次尝试，我也无法理解如何朝着正确的方向思考以得出解决方案。

```
function h(N) {
    if (N==1) return 3;
    else { 
        sum = 1;
        i = 0;
        while (i < h(N-1))
            sum = sum + i;
            i = i + 1;
        return sum;
   }
} 
```

据我说，由于 h(N-1) 在 while 循环中被重复调用，所以 while 循环应该运行与 h(N-1) 返回的次数一样多的次数。除此之外，while 循环中的函数调用 h(N-1) 也会发生很多次。因此，根据我的说法，我应该得到这样的东西：

T(N) = T(N-1)*H(N-1) + C*H(N-1) + D

其中
1\. T(N) 是运行时间，
2\. T(N-1)*H(N-1) 因为对 h(N-1) 的一次递归调用将占用 T(N-1) 并且因为它是每次进行比较时重新计算，它将被称为 H(N-1) 次。（其中 H(N-1) 是调用返回的值）
3\. C*H(N-1) 是 while 循环内语句的运行时间（因为 while 循环运行 H(N-1)次。

我没有从教授那里得到满意的答案，如果有人能帮助我理解这一点，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:46:08.183

尝试分两步理解这一点，首先考虑这个更简单的函数，我们将`while`循环替换为`if`.

```
function g(N) {
    if (N==1) return 3;
    else { 
        sum = 1;
        i = 0;
        if(i < g(N-1))
            sum = sum + i;
            i = i + 1;
        return sum;
   }
} 
```

在这里，我们得到递归：

```
G(N) = G(N-1) + O(1) 
```

到现在为止还挺好？在这里，计算 g(N) 的工作涉及解决较小的问题 g(N-1) 加上恒定的工作量。

现在，让我们回到原来的函数 h(N)。发生了什么变化？现在，计算 h(N) 的工作涉及求解子问题 h(N-1), h(N-1) 次。并且在每一次（即在while 循环中），我们都会做大量的工作。还有另一个恒定量的工作在 h(N) 中只完成一次，即在 while 循环之外。所以，我们基本上得到：

```
H(N) = H(N - 1) *{H(N - 1) + O(1)}  + O(1) 
```

我们可以通过替换来重写上面的内容`T(n) = H(n) + O(1)`。因此，我们得到：

```
T(N) = H(N - 1) * T(N - 1)  + O(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:45:43.637

假设在执行 h(N) 时，在循环的每次迭代中都会重新计算 h(N-1) 的值（这可能是大多数语言和大多数编译器的情况）

![在此处输入图像描述](../Images/c1358084d0b86bf1317a7f0e44d1fc79.png)

# xcode - 在子类中保留数组

> ID：10562130
> 
> 赞同：0
> 
> 时间：2012-05-12T08:21:51.567
> 
> 标签：xcode

更新：

我对 UIImageView 进行了子类化，以使一些图像可以通过触摸手势移动。在视图控制器中，我有一个数组保存每个图像视图的初始位置。**我的问题是，每当从子类调用此数组时，它都会返回 null。**这个想法是检查图像是否处于其原始位置，或者它是否已经被移动过，我已经将代码剥离为 NSLog 发生了什么，但问题仍然存在并且让我发疯。

视图控制器.h

```
NSMutableArray *originalPositions;
@property (nonatomic, retain) NSMutableArray *originalPositions;
-(void)testLogging; 
```

视图控制器.m

```
@synthesize originalPositions;

- (void)viewDidLoad {
originalPositions = [[NSMutableArray alloc]init];
}

-(void)drawImages {
for (int i = 0; i < imagesArray.count; i++) {
 CGRect frame = CGRectMake(65 * i, 10, 60, 60);
 draggableView *dragImage = [[draggableView alloc] initWithFrame:frame];

   NSString* imgName = [imagesArray objectAtIndex:i];
    [dragImage setImage:[UIImage imageNamed:imgName]];
    [dragImage setUserInteractionEnabled:YES];
   [self.view addSubview:dragImage];

   NSString *originalPositionAsString = NSStringFromCGPoint(dragImage.center);
   [originalPositions addObject:originalPositionAsString];
}
}
-(void)testLogging {
NSLog(@"Logging array: %@", originalPositions);
}

-(IBAction)btnClicked {
[self testLogging];
} 
```

当从类中的 IBAction（或任何其他方式）调用时，'testLogging'-方法 NSLogs 正确地记录数组，但如果我从子类调用相同的方法，它 NSLogs 为空：

子类.m

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
ViewController *viewController = [[ViewController alloc] init];
[viewController testLogging];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:42:29.510

```
self.originalPositions = [[NSMutableArray alloc]init]; 
```

这已经是内存泄漏，当您调用 self.originalPositions = bla 时，将保留 'bla'。因此意味着保留计数增加。这意味着您的可变数组的保留计数为 2，并且一旦您的 UIImageView 消失，它将泄漏。

至于其余的，我不知道您的代码有什么问题。我的第一个猜测是你还没有调用 populatePositionsArray，你应该在创建/显示视图时调用它，以便确保在调用 touchesBegan 时填充数组。

或者，您可以在 touchesBegan 中包含一个“if”语句，以检查数组是否存在，否则在继续之前调用 populatePositionsArray 来填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:25:22.257

我通过在填充后将数组写入 plist 文件来解决它。不是很优雅但工作。

谢谢你们的帮助。

# javascript - 如何设置滚动条的样式 ?

> ID：10562132
> 
> 赞同：1
> 
> 时间：2012-05-12T08:21:58.207
> 
> 标签：javascript, jquery, css, scrollbar

我怎样才能让我的滚动条变黑`<div>`？

有什么可以在 Webkit、IE7 到 IE9 和 Firefox 中工作的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T08:24:06.587

您不能在 Firefox 中执行此操作。只有 IE 和 webkit 浏览器支持修改滚动条。

请参阅[http://msdn.microsoft.com/en-us/library/ie/ms531153%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms531153%28v=vs.85%29.aspx)了解如何在 MSIE 和[http://www.webkit.org/blog/中执行此操作363/styling-scrollbars/](http://www.webkit.org/blog/363/styling-scrollbars/)关于如何在 webkit 中进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:24:19.643

您无法设置浏览器滚动条的样式。它没有得到普遍支持（尽管 IE 确实尝试实现它）。

此外，从可访问性的角度来看，这样做是一个坏主意。想想看不到你非常纤细、几乎看不见的自定义滚动条或者不知道你所拥有的实际上是一个滚动条的（老）人。

[您可以像这样](http://www.hesido.com/web.php?page=customscrollbar)在 JS 中使用自定义滚动条插件。到处都是

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:35:53.817

正如 Pez Cuckow 所说：

> 我想自定义滚动条是用 javascript 实现的，它看起来很漂亮，你不能让浏览器滚动条看起来那么好！
> 
> 查找我刚刚为您整理的示例：http: [//jsfiddle.net/9LHPW/2/](http://jsfiddle.net/9LHPW/2/) - 请注意检查资源选项卡，因为这包括四个外部文件（3x Js 和 1x CSS）
> 
> 使用 Javascript 和 jQuery 查看此网站以获取更多示例（看起来正是您想要的）：http: [//manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)
> 
> [您可以在http://manos.malihu.gr/jquery-custom-content-scroller](http://manos.malihu.gr/jquery-custom-content-scroller)找到插件的主页
> 
> 以及如何使用它部分！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T08:59:09.147

我同意你不应该篡改可滚动区域的滚动条的可见性（我在看你苹果）。有时，带有可滚动文本的框正好在边界之内，并且没有视觉线索让用户知道它在滚动，从而使用户感到困惑。阻止用户使用您的应用程序真的是个好主意吗？很可能不会，但您也可以反驳说您的目标人群不会有任何问题；不能很好看的人可能不会使用极端内联竞争的应用程序。然而，除了视觉障碍之外，还有一些可访问性/可用性问题；认知障碍，或不精通技术，

说了这么多，做自己开心的事。我就是做这个的。

# ios - 除了它已经包含的先前数据之外，如何向 TableView 添加新数据？

> ID：10562136
> 
> 赞同：0
> 
> 时间：2012-05-12T08:24:04.743
> 
> 标签：ios, xcode, ios5, twitter

我正在使用我的 Twitter 应用程序。我在 TableView 中获取搜索结果。当我刷新搜索结果时，表格会填充新传入的推文，而较早的推文会消失。任何人都可以建议我一种在早期推文中添加新推文的方法吗？

```
//my array
-(NSMutableArray *)retrievedTweets
{
if (retrievedTweets == nil)
{
    retrievedTweets = [NSMutableArray arrayWithCapacity:50];
}
return retrievedTweets;
}

-(BOOL)checkCanTweet
{
if ([TWTweetComposeViewController canSendTweet])
{
    self.goButton.enabled = YES;
    self.goButton.alpha = 1.0;
    return YES;
}
else
{
    self.goButton.enabled = NO;
    self.goButton.alpha = 0.6;
    return NO;
}
}

//search function

-(void)searchTweet{

if (retrievedTweets == nil) {
    retrievedTweets=[[NSMutableArray alloc] init];
}
//retrievedTweets = nil;

if ([self checkCanTweet])
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = 
    [accountStore
     accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter ];
    [accountStore requestAccessToAccountsWithType:accountType
                            withCompletionHandler:^(BOOL granted, NSError *error)
     {
         if (granted)
         {
             NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

             if ([accountsArray count] >0)
             {
                 [self.retrievedTweets removeAllObjects];

                 NSString *str1 = [[NSString alloc]initWithFormat:@"http://search.twitter.com/search.json?q="];
                 //NSString *str2 = [[NSString alloc]initWithFormat:@"http://search.twitter.com/search.json?q=%23"];

                 NSString *textString = searchBarText.text;
                 NSString *urlString = [[NSString alloc]init];

                 if(textString==nil)
                 {
                     self.goButton.enabled = NO;
                 }
                 else {

                     self.goButton.enabled = YES;

                     unichar  c = [textString characterAtIndex:0];

                     if(c == '#'){

                         NSString *newStr = [textString substringWithRange:NSMakeRange(1, [textString length]-1)];
                         urlString=[str1 stringByAppendingFormat:newStr];
                     }
                     else {

                         urlString = [str1 stringByAppendingFormat:searchBarText.text];
                     }
                 }

                 ACAccount *twitterAccount = [accountsArray objectAtIndex:0];
                 TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:urlString] parameters:nil
                                                           requestMethod:TWRequestMethodGET];

                 [postRequest setAccount:twitterAccount];

                 [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
                  {
                      if ([urlResponse statusCode] == 200)
                      {
                          NSError *jsonParsingError;
                          NSDictionary *homeTimeline = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonParsingError];

                          NSDictionary *results=[homeTimeline objectForKey:@"results"];
                          Search *current;

                          for (NSDictionary *dict in results)
                          {

                              current = [[Search alloc] initWithDictionary:dict];
                              [self.retrievedTweets addObject:current];
                          }

                          dispatch_async(dispatch_get_main_queue(), ^{

                              [self.tableViewPost reloadData];

                          });
                      }
                      else
                      {
                          NSLog(@"%@", [NSString stringWithFormat:@"HTTP response status: %i\n", [urlResponse statusCode]]);
                      }
                      //   [self.tableViewPost reloadData];
                  }];
             }
         }
         else
         {
             NSLog(@"Error, Twitter account access not granted.");
         }
     }];
}

[searchBarText resignFirstResponder]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:59:58.527

您尚未提供 tableview 委托代码。每次从 Web 服务检索新数据时，您都需要将对象添加到 NSMutableArray。在访问 Web 服务之前，获取您正在使用的 tableview 的数组（可变）并从 Web 向其​​中添加对象解析后服务。将此数组分配给tableview数组，然后重新加载表。

# python - 没有每行迭代就可以确定文件中有多少行？

> ID：10562145
> 
> 赞同：4
> 
> 时间：2012-05-12T08:25:01.867
> 
> 标签：python, algorithm, filesystems

> **可能重复：**
> [如何在 Python 中廉价地获得行数？](https://stackoverflow.com/questions/845058/how-to-get-line-count-cheaply-in-python)

再会。我在下面有一些代码，它实现了每行文件读取和计数器迭代。

```
def __set_quantity_filled_lines_in_file(self):
    count = 0
    with open(self.filename, 'r') as f:
        for line in f:
             count += 1
    return count 
```

我的问题是，是否有方法可以确定当前文件中有多少行文本数据而无需每行迭代？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:53:15.497

*一般来说*，不可能比读取文件中的每个字符并计算换行符做得更好。

如果您知道有关文件内部结构的详细信息，则可能是可能的。例如，如果文件长度为 1024kB，每行长度为 1kB，则可以推断出文件中有 1024 行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:30:24.413

我不确定 Python 是否具有该功能，非常怀疑它，但它本质上需要读取整个文件。换行符由 \n 字符（实际上取决于系统）表示，因此如果不遍历整个文件，就无法知道文件中存在多少个换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T08:27:56.757

不，此类信息只能通过遍历整个文件的内容（或将整个文件读入内存）来检索。但除非您确定文件总是很小，否则最好不要考虑这样做）。

即使*您*不遍历文件内容，您调用的函数也会执行。例如，`len(f.readlines())`将*整个*文件读入一个列表只是为了计算元素的数量。这是非常低效的，因为您根本不需要存储文件内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T08:48:01.273

您可以使用**readlines()**文件方法，这可能是最简单的。

如果您想与众不同，可以使用**read()**成员函数获取整个文件并使用**collections.Counter**类计算 CR、LF、CRLR LFCR 字符组合。
但是，您将不得不处理终止线路的各种方式。
就像是：

```
import collections
f=open("myfile","rb")
d=f.read()
f.close()
c=collections.Counter(d)
lines1=c['\r\n']
lines2=c['\n\r']
lines3=c['\r']-lines1-lines2
lines4=c['\n']-lines1-lines2
nlines=lines3+lines4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T08:35:05.567

这给出了答案，但会读取整个文件并将行存储在列表中

```
 len(f.readlines()) 
```

# javascript - 在 Google Chrome 中使用 FullScreen API 时，我无法在输入元素中使用字母数字键盘

> ID：10562148
> 
> 赞同：5
> 
> 时间：2012-05-12T08:26:09.923
> 
> 标签：javascript, google-chrome, fullscreen

在 Google Chrome 中，当我使用 FullScreen API 并尝试在输入元素中输入字母数字内容时，它不会执行任何操作。它适用于火狐。

他们是 Google Chrome 中这个问题的解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T04:22:24.320

```
docElm.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT); 
```

检查[这个链接](http://hacks.mozilla.org/2012/01/using-the-fullscreen-api-in-web-browsers/)

来自链接的内容：

> **全屏键输入**
> 
> 出于安全原因，大多数键盘输入已在全屏模式下被阻止。但是，在 Google Chrome 中，您可以通过调用带有标志的方法来请求键盘支持：

```
docElm.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT); 
```

> 这在 Safari 中不起作用，并且不会调用该方法。
> 
> 对于 Firefox，我们正在讨论和研究如何在不危及最终用户安全的情况下添加键盘输入支持的各种方法。一个尚未实现的建议是 requestFullscreenWithKeys 方法，该方法反过来会为用户触发某些通知。

# mysql - 如何避免默认日期（1970-01-01）存储在 MySql 中

> ID：10562151
> 
> 赞同：1
> 
> 时间：2012-05-12T08:27:08.287
> 
> 标签：mysql, date

我正在使用 MySql 作为我的项目的数据库，我的表单中有一个 DOB（出生日期）字段，它是一个可选字段，因此，用户可以在 DOB 字段中输入或不输入值。假设他们不会在 DOB 中输入值，然后 1970-01-01 日期存储在 DB 的 dob 列中。DB 中 DOB 列的默认值仅为 NULL。为避免这种情况，我该怎么办？我在我的项目中使用 PHP。

我正在使用 ORM，所以，我插入如下

```
$user->dob = date('y-m-d',strtotime($post->dob)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:11:29.153

只需检查用户是否在 DoB 字段中输入了某些内容。

```
if (!empty($post->dob)) 
    $user->dob = date('y-m-d',strtotime($post->dob)); 
```

# facebook - 理想情况下，从用户设置中删除 FB 应用程序应该限制我的访问令牌，但它不会

> ID：10562152
> 
> 赞同：0
> 
> 时间：2012-05-12T08:27:09.007
> 
> 标签：facebook, facebook-graph-api, oauth-2.0

我的产品用户正在使用 Facebbok 应用程序进行授权和生成密钥和令牌。当我删除该应用程序时，我的用户仍然能够连接并从 facebook 获取帖子。那个怎么样..？旧令牌应该不会像我想象的那样工作，但它们仍在工作..是否需要时间来反映。？

请帮我..：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:54:22.463

当您的一位用户从隐私设置界面中删除应用程序时![隐私设置界面](../Images/ae2dd4c081c7966d4ffb81de007f1c45.png)，该应用程序的访问令牌将失效。这应该是即时的。

但是，没有什么可以阻止您返回应用程序并再次对其进行授权，并且该应用程序生成的内容仍将在您的时间轴上可见。此处的另一个答案显示了如何删除应用程序制作的提要故事，如果您出于某种原因想要这样做。

此外，请检查您的用户是否没有从他们的提要中删除应用程序的故事，或者从时间轴中隐藏应用程序，这两者都不会删除他们使用应用程序的能力或会使令牌无效。

您还可以通过`HTTP DELETE`请求`/USER_ID/permissions`使用用户的访问令牌或应用程序访问令牌以编程方式从用户帐户中删除应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:46:21.917

如果您通过您的某个应用在 facebook 上发布了帖子，您还可以从同一应用中删除该帖子。您需要获取帖子ID（当您首先成功发布帖子时会返回它）。然后发出“删除”请求。[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

如果您删除了应用程序，或者用户自己发布了项目（通过共享对话框），或者您找不到帖子 ID，或者用户撤销了“publish_stream”权限，那么帖子就在那里。

# android - 如何动态添加图像android

> ID：10562153
> 
> 赞同：0
> 
> 时间：2012-05-12T08:27:27.023
> 
> 标签：android, uiimageview

我有称为通用活动的基类，因为我在每个活动中都返回字符串。通过使用以下代码。

```
txtHeader = (TextView)findViewById(R.id.txtHeaderText);
        txtHeader.setText(getScreenHeader()); 
```

我正在返回空字符串

```
protected String getScreenHeader(){
        return "";
    } 
```

在另一项活动中，我将以这种方式进行。

```
public  final static String SCREEN_NAME = "Dashboard";
@Override
    protected String getScreenHeader() {
        return SCREEN_NAME;
    } 
```

对于图像视图，我该怎么做。

对不起我的英语不好。

谢谢，尼基尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:44:23.693

您将需要使用这样的 Bitmap 对象：

```
 Bitmap b = getBitmapImage();
 ImageView img = (ImageView )findViewById(R.id.imgView);
 img.setImageBitmap(b); 
```

# c++ - char数组解释为构造函数中的char指针请帮助

> ID：10562157
> 
> 赞同：1
> 
> 时间：2012-05-12T08:27:59.313
> 
> 标签：c++, constructor, struct, char, typedef

```
#ifndef ASSETS_H_INCLUDED
#define ASSETS_H_INCLUDED
#include <vector>
#include string.h>

const int ID_Max = 100;
typedef char ID[ID_Max];

struct node;

struct people{
std::vector<ID> T_ID;
std::vector<node*> Nodes;
people(ID t, node* person){
    T_ID.push_back(t);
    Nodes.push_back(person);
}
people(){}
};

struct node {
ID T_ID;
node* Parent;
people* leftChildren;
node* rightChild;
node(ID t, node* p, node* l, node* r) :I_ID(t), Parent(p), rightChild(r) 
{leftChildren = new people(); }
};

#endif // ASSETS_H_INCLUDED 
```

我的问题是它在构造函数中将 ID 解释为 char 指针，所以当我希望 people::people(char[ID_Max], node*) 相同时，这是构造函数 people::people(char*, node*)节点。如果您有建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T08:59:46.917

如果您在其中编写带有数组类型的函数签名，则与使用指针相同，例如：

```
void f(char p[]); 
```

与此相同：

```
void f(char *p); 
```

看起来这是您问题的根源。你可能会更好，例如`std::array<char,ID_Max>`（在 C++11 中）或`std::vector<char>`（在 C++98 中）。然后，您可以使用`&cont[0]`. 作为一个小问题，我似乎记得`vector`在 C++98 中，内存并不严格保证是连续的，但在实践中它总是连续的（你可以依赖它）。措辞在 C++03 中已修复。

# mysql - mySQL查询以选择一个字段的最大值与另一个字段共同

> ID：10562158
> 
> 赞同：1
> 
> 时间：2012-05-12T08:28:24.430
> 
> 标签：mysql

1我正在尝试使用 gmail 之类的对话线程编写消息表。（我使用 php）。表格如图所示。posID 表示给定 threadID 中每条消息的位置。

```
id | senderID | recvrID |  message(threadID,posID)  | threadID | posID |   time 
1       1          3            msg 1,1                  1          1       12pm
2       3          1            msg 1,2                  1          2        3pm
3       1          2            msg 2,1                  2          1        1pm 
```

我需要编写一个查询来查找所有 msg 线程到 senderID=1（在这种情况下），如果一个线程中有多个 msg，则仅在每个线程中选择最后一个 msg（可以按 positionID 或时间排序）。

预期输出如下表。

```
 senderID      |  message                 | Time
   1               msg 1,2                  3pm
   1               msg 2,1                   1pm 
```

编辑：经过更多阅读，我想我需要选择具有发送者/接收者约束的消息，并且（如果线程中有多个消息，则每个线程 ID 仅具有 MAX(posID) 的那些消息）。不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:34:19.897

这是你想要的？

```
$user = '1';
$q="SELECT * FROM tablename WHERE senderID = '$user'";
$r=mysql_query($q);
while($w=mysql_fetch_array($r)){    
   $thread = $w['threadID'];
   $id = $w['id'];
   $message = $w['message'];
   $q2="SELECT * FROM tablename WHERE threadID = '$thread'".
        "ORDER BY posID DESC LIMIT 1";   
   $r2=mysql_query($q2);
   while($w2=mysql_fetch_array($r2)){
      $checkid = $w2['id'];
      if($checkid != $id){
         $message = $w2['message'];
      }
   }
   echo $message;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T18:41:39.933

我认为您的问题具有误导性：

*   您实际上需要`userID=1`发送者或接收者的所有线程；
*   for`threadID=1`和`posID=2`相应的时间是`3pm`，但不是`12pm`您指定的。

以下查询将按其位置为您提供每个线程中的最后一条消息：

```
SELECT senderID, recvrID, message, time
  FROM message m
  JOIN (SELECT threadID,max(posID) maxPOS FROM message
        GROUP BY threadID) mm
    ON m.threadID = mm.threadID AND m.posID = mm.maxPOS; 
```

您可以添加以下过滤器：

*   `WHERE senderID=1`对于`userID=1`只有发件人的消息。*但是，这与您的样本不匹配*；
*   `WHERE senderID=1 OR recvrID=1`对于所有消息，在哪里`userID=1`参与。*这将产生预期的结果。*

试试[这里](http://www.sqlfiddle.com/#!2/17464/18)的查询。

请注意，您的表格将无法处理一封邮件有多个收件人的情况。

# java - Java 服务器上的 Web 编程，空指针异常

> ID：10562159
> 
> 赞同：3
> 
> 时间：2012-05-12T08:28:31.840
> 
> 标签：java, servlets

当我第一次在服务器上运行 Java servlet 时，所有网页都运行良好，没有问题。但是当我停止服务器，重新启动它并再次运行 servlet 时，一页上出现空指针异常。我试图打印发生此错误的东西，但是当我在`System.out.printl("something")`那里写，然后再次运行 servlet（多次重新启动服务器）时，不再抛出异常。

任何人都可以帮助解决这个问题吗？

这是doPost方法抛出的异常在哪里

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    ShoppingCart cart = (ShoppingCart)request.getSession().getAttribute("Cart");
    ProductCatalog pc = (ProductCatalog) request.getServletContext().getAttribute("Product Catalog");
    String id = request.getParameter("productID");
    if(id != null){
        Product pr = pc.getProduct(id);
        cart.addItem(pr); // here is null pointer exception
    }
    RequestDispatcher dispatch = request.getRequestDispatcher("shopping-cart.jsp");
    dispatch.forward(request, response);
} 
```

这是购物车类：

私有 ConcurrentHashMap 项；

```
/** Creates new Shopping Cart */
public ShoppingCart(){
    items = new ConcurrentHashMap<Product, Integer>();
}

/** Adds a product having this id into cart and increases quantity. */
//This method is called after "add to cart" button is clicked. 
public void addItem(Product pr){
    System.out.println(pr.getId() + " sahdhsaihdasihdasihs");
    if(items.containsKey(pr)){
        int quantity = items.get(pr) + 1;
        items.put(pr, quantity);
    } else {
        items.put(pr, 1);
    }
}

/** 
 * Adds a product having this id into cart and 
 * increases quantity with the specified number. 
 * If quantity is zero, we remove this product from cart.
 */
//This method is called many times after "update cart" button is clicked. 
public void updateItem(Product pr, int quantity){
    if(quantity == 0)items.remove(pr);
    else items.put(pr, quantity);
}

/** Cart iterator */
public Iterator<Product> cartItems(){
    return items.keySet().iterator();
}

/** Returns quantity of this product */
public int getQuantity(Product pr){
    return items.get(pr);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:22:28.350

如果这里抛出异常......

```
 cart.addItem(pr); 
```

...那是因为`cart`是`null`。最可能的解释是这个调用返回`null`。

```
 request.getSession().getAttribute("Cart"); 
```

这会发生，因为会话（还）不包含`"Cart"`条目。您需要做的是测试该调用的结果。如果返回`null`，则需要创建一个新 `ShoppingCart`对象，并使用 `Session.setAttribute(...) 将其添加到会话对象中，以便下一个使用该会话的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:58:56.183

当您重新启动时，我猜您正在重新提交导致空指针的表单，这可能发生在您尝试检索会话或获取 Cart 属性时。当您调用 cart.addItem 时，购物车对象为空。

# java - 如何在 Java servlet 中获取 asp.net 创建的 cookie？

> ID：10562162
> 
> 赞同：0
> 
> 时间：2012-05-12T08:28:56.010
> 
> 标签：java, asp.net, servlets

如何在 Java servlet 中获取 ASP.NET 创建的 cookie？

这是我在 ASP.NET 中的 Cookie

```
emid=11&eud=11&euid=33zU4Yq/p3k=&euseremail=F/zVoXtd4NoAd7yj6Z47gxFVaMCMYha/La6IzlC+xQo=&euserid=33zU4Yq/p3k=&emdn=testing 
```

但是当我尝试在 Servlet 中调用它时，它只打印：**emid** [仅在第一个等于 (=) 符号之前打印起始字符串]

我在 Servlet 中使用以下代码来打印 cookie..

```
 Cookie cookie = null;
        Cookie[] cookies = null;
        cookies = request.getCookies();
        if( cookies != null ){
            out.println("<h2> Found Cookies Name and Value</h2>");
            for (int I = 0; I < cookies.length; I++){
               cookie = cookies[I];
               out.print("Name : " + cookie.getName( ) + ",  ");
               out.print("Value: " + cookie.getValue( )+" \n");
            }
         }else{
             out.println(
               "<h2>No cookies founds</h2>");
         } 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:00:01.110

等号字符是 cookie 值中的保留字符。解决此问题的规范兼容方法是通过用双引号括起来来引用 cookie 值。但是，有些浏览器不能很好地处理这个问题。如果您使用的是 Tomcat，您可以将系统属性设置`-Dorg.apache.tomcat.util.http.ServerCookie.ALLOW_EQUALS_IN_VALUE=true`为允许 cookie 值中的等于。

# python - 具有最广泛可扩展性的 Python web-framework+db？

> ID：10562165
> 
> 赞同：-1
> 
> 时间：2012-05-12T08:29:21.773
> 
> 标签：python, database, api, scalability, web-frameworks

我正在构建一个需要高性能和可扩展性的项目，包括：

*   [基于角色的身份验证](http://en.wikipedia.org/wiki/Role-based_access_control)，使用[API 密钥](http://en.wikipedia.org/wiki/Application_programming_interface_key)许可访问特定用户的数据
*   使用[REST](http://en.wikipedia.org/wiki/REST)（[XML](http://en.wikipedia.org/wiki/XML)、[JSON](http://en.wikipedia.org/wiki/JSON)）、[XMLRPC](http://en.wikipedia.org/wiki/XMLRPC)、[JSONRPC](http://en.wikipedia.org/wiki/JSONRPC)和[SOAP公开的](http://en.wikipedia.org/wiki/SOAP)[API](http://en.wikipedia.org/wiki/Application_programming_interface)
*   “轻松”可配置的[getter 和 setter](http://en.wikipedia.org/wiki/Mutator_method)来创建访问相同数据但在不同[模式中输入/输出的 API](http://en.wikipedia.org/wiki/Database_schema)

表的数量（通常其查询需要连接）的保守估计是：20。

哪种数据库类型——例如：[NoSQL](http://en.wikipedia.org/wiki/NoSQL)或[DBMS——](http://en.wikipedia.org/wiki/Database_management_system) <a href="http://en.wikipedia.org/wiki/Key-value_data_store" rel="nofollow">键值数据存储或[对象关系数据库](http://en.wikipedia.org/wiki/Object-relational_database)——例如：[Redis](http://en.wikipedia.org/wiki/Redis)或[PostgreSQL——](http://en.wikipedia.org/wiki/PostgreSQL)以及[网络框架](http://en.wikipedia.org/wiki/Web_application_framework)——例如[Django](http://en.wikipedia.org/wiki/Django_%28web_framework%29)、[Web2Py](http://www.web2py.com/)或[Flask——](http://flask.pocoo.org/)你会推荐吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T13:02:24.177

您提供的要点描述将充分描述地球上几乎所有具有 API 的数据支持网站。您没有提供足够详细的信息来提供有意义的建议。

您提到的每种技术都有优点和缺点。但是，这些优势和劣势仅与特定问题的背景相关。

选择 RDBMS 而不是 NoSQL 解决方案取决于您打算存储的数据类型以及这些数据之间的关系。这取决于您期望看到的读/写模式。这取决于您期望存储和检索的数据量。这取决于您需要数据存储具有的特定功能集。

Web 框架的选择取决于您正在构建的内容的复杂性，以及围绕这些工具的社区可以提供哪些资源来支持您构建您的站点。这意味着图书馆社区，以及您可以呼吁支持您的开发的开发人员社区。

简而言之，没有灵丹妙药。制定您的要求，然后选择适合这些要求的工具。答案不会总是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:56:43.040

您提到的 Web 框架都具有相同的扩展性，并且具有 20 个表，它们可能具有相似的性能。瓶颈永远是数据库。你提到加入。这意味着您需要一个关系数据库。我不会过度设计它。让它起作用。擦亮它。比让它扩展但增加广泛的缓存。

# c# - 西里尔字母在 C# Web 服务中的编码不正确

> ID：10562166
> 
> 赞同：0
> 
> 时间：2012-05-12T08:29:39.903
> 
> 标签：c#, web-services

> **可能重复：**
> [解析来自 Web 服务的 UTF8 编码数据](https://stackoverflow.com/questions/4671984/parsing-utf8-encoded-data-from-a-web-service)

我编写了将数据插入数据库的小型 Web 服务。

它需要参数“comment”：

```
CreateBuy(DateTime date, String cardNumber, Decimal amount, String comment) 
{
    ...
} 
```

它适用于拉丁字母，但是当我尝试传递 comment = "Продукт1" 的值时，它传递给存储过程值 @comment = '?YN€????N???N‚1' 而不是 'Продукт1 '。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:48:59.460

使用此字符串的本地化参数。为避免此类问题，同时使用英语和俄语最好使用 Utf-8 编码。

# android - Android 选项卡图标

> ID：10562169
> 
> 赞同：0
> 
> 时间：2012-05-12T08:29:58.390
> 
> 标签：android, menu, tabs, icons

我有 2 个问题： 1\. 我有一个包含 3 个选项卡的活动。我想要每个图标上的图标。我有 32x32 的图标。当我将它们放在选项卡上并使用模拟器运行我的应用程序时，图标会变得模糊。但是当我在我的电脑上打开图标时，它们就很好了。2\. 我的选项菜单也有同样的问题。当我将图标放在选项菜单的选项上并使用模拟器运行应用程序时，图标会变得模糊。但是当我在我的电脑上打开图标时，它们就很好了。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:48:20.820

您可能会尝试在布局中增加标签的垂直尺寸，因为当空间不足时图标会变得模糊，Android 必须重新调整它们以适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:50:33.737

在那里你会得到调整大小的图标，你可以上传你的图标，并将它们调整为正确的大小

[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-tab.html#source.type=image&source.space.trim=0&source.space.pad=0.05&name=example](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-tab.html#source.type=image&source.space.trim=0&source.space.pad=0.05&name=example)

而她，你看到了设计线条

[http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_tab.html)

# android - android - 无法更改布局

> ID：10562174
> 
> 赞同：0
> 
> 时间：2012-05-12T08:30:45.180
> 
> 标签：android

当客户端收到“登录成功”这个词时，我做了一个条件，那么第一个布局将更改为第二个布局。

第一个布局由**Client_layoutActivity 类**控制，

第二种布局由**chat_wall 类**控制

我认为这个方法是100%正确的，因为我之前尝试过成功但是当条件满足时（收到“登录成功”），布局仍然没有改变。我正在谷歌上寻找解决方案，但仍然没有得到适当的答案。我使用如下所示的方法：

```
if (line.contentEquals("login success")){

        Toast.makeText(this, "login success", Toast.LENGTH_SHORT).show();

        Intent i = new Intent(Client_layoutActivity.this, chat_wall.class);
        startActivity(i);
        chat_wall cw = new chat_wall();
        cw.send(out, in);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:39:18.013

您需要更详细地阅读android基础知识，如果您需要在两个活动之间切换，请在此应用程序中：然后执行以下操作：

```
Intent i = new Intent(Client_layoutActivity.this, chat_wall.class);
startActivity(i); 
```

如果您想将一些数据传递给其他活动，请使用 Intent 的 putExtra 方法来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:39:21.437

只需检查一次

```
setContentView(R.layout.chat_wall_layout); 
```

在 chat_wall 活动中设置与否。

也试试

```
Intent i = new Intent(this.getApplicationContext(), chat_wall.class); 
```

# xml - 使用 XML 将二进制数据传递到存储过程

> ID：10562178
> 
> 赞同：0
> 
> 时间：2012-05-12T08:31:20.470
> 
> 标签：xml, stored-procedures, silverlight-4.0, binary-data

我正在开发 Silverlight 应用程序。

有没有办法将二进制数据从应用程序传递到存储过程？

我的存储过程只接受一个`XML`参数

我有一个文件浏览控件，通过它我可以选择一个文件

我想将该文件保存在数据库数据`Image`类型列中。

我还必须在 xml 中传递其他参数，例如名称、密码、地址等...

# python - 如何在不使用任何 yahoo api 的情况下使用 Python 对 yahoo 搜索引擎进行基本查询？

> ID：10562180
> 
> 赞同：1
> 
> 时间：2012-05-12T08:31:31.187
> 
> 标签：python

我想使用 Beautiful Soup 和 urllib 从 python 脚本对雅虎搜索引擎进行基本查询。我为谷歌做了同样的事情，这很容易，但雅虎被证明有点困难。雅虎搜索引擎查询的最小示例脚本会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:53:56.130

首先，避免`urllib`- 使用[requests](https://github.com/kennethreitz/requests)代替，这是一个更理智的界面。

然后，返回页面中的所有链接都具有`yschttl`遵循 scheme 的类和 ID `link-1`，`link-2`依此类推。你可以用漂亮的汤：

```
import requests
from bs4 import BeautifulSoup
url = "http://search.yahoo.com/search?p=%s"
query = "python"
r = requests.get(url % query) 
soup = BeautifulSoup(r.text)
soup.find_all(attrs={"class": "yschttl"})

for link in soup.find_all(attrs={"class": "yschttl"}):
    print "%s (%s)" %(link.text, link.get('href')) 
```

给我们

> ```
> Python Programming Language – Official Website (http://www.python.org/)
> Python - Image Results (http://images.search.yahoo.com/search/images?_adv_prop=image&va=python)
> Python (programming language) - Wikipedia, the free encyclopedia (http://en.wikipedia.org/wiki/Python_(programming_language)) 
> ```

和更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-03T23:53:48.357

修改 Manuel 的代码以使其工作：

```
url = "http://api.search.yahoo.com/search?p=%s"
query = 'Python'
r = requests.get(url % query) 
soup = BeautifulSoup(r.text, features = "lxml")
soup.find_all(attrs={"class": "fz-ms lh-1_43x"})

for link in soup.find_all(attrs={"class": "fz-ms lh-1_43x"}):
    print(link.text)
    # print(link.text, link.get('href'))
    print('---------------------------------------------------') 
```

# iphone - 修复对象的潜在泄漏

> ID：10562181
> 
> 赞同：0
> 
> 时间：2012-05-12T08:31:32.180
> 
> 标签：iphone, objective-c, memory-management, addressbook

当我使用构建和分析时，我得到了泄漏（它显示为对象的潜在泄漏）。修复我包括如下

```
if ( aContactfirstName){
  CFRelease(aContactfirstName);
  }
if (aContactLastName){
  CFRelease(aContactLastName);
  } 
```

但是我的应用程序崩溃了。

所以请让我知道它在哪里泄漏并解决它。

```
-(NSString*)getContactNameByPhoneNo:(NSString*)phoneNO{

      NSString *aContactName = phoneNO;
      ABAddressBookRef addressbook = ABAddressBookCreate();
      CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressbook);
      CFIndex numPeople = ABAddressBookGetPersonCount(addressbook);
      for (int i=0; i < numPeople; i++) { 
        ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);
        ABMutableMultiValueRef phonelist = ABRecordCopyValue(person, kABPersonPhoneProperty);
        CFIndex numPhones = ABMultiValueGetCount(phonelist);

        for (int j=0; j < numPhones; j++) {
          CFTypeRef ABphone = ABMultiValueCopyValueAtIndex(phonelist, j);
          NSString *personPhone = (NSString *)ABphone;
            NSLog(@"i am:");
          personPhone =[personPhone stringByReplacingOccurrencesOfString:@"-"withString:@""];
          personPhone=[personPhone stringByReplacingOccurrencesOfString:@")"withString:@""];
          personPhone=[personPhone stringByReplacingOccurrencesOfString:@" "withString:@""];
          personPhone=[personPhone stringByReplacingOccurrencesOfString:@"("withString:@""];
          personPhone=[personPhone stringByReplacingOccurrencesOfString:@"+"withString:@""];
            NSLog(@"xcxcxcxc");

          CFRelease(ABphone);

          if ( [personPhone isEqualToString:phoneNO] ){
            NSString *aContactfirstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) ;
            NSString *aContactLastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty) ;
            if ( aContactLastName != NULL && aContactfirstName != NULL){
              aContactName = [NSString stringWithFormat:@"%@ %@",aContactfirstName,aContactLastName];
            }
            else if(aContactfirstName != NULL){
              aContactName = aContactfirstName;
            }
            else if(aContactLastName != NULL){
              aContactName = aContactLastName;
            }

              if ( aContactfirstName){
                CFRelease(aContactfirstName);
              }
              if (aContactLastName){
                CFRelease(aContactLastName);
              }

            break;
          }
        }
        CFRelease(phonelist);
      }
      CFRelease(allPeople);
      CFRelease(addressbook);
      return aContactName;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:20:07.977

```
if(aContactLastName != NULL){
              aContactName = aContactLastName;//aContactName pointing to aContactLastName
            } 
```

在此，您将 aContactLastName 分配给 aContactName（aContactLastName 和 aContactName 指向相同的内存位置）。之后您将发布aContactLastName。

```
if (aContactLastName){
                CFRelease(aContactLastName);
              } 
```

然后您返回`return aContactName;`（aContactName 已发布）这是错误的。

消除

```
if (aContactLastName){
                CFRelease(aContactLastName);
              } 
```

从您的代码中返回`[aContactName autorelease];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:34:17.247

利用 -

```
NSString *aContactfirstName = [(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty) autorelease];
NSString *aContactLastName = [(NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty) autorelease]; 
```

# google-bigquery - 加载数据时出现意外错误

> ID：10562184
> 
> 赞同：0
> 
> 时间：2012-05-12T08:32:11.337
> 
> 标签：google-bigquery

我收到“意外”错误。我试了几次，仍然无法加载数据。有没有其他方法可以加载数据？

```
gs://log_data/r_mini_raw_20120510.txt.gzto567402616005:myv.may10c
Errors:
Unexpected. Please try again.
Job ID: job_4bde60f1c13743ddabd3be2de9d6b511
Start Time: 1:48pm, 12 May 2012
End Time: 1:51pm, 12 May 2012
Destination Table: 567402616005:myvserv.may10c
Source URI: gs://log_data/r_mini_raw_20120510.txt.gz
Delimiter: ^
Max Bad Records: 30000
Schema:
zoneid: STRING
creativeid: STRING
ip: STRING 
```

**更新**：

我正在使用可以在此处找到的文件：

[http://saraswaticlasses.net/bad.csv.zip](http://saraswaticlasses.net/bad.csv.zip)

```
bq load -F '^' --max_bad_record=30000 mycompany.abc bad.csv  id:STRING,ceid:STRING,ip:STRING,cb:STRING,country:STRING,telco_name:STRING,date_time:STRING,secondary:STRING,mn:STRING,sf:STRING,uuid:STRING,ua:STRING,brand:STRING,model:STRING,os:STRING,osversion:STRING,sh:STRING,sw:STRING,proxy:STRING,ah:STRING,callback:STRING 
```

我收到错误消息“加载操作中的 BigQuery 错误：意外。请重试。”

* * *

相同的文件在 Ubuntu 中有效，而在 CentOS 5.4（最终版）中无效 是否需要检查操作系统编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T21:00:53.330

您上传的文件有一个未终止的报价。您可以删除该行并重试吗？我已经提交了一个内部 bigquery 错误，以便能够更优雅地处理这种情况。

```
$grep '"' bad.csv
3000^0^1.202.218.8^2f1f1491^CN^others^2012-05-02 20:35:00^^^^^"Mozilla/5.0^generic web browser^^^^^^^^ 
```

当我从我的工作站 (Ubuntu) 运行负载时，我会收到有关该行的警告。请注意，如果您使用的是较大的文件，则不会看到此警告，而只会出现故障。

```
$bq show --format=prettyjson  -j job_e1d8636e225a4d5f81becf84019e7484
...
"status": {
  "errors": [
  {
    "location": "Line:29057 / Field:12", 
    "message": "Missing close double quote (\") character: field starts with: <Mozilla/>", 
    "reason": "invalid"
  }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:09:58.563

我怀疑您的输入数据中有超过 64 KB 限制的行或字段。也许重新检查数据的格式，检查它是否正确压缩，如果一切都失败了，请尝试导入未压缩的数据。（一种可能性是整个压缩文件被解释为超出上述限制的单个行/字段。）

要回答您最初的问题，还有其他几种导入数据的方法：您可以使用命令行工具或 Web UI 直接从本地计算机上传，也可以使用原始 API。但是，所有这些机制（包括您使用的 Google Storage 导入）都通过同一个 CSV 解析器汇集，因此它们都可能以相同的方式失败。

# php - 注意：未定义变量：基本 html 表单

> ID：10562186
> 
> 赞同：-2
> 
> 时间：2012-05-12T08:33:15.180
> 
> 标签：php, html

这是我正在编写的代码（它是本教程的一部分[http://www.homeandlearn.co.uk/php/php4p9.html](http://www.homeandlearn.co.uk/php/php4p9.html)）

这很好用

` 一个基本的 HTML 表单

```
<?PHP

if (isset($_POST['Submit1'])) {
$username=$_POST['username'];
if($username=="ken"){
    print("you the man");
    }
    else {
        print("you are not supposed to be here");
        }
    }
    else{
        $username="";
        }

?>

</head>
<body>

<FORM NAME ="form1" METHOD ="post" ACTION = "basicForm.php">

username: <INPUT TYPE = "TEXT" VALUE ="<?PHP print $username;?>"NAME="username">

<INPUT TYPE = "Submit" Name = "Submit1" VALUE = "Login">

</FORM>
</body>
</html>` 
```

但这并不

```
<html>
<head>
<title>A BASIC HTML FORM</title>

<?PHP

if (isset($_POST['Submit1'])) {

$username=$_POST['username'];
$nickname=$_POST['nickname'];
if($username=='ken'and$nickname=='hawk'){
    print("you the man");
    }
    else {
        print("you are not supposed to be here");
        }
    }
    else{
        $username=""and$nickname="";
        }

?>

</head>
<body>

<FORM NAME ="form1" METHOD ="post" ACTION = "testformken.php">

nickname: <input type="text" VALUE ="<?PHP print $nickname;?>" name="nickname" /><br />
username: <input type="text" VALUE ="<?PHP print $username;?>" name="username" />

<INPUT TYPE = "Submit" Name = "Submit1" VALUE = "Login">

</FORM>
</body>
</html> 
```

我收到此通知：未定义变量：C:\wamp\www\testformken.php 中的昵称在第 30 行调用堆栈#TimeMemoryFunctionLocation 10.1800367256{main}()..\testformken.php:0 " name="nickname" />

我搞砸了一些事情，如果我改变

```
nickname: <input type="text" VALUE ="<?PHP print $nickname;?>" name="nickname" /><br />
                      to
nickname: <input type="text" VALUE ="<?PHPprint$nickname;?>" name="nickname" /><br /> 
```

我没有得到未定义的变量，但如果我将值更改为，它也不会打印昵称

```
<?PHP print $username;?> 
```

在此处输入代码我没有得到未定义的变量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T08:37:34.430

您只是总是`$nickname`在您的站点上打印，但您只在输入 if-block ( `if (isset($_POST['Submit1'])) {`) 时定义它。

为避免这种情况，请将您的打印部分更改为：

```
<?php print isset($nickname) ? $nickname : ''; ?> 
```

请注意，我在这里使用了[三元运算符](http://de.php.net/manual/en/language.operators.comparison.php)（if-else 的简写），如果您是初学者，这对您来说可能是新的。

为了避免 XSS 攻击，您也不应该像[Jack 建议的那样在](https://stackoverflow.com/a/10562207/288773)[不逃避现实使用中的情况下输出变量](http://php.net/manual/en/function.htmlspecialchars.php)（对于教程，可以保持简单）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:45:55.407

实际上，当页面第一次加载时，它找不到变量“昵称”，因为您在“if”条件下创建了该变量，并且只能在提交表单时创建。

因此，您必须检查是否创建了变量“昵称”，然后将其值分配给输入。您可以按照以下代码执行此操作：

```
nickname: <input type="text" VALUE ="<?PHP if(isset($nickname)){ print $nickname; } ?>" name="nickname" /> 
```

# vb6 - vb6 创建运行第一个和第二个 exe 文件的第三个 exe

> ID：10562187
> 
> 赞同：1
> 
> 时间：2012-05-12T08:33:24.360
> 
> 标签：vb6, hide, exe

我有 2 个 exe 文件，我想一键同时运行。我想在**Visual Basic 6**中为我创建一个应用程序。如何在我的应用程序中引用 1 和 2 exe 文件？（第三个 exe 文件），是否可以仅在第三个（我的应用程序）运行或其他解决方案（例如隐藏两个文件并仅使第三个可见）时才运行第一个和第二个 exe 文件？

注意：我无法访问第一个和第二个文件源

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T08:46:04.273

使用以下格式的 Shell 函数：

```
RetVal = Shell([Pathname of EXE],[WindowStyle As vbAppWinStyle = vbMinimisedFocus]) 
```

示例代码

```
Private Sub cmdExec_Click() ' cmdExec is the name of the command button on any form.
   Dim RetVal
   RetVal = Shell("C:\WINDOWS\System32\calc.exe", 1)    ' Run Calculator.
End Sub 
```

使用 ShowWindow 函数隐藏窗口。

您可以使用 FindWindow 函数来检查其他应用程序是否正在运行。

[参考它找到窗口](http://support.microsoft.com/kb/72918)

[请参阅 API 指南以查找 FindWindow、ShowWindow 和更多 API 的运行示例](http://allapi.mentalis.org/agnet/apiguide.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:38:55.433

要打开第一个和第二个可执行文件，您可以使用该`Shell`功能。

```
Shell("C:\YourPrograms\Program.exe", vbNormalFocus) 
```

如果您只想在可执行文件 3 正在运行时打开这些可执行文件，则必须在应用程序 1 和 2 中执行一些逻辑来检查可执行文件 3 是否正在处理中。

# python - Selenium 更改 firefox 浏览器语言 python mac

> ID：10562189
> 
> 赞同：0
> 
> 时间：2012-05-12T08:33:51.277
> 
> 标签：python, firefox, selenium

我花了 3 个小时试图找到解决这个问题的方法，但我离答案还很远，我觉得我必须要问。（我发现了类似的帖子——下面解释了为什么尽管找到了这些帖子我还是要问）

我正在编写一个程序，将几个搜索词输入谷歌 - 并检索我页面的排名。我想知道我在几个不同国家的 SERP 中的排名。我已经解决了IP地址的问题。但现在我看到谷歌在给我一个 SERP 时考虑了我浏览器的语言。为了更接近我的页面在一个国家/地区的真实排名（我说更接近，因为我还看到 SERP 取决于搜索历史），我必须使用具有我所在国家/地区本地语言的网络浏览器有兴趣。

手动更改 firefox 中的语言很困难 - 事实上，您必须安装几个不同的语言版本（我还阅读了有关安装语言包的信息 - 但不确定这是否与 firefox 12 有关）。我不知道如何让 selenium 选择正确的 Firefox 版本。

我很难理解需要做什么：我是否必须指定启动时假设使用的 firefox 安装/版本 selenium`web driver.firefox().`或者是否可以通过更改 firefox 配置文件来确定浏览器语言。

我花了一些时间查看配置文件部分 - 并找到了部分[证据](https://stackoverflow.com/questions/9822717/how-to-change-the-language-of-a-webdriver)（原始帖子），尽管我在配置文件文件中找不到任何对语言的引用。

同[一篇文章](https://stackoverflow.com/questions/9822717/how-to-change-the-language-of-a-webdriver)中的答案似乎已经解决了这个问题——但我不懂语言，而且我无法理解实际在做什么。

我知道 firefox 有一个[附加组件可以](https://addons.mozilla.org/en-US/firefox/addon/quick-locale-switcher/)在语言版本之间进行更改（您必须首先安装所需的不同语言版本的 firefox） - 鉴于设置选项提到更改“general.useragent.local 首选项”我是认为这是可以更改的配置文件设置-但是当您更改语言时，插件需要重新启动浏览器-所以..

我在配置文件设置中找不到关于 general.useragent.local 的任何信息。

任何给我指出正确方向的人都会让我开心！

编辑：忘了提-我只知道python-所以这就是我在标题中写python的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:12:04.407

好的，我不得不同意，也许这不是解决这个问题的最佳方法，但会回答你所需要的

```
from selenium import webdriver
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary

binary = FirefoxBinary('path/to/binary')
profile = webdriver.FirefoxProfile()
profile.add_extension('path/to/xpi') #XPI needs to be on disk and not downloaded from AMO
profile.set_preference('general.useragent.local','<enter your value')

driver = webdriver.Firefox(firefox_binary=binary, firefox_profile=profile)
# Carry on with what you want 
```

pydocs 可[在此处获得](http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html)

# java - 通知类不能正常工作

> ID：10562190
> 
> 赞同：0
> 
> 时间：2012-05-12T08:33:55.147
> 
> 标签：java, android

我创建了一个简单的服务，现在我正在为此发出通知。我正在写一个通知类。编写完所有代码后，三行带有红色下划线，第一行`getSystemService(ns);`是第 14 行的这个函数，第二行是`getApplicationContext();`第 20 行的这个函数，第三行再次与第一个函数相同，但在第 31 行的`cancelNotification()`函数中。这是我的完整代码

```
package com.zafar.batterynotify;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;

public class Notify {
    private static final int NOTIFICATION_ID = 1;

    public void initNotification() {
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = "Service Started";
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);
        notification.flags = Notification.FLAG_ONGOING_EVENT;
        Context context = getApplicationContext();
        CharSequence contentTitle = "Ongoing service";
        CharSequence contentText = "This is service is ongoing";
        Intent notificationIntent = new Intent(context, BatteryNotify.class);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        mNotificationManager.notify(NOTIFICATION_ID, notification);
    }

    public void cancelNotification() {
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        mNotificationManager.cancel(NOTIFICATION_ID);
    }
} 
```

**编辑**更新的代码

我的服务等级

```
package com.zafar.batterynotify;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class BatteryService extends Service {
Notify notification = new Notify();
String ns = Context.NOTIFICATION_SERVICE;
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    notification.initNotification(Context.NOTIFICATION_SERVICE);
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

public void onDestroy() {
    super.onDestroy();
    notification.cancelNotification(Context.NOTIFICATION_SERVICE);
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}

} 
```

通知班级

```
package com.zafar.batterynotify;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;

public class Notify {
private static final int NOTIFICATION_ID = 1;

public void initNotification(Context actContext) {
    //String ns = Context.NOTIFICATION_SERVICE;
    //Context context = actContext.getApplicationContext();
    NotificationManager mNotificationManager = actContext.getSystemService(ns);
    int icon = R.drawable.ic_launcher;
    CharSequence tickerText = "Service Started";
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon, tickerText, when);
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    Context context = actContext.getApplicationContext();
    CharSequence contentTitle = "Ongoing service";
    CharSequence contentText = "This is service is ongoing";
    Intent notificationIntent = new Intent(context, BatteryNotify.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    mNotificationManager.notify(NOTIFICATION_ID, notification);
}

public void cancelNotification(Context actContext) {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = actContext.getSystemService(ns);
    mNotificationManager.cancel(NOTIFICATION_ID);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:38:46.600

将您的上下文从调用 Activity 或服务传递给您的类并使用它：

```
 public void initNotification(Context actContext) {
    //...
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = actContext.getSystemService(ns);
    //...
    }

    public void cancelNotification(Context actContext) {
        //...
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = actContext.getSystemService(ns);
        //...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:45:38.107

不要尝试使用`getApplicationContext()`，而是创建`MyApplication`从 继承的类`Application`，然后在该类中执行以下操作：

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
        .........
    }

    public static Context getContext() {
        return instance;
    } 
```

之后，`MyApplication.getContext()`如果您需要上下文并且没有闲置，您可以在任何地方使用`Activity`。

# drupal-7 - 如何在 Drupal 7 中使用 FreeTTS

> ID：10562197
> 
> 赞同：0
> 
> 时间：2012-05-12T08:35:31.067
> 
> 标签：drupal-7, freetts

我想在 Drupal 7 中使用 FreeTTS。这可能吗？有没有可用的教程？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T22:38:21.310

[http://drupal.org/project/freetts](http://drupal.org/project/freetts)仅适用于 D6 且不稳定，但我认为这是一个很好的起点。

# android - 无法从 FTP 服务器下载图像

> ID：10562201
> 
> 赞同：0
> 
> 时间：2012-05-12T08:37:00.880
> 
> 标签：android, ftp

我遇到了这个问题，我认为这里缺少一些东西。我的项目需要访问 FTP 服务器来下载一些特定的图像，但是我使用的代码似乎不起作用，请注意，我使用相同的代码来下载一些文本文件，它工作得很好！！！！

这是我的代码：

***注意：我正在使用 Apache commons ftpclient ..

```
try {
         File Imgfile = new File(Environment.getExternalStorageDirectory(), "img.jpg");
        BufferedOutputStream buffIn = new BufferedOutputStream(new FileOutputStream(Imgfile)); // local location
         con.retrieveFile("/public_html/cam.jpg", buffIn);
         buffIn.close();
    } catch (IOException e) {
         Toast customToast = new Toast(getBaseContext());

           customToast = Toast.makeText(getBaseContext(), "Cannot Downlaod the image" , Toast.LENGTH_SHORT);
           customToast.setGravity(Gravity.TOP|Gravity.LEFT, 150, 450);
           customToast.show();
    } 
```

我也试过这个：

```
InputStream Fstream = null;
    try {
          Fstream = con.retrieveFileStream("/public_html/out.jpg");  
          bitmap = BitmapFactory.decodeStream(Fstream);
                      FileOutputStream stream = new FileOutputStream(mFilePath);
                       bitmap.compress(CompressFormat.JPEG, 100, stream);
                  stream.flush();
                   stream.close();

          buffIn.flush();
          buffIn.close(); 
         Fstream.close();
    } catch (IOException e) {
         Toast customToast = new Toast(getBaseContext());

           customToast = Toast.makeText(getBaseContext(), "Cannot Downlaod the image" , Toast.LENGTH_SHORT);
           customToast.setGravity(Gravity.TOP|Gravity.LEFT, 150, 450);
           customToast.show();
    } 
```

我总是收到这条 try/catch 消息“无法下载图像”，

请告诉我出了什么问题，或者指出我正确的方向。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:43:45.803

[看这个](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)完整的例子如何下载和显示图像....

```
void downloadBitmapImage()
{
} 
```

# android - 如何显示不同的内容？

> ID：10562203
> 
> 赞同：0
> 
> 时间：2012-05-12T08:37:30.403
> 
> 标签：android, settings

我创建了两个 Android 应用程序（音板）。一个版本是正常的，另一个是审查的。现在我只想将它们压缩到一个应用程序中。现在，如何在设置菜单中设置选项，显示或不显示被审查的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:08:03.923

您可以将带有[CheckBoxPreference的](http://developer.android.com/reference/android/preference/CheckBoxPreference.html)[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)添加到您的应用程序（不要忘记使用 Manifest 来声明它们）。

[API Demos](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/preference/index.html)中有一个很好的示例。

完成此操作后，您可以轻松地从[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)检查布尔值- 方法如下：[数据存储指南](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

# sorting - 用另一个队列对队列进行排序

> ID：10562205
> 
> 赞同：0
> 
> 时间：2012-05-12T08:37:39.953
> 
> 标签：sorting, queue

如何仅使用另一个大小为 N 的队列和有限数量的变量对大小为 N 的队列进行排序？

天真的实现 - 找到队列的最小值并将其推送到空队列，然后找到新的最小值并将其推送等是 O(n^2)。有没有更有效的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T05:57:14.470

我不认为天真的实施会奏效。这是一个队列，所以如果最小的元素不在队列的末尾，你就不能删除它。

我能想到的唯一方法是：始终保持第二个队列排序。1\. 从 q1 中删除元素。2\. 如果此元素>= q2 的最后一个元素，则将其插入到 q2 中。（这样 q2 仍然排序）。3\. 否则，将其插回 q1。继续重复上述步骤，直到 q1 为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:01:45.403

我的算法：

```
 let the Q size = n, 
 1 save = getRearValue(1stQ)
 2 pop the element from 1st Q and insert it into 2nd Q.
 3 if getFrontValue(1stQ) > getRearValue(2ndQ)  
 4        then goto step 2.
 5 else 
 6        pop the element from 1st Q and insert back into the same Q (1st Q). 
 7        if (save != getRearValue(1stQ)) goto step 3.
 8 if (1st Q not sorted OR getFrontValue(1stQ) > getFrontValue(2ndQ))
 9          then 
 10          pop all elements of 2nd Q and insert into 1st Q (One by one).
 11          goto step 1.
 12 else
 13     pop all elements of 2nd Q and insert into 1st Q (One by one).
 14     return 1stQ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T15:33:22.643

这是我认为可能有效的方法：-

该算法使用递归对队列进行排序。

假设我们有一个函数 copy_from 可以从一个队列复制到另一个队列，如下所示：-

```
void copy_from (ArrayQueue&Q_from,ArrayQueue& Q_to){

     while(!Q_from.empty()){

        int t= Q_from.front();
        Q_to.enqueue(t);
        Q_from.dequeue();
     }

} 
```

主要排序功能如图：-

```
 void sort(ArrayQueue &Q, int element, ArrayQueue&Q2){

if(Q.size()==1){

    if(Q.front()>element){

         int front = Q.front();
         Q.dequeue();
         Q.enqueue(element);
         Q.enqueue(front);      
    }
    else{
        Q.enqueue(element);
    }

}
else{

 int front = Q.front();
 Q.dequeue();
 sort(Q,front); // sort the remaining queue.

 int sorted_front = Q.front(); //get front element of sorted queue
 if(element<sorted_front){

    Q2.enqueue(element);
    copy_from(Q,Q2);
    copy_from(Q2,Q);     

 }
 else{
    // dequeue all elements from the queue which are lesser than element and put it into new queue.
    // Then enqueue the new element
    // Then enqueue whatevers bigger than element into the queue.

      Q2.enqueue(sorted_front);
      Q.dequeue();

      while(!Q.empty()&&Q.front()<element){
         Q2.enqueue(Q.front());
         Q.dequeue();
      }

      Q2.enqueue(element);
      copy_from(Q,Q2);
      copy_from(Q2,Q);

 }

}
} 
```

当我们最初调用排序函数时，我们可以这样调用它：-

```
Queue Q, Q2;

 int front = Q.front();
 Q.dequeue();
 sort(Q,front,Q2); 
```

如果我们输入为 6->4->9>2->1，则结果将是 9->6->4->2->1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-04T12:06:25.643

这是我从头顶想到的一个简单逻辑。最坏情况的运行时间是 O(N^2)，而理想情况下最好的情况是 O(N)。我认为可以通过即兴逻辑进一步降低复杂性。

语法是 Javascript，但很好的注释是不言自明的。

我希望这有帮助。

```
// SORT A QUEUE USING ANOTHER QUEUE
function sortQueueUsingQueue(uq) {
    // instantiate required variables
    var sq = new Queue();
    var t = null, last = null;
    // copy the items to a temp queue
    // so as not to destroy the original queue
    var tq = new Queue(uq);
    // loop until input is not empty
    while(!tq.isEmpty()) {
        t = tq.dequeue();
        if (last && last <= t) {
            // new element will be at the end of the queue, and we don't have to
            // process any further - short-circuit scenario
            // this is the best case scenario, constant time operation per new item
            sq.enqueue(t);
            // also keep track of the last item in the queue,
            // which in this case is the new item
            last = t;
        } else {
            // other scenario: linear time operation per new item
            // new element will be somewhere in the middle (or beginning) so,
            // take elements from the beginning which are less or equal to new item,
            // and put them at the back
            while(!sq.isEmpty() && sq.peek() <= t) {
                sq.enqueue(sq.dequeue());
            }
            // when that is done, now put the new element into the queue,
            // i.e the insertion into the proper place
            sq.enqueue(t);
            // following which, shift the rest elements to the back of the queue,
            // to reconstruct the sorted order,
            // thus always keeping the second queue sorted per insertion
            while(sq.peek() > t) {
                // meanwhile, also keep a track of the last (highest) item in the queue
                // so that we may perform a short-circuit if permitted
                last = sq.dequeue();
                sq.enqueue(last);
            }
        }

    }
    return sq;
} 
```

您可以在此处将整个工作代码视为 github**要点**：[https ://gist.github.com/abhishekcghosh/049b50b22e92fefc5124](https://gist.github.com/abhishekcghosh/049b50b22e92fefc5124)

# php - PHP : 为什么我们使用 " if (($fname != '.') && ($fname != '..'))

> ID：10562211
> 
> 赞同：0
> 
> 时间：2012-05-12T08:39:12.433
> 
> 标签：php

为什么我们在此代码中使用“ if (($fname != '.') && ($fname != '..')) ”...用于查找文件格式是 Windows 还是 linux 或 mac ？

```
if (is_dir( "{$dir}/{$fname}" )) {
           if (($fname != '.') && ($fname != '..')) {
                echo "<u>Deleting Files in the Directory</u>: {$dir}/{$fname} <br />";
          deleteDir("$dir/$fname");
             }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T08:41:12.350

`.`是当前目录，并且`..`是目录列表中的父目录，因此您在处理目录列表时要检查以避免这些目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:41:40.233

“。” 指当前目录，“..”指父目录。

所以删除`A/.`将删除`A/`，删除将删除,`A/B/..`的父级。`B/``A/`

# c++ - 手动读取 Mysql DB 文件

> ID：10562212
> 
> 赞同：1
> 
> 时间：2012-05-12T08:39:15.723
> 
> 标签：c++, mysql, file

我想知道是否有一种方法可以使用文件流之类的东西手动读取 mysql 数据库文件（*.MYI、*.MYD、*.frm）？我可以阅读这些文件，但内容没有意义，我不知道这里的内容结构。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:42:51.277

您可以使用[它](http://forge.mysql.com/wiki/MySQL_Internals_File_Formats)来创建一个解析器来帮助您读取 file.s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:43:19.047

## 是的，您可以，但是重新发明轮子并不是很聪明...

参见例如[http://forge.mysql.com/wiki/MySQL_Internals_MyISAM](http://forge.mysql.com/wiki/MySQL_Internals_MyISAM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:11:19.953

还有另一种处理“原始”MyISAM 表的方法：使用“[嵌入式 MySQL 服务器库](http://dev.mysql.com/doc/refman/5.0/en/libmysqld.html)”。为什么？因为 MySQL 有一个嵌入式服务器库**libmysqld**，它以可以链接（嵌入）到应用程序中的形式包含服务器。

顺便说一句，dba.stackexchange.com 上有一个[非常相似的问题](https://dba.stackexchange.com/q/9900)。你应该阅读它。

# python - 带括号和方括号的 Vim 缩进级别

> ID：10562220
> 
> 赞同：8
> 
> 时间：2012-05-12T08:40:58.487
> 
> 标签：python, vim

当我使用重新缩进文件时，`gg=G`我注意到右括号或括号的缩进与开头的行不匹配。例如（使用 >... 显示的前导选项卡）

```
if settings.DEBUG:
>...urlpatterns += patterns('',
>...>...url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
>...>...>...'document_root': settings.MEDIA_ROOT,
>...>...}),
>...) 
```

我想修复包含此文件的缩进。对于 python，我`softtabstop`设置为 4，`shiftwidth`设置为 4 并`expandtab`设置。当我这样做`gg=G`时，结果如下：

```
if settings.DEBUG:
    urlpatterns += patterns('',
            url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
                'document_root': settings.MEDIA_ROOT,
                }),
            ) 
```

我这里有两个问题。首先是右括号与其左括号的空白级别不匹配，它们缩进到与括号内的代码相同的级别。这`(`在第二行中的 和它`)`在最后一行中的匹配以及`{` 第三行中的 和它`}`在第五行中的匹配中都可以看到。我希望它使右括号与它们的左括号匹配在同一级别。

我的第二个问题是左括号后的缩进是新块的缩进的两倍，甚至是开括号后的缩进`{`。我想这可能是 Python 文件类型缩进的一部分，但我想知道如何阻止它，所以所有缩进都是 4 宽。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T08:56:42.963

在 vim 中使用[这个](http://www.vim.org/scripts/script.php?script_id=974)缩进脚本来缩进你的 python 文件。它执行[PEP-0008](http://www.python.org/dev/peps/pep-0008/)中推荐的操作。您发布的代码与脚本缩进给了我这个：

```
if settings.DEBUG:
  urlpatterns += patterns('',
                          url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
                            'document_root': settings.MEDIA_ROOT,
                          }),
                         ) 
```

针对您的第二个问题的建议是：

> 续行应该使用 Python 的隐式行在括号、方括号和大括号内连接，或者使用悬挂缩进垂直对齐被包裹的元素。使用悬挂缩进时，应考虑以下事项；第一行不应该有任何参数，并且应该使用进一步的缩进来清楚地将自己区分为续行。

所以缩进脚本正在做正确的事情。

此外，如果您在第一行没有任何参数，建议您使用所需的缩进类型。所以重新排列代码并使用缩进脚本给出：

```
if settings.DEBUG:
  urlpatterns += patterns(
    '',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
      'document_root': settings.MEDIA_ROOT,
    }),               
  ) 
```

# java - 在 Eclipse for Java 中安装 Saxon jar？

> ID：10562223
> 
> 赞同：2
> 
> 时间：2012-05-12T08:41:11.683
> 
> 标签：java, jar, saxon

我已经从[这个](http://www.java2s.com/Code/Jar/s/Downloadsaxon653jar.htm)`Saxon`站点下载了jar ，我正在尝试激活这个文件，但是它不起作用。我已经把它放在图书馆里并重新打开 。这仍然没有多大帮助。`jar``Eclipse``plugins``Eclipse`

我有很多进口商品，例如：

```
package net.sf.saxon.sxpath;
import net.sf.saxon.Configuration;
import net.sf.saxon.event.Builder;
import net.sf.saxon.event.Stripper;
import net.sf.saxon.expr.Expression;
import net.sf.saxon.expr.ExpressionTool;
import net.sf.saxon.instruct.SlotManager;
import net.sf.saxon.om.AllElementStripper;
import net.sf.saxon.om.NamePool;
import net.sf.saxon.om.NamespaceResolver;
import net.sf.saxon.om.NodeInfo;
import net.sf.saxon.trans.IndependentContext;
import net.sf.saxon.trans.XPathException;
import net.sf.saxon.type.Type; 
```

从我在网上看到的情况来看，这些进口需要`saxon.jar` . 请解释我如何附上这个罐子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:00:35.320

在项目中复制您需要的 jar（例如通过拖放操作），以便它显示在 Eclipse 中。

然后右键单击它并将其添加到构建路径。

您现在可以在项目中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T19:33:54.573

您链接到的站点是 Saxon 6.5.3，它非常旧；它是 Saxon 的 XSLT 1.0 版本，它使用与 Saxon 的当前版本 9.4 完全不同的包名称。

您的应用程序似乎在 Saxon 中使用了一些非常低级的接口，因此很可能它是为与特定版本的 Saxon 一起使用而编写的 - 找出哪个是个好主意。

# c# - 将对象列表转换为字符串和泛型列表

> ID：10562226
> 
> 赞同：1
> 
> 时间：2012-05-12T08:42:00.920
> 
> 标签：c#, list, generics

以下方案可以很好地处理字符串/原语。但是在处理列表时，它会在 getObj() 中给出类型转换错误。使用的类型是动态的，需要这种通用使用。有没有更好的方法来实现它？

```
public static Object obj;
    static public T getObj<T>()
    {
        return (T)obj;
    }
    private static string getStr()
    {
        return "some string";
    }
    private static List<Object> getList()
    {
        List<Object> res = new List<object>();
        Object o = "str1";
        res.Add(o);

        o = "str2";
        res.Add(o);
        return res;
    }

    public static void Main()
    {
        obj = getStr();
        string s = getObj<string>();

        obj = getList();
        List<string> slist = getObj<List<string>>();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T08:45:59.747

您正在尝试将 a`List<Object>`转换为 a `List<String>`。即使列表的所有内容都是 of `String`， the`List`仍然是 a `List<Object>`，所以你不能做这样的直接转换。

如果你真的想这样做，你可以改用这个：

```
List<Object> objList = { ... }; // all strings
List<String> strList = objList.Cast<String>().ToList(); 
```

您不能从`List<Object>`to进行强制转换的一个原因`List<String>`是因为所有字符串都是对象，但并非所有对象都是字符串；如果您将 a`List<String>`转换为`List<object>`然后尝试向其添加`object`（不是 a `string`），则行为将是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T10:05:07.147

希望这对你有帮助！！！

```
 public List<Object> lisObject() {
        List<Object> listProduct = new ArrayList<Object>();
        try {
            con.setAutoCommit(false);
            callableStatement = con.prepareCall("call listType()");
            rs = callableStatement.executeQuery();
            while(rs.next()){
                pType = new ProductType();
                pType.setPtypeId(rs.getInt(1));
                pType.setPName(rs.getString(2));
                pType.setDesc(rs.getString(3));
                pType.setCatMaster(new CatMaster(rs.getInt(4), rs.getString(5)));
                listProduct.add(pType);
            }
            con.commit();
        } catch (Exception e) {
            System.out.println("Failed to Fetching List of Type Object:"+e);
        }finally{

        }
        return listProduct;
    }

%%%%%%%%%%%%%%%%%
Fetching Data
%%%%%%%%%%%%%%%%
List<Object> listpro  =(List<Object>)dao.lisObject();

int i=0;enter code here
for(Iterator<Object> itr = listpro.iterator();itr.hasNext();){                          
ProductType p = (ProductType)itr.next(); 
```

`ProductType`是java bean

# javascript - 如何在 MobileSafari 中接收复制的图像？

> ID：10562230
> 
> 赞同：12
> 
> 时间：2012-05-12T08:43:07.300
> 
> 标签：javascript, iphone, ipad, web-applications, clipboard

我正在构建一个 iOS 网站，并且正在尝试使用 JavaScript 获取最近复制的图像。

当您将手指放在网站中的照片上时，会弹出一个菜单，其中包含“**保存图像”**或**“复制**”选项。当您稍后按复制并将其粘贴到文本字段中时，您可以通过以下方式获取 URL：

```
pasteEvent.clipboardData.getData('text/uri-list'); 
```

当您在相机胶卷、facebook 应用程序中复制图像时，或者通过选择并转到相同的文本字段（或 textarea）时，粘贴选项不可用，但是当转到 Mail.application 时，粘贴选项可用并且过去的图像。那么有没有人知道如何在 iPad 上获取复制照片的 URL 或二进制数据？

苹果文档：

[http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/SafariJSProgTopics/Tasks/CopyAndPaste.html](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/SafariJSProgTopics/Tasks/CopyAndPaste.html)

例子：

[http://codebits.glennjones.net/editing/getclipboarddata.htm](http://codebits.glennjones.net/editing/getclipboarddata.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:28:07.590

网站无法做到这一点，因为 javascript 无法直接访问任何本机元素。

*但是，如果*您在本机应用程序中托管 webview，a-la phonegap ...那么您可以通过处理本机代码中的粘贴，然后使其可用于 webview 来做一些事情。

# android - 从服务启动透明活动时的问题

> ID：10562239
> 
> 赞同：0
> 
> 时间：2012-05-12T08:44:27.503
> 
> 标签：android, android-service, transparent, android-alertdialog

当用户按下通知时，我尝试从服务启动透明的全屏活动。问题不在于自己启动活动，这很完美。我的问题是当前活动的应用程序冻结，例如 youtube 停止播放视频。我希望 youtube 继续播放视频。我的代码建立在此处描述的解决方案之上：[如何在 Android 上创建透明的活动？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android). 我还阅读了有关使用 SYSTEM_ALERT_WINDOW 标志和 Windowmanager 从服务启动警报对话框的内容：[如何显示全屏 TYPE_SYSTEM_ALERT 窗口？](https://stackoverflow.com/questions/6371432/how-to-display-a-fullscreen-type-system-alert-window). 但是当用户按下通知时我该怎么做呢？

我见过我描述的类似应用程序，所以我知道有可能解决；）

此致，

亨里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T04:04:39.417

> 我的问题是当前活动的应用程序冻结，例如 youtube 停止播放视频

仅仅因为您的新活动是透明的，并不意味着您之前的活动将继续在您下方运行。当堆栈上的一个活动被另一个活动替换时，会在该活动中调用 onPause()。

如果你想要一个透明的覆盖，只需使用一个视图。您不需要 Activity 来获得视图。

> 我还阅读了有关使用 SYSTEM_ALERT_WINDOW 标志和 Windowmanager 从服务启动警报对话框的内容：如何显示全屏 TYPE_SYSTEM_ALERT 窗口？. 但是当用户按下通知时我该怎么做呢？

您可以在服务的系统警报窗口中绘制视图。

# eclipse - Eclipse 安装软件卡在 0%

> ID：10562248
> 
> 赞同：1
> 
> 时间：2012-05-12T08:46:00.277
> 
> 标签：eclipse, eclipse-plugin

我刚刚安装了 Goclipse 插件

[http://goclipse.googlecode.com/svn/trunk/goclipse-update-site/](http://goclipse.googlecode.com/svn/trunk/goclipse-update-site/)

我意识到这不是我需要的版本，所以我卸载了它，并弹出一个需要重新启动的窗口，我点击“立即重新启动”

但是eclipse就这样消失了，很久没有再出现，所以我手动启动了它，不久之后又出现了另一个eclipse实例。

现在，我无法安装新插件，它会永远停留在“安装软件 - 0%”！（我也不能取消安装......）

![安装软件卡在 0%](../Images/8d6d15dcdac59974335127f72dbb6064.png)

我能做些什么？拜托，我真的不想重新安装！>_<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:51:02.757

Ctrl-Alt-Delete 并杀死 Java 和 Eclipse 的所有实例。重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T10:40:26.513

我已经发生了这种情况*，直到*它显示一些更新可用。Eclipse 似乎一次只允许其中一个进程。强制它首先查找并安装（或拒绝）更新，然后尝试安装您的新软件。

# javascript - Jquery切换不立即响应

> ID：10562252
> 
> 赞同：0
> 
> 时间：2012-05-12T08:46:41.757
> 
> 标签：javascript, jquery, jquery-ui

我在 jquery 中有一个切换，你可以在这里看到它：http: [//jsfiddle.net/Rua4j/](http://jsfiddle.net/Rua4j/)

我想当我单击标题或切换按钮时，显示隐藏的内容。默认情况下，内容通过切换关闭隐藏。在我只有当我单击按钮时，按钮才会更改为 + 或 - 取决于显示或隐藏。单击标题时如何更改按钮？

这是代码：

```
<!DOCTYPE html PUBLIC ">
<head>
<title>Faqs Toggle</title>
<style>
.container{
width:940px;
}
h3{
color:rgb(168,168,168);
}
p{
font-size:16px;
line-height:22px;
}
mark{
background-color:orange;
font-weight:bold;
    -webkit-border-radius:3px;
       -moz-border-radius:3px;
            border-radius:3px;
}
.lead{
font-size:18px;
line-height:24px;
font-weight:normal;
color:rgb(104,104,104);
}
#togglenav{
font-color:green;
}
.green{
cursor:pointer;
color:green;
}
span.green{
font-weight:bold;
font-style:italic;
}
#toggleContainer{
width:66%;
border-bottom:1px solid green;
}
</style>
<script src="http://code.jquery.com/jquery-1.7rc2.js"></script>
<script type='text/javascript'>
$(function(){
if($('#toggleContent').hasClass('toggle-off'))
{
$('#toggleContent').hide("slow");
}
else
{
$('#toggleContent').show("slow");
}
})

$(function(){
  $('.green').click(function() {
  if($(this).val() == "+") {
 $('#toggleContent').show("slow");
  $(this).val("-");
  }
  else {
   $('#toggleContent').hide("slow");
  $(this).val("+");
  }
});
});
</script>
</head>

<body>
<div class="container">
<h3>Faq Toggles</h3>

<div class="tgl" id="toggleContainer">
<div id="togglenav">
<input type='button' value='+' class="green" />
<span class="green">Vestibulum massa risus, aliquam sit amet dapibus sit amet</span><br/>
</div>
<div class="toggle-off" id="toggleContent">
<p class="lead">Vestibulum massa risus, aliquam sit amet dapibus sit amet, aliquet sed lectus. Morbi ultricies, nibh a placerat convallis, erat magna posuere nisi, sit amet iaculis dui velit at lorem.</p>
<p>
Sed felis purus, faucibus ut dapibus ac, ullamcorper at lorem. In ut eros congue lectus interdum fringilla vel commodo nisi. Maecenas magna quam, dapibus at malesuada nec, vestibulum ut tortor. Quisque blandit lectus a quam suscipit non fermentum erat consectetur. Sed iaculis lacinia augue, nec scelerisque metus <mark>placerat</mark> vel.
</p>
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:56:33.717

单击标题时必须调用函数：

```
 $(function(){
    $('#togglenav').click(function(){

        if($('#toggleContent').is(':visible')){
            $('#toggleContent').hide("slow");
            $('.green').val("+");
        } else {
            $('#toggleContent').show("slow");
            $('.green').val("-");
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:57:14.653

这可能是因为您的 .hide() 和 .show() 函数尚未完成动画。您检查您的元素是否为“动画”并像这样清除动画队列：

```
if ($("#toggleContent").is(":animated")) {
    $("#toggleContent").stop(true, true);
    $("#toggleContent").show("fast");
} 
```

您可以清除一条线 - 如果您更喜欢：

```
$("#toggleContent").stop(true, true).show("fast"); 
```

这也适用于 .fadeIn()、.fadeOut()、.animated() 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T08:58:54.950

有修改后的版本似乎按预期工作

[http://jsfiddle.net/Rua4j/3/](http://jsfiddle.net/Rua4j/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T08:59:53.573

我会改变css所以它已经被隐藏了，然后jquery将从那里切换......

添加显示：无；到css中的div#togglecontent

然后更改 jquery 以完全摆脱第一个功能

这是代码。

```
<!DOCTYPE html PUBLIC ">
<head>
<title>Faqs Toggle</title>
<style>
.container{
width:940px;
}
h3{
color:rgb(168,168,168);
}
p{
font-size:16px;
line-height:22px;
}
mark{
background-color:orange;
font-weight:bold;
    -webkit-border-radius:3px;
       -moz-border-radius:3px;
               border-radius:3px;
}
.lead{
font-size:18px;
line-height:24px;
font-weight:normal;
color:rgb(104,104,104);
}
#togglenav{
font-color:green;
}
.green{
cursor:pointer;
color:green;
}
span.green{
font-weight:bold;
font-style:italic;
}
#toggleContainer{
width:66%;
border-bottom:1px solid green;
}
    #toggleContent{
    display:none;
    }
</style>
<script src="http://code.jquery.com/jquery-1.7rc2.js"></script>
<script type='text/javascript'>
$(function(){
  $('#togglenav').click(function() {
    if($('.green').val() == "+") {
      $('#toggleContent').show("slow");
      $('.green').val("-");
    }else {
      $('#toggleContent').hide("slow");
      $('.green').val("+");
    }
  });
});
</script>
</head>

<body>
<div class="container">
<h3>Faq Toggles</h3>

<div class="tgl" id="toggleContainer">
<div id="togglenav">
<input type='button' value='+' class="green" />
<span class="green">Vestibulum massa risus, aliquam sit amet dapibus sit amet</span><br/>
</div>
<div id="toggleContent">
<p class="lead">Vestibulum massa risus, aliquam sit amet dapibus sit amet, aliquet sed lectus. Morbi ultricies, nibh a placerat convallis, erat magna posuere nisi, sit amet iaculis dui velit at lorem.</p>
<p>
Sed felis purus, faucibus ut dapibus ac, ullamcorper at lorem. In ut eros congue lectus interdum fringilla vel commodo nisi. Maecenas magna quam, dapibus at malesuada nec, vestibulum ut tortor. Quisque blandit lectus a quam suscipit non fermentum erat consectetur. Sed iaculis lacinia augue, nec scelerisque metus <mark>placerat</mark> vel.
</p>
</div>
</div>
</div>
</body>
</html>

​ 
```

# java - 如何使用itext在java中的PDF页脚中添加表格

> ID：10562257
> 
> 赞同：1
> 
> 时间：2012-05-12T08:47:58.903
> 
> 标签：java, itext

因为我是*iText*的新手。我不知道如何使用*iText 1.4*在 pdf 的页脚中添加表格。

我已经在标题中添加了表格，它工作正常。但是在页脚的情况下，它无法正常工作。

任何人请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:01:54.387

如果您使用最新版本的 iText (5.2.x)，页眉和页脚最好通过页面事件进行管理。

请参阅 iText in Action 书中的这些[示例](http://itextpdf.com/themes/keyword.php?id=221)。

# asp.net - MVC3 的远程模型验证动作中的参数名称

> ID：10562261
> 
> 赞同：4
> 
> 时间：2012-05-12T08:48:38.467
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation, remote-validation

我对属性使用远程验证属性`SSN`，在视图页面中我使用通用视图，然后 ssn 字段如下：

```
@Html.EditorFor(model => model.MainModel.SSN)
@Html.ValidationMessageFor(model => model.MainModel.SSN) 
```

我的行动是：

```
public JsonResult IsValidaSSN(string SSN) {

  //....

    return Json(result, JsonRequestBehavior.AllowGet);

} 
```

但`SSN`在行动中总是为空，我也尝试过`MainModelSSN`，`MainModel_SSN`但没有变化，总是为空，你的建议是什么？`MainModel.SSN`in action 参数的正确名称是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:00:46.680

您可以尝试指定前缀：

```
public Action IsValidaSSN([Bind(Prefix = "MainModel")] string SSN) 
{
    //....
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

`MainModel`是用于发送数据的前缀 => `MainModel.SSN`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T17:56:45.743

另一个稍微更精确的，采用 Rahul 的回答：

```
public JsonResult IsValidImageUrl(string SSN) {
    if (string.IsNullOrEmpty(SSN)) {
        string parmname = Request.QueryString.AllKeys.FirstOrDefault(k => k.EndsWith(".SSN"));
        if (!string.IsNullOrEmpty(parmname)) {
            SSN = Request.QueryString[parmname];
        }
    }

    //.... etc. 
```

这可以与多个参数一起飞行。

旁注，您可能需要重新考虑“GET”JSON 方法与任何与 SSN 相关联的东西的关联。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T16:45:12.590

我只使用第一个查询字符串参数解决了这个问题：

```
public JsonResult IsValidImageUrl(string value) {

    if (value == null && Request.QueryString.Count == 1) {
            value = Request.QueryString[0];
        }

    //....            

    return Json(result, JsonRequestBehavior.AllowGet);                    
} 
```

# c++ - 将函数作为参数传递给.cpp文件中的函数模板时如何声明？

> ID：10562262
> 
> 赞同：0
> 
> 时间：2012-05-12T08:48:44.633
> 
> 标签：c++, templates

我正在尝试通过阅读一本书并从那本书中做练习来自己学习 C++。

现在我试图在 .cpp 文件中声明一个函数模板的实例。我知道我可以在头文件中声明/定义该函数模板，但我仍然对如何在 .cpp 文件中执行此操作感到好奇。

这是一段微不足道的代码，但证明了我的问题：

```
// temp_func.h
#ifndef GUARD_temp_func
#define GUARD_temp_func

#include <iostream>

using std::cout;    using std::endl;

int addone(int);
int addtwo(int);

template<typename F>
void call_adds(int, F);

#endif 
```

头文件

```
// temp_func.cpp
#include "temp_func.h"

using std::cout;    using  std::endl;

int addone(int n)
{
    return n + 1;
}

int addtwo(int n)
{
    return n + 2;
}

template<typename F>
void call_adds(int n, F f)
{
    cout << f(n) << endl;
}
template void call_adds<addone>(int n, F addone); 
```

.cpp 文件，显然最后一行不起作用。

**编辑：** 基于 nm 提供的解决方案

```
template<int F(int)>
void call_adds(int n)
{
    cout << F(n) << endl;
}
template void call_adds<addtwo>(int);
template void call_adds<addone>(int); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:06:05.533

您的`call_ads`模板需要一个类型参数。`addone`不是类型，而是函数。您可以专门`call_adds`针对类似 的类型`int(int)`，但不能专门针对该类型的单个函数。

您可以使用非类型模板参数创建函数模板：

```
template <int F(int)>
void call_adds(int n)
{
    cout << F(n) << endl;
} 
```

并专门化它：

```
template<> void call_adds<addtwo> (int n) { ... } 
```

请注意，`call_adds`不再有常规函数参数，只有模板参数。

编译器并不真正关心您是在头文件还是在源文件中声明某些内容，只要声明在应该在哪里可见。

# php - 我想在php中找到用户的当前位置

> ID：10562265
> 
> 赞同：5
> 
> 时间：2012-05-12T08:49:34.237
> 
> 标签：php, geolocation, google-api

我正在使用[http://api.easyjquery.com/ips/?ip=115.119.253.90&full=true](http://api.easyjquery.com/ips/?ip=115.119.253.90&full=true) 这个 api 来获取当前位置，但是当这个站点出现故障时，我无法获取当前位置。

谷歌可以提供任何 api 来使用 ip 查找当前位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T09:02:39.110

如果您不想使用 HTML5 [Geolocoation API](http://www.w3.org/TR/geolocation-API/)，您可以从 IP 中检测一点。

或尝试其他其他解决方案

[谷歌地理编码 API](https://developers.google.com/maps/documentation/geocoding/)

[地理定位器-PHP](http://freecode.com/projects/ipgeolocation-php-class)

[Maxmind](http://www.maxmind.com/app/php) [http://www.maxmind.com/app/php](http://www.maxmind.com/app/php)

[信息数据库](http://ipinfodb.com/)

# c# - 在插入新对象之前需要从列表中删除对象吗？

> ID：10562266
> 
> 赞同：0
> 
> 时间：2012-05-12T08:49:40.957
> 
> 标签：c#

我正在学习 C#，并且正在执行一项使用对象列表的任务。我想如果我插入一个新对象， list.insert(index, object) 在它已经是一个对象的位置，前一个对象被替换了！？

但似乎我必须先用 list.removeAt(index) 删除它，然后才能插入新的，否则它只是被添加，旧的留在列表中。这是正确的还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:53:40.080

[Insert 方法](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)在指定索引处插入一个新项目，根据需要腾出空间：

```
list.Insert(1, "foo");

//  Before              After
//
//  list[0] == "a"      list[0] == "a"
//  list[1] == "b"      list[1] == "foo"
//  list[2] == "c"      list[2] == "b"
//                      list[3] == "c" 
```

如果要替换指定索引处的项目，可以使用列表的[indexer](http://msdn.microsoft.com/en-us/library/0ebtbkkc)：

```
list[1] = "foo";

//  Before              After
//
//  list[0] == "a"      list[0] == "a"
//  list[1] == "b"      list[1] == "foo"
//  list[2] == "c"      list[2] == "c" 
```

*另请参阅：* [索引器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:53:27.697

这是对的。

但是，如果您想替换列表中指定索引处的项目，为什么不直接

```
list[index] = newitem; 
```

# c++ - C++/编译：是否可以设置 vptr 的大小（全局 vtable + 2 字节索引）

> ID：10562268
> 
> 赞同：17
> 
> 时间：2012-05-12T08:50:10.053
> 
> 标签：c++, compilation, g++, intel, vptr

我最近发布了一个关于 C++ 中的虚拟性导致的内存开销的问题。答案让我了解 vtable 和 vptr 是如何工作的。我的问题如下：我在超级计算机上工作，我有数十亿个对象，因此我必须关心由于虚拟性导致的内存开销。经过一些措施，当我使用具有虚函数的类时，每个派生对象都有其 8 字节的 vptr。这一点也不容忽视。

我想知道英特尔 icpc 或 g++ 是否有一些配置/选项/参数，以使用具有可调节精度的“全局”vtables 和索引而不是 vptr。因为这样的事情将允许我对数十亿个对象使用 2 字节索引（无符号短整数）而不是 8 字节 vptr（并且很好地减少了内存开销）。有没有办法通过编译选项来做到这一点（或类似的事情）？

非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T10:15:34.233

不幸的是......不是自动的。

但请记住，v-table 只不过是运行时多态性的语法糖。如果您愿意重新设计您的代码，有几种选择。

1.  外部多态性
2.  手工制作的v表
3.  手工多态

* * *

**1) 外部多态性**

这个想法是，有时您只需要瞬时方式的多态性。也就是说，例如：

```
std::vector<Cat> cats;
std::vector<Dog> dogs;
std::vector<Ostrich> ostriches;

void dosomething(Animal const& a); 
```

`Cat`在这种情况下嵌入虚拟指针或嵌入虚拟指针似乎很浪费，`Dog`因为您**知道**动态类型（它们按值存储）。

外部多态性是关于具有纯具体类型和纯接口，以及中间的一个简单的桥梁来*临时*（或永久，但这不是你想要的）将具体类型适应接口。

```
// Interface
class Animal {
public:
    virtual ~Animal() {}

    virtual size_t age() const = 0;
    virtual size_t weight() const = 0;

    virtual void eat(Food const&) = 0;
    virtual void sleep() = 0;

private:
    Animal(Animal const&) = delete;
    Animal& operator=(Animal const&) = delete;
};

// Concrete class
class Cat {
public:
    size_t age() const;
    size_t weight() const;

    void eat(Food const&);
    void sleep(Duration);
}; 
```

这座桥是一劳永逸的：

```
template <typename T>
class AnimalT: public Animal {
public:
    AnimalT(T& r): _ref(r) {}

    virtual size_t age() const override { return _ref.age(); }
    virtual size_t weight() const { return _ref.weight(); }

    virtual void eat(Food const& f) override { _ref.eat(f); }
    virtual void sleep(Duration const d) override { _ref.sleep(d); }

private:
    T& _ref;
};

template <typename T>
AnimalT<T> iface_animal(T& r) { return AnimalT<T>(r); } 
```

你可以这样使用它：

```
for (auto const& c: cats) { dosomething(iface_animal(c)); } 
```

*每个项目都会产生两个*指针的开销，但前提是您需要多态性。

另一种方法是也`AnimalT<T>`使用值（而不是引用）并提供一种`clone`方法，该方法允许您根据情况完全选择是否使用 v 指针。

在这种情况下，我建议使用一个简单的类：

```
template <typename T> struct ref { ref(T& t): _ref(t); T& _ref; };

template <typename T>
T& deref(T& r) { return r; }

template <typename T>
T& deref(ref<T> const& r) { return r._ref; } 
```

然后稍微修改一下桥：

```
template <typename T>
class AnimalT: public Animal {
public:
    AnimalT(T r): _r(r) {}

    std::unique_ptr< Animal<T> > clone() const { return { new Animal<T>(_r); } }

    virtual size_t age() const override { return deref(_r).age(); }
    virtual size_t weight() const { return deref(_r).weight(); }

    virtual void eat(Food const& f) override { deref(_r).eat(f); }
    virtual void sleep(Duration const d) override { deref(_r).sleep(d); }

private:
    T _r;
};

template <typename T>
AnimalT<T> iface_animal(T r) { return AnimalT<T>(r); }

template <typename T>
AnimalT<ref<T>> iface_animal_ref(T& r) { return Animal<ref<T>>(r); } 
```

通过这种方式，您可以选择何时需要多态存储，何时不需要。

* * *

**2) 手工制作的 v-tables**

*（仅适用于封闭的层次结构）*

在 C 中，通过提供自己的 v-table 机制来模拟面向对象是很常见的。既然您似乎知道什么是 v-table 以及 v-pointer 如何工作，那么您可以自己完美地工作。

```
struct FooVTable {
    typedef void (Foo::*DoFunc)(int, int);

    DoFunc _do;
}; 
```

然后为锚定在的层次结构提供一个全局数组`Foo`：

```
extern FooVTable const* const FooVTableFoo;
extern FooVTable const* const FooVTableBar;

FooVTable const* const FooVTables[] = { FooVTableFoo, FooVTableBar };

enum class FooVTableIndex: unsigned short {
    Foo,
    Bar
}; 
```

那么你在你的`Foo`类中所需要的就是保持最派生的类型：

```
class Foo {
public:

    void dofunc(int i, int j) {
        (this->*(table()->_do))(i, j);
    }

protected:
    FooVTable const* table() const { return FooVTables[_vindex]; }

private:
    FooVTableIndex _vindex;
}; 
```

由于`FooVTables`数组和`FooVTableIndex`枚举需要了解层次结构的所有类型，因此存在封闭的层次结构。

但是可以绕过枚举索引，并且通过使数组变为非常数，可以预初始化为更大的大小，然后**在初始化**时让每个派生类型自动在那里注册自己。因此，在此初始化阶段会检测到索引冲突，甚至可以进行自动解决（扫描数组以查找空闲槽）。

这可能不太方便，但确实提供了一种*打开*层次结构的方法。*显然，在启动任何线程之前*编写代码更容易，因为我们在这里讨论的是全局变量。

* * *

**3）手工多态**

*（仅适用于封闭的层次结构）*

后者基于我探索 LLVM/Clang 代码库的经验。编译器遇到的问题与您所面临的完全相同：对于数万或数十万个小项目，每个项目的 vpointer 确实会增加内存消耗，这很烦人。

因此，他们采取了一种简单的方法：

*   每个类层次结构都有一个同伴`enum`列出所有成员
*   层次结构中的每个类在构造时将其同伴传递`enumerator`给其基类
*   虚拟性是通过适当地切换`enum`和投射来实现的

在代码中：

```
enum class FooType { Foo, Bar, Bor };

class Foo {
public:
    int dodispatcher() {
        switch(_type) {
        case FooType::Foo:
            return static_cast<Foo&>(*this).dosomething();

        case FooType::Bar:
            return static_cast<Bar&>(*this).dosomething();

        case FooType::Bor:
            return static_cast<Bor&>(*this).dosomething();
        }
        assert(0 && "Should never get there");
    }
private:
    FooType _type;
}; 
```

这些开关很烦人，但它们可以或多或少地自动播放一些宏和类型列表。LLVM 通常使用如下文件：

```
 // FooList.inc
 ACT_ON(Foo)
 ACT_ON(Bar)
 ACT_ON(Bor) 
```

然后你做：

```
 void Foo::dodispatcher() {
     switch(_type) {
 #   define ACT_ON(X) case FooType::X: return static_cast<X&>(*this).dosomething();

 #   include "FooList.inc"

 #   undef ACT_ON
     }

     assert(0 && "Should never get there");
 } 
```

Chris Lattner 评论说，由于开关是如何生成的（使用代码偏移表），这产生的代码类似于虚拟调度的代码，因此具有大致相同数量的 CPU 开销，但内存开销更低。

显然，一个缺点是`Foo.cpp`需要包含其派生类的**所有**头文件。这有效地密封了层次结构。

* * *

我自愿提出了从最开放到最封闭的解决方案。它们具有不同程度的复杂性/灵活性，您可以选择最适合您的一种。

一件重要的事情，在后两种情况下，销毁和复制需要特别小心。

# javascript - 使用内部函数返回外部函数的必要性是什么？

> ID：10562269
> 
> 赞同：0
> 
> 时间：2012-05-12T08:50:41.707
> 
> 标签：javascript

这两个函数有什么区别？

```
function bind_1(f, o) {
    if (f.bind)
        return f.bind(o);
    else
        return function() { return f.apply(o. arguments); };
}

function bind_2(f, o) {
    if (f.bind)
        return f.bind(o);
    else
        return f.apply(o. arguments);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:07:35.217

Vadim 和 Corbin 大部分都是正确的，但是为了增加一点具体性和冗长性（我说大话），bind_1 返回一个函数，该函数将**始终**调用给定函数 (f)，并将给定参数 (o) 设置为上下文 - 设置上下文意味着在函数内部*this*关键字将引用分配的上下文对象。而 bind_2 将返回**：**带有上下文 (o) 的函数 (f)，或者返回带有上下文 (o) 调用函数 (f) 的结果。

Function.prototype.bind 也可以用于部分函数应用。例如，如果您不想在函数中使用上下文，您可以为函数提供已应用的参数，从而简化后续调用：

```
// define a function which expects three arguments
function doSomething (person, action, message) {
    return person + " " + action + " " + message + ".";
}

var shortcut = doSomething.bind(null, "Joshua", "says");
// the call to bind here returns a function based on doSomething with some changes:
// 1\. the context (_this_) is set to null
// 2\. the arguments (person and action) are defined ("Joshua" and "says") and not changeable

// now we can use shortcut("Hello")
// instead of doSomething("Joshua", "says", "Hello")
shortcut("Hello"); // returns "Joshua says Hello." 
```

传递给 .apply()、.call() 或 .bind() 的第一个参数正在更改函数/方法的上下文。上下文是*this*关键字的值；因此，在函数内部，*this*值将是作为第一个参数传递的任何值。这里我使用了*null*，因为在这种情况下，函数不需要上下文的特定值；并且*null*比*undefined*字符少，并且感觉比一些垃圾值（“” - 空字符串，{} - 空对象等）更好。所以剩下的两个变量被分配给函数的第一组参数。

```
function exampleContext () {
    return this; // context of function execution
}

exampleContext(); // returns the global scope "window" (in the browser)

var exampleBind = exampleContext.bind(null);
exampleBind(); // returns "null"

var exampleBind = exampleContext.bind("Joshua");
exampleBind(); // returns "Joshua"

var exampleBind = exampleContext.bind({});
exampleBind(); // returns "Object {}"" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:54:01.410

bind_1 返回一个函数，调用该函数时`f`使用`o.arguments`.

bind_2 立即`f`执行`o.arguments`。

至于这件事的“必要性”，我无法立即看到。在某些人的代码中，它显然是有目的的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:20:30.147

在大多数情况下，它会将不同的上下文（`this`值）“附加”到函数上。

# mysql - 一个非常简单的 UPDATE InnoDB 查询占用太多

> ID：10562271
> 
> 赞同：1
> 
> 时间：2012-05-12T08:51:19.457
> 
> 标签：mysql, sql, innodb

基本上我有这个简单的查询：

```
UPDATE beststat 
  SET rawView = rawView + 1 
  WHERE bestid = 139664 AND period = 201205 
  LIMIT 1 
```

需要**1 秒**。

**该表（ beststat**）目前有约 100 万条记录，其大小为：**68MB**。我有**4GB RAM**和`innodb buffer pool size`= **104,857,600**，其中： Mysql: **5.1.49-3**

这是我数据库中唯一的 InnoDB 表（其他是 MyISAM）

* * *

我`unique key index`当然有最佳状态和时期：

```
CREATE TABLE `beststat` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `bestid` int(11) unsigned NOT NULL,
 `period` mediumint(8) unsigned NOT NULL,
 `view` mediumint(8) unsigned NOT NULL DEFAULT '0',
 `rawView` mediumint(8) unsigned NOT NULL DEFAULT '0',
 PRIMARY KEY (`id`),
 UNIQUE KEY `bestid` (`bestid`,`period`)
) ENGINE=InnoDB AUTO_INCREMENT=2020577 DEFAULT CHARSET=utf8 
```

* * *

```
EXPLAIN SELECT rawView FROM beststat WHERE bestid =139664 AND period =201205 LIMIT 1 
```

给出：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  beststat    const   bestid  bestid  7   const,const 1 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:29:37.097

当您第一次访问 innodb 表时，它将显示的时间包括将索引数据加载到缓冲池中所需的时间。考虑进一步解雇的时间表。

如果您发布的详细信息仅是几秒钟及以后的查询执行时间线，

> 检查表是否是碎片化的。在碎片表的情况下，对 UPDATE 的实际查找比预期的要多。

如果情况并非如此，请查看以下变量。

```
1) innodb_flush_log_at_trx_commit
   In general there will be 30 - 40% degraded performance with    
   innodb_flush_log_at_trx_commit set to 1 than it is set to 2

2) innodb_flush_method.
   Default fsync will perfrom worse than the O_DIRECT and O_SYNC 
```

最后，在使用 SQL_NO_CACHE 执行查询时，查看 PROFILING 信息并查看服务器上的 IO [sar OR iostat]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T15:09:39.163

您的查询必须扫描整个表才能进行更新。

在 (bestid, period) 上添加复合索引或将查询更改为使用 id。

# php - 提供用户位置的网络服务

> ID：10562274
> 
> 赞同：1
> 
> 时间：2012-05-12T08:51:49.587
> 
> 标签：php, jquery, codeigniter

我使用一个 Web 服务来获取用户位置。我给这个 Web 服务提供 IP 地址，Web 服务返回我的纬度、经度、城市名称等。但是当这个 Web 服务关闭时，我无法获得位置。所以任何人都可以告诉我如何克服这个问题。任何我可以信任的谷歌网络服务都在那里。

对不起我糟糕的英语

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:10:04.380

如果您想要 JS 的信息，请尝试 HTML5 的地理定位功能。这是获取用户位置的示例：http: [//www.w3schools.com/html5/html5_geolocation.asp](http://www.w3schools.com/html5/html5_geolocation.asp)。使用此方法，您可以找到用户位置的经纬度，但不能保证准确性。不仅如此，您还必须使用诸如 Google Maps API 之类的其他东西来获取有关这种经度和纬度组合的更多信息，例如国家名称、城市名称等。

对于服务器，可以通过确定 IP 属于哪个范围来识别用户位置。IP 范围数据库可从此处下载 (26.3 MB)： http: [//www.hostip.info/dl/index.html](http://www.hostip.info/dl/index.html)

或按照问题下方第一条评论中提供的 Moyed Ansari 链接中的说明进行操作。

# javascript - Javascript：两个对象/数组之间的相等比较

> ID：10562279
> 
> 赞同：1
> 
> 时间：2012-05-12T08:52:20.897
> 
> 标签：javascript, jquery

让我们猜测两个具有相同属性的对象：

```
var x = {a : 'some'},
      y = {a: 'some'}; 
```

输出：

`x == y;`并且`x === y;`都给出错误的

同样对于两个数组，

```
var p = [1, 2, 3],
      q = [1,2,3]; 
```

`p == q`并且`p === q`都给`false`。

但是如果我执行以下操作：

```
var x = y = {a: 'some'};
var p = q = [1, 2, 3]; 
```

以上所有比较给出`true`。

为什么Javascript做这样的事情？请解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T08:57:31.817

> 以上所有比较给出`true`。

对。您已专门设置`p`，`q`因此它们引用相同的对象。

对于对象引用，两者`==`（如果双方都是对象引用）`===`将检查引用是否指向*同一个对象*。如果您有两个相同但独立的对象，则两者都将始终为`false`.

例如：

```
var a = {}; // a points to an object
var b = {}; // b points to a _different_ object
console.log(a === b); // "false"
console.log(a == b);  // "false"

var c = {}; // c points to an object
var d = c;  // d points to _the same_ object
console.log(c === d); // "true"
console.log(c == d);  // "true" 
```

对象的*内容*无关紧要，正在检查的是它们的身份。

请注意，如果您使用`==`并且只有一侧是对象引用（例如，另一侧是数字、原始字符串`undefined`等），则情况并非如此。在这种情况下，将要求对象引用转换自身（转换为字符串或数字，具体取决于其他内容），然后将转换后的结果用于比较。这可能会导致令人惊讶的行为（例如，`"2" == [[[[[2]]]]]`是`true`因为数组被要求将自身转换为字符串，它通过`join`[这将要求其元素将自身转换为字符串，依此类推] 来完成，并且您最终得到`"2"`在右手侧）。所以我通常更喜欢`===`（“严格平等”而不是`==`（“松散平等”）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T08:58:29.147

发生这种情况是因为

```
var p = [1, 2, 3],
q = [1,2,3]; 
```

创建两个数组实例。JS 中的相等运算符，在比较非原始数据时，只检查它们是否是同一个实例，不要对值或属性进行深度检查。

带代码

```
var p = q = [1, 2, 3]; 
```

您正在创建一个数组实例并将此实例分配给变量`p`和`q`. 因此，两个变量都存储对同一个实例的引用，因此相等运算符将返回 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T09:00:00.907

在这种情况下，变量指向两个独立的对象，因此不相等。

```
var x = {a:'some'}, // one object with "a" = "some"
    y = {a:'some'}; // another object with "a" = "some"

var p = [1,2,3],    // one array with 1,2 and 3
    q = [1,2,3];    // another array with 1,2 and 3 
```

但在这种情况下，它们指向同一个对象，因此相等

```
var x = y = {a: 'some'};
//is like:
var x = {a:'some'}, // x points to an object
    y = x;          // y is given reference to whatever x is pointing at

var p = q = [1,2,3];
//is like:
var p = [1,2,3],    // p points to an array
    q = p;          // q is given reference to whatever p is pointing at 
```

# c++ - MacOSX 上 Google Perftools CPU 分析器中的行号

> ID：10562280
> 
> 赞同：14
> 
> 时间：2012-05-12T08:52:29.673
> 
> 标签：c++, macos, gcc, google-perftools

我正在尝试在 MacOSX 上分析一些 C++ 程序。所以我构建`google-perftools`，编写了一个程序，使用 MacPorts g++ 4.7 编译，带有`-g`编译器标志，并链接到`libprofiler`. 然后我跑了：

```
CPUPROFILE=cpu.profile ./a.out 
```

然后我运行 pprof 来生成输出：

```
[hidden ~]$ pprof --text ./a.out cpu.profile 
Using local file ./a.out.
Using local file cpu.profile.
Removing __sigtramp from all stack traces.
Total: 282 samples
     107  37.9%  37.9%      107  37.9% 0x000000010d72229e
      16   5.7%  43.6%       16   5.7% 0x000000010d721a5f
      12   4.3%  47.9%       12   4.3% 0x000000010d721de8
      11   3.9%  51.8%       11   3.9% 0x000000010d721a4e
       9   3.2%  55.0%        9   3.2% 0x000000010d721e13
       8   2.8%  57.8%        8   2.8% 0x000000010d721a64
       7   2.5%  60.3%        7   2.5% 0x000000010d7222f0
       6   2.1%  62.4%        6   2.1% 0x000000010d721a4c
       6   2.1%  64.5%        6   2.1% 0x000000010d721b1f
       6   2.1%  66.7%        6   2.1% 0x000000010d721e0c
       5   1.8%  68.4%        5   1.8% 0x000000010d721fba
    ...... 
```

看起来 perftools 不会将地址转换为函数名称。

有谁知道我在这里想念什么？我应该怎么做才能让分析器生成正确的结果。

编辑：更多信息：这不是 pprof 或 google-perftools 的问题，而是更多类似 gcc 或 macosx 的问题，因为 Instrument.app 还显示地址而不是行号。我不熟悉调试符号在 Mac OS X 下是如何工作的，所以我宁愿认为它是我在这里遗漏的东西，而不是 gcc 或 Mac OS X 中的错误。我想知道是否有人可以提供一些关于调试信息如何工作的提示适用于 Mac OS X。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-13T10:13:10.083

这似乎与OS X 10.5 中引入的*地址空间布局随机化(ASLR) 有关*

我已经在 gperftools 问题跟踪器上提交了[问题 #562 。](https://github.com/gperftools/gperftools/issues/565)您可以通过传递来禁用 ASLR `-Wl,-no_pie`。

此外，如果您不一定要使用`gperftools`, `Instruments`( 附带`Xcode`) 值得一试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T17:48:36.557

我相信在这个平台上，调试符号保留在 .o 文件中，它们不会移动到可执行文件中。要在 gdb 或分析器中获取符号，您需要保存 .o 文件。这可能意味着您需要分两步编译您的应用程序（编译，然后链接）以保留 .o 文件。

有关其他信息，请参阅[此问题](https://stackoverflow.com/questions/3353722/how-do-i-debug-c0x-programs-in-macports-gcc-4-5)。

在查看 pprof Perl 源代码时，符号名称是通过使用`nm`and获得的`c++filt`，因此您可以尝试独立运行它们并找出它们不起作用的原因。从 pprof 源代码看来，它尝试了一堆不同的命令行参数来覆盖 nm 的多个版本。这是方法的总结

nm [-D] -n [-f] [--demangle] 目标文件 2>/dev/nul [| cpp+过滤]

我放在括号中的部分是脚本在运行时确定的部分，如果您的平台和 nm 和 c++filt 版本需要这些部分。尝试以上所有组合，看看有什么效果。然后看看 pprof 脚本做了什么，也许是通过添加一些 printfs 到它。

祝你好运。

# ruby-on-rails - 从 git repo 部署 rails 应用程序

> ID：10562281
> 
> 赞同：0
> 
> 时间：2012-05-12T08:52:31.410
> 
> 标签：ruby-on-rails, git, deployment

我在生产服务器上有一个 git 裸仓库：

```
/home/username/railsapp.git 
```

现在我想要一份与 mod_rails 一起使用的副本。就像是：

```
/home/username/railsapp/ 
```

将文件从 repo 复制到“生产”目录的最佳方法是什么？我应该做一些类似浅克隆的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:57:28.770

从裸 git 存储库中“拉出”文件的常用方法确实是克隆存储库，然后在每次需要更新时拉取它。

您还可以使用钩子在将生产中使用的代码推送到存储库时自动更新它，但这是另一个主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:04:28.033

我建议使用[Capistrano](https://github.com/capistrano/capistrano/wiki)，它封装了从源代码控制（主要是 Git）部署项目的命令。

简而言之，您配置您的环境（多阶段），指明应该跟踪哪个分支，以及在部署时它将从您的源代码控制直接克隆到您的部署机器上（使用各种缓存选项）。

除此之外，您还可以将需要绑定到进程、缓存清除、数据库迁移等的任何其他内容包装起来。

* * *

关于 Rails，肯定会有 Capistrano 食谱让你开始，它们会缓存清除、rake 和按需执行其他基本任务。

# jquery - 同位素过滤器从另一个页面链接

> ID：10562283
> 
> 赞同：5
> 
> 时间：2012-05-12T08:52:40.347
> 
> 标签：jquery, filter, jquery-isotope

我正在研究 jquery isotope，并且过滤器使用下面在同一页面上给出的方法来很好地工作：

```
<li class="current"><a href="#" data-filter="*">all</a></li>
<li><a href="#" data-filter=".design">design</a></li>
<li><a href="#" data-filter=".coding">coding</a></li>
<li><a href="#" data-filter=".logo">logo</a></li> 
```

我想要实现的是链接到特定类别，以便我的用户可以从其他页面进入过滤后的类别。

我尝试了以下链接方法，但没有成功：

```
<a href="portfolio.html#filter=logo" data-filter=".logo">logo</a> 
```

谁能帮我吗？有什么方法可以预先过滤类别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T22:23:19.763

配置同位素后，您需要读取查询字符串变量，然后单击匹配的过滤器按钮。

jsFiddle 示例：http: [//jsfiddle.net/Y6vWn/](http://jsfiddle.net/Y6vWn/)

```
var filterFromQuerystring = getParameterByName('filter');
$('a[data-filter=".' + filterFromQuerystring  + '"]').click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:25:10.450

账单-

我尝试了您的方法，但似乎无法使其正常工作。这两行都是必需的吗？

这是指向我的同位素过滤页面的链接的菜单 HTML：

```
<li><a href="entertainment.html">Entertainment</a>
     <ul>
        <li><a href="entertainment.html#party">Party bands, Show and Tribute bands</a></li>
        <li><a href="entertainment.html#classical">Classical, Jazz, and Easy Listening</a></li>
        <li><a href="entertainment.html#djs">DJs, Emcees, Variety, and Interactive</a></li>
    </ul>
</li> 
```

这是我的过滤器的代码（此处未使用 ID）：

```
<div id="filters">
<ul class="option-set" data-option-key="filter">
    <li><a id="f-all" href="#filter" class="selected" data-option-value="*">All</a></li>
    <li><a id="f-party" href="#filter" data-option-value=".party">Party Bands</a></li>
    <li><a id="f-classical" href="#filter" data-option-value=".classical">Classical, Jazz, and Easy Listening</a></li>
    <li><a id="f-djs" href="#filter" data-option-value=".djs">DJs and Emcees</a></li>
</ul> 
```

这是我放在过滤页面末尾的脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    var pathname = window.location;
    alert(pathname.toString()); //testing purposes
    if(pathname.toString().indexOf("party") != -1){
        alert('shit went through 9'); //testing purposes

        var filterFromQuerystring = 'party'; // getParameterByName('filter');
        $('a[data-option-value=".' + filterFromQuerystring  + '"]').click();
    }
}); 
```

我打算让页面根据 URL 中主题标签之后的内容选择不同的过滤器。有没有更聪明的方法来解决这个问题？

# jquery - .post() 工作但未在 jquery .click() 方法中完成

> ID：10562284
> 
> 赞同：0
> 
> 时间：2012-05-12T08:52:52.623
> 
> 标签：jquery, post, tracking

大家好，我编写了用于跟踪用户点击链接并将它们记录在 php 页面上的代码。这是我的代码

```
<!doctype html>
<html>
 <head>
  <meta charset="utf-8">
  <title>Tracking outgoing links with JavaScript and PHP</title>
 </head>
 <body>
  <p><a href="test2.html">Test link to Google</a></p>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script>
   $(function() {
    $('a').click(function() {
    $.post("get.php", { name: "John" }      
    });
   });
  </script>
 </body>
</html> 
```

它正在工作，页面 get.php 已请求但未完成。所以无法保存数据。似乎页面移动得太快了

如何解决这个问题。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:58:47.007

导航离开可能会在 AJAX 请求完全发送之前中止它。为避免这种情况，请不要在请求完成之前加载目标页面：

```
$('a').click(function(e) {
    e.preventDefault();
    var url = $(this).attr('href');
    $.post("get.php", { name: "John" }, function() {
        location.href = url;
    });
}); 
```

但是，中键单击链接不会触发此事件。如果您*总是*想触发您的事件，请使用`mousedown`事件并检查`e.which`. 如果`1`是左键，您需要`e.preventDefault()`在 AJAX 请求完成后重定向。如果它`2`是中间按钮，并且您只需要发送 AJAX 请求而无需执行任何其他操作 - 无论如何，该页面都会在新选项卡中打开。

```
$('a').on('click mousedown', function(e) {
    if(e.which == '3') {
        return; /* do not handle rightclick */
    }
    else if(e.type == 'click' || e.which == '1') {
        e.preventDefault();
    }
    var url = $(this).attr('href');
    $.post("get.php", { name: "John" }, function() {
        if(e.type == 'click' || e.which == '1') {
            location.href = url;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T08:54:30.410

```
$('a').click(function() {
    $.post("get.php", { name: "John" }, 
                                      ^ why this comma     
    }); 
```

你应该这样做：

```
$('a').on('click', function(event) {
  var self = $(this);
  event.preventDefault(); // stop the navigation of `a`
  $.post("get.php", { name: "John" },function() {
        location.href = self.attr('href');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:10:54.780

试试这个：

```
$(function() {
    $('a').click(function() {
        var shouldFollowAnchor = false;

        $.ajaxSetup.async = false;

        $.post("get.php", { name: "John" }, function () {
            shouldFollowAnchor = true;
        });

        return shouldFollowAnchor;
    });
}); 
```

跳转到页面的原因是当您单击链接时，数据已发布并且您导航到锚元素的 href 属性中的链接。您通过返回 false 来停止关注该链接。此示例脚本等待来自服务器的响应 - 是的，如果您愿意，可以添加一些验证 - 同时您可以显示一些“正在加载...”或发送“发送...”消息，用户会想知道发生了什么。=)

# java - 选择哪种技术来创建网络聊天客户端？

> ID：10562285
> 
> 赞同：0
> 
> 时间：2012-05-12T08:52:55.620
> 
> 标签：java, rmi

我想制作一个有桌面客户端的聊天应用程序。另外，我希望我的服务器上应该有某种软件，负责执行不同用户（通过桌面客户端连接）之间的所有通信部分。我精通 Java 编程语言，但我无法确定哪种技术（如 RMI、servlet、webstart 等）更适合这个项目。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:58:52.200

Jetty Web 容器有一个聊天服务器作为示例应用程序。您可能会发现很容易适应您的需要，然后编写一个桌面客户端与服务器通信 http。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:56:07.353

查看 Jabber 协议 (XMPP)。

这是一篇题为“使用 Jabber/XMPP 构建即时消息应用程序”的文章[http://java.sys-con.com/node/232087](http://java.sys-con.com/node/232087)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T08:56:33.233

我会推荐[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)和 Java 后端。Web 前端应该符合标准，所以我会选择 JavaScript。

# javascript - 用 javascript 重写特定链接，特定目录的链接除外

> ID：10562290
> 
> 赞同：0
> 
> 时间：2012-05-12T08:54:03.357
> 
> 标签：javascript, jquery, html, url-rewriting, hyperlink

我有一个包含链接的页面，需要用 Javascript 重写。需要将 div id="container" 中的所有链接从 "post=post-number-234" 重写为 "?id=blog&post=post-number-234"。

目前我有这个脚本：

```
<script type="text/javascript">
<!--
var content = document.getElementById('content');
var list = div.getElementsByTagName("A");
for( var i = 0; i < list.length; i++ ) 
{ 
  document.links[i].href = '?id=blog&' + document.links[i].href
}
// -->
</script> 
```

这工作正常。但我有 Fancybook 使用的图像链接。所有这些链接最初都链接到“img/image-name.jpg”。但是现在fancybook 不起作用，因为它在“?id=blog&img/image-name.jpg”中搜索图像。

如何将重写应用于 div“内容”中的所有链接，这些链接未链接到目录“img”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:22:23.837

> 这工作正常

我怀疑是...

首先你得到一个 id 为 "content" 的 DOM 元素。然后你尝试从`div`应该失败的地方获取所有链接，`ReferenceError: div is not defined`因为它没有在任何地方定义（如果没有，你没有提供所有相关代码）。

如果这会成功，那么您将遍历找到的链接并按索引访问它们。但是来自错误的来源。而不是`list`你正在使用`document.links`

总结一下...

```
<script>
    var container = document.getElementById("container"),
        links = container.getElementsByTagName("a"),
        i = links.length,
        href;

    while (i--) {
        href = links[i].href;

        if (href.indexOf("img/") > -1) {
            continue;
        }

        links[i].href = "?id=blog&" + href;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:25:57.500

假设您的页面中有类似于以下内容的链接：

```
<a href="img/name.jpg"><img src="img/name.jpg" /></a>
<a href="post=post-number-234">Post Title - by Author Maybe?</a> 
```

如果您不打算使用诸如 jQuery 之类的框架/库，那么您显然需要更多的繁重工作并过滤掉您不想改变自己的情况。所以像：

```
<script>
var content = document.getElementById("content")
  , list = content.getElementsByTagName("a")
  , i = 0
  , len = list.length;

for (; i < len; i++) {
   // check for "img/" directory or image file-extensions (gif, jpg, jpeg, png)
   if (!/^img\/|\.(?:gif|jpg|jpeg|png)$/i.test(list[i].href)) {
       list[i].href = "?id=blog&" + list[i].href;
   }
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T09:17:27.787

在循环内部，检查`href`字符串是否包含'img'，如果没有找到则只修改它。

```
if (document.links[i].href.indexOf('img') == -1) {
  document.links[i].href = '?id=blog&' + document.links[i].href;
} 
```

# python - Django FileField 未使用 SimpleUploadedFile 对象进行验证

> ID：10562294
> 
> 赞同：3
> 
> 时间：2012-05-12T08:54:50.563
> 
> 标签：python, django, file, file-upload, request

我正在通过 ajax 上传文件，然后创建一个 SimpleUploadFile 对象并将其传递给replace request.FILES——这不会传递form.is_valid()。我在下面记录了 SimpleUploadedFile 字典和 request.FILES 替换；如您所见，可以创建 SimpleUploadedFile 对象：

```
SimpleUploadedFile [This does not work.]:
{'book_pics': <SimpleUploadedFile: movies.jpg (text/plain)>} # Yielded by printing uploaded_file 
```

当我不使用 ajax 并简单地使用表单提交文件时[出于好奇我这样做了]，这里是 upload_file 的样子：

```
request.FILE generated InMemoryUploadedFile [This works.]:
<MultiValueDict: {u'book_pics': [<InMemoryUploadedFile: movies.jpg (image/jpeg)>]}> 
```

知道如何让 SimpleUploadedFile 进行验证吗？

```
def add_book(request):
    if request.method == 'POST':
        # Grabbing the file uploaded via ajax earlier.
        fh = File(file(settings.MEDIA_ROOT + request.POST['book_pics']))
        uploaded_file = {'book_pics':SimpleUploadedFile(fh.name, fh.read())}
        form = BookForm(data=request.POST, files=uploaded_file)
        if form.is_valid():
            print >> sys.stderr, "Form is valid."
            form.save()
            return render(request, 'generic_message.html', {'message': 'Succesfully added book.'})
        else:
           ...
    else:
        ... 
```

根据这些文档，SimpleUploadedFile 应该可以工作：[https ://docs.djangoproject.com/en/dev/ref/forms/api/](https://docs.djangoproject.com/en/dev/ref/forms/api/)

**编辑：**

当我打印 f.clean(my_file) 时，出现以下错误，上下文如下。无论是否在 my_file 中设置文件类型，都会发生这种情况：

```
fh = File(file(settings.MEDIA_ROOT + request.POST['book_pics']))
my_file = UploadedFile(fh.name, fh.read(), 'image/jpeg')
f = forms.FileField()
print >> sys.stderr, f.clean(my_file)
# f.clean(my_file) Returns an error: 

DjangoUnicodeDecodeError: 'utf8' codec can't decode byte 0x92 in position 18: invalid 
start byte. You passed in '<UploadedFile: 
X\x06\x18\x92HI\xde\xf0\x00\xdd\x7f\n\x8e\xf9\x8f\xe5\x00\x92IGa\xaa\xce\xfe_\xa4\x04\xe
3\xca\x1a,\x97\x99\xd0\xda\x02\xe3e\xa8\xbb=\x99\xe0\x00\x0b\xfd?
Q\x00\x02\x80\x00*\xe6\xf7\xb0\xd6\xfb@\x06\xd2\x1f7\xfd\xaf\x00\x04Iw}\x8b\x08\xbcxB\xc
bj\x1e\xa3\x7f1\xf9\xc3\xc3\xef"r\xfb\xcc"T\xa2\x01r\xe7X\xb0\xa3\xc4r\xea\xdf\x9c\x00>\
x96K\x0b\xee\x07\xd26<\xa0\r\xb8\xf2?\xa4\\\x94\xf96\xe43\x1f\xc5\xfa\x1f\xd8@ 
t\xe9\xea\x7f8\x00p?S\xf9\xc0\x01\xc6\xaa\x1b\x06a\xca-
\x1f\xba\x88\xa6\xedn,|\'\xa2\xd8t\xb0\x862\\\xb0\xfa\x17\x16<\xf7\x80\xc1\xce\xc3\xcc\x
fe\x91Xp\x02\xc5\x92\x96\xb3\xa9\x8bo\xac8\x0eQ\xa1\xf3\x80\x07(\xf8GR\xf1x\xf0\x80($\xa
8\x02K76\xda4\x03h\x07\x9f\xed\x00\x07\x1f\x12F\xc7\xfbC\xc3\x90\x16\t\xca\xeeu;\xf4\x8a
\x92\x9f#\xa4\x12Ar\xf7\x80A\xcaId\xdfR\xc7\xae\xb0\xf0\x01i%\xc5\xf7\x8a\x80PI\t\xb9\xb
9 \xfd`\x01\xc2I\xe6}\x81\x1b\x7f*7\x8a\x1c\'O|\x84\\\xc1\xc... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:26:00.100

从我的一项测试中：

```
name = 'filename'
f = file(self.TEST_ROOT + name)
file_data = {'file':SimpleUploadedFile(f.name,f.read())}
data = {}
form = self.TestForm(data,file_data)
self.assertTrue(form.is_valid()) 
```

这个测试通过了。我的代码与您的代码几乎相同，除了我没有将文件传递给表单，而是将文件传递给表单。而且我没有命名传递的参数。这两种差异都没有影响，我已经尝试过了。你的问题是在

```
file(settings.MEDIA_ROOT + request.POST['book_pics']) 
```

request.POST['book_pics'] 确实包含文件名，但您的文件不在 MEDIA_ROOT 中。它在 django 放置临时上传文件的位置，或者，如果它是一个小文件，它在内存中。无论哪种方式，您使用代码创建的路径都不会指向该文件。

如果您尝试通过 ajax 发送文件，而不是使用表单，您可以使用以下解决方案：http: [//kuhlit.blogspot.de/2011/04/ajax-file-uploads-and-csrf -in-django-13.html](http://kuhlit.blogspot.de/2011/04/ajax-file-uploads-and-csrf-in-django-13.html)查看该页面中间某处的 django 代码。

相当复杂，但它有效。

# iphone - 自定义左右 UISegmentedControl 按钮

> ID：10562300
> 
> 赞同：26
> 
> 时间：2012-05-12T08:56:03.250
> 
> 标签：iphone, ios, ios5, uisegmentedcontrol, uiappearance

我正在尝试自定义以下分段控件，使用第一个按钮的左图像和第二个按钮的右图像。我将如何使用 UIAppearance 做到这一点？

我想更改以下分段控制：

![在此处输入图像描述](../Images/a8d42a9307f01d3acabbe025ccbdb572.png)

类似于以下内容：

![在此处输入图像描述](../Images/767aafaa624d5beee28c62735cdccdcf.png)

我想使用自定义图像的原因是我可以更改按钮的角。如果您查看蓝色分段控件，它会更方正（我的图像有自己的角）。

我在想这样的事情，但没有用：

```
UIImage *leftImage = [[UIImage imageNamed:@"leftControl.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
UIImage *rightImage = [[UIImage imageNamed:@"rightControl.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];

[[UISegmentedControl appearance] setBackgroundImage:leftImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault ];
[[UISegmentedControl appearance] setBackgroundImage:rightImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-09-05T01:27:08.163

您需要提供以下图片：

*   选定的段背景（这有左右大写）
    ![在此处输入图像描述](../Images/05699897622d758da6d9a309f197c66a.png)
*   未选择段背景（这有左右大写）
    ![在此处输入图像描述](../Images/74eaeef3e4e100aa1ab1d441725eff8d.png)
*   段中间，左选中，右未选中
    ![在此处输入图像描述](../Images/12b3a5d78b2ac19ff1cdb23d7d904e9b.png)
*   段中间，左未选中，右选中
    ![在此处输入图像描述](../Images/6b7d43426439c9e2fd3e76ecd1eda526.png)
*   中间段，左右都选中
    ![在此处输入图像描述](../Images/379b1bf694fba45c08529c72cdab1824.png)
*   段中间，左右都未选中
    ![在此处输入图像描述](../Images/5bc6af54f7f75473436fae66e5ea9e31.png)

然后使用以下代码进行设置：

```
/* Unselected background */
UIImage *unselectedBackgroundImage = [[UIImage imageNamed:@"segment_background_unselected"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)];
[[UISegmentedControl appearance] setBackgroundImage:unselectedBackgroundImage
                                           forState:UIControlStateNormal
                                         barMetrics:UIBarMetricsDefault];

/* Selected background */
UIImage *selectedBackgroundImage = [[UIImage imageNamed:@"segment_background_selected"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)];
[[UISegmentedControl appearance] setBackgroundImage:selectedBackgroundImage
                                           forState:UIControlStateSelected
                                         barMetrics:UIBarMetricsDefault];

/* Image between two unselected segments */
UIImage *bothUnselectedImage = [[UIImage imageNamed:@"segment_middle_unselected"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)];
[[UISegmentedControl appearance] setDividerImage:bothUnselectedImage
                             forLeftSegmentState:UIControlStateNormal
                               rightSegmentState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault];

/* Image between segment selected on the left and unselected on the right */
UIImage *leftSelectedImage = [[UIImage imageNamed:@"segment_middle_left_selected"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)];
[[UISegmentedControl appearance] setDividerImage:leftSelectedImage
                             forLeftSegmentState:UIControlStateSelected
                               rightSegmentState:UIControlStateNormal
                                      barMetrics:UIBarMetricsDefault];

/* Image between segment selected on the right and unselected on the left */
UIImage *rightSelectedImage = [[UIImage imageNamed:@"segment_middle_right_selected"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)];
[[UISegmentedControl appearance] setDividerImage:rightSelectedImage
                             forLeftSegmentState:UIControlStateNormal
                               rightSegmentState:UIControlStateSelected
                                      barMetrics:UIBarMetricsDefault]; 
```

请注意，您必须调整可拉伸图像中的大写大小以匹配您的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T16:24:01.707

使用工具栏中的分段控件，Maurizio 的回答对我来说不太适用；由于分隔线图像不够宽，它一直在控件上显示这些虚线。

所以我自己做了。以下是 Xcode 所需的所有图像，我还放入了 Photoshop 文件以创建分段控制图像，以便您更改样式：

[https://s3.amazonaws.com/iwasrobbed/stackoverflow/Custom+Segmented+Control.zip](https://s3.amazonaws.com/iwasrobbed/stackoverflow/Custom+Segmented+Control.zip)

将其放入您的 AppDelegate 以使用附加的图像更改工具栏中所有分段控件的外观：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self customizeAppAppearance];
}

- (void)customizeAppAppearance
{
    // Toolbar
    [[UIToolbar appearance] setBackgroundImage:[[UIImage imageNamed:@"toolbar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(22, 5, 22, 5)] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];

    // Segmented Controls within Toolbars

    // Unselected background
    UIImage *unselectedBackgroundImage = [[UIImage imageNamed:@"segmentInactive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 15, 15, 15)];
    [[UISegmentedControl appearanceWhenContainedIn:[UIToolbar class], nil] setBackgroundImage:unselectedBackgroundImage
                                                                                     forState:UIControlStateNormal
                                                                                   barMetrics:UIBarMetricsDefault];

    // Selected background
    UIImage *selectedBackgroundImage = [[UIImage imageNamed:@"segmentActive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 15, 15, 15)];
    [[UISegmentedControl appearanceWhenContainedIn:[UIToolbar class], nil] setBackgroundImage:selectedBackgroundImage
                                                                                     forState:UIControlStateSelected
                                                                                   barMetrics:UIBarMetricsDefault];

    // Image between two unselected segments
    UIImage *bothUnselectedImage = [[UIImage imageNamed:@"segmentBothInactive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 10, 15, 10)];
    [[UISegmentedControl appearanceWhenContainedIn:[UIToolbar class], nil] setDividerImage:bothUnselectedImage
                                                                       forLeftSegmentState:UIControlStateNormal
                                                                         rightSegmentState:UIControlStateNormal
                                                                                barMetrics:UIBarMetricsDefault];

    // Image between segment selected on the left and unselected on the right
    UIImage *leftSelectedImage = [[UIImage imageNamed:@"segmentLeftActiveRightInactive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)];
    [[UISegmentedControl appearanceWhenContainedIn:[UIToolbar class], nil] setDividerImage:leftSelectedImage
                                                                       forLeftSegmentState:UIControlStateSelected
                                                                         rightSegmentState:UIControlStateNormal
                                                                                barMetrics:UIBarMetricsDefault];

    // Image between segment selected on the right and unselected on the left
    UIImage *rightSelectedImage = [[UIImage imageNamed:@"segmentRightActiveLeftInactive.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(15, 0, 15, 0)];
    [[UISegmentedControl appearanceWhenContainedIn:[UIToolbar class], nil] setDividerImage:rightSelectedImage
                                                                       forLeftSegmentState:UIControlStateNormal
                                                                         rightSegmentState:UIControlStateSelected
                                                                                barMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T09:58:24.507

您需要为所有段制作一个背景图像，以及一个仅位于按钮左边缘的图像，一个连接两个按钮的图像，以及一个位于右边缘的图像。其中一些需要为多个州完成。所以这是你的图片列表：

*   左帽，选中
*   左帽，未选中
*   段背景，已选择
*   段背景，未选中
*   右帽，已选
*   右帽，未选中
*   中帽，左选中右未选中
*   中帽，左未选中，右选中
*   中间大写，均已选中
*   中帽，均未选中

对于中间大写字母，您可以像这样放置它们：（Apple 文档中的文本）。

```
// Image between two unselected segments.
[mySegmentedControl setDividerImage:image1 forLeftSegmentState:UIControlStateNormal
              rightSegmentState:UIControlStateNormal barMetrics:barMetrics];
// Image between segment selected on the left and unselected on the right.
[mySegmentedControl setDividerImage:image1 forLeftSegmentState:UIControlStateSelected
              rightSegmentState:UIControlStateNormal barMetrics:barMetrics];
// Image between segment selected on the right and unselected on the right.
[mySegmentedControl setDividerImage:image1 forLeftSegmentState:UIControlStateNormal
              rightSegmentState:UIControlStateSelected barMetrics:barMetrics]; 
```

如果您正在使用`UIAppearance`，显然您会将这些消息发送到外观代理。

# ios - 使用计数/预卷简单记录到节拍器

> ID：10562304
> 
> 赞同：0
> 
> 时间：2012-05-12T08:56:18.600
> 
> 标签：ios, core-audio

我正在尝试设置一个简单的录音应用程序，用户可以在其中将 4 个小节录制到节拍器上。我最初的想法是拥有 2 个音频文件（例如 mp3）并播放第一个（一个 1 小节的预卷，以便用户做好准备），然后当第二个文件开始时，开始录制。问题是音轨 1 和 2 之间存在间隙，因此会关闭节拍器。

有没有人做过类似的事情？我目前正在使用高级 avaudioplayer 和记录器库，但也许我需要做更多的低级编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T19:01:52.753

为了准确计时，请使用未压缩的音频样本、混音器和 RemoteIO 音频单元。

补充：这里是Apple的MixerHost示例应用程序供参考：http: [//developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010210)

# php - 谷歌结帐回调功能不起作用

> ID：10562314
> 
> 赞同：0
> 
> 时间：2012-05-12T08:57:57.087
> 
> 标签：php, payment-gateway, payment, google-checkout, payment-processing

我在谷歌结账时遇到问题。我已经设置了我的 googleCallBack 网址“https://www.mysite.com/orders/googleCallBack”，但它给出了错误

```
We encountered an error trying to access your server at https://www.mysite.com/orders/googleCallBack -- the error we got is java.io.IOException: Error 'SSL_CERTIFICATE_ERROR' connecting to url 'https://https://www.mysite.com/orders/googleCallBack'. 
More documentation for this error. 
```

我检查了我的 goDaddy SSL 证书并进行了验证。但它工作正常，但 googleCheckout 给我一个错误。实际上在 Google Checkout 上成功下单，但在我们网站上回调后没有下订单。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T14:25:25.193

检查您的[SSL 证书安装](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=59779)并确保还安装了任何所需的中间证书 - 我也使用 GoDaddy 并且（至少在 IIS 上）必须安装中间证书。

Google 有他们接受[的证书颁发机构 (CA) 列表](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=134466&from=57856&rd=1)- 即使您可以成功浏览到您的站点，到列出的 CA 的证书链也可能不存在（例如，因为您需要安装中间证书）。

# c# - 生成 c# 对象代码并从 xml 文档为其属性赋值

> ID：10562315
> 
> 赞同：2
> 
> 时间：2012-05-12T08:58:04.433
> 
> 标签：c#, xml, serialization, xml-parsing

我们有一个从模式生成的 xml 文件，这些文件与我们共享，我们需要从 xml 文件生成 c# 代码并设置其属性。我可以创建一个解析器来执行此操作，但正在检查是否有任何 OOB 解决方案。

例如

```
<Customer>
 <fname>tom</fname>
 <lname>jerry</lname>
</Customer> 
```

至

```
 Customer cust=new Customer();
 fname="tom";
 lname="jerry"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:15:54.200

我建议使用 Xslt 创建您想要的代码输出。

这个通用样式表将使用根节点名称作为您的类，并为每个子节点分配其内容：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="no" />

    <xsl:variable name="newline" select="'&#xa;'" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="/node()[1]">
        <xsl:variable name="classname" select="local-name()" />

        <xsl:value-of select="concat($classname, ' cust=new ', $classname, '();', $newline)"/>

        <xsl:for-each select="./*">
            <xsl:value-of select="concat(local-name(), '=&quot;', text(), '&quot;;', $newline)"/>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

当应用于

```
<?xml version="1.0" encoding="utf-8" ?>
<Customer>
    <fname>tom</fname>
    <lname>jerry</lname>
</Customer> 
```

将产生以下输出

```
Customer cust=new Customer();
fname="tom";
lname="jerry"; 
```

# ruby-on-rails - 如何使用 Devise 手动创建用户

> ID：10562317
> 
> 赞同：5
> 
> 时间：2012-05-12T08:58:31.643
> 
> 标签：ruby-on-rails, devise, admin

在我的 Rails 应用程序中，我正在使用设计进行用户注册。现在除了用户注册之外，管理员还应该在后端创建、编辑和删除用户。我在通过该管理后端创建新用户时遇到问题。

当我在浏览器中调用 UsersController#new 操作时，它会打开我创建的用户输入表单。当我单击提交按钮时，会调用 Devise::RegistrationsController#create 但它应该调用我的 UsersController#create 操作。

如何在管理后端使用用户创建时调用 UsersController#create，并在用户使用注册时调用 Devise::RegistrationsController#create？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T14:24:33.473

1）添加路径前缀来设计：`devise_for :users, :path_prefix => 'd'`

2）运行`rake routes`：

```
user_registration POST   /d/users(.:format)   devise/registrations#create
...
users POST   /users(.:format)  users#create 
```

因此，第一条路线为`Devise::RegistrationsController`，第二条路线为您的`UsersController`。

你可以简单地使用`admin/new_user.html.erb`：`form_for User.new`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T13:39:47.477

在米哈伊尔的回答后面，您还可以告诉设计使用任何其他路径名而不是“用户”。例如：

```
devise_for :users, path: 'auth' 
```

将导致设计 /auth/sign_up、/auth/sign_in 等路由。您的自定义用户路由将是安全的。

（可以在[这里](http://www.rubydoc.info/github/plataformatec/devise/ActionDispatch/Routing/Mapper:devise_for)找到 devise_for 选项的完整列表）

# sql - 如何合并窗口内的重叠时间？

> ID：10562321
> 
> 赞同：4
> 
> 时间：2012-05-12T08:58:43.730
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张这样的桌子：

```
CREATE TABLE #TEMP (Name VARCHAR(255), START_TIME datetime, END_TIME datetime);

INSERT INTO #TEMP VALUES('John', '2012-01-01 09:00:01', '2012-01-01 12:00:02')
INSERT INTO #TEMP VALUES('John', '2012-01-01 09:40:01', '2012-01-01 11:00:02')
INSERT INTO #TEMP VALUES('John', '2012-01-02 05:00:01', '2012-01-02 05:15:02')
INSERT INTO #TEMP VALUES('David', '2012-01-04 05:00:01', '2012-01-04 05:15:02')
INSERT INTO #TEMP VALUES('David', '2012-01-05 07:01:01', '2012-01-05 15:15:02')

SELECT *
FROM #TEMP

DROP TABLE #TEMP 
```

数据是：

```
 Name   START_TIME                 END_TIME
1    John   2012-01-01 09:00:01.000    2012-01-01 12:00:02.000
2    John   2012-01-01 09:40:01.000    2012-01-01 11:00:02.000
3    John   2012-01-02 05:00:01.000    2012-01-02 05:15:02.000
4    David  2012-01-04 05:00:01.000    2012-01-04 05:15:02.000
5    David  2012-01-05 07:01:01.000    2012-01-05 08:15:02.000 
```

给定一个数字，比如 6，我试图`GROUP BY`在这张表上做一个并合并在前后 6 小时的窗口内重叠的时间。因此，在上表中，行`1`和`2`将合并为一行，因为它们包含重叠的时间范围：

```
John 2012-01-01 06:00:01.000 2012-01-01 18:00:02.000 
```

行`4`和`5`将被合并，因为减去 6 小时`07:01:01.000`落入行的窗口`4`。

在包含大约一百万行的大表上是否有这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T14:24:59.183

我认为最好的方法是创建一个`windows`表并将 #temp 表与这个新的窗口表连接：

1）步骤1，准备所有可能的窗口间隙的窗口表（包含重叠窗口）：

```
 SELECT 
      Name,
      dateadd(hour, -6, start_time) as start_w, 
      dateadd(hour, +6, start_time) as end_w
   into #possible_windows
   FROM #TEMP 
```

2）在临时表上创建索引以提高性能

```
 create index pw_idx on #possible_windows ( Name, start_w) 
```

3) 消除自连接选择中的重叠窗口。这是创建索引的原因：

```
 select p2.* 
   into #myWindows
   from #possible_windows p1
   right outer join #possible_windows p2
     on p1.name = p2.name and 
        p2.start_w > p1.start_W and p2.start_w <= p1.end_w
   where p1.name is null 
```

4) 使用#myWindows 加入您的表或直接使用它。

**在职的：**

```
SELECT 
  Name,
  dateadd(hour, -6, start_time) as start_w, 
  dateadd(hour, +6, start_time) as end_w,
  ROW_NUMBER() over(partition by Name order by Name, 
                    dateadd(hour, -6, start_time) ) as rn
into #possible_windows
FROM #TEMP 

create index pw_idx on #possible_windows ( Name, start_w)

select p2.* 
from #possible_windows p1
right outer join #possible_windows p2
  on p1.name = p2.name and 
     p2.start_w > p1.start_W and p2.start_w <= p1.end_w
where p1.name is null 
```

**结果：**

```
Name  start_w       end_w         rn 
----- ------------- ------------- -- 
David 2012-01-03 23:00:012012-01-04 11:00:011  
David 2012-01-05 01:01:012012-01-05 13:01:012  
John  2012-01-01 03:00:012012-01-01 15:00:011  
John  2012-01-01 23:00:012012-01-02 11:00:013 
```

PE：请回去进行性能测试！

# java - 检测用户是否在启动器上

> ID：10562329
> 
> 赞同：1
> 
> 时间：2012-05-12T08:59:18.940
> 
> 标签：java, android

如果用户在启动器上（他没有使用其他应用程序或没有打开其他活动），是否可以以编程方式理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:12:59.863

有可能。您可以使用此链接提供的解决方案：

[从后台任务或服务中确定当前的前台应用程序](https://stackoverflow.com/questions/2166961/determining-the-current-foreground-application-from-a-background-task-or-service)

如果fourground 应用程序对启动器进行了equels - 那么你知道它是fourground 的启动器

# javascript - 如何设置 foreach jQuery JSON CSV

> ID：10562330
> 
> 赞同：1
> 
> 时间：2012-05-12T08:59:18.863
> 
> 标签：javascript, json, jquery, foreach

我有一个 jquery ajax 请求如下；

```
$.ajax({
        type: 'POST',
        url: 'ajax.php',
        dataType: 'json',
        cache: false,
        success: function(result) {
        alert (result);
        },
}); 
```

返回`result`的是 JSON。为了查看数据，我提醒了它，如下所示；

```
img1.jpg,img2.jpg,img3.jpg,img4.jpg 
```

php文件如下；

```
<?php
$array = array("img1.jpg","img2.jpg","img3.jpg","img4.jpg");
echo json_encode($array);
?> 
```

它回响；

```
["img1.jpg","img2.jpg","img3.jpg","img4.jpg"] 
```

我想提醒`filename`每个文件名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:02:11.597

JSON 不是 CSV。这应该是一个错误。如果您正在接收 CSV，请不要说`dataType: 'json'`，将其作为文本接收，然后自己解析：

```
var fields = result.split('/');
$.each(fields, function(fieldNo, field) {
  alert(field);
}); 
```

如果是 JSON，请编辑您的问题并澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:06:02.377

```
$.ajax({
        type: 'POST',
        url: 'ajax.php',
        dataType: 'text',
        cache: false,
        success: function(result) {
            var filenames = result.split(',');
            for(i=0;i<filenames.length;i++)
            {
               alert(filenames[i]);
            }
       },
}); 
```

JSON版本

```
$.ajax({
            type: 'POST',
            url: 'ajax.php',
            dataType: 'json',
            cache: false,
            success: function(result) {
                $.each(result, function(key,val){
                     alert(val);
                });
           },
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:04:12.773

```
$.ajax({
        type: 'POST',
        url: 'ajax.php',
        dataType: 'json',
        cache: false,
        success: function(result) {
            $.each(result,function(keu,value){
                alert(value);
            });
        },
}); 
```

# ios - AudioQueue 修剪和缓冲区大小

> ID：10562332
> 
> 赞同：7
> 
> 时间：2012-05-12T08:59:21.827
> 
> 标签：ios, avfoundation, avaudioplayer

尽管应用程序按预期工作，但我在控制台中收到一条消息，我想更详细地了解它。

设置如下。创建一个 AVAudioPlayer 并加载一个 .m4a 文件（长度为 03:22，大小为 618 KB）。该文件的比特率为 23 kbps。我意识到比特率非常低，但这对于应用程序来说是可以接受的。

每当我调整音频播放器的 currentTime 属性时，我都会将以下消息记录到控制台。

> AudioQueue：请求从包含 1024 帧的缓冲区中修剪 2112 + 0 = 2112 帧

设置 currentTime 属性的结果符合预期，但我想知道这条消息的确切含义以及我能做些什么来防止它出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T15:31:56.663

为我工作：在设置其 currentTime 属性之前停止播放器。然后设置 currentTime，prepareToPlay 并播放。

```
[avAudioPlayer stop];
[avAudioPlayer setCurrentTime:newCurrentTime];
[avAudioPlayer prepareToPlay];
[avAudioPlayer play]; 
```

来源：[http ://eureka.ykyuen.info/2010/06/10/iphone-add-an-uislider-for-avaudioplayer/](http://eureka.ykyuen.info/2010/06/10/iphone-add-an-uislider-for-avaudioplayer/)

# xcode - Mac 应用程序兼容性（Snow Leopard/Lion）

> ID：10562334
> 
> 赞同：0
> 
> 时间：2012-05-12T08:59:50.377
> 
> 标签：xcode, macos, cocoa

我正在开发一个 Mac 应用程序（使用 Xcode 4.2）。我在测试期间的观察是它在 Snow Leopard 上正常工作，但很少有按钮/功能在 Lion 上没有显示预期的结果。

这是为什么？我需要升级 Xcode 还是需要包含一些库？任何形式的帮助都会很有用，因为我是 Mac 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:12:06.687

更改部署目标。这标识了您的软件可以运行的最早的操作系统版本。默认情况下，Xcode 将此设置为与基本 SDK 版本及更高版本对应的操作系统版本。您可以在项目设置摘要屏幕或项目设置配置设置中更改它。
查看[SDK 兼容性指南](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/cross_development/Configuring/configuring.html)。

# c# - 如何在 C# 中创建打印队列并将表单添加到队列中？

> ID：10562339
> 
> 赞同：1
> 
> 时间：2012-05-12T09:00:14.903
> 
> 标签：c#, .net, printing

我想开发一个允许用户写和打印支票的应用程序。用户应该能够一一创建最多 5 个检查，并在创建一个检查后添加到队列中。检查将创建填充 Windows 窗体。quea 中当前支票的记录应显示在表单中，并通过选择首选用户可以打印支票有人可以告诉我如何将 Windows 表单添加到队列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:13:05.330

不要将表单添加到队列中。

创建一个用户填写数据的输入表单，然后将该数据放入结构/类中。然后可以将该结构放入队列中。如果用户稍后想要编辑它，您可以使用该结构中的数据重新填充表单，并在完成后将其保存回来。

# java - Java中的多项式微积分库？

> ID：10562345
> 
> 赞同：4
> 
> 时间：2012-05-12T09:01:24.193
> 
> 标签：java, math, interpolation, polynomial-math, calculus

是否有任何（最好是开源的）Java 库允许使用多项式进行微积分，例如加法、乘法、除以常数等？

此外，如果它能够使用拉格朗日多项式插值在多项式中插值多个 2D 点，那将是一个加分项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T09:06:41.863

您可能想看看[Apache Commons 数学库](http://commons.apache.org/math/index.html)。

[多项式使用PolynomialFunction](http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/analysis/polynomials/PolynomialFunction.html)处理，您可以使用[PolynomialFunctionLagrangeForm进行拉格朗日插值](http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/analysis/polynomials/PolynomialFunctionLagrangeForm.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-08T12:35:28.090

如果有人对 Java 中更类似于 CAS 的多项式方法感兴趣，可能会感兴趣以下库：

**Java 代数系统 (JAS) 项目**
[http://krum.rz.uni-mannheim.de/jas/](http://krum.rz.uni-mannheim.de/jas/)

# java - Eclipse - 如何调试输入参数更改

> ID：10562347
> 
> 赞同：2
> 
> 时间：2012-05-12T09:01:42.010
> 
> 标签：java, eclipse, debugging

我有以下问题，我们甚至可以称之为经典问题：

```
public void myMethod(Map<Object, Object> parameter){

    someOtherObject.method(parameter);
    .
    .
    .
    someOtherThirdPartyObject.method(parameter);

} 
```

突然间，最后有些方法触及了输入参数Map，我不知道在哪里以及如何。现在，我知道使参数不可变是可取的，但事实并非如此，这就是问题的根源。例如，myMethod 中的方法旨在执行一些验证，但它们也执行更多操作，这在设计上是错误的。

那么，问题是如何在这个方法中创建一个断点，如果这个参数 Map 的一个属性发生变化，执行就会暂停？在每个方法调用之后放置一个条件断点可能是一个好主意，但是如果你有 20 多个方法，那就相当痛苦了。

当这个输入参数发生变化时，我该如何调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:17:16.740

你想要的似乎被称为“观察点”。我实际上并不知道这个功能的存在，而且我曾经在 Eclipse 项目上工作过！

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_add_watch.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Ftasks%2Fcdt_t_add_watch.htm)

看起来您必须弄清楚正在编辑哪些字段，然后使用上面的帮助文档设置“写入”观察点。

此外，Eclipse 会突出显示已修改的变量，因此如果您逐个遍历方法调用，您将能够看到哪个正在修改值（以及正在修改哪个字段），因为它将突出显示（亮黄色，由默认）在“调试”透视图的“变量”选项卡中。一旦你知道修改数据的方法是什么，你就可以再次运行调试，但这一次调试改变值的方法，并不断重复，直到你发现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:17:25.987

这是一个经典的问题解决方案，您从一个非常大的搜索空间开始，然后系统地和方法地缩小搜索空间，直到搜索空间小到足以让您找到问题。

如果您试图定位您的地图被错误修改的位置，您可能希望首先从 myMethod 的更高级别开始。在 myMethod 方法中调用的方法周围放置断点。在每个断点处，查看 Map 的内容。Eclipse 有一个变量监视面板，您可以在其中查看每个变量在特定时刻的内容。

当您到达发现有问题的断点时。停止。您现在知道如何`someOtherObject.method(parameter);`假设数据在其断点处发生更改。

现在， someotherObject.method 中可能会有其他方法。将断点放在此方法中，围绕它的所有函数调用并重复该过程。继续重复，直到没有更多的方法。最终，您将缩小问题范围并获得答案。

不幸的是，对于这些类型的问题，没有神奇的“修复我的代码”按钮。只需要良好的、老式的福尔摩斯式的调查技巧和推理来消除你知道不是问题的代码区域，直到你留下一个更小的部分来让你找到根本原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:44:19.893

如果不允许修改代码，则可以

*   使用 acattle 描述的 watchpoints 方法来观察这个特定地图实例的变化，或者
*   在 Map 方法中有断点来修改其状态（如果您想为多个实例执行此操作）。Map代码只是二进制无关紧要，您仍然可以使用Ctrl-Shift-T（打开类型）打开它，在大纲视图中选择put（...）或remove（...）等方法，然后使用大纲视图中的上下文菜单添加断点。

# javascript - 怎么做才能点击显示内容部分？

> ID：10562351
> 
> 赞同：0
> 
> 时间：2012-05-12T09:02:33.603
> 
> 标签：javascript, css

[http://phplist.xxmn.com/menu.html](http://phplist.xxmn.com/menu.html)

当鼠标悬停在导航 ( `cpanel`) 上时。它显示了它下面的相应内容。但我无法单击其中的链接。有没有办法得到它。我知道它将使用 setTimeout。但我不知道该怎么做。谢谢你。

当我更改`top`值 small.but 在 IE7 和 IE6 下。我仍然无法单击显示内容中的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:09:58.853

不是好方法，但对你有用，更好的方法：使用 css `top = 20px`：

```
var timeout;

$(function(){ // = document.ready
    $("#nav ul li").hover(function() {
        $(this).find(".sub-menu").show();
        clearTimeout(timeout);
    }, function() {

        var timeout = setTimeout(function(){
            $(this).find(".sub-menu").hide();
        },1000); // 1000 = 1 second
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:08:30.050

您应该将内容 div 放在更靠近、更好的菜单元素旁边，并更改它的出现和消失方式。在菜单`mouseover`上显示它，在内容上`mouseout`隐藏它。我认为这将是最简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:13:08.013

```
$(document).ready(function () {    
    $("#nav ul li").on('mouseenter', function () {
        $('#nav ul li').find(".sub-menu").hide();
        $(this).find(".sub-menu").show();
    });

    $('.sub-menu').on('mouseleave click', function () {
        $(this).hide();
    });
}); 
```

# excel - Excel公式（不是VBA）来计算文件路径的基本名称？

> ID：10562357
> 
> 赞同：5
> 
> 时间：2012-05-12T09:03:27.487
> 
> 标签：excel, excel-formula

是否可以在不定义自定义 VBA 函数的情况下确定基本名称，即 Excel 中文件路径的最后一个路径组件？

例如，如果单元格`A1`具有值

```
C:\Some\deep\directory\structure\file.txt 
```

中的公式`B1`应该`A1`用来返回

```
file.txt 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T09:14:00.503

```
=RIGHT(A1,LEN(A1)-FIND("|",SUBSTITUTE(A1,"\","|",LEN(A1)-LEN(SUBSTITUTE(A1,"\",""))))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-12T12:04:49.790

要在最后一个反斜杠之后获取所有内容，请尝试此公式

`=REPLACE(A1,1,LOOKUP(2^15,FIND("\",A1,ROW(INDIRECT("1:"&LEN(A1))))),"")`

# linq - Linq-to-SQL DataContext 更新

> ID：10562359
> 
> 赞同：2
> 
> 时间：2012-05-12T09:04:02.767
> 
> 标签：linq, linq-to-sql, datacontext

我得到这个运行时异常

> 无法将“System.Data.SqlTypes.SqlDecimal”类型的对象转换为“System.String”类型。

如何修复我的代码以获得我的结果而没有例外？

```
ProductsDataContext db = new ProductsDataContext(); 

var matchedproduct = db.GetTable<product>().SingleOrDefault(p =>p.ProductID==productID);

if (matchedproduct != null)               
   product.ProductName = txtpname.Text;

db.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:11:01.900

如果您没有收到编译时错误，那是因为您的 dbml 没有准确地描述数据库中的列。您的对象认为它是一个字符串，但它显然是数据库中的一个小数。您应该在 dbml 编辑器中更新它。然后，当您设置产品名称时，您将不得不从文本中解析出十进制值。

# ios - 奇怪的 NSLog 错误。内存泄漏

> ID：10562366
> 
> 赞同：0
> 
> 时间：2012-05-12T09:05:55.550
> 
> 标签：ios, xcode, memory-leaks, nslog

当我运行我的应用程序输出时，我会看到很多这样的字符串：

```
2012-05-12 14:41:52.542 PermTour[1688:15c0b] *** __NSAutoreleaseNoPool(): Object 0x5c39520 of class NSCFString autoreleased with no pool in place - just leaking 
```

而且我知道这部分代码中的问题。因为，当我评论它时，输出是空的。

```
 for(int i=0;i<[dataBase.allDataBase count];i++){
        aPLace = [dataBase.allDataBase objectAtIndex:i];
        name = [aPLace.name lowercaseString];
        description = [aPLace.description lowercaseString];
        if (!([name rangeOfString:searchText].location == NSNotFound) || !([description rangeOfString:searchText].location == NSNotFound)){
            [foundedPlaces addObject:aPLace];
        }

    } 
```

有任何想法吗？谢谢

UPD。

当我评论所有代码时，它看起来像：

```
for(int i=0;i<[dataBase.allDataBase count];i++){
        aPLace = [dataBase.allDataBase objectAtIndex:i];
        name = [aPLace.name lowercaseString];
        //description = [aPLace.description lowercaseString];
        /*
        if (!([name rangeOfString:searchText].location == NSNotFound) || !([description rangeOfString:searchText].location == NSNotFound)){
            [foundedPlaces addObject:aPLace];
        }
         */

    } 
```

仍然内存泄漏.. 那么你现在想写什么？

更新 2 ![在此处输入图像描述](../Images/10cd1073627b0059e410f76142632ea1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:10:34.797

当您处理大量数据（内存）时，最好使用`NSAutoreleasePool`.

编辑 -

```
-(returnType)yourMethod:(returnType)parameter @autoreleasepool
{
    @autoreleasepool
    {
         //method body.
    }
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:19:54.283

我已经看到这个错误消息是类初始化方法（例如`+initialize`，`+load`或其他自定义方法）。

我的解决方案是简单地创建一个自动释放池，如下所示：

```
@autoreleasepool
{
     initThis();
     [That init];
} 
```

该`@autoreleasepool`关键字可用于具有相似语义的 ARC 和非 ARC 项目。

这是关于此事的[小字：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html)

> NSApplication 类在初始化期间和事件循环内部——特别是在其初始化（或 sharedApplication）和运行方法中设置自动释放池（NSAutoreleasePool 类的实例）。类似地，Application Kit 添加到 NSBundle 的方法在加载 nib 文件期间使用自动释放池。这些自动释放池不能在各自的 NSApplication 和 NSBundle 方法的范围之外访问。通常，应用程序要么在事件循环运行时创建对象，要么通过从 ni​​b 文件加载对象来创建对象，因此这种缺乏访问权限通常不是问题。**但是，如果您确实需要在 main() 函数本身中使用 Cocoa 类（除了加载 nib 文件或实例化 NSApplication），您应该在使用这些类之前创建一个自动释放池，然后在完成后释放该池.** 有关更多信息，请参阅 Foundation Framework Reference 中的 NSAutoreleasePool。

# sql-server - 如何使用 SQL 将一个查询的输出作为输入传递给另一个查询

> ID：10562374
> 
> 赞同：0
> 
> 时间：2012-05-12T09:06:21.640
> 
> 标签：sql-server, stored-procedures

如果我能得到任何帮助，我真的很感激

我有一个 sql 查询，即 query1，它显示未登录到我们的应用程序的用户列表，另一个查询“query2”使用查询 1 的输出并禁用这些用户。到目前为止，我不得不单独手动运行这两个查询，但现在我必须自动化这个过程。

我的问题是如何在不进行任何手动操作的情况下将 query1 的输出作为输入传递给 query2。我做了一些研究，发现这可以使用过程来完成，我也需要创建游标。如果这是真的，请让我知道如何进一步进行的步骤

我在我们的应用程序的后端有 Oracle 数据库。我们使用 SQL 来检索数据

谢谢胜利者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:37:23.977

我不是甲骨文的人，但这应该可行：

```
update tbl1
set IsEnabled = 1
where UserId in (select UserId from tbl2 where IsLoggedIn = 0) 
```

# android - 加速度传感器和媒体播放器

> ID：10562378
> 
> 赞同：0
> 
> 时间：2012-05-12T09:07:22.067
> 
> 标签：android, android-layout, android-intent

在您的帮助和互联网上的一些指南下，我设法敲掉了这段代码。但是我发现自己有几个问题，应用程序，根据我的想法，它应该在手机摇晃的时候启动媒体播放器，并启动一次，但现在每次手机摇晃都会启动媒体播放器。此外，我希望，当手机摇晃时，应用程序可以工作并且屏幕关闭，启动媒体播放器并打开屏幕

```
public class SensorTestActivity extends Activity implements SensorEventListener {
private SensorManager sensorManager;
private boolean color = false;
private View view;
private long lastUpdate;
MediaPlayer mMediaPlayer;

@Override
public void onCreate(Bundle savedInstanceState) {
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
WindowManager.LayoutParams.FLAG_FULLSCREEN);
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
view = findViewById(R.id.textView);
view.setBackgroundColor(Color.BLUE);
sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
sensorManager.registerListener(this,
sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
SensorManager.SENSOR_DELAY_NORMAL);
lastUpdate = System.currentTimeMillis();
}

@Override
public void onSensorChanged(SensorEvent event) {
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
getAccelerometer(event);
}
}
private void getAccelerometer(SensorEvent event) {
float[] values = event.values;
// Movement
float x = values[0];
float y = values[1];
float z = values[2];

float accelationSquareRoot = (x * x + y * y + z * z)/(SensorManager.GRAVITY_EARTH *    SensorManager.GRAVITY_EARTH);
long actualTime = System.currentTimeMillis();
if (accelationSquareRoot >= 2) //
{
if (actualTime - lastUpdate < 200) {
return;
}
lastUpdate = actualTime;
Toast.makeText(this, "Device was shuffed", Toast.LENGTH_SHORT).show();
if (color) {
view.setBackgroundColor(Color.GREEN);

try { 

mMediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.mymusic);

mMediaPlayer.setLooping(false);
mMediaPlayer.start();
mMediaPlayer.setOnCompletionListener(new
OnCompletionListener() {
public void onCompletion(MediaPlayer arg0) {
// if (mMediaPlayer != null) {
// mMediaPlayer.release();
// mMediaPlayer = null;
// }
}
});
} catch (Exception e) {
if (mMediaPlayer != null) {
mMediaPlayer.release();
mMediaPlayer = null;
}
}                   
}
} else {
view.setBackgroundColor(Color.RED);
}
color = !color;
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
}

@Override
protected void onResume() {
super.onResume();
// register this class as a listener for the orientation and
// accelerometer sensors
sensorManager.registerListener(this,
sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
protected void onPause() {
// unregister listener
super.onPause();
sensorManager.unregisterListener(this);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:13:08.070

要仅启动一次，请添加一个布尔值。

```
boolean startOnce = true;

if (startOnce) {
 ....
 startOnce = false;
} 
```

# python - HTML 抓取：遍历嵌套目录

> ID：10562380
> 
> 赞同：0
> 
> 时间：2012-05-12T09:07:45.630
> 
> 标签：python, html, iteration, web-scraping

我需要抓取一个具有基本文件夹系统的网站，其中的文件夹标有关键字 - 一些文件夹包含文本文件。我需要扫描所有页面（文件夹）并检查指向新文件夹的链接，记录关键字和文件。我的主要问题更抽象：如果有一个包含嵌套文件夹和未知“深度”的目录，那么迭代所有这些文件夹的最pythonc 方式是什么。[如果知道“深度”，那将是一个非常简单的 for 循环）。想法非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:09:28.173

递归通常是最简单的方法。

但是，如果有人创建一个带有指向自身或父级的符号链接的目录，则可能会在一段时间后给您一个 StackOverflowError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T09:34:08.230

这是一个简单的蜘蛛算法。它使用一个[双端队列](http://docs.python.org/library/collections.html#collections.deque)来处理要处理的文档和一组已处理的文档：

```
active = deque()
seen = set()

active.append(first document)

while active is not empty:
    document = active.popleft()
    if document in seen:
        continue

    # do stuff with the document -- e.g. index keywords

    seen.add(document)
    for each link in the document:
         active.append(link) 
```

请注意，这是迭代的，因此可以与任意深度树一起使用。

# mysql - 如何通过用户在批处理文件中输入在mysql连接中输入用户名、密码、数据库名

> ID：10562383
> 
> 赞同：0
> 
> 时间：2012-05-12T09:08:24.677
> 
> 标签：mysql, sql, windows, batch-file

嗨，我正在使用代码将`sql`文件添加到我`database`的`batch`文件中。有用 。

我的代码

```
C:
cd\xampp\mysql\bin
mysql -u root -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db.sql" kani 
```

情况是我想获取用户输入值和名称`user name`，而不是硬编码这些值。`password``database`

目前我的用户名硬编码为`root`

我想做这样的

用户应该收到一条消息

```
please enter your user name : 
```

当我这样做的时候

```
 please enter your password : 
```

之后

```
 please enter your database name : 
```

然后剧本喊继续。如何做到这一点，请帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:13:37.047

`set`与`/P`选项一起使用：

```
@echo 关闭
set /p username=请输入您的用户名：
set /P pwd=请输入您的密码：
set /p dbname=请输入您的数据库名称：

cd /dc:\xampp\mysql\bin
mysql -u%username% -p%pwd% -e "source C:\xampp\htdocs\internet_wk_1.7\db\master_db.sql" %dbname%

```

如果您`help set`在命令行窗口中输入，您将获得更多详细信息。

# css - 用于在 div 内格式化文本的 CSS 不起作用

> ID：10562386
> 
> 赞同：0
> 
> 时间：2012-05-12T09:08:35.107
> 
> 标签：css, tinymce

我的网站用户正在使用 TinyMCE 编辑器编写内容，并在完成编写内容后将其保存到我的数据库中。然后我从数据库中获取这些文章并使用以下代码显示它：

```
<h2><?php echo $records ['article_title']; ?></h2>

 <div style="text-align:justify; font-size:12px;">
         <?php echo $records ['article_content']; ?>
   </div> 
```

如果我的用户使用字体大小或格式文本，我在 div 中的 CSS 不起作用。例如; 如果任何用户使用 14px 字体大小并将文章的 text-align 设置为 right ，`style="text-align:justify; font-size:12px;`则 div 内的代码不起作用。

我不想以超过 12px 的字体大小显示内容；

你能告诉我怎么做吗？

谢谢 ：）

## 编辑

在我的 CSS 文件中，我添加了以下代码：

```
 .textformat{
             text-align:justify !important; 
             font-size:12px !important;
        } 
```

然后在我的视图文件中：

```
 <div class="textformat">
         <?php echo $records ['article_content']; ?>
      </div> 
```

但它仍然不起作用，请给我一些其他建议。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:24:04.220

样式表是[级联](https://stackoverflow.com/questions/1043001/what-is-the-meaning-of-cascading-in-css)的，这意味着将应用更具体的样式。中的样式`article_content`将比您的 div 上的样式更具体，因此将被应用。对此没有“解决方案”，因为这是预期的行为。

不过至少有两种方法：

1.  使用`!important`你的样式来推翻 CSS 的级联性质。请注意，这[通常是不好的做法](https://stackoverflow.com/questions/3706819/what-are-the-implications-of-using-important-in-css)，应尽可能避免。
2.  虽然我不确定 TinyMCE 是否可行，但也许您可以限制用户创建大于特定大小的字体的能力（或者可能完全禁用更改用户的字体大小）。也许[可以`font_size_style_values`](http://www.tinymce.com/wiki.php/Configuration:font_size_style_values)帮助你？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:21:04.020

如果这是您始终希望 css 在用户可编辑区域内的方式，`style="text-align:justify; font-size:12px;`则将其`style="text-align:justify !important; font-size:12px !important;`放入您的 css 文件中。这将取代 TinyMCE 输出的内联样式。

我确定您可以进入 TinyMCE 后端并更改设置，但这是一个快速修复。

# phpexcel - 在 phpExcel 中使用 getCalculatedValue() 的异常

> ID：10562388
> 
> 赞同：1
> 
> 时间：2012-05-12T09:08:43.560
> 
> 标签：phpexcel

这些是我得到的例外：

我收到以下异常：

带有消息“公式中的循环引用”的未捕获异常“异常”

我正在处理一个包含非常复杂计算的 excel 表。我不能把它们都写在这里。我正在使用一个接口将值发送到该 Excel 工作表的特定单元格。然后从输出单元格中取回计算值。

使用 getOldCalculatedValue() 第一次获得正确的值我使用它（我不知道如何）

getOldCalculatedValue() 的问题在于这不是解决方案。当我更新我的输入值时，输出值也不会改变。

现在我深入检查了..这些是产生异常的公式：

致命错误：未捕获的异常 'Exception' 带有消息 'STEAM!B30 -> STEAM!E57 -> STEAM!B56 -> STEAM!B38 -> STEAM!B89 -> 内部错误'

B30:=IF(G32=1,IF(E570,D55<>0),IF(G32=1,IF(E57

E57: ==IF(B44

B56:=B38*SQRT(IF(E44=1,B52,1^(3/4)*B53^(1/4)*B52/E43^(3/4)/E44^(1/4))/ E43)

B38: =VLOOKUP(B70,图表,2)

B89: ==HLOOKUP($E$4,WLC2CV,VLOOKUP($B$4,WLC2CV,15))

当我通过为其分配旧的计算值来处理异常时，会生成警告。

警告 (2)：sqrt() 期望参数 1 为双精度，字符串给定 [APP\vendors\Classes\PHPExcel\Calculation.php，第 3324 行]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:03:24.950

循环公式类似于（例如）单元格 A1 包含公式 =B1+1 而单元格 B1 包含 =A1+1，即。执行公式会导致一连串的计算循环回自身

这在 Excel 中可能有效，但默认行为是在遇到错误消息时生成错误消息。但是，您可以更改此行为，以便 Excel 将通过指定数量的循环或迭代来处理公式。

PHPExcel 支持这两种行为：默认是生成错误消息，就像 Excel 一样。但是，如果将计算引擎的 $cyclicFormulaCount 属性设置为大于 0 的值，它将模拟 Excel 可以表现出的第二种行为。在最简单的级别

```
PHPExcel_Calculation::getInstance()->cyclicFormulaCount = 1 
```

将抑制循环错误并允许执行基本的循环计算，将 $cyclicFormulaCount 设置为更高的值将允许通过多个循环或迭代计算公式（到您指定的值）。

getOldCalculatedValue() 方法检索最后一次由 MS Excel 本身执行的计算结果。这可能是正确的，但不能保证（例如，如果公式计算已在 excel 本身中被抑制）。

# c# - 我不太了解 Page.FindControl

> ID：10562389
> 
> 赞同：1
> 
> 时间：2012-05-12T09:08:45.430
> 
> 标签：c#, asp.net, controls

我有这样的图像：

```
<asp:Image runat="server" ID="btnabout1" ImageUrl="~/graphics/buttons/btnabout1.png" AlternateText="About" /> 
```

我可以像这样（显然）从代码隐藏访问控件：

```
btnabout1.Visible = false; 
```

但这不起作用：

```
Page.FindControl("btnabout1").Visible = false; 
```

关键是使用变量 controlID 并设置属性。

我想我对方法的理解有误，请有人赐教。

* * *

目的是创建一个方法，该方法采用当前页面的文件名并相应地设置图像/按钮可见/不可见。像这样：

```
string filename = System.IO.Path.GetFileName(HttpContext.Current.Request.FilePath);
string strippedfilename = filename.Substring(0, filename.IndexOf("."));
Page.FindControl("btn" + strippedfilename + "3").Visible = true;
Page.FindControl("btn" + strippedfilename + "2").Visible = false;
Page.FindControl("btn" + strippedfilename + "1").Visible = false; 
```

由于我无法让 Page.FindControl 工作，我正在使用

```
Dictionary<string, Control[]> 
```

相反，但当然它不是动态的，因为添加新页面意味着必须添加到字典中，但我想现在还可以......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:24:03.480

使用如下方法

```
Button btnAbout=(Button)Page.FindControl("btnAbout");
btnAbout.Visible=false; 
```

这是使用此方法的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:20:55.937

您正在使用的重载[`FindControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)只查看直接子控件 - 如果它嵌套得更深，则不会找到该控件。

还有另一个重载可以让您提供函数应该经过多少级嵌套 - 这可以让您更深入地挖掘（以成本为代价 - 性能）。

由于您可以简单地做`btnabout1.Visible = false;`，因此无需`FindControl`在这种情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:21:07.933

首先，我认为 FindControl 方法不是递归的。要使用此方法，您可能需要通过所有父控件（如面板或其他控件）调用它。

如果您使用的是母版页，请尝试使用：

```
ContentPlaceHolder h = (ContentPlaceHolder)this.Master.FindControl("ContentPlaceHolderName");
h.FindControl(""); 
```

# php - 如何为每个 PHP 循环创建一个从表数据中设置变量的循环

> ID：10562390
> 
> 赞同：0
> 
> 时间：2012-05-12T09:09:04.017
> 
> 标签：php, forms

PHP 初学者：

我有一个基于表格数据的表单，用户也可以添加任意数量的行，目前我正在调用 .php 中的数据，例如：

```
$para01 = $_POST["1_0"];
$url01 = $_POST["1_1"];
$para02 = $_POST["2_0"];
$url02 = $_POST["2_1"]; 
```

等等

我想要一种调用表格数据的方法，这样我就可以满足 x 行的需求

所以，我的伪代码是：

*   对于每一行，将单元格 id 0 应用于 $url 并将 id 1 应用于 $para
*   然后在一些 html 中回显 url 和 para
*   重复直到所有行都被表达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:17:20.053

您应该将 url 和 para 设为（二维）数组。然后，使用二维 for 循环遍历 _POST[] 变量。将值添加到数组中，并在必要时打印它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:33:30.290

你应该使用数组！一个简单的方法是调用所有的 post 变量，然后用 php 对它们进行排序......

假设表单输入字段如下所示，我非常快地为您完成了它：

formstart url1 para1 url2 para2 url3 para3 等等...

提交最终形式

```
$i=1;
$urls = array();
$paras = array();
foreach($_POST as $variable){
    if($i==1){
        array_push($urls,$variable);
        $i++;
    }else{
        array_push($paras,$variable);
        $i=1;
    }
}
echo'<table><tr><td>';
foreach($urls as $url){
    echo $url.'<br />';
}
echo'</td><td>';
foreach($paras as $para){
    echo $para.'<br />';
}
echo'</td></tr></table>'; 
```

编辑

你会像这样配对它们......

```
 $_POST = array('url1','paragraph1','url2','paragraph2','url3','paragraph3');
$urls = array();
$paras = array();
$i=1;
$c=0;
foreach($_POST as $variable){
    if($i==1){
        array_push($urls,$variable);
        $i++;
    }else{
        array_push($paras,$variable);
        $i=1;
     $c++;
    }
}

echo'<table>';
for($x=0;$x<$c;$x++){
   echo'<tr><td>'.$urls[$x].'</td><td>'.$paras[$x].'</td></tr>';
}
echo'</table>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:38:10.983

是的，您可以将其用作数组。就像，

```
<input type="text" name="para[]" />
<input type="text" name="url[]" />

<input type="text" name="para[]" />
<input type="text" name="url[]" />

<input type="text" name="para[]" />
<input type="text" name="url[]" /> 
```

而在php中，你可以使用like

```
<?php
foreach($_POST[para] as $key=>$val)
{
}

foreach($_POST[url] as $key=>$val)
{
}
?> 
```

# vba - 使用兑换为任务创建自定义字段

> ID：10562393
> 
> 赞同：0
> 
> 时间：2012-05-12T09:09:16.003
> 
> 标签：vba, outlook, outlook-addin, mapi, outlook-redemption

我必须创建一个包含自定义字段的任务（p.1，p.2..like）。我必须创建一个包含文本框、按钮等属性的表单。如何在 C# 编程中使用 Redemption dll 创建这样的任务？

谢谢，谢莱什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:16:19.007

一次性表单将其数据存储在一个特殊的命名属性中——您可以在 OutlookSpy 中看到它（单击 IMessage）。如果表单是静态的（即您不需要在每个项目的基础上动态添加/删除控件），您可以设计一次表单，使用[OutlookSpy](http://www.dimastr.com/outspy)提取 blob ，将其存储在资源/文件/等中，然后只需在运行时在任何项目上使用 RDOMail.Fields[] 设置它。

# sql-server - SQL Server 链接服务器丢失登录映射

> ID：10562394
> 
> 赞同：1
> 
> 时间：2012-05-12T09:09:17.097
> 
> 标签：sql-server, odbc, linked-server

我有两台SQL Server机器，服务器A和服务器B。服务器A上有一个存储过程（sp_A），它需要从服务器B读取数据，所以我在服务器A上为服务器B创建了一个链接服务器。到目前为止，一切都好。

现在我有一个应用程序需要使用服务器 A 的数据，并且它使用 ODBC 日期源，所以我为服务器 A 创建了一个 odbc DSN。当此应用程序调用 sp_A 时，出现此错误：

> 拒绝访问远程服务器，因为不存在登录映射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:28:57.117

在链接服务器属性中（在*安全*选项卡上），您可以为本地服务器登录中未定义的登录指定替代登录。

指定您用于 ODBC DSN 的登录名。

# r - 在 rms 包中具有交互作用的线性回归失败

> ID：10562398
> 
> 赞同：1
> 
> 时间：2012-05-12T09:10:03.133
> 
> 标签：r, linear-regression

我正在玩公式中的交互。我想知道是否可以对两个虚拟变量之一进行交互回归。这似乎适用于使用 lm() 函数的常规线性回归，但使用 rms 包中的 ols() 函数，相同的公式会失败。有谁知道为什么？

**这是我的例子**

```
data(mtcars)

mtcars$gear <- factor(mtcars$gear)
regular_lm <- lm(mpg ~ wt + cyl + gear + cyl:gear, data=mtcars)
summary(regular_lm)

regular_lm <- lm(mpg ~ wt + cyl + gear + cyl:I(gear == "4"), data=mtcars)
summary(regular_lm) 
```

现在是 rms 示例

```
library(rms)

dd <- datadist(mtcars)
options(datadist = "dd")

regular_ols <- ols(mpg ~ wt + cyl + gear + cyl:gear, data=mtcars)
regular_ols

# Fails with:
#     Error in if (!length(fname) || !any(fname == zname)) { : 
#         missing value where TRUE/FALSE needed
regular_ols <- ols(mpg ~ wt + cyl + gear + cyl:I(gear == "4"), data=mtcars) 
```

这个实验可能不是最明智的统计数据，因为估计值似乎发生了显着变化，但我有点好奇为什么 ols() 会失败，因为它应该执行“lm 使用的相同拟合例程”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T23:20:16.580

我不确切知道，但这与计算公式的方式有关，而不是与模型翻译后的拟合方式有关。使用`traceback()`表明问题发生在`Design(eval.parent(m))`; 使用`options(error=recover)`可以让你看到你可以看到的地步

```
Browse[1]> fname
[1] "wt"   "cyl"  "gear"
Browse[1]> zname
[1] NA 
```

换句话说，`zname`是一些尚未正确设置的内部变量，因为该`Design`函数无法完全处理定义圆柱体和 (gear==4) 虚拟对象之间的相互作用。

这虽然有效：

```
mtcars$cylgr <- with(mtcars,interaction(cyl,gear == "4"))
regular_ols <- ols(mpg ~ wt + cyl + gear + cylgr, data=mtcars) 
```

# android - 缺少 project.properties 文件错误

> ID：10562400
> 
> 赞同：0
> 
> 时间：2012-05-12T09:10:04.260
> 
> 标签：android

我是 Android 开发的新手。在学习过程中，我使用了一些随 Android SDK 提供的示例项目。我已经在模拟器上运行了 ApiDemos，但是当我今天（现在是昨天）运行它时，我遇到了这 3 个错误。

> 描述
> 
> （1）项目没有project.properties文件！编辑项目属性以设置一个。
> 
> (2) 由于构建路径不完整，项目未构建。找不到 java.lang.Object 的类 > 文件。修复构建路径，然后尝试构建此项目
> 
> (3) java.lang.Object 类型无法解析。它是从所需的 .class 文件中间接引用的

我在我的工作区中的 ApiDemos 项目文件夹中查看了 project.properties 文件，它确实存在。

这是我多次尝试过的... -修复项目属性 -清理项目 -删除项目并重新创建它

如果这看起来太简单，请原谅。我希望这是一个简单的问题。我只是对 Eclipse IDE 不知所措，所以也许您的回答可以帮助我更好地理解它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:17:00.493

请检查您是否有类似的东西

```
sdk.dir=/Developer/AndroidSDK 
```

在你的`local.properties`文件中。

此外，默认情况下`project.properties`文件非常简单：

```
# Project target.
target=android-15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:52:42.043

从 Android Java 项目的上下文菜单中，请使用**Android Tools->Fix Project Properties**。

如果这没有帮助，您可以再次使用上下文菜单使用漂亮的对话框更改文件中的设置，这次选择 Properties->Android。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T09:28:47.780

如果您使用的是 Android Studio，您可能已经注意到它不再创建 project.properties 文件。但有时它是需要的，尤其是对于像 Jenkins 这样的 CI 服务器。在这种情况下，您可以在项目文件夹中运行此命令添加它：

```
android update project --path ./src/main/ --target android-19 
```

其中**android-19**是您在 build.gradle 文件中指定的目标，而**src/main**是 AndroidManifest.xml 的默认路径

# windows-phone - 删除 Windows Phone 系统托盘进度指示器

> ID：10562405
> 
> 赞同：0
> 
> 时间：2012-05-12T09:10:52.923
> 
> 标签：windows-phone

我搜索并找到了许多描述如何打开进度指示器的帖子。这很简单，5行代码。

我的问题是，在异步操作（通常在某个地方的另一个线程上）完成后，如何再次删除指示器？我正在使用一个不确定的指标。

我试图调用 SystemTray.SetProgressIndicator(page, null) 来删除指标并将所有内容重新设置为创建指标之前的样子，但我在顶部留下了一个黑色（或白色，如果是浅色主题）栏屏幕（我的枢轴控件应该占据一个漂亮的背景图片）。

我不想让系统托盘不可见，因为我假设从一开始它就不是不可见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:43:44.580

你在使用 MVVM 吗？如果是这样，只需在视图模型中绑定一个变量并更改值

```
<shell:SystemTray.ProgressIndicator>
    <shell:ProgressIndicator IsIndeterminate="true" IsVisible="{Binding IsDataDownload}"/>
</shell:SystemTray.ProgressIndicator> 
```

# c# - UltraWinGrid：如何刷新显示的数据

> ID：10562408
> 
> 赞同：1
> 
> 时间：2012-05-12T09:11:07.853
> 
> 标签：c#, winforms, infragistics, ultrawingrid

我是基础设施和 winGrids 的新手

我有带有下表的 SQL 数据库

```
Costumers
[ID][Name] 
```

另外，我有 UserControl，它有 winGrid 和 add\remove 按钮。

当 UserControll 变为时，活动的 winGrid 数据源绑定到表

```
winGrd.DataSource = Tables.Costumers; 
```

当用户想要从客户表中添加\删除数据时，他单击相关按钮。表格会相应更改，但网格中显示的数据**不会更改**。我用了

```
winGrd.Refresh(); 
```

但它没有效果

这样做的方法是什么，欢迎使用代码示例

谢谢

---编辑----添加代码：

```
private void BtnAdd_Click(object sender, System.EventArgs e)
{
        //...

        DB.DataProxy.AddCostumer(txtType.Text);
        winGrd.Refresh();

        //...
} 
```

AddCostumer 方法最终会调用以下更新客户表的方法

```
public void AddCostumer(string type)
{
        Costumers.InsertOnSubmit(new InsertOnSubmit{ Name = name});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T19:03:40.850

如果您`DataTable`正在更新，则`UltraGrid`应该为您显示这些更改。你可以尝试的是打电话

```
ultraGrid1.Rows.Refresh(Infragistics.Win.UltraWinGrid.RefreshRow.ReloadData); 
```

或者

```
ultraGrid1.Rows.Refresh(Infragistics.Win.UltraWinGrid.RefreshRow.RefreshDisplay); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:40:32.370

不确定，但是，从[关于 InsertOnSubmit() 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/bb763516.aspx)

`The added entity will not appear in query results from this table until after SubmitChanges has been called.`

因此，也许，如果您希望结果立即出现在 Costomers 实体中，然后出现在 WinGrid 中，您应该在 SubmitChanges() 上方的代码中调用

```
public void AddCostumer(string name) 
{ 
    Costumers.InsertOnSubmit(new Costumers() { Name = name}); 

    // Submit the change to the database.
    try
    {
        db.SubmitChanges();
    }
    catch (Exception e)
    {
       // message to the user???
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T12:54:24.553

我认为这是因为您正在设置一个未实现 IBindableList 的 DataSource，UltraGrid 使用它来自动更新它更改的数据。您可以尝试手动刷新它，将 DataSource 设置为 null 并在需要显示新信息时再次重置 DataSource。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T12:38:06.430

执行添加/删除命令后，从数据库中重新提取数据并重做绑定。在此之前将 DataGridView.DataSource 设置为 null，以防万一；如果连接或任何其他与数据库相关的进程失败，您不希望显示错误的数据。

# perl - 为什么将我的脚本输出通过管道传输到 shell 的 dir 命令中没有按预期工作？

> ID：10562409
> 
> 赞同：-2
> 
> 时间：2012-05-12T09:11:18.237
> 
> 标签：perl, file-io, pipe

我将目录命令输出传送到文件句柄，然后打印到文件句柄。我希望在 dir/ls 输出中附加一些文本。

```
open (FH, "| dir") or die "$OS_ERROR";
print FH ("sometext") or die "$OS_ERROR";
while (<FH>){
    print;
} 
```

当我执行 Perl 脚本时，我看到了目录内容，但是我没有看到使用 print 语句打印的文本，在这种情况下我没有看到 sometext。我错过了什么？

更详细地解释 - 我想要管道目录内容到 FH，然后我想将一些文本附加到同一个文件句柄 FH 。我已经提到了链接[http://perldoc.perl.org/perlpentut.html#Pipe-Opens](http://perldoc.perl.org/perlopentut.html#Pipe-Opens)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:56:43.167

您不能使用 FH 写入，`print`然后期望在下一条语句中从 FH 读取。文件句柄不是 FIFO（默认情况下）。open 给你一个可写的文件句柄，它的读取端连接到`dir`. 从写文件句柄中读取只会给你什么。

你真正想要达到什么目的？向程序发送一些文本`dir`，或读取`dir`程序的输出？

由于您在评论中说要阅读`dir`命令的输出，因此您的 open 命令错误；使用`"dir |"`而不是`"| dir"`阅读[Perl Open Tutorial](http://perldoc.perl.org/perlopentut.html)。

也许这可以做你想做的事情：

```
open (FH, "dir|") or die "$OS_ERROR";
while (<FH>){
    print;
}
print "sometext\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:24:17.850

您没有重定向任何内容：您将脚本的输出通过管道传输到`cmd.exe`内置`dir`或别名，`ls`具体取决于您的操作系统（这意味着，如果您`ls`在 Windows 上的路径中使用 Cygwin 运行此脚本，您可能会遇到麻烦）。

写信`dir`似乎没有用。如果您想***过滤*** `dir`输出，即从运行中获取输出`dir`并在打印之前对其进行操作，您应该将其通过管道传输到您的脚本中，并且您应该打印处理后的输出。

```
#!/usr/bin/env perl

use strict; use warnings;

my $pid = open my $dir_out, '-|', 'cmd.exe /c dir';
die "Cannot open pipe: $!\n" unless $pid;

my $output_file = 'output.txt';

open my $my_out, '>', $output_file
    or die "Cannot open '$output_file': $!";

while (my $line = <$dir_out>) {
    $line =~ s/bytes free/peons liberated/;
    print $my_out $line;
}

close $my_out
    or die "Cannot close '$output_file': $!";

close $dir_out 
    or die "Cannot close pipe: $!\n"; 
```

当然，我假设您的程序中还发生了其他事情，这只是其中的一小部分。否则，您不需要为简单的过滤器编写这么多代码。

# android - 如何在android上对ext3分区进行压力测试？

> ID：10562411
> 
> 赞同：0
> 
> 时间：2012-05-12T09:11:28.250
> 
> 标签：android, linux, filesystems, stress-testing, ext3

挂载所有分区后，我在设备启动时的内核日志中有几个错误。

```
ext3_free_blocks_sb: bit already cleared for block ###### 
```

经过搜索，我发现内核中已经集成了针对同一问题的[错误修复。](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commit;h=f25f624263445785b94f39739a6339ba9ed3275d)

然后我在存储库上搜索了类似的提交，但没有找到任何东西，所以似乎该错误已在主流上修复，并且问题与 Android 相关。

从 RedHat bugtracker 关于这个 bug 的[讨论](https://bugzilla.redhat.com/show_bug.cgi?id=494927#c17)中，我发现它可以通过压力测试实用程序重现。`ext3`不幸的是，我在 Android 上不知道这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:31:45.600

将此类诊断工具移植到 Android 的主要困难在于它减少了内核功能。在这种情况下，有一堆用于常规 linux 的文件系统压力实用程序：

*   [`Bonnie++`](http://www.coker.com.au/bonnie++/)
*   [`dbench`](http://samba.org/ftp/tridge/dbench/)
*   `fsstress`[和LTP](http://ltp.sourceforge.net/)中包含的其他工具
*   等等

它们中的大多数都需要`BASH`Android 中缺少的特定标头或脚本功能。

在重新审视 LTP 的文件系统测试用例中可用的工具集后，我提出了以下方法：

1.  查找脚本、标头和系统调用的最小子集的工具。
2.  使用 Android NDK 编译它。
3.  [`BASH`为 Android](https://github.com/grantland/android-bash)安装以运行所需的脚本。
4.  [用它们的Busybox](http://www.busybox.net/downloads/BusyBox.html)等效项替换缺少的命令。

# swing - JLayeredPane 上的透明 JLabels

> ID：10562424
> 
> 赞同：0
> 
> 时间：2012-05-12T09:13:03.257
> 
> 标签：swing, png, jlabel, bufferedimage, jlayeredpane

我试图在重叠的 JLayeredPane 上显示几个 PNG 图像。

这是生成包含图像的 JLabel 并将其添加到 JLayeredPane 的当前代码：

```
BufferedImage im = ImageIO.read(new File(fname));
JLabel uLabel = createLabelForImage(im);
mapLayeredPane.add(uLabel, new Integer(zIndex++), 1); 
```

和 createLabelForImage() 方法：

```
protected JLabel createLabelForImage(BufferedImage im) {
    JLabel label = new JLabel(new ImageIcon(im));
    label.setVerticalAlignment(JLabel.TOP);
    label.setHorizontalAlignment(JLabel.CENTER);
    label.setOpaque(true);
    label.setBounds(0, 0, im.getWidth(), im.getHeight());

    return label;
} 
```

我得到的是对象正确重叠，但 PNG 图像的透明背景被一种白灰色替换。

ImageIcon 有问题吗？使用 JLayeredPane ？也许我必须设置诸如 label.setBakground(sort_of_transparency_code) 之类的东西？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:39:07.157

如果您想看透，您的标签不应该是不透明的，请参阅 JComponent.setOpaque

```
 If true the component paints every pixel within its bounds. 
 Otherwise, the component may not paint some or all of its
 pixels, allowing the underlying pixels to show through. 
```

# grails - 访问服务中的 taglib

> ID：10562428
> 
> 赞同：3
> 
> 时间：2012-05-12T09:13:14.470
> 
> 标签：grails, namespaces, taglib

我有一个带有命名空间 xyz 的自定义 taglib。我想在服务中访问这个 taglib 的方法。如果我导入它并使用 xyz.someFunction()。它不认识它。我们如何从外部访问 taglib 的命名空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-16T06:49:53.247

如果您想在服务类中使用您的自定义标记库，请使用下面的代码。

```
def c = grailsApplication.mainContext.getBean('com.custom.MyCustomTagLib');
int age = c.calculateAge(dob); 
```

更多细节可以在[这里找到](http://www.ygrails.com/2012/10/30/access-taglib-in-service-class/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T13:34:26.860

标签库包含与视图相关的逻辑，而服务包含业务逻辑。我看不出有任何理由在服务中使用标记库。如果你这样做，那可能是一个设计错误。您能否说明您为什么要在服务中使用 taglib 的原因？

# linux - 如何准备一个 Linux 应用程序来查找 ttf 字体目录？

> ID：10562429
> 
> 赞同：0
> 
> 时间：2012-05-12T09:13:19.843
> 
> 标签：linux, fonts, path

我正在开发一个主要针对 Linux 的应用程序，它使用 TTF 字体。我需要字体的文件名和路径，因为我必须使用 SDL 函数 TTF_OpenFont(char *file, ...) 加载它。问题是在不同的发行版上有很多不同的 TTF 字体目录。处理这个问题的最佳方法是什么？我想出了一些解决方案，但它们中的每一个对我来说似乎都不是最理想的：

*   将字体与应用程序一起打包，并将其安装到应用程序自己的 /usr/share/ 目录中。
*   用 . 检查字体路径`fc-list : file`。
*   硬编码应用程序的每个路径变化，并在加载文件时尝试它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:29:02.960

你的第一个和第二个解决方案都很好，除了调用 FcFontList 函数可能更好。第三个是相当不可靠的，但它高度依赖于应用程序类型（在某些情况下它可以是好的，如果你有这个路径可以由用户配置）。

# maven - maven war插件版本之间的区别在哪里？

> ID：10562434
> 
> 赞同：1
> 
> 时间：2012-05-12T09:14:00.010
> 
> 标签：maven, plugins, version, war

我尝试过，但没有找到任何关于 2.0 和 2.2 maven 战争插件之间有什么区别的信息。有没有可能找到？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:31:51.750

[您可以在此处](http://jira.codehaus.org/secure/ReleaseNote.jspa?projectId=11150)查看发行说明。不幸的是，我没有找到任何方法来指定 2 个版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:56:51.200

最好的办法是查看更改日志

[http://jira.codehaus.org/browse/MWAR#selectedTab=com.atlassian.jira.plugin.system.project%3Achangelog-panel](http://jira.codehaus.org/browse/MWAR#selectedTab=com.atlassian.jira.plugin.system.project%3Achangelog-panel)

# jquery - Jquery Slideshow 根据浏览器宽度显示下一个和上一个图像

> ID：10562437
> 
> 赞同：2
> 
> 时间：2012-05-12T09:14:06.343
> 
> 标签：jquery, slideshow

我正在寻找一个 jQuery 幻灯片，以在活动图像的中心显示活动图像，并在活动图像的左侧和右侧显示下一个先前的图像。活动图片的宽度是固定的，另外两张图片不固定宽度，根据浏览器宽度计算。

一个[很好的例子](http://goo.gl/KoEe)。我在过去的 4 天里浏览了谷歌，但没有找到任何好的解决方案。

我发现[这个插件](http://webdesignandsuch.com/posts/fancymoves/index.html)与此类似，但不符合标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:20:23.127

试试[英雄轮播](http://www.paulwelsh.info/jquery-plugins/hero-carousel/)

> 英雄轮播 | 具有 100% 宽度和下一张/上一张幻灯片预览的 jQuery 轮播插件

# python - Python 中的猴子补丁会影响直接导入吗？

> ID：10562438
> 
> 赞同：4
> 
> 时间：2012-05-12T09:14:49.513
> 
> 标签：python, import, namespaces, monkeypatching

如果我修补一个模块：

```
# mokeypatch.py
import other_module

def replacement(*args, **kwargs):
    pass

other_module.some_func = replacement 
```

这会影响`some_func`直接导入的模块，还是取决于导入的顺序？如果第三个模块是这样的：

```
# third_module.py
from other_module import some_func 
```

首先，运行此代码，然后运行我们的猴子补丁。会`third_module.some_func`是旧的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:18:53.957

是的，它将指向旧功能。

`from mod import func`在里面做的时候`mod2`，`func`会被绑定在范围内`mod2`。
Monkeypatching`mod.func`将绑定`mod.func`到新功能，但既不知道`mod`也不`mod.func`知道它`mod2.func`是否存在——即使他们这样做了（在内部他们可能在某个地方知道它），他们也不知道是否应该替换它或现在。

为什么重新绑定导入的名称会有问题的一个实际示例是：

```
# monkeypatch.py
import other_module
from other_module import func as orig_func
def replacement():
    do_stuff()
    orig_func()
    do_stuff()
other_module.func = replacement 
```

如果它是反弹的，那么您现在将无限递归并且无法调用原始函数。

# php - Facebook授权期间的无限循环

> ID：10562439
> 
> 赞同：0
> 
> 时间：2012-05-12T09:14:51.650
> 
> 标签：php, facebook, facebook-graph-api

我有这个简单的代码：

```
// index.php
require_once("/fb/facebook.php");
require_once("/config/config.php");

$facebook = new Facebook(array(
    'appId'  => $config['appId'],
    'secret' => $config['secret'],
    'cookie' => true
));

$user = $facebook->getUser();

if ($user === 0) {      

    $loginUrl = $facebook->getLoginUrl(array(
      'redirect_uri' => 'https://www.example.com/join.php'      
    ));

    echo("<script> top.location.href='" . $loginUrl . "'</script>");    
    exit;

}
else {      
    var_dump($facebook->api("/me"));    
} 
```

join.php 代码是：

```
//join.php
require_once("/fb/facebook.php");
require_once("/config/config.php");

$facebook = new Facebook(array(
    'appId'  => $config['appId'],
    'secret' => $config['secret'],
    'cookie' => true
));

if (isset($_REQUEST['error'])) {    
    echo("<script>top.location.href='". $config['errors']['auth'] . "'</script>");
    exit;
}

echo("<script>top.location.href='". $config['url'] . "'</script>"); 
```

问题是当我去：[http](http://apps.facebook.com/myappsample) ://apps.facebook.com/myappsample （我没有登录facebook）应用程序显示身份验证对话框（正确）但在这一步之后它会从**索引执行无限循环.php**加入**.php**。

正如您所看到的，当我检查 join.php 中是否有任何错误时，我重定向到 index.php（应用程序的主页）但在 index.php 中我仍然得到`$user === 0`，所以它再次重定向到 join.php ....等等等等（无限循环）。

我该如何解决这种问题？

非常感谢！

**编辑：** 我使用**join.php**作为登录页面的回调（redirect_uri）。该页面的目的是将用户信息保存在数据库中，因此 join.php 会执行此操作，然后重定向到 index.php 以让用户使用该应用程序。错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:41:20.513

您需要调用`$facebook->getUser()`才能实际处理回调数据以在`join.php`.

# javascript - Javascript：精 确的奇怪行为

> ID：10562441
> 
> 赞同：0
> 
> 时间：2012-05-12T09:15:01.297
> 
> 标签：javascript, jquery

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

认为，

```
var x = .6 - .5;

var y = 10.2 – 10.1;

var z = .2  -  .1; 
```

比较结果

```
x == y;     // false

x == .1;    // false

y == .1;    // false 
```

但

```
z == .1;    // true 
```

为什么 Javascript 会表现出这样的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T09:16:56.453

因为浮点并不完全精确。您最终可能会出现*细微*的差异。

*（旁注：我认为您的意思是`var x = .6 - .5;`否则，您正在与 比较`-0.1`。`0.1`）*

JavaScript 使用[IEEE-754](http://en.wikipedia.org/wiki/IEEE_754-2008)双精度 64 位浮点 ( [ref](http://es5.github.com/#x8.5) )。这是浮点数的一个*非常好的*近似值，但是没有完美的方法可以用二进制表示所有浮点数。

有些差异比其他差异更容易看到。例如：

```
console.log(0.1 + 0.2); // "0.30000000000000004" 
```

有一些 JavaScript 库可以做“十进制”的事情，比如 C# 的`decimal`类型或 Java 的`BigDecimal`. 这就是数字实际存储为一系列十进制数字的地方。但它们不是灵丹妙药，它们只是有不同类别的问题（`1 / 3`例如，尝试用它准确表示）。“十进制”类型/库非常适合金融应用程序，因为我们习惯于处理金融事物中所需的舍入风格，但代价是它们往往比 IEEE 浮点数慢。

让我们输出你的`x`和`y`值：

```
var x = .6 - .5;
console.log(x); // "0.09999999999999998"

var y = 10.2 - 10.1;
console.log(y); // "0.09999999999999964" 
```

没有什么大惊小怪`0.09999999999999998`的。:-)`!=``0.09999999999999964`

您可以将这些合理化以进行比较：

```
function roundTwoPlaces(num) {
  return Math.round(num * 100) / 100;
}

var x = roundTwoPlaces(0.6 - 0.5);

var y = roundTwoPlaces(10.2 - 10.1);

console.log(x);       // "0.1"
console.log(y);       // "0.1"
console.log(x === y); // "true" 
```

或者更通用的解决方案：

```
function round(num, places) {
    var mult = Math.pow(10, places);
    return Math.round(num * mult) / mult;
} 
```

[实例](http://jsbin.com/avohiq)| [资源](http://jsbin.com/avohiq/edit)

请注意，准确率仍然可能出现在结果数字中，但至少有两个彼此非常、非常、非常接近的数字，如果`round`以相同数量的位置运行，最终应该是相同的数字（即使这个数字并不完全准确）。

# java - 当你有虚拟和真实实现的接口时，单元测试的最佳方法是什么？

> ID：10562445
> 
> 赞同：6
> 
> 时间：2012-05-12T09:15:58.310
> 
> 标签：java, unit-testing, interface, junit, tdd

我熟悉 TDD 的基本原则，即：

1.  编写测试，这些会因为没有实现而失败
2.  编写基本实现以使测试通过
3.  重构代码

但是，我对接口和实现适合的位置有点困惑。我在业余时间创建了一个 Spring Web 应用程序，而不是大吵大闹，我想了解如何更好地测试接口/实现，以我在这里创建的这个简单的示例代码为例：

```
public class RunMe
{

    public static void main(String[] args)
    {
        // Using a dummy service now, but would have a real implementation later (fetch from DB etc.)
        UserService userService = new DummyUserService();
        System.out.println(userService.getUserById(1));
    }
}

interface UserService
{
    public String getUserById(Integer id);
}

class DummyUserService implements UserService
{
    @Override
    public String getUserById(Integer id)
    {
        return "James";
    }
} 
```

我已经创建了`UserService`接口，最终会有一个真正的实现来查询数据库，但是为了让应用程序脱离实际，我已经替换了一个`DummyUserService`现在只返回一些静态数据的实现。

**问题：如何实施上述测试策略？**

我可以创建一个名为的测试类`DummyUserServiceTest`并测试当我调用`getUserById()`它时它会返回`James`，如果不是浪费时间的话，看起来很简单（？）。

随后，我还可以创建一个测试类，该类`RealUserService`将测试`getUserById()`从数据库中返回用户名。这是让我有点困惑的部分，这样做，这是否本质上没有超出单元测试的边界并变得更像是一个集成测试（在数据库上的命中）？

**问题（改进了一点）：当使用带有虚拟/存根和真实实现的接口时，应该对哪些部分进行单元测试，哪些部分可以安全地不测试？**

*昨晚我花了几个小时在谷歌上搜索这个主题，主要是找到关于什么是 TDD 的教程，或者如何使用 JUnit 的示例，但在建议实际测试什么的领域中没有任何内容。不过，完全有可能是我搜索不够努力或没有寻找正确的东西......*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:44:59.177

不要测试虚拟实现：它们不会在生产中使用。测试它们没有真正的意义。

如果真正的 UserService 实现除了访问数据库并通过其 ID 获取用户名之外什么都不做，那么测试应该测试它是否这样做并正确地执行。如果您愿意，可以将其称为集成测试，但它仍然是一个应该编写和自动化的测试。

通常的策略是在测试的 @Before 注释方法中用最少的测试数据填充数据库，并让您的测试方法检查数据库中存在的 ID 是否返回相应的用户名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T17:28:10.220

我建议您先阅读这本书：Steve Freemand 和 Nat Pryce 的《 [Growing Object-Oriented Software》，由测试指导。](http://www.growing-object-oriented-software.com/)它回答了您和许多其他与 TDD 相关的问题。

在您的特定情况下，您应该`RealUserService`使用数据库适配器进行可配置，这将进行真正的数据库查询。服务本身将提供服务，而不是数据持久性。看书，很有帮助：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:36:07.187

JB 的答案是一个很好的答案，我想我会扔掉我用过的另一种技术。

在开发原始测试时，不要`UserService`一开始就将 stub 去掉。事实上，继续写真实的东西。继续遵循[肯特贝克的 3 条规则](http://agileinaflash.blogspot.com/2009/03/make-it-work-make-it-right-make-it-fast.html)。

1）让它工作。2) 做对。3）让它快速。

您的代码将进行测试，然后验证 find by id 是否有效。正如 JB 所说，此时您的测试将被视为集成测试。一旦他们通过了，我们就成功地完成了第 1 步。现在，看看设计。这样对吗？调整任何设计气味并检查列表中的第 2 步。

对于第 3 步，我们需要快速进行此测试。我们都知道，所有事务管理和数据库设置的集成测试都很慢且容易出错。一旦我们知道代码可以工作，我通常不会为集成测试而烦恼。正是在这个时候，您可以引入您的虚拟服务，有效地将您的集成测试变成一个单元测试。现在它没有以任何方式触及数据库，我们可以从列表中删除第 3 步，因为这个测试现在很快。

那么，这种方法有什么问题呢？好吧，很多人会说我仍然需要对数据库支持的`UserService`. 我通常不会在我的项目中保留集成测试。我的观点是，这些类型的测试很慢、很脆弱，并且在大多数项目中没有捕捉到足够的逻辑错误来为自己买单。

希望有帮助！

布兰登

# html - 将 div 内的图像保存为一张图像

> ID：10562447
> 
> 赞同：0
> 
> 时间：2012-05-12T09:16:37.967
> 
> 标签：html

我在网页中有一个 div，在该 div 下方有一些您可以选择的图像。当您选择图像时，您可以通过单击 div 将其放置在 div 中。这工作正常。

当有人将一些图像放入 div 并完成时，我希望它能够保存 div 的内容，以便将所有图像保存在放置的位置上，并将其合并为一个图片。

如果可以的话，这可能吗，我怎么能做这样的事情？
目前，我将带有 jQ​​uery 的图像放在 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:25:10.923

让它的一张图片更复杂，你可能想检查一下[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)。您也可以使用`canvas`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:20:18.250

您可以创建一个`canvas`，然后在其上绘制图像，然后转换为图像并保存。[这](http://www.nihilogic.dk/labs/canvas2image/)可能会有所帮助。它仅适用于`canvas`支持的浏览器。

# delphi - Delphi XE2：如何定义自定义 DataSnap REST URI？

> ID：10562454
> 
> 赞同：10
> 
> 时间：2012-05-12T09:17:16.647
> 
> 标签：delphi, rest, delphi-xe2, datasnap

我正在使用 Delphi XE2 编写 DataSnap REST 服务。我注意到 DataSnap 中的 REST URI 必须严格遵循这种格式（请参阅[此处](http://docwiki.embarcadero.com/RADStudio/en/REST)）：

```
http://my.site.com/datasnap/rest/URIClassName/URIMethodName[/inputParameter]* 
```

一个著名的例子是 DataSnap 服务器向导创建的示例方法：

```
http://my.site.com/datasnap/rest/TServerMethods1/ReverseString/ABC 
```

在 URI 中提供参数的常用方法有两种：

1.  路径段参数：/TServerMethods1/ReverseString/ABC
2.  查询字符串参数：/TServerMethods1/customers?name=bill

DataSnap REST 绝对支持 Path Segment 参数 URI。DataSnap REST 中是否也支持查询字符串参数 URI？

我有以下 REST URI 示例，发现它似乎无法与当前的 DataSnap REST 库一起使用：

1.  **/客户/A1234**

    返回 ID 为 A1234 的客户对象

2.  **/customers/A1234.xml**

    以 XML 格式返回 ID A1234 的客户对象

3.  **/customers/A1234.json**

    以 json 格式返回 ID A1234 的客户对象

4.  **/customers/A1234.html**

    以 html 格式返回 ID A1234 的客户对象

5.  **/customers?name=比尔**

    返回名称包含 Bill 的客户列表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T09:43:58.610

我不知道如何使用 DataSnap 来做到这一点，但有一些方法可以解决它。您可以很好地使用称为 URLRewrite 的东西，因为您的友好 URI 和 DataSnap 所需的 URI 都可以轻松映射。

对于 IIS，您可以使用（启用）IIS 7 中标准的 URLRewrite 模块。更多信息可以在官方网站上找到：[http](http://www.iis.net/download/urlrewrite) ://www.iis.net/download/urlrewrite 。

确保为[入站](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/) *和* [出站](http://learn.iis.net/page.aspx/657/creating-outbound-rules-for-url-rewrite-module/)URI 创建规则，以使“内部”（Datasnap）URI 不会外泄。

如果您在 Apache 上运行该站点，则可以使用类似的功能，并且我认为您需要修改 .htaccess 文件，但我没有使用 Apache 的经验，所以我可能是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T12:04:54.717

聚会有点晚了，但是是的，您可以使用查询参数。

您必须使用 GetInvocationMetadata.QueryParams

请参见下面的示例。

```
uses DBXPlatform;

function TServerMethods1.EchoString(Value: string): string;
var
  metaData: TDSInvocationMetadata;
  i: integer;
begin
  metaData := GetInvocationMetadata;
  for i := 0 to Pred(metaData.QueryParams.Count) do
  begin
    Result := Result + '<param>' + metaData.QueryParams[i] + '</param>';
  end;
  metaData.ResponseContent := '<xml>' + Result + '</xml>';
end; 
```

# svn - 如何使用zend studio将ubuntu服务器上的svn与团队开发连接起来？

> ID：10562461
> 
> 赞同：0
> 
> 时间：2012-05-12T09:18:12.270
> 
> 标签：svn, zend-framework, ubuntu

我已经在本地服务器上安装了 linux ubuntu，然后我在其上安装了 svn，现在我和我的团队使用 zend studio 9.0.2，我们需要在一些项目上合作，你能帮我指导如何完成吗？ ?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:47:57.510

使用 SVN 存储库设置 Zend 很容易

```
File > New > Php Project From SVN 
```

困难的部分是首先设置您的 SVN 存储库，这是完全独立的事情，与 zend studio 无关。有关如何设置 SVN 存储库，请阅读[http://svnbook.red-bean.com/](http://svnbook.red-bean.com/)

# unit-testing - 是否有任何免费工具集可用于生成用于测试嵌入式平台的线束？

> ID：10562463
> 
> 赞同：0
> 
> 时间：2012-05-12T09:18:25.223
> 
> 标签：unit-testing, embedded, automated-tests

我的意思是类似于[VectorCAST](http://www.vectorcast.com/)或者可能[是 CANTATA++](http://www.qa-systems.com/)

我想要什么：我有用于我要测试的目标系统的 C 代码，并且我有目标硬件和开发人员 PC 的小通道（UART、tcp/ip 等）。我想要软件，它使我能够在 C++ 上为主机 PC 上的嵌入式系统编写测试，并使用 uart 等自动传输目标系统上的嵌入式代码调用。

我认为它可能会在[PyGCCXML](http://sourceforge.net/projects/pygccxml/)和[protobuf](http://code.google.com/p/protobuf/)（以及[嵌入式 C 的 protobuf 生成器](http://code.google.com/p/protobuf-embedded-c/)）上写两个周末，但也许这样的系统已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T11:34:43.953

也许是这样的：

[Parasoft c/c++ 测试](http://www.parasoft.com/jsp/products/cpptest.jsp?itemId=47)

[恩比尼特](http://www.embunit.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:50:08.880

考虑[Embedded Unit](http://embunit.sourceforge.net/)，一个用于嵌入式 C 系统的单元测试框架。

# javascript - 仅 GET 使用 django-piston 在跨域 API 请求中工作

> ID：10562471
> 
> 赞同：2
> 
> 时间：2012-05-12T09:19:12.310
> 
> 标签：javascript, ajax, django, cors, django-piston

我无法使用 django-piston 在我的 API 上执行 POST/PUT/DELETE 跨域请求，我使用此脚本启用了 CORS（基于[此](http://loggly.com/blog/2011/12/enabling-cors-in-django-piston/)）：

```
class CORSResource(Resource):
    """
    Piston Resource to enable CORS.
    """

    # headers sent in all responses
    cors_headers = [
        ('Access-Control-Allow-Origin', '*'),
        ('Access-Control-Allow-Headers', 'AUTHORIZATION'),
    ]

    # headers sent in pre-flight responses
    preflight_headers = cors_headers + [
        ('Access-Control-Allow-Methods', '*'),
        ('Access-Control-Allow-Credentials','true')
    ]
    def __init__(self, handler, authentication=None):
        super(CORSResource, self).__init__(handler, authentication)
        self.csrf_exempt = getattr(self.handler, 'csrf_exempt', True)

    def __call__(self, request, *args, **kwargs):

        request_method = request.method.upper()

        # intercept OPTIONS method requests
        if request_method == "OPTIONS":
            # preflight requests don't need a body, just headers
            resp = HttpResponse()

            # add headers to the empty response
            for hk, hv in self.preflight_headers:
                resp[hk] = hv

        else:
            # otherwise, behave as if we called the base Resource
            resp = super(CORSResource, self).__call__(request, *args, **kwargs)

            # slip in the headers after we get the response
            # from the handler
            for hk, hv in self.cors_headers:
                resp[hk] = hv

        return resp

    @property
    def __name__(self):
        return self.__class__.__name__ 
```

在前端，我使用激活了 JSONP 的 Backbone。我没有任何错误，OPTIONS 请求工作正常，然后什么也没有发生。我试图更改« Access-Control-Allow-Methods »，但它没有改变任何东西。任何想法 ？

**编辑：** 这是 OPTIONS 请求的请求标头：

```
OPTIONS /api/comments/ HTTP/1.1
Host: apitest.dev:8000
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Origin: http://3l-oauth.dev:1338
Access-Control-Request-Method: POST
Access-Control-Request-Headers: authorization,content-type
Pragma: no-cache
Cache-Control: no-cache 
```

和响应头：

```
HTTP/1.0 200 OK
Date: Sat, 12 May 2012 09:22:56 GMT
Server: WSGIServer/0.1 Python/2.7.3
Access-Control-Allow-Methods: *
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: AUTHORIZATION
Content-Type: text/html; charset=utf-8
X-Frame-Options: SAMEORIGIN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:29:56.220

**JSONP 仅是 GET：**

您不能跨域发出 POST、PUT 或 DELETE 请求。`<script>`通过使用向您的服务器发送动态 JavaScript 请求的标签，可以促进跨域JavaScript。脚本标签只是 GET 请求。

但是，在处理跨域 JavaScript 时调整此限制的推荐方法之一是使用方法查询参数，您将在服务器端代码中使用该参数来确定应如何处理特定请求。

例如，如果请求是

```
POST /api/comments/ 
```

那么你可以这样做：

```
/api/comments?method=POST 
```

在底层，它仍然是一个 GET 请求，但您可以通过稍微修改 API 来实现您的目标。

在确定请求类型时，而不是检查 HTTP 方法：

```
if request_method == "OPTIONS": 
```

改为检查请求参数“method”：

```
 if request.GET["method"] == "OPTIONS": 
```

**JSONP 请求必须返回 JavaScript：**

需要注意的另一点非常重要的一点是，您的 JSONP 请求必须全部返回在函数调用中包装（或填充）的 JavaScript。由于请求是由需要 JavaScript 的脚本标签在后台发出的，因此您的服务器必须返回浏览器可以理解的内容。

如果这对您没有意义，或者您需要更多信息，这里有一个[很好的解释，说明 JSONP 和脚本标签远程处理如何在幕后工作](https://stackoverflow.com/a/10069132/552792)。

# python - Python`描述符`

> ID：10562475
> 
> 赞同：0
> 
> 时间：2012-05-12T09:19:50.783
> 
> 标签：python, descriptor

一个描述符类如下：

```
class Des(object):
    def __get__(self, instance, owner): ...
    def __set__(self, instance, value): ...
    def __delete__(self, instance): ...

class Sub(object):
    attr = Des()

X = sub() 
```

**问题**

1.  我看不到 存在的意义`owner`，我该如何使用它？

2.  要使 attr 只读，我们不应该省略`__set__`而是定义它以捕获分配并引发异常。所以`X.attr = 123`会失败，但是`__set__`'s arguments 不包含`owner`，这意味着我仍然可以这样做`Sub.attr = 123`，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:24:15.310

请参阅[http://docs.python.org/reference/datamodel.html#implementing-descriptors](http://docs.python.org/reference/datamodel.html#implementing-descriptors)：

> `owner`始终是所有者类，`instance`而是通过所有者访问属性的实例，或者当通过所有者访问属性时为 None

您将使用的一种情况`owner`是创建一个*classproperty*：

```
class _ContentQueryProperty(object):
    def __get__(self, inst, cls):
        return Content.query.filter_by(type=cls.TYPE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-08T21:41:02.550

你可以试试这个例子：

```
# the descriptor protocol defines 3 methods:
#    __get__()
#    __set__()
#    __delete__()

# any class implementing any of the above methods is a descriptor
# as in this class
class Trace(object):
    def __init__(self, name):
        self.name = name

    def __get__(self, obj, objtype):
        print "GET:" + self.name + " = " + str(obj.__dict__[self.name])
        return obj.__dict__[self.name]

    def __set__(self, obj, value):
        obj.__dict__[self.name] = value
        print "SET:" + self.name + " = " + str(obj.__dict__[self.name])

# define the attributes of your class (must derive from object)
#  to be references to instances of a descriptor

class Point(object):
# NOTES:
# 1\. descriptor invoked by dotted attribute access:  A.x or a.x
# 2\. descripor reference must be stored in the class dict, not the instance dict
# 3\. descriptor not invoked by dictionary access: Point.__dict__['x']

    x = Trace("x")
    y = Trace("y")

    def __init__(self, x0, y0):
        self.x = x0
        self.y = y0

    def moveBy(self, dx, dy):
        self.x = self.x + dx     # attribute access does trigger descriptor
        self.y = self.y + dy

# trace all getters and setters    
p1 = Point(15, 25)
p1.x = 20
p1.y = 35
result = p1.x
p2 = Point(16, 26)
p2.x = 30
p2.moveBy(1, 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T12:36:54.867

就只读属性而言（参见上面的讨论），以下示例显示了它是如何完成的：

```
############################################################
#
#    descriptors
#
############################################################

# define a class where methods are invoked through properties
class Point(object):
    def getX(self):
    print "getting x"
    return self._x

    def setX(self, value):
    print "setting x"
    self._x = value

    def delX(self):
    print "deleting x"
    del self._x

    x = property(getX, setX, delX)

p = Point()
p.x = 55    # calls setX
a = p.x     # calls getX
del p.x     # calls delX

# using property decorator (read only attributes)
class Foo(object):
    def __init__(self, x0, y0):
    self.__dict__["myX"] = x0
    self.__dict__["myY"] = y0

    @property
    def x(self):
    return self.myX

f = Foo(4,6)
print f.x
try:
    f.x = 77        # fails: f.x is read-only
except Exception,e:
    print e 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T19:32:17.050

我遇到了类似的困惑这个问题，在我自己回答之后，为了繁荣，在这里报告我的发现似乎是谨慎的。

正如 ThiefMaster 已经指出的那样，“所有者”参数使诸如`classproperty`. 有时，您希望类将方法屏蔽为非方法属性，并且使用`owner`参数允许您使用普通描述符来做到这一点。

但这只是问题的一半。至于“只读”问题，这是我发现的：

我首先在这里找到了答案：http: [//martyalchin.com/2007/nov/23/python-descriptors-part-1-of-2/](http://martyalchin.com/2007/nov/23/python-descriptors-part-1-of-2/)。起初我不明白，我花了大约五分钟的时间才把头绕过去。最终说服我的是举了一个例子。

考虑最常见的描述符：`property`. 让我们使用一个简单的示例类，它有一个属性 count，即变量 count 被访问的次数。

```
class MyClass(object):
    def __init__(self):
        self._count = 0
    @property
    def count(self):
        tmp = self._count
        self._count += 1
        return tmp
    @count.setter
    def setcount(self):
        raise AttributeError('read-only attribute')
    @count.deleter
    def delcount(self):
        raise AttributeError('read-only attribute') 
```

正如我们已经建立`owner`的，函数的参数`__get__`意味着当你在类级别访问属性时，`__get__`函数会拦截getattr调用。碰巧的是，当在类级别访问时，代码`property`只是简单地[返回属性本身，但它可以做任何事情（比如返回一些静态值）。](http://docs.python.org/2/howto/descriptor.html#properties)

`__set__`现在，想象一下如果以同样的`__del__`方式工作会发生什么。除了实例级别之外，and 方法将在类级别拦截`__set__`所有`__del__`和`setattr`调用。`delattr`

因此，这意味着 的“计数”属性`MyClass`实际上是**不可修改**的。如果您习惯于使用 Java 等静态编译语言进行编程，这似乎不是很有趣，因为您无法修改应用程序代码中的类。但在 Python 中，你可以。类被视为对象，您可以动态分配它们的任何属性。例如，假设`MyClass`它是第三方模块的一部分，并且`MyClass`几乎完全适合我们的应用程序（假设除了 for 的代码之外还有其他代码`count`），只是我们希望 count 方法的工作方式有所不同。相反，我们希望它始终为每个实例返回 10。我们可以做到以下几点：

```
>>> MyClass.count = 10
>>> myinstance = MyClass()
>>> myinstance.count
10 
```

如果`__set__`截获对 的调用`setattr(MyClass, 'count')`，则无法实际更改 MyClass. 相反， for 的代码`setcount`会拦截它并且无法对它做任何事情。唯一的解决方案是编辑 MyClass 的源代码。（我什至不确定你是否可以在子类中覆盖它，因为我认为在子类中定义它仍然会调用`setattr`代码。但我不确定，因为我们已经在这里处理了反事实，我不真的没有办法测试它。）

现在，您可能会说，“这正是我想要的！我*故意*不希望我的用户重新分配我的类的属性！” 对此，我只能说你想要的东西是不可能使用幼稚的描述符的，我会指导你上面的推理。允许重新分配类属性更符合当前的 Python 习惯用法。

如果你*真的，**真的***想创建一个只读的类属性，我想我不会告诉你怎么做。但如果有解决方案，它可能涉及使用元类并创建`property`元*类*或修改元类的**setattr**和**delattr**代码。但这是深度魔法，远远超出了这个答案的范围（以及我自己对 Python 的能力）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-08T21:31:57.047

所有者只是实例的类，是为了方便而提供的。您始终可以从实例计算它：

```
owner = instance.__class__ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T11:54:25.140

1.  该`__set__`方法应该更改实例的属性。但是，如果您想更改所有实例共享并因此存在于类中的属性，例如，是类属性怎么办？这只能在您有权访问该类时才能完成，因此是 owner 参数。

2.  是的，如果您通过类分配给属性，则可以覆盖属性/描述符。这是设计使然，因为 Python 是一种动态语言。

希望能回答这个问题，尽管很久以前就有人问过了。

# javascript - 以编程方式更改 Listview countbubble

> ID：10562488
> 
> 赞同：0
> 
> 时间：2012-05-12T09:21:00.710
> 
> 标签：javascript, jquery, html, jquery-mobile

如果您在 JQuery Mobile 中有一个列表视图，其 countbubbles 定义如下：

```
<ul data-role="listview">
        <li><a href="index.html">Inbox <span class="ui-li-count">12</span></a></li>
        <li><a href="index.html">Outbox <span class="ui-li-count">0</span></a></li>
        <li><a href="index.html">Drafts <span class="ui-li-count">4</span></a></li>
        <li><a href="index.html">Sent <span class="ui-li-count">328</span></a></li>
        <li><a href="index.html">Trash <span class="ui-li-count">62</span></a></li>
    </ul> 
```

是否可以以编程方式更改计数气泡计数的值？例如，您可以将 id 添加到链接/a href，并使用

```
$('#exampleID').text('12'); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:34:24.750

是的，它会。这是一个简单的示例，它会在 5 秒后更新收件箱计数。[http://jsfiddle.net/codaniel/h3vuv/1/](http://jsfiddle.net/codaniel/h3vuv/1/)

# html-table - IE6表格宽度

> ID：10562492
> 
> 赞同：0
> 
> 时间：2012-05-12T09:21:15.887
> 
> 标签：html-table, css-float, width, internet-explorer-6

本文档在 IE6 中有一些意想不到的布局（在 IE 测试器中测试。）：

1.  .receptacle 的左边缘和 .albuminfo 框的左边缘之间的双倍边距
2.  表格不自适应宽度（在 .albumvocal 框中）

谁能帮助解决问题？如果您有另一种设置表格在 .albumvocal 框中具有 100% 宽度的方法，请告诉我。

--------------------------原始html---------- -----------------------------------------

```
<body>
<div id="receptacle">
<div class="albuminfo">
    <img alt="title" src="middle_special_329225.jpg" />
    <p>album info</p>
    <p>album info</p>
    <p>album info</p>
    <p>album info</p>
</div>
<div class="albumvocal">
<div style="width:100%">

    <h2>album name</h2>
    <table width="100%">
    <thead>
    <tr>
    <th>vocal</th>
    <th>artist</th>
    <th>zone</th>
    <th>style</th>
    </tr>
    </thead>
    <tr>
        <td>vocal1</td>
        <td>artist1</td>
        <td>zone1</td>
        <td>style1</td>

    </tr>
    <tr>
        <td>vocal2</td>
        <td>artist2</td>
        <td>zone2</td>
        <td>style2</td>

    </tr>

    </table>
    </div>
    </div>
    <div class="albumeaddinfo">
    </div>
</div>
</body> 
```

- - - - - - - - - - - - - - - - - - - - 风格 - - - - - ----------------------------------

```
 #receptacle{
        width:958px;
        margin:0 auto;
        border:1px solid #F00;}
    .albuminfo img{
        width:190px;
        height:190px;}
    .albuminfo{
        text-align:center;
    float:left;
    padding:1.5em;
    margin:2em 0 0 1%;
    border:1px solid #00F;}
.albumvocal{
    margin:2em 0 1em 30%;
    padding:1em;
    border:1px solid #F0F;}
.albumeaddinfo{
    clear:both;}
table {
    height:1%;
    zoom:1;
    width:100%;
    border: solid 1px #e8eef4;
    border-collapse: collapse;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:59:41.710

双倍边距问题几乎可以肯定是 IE6 众所周知的“浮动时双倍边距”错误。

有关该错误的详细讨论，请参见此处：[http ://www.positioniseverything.net/explorer/doubled-margin.html](http://www.positioniseverything.net/explorer/doubled-margin.html)

这是一个众所周知的错误，您可以通过使用`padding`代替`margin`或附加标记来解决它，但上面链接的页面还详细说明了应该解决问题的“修复”：

添加`display:inline`到`.albuminfo`.

这是一个 IE6 hack，实际上通常是糟糕的代码，因为浮动元素不应该有`display`属性。但它会解决 IE6 中的错误，并且不应该在其他浏览器中破坏您的代码（但一定要对其进行测试以确保！），因为浮动元素始终显示为块，因此`inline`样式将被忽略。

表格宽度的第二个问题我无法立即解决（我没有 IE6 可以在这台机器上使用，而且我不会为此安装它），但我注意到你有 CSS`width:100%`和`width="100%"`表上的属性。你不应该两者都需要，即使是 IE6，当然也不需要任何其他浏览器；放下属性。

最后，您有完全支持 IE6 的具体要求吗？如果你这样做了，那么我为你感到非常抱歉。但如果不是，或者如果您可以使用一个有效但看起来不太完美的网站，那么我建议忽略这些问题。很少有人还在使用 IE6，而且使用它的人已经习惯了看起来很垃圾的网站。

# java - 用java登录程序出错

> ID：10562493
> 
> 赞同：0
> 
> 时间：2012-05-12T09:21:23.803
> 
> 标签：java, login

我是 Java 新手，我正在制作一个登录程序（基于文本文件处理）作为我的 Java 作业的一部分，到目前为止，我已经编写了这段代码，但它只检查文本文件中的第一行。我也尝试添加一个 for 循环，但它也没有工作。

你能帮我解决这个问题吗？

（用户名和密码在文件中由制表符分隔，这就是我使用它的原因（user+"\t"+pass)） 已经尝试过网络，我没有找到任何好的教程。

```
 FileInputStream fstream = new FileInputStream("file.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    while ((strLine = br.readLine()) != null)   {
        if ((user+"\t"+pass).equals(strLine)) {System.out.println ("Sucess");}
    } 
```

文本文件是如此

```
 x  y
 x  z
 x  t 
```

因此，当您输入 x 和 y 时，程序会显示 Success 但对于 x 和 z 或 t 则没有结果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:27:03.030

这是完整的课程：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class Delete {

/**
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException {
    FileInputStream fstream = new FileInputStream("C:/file.txt");
    DataInputStream in = new DataInputStream(fstream);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    String strLine;
    String user = "john";
    String pass = "doe";
    while ((strLine = br.readLine()) != null) {
        if ((user + "\t" + pass).equals(strLine)) {
            System.out.println("Sucess");
        }
    }

} 
```

}

和file.txt：

```
john    doe
john    doe
john    doe
mary    doe 
```

如您所料，控制台输出为：

```
Sucess
Sucess
Sucess 
```

因此，您发布的代码确实检查了所有行。请粘贴您的文件内容以及您的用户名和密码字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:29:55.093

你期待标签，但发现连续的空间，反之亦然。检查一下。

```
String str="abc"+"\t"+"def";
System.out.println(str.equals("abc  def"));//this is tab so it is true 
```

但下面不是真的

```
String str="abc"+"\t"+"def";
System.out.println(str.equals("abc    def")); //this is space so it is false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T09:40:08.947

如果您对摆动组件有所了解，请访问此链接

[http://www.roseindia.net/answers/viewqa/Java-Beginners/7050-Login-Form-in-Java.html](http://www.roseindia.net/answers/viewqa/Java-Beginners/7050-Login-Form-in-Java.html)

如果您不知道，那么我建议您，您必须尝试通过使用逻辑程序来学习 Java 的基本概念。

您正在谈论登录表单。当你学习一些关于 UI 相关的东西时，你必须尝试这个。

在从应用程序设计登录时，您必须了解数据库连接...

希望，这对你来说很清楚..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T09:40:32.137

在您的文本文件中，所有数据都在一行中... readLine() 方法将在每次迭代中移至下一行.. 如果您的数据是

```
x     y

x     z

x     t 
```

而不是

```
x    y     x      z     x    t 
```

并确保您的文本文件与您的 .class 文件位于同一目录中（如您的代码所期望的那样）

# jquery - 带有ajax和django post的csrf

> ID：10562494
> 
> 赞同：4
> 
> 时间：2012-05-12T09:21:36.713
> 
> 标签：jquery, ajax, django, django-csrf

使用 jquery1.7.1 和 django1.3 ，我试图通过 ajax 发出一个发布请求，在我在[网上找到的一些教程代码中](http://lethain.com/intro-to-unintrusive-javascript-with-django/)

```
$(document).ready(function(){
    $("#create").click(create_note);

});

var create_note = function() {
  var title = $("#title").val()
  var slug = $("#slug").val()
  if (title != "" && slug != "") {
    var data = { title:title, slug:slug };
    console.log('title='+title);
    console.log('slug='+slug);
    var args = { type:"POST", url:"/create/", data:data, complete:done };
    $.ajax(args);
  }
  else {
    // display failure
  }
  return false;
}; 
```

url "/create/" 映射到 django 视图

```
(r'^create/$','notes.views.create_note'),

def create_note(request):
    error_msg = u"No POST data sent."
    if request.method == "POST":
        post = request.POST.copy()
        if post.has_key('slug') and post.has_key('title'):
            slug = post['slug']
            if Note.objects.filter(slug=slug).count() > 0:
                error_msg = u"Slug already in use."
            else:
                title = post['title']
                new_note = Note.objects.create(title=title,slug=slug)
                return HttpResponseRedirect(new_note.get_absolute_url())
        else:
            error_msg = u"Insufficient POST data (need 'slug' and 'title'!)"
    return HttpResponseServerError(error_msg) 
```

当我单击触发 javascript 函数的提交按钮时`create_note`，我收到 403 错误。应该是csrf的问题。。

我试图通过修改 ready 函数来解决这个问题

```
$(document).ready(function(){
        $.ajaxSetup({
        data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
    });
        $("#create").click(create_note);

    }); 
```

但它没有用..我仍然得到`403 error`

所以，我尝试修改`ajax`调用中的数据

```
var create_note = function() {
    var data = { title:title, slug:slug ,csrfmiddlewaretoken: '{{ csrf_token }}'};
    ...
    var args = { type:"POST", url:"/create/", data:data, complete:done };
    $.ajax(args);

}; 
```

仍然会导致403错误..

请告诉我应该做些什么来纠正这个问题..我看到了 关于这个的[django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)，但我很困惑如何使用它。我应该将整个`jQuery(document).ajaxSend(...`代码复制到我的 javascript 文件中..我在这里真的很困惑。 .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T09:26:30.203

您需要（[正如您链接到的文件所建议的那样](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)）复制整个`ajaxSend`方法......

你不需要以任何方式修改它——它是一个完整的解决方案——该`ajaxSend`方法实际上是事件的事件处理程序`ajaxSend`。`.ajax`它在您使用jQuery 中的方法时触发。[在此处查看 ajaxSend 文档](http://api.jquery.com/ajaxSend/)

上述文档中链接的方法将正确的`X-CSRFToken`标头附加到您的 AJAX 请求中。然后，您可以使用第一种方法发送 AJAX 请求。

# mysql - 从考勤表中报告 N 次或多次连续缺勤的 SQL 查询

> ID：10562495
> 
> 赞同：1
> 
> 时间：2012-05-12T09:21:45.983
> 
> 标签：mysql, sql, select, count, aggregate-functions

我有一个看起来像这样的表：

```
studentID | subjectID | attendanceStatus | classDate  | classTime | lecturerID |
12345678    1234        1                  2012-06-05   15:30:00
87654321
12345678    1234        0                  2012-06-08   02:30:00 
```

我想要一个查询，报告学生是否*连续缺席 3 个或更多课程。*基于 studentID 和 2 个特定日期之间的特定主题。每个班级可以有不同的时间。该表的架构是：

```
PK(`studentID`, `classDate`, `classTime`, `subjectID, `lecturerID`) 
```

出勤状态：1 = 出席，0 = 缺席

编辑：措辞问题，使其更准确，并真正描述了我的意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:54:41.010

我无法为此创建 SQL 查询。因此，我尝试了一个 PHP 解决方案：

1.  从表中选择所有行，按学生、学科和日期排序
2.  为缺勤创建一个运行计数器，初始化为`0`
3.  遍历每条记录：
    *   如果学生和/或科目与前一行不同
        *   将计数器重置为 0（存在）或 1（不存在）
    *   否则，即学生和科目相同时
        *   将计数器设置为 0（存在）或加 1（不存在）

然后我意识到这个逻辑可以很容易地使用 MySQL 变量来实现，所以：

```
SET @studentID = 0;
SET @subjectID = 0;
SET @absentRun = 0;

SELECT *,
CASE
    WHEN (@studentID  = studentID) AND (@subjectID  = subjectID) THEN @absentRun := IF(attendanceStatus = 1, 0, @absentRun + 1)
    WHEN (@studentID := studentID) AND (@subjectID := subjectID) THEN @absentRun := IF(attendanceStatus = 1, 0, 1)
END AS absentRun
FROM table4
ORDER BY studentID, subjectID, classDate 
```

您可能可以将此查询嵌套在另一个选择记录 where 的查询中`absentRun >= 3`。

# [SQL小提琴](http://sqlfiddle.com/#!2/964d7/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:55:03.200

此查询适用于预期结果：

```
SELECT DISTINCT first_day.studentID 
FROM student_visits first_day
LEFT JOIN student_visits second_day
    ON first_day.studentID = second_day.studentID
    AND DATE(second_day.classDate) - INTERVAL 1 DAY = date(first_day.classDate)
LEFT JOIN student_visits third_day
    ON first_day.studentID = third_day.studentID
    AND DATE(third_day.classDate) - INTERVAL 2 DAY = date(first_day.classDate)
WHERE first_day.attendanceStatus = 0 AND second_day.attendanceStatus = 0 AND third_day.attendanceStatus = 0 
```

它在每个学生的连续 3 个日期上将表“student_visits”（让我们这样命名您的原始表）逐步连接到自身，最后检查这些天的缺勤情况。Distinct 确保结果不会包含超过连续缺勤 3 天的重复结果。

此查询不考虑特定主题的缺勤 - 只是每个学生连续缺勤 3 天或更长时间。要考虑主题，只需在每个 ON 子句中添加 .subjectID ：

```
 ON first_day.subjectID = second_day.subjectID 
```

*PS：不确定这是最快的方式（至少它不是唯一的）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T15:03:35.767

不幸的是，mysql 不支持 windows 功能。使用 row_number() 或更好的累积总和（如 Oracle 支持）会更容易。

我将描述解决方案。假设您的表中有两个额外的列：

*   ClassSeqNum - 一个从 1 开始并为每个课程日期递增 1 的序列。
*   AbsentSeqNum - 每次学生缺课时从 1 开始的序列，然后在每次缺课时增加 1。

关键的观察是这两个值之间的差异对于连续缺席是恒定的。因为您使用的是 mysql，您可能会考虑将这些列添加到表中。在查询中添加它们是很大的挑战，这就是为什么这个答案这么长。

鉴于关键观察，您的问题的答案由以下查询提供：

```
select studentid, subjectid, absenceid, count(*) as cnt
from (select a.*,  (ClassSeqNum - AbsentSeqNum) as absenceid
      from Attendance a
     ) a
group by studentid, subjectid, absenceid
having count(*) > 2 
```

（好的，这给出了每个科目的学生缺勤的每个顺序，但我认为您可以弄清楚如何将其缩减为学生列表。）

你如何分配序列号？在 mysql 中，您需要进行自连接。因此，以下添加了 ClassSeqNum：

```
select a.StudentId, a.SubjectId, count(*) as ClassSeqNum
from Attendance a join
     Attendance a1
     on a.studentid = a1.studentid and a.SubjectId = a1.Subjectid and
        a.ClassDate >= s1.classDate
group by a.StudentId, a.SubjectId 
```

以下添加缺席序列号：

```
select a.StudentId, a.SubjectId, count(*) as AbsenceSeqNum
from Attendance a join
     Attendance a1
     on a.studentid = a1.studentid and a.SubjectId = a1.Subjectid and
        a.ClassDate >= a1.classDate
where AttendanceStatus = 0
group by a.StudentId, a.SubjectId 
```

所以最终的查询看起来像：

```
with cs as (
    select a.StudentId, a.SubjectId, count(*) as ClassSeqNum
    from Attendance a join
         Attendance a1
         on a.studentid = a1.studentid and a.SubjectId = a1.Subjectid and
            a.ClassDate >= s1.classDate
    group by a.StudentId, a.SubjectId
),
    a as (
    select a.StudentId, a.SubjectId, count(*) as AbsenceSeqNum
    from Attendance a join
         Attendance a1
         on a.studentid = a1.studentid and a.SubjectId = a1.Subjectid and
            a.ClassDate >= s1.classDate
    where AttendanceStatus = 0
    group by a.StudentId, a.SubjectId
)
select studentid, subjectid, absenceid, count(*) as cnt
from (select cs.studentid, cs.subjectid,
             (cs.ClassSeqNum - a.AbsentSeqNum) as absenceid 
      from cs join
           a
           on cs.studentid = a.studentid and cs.subjectid = as.subjectid
     ) a
group by studentid, subjectid, absenceid
having count(*) > 2 
```

# android - 关于安卓下载的一些基本问题

> ID：10562497
> 
> 赞同：0
> 
> 时间：2012-05-12T09:22:12.800
> 
> 标签：android

在下载与 Android 3.0 (API 11) 相关的东西时，我下载了除了

1.  谷歌 API
2.  XOOM
3.  谷歌 USB 驱动程序

即通过Android SDK管理器我只下载了以下内容

1.  Android SDK 工具
2.  SDK平台
3.  SDK 示例

其实我想下载Android 3.0下的所有东西，但由于互联网和巨大的文件大小而无法这样做。

**所以我想问一下我没有下载的东西的实际用途是什么，因此由于没有这些东西我不能开发什么类型的应用程序？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:30:59.057

实际上，您将无法使用 Google 提供的服务，例如地图。

> Google APIs Add-On 是 Android SDK 开发环境的扩展，可让您为包含 Google 的一组自定义应用程序、库和服务的设备开发应用程序。该插件的一个核心功能是 Maps 外部库，它允许您向 Android 应用程序添加强大的地图功能。

来源：[https ://developers.google.com/android/add-ons/google-apis/](https://developers.google.com/android/add-ons/google-apis/)

我的建议是使用eclipse IDE + Android api's & sdk，不要分开。

如果您遵循教程并且缺少实现功能的库，eclipse 会通知您缺少的库/附加组件并询问您是否要安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:32:56.323

*   您不能使用 Google-Api - 有关 Google API 附加组件包含的更多详细信息，可以在此处找到：[https ://developers.google.com/android/add-ons/google-apis/index](https://developers.google.com/android/add-ons/google-apis/index)
*   Xoom 是一款平板电脑，我怀疑是一个模拟器或者可能是一些 Xoom 特定的 Api，因此除非你想要一个 Xoom 特定的模拟器，否则不需要安装这个
*   您必须确保自己通过 USB 运行/连接真实设备（例如使用制造商的 USB 驱动程序）

你真的不需要前三件事来发展。但我会说，取决于你要做什么，安装 Google Api 可能是一个好主意，因为它提供了与 Google Maps 的交互。

关于 USB 驱动程序：它们本身并不需要，但如果您想部署/调试到将通过 USB 连接的真实设备，它们可能会派上用场。该 USB 驱动程序包中包含的设备可在此处找到：

[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T09:34:20.803

1.  Google APIs 主要包含 Google Maps 库。[Google API 插件的描述。](https://developers.google.com/android/add-ons/google-apis/)
2.  XOOM 是摩托罗拉 Xoom 模拟器的镜像。
3.  将 Android 设备连接到您的 PC 需要[Google USB 驱动程序（仅适用于 Windows）。](http://developer.android.com/sdk/oem-usb.html)

# mysql - 获取MYSQL随机行的最快方法

> ID：10562500
> 
> 赞同：1
> 
> 时间：2012-05-12T09:22:49.123
> 
> 标签：mysql, sql, database, random

> **可能重复：**
> [MySQL 从 600K 行中快速](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)
> [选择 10 个随机行使用 MySQL 选择随机行](https://stackoverflow.com/questions/6541644/selecting-random-rows-with-mysql)

我的数据库有 4 个列名称 ID 电子邮件性别，有 50 万行。

```
select * from table where sex='m'; 
```

我想获得 50 个随机行，其中 sex='M'; 哪种方法最快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:26:23.833

```
select * from table where sex='m'
ORDER BY RAND()
LIMIT 50 
```

# html - 缩小时页面结构中断

> ID：10562502
> 
> 赞同：0
> 
> 时间：2012-05-12T09:23:21.790
> 
> 标签：html, css

我想知道是否有其他人在设计网站时遇到过这个问题。基本上每次我远离我的网页时，结构都会中断，图像和容器会跳转到页面的其他部分。

我已经尽力通过测量每个 div 到最后一个像素来避免这种情况，但是会出现这个问题，是否有任何提示可以解决这个问题。

对不起，我不能展示一个例子，一切都在我的本地主机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:42:29.510

如需更好的网站，在缩放时不会中断，请通过以下链接。

1.  [为您的网页布局选择尺寸](http://www.elated.com/articles/choosing-dimensions-for-your-web-page-layout/)
2.  [如何使用 CSS 和 XHTML 等标准快速创建灵活的网站](http://www.ibm.com/developerworks/web/library/wa-rapid/)
3.  [寻找圣杯](http://www.alistapart.com/articles/holygrail/)

这里还有[蓝图测试：grid.css](http://www.blueprintcss.org/tests/parts/grid.html)。通过缩放检查该链接！！！

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:53:55.763

当您将正文内容放在表格中时，在您的正文标签之后使用 html 表格标签内容会自动获取其单元格的宽度和高度，因此在缩放时它应该不是问题

# javascript - jquery dynatree的setSelectedNodes？

> ID：10562504
> 
> 赞同：0
> 
> 时间：2012-05-12T09:23:52.247
> 
> 标签：javascript, jquery, jquery-plugins, dynatree, jquery-dynatree

我正在尝试使用 jquery/javascript 在现有的 dynatree 上选择节点，我搜索了很多关于它并阅读了文档但找不到像 setSelectedNodes 这样的东西，所以我可以根据选择来选择节点！

我是否遗漏了什么或 dynatree 只是不支持使用 jquery/javascript 进行动态节点选择！

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:55:25.540

不完全确定您的意思，但如果您有一个 ID 列表并且您想在树中选择它们，您可以执行以下操作：

```
$.each( [selectorHere], function(i, item){
   var key=item.prop('someIdAttribute');
   $("#tree").dynatree("getTree").selectKey(key);
}); 
```

# c# - 如何让 StreamReader.ReadLine() 区分“\r\n”和“\n”？

> ID：10562509
> 
> 赞同：2
> 
> 时间：2012-05-12T09:24:22.147
> 
> 标签：c#, http, networking, tcp

`StreamReader`我创建了一个函数，它使用和接收分块的 HTTP 包`TcpClient`。这是我创建的：

```
 private string recv()
    {
        Thread.Sleep(Config.ApplicationClient.WAIT_INTERVAL);

        string result = String.Empty;
        string line = reader.ReadLine();

        result += line + "\n";

        while (line.Length > 0)
        {
            line = reader.ReadLine();
            result += line + "\n";
        }

        for (int size = -1, total = 0; size != 0; total = 0)
        {
            line = reader.ReadLine();
            size = PacketAnalyzer.parseHex(line);

            while (total < size)
            {
                line = reader.ReadLine();
                result += line + "\n";
                int i = encoding.GetBytes(line).Length;
                total += i + 2; //this part assumes that line break is caused by "\r\n", which is not always the case
            }
        }

        reader.DiscardBufferedData();

        return result;
    } 
```

对于它读取的每个新行，它会在 中添加一个额外的长度 2 `total`，假设新行是由“\r\n”创建的。这适用于几乎所有情况，除非数据包含“\n”，我不知道如何将它与“\r\n”区分开来。对于这种情况，它会认为它已经读取了比实际更多的内容，从而短读了一个块并暴露`PacketAnalyzer.parseHex()`在错误中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T18:20:44.767

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 已解决：我做了以下两个行读取和流清空功能，我又回到了正轨。
> 
> ```
> NetworkStream ns;
> 
> //.....
> 
> private void emptyStreamBuffer()
> {
>     while (ns.DataAvailable)
>         ns.ReadByte();
> }
> 
> private string readLine()
> {
>     int i = 0; 
>     for (byte b = (byte) ns.ReadByte(); b != '\n'; b = (byte) ns.ReadByte())
>         buffer[i++] = b;
> 
>     return encoding.GetString(buffer, 0, i);
> } 
> ```

# image - 程序化中带有 img src 的 dijit.form.button

> ID：10562510
> 
> 赞同：3
> 
> 时间：2012-05-12T09:24:28.727
> 
> 标签：image, dojo, src, dijit.form

有没有办法在程序中为 dijit.form.button 添加 img src 标签？

在声明式中，我们可以这样做：

`<div dojoType="dijit.form.Button"><img src="images/img.png"/></div>`

在这种情况下，dijit 按钮完全被图像取代。

如果我尝试这样的事情，图像不会替换按钮，而是出现在：

```
var button = new dijit.form.Button({
        showLabel : false,
        label : "Validate",
        iconClass : "alphaIcon validateIcon",   
    }) 
```

您的帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T14:02:48.987

以下将做你想要的

```
this.button1.attr('label','<img src="' + this.constants.packagePrefix + '/images/button1.gif"/>'); 
```

我在这里找到它：http: [//mail.dojotoolkit.org/pipermail/dojo-interest/2009-August/038353.html](http://mail.dojotoolkit.org/pipermail/dojo-interest/2009-August/038353.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:59:29.840

我认为您的方法应该是完全按照您所做的并创建自定义 css 来修改外观。

```
myIconButton.dijitButton .dijitButtonNode {
  border: 0;
  background-image: none;
  background-color: transparent;
  box-shadow: none;
}

var button = ... // same as above
dojo.addClass(button.domNode, 'myIconButton'); 
```

要直接回答您的问题，您可以使用仅具有图像源的自定义模板创建自己的按钮小部件。

```
dojo.declare("MyIconButton", [Button], {
  templateString: '<div><img src="${imageSrc}"></img></div>'
}); 
```

注意：我没有测试这种方法，并且您可能需要在 MyIconButton 中进行其他修改，因为基 Button 类需要模板中的其他节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T19:33:53.283

我一直在为按钮使用带有背景图像的类。这*确实*使动态设置图像变得困难。所以，我成功地使用了这个：

```
domStyle.set(myButton.iconNode, 'background-image', 'url(images/icon.png)'); 
```

诀窍是使用 iconNode，而不是 domNode 或 containerNode。

# c++ - 标记覆盖的函数

> ID：10562511
> 
> 赞同：7
> 
> 时间：2012-05-12T09:24:33.780
> 
> 标签：c++, overriding, doxygen

是否存在命令，例如`\deprecated`，但标记被覆盖的函数？

Java 为您覆盖的函数提供了注释`@override`。我想在 C++ 中做同样的事情，这样我就可以看到我覆盖的超类函数。最好的情况是，文档页面还应该显示所有类成员函数，它们是继承的，但没有被超类函数的超链接显式覆盖。

我知道有一种方法可以从超类方法中复制文档。但我不想复制整个文档。我只想知道，一个函数是继承的。该行为应该类似于使用条形标记那些旧功能的已弃用选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T12:21:38.213

每个被覆盖的函数都会自动收到它已被重新实现的通知。例如，派生类中的重写函数会收到“从 MyBaseClass 重新实现”的通知。

它还在基类的文档中添加了通知。有提到“在测试中重新实现”

要显示所有功能，包括继承的功能，您可以设置[`INLINE_INHERITED_MEMB`](http://www.doxygen.nl/manual/config.html#cfg_inline_inherited_memb)为`YES`。然后 Doxygen 将每个继承但未覆盖的函数的文档复制到派生类的文档中。

例如，使用此来源时：

```
class TestBase
{
    public:
        /**
         * Base class function.
         */
        virtual void function();

      /**
       * Another function.
       */
      virtual void another();
};

class Test: public TestBase
{        
    public:
        /**
         * Overridden function.
         */
        virtual void function();
}; 
```

设置`INLINE_INHERITED_MEMB`为`YES`将导致`Derived`该类的以下文档：（使用 Doxygen 1.7.6）

> **成员函数文档**
> 
> `virtual void TestBase::another ( ) [virtual, inherited]`
> 另一个功能。
> 
> `virtual void Test::function ( ) [virtual]`
> 衍生的。
> 从 TestBase 重新实现。

我想这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-12T00:55:42.950

从**C++11 开始**，您可以使用**覆盖**说明符：

```
class A {
    virtual void jump() = 0;
    void talk() {}
};

class B: public A {
    void jump() const override {...} // Error: B:: jump does Not overrides A:: jump (A::Jump is not const...)
    void jump() override {...} // OK: B:: jump overrides A:: jump
    void talk() override {...} // Error: A::talk is not virtual
}; 
```

原始示例和官方文档：[http ://en.cppreference.com/w/cpp/language/override](http://en.cppreference.com/w/cpp/language/override)

# performance - 寻找最佳解决方案

> ID：10562512
> 
> 赞同：0
> 
> 时间：2012-05-12T09:24:41.430
> 
> 标签：performance, scala, optimization, review

考虑这个由作为案例类实例的对象组成的列表：

```
A, B, Opt(A),C, Opt(D), F, Opt(C), G, Opt(H) 
```

我想规范化这个列表以获得这个结果：

```
A, B, C, Opt(D), F, G, Opt(H) 
```

如您所见，如果有元素`A`并且`Opt(A)`我用 just 或其他方式替换它们`A`，我必须删除`OPT(A)`元素。

我想：

*   性能均值的最优解
*   最短解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:54:13.177

不是最有效的解决方案，但肯定是一个简单的解决方案。

```
scala> case class Opt[A](a: A)
defined class Opt

scala> val xs = List(1, 2, Opt(1), 3, Opt(4), 6, Opt(3), 7, Opt(8))
xs: List[Any] = List(1, 2, Opt(1), 3, Opt(4), 6, Opt(3), 7, Opt(8))

scala> xs flatMap {
     |   case o @ Opt(x) => if(xs contains x) None else Some(o)
     |   case x => Some(x)
     | }
res5: List[Any] = List(1, 2, 3, Opt(4), 6, 7, Opt(8)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T20:22:47.103

这可能更简洁一些，因为过滤是您想要的;-)：

```
scala> List(1,2,3,Some(4),5,Some(5))
res0: List[Any] = List(1, 2, 3, Some(4), 5, Some(5))

scala> res0.filter {
     | case Some(x) => !res0.contains(x)
     | case _ => true
     | }
res1: List[Any] = List(1, 2, 3, Some(4), 5) 
```

编辑：对于大型收藏，最好使用 a`toSet`或直接使用 a `Set`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T20:37:20.187

如果您不关心顺序，那么效率会导致您使用 Set：

```
xs.foldLeft(Set.empty[Any])({ case (set, x) => x match {
  case Some(y) => if (set contains y) set else set + x
  case y => if (set contains Some(y)) set - Some(y) + y else set + y
}}).toList 
```

或者：

```
val (opts, ints) = xs.toSet.partition(_.isInstanceOf[Option[_]])
opts -- (ints map (Option(_))) ++ ints toList 
```

# objective-c - 如何从类方法中使用委托（或传递消息）

> ID：10562515
> 
> 赞同：3
> 
> 时间：2012-05-12T09:25:47.633
> 
> 标签：objective-c, delegates, protocols, class-method

我有一个由视图控制器调用的类方法。我希望视图控制器知道类方法何时完成其任务（它上面有线程）。
我想我应该使用委托，但我需要一个`id delegate`，而且我不能通过 来调用它`self.delegate`，因为类方法中没有 self 。

我该怎么做？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:36:25.030

您可以在类级别存储委托（甚至与对象级别委托分开），但这对我来说听起来有点可疑。以下是你的做法：

在你的头文件中：

```
@interface SomeClass : SomeBaseClass
{
...
}

...
+ (id<SomeDelegateProtocol>)classDelegate
+ (void)setClassDelegate(id<SomeDelegateProtocol>) delegate
+ (void)myCleanupClassMethod

@end 
```

在您的实现文件中：

```
@implementation SomeClass
...

static id<SomeDelegateProtocol> _classDelegate = nil;

+ (id<SomeDelegateProtocol>)classDelegate
{
    return _classDelegate;
}

+ (void)setClassDelegate(id<SomeDelegateProtocol> delegate
{
    _classDelegate = delegate;
}

+ (void)myCleanupClassMethod
{
    if ([_classDelegate respondsToSelector:@selector(theDelegateMethod:)])
    {
        [_classDelegate theDelegateMethod:something];
    }
}

@end 
```

要实际使用此代码，您只需将类级委托设置为对象级委托并等待它被调用（您需要决定何时`myCleanupClassMethod`调用）：

```
// Somewhere else in the project
[SomeClass setClassDelegate:self]; 
```

# objective-c - 如何获取对超级视图的视图控制器的引用？

> ID：10562518
> 
> 赞同：0
> 
> 时间：2012-05-12T09:26:01.230
> 
> 标签：objective-c, controller, superview

有没有办法获得对我的超级视图的视图控制器的引用？在过去的几个月里，有好几次我需要这个，但不知道该怎么做。我的意思是，如果我在自定义单元格上有一个自定义按钮，并且我希望获得控制我当前所在单元格的表格视图控制器的引用，是否有代码片段？还是我应该通过使用更好的设计模式来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:38:26.763

你的按钮最好不知道它的 superviews 视图控制器。

但是，如果您的按钮确实需要向它不应该知道详细信息的对象发送消息，您可以使用委托将您想要的消息发送给按钮委托。

创建一个 MyButtonDelegate 协议并定义符合该协议的每个人都需要实现的方法（回调）。你也可以有可选的方法。

然后在按钮上添加一个属性，`@property (weak) id<MyButtonDelegate>`以便任何类型的任何类都可以设置为委托，只要它符合您的协议。

现在视图控制器可以实现 MyButtonDelegate 协议并将自己设置为委托。需要有关视图控制器知识的代码部分应在委托方法（或方法）中实现。

视图现在可以将协议消息发送给它的委托（不知道它是谁或什么），并且委托可以发送到该按钮的适当事物。这样可以重复使用相同的按钮，因为它不依赖于它的使用位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:19:36.477

当我问这个问题时，我在想，在我有带有按钮的自定义单元格的情况下，TableViewController 如何知道点击了哪个单元格的按钮。最近，阅读《iOS 食谱》一书，我得到了解决方案：

```
-(IBAction)cellButtonTapped:(id)sender
{
NSLog(@"%s", __FUNCTION__);
UIButton *button = sender;

//Convert the tapped point to the tableView coordinate system
CGPoint correctedPoint = [button convertPoint:button.bounds.origin toView:self.tableView];

//Get the cell at that point
NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:correctedPoint];

NSLog(@"Button tapped in row %d", indexPath.row);
} 
```

另一个更脆弱（虽然更简单）的解决方案是：

```
- (IBAction)cellButtonTapped:(id)sender 
{
    // Go get the enclosing cell manually
    UITableViewCell *parentCell = [[sender superview] superview];
    NSIndexPath *pathForButton = [self.tableView indexPathForCell:parentCell];
} 
```

最可重用的方法是将此方法添加到 UITableView 的类别中

```
- (NSIndexPath *)prp_indexPathForRowContainingView:(UIView *)view 
{
   CGPoint correctedPoint = [view convertPoint:view.bounds.origin toView:self]; 
   return [self indexPathForRowAtPoint:correctedPoint];
} 
```

然后，在你的 UITableViewController 类上，使用这个：

```
- (IBAction)cellButtonTapped:(id)sender 
{
    NSIndexPath *pathForButton = [self.tableView indexPathForRowContainingView:sender];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-12T13:41:55.673

如果您知道哪个类是您的视图控制器的父视图，您只需遍历子视图数组并为您的父类进行类型检查。

例如。

```
UIView *view; 

for(tempView in self.subviews) {

   if([tempView isKindOfClass:[SuperViewController class] ])

        {
           // you got the reference, do waht you want

         }

   } 
```

# google-apps-script - 如何在大量电子表格中最好地维护脚本？

> ID：10562520
> 
> 赞同：0
> 
> 时间：2012-05-12T09:26:12.963
> 
> 标签：google-apps-script

我即将发布一个应用程序（时间表），最多 80 位用户将在他们自己的时间表上工作，我分享给他们。所有这些工作表当前都包含 2 个脚本（onOpen 和 onEdit），它们支持用户输入他的数据。

现在我担心的是，如果我必须在某个时间点对脚本进行更改，我会更新所有这 80 个脚本。

有没有关于如何做到这一点的最佳实践？我可以为此使用“发布即服务”功能吗？如果是，我如何在这 80 个电子表格中应用此服务？

欢迎任何想法。

亨氏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:22:00.710

目前还没有简单、标准的方法来做到这一点。[我们都希望问题 40](http://code.google.com/p/google-apps-script-issues/issues/detail?id=40)解决后会容易得多。您应该为它加注星标以跟踪更新并为它投票。

现在，有一些解决方法。有一种可能适合你。其中一些在[第 40 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=40)评论中有所描述，您应该认真阅读。

第一个是“远程代码获取”。您的 80 个脚本中的每一个都将只有一个框架脚本，该脚本将获取要远程执行的代码。可能存储在“母亲”电子表格的单元格或站点中，您可以从脚本轻松访问的任何地方。这是一个例子：

```
var sourceScript = 'url-to-your-script-file-hosted-anywhere';

function onEdit() {
  eval(UrlFetchApp.fetch(sourceScript).getContentText());
  onEditImpl(); //this function is declared on the imported script
}

function onOpen() {
  eval(UrlFetchApp.fetch(sourceScript).getContentText());
  onOpenImpl(); //this function is declared on the imported script
}

//only hold the API calls that you may do on the imported script
//so there's a nice authorization popup for the user
function stub() {
  return;
  SpreadsheetApp.openById('').getRange('').setValue('');
  CalendarApp.getCalendarById('').createAllDayEvent('', null);
  SitesApp.getSite(''); //and so on...
  //add/remove all services you'll use here in the stub
  //more is better, in case you decide the script have to something new
  //you don't have to go and edit each script manually :)
} 
```

另一种可能的解决方法是有一个“模板”电子表格，其中包含脚本。这样您就可以通过再次复制（使用更新的脚本）重新创建所有 80 个电子表格，并将每个文件的值和权限复制到新文件上。这种方法的缺点是所有到文件的链接都会改变。文件、评论、文件夹等的每个用户设置都将丢失。但同样，根据您的使用情况，他们访问文件的方式，例如他们甚至可能没有 Google 帐户，可以将其共享给任何拥有链接的人，该链接位于您的站点中。我不知道场景，它可能适合你。

这就是我能想到的所有限制（使用 onOpen 和 onEdit）。所有这些都非常笨拙且不是真正的解决方案。但就目前而言，这就是我们所得到的。

# postgresql - postgres 中的咨询锁和评估顺序（如何在不使用单独查询的情况下获取锁）

> ID：10562521
> 
> 赞同：3
> 
> 时间：2012-05-12T09:26:13.227
> 
> 标签：postgresql, locking, operator-precedence

在不使用两个单独的查询的情况下执行特定语句之前是否有任何安全的方法来获取咨询锁？例如，我假设如果我执行以下操作，则不能保证在插入之前会获得锁：

```
WITH x AS (SELECT pg_advisory_lock(1,2)) INSERT ... 
```

但是有没有类似的方法可以达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T13:03:20.787

您还没有真正告诉我们足够的用例来确定，但一般来说，要在 PostgreSQL 中使用显式锁，需要在事务获取其快照之前获取它们。建议锁可以在你开始事务之前获取，大多数事务范围的锁应该在你开始事务之后立即获取；在需要交易ID的任何事情之前。

如果您在分配事务 ID 和设置快照之前确实不需要获取锁，并且发出一条语句来获取锁并执行插入对您很重要，请创建一个同时执行这两种操作的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:19:52.050

我很确定 SQL 标准要求实现表现得好像他们所做的第一件事就是有效地实现 WITH 子句中的公共表表达式。[PostgreSQL 符合这个要求](http://www.postgresql.org/docs/9.1/static/sql-select.html)。

公用表表达式（大部分）表现为命名对象。多个 CTE 按照声明的顺序实现。按名称向后引用按预期工作，按名称向前引用会引发错误。

所以我很确定，在*一般*情况下，CTE 必须在 INSERT 语句运行之前实现。但是在您的情况下，使用 PostgreSQL，我不确定，这就是原因。

> [PostgreSQL 的](http://www.postgresql.org/docs/9.1/static/queries-with.html)[公用表表达式] 的实现只评估 WITH 查询的行数，该行数与父查询实际获取的行数一样多。

我不确定 INSERT 语句是否在这个意义上获取一行。

# c++ - 查找与另一个二进制模式匹配的所有 2 位值，然后将它们相加

> ID：10562522
> 
> 赞同：6
> 
> 时间：2012-05-12T09:26:16.783
> 
> 标签：c++, c, computer-science, bit-manipulation

第一个值：

我有一个二进制值，它实际上是一系列紧凑的 2 位值。（即二进制值中的每2位代表0、1、2或3。）因此，例如，0、3、1、2变为00110110。在这个二进制字符串中，我只关心3的（或者，我可以翻转位，只关心 0，如果这让你的答案更容易）。所有其他数字都无关紧要（原因我们稍后会谈到）。

第二个值：

我有第二个二进制值，它也是以相同方式表示的一系列压缩的 2 位值。它与第一个值具有相同的长度。

数学：

我想要第二个值中与第一个值中的 3 具有相同位置的 2 位数字的总和。换句话说，如果我有：

```
First:  11000011
Second: 01111101 
```

然后我的答案将是“2”（我将“第二”中的第一个数字和最后一个数字加在一起，因为它们是唯一在第一个值中具有“11”的数字与它们匹配。）

我想在尽可能少的时钟周期内完成此操作（在 GPU 或 x86 架构上）。但是，我通常在寻找一种算法，而不是一种汇编解决方案。有没有比从每个数字一次屏蔽两个位并运行多个循环更快的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T09:34:17.783

当然。

```
 // the two numbers
 unsigned int a;
 unsigned int b; 
```

现在从 a 中创建一个掩码，该掩码在奇数位置包含“1”位，仅当在 a 中有“11”结束于同一位置时。

```
 unsigned int mask = a & (a >> 1) & 0x55555555; 
```

展开它以恢复“11”模式：

```
 mask = mask | (mask << 1); 
```

所以现在如果 a 是 1101100011，掩码是 1100000011。

然后用掩码掩码 b：

```
 b = b & mask; 
```

然后，您可以从 b 并行执行（屏蔽）数字的加法：

```
 b = (b & 0x33333333) + ((b & 0xcccccccc) >> 2);
 b = (b & 0x0f0f0f0f) + ((b & 0xf0f0f0f0) >> 4);
 b = (b & 0x00ff00ff) + ((b & 0xff00ff00) >> 8);
 b = (b & 0x0000ffff) + ((b & 0xffff0000) >> 16); 
```

对于 32 位数字，和现在位于 b 的最低位。这是用于并行添加位字段的众所周知的模式。对于大于 32 位的数字，您会为 64 位数字添加一轮，为 128 位数字添加两轮。

# vb.net - 如何在 VB.NET 中阻止右键单击 Flash Player

> ID：10562529
> 
> 赞同：0
> 
> 时间：2012-05-12T09:27:33.837
> 
> 标签：vb.net, flash

我已将 Flash 播放器（Shockwave Flash Object）嵌入到我的应用程序表单中。然后我想阻止用户右键单击。问题是我可以阻止用户的右键单击吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:02:31.440

`WebBrowser`您可以使用控件嵌入您的 Flash 内容并将其设置`IsWebBrowserContextMenuEnabled`为*False*，但我承认这个解决方案将是众所周知的大锤来破解坚果。

如果要使用[System.Windows.Forms.WebBrowser](http://msdn.microsoft.com/en-us/library/5d67hf8a)，只需将所需的 Flash 内容指定为`Navigate`目标：

```
Public Class Form1 Inherits Form
    Public Sub New()
        webBrowser1.IsWebBrowserContextMenuEnabled = False
        webBrowser1.Navigate(New Uri(string_variable_path_to_flash))
    End Sub
End Class 
```

# c# - SNMP PDU 中的变量绑定

> ID：10562530
> 
> 赞同：0
> 
> 时间：2012-05-12T09:27:56.040
> 
> 标签：c#, udp, snmp, packet, pdu

我正在用 C# 开发一个 SNMP 实用程序，它可以使用 SNMP 版本 1 数据包格式从指定的设备 OID 获取数据。

我几乎完成了它，但它们是我无法解决的问题。

我通过发送一个“Get”数据包成功查询了一个变量，但我需要通过发送一个数据包来查询多个变量。

我以这种方式尝试过：

```
//variable bindings
p[bytepos++] = 0x30; //variable bindings sequence
p[bytepos++] = Convert.ToByte(6 + oid_len - 1 + 6 + oid_len2 - 1); // Size of variable binding
p[bytepos++] = 0x30; //first variable bindings sequence
p[bytepos++] = Convert.ToByte(4 + oid_len - 1); // size
p[bytepos++] = 0x06; //Object type
p[bytepos++] = Convert.ToByte(oid_len - 1 ); //length

//Start of MIB
p[bytepos++] = 0x2b;

for (i = 2; i < oid_len; i++)
    p[bytepos++] = Convert.ToByte(oid[i]);

p[bytepos++] = 0x05; //Null object value
p[bytepos++] = 0x00; //Null

//start of second variable bindings sequence
p[bytepos++] = 0x30; //Second variable bindings sequence
p[bytepos++] = Convert.ToByte(4 + oid_len2 - 1); // size
p[bytepos++] = 0x06; //Object type
p[bytepos++] = Convert.ToByte(oid_len2 - 1); //length

//Start of MIB
p[bytepos++] = 0x2b;

//Place MIB array in packet
for (i2 = 2; i2 < oid_len2; i2++)
    p[bytepos++] = Convert.ToByte(oid2[i2]);

p[bytepos++] = 0x05; //Null object value
p[bytepos++] = 0x00; //Null 
```

我用谷歌搜索了很多，但找不到任何相关的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T12:06:29.807

从原始字节解析 SNMP PDU 绝不像您粘贴的代码段那么简单。

要在 C# 中认真使用 SNMP，您需要考虑以下库之一，

[http://www.lextm.com/2007/12/product-review-snmp-libraries-for-net.html](http://www.lextm.com/2007/12/product-review-snmp-libraries-for-net.html)

# iphone - EGORefreshTableHeaderView 在 iOS 5.1 上无法正常工作

> ID：10562531
> 
> 赞同：0
> 
> 时间：2012-05-12T09:28:06.360
> 
> 标签：iphone, ios, refresh, scrollview, tableview

我正在使用 EGORefreshTableHeaderView [1] 将新数据从服务器获取到 UITableView。

这工作得很好，但在 iOS 5.1 中，当用户释放下拉菜单时，EGORefreshTableHeaderView 不会滚动回预期的高度。通常它应该滚动回 `contentInset`60px。然后加载视图应该在加载过程所需的时间内可见，然后滚动回 0px inset。

第一次回滚应该发生在`egoRefreshScrollViewDidEndDragging:scrollView`方法中。

```
 - (void)egoRefreshScrollViewDidEndDragging:(UIScrollView *)scrollView {

    BOOL _loading = NO;
    if ([_delegate respondsToSelector:@selector(egoRefreshTableHeaderDataSourceIsLoading:)]) {
        _loading = [_delegate egoRefreshTableHeaderDataSourceIsLoading:self];
    }

    if (scrollView.contentOffset.y <= - 65.0f && !_loading) {

        if ([_delegate respondsToSelector:@selector(egoRefreshTableHeaderDidTriggerRefresh:)]) {
            [_delegate egoRefreshTableHeaderDidTriggerRefresh:self];
        }

        [self setState:EGOOPullRefreshLoading];
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.2];
        scrollView.contentInset = UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f);
        [UIView commitAnimations];

        //I've also tried it with block animations! But doesn't work!
        /*[UIView animateWithDuration:0.2 animations:^{
         scrollView.contentInset = UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f);

         }];*/
    }

} 
```

问题是当用户在屏幕的一半上释放滚动视图时（如下面的屏幕截图所示），滚动视图不会反弹回应该重新加载数据的 60px 插图。

我的第一个想法是因为动画。所以我将其更改为阻止动画，但没有任何变化。我想问题是动画没有`commitAnimations`在加载结束时执行。

![问题截图](../Images/381fd53d955251e2c1805544b3ed22d9.png)

有人对此有解决方案吗？

[1] ... [https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:34:14.953

我会调出他们的演示应用程序并遵循他们的委托方法。

把它放在 didEndDragging 里面：

```
[_delegate egoRefreshScrollViewDidEndDragging:scrollView]; 
```

# jquery - 将文档范围的 Jquery UI 主题应用于从 ajax 调用生成的按钮

> ID：10562532
> 
> 赞同：0
> 
> 时间：2012-05-12T09:28:35.403
> 
> 标签：jquery, ajax, user-interface, themes

我有一些在文档加载时生成的元素，还有一些是通过 ajax 调用动态生成的。

第一个很容易使用

```
$(".btn").button() 
```

我很难为 ajaxed 按钮设计样式。如果有一些合适的事件，我会简单地在加载时冒泡到文档级别，如下所示：

```
$(document).on("something",function(){
   $(".btn").button()
}) 
```

我试过在“加载”和“就绪”上使用，但都不起作用。有任何想法吗？

编辑：我当然可以在每个 ajax 回调上应用 .button() ，但是有一种更简单的方法，对吧？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:46:11.483

你可以使用[`ajaxSuccess()`](http://api.jquery.com/ajaxSuccess/)：

```
$('.btn').ajaxSuccess(function() {
  $(this).button();
}); 
```

# javascript - Javascript继承：未启用父属性

> ID：10562534
> 
> 赞同：0
> 
> 时间：2012-05-12T09:28:56.510
> 
> 标签：javascript

这是我实现继承的代码：

```
<html lang="en">
<head>
    <title>JavaScript Patterns</title>
    <meta charset="utf-8">
</head>
<body>
    <script>
        /* Title: Classical Pattern #5 - A Temporary Constructor (a pattern that should be generally avoided)
         Description: first borrow the constructor and then also set the child's prototype to point to a new instance of the constructor
         */

        /* Basic */
        /*function inherit(C, P) {
         var F = function () {};
         F.prototype = P.prototype;
         C.prototype = new F();
         }*/

        /* Storing the Superclass */
        /*function inherit(C, P) {
         var F = function () {};
         F.prototype = P.prototype;
         C.prototype = new F();
         C.uber = P.prototype;
         }*/

        /* Resetting the Constructor Pointer */
        /*function inherit(C, P) {
         var F = function () {};
         F.prototype = P.prototype;
         C.prototype = new F();
         C.uber = P.prototype;
         C.prototype.constructor = C;
         }*/

        /* in closure */
        var inherit = (function () {
            var F = function () {
            };
            return function (C, P) {
                F.prototype = P.prototype;
                C.prototype = new F();
                C.uber = P.prototype;
                C.prototype.constructor = C;
            }
        }());

        function Parent(name) {
            this.nameParent = name || 'Adam';
            this.parentName = "parent";//this.nameParent;
        }

        // adding functionality to the prototype
        Parent.prototype.say = function () {
            return this.nameParent;
        };

        // child constructor
        function Child(nameChild) {
            console.log("parentprop:" + this.parentName);
        }

        inherit(Child, Parent);

        var kid = new Child();
        console.log(kid.name); // undefined
        console.log(typeof kid.say); // function
        kid.nameParent = 'Patrick';
        console.log(kid.parentName);
        console.log(kid.say()); // Patrick
        console.log(kid.constructor.nameParent); // Child
        console.log(kid.constructor === Parent); // false

        // reference
        // http://shop.oreilly.com/product/9780596806767.do
    </script>
</body> 
```

我需要 Child console.log 显示继承的父类的“父”，但现在，它只显示未定义。

我不知道为什么它不从父属性继承。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:38:10.583

因为您从不调用 function `Parent`，这是设置属性的原因。如果你仔细观察你的`inherit`函数，你正在使用的`prototype`属性，`P`但你从来没有调用过`P` ——这是一件好事；谁`Child`应该打电话`P`：

```
function Child(nameChild) {
    Parent.call(this);
    console.log("parentprop:" + this.parentName);
} 
```

显然，这有一个缺点，即您必须`Parent`在多个地方列出 - 无论是在您对 的调用中`inherit`，还是在`Child`. 您可以通过在子函数上设置父构造函数来缓解这种情况`inherit`：

```
var inherit = (function () {
    var F = function () {
    };
    return function (C, P) {
        F.prototype = P.prototype;
        C.parent = P;          // <==== The new bit
        C.prototype = new F();
        C.uber = P.prototype;
        C.prototype.constructor = C;
    }
}()); 
```

...然后`Child`变成：

```
function Child(nameChild) {
    Child.parent.call(this);
    console.log("parentprop:" + this.parentName);
} 
```

如果你有兴趣彻底地做层次结构（支持调用“超级”方法等），你可能想看看我的[`Lineage`工具包](http://code.google.com/p/lineagejs)。这是一个小型工具包，可以自动执行很多此类工作，但如果您想了解这些工作的工作原理，源代码可能会带来有趣的阅读。那里还有一个[wiki 页面](http://code.google.com/p/lineagejs/wiki/ComparisonWithPlainJavaScript)，显示了多层、全功能的继承*，而不*使用 using `Lineage`（作为将其与 using 进行比较的一种手段`Lineage`）。

# cxf - 使用 cxf 和 guice 联系 Web 服务时出现错误 500

> ID：10562535
> 
> 赞同：1
> 
> 时间：2012-05-12T09:28:56.517
> 
> 标签：cxf, guice, apache-camel

我正在使用 cfx 2.5.1 和 guice 2.0。

我有这个ws接口

```
@WebService(targetNamespace="http://com.example.firstapp/")

public interface IWSEchoService {

    @WebMethod(operationName="echoService")
    String echoService(@WebParam(name="id") String id,@WebParam(name="payload") String payload) throws SOAPFault;

    @WebMethod(operationName="testAttachment")
    DataHandler testAttachment(DataHandler attachment) throws SOAPFault;

} 
```

以及实施

```
@WebService(targetNamespace = "http://com.example.firstapp/")

public class WSEchoServiceImpl implements IWSEchoService {

protected Log logger = LogFactory.getLog(this.getClass());

@WebMethod(operationName = "echoService")
public String echoService(String id, String payload) throws SOAPFault {
    return id + "|" + payload;
}

@WebMethod(operationName = "testAttachment")
public DataHandler testAttachment(DataHandler attachment) throws SOAPFault {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        FileUtil.copyInputStream(attachment.getInputStream(), baos);
        logger.debug(baos.toString());
    } catch (IOException ex) {
        logger.error(ex);
    }
    logger.info("Attachment ok! Size: " + baos.size());
    return attachment;
} 
```

}

我也有

```
public class ContextStartup implements ServletContextListener {

private Log logger = LogFactory.getLog(ContextStartup.class);
private CamelContext camelContext;

public void contextInitialized(ServletContextEvent sce) {
    try {
        camelContext = new GuiceCamelContext(Guice.createInjector(Stage.DEVELOPMENT, new MyModule()));
        camelContext.start();
        startWS();
    } catch (Exception ex) {
        logger.error(ex);
    }
}

.....

private void startWS() {
    String address = "http://localhost:8191/ws/echoService";
    Endpoint.publish(address, new WSEchoServiceImpl());
}

private class MyModule extends CamelModuleWithMatchingRoutes {

    @Override
    protected void configure() {
        super.configure();
        // bind camel component

    }
} 
```

}

最后是tomcat的web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <listener>
        <description>Start and destroy CamelContext</description>
        <listener-class>com.example.firstapp.ContextStartup</listener-class>
    </listener>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

现在在我的浏览器中我打电话

> `http://localhost:8191/ws/echoService?wsdl`

或者

> `http://localhost:8191/ws/echoService`

我有一个 http 500 错误，但在控制台或 tomcat 日志中我没有任何异常或错误

我也使用了本指南[http://jax-ws-commons.java.net/guice/](http://jax-ws-commons.java.net/guice/)但我得到了相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-18T15:47:22.890

您是否尝试用 IP 替换 localhost ？我们面临同样的问题，这解决了问题。

# android - 安卓游戏软件摇杆

> ID：10562537
> 
> 赞同：0
> 
> 时间：2012-05-12T09:28:59.123
> 
> 标签：android, angle, joystick

我正在寻找一种简单的方法来移动角色并使用软件操纵杆旋转它。虽然，我从来没有做过这样的事情，也不知道如何创建一个。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:36:08.713

也许您应该尝试查看此帖子[操纵杆](https://groups.google.com/forum/?fromgroups#!topic/android-developers/TfOL1WHjXsI)

# android - 通过 rtp 流发送 Android h264 捕获

> ID：10562549
> 
> 赞同：3
> 
> 时间：2012-05-12T09:31:51.973
> 
> 标签：android, voip, h.264, asterisk, rtp

我正在为 android 编写一个 rtp 视频流媒体，它从 Android 本地套接字读取 h264 编码数据并将其打包。问题是我做到了，但我在客户端（Voip）不断收到黑框。

通信是这样的：Android -> Asterisk -> Jitsi (Osx)（和反向）

有几点我还没有理解：

1) Android 的 mediarecorder 给了我一个原始的 h264 流，我怎么知道 NAL 何时根据该流开始/结束？它没有任何 0x000001 模式，但它确实有一个 0x0000 （我假设它是一个分隔符）

**编辑：**

添加更多信息。这些是输入缓冲区的 2 次（[第一次](http://dl.dropbox.com/u/671680/1.png)，[第二次](http://dl.dropbox.com/u/671680/2.png)）不同读取（按顺序）。如果我做对了，应该使用前 4 个字节来获取 NALU 长度，而第 5 个字节（索引 4）是 NALU 标头。

我将在这里复制字节的值以供将来使用：

```
1) 0 0 12 114 101 -72 4 25 -15 -1 -121 -53 .....

   length = (114&0xFF) + (12&0xFF)*256 + (0&0xFF)
   length -> 3186

   forbidden = 101 & 0x80
   forbidden -> 0

   nri = 101 & 0x60
   nri -> 96

   nal_unit_type = 101 & 0x1F
   nal_unit_type -> 5

2) 0 0 1 -93 97 -32 32 103 -14 93 -1 .... 

   length = (-93&0xFF) + (1&0xFF)*256 + (0&0xFF)
   length -> 419

   forbidden = 97 & 0x80
   forbidden -> 0

   nri = 97 & 0x60
   nri -> 96

   nal_unit_type = 97 & 0x1F
   nal_unit_type -> 1 
```

这个对吗？

2）如何从该流中获取 NALu 时间戳及其长度？

3）由于某种原因，数据包被标记（即使我取消设置标记）。（如果您检查 pcap 文件）[**修复：**我没有为每个数据包使用相同的 SSCR]

这是来自星号的流的[pcap](http://dl.dropbox.com/u/671680/android_last.pcap)捕获（来自 Android）。Android 设备是带有 Android ICS 的 Asus Transform Prime。

我在 sdp 中`1`发送了打包模式（`42801e``Z0KAHpWgUHxA``aM48gA==`

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:29:49.080

1.  没有“android h264 流格式”。如果使用 RTP 作为传输协议，则打包应遵循[RFC6184 。](https://www.rfc-editor.org/rfc/rfc6184)RTP 有效负载格式的起始码不存在。RTP 数据包中包含的内容完全取决于指定 NAL 单元是否可以聚合、分段等的打包模式。有关更多信息，请阅读关于[打包模式的 RFC 部分。](https://www.rfc-editor.org/rfc/rfc6184#section-5.4)打包模式通常通过 SDP 进行通信。

2.  时间戳是 RTP 标头的一部分。NAL 单元的长度再次取决于打包模式。

3.  标记是什么意思？你的意思是设置了RTP标记位吗？如果是这样，这又必须遵循 RFC 中规定的规则。

# xml - 如何使用 XSLT 转换此 XML 文件

> ID：10562551
> 
> 赞同：-2
> 
> 时间：2012-05-12T09:32:20.457
> 
> 标签：xml, xslt

我该如何进行这种转换。我想转换原始 XML 并保存新的。

源 XML：

```
<obs obs-time-local="20120424T0900" obs-time-utc="20120423T2300" time-zone="EST"
site="86071" station="Melbourne">
<d t="tx">19.2</d>
<d t="tn">7.9</d>
<d t="tg">4.6</d>
<d t="twd">0.6</d>
<d t="r">4.8</d>
<d t="ev">2.0</d>
<d t="wr">82</d>
<d t="t10">13.0</d>
<d t="t20">16.0</d>
</obs> 
```

目标 XML：

```
<marker name="Melbourne">
<maxTemperature>19.2</maxTemperature>
<minTemperature>7.9</minTemperature>
<rainTo9am>4.8</rainTo9am>
<windRun>82</windRun>
</marker> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:52:41.480

对于模板解决方案，请尝试：

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" indent="yes"/>

 <xsl:template match="obs">
  <marker name="{@station}">
   <xsl:apply-templates />
  </marker>

 </xsl:template>

 <xsl:template match="*" />

 <xsl:template match="d[@t='tx']">
   <maxTemperature><xsl:value-of select="." /></maxTemperature>
 </xsl:template>

 <xsl:template match="d[@t='tn']">
  <minTemperature><xsl:value-of select="." /></minTemperature>
 </xsl:template>

 <xsl:template match="d[@t='r']">
  <rainTo9am><xsl:value-of select="." /></rainTo9am>
 </xsl:template>

 <xsl:template match="d[@t='wr']">
  <windRun><xsl:value-of select="." /></windRun>
 </xsl:template>

 </xsl:stylesheet> 
```

或者对于更小的所见即所得解决方案，请尝试：

```
 <?xml version="1.0" encoding="utf-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" indent="yes"/>

 <xsl:template match="obs">
  <marker name="{@station}">
   <maxTemperature><xsl:value-of select="d[@t='tx']" /></maxTemperature>
   <minTemperature><xsl:value-of select="d[@t='tn']" /></minTemperature>
   <rainTo9am><xsl:value-of select="d[@t='r']" /></rainTo9am>
   <windRun><xsl:value-of select="d[@t='wr']" /></windRun>
  </marker>
 </xsl:template>

 </xsl:stylesheet> 
```

# android - 如何自动测试活动堆栈的状态？

> ID：10562552
> 
> 赞同：0
> 
> 时间：2012-05-12T09:32:34.513
> 
> 标签：android, android-activity, automated-tests, robotium

我想确保当用户按下“关闭”按钮时，他不会看到正在测试的活动，而是看到“主”屏幕。

使用 Robotium 我可以写例如

```
@Override 
protected void setUp() throws Exception { 
    solo = new Solo(getInstrumentation(),getActivity()); 
} 

public void testMainUseCase() throws InterruptedException {
    solo.clickOnText("close");

    Log.w("CURRENT_ACT", solo.getCurrentActivity().getClass().toString());  
} 
```

但是在日志中，我得到“MainActivity”（这是被测活动），即使我可以在我的设备上看到该活动已关闭。

另一方面，使用 Roboelectric 我可以编写这样的代码段：

```
@Test
public void shouldStopWhenRejectButtonClicked() throws Exception {      
      activity.onCreate(null);

      clickOn(activity.findViewById(R.id.close));
} 
```

但同样，我不知道如何检查用户看到的活动是否不再是被测活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:40:11.800

您可以做的是检查焦点是否仍然在被测活动上。如果焦点，solo.getCurrentActivity().hasWindowFocus() 是假的，那么另一个活动已经启动，现在有焦点。

# c# - Kinect SDK 播放器检测

> ID：10562554
> 
> 赞同：8
> 
> 时间：2012-05-12T09:33:26.660
> 
> 标签：c#, kinect

我刚刚创建了一个 2 人游戏（如 ShapeGame）***，但问题是当其中一名玩家离开游戏场景时，我无法检测到哪个（哪个玩家）离开了游戏。***

认为游戏中有 2 辆汽车。第一个检测到的播放器（称为 player1）使用左侧播放器，播放器 2 使用右侧播放器。当player1离开场景时，player2突然控制了左车，如果player1重新加入游戏，player1又收回了左车的控制权，player2控制了右车。

```
int id = 0;  
foreach (SkeletonData data in skeletonFrame.Skeletons)
{
    if (SkeletonTrackingState.Tracked == data.TrackingState)
    {
        // do some work

        id++;
    }
} 
```

事情是程序`id = 0`为第一个检测到的玩家（称为player1）和第二个检测到的玩家（称为player2）提供1。当玩家2离开游戏并重新加入时，没有问题。它再次需要`id = 1`。但是当player1离开游戏时，player2会`id = 0`因为它是此时第一个检测到的玩家。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:36:51.083

每个玩家在 Skeleton 数组中都有一个索引：

```
void nui_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e) {
    SkeletonFrame sf = e.SkeletonFrame;
    //check which skeletons in array are active and use that array indexes for player index
    SkeletonData player1 = sf.Skeletons[playerIndex1];
    SkeletonData player2 = sf.Skeletons[playerIndex2]; 
```

您可以使用该索引来识别您的玩家是否离开和回来。
但是，如果**两个**玩家都离开了 Kinect 的视线，那么当他们再次进入 Kinect 可见性时，玩家索引并不正确。

# objective-c - JSON 文本和变量计数

> ID：10562563
> 
> 赞同：0
> 
> 时间：2012-05-12T09:34:40.080
> 
> 标签：objective-c, xcode

我是这样读的……

```
NSString *fileContent = [[NSString alloc] initWithContentsOfFile:path];  

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil];  

// getting the data from inside of "menu"  

NSString *message = (NSString *) [data objectForKey:@"message"];
 NSString *name = (NSString *) [data objectForKey:@"name"];

NSArray *messagearray = [data objectForKey:@"message"];
NSArray *namearray    = [data objectForKey:@"name"];

NSDictionary* Dictionary = [NSDictionary dictionaryWithObjects:message forKeys:name];

for (NSString* Key in [Dictionary allKeys]){
    NSLog(@"%@ %@",Key,[Dictionary objectForKey:Key]);

} 
```

...这个 JSON 文件...

```
{"message":["Untitled1a","Untitled2a","Untitled3a"],"name":    ["Untitled1b","Untitled2b","Untitled3b"]} 
```

……这就是结果……

```
Untitled3b Untitled3a
2012-05-12 11:31:17.983 Quick Homework[721:f803] Untitled1b Untitled1a
2012-05-12 11:31:17.983 Quick Homework[721:f803] Untitled2b Untitled2a 
```

...但是对于每一对（无标题 1b 2b），我想分配两个 UITextField，以显示对应的文本...

我尝试使用这种方法：

```
for (NSString *string in messagearray){

}do{
    NSLog(@"happt = %i", b);
    b++;

}

while(b == b);

//While loop
while (b == b ) {
    NSLog(@"x = %i", b);
    b++;
}

} 
```

我想计算数组中的对象，以便重复 UITextField 的分配代码该次数，并相应地显示文本，但我不能。请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:03:53.550

为什么不能使用-count？

`b = [messagearray count]`

* * *

直接回答你的问题：

```
b = 0;
for (id item in messagearray)
    b++; 
```

# http - proccess.binding("net") - 没有这样的模块

> ID：10562564
> 
> 赞同：4
> 
> 时间：2012-05-12T09:34:46.947
> 
> 标签：http, node.js, binding, process

将多节点与节点 v0.5.10 一起使用时，我收到以下错误：

错误代码： http: [//pastebin.com/SQi6v2Ap](http://pastebin.com/SQi6v2Ap)

这是指 netBinding = process.binding("net");

我尝试使用以下解决方案：(http)nodejs.org/docs/latest/api/cluster.html，因为该线程中的人建议我这样做：[https ://github.com/kriszyp/multi-node/问题/14](https://github.com/kriszyp/multi-node/issues/14)

我研究了安装 simplecluster 的教程，但无济于事。如果有人能提供一个非常外行的指南，我真的很感激，因为不幸的是我很新，如果有人能给我一个虚拟证明的逐步指南来“安装”这个模块，那对我来说意义重大（我有以前从未安装过任何模块，最近才偶然发现节点 js 的世界并仍在探索）感谢您的帮助，非常感谢

# java - jfreeChart中字符串X轴的重叠

> ID：10562565
> 
> 赞同：1
> 
> 时间：2012-05-12T09:35:12.553
> 
> 标签：java, string, jfreechart, overlapping

我使用 jfreechart 来绘制图表。图表中X轴的类型为字符串类型。当数据数量增长时，X轴标签会发生重叠。我的问题是如何控制字符串类型 x 轴的重叠。对于整数或日期时间类型，有解决方案和方法，但对于字符串，我没有找到字符串类型 x 轴的任何内容。如果有办法请帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T20:57:13.650

一种简单的方法可能是将 X 轴标签垂直而不是水平。我以前用它来防止标签重叠。

```
domain.setVerticalTickLabels(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T00:35:27.763

您可以`setVerticalTickLabels(true)`在域轴上使用，如本[例](https://stackoverflow.com/a/5522583/230513)所示。

# java - JFileChooser 组件显示奇怪

> ID：10562568
> 
> 赞同：2
> 
> 时间：2012-05-12T09:35:52.297
> 
> 标签：java, swing, jfilechooser

我试图在文件选择器对话框中打开一个文件，但是，当我打开一个文件或只是关闭对话框时。对话框再次出现，我必须关闭它两次。这是我的代码，不知道有什么问题

```
private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    try {
        // TODO add your handling code here:
        ObjectInputStream input;
        JFileChooser openFileChooser = new JFileChooser();
        openFileChooser.setDialogType(JFileChooser.SAVE_DIALOG);
        openFileChooser.showOpenDialog(null);
        openFileChooser.setCurrentDirectory(new File("."));
        if (openFileChooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION){
            input = new ObjectInputStream(new FileInputStream(openFileChooser.getSelectedFile()));
            input.close();
        }
        javax.swing.JFrame openFileFrame = new javax.swing.JFrame();        
        openFileFrame.setLayout(new BorderLayout());
        openFileFrame.setLocationRelativeTo(null);
        openFileFrame.add(openFileChooser, BorderLayout.CENTER);
        openFileFrame.pack();
        openFileFrame.setVisible(true);
    } catch (IOException ex) {
        Logger.getLogger(GUI.class.getName()).log(Level.SEVERE, null, ex);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:45:15.007

此代码行创建第一个

```
JFileChooser openFileChooser = new JFileChooser();
openFileChooser.setDialogType(JFileChooser.SAVE_DIALOG);
openFileChooser.showOpenDialog(null);
openFileChooser.setCurrentDirectory(new File("."));
if (openFileChooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION){
   input = new ObjectInputStream(new FileInputStream(openFileChooser.getSelectedFile()));
   input.close();
} 
```

其余代码行嵌入第二个

```
javax.swing.JFrame openFileFrame = new javax.swing.JFrame();        
openFileFrame.setLayout(new BorderLayout());
openFileFrame.setLocationRelativeTo(null);
openFileFrame.add(openFileChooser, BorderLayout.CENTER);
openFileFrame.pack();
openFileFrame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:02:33.703

删除第一次出现的 openFileChooser.showOpenDialog(null);

# windbg - 在windbg中使用“bl”命令列出断点时如何显示源文件&&行号信息？

> ID：10562570
> 
> 赞同：2
> 
> 时间：2012-05-12T09:36:19.767
> 
> 标签：windbg

当我使用`bl`命令列出windbg中的所有断点时，它输出：

```
1020 e 004a62b0     0001 (0001)  0:**** wtltest!`dynamic initializer for 'g_bInitialized''
1021 e 00491050     0001 (0001)  0:**** wtltest!___mb_cur_max_l_func
1022 e 0049fb50     0001 (0001)  0:**** wtltest!_ismbbprint
1023 e 004671c0     0001 (0001)  0:**** wtltest!__sbh_alloc_new_group
1024 e 00469390     0001 (0001)  0:**** wtltest!___setlc_active_func
1025 e 00463760     0001 (0001)  0:**** wtltest!Is_bad_exception_allowed
1026 e 0049b4b0     0001 (0001)  0:**** wtltest!isspace
1027 e 0044f790     0001 (0001)  0:**** wtltest!__ArrayUnwind
1028 e 00490170     0001 (0001)  0:**** wtltest!__init_monetary
1029 e 00488950     0001 (0001)  0:**** wtltest!UnDecorator::doFunctionReturns
1030 e 004883d0     0001 (0001)  0:**** wtltest!UnDecorator::getPointerTypeArray
1031 e 00456890     0001 (0001)  0:**** wtltest!_set_winver
1032 e 0049c720     0001 (0001)  0:**** wtltest!__tzset
1033 e 0049b9b0     0001 (0001)  0:**** wtltest!_iscsymf_l
1034 e 0048b770     0001 (0001)  0:**** wtltest!DNameStatusNode::length
1035 e 0045aeb0     0001 (0001)  0:**** wtltest!_wcsicmp_l
1036 e 0048be80     0001 (0001)  0:**** wtltest!_mbstowcs_s_l 
```

我想知道哪个文件&&在哪一行的具体功能，然后我查看windbg帮助文件，它说：如果你启用了源代码行号加载，bl命令显示文件和行号信息而不是地址偏移量。

我用谷歌搜索它，`.lines -e`用来启用它。但仍然没有源文件 && 行号。如何获取这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:03:36.727

如果断点作为源断点输入，我相信“bl”仅显示源/行号。这就是我的经验。

# css - 使用 CSS 的 DIV 跨浏览器解决方案

> ID：10562571
> 
> 赞同：0
> 
> 时间：2012-05-12T09:36:22.973
> 
> 标签：css, html, height, cross-browser

我无法`height`在跨浏览器中获取我的 div（至少 Chrome 和 Firefox 应该看起来一样）

这是我想说的截图：

![在此处输入图像描述](../Images/7c1a72800d30e44f79131cb2499b5883.png)

如您所见，Firefox 与 chrome 相比存在高度差异。我无法解决它的高度，我需要一个更好的解决方案来解决这个问题

CSS：

```
 .container {
            width: 500px;
            max-height: 730px;
            margin: 10px;
            border: 1px solid #fff;
            background-color: #ffffff;
            box-shadow: 0px 2px 7px #292929;
            -moz-box-shadow: 0px 2px 7px #292929;
            -webkit-box-shadow: 0px 2px 7px #292929;
            border-radius: 10px;
            -moz-border-radius: 10px;
            -webkit-border-radius: 10px;
        }
   .mainbody,.header,.footer {
            padding: 5px;
        }
        .mainbody {
            margin-top: 0;
            min-height: 150px;
            max-height: 615px;
            overflow: auto;
        }
   .header {
            height: 40px;
            border-bottom: 1px solid #EEE;
            background-color: #ffffff;
            height: 40px;
            -webkit-border-top-left-radius: 5px;
            -webkit-border-top-right-radius: 5px;
            -moz-border-radius-topleft: 5px;
            -moz-border-radius-topright: 5px;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }
    .footer {
            height: 40px;
            background-color: whiteSmoke;
            border-top: 1px solid #DDD;
            -webkit-border-bottom-left-radius: 5px;
            -webkit-border-bottom-right-radius: 5px;
            -moz-border-radius-bottomleft: 5px;
            -moz-border-radius-bottomright: 5px;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        } 
```

​ HTML：

```
<div class="container">
<div class="header">Header</div>
<div class="mainbody">
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
    <p>Body</p>
</div>
<div class="footer">Footer</div> 
```

​</p>

**[演示](http://jsfiddle.net/yCSHq/1/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:50:02.123

如果我在 Firefox 和 chrome 中测试你的演示，两者的高度是相同的。我认为您的浏览器之一具有不同的缩放级别。在两个浏览器中同时按下*ctrl*和*0*键并再次比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:01:50.697

*顺便说一句，另一个答案已被接受。我为有同样问题的人发布我的答案，但问题的另一个原因*

如果不是缩放问题，可以使用**reset.css**

有了它，您**[在 jsfiddle 上的演示](http://jsfiddle.net/matmuchrapna/yCSHq/3/)**在所有浏览器中看起来都一样（从左到右，chrome、firefox、opera 和 safari） ![在此处输入图像描述](../Images/ed72cd638816663754eede51e813a965.png)

# iphone - MKStoreKit 不适用于 iPod 2

> ID：10562573
> 
> 赞同：0
> 
> 时间：2012-05-12T09:36:51.073
> 
> 标签：iphone, ipod, mkstorekit

我正在尝试将 MKStoreKit 集成到我的游戏中，但是当 [MKStoreManager sharedManager] 调用时，应用程序在 ipod 2 上崩溃并出现错误：

dyld：惰性符号绑定失败：找不到符号：_objc_retain 引用自：/var/mobile/Applications/2EA46519-12C1-4ED8-B19B-ED4AFA178F81/uni.app/uni 预期在：/usr/lib/libobjc.A.dylib

dyld：找不到符号：_objc_retain 引用自：/var/mobile/Applications/2EA46519-12C1-4ED8-B19B-ED4AFA178F81/uni.app/uni 预期在：/usr/lib/libobjc.A.dylib

//最新的MKStOreKit，Xcode 4.2.1，在其他设备上没有出现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:27:42.993

对我来说，这听起来像是一个 ARC 问题。

iPod 上运行的 iOS 版本是什么？ARC 将适用于 iOS 4 及更高版本。

尝试`-fobjc-arc`为您的项目添加“其他链接器标志”构建设置。

# java - javax.crypto.BadPaddingException：给定最终块未正确填充 - Android

> ID：10562577
> 
> 赞同：1
> 
> 时间：2012-05-12T09:37:08.977
> 
> 标签：java, android, encryption, encryption-symmetric

我已阅读有关此错误的信息，但似乎无法正常工作。

AES解密的功能是：

```
 public static byte[] decrypted_Data(byte[] crypt) throws Exception {

  String seed = "SuperSecretPassword";

  KeyGenerator keygen = KeyGenerator.getInstance("AES");

  SecureRandom secrand = SecureRandom.getInstance("SHA1PRNG");

  secrand.setSeed(seed.getBytes());

  keygen.init(128, secrand);

  SecretKey seckey = keygen.generateKey();

  byte[] rawKey = seckey.getEncoded();

 SecretKeySpec skeySpec = new SecretKeySpec(rawKey, "AES");

 Cipher cipher = Cipher.getInstance("AES");

 cipher.init(Cipher.DECRYPT_MODE, skeySpec);

 byte[] decrypted = cipher.doFinal(crypt);

  return decrypted;
} 
```

加密的功能是一样的，除了

```
cipher.init(Cipher.ENCRYPT_MODE, skeySpec); 
```

我在 Android 上调用这些函数如下：

```
BufferedInputStream bis = new BufferedInputStream(photoStream);

byte[] mybytearray = new byte[photoStream.available()];

mybytearray = encrypted_Data(mybytearray); 
```

在服务器上如下：

```
 byte[] mybytearray = new byte[10000000];

   mybytearray_1 = decrypted_Data(mybytearray_1); 
```

这是我第一次使用这些加密功能，我在接收时做错了什么：

```
javax.crypto.BadPaddingException: Given final block not properly padded 
```

# c# - 将数据集数据保存到其他数据库

> ID：10562582
> 
> 赞同：0
> 
> 时间：2012-05-12T09:37:34.360
> 
> 标签：c#, .net

我有与数据库连接的数据集。Dataset 和 TableAdapterManager 是 VS 基于连接自动创建的。

我可以做`this.tableAdapterManager.UpdateAll(testcheckerDataSet);` 它工作正常。

接下来我（使用 3d 方数据库编辑器）将 .db 文件复制到“blank_testing.db”（第二个数据库），然后从中删除所有数据。所以它只是没有数据的方案。

现在我（在代码中）用来自“testchecker.db”（1st db）的数据填充数据集，使用 from 元素更改数据并希望将数据保存到 2nd db，然后保存到 1st db。我尝试为每个适配器设置连接字符串。

```
string originalPath = tableAdapterManager.Connection.ConnectionString;

       string ns = tableAdapterManager.Connection.ConnectionString.Replace("testchecker.db", "blank_testing.db");

        tableAdapterManager.Connection.ConnectionString = ns;
        group_testingTableAdapter.Connection.ConnectionString = ns;
        groupsTableAdapter.Connection.ConnectionString = ns;
        testingTableAdapter.Connection.ConnectionString = ns;

       this.tableAdapterManager.UpdateAll((testcheckerDataSet) testcheckerDataSet.Copy() ); // here error

        tableAdapterManager.Connection.ConnectionString = originalPath;
        group_testingTableAdapter.Connection.ConnectionString = originalPath;
        groupsTableAdapter.Connection.ConnectionString = originalPath;
        testingTableAdapter.Connection.ConnectionString = originalPath;

this.tableAdapterManager.UpdateAll( testcheckerDataSet ); 
```

但我收到错误“并发冲突，更新命令从 1 影响 0”。我认为这是因为 2nd db 根本没有数据。

那么有人可以告诉我如何将当前数据集保存到另一个数据库文件，然后再保存到第一个（原始）数据库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:48:20.000

这里的问题是，当您调用`UpdateAll`方法时，它会尝试从数据库中查找先前的记录并进行更新。但是在第二个数据库中没有记录。您可以尝试的是遍历您中的所有 DataRows`DataTable`并使用该`DataRow.SetAdded()`方法更改行的`DataRowState`，然后它将记录视为新添加的。

**还有一件事：**
`SetAdded`只能在 is 的实例`DataRow`上调用。你可以在. 然后每个属性也发生变化；添加和修改的行变为未更改，删除的行被删除。现在您可以调用.`RowState``Unchanged``AcceptChanges``DataSet``RowState``DataRow``DataRow.SetAdded()`

# ant - 如何检查目录中是否存在特定文件

> ID：10562583
> 
> 赞同：0
> 
> 时间：2012-05-12T09:38:02.877
> 
> 标签：ant

我有一个 jar 文件，`/programs/src`我希望我的程序打印一条消息，表明它存在于目录中：

```
<if>
    <available file="**/*.jar" />
    <then>
        <echo message="Available" />
    </then>
    <else>
    <echo message="Not Available" />
    </else> 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:46:35.960

文档中没有任何内容`<available>`表明它可以处理通配符。您需要使用实际的文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:34:30.110

您可以使用`${toString:yourfilesetid}`ant 的内置机制与
**[Ant Addon Flaka](http://code.google.com/p/flaka/)**相结合，如下所示：

```
<project name="demo" xmlns:fl="antlib:it.haefelinger.flaka">
 <fileset dir="/home/rosebud/temp" includes="**/*.jar" id="foobar"/>
  <fl:choose>
   <fl:when test=" '${toString:foobar}' ne '' ">
    <echo message="Available" />
    <!-- .. other stuff -->
   </fl:when>
   <fl:otherwise>
    <echo message="Not Available" />
    <!-- .. other stuff -->
   </fl:otherwise>
  </fl:choose>
</project> 
```

# sql-server-2008 - T-SQL如何在插入前修改值

> ID：10562584
> 
> 赞同：4
> 
> 时间：2012-05-12T09:38:07.097
> 
> 标签：sql-server-2008, tsql

我发现在 sql server 中只有 after 而不是 triggers。并且修改插入的 pesudo 表中的值是非法的。然后我的问题出现了：如果我想检查将要插入到我的表中的数据，并且当数据违反我的约束时，我应该将这些值修改为默认值，该怎么做？插入后如何更新值？但是，如果我的表中没有唯一的主键或列，我如何找到刚刚插入的行然后更新它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-12T09:45:19.233

基本上，使用`INSTEAD OF INSERT`触发器，您可以实现您要查找的内容 - 只需从伪表中读取数据，对其进行`INSERTED`修改，然后将其插入到表中

所以你的触发器看起来像这样：

```
CREATE TRIGGER YourTrigger ON dbo.YourTable    
INSTEAD OF INSERT
AS
    SET NOCOUNT ON

    -- do the INSERT based on the INSERTED pseudo table, modify data as needed
    INSERT INTO dbo.YourTable(Col1, Col2, ....., ColN)
      SELECT 
          Col1, 2 * Col2, ....., N * ColN
      FROM 
          INSERTED 
```

当然，您也可以在`WHERE`该语句中添加例如子句形式的检查，`SELECT .... FROM INSERTED`例如忽略某些行 - 可能性是无穷无尽的！

# php - 如何对大型数组进行“简单查询”？

> ID：10562587
> 
> 赞同：-3
> 
> 时间：2012-05-12T09:38:21.473
> 
> 标签：php, arrays

我有这行代码：

```
// echo the name of one forum (without additional DB query)
echo ($mybb->cache->cache['forums'][19][name]); 
```

这给出了一个论坛的名称。我需要通过“查询”数组来列出所有论坛。显然，一个简单的数据库查询可以做到这一点，但信息已经可用。

如何迭代所有“论坛”并呼应他们的名字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:42:16.927

```
foreach($mybb->cache->cache['forums'] AS $forum_id => $forum_data) {
    echo '<li>'.$forum_data['name'].'</li>';
} 
```

# sql - PL/SQL：ORA-00984：此处不允许列

> ID：10562598
> 
> 赞同：1
> 
> 时间：2012-05-12T09:40:14.867
> 
> 标签：sql, oracle, plsql

任何人都可以帮助我解决这个错误，这是代码：-

```
CREATE OR REPLACE PROCEDURE ICTPPRDI.Create_USER 
                ( 
                Uname      IN  CTRL_USERS.USERNAME %type,                           
                Upass      IN  CTRL_USERS.PASSWORD %TYPE,                           
                Uemail     IN  CTRL_USERS.EMAILADDRESS %TYPE,                         
                Umobile    IN  CTRL_USERS.MOBILENUMBER %TYPE,                         
                Ufullname  IN  CTRL_USERS.FULLNAME %TYPE,                         
                Utitlename IN  CTRL_USERS.TITLENAME %TYPE,                         
                Ugroupid   IN  CTRL_USERS.FK_GROUPID %TYPE
                )                           
AS
BEGIN 
Declare m_USER_ID CTRL_USERS.USERID %TYPE;
   Begin

    m_USER_ID:=0;

    --Check that the input parameters are not Null.
    IF ( Uname IS NULL OR Upass IS NULL OR Uemail IS NULL OR Umobile IS NULL OR Ufullname IS NULL OR Utitlename IS NULL OR Ugroupid IS NULL) THEN
        raise_application_error( -20001, 'Null Values are not accepted.' );
    END IF;

    --Get the value from the created Sequence and set its value to m_OP_SETL_ID for further usage.
    SELECT CTRL_USERS_ID_SEQ.NEXTVAL
    INTO m_USER_ID
    FROM dual;

    IF (m_USER_ID = 0) THEN
        raise_application_error( -20002, 'USERS_ID is not generated , please check the sequence creation.' );
    END IF;

    --Insert the data into the table.
    INSERT INTO ICTPPRDI.CTRL_USERS (USERSID , USERNAME , PASSWORD , EMAILADDRESS , MOBILENUMBER , FULLNAME , TITLENAME , FK_GROUPID) 
    VALUES ( m_USER_ID , Uname , Upassword , Uemail , Umobile , Ufullname , Utitlename , Ugroupid );
    END;

END Create_USER ;
/ 
```

插入语句中出现错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:57:07.613

像这样试试

编辑：密码参数名称是 Upass，而不是 Upassword

```
CREATE OR REPLACE PROCEDURE ICTPPRDI.Create_USER 
                ( 
                Uname      IN  CTRL_USERS.USERNAME %type,                           
                Upass      IN  CTRL_USERS.PASSWORD %TYPE,                           
                Uemail     IN  CTRL_USERS.EMAILADDRESS %TYPE,                         
                Umobile    IN  CTRL_USERS.MOBILENUMBER %TYPE,                         
                Ufullname  IN  CTRL_USERS.FULLNAME %TYPE,                         
                Utitlename IN  CTRL_USERS.TITLENAME %TYPE,                         
                Ugroupid   IN  CTRL_USERS.FK_GROUPID %TYPE
                )                           
IS
 m_USER_ID CTRL_USERS.USERID %TYPE;
   Begin

    m_USER_ID:=0;

    --Check that the input parameters are not Null.
    IF ( Uname IS NULL OR Upass IS NULL OR Uemail IS NULL OR Umobile IS NULL OR Ufullname IS NULL OR Utitlename IS NULL OR Ugroupid IS NULL) THEN
        raise_application_error( -20001, 'Null Values are not accepted.' );
    END IF;

    --Get the value from the created Sequence and set its value to m_OP_SETL_ID for further usage.
    SELECT CTRL_USERS_ID_SEQ.NEXTVAL
    INTO m_USER_ID
    FROM dual;

    IF (m_USER_ID = 0) THEN
        raise_application_error( -20002, 'USERS_ID is not generated , please check the sequence creation.' );
    END IF;

    --Insert the data into the table.
    INSERT INTO ICTPPRDI.CTRL_USERS (USERSID , USERNAME , PASSWORD , EMAILADDRESS , MOBILENUMBER , FULLNAME , TITLENAME , FK_GROUPID) 
    VALUES ( m_USER_ID , Uname , Upass, Uemail , Umobile , Ufullname , Utitlename , Ugroupid );

END Create_USER ;
/ 
```

# html - 居中父块内的块之一

> ID：10562601
> 
> 赞同：0
> 
> 时间：2012-05-12T09:40:34.400
> 
> 标签：html

我有这个 HTML：

```
<div class="parent">
   <div class="left"></div>
   <div class="center"></div>
   <div class="right"></div>
</div> 
```

div.left 将包含一些菜单项，因此它的宽度会改变 div.right 将类似于 left（它的宽度会改变）

div.center 的宽度是固定的，是一个标志。

我想在 div.parent 中居中我的 div.center，所以

```
 div.center {margin: 0px auto;} 
```

对我不起作用，我该怎么做

![在图片而不是左 div 上有 ul 样式=](../Images/4e2b998d942c27d6e1fc7f1e9c2897b6.png)

在图片上而不是左 div 这里是 ul 与 style="display: block"

这是真正的代码：

```
div class="header">
<ul class="user-menu">
<li>
<li>
<li>
</ul>
<div class="user-name">
Привет,&nbsp;
<strong>Administrator</strong>
<a href="/User/LogOff">Выйти</a>
</div>
<a class="logo" href="/">
<img alt="Сайт барабанщиков Funky Drummer" src="/Content/themes/default/images/logo.png">
</a>
</div> 
```

和它的CSS：

```
/* Header */
div.main > div.header > ul.user-menu {position: absolute;max-width: 200px; float: left; overflow: hidden; list-style-type: none;padding: 0;margin-left: 2em;margin-top: 1em;font-family: Verdana;font-size: 11px;}
div.main > div.header > ul.user-menu a {color: #455369;}
div.main > div.header > ul.user-menu li {float: left; margin-right: 1em;}
div.main > div.header > div.user-name { margin-right: 2em;margin-top: 1em;float: right;font-family: Verdana;font-size: 11px;}
div.main > div.header {min-height: 177px;text-align: center;}
div.main > div.header > a.logo {overflow: hidden;width:250px;height:177px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:46:31.843

这可能是因为父 div 采用了可能的最小宽度。

试试这个：

```
<div class="parent" style="width: 100%;">
    <div class="left"></div>
    <div class="center" style="margin: 0px auto;"></div>
    <div class="right"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:44:23.340

```
div.center { position: relative; left:50%;} 
```

我认为这可能会奏效。

# php - 创建表后，它会显示这个数组（ [0] => 00000 [1] => [2] => ）

> ID：10562602
> 
> 赞同：0
> 
> 时间：2012-05-12T09:40:57.893
> 
> 标签：php, mysql, pdo

在 PDO 中使用 exec() 创建表后，显示如下

```
Array ( [0] => 00000 [1] => [2] => ) 
```

这是一个错误还是我成功创建了我的表？当我在数据库中查找时，表已创建。

这就是我执行的

```
try{

    $tbl = new PDO("mysql:host=localhost;dbname=myDB",'root',''); 
     $tbl->exec("CREATE TABLE test(fld1 CHAR(40),fld2 CHAR(40))")
     or die(print_r($tbl->errorInfo(),true));
   }
catch(Exception $e){
     echo $e.getMessage();
 } 
```

@Vikas，如果我错了，请纠正我。这是有效的

```
 $queryTBl="CREATE TABLE test(fld1 CHAR(40),fld2 CHAR(40))";

    $evaluateTBL=tbl->exec($queryTBL);

    if ($evaluateTBL===false)
         print "Test table could not be created";
    else
         print "Successfully Created"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:02:35.090

根据[PDO::exec 手册](http://us.php.net/manual/en/pdo.exec.php)，它返回受查询影响的行数。并且没有受`CREATE`查询影响的行。因此`exec`，即使成功，此查询也会返回 0。并将对其进行评估`false`。这解释了为什么`die`即使没有错误也会被调用。

最好依赖异常或执行`=== false`exec 的返回代码来确定它是否失败。从手册：

> 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

做同样事情但有例外的例子：

```
try {
  $connection = new PDO("mysql:host=localhost;dbname=myDB",'root','');
  $connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

  $connection->exec('CREATE TABLE test(fld1 CHAR(40),fld2 CHAR(40))');
} catch (PDOException $e) {
  <handle exception>
} 
```

# windows - Azure 启动任务退出和 OnStart() 运行之间需要这么长时间？

> ID：10562605
> 
> 赞同：1
> 
> 时间：2012-05-12T09:41:23.267
> 
> 标签：windows, deployment, azure

我的 Azure Web 角色包括一个编写为 .cmd 文件的启动任务和一个覆盖的`OnStart()`. 我将每个启动步骤与 UTC 时间戳一起记录下来。.cmd 文件的最后一条语句是这样的：

```
 echo startup task exiting >"%~dp0\Exiting.log" 
```

在`OnStart()`我检索“Exiting.log”文件及其创建和修改时间戳并将它们全部记录下来。

事实证明，文件最后修改时间戳和`OnStart()`调用之间经过了 14 秒。这加起来[整个启动时间很长](https://stackoverflow.com/q/10546624/57428)。

中间发生了什么？我可以减少那个时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:46:16.737

正如史蒂夫指出的那样，启动 IIS 需要时间。此外，配置诊断监视器和 Connect 等插件也需要时间。通常，预计启动任务和 OnStart 之间会出现一些延迟。

此致，

明旭。

# android - WRAP_CONTENT 旁边的 MATCH_PARENT

> ID：10562608
> 
> 赞同：-1
> 
> 时间：2012-05-12T09:42:49.373
> 
> 标签：android, android-layout

在一个对话框上，我想要一个带有 WRAP_CONTENT 的 ImageButton 左侧的 MATCH_PARENT EditText。这看起来像下面的图片。

[版面图片http://goo.gl/dxuS5](http://goo.gl/dxuS5)

我不知道如何解决这个问题！它必须只用java编程！我没有机会用 XML 写这个。

我刚刚使用了 LinearLayout。但是 MATCH_PARENT 将 ImageButton 与 WRAP_CONTENT 交换。我也使用RelativeLayout，但这看起来不像我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:51:10.577

尝试这个：

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
    <ImageButton
        android:layout_gravity="right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <EditText
        android:layout_gravity="left"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T12:18:44.657

假设您将这些放入水平方向的 LinearLayout 中：

```
EditText temp = new EditText(this);
LinearLayout.LayoutParams params = new  LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);                            LayoutParams.WRAP_CONTENT, 1);
temp.setLayoutParams(params);

ImageView imageView = new ImageView(this);
LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
imageView.setLayoutParams(vp);        
imageView.setImageResource(id);        

someLinearLayout.addView(temp);    
someLinearLayout.addView(imageView); 
```

# oauth - google oauth smtp 访问令牌，仅用于发送

> ID：10562609
> 
> 赞同：2
> 
> 时间：2012-05-12T09:42:58.100
> 
> 标签：oauth, smtp, gmail

我正在开发一个通过 gmail smtp 发送电子邮件的应用程序。身份验证是通过 oauth 完成的......有没有办法授权访问仅发送电子邮件？并且不检查收件箱？这样，如果访问令牌和消费者令牌以某种方式受到损害，黑客将无法真正阅读用户的收件箱，这比我猜的发送垃圾邮件更严重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T22:22:14.150

No, the scope allows full access to SMTP, IMAP and POP.

Refer **[xoauth2_protocol oauth_20_scopes](https://developers.google.com/google-apps/gmail/xoauth2_protocol#oauth_20_scopes)**

# c# - C#将顺序函数转换为并行执行

> ID：10562611
> 
> 赞同：1
> 
> 时间：2012-05-12T09:43:42.310
> 
> 标签：c#, parallel-processing, sequential

我正在尝试转换一个函数以使其在 C# 中并行执行而不是顺序执行，但我不确定我做错了什么：

```
// sequential
static void Romberg(double a, double b, int n, double[,] R)
{
    int i, j, k;
    double h, sum;

    h = b - a;
    R[0, 0] = (h / 2) * (f(a) + f(b));

    for (i = 1; i <= n; i++)
    {
        h = h / 2;
        sum = 0;

        for (k = 1; k <= (Math.Pow(2.0, i) - 1); k += 2)
        {
            sum += f(a + k * h);
        }

        R[i, 0] = R[i - 1, 0] / 2 + sum * h;

        for (j = 1; j <= i; j++)
        {
            R[i, j] = R[i, j - 1] + (R[i, j - 1] - R[i - 1, j - 1]) / (Math.Pow(4.0, j) - 1);
        }
    }
}

// parallel
static void RombergCP(double a, double b, int n, double[,] R)
{
    int i,j, k;
    double h, sum;

    h = b - a;
    R[0, 0] = (h / 2) * (f(a) + f(b));

    Parallel.For(0, n, options, i =>
    {
        h = h / 2;
        sum = 0;

         for (k = 1; k <= (Math.Pow(2.0, i) - 1); k += 2)
        {
            sum += f(a + k * h);
        };

        R[i, 0] = R[i - 1, 0] / 2 + sum * h;

        for (j = 1; j <= i; j++)
        {
            R[i, j] = R[i, j - 1] + (R[i, j - 1] - R[i - 1, j - 1]) / (Math.Pow(4.0, j) - 1);
        }
    });
} 
```

我得到的错误是无法声明“i”，因为它会给“i”赋予不同的含义，“i”用于“父或当前”范围。我尝试在并行函数中将其重命名为 i2，但它给出了相同的错误。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:48:27.663

删除`int i`最顶部的声明。它由下面的 lambda 声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:56:22.793

几个问题：

*   在尽可能小的范围内声明变量。

*   您的外部循环从`for (i = 1; i <= n; i++)`to 开始`Parallel.For(0, n, options, ...)`，这意味着`R[i-1, ...]`将抛出 Parallel 版本。

*   `h = h / 2;`不是线程安全的。

* * *

```
// parallel
static void RombergCP(double a, double b, int n, double[,] R)
{
  //int i,j, k;
  //double h, sum;

  double h0 = b - a;
  R[0, 0] = (h0 / 2) * (f(a) + f(b));

  Parallel.For(1, n, options, i =>   // start at 1
  {
     //h = h / 2;
     double h = (b - a) / Math.Pow(2, i);    // derive from i
     double sum = 0;

     for (int k = 1; k <= (Math.Pow(2.0, i) - 1); k += 2)   // keep k local
       ... 
```

# javascript - 如何在 Javascript 中正确动态地填充关联数组

> ID：10562617
> 
> 赞同：0
> 
> 时间：2012-05-12T09:44:34.803
> 
> 标签：javascript, jquery

我正在尝试在数组中构建数组，我希望能够通过数组 [x] [y] 访问存储的数据。我在下面有一个示例代码，我无法按照我想要的方式工作，我想知道是否有人能发现问题。

```
$.getJSON("/data/", function(data){

    var test = {};
    var levels = [1,2,3];

    $.each(data, function(key, value){

        var cat = data[key];

        $.each(levels, function(li,l){

            var base = cat[2];
            var keys = Object.keys(base);

            if (l == 1) {

                test[l] = {};

                $.each(keys, function(ki,k){
                    test[l][k] = base[k][0];
                });
            }

        });

    });

    alert(Object.keys(test[1]));

}); 
```

获取的 JSON 数据的结构如下所示：

```
{
    "1": ["Distribution", 0,
    {
        "9": ["Salmonella", 0,
        {}],
        "6": ["E. coli", 0,
        {
            "8": ["from pigs", 0,
            {}],
            "7": ["from humans", 0,
            {}]}]}],
    "2": ["Adhesin", 0,
    {
        "1": ["PapG", 1,
        {
            "2": ["has three subtypes:", 0,
            {
                "3": ["PapG-I", 0,
                {}],
                "4": ["PapG-II", 0,
                {}],
                "5": ["PapG-III", 0,
                {}]}]}]}],
    "3": ["Receptors", 0,
    {}],
    "4": ["Disease associations", 0,
    {}],
    "5": ["Regulation", 0,
    {}]
}​ 
```

上面的代码似乎没有将值存储到测试数组中的数组中，因为`alert(Object.keys(test[1]))`它没有给出任何东西（即只是空白警报）。

**编辑：**在 Oleg V. Volkov 发现的错误之后（下）：

```
$.getJSON("/data/", function(data){

        var test = {};
        var levels = [1,2,3];

        $.each(data, function(key, value){

               // var cat = data[key];

               $.each(levels, function(li,l){

                     var base = value[2];
                     var keys = Object.keys(base);

                     if (l == 1) {

                          if ($.inArray(l,test) == -1){ 
                              test[l] = {};
                          }

                          $.each(keys, function(ki,k){
                             test[l][k] = base[k][0];
                          });
                      }

               });

        });

        alert(Object.keys(test[1]));

}); 
```

还是行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:11:27.543

```
var cat = data[key]; 
```

你不需要这条线。您的数据已经在`value`.

您`test[l]`在每次迭代中都覆盖了相同的值，因此最终您将只有最后一次最外层迭代的结果 - 在许多浏览器中，这将是一个遍历`"5": ["Regulation", 0, {}]`键/值对的浏览器。快速查看您的代码建议`cat[2]`将`{}`适用于它，因此最后一次迭代将`test[]`用空对象覆盖任何内容。所以你`keys`正确地返回空列表，但你的逻辑有错误。

关于您更新的示例：您仍在覆盖测试条目，`{}`因为您使用[`.inArray`](http://api.jquery.com/jQuery.inArray/)它来检查它并且它总是会成功地在数组中找不到任何数值。`.inArray`查找特定值，而不是键/索引。您应该检查特定索引是否为空，而不是`if(!test[l])`

# javascript - 在 xmpp 中获取联系人的名册（例如，朋友的朋友或 MUC 中联系人的朋友）

> ID：10562618
> 
> 赞同：0
> 
> 时间：2012-05-12T09:44:41.543
> 
> 标签：javascript, xmpp, openfire

是否可以获得联系人的名册（即我的名册联系人的名册或 MUC 中占用者的名册）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:19:20.973

如果您可以诱导您的朋友向您*发送*他们的名册，您可以使用[XEP-0144](http://xmpp.org/extensions/xep-0144.html)，“名册物品交换”作为协议：

```
<message from='horatio@denmark.lit' to='hamlet@denmark.lit'>
  <body>Some visitors, m'lord!</body>
  <x xmlns='http://jabber.org/protocol/rosterx'> 
    <item action='add'
          jid='rosencrantz@denmark.lit'
          name='Rosencrantz'>
      <group>Visitors</group>
    </item>
    <item action='add'
          jid='guildenstern@denmark.lit'
          name='Guildenstern'>
      <group>Visitors</group>
    </item>
  </x>
</message> 
```

# android - 如何“永远”运行android后台服务？

> ID：10562622
> 
> 赞同：1
> 
> 时间：2012-05-12T09:45:18.407
> 
> 标签：android, service, background

我在这里查看了所有关于它的帖子以及关于服务的 android 文档。我仍然不明白该怎么做。

我想编写**在 UI 关闭时**一直收集电池数据的应用程序。我发现我需要为此使用 BindService 和 StratService 服务，以便 UI Activity 可以与该服务通信，并且该服务也可以自行运行，以防 UI Activity 关闭。

我无法理解的是，即使我用 android 应用程序管理器关闭它，我如何让服务运行“forerver”。例如：Whatsapp 应用程序即使我在有人向我发送消息的那一刻用应用程序管理器关闭它，我仍然会收到它并且 whatsapp 会打开。

我需要使用线程（带有运行功能的可运行接口）还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T09:56:59.483

您可以尝试覆盖`onStartCommand()`您的服务并`return START_STICKY;`让系统知道您的服务应该运行，直到它自行终止。

# python - python队列没有传递正确的数据

> ID：10562626
> 
> 赞同：0
> 
> 时间：2012-05-12T09:45:35.977
> 
> 标签：python, queue, python-multithreading

刚刚找到了帮助我调整 pyftpdlib 模块的 Queue 模块。我正在运行一个非常严格的 FTP 服务器，我的目标是限制可上传的文件名。这是为了防止人们上传他们想要的任何东西（它实际上是上传客户端的后端，而不是完整的 FTP 服务器）。

我在 ftpserver 授权器中有这个：

```
def fetch_worlds(queue, username):
    while queue.empty():
        worlds = models.World.objects.filter(is_synced=True, user__username=username)
        print worlds

        queue.put(worlds, timeout=1)

class FTPAuthorizer(ftpserver.DummyAuthorizer):

    def __init__(self):
        self.q = Queue.Queue()
        self.t = None # Thread
        self.world_item = None

    def has_perm(self, username, perm, path=None):

        print "Checking permission\n"

        if perm not in ['r','w']:
            return False

        # Check world name        
        self.t = threading.Thread(target=fetch_worlds, args=(self.q, username))
        self.t.daemon = True
        self.t.start()

        self.world_item = self.q.get() 

        print "WORLDITEM: %s" % self.world_item

        if path is not None:
            path = os.path.basename(path)
            for world in self.world_item:
                test = "{0}_{1}.zip".format(username, world.name)
                if path == test:
                    print "Match on %s" % test
                    return True

        return False 
```

我的问题是，在服务器启动后，我第一次存储文件时，它会执行初始数据库调用并正确获取所有世界。但是当我再添加另一个世界时（例如，设置`is_synced=True`一个，它仍然从 .has_perm() 返回旧数据，`self.q.get()`每次上传文件时都会调用它，它需要返回实时数据（检查是否允许文件）。

例如，全新的服务器：

1.  STOR 文件.zip，`self.q.get()`返回`<World1, World2>`
2.  通过其他方法等更新数据库
3.  STOR file2.zip, inside `fetch_worlds`，`print worlds`返回`<World1, World2, World3>`但`self.q.get()`返回`<World1, World2>`

刚刚找到 Queue 模块，它似乎会有所帮助，但我无法正确实现。

（也无法添加标签`pyftpdlib`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:39:28.243

我认为这就是这里可能发生的事情：

1.  当`has_perm`被调用时，您创建一个`Thread`将查询数据库（？）以将元素添加到队列
2.  调用`start`数据库后需要一些时间
3.  同时在您输入的主线程中，`q.get`这将阻塞。
4.  db 调用完成并将结果添加到队列中
5.  并立即被阻塞再次从队列中删除`q.get`
6.  队列现在是空的，您的线程再次进入while循环并再次执行相同的查询并将结果放入队列中。
7.  下一次调用`q.get`将返回它而不是它所期望的。

你看，你可能在这里有一个竞争条件，这已经从你在循环中向队列中添加一些东西而你在拉动时没有循环的事实中很明显。您还假设您从队列中获得的元素是您之前放入它的结果。这不一定是真的。
如果您调用`has_perm`两次，这将导致两次调用，`fetch_worlds`并且有可能`queue.empty()`检查其中一个调用失败。所以只有一个结果会被放入队列。现在你有两个线程在等待`q.get`，但只有一个会得到结果，而另一个等待直到一个准备好......

`has_perm`看起来它应该是一个阻塞调用。

# jquery - jQuery 加载刷新 div

> ID：10562627
> 
> 赞同：2
> 
> 时间：2012-05-12T09:45:48.160
> 
> 标签：jquery, ajax, html, load, refresh

我正在尝试使用 ajax 和 jquery 更新我的 div。正确执行 ajax 请求并更新数据库，但是 div 没有重新加载。

然而，方法 update(ajax) 被调用。$stats div 没有更新。谁能帮帮我？直接调用 stats.php 文件会显示正确的 html 输出。

编辑：删除代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:21:49.763

同时使用*原型*和*jQuery*可能会产生冲突，因为两者都使用`$`（另请参阅[将 jQuery 与其他库一起使用](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)）。您应该`jQuery.noConflict();`在插入 jQuery 后直接调用并`$`仅用于原型，`jQuery`而改为使用 jQuery：

`<script type="text/javascript" src="js/jquery.js"></script>`在 index.php之后直接添加：

```
<script>
     jQuery.noConflict();
</script> 
```

并在 script.js 中将更新函数替换为：

```
function update(ajax){
    jQuery("#stats").load("stats.php");
} 
```

# ruby-on-rails - 使用 Haml 创建 XML

> ID：10562629
> 
> 赞同：1
> 
> 时间：2012-05-12T09:45:56.333
> 
> 标签：ruby-on-rails, xml, haml, sitemap

我正在尝试为我的 CMS 风格的 Rails 应用程序制作动态站点地图，但我无法使用 Haml 在 XML 中创建站点地图。我查看了文档，他们说我应该能够在文档开头`!!! XML`插入标签。`<?xml version="1.0" encoding="UTF-8"?>`当我尝试这样做时，它根本不会渲染任何东西，我被迫使用文字元 XML 标记。我究竟做错了什么？

```
content_controller.rb
=====================
class ContentController < ApplicationController
  # other methods

  def sitemap
    @sections = Section.all :include => :pages
    respond_to do |format|
      format.xml
    end
  end
end

sitemap.xml.haml
================
<?xml version="1.0" encoding="UTF-8"?>
-# !!! XML
-# the above tag does not work
%urlset{:xmlns => 'http://www.sitemaps.org/schemas/sitemap/0.9'}
  %url
    %loc= root_url
  - @sections.each do |section|
    - section.pages.each do |page|
      %url
        %loc= "#{root_url}#{section.url}/#{page.url}"
        %lastmod= page.updated_at 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:59:45.393

您需要进行设置`:format => :xhtml`才能使其正常工作。
在你的`environment.rb`

```
Haml::Template.options[:format] = :xhtml 
```

更多信息在这里[http://www.mail-archive.com/haml@googlegroups.com/msg06984.html](http://www.mail-archive.com/haml@googlegroups.com/msg06984.html)

# wpf - 如何将 Sql 查询的结果（通过 SQL 到 LINQ）添加到 WPF 中的数据网格

> ID：10562632
> 
> 赞同：1
> 
> 时间：2012-05-12T09:46:25.713
> 
> 标签：wpf

嗨，我想将 sql 查询的结果添加到我的 WPF 应用程序中的数据网格。我使用 SQL to LINQ 来获取数据。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:39:23.470

只需使用 C# 将 DataGrid 的 ItemSource 属性设置为该查询的结果值：

```
dataGrid1.ItemSource = query ; 
```

确保在 XAML 中将 AutoGenerateColumns 属性设置为 true

```
<DataGrid x:Name="dataGrid1" 
    AutoGenerateColumns="True" /> 
```

# db2 - DB2 表分区并根据条件删除旧记录

> ID：10562636
> 
> 赞同：0
> 
> 时间：2012-05-12T09:46:34.977
> 
> 标签：db2, delete-row

我有一张有几百万条记录的表。

```
___________________________________________________________
| col1 | col2 | col3 | some_indicator | last_updated_date |
-----------------------------------------------------------
|      |      |      |        yes     | 2009-06-09.12.2345|        
-----------------------------------------------------------
|      |      |      |        yes     | 2009-07-09.11.6145|
-----------------------------------------------------------
|      |      |      |        no      | 2009-06-09.12.2345|
----------------------------------------------------------- 
```

我必须使用 some_indicator=no 删除早于一个月的记录。同样，我必须使用 some_indicator=yes 删除超过一年的记录。这项工作将每天运行。

我可以使用 db2 分区功能来满足上述要求吗？如何使用 last_updated_date 列和以上两个 some_indicator 值对表进行分区？一个分区应包含符合每月删除标准的记录，而另一个应包含每年删除标准的记录。如果经常读取、更新此表，是否存在与表分区相关的性能问题？上述要求的任何其他最佳实践肯定会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:09:36.287

我在分区方面做得不多（我主要在 iSeries 上使用 DB2），但据我了解，您*通常不*希望在分区之间进行洗牌（即 - 将分区设置为“1 个月前”） ）。我什至不确定这是否可能。如果是这样，您必须每天扫描表的某些（可能很大）部分，只是为了移动它（在事务中选择、插入、删除）。

除此之外，分区是一个数据库管理问题，听起来你只是有一个数据库用户问题——即删除“旧”记录。我只是在几个陈述中做到这一点：

```
DELETE FROM myTable 
WHERE some_indicator = 'no'
AND last_updated_date < TIMESTAMP(CURRENT_DATE - 1 MONTH, TIME('00:00:00')) 
```

和

```
DELETE FROM myTable
WHERE some_indicator = 'yes'
AND last_updated_date < TIMESTAMP(CURRENT_DATE - 1 YEAR, TIME('00:00:00')) 
```

....您几乎可以忽略使用事务，因为您希望行消失。

（作为旁注，使用 'yes' 和 'no' 作为指标是很*糟糕*的。如果您使用的不是具有逻辑（布尔）类型的版本，请存储字符 '0' (false) 和 '1' (true) ))

# python - 似乎无法使第二个选项起作用

> ID：10562639
> 
> 赞同：0
> 
> 时间：2012-05-12T09:46:48.643
> 
> 标签：python

我有以下代码片段，当我连接到工作时，我可以运行这个脚本，它会加载我需要的一切。如果我错过了一些明显的事情，我深表歉意，我昨晚在工作时正在断电:-)

它将在第一个参数上工作并连接到该站点，但是如果我再次运行它，它不会断开连接它告诉我我已经连接。

提前致谢

```
import subprocess    
import sys      
import os

if 'c' or 'C' in sys.argv[1]:
  subprocess.Popen(["C:\\Program Files\\Checkpoint\\Endpoint Connect\\trac.exe connect -u username -p password"])
elif 'd' or 'D' in sys.argv[1]:
  subprocess.Popen(("C:\\Program Files\\Checkpoint\\Endpoint Connect\\trac.exe disconnect ")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T09:52:07.910

第二次运行时，sys.argv[1] = 'disconnect'，所以里面有字母'c'。你最好使用：

```
if sys.argv[1].lower().startswith('c') 
```

或者

```
if sys.argv[1].lower().startswith('d') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:59:37.740

if ('c' or 'C') in sys.argv[1] 应该没问题。我猜是优先问题。您必须将 Popen 命令参数拆分为单独的数组成员，顺便说一句。

# search - 如何将地图与搜索匹配结合使用？

> ID：10562640
> 
> 赞同：1
> 
> 时间：2012-05-12T09:46:58.827
> 
> 标签：search, vim, maps, match

如何在搜索后找到的每个匹配项上使用地图？

我创建了使用地图调用的各种函数。
我想在找到的每个搜索匹配项上使用地图。

如果我在文本中搜索日期，我将如何在找到的每个搜索匹配项上应用 ai/v/nmap？

像这样的东西？

```
%s/search-pattern/=\normal mode map/g
%s/search-pattern/=\insert mode map/g 
```

是否也可以合并地图？

希望我说清楚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T00:51:58.877

Vim 非常强大，我怀疑插入模式/正常模式映射不是这里最方便的方法。

一些可以帮助您入门的习语：

> [**编辑：**我建立在你之前的问题（ [我如何向后视觉选择计算？](https://stackoverflow.com/questions/10494321/how-do-i-visual-select-a-calculation-backwar/10508098#10508098) ）并提供了一个演示，[在聊天中解释](https://chat.stackoverflow.com/transcript/message/3687661#3687661)]

## 1.录制宏：

```
qqniMyText<Esc>q 
```

这将在每个匹配位置插入“MyText”。现在，重复一百次：100@q（考虑设置`:se nowrapscan`以避免从顶部重新启动）。

## 2.使用`:global`

```
:g/somepattern/norm! Aappended<Esc> 
```

将文本“附加”附加到包含搜索模式的每一行

## 3\. 使用智能替换：

您可以使用替换模式执行一些“静态”编辑操作：

```
:%s/\v(\d\d)-(\d\d)-(\d{4})/\3\2\1/g 
```

将 dd-mm-yyyy 转换为 yyyymmdd 日期戳。

要进行动态评估替换（`\=`在替换表达式中使用 vimscript with），您几乎可以做任何事情（包括发送邮件或打印文档，如果您真的想要的话）：

```
:%s/\v<DB_\w+>/\=substitute(submatch(0), '\v_?([^_])([^_]*)', '\U\1\L\2', 'g')/g 
```

转换“数据库样式”名称，例如

```
var DB_USER_ID = f();
var DB_USER_FIRST_NAME = f();
var DB_USER_LAST_NAME = f();
var DB_USER_HOME_ADDRESS = f(); 
```

进入“驼峰样式名称”，例如：

```
var DbUserId = f();
var DbUserFirstName = f();
var DbUserLastName = f();
var DbUserHomeAddress = f(); 
```

* * *

## 带有表达式评估的现场演示

**编辑**回应评论/聊天：您可以很容易地使用方法#1：

```
/\v\c\s*\zs(\s{-}(((sqrt|log|sin|cos|tan|exp)?\(.{-}\))|(-?[0-9,.]+(e-?[0-9]+)?)|([-+*/%^]+)))+(\s*\=?)?\s*
qqa<M-.><Esc>nq 
```

现在您可以对所有文档重复：

```
:set nowrapscan
100@q 
```

![在此处输入图像描述](../Images/45040020c19b69ea5ff05b67e83955bb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T12:52:16.143

如果每一行只有一个匹配项，您可以使用`:global`代替`:s`：

```
:%g/search-pattern/normal nrX 
```

将`:[range]normal`光标定位在行首，因此`n`要转到映射之前的第一个匹配项（我`rX`用作示例）。您*可以*编写一个自定义命令来处理一行中的所有匹配项，但我会使用递归宏来解决您的用例：

首先，执行搜索：`/search-pattern`，然后记录一个包含你的映射的宏，它会跳转到最后的下一个匹配：`qarXnq`。您现在可以通过 手动重复应用宏，或通过或`@a`使其递归。执行一次，它将一直运行，直到匹配完为止。`qA@aq``:let @a .= '@a'``@a`

# java - Spring MVC：加载静态图像

> ID：10562643
> 
> 赞同：0
> 
> 时间：2012-05-12T09:47:17.410
> 
> 标签：java, image, spring-mvc, resources

我正在尝试创建包含以下方法的 ImageController：

```
public byte[] getProfileImage(@PathVariable String username) {
    byte[] tmp = null;
    tmp = imageService.getProfileImage(username).getImagefile();
    return tmp;
} 
```

现在如果 imageService 返回空图像文件，我想从 webapp/WEB-INF/img/ 文件夹加载图像。我试着用谷歌搜索，但没有找到任何我可以工作的答案。

另一种方法是在 imageService 类中加载图像文件，但我也不知道如何从那里加载图像。

我将不胜感激。我对弹簧不是很熟练。特别是配置对我来说不是很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:54:24.833

您正在寻找方法[ServletContext.getResourceAsStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)，该方法从 webapp 的根文件夹开始的路径加载资源：

```
 InputStream in = servletContext.getResourceAsStream("/WEB-INF/img/someImage.jpg"); 
```

# java - Java - 扫描仪评论跳过

> ID：10562656
> 
> 赞同：2
> 
> 时间：2012-05-12T09:49:52.560
> 
> 标签：java, java.util.scanner

我在这个实验中的任务是接受多个输入文件，除了一些文件有注释并且我想跳过注释行之外，它们的格式都相似。例如：

输入文件：

```
Input file 1

#comment: next 5 lines are are for to be placed in an array
blah 1
blah 2
blah 3 
blah 4
blah 5

#comment: next 2 line are to be placed in a different array
blah 1 
blah 2

#end of input file 1 
```

* * *

我尝试做的是我使用了 2 个 while 循环（如果需要，我可以发布我的代码）。我做了以下

```
while(s.hasNext()) {
    while(!(s.nextLine().startWith("#")) {
        //for loop used to put in array
        array[i] = s.nextLine();
    }
} 
```

我觉得这应该有效，但事实并非如此。我在做什么不正确。请帮忙。先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T09:52:39.783

你正在失去好的台词，应该是：

```
String line;
while(!(line = s.nextLine()).startWith("#")) {
    array[i] = line;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T10:06:37.967

您的代码有两个问题：

1.  您`nextLine`在循环中多次调用。
2.  `while`如果没有下一行，您的第二个循环将失败。

尝试修改代码如下：

```
int i = 0;
while(s.hasNextLine()) {
    String line = s.nextLine();
    if(!line.startWith("#")) {
          array[i++] = line;
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:01:50.970

您的代码的问题是它将仅读取数组中的备用行，因为 nextLine() 方法将在读取一行之前被调用两次（一次在 while 测试表达式中，第二次在 while 正文中），而不是曾经... binyamin 的建议对您有用。

# ruby-on-rails - rails中的一对一或零关联

> ID：10562658
> 
> 赞同：2
> 
> 时间：2012-05-12T09:50:07.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3

模型一

```
class TimeLog < ActiveRecord::Base
    has_one :custom_time_fields,  :dependent => :destroy
end 
```

模型二

```
class CustomTimeFields <  ActiveRecord::Base
   belongs_to :time_log
end 
```

以上在数据库方面的设计将是

时间日志表 + custom_time_field_id（外键）

custom_time_fields

因此，当我删除*时间日志*条目时，其关联的“custom_time_field”将被 rails 自动删除

但我想要如下的数据库设计

表一：

时间日志

表二

custom_time_fields（以 time_log_id 作为外键）

表 I 将与表 II***有零个或一个关联***

我如何在 Rails 模型中表示上述数据库设计，以便当我删除 time_log 时，关联的 custom_time_field 条目会自动删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T10:05:29.667

您必须切换模型的`has_one`和`belongs_to`关系才能更改包含外键的表（具有关系的模型`belongs_to`是持有外键的模型）。不要忘记根据更改调整迁移（声明`time_log_id`列）。

我认为您正在寻找的“零或一”关系就是`has_one`关系。此关系不是强制性的（除非您向其添加[验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validations-overview)）。

# android - 通过按钮等从 Activity 切换 Taps

> ID：10562660
> 
> 赞同：0
> 
> 时间：2012-05-12T09:50:38.223
> 
> 标签：android

我在 StartActivity 中有以下 TapControl：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();

    // Tab for A Tap
    TabSpec atapspec = tabHost.newTabSpec("ATap");
    // setting Title and Icon for the Tab
    atapespec.setIndicator("ATap", getResources().getDrawable(R.drawable.state_atap));
    Intent atapIntent = new Intent(this, ATapActivity.class);
    atapspec.setContent(atapIntent);

    // Tab for B Tap
    TabSpec btapspec = tabHost.newTabSpec("BTap");
    btapspec.setIndicator("BTap", getResources().getDrawable(R.drawable.state_btap));
    Intent btapIntent = new Intent(this, BtapActivity.class);
    btapspec.setContent(btapIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(atapspec); // Adding a tab
    tabHost.addTab(btapspec); // Adding b tab

} 
```

每个 Tap 都有自己的 Activity。现在我的问题是，如何使用按钮切换到下一个 Tap-Activity？我试图仅启动 Activity，但随后缺少 Tap-control。

```
startActivity(new Intent(this, BTapActivity.class)); 
```

我发现它应该是这样的：

```
setCurrentTabByTag("BTab"); 
```

但我不知道怎么做。

编辑：

当我输入“tabHost.setCurrentTabByTag("BTap");” 在 onCreate 方法的最后，选择了 BTap。因此它是正确的命令。但是从另一个活动中，我无法访问 tabHost。当我将 tabHost 设置为全局对象时，应用程序崩溃：

```
TabHost tabHost = getTabHost(); 
```

我从 Tab-Activity 中尝试过这样的：

```
startActivity StartAct = new startActivity ();
StartAct.setTap("BTap"); 
```

此方法在 StartActivity 中：

```
public void setTap(String tap) {

    tabHost.setCurrentTabByTag(tap);
} 
```

我能做些什么？对不起，我是初学者...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:29:28.073

您可以使用 TabHost 的`setCurrentTab(int index)`功能以编程方式打开选项卡。

# r - 在 R 中创建 ts 对象

> ID：10562663
> 
> 赞同：3
> 
> 时间：2012-05-12T09:51:48.143
> 
> 标签：r, time-series

我才开始在 R 中玩时间序列，所以我在第一关就掉了下来！我有一个每日温度读数的向量（没有日期戳），我在创建这样一个对象时遇到了问题。

```
data<-rnorm(3650, m=10, sd=2)
data_ts<-as.ts(data, frequency=365, start=c(1919, 1))
attributes(data_ts)
dcomp<-decompose(data_ts, type=c("additive")) 
```

我认为这段代码应该指示 R 从 1919 年 1 月 1 日开始制作一个具有每日测量值（频率 = 365）的 ts 对象。我不明白 decompose 命令中的错误消息，我感觉我没有正确创建 ts 对象，因为 data_ts$tsp 看起来不正确！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:11:18.243

```
data <- rnorm(3650, m=10, sd=2)
# change is below, use ts() to create time series
data_ts <- ts(data, frequency=365, start=c(1919, 1))
attributes(data_ts)
dcomp<-decompose(data_ts, type=c("additive"))
plot(dcomp) 
```

产生：

![时间序列分解](../Images/b042914593bd83b5120538fe669306c3.png)

# javascript - 像 Facebook 一样的 OAuth 身份验证

> ID：10562667
> 
> 赞同：10
> 
> 时间：2012-05-12T09:52:12.340
> 
> 标签：javascript, oauth

我需要通过 OAuth 通过 Javascript 对某些网站（例如 flickr）进行身份验证，并且我希望获得类似于 Facebook 登录按钮的体验。当您单击登录按钮时，会打开一个弹出窗口，您进行身份验证，然后关闭弹出窗口并引发登录按钮的 onlogin 事件。

是否有任何 Javascript 库为 OAuth 实现此行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T16:58:24.213

这是 OAuth 2.0 的一个特性，它指定了一个客户端流程来促进这一点。

规范在[这里](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-26#section-4.2)，谷歌的实现在[这里](https://developers.google.com/accounts/docs/OAuth2#clientside)描述。

对此的支持包含在[google-api-javascript-client](http://code.google.com/p/google-api-javascript-client/)（用于 Google API 和登录）中，并且有一个通用库可以与名为[gwt-oauth2](http://code.google.com/p/gwt-oauth2/)的受支持提供程序一起使用——它是用 GWT 编写的，但也可用于标准的 JavaScript 环境。

编辑：[微软的 Live Connect 库](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx)似乎也支持这种风格的 OAuth 2.0。

不幸的是，Flickr 似乎不支持这一点，因为它[似乎只支持 OAuth 1.0a](http://www.flickr.com/services/api/auth.oauth.html)。

但是有一些流行的提供商确实支持客户端 OAuth 2.0 流程：

*   谷歌
*   Facebook
*   四方
*   Instagram
*   每日运动
*   视窗直播

我想，您可以运行自己的服务器向 Flickr 发出 OAuth 1.0a 请求，并将 OAuth 2.0 访问令牌发送回 JavaScript 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:38:17.707

我确信[janrain](http://janrain.com/)使用 node.js 为多个站点提供身份验证，我会看一看。也试试这个[例子](http://derek.io/blog/2010/how-to-secure-oauth-in-javascript/)

# java - 服务无法正常启动

> ID：10562670
> 
> 赞同：0
> 
> 时间：2012-05-12T09:53:10.827
> 
> 标签：java, android

我正在尝试为此提供服务和通知。我有两个按钮。单击开始按钮启动应该启动服务并停止应该停止。但现在他们没有工作。我有一个主类、服务类和通知类。这是我的代码和 logcat 输出。

我的服务班在这里

> 包 com.zafar.batterynotify；

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class BatteryService extends Service {
Notify notification = new Notify();

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    notification.initNotification(this);
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

public void onDestroy() {
    super.onDestroy();
    notification.cancelNotification(this);
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}

} 
```

通知类

> 包 com.zafar.batterynotify；

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;

public class Notify {
private static final int NOTIFICATION_ID = 1;

public void initNotification(Context actContext) {
    String ns = actContext.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) actContext.getSystemService(ns);
    int icon = R.drawable.ic_launcher;
    CharSequence tickerText = "Service Started";
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon, tickerText, when);
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    //Context context = actContext.getApplicationContext();
    Context context = MyApplication.getContext();
    CharSequence contentTitle = "Ongoing service";
    CharSequence contentText = "This is service is ongoing";
    Intent notificationIntent = new Intent(context, BatteryNotify.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
    mNotificationManager.notify(NOTIFICATION_ID, notification);
}

public void cancelNotification(Context actContext) {
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) actContext.getSystemService(ns);
    mNotificationManager.cancel(NOTIFICATION_ID);
}
} 
```

我的 logcat 输出

```
05-12 12:35:35.480: D/AndroidRuntime(27598): Shutting down VM
05-12 12:35:35.480: W/dalvikvm(27598): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-12 12:35:35.490: E/AndroidRuntime(27598): FATAL EXCEPTION: main
05-12 12:35:35.490: E/AndroidRuntime(27598): java.lang.RuntimeException: Unable to start service com.zafar.batterynotify.BatteryService@40526a48 with Intent { cmp=com.zafar.batterynotify/.BatteryService }: java.lang.NullPointerException
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2056)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.app.ActivityThread.access$2800(ActivityThread.java:117)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.os.Looper.loop(Looper.java:130)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at java.lang.reflect.Method.invokeNative(Native Method)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at java.lang.reflect.Method.invoke(Method.java:507)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at dalvik.system.NativeStart.main(Native Method)
05-12 12:35:35.490: E/AndroidRuntime(27598): Caused by: java.lang.NullPointerException
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.content.ComponentName.<init>(ComponentName.java:75)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.content.Intent.<init>(Intent.java:2859)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at com.zafar.batterynotify.Notify.initNotification(Notify.java:24)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at com.zafar.batterynotify.BatteryService.onStartCommand(BatteryService.java:20)
05-12 12:35:35.490: E/AndroidRuntime(27598):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2043)
05-12 12:35:35.490: E/AndroidRuntime(27598):    ... 10 more
05-12 12:35:56.465: D/AndroidRuntime(27706): Shutting down VM
05-12 12:35:56.465: W/dalvikvm(27706): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-12 12:35:56.470: E/AndroidRuntime(27706): FATAL EXCEPTION: main
05-12 12:35:56.470: E/AndroidRuntime(27706): java.lang.RuntimeException: Unable to start service com.zafar.batterynotify.BatteryService@4051f2f8 with Intent { cmp=com.zafar.batterynotify/.BatteryService }: java.lang.NullPointerException
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2056)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.app.ActivityThread.access$2800(ActivityThread.java:117)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:998)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.os.Looper.loop(Looper.java:130)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at java.lang.reflect.Method.invokeNative(Native Method)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at java.lang.reflect.Method.invoke(Method.java:507)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at dalvik.system.NativeStart.main(Native Method)
05-12 12:35:56.470: E/AndroidRuntime(27706): Caused by: java.lang.NullPointerException
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.content.ComponentName.<init>(ComponentName.java:75)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.content.Intent.<init>(Intent.java:2859)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at com.zafar.batterynotify.Notify.initNotification(Notify.java:24)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at com.zafar.batterynotify.BatteryService.onStartCommand(BatteryService.java:20)
05-12 12:35:56.470: E/AndroidRuntime(27706):    at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2043)
05-12 12:35:56.470: E/AndroidRuntime(27706):    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:33:43.337

在这一行：

```
Intent notificationIntent = new Intent(context, BatteryNotify.class); 
```

`context`是`null`。

# java - 语义网 - sparql 查询

> ID：10562671
> 
> 赞同：2
> 
> 时间：2012-05-12T09:53:41.170
> 
> 标签：java, sparql, jena

我试过这个查询，它编译并运行。但它只检索没有它们的值的列名。我怎样才能检索它们的值？有什么特殊的方法吗？

```
String str = "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>"+
    "PREFIX dbo: <http://dbpedia.org/ontology/>"+
    "PREFIX dbpprop: <http://dbpedia.org/property/>"+
    "PREFIX foaf: <http://xmlns.com/foaf/0.1/>"+
    "SELECT DISTINCT ?label ?abstract ?placeOfBirth"+
        "?birthPlace ?birthDate ?deathDate ?page ?thumbnail WHERE {"+
        "OPTIONAL {<http://dbpedia.org/resource/Neil_Simon> dbpprop:placeOfBirth ?placeOfBirth ; dbo:abstract ?abstract ; foaf:page ?page .}"+
        "OPTIONAL {<http://dbpedia.org/resource/Neil_Simon> dbpprop:placeOfBirth ?placeOfBirth ; dbpprop:birthPlace ?birthPlace ;}"+
        "OPTIONAL {<http://dbpedia.org/resource/Neil_Simon> dbpprop:placeOfBirth ?placeOfBirth ;  dbo:birthDate ?birthDate ;}"+
        "OPTIONAL {<http://dbpedia.org/resource/Neil_Simon> dbpprop:placeOfBirth ?placeOfBirth ;  dbo:deathdate ?deathDate ;}"+
        "OPTIONAL {<http://dbpedia.org/resource/Neil_Simon> dbpprop:placeOfBirth ?placeOfBirth ; dbo:thumbnail ?thumbnail .}"+
        "FILTER (LANG(?label) = 'en')"+    
        "FILTER (LANG(?abstract) = 'en')}"+
    "LIMIT 1"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:35:45.480

如果您得到列名但没有值，则可能意味着您的查询没有答案。

尝试删除部分查询，直到得到答案 - 开始的主要部分是`FILTER`子句。您正在过滤实际上并未在任何地方的查询中绑定的变量，因此它们将始终评估为 false 并导致没有结果

# java - TextView::getText() 对不可见字符返回 -3

> ID：10562681
> 
> 赞同：0
> 
> 时间：2012-05-12T09:55:19.187
> 
> 标签：java, android, string, byte, ascii

如果我设置 TextView 字节如下：

```
byte[] byteArray = { 25, 20, -101 };
TextView encrypted_text = (TextView) findViewById(R.id.encrypted);
encrypted_text.setText(new String(byteArray)); 
```

然后我可以取回 25、20，但不能取回 -101 值。对于第三个字符，我总是得到 -3 作为输出：

```
Log.v(TAG, "3rd byte: "+ (byte) encrypted_text.getText().toString().charAt(2)); 
```

PS 实际上 -3 为所有不可见的字符返回。

如何从 TextView 取回我的 byteArray？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:41:24.353

我知道如何在 TextView 中存储和检索负字节值。首先，我们需要将有符号字节转换为无符号字节。因为在 Java 中所有类型都是签名的，所以我们需要手动完成：

```
// remove signed bit(32nd), keep value as "next" (127+...) positive byte value
int unsignedValue = 255 - ((int)byteArray[i])&0b1111111; 
```

# ruby-on-rails - ROR Webrick 服务器启动错误

> ID：10562682
> 
> 赞同：0
> 
> 时间：2012-05-12T09:55:29.783
> 
> 标签：ruby-on-rails

当我尝试启动安装了 Ruby on Rail Webrick Server 的 MacPorts 以在放下它一年后重新开始我的 RoR 培训时，我在执行时遇到以下错误`ruby -d script/server`：

```
Exception `LoadError' at /opt/local/lib/ruby/site_ruby/1.8/rubygems.rb:1215 - no such file to load -- rubygems/defaults/operating_system
Exception `NoMethodError' at /opt/local/lib/ruby/1.8/rational.rb:78 - undefined method `gcd' for Rational(1, 2):Rational
Exception `Gem::LoadError' at /opt/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247 - Could not find memcache-client (>= 1.7.4) amongst [abstract-1.0.0, actionmailer-3.0.3, actionmailer-2.3.8, actionpack-3.0.3, actionpack-2.3.8, activemodel-3.0.3, activerecord-3.0.3, activerecord-2.3.8, activeresource-3.0.3, activeresource-2.3.8, activesupport-3.0.3, activesupport-2.3.8, arel-2.0.6, builder-2.1.2, bundler-1.0.7, cgi_multipart_eof_fix-2.5.0, daemon_controller-0.2.6, daemons-1.1.0, erubis-2.6.6, fastthread-1.0.7, gem_plugin-0.2.3, i18n-0.5.0, mail-2.2.12, mime-types-1.16, mongrel-1.1.5, mysql-2.8.1, mysql2-0.2.10, passenger-3.0.7, polyglot-0.3.1, rack-1.2.1, rack-1.1.0, rack-mount-0.6.13, rack-test-0.5.6, rails-3.0.3, rails-2.3.8, railties-3.0.3, rake-0.8.7, rubygems-update-1.8.5, sqlite3-ruby-1.3.2, thor-0.14.6, treetop-1.4.9, typhoeus-0.3.3, tzinfo-0.3.23, xml-simple-1.1.1]
        /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/vendor.rb:32: warning: redefine normalize_translation_keys
Exception `TypeError' at (eval):4 - can't modify frozen object
Exception `MissingSourceFile' at /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36 - no such file to load -- fast_xs
Exception `MissingSourceFile' at /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:62 - no such file to load -- fast_xs
Exception `NameError' at /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:55 - uninitialized constant ActiveSupport::Dependencies::Mutex
        /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:55: uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support.rb:57
from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:1
from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require' 
```

这些错误是否是因为我之前制作的 Rails 项目是使用较旧的 Gems 或 Ruby 版本（每次更新我的 MacPorts 时都会更新）？我该如何补救？

**更新**

找到类似的[未初始化常量 ActiveSupport::Dependencies::Mutex (NameError)](https://stackoverflow.com/questions/5176782/uninitialized-constant-activesupportdependenciesmutex-nameerror)。现在更新宝石并很快重试。

**更新 2**

更新了所有的 gem 只出现了一个错误：

```
Updating mysql2
ERROR:  While executing gem ... (Gem::GemNotFoundException)
    Could not find a valid gem 'mysql2' (0.3.11) locally or in a repository 
```

错误：

```
ruby script/server
/opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:55: uninitialized constant ActiveSupport::Dependencies::Mutex (NameError)
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /opt/local/lib/ruby/gems/1.8/gems/activesupport-2.3.8/lib/active_support.rb:57
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/commands/server.rb:1
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from script/server:3 
```

仍然存在，但可能需要某种重启

**更新 3**

我`require 'thread'`按照前面提到的线程中@thekingoftruth 的答案中的建议添加到 config/boot.rb 的顶部。现在 Webrick 开始了。我确实得到了很多错误仍然说：

```
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/gem_dependency.rb:21.
NOTE: Gem::SourceIndex#refresh! is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#refresh! called from /opt/local/lib/ruby/gems/1.8/gems/rails-2.3.8/lib/rails/vendor_gem_source_index.rb:34.
NOTE: Gem::SourceIndex#load_gems_in is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#load_gems_in called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:320.
NOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01.
Gem::SourceIndex#add_spec called from /opt/local/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:53:22.983

如更新所示，我自己解决了这个问题。我现在在我的 OSX Lion 上使用 RVM。

# c - 怎么知道是哪个用户启动了这个程序？

> ID：10562684
> 
> 赞同：0
> 
> 时间：2012-05-12T09:55:56.367
> 
> 标签：c, linux, process

我知道`ps`命令可以看到这一点，但是鉴于 pid，如何知道哪个用户启动了该程序？我`loginuid`在 /proc/[pid]/ 中看到了一个，但这似乎是真实 uid 的补充代码，不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T09:59:13.533

怎么样`status`？

```
cnicutar@lemon:/proc/self$ cat status
Name:   bash
State:  S (sleeping)
#....
Uid:    1000    1000    1000    1000
Gid:    1000    1000    1000    1000 
```

有 4 个 UID：真实的、有效的、已保存的集和文件系统。这一切都在[`proc(5)`](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:13:12.497

假设您只想要用户并且您知道您可以使用的 PID，`ps`并且`awk`像这样：

`ps auxf | awk NR!=1 | awk '{print $1" "$2}' | grep`PID`| awk '{print $1}'`

我将分解命令，以便您更好地了解该过程。

您可能知道，第一行`ps`显示标题，这就是我们使用`awk NR!=1` 从获得的输出中排除标题的原因。

由于我们只需要`PID`和 ，`User`我们可以通过只选择前两列和 来摆脱其他列`awk '{print $1" "$2}'`。

使用 simple`grep`你可以找到你需要的行，通过 process id: 过滤`grep 123`。

最后我们只选择第一列，即用户：`awk '{print $1}'`

# javascript - 单击时获取元素 ID

> ID：10562688
> 
> 赞同：0
> 
> 时间：2012-05-12T09:56:23.543
> 
> 标签：javascript, jquery, css

我已经设置了以下函数来更改加载时#help Div 的位置。

```
document.getElementById('help').style.left="600px"; 
```

我将如何使它在单击#help div 时起作用？（我尝试了以下）

```
$('#help').click()document.getElementById('help').style.left="600px";) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T09:57:32.230

使用纯 JavaScript，您可以设置[`onclick`](https://developer.mozilla.org/en/DOM/element.onclick)事件：

```
document.getElementById("help").onclick = function() {
    this.style.left = "600px";
} 
```

使用 JQuery，您可以使用以下[`click()`](http://api.jquery.com/click/)方法设置点击事件：

```
$("#help").click(function() {
    this.style.left = "600px";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:58:49.410

```
$("#help").click(function () {
    $(this).css({
        left: 600
    });
}); 
```

编辑：错误的副本...我的错...

# image - 如何从视频内存中获取屏幕图像？

> ID：10562689
> 
> 赞同：0
> 
> 时间：2012-05-12T09:56:39.903
> 
> 标签：image, memory, video, screen, fetch

我可以使用哪个库来做到这一点？您可以将其视为获取屏幕截图。

注意：我说的是PC。我没有指定操作系统，因为我希望该库应该以跨平台的方式进行。如果那是不可能的，那么我会很好地使用仅限 Windows 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:01:00.107

使用Java、类`java.awt.Robot`、方法`createScreenCapture(Rectangle screenRect)`

# wcf - WPF 客户端 - 我应该在后台线程中调用 WCF 服务吗？

> ID：10562695
> 
> 赞同：4
> 
> 时间：2012-05-12T09:57:12.370
> 
> 标签：wcf, command-query-separation

我有一个调用 2 个 WCF 服务的 WPF 客户端。

一项服务仅用于查询，一项服务用于命令（[CQS 模式](http://en.wikipedia.org/wiki/Command-query_separation)）。

我应该如何调用命令服务？

我在某处读到命令服务中的所有操作都必须是“单向”的，因为它们不应该返回任何值。如果出现问题 - 操作应该向客户端抛出“FaultException”。

但是如果命令都是单向的 - 我在客户端做什么？

假设我在 WPF 客户端中有一个“添加产品”窗口，我输入信息并按“保存”。

我现在在服务中调用“AddProduct(Product)”，但是：

1.  它应该关闭窗口吗？
2.  是否应该等待 10 秒以查看是否没有任何 FaultException ？
3.  操作**不**应该是“单向”吗？如果是这样 - 命令服务中的所有操作是否应该返回某种类型为“成功”或“失败”的通用“结果”对象？
4.  如果第 3 部分为“是”-我是否应该在单独的线程中调用该服务并“禁用”窗口上的所有控件，直到我从该服务得到响应？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:41:43.493

我会说选项 3 是要走的路，但您可能不需要通用`Result`对象将错误传达给客户端。您可能知道，异常不会在 SOAP 消息中序列化，因此您不会在客户端获得任何常见的 .NET 异常。另一方面，您仍然可以通过捕获`FaultException`客户端来利用 SOAP 错误。因此，如果客户端没有发现异常，那么一切都很顺利。

有关故障异常以及如何利用它们为您带来好处的更多信息，请查看：

[指定和处理合同和服务中的错误](http://msdn.microsoft.com/en-us/library/ms733721.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T20:21:15.263

我认为使用 On-Way 很好，但您必须了解一些单向呼叫特性。如果您关心并且可以处理服务异常，那么＃4 是不错的选择。

单向消息 - 一旦客户端发出调用，WCF 会生成请求消息，但不会将任何相关消息返回给客户端。服务端抛出的任何异常都不会到达客户端。

您应该拥有的一件事是您的服务的可靠性，以便您可以确保请求已交付给服务。

在没有传输会话（基本或 wsHttp 绑定）的情况下，如果在单向操作调用过程中发生异常，客户端将不受影响，它可以继续在同一代理实例上发送调用。

如果存在传输会话 - 服务端异常将使通道出错，因此客户端将无法重新使用代理来发送更多呼叫。这可以让您选择发现服务器端是否出现问题（但不是问题所在）。虽然，如果服务使用的是 FaultContracts，您仍然可能会遇到客户端不知道出现问题的情况。

当服务抛出服务端故障契约中列出的异常时，这不会使通信通道发生故障，因此使用单向契约的客户端无法检测到通信故障。

# c# - 如何在 c# windows 窗体应用程序中使用 VideoBrush？

> ID：10562696
> 
> 赞同：0
> 
> 时间：2012-05-12T09:57:18.707
> 
> 标签：c#, silverlight

我正在尝试通过 VideoBrush 获取网络摄像头视频，但问题是我无法在表单上显示它，因为图片框没有填充属性。我也尝试过其他容器，但没有一个有效。请帮忙？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:29:49.303

VideoBrush 是 WPF/Silverlight。如果您想在 Windows 窗体应用程序中托管它，您需要将带有 VideoBrush 的元素放在[`ElementHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx).

# android - Android 下载管理器错误

> ID：10562702
> 
> 赞同：1
> 
> 时间：2012-05-12T09:57:46.813
> 
> 标签：android, download-manager

我正在尝试以这种方式使用 Android DownloadManager 类： super.onCreate(savedInstanceState); 设置内容视图（R.layout.main）；

```
Request r = new Request(Uri.parse("http://url"));
r.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "file.ext"); // also tried all other possible ways to set up destination
DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
dm.enqueue(r); 
```

在最后一行，`dm.enqueue(r)`应用程序崩溃了。日志错误：

```
05-12 13:53:55.408: E/JavaBinder(6814): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
05-12 13:53:55.408: E/JavaBinder(6814): java.lang.NoSuchMethodError: getExternalStorages
05-12 13:53:55.408: E/JavaBinder(6814):     at com.android.providers.downloads.Helpers.isFilenameValid(Helpers.java:652)
05-12 13:53:55.408: E/JavaBinder(6814):     at com.android.providers.downloads.DownloadProvider.checkFileUriDestination(DownloadProvider.java:613)
05-12 13:53:55.408: E/JavaBinder(6814):     at com.android.providers.downloads.DownloadProvider.insert(DownloadProvider.java:500)
05-12 13:53:55.408: E/JavaBinder(6814):     at android.content.ContentProvider$Transport.insert(ContentProvider.java:198)
05-12 13:53:55.408: E/JavaBinder(6814):     at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:146)
05-12 13:53:55.408: E/JavaBinder(6814):     at android.os.Binder.execTransact(Binder.java:324)
05-12 13:53:55.408: E/JavaBinder(6814):     at dalvik.system.NativeStart.run(Native Method)
05-12 13:53:55.408: W/dalvikvm(6814): threadid=7: thread exiting with uncaught exception (group=0x2aac8620)
05-12 13:53:55.408: E/AndroidRuntime(6814): FATAL EXCEPTION: Binder Thread #1
05-12 13:53:55.408: E/AndroidRuntime(6814): java.lang.NoSuchMethodError: getExternalStorages
05-12 13:53:55.408: E/AndroidRuntime(6814):     at com.android.providers.downloads.Helpers.isFilenameValid(Helpers.java:652)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at com.android.providers.downloads.DownloadProvider.checkFileUriDestination(DownloadProvider.java:613)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at com.android.providers.downloads.DownloadProvider.insert(DownloadProvider.java:500)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at android.content.ContentProvider$Transport.insert(ContentProvider.java:198)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:146)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at android.os.Binder.execTransact(Binder.java:324)
05-12 13:53:55.408: E/AndroidRuntime(6814):     at dalvik.system.NativeStart.run(Native Method) 
```

但是，如果我不以任何方式指定目的地，则文件已成功下载。

我完全不明白有什么问题。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:20:59.330

在模拟器（或其他未修改的环境）上尝试您的代码。您也可以考虑尝试使用已知的[工作代码](https://github.com/commonsguy/cw-omnibus/tree/master/Internet/Download)。

# c - 如何从该进程中分辨出进程的父 pid？

> ID：10562703
> 
> 赞同：2
> 
> 时间：2012-05-12T09:58:03.200
> 
> 标签：c, linux, process

我知道`getppid`检索底层程序的父 pid，但是你怎么能从那个程序中分辨出来呢？我在 中找不到任何有用的东西`/proc/[pid]`，或者我可以使用任何有用的 API？

**更新**

我的意思是，我正在用另一个进程检查这些进程，所以 getppid 在这里不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:01:25.177

它是 /proc/[pid]/stat 中的第四个字段。它记录在手册页`proc(5)`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:02:21.120

该信息存在于 中`/proc/<pid>/stat`，并且更易读于`/proc/<pid>/status`：

```
$ grep PPid /proc/$$/status
PPid:   10615
$ awk '{print $4}' /proc/$$/stat
10615
$ ps -ef
...
me 10616 10615  0 11:04 pts/2    00:00:00 bash 
```

# time - 如何测试时间范围是否有 x 圈数

> ID：10562706
> 
> 赞同：0
> 
> 时间：2012-05-12T09:58:31.927
> 
> 标签：time, split, date-range, elapsedtime

我正在尝试解决一个有点像这样的“腐烂”难题：

> 假设 A 在 DateTime.new(2012,5,10,0,0,0) 处为 100，并且每 12 秒衰减 0.5，它是否在 DateTime.new(2012,5,10,0,8, 0)?

碰巧这个问题的答案是 - 嗯，真的:)

但是关于

*   一个存在 1304.5673，
*   每 1.2 毫秒衰减 0.00000197
*   并且结束时间不是一而是 2000 DateTime.new

我试过了

```
fd=3.minutes.ago.to_datetime
td=Time.now
material=1304.5673
decay=0.00000197
step=0.00012.seconds
fd.step(td,step){ |n| material-=decay }
puts material 
```

并且处理时间是可以接受的——但是如果我再往后退一步（可能是 10 小时甚至 2 小时；我的 CPU 冷却器开始积聚动力，就像它即将推动整个 Mac 进入轨道一样:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T19:22:27.777

我已经为这个问题苦苦挣扎了很长一段时间 - 尽管从问题到回答 SO 的时间跨度确实表明相反的 <:)

（对我来说，答案明确地证明了为什么 Ruby 是一门如此美妙的语言！）

```
# recap the variables in the question
total_decay = ((td.to_time - fd.to_time).divmod( step))[0]* decay
puts "new material: #{material - total_decay}" 
```

结果可能不会通过科学审查，但我对此表示满意（目前）；）

# maven - 修复 pom.xml 中的问题

> ID：10562707
> 
> 赞同：0
> 
> 时间：2012-05-12T09:58:43.323
> 
> 标签：maven, pom.xml

首先原谅我的英语；我是 maven 的新手，我的 pom.xml 文件有问题，而且 maven-copy-plugin 有问题，我不知道如何修复它。所以任何人都可以帮我写好我的 pom 吗？谢谢你，

这是我的例外：

```
<code>[INFO`enter code here`] Scanning for projects...
[WARNING] The POM for com.goldin.plugins:maven-copy-plugin:jar:0.2.3 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for com.goldin.plugins:maven-copy-plugin:0.2.3: Plugin com.goldin.plugins:maven-copy-plugin:0.2.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for com.goldin.plugins:maven-copy-plugin:jar:0.2.3
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building spring-security Maven Webapp 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for com.goldin.plugins:maven-copy-plugin:jar:0.2.3 is missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for com.goldin.plugins:maven-copy-plugin:0.2.3: Plugin com.goldin.plugins:maven-copy-plugin:0.2.3 or one of its dependencies could not be resolved: Failed to read artifact descriptor for com.goldin.plugins:maven-copy-plugin:jar:0.2.3
[WARNING] The POM for com.goldin.plugins:maven-copy-plugin:jar:0.2.3 is missing, no dependency information available</code> 
```

我拥有的 pom.xml 如下：

```
<code>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.krams</groupId>
  <artifactId>spring-security-tutorial</artifactId>
  <packaging>war</packaging>
  <version>0.0.1-SNAPSHOT</version>
  <name>spring-security Maven Webapp</name>
  <url>http://maven.apache.org</url>

      <pluginRepositories>

    <!-- Repo for maven-copy-plugin -->
    <pluginRepository>
        <id>evgeny-goldin.org</id>
        <name>Evgeny Goldin Repository</name>
        <url>http://evgeny-goldin.org/artifactory/repo/</url>
    </pluginRepository> 

  </pluginRepositories>
   <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

    <spring.core.version>3.1.0.RELEASE</spring.core.version>
    <spring.security.core.version>3.1.0.RELEASE</spring.security.core.version>
    <spring.data.jpa.version>1.1.0.M1</spring.data.jpa.version>

    <cglib.version>2.2</cglib.version>
    <aspectj.version>1.6.10</aspectj.version>

    <mysql.connector.version>5.1.16</mysql.connector.version>
    <hibernate.entitymanager.version>3.6.3.Final</hibernate.entitymanager.version>
    <hibernate.jpa-api.version>2.0-cr-1</hibernate.jpa-api.version>
    <c3p0.version>0.9.1.2</c3p0.version>

    <querydsl.version>2.2.5</querydsl.version>
    <slf4j.version>1.6.1</slf4j.version>
    <log4j.version>1.2.14</log4j.version>

    <javax.servlet-api.version>2.5</javax.servlet-api.version>
    <javax.jstl-taglibs.version>1.1.2</javax.jstl-taglibs.version>

    <!-- Testing -->
    <mockito.version>1.8.5</mockito.version>
    <junit.version>4.8.2</junit.version>

    <!-- Plugins -->
    <maven.copy.plugin.version>0.2.3</maven.copy.plugin.version>
    <maven.compiler.plugin.version>2.3.2</maven.compiler.plugin.version>
    <maven.apt.plugin.version>1.0</maven.apt.plugin.version>
  </properties>

  <dependencies>
  <!-- Spring Core -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- A seamless aspect-oriented extension to the Java programming language -->
    <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${aspectj.version}</version>
    </dependency>

    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>${aspectj.version}</version>
    </dependency>

    <!-- Cglib is a powerful, high performance and quality Code Generation Library, 
    It is used to extend JAVA classes and implements interfaces at runtime.  -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>${cglib.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- The JavaServer Pages Standard Tag Library (JSTL) encapsulates, as simple tags, core 
    functionality common to many JSP applications. -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>${javax.jstl-taglibs.version}</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>${javax.jstl-taglibs.version}</version>
    </dependency>

    <!-- Logger -->
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>${log4j.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- The Simple Logging Facade for Java or (SLF4J) serves as a simple facade or abstraction 
    for various logging frameworks, e.g. java.util.logging, log4j and logback, allowing the end 
    user to plug in the desired logging framework at deployment time. -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${slf4j.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency> 
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${slf4j.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${slf4j.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.security.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${spring.security.core.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- Spring Data JPA -->
    <dependency>
         <groupId>org.springframework.data</groupId>
         <artifactId>spring-data-jpa</artifactId>
         <version>${spring.data.jpa.version}</version>
    </dependency>

    <!-- Database pooling -->
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>${c3p0.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!--  MySQL Connector -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>${mysql.connector.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>

    <!-- Hibernate and JPA -->
    <dependency>
        <groupId>org.hibernate.java-persistence</groupId>
        <artifactId>jpa-api</artifactId>
        <version>${hibernate.jpa-api.version}</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.entitymanager.version}</version>
        <scope>compile</scope>
    </dependency>

    <!-- QueryDSL -->
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-core</artifactId>
        <version>${querydsl.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>${querydsl.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.mysema.querydsl</groupId>
      <artifactId>querydsl-apt</artifactId>
      <version>${querydsl.version}</version>
      <scope>provided</scope>
    </dependency>

    <!-- Javax Servlet. This needs to be included for runtime only! -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>${javax.servlet-api.version}</version>
        <scope>provided</scope>
    </dependency>

    <!-- Testing dependencies -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>${mockito.version}</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.core.version}</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>

  </dependencies>

  <build>
    <finalName>spring-security-tutorial</finalName>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>${maven.compiler.plugin.version}</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>maven-apt-plugin</artifactId>
            <version>${maven.apt.plugin.version}</version>
            <executions>
                <execution>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/generated-sources/java</outputDirectory>
                        <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
                    </configuration>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>com.goldin.plugins</groupId>
            <artifactId>maven-copy-plugin</artifactId>
            <version>${maven.copy.plugin.version}</version>
            <executions>
                <execution>
                    <id>create-archive</id>
                    <!-- Select compile phase so that resources are copied first before being packaged! -->
                    <phase>compile</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <resources>
                            <resource>
                                <targetPath>${project.build.outputDirectory}/META-INF</targetPath>
                                <directory>${project.basedir}/src/main/java/META-INF</directory>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>

  </build>

  <repositories>

    <!-- For main Spring releases -->
    <repository>
        <id>org.springframework.maven.release</id>
        <name>Spring Maven Release Repository</name>
        <url>http://maven.springframework.org/release</url>
        <releases><enabled>true</enabled></releases>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>

    <!-- For testing against latest Spring snapshots -->
    <repository>
        <id>org.springframework.maven.snapshot</id>
        <name>Spring Maven Snapshot Repository</name>
        <url>http://maven.springframework.org/snapshot</url>
        <releases><enabled>false</enabled></releases>
        <snapshots><enabled>true</enabled></snapshots>
    </repository>

    <!-- For developing against latest Spring milestones -->
    <repository>
        <id>org.springframework.maven.milestone</id>
        <name>Spring Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
        <snapshots><enabled>false</enabled></snapshots>
    </repository>

    <repository>
        <id>jboss</id>
        <name>JBoss repository</name>
        <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
    </repository>

  </repositories>

</project>

</code> 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:07:05.167

我能提出的最好建议是将 src/main/META-INFO 中的内容放入 src/main/resources/META-INF 中，这将导致自动复制到 target/classes 文件夹中，这使得复制插件变得多余. 另一个建议是使用存储库管理器[，而不是将存储库放入 pom](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)中。

# javascript - 带有事件 div 的自定义日历

> ID：10562711
> 
> 赞同：10
> 
> 时间：2012-05-12T09:59:17.407
> 
> 标签：javascript, jquery, algorithm

我正在开发一个事件系统，它基本上是一个高度为 720 像素的容器，每个像素代表从上午 9 点到晚上 9 点的一分钟，宽度为 620 像素（左右填充 10 像素）

日历系统的自然要求是：

*   对象的布局应使它们在视觉上不会重叠。
*   如果一个时间段有一个事件，它的宽度将是 600px
*   每个碰撞事件的宽度必须与它碰撞的所有其他事件的宽度相同。
*   事件应使用可能的最大宽度，同时仍遵守第一个约束。

![在此处输入图像描述](../Images/387796aeec40c86fbd9c05901bee9f34.png)

输入将是一个数组，例如：

```
[
 {id : 1, start : 30, end : 150},  // an event from 9:30am to 11:30am
 {id : 2, start : 540, end : 600}, // an event from 6pm to 7pm
 {id : 3, start : 560, end : 620}, // an event from 6:20pm to 7:20pm
 {id : 4, start : 610, end : 670} // an event from 7:10pm to 8:10pm
] 
```

我已经创建了所需的布局，但我被 JavaScript 部分卡住了:(这是我到目前为止所拥有的：

```
var Calendar = function() {

   var layOutDay = function(events) {
     var eventsLength = events.length;

     if (! eventsLength) return false;

     // sort events
     events.sort(function(a, b){return a.start - b.start;});

     for (var i = 0; i < eventsLength; i++) {
         // not sure what is next
     }         

   };

   return {
       layOutDay : layOutDay,
   }

}(); 
```

需要根据上述要求创建 div 并定位它们。

[请参阅 JSBin 演示。](http://jsbin.com/odagom/7)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:14:53.360

这是一个可行的解决方案：http: [//jsbin.com/igujil/13/edit#preview](http://jsbin.com/igujil/13/edit#preview)

如您所见，这不是一个容易解决的问题。让我带你了解一下我是如何做到的。

第一步，标记为**Step 0**，是确保事件按 id 排序。当我们开始使用数据时，这将使我们的生活更轻松。

**第 1 步**是初始化一个二维时隙数组。对于日历中的每一分钟，我们将创建一个数组，其中包含在那一分钟内发生的事件。我们这样做...

**第2步！**您会注意到我添加了一项检查以确保活动在结束之前开始。有点防御，但我的算法会在坏数据上陷入无限循环，所以我想确保这些事件有意义。

在这个循环结束时，我们的时隙数组将如下所示：

0：[]
1：[]
...
30：[1]
31：[1]
...
（跳到一些有趣的数字）
540：[2]
560：[2,3]
610：[3,4 ]

如果您感到困惑/好奇，我鼓励您`console.log(timeslots)`在第 3 步之前添加。这是解决方案中非常重要的一部分，下一步要解释起来要困难得多。

**第 3 步**是我们解决调度冲突的地方。每个事件需要知道两件事：

1.  冲突的最大次数。
2.  它的水平顺序（这样冲突就不会重叠）。

(1) 很容易，因为我们的数据是如何存储的；每个时隙数组的宽度是事件的数量。例如，时间段 30 只有 1 个事件，因为事件 #1 是当时唯一的一个。然而，在时隙 560 中，我们有两个事件，因此每个事件（#2 和 #3）计数为 2。（如果有一排有三个事件，他们都会得到三个，等等）

(2) 更微妙一些。事件#1 很明显，因为它可以跨越日历的整个宽度。事件 #2 将不得不缩小其宽度，但它仍然可以从左边缘开始。事件 #3 不能。

我们使用我称为的每个时隙变量来解决这个问题`next_hindex`。它从 0 开始，因为默认情况下我们希望沿左边缘定位，但每次发现冲突时它都会增加。这样，下一个事件（我们的下一个冲突部分）将从下一个水平位置开始。

**第 4 步**要简单得多。宽度计算使用步骤 3 中的最大冲突计数。例如，如果我们知道在 5:50 有 2 个事件，我们知道每个事件必须是日历宽度的 1/2。（如果我们有 3 个事件，每个事件将是 1/3，等等。） x 位置的计算类似；我们乘以 hindex 因为我们想要抵消（冲突数量）事件的宽度。

最后，我们只需创建一个小 DOM，定位我们的事件 div，并设置随机颜色，以便于区分它们。结果是（我认为）你正在寻找的东西。

如果您有任何问题，我很乐意回答。我知道这可能比您预期的代码更多（并且更复杂），但这是一个令人惊讶的复杂问题要解决:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-28T10:40:04.193

这是我的解决方案： # one-day A 一日日历

## 要求

第一部分：编写一个函数，在日历上安排一天的一系列事件。

事件将被放置在一个容器中。容器的顶部代表上午 9 点，底部代表晚上 9 点。
容器的宽度为 620 像素（左右填充 10 像素），高度为 720 像素（上午 9 点到晚上 9 点之间每分钟 1 个像素）。对象的布局应使它们在视觉上不会重叠。如果给定时间段只有一个事件，则其宽度应为 600 像素。

有两个主要限制： 1\. 每个碰撞事件的宽度必须与它碰撞的所有其他事件的宽度相同。2\. 一个事件应该使用可能的最大宽度，同时仍然遵守第一个约束。

请参见下图作为示例。 ![图 1](../Images/2ae3626f881b874d0e9ed573b098cfbb.png)

该函数的输入将是一个包含事件开始和结束时间的事件对象数组。示例（JS）：

```
[

     {id : 1, start : 60, end : 120},  // an event from 10am to 11am
     {id : 2, start : 100, end : 240}, // an event from 10:40am to 1pm
     {id : 3, start : 700, end : 720} // an event from 8:40pm to 9pm 
] 
```

除了 id、开始和结束时间之外，该函数还应返回一个事件对象数组，这些对象对象设置了 left 和 top 位置（相对于容器的左上角）。

第 II 部分：使用第 I 部分中的函数创建一个样式类似于下面示例图像的网页。
![图2](../Images/013fcbcfbdd153484c35c46c4a813596.png) 带有以下日历事件：

1.  上午 9:30 开始，上午 11:30 结束的活动
2.  下午 6:00 开始，晚上 7:00 结束的活动
3.  下午 6:20 开始，晚上 7:20 结束的活动
4.  晚上 7:10 开始，晚上 8:10 结束的活动

## 代码

### 安装和运行

1.  克隆这个 repo
2.  在您喜欢的浏览器中打开 index.html 文件。

**注意：**在启动时有一组默认事件（第二部分需要）。
为了测试，在默认数组的正下方（第 14 行），您可以找到`generateEvents`生成随机事件数组的函数。数组大小将由 arrayLength 属性确定。

### 依赖项

没有任何！

## 解决方案

您可以在下面找到根据要求解决问题的算法。

### 介绍

我将尝试用图表的方式来解决这个任务，所以应该给出很少的术语。

### 条款

**节点：**代表一个事件 - $n$, $n \in N, N$ - 所有节点的组。
**边：**表示碰撞事件 - $e$, $e \in E, E$ - 所有边的组。例如，如果节点 $u$ 和 $v$ 发生碰撞，那么将有一条边 $e_{u,v}$ 连接它们。
**图：**节点和边 $G, G\in(N,E)$ 的集合。
**Cluster：**表示一组连接的节点（图的子组） - $c$, $c \subseteq G$。例如，如果我们有以下节点：$u, v, w$ 和边 $e_{u,v}$。然后会有 2 个簇，第一个包含 $u,v$，第二个只包含 $w$。
**集团：**表示集群中节点的子组，该组中的每一对节点都有一条连接边 - $cq$, $cq \subseteq c$。注意，一个 clique 代表一组碰撞事件。

**Board：**存放所有事件的日容器。

### 术语示例

对于以下输入：

```
[
     {id : 1, start : 0, end : 120}, 
     {id : 2, start : 60, end : 120},
     {id : 3, start : 60, end : 180},
     {id : 4, start : 150, end : 240},
     {id : 5, start : 200, end : 240},
     {id : 6, start : 300, end : 420},
     {id : 7, start : 360, end : 420},
     {id : 8, start : 300, end : 720}
] 
```

该图将是：

![图形图像](../Images/5dcc8d5f2a786cc5dd67a7d1e3d396aa.png)

黑色循环 - 节点 - 事件
绿色椭圆 - 集团 - 碰撞事件组
红色椭圆 - 集群 - 连接节点组
蓝色线 - 边缘 - 碰撞事件之间的连接器
注意：左上角的绿色椭圆是左侧集群中最大的集团。
董事会将是： ![木板](../Images/5cabe4819da5882543e67763abf58136.png)

红色矩形 - 簇
彩色圆点 - 派系（每种颜色都是不同的派系）。

### 约束释义

1.  **同一集群**中的每个节点必须在板上具有相同的宽度，以满足第一个约束。
2.  节点不得在板上相互重叠，同时淀粉至最大宽度并仍遵守第一个约束。
3.  集群中节点的宽度将由集群中最大的集团设置。这是真的，因为同一集团中的节点将在棋盘上共享至少一分钟，这意味着它们必须具有相同的宽度（因为它们正在碰撞）。因此集群中的其他节点将具有与最小节点相同的宽度。
4.  clique 中的每个节点都将获得其相对于其邻居的 X 轴位置。

### 算法

对于给定的事件数组`arrayOfEvents`（来自需求示例）：

```
[

     {id : 1, start : 60, end : 120},  // an event from 10am to 11am
     {id : 2, start : 100, end : 240}, // an event from 10:40am to 1pm
     {id : 3, start : 700, end : 720} // an event from 8:40pm to 9pm 
] 
```

**第一步：**创建事件直方图。
将创建一个数组数组，让我们将此数组称为`histogram`. `histogram`长度为 720，每个索引将`histogram`代表棋盘上的一分钟（天）。`histogram`让我们调用a 的每个索引`minute`。每个`minute`, 本身就是一个数组。数组的每个索引`minute`代表在这一分钟发生的一个事件。

伪代码：

```
histogram = new Array(720); 

forEach minute in histogram:
    minute = new Array(); 

forEach event in arrayOfEvents:
    forEach minute inBetween event.start and endMinute:
        histogram[minute].push(event.id); 
```

`histogram`在此步骤之后数组将如下所示（对于给定的示例）：

```
[
    1: [],
    2: [],
    .
    .
    .
    59: [],
    60: [1],
    61: [1],
    .
    .
    .
    99: [1],
    100: [1,2],
    101: [1,2],
    .
    .
    .
    120: [1,2],
    121: [2],
    122: [2],
    .
    .
    .
    240: [2],
    241: [],
    242: [],
    .
    .
    .
    699: [],
    700: [3],
    701: [3],
    .
    .
    .
    720: [3]
] 
```

**第二步：**创建图
在这一步中，将创建图，包括节点、节点邻居和集群，还将确定集群的最大集团。
请注意，不会有边缘实体，每个节点都将保存一个节点映射（键：节点 ID，值：节点），它与（其邻居）发生冲突。这张地图将被称为邻居。此外，`maxCliqueSize`将向每个节点添加一个属性。`maxCliqueSize`是该节点所属的最大集团。

伪代码：

```
nodesMap := Map<nodeId, node>;
graph := Object<clusters, nodesMap>;
Node := Object<nodeId, start, end, neighbours, cluster, position, biggestCliqueSize>;
Cluster := Object<mapOfNodesInCluster, width>

//creating the nodes
forEach event in arrayOfEvents {
    node = new Node(event.id, event.start, event.end, new Map<nodeId, node>, null)
    nodeMap[node.nodeId] = node;
 }

//creating the clusters
cluster = null;
forEach minute in histogram {
    if(minute.length > 0) {
        cluster = cluster || new Cluster(new Array(), 0);
        forEach eventId in minute {
            if(eventId not in cluster.nodes) {
                cluster.nodes[eventId] = nodeMap[eventId];
                nodeMap[eventId].cluster = cluster;
            }
        } 
    } else { 
        if(cluster != null) {
            graph.clusters.push(cluster);
        }

        cluster = null;
    }
}

//adding edges to nodes and finding biggest clique for each node
forEach minute in histogram {
    forEach sourceEventId in minute {
        sourceNode = eventsMap[sourceEventId];
        sourceNode.biggestCliqueSize = Math.max(sourceNode.biggestCliqueSize, minute.length);
        forEach targetEventId in minute {
            if(sourceEventId != targetEventId) {
                sourceNode.neighbours[targetEventId] = eventsMap[targetEventId];
            }
        }
    }
} 
```

**第三步：**计算每个簇的宽度。
如上所述，集群中所有节点的宽度将由集群中最大集团的大小决定。
集群 $c$ 中每个节点 $n$ 的宽度将遵循以下等式：
$$n_{width} = \frac{Board_{width}}{Max\left (n_{1}.biggestCliqueSize, n_{2}。最大CliqueSize, ..., n_{n}.biggestCliqueSize\right )}$$

每个节点宽度都将在与其相关的集群中设置。因此将在集群实体上设置宽度属性。

伪代码：

```
forEach cluster in graph.clusters {
    maxCliqueSize = 1;
    forEach node in cluster.nodes {
        maxCliqueSize = Max(node.biggestCliqueSize, sizeOf(node.clique);
    }
    cluster.width = BOARD_WIDTH / maxCliqueSize; 
    cluster.biggestCliqueSize = biggestCliqueSize;
} 
```

**第四步：**计算其团内的节点位置。
如前所述，节点必须与其邻居共享 X 轴（“不动产”）。在这一步中，将根据其邻居为每个节点给出 X 轴位置。集群中最大的集团将决定可用名额的数量。

伪代码：

```
forEach node in nodesMap {
    positionArray = new Array(node.cluster.biggestCliqueSize);
    forEach cliqueNode in node.clique {
        if(cliqueNode.position != null) {
            //marking occupied indexes
            positionArray[cliqueNode.position] = true;
        }
    }

    forEach index in positionArray {
        if(!positionArray[index]) {
            node.position = index;
            break;
        }
    }
} 
```

**第五步：**将节点放在板上。在这一步中，我们已经拥有了将事件（节点）放置在板上的位置所需的所有信息。每个节点的位置和大小将由以下因素决定：

1.  高度：node.end - node.start
2.  宽度：node.cluster.width
3.  顶部偏移：node.start
4.  左偏移：node.cluster.width * node.position + 左填充

算法复杂度

该算法的时间复杂度为$O\left(n^{2}\right)$。
该算法的空间复杂度为$O\left (n\right)$。

Github 仓库：[https ://github.com/vlio20/one-day](https://github.com/vlio20/one-day)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T12:48:05.920

如果您想自己动手，请使用以下代码：
DEMO：http: [//jsfiddle.net/CBnJY/11/](http://jsfiddle.net/CBnJY/11/)

```
var Calendar = function() {
var layOutDay = function(events) {
    var eventsLength = events.length;

    if (!eventsLength) return false;

    // sort events
    events.sort(function(a, b) {
        return a.start - b.start;
    });

    $(".timeSlot").each(function(index, val) {
        var CurSlot = $(this);
        var SlotID = CurSlot.prop("SlotID");
        var EventHeight = CurSlot.height() - 1;
        //alert(SlotID);
        //get events and add to calendar
        var CurrEvent = [];
        for (var i = 0; i < eventsLength; i++) {
            // not sure what is next
            if ((events[i].start <= SlotID) && (SlotID < events[i].end)) {
                CurrEvent.push(events[i]);
            }
        }

        var EventTable = $('<table style="border:1px dashed purple;width:100%"><tr></tr></table');
        for (var x = 0; x < CurrEvent.length; x++) {
            var newEvt = $('<td></td>');
            newEvt.html(CurrEvent[x].start+"-"+CurrEvent[x].end);
            newEvt.addClass("timeEvent");
            newEvt.css("width", (100/CurrEvent.length)+"%");
            newEvt.css("height", EventHeight);
            newEvt.prop("id", CurrEvent[x].id);
            newEvt.appendTo(EventTable.find("tr"));
        }
        EventTable.appendTo(CurSlot);
    });

};

return {
    layOutDay: layOutDay
}
}();

var events = [
{
id: 1,
start: 30,
end: 150},
{
id: 2,
start: 180,
end: 240},
{
id: 3,
start: 180,
end: 240}];

$(document).ready(function() {
var SlotId = 0;
$(".slot").each(function(index, val) {
    var newDiv = $('<div></div>');
    newDiv.prop("SlotID", SlotId)
    //newDiv.html(SlotId);
    newDiv.height($(this).height()+2);
    newDiv.addClass("timeSlot");
    newDiv.appendTo($("#calander"));
    SlotId = SlotId + 30;
});

// call now
Calendar.layOutDay(events);
}); 
```

我强烈建议使用[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)
演示： http: [//jsfiddle.net/jGG34/2/](http://jsfiddle.net/jGG34/2/)
无论你想要实现什么都已经实现，只需启用白天模式并做一些 css黑客..就是这样！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:05:20.773

如果我理解正确，输入是包含开始时间和结束时间的事件列表，对于每个事件，输出是该事件的列号和该事件期间的总列数。您基本上需要为[区间图](http://en.wikipedia.org/wiki/Interval_graph)着色；这是一些伪代码。

1.  对于每个事件`e`，使两个“瞬间”（开始，`e`）和（结束，`e`）指向`e`。

2.  按时间对这些瞬间进行排序，结束瞬间出现*在*同时的开始瞬间之前。

3.  初始化一个空列表`component`、一个空列表`column_stack`、一个数字`num_columns = 0`和一个数字`num_active = 0`。`component`包含将分配相同数量的列的所有事件。`column_stack`记住哪些列是空闲的。

4.  按顺序扫描瞬间。如果它是事件的开始时刻`e`，那么我们需要分配`e`一列。`column_stack`如果该列非空，则通过弹出来获取该列；否则，分配一个新列 (number `num_columns`) 并递增`num_columns`(基于 1 的索引的其他顺序而不是基于 0 的索引)。附加`e`到`component`. 增量`num_active`。如果是结束瞬间，则将`e`的指定列推到`column_stack`。减量`num_active`。如果`num_active`现在为 0，那么我们通过弹出所有事件`component`并将它们的总列数设置为开始一个新的连接组件`num_columns`，然后清除`column_stack`并重置`num_columns`为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T18:54:22.057

我将按如下方式解决问题。

*分隔线*是一天中没有事件*跨越*的任何时刻。因此，如果您在上午 9 点到上午 11 点有一个活动，从上午 11 点到下午 1 点有另一个活动，并且没有其他活动，那么在上午 11 点、下午 1 点或之后的任何时间以及 9 点的任何时间都有一个分隔线上午或更早。

我会将每一天分成一组“多事的时间跨度”，它们是不包含分隔符的最大时间跨度。对于每个多事的时间跨度，我将计算同时重叠事件的最大数量，并将其用作该事件跨度的“列号”。然后，我会在计算出的列数上贪婪地布局每个事件的时间跨度，以便每个事件按照事件开始时间的顺序尽可能左布置。

因此，例如以下时间表：

```
A  9 am - 11 am
B 10 am - 12 pm
C 10 am -  1 pm
D  1 pm  - 2 pm
E  2 pm  - 5 pm
F  3 pm  - 4 pm 
```

将按如下方式处理。多事的时间跨度是上午 9 点 - 下午 1 点、下午 1 点 - 下午 2 点和下午 2 点 - 下午 5 点，因为在下午 1 点和下午 2 点有分隔线（没有事件*跨越*这些时间）。

在第一个跨度上，最多有三个重叠事件，第二个只有一个，第三个是两个。

列分配如下：

```
 9 am - 10 am  |   |   |   |
10 am - 11 am  |   |   |   |
11 am - 12 pm  |   |   |   |
12 pm -  1 pm  |   |   |   |___ end of first e.t.s.
 1 pm -  2 pm  |           |___ end of second e.t.s.
 2 pm -  3 pm  |     |     |
 3 pm -  4 pm  |     |     |
 4 pm -  5 pm  |     |     | 
```

之后，按照时间顺序贪婪地填写事件：

```
 9 am - 10 am  | A |###|###|
10 am - 11 am  |_A_| B | C |
11 am - 12 pm  |###|_B_| C |
12 pm -  1 pm  |###|###|_C_|
 1 pm -  2 pm  |_____D_____|
 2 pm -  3 pm  |  E  |#####|
 3 pm -  4 pm  |  E  |__F__|
 4 pm -  5 pm  |__E__|#####| 
```

这看起来很合理。# 表示空闲空间

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T12:26:19.270

关键点是计算约会中的所有冲突。有一个非常简单的算法可以做到这一点：

*   `appointments`根据开始日期和结束日期对约会数组进行排序。
*   维护一个包含所有活动约会的数组`active`，一开始是空的
*   为每个约会维护一个值`collision`（因为您已经有对象，您可以将其存储为另一个属性）`[{id : 1, start : 30, end : 150, collisions : 0},...]`

`appointments`通过以下步骤迭代：

1.  将第一项 ( `i`) 从`appointments`
2.  比较中所有项目的开始日期`i`和结束日期- 删除所有项目，`j`其中<`active``j.enddate``i.startdate`
3.  更新所有剩余的碰撞`j`（每个+1）
4.  `i`( `i.collision = active.length`)的更新碰撞
5.  弹出`i`数组`active`

对 的所有项目重复这些步骤`appointments`。

**例子：**

（当心，伪代码）：

```
var unsorted = [7,9],[2,8],[1,3],[2,5],[10,12]
// var appointments = sort(unsorted);
var appointments = [1,3],[2,5],[2,8],[7,9],[10,12]

// now for all items of appoitments:
for (var x = 0; x<appointments.length;x++){
    var i = appointments[x];                 // step 1
    for (var j=0; j<active.length;j++){      
     // remove j if j.enddate < j.startdate  // step 2
     // else j.collision += 1;               // step 3
    }
    i.collision = active.length;             // step 4
    active.pop(i);                           // step 5
} 
```

如果您收集从活动中删除的项目，您会得到一个数组，按开始日期之前的结束日期排序，您可以使用它来显示 div。

现在，试试您是否可以获得代码以使其工作，如果您需要进一步的帮助，请写评论。

# qt - 交叉编译时配置 Qt 库 4.8.1 错误

> ID：10562716
> 
> 赞同：1
> 
> 时间：2012-05-12T09:59:57.783
> 
> 标签：qt, configuration, arm

我正在为我的嵌入式板编译带有声子和声子后端的 Qt。我输入：

```
./configure -embedded arm -xplatform qws/linux-arm-g++ -qt-mouse-tslib -L/home/user/ev-sdk/rootfs/arm-a8-fs/usr/lib -L/home/user/Desktop/qt-everywhere-opensource-src-4.8.1/lib -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include/freetype2/freetype/config -prefix /opt/qt_eng -little-endian -no-gif -no-libtiff -no-libmng -no-openssl -no-opengl -no-mmx -no-3dnow -no-sse -no-sse2 -no-largefile -no-sm -svg -v -no-feature-cursor -fast -opensource -release -no-multimedia -no-cups -no-nis  -no-exceptions -nomake examples -nomake demos -no-sql-sqlite -no-g++-exceptions -phonon -phonon-backend -DQT_NO_QWS_CURSOR -DQT_THREAD_SUPPORT 
```

使用 /home/user/Desktop/qt-everywhere-opensource-src-4.8.1/mkspecs/qws/linux-arm-g++ 中的 qmake.conf：

```
#
# qmake configuration for building with arm-linux-g++ #

include(../../common/gcc-base.conf)
include(../../common/gcc-base-unix.conf)
include(../../common/g++.conf)
include(../../common/linux.conf)
include(../../common/qws.conf)

QMAKE_CFLAGS_RELEASE     = -O3 -march=armv7-a -mtune=cortex-a8
-mfpu=neon -mfloat-abi=softfp

DEFINES +=

# modifications to g++.conf
QMAKE_CC                = sb2 -t imx53 gcc
QMAKE_CXX               = sb2 -t imx53 g++
QMAKE_LINK              = sb2 -t imx53 g++
QMAKE_LINK_SHLIB        = sb2 -t imx53 g++

# modifications to linux.conf
QMAKE_AR                = sb2 -t imx53 ar cqs
QMAKE_OBJCOPY           = sb2 -t imx53 objcopy
QMAKE_STRIP             = sb2 -t imx53 strip

load(qt_config) 
```

如果我`-phonon -phonon-backend`从选项中删除，则编译成功。如果我把`-phonon -phonon-backend` 我有这个错误：

```
.
.
.
D-Bus auto-detection... ()
Project WARNING: Your mkspec is including 'common/g++.conf', but the mkspecs have been refactored
 To fix this include 'common/gcc-base-.conf and 'common/g++-.conf' instead
sb2 -t imx53 g++ -c -pipe -pipe -pipe -pipe -pipe -pipe -O2 -O2 -O2 -O2 -O2 -O2 -Wall -W -Wall -W -Wall -W -Wall -W -Wall -W -Wall -W  -I../../../mkspecs/qws/linux-arm-g++ -I. -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include/freetype2/freetype/config -I/usr/lib/glib-2.0/include -I/usr/include/glib-2.0 -o dbus.o dbus.cpp
dbus.cpp:43:23: error: dbus/dbus.h: No such file or directory
dbus.cpp:46:2: error: #error Needs at least dbus version 1
dbus.cpp: In function 'int main(int, char**)':
dbus.cpp:51: error: 'dbus_shutdown' was not declared in this scope
make: *** [dbus.o] Error 1
D-Bus disabled.
Glib auto-detection... ()
Project WARNING: Your mkspec is including 'common/g++.conf', but the mkspecs have been refactored
To fix this include 'common/gcc-base-.conf and 'common/g++-.conf' instead
sb2 -t imx53 g++ -c -pipe -pipe -pipe -pipe -pipe -pipe -O2 -O2 -O2 -O2 -O2 -O2 -Wall -W -Wall -W -Wall -W -Wall -W -Wall -W -Wall -W  -I../../../mkspecs/qws/linux-arm-g++ -I. -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include -I/home/user/ev-sdk/rootfs/arm-a8-fs/usr/include/freetype2/freetype/config -I/usr/lib/glib-2.0/include -I/usr/include/glib-2.0 -o glib.o glib.cpp
glib.cpp: In function 'int main(int, char**)':
glib.cpp:55: warning: 'pollfd' is used uninitialized in this function
sb2 -t imx53 g++ -Wl,-O1 -o glib glib.o     -L/home/user/ev-sdk/rootfs/arm-a8-fs/usr/lib -L/home/user/Desktop/qt-everywhere-opensource-src-4.8.1/lib
*glib.o: In function `main':
glib.cpp:(.text+0x10): undefined reference to `g_thread_init'
glib.cpp:(.text+0x14): undefined reference to `g_main_context_default'
glib.cpp:(.text+0x20): undefined reference to `g_source_new'
glib.cpp:(.text+0x28): undefined reference to `g_source_add_poll'
glib.cpp:(.text+0x38): undefined reference to `g_threads_got_initialized'
collect2: ld returned 1 exit status
make: *** [glib] Error 1*
Glib disabled.
Phonon support cannot be enabled due to functionality tests!
 Turn on verbose messaging (-v) to ./configure to see the final report.
 If you believe this message is in error you may use the continue
 switch (-continue) to ./configure to continue. 
```

我失去了最后两天来理解为什么给出错误。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-18T22:31:27.080

Debian/linux 可以使用：

```
 $ sudo apt-get install libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev 
```

该命令可以在运行前运行`./configure`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T10:03:47.827

```
QMAKE_LIBDIR           += -L$${ROOTFS_DIR}/usr/lib
QMAKE_CFLAGS           += -I$${ROOTFS_DIR}/usr/include/glib-2.0
QMAKE_CFLAGS           += -I$${ROOTFS_DIR}/usr/lib/glib-2.0/include
QMAKE_LIBS             += -lgthread-2.0 -lglib-2.0 -v 
```

# php - 使用 AMDownload 将 mosyn Http 发布到 php

> ID：10562717
> 
> 赞同：0
> 
> 时间：2012-05-12T10:00:15.360
> 
> 标签：php, android, c++, mobile

大家好，我正在尝试使用 AppMancer AMDownload 将一些数据发布到 php 脚本，这是我的代码

```
#include <MAUtil/Moblet.h>
#include <conprint.h>
#include <AMDownload/DownloadManager.h>

using namespace AMDownload;
using namespace MAUtil;

/**
* A Moblet is a high-level class that defines the
* behaviour of a MoSync program.
*/
class MyMoblet : public Moblet, private DownloadRequestListener
{
public:
/**
 * Initialize the application in the constructor.
 */
MyMoblet()
{
    printf("Press zero or back to exit\n");
}

/**
 * Called when a key is pressed.
 */
void keyPressEvent(int keyCode, int nativeCode)
{
    if (MAK_BACK == keyCode || MAK_0 == keyCode)
    {
        // Call close to exit the application.
        close();
    }

    // Print the key character.
    printf("You typed: %c\n", keyCode);
    String password = "p45sw0rd";
    DownloadRequest* req =  DownloadManager::createRequest(this);
    req->setUrl("https://acrscore.usa.cc/accounts/test/upload.php");
    req->setHttpMethod(HTTP_POST);
    req->addPostData("name", "hy");
    DownloadManager::enqueue(req);
}

 void downloadFinished(DownloadRequest* request){}

/**
 * Called when a key is released.
 */
void keyReleaseEvent(int keyCode, int nativeCode)
{
}

/**
 * Called when the screen is touched.
 */
void pointerPressEvent(MAPoint2d point)
{
    // Print the x and y coordinate.
    printf("You touched: %i %i\n", point.x, point.y);
}

private:

};

/**
 * Entry point of the program. The MAMain function
 * needs to be declared as extern "C".
 */
extern "C" int MAMain()
{
Moblet::run(new MyMoblet());
return 0;
} 
```

这是控制台输出

```
[28] Emulator connected.
[28] PrintConsole: 
[28] Press zero or back to exit
[28] 
[28] PrintConsole: 
[28] You typed: 4
[28] MoSync Panic 40055\. "Attempted to use a resource, but no resources exist." The     panic occurred in the syscall maGetDataSize.
[28] IP:0xefda: crtlib.s:1
[28] IP:0x2b0: C:/MoSync/workspace/uu/main.cpp:20
[28] IP:0x2058e: c:/slave/buildScripts/temp_Nnqh/source/libs/MAUtil/Moblet.cpp:89
[28] IP:0x1a704: c:/slave/buildScripts/temp_Nnqh/source/libs/MAUtil/ListenerSet.h:60
[28] IP:0x13f: C:/MoSync/workspace/uu/main.cpp:13
[28] IP:0x1c7: C:/MoSync/workspace/uu/main.cpp:41
[28] IP:0x696a0: C:/MoSync/AppMancer/AMDownload/DownloadManager.cpp:81
[28] IP:0x6952a: C:/MoSync/AppMancer/AMDownload/DownloadManager.cpp:195
[28] IP:0x67ce0: C:/MoSync/AppMancer/AMDownload/HttpDownloader.cpp:68
[28] IP:0x67a75: C:/MoSync/AppMancer/AMDownload/HttpDownloader.cpp:269
[28] Exit @ IP 0x67a73  SP 0x3ffe9c
[28] IP:0x67a73: C:/MoSync/AppMancer/AMDownload/HttpDownloader.cpp:269 
```

我不明白我的意思

```
MoSync Panic 40055\. "Attempted to use a resource, but no resources exist." The panic occurred in the syscall maGetDataSize. 
```

我已经设置了发布数据 req->addPostData("name", "hy");

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:46:50.733

用于 MoSync 3.0.1 的 AMDownload 的第一个版本中有一个错误 - 对此感到抱歉。[从http://appmancer.com/download/AMDownload.zip](http://appmancer.com/download/AMDownload.zip)可以下载正确的版本。将这两个文件解压到您的 MoSync/lib/pipe 文件夹中。

# javascript - JavaScript 中的控制台需要什么？

> ID：10562719
> 
> 赞同：1
> 
> 时间：2012-05-12T10:00:41.543
> 
> 标签：javascript, html, function, console

有人告诉我，使用 console.log() 方法后，我不需要警报框并准备了一些代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script>
function cool()
{console.log("Message");}</script>
</head>

<body onload="cool();">
</body>
</html> 
```

但它并没有像警告框那样让 JavaScript 停止运行。它还将“消息”写入 Firebug 窗口。

*   它如何在没有 Firebug 的客户端浏览器上工作？

*   它是否适用于使用相同语法的所有浏览器？

*   它只是为了 Web 开发目的而制作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:03:21.620

> 它如何在没有 firebog 的客户端浏览器上工作。

它不起作用 :-) 实际上 FireBug 不是必需的。例如，现代浏览器（例如 Google Chrome）已经`console.log`实现了该方法，并且输出进入了它们的控制台。对于旧版浏览器，它不起作用，因为未定义此方法。

> 它只是为了网络开发目的而制作的吗？

是的，主要用于调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T10:12:48.757

有一些浏览器，比如 IE7，没有定义一些控制台方法。如果您经常使用 console.debug、console.info 和其他在 IE7 和其他浏览器中可能不可用的方法，您可以通过在页面上运行任何其他 JavaScript 之前粘贴此代码来处理这种情况：

```
// override loggers to avoid throwing errors
if(window.console == null || window.console == undefined || !window.console) {
           console = { log: function() {}, info: function() {}, warn: function() {}, error: function() {}, trace: function() {}, debug: function() {} };
           var fbscript = document.createElement("script");
           fbscript.src = "https://getfirebug.com/firebug-lite-beta.js";
           fbscript.setAttribute("type","text/javascript");
           document.getElementsByTagName("head")[0].appendChild(fbscript);
} else if(!console.debug) {
         console.debug = function(text) { if(console.log) console.log("D: "+text); };
} 
```

这首先检查 window.console 是否为 null 或未定义。如果是，那么它将console、console.log、console.info等定义为空函数。这可以防止它们在不支持它们的浏览器中导致错误，并且可以防止您在代码中存在错误或其他问题时不必要地删除原本非常有用的面包屑。

这样做的另一件事是在找不到控制台时输入 Firebug Lite。这在没有本机调试器的浏览器中非常有用。

控制台日志语句优于警报的优点是日志语句不会停止代码的执行。在测试同时触发多个事件的功能或调试代码时，在代码中包含警报可能会掩盖一些未知错误，这些错误可能是您在即将部署和删除警报时才发现的，或者更糟糕的是，它们没有得到直到代码投入生产后才被发现。

就观众而言，我不认识太多了解 Firebug 或 Chrome 调试器的非技术人员。因此，Web 开发人员似乎确实是这些功能的预期目标。这并不是说它们不能用于其他功能。例如，当我在线观看视频时，我使用 chrome 调试器来删除烦人的侧边栏广告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T10:04:05.377

记录消息就是这样做的。

> 它如何在没有 firebog 的客户端浏览器上工作。

它输出到浏览器定义的任何 javascript 控制台。FireBug 会拦截它，但不是必需的。

> 它是否适用于所有具有相同语法的浏览器？

是的。

> 它只是为了网络开发目的而制作的吗？

用于*调试*javascript。

# linux - 使用单个命令通过 ssh 找不到命令，连接到终端后找到

> ID：10562722
> 
> 赞同：25
> 
> 时间：2012-05-12T10:01:07.870
> 
> 标签：linux, ssh

> **可能重复：**
> [为什么 SSH 远程命令获得的环境变量比手动运行时少？](https://stackoverflow.com/questions/216202/why-does-an-ssh-remote-command-get-fewer-environment-variables-then-when-run-man)

如果我把命令

> ssh 用户@$IP 蚂蚁

然后我收到

> bash：蚂蚁：找不到命令

但是当我登录

> ssh 用户@$IP

并放

> 蚂蚁

然后工作正常。

Ant 安装在远程和本地机器上。问题出在哪里？

我试图在谷歌中找到解决方案，但一无所获。

提前感谢您的帮助！

- 编辑 -

我需要调用一些 bash 脚本，不想将所有路径更改为完整路径。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-12T14:48:10.730

默认情况下，通过 ssh 连接时不会加载配置文件。要启用此行为，请在 /etc/ssh/sshd_config 中设置以下选项：

```
PermitUserEnvironment yes 
```

之后重启 ssh

```
/etc/init.d/ssh restart 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-12T10:05:49.993

指定绝对路径，如果我没记错的话，当您运行远程命令`ant`时，您的配置文件不会运行。`ssh`

# c - C 编译器错误 - 警告：赋值从没有强制转换的指针生成整数 | 错误：下标值既不是数组也不是指针

> ID：10562723
> 
> 赞同：0
> 
> 时间：2012-05-12T10:01:21.183
> 
> 标签：c, compiler-errors

答案：我没有正确初始化变量。

我需要记住指针声明在 C 中是如何工作的。

这段代码应该采用以下格式的一些命令行参数：

> ./foo 1 2 3 4 5 6 7 8 9 10 ...（任何合理数量的参数，只要它们能被 5 整除

我的计划是使用 5 个可变大小的 int 数组来存储参数以供以后在逻辑中使用。因此，如果我有 10 个参数，我将有 5 个 2-int 数组，依此类推。

```
int* IP1, IP2, BID, PN, EID;
int i;

if((argc < 2) || ((argc-1) % 5) != 0)
{ 
   /* Some error statements */
}

IP1 = (int*)malloc(argc-1);
IP2 = (int*)malloc(argc-1);  //This is line 26
BID = (int*)malloc(argc-1);
PN = (int*)malloc(argc-1);
EID = (int*)malloc(argc-1);

for(i = 0; i < argc-1; i+=5){
  IP1[i] = argv[i+1];
  IP2[i] = argv[i+2];        //This is line 33
  BID[i] = argv[i+3];
  PN[i] = argv[i+4];
  EID[i] = argv[i+5];
  printf("%d\t", i);
} 
```

问题是，我得到了这些奇怪的错误

```
>cc foo.c -o foo
foo.c: In function â€˜mainâ€™:
foo.c:26: warning: assignment makes integer from pointer without a cast
foo.c:27: warning: assignment makes integer from pointer without a cast
foo.c:28: warning: assignment makes integer from pointer without a cast
foo.c:29: warning: assignment makes integer from pointer without a cast
foo.c:33: error: subscripted value is neither array nor pointer
foo.c:34: error: subscripted value is neither array nor pointer
foo.c:35: error: subscripted value is neither array nor pointer
foo.c:36: error: subscripted value is neither array nor pointer 
```

我不知道他们应该是什么或代表什么。我已经查过了，到目前为止没有任何帮助。我希望你们都可以。

编辑：作为记录，我尝试注释掉第 26-30 和 33-37 行，它编译得很好。只是想我会为后代添加。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:04:31.177

这个：

```
int* IP1, IP2, BID, PN, EID; 
```

与此相同：

```
int *IP1;
int IP2;
int BID;
... 
```

你要这个：

```
int *IP1, *IP2, *BID, *PN, *EID; 
```

但更一般地说，尽量避免在同一行声明多个变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:04:18.150

您的变量`IP2, BID, PN, EID`只有类型`int`not `int*`。你必须`*`在他们每个人的前面写上。

您的方法存在一个问题，即`*`绑定只绑定到它正下方的变量。所以

```
int *intptr, intvar; 
```

创建一个指向`int`和 类型变量的指针`int`。要拥有两个指针，您应该编写：

```
int *intptr, *intptr2;
//for more clarity
int *intptr;
int *intptr2; 
```

或者（但请阅读评论！）：

```
typedef int* intptr;
intptr IP1, IP2, BID, PN, EID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T10:18:32.873

在 C 语言术语中，声明如下所示：

```
type-specifier declaration-specifiers; 
```

*类型说明符*是一种单独的类型，在您的情况下是`int`. 后面是*声明说明符*，一个逗号分隔的*声明*符列表。声明器不仅由它声明的标识符组成，还包括所有`*`,`[]`和`()`，以使其声明看起来像它的用途。有了这个解释，你声明的内容就很明显了

```
int* IP1, IP2, BID, PN, EID; 
```

它是一个`*IP1`，它是一个指向 int 的指针，其余的都被声明为 int。这就是为什么经验丰富的 C 程序员推荐

*   `*`向声明器中的标识符移动
*   每行只声明一个标识符

这就是我编写声明的方式：

```
int *IP1, *IP2, *BID, *PN, *EID; 
```

# ruby-on-rails - 使用 Rails 3.2 删除连接表中的行

> ID：10562729
> 
> 赞同：0
> 
> 时间：2012-05-12T10:01:55.597
> 
> 标签：ruby-on-rails, ruby, database

我有两个模型，用户和帐户，它们通过 AccountUsers 建立了多对多的关系。用户可以邀请其他用户加入他们的帐户，但我也希望经过身份验证的用户能够删除受邀用户（或协作者）。我只希望删除连接表中的关联或行，而不是用户对象。而且我不太确定如何做到这一点，特别是我应该如何设置我的路线、销毁方法和 link_to。

我的方法目前看起来像这样：

```
def destroy
    @account.users.delete(collaborator)
end 
```

我的链接如下所示：

```
= link_to "Remove collaborator", collaborator,  confirm: "You sure?", :method => :delete 
```

这目前导致

```
undefined method `user_path' for #<#<Class:0x007fe3fc4f2378>:0x007fe3fe718510> 
```

我也尝试`@account.users.delete(collaborator)`直接放入我的link_to，但它会在被点击之前删除该行。

我的路线目前看起来像这样：

```
resources :accounts do
  resources :projects
  resources :invitations
  resources :collaborators, :only => [:index]
end 
```

我的模型协会是这样的：

```
# User
has_many :account_users
has_many :accounts, through: :account_users, :dependent => :destroy

# Account
belongs_to :user
has_many :account_users
has_many :users, through: :account_users 
```

我应该怎么做才能实现我想要的？

不是我有一个单独的控制器（协作者），我的销毁操作所在的位置，它不在我的用户控制器中。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:52:33.437

当您遇到此问题时，问题可能出在路线上

```
 resources :collaborators, :only => [:index] 
```

并且也嵌套在帐户中。所以你可以尝试重写 routes.rb

```
resources :accounts do
  resources :projects
  resources :invitations
  resources :collaborators
end 
```

你的链接应该是这样的

```
 = link_to 'Remove collaborator', accounts_colaborator_path(@account,@colaborator), :method => :delete 
```

# php - 以更简单的方式使用 php ajax 代码检查用户名的可用性

> ID：10562730
> 
> 赞同：0
> 
> 时间：2012-05-12T10:01:59.680
> 
> 标签：php, ajax

我有一个注册表单，其中所有字段都使用 JavaScript 进行验证。我需要检查用户名可用性，即该名称是否已存在于我的数据库（MySql）中。如果它存在，则应弹出一个警告框，提示“用户名已存在”，并且用户不应继续填写其他字段。我需要一个更简单的解决方案，而无需使用 jquery。有没有使用 PHP 和 ajax 的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:11:27.090

不要偷懒，做你该做的。=) 如果你开始使用你的想法和经验之外的其他东西，你只会感到无聊和困惑，为什么你的东西不起作用。我认为您可以允许自己编写自己的小而简单的 jQuery 请求。它只有几行代码，而且不是 Java，所以您必须重新设计整个系统，只需稍作修改... =)

# android - 主题 - 仅在 ListView 中按下 TextView 的颜色

> ID：10562736
> 
> 赞同：1
> 
> 时间：2012-05-12T10:02:52.433
> 
> 标签：android, listview, textview, themes

我正在尝试创建一个自定义所有 ListViews 的自己的主题。我对选择器工作得很好，但我希望在按下 ListView 项时 TextView 颜色不会变为黑色（因为列表选择器足够暗）。

这是我尝试过的。`textColor`in`MyListView`也没有效果。我还尝试定义一个可绘制选择器，`textColor`它对所有状态都使用白色，但仍然没有效果。

```
<style name="MyTheme" parent="Theme.Sherlock">
    <item name="android:listViewStyle">@style/MyListView</item>
</style>

<style name="MyListView" parent="@style/ICSListView_Dark">
    <item name="android:textViewStyle">@style/NoHighlightListTextView</item>
</style>

<style name="NoHighlightListTextView" parent="@android:style/Widget.TextView">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

事件可能吗？破解代码中的颜色将是一个很大的开销。感觉还是有不明白的地方。所以...

**如何为 ListViews 定义一般主题，以便 TextViews 的按下颜色为白色（而不是黑色）？**

* * *

**编辑**

经过一番阅读，我得出结论，按照我描述的方式实现这一目标是不可能的。您可以`textColor`全局设置，`MyTheme`但它会影响所有 TextView。或者您创建一个行为正确的自己的列表项布局。但是您不能使用主题定义修改默认的 android 列表项。如果我再想一想，这似乎是合乎逻辑的...... TextView 应该检查它是否嵌套在 ListView 中，否则永远不会发生。

# java - Eclipse 插件：如何将项目异步添加到 TableViewer？

> ID：10562740
> 
> 赞同：1
> 
> 时间：2012-05-12T10:03:26.817
> 
> 标签：java, eclipse, eclipse-plugin, jface, tableviewer

在我的 Eclipse 插件中，我有一个`TableViewer`显示一些数据的插件。这些数据是从远程 REST 服务中检索的。因此，检索所有项目需要几秒钟的时间。这就是为什么我想在检索到它们后立即将它们添加到`TableViewer`'s中。`ContentProvider`我在一个单独的线程中执行我的 REST 查询：

```
Thread retrieveThread = new RetrieveThread();
retrieveThread.run(); 
```

在这个线程中，我将项目添加到我的`TableViewer`：

```
MyView.instance.addItems(items); 
```

和类中的相同方法`MyView`：

```
public void addItems(List<Result> items) {
    ModelProvider.INSTANCE.addItems(items);
    resultLabel.setText(ModelProvider.INSTANCE.getItems().size() + " items");
    PlatformUI.getWorkbench().getDisplay().asyncExec(new Runnable() {

        @Override
        public void run() {
            viewer.refresh();
        }
    });
} 
```

我预计此过程会将项目添加到我`TableViewer`的然后刷新视图。但是现在发生的是我的 Eclipse 冻结并同时添加了所有这些项目。我怎样才能以更具响应性的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T18:35:12.650

问题是您`run`直接调用线程的方法。这不会产生一个新线程，它只是在线调用 run 方法。`retrieveThread.start()`会给你你正在寻找的行为。

但是，有一种更好的方法（至少更“对 eclipse 友好”），那就是使用 Eclipse`Job`而不是 raw `Thread`.

```
 Job retrieveJob = new Job("Retrieving Data") 
    {           
        @Override
        protected IStatus run(IProgressMonitor monitor) {
            // do your REST call
            ModelProvider.INSTANCE.addItems(items);
            // if something goes wrong - don't return ok, obviously 
            return Status.OK_STATUS;                
        }
    };
    retrieveJob.addJobChangeListener(new JobChangeAdapter() {

        @Override
        public void done(IJobChangeEvent event) {
            if(event.getResult().isOK())
            {
                resultLabel.setText(ModelProvider.INSTANCE.getItems().size() + " items");
                viewer.refresh();
            }
        }           
    });
    // this will run in a background thread 
    // and nicely integrate with the UI
    retrieveJob.schedule(); 
```

# javascript - Javascript cookie 来保存用户偏好并使用共享偏好显示内容？

> ID：10562741
> 
> 赞同：0
> 
> 时间：2012-05-12T10:03:30.607
> 
> 标签：javascript, html, cookies

我需要一个基于 java 脚本（cookies）的解决方案，它可以保存用户选择的首选项并渲染输出（html 页面）acc。到保存的 cookie。

情况如下：

假设用户从 page1 开始并导航到 page2（具有 40-50 个超链接），然后他选择或单击其中一个超链接并被定向到目标页面（将有 40-50 个页面对应于这 40-50 个链接） .

所以我只需要自动化整个过程，以便在第一次访问后用户的选择可以保存，他将直接导航到最终目标（它将是 40-50 页中的一个页面）。

任何代码片段都将受到高度赞赏..

米拉纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:48:06.633

我很想知道为什么您不能`preference`在服务器端的表中执行此操作。cookie 可以从浏览器中删除（这将迫使用户再次执行该步骤），在浏览器中存储 40-50 个 cookie 不是一个好的解决方案，因为 cookie 会传输到每个 HTTP 请求，因此会浪费用户的带宽。

如果您将这些设置/首选项存储在服务器端，那么您可以轻松地确定当用户登录到您的站点时将其发送到哪里，而不是从 cookie 中提取这些信息。

或者，您可以存储这些首选项，`localStorage`以便为存储键/值提供更大的存储空间。缺点是您需要先加载一个引导 JS，它将从中读取设置`localStorage`并决定将用户重定向到哪里。

但是恕我直言，如果我必须存储 40-50 个首选项，我仍然会使用服务器端解决方案。

注意：Cookies 只能有 4KB 的数据，这是一个限制。

# php - PHP的最佳星级评分解决方案

> ID：10562742
> 
> 赞同：2
> 
> 时间：2012-05-12T10:03:33.983
> 
> 标签：php

我想知道编写以下 PHP 代码的最佳和最有效的方法是什么？

```
 if ($av == 1) echo '/images/1-star.png';
    if ($av > 1 && < 2) echo '/images/1-half-star.png';
    if ($av == 2) echo '/images/2-star.png';
    if ($av > 2 && < 3) echo '/images/2-half-star.png'; 
```

遵循相同的模式，最高 5 星。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:07:01.737

像这样使用：

```
$n = is_int($av) ? $av : floor($av) + 0.5;
echo '/images/'.$n.'-star.png'; 
```

![在此处输入图像描述](../Images/45b9303755cabff98c977085e835b9c4.png)

每行剪切图像并将其命名为“1-star.png”、“1.5-star.png”、“2-star.png”、“2.5-star.png”、“3-start.png”、“3.5-星.png”等等...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-12T08:08:26.403

这可能不是最有效的方法。但我发现它是干净的代码。检查这个。

```
function renderStarRating($rating,$maxRating=5) {
    $fullStar = "<li><i class = 'fa fa-star'></i></li>";
    $halfStar = "<li><i class = 'fa fa-star-half-full'></i></li>";
    $emptyStar = "<li><i class = 'fa fa-star-o'></i></li>";
    $rating = $rating <= $maxRating?$rating:$maxRating;

    $fullStarCount = (int)$rating;
    $halfStarCount = ceil($rating)-$fullStarCount;
    $emptyStarCount = $maxRating -$fullStarCount-$halfStarCount;

    $html = str_repeat($fullStar,$fullStarCount);
    $html .= str_repeat($halfStar,$halfStarCount);
    $html .= str_repeat($emptyStar,$emptyStarCount);
    $html = '<ul>'.$html.'</ul>';
    return $html;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T10:09:23.817

我想开关盒将是最清晰且易于定制的

```
switch (true) {
  case  $av == 1 : 
  echo '/images/1-star.png';
  break;

  case  $av > 1 && $av < 2  : 
  echo '/images/1-half-star.png';
  break;

  case  $av == 2 : 
  echo '/images/2-star.png';
  break;

  case  $av > 2 && $av < 3  : 
  echo '/images/2-half-star.png';
  break;

  /***handle any other cases ****/ 
  default:
  echo '/images/0-star.png';
  break;
} 
```

谢谢Dcoder，他给我指出了一个好主意

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T10:39:02.753

只有 4 个图像，一个完整的星形，一个一半，一个四分之一和一个四分之三。

打印满星多次`abs($av)`，然后根据四舍五入的值打印另一个`$av - floor($av)`。

这就是我为网站所做的，但他们不想只打印一半，还想要 3 个季度和 1 个季度的星星。但逻辑是一样的。

刚刚在 writecode 上在线测试了这段代码：

```
 $av = 3.5;

for ($i = 1; $i <= floor($av); $i++) {
    echo "<img src=http://www.leedshospitalalert.org.uk/images/star_shape.gif>";
}

$av2 = $av - floor($av);

if ($av2 > 0.2 && $av2 < 0.8) {
    echo "<img src=http://icdn.pro/images/en/h/a/half-star-icone-6015-48.png>";
} 
elseif ($av2 > 0.7) 
{
    echo "<img src=http://www.leedshospitalalert.org.uk/images/star_shape.gif>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T10:08:52.857

您可以计算以下数量：

```
$i = 2 * floor($av - 1) + (floor($av) == $av ? 0 : 1); 
```

这将为您的值生成 numbers `0`, `1`, `2`, ... ，然后您可以使用它来索引文件名数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-15T17:17:21.927

您应该在每个标签中使用三元运算符而不是单选按钮

```
<span class="rating">
                                <input type="radio" id="star5" name="rate<?php echo $cnt; ?>" value="5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '5') ? 'checked' : '' ?>/>
                                <label class = "full" for="star5" title="5 stars"></label>
                                <input type="radio" id="star4half" name="rate<?php echo $cnt; ?>" value="4.5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '4.5') ? 'checked' : '' ?>/>
                                <label class="half" for="star4half" title="4.5 stars"></label>
                                <input type="radio" id="star4" name="rate<?php echo $cnt; ?>" value="4" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '4') ? 'checked' : '' ?>/>
                                <label class = "full" for="star4" title="4 stars"></label>
                                <input type="radio" id="star3half" name="rate<?php echo $cnt; ?>" value="3.5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '3.5') ? 'checked' : '' ?>/>
                                <label class="half" for="star3half" title="3.5 stars"></label>
                                <input type="radio" id="star3" name="rate<?php echo $cnt; ?>" value="3" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '3') ? 'checked' : '' ?>/>
                                <label class="full" for="star3" title="3 stars"></label>
                                <input type="radio" id="star2half" name="rate<?php echo $cnt; ?>" value="2.5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '2.5') ? 'checked' : '' ?>/>
                                <label class="half" for="star2half" title="2.5 stars"></label>
                                <input type="radio" id="star2" name="rate<?php echo $cnt; ?>" value="2" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '2') ? 'checked' : '' ?>/>
                                <label class = "full" for="star2" title="2 stars"></label>
                                <input type="radio" id="star1half" name="rate<?php echo $cnt; ?>" value="1.5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '1.5') ? 'checked' : '' ?>/>
                                <label class="half" for="star1half" title="1.5 stars"></label>
                                <input type="radio" id="star1" name="rate<?php echo $cnt; ?>" value="1" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '1') ? 'checked' : '' ?>/>
                                <label class = "full" for="star1" title="1 star"></label>
                                <input type="radio" id="starhalf" name="rate<?php echo $cnt; ?>" value="0.5" <?php echo ($row_avg_prod_rvw['AVG_Rating'] == '0.5') ? 'checked' : '' ?>/>
                                <label class="half" for="starhalf" title="0.5 stars"></label>
                            </span> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-12T10:10:52.980

**使用如果**

```
if ($av==1){
    echo '/images/1-star.png';
} elseif($av > 1 && < 2){
    echo '/images/1-half-star.png';
} elseif ($av==2){
    echo '.....';
}                    // so far so forth 
```

**刚测试过。**在此切换可能会产生不良结果。

# mysql - InnoDB 上的简单 INSERT 查询占用太多

> ID：10562749
> 
> 赞同：3
> 
> 时间：2012-05-12T10:04:14.827
> 
> 标签：mysql, sql, performance, innodb

我有这个简单的查询：

```
INSERT IGNORE INTO beststat (bestid,period,rawView) VALUES ( 4510724 , 201205 , 1 ) 
```

在桌子上：

```
CREATE TABLE `beststat` (
 `bestid` int(11) unsigned NOT NULL,
 `period` mediumint(8) unsigned NOT NULL,
 `view` mediumint(8) unsigned NOT NULL DEFAULT '0',
 `rawView` mediumint(8) unsigned NOT NULL DEFAULT '0',
 PRIMARY KEY (`bestid`,`period`),
) ENGINE=InnoDB AUTO_INCREMENT=2020577 DEFAULT CHARSET=utf8 
```

完成需要 1 秒。

* * *

**旁注：**实际上并不总是需要 1 秒。有时甚至可以在 0.05 秒内完成。但通常需要 1 秒

* * *

该表 (beststat) 目前有**~** 500'000条记录，其大小为：**40MB**。我有**4GB RAM**和`innodb buffer pool size`= **104,857,600**，其中： Mysql: **5.1.49-3**

这是我数据库中唯一的 InnoDB 表（其他是 MyISAM）

`ANALYZE TABLE beststat`显示：好的

也许 InnoDB 设置有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:23:23.947

作为客户评估项目的一部分，我在大约 3 年前运行了一些模拟。他们需要能够搜索不断添加数据的表，并且他们希望在一分钟内保持最新状态。

InnoDB 一开始就显示出更好的结果，但很快就恶化了（远在 100 万条记录之前），直到我删除了所有索引（包括主索引）。在这一点上，InnoDB 在执行插入/更新时已经变得优于 MyISAM。（我的硬件比你差得多，只在我的笔记本电脑上执行测试。）

结论：如果你有索引，插入总是会受到影响，尤其是唯一的。

我建议进行以下优化：

1.  从 beststat 表中删除所有索引并将其用作简单转储。
2.  如果您真的需要这些唯一索引，请考虑一些可编程解决方案（例如始终记住最大 bestid，并坚持新记录高于该数字 - 并立即增加该数字。（但是您真的需要这么多唯一字段吗？在我看来，它们听起来就像索引一样。）
3.  让后台线程将新记录从 InnoDB 移动到另一个将被索引的表（可以是 MyISAM）。
4.  考虑暂时删除索引，然后在批量更新后重新索引表，可能会切换两个表，以便查询永远不会中断。

我承认，这些是理论上的解决方案，但考虑到您的问题，这是我能说的最好的解决方案。

哦，如果您的表计划增长到数百万，请考虑使用 NoSQL 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:55:17.163

因此，您在表上有两个唯一索引。您的主键是自动编号。由于在您将其添加到数据中时，这并不是数据的真正一部分，因此您称之为人工主键。现在你有一个关于 bestid 和 period 的唯一索引。如果 bestid 和 period 应该是唯一的，那将是主键的良好候选者。

Innodb 将表存储为树或堆。如果您没有在 innodb 表上定义主键，那么它是一个堆，如果您定义一个主键，它被定义为磁盘上的树。因此，在您的情况下，树基于自动编号键存储在磁盘上。因此，当您创建第二个索引时，它实际上会在磁盘上创建第二个树，其中包含索引中的 bestid 和 period 值。该索引不包含表中的其他列，只有 bestid、period 和你的主键值。

好的，现在您自己插入数据的第一件事就是确保唯一索引始终是唯一的。因此它读取索引以查看您是否尝试插入重复值。这就是减速发挥作用的地方。它首先必须确保唯一性，然后才能通过测试写入数据。然后它还必须将 bestid、周期和主键值插入唯一索引。因此，总操作将是值 1 的 1 个读取索引，将行插入表 1，将 bestid 和周期插入索引。一共三个操作。如果您删除了自动编号并仅使用唯一索引作为主键，如果唯一插入到表中，它将读取表。在这种情况下，您将有以下数量的操作 1 读取表以检查值 1 插入表中。这是两个操作对三个。

I hope this is clear as I am typing from my Android and autocorrect keeps on changing innodb to inborn. Wish I was at a computer.

# wcf - WCF：MessageContract 处理 OnDeserialized 事件

> ID：10562751
> 
> 赞同：2
> 
> 时间：2012-05-12T10:04:28.123
> 
> 标签：wcf, xml-deserialization, messagecontract

如何使用 MessageContract 处理 OnDeserialized 事件？

在收到消息后（但在执行方法之前）需要做一些数据验证和转换。

对于 DataContract，它是通过声明属性解决的。

但是对于 MessageContract 它不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T19:50:07.553

您最好使用[WCF 扩展点](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/14/wcf-extensibility.aspx)而不是序列化。特别是 IOperationInvoker。

**编辑**

例子：

下面的服务和消息定义。请注意新的 MyValidationBeforeInvokeBehavior 属性。

```
[ServiceContract]
    public interface IService1
    {

        [OperationContract]
        string GetData(int value);

        [OperationContract]
        [MyValidationBeforeInvokeBehavior]
        AddPatientRecordResponse AddPatientRecord(PatientRecord composite);
    }

    [MessageContract(IsWrapped = false, ProtectionLevel = ProtectionLevel.None)]
    public class AddPatientRecordResponse
    {
        [MessageHeader(ProtectionLevel = ProtectionLevel.None)]
        public Guid recordID;
        [MessageHeader(ProtectionLevel = ProtectionLevel.None)]
        public string patientName;
        [MessageBodyMember(ProtectionLevel = ProtectionLevel.None)]
        public string status;

    }

    [MessageContract(IsWrapped = false, ProtectionLevel = ProtectionLevel.None)]
    public class PatientRecord
    {
        [MessageHeader(ProtectionLevel = ProtectionLevel.None)]
        public Guid recordID;
        [MessageHeader(ProtectionLevel = ProtectionLevel.None)]
        public string patientName;

        //[MessageHeader(ProtectionLevel = ProtectionLevel.EncryptAndSign)]
        [MessageHeader(ProtectionLevel = ProtectionLevel.None)]
        public string SSN;
        [MessageBodyMember(ProtectionLevel = ProtectionLevel.None)]
        public string comments;
        [MessageBodyMember(ProtectionLevel = ProtectionLevel.None)]
        public string diagnosis;
        [MessageBodyMember(ProtectionLevel = ProtectionLevel.None)]
        public string medicalHistory;
    }

public class Service1 : IService1
    {
        public string GetData(int value)
        {
            return string.Format("You entered: {0}", value);
        }

        public AddPatientRecordResponse AddPatientRecord(PatientRecord patient)
        {
            var response = new AddPatientRecordResponse
                               {
                                   patientName = patient.patientName, 
                                   recordID = patient.recordID, 
                                   status = "Sucess"
                               };

            return response;
        }
    } 
```

挂钩 wcf 可扩展性

```
public class MyValidationBeforeInvokeBehavior : Attribute, IOperationBehavior
    {
        public void Validate(OperationDescription operationDescription)
        {
        }

        public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
        {
            dispatchOperation.Invoker = new MyValidationBeforeInvoke(dispatchOperation.Invoker);
        }

        public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
        {
        }

        public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters)
        {
        }
    } 
```

自定义操作调用程序：

```
public class MyValidationBeforeInvoke : IOperationInvoker
    {
        private readonly IOperationInvoker _original;

        public MyValidationBeforeInvoke(IOperationInvoker original)
        {
            _original = original;
        }

        public object[] AllocateInputs()
        {
            return _original.AllocateInputs();
        }

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {

            var validator = new ValidatePatientRecord((PatientRecord) inputs[0]);
            if (validator.IsValid())
            {
                var ret = _original.Invoke(instance, inputs, out outputs);
                return ret;
            }
            else
            {
                outputs = new object[] {};

                var patientRecord = (PatientRecord) inputs[0];

                var returnMessage = new AddPatientRecordResponse
                                        {
                                            patientName = patientRecord.patientName,
                                            recordID = patientRecord.recordID,
                                            status = "Validation Failed"
                                        };
                return returnMessage;    
            }

        }

        public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
        {
           return _original.InvokeBegin(instance, inputs, callback, state);
        }

        public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
        {
            return _original.InvokeEnd(instance, out outputs, result);
        }

        public bool IsSynchronous
        {
            get { return _original.IsSynchronous; }
        }
    } 
```

本质是我们永远不会调用服务调用，因为由于验证错误，它永远不会到达那里。我们还可以将发生的事情返回给客户。

验证类和客户端调用（用于完成）：

```
public class ValidatePatientRecord
    {
        private readonly PatientRecord _patientRecord;

        public ValidatePatientRecord(PatientRecord patientRecord)
        {
            _patientRecord = patientRecord;
        }

        public bool IsValid()
        {
            return _patientRecord.patientName != "Stack Overflow";
        }
    } 
```

客户：

```
class Program
    {
        static void Main(string[] args)
        {
            var patient = new PatientRecord { SSN = "123", recordID = Guid.NewGuid(), patientName = "Stack Overflow" };

            var proxy = new ServiceReference1.Service1Client();

            var result = proxy.AddPatientRecord(patient);

            Console.WriteLine(result.status);
            Console.ReadLine();
        }
    } 
```

# css - 使用 HTML 页面的 css 格式显示标签导出到 excel

> ID：10562760
> 
> 赞同：2
> 
> 时间：2012-05-12T10:05:36.727
> 
> 标签：css, export-to-excel, displaytag

我在我的网络应用程序中使用显示标签。我成功地将显示标签显示的数据导出到excel。

问题是我还希望将标题和数据行样式以及 css 包含在导出的 excel 中。

例如，标题行用灰色背景加粗，数据行中的列根据值着色。

但这并没有导出到excel。

**编辑1：-**

下面是我的 JSP 中的显示标记代码。该列表正确显示，所有 css 都正确应用于标题和数据行。

我也可以将数据导出到excel中。

```
<display:table name="userList"  pagesize="20"  class="listingTable" keepStatus="true" 
cellpadding="0px"  cellspacing="0px"  id="user" export='true' requestURI="">
<display:setProperty name="export.decorated" value="true" />
<display:setProperty name="export.excel.filename" value="User List.xls" />
<display:column titleKey="user.firstname" property="firstname"></display:column>
<display:column titleKey="user.lastname" property="lastname"></display:column>
<display:column titleKey="user.email" property="email"></display:column>
<display:setProperty name="paging.banner.item_name" value="User" />
<display:setProperty name="paging.banner.items_name" value="Users" /> 
```

我正在使用默认的显示标签样式表，并对其进行了一些细微的更改。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:26:45.300

CSS 样式必须直接应用于需要样式的每个元素。因此，对于带有灰色背景的粗体标题行，您需要以下 css：

`th { background-color: grey-25-percent; font-weight: bold }`

（或代替`th`, 使用`thead`or `thead tr`）

displaytag 还将某些类应用于奇数/偶数行、排序行和其他一些行。有关详细信息，[请参阅此页面。](http://www.displaytag.org/1.2/tut_style.html)

另外，Excel 只能使用 56 种不同的颜色，所以如果要字体颜色或背景颜色，必须使用 Excel 可以接受的颜色。 有关Excel 兼容颜色的全部内容，[请参阅本文。](http://dmcritchie.mvps.org/excel/colors.htm)

以下是可接受颜色的简短列表：AQUA、BLACK、BLUE、BLUE_GREY、BRIGHT_GREEN、BROWN、CORAL、CORNFLOWER_BLUE、DARK_BLUE、DARK_GREEN、DARK_RED、DARK_TEAL、DARK_YELLOW、GOLD、GREEN、G​​REY_25_PERCENT、GREY_40_PERCENT、GREY_END_50PERCENT、 , LEMON_CHIFFON, LIG​​HT_BLUE, LIG​​HT_CORNFLOWER_BLUE, LIG​​HT_GREEN, LIG​​HT_ORANGE, LIG​​HT_TURQUOISE, LIG​​HT_YELLOW, LIME, MAROON, OLIVE_GREEN, ORANGE, ORCHID, PALE_BLUE, PINK, PLUM, RED, ROSE, ROYAL_BLUE, SEA_GREEN, 天蓝色, 黄褐色， 黄色

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T18:48:32.963

要导出带有样式信息的 HTML 表格，您不能使用 CSS 的 Class 方法。而是在需要以某种方式格式化的每个 HTML 标记中添加样式参数。例如为表格行设置样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T08:46:33.783

根据我最近的学习，我了解到**Display 标签不能直接导出 HTML 中使用的 css 样式。您必须以编程方式进行格式化和样式设置**

我采取了一种方法并且我成功了。

过程是：
您将需要创建一个类来替换显示标签的默认导出视图类，例如`ExcelHssfView`或`DefaultHssfExportView`

您可以通过实现`ExportView` 接口来做到这一点，因为显示标签文档说：
**任何实现 org.displaytag.export.ExportView 接口的有效类**。

但是我 `BinaryExportView`在扩展时实现了接口，`ExportView`所以它都是一样的。说真的，我只是从源代码中复制了所有代码，`ExcelHssfView`只编辑了`doExport`方法。如果您查看源代码，您将了解您将要做什么。 *提示：用于`HSSFCellStyle`为 excel 文件赋予任何样式*

然后点你的类中`.property file`。`export.excel.class=youpackage.yourExlcelView`

查看示例`ExportView`：[ExcelHssfView 源代码](http://grepcode.com/file/repo1.maven.org/maven2/displaytag/displaytag-export-poi/1.2/org/displaytag/export/excel/ExcelHssfView.java)

# c - C 带结构的双向链表

> ID：10562763
> 
> 赞同：2
> 
> 时间：2012-05-12T10:05:58.917
> 
> 标签：c, struct, doubly-linked-list

我正在做一个双向链表。据我所知，它正在工作，但来到这里是为了确保并查看我是否以正确的方式进行操作。

另一方面，当我做这个时，我遇到了其他与双向链表无关但与 C 文件之间的结构和“可见性”有关的问题。如果您了解我应该对这两个其他疑问提出其他问题，请告诉。否则请随时启发我。

在我的 file1.c 我有这个：

**代码**

```
#include <stdio.h>
#include <stdlib.h>

typedef struct team{
    char *name;
    char *teamPlace;
}Team;

typedef struct nodeTeam{
    int numberOfTeams;
    Team team;
    struct nodeTeam *next;
    struct nodeTeam *prev;
}NodeTeam;

int createsListOfTeams(NodeTeam **head, NodeTeam **tail);
void printListOfTeams(NodeTeam *listofTeams);
int addNodeTeamsSorted(NodeTeam *head, NodeTeam **tail, Team team);

int main()
{
    NodeTeam *headEquipas,*tailEquipas;
    Team eq;
    /*Creates the doubly linked list*/
    if(createsListOfTeams(&headEquipas,&tailEquipas)){
        printf("\nError\n");
        return 0;
    }
    /*Add the teams to the doubly linked list. At the end, all teams will be sorted by name*/
    eq.name = "D team";
    eq.teamPlace = "D team place";
    if (addNodeTeamsSorted(headEquipas,&tailEquipas,eq)){
        printf("\nError\n");
        return 0;
    }

    eq.name = "A team";
    eq.teamPlace = "A team place";
    if (addNodeTeamsSorted(headEquipas,&tailEquipas,eq)){
        printf("\nError\n");
        return 0;
    }

    eq.name = "C team";
    eq.teamPlace = "C team place";
    if (addNodeTeamsSorted(headEquipas,&tailEquipas,eq)){
        printf("\nError\n");
        return 0;
    }

    eq.name = "B team";
    eq.teamPlace = "B team place";
    if (addNodeTeamsSorted(headEquipas,&tailEquipas,eq)){
        printf("\nError\n");
        return 0;
    }

    /*Will print all the teams*/
    printListOfTeams(headEquipas);

    return 0;
} 
```

在我的 file2.c 我有这个

**代码**

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    typedef struct team{
        char *name;
        char *teamPlace;
    }Team;

    typedef struct nodeTeam{
        int numberOfTeams;
        Team team;
        struct nodeTeam *next;
        struct nodeTeam *prev;
    }NodeTeam;

    /*Add the teams to the doubly linked list. At the end, all teams will be sorted by name*/
    int createsListOfTeams(NodeTeam **head, NodeTeam **tail){
        (*head) = (NodeTeam *)malloc(sizeof(NodeTeam));

        if ((*head) == NULL){
            return -1;
        }
        (*head)->numberOfTeams = 0;
        (*head)->team.teamPlace = "";
        (*head)->team.name = "";
        (*head)->next = NULL;
        (*head)->prev = NULL;

        *tail = *head;
        return 0;
    }

    /*Creates the doubly linked list*/
    int addNodeTeamsSorted(NodeTeam *head, NodeTeam **tail, Team team){
        NodeTeam *no,*listIni;

        no = (NodeTeam*) malloc(sizeof(NodeTeam));
        if (no == NULL){
            return -1;
        }

        /*copy of my list*/
        listIni = head;

        no->team = team;
        /*to see is it's the first element of my list*/
        if(head->numberOfTeams == 0)
        {
            no->next = head->next;
            no->prev = head;
            head->next = no;
            *tail = no;

        }
        else{ /*If not the first element*/
            head = head->next;
            while(head->prev != *tail && strcmp(head->team.name,no->team.name) < 0 && strcmp((*tail)->team.name,no->team.name)>0){
                head = head->next;
                (*tail) = (*tail)->prev;
            }
            if(strcmp(head->team.name,no->team.name) >= 0 || head->prev == *tail){
                no->next = head;
                no->prev = head->prev;
                (head->prev)->next = no;
                head->prev = no;

            }
            else if(strcmp((*tail)->team.name,no->team.name) <= 0){
                no->next = (*tail)->next;
                no->prev = (*tail);
                (*tail)->next = no;
                *tail = no;

            }
        }

        /*Updates the number of element of the list*/
        head = listIni;
        head->numberOfTeams++;

        return 0;
    }
    /*Prints my lists*/
    void printListOfTeams(NodeTeam *listofTeams){
        printf("|   number of teams %22d |\n",listofTeams->numberOfTeams);
        printf("|      team name      |        team place      |\n");
        printf("--------------------------------------------------\n");
        listofTeams = listofTeams->next;
        while (listofTeams != NULL){
            printf("| %-21s | %-22s |\n",listofTeams->team.name,listofTeams->team.teamPlace);
            listofTeams = listofTeams->next;
        }
        printf("--------------------------------------------------\n\n");
    } 
```

所以这是我的树问题：

**Q1** - 这是实现一个头和尾分别指向列表开头和结尾的双向链表的正确方法吗？

**Q2** - 为什么要在我的两个文件上声明`struct team`和`struct nodeTeam`？既然它们都在同一个项目中，那么声明不应该对我项目中的所有文件“可见”吗？

**Q3** -`struct team`为什么我必须申报`char *name`而不是`char name[31]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:24:17.360

在您之前的评论和更仔细地分析了您的代码之后，我进行了一些编辑。我错误地解释了关于头部和尾部项目的一个评论，虽然你正在设计一个循环列表

1.  我花时间复制/粘贴/编译您的代码。虽然它几乎可以工作，但我必须说我会以另一种方式设计

    *   将`prev`/`next`指针移动到`struct team`
    *   并用指向 first的指针替换`team`成员。`nodeTeam``head``team`

    这将有以下好处：

    *   `numberOfTeams`防止对每个重复`nodeTeams`但仅对第一个有意义的空间浪费无用的空间
    *   避免概念`head`和实际第一团队之间的混淆

    通过在团队列表中添加指针的值

    `printf("| %-21s | %-22s | %p - p=%p n=%p\n",listofTeams->team.name, listofTeams->team.teamPlace, listofTeams, listofTeams->prev, listofTeams->next);`

    我注意到您的链接中可能存在错误：

    > | 一个团队 | 一个团队的地方| 0x101d00980 - p=0x101d00920 n=0x101d009e0
    > 
    > | B组 | B队名额 | 0x101d009e0 - p=0x101d00980 n=0x101d009b0
    > 
    > | C队 | C队名额 | 0x101d009b0 - p=0x101d00980 n=0x101d00950
    > 
    > | D组| D队名额| 0x101d00950 - p=0x101d009b0 n=0x0

    你可以看到 next 指针没问题，但 prev 指针显示**可疑重复**（0x101d00920 确实是“头”）。

    如果您跟踪代码的执行并检查它所做的事情，`addNodeTeamsSorted()`您可能会注意到**在第 3 步之前**一切正常（在现有 A 和 D 之后添加团队 C）：

    *   由于 head 和 tail 奇怪的双重修改以找到插入新项目的位置，head 和 tail 正在交叉：tail 实际上指向 'A' 并且 head 指向 'D' （不要忘记 while `head`is`Nodeteam *`和它的修改赢了' 不会在函数之外传播，`tail`是 a `Nodeteam **`，因此当它更改为调用者并进行下一次调用时，它将是错误的
    *   **在测试部分的第 4 步**（添加“B”）中`else if`，您正确更改了 prev/next `no`、 (*tail) 的下一个**但不是**prev of`no->next`所以你有
        *   'B' -> 下一个 = 'C' ：好的
        *   'B' -> prev = 'A' ：好的
        *   *tail (='A') -> next = 'B' : 好的
        *   'C' -> prev 仍然 = 'A' :**错误**
2.  这与编译器的想法不同。他只处理编译单元，一次一个。.c 中未声明的内容和包含的不同 .h 将保持未知。如果您想在 2 个模块之间共享结构声明，并防止代码维护中的错误，请剪切 typedef 并将它们放在一个公共头文件（例如`equipa.h`）中，该文件将包含在两个 .c 中

3.  您必须使用`char*`而不是`char[]`因为在您的`main()`in file1.c 中您正在从文字字符串进行直接分配，并且编译器不会让您将文字字符串分配给 char 数组。如果你想`char[]`改用改变你的

    `eq.nome = "D team";`

    通过字符串复制

    `strcpy(eq.nome, "D team");`

    当然，我只是在处理这个概念，实际上你应该注意要复制的字符串不会比缓冲区长，使用`strncpy()`and`sizeof(eq.nome)`

# sql-server - 从 RedGate 签入脚本重新创建数据库

> ID：10562764
> 
> 赞同：2
> 
> 时间：2012-05-12T10:06:27.377
> 
> 标签：sql-server, powershell, redgate

我们有一个带有大约 15-20 个数据库的 SQL Server 实例，我们在 RedGate 的帮助下检查了 TFS。我正在编写一个脚本，以便能够在这些脚本的帮助下复制实例（例如，开发人员可以在需要时运行本地实例）。我担心的是这些脚本之间的依赖关系。

在 TFS 中，RedGate`.sql`为每个数据库创建了这些文件夹，其中包含文件：

```
Functions
Security
Stored Procedures
Tables
Triggers
Types
Views 
```

我用 Powershell 做了一个快速测试，只是循环这些文件夹来执行 sql，但我认为这可能并不总是有效。我可以遵循严格的顺序吗？还是有一些更简单的方法可以做到这一点？澄清一下，我希望能够从一个完全空的 SQL Server 实例开始，并根据 TFS 中的内容（没有数据，但没关系）得到一个完全配置的实例。使用 Powershell 不是必需的，因此如果以其他方式更简单，那是可取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T13:47:14.603

如果您已经在使用 RedGate，他们有大量关于如何将更改从源代码控制移动到数据库的文章。这是一个描述使用 sqcompare 命令行从 TFS 移动数据库代码的描述：

[http://www.codeproject.com/Articles/168595/Continuous-Integration-for-Database-Development](http://www.codeproject.com/Articles/168595/Continuous-Integration-for-Database-Development)

如果您与任何空数据库进行比较，它将创建您正在寻找的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:41:33.433

从脚本文件夹部署数据库的唯一可靠方法是使用 Red Gate SQL Compare。如果您使用 PowerShell 运行 .sql 文件，则可能不会以正确的顺序创建对象。即使您以有意义的顺序运行它们（函数，然后是表，然后是视图......），您仍然可能遇到依赖性问题。

SQL Compare 读取所有脚本并使用它们在内存中构建一个“虚拟”数据库，然后为它计算一个依赖矩阵，因此在创建部署脚本时，事情会以正确的顺序完成。这将防止 SQL Server 引发与依赖相关的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T13:16:50.713

如果您将 Visual Studio 与数据库选项一起使用，则它包含一个架构比较，允许您将 TFS 中的数据库项目中的内容与本地实例进行比较。它将为您创建一个脚本，以便在本地实例中创建这些对象。我还没有尝试过为一个完整的实例这样做。

您最多可能必须在本地实例中创建数据库，然后让 Visual Studio 看到表和其他对象不存在。

您也可以只对每个数据库进行最后一次备份，然后让开发人员将它们恢复到本地实例。但是，这可能因每个环境而异，具体取决于安全策略和数据库中的数据类型。

我倾向于只使用 PowerShell 为我构建脚本。当我在本地实例上重新运行脚本时，我可以更好地控制脚本输出的内容和 PS 只是我的偏好。SQL 社区中已经编写了一些很好的脚本，可以在这方面为您提供帮助。[Jen McCown](http://www.midnightdba.com/Jen/about/)写了一篇博文，其中包含了她丈夫为此而写的所有帖子，[就在这里](http://www.midnightdba.com/Jen/2010/05/script-sql-objects-with-powershell/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T15:26:57.673

我在博客中介绍了如何使用 SQL 比较命令行从一组 .sql 文件构建数据库。

[http://geekswithblogs.net/SQLDev/archive/2012/04/16/how-to-build-a-database-from-source-control.aspx](http://geekswithblogs.net/SQLDev/archive/2012/04/16/how-to-build-a-database-from-source-control.aspx)

帖子更多是从设置持续集成的角度出发，但原理都是一样的。

# facebook - 来自 facebook connect 的本地化家乡

> ID：10562765
> 
> 赞同：0
> 
> 时间：2012-05-12T10:06:36.017
> 
> 标签：facebook, ruby-on-rails-3, devise

当使用 facebook connect with devise 时，我得到的家乡是这样的：

```
... hometown=#<Hashie::Mash id="116045151742857" name="Munich, Germany">
locale="de_DE" ... 
```

有没有办法让每个用户的家乡在他自己的语言环境中或至少在一个设置的语言环境中（在我的情况下为 de_DE），例如使用 facebook API 的“München，Deutschland”？

如果没有必要，我不想炫耀我自己的家乡数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:23:05.517

注意测试，但您可以尝试将 &locale=de_DE 添加到图形调用中。您可以从用户对象中获取语言环境，因此可能会为每个用户自定义它。执行“/me”图形调用以获取语言环境，然后执行“/me?locale=de_DE”以获取用户语言。

正如我所说，我没有测试过，所以它可能不会改变字段的内容（例如德国 -> 阿勒曼德），但如果你没有尝试过，值得一试。

# wpf - 用于 XAML 的 Windows Metro 中的 DrawingBrush 在哪里

> ID：10562768
> 
> 赞同：5
> 
> 时间：2012-05-12T10:06:53.330
> 
> 标签：wpf, xaml, windows-runtime, winrt-xaml

我用 C# 编写了一个基于 Windows Metro XAML 的应用程序，我想在我的自定义网格控件上用画笔绘制网格线。

在 WPF 中，我会创建一个[DrawingBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingbrush.aspx)来完成这项工作，但在 Metro 中似乎没有等价物？？？

有谁知道此功能是否以其他名称存在，或者您以不同的方式获得相同的结果？

作为附加说明，我不想直接在我的网格上绘制线条等（将线条添加到我的面板的子集合中），它确实需要通过背景属性来完成 - 即画笔。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T03:34:34.713

WinRT-XAML 堆栈更接近 Silverlight - 与 Silverlight 相比，其图形功能有限。唯一适用于 WinRT 应用程序的 TileBrush 是 ImageBrush，因此您需要先将绘图另存为图像。但是，您也不能使用 XAML 堆栈来执行此操作 - 因为没有绘图类并且 WriteableBitmap 没有 Render() 方法。另一方面，您可以访问 DirectX 以获得任何更高级的功能，并将一些 DirectX 代码与您的 XAML 结合起来。

# java - 记录每个方法执行

> ID：10562769
> 
> 赞同：6
> 
> 时间：2012-05-12T10:06:54.613
> 
> 标签：java

有什么方法可以记录/记录/监视/查看Java程序中方法的每次执行。

例如：

```
12:30:12 someMethod("argument")
12:30:12 anotherMethos(1, 2, 3)
12:30:13 finalMethod("invalidInputHere1234") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:11:19.210

简单的答案：修改方法，并插入日志语句。

更复杂的答案，即使您无法修改该方法也可以：查看基于方面的编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T10:27:24.057

试试这个：[https ://github.com/taobao/TProfiler](https://github.com/taobao/TProfiler)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T10:13:21.793

在不修改代码的情况下，您可以使用能够记录任何状态更改的调试器或分析器，例如[Chronon 时间旅行调试器](http://www.chrononsystems.com/products/chronon-time-travelling-debugger)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T10:14:16.613

您可以录制您的节目，然后使用[Chronon播放](http://www.chrononsystems.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T10:02:34.393

您可以使用[jcabi-aspects](http://www.jcabi.com/jcabi-aspects/)[`@Loggable`](http://www.jcabi.com/jcabi-aspects/annotation-loggable.html)中的注释，它使用简单的日志记录机制包装了您要调试的所有方法：

```
@Loggable(Loggable.DEBUG)
public String load(URL url) {
  return url.openConnection().getContent();
} 
```

它通过[SLF4J](http://www.slf4j.org/)记录。

# c# - 如何在 C# 代码中添加数据库字段而不在断开连接的体系结构中使用存储过程

> ID：10562770
> 
> 赞同：0
> 
> 时间：2012-05-12T10:06:57.330
> 
> 标签：c#, asp.net, sql-server

我需要在 asp.net 中创建登录页面，我必须在其中创建 3 个用户访问级别，例如

可以查看电子邮件和更新的用户 可以查看电子邮件、更新并删除一些用户的超级用户 管理员也可以查看所有超级用户并删除超级用户。

我的登录页面有用户名密码和登录按钮

当用户/管理员/超级用户点击按钮时，它应该根据用户级别自动重定向他。

我有一个包含用户名、密码、用户 ID、用户访问类型、电子邮件的数据库。我的问题是我不知道如何在断开连接的数据库体系结构中编写基于 useraccesstype 的 if 命令，也不使用存储过程。

```
 String Uid = TextBox1.Text;
 String Pwd = TextBox2.Text;

 SqlConnection con = new SqlConnection(@"Data Source=Sun-PC\SQLEXPRESS;Initial Catalog=dts;Persist Security Info=True;User ID=sa;Password=********;");
 SqlDataAdapter da;
 da = new SqlDataAdapter("Select userid,password,useraccesstype from Table2 WHERE userid = " + Uid + " and password ='" + Pwd + "'", con);
 DataSet ds = new DataSet("Table2");
 da.Fill(ds, "Table2");

 if (Uid == "userid" && Pwd == "password")
 {
     if (uzrtype3 = "componentadmin")
     {
         Response.Redirect("userpage.aspx");
     }
     if (uzrtype = "user")
     {
         Response.Redirect("register.aspx");
     }
 }
 else
 {
     Label123.Text = "Sorry, user not recognized - please try again";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:24:36.290

在字里行间阅读，我*想*您是在问“如何获取 useraccesstype”？如果*使用当前代码是*这样，也许：

```
if(ds.Tables[0].Rows.Count == 1) {
    // match
    var accessType = ({appropriate cast here})ds.Tables[0].Rows[0]["useraccesstype"];
} else {
    // no match
} 
```

然而！我会以不同的方式来解决各种参数问题并使其更安全 - 为方便起见使用“dapper-dot-net”（谷歌搜索）：

```
string userid = ....
string password = ...
var row = con.Query(
   "Select useraccesstype from Table2 WHERE userid = @userid and password = @password",
   new { userid, password }).FirstOrDefault();
if(row == null) {
    // no match
} else {
    var accessType = ({some cast here})row.useraccesstype;
} 
```

密码的加盐哈希也是您应该研究的问题。

没有必要返回用户 ID/密码：你已经知道了。您也可以使用 ExecuteScalar，但您需要自己处理参数。

# string - JFlex 词法分析器。多行字符串

> ID：10562776
> 
> 赞同：5
> 
> 时间：2012-05-12T10:07:41.773
> 
> 标签：string, multiline, lexer, jflex

我正在尝试使用 JFlex 解析一些具有多行字符串文字的语言。

例子：

```
'''
this is a valid multiline string literal with 'quoted' word
''' 
```

我创建了两个状态：

```
%x IN_QUOTED_STRING
%x IN_MULTILINE_QUOTED_STRING 
```

并创建了几个宏和规则：

```
QUOTED_STRING_TAIL=[^\']* "'"
QUOTED_STRING_START="@"? "'"
MULTILINE_QUOTED_STRING_START = "@"? "'''"
MULTILINE_QUOTED_STRING_TAIL = [.]* "'''"

%%

<YYINITIAL> {MULTILINE_QUOTED_STRING_START} {yybegin(IN_MULTILINE_QUOTED_STRING);}
<YYINITIAL> {QUOTED_STRING_START} {yybegin(IN_QUOTED_STRING);}

<IN_QUOTED_STRING> {QUOTED_STRING_TAIL} {yybegin(YYINITIAL); return STRING;}
<IN_MULTILINE_QUOTED_STRING> {MULTILINE_QUOTED_STRING_TAIL} {yybegin(YYINITIAL); return STRING;} 
```

但它不起作用。我得到“错误：无法匹配输入”

任何人都可以帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T18:50:16.680

OP写道：

> 为我工作：
> 
> ```
> QUOTED_LITERAL="'" ([^\\\'\r\n] | {ESCAPE_SEQUENCE} | (\[\r\n]))* ("'"|\)?
> ESCAPE_SEQUENCE=\[^\r\n] 
> ANY_ESCAPE_SEQUENCE = \[^] 
> THREE_QUO = (\"\"\") 
> ONE_TWO_QUO = (\"[^\"]) | (\"\[^]) | (\"\"[^\"]) | (\"\"\[^]) 
> QUO_STRING_CHAR = [^\\\"] | {ANY_ESCAPE_SEQUENCE} | {ONE_TWO_QUO}
> TRIPLE_QUOTED_LITERAL = {THREE_QUO} {QUO_STRING_CHAR}* {THREE_QUO}?
> %%
> <YYINITIAL> {TRIPLE_QUOTED_LITERAL }{ return STRING; } 
> <YYINITIAL> {QUOTED_LITERAL} { return STRING; } 
> ```

# android - 如何将数据从 Android 应用程序输入到网站文本框？

> ID：10562777
> 
> 赞同：1
> 
> 时间：2012-05-12T10:07:59.263
> 
> 标签：android, http-post

您好我正在尝试将我的 Android 文本框连接到“http://www.weather.com”文本框？如何将在我的应用程序文本框中输入的“字符串”传输到网站文本框？

这是我编写的代码：

```
 package in.niteesh.connectToServer;

import java.io.IOException;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.ParseException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class ConnectServerActivity extends Activity 
{
    //private static final int LENGTH_SHORT = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //Take a Login Button
        Button btnLogin = (Button)findViewById(R.id.btnLogin);
        //Set the onClick Event
        btnLogin.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {

                    //Get TextBox from the layout
                    EditText etUserName = (EditText)findViewById(R.id.etUser);

                    //Client to make the request to your weather.com
                    DefaultHttpClient myClient = new DefaultHttpClient();

                    //This is where you put the information you're sending.
                    HttpPost postUserCredentials = new HttpPost(getString(R.string.LoginAddress));   //Http Post is used for sending SOAP requests
                    HttpEntity postParameters = null; // Extract the byte to a string form 
                    try 
                    {
                        postParameters = new StringEntity("u=" + etUserName.getText());
                    } 
                    catch (UnsupportedEncodingException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    postUserCredentials.setHeader("Content-type", "http://www.weather.com/");
                    postUserCredentials.setEntity(postParameters);

                    HttpResponse postResponse = null;
                    try 
                    {
                        postResponse = myClient.execute(postUserCredentials);
                    } 
                    catch (ClientProtocolException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                    catch (IOException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    HttpEntity postResponseEntity = postResponse.getEntity();

                    try 
                    {
                        String result = EntityUtils.toString(postResponseEntity);

                    } 
                    catch (ParseException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
                    catch (IOException e) 
                    {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
            }
        });

    }
} 
```

Main.xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
    <TextView android:id="@+id/tvUser" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="Username:" />
    <EditText android:id="@+id/etUser" android:layout_width="match_parent" android:layout_height="wrap_content" />
    <Button android:id="@+id/btnLogin" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Login" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:26:47.037

首先，将 HTTP 请求代码放入一个 AsyncTask 中。否则请求将阻塞主 UI 线程。还要将所有这些 try/catch 语句放入一个 try/catch 块中，因为一切都与 HTTP 请求有关。

[您可以在此处](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)找到如何传输 HTTP Post 数据的简短片段。

在您的代码中，此行是错误的，应将其删除：

```
postUserCredentials.setHeader("Content-type", "http://www.weather.com/"); 
```

如果您使用 POST 数据的链接页面上显示的 NameValue Pairs，我认为其余的代码都很好。

# python - 替换文件中的字符

> ID：10562778
> 
> 赞同：9
> 
> 时间：2012-05-12T10:08:11.133
> 
> 标签：python

我想使用文本文件中的编码指令替换字符。

我的文本文件包含以下行：

```
This is a message 
```

我想换`a -> e`,,,`e -> a``s -> 3`

所以这行写着：

```
Thi3 i3 e massega 
```

我尝试了以下代码，但它一次只更改行中的一个字符。

```
import sys
import codecs

def encode():
  path = "C:\Users\user\Desktop"
  basename = "assgn2part1.txt"
  filename = path + "\\" + basename
  #file = open(filename, "rt")
  f = codecs.open(filename,encoding='utf-8')
  contents = f.read()

  print contents ,"\n"
  newcontents = contents.replace('a','e')
  newcontents = contents.replace('s', '3')

  print newcontents

  f.close() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-12T10:13:15.320

替换这个：

```
newcontents = contents.replace('a','e')
newcontents = contents.replace('s', '3') 
```

有了这个：

```
newcontents = contents.replace('a','e')
newcontents = newcontents.replace('s', '3') 
```

或者更好：

```
newcontents = contents.replace('a','e').replace('s', '3') 
```

您的代码似乎只尝试用“e”替换“a”，而不是用“a”替换“e”。为此，您需要以下内容：

```
import string
newcontents = contents.translate(string.maketrans("aes", "ea3")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-05-02T07:06:47.470

这是一个简单的要点，您可以查看并获得一些帮助

```
x = open("e:/a.txt" )
s=x.read().replace(''a", "xy" ) 
x.close()

//Now open the file in write mode and write the string with replaced

x=open("e:/a.txt","w")
x.write(s)
x.close 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T10:20:51.837

```
>>> strs="this is a message"
>>> strs="".join(['a' if x=='e' else 'e' if x=='a' else '3' if x=='s' else x for x in strs])
>>> print(strs)
thi3 i3 e ma33ega 
```

**或者按照罗伯特的建议**，使用字典

```
>>> strs="this is a message"
>>> dic={'a':'e','e':'a','s':'3'}
>>> strs="".join((dic.get(x,x) for x in strs))
>>> print(strs)
thi3 i3 e ma33ega 
```

**或者：**

```
>>> strs="this is a message"
>>> dic={'a':'e','e':'a','s':'3'}
>>> new_strs=''
>>> for x in strs:
     if x in dic:
        new_strs += dic[x]
     else:
        new_strs += x
>>> print(new_strs)

thi3 i3 e ma33ega 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T10:28:06.597

在这里工作正常。

```
>>> import codecs
>>> contents = codecs.open('foo.txt', encoding='utf-8').read()
>>> print contents
This is a message.

>>> print contents.replace('s', '3')
Thi3 i3 a me33age. 
```

*注意：*如果您希望第二次替换工作，您应该在*newcontents*上进行：

```
newcontents = contents.replace('a','e')
newcontents = newcontents.replace('s', '3') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T08:55:06.773

您也可以使用正则表达式

```
newcontents = re.sub(r"a","e",contents)
newcontents = re.sub(r"s","3",newcontents) 
```

# c++ - MySQL 连接器/C++ 声明变量

> ID：10562779
> 
> 赞同：0
> 
> 时间：2012-05-12T10:08:12.040
> 
> 标签：c++, mysql

我想用 4 个插入创建一个存储过程，我有这个代码

```
 Driver * driver = get_driver_instance();
  auto_ptr< Connection > vCon(driver->connect(getHost(), getUser(), getPassword()));
  vCon->setSchema(getDB());
  auto_ptr< Statement > vStmt(vCon->createStatement());

  vStmt->execute("DROP PROCEDURE IF EXISTS add");
  vStmt->execute("CREATE PROCEDURE add() begin DECLARE vEvId int DEFAULT 0; DECLARE vAdrEvId int DEFAULT 0; insert into adrEv(den) values('test'); select last_insert_id() into vAdrEvId; insert into ev(den,adrEvId) values('test',vAdrEvId);  select last_insert_id() into vEvId;  ... other insert ...   END;");

  vStmt->execute("CALL add()");
  vStmt->execute("DROP PROCEDURE IF EXISTS add"); 
```

为什么我得到这个错误`# ERR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'add' at line 1 (MySQL error code: 1064, SQLState: 42000 )`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:10:43.957

`ADD`是 MySQL 的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。尝试使用更具体/描述性的过程名称。

# silverlight - silverlight windows phone 7中的按钮问题

> ID：10562780
> 
> 赞同：0
> 
> 时间：2012-05-12T10:08:16.447
> 
> 标签：silverlight, windows-phone-7, button

我是 windows phone 7 的新手。我正在为 windows phone 7 制作一个在 silverlight 中制作圆角按钮的示例。我实现了圆角。但它没有显示按钮的内容。我的代码有什么问题？请帮我。

现在我的按钮看起来像这样。里面没有文字。![在此处输入图像描述](../Images/39daed90bc4e596f52c83c51ab700f97.png)

我在下面发布了我的代码。

谢谢。

**主页.xaml**

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel VerticalAlignment="Center">
            <Button Width="200" Height="80" Content="Click Me" Style="{StaticResource myCustomButtonStyle}" >
                </Button>
        </StackPanel>
    </Grid> 
```

**ButtonResourceDictionary.xaml**

```
 <LinearGradientBrush x:Key="myCustomButtonColor" EndPoint="0.5,1" StartPoint="0.5,0">
    <GradientStop Color="#FF296180" Offset="0.589"/>
    <GradientStop Color="#FF5BC0F3"/>
</LinearGradientBrush>

<Style x:Name="myCustomButtonStyle" TargetType="Button">
    <Setter Property="BorderThickness" Value="0"></Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="buttonBorder" Background="{StaticResource myCustomButtonColor}" CornerRadius="12"></Border>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:02:22.157

您需要在模板中添加“ContentPresenter”元素以显示内容

# java - 对多次调用的 JButton 执行 ActionPerformed？

> ID：10562781
> 
> 赞同：4
> 
> 时间：2012-05-12T10:08:33.217
> 
> 标签：java, swing, actionlistener

我正在实现一个函数，当用户单击 JButton 时，该函数传递 JList 中的选定项和 JTextField 中的值。

我正在使用几个听众。但是，当用户第二次按下按钮并产生不需要的结果时，似乎 addcartbtn 内的循环 actionPerformed 被调用了两次。当用户第三次按下时，该函数似乎被调用了三次。

```
 list.addListSelectionListener(new ListSelectionListener() {

        Map<String, Integer> cartlist = new HashMap<String, Integer>();

        public void valueChanged(final ListSelectionEvent e) {
            if (e.getValueIsAdjusting()) {
                System.out.println("test0");
                final ArrayList<String> cartArrayList = new ArrayList<String>();
                addcartbtn.addActionListener(new ActionListener() {

                    public void actionPerformed(final ActionEvent e2) {

                        System.out.println("test2");
                        String itemselected = "";
                        System.out.println("Index is " + e.getLastIndex());
                        String itemname = (String) hashmap.get(e.getLastIndex());
                        itemselected = itemname;

                        //System.out.println(itemselected);
                        try {
                            int insertedquantity = Integer.parseInt(quantity.getText());
                            cartlist.put(itemselected, insertedquantity);
                            //shoppingcart.revalidate();
                            String element = itemselected + " " + String.valueOf(insertedquantity);

                            cartArrayList.add(element);

                            System.out.println(element);
                            //System.out.println(counter);
                            shoppingcart.setListData(cartArrayList.toArray());
                            shoppingcart.revalidate();
                            shoppingcart.repaint();
                            System.out.println("---------");

                        } catch (NumberFormatException ex) {
                            System.out.println("Not a number!");
                        }
                    }
                });
            }
        }
    }); 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:10:20.180

不要在 ListSelectionListener 中添加 ActionListener - 没有意义。您将无缘无故地添加许多听众。事实上，如果您希望仅在按下按钮时发生动作，我认为根本没有 ListSelectionListener 的理由。只需使用一次添加到 JButton 的 ActionListener *，*可能是在构造函数或设置方法中。

此外，缩进少一点可能会使您的代码更容易阅读。
编辑：我减少了您原始帖子中的代码缩进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T10:11:01.997

每次在 JList 中进行选择时，您都在向 addcartbtn 添加一个新的操作侦听器（如果它被命名为 addCartButton，BTW 会不会更具可读性）。侦听器只能添加一次。

# r - nrow（矩阵）函数

> ID：10562786
> 
> 赞同：8
> 
> 时间：2012-05-12T10:08:56.540
> 
> 标签：r, statistics

我有使用 R 的任务并且有一个小问题。在分配中，必须生成具有随机行数的矩阵，然后用于各种计算。一切都很完美，除非行数为 1。

在计算中，我以不同的方式使用 nrow(matrix)，例如`if (i <= nrow(matrix) ) {action}`，还有诸如此类的语句`matrix[,4]`。

因此，如果行数为 1（我知道它实际上是向量），R 会给出错误，这肯定是因为 nrow（一维矩阵）=NULL。有没有简单的方法来处理这个？否则可能必须重写整个代码，但我的时间很短:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T11:34:59.717

并不是 R 中的单行/列矩阵具有`ncol`/`nrow`设置为`NULL`- 在 R 中，所有内容都是一维向量，当它具有`dim`属性集时，它可以表现得像矩阵（即显示为矩阵、接受矩阵索引等） . 似乎不是这样，因为简单地将矩阵索引到单行或单列*会丢弃* `dim`数据并将数据保持在默认（一维向量）状态。

因此，您可以通过直接重新创建`dim`向量的属性（例如称为 x）来实现您的目标：

```
dim(x)<-c(length(x),1)
x #Now a single column matrix

dim(x)<-c(1,length(x))
x #Now a single row matrix 
```

或者通过添加参数来防止`[]`运算符删除：`dim``drop=FALSE`

```
x<-matrix(1:12,3,4)
x                #OK, matrix
x[,3]            #Boo, vector
x[,3,drop=FALSE] #Matrixicity saved! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T10:18:01.893

让我们称您为 vector `x`。尝试使用`matrix(x)`或`t(matrix(x))`将其转换为适当的（2D）矩阵。

# php - 更改表格中rowx的颜色

> ID：10562787
> 
> 赞同：1
> 
> 时间：2012-05-12T10:08:57.577
> 
> 标签：php, css

你好，我正在研究 PHP 中的表格样式。我只被困在一个点上，***我无法更改表格行的颜色，或者像奇数行应该用白色背景甚至蓝色显示***。我尝试了以下 css 代码，但它没有用

```
tbody:nth-child(2n) { /* even rows */ 
  background-color:#eee;
}     
tbody:nth-child(2n+1) { /* odd rows */
  background-color:#ccc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:14:19.743

如果不是你的浏览器问题，请试试这个css

```
table#tableid tr:nth-child(2n) { /* even rows */ 
  background-color:#eee;
}     
table#tableid tr:nth-child(2n+1) { /* odd rows */
  background-color:#ccc;
} 
```

或者

```
table#tableid tr:nth-child(even) { /* even rows */ 
  background-color:#eee;
}     
table#tableid tr:nth-child(odd) { /* odd rows */
  background-color:#ccc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:17:07.530

我认为 jquery [:even](http://api.jquery.com/even-selector/)和[:odd](http://api.jquery.com/odd-selector/)选择器是跨浏览器的最佳选择..

```
$('#selector:even').addClass('even_class');
$('#selector:odd').addClass('odd_class'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:19:14.830

为奇数行和偶数行的样式编写两个类。并像这样交替添加类。

```
.odd_row{
   background-color:grey;
}
.even_row{
   background-color:white;
}

And in php,
<?php
for($i=0;$i<10;$i++)
{?>
      <tr class="<?php echp ($i%2==0)?'odd_row':'even_row';?>">
           <td>data1</td>
           <td>data2</td>
      </tr>
<?php
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T10:19:58.843

也许您可以尝试使用变量来更改使用的样式。因此，当您启动该块时，您定义`oddOrEven`为 0，然后回显一行，然后设置`oddOrEven`为 1。每次回显一行时，它都会根据`oddOrEven`.

# c# - 如何反序列化一个数组

> ID：10562789
> 
> 赞同：1
> 
> 时间：2012-05-12T10:09:18.100
> 
> 标签：c#, serialization

这是我从网站上获得的 Xml：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="[url]">
  <totalResults>1</totalResults>
  <movie code="134539" />
  <movie code="134540" />
</feed> 
```

我的 C# 类：

```
using System;
using System.Collections.Generic;
using System.Xml.Serialization;

[Serializable]
[XmlRoot("feed", Namespace = "[url]")]
public class FeedSearch
{
    [XmlElement("totalResults")]
    public int TotalResults
    { get; set; }

    [XmlArray("feed")]
    [XmlArrayItem("movie")]
    public List<MovieSearch> Movies
    { get; set; }
} 
```

* * *

```
using System;
using System.Xml.Serialization;

[Serializable]
[XmlRoot("movie", Namespace = "[url]")]
public class MovieSearch
{
    [XmlAttribute("code")]
    public int Code
    { get; set; }
} 
```

TotalResults 总是很好地反序列化，但我的电影列表总是空的，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T10:17:10.117

代替：

```
[XmlArray("feed")]
[XmlArrayItem("movie")]
public List<MovieSearch> Movies { get; set; } 
```

试试这样：

```
[XmlElement("movie")]
public List<MovieSearch> Movies { get; set; } 
```

# vb.net - LINQ-to-XML 选择根内的标签

> ID：10562790
> 
> 赞同：2
> 
> 时间：2012-05-12T10:09:18.817
> 
> 标签：vb.net, linq-to-xml

我是 LINQ-to-XML 的新手，我正在尝试学习查询结构。我有以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
 <list>
  <item>
   <due>07 May 2012</due>
   <name>Name</name>
   <desc>Description</desc>
   <colour>White</colour>
  </item>
  <item>
   <due>12 May 2012</due>
   <name>Name2</name>
   <desc>Desc2</desc>
   <colour>White</colour>
  </item>
</list> 
```

我正在尝试`<item>`使用查询删除元素：

`Dim DeleteItems = From e In Root.Elements("list") Where e.Element("name").Value = Text`

但是它不起作用。我认为它正在尝试选择`<item>`在文件根目录中调用的标签，但是它需要`<item>`在元素中选择标签`<list>`——我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:23:04.587

我假设那`Root`是您的 XDocument 对象名称。

改变`Elements`做`Descendants`，然后它应该工作。

```
Dim DeleteItems = From e In Root.Descendants("item") Where e.Element("name").Value = Text 
```

# python - 遇到错误；使用 python 的 Tkinter GUI

> ID：10562793
> 
> 赞同：3
> 
> 时间：2012-05-12T10:10:15.720
> 
> 标签：python, tkinter

我正在创建一个简单的 Tkinter gui。然而，有些事情似乎变得混乱了。实际上没有任何东西被“打包”到框架中。谁能发现我做错了什么？（除了使用 'from Tkinter import *' 和明显没用的 'do_nothing()' 函数引起的问题。

```
#/usr/bin/python
from Tkinter import *

class gui:
    def __init__(self, parent):
        f = Frame(parent, width=300, height=500)
        f.pack(padx=30, pady=15)

        self.label = Label(f, text="Japanese Trainer")
        self.label.pack(side=TOP, padx=10, pady=12)

        self.txtlbl = Entry(f, justify=CENTER, text="", font=("Calibri", 15, "bold"), width=37)
        self.txtlbl.pack()
        self.txtlbl.grid(row=1, rowspan=2, sticky=E, pady=10, padx=40)

        self.button0 = Button(f, text="Kana Trainer", width=20, command=self.do_nothing)
        self.button0.pack()
        self.button0.grid(row=3, rowspan=2, sticky=W, pady=10, padx=40)

        self.button1 = Button(f, text="Vocab Trainer", width=20, command=self.do_nothing)
        self.button1.pack()
        self.button1.grid(row=3, rowspan=2, sticky=E, pady=10, padx=40)

    def do_nothing(self):
        self.txtlbl.delete(0, END)
        self.txtlbl.insert(END, "Command did nothing...")

root = Tk()
root.title('Eg.')
app = gui(root)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:47:56.637

您正在混合`grid`并`pack`在同一个主窗口中。你不能那样做。每个人都可能会调整他们管理的小部件的大小，并且每个人都会响应他们管理的小部件中的调整大小。因此，pack 将调整小部件的大小以适应，grid 将识别更改并尝试调整小部件的大小以适应，pack 将识别更改并尝试调整小部件的大小以适应...导致无限循环。

可以在同一个程序中一起使用`pack`和`grid`，但不能用它们来管理同一个容器。

# java - 如何使用 Display 标记 Java 库对列标题进行分组？

> ID：10562805
> 
> 赞同：13
> 
> 时间：2012-05-12T10:12:39.143
> 
> 标签：java, displaytag

我在我的 Web 应用程序中使用[Display 标签](http://www.displaytag.org/1.2/)Java 库。我需要对一些列标题（“常规”和“办公室信息”）进行分组，如下例所示。

![在此处输入图像描述](../Images/04667fca02b24a8574734870c7cde9be.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:09:35.927

Ashish，我试图澄清你的问题，并希望它是正确的。

如果您检查 DisplayTag 生成的 HTML 源，它会将列标题放入这样的`<thead>`标签中

```
<table cellspacing="0" cellpadding="0">
<thead>
    <tr>
        <th class="dtsortable">
            <a href="...">Firstname</a>
        </th>
        <th class="dtsortable">
            <a href="...">Lastname</a>
        </th>
    </tr>
</thead>
<tbody>
... 
```

所以你想要实现的是在你的分组中插入一个新行。我建议实现这一点的最简单方法是不要弄乱 DisplayTag 代码并使用 JQuery 来操纵 DOM 来做到这一点。

**使用 jQuery**

要获取此 HTML 代码...

```
<table id="display-tag "cellspacing="0" cellpadding="0">
<thead>
    <tr>
        <th colspan="2">
            heading
        </th>
    </tr>
    <tr>
        <th class="dtsortable">
            <a href="...">Firstname</a>
        </th>
        <th class="dtsortable">
            <a href="...">Lastname</a>
        </th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Bob</td>
        <td>Test</td>
    </tr>
    <tr>
        <td>Jane</td>
        <td>Test</td>
    </tr>
</tbody>
</table> 
```

您可以使用此 JQuery 代码...

```
$('#display-tag > thead').prepend('<tr><th colspan="2">heading</th></tr>'); 
```

您可以[使用此 JSFiddle 看到这一点](http://jsfiddle.net/uPB3A/2/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-01-23T12:05:12.910

you will do like this

Roles CASBAdmin TEUser PubUser PWUser MedUser CommonUser " sortable="true">

# python - 在 GTK、GTK +、GTK + 3、PyGobject 等之间完全混淆

> ID：10562808
> 
> 赞同：4
> 
> 时间：2012-05-12T10:13:00.163
> 
> 标签：python, windows

我试图找出是否可以使用 python 3.2.2 或更高版本的 windows 编写基于 python 的 windows 桌面小部件。上述项目完全令人困惑。他们中的任何一个都支持我正在寻找的东西吗？（即可以与 windows 和 python 3.2.2 及更高版本一起使用？

我确实遇到了这个答案（[https://askubuntu.com/questions/97023/why-cant-i-import-pygtk-with-python-3-2-from-pydev](https://askubuntu.com/questions/97023/why-cant-i-import-pygtk-with-python-3-2-from-pydev)）但它看起来只适用于非-windows平台。

如果以上这些 python 项目都不适用于 windows 和 python 3.2.2，是否有更简单的方法在 windows 的 python 3.2.2 或更高版本中创建类似雨量计的桌面小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T21:15:30.243

首先是混淆： Gtk 是[GIMP 工具包](http://www.gtk.org/)，您在问题标题中提到的所有不同事物都是相关的，但并不完全相同。PyGTK 是 Python 和 GTK 之间的传统绑定，如果您走这条路，PyGObject 是首选绑定。

这里是Python 开发的所有不同 GUI 选项的[简短概述](http://docs.python-guide.org/en/latest/scenarios/gui/)，应该简要解释这些术语，以便您有一个概述。并且正如 gauden 在评论中所建议的那样，wxPython 是跨平台应用程序的一条非常常见的道路。

现在你至少应该考虑[Kivy](http://kivy.org)，编程很有趣，它甚至为你提供了将“跨平台”位扩展到移动设备的选项。它支持透明度（[或 Kivy 术语中的不透明度](http://kivy.org/docs/api-kivy.graphics.html?highlight=opacity#kivy.graphics.Canvas.opacity)）

# ajax - 绑定前缀在远程验证操作中不起作用

> ID：10562810
> 
> 赞同：1
> 
> 时间：2012-05-12T10:13:10.257
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, validation

[我在这里](https://stackoverflow.com/questions/10562261/parameter-name-in-remote-model-validation-action-of-mvc3)问了一个类似的问题。这是我的模型：

```
[DisplayName("National Code")]
[Required(ErrorMessage = "Required")]
[RegularExpression(CustomRegex.SSNRX, ErrorMessage = CustomRegex.SSNErMsg)]
[Remote("DBValidateSSN", "CustomerProfile", "Members", ErrorMessage = "Repeated.")]
public string SSN { get; set; } 
```

所以我使用泛型类作为模型，我的视图就像：

```
@Html.EditorFor(model => model.MainModel.SSN)
@Html.ValidationMessageFor(model => model.MainModel.SSN) 
```

并验证操作：

```
public JsonResult DBValidateSSN([Bind(Prefix = "MainModel")] string SSN) {

  // ....
  return Json(result, JsonRequestBehavior.AllowGet);
} 
```

但是实际使用的SSN参数始终为null，我的错在哪里？有什么问题我还检查了 FireBug 中的 Ajax 请求参数，使用的名称是`MainModel.SSN`，你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:20:33.100

试试这样：

```
public ActionResult DBValidateSSN([Bind(Prefix = "MainModel.SSN")] string SSN)
{
    // ...
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

# javascript - 可以分别为每个字母设置动画吗？

> ID：10562813
> 
> 赞同：1
> 
> 时间：2012-05-12T10:13:16.730
> 
> 标签：javascript, jquery, html, css, animation

有没有办法**只使用 CSS**单独为单词中的每个字母设置动画？

我想可以使用 javascript/jquery 将单词作为字母数组进行迭代。

但在这里我正在寻找一个简单的出路..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T10:19:51.983

无论您使用 CSS 还是 JavaScript，您（或某些库）都必须将每个字母放在自己的元素中，以便单独为它们设置动画。例如：

```
<p>Hi there</p> 
```

...将需要成为

```
<p><span>H</span><span>i</span><span> </span><span>t</span><span>h</span><span>e</span><span>r</span><span>e</span></p> 
```

这让我认为 JavaScript 解决方案可能是首选，否则你的标记会有点……写起来不愉快。

使用使用 jQuery 的 JavaScript，很容易将元素的文本替换为包含该文本一个字符一个字符的一堆跨度：

```
var target = $("#target");
target.html(target.text().replace(/./g, "<span>$&</span>")); 
```

然后为 s 设置动画`span`。（注意我在这里假设有问题的元素**只**包含文本，而不是文本和子元素。如果你有子元素，它会更复杂。）

这是一个非常基本的示例：

HTML：

```
<p id="target" style="margin-top: 20px">Hi there</p> 
```

JavaScript：

```
jQuery(function($) {

  var target = $("#target");
  target.html(target.text().replace(/./g, "<span>$&</span>"));

  setTimeout(runAnimation, 250);

  function runAnimation() {
    var index, spans;

    index = 0;
    spans = target.children();
    doOne();

    function doOne() {
      var span = $(spans[index]);
      if (!$.trim(span.text())) {
        // Skip blanks
        next();
        return;
      }

      // Do this one
      span.css({
        position: "relative",
      }).animate({
        top: "-20"
      }, "fast").animate({
        top: "0"
      }, "fast", function() {
        span.css("position", "");
        next();
      });
    }

    function next() {
      ++index;
      if (index < spans.length) {
        doOne();
      }
      else {
        setTimeout(runAnimation, 500);
      }
    }
  }

}); 
```

[现场复制](http://jsbin.com/ifoyay)| [来源](http://jsbin.com/ifoyay/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T17:44:54.893

只有 CSS 是不可能的（直到有一个 nth-letter 规范被接受）。同时，您可以使用 lettering.js [http://letteringjs.com/](http://letteringjs.com/)将每个字母包装在一个跨度中，然后独立地为每个字母设置动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T14:23:27.307

TJ Crowder 描述的技术非常好，但它不适用于更复杂的情况。跨度中的空白消失了，这可能会导致一些问题。如果您将跨度的显示设置为 inline-block （您需要它来为某些属性设置动画），您最终会得到一个长字。所以这种技术非常适合简单的淡入/淡出动画，但对于更高级的情况，我会推荐[https://github.com/jschr/textillate/blob/master/jquery.textillate.js](https://github.com/jschr/textillate/blob/master/jquery.textillate.js)这个 jQuery 插件。

附言

我修改了先生。Crowder 代码，因此它可以很好地处理空格：

```
var target = $("#test");
target.html( target.text().replace(/./g, "<span>$&</span>").replace(/\s/g, "&nbsp;")); 
```

我使用 TweenMax staggerFromTo() 方法对其进行了动画处理，对我来说效果很好。

这里有一些演示：[http ://blog.bassta.bg/2013/05/text-animation-with-tweenmax/](http://blog.bassta.bg/2013/05/text-animation-with-tweenmax/)

# php - 从文件夹 PHP 保存文件

> ID：10562815
> 
> 赞同：0
> 
> 时间：2012-05-12T10:13:41.583
> 
> 标签：php, html

我在 php 中创建了一个文件名阅读器，它从文件夹中读取文件，现在我想添加一个功能，让我大声通过 webreader 下载这个文件，然后让我选择要保存它的位置

我真的不知道脚本有什么问题。

有人有想法吗？这就是我目前所拥有的。

索引.php

```
<?php
$mydir = "images/";
if ($handle = opendir($mydir)) {
    while (false !== ($file = readdir($handle))) {
        if ($file != '.' && $file != '..') {
?>
           <a href="download.php?f=<?php echo $file ?>" target="_blank"><?php echo $file ?></a>
<?php
        }
    }
    closedir($handle);
}
?> 
```

下载.php

```
<?php $filename = $_GET['f'];
// set this to the path where your zipped files are located
$filepath = "images" . $filename;
// a little security
if(strpos($filename, '..') !== false || realpath($filepath) != $filepath) die();
if (file_exists($filepath)){
    // make sure the browser knows what it's getting, and what to do with it
    header('Cache-Control: public');
    header('Content-Type: application/zip');
    header('Content-Disposition: attachment; filename=' . $filename);
    readfile($filepath);
    die(); 
} else {
    die('Error: File not found.');
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:17:43.697

尝试`$filepath = "images/" . $filename;`代替`$filepath = "images" . $filename;`

# android - 选择 Android Webview 中使用的动画以获得高性能

> ID：10562821
> 
> 赞同：2
> 
> 时间：2012-05-12T10:14:12.653
> 
> 标签：android, svg, android-webview, vector-graphics, performance

先说明一下我们的情况

我们计划使用 webview 组件开发一个 web 应用程序，该组件可在平板设备上运行（目标设备规格：Android 3.0，双核处理器 (1GHz x 2)，10.1"WXGA，1GB RAM）。

在应用程序中会有 2D 动画，我们设计一个角色。喜欢，

*   这个角色可能会穿不同的衣服，可能会改变模仿
*   这个角色可能会带着这些伪影行走（在固定的背景图像上）

应用程序将使用本地资源。

**我的问题是，**

**1) 考虑到 webview 的性能**和**更少的资源大小**，哪些工具最适合显示这些动画。

*   帆布
*   SVG
*   通过使用修复图像或动画 gif 来纯 javascript
*   或者是其他东西？*（注：我们不想使用闪光灯）*

2) 您建议使用哪些开发环境、工具来构建这些动画和相关资源？

*这是我在 stackoverflow 上的第一篇文章。我希望这篇文章和答案也可以帮助其他开发人员......最好的问候，*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:05:07.047

当我们考虑性能时，Canvas 会更好，而 SVG 是您无法在所有浏览器中真正呈现的东西，因为在以前版本的 android SVG 中默认情况下未启用，您必须对其进行变通才能使其正常工作。Canvas 是最好的工具，因为您可以在大多数浏览器中渲染它并考虑 webview 中的性能。android 3.0 以后如何支持 SVG。

# android - Google MapActivity 不显示地图

> ID：10562824
> 
> 赞同：0
> 
> 时间：2012-05-12T10:14:24.530
> 
> 标签：android, google-maps, keytool

我正在尝试让谷歌地图正常工作。它不显示地图。我在 LogCat 中收到以下错误

```
Couldn't get connection factory client 
```

我已经浏览了所有重复的帖子，并进行了以下更改

*   确保 uses-permission 和 uses-library 在标签内
*   使用 debug.keystore 而不是 custom
*   使用我的私钥注册了谷歌地图，并使用 xml 中的地图密钥更新了我的 MapView（对于这个公开帖子，我已经更改了它）
*   导出我的应用程序，并使用 debug.keystore 构建它

我在模拟器上运行它。模拟器上的地图工作。

安卓清单

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <activity
        android:name=".MyActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".GetLocation" android:label="@string/app_name"/>
</application> 
```

位置.xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="0psLgKtDQLB35-XJXUrjR4bKHIBDRuHu-O-xVhg"
    android:id="@+id/location"
/>

sudo keytool -list -alias androiddebugkey -storepass android -keypass android -keystore     debug.keystore 
```

返回

```
androiddebugkey, 20 Mar, 2012, PrivateKeyEntry, 
Certificate fingerprint (MD5): 20:D3:54:D9:F8:70:17:A4:BA:21:5C:98:88:27:45:E0 
```

修复了我将 uses-permission 放在 Application 标签之外，并将 uses-library 放在 Application 标签内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:18:36.533

`uses-permission``<application>`标签外。和

> 无法获取连接工厂客户端

以及它的 map-api key 问题。你应该创建 Fresh Map-api key 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T07:24:06.453

我相信你可能已经得到了这个问题的解决方案，但是对于其他寻求相同问题帮助的人来说，这里是 ans

试着放

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>    
<uses-permission android:name="android.permission.INTERNET"/> 
```

在您的应用程序标签之外

留 `<uses-library android:name="com.google.android.maps" />`在标签内

在应用程序标签中添加元数据作为

```
<meta-data android:name="com.google.android.maps.v2.API_KEY"
android:value="your API key"/> 
```

它肯定会正常工作

# input - 如何在全局上下文中模拟鼠标单击/鼠标移动/键输入？

> ID：10562825
> 
> 赞同：2
> 
> 时间：2012-05-12T10:14:56.433
> 
> 标签：input, keyboard, mouse, global, emulation

**模拟**意味着以编程方式调用这些事件。

**全局上下文**意味着这些事件调用应该影响整个桌面（某种全局环境），而不是产生它们的应用程序。此外，应用程序本身不应该有窗口——由于某些逻辑，它必须简单地在后台执行并产生这些事件。换句话说，例如，如果此应用程序将鼠标置于“全局”任意位置并调用双击事件，并且光标下有某个其他应用程序的图标，则该“其他”应用程序应该启动。

我可以使用哪个库来实现它？

注意：我没有指定操作系统，因为我希望库应该以跨平台的方式进行。如果那是不可能的，那么我会很好地使用仅限 Windows 的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:45:12.613

我发现 Java`java.awt.Robot`具有所有要求的功能。

# qt - QAnimation 框架：这里使用哪个属性

> ID：10562829
> 
> 赞同：0
> 
> 时间：2012-05-12T10:16:10.460
> 
> 标签：qt, qt4, qt4.8

最新的Qt Creator在启动时有动画效果，小部件由深到浅显示，我不知道我应该使用Qt的动画框架的哪个属性来制作类似的东西？

**更新**

好的，我尝试使用 windowOpacity 动画：

```
QPropertyAnimation *anim = new QPropertyAnimation(this, "windowOpacity", this);
connect(anim, SIGNAL(finished()), SLOT(animationFinished()));

anim->setDuration(1000);
anim->setStartValue(0.0);
anim->setEasingCurve(QEasingCurve::InOutQuad);
anim->setEndValue(1.0);

anim->start(QPropertyAnimation::DeleteWhenStopped); 
```

但是，当我在 XFWM4 中禁用“显示合成”时，效果不起作用，但 QtCreator 仍然有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T06:29:19.337

这是[属性列表](http://qt-project.org/doc/qt-4.8/QWidget.html#properties)

也许您正在寻找 windowOpacity 之一？

[这个](https://stackoverflow.com/questions/3953382/qt-how-to-animate-the-transparency-of-a-child-qpushbutton-using-qpropertyanimat)问题/答案可能对您有所帮助

# java - 命令行的 Java 聊天应用程序不发送或接收消息

> ID：10562831
> 
> 赞同：0
> 
> 时间：2012-05-12T10:16:29.727
> 
> 标签：java

您好我正在尝试通过套接字编程创建聊天应用程序。

但是，我无法在客户端或服务器端发送或接收消息。只有 System.out.println 语句显示为输出。我正在放置相同的代码。

服务器：

```
 import java.net.*;
    import java.io.*;

class MyServer
{
  public static void main(String arr[])
    {
    try

        {
        ServerSocket server=new ServerSocket(2500);//the server is listening to at this port
        System.out.println("Server is ready , waiting for a connection request...");

/*Now the accept() method blocks while it is waiting for a client Socket connection.When a client finally tries to connect, the method returns a plain old Socket (on a 

diffrent port) that knows how to communicate with the client(i.e. knwos the client IP address and port number).The SOcket is on a different port than the ServerSocket, 

so that the ServerSocket can go back to waiting for other clients.*/

        Socket sock=server.accept();
        System.out.println("Request received , connection completed...");
        Thread.sleep(10000);
        System.out.println("Waiitng for message...");
        BufferedReader b=new BufferedReader(new InputStreamReader(sock.getInputStream()));
        String msg=b.readLine();
        System.out.println("Received message "+msg);
        Thread.sleep(10000);

        System.out.println("Sending acknowledgement");
        PrintStream out=new PrintStream(sock.getOutputStream());
        Thread.sleep(30000);
        out.println("Hello client, your test message is received");
        System.out.println("Ack sent, clsoing connection");
        Thread.sleep(50000);
        server.close();
        sock.close();

        System.out.println("Connection closed");
        }
        catch(Exception ex)
        {

        System.out.println(ex);
        }

    }

} 
```

客户端：

```
 import java.net.*;
    import java.io.*;

   class MyClient
    {
  public static void main(String arr[])
    {
    try

        {

        System.out.println("Client ready , sending request...");
        Thread.sleep(10000);
        Socket socket=new Socket("localhost",2500);;    
        Thread.sleep(10000);
        System.out.println("Connection completed , sending message");
        PrintStream out=new PrintStream(socket.getOutputStream());
        Thread.sleep(30000);
        out.println("Hello server, its a test message");

        BufferedReader b=new BufferedReader(new InputStreamReader(socket.getInputStream()));
        String msg=b.readLine();
        System.out.println("Ack message "+msg);
        Thread.sleep(10000);

        System.out.println("clsoing connection");
        Thread.sleep(50000);
        socket.close();

        System.out.println("Connection closed");
        }
        catch(Exception ex)
        {

        System.out.println(ex);
        }

    }

} 
```

输出：在客户端：

```
D:\java>java MyClient
Client ready , sending request...
Connection completed , sending message
Ack message Hello client, your test message
clsoing connection
Connection closed 
```

在服务器上：

```
D:\java>java MyServer
Server is ready , waiting for a connection request...
Request received , connection completed...
Waiitng for message...
Received message Hello server, its a test message
Sending acknowledgement
Ack sent, clsoing connection
Connection closed 
```

我无法通过键盘输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:49:30.797

您需要制作一个扫描仪对象以从客户端的控制台接收输入，然后将其发送到服务器

先加

```
import java.util.*; 
```

在顶部，然后替换

```
out.println("Hello serverits a test message"); 
```

和

```
Scanner sc = new Scanner(System.in);
System.out.println("Enter a string: ");
String str = sc.nextLine();        
out.println(str); 
```

它会提示您在客户端控制台中输入一个字符串..

# ipad - 如何安装使用情节提要创建的应用程序 我是 iPhone 新手，我使用情节提要创建了一个应用程序，并尝试在 iOS 4 iPhone 中安装。我的应用程序未安装在 iPhone（iOS 4）中。我知道故事板安装在 iOS 5 中。是否有可能将其安装在 < ios5\. 在此先感谢。等待回复

> ID：10562832
> 
> 赞同：0
> 
> 时间：2012-05-12T10:16:33.240
> 
> 标签：ipad, ios4

我是 iPhone 新手，我使用情节提要创建了一个应用程序，并尝试在 iOS 4 iPhone 中安装。我的应用程序未安装在 iPhone（iOS 4）中。我知道故事板安装在 iOS 5 中。是否有可能将其安装在 < ios5\. 在此先感谢。等待回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T12:01:46.967

不幸的是，您无法在旧版本的 iOS 中运行使用故事板设计的应用程序。[斯蒂芬在这个](https://stackoverflow.com/questions/7899990/storyboard-in-ios-5-sdk-but-also-target-ios-4-3)线程中给出了一个完美的解释。

# java - 如何使用包含 arraylist 来迭代 Hashmap

> ID：10562834
> 
> 赞同：5
> 
> 时间：2012-05-12T10:16:47.870
> 
> 标签：java, hashmap

> **可能重复：**
> [如何遍历地图中的每个条目？](https://stackoverflow.com/questions/46898/how-do-i-iterate-over-each-entry-in-a-map)

我有地图

```
HashMap<Integer, ArrayList<String>> map = = new HashMap<Integer, ArrayList<String>>(); 
```

我想迭代这种类型的地图请给我例子如何迭代这个地图

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-12T10:20:18.400

```
for (Map.Entry<String, ArrayList<String>> entry : map.entrySet()) {
    String key = entry.getKey();
    ArrayList<String> value = entry.getValue();
    for(String aString : value){
        System.out.println("key : " + key + " value : " + aString);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T10:25:56.453

你可以这样做：

```
for (Integer i : map.keySet())
   for (String s : map.get(i))
      System.out.println("key :" + i + " value: " + s); 
```

# php - htaccess mod重写斜线问题

> ID：10562836
> 
> 赞同：0
> 
> 时间：2012-05-12T10:17:03.733
> 
> 标签：php, .htaccess, url, mod-rewrite, rewrite

我设法将 mydomain.com/file.php?id=## 重写为：

mydomain.com/##-Report_TITLE_OF_REPORT_HERE

通过让 .htaccess 只使用 ## 并忽略它之后的任何内容。我想把它改成这样：

mydomain.com/report-##/TITLE_OF_REPORT_HERE

但是，我无法理解它，也无法在网上找到针对此特定案例的任何教程。中间的斜线似乎把一切都搞砸了。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:28:02.150

尝试这个：

```
RewriteRule ^report-(.*)/(.*)$ mydomain.com/file.php?id=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:35:18.923

您可以使用以下代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^report-([^/]+)/ file.php?id=$1 [L,NC,QSA] 
```

# scala - 解除禁用返回按钮操作

> ID：10562843
> 
> 赞同：1
> 
> 时间：2012-05-12T10:17:56.650
> 
> 标签：scala, lift

我正在使用提升创建与交易相关的网站。在这里，需要在用户操作后显示成功页面。当我采取行动并按下**浏览器的后退按钮**时。它再次转到上一页（交易页面之前），使交易再次可行。我需要限制这种行为。有什么方法可以限制浏览器后退按钮对上一页的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T22:21:44.360

没有办法可靠地阻止用户返回 URL，但您可以阻止他们多次调用该操作。看看`S.oneShot`。来自 Scala 文档：

> 在 oneShot 范围内创建的所有函数只会被调用一次，如果调用相同的函数，它们的结果将被缓存并再次提供服务

如果您包装按下按钮时发生的函数，即使用户确实返回页面并再次单击该按钮，也不应再次调用该函数的主体。

# jaxb - 从 jaxb 编组中排除空字段

> ID：10562846
> 
> 赞同：2
> 
> 时间：2012-05-12T10:18:26.083
> 
> 标签：jaxb, marshalling, unmarshalling

我有一个 POJO，我想将其编组并作为 xml 发送，但还要解组从同一 Web 服务返回的数据。但是，此 POJO 中有某些字段，我不想发送，但可能在服务器返回的 xml 中。

这里的问题是，例如，如果我有一个名为 status 的 int 字段，而我实际上并没有为此字段设置任何值（因为我不想将此字段发送到服务器），JAXB 仍然会在 xml 中创建一个 0 元素.

所以我的问题是：我怎样才能防止这种行为，并简单地省略该字段，但仍然能够读取从服务器返回的元素的值？

亲切的问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T12:30:00.817

重复我的评论作为答案......

由于`int`不能表示“无价值”，您可以改为使用`Integer`. 如果是`null`，则 JAXB 将在编组时省略该字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T12:11:44.450

使用 JAXB 整数将被转换为 0（非空）。

# php - 设置 SonataNewsBundle 以处理帖子中的媒体

> ID：10562850
> 
> 赞同：0
> 
> 时间：2012-05-12T10:18:49.993
> 
> 标签：php, symfony, symfony-sonata

安装了 SonataMediaBundle、SonataNewsBundle 和 SonataAdminBundle（还有更多，但这些很重要）。

通过管理员发布新闻时，我选择使用如下配置的降价。

```
sonata_formatter:
    formatters:
        markdown:
            service: sonata.formatter.text.markdown
            extensions:
                - sonata.formatter.twig.control_flow
                - sonata.formatter.twig.gist
                - sonata.media.formatter.twig 
```

格式化程序按预期格式化所有标题等，但是，媒体未格式化。不过，我发现了一些不同的文档，关于它们的语法非解析。

找到的格式：

```
<% 1552362, 'gistfile1.txt'%>

<% media 4, 'small' %>
{% thumbnail 4, 'small' %} 
```

所以。

1.  我的语法可能是错误的
2.  需要一些额外的配置
3.  需要完成一些自定义编码
4.  应该在前端做些什么？
5.  或者我真的错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:06:51.477

`<% media 4, 'small' %>`工作正常，但是，你应该确保你的缓存被清除了！

# java - 在 Tomcat 或 Jetty 上的 Spring Web 应用程序控制器内进行基于事件的编程

> ID：10562851
> 
> 赞同：1
> 
> 时间：2012-05-12T10:19:05.230
> 
> 标签：java, spring, spring-mvc

HTTP 控制器（Spring）获取请求并进行阻塞调用。一旦阻塞调用结束，控件就会返回到控制器。

在这一点上，我不想将响应发送回客户端，而是等待另一个事件（例如，完成某些处理）发生。一旦该事件发生，我需要一种方法来从事件中收集数据，然后返回带有该数据的 HTTP 响应。

```
HTTPController doSomething( HTTPRequest ) 
{
    makeBlockingCall();  
    waitForEventToHappen();
    collectDataFromEvent();

    return HTTPResponse(); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:41:34.003

您不会在一个请求中执行此操作，因为这最终可能会超时，并且在此之前不会向客户提供正在发生某事的反馈。

相反，您将立即显示一个页面，该页面以异步方式（可能是每个 AJAX）轮询服务器以查看结果是否已经可用。

因此，第一个请求将返回一个 ID，该 ID 将在第二个 (AJAX) 请求中用于查找结果。

# c++ - 在尝试读入内存时检查磁盘文件上的二进制数据损坏

> ID：10562852
> 
> 赞同：1
> 
> 时间：2012-05-12T10:19:12.797
> 
> 标签：c++, binary

检查文件中的二进制数据是否未损坏的最佳做法是什么？

有一些字符串（长度 + 字符）和一些地图（地图的第一个大小，而不是字符串）。

当数据损坏时，我会陷入无限循环，因为地图的大小可能是非常大的价值。

任何想法如何检查并确保二进制数据在读取之前/期间没有损坏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:26:12.887

最简单的解决方案是某种哈希/校验和。有几种选择：

*   一/二的补码加法
    *   优点：非常容易实现 - 只需将数据块中的所有 32 位 DWORD 相加即可。
    *   缺点：不太擅长检测不良数据 - 一些常见的位歪斜可能会破坏它。
*   CRC32
    *   优点：速度快，相对容易实现，散列输出大小较小。
    *   缺点：小散列大小意味着丢失坏数据的可能性很小。
*   MD5
    *   优点：对于大多数意图和目的（即不是加密），它是抗碰撞的。
    *   比前两个慢得多，也更复杂。虽然有库。
*   奇偶校验位
    *   优点：可用于检测*和*纠正错误。
    *   缺点：可能难以正确实施，增加了数据的整体大小。

随便挑吧：）

# iphone - 在 iPhone SDK 中的触摸点上绘制曲线

> ID：10562855
> 
> 赞同：0
> 
> 时间：2012-05-12T10:19:41.067
> 
> 标签：iphone, ios

我想用用户完美地触摸两点来绘制曲线......！但是，不知道这个功能的实现......！

帮助我任何代码或教程，非常感谢......！

谢谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:37:51.803

查看苹果的“[使用贝塞尔路径绘制形状](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/BezierPaths/BezierPaths.html)”指南。

# jquery - jquery如何覆盖类方法？

> ID：10562861
> 
> 赞同：0
> 
> 时间：2012-05-12T10:20:48.973
> 
> 标签：jquery, overriding, extend

看起来这个问题很流行，但没有 jQuery 版本。

我有两节课，第二节课是从第一节课扩展而来的。

扩展方法[是从这里复制的](http://forum.jquery.com/topic/class-inheritance-with-jquery-extend)。

```
function UIButton(o){
    if (typeof(o) != 'undefined') $.extend(true, this, o); 
    this.setOutput=function(divname){
      alert("first");
    }
}

function UIButton2(o) {
    if (typeof(o) != 'undefined') $.extend(true, this, o);
    this.setOutput=function(divname) {
        alert("second");
    }
    return new UIButton(this);
} 
```

根据[jquery文档](http://api.jquery.com/jQuery.extend/)

第二个对象的方法应该通过使用覆盖第一个对象的方法（同名）`$.extend()`。

但是我在 html 中检查了它，发现第一个对象的功能仍然很好。(Alert "first"...) 这使得它的子类不能重写该函数。

所以我想问一下，这是如何发生的以及如何解决它。我要提醒“秒”……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:38:40.713

你先扩展，然后设置新的`setOutput`（*所以你覆盖了扩展的方法*）。

如果您更改顺序，它将起作用..

```
function UIButton(o){
    this.setOutput=function(divname){
      alert("first");
    }
    if (typeof(o) != 'undefined') $.extend(true, this, o); 
}

function UIButton2(o) {
    this.setOutput=function(divname) {
        alert("second");
    }

    if (typeof(o) != 'undefined') $.extend(true, this, o);
    return new UIButton(this);
} 
```

（*仅在`UIButton`此示例中需要，但我将其添加到两者以供将来使用*）

演示在[http://jsfiddle.net/gaby/R26ec/](http://jsfiddle.net/gaby/R26ec/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T17:52:09.490

您可以使用 jQuery 代理方法来覆盖类 Ref：[http ://api.jquery.com/Types/#Context.2C_Call_and_Apply](http://api.jquery.com/Types/#Context.2C_Call_and_Apply)

例如

```
(function() {
   // log all calls to setArray
   var proxied = jQuery.fn.setArray;
   jQuery.fn.setArray = function() {
   console.log( this, arguments );
   return proxied.apply( this, arguments );
  };
})(); 
```

# javascript - 执行 Javascript 时出错，通过单击锚点起作用

> ID：10562863
> 
> 赞同：0
> 
> 时间：2012-05-12T10:20:58.163
> 
> 标签：javascript, cocoa, dom, dom-events

我有一个需要在 Cocoa 应用程序中使用 DOM 或 JavaScript 操作的网页。

该网页上有一个触发 Javascript 事件的链接。

该链接只有一个指向`javascript:doThis('onThat')`

当我使用浏览器单击该链接时，它工作得很好，/尽管/浏览器控制台上出现一个错误，提示`doThis`找不到变量。但是，Javascript 可以运行。

当我尝试`javascript:doThis('onThat')`在网页上执行时，通过使用 Cocoa 的评估 Javascript 命令或在浏览器的控制台上，它不起作用，错误是变量`doThis`无处可见......虽然，我重复一遍，当我点击锚点时它工作得很好，并且锚点只指向那个 Javascript 代码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T10:38:22.450

如果您尝试在控制台上执行 JavaScript 代码，则不应使用`javascript:`，而只需尝试通过调用函数来运行它`doThis('onThat')`。当您将一段 JS 代码放入`href`锚元素的属性中时，它会向浏览器发出信号，在这种情况下，浏览器会尝试评估该段代码，如果它在该网页中找到该函数，则会执行它否则它只会抛出错误。

只需尝试在没有`javascript:`控制台的情况下运行您的代码。

# java - Hibernate注解继承抽象基类

> ID：10562864
> 
> 赞同：1
> 
> 时间：2012-05-12T10:21:13.077
> 
> 标签：java, inheritance, annotations, hibernate-4.x

在我的应用程序中，我试图通过注释来实现 Hibernate 映射。我有一个抽象的基类，在这个类中存在 Id 属性。我正在用一个子类继承这个基类。代码如下：

```
@MappedSuperclass
@Inheritance(strategy=InheritanceType.JOINED)
public abstract class Base implements IBase {

    private static final long serialVersionUID = -1433573674276444516L;

    private int id;

    public Base() {

    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)   
    @Column(name="ID")
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

子类是：

```
@Entity
@Table(name="USER")
public class User extends Base implements IUser {

    private static final long serialVersionUID = 344528694909088439L;

    private String name;

    public User() {

    }

    @Column(name="NAME", nullable=false)
    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }   
} 
```

它正在创建用户表并且工作正常。

我想知道我是否以正确的方式做这件事。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:39:06.543

如果目标只是让几个独立的实体从基类继承一个公共字段，那么不，你没有正确地做到这一点。注释@Inheritance 是不必要的。当您拥有一个实体（例如，车辆）和多个子实体（例如，汽车、自行车）时，@Inheritance 是必需的。

# php - 如何使用网络爬虫获取动态生成的 JavaScript 数据

> ID：10562867
> 
> 赞同：0
> 
> 时间：2012-05-12T10:22:06.917
> 
> 标签：php

大多数网页的数据可以通过简单地下载 HTML 然后解析出所需的内容来抓取。但是，某些网页在页面加载后会使用 JavaScript 动态加载其内容，因此在原始 HTML 中找不到所需的数据。

请帮助我如何使用网络爬虫获取动态生成的 JavaScript 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:16:24.330

您可以使用 Firefox 的 Web Developer Add-on。页面加载完成后选择查看源代码 -> 查看生成的源代码，您将在新窗口中以 HTML 格式获取联系人。然后，您可以继续使用当前正在使用的任何解析器。

# c++ - 函子参数计数类型的 C++ 重载

> ID：10562871
> 
> 赞同：3
> 
> 时间：2012-05-12T10:23:07.007
> 
> 标签：c++, templates, visual-c++, lambda, c++11

我正在为 C++11 开发“LINQ to Objects”库。我想做这样的事情：

```
// filtering elements by their value
arr.where( [](double d){ return d < 0; } )

// filtering elements by their value and position
arr.where( [](double d, int i){ return i%2==0; } ) 
```

我很想写`arr.where_i( ... )`- 这很难看。所以我需要通过 lambda 类型重载函数/方法...

这是我的解决方案：

```
template<typename F>
auto my_magic_func(F f) -> decltype(f(1))
{
    return f(1);
}

template<typename F>
auto my_magic_func(F f, void * fake = NULL) -> decltype(f(2,3))
{
    return f(2,3);
}

int main()
{
    auto x1 = my_magic_func([](int a){ return a+100; });
    auto x2 = my_magic_func([](int a, int b){ return a*b; });
    // x1 == 1+100
    // x2 == 2*3
} 
```

是 SFINAE 解决方案吗？你能给我什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:30:27.527

也许是可变的：

```
#include <utility>

template <typename F, typename ...Args>
decltype(f(std::declval<Args>()...) my_magic_func(F f, Args &&... args)
{
    return f(std::forward<Args>(args)...);
} 
```

*编辑：*您也可以使用`typename std::result_of<F(Args...)>::type`返回类型，它做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T13:54:28.340

您当然希望 SFINAE 在您的解决方案中。一般来说，结果看起来像：

```
template<
    typename Functor
    , typename std::enable_if<
        special_test<Functor>::value
        , int
    >::type = 0
>
return_type
my_magic_func(Functor f);

template<
    typename Functor
    , typename std::enable_if<
        !special_test<Functor>::value
        , int
    >::type = 0
>
return_type
my_magic_func(Functor f); 
```

这样任何时候只有一个过载会处于活动状态——现在剩下的就是精心设计它`special_test`以获得我们想要的行为。这是一种谨慎的平衡行为，因为您不希望测试过于具体；否则我们失去了一般性。编写通用代码时相当可惜。您没有提供太多信息（例如，您是否对支持 lambdas 非常感兴趣？单态函子？多态函子？），但我现在假设我们可以访问与您的示例`value_type`相对应的别名。`double`

因此，这是一个示例条件，它将检查给定类型是否为 Callable （这是一个标准概念）并带有签名`bool(value_type)`；即它是一种谓词：

```
template<typename Functor, typename ValueType>
struct is_unary_predicate {
    typedef char (&accepted)[1];
    typedef char (&refused)[2];

    void consume(bool);

    template<
        typename X
        , typename Y
        , typename = decltype( consume(std::declval<X>()(std::declval<Y>())) )
    >
    accepted
    test(X&&, Y&&);

    refused test(...);

    static constexpr bool value =
        sizeof test(std::declval<Functor>(), std::declval<ValueType>())
        == sizeof(accepted);
}; 
```

就我个人而言，我有一个`is_callable<F, Signature>`特点，所以我只需要编写类似的东西`template<typename Functor, typename ValueType> using is_unary_predicate = is_callable<Functor, bool(ValueType)>;`（同样我可以有一个`is_binary_predicate`别名，而不是让第二个重载`my_magic_func`成为一个包罗万象的东西）。也许您希望在 SFINAE 的未来使用中使用类似的特征（尽管在没有可变参数模板的情况下编写可能会有些痛苦）。

# java - JVM字节码验证者的职责

> ID：10562876
> 
> 赞同：21
> 
> 时间：2012-05-12T10:23:55.387
> 
> 标签：java, jvm

有人可以列出字节码验证器必须执行以保证程序正确性的主要任务吗？JVM 规范中是否定义了一组标准的、最小的职责？我还想知道验证是否跨越其他阶段，例如加载和初始化。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T10:27:59.453

这在[JVM 规范中指定：第 4.10 章。类文件的验证](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10)。

该页面的大部分内容描述了类型安全的各个方面。要检查程序是否是类型安全的，验证者需要确定每个程序点的操作数堆栈中驻留的操作数类型，并确保它们与相应指令所期望的类型相匹配。

它验证的其他内容包括但不限于以下内容：

> *   分支必须在方法的代码数组范围内。
>     
>     
> *   所有控制流指令的目标都是指令的开始。在宽指令的情况下，宽操作码被认为是指令的开始，并且给出被该宽指令修改的操作的操作码不被认为是指令的开始。不允许分支到指令中间。
>     
>     
> *   没有指令可以访问或修改索引大于或等于其方法指示它分配的局部变量数量的局部变量。
>     
>     
> *   所有对常量池的引用都必须指向适当类型的条目。（例如，指令 getfield 必须引用一个字段。）
>     
>     
> *   代码不会在指令中间结束。
>     
>     
> *   执行不能脱离代码的末尾。
>     
>     
> *   对于每个异常处理程序，受处理程序保护的代码的起点和终点必须位于指令的开头，或者在终点的情况下，紧接在代码的结尾之后。起点必须在终点之前。异常处理程序代码必须从有效指令开始，并且不能从被宽指令修改的操作码开始。

作为最后一步，验证器还执行数据流分析，以确保没有指令引用任何未初始化的局部变量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-12T17:32:49.667

或者，您可能想看看 James Gosling 的[Java 语言环境](http://java.sun.com/docs/white/langenv/Security.doc3.html)白皮书。

[![![在此处输入图像描述](../Images/c7f4a70d2c7ca4c11a7ce0a3a7ad4651.png)](https://i.stack.imgur.com/1nRJj.gif)

> 字节码验证器遍历字节码，构造类型状态信息，验证所有字节码指令的参数类型。
> 
> 该图显示了从 Java 语言源代码通过 Java 编译器到类加载器和字节码验证器，进而到包含解释器和运行时系统的 Java 虚拟机的数据流和控制流。重要的问题是 Java 类加载器和字节码验证器对字节码流的主要来源没有做出任何假设——代码可能来自本地系统，或者它可能已经在地球的中途传播。字节码验证器充当一种看门人：它确保传递给 Java 解释器的代码处于适合执行的状态，并且可以运行而不必担心破坏 Java 解释器。在通过验证者的测试之前，不允许以任何方式执行导入的代码。验证器完成后，
> 
> *   没有操作数堆栈上溢或下溢
> *   已知所有字节码指令的参数类型总是正确的
> *   已知对象字段访问是合法的——私有的、公共的或受保护的
> 
> 虽然所有这些检查看起来都非常详细，但当字节码验证器完成工作时，Java 解释器可以继续进行，因为它知道代码将安全运行。了解这些属性会使 Java 解释器更快，因为它不需要检查任何东西。没有操作数类型检查和堆栈溢出检查。因此，口译员可以在不影响可靠性的情况下全速运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T10:27:49.080

它执行以下操作：

*   没有操作数堆栈上溢或下溢
*   已知所有字节码指令的参数类型总是正确的
*   已知对象字段访问是合法的——私有的、公共的或受保护的

参考：http: [//java.sun.com/docs/white/langenv/Security.doc3.html](http://java.sun.com/docs/white/langenv/Security.doc3.html)

# windows - 为什么 SendMessage() 函数不起作用？

> ID：10562877
> 
> 赞同：3
> 
> 时间：2012-05-12T10:24:13.433
> 
> 标签：windows, api, click, sendmessage, simulate

我尝试将 WM_LBUTTONDOWN 和 WM_LBUTTONUP 消息发送到窗口（模拟鼠标单击而不移动光标）。

我的程序在许多窗口上都运行得很好，但也有一些**不起作用**:(比如注册表编辑器、雅虎通、一些 Firefox 站点等...

**我怎样才能与上面的人一起工作？**

注意＃1：我使用Win7

注意#2：我的代码只是调用 api 和函数并将它们应用到特定的窗口句柄上。它工作正常，但不是在所有窗口上:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:46:45.297

这是 UAC 的另一个方面，称为 UIPI 或用户界面隐私隔离，可能会导致此问题。旨在防止运行未提升的程序劫持提升的程序的功能。这当然解释了 Regedit.exe 的问题，如果程序可以强行将内容插入注册表，那么 UAC 显然是无效的。您必须运行提升的程序才能绕过此限制。

另一个是 SendMessage() 没有正确模拟鼠标输入。您发送的消息通常会*发布*到消息队列中。您需要使用 PostMessage() 代替。您还应该模拟 WM_MOUSEMOVE。

模拟鼠标输入的正确方法是通过 SendInput()。那个*完全*模拟鼠标驱动程序的行为，程序无法区分。但是还有一个额外的要求，即您必须确保您尝试自动化的任何程序都在前台运行。这非常困难，SetForegroundWindow() 不够可靠。因此，如果您实际上只想将鼠标消息发送到前台窗口，则只考虑 SendInput()，无论它可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T10:30:52.353

您可以调用`SwitchToThisWindow`而不是`SetForegroundWindow`，这要好得多，并且在大多数情况下都可以使用，然后调用`SendInput`or `mouse_event`，这更舒服，因为您根本不处理结构。

# ruby-on-rails-3 - Rails 3：将属性和值从一个模板模型复制到另一个模型

> ID：10562883
> 
> 赞同：2
> 
> 时间：2012-05-12T10:24:53.817
> 
> 标签：ruby-on-rails-3

我有一组记录，我希望每个用户从 item_templates 表中开始。然后，在 items 表中，我有 user_id 和每个项目。所以，基本上模式看起来像；

item_templates 表：

*   项目代码
*   项目名称
*   ...一堆其他属性

物品表：

*   用户身份
*   项目代码
*   项目名称
*   ...一堆其他属性

每次创建新用户时，我都想在项目表中为该用户复制模板中的项目。有什么简单的方法可以避免对所有属性进行编码以从 item_templates 复制到项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T17:22:47.883

```
item.update_attributes(template.attributes) 
```

# html - 如何在lua中获取html div的全部内容

> ID：10562886
> 
> 赞同：0
> 
> 时间：2012-05-12T10:25:47.953
> 
> 标签：html, sockets, post, lua

**编辑**：我已经找到了如何发布标题，并且我知道如何获得价值，但需要帮助才能做到这一点。就这个。

*   我必须检索网页。（这部分还可以）
*   查找结果“formulaire_action_args”出现在哪一行并将其保存在变量中。（寻找比循环更好的方法）
*   并从此行检索属性“值”。

我正在尝试获取包含在 div 中的 html 页面的内容，如下所示：

```
<form id="formulaire_login" method="post" action="/spip.php?page=login&amp;lang=fr" enctype="multipart/form-data">
    <div>
        <input name="page" value="login" type="hidden">
        <input name="lang" value="fr" type="hidden">
        <input name="formulaire_action" type="hidden" value="login">
        <input name="formulaire_action_args" type="hidden" value="random_value">
    </div>
    <fieldset>
        <ul>
            <li class="editer_login obligatoire">
               <input type="text" class="text" name="var_login" id="var_login" value="" size="40">
            </li>
            <li class="editer_password obligatoire">
                <input type="password" class="password" name="password" id="password" value="" size="40">
            </li>
        </ul>
    </fieldset>
</form> 
```

我想用 id="formulaire_login" 获取表单的内容，并在此表单中获取输入的属性“value”（random_value）的值

```
<input name="formulaire_action_args" type="hidden" value="random_value"> 
```

另一方面，我正在寻找一种方法来请求带有 POST 标头数据的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T17:35:41.023

如果页面的全文在 中`pagetext`，则可以通过 Lua 模式匹配检索该值，而无需遍历任何内容：

```
value = pagetext:match('name="formulaire_action_args"[^>]*value="([^"]+)"')

print(value) --> random_value 
```

* * *

Lua 模式（本质上是正则表达式）的工作方式是（1）大多数字符匹配自己，（2）有指定要匹配的字符*类*的方法，（3）有指定特定字符/类的*数量*的方法匹配。

```
name="formulaire_action_args" --> match this text exactly
[^>]*                         --> match 0 or more characters that are NOT a > character
value="                       --> match this text exactly
([^"]+)                       --> find 1 or more characters that are NOT a quote character and "capture" it 
```

[更多关于 Lua 模式的信息。](http://www.lua.org/pil/20.2.html)

# c - 计算字符串出现次数的最快方法

> ID：10562887
> 
> 赞同：3
> 
> 时间：2012-05-12T10:25:48.373
> 
> 标签：c, string, performance

我想知道在另一个字符串（干草堆）中计算一个字符串（针）出现次数的最快方法是什么。我这样做的方式是：

```
int findWord(char * file, char * word){
 char *fptr;
 char * current = strtok_r(file, " ,.\n", &fptr);
 int sum = 0;
 while (current != NULL){
    //printf("%s\n", current);
    if(strcmp(current, word) == 0)
        sum+=1;
    current = strtok_r(NULL, " ,.\n", &fptr);
 }
 return sum;
} 
```

使用更复杂的算法（Boyer-Moore）会更快吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:35:56.753

目前，如果您的程序正在计算单词`"blah"`并遇到一个标记 is `"blahblah"`，您的算法会将其视为零出现。如果需要将其计为两个，您可以从更高级的方法中受益*。*

如果您的程序执行您想要的操作，那么您将尽可能快地处理：它在较长的“单词”的字母数量上已经是线性的，因此您无法进一步加快它的速度。

需要一个更有趣的解决方案来计算具有自别名的单词：例如，count `"aa"`s inside `"aaaa"`string。如果您需要`3`针对这种情况返回，则需要更高级的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:36:31.777

> 使用更复杂的算法（Boyer-Moore）会更快吗？

在您的算法中，比较单位是一个单词而不是一个字符。这使算法能够忽略跨越单词边界的匹配，从而使其`O(n)`及时运行。

我怀疑您是否能够渐近地击败它。

就降低乘法常数而言，现在您的算法会`file`两次查看每个字符。您可以通过重写代码以使用一对指针和一个`for`循环来消除这种冗余（弄清楚细节留给读者练习:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T12:15:50.457

除非您的系统对字符串函数的实现不好，否则这应该是最快的：

```
const char *s, *t;
size_t cnt;
for (cnt=0, s=haystack; t=strchr(s, needle); s=t+1, cnt++); 
```

如果您不想计算重叠匹配，请稍微调整一下（+strlen(needle) 而不是 +1）。

# c# - 如果 SQL Server 2005 中有任何列，如何获取最后一个 ID？

> ID：10562889
> 
> 赞同：1
> 
> 时间：2012-05-12T10:25:59.330
> 
> 标签：c#, sql-server-2005

> **可能重复：**
> [如何获取最后插入的 id？](https://stackoverflow.com/questions/5228780/how-to-get-last-inserted-id)

我试图获取最后一个 id（`identity`列的最后一个值）以在每次将数据插入表时将其显示在控件上，该控件递增 1。

如何使用 C# 在 SQL Server 2005 的存储过程中获取最后一个 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:48:01.360

要么在插入发生时获取最新的 ID（使用`SCOPE_IDENTITY()`），要么稍后需要检查`IDENTITY`列的当前值，使用`SELECT IDENT_CURRENT('table_name')`来获取该值。

因此，最简单的方法是在插入值时获取 ID - 如下所示：

```
string sql = "INSERT INTO dbo.YourTable(Col1, ..., ColN) VALUES(@Val1, ..., @ValN); SELECT SCOPE_IDENTITY()";

using (SqlConnection conn = new SqlConnection(connString))
using (SqlCommand cmd = new SqlCommand(sql, conn))
{
    conn.Open();
    _ID = (Int32)cmd.ExecuteScalar();
    conn.Close();
} 
```

或者，如果您在插入 ID 时无法获取它，您可以稍后随时检查`IDENTITY`给定表上列的当前上次使用的值是什么，使用如下内容：

```
string sql = string.Format("SELECT IDENT_CURRENT('{0}');", yourTableName);

using (SqlConnection conn = new SqlConnection(connString))
using (SqlCommand cmd = new SqlCommand(sql, conn))
{
    conn.Open();
    _ID = (Int32)cmd.ExecuteScalar();
    conn.Close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T10:30:53.320

标识列在数据库中递增，而不是在 C# 端。您可以像这样查询最后一个值：

```
SELECT MAX(id) FROM mytable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T10:32:27.407

你可以用这个

```
SELECT @@IDENTITY AS 'Identity'; 
```

或这个

```
SELECT MAX(SomeID) FROM SomeTable; 
```

**编辑**

最佳使用方式

```
SELECT SCOPE_IDENTITY() AS [SCOPE_IDENTITY] 
```

在 C# 中你可以调用

```
Int32 _ID = 0;
//you could use second variant sql= "SELECT MAX(SomeID) FROM SomeTable";
string sql =
    "SELECT @@IDENTITY AS 'Identity'";
using (SqlConnection conn = new SqlConnection(connString))
{
    SqlCommand cmd = new SqlCommand(sql, conn);
    try
    {
        conn.Open();
        _ID = (Int32)cmd.ExecuteScalar();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

**编辑**

很好的链接来感受差异 [将@@IDENTITY 和 SCOPE_IDENTITY 与触发器一起使用](http://msdn.microsoft.com/ru-ru/library/ms190315.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T10:29:40.823

```
SELECT TOP 1 Id FROM table_name ORDER BY 1 DESC 
```

或在 LINQ 中：

```
context.table.Select(x->x.Id).OrderByDescending(x->x.Id).FirstOrDefault(); 
```

# sql-server - SSRS sql 查询运行缓慢

> ID：10562891
> 
> 赞同：3
> 
> 时间：2012-05-12T10:26:14.820
> 
> 标签：sql-server, performance, reporting-services, ssrs-2008

我有很长时间的问题，每次都会弹出。我使用一些选择查询创建 ssrs 报告。当我尝试运行报告时，它需要大约 20 秒才能呈现。我检查了 sql profiler，确实查询运行了 20 多秒。当我将查询复制到管理工作室时，它会在 0 秒内运行。

正如在之前的帖子中所写，我尝试过在查询中声明参数并使用 ssrs 参数设置它们的值。有时它有效，目前它不...

还有其他走走吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T12:02:16.937

将您的报告配置为从缓存中运行。

缓存是最后执行的报告的副本。它不是一个持久化的副本，它有一个生命周期（比如缓存 30 分钟）。它存储在临时数据库中。每个报告只能有一个“实例”（如果有参数，则每个参数组合都有一个）

您可以在报告管理器的报告的执行选项卡上执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:58:40.620

将 sql 语句变成一个存储过程，并在 sp 中使用 WITH RECOMPILE 选项。

例如

```
CREATE PROCEDURE dbo.spname @ParamName varchar(30)

**WITH RECOMPILE**

AS 
```

这将有助于抵消过程执行期间的“参数嗅探”并有助于提高性能。

# java - mybatis的sql查询中的枚举常量

> ID：10562895
> 
> 赞同：4
> 
> 时间：2012-05-12T10:26:56.850
> 
> 标签：java, sql, mybatis

我需要在查询中引用枚举常量。我试过下一个例子

```
<select=...>
  select * from tableA where value = @MyEnum@Value.tostring()
</select> 
```

但它只是插入`@MyEnum@Value.tostring()` 价值。我也试过

```
#{@MyEnum@Value.tostring()} 
```

但它被视为查询参数。那么如何在查询中使用枚举常量呢？

PS 值列是 varchar

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-24T15:23:03.310

如果你想访问 MyBatis 中的任何枚举常量，你应该使用这种形式：

给定枚举：

```
package org.sample.domain;

public enum Currency {
    USD("$"), YEN("Y"), PLN("zl");

    private String symbol;

    Currency(String symbol) {
        this.symbol = symbol;
    }

    public String getSymbol() {
        return this.symbol
    }
} 
```

当您想使用枚举的任何属性时。

然后你必须在你的 xml 文件中使用这个表单：

```
<select id="report" resultMap="resultMap">
    SELECT *
    FROM invoices
    WHERE currency_symbol = '${@org.sample.domain.Currency@USD.getSymbol()}'
</select> 
```

MyBatis 是在没有任何引号的情况下注入价值，因此您必须将其括在引号中。

使用 MyBatis 3.3.1 测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T01:56:09.347

你确定你在问一个关于在 MyBatis 中使用 Java 的问题吗？我不确定`@MyEnum@`符号是什么。

无论如何，这里是你如何使用 Java 对 MyBatis 提出的要求（我不知道 MyBatis.NET 版本是否有另一种方法。）我已经用 MyBatis-3.1.1 对此进行了测试：

```
<select id="getSomeObjectByValue" resultType="SomeObject" parameterType="MyEnum">
  SELECT *
  FROM tableA
  WHERE UPPER(value) = #{param1.toString()}
</select> 
```

"param1" 是传递给 MyBatis 的第一个参数的默认名称（我认为），但是当只有一个参数被传入时，你可以给它一个不同的名称，所以这样的东西也可以工作：

```
<select id="getSomeObjectByValue" resultType="SomeObject">
  SELECT *
  FROM tableA
  WHERE UPPER(value) = #{p.toString()}
</select> 
```

请注意，我也可以关闭 parameterType 并且它仍然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T11:44:08.713

仅供欣赏：

如果您想将它用于 <if test="..."> 您还可以执行以下操作：

```
<if test="enumParam == @the.enum.pack.MyEnum@VALUE">
    ...
</if> 
```

并且工作正常。

# ipad - 根视图中的多个选项卡

> ID：10562898
> 
> 赞同：0
> 
> 时间：2012-05-12T10:27:34.273
> 
> 标签：ipad, xcode4, xamarin.ios, master-detail

我对 XCode 和 Monotouch 开发非常陌生。我正在尝试在根视图（主从应用程序）中添加多个选项卡。我使用 Mono 进行开发，使用 xCode 4 进行 UI 设计。例如，一个选项卡显示员工列表，另一个选项卡显示部门列表。

我删除了 rootviewController.xib 文件中的默认表格视图并替换为 tabbedview，但我无法为每个选项卡工作获得新的表格视图。

如果有人能告诉我这样做的正确方法，我将不胜感激。

更新：我使用下面的代码添加 2 个选项卡和 2 个表格视图。一个是持有“证券”，一个是持有“指标”

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Collections.Generic;

namespace ChartQ
{
public partial class RootViewController : UITabBarController 
{
    public DetailViewController DetailVC { get; set; }

    private List<SecurityInfo> listSecInfo =  new List<SecurityInfo>();
    private List<Indicator> listIndicator =  new List<Indicator>();
    public RootViewController () : base ("RootViewController", null)
    {
        this.Title = NSBundle.MainBundle.LocalizedString ("Securities", "Securities");
        //this.ClearsSelectionOnViewWillAppear = false;
        this.ContentSizeForViewInPopover = new SizeF (100f, 200f);
        //this.ContentSizeForViewInPopover = new SizeF (320f, 600f);

        // Custom initialization
    }

    public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        //Read data from Database..
        UITableViewController secController =  new UITableViewController();
        UITableViewController IndiController =  new UITableViewController();

        this.AddChildViewController(secController);
        this.AddChildViewController(IndiController);
        SQLLiteDatabase db =  new SQLLiteDatabase();
        listSecInfo =  db.ReadSecurities();
        listIndicator  = db.ReadIndicator();
        //TableView.Source = new SecuritiesDataSource (this);
        secController.TableView.Source = new SecuritiesDataSource (this);
        secController.TableView.SelectRow (NSIndexPath.FromRowSection (0, 0), false, UITableViewScrollPosition.Middle);

        IndiController.TableView.Source = new IndicatorDataSource (this);
        IndiController.TableView.SelectRow (NSIndexPath.FromRowSection (0, 0), false, UITableViewScrollPosition.Middle);

    }

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        // Return true for supported orientations
        return true;
    }

    public override void DidReceiveMemoryWarning ()
    {
        // Releases the view if it doesn't have a superview.
        base.DidReceiveMemoryWarning ();

        // Release any cached data, images, etc that aren't in use.
    }

    public override void ViewDidUnload ()
    {
        base.ViewDidUnload ();

        // Clear any references to subviews of the main view in order to
        // allow the Garbage Collector to collect them sooner.
        //
        // e.g. myOutlet.Dispose (); myOutlet = null;

        ReleaseDesignerOutlets ();
    }
    class SecuritiesDataSource : UITableViewSource
    {
        static NSString cellIdentifier = new NSString ("CellId");
        RootViewController controller;

        public SecuritiesDataSource (RootViewController controller)
        {
            this.controller = controller;
        }

        // Customize the number of sections in the table view.
        public override int NumberOfSections (UITableView tableView)
        {
            return 1;
        }

        public override int RowsInSection (UITableView tableview, int section)
        {
            return controller.listSecInfo.Count;
        }

        public override string TitleForHeader (UITableView tableView, int section)
        {
            return "Securities";
        }

        // Customize the appearance of table view cells.
        public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
        {
            string cellIdentifier = "Cell";
            var cell = tableView.DequeueReusableCell (cellIdentifier);
            if (cell == null) {
                cell = new UITableViewCell (UITableViewCellStyle.Subtitle, cellIdentifier);
                //Add in a detail disclosure icon to each cell
                cell.Accessory = UITableViewCellAccessory.DetailDisclosureButton;
            }

            // Configure the cell.
            var sInfo = controller.listSecInfo [indexPath.Row];
            cell.TextLabel.Text = String.Format ("{0}",sInfo.SecCode);
            cell.DetailTextLabel.Text = sInfo.SecName;

            return cell;
        }

        private void InfoAlert (string msg)
        {
            using (UIAlertView av = new UIAlertView("Info", msg, null, "OK", null)) {
                av.Show ();
            }
        }

        public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
        {
            var sInfo = controller.listSecInfo [indexPath.Row];

            controller.DetailVC.DrawChart(sInfo.SecID, sInfo.SecCode);
        }

    }
    class IndicatorDataSource : UITableViewSource
    {
        static NSString cellIdentifier = new NSString ("CellId");
        RootViewController controller;

        public IndicatorDataSource (RootViewController controller)
        {
            this.controller = controller;
        }

        // Customize the number of sections in the table view.
        public override int NumberOfSections (UITableView tableView)
        {
            return 1;
        }

        public override int RowsInSection (UITableView tableview, int section)
        {
            return controller.listIndicator.Count;
        }

        public override string TitleForHeader (UITableView tableView, int section)
        {
            return "Indicators";
        }

        // Customize the appearance of table view cells.
        public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
        {
            string cellIdentifier = "Cell";
            var cell = tableView.DequeueReusableCell (cellIdentifier);
            if (cell == null) {
                cell = new UITableViewCell (UITableViewCellStyle.Subtitle, cellIdentifier);
                //Add in a detail disclosure icon to each cell
                cell.Accessory = UITableViewCellAccessory.DetailDisclosureButton;
            }

            // Configure the cell.
            var sInfo = controller.listIndicator [indexPath.Row];
            cell.TextLabel.Text = String.Format ("{0}",sInfo.DescriptiveName);
            cell.DetailTextLabel.Text = sInfo.ShortName;

            return cell;
        }

        private void InfoAlert (string msg)
        {
            using (UIAlertView av = new UIAlertView("Info", msg, null, "OK", null)) {
                av.Show ();
            }
        }

        public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
        {
            var sInfo = controller.listIndicator [indexPath.Row];

            //controller.DetailVC.DrawChart(sInfo.SecID, sInfo.SecCode);
        }

    }

} 
```

但是，当我单击第二个选项卡时它会崩溃。我收到如下错误

“在执行本机代码时获得了 SIGSEGV”

第一个列表填充正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:35:27.727

我认为 UITableViewController 对象正在被收集并导致您中止。制作 secController 和 secController 成员变量。

```
public partial class RootViewController : UITabBarController
{
    UITableViewController secController;
    UITableViewController IndiController;

    public DetailViewController DetailVC { get; set; }

...

public override void ViewDidLoad ()
{
    base.ViewDidLoad ();
    //Read data from Database..
    secController = new UITableViewController ();
    IndiController = new UITableViewController (); 
```

# android - 资产文件夹是只读的吗？

> ID：10562904
> 
> 赞同：1
> 
> 时间：2012-05-12T10:28:28.873
> 
> 标签：android

如何在资产文件夹中写入文件？是只读的还是写的？如果有任何例子，请分享给我。如何保护资产文件夹？ **或者我们是否创建用户定义的 foder 7 可以访问它以进行浏览，例如 file:///android_assets/www....**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:29:33.257

> 不，您不能在资产文件夹中写入，它是只读的。

[Android中的内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:31:56.723

顾名思义，它使用了一种支持文件。

像 .ttf 文件和所有文件。

它是**只读的**

# java - 字符串加密有效，byte[] 数组类型加密无效

> ID：10562908
> 
> 赞同：5
> 
> 时间：2012-05-12T10:29:51.840
> 
> 标签：java, arrays, encryption, aes

我正在使用以下[LINK](http://www.code2learn.com/2011/06/encryption-and-decryption-of-data-using.html) 进行加密，并使用 Strings 进行了尝试，并且成功了。但是，由于我正在处理图像，因此我需要对字节数组进行加密/解密过程。因此，我将该链接中的代码修改为以下内容：

```
public class AESencrp {

    private static final String ALGO = "AES";
    private static final byte[] keyValue = 
    new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't',
'S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

    public static byte[] encrypt(byte[] Data) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.ENCRYPT_MODE, key);
        byte[] encVal = c.doFinal(Data);
        //String encryptedValue = new BASE64Encoder().encode(encVal);
        return encVal;
    }

    public static byte[] decrypt(byte[] encryptedData) throws Exception {
        Key key = generateKey();
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.DECRYPT_MODE, key);

        byte[] decValue = c.doFinal(encryptedData);
        return decValue;
    }

    private static Key generateKey() throws Exception {
        Key key = new SecretKeySpec(keyValue, ALGO);
        return key;
    } 
```

检查器类是：

```
public class Checker {

    public static void main(String[] args) throws Exception {

        byte[] array = new byte[]{127,-128,0};
        byte[] arrayEnc = AESencrp.encrypt(array);
        byte[] arrayDec = AESencrp.decrypt(arrayEnc);

        System.out.println("Plain Text : " + array);
        System.out.println("Encrypted Text : " + arrayEnc);
        System.out.println("Decrypted Text : " + arrayDec);
    }
} 
```

但是我的输出是：

```
Plain Text : [B@1b10d42
Encrypted Text : [B@dd87b2
Decrypted Text : [B@1f7d134 
```

所以解密后的文本和纯文本是不一样的。知道我尝试了原始链接中的示例并且它与字符串一起使用，我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-12T10:33:11.637

您看到的是数组的 toString() 方法的结果。它不是字节数组的内容。用于`java.util.Arrays.toString(array)`显示数组的内容。

`[B`是类型（字节数组），并且`1b10d42`是数组的 hashCode。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-12T10:32:02.243

> 但是我的输出是：
> 
> ```
> Plain Text : [B@1b10d42
> Encrypted Text : [B@dd87b2
> Decrypted Text : [B@1f7d134 
> ```

那是因为您正在打印调用`toString()`字节数组的结果。除了参考身份的建议之外，这不会向您显示任何有用的信息。

您应该将明文数据与解密的数据逐字节进行比较（您可以使用[`Arrays.equals(byte[], byte[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28byte%5B%5D,%20byte%5B%5D%29)），或者如果您真的想显示内容，请打印出十六进制或 base64 表示。`[Arrays.toString(byte\[\])][2]`会给你*一个*表示，但十六进制可能更容易阅读。第三方库中有大量十六进制格式化类，或者您可以在 Stack Overflow 上找到方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-14T18:30:27.903

我知道为时已晚，但我正在分享我的答案。在这里，我使用了您的代码并进行了一些修改。尝试下面的检查器类来加密和解密字节数组。

检查类：

```
public class Checker {

    public static void main(String[] args) throws Exception {

        byte[] array = "going to encrypt".getBytes();
        byte[] arrayEnc = AESencrp.encrypt(array);
        byte[] arrayDec = AESencrp.decrypt(arrayEnc);

        System.out.println("Plain Text : " + array);
        System.out.println("Encrypted Text : " + arrayEnc);
        System.out.println("Decrypted Text : " + new String(arrayDec));
    }
} 
```

# python - 添加标签：ManyToMany 模型字段的 Django 自定义表单小部件

> ID：10562911
> 
> 赞同：0
> 
> 时间：2012-05-12T10:30:17.113
> 
> 标签：python, django, model, widget, tagging

我目前正在为 Django 创建自己的标记应用程序。

以下是模型：

```
class Tag(models.Model):
    name = models.CharField(max_length=100)

class Book(models.Model):
    title = models.CharField(max_length=100)
    tags = models.ManyToManyField(Tag) 
```

我为我的模型创建了一个表单，`Book`并为`Tag`输入创建了一个小部件：

```
class BookForm(ModelForm):
    class Meta:
        model = Book
        fields = ('title', 'tags')
        widgets = {
            'tags': TagWidget
        }

class TagWidget(Widget):
    """
    Widget for Tag input fields.
    """
    def render(self, name, value, attrs=None):
        final_attrs = self.build_attrs(attrs, name=name)
        final_attrs['class'] = 'tag-input'
        options = []

        # TODO the following tags should be assigned from the model directly
        options.append('tag1');
        options.append('tag2');

        list_element = u'<ul%s>' % flatatt(final_attrs)
        return mark_safe(list_element + '\n<li>' + (u'</li>\n<li>'.join(options)) + '</li>\n</ul>') 
```

## 问题

1.  如何将当前存在的标签添加到选项数组（`options.append(...)`）？
2.  另外，如何改进 html 代码的创建（见最后一行`mark_safe`）？我想将所有 html 代码放在其他地方（最好放在我的模板文件夹中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T11:04:45.553

1.  您可以在小部件的构造函数中传递其他数据。就像是

    ```
    class TagWidget(Widget):
        def __init__(self, initial_tags, *args, **kwargs)
            self.initial_tags = initial_tags
            super(TagWidget, self).__init__(*args, **kwargs)

    # ...

    widgets = {
        'tags': TagWidget(initial_tags=('one', 'two', 'three'))
    } 
    ```

    然后数据将在`self.initial_tags`.

2.  您可以使用[render_to_string](https://docs.djangoproject.com/en/dev/ref/templates/api/#the-render-to-string-shortcut)函数。

# mysql - 从另一个表中选择具有 id 的行

> ID：10562915
> 
> 赞同：52
> 
> 时间：2012-05-12T10:30:39.377
> 
> 标签：mysql, sql, database

我们称这个表为`terms_relation`：

```
+---------+----------+-------------+------------+------------+--+
| term_id | taxonomy | description | created_at | updated_at |  |
+---------+----------+-------------+------------+------------+--+
|       1 | categ    | non         | 3434343434 |   34343433 |  |
|       2 | categ    | non         | 3434343434 | 3434343434 |  |
|       3 | tag      | non         | 3434343434 | 3434343434 |  |
|       4 | tag      | non         | 3434343434 | 3434343434 |  |
+---------+----------+-------------+------------+------------+--+ 
```

这是表`terms`：

```
+----+-------------+-------------+
| id |    name     |    slug     |
+----+-------------+-------------+
|  1 | hello       | hello       |
|  2 | how are you | how-are-you |
|  3 | tutorial    | tutorial    |
|  4 | the end     | the-end     |
+----+-------------+-------------+ 
```

如何选择表中的所有行`terms`以及表`terms_relation`中分类法所在的`terms_relation`表`categ`？我需要两个查询还是可以使用一个`join`语句？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-05-12T10:36:07.343

试试这个（子查询）：

```
SELECT * FROM terms WHERE id IN 
   (SELECT term_id FROM terms_relation WHERE taxonomy = "categ") 
```

或者你可以试试这个（加入）：

```
SELECT t.* FROM terms AS t 
   INNER JOIN terms_relation AS tr 
   ON t.id = tr.term_id AND tr.taxonomy = "categ" 
```

如果要接收两个表中的所有字段：

```
SELECT t.id, t.name, t.slug, tr.description, tr.created_at, tr.updated_at 
  FROM terms AS t 
   INNER JOIN terms_relation AS tr 
   ON t.id = tr.term_id AND tr.taxonomy = "categ" 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-12T10:35:50.373

您可以使用子查询：

```
SELECT *
FROM terms
WHERE id IN (SELECT term_id FROM terms_relation WHERE taxonomy='categ'); 
```

如果您需要显示两个表中的所有列：

```
SELECT t.*, tr.*
FROM terms t, terms_relation tr
WHERE t.id = tr.term_id
AND tr.taxonomy='categ' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-12T10:36:52.477

```
SELECT terms.*
FROM terms JOIN terms_relation ON id=term_id
WHERE taxonomy='categ' 
```

# php - 正则表达式匹配分号，但不在注释或引号中

> ID：10562918
> 
> 赞同：0
> 
> 时间：2012-05-12T10:30:44.423
> 
> 标签：php, javascript, regex

我想使用正则表达式测试来返回所有匹配的分号，但前提是它们在引号（嵌套引号）之外，而不是注释代码。

```
testfunc();
testfunc2("test;test");
testfunc3("test';test");
testfunc4('test";test');
//testfunc5();
/* testfunc6(); */
/*
  testfunc7();
*/
/*
  //testfunc8();
*/
testfunc9("test\"test"); 
```

正则表达式字符串只应返回每个示例末尾的分号。

我一直在玩下面的，但它在示例 testfunc3 和 testfun9 上失败了。它也不会忽略评论...

```
/;(?=(?:(?:[^"']*+["']){2})*+[^"']*+\z)/g 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T17:18:30.140

没有时间将其转换为 JS。这是 Perl 示例中的正则表达式，但该正则表达式可以与 JS 一起使用。

C 注释，双/单字符串引号 - 取自 Jeffrey Friedl 的“strip C comments”，后来由 Fred Curtis 修改，适用于包括 C++ 注释和目标分号（由我）。

捕获组 1（可选），包括分号之前的所有内容，组 2 是分号（但可以是任何内容）。

修饰符是 //xsg。

下面的正则表达式用于替换运算符 s/pattern/replace/xsg （即：替换为 $1[$2] ）。

我认为你的帖子只是想知道这是否可以做到。如果您真的需要，我可以包含一个带注释的正则表达式。

```
$str = <<EOS;
testfunc();
testfunc2("test;test"); 
testfunc3("test';test");
testfunc4('test";test');
//testfunc5();
/* testfunc6(); */
/*
  testfunc7();
*/
/*
  //testfunc8();
*/
testfunc9("test\"test");
EOS

$str =~ s{
     ((?:(?:/\*[^*]*\*+(?:[^/*][^*]*\*+)*/|//(?:[^\\]|\\\n?)*?\n)|(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|.[^/"'\\;]*))*?)(;)
 }
 {$1\[$2\]}xsg;

print $str; 
```

输出

```
testfunc()[;]
testfunc2("test;test")[;]
testfunc3("test';test")[;]
testfunc4('test";test')[;]
//testfunc5();
/* testfunc6(); */
/*
  testfunc7();
*/
/*
  //testfunc8();
*/
testfunc9("test"test")[;] 
```

用评论扩展

```
 (  ## Optional non-greedy, Capture group 1
   (?:
      ## Comments
        (?:
            /\*         ##  Start of /* ... */ comment
            [^*]*\*+    ##  Non-* followed by 1-or-more *'s
            (?:
                [^/*][^*]*\*+
            )*          ##  0-or-more things which don't start with /
                        ##    but do end with '*'
            /           ##  End of /* ... */ comment
          |  
            //          ## Start of // ... comment
            (?:
                [^\\]         ## Any Non-Continuation character ^\
              |               ##   OR
                \\\n?         ## Any Continuation character followed by 0-1 newline \n

             )*?            ## To be done 0-many times, stopping at the first end of comment

             \n         ##  End of // comment
        )

     | ##  OR,  various things which aren't comments, group 2:
        (?:
            " (?: \\. | [^"\\] )* "  ## Double quoted text
          |
            ' (?: \\. | [^'\\] )* '  ## Single quoted text
          |
            .           ##  Any other char
            [^/"'\\;]*  ##  Chars which doesn't start a comment, string, escape
        )               ##  or continuation (escape + newline) AND are NOT semi-colon ;
   )*?
 )
  ## Capture grou 2, the semi-colon
 (;) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T14:09:14.117

这适用于您的所有示例，但这取决于您要应用它的代码与示例的接近程度：

```
;(?!\S|(?:[^;]*\*/)) 
```

`;`- 匹配分号

`(?!`- 负前瞻 - 确保 ->

`\S`- 分号后没有非空白字符

`|(?:[^;]*\*/))`- 如果有空格字符，请确保直到下一个`;`没有`*/`符号

如果您对此有任何问题，请告诉我。

如果这是您想要使用的东西，那么使用正则表达式没有害处，但如果它是您可能想要在以后重用的东西，那么正则表达式可能证明不是最可靠的工具。

**编辑：**

修复第 5 项 - 现在分号将位于第一个匹配组中：

```
^(?:[^/]*)(;)(?!\S|(?:[^;]*\*/)) 
```

# php - 关于从数据库中删除记录的确认

> ID：10562925
> 
> 赞同：0
> 
> 时间：2012-05-12T10:31:43.603
> 
> 标签：php, javascript

我正在使用 php 和 javascript。在向用户确认“是”和“否”后，我想从数据库中删除一条记录。我正在使用谷歌的确认框，但不知道我的代码结构应该是什么。我是编程新手。任何人都可以帮助我吗

如何在 javascript 上添加这个 php 函数

```
function deleteRecord($id)
{
  $sql = "DELETE FROM user_database WHERE user_id = ".$id;
  mysql_query($sql) or die("Can not delete");
} 
```

在页面上

```
<script type="text/javascript">
function show_confirm()
{
var r=confirm("Press a button!");
if (r==true)
  {
  alert("You pressed OK!");
  }
else
  {
  alert("You pressed Cancel!");
  }
}
</script>
</head>
<body>

<input type="button" onclick="show_confirm()" value="Show a confirm box" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T10:37:51.403

您可以使用 javascript 进行简单的是/否确认对话：

```
<a href="job.php?do=delete&id=1" 
          onclick="return confirm('Are you sure to delete this record?');">Delete</a> 
```

如果用户确认，您可以使用您的功能删除记录，否则您的 phpside 不会发生任何事情。

# jquery - 使用 jQuery 查找元素的父级

> ID：10562927
> 
> 赞同：0
> 
> 时间：2012-05-12T10:31:50.997
> 
> 标签：jquery

> **可能重复：**
> [检测最近的或父 div](https://stackoverflow.com/questions/4977776/detecting-closest-or-parent-div)

我需要一些关于使用 jquery 查找元素的帮助。作为主题提示，我需要找到给定元素的容器。我已经有一个类似的代码；

```
$('.cancel_button').bind "click", (event) ->
    element = $(this.parentElement)
    ...
    ... 
```

但这对我来说似乎很丑陋。取消`button`在一个`section`元素中。我想知道是否可以做类似的事情

```
$(this).containerElement('section') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:33:36.987

您可能正在寻找[`parent`](http://api.jquery.com/parent)或[`closest`](http://api.jquery.com/closest)：

```
$(this).parent()

// or

$(this).closest('section') 
```

您甚至可能想要组合它们，因为如果匹配，`closest`将返回*当前元素。*因此，如果您有一个`div`在 a`section`内的 a 在 a 内`div`：

```
<div id="outer">
    <section>
        <div id="inner">....</div>
    </section>
</div> 
```

...并且您想`outer`在事件发生时得到`inner`，它将是：

```
$(this).parent().closest('div'); 
```

但是当你开始的元素与选择器不匹配时，你就不需要它了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T10:35:31.820

```
$(this).parent(); // get parent of current object
$(this).closest('.class'); // get closest parent that have class="class"
$(this).closest('section') // get closest parent that is section element 
```

# mercurial - Intellij 不显示本地 mercurial 存储库视图

> ID：10562932
> 
> 赞同：1
> 
> 时间：2012-05-12T10:32:30.157
> 
> 标签：mercurial, intellij-idea

我有本地 mercurial 存储库的项目。有视图“更改 - > 本地”，我可以在其中提交新更改，但没有视图“更改 - > 存储库”，我可以在其中查看我的提交列表。如果我只有本地 Mercurial 存储库（使用 Intellij Idea），如何查看我的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:14:31.227

不幸的是，在最新的 IntelliJ (11.1.1) 中，对 mercurial 的支持并不完整。如果您想查看本地提交 - 使用控制台或 Tortoise HG 或其他工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:07:39.510

从版本 12 开始，IntelliJ IDEA 中提供了 Mercurial 的存储库视图。[http://www.jetbrains.com/idea/whatsnew/](http://www.jetbrains.com/idea/whatsnew/)

# android - 如何自动测试应用程序在其他活动方面的行为是否符合预期？

> ID：10562935
> 
> 赞同：6
> 
> 时间：2012-05-12T10:33:08.813
> 
> 标签：android, automated-tests, android-activity, robotium

我有一个在通话结束后立即启动活动的应用程序。我想编写一个自动测试，以确保：

*   它实际上启动
*   如果在我的活动被激活后弹出了一些其他活动（例如另一个电话或短信），一旦用户完成了这个新活动，我的活动将再次显示（除非用户单击“主页”按钮或其他东西。

我查看了 Robotium 和 Roboelectric 框架，但如果它完全可行的话，我真的找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T03:53:01.330

我希望您可以通过以下方法实现此目的：

1.  有一个名为 Monkey Runner 的工具及其开源工具可以帮助记录测试用例。您可以使用实际的物理设备来自动化测试用例。
2.  这是一个非常简单的方法，你可以试一试。您可以在活动的所有生命周期中放置日志语句，我的意思是在 onCreate、onStart、onStop、onResume、onRestart、onDestroy.... 这将帮助您了解您的活动是在前台还是后台，或者它是成功启动。您必须检查这些的 logcat 输出。我希望这能帮到您

# html - 滚动条调整页面大小

> ID：10562938
> 
> 赞同：15
> 
> 时间：2012-05-12T10:33:29.653
> 
> 标签：html, css, web, scrollbar

假设我有一个静态网页并且整个页面被包裹，假设在 700px 的宽度内，现在如果页面的内容太长，那么（显然）会出现一个滚动条。但是滚动条的外观将所有内容都向左移动了几个像素（这些像素需要适合页面右侧的滚动条）。我想做的是删除这种“移动”效果，这样如果需要滚动条，这不会以任何方式影响页面的内容。

我不知道我是否说清楚了。

假设这是一个网页：

| ......内容内容............ |
| ......内容内容............ |
| ......内容内容............ |
| ......内容内容............ |
| ......内容内容............ |
| ......内容内容............ |
| ......内容内容............ |

这就是滚动条的外观：

| .....内容内容......... | |
| .....内容内容......... | |
| .....内容内容......... | |
| .....内容内容......... | |
|……内容…………| |
| .....内容内容......... | |
| .....内容内容......... | |

但我想要这样的东西：

| .........内容内容...... | |
| .........内容内容...... | |
| .........内容内容...... | |
| .........内容内容...... | |
| .........内容内容...... | |
| .........内容内容...... | |
| .........内容内容...... | |

点代表空白，内容代表网页内容，右边的列代表滚动条。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-12T10:40:16.320

您可以`overflow-y: scroll`为您的身体设置规则。这将始终显示一个禁用的垂直滚动条，除非内容足够长可以滚动。这样，当内容足够长以至于您可以实际滚动并且不需要脚本来完成这项工作时，内容就不会向左移动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T11:04:05.603

如果你**根本不需要滚动条**，你可以使用这个：

```
body {
    overflow-y: hidden;
} 
```

**UPD。**因此，如果您需要滚动条来滚动内容，但又想隐藏它，可以使用[以下方法（dabblet.com 上的演示）](http://dabblet.com/gist/2665963)：

CSS：

```
body {
    overflow: hidden;
}

#fake_body {
    position: absolute;
    left: 0;
    top: 0;
    right: -32px;
    bottom: 0;
    overflow-y: scroll;
} 
```

html:

```
<div id="fake_body">
    <ul>
        <li>content content content #01</li>
        <li>content content content #02</li>
        <li>content content content #03</li>
        …
        <li>content content content #55</li>
    </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-03T20:18:02.393

根据 [MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow)，以下内容在浏览器中不受很好的支持，但是我认为您可能会觉得它很有趣。

```
overflow-y: overlay; 
```

在支持该属性的浏览器（例如 Google Chrome）中，这会将滚动条放在您的内容之上，而不是在需要滚动条时将您的内容转移。然后，您可以添加足够数量的填充，以便您的内容永远不会被它覆盖。

似乎这个属性并不流行，甚至现在支持它的浏览器也计划放弃对它的支持。我不明白为什么，因为它肯定有它的用途。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T13:30:09.783

我有同样的问题，只有使用 JS/jQuery 的解决方案对我来说已经足够好了。

我使用链接来[检测页面是否有垂直滚动条？](https://stackoverflow.com/questions/2146874/detect-if-a-page-has-a-vertical-scrollbar)之前和那些链接提供：[http://davidwalsh.name/detect-scrollbar-width](http://davidwalsh.name/detect-scrollbar-width)，[http://api.jquery.com/css/#css2](http://api.jquery.com/css/#css2)，[居中位置：固定元素](https://stackoverflow.com/questions/2005954/margin-to-center-with-position-fixed)用于生成以下代码。

CSS：

```
body {
    position: absolute;
    left: 50%;
    margin-left: -400px;
    width: 800px;
    height: 100%;
}

.scrollbar-measure {
    width: 100px;
    height: 100px;
    overflow: scroll;
    position: absolute;
    top: -9999px;
} 
```

JS：

```
$(document).ready(function() {
    // Check if body height is higher than window height :)
    if ($(document).height() > $(window).height()) {

        // Create the measurement node
        var scrollDiv = document.createElement("div");
        scrollDiv.className = "scrollbar-measure";
        document.body.appendChild(scrollDiv);
        // Get the scroll bar width
        var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
        // Delete the DIV
        document.body.removeChild(scrollDiv);

        // Change margin-left parameter for #container for preventing shift caused by scroll bar
        var current_margin_left_px = $("#container").offset().left;
        var current_margin_left = parseInt(current_margin_left_px, 10);
        var changed_margin_left = current_margin_left + scrollbarWidth/2 + "px";
        $("#container").css("margin-left", changed_margin_left);
    }
}); 
```

在灵活的身体宽度的情况下，必须添加更多代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-12T10:38:27.843

您可以检查屏幕是否有滚动条。如果为真，则您可以将内容保留在右侧，也许此链接将对您有所帮助：[检测页面是否具有垂直滚动条？](https://stackoverflow.com/questions/2146874/detect-if-a-page-has-a-vertical-scrollbar)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-03T02:17:00.577

```
overflow-x: hidden; 
```

在正文 CSS 代码中，**帮助很大！** *该死*的，我花了 45 分钟来浏览一个简单的答案。

什么地方出了错？...我有一个悬停=显示图像的事情。我正确调整了所有图像的大小；当我刷新页面时，滚动条有很大的播放空间！.....所以我在每个 div 标签中都放了一个 overflow-x（每个 div 标签分配给单个列表项），但什么也没发生！解决方案：代码是正确的，但需要放置在body标签本身中。不是单独的 div 标签。该死……谢谢z

# regex - 使用正则表达式拆分复杂的字符串

> ID：10562941
> 
> 赞同：2
> 
> 时间：2012-05-12T10:33:44.317
> 
> 标签：regex, string, split

我正在尝试以一种相当具体的方式拆分字符串。我一直在鬼混使用`.split()`and`.replaceall()`方法，但我做错了。

以下是我需要拆分的几个字符串示例，然后是拆分后的字符串。A`,`表示数组中的新字符串。

示例 1：`"(and (or (can-hit-robot) (wall) ) (can-hit-robot) (wall) ) )"`

```
"(and", "(or", "(can-hit-robot)", "(wall)", ")", "(can-hit-robot)", "(wall)", ")" 
```

示例 2：`"(seq (shoot) (if (can-hit-robot) (shoot) (move) ) )"`

```
"(seq", "(shoot)", "(if", "(can-hit-robot)", "(shoot)", "(move)", ")", ")" 
```

示例 3： `"(while(wall)(if (can-hit-robot)(shoot)(move)))"`

```
"(while", "(wall)", "(if", "(can-hit-robot)", "(shoot)", "(move)", ")", ")" 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:40:15.243

这个怎么样？

```
(?:\s*(?=\())|(?:(?<=\))\s*) 
```

但是它依赖于lookbehind，所以没有lookbehind的引擎可能无法处理这个表达式。:(

所表达的规则是，在左括号之前和右括号之后拆分，同时切断括号外部的任何空格。因此，交替的左侧部分匹配通向开口括号的空格；右侧部分将匹配结束括号后继续的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T10:46:05.353

没有后向断言：您可以拆分

```
\s*(?=\(|\B\)) 
```

这会在左括号或右括号（包括空格）之前拆分，但前提是我们不在右括号之前的单词边界处。

输入：`(and (or (can-hit-robot) (wall) ) (can-hit-robot) (wall) ) )`

输出：

```
(and 
(or 
(can-hit-robot) 
(wall) 
) 
(can-hit-robot) 
(wall) 
) 
) 
```

输入：`(while(wall)(if (can-hit-robot)(shoot)(move)))`

输出：

```
(while
(wall)
(if 
(can-hit-robot)
(shoot)
(move)
)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:46:18.617

你显然在那里有语法。不要用正则表达式解析它，使用真正的解析器。

建议：

*   [ANTLR](http://www.antlr.org/)（声明性）
*   [JParseC](http://jparsec.codehaus.org/)（程序化）

或者，也许您应该首先阅读有关[Parsing](http://en.wikipedia.org/wiki/Parsing)的内容。

否则，[邪神在召唤](https://stackoverflow.com/a/1732454/342852 "即使您不是在处理 XML")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T10:47:09.463

并不是你真正想要的，但我认为你最好编写一个合适的解析器。我想你想以某种方式评估这个表达式？然后，您可以将输入解析为树，这将使您的评估更加容易。

以第一个例子为例，`(and (or (can-hit-robot) (wall) ) (can-hit-robot) (wall) ) )`递归下降解析器将读取`and`，然后找到新的子表达式 ( `(or (can-hit-robot) (wall) ) (can-hit-robot) (wall) )`)，开始`and`( ) 的新子表达式`(or (can-hit-robot) (wall) )`，依此类推。

# html - 当验证错误消息未在 ASP 页中触发时隐藏不必要的空间

> ID：10562943
> 
> 赞同：24
> 
> 时间：2012-05-12T10:34:00.047
> 
> 标签：html, css, asp.net, requiredfieldvalidator

我想使用 ASP 必填字段验证来验证 ASP.NET 页面中的一些文本框。我想在页面顶部显示该错误消息。

```
<table>
    <tr><td colspan='2'><b> User Input</b><br/></td></tr>
    <tr><td colspan='2'>
            <%--input validations--%>
            <asp:RegularExpressionValidator ID="regexpName1" runat="server"     
                ErrorMessage="This expression does not validate." 
                ControlToValidate="TextBox_adTitle"     
                ValidationExpression="^[a-zA-Z'.\s]{1,40}$" />
            <br />
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                ControlToValidate="TextBox_1" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
        <br />
        </td>
    </tr>
    <tr><td>
        <asp:Label ID="Label_name" runat="server" Text="Seller Name * "></asp:Label>
        </td>
        <td>
             <asp:TextBox ID="TextBox_1" runat="server" ReadOnly="True" ></asp:TextBox>        
        </td>
    </tr>

... 
```

这工作正常。但是，即使没有显示错误消息，表格的第一行也会保留其空间。这将导致 UI 在页面上看起来很糟糕，因为页面加载时存在不必要的空间。

如何在页面加载时以及没有验证错误时隐藏第一行的空间（验证的错误消息行）？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-12T11:22:39.677

你需要设置

```
Display="Dynamic" 
```

属性给您的验证器，这将导致理想的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-05T19:33:57.383

在字段验证器中添加以下属性：

```
display="dynamic" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T08:10:56.077

我找到了解决这个问题的好方法。

将您的验证放在面板中，并使其显示为“无”。

```
 <asp:Panel ID="Panel1" runat="server" >
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
            ErrorMessage="RequiredFieldValidator1" ControlToValidate="TextBox1" Display="None"></asp:RequiredFieldValidator><br />
        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
            ErrorMessage="RequiredFieldValidator2" ControlToValidate="TextBox2" Display="None"></asp:RequiredFieldValidator><br />
</asp:Panel> 
```

并在您的 ASP 页面顶部添加一个验证摘要。

```
<table>
        <tr>
        <td> <asp:ValidationSummary id="summery1" runat="server"/></td>
        </tr>
    .... 
```

验证摘要仅在页面中获得所需的空间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-03T07:25:01.307

只需添加属性。

> 显示="动态"

在您的验证器中，示例如下。

```
<asp:RequiredFieldValidator ID="rfvEmail" runat="server" Display="Dynamic" ForeColor="Red" ErrorMessage="Please enter Email" ControlToValidate="txtEmail" ValidationGroup="addManufacture"></asp:RequiredFieldValidator> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-18T11:07:18.637

简单的解决方案。将此添加到验证器：

```
CssClass="AT3RValidator"

.AT3RValidator {
    display:none;
} 
```

并设置为 display="Dynamic"，但这仍然会呈现空白空间，因为这会将可见性：隐藏样式设置为生成的验证器跨度，这与 display:none 不同，它会呈现不需要的空白空间。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-08T09:57:49.437

要隐藏验证器，请执行此操作

```
<tr>
    <td>TEXT</td>
</tr>
<tr>
    <td>INPUT
    <br/>
    <asp:validator....></>
    </td>
</tr> 
```

或者

```
<tr>
    <td>TEXT</td>
</tr>
<tr>
    <td>INPUT
    <div>
        <asp:validator....></>
    </div>
    </td>
</tr> 
```

# python - 如何使用 python-poppler-qt4 显示 PDF？

> ID：10562945
> 
> 赞同：2
> 
> 时间：2012-05-12T10:34:09.700
> 
> 标签：python, pdf, qt4, poppler

我已经下载并安装了[python-poppler-qt4](http://code.google.com/p/python-poppler-qt4/)，现在我正在尝试一个简单的 Qt 应用程序来显示 PDF 页面。我遵循了我从网上获得的信息，即将 PDF 转换为 QImage，然后转换为 QPixMap，但它不起作用（我得到的只是一个没有可见内容的小窗口）。

我可能在某些时候失败了（`QImage.width()`返回我输入的宽度，`QPixMap.width()`返回 0）。

这是代码：

```
#!/usr/bin/env python

import sys
from PyQt4 import QtGui, QtCore
import popplerqt4

class Application(QtGui.QApplication):
    def __init__(self):
        QtGui.QApplication.__init__(self, sys.argv)     
        self.main = MainWindow()
        self.main.show()

    class MainWindow(QtGui.QFrame):
        def __init__(self, parent=None):
            QtGui.QWidget.__init__(self, parent)
            self.layout = QtGui.QVBoxLayout()
            self.doc = popplerqt4.Poppler.Document.load('/home/benjamin/test.pdf')
            self.page = self.doc.page(1)
# here below i entered almost random dpi, position and size, just to test really 
            self.image = self.page.renderToImage(150, 150, 0, 0, 210, 297)
            self.pixmap = QtGui.QPixmap()
            self.pixmap.fromImage(self.image)
            self.label = QtGui.QLabel(self)
                    self.label.setPixmap(self.pixmap)
            self.layout.addWidget(self.label)
            self.setLayout(self.layout)

    if __name__ == "__main__":
            application = Application()
            sys.exit(application.exec_()) 
```

这里哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T10:38:09.933

我不熟悉 python，所以这可能不直接适用，而是[`QPixmap::fromImage`](http://doc.qt.io/qt-4.8/qpixmap.html#fromImage)一个返回`QPixmap`. 所以你的代码应该是这样的：

```
 self.pixmap = QtGui.QPixmap.fromImage(self.image) 
```

换句话说，`self.pixmap.fromImage`不会改变`self.pixmap`，它会返回一个新的像素图，该像素图是根据您作为参数提供的图像生成的。

# windows - 如何在 Windows 8 Metro 应用程序中使用本机 pdf 阅读器？

> ID：10562946
> 
> 赞同：2
> 
> 时间：2012-05-12T10:34:13.647
> 
> 标签：windows, pdf, windows-runtime

我想在 Windows 8（消费者预览版）中使用本机 pdf 阅读器制作一个 pdfreader。我找到了一个 dll (Microsoft.LightSwitch.Design.Extensions.Reader) 这是我可以使用的 dll 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T03:53:01.640

pdf 库不太可能以任何方式公开。MSDN论坛上的一个[较早的问题](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/6f27a046-842e-4c46-aee0-e4c83cf4faf2)建议打开一个带有与之关联的默认程序的pdf文件，如下所示：

```
Windows.Storage.StorageFile file =
    await Windows.ApplicationModel.
        Package.Current.InstalledLocation
            .GetFileAsync(@"Images\test.pdf");
Windows.System.Launcher.LaunchDefaultProgramForFile(file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:01:14.827

Microsoft.LightSwitch.Design.Extensions.Reader 不是原生的，它是一个 WinRT 库，它的 PE 标头揭示了它的真实身份。

您可以使用适用于 Windows 8 的免费软件 PDF 阅读器或其 DLL 进行开发。

[http://www.pdfeight.com](http://www.pdfeight.com)

# javascript - mousemove 和跨浏览器 e.which

> ID：10562950
> 
> 赞同：1
> 
> 时间：2012-05-12T10:35:15.533
> 
> 标签：javascript, events, cross-browser, mousemove

我需要知道在每个 mousemove 事件上按下了哪个鼠标键，我尝试使用它：

```
    获取鼠标代码：函数（e）{
        e = e || 窗口.事件；
        if (!e.which && e.button) {
            if (e.button & 1) e.which = 1;
            else if (e.button & 4) e.which = 2;
            else if (e.button & 2) e.which = 3;
        };
        返回 e.which；
    },

```

但这仅适用于 chrome 和 IE7-8。IE9 调试器总是说 e.button == 0 和 e.which == 1。经过一些调试后，我发现 IE9 的 window.event 包含其中的正确值，所以我交换了

```
e = 窗口事件 || e;

```

这也适用于 Safari 和 Air，但 Firefox 的 window.event 未定义，而 Opera 在回调参数和 window.event 对象中具有相同的错误值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:32:26.437

在调查相关问题时，我正在查看这个问题。原来我的问题是我需要使用单独的函数来处理`onclick`和`onmouseover`事件。

我发现在使用 Opera、Safari 和 FireFox 时，当没有单击鼠标按钮时，mousemove 事件对象的“which”属性设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:26:58.837

虽然这个答案可能有点晚了，但我相信它会对未来的人有所帮助。我在搜索这个跨浏览器功能时偶然发现了这个问题，最初忽略了它。我回来为那些追随我的人提供答案。

首先，一些知识。我发现这个网站很有帮助，因为所有跨浏览器问题（大多数）都已解决，并为您提供娱乐（当我们开发人员需要创建图表来了解浏览器的工作方式时，我会笑..）

[http://unixpapa.com/js/mouse.html](http://unixpapa.com/js/mouse.html)

在此页面的底部附近，您会找到一个蓝色链接，上面写着“使用各种鼠标按钮单击此处进行测试”，在此上方您将看到一个代码片段。这将进入您的 mousedown 或 mouseup。如果您右键单击并查看此位置的源代码，您会发现一个包含 2 个函数的脚本标签，即此链接上方的一个函数，以及一个“不”函数，该函数可防止事件执行默认或失败，尽管不是在所有情况下都需要，了解一下很有用。

第二条知识来自另一个网站，它为我们提供了一些关于如何捕获鼠标滚轮向上和向下事件的见解。

[http://www.javascriptkit.com/javatutors/onmousewheel.shtml](http://www.javascriptkit.com/javatutors/onmousewheel.shtml)

把这一切放在一个地方，我们基本上有以下..

```
function GetMouseButton(e) {
    // Normalize event variable
    var e = window.event || e;
    // Set button to initially not recognized (or false if you need to to be)
    var button = 'Not Recognized';

    // Check if this is a button push event
    if(e.type == 'mousedown' || e.type == 'mouseup') {
        if (e.which == null) {
            // Check if IE, if so, what e.button was pressed
            button = (e.button < 2) ? "Left" :
                ((e.button == 4) ? "Middle" : "Right");
        } else {
            // All other browsers, what e.which was pressed
            button = (e.which < 2) ? "Left" :
                ((e.which == 2) ? "Middle" : "Right");
        }
    } else {
        // If this is not a button push event, then we get the direction
        var direction = e.detail ? e.detail * (-120) : e.wheelDelta;
        // And name the direction as a 'button'
        switch(direction) {
            case 120: // Browsers use different variants of these
            case 240: 
            case 360: 
                button = "Middle Scroll Up";
            break;
            case -120:
            case -240:
            case -360:
                button = "Middle Scroll Down";
            break;
        }
    }

    alert(button);
}

/* Simple Bind function (like jQuery's for example) */
function Bind(elem, type, eventHandle) {
    if (elem == null || elem == undefined) return;
    if ( elem.addEventListener ) {
        elem.addEventListener( type, eventHandle, false );
    } else if ( elem.attachEvent ) {
        elem.attachEvent( "on" + type, eventHandle );
    } else {
        elem["on"+type]=eventHandle;
    }
}

/* Bind your mousedown / mouseup to the window, as well as the mousewheel */
Bind(window, 'mousedown', GetMouseButton);
Bind(window, 'mouseup', GetMouseButton);

/* One of FireFox's browser versions doesn't recognize mousewheel,
 * we account for that in this line
 */
var MouseWheelEvent = 
(/Firefox/i.test(navigator.userAgent))? "DOMMouseScroll" : "mousewheel";

Bind(window, MouseWheelEvent, GetMouseButton); 
```

***为了节省您一些时间 [和知识，如果您不想查看这些链接]，您可以在以下 jsfiddle 中查看一个工作示例：***

[http://jsfiddle.net/BNefn/](http://jsfiddle.net/BNefn/)

**编辑** 我还应该说，由于您需要在每个 mousemove 事件上都知道这一点，您可以简单地存储生成的按钮“名称”和事件类型（向下或向上），然后在 mousemove 事件期间调用变量信息。如果这些“按钮”中的每一个都有一个变量，那么您可以查看哪个按钮被按下，哪个按钮没有被按下，并清除在 mouseup 上按下的变量。

# android - 从服务器检索图像的可能方法

> ID：10562953
> 
> 赞同：2
> 
> 时间：2012-05-12T10:35:39.117
> 
> 标签：android, web-services, android-layout, base64, android-imageview

我正在开发一个应用程序，它应该从我的服务器获取关于 ID 号的数据，并且我还需要根据 ID 号从数据库中获取图像。所以我选择了加载 url 图片的选项。在那里我无法获得大尺寸的图像。所以我去将图像转换为base64格式并通过webservice发送。即使我能够检索小尺寸的字符串，但是当我使用大尺寸的图像时，base64 字符串更大。所以寻找可能的答案，任何方式提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:44:36.467

通过 HTTP 连接以二进制形式发送照片是一个已解决的问题。我建议您使用现成的 Web 服务器并收工。要发送缩小尺寸的图像，请安装一个脚本（以响应表示需要缩略图的 URL）将检查缩略图；如果它们不存在，则创建它们；然后以标准方式用作图像。不要担心 base64，除非您正在处理不理解纯二进制文件的非常古老的服务。如果您确实走 base64 的路线，请不要担心文件大小的扩展。除非您发送大量图像，否则它并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:49:05.843

我遇到了这个问题，不得不使用 ftp 服务器。我将图像文件放入 ft​​p 服务器并下载我需要的每个文件。

# ruby-on-rails - 无法使用 Gmaps4Rails 进行部分渲染

> ID：10562961
> 
> 赞同：0
> 
> 时间：2012-05-12T10:36:44.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, gmaps4rails

我有一张地图，上面有基于美国状态的标记。每个州有 n 个城市。

我有一个状态模型、控制器和城市模型、控制器。

当我单击州的标记时，我希望城市列表显示在信息窗口中。

所有这些信息都出现在主页上。

这是我到目前为止所做的：-

home_controller.rb

```
def index
    @states = State.all.to_gmaps4rails do |state,marker|
        marker.infowindow render_to_string(:partial => "/states/gmaps4rails_infowindow", :locals => {:object => state})
        marker.json({:id => state.id})
    end
end 
```

主页/index.html.haml

```
=gmaps({"map_options" =>{ "auto_zoom" => false, "zoom" => 3}, "markers" => { "data" => @states } }) 
```

state_controller.rb

```
def gmaps4rails_infowindow
  @state = Gmaps.map.markers
end 
```

状态/_gmaps4rails_infowindow.html.haml

```
=@state.cities.each do |city|
    =city.name 
```

不用说它不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:42:42.143

嗯，你`home_controller.rb`的很好。你在这里写你想使用一个局部变量名为`object`.

在部分本身中，您编写：

```
=@state.cities.each do |city|
  =city.name 
```

实例变量没有在那里定义，你在上面定义了一个局部变量。

用。。。来代替：

```
=object.cities.each do |city|
  =city.name 
```

从那里它应该工作。

* * *

注意：

```
def gmaps4rails_infowindow
  @state = Gmaps.map.markers 
end 
```

是：

*   没用：你在控制器中定义信息窗口

*   错误：`Gmaps.map.markers`仅作为 js 变量存在

# collectionviewsource - 绑定到 Collection 时 ，如何使每个视图项绑定到 T 的包装器对象

> ID：10562963
> 
> 赞同：-2
> 
> 时间：2012-05-12T10:36:59.817
> 
> 标签：collectionviewsource

我有一个集合 (IList) 绑定到 ListView，现在，默认情况下 Foo 绑定到列表视图中的项目，但我想将 (Foo) = Goo 的包装器绑定到每个列表视图项目。

IList 从返回 Foo 项的虚拟化列表的系统 API 返回，但在我的列表视图项中，我想绑定自定义对象，它是 Foo=Goo 的包装器。一种解决方案是从 Foo 列表中创建 Goo 列表，不幸的是，在这种情况下这是不可能的，在这种情况下可以使用任何转换器方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:31:00.890

尝试使用继承，例如 Foo 是基类，而 Goo 是扩展 Foo 的子类。

# c# - 如何使用 PRISM 将引用从一个类调用到另一个类

> ID：10562964
> 
> 赞同：0
> 
> 时间：2012-05-12T10:37:19.120
> 
> 标签：c#, wpf, prism

我只是坚持将引用从一个类调用到另一个类，但是两个类都在同一个解决方案中的不同项目中。

这是我想要做的。

项目 A (Webster.Client.Modules.Metadata) 类名：Helper.cs

项目 B (Webster.Client.Infrastructure)

类名：ImageResizerService.cs

接口：IImageResizerService.cs 我试图在 ImageResizerService 类中使用辅助类。

当我尝试添加项目引用时，它会抛出“无法添加对 Webster.Client.Modules.Metadata 的引用。将此项目添加为引用会导致循环依赖”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T11:06:59.320

尝试[MSDN 解决方案](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/43645215-9d09-4435-961e-2255a4c19d85/)。棱镜不是你的问题。

还是[这样回答](https://stackoverflow.com/questions/7093908/cannot-add-reference-to-project-because-of-a-circular-dependency-error)。可能是你的问题是重复的。

# android - Android将我所有的画布绘图放到另一个类中？

> ID：10562965
> 
> 赞同：0
> 
> 时间：2012-05-12T10:37:20.790
> 
> 标签：android

我正在研究 android 和 canvas 的艺术，我已经启动并运行了所有东西，还有一个我正在做的小项目！我为画布循环创建了一个框架来显示动画，我在画布上绘制的部分如下；

```
// DRAW TO THE CANVAS
@Override
public void onDraw(Canvas canvas) {
    // CLEAR CANVAS
    canvas.drawColor(Color.YELLOW);
    androidMan.draw(canvas);
            circle.draw(canvas);
            square.draw(canvas);
} 
```

所有 3 个对象都出现了，一切正常。由于我对 java 和 android 都是新手，所以如果可能的话，我想将这 3 个 draw 语句放入一个单独的类中，这样我就可以`onDraw`看起来像这样，

```
// DRAW TO THE CANVAS
@Override
public void onDraw(Canvas canvas) {
    // CLEAR CANVAS
    canvas.drawColor(Color.YELLOW);
    renderCanvas();
} 
```

在渲染画布中类似于

```
androidMan.draw(canvas);
            circle.draw(canvas);
            square.draw(canvas); 
```

但是当我这样做时它不起作用并且应用程序无法在我的手机上加载，即使问题很愚蠢也谢谢！如果可能的话我想`renderCanvas`成为它自己的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:21:10.647

首先，更改方法 renderCanvas 的签名

```
renderCanvas(Canvas canvas) 
```

并称它为

```
renderCanvas(canvas); 
```

农学 onDraw。

# c - OpenMP 根据运行时参数设置固定大小的块

> ID：10562966
> 
> 赞同：1
> 
> 时间：2012-05-12T10:37:44.780
> 
> 标签：c, openmp

假设我有一个包含 n 个元素和 n_threads 的向量。我想使用`#pragma omp parallel`这样的方式，每个线程接收 n / n_threads 块大小，最后一个取决于具体情况。

```
#include <stdio.h>
#include <omp.h>

int main()
{

    int *v = malloc ( n * sizeof(int) );

    #pragma omp parallel for (what should i put here?)
    for(i = 0; i < n; ++i)
    {
        ++v[i];
    }
    return 0;
} 
```

例如：n = 10003，n_threads = 4

*   thread_0 应该得到 2500 个块
*   thread_1 应该得到 2500 个块
*   thread_2 应该得到 2500 个块
*   thread_3 应该得到 2503 个块

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T13:15:10.997

简而言之 - 你不能那样做。您所能做的就是在`schedule(static)`不指定块大小的情况下指定子句，OpenMP 运行时会将迭代计数划分为大致相同大小的块。具体怎么做取决于实施。这就是 OpenMP 标准对静态调度的描述：

> 当指定 schedule(static, chunk_size) 时，迭代被分成大小为 chunk_size 的块，并且这些块按照线程号的顺序以循环方式分配给团队中的线程。
> 
> 当没有指定chunk_size时，迭代空间被分成大小近似相等的chunk，每个线程最多分配一个chunk。请注意，在这种情况下，未指定块的大小。

对于 n = 10003 和 n_threads = 4，您可以指定块大小为 2500，迭代空间将被划分为大小为 2500、2500、2500、2500 和 3 的块，它们将被分配到线程 0、1、2、3和 0。因此线程 0 将获得 2503 次迭代，但它们在迭代空间中不会是连续的。如果您不指定块大小，则由实现决定向哪个线程提供额外的迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-30T22:24:53.730

据我所知，OpenMP 不能保证确切的块大小，但自己计算它们并不难。这是一些示例代码：

```
#include <stdio.h>
#include <omp.h>

int main(void) {

  int n = 10003;
  int n_threads = 4;
  int chunk_size = n / n_threads;

  #pragma omp parallel num_threads(n_threads)
  {
    int id = omp_get_thread_num();
    int b = id * chunk_size;
    int e = id == n_threads - 1 ? n : b + chunk_size;
    printf("thread %d: %d items\n", id, e - b);
    for (int i = b; i < e; i++) {
      // process item i
    }
  }

  return 0;
} 
```

样本输出：

```
thread 0: 2500 items
thread 1: 2500 items
thread 3: 2503 items
thread 2: 2500 items 
```

**请注意：** “每个线程获取 n / n_threads 个项目，最后一个项目”的策略对于您提供的数字来说很好，但在其他情况下可能会导致工作共享效率非常低。例如，对于 60 个项目和 16 个线程，此公式将为所有线程提供 3 个项目 - 除了最后一个，它将获得 15 个项目。如果处理每个项目的时间大致相同，这意味着整个过程所需的时间大约是必要时间的四倍，并且大多数 CPU 内核大部分时间都处于空闲状态。我认为只有在有充分理由需要以这种方式分配工作时才应使用此公式。否则，OpenMP 选择的块大小可能会更好。

# oracle-adf - 当用户更改页面上的任何值（文本框/LOV）时显示自定义弹出警告消息

> ID：10562970
> 
> 赞同：0
> 
> 时间：2012-05-12T10:38:04.130
> 
> 标签：oracle-adf, adfs2.0, adfs

当用户更改页面上的任何值（文本框/LOV）并错误地关闭选项卡/取消按钮时，我需要显示自定义弹出警告消息。

我尝试过的选项是：

a) 在应用程序中，我们为 7 个不同的场景使用复杂的任务流/RegionModel。还要求显示自定义消息 - 因此无法使用“未保存数据警告”方法

[http://www.oracle.com/technetwork/developer-tools/adf/unsaveddatawarning-100139.html](http://www.oracle.com/technetwork/developer-tools/adf/unsaveddatawarning-100139.html)

b）我尝试的第二个选项是自定义区域控制器：CustomRegionController implements RegionController

在 validateRegion(RegionContext regionContext) 内部想查找页面数据是否脏

```
 AdfFacesContext.getCurrentInstance().getDirtyPageHandler().isDataDirty(); 
```

或者

```
 DCBindingContainer dcBindings = (DCBindingContainer)BindingContext.getCurrent().getCurrentBindingsEntry();
    DCDataControl cDataControl = dcBindings.getDataControl();
    boolean dirtyFlag = cDataControl.isTransactionModified(); 
```

在这两种情况下，它始终为真（似乎是由于在页面加载时呈现数据时，一组常见的 VO/View Link 应用程序模块总是变脏）。

我剩下的最后一个选项是为每个元素（textbaox、LOV、复选框）调用 valueChangeListener。我根本不喜欢这个选项。请建议是否有更好的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:45:21.487

为什么使用值更改侦听器会出现问题？让每个输入组件在支持 bean 中调用相同的 VCL 方法。如有必要，您可以从 vcl 事件对象中获取组件 ID。

# f# - TypeProviders 和 [ ] 类型未定义

> ID：10562977
> 
> 赞同：2
> 
> 时间：2012-05-12T10:39:00.337
> 
> 标签：f#, type-providers

[我正在使用来自http://blogs.msdn.com/b/dsyme/archive/2011/10/05/demo-scripts-from-the-f-3-0-build-talk](http://blogs.msdn.com/b/dsyme/archive/2011/10/05/demo-scripts-from-the-f-3-0-build-talk.aspx)的 DemoScripts 与类型提供程序一起玩[.aspx](http://blogs.msdn.com/b/dsyme/archive/2011/10/05/demo-scripts-from-the-f-3-0-build-talk.aspx)，我收到的消息对我来说真的很奇怪。

“生成”类型未定义 BLABLA\Demo\MonsterMovieHouse\Library1\Netflix.fs 18 11 DataAndAnalysis

谷歌没有帮助，据我设法得到一些逻辑解释，这是视觉工作室 11 测试版，也许这就是问题所在。我引用了 typroviders，这里是 Visual Studio 窗口的链接以获取详细信息。

![在此处输入图像描述](../Images/9c2772ddd7e720ee4820e7753171ae2f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T19:47:43.600

如前所述[，](http://blogs.msdn.com/b/fsharpteam/archive/2012/02/29/introducing-visual-f-3-0-beta.aspx)在 Beta 中，该`Generate`属性已被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T11:07:16.750

您缺少此参考：

```
System.Data.Services.Client.dll 
```

# sql - 如何按列显示数据

> ID：10562983
> 
> 赞同：0
> 
> 时间：2012-05-12T10:39:29.177
> 
> 标签：sql, sql-server, sql-server-2000

如何按列显示日期

表格1

```
ID Date Value

001 01/01/2012 100
001 02/01/2012 200
...
...
001 31/01/2012 250
002 01/01/2012 050
002 02/01/2012 100
...
002 31/01/2012 075
.... 
```

我想按 id riw 按日期按行组显示值行

预期产出

```
ID 01/01/2012 02/01/2012 ... 31/01/2012

001  100 200 .... 250
002  050 100 .... 075
..... 
```

如何使用 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:04:45.577

尝试这个

```
DECLARE @cols NVARCHAR(2000)
DECLARE @query NVARCHAR(4000)

SELECT  @cols = STUFF(( SELECT DISTINCT 
                                '],[' + `Date`
                        FROM    Table1
                        ORDER BY '],[' + `Date` FOR XML PATH('')
                      ), 1, 2, '') + ']';

SET @query = N'SELECT ID, '+
@cols +'
FROM
(SELECT  ID
FROM    Table1
PIVOT
(
SUM([`Value`])
FOR `Date` IN
( '+
@cols +' )
) AS pvt
ORDER BY ID;'

EXECUTE(@query) 
```

SQL2000版

```
DECLARE @date Date,@sql nvarchar(MAX)
DECLARE date_cursor CURSOR
  FOR SELECT DISTINCT [Date] FROM table_one ORDER BY [Date]
  SET @sql = ''
  OPEN date_cursor
  FETCH NEXT FROM date_cursor INTO @date
  WHILE @@FETCH_STATUS = 0
     BEGIN
         SET @sql = @sql+ ',MAX(CASE CONVERT(nvarchar(10),[Date],103) WHEN '''+CONVERT(nvarchar(10),@date,103)+''' THEN [Value] END) AS ['+CONVERT(nvarchar(10),@date,103)+']'
         FETCH NEXT FROM date_cursor INTO @date
     END 
CLOSE date_cursor
DEALLOCATE date_cursor

EXEC('SELECT ID'+@sql+' FROM table_one GROUP BY ID') 
```

或者

```
DECLARE @loop int,@date Date,@sql nvarchar(4000)
DECLARE @TempTable TABLE
(
  [Date] DATE
)
INSERT INTO @TempTable SELECT DISTINCT [Date] FROM table1 ORDER BY [Date]
  SET @sql = ''
  SET @loop = 1
  WHILE (@loop<=31)
    BEGIN
        IF EXISTS(SELECT * FROM @TempTable WHERE DAY([Date])=@loop) 
        BEGIN
            SET @date = (SELECT [Date] FROM @TempTable WHERE DAY([Date])=@loop)
            SET @sql = @sql+ ',MAX(CASE CONVERT(nvarchar(10),[Date],103) WHEN '''+CONVERT(nvarchar(10),@date,103)+''' THEN [Value] END) AS [DATE'+CONVERT(nvarchar(2),@loop)+']'
         END
         ELSE
            SET @sql = @sql+ ', NULL AS [DATE'+CONVERT(nvarchar(2),@loop)+']'
         SET @loop = @loop+1
    END 

EXEC('SELECT ID'+@sql+' FROM table1 GROUP BY ID') 
```

# android - html css 设计文本框中的问题已禁用？

> ID：10562984
> 
> 赞同：0
> 
> 时间：2012-05-12T10:39:35.733
> 
> 标签：android, html, css, cordova

我在 android phoneGap 中开发了一个应用程序。我使用 html css 来设计目的，它工作正常。但是当我在文本框中输入时，我的设计正在崩溃。我附上了我的表单。请仔细检查并清除我的问题。

![这是设计](../Images/6f9e2b31fce3438556e17ca4cb8bad6a.png)

但是当我在这些文本框中输入文本时，我的表单是这样的![在此处输入图像描述](../Images/a5f2ae23c9f39def9a93dbf147b974bb.png)

在这些我的另一个文本框被禁用。我该如何解决这个问题？

我的代码 **更新** PhoneGap

```
 <script type="text/javascript">

    </script>
     <style type="text/css">
     #footer {
    position:absolute; z-index:2;
    top:92%;bottom:32px; left:0;
    width:100%;
    height:18px;
    padding:0;
}
input:focus{//update
outline: none;
 }

.ex21{

    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    border-color:#FBB917;

    border: 1px solid;
  background:url('searchbtn.PNG' ) repeat-y right;
  padding-right:20px;

    }
.ex2{

    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    border-color:#FBB917;

    border: 1px solid;

    }
    .searchbox input {
border-top-left-radius: 10px;
border-bottom-left-radius: 10px;

margin-top:0.2cm;

margin-left:1cm;
width:70%;
height: 32px;
float: left;
font-size:15pt;
padding: 2px;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-left: 4px solid orange;

}
.sea input {
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
margin-top:0.2cm;

background-image: url(sea.PNG);
color: #fff;
font-weight: bold; 

width:10%; 
height: 43px;
border: 0;
float: left;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-right: 4px solid orange;
}
    .invitebox input {
border-top-left-radius: 10px;
border-bottom-left-radius: 10px;

margin-top:0.2cm;

margin-left:1cm;
width:70%;
height: 32px;
float: left;
font-size:15pt;
padding: 2px;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-left: 4px solid orange;

}
.invitebtn input {
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
margin-top:0.2cm;

background-image: url(sea.PNG);
color: #fff;
font-weight: bold; 

width:10%; 
height: 43px;
border: 0;
float: left;
border-top: 4px solid orange;
border-bottom: 4px solid orange;
border-right: 4px solid orange;
}

    </style>
  </head>

  <body >

    <table width="100%">
        <tr>
             <td> <label style="font-size:12pt">Search Names</label></td>

        </tr>
    </table>

  <br>  
    <table>
        <tr>
            <td></td>
            <td></td>

            <td><label style="font-size:12pt">Choose one of the following options to search our directory of Names</label></td>
            <td></td>

            <td></td>

        </tr>
    </table>

    <div align="center">
    <div class="searchbox"><input type="text" name="searchbox" id="searchbox"></div>
<div class="sea"><input name="search" type="button" id="btn"></div>
</div>
      <br/>
      <br/>
        <br/>

      <br/>
        <br/>
      <br/>
     <table>
   <tr>
   <td></td>
   <td></td>

   <td></td>

   <td></td>
   <td></td>
   <td><input value='' type='radio' id='one'/><label>Limit Search Results to Name</label></td>

   </tr>
   </table>
   <br>
   <br>
   <div align="center">

            <label style="font:bold;font-size:15pt">OR</label>
        </div>
      <br>
      <div id="loadingScreen" align="center"></div>
    <div align="center">
    <div class="invitebox"><input type="text" name="invitebox" id="invitebox" ></div>
<div class="invitebtn"><input name="invite" type="button" ></div>
</div>

     <div id="footer">
        <div style="border-width:3px;border-height:6px;background-color:#00458D;" align="center">
         <table>

         <input type="button" value="Button1" style="width:20%" />
         <input type="button" value="Button2" style="width:20%" />

         <input type="button" value="Button3" style="width:20%"/>
         <input type="button" value="Button4" style="width:20%" />
         </table>
         </div>
        </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:17:56.310

我为您创建了一个[jsfiddle 示例](http://jsfiddle.net/libinvbabu/Mgc3t/)。我还添加了@Darthur 给出的轮廓边框代码。您的 HTML 或 CSS 没有问题。请检查那个jsfiddle。问题可能出在您的 javascript 文件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T10:52:53.070

这是在焦点上显示的轮廓边框。

`input`您可以通过将其添加到您的 CSS 来为所有元素禁用它：

```
input:focus{
    outline: none;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
} 
```

请注意，如果窗口的背景不是白色，则需要更改颜色。

# php - 如何在 HTML 中禁用嵌入式媒体播放器中的暂停和搜索栏

> ID：10562987
> 
> 赞同：3
> 
> 时间：2012-05-12T10:39:50.213
> 
> 标签：php, html, django, media-player

我正在 Django 的 Internet Radio 上做我的项目。我在我的 chrome 中使用 Adob​​e 媒体播放器作为嵌入式媒体播放器来播放 HTML 中的 mp3。这个媒体播放器有播放/暂停按钮也有搜索栏。我想禁用它们。因此，当客户端连接到服务器时，他应该无法操作（暂停或搜索）媒体流。应该做什么？？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:57:21.423

据我所知，这是不可能的。

你需要使用一个 HTML/JavaScript 播放器，比如[这个](http://kolber.github.com/audiojs/)。然后你可以用CSS修改它。

# jquery - 更改共享点库中的“添加新文档”链接

> ID：10562988
> 
> 赞同：0
> 
> 时间：2012-05-12T10:39:53.043
> 
> 标签：jquery, html, sharepoint

我在 SharePoiint 2010 和文档库中有库。我已在 Web 部件中放置了文档库的视图。我想用 JQuery 更改“添加新文档”的链接；

```
$("#idHomePageNewAnnouncement").attr('href','google.com'); 
```

如果我之后在 alert() 中检查它，它会起作用

```
alert($('#idHomePageNewAnnouncement').attr('href'));   // gives google.com 
```

但是如果我将其悬停或在新窗口中打开它，则会在站点 URL 中添加一个前缀；它会给 http://sitename/webname/subsite/google.com。

我怎样才能摆脱链接中的这个前缀？

我无权访问此项目中的 SharePoint Designer 或 Visual Studio。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T10:42:12.983

`href`属性要么是相对的（不是以“http://”或类似的开头），要么是绝对的。由于您的链接是相对的，因此浏览器将在当前目录中查找名为“google.com”的文件。试试这个：

```
$("#idHomePageNewAnnouncement").attr('href','http://google.com'); 
```

# algorithm - 使用 2^n 步获取房间中所有可能的人员组合

> ID：10562989
> 
> 赞同：1
> 
> 时间：2012-05-12T10:39:56.680
> 
> 标签：algorithm, data-structures, backtracking

这是消费税：

> 你从一个空房间开始，一群 n 人在外面等着。在每一步，您可以允许一个人进入房间，也可以让一个人出去。你能安排一个 2 ^(*n*)步的序列，使得每个可能的人组合都只实现一次吗？

* * *

我的解决方案是：

我可以有一个包含*n 个*元素的位数组。每个元素的状态代表此人是否在房间内。因此，我们总共将在房间里有 2 ^(*n 个*)不同的人组合。

该算法可以是列出所有组合的标准回溯。

* * *

我只是想知道我的想法是太天真还是太简单了？

这个消费税有什么陷阱吗？

* * *

**编辑：**

对于有兴趣实施的人`gray code`，请参阅

[http://yagni.com/graycode/](http://yagni.com/graycode/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-12T10:46:01.240

> *该算法可以是列出所有组合的标准回溯。*

您的解决方案“有效”，但如果实施得天真，它将需要超过 2 ^(*n 个*)步骤。

请参阅问题陈述中的以下句子：

> 在每一步，您可以允许一个人进入房间，也可以让一个人出去。

在您的解决方案中，当您列出所有位向量时，您可能会`0111`遵循`1000`这意味着三个人必须离开房间，一个人必须进入。

这需要 4 个步骤，而不是一个，因此您将获得超过 2 ^(*n 个*)步骤来运行所有组合。

但是，您**可以**排列您描述的位向量，使得两个连续向量之间只有**一位不同。**这就是所谓的[*格雷码*](http://en.wikipedia.org/wiki/Gray_code)。

这是维基百科文章中的一个示例：

```
Dec  Gray   Binary
 0   000    000
 1   001    001
 2   011    010
 3   010    011
 4   110    100
 5   111    101
 6   101    110
 7   100    111 
```

注意如何

1.  所有位向量都被覆盖，并且
2.  对于每个连续的向量，只有一位变化。

这意味着您将能够以精确的 2 ^(*n*)步迭代所有组合。

如何实现这样的序列生成器在 Wikipedia 页面中也有说明，但如果是练习，我建议你在偷看之前自己尝试一下；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T10:42:07.540

您正在寻找[*格雷码*](http://en.wikipedia.org/wiki/Gray_code)序列生成器。格雷码序列中的相邻值仅相差一位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T02:20:59.440

这是格雷码序列生成的工作代码

```
// Binary Reflected Gray Code
void brgc( int *a, int n, int idx, int reflect )
{
    if ( n == idx ) {
        printIntArr( a, n );
    } else {
        a[ idx ] = reflect;
        brgc( a, n, idx + 1, 0 );
        a[ idx ] = !reflect;
        brgc( a, n, idx + 1, 1 );
    }
}

int main( int argc, char *argv[] )
{
    if ( argc != 2 ) {
        printf( "Usage...\n" );
        return -1;
    }
    int n = atoi( argv[ 1 ] );
    int *a = malloc( sizeof( int ) * n );
    brgc( a, n, 0, 0 );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T07:32:32.560

```
/ package whatever; // don't place package name! /

import java.util.*;
import java.lang.*;
import java.io.*;

/ Name of the class has to be "Main" only if the class is public. /
class Ideone
{
    public static void main (String[] args) throws java.lang.Exception
    {
        int numberofPeople=3;
        int size = 1<<numberofPeople;
        for(int i=0;i<size;i++)
        {
            int num = i^(i>>1);
            System.out.println(Integer.toBinaryString(num));
        }
    }
} 
```

# html - 如何从 HTML 文件生成 HAR 文件？

> ID：10562990
> 
> 赞同：4
> 
> 时间：2012-05-12T10:39:56.913
> 
> 标签：html, pagespeed, har

如果我使用 wget，并从 URL 获取 html 文件。如何从该 HTML 文件生成 HAR 文件。

1.  任何用于从 html 文件生成 har 文件的开源实现？
2.  [生成 HAR 文件后，我可以使用harlib](http://www.frogthinker.org/projects/harlib "哈利卜")从 HAR 文件中读取数据。

如果可能，请建议 C、C++ 或 Java 实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:08:12.177

HAR 格式的主要目的是拥有许多工具可以使用和分析的标准 HTTP 跟踪格式。换句话说，它的初衷是并且主要是为了性能分析，而不是“归档”网页本身。

如果您使用 获取页面`wget`，您将丢失 99% 的所有性能数据。要捕获必要的数据，您确实需要一个浏览器来执行请求、获取所有相关资源、保存所有计时器等。这将使您能够构建瀑布图等。

如果您需要在服务器上捕获此数据，则可以使用 pcap 捕获 TCP 跟踪，然后[将其转换为 HAR](http://pcapperf.appspot.com/)，尽管您仍然需要一个实际解析 HTML 并请求所有子资源的客户端（pcap 是只是在后台听）。[或者，您可以通过代理](http://www.softwareishard.com/blog/har-adopters/)路由浏览器并让它为您输出一个 HAR 文件。

最后但同样重要的是，您可以通过其调试界面驱动浏览器并以这种方式导出 HAR 文件。驱动 Firefox 的 Java 示例：[https ://github.com/Filirom1/browsermob-page-perf](https://github.com/Filirom1/browsermob-page-perf)

# python - SQLAlchemy：从特定用户的喜爱系列中检索所有剧集

> ID：10562992
> 
> 赞同：2
> 
> 时间：2012-05-12T10:40:15.627
> 
> 标签：python, database, many-to-many, sqlalchemy, flask

我有用户可以拥有他最喜欢的系列，并且有些剧集具有系列作为外键，我正在尝试从用户最喜欢的系列中检索所有剧集。我正在使用 Flask-SQLAlchemy。

数据库：

```
db = SQLAlchemy(app)

# cross table for user-series
favorite_series = db.Table('favorite_series',
    db.Column('user_id', db.Integer, db.ForeignKey('user.id')),
    db.Column('series_id', db.Integer, db.ForeignKey('series.id'))
)

# user
class User(db.Model):
    __tablename__ = 'user'
    id = db.Column(db.Integer, primary_key=True)
    favorite_series = db.relationship('Series', secondary=favorite_series,
        backref=db.backref('users', lazy='dynamic'))

# series
class Series(db.Model):
     __tablename__ = 'series'
    id = db.Column(db.Integer, primary_key=True)

# episode
class Episode(db.Model):
    __tablename__ = 'episode'
    id = db.Column(db.Integer, primary_key=True)
    series_id = db.Column(db.Integer, db.ForeignKey('series.id'))
    series = db.relationship('Series',
        backref=db.backref('episodes', lazy='dynamic')) 
```

朋友帮我处理 SQL

```
select user_id,series.name,episode.name from (favorite_series left join series on favorite_series.series_id = series.id) left join episode on episode.series_id = series.id where user_id=1; 
```

虽然，我想在 SQLAlchemy API 中使用它，但无法让它工作。

**编辑**：

我的最终工作结果：

```
episodes = Episode.query.filter(Episode.series_id.in_(x.id for x in g.user.favorite_series)).filter(Episode.air_time!=None).order_by(Episode.air_time) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T14:45:16.890

首先，您似乎没有声明您的表名？此外，使用 orm 的全部意义在于，您永远不必编写 sql 查询：

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import orm
import sqlalchemy as db
Base = declarative_base()

favorite_series = db.Table('favorite_series', Base.metadata,
    db.Column('user_id', db.Integer, db.ForeignKey('User.id')),
    db.Column('series_id', db.Integer, db.ForeignKey('Series.id'))
)
class Episode(Base):
    __tablename__ = 'Episode'
    id = db.Column(db.Integer, primary_key=True)
    season = db.Column(db.Integer)
    episode_num = db.Column(db.Integer)
    series_id = db.Column(db.Integer, db.ForeignKey('Series.id'))

    def __init__(self, season, episode_num, series_id):
        self.season = season
        self.episode_num = episode_num
        self.series_id = series_id

    def __repr__(self):
        return self.series.title + \
               ' S' + str(self.season) + \
               'E' + str(self.episode_num)

class Series(Base):
    __tablename__ = 'Series'
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String)
    episodes = orm.relationship('Episode', backref='series')

    def __init__(self, title):
        self.title = title

    def __repr__(self):
        return self.title

class User(Base):
    __tablename__ = 'User'
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String)
    favorite_series = orm.relationship('Series', 
        secondary=favorite_series, backref='users')

    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return self.name 
```

现在您可以访问对象的属性，让 sql alchemy 处理让您的数据库保持同步并发出查询。

```
engine = db.create_engine('sqlite:///:memory:')
session = orm.sessionmaker(bind=engine)()
Base.metadata.create_all(engine)

lt = User('Ludovic Tiako')
the_wire = Series('The Wire')
friends = Series('Friends')
session.add_all([lt, the_wire, friends])
session.commit() # need to commit here to generate the id fields

tw_s01e01 = Episode(1,1,the_wire.id)
tw_s01e02 = Episode(1,2,the_wire.id)
f_s01e01 = Episode(1,1,friends.id)
f_s01e02 = Episode(1,2,friends.id)
f_s01e03 = Episode(1,3,friends.id)

session.add_all([tw_s01e01, tw_s01e02, 
                f_s01e01, f_s01e02, f_s01e03])
session.commit()

the_wire.episodes # > [The Wire S1E1, The Wire S1E2]
friends.episodes # > [Friends S1E1, Friends S1E2, Friends S1E3] 
```

最后，回答你的问题：

```
lt.favorite_series.append(the_wire)
session.commit()
lt.favorite_series # > [The Wire]
[s.episodes for s in lt.favorite_series] # >> [[The Wire S1E1, The Wire S1E2]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T11:23:49.787

我不了解 Flask，但从 Flask-SQLAlchemy 的文档来看，它似乎使用了声明性，所以是 ORM。所以，你应该有一个会话。我认为您可以从`db.session`.

无论如何，如果这些假设是正确的，那么您应该这样做：

```
query = db.session.query(User.id, Series.name, Episode.name).filter((Episode.series_id == Series.id) & \
    (User.id == favorite_series.c.user_id) & (Series.id == favorite_series.c.id) & \
    (User.id == 1))
results = query.all(); 
```

它可能不是您提供的确切查询，但应该这样做。

**更新：我刚刚在**[github](https://github.com/mitsuhiko/flask-sqlalchemy/blob/master/flask_sqlalchemy.py)上检查了 Flask-SQLALchemy 代码，它似乎`db`是一个实例`SQLAlchemy`，它有一个`session`属性，由`self.session = self.create_scoped_session(session_options)`它创建，返回一个会话对象。所以这应该有效。

另外，不是那样做，你就不会使用他们的 BaseQuery，虽然我不知道那意味着什么......

检查文档以了解确切的操作。

# xcode - 如何存储一对多，其中许多在 CoreData（简化）中只有一个属性？

> ID：10562997
> 
> 赞同：0
> 
> 时间：2012-05-12T10:40:56.530
> 
> 标签：xcode, core-data, one-to-many

我有一个实体时间表。这个时间表有一些属性，如名称、开始日期、结束日期等。它还与时间有一对多的关系。Times 是一个只有一个 NSDate 类型的属性“时间”的实体。

所以每个时间表可以有一个或多个时间。

我之前的实现是一个 NSArray，我将其转换为 NSData 以存储在 schedule 实体中。我不喜欢那样。

现在 schedule.times 给出了一个带有 Time 实体的 NSSet。所以当我想要一个 for 循环时，我需要做：

```
for(Time *time in schedule.times) {
    NSLog("%@", time.time);
} 
```

我的问题：有没有办法我可以设置它以便我可以执行以下操作？

```
for(Time *time in schedule.times) {
    NSLog("%@", time);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:40:30.110

好吧，对于您询问的特定简单案例，您可以简单地`-description`在类上实现一个方法`Time`来 return `self.time.description`。

当您使用`%@`格式说明符将对象格式化为字符串时，它只是询问对象的描述并打印结果字符串。

但是，我怀疑您的简单案例具有误导性，因为您并不真正关心记录对象。你真正关心的是什么？

# java - 这段代码有什么问题？质数

> ID：10562998
> 
> 赞同：1
> 
> 时间：2012-05-12T10:41:22.160
> 
> 标签：java, recursion, numbers, primes

我知道这不是找到素数的最好方法，也不是最有效的方法。但是，我似乎找不到 169 算作质数的原因（就我而言，对于较小的数字，它可以正常工作）。

```
public static int checkPrime(int num, int i)
{
    if (i == num)
        return 1;

    else
    {
        if (num % i == 0)
            return 0;
        else
            checkPrime(num, i+1);

    }

    return 1;
} 
```

主类：

```
 System.out.println("Type a number");
        number = reader.nextInt();

        if ((number % 10) % 2 == 0)
            result = 0;

        else
            result = checkPrime(number, 2);

        if (result == 1 || number == 2)
            System.out.println(number + " is a prime number");
        else
            System.out.println(number + " is NOT a prime number"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T10:44:55.650

替换`int`by`boolean`以获得更好的表现力，并返回递归调用的值，您的方法如下所示：

```
public static boolean checkPrime(int num, int i)
{
    if (i == num)
        return true;    
    else
    {
        if (num % i == 0)
            return false;
        else
            return checkPrime(num, i+1);
    }
} 
```

它仍然不起作用`num < 2`，它将运行直到`i`溢出。因此，作为您的主要素数检查功能，您可以编写如下内容：

```
public static boolean checkPrime(int num)
{
   if(num<2)
     return false;
   else
     return checkPrime(num, 2);
} 
```

顺便说一句`(number % 10) % 2`，相当于`number % 2`.