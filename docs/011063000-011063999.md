# StackOverflow 问答 11063000-11063999

# html - 主目录中的 favicon.ico 会出现在所有子目录中吗？

> ID：11063001
> 
> 赞同：0
> 
> 时间：2012-06-16T11:26:11.457
> 
> 标签：html, favicon

> **可能重复：**
> [大多数浏览器是否会自动搜索 favicon.ico？](https://stackoverflow.com/questions/6798689/do-most-browsers-automatically-search-for-the-favicon-ico)

放在主目录中的a`favicon.ico`会出现在所有子目录中吗？

```
www.site.com         (favicon should show)
www.site.com/gallery (will favicon show here?) 
```

还是`<link rel="icon">`需要存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:58:13.310

许多浏览器会检查站点根目录中的网站图标，即使`link`不存在显式图标（例如，Firefox、Chrome 和 Opera 都可以，我很确定 IE 也会，但我目前不在 Windows 机器上） . 您可以通过启动本地网络服务器、请求页面并查看生成的日志来测试这一点。

如果要覆盖子目录中的网站图标，或者在其他位置有网站图标，`/favicon.ico`则需要使用`link`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:43:11.413

是的，如果您将 favicon 放在根目录下，只要您将它放在`Head`标签中，它就会显示在子目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:29:33.860

一个特定站点应该只有一个图标。它应该放在一个地方，你想要的地方。但是在每个 html 使用打开的 favicon 标签必须存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T12:58:24.540

只需将 favicon.ico 放在根目录下，它就会放在所有页面和目录中，无需在所有页面中添加

# c# - 如何将整数列表数据绑定到 Grid ColumnDefinitions

> ID：11063003
> 
> 赞同：0
> 
> 时间：2012-06-16T11:26:24.977
> 
> 标签：c#, silverlight, windows-phone-7, data-binding

我有一组整数：

```
public ObservableCollection<int> Scores = new ObservableCollection<int> {
    10, 30, 50
}; 
```

我希望在绑定时产生类似于以下 XAML 的内容：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="10"/>
        <ColumnDefinition Width="30"/>
        <ColumnDefinition Width="50"/>
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Column="0">10</TextBlock>
    <TextBlock Grid.Column="1">30</TextBlock>
    <TextBlock Grid.Column="2">50</TextBlock>
</Grid> 
```

我如何编写数据绑定来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:31:14.173

您可以尝试以下方法：

```
 <ItemsControl ItemsSource="{Binding Path=Scores}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border BorderBrush="Black" BorderThickness="1"
                        Background="Yellow" Width="{Binding}">
                    <TextBlock Text="{Binding}" />
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl> 
```

我在里面使用 a `Border`，`TextBlock`但如果你愿意，你可以用别的东西代替它。重要的是`Width`绑定。

另请注意，`Scores`必须是一个属性。在上面的代码中，您正在创建一个公共字段，但绑定仅适用于属性，不适用于字段。

**编辑**：如果你想使用 a `Grid`，你可以尝试类似下面的用户控件。此用户控件具有网格宽度的依赖属性，并在每次集合更改时重新创建网格。

```
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.Windows;
using System.Windows.Controls;

namespace YourNamespace
{
    public partial class BindableGrid : UserControl
    {
        public static readonly DependencyProperty WidthsProperty =
            DependencyProperty.Register("Widths",
                                        typeof(ObservableCollection<int>),
                                        typeof(BindableGrid),
                                        new PropertyMetadata(Widths_Changed));

        public BindableGrid()
        {
            InitializeComponent();
        }

        public ObservableCollection<int> Widths
        {
            get { return (ObservableCollection<int>)GetValue(WidthsProperty); }
            set { SetValue(WidthsProperty, value); }
        }

        private static void Widths_Changed(DependencyObject obj,
                                           DependencyPropertyChangedEventArgs e)
        {
            var grid = obj as BindableGrid;
            if (grid != null)
            {
                grid.OnWidthsChanged(e.OldValue as ObservableCollection<int>);
            }
        }

        private void OnWidthsChanged(ObservableCollection<int> oldValue)
        {
            if (oldValue != null)
            {
                oldValue.CollectionChanged -= Widths_CollectionChanged;
            }

            if (Widths != null)
            {
                Widths.CollectionChanged += Widths_CollectionChanged;
            }

            RecreateGrid();
        }

        private void Widths_CollectionChanged(object sender,
                                              NotifyCollectionChangedEventArgs e)
        {
            // We'll just clear and recreate the entire grid each time
            // the collection changes.
            // Alternatively, you could use e.Action to determine what the
            // actual change was and apply that (e.g. add or delete a
            // single column definition). 
            RecreateGrid();
        }

        private void RecreateGrid()
        {
            // Recreate the column definitions.
            grid.ColumnDefinitions.Clear();
            foreach (int width in Widths)
            {
                // Use new GridLength(1, GridUnitType.Star) for a "*" column.
                var coldef = new ColumnDefinition() { Width = new GridLength(width) };
                grid.ColumnDefinitions.Add(coldef);
            }

            // Now recreate the content of the grid.
            grid.Children.Clear();
            for (int i = 0; i < Widths.Count; ++i)
            {
                int width = Widths[i];
                var textblock = new TextBlock() { Text = width.ToString() };
                Grid.SetColumn(textblock, i);
                grid.Children.Add(textblock);
            }
        }
    }
} 
```

用于此的 XAML`UserControl`仅包含`<Grid x:Name="grid" />`在`<UserControl>`元素内部。

`somePrefix`然后，假设您已绑定到命名空间，您可以按如下方式在 XAML 中使用它`YourNamespace`：

```
 <somePrefix:BindableGrid Widths="{Binding Path=Scores}" /> 
```

# c# - 在 C# 中捕获鼠标和键盘事件并“防止系统传播”

> ID：11063005
> 
> 赞同：3
> 
> 时间：2012-06-16T11:26:53.920
> 
> 标签：c#, keyboard, mouse, hook

我正在寻找一种方法来**检测 C# 中的鼠标和键盘事件**并读取它们（光标位置 + 击键）。我读了很多“键盘钩子”的东西，但我的问题是我想捕捉这些事件**然后“中和”它们**，我不知道怎么说。

类似于*Virtual Box*所做的事情：它拦截鼠标和键盘并且不会将它们“传播”到主机系统，因此，例如，我可以按下`CTRL+TAB`，拦截它并防止弹出窗口切换对话框......

显然，我将定义一个特殊的键（`RCTRL`例如），让我停止钩子，在其他地方我永远无法将控制权交还给主机 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:28:26.380

这是我在 VB.NET 中使用的模块（我会尽可能地翻译它，但是有一个在线工具可以自动完成）：

```
Imports System.Runtime.InteropServices

Public Module KeyboardHook
    <DllImport("user32.dll")>
    Public Function SetWindowsHookEx(ByVal idHook As Integer, ByVal HookProc As KBDLLHookProc, ByVal hInstance As IntPtr, ByVal wParam As Integer) As IntPtr

    End Function

    <DllImport("user32.dll")>
    Public Function CallNextHookEx(ByVal idHook As IntPtr, ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer

    End Function

    <DllImport("user32.dll")>
    Public Function UnhookWindowsHookEx(ByVal idHook As IntPtr) As Boolean

    End Function

    <StructLayout(LayoutKind.Sequential)>
    Public Structure KBDLLHOOKSTRUCT
        Public vkCode As UInteger
        Public scanCode As UInteger
        Public flags As KBDLLHOOKSTRUCTFlags
        Public time As UInteger
        Public dwExtraInfo As UIntPtr
    End Structure

    <Flags()>
    Public Enum KBDLLHOOKSTRUCTFlags As UInteger
        LLKHF_EXTENDED = &H1
        LLKHF_INJECTED = &H10
        LLKHF_ALTDOWN = &H20
        LLKHF_UP = &H80
    End Enum

    Public Const WH_KEYBOARD_LL As Integer = 13
    Public Const HC_ACTION As Integer = 0
    Public Const WM_KEYDOWN As Integer = &H100
    Public Const WM_KEYUP As Integer = &H101
    Public Const WM_SYSKEYDOWN As Integer = &H104
    Public Const WM_SYSKEYUP As Integer = &H105

    Public Delegate Function KBDLLHookProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
End Module 
```

以下是如何使用它来取消每个按键：

```
Private hook As IntPtr
Private isVisible As Boolean = False
Private keyHookDelegate As New KBDLLHookProc(AddressOf Me.KeyHook)

Private Sub Main_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    'Set the key hook:
    hook = SetWindowsHookEx(KeyboardHook.WH_KEYBOARD_LL, Me.keyHookDelegate, Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()(0)), 0)

    If hook = IntPtr.Zero Then
        MessageBox.Show("Failed to set global key hook.", "Key Hook Set Failiure", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Throw New ApplicationException("Failed to set key hook.")
    End If
End Sub

Private Function KeyHook(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
    If nCode = KeyboardHook.HC_ACTION Then
        Dim p As Integer = wParam.ToInt32()

        If p = WM_KEYDOWN OrElse p = WM_SYSKEYDOWN Then
            Dim keyCode As Keys = CType(CType(Marshal.PtrToStructure(lParam, GetType(KBDLLHOOKSTRUCT)), KBDLLHOOKSTRUCT).vkCode, Keys) ' This gets the key that was pressed.

            'Cancel it!
            Return 1
        End If
    End If

    Return KeyboardHook.CallNextHookEx(IntPtr.Zero, nCode, wParam, lParam)
End Function

Protected Overrides Sub Finalize()
    Try
        'Remove the key hook:
        If hook <> IntPtr.Zero Then KeyboardHook.UnhookWindowsHookEx(hook)
    Finally
        MyBase.Finalize()
    End Try
End Sub 
```

至于鼠标部分，VirtualBox 实际上并没有取消所有的鼠标交互。它要么使用*鼠标集成*，让您像往常一样使用鼠标（您不必在这里做任何事情），或者它将捕获的鼠标限制在某个区域。您可以在 .NET 中通过为鼠标设置边界来完成此操作：

```
System.Windows.Forms.Cursor.Clip = new Rectangle(this.PointToScreen(Point.Empty), this.ClientSize); 
```

根据您的需要，您可能还想隐藏光标。

# jsf-2 - 地图正在读取但未由 HtmlInputText 设置

> ID：11063007
> 
> 赞同：0
> 
> 时间：2012-06-16T11:27:10.590
> 
> 标签：jsf-2

我有一个动态创建的`HtmlInputText`，它设置为从会话范围 bean 中的映射中提取其值。像这样。

```
HtmlInputText input = new HtmlInputText();
String expression = "${catalogue.itemValues.A" + item.getId() + "}";
ValueExpression valExpression = expressionFactory.createValueExpression(facesInstance.getELContext(), expression, String.class);
input.setValueExpression("value",valExpression); 
```

where`itemValues`是带有 getter 的 map，`getItemValues()`键是`A1`,`A2`等。

我以编程方式`Map`为 key`A1`和 value添加了一个值`1234`。每当出现 JSF 页面时，都会呈现该值。但是，当我更改值并提交表单时，值不会更改。

我已经测试了一个`h:inputText`元素并将其链接到相同的键，它能够更新值并且新值反映在生成的`HtmlInputText`组件中。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:38:14.087

您应该使用`#{}`语法来绑定输入值，而不是`${}`语法。`#{}`可以做一个`get`和`set`，而只能`${}`做一个`get`。

### 也可以看看：

*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el)

# ruby-on-rails - 带有正则表达式删除的 memcached fork (delete_matched)

> ID：11063012
> 
> 赞同：1
> 
> 时间：2012-06-16T11:27:49.430
> 
> 标签：ruby-on-rails, memcached

我目前正在将 memcached 用于 Rails 应用程序。我需要 delete_matched() 功能，所以我使用了一个额外的列表，其中包含所有存储的键，我可以一个一个地匹配和删除（有人已经写过了）。

问题是它并没有真正起作用：一些键不时被删除 - 它真的不知道为什么，代码看起来对我有效（并且正则表达式是正确的）。

是否有具有此功能的 memcached 分支？我无法想象为什么默认情况下它没有实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:17:30.110

你不应该这样做，因为它很慢，所以它没有被实施。您应该考虑标记命名空间。这是[解释](http://code.google.com/p/memcached-tag/)。

如果您仍想使用正则表达式，请参阅此博文：

[http://quickleft.com/blog/faking-regex-based-cache-keys-in-rails](http://quickleft.com/blog/faking-regex-based-cache-keys-in-rails)

您还可以使用[dali-store-extensions](https://github.com/defconomicron/dalli-store-extensions)来实现类似

```
 # in sweeper
 expire_fragment /.*sweep_me_up.*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:56:04.373

我最终使用 Redis 和`redis-rails`gem 来完成这项任务。

# php - 从数据库中获取 xml 数据，然后显示它

> ID：11063015
> 
> 赞同：0
> 
> 时间：2012-06-16T11:28:29.687
> 
> 标签：php, xml, xml-parsing

我的数据库（长文本）中有一个只有 xml 数据的列，我试图从数据库中获取它，然后显示其中的每个数据，var dump 给了我这个：

```
array(1) {
  ["xmldata"]=>
  string(916) "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>
<form>
<FormSubject>test</FormSubject>
<FormRecipient>test2</FormRecipient>
....
</form>"
} 
```

我用 mysql_fetch_assoc 获取它；我正在尝试这样做 foreach ：

```
$row = mysql_fetch_assoc($result);
foreach($row as $line)
{
    $test = $line['FormSubject'];

    print("$test");
} 
```

但它什么也没给我，请帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:31:27.853

只需从此专栏中获取 XML 并使用一些库来解析 XML，例如[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)

顺便提一句。

请远离“低级”MySQL PHP 函数，改用 PDO。

# iphone - Appcelerator Titanium ACS 离用户最近的地方

> ID：11063016
> 
> 赞同：0
> 
> 时间：2012-06-16T11:28:37.377
> 
> 标签：iphone, cloud, titanium, appcelerator

我正在尝试按最近的地方在列表中订购。使用此代码可以正常工作：

```
 Cloud.Places.query({
page: 1,
per_page: 20,
where: {
    lnglat: { '$nearSphere': [latitudefast,longitudefast],  }
    },

order: {
    lnglat: { '$nearSphere': [latitudefast,longitudefast],  }
    }, 
```

latitudefast 和 longitudefast 代表用户的实际位置。它已在查询之前定义。

但它是“倒置”的，意思是最近的地方在列表的底部，最远的地方在列表的顶部！怎么来的？我如何反向订购？我订购错了吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:14:36.497

您是否尝试过不指定订单？$nearSphere 默认返回按距离排序的结果。

来自 MongoDB 的文档（ACS 将其用作其数据存储）描述 $near：

> 上面的查询找到最接近 (50,50) 的点并返回它们按距离排序（不需要额外的排序参数）。

这也适用于 $nearSphere。

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

# php - 带有数据表的 kohana

> ID：11063022
> 
> 赞同：2
> 
> 时间：2012-06-16T11:29:15.437
> 
> 标签：php, kohana, kohana-3, database-table

我想在 Kohana 3.0 中使用数据表，但在所有示例中，它们都是 PHP 代码和普通查询的核心。有没有关于如何将 Kohana 与数据表一起使用的教程或示例？

例子：

```
 $sQuery = "SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", implode(",",$aColumns))."FROM $sTable $sWhere $sOrder $sLimit"; 
```

如何在 Kohana 中编写这种类型的查询`DB::select(...)`？提供一些关于在 Kohana 中编写查询的好建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:43:59.183

你可以尝试`where_open()`和`where_close()` 方法在哪里条件..

例如

```
$query = DB::select()
       ->from('table')
       ->where_open()
       ->where('column1', '=', 1)
       ->or_where('column2', '=', 2)
       ->where_close(); 
```

将产生以下 SQL：

```
SELECT * FROM table WHERE (column1 = 1 OR column2 = 2); 
```

您可以在下面给出的 url 上找到有关 kohana sql 选择查询生成器的更多信息。

[http://kohanaframework.org/3.1/guide/database/query/builder](http://kohanaframework.org/3.1/guide/database/query/builder)

希望对你有帮助

谢谢

# javascript - mootools：从 HTML 创建一个新的 DOM 元素

> ID：11063030
> 
> 赞同：1
> 
> 时间：2012-06-16T11:29:33.923
> 
> 标签：javascript, mootools

如何在 Mootools 中从字符串（从 ajax 传递）创建 DOM 元素？

在 jQuery 中，一个简单的解决方案是`$( elements )`

```
var elements = '<i>This is italic</i><b>this bold</b>...'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T12:29:08.783

简单如：`Elements.from('<i>This is italic</i><b>this bold</b>')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:45:34.487

如果没有字符串，您将使用 Element 类：

```
var el = new Element('div#id.class', {
    text: 'My text',
}); 
```

使用字符串，您可以检查它在 Request.HTML 中的含义，[请参见此处](https://github.com/mootools/mootools-core/blob/3eb050d68dc2403b39d3c1b15e925735ff1eacbb/Source/Request/Request.HTML.js#L40)。

```
var temp = new Element('div').set('html', response.html);
response.tree = temp.childNodes;
response.elements = temp.getElements(options.filter || '*'); 
```

基本上 Mootools 元素和 DOM 元素是相同的，这是另一个从 HTML 创建 DOM 节点的 SO 问题：[使用内置 DOM 方法或原型从 HTML 字符串创建新的 DOM 元素](https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro)

从旧的 Mootools 论坛中，我也发现了一个[有趣的想法](http://mootools-users.660466.n2.nabble.com/Moo-New-element-from-html-string-td3557543.html)：添加一个包含此逻辑的新方法 Element.fromString() 或 String.toElement()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-11T21:08:44.897

我正在使用最新的*Mootools 1.6.0*。
它抛出`Elements.from`的不是函数。

这个对我有用：

```
var html = '<img src='+item.src+'>';
var el = new Element('li').set('html', html); 
```

工作代码：http: [//jsfiddle.net/chetabahana/qbx9b5pm/](http://jsfiddle.net/chetabahana/qbx9b5pm/)

# java - 如何将多个时间值返回给java中的类？

> ID：11063034
> 
> 赞同：0
> 
> 时间：2012-06-16T11:29:47.913
> 
> 标签：java, for-loop, return-value

我有 2 个课程“主要”和“FOR”。从“Main”中，我将在“FOR”类中调用方法“display”。'display' 将获取多个 String 值并将其返回给 'Main' 类。此处必须显示返回值。

仅返回一个值。如何获得返回的多个值？

主类

```
public class Main {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        FOR obj = new FOR();
            String str = obj.display();
        System.out.print(str);
        }
    } 
```

上课

```
public class FOR {
    int j=5;
    String hi="hi";
    String display()
    {
        for(int i=0;i<j;i++)
        {
        System.out.print(hi);
//   If I use this I will get 5 times hi.. but I dont 
///  want like this. I have to return hi String 5times to main and I have to display
///  but should not call 5 times display() too,by calling one time, I have to return 
///  5 time a string to Main class

        }
        return hi;
        }
} 
```

所需的输出是从方法“显示”返回 5 个值。在这里，我必须得到 5 次 HI .. 但我只得到一次 .. 内联评论更详细地解释了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:32:32.220

您可以使用[List](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)。

例子：

```
import java.util.List;
import java.util.ArrayList;

public class Main {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        FOR obj=new FOR();
        List<String> str= obj.display();
        for(String v: str) {
            System.out.print(v);
        }

    }
}

import java.util.List;
import java.util.ArrayList;
List<String> display() {   
    int j=5;
    String hi="hi";

    List<String> result = new ArrayList<String>();

    for(int i=0;i<j;i++) {
        result.add(hi);         
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:38:50.613

一种稍微不同且更复杂的方法，但在某些情况下很有用。

```
public class Main {
    public static void main(String[] args) {
        FOR obj = new FOR();
        String str = obj.display(new ICallback() {

            @Override
            public void doSomething(String obj) {
                // do whatever you want with this
                System.out.println("This is being returned for each execution " + obj);
            }
        });

        System.out.print(str);
    }

    public static interface ICallback
    {
        void doSomething(String obj);
    }

    public static class FOR {
        int j = 5;
        String hi = "hi";

        String display(ICallback callback) {
            for (int i = 0; i < j; i++) {
                callback.doSomething(hi);
            }
            return hi;
        }
    }
} 
```

# macos - 在为 Git 使用外部差异工具时，如何获取要传递给工具的完整路径而不是相对路径？

> ID：11063037
> 
> 赞同：1
> 
> 时间：2012-06-16T11:30:12.233
> 
> 标签：macos, git, p4merge

在使用 git 区分文件时，我正在尝试使用 shell 脚本和 .gitconfig 打开 p4merge（在 Mac 上）。

它几乎可以工作，但我遇到了传递给 p4merge 的“正确”文件（第二个文件）上的相对路径的问题：

```
~> git diff <absolute path>/django/templates/pagination.html 
output: 
/<absolute path to prev version>//jtpgjm_pagination.html django/templates/pagination.html
Incorrect parameters: 'django/templates/pagination.html' is (or points to) an invalid file. 
```

完整路径正在第一个参数上扩展，但不是在第二个参数上。我可以做些什么来触发第二个文件的完整文件路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:02:02.023

用这个：

`readlink -f django/templates/pagination.html`

作为命令的参数，例如：

`echo $(readlink -f django/templates/pagination.html)`

# jquery - 如何在 jQuery AJAX 上调用 jPlayer？

> ID：11063038
> 
> 赞同：0
> 
> 时间：2012-06-16T11:30:12.920
> 
> 标签：jquery, jplayer

在准备好的 jQuery 文档中，我们必须初始化将显示在页面上的 jPlayer。

虽然 AJAX 调用成功后它会显示播放器，但它没有显示海报和视频，因此无法播放视频。

在 AJAX 响应之后，我们正在初始化 jPlayer，但页面不会重新加载，只有一个 div 会发生变化。

也许我必须在没有 AJAX 的情况下管理 jPlayer。因为它不能与 AJAX 一起正常工作。

```
<html>
<head>
jQuery(function($){
function loadPlayer(){
    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                webmv: "http://",
                poster: "http://",
            });
        },
        play: function() { // To avoid both jPlayers playing together.
            $(this).jPlayer("pauseOthers");
        },
        repeat: function(event) { // Override the default jPlayer repeat event handler
            if(event.jPlayer.options.loop) {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerRepeat", function() {
                    $(this).jPlayer("play");
                });
            } else {
                $(this).unbind(".jPlayerRepeat").unbind(".jPlayerNext");
                $(this).bind($.jPlayer.event.ended + ".jPlayer.jPlayerNext", function() {
                    $("#jquery_jplayer_2").jPlayer("play", 0);
                });
            }
        },
        swfPath: "jplayer/js",
        supplied: "webmv",
        size: {
            width: "640px",
            height: "360px",
            cssClass: "jp-video-360p"
        },      
        cssSelectorAncestor: "#jp_container_1"
    });
});
}
loadPlayer();
</head>
<body>
<div id="mydiv"></div>
    <div id="jp_container_1" class="jp-video jp-video-270p">
        <div class="jp-type-playlist">
            <div id="jquery_jplayer_1" class="jp-jplayer"></div>
            <div class="jp-gui">
                <div class="jp-video-play">
                    <a href="javascript:;" class="jp-video-play-icon" id="jp-video-play-icon" tabindex="1">play</a>
                </div>
                <div class="jp-interface" id="jp-interface">
                    <div class="jp-progress">
                        <div class="jp-seek-bar">
                            <div class="jp-play-bar"></div>
                        </div>
                    </div>
                    <div class="jp-current-time"></div>
                    <div class="jp-duration"></div>
                    <div class="jp-controls-holder" id="jp-controls-holder">
                        <ul class="jp-controls" id="jp-controls">
                            <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                            <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                            <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                            <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                            <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                            <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                            <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                            <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                        </ul>
                        <div class="jp-volume-bar">
                            <div class="jp-volume-bar-value"></div>
                        </div>
                        <ul class="jp-toggles">
                            <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
                            <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
                            <li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a></li>
                            <li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a></li>
                            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                        </ul>
                         <ul id="navbar">
  <!-- The strange spacing herein prevents an IE6 whitespace bug. -->
     <li><a href="javascript:;" class="jp-settings" tabindex="1"></a>
     <ul>
        <li><span>Quality</span></li>
        <li><a href="#">720p</a></li>
        <li><a href="#" class="active">360p</a></li>
        <li><a href="#">240p</a></li>
        </ul>
     </li>
  </ul>
                    </div>

                    <div class="jp-title">
                      <ul>
                            <li></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="jp-playlist">
                <ul>
                    <!-- The method Playlist.displayPlaylist() uses this unordered list -->
                     <li></li>
                </ul>
            </div>
            <div class="jp-no-solution">
                <span>Update Required</span>
                To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
            </div>
        </div>
    </div>
<input type="submit" name="loadAJAX" id="loadAJAX" value="Call AJAX" />
<script type="text/javascript>

$("#loadAJAX").click(function() {

$.ajax({
        type: "POST", 
        url: abc,
        dataType: 'json',
        success: function(data) {
        data +='player div goes here'
          $("#mydiv").html(data);
          loadPlayer();
        }
        });

});
</script> 
```

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:14:46.720

我认为您的问题出在`success`处理程序中（并且总体上在您的方法中），并且事实上，您在 div 之外有一个玩家占位符（如果我理解正确，您正在尝试将玩家标记推送到 div 中`myDiv`）。我建议做的事情：

*   当页面正常加载时（如您提供的代码中所示），在 HTML 中设置您的 jPlayer 标记。
*   使您的服务器的 AJAX 处理程序返回一些 JSON 对象用于媒体（网址、海报等）。
*   On`success`不要使用 重新创建标记`loadPlayer()`，而是[`setMedia()`](http://jplayer.org/latest/developer-guide/#jPlayer-setMedia)在返回数据的现有播放器上使用。
*   必要时显示/隐藏播放器。就像在启动时隐藏并在 AJAX 成功后显示一样。

例如（显然，我省略了很多你已经拥有的代码）：

```
<script>
    $(function(){
        $("#jquery_jplayer_1").jPlayer({.....}); // setup player on normal load
    });

    // set proper JSON object as media and display a player placeholder
    function loadMedia(mediaObject){
        $("#jquery_jplayer_1").setMedia(mediaObject);
        $("#jquery_jplayer_1").show();
    }

    $("#loadAJAX").click(function() {

        $.ajax({
                type: "POST", 
                url: abc,
                dataType: 'json',
                success: function(data) {
                    loadMedia(data.mediaObject);
                    doOtherStuff(data.otherData);
                }
            });
     }
</script>
<body>
    <div id="mydiv"></div>
        <div id="jp_container_1" class="jp-video jp-video-270p" style="display:none;">
            <div class="jp-type-playlist">
                <div id="jquery_jplayer_1" class="jp-jplayer"></div>
                ........
<body> 
```

# jquery - 我可以在某些操作之前显示自定义确认对话框吗

> ID：11063046
> 
> 赞同：-2
> 
> 时间：2012-06-16T11:31:46.337
> 
> 标签：jquery

我正在使用`ASP.NET/C#`。在我的一个页面中，我有一个要求，在`inserting data`进入之前`database`我需要检查它是否是唯一的。如果`ApplicationNo`它不是唯一的，我需要显示一个`confirm dialog`它将通知用户它`ApplicationNo`不是唯一的。我可以使用自定义`confirm dialog`以此目的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:35:03.937

您可能会为此使用 ajax 并在收到来自 ajax 调用的数据后相应地处理您的页面。

```
 $.get(url,function(data){
    // once url data is fetched, use the data variable to get the response of the page content

    if (data == 'ApplicationNo') { 
       // your code to open confirm window

    }
    else {  }

 }); 
```

# ios - 更改 QLPreviewController 背景颜色

> ID：11063048
> 
> 赞同：0
> 
> 时间：2012-06-16T11:31:55.693
> 
> 标签：ios, colors, background, qlpreviewcontroller

这是我问你的一个简单问题：如何更改 QLPreviewController 组件的背景？

我用它来呈现 PDF 文件，但它以滚动视图模式作为背景颜色显示：

```
[UIColor scrollViewTexturedBackgroundColor] 
```

我想更改该背景颜色，但更改视图的`backgroundColor`属性无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:46:57.520

我遇到了类似的问题，最终将子类`QLPreviewController`化并将以下内容添加到其实现中：

```
- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    //Find webview and set its subviews' background color to white
    [[self.view subviews] enumerateObjectsUsingBlock:^(UIView* view, NSUInteger idx, BOOL *stop) {

        [self setSubviewsBackgroundColor:view];

    }];
} 
```

和

```
- (void)setSubviewsBackgroundColor:(UIView*)view{

    [[view subviews] enumerateObjectsUsingBlock:^(UIView* subview, NSUInteger idx, BOOL *stop) {

        if ([subview isKindOfClass:[UIWebView class]]) {

            [subview setBackgroundColor:[UIColor whiteColor]];
            [[subview subviews] enumerateObjectsUsingBlock:^(UIView* view, NSUInteger idx, BOOL *stop) {
                [view setBackgroundColor:[UIColor whiteColor]];
            }];
        }
        else [self setSubviewsBackgroundColor:subview];
    }];
} 
```

当然，您可能希望更改`[UIColor whiteColor]`和优化上述代码以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:58:42.407

您需要对其进行子类化并进行更改。像这样的东西：

.h 文件：

```
#import <QuickLook/QuickLook.h>

@interface MyQLPreviewController : QLPreviewController 
```

.m 文件：

```
#import "MyQLPreviewController.h"

@implementation MyQLPreviewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor redColor];  // make the change for example
} 
```

# jquery - Jquery 用 ul 悬停

> ID：11063050
> 
> 赞同：0
> 
> 时间：2012-06-16T11:32:15.320
> 
> 标签：jquery, menu, html-lists, onmouseover

我正在尝试在 ul 元素上进行基本悬停，这将显示 li 元素。我在这里尝试过：http: [//jsfiddle.net/ExWQp/3/](http://jsfiddle.net/ExWQp/3/)

问题是当我将一个 li 元素留给另一个元素时，功能 mouseout 被激活。

你能帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:34:33.563

使用`$.mouseenter()`and`$.mouseleave()`代替`$.mouseover()`and `$.mouseout()`。

```
$(document).ready(function($) {
    var $menulist = $('.ssmenu'),
        $menuitems = $menulist.find('li'),
        $colls = $('.collections');

    var hoverin = function() {
        $menulist.fadeIn();
    };

    var collenter = function() {
        $menuitems.fadeIn();
    };

    var menuleave = function() {
        $menuitems.fadeOut();
    };

    $menulist
        .hover(hoverin, menuleave)
        .bind('mouseleave', menuleave);

    $colls.bind('mouseenter', collenter);
}); 
```

[http://jsfiddle.net/userdude/ExWQp/6/](http://jsfiddle.net/userdude/ExWQp/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:37:39.260

```
$('.ssmenu').hover(function () {
    $('.ssmenu li').fadeIn();        
},
function () {
    $('.ssmenu li').fadeOut();        
});    

$('.collections').bind('mouseover', function () {
    $('.ssmenu li').fadeIn();
}); 
```

[http://jsfiddle.net/ExWQp/4/](http://jsfiddle.net/ExWQp/4/)

# jsp - 添加自定义属性到 JSP 中的标记

> ID：11063051
> 
> 赞同：0
> 
> 时间：2012-06-16T11:32:16.650
> 
> 标签：jsp, jstl, jsp-tags

我是 JSP 新手，所以在使用 JSP 标签显示一些消息时遇到问题。
我想按照这个约定显示这些消息：**如果文本的长度等于或小于 50，那么它将显示整个文本内容，否则只显示前 50 个字符并将“...”附加到它的尾部。**
我正在考虑添加一个属性（称为 maxDisplayChars，类型为整数）来执行此操作的解决方案。如果指定了此属性，则将执行显示约定，如果没有，则默认行为将保持为默认值。这个附加属性将帮助我减少代码更改，只需查看应用程序的哪个部分需要应用此规则并“插入”此属性即可。
您认为这种解决方案可行吗？如果是，那么如何实现它（对不起，我只是 JSP 和 JSTL 的新手-_-），如果否，是否有任何替代方法来克服这个问题？
太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:31:42.823

您有三个合理的选择：

**1.**使用 JSP 自定义标签缩短（[简要介绍](http://onjava.com/onjava/excerpt/jserverpages3_ch11/index.html)）
**2.**在数据到达您的 JSP 之前缩短数据
**3.**在客户端使用 JavaScript 执行此操作，例如，使用[jQuery 截断器](http://renderedtext.com/blog/2010/05/19/smartly-truncate-long-text-and-markup-with-jquery.truncator/)

每个都有优点和缺点。

* * *

**自定义标签**

（也可以在 Java 中，但 ew。）易于实现，允许使用来自 JSP 的参数选择大小，可以包含您想要的任何选项，包括与 JS 相关的选项（参见 #3）。

**在 JSP 之前缩短**

最大的缺点是您在后端代码中选择长度，而更改意味着重新编译和部署。例如，您可以将文本切成 40 个字符。

**使用 JavaScript**

最灵活的。如果您要缩小巨大的字符串，可能不是最佳选择，在这种情况下，我会考虑自定义标签和 JS 的组合。

好的部分是您可以使用其他人的代码执行诸如将文本的其余部分（截断的部分）放入悬停触发的弹出窗口之类的事情。您也可以在自定义标签中使用相同的 JS，从而获得非常强大的解决方案。

# wix - 如何在具有相同产品 ID 的已安装 msi 上更新 Windows 安装程序包

> ID：11063054
> 
> 赞同：1
> 
> 时间：2012-06-16T11:32:52.183
> 
> 标签：wix, windows-installer

我创建了一个运行良好的 wix 安装程序项目。它可以轻松地将我的应用程序安装在系统上。每当任何文件或服务有任何变化时，我都会从控制面板卸载 msi 并在系统上安装新的 msi。

但是每当我安装新的 msi 时，新安装后应用程序的所有设置都会更改，这听起来不太好。为了解决这个问题，我在 Product.wxs 文件中使用升级代码。但是当我在构建后安装新的 msi 时，却显示给定错误：

```
Another version of this product is already installed.  Installation of this version cannot continue.  To configure or remove the existing version of this product, use Add/Remove Programs on the Control Panel 
```

因此，只要文件有任何更改且具有相同的产品 ID，我就想更新 Windows 应用程序包。我只想更新已安装的 msi，不想删除它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T14:50:16.047

您不能使用相同的 ProductId 进行升级，您需要更改它。最好的方法是设置 ProductId="*" ，这将为每个构建更改它。您还需要增加版本号，这最好通过使用主 exe 程序集版本号来完成。有关更多信息，请参阅[http://wix.sourceforge.net/manual-wix3/major_upgrade.htm](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T17:31:32.700

您可以使用它`ProductCode`来更新已安装的 MSI。基本上你增加`ProductVersion`，重建 MSI（使用 new `PackageCode`）并使用命令行进行小更新，例如：

```
msiexec /i <path to new msi> REINSTALL=ALL REINSTALLMODE=vomus. 
```

以我的经验，这并不常用，因为如果您要重建 MSI，您不妨进行重大升级。

如果您只想更新几个文件，而您还没有准备好发布完整的 MSI 文件，那么这就是补丁的用途。如上所述重建 MSI，然后构建补丁 - 补丁是两个 MSI 文件之间的增量，请参阅 MsiMsp.exe 的文档。

# iphone - 是否可以使用 iPhone 中的 gps 在当前位置找到可用的服务，例如出租车

> ID：11063058
> 
> 赞同：-1
> 
> 时间：2012-06-16T11:33:25.700
> 
> 标签：iphone, gps, clgeocoder

我正在开发一个应用程序，它应该在城市的当前位置提供可用的出租车或出租车，在这里，我所做的是，我使用反向 CLGeocoder 找到了当前位置（地址）。为了获得可用资源，我是否应该使用任何 api 或其他东西。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:45:40.577

据我所知，没有可用的 API。您可以与您所在位置的出租车供应商取得联系，并要求他们提供有关他们出租车的信息。然后，您可以创建一个集中式服务器，该服务器将为您提供响应。

这个想法很好，但你需要一些投资者和一些服务器设置方面的专业知识，以及一个可以吸引所有这些出租车供应商的营销人员。

# c++ - 使用不听（）的选择，可能吗？

> ID：11063059
> 
> 赞同：1
> 
> 时间：2012-06-16T11:33:34.537
> 
> 标签：c++, sockets, select

我正在建立一个客户：

1.  应该能够从服务器和标准输入接收信息
2.  应该能够在不询问的情况下从服务器接收信息，例如当另一个客户端发送消息时。

为此，我尝试使用 select 来监控两个可能的输入。

发生的情况是，当监控键盘输入时，我向客户端发送一条消息，并且我希望收到一条回复，所以没有问题。但是当服务器发送意外消息时，什么也没有发生，我不知道为什么。使用 select() 是正确的方法吗？甚至可以在`select()`没有`listen()`ing 的情况下使用吗？

这是我的代码（可编译）：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <netdb.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <cstring>
#include <arpa/inet.h>
#include <iostream>
#include <fstream>

#define MAX_CLIENT_NAME 30
#define MAX_TWIT_SIZE 140
#define NUM_OF_ARG 4
#define ERROR -1
#define GREAT_SUCCESS 0
#define OK "OK"
#define EXIT "EXIT"

using std::string;
using std::cerr;
using std::endl;
using std::cout;

string clientName;

int srverfd, numbytes, status, maxSock ;

fd_set inputFdSet;        /* Socket file descriptors we want to wake
                       up for, using select() */

int establishConnection(char * serverAddress,char * port){
    if ((srverfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("socket");
        return ERROR;
    }
    struct sockaddr_in server;
    server.sin_family = AF_INET;
    inet_aton(serverAddress, &server.sin_addr);
    server.sin_port = htons(atoi(port));
    memset(&(server.sin_zero), '\0', 8);

    if (connect(srverfd,(const struct sockaddr *)&server,sizeof(struct sockaddr)) == -1) {
        perror("connect");
        close(srverfd);
        return ERROR;
    }
    maxSock = srverfd;
    return GREAT_SUCCESS;
}

const char * getUserTweet(){
    string temp;
getline(std::cin,temp);
    return temp.c_str();
}

void sendMessage(string message){
    if ((numbytes = send(srverfd, message.c_str(), message.length(), 0)) == -1) {
        perror("sendMessage");
        close(srverfd);
    }
    cout<<"Message sent: "<< message << endl;
    return;
}

const char * getMessage(){
    char buf[MAX_TWIT_SIZE];
    memset(buf,'\0',MAX_TWIT_SIZE);
    if ((numbytes = recv(srverfd, buf, 140, 0)) == -1) {
        perror("getMessage");
        close(srverfd);
    }
    string temp = buf;
    return temp.c_str();
}

void build_select_list() {
    FD_ZERO(&inputFdSet);
    FD_SET(srverfd,&inputFdSet);
    FD_SET(STDIN_FILENO,&inputFdSet);
    if (STDIN_FILENO > maxSock)
        maxSock = STDIN_FILENO;
    return;
}

void readSocket(fd_set tempfd) {
    const char * tweet, * inMessage;
    if (FD_ISSET(srverfd,&tempfd)) {
        inMessage = getMessage();
        cout << inMessage << endl;
    }

    if (FD_ISSET(STDIN_FILENO,&tempfd)) {
        tweet = getUserTweet();
        sendMessage(tweet);
        inMessage = getMessage();
        if (strcmp(inMessage,OK) != 0) {
            cout << inMessage << endl;
        }
        if (strcmp(inMessage,EXIT) == 0) {
            return;
        }
    }
    return;
}

int main (int argc, char *argv[] ){
    int value;
    bool clientON = false;
    if(establishConnection(argv[2],argv[3])){
        cerr << "usage: failed to make connection" << endl << "exiting..." << endl;
        exit(EXIT_FAILURE);
    }

    cout << "Connected successfully" << endl;
    sendMessage("CONNECT "+clientName); //Connect
    if(strcmp(getMessage(),OK) == 0){
        clientON = true;
    }
    while(clientON){
        build_select_list();
        value = select(maxSock, &inputFdSet, NULL, NULL, NULL);
        if (value < 0) {
            perror("select");
            exit(EXIT_FAILURE);
        }
        if (value == 0) {
            continue;
        }
        else {
            readSocket(inputFdSet);
        }
    }
    sendMessage("DISCONNECT");
    if(strcmp(getMessage(),OK) == 0){
        // do nothing
    }
    close(srverfd);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:19:14.827

您的`select`通话无效。第一个参数必须是任何集合中最高的文件描述符，**加上一个**.
正如您所拥有的那样，事件 on`srverfd`不会“唤醒”`select`呼叫（除非`STDIN_FILENO`以某种方式小于`srverfd`，在这种情况下`stdin`事件不会解锁`select`- 但在实践中不会发生）。

* * *

您的代码还有很多其他问题。（它看起来不像 C++。）

`getUserTweet`是不可靠的（未定义的行为 -`temp`一旦函数返回就被销毁，所以`char*`你返回的已经消失了它的调用者将尝试使用它）。对`getMessage`. 要解决这个问题，请在任何地方使用，并且仅在调用 C 库函数时`std::string`提取）。`char*`

`readSocket`不必要地复制 FD 集（可能很昂贵）。

你真的应该摆脱所有这些全局变量——构建一两个类来封装状态和网络功能，或者类似的东西。

# c - 理解以下行

> ID：11063061
> 
> 赞同：0
> 
> 时间：2012-06-16T11:33:43.150
> 
> 标签：c, arrays, pointers, casting

我在用于向 LCD 显示位图 (.bmp) 的库中阅读了此代码。
我真的很难理解以下几行发生了*什么，以及它是**如何*发生的。

也许有人可以向我解释这一点。

```
uint16_t s, w, h;
uint8_t* buffer;   // does get malloc'd

s = *((uint16_t*)&buffer[0]);
w = *((uint16_t*)&buffer[18]);
h = *((uint16_t*)&buffer[22]); 
```

我想这对于一个真正的 C 程序员来说并不难，但我还在学习，所以我想我只是问一下 :)
据我所知，它以某种方式将两个`uint8_t`变量结合到一个`uint16_t`.

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:08:40.250

在您提供的代码中，`buffer`读取（这是一个字节数组），并将值提取到`s`,`w`和`h`.

`(uint16_t*)&buffer[n]`语法意味着您要提取 的第 n 个字节的地址，^(并将)其`buffer`转换为`uint16_t*`. 转换告诉编译器查看这个地址，就好像指向 a `uint16_t`，*即*一对`uint8_t`s。
代码中的附加`*`项取消引用指针，*即*从该地址中提取值。由于地址现在指向 a `uint16_t`，`uint16_t`因此提取了一个值。

因此：

1.  `s`获取 first 的值`uint16_t`，*即*字节 0 和 1。
2.  `w`获取第十个的值`uint16_t`，*即*字节 18 和 19。
3.  `h`获取第十二个的值`uint16_t`，*即*字节 22 和 23。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:56:32.843

```
uint8_t* buffer; // pointer to 8 bit or simply one byte 
```

缓冲区指向字节的内存地址 -> |byte0|byte1|byte2|....

```
(uint16_t*)&buffer[0] // &buffer[0] is actually the same as buffer 
```

`(uint16_t*)&buffer[0]`等于`(uint16_t*)buffer`; 它指向 16 位或半字

`(uint16_t*)buffer`指向内存：|byte0byte1 = halfword0|byte2byte3 = halfword1|....

```
w = *((uint16_t*)&buffer[18]); 
```

将内存地址获取到缓冲区中的第 18 个字节，然后将此地址重新解释为半字地址，然后在此地址上获取半字；它只是**w = byte18 和 byte19 粘在一起形成一个半字**

```
h = *((uint16_t*)&buffer[22]); 
```

**h = byte22 和 byte 23 粘在一起**

**UPD**更详细的解释：

`h = *((uint16_t*)&buffer[22])`=>

1） `buffer[22]`===缓冲区的第22个uint8_t（又名字节）；我们称它为 byte22

2) `&buffer[22]`=== &byte === byte22在内存中的地址；它是 uint8_t* 类型，与缓冲区相同；我们称之为 byte22_address；

3) `(uint16_t*)&buffer[22]`= (uint16_t*)byte22_address; 将字节的地址转换为（两个字节粘在一起的地址；同一地址的半字地址；我们称之为 halfword11_address；

4) `h = *((uint16_t*)&buffer[22])`=== *halfword11_address; * 运算符在地址处取值，即第 11 个半字或字节 22 和 23 粘在一起；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:57:05.817

编码：

*   在缓冲区中的位置 0 和 1 处获取两个字节，将它们粘在一起形成一个无符号的 16 位值，并将结果存储在`s`;
*   它对字节 18/19 执行相同的操作，将结果存储在`w`;
*   字节 22/23 和`h`.

值得注意的是，代码使用目标平台的原生[字节顺序](http://en.wikipedia.org/wiki/Endianness)来决定两个字节中的哪一个代表结果的前 8 位，哪些代表后 8 位。

# android - 在android中解析Picasa API JSON Feed

> ID：11063064
> 
> 赞同：0
> 
> 时间：2012-06-16T11:34:11.660
> 
> 标签：android, json, google-api-java-client, picasa

嗨，我正在尝试实现一个在 android 中显示 picasa 照片的简单应用程序。

经过多次试验，现在我使用 Google Java Api 客户端（不是 Gdata 客户端）来获取 Picasa Feed。

在我的程序中，可以成功映射提要中 JSON 的第一层字段（例如下面`version`的`encoding`代码），因此提要和连接没有问题但是我无法将第二层字段映射到对象中。

我使用`albumFeed = response.parseAs(AlbumFeed.class);` 它将调用解析器。

从官方样本我有这个 AlbumFeed.java

```
 public class AlbumFeed {

      // cannot be List
      @Key
      List<AlbumEntry> feed;

      @Key
      String version;

      @Key
      String encoding;

} 
```

与 `List <AlbumEntry> feed`; 我会收到这个错误，说无法启动列表

`06-16 14:35:10.789: E/AndroidRuntime(1129): Caused by: java.lang.IllegalArgumentException: unable to create new instance of class java.util.List because it is an interface and because it has no accessible default constructor`

我更改为 `ArrayList<AlbumEntry> feed` 不会显示错误，但 ArrayList 将为空。谁能告诉我使用给定的 JsonObjectParser 将 JSON 映射到对象的正确方法？

非常感谢如果有人能回答我的问题

**更多代码**

```
public class newApiActivity extends Activity {

  HttpTransport transport = AndroidHttp.newCompatibleTransport();
  static final JsonFactory JSON_FACTORY = new JacksonFactory();

  public static HttpRequestFactory createRequestFactory(HttpTransport transport) {
    return transport.createRequestFactory(new HttpRequestInitializer() {
      public void initialize(HttpRequest request) {

        // final JsonCParser jsoncparser = new JsonCParser(JSON_FACTORY);

        request.setParser(new JsonObjectParser(GSON_FACTORY));
        // request.setParser(jsoncparser);

        GoogleHeaders headers = new GoogleHeaders();
        headers.setApplicationName("APOD/1.0");
        headers.setGDataVersion("2");
        request.setHeaders(headers);
      }
    });
  }

public void mainLogic(){
HttpRequest buildGetRequest = reqFactory.buildGetRequest(url);

        HttpResponse response = buildGetRequest.execute();
        albumFeed = response.parseAs(AlbumFeed.class);

} 
```

}

其中 AlbumEntry.java 类似于我正在使用 xmlns 来测试行为）

```
 public class AlbumEntry extends Entry {

  @Key("xmlns")
  public String xmlns;

    } 
```

JSON Feed 本身就像：

```
{"version":"1.0","encoding":"UTF-8",
"feed":{"xmlns":"http://www.w3.org/2005/Atom","xmlns$gphoto":"http://schemas.google.com/photos/2007,……}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:22:20.353

愚蠢的我。与 android/picasa api 上下文无关。

在阅读了有关 GSON 文档的更多信息后，根据 json object {} 将是一个 map 而不是一个 array 。数组可以映射到 List，map 可以映射到 Object 或 Map

我变简单了

`@Key AlbumEntry feed;`

在`AlbumFeed.java`

它开始工作。

关于 GSON 的一个很好的参考在这里 [Converting JSON to Java](https://stackoverflow.com/questions/1688099/converting-json-to-java/1688182#1688182)

# javascript - 在用户将鼠标悬停在链接上 2 秒后执行函数

> ID：11063069
> 
> 赞同：5
> 
> 时间：2012-06-16T11:34:56.153
> 
> 标签：javascript, jquery

是的，我知道以前有人问过这个问题，但我找不到有效的答案。这是其他问题之一的公认答案：

```
$('#element').hover(function()
{
    $(this).data('timeout', window.setTimeout(function()
    {
        alert('hovered for 2 seconds');
    }, 2000));
},
function()
{
    clearTimeout($(this).data('timeout'));
    alert('mouse left');
}); 
```

[http://jsfiddle.net/nCcxt/](http://jsfiddle.net/nCcxt/)

如您所见，它没有做它应该做的事情。

我需要的理论上很简单，但我无法让它工作 - 当用户将鼠标悬停在链接上 2 秒时，会调用一个函数。如果用户在 2 秒过去之前将鼠标移开，则不会发生任何事情。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T11:36:25.173

代码[工作得很好](http://jsfiddle.net/ThiefMaster/nCcxt/1/)。`alert()`它仅由于导致触发 mouseout 事件的调用而中断 。

我们从中学到什么？**不要`alert()`与焦点/悬停/鼠标移动相关的事件结合使用。**

顺便说一句，已经有 jQuery 插件可用于您想做的事情：[http ://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

# php - Ajax 使用单个输入框搜索多个参数

> ID：11063076
> 
> 赞同：0
> 
> 时间：2012-06-16T11:36:19.553
> 
> 标签：php, jquery, mysql, ajax

尝试实现类似于[此处](http://www.proptiger.com/)的搜索。这将根据**城市、地区、房产名称和建筑商名称**搜索属性。现在有一个较小的版本正在工作，它仅搜索我附加城市名称的地区名称。

```
$(document).ready(function(){
        //alert("Entered");
        $("#searchId").keyup(function() 
        {
        var searchbox = $(this).val();
        var dataString = 'searchword='+ searchbox;

        if((searchbox=='') || (searchbox=='e.g') )
        {
            //$('#display').css('display') == 'none';
            $('#display').hide();
        }
        else
        {   

            if("#searchId".length>3)
        {
            $.ajax({
            type: "POST",
            url: "search.php",
            data: dataString,
            cache: false,
            success: function(html)
            {
                $("#display").html(html).show();    

                $(".name").click(function(){
                                    //  alert($(this).text());
                                            $("input#searchId").val($(this).text());
                                            $('#display').hide();
                                }); 
             }          
            });

        }
        }return false;    

        });                 

        }); 
```

在 search.php 我有这样的查询，

```
$sql_res=mysql_query("select * from locality as loc inner join cities as cit on loc.city_id=cit.city_id where locality_name like '%$q%' or city_name like '%$q%' order by locality_id LIMIT 5"); 
```

但我希望它的功能类似于给定的链接。**下拉列表应显示所选条件的名称及其前面的类型**（例如：Pune(criteria) city(type)）。如何编写**sql 语句和 ajax /jquery**函数来实现这个？？

**编辑：** 为输入框添加 HTML

```
 <input type="text" autocomplete="off" class="homeinput ac_input" title="Search" id="searchId" name="SearchValue" value="e.g lodha new cuffe parade, thane mumbai" onFocus="if(this.value=='e.g lodha new cuffe parade, thane mumbai') this.value='';" onBlur="if(this.value=='') this.value='e.g lodha new cuffe parade, thane mumbai';"> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:45:50.623

我认为你最好有两个不同的 MySQL 搜索。像...

```
$sql_res=mysql_query("select * from locality as loc inner join cities as cit on loc.city_id=cit.city_id where locality_name like '%$q%' order by locality_id LIMIT 5"); 
```

然后第二个...

```
$sql_res=mysql_query("select * from locality as loc inner join cities as cit on loc.city_id=cit.city_id where city_name like '%$q%' order by locality_id LIMIT 5"); 
```

然后使用您的 php 将两个查询的结果与每行末尾的 [type] 连接起来。你的 jQuery 真的不需要改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:41:28.643

在你看下面的代码之前，有几点需要注意：

*   这看起来很容易受到 SQL 注入的影响。在插入此查询之前，无法查看您的 PHP 代码以及您要执行的操作 $q ...我要说的是：小心。如果您不验证 $q 的输入，我所要做的就是输入：“'; DROP TABLE localities;” **请注意，这在技术上不起作用，因为 mysql_query 仅支持单个命令，但风险仍然存在**
*   这种查询类型不允许您使用索引，并且可能执行速度很慢。考虑删除 $q 之前的 %，以允许 MySQL 使用索引，或者切换到具有部分单词索引功能的全文引擎。如果这个表足够大，这可能会变得很慢

但是，这是正确的方法：

```
(
    SELECT
      'Locality' AS `type`,
       `locality_name` AS `name`
    FROM
       `locality`
    WHERE
       `locality_name` LIKE '%$q%'
)
UNION ALL
(
    SELECT
       'City' AS `type`,
       `city_name` AS `name`
    FROM
       `cities`
    WHERE
       `city_name` LIKE '%$q%'
) 
```

# azure - MVC4 显示模式不一致

> ID：11063079
> 
> 赞同：0
> 
> 时间：2012-06-16T11:37:09.543
> 
> 标签：azure, asp.net-mvc-4, visual-studio-2012

我在 ASP.NET MVC4 Beta 上遇到了一个非常奇怪的情况，DisplayModes 只是间歇性地在我的手机上工作。我有一个 HTC Desire 的用户代理

```
Mozilla/5.0 (Linux; U; Android 2.1-update1; de-de; HTC Desire 1.19.161.5 Build/ERE27) AppleWebKit/530.17 (KHTML, like Gecko) Version/4.0 Mobile Safari/530.17 
```

当我安装了 VS2010 SP1 并使用新的 MVC4 应用程序时，我的 Desire 从未被用作移动设备，但 iPhone 和其他几个工作正常，IsMobileDevice 总是错误的。我上传到 Azure，不出所料，我的手机仍未被检测为手机。

一旦我安装了 VS2012，但仍在使用 VS2010，我的 Desire 就开始被当作手机使用。用户代理完全相同，但现在 IsMobileDevice 为 True。但是，当我上传到 Azure 时，它​​仍然没有被检测为移动设备。

纵观这一切，没有错误，只是上述行为。我现在在有多个不同项目的两台机器上遇到了完全相同的问题。在所有情况下，用户代理都被正确检测到，只是 IsMobileDevice 的值发生了变化。

我曾尝试仅使用 bin 可部署程序集中的 MVC4 程序集部署到 Azure，并且我还尝试在包上引导 .net 4.5 安装程序，但这没有任何区别。

我知道我可以覆盖 DisplayMode 来破解修复程序，但是如果我想使用 MVC ViewSwitcher 并且不能真正解决问题，这对我没有帮助。

一些帮助将不胜感激，因为我已经没有想法了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:17:28.973

你有一个名为*** .mobile.cshtml 的文件吗？如果您希望 MVC 自动为移动浏览器呈现不同的视图，则这是必需的。请尝试按照[http://www.windowsazure.com/en-us/develop/net/tutorials/aspnet-mvc-4-mobile-website/](http://www.windowsazure.com/en-us/develop/net/tutorials/aspnet-mvc-4-mobile-website/)上的说明来获取更多信息。

此致，

明旭。

# c# - WebClient 抛出“没有可用于编码 1252 的数据”

> ID：11063080
> 
> 赞同：2
> 
> 时间：2012-06-16T11:37:15.527
> 
> 标签：c#, visual-studio-2010, encoding, webclient, windows-1252

我正在制作一个运行良好的程序，除了我开始创建一个更新系统并且不知何故它不工作。启动屏幕使用 webClient 检查更新，现在似乎也出错了。我进行了设置，以便启动屏幕下载文本文件。如果版本不匹配，则会启动一个单独的表单并使用 webClient 下载更新程序。我已经创建了这个表单两次。它有 1 个进度条、1 个 webClient、一个图像背景和 1 个标签。更新应该下载，在栏上显示其进度，然后打开更新程序并关闭主程序。我第一次创建表单时，我运行它，它会冻结而不下载文件。停止调试后，visual c# express 2010的设计窗口会崩溃，我不得不重新启动vc#。该窗口将显示我添加的所有项目，除了 webClient。

```
Error   1   Invalid Resx file. Type  in the data at line 138, position 5, cannot be loaded because it threw the following exception during construction: No data is available for encoding 1252\.    C:\Users\DjLyriz\documents\visual studio 2010\Projects\TubeRip\TubeRip\updates.resx TubeRip

Error   2   TargetInvocationException: Type  in the data at line 138, position 5, cannot be loaded because it threw the following exception during construction: No data is available for encoding 1252.
at System.Resources.ResXResourceReader.ParseXml(XmlTextReader reader)
at System.Resources.ResXResourceReader.EnsureResData()
at System.Resources.ResXResourceReader.GetEnumerator()
at Microsoft.Build.Tasks.ProcessResourceFiles.ReadResources(ReaderInfo readerInfo, IResourceReader reader, String fileName)
at Microsoft.Build.Tasks.ProcessResourceFiles.ReadResources(String filename, Boolean shouldUseSourcePath)
at Microsoft.Build.Tasks.ProcessResourceFiles.ProcessFile(String inFile, String outFileOrDir)
XmlException: Type  in the data at line 138, position 5, cannot be loaded because it threw the following exception during construction: No data is available for encoding 1252\. Line 138, position 5.

NotSupportedException: No data is available for encoding 1252.
at System.Text.BaseCodePageEncoding.LoadCodePageTables()
at System.Text.BaseCodePageEncoding..ctor(Int32 codepage, Int32 dataCodePage)
at System.Text.SBCSCodePageEncoding..ctor(SerializationInfo info, StreamingContext context)
C:\Users\DjLyriz\documents\visual studio 2010\Projects\TubeRip\TubeRip\updates.resx TubeRip 
```

所以我从表单中删除了 webClient 并重试。我第二次遇到同样的错误。所以我用谷歌搜索了第一个错误，并在 hackforums 上找到了一个没有修复的回复。现在我完全迷路了。我所有的 webClients 似乎现在都在这样做，我不知道为什么。

这是我的启动画面中的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;

namespace TubeRip
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        timer1.Start();
        getupdates();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        timer2.Start();
    }

    private void timer2_Tick_1(object sender, EventArgs e)
    {
        timer1.Stop();
        label1.Text = "Loading Core Components..." + " " + progressBar1.Value.ToString() + "%";

        if (progressBar1.Value < 20)
        {
            progressBar1.Value += 1;
        }
        else
        {
            timer3.Start();
        }
    }
    private void end()
    {
        timer7.Stop();
        mainpage home = new mainpage();
        home.Show();
        this.Dispose(false);
    }

    private void timer3_Tick(object sender, EventArgs e)
    {
        timer2.Stop();
        label1.Text = "Loading Encryption Algorithyms..." + " " + progressBar1.Value.ToString() + "%";
        if (progressBar1.Value < 40)
        {
            progressBar1.Value += 1;
        }
        else
        {
            timer4.Start();
        }
    }

    private void timer4_Tick(object sender, EventArgs e)
    {
        timer3.Stop();
        label1.Text = "Enabling Download Services..." + " " + progressBar1.Value.ToString() + "%";
        if (progressBar1.Value < 60)
        {
            progressBar1.Value += 1;
        }
        else
        {
            timer5.Start();
        }

    }

    private void timer5_Tick(object sender, EventArgs e)
    {
        timer4.Stop();
        label1.Text = "Disabling Youtube's Download Protection..." + " " + progressBar1.Value.ToString() + "%";
        if (progressBar1.Value < 80)
        {
            progressBar1.Value += 1;
        }
        else
        {
            timer6.Start();
        }

    }

    private void timer6_Tick(object sender, EventArgs e)
    {
        timer5.Stop();
        label1.Text = "Drawing GUI" + " " + progressBar1.Value.ToString() + "%";
        if (progressBar1.Value < 90)
        {
            progressBar1.Value += 1;
        }
        else
        {
            timer7.Start();
        }
    }

    private void timer7_Tick(object sender, EventArgs e)
    {
        timer6.Stop();
        label1.Text = "Creating The first Humanlike Robot..." + " " + progressBar1.Value.ToString() + "%";
        if (progressBar1.Value < 100)
        {
            progressBar1.Value += 1;
        }
        else
        {
            end();
        }
    }
    private void getupdates()
    {
        try
        {
            string updateurl = "http://dl.dropbox.com/u/22054429/TubeRip_version.txt";
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(updateurl);
            WebResponse response = request.GetResponse();
            System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream(), System.Text.Encoding.GetEncoding("windows-1252"));
            string update = sr.ReadToEnd();
            int build = Convert.ToInt32(update);
            int thisbuild = 2;
            if (build > thisbuild)
            {
                label2.Visible = true;
                TubeRip.Properties.Settings.Default.UpdateAvail = true;
            }
            else
            {
                label2.Visible = false;
                TubeRip.Properties.Settings.Default.UpdateAvail = false;
            }
        }
        catch
        {
            MessageBox.Show("Unable to connect to update server! Please try again later.");
        }
    }

}
} 
```

这是我的更新程序的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using System.Net;

namespace TubeRip
{
public partial class updates : Form
{
    public updates()
    {
        InitializeComponent();
    }

    private void updates_Load(object sender, EventArgs e)
    {
        Uri update = new Uri("http://dl.dropbox.com/u/22054429/TubeRip_Installer.exe");
        webClient1.DownloadFileAsync(update, "update.exe");
        webClient1.DownloadProgressChanged +=new DownloadProgressChangedEventHandler( webClient1_DownloadProgressChanged);
        webClient1.DownloadFileCompleted += new AsyncCompletedEventHandler( webClient1_DownloadFileCompleted);
    }
    void  webClient1_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
    {
        Process.Start("update.exe");
        Environment.Exit(0);
    }
    void  webClient1_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        progressBar1.Value = e.ProgressPercentage;
        label1.Text = "Downloading Updates Please Wait... " + e.ProgressPercentage.ToString() + "%";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:11:25.460

我没有找到针对我的具体错误的任何结果，但我确实找到了解决它的方法。我没有为 webClient 使用默认编码，而是将自己的编码设置为 UTF-8，这样不会引发此错误。修改后的代码最终起作用了。

```
WebClient client = new WebClient();
client.Encoding = System.Text.Encoding.UTF8;
Uri update = new Uri(uri);
client.DownloadFileAsync(update, "update.exe");
client.DownloadProgressChanged +=new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted); 
```

否则，我没有找到解决此问题的方法，也没有出现此问题的原因。

# google-chrome-extension - 在 Google Chrome 网上应用店中使用自动更新

> ID：11063082
> 
> 赞同：2
> 
> 时间：2012-06-16T11:37:21.080
> 
> 标签：google-chrome-extension, auto-update

我正在为 Google Chrome 做一个扩展，我使用代码进行[自动更新](http://code.google.com/chrome/extensions/autoupdate.html)。这是因为该扩展程序尚未出现在 Google Chrome 网上商店中。但过几天我会把它上传到网上商店，谷歌说你可以使用网上商店自动更新。但如果我不想使用它，我的应用程序是否仍会像现在一样由我自己的服务器更新？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:49:02.030

我同意文档对此不是很清楚：

> 如果您使用 Chrome 开发者仪表板发布您的扩展程序，您可以忽略此页面。您可以使用仪表板向用户以及 Chrome 网上应用店发布扩展程序的更新版本。

但是，我自己测试过，当您通过 Chrome 网上应用店 (CWS) 发布扩展程序时，您的`update_url`设置将被覆盖。`manifest.json`换句话说，发布到 CWS 意味着您不能再使用自托管自动更新。

我能想到的原因可能如下：

*   CWS 希望跟踪每个扩展的统计信息（即使用每个扩展的用户数量）
*   隐私问题（人们不希望您在更新扩展程序时跟踪他们）
*   安全问题（每个扩展更新都必须经过 CWS 验证过程）

如果你想跟踪人（请不要）在你的扩展程序的背景页面上使用谷歌分析。

# android - 带多个把手的滑动抽屉

> ID：11063083
> 
> 赞同：0
> 
> 时间：2012-06-16T11:37:33.063
> 
> 标签：android, slidingdrawer

我想创建从右到左的滑动抽屉，它有两个用于加载不同内容的手柄。手柄位置应该在屏幕的中心和底部之间，这样每当我用任何手柄滑动时，应用程序都应该在整个屏幕上显示相应的内容。

我检查了较早的滑动抽屉的问题和解决方案，但对我的情况无济于事。

*   默认情况下，滑动抽屉的手柄位置位于屏幕的中心右侧。当我放置两个手柄时，第二个手柄重叠在另一个手柄上，我只能看到一个手柄。

*   尝试将 PaddingBottom 保持为 200dp。现在我可以看到两个
    把手，但是两个把手都显示了第二个滑动抽屉的内容
    。

*   将滑动抽屉保留在线性布局内，并将两个滑动抽屉的 layout_weight 分配
    为 1。这样一来，整个画面就被分成
    了两等份。但我想为每个手柄使用整个屏幕。

有人可以在这方面提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:54:30.613

滑动抽屉可以根据开发者的站点放​​置在框架或相对布局中。您可以在 xml 中的抽屉中存在的布局内设置布局的顶部偏移量。希望它有效。对我的代码工作得很好。

# c# - 为什么我会从 .NET 的 StartsWith 中看到这种意外行为？

> ID：11063084
> 
> 赞同：9
> 
> 时间：2012-06-16T11:37:36.650
> 
> 标签：c#, .net

这一定是一个 .NET 错误，对吧？

`"KonNy".StartsWith("Kon")`返回 false，while`"KonNy".StartsWith("Ko")`并`"KonN".StartsWith("Kon")`返回 true。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-16T11:47:06.570

从评论中重复：

我不具体了解 .NET，但我怀疑如果`StartsWith`遵循`nny`单个字母的排序规则，例如匈牙利语，您可能会观察到这种现象。如果我是对的，并且如果您将排序规则更改为中性排序规则，那么您的“错误”就会消失。:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-16T11:39:59.927

编辑：这是一个文化敏感性问题，仅在匈牙利文化中出现。复制：

```
using System;
using System.Globalization;

class Test
{
    static void Main()        
    {
        foreach (var culture in CultureInfo.GetCultures(CultureTypes.AllCultures))
        {
            if (!"KonNy".StartsWith("Kon", false, culture))
            {
                Console.WriteLine(culture);
            }
        }
    }
} 
```

输出：

```
hu
hu-HU 
```

如果您想要一个不区分文化的比较，请`StringComparison.Ordinal`根据 usr 的答案指定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:41:26.830

我怀疑您的字符串中有一些零宽度或不可打印的字符。Unicode 字符空间包含一些令人讨厌的、不直观的惊喜。尝试在您的字符串文字上调用 ToCharArray 并检查生成的字符代码。

并尝试使用 StringComparison.Ordinal 调用 StartWith 以确保您的文化不会干扰。

# mod-rewrite - 如何更改 htaccess 以访问 symfony 网页目录

> ID：11063089
> 
> 赞同：3
> 
> 时间：2012-06-16T11:37:50.610
> 
> 标签：mod-rewrite, symfony

我在 Windows7 和 Xampp 中运行 symfony2：

`http://localhost/symfony/web/app_dev.php/hello/symfony`

如何使用下面的链接更改 web/.htaccess 文件以访问 symfony？

`http://localhost/app_dev.php/hello/symfony`

默认的 .htaccess 是：

```
重写引擎开启
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L]

```

我尝试添加`Rewrite RewriteBase /symfony/web/`or `RewriteBase symfony/web/`then`php app/console cache:clear --env=prod --no-debug`并尝试重新启动 apache。

```
重写引擎开启
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ app.php [QSA,L]
RewriteBase /symfony/web/ 或 RewriteBase symfony/web/

```

我可以在 Nginx 中使用反向代理做同样的事情吗？如何更改访问没有`symfony/web`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:07:50.923

尝试添加`127.0.0.1 www.mysymfony.com.localhost` 到 etc/hosts 将以下内容添加到 httpd.conf

```
# Be sure to only have this line once in your configuration<br>
NameVirtualHost 127.0.0.1:80

# This is the configuration for your project
Listen 127.0.0.1:80

<VirtualHost 127.0.0.1:80>
  ServerName www.mysymfony.com.localhost
  DocumentRoot "D:\xampp\htdocs\symfony\web"
  DirectoryIndex app.php
  <Directory "D:\xampp\htdocs\symfony\web">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

访问这个链接 `[http://www.mysymfony.com.localhost/app_dev.php/demo/hello/symfony](http://www.mysymfony.com.localhost/app_dev.php/demo/hello/symfony)` 它给出了一个错误，没有这个链接

# c - while 循环继续不中断

> ID：11063090
> 
> 赞同：0
> 
> 时间：2012-06-16T11:37:57.030
> 
> 标签：c

我已经制作了一个我必须输入的代码

```
1 . no of questions
2\.  difficulty for every question
3 . no. of queries( query is to find median of difficulty questions between questions no. given in next line) 
4 . question no.s to find median 
```

循环继续，直到没有输入。

```
#include<stdio.h>

int main()
{
    int ques,count=0;
    while(scanf("%d",&ques))
    {
        int i,diff,se,fi,j,query,arr[100];
        for(i=0;i<ques;i++)
        {
            scanf("%d",&diff);
            arr[i] = diff;
        }
        count++;
        printf("Case %d:\n",count);
        scanf("%d",&query);
        for(i=0;i<query;i++)
        {

            int sum = 0;
            scanf("%d %d",&fi,&se);
            for(j=fi-1;j<se;j++)
            {
                sum = sum+ arr[j];
            }
            sum = sum/((se-fi)+1);
            printf("%d\n",sum);
        }
    }
    return 0;
} 
```

在这里我给出两个输入

```
5
5 3 2 4 1
3
1 3
2 4
3 5
5
10 6 4 8 2
4
1 3
2 4
3 5
2 3
6
2 56 2 3 5 4
1
2 5 
```

但我的输出应该只达到案例 3：

```
Case 1:
3
3
2
Case 2:
6
6
4
5
Case 3:
16
Case 4:
4
Case 5:
4
Case 6:
4
Case 7:
4
Case 8:
4
Case 9:
4
Case 10:
4
Case 11:
4
Case 12:
4
Case 13:
4
Case 14:
4
Case 15:
4 
```

它继续下去：告诉我为什么会这样：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:57:46.037

你需要检查返回值`scanf`，如果你给control-D，它会返回-1，在你的程序中意味着你需要退出，但是-1会导致while条件为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:03:39.870

无论您何时结束，您的输入中都没有更多的值。它返回 -1 ；但是您的代码似乎将“0”作为退出，这使 -1 为真并且您的代码正在运行。

# mysql - MySQL：查询和连接两个表

> ID：11063092
> 
> 赞同：2
> 
> 时间：2012-06-16T11:38:08.820
> 
> 标签：mysql

我有两张我想加入的表。我对此很陌生，并不完全确定……</p>

第一个表称为**场所**，变量*id、slug、名称*等。第二个表是**场所术语**，变量*id、选项、场所、值*。匹配的变量显然是*venues.id*和venue_terms.venue。

我想要做的是查询匹配值的**场地术语**，然后`SELECT * FROM venues`匹配。

我一直在使用以下查询，但无法使其正常工作。我知道 INTERSECT 不是解决方案，但我很确定应该使用哪个 JOIN。

```
SELECT venue
FROM venue_terms
WHERE `option` = '1' AND `value` = '10'

INTERSECT

SELECT venue
FROM venue_terms
WHERE `option` = '2' AND `value` = '4'; 
```

我想将这些场地_terms.venue 与**场地**表相匹配。有人可以指出我正确的方向吗？

更新：为了澄清，我正在尝试搜索最终具有相同venue.id的多个选项/值组合。基本上，我希望能够找到 (option = 1 and value = 4) AND (option = 2 and value = 10) AND etc...的所有场所，所有这些都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T20:16:55.690

您想在 table 的**两**行中找到`venues`匹配条件。这可以通过各种方法来实现。最常见的做法是加入该表两次（另一个是通过分组查询）。**`venue_terms`**

 **这是第一种方法。加入`venue_terms`表两次：

```
SELECT v.id                                  --- whatever columns you need 
     , v.slug                                --- from the venues table
     , v.name
FROM venues AS v
  INNER JOIN venue_terms AS vt1
    ON  vt1.venue = v.id
  INNER JOIN venue_terms AS vt2
    ON  vt2.venue = v.id
WHERE ( vt1.option = 1 AND vt1.value = 10 )
  AND ( vt2.option = 2 AND vt2.value = 4 ) ; 
```

如果你有3个条件，加入三次。如果你有10个条件，加入10次。`(option, value, venue)`在 terms 表中使用复合索引会提高查询的效率。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:56:19.967

这个怎么样？

```
SELECT t1.*, t2.*
FROM venue t1 JOIN venue_terms t2
ON t1.id = t2.venue
WHERE (t2.option = 1 AND t2.value = 10) 
```

***注意：我相信 option 和 value 是 type `INT`。***

***如果它们是类型，`varchar`则将上述查询更改为***

```
SELECT t1.*, t2.*
FROM venue t1 JOIN venue_terms t2
ON t1.id = t2.venue
WHERE (t2.option = '1' AND t2.value = '10') 
```

* * *

## 更新 1

根据您的新要求，您只需要使用`OR`如下所示的选项添加该条件。

```
SELECT t1.*, t2.*
FROM venue t1 JOIN venue_terms t2
ON t1.id = t2.venue
WHERE 
     (t2.option = 1 AND t2.value = 10)
     OR
     (t2.option = 3 AND t2.value = 14) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T12:04:03.397

试试这个

```
SELECT venue.*, venue_terms.*
FROM venue 
INNER JOIN venue_terms ON venue.id = venue_terms.venue 
WHERE venue_terms.option IN ( 1 ,2)
AND venue_terms.value IN (10,4)
GROUP BY venue.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T11:47:38.877

这将连接两个表并打印出与venue_terms 中的属性（选项、值）匹配的场所：

```
SELECT v.* FROM venue v, venue_terms vt
WHERE v.id = vt.venue
AND vt.option = 1 
AND vt.value = 10 
```**

# jquery - Ajax post方法在codeigniter中不起作用

> ID：11063098
> 
> 赞同：1
> 
> 时间：2012-06-16T11:39:22.833
> 
> 标签：jquery, ajax, codeigniter

Ajax 帖子在我的代码中不起作用我不知道原始代码（控制器代码）的确切问题请帮助我

```
class Ajax_post extends CI_Controller {

function __construct()
{
parent::__construct();  
$this->load->helper(array('url'));
}

function index()
{

$this->load->view('ajax_post');
}

function post_action()
{

if(($_POST['username'] == "") || ($_POST['password'] == ""))
{
  $message = "Please fill up blank fields";
  $bg_color = "#FFEBE8";

}elseif(($_POST['username'] != "myusername") || ($_POST['password'] != "mypassword")){
  $message = "Username and password do not match.";
  $bg_color = "#FFEBE8";

}else{
  $message = "Username and password matched.";
  $bg_color = "#FFA";
}

$output = '{ "message": "'.$message.'", "bg_color": "'.$bg_color.'" }';

}
}

?> 
```

这是我的查看页面代码

```
 <div id="form_message"></div>
    <form name="ajax_form" id ="ajax_form" method="post">

      Username/Email:*<input type="text" name="username" id="username" size="30" /><br/><br/>
      Password:*<input type="password" name="password" id="password" size="30" /><br/><br/>
      <input type="submit" value="Submit" name="login_submit" id="login_submit" onClick="getData();"/>

  </form>
</div> 
```

这是我的 javascript 代码 (ajax_post.js)

```
 function getData(){

    var username=$("#username").val();
    var password=$("#password").val();      
    $.ajax({
    type: "GET",
    url: "http://localhost/CodeIgniter/index.php/ajax_post/post_action",
    dataType: "json",
    data: "username="+username+"&password="+password,
    cache:false,
    success: 
      function(data){
          alert(data);
          }
     // $("#form_message").html(data.message).css({'background-color' : data.bg_color}).fadeIn('slow'); 

});
}
 </body> 
```

我整天坚持这件事..

请任何人告诉我做控制器和js代码的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:40:57.797

您没有发出 POST 请求，请尝试

```
$.ajax({
    type: "POST", //notice the change 
```

通过指定`type`as`POST`您将能够发出 POST 请求

或者你可以使用[`$.post`](http://api.jquery.com/jQuery.post/)

这是链接到[`$.ajax`](http://api.jquery.com/jQuery.ajax/)

编辑

单击提交按钮时，您需要取消表单提交的默认行为，例如

```
function getData() {
  var username = $("#username").val();
  var password = $("#password").val();
  $.ajax({
    type:"POST",
    url:"http://localhost/CodeIgniter/index.php/ajax_post/post_action",
    dataType:"json",
    data:{username:username,password:password},
    cache:false,
    success:function (data) {
      alert(data);
    }  
  });
 return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:41:40.443

事实上，正如您所提到的，您正在发出“GET”请求`type: "GET"`。这是您修改后的js代码。

```
function getData() {
  var username = $("#username").val();
  var password = $("#password").val();
  $.ajax({
    type:"POST",
    url:"http://localhost/CodeIgniter/index.php/ajax_post/post_action",
    dataType:"json",
    data:"username=" + username + "&password=" + password,
    cache:false,
    success:function (data) {
      alert(data);
    }
    // $("#form_message").html(data.message).css({'background-color' : data.bg_color}).fadeIn('slow');
  });
} 
```

编辑：尝试以下代码。从提交按钮中删除 onclick 属性及其值

```
$('#ajax_form').submit(function(){
  var username = $("#username").val();
  var password = $("#password").val();
  $.ajax({
    type:"POST",
    url:"http://localhost/CodeIgniter/index.php/ajax_post/post_action",
    dataType:"json",
    data:"username=" + username + "&password=" + password,
    cache:false,
    success:function (data) {
      alert(data);
    }
    // $("#form_message").html(data.message).css({'background-color' : data.bg_color}).fadeIn('slow');
  });
  return false;
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T07:09:20.097

我看到什么在这里不起作用。

利用

```
onClick="getData(); return false;" // in your submit button 
```

或者

```
function getData(e){
e.preventDefault();
//your code 
```

或者

```
success: 
  function(data){
      alert(data);
return false;
      }
error : function(){
return false;
}
//stops the default dom form submission after success 
```

确保已加载 jquery！

并确保如果您使用其他 javascripts 任何功能都没有错误，请使用控制台窗口查看 js 错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-04T14:10:32.550

function getData(){

```
var username=$("#username").val();
var password=$("#password").val();      
$.ajax({
type: "POST",
url: "http://localhost/CodeIgniter/index.php/ajax_post/post_action",
dataType: "json",
data: {username : username , password :password},
cache:false,
success: 
  function(data){
      alert(data);
      }
 // $("#form_message").html(data.message).css({'background-color' : data.bg_color}).fadeIn('slow'); 
```

}); }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T11:46:09.443

首先，您使用的是 $_POST。使用 $this->input->post('var') 或获取。其次，您没有返回 json 数据。改用这个。

```
$.ajax(’url’).done(function(data){
$(’#message’).html(data);
 }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T14:47:53.113

您是否尝试过检查确切的回调数据？我不亲自构造一个 json 字符串。您可以尝试制作一组​​数据

```
$data = array();
$data['message'] = //assign here ;
$data['bg_color'] = //assign here ; 
```

然后使用 json_encode 进行输出。

```
echo json_encode($data); 
```

该代码将为您生成 json 字符串。您可以像这样轻松地在 js 回调中获取数据

```
data.message
data.bg_color 
```

这段代码对我帮助很大。希望能帮助到你。

# c++ - 未定义的符号 - 符号查找错误

> ID：11063099
> 
> 赞同：2
> 
> 时间：2012-06-16T11:39:35.340
> 
> 标签：c++, linux, eclipse, sfml

我正在尝试使用 Eclipse 编译 SFML 2.0 教程。该程序编译得很好，但是当我运行它时，我收到以下错误：

> /home/eXistys/workspace/SFML/Debug/SFML：符号查找错误：/home/eXistys/workspace/SFML/Debug/SFML：未定义符号：_ZN2sf12RenderStates7DefaultE

在*GCC C++ Compiler > Includes*下，我有：

*   `/home/eXistys/SFML/include`

在 GCC C++ Linker 下我有：

*   `sfml-图形
*   `sfml-窗口
*   `sfml 系统

这可能是什么？谷歌没有给出任何结果，SFML 论坛没有给出任何有用的信息，而且我找不到任何与 stackoverflow 真正相关的内容。

这是我编译成功的代码（[本教程](http://www.sfml-dev.org/tutorials/2.0/start-linux.php)的源代码）：

```
#include <SFML/Graphics.hpp>

int main()
{
    sf::RenderWindow window(sf::VideoMode(300, 200), "SFML works!");
    sf::Text text("Hello SFML");

    while (window.isOpen())
    {
        sf::Event event;
        while (window.pollEvent(event))
        {
            if (event.type == sf::Event::Closed)
                window.close();
        }

        window.clear();
        window.draw(text);
        window.display();
    }

    return 0;
} 
```

我从这里下载了 SFML 2.0 的最新快照：[https ://github.com/LaurentGomila/SFML](https://github.com/LaurentGomila/SFML)

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:13:27.653

你缺少的是`sf::RenderStates::Default`. 它在 RenderStates.cpp 中声明，它应该是 sfml-graphics 的一部分。您确定 sfml-graphics 与您的程序相关联吗？rpath 设置是否正确？我假设您正在构建程序可执行文件而不是共享库，对吗？你有没有尝试过`LD_PRELOAD=/path/to/sfml-graphics/lib.so /path/to/program`

# java - 将语言环境与 Java 的 toLowerCase() 和 toUpperCase() 一起使用

> ID：11063102
> 
> 赞同：83
> 
> 时间：2012-06-16T11:40:48.933
> 
> 标签：java, string, locale

我想要代码将字符串中的所有字符转换为 Java 中的大写或小写。

我找到了一个类似这样的方法：

```
public static String changelowertoupper()
{
         String str = "CyBeRdRaGoN";
         str=str.toLowerCase(Locale.ENGLISH);
         return str;
} 
```

现在我读到使用某些`Locale`s，比如土耳其语，“返回***i（不带点）***而不是***i（带点）***。”

`Locale`使用UK、US、ENGLISH 等 s是否安全？当应用于字符串时，它们之间有什么大的区别吗？

s最喜欢`Locale`哪个`String`？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-06-16T11:51:05.457

我认为你应该使用 locale ，

> 例如，土耳其语言环境中的 "TITLE".toLowerCase() 返回 "tıtle"，其中 'ı' 是 LATIN SMALL LETTER DOTLESS I 字符。要获得不区分区域设置的字符串的正确结果，请使用 toLowerCase(Locale.ENGLISH)。

我将这些链接称为解决您的问题的方法，并且在您遇到“土耳其语”时要牢记这一点

```
**FROM THE LINKS** 
```

> toLowerCase() 尊重国际化 (i18n)。它针对您的区域设置执行大小写转换。当您调用 toLowerCase() 时，内部会调用 toLowerCase(Locale.getDefault())。它对语言环境敏感，您不应围绕它编写逻辑来独立解释语言环境。

```
import java.util.Locale;

public class ToLocaleTest {
    public static void main(String[] args) throws Exception {
        Locale.setDefault(new Locale("lt")); //setting Lithuanian as locale
        String str = "\u00cc";
    System.out.println("Before case conversion is "+str+
" and length is "+str.length());// Ì
        String lowerCaseStr = str.toLowerCase();
    System.out.println("Lower case is "+lowerCaseStr+
" and length is "+lowerCaseStr.length());// iı`
    }
} 
```

> 在上面的程序中，看一下转换前后的字符串长度。它将是 1 和 3。是的，大小写转换前后的字符串长度不同。当您在这种情况下依赖字符串长度时，您的逻辑将被折腾。当您的程序在不同的环境中执行时，它可能会失败。这将是代码审查中的一个很好的收获。
> 
> 为了使其更安全，您可以使用另一种方法 toLowerCase(Locale.English) 并始终将语言环境覆盖为英语。但是你没有国际化。
> 
> 所以关键是， toLowerCase() 是特定于语言环境的。

[参考 1](http://lotusnotus.com/lotusnotus_en.nsf/dx/dotless-i-tolowercase-and-touppercase-functions-use-responsibly.htm)
[参考 2](https://stackoverflow.com/questions/1190254/tolowercase-with-special-unicode-characters-throws-exception)
[参考 3](http://javapapers.com/core-java/javas-tolowercase-has-got-a-surprise-for-you/)

Dotless-i，是没有点的小写“i”。这个字符的大写是通常的“I”。还有一个字符，“I with dot”。这个字符的小写字母是通常的小写字母“i”。

你注意到问题了吗？这种非对称转换会导致编程中的严重问题。我们主要在 Java 应用程序中遇到这个问题，因为（恕我直言）toLowerCase 和 toUpperCase 函数的实现很差。

在 Java 中，String.toLowerCase() 方法根据默认语言环境将字符转换为小写。如果您的应用程序在土耳其语言环境中工作，尤其是当您将此函数用于必须遵守特定字符集的文件名或 url 时，这会导致问题。

我之前在博客上写过两个严重的例子：名称中带有“i”的脚本库的编译错误以及如果 XPage 位于名称中带有“I”的数据库中，则 XSP 管理器的错误。

正如我所说，历史悠久。例如，在某些 R7 版本中，如果收件人的姓名以“I”开头，则路由器无法向收件人发送消息。直到 R8，消息报告代理才在土耳其语言环境中运行。任何使用土耳其语言环境的人都无法安装 Lotus Notes 8.5.1（这是真的！）。名单还在继续……

土耳其几乎没有 beta 测试人员，客户也不会为这些问题打开 PMR。所以这些问题并不是开发团队的首要任务。

甚至 Java 团队也在最新的文档中添加了特别警告：

> 此方法对语言环境敏感，如果用于旨在独立解释语言环境的字符串，可能会产生意外结果。示例是编程语言标识符、协议键和 HTML 标记。例如，土耳其语言环境中的 "TITLE".toLowerCase() 返回 "tıtle"，其中 'ı' 是 LATIN SMALL LETTER DOTLESS I 字符。要获得不区分区域设置的字符串的正确结果，请使用 toLowerCase(Locale.ENGLISH)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-04-02T01:31:00.313

您可以为您的语言创建适当`String`的语言环境。

例如：

```
toUpperCase(new Locale("tr","TR")); 
```

会为土耳其人做的伎俩。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-16T11:45:16.847

```
String str = "CyBeRdRaGoN";

str = str.toLowerCase(); // str = "cyberdragon"

str = str.toUpperCase(); // str = "CYBERDRAGON" 
```

您的应用程序将选择默认区域设置，因此如果有人使用土耳其语区域设置在土耳其语中运行您的应用程序，他将看到`i`没有点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-01T07:15:30.677

如果您使用此功能检查字符串（例如搜索） 使用小写或大写形式的字符串进行检查是安全的。你可以这样使用它：

```
if (mViewData.list.data[i].Name.toLowerCase(new Locale("tr", "TR"))
   .contains(mViewHolder.tctSearch.getText().toString().trim()
                                      .toLowerCase(new Locale("tr", "TR")))) {
    // your code here...
} 
```

我遇到了同样的问题，但在 listview 中进行搜索时。我添加了这个答案，它可以帮助有同样问题的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-04T17:03:53.103

在科特林

```
private fun changelowertoupper(): String {
        val str = "CyBeRdRaGoN"
        return str.lowercase()
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-24T07:00:12.523

如果您愿意，可以`android:textLocale="tr"`在 XML 端使用选项。

```
<TextView
android:text="inciler"
android:textAllCaps="true"
android:textLocale="tr" /> 
```

输出：`İNCİLER`

# c - 使 gdb 显示汇编指令而不是 C

> ID：11063104
> 
> 赞同：6
> 
> 时间：2012-06-16T11:40:52.210
> 
> 标签：c, debugging, assembly, gdb

> **可能重复：**
> [在 gdb 中切换到程序集](https://stackoverflow.com/questions/589653/switching-to-assembly-in-gdb)

我正在调试 gdb 中的一些代码。当我运行`ni`（for *next instruction*）命令时，它会显示 C 代码。显示执行的汇编指令对我来说更有意义。

```
(gdb) ni
0x0804845a  28          tmp = *lpp;
(gdb) ni
0x0804845c  28          tmp = *lpp;
(gdb) ni
0x0804846a  29          **lpp = (unsigned long) &buf;
(gdb) ni
0x0804846c  29          **lpp = (unsigned long) &buf; 
```

有没有办法让 gdb 显示汇编代码，而不是`disassm`每次都调用？

**编辑：**我知道`layout asm`在 readline 窗口中显示代码的命令。我想在 gdb 命令行上查看反汇编，而不是在 gdb 窗口中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T14:28:18.913

当你单步执行时`ni`，显示接下来的几条汇编指令通常非常有用。

```
(gdb) display/4i $pc 
```

每次 GDB 停止时都会显示接下来的 4 条指令。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T11:52:50.657

您是否尝试使用 TUI ASM 布局？

它相当方便。

```
(gdb) layout asm 
```

# php - PHP 更改 file_get_contents 参数 url

> ID：11063105
> 
> 赞同：1
> 
> 时间：2012-06-16T11:40:52.890
> 
> 标签：php, file-get-contents

我正在使用以下行来获取页面内容：

```
$handle = file_get_contents(
    "http://www.mywebsite.com/index.php?show=users&action=msg&section=send", 
    NULL, 
    NULL, 
    1000, 
    19000); 
```

然后，我收到以下消息：

> 警告：file_get_contents(http://www.mywebsite.com/index.php?show=users&action=msg **§ion=send** )：打开流失败：HTTP 请求失败！HTTP/1.0 403 禁止

（请注意粗体部分）。

这是怎么回事？为什么它会更改 url 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:59:29.577

我不认为 PHP 正在更改查询字符串参数。

如果您在浏览器中阅读该消息，则应该只是输出是 HTML 格式的问题。因此，您收到的 403 错误不应与某些不需要的 url 转换有关。

# c# - 单元测试资源管理器不显示 Metro 应用程序的异步单元测试

> ID：11063108
> 
> 赞同：20
> 
> 时间：2012-06-16T11:41:12.063
> 
> 标签：c#, unit-testing, microsoft-metro, async-await

不确定这是一个已知问题。我正在使用 VS2012 RC (Ultimate) 和 Win8 Release Preview。我创建了一个单元测试库（metro 风格的应用程序），并编写了一个单元测试，其中包括 async/await 关键字。但是，当我编译单元测试项目时，单元测试资源管理器没有显示我编写的测试。如果我排除了 async/await 关键字，那么单元测试资源管理器就会出现在我刚刚编写的测试中。有没有人遇到过这种情况，还是只有我一个？

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public async void SomeAsyncTest()
    {
        var result = await StorageFile.GetFileFromPathAsync("some file path");
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-17T09:28:27.677

`async`必须返回的单元测试方法，而`Task`不是`void`.

这是因为`async void`方法很难跟踪：单元测试库没有简单的方法来发现测试是否完成。（这很难，但我认为这并非不可能。您可以通过使用自定义来做到这一点`SynchronizationContext`。）

# php - 在 PHP 5.3 中替换 UTF-8 字符

> ID：11063113
> 
> 赞同：2
> 
> 时间：2012-06-16T11:41:48.760
> 
> 标签：php, utf-8, preg-replace, php-5.3

为什么这个测试用例不起作用？

```
<?php
// cards with cyrillic inidices and suits in UTF-8 encoding
$a = array('7♠', 'Д♠', 'К♠', '8♦', 'В♦', 'Д♦', '10♣', '10♥', 'В♥', 'Т♥');
foreach ($a as $card) {
        $suit = substr($card, -1);

        $card = preg_replace('/(\d+)♥/', '<span class="red">$1&hearts;</span>', $card);
        $card = preg_replace('/(\d+)♦/', '<span class="red">$1&diams;</span>', $card);
        $card = preg_replace('/(\d+)♠/', '<span class="black">$1&spades;</span>', $card);
        $card = preg_replace('/(\d+)♣/', '<span class="black">$1&clubs;</span>', $card);

        printf("suit: %s, html: %s\n", $suit, $card);
}
?> 
```

输出：

```
suit: ▒, html: <span class="black">7&spades;</span>
suit: ▒, html: Д♠
suit: ▒, html: К♠
suit: ▒, html: <span class="red">8&diams;</span>
suit: ▒, html: В♦
suit: ▒, html: Д♦
suit: ▒, html: <span class="black">10&clubs;</span>
suit: ▒, html: <span class="red">10&hearts;</span>
suit: ▒, html: В♥
suit: ▒, html: Т♥ 
```

即我在我的 PHP 脚本中遇到了 2 个问题：

1.  为什么没有正确提取最后一个 UTF-8 字符？
2.  为什么只有第一套被替换`preg_replace`？

使用 PHP 5.3.3，PostgreSQL 8.4.12 在 CentOS 6.2 上保存 UTF-8 JSON（带有俄语文本和卡片套装）。

如果 1\. 是 PHP 5.3.3 中的错误，那么有没有好的解决方法？（我不想升级库存包）。

更新：

```
<?php
$a = array('7♠', 'Д♠', 'К♠', '8♦', 'В♦', 'Д♦', '10♣', '10♥', 'В♥', 'Т♥');
foreach ($a as $card) {
        $suit = mb_substr($card, -1, 1, 'UTF-8');

        $card = preg_replace('/(\d+)♥/u', '<span class="red">$1&hearts;</span>', $card);
        $card = preg_replace('/(\d+)♦/u', '<span class="red">$1&diams;</span>', $card);
        $card = preg_replace('/(\d+)♠/u', '<span class="black">$1&spades;</span>', $card);
        $card = preg_replace('/(\d+)♣/u', '<span class="black">$1&clubs;</span>', $card);

        printf("suit: %s, html: %s\n", $suit, $card);
}
?> 
```

新输出：

```
suit: ♠, html: <span class="black">7&spades;</span>
suit: ♠, html: Д♠
suit: ♠, html: К♠
suit: ♦, html: <span class="red">8&diams;</span>
suit: ♦, html: В♦
suit: ♦, html: Д♦
suit: ♣, html: <span class="black">10&clubs;</span>
suit: ♥, html: <span class="red">10&hearts;</span>
suit: ♥, html: В♥ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T11:51:20.847

`substr`是天真的 PHP 核心函数之一，它假定 1 字节 = 1 个字符。从字符串中`substr(..., -1)`提取最后一个*字节。*“♠”虽然长于一个字节。你应该`mb_substr($card, -1, 1, 'UTF-8')`改用。

您需要在正则表达式中添加[`u`(PCRE_UTF8) 修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)，以使其正确处理 UTF-8 编码的表达式和字符串：

```
preg_replace('/(\d+)♥/u', ... 
```

# java - 如何设置 IntelliJ Idea 来运行简单的 java 应用程序？

> ID：11063115
> 
> 赞同：3
> 
> 时间：2012-06-16T11:42:34.663
> 
> 标签：java, eclipse, intellij-idea

> **可能重复：**
> [Hello world 不在 IntelliJ Idea 中运行](https://stackoverflow.com/questions/11062972/hello-world-doesnt-run-in-intellij-idea)

我是 IntelliJ 想法的新手，所以我从 HelloWorld 尝试：

```
 package test;

 /**
  * Created with IntelliJ IDEA.
  * Date: 16/06/12
  * Time: 12:13
  * To change this template use File | Settings | File Templates.
  */
 public class Main {
     public static void main(String ...args){
        System.out.println("Hello World");
     }
 } 
```

但是这个程序没有运行！只有绿色箭头变灰，但我没有看到任何输出。我应该检查哪个设置？谢谢。编译器： ![在此处输入图像描述](../Images/01332de0f8cb6f57f7baedab64f7e3b4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T12:05:28.343

右键单击`main`函数名称并选择调试

![创建配置](../Images/64b483e2571b032ffd669b6960252b6c.png)

当上面的右键单击创建时，“绿色箭头”只是运行当前配置。`Edit Configurations`您可以使用左侧的按钮创建和自定义配置。

![在此处输入图像描述](../Images/f914fe96e773646ec69985509f6c6d58.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:19:31.660

我找到了原因 - 文件夹 .IdeaIC 安装在我的网络磁盘上的主目录中。在我将属性 ides.properties 更改为使用本地磁盘上的文件夹后 - 一切运行良好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:46:37.663

看看使用 Intelij、[jetbrains](http://www.jetbrains.com/idea/webhelp/debug-tool-window.html)进行调试。

命令 5 打开调试菜单或查看->工具窗口->调试

# javascript - jQuery中获取IMG标签的ID

> ID：11063137
> 
> 赞同：1
> 
> 时间：2012-06-16T11:46:42.203
> 
> 标签：javascript, jquery, mouseevent, html

我有以下代码（在这种情况下是两个图像 - 但实际上，它可以被复制 N 次：

```
<figure title="" class="DragBox" dragableBox="true" style="opacity: 1;" id="thumb_1">
   <span class="pic" id='UAJ754'>
      <span class="imagewrap">&nbsp;</span>
    <span class="overlay">
      <a href="fulldata.php?UAJ754" class="popUpSimple" rel="thumb_1">Image Information</a>
    </span>
    <img src="/pics/UAJ754.jpg" alt="">
  </span>

  <figcaption class="AlbumFig_Caption">A picture caption.
  </figcaption>
</figure>
<figure title="" class="DragBox" dragableBox="true" style="opacity: 1;" id="thumb_2">
   <span class="pic" id='JB6732'>
      <span class="imagewrap">&nbsp;</span>
    <span class="overlay">
      <a href="fulldata.php?JB6732" class="popUpSimple" rel="thumb_2">Image Information</a>
    </span>
    <img src="/pics/JB6732.jpg" alt="">
  </span>

  <figcaption class="AlbumFig_Caption">A second picture caption.
  </figcaption>
</figure> 
```

现在，具有 'pic' 类的 span 有一个与之关联的 jQuery mousedown 事件——因此无论鼠标点击哪个图像，pic 标签都会记录该事件并显示一个带有数据的弹出窗口。这一切都很好。

但是我需要获取鼠标按下的特定“图片”的 ID 标签，或者检索 IMG 的 src 以便我可以获取 ID，因为这需要传递到弹出窗口以显示正确的信息为正确的图片。

我有以下JS代码：

```
 $(".pic").mousedown(function(e) {   

                var mouseX = e.pageX; 
                var mouseY = e.pageY;

            if (e.which === 3) {                    

               $('.infobox').css({'top':mouseY+'px','left':mouseX+'px'}).fadeIn();

               var imgref = $(".pic").attr('id');
               alert (imgref);

               return false;
            }else{
               $('.info').fadeOut();
            }
        }); 
```

同样，这工作正常，但它只给我第一个 'pic' 跨度的 ID，无论单击哪个 'pic' 跨度。如何获取当前“图片”跨度的 ID 字段......当用户按下按钮时鼠标悬停的那个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T11:48:00.967

尝试：

```
var imgref = $(this).attr('id'); 
```

或者：

```
var imgref = $(this).prop('id'); 
```

代替 ：

```
var imgref = $(".pic").attr('id'); 
```

`$(".pic")`将给出第一个具有该类`pic`而不是您单击的类的 div

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T11:52:28.737

```
var imgref =this.id; 
```

因为 this 也是一个对象，而 $(this) 将一个对象包装在另一个对象中；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T11:48:53.930

而不是使用`var imgref = $(".pic").attr('id');`

用这个：`var imgref = $(this).attr('id');`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T12:17:40.830

```
var imgref = $('img', this).attr('src'); 
```

你会得到IMG的src。

# c - 将指针传递给函数时使用 & 操作数？

> ID：11063140
> 
> 赞同：3
> 
> 时间：2012-06-16T11:47:13.593
> 
> 标签：c, function, pointers

```
int enter_path(char** path) {
  char* standard = "./questions.txt";
   printf("\n\t%s\n\t%s",
          "Please enter the file location.", "path: ");
   fgets(*path, MAX_PATH_LENGTH ,stdin);
     *(*path + (strlen(*path)-1) ) = '\0';
   if(**path == '\n' )
     *path = strdup(standard);
   return 0;
}

int main(void){
  char* path = malloc(MAX_PATH_LENGTH);
  enter_path(&path);
  some_other_function_using_the_path_string(path);
} 
```

上面的代码工作正常，我发布这个的原因如下。

为什么我必须将指针“路径”的地址传递给函数 enter_path，以便其他一些函数可以使用/读取修改后的值。所以简而言之，为什么我在调用“enter_path”函数时必须使用&-操作数，并且不能将enter_path定义为“int enter_path(char* path);”

我知道这是引用数据类型（如 int、long 等）的普通变量，但我认为在使用指针时，更改对其他所有函数都是可见的。导致指针仍然指向内存中的同一点，只是值已更改。

难道我看到这一切都错了吗？

PS：我正在尽我所能保持我的代码符合 ansi-C 标准，这就是我使用 fgets 而不是 readline 的原因。只是说因为我已经收到了一些关于 readline 函数更容易/更安全使用的评论。

亲切的问候， JD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:52:37.197

如果您有一个类型的变量`T`希望函数能够修改，则需要通过指针传递它，即：

```
void foo(T *p) { *p = 42; }

int main(void) {
    T t;
    foo(&t);
    // The value of t is now 42
} 
```

在您的代码中，`T`是`char *`; 换句话说，您的函数需要能够修改指针，因此您需要将指针传递给该指针。

* * *

但是，这不是好的代码。如果`(**path == '\n')`是真的，那么你将泄漏内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T11:51:30.687

原因是如果你将参数类型指定为`char *`，你会在函数中对指针的副本进行操作，所以你的代码（针对这个场景修改）

```
path = strdup(standard); 
```

函数结束后不会反映在调用者中

通过传递变量的地址，您可以更改指向的指针，即使在函数返回后，这种更改也会持续存在

将指针视为您的数据（就像 with`int`等一样），通过传递`char *`指针您可以修改指向的字符；通过传递一个`char **`指针，您可以修改指向的指针（修改也反映在调用者函数中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T11:58:27.790

您正在传递一个`path`本身就是指针的变量。但是您正在修改函数中的指针本身`enter_path`，因此您必须将指针传递给`path`，因此要传递的地址`path`是要传递的，因此`&path`是传递的。

在当前情况下，线路

```
*path = strdup(standard); 
```

它确实修改了函数中的变量路径，但它的值不会在函数之外改变，即在函数 main 中。

# project-management - 项目管理工具

> ID：11063142
> 
> 赞同：-1
> 
> 时间：2012-06-16T11:47:35.667
> 
> 标签：project-management, projects-and-solutions, bug-tracking

大家，

我想问你处理项目生命周期的最有用的软件是什么。我会解释我的需要。

我正在与另一个城镇的一些人一起工作，我将担任该项目的项目经理。我将从客户那里收到规格并将其发送给我的开发人员（切片后）。我需要一个工具来放置所有规范（例如按小切片），每个开发人员都必须写下每个切片的开发状态。使用它我应该能够确定哪个部分已完成，哪个部分正在进行中。我想也有一个错误处理过程。我将测试完成的内容并为每个错误创建某种票证。开发人员将收到通知，并且对于每个已修复的错误，他们应该能够更改一些标志。

所以，有了类似的东西，我应该能够监控开发（完成了什么，正在进行什么，还有哪些错误是开放的，等等）。

我知道 MS 项目管理器（但不是 Web 解决方案）、一些错误跟踪解决方案，但我想要的一切都没有。

那么，有没有人知道一些能够做到这一点的工具？

我正在考虑一些网络解决方案。

非常感谢您的任何建议。

最好的问候，它的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:54:13.453

我认为 ASANA (http://asana.com/) 可以满足您的要求，但价格略贵。有关开源解决方案，请查看[http://www.project.net/](http://www.project.net/)。您可以将其安装在 Web 服务器上并免费使用。它也可以通过编程轻松定制。

此致

# ios - 如何让多个项目就像一个应用程序一样

> ID：11063143
> 
> 赞同：5
> 
> 时间：2012-06-16T11:47:36.863
> 
> 标签：ios, xcode

我正在开发一个大型应用程序（作为单独的项目开发），实际上需要在一个项目中链接并通过菜单访问它们。那可能吗？

到目前为止我所做的是：

1）我制作了一个包含主导航菜单的项目。（我们称它为大师）。

2) 我已将所需的项目 A、B 导入 Master。

虽然我能够从 Master 访问 A 和 B 的类文件。但我无法让它在它说`viewController`的项目中推动所需的视图`A``Incompatible pointer types initializing 'ViewController *' with an expression of type 'UIViewController *'`

我被困在这一点上。那么，关于让多个项目无缝运行的任何建议？

**更新** 我尝试使用工作区我创建了一个测试项目然后包括项目A，B。我认为在测试项目中制作一个按钮来推动项目A的第一个ViewController......这很有意义，对吧？但是 Xcode 给了我一个关于找不到文件的红色错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T11:53:17.520

您可以使用[Xcode 的 Workspace 概念](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html)

# erlang - 拆分内部包含空字节的二进制字符串

> ID：11063145
> 
> 赞同：1
> 
> 时间：2012-06-16T11:47:42.463
> 
> 标签：erlang

让一个由一个空字节分隔的消息组成的二进制字符串：

```
<message><null><message><null> ... <message><null> 
```

我想把它们分开。简单，我愿意：

```
binary:split(Bin,<<0>>,[global]), 
```

但是...
但是一条消息由两部分组成：

```
<length><texte> 
```

长度有一个 4 字节的固定大小，长度可以有空字节！
然后 split 函数无法正确切割字符串。
是否存在根据 erlang state of art 的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T12:44:06.443

如果所有消息都有一个 4 字节长度的标头，我建议使用`erlang:decode_packet(Type,Bin,Options)`where `Type`is set to `4`。这将返回您的第一条消息在哪里，并且`{ok, Message, Rest}`是二进制文件的其余部分。只需冲洗并重复直到到达二进制文件的末尾（您可能必须自己处理中间的空字节）。`Message``Rest`

但是，如果并非所有消息都具有 4 字节长度的前缀，并且没有确定的方法来检测该标头，则可能无法可靠地解析这样的列表。

# c++ - 从另一个函数更改表单“可见”属性？

> ID：11063153
> 
> 赞同：0
> 
> 时间：2012-06-16T11:49:42.230
> 
> 标签：c++, .net, winforms, forms, properties

我需要从另一个函数更改 testAppGUI（testAppGUI 是一个表单）的可见属性。该函数在一个单独的文件中，它不在一个类中。

如果我尝试做

```
testAppGUI::Visible = false; 
```

我只是得到错误

> C2597：非法引用非静态成员 'System::Windows::Forms::Control::Visible'

如果我尝试像这样创建对象的实例

```
testAppGUI^ formProperty = gcnew testAppGUI; 
```

然后做

```
formProperty->Visible = false; nothing happens?! 
```

任何人都可以解释如何做到这一点？

提前致谢。

编辑：这是更多代码

在 testApp.cpp

```
#include "stdafx.h"
#include "testAppGUI.h"

using namespace testApp;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 
    Application::Run(gcnew testAppGUI());
    return 0;
} 
```

在 testAppGUI.h

```
#pragma once

#include "HideAndShowGUI.h"

namespace testApp {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace System::IO;

    public ref class testAppGUI : public System::Windows::Forms::Form
    {

    public:
        testAppGUI(void)
        {
            InitializeComponent();
        }

    protected:
        ~testAppGUI()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    ...

#pragma region Windows Form Designer generated code
        void InitializeComponent(void)
        {
            ...

        }
#pragma endregion

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
             hideGUI();
         }
};
} 
```

HideAndShowGUI.cpp

```
#include "stdafx.h"

#include "testAppGUI.h"

using namespace testApp;

void hideGUI(){
    //Hide the form, this function should be able to be called by all functions in the program. Not just from forms!

}

void showGUI(){
    //Unhide/Show the form, this function should be able to be called by all functions in the program. Not just from forms!

} 
```

hideGUI 和 showGUI 在 HideAndShowGUI.h 中声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:14:46.307

如果您已经有要隐藏的表单实例，则必须将该表单的引用传递给要更改属性的函数。

您可以通过直接提供表单作为函数的参数来做到这一点，或者如果函数是类的成员，您可以将表单传递给类（和实例）（并将其存储为成员变量）。其中哪一个更适合您取决于您​​的特定上下文，如果没有更多代码，我们将无法访问。

*注意*：您的第一个片段与您的第二个片段冲突：第一个片段`form1`用作变量，第二个片段用作类型。如果你已经有了变量`form1`，你可以设置它的属性：

```
form1->Visible = false; 
```

# hadoop - 启动 Hadoop 50075 端口未解析

> ID：11063156
> 
> 赞同：1
> 
> 时间：2012-06-16T11:50:04.163
> 
> 标签：hadoop

我已经在我的系统中安装了 Hadoop，Jobtracker：localhost:50030/jobtracker.jsp 工作正常，但 localhost:50075/host 没有解决。任何人都可以帮助我解决我的 Ubuntu 系统中的问题。下面检查我的 code-site.xml 配置：

```
<configuration>
     <property>
         <name>fs.default.name</name>
         <value>hdfs://localhost:9000</value>
     </property>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T20:29:26.643

以前没见过50075，但是50070是本地NameNode，建议你格式化NameNode试试看：

```
rm -r /tmp/hadoop-*;
bin/hadoop namenode -format;
./bin/start-all.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:29:39.847

检查您的端口配置。这是 hadoop 守护进程可配置参数的列表

dfs.http.address：dfs namenode web ui 将监听的地址和基本端口。如果端口为 0，则服务器将在空闲端口上启动。

名称节点的默认值通常设置为端口 50070，因此请尝试使用 localhost:50070。

[http://hadoop.apache.org/common/docs/r0.20.2/hdfs-default.html](http://hadoop.apache.org/common/docs/r0.20.2/hdfs-default.html)

我认为您的意思是 core-site.xml（不是 code-site.xml）。这里的 fs.default.name 配置并不能确定 hadoop web ui/dashboard 的位置。这是数据节点用来与名称节点通信的端口。

# wcf - wcf 数据服务一键保存关系数据

> ID：11063157
> 
> 赞同：0
> 
> 时间：2012-06-16T11:50:25.620
> 
> 标签：wcf, silverlight, windows-phone-7, wcf-data-services, wcf-ria-services

我在 Windows phone 7 中使用 WCF 数据服务，我想通过单击保存关系数据，我该怎么做？

它的想法 2 表：类别和产品

我想保存数据 UI：

> 从类别表：-
> CategoryId ：（自动递增）
> CategoryName ：abc
> 
> 从产品表：-
> ProductId ：-（自动增量）
> CategoryId ：- ？（不知道如何检索）
> ProductsName : xyz

在按钮保存点击：

我想在适当的表中插入上述数据，我该怎么做？

我正在使用以下代码添加一个表数据：

```
try
{
     context = new NorthwindEntities(NorthwindUri);
     context.AddToProducts(product);
     context.BeginSaveChanges(new AsyncCallback((result) =>
     {
         bool errorOccured = false;

         // Use the Dispatcher to ensure that the 
         // asynchronous call returns in the correct thread.
         Deployment.Current.Dispatcher.BeginInvoke(() =>
         {
             context = result.AsyncState as NorthwindEntities;

             try
             {
                  // Complete the save changes operation and display the response.
                  DataServiceResponse response = context.EndSaveChanges(result);

                  foreach (ChangeOperationResponse changeResponse in response)
                  {
                      if (changeResponse.Error != null) errorOccured = true;
                  }
                  if (!errorOccured)
                  {
                      MessageBox.Show("The changes have been saved to the data service.");
                  }
                  else
                  {
                      MessageBox.Show("An error occured. One or more changes could not be saved.");
                  }
              }
              catch (Exception ex)
              {
                   // Display the error from the response.
                   MessageBox.Show(string.Format("The following error occured: {0}", ex.Message));
              }
         });
    }), context);
}
catch (Exception ex)
{
    MessageBox.Show(string.Format("The changes could not be saved to the data service.\n"
        + "The following error occurred: {0}", ex.Message));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:19:12.720

在 OData 中，关系不表示为外键，而是表示为导航属性。然后您通过操作客户端库中的链接来操作它们。看看这篇文章： http: [//msdn.microsoft.com/en-us/library/dd756361](http://msdn.microsoft.com/en-us/library/dd756361(v=vs.103).aspx) (v=vs.103).aspx 您可以调用多个修改数据的方法，然后调用 SaveChanges 将它们全部发送到服务器。但请注意，如果服务器需要参照完整性，并且您例如同时添加两个相关实体，您可能需要使用 SaveChanges(Batch) （这使得客户端在一个请求中发送所有内容，从而允许服务器将其作为单个事务处理）。

# python - 在 appengine 上使用 webapp2 创建用户配置文件

> ID：11063158
> 
> 赞同：1
> 
> 时间：2012-06-16T11:50:27.830
> 
> 标签：python, google-app-engine, webapp2

在 webapp2/appengine 中创建用户的一个非常简单的用例可以如下：

```
from google.appengine.api import users

class MainPage(webapp.RequestHandler):
    def get(self):
        user = users.get_current_user()

        if user:
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.out.write('Hello, ' + user.nickname())
        else:
            self.redirect(users.create_login_url(self.request.uri)) 
```

但是，如果我们想要一个包含更多应用特定任务的用户配置文件。假设用户可以有地址和电话号码，他的健康信息很少，如血糖等。我们如何从 api 扩展用户以创建用户配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T11:54:59.037

定义具有链接到用户的属性的模型：`db.ReferenceProperty(users.User)`。

# c# - 陷入在 C# 中循环 XML 的思路

> ID：11063162
> 
> 赞同：2
> 
> 时间：2012-06-16T11:51:07.317
> 
> 标签：c#, xml

由于工作中的一些决定，我最近将注意力从 VB.NET 转移到了 C#。我现在在尝试从 XML 文件中读取数据时遇到了一个问题。

在这里，XML 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<shipmentdata>
    <shipment shipmentid="70716481780000102" messageid="2">
        <msgcreated>2012-06-14T10:44:00</msgcreated>
        <orderdate>2012-06-14</orderdate>
        <services>
            <baseservice ediid="ZG8">Replenishment</baseservice>
            <addedservices>
                <addedservice id="2" ediid="Z47">Installation</addedservice>
                <addedservice id="3" ediid="Z45">Swap</addedservice>
            </addedservices>
        </services>
        <weight uom="KGM">2</weight>
        <bulkref>123456</bulkref>
    </shipment>
</shipmentdata> 
```

我得到的 C# 代码是这样的：

```
private DataSet ReturnServices(string FileName)
{
    XmlDocument m_xmld = new XmlDocument();
    XmlNodeList m_nodelist;
    m_xmld.Load(FileName);
    m_nodelist = m_xmld.SelectNodes("/shipmentdata");

    DataRow aDR;
    DataTable aDT = new DataTable("AddedServices");
    aDT.Columns.Add("ediid",typeof(string));
    aDT.Columns.Add("shipmentid",typeof(string));
    DataSet oDS = new DataSet("EDIinfo");

    foreach (XmlElement m_node in m_nodelist)
    {
        ShipmentID = m_node["shipment"].Attributes.
            GetNamedItem("shipmentid").Value.ToString();

        XmlNodeList s_nodelist = m_xmld.SelectNodes(
            "/shipmentdata/shipment/services/addedservices");

        foreach (XmlElement s_node in s_nodelist)
        {
            aDR = aDT.NewRow();
            aDR["ediid"] = s_node.ChildNodes.Item(0).Attributes.
                GetNamedItem("ediid").Value.ToString();
            aDR["shipmentid"] = ShipmentID;
            aDT.Rows.Add(aDR);
        }
    }
    oDS.Tables.Add(aDT);
    return oDS;
} 
```

这里的问题是，虽然文件包含两个附加服务（Z47 和 Z45），但由于某种原因，只有第一个节点存储在 DataTable（Z47）中。如何循环遍历所有添加的服务节点？

任何帮助将不胜感激，我已经坚持了一段时间，并开始意识到我可能陷入了难以摆脱的思路和逻辑。:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:01:27.740

这个循环

```
foreach (XmlElement s_node in s_nodelist)
{
      aDR = aDT.NewRow();
      aDR["ediid"] = s_node.ChildNodes.Item(0).Attributes.
          GetNamedItem("ediid").Value.ToString();
      aDR["shipmentid"] = ShipmentID;
      aDT.Rows.Add(aDR);
  } 
```

只迭代一次，因为`"/shipmentdata/shipment/services/addedservices"`xpath 语句只返回一个节点。然后你在这里得到第一个添加的服务节点`aDR["ediid"] = s_node.ChildNodes.Item(0).Attributes. GetNamedItem("ediid").Value.ToString();` ，但永远不会去第二个。您可能也打算为这些循环。

# php - PHP通过包含文件传递变量（相对路径与绝对路径）

> ID：11063166
> 
> 赞同：2
> 
> 时间：2012-06-16T11:51:50.047
> 
> 标签：php, variables, include, scope, filepath

我想将包含文件*identity.php*中定义的变量传递给父文件，我将其称为*parent.php*。当我通过它的相对路径包含 identity.php 时，该变量可用于*parent.php*文件。当我通过它的绝对路径（到应用程序根目录）包含*identity.php*时，它不起作用。为什么是这样？

*文件：identity.php*

```
$g_groupid = 2; 
```

*文件：父.php*

```
include('absolute_path_to_identity.php');
echo $g_groupid; //NOTHING! 
```

但是...
*文件：parent.php*

```
include('../../identity.php'); //relative path to include file 
echo $g_groupid; //echos 2 as expected 
```

我已经通过回显“身份文件包含消息”（来自*identity.php文件中）验证了***这两种情况下**都包含identity.php，该消息显示为相对和绝对包含。这种行为的原因可能是什么？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:02:05.697

这听起来像您的“绝对路径”是一个 URL，`http://www.example.com/folder/identity.php` 如果是这种情况，PHP 将使用 HTTP 从 Web 服务器获取代码，因此所有 PHP 代码将在包含文件*之前*进行评估。

这也将给出您在`echo`故障排除中描述的行为。

“绝对路径”在表单上`/home/user/public_html/folder/identity.php`，​​与 URL 不同。

* * *

考虑一下：

**身份.php**

```
<?php
echo 'Is included';
$g_groupid = 2;
?> 
```

当由 PHP 解释器评估时，这将产生以下原始文本：

```
Is included 
```

如果您*将该原始文本*包含在**parent.php**中，它将表现得好像它是没有任何 PHP 代码的原始 HTML，因为`<?php`该原始文本中没有标签。然后考虑这个**identity.php**：

```
<?php
echo 'Is included <?php $g_groupid = 3; ?>';
$g_groupid = 2;
?> 
```

这将导致：

```
Is included <?php $g_groupid = 3; ?> 
```

你现在在你的**parent.php**中得到什么结果？是 $g_groupid`2`还是`3`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:04:53.023

您是否尝试使用[realpath()](http://us.php.net/realpath)？

```
require_once(realpath('../../identity.php')); 
```

另外，如果错误报告尚未打开，我建议关闭它，以便您确保文件确实包含在内，并获取更多信息。将此添加到文件顶部：

```
ini_set("display_errors","On");
error_reporting(E_ALL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T00:18:53.813

你确定你的绝对路径有效吗？

我有类似的问题，在这种情况下，我总是使用通过 DOCUMENT_ROOT 的完整路径

```
include($_SERVER['DOCUMENT_ROOT']."/your_file_path.php"); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-16T11:53:45.760

嗯，试试：

```
include('absolute_path_to_identity.php');
global $g_groupid;
echo $g_groupid; 
```*

# internationalization - 如何保留 gettext() 翻译？

> ID：11063170
> 
> 赞同：0
> 
> 时间：2012-06-16T11:52:32.990
> 
> 标签：internationalization, translation, gettext, poedit

假设我有一个`example.php`这样的文件：

```
<p>
  <?php echo _('Hello world') ?>
</p>
<p>
  <b><?php echo _('the end') ?>
</p> 
```

如果我提取字符串：

```
xgettext example.php 
```

我得到一个`messages.mo`文件，我可以用它打开`poedit`、翻译、创建一个 .po 文件等。没关系，问题是当我编辑我的原件并已经翻译时`example.php`：

```
<p>
  <?php echo _('Hello world') ?>
</p>
<p>
  <?php echo _('new string') ?>
</p>
<p>
  <b><?php echo _('the end') ?>
</p> 
```

我添加了一个新字符串，如果我`xgettext`再次执行，我会得到一个`messages.mo`所有字符串都为空的文件，所以我必须使用 poedit 并再次翻译所有字符串。如何重复使用我以前的翻译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:05:37.220

您可以将两个 po 文件与`msgmerge`. 如果源字符串未更改，则合并应该可以完美运行，如果更改了，您显然可能需要做一些工作才能再次翻译内容，当然您必须翻译任何全新的字符串。

```
msgmerge -o results.po my_existing_translations.po untranslated_xgettext_output.po 
```

# android - 我用于创建和使用菜单的 android 代码无法正常工作

> ID：11063172
> 
> 赞同：1
> 
> 时间：2012-06-16T11:52:39.440
> 
> 标签：android, android-menu

我是*Android App Development*的新手。我正在练习 Book *Hello, Android*中的代码。现在我对*菜单*感到震惊，无法进一步移动。我想清楚地介绍我的情况，以便有经验的*安卓应用程序开发人员*指导我。我上传了一张显示状态的图片。当我按下**菜单**时，我可以找到一个名为**设置的选项。**

但是按下**设置**按钮时没有任何反应。我对这个错误感到惊讶，并浪费了大量时间来修复它。但我无法修复它。我想要一些真正的 android 应用程序开发专家来找到我面临的这个问题的解决方案，并帮助我继续前进。

![在此处输入图像描述](../Images/40af9ce638e53fb978bdb80cb2175085.png)

这是我使用的代码。

**测试/src/org/anil/test/TestActivity.java**

```
 package org.anil.test;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.Menu;
    import android.view.MenuInflater;
    import android.view.MenuItem;
    import android.content.Intent;

    public class TestActivity extends Activity {
    /** Called when the activity is first created. */
     @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    }

    public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
    }
    public boolean onOptionsMenuSelected( MenuItem item){
    switch(item.getItemId()){
    case R.id.settings:
        startActivity(new Intent(this, Prefs.class));
        return true;
    }
    return false;
    }
    } 
```

**测试/res/layout/main.xml**

```
 <?xml version="1.0" encoding="utf-8"?>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

   <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

    </LinearLayout> 
```

**测试/src/org/anil/test/Prefs.java**

```
 package org.anil.test;
    import android.os.Bundle;
    import android.preference.PreferenceActivity;

    public class Prefs extends PreferenceActivity {
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings);
    }

    } 
```

**测试/res/menu/menu.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:id="@+id/settings"
        android:title="@string/settings_label"
        android:alphabeticShortcut="@string/settings_shortcut" />
    </menu> 
```

**测试/res/xml/settings.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android" > 

    <CheckBoxPreference 
    android:key="music"
    android:title="@string/music_title"
    android:summary="@string/music_summary" 
    android:defaultValue="true" />

    <CheckBoxPreference 
    android:key="hints"
    android:title="@string/hints_title"
    android:summary="@string/hints_summary" 
    android:defaultValue="true"/>

    </PreferenceScreen> 
```

**测试/res/values/strings.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <resources>

    <string name="hello">Hello World, TestActivity!</string>
    <string name="app_name">Test</string>
    <string name="settings_label">Settings</string>
    <string name="settings_title">Sudoku Settings</string>
    <string name="settings_shortcut">s</string>
    <string name="music_title">Music</string>
    <string name="music_summary">play background music</string>
    <string name="hints_title">Hints</string>
    <string name="hints_summary">Show hints during play</string>

    </resources> 
```

**测试/AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.anil.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".Prefs" android:label="@string/settings_title">
    </activity>

    </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:39:31.433

菜单选择回调的方法名`onOptionsItemSelected()`改为`onOptionsMenuSelected()`，试试这个方法：

```
@Override
public boolean onOptionsItemSelected (MenuItem item)
{
    //Your code implementation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:07:51.750

您的清单中是否有您的 Prefs 活动？

我可能错了，但我会试一试：排队

```
startActivity(new Intent(this, Prefs.class)); 
```

我认为“this”并不代表您的活动。尝试创建一个静态变量

```
static Activity thisActivity; 
```

在 OnCreate 上

```
thisActivity = this; 
```

然后

```
startActivity(new Intent(thisActivity, Prefs.class)); 
```

# apache - 如果特定文件夹不存在，htaccess 重定向

> ID：11063177
> 
> 赞同：1
> 
> 时间：2012-06-16T11:53:40.840
> 
> 标签：apache, .htaccess, redirect

我在根 htaccess 中使用它

```
RewriteEngine on
Options +FollowSymLinks

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l 
RewriteRule .* index.php?p=%{REQUEST_URI} [L] 
```

这会成功重写[http://example.com/notexistsfolder](http://example.com/notexistsfolder)

但我也想将[http://example.com/user/notexistsfolder](http://example.com/user/notexistsfolder)重定向到[http://example.com/notexistsfolder](http://example.com/notexistsfolder)

我应该添加什么代码来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:38:45.000

这是您在目录`.htaccess`下需要的代码：`DOCUMENT_ROOT`

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## If the request is for a valid directory
RewriteCond %{REQUEST_FILENAME} -d [OR]
## If the request is for a valid file
RewriteCond %{REQUEST_FILENAME} -f [OR]
## If the request is for a valid link
RewriteCond %{REQUEST_FILENAME} -l
## don't do anything
RewriteRule ^ - [L]

RewriteRule ^user/(.*)$ $1 [L,NC]

RewriteRule (?!^user/)^(.*)$ index.php?p=$1 [L,NC,QSA] 
```

# java - 向主框架添加面板

> ID：11063180
> 
> 赞同：-1
> 
> 时间：2012-06-16T11:54:06.027
> 
> 标签：java, swing, user-interface, compiler-errors, frame

我有一个名为“frame1”的主框架。在“frame1”中，我想添加一个面板以在面板上显示某些内容，但我无法将面板添加到我的主框架，即“frame1”

```
 public void drawstack()
 {
    JPanel m1 = new JPanel(new BorderLayout());
    m1.setBorder(BorderFactory.createRaisedSoftBevelBorder());
    m1.setBackground(Color.red);
    frame1.add(m1);
 } 
```

这是我的代码 m 在最后一行出现错误，即“frame1.add(m1);” 错误是

```
cannot find symbol : frame1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:02:32.290

frame1 必须是您的类中的一个字段，或者必须作为参数传递给您的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:02:39.153

该错误告诉您编译器找不到名为`frame1`. 为了使标记的语句起作用，您需要声明一个名为的变量`frame1`并用一个`JFrame`对象实例化它，如下所示：

```
JFrame frame1 = new JFrame();
frame1.add(m1); 
```

*注意*：如果你想从同一个类的其他方法访问它，你也可以使这个变量成为类的成员。

*注意*`JFrame`：被引用的 intantiated`frame1`最初是不可见的，您需要通过调用`setVisible(true)`它使其可见

如果您的类派生自`JFrame`并且您想将面板添加到当前对象表示的框架中，您可以使用`this`引用而不是`frame1`：

```
this.add(m1); 
```

在这种情况下，您甚至可以`this`省略：

```
add(m1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T12:01:31.340

显然有一个错误..你还没有初始化一个名为frame1的变量..改用..它`this.add(m1);`应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T12:04:28.957

如果您发布的方法在您的扩展类中，`JFrame`您需要调用

```
getContentPane().add(m1); 
```

此外，如果您想在框架中添加超过 1 个元素，请使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。

# php - CodeIgniter 中的用户跟踪

> ID：11063182
> 
> 赞同：0
> 
> 时间：2012-06-16T11:54:16.337
> 
> 标签：php, codeigniter, frameworks

我对 codeignitor 框架有点陌生。但喜欢简单。

我有一个应用程序要求系统需要记录所有用户活动。

例如：如果用户登录：那么我需要类似`<username> logged in <time>` 如果他编辑他的个人资料：那么我需要`<username> <edited> <time>`

或类似的东西。

以便管理员可以查看所有活动...

有没有可用的库？或者我怎样才能在性能方面以最完美的方式实现这一目标？

请给我一些常用的方法..和意见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:51:21.020

为了获得最大的灵活性，编写您自己的日志函数。当我需要此功能时，我会在我使用的每个框架中包含以下功能/方法。WordPress/Codeigniter 等...

```
function log($msg = '', $level = 'INFO')
{
    $debug_backtrace = debug_backtrace();

    $time = date('c', time());
    $filename = PATH_TO_YOUR_SCRIPT . '/log/error_log.txt'; // file perms: 0646

    $output = "[$level] $time $msg\n";
    $output .= "{$debug_backtrace[0]['file']} : {$debug_backtrace[0]['line']}\n";

    if ( ! @file_put_contents($filename, $output, FILE_APPEND))
    {
        error_log("Failed to access log file [$filename] for writing: $msg");
    }
} 
```

[debug-backtrace](http://php.net/manual/en/function.debug-backtrace.php)允许获取调用日志函数的文件和行

# mysql - 从相互链接的两个表中运行搜索的最佳方法（使用 FK）

> ID：11063187
> 
> 赞同：-2
> 
> 时间：2012-06-16T11:55:39.843
> 
> 标签：mysql, database-design

我有一个包含所有数据的表`users`。`Users`但是可以有多个`email`地址，所以我需要将它们存储在单独的表中。

我想根据`email`返回所有信息的地址运行搜索`user`。（我还希望能够通过存储在用户表中的用户名搜索用户表）在我的数据库中存储电子邮件地址的最佳方法是什么？我不认为在用户表中引入冗余的电子邮件地址字段是一个好主意，但可能是？

现在我有一个用户表链接到具有 1:M 关系的电子邮件表。（因此电子邮件地址包含 user_id 作为其主键的一部分）

在我存储电子邮件地址之后，使用 mySql 查询获取所有信息的最佳方式是什么（因此请在您的答案中包含 mySQL）

我知道`JOIN`操作，但我不知道如何在此搜索中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:20:57.243

您可以这样存储您的数据，假设所有电子邮件都是唯一的（我在`UNIQUE KEY`那里添加）

```
CREATE TABLE `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) DEFAULT CHARSET=utf8;

CREATE TABLE `emails` (
  `email` varchar(50) NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`email`),
  KEY `user_id` (`user_id`)
) DEFAULT CHARSET=utf8; 
```

您可以像这样检索特定电子邮件的数据：

```
SELECT users.*, emails.email
FROM users
JOIN emails ON users.id = emails.user_id
WHERE emails.email = 'some_mail@example.com' 
```

您还可以选择用户拥有的所有电子邮件，如下所示：

```
SELECT users.*, GROUP_CONCAT(emails.email) 
FROM users
LEFT JOIN emails ON users.id = emails.user_id
WHERE users.id = 1234
GROUP BY users.id 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-16T11:58:31.370

`table user_email with (id_user,email)`

之后，您可以通过电子邮件或用户 ID 进行搜索

# php - php 将子目录的内容写入单独的文本文件

> ID：11063191
> 
> 赞同：2
> 
> 时间：2012-06-16T11:56:28.497
> 
> 标签：php

我正在尝试列出子目录中的文件并将这些列表写入单独的文本文件。

我设法获取目录和子目录列表，甚至将所有文件写入文本文件。

我只是似乎无法摆脱我正在创建的循环。我要么最终得到一个文本文件，要么第二个+文件也包括所有前面的子目录内容。

我需要实现的是：

*   目录 A/AA/a1.txt,a2.txt >> AA.log
*   目录 A/BB/b1.txt,b2.txt >> BB.log
*   等等

希望这是有道理的。

我发现[PHP SPL RecursiveDirectoryIterator RecursiveIteratorIterator 检索完整树](https://stackoverflow.com/questions/2418068/php-spl-recursivedirectoryiterator-recursiveiteratoriterator-retrieving-the-full)中描述的 recursiveDirectoryIterator 方法很有帮助。然后我使用 for 和`foreach`循环遍历目录，编写文本文件，但我不能将它们分成多个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:12:12.840

很可能您没有过滤掉目录`.`和`..`.

```
$maindir=opendir('A');
if (!$maindir) die('Cant open directory A');
while (true) {
  $dir=readdir($maindir);
  if (!$dir) break;
  if ($dir=='.') continue;
  if ($dir=='..') continue;
  if (!is_dir("A/$dir")) continue;
  $subdir=opendir("A/$dir");
  if (!$subdir) continue;
  $fd=fopen("$dir.log",'wb');
  if (!$fd) continue;
  while (true) {
    $file=readdir($subdir);
    if (!$file) break;
    if (!is_file($file)) continue;
    fwrite($fd,file_get_contents("A/$dir/$file");
  }
  fclose($fd);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:07:52.850

我想我会展示一种不同的方式，因为这似乎是一个使用的好地方[`glob`](http://php.net/glob)。

```
// Where to start recursing, no trailing slash
$start_folder = './test';
// Where to output files
$output_folder = $start_folder;

chdir($start_folder);

function glob_each_dir ($start_folder, $callback) {

    $search_pattern = $start_folder . DIRECTORY_SEPARATOR . '*';

    // Get just the folders in an array
    $folders = glob($search_pattern, GLOB_ONLYDIR);

    // Get just the files: there isn't an ONLYFILES option yet so just diff the
    // entire folder contents against the previous array of folders
    $files = array_diff(glob($search_pattern), $folders);

    // Apply the callback function to the array of files
    $callback($start_folder, $files);

    if (!empty($folders)) {
        // Call this function for every folder found
        foreach ($folders as $folder) {
            glob_each_dir($folder, $callback);
        }
    }
}

glob_each_dir('.', function ($folder_name, Array $filelist) {
        // Generate a filename from the folder, changing / or \ into _
        $output_filename = $_GLOBALS['output_folder']
            . trim(strtr(str_replace(__DIR__, '', realpath($folder_name)), DIRECTORY_SEPARATOR, '_'), '_')
            . '.txt';
        file_put_contents($output_filename, implode(PHP_EOL, $filelist));
    }); 
```

# ruby-on-rails - client_side_validations - 如果有效，如何重置表单错误和样式？

> ID：11063197
> 
> 赞同：-1
> 
> 时间：2012-06-16T11:56:49.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, client-side-validation

我正在使用 client_side_validations gem。

*   如果有效或通过，我如何更改样式？
*   如何删除或重置所有表单错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:57:11.140

您必须专门重写回调。DockYard 网站就是一个很好的例子：[https ://github.com/dockyard/dockyard.com/blob/master/app/assets/javascripts/rails.validations.callbacks.js](https://github.com/dockyard/dockyard.com/blob/master/app/assets/javascripts/rails.validations.callbacks.js)

# jquery - jQuery Print 准确显示的页面格式

> ID：11063203
> 
> 赞同：1
> 
> 时间：2012-06-16T11:58:02.713
> 
> 标签：jquery, asp.net-mvc-3, printing

我想打印页面的一部分，例如`<div id="printablearea"> ... </div>`

现在我用这个：

```
$('a.Print').click(function () {
  $('div#printablearea').printElement();
  return false;
}); 
```

但是使用这种方式有一个问题，那就是页面中的显示元素与打印页面不同。例如，我的所有元素都是从右到左的，但在打印页面中它们都是从左到右的，或者打印页面中的字体不同。

那么有什么方法可以`jQuery printElement`用来精确打印显示的页面，如果没有，您的建议是什么？我只有两个限制：

1-确切显示的页面格式

2-我想打印部分页面而不是全部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:59:04.587

如果您遇到格式问题，您可以覆盖打印的 css：

```
$("selector").printElement(
        {
        overrideElementCSS:[
    'thisWillBeTheCSSUsed.css',
    { href:'thisWillBeTheCSSUsedAsWell.css',media:'print'}]
        }); 
```

或者

```
 $("selector").printElement(
        {
        printBodyOptions:
        {
        styleToAdd:'padding:10px;margin:10px;color:#FFFFFF !important;',
        classNameToAdd : 'thisWillBeTheClassUsedAsWell'
        }
        }); 
```

来自网站的文档：[http ://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

# css - 禁用 css 的蜜罐

> ID：11063206
> 
> 赞同：2
> 
> 时间：2012-06-16T11:58:20.663
> 
> 标签：css, honeypot

我已经读到禁用 CSS 的用户会看到带有“显示：无”的字段，如果我们为他们写“如果你看到这个，请将此表单字段留空”之类的内容，机器人也会读取它并且可以避免它。

我在想一种方法来避免这个问题：只需用“ap Div”层隐藏蜜罐字段，这样用户就不会看到它，我认为它不会受到禁用 css 的影响。如果有人告诉我它是否可行，是否会出现其他问题以及是否有人知道更好的解决方案，我将不胜感激

在此先感谢您的时间！！

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:02:17.750

我可能误解了你，但我认为你所指的这个“ap Div”是 Dreamweaver 描述应用 CSS 规则的`div`方式`position: absolute;`。

既然如此，如果 CSS 被禁用，那么一个“ap Div”将按照文档的正常流程显示在页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:21:52.157

要隐藏字段，请使用`<input type="hidden" />`. 但鉴于您只想对用户隐藏该字段，请使用以下内容：

```
<input type="text" id="hEmail" value="" />
<script>
window.onload = function (){
   document.getElementById('hEmail').type = 'hidden';
};
</script> 
```

附言。建议在包含文件中添加 JavaScript 代码，而不是在页面正文中。

# ios - 错误，核心数据，原因：'*** -[_PFArray objectAtIndex:]: index (2) beyond bounds (2)'

> ID：11063209
> 
> 赞同：4
> 
> 时间：2012-06-16T11:58:39.380
> 
> 标签：ios, uitableview, core-data

嗨，我几乎是编程新手。我面临一个我无论如何都无法解决的错误。即使在与花药溶液进行比较之后。我已经为此工作了大约 3 天。

所以让我完全描述我的问题：

1.这是我的实现代码：

```
#import "DocumentTableViewController.h"
#import "AddDocumentTableView.h"
#import "DB_document.h"

@implementation DocumentTableViewController

@synthesize managedObjectContext;
@synthesize btnAddDocument;
@synthesize fetchedObjects;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSManagedObjectContext *context = managedObjectContext;
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"DB_document" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];
    NSError *error;
    fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
    NSLog(@"%d",[fetchedObjects count]);
}

- (void)viewDidUnload
{
    [self setBtnAddDocument:nil];
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int result = 0;
    if (section == 0) 
    {
        result = [fetchedObjects count] + 1;
    }
    else if (section == 1)
    {
        result = 1;
    }
    return result;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 40;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    DB_document *db_document = [fetchedObjects objectAtIndex:indexPath.row];

    if (indexPath.section == 0 && indexPath.row == 0) 
    {
        UILabel *lblMoney = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 70, 40)];
        lblMoney.text = @"amount";
        lblMoney.textAlignment = UITextAlignmentCenter;
        lblMoney.textColor = [UIColor blackColor];
        lblMoney.backgroundColor = [UIColor clearColor];
        lblMoney.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblMoney];

        UILabel *lblDescription = [[UILabel alloc] initWithFrame:CGRectMake(85, 0, 150, 40)];
        lblDescription.text = @"description";
        lblDescription.textAlignment = UITextAlignmentCenter;
        lblDescription.textColor = [UIColor blackColor];
        lblDescription.backgroundColor = [UIColor clearColor];
        lblDescription.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblDescription];

        UILabel *lblDate = [[UILabel alloc] initWithFrame:CGRectMake(240, 0, 70, 40)];
        lblDate.text = @"date";
        lblDate.textAlignment = UITextAlignmentCenter;
        lblDate.textColor = [UIColor blackColor];
        lblDate.backgroundColor = [UIColor clearColor];
        lblDate.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblDate];

        UIButton *btnLine1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btnLine1.frame = CGRectMake(80, 0, 1, 40);
        [cell addSubview:btnLine1];

        UIButton *btnLine2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btnLine2.frame = CGRectMake(240, 0, 1, 40);
        [cell addSubview:btnLine2];

        return cell;
    }
    if (indexPath.section == 0 && indexPath.row != 0)
    {
        UILabel *lblMoney = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 70, 40)];
        lblMoney.text = [NSString stringWithFormat:@"%d",db_document.docAmount];
        lblMoney.textAlignment = UITextAlignmentCenter;
        lblMoney.textColor = [UIColor blackColor];
        lblMoney.backgroundColor = [UIColor clearColor];
        lblMoney.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblMoney];

        UILabel *lblDescription = [[UILabel alloc] initWithFrame:CGRectMake(85, 0, 150, 40)];
        lblDescription.text = db_document.docDescription;
        lblDescription.numberOfLines = 2;
        lblDescription.textAlignment = UITextAlignmentCenter;
        lblDescription.textColor = [UIColor blackColor];
        lblDescription.backgroundColor = [UIColor clearColor];
        lblDescription.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblDescription];

        UILabel *lblDate = [[UILabel alloc] initWithFrame:CGRectMake(240, 0, 70, 40)];
        NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];
        [dateFormater setDateFormat:@"yyyy/mm/dd"];
        lblDate.text = [NSString stringWithFormat:@"%@",[dateFormater stringFromDate:(NSDate *)db_document.docDate]];
        lblDate.textAlignment = UITextAlignmentCenter;
        lblDate.textColor = [UIColor blackColor];
        lblDate.backgroundColor = [UIColor clearColor];
        lblDate.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblDate];

        UIButton *btnLine1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btnLine1.frame = CGRectMake(80, 0, 1, 40);
        [cell addSubview:btnLine1];

        UIButton *btnLine2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btnLine2.frame = CGRectMake(240, 0, 1, 40);
        [cell addSubview:btnLine2];

        return cell;
    }
    if (indexPath.section == 1)
    {
        UILabel *lblMoney = [[UILabel alloc] initWithFrame:CGRectMake(10, 0, 70, 40)];
        lblMoney.text = @"";
        lblMoney.textAlignment = UITextAlignmentCenter;
        lblMoney.textColor = [UIColor blackColor];
        lblMoney.backgroundColor = [UIColor clearColor];
        lblMoney.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblMoney];

        UILabel *lblTotalAmount = [[UILabel alloc] initWithFrame:CGRectMake(165, 0, 140, 40)];
        lblTotalAmount.text = @"amounts";
        lblTotalAmount.textAlignment = UITextAlignmentCenter;
        lblTotalAmount.textColor = [UIColor blackColor];
        lblTotalAmount.backgroundColor = [UIColor clearColor];
        lblTotalAmount.font = [UIFont systemFontOfSize:12];
        [cell addSubview:lblTotalAmount];

        UIButton *btnLine = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        btnLine.frame = CGRectMake(160, 0, 1, 40);
        [cell addSubview:btnLine];

        return cell;
    }
    return cell;
}

- (IBAction)btnAddDocument_click:(id)sender
{
    AddDocumentTableView *addDocumentTableView = [[AddDocumentTableView alloc] init];
    addDocumentTableView.managedObjectContext = managedObjectContext;
    [self.navigationController pushViewController:addDocumentTableView animated:YES];
} 
```

2.这是错误：

2012-06-16 15:25:31.696 Account5[5534:fb03] 2 2012-06-16 15:25:31.704 Account5[5534:fb03] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[ _PFArray objectAtIndex:]: index (2) beyond bounds (2)' *** 首先抛出调用栈：

3.让我描述一下程序。我可以使用核心数据将数据保存到数据库，但是当我想获取数据时程序会跳出。我必须考虑到我认为 NSManagedObjectContext 获取了数据，因为 fetchedObjects Array 有 2 个数据，因为我插入了。我不得不说我的RootViewController 是 DocumentTableViewController 这意味着当我运行程序时它会崩溃。如果我想运行该应用程序，我必须发表评论`DB_document *db_document = [fetchedObjects objectAtIndex:indexPath.row];`

在该应用程序运行后，我可以在另一个页面中插入数据。我必须考虑到当应用程序崩溃时它会完全停止

`DB_document *db_document = [fetchedObjects objectAtIndex:indexPath.row];`

用绿色突出显示的线。谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T12:15:12.593

这是你的问题：

在`numberOfRowsInSection`您将一个添加到`fetchedResults`数组中。据推测，您想在该部分中添加额外的行。没事儿。

但是，在`cellForRowAtIndexPath`您`indexPath.row`将`db_document`. 显然，在最后一行它会崩溃。您必须首先检查您所在的行，然后`db_document`仅在您需要该特定行时才检索您的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T11:16:53.273

问题在这里：

```
result = [fetchedObjects count] + 1; 
```

在 numberOfRowsInSection 上，您添加的行比 fetchedObjects 计数多，当您在 cellForRowAtIndexPath 上时，fetchedObjects 具有例如 3 行并且您获得第 4 行，并且发生此异常并且您超出了该数组的范围。

# php - 使用 php 将 css 样式拆分为数组

> ID：11063220
> 
> 赞同：-1
> 
> 时间：2012-06-16T12:00:14.460
> 
> 标签：php, css, multidimensional-array

我有以下CSS代码

```
h1, h2, h3, h4 {
  color: #333;
  font-size: 12px;
} 
```

我想把它分成一个php数组，例如

```
array(
  h1 => array(
    color => #333
    font-size => 12px )
  h2 => array(
    color => #333
    font-size => 12px )
  h3 => array(
    color => #333
    font-size => 12px )
  h4 => array(
    color => #333
    font-size => 12px )
) 
```

有谁知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:39:16.917

以下代码适用于大多数情况，但并非所有情况：

```
$clean_css_str = preg_replace('#/\*.*\*/#U', ' ', str_replace("\n", ' ', $css_str));
$r = preg_match_all('/([^{]+){([^}]*)}/', $clean_css_str, $match_arr);
$sel_arr = array_map('trim', $match_arr[1]);
$css_arr = array_map('trim', $match_arr[2]);
$css_map = array();
for ($i = 0; $i < $r; $i++) {
   if (preg_match_all('/([-a-z_][-a-z0-9_]*)\s*:\s*([^;]+)(;|$)/i', $css_arr[$i], $match_arr)) {
      $prop_arr = array_map('trim', $match_arr[1]);
      $decl_arr = array_map('trim', $match_arr[2]);
      $decl_map = array_combine($prop_arr, $decl_arr);
      foreach (array_map('trim', explode(',', $sel_arr[$i])) as $sel) {
         $css_map[$sel] = isset($css_map[$sel]) ? array_merge($css_map[$sel], $decl_map) : $decl_map;
      }
   }
}
var_export($css_map); echo "\n"; 
```

它不适用于 @ 规则、选择器中的左大括号、声明中的右大括号或分号，以及一些更奇特的情况。

（请注意：我在上面代码被接受半年后修复了一个错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:55:34.247

只需使用[CSS 解析器](https://github.com/sabberworm/PHP-CSS-Parser)，github 上就有很多。

# asp.net - 如何通过IP使用局域网连接运行asp .net项目

> ID：11063227
> 
> 赞同：1
> 
> 时间：2012-06-16T12:01:22.920
> 
> 标签：asp.net, iis-7, ip, lan

我正在使用 asp.net .. 我创建了一个小应用程序.. 我在 IIS 7 中配置了我的应用程序，如果我通过 ip 在我的系统中运行，则可以运行.. 但如果在 LAN 网络中运行，则使用我系统的 ip..**我收到以下错误（192.168.1.11 的服务器响应时间过长。）**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T07:07:45.533

请关闭防火墙设置它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:06:34.587

您是否在 Windows 防火墙中添加了 IIS 规则？

# android - 使用 Runnable 的动画？

> ID：11063230
> 
> 赞同：-1
> 
> 时间：2012-06-16T12:01:35.910
> 
> 标签：android, animation, handler, runnable

我正在尝试使用`Runnable`and为 ImageView 设置动画`Handler.postDelayed`。位图操作都可以正常工作，但我得到的是 ImageView 的最终结果，而不是动画。这里有什么问题？

```
final ImageView imageView = (ImageView) findViewById(R.id.imageView);
    final Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.clock_flip_top);
    final Matrix matrix = new Matrix();
    for (i = 0; i < 30; i++) {
        float c = i/5;

        src = new float[] { 0, 0, bitmap.getWidth(), 0,
                    bitmap.getWidth(), bitmap.getHeight(), 0,
                    bitmap.getHeight() };
        dst = new float[] { 0 - c, 0, bitmap.getWidth() + c, 0,
                bitmap.getWidth(), bitmap.getHeight(), 0,
                bitmap.getHeight() };

        anim = new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                matrix.setPolyToPoly(src, 0, dst, 0, src.length >> 1);
                Bitmap newBitmap = Bitmap
                        .createBitmap(bitmap, 0, 0, bitmap.getWidth(),
                                bitmap.getHeight(), matrix, true);
                imageView.setImageBitmap(newBitmap);
                handler.postDelayed(anim, i * 200);

            }

        };
        anim.run();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:23:54.667

你不叫`run()`。要让您的 Runnable 对象在另一个线程中运行，您必须创建一个 Thread 对象，将构造函数中的 Runnable 对象传递给 Thread 对象。然后调用`start()`线程对象。有关如何启动线程的详细说明，请参见[此处。](http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html)

# database - 如何更新更多关于在推进中添加关系的表格

> ID：11063236
> 
> 赞同：1
> 
> 时间：2012-06-16T12:02:23.227
> 
> 标签：database, symfony-1.4, propel, database-integrity

我试图找出在更改外键依赖项时更新其他相关表的最佳位置。

准确地说，我有一张名为“flat”的桌子和另一张名为“room”的桌子，其中包含

> flat_id: {type: INTEGER, foreignTable:flat, foreignReference: id, required: true }

除了方法 Room::SetFlatId()，Propel (1.3) 也给了我 Room::SetFlat()

但是当我向公寓添加房间时，我想自动更改一些其他相关的表，以保持比数据库定义更高级别的一致性。我想我会覆盖 Flat::addRoom(Room $room) 来调用它的父级，然后进行这些进一步的更改。

但是我遇到了一个问题，因为由于需要“flat_id”列，所以在保存 Room 对象之前总是会调用 SetFlatId() 和 setFlat() 之一。

但是在保存 Room 对象之前，它没有 id，因此我的扩展 addRoom 无法工作，因为没有 room_id 来识别其他表中的相关记录。

这似乎表明我不能将代码放入 Flat::addRoom() 中，这取决于已保存的 Room。但是我可以把我的代码放在哪里？

显然，我可以只要求在制作或更改 Room 对象后手动调用它；但由于它实际上在做的是维护一种更高级别的数据库完整性，所以我不愿意这样做。我可以将它放入一种或两种“保存”方法中；但从逻辑上讲，只有在 Room 和 Flat 之间的关联发生更改时才需要运行它。

这段代码应该去哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:55:32.117

[这是自定义行为](http://propelorm.org/documentation/06-behaviors.html)的典型案例。

# windows-8 - 如何从win8库中读取

> ID：11063238
> 
> 赞同：0
> 
> 时间：2012-06-16T12:02:36.040
> 
> 标签：windows-8, microsoft-metro

我想从 win8 音乐库中读取文件名并在 Metro 应用程序中显示它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:59:11.310

您可以通过以下方式访问音乐库：

```
SuggestedStartLocation = PickerLocationId.MusicLibrary 
```

您可以像这样在 Metro 应用程序中播放它，例如：

```
MediaElement snd = new MediaElement();
StorageFolder folder = await Package.Current.InstalledLocation.GetFolderAsync("Sounds");
StorageFile file = await folder.GetFileAsync("bee.wav");
var stream = await file.OpenAsync(FileAccessMode.Read);
snd.SetSource(stream, file.ContentType);
snd.Play(); 
```

您可以更改位置，我在我的应用程序中使用了此位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:25:18.193

1.  在其“功能”部分更改应用清单以声明您将访问用户的音乐库
2.  在其“声明”部分更改应用程序清单以声明您将使用文件选择器（旧的文件打开对话框）

然后，您可以使用与此类似的代码：

```
var openPicker = new Windows.Storage.Pickers.FileOpenPicker();
openPicker.viewMode = Windows.Storage.Pickers.PickerViewMode.thumbnail;
openPicker.suggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.picturesLibrary;
openPicker.fileTypeFilter.replaceAll([".png", ".jpg", ".jpeg"]); 
```

# vb6 - 如何在 VB6 中更改按钮的可见性？

> ID：11063240
> 
> 赞同：0
> 
> 时间：2012-06-16T12:02:44.447
> 
> 标签：vb6

**情况**

我正在开发一个 VB6 应用程序，我需要做的就是通过单击命令将一些文件从服务器位置同步到本地工作站。我正在执行两种类型的操作，一种是完全同步，另一种是部分同步。现在，当同步正在进行时，我正在显示一个屏幕，上面有一个停止按钮。如果用户愿意，此停止旨在停止媒体复制。

现在，此停止按钮仅在我执行完全同步时可见。执行部分同步时，没有停止同步的选项。

执行完全同步和部分同步的函数写在不同的类中。

**问题 ：**

我已经实现了所有其他功能，但是我在使这个停止按钮动态化时遇到了问题..即当调用完全同步时它是可见的，而当调用部分同步时它是不可见的。

希望有人帮助

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:54:04.987

将[Visible](http://msdn.microsoft.com/en-us/library/aa445768%28v=vs.60%29.aspx)属性设置为 False 以隐藏按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T13:14:59.017

如果我理解正确，因为停止按钮位于单独的表单上，所以它上面没有其他按钮 - 我自己也有类似的情况。

我可以建议检查两个同步按钮是否在按下时都启用了停止按钮的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-18T23:09:34.470

我会这样做：

```
Private sub cmdFullSync_Click()
'run existing code for a full sync
cmdStop.visible = true
end Sub

Private sub cmdPartialSync_Click()
'run existing partial sync code
cmdstop.visible = false
end Sub 
```

# math - 使用 Tcl_CreateMathFunc 在 TCL 中定义一个新的数学函数

> ID：11063241
> 
> 赞同：1
> 
> 时间：2012-06-16T12:02:58.450
> 
> 标签：math, tcl

我使用 TCL 8.4，对于该版本，我需要使用 TCL 库函数将新的数学函数添加到 TCL 解释器中，特别是`Tcl_CreateMathFunc`. 但我找不到一个如何做到这一点的例子。请你为我写一个非常简单的例子，假设在 C 代码中你有一个`Tcl_Interp *interp`你应该添加一个数学函数（比如，一个将两个双数相乘的函数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:07:55.053

[我曾经为 Tcl 做过一些随机数生成器的替代实现，您可以在git 存储库](http://www.patthoyts.tk/gitweb?p=Random;a=summary)中查看一些示例。generic 中的文件为每个 PRNG 实现一个 tcl 命令和一个 tcl 数学函数。

因此，例如在 Mersenne Twister 实现中，在包 init 函数中，我们通过声明将新函数添加到解释器

```
Tcl_CreateMathFunc(interp, "mt_rand", 1, (Tcl_ValueType *)NULL, RandProc, (ClientData)state); 
```

这为我们注册了 C 函数 RandProc。在这种情况下，该函数不接受任何参数，但种子等效项 (srand) 显示了如何处理单个参数。

```
/*
 * A Tcl math function that implements rand() using the Mersenne Twister
 * Pseudo-random number generator.
 */
 static int
 RandProc(ClientData clientData, Tcl_Interp *interp, Tcl_Value *args, Tcl_Value *resultPtr)
 {
     State * state = (State *)clientData;
     if (! (state->flags & Initialized)) {
         unsigned long seed;
         /* This is based upon the standard Tcl rand() initializer */
         seed = time(NULL) + ((long)Tcl_GetCurrentThread()<<12);
         InitState(state, seed);
     }
     resultPtr->type = TCL_DOUBLE;
     resultPtr->doubleValue = RandomDouble(state);
     return TCL_OK;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T18:06:01.253

请注意，这是一个不太可能无限期存在的 API（原因包括其怪异的类型、不灵活的参数处理以及无法从 Tcl 本身轻松使用它）。但是，以下是如何在`add(x,y)`两个参数都为`double`s 的情况下执行操作：

## 登记

```
Tcl_ValueType types[2] = { TCL_DOUBLE, TCL_DOUBLE };
Tcl_CreateMathFunc(interp, "add", 2, types, AddFunc, NULL); 
```

## 执行

```
static int AddFunc(ClientData ignored, Tcl_Interp *interp,
        Tcl_Value *args, Tcl_Value *resultPtr) {
    double x = args[0].doubleValue;
    double y = args[1].doubleValue;

    resultPtr->doubleValue = x + y;
    resultPtr->type = TCL_DOUBLE;
    return TCL_OK;
} 
```

请注意，由于此 API 始终使用固定数量的函数参数（并为您处理参数类型转换），因此您编写的代码可能非常短。（把它写成类型灵活`TCL_EITHER`——只允许在注册/声明中——使事情变得相当复杂，而且你真的被固定的参数数量所困扰。）

# javascript - 等待函数完成的 setInterval 的替代方案

> ID：11063242
> 
> 赞同：10
> 
> 时间：2012-06-16T12:03:03.297
> 
> 标签：javascript, ajax

目前，我正在使用 setInterval 运行几个调用 PHP 页面的 AJAX 函数，如下所示 -

```
var intervalOne = setInterval(ajaxfunction, 1500); 
```

这在响应时间很短的测试服务器上运行良好。但是偶尔在我的实时服务器上，会有一点延迟，间隔时间会在第一个完成之前再次出现，重复相同的调用，并导致出现重复数据。

有什么方法可以保持相同的间隔时间，但是如果第一个还没有完成，它是否要等待调用该函数？

或者，有什么我可以在 AJAX 调用的 readystate 部分中放入的东西，让它们在完成后再次触发它们？

编辑 - 我的一个 ajax 调用示例：

```
function Send() {
var name = document.getElementById('name').value;
var message = document.getElementById('message').value;

var xmlhttp = getXMLHttp();

xmlhttp.onreadystatechange = function() {
    if(xmlhttp.readyState == 4)
    {
        document.getElementById('message').value = "";

        if(xmlhttp.responseText != "") {
            var chat = document.getElementById('messagebox');
            chat.innerHTML = chat.innerHTML + '<div class=\"alert\">' + xmlhttp.responseText + '</div>';
            chat.scrollTop = 1000000000;
        }
    }
}

xmlhttp.open("POST","submit_message.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("name=" + name + "&message=" + message);

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T12:07:00.953

`setTimeout`简单的方法是在流程结束时盲目地重新申请：

```
function foo() {
  // possibly long task
  setTimeout(foo, 1500);
}
foo(); 
```

这将在您的进程之间等待 1500 毫秒。像这样：300ms 处理，1500ms 等待，2000ms 处理，1500ms 等待，400ms 处理，1500ms 等待......

更接近您想要的，您可以`setTimeout`在流程*开始*时重新申请。在这种情况下，你会得到：300ms 进程，1200ms 等待，2000ms 进程，0ms 等待，400ms 进程，1100ms 等待......发生的问题`setInterval`不会在这里发生，因为这只会安排*下*一次迭代，而不是全部未来的。还要注意，由于 JS 是单线程的，事件不能像其他语言那样中断自己。

```
function foo() {
  setTimeout(foo, 1500);
  // possibly long task
}
foo(); 
```

是的，我想现在更流行的是让它自动执行，正如你在一些答案中看到的那样；但这只是美学，最终效果是一样的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T12:07:34.013

您可以替换`setInterval()`为`setTimeout()`在每个 AJAX 响应上不断重新安排：

```
function Send() {
    //...
    xmlhttp.onreadystatechange = function() {
        if(xmlhttp.readyState == 4) {
            setTimeout(Send, 1500);
            //...
        }
    }
}

Send(); 
```

如果您不需要毫秒精度，这很好（调用之间的时间为 1500 毫秒 + 平均响应时间）。如果您需要每 1500 毫秒准确地调用一次服务器，您可以从 1500 毫秒中减去响应时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T12:06:34.033

您可以像这样创建一个自调用函数`setTimeout`：

```
(function foo(){

 // your code logic here

 setTimeout(foo, 5000);

})(); 
```

这里的区别在于它的工作方式`setInterval`与它相似但不同，下一次调用函数将仅在`your code logic here`部分完成执行后运行。

在此处查看**[演示](http://jsbin.com/usali4)**。

# python - 合成子模块：从 A 导入 B（正常）与导入 AB（错误）？

> ID：11063243
> 
> 赞同：3
> 
> 时间：2012-06-16T12:03:11.307
> 
> 标签：python, boost-python, python-module, synthetic

我有一个 module `modA`，其中包含一个合成的子模块`modB`（用 创建`PyModule_New`）；现在导入模块：

1.  `from modA import modB`没关系
2.  `import modA.modB`失败。

我错过了什么？

*   modA.cpp （使用`boost::python`，但很可能与纯 c-API 的 python 相同）：

    ```
    #include<boost/python.hpp>
    namespace py=boost::python;

    BOOST_PYTHON_MODULE(modA){
       py::object modB=py::object(py::handle<>(PyModule_New("modB")));
       modB.attr("__file__")="<synthetic>";
       py::scope().attr("modB")=modB;
    }; 
    ```

*   用 (g++ 而不是 clang++ 的工作方式相同) 编译

    ```
    clang++ -o modA.so modA.cpp -fPIC -shared  -lboost_python `pkg-config python --cflags --libs` 
    ```

*   测试.py：

    ```
    import sys
    sys.path.append('.')
    from modA import modB
    import modA.modB 
    ```

*   `python test.py`（注意第一次导入很好，第二次导入失败）：

    ```
    Traceback (most recent call last):
      File "test.py", line 4, in <module>
        import modA.modB
    ImportError: No module named modB 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:36:49.637

感谢[这个答案](https://stackoverflow.com/a/5122529/761090)，我找到了解决方案，它包含在`sys.modules['modA.modB']=modB`模块初始化函数中，但用c++编写：

```
#include<boost/python.hpp>
namespace py=boost::python;

BOOST_PYTHON_MODULE(modA){
   py::object modB=py::object(py::handle<>(PyModule_New("modA.modB")));
   modB.attr("__file__")="<synthetic>";
   py::scope().attr("modB")=modB;

   // this was the missing piece: sys.modules['modA.modB']=modB
   py::extract<py::dict>(py::getattr(py::import("sys"),"modules"))()["modA.modB"]=modB;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-24T23:27:51.563

这是我使用的模式，希望它能改善以前的答案......

模块.h：

```
...
#define STR(str) #str
#define MAKE_SUBMODULE(mod, submod) object submod##_module(handle<>(borrowed(PyImport_AddModule(STR(mod.submod)))));\
scope().attr(STR(submod)) = submod##_module;\
scope submod##_scope = submod##_module;\
...
export_submodule();
... 
```

模块.cpp：

```
BOOST_PYTHON_MODULE(modulename)
{
    export_submodule();
} 
```

子模块.cpp：

```
export_submodule()
{
    // create submodule
    MAKE_SUBMODULE(modulename, submodulename)

    // all code below is now in submodule's scope
    ...
} 
```

“生成”的代码如下所示：

```
object submodulename_module(handle<>(borrowed(PyImport_AddModule("modulename.submodulename"))));
scope().attr("submodulename") = submodulename_module;
scope submodulename_scope = submodulename_module; 
```

它看起来类似于 eudoxos 答案，但差异似乎很详细：而不是`PyImportNew()`我使用`PyImportAdd()`. 因此，我不需要最后一行来使`from module.submodule import *`语句生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T12:25:35.960

`modB`不是文件（即模块），而是 中的某个对象`modA`，因此无法导入。

您可能想查看[Python 的模块文档](http://docs.python.org/tutorial/modules.html)。

# c++ - 模板的部分特化

> ID：11063244
> 
> 赞同：6
> 
> 时间：2012-06-16T12:03:13.200
> 
> 标签：c++, templates

考虑：

```
template <typename Function, typename ...Args>
auto wrapper(Function&& f, Args&&... args) -> decltype(f(args...)) {
//...
} 
```

`decltype(f(args...))`对于指针所在的所有情况，有没有办法部分专门化上述模板？

**编辑**：
我认为它可以用一个模板帮助类来完成，它`decltype(f(args...))`作为模板参数，并专门化帮助类。如果您知道更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:06:19.250

基于 SFINAE 的解决方案：

```
#include <type_traits>

template<
    typename Functor
    , typename... Args
    , typename Result = decltype(std::declval<Functor&>()(std::declval<Args>()...))
    , typename std::enable_if<
        std::is_pointer<Result>::value
        , int
    >::type = 0
>
Result wrapper(Functor&& functor, Args&&... args)
{ /* ... */ }

template<
    typename Functor
    , typename... Args
    , typename Result = decltype(std::declval<Functor&>()(std::declval<Args>()...))
    , typename std::enable_if<
        !std::is_pointer<Result>::value
        , int
    >::type = 0
>
Result wrapper(Functor&& functor, Args&&... args)
{ /* ... */ } 
```

您可以根据需要调整测试（此处为`std::is_pointer<Result>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:46:01.527

如您所见，返回类型不是模板参数或参数的一部分，因此您不能重载或专门化。派遣助手是您的最佳选择。

```
#include <type_traits>

template<typename Func, typename... Args>
void func_impl(Func&& f, Args&&... args, std::true_type) 
-> decltype(func_impl(std::forward<Args>(args)...)) 
{ }

template<typename Func, typename... Args>
void func_impl(Func&& f, Args&&... args, std::false_type) 
-> decltype(func_impl(std::forward<Args>(args)...)) 
{ }

template<typename Func, typename... Args>
auto func(Func&& f, Args&&... args) 
  -> decltype(func_impl(std::forward<Func>(f), std::forward<Args>(args)...))
{ return func_impl(std::forward<Func>(f), std::forward<Args>(args)..., 
                   std::is_pointer<decltype(f(std::forward<Args>(args)...))>::type); } 
```

不过，通过右值引用来获取函数对我来说似乎有点奇怪，而且您在原始示例中也省略了转发。

另一种可能的解决方案可能是模板默认参数和重载。但这不适用于参数列表。

# java - 如何在 android 中解析 Google 公共日历？

> ID：11063249
> 
> 赞同：3
> 
> 时间：2012-06-16T12:03:53.350
> 
> 标签：java, android, google-calendar-api, google-data-api

我的网站上有一个可供所有人使用的 Google 日历。我想解析这个日历并将其显示在 Android 应用程序中。

我知道我必须使用谷歌数据 API [google-api-java-client](http://code.google.com/p/google-api-java-client/wiki/Android)，但这就是我所得到的。谁能解释或给我链接到可能有用的教程或文档

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:49:05.010

我认为[这](https://developers.google.com/apis-explorer/#s/calendar/v3/)是您正在寻找的正确文档。

# php - Zend_Form Captcha 未验证

> ID：11063254
> 
> 赞同：4
> 
> 时间：2012-06-16T12:04:50.877
> 
> 标签：php, zend-form, captcha

我已经阅读了很多关于此的帖子，但我无法解决我的问题。当我尝试验证我的 zend 表单验证码时，即使文本正确，它也总是失败。这是我的代码：

// 我在哪里调用我的表单

```
 public function contactAction()
{
    $this->view->form = new Forms_ContactForm();
} 
```

//我的表格

```
class Forms_ContactForm extends Twitter_Form
{
public function init()
{
    $this->setAction( 'email/email/contact' );
    $this->setMethod('post');

    $this->addElement('text', 'strFirstName', array( 
            'required' => true,
            'label' => 'Your First Name' ) );

    $this->addElement('text', 'strLastName', array( 
            'required' => true,
            'label' => 'your Last Name' ) );

    $this->addElement('text', 'strEmail', array( 'validators' => array(
            array('EmailAddress') ),
            'required' => true,
            'label' => 'Your Email' ) );

    $this->addElement('textarea', 'strContent', array( 
            'required' => true,
            'label' => 'Your message' ) );

    $this->addElement('captcha', 'captcha', array(
            'label'      => 'Please enter the 5 letters displayed below:',
            'required'   => true,
                            'name'       => 'captchaField',
            'captcha' => 'image',
            'captchaOptions' => array(  
                            'captcha' => 'image',  
                            'font'=> 'static/font/arial.ttf',
                            'imgDir'=>'static/img/captcha',
                            'imgUrl'=> 'static/img/captcha/',
                    'wordLen' => 5,
                    'fsize'=>20,
                    'height'=>60,
                    'width'=>200,
                    'gcFreq'=>50,
                    'expiration' => 300)

            ));

    $this->addElement('submit', 'submit', array('class' => 'Submit') );
}
} 
```

// 和我发送它的动作

```
public function contactAction()
{
    if( $this->_request->isPost() )
    {
        $objForm = new Forms_ContactForm();

        if( $objForm->isValid($_POST) )
        {
            $arrParams = $this->_request->getParams();
            if( $arrParams['strFirstName'] && $arrParams['strLastName'] && $arrParams['strEmail'] && $arrParams['strContent'] ) 
            {
                $this->_objEmail = new Zend_Mail();
                $this->_objEmail ->setFrom( $arrParams['strEmail'] );
                $this->_objEmail ->setSubject( 'C' );
                $this->_objEmail ->setBodyHtml( 'Message from: '. $arrParams['strFirstName'] . ' ' . $arrParams['strLastName'] . 
                                                '<BR>eMail address: ' . $arrParams['strEmail'] . '<BR><BR>'
                                                . $arrParams['strContent'] );

                $this->_objEmail ->addTo( 'mail@gmail.com' );

                $this->view->bolSent = $this->_objEmail->send();
            }
        }
        else
            $this->view->form = $objForm;
    }
} 
```

似乎在我的contactAction中，它生成了一个新的验证码，这就是为什么它与我提交的验证码不匹配，但我不知道如何修复它。

感谢您的时间和帮助！

刚刚看到一些狡猾的东西：当我在联系操作中倾倒我的 $_POST 时，这是我的结果：

```
array
'strFirstName' => string 'fghjfghj' (length=8)
'strLastName' => string 'ffffffff' (length=8)
'strEmail' => string 'fvhkbno@biu.fr' (length=14)
'strContent' => string 'fewfew' (length=6)
'captchaField' => string 'cebfe69ead38dba86a6b557dc8853b24' (length=32) 
```

我刚刚输入的验证码甚至出现了，而我有验证码凯！！？？

**编辑**

再次感谢您的重播！！！即使您进行了更改，仍然不存在，但我认为我有什么问题。这是我的验证码字段的 html：

```
<div class="control-group">
   <label class="control-label required" for="captchaField-input">Please enter the 5  letters displayed below:</label>
   <div class="controls">
       <img width="200" height="60" src="static/img/captcha/ab2d15044a637338064b39cfd2675837.png" alt="">
       <input type="hidden" id="captchaField-id" value="ab2d15044a637338064b39cfd2675837" name="captchaField[id]">
       <input type="text" value="" id="captchaField-input" name="captchaField[input]">
       <input type="text" value="ab2d15044a637338064b39cfd2675837" id="captchaField" name="captchaField">
   </div>
</div> 
```

当我查看发送的参数时，这是我得到的：

验证码字段 ab2d15044a637338064b39cfd2675837 验证码字段[id] ab2d15044a637338064b39cfd2675837 验证码字段[输入] 6af7u

似乎 cptchaField 覆盖了 [id] 和 [input]

我觉得我需要删除这个 captchaField 但不知道到目前为止如何！

我可以用 JS 做到这一点，但必须有一个干净的方法来做到这一点！

**再次编辑**

我使用 ajax 提交表单，并带有序列化。可能是这个问题，看看。

**编辑三**

它不是由ajax引起的。如果我手动删除该行：

```
 <input type="text" value="ab2d15044a637338064b39cfd2675837" id="captchaField" name="captchaField"> 
```

使用萤火虫，一切正常，验证码验证良好。现在的问题是如何正确删除这条线......

**解决方案**

经过一番挣扎，这里是解决方案（删除装饰器）！

```
$captcha = new Zend_Form_Element_Captcha('captchaField',
        array('label' => "Please enter the 5  letters displayed below:",
            'required'=>true,
            'captcha' => array(
            'captcha' => 'image',
            'font'=> 'static/font/arial.ttf',
            'imgDir'=>'static/img/captcha',
            'imgUrl'=> 'static/img/captcha/',
            'wordLen' => 5,
            'fsize'=>20,
            'height'=>60,
            'width'=>200,
            'gcFreq'=>50,
            'expiration' => 300
        )
    ));

    $this->addElement($captcha);    
    $this->getElement('captchaField')->removeDecorator("viewhelper"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T10:26:33.683

经过很多努力，这是解决方案（我只需要删除装饰器）！

```
$captcha = new Zend_Form_Element_Captcha('captchaField',
    array('label' => "Please enter the 5  letters displayed below:",
        'required'=>true,
        'captcha' => array(
        'captcha' => 'image',
        'font'=> 'static/font/arial.ttf',
        'imgDir'=>'static/img/captcha',
        'imgUrl'=> 'static/img/captcha/',
        'wordLen' => 5,
        'fsize'=>20,
        'height'=>60,
        'width'=>200,
        'gcFreq'=>50,
        'expiration' => 300
    )
));

$this->addElement($captcha);    
$this->getElement('captchaField')->removeDecorator("viewhelper"); 
```

感谢 Haroon 的帮助和时间 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:20:22.263

我认为您的代码需要如下所示，我认为在contactAction.php文件中`public function contactAction()` 应该处理显示表单和表单发布到的操作）：

`//Display the form`

 ````
$objForm = new Forms_ContactForm();

$this->view->form = $objForm;

//Handle the form, when it has been posted including validation etc

if( $this->_request->isPost() )
{  
    if( $objForm->isValid($_POST) )
    {
        //processing logic etc
    }        
} 
````  `目前，您的代码正在生成一个新的验证码以确认数据输入，因为您在表单被发布到之后实例化表单。正如我在上面的代码示例中所示，表单的这个实例需要在表单发布之前完成。

**编辑**

试试这个：

 `````
$captcha = new Zend_Form_Element_Captcha('captchaField',
    array('label' => "Please enter the 5  letters displayed below:",
        'required'=>true,
        'captcha' => array(
        'captcha' => 'image',
        'font'=> 'static/font/arial.ttf',
        'imgDir'=>'static/img/captcha',
        'imgUrl'=> 'static/img/captcha/',
        'wordLen' => 5,
        'fsize'=>20,
        'height'=>60,
        'width'=>200,
        'gcFreq'=>50,
        'expiration' => 300
    )
));

$this->addElement($captcha); 
````  `编辑后的这个新代码对我使用 Zend Framework 1.11.1 版有效

您使用的是哪个版本的 Zend Framework，您的验证码是如何显示在您的视图文件中的？

当 var 转储我们的输出时，对于验证码元素，您应该期待类似于下面的内容，其中“5g4ef”是您输入到验证码输入元素的数据：

`["captchaField"]=> array(2) { ["id"]=> string(32) "88bb26d62e9fa19b67937c35be4a8cc7" ["input"]=> string(4) "5g4ef" }````

# java - 解密加密文件内容？

> ID：11063255
> 
> 赞同：6
> 
> 时间：2012-06-16T12:04:59.870
> 
> 标签：java, cryptography, public-key-encryption, encryption

我在使用 RSA 公钥解密解密文件时遇到问题。我的流程是接收xml文件，加密内容，然后写回同一个文件。另一个函数解密内容。我的源代码是：

```
public void decryptFile(String fileName,PrivateKey privateKey) throws Exception {
    Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
    cipher.init(Cipher.DECRYPT_MODE, privateKey);
    FileInputStream fis = new FileInputStream(fileName);
    File file=new File("decryptedfile.xml");
    if(file.exists()) {
        file.delete();
    }
            FileOutputStream fos = new FileOutputStream("decryptedfile.xml");
    CipherInputStream cis = new CipherInputStream(fis, cipher);
    int i;
    byte[] block = new byte[32];
    //System.out.println("Read : "+cis.read(block));
    while ((i = cis.read(block)) != -1) {
        System.out.println(String.valueOf(i));
        fos.write(block, 0, i);
    }
    fos.close();
} 
```

我只是将加密文件的名称和相应的私钥值传递到函数中。然而，`cis.read(block)`第一次尝试返回 -1。谁能建议我如何解密加密文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T00:48:40.883

您的文件几乎可以肯定没有经过 RSA 加密。它可能在随机对称密钥下用 AES 加密，然后用 RSA 加密密钥。

您假设有人实际上仅使用 RSA 加密了整个文件。假设实现甚至允许您执行此操作（我已经看到在尝试此操作时会引发异常），那么做任何有用的事情都太慢了。

# macos - ImageCaptureService.app 是什么？

> ID：11063260
> 
> 赞同：0
> 
> 时间：2012-06-16T12:06:06.737
> 
> 标签：macos, cocoa, image-capture, evernote

`/System/Library/Services/ImageCaptureService.app`- 它是什么？

Evernote 使用它从扫描仪或相机导入图像。如何做到这一点？我找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:20:22.343

Image Capture Services 框架（Carbon.framework 的一部分）是一个高级框架，用于从扫描仪和数码相机中捕获图像数据。该框架的接口与设备无关，因此您可以使用它从连接到系统的任何设备收集数据。您可以获取设备列表，检索有关特定设备或图像的信息，并检索图像数据本身。此框架与图像捕获设备框架 (ICADevices.framework) 结合使用，以与成像硬件进行通信。有关如何使用图像捕获服务框架的信息，请参阅[图像捕获应用程序编程指南](https://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/ImageCaptureServicesProgrammingGuide/01Introduction/01Introduction.html)。

# gwt - 如何在 Maven 中使用 SuperDevMode

> ID：11063263
> 
> 赞同：4
> 
> 时间：2012-06-16T12:06:29.717
> 
> 标签：gwt, maven, gwt-maven-plugin

在阅读了很多关于 gwt 2.5 的 SuperDevMode 之后，我想自己尝试一下。我阅读了[https://vaadin.com/blog/-/blogs/vaadin-and-superdevmode](https://vaadin.com/blog/-/blogs/vaadin-and-superdevmode)和其他一些文章。据我了解，我必须运行 codeserver 类。我检查了 gwt-maven-plugin 存储库，但不太确定是否已经支持 gwt2.5。

有没有人设法让 SuperDevMode 与 maven 一起工作？

问候，阿恩

**编辑：**

感谢托马斯，我得到了它的工作！这是我的pom的摘录。

```
<resources>
    <resource>
      <directory>
    src/main/java
      </directory>
    </resource>
</resources>

    <plugin>
       <groupId>org.codehaus.mojo</groupId>
       <artifactId>exec-maven-plugin</artifactId>
       <version>1.2.1</version>
        <executions>
            <execution>
              <goals>
                <goal>java</goal>
              </goals>
            </execution>
        </executions>

      <configuration>                                     
         <mainClass>com.google.gwt.dev.codeserver.CodeServer</mainClass>
         <arguments>
                <argument>com.myapp.Application</argument>
         </arguments>
      </configuration>

   </plugin> 
```

现在我只需要运行目标： `exec:java`启动代码服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T10:38:32.073

gwt-maven-plugin 的 2.5.0-rc1 版本将通过[`run-codeserver`目标](https://gwt-maven-plugin.github.io/gwt-maven-plugin/run-codeserver-mojo.html)支持它。该版本目前正在上演。请测试并[投票](https://groups.google.com/d/topic/codehaus-mojo-gwt-maven-plugin-users/c0EQromeRgc/discussion)。

与此同时，您可以将它与 exec-maven-plugin 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:59:48.930

这个 src repo：[https](https://github.com/jbarop/gwt-maven-plugin/tree/gwt-2.5) ://github.com/jbarop/gwt-maven-plugin/tree/gwt-2.5看起来它支持 GWT 2.5，最后提交消息是：

> 添加了运行代码服务器的 mojo

（免责声明：我自己还没有尝试过）

# iphone - 如何在 UIImagePickerController 的编辑视图上设置自定义叠加视图？

> ID：11063270
> 
> 赞同：1
> 
> 时间：2012-06-16T12:07:23.263
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

全部

我已经使用委托创建 UIImagePickerController 并从 PhotoLibrary 中挑选图像。

```
imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
[self presentModalViewController:imagePicker animated:YES]; 
```

当应用程序到达 UIImagePickerController 的编辑视图时，我设置了一个叠加视图并为其创建了两个按钮。 **`Cancel and Choose`**

在取消按钮上单击

```
[imagePicker popToViewController:[currentViewController.viewControllers objectAtIndex:1] animated:YES]; 
```

这条鳕鱼很好用。。

但是`choose`按钮不起作用，如果我在这里设置代码，

```
[self imagePickerController:imagePicker didFinishPickingMediaWithInfo:[imagePicker mediaTypes]]; 
```

比它返回信息字典的 NULL 值。

这是在 Editing ImagePicker 上设置覆盖视图的任何其他方式吗？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:13:41.180

试试这个代码

```
CustomOverlayView *CustomOverlayView = [[CustomOverlayView alloc] initWithFrame:CGRectZero];

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        imagePickerController = [[UIImagePickerController alloc] init];
        imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;     
        imagePickerController.allowsEditing = NO;
        imagePickerController.delegate = self;
        imagePickerController.showsCameraControls = YES;
        [imagePickerController.view addSubview:CustomOverlayView];
        [self presentModalViewController:imagePickerController animated:YES];

    } 
```

# java - GWT CellTable 选择并单击 CheckBoxCell

> ID：11063273
> 
> 赞同：5
> 
> 时间：2012-06-16T12:07:36.687
> 
> 标签：java, gwt, gwt-2.2-celltable, gwt-2.2

我有一个 CellTable 与 SingleSelectionModel 一起工作，可以进行单选并将一些信息显示到详细信息面板中。此外，我在此 CellTable 中添加了 CheckBoxCell 列，它与另一个 MultipleSelectionModel 一起进行批量删除操作。

当我尝试单击 CheckBoxCell 列中的复选框时，GWT 选择行并在第二次单击复选框后更改复选框状态。所以我们应该点击两次，但我需要一键完成（更改复选框状态）。

我尝试了不同的方法来修复它：

*   将dependsOnSelection和handlesSelection参数改成CheckboxCell
*   更改 CellTable 中的 SelectionEventManager（DefaultSelectionEventManager.createCheckboxManager()、DefaultSelectionEventManager.createCustomManager）

但它不起作用。

我在 Internet 中发现了类似的问题，但它们都适用于一个 MultipleSelectionModel。这与我想要的不一样，因为有详细信息面板（所以我只能做一个选择）。

谁能帮我弄清楚如何解决它？

**UPD：** 我刚刚删除了 SingleSelectionModel 并重新设计了 UI 以使用 MultipleSelectionModel。这是GWT地狱..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:54:15.047

尝试切换您的选择模型：使用`MultiSelectionModel`作为`CellTable`的选择模型，以便复选框按预期工作（两者都`dependsOnSelection`设置`handlesSelection`为`true`），对于主细节功能，使用 a `CellPreviewEvent.Handler`（或`DefaultSelectionEventManager#createCustomManager`），and `RowStyles`and `getRowElement`+ `addStyleName`/ `removeStyleName`for渲染（`RowStyles`当`CellTable`渲染行时，然后`getRowElement`动态更新样式）。

# java - 转储 java.util.Map 的内容 - 未按预期工作

> ID：11063275
> 
> 赞同：0
> 
> 时间：2012-06-16T12:07:43.143
> 
> 标签：java, servlets, collections

我想根据@Greg Kopff[在这里发布的回复提出这个问题](https://stackoverflow.com/questions/11027157/recursively-dump-the-contents-of-an-aggregate-structure-collection-array-in-j)

基本上，我要做的是将 request.getParameterMap() 方法返回的 Map 内容转储到输出。

我得到以下奇怪的 Map 作为输出（我相信它的值是字符串或字符串数​​组的对象引用的地址）

```
    {提交=[Ljava.lang.String;@1fe4169, 颜色=[Ljava.lang.String;@178920a,  
         chek_games=[Ljava.lang.String;@bbfa5c, foo=[Ljava.lang.String;@131de9b}

```

我尝试了以下代码 -

```
    公共类 CoffeeSelect 扩展 HttpServlet {

    protected void doPost(HttpServletRequest req, HttpServletResponse resp) 抛出 ServletException, IOException {
        映射 requestParams = req.getParameterMap();

        resp.getWriter().println(requestParams);
        }

    }

```

以下是我的 HTML <form>

```
    <form action="SelectCofee.Do" method="post">
     <select id="coffe_color" name="color">
        <option value="green">绿色</option>
        <option value="red">红色</option>
        <option value="blue">蓝色</option>
     </选择>

     <br/><br/>
     <input type="checkbox" id="chek_games" name="chek_games" value="chess" />
     <input type="checkbox" id="chek_games" name="chek_games" value="badminton" />
     <input type="checkbox" id="chek_games" name="chek_games" value="cricket" />

     <input type="hidden" id="foo" name="foo" value="bar" />

     <input type="submit" name="submit" value="Submit" />
    </form>

```

如何尊重那些对象引用或者让我这样说；我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:12:51.733

表示法`[L`告诉它是 的字符串表示`String[]`。HTTP 允许你做类似的事情

[http://myserver.com/mypage?myparam=firstvalue&myparam=secondvalue](http://myserver.com/mypage?myparam=firstvalue&myparam=secondvalue) ....

（想想多选`<select>`）

为此，参数 Map 不是`Map<String, String>`但是`Map<String, String[]>`（我不知道实现是否真的使用泛型，它只是一个显式表示）。

因此，要转储参数，您也需要转储。

a）假设您不会为同一个参数获得多个值；循环获取参数名称并使用`request.getParameter`

b) 如果您接受多个值，则循环获取参数名称并序列化数组。

# c# - 在 C# 中为 JPEG 添加注释

> ID：11063278
> 
> 赞同：1
> 
> 时间：2012-06-16T12:07:52.163
> 
> 标签：c#, header, comments, jpeg, exif

对不起我的英语不好。

如何将 Jpeg 文件的注释添加到 COM 标记部分（0xFFFE）？不是 Exif 评论。

我尝试`Image.SetPropertyItem()`但它只保存字符串的第一个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:49:49.380

您可能必须使用一些元数据，例如，查看这两个站点[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapmetadata.author.aspx)和[dreamincode](http://www.dreamincode.net/code/snippet3144.htm)。

# python - 龙卷风 Web 应用程序中的 Python xmpp jabber 客户端

> ID：11063279
> 
> 赞同：2
> 
> 时间：2012-06-16T12:08:04.470
> 
> 标签：python, xmpp, tornado

我是桌面程序员，但我想学习一些有关 Web 服务的知识。我决定使用python。我正在尝试了解 Web 应用程序的工作原理。我知道如何创建基本的龙卷风网站（请求 - 响应）和工作的 jabber 客户端，但我不知道如何混合它们。我可以在 Web 服务中使用任何 python 组件吗？它们是否必须具有特定的结构（同步或异步）？因为我被困在循环处理程序中：

如果 tornado 通过命令启动网络服务器：

```
app = Application()
app.listen(options.port)
tornado.ioloop.IOLoop.instance().start() 
```

...那么我如何（在哪里）启动 xmpp 循环？

```
client.connect()
client.run() 
```

我认为龙卷风监听循环应该处理 xmpp 监听，但不知道如何

问候。

**编辑：**我忘了。我正在使用 pyxmpp2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:31:20.220

我相信你想要完成的事情在 python 的一个线程中是不可行的，因为两者都试图同时收听，这在一个线程中是不可能的。我是否可以建议查看有关线程的[本](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)教程。

另一个问题是您是在尝试制作基于 Web 的 xmpp 还是仅在同一脚本中运行 xmpp 和 html 服务器。如果您想尝试前者，我建议您使用[zeromq](http://www.zeromq.org/)或[队列研究线程间通信](http://docs.python.org/library/queue.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T07:14:41.127

也许 WebSocketHandler 和 Thread 会帮助你。

演示

```
类 BotThread(threading.Thread):

    def __init__(self,my_jid,settings,on_message):
        超级（BotThread，self）.__init__（）
        #EchoBot 是 pyxmpp2 的客户端
        self.bot = EchoBot(my_jid, settings,on_message= on_message)

    定义运行（自我）：
        self.bot.run()

类 ChatSocketHandler（tornado.websocket.WebSocketHandler）：
    定义打开（自我）：
        #init xmpp 客户端
        我的_jid =
        设置 =
        bot =BotThread(my_jid, settings,on_message=self.on_message)
        bot.start()

```

# android - 运行时 ScrollView 中的多个 TextView

> ID：11063280
> 
> 赞同：1
> 
> 时间：2012-06-16T12:08:36.973
> 
> 标签：android, android-layout

我试图在运行时将一堆 TextViews 添加到滚动视图中，但我得到了`The specified child already has a parent. You must call removeView on the child's parent first`.

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView> 
```

**测试应用**

```
@Override
public void onCreate(Bundle savedInstanceState) {

    TextView[] data;

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    View layout = findViewById(R.id.layout);

            .......................................

    data = new TextView[10];

    for (int i = 0; i < 10; i++) {

        data[i] = new TextView(this);
        data[i].setText("data = " + i);

        ((ViewGroup) layout).addView(data[i]);
    }

    setContentView(layout);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:11:54.290

我认为问题在于布局变量。

现在，当您使用此 setContentView(layout); 所以这尝试在不同的父级中添加布局..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:12:04.073

你不能像这样`setContentView()`在一个单曲中使用两次。`Activity`那就是问题所在。[在这里](https://stackoverflow.com/a/6371421/603744)
看这个答案：

> 一个视图只能有一个父视图。您正在添加的视图（我猜是重复使用）已经是另一个视图层次结构的一部分。如果您真的想重用它（我建议您可能不这样做），那么您必须将它与现有视图层次结构中的父级分离。

# ios - IOS - 按钮的控制拖动不起作用

> ID：11063287
> 
> 赞同：0
> 
> 时间：2012-06-16T12:10:22.950
> 
> 标签：ios

我有一些我正在尝试创建的按钮，当我尝试将控件拖动到控制器中时，它没有向我显示创建配置该按钮的选项。知道有什么问题吗？我只是在关注我的第一个教程，这可能是为新手准备的。

附上我的屏幕截图。![在此处输入图像描述](../Images/ce057bd848a222ba33bf1f999a1c5bf3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:13:05.377

您似乎在助手编辑器中打开了不正确的 .h 文件，您需要为您的 nib 中的正确视图控制器打开正确的接口文件

从我看到的是LearningCenter不应该是打开的界面，

您需要将辅助视图控制器更改为正确的查看屏幕截图

![在此处输入图像描述](../Images/33a4bce1a4d74d7bdc9ab44e9c2e905f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:23:34.307

只需从该选择的最后一个选项中右键单击您的按钮（新引用插座集合。从该地图中您的 .h 文件。此时将出现一个弹出窗口。只需输入您的按钮名称。

# python - 如何在 AWK 或 Python 中从多个文本文件中打印第二行和最后三行？

> ID：11063292
> 
> 赞同：0
> 
> 时间：2012-06-16T12:11:38.637
> 
> 标签：python, awk

使用 awk，我很难尝试从多个文本文件中打印第二行和最后三行。另外，我想将输出定向到文本文件。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T15:13:37.613

这样做的好处是整个文件不保存在内存中。

```
awk 'NR == 2 {print}; {line1 = line2; line2 = line3; line3 = $0} END {print line1; print line2; print line3}' files* 
```

**编辑：**

下面使用`gawk`手册中的一些代码，这些代码可移植到其他版本的 AWK。它提供每个文件的处理。请注意，`gawk`版本 4 提供`BEGINFILE`和`ENDFILE`规则。

```
#!/usr/bin/awk -f
function beginfile (file) {
    line1 = line2 = line3 = ""
}

function endfile (file) {
    print line1; print line2; print line3
}

FILENAME != _oldfilename \
     {
         if (_oldfilename != "")
             endfile(_oldfilename)
         _oldfilename = FILENAME
         beginfile(FILENAME)
     }

     END   { endfile(FILENAME) }

FNR == 2 {
    print
}

{
    line1 = line2; line2 = line3; line3 = $0
} 
```

将其另存为文件，也许称其为“fileparts”。然后做：

```
chmod u+x fileparts 
```

然后你可以这样做：

```
./fileparts file1 file2 anotherfile somemorefiles*.txt 
```

它将在一组输出中输出每个文件的第二行和最后三行。

或者您可以将其修改为输出到单独的文件，或者您可以使用 shell 循环输出到单独的文件：

```
for file in file1 file2 anotherfile somemorefiles*.txt
do
    ./fileparts "$file" > "$file.out"
done 
```

您可以随意命名输出文件。它们将是文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:35:35.013

为避免一次将整个文件读入内存，请使用 maxlen 为 3 的 deque 创建滚动缓冲区以捕获最后 3 行：

```
from collections import deque
def get2ndAndLast3LinesFrom(filename):
    with open(filename) as infile:
        # advance past first line
        next(infile)
        # capture second line
        second = next(infile)
        # iterate over the rest of the file a line at a time, saving the final 3
        last3 = deque(maxlen=3)
        last3.extend(infile)        
        return second, list(last3) 
```

您可以将这种方法推广到可以采用任何可迭代的函数：

```
def lastN(n, seq):
    buf = deque(maxlen=n)
    buf.extend(seq)
    return list(buf) 
```

然后您可以使用部分创建不同长度的“last-n”函数：

```
from functools import partial
last3 = partial(lastN, 3)

print last3(xrange(100000000)) # or just use range in Py3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T19:59:22.413

如果你不喜欢 Python 或 AWK 的实现，你可以使用你的 shell 和标准的 head/tail 实用程序做一些非常简单的事情。

```
for file in "$@"; do
    head -n2 "$file" | tail -n1
    tail -n3 "$file"
done 
```

您也可以将其包装在一个函数中或将其放在脚本中，然后如果您真的需要，然后在 Python 或 AWK 中使用[subprocess.check_output()](http://docs.python.org/library/subprocess.html#module-subprocess)调用它，但在这种情况下，使用本机方法可能更容易，而不是产生一个外部进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T12:14:51.440

这会起作用，但它会将整个文件加载到内存中，如果您的文件非常大，这可能并不理想。

```
text = filename.readlines()

print text[2] # print second line

for i in range(1,4): # print last three lines
    print text[-i] 
```

[这里](https://stackoverflow.com/questions/620367/python-how-to-jump-to-a-particular-line-in-a-huge-text-file)还讨论了一些不错的替代方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T14:28:51.267

我不知道 awk 但如果您使用的是 Python，我想您将需要这样的东西

```
inf = open('test1.txt','rU')
lines = inf.readlines()
outf = open('Spreadsheet.ods','w')
outf.write(str(lines[1]))
outf.write(str(lines[-3]))
outf.write(str(lines[-2]))
outf.write(str(lines[-1]))
outf.close()
inf.close() 
```

# android - 如何取消 ksoap2 中的肥皂电话？

> ID：11063297
> 
> 赞同：3
> 
> 时间：2012-06-16T12:12:18.800
> 
> 标签：android, ksoap2, httptransportse

我正在使用此代码通过 ksoap2 调用 webservice 方法：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;

            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(url,
                    TimeOutInSeconds * 1000);

            try {
                androidHttpTransport.call(soapAction, envelope);
            } catch (Exception e) {

            }

            SoapObject so = (SoapObject) envelope.getResponse(); 
```

在某些情况下，webservice 不会立即响应我的请求，并且应用程序正在排队等待`androidHttpTransport.call(soapAction, envelope);`并且用户想要取消请求。如何让用户取消该`call`方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:18:58.263

我希望您从后台线程而不是 UI/主线程调用此行。事实上，在 HC+ 上，由于 StrictMode，默认情况下应该会崩溃。

取消正在进行的网络呼叫可能会很棘手。您可能必须保留对连接本身的引用并`shutdown()`从主线程调用方法。但不能保证会立即调用取消。这将取决于连接本身的实现。

我假设您使用的是 kSOAP，我不确定它是否提供了一种`cancel()`机制。

另一种方法是等待第一次调用完成，然后再进行一次网络调用以撤消服务器上的操作。这将确保您的状态是同步的。

# sql - 两列中的 Oracle SQL 通用条目

> ID：11063301
> 
> 赞同：2
> 
> 时间：2012-06-16T12:12:55.913
> 
> 标签：sql, oracle

我有一个表，其中包含两列中的常见条目。

例如：

```
Column1    Column2
Entry1  || NULL  
Entry2  || Entry1
Entry3  || Entry1
Entry4  || Entry4
Entry5  || NULL 
```

我想找出第 1 列的条目出现在第 2 列中的次数。

所以结果会是这样的：

```
Column1    Count
Entry1  || 2
Entry2  || 0
Entry3  || 0
Entry4  || 1
Entry5  || 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:35:23.557

```
WITH counts AS (
    SELECT column2, COUNT(*) AS the_count
      FROM x
      GROUP BY column2
)
SELECT x.column1, COALESCE(c.the_count, 0)
  FROM x LEFT OUTER JOIN counts c ON (x.column1 = c.column2)
  ORDER BY 1 
```

# .net - 检查文件是否打开

> ID：11063306
> 
> 赞同：-2
> 
> 时间：2012-06-16T12:13:39.427
> 
> 标签：.net, vb.net, vb.net-2010

对于我的生活，我看不出为什么我的编码不起作用。如果文件在记事本中打开，以下编码确实会给我一条消息，但如果文件在 word 或 excel 中打开，则不会？

```
 Dim apps = 0
    Dim Process() As Process = System.Diagnostics.Process.GetProcesses
    For Each p As Process In Process
        If p.MainWindowTitle.ToString.Contains("test") Then
            If p.ProcessName = "notepad" Then
                MsgBox("test file is open in notepad")
                apps += 1
            ElseIf p.ProcessName = "winword" Then
                MsgBox("test file is open in word")
                apps += 1
            ElseIf p.ProcessName = "excel" Then
                MsgBox("test file is open in excel")
                apps += 1
            End If
        End If
    Next

    If apps = 0 Then
        'run my code
    End If 
```

它似乎没有检查 word 和 excel，但以下两个编码片段都有效？

```
 Dim Process2() As Process = System.Diagnostics.Process.GetProcessesByName("winword")
    For Each p As Process In Process2
        If p.MainWindowTitle.Contains("test") Then
            MsgBox("test file is open in word")
        End If
    Next 
```

和

```
 Dim Process2() As Process = System.Diagnostics.Process.GetProcessesByName("excel")
    For Each p As Process In Process2
        If p.MainWindowTitle.Contains("test") Then
            MsgBox("test file is open in excel")
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:44:51.570

因为 p.ProcessName 是“WINWORD”->
您测试“winword”的大写，->小写。

将您的测试更改为

```
if(String.Compare(p.ProcessName, "winword", true))
   ..... 
```

无视案件

# java - 将几个 Eclipse 项目合二为一？

> ID：11063309
> 
> 赞同：0
> 
> 时间：2012-06-16T12:13:46.433
> 
> 标签：java, eclipse

我有一个项目的几个模块，我已经将每个模块作为**Eclipse**中的一个项目作为一个单独的项目。现在我想将这些项目合并到一个主项目中。有可能吗？提前谢谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:21:19.223

是的。您可以轻松地进行设置，以便一个项目使用其他项目。只需右键单击包资源管理器中的项目，然后单击构建路径，然后配置构建路径，然后添加项目。瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:22:47.790

右键单击项目。转到构建路径->配置构建路径->项目。在这里，您可以在构建路径上添加任何项目（已经在 eclipse 中）。

# c - 我想在我的winapi C程序中画图，有什么控件吗？

> ID：11063310
> 
> 赞同：4
> 
> 时间：2012-06-16T12:13:46.653
> 
> 标签：c, windows, winapi, controls

在winapi32控件中是否有任何控件可用于绘制这样的图表？

你不知道我怎么画一个吗？

![在此处输入图像描述](../Images/c29c117ed965c8ae9dfde1451c5de5ac.png)

（像这样！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T12:49:37.230

您会发现 Windows API 的第三方图表控件 -
[http://www.gigasoft.com/graphinglibrary.html](http://www.gigasoft.com/graphinglibrary.html)
[http://www.codeproject.com/Articles/14330/Custom-Control-Graph-and-Process-Bar](http://www.codeproject.com/Articles/14330/Custom-Control-Graph-and-Process-Bar)

或者您可以使用 GDI 函数*LineTo*和*MoveTo*自己绘制折线图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T13:30:46.277

您绝对应该在“[桌面开发 -> 杂项”](http://www.codeproject.com/kb/miscctrl/)部分的[CodeProject](http://www.codeproject.com/)中搜索任何类型的此类库。但就我而言，我会使用“ [A 2D data可视化类](http://www.codeproject.com/Articles/425/A-2D-data-visualisation-class)”，它提供了一组非常好的特性（来自文章）：

> *   正常和散点图模式
> *   自动缩放
> *   缩放
> *   适合宽度、高度和页面
> *   鼠标坐标追踪
> *   能够以交互方式添加和显示高达每秒 15000 个点（取决于计算机的速度）
> *   平移支持 - 只需按住 shift 键，同时按住左键移动鼠标 图形可以在任何设备上下文上绘制，包括打印机的

另一种选择是使用*现成的* **MFC**或**ActiveX**组件。第一个很好的例子是“ [Plot Graphic Library](http://www.codeproject.com/Articles/1546/Plot-Graphic-Library) ”，第二个例子是“ [GDI+ Plot ActiveX Control](http://www.codeproject.com/Articles/38272/GDI-Plot-ActiveX-Control) ”。正如您已经提到的，所有这些库都基于 GDI Windows 工具。顺便说一句，您可以自己绘制这个简单的图形，因为 Windows 中的 GDI（和 GDI+）功能非常强大。

另请参阅“ [SoftIntegration 图形库 (SIGL)](http://www.softintegration.com/products/silib/graphlib/) ”。该库包含许多不同的图和曲面。

但是，同样，这只是关于 GDI。**另一种变体**是使用 DirectX 或 OpenGL。对于后者，您绝对应该尝试**[SDL](http://www.libsdl.org/)**（简单 DirectMedia 层），它：

> 是一个跨平台的多媒体库，旨在通过 OpenGL 和 2D 视频帧缓冲区提供对音频、键盘、鼠标、操纵杆、3D 硬件的低级访问。如您所见，它是一个跨平台库。

熟悉的好 SO 问题是：

*   "[在 C++ 中绘制图形](https://stackoverflow.com/questions/4996743/plotting-graphs-in-c)"
*   “[图形绘制 C++ 库？](https://stackoverflow.com/questions/492893/graph-drawing-c-library) ”
*   “[是否有任何适用于 C++ 的‘开箱即用’2D/3D 绘图库？](https://stackoverflow.com/questions/296199/is-there-any-out-of-the-box-2d-3d-plotting-library-for-c) ”

**更新：**

我忘了提到“ [ROOT](http://root.cern.ch/) ”——它是我见过的最强大的图形库。实际上，它不是库，而是“数据分析框架”。图书馆的创建者是来自 CERN 的人。使用这个库，您可以构建几乎所有类型的绘图、曲面和图形。它是跨平台的，用 C++ 编写。ROOT 具有：控制台版本（您可以在其中使用 C++ 编写命令，-ROOT 有自己的 C++ 编译器）和大量库来链接您的项目。您可以在 MSVS 2008 和 MSVS 2010 的帮助下构建 MFC 应用程序。

# joomla - 我在哪里找到 Joomla 1.0

> ID：11063312
> 
> 赞同：1
> 
> 时间：2012-06-16T12:14:11.660
> 
> 标签：joomla

我的朋友网站在 Joomla-1.0 上运行，现在他想迁移到 Joomla-2.5.4。我找到了许多有用的链接来完成这项工作，但在现场直播之前，我想在我的本地主机上进行演示，我搜索了 Joomla-1.0 ( **EXACTLY 1.0** ) 以供下载，但没有找到。

有人知道我在哪里可以准确下载**Joomla-1.0**吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:45:18.057

只需备份他的在线网站并将其安装在本地主机上。我不知道在哪里可以找到 Joomla 1.0，但是使用当前站点的副本会好得多。

找到[Joomla 1.0.15](http://joomlacode.org/gf/project/joomla/frs/?action=FrsReleaseView&release_id=6828)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:36:50.650

我真的不明白你为什么要使用 1.0，我的意思是社区停止了支持，你会遇到（很多）错误，因为 Joomla 1.0 是基于不同版本的 PHP ......但如果你坚持你必须看看地下（非官方）网站......

检查这个： http: [//mirror.phil-taylor.com](http://mirror.phil-taylor.com)

# sql-server - SQL Server：在 UTC 和本地时间之间精确转换

> ID：11063313
> 
> 赞同：5
> 
> 时间：2012-06-16T12:14:21.987
> 
> 标签：sql-server, database, tsql, datetime, utc

我在 SQL Server 2008 R2 数据库中有几列，我需要将它们从本地时间（sql server 所在的时区）转换为 UTC。

我在 StackOverflow 上看到了很多类似的问题，但答案都无法在夏令时正常工作，它们只考虑当前的差异并偏移日期。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T12:18:33.687

我根本找不到任何方法单独使用 T-SQL。我使用 SQL CLR 解决了它：

```
public static class DateTimeFunctions
{
    [SqlFunction(IsDeterministic = true, IsPrecise = true)]
    public static DateTime? ToLocalTime(DateTime? dateTime)
    {
        if (dateTime == null) return null;
        return dateTime.Value.ToLocalTime();
    }

    [SqlFunction(IsDeterministic = true, IsPrecise = true)]
    public static DateTime? ToUniversalTime(DateTime? dateTime)
    {
        if (dateTime == null) return null;
        return dateTime.Value.ToUniversalTime();
    }
} 
```

以及以下注册脚本：

```
CREATE FUNCTION ToLocalTime(@dateTime DATETIME2) RETURNS DATETIME2 AS EXTERNAL NAME AssemblyName.[AssemblyName.DateTimeFunctions].ToLocalTime; 
GO
CREATE FUNCTION ToUniversalTime(@dateTime DATETIME2) RETURNS DATETIME2 AS EXTERNAL NAME AssemblyName.[AssemblyName.DateTimeFunctions].ToUniversalTime; 
```

被迫付出这样的努力来转换为UTC时间和从UTC时间转换是一种耻辱。

请注意，这些函数将*本地时间*解释为服务器本地时间。建议将客户端和服务器设置为相同的时区以避免任何混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:30:12.677

```
 DECLARE @convertedUTC datetime, @convertedLocal datetime
    SELECT DATEADD(
                    HOUR,                                    -- Add a number of hours equal to
                    DateDiff(HOUR, GETDATE(), GETUTCDATE()), -- the difference of UTC-MyTime
                    GetDate()                                -- to MyTime
                    )

    SELECT @convertedUTC = DATEADD(HOUR,DateDiff(HOUR, GETDATE(), GETUTCDATE()),GetDate()) --Assign the above to a var

    SELECT DATEADD(
                    HOUR,                                    -- Add a number of hours equal to
                    DateDiff(HOUR, GETUTCDATE(),GETDATE()), -- the difference of MyTime-UTC
                    @convertedUTC                           -- to MyTime
                    )

    SELECT @convertedLocal = DATEADD(HOUR,DateDiff(HOUR, GETUTCDATE(),GETDATE()),GetDate()) --Assign the above to a var

    /* Do our converted dates match the real dates? */
    DECLARE @realUTC datetime = (SELECT GETUTCDATE())
    DECLARE @realLocal datetime = (SELECT GetDate())

    SELECT 'REAL:', @realUTC AS 'UTC', @realLocal AS 'Local'
    UNION
    SELECT 'CONVERTED:', @convertedUTC AS 'UTC', @convertedLocal AS 'Local' 
```

# api - 用于可分发 Web 应用程序的 OAuth 2.0

> ID：11063314
> 
> 赞同：1
> 
> 时间：2012-06-16T12:14:34.877
> 
> 标签：api, oauth, web

我试图弄清楚如何使用 OAuth 2.0 从我的网络应用程序访问 Google API。问题是，该协议要求开发人员注册**redirect_uri**（接收访问令牌的页面的URL）。但是我的应用程序可以分发给许多客户，并且可以托管在无数的服务器上。没有办法事先知道**redirect_uri 。**

谷歌为已安装的应用程序提供了另一种选择，但我也不能使用这个变体。身份验证服务器在窗口标题中返回访问代码，并且无法从我们页面的 javascript 访问此信息（JS 无法访问使用 window.open() 打开的窗口的内容；如果该内容来自不同的服务器）。

总结：

1.  无法对 Web 应用程序使用方法，因为我不知道我们的应用程序将来会在哪里运行的所有 URL。
2.  无法对已安装的应用程序使用方法，因为无法从我们的 JavaScript 代码访问窗口标题。

有什么建议，如何从运行在许多服务器上的可**分发Web 应用程序中使用 Google 的 OAuth 2.0？**谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:53:59.890

您确定无法访问窗口标题吗？如果您的应用程序正在打开窗口，它应该能够访问它。应该可以像在移动应用程序中那样做。

如果所有尝试都失败，您可以设置一个代理服务器（具有已知的重定向 URI）并将 Google 令牌分发给您的所有客户端。或者更好的是，每个应用程序都可以有自己的代理服务器——下载它的服务器。但是，如果每个 OAuth 客户端只能有一个重定向 URI，则每个应用程序都必须是一个单独的 OAuth 客户端。

# iphone - 如何更改所选标签栏图标的笔划

> ID：11063319
> 
> 赞同：0
> 
> 时间：2012-06-16T12:15:01.070
> 
> 标签：iphone, objective-c, uitabbarcontroller, uitabbar, stroke

我试图弄清楚如何更改所选标签栏图标的笔划。它通常是青色，就像所选图标的色调。我已经改变了所选图标的色调和指示图像，如下所示：`self.tabBarController.tabBar.selectedImageTintColor = [UIColor grayColor]; self.tabBarController.tabBar.selectionIndicatorImage = [UIImage imageNamed:@"selectedTab.png"];`

但现在我仍然在图标周围有这个青色笔触

[图片](http://fl-webdesign.org/image.jpg)

有谁知道代码，因为我找不到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:47:59.770

我以前也注意到了这一点。我最终只是手动设置了选定和未选定的图像，而不是让它为我渲染颜色。

然后，您可以使用 Photoshop 或您最喜欢的图像编辑软件为每个选项卡设计两个图像。选择选项卡时，一个图像将是选项卡图标，而未选择选项卡时，另一图像将用于选项卡。您将需要自己在 Photoshop 中应用淡色。

将所有图像导入 Xcode 后，您可以在所需的 UITabBarItem 上设置它们。我通常在我的视图控制器初始化函数中设置这些。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"my-selected-icon"] withFinishedUnselectedImage:[UIImage imageNamed:@"my-deselected-icon"]];
    }
    return self;
} 
```

您必须为标签栏上的每个视图控制器执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:55:53.253

试试这段代码，把它放在 viewDidLoad 中：

```
for (UITabBarItem * barItem in theTabBar.items) {
    UIImage * image = barItem.image;
    [barItem setFinishedSelectedImage:image withFinishedUnselectedImage:image];
} 
```

# ajax - WebWorks AJAX 跨域请求

> ID：11063321
> 
> 赞同：3
> 
> 时间：2012-06-16T12:15:11.530
> 
> 标签：ajax, blackberry, xmlhttprequest, blackberry-playbook, blackberry-webworks

我正在使用 webworks sdk 开发一个剧本应用程序。我正在尝试通过发送和接收数据来发出 http 请求（方法：发布）。我可以从服务器获取响应，但是服务器无法获取 $POST 数据，当我尝试显示 $_POST['apiKey'] 时，什么也没有，我检查了我的代码 100 次，检查了我的 config.xml 中的 uri ，找不到错误。

TL;DR：无法发送但可以接收数据。

我的 PHP 服务器代码：

```
echo "passed key is: ".$_POST["apiKey"]; // Nothing apears
echo "<br>";

if(md5($_SESSION['private_key'])===$_POST["apiKey"]){

}

else{
    echo "Invalid API Key"; // Always getting this response on client app
    exit();
}
?> 
```

我的 JS 客户端代码：

```
function httpRequest(){
    var key="a984a4474cff54d8468a296edf3af65b";
document.getElementById("status").innerHTML="Reaching server...";
//////////////////////////////////////
var xdr = getXDomainRequest();
xdr.onload = function() {
    document.getElementById("status").innerHTML=xdr.responseText;
}

xdr.open("POST", "http://mydomain/index.php");
xdr.send("apiKey="+key); 
```

}

* * *

已解决：使用 POST 方法时，您应该定义请求标头：

```
xdr.open("POST", "http://mydomain.com/index.php");
xdr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); // with this line
xdr.send("apiKey="+key); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:25:23.983

已解决：使用 POST 方法时，您应该定义请求标头：

```
xdr.open("POST", "http://mydomain.com/index.php");
xdr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'); // with this line
xdr.send("apiKey="+key); 
```

# node.js - Node.js 爬虫错误

> ID：11063323
> 
> 赞同：-1
> 
> 时间：2012-06-16T12:15:16.570
> 
> 标签：node.js, web-crawler, npm

我在 Mac OSX 上，我一直在尝试将 Node.js 与 Crawler 一起使用。现在我刚刚按照说明安装了以下步骤：

*   `git clone git://github.com/ry/node.git`
*   `cd node`
*   `./configure`
*   `make`
*   `sudo make install`
*   `curl http://npmjs.org/install.sh | sh`
*   `npm install crawler`

一旦我安装了最后一个（Crawler），当我`test/simple.js`在其示例中测试运行时，我会收到以下错误：

```
The "sys" module is now called "util". It should have a similar interface.
http://jamendo.com/
http://tedxparis.com

/crawler/node_modules/crawler/lib/crawler.js:74
                        response.body = body;
                                      ^
TypeError: Cannot set property 'body' of undefined
    at Object.callback (/crawler/node_modules/crawler/lib/crawler.js:74:39)
    at Request._callback (/crawler/node_modules/crawler/lib/crawler.js:70:43)
    at /crawler/node_modules/crawler/node_modules/request/main.js:119:22
    at Request.<anonymous> (native)
    at Request.emit (events.js:67:17)
    at Object._onTimeout (/crawler/node_modules/crawler/node_modules/request/main.js:532:12)
    at Timer.ontimeout (timers.js:84:39) 
```

这意味着`Crawler`还没有工作。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:27:12.957

你有几个选择：

*   尝试更新版本的 Crawler
*   使用旧版本的 Node
*   使用不同的模块**（推荐，因为 Crawler 已经过时了）**
*   自己修复 Crawler（并提交你的补丁！但似乎没有人再维护这个项目了）

如果这只是一次性错误，您可以将整个事情包装在 try/catch 中并根据需要进行处理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T10:31:39.630

您可能也有兴趣尝试我的 Node Crawler ( [https://github.com/ecdeveloper/node-web-crawler](https://github.com/ecdeveloper/node-web-crawler) )。它不是一个模块，而是一个独立的网络应用程序。它使用 Mongo、Express、Socket.io、Twitter 引导程序。

# cakephp - Cakephp：我如何过滤列表结果不重复

> ID：11063324
> 
> 赞同：1
> 
> 时间：2012-06-16T12:15:17.740
> 
> 标签：cakephp

嗨，伙计们，请我想知道如何从列表中过滤我的结果，以免它们重复相同的结果。我不希望重复同名的项目。我的列表如下。

```
$list[]=$this->ProgrammeChoice->Programme->ProgrammeRequirementsSubject->
find('list',array('fields'=> array('programme_code','programme_name'),
'conditions'=>array('subject_code'=>$s_code,'compulsory'=>'true'))); 
```

它的发现，但重复program_code和program_name。我不想要重复，请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:42:39.660

通过查询添加分组。尝试这个

```
$list[]=$this->ProgrammeChoice->Programme->ProgrammeRequirementsSubject->
find('list',array('fields'=> array('programme_code','programme_name'),
'conditions'=>array('subject_code'=>$s_code,'compulsory'=>'true')
'group' =>array('programme_code'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:28:28.210

SQLs DISTINCT 是你想要的。[http://cakebaker.42dh.com/2007/07/25/select-distinct-with-cakephp/](http://cakebaker.42dh.com/2007/07/25/select-distinct-with-cakephp/)

将“DISTINCT ProgrammeRequirementsSubject.subject_code”添加到查询选项的字段列表中。

# html - 在 div 中水平对齐 HTML 元素

> ID：11063325
> 
> 赞同：36
> 
> 时间：2012-06-16T12:15:23.923
> 
> 标签：html, css

我有三个 HTML 对象，想在左侧排列上一个按钮，在右侧排列下一个按钮，并在容器 div 的中间排列。

```
<PREVIOUS> |SPAN| <NEXT> 
```

```
 #btnPrevious
    {
        float:left;
    }
    #spanStage
    {
        font-weight:bold;
        vertical-align:middle;    
    }
    #btnNext
    {
        float:right;
    }
```

```
 <div>
        <input type="button" value="Previous" id="btnPrevious"/>
        <span id="spanStage">Stage 5</span>
        <input type="button" value="Next" id="btnNext"/>
    </div>
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2017-12-08T02:08:15.337

"display:flex" 样式是使这些元素在同一行中的好方法。不管 div 中有什么样的元素。特别是如果输入类是表单控制，其他解决方案，如引导程序，内联块将无法正常工作。

例子：

```
<div style="display:flex; flex-direction: row; justify-content: center; align-items: center">
     <input type="button" value="Previous" id="btnPrevious"/>
     <span id="spanStage">Stage 5</span>
     <input type="button" value="Next" id="btnNext"/>
</div> 
```

有关 flexbox 的更多详细信息：[https ://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

弹性方向：行，列

justify-content: flex-end, center, space-between, space-around

对齐项目：拉伸，flex-start，flex-end，center

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-16T12:20:10.080

只需添加`text-align: center`到您的包装器以设置所有非浮动/非定位子项的水平对齐方式：

```
div{
    text-align:center;
} 
```

`<span>`默认情况下是内联元素。因此，您要么必须使用`display:block`它们并适当地设置它们的样式，要么只需稍微调整父样式。由于使用这个简单的解决方案，除了 the`<span>`和s之外没有其他孩子。`<button>`

请注意，它`text-align:<value>`是从父级继承的，因此如果您想在包装器中包含其他内容，您应该检查是否`text-align:center`适合您。否则`text-align:<value>`在特定元素中使用，其中`value`is `left`、或。`right``center``justify`

[**JSFiddle 演示**](http://jsfiddle.net/BJxKM/1/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-16T12:18:54.547

将类添加`line`到您想要在一行中的所有子元素中，**瞧**！他们**听从你**的命令，排成一列。

```
.line {
    width:33%;
    float:left;
}
```

```
<div>
    <input type="button" class="line" value="Previous" id="btnPrevious"/>
    <span id="spanStage" class="line">Stage 5</span>
    <input type="button" class="line" value="Next" id="btnNext"/>
</div>
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-22T04:44:48.937

尝试使用`display:flex`.

```
.header {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
}
```

```
<div class="header">
    <input type="button" value="Previous" id="btnPrevious"/>
    <span id="spanStage">Stage 5</span>
    <input type="button" value="Next" id="btnNext"/>
</div>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-30T15:03:50.423

只需将其添加到您的 CSS 中。

```
#btnPrevious,#spanStage,#btnNext {
      width:33%;
       display:inline-block;
     } 
```

# eclipse - eclipse 新项目 hg 推送证书未验证

> ID：11063326
> 
> 赞同：1
> 
> 时间：2012-06-16T12:15:28.887
> 
> 标签：eclipse, mercurial

我正在尝试将更改从 eclipse 中新创建的项目推送到 bitbucket 中的存储库。我想我做了一些我不应该做的事情，因为我无法从新项目中推送任何更改。

这就是我所做的。

1.  我在 bitbucket 中创建了一个存储库。
2.  根据 bitbucket turorial，我已经在本地机器上安装了 TortoiseHg。
3.  之后，我已经提交并推送了我的 Eclipse 项目中的更改。到目前为止一切都很好。
4.  然后我创建了我的 eclipse 项目的副本，没有在 hg 或 bitbucket 中做任何事情。
5.  现在我尝试将新项目中的更改推送到与以前相同的存储库，我收到一条警告说“带有指纹的证书.....未验证。检查 hostfingerprints 或 web.cacerts 配置设置）。再往下说：hg -y push --new-branch https:// *** @bitbucket.org/myusername/myrepository，错误代码：-1

我应该创建一个分支吗？如果是这样，我现在该如何解决？我很感激任何帮助。

编辑：我出错的原因是我更改了我的 bitbucket 密码... /Agneta

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:29:34.443

也许您实际上并没有推送到您认为的存储库。在您的原件和副本中运行此命令：

```
 hg showconfig paths 
```

它们之间的路径应该相同。如果没有，您需要弄清楚复制时出了什么问题。我推荐一个新的克隆。

否则，可能 Eclipse 使用的 Mercurial 版本与您不同。

# sparql - 使用 SPARQL 在 DBpedia 中查询某个点周围的 POI

> ID：11063327
> 
> 赞同：-1
> 
> 时间：2012-06-16T12:15:36.200
> 
> 标签：sparql, dbpedia

我尝试从特殊的经度和纬度获取所有 POI。

你能给我一个提示以获得更好的结果吗？我现在在我的结果集中得到了`:Germany`和之类的主题。`:M-Bahn`

这是我的java代码：

```
public class DBPedia_SparqSql {

  /**
   * @param args
   */
  public static void main(String[] args) {
    // TODO Auto-generated method stub
    float YOUR_LONG = 13.380834f;
    float YOUR_LAT = 52.516388f;
    float radius = 0.01f;
    String sparqlQueryString1= "PREFIX owl: <http://www.w3.org/2002/07/owl#> "+
    "PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> "+
    "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> "+
    "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> "+
    "PREFIX foaf: <http://xmlns.com/foaf/0.1/> "+
    "PREFIX dc: <http://purl.org/dc/elements/1.1/> "+
    "PREFIX : <http://dbpedia.org/resource/> "+
    "PREFIX dbpedia2: <http://dbpedia.org/property/> "+
    "PREFIX dbpedia: <http://dbpedia.org/> "+
    "PREFIX skos: <http://www.w3.org/2004/02/skos/core#> "+
    "PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> "+
    "PREFIX onto: <http://dbpedia.org/ontology/> " +
    "PREFIX dcterms: <http://purl.org/dc/terms/> "+
    "SELECT DISTINCT ?s ?sub ?long ?lat WHERE {"+
    "?s a onto:Place . "+
    "?s geo:lat ?lat . "+
    "?s geo:long ?long . " +
    "?s dcterms:subject ?sub "+
    " FILTER ( ?long > "+(YOUR_LONG-radius)+"&& ?long < "+(YOUR_LONG+radius)+" && ?lat > "+(YOUR_LAT-radius)+" && ?lat < "+(YOUR_LAT+radius)+")}"+
    "LIMIT 200";
    System.out.println(sparqlQueryString1);

    Query query = QueryFactory.create(sparqlQueryString1);
    QueryExecution qexec = QueryExecutionFactory.sparqlService("http://dbpedia.org/sparql", query);

    ResultSet results = qexec.execSelect();
    ResultSetFormatter.out(System.out, results, query);       

    qexec.close() ;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:18:18.447

这在一定程度上取决于您对“更好”的含义。您正在寻找的是一个区分特征，一些“好”结果确实具有的属性，而“坏”结果则没有（或相反）。

找出要查询的属性的一个好方法是访问特定主题的 DBPedia 资源页面，看看那里有什么。[德国](http://dbpedia.org/page/Germany)的页面显示了 DBPedia 所知道的关于该主题的所有信息：它是一个国家，它的人口规模是多少，等等。

一个很好的属性是`rdf:type`属性。查看您想要返回的结果是否共享一些价值，然后将其添加到您的查询中。但是您也可以使用其他（组合）属性。我不能告诉你这些属性或值应该是什么，只有你知道你自己的用例。

# mysql - 奇怪的 MySQL 行为。有些行在排序后出现，但在执行后没有

> ID：11063328
> 
> 赞同：1
> 
> 时间：2012-06-16T12:15:37.477
> 
> 标签：mysql, sql, mysql-workbench, toad

我有一个奇怪的问题。当我执行查询时，数据不会显示在 中，`Resultset`但是当我单击 中的列标题对其`ResultSet`进行排序时，会出现该行。

我的桌子是这样的——

```
id     user_id  action_id   object_id   MAX(s.timestamp)
2825    61  2   806 16/06/2012 03:41:55
2818    208 4   0   15/06/2012 15:11:30  -- problematic row
2817    21  7   1   15/06/2012 13:18:38
2816    208 4   0   15/06/2012 12:11:30  -- problematic row
2803    320 9   806 14/06/2012 23:14:32
2802    320 9   805 14/06/2012 17:15:54
2801    208 4   0   14/06/2012 15:11:30  -- problematic row 
```

我正在使用以下查询 -

```
SELECT  MAX(activity_stream_id) id,
        s.user_id,
        s.action_id,
        s.object_id, 
        MAX(s.timestamp)
FROM pp_activitystream s
GROUP BY s.user_id, s.action_id, s.object_id 
ORDER BY s.timestamp DESC 
```

理想情况下，`ResultSet`我应该获得“有问题的行”的最顶部，但我没有。当我单击列标题对行进行排序时，会出现“有问题的行”。

你能告诉我为什么会这样吗？

`Toad`我使用and执行了上述查询`MySQL Workbench`，它的行为方式相同。

执行后的输出 -

```
id     user_id  action_id   object_id   MAX(s.timestamp)
2825    61  2   806 16/06/2012 03:41:55
2817    21  7   1   15/06/2012 13:18:38
2803    320 9   806 14/06/2012 23:14:32
2802    320 9   805 14/06/2012 17:15:54 
```

单击任何列标题进行排序后的输出（在这种情况下为时间戳） -

```
id     user_id  action_id   object_id   MAX(s.timestamp)
2825    61  2   806 16/06/2012 03:41:55
2818    208 4   0   15/06/2012 15:11:30  -- row appears
2817    21  7   1   15/06/2012 13:18:38
2803    320 9   806 14/06/2012 23:14:32
2802    320 9   805 14/06/2012 17:15:54 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:38:17.557

```
SELECT  MAX(activity_stream_id) id,
        s.user_id,
        s.action_id,
        s.object_id, 
        MAX(s.timestamp) as ts
FROM pp_activitystream s
GROUP BY s.user_id, s.action_id, s.object_id 
ORDER BY ts DESC 
```

Mysql 允许您在 ed 列中使用非ed`group`列，在子句中使用非 ed 列。即使这有时可能会让人觉得性感或有用（至少对我而言），但它在概念上存在缺陷，并且可能导致难以发现的错误。`select``select``order by`

在这种情况下，您尝试对在 select 中显示为聚合列的列进行排序，从而导致不可预测的结果。当您单击 toad 或 mysql-workbench 中的结果集表头时，您实际上是在告诉 mysql 进行排序`MAX(timestamp)`，从而使一切正常。

# php - 使用目标 c 连接到 php

> ID：11063329
> 
> 赞同：0
> 
> 时间：2012-06-16T12:15:46.070
> 
> 标签：php, objective-c, service, web

我从未使用过 Web 服务，并认为我现在会尝试。

我有一个 php 文件，它输出一个简单的字符串，1 或 0。如何在目标 c 中建立连接并将 php 字符串存储为 NSString？如果不是太多，我会很感激一些示例代码。

我试过在谷歌上搜索它，但不知道要搜索什么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:25:33.870

您可以使用

```
php -f somescript.php 
```

执行 PHP 脚本，并获取输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:29:31.883

请在 Github 上查看：[AFNetworking](https://github.com/AFNetworking/AFNetworking)

非常容易使用！

例如 ：

```
NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/public_timeline.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Public Timeline: %@", JSON);
} failure:nil];
[operation start]; 
```

# struts2 - struts2 2.2.3使用哪个版本的tile插件和jasper插件

> ID：11063335
> 
> 赞同：0
> 
> 时间：2012-06-16T12:16:35.373
> 
> 标签：struts2, jasper-reports, tiles2, jasper-plugin

我想在我的 Web 应用程序中使用带有 struts2 的磁贴和碧玉插件，但是在部署应用程序时出现错误。做谷歌后，我发现我的应用程序中有插件版本不匹配。

当我使用**struts2 2.2.3 和 jasper 插件**时，它**不起作用**。但是当我使用**struts2 2.1.8 和 jasper**时，它的**工作正常**。然后我决定使用集成瓦片与 struts 2.1.8 并在部署时出错

```
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: java.lang.IllegalArgumentException: javax.servlet.ServletException: com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class: class org.apache.struts2.tiles.StrutsTilesListener 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:59:20.070

*Nutshell:* whatever versions are used by the Struts 2.2.3 Tiles and Jasper plugins.

That it's being asked means you're not using Maven, instead managing transitive dependencies by hand--this is almost always a Really Bad Idea. Can't urge you strongly enough to not do this.

*Long answer:* When you have questions like this, use the Maven config files and/or Maven itself to find the answers, because that's how Struts 2 is being built.

You can use sites like [http://mvnrepository.com](http://mvnrepository.com) when the info is explicit in the pom.

[Struts 2 JasperReports Plugin Dependencies](http://mvnrepository.com/artifact/org.apache.struts/struts2-jasperreports-plugin): JasperReports 3.1.2

[Struts 2 Tiles Plugin Dependencies](http://mvnrepository.com/artifact/org.apache.struts/struts2-tiles-plugin): Tiles 2.0.6, but not as easy to figure out since the Tiles version isn't explicit in the POM. Running `mvn dependency:tree` shows that it's 2.0.6:

```
[INFO] org.apache.struts:struts2-tiles-plugin:jar:2.2.3
[INFO] +- org.apache.tiles:tiles-core:jar:2.0.6:compile
[INFO] |  +- org.apache.tiles:tiles-api:jar:2.0.6:compile
[INFO] |  +- commons-digester:commons-digester:jar:2.0:compile (version managed from 1.8)
[INFO] |  |  \- commons-beanutils:commons-beanutils:jar:1.8.0:compile
[INFO] |  \- commons-logging:commons-logging-api:jar:1.1:compile
[INFO] +- org.apache.tiles:tiles-jsp:jar:2.0.6:runtime
... etc ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T11:34:51.567

出现上述问题是由于插件与struts版本不兼容。选择与 struts 版本匹配的插件。升级你的碧玉插件。

给你下载链接

[http://www.java2s.com/Code/Jar/s/Downloadstruts2jasperreportsplugin223jar.htm](http://www.java2s.com/Code/Jar/s/Downloadstruts2jasperreportsplugin223jar.htm)

# google-maps - Shadowbox 中的谷歌地图

> ID：11063337
> 
> 赞同：1
> 
> 时间：2012-06-16T12:16:47.013
> 
> 标签：google-maps, iframe, shadowbox

是否可以在 shadowbox 中从谷歌地图打开 iframe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:50:47.907

**Shadowbox**的源代码在 GitHub 上，作者提供了一个[**示例文件夹**](https://github.com/mjijackson/shadowbox/tree/v3.0.3/examples)。

在那里，您会找到一个[**google-maps.html**](https://github.com/mjijackson/shadowbox/blob/v3.0.3/examples/google-maps.html)文件，该文件演示了如何在 Shadowbox中打开**Google 地图。**

参考：[**jsFiddle**](http://jsfiddle.net/v8LWq/)

# android - Android 列表视图中的 XML 读取和解析？

> ID：11063338
> 
> 赞同：0
> 
> 时间：2012-06-16T12:16:52.317
> 
> 标签：android, xml, listview, xml-parsing

我正在做一个简单的项目，它从源代码中获取一个 xml 文件（这是应用程序中名为“diagrams”的文件夹）。所以当我启动应用程序时有一个按钮。当您单击按钮时，它将带我进入源“图表”文件夹。在图表文件夹中，有 xml 文件。当我选择其中任何一个时，它将解析 xml 文件并从 xml 文件创建列表视图。我将能够像树结构一样在列表视图上导航。这是一个示例 xml 文件。所以应该这样看

```
<Prototypes>
<Node>
  <Type>Class</Type>
  <ShapeType>Rectangle</ShapeType>
  <Properties>
    <Property>
      <Type>attributes</Type>
      <View Position="Inside" ShapeType="Transparent"/>
      <Modifiers>
        <Modifier id="0">
          <Type>static</Type>
          <View Bold="false" Italic="true" Prefix="" Suffix="" Underline="false"/>
        </Modifier>
        <Modifier id="1">
          <Type>protected</Type>
          <View Bold="false" Italic="false" Prefix="#" Suffix="" Underline="false"/>
        </Modifier>
        <Modifier id="2">
          <Type>private</Type>
          <View Bold="false" Italic="false" Prefix="-" Suffix="" Underline="false"/>
        </Modifier>
      </Modifiers>
    </Property>
    <Property>
      <Type>operations</Type>
      <View Position="Inside" ShapeType="Transparent"/>
      <Modifiers>
        <Modifier id="0">
          <Type>static</Type>
          <View Bold="false" Italic="true" Prefix="" Suffix="" Underline="false"/>
        </Modifier>
        <Modifier id="1">
          <Type>protected</Type>
          <View Bold="false" Italic="false" Prefix="#" Suffix="" Underline="false"/>
        </Modifier>
        <Modifier id="2">
          <Type>private</Type>
          <View Bold="false" Italic="false" Prefix="-" Suffix="" Underline="false"/>
        </Modifier>
      </Modifiers>
    </Property>
  </Properties>
</Node>
<Edge>
  <Type>Association</Type>
  <LineStyle>Solid</LineStyle>
  <MinAttachedNodes>2</MinAttachedNodes>
  <MaxAttachedNodes>2</MaxAttachedNodes>
  <Heads>
    <Head Head="Tail" headLabel="from"/>
    <Head Head="V" headLabel="to"/>
  </Heads>
</Edge>
<Edge>
  <Type>Generalization</Type>
  <LineStyle>Dashed</LineStyle>
  <MinAttachedNodes>2</MinAttachedNodes>
  <MaxAttachedNodes>2</MaxAttachedNodes>
  <Heads>
    <Head Head="Tail" headLabel="sub class"/>
    <Head Head="Triangle" headLabel="super class"/>
  </Heads>
</Edge>
</Prototypes> 
<Components>
<Nodes>
  <Node Name="Company" Type="Class" id="1">
    <Position x="129.0" y="52.0"/>
    <Properties>
      <Property>
        <Type>attributes</Type>
        <Element>
          <Value>budget</Value>
        </Element>
        <Element>
          <Value>name</Value>
        </Element>
      </Property>
      <Property>
        <Type>operations</Type>
        <Element>
          <Value>Company</Value>
        </Element>
        <Element>
          <Value>getDriverQualification</Value>
        </Element>
      </Property>
    </Properties>
  </Node>
  <Node Name="Driver" Type="Class" id="2">
    <Position x="135.0" y="304.0"/>
    <Properties>
      <Property>
        <Type>attributes</Type>
        <Element>
          <Value>name</Value>
        </Element>
      </Property>
      <Property>
        <Type>operations</Type>
        <Element>
          <Value>getQualification</Value>
        </Element>
      </Property>
    </Properties>
  </Node>
  <Node Name="Vehicle" Type="Class" id="3">
    <Position x="477.0" y="301.0"/>
    <Properties>
      <Property>
        <Type>attributes</Type>
        <Element>
          <Value>registration</Value>
        </Element>
      </Property>
      <Property>
        <Type>operations</Type>
        <Element>
          <Value>Vehicle</Value>
        </Element>
        <Element>
          <Value>getRegistration</Value>
        </Element>
      </Property>
    </Properties>
  </Node>
  <Node Name="Van" Type="Class" id="4">
    <Position x="381.0" y="519.0"/>
    <Properties>
      <Property>
        <Type>attributes</Type>
        <Element>
          <Value>size</Value>
        </Element>
      </Property>
      <Property>
        <Type>operations</Type>
        <Element>
          <Value>Van</Value>
        </Element>
      </Property>
    </Properties>
  </Node>
  <Node Name="Car" Type="Class" id="5">
    <Position x="641.0" y="512.0"/>
    <Properties>
      <Property>
        <Type>attributes</Type>
        <Element>
          <Value>fuelType</Value>
        </Element>
      </Property>
      <Property>
        <Type>operations</Type>
        <Element>
          <Value>Car</Value>
        </Element>
      </Property>
    </Properties>
  </Node>
</Nodes>
<Edges>
  <Edge Name="employs" Type="Association" id="1">
    <Nodes>
      <Node Head="" Label="1" id="1"/>
      <Node Head="V" Label="*" id="2"/>
    </Nodes>
  </Edge>
  <Edge Name="hires" Type="Association" id="2">
    <Nodes>
      <Node Head="" Label="1" id="1"/>
      <Node Head="" Label="*" id="3"/>
    </Nodes>
    <Points>
      <Point id="-1">
        <Position x="524.5" y="83.5"/>
        <Neighbours>1 3</Neighbours>
      </Point>
    </Points>
  </Edge>
  <Edge Name="drives" Type="Association" id="3">
    <Nodes>
      <Node Head="V" Label="*" id="3"/>
      <Node Head="" Label="1" id="2"/>
    </Nodes>
  </Edge>
  <Edge Name="G1" Type="Generalization" id="4">
    <Nodes>
      <Node Head="" Label="" id="4"/>
      <Node Head="Triangle" Label="" id="3"/>
    </Nodes>
  </Edge>
  <Edge Name="G2" Type="Generalization" id="5">
    <Nodes>
      <Node Head="Triangle" Label="" id="3"/>
      <Node Head="" Label="" id="5"/>
    </Nodes>
  </Edge>
</Edges>
</Components> 
```

结果应该在列表视图中，例如；（这是结果的一部分。我还没有定义所有的输出）

```
•   Class
       ➢    Company
           o    Association
                   •    To Vehicle via hires
                   •    To Driver via  employs
           o    Attributes
                   •    budget
                   •    name
           o    operations
                   •    Company
                   •    getDriverQualification
       ➢    Driver
       ➢    Vehicle
       ➢    Van
       ➢    Car
•   Association
•   Generalization 
```

我寻找你的建议。欢迎所有建议。我并不是真的在这里寻找确切的代码:) 我将对此进行编码，但在开始之前，我试图找到将 xml 文件解析为列表视图的最佳方法。

谢谢

# java - Android DDMS 活动管理器

> ID：11063339
> 
> 赞同：-3
> 
> 时间：2012-06-16T12:17:00.490
> 
> 标签：java, android, ddms

> **可能重复：**
> [Activity 未启动，其当前任务已被置于最前面](https://stackoverflow.com/questions/3781182/activity-not-started-its-current-task-has-been-brought-to-the-front)

为什么我启动应用程序时会出现此错误？

```
[2012-06-16 14:13:17 - Cameraaaa] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:29:31.043

当您在设备上的当前部署与您现在尝试安装的部署相同时，从 eclipse 启动时会出现这种情况

# google-apps-script - onEdit 事件对象访问已修改单元格的先前值？

> ID：11063340
> 
> 赞同：3
> 
> 时间：2012-06-16T12:17:13.017
> 
> 标签：google-apps-script, google-sheets, triggers

我找不到关于 event.source 对象的任何详细文档，所以我想知道是否可以访问修改范围的*先前*值，以便我可以将范围的新值与范围的旧值进行比较以进行验证。

谢谢你的帮助。

OnEdit(事件)

```
function onEdit(event) 
/* Default onEdit Event function */
{
  var ssa = SpreadsheetApp.getActiveSpreadsheet();
  var ss = event.source.getActiveSheet();
  var r = event.source.getActiveRange();
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T22:49:50.820

**--edit**看来这现在是可能的，请查看下面的链接和评论。

详细信息请参见[此处](https://developers.google.com/apps-script/guide_events#TriggerAttributes)的文档。

但是之前的值在事件中不可用。有一个关于此的[增强请求。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=200)您应该“加注星标”以跟踪更新并为它投票。

现在，到“解决方法”。所有这些都是基于您必须自己将原始数据保存在其他地方的事实。您可以拥有一个镜像电子表格或工作表，当`onEdit`原件发生任何事情时，您可以转到镜像并获取旧值。这比看起来要复杂一些，因为您还必须通过脚本更新镜像电子表格，但并非电子表格上的所有事件都会触发`onEdit`事件，例如插入行。所以你的脚本必须非常聪明才能跟上那些，这取决于你的使用情况，甚至可能是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:08:34.383

您可以使用 ScriptDB 来存储信息`onLoad()`，然后将其读回`onEdit()`。每次进行编辑时，您都可以再次调用`onLoad()`以再次刷新单元格值的数据库，或者只是替换数据库中的相关信息。

添加`notonEdit()`以触发资源>所有触发器菜单中的 FromSpreadsheet>onEdit() 事件。

这是代码：

```
function onLoad() {

  var db = ScriptDb.getMyDb()

  //get array of the sheet range that has something in it
  var sheet = SpreadsheetApp.getActiveSheet()
  var lastrow = sheet.getLastRow()
  var lastcolumn = sheet.getLastColumn()
  var subsheet = sheet.getRange(1, 1, lastrow, lastcolumn) 
  var values = subsheet.getValues() 

  //write that array into the ScriptDB of the project 
      for (i=1; i<=lastrow; i++){
        for (j=1; j<=lastcolumn; j++){
          var object = {type: "onEditfudge", row: i, column:j, value:values[i-1][j-1]}  
          db.save(object)
          Logger.log(object) //log it to check its correct..
        }
      }    
}

function BeforeonEdit(){

  db = ScriptDb.getMyDb()
  var newrange = SpreadsheetApp.getActiveRange()

  //get 'old value'
  var dbentry = db.query({type: "onEditfudge", row:newrange.getRow(),column:newrange.getColumn()}).next()
  var oldvalue = dbentry.value    

  //overwrite the 'old value' with the 'new value' for the next onEdit() event
 dbentry.value = newrange.getValue()
 db.save(dbentry)

 //return the old value to do something with in the calling function  
 return oldvalue  
}

function notonEdit(){

  //show new and old value    
  Browser.msgBox("Old value is: " + BeforeonEdit() + ". New Value is: " + SpreadsheetApp.getActiveRange().getValue()) 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-07T06:31:05.840

这是一个旧帖子，但它是我搜索时出现的第一个帖子，并且已经实施。您可以在文档[https://developers.google.com/apps-script/guides/triggers/events#edit中找到详细信息](https://developers.google.com/apps-script/guides/triggers/events#edit)

[来自 Docs] 可以通过 oldValue 访问：编辑前的单元格值（如果有）。仅当编辑的范围是单个单元格时才可用。如果单元格没有以前的内容，将是未定义的。

因此，例如，您可以使用以下脚本记录值：

```
function onEdit(e){
  Logger.log(e.oldValue);
} 
```

PS：您可以通过从左侧菜单转到执行来查看日志（见下图） [![菜单选项截图](../Images/ee59d4a7f565933582d9891109ec9ef9.png)](https://i.stack.imgur.com/KC0bl.png)

# c - 如何知道是否使用了 ASCII？

> ID：11063343
> 
> 赞同：1
> 
> 时间：2012-06-16T12:17:42.003
> 
> 标签：c, character-encoding, ascii

我做了一些研究，但我没有找到我的问题的答案。我想知道如何确定 C 程序中使用的字符集是否为 ASCII。是否有任何预处理器常量？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:28:33.510

C 说：

> （C99，5.2.1p1）“执行字符集成员的值是实现定义的。”

例如`gcc`说：

> 执行字符集（C90 和 C99 5.2.1）成员的值。 *由 ABI 确定*

[http://gcc.gnu.org/onlinedocs/gcc/Characters-implementation.html](http://gcc.gnu.org/onlinedocs/gcc/Characters-implementation.html)

所以`gcc`指向操作系统文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:22:23.950

据我所知，ASCII 字符集的范围是 0 - 127，其他字符集低于零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:24:57.833

这取决于您使用的工具链，您可以在工具链文档中找到它。例如，vc++ 为 unicode 构建定义 _UNICODE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T14:19:27.187

自己构建一个预处理器宏很容易。像下面这样的东西应该可以解决问题：

```
#define HAVE_ASCII (('\x41' == 'A') && ('\x61' == 'a') && ('\x30' == '0'))

#if !HAVE_ASCII
# error "we need ascii"
#endif 
```

如果您想非常小心，您可以在宏中列出所有可打印的 ASCII，但是这里应该已经足以与 EBCDIC 区分开来。如果您只是确定您是否在 EBDIC 系统上，则更容易：)

```
#define HAVE_EBCDIC (('Z' - 'A') != 25) 
```

# jquery - 如何使用 jQuery 选择（或：不）一个单元格范围？

> ID：11063345
> 
> 赞同：-2
> 
> 时间：2012-06-16T12:17:51.427
> 
> 标签：jquery

我有一个包含 7 个单元格和一堆行的表格。我想选择除第 1、第 5 和第 6 之外的所有内容。

我试过：

```
 $('table td:not(eq(5-6)):not(eq(1)); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:21:54.667

尝试：

```
 $('table td:not(:eq(1)):not(:eq(5)):not(:eq(6))'); 
```

或者：

```
 $('table td:not(:eq(1),:eq(5),:eq(6))'); 
```

# xml - XML::LibXML::Schema 没有验证我的 xml。为什么？

> ID：11063349
> 
> 赞同：1
> 
> 时间：2012-06-16T12:18:34.640
> 
> 标签：xml, perl, xsd

xml:

```
<workers xmlns="http://www.zoo.com" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:schemaLocation="http://www.zoo.com worker.xsd">
<impiegato>
    <username>mario</username>
    <password>de2f15d014d40b93578d255e6221fd60</password>
    <nome>Mario</nome>
    <sesso>F</sesso>
    <eta>23</eta>
</impiegato>

<impiegato>
    <username>maria</username>
    <password>maria</password>
    <nome>Mariaaa</nome>
    <sesso>F</sesso>
    <eta>443</eta>
</impiegato>

<impiegato>
    <username>mirco</username>
    <password>mirco</password>
    <nome>Mirco</nome>
    <sesso>F</sesso>
    <eta>27</eta>
</impiegato>

<impiegato>
    <username>martina</username>
    <password>martina</password>
    <nome>Martina</nome>
    <sesso>M</sesso>
    <eta>26</eta>
</impiegato>

<manager>
    <username>marco</username>
    <password>marco</password>
    <nome>Marco</nome>
    <sesso>M</sesso>
    <eta>25</eta>
</manager>

<manager>
    <username>giovanna</username>
    <password>zxVcGz0BPdHkY</password>
    <nome>Giovanna</nome>
    <sesso>F</sesso>
    <eta>24</eta>
</manager>
</workers> 
```

xml架构：

```
<?xml version="1.0"?>
<xs:schema
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:zoo="http://www.zoo.com"
targetNamespace="http://www.zoo.com"
elementFormDefault="qualified">

<xs:element name="workers" type="zoo:Tworkers"/>

<xs:complexType name="Tworkers">
<xs:sequence>
    <xs:element name="impiegato" type ="zoo:Timpiegato"/>
    <xs:element name="manager" type ="zoo:Tmanager"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="Timpiegato">
<xs:sequence>
    <xs:element name="username" type ="xs:string"/>
    <xs:element name="password" type ="xs:string"/>
    <xs:element name="nome" type ="xs:string"/>
    <xs:element name="sesso" type ="xs:string"/>
    <xs:element name="eta" type ="xs:integer" default="-1"/>
</xs:sequence>
</xs:complexType>

<xs:complexType name="Tmanager">
<xs:sequence>
    <xs:element name="username" type ="xs:string"/>
    <xs:element name="password" type ="xs:string"/>
    <xs:element name="nome" type ="xs:string"/>
    <xs:element name="sesso" type ="xs:string"/>
    <xs:element name="eta" type ="xs:integer" default="-1"/>
</xs:sequence>
</xs:complexType>

</xs:schema> 
```

代码：

```
my $xmlschema = XML::LibXML::Schema->new( location => "../xml/worker.xsd" );
if (eval { $xmlschema->validate( $doc ); } eq undef) {
  # redirect
} 
```

我认为问题出在架构的这一部分：

```
<xs:complexType name="Tworkers">
<xs:sequence>
    <xs:element name="impiegato" type ="zoo:Timpiegato"/>
    <xs:element name="manager" type ="zoo:Tmanager"/>
</xs:sequence>
</xs:complexType> 
```

因为如果我跑

```
xmllint --schema worker.xsd workers.xml 
```

在终端上我收到此错误：

```
workers.xml:10: element impiegato: Schemas validity error : Element '{http://www.zoo.com}impiegato': This element is not expected. Expected is ( {http://www.zoo.com}manager ). 
```

有没有 xs:sequence 的替代品可以尝试？因为 Impiegato 和 Managers 元素没有顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:21:48.590

修复了将 Tworkers 更改为的问题

```
<xs:complexType name="Tworkers">
    <xs:sequence  maxOccurs="unbounded">
        <xs:element name="impiegato" type ="zoo:Timpiegato" minOccurs="0" />
        <xs:element name="manager" type ="zoo:Tmanager" minOccurs="0"/>
    </xs:sequence>
</xs:complexType> 
```

现在我有另一个问题（可能在名称空间上），问一个新问题

# c# - 从 C# 执行 BC 计算

> ID：11063352
> 
> 赞同：0
> 
> 时间：2012-06-16T12:18:49.023
> 
> 标签：c#, c, bc

我正在编写一个需要计算支持的应用程序（有趣的项目）。但是，有没有办法从 C# 将输入数据输入到 BC 中的交互式控制台，然后用 C# 从控制台读取数据？我曾尝试在 c 源代码中使用 dllexport，但代码让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:42:44.167

在 c# 中与预先编写的控制台应用程序交互的常用方法是使用[`Process.Start`](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)然后重定向[`StandardInput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardinput.aspx)和[`StandardOutput`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx).

# c++ - 有人熟悉“实现/内部标头”（*.ih）吗？

> ID：11063355
> 
> 赞同：3
> 
> 时间：2012-06-16T12:18:55.540
> 
> 标签：c++, header, include, implementation, internal

在 FB Brokken（The C++ Annotations 的作者）的半年 C++ 课程中，我们学会了使用所谓的实现头文件。我知道这是弗兰克的约定，但实际上我从未在其他任何地方见过它。因此，我将解释这个概念，我很好奇其他人对此有何看法。

这个想法是，您只需将`#include`类成员的实现所需的所有指令（假设您没有编写类内定义）放在一个文件中，.ih 实现标头和`#include`每个源中的该文件文件。替代方案是
1)`#include`类头文件中的所有内容或
2)`#include`每个源文件中的所有头文件。

这两种替代方案的缺点是显而易见的：
1a)`#include`在添加任何需要额外`#include`的 's 后，您必须重新编译所有源文件。
1b）你的头文件，应该是你的类的清晰接口，被一大堆`#include`指令污染，用户不知道它们的用途，他也不关心。2a）您必须`#include`在每个源文件中一次又一次地使用相同的标题。
2b）你的实现被所有这些污染了`#include`，让它看起来有点乱。

只是要清楚：

```
/* someclass.h(pp) */

#ifndef SOME_CLASS_H
#define SOME_CLASS_H

class SomeClass
{
    //some private data members
    public:
        SomeClass();
        void sayHi() const;
        // some more member functions
    private:
        // some private member functions
};

#endif

/* someclass.ih */

#include "someclass.h"
#include <iostream>
#include <vector>
using namespace std; 

// namespace is now only used in my implementations, other people
// including my headers won't accidentally import the entire std namespace.

/* sayhi.cc */

#include "someclass.ih"

void SomeClass::sayHi() const
{
     cout << "sayHi() says hi!\n";
} 
```

现在，再次，问题是：有没有人听说过这样的约定？我说服任何人开始使用它了吗？我个人觉得它是一个非常有用（甚至是显而易见的）约定，我有点惊讶我在其他任何地方都没有看到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T10:14:53.560

有趣的帖子。让我首先评论 user1428839（以下称为*海报*）关于 .ih 标头的声明：

首先，海报写道：

> ...这个想法是，您只需将类成员的实现所需的所有#include 指令...放在一个文件中，.ih 实现头文件中，并将 #include 这个文件放在每个源文件中.

按照公式，这是不正确的。为避免混淆，句子的最后一部分应该是： ... 在*.ih 文件所属的类的每个源文件中*。在 .ih 方法下，类*头*文件（例如，`someclass.h`）仅提供接口并且应该只*声明*可以声明的内容。所以，如果`SomeClass`有一个类数据成员`std::ofstream *d_out`，那么就不需要`#include <fstream>`. 相反，它就足够了`#include <iosfwd>`。这会产生一个干净的类接口，当包含不属于但仅使用`SomeClass`.

接下来，海报说：

> 1a) 在添加任何需要额外#include 的内容后，您必须重新编译所有源#include'ing 这个头文件。

这不是真的。仅当附加标头声明的功能在接口中实际使用时才需要这样做*。*如果不是这样，则不需要完全重新编译。如果添加了新的数据成员，或者（但这是不好的风格，例如，您正在使用内联成员）在类接口中使用了附加标头的元素，*则*需要完全重新编译。

海报提出的下一点：

> 1b）你的头文件，应该是你的类的清晰接口，被一大堆#include指令污染，用户不知道它们的用途，他也不关心。

正确，但这里的重点是类头变得太胖了。每次外部源需要包含`someclass.h`时，编译器还必须读取所有那些额外的头文件，以及那些头文件所包含的头文件等，而它只需要知道它们的本质`SomeClass`是什么。格言是用户不应该为他/她不需要的东西付费，在这种情况下，由于编译器必须读取（通常很多）无用的（在上下文中`SomeClass`）头文件而导致额外的编译时间。

使用海报建议的 .ih 约定的替代方法之一是将您需要的内容包含在您需要的地方。事实上，我认为这是一个很好的选择，但它也需要大量的簿记和工作。通常类成员实现需要相同的头文件，并将它们放在一个文件中，实现头具有定义一个维护点的额外好处。是的，有时编译器必须读取特定源不需要的标头时会有一点开销，但这只会发生一次：在类编译时，这（希望，大概）只是偶尔发生。

恐怕对海报发布的一些反应是对 .ih 方法的核心观点略有误解的结果：

*   类头本身保持尽可能苗条
*   使用该类的源不会遭受比严格要求更长的编译时间
*   类开发人员不必一次又一次地包含编译类成员所需的一堆头文件。相反，只需要包含一个根据类的要求定制的标题。

另一个回复（来自 DeadMG）侧重于将所有源代码放入一个源文件中。在某种程度上，这是一个风格问题。如果您为某个特定程序开发软件，那么您不妨将所有源代码放入一个文件中，前提是这符合您的个人喜好。我个人觉得使用这些文件*非常*烦人且很难，因为我经常喜欢并行查看或使用许多函数的源代码，但最终这当然是个人喜好问题。

但是，如果您开发软件的目的是稍后在其他程序中重用它，例如，您开发一个考虑将其添加到库中的类，那么您绝对应该使用单功能单文件方案。考虑构造函数：类通常提供一系列构造函数，您可以选择适合您的上下文的构造函数。如果将类的实现放入一个源文件中，那么您的最终程序将过于臃肿，因为链接器必须将实现您的构造函数的目标文件以及该程序所需的目标文件添加到您的程序中，等等，等等。所以你最终得到了一个程序，它完全没有意义地链接到许多额外的目标文件。一功能一文件原则防止这种情况发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T13:15:06.550

我从来没有见过这个在任何地方使用过。大多数类都将所有实现的功能放在一个文件中，因此重复指定必要的标头没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:26:21.623

我不明白。当您拥有使用来自其他头文件的类或 struts 或 typedef 的类成员或类方法参数时会发生什么？而且，再加上重新编译的问题……这似乎是为了获得更多的工作。您应该仅在标头中包含标头所需的内容，并且仅在 impl 中包含实现所需的内容。而已。

# ruby-on-rails - 如何在特定页面上显示 Ajax 微调器？

> ID：11063356
> 
> 赞同：2
> 
> 时间：2012-06-16T12:18:58.650
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我在显示我的 ajax 微调器时遇到问题。现在我正在`localhost:3000/test`使用以下代码对此进行测试：

我单击一个链接以显示加载程序（Ruby on Rails 代码）：

```
<li><%= link_to "New Test", new_test_path, :remote => true %></li> 
```

我有`div`加载器应该出现在里面：

```
<div id="generate-add-form">
  <div class="ajax-loader"></div>
</div> 
```

然后我的功能使它出现：

```
jQuery( function($) {

$('#generate-add-form').ajaxStart( function() {
    $(this).children('.ajax-loader').show();
});

$('#generate-add-form').ajaxStop( function() {
    $(this).children('.ajax-loader').hide();
});

}); 
```

最后是我的css（一些东西被注释掉，看看它是否需要）：

```
.ajax-loader {
 display:    none;
 /*position:   fixed;*/
 z-index:    1000;
 /*top:        -13em;
 left:       6em;*/
 background:url('ajax-loader.gif') 50% 50% no-repeat;
}
body.loading {
 overflow: hidden;
}
body.loading .ajax-loader {
 display: block;
} 
```

我点击链接时怎么没有显示？

* * *

编辑：

```
<li><%= link_to "Test", new_test_path, :class => "add-link", :remote => true %></li>
<li><%= link_to "Study Guide", new_study_guide_path, :class => "add-link", :remote => true %></li>

$('#generate-add-form').children('.ajax-loader').hide();
  $('.add-link').click( function() {
    $('#generate-add-form').children('.ajax-loader').show();
}); 
```

我先隐藏微调器，然后在单击时再次显示它。切换到另一个链接时怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:57:28.027

Ok, so first, you want to hide something and show your ajax loader. First, give an id or an unique class to your link so you can target it:

```
<%= link_to "New Test", new_test_path, :remote => true, :id => 'you_link_id' %> 
```

Then add some javascript to handle the click on the link:

```
$('#your_link_id').click(function(){
  $('#generate-add-form').children('.ajax-loader').show();
  $('#id_of_the_stuff_you_want_to_hide').hide();
}); 
```

In the controller action that will respond to new_test_path, add this at the end:

```
respond_to do |format|
  format.js
end 
```

Here, you are making your controller action respond to your javascript request (that's what remote does). You could also add `format.html` to respond to html requests. You'll probably want to do this if you also want serve your page to people with javascript disabled (1 to 2% of all users).

Then, create your view with the name `your_action.js.erb`. Notice the js instead of the usual html. Inside, you can then hide your ajax spinner and show whatever you want. You can even render partials defined in that page.

```
$('#generate-add-form').children('.ajax-loader').hide();
$('#id_of_the_stuff_you_now_want_to_show').show();
$("#div_containing_your_partial").html('<%= escape_javascript(render 'name_of_your_partial') %>'); 
```

If you want, clone [this repository](https://github.com/GuilhermeSimoes/lastfm_demo) I made some time ago that shows just how to do this.

And finally, when you get this working, you'll probably want to look at ways to make showing and hiding stuff in a prettier way. Try using fadeIn instead of show and fadeOut instead of hide for example.

Also, one final detail. In jQuery, functions don't get called sequentially. They are all called at the same time. So if you want to make something appear only *after* something disappears, you have to use of callbacks. Here's an example:

```
# without a callback, both actions take place at the same time
$("#id").hide();
$("#id2").show();

# with a callback, show will only be called after hide ends
$("#id").hide(function(){
  $("#id2").show();
}); 
```

EDIT: To do what you want, you have to remove the `:remote => true` part of your link and basically program what Rails already does automatically for you. Use these links to guide yourself:

*   [http://www.alfajango.com/blog/rails-3-remote-links-and-forms/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)

*   [http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/](http://www.alfajango.com/blog/rails-3-remote-links-and-forms-data-type-with-jquery/)

And then this is probably what you're looking for:

*   [Get latest ajax request and abort others](https://stackoverflow.com/questions/4176956/get-latest-ajax-request-and-abort-others)

But this is all rather complicated, specially for a Railsbeginner :/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:33:55.630

尝试为设置非零`height`。`.ajax-loader`

# asp.net - 在 asp.net 中创建错误日志文件

> ID：11063358
> 
> 赞同：2
> 
> 时间：2012-06-16T12:19:22.810
> 
> 标签：asp.net

为了处理我的 Web 应用程序中的错误，我正在创建一个日志文件，它将在 global.asax 的 Application_Error() 事件中创建，以及基于日期创建的那些日志文件（每天 1 个）

我正在考虑发生错误的情况，并且在同一时间文件实例同时从多个用户写入

所以它可能会抛出异常该文件已被另一个用户使用它可能就像我不确定

任何人都可以帮助处理这种情况

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:54:02.323

用于`mutex`锁定您的书写程序。我建议`mutex`，而不是`lock()`因为可以捕获所有可能引发错误的池/线程。

在 MSDN 上有详细信息`mutex`和示例：

[http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

一个简单的例子

```
public void LogThis(string LogDetails) 
{
    var mut = new Mutex(true, "LogMutexName");

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you open write close your file
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T20:06:23.043

你可以使用像[ELMAH](http://code.google.com/p/elmah/)这样的东西，它会给你相当不错的错误记录。它在为您记录的方式和内容方面非常灵活。您也可以毫不费力地使用 NuGet 添加它。

或者看看[NLog](http://nlog-project.org/)

# c++ - 数组下标的无效类型“int [int]”

> ID：11063367
> 
> 赞同：1
> 
> 时间：2012-06-16T12:20:33.403
> 
> 标签：c++, arrays, templates, subscript

我正在尝试编译下一个代码，但在指示的行上出现此错误

“数组下标的无效类型‘int [int]’”

代码：

```
template<typename T>
class Stack {
      private:
              static const int GROW_FACTOR = 2;
              static const int START_LENGHT = 10;

              T * data;
              int max;
              int used;

              void allocateIfNeeded() {
                   if (used == max) {
                      T * aux = new T[max*GROW_FACTOR];
                      for (int i=0; i<max; i++) {
                          aux[i] = data[i];
                      }
                      max *= GROW_FACTOR;
                      delete[] data;
                      data = aux;
                   }
              }
      public:
             Stack() {    
                 max = START_LENGHT;
                 data = new T[max];
                 used = 0;
             }

             void push(T data) {
                 allocateIfNeeded();
                 data[used++] = data; // <-- compile error
             }

             T pop() {
                 return data[--used];
             }

             T top() {
                 return data[used-1];
             }

             bool isEmpty() {
                  return used == 0;
             }           
}; 
```

当出现此错误消息时，我已经检查了其他情况，但我认为它们与此无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T12:22:23.747

参数名称`data`将对象成员名称隐藏在`data`函数范围内。要引用它，您必须明确限定它`this->data`：

```
 void push(T data) {
             allocateIfNeeded();
             this->data[used++] = data; // <-- compile error
         } 
```

或者使用某种标识符命名方案（例如在成员前面加上'm_'），这会导致名称参数与成员的名称不同。

# c# - Parallel.ForEach(...) 中的 System.Drawing 内存泄漏

> ID：11063373
> 
> 赞同：2
> 
> 时间：2012-06-16T12:21:21.373
> 
> 标签：c#, memory-leaks, task-parallel-library, system.drawing

我正在使用 System.Drawing 类处理图像列表。如果我在正常的 foreach 循环中处理图像，一切都很好，但是当我使用 Parallel.ForEach 遍历图像（图像我不是指任何一次性 System.Drawing.Image 实例，而是图像的源（url））时，我运行记不清。我的进程变得越来越大（> 1GB）。图形缓冲区似乎没有被释放，尽管我很注意释放所有资源。这可以通过切换到非并行 foreach(...) 来确认。该过程保持在大约 60 MB。

你遇到过这样的问题吗？

```
 // memory "leak". process grows beyound 1GB to infinity
        Parallel.ForEach(urls, url =>
        {
            ImageResizer.DownloadAndResizeImage(url);
        });

        // no memory "leak"
        foreach (string url in urls)
        {
            ImageResizer.DownloadAndResizeImage(url);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:45:57.557

我希望 Parallel.Invoke 在处理时消耗更多内存，因为它试图一次处理超过 1 个图像。Parallel.Invoke 还将等待所有任务在它返回之前完成，因为你说发生“内存不足”错误，我猜它永远不会返回，所以没有办法知道是否发生内存泄漏。

尝试使用 Parallel.Invoke 只处理两个图像，看看在处理完成后你的内存是否会回到已知的起点。如果是这样，那么就没有内存泄漏-您只是在尝试处理超出系统一次可以处理的内容。

如果是这种情况，请尝试使用 Parallel.ForEach 来限制使用 MaxDegreeOfParallelism 的线程数。

我会尝试的第一件事（假设你有 4 个核心）：

```
Parallel.ForEach( 
    urls, 
    new ParallelOptions { MaxDegreeOfParallelism = 4 }, 
    url => { ImageResizer.DownloadAndResizeImage(url); } 
); 
```

编辑：

好吧，问题似乎已经从 Parallel.Invoke 更改为 Parallel.ForEach 并添加了一些代码:)，但这不应该改变我的答案，因为 Parallel.ForEach 也会等到所有任务都完成。

我猜想方法 DownloadAndResizeImage() 可能是罪魁祸首，而不是并行。为了正确地异步处理请求，使用低级网络 API 需要进行大量开发。使用 Microsoft 的 WebClient 或 HttpWebRequest 对象具有已知的瓶颈，这些瓶颈限制了可以通过多线程异步发出的请求数量。我知道这一点，因为我最近尝试了同样的事情并最终自己编写了套接字层。伊皮！

因此，可能发生的情况是，每个请求都已发出，并且一次只处理两个请求，而其他请求将堆积在队列中等待轮到他们。但是在他们等待的时候，所有的对象都在初始化，导致内存增长。最终（如果您有足够的内存），您将开始看到由于执行时间过长的失败请求而发生了一些超时。

有一些免费软件应用程序旨在筛选数百个请求。我建议获取他们的一些低级代码并在您的应用程序中实现它。这是开始学习套接字的好地方。

[http://msdn.microsoft.com/en-us/magazine/cc300760.aspx](http://msdn.microsoft.com/en-us/magazine/cc300760.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:55:35.513

Parallel.ForEach 很容易启动比 CPU 内核更多的线程。看起来内存泄漏*是*因为有 50 个线程或正在运行。

您需要在处理过程中暂停调试器，看看是否有太多线程在运行。

# android - 更改可扩展 ListView Android 中单击的子项的背景颜色

> ID：11063379
> 
> 赞同：4
> 
> 时间：2012-06-16T12:22:08.987
> 
> 标签：android, background-color, expandablelistview

我想更改在 ExpandableListView 中单击的子项的背景颜色。也就是说，当点击任何孩子时，它的背景颜色应该会改变。我正在尝试以这种方式进行操作，但它选择了其他行，而不是已单击的行。

```
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {

    parent.getChildAt(childPosition).setBackgroundColor(Color.DKGRAY);

    return false;
} 
```

请告诉我我可能会错过什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T14:42:21.970

这就是我解决它的方法。

```
View _lastColored;
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {
    _groupPosition = groupPosition;

    if(_lastColored != null)
    {
    _lastColored.setBackgroundColor(Color.TRANSPARENT);
    _lastColored.invalidate();
    }
    _lastColored = v;
    v.setBackgroundColor(Color.rgb(214, 214, 214));

    return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T12:35:25.850

假设您尝试直接引用您的视图并像这样设置背景怎么样，

```
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {

         v.setBackgroundColor(Color.BLUE);

    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:25:06.817

我认为你应该使用

```
public boolean onChildClick(ExpandableListView parent, View v,
        int groupPosition, int childPosition, long id) {

    Object obj = parent.getTag();
      if(obj instanceof View){
             ((View) obj).findViewByID(<id of main ViewGroup of row>).setBackgroundColor(Color.<your normal color>);
         }

    v.findViewByID(<id of main ViewGroup of row>).setBackgroundColor(Color.DKGRAY);

 parent.setTag(v);

    return false;
}

parent.getChildAt(childPosition).findViewByID(<id of main ViewGroup of row >).setBackgroundColor(Color.DKGRAY);

or 

v.findViewByID(<id of main ViewGroup of row>).setBackgroundColor(Color.DKGRAY); 
```

第二个[http://developer.android.com/reference/android/widget/ExpandableListView.OnChildClickListener.html#onChildClick(android.widget.ExpandableListView, android.view.View, int, int, long)](http://developer.android.com/reference/android/widget/ExpandableListView.OnChildClickListener.html#onChildClick%28android.widget.ExpandableListView,%20android.view.View,%20int,%20int,%20long%29)

# sencha-touch - 添加允许在 Sencha 2 中打开外部网站的弹出按钮或图标

> ID：11063388
> 
> 赞同：0
> 
> 时间：2012-06-16T12:23:41.047
> 
> 标签：sencha-touch, extjs

我想添加一些功能或图标，当我单击它时会在该弹出窗口中打开该网站链接的新弹出窗口。我该如何添加它。

```
 {
        xtype: "list",
        store: "Plays",
        itemId:"playsList",
        loadingText: "Loading PlaysList...",
        emptyText: '<div class="notes-list-empty-text">No PlayList found.</div>',
        onItemDisclosure: true,
        draggable:true,
        itemTpl: '<div class="list-item-title">{title}</div><div class="list-item-narrative">{duration}</div><div class="list-item-hide">{hidden}</div>',
                  }, 
```

我想在 onItemDisclosure 按钮之前添加，即 => 我在下面给出了详细信息。所以当我点击它时，在弹出窗口中打开该特定网站

屏幕上的输出是这样的

[http://www.something.com](http://www.something.com) 16 =>
[http://www.some.com](http://www.some.com) 18 =>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:14:46.333

我希望这有帮助。:)

```
var outerPanel = new Ext.Panel({
    fullscreen: true,
    style: {
        background:'#ffffff',
    },
    items: [
        {
            xtype: 'button',
            text: 'click to open', 
            handler:function() {
                var overlay = new Ext.Panel({
                    floating : true,
                    modal:true,
                    centered : true,
                    width : 700,
                    height : 500,
                    styleHtmlContent: true, 
                    html: '<div><iframe style="width:100%;height:100%;" src="http://www.some.com/">Your device does not support iframes.</iframe></div>',
                    items: [],
                }).show('pop', true);
            }
        }
    ]
}) 
```

![在此处输入图像描述](../Images/7c555021b1be05f5dafa8d74a89b4ae4.png)

**再见**

# html - 像这样的动态网站而不是基于纯 AJAX 的网站有什么优势吗？

> ID：11063392
> 
> 赞同：0
> 
> 时间：2012-06-16T12:24:18.813
> 
> 标签：html, ajax

我将动态网站分为两种：

第一个使用例如 PHP ，让 PHP 连接一个 HTML 页面，然后推送回客户端；

第二种使用 HTML 模板，所有 Web 界面仅提供 JSON 数据，在加载 HTML 页面时动态提供所有字段。

前一种网站的优势是什么？那么缓存呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:32:10.250

基于 PHP 的网站更容易制作、更容易缓存、索引更好，但内容却少得多。

基于 Ajax 的站点更具动态性，如果做得好，感觉会更快，因为您可能会异步接收许多小数据来更新需要更新的内容。当他们成长时，他们需要编码人员更多的纪律和能力。制作它们的关键是真正了解基础技术。

在这些类别中，我将添加服务器不是像 PHP 这样的纯被动技术但支持后台线程和复杂计算的情况（我使用的那些）。例如，您可以对这些站点使用 java 或 Go。对于使用 websockets 将数据从服务器推送到客户端的基于 ajax 的站点来说，这更加方便。

与 LAMP 不同的是，Ajax 应用程序并不是您必须实现的一种风格。您必须根据您的精确需求选择您的工具（例如用于缩小、存储等），在客户端，可以使用“原始”技术（html+js）制作基于 Ajax 的网站，我个人不这样做我不喜欢使用大框架，但你会发现 jquery 有助于使代码更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:35:54.083

我认为前一种网站在你的需求很小的时候更有用，因为没有适当模板的动态 html 可能会导致意大利面条代码的混乱，但它在原型设计阶段肯定更敏捷，他们不需要 JS，只是一个插件在网络服务器上。

尽管如此，Ajax（以及一般的 RIA 站点）更具动态性，而且它们现在肯定会在企业 Web 开发中占据上风。它们更难开始，因为很多时候你有更多的框架和依赖项，但从长远来看，使用通用格式 (JSON)、标准库等在维护和功能增长方面具有真正的优势。

关于缓存，我认为以清晰的方式组织丰富的动态站点也可以改进缓存，因为您可以使用例如 JSON 结构来实现对服务器的请求，并使用键值缓存来检索已经生成的 HTML 文件。

# ffmpeg - ffmpeg给出文本未找到错误

> ID：11063394
> 
> 赞同：0
> 
> 时间：2012-06-16T12:24:45.727
> 
> 标签：ffmpeg, quicktime

arial.ttf 存在于 C:\Windows\Fonts 文件夹中。跑步

ffmpeg.exe -i D:\imagesequence\test.mov -vf drawtext="arial.ttf=':text='TEST'" D:\imagesequence\testo.mov

或者

ffmpeg.exe -i D:\imagesequence\test.%04d.jpg -vf drawtext="arial.ttf=':text='TEST'" D:\imagesequence\testo.mov

结果是

```
ffmpeg.exe -i D:\imagesequence\test.%04d.jpg -vf drawtext=fontf
ile="arial.ttf=':text='TEST'" D:\imagesequence\testo.mov
ffmpeg version N-34549-g13b7781, Copyright (c) 2000-2011 the FFmpeg developers
  built on Nov  6 2011 22:02:08 with gcc 4.6.1
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-ru
ntime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libope
ncore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enable-libgsm --en
able-libmp3lame --enable-libopenjpeg --enable-librtmp --enable-libschroedinger -
-enable-libspeex --enable-libtheora --enable-libvo-aacenc --enable-libvo-amrwben
c --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-
libxvid --enable-zlib
  libavutil    51\. 24\. 0 / 51\. 24\. 0
  libavcodec   53\. 28\. 0 / 53\. 28\. 0
  libavformat  53\. 19\. 0 / 53\. 19\. 0
  libavdevice  53\.  4\. 0 / 53\.  4\. 0
  libavfilter   2\. 47\. 0 /  2\. 47\. 0
  libswscale    2\.  1\. 0 /  2\.  1\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
Input #0, image2, from 'D:\imagesequence\test.%04d.jpg':
  Duration: 00:00:01.24, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: mjpeg, yuvj420p, 768x576 [SAR 1:1 DAR 4:3], 25 fps, 25 t
br, 25 tbn, 25 tbc
File 'D:\imagesequence\testo.mov' already exists. Overwrite ? [y/N] y
w:768 h:576 pixfmt:yuvj420p tb:1/1000000 sar:1/1 sws_param:
[drawtext @ 01C80260] Could not load fontface from file 'arial.ttf=': cannot ope
n resource
Error initializing filter 'drawtext' with args 'fontfile=arial.ttf=:text=TEST'
Error opening filters! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:23:15.887

LordNeckbeard 是正确的，您需要使用“fontfile”指定您尝试使用的字体的完整路径。此外，如果您的输入和输出文件位于同一目录中，则无需指定它们各自的目录（省去了命令行的麻烦）。在您的情况下，这应该有效：

```
ffmpeg.exe -i test.mov -vf drawtext=fontfile=/Windows/Fonts/arial.ttf:text="TEST" testo.mov 
```

# android - 检索 Listview 行数据（由两个 TextView 组成）

> ID：11063397
> 
> 赞同：1
> 
> 时间：2012-06-16T12:24:55.180
> 
> 标签：android, android-layout, android-listview, classcastexception, onclicklistener

我有一个`ListView`。每行`ListView`包含 2 `TextView`。

我已经实现`setOnItemClickListener`如下`ListView`：

```
list.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            // String item = list.getItemAtPosition(position).toString();
            TextView item =(TextView)list.getItemAtPosition(position);
        }}); 
```

* * *

但它给了我**'ClassCastException'**如下：

```
java.lang.ClassCastException: java.lang.Integer
at com.idealake.lic.Activities.PlansActivity$1.onItemClick(PlansActivity.java:62)
at android.widget.AdapterView.performItemClick(AdapterView.java:284)
at android.widget.ListView.performItemClick(ListView.java:3513) 
```

* * *

我的疑问是：

*   如何检索行`TextView`内当前的内容`ListView`。
*   在检索数据时如何区分 1st`TextView`和 2nd ？`TextView`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:27:41.373

使用**findViewbyId()**

代替，

```
 TextView item =(TextView)list.getItemAtPosition(position); 
```

尝试这个，

```
 TextView item =(TextView)list.findViewbyId(R.id.textviewID); 
```

如果您发现这不起作用，那么只需像这样尝试使用您的视图对象，

```
 TextView item =(TextView)view.findViewbyId(R.id.textviewID); 
```

Bcoz 在 ItemCLick 侦听器上，将为您提供您尝试引用的视图中的确切元素。所以你不需要在这里再次使用位置来找到你的TextView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:30:02.793

优化方式是::

```
TextView textview1 =(TextView)view.findViewById(R.id.textview1);
                              ^^^^
TextView textview2 =(TextView)view.findViewById(R.id.textview2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T12:27:30.063

你可以`setTag(id, value)`在你的`getView()`和`getTag(id)`在`onItemClick()`.

```
public View getView(int position, View convertView, ViewGroup parent) {

    convertView = getLayoutInflater().inflate(R.layout.xxx, null);
    TextView mTextView1 = (TextView) convertView .findViewById(R.id.txt1);
    TextView mTextView2 = (TextView) convertView .findViewById(R.id.txt2);

    convertView.setTag(R.id.txt1, mTextView1);
    convertView.setTag(R.id.txt2, mTextView2);
    return convertView;
} 
```

在你的 List 的 Click 监听器中这样做

```
list.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
  @Override
  public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        TextView mTextView1 =(TextView)view.getTag(R.id.txt1);
        TextView mTextView2 =(TextView)view.getTag(R.id.txt2);
    }}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T12:38:29.717

```
list.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            TextView item =(TextView)view.findViewById(R.id.textview1);
            TextView item =(TextView)view.findViewById(R.id.textview2);

        }}); 
```

# jquery - 在选择器中指定动态类名时出现 jQuery 语法错误

> ID：11063399
> 
> 赞同：1
> 
> 时间：2012-06-16T12:24:59.677
> 
> 标签：jquery, syntax, click, append

考虑以下代码：

```
$(document).ready(function() {
    $("body").append("<div class='outer'><span class='inner'>Click me</span></div>");
    $("html").click(function(event) {
        var targetClass = event.target.className;
        if ($("." + targetClass).parents().hasClass("outer")) {
            alert("true");
        }
    });
}); 
```

和 HTML：

```
<div class="outer">
    <span class="inner">
        Click me!
    </span>
</div> 
```

由于某些未知原因，当我单击页面上的任意位置时，Firebug 会引发此错误：

![在此处输入图像描述](../Images/95a18d6849cf32a0248dff37f81dc430.png)

有趣的是，这仅在内容被动态附加到页面时才会发生。如果我删除 append 语句，而只是将其粘贴到页面本身，则不会引发错误并且一切正常。

你对这个异常有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:32:22.683

您将`click`-event 附加到`html`，因此每个元素都可以成为目标。当您单击某个没有任何类的元素时，您会收到`$(".")`此错误。

您只需要检查是否`targetClass`为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:42:34.057

~~如图所示，您的代码在 Chrome 中对我有用，但如果您说~~ `$(".")`的是，正如 Smileek 所说，Firefox 的行为可能会有所不同，如果您单击一个没有类的元素，实际上您正在做的事情，这会导致错误，因为这是一个无效的选择器。

但即使忽略您当前遇到的错误，我也不认为这一行：

```
if ($("." + targetClass).parents().hasClass("outer")) { 
```

正在做你认为的事情。它说要找到该类的*所有*元素，然后找到这些元素的*所有*父元素，然后调用`.hasClass()`结果元素集，根据[.hasClass()` 文档](http://api.jquery.com/hasClass/)，如果“任何匹配的元素被分配给给定的类”。这仍然适用于您显示的 html，因为您只有两个元素，但是...

如果你想测试“被点击元素的父元素是否有“外部”类，试试这个：

```
if ($(event.target).parent().hasClass("outer")) { 
```

演示：http: [//jsfiddle.net/PCTnS/](http://jsfiddle.net/PCTnS/)

这不仅更好地反映了我想象的您正在尝试做的事情，而且还避免了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T12:32:53.477

采用

```
$("body").append("<div class=\"outer\"><span class=\"inner\">Click me</span></div>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T12:33:46.460

当您使用 javascript 修改正文时，您必须使用[live](http://api.jquery.com/live/)：

```
$("html").live('click', function() {.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T12:35:35.393

我认为问题在于，当您单击`inner`实际上是在单击时`outer`，请尝试：

```
event.stopPropagation();
var targetClass = event.target.className; 
```

# php - preg_match 空白

> ID：11063407
> 
> 赞同：0
> 
> 时间：2012-06-16T12:26:19.127
> 
> 标签：php

我想问你关于 preg_match 下面概述的正则表达式。我想表达他们同意添加空白。对于一个和另一个表达。我知道空格由 /s 表示，但我无法处理它。请帮忙

```
 'string' => array(
        'pattern' => '^([a-zA-Z ]+)$',
    ),

    'numericString' => array(
        'pattern' => '^[a-zA-Z0-9]+$',
    )

    'numeric' => array(
        'pattern' => '^[0-9]+$',
    ), 
```

请帮助我需要为任何添加空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:30:05.193

空格`\s`在 PCRE 语法中由 表示，而不是`/s`. 试试这个：

```
'string' => array(
    'pattern' => '^([a-zA-Z\s]+)$',
),

'numericString' => array(
    'pattern' => '^[a-zA-Z0-9\s]+$',
)

'numeric' => array(
    'pattern' => '^[0-9\s]+$',
), 
```

您可能会发现此站点有助于测试具有匹配可视化的正则表达式： [http ://www.regexpal.com/](http://www.regexpal.com/)

# sql - MS Access SQL：聚合最小值但检索其他字段

> ID：11063408
> 
> 赞同：2
> 
> 时间：2012-06-16T12:26:20.203
> 
> 标签：sql, ms-access, ms-access-2003

这可能是一个非常简单的问题，但我不知道如何在 MS Access 中解决它。以前可能已经回答过，但我一直找不到。

我有一个包含 3 列的表：col1 是对象 ID，col2 和 col3 是测量值。我已经构建了一个查询，以便为每个对象我们在 col2 中获得相应的最小值。这适用于简单的分组查询。问题是当我尝试拉 col3（与找到最小值的行相关联）时，它将不再正确分组。

我一直在玩 group-by 子句并试图分成几个查询，但到目前为止还没有运气。

这是我拥有（左）和想要获得（右）的示例：

```
col1 col2 col3 ---> col1 minC2 col3
---- ---- ---- ---- ---- ----
1 0 1.8 1 0 1.8   
1 1 1.4 2 2 2.5
2 4 1.1 3 1 7.6
2 6 4.7
2 2 2.5
3 4 3.3
3 1 7.6

```

我希望这是有道理的。感谢任何帮助/MS Access SQL 语法...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:49:23.987

假设你想要得到的第二行是 [2 2 2.5]，这就是你要找的：

```
select a.col1, a.colm, m.col3
from
    (
        select col1, min(col2) as colm
        from test
        group by col1
    ) as a
inner join test m on a.col1 = m.col1 and a.colm = m.col2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:50:28.553

您可以使用子查询：

```
select t.col1, tt.col2 , tt.col3
from (
      SELECT col1, Min(col2) AS mcol2
      FROM Tmp
      group by col1) t,  tmp tt
where t.col1 =  tt.col1 and t.mcol2 = tt.col2 
```

# c++ - 使用 istream 对象测试条件

> ID：11063410
> 
> 赞同：0
> 
> 时间：2012-06-16T12:26:22.187
> 
> 标签：c++

我试图使用下面的代码动态读取大量数字`EOF`，最后是：

```
vector<double> data;
double x;
while (cin >> x)
{
    data.pushback(x);
} 
```

这种方法效果很好，但我想知道下面的表达式发生了什么

```
cin >> x 
```

是的，我知道它是用来输入数据的，但是我怎么能用它来测试条件。
下面的表达式会发生什么：

```
while (cin) or if (cin) 
```

返回什么`cin`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:36:54.187

[`cin`](http://en.cppreference.com/w/cpp/io/cin)类 class 的对象`istream`，可以强制转换为 a `void*`，如果发生错误，返回值为空指针（此指针可隐式转换为`bool`）。

请参阅[此处](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)以供参考。

# c++ - 错误：'itoa' 未在此范围内声明

> ID：11063413
> 
> 赞同：8
> 
> 时间：2012-06-16T12:26:35.507
> 
> 标签：c++

我收到以下错误：
prog.cpp: In member function 'void Sequence::GetSequence()':
prog.cpp:45: error: 'itoa' was not declared in this scope

我已经包含 cstdlib 头文件，但它不起作用。

```
#include <iostream>
#include <string>
#include <vector>
#include <map>
#include <algorithm>
#include <functional>
using namespace std;

template<typename T>
struct predicate :
public binary_function<T, T, bool>
{
    bool operator() (const T& l,const T &r) const
    {
          return l < r;
    }
};

class Sequence
{
    public:
    Sequence(vector<string> &v)
    { /* trimmed */ }

void GetSequence(void)
{
    string indices = "";
    char buf[16];

    for( map<int, string>::iterator
            i = m.begin(); i != m.end(); ++i )
    {
indices = indices
                  + string(itoa((i->first), buf, 10));
    }

    SortedSequence("", indices);
}

// --- trimmed --- 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T12:32:59.063

标准中没有`itoa`，但在 C++11 中，您可以使用[std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-16T12:42:57.770

在 C++11 中，您可以使用`std::to_string`. 如果这对您不可用，您可以使用`std::stringstream`：

```
std::stringstream ss; int x = 23;
ss << x;
std::string str = ss.str(); 
```

如果这太冗长，则有[boost::lexical_cast](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)。有一些关于 and 的性能的抱怨`lexical_cast`，`std::stringstream`所以请注意这对您是否重要。

另一种选择是使用[Boost.Karma](http://www.boost.org/doc/libs/1_49_0/libs/spirit/doc/html/spirit/karma.html)，一个 Spirit 的子库。它在大多数[基准测试](http://www.boost.org/doc/libs/1_42_0/libs/spirit/doc/html/spirit/karma/performance_measurements/numeric_performance/int_performance.html)中都领先。

通常，`itoa`这是一个坏主意。它既不是 C 也不是 C++ 标准的一部分。您可以注意识别支持它的平台并有条件地使用它，但是当有更好的解决方案时，为什么要这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-02T19:13:39.547

我发现至少在 4.9.3 之前在[MinGW](https://sourceforge.net/projects/mingw/)`itoa` GCC 中不可用，但在[MinGW-w64](https://sourceforge.net/projects/mingw-w64/) GCC 5.3.0**中可用。**

 **它猜测它的缺失与[损坏的 vswprintf](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=37522)问题有关，这也导致了 MinGW 的丢失[`std::stoi`](https://stackoverflow.com/questions/8542221/stdstoi-doesnt-exist-in-g-4-6-1-on-mingw)和丢失。[`std::to_string`](https://stackoverflow.com/questions/12975341/to-string-is-not-a-member-of-std-says-so-g#comment63754740_12975602)**

# javascript - 未渲 染场景（three.js）

> ID：11063418
> 
> 赞同：3
> 
> 时间：2012-06-16T12:27:50.250
> 
> 标签：javascript, webgl, three.js

我在 three.js 中创建了一个简单的场景，但它不适用于画布渲染器（但它应该可以工作......）

代码：http: [//jsfiddle.net/PRkcJ/](http://jsfiddle.net/PRkcJ/)

只有在我使用 webGLrenderer 时才有效。但为什么？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:09:03.573

你得到的是白色背景上的白色飞机。

定向光的光位置被视为方向向量，它必须是单位长度。

如果您执行以下操作，您的代码将有效：

```
light.position.set(-100, 150, 0).normalize(); 
```

小提琴：http: [//jsfiddle.net/PRkcJ/1/](http://jsfiddle.net/PRkcJ/1/)

# java - 使用 DOM 对动态内容进行 Xml 解析

> ID：11063419
> 
> 赞同：0
> 
> 时间：2012-06-16T12:27:55.960
> 
> 标签：java, dom, xml-parsing, sax

我想在 java 中使用 DOM 解析器解析具有动态内容的 xml 文件。我只得到静态内容。如果有人知道请分享链接

谢谢巴塔卡拉伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:32:01.467

您可以使用 JDOM 或 DOM4J 来解析 XML 文件。这是链接->

[http://www.jdom.org/](http://www.jdom.org/)

[http://dom4j.sourceforge.net/](http://dom4j.sourceforge.net/)

# android - 数组类型的自定义属性

> ID：11063420
> 
> 赞同：6
> 
> 时间：2012-06-16T12:27:58.597
> 
> 标签：android, xml, custom-attributes

有人可以帮助我如何定义“字符串数组”类型的自定义属性，因为我找不到定义数组的格式。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="MyCustomWidget">
        <attr name="myarray" format="string-array"/>
    </declare-styleable>
</resources> 
```

这段代码似乎不起作用。我的“格式”应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T10:54:46.243

而不是使用

```
 format="string-array" 
```

我用了

```
 format="reference" 
```

并将其引用到字符串数组资源。

# c++ - WriteFile 钩子不会捕获写入文件操作

> ID：11063424
> 
> 赞同：2
> 
> 时间：2012-06-16T12:28:51.047
> 
> 标签：c++, winapi, hook, detours, writefile

我有一个应用程序，它将一些文本数据写入文件。我正在尝试做的是挂钩写作过程。我迷上了 MS Detours、CreateFile、WriteFile 和 WriteFileEx 函数。CreateFile 正确捕获这些文本文件的创建/打开，但 WriteFile 的钩子没有。它捕获了许多其他的东西，但不是这些。挂钩工作正常。我已经检查过了。

进程监视器还将这些写入操作显示为 WriteFile 操作（广告名称 IRP_MJ_WRITE 和 FASTIO_WRITE），就像我自己写东西时一样（我的操作挂钩正常工作）

这里发生了什么？除了WriteFile之外，还有其他方法可以将内容写入文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:50:14.907

它不是 Microsoft Detours 解决方案，但您可以尝试使用我们的 Deviare 挂钩控制台来查看是否在那里调用了函数。它是用 C# 编写的，控制台的源代码包含在发行版中。移植到 C++ 非常容易，可以自由使用（加载 Deviare 组件时只会出现飞溅）。可在此处下载[http://www.nektra.com/products/deviare-api-hook-windows/](http://www.nektra.com/products/deviare-api-hook-windows/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:41:45.847

在 Windows 中，您可以在调用 CreateFile 后使用*CreateFileMapping**和*MapViewOfFile*函数*对文件进行内存映射。完成此操作后，您可以使用任何内存函数（如*memcpy*）写入文件。对于小文本文件，Windows 默认会执行此操作，这可能是您的情况。

# phpmyadmin - Wamp MySql 无法正常工作

> ID：11063425
> 
> 赞同：0
> 
> 时间：2012-06-16T12:28:57.537
> 
> 标签：phpmyadmin, wamp

我整个早上都在谷歌上，在这里。我遇到的问题是，我试图将密码从 wamp 上的默认“”值更改为其他值。

我正在开发一个应用程序，该应用程序是在我的 Mac 上的 MAMP 上开始的，由于我在 MAC 和 WINDOWS 之间来回切换，我不想使用两个版本的应用程序（一个用于 mamp，另一个用于 wamp）就登录详细信息而言）所以我只想更改 WAMP 上的通行证。

我已经更改了 mysql 应用程序“权限”部分的密码，这就是我开始遇到“拒绝访问等”问题的时候

我还（在某处看到这里之后）更改了 config.inc 文件中的密码以反映我的 phpmyadmin 应用程序用户帐户密码更改，一直在刷新/重新启动服务器，但我仍然被锁定。

我 100% 肯定我输入的详细信息是正确的。

快进到现在，我很沮丧，决定重新安装，因为我被锁定了，现在当我启动 wamp 服务器并尝试访问 phpmyadmin 时，我仍然被锁定（即使在重新安装之后）并且不允许我连接“ localhost”，我必须连接到 127.0.0.1

知道为什么会发生这一切吗？因为当我尝试更改密码时，我仍然无法连接到任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:34:30.540

我不知道为什么，但总是为我工作，在启动 WAMP 之前总是关闭 Skype，当 wamp 准备好时打开 Skype。

# javascript - 从子目录发出ajax请求

> ID：11063428
> 
> 赞同：0
> 
> 时间：2012-06-16T12:29:24.943
> 
> 标签：javascript, ajax, jsp, request

我的问题是，如何从子目录中的页面发出 ajax 请求并获得响应。在这里，我的页面`index.jsp`放置在一个子目录`/vf2`中，其中我包含了脚本文件

```
<script src="../script/testscript.js"></script> 
```

## 测试脚本.js

```
function getPlaceFromIP3(){

        var ipAdd="1";
         var params ="ipAdd="+ipAdd;     
         var resultStringX = $.ajax({
             type: "GET",
             url:"result_page.jsp",
             data: params,
             async: false
                }).responseText;
         alert(resultStringX);

        } 
```

该页面`result_page.jsp`包含在`public_html`目录本身中。当我调用该函数时，`index.jsp`我收到一个找不到页面的消息。我如何从子目录向主目录中的页面发送请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:32:04.900

如果它是一个正常的链接，你将如何链接到它？同样的事情也适用于这里。对文件使用适当的相对 url。从根目录启动 URL。

如果文件位于`http://www.example.com/result_page.jsp`，它将是

```
url:"/result_page.jsp", 
```

# php - 如果语句捷径或改进？

> ID：11063431
> 
> 赞同：0
> 
> 时间：2012-06-16T12:29:37.190
> 
> 标签：php

有没有办法改进以下`if`语句块？我只是想知道是否有人可以使这段代码更简单、更干净。

```
if($key == 'insert'){
    $permission[] = '1';
}else if($key == 'inter-insert'){
    $permission[] = '2';
}else if($key == 'intra-insert'){
    $permission[] = '3';
}else if($key == 'view'){
    $permission[] = '4';
}else if($key == 'inter-view'){
    $permission[] = '5';
}else if($key == 'intra-view'){
    $permission[] = '6';
}else if($key == 'update'){
    $permission[] = '7';
}else if($key == 'inter-update'){
    $permission[] = '8';
}else if($key == 'intra-update'){
    $permission[] = '9';
}else if($key == 'delete'){
    $permission[] = '10';
}else if($key == 'inter-delete'){
    $permission[] = '11';
}else if($key == 'intra-delete'){
    $permission[] = '12';
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T12:32:54.147

一个[`switch`声明](http://php.net/manual/en/control-structures.switch.php)会让你的生活更简单一些。

然而，在这种简单的情况下，它是从一个值到另一个值的简单赋值，您也可以使用数组：

```
$permissions = array(
 "insert" =>       "1", 
 "intra-insert" => "2",
 "inter-insert" => "3",
 // etc.
);

isset($permissions[$key]) && $permission[] = $permissions[$key]; 
```

或另一种变体：

```
$keyExists = array_key_exists($key, $permissions);
if ($keyExists) {
    $permission[] = $permissions[$key];
} else {
    echo "Key not found!"; // or whatever   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:33:24.977

你可以试试：

```
$permission[] = $key == 'insert' ? '1' :
                $key == 'inter-insert' ? '2' :
                $key == 'intra-insert' ? '3' : 
                $key == 'view' ? '4' :
                // you get the idea... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:35:24.370

你可以使用 switch，就像在 C 中一样：

```
switch ($i) {
case 0:
    echo "i equals 0";
    break;
case 1:
    echo "i equals 1";
    break;
case 2:
    echo "i equals 2";
    break;
default: break;
} 
```

# github - 如何为我的项目设置 github 存储库

> ID：11063433
> 
> 赞同：2
> 
> 时间：2012-06-16T12:29:46.257
> 
> 标签：github

我是**Github**的新手，想为我的项目设置一个帐户，我将用**Ruby on Rails**编写它。我正在使用**Virtual Box并在****Ubuntu**上设置我的 VM 操作系统。我为我的项目测试创建了一个 Github 帐户和一个新的 Repo。这些是我到目前为止所经历的步骤：

```
 cd test
    git config --global user.name ’My Name’
    git config --global user.email ’Myemailaddress’
    git init
    touch README
    add README
    git remote add origin git@github.com:myusername/myreponame.git
    git push origin master 
```

直到这些步骤一切都很好，然后我创建了我的应用程序

```
 rails new test -T 
```

现在在这一步之后，我真的不知道下一步该做什么。我应该将我所有的文件和目录添加到 Github Repo 还是只添加我要修改的那些。将所有文件和目录添加在一起的 git 语法是什么？如何提交和保存提交？我真的很感激任何建议......       

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:32:01.917

现在，将您的项目导入 GIT，如下所示：

```
git add .
git commit 
```

[http://www.manniwood.com/starting_a_project_with_git.html](http://www.manniwood.com/starting_a_project_with_git.html)

您可能还想将您的提交推送到 github：

```
git push 
```

但是，如上所述，您最好通过教程：为了能够从 git 中受益，您需要了解自己在做什么，像“do X”这样的简单答案在这里没有多大帮助.

我最喜欢的是[Pro Git——](http://git-scm.com/book)你需要从一开始就完成它[2.5 Git 基础——](http://git-scm.com/book/en/Git-Basics-Working-with-Remotes)至少使用遥控器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:39:52.713

只需在您的终端/评论提示符中执行此操作

```
~/.ssh
    ls
    ssh-keygen -t rsa -C "your register mail-id"
    ls
    vim id_rsa.pub

copy the manually keys 4 line and paste it in git Account settings--> ssh key--> add key

git config --global user.name "your register Name"
    git config --global user.email "your register mail-id"

    mkdir ~/YourFolderName
    cd ~/YourFolderName

    git init

select your user name in that you created repository
from that select currently upload repository and
select from git@github.com:registerName/ repository_name.git

    git clone git@github.com:registerName/repository_name.git

    git add *
    cd repository_name

    git add *
    git commit -m "repository_name"
    git push origin master

    cd
    cd ~/.ssh 
```

# mysql - 使用 JOIN ON 和 JOIN ON WHERE 的不同行为

> ID：11063445
> 
> 赞同：1
> 
> 时间：2012-06-16T12:31:04.947
> 
> 标签：mysql, join

**[我有两个表，如此处](http://sqlfiddle.com/#!2/15203/20)**所示**。**

我正在尝试获取`name`和`register`变量 WHEN`register`变量不存在值。

使用下面的查询我得到的结果显示**[在这里](http://sqlfiddle.com/#!2/15203/18)。**

```
SELECT t2.name, t1.register, t1.mydate 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id
WHERE (t1.register = 'absent' OR t1.register is null) 
```

当我使用下面的查询时，我得到 INCORRECT 结果，如下**[所示](http://sqlfiddle.com/#!2/15203/19)。**

```
SELECT t2.name, t1.register, t1.mydate 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id AND (t1.register = 'absent' OR t1.register is null) 
```

我的问题是：为什么在上述情况下我得到不同的结果。我在 ON 子句本身中使用 WHERE 条件，因此我不需要编写 WHERE 条件。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:37:36.943

如果将`"t1.register = 'absent' OR t1.register is null"`条件放在 WHERE 子句中，它将在联接之后应用，而如果将其放在 ON 子句中，则会影响联接。

这是绝对正常和理想的行为:)

在这里你必须把它放在 WHERE 子句中:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:09:16.797

我通常不会使用右连接，而是使用左连接......我知道它们实际上是相同的，只是你想要记录的连接中的哪个表。正如 Olivier 提到的，WHERE 子句在连接条件之后应用。我通常会先问我想要什么......在你的情况下，我希望所有用户都列出，而不管注册时间......所以，我简单地把它说成

```
select
      u.Name,
      t.register,
      t.myDate
   from
      users u
         LEFT JOIN time t
            on u.user_id = t.user_id 
```

我的左表（总是想要的）是用户......时间是右表，我总是试图保持我的“ON”连接条件代表左/右相关性以提高可读性。

现在，这不是您想要的，而是我开始的地方……现在，如何应用“缺席”状态。由于上面已经获得了所有用户，并且您只想查看出现“缺席”的条目，请将其添加到 JOIN 部分，因为这些是您有兴趣查看的唯一条目。

```
select
      u.Name,
      t.register,
      t.myDate
   from
      users u
         LEFT JOIN time t
            on u.user_id = t.user_id
          AND t.register = 'absent' 
```

所以，只有“缺席”的记录才会显示他们各自的寄存器和 mydate 值......任何其他记录，你仍然会得到每个人。不需要 WHERE 子句。

但是，如果说您只想要特定类型或状态的用户，您可以添加它以限制您想要查看的那些“用户”......例如

```
select
      u.Name,
      t.register,
      t.myDate
   from
      users u
         LEFT JOIN time t
            on u.user_id = t.user_id
          AND t.register = 'absent'
   where
      u.SomeStatus = whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:06:22.743

您的问题与查询的执行顺序有关。正常顺序是

```
 From
 JOIN
 WHERE
 SELECT 
```

所以，在第一个例子中

```
SELECT t2.name, t1.register, t1.mydate 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id
WHERE (t1.register = 'absent' OR t1.register is null) 
```

首先，两个表将根据条件连接在一起（使用内连接）`t2.user_id=t1.user_id`，然后将**时间表**中所有不匹配的行添加到临时结果表中。最后，将 WHERE 子句`(t1.register = 'absent' OR t1.register is null)`中的条件应用于临时表以产生最终结果。

在第二个例子中

```
SELECT t2.name, t1.register, t1.mydate 
FROM time t1
RIGHT JOIN user t2
ON t2.user_id=t1.user_id AND (t1.register = 'absent' OR t1.register is null) 
```

首先，两个表根据条件连接在一起（使用内连接）`t2.user_id=t1.user_id AND (t1.register = 'absent' OR t1.register is null)`。**接下来，将time**中所有不匹配的行添加到结果中。

尽管如此，这两个查询的结果是不同的。

如果您使用**INNER JOIN**，那么 WHERE 或 ON 子句的条件会产生相同的结果。仅当您使用**OUTER JOIN (LEFT/RIGHT/CROSS)**时，它们才会有所不同。

# fluent-nhibernate - 为什么这个 FluentNHibernate 查询会加载所有内容？

> ID：11063448
> 
> 赞同：0
> 
> 时间：2012-06-16T12:31:44.413
> 
> 标签：fluent-nhibernate

我有以下查询：

```
MyRepository.Query<MyObject>().SingleOrDefault(x => x.AProperty == aValue); 
```

它返回正确的 MyObject，但它开始花费越来越多的时间。当我使用 SQL Server Profiler 查看时，我看到它通过从数据库中为 MyObject 和相关对象选择一行和一行来将我的**所有MyObjects 加载到数据库中。**当数据库增长时，对于一个非常简单的查询，这会变成成千上万的选择。

另一方面，这个查询：

```
Session.QueryOver<MyObject>().Where(x => x.AProperty == aValue).SingleOrDefault<MyObject>() 
```

不加载所有内容（它创建一个选择语句而不是数千个）。

为什么？有没有办法告诉 Query 不要加载所有内容？或者这就是 Linq 查询的工作方式？我问的原因是我有一个应用程序，其中所有查询都是使用 Query 进行的。将其更改为 QueryOver 需要一些工作。有任何想法吗？

一些细节：

*   *Query*是 NHibernate.Linq 命名空间 (NHibernate v 3.1.0.4000) 的扩展方法
*   我的 FluentNHibernate 版本是 1.2.0.712
*   我有这个约定：Conventions.Add(FluentNHibernate.Conventions.Helpers.DefaultLazy.Never());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:51:33.590

在看了一天多之后，我终于意识到了问题所在。这真的很简单，但很难从问题中的信息中回答。如果其他人有同样的经历，这是正确的答案；

MyRepository 有这样的方法；

```
public List<T> Query<T>() where T : DomainEntity
{
    using (var session = _sessionSource.CreateSession())
    {
        using (var transaction = session.BeginTransaction())
        {
            var result = session.Query<T>();
            transaction.Commit();
            return result.ToList();
        }
    }
} 
```

这意味着我首先**加载**所有内容（使用`session.Query<T>()`），然后才查询结果（使用`MyRepository.Query<MyObject>().SingleOrDefault(x => x.AProperty == aValue);` .

当然，非常糟糕。复制别人的代码并不总是聪明的......

如何避免？只是不要查询查询。

# object - htmlagilitypack 使用 2 个 htmldocument 对象时的奇怪行为

> ID：11063450
> 
> 赞同：0
> 
> 时间：2012-06-16T12:31:57.987
> 
> 标签：object, html-agility-pack, dom, selectsinglenode

这是代码：

```
HtmlDocument htmlDoc = new HtmlDocument();
HtmlDocument segment = new HtmlDocument();

htmlDoc.OptionWriteEmptyNodes = true;
segment.OptionWriteEmptyNodes = true;            

htmlDoc.Load("sourcepath");
segment.Load("sourcepath");

//Fix HtmlAgilityPack bug with ending tag at xmldeclaration
var newNodeStr = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
var newNode = HtmlNode.CreateNode(newNodeStr);
htmlDoc.DocumentNode.ReplaceChild(newNode, htmlDoc.DocumentNode.FirstChild);
segment.DocumentNode.ReplaceChild(newNode, segment.DocumentNode.FirstChild);    

HtmlNode sbodyNode = segment.DocumentNode.SelectSingleNode("//body");
if (sbodyNode != null)
sbodyNode.RemoveAllChildren();

HtmlNode bodyNode = htmlDoc.DocumentNode.SelectSingleNode("//body");
int numberOfChilds = bodyNode.ChildNodes.Count;
MessageBox.Show(numberOfChilds.ToString());

segment.Save("destpath1", Encoding.UTF8);
htmlDoc.Save("destpath2", Encoding.UTF8); 
```

输入是简单的 xhtml。我想修改一个 xhtml 文件（由 htmlDoc 表示）。为此，我创建了另一个 HtmlDocument 对象（段，将相同的 xhtml 加载到其中）。作为第一步，我试图剥离 body 元素的所有子元素。然后我会使用 htmlDoc 对象添加一些元素。上面的问题是从段中删除这些也会影响 htmlDoc（另一个对象）。因此 MessageBox 将始终显示 0。最重要的是，如果我查看由 Save 函数生成的输出，htmlDoc 将在 下有元素，这意味着 MessageBox 应该显示它们的数量（据我猜测）。（注意：如果我取消注释 RemoveAllChildren() 行，然后 MessageBox 显示正确的数字。）我认为它是一些微不足道的东西，但对我来说有点奇怪。谢谢你的帮助。

**更新：**对不起，我没有发布完整的代码，因为我认为有些行无关紧要，但看起来不是。如果我在 Loads 之后注释掉这 4 行，我会得到正确的数字，并且它会像预期的那样工作。问题是为什么这些线会“有害”。（我写这些行是为了修复输出，因为 agilitypack 使 xml 标头结束标记 /> 而不是？>）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:40:15.290

以下解决了我的问题，但不知道为什么。如果有人愿意解释我会很感激的。

```
var newNodeStr = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
var newNode = HtmlNode.CreateNode(newNodeStr);
var newNode2 = HtmlNode.CreateNode(newNodeStr);
htmlDoc.DocumentNode.ReplaceChild(newNode, htmlDoc.DocumentNode.FirstChild);
segment.DocumentNode.ReplaceChild(newNode2, segment.DocumentNode.FirstChild); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:15:22.363

HtmlAgilityPack 在您使用“监视”并且正在调试时添加或删除或替换元素时出现错误...要修复此奇怪行为，请在调试模式下清除您的监视列表...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:24:42.970

这实际上是非常合乎逻辑的。ReplaceChild 不会克隆子节点，它只是插入引用。因此，如果您在其上调用 ClearChildNodes()，它将在添加引用的所有文档中被清除。看起来 HtmlNode 实现了 CloneNode、CopyTo 和 Clone。应调用其中一种方法将节点的副本插入到每个文档中。

```
var newNodeStr = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
var newNode = HtmlNode.CreateNode(newNodeStr);

htmlDoc.DocumentNode.ReplaceChild(newNode.CloneNode(true), htmlDoc.DocumentNode.FirstChild);
segment.DocumentNode.ReplaceChild(newNode.CloneNode(true), segment.DocumentNode.FirstChild); 
```

# python - 将文本复制到剪贴板的 Python 脚本

> ID：11063458
> 
> 赞同：217
> 
> 时间：2012-06-16T12:32:47.450
> 
> 标签：python, clipboard, pyperclip

我只需要一个将文本复制到剪贴板的 python 脚本。

脚本执行后，我需要将文本的输出粘贴到另一个源。是否可以编写一个 python 脚本来完成这项工作？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2012-06-16T12:35:47.417

请参阅[Pyperclip](https://pypi.org/project/pyperclip/)。示例（取自 Pyperclip 网站）：

```
import pyperclip
pyperclip.copy('The text to be copied to the clipboard.')
spam = pyperclip.paste() 
```

另请参阅[施乐](https://github.com/kennethreitz/xerox)。但它似乎有更多的依赖关系。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-06-28T18:27:58.040

在 macOS 上，使用[`subprocess.run`](https://docs.python.org/library/subprocess.html#subprocess.run)管道将您的文本传输到`pbcopy`：

```
import subprocess 
data = "hello world"
subprocess.run("pbcopy", universal_newlines=True, input=data) 
```

它会将“hello world”复制到剪贴板。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-12-08T00:47:28.500

要使用本机 Python 目录，请使用：

```
import subprocess

def copy2clip(txt):
    cmd='echo '+txt.strip()+'|clip'
    return subprocess.check_call(cmd, shell=True) 
```

在 Mac 上，改为：

```
import subprocess

def copy2clip(txt):
    cmd='echo '+txt.strip()+'|pbcopy'
    return subprocess.check_call(cmd, shell=True) 
```

然后使用：

```
copy2clip('This is on my clipboard!') 
```

调用函数。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-09T11:00:23.653

PyQt5：

```
from PyQt5.QtWidgets import QApplication
import sys

def main():
    app = QApplication(sys.argv)
    cb = QApplication.clipboard()
    cb.clear(mode=cb.Clipboard )
    cb.setText("Copy to ClipBoard", mode=cb.Clipboard)
    # Text is now already in the clipboard, no need for further actions.
    sys.exit()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-02-25T15:29:17.503

GTK3：

```
#!/usr/bin/python3

from gi.repository import Gtk, Gdk

class Hello(Gtk.Window):

    def __init__(self):
        super(Hello, self).__init__()
        clipboard = Gtk.Clipboard.get(Gdk.SELECTION_CLIPBOARD)
        clipboard.set_text("hello world", -1)
        Gtk.main_quit()

def main():
    Hello()
    Gtk.main()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-25T11:34:46.967

这是@Martin Thoma 对 GTK3 的回答的修改**版本**。我发现原来的解决方案导致进程永无止境，当我调用脚本时我的终端挂起。将脚本更改为以下内容为我解决了这个问题。

```
#!/usr/bin/python3

from gi.repository import Gtk, Gdk
import sys
from time import sleep

class Hello(Gtk.Window):

    def __init__(self):
        super(Hello, self).__init__()

        clipboardText = sys.argv[1]
        clipboard = Gtk.Clipboard.get(Gdk.SELECTION_CLIPBOARD)
        clipboard.set_text(clipboardText, -1)
        clipboard.store()

def main():
    Hello()

if __name__ == "__main__":
    main() 
```

您可能想要更改分配给剪贴板文本的内容，在此脚本中，它被分配给调用脚本的参数。

**在全新的 ubuntu 16.04 安装中，我发现我必须安装该`python-gobject`软件包才能使其正常工作而不会出现模块导入错误。**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-04T13:35:20.743

另一个需要改进的答案： [https](https://stackoverflow.com/a/4203897/2804197) ://stackoverflow.com/a/4203897/2804197 和[https://stackoverflow.com/a/25476462/1338797](https://stackoverflow.com/a/25476462/1338797) (Tkinter)。

Tkinter 很好，因为它要么包含在 Python (Windows) 中，要么易于安装 (Linux)，因此最终用户几乎不需要依赖。

在这里，我有一个“成熟”的示例，它将参数或标准输入复制到剪贴板，并且 - 当不在 Windows 上时 - 等待用户关闭应用程序：

```
import sys

try:
    from Tkinter import Tk
except ImportError:
    # welcome to Python3
    from tkinter import Tk
    raw_input = input

r = Tk()
r.withdraw()
r.clipboard_clear()

if len(sys.argv) < 2:
    data = sys.stdin.read()
else:
    data = ' '.join(sys.argv[1:])

r.clipboard_append(data)

if sys.platform != 'win32':
    if len(sys.argv) > 1:
        raw_input('Data was copied into clipboard. Paste and press ENTER to exit...')
    else:
        # stdin already read; use GUI to exit
        print('Data was copied into clipboard. Paste, then close popup to exit...')
        r.deiconify()
        r.mainloop()
else:
    r.destroy() 
```

这展示了：

*   跨 Py2 和 Py3 导入 Tk
*   `raw_input`和`print()`兼容性
*   在需要时“取消隐藏”Tk 根窗口
*   以两种不同的方式在 Linux 上等待退出。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-28T06:34:54.210

我试试这个剪贴板 0.0.4，它运行良好。

[https://pypi.python.org/pypi/clipboard/0.0.4](https://pypi.python.org/pypi/clipboard/0.0.4)

```
import clipboard
clipboard.copy("abc")  # now the clipboard content will be string "abc"
text = clipboard.paste()  # text will have the content of clipboard 
```

# iphone - 带环聊的 Google+ iphone 应用，如何自己实现环聊功能？

> ID：11063465
> 
> 赞同：1
> 
> 时间：2012-06-16T12:34:16.627
> 
> 标签：iphone, objective-c, ios, google-plus, hangout

不久前，Google+ 已经在 iPhone 上实现了环聊。您可以像 Skype 一样聊天和流式传输视频。

我在网上搜索了一种实现环聊功能的方法，您可以在其中像 Skype 一样聊天和流式传输。

它使用 Facetime API 吗？或者有没有办法实现这样的功能？

谁知道是否以及如何做到这一点。我正在寻找一些关于使用哪些 iPhone 库来实现相同功能的一般建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:38:39.940

[Hangouts API](http://developers.google.com/+/hangouts)使您能够编写 JavaScript / HTML 应用程序，这些应用程序在从桌面 Web 浏览器查看的 Hangouts 中运行。它目前不提供为移动视频群聊编写应用程序的任何功能。

# jquery - 需要修改一个 jQuery 手风琴菜单

> ID：11063472
> 
> 赞同：2
> 
> 时间：2012-06-16T12:35:13.103
> 
> 标签：jquery, if-statement, menu, accordion

请参阅此菜单： http: [//maxim.comze.com](http://maxim.comze.com)

第三个按钮打开一个滑动面板关闭它，如果它已经打开，我希望其他按钮也关闭面板。我知道这与 add acitem 和 if/else 语句有关，但我对这些没有经验。非常感激。

这是菜单代码：

```
$('li hometog, li jredtog, li servicestog',this).click(function(e){       
    e.stopImmediatePropagation();
    var theElement=$(this).next();
    var parent=this.parentNode.parentNode;

    if($(parent).hasClass('noaccordion')){
        if(theElement[0]===undefined){window.location.href=this.href}
        $(theElement).slideToggle('normal',function(){
            if($(this).is(':visible')){
            $(this).prev().addClass('active')
    }else{
        $(this).prev().removeClass('active')}});
        return false
    }else{
        if(theElement.hasClass('acitem')
        &&theElement.is(':visible')){if($(parent).hasClass('collapsible')){
           $('.acitem:visible',parent).first().slideUp('normal',function(){
               $(this).prev().removeClass('active')
           });
           return false
        }
    return false
    }

    if(theElement.hasClass('acitem')&&!theElement.is(':visible')){
          $('.acitem:visible',parent).first().slideUp('normal',function(){
               $(this).prev().removeClass('active')});

               theElement.slideDown('normal',function(){
                    $(this).prev().addClass('active')});

                     return false}
    }
}) 
})
}; 
```

这是第三个按钮的代码：

```
$("servicestog").click(function(){
    $(".panel").toggle("slide",{direction: "right"},500);
    $(this).prev().addClass('active')
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:51:45.503

到目前为止，最简单的解决方案是在单击其他菜单项之一时调用另一个函数，如果显示侧面板，它将隐藏侧面板。所以，添加这个：

```
// When clicking on 'hometog' or 'jredtog'
$('li hometog, li jredtog', this).click(function (e) {
    // if the panel is visible, hide it
    $('.panel:visible').hide("slide", { direction: "right" }, 500);
}); 
```

在您现有的点击处理程序上方：

```
$('li hometog, li jredtog, li servicestog', this).click(function (e) { 
```

给出你的行为。

目前构建单击处理程序的方式的问题是，每当您单击任何菜单项（激活下拉菜单项和激活/隐藏面板的菜单项）时，都会触发它。这意味着在处理程序中的某个时刻，您需要确定触发点击处理程序的元素是否是显示面板的元素，以便您可以决定是否需要隐藏它。

这可以通过向现有处理程序添加类似这样的内容来完成（在任何分支逻辑之前）：

```
if (!$(this).is('servicestog')) {
    $('.panel:visible').hide("slide", { direction: "right" }, 500);
} 
```

另一种方法是向`activatesPanel`激活面板的菜单项添加另一个类：

```
<servicestog class="activatesPanel">Menu 3</servicestog> 
```

然后你可以在你现有的处理程序中做这样的事情：

```
if (!$(this).hasClass('activatesPanel')) {
    $('.panel:visible').hide("slide", { direction: "right" }, 500);
} 
```

似乎有一些逻辑试图使用`acitem`and`active`类来做类似的事情，但是目前还不清楚这个逻辑应该如何工作，并且它似乎在面板上有点下降。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:15:37.303

也许这对你有用？

```
$('li hometog, li jredtog, li servicestog',this).click(function(e){       
e.stopImmediatePropagation();
var theElement=$(this).next();
var parent=this.parentNode.parentNode;

if($(parent).hasClass('noaccordion')){
    if(theElement[0]===undefined){window.location.href=this.href}
    $(theElement).slideToggle('normal',function(){
        if($(this).is(':visible')){
        $(this).prev().addClass('active')
} else if(theElement.hasClass('acitem')&&theElement.is(':visible')){
       if($(parent).hasClass('collapsible')){
       $('.acitem:visible',parent).first().slideUp('normal',function(){
           $(this).prev().removeClass('active')
       });
       return false
    }
return false
}else{
    $(this).prev().removeClass('active')}});
    return false
}

if(theElement.hasClass('acitem')&&!theElement.is(':visible')){
      $('.acitem:visible',parent).first().slideUp('normal',function(){
           $(this).prev().removeClass('active')});

           theElement.slideDown('normal',function(){
                $(this).prev().addClass('active')});

                 return false}
}
}) 
})
}; 
```

# map - 具有并发访问的映射

> ID：11063473
> 
> 赞同：81
> 
> 时间：2012-06-16T12:35:20.450
> 
> 标签：map, go, mutex

当您在具有并发访问的程序中使用映射时，是否需要在函数中使用互斥锁来**读取**值？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-06-16T12:47:14.210

多个读者，没有作家是可以的：

[https://groups.google.com/d/msg/golang-nuts/HpLWnGTp-n8/hyUYmnWJqiQJ](https://groups.google.com/d/msg/golang-nuts/HpLWnGTp-n8/hyUYmnWJqiQJ)

一个作家，没有读者是好的。（否则地图不会很好。）

否则，如果至少有一个写入器，并且至少有一个写入器或读取器，则**所有**读取器**和**写入器都必须使用同步来访问映射。互斥体可以很好地解决这个问题。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2017-04-28T10:40:11.113

`sync.Map`截至 2017 年 4 月 27 日，已合并到 Go master。

这是我们一直在等待的并发 Map。

[https://github.com/golang/go/blob/master/src/sync/map.go](https://github.com/golang/go/blob/master/src/sync/map.go)

[https://godoc.org/sync#Map](https://godoc.org/sync#Map)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-06-16T18:27:59.827

几天前我在[这个](http://www.reddit.com/r/programming/comments/uw28d/samling_a_threadsafe_table_data_structure/)reddit线程中回答了你的问题：

> 在 Go 中，映射不是线程安全的。此外，即使读取数据也需要锁定，例如，如果可能有另一个 goroutine 正在写入相同的数据（即并发）。

从您在评论中的澄清来看，也会有 setter 函数，您的问题的答案是肯定的，您必须使用互斥锁来保护您的读取；您可以使用[RWMutex](http://golang.org/pkg/sync/#RWMutex)。例如，您可以查看我编写的表数据结构（在后台使用地图）的实现[源（实际上是在 reddit 线程中链接的那个）。](https://github.com/noll/samling/blob/master/table/table.go)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-10-05T16:49:20.620

您可以使用[concurrent-map](https://github.com/orcaman/concurrent-map)来为您处理并发难题。

```
// Create a new map.
map := cmap.NewConcurrentMap()

// Add item to map, adds "bar" under key "foo"
map.Add("foo", "bar")

// Retrieve item from map.
tmp, ok := map.Get("foo")

// Checks if item exists
if ok == true {
    // Map stores items as interface{}, hence we'll have to cast.
    bar := tmp.(string)
}

// Removes item under key "foo"
map.Remove("foo") 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-06T18:23:48.157

如果你只有一个作家，那么你可能会使用原子值。以下改编自[https://golang.org/pkg/sync/atomic/#example_Value_readMostly](https://golang.org/pkg/sync/atomic/#example_Value_readMostly)（原文使用锁来保护写，所以支持多写者）

```
type Map map[string]string
    var m Value
    m.Store(make(Map))

read := func(key string) (val string) { // read from multiple go routines
            m1 := m.Load().(Map)
            return m1[key]
    }

insert := func(key, val string) {  // update from one go routine
            m1 := m.Load().(Map) // load current value of the data structure
            m2 := make(Map)      // create a new map
            for k, v := range m1 {
                    m2[k] = v // copy all data from the current object to the new one
            }
            m2[key] = val // do the update that we need (can delete/add/change)
            m.Store(m2)   // atomically replace the current object with the new one
            // At this point all new readers start working with the new version.
            // The old version will be garbage collected once the existing readers
            // (if any) are done with it.
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-23T21:30:58.630

为什么不使用 Go 并发模型，有一个简单的例子......

```
type DataManager struct {
    /** This contain connection to know dataStore **/
    m_dataStores map[string]DataStore

    /** That channel is use to access the dataStores map **/
    m_dataStoreChan chan map[string]interface{}
}

func newDataManager() *DataManager {
    dataManager := new(DataManager)
    dataManager.m_dataStores = make(map[string]DataStore)
    dataManager.m_dataStoreChan = make(chan map[string]interface{}, 0)
    // Concurrency...
    go func() {
        for {
            select {
            case op := <-dataManager.m_dataStoreChan:
                if op["op"] == "getDataStore" {
                    storeId := op["storeId"].(string)
                    op["store"].(chan DataStore) <- dataManager.m_dataStores[storeId]
                } else if op["op"] == "getDataStores" {
                    stores := make([]DataStore, 0)
                    for _, store := range dataManager.m_dataStores {
                        stores = append(stores, store)
                    }
                    op["stores"].(chan []DataStore) <- stores
                } else if op["op"] == "setDataStore" {
                    store := op["store"].(DataStore)
                    dataManager.m_dataStores[store.GetId()] = store
                } else if op["op"] == "removeDataStore" {
                    storeId := op["storeId"].(string)
                    delete(dataManager.m_dataStores, storeId)
                }
            }
        }
    }()

    return dataManager
}

/**
 * Access Map functions...
 */
func (this *DataManager) getDataStore(id string) DataStore {
    arguments := make(map[string]interface{})
    arguments["op"] = "getDataStore"
    arguments["storeId"] = id
    result := make(chan DataStore)
    arguments["store"] = result
    this.m_dataStoreChan <- arguments
    return <-result
}

func (this *DataManager) getDataStores() []DataStore {
    arguments := make(map[string]interface{})
    arguments["op"] = "getDataStores"
    result := make(chan []DataStore)
    arguments["stores"] = result
    this.m_dataStoreChan <- arguments
    return <-result
}

func (this *DataManager) setDataStore(store DataStore) {
    arguments := make(map[string]interface{})
    arguments["op"] = "setDataStore"
    arguments["store"] = store
    this.m_dataStoreChan <- arguments
}

func (this *DataManager) removeDataStore(id string) {
    arguments := make(map[string]interface{})
    arguments["storeId"] = id
    arguments["op"] = "removeDataStore"
    this.m_dataStoreChan <- arguments
} 
```

# c - 符号扩展至 16 位

> ID：11063477
> 
> 赞同：-1
> 
> 时间：2012-06-16T12:35:25.583
> 
> 标签：c

我将一个`int`数字转换为二进制，但我需要将符号扩展到 16 位，因为二进制是 011，即我需要将其打印为`0000000000000011`. 如果负数大于 7，我在评估负数的二进制时也有问题。

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#include <stdlib.h>

void main()
{
    int x;  
    char inst[4][15]={"addi","8"};

    int rem, num=0, i=1;
    int y;
    int num1 = atoi(inst[1]);
    if (num1 < 0) 
    {
        x=atoi(inst[1]);
        x = (x * -1) -1;            
        printf("x %d",x);
        while(x > 0)
        {
            rem = x % 2;
            x= x / 2;
            num = (rem * i)+num;
            i = i  * 10;
            y = num ^ 111;
        }
        printf("binary no: %d",y);
    }
    else 
    {
        x = atoi(inst[1]);
        while(x > 0)
        {         
            rem = x % 2;
            x = x / 2;
            num = (rem * i) + num;
            i = i * 10;
        }
        printf("binary no: %d", num);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:59:20.903

这是我的 32 位整数代码。这会给你一个提示吗？

```
 1 #include <stdio.h>
  2 #include <stdlib.h>
  3 
  4 int
  5 main(void)
  6 {
  7     const char set[] = {'0', '1'};
  8     int number;
  9     unsigned int unumber, tmp;
 10     int i, loop;
 11     char * output, * cpy;
 12 
 13 
 14     scanf("%d", &number);
 15     unumber = (unsigned int)number;
 16 
 17     loop = sizeof(unsigned int) * 8;
 18     output = malloc(loop + 1);
 19     cpy = output + loop;
 20     *cpy = '\0';
 21     cpy--;
 22 
 23     for(i = 0; i < loop; i++)
 24         *cpy-- = set[(unumber >> i & 1)];
 25 
 26 
 27     printf("%s\n", output);
 28     free(output);
 29 
 30     return 0;
 31 }
 32 
```

示例输入和输出：

```
10
00000000000000000000000000001010
-1
11111111111111111111111111111111 
```

# lucene - Gremlin + Neo4j Lucene 搜索

> ID：11063479
> 
> 赞同：2
> 
> 时间：2012-06-16T12:35:28.203
> 
> 标签：lucene, neo4j, gremlin

这个 gremlin 脚本（通过 Neo4j 的 REST API 执行）是否对 lucene 索引执行排序？或者节点是否在 Neo4j 中排序？

```
g.idx('myIndex').get('name', 'aaa').sort{it.name} 
```

另外两个问题：1.如何设置排序？ASC/DESC 2\. 如何执行全文搜索（LIKE）。我已经尝试过 *, %，没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:05:16.603

`sort`是一种 Groovy 方法。要反转顺序，请使用 reverse：

```
g.idx('myIndex').get('name', 'aaa').sort{it.name}.reverse() 
```

看：

*   [http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html)
*   [http://groovy.codehaus.org/groovy-jdk/java/util/List.html](http://groovy.codehaus.org/groovy-jdk/java/util/List.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T00:25:17.247

除了执行 espeed 建议的操作，即使用 Gremlin 的工具进行排序等之外，您可能还对将额外的指令传递给 Lucene 本身感兴趣。这可以通过在第二个参数前面`get`加上一个魔术字符串来完成`%query%`。像这样：

... .get(null, "%query% _start_node_id_:15815486")

如果您不需要使用 key 参数，它可以为 null。

# php - 数据库概念多语言

> ID：11063481
> 
> 赞同：0
> 
> 时间：2012-06-16T12:35:37.343
> 
> 标签：php, sql, database, cakephp

我想用 cakephp 在 PHP 中创建一个站点，用户可以手动插入产品。问题在于多语言，因为我可以拥有来自世界各地的网站用户，例如意大利语中的产品“苹果”是“mela”。考虑到我可以有很多很多数据！然后我有一些数据库的解决方案：

1.  *   创建一个带有 id 的表 products
    *   创建一个表 product_aliases ，其中我有一个 id 产品语言的 id 和文本（例如苹果）在这种模式下，用户可以输入“苹果”，翻译广告我在 product_aliases 中插入一个新行，具有相同的 id 产品不同的语言和不同文字但产品相同
2.  定义 5 种语言并创建一个包含更多字段（title_en、title_it、title_es...）的表 翻译在同一条记录中 只有一个表但限制语言

3.  *   创建一个带有 id 的表 products
    *   为我想要的每种语言创建一个表，例如：prducts_en、products_it，我可以在其中使用与产品相同的外键存储我的数据，但从语言中划分以进行快速查询。

接受其他解决方案！我从不使用大型多语言数据库帮助我并告诉我什么是我的数据库的最佳解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:54:47.447

第一个通常是正确的解决方案。

它在许多企业应用程序中使用：具有用于标识非多语言信息的 id 字段的表（例如：产品的单价）和具有每个组合产品/语言的行的表。

第二个违反每个数据库规范化规则。

第三个是第二个的不同派生，如果您在已翻译标签表中的语言列上使用索引，则在性能方面应该不会有很大的劣势。

如果你需要我会解释得更好！

# javascript - 使用 javascript 和 DOM 获取当前页面的源

> ID：11063484
> 
> 赞同：3
> 
> 时间：2012-06-16T12:35:50.257
> 
> 标签：javascript, ajax, dom

如何使用`JavaScript`and获取当前页面的源`DOM`？我必须使用`AJAX`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T12:42:05.313

当前页面的来源：

```
document.documentElement.outerHTML 
```

显然，这就是页面现在的样子。在 DHTML 的情况下，如果您想从服务器获取未经修改的源，您将需要进行 AJAX 调用以再次接收它，并在那里捕获它。

编辑：不正确`innerHTML`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T12:45:35.453

## 对于当前页面的 HTML，如下所示：

```
document.documentElement.outerHTML 
```

*或者，您可以使用`innerHTML`，但您只会获得`<body>`标签的内容。*

## 对于当前页面的 HTML，在页面加载时检索：

使用 AJAX 调用动态地重新查询页面。

### 使用 jQuery（简单路径）：

任何其他现代 JavaScript 库都允许做类似的事情，但为了举例，使用 jQuery 将是：

```
$.ajax(window.location.href, {
  success: function (data) {
    console.log(data);
  }
}); 
```

### 使用 XMLHttpRequest 对象（涉及更多）：

显然，沿着准系统路线走，您需要自己处理更多事情，包括跨浏览器支持，但它的要点是：

```
var request = new XMLHttpRequest();

request.open('GET', window.location.href, false);
request.send();

if (request.status === 200) {
  console.log(request.responseText);
} 
```

# php - 有没有更好的方法来写这个来获取朋友的详细信息

> ID：11063485
> 
> 赞同：1
> 
> 时间：2012-06-16T12:35:52.010
> 
> 标签：php, facebook, api, facebook-fql

当我运行此代码有时它可以工作，而其他时候它不会并给出此异常异常：1：发生未知错误

这是代码

```
$user_access_token= $rowsUser['access_token'];
$user= $rowsUser['userId'];
$email= $rowsUser['email'];

$facebook = new Facebook(array(
  'appId'  => APP_ID,
  'secret' => APP_SECRET,
  'cookie' => true,
));

$access_token=$facebook->setAccessToken($user_access_token);

try{
  $fql = 'SELECT relationship_status,website,contact_email,work,education,
    current_location,uid, name,birthday_date,sex,email, profile_url
    FROM user 
    WHERE uid IN (SELECT uid2 FROM friend WHERE uid1='.$user.')';
  $param  =   array(
    'method'     => 'fql.query',
    'query'     => $fql,
    'callback'    => ''
  );
  $_friends   =   $facebook->api($param);

  print_r($_friends);

}catch(Exception $ex){
  echo $ex;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:32:32.350

这是一个非常常见的错误..

```
 $_friends   =   $facebook->api('/'.$param); 
```

使用此代码，您的问题就解决了。有时 Facebook 在不使用正斜杠的情况下返回数据，但有时会引发错误。它在 PHP/SDK 中的错误..

# java - 做什么 在java中是什么意思？

> ID：11063487
> 
> 赞同：2
> 
> 时间：2012-06-16T12:35:54.410
> 
> 标签：java, variables

> **可能重复：**
> [在 Java 中，当类型后跟尖括号时（如 List<Foo> 中）是什么意思？](https://stackoverflow.com/questions/2218216/in-java-what-does-it-mean-when-a-type-is-followed-by-angle-brackets-as-in-list)

正是它在锡上所说的 -`<int>`在 Java 中是什么意思？我不能在这里使用谷歌，因为谷歌似乎忽略了 < 和 > 等字符，所以我最终搜索“Java 中的 int 是什么意思”。有人可以帮忙吗？这不仅适用于`<int>`，它适用于 <> 中的任何内容。

# kml - KML for Google Earth：如何将图标大小设置为特定的物理距离？

> ID：11063491
> 
> 赞同：2
> 
> 时间：2012-06-16T12:36:29.557
> 
> 标签：kml, google-earth

我有一组带有时间戳的 GPS 数据点，我用这些数据点来创建一个人沿路径运动的动画。GPS 数据还有一个精度数字（以米为单位），我想使用图标大小在地图上表示。我想让图标是一个以人的纬度/经度为中心的圆圈，半径等于 GPS 测量的精度。

我搜索了论坛/谷歌，但找不到以物理距离指定图标大小的方法。有没有办法做到这一点？我已经阅读了`<scale>`允许您调整图标大小的属性，但对我来说，如何计算正确的比例数字以对应于地图上的 10 米并不明显。有没有人有创建特定物理尺寸图标的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:22:46.340

图标大小是设置像素数。

另一种方法是在您的 kml 中使用模型

[https://developers.google.com/kml/documentation/kmlreference#model](https://developers.google.com/kml/documentation/kmlreference#model)

这比计算你的 lon lats 的计算强度要​​小

用 Sketchup 创建一个简单的尺寸比例模式，一个直径为 1 米的圆柱体

你可以使用

```
 <Scale> 
    <x>1</x>                
    <y>1</y>               
    <z>1</z>               
  </Scale> 
```

将 x 和 y 设置为准确度

一个例子 ![来自 Google 地球的屏幕截图](../Images/406dcdafa49403eac71c8f00611b824c.png)

公里：

```
<?xml version="1.0" encoding="utf-16"?>
<kml xmlns="http://www.opengis.net/kml/2.2"
xmlns:gx="http://www.google.com/kml/ext/2.2"
xmlns:kml="http://www.opengis.net/kml/2.2"
xmlns:atom="http://www.w3.org/2005/Atom">
  <Document>
    <name>TestScaleSize</name> 
      <name>PathPoints</name> 
      <Placemark>
        <name>Point1</name>
        <TimeStamp> <when>2012-06-20T12:00</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26400</latitude> <altitude>0</altitude></Location>
           <Scale><x>8</x><y>8</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point2</name>
        <TimeStamp> <when>2012-06-20T12:01</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26405</latitude> <altitude>0</altitude></Location>
           <Scale><x>5</x><y>5</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point3</name>
        <TimeStamp> <when>2012-06-20T12:02</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26410</latitude> <altitude>0</altitude></Location>
           <Scale><x>4</x><y>4</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point4</name>
        <TimeStamp> <when>2012-06-20T12:03</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26415</latitude> <altitude>0</altitude></Location>
           <Scale><x>3</x><y>3</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point5</name>
        <TimeStamp> <when>2012-06-20T12:04</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26420</latitude> <altitude>0</altitude></Location>
           <Scale><x>2</x><y>2</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point6</name>
        <TimeStamp> <when>2012-06-20T12:05</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26425</latitude> <altitude>0</altitude></Location>
           <Scale><x>1</x><y>1</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
       <Placemark>
        <name>Point7</name>
        <TimeStamp> <when>2012-06-20T12:06</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26430</latitude> <altitude>0</altitude></Location>
           <Scale><x>1</x><y>1</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point8</name>
        <TimeStamp> <when>2012-06-20T12:07</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26435</latitude> <altitude>0</altitude></Location>
           <Scale><x>3</x><y>3</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point9</name>
        <TimeStamp> <when>2012-06-20T12:08</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26440</latitude> <altitude>0</altitude></Location>
           <Scale><x>1</x><y>1</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
      <Placemark>
        <name>Point10</name>
        <TimeStamp> <when>2012-06-20T12:09</when></TimeStamp>
        <Model>
          <altitudeMode>relativeToGround</altitudeMode>
          <Location><longitude>-123.145702</longitude><latitude> 49.26445</latitude> <altitude>0</altitude></Location>
           <Scale><x>1</x><y>1</y><z>1</z></Scale>
          <Link><href>scaleIcon.dae</href></Link>
        </Model>
      </Placemark>
  </Document>
</kml> 
```

模型的 xml 如下将其保存为“scaleIcon.dae”并将两者放在同一个文件夹中，

```
![<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<COLLADA xmlns="http://www.collada.org/2005/11/COLLADASchema" version="1.4.1">
    <asset>
        <contributor>
            <authoring_tool>Google SketchUp 8.0.11752</authoring_tool>
        </contributor>
        <created>2012-06-21T02:47:22Z</created>
        <modified>2012-06-21T02:47:22Z</modified>
        <unit meter="0.02539999969303608" name="inch" />
        <up_axis>Z_UP</up_axis>
    </asset>
    <library_visual_scenes>
        <visual_scene id="ID1">
            <node name="SketchUp">
                <instance_geometry url="#ID2">
                    <bind_material>
                        <technique_common>
                            <instance_material symbol="Material2" target="#ID3">
                                <bind_vertex_input semantic="UVSET0" input_semantic="TEXCOORD" input_set="0" />
                            </instance_material>
                        </technique_common>
                    </bind_material>
                </instance_geometry>
            </node>
        </visual_scene>
    </library_visual_scenes>
    <library_geometries>
        <geometry id="ID2">
            <mesh>
                <source id="ID5">
                    <float_array id="ID8" count="288">-38.02857583815229 10.18972618513862 0 -38.0285758381523 -10.1897261851386 0 -39.37007874015748 4.821444091131312e-015 0 -34.09548833797003 -19.68503937007873 0 -34.09548833797002 19.68503937007876 0 -27.8388496530137 -27.83884965301367 0 -27.83884965301368 27.83884965301369 0 -19.68503937007876 -34.09548833797002 0 -19.68503937007873 34.09548833797003 0 -10.18972618513864 -38.02857583815229 0 -10.18972618513861 38.0285758381523 0 -7.232166136696968e-015 -39.37007874015748 0 2.410722045565656e-015 39.37007874015748 0 10.1897261851386 -38.0285758381523 0 10.18972618513862 38.02857583815229 0 19.68503937007872 -34.09548833797004 0 19.68503937007874 34.09548833797003 0 27.83884965301368 -27.83884965301369 0 27.83884965301369 27.83884965301368 0 34.09548833797002 -19.68503937007876 0 34.09548833797003 19.68503937007874 0 38.02857583815229 -10.18972618513864 0 38.0285758381523 10.18972618513861 0 39.37007874015748 0 0 -27.83884965301368 27.83884965301369 39.37007874015748 -19.68503937007873 34.09548833797003 0 -27.83884965301368 27.83884965301369 0 -19.68503937007873 34.09548833797003 39.37007874015748 -10.18972618513861 38.0285758381523 0 -10.18972618513861 38.0285758381523 39.37007874015748 2.410722045565656e-015 39.37007874015748 0 2.410722045565656e-015 39.37007874015748 39.37007874015748 10.18972618513862 38.02857583815229 0 10.18972618513862 38.02857583815229 39.37007874015748 19.68503937007874 34.09548833797003 0 19.68503937007874 34.09548833797003 39.37007874015748 27.83884965301369 27.83884965301368 0 27.83884965301369 27.83884965301368 39.37007874015748 34.09548833797003 19.68503937007874 39.37007874015748 34.09548833797003 19.68503937007874 0 38.0285758381523 10.18972618513861 39.37007874015748 38.0285758381523 10.18972618513861 0 39.37007874015748 0 39.37007874015748 39.37007874015748 0 0 38.02857583815229 -10.18972618513864 39.37007874015748 38.02857583815229 -10.18972618513864 0 34.09548833797002 -19.68503937007876 39.37007874015748 34.09548833797002 -19.68503937007876 0 27.83884965301368 -27.83884965301369 39.37007874015748 27.83884965301368 -27.83884965301369 0 19.68503937007872 -34.09548833797004 0 19.68503937007872 -34.09548833797004 39.37007874015748 10.1897261851386 -38.0285758381523 0 10.1897261851386 -38.0285758381523 39.37007874015748 -7.232166136696968e-015 -39.37007874015748 0 -7.232166136696968e-015 -39.37007874015748 39.37007874015748 -10.18972618513864 -38.02857583815229 0 -10.18972618513864 -38.02857583815229 39.37007874015748 -19.68503937007876 -34.09548833797002 0 -19.68503937007876 -34.09548833797002 39.37007874015748 -27.8388496530137 -27.83884965301367 0 -27.8388496530137 -27.83884965301367 39.37007874015748 -34.09548833797003 -19.68503937007873 39.37007874015748 -34.09548833797003 -19.68503937007873 0 -38.0285758381523 -10.1897261851386 39.37007874015748 -38.0285758381523 -10.1897261851386 0 -39.37007874015748 4.821444091131312e-015 39.37007874015748 -39.37007874015748 4.821444091131312e-015 0 -38.02857583815229 10.18972618513862 39.37007874015748 -38.02857583815229 10.18972618513862 0 -34.09548833797002 19.68503937007876 39.37007874015748 -34.09548833797002 19.68503937007876 0 -38.0285758381523 -10.1897261851386 39.37007874015748 -38.02857583815229 10.18972618513862 39.37007874015748 -39.37007874015748 4.821444091131312e-015 39.37007874015748 -34.09548833797003 -19.68503937007873 39.37007874015748 -34.09548833797002 19.68503937007876 39.37007874015748 -27.8388496530137 -27.83884965301367 39.37007874015748 -27.83884965301368 27.83884965301369 39.37007874015748 -19.68503937007876 -34.09548833797002 39.37007874015748 -19.68503937007873 34.09548833797003 39.37007874015748 -10.18972618513864 -38.02857583815229 39.37007874015748 -10.18972618513861 38.0285758381523 39.37007874015748 -7.232166136696968e-015 -39.37007874015748 39.37007874015748 2.410722045565656e-015 39.37007874015748 39.37007874015748 10.1897261851386 -38.0285758381523 39.37007874015748 10.18972618513862 38.02857583815229 39.37007874015748 19.68503937007872 -34.09548833797004 39.37007874015748 19.68503937007874 34.09548833797003 39.37007874015748 27.83884965301368 -27.83884965301369 39.37007874015748 27.83884965301369 27.83884965301368 39.37007874015748 34.09548833797002 -19.68503937007876 39.37007874015748 34.09548833797003 19.68503937007874 39.37007874015748 38.02857583815229 -10.18972618513864 39.37007874015748 38.0285758381523 10.18972618513861 39.37007874015748 39.37007874015748 0 39.37007874015748</float_array>
                    <technique_common>
                        <accessor count="96" source="#ID8" stride="3">
                            <param name="X" type="float" />
                            <param name="Y" type="float" />
                            <param name="Z" type="float" />
                        </accessor>
                    </technique_common>
                </source>
                <source id="ID6">
                    <float_array id="ID9" count="288">0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 0 0 -1 -0.7071067811865475 0.7071067811865476 0 -0.4999999999999999 0.8660254037844387 0 -0.7071067811865475 0.7071067811865476 0 -0.4999999999999999 0.8660254037844387 0 -0.2588190451025206 0.9659258262890684 0 -0.2588190451025206 0.9659258262890684 0 2.673332968694072e-016 1 0 2.673332968694072e-016 1 0 0.2588190451025209 0.9659258262890682 0 0.2588190451025209 0.9659258262890682 0 0.5 0.8660254037844386 0 0.5 0.8660254037844386 0 0.7071067811865475 0.7071067811865476 0 0.7071067811865475 0.7071067811865476 0 0.8660254037844387 0.5 0 0.8660254037844387 0.5 0 0.9659258262890684 0.2588190451025206 0 0.9659258262890684 0.2588190451025206 0 1 -4.901110442605798e-016 0 1 -4.901110442605798e-016 0 0.9659258262890682 -0.2588190451025212 0 0.9659258262890682 -0.2588190451025212 0 0.8660254037844384 -0.5000000000000004 0 0.8660254037844384 -0.5000000000000004 0 0.7071067811865471 -0.707106781186548 0 0.7071067811865471 -0.707106781186548 0 0.4999999999999995 -0.8660254037844389 0 0.4999999999999995 -0.8660254037844389 0 0.2588190451025204 -0.9659258262890684 0 0.2588190451025204 -0.9659258262890684 0 -4.72288824469286e-016 -1 0 -4.72288824469286e-016 -1 0 -0.2588190451025212 -0.9659258262890682 0 -0.2588190451025212 -0.9659258262890682 0 -0.5000000000000004 -0.8660254037844384 0 -0.5000000000000004 -0.8660254037844384 0 -0.7071067811865479 -0.7071067811865471 0 -0.7071067811865479 -0.7071067811865471 0 -0.8660254037844388 -0.4999999999999998 0 -0.8660254037844388 -0.4999999999999998 0 -0.9659258262890684 -0.2588190451025205 0 -0.9659258262890684 -0.2588190451025205 0 -1 2.316888572868195e-016 0 -1 2.316888572868195e-016 0 -0.9659258262890682 0.258819045102521 0 -0.9659258262890682 0.258819045102521 0 -0.8660254037844386 0.5000000000000001 0 -0.8660254037844386 0.5000000000000001 0 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1 -0 -0 1</float_array>
                    <technique_common>
                        <accessor count="96" source="#ID9" stride="3">
                            <param name="X" type="float" />
                            <param name="Y" type="float" />
                            <param name="Z" type="float" />
                        </accessor>
                    </technique_common>
                </source>
                <vertices id="ID7">
                    <input semantic="POSITION" source="#ID5" />
                    <input semantic="NORMAL" source="#ID6" />
                </vertices>
                <triangles count="92" material="Material2">
                    <input offset="0" semantic="VERTEX" source="#ID7" />
                    <p>0 1 2 1 0 3 3 0 4 3 4 5 5 4 6 5 6 7 7 6 8 7 8 9 9 8 10 9 10 11 11 10 12 11 12 13 13 12 14 13 14 15 15 14 16 15 16 17 17 16 18 17 18 19 19 18 20 19 20 21 21 20 22 21 22 23 24 25 26 25 24 27 27 28 25 28 27 29 29 30 28 30 29 31 31 32 30 32 31 33 33 34 32 34 33 35 35 36 34 36 35 37 36 38 39 38 36 37 39 40 41 40 39 38 41 42 43 42 41 40 43 44 45 44 43 42 45 46 47 46 45 44 47 48 49 48 47 46 48 50 49 50 48 51 51 52 50 52 51 53 53 54 52 54 53 55 55 56 54 56 55 57 57 58 56 58 57 59 59 60 58 60 59 61 62 60 61 60 62 63 64 63 62 63 64 65 66 65 64 65 66 67 68 67 66 67 68 69 70 69 68 69 70 71 24 71 70 71 24 26 72 73 74 73 72 75 73 75 76 76 75 77 76 77 78 78 77 79 78 79 80 80 79 81 80 81 82 82 81 83 82 83 84 84 83 85 84 85 86 86 85 87 86 87 88 88 87 89 88 89 90 90 89 91 90 91 92 92 91 93 92 93 94 94 93 95</p>
                </triangles>
            </mesh>
        </geometry>
    </library_geometries>
    <library_materials>
        <material id="ID3" name="Color_A01_">
            <instance_effect url="#ID4" />
        </material>
    </library_materials>
    <library_effects>
        <effect id="ID4">
            <profile_COMMON>
                <technique sid="COMMON">
                    <lambert>
                        <diffuse>
                            <color>1 0 0 1</color>
                        </diffuse>
                    </lambert>
                </technique>
            </profile_COMMON>
        </effect>
    </library_effects>
    <scene>
        <instance_visual_scene url="#ID1" />
    </scene>
</COLLADA>][1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:54:04.167

经过一番搜索，我找到了一种方法，虽然不是用图标。我想我会分享以防其他人需要做类似的事情。据我所知，没有办法将图标设置为特定大小（物理距离，而不是像素），但您可以使用`<Polygon>`标签绘制具有所需物理半径的自己的圆圈。

计算圆半径上每个点的经纬度并不是完全简单的，但我发现了这个很棒的 python 工具，它会`<Polygon>`根据中心的纬度/经度和以米为单位的半径为您生成代码：

[http://code.google.com/p/kmlcircle/](http://code.google.com/p/kmlcircle/)

# android - 不使用网络更改脚本？

> ID：11063497
> 
> 赞同：1
> 
> 时间：2012-06-16T12:37:28.110
> 
> 标签：android, fonts

我想开始开发一个 android 应用程序，它将以其他所需语言给出当前的英语问题。所以任何使用字体的人请帮助我。我不知道如何启动它？

# c# - 通过 lambda 表达式在运行时获取局部变量（和参数）的名称

> ID：11063502
> 
> 赞同：20
> 
> 时间：2012-06-16T12:38:24.960
> 
> 标签：c#, .net, lambda

我有兴趣在运行时以重构安全的方式检索局部变量（和参数）的名称。我有以下扩展方法：

```
public static string GetVariableName<T>(Expression<Func<T>> variableAccessExpression)
{
    var memberExpression = variableAccessExpression.Body as MemberExpression;
    return memberExpression.Member.Name;
} 
```

…它返回通过 lambda 表达式捕获的变量的名称：

```
static void Main(string[] args)
{
    Console.WriteLine(GetVariableName(() => args));
    // Output: "args"

    int num = 0;
    Console.WriteLine(GetVariableName(() => num));
    // Output: "num"
} 
```

但是，这仅起作用，因为 C# 编译器将匿名函数中捕获的任何局部变量（和参数）提升为在后台编译器生成的类中的同名实例变量（根据[Jon Skeet](https://stackoverflow.com/questions/7220626/local-variable-and-expression-trees/7220792#7220792)）。如果不是这种情况，to 的[`Body`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.lambdaexpression.body.aspx)转换[`MemberExpression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.memberexpression.aspx)将失败，因为`MemberExpression`表示字段或属性访问。

这个变量提升是否记录了行为，或者它是在其他版本的框架中可能发生变化的实现细节？

注意：这个问题是[我之前关于参数验证](https://stackoverflow.com/questions/10759632/lambda-expressions-for-refactor-safe-argumentexception)的问题的概括。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T12:25:37.963

> **更新**：这不再是 C# 6 中的问题，它引入了[`nameof`](http://gigi.nullneuron.net/gigilabs/c-6-preview-nameof-expressions/)操作符来解决此类场景（请参阅[MSDN](https://msdn.microsoft.com/en-us/library/dn986596.aspx)）。

看来我的问题的答案是**否定**的；该功能是非标准化的。情况似乎比我最初怀疑的还要惨淡。不仅捕获变量的提升是非标准化的，而且将匿名函数转换为其表达式树表示的整个规范也是如此。

这意味着即使是简单的匿名函数，例如下面的，也不能保证在框架的不同实现中产生一致的表达式树（直到转换标准化）：

```
Expression<Func<int, int, int>> add = (int x, int y) => x + y; 
```

以下摘录摘自[C# 语言规范 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=7029)（在所有情况下都添加了重点）。

来自“4.6 表达式树类型”：

> 泛型类型的确切定义`Expression<D>`以及当匿名函数转换为表达式树类型时构造表达式树的精确规则**都超出了本规范的范围**，并在别处进行了描述。

来自“6.5.2 匿名函数转换为表达式树类型的评估”：

> 将匿名函数转换为表达式树类型会生成表达式树（第 4.6 节）。更准确地说，匿名函数转换的评估导致构建表示匿名函数本身结构的对象结构。**表达式树的精确结构以及创建它的精确过程是由实现定义的。**

“6.5.3 实现示例”中的第三个示例演示了捕获局部变量的匿名函数的转换，并确认了我的问题中提到的变量提升：

> 局部变量的生命周期现在必须至少延长到匿名函数委托的生命周期。这可以通过将局部变量“提升”到编译器生成的类的字段中来实现。局部变量的实例化（第 7.15.5.2 节）则对应于创建编译器生成的类的实例，**访问局部变量对应于访问编译器生成的类的实例中的字段**。

本节末尾进一步证实了这一点：

> 在将匿名函数转换为表达式树时，也可以使用此处用于捕获局部变量的相同技术：对编译器生成的对象的引用可以存储在表达式树中，**对局部变量的访问可以表示为对这些对象的字段访问**. 这种方法的优点是它允许在委托和表达式树之间共享“提升”的局部变量。

但是，在该部分的开头有一个免责声明：

> 此处描述的实现基于 Microsoft C# 编译器使用的相同原理，但**绝不是强制实现，也不是唯一可能的实现**。它只是简单地提到了到表达式树的转换，因为它们的确切语义超出了本规范的范围。

PS Eric Lippert[在此评论中确认](https://stackoverflow.com/questions/8796056/creating-expression-trees-from-lambda#comment10973272_8796306)从未发布过表达式树规范。CodePlex 上的 DLR 文档下存在[Expression Trees v2 Spec](http://dlr.codeplex.com/wikipage?title=Docs%20and%20specs&referringTitle=Documentation)，但其范围似乎并未涵盖将匿名函数转换为 C# 中的表达式树。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T19:14:30.647

这是您不应该依赖的***行为***。

看看[滥用 C# lambda 表达式或 Syntax brilliance？](https://stackoverflow.com/questions/1718037/abuse-of-c-sharp-lambda-expressions-or-syntax-brilliance)

现在阅读 C# 设计团队的 Eric Lippert 的评论。他们包括：

> 我只是问安德斯（和设计团队的其他成员）他们的想法。假设结果无法在适合家庭的报纸上打印

和

> 至于为什么这很可怕，我们可以从不明显的、聪明的开始（记住，聪明是不好的，聪明的代码很难维护），根本不在 lambdas 设计者设想的设计用例中，慢，脆弱，不可携带且不必要

从这些陈述中，我会说它不会成为记录或支持的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T13:15:00.570

AFAIK，这是一个实现细节。

但是，我认为您可以打赌它实际上不会改变。

我刚刚在 VS2012 RC 中进行了测试，它按预期工作 - 所以你至少可以安全几年。

# ruby-on-rails - attr_accessor 在模型中为空

> ID：11063512
> 
> 赞同：0
> 
> 时间：2012-06-16T12:39:27.160
> 
> 标签：ruby-on-rails

我有一个表单，其字段不会永久存在于模型上，因此我在模型上使用 attr_accessor 以使其可供使用，但是当我尝试访问它时它总是返回 nil。

表单域：

```
<%= text_field_tag :discount_code, nil, maxlength: "12", class: "span2" %> 
```

控制器：

```
def an_action
   @job = Job.find(session[:job_id])
   @job.some_method
end 
```

该模型：

```
class Job < ActiveRecord::Base
    attr_accessor :discount_code

    def some_method
        if !self.discount_code.blank?
        do some logic
    end
end 
```

上面的语句永远不会执行，因为它总是评估为零。

该字段的值在控制器中作为参数提供，没有问题：

```
discount_code: test50
action: process_payment
controller: jobs 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:01:37.980

实际上，您*可以*将相应的表单值自动设置为类的实例。但是你使用了一个 text_field_tag，它设置了 params[:discount_tag]，而你需要的是一个 param[:job][:discount_tag]

为此，您可以使用：

```
<%= f.text_field :discount_code, maxlength: 12, class: "span2" %> 
```

这确实更优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:50:38.683

如果您发布的示例代码确实是您的模型中的内容，那么问题只是您尝试访问 discount_code 的上下文。discount_code 值仅可用于模型的实例，但在您的情况下，您正尝试在 Class 上下文中访问它。

您可以覆盖 setter 方法以确认它确实被设置：

```
def discount_code=(code)
  # If you get here, then the value is being set!
  super
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:52:08.510

我想到了。我天真地认为 attr_accesor 会自动将相应的表单值设置为类的实例，就像 Rails 对实际数据库字段所做的那样（即 form_for(@jobs)。

我只需要在控制器中添加以下内容：

```
@job.discount_code = params[:discount_code] 
```

谢谢你让我走上正轨。

# wordpress - 是否可以将 rel 标签插入 WP 小部件标题元素？

> ID：11063513
> 
> 赞同：2
> 
> 时间：2012-06-16T12:39:37.503
> 
> 标签：wordpress, tags, widget, rel

是否可以将单个 rel 标签插入到 Wordpress 小部件标题元素中？

我打算将 rel 标签用于 CSS 目的。

谢谢

科林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:52:06.067

当您注册侧边栏（小部件区域）时，可以使用参数来设置 html 标签。

```
register_sidebar( array(
            'name'            =>"Sidebar Name",
            'id'              => "unique_sidebar_id",
            'description'     => "Your Description here",
            'before_widget'   => '<aside id="%1$s" class="your-classes %2$s">',
            'after_widget'    => '</aside>',
            'before_title'    => '<h3 class="widget-title" rel="your-rel">',
            'after_title'     => '</h3>'
        )); 
```

before_widget 参数还运行一个 sprint_f 替换`%1$s`每个小部件的唯一 ID。

# flash - Flex 节点套接字连接

> ID：11063520
> 
> 赞同：1
> 
> 时间：2012-06-16T12:41:31.920
> 
> 标签：flash, apache-flex, sockets

我正在使用服务器端的 Node.JS 开发一个 Flex 应用程序，并利用套接字来为我的客户提供服务。问题是：当我从 Flashbuilder 启动它时，我的应用程序运行良好，它可以连接到服务器并将数据提供给我的客户端。但是当我尝试使用 url 访问这个应用程序时，它不起作用。

一个快速的工作链接：D:\Dev\workspace\MyProj\bin-debug\index.html

不工作的链接：（swf 加载，但没有数据）http://ip-address:3000/flexapp/index.html

看起来像一些安全问题。但我不确定，因为我的头脑拒绝产生解决方案。任何帮助深表感谢。

**进一步探索：** 我尝试了网上给出的许多建议，如下所示：首先，据我了解，Socket.io 本身在端口 10843 上为您提供了 flashpolicyfileserver，但我仍然遇到上述问题。其次，我尝试按照[此处](http://forrst.com/posts/node_js_Flash_Socket_Policy_Server-9vS)的说明使用 authbind 运行 flashpolicyserver，但仍然无法解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:36:34.767

好的，我正在回答我自己的问题。我使用的设置是 Flex4.6、带有 Socket.IO 的 Node.JS、[FlashSocket API](https://github.com/simb/FlashSocket.IO)

当我遇到这个问题时，我通过为我的应用程序指定 crossdomain.xml 来正确开始。但这没有用。然后我尝试在端口 843 上使用单独的策略服务器，即使这样也没有用。但是通过这一切，我发现套接字已经被初始化并在稍后断开连接。所以我最终使用 Flashsocket 导致了这个问题。我为此获取了源代码并进行了调试。我发现策略 URL 是根据提供给它的 ip+host 生成的。这是一个很好的方法，但它根本没有提供任何自定义此策略 URL 的方法。我所做的只是以这样一种方式进行了修改，即我可以传递我自己的policyURL，并且无论何时传递，Flashsocket 都应该使用它，否则它会继续以旧方式执行policyURL。它奏效了。

我对 FlashSocket 的小改动：

```
....
private var policyURL:String;
public function FlashSocket( domain:String, protocol:String=null, proxyHost:String = null, proxyPort:int = 0, headers:String = null, policyURL:String = null)
{
....
this.policyURL = policyURL;
....
}

protected function loadDefaultPolicyFile(wsUrl:String):void {
            var policyUrl:String = "xmlsocket://" + URLUtil.getServerName(wsUrl) + ":843";
            log("policy file: " + policyUrl);
            if(policyURL){
                Security.loadPolicyFile(policyURL);
            }else}
                Security.loadPolicyFile(policyUrl);
            }
        } 
```

# .htaccess - .htaccess 似乎不起作用

> ID：11063521
> 
> 赞同：3
> 
> 时间：2012-06-16T12:41:35.177
> 
> 标签：.htaccess

我有一个带有 Zymic 免费托管服务的网站，我在主文件夹中添加了以下 .htaccess：

```
 <ifmodule mod_deflate.c>
AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x-javascript application/javascript  
</ifmodule>

 <IfModule mod_expires.c>  
# Enable expirations
ExpiresActive On

# Default directive
ExpiresDefault "access plus 1 month"

# My favicon
ExpiresByType image/x-icon “access plus 1 year”

# Images
ExpiresByType image/gif "access plus 1 month"
ExpiresByType image/png "access plus 1 month"
ExpiresByType image/jpg "access plus 1 month"
ExpiresByType image/jpeg "access plus 1 month"

# CSS
ExpiresByType text/css “access 1 week”

# Javascript
ExpiresByType application/javascript "access plus 3 month"

</IfModule> 
```

这是用于缓存和压缩，但是当我使用 google PageSpeed 洞察力和其他类似工具检查时，它告诉我在我的网站中没有压缩或缓存。

可能是什么问题？

# javascript - 画布和 Javascript 对象上的 Javascript 动画

> ID：11063524
> 
> 赞同：1
> 
> 时间：2012-06-16T12:41:58.363
> 
> 标签：javascript, html, canvas

我正在玩弄一些画布和简单的动画——我有一个简单的类来渲染我的地图。

```
 var Map = Class.extend({
        init: function () {
            //Setup stuff       
        },
        DrawMap: function (canvas, camera) {
            //Render the map
        }
    }); 
```

我的核心应用程序代码也在课堂上

```
 var App = Class.extend({

        init: function (canvas) {
             //Load Stuff
        },

        GameLoop: function () {
            this.map.DrawMap(this.canvas, this.camera);
        }

    }); 
```

现在使用下面的代码可以正常工作并且我的地图可以渲染。

```
 var canvasMap = document.getElementById('cmap');

    app = new App(canvasMap);

    setInterval(function () {
        app.GameLoop();
    }, 100); 
```

但是 - 我知道这并不理想，我正在尝试转换为这个（http://paulirish.com/2011/requestanimationframe-for-smart-animating/）所以我调整了我的代码。

我将上面的代码添加到我的索引页面

```
window.requestAnimFrame = (function () {
    return window.requestAnimationFrame ||
                          window.webkitRequestAnimationFrame ||
                          window.mozRequestAnimationFrame ||
                          window.oRequestAnimationFrame ||
                          window.msRequestAnimationFrame ||
                          function (/* function */callback, /* DOMElement */element) {
                              window.setTimeout(callback, 1000 / 60);
                          }; 
```

并更改了我的初始化代码（用于使用 Set Interval to）

```
 var canvasMap = document.getElementById('cmap');

    app = new App(canvasMap);

    requestAnimFrame(function() { app.GameLoop(); }); 
```

现在基于一些调试，这里发生的是 App.GameLoop 方法被调用一次（我在游戏循环方法中添加了一个日志）。然后不再调用。我想这是根据我对 JS 对象的经验来完成的。我的背景是 C#，所以这对我来说相对较新。

为什么这只会被调用一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:58:30.570

I've fixed this, I missed the Recursion.

```
 var initAll = function () {
        $(document).ready(function() {

            var canvasMap = document.getElementById('cmap');

            app = new App(canvasMap);
            mainLoop();
        });
    };

    var mainLoop  = function() {
               requestAnimFrame(mainLoop);
                app.GameLoop();
    }; 
```

# php - PHP - 将固定数字转换为十进制，使用最后 2 位作为小数位

> ID：11063525
> 
> 赞同：1
> 
> 时间：2012-06-16T12:41:59.547
> 
> 标签：php

我有一种情况，我正在解析的 CSV 中的所有记录都是货币，但这些值没有用小数点分隔。例如，值“1234”实际上是“12.34”，而“12345”是“123.45”。

我正在努力寻找一种将这些值手动转换为小数的方法。我不能使用 number_format，因为它会给我这样的输出：

```
$original_num = 1234;

$formatted_num = number_format($original_num, '2', '.', '');

$formatted_num = 1234.00; //Output 
```

另一个问题是，有时我合并两个数字后可能会得到像“436257.5”这样的值，实际上是“436.2575”，所以我不能手动输入“。” 距离字符串末尾的两个位置。我在解析文件时是否应该考虑以不同的方式格式化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:48:56.480

假设您使用整数始终表示小数点后两位精度的小数，您只需除以 100 即可将点插入正确的位置。

你是什​​么意思，“结合”？你是说乘法？您应该在每次乘法后重新规范化，并且永远不要遇到您表示不同精度的小数的情况（除非您跟踪精度，您可以这样做，但这很麻烦，通常是不必要的）。

```
function multiply($a, $b) {
  return round($a * $b / 100);
}

function format($a) {
  return sprintf("%.2f", $a / 100);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-26T13:13:09.530

由于 number_format() 函数总是将 2 00 添加为十进制，因此您可以将该值除以 100。

number_format($original_num/100,2);

# ios - iOS - 自定义 UISearchBar 的取消按钮

> ID：11063527
> 
> 赞同：12
> 
> 时间：2012-06-16T12:42:28.387
> 
> 标签：ios, uisearchbar, cancel-button

在我的 iOS5 iPhone 应用程序中，我使用以下代码设置搜索栏的色调：

```
searchBar.tintColor = UIColorMake(@"#EFEFEF"); 
```

#efefef 的 RGB 值为 (239,239,239)
它工作正常。但是当取消按钮出现时，文本“取消”是不可见的。我可以只自定义带有透明黑白文本的取消按钮吗？
可以定制吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-04T14:08:58.773

您可以使用外观代理自定义 iOS 5 上的取消按钮。您需要更改`UIBarButtonItem`包含在 中时的外观`UISearchBar`。例如，要更改取消按钮的标题字体，您可以使用：

```
NSDictionary *attributes =
    [NSDictionary dictionaryWithObjectsAndKeys:
     [UIColor whiteColor], UITextAttributeTextColor,
     [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5], UITextAttributeTextShadowColor,
     [NSValue valueWithUIOffset:UIOffsetMake(0, 1)], UITextAttributeTextShadowOffset,
     [UIFont systemFontOfSize:12], UITextAttributeFont,
     nil];
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]
    setTitleTextAttributes:attributes forState:UIControlStateNormal];
[[UIBarButtonItem appearanceWhenContainedIn:[UISearchBar class], nil]
    setTitleTextAttributes:attributes forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T12:54:58.210

您可以搜索`UISearchBar`subViews 并找到取消按钮，这样做很危险，因为按钮可能会更改 例如，您可以将其添加到您的`viewWillAppear`

```
- (void) viewWillAppear:(BOOL)animated
{
    //show the cancel button in your search bar
    searchBar.showsCancelButton = YES;
    //Iterate the searchbar sub views
    for (UIView *subView in searchBar.subviews) {
        //Find the button
        if([subView isKindOfClass:[UIButton class]])
        {
            //Change its properties
            UIButton *cancelButton = (UIButton *)[sb.subviews lastObject];
            cancelButton.titleLabel.text = @"Changed";
        }
    }
} 
```

正如我之前所说，这可能会改变，这样做是一种黑客行为，你最好坚持原来的，或者创建自己的搜索栏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T13:25:53.940

从 iOS5 开始，您可以使用此代码编辑导航栏、工具栏、标签栏等...

```
NSDictionary *textTitleOptions = [NSDictionary dictionaryWithObjectsAndKeys:
                                          [UIColor darkGrayColor], 
                                          UITextAttributeTextColor, 
                                          [UIColor whiteColor], 
                                          UITextAttributeTextShadowColor, nil];
[[UINavigationBar appearance] setTitleTextAttributes:textTitleOptions]; 
```

我没有用搜索栏测试过它，但它应该工作类似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T03:33:12.023

此方法适用于IOS7

```
for (UIView *view in searchBar.subviews)
    {
        for (id subview in view.subviews)
        {
            if ( [subview isKindOfClass:[UIButton class]] )
            {
                // customize cancel button
                UIButton* cancelBtn = (UIButton*)subview;
                [cancelBtn setEnabled:YES];
                break;
            }
        }
    } 
```

检查这个[https://stackoverflow.com/a/18150826/1767686](https://stackoverflow.com/a/18150826/1767686)

# c# - Metro 应用程序的最简单的 DIY 日期选择器和时间选择器（c# 和 XAML）

> ID：11063531
> 
> 赞同：3
> 
> 时间：2012-06-16T12:42:49.017
> 
> 标签：c#, xaml

我正在开发 Metro 应用程序，据我所知，没有可用的日期选择器控制 ATM。在我的应用程序中，用户正在处理日期，我正在寻找一种方法来减少用户的痛苦。

最好的方法是什么？有人想分享一个不错的自定义控件示例吗？

我对图表也有同样的问题，但我希望获得 Teleriks 预览到他们的 Win8 控件的访问代码，但我在那里看不到任何日期或时间选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:46:15.223

目前没有这个[MSDN 答案](http://social.msdn.microsoft.com/Forums/en/winappswithcsharp/thread/28515145-d7ef-4625-bca4-6e45c2350cf6)中解释的 WinRT DatePicker 。[Tim Heuer](http://timheuer.com/blog/archive/2012/05/31/introducing-callisto-a-xaml-toolkit-for-metro-apps.aspx)和一些人正在研究一些简单的 WinRT 组件。你可以在[Github](https://github.com/timheuer/callisto)上找到他们的作品[Callisto](https://github.com/timheuer/callisto)。DatePicker 看起来是列表中的下一个，但他们也总是可以使用帮助。最好的起点是 Windows Phone 7 DatePicker。您可以[从 Codeplex 下载源代码](http://silverlight.codeplex.com/SourceControl/list/changesets#)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:15:15.660

[Telerik 现在已经发布了他们的 windows 8 控件的测试版](http://www.telerik.com/products/windows-metro/overview.aspx)，其中一个是日期选择器！问题解决了 ：）

# wordpress - Wordpress 中的 500 内部服务器错误

> ID：11063533
> 
> 赞同：1
> 
> 时间：2012-06-16T12:43:20.810
> 
> 标签：wordpress, internal-server-error

我在 wordpress 中使用 the-image-slider 插件来显示滑块，并且该插件正在使用 timthumb 脚本来调整图像大小。但是在我的实时服务器上，当我尝试访问此脚本时出现 500 内部服务器错误。

有人可以帮我解决这个问题的原因吗？

# php - 尝试登录我的 wordpress 博客将我重定向到一个奇怪的页面

> ID：11063535
> 
> 赞同：1
> 
> 时间：2012-06-16T12:43:47.153
> 
> 标签：php, wordpress, login

我试图通过添加`/wp-admin/`它来登录我的wordpress网站，但现在当我添加它时，它会将我重定向到这个网页`www.mywebsite.com/cgi-sys/index.html`
，所以我的问题是为什么会发生这种情况。以及如何再次登录我的帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:55:16.977

可能发生的事情是您的 WordPress 站点设置为另一个站点。解决此问题的方法是进入 WordPress 数据库并执行以下操作：

注意：您可能需要将`wp`in替换为`wp_options`您的站点前缀。如果您不确定您的前缀，请检查您的 wp-config.php。

```
SELECT * FROM wp_options WHERE option_name='siteurl' OR option_name='home'; 
```

这应该返回以下内容：

```
+-----------+---------+-------------+--------------------+----------+
| option_id | blog_id | option_name | option_value       | autoload |
+-----------+---------+-------------+--------------------+----------+
|         3 |       0 | siteurl     | http://hexcoder.us | yes      |
|        39 |       0 | home        | http://hexcoder.us | yes      |
+-----------+---------+-------------+--------------------+----------+ 
```

在我的情况下，这是正确的，因为我的网站实际上是，`http://hexcoder.us`但在您的情况下，应该是您网站的 URL。假设这是问题所在，运行以下查询应该可以解决您的问题：

注意：根据您所需的站点设置，您可能需要稍后在管理面板中更改永久链接设置。

```
UPDATE wp_options SET option_value='http://your-site-url' WHERE option_name='siteurl' OR option_name='home'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T14:30:04.103

告诉您的 Wordpress 管理员更新插件“ **Adminimize** ”。

# javascript - 区分 Youtube-Google 链接帐户与未链接帐户

> ID：11063536
> 
> 赞同：1
> 
> 时间：2012-06-16T12:43:52.183
> 
> 标签：javascript, youtube-api, youtube-javascript-api

如何区分 Youtube-Google 链接的帐户与未链接的 Youtube API。通过发送此请求成功检索有关当前登录用户的信息后：

[https://gdata.youtube.com/feeds/api/users/default?v=2?access_token=YSECURITY_TOKEN&alt=json](https://gdata.youtube.com/feeds/api/users/default?v=2?access_token=YSECURITY_TOKEN&alt=json)

我得到包含用户信息的 JSON 结构。但是没有属性表明该用户是否已链接或取消链接 Google 帐户。通过搜索 Youtube API 文档和谷歌搜索，我找不到直接的答案，只有如何在此页面上检查您的帐户是否已链接：

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=69964](http://support.google.com/youtube/bin/answer.py?hl=en&answer=69964)

我正在使用 javascript 和 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:26:02.590

好像我找到了。描述 API 版本 2.0 和 2.1 之间差异的文档的 Youtube API 部分说：

> 在 2.1 版中，未关联 Google 帐户的用户的 YouTube 用户个人资料条目将包含一个`<yt:incomplete>`标签。如果您希望修改您的应用程序以使其不向未关联 Google 帐户的用户显示不受支持的功能（或为这些功能提供不同的显示），则此标记很有用。
> 
> 此外，在 2.1 版中，具有未关联 Google 帐户的用户的个人资料条目仅包含一些标签，这些标签可以包含在具有 YouTube 帐户的用户的个人资料条目中。`<entry>`标签定义列出了可能出现在 YouTube 帐户和未链接的 Google 帐户的个人资料条目中的标签。

所以我可以搜索是否存在不完整的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T20:13:18.507

YouTube API v2 已被弃用。YouTube API v3 提供了这个接口：[https ://www.googleapis.com/youtube/v3/channels?part=status,snippet&mine=true](https://www.googleapis.com/youtube/v3/channels?part=status,snippet&mine=true)

结果看起来像 `{ "kind": "youtube#channelListResponse", "etag": "\"DsOZ7qVJA4mxdTxZeNzis6uE6ck/ZcfqyiqeHVjpZe2OzRYKDx0FikI\"", "pageInfo": { "totalResults": 1, "resultsPerPage": 1 }, "items": [ { "kind": "youtube#channel", "etag": "\"DsOZ7qVJA4mxdTxZeNzis6uE6ck/XMRC3bd-8_FpW1Mxf8T-cDbmbns\"", "id": "UCsscztqpacVMxemmxNkwVQg", "snippet": { "title": "", "description": "", "publishedAt": "2012-07-17T03:19:15.000Z", "thumbnails": { "default": { "url": "[https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/1.jpg](https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/1.jpg)" }, "medium": { "url": "[https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/mq1.jpg](https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/mq1.jpg)" }, "high": { "url": "[https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/hq1.jpg](https://i.ytimg.com/i/sscztqpacVMxemmxNkwVQg/hq1.jpg)" } } }, "status": { "privacyStatus": "private", "isLinked": false, "longUploadsStatus": "eligible" } } ] }`

注意状态中的“isLinked”值。

# javascript - 需要帮助 Facebook 应用程序和页面选项卡高度使用 FB.Canvas.setSize 调整大小

> ID：11063540
> 
> 赞同：2
> 
> 时间：2012-06-16T12:44:09.043
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我想在页面加载时自动调整 Facebook 应用程序高度和页面选项卡高度，但它不起作用。

我确定我做错了一些简单的事情，但我无法识别它。

这是我正在使用的简化代码：（*表示`++++`剪切代码）*

```
<!DOCTYPE ++++ >
<html>
 <head>++++</head>
 <body>
  <div id="container">++++</div>
  <div id="fb-root"></div>
  <script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script> 
  <script type="text/javascript">
   FB.init({appId: '++++', status: true, cookie: true, xfbml: true });
   FB.Canvas.setSize();
  </script>
 </body>
</html> 
```

提前致谢！

**更新：**

在`Settings`, `Advanced`, `Canvas Settings`,下`Canvas Height`，我检查了该`fixed`选项。（据我所见，已经没有`Settable`选项了，估计已经改名了。）

当我调用该方法时，我的应用程序已完全加载。

通过一点调查，我可以看到应用程序高度和页面选项卡高度开始变成正确的大小，然后几乎立即增加到`1200px`. （我`fixed height`的设置为`600px`.

**更新：**在 iframe 代码上，它显示以下内容：`<iframe src="++ommited++?signed_request=++ommited++" frameborder="0" scrolling="AUTO" style="width:810px; height:1200px;padding:0px; margin:0px" marginheight="0px" marginwidth="0px"></iframe>`. 如您所见，它说`height:1200px;`这似乎是问题所在。

**更新：**似乎该应用默认为我的应用设置中设置的大小，然后立即调整为`1200px`. 即使我删除了用于更改应用程序和页面选项卡高度的 Facebook 代码，也会发生这种情况。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T07:16:06.493

您必须检查 Canvas 是否已加载`FB.Canvas.setDoneLoading()`

```
FB.Canvas.setDoneLoading( function(response) {
    console.log(response.time_delta_ms);
    FB.Canvas.setAutoGrow();
}); 
```

FB 文档：[https ://developers.facebook.com/docs/reference/javascript/FB.Canvas.setDoneLoading/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setDoneLoading/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T06:35:06.247

我在 FB 页面中调整我的页面选项卡大小时遇到​​了此类问题。就我而言，我在我的网站页面中进行了**以下更改**，我希望将其呈现在我的 FB 页面上，作为选项卡：

```
<html>
<head>
    <script type="text/javascript">
        window.fbAsyncInit = function()
        {
            FB.Canvas.setSize();
        }
    </script>
</head>

<body>
    ......
    ......
    ......
    <div id="fb-root"></div>
    <script type="text/javascript" src="http://connect.facebook.net/de_DE/all.js"></script>
    <script type="text/javascript">
        FB.init({
        appId: 'Your_App_Id', 
        status: true, 
        cookie: true, 
        xfbml: true
        });
        FB.Canvas.setAutoGrow();
    </script>
</body>
</html> 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T18:15:49.457

```
<style>
#wrap { width: 600px; height: 390px; padding: 0; overflow: hidden; }
#frame { width: 800px; height: 520px; border: 1px solid black; }
#frame {
    zoom: 0.75;
    -moz-transform: scale(0.75);
    -moz-transform-origin: 0 0;
    -o-transform: scale(0.75);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(0.75);
    -webkit-transform-origin: 0 0;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T13:15:59.870

首先，确保在您的应用设置中将画布高度设置为“可设置（默认：800px）”，否则它不*应该*工作。

然后，在您调用该方法时，您的应用程序是否已完全加载（关于可能影响页面高度的所有图像、css 等）？

否则，您可能会尝试 FB.Canvas.setAutoGrow - 它会定期检查您的页面高度并调整 iframe 高度。

# iphone - 如何找到facebook的friend_id列表？

> ID：11063541
> 
> 赞同：2
> 
> 时间：2012-06-16T12:44:17.683
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, ios5

如何在 Facebook for iPhone sdk 上添加好友 id 列表？

[https://graph.facebook.com/me/friend?access_token=](https://graph.facebook.com/me/friend?access_token=your)您的访问令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T12:44:18.247

//好友：[https](https://graph.facebook.com/me/friends?access_token=your) ://graph.facebook.com/me/friends?access_token=你的访问令牌

```
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];

[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://graph.facebook.com/me/friends?access_token=%@", token]]];
[request setHTTPMethod:@"GET"];

NSError *error;
NSURLResponse *response;
NSData *returnData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *returnString=[[NSString alloc]initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@",returnString);  
SBJSON *json = [[SBJSON new] autorelease];

dic = [[NSMutableDictionary alloc] initWithDictionary:[json objectWithString:returnString error:nil]];

FriendIdArr=[[NSMutableArray alloc]initWithArray:[dic valueForKey:@"data"]]; 
```

// FriendIdArr 是最终好友 id 列表数组

# apache-flex - flex4 fb 发送消息到其他或 fb 聊天室

> ID：11063543
> 
> 赞同：1
> 
> 时间：2012-06-16T12:44:32.380
> 
> 标签：apache-flex

我想通过 fb 发送消息。但是有一些消息不在我的朋友列表中

使用该代码

```
FacebookDesktop.api("http://graph.facebook.com/100003708317770/Link",submitPostHandler,{message:statusInput.text},"POST"); 
```

但总是显示错误 #100

任何人都可以帮助非常感谢

# joomla - Joomla 2.5 - 修改注册表和逻辑

> ID：11063548
> 
> 赞同：3
> 
> 时间：2012-06-16T12:44:57.550
> 
> 标签：joomla, registration, user-registration

您好，我是 Joomla 的新手，我想更改创建帐户的方式（在 Joomla 2.5 中）：

1.  更改注册表单（删除一两个字段）
2.  更改注册逻辑：我想在发送的电子邮件（和 pdf 附件）中添加更多内容，并且我想调用其他一些函数（或发出额外请求），分析结果然后将响应返回给客户端。

有哪些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:59:17.180

对不适用的早期版本有一个较早的答案，但发现[本教程](http://library.logicsistemi.it/en/joomla/developing-joomla-25-mvc-components-2/40-joomla-25-extend-users-data-with-custom-fields)可以让自己加快速度。它列出了您需要更改的所有文件等，但没有提及您的电子邮件要求。为此，您可能需要`function register($temp)`查看`components\com_users\models\registration.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T05:00:27.427

您可以从 PHP 文件中模板的组件目录更改设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T01:47:10.223

如果你安装[SEBLOD](http://www.seblod.com/)就可以了，它是一个内容构造器，可以修改文章表单、用户注册表等等。

它几乎可以帮助您完成所需的一切，但是要调用其他函数或提出其他请求，您需要对 Joomla registration.php 进行更多研究

# c# - 使用 NameValueCollection 类存储两个以上的值

> ID：11063549
> 
> 赞同：1
> 
> 时间：2012-06-16T12:45:02.943
> 
> 标签：c#, .net, windows

我有一组字符串需要存储在一组中，例如：

ID、名字、姓氏、城市、国家、语言

以上均适用于一个人（以身份证为代表）

现在我有 60 - 70 个（并且还在增长），我该如何组织它们？我查看了 NameValueCollection 类 - 它完全符合我的要求（如果我只有两个字段），但由于我有 6 个字段，所以我不能使用它。例如：

```
public NameValueCollection personCollection = new NameValueCollection
    {
        { "harry", "townsend", "london", "UK", "english" },
        { "john", "cowen", "liverpool", "UK", "english" },
        // and so on...
    }; 
```

虽然这不起作用:(有人可以提出另一种实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:50:54.403

你如何用你需要的属性创建一个 Person 类？

```
 public class Person
{
    public int id { get; set; }
    public string firstname { get; set; }
    public string lastname { get; set; }
    // more attributes here
} 
```

然后，只需实例化 Person 类并创建新的 Person 对象。然后，您可以将这些人员添加到列表中。

```
 Person somePerson = new Person();
        somePerson.firstname = "John";
        somePerson.lastname = "Doe";
        somePerson.id = 1;

        List<Person> listOfPersons = new List<Person>();
        listOfPersons.Add(somePerson); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:55:30.310

如果您绝对不想创建任何新类，则可以使用由您的 ID 键入的列表字典：

```
IDictionary<string, IList<string>> personCollection =
    new Dictionary<string, IList<string>>
{
    { "1", new [] { "harry", "townsend", "london", "UK", "english" }},
    { "2", new [] { "john", "cowen", "liverpool", "UK", "english" }},
}; 
```

…然后您可以使用字典和列表索引器访问：

```
Console.WriteLine(personCollection["1"][0]);   // Output: "harry"
Console.WriteLine(personCollection["2"][2]);   // Output: "liverpool" 
```

但是，正确的 OOP 方法是定义一个具有相应字符串属性的类：

```
public class Person
{
    public string Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    public string Language { get; set; }

    public Person() { }

    public Person(string id, string firstName, string lastName, 
                  string city, string country, string language)
    {
        this.Id = id;
        this.FirstName = firstName;
        this.LastName = lastName;
        this.City = city;
        this.Country = country;
        this.Language = language;
    }
} 
```

然后，您可以创建人员列表：

```
IList<Person> persons = new List<Person>()
{
    new Person("1", "harry", "townsend", "london", "UK", "english"),
    new Person("2", "john", "cowen", "liverpool", "UK", "english"),
}; 
```

# jquery - jQuery取消绑定后如何绑定

> ID：11063556
> 
> 赞同：2
> 
> 时间：2012-06-16T12:45:37.080
> 
> 标签：jquery

我有一个超级简单的 id 标签，它有点击事件。我已经使用 JQuery unbind 来禁用某些场景的点击，当我尝试使用下面的代码再次绑定时，点击事件永远不会被触发。

```
disableButton()
{
    $('#id1').unbind('click');
}
        .......
enableButton()
{
    $('#id1').bind('click');
} 
```

点击处理程序如下所示：

```
$("#id1").click(function () {
    //apply some complex front end business rules
} 
```

有人可以帮我解决我做对/错的事情吗？

我只想启用或禁用点击，有没有更简单的方法来实现这一点？

**更新：**

据我了解，bind 和 on 都需要一个被执行的回调函数。这对我来说将是一个问题，因为我不想执行点击事件，而只是启用点击事件并准备好点击发生。

是否可以仅禁用和启用单击事件而无需传递回调函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T12:55:52.560

首先声明函数：

```
function clickFunction(){
//your code here, to be execute on click
} 
```

当你需要它时，在点击事件上绑定点击功能

```
$('#id1' ).on("click", clickFunction()) 
```

并在稍后解除绑定：

```
$('#id1' ).off("click", clickFunction()) 
```

当你想再次绑定它时： `$('#id1' ).on("click", clickFunction())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-11T02:52:56.723

我刚刚遇到了一个类似的问题，需要取消绑定 on("click") 并且我可以让它停止的唯一方法是使用我定义的计数器上的开关。也许这种方法可能会有所帮助。

```
$(".images").on("click", function () {
    console.log(this.id);

    switch (cntr) {
       case 0:
           something();
           break;
       case 1:
           something();
           break;
       default:
           return;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T04:39:42.390

给定的解决方案解决了我的问题，你也应该试试这个。

```
$(function() {
    bindratings();
});

function bindratings() {
    var selector = $(".class_name");
    selector.bind("click", function() {
        selector.unbind("click");

        // write your code here

        setTimeout('bindratings();', 100);
    });
} 
```

# php - PHP用户权限检查

> ID：11063557
> 
> 赞同：1
> 
> 时间：2012-06-16T12:45:38.673
> 
> 标签：php

只是想知道用户权限检查，

您是否应该在会话中保留权限

例如。选择用户信息并将权限ID存储在会话中

还是在进行查询之前对数据库进行所有时间的权限检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:49:36.620

我每次都从数据库中获取数据，所以当我更改权限时，用户会立即更新，而不是下次登录。

许多人会认为可能会有性能损失。但是，如果您像大多数 PHP 用户一样使用 MySQL，结果将保存在 RAM 中的查询缓存中，并且几乎可以立即使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T12:49:42.440

这取决于您网站的安全级别。如果您认为安全性对您的网站非常重要，并且您希望在用户更改后立即对其进行安全更改，则必须使用数据库调用。但是，如果您的权限系统是这样设计的，它可能会变得非常缓慢和低效。

如果安全性可以“等待”下一个会话，那么我认为最好在会话中保存权限以避免性能损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T12:50:59.277

这是 memcache 的一个很好的用例。您可以将用户权限存储在数据库中，将它们拉下一次并缓存它们。随后的页面加载将从 memcache 中获取。

当管理员更改用户的权限时，该操作可以简单地使缓存键无效（删除）。然后，下次您从缓存中获取时，它不会在那里，您会知道再次访问数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T12:52:20.043

在应用程序中，不可用的数据不应该可用。如何建立这个简单的过程取决于您，并且很大程度上取决于您如何构建应用程序。

例如，您允许使用您在整个应用程序中共享的数据库凭据进行数据访问，可能在其配置值内。

假设你这样做：如果你对此没有问题，为什么你那么关心一个更详细的案例？

# c - C 套接字错误

> ID：11063563
> 
> 赞同：1
> 
> 时间：2012-06-16T12:46:20.233
> 
> 标签：c, sockets, client, pthreads, semaphore

出于某种原因，这行代码给了我很大的麻烦。

```
struct socketaddr_in clientaddr; 
```

错误信息是：

```
tiny.c:23:24: error: storage size of ‘clientaddr’ isn’t known 
```

如果我删除该行代码，我会收到以下错误消息：

```
s2s2@s2s2-ThinkPad-T61:~/Documents/Cprogramming/web_server$ make
gcc -std=gnu99 -O2 -lpthread -lrt -o server tiny.c csapp.c
/tmp/ccVxw07i.o: In function `Pthread_create':
csapp.c:(.text+0x7e5): undefined reference to `pthread_create'
/tmp/ccVxw07i.o: In function `Pthread_cancel':
csapp.c:(.text+0x805): undefined reference to `pthread_cancel'
/tmp/ccVxw07i.o: In function `Pthread_join':
csapp.c:(.text+0x825): undefined reference to `pthread_join'
/tmp/ccVxw07i.o: In function `Pthread_detach':
csapp.c:(.text+0x845): undefined reference to `pthread_detach'
/tmp/ccVxw07i.o: In function `Sem_init':
csapp.c:(.text+0x895): undefined reference to `sem_init'
/tmp/ccVxw07i.o: In function `P':
csapp.c:(.text+0x8b5): undefined reference to `sem_wait'
/tmp/ccVxw07i.o: In function `V':
csapp.c:(.text+0x8d5): undefined reference to `sem_post'
/tmp/ccVxw07i.o: In function `Pthread_once':
csapp.c:(.text+0x881): undefined reference to `pthread_once'
collect2: ld returned 1 exit status
make: *** [webServer-gcc] Error 1 
```

以下是[csapp.c](http://www.ece.cmu.edu/~ece845/sp02/csapp.c)和[csapp.h](http://www.ece.cmu.edu/~ece845/sp02/csapp.h)文件的链接。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T12:57:16.477

> tiny.c:23:24：错误：“clientaddr”的存储大小未知

您需要像`struct structname instancename`在 C 中一样声明结构是有原因的 - 这样 C 编译器就知道要分配多少内存 - 以及可能如何对齐该数据等。

这是 C 编译器告诉你不存在这样的结构的方式`socketaddr_in`——它会是`sockaddr_in`.

以这种方式解决结构命名的常见方法是像这样定义它们：

```
typedef struct _struct_name
{
    /* ... */
} structname; 
```

then`structname`可以用作没有`struct`限定符的类型。您也不必对结构的定义执行此操作，您可以稍后再执行。

因此，简短的回答是`socketaddr_in`在 POSIX 中不作为结构存在 - 它是`sockaddr_in`.

# android - 找不到源错误

> ID：11063564
> 
> 赞同：1
> 
> 时间：2012-06-16T12:46:57.183
> 
> 标签：android, file

我是新的 android 开发人员，当我运行此代码时，我收到此错误“找不到源”。就在它到达 url.openStream() 任何想法如何解决这个问题？

```
 try { 
        URL url = new URL("http://pollsdb.com/test.txt"); 
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream())); 
        String str; 
        while ((str = in.readLine()) != null) { 
        } 
        in.close(); 

    } catch (MalformedURLException e) { 
    } catch (IOException e) { 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:55:08.430

```
 <uses-permission
        android:name="android.permission.INTERNET" /> 
```

在您的 AndroidManifest.xml 中的第一个清单标记下添加它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:35:46.147

我也有同样的问题。但是现在，我已经通过参考[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html) 关于线程使用解决了这个问题。

您需要创建一个工作线程来打开 URL 流，而不是使用主线程（UI 线程）。

当然，你还需要添加

`<uses-permission android:name="android.permission.INTERNET" />` 在你的 AndroidManifest.xml

# android - 如何使列表项变灰？

> ID：11063565
> 
> 赞同：2
> 
> 时间：2012-06-16T12:47:12.270
> 
> 标签：android, listview

我怎样才能将我的列表项中的一个完全变灰，我并不是说将背景设置为灰色或某事。别的。

```
 public View getView(Context context)
    {
        View view = _inflater.inflate(R.layout.transfer_item, null);
        view.setBackgroundColor(_unmoveable ? 0xFF111111 : Color.TRANSPARENT);
        //view.setAlpha(0.5f);//? it says method did not exist ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:49:26.033

将一个视图放在其他所有内容之上的行中，并将该视图设置为您的灰色。

# java - Java CDI @PersistenceContext 和线程安全

> ID：11063567
> 
> 赞同：21
> 
> 时间：2012-06-16T12:47:21.073
> 
> 标签：java, java-ee-6, cdi

多个类中的 EntityManager @Inject[ed] 是否是线程安全的？

```
@PersistenceContext(unitName="blah")
private EntityManager em; 
```

[这个](https://stackoverflow.com/questions/10380539/persistencecontext-entitymanager-thread-safety-in-spring-and-java-ee)问题和[这个](https://stackoverflow.com/questions/5113716/spring-persistencecontext-and-autowired-thread-safety)问题似乎是特定于 Spring 的。我正在使用 Jave EE CDI 服务

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-16T13:11:32.993

令我惊讶的是（在[春季使用](/questions/tagged/spring "显示标记为“春天”的问题")[jpa](/questions/tagged/jpa "显示标记为“jpa”的问题")多年之后）**不是线程安全**的。如果你深入思考一下，这实际上是可以理解的：它只是原生 JPA 实现的包装器，例如 Hibernate 中的 session，它反过来又是[jdbc](/questions/tagged/jdbc "显示标记为“jdbc”的问题")连接的包装器。话虽这么说不能是线程安全的，因为它代表一个数据库连接/事务。`EntityManager` **`EntityManager``EntityManager`**

 **那么为什么它在 Spring 中起作用呢？因为它将目标包装`EntityManager`在代理中，所以原则上`ThreadLocal`用于为每个线程保留本地引用。这是必需的，因为 Spring 应用程序构建在单例之上，而 EJB 使用对象池。

在您的情况下，您该如何处理？我不知道[cdi](/questions/tagged/cdi "显示标记为“cdi”的问题")，但在 EJB 中，每个无状态和有状态会话 bean 都是池化的，这意味着您不能真正同时从多个线程调用同一个 EJB 的方法。因此`EntityManager`从不同时使用。话虽如此，**注入`EntityManager`是安全**的，至少注入到无状态和有状态会话 bean 中。

然而，**注入`EntityManager`servlet 和单例 bean 并不安全**，因为可能有多个线程可以同时访问它们，从而弄乱了相同的 JDBC 连接。

# 也可以看看

*   [*注入 EntityManager 时注意线程安全*](http://javahowto.blogspot.no/2007/10/mind-thread-safety-when-injecting.html)
*   [*EntityManager 不是线程安全的*](http://drc.ideablade.com/xwiki/bin/view/Documentation/entitymanager-not-thread-safe)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-28T14:40:08.060

尽管**EntityManager**实现本身不是线程安全的，但**Java EE**容器注入了一个代理，该代理将所有方法调用委托给事务绑定的**EntityManager**。因此，每个事务都使用它自己的**EntityManager**实例。至少对于事务范围的持久性上下文（这是默认设置）而言，这是正确的。

如果容器将在每个 bean 中注入一个新的**EntityManager**实例，则以下内容将不起作用：

```
@Stateless
public class Repository1 {
   @EJB
   private Repository2 rep2;

   @PersistenceContext(unitName="blah", type = PersistenceContextType.TRANSACTION)
   private EntityManager em;

   @TransactionAttribute
   public void doSomething() {
      // Do something with em
      rep2.doSomethingAgainInTheSameTransaction();
   }
}

@Stateless
public class Repository2 {
   @PersistenceContext(unitName="blah", type = PersistenceContextType.TRANSACTION)
   private EntityManager em;

   @TransactionAttribute
   public void doSomethingAgainInTheSameTransaction() {
      // Do something with em
   }
} 
```

*doSomething->doSomethingAgainInTheSameTransaction*调用发生在单个事务中，因此 bean 必须共享相同的**EntityManager**。实际上，它们共享相同的代理**EntityManager**，它将调用委托给相同的持久性上下文。

因此，您可以在单例 bean中合法使用**EntityManager ，如下所示：**

```
@Singleton
@ConcurrencyManagement(ConcurrencyManagementType.BEAN)
public class Repository {
   @PersistenceContext(unitName="blah", type = PersistenceContextType.TRANSACTION)
   private EntityManager em;
} 
```

**另一个证据是EntityManager** javadoc中没有提到线程安全。因此，当您留在**Java EE**容器中时，您不应该关心对**EntityManager**的并发访问。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-02T11:44:57.523

我觉得我需要更深入地了解这一点，因为我的第一个答案并非绝对正确。

我将参考**JSR-220 (EJB 3.0)**。在第**5.2 节获取 EntityManager**中，您可能会发现：

> 实体管理器不能在多个并发执行的线程之间共享。实体管理器只能以单线程方式访问。

就是这样。除非正确同步，否则您可能会停止阅读此处并且永远不要在单例 bean 中使用**EntityManager 。**

但我相信规范中存在混淆。实际上有两种不同的**EntityManager**实现。第一个是提供者实现（比如 Hibernate），它不一定是线程安全的。

另一方面，**EntityManager**有一个容器实现。根据上述内容，这也不应该是线程安全的。但是容器的实现充当代理并将所有调用委托给真实提供者的**EntityManager**。

**因此，在5.9 Runtime Contracts between the Container and Persistence Provider**的规范中更进一步：

> 对于事务范围的持久性上下文的管理，如果没有与 JTA 事务关联的 EntityManager：当第一次使用 Persistence-ContextType.TRANSACTION 调用实体管理器时，容器通过调用 EntityManagerFactory.createEntityManager 创建一个新的实体管理器在 JTA 事务中执行的业务方法的范围内。

这反过来意味着每个启动的事务都会有一个不同的**EntityManager**实例。根据**5.3**，创建**EntityManager**的代码是安全的：

 **> EntityManagerFactory 接口的方法是线程安全的。

但是如果有一个与 JTA 事务关联的**EntityManager怎么办？**根据规范，绑定与当前 JTA 事务关联的**EntityManager**的代码可能不是线程安全的。

但是我真的想不出一个应用程序服务器实现可以与注入到无状态 bean中的**EntityManager一起正常工作，而不能在单例中正确工作。**

所以我的结论是：

1.  如果您想严格遵循**JSR-220** ，那么在同步访问之前不要在单例中使用**EntityManager 。**
2.  我个人将继续在单例中使用**EntityManager**，因为我的应用程序服务器实现与它完美配合。在执行此操作之前，您可能需要检查您的实现。****

# jquery - 使用 Jquery 将事件动态插入到 Fullcalendar

> ID：11063568
> 
> 赞同：6
> 
> 时间：2012-06-16T12:47:23.197
> 
> 标签：jquery, fullcalendar

我无法使用 Jquery 向 fullCalendar 添加新事件。我正在使用 Eclipse 开发 Web，并且根本不熟悉 Ajax，而且显然它不适用于我的 Eclipse。

一切都写在 jquery 的 button.click 函数中。

```
var subject = $("#txtEventName").val();  //the title of the event           
var dateStart = $("#txtDate").val();     //the day the event takes place
var dateEnd = $("#txtDateEnd").val();    //the day the event finishes
var allDay = $("#alldayCheckbox").val(); //true: event all day, False:event from time to time           

var events=new Array();     
event = new Object();       
event.title = subject; 
event.start = dateStart;    // its a date string
event.end = dateEnd;        // its a date string.
event.color = "blue";
event.allDay = false;

events.push(event);
$('#calendar').fullCalendar('addEventSource',events); 
```

未检测到错误，但未创建事件。PS：如果在 jQuery 中没有其他方法，我想继续使用数组提要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T22:16:19.290

尝试这个：

```
var newEvent = new Object();

newEvent.title = "some text";
newEvent.start = new Date();
newEvent.allDay = false;
$('#calendar').fullCalendar( 'renderEvent', newEvent ); 
```

请注意，当您分配值以[启动时](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)，它需要采用受支持的格式之一。

您可以指定 IETF 格式`Wed, 18 Oct 2009 13:00:00 EST`的字符串（例如：）、IS​​O8601 格式的字符串（例如：）`2009-11-05T13:15:30Z`或 UNIX 时间戳。

# dependencies - 我应该如何管理部署为单独 NuGet 包的项目之间的依赖关系？

> ID：11063571
> 
> 赞同：3
> 
> 时间：2012-06-16T12:47:33.117
> 
> 标签：dependencies, nuget

我正在使用 NuGet 来管理我在几个 WebAPI 项目中使用的共享库，但我不确定如何管理我的共享项目的各个部分之间的依赖关系。

我的共享库配置为包含三个项目的解决方案：

```
 +------MyUtils.Core------+
           |                        |
MyUtils.WebApi.Windsor    MyUtils.WebApi.Security 
```

Windsor 和 Security 模块都依赖于 Core，但仍应作为单独的 NuGet 包进行部署。

我的问题是 - 我应该将 Core 作为 NuGet 包单独发布，然后将该包添加到 Windsor 和 Security，还是应该在 Windsor 和 Security 项目中添加对 Core 的项目引用，然后将它们作为单独的项目发布？

如果是后者，如果我正在构建一个同时具有 Windsor 和 Security 的项目，并且我将其中一个升级到包含不同版本的 MyUtils.Core 的版本，我是否会冒潜在冲突的风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:54:26.550

这就是我会做的，假设我理解这个问题......

做3个包。MyUtils.Core 是最简单的，因为它没有依赖项。当您创建 Core 时，它​​将以一种或另一种方式获得一个版本号（您可以使用程序集版本号，或手动分配。）

创建其他两个包时，请指定 Core ( [docs.nuget.org](http://docs.nuget.org/docs/reference/versioning#Specifying_Version_Ranges_in_.nuspec_Files) )的确切版本号

示例 MyUtils.WebApi.Windsor.nuspec：

```
<dependency id="MyUtils.Core" version="[1.0.1.1]" /> 
```

完成此操作后，您可以更新 Security 以使用下一个版本，例如 1.0.1.2。但是，您将避免在消耗两者的项目中发生冲突。准确指定版本号后，NuGet 将拒绝更新安全性，除非它可以找到同样依赖于 1.0.1.2 的 Windsor 版本。如果找不到兼容的软件包，则不进行更新。如果可以，那么它会在安全更新时同时更新。

默认情况下，版本号是这样指定的，

```
<dependency id="MyUtils.Core" version="1.0.1.1" /> 
```

在这种情况下，它意味着任何版本的 MyUtils.Core >= 1.0.1.1。因此，如果您使用默认语法，则可能会在同时使用 Windsor 和 Security 的项目中发生冲突，但您应该能够使用确切的版本语法来避免这种情况。

假设您选择了另一条路线，没有为 Core 创建包，而是使用了项目引用。然后大概你会在每个需要它的包中放置一个 Core.dll 的副本。好吧，消费项目一次只能引用一份Core.dll。我必须使用 NuGet 来查看它会添加哪个引用（最高版本与最近安装的版本），但最重要的是，如果您有重大更改，那么您的依赖库之一就会中断。因此，似乎获取项目参考可能不是最佳解决方案。

*当然，只有在确实*需要避免冲突时才需要这样做。如果您的 1.0.1.2 向后兼容，那么没有理由不允许 NuGet 中的默认行为。

# java - 使用单个 h:message 或 h:messages 显示与包含 h:form 相关的所有消息？

> ID：11063572
> 
> 赞同：1
> 
> 时间：2012-06-16T12:47:43.647
> 
> 标签：java, jsf, primefaces

`h:messages`a 内的组件`h:form`也显示与外部组件相关的消息。

如何将其限制为仅显示与包含内的组件相关的消息`h:form`？

我不喜欢`h:message`为每个和每个输入组件使用单独的标签来膨胀我的代码。

* * *

> 将 Primefaces 3.4-SNAPSHOT 与 JSF 2.2.0-m03 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:01:45.303

您可以进行 ajax 调用以仅渲染所需的`<h:messages`. 例如

```
<h:commandButton value="submit" actionListener="#{fooBean.submit}">
    <f:ajax render="msgs"/>
</h:commandButton>
<h:messages id="msgs" globalOnly="true"/> 
```

或者在 primefaces 的情况下，在命令按钮中使用更新属性来进行 ajax 调用

# interface-builder - 属性检查器：如何使用“拉伸”

> ID：11063574
> 
> 赞同：16
> 
> 时间：2012-06-16T12:48:09.157
> 
> 标签：interface-builder, xcode4.3

View 子框 Interface Builder 的 Attributes Inspector 中的 Stretching 框中的数字是多少？

（作为一个附带问题 - 我想像 Apple 这样受人尊敬的公司实际上会发布其工具的文档，而不是让开发人员猜测所有内容；那么，这个文档在哪里？...）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-12T00:54:36.823

这篇博文 Karol 似乎很好地解释了它。- [http://macoscope.com/blog/stretchable-images-using-interface-builder/](http://macoscope.com/blog/stretchable-images-using-interface-builder/)

> 拉伸属性非常简单（我不这么认为，但文章确实如此：）。
> 
> 原始图像左侧未拉伸的分数由 X 指定 原始图像在 x 轴上被拉伸的分数由 Width 指定 原始图像左侧未拉伸的分数等于 1 - X - 宽度 如果我们使用 0 作为宽度，拉伸区域将在左侧的最后一个像素和右侧的第一个像素之间进行插值 Y 轴的工作方式类似

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T23:27:11.213

在文本编辑器中查看`.storyboard`文件（认为它是一个`XML`文件）揭示了答案：它链接到`UIView`的[contentStretch](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/contentStretch)属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T01:23:58.870

仅供参考 - 这在 iOS 6.0 中已被弃用[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/occ/instp/UIView/contentStretch](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/index.html#//apple_ref/occ/instp/UIView/contentStretch)

（更新链接）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-11T21:27:32.613

弃用文档

[![在此处输入图像描述](../Images/1fc8ded9575fb668057f482180106c26.png)](https://i.stack.imgur.com/LSKJU.png)

实例属性

# 内容拉伸

定义视图的可拉伸和不可拉伸区域的矩形。

## 已弃用

> 要达到相同的效果，请改用[resizableImageWithCapInsets](https://developer.apple.com/reference/uikit/uiimage/1624102-resizableimagewithcapinsets?language=objc) :。

# c# - ActiveX 控件“6bf52a52-394a-11d3-b153-00c04f79faa6”无法实例化，因为当前线程不在单线程单元中

> ID：11063575
> 
> 赞同：2
> 
> 时间：2012-06-16T12:48:11.870
> 
> 标签：c#, multithreading

我有一个 C# 主窗口窗体，它侦听 UDP 端口以获取消息。收到所需消息后，它将启动另一个表单（视频表单）。此视频表单包含一个将播放视频的 axWindowsMediaPlayer1。

但是每当它接收到启动视频表单的消息时，它都会收到一个 UDP 错误“ActiveX 控件 '6bf52a52-394a-11d3-b153-00c04f79faa6' 无法实例化，因为当前线程不在单线程单元中。”

```
 private void initCommunication()
    {
        CheckForIllegalCrossThreadCalls = false;
        try
        {                

            // For receiving messages
            //We are using UDP sockets
            serverSocket = new Socket(AddressFamily.InterNetwork,
                SocketType.Dgram, ProtocolType.Udp);

            //Assign the any IP of the machine and listen on port number 
            IPEndPoint ipEndPoint2 = new IPEndPoint(IPAddress.Any, listeningPort);

            //Bind this address to the server
            serverSocket.Bind(ipEndPoint2);

            IPEndPoint ipeSender = new IPEndPoint(IPAddress.Any, 0);
            //The epSender identifies the incoming clients
            EndPoint epSender = (EndPoint)ipeSender;

            //Start receiving data
            serverSocket.BeginReceiveFrom(byteData, 0, byteData.Length,
                SocketFlags.None, ref epSender, new AsyncCallback(OnReceive), epSender);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "UDP Error",
                MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    #region UDP OnReceive
    private void OnReceive(IAsyncResult ar)
    {
        try
        {
            IPEndPoint ipeSender = new IPEndPoint(IPAddress.Any, 0);
            EndPoint epSender = (EndPoint)ipeSender;

            serverSocket.EndReceiveFrom(ar, ref epSender);

            //Transform the array of bytes received from the user into an
            //intelligent form of object Data
            Data msgReceived = new Data(byteData);

            switch (msgReceived.strMessage)
            {
                case "1":
                    btnPlayVideo_Click(null,null);
                    break;                    
            }               

            txtLog.Text += msgReceived.strName + " : " + msgReceived.strMessage + "\r\n";
            txtLog.SelectionStart = txtLog.Text.Length;
            txtLog.ScrollToCaret();
            serverSocket.BeginReceiveFrom(byteData, 0, byteData.Length, SocketFlags.None, ref epSender,
                    new AsyncCallback(OnReceive), epSender);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message, "UDP OnReceive Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
    #endregion 
```

此行中抛出错误 axWindowsMediaPlayer1 = new AxWMPLib.AxWindowsMediaPlayer();

我在网上搜索过，如何创建 STA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:50:37.010

将`[STAThread]`属性添加到您的`Main`方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:49:29.807

您的主要问题是 serverSocket.BeginReceiveFrom() 的回调在线程池线程上运行。您可能已经收到了强烈的警告，它使您将 CheckForIllegalCrossThreadCalls 设置为 false。这不是一件明智的事情，它只是阻止 Winforms 告诉你做错了，它并没有阻止你做错。结果确实越来越难以解释异常。你很幸运能得到一个，更典型的是它有点工作，但然后让你的程序以随机​​和无法诊断的方式失败。

您只能在主线程上调用影响 UI 的代码，例如 txtLog.Text 分配。创建新表单也应该只在主线程上完成。在 OnReceive() 回调中使用主窗体的 BeginInvoke() 方法（或 txtLog.BeginInvoke 方法）来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:49:13.017

设置运行`axWindowsMediaPlayer1`的线程`ApartmentState`属性`ApartmentState.STA`如下：

```
newThread.ApartmentState = ApartmentState.STA; 
```

更好的方法是阅读 MSDN。

希望这对您有所帮助。

# php - 页面加载时 SQL 调用过多？

> ID：11063577
> 
> 赞同：3
> 
> 时间：2012-06-16T12:48:40.537
> 
> 标签：php, mysql

我正在为私人日托中心的一小部分父母构建一个网站。该站点所需的功能之一是有一个日历，您可以在其中选择您可以负责清洁区域的日期。现在，我制作了一个工作日历。我在网上找到了一个简单的脚本，我对其进行了修改以适应我们的目的。从技术上讲，它运行良好，但我开始怀疑我是否真的应该改变它从数据库中提取信息的方式。

日历每月显示一次，并使用 for 循环绘制为表格。这意味着每次加载页面时，所述 for 循环运行 28-31 次，具体取决于月份。为了介绍谁负责每天清洁，我添加了一个对存储每个成员清洁日的 MySQL 数据库的调用。伪代码看起来像这样，简化：

```
Draw table month
    for day=start_of_month to day=end_ofmonth
        type day
        select member from cleaning_schedule where picked_day=day
        type member 
```

这意味着页面的每次重新加载都会对数据库进行至少 28 次 SELECT 调用，在我看来，这似乎既低效又容易受到 DDOS 攻击。有没有更有效的方法来获得相同的结果？那里有更复杂的预订日历，他们如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T12:54:00.443

```
SELECT picked_day, member FROM cleaning_schedule WHERE picked_day BETWEEN '2012-05-01' AND '2012-05-31' ORDER BY picked_day ASC 
```

您可以遍历该查询的结果，每一行将有一个日期和您选择的范围内的一个人，按日期升序排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:54:23.850

MySQL 查询缓存将保存您的培根。

简短版本：如果您经常重复相同的 SQL 查询，只要基础表没有更改，它最终会在没有表访问权限的情况下提供服务。所以：一个月的第一个电话将是大约。35 个 SQL 查询，很多但不算多。同一页面的第二次加载将从缓存中快速返回结果。

我的经验表明，这往往比创建花哨的连接查询要快得多，即使这是可能的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T13:14:07.280

并不是说 28 次通话有什么大不了的，但我会使用一次连接并调用整个月的数据。然后，您可以遍历 MySQL 查询结果，就好像它是一个数组一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T12:56:47.070

您可以在 SQL 中使用更大和更小。因此，您可以为整个月编写一个选择，而不是每天进行一次选择：

```
SELECT day, member FROM cleaning_schedule 
WHERE day >= :first_day_of_month AND day >= :last_day_of_month
ORDER BY day; 
```

然后你需要在你的程序中注意每天处理多个成员。虽然程序逻辑会稍微复杂一点，但程序会更快：进程间甚至基于网络的通信比附加逻辑慢很多。

根据数据结构，以下语句可能更方便且更方便：

```
SELECT day, group_concat(member) FROM cleaning_schedule 
WHERE day >= :first_day_of_month AND day >= :last_day_of_month
GROUP BY day
ORDER BY day; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T12:58:37.880

28 次查询对于大多数商业网站来说并不是一个大问题，而且很常见，但建议您只需在每个月一次点击就获取您的月度数据。然后每天循环浏览记录。

# javascript - Javascript 在 keydown 上切换

> ID：11063588
> 
> 赞同：1
> 
> 时间：2012-06-16T12:49:54.343
> 
> 标签：javascript, toggle, keydown

在了解 JS 函数方面，我还是个新手。我以前使用过的所有东西，我都倾向于按原样使用，但我一直在尝试组合和修改一个函数，以使 Div 在特定按键上切换（高度和不透明度）。我有第一部分（可以让 div 显示在“ctrl + o”组合上），但不能根据当前显示状态将它与 if 语句结合起来显示或隐藏。

当前工作的“仅显示”JS：

```
$(document).keydown(function (e) {
    if (e.keyCode == 79 && e.ctrlKey) {
        document.getElementById('thediv').style.height = 'auto';
        document.getElementById('thediv').style.opacity = '1';
        return false;
    }
}); 
```

不工作'切换开/关'JS（我已经尝试在所有地方进行更改；这更多是为了让我了解我想要实现的目标）：

```
$(document).keydown(function (e) {
    if (e.keyCode == 76 && e.ctrlKey) {

        function toggler('thediv') {
            var myDiv = document.getElementById('thediv').style.height;
            if (myDiv == "auto") {
                document.getElementById('thediv').style.height = "0px";
                document.getElementById('thediv').style.opacity = "0";

            } else {
                document.getElementById('thediv').style.height = "auto";
                document.getElementById('thediv').style.height = "1";
            }
        }

    }
}); 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:57:27.113

你想显示和隐藏一个元素，为什么要设置它的高度和可见性？只需使用[toggle](http://api.jquery.com/toggle/)显示/隐藏它。

```
$(document).keydown(function (e) {
    if (e.keyCode == 76 && e.ctrlKey) {
         $("#thediv").toggle();
    }
}); 
```

查看您的代码

```
$(document).keydown(function (e) {
    if (e.keyCode == 76 && e.ctrlKey) {

        //This funciton is never called, you define it, do not call it!
        function toggler('thediv') { //<-- Error Here, you have a string as an argument?
            var myDiv = document.getElementById('thediv').style.height;
            if (myDiv == "auto") {
                document.getElementById('thediv').style.height = "0px";  //<--Bad practice using document.getElementById('thediv') over and over. Store it into a variable and reference it.
                document.getElementById('thediv').style.opacity = "0";

            } else {
                document.getElementById('thediv').style.height = "auto";
                document.getElementById('thediv').style.height = "1";
            }
        }

    }
}); 
```

# php - foreach 进入 mysql 表

> ID：11063589
> 
> 赞同：-3
> 
> 时间：2012-06-16T12:49:55.357
> 
> 标签：php, mysql

我想将数组的结果上传到数据库表中。

```
foreach ($f_list as $list) {
   echo '<a href="http://facebook.com/'.$list['id'] . '"><br>';
   echo $list['name'] . '</a><br>';
 } 
```

我希望将名称和 UID 上传到我的数据库中。我如何使用 foreach 方法完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:00:26.753

```
$sql=array();
foreach ($f_list as $list) {
   //This assumes, your values are already safely quoted
   $sql[]="'".$list['id']."','".$list['name']."'";
}
$sql=implode('),(',$sql);
$sql="INSERT INTO tablename VALUES($sql)";
// now run the query 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:03:42.057

注意[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的方向。它简化了最常见的安全问题并且易于使用。另一种选择是简单地使用[PDO](http://php.net/manual/en/book.pdo.php)，它主要是 PHP 库的一部分，并且默认安装在许多服务器上。

# c# - 为什么我不能在 WinRT 中从 AppData 读取 XML？

> ID：11063592
> 
> 赞同：3
> 
> 时间：2012-06-16T12:50:22.143
> 
> 标签：c#, xml, windows-8, windows-runtime, microsoft-metro

**我想要**
从 AppData.Local 中获取一个 xml 文件，并将其序列化为一个列表

**我**
对错误部分的编码：

```
List<myTask> AllTaskList = await  objectStorageHelper.LoadAsync(); 
```

myTask 是一个简单的类：

```
public class myTask
{
    public string myTitle { get; set; }
    public string myDuetime { get; set; }
} 
```

objectStorageHelper 是[CodePlex](http://winrtstoragehelper.codeplex.com/)的 HelpClass ， LoadAsync 部分如下：

```
 public async Task<T> LoadAsync()
    {
        try
        {
            StorageFile file = null;
            StorageFolder folder = GetFolder(storageType);
            file = await folder.GetFileAsync(FileName());
            //file = await folder.CreateFileAsync("BetterTask.xml", CreationCollisionOption.OpenIfExists);
            IRandomAccessStream readStream = await file.OpenAsync(FileAccessMode.Read);
            Stream inStream = Task.Run(() => readStream.AsStreamForRead()).Result;
            return (T)serializer.Deserialize(inStream);
        }
        catch (FileNotFoundException)
        {
            //file not existing is perfectly valid so simply return the default 
            return default(T);
            //Interesting thread here: How to detect if a file exists (http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1eb71a80-c59c-4146-aeb6-fefd69f4b4bb)
            //throw;
        }
        catch (Exception)
        {
            //Unable to load contents of file
            throw;
        }
    } 
```

**什么是错误**

> mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的异常，但未在用户代码中处理
> 
> 附加信息：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

**--**
为什么会这样？<br/>我可以使用这个帮助类成功地写入文件。
但是为什么我没有读取文件的权限呢？
如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:35:59.477

改变

```
StorageFolder folder = GetFolder(storageType); 
```

至

```
StorageFolder folder = ApplicationData.Current.LocalFolder 
```

如果这可行，那么问题出在您的文件夹权限上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:46:04.927

改变

```
 Stream inStream = Task.Run(() => readStream.AsStreamForRead()).Result;
 return (T)serializer.Deserialize(inStream); 
```

至

```
using (Stream inStream = Task.Run(() => readStream.AsStreamForRead()).Result)
{
    return (T)this.xmlSerializer.Deserialize(inStream);
} 
```

或者

```
inStream.Flush();
inStream.Dispose(); 
```

和 SaveAsync() 一样

# python - put() 后 App Engine 数据存储区中的读取延迟

> ID：11063597
> 
> 赞同：15
> 
> 时间：2012-06-16T12:50:57.703
> 
> 标签：python, google-app-engine, google-cloud-datastore

我为博客/新闻网站编写代码。主页有 10 篇最新文章，还有一个存档部分，所有文章按修改时间降序排列。在存档部分，我使用基于游标的分页，并从第二页开始缓存结果，因为只有在新文章发布或现有文章出于某种原因进入草稿时页面才会更改。每页有10篇文章。因此，当用户点击带有某个编号（不是第一个）的存档页面时，首先会检查 memcache 中的页码结果。如果该页面不存在，则检查 memcache 是否有该页面的游标，然后使用该游标从数据存储中获取结果：

```
class archivePage:
    def GET(self, page):
        if not page:
            articles = memcache.get('archivePage')
            if not articles:
                articles = fetchArticles()
                memcache.set('archivePage', articles)
        else:
            if int(page) == 0 or int(page) == 1:
                raise web.seeother('/archive')
            articles = memcache.get('archivePage'+page)
            if not articles:
                pageCursor = memcache.get('ArchivePageMapping'+page)
                if not pageCursor:
                    pageMapping = ArchivePageMapping.query(ArchivePageMapping.page == int(page)).get()
                    pageCursor = pageMapping.cursor
                    memcache.set('ArchivePageMapping'+page, pageCursor)
                articles = fetchArticles(cursor=Cursor(urlsafe=pageCursor))
                memcache.set('archivePage'+page, articles) 
```

每次创建新文章或更改现有文章的状态（草稿/已发布）时，我都会刷新存档页面结果和游标的缓存。我在将文章保存到数据存储区后执行此操作：

```
class addArticlePage:     
    def POST(self):
        formData = web.input()
        if formData.title and formData.content:
            article = Article(title=formData.title,
                              content=formData.content,
                              status=int(formData.status))
            key = article.put()
            if int(formData.status) == 1:
                cacheArchivePages()
            raise web.seeother('/article/%s' % key.id())

def cacheArchivePages():
    articles, cursor, moreArticles = fetchArticlesPage()
    memcache.set('archivePage', articles)
    pageNumber=2
    while moreArticles:
        pageMapping = ArchivePageMapping.query(ArchivePageMapping.page == pageNumber).get()
        if pageMapping:
            pageMapping.cursor = cursor.urlsafe()
        else:
            pageMapping = ArchivePageMapping(page=pageNumber,
                                            cursor=cursor.urlsafe())
        pageMapping.put()
        memcache.set('ArchivePageMapping'+str(pageNumber), cursor.urlsafe())
        articles, cursor, moreArticles = fetchArticlesPage(cursor=cursor)
        memcache.set('archivePage'+str(pageNumber), articles)
        pageNumber+=1 
```

问题来了。有时（没有规律，它是随机发生的）在刷新缓存后，我会得到与刷新前相同的存档页面结果和游标。例如，我添加了一篇新文章。它保存在数据存储中，并出现在档案的首页和第一页上（档案的第一页没有被缓存）。但是其他存档页面没有更新。我已经测试了我的 cacheArchivePages() 函数，它按预期工作。在我 put() 对数据存储进行更新之后和在 cacheArchivePages() 函数中 fetchArticlesPage() 之前，可能是因为时间太短了吗？也许写事务还没有完成，所以我得到了旧的结果？我尝试使用 time.sleep() 并在调用 cacheArchivePages() 之前等待几秒钟，在这种情况下，我无法重现该行为，但在我看来 time.sleep() 不是一个好主意。无论如何，我需要知道这种行为的确切原因以及如何处理它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-16T15:17:23.543

您很可能会受到“最终一致的查询”的影响。使用 HR 数据存储时，查询可能会使用稍微旧的数据，并且 put() 写入的数据需要一段时间才能对查询可见（get() 通过 key 或 id 没有这种延迟）。延迟通常以秒为单位，但我认为我们不能保证上限——如果你遇到不幸的网络分区，我想可能是几个小时。

有各种各样的部分解决方案，从最近写的作者查看查询结果时作弊到使用祖先查询（它们有自己的局限性）。您可以简单地给缓存一个有限的生命周期，并在读取而不是写入时更新它。

祝你好运！

# ruby-on-rails-3 - 在山狮上安装 json gem 时遇到问题

> ID：11063603
> 
> 赞同：10
> 
> 时间：2012-06-16T12:52:11.440
> 
> 标签：ruby-on-rails-3, rubygems, gem, bundler, osx-mountain-lion

我尝试运行 bundle install 并在 json gem 上停止。所以我尝试运行运行 sudo gem install json 1.7.3 这是它崩溃的版本，它给出了以下内容：

```
unknown109addaae0a6:introhive Jody$ sudo gem install json
Building native extensions.  This could take a while...
ERROR:  Error installing json:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.3 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.3/ext/json/ext/parser/gem_make.out 
```

然后，如果我查看 gem_make.out 文件，它看起来像这样：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 
```

我已经尝试确保安装了命令行工具，但我对如何使用这个工具有点茫然。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T12:42:27.137

除了我使用的是 RVM 外，我在安装 JSON 1.7.4 时遇到了类似的问题。无论如何，我解决问题的方法是从[developer.apple.com](http://developer.apple.com "苹果的开发者网站")安装 Xcode 4.4 ，一旦安装，我必须安装 Xcode 的命令行工具。您可以通过启动 Xcode 然后单击 Xcode > Preferences > Downloads 并单击命令行工具旁边的安装来安装命令行工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T17:27:53.583

我最终不得不去 ruby​​ 1.9.2 才能让它工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:23:11.547

从 1.9.3-p125 升级到 1.9.3-p194 为我做到了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T03:56:54.677

看起来 Apple 本月（2012 年 8 月）更新了开发者工具

我遇到了这个问题，我刚刚从[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)下载了最新的开发工具，现在一切正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T11:41:01.797

尝试在带有 Xcode 4.6 的 Mountain Lion 10.8.2 系统上安装 Ruby On Rails 时，我也遇到了同样的错误消息。

ruby 版本 1.8.6 是正常 OSX 安装的一部分。在 Xcode 中安装命令行工具后；正如 Dwight Scott 在此线程中发布的那样：

```
*launching Xcode then clicking Xcode > Preferences > Downloads and click install next to command line tools.* 
```

解决方案有效：

```
*<= 1.8.6 : unsupported
 = 1.8.7 : gem install rdoc-data; rdoc-data --install
 = 1.9.1 : gem install rdoc-data; rdoc-data --install
 >= 1.9.2 : nothing to do! Yay!
Successfully installed json-1.7.6
Successfully installed rdoc-3.12.1
Successfully installed railties-3.2.11
Successfully installed bundler-1.2.3
Successfully installed rails-3.2.11
5 gems installed* 
```

谢谢德怀特

# facebook - 如何更改 Facebook 评论 iframe 位置？

> ID：11063608
> 
> 赞同：0
> 
> 时间：2012-06-16T12:53:23.493
> 
> 标签：facebook, wordpress, facebook-comments

在我的 Wordpress 博客中，我想在我的单个帖子中更改 Facebook 评论 iframe 的位置。

它目前位于帖子的末尾，但我想将其移至“尚无评论”的行下。部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T15:07:18.740

您在错误的位置添加了代码。

您需要从内部删除代码`<div class="entry">`并将其移动到`<div id="comments">`.

*如果您向我们提供您正在使用的简化代码，我们可以向您展示需要放置的位置。*

*更新：由于您使用的是 wordpress，因此您可能需要联系开发人员要求他们进行更改。如果您使用的是可放置的代码，请告诉我们。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T15:16:20.930

就像@Jason 所说，1）询问开发人员或 2）自己编辑插件（有点难）。

3) 使用 Facebook 评论[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)并随意放置！

# windows - 安排运行程序并按顺序单击一些单选按钮和按钮

> ID：11063616
> 
> 赞同：0
> 
> 时间：2012-06-16T12:54:50.483
> 
> 标签：windows, automation, schedule

是否可以在 Windows 中自动化程序并运行每个控件和按钮的顺序单击。例如，单击一些单选按钮来配置一些设置，然后按 Enter。

例如，如果我每天运行一次这个 cauculator 程序，是否有可能单击 1+1，然后单击等于并在完成执行后或在一定时间（例如 1 15 分钟）关闭该程序

![在此处输入图像描述](../Images/c4e931d270eba92fbfe0540d78159049.png)

添加更多信息：我有一个程序，我的老板想每天运行一次。我必须每天单击相同的单选按钮设置并按 Enter。我没有它的源代码，我只是一个最终用户。我正在寻找一种自动化的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:18:43.720

不确定您的真正意图，但[AutoHotkey](http://www.autohotkey.com/)可能是您选择自动化部分的武器。调度也可以在 AutoHotKey 或 Windows 内置任务调度器中完成。

# php - 使用 PDO Wrapper 时出现错误 PHP 结束

> ID：11063621
> 
> 赞同：0
> 
> 时间：2012-06-16T12:55:15.090
> 
> 标签：php, pdo, while-loop

希望能有所帮助。

使用[php-pdo-wrapper-class](http://code.google.com/p/php-pdo-wrapper-class/ "php-pdo-包装类")我正在尝试执行“while”以将结果放入表中。

至今：

```
$preNic = $db->select('g1_pimps', 'id > 0', 'id, nick, STATUS', '50');
$i=0;
while ($preNic[$i])
{
echo $preNic[$i]['nick'].' - '.$preNic[$i]['id'].'<br />';  
$i++;       
} 
```

$preNic 给出了这个数组

```
Array
(
[0] => Array
    (
        [id] => 2
        [nick] => PimpNo_2
    )

[1] => Array
    (
        [id] => 3
        [nick] => PimpNo_3
    )

[2] => Array
    (
        [id] => 4
        [nick] => PimpNo_4
    )

etc
) 
```

现在它可以工作了，但是：这是正确的方式吗？湾。它在最后给出错误通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:01:44.117

而不是使用while循环使用foreach：

```
foreach($preNic as $row){
   echo $row['nick'].' - '.$row['id'].'<br />'; 
} 
```

Foreach 是皮条客，希望对您有所帮助

# primes - 求解一个包含三个未知素数的方程

> ID：11063623
> 
> 赞同：0
> 
> 时间：2012-06-16T12:55:27.367
> 
> 标签：primes, equation-solving

我最近在一次采访中被问到一个问题并且无法破解它，在我自己的努力失败并且谷歌没有显示任何结果之后，我将它发布在这里，以便其他人也可以尝试一下。

给定方程：

> ```
> a (a + b) = c - 120 
> ```

其中`a`, `b`&`c`是不等素数, find `a`, `b`& `c`。

我知道我必须使用素数的某些属性来将问题简化为更简单的问题，但我想不出一个。任何建议/解决方案将不胜感激。

我能想到的最好的是：

*   可能有多种解决方案。我的第一种方法是蛮力搜索 3 个素数来解决这个方程。（我知道，完全没用）
*   第二种方法是第一种方法的改进，将方程修改为`a (a + b) - 120 = c`。所以现在我们将我们的蛮力变量减少到只是 a & b & 检查 LHS 是否是所选`a`&的素数`b`。（如果`c`要大，找出 LHS 是否是素数将消除通过将变量从 3 减少到 2 所获得的优势。）

所以你看，我真的不会去任何地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T20:41:41.583

让我们规定 c > 120。这意味着 c != 2。所以 RHS 是奇数。

因此 LHS 必须是奇数，所以 a (a + b) 必须是奇数。所以a是奇数，a+b是奇数。这仅在 b 是偶数且 b 是素数时才有效，因此 b = 2。

所以我们有 a(a+2) = c - 120。

所以 a^2 + 2a + (120-c) = 0

使用二次公式，求解 a，我们得到

[-2 +- sqrt(2^2 - 4 * 1 * (120 - c))] / 2

= -1 +- sqrt(1 - (120-c))

= -1 + sqrt(c - 119)

所以我们需要一个素数 c，所以 c - 119 是一个完美的正方形。

这是一个使用素数表的快速计算。

我能找到的最小的是 c = 263，所以 a = 11, b = 2

看起来 c=443, a=17, b=2 也可以。

似乎没有任何其他低于 1000 的 c 值。

可能还有很多很多其他的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T20:23:54.347

所有素数都是奇数，除了 2 - (1)

所有素数都是正数 - (2)

`odd - even = odd`(3)

(1), (2) => `c`> 120 并且`c`是奇数 - (4)

`odd * odd = odd`- (5)

(3), (4), (5) =>`c-120`奇数 =>`a(a+b)`奇数 - (6)

`even + odd = odd`- (7)

(6) =>`a`是奇数，`a+b`是奇数 (8)

(7), (8) =>`b`是偶数 => **`b`= 2**

所以，我们有`a^2 + 2a = c-120`

我不能再进一步了

# javascript - 在本地存储中保存一个函数

> ID：11063630
> 
> 赞同：6
> 
> 时间：2012-06-16T12:55:53.340
> 
> 标签：javascript, json, local-storage

我正在处理一些对象，这些对象包含要从浏览器显示和操作的大量数据，并且我想将其保存在本地存储中。为了保存对象，我使用了 JSON.stringify() 所以一切都变成了文本，而且效果很好

```
{
"bindingRef": [],
"primo": {
    "name": "primo",
    "modifiable": true,
    "binded": false,
    "isInteger": false,
    "label": "Numero di Primi"
},
"secondo": {
    "name": "secondo",
    "modifiable": true,
    "binded": false,
    "isInteger": false,
    "label": "Numero di Secondi"
}
} 
```

现在我试图通过将它转换为字符串然后保存它来保存一个函数

```
JSON.stringify(myFunction.toString()); 
```

但输出是这样的

```
"savedFunction": "function () {\n\t\t\t\tvar tot = menu.primo.get() * 6 + menu.secondo.get() * 8 + menu.dolce.get() * 4;\n\t\t\t\tif (menu.sconto.get()) {\n\t\t\t\t\treturn tot * 0.90;\n\t\t\t\t} else {\n\t\t\t\t\treturn tot;\n\t\t\t\t}\n\t\t\t}" 
```

将函数保存在本地存储中是正确的方法还是有更好的方法来做到这一点？如果这是正确的方法，有没有办法简单地删除任何制表/缩进字符或者我应该操纵字符串，例如使用一些正则表达式函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T13:04:29.530

与许多函数式语言一样，JS 中的函数是闭包：它们在定义时将环境范围的内容包装在其中，包括像 db 或文件句柄这样的临时数据。

这不是一个好主意，因为这可能会由于 JSON 反序列化行为而导致问题，因此您必须检查函数中包含的内容以及自定义的内容。

另请参阅此[SO 线程](https://stackoverflow.com/questions/7955965/how-come-json-cant-save-objects-functions)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-03T04:09:11.680

您可以将函数放在一个对象中，并使用我创建的函数 storage.set 和 storage.get 而不是 localStorage.set 和 localStorage.get *（localStorage 不允许添加函数，不像 JSON）*。

storage.set 将在使用 localStorage.setItem() 之前对包含函数的对象进行字符串化。
storage.get 将在使用 localStorage.getItem() 后解析一个包含函数的对象。

我修改了函数 JSON.stringify 和 JSON.parse 以便能够处理函数，因此您可以在代码的其他部分中使用它而无需更改函数名称。我在原始函数中添加了 2，因此我可以在更新后的函数中使用它们。

```
JSON.stringify2 = JSON.stringify;
JSON.parse2 = JSON.parse;

JSON.stringify = function(value) {
    return JSON.stringify2(value, function(key, val) {
        return (typeof val === 'function') ? val.toString().replace(/\t|\n/g, '') : val;
    });
}

JSON.parse = function(value) {
    return JSON.parse2(value, function(key, val) {
        if (typeof val === 'string') {
            var regex = /^function\s*\([^()]*\)\s*{.*}$/;

            if (regex.exec(val) !== null)
                return eval('key = ' + val);
            else
                return val;
        } else
            return val;
    });
}

var storage = {};

storage.set = function(key, value) {
    if (typeof value === 'object')
        value = JSON.stringify(value);

    localStorage.setItem(key, value);
}

storage.get = function(key) {
    var value = localStorage.getItem(key);

    try {
        return JSON.parse(value);
    } catch (e) {
        return value;
    }
} 
```

# java - Android：连续获取日志

> ID：11063641
> 
> 赞同：2
> 
> 时间：2012-06-16T12:58:21.907
> 
> 标签：java, android, process, logcat

如何从 logcat 连续获取日志？

我想在自己的设备上阅读日志。该服务实际上是为了在另一个应用程序停止或卸载时发送短信。如果来自 logcat 的日志匹配字符串，如“Removing package com.package.name”，则会发送短信。

是否有一个函数可以调用一次以将日志连续发送到我的服务。如果没有，我正在考虑每秒运行下面的代码：

```
Process process = Runtime.getRuntime().exec("logcat logcat -b events");
BufferedReader bufferedReader = new BufferedReader(
new InputStreamReader(process.getInputStream()));

StringBuilder log=new StringBuilder();
String line;
while ((line = bufferedReader.readLine()) != null) {
Toast.makeText(LogReaderService.this, line, Toast.LENGTH_LONG).show();
} 
```

或者还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:18:45.523

我认为这是你能做到的唯一方法。

不要将其放入生产应用程序中，每秒执行该工作会耗尽设备上的电池。

另请注意，在您感兴趣的情况下，并不要求所有设备都发送相同的日志消息。很可能有一些设备的日志消息略有改变，甚至根本没有。因此，如果您打算涵盖各种设备，则需要对每一个设备进行测试，以确保它们确实为您提供了您正在寻找的日志输出。

# javascript - 重新定义对最顶层窗口的引用 (window.top)

> ID：11063644
> 
> 赞同：0
> 
> 时间：2012-06-16T12:58:47.180
> 
> 标签：javascript

我的目标是覆盖对 iframe 中执行的所有脚本的最顶层窗口的引用。我有以下代码经过测试可以在 IE 8+ 和 FireFox 3,6+ 中运行，但在 Chrome 19 中不起作用。

```
var top = "test";
console.debug(top); 
```

这会在 IE 和 FireFox 中输出：“test”，但会在 chrome 中显示对顶部窗口的引用。Chrome是否有可能使用一种机制来避免引用被覆盖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:08:58.000

[问题 10279：JSC 和 V8 之间的 window.top 阴影不同](http://code.google.com/p/chromium/issues/detail?id=10279)

[问题 26220：window.top 不能用 var 隐藏（与其他浏览器不同）](http://code.google.com/p/chromium/issues/detail?id=26220)

# osx-lion - 在 Mountain Lion 下分发应用程序

> ID：11063646
> 
> 赞同：1
> 
> 时间：2012-06-16T12:59:09.890
> 
> 标签：osx-lion, osx-mountain-lion

是否有可能在 Mountain Lion 下分发应用程序？

如果我使用 xCode 4.5 Preview，我无法提交应用程序。但是 4.3 在 Mountain Lion 下不起作用。

我应该怎么办？

请帮忙。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:41:55.043

Oskar - Apple 明确声明他们不会接受此版本的应用程序。为什么要绕过它？我的系统上有两个版本的 XCode，因此我可以继续使用批准的版本进行开发和提交，并使用 4.5R3 进行测试并确保我为未来​​做好准备。我并不是要粗鲁，但是当您下载时，您会得到准确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:40:50.873

[从Mac App Store](http://itunes.apple.com/at/app/xcode/id497799835?mt=12)或Apple 网站上的[Mac Dev Center](https://developer.apple.com/xcode/index.php)下载 Xcode 4.4 。

# php - IIS URL 重写 - 无需递归重写即可重定向到特定页面的任何 url 请求

> ID：11063650
> 
> 赞同：0
> 
> 时间：2012-06-16T12:59:35.820
> 
> 标签：php, url, iis, rewrite

```
<rule name="holdingPage" enabled="true" patternSyntax="ECMAScript" stopProcessing="true">
    <match url="^http://www.cruiseamour.co.uk/holding.php" negate="true" />
    <action type="Redirect" url="http://www.cruiseamour.co.uk/holding.php" appendQueryString="false" />
    <conditions></conditions>
</rule> 
```

在对数据库进行一些维护时，我只希望对页面（而不是保留页面）的任何请求都重定向到保留页面。目前，规则是将保留页面的请求重定向到保留页面，导致递归循环，但我不知道为什么。

帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:17:07.997

您`action`在规则内 stull 说它应该重定向回自身，从而触发您所描述的递归行为。尝试将其更改`action`为：

```
<action type="None" /> 
```

这应该指定不需要任何操作并允许页面正常处理/执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T03:26:15.343

我认为它比较的“url”在主机名后面的斜杠之后开始。因此，在您的情况下，请尝试：`<match url="^holding.php" negate="true"/>`

# php - 如何在另一个 var 中使用 smarty var？

> ID：11063651
> 
> 赞同：0
> 
> 时间：2012-06-16T12:59:47.333
> 
> 标签：php, smarty, var

我想在我的 foreach 循环中使用项目的 id 获得一个条件变量。我想尝试的（只是演示代码）如下，但它只是给我一个错误。

php

```
$this->smarty->assign(array(
  'demo' => array(
    'foo_bar' => 'succeed!',
    'foo_seat' => 'succeed also!'
  ),
  'bar' => 'bar',
  'seat' => 'seat'
)); 
```

tpl

```
value="{$demo.foo_{$bar}}" 
```

错误

```
Uncaught exception 'SmartyCompilerException' with message 'Syntax Error in template "application/views/overzicht/selectie.tpl" on line 55 "{$demo.foo{$bar}}" - Unexpected "{", expected one of: "}" 
```

谁有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:42:07.983

试试这个

```
{assign var='property' value='foo_'|cat:$bar}

{$demo.$property} 
```

# asp.net - httpRuntime shutdownTimeout 和 IIS 设置

> ID：11063653
> 
> 赞同：2
> 
> 时间：2012-06-16T13:00:08.860
> 
> 标签：asp.net, iis

我在 ASP.Net 中遇到了一个问题。在任何 Web App 配置 Web.config 文件中都有一个名为 httpRuntime 的部分，它有一个属性：shutdownTimeout。根据 MSDN 文档，此属性指定在 ASP.Net 运行时终止工作进程之前允许工作进程的空闲时间多长时间。另一方面，在 IIS 的 ApplicationPool's -> Default AppPool -> properties -> performance 选项卡下，有一个设置：“空闲（20）分钟后关闭工作进程”。

我猜在 IIS 下，此设置适用于所有用于处理传入请求的工作进程，而不仅仅是特定 ASP.Net 运行时所在的进程。如果 Web.Config 的 shutdownTimeout 还没有生效，那么 IIS 的设置就会起作用。

然而据我观察，虽然 httpRuntime 的 shutdownTimeout 默认值为 90 秒，但我的 Web 应用程序总是在空闲 20 分钟后关闭。似乎 IIS 设置优先考虑这方面。

如果有人能澄清这一点，我们将不胜感激：我的猜测有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:20:40.023

我做了一些挖掘并找到了答案：

属性 shutdownTimeout 控制如果 ASP.Net 运行时要求它终止，则 ASP.Net 运行时将在它自己正常退出之前关闭工作进程多长时间。

这是正确的，任何意见都非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T19:05:30.990

[https://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx)

指定允许工作进程关闭的分钟数。当超时到期时，ASP.NET 关闭工作进程。

默认值为 90。

所以基本上，工作进程有 X 分钟的时间来关闭工作进程。如果它达到 X，它就会被杀死。

# php - 按下提交按钮后显示数据库条目

> ID：11063657
> 
> 赞同：2
> 
> 时间：2012-06-16T13:00:59.623
> 
> 标签：php, mysql, html-table

我有一个页面，我可以在其中搜索作者写的书（基于我 2 个月前的作业进行的基本搜索）。我从下拉框中选择作者，然后按“提交”按钮，结果应该会出现。

这是页面的代码：

```
<?php

include ("includes/connections.php");

if($_POST)
{  
  if (!isset($_POST["authors"])){
          header("Location: searchAuthor.php");     
          exit;
  }

  foreach ($_POST["authors"] as $author) 
  {
      ?????????
  }
}
?>

<?php include ("includes/connections.php");
function dropdown($intIdField, $strfNameField, $strlNameField, $strTableName, $strOrderField, $strNameOrdinal, $strMethod="asc") {
   echo "<select name=\"{$strNameOrdinal}[]\">\n";

   echo "<option value=\"NULL\">Select Value</option>\n";

   $strQuery = "SELECT $intIdField, $strfNameField, $strlNameField
               FROM $strTableName
               ORDER BY $strOrderField $strMethod";

   $rsrcResult = mysql_query($strQuery) or die(mysql_error());

   while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
      $strA = $arrayRow["$intIdField"];
      $strB = $arrayRow["$strlNameField"] . " " . $arrayRow["$strfNameField"];    
      echo "<option value=\"$strA\">$strB</option>\n";
   }

   echo "</select>";
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Add Book Information</title>
<link href="back.css" rel="stylesheet" type="text/css" />
</head>

<body>
<h1>Search for Books of an Author</h1><table width="528" border="0" align="center">
    <tr>
      <td width="480"><span id="tip">*Hitting the "Search books of Author" button   without filling the fields with an asterisk will just reset the form</span></td>
    </tr>
    </table>
<form method="post" action="<?php echo $_SERVER['PHP_SELF'];?>" id="formBook">
  <table width="563" border="0" align="center">    
    <tr>
      <td style="text-align: right"><label for="authors">Select an Author*:</label></td>
      <td><?php dropdown("author_ID", "author_firstname", "author_lastname", "author", "author_lastname", "authors"); ?></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td><input type="submit" name="submit" id="submit" value="Search books of Author" /></td>
    </tr>
    <tr>
      <td><div align="left"><img src="images/buttonleft.png" alt="previous" width="70" height="70" usemap="#Previous" border="0"></div></td>
      <td><div align="right"><img src="images/buttonright.png" alt="next" width="70" height="70" usemap="#Next" border="0">
        <map name="Previous">
            <area shape="circle" coords="35,35,33" href="addSubject.php">
        </map>
        <map name="Next">
          <area shape="circle" coords="35,35,33" href="addEdition.php">
        </map>
      </div></td>
    </tr>
  </table>
</form>

</body>
</html> 
```

正如你所看到的，我把所有东西都放在一张桌子里（对于这样的小东西很方便）。我希望当我按下提交按钮时，选择要输入的作者将显示查询结果的方法。查询会在`foreach`哪里执行？？？？？？是。然后我希望查询的结果用于在我的表中显示（通过添加更多行并通过 php 函数在每一行中插入一个结果）结果。

有没有办法只用php做到这一点？我不知道如何使用 Javascript 只是 php 和 html。即使我必须在另一个页面中插入查询结果并在那里显示所有内容，我也可以接受。

我还没有写查询。

实际上，foreach 是在作者写的每本书中放入一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:21:55.877

这是一个例子。查询/字段是虚假的。

```
<?php

if (isset($_POST['Submit'])) {

   $strQuery = "SELECT 'field1', 'field2', 'field3'
           FROM $strTableName
           ORDER BY $strOrderField $strMethod";

$rsrcResult = mysql_query($strQuery) or die(mysql_error());

?>
<table>
<td> HEADER 1 </td> <td> HEADER 2 </td> <td> HEADER 3 </td>

<?php

 while ($row = mysql_fetch_array($rsrcResult) { 
 echo "<tr><td>".$row['field1']."</td><td>".$row['field2']."</td><td>".$row['field3']."</td>";

}

?>

</table> 
```

# java - 堆栈跟踪行中引用的基类？

> ID：11063658
> 
> 赞同：2
> 
> 时间：2012-06-16T13:01:09.877
> 
> 标签：java, eclipse, overriding, stack-trace, superclass

在调试 java 代码时，在堆栈跟踪中，我注意到以下内容

`ToyotaCar(AbstractCar).handle()`行数：40

看起来大括号中的类是基类。eclipse总是会显示基类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:05:46.113

如果调用基类的方法，堆栈行将显示基类（定义方法的位置）和调用此类方法的对象的类。

我在这里假设你做了类似的事情

```
ToyotaCar car = new ToyotaCar();
car.handle(); 
```

where`ToyotaCar`不会覆盖该`handle()`方法。堆栈跟踪通知您，您的调用`handle()`不是由实际的`ToyotaCar`，而是由`AbstractCar`. 然而，你在一个`ToyotaCar`对象上调用了它。

就其本身而言，如果您不覆盖基类方法，则堆栈行的这种表示法可能看起来有些过分。但是，考虑一下您想要覆盖该`handle()`方法但仍需要调用`handle()`on 的情况`AbstractCar`。您将需要发出一个

```
super.handle(); 
```

里面`ToyotaCar.handle()`。在对象上调用`handle()`方法时`ToyotaCar`，首先将其调用为 a `ToyotaCar`，然后调用为`AbstractCar`. 两条堆栈线将明确地允许您区分一个调用和另一个调用。

# regex - 正确此 url 的正则表达式/mod-rewrite 语法

> ID：11063659
> 
> 赞同：0
> 
> 时间：2012-06-16T13:01:15.320
> 
> 标签：regex, mod-rewrite

嗨，我在正确制定这个 mod 重写规则/正则表达式时遇到了一点困难。

我有这样的网址格式：

www.site.com/some-page-title-here-cb384

www.site.com/another-page-title-here-cb385

并且我只想在每个字符串中的最后一个连字符之后的 url 包含一个 'cb' 时才找到每个 'cb' 之后的数字。

我有：

```
.*?([0-9]+)$ 
```

哪个匹配最后一组数字，但我需要更具体地说明只有当 url 的最后一部分包含模式“-cb”时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:03:31.403

试试这个：

```
.*-cb(\d+)$ 
```

这个应该可以工作，你应该找到 1 美元的数字。

让我更具体一点。您的正则表达式（和我上面的）不只匹配字符串的最后一部分，而是匹配整个字符串。如果你只想匹配最后一部分，你应该写它没有`.*`：

```
-cb(\d+)$ 
```

# python - Google App Engine (Python)：将 UserProperty 与 Webapp2 用户模型一起使用

> ID：11063665
> 
> 赞同：1
> 
> 时间：2012-06-16T13:02:30.467
> 
> 标签：python, google-app-engine, oauth-2.0

我有一个应用程序，我们允许用户使用 Oauth2 进行身份验证，甚至自定义用户注册。所有用户都保存到数据存储中的默认用户实体中。如果用户第一次使用 Oauth2 登录，则会在默认用户实体中创建一条新记录，如下所示：

```
 """Check if user is already logged in"""
  if self.logged_in:
    logging.info('User Already Logged In. Updating User Login Information')
    u = self.current_user
    u.auth_ids.append(auth_id)
    u.populate(**self._to_user_model_attrs(data, self.USER_ATTRS[provider]))
    u.put()
  else:
    """Create a New User"""
    logging.info('Creating a New User')
    ok, user = self.auth.store.user_model.create_user(auth_id, **self._to_user_model_attrs(data, self.USER_ATTRS[provider]))

    if ok: 
      self.auth.set_session(
        self.auth.store.user_to_dict(user)
      )   
self.redirect(continue_url) 
```

通过以下处理程序插入自定义注册记录。

```
class RegistrationHandler(TemplateHandler, SimpleAuthHandler):

  def get(self):
    self.render('register.html')

  def post(self):
    """Process registration form."""
    user = 'appname:%s' % self.request.get('email')
    name = '%s %s' % (self.request.get('first_name'), self.request.get('last_name'))
    password = self.request.get('password')
    avatar = self.request.get('avatar')
    act_url = user_activation.Activate(self.request.get('first_name'), self.request.get('email'))
    ok, user = User.create_user(auth_id=user, name=name, password_raw=password, email=self.request.get('email'))
    if ok: 
      self.auth.set_session(self.auth.store.user_to_dict(user))
      acc = models.Account(display_name=self.request.get('first_name'), act_url=act_url, act_key=act_url.split('activate/')[1], user=users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).email))
      acc.put()
      if avatar:
        avt = models.Picture(is_avatar=True, is_approved=True, image=avatar, user=users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).email))
        avt.put()
    self.redirect('/') 
```

现在我们使用 webapp2_extras.sessions 进行会话处理。我们有不同的模型，如评论、图像、评论等，我们希望在其中使用 db.UserProperty() 作为作者字段。但是，每当我们使用“users.get_current_user()”向这些模型中的任何一个输入记录时，作者字段都会显示空白或无。我认为这是因为我们正在通过 webapp2 会话处理会话。

我们想要实现的是能够在各种模型中使用 db.UserProperty 字段并使用 webapp2 会话适当地链接到当前用户？

UserProperty() 必须与用户对象一起传递才能正确插入记录。即使我们能够使用以下代码输入记录：

```
user = users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).email) 
```

或者

```
user = users.User(User.get_by_auth_id(self.current_user.auth_ids[0]).name) 
```

但是我们无法通过引用 model.author 来获取整个用户对象

任何想法我们应该如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:24:15.367

[用户服务](https://developers.google.com/appengine/docs/python/users/)当前不支持 OAuth 2.0 。支持的选项是

*   谷歌帐户
*   开放标识
*   OAuth 1.0

坦率地说，我不明白你想通过将 db.User 引入代码库来完成什么。鉴于存在`self.current_user`，我假设您已经在处理身份验证过程。

当您这样做时`self.auth.store.user_model.create_user`- 这已经为您提供了 webapp2 的用户对象/实体（尽管它与 db.User 无关）。我相信在 OAuth 2.0 约束下，您必须将其用作您的作者字段。

`users.get_current_user()`依赖于一个特殊的 cookie（App Engine 内部）。事实上，它与 webapp2 的会话（或任何其他“自定义”会话）无关。您可以通过将 cookie 设置为 App Engine 内部可以理解并被欺骗的值来破解它，就好像用户使用我提到的一种方法登录一样，但我不推荐这种方法。它没有记录（cookie 名称、格式等）并且可能随时更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T03:24:53.287

与其使用 UserProperty 来存储对 webapp2 用户对象的引用，不如将 auth_id 存储为 StringProperty 并添加一个方便的方法来获取相应的 webapp2 用户实体。

像这样的东西

```
from webapp2_extras.appengine.auth.models import User

class Comment(db.model):
  text = db.StringProperty()
  author = db.StringProperty()

  def get_author(self):
    return User.get_by_auth_id(self.author) 
```

# android - 如何将捕获的图像保存在本地目录中并将其发送到服务器

> ID：11063668
> 
> 赞同：0
> 
> 时间：2012-06-16T13:03:03.213
> 
> 标签：android

你好朋友，我需要捕获图像，然后需要将高质量的图像发送到服务器，我正在为此编写下面的代码

```
 image = (Bitmap) intent.getExtras().get("data");
                 Display display = getWindowManager().getDefaultDisplay(); 
                 width = display.getWidth();
                 height = display.getHeight();

                Matrix mat = new Matrix();//removing rotations

                String version= Build.VERSION.SDK;
                Log.e("Version Number ",version);
                if(Integer.parseInt(Build.VERSION.SDK) > 8)
                {
                    mat.preRotate(0);//removing rotations of image
                    //image = Bitmap.createScaledBitmap(image,image.getWidth(),image.getHeight(), true);
                    image = Bitmap.createBitmap(image, 0, 0, image.getWidth(), image.getHeight(), mat, true); //removing rotations
                }
                else{
                    mat.preRotate(-90);//removing rotations of image
                    //image = Bitmap.createScaledBitmap(image,image.getWidth(),image.getHeight(), true);
                    image = Bitmap.createBitmap(image, 0, 0, image.getWidth(), image.getHeight(), mat, true); //removing rotations
                } 
```

我的问题是我得到的图像就像缩略图图像，而不是我做这么多谷歌搜索并找到这个链接 [http://dharmendra4android.blogspot.in/2012/04/save-captured-image-to-applications.html](http://dharmendra4android.blogspot.in/2012/04/save-captured-image-to-applications.html) 但是我无法实现它。如果任何机构为此提供任何示例项目或任何简单的解决方案，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:06:39.840

无论您从 Intent 中提取的数据是什么，问题都很可能出在其中。你从哪里得到这个......这个意图是什么？

# android - 如何将 jsonObject 表示为 android 中的列表项？

> ID：11063672
> 
> 赞同：0
> 
> 时间：2012-06-16T13:03:43.587
> 
> 标签：android

** 我希望一个列表项在返回的对象中包含每个患者的拳头、姓氏和患者 ID。下面是我返回的 jsonObject**。

```
{"tag":"available_patient","success":1,"error":0,"patients":
[{"p_id":"1","fname":"Peter","lname":"Lule"},
{"p_id":"2","fname":"Edgar","lname":"Ainebyoona"},
{"p_id":"5","fname":"Andrew","lname":"mugasa"}]} 
```

我还使用了两个 xml 文件，一个包含 listView，另一个包含 firstname、last name 和 patient_id，如下所示。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="80dp" 
         android:background="@drawable/viewp_bg">

    <Button
        android:id="@+id/bviewPatients"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="View Patients"
        android:layout_marginLeft="200dp"
        android:layout_marginTop="25dp" />

</LinearLayout>    

<ListView android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/mainListView">
</ListView>

</LinearLayout> 
```

**患者列表项目**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="8px">

    <TextView
        android:id="@+id/firstName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView
        android:id="@+id/lastName"
        android:layout_marginLeft="6px"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/firstName"/>

    <TextView
        android:id="@+id/id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/firstName"/>

</RelativeLayout> 
```

**查看病人.java**

```
package mut.doc.pat;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import library.UserFunctions;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class ViewPatients2 extends Activity implements OnClickListener {

    ListView mainListView;
    Button viewPatients;

    Bundle gotbasket;
    ArrayList<String> gotjsonResult;

    JSONArray jsonArray = null;

    SimpleAdapter adapter;

    private static String KEY_SUCCESS = "success";
    private static final String TAG_ID = "p_id";
    private static final String TAG_FNAME = "fname";
    private static final String TAG_LNAME = "lname";

    String patient_id, firstname, lastname, doctor_id;
    String[] from;
    int[] to;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainListView = (ListView) findViewById(R.id.mainListView);
        viewPatients = (Button) findViewById(R.id.bviewPatients);
        viewPatients.setOnClickListener(this);

    }

    public void getPatients(String doctor_id){

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.getPatientsByDoctorId(doctor_id);

        try {
            if(json.getString(KEY_SUCCESS) != null){

                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){

                    //patients successfully 
                    //JSONObject json_patients = json.getJSONObject("patients");

                    //getting an array of patients
                    jsonArray = json.getJSONArray("patients");

                    String[] data = new String[jsonArray.length()];

                     // prepare the list of all records
                    ArrayList<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();

                    //looping thru all the patients
                    for(int i = 0; i<jsonArray.length(); i++){
                        HashMap<String, String> map = new HashMap<String, String>();

                        JSONObject patient = jsonArray.getJSONObject(i);

                        map.put("elements ", jsonArray.getString(i));

                        fillMaps.add(map);

                    //storing each item into a variable
                        patient_id = patient.getString(TAG_ID);
                        firstname = patient.getString(TAG_FNAME);
                        lastname = patient.getString(TAG_LNAME);

                        from = new String[] {"firstname", "lastname", "patient_id"};
                        to = new int[] { R.id.firstName, R.id.lastName, R.id.id};

                        String[][][] array = new String[jsonArray.length()] [jsonArray.length()][jsonArray.length()];

                        Log.i("Patients", "First Name: " + firstname + " " + " " + lastname + " " + patient_id );

                    }

                    adapter = new SimpleAdapter(ViewPatients2.this, fillMaps, R.layout.patients_list_item, from, to );
                    mainListView.setAdapter(adapter);
                }
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();

            Toast.makeText(getBaseContext(), "Error occured while fetching Patients", Toast.LENGTH_LONG).show();

        }
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        gotbasket = getIntent().getExtras();
        doctor_id = gotbasket.getString("doctor_id");

        //call to getPatients()
        getPatients(doctor_id);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:12:29.807

我认为最好使用自定义适配器............让你自己的适配器

它会让

```
1- you code less complex.
2- easy to understand.
3- more flexible.
4- more optimized. 
```

这方面的例子不胜枚举

[http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/](http://www.josecgomez.com/2010/05/03/android-putting-custom-objects-in-listview/)

第一次需要努力去理解，但将来你必须使用自定义适配器。

# angularjs - 在 AngularJS 中读取查询参数最简洁的方法是什么？

> ID：11063673
> 
> 赞同：318
> 
> 时间：2012-06-16T13:03:52.477
> 
> 标签：angularjs, ngroute

我想使用 AngularJS 读取 URL 查询参数的值。我正在使用以下 URL 访问 HTML：

`http://127.0.0.1:8080/test.html?target=bob`

正如所料，`location.search`是`"?target=bob"`。为了访问*target*的值，我在网上找到了各种示例，但它们都不适用于 AngularJS 1.0.0rc10。特别是，以下都是`undefined`：

*   `$location.search.target`
*   `$location.search['target']`
*   `$location.search()['target']`

有人知道什么会起作用吗？（我`$location`用作控制器的参数）

* * *

更新：

我在下面发布了一个解决方案，但我对此并不完全满意。[Developer Guide: Angular Services: Using $location](http://docs.angularjs.org/guide/%24location)中的文档说明了以下内容`$location`：

> 我什么时候应该使用 $location？
> 
> 任何时候您的应用程序需要对当前 URL 的更改做出反应，或者如果您想更改浏览器中的当前 URL。

对于我的场景，我的页面将从带有查询参数的外部网页打开，因此我本身并不是“对当前 URL 的更改做出反应”。所以也许`$location`不是适合这项工作的工具（有关丑陋的细节，请参阅下面的答案）。因此，我将这个问题的标题从“如何使用 $location 读取 AngularJS 中的查询参数？” 到“在 AngularJS 中读取查询参数最简洁的方法是什么？”。显然我可以只使用 javascript 和正则表达式来 parse `location.search`，但是为了一些如此基本的东西而去低级真的冒犯了我的程序员的敏感性。

`$location`那么：有没有比我的答案更好的使用方法，还是有简洁的替代方法？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-16T14:57:17.570

您可以将[$routeParams](https://docs.angularjs.org/api/ngRoute/service/$routeParams)（需要[ngRoute](https://docs.angularjs.org/api/ngRoute)）注入您的控制器。这是文档中的一个示例：

```
// Given:
// URL: http://server.com/index.html#/Chapter/1/Section/2?search=moby
// Route: /Chapter/:chapterId/Section/:sectionId
//
// Then
$routeParams ==> {chapterId:1, sectionId:2, search:'moby'} 
```

编辑：您还可以使用[$location](https://docs.angularjs.org/api/ng/service/$location)服务（在 中提供`ng`）获取和设置查询参数，特别是它的`search`方法：[$location.search()](https://docs.angularjs.org/api/ng/service/$location#searchh)。

$routeParams 在控制器初始加载后就没那么有用了；`$location.search()`可以随时调用。

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2012-07-16T17:56:48.600

很好，您已经设法让它在 html5 模式下工作，但也可以让它在 hashbang 模式下工作。

你可以简单地使用：

```
$location.search().target 
```

访问“目标”搜索参数。

作为参考，这里是工作的 jsFiddle：[http ://web.archive.org/web/20130317065234/http://jsfiddle.net/PHnLb/7/](http://web.archive.org/web/20130317065234/http://jsfiddle.net/PHnLb/7/)

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope, $location) {

    $scope.location = $location;
    $scope.$watch('location.search()', function() {
        $scope.target = ($location.search()).target;
    }, true);

    $scope.changeTarget = function(name) {
        $location.search('target', name);
    }
}
```

```
<div ng-controller="MyCtrl">

    <a href="#!/test/?target=Bob">Bob</a>
    <a href="#!/test/?target=Paul">Paul</a>

    <hr/>    
    URL 'target' param getter: {{target}}<br>
    Full url: {{location.absUrl()}}
    <hr/>

    <button ng-click="changeTarget('Pawel')">target=Pawel</button>

</div>
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-06-17T06:37:15.403

为了部分回答我自己的问题，这里是 HTML5 浏览器的工作示例：

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <script src="http://code.angularjs.org/1.0.0rc10/angular-1.0.0rc10.js"></script>
  <script>
    angular.module('myApp', [], function($locationProvider) {
      $locationProvider.html5Mode(true);
    });
    function QueryCntl($scope, $location) {
      $scope.target = $location.search()['target'];
    }
  </script>
</head>
<body ng-controller="QueryCntl">

Target: {{target}}<br/>

</body>
</html> 
```

关键是像上面那样打电话`$locationProvider.html5Mode(true);`。现在打开时可以使用`http://127.0.0.1:8080/test.html?target=bob`。我对它在旧版浏览器中不起作用这一事实不满意，但无论如何我可能会使用这种方法。

与旧浏览器一起使用的替代方法是放弃`html5mode(true)`调用并使用带有哈希+斜线的以下地址：

`http://127.0.0.1:8080/test.html#/?target=bob`

相关文档位于[开发人员指南：Angular Services: Using $location](https://docs.angularjs.org/guide/$location)（奇怪的是我的谷歌搜索没有找到这个......）。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-07-21T18:40:49.433

它可以通过两种方式完成：

1.  使用`$routeParams`

最好和推荐的解决方案是在`$routeParams`您的控制器中使用。它需要`ngRoute`安装模块。

```
 function MyController($scope, $routeParams) {
      // URL: http://server.com/index.html#/Chapter/1/Section/2?search=moby
      // Route: /Chapter/:chapterId/Section/:sectionId
      // $routeParams ==> {chapterId:'1', sectionId:'2', search:'moby'}
      var search = $routeParams.search;
  } 
```

2.  使用`$location.search()`.

这里有一个警告。它仅适用于 HTML5 模式。默认情况下，它不适用于其中没有 hash( `#`)的 URL`http://localhost/test?param1=abc&param2=def`

`#/`您可以通过添加URL使其工作。`http://localhost/test#/?param1=abc&param2=def`

`$location.search()`返回一个对象，如：

```
{
  param1: 'abc',
  param2: 'def'
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-07-11T13:08:57.537

$location.search() 仅适用于打开 HTML5 模式且仅支持浏览器的情况。

这将始终有效：

$window.location.search

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-04-19T18:45:26.570

只是为了总结一下。

如果您的应用程序是从外部链接加载的，那么 Angular 不会将其检测为 URL 更改，因此 $loaction.search() 会给您一个空对象。要解决这个问题，您需要在您的应用配置（app.js）中设置以下内容

```
.config(['$routeProvider', '$locationProvider', function ($routeProvider,     $locationProvider) 
{
   $routeProvider
      .when('/', {
         templateUrl: 'views/main.html',
         controller: 'MainCtrl'
      })
      .otherwise({
         redirectTo: '/'
      });

      $locationProvider.html5Mode(true);
 }]); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-11T12:44:37.663

只是对埃利斯怀特黑德的回答的精确。`$locationProvider.html5Mode(true);`如果不使用`<base href="">`标签指定应用程序的基本 URL 或将参数设置`requireBase`为`false`

[从文档](https://docs.angularjs.org/error/$location/nobase)：

> 如果您将 $location 配置为使用 html5Mode (history.pushState)，则需要使用标签指定应用程序的基本 URL，或者通过将带有 requireBase:false 的定义对象传递给 $locationProvider 来配置 $locationProvider 以不需要基本标签。 html5模式（）：

```
$locationProvider.html5Mode({
  enabled: true,
  requireBase: false
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-05T11:17:00.423

你也可以使用 $location.$$search.yourparameter

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-11T00:51:35.100

我发现对于 SPA HTML5Mode 会导致很多 404 错误问题，在这种情况下没有必要让 $location.search 工作。就我而言，我想在用户访问我的网站时捕获 URL 查询字符串参数，无论他们最初链接到哪个“页面”，并且能够在他们登录后将它们发送到该页面。所以我只捕获所有app.run 中的那些东西

```
$rootScope.$on('$stateChangeStart', function (e, toState, toParams, fromState, fromParams) {
    if (fromState.name === "") {
        e.preventDefault();
        $rootScope.initialPage = toState.name;
        $rootScope.initialParams = toParams;
        return;
    }
    if ($location.search().hasOwnProperty('role')) {
        $rootScope.roleParameter = $location.search()['role'];
    }
    ...
} 
```

然后稍后登录后我可以说 $state.go($rootScope.initialPage, $rootScope.initialParams)

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-03-10T16:49:00.797

有点晚了，但我认为你的问题是你的网址。如果不是

```
http://127.0.0.1:8080/test.html?target=bob 
```

你有过

```
http://127.0.0.1:8080/test.html#/?target=bob 
```

我很确定它会奏效的。Angular 对它的 #/ 真的很挑剔

# javascript - 用于停止事件传播的 jQuery UI 滑块

> ID：11063674
> 
> 赞同：2
> 
> 时间：2012-06-16T13:04:06.053
> 
> 标签：javascript, jquery, jquery-ui

我在可拖动的 div 中使用[jQuery UI](http://en.wikipedia.org/wiki/JQuery_UI) *Slider*。单击滑块时，事件传播并且 div 开始拖动！有没有办法停止鼠标按下事件的传播？

使用 return false 对我不起作用。

```
$('#slider-' + boxId).slider(
    {
        step: 0.2,
        min: 0.2,
        max: 2,
        value: [1],
        stop: function( event, ui )
        {
            var value = 0.2;
            value = ui.value;
            $('#' + boxId + ' .timeText').text(value + ' secs');
            $('#' + boxId).attr('data-time' , value);
            _timeLineUtility.reCalculateAll();
            return false;
        },
        slide: function (event, ui)
        {
            return false;
        },
        start: function(event, ui) { return false; }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:06:21.870

```
event.stopPropagation() 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

这是一个可能的重复项 -[停止从单击处理程序传播 mousedown/mouseup](https://stackoverflow.com/questions/8875070/stopping-propagation-of-mousedown-mouseup-from-a-click-handler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:44:45.387

尝试使用这个

```
event.stopPropagation() 
```

# c# - 将 FrameworkElement.DataContext 设置为匿名对象

> ID：11063676
> 
> 赞同：2
> 
> 时间：2012-06-16T13:04:35.863
> 
> 标签：c#, silverlight, windows-phone-7, data-binding

我有这个网格，包含一个模板：

```
<Grid x:Name="Bar" Width="400">
    <Grid.Resources>
        <DataTemplate x:Name="ScoreText">
            <Grid Grid.Column="{Binding Col}">
                <Rectangle Fill="Red"/>
                <TextBlock Text="{Binding Value}" />
            </Grid>
        </DataTemplate>
    </Grid.Resources>
</Grid 
```

我想将模板的一个实例插入到包含网格中，`Bar`. 这就是我正在做的事情：

```
FrameworkElement item = (FrameworkElement) ScoreText.LoadContent();
item.DataContext = new { Col = 0, Value = 100 };
Bar.Children.Add(item); 
```

这适用于 Visual Studio 的 XAML 设计器，但无法在手机上正确绑定。

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:43:35.923

匿名类型不起作用，因为只能绑定属性。添加：

```
public struct Data {
    public int Col {get; set;}
    public string Value {get; set;}
} 
```

并且改变

```
item.DataContext = new { Col = 0, Value = 100 }; 
```

到

```
item.DataContext = new Data { Col = 0, Value = 100 }; 
```

让它工作

# python - 无法在 Google App Engine 中使用 Python 2.5 在 Web 端正确显示拉丁重音

> ID：11063678
> 
> 赞同：0
> 
> 时间：2012-06-16T13:05:08.627
> 
> 标签：python, google-app-engine, utf-8

非常基本的[Unicode](http://en.wikipedia.org/wiki/Unicode) Python 问题> 我无法在我的[Google App Engine](http://en.wikipedia.org/wiki/Google_App_Engine) API中的 Python 2.5 中的自定义 TinyWebDB 数据库（以[UTF-8编码的](http://en.wikipedia.org/wiki/UTF-8)[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件）中在 Web 端显示正确的拉丁语重音： `main.py`

在网络上：标签 = 滚珠轴承 / 价值 = roulement \u00e0 billes => NOK！

在 Android 手机上：标签 = 滚珠轴承 / 价值 = 规则 à billes => 好！

注意：另外，如果我在文件中引入任何拉丁字符`main.py`，我会在运行它时收到错误消息。

解决办法是什么？

从我的代码中提取：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import codecs

class StoredData(db.Model):
    tag = db.StringProperty()
    value = db.StringProperty(multiline=True)
    date = db.DateTimeProperty(required=True, auto_now=True)

def get_value(self, tag):
    entry = db.GqlQuery("SELECT * FROM StoredData where tag = :1", tag).get()
        if entry:
            value = entry.value
        else:
            value = "No result"
        WritePhoneOrWeb(self, lambda : json.dump(value, self.response.out))

#### Write response to the phone or to the Web depending on fmt
#### Handler is an appengine request handler.  writer is a thunk
#### (i.e. a procedure of no arguments) that does the write when invoked.
def WritePhoneOrWeb(handler, writer):
    if handler.request.get('fmt') == "html":
        WritePhoneOrWebToWeb(handler, writer)
    else:
        handler.response.headers['Content-Type'] = 'application/jsonrequest'
    writer()

#### Write to the Web (without checking fmt)
def WriteToWeb(handler, writer):
    handler.response.headers['Content-Type'] = 'text/html;charset=UTF-8'
    handler.response.out.write('<html><body>')
    writer()
    WriteWebFooter(handler, writer) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:22:44.277

我添加到我的代码中：

```
 value = unicode(value)
 value = value.encode('ascii','xmlcharrefreplace') 
```

它工作得很好。

菲利普

# php - php中的重载

> ID：11063679
> 
> 赞同：5
> 
> 时间：2012-06-16T13:05:18.610
> 
> 标签：php, php-5.3

谁能说出下面给定的行是什么意思？

下面的行是从[PHP 手册](http://php.net/manual/en/language.oop5.overloading.php)中复制的：

> **笔记：**
> 
> 除了 isset() 之外，不能在其他语言结构中使用重载属性。这意味着如果对重载属性调用 empty()，则不会调用重载方法。
> 
> 要解决该限制，必须将重载的属性复制到范围内的局部变量中，然后交给 empty()。

但是，我们不能在重载属性上调用 empty() 是不正确的，当我调用 empty() 时，它触发了 __isset()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:17:16.127

这是一个文档错误：

```
<?php
class PropNameReturn {
    function __isset($propname){
          return true;

    }
    function __get($propname){
          echo 'Yes, it IS called!'.PHP_EOL;
          return $propname;
    }
}
$o = new PropNameReturn();
var_dump(empty($o->this_prop_name));
//Yes, it IS called!
//bool(false)
$b = new stdClass();
var_dump(empty($b->this_prop_name));
//bool(true) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:15:36.750

看来说明书有误。这也适用于 PHP 5.2

顺便说一句，似乎`__get()`在使用时被调用`empty()`，但结果也取决于`__isset()`.

`empty()`仅当`__isset()`返回 true*并* `__get()`返回空值时才返回 true。

请参阅此示例代码：

```
class Foo {
    function __get($name) {
        if ($name == "bar")
            return '';
    }
    function __isset($name) {
        if ($name == "bar")
            return true;
    }
}
$foo = new Foo();
echo $foo->bar . PHP_EOL;  // outputs "" - correct
echo var_export(isset($foo->bar)) . PHP_EOL; // outputs "true" - correct

$bar = $foo->bar;

// outputs both "true" -- so the manual is wrong here
echo var_export(empty($foo->bar)) . PHP_EOL;
echo var_export(empty($bar)) . PHP_EOL; 
```

另请参阅此[错误报告](https://bugs.php.net/bug.php?id=43936)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:09:28.937

显然我没有注意到您在自己的问题中包含的链接，所以这里是重载的基本分类：

PHP 中的重载是动态创建方法和参数的概念。考虑一个基本场景：

```
class MyClass {
  public $foo = 'bar';
}

$Instance = new MyClass();
echo $Instance->foo; 
```

我们都希望打印“bar”，它会。这是使用重载的相同示例：

```
class MyOverloadedClass {
  public function __get($variable) {
    return $variable == 'foo' ? 'bar' : '';
  }
}

 $Instance = new MyOverloadedClass();
 echo $Instance->foo; 
```

在第二个示例中，因为 MyOverloadedClass::$foo 不存在，__ge 方法将被执行，并将传递用户请求的变量（在本例中为“foo”）。我在 __get 方法中的代码将确定用户正在寻找 foo，并返回“bar”

语言结构是 PHP 语言的一部分。换句话说，解析器解释它们并知道要做什么，而不必查找函数引用。一些例子是 exit、die、print、echo、isset 和 empty。

isset() 是唯一可以处理重载的语言结构。手册页描述了一个重载方法 __isset，您可以将其添加到您的类中，并且每次有人在该类的属性上调用 isset 时都会执行该方法。然而，对重载的属性调用 empty() 将始终返回 true，并且可能会抛出 E_NOTICE。原因如下：

**免责声明：在重载属性上调用 empty() 似乎会执行 __get()，如果且仅当您有一个为传递的变量名返回 true 的 __isset() 方法时：**

empty() 不会调用您重载的 __get() 方法。它将查看类定义以查看该参数是否存在。如果是，它将评估它是否为空。但是，访问未定义的类参数会引发错误。在我的第一个示例中，我会通过询问 $Instance->bar 来引发错误，因为它不存在。如果您要求，这与您将得到的错误相同

```
empty( $Instance->foo ); 
```

在第二个例子中。我希望这有帮助。

有关如何将其应用于函数或设置变量的更多详细信息，请参阅您提到的页面。

# java - 使用线程时，我绝对必须使用静态变量吗？

> ID：11063683
> 
> 赞同：2
> 
> 时间：2012-06-16T13:05:49.933
> 
> 标签：java, multithreading

作为个人项目的一部分，我正在制作一个[IRC 机器人](http://en.wikipedia.org/wiki/Internet_Relay_Chat_bot)。我的第一次尝试是让一个主类完成所有工作，但效率不高，所以我决定将 IRC 部分与机器人分开，制作一个非常简单的 IRC 客户端，它可以连接到服务器、验证自身、加入通道和接收线。

然后，我可以在 IRC 客户端接收到每一行时对其进行处理，或者将客户端放入一个线程中，它将这些行放入队列或映射中（取决于它是什么类型的行）。线程选项似乎更合适且更具挑战性。

由于机器人需要访问 IRC 客户端收到的行，我想将这些行放在机器人可以访问的公共静态队列中，但这让我想起了 C 中的一个全局变量，我觉得这很奇怪，因为每个人都可以访问此字段。有没有办法让 IRC 客户端完成它的工作，让机器人在没有公共静态字段的情况下达到峰值？

我想过让 IRC 客户端使用同步方法传递线路，以便在线路可用时通知机器人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:36:41.620

您可以在两个（或更多）线程之间共享状态，而无需使用静态字段。例如：

```
 public class State {
        private final Queue queue = ...
        private final Object somethingElse =
        // getters and setters
    }

    public static void main(String[] args) {
        State state = ...
        new thread(new IRC(state)).start();
        new thread(new Bot(state)).start();
    } 
```

然后定义`IRC`和`Bot`类来实现`Runnable`并为它们提供以`State`实例作为参数的构造函数。当然，对共享状态的操作需要适当地同步。

# python - 简单快速稳健的图像比较

> ID：11063697
> 
> 赞同：0
> 
> 时间：2012-06-16T13:09:12.507
> 
> 标签：python, image-comparison

我有一个图像查找和“模糊比较”任务。我不知道应该使用哪种方法。

设置是这样的：一个，比如说，100x100 的盒子要么大部分被一个物体填充，要么没有。对人眼来说，这个对象总是几乎相同，但可能会因模糊、轻微重新缩放、3 维倾斜、向侧面移动或向上/向下移动一两个像素或其他非常小的图形变化而改变。

什么是检查转换后的对象是否存在的简单快速且可靠的方法？指向python包和代码会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:57:25.583

不确定我是否完全理解你的问题，但我会试一试..

假设：

1.  我们只想知道`some object`盒子里是否有。
2.  空盒子总是一样的
3.  完美的盒子对齐等。

你可以这样做：

1.  从`query image`你的`empty box image`.
2.  对所有像素求和
3.  如果该值为零，则图像相同，因此没有变化，因此没有对象。

很明显两张图片的方框部分其实是有一些区别的，但是关键是两张图片的`non-object`部分尽量相似，如果是这样的话，那么我们可以使用上面的方法但是第三步是阈值测试。如果阈值设置合理，它应该可以很好地预测盒子是否为空。

# assembly - 绝对内存寻址上的 gcc 汇编器

> ID：11063700
> 
> 赞同：0
> 
> 时间：2012-06-16T13:09:32.570
> 
> 标签：assembly

我使用的机器是 64 位的，我编写了这样的汇编代码：

```
movl $0x12e48ead 0x0804b324
pushl $0x08049103
ret 
```

使用 AT&T 格式。当我使用命令行编译它时：

```
gcc -m32 -c firecracker.S 
```

结果错误如下：

```
firecracker.S: Assembler messages:
firecracker.S:1: Error: junk `0x0804b324' after expression
firecracker.S:1: Error: suffix or operands invalid for `mov' 
```

我想知道为什么会这样。有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:13:22.193

这看起来像一个语法错误 - mov 的语法是：

```
movl $sourceaddr, $destaddr 
```

注意逗号和美元符号！当然，sourceaddr 和 destaddr 也可以是寄存器。

正如您所指定的，64 位机器不应该有什么不同，`-m32`它将组装代码以在 32 位平台上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:13:33.707

你少了一个逗号：

```
movl $0x12e48ead, 0x0804b324
pushl $0x08049103
ret 
```

构建良好。

# css - CssResource 改变风格

> ID：11063703
> 
> 赞同：0
> 
> 时间：2012-06-16T13:10:10.807
> 
> 标签：css, gwt, cssresource

我有界面如

```
public interface PopupPanelWithConfirmStyle extends ClientBundle {

  public static final PopupPanelWithConfirmStyle I = GWT.create(PopupPanelWithConfirmStyle.class);

  @Source("PopupPanelWithConfirmStyle.css")
  public Style css();

  public interface Style extends CssResource {

  @ClassName("popupPanelWithConfirmStyle")
  String popupPanelWithConfirmStyle();

  @ClassName("confirmButton")
  String confirmButton();
 }

} 
```

我有标准的 PushButton，它有 gwt-PushButton-up,.gwt-PushButton-up-hovering,.gwt-PushButton-up-disabled,.gwt-PushButton-down,.gwt-PushButton-down-hovering,.gwt- PushButton-down-disabled 和其他样式

所以我设置了 PushButton 样式 - confirmButton 并编写了自己的 css

```
.popupPanelWithConfirmStyle {
background: none repeat scroll 0 0 white;
padding: 3px;
z-index: 100;
}

.confirmButton{
border-radius: 2px 2px 2px 2px;
margin: 0;
text-decoration: none;
padding: 3px 5px;
}

@external confirmButton-up, confirmButton-up-hovering, confirmButton-up-disabled, confirmButton-down, confirmButton-down-hovering, confirmButton-down-disabled 

.confirmButton-up {
-moz-border-bottom-colors: none;
-moz-border-image: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
border-color: #BBBBBB #BBBBBB #A0A0A0;
border-style: solid;
border-width: 1px;
cursor: pointer;
}

.confirmButton-up-hovering {
border: 1px solid #939393;
cursor: pointer;
}

.confirmButton-up-disabled {
border: 1px solid #BBBBBB;
cursor: default;
opacity: 0.5;
}

.confirmButton-down {
border: 1px inset #666666;
cursor: pointer;
outline: medium none;
padding: 4px 4px 2px 6px;
}

.confirmButton-down-hovering {
-moz-border-bottom-colors: none;
-moz-border-image: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
border-color: #333333 #939393 #939393;
border-right: 1px solid #939393;
border-style: solid;
border-width: 1px;
cursor: pointer;
}

.confirmButton-down-disabled {
border: 1px outset #CCCCCC;
cursor: default;
opacity: 0.5;
} 
```

当我运行 gwt - 我看到了 -

```
div tabindex="0" class="GGUR4G1EN GGUR4G1EN-up" role="button" aria-pressed="false" 
```

我应该怎么办？.confirmButton-up 将在 GGUR4G1EN-up 中转换

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:20:09.880

目前这是不可能的：[http ://code.google.com/p/google-web-toolkit/issues/detail?id=4746](http://code.google.com/p/google-web-toolkit/issues/detail?id=4746)

如果您想利用依赖样式名称，您必须禁用对类名称的混淆（例如`@external`，在 CSS 中使用，不仅用于`-up`、`-hover`等变体，还用于主要样式名称）。然而，这意味着 CSS 资源之间可能存在命名冲突。

# css - 如何使 ul 的元素在溢出设置为隐藏的 div 之外

> ID：11063704
> 
> 赞同：4
> 
> 时间：2012-06-16T13:10:13.040
> 
> 标签：css

我有一个 div，其中包含一些内容，其中包括一个带有名称列表的 ul，div 标签的溢出设置为隐藏和高度：auto，以便它随着内容的增加而增加高度。但是我有一个带有名称列表的 ul我希望这份清单能跳出框框。像 facebook 之类的添加人员自动完成。人员列表显示在框外

这是我的语法

```
 <div>

    <!-- content goes here -->

    <ul><!-- names go here --> </ul>

    </div> 
```

更新

```
<div><!-- div with overflow set to hidden-->

<ul class="selected"></ul><!-- ul containing selected elements-->

<ul class="users"></ul> <!-- list of users -->

</div>

div{overflow:hidden}

.selected{overflow:hidden}

.users{position:absolute} 
```

我需要用户 div 走出盒子，但因为父 div 设置为溢出隐藏它被切断。我无法删除隐藏的溢出，因为选择类的 div 获取更多元素，父 div 不会扩展

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:45:32.723

不，你根本不能。

[jsBin 演示](http://jsbin.com/udezuh/2/edit)表明你不能从`overflow:hidden`一个内部子元素中“推出”。答案是：**不要使用溢出：隐藏；**.

或者：你可能想检查[这个](https://stackoverflow.com/questions/3387489/make-child-visible-outside-an-overflowhidden-parent)答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:29:37.880

尝试添加`position: relative`到 ul。

演示：http: [//jsfiddle.net/57NmY/](http://jsfiddle.net/57NmY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T17:44:11.970

如果您绝对定位子元素，则可以这样做。-> [http://jsfiddle.net/joplomacedo/CX5n9/](http://jsfiddle.net/joplomacedo/CX5n9/)

# sql - LINQ 不适用于“select isnull”查询..？

> ID：11063709
> 
> 赞同：-1
> 
> 时间：2012-06-16T13:10:30.463
> 
> 标签：sql, sql-server, linq, linq-to-sql, linq-to-entities

> **可能重复：**
> [LINQ 中的 SQL ISNULL 等价物？](https://stackoverflow.com/questions/413084/equivalent-of-sql-isnull-in-linq)
> [在 Linq 中使用 IsNull 或选择 COALESCE ..？](https://stackoverflow.com/questions/11064177/using-isnull-or-select-coalesce-in-linq)

我在 LINQ 中试过这个查询：

```
 string query = @"SELECT ISNULL(P.firstname, s.firstname) AS Expr1,ISNULL(P.lastname,
  s.lastname) AS Expr2 FROM comment AS C LEFT OUTER JOIN professor AS P ON P.ID =   

  C.PID LEFT OUTER JOIN student AS s ON s.ID = C.SID

  WHERE (C.VID = 2)";

        ArrayList allNames=null;
        using (var context = new NewsReaderEntities())
        {
            ObjectQuery<string> results = context.CreateQuery<string>(query);
         //   ObjectQuery<string> results1 = context.CreateQuery<string>
             (query1,parameters);
            foreach (string result in results )
            {
                allNames.Add(result);

            }
        }

        return allNames;

    } 
```

但它返回错误：

> linq 'ISNULL' 无法解析为有效的类型或函数。接近简单的标识符，

我也试过这个查询：

```
SELECT COALESCE(p.firstname, s.firstname), COALESCE(p.lastname, s.lastname)
  FROM comment c
  LEFT JOIN Professor p
    ON c.pid = p.id
  LEFT JOIN Student s
    ON c.sid = s.id
 WHERE c.vid = 2 
```

这也会引发错误。

两者在 SQL 管理中都可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:41:31.510

看这个例子：

```
var query = from p in Pets select p;
if (OwnerID != null) query = query.Where(x => x.OwnerID == OwnerID);
if (AnotherID != null) query = query.Where(x => x.AnotherID == AnotherID);
if (TypeID != null) query = query.Where(x => x.TypeID == TypeID); 
```

希望这对你有帮助

# .htaccess - .htaccess 将特定页面重定向到根

> ID：11063716
> 
> 赞同：1
> 
> 时间：2012-06-16T13:12:05.170
> 
> 标签：.htaccess, mod-rewrite, http-status-code-302

SO上有几个不同的问题，但我没有找到一个可以回答我的具体问题的问题。

我想在我的 htaccess 中添加一个重写规则，它将所有流量都转到

```
http://example.com/blog/its-a-sunny-day 
```

并重定向到

```
http://example.com 
```

理想情况下，这应该通过 302 完成，因为稍后会更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:39:05.677

```
Redirect /blog/its-a-sunny-day http://example.com 
```

这似乎有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T17:32:55.283

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^blog/its-a-sunny-day/?$ / [L,R,NC] 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-16T13:32:25.167

创建一个用于发送重定向标头的 cgi/php 文件。然后编写一个重写规则，将“blog/its-a-sunny-day”替换为“path/to/redirect.php”。例如：

/redirect.php：

```
<?php header( 'Location: /' ) ; ?> 
```

/.ht 访问：

```
RewriteEngine on
RewriteRule ^blog/its-a-sunny-day$ /redirect.php 
```

# c - K&R 第 8 章，readdir 函数

> ID：11063717
> 
> 赞同：0
> 
> 时间：2012-06-16T13:12:13.490
> 
> 标签：c

我被困在这个功能上（`fsize()`在 K&R 第 8 章的例子中找到）：

```
#include <sys/dir.h>
/* local directory structure */
/* readdir: read directory entries in sequence */
Dirent *readdir(DIR *dp)
{
    struct direct dirbuf; /* local directory structure */
    static Dirent d;      /* return: portable structure */

    while (read(dp->fd, (char *) &dirbuf, sizeof(dirbuf)) == sizeof(dirbuf)) {
        if (dirbuf.d_ino == 0) /* slot not in use */
            continue;
        d.ino = dirbuf.d_ino;
        strncpy(d.name, dirbuf.d_name, DIRSIZ);
        d.name[DIRSIZ] = '\0'; /* ensure termination */
        return &d;
    }
    return NULL;
} 
```

在这个函数中`Dirent`，`DIR`是由 K&R 编写的自定义结构（不是在 dirent.h 中找到的结构）：

```
typedef struct { /* portable directory entry */
  long ino;    /* inode number */
  char name[NAME_MAX+1];    /* name + '\0' terminator */
} Dirent;

typedef struct {     
  int fd;
  Dirent d;
} DIR; 
```

当我使用书中的代码时，它运行良好，但有两个问题（问题）：

*   文件列表过程不会递归发生。它仅适用于当前目录一次。
*   我无法理解上述`read()`功能。
    1）如果`dp->fd`是目录，则`read()`返回 errno 21（目录错误），
    2）这样的东西如何`read()`填充内存结构`dirbuf`，难道不应该只读取某种字符/字节吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:09:48.337

想一想递归结构的成本。您将需要每个目录的子目录列表。这大大增加了您的内存需求，以及您的内存分配的复杂性（不能再使用堆栈分配的结构，您必须使用`malloc`/ `free`）代码。

出于这个原因，我说#1 是无效的。

不完全确定这是否是家庭作业，但我无法重现 #2，所以现在我将不理会它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:12:52.760

1.  调用该函数一次将返回“下一个”目录条目。它旨在被重复调用 - 每个目录条目一次。
2.  无法为读取系统调用（在 unistd.h 中声明）提供目录文件描述符。这很可能是不同的“读取”功能。dirbuf 在函数中声明，所以它不是只读的。

# c - sysfs 中的内核模块参数 - 快速响应更改

> ID：11063719
> 
> 赞同：4
> 
> 时间：2012-06-16T13:12:44.410
> 
> 标签：c, linux-kernel, kernel-module, sysfs

是否可以在其中一个 sys 文件发生更改时通知模块？我的任务是做一个控制模块内缓冲区大小的文件，我想在文件中的值更改时调整缓冲区的大小。我的另一个想法（如果我不能通知模块）是每次使用模块时检查以前的值，然后调整缓冲区的大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T16:12:29.253

这不是 Sysfs 的目的吗？

当您创建 a`kobject`并在 Sysfs（它是一个目录）中为其提供表示时，您然后为该对象创建属性，这些属性将成为该目录中的文件。您为 提供一个`store`和一个`show`回调`kobject`，它们基本上等同于 resp。`write`和`read`。

`store`是你想要的。它看起来像这样：

```
ssize_t (*store)(struct kobject *kobj, struct attribute *attr, 
    const char *buffer, size_t size); 
```

一旦虚拟文件写入用户空间，您就会收到`size`字节。`buffer`

看看这个模块（取自[这里](http://godandme.wordpress.com/2011/04/05/how-to-make-a-sysfs-entry/)）：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/init.h>
#include <linux/fs.h>
#include <linux/slab.h>

struct my_attr {
    struct attribute attr;
    int value;
};

static struct my_attr my_first = {
    .attr.name="first",
    .attr.mode = 0644,
    .value = 1,
};

static struct my_attr my_second = {
    .attr.name="second",
    .attr.mode = 0644,
    .value = 2,
};

static struct attribute * myattr[] = {
    &my_first.attr,
    &my_second.attr,
    NULL
};

static ssize_t default_show(struct kobject *kobj, struct attribute *attr,
        char *buf)
{
    struct my_attr *a = container_of(attr, struct my_attr, attr);
    return scnprintf(buf, PAGE_SIZE, "%d\n", a->value);
}

static ssize_t default_store(struct kobject *kobj, struct attribute *attr,
        const char *buf, size_t len)
{
    struct my_attr *a = container_of(attr, struct my_attr, attr);
    sscanf(buf, "%d", &a->value);
    return sizeof(int);
}

static struct sysfs_ops myops = {
    .show = default_show,
    .store = default_store,
};

static struct kobj_type mytype = {
    .sysfs_ops = &myops,
    .default_attrs = myattr,
};

struct kobject *mykobj;
static int __init sysfsexample_module_init(void)
{
    int err = -1;
    mykobj = kzalloc(sizeof(*mykobj), GFP_KERNEL);
    if (mykobj) {
        kobject_init(mykobj, &mytype);
        if (kobject_add(mykobj, NULL, "%s", "sysfs_sample")) {
             err = -1;
             printk("Sysfs creation failed\n");
             kobject_put(mykobj);
             mykobj = NULL;
        }
        err = 0;
    }
    return err;
}

static void __exit sysfsexample_module_exit(void)
{
    if (mykobj) {
        kobject_put(mykobj);
        kfree(mykobj);
    }
}

module_init(sysfsexample_module_init);
module_exit(sysfsexample_module_exit);
MODULE_LICENSE("GPL"); 
```

**另外**：您可能希望在读取条目时向用户输出缓冲区大小。这通常是这样做的方式。还要确保信息（读取和写入）是人类可读的格式，以跟上 Unix 哲学。

**更新**：请参阅[最近](http://www.kroah.com/log/blog/2013/06/26/how-to-create-a-sysfs-file-correctly/)由顶级内核开发人员之一 Greg Kroah-Hartman 撰写的关于 Sysfs 文件创建的有趣文章。

# http-status-code-404 - 网站管理员工具报告似乎不存在的抓取错误？

> ID：11063721
> 
> 赞同：0
> 
> 时间：2012-06-16T13:12:51.370
> 
> 标签：http-status-code-404, google-search-console

谷歌网站管理员工具给了我大量的某种类型的抓取错误，但我看不出它是从哪里得到的

它报告错误是此页面上的 404（绝对不存在）

```
http://www.soundshelter.net/artist/www.soundshelter.net/artist/Arnold+Jarvis 
```

并从这个页面链接到

```
http://www.soundshelter.net/artist/Arnold+Jarvis 
```

第二页上的任何地方都没有指向第一页的链接。我网站上的许多页面都遇到了同样的错误（都是动态创建的）

任何想法为什么会发生这种情况？这可能与我在代码中创建链接的方式有关吗？

```
<a href="/artist/Arnold Jarvis">Arnold Jarvis</a> 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:48:19.160

Hay Franco 问题出在您网站中的规范代码中，这会产生所有 404 错误。

例如，在第 33 行获取此页面 [http://www.soundshelter.net/artist/Arnold+Jarvis](http://www.soundshelter.net/artist/Arnold+Jarvis) ，您将看到这一行

```
 <link rel="canonical" href="www.soundshelter.net/artist/Arnold+Jarvis" /> 
```

此行在您的所有 CMS 系统中创建 404 页面，如果您将在那里添加**http://**，您的所有 404 页面都将被修复，它可能是一些系统插件：）

# python - python查找特征值和特征向量

> ID：11063723
> 
> 赞同：0
> 
> 时间：2012-06-16T13:13:05.283
> 
> 标签：python, scipy, eigenvector, eigenvalue

我有一个图拉普拉斯算子，我需要找出最大的“k”特征值和特征向量。我正在使用这样的东西：-

```
#L= laplacian matrix.
eigVal,eigVectors = eigsh(L, k,  which='LA') 
```

这给了我大致正确的结果，但是出了点问题，我得到的 eig 值略大于 1（比如 1.05）。在我的情况下，特征值的上限为 1。当使用 MATLAB 和其他平台时，我得到了想要的结果。

我在这里做错了什么？有什么方法可以并行计算特征向量和值？（我正在考虑使用 pyCuda。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:49:01.427

你确定你的拉普拉斯算子的 Python 实现是正确的吗？您是否仔细检查过输入矩阵是否对称？

如果手头没有您的特定矩阵，很难说到底出了什么问题。您可以保存矩阵并将其放在互联网上的某个地方吗？

**编辑**：删除了对先前行为的提及`eigs*`——该例程在此之前没有`eigsh`名称，所以这里不是这种情况。

# iphone - 如何访问主项目中的子项目头文件

> ID：11063733
> 
> 赞同：4
> 
> 时间：2012-06-16T13:15:23.020
> 
> 标签：iphone

我有一个主项目和另一个作为子项目添加的项目。我想将子项目中定义的头文件访问到主项目中，但不幸的是它说文件找不到错误。

请看附件图片。我应该修改什么来访问子项目的头文件？

![在此处输入图像描述](../Images/298cd1cebf4fba195b48e3232be1f0f6.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T13:17:49.870

您需要将子项目的路径添加到`search path for headers`主项目中，为了阅读如何做到这一点，请检查此[将系统头搜索路径添加到 Xcode](https://stackoverflow.com/questions/3428216/adding-system-header-search-path-to-xcode)

# directory - 将 Nofollow 属性添加到整篇文章目录？

> ID：11063734
> 
> 赞同：-1
> 
> 时间：2012-06-16T13:15:29.497
> 
> 标签：directory, nofollow

我有一个文章目录，它是在文章设置脚本上创建的。网站名称是 pakgirl.net。我想把它的所有链接都放在文章nofollow 以增加我网站的公关。任何人都可以帮助我 plzz :( 因为我不是开发人员。只知道我的主机中有文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:57:53.293

您的免费文章目录基于 Wordpress 并使用免费文章目录主题。

我在网上搜索：globally added rel=nofollow to wp article directory

这是一个可以帮助你的 WP 插件列表 [http://wordpress.org/extend/plugins/tags/nofollow](http://wordpress.org/extend/plugins/tags/nofollow)

除此之外，您可以一次导出、离线更正、导入多组文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-03T06:29:12.473

```
sed -i 's#<a href#<a rel="nofollow" href#' yourpage.php 
```

这将覆盖文件或“就地编辑”

首先做这个作为试运行

```
find yourDirectory/ \( -name "*.html" -o -name "*.php" \) | xargs sed 's#<a href#<a rel="nofollow" href#' <dryrun.txt 
```

# ios - IOS - 无法启动应用程序

> ID：11063736
> 
> 赞同：26
> 
> 时间：2012-06-16T13:15:48.623
> 
> 标签：ios

我刚刚尝试运行我的测试应用程序，但出现此错误：

> 2012-06-16 09:09:10.737 BusinessPlan [832:f803] 无法实例化 UIMainStoryboardFile 'MainStoryboard_iPhone' 的默认视图控制器 - 也许未设置指定的入口点？

如何设置指定入口点？那是什么？

另外，当我浏览他们的介绍教程时，我最后一次运行模拟器是在颜色更改步骤上，这对我有用。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-16T13:25:15.310

在您的故事板文件中选择`viewController`您要分配为第一个控制器并检查`is initial View Controller`检查图像

![在此处输入图像描述](../Images/fcb2a212dbf5ab3d4f555b1eee3f6605.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:28:25.003

我还没有对故事板做大量的工作，主要是使用较旧的基于 nib/xib 的流程。然而...

这看起来像：当应用程序启动时，它会创建一个 UIApplication 实例。然后，该实例需要知道要连接到哪个故事板才能创建用户界面。您的应用中似乎缺少该链接。在过去，您要么在代码中明确告诉应用程序要加载哪个 nib，要么在界面生成器中指定链接。我相信在故事板的世界中，它现在更加抽象，并且错误地将界面与应用程序断开连接并不容易确定和修复。我建议首先阅读 Apple 开发者网站上的故事板编程指南，或者开始在故事板文件中查找缺少与其委托的连接。

这本身不是一个答案，道歉，更多的是在哪里找到答案的指南。

# c# - 有效存储位索引

> ID：11063738
> 
> 赞同：0
> 
> 时间：2012-06-16T13:15:59.170
> 
> 标签：c#, 32bit-64bit, bit

我想将某些索引存储在位序列中。位数是 2 的幂，
可以安全地假设最大索引为 255（起始索引为 0）。早些时候我将每个索引存储为一个整数。但这占用了太多的内存。

我想用面具之类的东西。

例如：如果我想存储索引 0、3、5，那么我将 101001 即 41 存储为整数。

问题是我拥有的最大索引是 255 并且使用上述技术我只能将索引存储到 64（使用 64 位整数）。我还有其他方法可以做到这一点吗？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:07:23.527

.NET 有一个用于此类事情的内置类：[`BitArray`](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)

这将让您有效地存储一串位（以布尔的形式）。

您可以使用、、和方法对`BitArray`s执行按位运算。`And``Or``Xor``Not`

`BitArray`您可以使用布尔值、字节或整数来初始化 a 。例如，您可以`00101100`像这样初始化它：

```
BitArray bits = new BitArray(new byte[] { 0x2C }); // 0x2C == 00101100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:46:32.430

***在java中，位索引变得容易，如下面的小教程......***

这个类实现了一个根据需要增长的位向量。位集的每个组件都有一个布尔值。BitSet 的位由非负整数索引。可以检查、设置或清除各个索引位。一个 BitSet 可用于通过逻辑 AND、逻辑异或和逻辑异或操作来修改另一个 BitSet 的内容。

默认情况下，集合中的所有位最初都具有值 false。

每个位集都有一个当前大小，即该位集当前使用的空间位数。请注意，大小与位集的实现有关，因此它可能会随着实现而改变。位集的长度与位集的逻辑长度相关，并且独立于实现来定义。

除非另有说明，否则将 null 参数传递给 BitSet 中的任何方法都将导致 NullPointerException。如果没有外部同步，BitSet 对于多线程使用是不安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:40:16.130

您可以为每个位索引使用 2 位索引。实际使用 10 位（索引从 1 到 10，设置位 0、4、8）：

单一指标：

```
i = 0100010001
Index1 = i 
```

两个组合索引：

```
i1 = 01000
i2 = 10001
Index2 = [i1, i2];
Index2.fragment_length = 5 
```

数组 在伪代码中，检索或设置一个位

```
set(Index, bit) {
    fragment = quotient(bit, Index.flagment_length); //quotient = integer division
    bit_index = module(bit, Index.flagment_length); //index of the bit in the fragment
    set(Index[fragment], bit-or(Index[Fragment], bit-shift-left(1 << bit_index))); //Set the bit indexes vector fragment with or-ing the appropriate bitmask
}

get(Index, bit) {
    fragment = quotient(bit, Index.flagment_length); //quotient = integer division
    bit_index = module(bit, Index.flagment_length); //index of the bit in the fragment
    if (get(Index[fragment], bit-and(Index[Fragment], bit-shift-left(1 << bit_index))) > 0) then true else false; //Get the bit indexes vector fragment bit with and-ing the appropriate bitmask and return true or false
} 
```

我希望已经了解您的要求！

# asp.net-mvc - 如何在某些区域禁用 twitter bootstrap

> ID：11063742
> 
> 赞同：3
> 
> 时间：2012-06-16T13:16:36.810
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在使用`twitter bootstrap`. `boostrap`在我的`master page`. 但我需要某种形式，不要使用 boostrap 风格。

如何阻止 boostrap 变成 some `div`or `form`？

我的目标是

![在此处输入图像描述](../Images/103c981f0cb475b274fc3d000ba38149.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:21:33.707

您可以将引导 CSS 分配给 2 个不同的 CSS。第一个将具有所有网站的通用 CSS，第二个将只有按钮网格...等。因此，一旦您需要它，您只需将通用 CSS 添加到您的网页中，或者如果您真的不需要它，则将其删除

bootstrap.css 的一般样式在第 1-176 行之间

# android - 返回之前的活动

> ID：11063744
> 
> 赞同：0
> 
> 时间：2012-06-16T13:16:39.650
> 
> 标签：android

在我的应用程序中，我需要让用户回到当前活动之前（不一定直接）的某些活动。所有这些以前的活动可能都需要 onCreate 中的 Intent 参数。

所以，我的问题是有什么简单的方法可以让用户回到一个可能不是他之前直接参与的活动的活动，并且是否有可能避免手动解决保存/恢复这些以前活动的意图参数的方法？

举个例子：有一个全局搜索栏，可以为用户提供产品建议；一旦他们点击了其中一个建议的项目，他们就会进入产品查看活动，在那里他们可以使用另一个产品重新加载该活动 - 浏览。在几次这样的重新加载之后，他们可能会决定回到开始搜索的活动，但它可能不是最接近当前的活动。

UPD：也应该有可能回到 B 活动序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:22:27.457

`startActivityForResult()`在加载新活动时使用并在`finish()`后按时关闭已启动的活动可以解决您的问题。

# c++ - 元素之间的输出逗号

> ID：11063748
> 
> 赞同：1
> 
> 时间：2012-06-16T13:17:11.090
> 
> 标签：c++, performance, coding-style

我的问题与[此](https://stackoverflow.com/questions/9699460/what-is-the-better-way-to-add-commas-to-multiple-elements-string-output)类似，但我不想为此使用库。

想象一下，我们有一个要输出的名称数组。

```
string names[] = { "Peter", "Max", "Jack", "Daniel", "Luke" };

for(int i = 0; i < sizeof(names); i++)
{
    cout << names[i];
} 
```

输出：`PeterMaxJackDanielLuke`

这不完全是我们所说的用户友好，所以让我们在名称之间输出逗号。

```
for(int i = 0; i < sizeof(names); i++)
{
    cout << names[i] << ", ";
} 
```

输出：`Peter, Max, Jack, Daniel, Luke,`

问题是结束逗号。我`if`可以检查每个循环`for`是否是最后一个元素，但这似乎不是一个干净的解决方案。

**在不使用库的情况下在元素之间插入逗号的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:20:47.903

首先，您的代码中有一个错误，`sizeof(names)`会产生错误的值。

为了在正确的位置获得逗号，常规方法如下：

```
string names[] = { "Peter", "Max", "Jack", "Daniel", "Luke" };
bool first = true;

for(auto const& name : names) {
    if (first)
        first = false;
    else
        cout << ", ";
    cout << name;
} 
```

或者，如果您不使用 C++11：

```
for (unsigned i = 0; i < sizeof(names) / sizeof(names[0]); ++i) {
    if (i > 0)
        cout << ", ";
    cout << names[i];
} 
```

但是这个：

> 在不使用库的情况下在元素之间插入逗号的最佳方法是什么？

是态度不对。只有在使用库时，C++ 才能很好地工作。没有库，C++ 是一门糟糕的语言。或者，用 Stroustrup 的话来说：

> 如果没有一个好的库，大多数有趣的任务都很难在 C++ 中完成；但是如果有一个好的库，几乎任何任务都可以变得简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T16:15:06.180

使用[`boost::join`](http://www.boost.org/doc/libs/1_41_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.join_hpp)：

```
std::cout << boost::join(names, ", ") << "\n"; 
```

因为重写函数没有意义……尽管它确实很简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T13:35:51.220

为什么不简单：

```
string names[] = { "Peter", "Max", "Jack", "Daniel", "Luke" };
int i;

for (i = 0; i < sizeof(names) / sizeof(names[0]) - 1; i++)
{
    cout << names[i] << ", "; 
}   
cout << names[i]; 
```

这就是我通常做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T13:21:22.127

这不是一个干净的解决方案，但它是唯一的解决方案。

```
for(int i = 0; i < sizeof(names); i++)
{
    cout << names[i] << (i==sizeof(names)-1)?"",", ";
} 
```

# oauth-2.0 - 如何使用带有 GAS 的 UrlFetchApp 获取访问令牌

> ID：11063749
> 
> 赞同：5
> 
> 时间：2012-06-16T13:17:13.127
> 
> 标签：oauth-2.0, google-apps-script, google-sites

我正在学习如何将 REST 端点与 Google Apps 脚本 (GAS) 一起使用，并希望像[这里的示例一样获取访问令牌](https://developers.google.com/accounts/docs/OAuth2Login#simpleexample)

我正在使用 Google 协作平台，这是脚本

```
function doGet(e) {
  var app = UiApp.createApplication().setTitle('test OAuth 2.0');

  var mainPanel = app.createVerticalPanel();
  app.add(mainPanel);

  var url = "https://accounts.google.com/o/oauth2/auth" + 
                     "?scope=https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile" +
                     "&state=/profile" +
                     "&redirect_uri=http://<mySite>.com/gas/home/oauth2apis" +
                     "&response_type=token" +
                     "&client_id=812741506391.apps.googleusercontent.com" +
                     "&approval_prompt=force";
  Logger.log("encodeURI(url):"+encodeURI(url));

  try{
    var response = UrlFetchApp.fetch(encodeURI(url));
  }catch(e){
    Logger.log("caught this:" + e);
  }

  Logger.log("Response code:"+response.getResponseCode());
  Logger.log("X-Auto-Login Response code:"+response.getHeaders());

  var returned = app.createTextArea().setHeight(600).setValue(response.getContentText());
  mainPanel.add(returned);
  return app;
} 
```

和 Logger.log

```
Response code:200
X-Auto-Login Response code:({'Cache-control':"no-cache, no-store", Expires:"Mon, 01-Jan-1990 00:00:00 GMT", 'X-XSS-Protection':"1; mode=block", 'Set-Cookie':"GALX=m0d9oxyH-kQ;Path=/;Secure", 'X-Google-Cache-Control':"remote-fetch", Server:"GSE", Pragma:"no-cache", 'X-Content-Type-Options':"nosniff", 'X-Frame-Options':"Deny", 'X-Auto-Login':"realm=com.google&args=service%3Dlso%26continue%3Dhttps%253A%252F%252Faccounts.google.com%252Fo%252Foauth2%252Fauth%253Fresponse_type%253Dtoken%2526scope%253Dhttps%253A%252F%252Fwww.googleapis.com%252Fauth%252Fuserinfo.email%252Bhttps%253A%252F%252Fwww.googleapis.com%252Fauth%252Fuserinfo.profile%2526redirect_uri%253Dhttp%253A%252F%252F<mySite>.com%252Fgas%252Fhome%252Foauth2apis%2526approval_prompt%253Dforce%2526state%253D%252Fprofile%2526client_id%253D812741506391.apps.googleusercontent.com%2526hl%253Den-US%2526from_login%253D1%2526as%253D6991e98fb6d20df3", 'Strict-Transport-Security':"max-age=2592000; includeSubDomains", Date:"Sat, 16 Jun 2012 12:46:26 GMT", Via:"HTTP/1.1 GWA", 'Content-Type':"text/html; charset=UTF-8"}) 
```

mySite 已映射并在 dns 中。

看起来它正在尝试进行重定向（这对我来说很有意义，因为我对 OAuth 的理解有限）但返回码是 200 而重定向是 302？

我可以使用 urlFetchApp 获取访问令牌吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T05:36:05.183

您尝试检索的 URL 不应由您的应用程序检索 - 您需要将最终用户重定向到该 URL。然后，最终用户授予您的应用访问其数据的能力，然后 Google 会将用户重定向回您的应用。

由于我不相信 Google 提供了从 Google Apps 脚本运行客户端 JavaScript 的能力，因此您将需要使用网络服务器（授权代码）流程。这意味着当用户被重定向回您的应用程序时，该 URL 将包含一个授权代码。然后，您从 Apps 脚本向 OAuth 2.0 令牌端点发出服务器到服务器请求，以交换 OAuth 访问令牌的授权代码。

这是一些示例代码（没有适当的错误处理等。但它运行）：

```
function doGet(e) {
  var scriptUri = "https://docs.google.com/macros/s/AKfycbzg1LZIqKlKu5f7TtRL4VuleEjExXVCEqH15fI3/exec";
  var clientId = "764634415739.apps.googleusercontent.com";
  var clientSecret = "XXXXXXX-YYYYYYYYY";
  var scope = "https://www.googleapis.com/auth/plus.me";

  var app = UiApp.createApplication().setTitle("");
  var div = app.createVerticalPanel();

  if (e.parameter && e.parameter.code) {
    var redirectUri = scriptUri;
    var tokenEndpoint = "https://accounts.google.com/o/oauth2/token";

    var postPayload = {
      "code" : e.parameter.code,
      "client_id" : clientId,
      "client_secret" : clientSecret,
      "redirect_uri" : redirectUri,
      "grant_type" : "authorization_code"
    };

     var options = {
      "method" : "post",
      "payload" : postPayload
    };

    // do a URL fetch to POST the authorization code to google
    // and get an access token back
    var response = UrlFetchApp.fetch(tokenEndpoint, options);
    var tokenData  = Utilities.jsonParse(response.getContentText());

    // call the Google+ API and get response
    var plusOptions = {
      "headers" : {
        "Authorization" : "Bearer " + tokenData.access_token
      }
    };
    var plusResponse = UrlFetchApp.fetch(
      "https://www.googleapis.com/plus/v1/people/me", plusOptions);
    var plusData = Utilities.jsonParse(plusResponse.getContentText());

    div.add(app.createLabel(plusData.displayName));
    div.add(app.createLabel(plusData.url));

  } else {
    // ask user to go over to Google to grant access
    var redirectUri = scriptUri;
    var url1 = "https://accounts.google.com/o/oauth2/auth?client_id=" + clientId + 
        "%26response_type=code" +
        "%26scope=" + scope +
        "%26redirect_uri=" + redirectUri; 
    div.add(app.createAnchor('Grant data access at Google',url1));   
  }
  app.add(div);

  return app;
} 
```

这是实际代码： [https ://docs.google.com/macros/s/AKfycbzg1LZIqKlKu5f7TtRL4VuleEjExXVCEqH15fI3/exec](https://docs.google.com/macros/s/AKfycbzg1LZIqKlKu5f7TtRL4VuleEjExXVCEqH15fI3/exec)

# php - preg_match 点和斜线

> ID：11063753
> 
> 赞同：1
> 
> 时间：2012-06-16T13:17:47.213
> 
> 标签：php

我想添加一个正则表达式字符点`.`和这样的斜线`/`。

```
 'numericString' => array(
        'pattern' => '^[a-zćęłńóśźżA-Z0-9\s]+$',
    ) 
```

**我该怎么办？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T13:20:20.597

添加`\.`和`\/`

```
'numericString' => array(
    'pattern' => '^[a-zćęłńóśźżA-Z0-9\s\.\/]+$',
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:47:16.653

***注意***：您必须使用反斜杠 ('\') 转义字符 "^.[$()|*+?{\"，因为它们具有特殊含义。

使用下面的代码..

```
'numericString' => array(
'pattern' => '^[a-zćęłńóśźżA-Z0-9\s\.\/]+$',
 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:20:26.030

文字`.`在正则表达式中表示为`\.`

文字`/`表示为`\/`

注意：并非所有正则表达式风格都需要转义`/`，只有那些使用它来分隔正则表达式的风格。

# c# - 很好很简单的正则表达式我无法解决

> ID：11063755
> 
> 赞同：0
> 
> 时间：2012-06-16T13:18:36.390
> 
> 标签：c#, .net, regex

我正在尝试从我的 app.config 构建一个 QueryString 阅读器，我现在大部分时间都在工作我正在尝试将其他配置属性添加到值 EG 中

```
<add key="Database[TableNames[Tracks]]" value="tracks" />
<!-- others... -->
<add key="Database[Querys[selectTracks]]" value="SELECT * FROM `{@Database[TableNames[Tracks]]}` WHERE track_id = '{0}'"> 
```

从上面我有密钥`Database[TableNames[Tracks]]`集，现在我试图在值中使用它，`Database[Querys[selectTracks]]`但我无法弄清楚我需要使用它来匹配它的正则表达式它不能全部`{.*}`或`{[A-Za-z0-9]}`因为这将匹配字符串。格式`{0}`属性，我不希望它必须捕获，`\{@.[a-zA-Z0-9!\}]\}`但这是不正确的，有人能给我正确的方法来匹配我的模式吗？

我正在使用[http://www.regextester.com/](http://www.regextester.com/)来测试 RegEx 匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:28:29.060

我对您在这里要求的内容感到有些困惑。如果它只是一种匹配反引号内的值的方法，这对你有用吗？

```
\{@[a-zA-Z0-9\[\]]+\} 
```

这匹配文字 "{@" 后跟 1 个或多个以下字符 "a-zA-Z0-9[]" 并以文字 "}" 结尾

# ios - 发送到 dealloc UIViewController 的消息有错误：EXC_BREAKPOINT (code=EXC_I386_BPT)

> ID：11063756
> 
> 赞同：0
> 
> 时间：2012-06-16T13:18:38.800
> 
> 标签：ios, uiviewcontroller, dealloc

我有一个应用程序，它使用转换文件从一页翻到另一页。我正在使用 ARC 并且在 5.1 上工作得很好，但在 4.3 模拟器上一直崩溃。查看线程和仪器的扩展细节，它指向 2 行代码（如下所示），错误为：EXC_BREAKPOINT (code=EXC_I386_BPT)。看起来 UIViewController 正在被释放。不知道如何解决这个问题。提前感谢您提供的任何帮助！

```
@synthesize containerView = _containerView;
@synthesize viewController = _viewController;  //ERROR LINE#1

- (id)initWithViewController:(UIViewController *)viewController
{
    if (self = [super init]) 
    {
      _viewController = viewController;
    }
    return self;
}

- (void)loadView
{
    self.wantsFullScreenLayout = YES;
    UIView *view = [[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    view.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
    self.view = view;

    _containerView = [[UIView alloc] initWithFrame:view.bounds];
    _containerView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:_containerView];

    [_containerView addSubview:self.viewController.view];
}

- (void)transitionToViewController:(UIViewController *)aViewController
                   withOptions:(UIViewAnimationOptions)options
{    
    aViewController.view.frame = self.containerView.bounds;

    [UIView transitionWithView:self.containerView
                      duration:0.65f
                       options:options
                    animations:^{ [self.viewController.view removeFromSuperview];
                        [self.containerView addSubview:aViewController.view];}
                    completion:^(BOOL finished)
   //ERROR LINE#2                 { self.viewController = aViewController;}];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:51:33.767

您不应该在各自的视图控制器下将视图转换进出。你可能会让它工作，但它充其量是脆弱的。

如果你想让你的代码适应未来，你应该在视图控制器之间转换并让它们处理自己的视图，但如果你不喜欢默认动画，则将其包装在所需的动画中。因此，您应该：

1.  只需做简单的`presentViewController`or`pushViewController`去下一个控制器和`dismissViewController`or`popViewController`返回；或者

2.  在 iOS 5 中，您可以制作自己的容器视图控制器（参见[WWDC 2011 中的第 102 节](https://developer.apple.com/videos/wwdc/2011/?id=102)或参见[UIViewController 参考中关于视图控制器包含](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)的讨论），然后您就可以`transitionFromViewController`.

如果我们更多地了解您的应用程序流程以及您为什么要这样做，我们可能会为您提供进一步的建议。

# javascript - 总是（节点 js）并不总是工作

> ID：11063759
> 
> 赞同：0
> 
> 时间：2012-06-16T13:18:54.580
> 
> 标签：javascript, node.js

我得到了自己的 nodejs 的 always 模块。现在，当我使用“always server.js”运行我的服务器时，它会运行并重新启动，但是在重新启动大约 10 次之后它就不再重新启动它了。的进程总是存在，但服务器本身的进程由于没有重新启动而不再存在。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T00:55:16.127

我一直在使用 nodemon，在 ubuntu 上没有任何重大问题。其他一些用于监视/重新启动的替代方案包括：

新贵（ubuntu）：[http ://upstart.ubuntu.com/](http://upstart.ubuntu.com/)

监控：http : [//mmoni.com/monit/](http://mmonit.com/monit/)

守护进程：http: [//cr.yp.to/daemontools.html](http://cr.yp.to/daemontools.html)

[启动工具： http](http://people.debian.org/~enrico/launchtool.html) ://people.debian.org/~enrico/launchtool.html

希望这可以帮助。

# r - 比较一行中的值

> ID：11063760
> 
> 赞同：6
> 
> 时间：2012-06-16T13:18:54.843
> 
> 标签：r, dataframe

我正在尝试比较数据框行上的值，并删除所有匹配的值

```
dat[!dat[1]==dat[2]] 
```

在哪里

```
> dat 
```

返回

```
n1  n2
n1  n4
n4  n5
n1  n3
n4  n4 
```

所以我希望它比较值并删除最后一行，因为两列具有相同的数据。但是当我使用上面的代码时，它告诉我

```
Error in Ops.factor(left, right) : level sets of factors are different 
```

`str(dat)`读取_

```
'data.frame':   5 obs. of  2 variables:
$ V1: Factor w/ 2 levels "n1","n4": 1 1 2 1 2
$ V2: Factor w/ 4 levels "n2","n3","n4",..: 1 3 4 2 3 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T13:37:07.097

我怀疑在创建数据时，您无意中隐式地将列转换为因子。这可能发生在您从源读取数据时，例如使用`read.csv`or时`read.table`。这个例子说明了这一点：

```
dat <- read.table(text="
n1  n2
n1  n4
n4  n5
n1  n3
n4  n4")

str(dat)
'data.frame':   5 obs. of  2 variables:
 $ V1: Factor w/ 2 levels "n1","n4": 1 1 2 1 2
 $ V2: Factor w/ 4 levels "n2","n3","n4",..: 1 3 4 2 3 
```

补救方法是将参数传递`stringsAsFactors=FALSE`给`read.table()`：

```
dat <- read.table(text="
n1  n2
n1  n4
n4  n5
n1  n3
n4  n4", stringsAsFactors=FALSE)

str(dat)
'data.frame':   5 obs. of  2 variables:
 $ V1: chr  "n1" "n1" "n4" "n1" ...
 $ V2: chr  "n2" "n4" "n5" "n3" ... 
```

然后你的代码工作（除了我怀疑你错过了一个逗号）：

```
dat[!dat[1]==dat[2], ]
  V1 V2
1 n1 n2
2 n1 n4
3 n4 n5
4 n1 n3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:30:57.450

一种解决方案是指示数据框不要将字符向量转换为因子（使用`stringAsFactors=F`）：

```
x <- c('n1', 'n1', 'n4', 'n1', 'n4')
y <- c('n2', 'n4', 'n5', 'n3', 'n4')
df <- data.frame(x, y, stringsAsFactors=F)
df <- df[-which(df$x == df$y), ] 
```

创建数据框后，代码会删除匹配的行，从而产生您想要的结果。

# python - 使用 python 改变颜色的色调

> ID：11063764
> 
> 赞同：2
> 
> 时间：2012-06-16T13:19:01.560
> 
> 标签：python, colors, rgb, philips-hue

我正在寻找一种改变颜色色调的方法，知道它是 RGB 组合，然后用获得的 RGB 替换旧 RGB 的所有实例。例如，我想把红色变成紫色、浅红色、浅紫色等……这可以在 Photoshop 中通过改变颜色的色调来完成。

到目前为止我的想法如下：将 RGB 转换为 HLS，然后更改色调。

这是到目前为止的代码（在“列表”列表中定义了多种颜色，而不仅仅是一种颜色）：

（您可能会注意到，我只是一个初学者，代码本身很脏；更干净的部分可能来自其他 SO 用户）非常感谢！

```
import colorsys

from tempfile import mkstemp
from shutil import move
from os import remove, close

def replace(file, pattern, subst):
    #Create temp file
    fh, abs_path = mkstemp()
    new_file = open(abs_path,'w')
    old_file = open(file)
    for line in old_file:
        new_file.write(line.replace(pattern, subst))
    #close temp file
    new_file.close()
    close(fh)
    old_file.close()
    #Remove original file
    remove(file)
    #Move new file
    move(abs_path, file)

def decimal(var):
    return '{:g}'.format(float(var))

list=[[60,60,60],[15,104,150],[143,185,215],[231,231,231],[27,161,253],[43,43,43],[56,56,56],[255,255,255],[45,45,45],[5,8,10],[23,124,193],[47,81,105],[125,125,125],[0,0,0],[24,24,24],[0,109,166],[0,170,255],[127,127,127]]

for i in range(0,len(list)):
    r=list[i][0]/255
    g=list[i][1]/255
    b=list[i][2]/255
    h,l,s=colorsys.rgb_to_hls(r,g,b)
    print(decimal(r*255),decimal(g*255),decimal(b*255))
    h=300/360
    str1=str(decimal(r*255)) + "," + str(decimal(g*255)) + "," + str(decimal(b*255))
    r,g,b=colorsys.hls_to_rgb(h, l, s)
    print(decimal(r*255),decimal(g*255),decimal(b*255))
    str2=str(decimal(r*255)) + "," + str(decimal(g*255)) + "," + str(decimal(b*255))
    replace("Themes.xml",str1,str2) 
```

编辑：问题很简单：R、G、B 和 H 必须介于 0 和 1 之间，我将它们设置在 0 和 255 以及 0 和 360 之间。更新了代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:07:50.873

您的颜色序列使用整数，但`colorsys`使用介于 0.0 和 1.0 之间的浮点值。在输入之前将所有数字除以`255.`，然后乘以 255 并在取回它们后截断。

# python - 像谷歌这样的脚本在python中建议

> ID：11063771
> 
> 赞同：0
> 
> 时间：2012-06-16T13:19:55.150
> 
> 标签：python, ajax

我正在编写一个像谷歌建议一样工作的脚本。问题是我正在尝试为接下来的 2 个最有可能的单词提供建议。该示例使用 txt 文件 working_bee.txt。在写文本“mis”时，我应该得到诸如“Miss Mary, Miss Taylor, ...”之类的建议。我只得到“小姐，......”。我怀疑 Ajax responseText 方法只给出一个单词？有什么想法有什么问题吗？

`# Something that looks like Google suggest`

```
def count_words(xFile):
    frequency = {} 
    words=[]
    for l in open(xFile, "rt"):
        l = l.strip().lower()
        for r in [',', '.', "'", '"', "!", "?", ":", ";"]:
            l = l.replace(r, " ")
        words += l.split()
    for i in range(len(words)-1): 
        frequency[words[i]+" "+words[i+1]] = frequency.get(words[i]+" "+words[i+1], 0) + 1 
    return frequency

# read valid words from file 
ws = count_words("c:/mod_python/working_bee.txt").keys()

def index(req):
    req.content_type = "text/html"
    return '''
<script>
function complete(q) {
    var xhr, ws, e

    e = document.getElementById("suggestions")
    if (q.length == 0) {
        e.innerHTML = ''
        return
    }
    xhr = XMLHttpRequest()
    xhr.open('GET', 'suggest_from_file.py/complete?q=' + q, true)
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
            ws = eval(xhr.responseText)
            e.innerHTML = ""
            for (i = 0; i < ws.length; i++)
                e.innerHTML += ws[i] + "<br>"

        }
    }
    xhr.send(null)

}
</script>
<input type="text" onkeyup="complete(this.value)">
<div id="suggestions"></div>
'''

def complete(req, q):
    req.content_type = "text"
    return [w for w in ws if w.startswith(q)] 
```

txt文件：

```
IV. Miss Taylor's Working Bee

"So you must. Well, then, here goes!" Mr. Dyce swung her up to his shoulder and went, two steps at a time, in through the crowd of girls, so that he arrived there first when the door was opened. There in the hall stood Miss Mary Taylor, as pretty as a pink.

"I heard there was to be a bee here this afternoon, and I've brought Phronsie; that's my welcome," he announced.

"See, I've got a bag," announced Phronsie from her perch, and holding it forth.

So the bag was admired, and the girls trooped in, going up into Miss Mary's pretty room to take off their things. And presently the big library, with the music-room adjoining, was filled with the gay young people, and the bustle and chatter began at once.

"I should think you'd be driven wild by them all wanting you at the same minute." Mr. Dyce, having that desire at this identical time, naturally felt a bit impatient, as Miss Mary went about inspecting the work, helping to pick out a stitch here and to set a new one there, admiring everyone's special bit of prettiness, and tossing a smile and a gay word in every chance moment between.

"Oh, no," said Miss Mary, with a little laugh, "they're most of them my Sunday- school scholars, you know." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:52:31.277

查看您的代码，我相信您没有向 Apache 发送正确的内容。您正在向 apache 发送一个列表，而 apache 需要一个字符串。我建议将您的回报更改为 json：

```
import json
def complete(req, q):
    req.content_type = "text"
    return json.dumps([w for w in ws if w.startswith(q)]) 
```

# android - 如何播放声音一定次数？

> ID：11063777
> 
> 赞同：0
> 
> 时间：2012-06-16T13:20:55.123
> 
> 标签：android, loops, android-mediaplayer

我正在开发一个应用程序来执行以下操作：

当您按下按钮时，应用程序会播放持续两秒、五次的声音。第五次播放声音后，应用程序休眠 30 秒。睡觉后，这个循环再重复两次。

我的问题是第五次播放后我无法停止声音。我想我需要使用 for 循环或 while 循环，但我无法正确编程它们。

循环：

```
for(i=0; i==5; ) {
    sound.start(); 
    if(sound.isPlaying()) {
        if(false) { 
            sound.stop(); 
            i++; 
        } 
    }
}

sound.stop(); 
```

好吧，现在我构建了这段代码，但他唯一的错误是“for”不能正常工作……他没有重复他体内的代码两次。有人可以告诉我为什么吗？

```
 for( counter=0; counter<2; ++counter){

                new CountDownTimer(20000, 2000) {       
                    public void onTick(long millisUntilFinished) {
                    //call to my UI thread every 2 seconds  
                     sound.start();    
                   }

                   public void onFinish() {          
                   //final call to my UI thread after 10 seconds

                       chrono2.setBase(SystemClock.elapsedRealtime());
                       chrono2.start();

                       chrono2.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {

                           public void onChronometerTick(Chronometer chronometer) {
                               // TODO Auto-generated method stub
                               long elapsedTime = SystemClock.elapsedRealtime()-chronometer.getBase();
                               Log.i(this.getClass().getName(), "" + elapsedTime);

                               if (elapsedTime > 10000){
                                   chrono2.stop();
                                   chrono2.setBase(SystemClock.elapsedRealtime());
                                   Toast.makeText(getApplicationContext(), "" , Toast.LENGTH_SHORT).show();
                               }
                           }
                       });

                    } // end onFinish   
                }.start(); // end count down
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:11:37.710

```
for(i=0; i==5; ) {
    sound.start(); 
    if(sound.isPlaying()) {
        if(false) { 
            sound.stop(); 
            i++; 
        } 
    }
}    
sound.stop(); 
```

for 循环头的第二部分是一个条件，它必须保持才能进入正文。`i=0`并且`i == 5`不匹配，所以条件从一开始就是错误的并且从未进入。

你想表达

```
 for(i=0; i!=5; ) { 
```

或者

```
 for(i=0; i<5; ) { 
```

反而。

但是在哪里`i`增加或以其他方式改变了？在一个总是错误的块中，换句话说：从不。

也许你想表达，如果前面的陈述是错误的，那么......

您可以通过否定声明来做到这一点：

```
 if (! sound.isPlaying ()) { 
            sound.stop(); 
            i++; 
    } 
```

在不知道声音播放是否阻塞的情况下，很难知道如何控制它。

让我们阅读需求并从头开​​始：

> 当您按下按钮时，应用程序会播放持续两秒、五次的声音。第五次播放声音后，应用程序休眠 30 秒。睡觉后，这个循环再重复两次。

您有 3 次的外循环和 5 次的内循环。

```
for (int i=0; i < 3; ++i) {
    for (int j=0; j < 5; ++j) {
        sound.start(); 
        sleep (2); // seconds of sound
    } 
    sleep (30); // seconds of silence
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:48:04.280

这很容易，您只需要使用倒数计时器：

```
new CountDownTimer(10000, 2000) {       
    public void onTick(long millisUntilFinished) {          
    //call to my UI thread every 2 seconds  
     playSound();    
   }       
   public void onFinish() {          
   //final call to my UI thread after 10 seconds     
    }   
}.start(); 
```

并使用一个简单的定时器来休眠 30 秒：

```
new Handler().postDelayed(new Runnable() {         
  @Override         
  public void run() {             
   //do after 30 seconds              
  }     
 }, 30000); 
```

通过调整和结合这两者，你可以使你的效果......

编辑：一个解决方案（未经测试）

```
int repeatAlarm = 3; //above onCreate
....

playSoundFiveTimes(); //in onCreate

.......

private void playSoundFiveTimes(){

 new CountDownTimer(10000, 2000) {       
    public void onTick(long millisUntilFinished) {          
     sound.stop();
     sound.start();        
    }       
   public void onFinish() {          
      repeatAlarm--;
      if(repeatAlarm > 0) wait30seconds(); 
    }   
 }.start();
}

 private void wait30seconds(){

  new Handler().postDelayed(new Runnable() {         
      @Override         
      public void run() {             
       playSoundFiveTimes();            
      }     
     }, 30000);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:31:27.677

只需在您的 while 循环中保留一个计数器变量，该变量将告诉应用程序在达到 5 时进入睡眠状态。伪代码是这样的：

```
final int REPEAT_RATE = 5;
int counter = 0;
while(counter < 3 * REPEAT_RATE)
{
    if(counter == REPEAT_RATE) 
    {
        //Sleep for thirty seconds
    }
    //Here Play the sound for 2 seconds
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T11:14:23.377

这是我的解决方案：
您可以使用 seekTo(0) 函数然后 mp 重新开始！

```
private void startCountDownTimer() {
    cdTimer = new CountDownTimer(total, 1000) {
        public void onTick(long l) {

            mp.seekTo(0);
            mp.start();
}

        public void onFinish() {
            mp.stop();
            MediaPlayer doneMp = MediaPlayer.create(getApplicationContext(), R.raw.finished_challenge);
            doneMp.start();

        }
    }.start();
} 
```

# netty - Java中的HTTP over UDP实现

> ID：11063781
> 
> 赞同：0
> 
> 时间：2012-06-16T13:21:14.350
> 
> 标签：netty, apache-camel

你有过使用 Netty 或类似框架的 HTTP over UDP 的经验吗？（米娜，骆驼）？我们得到的结果好坏参半，并且有兴趣了解您在 UDP 上运行正式协议的经验。

编辑：任何传输控制+数据并在 UDP 上运行的 C/S 协议都会很有趣：SMTP、HTTP、FTP ......我们有兴趣了解成功实现/使用此类协议与 UDP 的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T14:45:27.873

**===== 更新 =====**

我对此了解不多，但 SCTP 提供了一些与 TCP 相同的流控制，并且可以通过 UDP 进行隧道传输。我提到它是因为我相信 netty 4 支持 SCTP 传输，所以这可能是你的一个选择。

* * *

HTTP 假定一个可靠的传输协议，因此尽管您可以通过 UDP 使用它，但您只能靠自己。来自[维基百科](http://en.wikipedia.org/wiki/Http)：

> HTTP 是在 Internet 协议套件框架内设计的应用层协议。它的定义假定了一个底层和可靠的传输层协议，[2] 并且传输控制协议（TCP）为此目的占主导地位。然而，HTTP 可以使用不可靠的协议，例如用户数据报协议 (UDP)，例如简单服务发现协议 (SSDP)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T08:11:28.397

使用 node-httpp 在 UDP 上运行 HTTP，尝试一下：

[https://github.com/InstantWebP2P/node-httpp](https://github.com/InstantWebP2P/node-httpp)

# iphone - Cocos2d for iPhone CCSpriteFrameCache 占用大量内存

> ID：11063785
> 
> 赞同：-1
> 
> 时间：2012-06-16T13:21:37.223
> 
> 标签：iphone, ios, memory-management, cocos2d-iphone

我正在使用“活动监视器”来测量我的应用程序的性能，并注意到我使用来自 CCSpriteFrameCache 的精灵帧分配的精灵数量确实会影响应用程序的实际内存使用情况。

例如，如果我只加载具有 2048*2048 像素纹理表的 CCSpriteFrameCache，则应用程序的实际内存使用量增加了 16MB。每当我分配甚至 30 个敌人精灵时，将 textureatlas.png 文件添加到 CCSpriteBatchNode 并使用帧分配 CCSprites，实际内存只会增加非常小的（小于 1MB）。**我不安静地明白这一点。**

我想知道**CCSpriteFrameCache 是如何工作**的，以及**是否应该使用精灵文件而不是纹理图集来优化实际内存使用**。为什么以及如何使用纹理图集和 CCSpriteFrameCache 优化 OpenGL 性能？有没有人找到解释这个主题的好文章？

此外，在编程指南中有一些建议使用 PVR 格式来优化 2 位和 4 位纹理的内存使用（请参阅[链接](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3abest_practices)）。我有插画家制作的顶级艺术品，如果我尝试压缩它看起来很垃圾。什么时候可以考虑使用**PVR 图像格式**？这有什么好的例子吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:41:27.457

CCSprite 实例只是具有一组参数的对象。这些参数之一是指向要使用的纹理的指针。因此，纹理只需要在内存中放置一次。然后任何数量的精灵都可以使用它而不会占用大量内存。

# android - 我可以在 Android NDK 中使用 ifstream 来访问资产吗？

> ID：11063786
> 
> 赞同：10
> 
> 时间：2012-06-16T13:21:46.620
> 
> 标签：android, resources, assets, ifstream, android-ndk

我的问题很简单，但我很难在网上找到有关此的任何信息。

是否可以使用 ifstream 从使用 Android NDK 的资产和/或资源中打开文件？

例如，将 test.txt 文件放在 /assets 中并尝试以下操作不起作用：

```
 char pLine[256];
    std::ifstream fin("/assets/test.txt");
    if(!fin.fail())
    {
        LOGD( "test.txt opened" );
        while( !fin.eof() )
        {
            fin.getline( pLine, 256 );
            LOGD(pLine);
        }
    }
    else
    {
        LOGD( "test.txt FAILED TO OPEN!" );
    }
    fin.close(); 
```

也没有任何变量：

```
 std::ifstream fin("assets/test.txt");

    std::ifstream fin("test.txt"); 
```

等等......，也没有把它放在 /res 中。

那么，是否可以使用普通的 ifstream 运算符来访问资产和/或资源文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-07-14T17:29:35.437

不能使用 std::ifstream 是正确的，但是可以创建一个可以以类似方式使用的资产流。例如：

```
class asset_streambuf: public std::streambuf
{
public:
    asset_streambuf(AAssetManager* manager, const std::string& filename)
    : manager(manager)
    {
        asset = AAssetManager_open(manager, filename.c_str(), AASSET_MODE_STREAMING);
        buffer.resize(1024);

        setg(0, 0, 0);
        setp(&buffer.front(), &buffer.front() + buffer.size());
    }

    virtual ~asset_streambuf()
    {
        sync();
        AAsset_close(asset);
    }

    std::streambuf::int_type underflow() override
    {
        auto bufferPtr = &buffer.front();
        auto counter = AAsset_read(asset, bufferPtr, buffer.size());

        if(counter == 0)
            return traits_type::eof();
        if(counter < 0) //error, what to do now?
            return traits_type::eof();

        setg(bufferPtr, bufferPtr, bufferPtr + counter);

        return traits_type::to_int_type(*gptr());
    }

    std::streambuf::int_type overflow(std::streambuf::int_type value) override
    {
        return traits_type::eof();
    };

    int sync() override
    {
        std::streambuf::int_type result = overflow(traits_type::eof());

        return traits_type::eq_int_type(result, traits_type::eof()) ? -1 : 0;
    }

private:
    AAssetManager* manager;
    AAsset* asset;
    std::vector<char> buffer;
};

class assetistream: public std::istream
{
public:
    assetistream(AAssetManager* manager, const std::string& file)
    : std::istream(new asset_streambuf(manager, file))
    {
    }
    assetistream(const std::string& file)
    : std::istream(new asset_streambuf(manager, file))
    {
    }

    virtual ~assetistream()
    {
        delete rdbuf();
    }

    static void setAssetManager(AAssetManager* m)
    {
        manager = m;
    }

private:
    static AAssetManager* manager;
};

void foo(AAssetManager* manager)
{
    assetistream::setAssetManager(manager);

    assetistream as("text/tmp.txt");
    std::string s;

    std::getline(as, s);
} 
```

非常欢迎改进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T14:28:12.800

你不能。资产存储在 apk 中，一个 zip 文件。ifstream 无法在 zip 文件中读取。

要访问这些文件，您要么需要在 java 中访问它们并将它们保存在其他地方，要么提取 apk 的内容以获取资产。

这是执行前者的示例。

[http://www.itwizard.ro/android-phone-installing-assets-how-to-60.html](http://www.itwizard.ro/android-phone-installing-assets-how-to-60.html)

这是执行后者的示例。

[http://www.anddev.org/ndk_opengl__-_loading_resources_and_assets_from_native_code-t11978.html](http://www.anddev.org/ndk_opengl_-_loading_resources_and_assets_from_native_code-t11978.html)

# titanium - 文件上传Http客户端问题Titanium

> ID：11063788
> 
> 赞同：1
> 
> 时间：2012-06-16T13:22:12.687
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我正在尝试将 .mp4 文件上传到某个服务器。我使用的是钛提供的HTTP客户端。当我上传文件时，HTTP 客户端在文件中添加了一些标头，因此文件已损坏且无法播放。当我下载上传的文件并在记事本中打开它时，我可以看到添加到文件中的标题。我应该怎么做才能不将这些标头添加到文件中？非常感谢！

```
 // CODE
var uploadFile = Titanium.Filesystem.getFile(dir, _previewUrl);
var fileUploadUrl = 'Some Url for the server to upload';
var headers = { 'Content-Type' : 'multipart/form-data' };
var content = { 'file' : uploadFile };
var xhr = Titanium.Network.createHTTPClient();
for(var key in _headers) {
        xhr.setRequestHeader(key, _headers[key]);
    }
xhr.onerror = function(e)
{
Ti.UI.createAlertDialog({title:'Error', message:e.error}).show();
Ti.API.info('IN ERROR ' + e.error);
};
xhr.setTimeout(20000);
xhr.onload = function(e)
{
Ti.UI.createAlertDialog({title:'Success', message:'status code ' + this.status}).show();
Ti.API.info('IN ONLOAD ' + this.status + ' readyState ' + this.readyState);
};
xhr.onsendstream = function(e)
{
ind.value = e.progress ;
Ti.API.info('ONSENDSTREAM - PROGRESS: ' + e.progress);
};
// open the client
xhr.open('POST',fileUploadUrl);
// send the data
xhr.send(content);
// END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:41:40.173

打电话后尝试设置标题`xhr.open`

```
// open the client
xhr.open('POST',fileUploadUrl);

for(var key in _headers) {
    xhr.setRequestHeader(key, _headers[key]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T11:23:35.490

尝试不发送原始 blob 本身。改为发送 base64 编码字符串。

```
var uploadFile = Titanium.Filesystem.getFile(dir, _previewUrl);     
var base64File = Ti.Utils.base64encode(uploadFile.read()).toString(); 
```

并尝试将标题更改为

```
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
xhr.send(base64File); 
```

这将解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T12:03:52.370

不要添加 { 'Content-Type' : 'multipart/form-data' }; 标题。这样，您应该正确获取文件，而无需任何标题，例如边界和文件名等。我可以成功发送图像，3gpp 文件但是，当我发送视频文件时，我的服务器 PHP 代码 $_FILES 将是空数组。甚至 $_FILES["files"]["error"] 也没有价值。应该有一些其他的技巧来发送视频文件。（钛 SDK 3.1.1 和安卓 4.1.2）

```
xhr.open("POST", URL);
xhr.send({
   files : Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, sourcefilename)
});
} 
```

# android - Android 窗体小部件大小

> ID：11063789
> 
> 赞同：0
> 
> 时间：2012-06-16T13:22:21.377
> 
> 标签：android, themes, widget

在设计我的表单时，如何考虑表单小部件，例如 Editbox、复选框在不同的 android 主题中的大小不同？

我正在使用正确的相对布局，但是当我在表格布局中有几个小部件并更改主题时，有些会掉到底部！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:37:56.923

好吧，对于“从底部掉线”，您需要做的就是添加一个 ScrollView。如果您不知道如何使用它，可以在[此处](http://developer.android.com/reference/android/widget/ScrollView.html)查找。

如果您的目标是根据手机*更改*小部件的大小，您需要做的就是为每个 ldpi、mdpi、hdpi、xhdpi 的活动提供不同的布局文件。与这些规格。[在此处](http://developer.android.com/guide/practices/screens_support.html)查找“为不同的屏幕尺寸提供不同的布局”

# ruby-on-rails - Cancan, RSpec + Stubbing without params

> ID：11063791
> 
> 赞同：1
> 
> 时间：2012-06-16T13:22:24.800
> 
> 标签：ruby-on-rails, rspec, cancan, stub

当我测试我的控制器时，我有这种代码：

```
describe "GET 'show'" do
  let!(:comment) { build_stubbed(:comment) }
  before(:each) { Project.stubs(:find).returns(project) } 

  it "render show template" do
    get 'show', id: project.id
    should render_template('show')
  end

  it "create a new comment" do
    Comment.expects(:new).returns(comment)
    get 'show', id: project.id
  end
end 
```

我的问题如下：我必须传递一个 ID 才能使用方法 load_and_authorize_resource à cause de la ligne 139 dans ce 代码： [https](https://github.com/ryanb/cancan/blob/2.0/lib/cancan/controller_resource.rb) ://github.com/ryanb/cancan/blob/2.0/lib/cancan/controller_resource.rb检查参数中是否有 ID。

如何解决？

谢谢！

编辑：换句话说：变量@project 没有被方法load_and_authorize_resource 删除，因为没有ID，并且可以检查是否有ID 来查找模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:30:26.977

我不太确定我是否理解您的要求，但您可以执行以下操作：

`before(:each) { Project.stubs(:find).with(anything).returns(project)`

`Project.find`无论该参数是什么，都要取消对它的任何调用都需要一个参数。这有帮助吗？

# c - 读取 AudioFileInitializeWithCallbacks 所需的回调？苹果音频文件 API

> ID：11063795
> 
> 赞同：2
> 
> 时间：2012-06-16T13:23:28.633
> 
> 标签：c, core-audio, extaudiofile

我正在尝试使用 AudioFile 和 ExtAudioFile API 编写一个低级音频编写器。我正在使用 AudioFileInitializeWithCallbacks 创建一个新的音频文件，但似乎这需要实现读取和获取大小回调。为什么这不能只接受一个写入回调并相信数据已成功写入。

如果我正在写入一个我无法找到的流（例如 CD 或网络套接字）怎么办？

当然，这应该只是不断地将数据推送到写入回调，如果操作不成功，我有责任在需要返回错误代码的地方写入这些数据。

AudioFile_SetSizeProc 和 AudioFile_WriteProc 的文档似乎不正确，因为它们都谈到了读取操作“inPosition 要读取的数据的偏移量。”、“@result 回调应该返回数据的大小。”。

目前我已经通过只写入文件来解决这个问题，但是在第一次写入过程之后我得到了一个 kExtAudioFileError_InvalidOperationOrder 。这是什么意思？文档中没有关于它的评论。

任何指示或帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:02:42.130

Apple 文档在这里是错误的。检查头文件 AudioFile.h：

```
/*!
@typedef    AudioFile_SetSizeProc
@abstract   A callback for setting the size of the file data. used with AudioFileOpenWithCallbacks or AudioFileInitializeWithCallbacks.
@discussion a function that will be called when AudioFile needs to set the size of the file data. This size is for all of the 
            data in the file, not just the audio data. This will only be called if the file is written to.
@param      inClientData    A pointer to the client data as set in the inClientData parameter to AudioFileXXXWithCallbacks.
@result                     The callback should return the size of the data.
*/

typedef OSStatus (*AudioFile_SetSizeProc)(
                            void *      inClientData,
                            SInt64      inSize); 
```

# javascript - 是否可以在 GWT 或任何其他 JavaScript 框架中选择垃圾收集算法

> ID：11063796
> 
> 赞同：1
> 
> 时间：2012-06-16T13:23:34.810
> 
> 标签：javascript, gwt, browser, garbage-collection

我想知道是否可以在 javascript 或任何 JS 框架中通过代码或其他方式（如为 JVM 指定 GC 算法）选择 GC 算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:34:53.200

没有办法用 GWT 设置 GC 算法。GWT 编译为 Javascript。因此，在运行时，客户端上只有 Javascript。浏览器内的 Javascript 应用程序无法设置 Javascript VM 管理内存的方式。

# android - 如何使用两列ScrollView？

> ID：11063799
> 
> 赞同：0
> 
> 时间：2012-06-16T13:24:03.720
> 
> 标签：android, android-layout, android-scrollview

我想要一个 2-column `ScrollView`。在每一列中，应该有一个`ImageButton`：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView1"
android:layout_height="800dp"
android:background="#FFF"
android:layout_width="600dp" >

<LinearLayout
    android:id="@+id/categoryLinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</LinearLayout>

</ScrollView> 
```

和代码：

```
 LinearLayout sv = (LinearLayout) findViewById(R.id.categoryLinearLayout1);

    for (int i = 0; i < 10; i++) {
        ImageButton ib = new ImageButton(this);
        // ib.setImageDrawable(getResources().getDrawable(R.drawable.cat1));

        Bitmap bmp = BitmapFactory.decodeResource(getResources(),
                R.drawable.cat1);
        int width = 300;
        int height = 300;
        Bitmap resizedbitmap = Bitmap.createScaledBitmap(bmp, width,
                height, true);
        ib.setImageBitmap(resizedbitmap);
        sv.addView(ib);
    } 
```

但是这样一来，10个都是`ImageButtons`横向的。我需要的是，将 2`ImageButton`排成一行（它使 600 像素）然后往下，放更多 2`ImageButtons`等等。所以 10 将有 5 行`ImageButtons`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:39:06.000

使用`TableLayout`：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scrollView1"
android:layout_height="800dp"
android:background="#FFF"
android:layout_width="600dp" >

<TableLayout
    android:id="@+id/categoryLinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</TableLayout>

</ScrollView> 
```

然后在您的代码中：

```
TableLayout sv = (TableLayout) findViewById(R.id.categoryLinearLayout1);

for (int i = 0; i < 5; i++) {
    TableRow tr = new TableRow(this);
    tr.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));
    for (int j = 0; j < 2; j++) {
         ImageButton ib = new ImageButton(this);
         // ib.setImageDrawable(getResources().getDrawable(R.drawable.cat1));
         Bitmap bmp = BitmapFactory.decodeResource(getResources(),
              R.drawable.cat1);
         int width = 300;
         int height = 300;
         Bitmap resizedbitmap = Bitmap.createScaledBitmap(bmp, width,
            height, true);
         ib.setImageBitmap(resizedbitmap);
         ib.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT));
         tr.addView(ib);
     }
     sv.add(tr); 
} 
```

# javascript - 确定 GIF 动画状态？

> ID：11063800
> 
> 赞同：3
> 
> 时间：2012-06-16T13:24:14.863
> 
> 标签：javascript, animated-gif

有什么方法可以通过 javascript 检测 GIF 图像的动画是否完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:26:13.710

不它不是。Javascript 不能直接操作 GIF。但也许[jsgif](http://slbkbs.org/jsgif/)可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-07T22:32:28.280

现在是可能的。有一些包可用于从字节缓冲区中提取信息。喜欢[`gif-info`](https://www.npmjs.com/package/gif-info)。

结合[`HTMLImage.onload`](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/Attribute/image.onload)它可以在动画应该已经结束时完全延迟开始超时。

或者具有持续时间值，我们可以在目标图像上设置 CSS 动画，以更稳定的方式工作。

但是，尽管在技术上是可行的，但它仍然看起来有点矫枉过正。

# android - 2G/3G智能手机实时通讯

> ID：11063802
> 
> 赞同：0
> 
> 时间：2012-06-16T13:24:23.600
> 
> 标签：android, ios, websocket, real-time

我正在尝试创建一个简单的绘图游戏，例如 DrawSomething。这里的问题不是游戏本身，而是沟通。如何将坐标分发给其他智能手机（android + iOS）客户端？

2G/3G：-一般不支持点对点连接。-UDP 数据包被阻止 -分段连接，即。客户端一直在移动并切换蜂窝站，使得客户端与服务器或客户端与客户端之间无法保持单一连接。

显然我们可以定期使用 POLLING。需要中央服务器，但轮询对于实时通信来说效率低下。为了有点类似于实时性，您必须每 100 毫秒轮询一次，如果有 100 个客户端，这可能会使服务器过载。

那么问题来了，我们如何在移动网络上为智能手机进行实时通信呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:34:40.023

那么您想要做的是将所有信息存储在服务器上，根本不进行任何 Peer2Peer 通信。当信息保存在服务器上时（回合完成）让服务器向其他玩家发送一条 c2dm 消息，通知他们新的回合。如果 C2DM 还不够，您可以使用 C2DM 所基于的 XMPP 实现自己的 p2p 网络，但我不建议这样做，C2DM 应该是您所需要的。

# php - 管理框架的错误

> ID：11063804
> 
> 赞同：0
> 
> 时间：2012-06-16T13:24:57.320
> 
> 标签：php, exception-handling, error-handling

我正在尝试开发一个用于学习目的的个人 MVC 框架。但每次我都陷入这个问题：错误。

我觉得我对他们的处理很糟糕。目前我有一个异常系统（一切都转换为异常，甚至是 PHP 触发的错误），它在包含框架和用户应用程序的每一行代码的 try{} 块中捕获。

我正在处理诸如“找不到控制器”或“未找到操作”之类的错误，例如“无法连接到数据库”。但我觉得后者在某种程度上更像是一个“异常”，而不是一个非常常见的“找不到控制器（404）”。

此外，目前我正在使用一个错误处理，它几乎复制了 MVC 在我的框架中的工作方式，因为当发生错误时，我会加载特定的操作并为每种类型的错误加载特定的视图文件。我没有使用我的框架的 MVC（通过 MVC，我的意思是加载控制器、运行操作、加载用户应用程序的模型和视图的所有机制），因为 MVC 中的错误可能会导致错误被触发，它将尝试使用 MVC 来管理它，这将再次触发相同的错误，然后再次加载 MVC，依此类推。

我应该如何处理我的框架的每一个错误？现在最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:34:00.953

控制器恕我直言的执行可能会产生两个异常：

*   未找到：缺少控制器或方法时
*   权限被拒绝：当[ACL](https://stackoverflow.com/a/9685039/727208)阻止访问时

为了处理这个问题，我会使用类似下面的代码。你可以使用多个 catch 块。

```
try
{
    $controller->$command($request, $response);
}
catch(AccessDeniedException $e)
{
    $controller = new ErrorController;
    $controller->accessDenied($request, $response);
}
catch(NotFoundException $e)
{
    $controller = new ErrorController;
    $controller->notFound($request, $response);
} 
```

你也可以让*模型层*`AccessDeniedException`冒泡，但通常**这是一个不好的做法**。异常应该是同一抽象级别的句柄，它被抛出的地方，或者，在严重异常的情况下（当对象本身无法处理它时），异常可能会穿透一个抽象边界。异常不应该离开[*模型层*](https://stackoverflow.com/a/5864000/727208)，而是应该在层中创建错误状态，并在您当前的*视图*实例中进行处理。***[](https://stackoverflow.com/a/5864000/727208)***

 *****重点是：您应该在错误发生的地方附近处理错误，而不是所有错误的*神奇处理程序。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:33:05.250

您可以在 try catch 处执行更合适的消息之类的操作。例如：

```
try
{
    //Your code here
}
catch (Exception $e)
{
    // Clean the output buffer if one exists
    ob_get_level() and ob_clean();

    // Display the exception text
    echo sprintf('%s [ %s ]: %s ~ %s [ %d ]', get_class($e), $e->getCode(), strip_tags($e->getMessage()), $e->getFile(), $e->getLine())."\n";

    // Exit with an error status
    exit(1);
} 
```*****

# java - FileOutputStream 中的新行

> ID：11063805
> 
> 赞同：2
> 
> 时间：2012-06-16T13:24:57.633
> 
> 标签：java, outputstream, fileoutputstream

下一行的 Ascii 值为 10。所以我尝试了这个...

```
 FileOutputStream os = new  FileOutputStream(f, true);
    os.write(10);  // this should get me to next line ?
    os.write(b);   // b is a byte array... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T13:32:16.903

您应该注意管理跨平台行分隔符，这可以通过多种方式检索：

*   `System.getProperty("line.separator")`
*   `System.lineSeparator()`（仅限 Java7）
*   `String.format("%n")`

然后你应该注意使用`DataOutputStream`包裹在你的周围`FileOutputStream`，这是因为你将被允许选择许多更好的方法，比如

*   `writeChars(String str)`
*   `writeBytes(String str)`
*   `writeUTF(String str)`

以便您使用最适合您的情况。

另请注意，直接在流上写入字节数组会创建二进制数据，这与使用换行符（而是文本）有些相反。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T14:30:38.893

在 Windows 上，您需要使用 13 和 10 作为行分隔符（CR、LF） - 即：

```
os.write(13);
os.write(10); 
```

因此，如果您希望您的应用程序独立于平台，您应该按照 Jack 的建议使用 line.separator 系统属性中的任何内容。

# graph - 使用自定义节点和边保存荣格图

> ID：11063810
> 
> 赞同：2
> 
> 时间：2012-06-16T13:25:33.710
> 
> 标签：graph, save, jung

如何保存具有自定义节点和边的 JUNG 图？问题是，到目前为止，我们已经能够保存具有原始类型（如整数、字符串等）的字段的 JUNG 图。但是我们正在使用的 JUNG 图自定义节点和边涉及使用 ArrayList 等数据类型以及内部一些更复杂的数据结构边缘和/或节点。我在网上搜索了很多，但遇到了如何仅使用 int 或 string 或 double 来保存简单的自定义节点/边缘。

此外，我的目标不是保存像 jpeg 等图像文件。重点是将其保存为在需要执行某些操作时可以轻松再次加载为 JUNG 格式的格式。

如何保存这样的图表？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T02:12:28.853

这是两个链接，它们以您描述的方式解决了保存荣格图的问题。要点是您需要使用 GraphML 进行保存以保存节点的数据。

此链接正在使用 GraphML 编写器保存。 [http://halfclosed.wordpress.com/2010/12/04/graphml-with-jung-saving/](http://halfclosed.wordpress.com/2010/12/04/graphml-with-jung-saving/)

这个链接是关于从 GraphML 文件加载的。 [http://halfclosed.wordpress.com/2010/12/04/graphml-with-jung-loading-from-graphml/](http://halfclosed.wordpress.com/2010/12/04/graphml-with-jung-loading-from-graphml/)

GraphML 是一种用于保存图形的文件格式，因为它存储数据。值得注意的是，它并不一定会保存布局。不幸的是，以 GraphML 格式保存数据并不是一件容易的事，但可以做到。

# .htaccess - 301 使用 .htaccess

> ID：11063817
> 
> 赞同：0
> 
> 时间：2012-06-16T13:26:31.753
> 
> 标签：.htaccess, mod-rewrite, http-status-code-301

使用 301 设置我的 .htaccess 文件。除以下内容外，大多数重定向都可以正常工作...

```
RewriteRule bluewidget /blue-widget/ [R=301,L]
RewriteRule bluewidget/folder2 /blue-widget/folder2/page2 [R=301,L]
RewriteRule bluewidget/folder3 /blue-widget/folder3/page3 [R=301,L] 
```

如果我转到 ww.mysite.com/bluewidget - 重定向到 ww.mysite.com/blue-widget（这是正确的）

但 ...

如果我转到`ww.mysite.com/bluewidget/folder2`- 这会重定向到`ww.mysite.com/blue-widget`（应该转到`ww.mysite.com/blue-widget/folder2/page2`）或 `ww.mysite.com/bluewidget/folder3`- 这会重定向到`ww.mysite.com/blue-widget`（应该转到`ww.mysite.com/blue-widget/folder3/page3`）

我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:51:51.770

```
RewriteRule ^bluewidget$          blue-widget/ [R=301,L]
RewriteRule ^bluewidget/folder2$  blue-widget/folder2/page2 [R=301,L]
RewriteRule ^bluewidget/folder3$  blue-widget/folder3/page3 [R=301,L] 
```

# ios - 如何在测试期间重置 iOS 设备以清除旧的应用程序版本？

> ID：11063820
> 
> 赞同：0
> 
> 时间：2012-06-15T21:45:57.563
> 
> 标签：ios

我正在使用 XCode 在 iPod 上开发应用程序并进行测试。我刚刚摆脱了默认图标和启动画面，并用自定义文件替换了它们，但是当我构建和运行时，我仍然看到旧的。如何完全清除设备上的旧版本应用程序？肯定在某个地方有某种重置。我在“重置”下查看了 iPhone 的常规设置，但没有看到一个似乎相关的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:31:15.203

查看管理器，当设备连接到 Xcode 并设置为开发人员模式时，您可以从那里恢复/擦除设备。

# c++ - istream 在 while-switch 循环中崩溃

> ID：11063823
> 
> 赞同：1
> 
> 时间：2012-06-16T13:27:18.060
> 
> 标签：c++, istream

我在while循环中有一个开关。在我三次调用选项 4 之后，程序在下次我输入决定在 switch 中进入哪种情况的 int 时崩溃。我不知道为什么会这样。这是while循环的代码：

```
void Menu::start()
{
    Store st;
    int op=1,num,quantity;
    string name;
    while(op!=0)
    {
        cin>>op;
        try
        {
            switch(op)
            {
                    case 1:
            {
                cin>>num>>name;
                st.addProduct(num,name);
                break;
            }
            case 4:
                {
                    cin>>num>>quantity;
                    st.sellProduct(num,quantity);
                    break;
                }
            case 0:
                break;
            default:
                throw(exception("Unknown option, try again.\n"));
            } //end of switch
        } //end of try
//catches
    } //end of while
}

/*****************************************************************************
* function name: addProduct
* The Input: This Store, const& int num, const& string name
* The output: If product with given num doesn't exist in store, adds it to
* store.
* The Function operation: uses the products map.
*****************************************************************************/
void Store::addProduct( const int& num,const string& name )
{
    //if product doesn't exist in map, add it
    if(prods.find(num)==prods.end())
        prods.insert(pair<int,Product>(num,Product(num,name)));
    //otherwise issue an error
    else
        throw(AddProdException(num));
}

/*****************************************************************************
* function name: sellProduct
* The Input: This Store, const int& prodNum, const unsigned int& quantityBought
* The output: If product doesn't exist or quantityBought is more than 10 units
* more than quantity in stock, issues an error. Otherwise, sells the product
* and if needed, issues a shipment such that after the purchase the store will
* be left with 20 units.
* The Function operation: uses the products and orders map.
*****************************************************************************/
void Store::sellProduct( const int& prodNum, const unsigned int& quantityBought )
{
    if(prods.find(prodNum)!=prods.end())
    {
        Product& pr = prods.find(prodNum)->second;
        const int& signedQB=quantityBought, signedPQ=pr.getQuantity();
        if( signedPQ<signedQB-10 )
            //store can't supply product
            throw(BuyQuanException(prodNum,quantityBought));
        //make purchase
        else
        {
            //purchase only what left in stock
            if(signedPQ<signedQB )
            {
                //issue shipment
                Order order=Order(prodNum,20+quantityBought-pr.getQuantity());
                orders.insert(pair<int,Order>(order.getID(),order));
                //document order
                purchaseDocs.add(new Documentation(pr,quantityBought,
                    orders.find(order.getID())->second));
                //buy product
                pr.decreaseQuantity( pr.getQuantity() );
            }
            //purchase requested amount
            else
            {
                //buy product
                pr.decreaseQuantity( quantityBought );
                //document order
                purchaseDocs.add(new Documentation(pr,quantityBought));
            }
        } //else regarding making the purchase

    } //if regarding found the product
    //otherwise issue an error
    else
        throw(BuyProdException(prodNum));
} 
```

在三个进入案例 4 之后（并且仅在案例 4 中，仅在 3 次之后），它在下次到达 istream 文件中的 cin>>op 时崩溃。崩溃是指弹出以下错误消息：“Ex6.exe 中 0x4a34870c 处的未处理异常：0xC0000005：访问冲突。” 欢迎帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:34:25.237

这个：

```
const char* errStr=e.what();
cout<<errStr;
//errStr is a dynamically allocated string we don't need anymore <-----------
delete[] errStr; 
```

是一个不好的假设。`const char*`返回的不是`std::exception::what`动态分配的，它只是一个指向异常内部分配的字符串的指针。您**不得**删除该指针。您的代码中可能还有其他一些错误，但您应该修复它。

# algorithm - Kinect SDK 用于计算关节方向的算法

> ID：11063824
> 
> 赞同：2
> 
> 时间：2012-06-16T13:27:30.863
> 
> 标签：algorithm, kinect

我想知道是否有人知道新发布的 Kinect SDK 中使用什么算法来提供关节方向。

我认为他们使用了一种更复杂的方法，而不是简单地计算描述相邻骨段的向量之间的四元数。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:48:33.307

我不认为他们在新 SDK 中使用了新算法，

IMO 他们仍然使用[随机决策森林](https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/BodyPartRecognition.pdf)来估计关节位置，然后他们“简单地”根据骨骼跟踪管道返回的关节位置计算四元数（链接不再可用）。

对于现在可用的就座跟踪，他们制作了训练集以检测用户的这种位置。

这又是我的看法。

# php - 使用 PHP 将逗号分隔列表与 MySQL 表进行比较

> ID：11063825
> 
> 赞同：1
> 
> 时间：2012-06-16T13:27:31.830
> 
> 标签：php, mysql, csv, compare

我有一个接受逗号分隔的标签列表的 HTML 表单，它的工作方式与 stackoverflow 上的一样。我还有一个 MySQL 表，其中包含属于每个用户的标签列表。用户可以在他们的个人资料中更新他们的标签，所以我想做的是自动从 MySQL 表中删除任何标签，如果它不再存在于列表中

例如，用户在 Web 表单上输入以下内容：

```
trance, house, electronica, dubstep, club 
```

然而，MySQL 表有这个

```
userid    tag
1         trance
1         house
1         electronica
1         dubstep
1         garage 
```

我想从 MySQL 中删除车库标签并添加“俱乐部”。

**还值得注意**的是，虽然这些标签在我上面的示例中按顺序出现，但情况并非总是如此，因此我不能依赖于数组索引位置，例如。

我意识到我可以用 foreach 遍历逗号分隔的列表并生成一个删除语句，然后从头开始重新插入所有标签，但我觉得可能有更好的方法来做到这一点。

提前感谢您的指导。

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:31:06.430

您只需将逗号分隔的列表放置（在正确转义和引用之后）到一个 子句中，并在如下语句`NOT IN()`中使用它。`DELETE`顺序无关紧要。

```
DELETE FROM tags WHERE userid = 1 AND tag NOT IN ('trance', 'house', 'electronica', 'dubstep', 'club'); 
```

您如何转义和引用逗号分隔值将取决于您使用的数据库 API，无论是 PDO、MySQLi 还是旧的（即将被弃用的）`mysql_*()`函数。

我会注意到您通过每行存储一个标签而不是将它们作为 CSV 列表存储在单个列中来做正确的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:41:28.510

假设

*   兴趣名称中允许使用 noc 逗号，
*   并且桌子上有一个 UNIQUE INDEX(userid,tag)

做类似的事情

```
$s="trance, house, electronica, dubstep, club";
$userid=1;

$s=explode(',',$s);
$i=0;
foreach($s as $ss) {
  $ss=trim($ss);
  //Escape the string according to your DB framework
  //e.g. $ss=mysql_escape_string($ss);
  $s[$i++]=$ss;
}

$ss=implode("','",$s);
$sql="DELETE FROM tablename WHERE userid=$userid AND tag NOT IN('$ss')";
//Run $sql accodring to your DB framework

if (sizeof($s)>0) {
  $i=0;
  foreach($s as $ss) $s[$i++]="'$userid','$ss'";
  $ss=implode('),(',$s);
  $sql="INSERT IGNORE INTO tablename VALUES ($ss)";
  //Run $sql accodring to your DB framework
} 
```

# facebook - 无法使用 Oauth2.0 使用 Facebook 登录

> ID：11063826
> 
> 赞同：1
> 
> 时间：2012-06-16T13:27:58.363
> 
> 标签：facebook, oauth, facebook-oauth, facebook-authentication

我对使用 facebook 登录的整个系统很陌生。我刚刚通过 facebook 阅读了有关 OAuth2.0 系统的信息，我确实了解它是如何工作的，但我无法理解如何使其与我的应用程序一起工作并获取访问令牌，然后从图形 api 获取信息。

```
 <a href="https://graph.facebook.com/oauth/access_token?client_id=241467205957761&redirect_uri=https://apps.facebook.com/optionsminer&client_secret=17b3847f0d32667eb75ac3270fcbdbe7">asdasda</a> 
```

例如，如果我有这个，它似乎不起作用并且它给了我错误的 json

```
 {
        "error": {
       "message": "Error validating client secret.",
        "type": "OAuthException",
        "code": 1
        } 
```

我不知道该怎么做。如果你们中的任何人可以指导我完成一点，那就太好了！谢谢！}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:00:54.773

查看[来自 Facebook 的工作示例](https://developers.facebook.com/docs/authentication/client-side/)。

如果您纯粹使用 javascript 构建应用程序，您将只使用您的`client_id`. `client_secret`用于从服务器端代码（例如 Rails 或 PHP 应用程序）请求令牌。

```
<html> 
  <head> 
    <title>Client-side OAuth Example</title> 
  </head> 
<body> 
<script> 
  function displayUser(user) {
    var userName = document.getElementById('userName');
    var greetingText = document.createTextNode('Greetings, ' + user.name + '.');
    userName.appendChild(greetingText);
  }

  var appID = YOUR_APP_ID;
  if (window.location.hash.length == 0) {
    var path = 'https://www.facebook.com/dialog/oauth?';
    var queryParams = ['client_id=' + appID,
                       'redirect_uri=' + window.location,
                       'response_type=token'];
    var query = queryParams.join('&');
    var url = path + query;
    window.open(url);
  } else {
    var accessToken = window.location.hash.substring(1);
    var path = "https://graph.facebook.com/me?";
    var queryParams = [accessToken, 'callback=displayUser'];
    var query = queryParams.join('&');
    var url = path + query;

    // use jsonp to call the graph
    var script = document.createElement('script');
    script.src = url;
    document.body.appendChild(script);        
 }
</script> 
<p id="userName"></p> 
</body> 
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:47:06.933

**不要将您的应用程序机密放在客户端代码中——它被称为*机密*是有原因的！**

（如果这是您发布的代码中的*真实*应用程序 ID 和密码，您应该立即获得一个新密码！）

您是否使用任何 SDK？查看用于客户端登录的 JavaScript SDK，或者如果您正在使用 PHP 并希望进行服务器端登录，请查看 PHP SDK。这些 SDK 可帮助您完成 OAuth 登录等操作，并使您无需掌握最基本的东西，因此您可以专注于应用功能……</p>

# regex - grep中的正则表达式在字符串中查找非数字字符

> ID：11063827
> 
> 赞同：2
> 
> 时间：2012-06-16T13:28:09.817
> 
> 标签：regex, grep

我想使用正则表达式来查找文件中包含非数字部分的字符串。

这将是一个很好的字符串`IDxxxxxx0123456789`。

这将是一个坏字符串`IDxxxxxx01234?6789`。

我正在搜索的文件有许多不同的文本行，我对符合 IDxxxxxx 的文件特别感兴趣，然后我期望 10 位数字。我想找到 10 位数字不是全部数字的行。

到目前为止，我有这个，

```
 grep "ID.\{6\}[^0-9]" myFile 
```

如果 IDxxxxxx 之后的第一个字符不是数字，这可以正常工作。所以我将其扩展如下；

```
 grep "ID.\{6\}[^0-9]\{1,10\}" myFile 
```

我希望这意味着`IDxxxxxx`后面跟着 1 到 10 个非数字字符。如果第一个字符不是数字但不是第二个字符，这再次起作用。

我想我一定是接近了，但还不够接近。任何人都可以在这个问题上指导我一点。我会坚持这一点，如果我在任何人回答之前找到答案，那么我会发布我找到的内容。

感谢期待

（更新 - 我想找出所有坏字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:37:44.757

```
 grep -Po '\bID.{6}(?!\d{10}).{10}\b' inputFiles 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:31:58.403

这是你的字符串：

```
$> cat ./text 
This would be a good string IDxxxxxx0123456789
This would be a bad string IDxxxxxx01234?6789 
```

这个想法是使用`--invert-match`标志。

```
$> grep --perl-regex --invert-match "ID.{6}[0-9]{10}" ./text 
This would be a bad string IDxxxxxx01234?6789 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:38:09.720

您正在写 [^0-9]，但`^`意思是“每个字符，但不是后续字符之一”。所以你必须像这样改变它：

```
"ID.{6}[0-9]{1,10}\b" 
```

以您的方式，如果第一个不是数字，则字符串匹配，因为您的范围 {1,10} 必须是非数字字符。

此外，您需要添加`\b`. 否则它将匹配您的第二个字符串。`\b`相反，您是说在数字之后必须有一个空格、逗号或终止字符串的东西，而不是任何其他字符。

# environment-variables - “system32\java.exe”和“Program Files\Java\jdk1.6.0_33\bin\java.exe”有什么区别？

> ID：11063831
> 
> 赞同：32
> 
> 时间：2012-06-16T13:28:40.773
> 
> 标签：environment-variables, java

我刚刚在 Windows XP 中安装了 Java JDK 6u33。即使我没有设置 PATH 环境变量，我也可以`java -version`在命令提示符下运行。

当我运行这个命令`for %i in (java.exe) do @echo. %~$PATH:i`时，我得到这个输出： `C:\WINDOWS\system32\java.exe`

当我检查我的电脑时，我发现有2个java.exe：
1。2 `C:\Program Files\Java\jdk1.6.0_33\bin\java.exe`
。`C:\WINDOWS\system32\java.exe`

`system32\java.exe`我可以知道和有什么区别`Program Files\Java\jdk1.6.0_33\bin\java.exe`吗？为什么只`system32\java.exe`在我运行时显示`for %i in (java.exe) do @echo. %~$PATH:i`？

我还需要添加`C:\Program Files\Java\jdk1.6.0_33\bin\`到我的 PATH 环境变量吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-16T13:43:33.473

设置`PATH`变量只是为了让您可以访问`javac`jdk bin 文件夹中的其他程序和工具。

提供了`java.exe`in`\windows\system32\`以便不是每个人都需要设置 PATH 变量来运行 java 程序（从命令行）**并**选择已安装的 java 虚拟机 (JVM) 的版本（似乎是最后安装的）（如果有）安装了多个（公开）。

有关更多信息，请参阅此链接：

[http://mindprod.com/jgloss/javaexe.html#MULTIPLES](http://mindprod.com/jgloss/javaexe.html#MULTIPLES)

引用：

> 更复杂的是，system32 中的 java.exe 只是一个伪程序。它查看注册表，然后决定使用哪个真正的 java.exe。最后安装的 JVM 将成为使用的那个，即使它较旧。要切换 JVM，您通常必须重新安装您想要的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-11T19:28:01.383

（不是答案，而是对马蒂亚斯答案的评论）不确定这个“虚拟”业务。system32 中的 java.exe 是一个普通文件，甚至不是符号链接或硬链接。Mattias 可能指的是这里解释的问题：http: [//msdn.microsoft.com/en-us/library/aa384187](http://msdn.microsoft.com/en-us/library/aa384187)

简而言之，如果您有 64 位系统和 Java 安装，则 32 位应用程序将看不到安装在 C:\Windows\System32\ 中的 java.exe（也没有 javaw.exe、javaws.exe）因为它们将显示为 C:\Windows\SysWoW64\ 伪装成 C:\Windows\System32。安装程序无法将 java.exe 的副本放入 SysWoW64，因此尝试启动 Java 的 32 位应用程序将无法这样做。如果用户使用资源管理器查看 system32 目录，这会使用户感到困惑，因为资源管理器是一个 64 位应用程序，因此会看到“真实的”system32 目录。

# wpf - WPF DataGrid 绑定困难

> ID：11063832
> 
> 赞同：0
> 
> 时间：2012-06-16T13:28:47.453
> 
> 标签：wpf, data-binding, datagrid

这是课程：

```
public class TrainingData
{
    public string Training { get; set; }  
} 
```

这是 MainWindow 中的其余代码：

```
Excel.Workbook xlWorkbook = xlApp.Workbooks.Open("D:/excel.xlsx");
Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
Excel.Range xlRange = xlWorksheet.UsedRange;
List <TrainingData> tData= new List <TrainingData>();

int rowCount = xlRange.Rows.Count;
int colCount = xlRange.Columns.Count;
//int k = 0; 

for (int i = 1; i <= rowCount; i++)
{
    tData.Add(new TrainingData() { Training = xlRange.Cells[i, 1].Value2.ToString() });
    //MessageBox.Show(tData[k].Training); 
    //k++;
}

Prikaz.ItemsSource = tData; 
```

数据网格：

```
<DataGrid AutoGenerateColumns="False" Height="120" HorizontalAlignment="Left" Margin="12,12,0,0" Name="Prikaz" VerticalAlignment="Top" Width="105" ItemsSource="{Binding}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Header" />
                </DataGrid.Columns>
            </DataGrid>` 
```

所以，Prikaz 是我的 DataGrid。tData 是 TrainingData 对象的列表。如果我取消注释这三行，我可以测试我是否从 excel 文件中正确导入了信息，是的，它工作得很好。

那么为什么我得到空的DataGrid？它有正确的行数和一列，没关系，但里面没有数据。我使用了这一行： `Prikaz.ItemsSource = tData;`绑定我的对象列表和 DataGrid。训练被宣布为公开的，因此它应该出现在 DataGrid 中。什么可能导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:18:16.907

您需要将列路径绑定到属性 Training。

语法是这样的，但这只是来自记忆。文本需要绑定到路径Training

使用[DataGridTextColumn 绑定](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtextcolumn.aspx)：

```
<DataTemplate>
    <TextBlock Text="{Binding Path=Training}"/>
</DataTemplate> 
```

或者

```
<DataGridTextColumn Header="Header" Binding="{Binding Path=Training}/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T15:39:19.783

尽管您已`ItemsSource`在代码中指定了该属性，但您还需要在`DataGrid`连接到 ItemsSource 对象及其属性时提供与列的绑定，如下所示：

```
<DataGrid.Columns>
    <DataGridTextColumn Header="Header" Binding="{Binding Path=Training}"/>
</DataGrid.Columns> 
```

您还希望`INotifyPropertyChanged`为您的类实现接口，并且使用集合对象`TrainingData`而不是使用集合`List<TrainingData>`会更好。`ObservableCollection<TrainingData>`这篇[MSDN 文章](http://in.search.yahoo.com/r/_ylt=A8pWBidoqNxPYiMAFZ27HAx.;_ylu=X3oDMTFhNWw1bm82BHNlYwNzcgRwb3MDMQRjb2xvA2luMl9pbnRsBHZ0aWQDUkNGSU4wMl83NA--/SIG=12920tcqu/EXP=1339889896/%2a%2ahttp://msdn.microsoft.com/en-us/library/ms752347.aspx)提供了`DataBinding`概述以及为什么要在自定义类中使用上述接口。

# python - python/objective-c utf8 比较不同

> ID：11063841
> 
> 赞同：1
> 
> 时间：2012-06-16T13:29:49.803
> 
> 标签：python, objective-c, string, utf-8, compare

一个 python 脚本生成一个 Objective-c 程序读取的排序的 utf 8 字符串列表。唯一的问题，似乎这些语言的顺序不同？

在 python 中，'i' < 'é'`

但是在objective-c中`[@"i" compare:@"é"]`返回1（`NSDescendingAscending`）（这意味着'i'>'é'`）

知道如何做到这一点吗？我不介意更改我的 python 代码或我的 Objective-c 代码
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T15:52:31.383

> 在objective-c中`[@"記者" compare:@"記譜"]`返回-1（`NSAscending`）（这意味着`'記者' > '記譜'`）

不，不是这个意思。升序意味着，当从左到右（参数的接收者）按顺序阅读时，您将在排序中上升/稍后。因此，这意味着接收者小于参数。

从[文档中`NSOrderedAscending`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/c/econst/NSOrderedAscending)：

> NSOrderedAscending
> 左操作数小于右操作数。

# jquery - 简单的 Jquery 选择器

> ID：11063845
> 
> 赞同：0
> 
> 时间：2012-06-16T13:30:33.830
> 
> 标签：jquery

有谁知道为什么这个 jquery 点击功能不起作用？我不清楚为什么它不会。谢谢 ！

这是我的选择器

```
$(".ILikeItImg").click(function() {
  alert("Handler for .click() called.");
}); 
```

这是我希望点击功能发生的标签。

```
<img alt="I Like It" class="ILikeItImg" src="../QuickTagILikeIt_24.png"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:32:43.797

你可能需要把它放在一个 ready() 中：

```
 $(document).ready(function() {
      $(".ILikeItImg").click(function() {
         alert("Handler for .click() called.");
         });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:33:57.317

把你的代码写在 $(document).ready() 里面

```
$(function(){
$(".ILikeItImg").click(function() {
  alert("Handler for .click() called.");
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:34:17.700

这是一个有效的[演示](http://jsfiddle.net/ywkhh/1/)！

和代码

```
<img alt="I Like It" class="ILikeItImg" src="http://www.allaboutdogsandcats.com/images/cat22.jpg" />​

<script>
$(document).ready(function() {

    $(".ILikeItImg").click(function() {
        alert("Handler for .click() called.");
    });

});​
</script> 
```

# android - Android 客户端连接到 Jersey Rest - Post 给出 405

> ID：11063851
> 
> 赞同：1
> 
> 时间：2012-06-16T13:31:20.020
> 
> 标签：android, rest, jersey

我正在编写一个连接到我自己的 Jersey 休息客户端的 android 应用程序。HTTP get 命令工作正常，但我在尝试向服务器发送内容的 POST 时遇到问题。我收到了 405 发回，因此服务器似乎无法将请求与资源方法匹配。有什么想法吗？下面的测试代码...

休息服务器

```
@PUT
@Consumes(MultiPartMediaTypes.MULTIPART_MIXED)
public Response putResponse(MultiPart multiPart) {
    System.out.println(multiPart.getBodyParts());
    return null;
} 
```

安卓客户端

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost request = new HttpPost(URL + "responses");
request.addHeader("Content-Type", "multipart/mixed");

MultipartEntity entity = new MultipartEntity(
HttpMultipartMode.BROWSER_COMPATIBLE);
entity.addPart("Testpart1", new StringBody("<testxml></testxml>"));
entity.addPart("image1", new StringBody("imagedata1"));
request.setEntity(entity);
request.addHeader("deviceId", deviceId);
ResponseHandler<String> handler = new BasicResponseHandler();
try {
    String result = httpclient.execute(request, handler);
    Log.i("tag", result);
return result;
} catch (ClientProtocolException e) {
e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    httpclient.getConnectionManager().shutdown();
}
return null; 
```

TCPMon 流量显示以下 POST /Maintenance_Server/rest/responses HTTP/1.1 Content-Type: multipart/mixed deviceId: xxxxx Content-Length: 244 Host: 127.0.0.1:12345 Connection: Keep-Alive User-Agent: Apache-HttpClient/不可用（Java 1.4）

```
--jju2JFDOlzJ4LQo7YkrJYLuwDUHmB5b7
Content-Disposition: form-data; name="Testpart1"

<testxml></testxml>
--jju2JFDOlzJ4LQo7YkrJYLuwDUHmB5b7
Content-Disposition: form-data; name="image1"

imagedata1
--jju2JFDOlzJ4LQo7YkrJYLuwDUHmB5b7-- 
```

谢谢

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:04:40.103

您正在发送 HTTP POST，但在服务器端您声明了一个仅用于 HTTP PUT 的处理程序。因此，它无法将 POST 与任何方法匹配，因此出现 405。将资源方法上的注释从 @PUT 更改为 @POST 或由客户端发送 HTTP PUT 而不是 POST。

# iphone - 我在 UITableView 中使用搜索有很大延迟

> ID：11063852
> 
> 赞同：0
> 
> 时间：2012-06-16T13:31:22.757
> 
> 标签：iphone, objective-c, uitableview

有我的问题，我有一个应用程序有大量的数据。我的 .plist 文件包含元素数组，它看起来像这样 - 橙色、蛋白质 - 25、碳水化合物 - 40、脂肪 - 50 等。总共，每个项目包含 7 行带有数据的子行。

我的 tableview 在一个巨大的 tableview 中显示了所有带有部分的数组。在屏幕顶部我有一个搜索栏。当我点击搜索栏并输入任何字母时，它会显示这样的新数组 - M：巨无霸、肉类、膳食等。

所以，在我的数组中达到 700 多个元素之前，一切都很好，但是，当我添加最后 500 个元素（我的 .plist 文件从 200 到 700 个元素编辑）时，我意识到当我点击搜索并输入任何字母时，我有很大的延迟。第一次延迟大约 0.6 秒（当我点击搜索字段时），在我按下键盘上的按钮后第二次延迟（再次大约 0.6 秒）。我认为，那是因为我在我的 .plist 中添加了许多项目。

显然，我不想减少数组中对象的数量。我想我有“坏”的代码，我向你寻求任何有用的建议。请帮助我，我想我需要改进它！有我的代码，其中包含我的 UITableView 代码和搜索方法：

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    self.tableView.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"bg.png"]];

    NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingPathComponent:@"food.plist"];

    listOfItems = [[NSMutableArray alloc]initWithContentsOfFile:path];
    searchListOfItems = [[NSMutableArray alloc]init];

    searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 45)];
    searchBar.barStyle = UIBarStyleBlackTranslucent;
    searchBar.showsCancelButton = NO;
    searchBar.autocorrectionType=UITextAutocorrectionTypeNo;
    searchBar.autocapitalizationType=UITextAutocapitalizationTypeNone;
    searchBar.delegate= self; 
    [[self tableView] setTableHeaderView:searchBar];

    searching = NO;
    letUserSelectRow = YES;
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addProduct:)];
    self.navigationItem.leftBarButtonItem = addButton;
    self.navigationItem.backBarButtonItem.title = @"Back";

    [self.tableView reloadData];

    self.navigationItem.backBarButtonItem =
    [[UIBarButtonItem alloc] initWithTitle:@"Назад"
                                     style:UIBarButtonItemStyleBordered
                                    target:nil
                                    action:nil];

    self.title = @"Продукты";
    UILabel* tlabel=[[UILabel alloc] initWithFrame:CGRectMake(0,0, 125, 21)];
    tlabel.text=self.navigationItem.title;
    tlabel.font = [UIFont fontWithName:@"Chalkboard SE" size:17];
    tlabel.textAlignment = UITextAlignmentCenter;
    tlabel.textColor=[UIColor whiteColor];
    tlabel.backgroundColor =[UIColor clearColor];
    tlabel.adjustsFontSizeToFitWidth=YES;
    self.navigationItem.titleView=tlabel;

}

- (void)hideModalViewController:(NSNotification *)notif
{
    [self dismissModalViewControllerAnimated:YES];
    [self viewDidLoad];   
}

-(void)productAdded {
    [self.tableView setContentOffset:CGPointMake(0, self.tableView.contentSize.height - self.tableView.frame.size.height)];
    [self.tableView reloadData];
}

- (void)addProduct:(UIBarButtonItem *)button
{
    BIDAddProductViewController *addProductVC = [[BIDAddProductViewController alloc]init];
    addProductVC.delegate = self;
    [self.navigationController pushViewController:addProductVC animated:YES];

    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(hideModalViewController:) name:@"HideModalViewController" object:addProductVC];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.childController = nil;
    self.tableView=nil;

}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];

    if (editingStyle == UITableViewCellEditingStyleDelete)

    {

        NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject]stringByAppendingPathComponent:@"food.plist"];

        NSMutableArray *listOfItemsToDelete = [[NSMutableArray alloc]initWithContentsOfFile:path];

        [[[listOfItemsToDelete objectAtIndex:indexPath.section]objectForKey:@"Products"] removeObjectAtIndex:indexPath.row];
        [listOfItemsToDelete writeToFile:path atomically:YES];
        [self viewDidLoad];

        NSArray *descriptionsArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"ProductName"];

        NSLog(@"%@", descriptionsArray);
        NSLog(@"%i", [descriptionsArray count]);

        if ([descriptionsArray count]<2){

            [listOfItems removeObjectAtIndex:indexPath.section];
            [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:NO];
            [listOfItems writeToFile:path atomically:YES];
        }

        }
}
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:
                             SectionsTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleValue1
                reuseIdentifier:SectionsTableIdentifier];
    }

    if(searching)
        cell.textLabel.text = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"ProductName"];
    else {

        NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];
         NSArray *array = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"ProductName"];
        NSString *cellValue = [array objectAtIndex:indexPath.row];
        cell.textLabel.text = cellValue;

    }

    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    if (searching)
        return 1;
    else
        return [listOfItems count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (searching)
        return [searchListOfItems count];
    else {

        NSDictionary *dictionary = [listOfItems objectAtIndex:section];
        NSArray *array = [dictionary objectForKey:@"Products"];
        return [array count];
    }
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

    if(searching)
        return @"";

   return [[listOfItems objectAtIndex:section]valueForKey:@"SectionName"];
}

- (void) doneSearching_Clicked:(id)sender {

    searchBar.text = @"";
    [searchBar resignFirstResponder];

    letUserSelectRow = YES;
    searching = NO;
    self.navigationItem.rightBarButtonItem = nil;
    self.tableView.scrollEnabled = YES;
    [self.tableView reloadData];

}
- (void) searchBarSearchButtonClicked:(UISearchBar *)theSearchBar {

    [self searchTableView];
}

- (void) searchTableView {

    NSString *searchText = searchBar.text;
    NSMutableArray *searchArray = [[NSMutableArray alloc] init];

    for (NSDictionary *dictionary in listOfItems)
    {
        NSArray *array = [dictionary objectForKey:@"Products"];
        [searchArray addObjectsFromArray:array];
    }

    for (NSString *sTemp in [searchArray valueForKeyPath:@"ProductName"] )
    {
        NSRange titleResultsRange = [sTemp rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (titleResultsRange.length > 0)
            [searchListOfItems addObject:[searchArray objectAtIndex:[[searchArray valueForKeyPath:@"ProductName"]indexOfObject:sTemp]]];
    }

    searchArray = nil;
}
- (NSIndexPath *)tableView :(UITableView *)theTableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if(letUserSelectRow)
        return indexPath;
    else
        return nil;
}
- (void) searchBarTextDidBeginEditing:(UISearchBar *)theSearchBar {

    searching = YES;

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]
                                               initWithBarButtonSystemItem:UIBarButtonSystemItemDone
                                               target:self action:@selector(doneSearching_Clicked:)];
}

- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText {

    [searchListOfItems removeAllObjects];

    if([searchText length] > 0) {

        searching = YES;
        letUserSelectRow = YES;
        self.tableView.scrollEnabled = YES;
        [self searchTableView];
    }
    else {

        searching = NO;
        letUserSelectRow = NO;
        self.tableView.scrollEnabled = NO;
    }

    [self.tableView reloadData];
}
- (void)viewWillAppear:(BOOL)animated
{

    letUserSelectRow = YES;
    [super viewWillAppear:animated];

}

#pragma mark -
#pragma mark Table Delegate Methods
- (void)tableView:(UITableView *)tableView
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (childController == nil) {
        childController = [[BIDDisclosureDetailController alloc]
                           initWithNibName:@"BIDDisclosureDetail" bundle:nil];
    }

        if(searching)

        {

            childController.description = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"ProductName"];
//            childController.title = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"ProductName"];
            childController.calories = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"Calories"];
            childController.protein = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"Proteins"];
            childController.carbohydrates = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"Carbohydrates"];
            childController.fat = [[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"Fat"];
            childController.myBool=[[searchListOfItems objectAtIndex:indexPath.row]valueForKey:@"TextField"];

        }

        else 

        {

            NSDictionary *dictionary = [listOfItems objectAtIndex:indexPath.section];

            NSArray *descriptionsArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"ProductName"];
            childController.description = [descriptionsArray objectAtIndex:indexPath.row];

            NSArray *proteinArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"Proteins"];
            childController.protein = [proteinArray objectAtIndex:indexPath.row];

            NSArray *carbohydratesArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"Carbohydrates"];
            childController.carbohydrates = [carbohydratesArray objectAtIndex:indexPath.row];

            NSArray *fatArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"Fat"];
            childController.fat = [fatArray objectAtIndex:indexPath.row];

            NSArray *caloriesArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"Calories"];
            childController.calories = [caloriesArray objectAtIndex:indexPath.row];

             NSArray *textFieldArray = [[dictionary objectForKey:@"Products"]valueForKeyPath:@"TextField"];
            childController.myBool = [textFieldArray    objectAtIndex:indexPath.row];

        }

        [self.navigationController pushViewController:childController
                                             animated:YES];
    }

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:55:54.480

In your code every time you change the text in the search bar the searchTableView function is run. You will want to make sure this function is as quick as possible.

I see you are iterating over the list of NSDictionarys from the plist file in the function and building a search array. If the plist is large this is probably quite expensive of an operation to be doing on every text change.

```
for (NSDictionary *dictionary in listOfItems)
{
    NSArray *array = [dictionary objectForKey:@"Products"];
    [searchArray addObjectsFromArray:array];
} 
```

I think if you moved this iteration to viewDidLoad and made searchArray a global variable you will notice some speed increases.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:58:23.560

I think you should use SqliteDatabase to store so much data,and use SQL to search your data.Every time you touch search bar,all of your data alloc in a new NSMutableArray with the method

```
-(void)searchTableView 
```

this is why when you touch the search bar , it will delay 0.6sec when your data is too much

# javascript - 更改地图大小时保持谷歌地图的中心

> ID：11063857
> 
> 赞同：1
> 
> 时间：2012-06-16T13:32:08.240
> 
> 标签：javascript, google-maps

我正在尝试更改地图的大小并保持中心。这行不通。代码

```
var center = map.getCenter()
$('#left').css("width", "360px");
map.setCenter(center) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:02:26.453

Have a look at the accepted answer in this question: [How to offset the center point in Google maps api V3](https://stackoverflow.com/questions/10656743/how-to-offset-the-center-point-in-google-maps-api-v3)

What you need to do is work out how far the centre-point of the map will need to be moved so it's where it was before the re-size, and then call my new `offsetCenter` function to put it back there.

For example: resizing a map so that the left edge moves 300px to the left will require your centre-point to appear 150px to the right of the real centre.

```
var center = map.getCenter();
$('#left').css("width", "360px");
google.maps.event.trigger(map, 'resize');
offsetCenter(center,150,0); 
```

# jquery - 如何在jquery的标签名称属性中编写包含[和]的选择器

> ID：11063863
> 
> 赞同：1
> 
> 时间：2012-06-16T13:33:01.420
> 
> 标签：jquery

我想检测一个输入标签，它的名字是：**some[en]** in jquery。我写了这个选择器，但它不起作用：

```
$("input[name=some\[en\]]") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:35:12.467

试着放进去`'`

```
$("input[name='some[en]']") 
```

示例：http: [//jsfiddle.net/kVsTe/](http://jsfiddle.net/kVsTe/)

这是所有属性选择器的首选方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:39:06.443

选择器中特殊字符的转义规则概述了使用双反斜杠进行转义。也最好遵循 API 中所示的属性值引用

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

```
 $("input[name='some\\[en\\]']") 
```

# actionscript-3 - as3 影片剪辑抗锯齿

> ID：11063864
> 
> 赞同：0
> 
> 时间：2012-06-16T13:33:04.587
> 
> 标签：actionscript-3, flash, flashdevelop

我在movieClip中保留了一个位图，位图已设置为平滑。但是当我改变这个movieclip的比例时，它仍然被像素化了。我们有没有办法避免。这真的很痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T20:36:52.613

**当您缩放位图时，质量总是会丢失。**

*   始终将 x 和 y 位置捕捉到完整像素。
*   `stage.quality = "best"`为您提供更好的抗锯齿（双三次），但它会花费更多的 CPU。
*   尝试找出图像的最大比例。然后制作该尺寸的图像。
*   大多数人并没有看到它不那么流畅，只是让游戏运行流畅有趣。所以放松一下。

# java - 如何使用具有私有构造函数的类的实例？

> ID：11063866
> 
> 赞同：3
> 
> 时间：2012-06-16T13:33:05.747
> 
> 标签：java, oop

如果我们有类 A 和 B，并且类 A 的构造函数是私有的，并且我们想在 B 中使用 A 的实例，该怎么做？我看到一个答案说“提供允许访问从类中创建的实例的静态方法或变量”，但我不明白这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T13:40:32.370

您寻求的代码模式称为[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)。

该类提供了一个静态方法，该方法*返回*其自己的类的实例。私有构造函数对类的所有方法（包括静态方法）都是可见的，因此静态方法可以代表调用者调用私有构造函数。

下面是这个模式的一个例子：

```
public class A {
    private A() {
    }

    public static A create() {
        return new A();
    }
} 
```

这通常与[Singleton Pattern](http://en.wikipedia.org/wiki/Singleton_pattern)结合使用，这会将上面的示例更改为：

```
public class A {
    private static A INSTANCE = new A();

    private A() {
    }

    public static A getInstance() {
        return INSTANCE;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T13:36:15.600

A 需要有一个提供类 A 实例的公共方法，例如：

```
class A {
  /*Constructors and other methods omitted*/
  public static A getInstance() {
    return new A();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T13:43:07.937

或者，如果 B 是 A 的内部类（反之亦然），则 B 可以直接引用构造函数，例如：

```
public class A {
    private A() {}

    public static class B {
        private A instanceOfA = new A();

        public B() {}
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T13:48:12.597

一个只有私有构造函数的类被**设计**成其他类不能直接实例化它。这大概是有充分理由的。该类可以提供一个工厂方法来实例化该类……或获取该类的现有实例。

如果需要更改设计，最好的方法是修改类；例如，通过使构造函数可见，或通过添加工厂方法。如果你不能这样做，我认为可以使用反射来打破可见性规则并使用私有构造函数创建一个实例。但是，我只会将其作为最后的手段......而不是在仔细分析整个应用程序的后果之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T13:44:12.083

私有构造函数旨在使类没有任何实例。但是可以使用**super()**从子类访问内容。实现是这样的：

> 公共类 ClassA {
> 私有 int val;
> 私人类A（int val）
> {
> 
> ```
>  this.val = val; 
> ```
> 
> }
> 
> public int getVal() { return val;
> }

}

> 公共类 ClassB 扩展 ClassA {
> 
> 公共 ClassB(int val) { super(val); } }

...

B 类 b = 新 B 类（4）；

System.out.println("b 的值：" + b.getVal());

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-16T14:07:00.083

作为示例，请参见 class `Calendar`。要获取实例，您不能调用其构造函数，而是使用静态方法：

```
Calendar rightNow = Calendar.getInstance(); 
```

[来源](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

# xml - 使用 CSS 选择器解析 Perl XML

> ID：11063871
> 
> 赞同：3
> 
> 时间：2012-06-16T13:34:01.637
> 
> 标签：xml, perl, namespaces, css-selectors

有人知道可以解析 XML 文档并使我能够通过 CSS 选择器和命名空间支持选择节点的 Perl 库吗？

背景：我试图使用 perl libxml 包解析具有默认命名空间的文档，但它从未返回任何内容，直到我从根节点中删除了默认命名空间。

这是我在该主题上发现的： [https ://mail.gnome.org/archives/xml/2003-April/msg00143.html](https://mail.gnome.org/archives/xml/2003-April/msg00143.html)

所以一个简单的例子是这样的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns="http://example.com/ns">
  <message>Hi</message>
</root 
```

XPath`//message`不会给我任何 perl libxml 的结果。我知道这个库做得很好，但我仍然需要解析这些东西，所以我认为基于 CSS 选择器的库可能会更成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:39:30.317

这应该适用于您可以在 libxml 中抛出的任何内容。

```
use strictures;
use HTML::TreeBuilder::LibXML qw();
BEGIN { HTML::TreeBuilder::LibXML->replace_original; }
use Web::Query qw();

print Web::Query->new_from_html(<<'MARKUP')->find('root > message')->text;
<?xml version="1.0" encoding="utf-8"?>
<root xmlns="http://example.com/ns">
<message>Hi</message>
</root>
MARKUP

1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:16:30.677

试试这个：

```
#!/usr/bin/perl

use XML::XPath;
use XML::XPath::XMLParser;

my $xp = XML::XPath->new(filename => 'test.xhtml');

print XML::XPath::XMLParser::as_string($_), "\n" for ($xp->find('root/message')->get_nodelist); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T15:23:04.083

除非你也告诉它，否则 XML::Twig 会很高兴地忽略名称空间。您`message`可以通过在元素名称上设置处理程序或使用 XPath 查询（如`my @messages= $twig->findnodes( '//message')`

要使用处理程序，您将编写：

```
XML::Twig->new( twig_handlers => { message => \&process_message })
         ->parsefile( "my.xml"); )

sub process_message
  { my( $twig, $message)= @_;
    print $message->text;
  } 
```

# php - 将值插入两个链接的表中 (1:M)

> ID：11063877
> 
> 赞同：0
> 
> 时间：2012-06-16T13:34:44.697
> 
> 标签：php, mysql, database

我有两个表用户和电子邮件。一个用户可以有多个电子邮件，因此它是一个单独的表（包含 user_id 作为其主键的一部分）。我想将多个属性插入到用户表中，并将一封电子邮件插入到电子邮件表中。使用 mySQL 查询的最佳方法是什么。是否有任何单行命令可以做到这一点？

如果我不能只用 mySql 做到这一点，我也可以使用 php 脚本

**更新** 我看到人们误解了我的问题。我要做的就是将`insert`用户名密码之类的值放入我的用户表中，并将一封电子邮件放入链接的电子邮件表中（链接到同一用户的那个）

我希望答案包括 mySQL 查询（如果必要，还包括 php 脚本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:06:45.863

最好的方法是在事务中进行。这样，如果电子邮件插入失败，整个事务也会失败。

```
BEGIN;

INSERT INTO users (name)
VALUES ('Emil Vikström');

INSERT INTO emails (user_id, email)
VALUES (LAST_INSERT_ID(), 'email address');

COMMIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:43:44.957

您应该执行多个 SQL INSERT 查询。我认为进行多项操作的最佳方法是使用 SQL 事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T14:17:10.823

你可以这样做;

```
$query = "INSERT INTO users (name) VALUES ("you username");
$result = mysql_query($query);
if($result)
{
   $generated_userID = mysql_insert_id(); // php function to get the last generated ID by previous result
    $query = "INSERT INTO emails(user_ID, email) VALUES ($generated_userID, "you email value");
    $result = mysql_query($query);
    if($result)  
       echo "email inserted in email table";
     else
      {
        echo "problem inserting in email table";
         return;
       }
 }
 else
 {
    echo "can't insert into users table";
  } 
```

让我知道它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T13:45:43.473

像这样，您可以插入多个值和多行，但我从来没有见过可以将多个插入到不同表中的东西。

```
 INSERT INTO example
      (example_id, name, value, other_value)
    VALUES
      (100, 'Name 1', 'Value 1', 'Other 1'),
      (101, 'Name 2', 'Value 2', 'Other 2'),
      (102, 'Name 3', 'Value 3', 'Other 3'),
      (103, 'Name 4', 'Value 4', 'Other 4'); 
```

最好的办法是在用户中插入一行，检索用户 ID，并[在此处](http://php.net/manual/en/function.mysql-insert-id.php)`mysql_insert_id`描述

# c - 在内存中有数据库 - C

> ID：11063878
> 
> 赞同：1
> 
> 时间：2012-06-16T13:34:50.103
> 
> 标签：c, database, daemon

我正在编写一个服务器守护程序，用户可以从中查询 C 中的数据。也可以从客户端修改数据。

我考虑将数据保存在内存中。

对于每个新连接，我都会执行一个 fork()。

我首先想到的是，每次发生连接时都会生成一个数据库副本，这是对内存的浪费。

我遇到的第二个问题是我不知道如何在父进程中修改数据库。

有什么概念可以解决这些问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:39:19.043

`Shared memory`并且`multi-threading`是在多个执行单元之间共享内存的两种方式。查看[POSIX Threads](https://computing.llnl.gov/tutorials/pthreads/)以了解多线程，并且不要忘记在有人阅读时使用互斥锁和/或信号量来锁定内存区域以防止写入。

所有这些都是更大的问题的一部分`concurrency`。有很多关于并发问题的书籍和整个大学课程，所以如果你发现自己迷路了，也许你需要坐下来研究一下。如果您不小心，很容易在并发 C 程序中引入死锁和竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:43:53.130

> 有什么概念可以解决这些问题？

只是一些观察：

1.  `fork()`只克隆它在执行时执行的进程的内存。如果您在此阶段尚未打开或加载数据库，则不会将其克隆到子进程中。
2.  [共享内存](https://stackoverflow.com/questions/5656530/how-to-use-shared-memory-with-linux-in-c)——即映射的内存`mmap()`，`MAP_SHARED`将在进程之间共享，不会被复制。
3.  进程间通信的总称是[进程间通信](https://stackoverflow.com/questions/4582968/system-v-ipc-vs-posix-ipc)，它有多种类型和种类，具体取决于您的需要。

**在现代**Linux 系统上，`fork()`实现进程内存的写时复制。实际上，您*不会*在内存中得到两个进程副本 - 您最终会得到一个认为它已被复制两次的副本。如果您写入任何内存，*那么*它将被复制。这是一种效率节省，它利用了大多数进程在运行时仅更改其一小部分内存的事实，因此实际上即使您采用复制整个数据库的方法，您可能会发现内存使用量更少你所期望的——虽然这当然不能解决你的同步问题！

# python - 在一行中结合两个赋值和pep8风格的python代码

> ID：11063880
> 
> 赞同：-1
> 
> 时间：2012-06-16T13:35:14.337
> 
> 标签：python, regex, pep8

```
 email = re.search('(.*?)-+(.*?)-+', line).group(1)
  password = re.search('(.*?)-+(.*?)-+', line).group(2)
  user_data.write("%s\t%s\n" % (email, password)) 
```

如何将第一行和第二行合并为一行？

另一个问题：

```
email = re.search("[a-zA-Z0-9.!#$%&'*+-/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*", line) 
```

我应该如何将线分成两条线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T13:45:56.310

您可以使用[`groups()`](http://docs.python.org/library/re.html#re.MatchObject.groups)：

```
email, password = re.search('(.*?)-+(.*?)-+', line).groups() 
```

# html - 谁能告诉我一些关于 HTML5 的好网站？

> ID：11063886
> 
> 赞同：0
> 
> 时间：2012-06-16T13:36:28.707
> 
> 标签：html

随着HTML5的大发展，我认为现在是了解更多有关HTML5的正确时机，所以您能告诉我一些介绍HTML5知识的好网站吗？谢谢你，我的朋友们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:40:18.953

你应该用谷歌搜索它。我仍然建议 -

[http://diveintohtml5.info/](http://diveintohtml5.info/)

[http://html5doctor.com/](http://html5doctor.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:46:13.270

[www.w3school.com](http://www.w3school.com)也是学习 HTML5 的最佳网站

# java - 如何从android中的服务更改设备的屏幕方向？

> ID：11063888
> 
> 赞同：0
> 
> 时间：2012-06-16T13:36:39.027
> 
> 标签：java, android

是否可以从正在运行的服务将设备的方向从纵向更改为横向？我已经搜索过，但我找不到任何负面或正面的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:44:06.187

服务是后台操作，而屏幕方向是 UI 操作。您可以强制服务启动一项活动（但根本不建议这样做）并将其设置在您的清单中，就像横向设置一样。

# ios - 覆盖瞬间消失

> ID：11063895
> 
> 赞同：1
> 
> 时间：2012-06-16T13:36:58.760
> 
> 标签：ios, xcode, mkmapview

好吧，我遇到的问题是我有一个由 iphone 的指南针驱动的叠加层。每当指南针航向发生变化时，该线应随航向在地图上移动。有两种覆盖，一种用于指南针，另一种用于指南针。仅显示罗盘覆盖时，线条会随着变化而闪烁，但当显示另一条线时，闪烁消失并且线条平滑移动。

```
- (MKOverlayView *)mapView:(MKMapView *)map viewForOverlay:(id <MKOverlay>)overlay
{
SatFinderAppDelegate *appdel = (SatFinderAppDelegate *)[[UIApplication sharedApplication]delegate];
float s = [appdel.location floatValue];

if (overlay == self.headingline)

 {
 headinglineView = [[MKPolylineView alloc] initWithPolyline:self.headingline];
 headinglineView.fillColor = [UIColor greenColor];
 headinglineView.strokeColor = [UIColor greenColor];
 headinglineView.lineWidth = 5;
  return self.headinglineView;
  }

if (overlay == self.routeLine)
{
    if (s == 0) {
        return routeLineView = nil;

    }

routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
routeLineView.fillColor = [UIColor cyanColor];
routeLineView.strokeColor = [UIColor cyanColor];
routeLineView.lineWidth = 5;
if (ele < 0) {
 routeLineView.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:12],                             

[NSNumber numberWithFloat:8],nil];
    routeLineView.strokeColor = [UIColor redColor];
}

    return routeLineView; 
}

return nil;
} 
```

...

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {

//line for heading  
[self headinglineupdate];

} 
```

……

```
-(void)headinglineupdate
{

[map removeOverlay:self.headingline];
self.headingline = nil;

self.headingline = [MKPolyline polylineWithCoordinates:locations count:2];

[map addOverlay:headingline];
[headinglineView setNeedsDisplay];

[map setNeedsDisplay];

} 
```

# iphone - 为什么 Cocos2D 编程指南建议使用 initWithTexture？

> ID：11063899
> 
> 赞同：0
> 
> 时间：2012-06-16T13:37:07.457
> 
> 标签：iphone, ios, cocos2d-iphone, sprite

我发现在[cocos2d Best Practices](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3asprites#speedup_sprite_sheet_loading_with_pvz)中有一个建议使用 initWithTexture 来初始化精灵子类，而不是在几本书和教程中我发现你也可以使用 initWithSpriteFrameName。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T13:43:27.343

`CCSprite`用于`initWithTexture:rect`创建精灵的所有初始化方法。例如，

```
-(id) initWithFile:(NSString*)filename
{
    NSAssert(filename!=nil, @"Invalid filename for sprite");

    CCTexture2D *texture = [[CCTextureCache sharedTextureCache] addImage: filename];
    if( texture ) {
        CGRect rect = CGRectZero;
        rect.size = texture.contentSize;
        return [self initWithTexture:texture rect:rect];
    }

    [self release];
    return nil;
} 
```

其他函数（`initWithFile`、`initWithSpriteFrame`、`initWithSpriteFrameName`等）也`initWithTexture:rect`直接或间接调用。如果您的`CCSprite`子类有任何需要进行的特殊初始化（因为它表面上会这样，因为您正在继承另一个类），那么这样做可以`initWithTexture:rect`保证它将运行。

# c# - 确定上传的文件是否是 MVC 上的图像（任何格式）

> ID：11063900
> 
> 赞同：62
> 
> 时间：2012-06-16T13:37:08.267
> 
> 标签：c#, .net, asp.net-mvc, razor, file-upload

所以我使用这段代码来查看：

```
<form action="" method="post" enctype="multipart/form-data">

  <label for="file">Filename:</label>
  <input type="file" name="file" id="file" />

  <input type="submit" />
</form> 
```

这对于模型：

```
[HttpPost]
public ActionResult Index(HttpPostedFileBase file) {

  if (file.ContentLength > 0) {
    var fileName = Path.GetFileName(file.FileName);
    var path = Path.Combine(Server.MapPath("~/App_Data/uploads"), fileName);
    file.SaveAs(path);
  }

  return RedirectToAction("Index");
} 
```

除非用户添加不是图像的文件，否则效果很好。我如何确保上传的文件是图像。谢谢

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-29T16:43:58.070

如果它可以帮助任何人，这是一个静态方法，用于`HttpPostedFileBase`检查给定的上传文件是否是图像：

```
public static class HttpPostedFileBaseExtensions
{
    public const int ImageMinimumBytes = 512;

    public static bool IsImage(this HttpPostedFileBase postedFile)
    {
        //-------------------------------------------
        //  Check the image mime types
        //-------------------------------------------
        if (!string.Equals(postedFile.ContentType, "image/jpg", StringComparison.OrdinalIgnoreCase) &&
            !string.Equals(postedFile.ContentType, "image/jpeg", StringComparison.OrdinalIgnoreCase) &&
            !string.Equals(postedFile.ContentType, "image/pjpeg", StringComparison.OrdinalIgnoreCase) &&
            !string.Equals(postedFile.ContentType, "image/gif", StringComparison.OrdinalIgnoreCase) &&
            !string.Equals(postedFile.ContentType, "image/x-png", StringComparison.OrdinalIgnoreCase) &&
            !string.Equals(postedFile.ContentType, "image/png", StringComparison.OrdinalIgnoreCase))
        {
            return false;
        }

        //-------------------------------------------
        //  Check the image extension
        //-------------------------------------------
        var postedFileExtension = Path.GetExtension(postedFile.FileName);
        if (!string.Equals(postedFileExtension , ".jpg", StringComparison.OrdinalIgnoreCase)
            && !string.Equals(postedFileExtension , ".png", StringComparison.OrdinalIgnoreCase)
            && !string.Equals(postedFileExtension , ".gif", StringComparison.OrdinalIgnoreCase)
            && !string.Equals(postedFileExtension , ".jpeg", StringComparison.OrdinalIgnoreCase))
        {
            return false;
        }

        //-------------------------------------------
        //  Attempt to read the file and check the first bytes
        //-------------------------------------------
        try
        {
            if (!postedFile.InputStream.CanRead)
            {
                return false;
            }
            //------------------------------------------
            //   Check whether the image size exceeding the limit or not
            //------------------------------------------ 
            if (postedFile.ContentLength < ImageMinimumBytes)
            {
                return false;
            }

            byte[] buffer = new byte[ImageMinimumBytes];
            postedFile.InputStream.Read(buffer, 0, ImageMinimumBytes);
            string content = System.Text.Encoding.UTF8.GetString(buffer);
            if (Regex.IsMatch(content, @"<script|<html|<head|<title|<body|<pre|<table|<a\s+href|<img|<plaintext|<cross\-domain\-policy",
                RegexOptions.IgnoreCase | RegexOptions.CultureInvariant | RegexOptions.Multiline))
            {
                return false;
            }
        }
        catch (Exception)
        {
            return false;
        }

        //-------------------------------------------
        //  Try to instantiate new Bitmap, if .NET will throw exception
        //  we can assume that it's not a valid image
        //-------------------------------------------

        try
        {
            using (var bitmap = new System.Drawing.Bitmap(postedFile.InputStream))
            {
            }
        }
        catch (Exception)
        {
            return false;
        }
        finally
        {
             postedFile.InputStream.Position = 0;
        }

        return true;
    }
} 
```

编辑 2/10/2017：根据建议的编辑，添加了一个 finally 语句来重置流，以便我们以后可以使用它。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-08-16T14:49:40.413

**现在是 2018 年，接受的答案不适用于 .NET CORE 2.1**，因为我们现在拥有`IFormFile`而不是`HttpPostedFileBase`.

这是对 .NET CORE 2.1 的接受答案的改编（我还修复了 TomSelleck 在对接受的答案的评论中提到的错误/错字）：

```
public static class FormFileExtensions
{
    public const int ImageMinimumBytes = 512;

    public static bool IsImage(this IFormFile postedFile)
    {
        //-------------------------------------------
        //  Check the image mime types
        //-------------------------------------------
        if (postedFile.ContentType.ToLower() != "image/jpg" &&
                    postedFile.ContentType.ToLower() != "image/jpeg" &&
                    postedFile.ContentType.ToLower() != "image/pjpeg" &&
                    postedFile.ContentType.ToLower() != "image/gif" &&
                    postedFile.ContentType.ToLower() != "image/x-png" &&
                    postedFile.ContentType.ToLower() != "image/png")
        {
            return false;
        }

        //-------------------------------------------
        //  Check the image extension
        //-------------------------------------------
        if (Path.GetExtension(postedFile.FileName).ToLower() != ".jpg"
            && Path.GetExtension(postedFile.FileName).ToLower() != ".png"
            && Path.GetExtension(postedFile.FileName).ToLower() != ".gif"
            && Path.GetExtension(postedFile.FileName).ToLower() != ".jpeg")
        {
            return false;
        }

        //-------------------------------------------
        //  Attempt to read the file and check the first bytes
        //-------------------------------------------
        try
        {
            if (!postedFile.OpenReadStream().CanRead)
            {
                return false;
            }
            //------------------------------------------
            //check whether the image size exceeding the limit or not
            //------------------------------------------ 
            if (postedFile.Length < ImageMinimumBytes)
            {
                return false;
            }

            byte[] buffer = new byte[ImageMinimumBytes];
            postedFile.OpenReadStream().Read(buffer, 0, ImageMinimumBytes);
            string content = System.Text.Encoding.UTF8.GetString(buffer);
            if (Regex.IsMatch(content, @"<script|<html|<head|<title|<body|<pre|<table|<a\s+href|<img|<plaintext|<cross\-domain\-policy",
                RegexOptions.IgnoreCase | RegexOptions.CultureInvariant | RegexOptions.Multiline))
            {
                return false;
            }
        }
        catch (Exception)
        {
            return false;
        }

        //-------------------------------------------
        //  Try to instantiate new Bitmap, if .NET will throw exception
        //  we can assume that it's not a valid image
        //-------------------------------------------

        try
        {
            using (var bitmap = new System.Drawing.Bitmap(postedFile.OpenReadStream()))
            {
            }
        }
        catch (Exception)
        {
            return false;
        }
        finally
        {
            postedFile.OpenReadStream().Position = 0;
        }

        return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-03-04T21:25:49.843

对于遇到这种情况的任何人。

您还可以使用 a `file.ContentType.Contains("image")`检查内容类型是否为 image/*。

```
if(file.ContentLength > 0 && file.ContentType.Contains("image"))
{
    //valid image
}
else
{
    //not a valid image
} 
```

不确定这是否是最佳实践，但它对我有用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-16T13:40:11.103

手头没有编译器，但应该这样做：

```
try
{
   var bitmap = Bitmap.FromStream( file.InputStream );
   // valid image stream
}
catch 
{
    // not an image
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-12-27T14:00:57.727

在静态助手类中使用：

```
public static bool IsImage(HttpPostedFileBase postedFile)
    {
        try  {
              using (var bitmap = new System.Drawing.Bitmap(postedFile.InputStream))
                    {                        
                            return !bitmap.Size.IsEmpty;
                    }
                }
                catch (Exception)
                {
                    return false;
                }
            }
    } 
```

在 ASP.NET MVC 视图模型中使用：

```
public class UploadFileViewModel
    {
        public HttpPostedFileBase postedFile { get; set; }

        public  bool IsImage()
        {
            try  {
                  using (var bitmap = new System.Drawing.Bitmap(this.postedFile.InputStream))
                        {                        
                                return !bitmap.Size.IsEmpty;
                        }
                    }
                    catch (Exception)
                    {
                        return false;
                    }
                }
        }
    } 
```

此示例检查图像是否为真实图像，您可以对其进行修改和转换。

以六升V8为例，它吃内存，所以当你真的想知道这个图像是什么时，应该使用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-30T11:55:37.100

以更清洁的方式实施，

```
public static class FileExtensions
{
    private static readonly IDictionary<string, string> ImageMimeDictionary = new Dictionary<string, string>
    {
        { ".bmp", "image/bmp" },
        { ".dib", "image/bmp" },
        { ".gif", "image/gif" },
        { ".svg", "image/svg+xml" },
        { ".jpe", "image/jpeg" },
        { ".jpeg", "image/jpeg" },
        { ".jpg", "image/jpeg" },
        { ".png", "image/png" },
        { ".pnz", "image/png" }
    };

    public static bool IsImage(this string file)
    {
        if (string.IsNullOrEmpty(file))
        {
            throw new ArgumentNullException(nameof(file));
        }

        var extension = Path.GetExtension(file);
        return ImageMimeDictionary.ContainsKey(extension.ToLower());
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-02T09:39:06.693

它没有回答如何检查上传的文件是否是服务器上的图像的问题。

但是，最初的问题陈述似乎更多的是用户不小心上传了错误的文件。

在这种情况下，一个非常简单的解决方案是[在输入元素上设置接受属性](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/accept)。

```
<input type="file" id="file" accept="image/*"> 
```

关于信任用户输入的常见警告适用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-08T19:15:54.520

For `IFormFile`：它基于一个逻辑，如果.NET可以将文件视为有效图像并且可以进一步处理，那么它就是有效图像。

```
using System.Drawing;

    private bool IsValidImageFile(IFormFile file) {

      try {
        var isValidImage = Image.FromStream(file.OpenReadStream());
      } catch {
        return false;
      }

      return true;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-16T13:42:42.493

作为第一步，您应该针对该`ContentType`属性在可接受的 MIME 类型周围形成一个白名单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-02T02:40:02.820

```
public static ImageFormat GetRawImageFormat(byte[] fileBytes)
{
    using (var ms = new MemoryStream(fileBytes))
    {
        var fileImage = Image.FromStream(ms);
        return fileImage.RawFormat;
    }
} 
```

用法：

```
if (GetRawImageFormat(fileBytes).IsIn(ImageFormat.Jpeg, ImageFormat.Png, ImageFormat.Gif))
    {
        //do somthing
    } 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-11-14T06:57:51.953

在服务器端与内容类型进行比较，如果它与您所需的上传格式匹配，则继续，否则返回错误消息

# c# - C# XmlTextReader 不读取所有元素和属性

> ID：11063903
> 
> 赞同：0
> 
> 时间：2012-06-16T13:37:31.403
> 
> 标签：c#, xml, winforms

我正在尝试从 xml 文件中读取数据并将其显示在文本框中，但它仅显示最后一个元素/属性，在本例中为“耐力”。这是我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<Character>
  <Name
   Name="Test" />
   <Age
   Age="19" />
  <Class
  Class="Necromancer" />
  <Strength
  Strength="1" />
  <Dexterity
  Dexterity="2" />
  <Intelligence
  Intelligence="3" />
  <Speed
  Speed="4" />
  <Endurance
  Endurance="5" />
</Character> 
```

我的读者代码如下

```
XmlTextReader reader = new XmlTextReader(openFileDialog1.FileName);
while (reader.Read())
{
   if (reader.HasAttributes)
   {
     for (int i = 0; i < reader.AttributeCount; i++)
     {
       reader.MoveToAttribute(i);
       switch (reader.Name)
       {
         case "Name":
             DisplayBox.Text = "Name: " + reader.Value + "\n";
             break;
         case "Age":
             DisplayBox.Text = "Age: " + reader.Value + "\n";
             break;
         case "Class":
             DisplayBox.Text = "Class: " + reader.Value + "\n";
             break;
         case "Strength":
             DisplayBox.Text = "Strength: " + reader.Value + "\n";
             break;
         case "Dexterity":
             DisplayBox.Text = "Dexterity: " + reader.Value + "\n";
             break;
         case "Intelligence":
             DisplayBox.Text = "Intelligence: " + reader.Value + "\n";
             break;
         case "Speed":
             DisplayBox.Text = "Speed: " + reader.Value + "\n";
             break;
         case "Endurance":
             DisplayBox.Text = "Endurance: " + reader.Value + "\n";
             break;
         default:
             break;
       }
     }
         reader.MoveToElement();
  }
} 
```

因此，每当我单击按钮显示数据时，文本框中唯一显示的是 Endurance: 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:41:44.880

看起来你需要更换

```
DisplayBox.Text = 
```

和

```
DisplayBox.Text += 
```

此外，所有切换条件都非常相似。因此，您可以使用以下内容：

```
string[] supportedAttributes = new []{"Name", "Age", "Class", "Strength", "Dexterity", "Intelligence", "Speed", "Endurance"};
while (reader.Read())
{
   if (reader.HasAttributes)
   {
     for (int i = 0; i < reader.AttributeCount; i++)
     {
       reader.MoveToAttribute(i);
       if(supportedAttributes.Any(a=>a == reader.Name))
           DisplayBox.Text += string.Format("{0}: {1} \n", reader.Name, reader.Value);
     }
     reader.MoveToElement();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T14:23:34.347

我没有直接回答您的问题，而是提供了另一种编写代码的方法。

特别是该`switch`语句会重复自身，并且可以删除重复。

还使用`switch`语句将您的代码锁定为特定值。您不能动态更改要使用的属性名称列表 - 例如，可能用于不同的语言。

这是我的代码：

```
var xd = XDocument.Load(openFileDialog1.FileName);

var query =
    from xe in xd.Descendants()
    from xa in xe.Attributes()
    let r = map(xa.Name.ToString(), xa.Value)
    where r != null
    select r;

DisplayBox.Text = String.Join("", query); 
```

现在唯一缺少的是`map`函数的定义。这是代码变得有点前卫的地方。

首先从您要查找的名称开始：

```
var names = new []
{
    "Name", "Age", "Class",
    "Strength", "Dexterity", "Intelligence",
    "Speed", "Endurance", 
}; 
```

现在我们只需要定义几个负责映射的变量：

```
var nameMap =
    names
        .ToDictionary(
            n => n,
            n => (Func<string, string>)
                (t => String.Format("{0}: {1}\n", n, t)));

Func<string, string, string> map =
    (n, v) =>
        nameMap.ContainsKey(n) ? nameMap[n](v) : null; 
```

这有点棘手，但它很好地将名称列表与最终查询分开以获取您的数据，并使您的代码对于需要维护的部分保持清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:41:33.227

代替

```
 DisplayBox.Text = 
```

你应该使用喜欢

```
 DisplayBox.Text += 
```

它应该做所要求的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T13:41:47.360

目前，您正在遍历所有节点。

finally 循环在最终节点处停止。那不过是耐力节点。

所以你会看到结果是耐力。

您需要检查特定条件，如果满足，则需要退出循环。

或者

如果您想在文本框中显示所有值，请遵循**@Kostya**和**@Furqan 的**答案。

# c++ - “抛出”使程序崩溃，但编译正常

> ID：11063906
> 
> 赞同：2
> 
> 时间：2012-06-16T13:38:05.330
> 
> 标签：c++, gcc, compiler-construction

我的程序编译得很好，但是每次调用 throw（不在 try...catch 块内）时都会崩溃。

以下是用于项目中所有文件的命令之类的参数：

`mingw32-g++.exe -fexceptions -DWIN32 -D_WINDOWS -D_MBCS -DNO_SOCKLEN_T -DDONTUSEMEMMANAGER -Wall -g -W -fexceptions -DDEBUG`

（我知道 Wall 使 W 变得不必要，并且我有两次 -fexceptions 。）

编辑：我知道这种行为实际上没有任何问题。问题是，它曾经可以工作，也就是程序不会崩溃。但是几天前我对一些文件进行了更改，再次编译并突然崩溃了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T13:41:46.207

好吧，这是预期的行为。标准说[except.handle]：

> 如果没有找到匹配的处理程序，则调用函数 std::terminate()；[...]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:40:08.563

这称为未处理的异常。预期的行为是程序应该退出。

# android - 为什么透明度在 Android 2.3.5 上的 LibGdx 中不起作用？

> ID：11063910
> 
> 赞同：3
> 
> 时间：2012-06-16T13:38:26.770
> 
> 标签：android, opengl-es-2.0, textures, libgdx, alpha-transparency

我在开发 3D Android 应用程序时遇到了麻烦。我在回答[我自己的问题](https://stackoverflow.com/questions/10980702/libgdx-gles2-0-cube-texel-stretching/10993947#10993947)时简要提到了它，但我一直无法弄清楚为什么我不能从 .png 图像中获得透明度。

纹理是透明的，我在 Windows 上的 OpenGL3+ 框架中进行了检查，它们在正确的部分显示为透明的。

我的（简单占位符）片段着色器代码以：

```
vec4 finalColor = ambient + diffuse;
finalColor.a = colorMap.a;
gl_FragColor = finalColor; 
```

我试过`finalColor.a = 0.1;`哪个不起作用。

我已将此添加到我的代码中，但无济于事：

```
Gdx.gl20.glEnable(GL20.GL_DEPTH_TEST);      
Gdx.gl20.glBlendFunc(GL20.GL_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);
Gdx.gl20.glEnable(GL20.GL_BLEND); 
```

我什至检查并更改了：

```
AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
cfg.r = cfg.g = cfg.b = cfg.a = 8; 
```

我认为这是每个通道的位数。

对此的任何帮助将不胜感激，我只是希望我没有忽略任何事情。这不是一个大问题，我或多或少可以在没有透明度的情况下完成我的项目，但我真的很想知道为什么我不能让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T18:05:16.563

`GL_ALPHA`不是`glBlendFunc`. 您要么想要`GL_SRC_ALPHA`（很可能），要么`GL_DST_ALPHA`.

`glGetError`在这里对你有帮助，你应该开始使用它！

[http://www.khronos.org/opengles/documentation/opengles1_0/html/glBlendFunc.html](http://www.khronos.org/opengles/documentation/opengles1_0/html/glBlendFunc.html)

# hibernate - Hibernate + HSQDL 初学者

> ID：11063916
> 
> 赞同：0
> 
> 时间：2012-06-16T13:39:05.753
> 
> 标签：hibernate, hsqldb

参考这些教程： [教程 1](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-setup)

[教程 2](http://www.vaannila.com/hibernate/hibernate-example/hibernate-tools-1.html)

这些都不是最新的。因此，如果我修复了一个错误，我就会得到下一个错误。也许有人可以帮忙。

pom.xml，我看了好几遍，但也许有一个库仍然不是最新的或被遗忘了。

```
 <project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<modelVersion>4.0.0</modelVersion>

<groupId>org.hibernate.tutorials</groupId>
<artifactId>hibernate-tutorial</artifactId>
<version>1.0.0-SNAPSHOT</version>
<name>First Hibernate Tutorial</name>

<build>
     <!-- we dont want the version to be part of the generated war file name -->
     <finalName>${project.artifactId}</finalName>
</build>

<dependencies>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.3.Final</version>
    </dependency>

    <!-- Because this is a web app, we also have a dependency on the servlet api. -->
   <dependency>
        <groupId>org.apache.tomcat</groupId>
<artifactId>servlet-api</artifactId>
<version>6.0.35</version>
  </dependency>

    <!-- Hibernate uses slf4j for logging, for our purposes here use the simple backend -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.4</version>
    </dependency>

    <!-- Hibernate gives you a choice of bytecode providers between cglib and javassist -->
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>

    <!-- HSQLDB -->
      <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.0.0</version>
    </dependency>

</dependencies> 
```

休眠.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
 <hibernate-configuration>
 <session-factory>
    <property name="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</property>
    <property name="hibernate.connection.url">jdbc:hsqldb:hsql://localhost</property>
    <property name="hibernate.connection.username">sa</property>

    <property name="connection.password"></property>

 <property name="connection.pool_size">1</property>

 <property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property>

    <!-- Enable Hibernate's automatic session context management -->
    <property name="current_session_context_class">thread</property>

 <property name="show_sql">true</property>

 <property name="hbm2ddl.auto">update</property>

 <mapping resource="org/hibernate/tutorial/domain/Event.hbm.xml"/>
</session-factory>
 </hibernate-configuration> 
```

主要的

```
 package org.hibernate.tutorial.domain;

 import java.util.Date;

 import org.hibernate.Session;
 import org.hibernate.tutorial.util.HibernateUtil;

 public class EventManager {

public static void main(String[] args) {
    EventManager mgr = new EventManager();

    Session session = HibernateUtil.buildSessionFactory().getCurrentSession();
    session.beginTransaction();

    Event theEvent = new Event();
    theEvent.setTitle("My Event");
    theEvent.setDate(new Date());
    session.save(theEvent);

    session.getTransaction().commit();

    session.close();
  }
 } 
```

Util，我做了一些改变

```
 import org.hibernate.SessionFactory;
 import org.hibernate.cfg.Configuration;
 import org.hibernate.service.ServiceRegistry;
 import org.hibernate.service.ServiceRegistryBuilder;

 public class HibernateUtil {
private static SessionFactory sessionFactory;
private static ServiceRegistry serviceRegistry;

public static SessionFactory buildSessionFactory() {
    try {
        // Create the SessionFactory from hibernate.cfg.xml
        Configuration configuration = new Configuration();
        configuration.configure();
        serviceRegistry = new      ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();     
        return new Configuration().configure().buildSessionFactory(serviceRegistry);
    } catch (Throwable ex) {
        // Make sure you log the exception, as it might be swallowed
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
}
 } 
```

我希望这是正确的方法：在我开始我的主要工作之前，我通过以下方式启动 hsqldb 服务器

```
 mvn exec:java -Dexec.mainClass="org.hsqldb.Server" -Dexec.args="file:target/data/tutorial" 
```

然后我开始我的主要方法：

```
 mvn exec:java -Dexec.mainClass="org.hibernate.tutorial.EventManager" 
```

我的最后一个错误是：

org.hibernate.SessionException：会话已经关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T16:58:42.443

由于没有将会话绑定到会话上下文的机制，您应该只使用 openSession() 来获取新会话。

如果您开始以更严肃的方式使用 Hibernate，您可以指定会话上下文以确保可以从 getCurrentSession() 获取会话

# sql-server - 按顺序执行 SQL Server 存储过程

> ID：11063923
> 
> 赞同：5
> 
> 时间：2012-06-16T13:40:06.423
> 
> 标签：sql-server, stored-procedures

我有一些关于在 SQL Server 中执行存储过程的案例。

也许这是不寻常的做法，但我已经在表中存储了存储过程名称的列表。表格大概是这样的（我们称之为`TableFoo`）：

```
| SPId |  SPName  |
-------------------
|  1   | spr_name1|
|  2   | spr_name2|
|  3   | spr_name3|
|  4   | spr_name4|
... 
```

我想调用/执行从查询结果生成的存储过程列表，`TableFoo`查询大概是这样的：

```
SELECT SPName 
FROM TableFoo 
WHERE SPId IN (1, 2, 3) 
```

我想每行按顺序执行存储过程

我的意思是我想这样做:)

```
SELECT EXEC(SpName)
FROM TableFoo
WHERE SPId IN (1, 2, 3) 
```

但这不起作用

除了使用`CURSOR`?

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T14:08:19.633

使用字符串聚合构建一个调用所有过程的单个批处理，然后运行该批处理。有许多字符串聚合连接方法，但最有效的方法之一是[XML 黑盒方法](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/#_Toc205129486)：

```
create table #test (spid int, sproc sysname);
insert into #test (spid, sproc) values (1, N'sproc1')
    , (2, N'sproc2')
    , (3, N'sproc3')
    , (4, N'sproc4')
    , (5, N'sproc5')
    , (6, N'sproc6');

declare @sql nvarchar(max);
set @sql = (select N'exec ' + sproc +N';
' from #test 
where spid in (1,3,5) for XML path(''), type).value(N'.', 'nvarchar(max)');

exec sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:48:22.047

我也有另一种选择

```
DECLARE @SQL VARCHAR(8000)  

SELECT @SQL=''  

SELECT @SQL = @SQL+ 'Exec ' + b.SPname
FROM TbFoo
WHERE SpId IN (1,2,3)

EXEC(@SQL) 
```

但它足够好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T13:56:16.523

您不能在选择查询中执行。游标可以使您满足您的需求，但是，它似乎过于复杂。如果您正在开发一个应用程序，您可能希望将此逻辑放在架构中更高的位置。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T14:11:16.153

```
 Declare @SPCall table
 (id int,SP varchar(20))

 Insert into @SPCall
 values
 (1,'sp1'),(2,'sp3'),(3,'sp3')

  Declare @spName varchar(20)
  Declare @value int 
  set @value =1

  While @value<=(Select COUNT(*) from @SPCall)
  BEGIN
  Set @spName=(select Sp from @SPCall where id=@value)
  exec @spName 
  set @value=@value +1
  END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T14:20:44.347

首先，这不是一个好方法。但是，如果您坚持采用这种方式，您可以在存储过程中使用动态 sql。将所有 SP 名称的列表转储到临时表中，并在该表上使用循环将每个 sp 名称传递到动态 sql 查询中。可以使用 EXECUTE 命令或 sp_executesql 语句来执行动态构建的 T-SQL 语句。我建议你选择后者，即 sp_executesql。

使用 sp_executesql 的基本语法：

```
sp_executesql [@SQLStatement],[@ParameterDefinitionList],[@ParameterValueList] 
```

@ParameterDefinition 用于在执行 SQL 字符串之前指定参数格式。你可以在 google 上找到很多这方面的例子。希望有帮助。

# c# - 如何使用 ApplicationSettingsBase 将自定义类保存到用户设置？

> ID：11063928
> 
> 赞同：7
> 
> 时间：2012-06-16T13:40:28.853
> 
> 标签：c#, settings, applicationsettingsbase

我正在尝试将自定义类保存到用户设置但没有太大成功。

我在 Visual Studio 2010 中使用 Target framework =“.NET Framework 4”创建了一个测试项目。主窗体有两个文本框，用于显示和编辑纯测试字符串以及自定义类中的“标题”字段；与两个按钮一起加载和保存设置。

最后，我添加了两个设置“TestString”（纯字符串值）和 TestData（MyDataClass 的类型 - 我在项目的 Properties.Settings 选项卡中通过从 Type 下拉列表中选择“Browse...”然后手动输入“MyUserSettingsTest .MyDataClass”在“选定类型”框中，因为它最初没有出现在可用类型列表中，但随后出现了。）

在启动应用程序并单击 LoadSettings 时，事件处理程序会加载纯字符串和 MyData，或者，如果失败，则创建 MyDataClass 的新实例。然后我可以在表单上编辑纯字符串和测试数据标题，然后单击 SaveSettings。如果我随后重新编辑这些值，则再次单击 LoadSettings，最后保存的值将按预期恢复为两个值。到目前为止，一切都很好。

**问题是在退出应用程序并重新启动它时，纯测试字符串恢复正常，但 MyData 对象不是！显然，代码将 MyData 持久化到内存中，但不是永久存储？**

主要表单代码为：

```
using System;
using System.Windows.Forms;

namespace MyUserSettingsTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public MyDataClass MyData {get;set;}

        private void loadSettingsButton_Click(object sender, EventArgs e)
        {
            this.myTextBox.Text = Properties.Settings.Default.TestString;
            this.MyData = Properties.Settings.Default.TestData;

            if (this.MyData == null)
            {
                this.MyData = new MyDataClass() { ID = 1, Title = "Default New Title" };
            }

            this.myDataTitleTextBox.Text = this.MyData.Title;
        }

        private void saveSettingsButton_Click(object sender, EventArgs e)
        {
            this.MyData.Title = this.myDataTitleTextBox.Text;

            Properties.Settings.Default.TestString = this.myTextBox.Text;
            Properties.Settings.Default.TestData = this.MyData;
            Properties.Settings.Default.Save();
        }
    }
} 
```

我的测试数据类代码是：

```
using System.Configuration;

namespace MyUserSettingsTest
{
    public class MyDataClass : ApplicationSettingsBase
    {
        public MyDataClass()
        {
        }

        private int _id;
        private string _title;

        [UserScopedSetting()]
        [SettingsSerializeAs(SettingsSerializeAs.Xml)] 
        public int ID
        {
            get { return _id; }
            set { _id = value; }
        }

        [UserScopedSetting()]
        [SettingsSerializeAs(SettingsSerializeAs.Xml)] 
        public string Title
        {
            get { return _title; }
            set { _title = value; }
        }
    }
} 
```

我不知道它是否有帮助，但自动生成的 app.config 文件（其中包含 TestString 但不是 TestData 的设置！！？）是：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="MyUserSettingsTest.Properties.Settings"     type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false"/>
        </sectionGroup>
    </configSections>
    <userSettings>
        <MyUserSettingsTest.Properties.Settings>
            <setting name="TestString" serializeAs="String">
                <value/>
            </setting>
        </MyUserSettingsTest.Properties.Settings>
    </userSettings>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

自动生成的 Settings.Designer.cs 文件是：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace MyUserSettingsTest.Properties {

[global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
[global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

    private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

    public static Settings Default {
        get {
            return defaultInstance;
        }
    }

    [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Configuration.DefaultSettingValueAttribute("")]
    public string TestString {
        get {
            return ((string)(this["TestString"]));
        }
        set {
            this["TestString"] = value;
        }
    }

    [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public global::MyUserSettingsTest.MyDataClass TestData {
        get {
            return ((global::MyUserSettingsTest.MyDataClass)(this["TestData"]));
        }
        set {
            this["TestData"] = value;
        }
    }
}
} 
```

请谁能告诉我我做错了什么或者我需要做些什么才能让我的自定义类正确地坚持用户设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-13T23:14:36.693

将您的自定义对象另存为序列化字符串。然后你只需要存储一个字符串。例如，使用 Json .NET JsonConverter 序列化和反序列化对象。

```
Properties.Settings.Default.TestData = JsonConvert.SerializeObject<MyDataClass>(this.MyData); 
```

然后你可以像这样读回来

```
this.MyData = JsonConvert.DeserializeObject<MyDataClass>(Properties.Settings.Default.TestData); 
```

# android - Adobe Air android 移动应用程序未启动

> ID：11063930
> 
> 赞同：1
> 
> 时间：2012-06-16T13:41:11.210
> 
> 标签：android, apache-flex, air

我正在尝试在 HTC Wildfire S 上使用 flex 4.6 和 air 3.3 制作的空白应用程序，一旦应用程序启动，我就会收到消息说，应用程序已意外停止。

大约一个月前，一切正常（大约一个月或 2 个月前，使用 air 3.1 和 android 2.3.3），我能够在我的手机上安装每个用 flex 制作的应用程序。

现在我不确定是什么导致了问题，无论是 adobe air 更新还是 HTC wildfire rom 更新，都将我的手机从 android 2.3.3 更新到了 android 2.3.5。

虽然我已经尝试过两种方法，但我尝试使用旧版本的 adobe air 3.1 做一个空白应用程序，但它仍然没有启动，我也尝试将我的手机从 android 2.3.5 降级到 android 2.3.3，但仍然没有在职的。

我现在完全被困住了，现在在哪里寻找。

我真的需要你的帮助来解决这个问题，因为我花了几天时间在谷歌上搜索并寻找解决方案并尝试降级手机。

希望有人能帮助我。

==========以下是我尝试启动应用程序时来自Android手机的错误日志============

```
06-17 03:48:18.045: W/dalvikvm(2631): No implementation found for native Lcom/adobe/air/AIRWindowSurfaceView;.nativeOnFormatChangeListener (I)V
06-17 03:48:18.065: D/AndroidRuntime(2631): Shutting down VM
06-17 03:48:18.065: W/dalvikvm(2631): threadid=1: thread exiting with uncaught exception (group=0x400205a0)
06-17 03:48:18.065: E/AndroidRuntime(2631): FATAL EXCEPTION: main
06-17 03:48:18.065: E/AndroidRuntime(2631): java.lang.UnsatisfiedLinkError: nativeOnFormatChangeListener
06-17 03:48:18.065: E/AndroidRuntime(2631):     at com.adobe.air.AIRWindowSurfaceView.nativeOnFormatChangeListener(Native Method)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at com.adobe.air.AIRWindowSurfaceView.surfaceChanged(AIRWindowSurfaceView.java:683)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.SurfaceView.updateWindow(SurfaceView.java:557)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.SurfaceView.dispatchDraw(SurfaceView.java:348)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.View.draw(View.java:6973)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.SurfaceView.draw(SurfaceView.java:334)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.View.draw(View.java:6973)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1949)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewRoot.draw(ViewRoot.java:1600)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1321)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1957)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.os.Looper.loop(Looper.java:143)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at android.app.ActivityThread.main(ActivityThread.java:4268)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at java.lang.reflect.Method.invokeNative(Native Method)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at java.lang.reflect.Method.invoke(Method.java:507)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-17 03:48:18.065: E/AndroidRuntime(2631):     at dalvik.system.NativeStart.main(Native Method)
06-17 03:48:18.085: W/ActivityManager(118):   Force finishing activity air.testapp.debug/.AppEntry
06-17 03:48:18.585: W/ActivityManager(118): Activity pause timeout for HistoryRecord{4056ee18 air.testapp.debug/.AppEntry} 
```

# javascript - 将您的 Javascript 分成单独的文件是否会对性能产生影响？

> ID：11063933
> 
> 赞同：3
> 
> 时间：2012-06-16T13:41:31.307
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我正在用 jQuery 和 jQuery Mobile 编写一个 PhoneGap(Cordova) 应用程序。

我是一个菜鸟，所以为了简单起见，我喜欢将我的脚本保存在单独的 .js 文件中，并根据功能大致在它们之间划分功能。

(1) 这种方法有性能影响吗？

(2) 是否有我不知道的程序化效果？

(3) 由于它是一个 Cordova 应用程序，所有文件都将被预先打包，但是当您谈论一个经典访问的网站时，这是否会变成一个更好/更坏的想法？

谢谢！

* * *

## 编辑

自从提出这个问题后，我发现了这篇博文。[http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)。它解决了多个 HTTP 请求的问题和相关的性能问题，尽管是在图像的上下文中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T13:47:54.673

1.  是的：

    *   加载几个小文件比加载一个大文件需要更长的时间。
    *   脚本按顺序执行，因此对于多个文件，您有一个加载 - 运行 - 加载 - 运行循环，其中每个文件在 previos 运行之前无法加载。
2.  脚本按顺序运行，因此如果一个依赖于另一个，它们必须按正确的顺序运行。

3.  如果是一个包加载的话，网络传输时间是一样的，但是加载脚本到页面的过程还是会比较复杂，有几个脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:45:36.297

1.  通常它不会对性能产生太大影响，但会降低数量。从客户端浏览器生成的请求。
2.  将 js 保存在单独的文件中没有编程效果。
3.  对于经典网站，最好保持您使用的方式。

据我了解，这是一个设计问题，您需要在分解/累积脚本之间保持平衡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T13:48:04.457

当由客户端机器执行时，它不会有明显的影响。但是，拥有大量单独的 JS 文件会对用户感知的加载时间产生显着影响。这是所谓的“页面重量”的一个方面。

每个文件都需要一个单独的请求来查找然后下载文件。对于小型或低流量站点，这无关紧要。但随着使用量的增加，它会变得非常明显。

# c# - 演员表 to IList ? I created a generic function that retreives a JSON and parses it: public IList RetrieveView(string result) { JavaScriptSerializer ser = new JavaScriptSeria 问问题 问问题 2012-06-16T13:41:49.637 2178 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I created a generic function that retreives a JSON and parses it: public IList RetrieveView(string result) { JavaScriptSerializer ser = new JavaScriptSerializer(); IList values = ser.Deserialize< IList >(result); return values; } The problem that i have alot of Classes that uses this. for example when i try to use this: IList <receipt>receipts = (IList<receipt>)RetrieveView(result); I get InvalidCastException Unable to cast object of type 'System.Collections.Generic.List[System.Object]' to type 'System.Collections.Generic.IList[Receipt]'. Anyway to keep my function Generic and be able to cast it to all of my classes/models? Make your function generic: public IList <t>RetrieveView<t>(string result) { JavaScriptSerializer ser = new JavaScriptSerializer(); IList <t>values = ser.Deserialize< IList <t>>(result); return values; } c#jsonobjectcastingjavascriptserializer 4 2 回答 2 This answer is useful 6 使您的功能通用： public IList <t>RetrieveView<t>(string result) { JavaScriptSerializer ser = new JavaScriptSerializer(); IList <t>values = ser.Deserialize< IList <t>>(result); return values; } 于 2012-06-16T13:43:43.427 回答 This answer is useful 4 If the object is deserialized as Receipt, you could use Enumerable extensions. IList <receipt>receipts = RetrieveView(result).Cast<receipt>().ToList(); 于 2012-06-16T13:43:49.620 回答 Related 1 macos - Mac OSX(ML) 中 zsh 上的“预期条件：<” 1 c# - 在 .NET 中使用消息队列服务总线重新分级的问题 1 extjs4 - extjs 4 - 获取 VS 选择 V S 查询 2 php - 为什么 htmlentities 功能无法正常工作？ 4 android - ListView来自android中的Sqlite 2 sox - sox 用于将 flac 文件转换为 320 位 mp3 4 vb.net - 单击 VB.net 中的“添加”按钮后向文本框添加值 1 c# - 获取 IsolatedStorageFile 的 MusicProperties/metadata 1 lotus-notes - 在 Lotus Notes Web 中附加多个文件 1 node.js - 使用 express-namespace 调用两次中间件的 Express 请求 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11063940
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, json, object, casting, javascriptserializer

I created a generic function that retreives a JSON and parses it:

```
 public IList<Object> RetrieveView(string result)
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();

        IList<Object> values = ser.Deserialize< IList<Object> >(result);

        return values;
    } 
```

The problem that i have alot of Classes that uses this. for example when i try to use this:

```
IList<Receipt> receipts = (IList<Receipt>)RetrieveView(result); 
```

I get `InvalidCastException` `Unable to cast object of type 'System.Collections.Generic.List[System.Object]' to type 'System.Collections.Generic.IList[Receipt]'.`

Anyway to keep my function Generic and be able to cast it to all of my classes/models?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T13:43:43.427

使您的功能通用：

```
 public IList<T> RetrieveView<T>(string result)
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();

        IList<T> values = ser.Deserialize< IList<T> >(result);

        return values;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:43:49.620

If the object is deserialized as Receipt, you could use Enumerable extensions.

```
IList<Receipt> receipts = RetrieveView(result).Cast<Receipt>().ToList(); 
```</receipt></receipt></t></t></t></t></t></t></t></t></receipt></receipt>

# javascript - 用于在迷宫中绘制连接墙壁的 Javascript 函数？

> ID：11063942
> 
> 赞同：1
> 
> 时间：2012-06-16T13:42:25.707
> 
> 标签：javascript, function, svg

我有一个问题，需要简化代码来表达它。简而言之，我需要用 Javascript 构建代码来绘制连接的 SVG 线条。简单的例子：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >

<line x1="50" y1="50" x2="200" y2="50" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />
<line x1="100" y1="100" x2="400" y2="100" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />
<line x1="300" y1="300" x2="200" y2="300" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />
<line x1="100" y1="50" x2="100" y2="400" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />
<line x1="300" y1="100" x2="300" y2="300" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />
<line x1="200" y1="300" x2="200" y2="200" stroke="steelblue" stroke-width="20" onclick="fillWall(evt)" />

<script type="text/javascript"> 
<![CDATA[
function fillWall(evt) {
  var tgt=evt.target;
  tgt.setAttributeNS(null, "stroke", "firebrick");
}
]]>
</script>
</svg> 
```

这是几堵墙的迷宫，当你点击一些它会改变颜色时，所以我需要一键完成所有连接的绘制，无论在哪个墙上点击。在全尺寸范围内，这些墙几乎有数千个，有些是相连的，有些没有。我尝试学习递归函数，但很容易超出堆栈大小。请帮忙，我会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:32:11.227

我的伪代码版本：

```
function doWall(I_oWall) {
    if I_oWall.painted then return;
    I_oWall.paint();
    for each wall in walls
        if I_oWall.isAdjacentTo(wall) then
            doWall(wall);
        end if
    loop
} 
```

抱歉，我知道这不是一个完整和完整的答案，但我认为它真的会帮助您解决问题。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T16:54:23.330

故意有一个功能：与[getBBox](http://www.w3.org/TR/SVG/types.html#InterfaceSVGLocatable)配对的[getIntersectionList](http://dev.w3.org/SVG/profiles/1.1F2/publish/struct.html#__svg__SVGSVGElement__getIntersectionList) 可以帮助您解决问题。伪代码：

```
fillWall(evt) {
 fillConnected(evt.target, [])
}
fillConnected(node, filled) {
 if (!filled.contains(node)) {
   fill(node);
   filled.append(node);
   foreach(n in document.getIntersectionList(node.getBBox()))
    fillConnected(n, filled)
 }
} 
```

我将尝试使用 jsFiddle 编写实际代码，稍后将发布地址...

**编辑**看到[这个](http://jsfiddle.net/NBBaF/3/)小提琴，但似乎 Firefox 仍然没有实现所需的 getIntersectionList。然后，如果我们必须自己制作，最好缓存列表，因为这将是一种相当昂贵的方法......

**编辑**我已经修改了仅在本地文件上工作的小提琴代码，现在在 Chrome 中运行良好，但是在墙壁刚刚接触的地方，getIntersectionList 不起作用。所以无论如何我们都必须实现我们自己的版本......稍后见......

**编辑**好，最后小提琴似乎起作用了。请注意，墙壁必须对其端点进行排序（x2 >= x1，y2 >= y1），您可以在墙壁上看到颜色为黄色（已校正）和绿色（仍然错误）的排序效果。

# php - 无法在friendfeed和feedage等网站提交feed

> ID：11063944
> 
> 赞同：0
> 
> 时间：2012-06-16T13:42:47.903
> 
> 标签：php, xml, wordpress, curl, rss

我正在尝试在friendfeed和feedage之类的网站上提交此提要“http://extremesportsblog.com/feed/”，但它们显示404之类的错误并且无法下载提要。

我已经使用 feedvalidator.org 验证了我的提要并且它已经过验证。

我也在使用 wordpress，提要的 xml 文件是由 rss 插件动态生成的。

那么，有什么想法吗？？帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T02:14:00.610

多么有趣的问题。

首先，我们尝试使用您的提要`wget`（可以是这些提要站点为该任务选择的工具）。不幸的是，这导致了 404。

```
~  wget http://extremesportsblog.com/feed/ 
--2012-06-26 22:37:47--  http://extremesportsblog.com/feed/
Resolving extremesportsblog.com (extremesportsblog.com)... 174.120.155.106
Connecting to extremesportsblog.com (extremesportsblog.com)|174.120.155.106|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2012-06-26 22:37:48 ERROR 404: Not Found. 
```

但是，我们已经成功使用常规浏览器甚至`curl`.

```
~ curl  http://extremesportsblog.com/feed/  -v
* About to connect() to extremesportsblog.com port 80 (#0)
*   Trying 174.120.155.106... connected
> GET /feed/ HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4  libidn/1.23 librtmp/2.3
> Host: extremesportsblog.com
> Accept: */*
> 
< HTTP/1.1 200 OK 
```

它们之间唯一真正的区别是`user-agent`字符串。那么，如果我们`wget`用另一个`user-agent`字符串再试一次会发生什么？

```
wget -U "Y U HATE ME" http://extremesportsblog.com/feed/  -v 
--2012-06-26 22:45:05--  http://extremesportsblog.com/feed/
Resolving extremesportsblog.com (extremesportsblog.com)... 174.120.155.106
Connecting to extremesportsblog.com (extremesportsblog.com)|174.120.155.106|:80... connected.
HTTP request sent, awaiting response... 200 OK 
```

看来您的 Apache 并没有爱上 wget ;)。如果 Apache 区分用户代理，我建议您查看配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T19:56:45.980

您的 .htaccess 可能存在一些问题..虽然不确定..但这是您可以做的..

转到[http://feedburner.google.com](http://feedburner.google.com)并在那里刻录您的提要，它会提供另一个提要 URL。就用它吧。

希望有帮助。尝试使用 feedburner 的提要 URL，它起作用了 ;) [http://feeds.feedburner.com/extremesportsblog/LIXh](http://feeds.feedburner.com/extremesportsblog/LIXh)

希望我得到+50 ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:07:03.387

看起来您的提要类型是 Atom，因此可能是 Friendfeed 和 Feedage 错误地尝试将其解释为 RSS。如需快速测试，请尝试[http://atom2rss.semiologic.com/](http://atom2rss.semiologic.com/)，这是一个在线 atom 到 rss 转换器，看看发送 RSS 格式的提要是否能解决问题。

此外，在[http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fextremesportsblog.com%2Ffeed%2F](http://feedvalidator.org/check.cgi?url=http%3A%2F%2Fextremesportsblog.com%2Ffeed%2F)上，您会在第 33 行收到对象标签的警告。尝试暂时删除它，看看它是否会影响朋友馈送和/或馈送。

另请查看[http://www.intertwingly.net/wiki/pie/Rss20AndAtom10Compared](http://www.intertwingly.net/wiki/pie/Rss20AndAtom10Compared)以快速了解/参考 RSS 和 Atom 之间的差异。*特别是在基本形式中*提到'Atom 1.0 的部分得到了广泛支持。*许多聚合器在与 RSS 2.0 提要结构不太相似的提要上失败。*'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:28:30.130

尝试将“application/atom+xml”设置为内容类型，而不是 text/xml

# actionscript-3 - 如何在以下子组件中调用函数：a）另一个子组件 b）父组件，反之亦然？

> ID：11063950
> 
> 赞同：0
> 
> 时间：2012-06-16T13:43:17.283
> 
> 标签：actionscript-3, apache-flex, adobe

我有一个父组件，比如 P，它有功能，比如 Pfunc。我还有两个子组件，比如 C1 和 C2，以及它们各自的功能，比如 C1func 和 C2func。

如何从任何组件调用任何函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:06:13.433

> 如何从任何组件调用任何函数？

从封装的角度来看：

您永远不能调用任何组件中的任何函数。要与父组件“通信”，您应该使用事件分派。向下沟通；你应该调用一个函数或设置一个属性。你不应该横向交流。

如果你想让 P 执行 PFunc，那么只需执行它：

```
this.PFunc(); 
```

如果你想让 P 执行 C1Func，并且 C1Func 是公共的，那么你可以在 P 内部做这样的事情：

```
C1Instance.C1Func() 
```

如果你想让 P 执行 C2Func，并且 C2Func 是公共的，那么你可以在 P 内部做这样的事情：

```
C2Instance.C2Func() 
```

如果你想让 C1 或 C2 调用 PFunc，那么你应该像这样调度一个事件：

```
dispatchEvent(new Event('callPFunc')); 
```

在 P 内部，应该有一个事件监听器，概念上是这样的：

```
C1Instance.addEventListener('callPFunc',onCallPFunc);

....
// elsewhere in code

protected function onCallPFunc(event:Event):void{
  PFunc();
} 
```

如果您希望 C1 调用 C2Func 或 C2 调用 C1Func，那么您有点不走运。同一层次结构级别的两个组件不应相互直接交互。最好的方法是发送一个事件；在父级中监听它，并让父级回调到备用组件。

# jquery - Jquery 验证：动态内联验证

> ID：11063959
> 
> 赞同：1
> 
> 时间：2012-06-16T13:43:53.863
> 
> 标签：jquery, jquery-validate

我有以下html代码：

```
<form>
    <table>
    <tbody>
        <tr>
            <td>
               <span>Quantity<span class="pull-right">3</span>
               <input type="hidden" class="" value="3" name="quantity[]">
           </td>
           <td class="form-inline">
                <label>Cantidad Warehouse</label>
                <input id="qty_warehouse_1" type="text" name="cantidad_despacho[]" class="required input-mini">
           </td>
        </tr>
        <tr>
        <tr>
            <td>
               <span>Quantity<span class="pull-right">5</span>
               <input type="hidden" class="" value="5" name="quantity[]">
           </td>
           <td class="form-inline">
                <label>Cantidad Warehouse</label>
                <input id="qty_warehouse_2" type="text" name="cantidad_despacho[]" class="required input-mini">
           </td>
        </tr>
        <tr>
    </tbody>
</table>
            <button id="submit" value="send" name="button">Send</button>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

每行都是动态生成的。我需要对名称为 Qty_warehouse 的每个输入执行验证，**因此它的最大值不会大于同一行的隐藏值**。这就是我一直在尝试做的事情：

```
$(document).ready(function() {
    $("form").validate();
    $("[id*='qty_warehouse']").rules("add", {
        required: true,
        max: function() {
        return $(this).parents("tr").eq(0).find("input[name='quantity[]']").val();
        },
        min: 0,
        messages: {
            required: "Introduzca la cantidad disponible en despacho"
        }
    });

    $("#submit").click(function() {
        alert($("form").valid());
    });
});​ 
```

任何帮助将不胜感激。如果您想进行一些测试，这是小提琴链接。[小提琴](http://jsfiddle.net/wHdKt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:57:45.793

在你的`max`函数`this`中不是你想象的那样，它是`window`. 要验证，只需`console.log(this)`在函数内部调用并在浏览器控制台中检查。

将 element 的参数添加到 max 函数并使用它来开始遍历。还将输入值转换为数字。

```
 max: function(element) {
        var max=   $(element).parents("tr").eq(0).find("input[name='quantity[]']").val();    
        return 1*max;
    } 
```

演示：http: [//jsfiddle.net/wHdKt/1/](http://jsfiddle.net/wHdKt/1/)

# .net - 在 F# 中创建具有动态大小的字节数组

> ID：11063962
> 
> 赞同：13
> 
> 时间：2012-06-16T13:44:45.623
> 
> 标签：.net, arrays, f#

在 C# 和 Java 中，可以像这样创建字节数组

```
byte[] b = new byte[x]; 
```

其中`x`表示数组的大小。我想做的是在 F# 中做同样的事情。我已经搜索了如何做到这一点并在文档中寻找它。我认为我可能使用了错误的搜索词，因为我不知道怎么做。

到目前为止，我发现`Array.create`可以这样使用：

```
let b = Array.create x ( new Byte() ) 
```

有没有另一种更类似于在 C# 和 Java 中完成的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-16T14:01:17.090

最接近的 F# 模拟是[Array.zeroCreate：](http://msdn.microsoft.com/en-us/library/ee340488)

```
let b: byte [] = Array.zeroCreate x 
```

在 Java 和 C# 平台上，F#不是将数组元素隐式初始化为`0`字节，而是使数组元素的初始值显而易见。

在F#`dynamic size`中`b`，它在分配时由`x`值定义一次，以后不能通过更改来更改`x`，类似于 C#/Java。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-16T18:32:00.123

```
let b = Array.create<byte> x 0uy  //Array.zeroCreate<byte> x 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-16T14:26:43.873

我想你会想要创建一个未初始化的数组并稍后填充它：

```
let arr = Array.zeroCreate 10
for i in 0..9 do
   arr.[i] <- byte(i*i) 
```

这是您通常在 C#/Java 中执行的方式，这在 F# 中是通用的。想想看；如果您忘记初始化某些元素，则必须处理`null`噩梦。

[在几乎所有情况下，您总是可以用Array 模块](http://msdn.microsoft.com/en-us/library/ee370273.aspx)或数组理解中的高阶函数替换上述过程：

```
let arr = Array.init 10 (fun i -> byte(i*i)) 
```

或者

```
let arr = [| for i in 0..9 do -> byte(i*i)|] 
```

看看[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/dd233214)；它包含有关在 F# 中使用 Array 的有用信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-16T13:50:48.137

你什么意思？

**F#**的语法与**C#**和**Java**不同，您正在使用该`Array`模块让他使用初始化程序创建一个数组。没什么奇怪的，一种语言是功能性的，而另一种是必要的，因此确实需要这些差异。

根据**F#**语言规范，您不能声明未初始化的内容（除非使用特定模式作为`Option`类型，这只是允许您在没有真正拥有的情况下表达未初始化概念的漏洞），这就是为什么您必须为数组中的元素。

# android - 为文本视图android设置字体（来自字体文件）

> ID：11063965
> 
> 赞同：1
> 
> 时间：2012-06-16T13:45:25.313
> 
> 标签：android, android-layout

我有一个字体文件 love.ttf (5mb)。我已将其放入资产文件夹中。这是我的代码

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView tv=(TextView)findViewById(R.id.textView1);
    Typeface tf=Typeface.createFromAsset(getAssets(),"love.ttf");;
    tv.setTypeface(tf,Typeface.NORMAL);
    tv.setTextSize(20);
} 
```

main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#4B67A1"
    android:orientation="vertical" >    
    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="おはようございます。" />    
</LinearLayout> 
```

运行的时候看不到文字！！！如何加载大字体？请帮我！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:57:07.263

So, there will be firstly two possible reason why it doesn't work.

1.  Check if your font supports Japanese characters.
2.  You could have bad path of your font file.

    ```
    TextView tv = (TextView) findViewById(R.id.textView1);
    Typeface tf=Typeface.createFromAsset(getAssets(),"fonts/love.ttf"); 
    ```

You should have in your `assets` folder next subfolder named `fonts`. Then also check if you have correct suffix of font.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:02:54.190

I would suggest you to not directly save font in Asset folder,rather create fonts folder under it and inside that save love.ttf font.

Then you can perform the magic as below.

```
 TextView tv=(TextView)findViewById(R.id.custom); 
  Typeface face=Typeface.createFromAsset(getAssets(), "fonts/love.ttf"); 
  tv.setTypeface(face); 
```

# c# - 在 C# 中单击文件/保存或 Ctrl+S 时提交当前脏单元格

> ID：11063971
> 
> 赞同：1
> 
> 时间：2012-06-16T13:46:12.147
> 
> 标签：c#, winforms, datagridview

我有：

1.  `MenuStrip`具有将`DataGridView`值保存到数据库的File>Save

2.  `DataGridView`具有必须包含数字值的列（我已经通过使用`_CellValidating`事件解决了这个问题，`e.Cancel = true`当输入不是数字时设置）

问题是当我在单元格仍然脏（在编辑模式下）时单击文件>保存时，它的值被忽略并且不包含在数据库记录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T13:58:04.747

At the beginning of the File>Save handler, call [`myDataGridView.EndEdit()`](http://msdn.microsoft.com/en-us/library/ms158620.aspx) to get out of edit mode and be able to get the value of the cell.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T13:59:21.417

Try [this](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged.aspx) if you want to immediately commit the cell changes to the underlying DataSource-

```
void dataGridView1_CurrentCellDirtyStateChanged(object sender,
    EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

[MSDN:](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged.aspx)

A cell is marked as modified if its contents have changed but the change has not been saved.

This event typically occurs when a cell has been edited but the change has not been committed to the data cache, or when an edit operation is canceled.

# android - 在 Eclipse 中安装 Android ADT

> ID：11063976
> 
> 赞同：0
> 
> 时间：2012-06-16T13:46:39.153
> 
> 标签：android, installation, adt, eclipse-3.6

在 eclipse helios 中安装 ADT 时，我遇到了如下所示的问题：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Android Traceview 18.0.0.v201203301601-306762 (com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
  Software currently installed: Eclipse IDE for Java EE Developers 1.3.0.20100617-0521 (epp.package.jee 1.3.0.20100617-0521)
  Only one of the following can be installed at once: 
    Eclipse UI 3.6.1.M20100826-1330 (org.eclipse.ui 3.6.1.M20100826-1330)
    Eclipse UI 3.6.2.M20110203-1100 (org.eclipse.ui 3.6.2.M20110203-1100)
    Eclipse UI 3.6.0.I20100603-1100 (org.eclipse.ui 3.6.0.I20100603-1100)
  Cannot satisfy dependency:
    From: Android Traceview 18.0.0.v201203301601-306762 (com.android.ide.eclipse.traceview.feature.group 18.0.0.v201203301601-306762)
    To: org.eclipse.ui 3.6.2
  Cannot satisfy dependency:
    From: Eclipse IDE for Java EE Developers 1.3.0.20100617-0521 (epp.package.jee 1.3.0.20100617-0521)
    To: org.eclipse.epp.package.jee.feature.feature.group [1.3.0.20100617-0521]
  Cannot satisfy dependency:
    From: Java EE IDE Feature 1.3.0.20100617-0521 (org.eclipse.epp.package.jee.feature.feature.group 1.3.0.20100617-0521)
    To: org.eclipse.platform.feature.group [3.6.0.v20100602-9gF78GpqFt6trOGhL60z0oEx3fz-JKNwxPY]
  Cannot satisfy dependency:
    From: Eclipse Platform 3.6.0.v20100602-9gF78GpqFt6trOGhL60z0oEx3fz-JKNwxPY (org.eclipse.platform.feature.group 3.6.0.v20100602-9gF78GpqFt6trOGhL60z0oEx3fz-JKNwxPY)
    To: org.eclipse.rcp.feature.group [3.6.0.v20100519-9OArFKvFtsd7WLUKh-DcYTS]
  Cannot satisfy dependency:
    From: Eclipse RCP 3.6.0.v20100519-9OArFKvFtsd7WLUKh-DcYTS (org.eclipse.rcp.feature.group 3.6.0.v20100519-9OArFKvFtsd7WLUKh-DcYTS)
    To: org.eclipse.ui [3.6.0.I20100603-1100] 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T13:55:21.173

So it looks to me that you have too many selections in eclipse that somewhat overwrite each other. Try going about installing packages one at a time. I've dealt with this before and really the only answer is to actively select what you install at one time. Try referring to the version numbers to determine which ones to de-select (e.g. 3.6.0I20100603-1100).

I would recommend just selecting `Eclipse UI 3.6.2.M20110203-1100` and un-checking the others.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T14:15:04.613

我无法解释问题的根本原因，但我真的建议改用当前的 Indigo 版本 3.7.2（即使在 Eclipse Juno 到来的两周内它也会“过时”）。

# c++ - C++：如何睡一纳秒？

> ID：11063978
> 
> 赞同：8
> 
> 时间：2012-06-16T13:47:03.723
> 
> 标签：c++, windows, sleep

> **可能重复：**
> [睡眠时间少于一毫秒](https://stackoverflow.com/questions/85122/sleep-less-than-one-millisecond)

如何让程序休眠一纳秒？我在网上搜索，我找到了几种睡眠方式，但是：
windows.h的`Sleep()`睡眠时间仅为毫秒。
`ctime`'s`nanosleep()`仅适用于 POSIX 系统，我使用的是 Windows。
我也试过这个：

```
int usleep(long usec)
{
    struct timeval tv;
    tv.tv_sec = usec/1000000L;
    tv.tv_usec = usec%1000000L;
    return select(0, 0, 0, 0, &tv);
}; 
```

但是 Code::Blocks 说：

```
obj\Release\main.o:main.cpp|| undefined reference to `select@20'| 
```

我尝试了很多东西，但一切都失败了。我该怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-16T13:48:27.497

使用 C++11

```
#include <chrono>
#include <thread>
...
std::this_thread::sleep_for(std::chrono::nanoseconds(1)); 
```

请注意，实现的睡眠时间可能比给定的时间长。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T13:58:56.763

您还应该注意到有一个调度程序，它可能不允许比时间片短的睡眠（大约 4 毫秒 - 10 毫秒，取决于您的窗口和机器）。睡得少于那是不可能的

以下是关于该问题窗口[的一些（相当古老的）研究。](http://www.geisswerks.com/ryan/FAQS/timing.html)

本文建议使用 Win32`timeBeginPeriod()`来实现。

# windows - 是否可以恢复加密的文件/文件夹？

> ID：11063982
> 
> 赞同：-1
> 
> 时间：2012-06-16T13:47:39.650
> 
> 标签：windows, encryption, windows-7, vmware

我在我的一个硬盘驱动器上发现了一些以某种方式加密的剩余文档（在 Windows 7 Ultimate x64 中显示为绿色）。

我试图在他们的属性中取消选中加密，但我被拒绝访问。我认为这是因为这些文件来自我桌面设置的先前格式/迭代，并且一定是在不经意间被加密了。（我现在认为这与将它们一次传输到 Mac 机器/驱动器上，然后再传输回来有关，直到格式化后才意识到它们是加密的）。

我最初在这个问题中发布，我认为我有一个与文件相同时间段的 VMware 映像，也许可以将密钥从该映像传输到我当前的机器，但该映像不正确一！：/我没有可以追溯到更远的图像。

我尝试将文件复制到 FAT32 USB 驱动器（因为它会剥离加密），但 Windows 7 拒绝（可以理解）。正如预期的那样，尝试将文件从我当前的机器拖动/复制到运行 VMware 的机器上也被拒绝，因为 VMware 正在 Win7 的域和规则中运行。

有任何想法吗？如何从 linux live USB 记忆棒启动我当前的机器，然后尝试将 NTFS 加密文件复制到 FAT32 分区（从而删除加密）——这可行吗，看看 Windows 不会“唤醒”禁止复制？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T14:07:23.883

我找到了一个 zip 存档，这些文件的来源。然而，每当我提取它们时，它们都会显示为绿色。果然，zip 文件中还有一个 MACOSX 文件夹（不知道为什么 Windows 决定加密来自 Mac 的任何内容）。

我能够将 zip 文件复制到我的旧 VMware 映像上并在那里提取 zip 文件。它仍然是加密的，但是右键单击文件夹，单击属性，然后取消选中加密完全解密了文件夹和文件！

我假设即使此 VMware 映像的机器名称与文件加密信息中的用户记录不同，但它实际上可能是相同的，即原始机器和后续加密证书。

无论如何，我能够将解密的文件复制回来，现在问题解决了！

# haskell - Haskell 中的有限自动机

> ID：11063984
> 
> 赞同：20
> 
> 时间：2012-06-16T13:47:49.243
> 
> 标签：haskell, state-machine, representation, automaton

在 Haskell 中表示有限自动机的好方法是什么？它的数据类型如何？

在我们大学，自动机被定义为一个 5 元组

```
(Q, X, delta, q_0, F) 
```

其中 Q 是自动机状态的集合，X 是字母表（这部分是否必要），delta 是从 (Q,X) 获取 2 元组并返回 state/-s 的转换函数（在非确定性版本中）和F 是接受/结束状态的集合。

最重要的是，我不确定`delta`应该有什么类型......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-16T14:29:06.417

有两个基本选项：

*   Sven Hager 建议的显式函数`delta :: Q -> X -> Q`（或`[Q]`视情况而定）。
*   一张地图，`delta :: Map (Q, X) Q`例如使用`Data.Map`，或者如果您的州/字母表可以通过升序数字`Data.Array`或`Data.Vector`.

请注意，这两种方法本质上是等价的，可以相对容易地从地图版本转换为函数版本（由于调用的额外内容，这略有不同`Maybe`）`lookup`

```
delta_func q x = Data.Map.lookup (q,x) delta_map 
```

（或者对于您使用的任何映射类型，查找函数的适当柯里化版本。）

* * *

如果您在编译时构建自动机（因此知道可能的状态并可以将它们编码为数据类型），那么使用函数版本可以为您提供更好的类型安全性，因为编译器可以验证您是否已涵盖所有情况。

如果您在运行时构建自动机（例如从用户输入），则存储`delta`为映射（并可能进行上述函数转换）并进行适当的输入验证以保证正确性，这样`fromJust`是安全的（即总是有一个在映射中输入任何可能的`(Q,X)`元组，因此查找永远不会失败（永远不会返回`Nothing`））。

非确定性自动机与 map 选项配合得很好，因为查找失败与没有状态可去，即空`[Q]`列表相同，因此不需要对调用之外的*任何*特殊处理`Maybe`到`join . maybeToList`（`join`是从`Data.Monad`和`maybeToList`是从`Data.Maybe`）。

* * *

另一方面，字母表绝对是必要的：它是自动机接收输入的方式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-22T11:31:42.557

查看“箭头”包中的 Control.Arrow.Transformer.Automaton 模块。类型看起来像这样

```
newtype Automaton a b c = Automaton (a b (c, Automaton a b c)) 
```

这有点令人困惑，因为它是一个箭头转换器。在最简单的情况下，您可以编写

```
type Auto = Automaton (->) 
```

它使用函数作为底层箭头。用 (->) 代替 Automaton 定义中的“a”并使用中缀表示法，您可以看到这大致相当于：

```
newtype Auto b c = Automaton (b -> (c, Auto b c)) 
```

换句话说，自动机是一个接受输入并返回结果和新自动机的函数。

您可以通过为每个状态编写一个函数来直接使用它，该函数接受一个参数并返回结果和下一个函数。例如，这里有一个状态机来识别正则表达式“a+b”（即一系列至少一个“a”后跟一个“b”）。（注：未经测试的代码）

```
state1, state2 :: Auto Char Bool
state1 c = if c == 'a' then (False, state2) else (False, state1)
state2 c = case c of
              'a' -> (False, state2)
              'b' -> (True, state1)
              otherwise -> (False, state1) 
```

就您最初的问题而言，Q = {state1, state2}, X = Char, delta 是函数应用程序，而 F 是返回 True 的状态转换（而不是“接受状态”，我使用了带有接受值）。

或者，您可以使用箭头符号。Automaton 是所有有趣的箭头类的一个实例，包括 Loop 和 Circuit，因此您可以使用延迟来访问以前的值。（注意：再次，未经测试的代码）

```
recognise :: Auto Char Bool
recognise = proc c -> do
   prev <- delay 'x' -< c   -- Doesn't matter what 'x' is, as long as its not 'a'.
   returnA -< (prev == 'a' && c == 'b') 
```

“延迟”箭头表示“上一个”等于“c”的前一个值，而不是当前值。您还可以使用“rec”访问之前的输出。例如，这是一个箭头，它会随着时间的推移为您提供衰减的总数。（本例实际测试过）

```
-- | Inputs are accumulated, but decay over time. Input is a (time, value) pair.
-- Output is a pair consisting
-- of the previous output decayed, and the current output.
decay :: (ArrowCircuit a) => NominalDiffTime -> a (UTCTime, Double) (Double, Double)
decay tau = proc (t2,v2) -> do
      rec
         (t1, v1) <- delay (t0, 0) -< (t2, v)
         let 
            dt = fromRational $ toRational $ diffUTCTime t2 t1
            v1a = v1 * exp (negate dt / tau1)
            v = v1a + v2
      returnA -< (v1a, v)
   where
      t0 = UTCTime (ModifiedJulianDay 0) (secondsToDiffTime 0)
      tau1 = fromRational $ toRational tau 
```

请注意“延迟”的输入如何包含“v”，这是一个从其输出派生的值。“rec”子句可以实现这一点，因此我们可以建立一个反馈循环。

# file - 在Python中将字典写入csv的TypeError

> ID：11063991
> 
> 赞同：0
> 
> 时间：2012-06-16T13:48:32.070
> 
> 标签：file, csv, dictionary, python-3.x

我有一个关于 python 中的 csv 模块的问题。我似乎无法将字典列表写入 csv 文件。如果你能帮我找出这里的错误，那就太好了。

我得到一个 TypeError: sequence item 0: expected str instance, dict found

```
f = open("datadump.csv", 'wt')
try:
    fieldnames = ['type', 'name', 'contact', 'address', 'tel', 'web', 'infos']
    writer = csv.DictWriter(f, fieldnames=fieldnames, delimiter=';', extrasaction='raise')
    writer.writerow(dict((fn,fn) for fn in fieldnames))
    for entry in listd:
        writer.writerow(entry)
finally:
    f.close() 
```

listd 是字典对象的列表，其中一个典型的对象如下所示：

```
{'web': '', 'tel': 'Tel.: 043 377 97 32', 'name': ' Kinderkrippe Doppelchnopf', 'contact': '', 'address': 'Rütistrasse 37d, 8134 Adliswil', 'infos': '', 'type': 'kita'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T14:35:44.543

您的代码基本上未经修改对我有用。我想也许你对`listd`. 试试下面的完整代码。

```
import csv

fieldnames = ['type', 'name', 'contact', 'address', 'tel', 'web', 'infos']
data_item = {'web': '', 'tel': 'Tel.: 043 377 97 32', 'name': ' Kinderkrippe Doppelchnopf', 'contact': '', 'address': 'Rtistrasse 37d, 8134 Adliswil', 'infos': '', 'type': 'kita'}
listd = [data_item]*3
f = open("datadump.csv", 'wt')
writer = csv.DictWriter(f, fieldnames=fieldnames, delimiter=';', extrasaction='raise')
try:
    writer.writerow({fn:fn for fn in fieldnames})
    for entry in listd:
        writer.writerow(entry)
finally:
    f.close() 
```