# StackOverflow 问答 12389000-12389999

# iphone - 如何在不调用 initWithNibName 的情况下推送适当的 XIB（Ipad 或 iPhone）

> ID：12389002
> 
> 赞同：0
> 
> 时间：2012-09-12T13:12:10.443
> 
> 标签：iphone, ipad, xcode4.2, pushviewcontroller

我正在尝试使用

但对于通用应用程序

我得写。。

```
if([[UIDevice current]UserInterfaceIdiom] == UIUserInterFaceIPad)
{
    MyViewController *controller = [[MYViewController alloc]initWithNibName:@"MyViewController_IPad"];

    [self.navigationCOntroller pushViewController:myViewController animated:YES];

    else{
    MyViewController *controller = [[MYViewController alloc]initWithNibName:@"MyViewController_IPhone"];

    [self.navigationCOntroller pushViewController:myViewController animated:YES];

} 
```

我可以得到解决方案来克服“if”条件并避免设备检查..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:18:00.247

制作两个笔尖，一个用于 iPhone，一个用于 iPad，`MyViewController~iphone.xib`并命名它们`MyViewController~ipad.xib`（注意：匹配外壳很重要！）。确保将它们都添加到您的目标中，然后在您的代码中执行以下操作：

```
MyViewController *controller = [[MYViewController alloc]initWithNibName:@"MyViewController"];
[self.navigationCOntroller pushViewController:myViewController animated:YES]; 
```

# html - 如何更改 RGraph.Text 画布文本元素中的文本颜色

> ID：12389006
> 
> 赞同：0
> 
> 时间：2012-09-12T13:12:18.850
> 
> 标签：html, canvas, rgraph

在我的 html 页面中有一个 canvas 元素，我可以使用[rgraph](http://www.rgraph.net)库来绘制图形......现在我想在其中添加一个特定的文本元素，我可以通过像这样打印它来做到这一点：

```
RGraph.Text(this.canvas.getContext("2d"), "Verdana", 8, 30, 125, 'TECHNOLOGY', "top", "left", false, 270, '#000000'); 
```

现在，颜色只有 1 个参数，它是文本背景颜色，我需要动态更改它的文本颜色。有谁知道如何更改该项目的文本颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:56:18.997

许多 RGraph 方法（尽管不是全部）使用当前的 strokeStyle 或 fillStyle 设置。例如：

```
context.fillStyle = 'red';
RGraph.Text(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:42:45.317

哦，亲爱的，我又一次快速地在这里发帖。这个解决方案很简单，但是默认画布，并且不能使用 RGraph.Text() 方法本身，只需初始化一个上下文填充颜色。

```
myContext = this.canvas.getContext('2d');
myContext.setFillColor(255, 255, 0, 1.0); // you can add any RGBA values here...
RGraph.Text(/* arguments go here */); 
```

# android - 在android中解析带有属性的xml

> ID：12389015
> 
> 赞同：0
> 
> 时间：2012-09-12T13:13:04.033
> 
> 标签：android, xml

我正在尝试解析 xml，但没有成功，xml 是：

```
<Menu> 
<sunday> 
<food Type="soups">someVal</food>  
<food Type="soups">someVal</food>   
</sunday>  
</Menu> 
```

我在android中解析使用：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element; 
```

这就是我尝试解析它的方式：

```
 doc.getDocumentElement().normalize();
            typesList = doc.getElementsByTagName("sunday");
            Node node = typesList.item(0);
            Element fstElmnt = (Element) node;
            Attr marakim = fstElmnt.getAttributeNode("soups");
            NodeList marakimList = marakim.getChildNodes();
            Element nameElement = (Element) marakimList.item(0);
            marakimList = nameElement.getChildNodes();
            String test = ((Node)marakimList.item(0)).getNodeValue(); 
```

我得到 nullPointerException

```
09-12 16:22:13.703: W/System.err(22570): java.lang.NullPointerException
09-12 16:22:13.710: W/System.err(22570):    at com.bugs3.udios.shultz.ShultzDayChoice$foodTypesTask.doInBackground(ShultzDayChoice.java:116)
09-12 16:22:13.714: W/System.err(22570):    at com.bugs3.udios.shultz.ShultzDayChoice$foodTypesTask.doInBackground(ShultzDayChoice.java:1)
09-12 16:22:13.714: W/System.err(22570):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-12 16:22:13.730: W/System.err(22570):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-12 16:22:13.734: W/System.err(22570):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-12 16:22:13.734: W/System.err(22570):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-12 16:22:13.734: W/System.err(22570):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-12 16:22:13.738: W/System.err(22570):    at java.lang.Thread.run(Thread.java:856) 
```

有没有更好的方法来解析带有属性的 xml？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:41:01.597

尽管我的 xml 中没有属性，但我就是这样做的。你只需要做类似的事情

```
Element element2 = element.getAttribute("type"); 
```

或者在你使用 .getElementsByTagName 之后类似的东西

```
NodeList nodeList = doc.getElementsByTagName("ConfigIn");
            for(int i = 0; i < nodeList.getLength(); i++)
            {
                Node node = nodeList.item(i);
                if(node.getNodeType() == Node.ELEMENT_NODE)
                {
                    Element element = (Element) node;
                    NodeList nodelist = element.getElementsByTagName("eclairag");
                    Element element1 = (Element) nodelist.item(0);
                    NodeList fstNm = element1.getChildNodes();
                    config_eclairag = fstNm.item(0).getNodeValue(); 
```

希望这可以在某种程度上帮助你......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:34:59.330

该属性的名称是“Type”，但您正在寻找一个名为“soups”的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:06:17.130

好的，所以我扔了文档，搜索后发现以下内容：

[使用 DOM 解析器解析 XML 中的属性](https://stackoverflow.com/questions/9132778/parsing-attribute-in-xml-with-dom-parser)

并成功解析带有属性的 xml：

```
 String tst;

                Node sundayNode = doc.getElementsByTagName("sunday").item(0);
                Element sundayElem = (Element)sundayNode;
                Node foodNode = sundayElem.getElementsByTagName("food").item(0);

                NamedNodeMap  attrs = foodNode.getAttributes();

                for (int a = 0; a < attrs.getLength(); a++) 
                {
                        Node theAttribute = attrs.item(a);

                        tst = theAttribute.getNodeName() + "=" + theAttribute.getNodeValue();
                 } 
```

感谢大家的帮助

# zend-framework - Yii中路由的初始化和使用（与Zend比较）

> ID：12389019
> 
> 赞同：0
> 
> 时间：2012-09-12T13:13:14.480
> 
> 标签：zend-framework, yii

我在 Zend 框架方面有一些经验。最近我开始使用 Yii。

现在我试图在这个框架中找到一些类比。

在 Zend 中，几乎每条路线都有自己的名称。例如，您可以创建下一条路线“photos_map”：

```
$router->addRoute('photos_map',
    new Zend_Controller_Router_Route('map/:city', array(
        'controller' => 'photos', 
        'action' => 'map',
        'city' => ''
    ))
); 
```

`view`并通过以下方式使用它`url helper`：

```
echo $this->url(array(), 'photos_map') // output '/map' 
```

`city`在 Zend 中，您也可以在初始化或 url-helper 调用中传递参数（在上面的示例中为 ）。

如果您想更改 url，您只需将初始化中的参数字符串更改`map/:city`为您想要的。它非常有用，因为您不需要在代码中的任何地方都将旧网址替换为新网址。

我的问题是这在 Yii 中可能吗？我流利地阅读了文档并开始认为 Yii 路由没有那么强大。这是牺牲性能还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:35:09.140

Yii 中的路由很简单，与 Zend 相比有点不同。在 Yii 中，视图是使用控制器渲染的，因此要渲染视图，您必须调用控制器。例如，你在一个网站的索引页面，你想去预览页面。

```
$url = Yii::app()->createUrl('/site/preview');
//Here site is the name of the controller class and preview is the name of the action
//You will need to have a controller named SiteController in your controllers folder
//You will need to have a folder named "site" in your views folder
//You will need to have an action(function) defined as actionPreview in your controller class 
```

现在在控制器类中（在本例中为 SiteConroller.php），

```
public function actionPreview()
{
     $this->render('preview',array('data'=>''));
     //will render preview.php located in views/site/preview.php
     //u can pass parameters in array as shown above, in this case data 
} 
```

如果你想改变 url，你可以简单地改变部分 $this->render('your_view_file.php'); 我希望它有帮助............随时提问......

# asp.net-mvc-3 - 模型验证的自定义范围属性不会产生 jQuery 验证属性

> ID：12389023
> 
> 赞同：3
> 
> 时间：2012-09-12T13:13:18.053
> 
> 标签：asp.net-mvc-3, jquery-validate

在我的项目中，我有几个实例，用户需要以小数形式提供金额（以磅和便士为单位），并且它必须在 Int32 范围内，以便可以为数据库进行转换。我认为可以这样做：

```
/// <summary>
/// Range attribute to ensure that entered value can be converted to an int32
/// </summary>
public class PoundsAndPenceAttribute : RangeAttribute
{
    public PoundsAndPenceAttribute(double minimum = (double)int.MinValue / 100, double maximum = (double)int.MaxValue / 100)
        : base(minimum, maximum)
    {
    }
} 
```

不幸的是，它不会生成客户端 JavaScript data-val range 属性，尽管它会在服务器端验证它。有没有更好的方法可以做到这一点，还是我必须编写一个自定义验证器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:37:44.710

尝试实现 IClientValidatable 接口：

```
public class PoundsAndPenceeAttribute : RangeAttribute, IClientValidatable
{
    public LocalizeRange(double minimum = (double)int.MinValue / 100, double maximum = (double)int.MaxValue / 100) 
: base(minimum, maximum)
    {
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = ErrorMessage,
            ValidationType = "range"
        };

        rule.ValidationParameters.Add("min", Minimum);
        rule.ValidationParameters.Add("max", Maximum);

        yield return rule;
    }
} 
```

它应该完成这项工作。

# reporting-services - 如何更改报表管理器中的控件图标？

> ID：12389031
> 
> 赞同：1
> 
> 时间：2012-09-12T13:13:43.590
> 
> 标签：reporting-services, ssrs-2008

有没有办法更改报表管理器中的控制顺序？目前，控件如下所示：

![在此处输入图像描述](../Images/858c7f7dae5b4437c5666e08250477ba.png)

因此，如果我想将“导出”按钮移到最右侧，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:55:57.683

更改此元素的 .css 是可能的，但重新排序元素会很棘手。（参考：[使用 CSS 重新排序 DIV](https://stackoverflow.com/questions/220273/css-positioning-div-above-another-div-when-not-in-that-order-in-the-html)）

MSDN 提供了[修改 .css 的](http://msdn.microsoft.com/en-us/library/ms345247%28v=sql.100%29.aspx)说明。.css 甚至还有一个标签“.ToolbarExport”，因此您可以轻松设置此元素的样式。但重新排序：不太好。我怀疑这个控件的源代码是在编译的二进制文件中，所以不容易访问。（看起来它是 RS:ReportViewerHost 控件的一部分。）

如果您需要这种程度的定制，最好的答案是编写您自己的报表管理器界面。

# python - 按值屏蔽数组，然后屏蔽相应的矩阵

> ID：12389033
> 
> 赞同：1
> 
> 时间：2012-09-12T13:13:51.500
> 
> 标签：python, numpy

我有一个 numpy 数组 y [1,2,3,4,5,6,1,2,3,4,5,6]

然后我有一个矩阵 X 是 numpy csr 格式。

1）我需要屏蔽y中的元素6。然后，我需要屏蔽 X 中的相应行。

所以，y.shape 是 12。应该是 10。X 是 12,20。应该是 10,20。

我如何在 numpy 中执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:23:33.567

如果您的“掩码”输出`y`应该小于您的输入，那么您并没有真正使用掩码。

正如您在[上一个问题](https://stackoverflow.com/questions/12150669/how-to-sort-an-array-and-a-matrix-together-using-numpy)中所建议的那样，您可以很容易地找到与`y`6 不同的索引

```
condition = (y != 6) 
```

这是 abool 数组，您可以使用它来检索`y`不是 6的值

```
y = y[condition] 
```

您可以使用它`condition`来获取 的相应行`X`，除了它是 CSR 并且因此不支持花哨的索引格式。您仍然可以将其转换为 LIL 然后再返回。

您还可以获得`y !=6`与

```
(indices,) = np.nonzero(y != 6) 
```

它是一个常规整数数组，您可以使用它来索引您的`X`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:21:57.573

我不喜欢回答自己的问题，但正确的解决方案是处理 csr 矩阵：

```
X = X[np.where(y != 6)[0]]
y = y[y != 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:19:32.977

我不是 100% 确定我理解你的问题，但也许这会有所帮助：

```
>>> import numpy as np
>>> a = np.array(range(1,7)*2)  #Your array.
>>> a
array([1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6])
>>> b = np.array(list(a)*20).reshape(12,20) #just some matrix of right size and shape. np.empty(12,20) would probably work just as well.
>>> b
array([[1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6]])

>>> mask = a != 6 #mask.  True for all points except ones where value == 6.
>>> b[mask,:]   #take points along first axis where mask==True, all points along second axis.
array([[1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4],
       [5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6],
       [1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2],
       [3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 1, 2, 3, 4]]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:22:15.573

使用[非零](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html)。

（假设 x 已经定义）

```
import numpy as np
y = np.array([1,2,3,4,5,6,1,2,3,4,5,6])
keepers = np.nonzero(y != 6)
y = y[keepers]
x = x[keepers, :] 
```

# ios - 多行 UINavigationBar / UIToolbar 就像在地图应用程序中一样

> ID：12389034
> 
> 赞同：0
> 
> 时间：2012-09-12T13:13:54.310
> 
> 标签：ios, uinavigationbar, uitoolbar

在方向模式下的 iPhone 地图应用程序（适用于 iOS 5）中，工具栏位于导航栏的正下方，并且工具栏渐变与导航栏背景完美匹配。

我想知道是否有一些简单的方法可以实现类似的行为？（最好不使用自定义图像）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:02:02.890

我认为这是一个普通的工具栏，在 UIView 内有 2 个文本字段（作为 UIBarButtonItem 添加到工具栏）到导航栏下方的屏幕顶部。

这就是我实现它的方式：

```
 UIToolbar *bar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];

    UITextField *field1 = [[UITextField alloc] initWithFrame:CGRectMake(15, 5, 280, 30)];
    UITextField *field2 = [[UITextField alloc] initWithFrame:CGRectMake(15, 50, 280, 30)];
    [field1 setBorderStyle:UITextBorderStyleRoundedRect];
    [field2 setBorderStyle:UITextBorderStyleRoundedRect];

    UIView *viewForTextFields = [[UIView alloc] initWithFrame:bar.frame];

    [viewForTextFields addSubview:field1];
    [viewForTextFields addSubview:field2];

    UIBarButtonItem *viewForTextFieldsBarItem = [[UIBarButtonItem alloc] initWithCustomView:viewForTextFields];

    NSArray *items = [NSArray arrayWithObjects:viewForTextFieldsBarItem, nil];

    [bar setItems:items];
    [bar setContentMode:UIViewContentModeTopLeft];

    [self.view addSubview:bar]; 
```

# android - Android限制文件到应用程序

> ID：12389046
> 
> 赞同：0
> 
> 时间：2012-09-12T13:14:14.700
> 
> 标签：android

安卓应用开发 ::

有没有办法限制/调节一个应用程序创建的文件对其他应用程序/文件浏览器的访问？

例如：App ABC 创建的文件 file.txt

现在，file.txt 只能被 ABC 应用程序访问（Linux 结构中的访问模式 700）。该文件也应该从文件资源管理器应用程序中隐藏/保护。

上下文：这可能是一个设置文件，例如 JSON/XML，它应该只对这个应用程序私有，但存储在 ext.xml 中。内存卡（我可以使用资产文件夹，但这个文件最终会不断向现有设置添加新设置）。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:21:41.300

外部存储上的任何内容都是世界可读的。

如果您需要为您的应用存储私有数据，您可以选择共享首选项或内部存储。

有关使用每种存储类型的示例，请参阅 Android 开发人员站点上的[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)页面。

# sql-server - 如何从两个表中获取数据？

> ID：12389049
> 
> 赞同：1
> 
> 时间：2012-09-12T13:14:18.707
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 中有两个表

**tbl_posting_job_info**

![在此处输入图像描述](../Images/e7ab98dc95495ae789bb9926544be9a4.png)

**tbl_jobseeker_applied_job**

![在此处输入图像描述](../Images/1690b3b7ef70a2bbbec6c576616b7d8c.png)

在这两个表`job_posting_id`和`applied_job_id`各自表中的主键

在`tbl_posting_job_info`字段`job_posting_id`中称为 FK 在`tbl_jobseeker_applied_job`

所以，我的问题是如何获取`company_id`最适用的前 25 名`jobseeker`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:18:21.080

```
SELECT TOP 25 COUNT(b.applied_job_id), a.CompanyID
FROM tbl_posting_job_info a INNER JOIN
tbl_jobseeker_applied_job b ON a.job_posting_id = b.job_posting_id
GROUP BY a.CompanyID
ORDER BY Count(b.applied_job_id) DESC 
```

# ruby-on-rails-3 - 将 sql 查询转换为 activerecord

> ID：12389051
> 
> 赞同：0
> 
> 时间：2012-09-12T13:14:22.187
> 
> 标签：ruby-on-rails-3, activerecord

我有一行代码看起来像这样

```
 @words =  Word.connection.select_all("select text, count(*) as occurs from words join works on words.work_id = works.id where works.grouping == 'group1' group by text order by occurs desc limit 10") 
```

我想用一种更方便/更活跃的记录方式来写它，但语法对我来说还是很新的。

每部作品都有很多词，每个词都属于一部作品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:09:02.410

也许这段代码对你有用：

```
Word.includes(:works).where("works.grouping == 'group1'").limit(10).count(:group => :text) 
```

该`includes`方法创建与您的工作表的连接。该`where`方法是针对条件的，它`limit`是不言自明的，并且也是`count`由`group`一列组成的。

# mysql - 更新表时查询变慢

> ID：12389052
> 
> 赞同：0
> 
> 时间：2012-09-12T13:14:24.920
> 
> 标签：mysql, performance

我有这个查询

```
SELECT COUNT( id ) AS count
FROM members_customer_id_1
WHERE id
IN (

SELECT members_in_group.member_id
FROM members_in_group, member_groups
WHERE members_in_group.member_group_id = member_groups.id
AND member_groups.member_group_category_id =3
GROUP BY members_in_group.member_id
) 
```

对 members_in_group 进行更改时，此查询变得非常非常慢。第一次运行后，一切都很顺利，直到表中的下一次更改。

我怀疑问题出在索引上，所以我给members_in_groups.member_id加了一个索引，但是这只影响了没有对表进行更改的时间。

谁能发现为什么查询会这么慢？

这是我的表结构：

```
CREATE TABLE IF NOT EXISTS `members_customer_id_1` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `email` varchar(100) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `mobile` bigint(16) NOT NULL,
  `zipcode` varchar(10) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `sex` varchar(1) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `address` varchar(100) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `city` varchar(100) COLLATE latin1_danish_ci NOT NULL DEFAULT '',
  `country_id` int(10) NOT NULL,
  `birthday` date NOT NULL DEFAULT '0000-00-00',
  `disable_welcome_message` int(1) NOT NULL,
  `disable_birthday_message` int(1) NOT NULL,
  `confirmed` int(1) NOT NULL,
  `joined` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `deleted` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `origin_type_id` int(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=39 ;

CREATE TABLE IF NOT EXISTS `member_groups` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `customer_id` int(11) NOT NULL,
  `name` varchar(100) COLLATE latin1_danish_ci NOT NULL,
  `member_group_category_id` int(11) NOT NULL,
  `hidden` int(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=568 ;

CREATE TABLE IF NOT EXISTS `members_in_group` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `member_id` int(10) NOT NULL,
  `member_group_id` int(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `member_id` (`member_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_danish_ci AUTO_INCREMENT=421609 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:24:36.577

我会尝试这样的事情，这样你就可以利用索引

```
SELECT COUNT(*) AS count
FROM members_customer_id_1
JOIN members_in_group ON members_customer_id_1.id = members_in_group.member_id
JOIN member_groups ON members_in_group.member_group_id = member_groups.id
WHERE member_groups.member_group_category_id =3 
```

编辑：修改后的查询

# vb.net - 为什么使用 SmtpDeliveryMethod.SpecifiedPickupDirectory 时电子邮件上的密件抄送邮件标题不起作用？

> ID：12389060
> 
> 赞同：3
> 
> 时间：2012-09-12T13:14:53.247
> 
> 标签：vb.net, exchange-server, exchange-server-2010, system.net.mail

我们有一个电子邮件工作使用`System.Net.Mail`

电子邮件被发送到一个文件夹，并运行一个作业以在一天中的指定时间将文件复制到我们 Exchange 服务器上的 Pickup 文件夹。使用密件抄送字段将电子邮件副本发送到内部邮箱。

存在一个[已知问题](http://connect.microsoft.com/VisualStudio/feedback/details/531146/bcc-addresses-ignored-by-mailmessage-smtpclient-system-net-mail)，即该`Bcc`属性不会添加到使用 Exchange 的 Pickup 文件夹发送的电子邮件中，因此解决方法是将 Bcc 字段直接添加到邮件标头，但是从 2012 年 7 月 28 日起停止工作。

```
' BCC doesn't work when sent internally using the Pickup folder, 
' so need to add to message headers instead
'message.Bcc.Add(New MailAddress("internalMailbox@mydomain.com"))
message.Headers.Add("Bcc", "internalMailbox@mydomain.com")

Dim smtp = New SmtpClient(exchangeServer)
smtp.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory
smtp.PickupDirectoryLocation = temporaryEmailFolder

smtp.Send(message) 
```

Microsoft 是否更改了 Exchange 中的某些内容，因此电子邮件标头中的密件抄送地址也不再起作用？或者还有其他方法可以解决这个问题吗？

我尝试切换到`System.Web.Mail`，但无法将消息传递到文件夹。

我们在 Windows Server 2008 R2 Standard 机器上使用 Exchange 2010

**编辑：**

那天安装了一大堆更新。我猜其中一个是造成这个问题的原因，但是它们的列表很大，而且进展缓慢。任何人都知道与未通过以下更新处理的密件抄送邮件标头相关的任何已知问题吗？

*   Exchange Server 2010 更新汇总 6 (KB2529939)
*   Exchange Server 2010 更新汇总 3-v3 (KB2608646)
*   Microsoft Office 2010 过滤器包服务包 1 (SP1)
*   Silverlight 更新
*   和 52 个安全更新、热修复和 Windows 更新
    *   修补程序 KB2679255
    *   安全更新 KB2536276
    *   安全更新 KB2560656
    *   安全更新 KB2564958
    *   安全更新 KB2567680
    *   安全更新 KB2570947
    *   安全更新 KB2584146
    *   安全更新 KB2585542
    *   安全更新 KB2604115
    *   安全更新 KB2620704
    *   安全更新 KB2520712
    *   安全更新 KB2521440
    *   安全更新 KB2631813
    *   安全更新 KB2643719
    *   安全更新 KB2644615
    *   安全更新 KB2645640
    *   安全更新 KB2653956
    *   安全更新 KB2654428
    *   安全更新 KB2655992
    *   安全更新 KB2656356
    *   安全更新 KB2656373
    *   安全更新 KB2656411
    *   安全更新 KB2658846
    *   安全更新 KB2659262
    *   安全更新 KB2667402
    *   安全更新 KB2676562
    *   安全更新 KB2685939
    *   安全更新 KB2686831
    *   安全更新 KB2688338
    *   安全更新 KB2690533
    *   安全更新 KB2691442
    *   安全更新 KB2695962
    *   安全更新 KB2698365
    *   安全更新 KB2699988
    *   安全更新 KB2709715
    *   安全更新 KB2718523
    *   安全更新 KB2719985
    *   更新 KB2545698
    *   更新 KB2547666
    *   更新 KB2552343
    *   更新 KB2563227
    *   更新 KB2603229
    *   更新 KB2507047
    *   更新 KB2608658
    *   更新 KB2633952
    *   更新 KB2640148
    *   更新 KB2660075
    *   更新 KB2677070
    *   更新 KB2699779
    *   更新 KB2709630
    *   更新 KB2718704
    *   视窗 IE 9

或者有谁知道更简单的方法来检查更新的功能，以及这些更新是否导致了这个特定问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:45:40.370

我不知道是哪个更新导致了这个问题，也没有时间一次卸载一个来解决这个问题，所以找到了一个替代方案。

我注意到标题信息不再使用我当前的代码添加到电子邮件中，但是将地址添加为密件抄送仍然会`X-Receiver`在邮件标题中创建第二行（当您将邮件放入 Pickup 文件夹时，Exchange 会忽略该行)，所以我编写了一个脚本，它简单地遍历传递文件夹中的电子邮件，并将第二`X-Receiver`行替换为 a `Bcc`。

```
' This no longer adds Bcc to message header for whatever reason
'message.Headers.Add("Bcc", "bccRecipient@mydomain.com")
message.Bcc.Add(New MailAddress("bccRecipient@mydomain.com"))

...

Dim content As String
Dim regex As Regex = New Regex("(X-Receiver:.*?\n)(X-Receiver:)")

' Replace of the 2nd instance of "X-Receiver:" with "Bcc:"
For Each fileName As String In Directory.GetFiles(EMAIL_DELIVERY_FOLDER)
    content = File.ReadAllText(fileName)
    content = regex.Replace(content, "$1Bcc:", 1)
    File.WriteAllText(fileName, content)
Next 
```

这会将电子邮件标题从

```
X-Sender: "Test"
 <sender@mydomain.com>
X-Receiver: receipient@mydomain.com
X-Receiver: bccRecipient@mydomain.com
MIME-Version: 1.0 
```

到

```
X-Sender: "Test"
 <sender@mydomain.com>
X-Receiver: receipient@mydomain.com
Bcc: bccRecipient@mydomain.com
MIME-Version: 1.0 
```

当 .eml 邮件被放入 Exchange 的 Pickup 文件夹时，它会正确地将电子邮件的密件副本发送到指定的密件抄送地址

# google-chrome - 双击 Google Chrome 动作监听器

> ID：12389063
> 
> 赞同：2
> 
> 时间：2012-09-12T13:15:01.513
> 
> 标签：google-chrome, tabs, google-chrome-extension

我正在尝试制作 chrome 扩展，但无法双击浏览器选项卡。

[我在这里](http://developer.chrome.com/extensions/tabs.html)查看了 Chrome.tab API ，但找不到任何此类功能。有什么方法可以让我们有一种方法来检测标签上的双击。

# jfreechart - JFreeChart SlidingCategoryDataset 图表仅更新轴

> ID：12389066
> 
> 赞同：2
> 
> 时间：2012-09-12T13:15:08.847
> 
> 标签：jfreechart, updates, axis-labels

我已经使用 csv 文件中的数据实现了一个[盒须图。](http://www.java2s.com/Code/Java/Chart/JFreeChartBoxAndWhiskerDemo.htm)
它有很多类别，并且在屏幕上显示得非常紧凑。
因此，我决定将 SlidingCategoryDataset 与 JSlider 一起使用，如此处[所述](https://stackoverflow.com/questions/6844759/jfreechart-scaling-of-boxplots-with-several-categories)。

我认为我的新类使用来自 SlidingCategoryDataset 的扩展 DefaultBoxAndWhiskerDataset 的代码工作正常，因为 x 轴上的类别标签已正确更新。但是图表中的条形保持不变，无论我做什么都不会随时更新。更令人困惑的是，条形图的工具提示确实会正确更新。
当我使用滑块到达数据集的末尾并一次显示例如 10 个类别并且仅剩下 9 个类别时，图表正确显示 9 个条，但不是隐藏第一个条，而是隐藏最后一个条（轴和工具提示是正确更新）。

我用谷歌寻找解决方案，但没有找到我的问题的答案。所以我自己尝试了使用所有可用的更新和重绘方法，因为我认为这一定是一个 GUI 问题，但没有成功。你可以在这里看到我的更新方法：

```
private void sliderChanged(){
    int val = slider.getValue();
    sData.setFirstCategoryIndex(val);// my sliding dataset
    chart = ChartDrawer.draw(sData); // to draw chart again should be unnecessary
    chart.fireChartChanged();
    chartPanel.setChart(chart);
    chartPanel.revalidate();
    chartPanel.repaint();
    chartPanel.updateUI();
    repaint();
} 
```

我现在有点绝望。有人可以帮我吗？或者有人知道另一种显示许多类别的方法吗？
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:45:13.073

[分页方法](https://stackoverflow.com/a/6849654/230513)有效，并且可以很好地扩展。显示的示例使用按钮，但微调器或滑块也可以。

或者，您可以将您的实现与[此处](https://stackoverflow.com/a/8363052/230513)[`SlidingXYDataset`](https://sourceforge.net/p/jfreechart/patches/231/)引用和讨论[的](https://stackoverflow.com/a/8824780/230513)进行比较。

# xcode - 如何在 xcode 中使用其 api 从foursquare 注销？

> ID：12389069
> 
> 赞同：0
> 
> 时间：2012-09-12T13:15:13.417
> 
> 标签：xcode, api, foursquare

我在 xcode 中使用foursquare api。

我所做的是：使用它的 api 我在 forsquare 上成功通过了身份验证，为了注销我在那里看不到任何 api 文档。

我正在使用以下代码但不工作：

```
- (void)logout {
    oAuth4sq=nil;
    oAuth4sq.oauth_token=nil;
    oAuth4sq.oauth_token_secret=nil;
    [oAuth4sq forget];
    [oAuth4sq save];
    //[self resetUi];
} 
```

任何人指导我如何注销用户或终止经过身份验证的 api 的会话？这样我就可以在 webview 中打开一个登录屏幕，而不是让同一个用户已经在那里进行了身份验证。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:13:37.910

应用程序无法终止身份验证密钥 - 用户需要通过[https://foursquare.com/settings/connections](https://foursquare.com/settings/connections)撤销访问权限。

如果希望用户确保用户每次都通过身份验证流程显式登录，请使用 /authorize 而不是 /authenticate 作为 OAuth URL。/authorize 总是要求用户授权应用程序，如果登录用户已经授权应用程序，/authenticate 会自动重定向。

# jsp - jsp页面中的动态灯箱

> ID：12389070
> 
> 赞同：0
> 
> 时间：2012-09-12T13:15:15.447
> 
> 标签：jsp, dynamic, lightbox

我的问题是如果在许多 jsp 页面中某些条件为真，则动态创建灯箱。例如，我有 200 个 jsp 页面，我想添加一个灯箱，仅在其中 50 个页面中显示。为此，我可以使用 web.xml 或数据库。灯箱将作为模块在单独的 jsp 页面中创建。那么如何根据从 web.xml 或数据库中检索到的某些条件在单个页面上创建具有功能的动态灯箱？

先感谢您。

# wix - 如何在 64 位的 wix 安装程序中获取 SQLDataRoot 注册表设置

> ID：12389071
> 
> 赞同：1
> 
> 时间：2012-09-12T13:15:17.647
> 
> 标签：wix

在我的 wix 安装程序中，我有这些属性来获取 sql 数据路径

```
<Property Id="SQLSERVERINSTANCENAME" >
  <RegistrySearch Id="SqlServerInstanceName" Root="HKLM" Key="SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL" Name="MSSQLSERVER" Type="raw"/>
</Property>

<Property Id="SQLSERVERDATAPATH" >
  <RegistrySearch Id="SqlServerDataPath" Root="HKLM" Key="SOFTWARE\Microsoft\Microsoft SQL Server\[SQLSERVERINSTANCENAME]\Setup" Name="SQLDataRoot" Type="raw"/>
</Property> 
```

但它不适用于 64 位 Windows 2008 Server R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:30:36.400

尝试添加`Win64="yes"`，这将告诉`RegistrySearch`在注册表的 64 位中查找。应该添加这将告诉搜索仅查看 64 位部分，如果您需要它来搜索两者，然后使用`Win64="$(var.Platform)"`并指定平台，如下所示：

```
<!-- Define platform-specific names and locations -->
<?if $(var.Platform) = x64 ?>
<?define ProductName = "$(var.ProductName)" ?>
<?define Win64 = "yes" ?>
<?define PlatformProgramFilesFolder = "ProgramFiles64Folder" ?>
<?define PlatformCommonFilesFolder = "CommonFiles64Folder" ?>
<?define UpgradeCode = "98CECA6F-D312-466E-B04F-088ECD9CFCA2" ?>
<?else ?>
<?define ProductName = "$(var.ProductName) (x86)" ?>
<?define Win64 = "no" ?>
<?define PlatformProgramFilesFolder = "ProgramFilesFolder" ?>
<?define PlatformCommonFilesFolder = "CommonFilesFolder" ?>
<?define UpgradeCode = "6B968607-8D3E-45AF-A590-253E54EE4617" ?>
<?endif ?> 
```

# mysql - getSelectCountSql() 不会重置 Group 部分

> ID：12389072
> 
> 赞同：0
> 
> 时间：2012-09-12T13:15:20.237
> 
> 标签：mysql, magento

在*lib/Varien/Data/Collection/Db.php*中有一个方法**getSelectCountSql()**由所有 Magento 集合继承。在此方法中，Select 对象被克隆，并准备专门用于获取集合项的 COUNT 值，而不是加载集合，而是使用轻量级 Select 查询数据库。

准备工作是通过重置 Select 的不必要部分和可能影响 COUNT 结果的部分来完成的。这是代码：

```
public function getSelectCountSql()
{   
    $this->_renderFilters();
    $countSelect = clone $this->getSelect();
    $countSelect->reset(Zend_Db_Select::ORDER);
    $countSelect->reset(Zend_Db_Select::LIMIT_COUNT);
    $countSelect->reset(Zend_Db_Select::LIMIT_OFFSET);
    $countSelect->reset(Zend_Db_Select::COLUMNS);
    ... 
```

我想知道，Magento 工程师没有`$countSelect->reset(Zend_Db_Select::GROUP);`与其他部件一起包含的真正原因是什么。

Magento 似乎没有从一个版本到另一个版本来解决这个问题，我很确定这是一个错误，所以也许我错了？如果有人能解释**不**将 GROUP 部分包含在重置部分列表中的原因，我将不胜感激。

PS这不是[这个问题](https://stackoverflow.com/questions/3485455/using-group-breaks-getselectcountsql-in-magento)的重复，我知道如何添加修复程序，我只是想得到一个解释（如果存在的话）为什么Magento工程师从一开始就没有这样做，并继续忽略这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T16:54:23.223

这不是一个真正的错误，我的假设是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T23:27:44.053

这已在我的 Magento CE 1.9.2.2 中修复（尽管我不确定哪个版本首先包含它）。

# c++ - C++动态发布库和调试库有什么区别？

> ID：12389074
> 
> 赞同：4
> 
> 时间：2012-09-12T13:15:24.570
> 
> 标签：c++, windows

我有一个与 C++ 动态库相关的问题。通常C++动态库由一个.lib文件和一个.dll文件组成。如果我理解得很好，.lib 文件记录了导出函数的位置，而 .dll 包含了实现。我知道release版本有一些优化，因此release dll和debug dll应该是不同的。那么发布库文件和调试库文件的主要区别是什么？有没有办法告诉 lib（或 dll）文件是发布版本还是调试版本？如果发布版本程序调用调试版本库会发生什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T13:26:30.493

请注意，“发布”和“调试”只是一整套编译器和链接器标志和设置的标签，通常内部“发布”构建仍会生成调试信息，但会有更高的优化设置。

因此，没有标准的方法来判断一个 lib 或 DLL 是“发布”还是“调试”版本，除非它由诸如“d”后缀或库的位置之类的东西明确指示。

当“发布”配置可执行文件调用“调试”配置库时会发生什么取决于两者之间不同的特定编译和链接器设置。在几乎所有情况下，你都会遇到很多麻烦，有时非常明显，有时更隐蔽。一些常见的麻烦来源：

*   两个库可能使用不同版本的运行时库，并且可能具有某些变量的不同副本，这些变量应该是静态的，并且在可执行文件中的所有库中都是相同的，例如内存分配池及其计数器 /哨兵。一个症状是你得到奇怪的内存分配/释放错误。

*   这些库可能在标准库中采用不同的约定，例如安全设置或迭代器调试。这将使“标准”容器的内存布局在库中实际上有所不同，如果你很幸运，你会遇到访问冲突，或者如果你不是，你会遇到不可预测的行为。

# php - 将数据存储在 javascript 数组中以供进一步使用

> ID：12389075
> 
> 赞同：1
> 
> 时间：2012-09-12T13:15:24.760
> 
> 标签：php, javascript, ajax

我有页面用户，其中显示了一些基本数据：个人资料照片、昵称、年龄、位置等。当您单击个人资料时，它会使用 ajax 加载数据并在弹出窗口中显示用户个人资料。因此，您保持在同一页面上。

但是每次 ajax 调用都需要一些时间来调用服务器端代码并​​获取数据。它并不慢，但我想让用户个人资料显示速度超快。我在想，如果我在获取配置文件列表时首先提取所有配置文件数据会快得多。我可以提取所有配置文件数据，而不是只在用户页面上获取一些数据。然后我可以将javascript中的数据保存为数组。当用户单击配置文件时，它不会进行 ajax 调用，但会从 javascript 数组中提取数据。通过这种方式，我认为弹出窗口会很快显示出来。

到目前为止，这只是想法。可以将我收到的数据存储在 javascript 数组中还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:22:49.467

使用 javascript 对象

在 php 中获取用户信息并将它们传递给 html 中的 js 中的函数

```
<script>buildUserInfo(array('user_id,yaz,20,male,837367.jpg',....));</script> 
```

然后创建一个 js 对象，但是这些值在

```
var userObject = new Object();
function buildUserInfo(data){
  for(var i=0;i<data.length();i++){
    var dataIn = data[i].split(',');
    userObject[user_id].name = dataIn[0]; 
    userObject[user_id].age = dataIn[1]; 
    userObject[user_id].gender = dataIn[2]; 
    userObject[user_id].photo = dataIn[3]; 
}} 
```

然后你可以通过简单地调用对象来访问它们，如果你想要名字只是调用 `userObject[user_id].name`

更新：通过创建对象数组为多个用户编辑上面的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:40:13.100

为什么不使用 JSON？像这样在页面加载时初始化 json 对象，您将立即拥有所有数据，而无需任何 ajax 请求。

```
var users = <?php echo json_encode($users); ?>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:34:40.547

我建议使用[localStorage](http://diveintohtml5.info/storage.html)：

> *那么什么是 HTML5 存储？简而言之，这是网页在客户端 Web 浏览器中本地存储命名键/值对的一种方式。与 cookie 一样，即使您离开网站、关闭浏览器选项卡、退出浏览器或您拥有什么，这些数据也会持续存在。与 cookie 不同，此数据永远不会传输到远程 Web 服务器（除非您特意手动发送）。*

尽管并非所有旧版浏览器都支持它是一项较新的功能，但您可以使用[jStorage](http://www.jstorage.info/)之类的库来缓解这些情况。

> *jStorage 利用可用的 HTML5 本地存储和 Internet Explorer 旧版本中的 userData 行为。*

# c# - 如何从 .csv 文件创建 google-drive 电子表格？

> ID：12389076
> 
> 赞同：1
> 
> 时间：2012-09-12T13:15:25.507
> 
> 标签：c#, .net, google-drive-api

我想从 .csv 文件创建电子表格。代码：

```
static void Main()
        {
            String CLIENT_ID = "<MY ID>";
            String CLIENT_SECRET = "<MY SECRET>";

            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);
            var service = new DriveService(auth);

            File body = new File();
            body.Title = "My spread";
            body.Description = "A test spread";
            body.MimeType = "application/vnd.google-apps.spreadsheet";

            byte[] byteArray = System.IO.File.ReadAllBytes("spread.csv");
            System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);

            service.Files.Insert(body, stream, "application/vnd.google-apps.spreadsheet").Upload();
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            string[] scopes = new string[] { "https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/userinfo.profile" };
            IAuthorizationState state = new AuthorizationState(scopes);
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);
        } 
```

插入文件并在 google-drive 页面上单击它（登录为所有者）后，我收到消息

*“很抱歉。无法找到此 URL 中的电子表格。请确保您拥有正确的 URL 并且电子表格的所有者没有将其删除”*

当我将 MimeType 更改为“text/csv”并插入文件时，单击它后，我收到消息 *“没有可用的预览 此项目是使用 Google Drive 应用程序 (MyApp'sName) 创建的。下载此文件或使用其中一个您安装的应用程序可以打开它。”*

我还可以右键单击此文件（使用“text/csv”MimeType 创建的文件）并选择*“导出到 Google Docs”*选项，这给了我想要达到的结果 - 带有我的 .csv 文件内容的电子表格文件. 但是这种间接的方法并不能完全满足我。有什么方法可以在谷歌驱动器上制作电子表格文件，内容来自我的应用程序中的 .csv 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:14:57.580

我不知道 c#，但在它反映 Java 的基础上，在行内

> service.Files.Insert(body, stream, "application/vnd.google-apps.spreadsheet").Upload();

你需要插入相当于

> .setConvert(真)

还 ...

mimetype 应该是“text/csv”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T14:16:52.117

我找到了答案:)

如何以编程方式将文件转换为适当的 Google 文档格式：

```
var service = new DriveService(new BaseClientService.Initializer
{
    ...
});

...

FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, _mimeType);
request.Convert = true;
request.Upload(); 
```

# iphone - CoreData 对象类型不起作用

> ID：12389077
> 
> 赞同：0
> 
> 时间：2012-09-12T13:15:26.707
> 
> 标签：iphone, core-data, properties, nsmanagedobject

有人可以向我解释为什么这不起作用：

```
CoreDataClass *classObject = (CoreDataClass *)[some method that returns a dictionary with exact KVC pairs that match CoreDataClass];

NSString *myString = classObject.stringProperty; 
```

但这确实：

```
CoreDataClass *classObject = (CoreDataClass *)[some method that returns a dictionary with exact KVC pairs that match CoreDataClass];
NSString *myString = [classObject valueForKey:@"stringProperty"]; 
```

编辑：将字典转换为我的 NSManagedObjectClass CoreDataClass 以便我可以直接访问属性的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:38:13.750

它不起作用，因为 KVC 合规性根本不是定义类或使它们可转换的东西——类层次结构的存在是有原因的，仅仅确保遵守某些方法并不能神奇地使某些东西成为完全不同类的实例。请记住，点访问器语法只是方法发送的糖，所以这两个是等价的：

*   `classObject.stringProperty`
*   `[classObject stringProperty]`

...而后者显然对 NSDictionary 的实例无效（即`[[NSDictionary class] instancesRespondToSelector:@selector(stringProperty)]`is `NO`）。

您的后一个示例之所以有效，是因为您的问题的前提是：如果某些东西对 key 是 KVC 兼容的`stringProperty`，并且您要求它为该 key 提供一个值，那么显然您会得到一些回报。此外， NSDictionary 和 CoreDataClass 都响应选择器`-valueForKey:`，因此消息发送实际上在运行时起作用。

将两者结合起来的最佳方式根本不是“强制转换”——它是在属性级别上对所涉及的数据进行的完全转换。您可能会考虑`-initWith...`在 CoreDataClass 上创建一个自定义方法，让您从字典中实例化其属性，或者找到一种方法让您的方法返回 CoreDataClass 的实际实例而不是 NSDictionary。

请注意，此解决方案可能与获取数据的“最简单”方式不同，后者有效地继续做您正在做和使用的事情`-valueForKey:`（尽管最好没有演员表，这是误导）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:40:46.803

转换对象*似乎只起作用*（从某种意义上说，你不会得到类型检查错误），因为它是对编译器的提示，但它实际上并没有改变指针指向的任何内容，所以你仍然指向一个NSDictionary。这是因为，归根结底，您实际上是将指针转换为指针，但告诉 Xcode 您可以向它发送一组不同的选择器。

对于 NSManagedObjects，从字典创建取决于一些事情，但推荐的方法是在您的自定义类上创建一个类方法，该方法将使用 NSEntityDescription 和您的 NSManagedObjectContext，并将字典中的属性设置为对象：

```
+(CoreDataClass *) coreDataObjectWithDictionary:(NSDictionary *) spec {
  CoreDataClass *myInstance = [NSEntityDescription insertNewObjectForEntityForName: @"CoreDataClass" inManagedObjectContext: [myMOCProvider sharedMOC];
  myInstance.someProp = [spec valueForKey:@"someProp"];
} 
```

# java - 使用 Java Rally Rest API 在拉力赛中将测试用例添加到测试集中

> ID：12389080
> 
> 赞同：2
> 
> 时间：2012-09-12T13:15:37.960
> 
> 标签：java, web-services, rest, rally

我想使用 Java Rally Rest API 将测试用例（已经存在于测试文件夹中的 Rally 中）添加到新创建的测试集中。基本上每次我想通过 Rally 执行测试用例时，我都需要创建新的测试集并在测试集中添加相关的测试用例（优先级、自动化/手动）。对此的任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:29:13.697

测试用例通过 WSAPI 中 TestSet 上的 TestCases 集合与测试集相关联。此代码示例演示了创建几个测试用例，然后创建与新创建的测试用例关联的测试集。

```
RallyRestApi restApi = new RallyRestApi(new URI(SERVER),
    USERNAME, PASSWORD);

try {

    //Create some test cases
    JsonArray testCases = new JsonArray();
    for(int i = 0; i < 3; i++) {
        JsonObject newTestCase = new JsonObject();
        newTestCase.addProperty("Name", "New Test Case " + i);
        CreateRequest createRequest = new CreateRequest("testcase", newTestCase);
        CreateResponse createResponse = restApi.create(createRequest);
        String ref = createResponse.getObject().get("_ref").getAsString();
        System.out.println(String.format("Created test case %s", ref));

        //Keep track of the test case
        JsonObject testCase = new JsonObject();
        testCase.addProperty("_ref", ref);
        testCases.add(testCase);
    }

    //Create test set
    JsonObject newTestSet = new JsonObject();
    newTestSet.addProperty("Name", "New Test Set");
    newTestSet.add("TestCases", testCases);
    CreateRequest createRequest = new CreateRequest("testset", newTestSet);
    CreateResponse createResponse = restApi.create(createRequest);
    System.out.println(String.format("Created test set %s", createResponse.getObject().get("_ref").getAsString()));

} finally {
    //Release all resources
    restApi.close();
} 
```

# windows-services - 使用 WiX，降级后未安装 Windows 服务

> ID：12389081
> 
> 赞同：1
> 
> 时间：2012-09-12T13:15:39.237
> 
> 标签：windows-services, wix, windows-installer, wix3.6, downgrade

在测试我们的一个 WiX 构建的 MSI 的**降级**功能时，我注意到了一些奇怪的事情。

我已允许**MajorUpgrade**元素中的降级，并且我已将该元素安排为**afterInstallInitialize**（但我已经用**afterInstallValidate**彻底尝试过，我遇到了同样的问题；我们不能在该操作之后拥有它，但我想我会测试它）。

许多文件（例如我们服务的 bin 文件夹中的 DLL）都是更高版本的，每个版本都有；因此，我们降级到的版本包含较低版本的文件。然而，在降级期间，除了服务 EXE 文件之外，所有这些文件都安装得很好；此外，服务也未安装在 Windows 中。

考虑到以上所有，在这个问题上花了两天时间，经过大量搜索，我似乎不知所措。

我尝试了两件事似乎带来了一些希望：

1) 我尝试将**REINSTALLMODE**属性设置为**amus**。这可确保安装 EXE 文件以及 Windows 服务。但是我读到的关于该属性的大多数内容都警告不要使用它，我什至必须在设置该属性时**取消 ICE40**才能构建我的包。这一切都与我有关，因为我不确定如果我在我的 MSI 文件中使用此属性会遗漏哪些负面影响。

2）当我从标记服务 EXE 文件的**File元素中删除****KeyPath**属性并将该属性放在**Component**元素上时，降级期间将服务 EXE 文件安装到系统上，但服务仍未安装在视窗。调查后，如果我想安装服务，似乎**KeyPath**属性必须在**File元素上。**所以在我看来，这个想法似乎无济于事。

 ******任何帮助或建议将不胜感激。我们真的可以提供降级功能。

谢谢大家的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:34:51.680

MSI本质上反对降级的想法。一旦文件在计算机上，MSI 会非常努力地保留文件的最新版本，除其他原因外，降级文件可能会重新引入安全漏洞。我建议不要直接支持降级；相反，您可以显示一条消息，告诉用户先卸载更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T00:29:28.920

我的解决方案是使用 Burn 通过自定义引导程序应用程序提供“降级”功能。

引导程序检测、下载并安装新版本。在降级的情况下，它会在安装之前执行卸载。但是，这需要您执行当前安装版本的引导程序才能获得卸载能力。

然后，您还需要担心由于卸载而被删除的任何状态，这需要像升级期间一样保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T17:19:54.053

使用 Wix，要允许降级并在降级时仍然正确安装 Windows 服务，请使用以下组合：

```
<Wix ...>
  <Product ...>
    <Property Id="REINSTALLMODE" Value="amus" />
    <MajorUpgrade Schedule="afterInstallInitialize" AllowDowngrades="yes" /> 
```

我还使用[WixSharp](https://github.com/oleg-shilo/wixsharp)生成 .wxs 文件并使用此代码执行此操作：

```
// https://docs.microsoft.com/en-us/windows/win32/msi/reinstallmode
// a = Force all files to be reinstalled, regardless of checksum or version.
// m = Rewrite all required registry entries from the Registry Table that go to the HKEY_LOCAL_MACHINE or HKEY_CLASSES_ROOT registry hive. Rewrite all information from the Class Table, Verb Table, PublishComponent Table, ProgID Table, MIME Table, Icon Table, Extension Table, and AppID Table regardless of machine or user assignment.Reinstall all qualified components.When reinstalling an application, this option runs the RegisterTypeLibraries and InstallODBC actions.
// u = Rewrite all required registry entries from the Registry Table that go to theHKEY_CURRENT_USER or HKEY_USERS registry hive.
// s = Reinstall all shortcuts and re-cache all icons overwriting any existing shortcuts and icons.
project.AddXml("Wix/Product", "<Property Id=\"REINSTALLMODE\" Value=\"amus\" />");

// Allow downgrading versions
// https://wixtoolset.org/documentation/manual/v3/xsd/wix/majorupgrade.html
project.AddXml("Wix/Product", "<MajorUpgrade Schedule=\"afterInstallInitialize\" AllowDowngrades=\"yes\" />"); 
```

也可以看看：

*   [https://docs.microsoft.com/en-us/windows/win32/msi/reinstallmode](https://docs.microsoft.com/en-us/windows/win32/msi/reinstallmode)
*   [https://wixtoolset.org/documentation/manual/v3/xsd/wix/msiproperty.html](https://wixtoolset.org/documentation/manual/v3/xsd/wix/msiproperty.html)
*   [https://wixtoolset.org/documentation/manual/v3/xsd/wix/majorupgrade.html](https://wixtoolset.org/documentation/manual/v3/xsd/wix/majorupgrade.html)******

# sql - 如何设置日期时间的一部分

> ID：12389084
> 
> 赞同：2
> 
> 时间：2012-09-12T13:15:48.740
> 
> 标签：sql, sql-server, datetime

我只需要将日期时间的小时设置为某个值。我知道我可以将它添加到所需值的差异，或者使用原始日期时间的部分创建一个新的日期时间，但是没有更清洁的方法吗？就像是：

```
declare @d datetime = '09/08/2012 09:14:55'

set @d = SETDATEPARTORSOMETHINGLIKETHAT (hour, @d, 23) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:17:26.100

```
DECLARE @TargetHour TINYINT = 23;

DECLARE @d datetime = '09/08/2012 09:14:55';
SET @d = DATEADD(HOUR, @TargetHour - DATEPART(HOUR, @d), @d);
SELECT @d; 
```

结果：

```
2012-09-08 23:14:55.000 
```

（是的，如果 @TargetHour*小于*当前小时，例如 5 或 7，这将起作用。）

我会非常小心使用像 m/d/y 这样的模棱两可和容易出错的格式。恰当的例子：我什至不知道您是指 9 月 8 日还是 8 月 9 日，SQL Server 也不会知道 - 它需要使用区域设置等来弄清楚，如果您将代码提供给设置不同的人，它会产生错误，或者更糟糕的是，默默地接受错误的日期。你应该使用：

```
DECLARE @d datetime = '2012-09-08T09:14:55'; 
```

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# google-apps-script - 如何对 Google Docs/Drive 文档中的标题进行编号？

> ID：12389088
> 
> 赞同：132
> 
> 时间：2012-09-12T13:16:05.937
> 
> 标签：google-apps-script, google-docs, google-drive-api

是否可以对 Google Docs/Drive 文档中的标题进行编号？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2014-05-07T16:35:01.060

如果你想要一些更简单的东西，有一个名为[“目录”](https://workspace.google.com/marketplace/app/table_of_contents/975727178255)的谷歌插件可以让你给你的标题编号。

要安装此插件：

1.  单击附加组件 > 获取附加组件。
2.  单击“目录”图标或搜索此插件进行安装

然后你的目录应该出现在你的侧边栏中。单击标题编号格式菜单，然后选择 1.2.3

如果您有旧文档，则必须重新格式化文档才能“刷新”数字，但实际上插件运行良好。

我[在这个论坛上看到了答案](https://productforums.google.com/forum/#!topic/docs/w4MXeqJaefU)。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-02-06T17:01:00.397

**更新：**现在在[github](https://github.com/lpanebr/autoNumberHeadings)中可用。

**更新 2：**由于 github 上的 2 个拉取请求，现在可以处理空标题和空行。

**更新 3：** github 和下面的代码已修复以处理新的 Docs HEADING 标识。

* * *

我修改了[Mikko Ohtamaa 提到的脚本](http://pro-web.at/archives/auto-numbering-your-google-docs-headings)并创建了一个 Google Apps 脚本，它添加了一个**标题工具**文档菜单，允许您：

*   自动编号标题
*   清除标题编号

**如何为 Google 文档标题自动编号：**

1.  打开您的文档 > 工具 > 脚本编辑器...
2.  开始一个空白项目
3.  粘贴下面的代码并使用您的首选名称保存
4.  选择 Run > onOpen 并首次授权脚本
5.  选择运行 > onOpen
6.  切换到您的文档并尝试创建的**标题工具**自定义菜单上的功能。

~~**免责声明：**您可能会遇到空标题的问题。但您可以随时修复它们并再次运行。~~

**要复制和粘贴的代码：**

```
function onOpen() {
  DocumentApp.getUi().createMenu('Headings Tools')
  .addItem('Auto Number Headings', 'numberHeadingsAdd')
  .addItem('Clear Heading Numbers', 'numberHeadingsClear')
  .addToUi();
}

function numberHeadingsAdd(){
  numberHeadings(true);
}

function numberHeadingsClear(){
  numberHeadings(false);
}

function numberHeadings(add){
  var document = DocumentApp.getActiveDocument();
  var body = document.getBody();
  var paragraphs = document.getParagraphs();
  var numbers = [0,0,0,0,0,0,0];
  for (var i in paragraphs) {
    var element = paragraphs[i];
    var text = element.getText()+'';
    var type = element.getHeading()+'';

    // exclude everything but headings
    if (!type.match(/HEADING\d/)) {
      continue;
    }

    // exclude empty headings (e.g. page breaks generate these)
    if( text.match(/^\s*$/)){
      continue;
    }

    if (add == true) {
      var level = new RegExp(/HEADING(\d)/).exec(type)[1];
      var numbering = '';

      numbers[level]++;
      for (var currentLevel = 1; currentLevel <= 6; currentLevel++) {
        if (currentLevel <= level) {
          numbering += numbers[currentLevel] + '.';
        } else {
          numbers[currentLevel] = 0;
        }
      }
      Logger.log(text);
      var newText = numbering + ' ' + text.replace(/^[0-9\.\s]+/, '');
      element.setText(newText);
      Logger.log([newText]);
    } else {
      Logger.log(text);
      element.setText(text.replace(/^[0-9\.\s]+/, ''));
    }
  }

} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2020-04-07T14:05:48.227

自写作（2020 年 4 月）以来，许多提议的应用程序都已过时或不再工作。

我发现编号标题的方法如下：

1.  转到获取附加组件
2.  搜索并安装*Markdown 工具*

Markdown 工具有一个使用编号标题的选项。使用内置的 Google 目录就像一个魅力。

要创建目录：

1.  转到菜单项*插入*并选择*目录*

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-23T09:21:09.647

您所要做的就是复制/粘贴以前的标题。

如果您复制并粘贴编号列表的任何项目，则它会保留其编号，并在相关情况下自动更改编号。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-30T20:24:34.880

我写了一个做降价标题的版本，但它也支持普通的标题数字。源代码在这里[https://github.com/jordan2175/markdown-tools](https://github.com/jordan2175/markdown-tools)并且可以通过 G Suite Marketplace 作为“Markdown 工具”获得。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-04T17:42:22.790

截至今天，前面提到的附加“目录”不可用。我安装了一个名为“ [Markdown Tools](https://gsuite.google.com/marketplace/app/markdown_tools/788541604518?hl=es&pann=cwsdp) ”的工具 安装后，您必须应用原生标题样式，然后转到**附加组件>Markdown 工具>标题编号**，然后选择将应用于文档中所有标题的所需编号样式。

# c - glib2 是否真的使用 ALWAYS-MALLOC 泄漏内存？

> ID：12389092
> 
> 赞同：4
> 
> 时间：2012-09-12T13:16:13.637
> 
> 标签：c, memory-leaks, valgrind, glib

这个问题**与**许多其他问题不同，因为我**确实**使用过`G_DEBUG=gc-friendly`，`G_SLICE=always-malloc` 这是源代码：

```
#include <glib.h>

int main (int argc, char *argv[])
{
    GHashTable *ht;
    ht=g_hash_table_new(g_str_hash,g_str_equal);
    g_hash_table_insert(ht,"foo","bar");
    g_hash_table_destroy(ht);
    return 0;
} 
```

这是 Valgrind 对此代码的输出：

```
# G_DEBUG=gc-friendly G_SLICE=always-malloc valgrind --leak-check=full --show-reachable=yes ./test_vg
==1880== Memcheck, a memory error detector
==1880== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==1880== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info
==1880== Command: ./test_vg
==1880==
==1880==
==1880== HEAP SUMMARY:
==1880==     in use at exit: 1,260 bytes in 3 blocks
==1880==   total heap usage: 5 allocs, 2 frees, 1,524 bytes allocated
==1880==
==1880== 252 bytes in 1 blocks are still reachable in loss record 1 of 3
==1880==    at 0x4A04A28: calloc (vg_replace_malloc.c:467)
==1880==    by 0x35C8241707: g_malloc0 (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C8255742: ??? (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C825669D: g_slice_alloc (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C822B1D2: g_hash_table_new_full (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x400671: main (in /home/data/test_vg)
==1880==
==1880== 504 bytes in 1 blocks are still reachable in loss record 2 of 3
==1880==    at 0x4A04A28: calloc (vg_replace_malloc.c:467)
==1880==    by 0x35C8241707: g_malloc0 (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C8255722: ??? (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C825669D: g_slice_alloc (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C822B1D2: g_hash_table_new_full (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x400671: main (in /home/data/test_vg)
==1880==
==1880== 504 bytes in 1 blocks are still reachable in loss record 3 of 3
==1880==    at 0x4A04A28: calloc (vg_replace_malloc.c:467)
==1880==    by 0x35C8241707: g_malloc0 (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C825578B: ??? (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C825669D: g_slice_alloc (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x35C822B1D2: g_hash_table_new_full (in /lib64/libglib-2.0.so.0.2200.5)
==1880==    by 0x400671: main (in /home/data/test_vg)
==1880==
==1880== LEAK SUMMARY:
==1880==    definitely lost: 0 bytes in 0 blocks
==1880==    indirectly lost: 0 bytes in 0 blocks
==1880==      possibly lost: 0 bytes in 0 blocks
==1880==    still reachable: 1,260 bytes in 3 blocks
==1880==         suppressed: 0 bytes in 0 blocks
==1880==
==1880== For counts of detected and suppressed errors, rerun with: -v
==1880== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 6) 
```

是内存泄漏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-16T18:00:43.000

回答你的问题：不，这不是传统意义上的内存泄漏。你的代码很好。

即使你使用`G_DEBUG=gc-friendly`and `G_SLICE=always-malloc`，GLib 总是在退出时留下“仍然可以访问”的内存。不要使用该`--show-reachable=yes`选项，否则在使用 GLib 时，您将始终得到污染的 Valgrind 输出。但是，如果您分配在静态或全局变量中保存指针的内存（“仍可访问”内存），请小心。在这种情况下，您最终可能会忽略您自己的“真实”泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T18:22:42.013

在使用 Valgrind 检查 GLib 2 程序时，我总是遇到很多错误和无法访问的项目。在您的情况下，泄漏似乎来自哈希表的创建。我会创建第二个哈希表，看看你是否得到了额外的块（否则，它可能是 GLib 中的一些内部初始化）。

wiki.gnome.org 上有一些关于将 Valgrind 与 GLIB 和 GTK 结合使用[的说明](https://wiki.gnome.org/Valgrind)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-20T06:49:59.017

尝试传递`--suppressions=/usr/share/glib-2.0/valgrind/glib.supp`给`valgrind`. 它抑制了来自 GLib 的误报。

# python - NLTK 最大熵分类器原始分数

> ID：12389093
> 
> 赞同：2
> 
> 时间：2012-09-12T13:16:14.180
> 
> 标签：python, machine-learning, nltk, classification

这是我关于stackoverflow的第一个问题，请多多包涵。

我正在做一些语料库建设，特别是尝试编写高棉语/英语平行句语料库。我正在使用一些手动配对的句子来训练最大熵分类器，它将从我的并行文档语料库中选择更多的并行句子对。

我的问题是我几乎没有人工注释的训练数据来训练分类器。因此，它不是一个很好的分类器。因此，我的老师建议我查看 MaxEnt 分类器的原始分数，看看是否存在某个分数阈值，高于该阈值人类判断会发现分类为翻译的句子对实际上是彼此的翻译。

但是，我正在使用 NLTK 的 MaxEnt 分类器，但我找不到一个函数可以为我提供分类器用来决定是或否的原始分数。

NLTK 的 MaxEnt 分类器有这个功能，还是没有办法找出分类器的原始分数？是否有一个具有更好 MaxEnt 分类器的软件包，可以为您提供我应该使用的原始分数？

提前感谢您的帮助和建议！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:26:31.223

[`prob_classify`](http://nltk.org/api/nltk.classify.html#nltk.classify.maxent.MaxentClassifier.prob_classify)给出概率分数。

如果您正在寻找替代的 MaxEnt 分类器，那么 scikit-learn 有两种实现方式（[一种基于 liblinear](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html)，[一种使用 SGD training](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html)），两者都可以包装在 NLTK[`SklearnClassifier`](http://nltk.org/api/nltk.classify.html#module-nltk.classify.scikitlearn)中。scikit-learn 调用 MaxEnt 逻辑回归，这是 NLP 社区之外更常见的术语。

（我可能有偏见，因为我是 scikit-learn 的贡献者并且我写了 scikit-learn `SklearnClassifier`，但是 SciPy 的人们现在也推荐 scikit-learn 而不是他们自己的已弃用的`scipy.maxentropy`包，这`MaxentClassifier`是基于它的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:53:45.780

您可能有兴趣阅读我最近的博客：

[http://mattshomepage.com/#/blog/feb2013/liftingthehood](http://mattshomepage.com/#/blog/feb2013/liftingthehood)

这是关于理解 nltk.ne_chunk 函数是如何工作的。但这里有一些我写的代码，你可以快速复制和粘贴，你可能会觉得有帮助：

```
import nltk

# Loads the serialized NEChunkParser object
chunker = nltk.data.load('chunkers/maxent_ne_chunker/english_ace_multiclass.pickle')

# The MaxEnt classifier
maxEnt = chunker._tagger.classifier()

def ne_report(sentence, report_all=False):

    # Convert the sentence into a tokens with their POS tags
    tokens = nltk.word_tokenize(sentence)
    tokens = nltk.pos_tag(tokens)

    tags = []
    for i in range(0, len(tokens)):
        featureset = chunker._tagger.feature_detector(tokens, i, tags)
        tag = chunker._tagger.choose_tag(tokens, i, tags)
        if tag != 'O' or report_all:
            print '\nExplanation on the why the word \'' + tokens[i][0] + '\' was tagged:'
            featureset = chunker._tagger.feature_detector(tokens, i, tags)
            maxEnt.explain(featureset)
        tags.append(tag) 
```

report_all 标志将让您查看*每个*单词是如何被挑选的，但您可能只对命名实体的挑选方式感兴趣——默认情况下它设置为 False。

只需输入您喜欢的任何句子，例如“我喜欢 Apple 产品”。并且它将报告 MaxEnt 分类器选择该命名实体的原因的解释。它还将报告可能已选择的其他标签的一些概率。

NLTK 的开发人员提供了一个 .explain() 方法，而这正是该函数所使用的。

# iphone - 如何在 iphone 项目中添加 C++ 文件

> ID：12389102
> 
> 赞同：1
> 
> 时间：2012-09-12T13:16:48.953
> 
> 标签：iphone, c++, objective-c, xcode

我有一个 iPhone 项目，在这个项目中我想使用 c++ 文件。我创建了如下的 c++ 文件：

**File->New File -> C/C++ files -> C++ File** 并命名为**ClassA.cpp**

**在 ClassA.cpp 中**

```
#include <iostream>

class ClassA
{
  public:
    int a, b;

    void add();

};

void ClassA::add()
{

//    printf("sdf");
} 
```

**在我的 viewController.mm 文件中：**

```
#import "ViewController.h"
#import "ClassA.cpp"
- (void)viewDidLoad
{
    ClassA a;
    a.add();

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

我读了一些帖子说我将 .m 重命名为 .mm 所以我将所有 .m 文件重命名为 .mm 并添加了两个链接器标志

```
-cclib -lstdc++ 
```

但它给出了以下错误：

![在此处输入图像描述](../Images/49cd7e9422c05efca6e891d7c0a0c212.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:19:37.580

您需要将 C++ 部分拆分为头文件和`cpp`文件，否则`ClassA::add`将被定义两次。

类A.h：

```
#include <iostream>

class ClassA
{
  public:
    int a, b;

    void add();

}; 
```

A类.cpp：

```
#include "ClassA.h"
void ClassA::add()
{

//    printf("sdf");

} 
```

您的 .mm 文件：

```
#import "ClassA.h"
... the rest of the file ... 
```

# jquery - jQuery / PHP：如何让 slideToggle 只打开一行而不是全部？

> ID：12389104
> 
> 赞同：0
> 
> 时间：2012-09-12T13:16:51.747
> 
> 标签：jquery, events, row, slidetoggle

我的表有一个小问题，用 DIV 编码。如果我点击一行，它会打开每一行，但我只想打开我点击的那一行，逻辑上。这是我的例子：

[http://jsfiddle.net/autodidact/QPP5S/11/](http://jsfiddle.net/autodidact/QPP5S/11/)

**问题代码**

```
<div class="table">
<div class="table_headline">
<div class="cell_1">When?</div>
<div class="cell_2">What?</div>
<div class="cell_3">Who?</div>
<div class="cell_4">Where?</div><br>
</div>  

<div class="row">
<div class="cell_1">Date</div>
<div class="cell_2">Concert</div>
<div class="cell_3">Artist #1 + Artist #2 + Artist #3</div>
<div class="cell_4">Venue</div><br>
</div>
<div class="info">Infos</div>

<div class="row">
<div class="cell_1">Date</div>
<div class="cell_2">Concert</div>
<div class="cell_3">Artist #1 + Artist #2 + Artist #3</div>
<div class="cell_4">Venue</div><br>
</div>
<div class="info">Infos</div>

<div class="row">
<div class="cell_1">Date</div>
<div class="cell_2">Concert</div>
<div class="cell_3">Artist #1 + Artist #2 + Artist #3</div>
<div class="cell_4">Venue</div><br>
</div>
<div class="info">Infos</div>
</div>

<script>$(document).ready(function() {
$('.row').on('click', function() {
    $(this).closest('.table').find('.info').slideToggle();
})
})
</script> 
```

**编辑：**我正在使用 PHP 来获取所有事件。所以小提琴代码只是一个例子。

**编辑#2：**添加了问题代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:23:58.630

您可以简单地替换`.closest('.table').find('.info')`为`.next('.info')`.

演示：http: [//jsfiddle.net/8QqCh/](http://jsfiddle.net/8QqCh/)

您正在选择具有类的所有元素，`.info`而不仅仅是下一个元素。

检查[.next()的 jQuery 文档](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:24:19.237

改变这个：

```
$(this).closest('.table').find('.info').slideToggle(); 
```

为了这：

```
$(this).next().slideToggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:27:52.317

试试这个作为 jquery 选择器：

```
$('.row').on('click', function() {        
    $(this).next('.info').slideToggle();  
}) 
```

# java - RunTimeException:cannot serialize: Error to send byte array from android to java application through ksoap

> ID：12389105
> 
> 赞同：3
> 
> 时间：2012-09-12T13:17:06.273
> 
> 标签：java, android, serialization, bytearray, android-ksoap2

我必须从 Android 设备向我的 java 应用程序发送字节数组。我在 android 中使用 ksoap2，并且我在 java 中使用axis2创建了 Web 服务来接收该字节数组并在服务器上创建文件以进行进一步处理。

让我给你完整的解释。我在 android 设备中录制一个波形文件，然后该波形文件需要在服务器上的 java 应用程序中发送。我在 java 应用程序中创建了一个 web 服务，axis2 名称为“get_wave_byte”将传入的字节数组再次转换为波形文件并将其存储在服务器中。并且从 android 设备我将波形文件作为字节数组以及 get_wave_byte() 参数中的存储路径发送。

因此，为此我在 android 中创建了波形文件，之后我创建了一种将波形文件转换为字节数组的方法。将波形文件转换为字节数组的方法如下...

```
public static byte[] getBytesFromFile(File file) throws IOException {
        InputStream is = new FileInputStream(file);

        // Get the size of the file
        long length = file.length();

        // You cannot create an array using a long type.
        // It needs to be an int type.
        // Before converting to an int type, check
        // to ensure that file is not larger than Integer.MAX_VALUE.
        if (length > Integer.MAX_VALUE) {
            // File is too large
        }

        // Create the byte array to hold the data
        byte[] bytes = new byte[(int)length];

        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < bytes.length
               && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
            offset += numRead;
        }

        // Ensure all the bytes have been read in
        if (offset < bytes.length) {
            throw new IOException("Could not completely read file "+file.getName());
        }

        // Close the input stream and return bytes
        is.close();
        return bytes;
    } 
```

所以基本上现在我使用以下代码将这些字节数组发送到java应用程序......

```
 File source_for_byte=new File(outFilename);//Here is my wave file 
```

//创建临时字节数组以将文件存储在字节数组中

```
 byte[] temp = new byte[(int) source_for_byte.length()]; 
```

//然后像上面所说的那样调用我的方法，将文件转换为字节数组

```
temp=getBytesFromFile(source_for_byte); 
```

从这里我使用 ksoap2 调用 java 应用程序方法，其中这些数组字节作为参数，并将字符串作为文件路径，使用 get_wav_byte() 方法存储在服务器上

```
 String NAMESPACE = "http://test.com";
                String SOAP_ACTION = NAMESPACE + METHOD_NAME;
                // NAMESPACE + method name
                final String URL = "http://192.168.3.106:8080/axis2/services/speechmain?wsdl";

                    METHOD_NAME = "get_wav_byte";
                    try {
                        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                        request.addProperty("wavbite",temp);

                        request.addProperty("path", "D:\\sound\\latest_recognizer.wav");
                        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                                SoapEnvelope.VER11);
                        envelope.dotNet = true;
                        envelope.setOutputSoapObject(request);
                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                        androidHttpTransport.call(SOAP_ACTION, envelope);
                        Object result = envelope.getResponse();
                        ((TextView) findViewById(R.id.gettext1)).setText("NUMBER IS :->   "
                                 + result.toString());

                    } catch (Exception E) {
                        E.printStackTrace();
                        ((TextView) findViewById(R.id.gettext1)).setText("ERROR:"
                                + E.getClass().getName() + ":" + E.getMessage());
                    } 
```

而我的java应用程序方法是我从android调用如下......

```
 public int get_wav_byte(byte[] wavbite,String path){

        try
            {
                File dstFile = new File(path);
                FileOutputStream out = new FileOutputStream(dstFile);
                    out.write(wavbite, 0, wavbite.length);
                out.close();               
            }
            catch (IOException e)
            {
              System.out.println("IOException : " + e);
            }

         return 0;
         } 
```

我的问题是当我运行我的android应用程序来调用这个网络服务时，它给了我以下错误

```
 java.lang.runtimeexception:cannot serialize:[B@40781280] 
```

还有一件事我想告诉我，我正在使用以下代码从我的 .net 应用程序调用相同的 Java 方法。

```
static void Main(string[] args)
        {
            byte[] byteArrayFile = File.ReadAllBytes("D:/Projects/ConsoleApplication1/ConsoleApplication1/1347452692320.wav");

            String mypath="D:\\sound\\bhavik_latest_copy_recorded.wav";

            short[] shortwave=ConvertBytesToShorts(byteArrayFile);
          Speech_service.speechmainPortTypeClient obj = new Speech_service.speechmainPortTypeClient();

            obj.get_wav_byte(byteArrayFile,mypath);
} 
```

而且它就像 Champ 一样工作并轻松存储我的波形文件

那么我的android代码中出现错误的问题是什么。

你能告诉我出了什么问题吗？

先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T09:48:32.080

好的。我已经解决了我的错误

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);

            new MarshalBase64().register(envelope); // serialization 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-20T19:22:00.453

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    new MarshalBase64().register(envelope);   // this is will over Cannot serialize: [B@f034108 

    envelope.dotNet = true;
    //Set output SOAP object
    envelope.setOutputSoapObject(request);
    //Create HTTP call object
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAPACTION, envelope);
        SoapObject response = (SoapObject) envelope.getResponse(); 
```

# asp.net - 图像控件 SRC 中的 Concat Web.config 值和字符串

> ID：12389109
> 
> 赞同：0
> 
> 时间：2012-09-12T13:17:26.940
> 
> 标签：asp.net, html

我有一个 web.config 键：

```
<add key="IMGSRC" value="http://localhost" /> 
```

我想将此键的值与连接到 aspx 页面中的图像的路径一起使用。我知道我可以通过简单地说 "../ImagesFolder" 进入根文件夹，但由于安全问题，我的网站禁用了父路径。所以现在我需要解决它。

我需要这样的东西（这是我在查找互联网后尝试的一些事情，但没有奏效。）：

1) `<img id="Img19" runat="server" alt="Admin" src='<%#ConfigurationSettings.AppSettings["IMGSCR"] %>' />`

2) `<img id="Img19" runat="server" alt="Admin" src='<%#ConfigurationSettings.AppSettings["IMGSCR"] + "/ImagesFolder/img.jpeg" %> ' />`

3) `<img id="Img19" runat="server" alt="Admin" src="<%#ConfigurationSettings.AppSettings["IMGSCR"] %> " + "/ImagesFolder/img.jpeg" />`

我也试过这个：我在 Path = System.Configuration.ConfigurationManager.AppSettings["RootforIMG"].ToString();上声明了一个变量**Path**`Page_Load`

然后在aspx页面上我尝试使用它， `<img id="Img19" runat="server" alt="Admin" src="<%=Path %> " + "/ImagesFolder/img.jpeg" />`但这也不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:25:28.883

你可以试试下面的东西吗？

```
<img id="Img19" runat="server" alt="Admin" src='<%= GetImageSource()%>' /> 
```

在后面的代码中

```
public string GetImageSource()
{
 return ConfigurationManager.AppSettings["IMGSCR"] + "/ImagesFolder/img.jpeg";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:55:43.020

图像的相对路径应该有效：

相对路径可以根据您的页面位置，即：'../IMages/img.jpg' 或 'images/img.jpg'

尝试这个 ：

```
<img id="Img19" runat="server" alt="Admin" src='ImagesFolder/img.jpeg' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:08:16.223

对于具有`runat="server"`属性的控件，您不需要任何特殊代码来映射相对于网站根目录的路径：

```
<img id="Img19" runat="server" alt="Admin" src"~/ImagesFolder/img.jpeg" /> 
```

该路径`~/ImagesFolder/img.jpeg`将被解析`~`为您网站的根文件夹。

如果要解析路径，您需要某种逻辑（例如，您需要调用一个函数），那么您可以使用它：

```
<img src'<%= ResolveImageName() %>' /> 
```

不要忘记 URL 必须正确编码。

# jquery - 数据加载时间jQuery多选插件IE vs FF

> ID：12389112
> 
> 赞同：0
> 
> 时间：2012-09-12T13:17:46.497
> 
> 标签：jquery, internet-explorer, firefox, plugins, multi-select

我有一个应用程序使用 jQuery MultiSelect 插件来处理多个选择框（最多 20 个以上）。该应用程序正在客户端浏览器上“构建”（是的......它应该构建在服务器上，但这不是我的选择）并且每个选择框可以包含多达 15,000 个动态加载的选项（通过 WebFocus，如果这很重要） . 正在抓取数据（通过 jQuery AJAX get 调用）。作为测试，我将 7400 个数据点（通过插件）加载到单个选择框中。在 IE8 上，这需要 104 秒。在 FF 上只需要 4 秒。

这是典型的还是我没有看到的事情？？？

相关代码在这里：

```
// Get xml data & append to selectbox
    $.ajax({  
        type: "GET",  
        url: "test.xml",  
        dataType: "xml",  
        success: function(xml){  
        $(xml).find('ReportOptions').each(function() {  
            var cNum = $(this).find('cusipnum').text();         // assign vars to incoming data
            $('#cusip').append('<option>'+cNum+'</option>');    // append data to options
        });  
            $('#cusip').multiselect('refresh'); 
    },  
        error: function (xhr, ajaxOptions, thrownError) {
            alert("Error Status:"+xhr.status+", "+thrownError);
         }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:35:40.923

是的，这是典型的。如果您在 IE9+ 中运行它，您应该会看到改进。我发现任何大型风格的应用程序或 jquery 的 DOM 操作在 IE8 中都非常慢。话虽如此，可以对此代码进行改进。

要使用 IE8 开发人员工具 (F12) 分析此代码的性能配置文件。$('#cusip').append 应该是这里的大消费者。您正在强制 jquery 在每个循环上查找“#cusip”。

# android - 奇怪的内存泄漏

> ID：12389115
> 
> 赞同：3
> 
> 时间：2012-09-12T13:17:59.233
> 
> 标签：android

**编辑：我认为解析 xml 的代码中存在逻辑错误，因此如果编写正确，则不应有任何泄漏。**

所以我在我的项目中添加了一个 AsyncTask 类，这是我前段时间为了快速测试目的而编写的，但它会导致内存泄漏错误。

我确信它是负责任的，因为当我移除它时，泄漏问题就消失了。

这是堆转储文件（已转换）[http://www7.zippyshare.com/v/83628026/file.html](http://www7.zippyshare.com/v/83628026/file.html)

```
package com.example.xmldl;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import android.os.AsyncTask;
import android.util.Xml;

public class Dlxml extends AsyncTask<String, Void, Void> {
    //adding or removing Override didnt matter just to let you know
    InputStream istream = null;
    protected Void doInBackground(String... url){

        try {
            downloadXml(url[0]);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    private void downloadXml(String url) throws IOException {   
        try {
            URL mUrl = new URL(url);
            HttpURLConnection urlConnection = (HttpURLConnection) mUrl.openConnection();
            istream = urlConnection.getInputStream();           
            XmlPullParser parser = Xml.newPullParser();
            parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
            parser.setInput(istream, null);
            parser.nextTag();
            parser.require(XmlPullParser.START_TAG, null, "resources");
            while (parser.next() != XmlPullParser.END_TAG) {
                if (parser.getEventType() == XmlPullParser.TEXT) {                  
                    parser.nextTag();                   
                }
                if (parser.getEventType() != XmlPullParser.START_TAG) {
                    continue;
                }               
            }           
        } catch (MalformedURLException e) {
            e.printStackTrace();        
        } catch (XmlPullParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally {
            istream.close();            
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:25:02.363

我不相信你正在关闭你的输入流：

```
private void downloadXml(String url) throws IOException {   
    try {
        URL mUrl = new URL(url);
        HttpURLConnection urlConnection = (HttpURLConnection) mUrl.openConnection();
        InputStream istream = urlConnection.getInputStream();           
        XmlPullParser parser = Xml.newPullParser();
        parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, false);
        parser.setInput(istream, null);
        parser.nextTag();
        parser.require(XmlPullParser.START_TAG, null, "resources");
        while (parser.next() != XmlPullParser.END_TAG) {
            if (parser.getEventType() == XmlPullParser.TEXT) {                  
                parser.nextTag();                   
            }
            if (parser.getEventType() != XmlPullParser.START_TAG) {
                continue;
            }               
        }  
        // dont forget to close the input stream!
        istream.close();
    } catch (IOException e) {
        //error closing istream
        e.printStackTrace();        
    } catch (MalformedURLException e) {
        e.printStackTrace();        
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    finally {

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:26:34.110

在这段代码中，我看不到可能的内存泄漏问题。所以它必须在这个包含的代码中。因为我不知道 XmlPullParser 可能在那里。无论如何，输入流应该在 finally 分支关闭，因为你必须修改你的代码

```
finally {
            istream.close();            
        } 
```

不好 ：）

```
finally {
      if(istream != null){
            istream.close();            
       }
} 
```

更好的 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:50:10.900

在大多数情况下，我在 Android 中发生内存泄漏，它来自线程问题。所以，我可以先问你，你是如何调用这个类的（Dlxml，从 AsyncTask 扩展而来）。确保您没有使用匿名变量，例如“new Dlxml().execute()”，因为 Android 的垃圾收集器可能需要很长时间才能检测到线程不再有用（如果您在列表，它会产生很多泄漏）。我想建议您在实现并行处理之前检查这两点：

*   始终使用静态变量来实例化加载器。这有助于防止泄漏，甚至是 Android 警告注释。尝试在线程和处理程序问题上使用静态类变量；
*   注意您正在调用哪个线程来更改视图的方法。如果你在一个非主线程中调用一个方法并且改变了视图，logcat 会抛出一个关于泄漏的消息。为此，利用activity的runonuithread方法；

**重要的事情**：我发现你已经使用了 AsyncTask，并且只在后台做很多事情。这些事情是否会改变观点？您可以在 doInBackground 上进行下载并在**onPostExecute****中**更改视图。

 **您也可以对这些链接感兴趣：

*   [http://android-developers.blogspot.com.br/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.com.br/2009/01/avoiding-memory-leaks.html)
*   [http://publicstaticdroidmain.com/2012/01/avoiding-android-memory-leaks-part-1/](http://publicstaticdroidmain.com/2012/01/avoiding-android-memory-leaks-part-1/)**

# ios - UITableview 不重新加载和刷新

> ID：12389122
> 
> 赞同：-4
> 
> 时间：2012-09-12T13:18:25.550
> 
> 标签：ios, objective-c, uitableview, cocoa-touch

我的问题是每当用户点击按钮时，`UITableviewcell`文本颜色都需要更改。这是我的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath                                                                               *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell=(CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        for(id currentObject in topLevelObjects){
            if([currentObject isKindOfClass:[UITableViewCell class]]){
                cell = (CustomCell *) currentObject;
                break;
            }
        }
    }
    if(one == YES)
    {
        cell.dayLabel.textColor = [UIColor blackColor];
        cell.imageLabel.textColor = [UIColor blackColor];
        cell.high.textColor = [UIColor blackColor];
        cell.low.textColor = [UIColor blackColor];
    }
    else if(two == YES)
    {
        cell.dayLabel.textColor = [UIColor whiteColor];
        cell.imageLabel.textColor = [UIColor whiteColor];
        cell.high.textColor = [UIColor whiteColor];
        cell.low.textColor = [UIColor whiteColor];
    }
} 
```

我在按钮操作中重新加载了，但是当您重新加载时它崩溃了。我试`[tableview setNeedsToDisplay];`了还是没用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:38:07.853

你`tableView:cellForRowAtIndexPath:`没有返回 UITableViewCell。

# php - 通过我的 URL 解码字节编码的字符串

> ID：12389124
> 
> 赞同：1
> 
> 时间：2012-09-12T13:18:36.477
> 
> 标签：php

我们在 Zend Framework 上有一个 PHP 站点，带有一个后端 Postgresql 数据库。我们的主要字符编码是 UTF-8。

我刚刚检查了我们的错误日志，发现了一个奇怪的条目。我的网址如下：www.mydomain.com/schuhe-für-breite-füsse

但是有人（或者可能是机器人）尝试访问此 URL，如下所示：www.mydomain.com/schuhe-f\xc3\xbcr-breite-f\xc3\xbcsse/

这是我第一次看到像上面这样的东西。我的页面上发生了两件事：1）上面的 URL 是针对我们的 CMS 查询的。出于某种原因，这很好用，我认为 Postgresql 将其重新转换为字节编码，然后在尝试在我们的数据库中找到此 SEF URL 时将其转换回来。

2) 在页面上发出 Ajax 请求，传递相同的 SEF URL。这失败了。我相信斜线会导致 Javascript 出现问题。

为了避免这种情况，我想解码任何这样编码的 URL。然而，对以下代码的快速测试并没有为我解码任何内容:(

```
$landing_sef_url = $this->_getParam('landing_sef_url');
$utf8=html_entity_decode($landing_sef_url);
$iso8859=utf8_decode($utf8);
$test3 = html_entity_decode($landing_sef_url, 1, "ISO-8859-1");
$test4 = urldecode($landing_sef_url);

echo utf8_decode("$landing_sef_url");
echo "<br/><br/>";
die($landing_sef_url . " -- $utf8 -- $iso8859 <br/>$test3<br/>$test4"); 
```

我通过网上的各种帖子找到了上述内容，但它们都打印出相同的结果 - schuhe-f\xc3\xbcr-breite-f\xc3\xbcsse

任何帮助将非常感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:54:44.053

这种方法似乎可以满足您的需求：

[http://li.php.net/manual/en/function.stripcslashes.php](http://li.php.net/manual/en/function.stripcslashes.php)

但是，如果您只是想取消转义 \x## 序列，您也可以使用相当简单的正则表达式来做到这一点。

# jquery - 如何禁用 jQuery Mobile 滚动到页面顶部？

> ID：12389126
> 
> 赞同：2
> 
> 时间：2012-09-12T13:18:38.553
> 
> 标签：jquery, jquery-mobile

我在页面中有一些锚点，当我使用锚点加载页面时：

```
http://localhost:1820/Home/FAQ#question4 
```

jQuery Mobile 在 1-3 秒后自动滚动到页面顶部。我无法添加修复程序，`$(document).ready()`因为此事件在滚动之前触发（加载所有内容后出现滚动 - 带有额外的社交按钮图像、脚本等）。

当我删除 jquery.mobile-1.1.1.js 脚本时 - 错误消失了。当我删除除 jQuery 和 jQuery mobile 之外的所有脚本时 - 错误仍然存​​在。所以问题应该出在 jQuery Mobile 脚本中。

我该如何解决问题？

我使用 Chrome 和 Opera 来测试它。

PS 我设置`$.mobile.ajaxEnabled = false;`了，所以我的网站不使用 Ajax 来加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:37:58.507

jQueryMobile 默认使用 '#' 字符来指示页面，而不是锚点（请参阅文档中的“在多页文档中链接”部分[）](http://jquerymobile.com/demos/1.1.1/docs/pages/page-links.html)。

按照文档中的说明，尝试将`rel="external"`或添加`data-ajax="false"`到页面的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:02:00.033

```
$.mobile.silentScroll() 
```

可以解决您的问题。您可以在页面加载时捕获 Hash 部分，并使用它自动滚动到您需要将页面带到的部分。我最近回答了一个类似的问题。看看它是否对您有帮助 [jQuery Mobile 选项卡和锚点](https://stackoverflow.com/questions/12181586/jquery-mobile-tabs-and-anchors/12182868#12182868)

# powershell - start-job 并行运行脚本

> ID：12389127
> 
> 赞同：1
> 
> 时间：2012-09-12T13:18:40.340
> 
> 标签：powershell, powershell-2.0

请帮忙，真的很担心如何使用 start-job 转换下面的脚本，我有 6 个模块要比较，但是我尝试采用 start-job 选项需要花费太多时间，以便我可以并行运行此比较或在后台

试过这个 -

```
Start-Job -Name "Comparecontrol" -filepath $ExecuteSbtWithDcmDm -ArgumentList $CompareControl,"",$false,$false | Out-Null
echolog $THISSCRIPT $DCM_UPDATE_LOG_FILE $LLINFO "Finished Control Master Comparison 
```

主要脚本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:03:57.603

一般流程是这样的：

```
$jobs = @()
$jobs += Start-Job -scriptblock {...}
...
$jobs += Start-Job -scriptblock {...}
Wait-Job $jobs
$results = Receive-Job $jobs 
```

您可以使用作业名称作为存储 Start-Job 返回的作业实例的替代方法，例如：

```
$jobName = 'CompareControl'
foreach ($script in $scripts)
{
    Start-Job -Name $jobName-scriptblock {&$script} -ArgumentList ...
}
Wait-Job -Name $jobName
$results = Receive-Job -Name $jobName 
```

# java - 处理文件下载等线程任务中的错误

> ID：12389128
> 
> 赞同：1
> 
> 时间：2012-09-12T13:18:46.423
> 
> 标签：java, multithreading, exception-handling, error-handling

假设我有一个使用线程通过 HTTP 或 FTP 下载文件的应用程序。我可以想象在后台出现了一些需要一些错误处理的问题：

*   远程主机变得不可用。
*   下载速度太慢了。
*   某些数据已损坏（如果检查到位）。
*   没有数据正在发送。
*   内容与预期的文件类型不符。
*   报告的大小和数据不对应。
*   ...

如何以将错误传递回主应用程序的方式处理这些问题？或者如果无法恢复则中止？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:22:19.963

这是一个非常普遍的问题，有许多可能的解决方案。这在很大程度上取决于线程当前正在向主应用程序报告什么信息。例如，如果它在 a 中返回一些远程文件内容，`String`则`null`可能表明数据存在某种问题。如果您想要更具体的信息，那么您可能需要创建某种`JobStatus`类来封装您提到的一些错误条件。也许该类还包括远程文件内容或实际工作负载。

在传回信息方面。如果您不使用 a和[thread-pools](http://www.vogella.com/articles/JavaConcurrency/article.html#threadpools)，`Runnable`该类可能有某种方法。您还可以将一个类传递给您，它为手头的工作填写，其中可能包括有关遇到的任何错误的信息。`getStatus()``Callable<...>`[`ExecutorService`](http://www.vogella.com/articles/JavaConcurrency/article.html#threadpools)`WorkRequest``Thread`

通常，我倾向于依靠日志记录来显示问题的实际来源和详细信息，并依靠引发的异常`Future.get()`来转发我的处理线程存在某种问题。但同样，如果没有更多上下文，很难确定在您的环境中什么是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:49:07.600

看看 java.util.concurrent 具体是 Executors 和 Executor 服务。Executor 是一个线程池，您可以向其提交任务并获得 Futures。Executors 的使用方法有很多种，而且它们非常强大。

了解线程是如何工作的很好，但在实践中，我发现自己真正创建线程的情况极为罕见。让线程池处理这个问题，它们使用所有正确的阻塞队列，如果线程意外死亡，池将创建一个新线程来替换它。您所要做的就是传递一个 Runnable、Callable 或其中任何一个的列表并处理 Futures。

由于 Callables 抛出异常，当您从 Executor 获取 Future 时，您可以在主类中处理它们。

# iphone - 这个调整有什么问题？

> ID：12389131
> 
> 赞同：0
> 
> 时间：2012-09-12T13:18:59.867
> 
> 标签：iphone, ios, xcode, cydia, tweak

我尝试使用 theos 编译一个调整，这是一个令人惊叹的框架，可以在许多不同的平台上轻松创建调整。在这里，我每次重新启动并慢慢淡出它时都尝试显示一个设置图标，但它无法编译。我有所有需要的头文件和框架，并且正在运行一个真正的 Mac（尽管你在我的终端上看到了这个名字：P），安装了最新的 Xcode 和以前安装的 Xcode 4.2。这是tweak.xm：

```
#import <UIKit/UIKit2.h>
#import <objc/runtime.h>
#import <SpringBoard/SpringBoard.h>
#import <Foundation/Foundation.h>
#import <AudioToolbox/AudioToolbox.h>
#import <substrate2.h>
#import <IOSurface/IOSurface.h>
#import <QuartzCore/QuartzCore2.h>
#import <CoreGraphics/CoreGraphics.h>
#import <CaptainHook/CaptainHook.h>
#import <Foundation/Foundation.h>
#import <objc/runtime.h>
#import <AVFoundation/AVAudioPlayer.h>
#import <Celestial/Celestial.h>
#import <SpringBoardServices/SpringBoardServices.h>
#import <CoreFoundation/CFNotificationCenter.h>
#import <ChatKit/ChatKit.h>

%hook CKConversationListController

- (void)composeButtonClicked:(id)clicked {
}
%end

%hook SpringBoard
-(void)applicationDidFinishLaunching:(id)application {
NSArray *animationArray = [NSArray arrayWithObjects:[UIImage imageNamed:@"/Applications/Preferences.app/BlobIcon@2x.png"], nil];

         [NSTimer scheduledTimerWithTimeInterval:.75 target:self selector:@selector(crossfade) userInfo:nil repeats:YES];

    mainImageView.animationImages = animationArray;

    mainImageView.animationDuration = 4.5; //mainImageView is instance of UIImageView

    mainImageView.animationRepeatCount = 0;

    [mainImageView startAnimating];

    CABasicAnimation *crossFade = [CABasicAnimation animationWithKeyPath:@"contents"];
    crossFade.autoreverses = YES;
    crossFade.repeatCount = 1;
    crossFade.duration = 1.0;
}

%new
- (void) crossfade {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; // user dependent transition acn be set here
    mainImageView.alpha = !mainImageView.alpha;
    [UIView commitAnimations];
}
%end 
```

makefile 看起来像这样：

```
include theos/makefiles/common.mk
export GO_EASY_ON_ME=1

TWEAK_NAME = Goofy
Goofy_FILES = Tweak.xm
Goofy_FRAMEWORKS = Foundation UIKit CoreGraphics ChatKit
Goofy_PRIVATE_FRAMEWORKS = ChatKit VoiceServices AppSupport

include $(THEOS_MAKE_PATH)/tweak.mk 
```

我不断得到

```
Making all for tweak Goofy...
 Preprocessing Tweak.xm...
 Compiling Tweak.xm...
Tweak.xm: In function ‘void _logos_method$_ungrouped$SpringBoard$applicationDidFinishLaunching$(SpringBoard*, objc_selector*, objc_object*)’:
Tweak.xm:32: error: ‘mainImageView’ was not declared in this scope
Tweak.xm: In function ‘void _logos_method$_ungrouped$SpringBoard$crossfade(SpringBoard*, objc_selector*)’:
Tweak.xm:53: error: ‘mainImageView’ was not declared in this scope
make[2]: *** [.theos/obj/Tweak.xm.o] Error 1
make[1]: *** [internal-library-all_] Error 2
make: *** [Goofy.all.tweak.variables] Error 2
Hackint0sh-HD:Goofy iHackerMe$ 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:13:46.093

问题是 mainImageView 没有被声明为任何东西......

做就是了`UIImageView *mainImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"/Applications/Preferences.app/BlobIcon@2x.png"]];`

除非你试图移动一个已经在锁屏上的对象，比如时钟，在这种情况下，你需要找出这个对象是什么，将它包含在文件中`#import`，然后像你已经拥有的那样对其进行动画处理。

# iphone - 在 UIImagePicker 中设置焦点

> ID：12389137
> 
> 赞同：0
> 
> 时间：2012-09-12T13:19:17.750
> 
> 标签：iphone, ios, uiimagepickercontroller

我有一个 UIImagePicker 控件，我想以编程方式选择屏幕上的焦点。

是否可以通过某种方法或属性将焦点设置为CGPoint？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:26:51.210

文档中没有设置焦点[`UIImagePickerController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)的方法。

如果猜到你将不得不用[`AVCaptureSession`](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html).

如果你连接了所有的部分，你可以使用的[`focusPointOfInterest`](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009520-CH1-DontLinkElementID_4)属性[`AVCaptureDevice`](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html)来设置焦点。但是你应该确保`AVCaptureDevice`支持焦点。

# c# - 枚举 ILookup 结果的成本？最好总是使用字典 >?

> ID：12389138
> 
> 赞同：7
> 
> 时间：2012-09-12T13:19:17.767
> 
> 标签：c#, .net

我有一个`ILookup<TKey,TElement> lookup`我经常从中获取元素并使用 LINQ 或`foreach`. 我这样看`IEnumerable<TElement> results = lookup[key];`。

因此，`results`每次我使用查找结果时都需要至少枚举一次（如果我不首先使用 .ToList() 则迭代多次，甚至更多）。

即使它不是“干净的”，使用 a 会不会更好（性能方面）`Dictionary<TKey,List<TElement>>`，以便键的所有结果仅在字典的构造时枚举？ToList() 到底有多麻烦？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T13:29:11.403

`ToLookup`与所有其他`ToXXX`LINQ 方法一样，使用立即执行。结果对象没有对原始源的引用。它*确实*有效地构建了一个`Dictionary<TKey, List<TElement>>`- 不是那些确切的类型，也许，但等价于它。

请注意，尽管存在差异，但它可能对您有用，也可能没有用 - 如果您给它一个不存在的键，则查找的索引器将返回一个空序列，而不是抛出异常。如果您希望能够通过任何键对其进行索引并迭代相应的值，那么这可以使生活变得更加轻松。

另请注意，虽然它没有明确记录，但用于值序列的实现*确实*implement `ICollection<T>`，因此调用 LINQ`Count()`方法是 O(1) - 它不需要遍历所有元素。

有关更多详细信息，请参阅我的[Edulinq 帖子。`ToLookup`](https://codeblog.jonskeet.uk/2010/12/31/reimplementing-linq-to-objects-part-18-tolookup/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T13:24:29.223

假设实现是`System.Linq.Lookup`（是否`ILookup`有任何其他实现？），呈现的元素`lookup[key]`存储在元素数组中作为`System.Linq.Lookup.Grouping`. 反复查找它们不会导致源代码的重新迭代。当然，重建`Lookup`成本会更高，但是一旦构建，源就不再被访问。

# ruby-on-rails - 用于搜索表单的form_tag中的Rails jquery datepicker

> ID：12389141
> 
> 赞同：0
> 
> 时间：2012-09-12T13:19:28.207
> 
> 标签：ruby-on-rails

对于更新模型的表单，我的日期选择器正在工作，包括如下：

```
= f.input :starts_at, :as => :datepicker 
```

现在我想在搜索表单中使用 Datepicker，它将几个搜索参数传递给控制器​​（不使用模型）。我不确定如何使用 text_field_tag 或其他方式定义输入。

```
= form_tag some_action_path, method: "get", class: "someclass" do |f|
    = text_field_tag ???... 
```

任何帮助表示赞赏。谢谢！

**编辑：**

找到了解决方案，我只需将参数名作为 id 传递给 datepicker js

```
= text_field_tag :starts_at
:javascript
  $(function() {
    $( "#starts_at" ).datepicker();
  }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T21:05:17.917

找到了解决方案，我只需将参数名作为 id 传递给 datepicker js

```
= text_field_tag :starts_at
:javascript
  $(function() {
    $( "#starts_at" ).datepicker();
  }) 
```

# python - 缓存不会设置值

> ID：12389143
> 
> 赞同：0
> 
> 时间：2012-09-12T13:19:36.847
> 
> 标签：python, django, caching

我目前正在一个需要大量计算数据的网站上工作。为了使它可行，我做了一个 Celeryd 任务并发送了一个请求，其中包含了只需要多次生成数字所需的所有数据。

但由于某种原因，我的缓存不会保存。

```
def calculate_members(request, members, clients, website):
    """
    Counts how many members are subscribed depending on lib_drv
    """
    merged = pandas.merge(members, clients, left_on='member_id', right_on='client', how='inner')
    cache.set('%s-drv_stat' % website.program.pk, merged['lib_drv'].value_counts(), 10)
    cache.set('coucou', 'salut', 500)
    print cache.get('coucou') 
```

在这里，打印 cache.get('coucou') 将打印 'None'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:34:17.140

我发现了问题，该项目的另一位贡献者添加了一些奇怪的配置，这些配置只在特定时间发生并且设置不当。一切恢复正常。

# linux - Linux 如何与 PCI 驱动程序通信

> ID：12389148
> 
> 赞同：0
> 
> 时间：2012-09-12T13:19:39.690
> 
> 标签：linux, device-driver, pci

我是驱动程序编程的新手。所以我面临着一些“问题”。

我写了一个PCI驱动程序。现在的问题是应用程序如何与该驱动程序通信。

我的目的是为驱动程序编写一个测试应用程序。学习驱动程序编程是一种“基础研究”。

通常我会说`/dev`. 但是我在这个目录下的文件除了root之外没有读写权限。那么怎么沟通呢？通过属性文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:39:31.487

使用节点 in`/dev`是正确的方法。您需要做的是修复权限。

您可以这样做，`chmod`但每次重新启动时都必须这样做。更好的解决方案是创建与您的 PCI 设备 ID 匹配的 udev 规则。然后，您可以`chmod`在规则中运行。

文档：[编写 udev 规则](http://www.reactivated.net/writing_udev_rules.html)

# c# - 应用程序使用域帐户来保证安全

> ID：12389151
> 
> 赞同：0
> 
> 时间：2012-09-12T13:20:00.737
> 
> 标签：c#, security, permissions, dns

有没有办法在winform应用程序中为一组用户实现域认证？

我正在用 C# 编写一个应用程序，它将安装在我们商店的几台 PC 上。我想密码保护程序的一部分功能，基本上是配置。我可以轻松地将密码硬编码到应用程序中，甚至制作加密密码存储，但我希望只有某些用户能够访问配置表单，并且我想使用组从我们的域集中管理这些用户。因此，属于“配置”组的任何人都可以访问表单、按下应用按钮等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:24:50.097

要检查用户是否在特定的 Windows 组中，[WindowsPrincipal.IsInRole](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsprincipal.isinrole.aspx)，例如：

```
bool IsInGroup(string user, string group)
{
    using (var identity = new WindowsIdentity(user))
    {
        var principal = new WindowsPrincipal(identity);
        return principal.IsInRole(group);
    }
} 
```

要查看当前的用户是什么，请使用[Thread.CurrentPrincipal](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentprincipal.aspx)。

查看[c# 检查用户是否属于组？](https://stackoverflow.com/questions/4366090/c-sharp-check-if-the-user-member-of-a-group)了解更多信息和一些讨论。

但是，这是您的用例的最佳解决方案吗？如果您在“[您的] 商店中”，是指多个用户将使用一台计算机的销售终端吗？在这种情况下，用户可能不想每次都登录或注销。也许将配置移动到单独的应用程序，使用文件权限保护配置（例如对非管理员只读）并限制对配置应用程序的访问是更好的解决方案。

# c# - 我在哪里可以获得“Microsoft.ReportViewer.DataVisualization”的副本？

> ID：12389156
> 
> 赞同：2
> 
> 时间：2012-09-12T13:20:16.517
> 
> 标签：c#, visual-studio-2010, reportviewer, report-viewer2010

在我的开发系统上，我安装了 VS 2010，然后安装了 VS 2012 beta。我不得不卸载它，因为它与 CodeSmith 和 .Net 4.5 Beta 发生冲突。之后我的开发系统似乎缺少一些 dll，我特别需要“Microsoft.ReportViewer.DataVisualization.dll”。我检查了“C:\Windows\Microsoft.NET\assembly\GAC_MSIL”路径，没有“Microsoft.ReportViewer.DataVisualization”文件夹。有没有其他方法可以获取这个 dll 的副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:24:01.740

查看 windows SDK 文件夹：

> %PROGRAMFILES%\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\ReportViewer\ReportViewer.exe

它应该安装所需的 dll。

**编辑**

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms251723%28v=vs.100%29.aspx)。

# r - 检查 R 是否在 RStudio 中运行

> ID：12389158
> 
> 赞同：38
> 
> 时间：2012-09-12T13:20:32.180
> 
> 标签：r, rstudio

我正在寻找一种方法来测试 R 是否正在从 RStudio 运行。出于某种原因，我昨天可以在谷歌上找到答案，但今天找不到，但我认为这与测试是否设置了某个系统变量有关。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-07-23T07:52:52.837

这是来自`?rstudio`：

```
# Test whether running under RStudio 
isRStudio <- Sys.getenv("RSTUDIO") == "1" 
```

也有`rstudioapi::isAvailable()`，但检查它并不可靠，因为 RStudio 似乎并不真正需要该`rstudioapi`包才能正常工作。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-03-07T17:10:44.153

检查`.Platform$GUI`选项`"RStudio"`

```
is.rstudio = function(){
  .Platform$GUI == "RStudio"
} 
```

看：

[http://thecoatlessprofessor.com/programming/detecting-if-r-is-in-rstudio-and-chang-rstudios-default-graphing-device/](http://thecoatlessprofessor.com/programming/detecting-if-r-is-in-rstudio-and-changing-rstudios-default-graphing-device/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-12T14:04:45.277

没有“在 RStudio 内运行”。RStudio 只是一个围绕 R 的 IDE 层；归根结底，它只是启动正常的 R 可执行文件，无论如何您都需要在 $PATH 上运行 RStudio。

作为代理和 R Studio 您可以测试 available.packages() 以获取“操作”包，或者作为较短的版本查看 RStudio 是否将自身添加到`.libPath()`内容中：

```
R> any(grepl("RStudio", .libPaths()))
[1] TRUE
R> 
R> 
```

*编辑在 2020 年 5 月或八年后* 问题确实出现了，可以从内部查询各种事情。这是来自 RStudio 终端的示例：

```
$ env | grep -i rstudio | sort
GIO_LAUNCHED_DESKTOP_FILE=/usr/share/applications/rstudio.desktop
PATH=[...redacted...]
RMARKDOWN_MATHJAX_PATH=/usr/lib/rstudio/resources/mathjax-27
RS_RPOSTBACK_PATH=/usr/lib/rstudio/bin/rpostback
RSTUDIO=1
RSTUDIO_CONSOLE_COLOR=256
RSTUDIO_CONSOLE_WIDTH=111
RSTUDIO_PANDOC=/usr/lib/rstudio/bin/pandoc
RSTUDIO_PROGRAM_MODE=desktop
RSTUDIO_PROJ_NAME=chshli
RSTUDIO_SESSION_ID=9C62D3D4
RSTUDIO_SESSION_PORT=13494
RSTUDIO_TERM=2BD6BB88
RSTUDIO_USER_IDENTITY=edd
RSTUDIO_WINUTILS=bin/winutils
$ 
```

同样，在 R 会话中：

```
R> se <- Sys.getenv()
R> se[grepl("rstudio",se,ignore.case=TRUE)]
GIO_LAUNCHED_DESKTOP_FILE        /usr/share/applications/rstudio.desktop
PATH                             [...also redacted...]
RMARKDOWN_MATHJAX_PATH           /usr/lib/rstudio/resources/mathjax-27
RS_RPOSTBACK_PATH                /usr/lib/rstudio/bin/rpostback
RSTUDIO_PANDOC                   /usr/lib/rstudio/bin/pandoc
R> 
```

*在 2021 年 8 月或九年后编辑*由于不同答案中列出的所有答案对人们来说可能仍然太多，您也可以`rstudioapi`从 CRAN 安装包，然后通过`rstudioapi::isAvailable()`哪个`TRUE`在 RStudio 和`FALSE`ESS / 标准中为我返回来询问它R。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-12T16:50:42.993

当我启动 RStudio 时，它似乎在搜索路径的第 2 位有 tools:rstudio。这有一个未记录但似乎返回 RStudio 版本字符串的函数“RStudio.version”：

```
> RStudio.version()
[1] "0.96.316" 
```

所以你可以定义：

```
is.RStudio <- function(){
  if(!exists("RStudio.version"))return(FALSE)
  if(!is.function(RStudio.version))return(FALSE)
  return(TRUE)
} 
```

也许使用它。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-07-28T21:33:01.413

截至今天，有一些包包含检查 RStudio 是否正在运行的功能：

```
rstudioapi::isAvailable()
assertive::is_rstudio() 
```

（列表并非详尽无遗）

和包分别包含额外的功能来检查其他 IDE、RStudio 的桌面/服务器版本以及各种`assertive`版本（例如，alpha、beta、devel、release、patched 等）。`assertive.reflections``R`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-23T10:15:59.037

为了增加猜测的数量，这里有一条来自 2011 年（冰河世纪）的消息

[http://support.rstudio.org/help/discussions/problems/413-location-of-installed-packages](http://support.rstudio.org/help/discussions/problems/413-location-of-installed-packages)

```
if (Sys.getenv("RSTUDIO_USER_IDENTITY")!= ""){
.libPaths(.Library) # Avoid additional libraries } else { # not rstudio ... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-02T00:27:23.980

我发现以下对我有用

```
checkRstudio <- function () {
  return ("tools:rstudio" %in% search())
} 
```

我自己对 R 有点陌生，但我相信 Rstudio 必须加载包“tools:rstudio”才能运行。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-03T11:52:42.250

现在可以通过[**`startup`**](https://github.com/HenrikBengtsson/startup)以下功能通过包获得整洁的解决方案`is_rstudio_console`：

```
startup:::is_rstudio_console()
[1] TRUE 
```

可能值得补充的是，此函数检查两个环境变量 ，[@krlmr](https://stackoverflow.com/users/946850/krlmlr)的[答案](https://stackoverflow.com/a/17804414/1655567)中`RSTUDIO`提到了这一点，目前在前面的答案中似乎没有提到。`RSTUDIO_TERM`

```
function ()
{
    (Sys.getenv("RSTUDIO") == "1") && !nzchar(Sys.getenv("RSTUDIO_TERM"))
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-28T07:58:36.900

在 Mac 上，只有 Sys.getenv 答案有效

平台 x86_64-apple-darwin10.8.0
version.string R 版本 3.1.0 (2014-04-10)

> Sys.getenv("RSTUDIO")=="1" [1] 真
> 
> RStudio.version() 错误：找不到函数“RStudio.version”
> 
> 任何（grepl（“RStudio”，.libPaths（）））[1]假
> 
> .libPaths() [1] "/Library/Frameworks/R.framework/Versions/3.1/Resources/library"

# java - 如何在 MouseEnter 上为 JLabel 下划线

> ID：12389160
> 
> 赞同：3
> 
> 时间：2012-09-12T13:20:39.030
> 
> 标签：java, html, swing, fonts, jlabel

我尝试使用以下方法更改字体：

```
jLabel.setFont(new Font("Tahoma",1,20)); 
```

但是这里只有 4 种样式，Plain、Bold、Italic、Bold+Italic。

我希望它像 HTML 中的链接一样工作，当我将鼠标光标悬停在 JLabel 上时，它会带下划线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T15:05:30.777

澄清（或不澄清：-）我对 mKorbel 的评论中引入的混淆

永远不要突然创建字体：它很可能会与应用程序中的所有其他字体发生冲突。取而代之的是，获取默认值（从下面显示的代码片段中的组件实例或 UIManager 中，无关紧要）并派生。

对于使用属性（无耻地从 mKorbel 的回答中得出结论）派生，这类似于

```
JLabel label = new JLabel("some text - WE ARE UNDERLINED");
MouseListener l = new MouseAdapter() {
    Font original;

    @Override
    public void mouseEntered(MouseEvent e) {
        original = e.getComponent().getFont();
        Map attributes = original.getAttributes();
        attributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);
        e.getComponent().setFont(original.deriveFont(attributes));
    }

    @Override
    public void mouseExited(MouseEvent e) {
        e.getComponent().setFont(original);
    }

};
label.addMouseListener(l);
JComponent content = new JPanel();
content.add(label);
content.add(new JButton("dummy focus")); 
```

但请注意：这还不会为您提供任何超链接功能！因此，如果您*真正*想要的是超链接，请考虑使用具有此类功能的成熟组件，例如[SwingX 项目中的 JXHyperlink](http://swingx.java.net)。您可能希望运行其项目主页上引用的演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T13:28:06.467

用于适当的`MouseEvent`

```
JLabel#setFont(new Font(attributes)); 
```

然后回来

```
JLabel#setFont(new Font("Serif", Font.BOLD, 16)); 
```

包裹在`invokeLater`, 和 from 定义中

```
final Map attributes = (new Font("Serif", Font.BOLD, 16)).getAttributes();
attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:23:52.863

将此与所需的 CSS 一起使用，

```
yourLabel.setText(htmlIfy("<p style='color:#1C66AE;'>Your text here</p>")); 
```

`htmlIfy`函数在哪里

```
private static final String HTML = "<html>";
    private static final String HTML_END = "</html>";

public static String htmlIfy(String s) {
        return HTML.concat(s).concat(HTML_END);
    } 
```

添加文本，如链接使用

```
yourLabel.setText(HTMLTagUtil.htmlIfy(HTMLTagUtil
                .linkIfy("Your Text Here")));//Forgot Password?

        yourLabel.setCursor(new java.awt.Cursor(
                java.awt.Cursor.HAND_CURSOR)); 
```

`linkIfy`函数在哪里

```
private static final String A_HREF = "<a href=\"";
    private static final String HREF_CLOSED = "\">";
    private static final String HREF_END = "</a>";
public static String linkIfy(String s) {
        return A_HREF.concat(s).concat(HREF_CLOSED).concat(s).concat(HREF_END);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-23T14:27:46.123

```
 if (CheckBox.isSelected()) {
        Font font = CheckBox.getFont();
        Map attributes = font.getAttributes();
        attributes.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_LOW_GRAY);
        CheckBox.setFont(font.deriveFont(attributes));
    } 
```

# c# - 用于小型插件系统的简单 IoC 容器

> ID：12389163
> 
> 赞同：5
> 
> 时间：2012-09-12T13:20:51.460
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, ioc-container

我正在为 .NET 3.5 应用程序（WinForms）设计一个简单的插件框架。

我们当前的应用程序需要开始支持在编译时应用程序未知的不同“插件”/“扩展”的动态加载和“挂钩”。

这些扩展将被“挂钩”到应用程序的不同区域，例如添加为某些类的事件处理程序。

例如（简化）：

```
public class SomeSystem
{
     public event Action<string> Completed;

     public event Action<string> Failed;

     public event Action<string> Stopped;
} 
```

我想要的一个用例是让开发人员能够在插件程序集中为此类事件定义处理程序，而无需让应用程序知道它们。

据我所知，IoC 容器允许在运行时动态发现对象并将它们注册到容器中。

IoC 容器是否也能够为我执行此挂钩到各种事件？或者如果没有这样的框架，这项任务是否更容易完成？

如何设计如何为这样的任务集成 IoC 容器？（假设有多个扩展点，比如不同的事件可以用来注册）。

我发现自己在问一些问题：

1.  插件本身提供*注册*方法来进行注册是否常见？
2.  国际奥委会应该注册吗？（通常是怎么做的？）
3.  使用 IoC 容器时如何轻松定义扩展点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:27:56.320

您可能想查看[MEF](http://en.wikipedia.org/wiki/Managed_Extensibility_Framework)。它允许您提出所有问题。它使用的术语（ComposableParts、Exports 等）最初令人困惑，但使用起来非常简单。

> 插件本身提供注册方法来进行注册是否常见？

MEF 使应用程序完成查找和注册插件的工作。该插件只需要实现一个声明“我是一个可以做X的插件”的接口。

> 国际奥委会应该注册吗？（通常是怎么做的？）

将使用 MEF 插件的应用程序能够指定它将如何加载插件。这可以通过在目录中搜索 DLL、读取配置文件以获取程序集名称列表、检查 GAC - 任何东西。它是完全可扩展的（您可以编写自己的搜索类）

> 使用 IoC 容器时如何轻松定义扩展点？

MEF 使用接口来定义应用程序和插件之间的契约。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:56:48.217

这个答案将特定于我的容器。

> 我们当前的应用程序需要开始支持在编译时应用程序未知的不同“插件”/“扩展”的动态加载和“挂钩”。

为了能够做到这一点，您必须定义一些您放置在类库中的扩展接口，这些接口将在您的应用程序和所有插件之间共享。

例如，如果您希望您的应用程序能够向应用程序菜单添加内容，您可以创建以下界面：

```
class ApplicationMenu
{
    // The "File" menu
    IMenuItem File { get; }
}

interface IMenuRegistrar
{
    void Register(ApplicationMenu menu);
} 
```

这意味着您的插件可以创建以下类：

```
[Component]
public class CoolPluginMenuRegistrar : IMenuRegistrar
{
    public void Register(ApplicationMenu menu)
    {
        menu.File.Add("mnuMyPluginMenuName", "Load jokes");
    }
} 
```

我的容器使用该`[Component]`属性，以便它可以发现并自动为您注册类。

注册上述所有扩展点所需要做的就是：

```
public class Program
{
    public static void Main(string[] args)
    {
        var registrar = new ContainerRegistrar();
        registrar.RegisterComponents(Lifetime.Transient, Environment.CurrentDirectory, "MyApp.Plugin.*.dll");
        var container = registrar.Build();

        // all extension points have been loaded. To load all menu extensions simply do something like:

        var menu = GetMainMenu();
        foreach (var registrar in container.ResolveAll<IMenuRegistrar>())
        {
            registrar.Register(menu);
        }
    }
} 
```

> 这些扩展将被“挂钩”到应用程序的不同区域，例如添加为某些类的事件处理程序。据我所知，IoC 容器允许在运行时动态发现对象并将它们注册到容器中。

是的。你得到了这一切。

> IoC 容器是否也能够为我执行此挂钩到各种事件？或者如果没有这样的框架，这项任务是否更容易完成？

是的。我有一个内置的事件机制。将事件类（常规 .NET 类放在共享类库中）。通过实现一个接口来简单地订阅它们：

```
[Component]
public class ReplyEmailNotification : ISubscriberOf<ReplyPosted>
{
    ISmtpClient _client;
    IUserQueries _userQueries;

    public ReplyEmailNotification(ISmtpClient client, IUserQueries userQueries)
    {
        _client = client;
        _userQueries = userQueries;
    }

    public void Invoke(ReplyPosted e)
    {
        var user = _userQueries.Get(e.PosterId);
        _client.Send(new MailMessage(user.Email, "bla bla"));
    }
} 
```

并发布事件：

```
DomainEvent.Publish(new ReplyPosted(user.Id, "This is a subject")); 
```

这些事件可以由任何插件处理，只要它们：

1.  可以访问事件类
2.  已在容器中注册（`[Component]`或手动注册）
3.  工具`ISubscriberOf<T>`

> 插件本身提供注册方法来进行注册是否常见？

是的。通过在共享程序集中定义为扩展点的不同接口。

> 国际奥委会应该注册吗？（通常是怎么做的？）

是的。如果容器提供它。

> 使用 IoC 容器时如何轻松定义扩展点？

您可以在此处更详细地了解它：http: [//www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container](http://www.codeproject.com/Articles/440665/Having-fun-with-Griffin-Container)

# regex - Excel：通过宏用正则表达式替换超链接中的字符串

> ID：12389166
> 
> 赞同：1
> 
> 时间：2012-09-12T13:21:16.993
> 
> 标签：regex, excel, vba

我正在尝试通过宏替换 Excel 2003 (VB5.5) 中的字符串（例如所有数字）。现在，我有这个代码：

```
Sub DeleteDigits()
Dim hLink As Hyperlink
Dim wSheet As Worksheet

For Each wSheet In Worksheets
    For Each hLink In wSheet.Hyperlinks
        hLink.Address = regEx.Replace(hLink.Address, "\d", "")
    Next hLink
Next wSheet
End Sub 
```

我检查了引用中的正则表达式，但我不知道如何通过*hLink.Address*不是对象的消息，这是我得到的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:49:58.070

`Replace`不支持三个参数。您必须首先通过属性设置模式。像这样：

```
Sub DeleteDigits()
    Dim hLink As Hyperlink
    Dim wSheet As Worksheet
    Dim regEx As New VBScript_RegExp_55.RegExp

    For Each wSheet In Worksheets
        For Each hLink In wSheet.Hyperlinks
            regEx.Pattern = "\d"
            hLink.Address = regEx.Replace(hLink.Address, "")
        Next hLink
    Next wSheet
End Sub 
```

**编辑：**
支持文件：

> > “模式 - 用于定义正则表达式的字符串。必须在使用正则表达式对象之前设置。”
> > ...
> > "Replace (search-string, replace-string) - Replace 方法将 2 个字符串作为其参数。如果它能够成功匹配 search-string 中的正则表达式，则它将匹配替换为 replace-字符串，并返回新字符串。如果没有找到匹配项，则返回原始搜索字符串。
> > 
> > [http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic2](http://msdn.microsoft.com/en-us/library/ms974570.aspx#scripting05_topic2)

# java - 使用@controller时Spring内部实现了什么样的控制器

> ID：12389170
> 
> 赞同：3
> 
> 时间：2012-09-12T13:21:39.237
> 
> 标签：java, spring-mvc

由于Spring2.5版本的控制器种类很多，那么在使用@controller的时候Spring内部实现了什么样的控制器呢？spring 如何决定实现什么控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:59:02.590

**简短的回答：** @Controller 如何在内部实现并不重要。

**长答案：**

首先您应该[阅读参考手册](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-controller)以了解主要基于注释的 API。You have no`AbstractController`等`SimpleFormController`重要句子：

> `@Controller`注释表明一个特定的类充当控制器的角色。**Spring 不要求您扩展任何控制器基类**或引用 Servlet API。

您必须放弃“Spring MVC 2.5 思维”，只需定义用`@Controller`like注释的 bean

```
@Controller
public class ClinicController {

    private final Clinic clinic;

    @Autowired
    public ClinicController(Clinic clinic) {
        this.clinic = clinic;
    }

    @RequestMapping("/")
    public void welcomeHandler() {
    }

    @RequestMapping("/vets")
    public ModelMap vetsHandler() {
        return new ModelMap(this.clinic.getVets());
    }

} 
```

并将它们用作普通bean（通过添加到 servlet.xml `<bean class="com.example.ClinicController " />`）。这种方式要容易得多。

# bash - bash 使用前一个命令的第二个参数

> ID：12389172
> 
> 赞同：2
> 
> 时间：2012-09-12T13:21:43.897
> 
> 标签：bash

如何在新命令中使用上一个命令的第二个参数？

例如，与

```
$ mkdir test 
```

我创建了一个目录，如何使用目录名称来更改此目录？

```
$ mkdir test && cd use_var 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:23:41.040

`$_`是前一个命令的最后一个（最右边）参数。

```
mkdir gash && cd "$_" 
```

（我不创建名为 的文件或目录`test`，这是内置 shell 的名称，可能会引起混淆）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T13:28:41.677

通过历史扩展，可以引用当前命令行中的任意单词

```
mkdir dir1 && cd "!#:1"
# 0     1   2  3  4 
```

`!#`指到目前为止键入的行，并`:1`指第一个单词（`mkdir`从 0 开始）。

如果您在脚本中使用它（即，非交互式外壳），您需要打开历史扩展`set -H`和打开历史扩展`set -o history`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:27:19.173

按`Esc`+`.`将上一个命令的最后一个参数放在光标的当前位置。在`bash`shell 和`ksh`shell 中测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T13:42:42.010

我为此使用函数。在你的 shell 中输入：

```
mkcd() { mkdir "$1" ; cd "$1" ; } 
```

现在你有了一个新命令`mkcd`。

如果您反复需要，请将该行放入文件中`~/.bash_aliases`（如果您使用`bash`; 其他 shell 使用不同的名称）。

# java - 如何操作 jrxml 模板中指定的 SQL

> ID：12389174
> 
> 赞同：0
> 
> 时间：2012-09-12T13:21:46.953
> 
> 标签：java, jasper-reports, ireport

问题：报告模板是由管理员用户创建的，管理员用户只决定将哪些数据显示在业务用户指定的数据过滤器的位置。用更简单的 SQL 术语来说，查询由管理员用户指定，业务用户指定 WHERE 子句。

Jasper 允许用户在 SQL 查询中指定参数，例如 $P{city}。我尝试使用[链接](https://stackoverflow.com/questions/652486/dynamic-querystring-in-jrxml)中指定的方法动态检索查询。

可能的解决方案是

1.  在 JRXML 中使用 WHERE 子句参数并在创建报告时替换它们 - 这将节省我的 SQL 解析，但我不想用这种复杂性来指导管理员用户。解析不是一个大问题。
2.  使用我的自定义 jdbc 查询执行器和工厂，仅在 jasper fire SQL 查询之前创建允许我扩展点。我将完全依赖 vanilla Jasper JDBC 数据源，但只会在执行前修改查询。JRAbstractQueryExecuter 简化了查询并在触发查询之前替换了与 jasper 相关的令牌 - 这将非常肮脏，并且将迫使我成为特定于实现的。
3.  在我的应用程序代码库中执行与 JRAbstractQueryExecuter 中相同的替换，解析 SQL 查询，修改它并按照[链接中的指定再次设置它](https://stackoverflow.com/questions/652486/dynamic-querystring-in-jrxml)

你能建议一个更好的方法吗？我有一种感觉，这绝对可以以更清洁的方式完成。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:06:37.420

您可以创建一个输入控件来确定所需的 WHERE 子句并使用参数来保存该 WHERE 子句的内容。默认值表达式类似于：

```
 $P{theParameter} == "value_1" ?
     (" AND CONDITION_1 IN ('A', 'B', 'C') AND CONDITION_2 = 'Yes' "
     ) : " AND CONDITION_3 = 'Other' AND CONDITION_4 = 'No' " 
```

然后在您的 WHERE 子句中，您可以像这样引用它：

```
 WHERE
      .... = .....
      AND .... = ....
      AND .... = ....
      $P!{theParameter} 
```

如果 WHERE 子句中的约束列相同，则可以使用 $P! 从字面上引入参数值，并在查询中引用它：

```
 WHERE
      .... = .....
      AND .... = ....
      AND .... = ....
      AND thisValue = $P!{theParameter} 
```

# mysql - mysql 5.0 更新语法

> ID：12389179
> 
> 赞同：-2
> 
> 时间：2012-09-12T13:21:59.747
> 
> 标签：mysql, sql-update

我一直在尝试更新此代码，但它不起作用。我一直在重新阅读它并查看其他几个小时的示例，并且需要一些帮助才能使其正常工作。它是 mysql 数据库中成员表的基本 UPDATE 脚本。我有 mysql 版本 5.0.91。我没有尝试过任何工作。在浏览器中上传和测试时，返回 echo "update query failed" 我将失败的部分加粗。我只是不知道为什么。当我检查 mysqladmin 时，表没有更新。

```
$host="mysqlhost"; // Host name 
$username="mysqlusername"; // Mysql username 
$password="mysqlpassword"; // Mysql password 
$db_name="mydbname"; // Database name 
$tbl_name="brothers"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");  

mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$mymname=$_POST['mymname'];
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 
$myconfirmpassword=$_POST['myconfirmpassword'];
$mysnumber=$_POST['mysnumber'];
$myemail=$_POST['myemail'];

if ($mypassword !== $myconfirmpassword) {
die ("passwords do not match. Try again!");

if (isset($_COOKIE['fname'])) {
$myfname = ($_COOKIE['fname']);
}

else {
die('could not find cookie fname'); 
}

if (isset($_COOKIE['lname'])) {
$mylname = ($_COOKIE['lname']);
}

else {
die('could not find cookie lname'); 
}

$sql="SELECT * FROM $tbl_name WHERE fname='$myfname' AND lname='$mylname'";
$result=mysql_query($sql)or die("no sql");

while($row = mysql_fetch_array($result))
{
$fname=$row['fname'];
    if (!$fname) {
        die('variable not received');
        }
$lname=$row['lname'];
$position=$row['position'];
$committee=$row['committee'];}

if($mypassword==$myconfirmpassword) {

$query= "UPDATE brothers
SET `mname`='$mymname' WHERE `fname`    ='$fname'";

$chechresult= mysql_query($query) or die (mysql_error()); 
if (!$checkresult) echo 'update query failed';

elseif ($checkresults) {
  echo'update query success';
setcookie('position', $position, time()+86400,'/');
setcookie('committee', $committee, time()+86400,'/');

$headsuccess=header( "location:done_registration.php");
$headsuccess;
if (!$headsuccess) {
    die('Could not redirect success registration'); }

}
}

else{
$headlogin=header( "location:error_registration.php");
$headlogin;
if (!$headlogin) {
    die('Could not redirect registration error'); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:27:45.243

```
$chechresult= mysql_query($query) or die (mysql_error()); 
if (!$checkresult) echo 'update query failed'; 
```

你在 "$chechresult=" 中用 "h" 拼错了 "k"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:27:15.957

尝试打印包含 UPDATE 顺序的 $query 字符串，然后在 mysql 控制台中执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:25:58.197

你拼错了`$chechresult`——应该是`$checkresult`；还有，`$fname`应该`$myfname`！

可能值得`$query`在屏幕上回显，并直接在您的数据库中尝试 - 在您的控制台或 phpMyAdmin 中。由于`$fname`是空的（错误的变量），因此您的`WHERE`子句是错误的；猜测它正在影响零行，因此执行正确。

请记住，此代码中存在一些 SQL 注入安全问题 - 确保在将值添加到查询之前对其进行转义。更好的是，如果您升级到 PDO，您可以使用参数化，这将为您进行转义。

# javascript - 我的 javascript for 循环不起作用

> ID：12389180
> 
> 赞同：1
> 
> 时间：2012-09-12T13:22:00.343
> 
> 标签：javascript, arrays, for-loop

我有以下代码：

```
var transitionsSettingsClass = document.getElementsByClassName("transitionsSettings");  
var transitionsSettingsClassLenght = transitionsSettingsClass.length;  
for (i=0; i < transitionsSettingsClassLenght; i++);   
{   
    transitionsSettingsClass[i].setAttribute("data-transition",transitionsSettings);    
}; 
```

我知道 transitionsSettingsClassLenght = 6 因为我已经用警报检查了它。但是当我在循环中放置警报时，它只显示 1 次（它应该显示 6 次）。也未设置属性数据转换。但是当我用 transitionsSettingsClass[0] 替换 transitionsSettingsClass[i] 中的“i”时，我的第一个元素发生了变化并且它正在工作。该脚本应该在 6 个元素中更改属性数据转换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T13:23:57.167

去掉`;`末尾的

```
for (i=0; i < transitionsSettingsClassLenght; i++); 
```

这里`for`只命令 之前的代码`;`，没什么。

我建议您使用最常用的 javascript 样式，[正如 Google 所明确指出的那样](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Code_formatting)，因为它有助于避免此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:24:36.107

您是否尝试过使用 jquery 每种方法？

```
 $('.transitionsSettings').each(function(index) {
        $(this).setAttribute("data-transition",transitionsSettings);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:26:58.973

就像旁注一样：

* * *

在所有现代浏览器中，您可以`data-`通过调用来设置属性

```
node.dataset.transition = transitionsSettings; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:45:56.603

下面的代码解释如下：

`for (i=0; i < transitionsSettingsClassLenght; i++);
{
transitionsSettingsClass[i].setAttribute("data-transition",transitionsSettings);
};`

第一行：
`for (i=0; i < transitionsSettingsClassLenght; i++);`
执行 6 次，因为 Javascript 认为它是一条语句。然后它遇到哪个作为一个块执行一次。从 for 循环的末尾删除将解决问题。

`{
transitionsSettingsClass[i].setAttribute("data-transition",transitionsSettings);
};`
`;`

# android - OnCreateContextMenu 和 ListView 项目

> ID：12389184
> 
> 赞同：6
> 
> 时间：2012-09-12T13:22:10.697
> 
> 标签：android, arraylist, android-listview, contextmenu

我有一个包含几个项目的 LisView。为此，我连接了一个 OnItemClickListener （作为内部类），如下所示：

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    Toast.makeText(ShoppingListApp02Activity.this, "List item selected:" +  
    items.get(position).getId(), Toast.LENGTH_LONG).show();
    }
}); 
```

很明显，选择一个条目会显示该条目的对象的元素，在此示例中是所选项目对象的 ID（不是列表 ID，而是对象 ID，在创建 ArrayList 项目时设置）。这很好用，使我能够对选定的项目做任何我想做的事情。

现在我还想给她一个“长按”监听器，它会为选定的 ListView 项打开一个上下文菜单。我怎么做？我已经能够将 onCreateContextMenu 侦听器附加到 ListView，但是我看不到如何像使用 onItemClickListener 一样获取 ArrayList 的元素？

这是我所拥有的：

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {  
    menu.add(0, v.getId(), 0, "Something");
    menu.add(0, v.getId(), 0, "Something else");  
} 
```

由于 OnCreateConextMenu 采用与 OnItemClickListener 不同的参数，我如何像在 OnItemClickListener 中那样访问 ArrayList 的元素？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T10:52:56.090

如果您决定仍要使用上下文菜单范例：

考虑使用列表：

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {  

    // Get the list
    ListView list = (ListView)v;

    // Get the list item position    
    AdapterContextMenuInfo info = (AdapterContextMenuInfo)menuInfo;
    int position = info.position

    // Now you can do whatever.. (Example, load different menus for different items)
    list.getItem(position);
    ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T13:27:08.037

而不是弄乱上下文菜单（在广泛的上下文中使用 - 如在 PC 中的右键单击），`ListView`提供更容易实现的**onItemLongClick事件。**例如：

```
lv.setOnItemLongClickListener(new OnItemLongClickListener() {
   @Override
   public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
       long arg3) {
        // TODO Auto-generated method stub

        return false;
   }
}); 
```

这将帮助您连续完成长按操作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-12T13:42:26.673

在行视图上的长按事件的事件处理程序中打开视图的上下文菜单。

```
convertView.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                ((Activity)mContext).openContextMenu(v);
                return true;
            }
        }); 
```

这样，单击视图和长按上下文菜单都适用于列表视图行项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-12T13:46:25.860

首先将上下文菜单注册到您的列表视图中以打开上下文菜单：

```
registerForContextMenu(YOUR LIST-VIEW OBJECT); 
```

那么你可以使用你的 onCreateContextMenu() 方法：

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {  
    menu.add(0, v.getId(), 0, "Something");
    menu.add(0, v.getId(), 0, "Something else");  
} 
```

您实际上不需要将 longClickListener 与您的列表视图一起使用即可使用 ContextMenu。

希望它会帮助你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-01T12:34:31.540

我将让您通过下面的书面示例，看看它是如何使用 onContextItemSelected() 实现的

```
public void onCreateContextMenu(ContextMenu menu,
        View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    menu.setHeaderTitle(title);

    menu.add(0, CMD_EDIT, 0, R.string.context_menu_edit);
    menu.add(0, CMD_DELETE, 0, R.string.context_menu_delete);

}

@Override
public boolean onContextItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case CMD_EDIT:
        any_function();//add your functionality here i.e. what you want to do
        return true;
    case CMD_DELETE:
        **confirmDelete**();
        return true;
    default:
        return super.onContextItemSelected(item);
    }
} 
```

希望这可以帮助...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-11T13:56:01.513

试试这个在 recycleView 中的 View 项目

```
viewForContextMenu.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener() {
        @Override
        public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
            menu.add("Context Menu Item1").setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {
                @Override
                public boolean onMenuItemClick(MenuItem item) {

                    //What should happent on selecting context menu item 1
                    return true;
                }
            });
        }
    }); 
```

您可以将它与将数据设置为 ViewHolder 项目一起使用

# string - 是否有更短的方式将信息附加到现有字符串？

> ID：12389188
> 
> 赞同：1
> 
> 时间：2012-09-12T13:22:17.280
> 
> 标签：vba, string, ms-access, ms-access-2007, vba

是否有一种更短的方式将信息附加到[vba](/questions/tagged/vba "显示标记为“vba”的问题")中的现有字符串，而不是：

```
strExample = strExample & "Lorem Ipsum" 
```

我在编译动态字符串时有很多这样的东西，如果有更短的输入方式，它会节省时间并且在我的代码中看起来更整洁。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:24:39.957

不抱歉，这**是不可能的**。

使用[vb.net](/questions/tagged/vb.net "显示标记为“vb.net”的问题")，您可以使用 operator `&=`。但它不适用于[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:32:36.787

您可以设置一个全局字符串 var 并创建一个函数来添加到该字符串。它不会节省那么多时间编码，但它可能会有所帮助

```
Public strExample as String

Sub Main()
   {do something}
   AddTo("One")
   {do something else}
   AddTo("Two")
End Sub

Sub AddTo(str as String)
   strExample = strExample & str
End Sub 
```

# .net - 为什么加载程序在注册表中查找我的免注册 COM 组件？

> ID：12389195
> 
> 赞同：0
> 
> 时间：2012-09-12T13:22:54.410
> 
> 标签：.net, com, registration-free-com

我已经成功地使用免注册 COM 将 COM 组件加载到我的 .Net 进程中。突然有些事情发生了变化（当我出去吃午饭时，似乎:-)）并且加载过程停止了工作。

而在我的 COM 组件正确加载之前，现在我得到了 FileNotFoundException。

运行[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来探索是怎么回事，我发现加载器正在注册表中查找 CLSID，并发现组件已经注册。然后它查看注册的路径，发现 dll 不存在。

谁能告诉我，当我使用免注册 COM 配置加载程序时，为什么加载程序会去注册表查找组件？我假设清单优先于注册表，但我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:39:10.807

事实证明，罪魁祸首是[Visual Studio Hosting 进程](http://msdn.microsoft.com/en-us/library/ms185331.aspx)。当涉及到这个时，您的应用程序的清单文件（它指定 COM 依赖项）不会被读取。

因此，简单的解决方法是[禁用托管进程](http://msdn.microsoft.com/en-us/library/ms185330%28v=vs.80%29.aspx)。

# xna - 如何将位图图像创建为具有多个字符区域的 spritefont？

> ID：12389197
> 
> 赞同：2
> 
> 时间：2012-09-12T13:23:05.600
> 
> 标签：xna, spritefont

如何创建包含来自多个区域的字符并由 XNA 内容管道正确解释的位图字体图像？

我想在我的位图字体图像中添加一些特殊字符，但我不知道如何正确执行。

**UPD：**我想我离答案越来越近了。Sprite 字体纹理内容处理器在图像中查找非洋红色方块，并可能使用与普通 spritefonts 类似的 xml 设置文件将每个方块映射到相应的符号。我可能应该为我的自定义纹理编辑那个 xml 文件，但我还不知道在哪里可以找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:04:13.260

没有 XML 文件。

**您必须创建自定义内容处理器。从该处理器继承`FontTextureProcessor`并覆盖该`GetCharacterForIndex`方法。**

让您的方法返回纹理中指定索引的字符。

默认实现只返回`FirstCharacter + index`. 你可以使用它喜欢的任何逻辑。（我猜你甚至可以让它解析数据的 XML 文件。）

（请注意，对于单个区域，您可以`FirstCharacter`在该内容文件的属性窗口 (F4) 中指定“Sprite Font Texture”内容处理器的属性中的内容。）

# c# - 如何在 C# 中的 winform 中分配 Datagridview 数组

> ID：12389199
> 
> 赞同：1
> 
> 时间：2012-09-12T13:23:10.873
> 
> 标签：c#, winforms, gridview

我知道我可以通过以下方式分配gridview：

```
public static DataGridView grid = new DataGridView(); 
```

但我想要一个数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:31:25.787

像这样的东西

```
List<DataGridView> Grids = new List<DataGridView>();
// Assigning new DataGridViews
for (int i = 0; i < 5; i++)
  Grids.Add(new DataGridView());
// Fetching one
DataGridView fetched = Grids[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:28:50.033

你试过了吗：

```
DataGridView [] myArray = new DataGridView [5];
myArray[0] = new DataGridView();
// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:29:13.310

尝试

```
public static List < DataGridView >  grids = new List < DataGridView > (); 
```

# java - 如何在 Struts 1.2 中验证对 JSP 页面的请求

> ID：12389200
> 
> 赞同：2
> 
> 时间：2012-09-12T13:23:16.553
> 
> 标签：java, jsp, struts, struts-1, struts-validation

如何在 Struts 1.2 中验证对 JSP 页面的请求/响应？

简短的场景：动作类的响应在传递到 jsp 的过程中被捕获并被调整。如何验证该响应是否已被触及？（这都是 VAPT 的一部分，如果听起来不合逻辑，请见谅）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:17:02.353

> 来自动作类的响应在到达 jsp 的过程中被捕获并被调整

您是说 Java 和 JSP 没有运行同一个容器，甚至不是同一个 JVM，因此它们正在通过网络进行传输，而您担心那里的拦截？

还是您的意思是您的服务器堆栈中的某种过滤器类正在故意改变响应，并且您想验证您自己的转换？

或者你的意思是你关心服务器和客户端之间的拦截，你所说的这个词`JSP`实际上是`HTML`发送到客户端（浏览器）的渲染？

一般来说，你检测篡改的方式是使用散列——这就是为什么当你下载一个开源项目时，你经常会在它旁边看到一个散列下载。在普通浏览器上下文中，我不知道有任何现成的解决方案。也许在单独的选项卡/框架中有一些 javascript，它检查在单独的请求中传递的哈希？

但最终，如果您担心中间人攻击，请在`https`. 甚至可能使用相互证书（服务器向浏览器发送证书，浏览器向服务器发送证书，作为相互身份验证。）

# c# - 安装工作但无法运行应用程序

> ID：12389201
> 
> 赞同：2
> 
> 时间：2012-09-12T13:23:17.667
> 
> 标签：c#, visual-studio-2008, clickonce

这是一台带有 Service Pack 1 的 Windows 7 机器，我使用 x86 目标平台配置发布了一个 C# WPF 应用程序，因为它也需要安装在 XP 机器上。

我正在处理的问题正在变得令人讨厌。该应用程序在 Visual Studio 2008 调试模式下运行良好。运行从发布生成的安装程序可执行文件后，安装成功完成（或者至少看起来是这样），但是当它尝试打开时，我收到`Application cannot be started. Contact the application vendor.`消息框。

这是日志文件的错误摘要部分：

```
ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Activation of http://ServerPath/MyApplication_Install/Release/x86/MyApplication.application resulted in exception. Following failure messages were detected:
    + Value does not fall within the expected range. 
```

和错误详细信息部分：

```
ERROR DETAILS
Following errors were detected during this operation.
* [9/12/2012 8:15:42 AM] System.ArgumentException
    - Value does not fall within the expected range.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.NativeMethods.CorLaunchApplication(UInt32 hostType, String applicationFullName, Int32 manifestPathsCount, String[] manifestPaths, Int32 activationDataCount, String[] activationData, PROCESS_INFORMATION processInformation)
        at System.Deployment.Application.ComponentStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.SubscriptionStore.ActivateApplication(DefinitionAppId appId, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.Activate(DefinitionAppId appId, AssemblyManifest appManifest, String activationParameter, Boolean useActivationParameter)
        at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
        at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state) 
```

这里还有其他 ClickOnce 问题需要处理`Microsoft.Vbe.Interop, Version=14.0.0.0`- 确实出现在该`OPERATION PROGRESS STATUS`部分下的此日志文件中，但它并没有说程序集需要安装在全局程序集缓存中。

```
* [9/12/2012 8:45:19 AM] : Detecting dependent assembly Microsoft.Vbe.Interop, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71E9BCE111E9429C, processorArchitecture=msil using Microsoft.Vbe.Interop, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c, processorArchitecture=msil.
* [9/12/2012 8:45:19 AM] : Detecting dependent assembly Microsoft.Vbe.Interop, Version=12.0.0.0, Culture=neutral, PublicKeyToken=71E9BCE111E9429C using Microsoft.Vbe.Interop, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c. 
```

我需要从以前的安装中删除剩余的文件/文件夹吗？这是我的直觉，但我不知道在 AppData/Local/Temp 或 Windows/System32 文件夹中的何处查看。

**编辑**

我做了一些深入的挖掘，并在这里找到了我的应用程序的可执行文件：

`C:\Users\MyUsername\AppData\Local\Apps\2.0\A30V87AA.25Q\PQ06CCDW.CYM\wpfb..tion_41f7e986af356c0c_0004.0004_b15da840f06645a3\MyApplication.exe`

它加载没有任何错误。为了确认这是来自安装，而不是我的源代码，我在控制面板中进行了卸载，检查了该目录并且所有文件都消失了。

从 setup.exe 重新安装后，创建了一组不同的 jibberish 文件夹目录，但我仍然能够运行该应用程序。

那么为什么`Application cannot be started. Contact the application vendor.`安装后会弹出消息，即使`AppData`目录深处有一个工作副本？

**编辑#2**

正如 建议的那样`jvanh1`，我以管理员身份运行以查看是否有任何不同。不幸的是，它没有。

我被迫检查最新的标记版本并进行一些手动复制/粘贴——随后的发布确实有效。这里更重要的问题是我们以前从未在版本控制中使用过分支（至少对于这个应用程序没有），所以我说服我的经理让我试一试。

我将首先继续调查导致这个恼人的 ClickOnce 发布问题的原因——我的猜测是标记版本与我的工作副本中的不同引用集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:06:32.740

我遇到了一个非常相似的问题，结果发现其中一个引用 dll 已移动，但提示路径未更新。VS 没有警告我，而是自动引用了 GAC 副本，导致先决条件更改。我通过用本地 dll 引用替换 GAC 引用解决了这个问题。

# c# - 我如何分块一个可枚举的？

> ID：12389203
> 
> 赞同：16
> 
> 时间：2012-09-12T13:23:27.920
> 
> 标签：c#, linq, ienumerable

我需要一个优雅的方法，它接受一个可枚举并获取其中每个相同数量的元素但最后一个元素的可枚举：

```
public static IEnumerable<IEnumerable<TValue>> Chunk<TValue>(this IEnumerable<TValue> values, Int32 chunkSize)
{
    // TODO: code that chunks
} 
```

这是我尝试过的：

```
 public static IEnumerable<IEnumerable<TValue>> Chunk<TValue>(this IEnumerable<TValue> values, Int32 chunkSize)
    {
        var count = values.Count();
        var numberOfFullChunks = count / chunkSize;
        var lastChunkSize = count % chunkSize;
        for (var chunkIndex = 0; chunkSize < numberOfFullChunks; chunkSize++)
        {
            yield return values.Skip(chunkSize * chunkIndex).Take(chunkSize);
        }
        if (lastChunkSize > 0)
        {
            yield return values.Skip(chunkSize * count).Take(lastChunkSize);
        }
    } 
```

**更新** 刚刚发现有一个类似的主题关于[使用 LINQ 将列表拆分列表拆分为子列表](https://stackoverflow.com/questions/419019/split-list-into-sublists-with-linq)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-12T13:35:06.090

如果内存消耗不是问题，那么像这样？

```
static class Ex
{
    public static IEnumerable<IEnumerable<TValue>> Chunk<TValue>(
        this IEnumerable<TValue> values, 
        int chunkSize)
    {
        return values
               .Select((v, i) => new {v, groupIndex = i / chunkSize})
               .GroupBy(x => x.groupIndex)
               .Select(g => g.Select(x => x.v));
    }
} 
```

否则，您可以使用`yield`关键字获得创意，如下所示：

```
static class Ex
{
    public static IEnumerable<IEnumerable<TValue>> Chunk<TValue>(
                    this IEnumerable<TValue> values, 
                    int chunkSize)
    {
        using(var enumerator = values.GetEnumerator())
        {
            while(enumerator.MoveNext())
            {
                yield return GetChunk(enumerator, chunkSize).ToList();
            }
        }
    }

    private static IEnumerable<T> GetChunk<T>(
                     IEnumerator<T> enumerator,
                     int chunkSize)
    {
        do
        {
            yield return enumerator.Current;
        } while(--chunkSize > 0 && enumerator.MoveNext());
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-14T10:51:09.477

```
public static IEnumerable<IEnumerable<T>> Chunk<T>(this IEnumerable<T> source, int chunksize)
{
    while (source.Any())
    {
        yield return source.Take(chunksize);
        source = source.Skip(chunksize);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-10-01T20:09:51.743

### >= .Net 6

[Enumerable.Chunk(IEnumerable, Int32) 方法](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.chunk?view=net-6.0)

```
var list = Enumerable.Range(1, 999);

var chunks = list.Chunk(29);  // <--- here it is :)

foreach(var chunk in chunks) // <-- for each chunk
{
    foreach(var item in chunk) // <-- for each item in a chunk
    {
        Console.WriteLine(item);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:46:16.697

只进行了一些快速测试，但这似乎有效：

```
public static IEnumerable<IEnumerable<TValue>> Chunk<TValue>(this IEnumerable<TValue> values, Int32 chunkSize)
{
    var valuesList = values.ToList();
    var count = valuesList.Count();        
    for (var i = 0; i < (count / chunkSize) + (count % chunkSize == 0 ? 0 : 1); i++)
    {
        yield return valuesList.Skip(i * chunkSize).Take(chunkSize);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T18:10:29.747

如果您没有 .net 6，您可能会选择[将 Chunk 方法从它](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Linq/src/System/Linq/Chunk.cs)修补到您的项目中。您可能需要进行的唯一调整是与 .net 源使用的异常帮助程序有关，因为您自己的项目可能没有`ThrowHelper`。

他们的代码：

```
ThrowHelper.ThrowArgumentNullException(ExceptionArgument.source); 
```

可能更像：

```
throw new ArgumentNullException(nameof(source)); 
```

* * *

以下代码块已应用这些调整；您可以创建一个名为 Chunk.cs 的新文件并将以下代码放入其中：

```
// Licensed to the .NET Foundation under one or more agreements.
// The .NET Foundation licenses this file to you under the MIT license.

using System.Collections.Generic;

namespace System.Linq
{
    public static partial class Enumerable
    {
        /// <summary>
        /// Split the elements of a sequence into chunks of size at most <paramref name="size"/>.
        /// </summary>
        /// <remarks>
        /// Every chunk except the last will be of size <paramref name="size"/>.
        /// The last chunk will contain the remaining elements and may be of a smaller size.
        /// </remarks>
        /// <param name="source">
        /// An <see cref="IEnumerable{T}"/> whose elements to chunk.
        /// </param>
        /// <param name="size">
        /// Maximum size of each chunk.
        /// </param>
        /// <typeparam name="TSource">
        /// The type of the elements of source.
        /// </typeparam>
        /// <returns>
        /// An <see cref="IEnumerable{T}"/> that contains the elements the input sequence split into chunks of size <paramref name="size"/>.
        /// </returns>
        /// <exception cref="ArgumentNullException">
        /// <paramref name="source"/> is null.
        /// </exception>
        /// <exception cref="ArgumentOutOfRangeException">
        /// <paramref name="size"/> is below 1.
        /// </exception>
        public static IEnumerable<TSource[]> Chunk<TSource>(this IEnumerable<TSource> source, int size)
        {
            if (source == null)
            {
                throw new ArgumentNullException(nameof(source));
            }

            if (size < 1)
            {
                throw new ArgumentOutOfRangeException(nameof(size));
            }

            return ChunkIterator(source, size);
        }

        private static IEnumerable<TSource[]> ChunkIterator<TSource>(IEnumerable<TSource> source, int size)
        {
            using IEnumerator<TSource> e = source.GetEnumerator();
            while (e.MoveNext())
            {
                TSource[] chunk = new TSource[size];
                chunk[0] = e.Current;

                int i = 1;
                for (; i < chunk.Length && e.MoveNext(); i++)
                {
                    chunk[i] = e.Current;
                }

                if (i == chunk.Length)
                {
                    yield return chunk;
                }
                else
                {
                    Array.Resize(ref chunk, i);
                    yield return chunk;
                    yield break;
                }
            }
        }
    }
} 
```

[您应该验证将他们的 MIT 许可代码合并到您的项目中不会过度影响您自己的许可意图]

# windows-phone-7 - 如何处理 emailcomposetask 中的“输入的大小不应超过 64K”异常？

> ID：12389205
> 
> 赞同：2
> 
> 时间：2012-09-12T13:23:34.387
> 
> 标签：windows-phone-7, email, size, windows-phone-7.1, task

`EmailComposeTask`在 WP7 上非常有限，因为我无法使用我的代码发送附件。我正在尝试将文本作为正文发送`emailcomposetask`，它抛出了这个`The size of input should not exceed 64K`异常。请注意，我的文本`42.9 Kb`大小根据`Notepad`. 如何处理这个异常？有什么解决方案/替代方案/解决方法吗？

我还想知道`encoding`emailcomposetask 的内容遵循什么，以便我可以检查该特定编码中我的内容的等效大小？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:30:25.400

这就是我所做的，我将文本转换为`Unicode`并修剪了我要发送的文本的最后 63K 缓冲区。非常适合我的情况。谢谢你们的帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:31:54.637

问题是您没有计算邮件标题的电子邮件开销、编码正文等。

例如，如果消息体以 Base64 编码，它将比原始未编码消息至少大 1/3！

我认为没有理想的解决方案，尽管我会尝试将消息保持在 40k 文本以下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:32:08.130

这是[MIME](http://en.wikipedia.org/wiki/MIME)编码开销的结果。尝试压缩您的文本。

# parsing - 上传 CSV 文件并将数据解析到 Grails 中的数组？

> ID：12389208
> 
> 赞同：2
> 
> 时间：2012-09-12T13:23:43.777
> 
> 标签：parsing, grails, csv, upload

我创建了一个带有浏览按钮的视图，让用户选择一个文件，然后当他们单击上传按钮时，它应该在控制器中触发该功能。

我已经使用空函数设置了视图和控制器，并且一直在查看“ [Grails CSV 插件](http://grails.org/plugin/csv)”以帮助解析文件，但是从使用信息中我似乎无法掌握如何将这些 CSV 数据放入数组中？

任何人都可以帮我解决这个问题吗？提前致谢

这是我的控制器，它基本上是空的：

```
package com.smstool

import org.springframework.dao.DataIntegrityViolationException

class UploadController {

    def index() {
        redirect(action: "upload", params: params)
    }

    def upload() {

        }

} 
```

我的观点只包含这种形式：

```
<g:form action="upload" method="post" enctype="multipart/form-data">  
            <label for="file">File:</label>  
            <input type="file" name="file" id="file"/>  
            <input class="save" type="submit" value="Upload"/>  
        </g:form> 
```

我刚刚在控制器中尝试了这个：

```
@Grab('com.xlson.groovycsv:groovycsv:1.0')
import static com.xlson.groovycsv.CsvParser.parseCsv

import org.springframework.dao.DataIntegrityViolationException

class UploadController {

    def index() {
        redirect(action: "upload", params: params)
    }

    def upload() {

        }

    def batchUpload() {

            def csv = new File('file')

            //def csv = '''Name,Lastname
            //Mark,Andersson
            //Pete,Hansen'''

            def data = parseCsv(csv)

            for(line in data) {
                println "$line.Number"
            }
    }

} 
```

这不起作用，因为我收到以下错误，有什么想法吗？

```
Error 500: Internal Server Error

URI
    /upload/batchUpload
Class
    groovy.lang.MissingMethodException
Message
    No signature of method: static com.xlson.groovycsv.CsvParser.parseCsv() is applicable for argument types: (java.io.File) values: [file] Possible solutions: parseCsv(java.io.Reader), parseCsv(java.lang.String), parseCsv(java.util.Map, java.io.Reader), parseCsv(java.util.Map, java.lang.String), parse(java.io.Reader), parse(java.lang.String)

Around line 28 of grails-app/controllers/com/tool/UploadController.groovy

25:         //Mark,Andersson26:         //Pete,Hansen'''27:         28:         def data = parseCsv(csv)29:         30:         for(line in data) {31:              println "$line.Number"

Around line 195 of PageFragmentCachingFilter.java

192:            if (CollectionUtils.isEmpty(cacheOperations)) {193:             log.debug("No cacheable annotation found for {}:{} {}",194:                     new Object[] { request.getMethod(), request.getRequestURI(), getContext() });195:               chain.doFilter(request, response);196:              return;197:         }198:

Around line 63 of AbstractFilter.java

60:     try {61:            // NO_FILTER set for RequestDispatcher forwards to avoid double gzipping62:         if (filterNotDisabled(request)) {63:                doFilter(request, response, chain);64:          }65:            else {66:               chain.doFilter(req, res);

Trace

    Line | Method
->>   28 | batchUpload in UploadController.groovy
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    195 | doFilter    in PageFragmentCachingFilter.java
|     63 | doFilter .  in AbstractFilter.java
|   1110 | runWorker   in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    679 | run         in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T15:32:27.797

看法：

```
<g:uploadForm action="upload">
    <input type="file" name="file">
    <g:submitButton name="upload" value="Upload"/>
</g:uploadForm> 
```

控制器，安装了 Grails CSV 插件：

```
def upload() {
    def file = request.getFile('file')
    def allLines = file.inputStream.toCsvReader().readAll()
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T14:53:28.737

要读取单行或第一行：

```
def upload() {
   def file = request.getFile('file')
   def aLine = file.inputStream.toCsvReader().readNext()
   ...
} 
```

# php - MySQL - 在 PHP 中使用一对多映射连接表

> ID：12389209
> 
> 赞同：1
> 
> 时间：2012-09-12T13:23:45.493
> 
> 标签：php, mysql, join, csv

我必须连接多个表，其中一些具有一对多映射，并使用 PHP 将连接表中的每个条目转换为 csv 文件中的单个行条目。

我知道我基本上是从 3D 到 2D 表示，但这是 csv 文件的格式要求。

MySQL 结构由表“questions”、“people”和“trips”组成。"people" 表通过 "questions" 的 id 链接到 "questions" 表。同样，“trips”通过“people”的 id 链接到“people”。“问题”与“人”和“人”与“旅行”之间存在一对多的关系

这个想法是有一个 csv 文件，每行有一个“问题”条目。此行条目将是所有 3 个表的连接结果。每个问题条目的人数和旅行次数不一致，因此如果某些“问题”条目中的人数少于其他条目，则需要空格。旅行也是一样。

在 PHP 中完成这项工作的最佳方法是什么，除了用许多查询、for 循环等进行暴力编码。我试图让 MySQL 查询进行，但无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:27:33.087

我认为您正在寻找 mysql [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。

选择带有连接的数据，按 question_id 分组，并在人员和旅行列上使用 group_concat。

# php - 如何从 iframe 中隐藏 URL/SRC？

> ID：12389210
> 
> 赞同：-1
> 
> 时间：2012-09-12T13:23:46.890
> 
> 标签：php, url, iframe, hide

有没有人知道隐藏 iframe 的 src 的巧妙方法？

```
<iframe src=
    "<?php 
      $values = get_post_custom_values("my-custom-field"); 
      echo $values[0]; 
    ?>" 
    width="100%" 
    height="500px" 
    frameborder="0">
</iframe> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T13:51:02.310

正如人们在评论中所说，浏览器需要的东西不能被隐藏。

我唯一能想到的就是使用 HTML 实体：

```
<iframe src=
    "<?php 
      echo htmlentities($myurl);
    ?>" 
    width="100%" 
    height="500px" 
    frameborder="0">
</iframe> 
```

抱歉，如果有更好的方法编码到实际的浏览器中，那么它是可能的。不过，这可能是您最接近的。

# mysql - 测量 IN 子句是否会变得不正常（通用） - MySql？

> ID：12389218
> 
> 赞同：0
> 
> 时间：2012-09-12T13:24:19.957
> 
> 标签：mysql, performance

我有一个 MYSQL 问题：任何人都可以告诉我如何衡量一个`IN()`子句是否性能不佳。

到目前为止，我有一个包含大约 5.000 行的表，并且`IN()`将检查多达 100 个 ID。在接下来的两年里，它可能会增长到 50.000。

谢谢

***笔记***

我的`nonperformant`意思是，要有效，缓慢，表现不佳，...

**更新** 这是一个决策发现问题；所以`EXPLAIN`MySql 中的命令没有回答我的问题。性能不好的时候，我自己也能看到。但是我想在我开始设计之前知道它，这可能是错误的......

**更新** 我正在寻找一种通用的测量技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:08:37.717

您可以使用 mysql explain 语句来获取查询计划。只需在您的选择前输入说明并查看它的内容。您将需要学习如何阅读它，但这对于确定查询是否与您期望的一样快非常有帮助。

mysql 也没有最好的查询优化器。根据我的经验，有时运行 100 个简单快速的查询比运行复杂的连接要快。这是一种罕见的情况，但我从中获得了性能提升

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:16:38.560

您将使用该`EXPLAIN`语句来检查查询的执行方式。它显示来自优化器的有关查询执行计划、它将如何处理语句以及表如何连接以及以何种顺序连接的信息。

很多时候`JOIN`可以使用 a 代替 a `IN`，这应该会产生更好的性能。此外，索引对查询的运行速度有很大影响。

`EXPLAIN`我们至少需要查看您的查询。

# .net - 在 Windows 8 Metro 风格 c# 应用程序上捕获 Enter 和空格键

> ID：12389231
> 
> 赞同：3
> 
> 时间：2012-09-12T13:25:08.927
> 
> 标签：.net, xaml, windows-8, windows-runtime

我正在使用 C# 和 XAML，在 Windows 8 上开发 Metro 风格的应用程序。我想捕获 keyup 事件上的 enter 按钮，但它适用于除 enter 和空格键之外的所有键盘按钮。我的代码

XAML

```
<Button x:Name="btnName" KeyUp="KeyboardKey_Pressed">
</Button> 
```

C# 源代码

```
 public void KeyboardKey_Pressed(object sender, KeyRoutedEventArgs e)
 {        
     if (e.Key == Windows.System.VirtualKey.Enter)
            ......        
 } 
```

我知道如果我使用 TextBox 而不是 Button，它会起作用，但我想使用一个按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:00:39.020

This works:

```
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Input;

namespace YourNamespace
{
    public sealed class NiceButton: Button
    {
        public NiceButton()
            : base()
        {

        }
        protected override void OnKeyUp(KeyRoutedEventArgs e)
        {
        }
    }
} 
```

Use the NiceButton instead of your Button in the XAML by including the xmlns of your namespace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:44:48.813

根据[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868246.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868246.aspx)，：

> ButtonBase（Button 的基类）处理 KeyUp，以便它可以检查空格键或 Enter 键……当 ButtonBase 覆盖虚拟方法 OnKeyUp 时，就完成了对事件的处理。

因此，为了防止它捕获空格键或 Enter 键，请创建一个派生自 Button 的新按钮类，重写 OnKeyUp 并且不要调用基类实现。

# ruby - 如何检索数组中的值

> ID：12389238
> 
> 赞同：0
> 
> 时间：2012-09-12T13:25:34.377
> 
> 标签：ruby

```
 def self.foo
    [
      ["a","aa"],
      ["b","bb"],
    ]
  end 
```

给定“a”，我应该能够检索“aa”给定“bb”，我应该能够检索“b”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:56:08.837

[assoc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-assoc)和[rassoc](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-rassoc)是你的朋友：

```
ar = [
  ["a","aa"],
  ["b","bb"],
]
p ar.assoc("a").last #=> "aa"
p ar.rassoc("bb").first #=> "b" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:28:23.983

```
Hash[self.foo].invert["bb"] #=> "b"
Hash[self.foo]["a"] #=> "aa" 
```

`Hash[]`将数组转换为哈希

`Hash#invert`反转散列，因此所有值都映射到键

如果你想两者都做：

```
Hash[self.foo]["bb"] or Hash[self.foo].invert["bb"] #=> "b" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:18:22.223

我会创建自己的“bimap”实现，可能类似于：

```
class Bimap < Hash
  alias :__put__ :[]=
  def []=(key,value)
    __put__(key,value)
    __put__(value,key)
  end

  alias :__size__ :size
  def size
    __size__ / 2
  end

  # ...any other Hash methods to reimplement?
end 
```

# ios - IOS CancelNotificaion 在应用程序处于后台时的特定日期

> ID：12389244
> 
> 赞同：0
> 
> 时间：2012-09-12T13:26:00.597
> 
> 标签：ios, notifications, uilocalnotification

我正在开发一个提醒到期日期的应用程序。我已经使用`UILocalNotification`repeat Interval实现了相同的功能`(NSMonthCalendarUnit, NSDayCalendarUnit,NSDayCalendarUnit)`。例如，我的开火日期是 01-01-2012，重复间隔是`NSDayCalendarUnit`，结束日期是 2012 年`cancelLocalNotification:`12 月 12 日，是否可以到期。

这是代码：-

```
- (void) scheduleNotificationOn:(NSDate*) fireDate
                       text:(NSString*) alertText
                     action:(NSString*) alertAction
                      sound:(NSString*) soundfileName
                launchImage:(NSString*) launchImage 
                    andInfo:(NSDictionary*) userInfo

{

userInfo = [NSDictionary dictionaryWithObjectsAndKeys:
            txtExpiryDate.text, @"ExpiryDate",
            txtRegNo.text , @"RegNo",
            nil];

UILocalNotification *localNotification = [[UILocalNotification alloc] init];

localNotification.fireDate = fireDate;
localNotification.timeZone = [NSTimeZone systemTimeZone];   
localNotification.userInfo = userInfo;
localNotification.alertBody = alertText;
localNotification.alertAction = alertAction;    

NSLog(@"Repeat Type:%@",txtRepeat.text);

if([txtRepeat.text isEqualToString:@"Every Week"])
{

    NSLog(@"Every Week");
    localNotification.repeatInterval = 256;
}

else if([txtRepeat.text isEqualToString:@"Every Month"])
{
    NSLog(@"Every Month");
    localNotification.repeatInterval = NSMonthCalendarUnit;   
}

else if([txtRepeat.text isEqualToString:@"Every Day"])

{
    NSLog(@"Every Day");
    localNotification.repeatInterval = NSDayCalendarUnit;

}

if(soundfileName == nil)
{
    localNotification.soundName = UILocalNotificationDefaultSoundName;
}
else 
{
    localNotification.soundName = soundfileName;
}

NSLog(@"appDelegate.BadgeNumber:%d",appDelegate.BadgeNumber);

localNotification.alertLaunchImage = launchImage;
appDelegate.BadgeNumber = appDelegate.BadgeNumber + 1;
localNotification.applicationIconBadgeNumber = appDelegate.BadgeNumber;    

[[UIApplication sharedApplication] scheduleLocalNotification:localNotification];

[localNotification release];
} 
```

我通过将当前日期与到期日期进行比较来工作。但这仅在应用程序处于前台并且我不能取消通知而不是特定日期的后台时才有效。请找到以下相同的代码：-

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
/*
 Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
 */
    BadgeNumber = 0;   
application.applicationIconBadgeNumber = BadgeNumber;

NSArray *localNotifications = [[UIApplication sharedApplication] scheduledLocalNotifications];
[[UIApplication sharedApplication] cancelAllLocalNotifications];

NSDateFormatter *formatter =[[[NSDateFormatter alloc]init] autorelease];
[formatter setDateFormat:@"dd/MM/yyyy"];

NSLog(@"localNotifications Count %d",localNotifications.count);

for (UILocalNotification *notify in localNotifications)
{
    //notify.applicationIconBadgeNumber = 0;

    NSString *ExpiryDateString = [notify.userInfo objectForKey:@"ExpiryDate"];
    NSDate *ExpiryDate = [formatter dateFromString:ExpiryDateString];
    NSDate * NextFireDate = nil;
    NSLog(@"Expiry Date:%@",ExpiryDateString);

    if(notify.repeatInterval == NSDayCalendarUnit)
    {
        NSLog(@"Repeat Every Day");
        NextFireDate =  [[NSDate date] dateByAddingDays:1];
        NSLog(@"Next FireDate: %@",[formatter stringFromDate:NextFireDate]); 

    }
    if(notify.repeatInterval == NSWeekCalendarUnit)
    {
        NSLog(@"Repeat Every Day");
        NextFireDate =  [[NSDate date] addTimeInterval:D_WEEK];
        NSLog(@"Next FireDate: %@",[formatter stringFromDate:NextFireDate]); 

    }
    if(notify.repeatInterval == NSMonthCalendarUnit)
    {
        NSLog(@"Repeat Every Day");
        //NextFireDate =  [[NSDate date] addTimeInterval:D_Month];
        NextFireDate = [self CalculateExipiryDateForMonth];
        NSLog(@"Next FireDate: %@",[formatter stringFromDate:NextFireDate]); 

    }

    NSComparisonResult result = [NextFireDate compare:ExpiryDate];
    NSLog(@"NSComparisonResult:%d",result);

    if(result == NSOrderedDescending)
    {

        NSLog(@"Cancell......... Notification");
        NSLog(@"notify :::%@",notify);

    }
    else 
    {
        NSLog(@"Re-Schedule Notification");
        BadgeNumber =  BadgeNumber + 1;

        notify.applicationIconBadgeNumber = BadgeNumber;

        NSLog(@"BadgeNumber:%d",BadgeNumber);

        [[UIApplication sharedApplication] scheduleLocalNotification:notify];
    }
}

}

-(NSDate*) CalculateExipiryDateForMonth
{

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [[NSDateComponents alloc] init];
components.month = 1;
NSDate *nextMonth = [gregorian dateByAddingComponents:components toDate:[NSDate date] options:0];
[components release];

NSDateComponents *nextMonthComponents = [gregorian components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:nextMonth];
NSDate *expiryDay = [gregorian dateFromComponents:nextMonthComponents];

NSDateComponents *dayComponent = [[NSDateComponents alloc] init];
dayComponent.day = -1;

NSDate *NewExpiry = [gregorian dateByAddingComponents:dayComponent toDate:expiryDay options:0];  

[gregorian release]; 
[dayComponent release];

NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"dd/MM/yyyy"];
NSLog(@"Next Exipiry Date -----:%@",[formatter stringFromDate:NewExpiry]);

return NewExpiry;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:34:14.840

简而言之，不，当您的应用程序在后台运行时，您无法取消 UILocalNotification。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:19:28.623

```
 **Apple RESPONSE:-** 
```

我正在回答您关于 UILocalNotification 的问题。

目前 UILocalNotification 没有办法在通知自动取消之前指定到期日期或重复次数。

您今天可以获得的最接近的是安排多达 64 个单独的通知，而不是使用重复间隔。

但你是对的；如果用户从未将您的应用程序带到前台，它就没有机会取消或重新安排本地通知。

我强烈建议您在 < [https://developer.apple.com/bugreporter](https://developer.apple.com/bugreporter) > 提交增强请求，要求在未来的 iOS 版本中提供此功能。

您还询问了当用户从设备中删除您的应用程序时本地通知会发生什么情况。iOS 存储本地通知，以便在用户删除然后重新安装应用程序时仍会安排它们。

当您的应用程序运行时，它可以检查 UIApplication 的 scheduleLocalNotifications 属性并删除任何不再相关的通知。

最好的问候，--gc

* * *

Garth Cummings Apple 开发者技术支持

# php - 在 URL 中传递参数（不使用 php GET）

> ID：12389245
> 
> 赞同：2
> 
> 时间：2012-09-12T13:26:03.940
> 
> 标签：php, html, url, parameters

> **可能重复：**
> [mod 重写和查询字符串](https://stackoverflow.com/questions/2604378/mod-rewrite-and-query-strings)

我知道在 URL 中传递参数的唯一方法是使用 PHP 中的 GET 方法。但我看到许多网站直接在 URL 中使用似乎是参数的内容，如下所示：

```
http://.../page/2/ 
```

在这种情况下，“页面”真的是一个参数吗？如果是这样，它是如何在代码中处理的？

或者这是位于目录“页面”中的目录“2”的常规 URL？这是否意味着每当创建新帖子时，网站都会创建所有页面和相应的目录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:30:29.450

这称为 url 重写。基本上这意味着您使用 apache 模块将传入的 url 重写为新的 url，然后由 apache 处理

在您的示例`http://www.test.com/page/2/`中可能被重写为类似`http://www.test.com/?page=2`.

如果您在 Internet 上搜索 Apache URL rewrite，您将获得足够的结果来说明如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:50:00.440

这些都是约定俗成的。GET 参数并非特定于 PHP，这是所有浏览器对表单数据进行编码的方式。例如，基于 Java 的 webapps 使用分号分隔的参数。

您可以编写一个简单的层来转换`?alpha=1&beta=2`，`/alpha/1/beta/2`但它可能只是一个廉价的噱头（除了在极少数合法的情况下，如 Squid 缓存）。

今天的网站所做的是使用**单一入口点**模式。通常使用 apache `mod_rewrite`，所有请求都由 Apache 处理，`index.php`并且有一个**路由**工具可以为特定的 URL 方案选择适当的处理程序 PHP 文件。这些方案可以通过**正则表达式**轻松定义。

因此，总而言之，您可以决定 URL 的外观。这不是一件容易的事，有很多 SEO 蛇油推销员会让你做各种疯狂的事情。一个好的 URL 的作用是识别服务中的内容（文档），并且您必须在整个服务中使用该单个 URL 来解决它。

并且不要忘记：酷 URL 不会改变。您**将**在 2 年内放弃当前的代码库并从头开始重建您的网站。从逻辑的角度来看，以一种有意义的方式设计您的 URL 方案，而不是依赖于您的 Web 应用程序设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:31:28.863

您给出的示例仍然是 GET 请求。

您正在寻找的是[URL 重写](http://www.sitepoint.com/guide-url-rewriting/)。

# css - 如何让我的页面尊重 h1 css 添加？

> ID：12389247
> 
> 赞同：1
> 
> 时间：2012-09-12T13:13:59.713
> 
> 标签：css, html-heading

我加

```
h1 {
    margin-top:100px;
} 
```

到css的末尾，但页面没有改变。但是如果我添加到一些 h1 的 html 中：

```
<h1 style="margin-top:100px;"><a class="toc-backref" href="#id4">KHotKeys</a><a class="headerlink" href="#khotkeys" title="Permalink to this headline">¶</a></h1> 
```

然后它会。

我不是css pro，我猜问题出在css文件的某个地方。这里是：

```
div.clearer {
    clear: both;
}

/* -- relbar ---------------------------------------------------------------- */

div.related {
    width: 100%;
    font-size: 90%;
}

div.related h3 {
    display: none;
}

div.related ul {
    margin: 0;
    padding: 0 0 0 10px;
    list-style: none;
}

div.related li {
    display: inline;
}

div.related li.right {
    float: right;
    margin-right: 5px;
}

/* -- sidebar --------------------------------------------------------------- */

div.sphinxsidebarwrapper {
    padding: 10px 5px 0 10px;
}

div.sphinxsidebar {
    float: left;
    width: 230px;
    margin-left: -100%;
    font-size: 90%;
}

div.sphinxsidebar ul {
    list-style: none;
}

div.sphinxsidebar ul ul,
div.sphinxsidebar ul.want-points {
    margin-left: 20px;
    list-style: square;
}

div.sphinxsidebar ul ul {
    margin-top: 0;
    margin-bottom: 0;
}

div.sphinxsidebar form {
    margin-top: 10px;
}

div.sphinxsidebar input {
    border: 1px solid #98dbcc;
    font-family: sans-serif;
    font-size: 1em;
}

div.sphinxsidebar input[type="text"] {
    width: 160px;
}

div.sphinxsidebar input[type="submit"] {
    width: 30px;
}

img {
    border: 0;
}

/* -- search page ----------------------------------------------------------- */

ul.search {
    margin: 10px 0 0 20px;
    padding: 0;
}

ul.search li {
    padding: 5px 0 5px 20px;
    background-image: url(file.png);
    background-repeat: no-repeat;
    background-position: 0 7px;
}

ul.search li a {
    font-weight: bold;
}

ul.search li div.context {
    color: #888;
    margin: 2px 0 0 30px;
    text-align: left;
}

ul.keywordmatches li.goodmatch a {
    font-weight: bold;
}

/* -- index page ------------------------------------------------------------ */

table.contentstable {
    width: 90%;
}

table.contentstable p.biglink {
    line-height: 150%;
}

a.biglink {
    font-size: 1.3em;
}

span.linkdescr {
    font-style: italic;
    padding-top: 5px;
    font-size: 90%;
}

/* -- general index --------------------------------------------------------- */

table.indextable {
    width: 100%;
}

table.indextable td {
    text-align: left;
    vertical-align: top;
}

table.indextable dl, table.indextable dd {
    margin-top: 0;
    margin-bottom: 0;
}

table.indextable tr.pcap {
    height: 10px;
}

table.indextable tr.cap {
    margin-top: 10px;
    background-color: #f2f2f2;
}

img.toggler {
    margin-right: 3px;
    margin-top: 3px;
    cursor: pointer;
}

div.modindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

div.genindex-jumpbox {
    border-top: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    margin: 1em 0 1em 0;
    padding: 0.4em;
}

/* -- general body styles --------------------------------------------------- */

a.headerlink {
    visibility: hidden;
}

h1:hover > a.headerlink,
h2:hover > a.headerlink,
h3:hover > a.headerlink,
h4:hover > a.headerlink,
h5:hover > a.headerlink,
h6:hover > a.headerlink,
dt:hover > a.headerlink {
    visibility: visible;
}

div.body p.caption {
    text-align: inherit;
}

div.body td {
    text-align: left;
}

.field-list ul {
    padding-left: 1em;
}

.first {
    margin-top: 0 !important;
}

p.rubric {
    margin-top: 30px;
    font-weight: bold;
}

img.align-left, .figure.align-left, object.align-left {
    clear: left;
    float: left;
    margin-right: 1em;
}

img.align-right, .figure.align-right, object.align-right {
    clear: right;
    float: right;
    margin-left: 1em;
}

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
    text-align: left;
}

.align-center {
    text-align: center;
}

.align-right {
    text-align: right;
}

/* -- sidebars -------------------------------------------------------------- */

div.sidebar {
    margin: 0 0 0.5em 1em;
    border: 1px solid #ddb;
    padding: 7px 7px 0 7px;
    background-color: #ffe;
    width: 40%;
    float: right;
}

p.sidebar-title {
    font-weight: bold;
}

/* -- topics ---------------------------------------------------------------- */

div.topic {
    border: 1px solid #ccc;
    padding: 7px 7px 0 7px;
    margin: 10px 0 10px 0;
}

p.topic-title {
    font-size: 1.1em;
    font-weight: bold;
    margin-top: 10px;
}

/* -- admonitions ----------------------------------------------------------- */

div.admonition {
    margin-top: 10px;
    margin-bottom: 10px;
    padding: 7px;
}

div.admonition dt {
    font-weight: bold;
}

div.admonition dl {
    margin-bottom: 0;
}

p.admonition-title {
    margin: 0px 10px 5px 0px;
    font-weight: bold;
}

div.body p.centered {
    text-align: center;
    margin-top: 25px;
}

/* -- tables ---------------------------------------------------------------- */

table.docutils {
    border: 0;
    border-collapse: collapse;
}

table.docutils td, table.docutils th {
    padding: 1px 8px 1px 5px;
    border-top: 0;
    border-left: 0;
    border-right: 0;
    border-bottom: 1px solid #aaa;
}

table.field-list td, table.field-list th {
    border: 0 !important;
}

table.footnote td, table.footnote th {
    border: 0 !important;
}

th {
    text-align: left;
    padding-right: 5px;
}

table.citation {
    border-left: solid 1px gray;
    margin-left: 1px;
}

table.citation td {
    border-bottom: none;
}

/* -- other body styles ----------------------------------------------------- */

ol.arabic {
    list-style: decimal;
}

ol.loweralpha {
    list-style: lower-alpha;
}

ol.upperalpha {
    list-style: upper-alpha;
}

ol.lowerroman {
    list-style: lower-roman;
}

ol.upperroman {
    list-style: upper-roman;
}

dl {
    margin-bottom: 15px;
}

dd p {
    margin-top: 0px;
}

dd ul, dd table {
    margin-bottom: 10px;
}

dd {
    margin-top: 3px;
    margin-bottom: 10px;
    margin-left: 30px;
}

dt:target, .highlighted {
    background-color: #fbe54e;
}

dl.glossary dt {
    font-weight: bold;
    font-size: 1.1em;
}

.field-list ul {
    margin: 0;
    padding-left: 1em;
}

.field-list p {
    margin: 0;
}

.refcount {
    color: #060;
}

.optional {
    font-size: 1.3em;
}

.versionmodified {
    font-style: italic;
}

.system-message {
    background-color: #fda;
    padding: 5px;
    border: 3px solid red;
}

.footnote:target  {
    background-color: #ffa;
}

.line-block {
    display: block;
    margin-top: 1em;
    margin-bottom: 1em;
}

.line-block .line-block {
    margin-top: 0;
    margin-bottom: 0;
    margin-left: 1.5em;
}

.guilabel, .menuselection {
    font-family: sans-serif;
}

.accelerator {
    text-decoration: underline;
}

.classifier {
    font-style: oblique;
}

/* -- code displays --------------------------------------------------------- */

pre {
    overflow: auto;
    overflow-y: hidden;  /* fixes display issues on Chrome browsers */
}

td.linenos pre {
    padding: 5px 0px;
    border: 0;
    background-color: transparent;
    color: #aaa;
}

table.highlighttable {
    margin-left: 0.5em;
}

table.highlighttable td {
    padding: 0 0.5em 0 0.5em;
}

tt.descname {
    background-color: transparent;
    font-weight: bold;
    font-size: 1.2em;
}

tt.descclassname {
    background-color: transparent;
}

tt.xref, a tt {
    background-color: transparent;
    font-weight: bold;
}

h1 tt, h2 tt, h3 tt, h4 tt, h5 tt, h6 tt {
    background-color: transparent;
}

.viewcode-link {
    float: right;
}

.viewcode-back {
    float: right;
    font-family: sans-serif;
}

div.viewcode-block:target {
    margin: -1px -10px;
    padding: 0 10px;
}

/* -- math display ---------------------------------------------------------- */

img.math {
    vertical-align: middle;
}

div.body div.math p {
    text-align: center;
}

span.eqno {
    float: right;
}

/* -- printout stylesheet --------------------------------------------------- */

@media print {
    div.document,
    div.documentwrapper,
    div.bodywrapper {
        margin: 0 !important;
        width: 100%;
    }

    div.sphinxsidebar,
    div.related,
    div.footer,
    #top-link {
        display: none;
    }
}

body {
    font-family: sans-serif;
    font-size: 100%;
    background-color: #11303d;
    color: #000;
    margin: 0;
    padding: 0;
}

div.document {
    background-color: #d4e9f7;
}

div.documentwrapper {
    float: left;
    width: 100%;
}

div.bodywrapper {
    margin: 0 0 0 230px;
}

div.body {
    background-color: #ffffff;
    color: #222222;
    padding: 0 20px 30px 20px;
}

div.footer {
    color: #ffffff;
    width: 100%;
    padding: 9px 0 9px 0;
    text-align: center;
    font-size: 75%;
}

div.footer a {
    color: #ffffff;
    text-decoration: underline;
}

div.related {
    background-color: #191a19;
    line-height: 30px;
    color: #ffffff;
}

div.related a {
    color: #ffffff;
}

div.sphinxsidebar {
    top: 30px;
    bottom: 60px;
    margin: 0;
    position: fixed;
    overflow: auto;
    height: auto;
}

div.sphinxsidebar h3 {
    font-family: 'Trebuchet MS', sans-serif;
    color: #3a3a3a;
    font-size: 1.4em;
    font-weight: normal;
    margin: 0;
    padding: 0;
}

div.sphinxsidebar h3 a {
    color: #3a3a3a;
}

div.sphinxsidebar h4 {
    font-family: 'Trebuchet MS', sans-serif;
    color: #3a3a3a;
    font-size: 1.3em;
    font-weight: normal;
    margin: 5px 0 0 0;
    padding: 0;
}

div.sphinxsidebar p {
    color: #3a3a3a;
}

div.sphinxsidebar p.topless {
    margin: 5px 10px 10px 10px;
}

div.sphinxsidebar ul {
    margin: 10px;
    padding: 0;
    color: #3a3a3a;
}

div.sphinxsidebar ul li {
    margin-top: .2em;
}

div.sphinxsidebar a {
    color: #3a8942;
}

div.sphinxsidebar input {
    border: 1px solid #3a8942;
    font-family: sans-serif;
    font-size: 1em;
}

/* -- body styles ----------------------------------------------------------- */

a {
    color: #355f7c;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

div.body p, div.body dd, div.body li {

    text-align: left;
    line-height: 130%;
    margin-top: 0px;
    margin-bottom: 0px;
}

div.body h1,
div.body h2,
div.body h3,
div.body h4,
div.body h5,
div.body h6 {
    font-family: 'Trebuchet MS', sans-serif;
    background-color: #f2f2f2;
    font-weight: normal;
    color: #20435c;
    border-top: 2px solid #cccccc;
    border-bottom: 1px solid #cccccc;
    margin: 30px -20px 20px -20px;
    padding: 3px 0 3px 10px;
}

div.body h1 { margin-top: 0; font-size: 200%; }
div.body h2 { font-size: 160%; }
div.body h3 { font-size: 140%; padding-left: 20px; }
div.body h4 { font-size: 120%; padding-left: 20px; }
div.body h5 { font-size: 110%; padding-left: 20px; }
div.body h6 { font-size: 100%; padding-left: 20px; }

a.headerlink {
    color: #c60f0f;
    font-size: 0.8em;
    padding: 0 4px 0 4px;
    text-decoration: none;
}

a.headerlink:hover {
    background-color: #c60f0f;
    color: white;
}

div.body p, div.body dd, div.body li {
    text-align: left;
    line-height: 110%;
}

div.admonition p.admonition-title + p {
    display: inline;
}

div.note {
    background-color: #eee;
    border: 1px solid #ccc;
}

div.seealso {
    background-color: #ffc;
    border: 1px solid #ff6;
}

div.topic {
    background-color: #eee;
}

div.warning {
    background-color: #ffe4e4;
    border: 1px solid #f66;
}

p.admonition-title {
    display: inline;
}

p.admonition-title:after {
    content: ":";
}

pre {
    padding: 0px;
    background-color: #ffffff;
    color: #000000;
    line-height: 120%;
    border: 0px solid #ffffff;
    border-left: none;
    border-right: none;
    white-space: pre-wrap;
    /* word-wrap: break-word; */
    /* width:100px; */
}

tt {
    background-color: #ecf0f3;
    padding: 0 1px 0 1px;
    font-size: 110%;
}

.warning tt {
    background: #efc2c2;
}

.note tt {
    background: #d6d6d6;
}

body {
    width:150%;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:34:43.237

到目前为止，所有答案都忘记指出的是*为什么*您的覆盖不起作用。

你有这个：

```
div.body h1 { margin-top: 0; font-size: 200%; } 
```

然后你尝试添加这个：

```
h1 { margin-top:100px; } 
```

你现在需要的是了解*特异性*。`div.body h1`比简单*更具体*`h1`。你只能用*至少同样*具体的东西来覆盖它。例如，与`div.body h1`、 或`div.body h1.class`、 或`div.body h1#id`。

如果你用谷歌搜索，周围有很多方便的特异性图表。这是一个以星球大战为主题的：

![星球大战主题的 CSS 特异性图表](../Images/8771be34ca9e89295274f9dfb50e0b6e.png)

哦，内联覆盖有效，因为内联 CSS 胜过所有非内联。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T13:27:17.403

使用 Firebug 或 Chrome 调试器，您可以查看哪个属性覆盖了另一个属性。然后您将能够在您的 CSS 文件中看到问题出在哪里。

例如，在此页面上，您可以看到它`color`并被`text-decoration`另一种样式覆盖。ETC。：

![在此处输入图像描述](../Images/388aea7789089513809fb88165d881dd.png)

这里的问题是`all.css`里面只有一行CSS。但是您可以看到每个属性都可以在文件中定义的行中找到。

您还可以添加一个`!important`以强制此值成为最后一个值。

```
h1 {
    margin-top:100px !important;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:30:21.187

如果您打算重新定义`margin-top`，`div.body h1`那么您需要重新定义它：

```
div.body h1 {
    margin-top: 100px;
} 
```

如果您打算重新定义**所有**`margin-top`样式，则将覆盖所有样式： **`h1``!important``margin-top`**

 **```
h1 {
    margin-top:100px !important;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T13:28:24.473

h1 被 div.body 覆盖 h1
改用这个

```
div.body h1  {
    margin-top:100px;
} 
```**

# mysql - Mysql计算重复行的百分比

> ID：12389253
> 
> 赞同：4
> 
> 时间：2012-09-12T13:26:43.433
> 
> 标签：mysql, count, subquery, percentage

所以我试图计算我系统中每家餐厅的重复订单数量。这被定义为从该餐厅多次订购的用户数量（基于他们的电子邮件地址 eo_email）。架构下的示例

这是代表我的餐厅的表格

```
CREATE TABLE IF NOT EXISTS `lf_restaurants` (
  `r_id` int(8) NOT NULL AUTO_INCREMENT,
  `r_name` varchar(128) DEFAULT NOT NULL,
  PRIMARY KEY (`r_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;

INSERT INTO `lf_restaurants` (`eo_id`, `eo_ref_id`) VALUES
('1', 'Restaurant X'),
('2', 'Cafe Y'); 
```

这是我的订单表

```
CREATE TABLE IF NOT EXISTS `ecom_orders` (
  `eo_id` mediumint(9) NOT NULL AUTO_INCREMENT,
  `eo_ref_id` varchar(12) DEFAULT NOT NULL,
  `eo_email` varchar(255) DEFAULT NOT NULL,
  `eo_order_parent` int(11) NOT NULL,
  PRIMARY KEY (`eo_id`),
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ;

INSERT INTO `ecom_orders` (`eo_id`, `eo_ref_id`, `eo_email`, `eo_order_parent`) VALUES
('', '', 'a@a.com', '1'),
('', '', 'a@a.com', '1'),
('', '', 'a@a.com', '1'),
('', '', 'a@a.com', '1'),
('', '', 'a@a.com', '1'),
('', '', 'b@b.com', '1'),
('', '', 'b@b.com', '1'),
('', '', 'c@c.com', '1'),
('', '', 'd@d.com', '1'),
('', '', 'e@e.com', '1'),
('', '', 'a@a.com', '2'),
('', '', 'c@c.com', '2'),
('', '', 'c@c.com', '2'),
('', '', 'e@e.com', '2'); 
```

所以餐厅 X (r_id 1) 有 10 个订单。用户 a@a.com 和 b@b.com 曾多次从该餐厅点过餐，而 c@c.com、d@d.com 和 e@e.com 仅点过一次，因此需要退货40%

Cafe Y (r_id 2) 有 4 个订单。用户 c@c.com 已下单两次，用户 a@a.com 和 e@e.com 仅下单一次，因此需要退货 33%

我不确定发布我已经得到的东西会很好，因为我一直遇到“子查询有超过 1 个结果”，或者如果我将该子查询包装在它自己的虚拟查询中并带有一个计数，它不会让我使用我的字段需要来自主查询，例如 r_id。但这里有：

```
SELECT r_name,
    (SELECT COUNT(*) AS cnt_users
        FROM (
            SELECT *
            FROM ecom_orders
            WHERE eo_order_parent = r_id
            GROUP BY eo_email
        ) AS cnt_dummy
    ) AS num_orders,
    (SELECT COUNT(*) AS cnt
        FROM ecom_orders
        WHERE eo_order_parent = r_id
        GROUP BY eo_order_parent, eo_email

    ) AS num_rep_orders
    FROM lf_restaurants
    ORDER BY num_orders DESC 
```

num_orders 子查询说它不识别 r_id，因为我猜这是由于执行事物的顺序

num_rep_orders 子查询以多行的形式返回，但我真的希望它只返回一个值，如果我像 num_orders 子查询那样做，我可以这样做，但随后会遇到 r_id 不存在问题。

***所以我的问题是：*****如何在不遇到子查询的情况下获得我需要的这些值有超过 1 行，并且 r_id 不存在？**

然后从这两个值中，我可以计算出百分比，所有这些都应该是肉汁:) 非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:43:34.043

> 所以餐厅 X (r_id 1) 有 10 个订单。用户 a@a.com 和 b@b.com 曾多次从该餐厅点过餐，而 c@c.com、d@d.com 和 e@e.com 仅点过一次，因此需要退货40%
> 
> Cafe Y (r_id 2) 有 4 个订单。用户 c@c.com 已下单两次，用户 a@a.com 和 e@e.com 仅下单一次，因此需要退货 33%

好的。因此，让我们从获取回头客的数量开始。

```
SELECT eo_order_parent, eo_email, COUNT(eo_email) AS orders FROM ecom_orders
    GROUP BY eo_order_parent, eo_email
    HAVING orders > 1; 
```

以及不同客户的总数

```
SELECT eo_order_parent, COUNT(eo_email) FROM ecom_orders
    GROUP BY eo_order_parent; 
```

但是我们可以一口气做到这一点：

```
SELECT eo_order_parent,
    SUM(CASE WHEN orders > 1 THEN 1 ELSE 0 END) AS repeats,
    SUM(1) AS total FROM
    (
        SELECT eo_order_parent, eo_email, COUNT(*) AS orders FROM ecom_orders
            GROUP BY eo_order_parent, eo_email
    ) AS eo_group_1
GROUP BY eo_order_parent; 
```

这给出了：

```
+-----------------+---------+-------+
| eo_order_parent | repeats | total |
+-----------------+---------+-------+
|               1 |       2 |     5 |
|               2 |       1 |     3 |
+-----------------+---------+-------+
2 rows in set (0.00 sec) 
```

那么2/5就是你的40%，1/3就是33%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:55:56.457

以下查询计算回头客数和每家餐厅的总客户数

```
SELECT
  u.r_id,
  u.r_name,
  SUM(u.no_orders > 1) AS repeats,
  SUM(u.no_orders) AS orders,
  COUNT(u.eo_email) AS customers
FROM (
    SELECT
      r.*,
      o.eo_email,
      COUNT(o.eo_id) AS no_orders
    FROM lf_restaurants r
    LEFT JOIN ecom_orders o ON o.eo_order_parent = r.r_id
    GROUP BY o.eo_email
) u
GROUP BY
  r.r_id; 
```

子查询首先计算每个客户/餐厅对的订单数。外部查询由此计算顾客数量、回头客数量和每家餐厅的顾客总数。您还可以计算百分比（但这不必在查询中完成）。

# php - 替换语句中的反斜杠 - 语法错误

> ID：12389254
> 
> 赞同：0
> 
> 时间：2012-09-12T13:26:43.737
> 
> 标签：php, mysql

我有一个脚本可以让我替换数据库中的值。

当我使用这个时：

```
$search[] = ("\\");

$sql[$handle]['sql'] = 'UPDATE '.$table.' SET '.$field.' = REPLACE('.$field.',\''.$search[$i].'\',\''.$replace[$i].'\')'; 
```

我收到以下错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''\')' 附近使用正确的语法）

我知道这可能只是转义反斜杠的问题，但我已经尝试了一切（更改为双引号、转义、使用字符代码、utf 8 编码/解码等，但仍然没有运气。

请注意，其他值运行良好（我有一个 $search[] 值列表）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:29:15.297

因为`"\\"`创建 string `\`，所以普通 SQL is `REPLACE('...,\')`，这是一个错误。采用：

```
$search[] = ("\\\\"); 
```

看看[mysql 字符串文字](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:28:19.510

用这个：

```
$search[] = ("{\}"); 
```

这将搜索 \

或者

```
$search[] = ("{\\}"); 
```

如果你想搜索 2 个反斜杠....

# javascript - 如何在可实例化的 Liferay Portlet 中处理全局 JS 变量？

> ID：12389259
> 
> 赞同：0
> 
> 时间：2012-09-12T13:27:03.720
> 
> 标签：javascript, liferay, liferay-6

Liferay 中的portlet 可以每页添加一次，也可以每页添加多次，当portlet 可以多次添加时，它也称为可实例化的Portlet。

在这样一个可实例化的 Portlet 中，我需要一个 Portlet 范围内的全局 JS 变量。目前我的jsp文件中有JS代码（丑陋，我知道^^）并在我的变量名中使用portlet命名空间，例如：

```
var <portlet:namespace/>oldUsedCPUsValue = 0; 
```

但是现在我想将我所有的 JS 代码放入`main.js`文件中，我显然不能使用 portlet 命名空间。我怎么能这样做？一个全局数组和作为键的 portlet 命名空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:54:52.613

Javascript 不是我的专长，但我只会将代码放入 main.js 中（您可以自己命名它，而不关心它是否会被另一个 portlet 中的相同代码重载（这是我的 javascript-special-knowledge：我没有'甚至不检查 main.js 是否会被包含两次——如果你检查它，它甚至可能只被包含一次。

然后从 jsp 页面调用/初始化它，您可以在其中使用命名空间（如果您有要求它们是完全全局的。

另一种方法（如果你不关心实际的命名空间而只需要一个命名空间）是使用 AlloyUI（YUI 的扩展），命名空间是免费的：

```
AUI().use('node', 'module2', 'foo', function (A) {
  // your code and 'global' variables go here.

  A.foo.bar();

  // the namespace ends here
}); 
```

# artificial-intelligence - Wining Eleven 3, Final Ver 没有人工智能，但如何？

> ID：12389261
> 
> 赞同：-2
> 
> 时间：2012-09-12T13:27:06.787
> 
> 标签：artificial-intelligence, game-engine

我对游戏开发很感兴趣。我在某处读到，Wining Eleven 3, Final Ver. 中没有人工智能。我很想知道 CPU 如何响应动作和播放。例如 CPU 与 CPU 游戏：结果基于什么？每次结果怎么可能不同？

任何帮助表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T19:32:37.333

游戏中必须有某种形式的人工智能或机器学习，除非这都是随机动作。有可能已经为某些输入预先计算了“正确”的动作，但这对于这个游戏来说似乎不太可能。

从广义上讲，游戏可能会采用一组当前变量状态并通过某种算法运行它以确定下一个“正确”移动。变量输入的细微差异可能会产生差异（为什么游戏每次都不同），或者那里可能有一个随机数生成器从可接受的移动百分比中挑选。

# sql-server - 选择文件不存在的所有记录

> ID：12389264
> 
> 赞同：0
> 
> 时间：2012-09-12T13:27:10.843
> 
> 标签：sql-server, sql-server-2008

我有一个表，其中一列是完整的文件路径。我想编写一个选择查询，它将选择该路径不存在的每条记录。我试图使用 xp_fileexist，但在选择查询中使用它时运气不佳。执行此操作的正确方法是什么（不一定必须使用 xp_fileexist）？

# objective-c - 在基于文档的应用程序中管理上下文敏感的 NSMenu

> ID：12389265
> 
> 赞同：0
> 
> 时间：2012-09-12T13:27:12.763
> 
> 标签：objective-c, cocoa

我有一个基于文档的应用程序，其中包含上下文相关的文件菜单的子菜单。我试图找出管理它的适当方法，我想我知道答案......但想确保我没有遗漏一些明显/更简单的东西。

该文档具有`NSWindowController`为每个文档实例化的 ，并且是该`NSWindowDelegate`实例的 。在`NSWindowController`'s`-init`和`-dealloc`方法中，我可以创建和删除`NSMenu`. 但是由于菜单对应用程序是全局的，而不是特定于单个文档（或者我认为），我还必须删除菜单并在通过`NSWindowDelegate`'s`-windowDidBecomeMain`和 `-windowWillResignMain` （或者可能是类似的 .. .Key方法，我对那个区别有点模糊）

此外，我需要制作`NSWindowController`的`NSMenu`委托，以实现`-menuNeedsUpdate`（同样，保持委托与当前活动的`NSWindowController`.

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:47:08.670

我一直用于上下文相关菜单的一个技巧是利用 validateMenuItem 来做的不仅仅是验证 menuItems。

在您的情况下，您可以让应用程序委托菜单的委托，并在 validateMenuItem 内部，如果菜单项是您需要更改的，则更改它。调用 [NSDocumentManager sharedManager] 以获取当前活动文档的实例，并从中获取您需要的任何信息来填充您的菜单项。

# bash - 查找：删除目录后无法 chdir 到目录错误消息

> ID：12389271
> 
> 赞同：3
> 
> 时间：2012-09-12T13:27:24.660
> 
> 标签：bash, shell, unix, automation

我正在开发一个项目来自动删除超过一天的特定目录。我有以下代码工作：

```
find Directory/ -type d -name "Directory.To.Delete.*" -mtime +1 -exec rm -rf {} \; 
```

它运行良好并按预期删除目录（和内容），但它总是以错误结束：

```
查找：无法 chdir 到 Directory/ ：没有这样的文件或目录

```

有没有办法在不遇到此错误的情况下运行此代码？我不明白为什么此代码在删除目录后尝试 chdir。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:45:29.443

`-prune`在前面添加`-exec`；将停止`find`输入匹配目录：

```
.... -mtime +1 -prune -exec ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:49:12.720

在 -type d 之前添加 -depth 也会阻止 find 进入匹配的目录。

```
# mkdir 1
# mkdir 2
# touch -d yesterday 1
# find . -depth -type d -mtime +0 -exec rm -rf {} \;
# ls
2 
```

从男人找到：

```
 -prune True;  if  the file is a directory, do not descend into it. If -depth is given, false; no effect.  Because -delete implies -depth, you cannot usefully use -prune and -delete together. 
```

# asp.net - MVC - 显示多个类级别验证错误消息

> ID：12389272
> 
> 赞同：1
> 
> 时间：2012-09-12T13:27:29.080
> 
> 标签：asp.net, asp.net-mvc-3, validation, attributes

我有一个视图模型，因此在验证时，我想比较多个字段。我有一个自定义属性，它采用 viewmodel 并执行所需的验证。我正在使用自定义属性 [ValidateThisForm] 装饰视图模型类

```
[AttributeUsage(AttributeTargets.Class)]
public class ValidateThisForm : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        ViewModel _viewModel = value as ViewModel;

        if (_viewModel.TestOne == false && _viewModel.TestTwo == false)
        {
            ErrorMessage = "Form Incomplete: Please correct";
            return false;
        }
        else
        {
            return true;
        }
    }
} 
```

问题是，我想执行几个“类级别”验证。因此，在我看来，我只能在表单的一个地方显示这些错误：

```
<td class = "field-validation-error">@Html.ValidationMessageFor(viewmodel => viewmodel)</td> 
```

有没有办法让我在表单的不同位置显示多个“类级别”错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T16:10:24.473

Assuming your class currently looks something like this:

```
[ValidateThisForm]
public class MyViewModel
{
    public bool TestOne { get; set; }
    public bool TestTwo { get; set; }
} 
```

If you have complex model-level validation you want to perform, where you can't simply annotate a single property, you can hook into the validation pipeline with [`IValidatableObject`](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject%28v=vs.110%29.aspx) like this:

```
public class MyViewModel : IValidatableObject
{
    public bool TestOne { get; set; }
    public bool TestTwo { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    { 
      if (TestOne == false && TestTwo == false) 
      {
          yield return new ValidationResult("Form Incomplete: Please correct")
      }
    }
} 
```

You can continue to `yield return` as many validation messages as you'd like. And you can display them all on the client with [`@Html.ValidationSummary`](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary%28v=vs.110%29.aspx)

If you'd like the message to appear alongside a particular control, the [`ValidationResult`](https://msdn.microsoft.com/en-us/library/dd411880(v=vs.110).aspx) constructor takes an overload with the `memberNames` of the affected properties so you could change the `Validate` method like this:

```
if (TestOne == false && TestTwo == false) 
{
    yield return new ValidationResult("Form Incomplete Message", new[] {"TestOne"})
} 
```

Then you can provide the validation message for that particular property with the [`ValidationMessageFor`](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationmessagefor%28v=vs.118%29.aspx) HTML helper like this:

```
@Html.ValidationMessageFor(Function(model) model.TestOne ) 
```

For further reading, Scott Guthrie wrote about using `IValidatableObject` as part of his [blog post introducing new features in MVC3](http://weblogs.asp.net/scottgu/introducing-asp-net-mvc-3-preview-1) and had a follow up post with more detail on [class level validation](http://weblogs.asp.net/scottgu/class-level-model-validation-with-ef-code-first-and-asp-net-mvc-3) shortly thereafter.

# java - 一种在列表中找到与模式匹配的东西的快速方法

> ID：12389280
> 
> 赞同：0
> 
> 时间：2012-09-12T13:27:52.040
> 
> 标签：java

给定一个无序列表`List<String>`，我需要找出是否存在`String`与提供的字符串匹配的一个。

所以，我循环

```
 for (String k : keys) {
        if (Utils.keysMatch(k, anotherKey)) {
            result = true;
            break;
        }
    } 
```

Where`Utils.keysMatch`检查是否可以发生适当的匹配。

**如果没有完整的迭代，也可以做同样的事情吗？**注意`k`可能是正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:35:34.877

不。在最坏的情况下，您查看的最后一个元素是第一个匹配的元素，因此您必须查看所有元素。

当然，如果您可以预先计算出合适的数据结构，您可能会获得更快的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:33:45.727

您可以使用 Guava 的[Iterables.any](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/src-html/com/google/common/collect/Iterables.html#line.619)方法和静态 Predicates 类以优雅的方式做到这一点

像这样：

`return Iterables.any(keys, Predicates.containsPattern(k);`

# xml - XML 和 XSLT - 不在 XML 中的参数值

> ID：12389283
> 
> 赞同：2
> 
> 时间：2012-09-12T13:27:55.613
> 
> 标签：xml, xslt, param

我有一个 XML 文件，其中包含多个记录和不同的值（例如具有名称、数量、重量等值的项目列表）。我使用 XSLT 在网页上以表格的形式显示这些内容。在每个单独的页面上都显示了不同的记录 - xslt 从网页中获取参数的值，然后仅显示适当的信息片段。例如，有一个关于项目 XYZ 的网页 - 仅显示该特定项目的名称、数量和重量。

我的问题是，当 XML 中没有此类项目时，是否有办法显示某种消息（例如“此项目没有可用数据”）。它不像参数为空或 null - 它仍然是从网页中获取的。只是XML文件中没有这样的记录。

请问有什么帮助吗？

您可以在下面找到 XML 和 XLS 文件的代码。我已经更改了参数/变量的名称和值，但其他所有内容都与原始文件中的相同。

XML:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ItemsTable>
<ItemRow>
    <item>001</item>
    <name>aaaa</name>
    <price>2402</price>
    <price2>2200</price2>
</ItemRow>
<ItemRow>
    <item>002</item>
    <name>bbbb</name>
    <price>2402</price>
    <price2>2700</price2>
</ItemRow>
<ItemRow>
    <item>003</item>
    <name>cccc</name>
    <price>2402</price>
    <price2>2003</price2>
</ItemRow>
<ItemRow>
    <item>004</item>
    <name>dddd</name>
    <price>2402</price>
    <price2>2024</price2>
</ItemRow> 
```

XSL：

```
 <?xml version="1.0" encoding="ISO-8859-1" ?> 
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="thisitem">XXXX</xsl:param> 
<xsl:template match="/">
<xsl:apply-templates /> 
</xsl:template>
<xsl:decimal-format name="european" decimal-separator="," grouping-separator="." /> 
<xsl:template match="/ItemsTable/ItemRow" /> 
<xsl:template match="/ItemsTable/ItemRow [ item = $thisitem ]">
<style>table.YYY { border-collapse: collapse; } table.YYY td, table.YYY th { border: 1px solid black; padding: 1em; vertical-align: middle; text-align: center; } table.YYY th { background-color: #eee; } table.YYY .header { font-size: 2em; font-weight: bold; padding-bottom: 1em; padding-top: 1em; } table.YYY .itemname { color: red; font-weight: bold; white-space: nowrap; } table.YYY .yellow { background-color: yellow; } table.YYY .red { background-color: red; } table.YYY .green { background-color: #40FF00; }</style> 
<html>
<body>
<table class="YYY">
<xsl:if test="string-length(name) > 0 and string-length(price) > 0 and string-length(price2) > 0" /> 
<xsl:choose>
<xsl:when test="string-length(name) > 0 and string-length(price) > 0 and string-length(price2) > 0">
<tr>
<th>Name</th> 
<th>Price 1</th> 
<th>Price 2</th> 
</tr>
<tr>
<xsl:choose>
<xsl:when test="price > price2">
<td class="red">
<xsl:value-of select="name" /> 
</td>
<td class="red">
<xsl:value-of select="format-number(price, '###.###.###', 'european')" /> 
</td>
<td class="red">
<xsl:value-of select="format-number(price2, '###.###.###', 'european')" /> 
</td>
</xsl:when>
<xsl:otherwise>
<td class="green">
  <xsl:value-of select="name" /> 
</td>
<td class="green">
  <xsl:value-of select="format-number(price, '###.###.###', 'european')" /> 
</td>
<td class="green">
  <xsl:value-of select="format-number(price2, '###.###.###', 'european')" /> 
</td>
</xsl:otherwise>
</xsl:choose>
</tr>
</xsl:when>
<xsl:otherwise>
<div>
  <p>No data for this item</p> 
</div>
</xsl:otherwise>
</xsl:choose>
</table>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:42:01.843

除了事实上

```
<xsl:template match="/ItemsTable/ItemRow [ item = $thisitem ]"> 
```

在 XSLT 1.0 中是不合法的（根据规范，您不能在匹配表达式中使用变量，但某些处理器无论如何都会接受它们），您的问题是模板仅在它们匹配的元素存在时才会触发。如果没有您要`ItemRow`的`item`孩子是谁的孩子，那么模板根本不会触发。

相反，您需要将“无此项目的数据”逻辑上移到父级的模板中`ItemsTable`

```
<xsl:template match="/ItemsTable">
  <xsl:variable name="matchingRows" select="ItemRow[item = $thisitem][string-length(name)][string-length(price)][string-length(price2)]"/>
  <xsl:choose>
    <xsl:when test="$matchingRows">
      <xsl:apply-templates select="$matchingRows"/>
    </xsl:when>
    <xsl:otherwise>
      <div>
        <p>No data for this item</p> 
      </div>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template match="ItemRow">
  <!-- logic for each matching row here, don't need to check the
       preconditions as the template is only called for rows that match -->
</xsl:template> 
```

# sql-server - 内部联接返回更多行然后存在于表中

> ID：12389284
> 
> 赞同：13
> 
> 时间：2012-09-12T13:27:59.640
> 
> 标签：sql-server, tsql

直到今天，我对内部连接的想法是它将返回满足连接条件的表中存在的最小行数。

**前任。**如果**表 A**包含 4 行，**表 B**包含 7 行。如果满足加入条件，我期望 4 行可以是最大输出。

我刚刚写了一个 sp，我在其中创建了两个临时表并填充它们。然后我对它们进行了内部连接，但返回了更多行（在我的情况下，返回了 29 行，我期待 4 行）经过一番搜索，我找到了这个 [链接](http://blog.sqlauthority.com/2012/02/09/sql-server-inner-join-returning-more-records-than-exists-in-table/)

这证实了我可以发生，但我仍然想知道我有什么**选择**来限制返回的结果。

下面是我的存储过程。

```
ALTER PROCEDURE [dbo].[GetDDFDetailOnSiteCol]
@siteId int,
@colNum int
AS
BEGIN
SET NOCOUNT ON;

create Table #portDetail
(
ddfId int,
portDetail nvarchar(50),
siteId int
)
Insert into #portDetail SELECT  ddf.id,  ddf.portDetail, site.Site_ID  from site
        inner join ddf ON site.Site_ID = ddf.siteCodeID 
        where ddf.siteCodeID = @siteId and ddf.colNo= @colNum
        order by colNo,blockNum,portRowNum,portColNum

create Table #portAllocationDetail
(
assigned_slot nvarchar(50),
siteId int
)
Insert into #portAllocationDetail 
SELECT  dbo.portList.assigned_slot, dbo.site.Site_ID
FROM dbo.portList INNER JOIN
 dbo.site ON dbo.portList.siteCodeID = dbo.site.Site_ID
 where dbo.site.Site_ID = @siteId

--select * from #portAllocationDetail   
Select #portDetail.ddfId,#portDetail.portDetail,#portAllocationDetail.siteId,#portAllocationDetail.assigned_slot FROM #portDetail 
INNER JOIN #portAllocationDetail 
ON
#portDetail.siteId = #portAllocationDetail.siteId
END 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T13:35:25.980

An`inner join`为 TableA 中的每一行重复 TableB 中的每个匹配行。因此，如果 TableA 中有 4 行，TableB 中有 7 行，则最大行数为 28。

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/38706/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-05T01:38:48.867

内连接返回满足条件的表的笛卡尔积的子集。因此，对于具有行 n 和 m 以及条件 True 的两个表 A 和 B，连接返回 nxm 行，这是最大值。

令人难以置信的是，如果我们使用正确的术语，这个解释会多么简单，但是我需要更多的时间来理解它“简单的方式”，这是大多数教程中解释的方式:(。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-11T11:03:55.323

----------内连接意味着-当两个表中至少有一个匹配时，INNER JOIN 关键字返回行。--

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-04-25T17:12:10.750

内部连接也会导致重复。

如果您想要两个表中的唯一公共值，请使用**相交运算符。**

所以，这里 intersect 如果两边都为空，甚至可以显示空值。

# tfs - 将 TFS 2010 项目（历史、工作项、代码等）移动到 TFS 2012

> ID：12389286
> 
> 赞同：3
> 
> 时间：2012-09-12T13:28:06.790
> 
> 标签：tfs, migration, visual-studio-2012

我们目前正在使用 TFS 2010 进行源代码控制和任务跟踪，但是我们的项目和项目集合的结构还有很多不足之处。话虽如此，当我们迁移到 TFS 2012 时，我们希望以更有效的方式重组所有内容。

我的问题是，是否可以将我们现有的项目移动到新的 TFS 2012 项目集合（包括工作项、任务等）以用于遗留/历史目的？我希望当前的项目结构和历史可用于历史目的，并使用我们的新项目结构在不​​同的项目集合中进行积极的开发。

到目前为止，我所看到的一切都表明，由于工作项编号等原因，很难（或不可能）在集合之间移动整个项目。我考虑过分离我们 2010 年的项目集合并在 2012 年单独重新附加它们，但我真的不'不想要项目集合的完整列表（这是我们当前问题的一部分）。这让我面临合并项目集合或在集合之间移动项目的挑战。

任何建议、解决方法或提示将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T01:06:45.647

[使用TFS 集成工具包](http://tfsintegration.codeplex.com/)非常有可能实现这一点，但这是一个极其繁琐且耗时的过程。有一个学习曲线。工具有问题，所以你必须解决它。我建议不要进入它，除非它是团队/管理的高优先级。这是过程，执行干净的 TFS 2012 安装，然后使用此工具迁移工作项和源。确保您还安装了 TFS 2010 团队资源管理器和工具包（它使用 2010 对象模型进行迁移）。您应该设置一个测试环境并多次尝试以获得所需的结果。这个项目在 TFS 2008->2010 中被多次提出，您几乎可以遵循相同的准则。[在这里](https://stackoverflow.com/questions/2222200/can-we-migrate-to-a-new-tfs-process-template-and-keep-history/9235958#9235958)查看我的回复。您可能无法迁移工作项 ID，但可以添加一个字段来显示旧的工作项 ID：

```
<FIELD name="BCIReflectedWorkItemId" refname="TfsMigrationTool.ReflectedWorkItemId" type="String" /> 
```

文档中的工具限制：

*   仅限于迁移版本控制项、工作项以及它们之间的链接。此工具不会迁移团队项目的其他部分，包括报告、团队构建数据和 SharePoint 内容。
*   迁移期间不会保留工作项 ID 和变更集编号，并且会在迁移项目时按顺序分配新 ID。这意味着对这些 ID 的任何引用在迁移后都将无效；然而，工作项和变更集之间的链接将被正确迁移，尽管 ID 发生了变化。
*   工作项修订和变更集的时间戳将更新到迁移时间。任何存储日期时间信息的工作项字段都将正确迁移其值，但不会迁移修订时间。这对系统产生的最显着影响是在依赖于时间维度的报告中（即错误趋势、代码流失）。由于迁移通常发生在比原始操作更短的时间跨度内，因此此类报告中的时间轴将被有效压缩。
*   测试用例类型的工作项未完全迁移。集成工具不是为在此阶段迁移测试用例而设计的。它们需要被识别为测试用例并按此进行处理；包括特殊的 XML 编码数据字段，应将其打开并编辑以指向新迁移的工作项。[您可以在http://tcmimport.codeplex.com/](http://tcmimport.codeplex.com/)上查看 Visual Studio 2010 测试用例导入实用程序作为替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:30:03.227

不幸的是，没有内置方法可以在集合之间移动项目，同时保留所有历史数据。有一些[工具可以迁移项目](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)，但它们会删除签到记录、搁置集、工作区等。

请参阅[将团队项目从一个集合移动到另一个集合](https://stackoverflow.com/questions/10100406/moving-a-team-project-from-one-collection-to-another)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:56:24.200

最安全、最简单的方法是简单地备份 2010 年以来的所有内容，并从头开始 2012 年。记录在哪里可以找到迁移之前的所有内容，将您的项目放在您需要的地方并继续前进。这似乎很奇怪，人们反对做这样的事情，但通常当他们这样做时，他们会很高兴。

此外，将来避免此问题的一个好方法是尽量减少（或完全消除）对多个集合和使用区域的使用。

# asp.net-mvc - 相同的模型，多次在一个视图中 ASP.NET MVC

> ID：12389288
> 
> 赞同：1
> 
> 时间：2012-09-12T13:28:08.477
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-2, model

我想在我的脑海中做一个非常简单的，但当我尝试创建时真的很复杂。在 MVC ASP.NET 环境中，我想创建一个模型但多次渲染它。这是工作，但是当我想取回数据时，我什么都没有。模型如下所示：

```
public class HardwareModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    ...
} 
```

包装器看起来像：

```
public class WrapperModel
{
    public List<HardwareModel> HardwareList { get; set; }

    public WrapperModel()
    {
        HardwareList = new List<HardwareModel>();
    }
} 
```

控制器：

```
readonly Hardware _hardware = new Hardware();
    [Authorize]
    public ActionResult Index()
    {
        return View(_hardware.GetHardwareList(int.Parse(Session["idEmployee"].ToString())));
    }

    [HttpPost]
    [Authorize]
    public ActionResult Index(WrapperModel model)
    {
        return View(model);
    } 
```

和观点：

```
<% using (Html.BeginForm())
   {%>
<% foreach (var hardware in Model.HardwareList)
   {%>    
    <tr>
        <td>
            <div class="editor-label">
                <%: Html.LabelFor(m => hardware.SelectedHardwareType) %>
            </div>
            <div class="editor-field">
                <%: Html.DropDownListFor(m => hardware.SelectedHardwareType, hardware.Hardwaretypes) %>
            </div>
... 
```

所以结果是这样的： ![查看结果](../Images/386c4105e1aec8d7dd7370bd1ca8830f.png)

渲染正是我想要的，但问题是当我按下保存按钮时，使用了控制器的第二部分，但“WrapperModel 模型”的值是一个空列表。在请求值中，我可以看到所有内容都发送到控制器，但 WrapperModel 中没有任何匹配项。

我不知道该怎么做，因为“HardwareModel”的数量可以是 0 或 99，所以我无法创建 HardwareModel1、HardwareModel2 ......就像我在网上看到的那样。

感谢您对我的帮助，并为这篇长文感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:55:12.433

使用**EditorTemplate**，你会很好。

创建一个名为**EditorTemplates**的文件夹并创建一个名为HardwareModel.cshtml 的视图（编辑器模板）

![在此处输入图像描述](../Images/33159427d9f85be9212d360aeca01823.png)

现在将以下代码添加到编辑器模板（新视图）。您可以根据需要更新布局。

```
@model HardwareModel           
<p>
 Name @Html.TextBoxFor(x => x.Name) <br />
 Desc : @Html.TextBoxFor(x => x.Description)
 @Html.HiddenFor(x => x.Id)
</p> 
```

现在在您的主视图中，使用`Html.EditorFor`HTML 帮助器方法调用此编辑器模板。

```
@model WrapperModel
@using (Html.BeginForm())
{       
  @Html.EditorFor(x=>x.HardwareList)
  <input type="submit" value="Save" />    
} 
```

假设您有 GET 操作将 HardwareModels 列表发送到视图，如下所示

```
public ActionResult Hardware()
{
    WrapperModel model = new WrapperModel();
    //HardCoded for demo.Can be replaced with entries based on your DB data
    model.HardwareList.Add(new HardwareModel { Id=1, Name = "Printer", 
                                                     Description = "desc" });
    model.HardwareList.Add(new HardwareModel { Id=2, Name = "Scanner",
                                                     Description = " desc2" });
    return View(model);
} 
```

现在您的 HttpPost 操作方法将在表单提交时获取子属性

```
[HttpPost]
public ActionResult Hardware(WrapperModel model)
{
    //check for  model.HardwareList Property here;
    return View(model);
} 
```

![在此处输入图像描述](../Images/9eb4191e06206d6521fac67a161e75af.png)

[在这里](https://skydrive.live.com/redir?resid=B9ABE38A81F442D6!192&authkey=!AKaRHDuYVqARlYM)，您可以下载我为解决您的问题而编写的工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:48:21.393

这是我读过的关于这个问题的最好的文章。希望对您有所帮助：[DotNetSlackers - 了解 ASP.NET MVC 模型绑定](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx#s1-introduction)

具体来说，您可能对[Binding with a list of class types部分感兴趣](http://dotnetslackers.com/articles/aspnet/Understanding-ASP-NET-MVC-Model-Binding.aspx#s8-binding-with-a-list-of-class-types)

# algorithm - 查找不在树中的区间

> ID：12389291
> 
> 赞同：2
> 
> 时间：2012-09-12T13:28:18.267
> 
> 标签：algorithm, interval-tree

我有一堆可能重叠的（日期）间隔。间隔来自不同的来源。我想“展平”这个“时间线”，然后找到所有没有间隔的间隔。

如果您查看：[http](http://www.dgp.toronto.edu/people/JamesStewart/378notes/22intervals/) ://www.dgp.toronto.edu/people/JamesStewart/378notes/22intervals/ 到“更复杂的示例”部分。因此，我想找到没有作曲家在世的区间。

我怎么做？你将如何在 PHP 中实现这样的事情？PHP 是否也有一些简单的函数来构建树？

很多谢谢！

**编辑** 我的输入是一些数组（2、3 或 4），每个数组都包含开始和停止日期，如下所示：

```
 $myarray1[0]['start']['date'] = 'somedate'
 $myarray1[0]['stop']['date'] = 'somedate'
 $myarray1[1]['start']['date'] = 'somedate'
 $myarray1[1]['stop']['date'] = 'somedate'
 $myarray1[2]['start']['date'] = 'somedate'
 $myarray1[2]['stop']['date'] = 'somedate' 
```

myarray2、myarray3 等也是如此

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:57:49.323

## 基本算法

为每个作曲家创建两个对象。一个是带有作曲家姓名和出生年份的出生对象。另一个是死亡对象，同样带有作曲家的名字和死亡年份。

现在将这些对象排序在一起。

保持一个`int`, 初始化为`0`for `num_composers_alive`。

遍历对象的有序列表。每次遇到出生对象时，递增`num_composers_alive`。每次遇到死亡对象，递减`num_composers_alive`。

在递增或递减时，每次遇到死亡和递减时，检查是否`num_composers_alive`为 0。如果是，则您只是进入了一个没有作曲家活着的时期。输出该数字或将其存储在某处。每次点击出生和增量时，检查`num_composers_alive`现在是否为 1。如果是，则您刚刚结束了一个没有作曲家在世的时期。输出该数字或将其存储在某处。

## 执行

这将取决于您的输入和输出的形式。我不相信 PHP 有树的原生概念，但我可能错了。尝试实施上述方法，如果遇到困难，请打开一个单独的问题。

老实说，我不确定你为什么需要树来解决上述问题，但也许是为了别的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:17:22.603

一个简单的算法步骤

1.  Define a function that translates a date object to an integer (and vice versa). This is a place where you may need to optimize the translation to make all numbers as small as possible. A date from past must have smaller number then a date from future

2.  Initialize array of numbers. Set all bits to `0`. Make sure the size of the array matches the largest date number (from step 1).

3.  Iterate over the date ranges

4.  Mark date range in the array with `1`s. *Use date translated into a number (step 1) as an index in the array.*

5.  Translate all indexes with `0`s back to the date intervals.

Runtime complexity O(N). Space complexity O(N).

# xmpp - pidgin 总是显示正在连接

> ID：12389295
> 
> 赞同：0
> 
> 时间：2012-09-12T13:28:27.837
> 
> 标签：xmpp, pidgin

我需要将 pidgin 连接到 BOSH 上的 xmpp 服务器。我的 xmpp 服务器已准备好使用 http-bind。

但是 pidgin 总是显示连接消息并且它永远不会连接。如果我在没有 BOSH 的情况下连接 xmpp，它就会连接。

我的 pidgin 配置如下：

```
username : anurag
Domain   : localhost
Resource : bosh
Connect Server :
BOSH URL : http://localhost:5280/http-bind/ 
```

感谢帮助。

# javascript - 存在多个具有相同类的 div 时如何将内容加载到唯一的 div

> ID：12389299
> 
> 赞同：0
> 
> 时间：2012-09-12T13:28:42.037
> 
> 标签：javascript, jquery, ajax, html

我有一个如下的 HTML 布局。

```
 <div class="container">
                // Some contents are here in this level
                <div class="sub-container">
                    // Some contents are here in this level
                    <div class="sub-sub-container">     
                    // Some contents are here in this level
                    ......
                        .....
                            .....
                            .....
                        .....
                    ......
                    </div>
                </div>  
            </div>

        <div class="dynamically_added"> 
            <div class="container">
                // Some contents are here in this level
                <div class="sub-container">
                    // Some contents are here in this level
                    <div class="sub-sub-container">     
                    // Some contents are here in this level
                    ......
                        .....
                            .....
                            .....
                        .....
                    ......
                    </div>
                </div>  
            </div>
        </div> 
```

问题是，当我尝试更新子容器或子子容器（只是嵌套在主（原始）容器 div 深处的任何 div）div 时，它也在更新动态添加的容器的内容。我怎样才能防止它，以便只更新原始内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:56:24.503

如果将额外的类添加`"static"`到顶部的静态容器中：

```
<div class="static container">
    // Some contents are here in this level
    <div class="sub-container">
        // Some contents are here in this level
        <div class="sub-sub-container">     
            // Some contents are here in this level
        </div>
    </div>  
</div> 
```

你可以这样做：

```
$sub_container = $('.static .sub-container'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:35:12.550

使用 jQuery`:eq()`选择器

```
jQuery(function(){
    jQuery(".sub-container:eq(0)").html("content for first div"); // for first div
    jQuery(".sub-container:eq(1)").html("content for second div"); // for second div
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:38:08.510

您可以使用[`.filter()`](http://api.jquery.com/filter/)排除`div`内部的 s `.dynamically_added`：

```
var $div = $(".sub-sub-container").filter(function () {
   return $(this).closest(".dynamically_added").length == 0;
}); 
```

因此，在您的示例中，这将*过滤*掉与 class`div`中的选择器匹配的所有内容，并包括所有其他内容。`div``.dynamically_added`

**[演示](http://jsfiddle.net/XgHWe/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T13:44:55.027

```
var container = $('div[class!="dynamically_added"] > .container'); 
```

应该给你每个元素都有一个`container`不直接嵌套在一个类下`div`的类`dynamically_added`

# c# - Word中的多项选择：在代码中查找

> ID：12389300
> 
> 赞同：0
> 
> 时间：2012-09-12T13:28:43.887
> 
> 标签：c#, ms-word, automation

在打开的 word 文档中，通过按 Ctrl 我可以选择不同段落中的多个单词，由未选择的单词分隔。

如何在代码中找到多个不连续的文本块？

仅使用 document.Selection 会返回最后选择的单词，而其他单词则被抛在后面，但仍被视觉选中。

例如，下面的 ArrayList 将包含列表中的 1 个元素。

```
ArrayList paras = new ArrayList();
foreach (Paragraph para in _application.Selection.Paragraphs)
{
   paras.Add(para.Range.Text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:26:31.583

到目前为止，我发现的解决方案不是从每个选择中收集段落，而是处理**WindowSelectionChange**事件并在集合中添加一个段落，我可以在用户完成选择后稍后处理它。

[http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word.applicationevents4_windowselectionchangeeventhandler%28v=office.11​​%29.aspx](http://msdn.microsoft.com/de-de/library/microsoft.office.interop.word.applicationevents4_windowselectionchangeeventhandler%28v=office.11%29.aspx)

# r - 将 R 的“by”命令的输出转换为数据帧

> ID：12389301
> 
> 赞同：8
> 
> 时间：2012-09-12T13:28:44.740
> 
> 标签：r, dataframe

我正在尝试使用 R 的`by`命令来获取数据框子集的列均值。例如，考虑这个数据框：

```
> z = data.frame(labels=c("a","a","b","c","c"),data=matrix(1:20,nrow=5))
> z
  labels data.1 data.2 data.3 data.4
1      a      1      6     11     16
2      a      2      7     12     17
3      b      3      8     13     18
4      c      4      9     14     19
5      c      5     10     15     20 
```

我可以使用 R 的`by`命令根据标签列获取列均值：

```
> by(z[,2:5],z$labels,colMeans)
z[, 1]: a
data.1 data.2 data.3 data.4
   1.5    6.5   11.5   16.5
------------------------------------------------------------
z[, 1]: b
data.1 data.2 data.3 data.4
     3      8     13     18
------------------------------------------------------------
z[, 1]: c
data.1 data.2 data.3 data.4
   4.5    9.5   14.5   19.5 
```

但是如何将输出强制返回到数据框？ `as.data.frame`不工作...

```
> as.data.frame(by(z[,2:5],z$labels,colMeans))
Error in as.data.frame.default(by(z[, 2:5], z$labels, colMeans)) :
  cannot coerce class '"by"' into a data.frame 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T13:31:06.180

您可以`ddply`从`plyr`包中使用

```
library(plyr)
ddply(z, .(labels), numcolwise(mean))
  labels data.1 data.2 data.3 data.4
1      a    1.5    6.5   11.5   16.5
2      b    3.0    8.0   13.0   18.0
3      c    4.5    9.5   14.5   19.5 
```

或`aggregate`从`stats`

```
aggregate(z[,-1], by=list(z$labels), mean)
  Group.1 data.1 data.2 data.3 data.4
1       a    1.5    6.5   11.5   16.5
2       b    3.0    8.0   13.0   18.0
3       c    4.5    9.5   14.5   19.5 
```

或`dcast`从`reshape2`包装

```
library(reshape2)
dcast( melt(z), labels ~ variable, mean) 
```

使用`sapply`：

```
 t(sapply(split(z[,-1], z$labels), colMeans))
  data.1 data.2 data.3 data.4
a    1.5    6.5   11.5   16.5
b    3.0    8.0   13.0   18.0
c    4.5    9.5   14.5   19.5 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-12T13:34:22.423

的输出`by`是 a`list`所以你可以使用`do.call`它们`rbind`然后转换它：

```
as.data.frame(do.call("rbind",by(z[,2:5],z$labels,colMeans)))
  data.1 data.2 data.3 data.4
a    1.5    6.5   11.5   16.5
b    3.0    8.0   13.0   18.0
c    4.5    9.5   14.5   19.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-14T10:34:17.030

处理副**输出**可能真的很烦人。我刚刚找到了一种以数据框格式提取您想要的内容的方法，并且您不需要额外的包。

所以，如果你这样做：

```
aux <- by(z[,2:5],z$labels,colMeans) 
```

然后，您可以通过执行以下操作将其转换为数据框：

```
 aux_df <- as.data.frame(t(aux[seq(nrow(aux)),seq(ncol(aux))])) 
```

我只是从 aux 中获取所有行和列，转置它并使用 as.data.frame。

我希望这会有所帮助。

# clojure - clojure cons vs conj with lazy-seq

> ID：12389303
> 
> 赞同：25
> 
> 时间：2012-09-12T13:28:52.580
> 
> 标签：clojure, stack-overflow, cons

为什么 cons 在这种情况下与lazy-seq 一起工作，而 conj 却不行？

这有效：

```
(defn compound-interest [p i]
   (cons p (lazy-seq (compound-interest (* p (+ 1 i)) i)))) 
```

这没有（它给出了堆栈溢出异常）：

```
(defn compound-interest2 [p i]
   (conj (lazy-seq (compound-interest2 (* p (+ 1 i)) i)) p)) 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-12T14:21:10.473

`(conj collection item)`添加`item`到`collection`. 为此，它需要实现`collection`. （我将在下面解释原因。）所以递归调用立即发生，而不是被推迟。

`(cons item collection)`创建一个以 开头的序列`item`，然后是`collection`. 值得注意的是，它*不需要*实现`collection`。所以递归调用将被推迟（因为使用`lazy-seq`），直到有人试图得到结果序列的尾部。

我将解释这是如何在内部工作的：

`cons`实际上返回一个`clojure.lang.Cons`对象，这就是惰性序列的组成部分。`conj`返回您传递给它的相同类型的集合（无论是列表、向量还是其他）。`conj`使用对集合本身的多态 Java 方法调用来执行此操作。（见[第 524 行`clojure/src/jvm/clojure/lang/RT.java`](https://github.com/clojure/clojure/blob/612fba9159c6986cf875f97e086337f24a5ea3d8/src/jvm/clojure/lang/RT.java#L524)。）

当 Java 方法调用发生在由`clojure.lang.LazySeq`返回的对象上时会发生什么`lazy-seq`？（如何`Cons`和`LazySeq`对象一起工作以形成惰性序列将在下面变得更清楚。）查看 .的[第 98 行`clojure/src/jvm/clojure/lang/LazySeq.java`](https://github.com/clojure/clojure/blob/612fba9159c6986cf875f97e086337f24a5ea3d8/src/jvm/clojure/lang/LazySeq.java#L98)。请注意，它调用了一个名为`seq`. 这就是实现的价值`LazySeq`（详情请跳至[第 55 行](https://github.com/clojure/clojure/blob/612fba9159c6986cf875f97e086337f24a5ea3d8/src/jvm/clojure/lang/LazySeq.java#L55)）。

所以你可以说它`conj`需要确切地知道你通过了什么样的集合，但`cons`没有。`cons`只要求“集合”参数是一个`ISeq`.

请注意，`Cons`Clojure 中的对象与其他 Lisps 中的“cons cells”不同——在大多数 Lisps 中，“cons”只是一个对象，它包含两个指向其他任意对象的指针。所以你可以使用 cons 单元来构建树，等等。Clojure`Cons`将任意一个`Object`作为头部，将一个`ISeq`作为尾部。由于`Cons`它本身实现`ISeq`了 ，因此您可以从对象构建序列`Cons`，但它们也可以指向向量或列表等。（请注意，Clojure 中的“列表”是一种特殊类型 ( `PersistentList`)，而*不是*`Cons`从对象构建的。 )`clojure.lang.LazySeq` *也*实现`ISeq`了 ，因此它可以用作 a 的尾部（Lisps 中的“cdr”）`Cons`。`LazySeq`*到`ISeq`某种类型的，但在需要之前它实际上不会评估该代码，并且在它评估代码之后，它会缓存返回`ISeq`并委托给它。*

 *...这一切都开始有意义了吗？你知道惰性序列是如何工作的吗？基本上，您从`LazySeq`. 当`LazySeq`实现时，它的计算结果为 a `Cons`，它指向另一个`LazySeq`。当那个被实现时……你明白了。所以你得到一个`LazySeq`对象链，每个对象都持有（并委托给） a `Cons`。

关于 Clojure 中“conses”和“lists”的区别，“lists”（对象）包含一个缓存的“length”字段，因此它们可以在 O(1) 时间内`PersistentList`响应。`count`这在其他 Lisps 中不起作用，因为在大多数 Lisps 中，“列表”是可变的。但是在 Clojure 中它们是不可变的，所以缓存长度是可行的。

`Cons`Clojure 中的对象*没有*缓存长度——如果有，它们如何用于实现惰性（甚至无限）序列？如果您尝试使用`count`a `Cons`，它只会调用`count`它的尾部，然后将结果加 1。*

# extjs - 如何根据 ExtJS 网格中的记录条件显示操作？

> ID：12389307
> 
> 赞同：1
> 
> 时间：2012-09-12T13:28:58.967
> 
> 标签：extjs, extjs4.1

我试过这个：

```
renderer : function( strValue, oMetaData, oRecord ) {
  var i;
  if( oRecord.data.leaf )
  {
    for( i in this.items )
    {
      this.items[i].disable();
    }
  }
} 
```

但它禁用了整个列的操作，而不仅仅是叶子的特定记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:13:35.760

我想`this`参考是问题所在，它似乎包含了错误的存档范围。看看渲染器参数，特别是元信息。

# f# - 是否可以将记录的字段设为私有？或将记录成员设为私有？

> ID：12389308
> 
> 赞同：10
> 
> 时间：2012-09-12T13:29:01.933
> 
> 标签：f#

我想坚持`record`，不想回去`object`。所以我想知道是否可以制作 a `field`of a `record private`？或做一个`private member`。`record`其他`concrete types`的`discriminated union`呢？

或者，这个要求是否违反了语言规范？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T13:58:05.970

不，单个字段不可能是私有的：http: [//msdn.microsoft.com/en-us/library/dd233184](http://msdn.microsoft.com/en-us/library/dd233184)

但是，您可以将所有字段设为私有并通过属性公开选定字段。请注意，您将需要一个 Create-function 来创建记录的实例，因为它的字段是私有的：

```
type MyRec = 
    private
        { a : int
          b : int }
    member x.A = x.a
    member private x.Both = x.a + x.b  // Members can be private
    static member CreateMyRec(a, b) = { a = a; b = b } 
```

成员可以是私有的，就像`MyRec.Both`上面的属性一样。

编辑：上面的字段使 MyRec 定义**的模块私有，而不是 MyRec 私有。**[当 F# 记录的字段被声明为 private 时，请参阅 Daniel 对 Weird 可访问性范围](https://stackoverflow.com/questions/14461734/weird-accessibility-scopes-when-f-records-fields-are-declared-private/14462045)的回答。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-12T14:13:44.000

这个要求的问题是记录的语言特性要求属性是公开的。例如，如果您有一个`r`类型的记录，`R`其中包含属性`Name`和`Age`写入
`{ r with Age = 20 }`，编译器会将其转换为`new R(r.Name, 20)`.

这个想法是`with`复制所有属性（不包括您要更改的属性），因此它需要能够访问它们。为此，编译器实际上可以为每种可能的`with`用途生成方法，但这可能会生成*很多*方法。

你偏爱唱片的原因是什么？它们有两个很好的特性 -`with`关键字（无论如何你都会丢失`private`成员）和结构相等（当它们具有相同的值时，两个实例是相同的）。除此之外，如果您想隐藏某些字段，类似乎更易于使用。

这是一个简单的例子（它没有实现结构相等）：

```
type R(name:string, age:int) = 
  member x.Name = name
  member x.WithAge(newAge) = R(name, newAge) 
```

使用带有字段的记录似乎很好——尽管在实现文件中使用公共字段和为所有外部用户隐藏字段的[F# 签名文件](http://msdn.microsoft.com/en-us/library/dd233196.aspx)`private`可能更有意义。这样，您可以使用实现中的功能，但仍然隐藏类型。`with`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:48:55.413

我不认为这是可能的。MSDN 说：

> 记录字段与类的不同之处在于它们**自动作为属性公开**，并且用于创建和复制记录。记录构造也不同于类构造。在记录类型中，您不能定义构造函数。

“自动曝光”是回答你问题的关键。三是您不想创建新类型的任何理由吗？

# r - 变量前的美元符号

> ID：12389318
> 
> 赞同：28
> 
> 时间：2012-09-12T13:29:26.930
> 
> 标签：r, dataframe, r-faq, dollar-sign

我有这个示例代码可以从现有数据框“my_data”创建一个新的数据框“new_data”。

```
new_data = NULL
n = 10 #this number correspond to the number of rows in my_data
conditions = c("Bas_A", "Bas_T", "Oper_A", "Oper_T") # the vector characters correspond to the target column names in my_data
for (cond in conditions){
    for (i in 1:n){
        new_data <- rbind(new_data, c(cond, my_data$cond[i]))
    }
} 
```

问题是`my_data$cond`（其中 cond 是一个变量，而不是列名）不被接受。

**如何通过在美元符号后使用变量值来调用数据框的列？**

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-12T13:45:13.343

要访问列，请使用：

```
my_data[ , cond] 
```

或者

```
my_data[[cond]] 
```

`i`可以通过以下方式访问第 th 行：

```
my_data[i, ] 
```

将两者结合以获得所需的值：

```
my_data[i, cond] 
```

或者

```
my_data[[cond]][i] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-26T22:36:13.587

我猜你需要`get()`.

例如
`get(x,list)`， where`list`是列表，`x`是变量（可以是字符串），等于`list$x`。

但是在`get(x,list)`,`x`可以是变量，而使用`$`,`x`不能是变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-10T19:16:48.463

`$`适用于列，而不是单个列对象。这是矢量化的一种形式。编码

```
corrections$BookDate = as.Date(corrections$BookDate, format = "%m/%d/%Y") 
```

将表格`BookDate`列的内容`corrections`从字符串转换为`Date`对象。它在一个操作中执行它，分配。

执行以下操作，它将解决您的问题：

```
new_data <- rbind(new_data, c(cond, my_data$cond)) 
```

# opencl - OpenCL 中的重叠传输和设备计算

> ID：12389321
> 
> 赞同：8
> 
> 时间：2012-09-12T13:29:41.157
> 
> 标签：opencl, gpgpu

我是 OpenCL 的初学者，我很难理解一些东西。我想改进主机和设备之间的图像传输。我制定了一个计划来更好地了解我。

![](../Images/3d5afb38dc9bbf5e852e61302a260f90.png)

上：我现在拥有的 | 底部：我想要的 HtD（主机到设备）和 DtH（设备到主机）是内存传输。K1 和 K2 是内核。

我考虑过使用映射内存，但第一次传输（主机到设备）是使用 clSetKernelArg() 命令完成的，不是吗？还是我必须将输入图像切割成子图像并使用映射来获取输出图像？

谢谢。

编辑：更多信息

K1 处理 mem 输入图像。K2 处理来自 K1 的输出图像。

因此，我想将 MemInput 转换为 K1 的多个部分。我想在主机上读取并保存 K2 处理的 MemOuput。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T13:48:58.833

正如您可能已经看到的那样，您可以通过使用`clEnqueueWriteBuffer`和类似的方式从主机传输到设备。

所有带有关键字 'enqueue' 的命令都有一个特殊的属性：这些命令不是直接执行的，而是当你使用`clFinish`、`clFlush`、`clEnqueueWaitForEvents`、`clEnqueueWriteBuffer`在阻塞模式下使用等等来触发它们时。

这意味着所有动作同时发生，您必须使用事件对象同步它。由于一切（可能）同时发生，您可以执行以下操作（每个点同时发生）：

1.  传输数据 A
2.  处理数据 A 和传输数据 B
3.  处理数据 B & 传输数据 C & 检索数据 A'
4.  处理数据 C & 检索数据 B'
5.  检索数据 C'

请记住：没有事件对象的入队任务可能会导致所有入队元素的同时执行！

为确保流程数据 B 不会在传输 B 之前发生，您必须从中检索事件对象`clEnqueueWriteBuffer`并将其作为对象提供以等待 fi`clEnqueueNDRangeKernel`

```
cl_event evt;
clEnqueueWriteBuffer(... , bufferB , ... , ... , ... , bufferBdata , NULL , NULL , &evt);
clEnqueueNDRangeKernel(... , kernelB , ... , ... , ... , ... , 1 , &evt, NULL); 
```

每个命令当然可以等待某些对象并生成一个新的事件对象，而不是提供 NULL。最后一个参数是一个数组，所以你可以事件等待几个事件！

* * *

编辑：总结下面的评论 **传输数据**-什么命令在哪里起作用？

```
       CPU GPU 
                            BufA        BufB
数组[] = {...}
clCreateBuffer() ----->   [ ]               //在GPU内存中创建（空）Buffer *
clCreateBuffer() -----> [ ]     [ ]    //在GPU内存中创建（空）Buffer *
clWriteBuffer() -arr-> [ array ] [ ] //从CPU复制到GPU
clCopyBuffer() [array] -> [ array ] //从GPU复制到GPU
clReadBuffer() <-arr- [array] [array] //从GPU复制到CPU

```

`host_ptr`* 您可以通过使用参数提供数据直接初始化缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T00:13:02.503

许多 OpenCL 平台不支持乱序命令队列；大多数供应商所说的重叠 DMA 和计算的方式是使用多个（按顺序）命令队列。您可以使用事件来确保以正确的顺序完成依赖关系。NVIDIA 有示例代码显示重叠的 DMA 并以这种方式进行计算（尽管它不是最理想的；它可能比他们说的要快一些）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T18:45:39.100

创建命令队列时，您需要在属性中启用乱序执行。请参阅：CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE，[clCreateCommandQueue](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clCreateCommandQueue.html)。

这将允许您设置较小的任务链并将它们相互链接。这一切都在主机上完成。

主机伪代码：

```
for i in taskChainList
  enqueueWriteDataFromHost
  enqueueKernel(K1)
  enqueueKernel(K2)
  enqueueReadFromDevice
clfinish 
```

当你对任务进行排队时，将之前的 cl_event 放入每个任务的 event_wait_list 中。我上面的“enqueueWriteDataFromHost”不必等待另一个事件开始。

交替，

```
cl_event prevWriteEvent;
cl_event newWriteEvent;
for i in taskChainList
  enqueueWriteDataFromHost // pass *prevWriteEvent as the event_wait_list, and update with newWriteEvent that the enqueue function produces. Now each Write will wait on the one before it.
  enqueueKernel(K1)
  enqueueKernel(K2)
  enqueueReadFromDevice  //The reads shouldn't come back out of order, but they could (if the last block of processing were much faster then the 2nd-last for example)
clfinish 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T23:02:42.523

正确的方法（正如我所做的并且确实完美地工作）是创建 2 个命令队列，一个用于 I/O，另一个用于处理。两者必须在相同的上下文中。

您可以使用事件来控制两个队列的调度，并且操作将并行执行（如果可以的话）。即使设备不支持 outoforderqueue，它也确实可以工作。

例如，您可以将 I/O 队列中的所有 100 个图像排入 GPU 并获取它们的事件。然后将此事件设置为内​​核的触发器。而 DtoH 传输是由内核事件触发的。即使您一次将所有这些作业排入队列，它们也将按顺序使用并行 I/O 进行处理。

# wpf - 如何在 Metro 应用程序中仅将焦点设置到弹出窗口（使该页面中的所有其他元素看起来模糊）？

> ID：12389324
> 
> 赞同：1
> 
> 时间：2012-09-12T13:29:46.253
> 
> 标签：wpf, silverlight, xaml, microsoft-metro

我正在我的应用程序中打开一个弹出窗口，我希望用户清楚地了解一个弹出窗口已打开，因此我想突出显示该弹出窗口，因为我希望在弹出窗口打开时将整个焦点放在弹出窗口上。

完全专注于弹出窗口只是间接地使页面中的所有其他元素/控件看起来模糊（当弹出窗口出现在 android 中时它看起来）。

请让我知道我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:37:32.157

在这方面需要很多。

[子窗口](http://www.codekhan.com/2011/05/silverlight-controls-how-to-work-with.html)

[CodePlex 子窗口](http://childwindow.codeplex.com/)

当您打开子窗口时，父窗口将被禁用，子窗口将获得焦点。根据您的标题，这是您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:22:04.680

你可以更喜欢这样做，

将网格或任何 ishittestvisbile 属性设置为 false 并将其不透明度设置为一半，然后您将自动将焦点放在弹出窗口上，在对弹出窗口执行任何操作后，您可以禁用弹出窗口，您可以再次将 ishittestvisbile 属性设置为 true 和也是不透明度1.（这可能是一种解决方法）。

# java - 与其他类链接的类

> ID：12389325
> 
> 赞同：0
> 
> 时间：2012-09-12T13:29:49.347
> 
> 标签：java, class, object, screen-orientation

我必须为我的软件开发课程创建一个游戏，并且我试图弄清楚如何将我的课程链接在一起以更新例如当我转到不同屏幕时玩家的健康状况。我创建了一个包含玩家所需的所有方法和变量的类播放器，例如，健康、船、名称，但是说我在游戏中打架，我怎么能不断更新健康，因为每次我必须去一个新屏幕，我必须继续创建一个新的播放器实例。

解决这个问题的另一种方法是什么，所以它更面向 OO？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:35:09.770

您可能希望考虑使用现有的设计模式来帮助解决您的问题。例如，单例对象可能是您的最佳选择

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:50:08.217

将事件用于此类事情。想象有一个中心位置，所有事件都被发送以进行分发。然后，您的游戏组件可以为某些事件注册侦听器。事件示例：

当有人更新玩家健康时，玩家实例会发送一个带有新值的事件“Health changed”。

“显示健康”组件可以侦听此类事件并相应地更新自身。

这种方法的美妙之处在于，健康组件不需要了解玩家的任何信息。它只是响应“Health(int)”事件。

# xcode - iOS：使用 xcode 和 phonegap 进行开发

> ID：12389326
> 
> 赞同：1
> 
> 时间：2012-09-12T13:29:52.830
> 
> 标签：xcode, cordova

我情况危急。我是一名新的 iOS 开发人员。几天前，我下载了带有学生 ID 的 xcode 4.3.3（免费）。我开发了一个非常简单的带有 phone-gap 的应用程序。它在我的 Mac 书（模拟器）中运行良好。当我想在我的 iPhone 上运行这个应用程序时，它显示认证错误。要获得证书，我有一个苹果 ID（iOS 开发者帐户 - 99 美元）。现在我有苹果开发者ID。所以我的问题是-

*   我应该用苹果开发者ID再次下载`xcode`，因为之前的是学生ID吗？

*   我想在不通过 iTunes 的情况下在我的 iPhone 上运行我的应用程序。我怎样才能做到这一点？

那么，优化的解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:34:52.683

不，根本不需要，您只需要使用该开发人员 ID 注册您的手机，然后使用正确的条款签署您的应用程序。这就是你需要做的。（xcode 为未注册和注册用户提供了精确的构建）

# maven - 常春藤无法解决依赖关系，而它与 maven 一起使用

> ID：12389327
> 
> 赞同：1
> 
> 时间：2012-09-12T13:30:01.277
> 
> 标签：maven, ivy, nexus

作为一个*Maven*新手，我正在玩我自己的本地[Sonartype Nexus](http://www.sonatype.org/nexus/)。我已将我的 Maven 安装配置为将其用作代理，并且它适用于一个简单的测试项目，以解决我的以下依赖项`pom.xml`

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

接下来，我尝试了一个与*Ivy*类似的 项目

在`ivy.xml`. Ivy 使用与代理相同的 Nexus 服务器（在 中配置 `ivysettings.xml`）

```
<ivysettings>
    <settings defaultResolver="default"/>
    <property name="m2-pattern" value="${user.home}/.m2/repository/[organisation]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]" override="false" />
    <resolvers>
        <chain name="default">
            <ibiblio name="public" m2compatible="true" root="http://localhost:2281/nexus/content/groups/public"/>
        </chain>
    </resolvers>
</ivysettings> 
```

但是，运行ant时，无法解决`hibernate-validator-4.2.0-Final`

```
[ivy:retrieve]
[ivy:retrieve] :: problems summary ::
[ivy:retrieve] :::: WARNINGS
[ivy:retrieve]          module not found: org.hibernate#com.springsource.org.hibernate.validator;4.2.0.Final
[ivy:retrieve]  ==== public: tried
[ivy:retrieve]    http://localhost:2281/nexus/content/groups/public/org/hibernate/com.springsource.org.hibernate.validat
or/4.2.0.Final/com.springsource.org.hibernate.validator-4.2.0.Final.pom
[ivy:retrieve]    -- artifact org.hibernate#com.springsource.org.hibernate.validator;4.2.0.Final!com.springsource.org.hi
bernate.validator.jar:
[ivy:retrieve]    http://localhost:2281/nexus/content/groups/public/org/hibernate/com.springsource.org.hibernate.validat
or/4.2.0.Final/com.springsource.org.hibernate.validator-4.2.0.Final.jar
[ivy:retrieve]          [NOT FOUND  ] javax.activation#activation;1.0.2!activation.jar (0ms)
[ivy:retrieve]  ==== public: tried
[ivy:retrieve]    http://localhost:2281/nexus/content/groups/public/javax/activation/activation/1.0.2/activation-1.0.2.j
ar
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          ::          UNRESOLVED DEPENDENCIES         ::
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          :: org.hibernate#com.springsource.org.hibernate.validator;4.2.0.Final: not found
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          ::              FAILED DOWNLOADS            ::
[ivy:retrieve]          :: ^ see resolution messages for details  ^ ::
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          :: javax.activation#activation;1.0.2!activation.jar 
```

我已经尝试向 Nexus 安装添加更多远程存储库，例如 SpringSource Enterprise Bundle Repository (http://maven.springframework.org/release/) 或 JBoss public (https://repository.jboss.org/nexus/content /repositories/releases/) 但这没有帮助。

原则上，Ivy 似乎工作得很好，因为它在失败之前获取了许多其他依赖项。

我的问题： 1) 为什么 Maven 不会因为同样的原因而失败？hibernate-validator 是可选的吗，Ivy 有另一种解决策略，如 Maven？

2）我很好奇它试图解析的工件名称：（`org.hibernate#com.springsource.org.hibernate.validator;4.2.0.Final` 顺便说一句，如果我添加`<dependency org="org.hibernate" name="hibernate-validator" rev="4.2.0.Final" />`它有效，但对于 Spring 情况，它需要工件`com.springsource.org.hibernate.validator`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:31:19.360

好的，解决方案是我错过了将所有新存储库（spring，jboss）分配给公共组存储库`/nexus/content/groups/public`，实际上它是作为`ivysettings.xml`.

# ruby-on-rails - Lib 中的引擎 (LoadError)

> ID：12389332
> 
> 赞同：0
> 
> 时间：2012-09-12T13:30:21.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

为什么我的引擎无法加载？

当我启动服务器控制台时显示消息：

```
`load_missing_constant': Expected D:/alexandre/dev/rails/project_name/lib/admin/engine.rb to define Admin::Engine (LoadError) 
```

但“/lib/admin/engine.rb”存在，其内容为：

```
Admin::Engine.routes.draw do
    get '/' => "admin#index"
    get '/error' => "admin#error"

    post '/thunder' => "thunder#create", :as => "thunders"

    get '/:class' => "admin_models#index"
    get '/:class/new' => "admin_models#new"
    post '/:class' => "admin_models#create"
    get '/:class/:id' => "admin_models#show"
    get '/:class/:id/edit' => "admin_models#edit"
    put '/:class/:id' => "admin_models#update"
    delete '/:class/:id' => "admin_models#destroy"
end 
```

在路线中，我添加了这一行：

```
mount Admin::Engine => '/admin', :as => 'admin' 
```

项目规格：

*   红宝石 1.9.2p180
*   导轨 3.2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:31:13.690

文件“/lib/admin/engine.rb”应该定义常量 Admin::Engine，或者更明确地说，该文件应该定义类 Admin::Engine。这是该文件内容的最小示例

```
module Admin
  class Engine < ::Rails::Engine
    #isolate_namespace Admin #see http://api.rubyonrails.org/classes/Rails/Engine.html#label-Isolated+Engine
  end
end 
```

你之前发布的截图是关于你的引擎的路线，因此应该放在“config/routes.rb”中

[文档](http://api.rubyonrails.org/classes/Rails/Engine.htm)和[指南](http://guides.rubyonrails.org/engines.html)是熟悉引擎的好方法。如果您喜欢书籍，我建议您阅读[Crafting Rails Applications](http://plataformatec.com.br/crafting-rails-applications)，这是一本小而密集的书，并广泛讨论了引擎（由最出色的 ruby​​ 专家之一：Jose Valim 撰写）。

# .net - 将范围从 Excel OpenXML Doc 中的特定工作表复制到第二个 OpenXML Excel 工作表中的特定位置（包括范围内包含的绘图）

> ID：12389333
> 
> 赞同：2
> 
> 时间：2012-09-12T13:30:23.007
> 
> 标签：.net, vb.net, ms-office, openxml-sdk

我一直在寻找这个片段很长一段时间，或者：

1.  我问谷歌一个错误的问题，
2.  我使用了错误的方法或
3.  还没有人这样做（不太可能，我知道）。

我有一个模板 OpenXML 电子表格文档，其中包含 10-15 张图纸和 10-15 张图纸和数据/计算。我希望从模板文件 ie.['SheetZ1'!$X1$#:$Y1$#] of file1.xlsx 中将特定范围内的所有内容复制到输出 OpenXML 中特定工作表中的特定位置电子表格文件，即 file2.xlsx 中的 ['SheetZ2'!$X2$#:$Y2$#]。如果有帮助，每个范围都在“命名范围”中，我更愿意通过范围名称来解决它们。

所以我的业务问题是：给定一个包含数据、计算和绘图的命名范围的模板电子表格，转到表 Z 并将该范围复制到我的输出 OpenXML 电子表格到其正确位置。

如果有人有一个片段，知道一个片段，或者知道有人有一个片段，我会非常感激。我想要 VB.Net 中的片段，但是我也可以转换 C#。

我不希望表现得像个混蛋或忘恩负义，但是我很少在评论中发现很多价值，例如“我从来没有做过，但是你应该能够......然后我认为你可以把它移到...... ..然后可能会这样做......或类似的事情......”我真的只需要一个工作片段，我会填写其余部分。

# iphone - 禁用时带有图像和蓝色文本的 UIBarButtonItem 错误地变为白色文本

> ID：12389337
> 
> 赞同：0
> 
> 时间：2012-09-12T13:30:39.250
> 
> 标签：iphone, objective-c, ios

我想要一个带有自定义图像和蓝色文本的 UIBarButtonItem。我首先创建了一个带有文本、字体颜色和图像的 UIButton，然后为 UIBarButtonItem 设置了一个自定义视图。

问题是当我禁用 UIBarButtonItem 时，文本会变回白色。我不知道为什么。

```
UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
[customButton setBackgroundImage:[UIImage imageNamed:@"images/ButtonHeader"] forState:UIControlStateNormal];
[customButton setTitle:myDynamicText forState:UIControlStateNormal];
[customButton setFrame:CGRectMake(0.0f, 0.0f, 70.0f, 44.0f)];
[customButton addTarget:myTarget action:myAction forControlEvents:UIControlEventTouchUpInside];
[customButton.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12.0f]];
[customButton.titleLabel setTextColor:[UIColor blueColor]];

UIBarButtonItem *customBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:customButton];

self.navigationBar.rightBarButtonItem = customBarButtonItem;
self.navigationBar.rightBarButtonItem.enabled = NO; 
```

我真正想做的是为启用和禁用状态设置不同的文本颜色，但是如果有人能告诉我为什么启用=否时文本变成白色，以及如何阻止它，我可以自己解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:36:54.233

您不应该通过获取这样的标签来设置字体颜色。您需要在按钮上配置它

```
[button setTitleColor:[UIColor blueColor] forState:UIControlStateNormal]; 
```

`UIControlStateNormal`将设置默认值，但随后您可以更改所有不同状态的颜色。[这些状态的列表可在UIControl 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)的底部找到`Control State`

# c# - 异步回发后，UpdatePanel 中的 Obout 日历混乱

> ID：12389339
> 
> 赞同：0
> 
> 时间：2012-09-12T13:30:42.127
> 
> 标签：c#, asp.net, updatepanel, obout, asynchronous-postback

我目前正在尝试使用 Obout Calendar 控件实现日期范围搜索功能。这个想法是用户可以从 Obout 日历中选择一个日期，然后在它旁边填充一个 asp:TextBox。表单中还有其他字段，但这是破坏的字段。我在表单底部还有一个 asp:Button，其功能是清除表单中的所有字段。它在后面的代码中这样做：

```
protected void btnClearFields_Click(object sender, EventArgs e)
{
    txtFrom.Text = "";
    txtTo.Text = "";
} 
```

这是相关的前端代码：

```
<table>
    <tr>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <td>
                    <asp:Label ID="lblFrom" runat="server" Text="From:"></asp:Label>
                    <br />
                </td>
                <td>
                    <asp:TextBox ID="txtFrom" runat="server"></asp:TextBox>
                </td>
                <td>
                    <obout:Calendar runat="server" ID="CalendarFrom" TextBoxId="txtFrom" StyleFolder="Calendar/styles/orbitz" ScriptPath="Calendar/calendarscript" DatePickerButtonText <IMG src='Images/calendar.gif' align=absMiddle border=0>" ShowYearSelector="true" DateMin="1/1/1900" AllowDeselect="false" DatePickerMode="true" />
                </td>
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="UpdatePanel2" runat="server">
            <ContentTemplate>
                <td>
                    <asp:Label ID="lblTo" runat="server" Text="To:"></asp:Label>
                </td>
                <td>
                    <asp:TextBox ID="txtTo" runat="server"></asp:TextBox>
                </td>
                <td>
                    <obout:Calendar runat="server" ID="CalendarTo" TextBoxId="txtTo" StyleFolder="Calendar/styles/orbitz" ScriptPath="Calendar/calendarscript" DatePickerButtonText <IMG src='Images/calendar.gif' align=absMiddle border=0>" ShowYearSelector="true" DateMin="1/1/1900" AllowDeselect="false" DatePickerMode="true" />
                </td>
            </ContentTemplate>
        </asp:UpdatePanel>
    </tr>
</table> 
```

现在，我遇到的问题是，当我第一次加载页面时，一切都很好。我可以从日历中选择一个日期，它会按预期填充文本框。但是，如果我单击“清除字段”按钮，这会导致部分回发，那么事情就会出错。当我再次单击日历图标时（在清除字段后），弹出的日期选择器的格式被弄乱了。它的日历部分只是一个红色方块，不能选择任何日期。年份选择栏横跨整个屏幕，更改年份对日历没有任何作用。

我在研究中找不到任何类似的问题，所以我不确定该尝试什么。我曾尝试在整个桌子周围只使用一个 UpdatePanel，但后来我遇到了同样的问题。我还尝试在 UpdatePanels 中不包括日历，这不会“破坏”日历，但它会在我的网页上放置两个新的 TextBox 字段（它将接受日历中的任何新值）并且不会清除旧的。还尝试将按钮和包含日历的表格放在同一个 UpdatePanel 中，但我在那里也得到了相同的红色框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:31:01.950

[在这个答案](https://stackoverflow.com/a/2348453/1281841)中发现了一个非常相似的问题。当我没有在其中包含 Obout 日历时，我遇到了 UpdatePanel 复制内容的问题。我通过将我的 UpdatePanels 移动到仅围绕 asp:TextBox 解决了这个问题，如下所示：

```
<td>
    <asp:Label ID="lblFrom" runat="server" Text="From:"></asp:Label>
    <br />
</td>
<td>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:TextBox ID="txtFrom" runat="server"></asp:TextBox>
        </ContentTemplate>
    </asp:UpdatePanel>
</td>
<td>
    <obout:Calendar runat="server" ID="CalendarFrom" TextBoxId="txtFrom" StyleFolder="Calendar/styles/orbitz" ScriptPath="Calendar/calendarscript" DatePickerButtonText <IMG src='Images/calendar.gif' align=absMiddle border=0>" ShowYearSelector="true" DateMin="1/1/1900" AllowDeselect="false" DatePickerMode="true" />
</td> 
```

这也意味着我不必更新 Obout 日历，这解决了原来的问题。

# r - 物种共现矩阵随机化 R

> ID：12389341
> 
> 赞同：1
> 
> 时间：2012-09-12T13:30:46.707
> 
> 标签：r

我的数据是一个物种共现矩阵，我想生成随机矩阵以测试共现模式。

我为此类分析找到的唯一函数是 R 包 picante 中的 randomizeMatrix 函数。它工作得很好，但是此函数中可用的空模型类型的数量是有限的。

目前实现的空模型（null.model的参数）：频率（保持物种出现频率），丰富度（保持样本物种丰富度），独立交换和试验交换

有谁知道其他函数或对此函数的修改，这将允许我测试其他空模型，例如等概率或比例列总和。

这是我使用该功能的方式

```
> test <- matrix(c(1,1,0,1,0,1,0,0,1,0,0,1,0,1,0,0),nrow=4,ncol=4)
> test
     [,1] [,2] [,3] [,4]
[1,]    1    0    1    0
[2,]    1    1    0    1
[3,]    0    0    0    0
[4,]    1    0    1    0
> randomizeMatrix(test,null.model = "richness",iterations = 1000)
     [,1] [,2] [,3] [,4]
[1,]    1    1    0    0
[2,]    1    1    0    1
[3,]    0    0    0    0
[4,]    0    1    0    1
> randomizeMatrix(test,null.model = "independentswap",iterations = 1000)
     [,1] [,2] [,3] [,4]
[1,]    1    0    1    0
[2,]    1    1    0    1
[3,]    0    0    0    0
[4,]    1    0    1    0
> 
```

我在一个循环中运行该函数以获得多次迭代

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T16:08:50.323

我编写了一个函数来生成一个空的随机矩阵，其中每一列的概率都不同。这是针对物种出现矩阵的。

```
nullMatrix <- function(nrows, ncols, prob1) {
matrixVector <- c()
for(i in 1:ncols){
    columnVector <- sample(c(0,1), nrows, replace = T, prob = c((1-prob1[i]), prob1[i]))
    matrixVector <- c(matrixVector, columnVector)
}
matrix(matrixVector, nrow = nrows, ncol = ncols)
} 
```

这会生成一个指定的 n 行和列的矩阵以及每行为 1 的概率向量。

我使用以下代码对其进行了测试。

```
#generate probability vectore for column matrix, each 10 rows the probability increases by .1
p1 <- c(rep(.1, 10), rep(.2, 10), rep(.3, 10), rep(.4, 10), rep(.5, 10), rep(.6, 10), rep(.7, 10), rep(.8, 10), rep(.9, 10), rep(1, 10) )
#generate the matrix with the nullMatrix function
m1 <- nullMatrix(100, 100, p1)
#The average of every ten rows should roughly = .1, .2, ..., 1
sum(m1[,c(1:10)])/1000 #Should ~.1
sum(m1[,c(11:20)])/1000 #Should ~.2
sum(m1[,c(21:30)])/1000 #Should ~.3
sum(m1[,c(31:40)])/1000 #Should ~.4
sum(m1[,c(41:50)])/1000 #Should ~.5
sum(m1[,c(51:60)])/1000 #Should ~.6
sum(m1[,c(61:70)])/1000 #Should ~.7
sum(m1[,c(71:80)])/1000 #Should ~.8
sum(m1[,c(81:90)])/1000 #Should ~.9
sum(m1[,c(91:100)])/1000 #Should ~1 
```

我的谈话有点晚了，但希望这对某人有帮助。

# javascript - Javascript，函数，循环，变量和其他东西

> ID：12389342
> 
> 赞同：1
> 
> 时间：2012-09-12T13:30:49.173
> 
> 标签：javascript

我知道这种问题已经被一遍又一遍地问过（我在 Stackoverflow 和其他地方读过很多遍）。我尝试了闭包、匿名函数等，但我什么也没得到，因为我不是代码大师）：。

话虽如此，这是我的问题：

```
function A (a) {
  for (var i in a) {
    var x = a[i];
    function B (x); // wait for the end of the function B before next loop
  }
} 
```

……

```
function B (x) {

 //do things with "x" and repeat the function B until a condition is true and  then return to the function A
} 
```

我尝试了很多东西（可能还不够），但没有一个能正常工作......

所以提前谢谢你的建议

问候

编辑 ：

好的，这里有完整的代码：

```
 var Test  = {

  ......

  setProgress: function(count) {
   var win = Test.getMainWindow();
   var progressMeter = win.document.getElementById("progressMeter");
   progressMeter.value =  count;
  }, 

  cancelCheck: function(event) {
    var win = Test.getMainWindow();
    win.document.getElementById("cancel").value = "cancel";
  },

  timeout: function (item) {

      var win = Test.getMainWindow();
      win.document.getElementById("progressMeterText").value = item;
      var stat = Test.getStatus()

       if (stat !== "loading" || win.document.getElementById("cancel").value == "cancel") {

      // if cancel button is clicked         
      if (win.document.getElementById("cancel").value == "cancel") {

        Test.setProgress(100);
        Test.stop();
        win.document.getElementById("cancel").value = "";
        win.document.getElementById("progressMeter").collapsed=true;
        win.document.getElementById("cancel").hidden=true;
        win.document.getElementById("progressMeterText").hidden=true;

      }
      // end of the loading
      else if (stat !== "loading") {
        Test.setProgress(100);
        win.document.getElementById("progressMeter").collapsed=true;
        win.document.getElementById("cancel").hidden=true;
        win.document.getElementById("progressMeterText").hidden=true;
        win.document.getElementById("cancel").value = "";
      }

      // loading is running
      else {        
        count = count+5;
        if (count == 100) {
          count = 0;
        }
        Test.setProgress(count);
        setTimeout (Test.timeout, 100 , item);
       }
     } 
   },

   getStuff: function (items) {
    for(var i in items) {
      var item = items[i];

        if (!item.host || (items && item.id != items)) continue;

        var listener = new Test.GetListener(item);
        listener.instance = new TestGet(item, listener).execute();

        count = 10;
        Test.setProgress(count);
        var buttoncancel = win.document.getElementById("cancel");
        buttoncancel.addEventListener ('click', Test.cancelCheck, false);

        Test.timeout(item);

        .....

    }
        .....
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:37:35.067

这似乎`B`是一个递归函数，但您仍然应该通过`B();`.

```
function A(a) {
  for (var i in a) {
    B(a[i]); 
  }
}

function B(x) {
   var ret = dosomething(x);
   if (condition(ret)) {
     return;
   }
   return B(ret);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:37:37.367

我也不是代码专家，但我确实看到了一件事可能会有所帮助。

因为你有一个 var x 它将不断替换 var x 所以（我假设你正在使用一个数组）你将只有一个值，数组中的最后一项，作为 x 的值。因此，您的函数 B 将使用函数 A 中数组中最后一项的值运行一次。如果这不是您要查找的内容，请尝试为数组中的每个项目创建一个唯一变量，或者简单地说`function B (a[i])`; 使用 if/else 或 switch/case 语句仅在适当时返回您希望的信息。

我仍然掌握了js，所以我希望这至少有点帮助。祝你好运！

# php - 带有输入和文本区域的 HTML 表单，用 PHP 处理，然后用键入的值重定向回来

> ID：12389343
> 
> 赞同：0
> 
> 时间：2012-09-12T13:30:52.963
> 
> 标签：php, html

我有一个简单的 HTML 表单，如下所示（form.html）：

```
<form id="tips-message-notes" action="notessaved.php" method="post" class="general-form">
<div class="input-wrap">
<input type="text" name="title" value="'.$Title.'"/>
</div><!-- .input-wrap -->
<div class="input-wrap">
<textarea cols="" rows="" name="article" class="myTextEditor">'.$Article.'</textarea>
</div><!-- .input-wrap -->
<div class="button-wrap">
<input type="submit" name="publish" value="Publish" class="submit-btn" />
<input type="submit" name="draft" value="Save Draft" class="draft-btn" />
</div><!-- .button-wrap -->
</form> 
```

当用户单击提交按钮时，此 PHP 将处理数据库插入（database.php）：

```
<?php
$Title = $_POST['title'];
$Article = $_POST['article'];

$con = mysql_connect("server","username","password");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("my_db", $con);

mysql_query("INSERT INTO Table (Title, Article)
VALUES ('$Title', '$Article')");

mysql_close($con);
?> 
```

问题是..如何在用户点击提交按钮后重定向回form.html，并在之前提交的那些输入和文本区域上使用值？

请注意，文本区域可能有超过 1024 个字符。所以我不认为将 $article 放在 URL 上并在 form.html 上使用 GET 方法是个好主意。我希望我能从你那里看到其他技术......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:34:54.360

[http://us2.php.net/manual/en/book.session.php](http://us2.php.net/manual/en/book.session.php)

您需要使用 PHP 会话。

作为一个非常非常基础的教程：

1.  在发出任何输出*之前*放在`session_start()`每一页的开头。
**   将`_POST`值写入`_SESSION`*   在您的表单显示页面中，有：`$Articles = htmlspecialchars($_SESSION['Articles']);`等。*

 *这是在多个页面之间传输数据的唯一可靠方式。

* * *

清理您对查询的输入。要么使用带有`PDO`(or `mysqli`) 的准备好的语句，要么至少在查询`mysql_real_escape_string`的`_POST`输入上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:36:55.450

一种常见的做法是将 PHP 与表单放在同一页面上，并将 PHP 包含在其中：

```
<?php 

if($_POST)
{
// your processing code here
}

?> 
```

然后，您可以将您的表单提交给它自己，这些值将在同一页面上处理。然后，您可以将其包含在您的文本框中，它将用 $_POST 的值填充它：

```
<textarea><?php echo $_POST['textarea']; ?></textarea> 
```

注意：这是不安全的。如果您不确定，请询问如何保护它。

注意：虽然这是可以接受的；更好的设计是使用MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:41:16.147

`$_POST`在`$_SESSION`数据库页面上添加：

```
session_start();
$_SESSION['post'] = $_POST; 
```

使用`header`函数重定向到`form.html`页面：

```
header('Location: http://mydomina/form.html'); 
```

`$_SESSION['post']`将数据从表单字段写回：

```
<texarea><?php echo $_SESSION['post']['article']; ?></textarea> 
```

在处理数据库时也要考虑安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:37:56.847

您可以为此使用 PHP SESSION。

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)*

# c# - 从 c# 到 vb.net 的代码转换，包括事件处理程序

> ID：12389346
> 
> 赞同：2
> 
> 时间：2012-09-12T13:30:59.753
> 
> 标签：c#, vb.net, event-handling, raiseevent

您好，我发现了一个用 c# 编写的很棒的类，我想在 VB.NET 项目中使用它。

我在这个线程中找到了它： [C#：重定向控制台应用程序输出：如何刷新输出？](https://stackoverflow.com/questions/1033648/c-sharp-redirect-console-application-output-how-to-flush-the-output)

C# 类如下所示：

```
using System;
using System.Collections;
using System.IO;
using System.Text;
using System.Threading;

namespace System.Diagnostics
{
    internal delegate void UserCallBack(string data);
    public delegate void DataReceivedEventHandler(object sender, DataReceivedEventArgs e);

    public class FixedProcess : Process
    {
        internal AsyncStreamReader output;
        internal AsyncStreamReader error;
        public event DataReceivedEventHandler OutputDataReceived;
        public event DataReceivedEventHandler ErrorDataReceived;

        public new void BeginOutputReadLine()
        {
            Stream baseStream = StandardOutput.BaseStream;
            this.output = new AsyncStreamReader(this, baseStream, new UserCallBack(this.FixedOutputReadNotifyUser), StandardOutput.CurrentEncoding);
            this.output.BeginReadLine();
        }

        public void BeginErrorReadLine()
        {
            Stream baseStream = StandardError.BaseStream;
            this.error = new AsyncStreamReader(this, baseStream, new UserCallBack(this.FixedErrorReadNotifyUser), StandardError.CurrentEncoding);
            this.error.BeginReadLine();
        }

        internal void FixedOutputReadNotifyUser(string data)
        {
            DataReceivedEventHandler outputDataReceived = this.OutputDataReceived;
            if (outputDataReceived != null)
            {
                DataReceivedEventArgs dataReceivedEventArgs = new DataReceivedEventArgs(data);
                if (this.SynchronizingObject != null && this.SynchronizingObject.InvokeRequired)
                {
                    this.SynchronizingObject.Invoke(outputDataReceived, new object[]
                    {
                        this, 
                        dataReceivedEventArgs
                    });
                    return;
                }
                outputDataReceived(this, dataReceivedEventArgs);
            }
        }

        internal void FixedErrorReadNotifyUser(string data)
        {
            DataReceivedEventHandler errorDataReceived = this.ErrorDataReceived;
            if (errorDataReceived != null)
            {
                DataReceivedEventArgs dataReceivedEventArgs = new DataReceivedEventArgs(data);
                if (this.SynchronizingObject != null && this.SynchronizingObject.InvokeRequired)
                {
                    this.SynchronizingObject.Invoke(errorDataReceived, new object[]
                    {
                        this, 
                        dataReceivedEventArgs
                    });
                    return;
                }
                errorDataReceived(this, dataReceivedEventArgs);
            }
        }
    }

    internal class AsyncStreamReader : IDisposable
    {
        internal const int DefaultBufferSize = 1024;
        private const int MinBufferSize = 128;
        private Stream stream;
        private Encoding encoding;
        private Decoder decoder;
        private byte[] byteBuffer;
        private char[] charBuffer;
        private int _maxCharsPerBuffer;
        private Process process;
        private UserCallBack userCallBack;
        private bool cancelOperation;
        private ManualResetEvent eofEvent;
        private Queue messageQueue;
        private StringBuilder sb;
        private bool bLastCarriageReturn;
        public virtual Encoding CurrentEncoding
        {
            get
            {
                return this.encoding;
            }
        }
        public virtual Stream BaseStream
        {
            get
            {
                return this.stream;
            }
        }
        internal AsyncStreamReader(Process process, Stream stream, UserCallBack callback, Encoding encoding)
            : this(process, stream, callback, encoding, 1024)
        {
        }
        internal AsyncStreamReader(Process process, Stream stream, UserCallBack callback, Encoding encoding, int bufferSize)
        {
            this.Init(process, stream, callback, encoding, bufferSize);
            this.messageQueue = new Queue();
        }
        private void Init(Process process, Stream stream, UserCallBack callback, Encoding encoding, int bufferSize)
        {
            this.process = process;
            this.stream = stream;
            this.encoding = encoding;
            this.userCallBack = callback;
            this.decoder = encoding.GetDecoder();
            if (bufferSize < 128)
            {
                bufferSize = 128;
            }
            this.byteBuffer = new byte[bufferSize];
            this._maxCharsPerBuffer = encoding.GetMaxCharCount(bufferSize);
            this.charBuffer = new char[this._maxCharsPerBuffer];
            this.cancelOperation = false;
            this.eofEvent = new ManualResetEvent(false);
            this.sb = null;
            this.bLastCarriageReturn = false;
        }
        public virtual void Close()
        {
            this.Dispose(true);
        }
        void IDisposable.Dispose()
        {
            this.Dispose(true);
            GC.SuppressFinalize(this);
        }
        protected virtual void Dispose(bool disposing)
        {
            if (disposing && this.stream != null)
            {
                this.stream.Close();
            }
            if (this.stream != null)
            {
                this.stream = null;
                this.encoding = null;
                this.decoder = null;
                this.byteBuffer = null;
                this.charBuffer = null;
            }
            if (this.eofEvent != null)
            {
                this.eofEvent.Close();
                this.eofEvent = null;
            }
        }
        internal void BeginReadLine()
        {
            if (this.cancelOperation)
            {
                this.cancelOperation = false;
            }
            if (this.sb == null)
            {
                this.sb = new StringBuilder(1024);
                this.stream.BeginRead(this.byteBuffer, 0, this.byteBuffer.Length, new AsyncCallback(this.ReadBuffer), null);
                return;
            }
            this.FlushMessageQueue();
        }
        internal void CancelOperation()
        {
            this.cancelOperation = true;
        }
        private void ReadBuffer(IAsyncResult ar)
        {
            int num;
            try
            {
                num = this.stream.EndRead(ar);
            }
            catch (IOException)
            {
                num = 0;
            }
            catch (OperationCanceledException)
            {
                num = 0;
            }
            if (num == 0)
            {
                lock (this.messageQueue)
                {
                    if (this.sb.Length != 0)
                    {
                        this.messageQueue.Enqueue(this.sb.ToString());
                        this.sb.Length = 0;
                    }
                    this.messageQueue.Enqueue(null);
                }
                try
                {
                    this.FlushMessageQueue();
                    return;
                }
                finally
                {
                    this.eofEvent.Set();
                }
            }
            int chars = this.decoder.GetChars(this.byteBuffer, 0, num, this.charBuffer, 0);
            this.sb.Append(this.charBuffer, 0, chars);
            this.GetLinesFromStringBuilder();
            this.stream.BeginRead(this.byteBuffer, 0, this.byteBuffer.Length, new AsyncCallback(this.ReadBuffer), null);
        }
        private void GetLinesFromStringBuilder()
        {
            int i = 0;
            int num = 0;
            int length = this.sb.Length;
            if (this.bLastCarriageReturn && length > 0 && this.sb[0] == '\n')
            {
                i = 1;
                num = 1;
                this.bLastCarriageReturn = false;
            }
            while (i < length)
        {
            char c = this.sb[i];
            if (c == '\r' || c == '\n')
            {
                if (c == '\r' && i + 1 < length && this.sb[i + 1] == '\n')
                {
                    i++;
                }

                string obj = this.sb.ToString(num, i + 1 - num);

                num = i + 1;

                lock (this.messageQueue)
                {
                    this.messageQueue.Enqueue(obj);
                }
            }
            i++;
        }

            // Flush Fix: Send Whatever is left in the buffer
            string endOfBuffer = this.sb.ToString(num, length - num);
            lock (this.messageQueue)
            {
                this.messageQueue.Enqueue(endOfBuffer);
                num = length;
            }
            // End Flush Fix

            if (this.sb[length - 1] == '\r')
            {
                this.bLastCarriageReturn = true;
            }
            if (num < length)
            {
                this.sb.Remove(0, num);
            }
            else
            {
                this.sb.Length = 0;
            }
            this.FlushMessageQueue();
        }
        private void FlushMessageQueue()
        {
            while (this.messageQueue.Count > 0)
            {
                lock (this.messageQueue)
                {
                    if (this.messageQueue.Count > 0)
                    {
                        string data = (string)this.messageQueue.Dequeue();
                        if (!this.cancelOperation)
                        {
                            this.userCallBack(data);
                        }
                    }
                    continue;
                }
                break;
            }
        }
        internal void WaitUtilEOF()
        {
            if (this.eofEvent != null)
            {
                this.eofEvent.WaitOne();
                this.eofEvent.Close();
                this.eofEvent = null;
            }
        }
    }

    public class DataReceivedEventArgs : EventArgs
    {
        internal string _data;
        /// <summary>Gets the line of characters that was written to a redirected <see cref="T:System.Diagnostics.Process" /> output stream.</summary>
        /// <returns>The line that was written by an associated <see cref="T:System.Diagnostics.Process" /> to its redirected <see cref="P:System.Diagnostics.Process.StandardOutput" /> or <see cref="P:System.Diagnostics.Process.StandardError" /> stream.</returns>
        /// <filterpriority>2</filterpriority>
        public string Data
        {
            get
            {
                return this._data;
            }
        }
        internal DataReceivedEventArgs(string data)
        {
            this._data = data;
        }
    }
} 
```

我的转换代码如下所示：

```
Imports System
Imports System.Collections
Imports System.IO
Imports System.Text
Imports System.Threading

Namespace System.Diagnostics
    Friend Delegate Sub UserCallBack(data As String)
    Public Delegate Sub DataReceivedEventHandler(sender As Object, e As DataReceivedEventArgs)

    Public Class FixedProcess
        Inherits Process
        Friend output As AsyncStreamReader
        Friend [error] As AsyncStreamReader
        Public Event OutputDataReceived As DataReceivedEventHandler '<----------Error 1
        Public Event ErrorDataReceived As DataReceivedEventHandler '<------------Error 2

        Public Shadows Sub BeginOutputReadLine()
            Dim baseStream As Stream = StandardOutput.BaseStream
            Me.output = New AsyncStreamReader(Me, baseStream, New UserCallBack(AddressOf Me.FixedOutputReadNotifyUser), StandardOutput.CurrentEncoding)
            Me.output.BeginReadLine()
        End Sub

        Public Sub BeginErrorReadLine()   '<-------------Error 3
            Dim baseStream As Stream = StandardError.BaseStream
            Me.[error] = New AsyncStreamReader(Me, baseStream, New UserCallBack(AddressOf Me.FixedErrorReadNotifyUser), StandardError.CurrentEncoding)
            Me.[error].BeginReadLine()
        End Sub

        Friend Sub FixedOutputReadNotifyUser(data As String)

            Dim outputDataReceived As DataReceivedEventHandler = Me.OutputDataReceived '<------------Error 4
            If outputDataReceived IsNot Nothing Then
                Dim dataReceivedEventArgs As New DataReceivedEventArgs(data)
                If Me.SynchronizingObject IsNot Nothing AndAlso Me.SynchronizingObject.InvokeRequired Then
                    Me.SynchronizingObject.Invoke(outputDataReceived, New Object() {Me, dataReceivedEventArgs})
                    Return
                End If
                outputDataReceived(Me, dataReceivedEventArgs)
            End If
        End Sub

        Friend Sub FixedErrorReadNotifyUser(data As String)
            Dim errorDataReceived As DataReceivedEventHandler = Me.ErrorDataReceived '<-------------Error 5
            If errorDataReceived IsNot Nothing Then
                Dim dataReceivedEventArgs As New DataReceivedEventArgs(data)
                If Me.SynchronizingObject IsNot Nothing AndAlso Me.SynchronizingObject.InvokeRequired Then
                    Me.SynchronizingObject.Invoke(errorDataReceived, New Object() {Me, dataReceivedEventArgs})
                    Return
                End If
                errorDataReceived(Me, dataReceivedEventArgs)
            End If
        End Sub
    End Class

    Friend Class AsyncStreamReader
        Implements IDisposable
        Friend Const DefaultBufferSize As Integer = 1024
        Private Const MinBufferSize As Integer = 128
        Private stream As Stream
        Private encoding As Encoding
        Private decoder As Decoder
        Private byteBuffer As Byte()
        Private charBuffer As Char()
        Private _maxCharsPerBuffer As Integer
        Private process As Process
        Private userCallBack As UserCallBack
        Private cancelOperation As Boolean
        Private eofEvent As ManualResetEvent
        Private messageQueue As Queue
        Private sb As StringBuilder
        Private bLastCarriageReturn As Boolean
        Public Overridable ReadOnly Property CurrentEncoding() As Encoding
            Get
                Return Me.encoding
            End Get
        End Property
        Public Overridable ReadOnly Property BaseStream() As Stream
            Get
                Return Me.stream
            End Get
        End Property
        Friend Sub New(process As Process, stream As Stream, callback As UserCallBack, encoding As Encoding)
            Me.New(process, stream, callback, encoding, 1024)
        End Sub
        Friend Sub New(process As Process, stream As Stream, callback As UserCallBack, encoding As Encoding, bufferSize As Integer)
            Me.Init(process, stream, callback, encoding, bufferSize)
            Me.messageQueue = New Queue()
        End Sub
        Private Sub Init(process As Process, stream As Stream, callback As UserCallBack, encoding As Encoding, bufferSize As Integer)
            Me.process = process
            Me.stream = stream
            Me.encoding = encoding
            Me.userCallBack = callback
            Me.decoder = encoding.GetDecoder()
            If bufferSize < 128 Then
                bufferSize = 128
            End If
            Me.byteBuffer = New Byte(bufferSize - 1) {}
            Me._maxCharsPerBuffer = encoding.GetMaxCharCount(bufferSize)
            Me.charBuffer = New Char(Me._maxCharsPerBuffer - 1) {}
            Me.cancelOperation = False
            Me.eofEvent = New ManualResetEvent(False)
            Me.sb = Nothing
            Me.bLastCarriageReturn = False
        End Sub
        Public Overridable Sub Close()
            Me.Dispose(True)
        End Sub
        Private Sub IDisposable_Dispose() Implements IDisposable.Dispose
            Me.Dispose(True)
            GC.SuppressFinalize(Me)
        End Sub
        Protected Overridable Sub Dispose(disposing As Boolean)
            If disposing AndAlso Me.stream IsNot Nothing Then
                Me.stream.Close()
            End If
            If Me.stream IsNot Nothing Then
                Me.stream = Nothing
                Me.encoding = Nothing
                Me.decoder = Nothing
                Me.byteBuffer = Nothing
                Me.charBuffer = Nothing
            End If
            If Me.eofEvent IsNot Nothing Then
                Me.eofEvent.Close()
                Me.eofEvent = Nothing
            End If
        End Sub
        Friend Sub BeginReadLine()
            If Me.cancelOperation Then
                Me.cancelOperation = False
            End If
            If Me.sb Is Nothing Then
                Me.sb = New StringBuilder(1024)
                Me.stream.BeginRead(Me.byteBuffer, 0, Me.byteBuffer.Length, New AsyncCallback(AddressOf Me.ReadBuffer), Nothing)
                Return
            End If
            Me.FlushMessageQueue()
        End Sub
        Friend Sub CancelOperation()  '<------- Error 6
            Me.cancelOperation = True
        End Sub
        Private Sub ReadBuffer(ar As IAsyncResult)
            Dim num As Integer
            Try
                num = Me.stream.EndRead(ar)
            Catch generatedExceptionName As IOException
                num = 0
            Catch generatedExceptionName As OperationCanceledException
                num = 0
            End Try
            If num = 0 Then
                SyncLock Me.messageQueue
                    If Me.sb.Length <> 0 Then
                        Me.messageQueue.Enqueue(Me.sb.ToString())
                        Me.sb.Length = 0
                    End If
                    Me.messageQueue.Enqueue(Nothing)
                End SyncLock
                Try
                    Me.FlushMessageQueue()
                    Return
                Finally
                    Me.eofEvent.[Set]()
                End Try
            End If
            Dim chars As Integer = Me.decoder.GetChars(Me.byteBuffer, 0, num, Me.charBuffer, 0)
            Me.sb.Append(Me.charBuffer, 0, chars)
            Me.GetLinesFromStringBuilder()
            Me.stream.BeginRead(Me.byteBuffer, 0, Me.byteBuffer.Length, New AsyncCallback(AddressOf Me.ReadBuffer), Nothing)
        End Sub
        Private Sub GetLinesFromStringBuilder()
            Dim i As Integer = 0
            Dim num As Integer = 0
            Dim length As Integer = Me.sb.Length
            If Me.bLastCarriageReturn AndAlso length > 0 AndAlso Me.sb(0) = ControlChars.Lf Then
                i = 1
                num = 1
                Me.bLastCarriageReturn = False
            End If
            While i < length
                Dim c As Char = Me.sb(i)
                If c = ControlChars.Cr OrElse c = ControlChars.Lf Then
                    If c = ControlChars.Cr AndAlso i + 1 < length AndAlso Me.sb(i + 1) = ControlChars.Lf Then
                        i += 1
                    End If

                    Dim obj As String = Me.sb.ToString(num, i + 1 - num)

                    num = i + 1

                    SyncLock Me.messageQueue
                        Me.messageQueue.Enqueue(obj)
                    End SyncLock
                End If
                i += 1
            End While

            ' Flush Fix: Send Whatever is left in the buffer
            Dim endOfBuffer As String = Me.sb.ToString(num, length - num)
            SyncLock Me.messageQueue
                Me.messageQueue.Enqueue(endOfBuffer)
                num = length
            End SyncLock
            ' End Flush Fix

            If Me.sb(length - 1) = ControlChars.Cr Then
                Me.bLastCarriageReturn = True
            End If
            If num < length Then
                Me.sb.Remove(0, num)
            Else
                Me.sb.Length = 0
            End If
            Me.FlushMessageQueue()
        End Sub
        Private Sub FlushMessageQueue()
            While Me.messageQueue.Count > 0
                SyncLock Me.messageQueue
                    If Me.messageQueue.Count > 0 Then
                        Dim data As String = DirectCast(Me.messageQueue.Dequeue(), String)
                        If Not Me.cancelOperation Then
                            Me.userCallBack(data)
                        End If
                    End If
                    Continue While
                End SyncLock
                Exit While
            End While
        End Sub
        Friend Sub WaitUtilEOF()
            If Me.eofEvent IsNot Nothing Then
                Me.eofEvent.WaitOne()
                Me.eofEvent.Close()
                Me.eofEvent = Nothing
            End If
        End Sub
    End Class

    Public Class DataReceivedEventArgs
        Inherits EventArgs
        Friend _data As String
        ''' <summary>Gets the line of characters that was written to a redirected <see cref="T:System.Diagnostics.Process" /> output stream.</summary>
        ''' <returns>The line that was written by an associated <see cref="T:System.Diagnostics.Process" /> to its redirected <see cref="P:System.Diagnostics.Process.StandardOutput" /> or <see cref="P:System.Diagnostics.Process.StandardError" /> stream.</returns>
        ''' <filterpriority>2</filterpriority>
        Public ReadOnly Property Data() As String
            Get
                Return Me._data
            End Get
        End Property
        Friend Sub New(data As String)
            Me._data = data
        End Sub
    End Class
End Namespace 
```

错误 1-3 似乎是警告，实际上可能有效，尤其是错误 4 和 5 让我头疼“公共事件 OutputDataRecieved(sender As Object, e As DataRecievedEventArgs) 是一个事件，不能直接调用。使用 RaiseEvent 语句引发一个事件。”

事件处理程序似乎不适用于我尝试过的任何代码转换器，而且我缺乏手动转换它的 VB 技能。

是否有一个友好的灵魂可以正确地转换这个类以使其真正起作用？

非常感谢！

罗马

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:36:29.677

在您的解决方案中，添加一个新的 c# 项目。将此 c# 代码放入其中。

从您的 vb 项目中，添加对 c# 项目的引用。

您现在可以从 vb 调用 c# 对象。

当它转换为IL时都是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:53:34.557

您需要将 Overloads 关键字添加到 BeginErrorReadLine 方法签名中。

```
 Public Overloads Sub BeginErrorReadLine()   '<-------------Error 3 
```

事件声明需要声明为 Shadows，否则它们会与基类事件声明发生冲突。

```
 Public Shadows Event OutputDataReceived As DataReceivedEventHandler '<----------Error 1 
```

然后在您的 FixedOutputReadNotifyUser 方法中，您无需像在 C# 中那样检查事件处理程序以查看它是否为空。VB 会为您做到这一点。相反，只需按如下方式提高它：

```
Friend Sub FixedOutputReadNotifyUser(data As String)
    Dim dataReceivedEventArgs As New DataReceivedEventArgs(data)
    RaiseEvent OutputDataReceived(Me, dataReceivedEventArgs)
End Sub 
```

最后一个问题是原始类使用区分大小写来区分“cancelOperation”字段和“CancelOperation”方法。最好的选择是在字段前加上下划线，如下所示：`Private _CancelOperation As Boolean`然后在类中修复相应的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:35:24.930

对于您的“错误 4”和“错误 5”，请改用它 - 请注意，您需要将局部变量设置为以“事件”结尾的隐藏 VB 支持委托字段。另请注意，您对局部变量为空的测试仍然有效，因为我们不检查事件是否为空，而是委托类型的局部变量 - “错误 5”的方法完全相同：

```
Friend Sub FixedOutputReadNotifyUser(ByVal data As String)
    Dim outputDataReceived As DataReceivedEventHandler = Me.OutputDataReceivedEvent
    If outputDataReceived IsNot Nothing Then
        Dim dataReceivedEventArgs As New DataReceivedEventArgs(data)
        If Me.SynchronizingObject IsNot Nothing AndAlso Me.SynchronizingObject.InvokeRequired Then
            Me.SynchronizingObject.Invoke(outputDataReceived, New Object() { Me, dataReceivedEventArgs })
            Return
        End If
        outputDataReceived(Me, dataReceivedEventArgs)
    End If
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:50:05.617

下面是我现在使用的代码。我删除了命名空间，因为我不知道如何在我的项目中包含第二个命名空间并将代码粘贴到一个新模块中。然后按照原始 c# 解决方案中的建议，我只是将“p 作为新进程”更改为“p 作为新的 FixedProcess”。

再次感谢所有建议！

你们真棒！

为了让您全面了解我正在尝试做的事情，我还包括了表单代码。我不认为自己是一名程序员，所以如果它不像你们大多数人那样复杂，请多多包涵。这样做的目的是通过 plink 远程控制 SSH 会话并在 Cisco 路由器上自动执行命令。

该代码现在可以正常工作，但还剩下一个（希望如此）小缺陷：如果我关闭底层 plink.exe，我还想关闭输入和输出流。到目前为止，我无法在我的“借来的”课堂上找到如何做到这一点。

我想在表单的关闭事件上执行此操作。它会杀死 plink.exe 进程，但是如果我再次打开表单以进行另一个会话，它会使输出加倍，如果我关闭并再次重新打开，它会使输出增加三倍...

任何建议如何正确关闭流？

```
Imports System
Imports System.Text
Imports System.IO
Imports System.Diagnostics
Imports System.Threading
Imports System.ComponentModel
Imports Microsoft.VisualBasic

Imports System.Collections.Generic
Imports System.Linq

Imports System.Collections

Module Module2

    Friend Delegate Sub UserCallBack(ByVal data As String)
    Public Delegate Sub DataReceivedEventHandler(ByVal sender As Object, ByVal e As DataReceivedEventArgs)

    Public Class FixedProcess
        Inherits Process
        Friend output As AsyncStreamReader
        Friend [error] As AsyncStreamReader
        Public Shadows Event OutputDataReceived As DataReceivedEventHandler
        Public Shadows Event ErrorDataReceived As DataReceivedEventHandler

        Public CancelAll As Boolean = False

        Public Overloads Sub BeginOutputReadLine()
            Dim baseStream As Stream = StandardOutput.BaseStream
            Me.output = New AsyncStreamReader(Me, baseStream, New UserCallBack(AddressOf Me.FixedOutputReadNotifyUser), StandardOutput.CurrentEncoding)
            Me.output.BeginReadLine()
        End Sub

        Public Overloads Sub BeginErrorReadLine()
            Dim baseStream As Stream = StandardError.BaseStream
            Me.[error] = New AsyncStreamReader(Me, baseStream, New UserCallBack(AddressOf Me.FixedErrorReadNotifyUser), StandardError.CurrentEncoding)
            Me.[error].BeginReadLine()
        End Sub

        Friend Sub FixedOutputReadNotifyUser(ByVal data As String)
            Dim dataReceivedEventArgs As New DataReceivedEventArgs(data)
            RaiseEvent OutputDataReceived(Me, dataReceivedEventArgs)

        End Sub

        Friend Sub FixedErrorReadNotifyUser(ByVal data As String)
            Dim errorDataReceivedEventArgs As New DataReceivedEventArgs(data)
            RaiseEvent ErrorDataReceived(Me, errorDataReceivedEventArgs)

        End Sub

    End Class

    Friend Class AsyncStreamReader
        Implements IDisposable
        Friend Const DefaultBufferSize As Integer = 1024
        Private Const MinBufferSize As Integer = 128
        Private stream As Stream
        Private encoding As Encoding
        Private decoder As Decoder
        Private byteBuffer As Byte()
        Private charBuffer As Char()
        Private _maxCharsPerBuffer As Integer
        Private process As Process
        Private userCallBack As UserCallBack
        Public cancelOperation As Boolean
        Private eofEvent As ManualResetEvent
        Private messageQueue As Queue
        Private sb As StringBuilder
        Private bLastCarriageReturn As Boolean
        Public Overridable ReadOnly Property CurrentEncoding() As Encoding
            Get
                Return Me.encoding
            End Get
        End Property
        Public Overridable ReadOnly Property BaseStream() As Stream
            Get
                Return Me.stream
            End Get
        End Property
        Friend Sub New(ByVal process As Process, ByVal stream As Stream, ByVal callback As UserCallBack, ByVal encoding As Encoding)
            Me.New(process, stream, callback, encoding, 1024)
        End Sub
        Friend Sub New(ByVal process As Process, ByVal stream As Stream, ByVal callback As UserCallBack, ByVal encoding As Encoding, ByVal bufferSize As Integer)
            Me.Init(process, stream, callback, encoding, bufferSize)
            Me.messageQueue = New Queue()
        End Sub
        Private Sub Init(ByVal process As Process, ByVal stream As Stream, ByVal callback As UserCallBack, ByVal encoding As Encoding, ByVal bufferSize As Integer)
            Me.process = process
            Me.stream = stream
            Me.encoding = encoding
            Me.userCallBack = callback
            Me.decoder = encoding.GetDecoder()
            If bufferSize < 128 Then
                bufferSize = 128
            End If
            Me.byteBuffer = New Byte(bufferSize - 1) {}
            Me._maxCharsPerBuffer = encoding.GetMaxCharCount(bufferSize)
            Me.charBuffer = New Char(Me._maxCharsPerBuffer - 1) {}
            Me.cancelOperation = False
            Me.eofEvent = New ManualResetEvent(False)
            Me.sb = Nothing
            Me.bLastCarriageReturn = False
        End Sub
        Public Overridable Sub Close()
            Me.Dispose(True)
        End Sub
        Private Sub IDisposable_Dispose() Implements IDisposable.Dispose
            Me.Dispose(True)
            GC.SuppressFinalize(Me)
        End Sub
        Protected Overridable Sub Dispose(ByVal disposing As Boolean)
            If disposing AndAlso Me.stream IsNot Nothing Then
                Me.stream.Close()
            End If
            If Me.stream IsNot Nothing Then
                Me.stream = Nothing
                Me.encoding = Nothing
                Me.decoder = Nothing
                Me.byteBuffer = Nothing
                Me.charBuffer = Nothing
            End If
            If Me.eofEvent IsNot Nothing Then
                Me.eofEvent.Close()
                Me.eofEvent = Nothing
            End If
        End Sub
        Friend Sub BeginReadLine()
            If Me.cancelOperation Then
                Me.cancelOperation = False
            End If
            If Me.sb Is Nothing Then
                Me.sb = New StringBuilder(1024)
                Me.stream.BeginRead(Me.byteBuffer, 0, Me.byteBuffer.Length, New AsyncCallback(AddressOf Me.ReadBuffer), Nothing)
                Return
            End If
            Me.FlushMessageQueue()
        End Sub
        Friend Sub _CancelOperation()
            Me.cancelOperation = True
        End Sub
        Private Sub ReadBuffer(ByVal ar As IAsyncResult)

            Dim num As Integer

            Try
                num = Me.stream.EndRead(ar)
            Catch generatedExceptionName As IOException
                num = 0
            Catch generatedExceptionName As OperationCanceledException
                num = 0
            End Try
            If num = 0 Then
                SyncLock Me.messageQueue
                    If Me.sb.Length <> 0 Then
                        Me.messageQueue.Enqueue(Me.sb.ToString())
                        Me.sb.Length = 0
                    End If
                    Me.messageQueue.Enqueue(Nothing)
                End SyncLock
                Try
                    Me.FlushMessageQueue()
                    Return
                Finally
                    Me.eofEvent.[Set]()
                End Try
            End If
            Dim chars As Integer = Me.decoder.GetChars(Me.byteBuffer, 0, num, Me.charBuffer, 0)
            Me.sb.Append(Me.charBuffer, 0, chars)
            Me.GetLinesFromStringBuilder()
            Me.stream.BeginRead(Me.byteBuffer, 0, Me.byteBuffer.Length, New AsyncCallback(AddressOf Me.ReadBuffer), Nothing)

        End Sub
        Private Sub GetLinesFromStringBuilder()
            Dim i As Integer = 0
            Dim num As Integer = 0
            Dim length As Integer = Me.sb.Length
            If Me.bLastCarriageReturn AndAlso length > 0 AndAlso Me.sb(0) = ControlChars.Lf Then
                i = 1
                num = 1
                Me.bLastCarriageReturn = False
            End If
            While i < length
                Dim c As Char = Me.sb(i)
                If c = ControlChars.Cr OrElse c = ControlChars.Lf Then
                    If c = ControlChars.Cr AndAlso i + 1 < length AndAlso Me.sb(i + 1) = ControlChars.Lf Then
                        i += 1
                    End If

                    Dim obj As String = Me.sb.ToString(num, i + 1 - num)

                    num = i + 1

                    SyncLock Me.messageQueue
                        Me.messageQueue.Enqueue(obj)
                    End SyncLock
                End If
                i += 1
            End While

            ' Flush Fix: Send Whatever is left in the buffer
            Dim endOfBuffer As String = Me.sb.ToString(num, length - num)
            SyncLock Me.messageQueue
                Me.messageQueue.Enqueue(endOfBuffer)
                num = length
            End SyncLock
            ' End Flush Fix

            If Me.sb(length - 1) = ControlChars.Cr Then
                Me.bLastCarriageReturn = True
            End If
            If num < length Then
                Me.sb.Remove(0, num)
            Else
                Me.sb.Length = 0
            End If
            Me.FlushMessageQueue()
        End Sub
        Private Sub FlushMessageQueue()
            While Me.messageQueue.Count > 0
                SyncLock Me.messageQueue
                    If Me.messageQueue.Count > 0 Then
                        Dim data As String = DirectCast(Me.messageQueue.Dequeue(), String)
                        If Not Me.cancelOperation Then
                            Me.userCallBack(data)
                        End If
                    End If
                    Continue While
                End SyncLock
                Exit While
            End While
        End Sub
        Friend Sub WaitUtilEOF()
            If Me.eofEvent IsNot Nothing Then
                Me.eofEvent.WaitOne()
                Me.eofEvent.Close()
                Me.eofEvent = Nothing
            End If
        End Sub
    End Class

    Public Class DataReceivedEventArgs
        Inherits EventArgs
        Friend _data As String
        ''' <summary>Gets the line of characters that was written to a redirected <see cref="T:System.Diagnostics.Process" /> output stream.</summary>
        ''' <returns>The line that was written by an associated <see cref="T:System.Diagnostics.Process" /> to its redirected <see cref="P:System.Diagnostics.Process.StandardOutput" /> or <see cref="P:System.Diagnostics.Process.StandardError" /> stream.</returns>
        ''' <filterpriority>2</filterpriority>
        Public ReadOnly Property Data() As String
            Get
                Return Me._data
            End Get
        End Property
        Friend Sub New(ByVal data As String)
            Me._data = data
        End Sub
    End Class

End Module 
```

和我的表格代码...

```
Imports System
Imports System.Text
Imports System.IO
Imports System.Diagnostics
Imports System.Threading
Imports System.ComponentModel
Imports Microsoft.VisualBasic

Imports System.Collections.Generic
Imports System.Linq

Imports System.Collections

Public Class Form3

    ' Define static variables shared by class methods.
    Private Shared shellOutput As StringBuilder = Nothing
    Private Shared numOutputLines As Integer = 0
    Private Shared stdIN As StreamWriter
    Private Shared p As New FixedProcess 'as new
    Private Shared oldOutlineData As String = ""
    Private Shared PasswordInput As Boolean = False

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        ShowISDNStatus()

    End Sub

    Public Sub ShowISDNStatus()
        Dim p_info As New ProcessStartInfo 'as new
        p_info.FileName = Form1.PlinkPath
        p_info.Arguments = Form1.KommandoArguments
        p_info.UseShellExecute = False
        p_info.CreateNoWindow = True
        p_info.RedirectStandardOutput = True
        p_info.RedirectStandardInput = True
        p_info.RedirectStandardError = True
        ' Set our event handler to asynchronously read the shell output.
        AddHandler p.OutputDataReceived, AddressOf dirOutputHandler
        AddHandler p.ErrorDataReceived, AddressOf dirOutputHandler

        shellOutput = New StringBuilder
        p.StartInfo = p_info
        p.Start()
        p.BeginOutputReadLine()
        p.BeginErrorReadLine()
        stdIN = p.StandardInput

        'stdIN.WriteLine("enable" & vbCr & "K#limdor1" & vbCrLf)
        'Timer1.Enabled = True
        'System.Threading.Thread.Sleep(500)

        'stdIN.WriteLine("term len 0")
        'stdIN.WriteLine("show isdn status")

        stdIN.WriteLine("enable" & vbCr & Form1.TextPassword.Text & vbCrLf)
        Timer1.Enabled = True
        System.Threading.Thread.Sleep(500)
        Me.TextBox2.Text = ""
        stdIN.WriteLine("term len 0")
        stdIN.WriteLine("show isdn status")
        Me.TextBox1.Select(TextBox1.Text.Length, 0)
        Me.TextBox1.ScrollToCaret()

    End Sub

    Private Shared Sub dirOutputHandler(ByVal sendingProcess As Object, ByVal outLine As DataReceivedEventArgs)
        ''If Not String.IsNullOrEmpty(outLine.Data) Then
        shellOutput.Append(outLine.Data)

        'For i = 1 To Len(outLine.Data)
        '    FormDebug.TextBox1.Text = "Len von OutlineData: " & Len(outLine.Data) & " " & Asc(Mid(outLine.Data, i, 1)) & "---" & Mid(outLine.Data, i, 1)
        'Next

        If outLine.Data = "Store key in cache? (y/n) " Then
            stdIN.WriteLine("y")
        End If

        Form3.TextBox1.Text = outLine.Data

        ''End If
    End Sub

    Private Sub Form3_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    End Sub

    Private Sub Form3_Closing(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles MyBase.Closing

        p.Kill()

    End Sub

    Private Sub TextBox2_PreviewKeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.PreviewKeyDownEventArgs) Handles TextBox2.PreviewKeyDown

        If e.KeyCode = Keys.Return Then

            If PasswordInput = False Then
                If Me.TextBox2.Text = "en" Then
                    Me.TextBox2.UseSystemPasswordChar = True
                    Me.TextBox2.Text = ""
                    PasswordInput = True
                    Timer1.Enabled = False
                    Me.TextBox1.AppendText("Password:")

                ElseIf Me.TextBox2.Text = "ena" Then
                    Me.TextBox2.UseSystemPasswordChar = True
                    Me.TextBox2.Text = ""
                    PasswordInput = True
                    Timer1.Enabled = False
                    Me.TextBox1.AppendText("Password:")

                ElseIf Me.TextBox2.Text = "enab" Then
                    Me.TextBox2.UseSystemPasswordChar = True
                    Me.TextBox2.Text = ""
                    PasswordInput = True
                    Timer1.Enabled = False
                    Me.TextBox1.AppendText("Password:")

                ElseIf Me.TextBox2.Text = "enabl" Then
                    Me.TextBox2.UseSystemPasswordChar = True
                    Me.TextBox2.Text = ""
                    PasswordInput = True
                    Timer1.Enabled = False
                    Me.TextBox1.AppendText("Password:")

                ElseIf Me.TextBox2.Text = "enable" Then
                    Me.TextBox2.UseSystemPasswordChar = True
                    Me.TextBox2.Text = ""
                    PasswordInput = True
                    Timer1.Enabled = False
                    Me.TextBox1.AppendText("Password:")

                ElseIf Me.TextBox2.Text = "" Then
                    stdIN.WriteLine()
                    System.Threading.Thread.Sleep(500)
                    Me.TextBox1.Select(TextBox1.Text.Length, 0)
                    Me.TextBox1.ScrollToCaret()
                Else
                    stdIN.WriteLine(Me.TextBox2.Text)
                    System.Threading.Thread.Sleep(500)
                    Me.TextBox2.Text = ""
                    Me.TextBox1.Text = shellOutput.ToString
                    Me.TextBox1.Select(TextBox1.Text.Length, 0)
                    Me.TextBox1.ScrollToCaret()
                End If

            Else

                stdIN.WriteLine("enable" & vbCr & Me.TextBox2.Text & vbCrLf)
                System.Threading.Thread.Sleep(500)
                Me.TextBox2.Text = ""
                Timer1.Enabled = True
                Me.TextBox2.UseSystemPasswordChar = False
                stdIN.WriteLine("term len 0")
                Me.TextBox1.Select(TextBox1.Text.Length, 0)
                Me.TextBox1.ScrollToCaret()
                PasswordInput = False

            End If

        End If

    End Sub

    Private Sub TextBox2_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox2.TextChanged

    End Sub

    Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged
        Me.TextBox1.SelectAll()
        Me.TextBox1.ScrollToCaret()
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        ' If Me.TextBox1.Text <> shellOutput.ToString Then Me.TextBox1.Text = shellOutput.ToString
        Me.TextBox1.Text = shellOutput.ToString

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        FormDebug.Show()
        'Dim frm As New Form3
        'Static Num As Integer

        'Num = Num + 1
        'frm.Text = "Copy of Form3 - " & Num
        'frm.Show()
    End Sub
End Class 
```

# php - Magento 产品集合在函数中使用后未过滤

> ID：12389347
> 
> 赞同：0
> 
> 时间：2012-09-12T13:31:02.577
> 
> 标签：php, magento, collections, product

好的，我有一个相当简单的模块正在运行，但是我遇到了一个我无法解决的产品集合问题。这是问题所在：

1）我根据发布的搜索类别加载产品集合：

```
$products = Mage::getModel('catalog/product')
            ->getCollection()
            ->addStoreFilter(Mage::app()->getStore()->getId())
            ->addAttributeToSelect('*')
            ->addAttributeToFilter('search_category', array('eq' => $data['search_category'])); 
```

2）我在一个基本函数中使用这个集合来检索属性：

```
$section = $this->getSections($products); 
```

3) 接下来在代码中，如果发布了另一个值，我会进一步过滤产品集合，这会运行另一个函数。

```
if($data['section'] != "")
{
    $products->addAttributeToFilter('section', array('eq' => $data['section']));            
    $profile = $this->getProfiles($products);
    echo count($products);
    echo count($products->getIds());
} 
```

基本上进入第二个功能的产品是未经过滤的。如果我在此阶段回显 $products 对象的计数，它会给我产品集合中的原始数量，而不是过滤后的数量。

如果我回显 $products->getIds() 它会给我正确的过滤计数。

我真的不明白为什么这不起作用，我已经详细检查了代码，一切都是正确的。似乎如果我在函数中使用产品集合，则无法进一步过滤。

如果我将过滤器移到第一个函数上方，它可以工作，但它显然给了我想要的结果。

如果有人可以解释这一点，请帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:44:59.677

您应该检查您的`$products`集合是否加载在初始化和您尝试向其添加额外过滤器的位置之间的某个位置。

因为在加载集合后，您应用的过滤器不会影响它，因为它们只会影响从数据库获取集合的最终请求，而您的已经加载。

（`Mage_Catalog_Model_Resource_Product_Collection::getAllIds()`我相信您确实拼错了`getAllIds()`提及`$products->getIds()`）将返回正确的过滤数量，因为它将与集合内的 Select 对象一起操作并向 DB 发出请求，而不是获取已加载项目的 Id。

请记住，诸如基本功能`count`和语言结构之类`foreach()`的将触发收集的**加载**过程。

# jquery - 使用 .animation 标签在 Jquery 中闪烁动画

> ID：12389348
> 
> 赞同：0
> 
> 时间：2012-09-12T13:31:03.123
> 
> 标签：jquery

当您转到我网站的任何页面时，我正在使用 Jquery 为我的文本不透明度设置动画（从 0 到 1）。然后，在主导航单击时，它会初始化文本的动画以淡出，然后初始化链接并转到下一页。但是由于某种原因，当您在文本完全动画化之前单击主导航时，文本会淡出但会在完全不透明时闪烁，然后加载下一页的链接。我想知道是否有人知道如何纠正这个问题，我有下面使用的代码。我在想我需要以某种方式使用队列，但我又不确定这是否有帮助....这是我网站的链接，您可以在其中看到它闪烁 - > www.originalengine.com/test/iindex.html

我从 CSS 中的 0 不透明度开始

```
#AlternateContent{
position: relative;
opacity: 0;
} 
```

然后我淡入文本 div

```
$('#AlternateContent').animate({opacity: '1'},{duration: 2650}); 
```

然后这就是我检查按下哪个导航按钮并为淡出设置动画的方式：

```
if (window.location.pathname === '/test/index.html')

{

$('#AboutButton').bind('click', AboutButton);
$('#PortfolioButton').bind('click', PortfolioButton);
$('#ContactButton').bind('click', ContactButton);

} 

function ContactButton(e) { 

$('#AlternateContent').animate({height: 0},{duration: 2650, queue: false}, 'swing')
.animate({opacity: '0'},{duration: 577, queue: false}, function(){
document.getElementById("AlternateContent").style.opacity=0;
window.location = 'contact.php';

});
} 
```

就像我说的，这行得通，但最后我得到了闪光。转到我的网站（www.originalengine.com/test/iindex.html）并检查一下，如果您在页面之间快速按下导航项，在淡出时，文本会在进入下一页之前再次闪烁“on” ，我只想让它完全淡出！！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:33:58.537

可能是因为你有两个动画同时运行。尝试：

```
$('#AlternateContent').stop().animate({height: 0},{duration: 2650, queue: false}, 'swing') 
```

# file - 检查文件扩展名为“.ini”的文件是否存在，shell

> ID：12389352
> 
> 赞同：1
> 
> 时间：2012-09-12T13:31:20.110
> 
> 标签：file, shell, exists, file-extension

`.ini`我如何检查（使用外壳程序）是否存在具有文件扩展名的文件`/dir`？最快的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T16:59:12.240

我发现这对于验证现有的 jpeg 文件很有用。

```
if ls /path/*.jpg &> /dev/null; then
    #do something with existing files
else
    echo "files do not exist"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:43:31.823

```
set -- /dir/*.ini
case $1 in
  ('/dir/*.ini') echo "No ini files here.";;
  (*)            echo "Found $# ini files: $@";;
esac 
```

看妈！没有叉子！这应该超过一百万个 CPU 周期，任何使用 fork to 和朋友的解决`ls`方案`find`。

现在这里有一个小问题。你能发现吗？好的，如果`/dir`包含一个按`*.ini`字面意思命名的文件（星号、点号、ini）会发生什么？以上将给你一个*错误的否定*：它报告*没有*ini文件，虽然有一个。如果你想为这个案例做准备（你应该为这个案例做准备，因为你是一个细心的程序员，注重细节，*你的*代码中没有陷阱，对吧？），你稍微修改第一个案例来阅读

```
('/dir/*.ini')
  if test -f '/dir/*.ini'; then
    echo "Wow, there's a plain file named '/dir/*.ini'!"
  else
    echo "No ini files here."
  fi;; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:34:04.527

`find /dir/ -iname '*.ini'`. 如果您不想搜索子目录，请在`-maxdepth 1`后面添加`/dir/`

# python - 组合 2 个列表，如 UNION，即在 2 个列表之间保留 1 个相互项目的副本并附加其他列表

> ID：12389356
> 
> 赞同：0
> 
> 时间：2012-09-12T13:31:29.970
> 
> 标签：python, list

**我编辑了它。我把它们列在字典里。如果 a 和 b 是 2 个字典：**

```
a = {'UK':'http://www.uk.com', 'COM':['http://www.uk.com','http://www.michaeljackson.com']}

bb = {'Australia': 'http://www.australia.com', 'COM':['http://www.Australia.com', 'http://www.rafaelnadal.com','http://www.rogerfederer.com']} 
```

我想联合他们

```
{'Australia': ['http://www.australia.com'], 'COM': ['http://www.uk.com', 'http://www.michaeljackson.com', 'http://www.Australia.com', 'http://www.rafaelnadal.com', 'http://www.rogerfederer.com'], 'UK': ['http://www.uk.com']} 
```

**我想联合他们，即**

```
**How to do it in Python without overwwriting and replacing any value?** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:39:21.540

我认为也许 a`defaultdict`在这里可能会有所帮助：

```
from collections import defaultdict

a = [['UK', ['http://www.uk.com']], ['COM', ['http://www.uk.com'],['http://www.michaeljackson.com']]]

b = [['Australia', ['http://www.australia.com']], ['COM', ['http://www.Australia.com'], ['http://www.rafaelnadal.com'], ['http://www.rogerfederer.com']]]

d = defaultdict(list)
d.update((v[0],v[1:]) for v in a)
for v in b:
    country_or_com = v[0]
    urls = v[1:]
    d[country_or_com].extend(urls) 
```

这不完全是您要求的数据结构，但它非常接近（我认为更可取）。

如果您真的想要它的格式（尽管顺序不同）：

```
c = []
for k,v in d.items():
   out = [k]
   out.extend(v)
   c.append(out) 
```

结果是：

```
[['Australia', ['http://www.australia.com']],
 ['COM', ['http://www.uk.com'], ['http://www.michaeljackson.com'],['http://www.Australia.com'], ['http://www.rafaelnadal.com'], ['http://www.rogerfederer.com']],
 ['UK', ['http://www.uk.com']]] 
```

如预期的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:44:27.490

如果您的列表是字典，您只需要合并字典：

```
>>> a = {'UK':'http://www.uk.com', 'COM':['http://www.uk.com','http://www.michaeljackson.com']}
>>> bb = {'Australia': 'http://www.australia.com', 'COM':['http://www.Australia.com', 'http://www.rafaelnadal.com','http://www.rogerfederer.com']}
>>> dict(a.items()+bb.items())
{'Australia': 'http://www.australia.com', 'COM': ['http://www.Australia.com', 'http://www.rafaelnadal.com', 'http://www.rogerfederer.com'], 'UK': 'http://www.uk.com'} 
```

## 更新

到目前为止，我的回答是这样的：

```
>>> sk = list(set(bb.keys()+a.keys()))
>>> sk
['Australia', 'COM', 'UK']
>>> nd
{}

>>> for i in sk: 
...     if i in a.keys():
...        nd[i]=a[i]
... 
>>> nd
{'COM': ['http://www.uk.com', 'http://www.michaeljackson.com'], 'UK': 'http://www.uk.com'}
>>> for i in sk: 
...     if i in bb.keys():
...        nd[i]=bb[i]
... 
>>> nd
{'Australia': 'http://www.australia.com', 'COM': ['http://www.Australia.com', 'http://www.rafaelnadal.com', 'http://www.rogerfederer.com'], 'UK': 'http://www.uk.com'} 
```

我怀疑人们仍然应该使用字典，这是一种 CPU 效率不高的*方法：

```
a = {'UK':'http://www.uk.com', 'COM':['http://www.uk.com','http://www.michaeljackson.com']}
bb = {'Australia': 'http://www.australia.com', 'COM':['http://www.Australia.com', 'http://www.rafaelnadal.com','http://www.rogerfederer.com']}

sk = list(set(bb.keys()+a.keys()))

nd = {}

for i in sk:
    plholder=[]
    if i in a.keys():
        print i
        print isinstance(a[i], str)
        if isinstance(a[i], str):
            plholder.append(a[i])
        else:
            if i in a.keys():
                for v in a[i]: plholder.append(v)
    if i in bb.keys():
        if isinstance(bb[i], str): plholder.append(bb[i])
        else:
            if i in a.keys():
                for v in bb[i]: plholder.append(v)
    nd[i]=plholder
print nd
{'Australia': ['http://www.australia.com'], 'COM': ['http://www.uk.com', 'http://www.michaeljackson.com', 'http://www.Australia.com', 'http://www.rafaelnadal.com', 'http://www.rogerfederer.com'], 'UK': ['http://www.uk.com']} 
```

*非 cpu 效率，因为对于大型数据集追加将非常慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:32:29.890

奇怪的数据结构通常适合潜伏在下面的一些奇怪的恶魔库。为了显而易见，我建议将其转换为适当的数据结构，使用这些数据结构，然后将其转换回来。您可以在奇怪的结构等上使用手工编织联合算法避免实现问题。

首先，使数据体面：

```
a_ = { x[0]: set(e[0] for e in x[1:]) for x in a }
b_ = { x[0]: set(e[0] for e in x[1:]) for x in b } 
```

然后使用它：

```
c_ = defaultdict(set)
for k, v in a_.iteritems():
    c_[k] |= v
for k, v in b_.iteritems():
    c_[k] |= v 
```

然后将其转换回您的奇怪结构：

```
return [[k] + [[e] for e in v] for k, v in c_.iteritems()] 
```

这样我认为真正做了什么是清楚的。

假设：我假设（1）排序顺序并不重要，（2）值只出现一次。如果其中一些不正确，请说明。你的问题太简短了，我不得不做一些解释。

对于不熟悉`sets`独特捷径的人： `c_[k] |= v,`可以写成：
`c_[k] = c_[k].union(v)`.

见[集](http://docs.python.org/library/sets.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:18:18.907

考虑使用不同的数据结构，例如集合字典。

```
a = [['UK', ['http://www.uk.com']], ['COM', ['http://www.uk.com'],['http://www.michaeljackson.com']]]
b = [['Australia', ['http://www.australia.com']], ['COM', ['http://www.Australia.com'], ['http://www.rafaelnadal.com'], ['http://www.rogerfederer.com']]]

# convert these to dictionaries with set values
a = {item[0]:set(s[0] for s in item[1:]) for item in a}
b = {item[0]:set(s[0] for s in item[1:]) for item in b}

# define a function to update our dictionary-of-sets data structure
def union_update_setdict(D, *setdicts):
    """Update dictionary D (with `'key':set(value)` items) with items from setdicts.

    If a new key is added to D from setdicts, a shallow copy of the value
    is added to D.
    """
    for setdict in setdicts:
        for k,v in setdict.items():
            try:
                D[k].update(v)
            except KeyError:
                D[k] = v.copy()

union_update_setdict(a, b)

# Now let's test that the code works

expected = [['UK', ['http://www.uk.com']], ['COM', ['http://www.uk.com'], ['http://www.michaeljackson.com'], ['http://www.Australia.com'], ['http://www.rafaelnadal.com'], ['http://www.rogerfederer.com']], ['Australia', ['http://www.australia.com']]]

# put the "expected" results in our new data structure for comparison
expected = {item[0]:set(s[0] for s in item[1:]) for item in expected}

print a
assert expected == a 
```

如果你真的需要继续使用你糟糕的数据结构，你可以在完成后将其转换回来：

```
terribledatastruct = [[k]+[[item] for item in v] for k,v in a.items()]
print terribledatastruct 
```

# django - 遵循 django 教程时导入错误：没有名为 urls 的模块

> ID：12389363
> 
> 赞同：0
> 
> 时间：2012-09-12T13:32:06.500
> 
> 标签：django

我正在尝试遵循[https://docs.djangoproject.com/en/dev/intro/tutorial01/上的 Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

我创建了自己的模型，如下所示：

```
from django.db import models

class Order(models.Model):
    name = models.CharField(max_length=30)
    quantity = models.IntegerField() 
```

我的 settings.py 看起来像：

```
ROOT_URLCONF = 'lcf.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'lcf.wsgi.application'

TEMPLATE_DIRS = (
# Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
# Always use forward slashes, even on Windows.
# Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
# Uncomment the next line to enable the admin:
 'django.contrib.admin',
# Uncomment the next line to enable admin documentation:
# 'django.contrib.admindocs',
 'lcf',
) 
```

并且 urls.py 看起来像：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Examples:
# url(r'^$', 'tsg.views.home', name='home'),
# url(r'^tsg/', include('tsg.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
 url(r'^admin/', include(admin.site.urls)),
) 
```

但是，运行后 `python manage.py syncdb`

然后运行 `python manage.py runserver`

浏览器显示以下错误：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.4.1
Python Version: 2.6.6
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'lcf')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/staff/nallurv/Envs/tsg/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/home/staff/nallurv/Envs/tsg/lib/python2.6/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/home/staff/nallurv/Envs/tsg/lib/python2.6/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/home/staff/nallurv/Envs/tsg/lib/python2.6/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/home/staff/nallurv/Envs/tsg/lib/python2.6/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named urls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T20:24:53.733

我遇到了同样的错误`Exception Value: No module named urls`（该应用程序运行良好`python manage.py runserver`。事实证明，运行 Apache 的用户无法读取我的 urls.py 文件。因此，您可能需要检查 urls.py 的权限，以确保您在运行时登录的同一用户可以读取它`python manage.py runserver`。一种方法是运行`ls -l`将显示文件所有者和文件权限的命令。如果这是问题所在，则让文件的所有者（或 root 用户）运行命令`chmod a+r urls.py`。

顺便说一句，您发布的文件的内容看起来还不错。它与我所拥有的几乎相同，只是我们的项目名称不同。

# java - 在清单文件中放置用户库的位置

> ID：12389366
> 
> 赞同：1
> 
> 时间：2012-09-12T13:32:12.673
> 
> 标签：java, android, xml, android-manifest, emulation

我正在读一本书，作者要求在清单文件中添加一个用户库和一个用户权限，如下所示：

```
<uses-library android:name=”com.google.android.gtalkservice”/>
<uses-permission android:name=”android.permission.GTALK”/> 
```

我的问题是：

1.  在清单文件中正确放置用户库的位置，我试图将它放在用户权限之后，但 eclipse 高亮显示为错误？
2.  GTALK 用户权限不在用户权限列表中，那么如何添加该用户权限呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:36:54.080

> 在清单文件中正确放置用户库的位置，我尝试将其放置在用户权限之后，但 eclipse highligted 为错误

`<uses-library>`必须是 的孩子`<application>`，并且通常作为第一个孩子出现。

请注意`com.google.android.gtalkservice`，即使它存在，也没有记录。你的书作者不应该宣传它的使用。

> GTALK 用户权限不在用户权限列表中，那么如何添加该用户权限呢？

您不应该使用这样的权限，原因与您不应该使用该库的原因相同。欢迎您尝试简单地将 XML 元素粘贴到您的清单中，但它是否有效则完全是另一回事。似乎没有这样的许可，甚至没有记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:37:48.473

您可能需要带有 Google API 的模拟器才能使用 Gtalk 服务。[清单文档](http://developer.android.com/guide/topics/manifest/manifest-intro.html)说必须在应用程序标签中提及该标签。希望这可以帮助。

# javascript - 将输入键聚焦到特定按钮

> ID：12389367
> 
> 赞同：4
> 
> 时间：2012-09-12T13:32:17.707
> 
> 标签：javascript, jquery, html

我目前面临一个问题。

我需要有一个表格由用户填写，即：

```
field1: <input type='text' name='field1'>
field1: <input type='text' name='field1'>
<input type='button' value='Save' name='Save'> 
```

所以现在我需要在用户填写表单中的最后一个文本框时关注“保存”按钮的方法，这样即使用户点击“输入”按钮，保存事件也会运行。

这通常会自动发生，但问题是我的页面中有很多按钮，现在当用户点击保存另一个点击事件（我不想要的）时会被触发。

所以我的问题是如何控制单击 ENTER 按钮时应该发生的情况，还是应该禁用此事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:36:57.607

实现这一点的方法是使用 javascript，我建议您使用 jQuery。

```
$('#mytextfield').change(function(e) {
    $('input[type=submit]').focus();
}); 
```

您还可以通过添加属性 autofocus="autofocus" 在 HTML5 上自动对焦元素

看看小演示：http: [//jsfiddle.net/9WmQ5/](http://jsfiddle.net/9WmQ5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:37:48.587

您必须将按钮放在表单中

```
<form>
<input type="submit" value='Save' name='Save'>
</form> 
```

这样，当您按 Enter 时，将执行事件，记住 type="submit"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:39:14.900

您可以编写一个函数来监听按下了哪个键

```
function keyPressListener(e) {
        if (e.keyCode == 13) {
                 // do something
    }
} 
```

然后将 onkeypress 属性添加到您的输入文本框

```
onkeypress="keyPressListener(event)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:37:04.740

这可以帮助解决

```
field1: <input type='text' name='field1'>
field1: <input type='text' name='field1' id='last-name'>
<input type='button' value='Save' id='save-btn' name='Save'>

<script>

$(document).ready(function(){
$('#last-name').blur(function(){ $('#save-btn').focus(); });

});

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-10T06:37:23.247

不使用 JQuery，

```
document.getElementById('idName').focus(); 
```

上面的行用于关注您的元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-30T13:38:36.237

在 Form 元素中，您还可以相应地指定按钮类型。与输入“按钮”相比，焦点事件将优先输入“提交”

```
 //HTML
    <form [formGroup]="loginForm">
      <mat-form-field appearance="outline" class="form_field">
        <input formControlName="otpcode" id="otpcode" matInput 
            placeholder="Enter OTP" type="text">
            <mat-error *ngIf="!loginForm.get('otpcode').valid && 
                loginForm.get('otpcode').touched"
                 class="text-danger small position-absolute">This 
                 field is required
            </mat-error>
       </mat-form-field>

      <button type="button" mat-raised-button> Resend OTP </button>
      <button type="submit" mat-raised-button> Login </button>
    </form>

    //TS
   loginForm: FormGroup; 
```

# visual-studio - 在 Visual Studio 2012 中使用 _bin_deployableAssemblies

> ID：12389368
> 
> 赞同：4
> 
> 时间：2012-09-12T13:32:33.833
> 
> 标签：visual-studio, assemblies, visual-studio-2012, webdeploy

在 Visual Studio 2010 中，我使用了 _bin_deployableAssemblies 文件夹来包含第三方程序集，这些程序集应该包含在构建和 Web 部署时的 bin 文件夹中。这是关于网站所需的那些第三方程序集，但您不想引用它们。这太棒了......

现在有了 Visual Studio 2012，它就停止了工作......好吧，它的一部分停止了工作。当我构建时，_bin_deployableAssemblies 文件夹的内容被复制到 bin 文件夹中。但是当我执行 webdeploy 时，例如到我的本地磁盘，这些文件不会发布到输出文件夹的 bin 文件夹。

我在我的 .csproj 文件中使用它：

```
<PropertyGroup>
  <OnAfterCopyAllFilesToSingleFolderForPackage>
    __MoveFilesFromUmbracoSubdirsToBinPackageTemp
  </OnAfterCopyAllFilesToSingleFolderForPackage>
</PropertyGroup>
<Target Name="_CopyBinDeployableAssemblies" Condition="Exists('$(MSBuildProjectDirectory)\_bin_deployableAssemblies')">
  <CreateItem Include="$(MSBuildProjectDirectory)\_bin_deployableAssemblies\**\*.*" Condition="Exists('$(MSBuildProjectDirectory)\_bin_deployableAssemblies')" Exclude="$(MSBuildProjectDirectory)\_bin_deployableAssemblies\**\.svn\**\*">
    <Output ItemName="_binDeployableAssemblies" TaskParameter="Include" />
  </CreateItem>
  <Copy SourceFiles="@(_binDeployableAssemblies)" DestinationFolder="$(OutDir)" SkipUnchangedFiles="true" Retries="$(CopyRetryCount)" RetryDelayMilliseconds="$(CopyRetryDelayMilliseconds)" />
</Target>
<Target Name="__MoveFilesFromUmbracoSubdirsToBinPackageTemp">
  <Message Text="Moving files from bin\umbraco\ and bin\umbraco plugins\ to bin\" Importance="high" />
  <CreateItem Include="$(_PackageTempDir)\bin\umbraco\*.*;$(_PackageTempDir)\bin\umbraco plugins\*.*">
    <Output ItemName="_umbracoItems" TaskParameter="Include" />
  </CreateItem>
  <Move SourceFiles="@(_umbracoItems)" DestinationFolder="$(_PackageTempDir)\bin" />
  <Message Text="Removing bin\umbraco\ and bin\umbraco plugins\ folders" Importance="high" />
  <RemoveDir Directories="$(_PackageTempDir)\bin\umbraco;$(_PackageTempDir)\bin\umbraco plugins" />
</Target> 
```

谁能帮我弄清楚如何在输出文件夹的 bin 文件夹中获取这些程序集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:17:46.653

感谢 Alexey，我找到了解决问题的方法，这就是我现在在 .csproj 文件中使用的内容，以支持为 Filesystem- 和 Webdeploy 复制第三方程序集：

```
<ItemGroup>
    <AvailableItemName Include="ThirdPartyAssemblies">
        <Visible>false</Visible>
    </AvailableItemName>
</ItemGroup>
<Target Name="AfterBuild">
    <Message Text="Build | Copying third party assemblies to output folder ($(OutputPath))" Importance="high" />
    <Copy DestinationFolder="$(OutputPath)" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target>
<Target Name="CopyBinFiles" AfterTargets="CopyAllFilesToSingleFolderForPackage" BeforeTargets="MSDeployPublish">
    <Message Text="Deploy | Copying third party assemblies to output folder ($(_PackageTempDir)\bin\)" Importance="high" />
    <Copy DestinationFolder="$(_PackageTempDir)\bin\" SourceFiles="@(ThirdPartyAssemblies)" SkipUnchangedFiles="true" />
</Target> 
```

来自：[MSBuild 目标和 Visual Studio 2012 问题](https://stackoverflow.com/questions/12520115/msbuild-targets-and-visual-studio-2012-issues/12579589#12579589)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-12T22:33:51.117

假设您在项目属性中设置了**运行此应用程序所需的仅文件**，请确保这些文件包含在项目中并且它们的构建操作是内容。

[http://msdn.microsoft.com/en-us/library/ee942158.aspx#why_dont_all_files_get_deployed](http://msdn.microsoft.com/en-us/library/ee942158.aspx#why_dont_all_files_get_deployed)

# algorithm - 使用距离变换算法的形状突发

> ID：12389370
> 
> 赞同：1
> 
> 时间：2012-09-12T13:32:37.460
> 
> 标签：algorithm, image-processing

我正在开发 HTML5 画布应用程序，该应用程序需要在画布上绘制的形状上创建边框突发效果。它看起来像一个沿形状边界的内部渐变。类似于内部发光过滤器的东西。请在此处查看示例：[http ://www.jhlabs.com/ip/filters/ShapeFilter.html](http://www.jhlabs.com/ip/filters/ShapeFilter.html)

出于我的目的，我还需要在垂直和水平方向上具有不同的渐变速度，例如，水平方向的突发比垂直方向更宽。

我了解到这是使用距离变换算法完成的，并且我在 Jerry Huxtable 的网站上找到了一个 Java 实现，现在我需要弄清楚我需要使用哪些距离度量来在不同方向上产生不同的渐变。

我会很感激任何帮助，因为我在图像处理方面有一点经验。此外，如果我可以使用其他算法，那么很高兴看到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:22:15.147

**几乎**实现 Shape-Burst 渐变的最简单方法。

1.  查找透明像素旁边的所有不透明像素，将它们记录`shortestDistanceToTransparentPixel`为**1**，并将所有周围像素添加到**候选****shortestDistanceToTransparentPixel**为**2**的openList
*****   **处理openList**中的每个像素，始终从最低的**候选**shortestDistanceToTransparentPixel 开始
    1.  如果像素是透明的，或者已经被处理过，则退出
    2.  记录**shortestDistanceToTransparentPixel**，并将所有周围像素添加到**openList**中，候选**shortestDistanceToTransparentPixel**等于该像素使用的值 (+1)****

 ****现在您了解了算法的概念，有一些重要的事情需要注意：

*   这只是形状突发的简单近似。
*   您真的想将对角线添加到您的 openList 中，与对角线像素的距离为 Sqrt(2)。

**关于获得准确的 Shape-Burst 渐变。**

1.  找到透明像素旁边的所有不透明像素，将它们记录`shortestDistanceToTransparentPixel`为**1**，然后将所有这些像素添加到 BSP 树中
2.  对于形状内的每个像素（您已经通过 alpha 测试过），找到最近的像素并计算准确的距离（将像素添加到 BSP 树）。****

# java - 架构决策：来自多个项目的通用登录应用程序？

> ID：12389371
> 
> 赞同：0
> 
> 时间：2012-09-12T13:32:49.647
> 
> 标签：java, maven, architecture, war, vaadin

我需要在我们拥有的多个应用程序（Java webapps）中统一登录屏幕。它基本上是由 Spring Security 保护的 JSP 页面，并且在成功登录时，它会重定向到 VAADIN servlet，它会创建一些通用的应用程序视图。

其他应用程序应该可以添加钩子（扩展我们的通用 vaadin 视图）并提供自定义逻辑。我熟悉 maven 和共享 JAR，但我应该如何共享基本 WAR？是否可以添加某种对应用程序的依赖并继承包括 WEB-INF 本身在内的所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:36:37.050

我认为最好的解决方案是共享一个 jar 文件并让特定的应用程序在 jar 中查找 Spring Security 配置。类似于类路径导入的东西：

```
<import resource="classpath:com/security/shared/securityContext.xml" /> 
```

并确保登录页面使用类路径资源从 jar 加载或转发到具有该页面的单点登录服务器。

[这](http://ocpsoft.org/java/jsf-java/how-to-modular-jsf-applications-with-cdi-and-prettyfaces/)是使用 Java EE 技术（不是 Spring）的模块化应用程序的一个很好的示例，但我认为基本思想将对您的特定问题有所帮助。

# automatic-ref-counting - ACAccount 和 TWRequest 出错

> ID：12389372
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:01.530
> 
> 标签：automatic-ref-counting, twrequest, acaccount

这是我的代码

```
TWRequest *twRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@", kTwitterURLBase, kTwitterMethodHelpConfiguration]]
                                           parameters:nil
                                        requestMethod:TWRequestMethodGET];

[twRequest setAccount:[self twitterAccount]];

[twRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

     // Handling

}]; 
```

方法`twitterAccount`

```
- (ACAccount *)twitterAccount {

    NSString *identifier = [[Session getInstance] selectedAccountIdentifier];
    ACAccount *account = nil;

    if ([identifier length] > 0) {

        ACAccountStore *accountStore = [[ACAccountStore alloc] init];
        account = [accountStore accountWithIdentifier:identifier];
    }

    return account;
} 
```

正如调试器所说，该帐户已正确返回，但是当我在控制台中打印它时，我什么也没得到，一个空格；但是帐户对象有一个引用。

就在请求开始执行后，我收到一个 EXC_BAD_ACCESS 错误。堆栈说发送错误消息时发生错误`[ACAccount accountType]`。

很明显这是一个内存问题，而且我是 ARC 的新手，所以我想问题会在那里。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:07:27.363

我不知道为什么我必须这样做，但是如果我为 ACAccountStore 声明一个实例变量以保留并以这种方式更改方法

```
- (ACAccount *)twitterAccount {

    NSString *identifier = [[Session getInstance] selectedAccountIdentifier];
    ACAccount *account = nil;

    if ([identifier length] > 0) {

        if (accountStore_ == nil) {

            accountStore_ = [[ACAccountStore alloc] init];
        }

        account = [accountStore_ accountWithIdentifier:identifier];
    }

    return account;
} 
```

一切都很完美。为什么？:\

# r - 情节情节的一天中的时间分布

> ID：12389374
> 
> 赞同：3
> 
> 时间：2012-09-12T13:33:16.930
> 
> 标签：r

我正在测量某些工作站中一集的持续时间。我有剧集开始和剧集结束的时间戳。我想画一个图，y 轴是一天中的时间，x 轴是观察日。任何想法我怎么能做到这一点？

例如我有

```
 id  start               end
    1   01/01/2010 10:00:00 02/01/2010 22:00:00
    1   04/01/2012 08:00:00 04/01/2012 14:00:00 
```

我想构建一个像附件一样的情节

![阴谋](../Images/bc7a704f2428eb1130963bd6b556acad.png)

任何想法我怎么能做到这一点？与所附图表不同，我希望在图表中具有微小的准确性/表示。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T22:36:47.787

首先，您的示例数据不可重现；我假设日期是日/月/年，但如图所示很难说。此外，日期类型在 中是特殊的`R`，因此了解您拥有的类型很重要。因此，首先，我将创建一个类似的可重现数据集：

```
DF <-
structure(list(id = c(1L, 1L), start = structure(c(1262340000, 
1262592000), class = c("POSIXct", "POSIXt"), tzone = "GMT"), 
    end = structure(c(1262469600, 1262613600), class = c("POSIXct", 
    "POSIXt"), tzone = "GMT")), .Names = c("id", "start", "end"
), row.names = c(NA, -2L), class = "data.frame") 
```

看起来像

```
> DF
  id               start                 end
1  1 2010-01-01 10:00:00 2010-01-02 22:00:00
2  1 2010-01-04 08:00:00 2010-01-04 14:00:00 
```

现在，要绘制这个，我们需要做一些转换。日期和时间必须分开，因为它们被绘制在不同的轴上。

```
library("chron")
library("plyr")
DF$start.day <- as.Date(DF$start)
DF$end.day <- as.Date(DF$end)
DF$start.time <- as.chron(DF$start) - floor(as.chron(DF$start))
DF$end.time <- as.chron(DF$end) - floor(as.chron(DF$end)) 
```

此外，日期必须转换为经过的日期。

```
t0 <- min(DF$start.day, DF$end.day)-1
DF$start.monitored.day <- as.numeric(DF$start.day - t0)
DF$end.monitored.day <- as.numeric(DF$end.day - t0) 
```

最后，跨越午夜的时间段必须分成多个范围，以便每个范围都包含在给定的一天内。这一步不是很简单。

```
DF$index <- seq_len(nrow(DF))
DF <- ddply(DF, .(index), function(df) {
  if(df$start.monitored.day == df$end.monitored.day) {
    df 
  } else {
    data.frame(start.monitored.day = df$start.monitored.day : df$end.monitored.day,
               end.monitored.day = df$start.monitored.day : df$end.monitored.day,
               start.time = c(df$start.time, rep(times("00:00:00"), df$end.monitored.day-df$start.monitored.day)),
               end.time = times(c(rep(times("23:59:59"), df$end.monitored.day-df$start.monitored.day), df$end.time)),
               id = df$id,
               index = df$index)
  }
}) 
```

现在数据是可以绘制的格式。

```
> DF[c("start.monitored.day", "end.monitored.day", "start.time", "end.time")]
  start.monitored.day end.monitored.day start.time end.time
1                   1                 1   10:00:00 23:59:59
2                   2                 2   00:00:00 22:00:00
3                   4                 4   08:00:00 14:00:00 
```

我将使用它`ggplot`来绘制它，因为我对它更熟悉，并且因为我[以前在时间尺度上做过一些工作](http://blog.ggplot2.org/post/29433173749/defining-a-new-transformation-for-ggplot2-scales-part)。

取自那篇博文

```
library("ggplot2")
library("scales")
timesreverse_trans <- function() {
    trans <- function(x) {-as.numeric(x)}
    inv <- function(x) {times(-x)}
    fmt <- function(x) {
        notone <- x != 1
        simplify <- !any(diff(x) < 1/(24*60))
        ifelse(notone, 
               format(x-floor(x), simplify=simplify),
               ifelse(simplify, "24:00", "24:00:00"))
    }
    trans_new("chrontimes-reverse",
              transform = trans,
              inverse = inv,
              breaks = pretty_breaks(),
              format = fmt,
              domain=c(0,1))
}
scale_y_times <- function(..., trans=NULL) {
    scale_y_continuous(..., trans=timesreverse_trans())
} 
```

这只是留下了实际的情节

```
ggplot(DF) +
  geom_rect(aes(xmin = start.monitored.day - 0.5,
                xmax = start.monitored.day + 0.5, 
                ymin = start.time,
                ymax = end.time)) +
  scale_y_times("Time") +
  scale_x_continuous("Monitored day") 
```

![在此处输入图像描述](../Images/8ef0c0c0682f3c11d92d53bf778d2ede.png)

# wpf - 在 View 中引发 EventTrigger 时调用 ViewModel 中的方法

> ID：12389378
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:23.360
> 
> 标签：wpf, mvvm, .net-3.5

当在视图中引发 EventTrigger 时，我想调用 ViewModel 的方法。我想做类似的事情，但是在我的 xaml 代码中的**MVVM中：**

```
public partial class MyView : UserControl
{
    public MyView()
    {
        InitializeComponent();
        this.Loaded +=new System.Windows.RoutedEventHandler(ViewLoaded);
    }

    private void ViewLoaded(object sender, RoutedEventArgs e)
    {
        ((MyViewModel)this.DataContext).BeginWork();
    }
} 
```

我的应用程序是使用 WPF 3.5 构建的，我不能使用 Blend SKD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:41:28.607

创建一个 DependencyProperty 类型`ICommand`，例如将其称为“BeginWorkCommand”。在您的视图模型旁边创建一个新类，或使用[DelegateCommand](http://wpftutorial.net/DelegateCommand.html)直接在您的视图模型中使用它。最后将此视图模型命令绑定到您创建的依赖项属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:42:09.807

[在此处](http://www.galasoft.ch/mvvm/)使用`GalaSofts` `EventToCommand`MVVM Light Toolkit

```
 <i:Interaction.Triggers>
            <i:EventTrigger EventName="Loaded">
                <WPFActions:EventToCommand Command="{Binding LoadedCommand}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers> 
```

LoadedCommand 是在您的 ViewModel 中实现的命令

```
public class MyViewModel
{
    private readonly ICommand loadedCommand;

    public ICommand LoadedCommand { get { return loadedCommand; } }

    public MyViewModel()
    {
        loadedCommand = new RelayCommand(myLoadedHandler);
    }

    //...
} 
```

RelayCommand 也是工具包的一部分。

# ruby-on-rails-3 - 带有动态字段的 Rails 3 远程重新提交表单

> ID：12389380
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:39.463
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

我有一个表格`remote => true`。当我第一次提交时，一切正常。

如果有任何错误，我想在此表单中添加新字段。我用`update.js.erb`.

问题是当我重新提交此表单时，结果 js 文件呈现为 html（即我在屏幕上看到 js 文件文本）。这是`update.js.erb`第一次呈现为 js 的同一个文件...

知道我缺少什么吗？

更新：第一次尝试时，格式为：

```
format
=> #<ActionController::MimeResponds::Collector:0xc61711c
 @order=[text/javascript],
 @responses={text/javascript=>nil}> 
```

在第二次提交时，它是：

```
format
=> #<ActionController::MimeResponds::Collector:0xceaadec 
@order=[], 
@responses={}> 
```

我的 update.js 基本上就是

```
$("#checkout_modal").html("<%= escape_javascript(render 'plan_pay_modal')%>"); 
```

并且 plan_pay_modal 与原始页面上的部分相同（如果有错误，将显示新字段的表单。我也尝试了相同的字段问题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:41:46.817

原来问题是我是通过jquery提交的

```
form$.get(0).submit() 
```

在这种情况下不起作用...要开始工作，我必须使用

```
form$.trigger("submit.rails") 
```

[rails 3 如何使用 jquery 提交远程表单并避免回调](https://stackoverflow.com/questions/12394814/rails-3-how-do-i-submit-a-remote-form-with-jquery-and-avoid-callbacks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:36:45.967

如果您在 Web 浏览器中看到 javascript 作为内容，则意味着您的浏览器发送的请求是普通的 html 请求，而不是 ajax 请求。这反过来意味着表单由于某种原因在您第二次提交时未设置为 :remote => true 。我建议您调查一下为什么会这样或粘贴一些代码，以便我可以进一步帮助您。

您可以通过在控制器操作中做出这样的响应来验证我所说的是否正确：

```
respond_to do |format|  
  format.html  { raise "Request is not ajax based!" }
  format.js { render 'update' }
end 
```

编辑：

第二个帖子看起来不正确，因此 update.js.erb 可能会修改表单，使其无法再正常工作。为什么不渲染以前在模态中的相同内容。换句话说，最初在页面上您在模态中显示部分内容，然后 update.js.erb 只是重新呈现该部分内容并替换模态内容。如果有错误，您可以在部分中激活新添加的动态字段。

# php - $_REQUEST 没有索引

> ID：12389382
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:55.260
> 
> 标签：php, optimization

我正在使用带有`$_REQUEST`数组的查询字符串，每次我想访问任何键时，我都使用这个条件

```
if(array_key_exists('scene_id', $_REQUEST)) 
```

有什么方法可以直接使用`$_REQUEST["scene_id"]`而不会出现任何警告和错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:37:03.740

当然，您可以将其包装在您自己的函数中：

```
function request($key, $default=null) {
    return isset($_REQUEST[$key])
        ? $_REQUEST[$key]
        : $default;
}

echo request('scene_id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:35:21.117

使用[isset](http://ca3.php.net/manual/en/function.isset.php)：

```
if(isset($_REQUEST['scene_id'])) 
```

或者

```
$scene_id = isset($_REQUEST['scene_id']) ? $_REQUEST['scene_id'] : null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:35:48.653

最喜欢的方法是使用[isset](http://php.net/manual/en/function.isset.php) `if(isset($_REQUEST['scene_id']))`但您实际上可以使用`@`符号来抑制错误消息，但请注意该错误仍然存​​在并且需要正确处理它

来自 PHP 文档

`PHP supports one error control operator: the at sign (@). When prepended to an expression in PHP, any error messages that might be generated by that expression will be ignored.`

示例 1

```
if(@$_REQUEST['scene_id'])
{
    echo "ok" ;
} 
```

示例 2（过滤器、验证或异常）

```
try {
    if (!isset($_REQUEST['scene_id']))
        throw new Exception("Missing Scene ID");

    if (!filter_var($_REQUEST['scene_id'], FILTER_SANITIZE_NUMBER_INT))
        throw new Exception("Only Valid Number Allowed");

    echo "Output ", $_REQUEST['scene_id'];
} catch ( Exception $e ) {
    print $e->getMessage();
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:38:45.300

您可以在测试之前使用默认值预填充 $_REQUEST：

```
$expected = array(
    'scene_id'=>false,
    'another_var'=>'foo',
);

foreach($exptected as $key=>$default) {

    if (!isset($_REQUEST[$key])) {
        $_REQUEST[$key] = $default;
    }

}

if ($_REQUEST['scene_id') {
    // do stuff
} 
```

# javascript - 如果不在 'div' 中，则在 'li' 中查找 .closest

> ID：12389383
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:56.250
> 
> 标签：javascript, jquery

我正在使用最接近的方法在 div 中查找属性：

```
 .closest($('div[my-attribute]')); 
```

该属性也可以存在于 li 元素中：

```
 .closest($('li[my-attribute]')); 
```

如果在 div 中找不到属性，那么在 'li' 中找到属性的优雅方法是什么？

就像是：

```
var closest = myDiv.closest($('div[my-attribute]'));
if(closest == null){
    closest = myDiv.closest($('li[my-attribute]'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:39:34.413

这将返回包含属性“my-attribute”的最接近的父母，无论天气如何，元素是 div、li（或其他任何东西）。

```
var closest = myDiv.closest('[my-attribute]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:26:51.500

`.closest('div[my-attribute], li[my-attribute]');`应该管用。

请注意，`.closest`它会向上遍历 dom 树，因此它只会检查基本选择器的祖先。

IE：如果你有这样的结构：`div > ul > (li > a, li > a, li > a)`

那么`$("ul").closest("li")`将一无所获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:37:15.880

```
var closest = myDiv.closest($('div[my-attribute]')) || myDiv.closest($('li[my-attribute]')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:41:33.840

您可以只使用`*`来选择任何元素。

```
$('*[my-attribute]') 
```

演示：http: [//jsfiddle.net/eZbN7/](http://jsfiddle.net/eZbN7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T13:38:18.230

您可以在 jQuery 中用逗号分隔多个选择器。

[http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

# ember.js - 状态的 Enter 方法中的 Ember 状态未完全更改，仍处于先前状态

> ID：12389384
> 
> 赞同：2
> 
> 时间：2012-09-12T13:33:56.607
> 
> 标签：ember.js, statechart

我试图在进入状态时直接调用一个动作。（实际上在我的应用程序中，我试图对我的状态的父状态调用一个操作，但最终结果是相同的。）

在我的应用程序中，我从 StateOne 过渡到 StateTwo。当我进入我的状态 StateTwo 时，我调用 manager.send("myStateTwoAction")。但是，我立即收到错误消息

```
Uncaught Error: <Ember.StateManager:ember1424> 
  could not respond to event myStateTwoAction in state StateOne. 
```

请注意，这是*在我的 StateTwo 输入方法*中。

这是我的 jsFiddle：http: [//jsfiddle.net/SamFent/YGX2Y/](http://jsfiddle.net/SamFent/YGX2Y/)

有谁知道是否有办法从新状态的 enter 方法中调用状态的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:49:01.377

您不能在`enter`方法中调用状态操作。正如您在此处看到的：[https](https://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js#L861) ://github.com/emberjs/ember.js/blob/master/packages/ember-states/lib/state_manager.js#L861 currentState 在调用 enter 方法后设置。但是您可以实现在`setup`进入状态后立即调用女巫的方法。

```
App.StateTwo = Ember.State.extend({
  enter: function(manager) {
    $("#states").append("<p>State two</p>");
  },
  setup: function(manager){
    manager.send("goToThree");
  },
  goToThree: function(manager) {
    $("#states").append("<p>=> going to three...</p>");
    manager.transitionTo("stateThree");
  }
}), 
```

见：http: [//jsfiddle.net/YGX2Y/2/](http://jsfiddle.net/YGX2Y/2/)

我希望这对你有用。

# objective-c - SDL 窗口顶部的 UITableViewController 不接受点击

> ID：12389387
> 
> 赞同：0
> 
> 时间：2012-09-12T13:33:59.147
> 
> 标签：objective-c, ios, uitableview, sdl

对于在 iOS 上移植使用 SDL 的专家：

我正在使用 SDL 2.0。

我能够在 SDL 主窗口顶部显示一个简单的 ViewController / NavigationController，显示一些标签和按钮。回调工作，到目前为止一切顺利。

现在我希望能够在前一个视图控制器之上推送一个辅助 TableViewController。它显示得很好，填充了数据 - 所以一些委托方法可以工作。

但是 - TableViewController 不接受点击。didSelectRowAtIndexPath 方法永远不会被调用。tableView 的委托是正确的，因为它设置为 TableViewController 本身。

如果我在任何其他 iOS 项目中使用相同的 TableViewController 代码，它就会完美运行。

这实际上不是一个特定的 UITableViewController 问题 - 我遇到了与 UIPickerView 控件相同的问题，它也没有工作，好像忽略了一些委托回调......

我该怎么做才能让整个事情开始？在哪些情况下 UITableViewController 会忽略点击/选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:55:40.763

知道了。

SDL 搞乱了消息循环。有关详细信息，请参阅此修复：

[https://bitbucket.org/DavidLudwig/sdl/changeset/50df56423bee](https://bitbucket.org/DavidLudwig/sdl/changeset/50df56423bee)

# php - PHP time() 和 strtotime() DST 的区别

> ID：12389391
> 
> 赞同：3
> 
> 时间：2012-09-12T13:34:10.033
> 
> 标签：php, time, strtotime, dst

只是一个快速的。在我的网站上，我有几种不同的方法将日期存储在数据库中。对于自动创建的日期（即注册时间等），我使用 time()。

但对于手动输入的日期，我使用`strtotime()`.

问题是， with`date_default_timezone_set('UTC')` `strtotime()`是正确的，但`time()`晚了一个小时。

反之亦然`date_default_time_set('Europe/London')` `time()`是正确的，但`strtotime()`晚了一个小时。

我需要两者都是正确的，以某种方式，当我们离开 DST 时我不必更改我的代码。解决此问题的最佳方法是什么。

干杯， RJ

# android - 在真机上运行的安卓应用程序崩溃了

> ID：12389392
> 
> 赞同：1
> 
> 时间：2012-09-12T13:34:10.487
> 
> 标签：android, eclipse

我尝试在设备上运行我的 android 应用程序，但我的登录崩溃了。logcat 显示此错误

```
09-12 21:32:12.289: E/AudioHardwareALSA(149): RE-OPEN AFTER STANDBY:: took 115 msecs
09-12 21:32:12.319: E/AndroidRuntime(4760): FATAL EXCEPTION: main
09-12 21:32:12.319: E/AndroidRuntime(4760): android.os.NetworkOnMainThreadException
09-12 21:32:12.319: E/AndroidRuntime(4760):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at com.stts.sparetimetradingsystem.library.JSONParser.getJSONFromUrl(JSONParser.java:44)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at com.stts.sparetimetradingsystem.library.UserFunctions.loginUser(UserFunctions.java:40)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at com.stts.sparetimetradingsystem.LoginActivity$Login$1.run(LoginActivity.java:125)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at android.os.Handler.handleCallback(Handler.java:605)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at android.os.Looper.loop(Looper.java:137)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at java.lang.reflect.Method.invokeNative(Native Method)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at java.lang.reflect.Method.invoke(Method.java:511)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
09-12 21:32:12.319: E/AndroidRuntime(4760):     at dalvik.system.NativeStart.main(Native Method) 
```

我哪里做错了？

**编辑**

这是我在异步任务中的登录代码，我可以知道我的异步任务是否正确编码：

```
// Background ASYNC Task to login by making HTTP Request
class Login extends AsyncTask<String, String, String> {

    // Before starting background thread Show Progress Dialog
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Authenticating...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    // Checking login in background
    protected String doInBackground(String... params) {
        runOnUiThread(new Runnable() {
            public void run() {

                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.loginUser(email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if (Integer.parseInt(res) == 1) {
                            validUser = true;
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(
                                    getApplicationContext());
                            JSONObject json_user = json
                                    .getJSONObject("user");

                            // Clear all previous data in database
                            userFunction
                                    .logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME),
                                    json_user.getString(KEY_EMAIL),
                                    json.getString(KEY_UID),
                                    json_user.getString(KEY_CREATED_AT));
                        } else {
                            // Error in login
                            loginErrorMsg
                                    .setText("Incorrect username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

            }
        });
        return null;
    }

    // After completing background task Dismiss the progress dialog
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
        if (validUser == true) {
            loginErrorMsg.setText("");
            // Launch HomePage Screen
            Intent homepage = new Intent(getApplicationContext(),
                    HomepageActivity.class);

            // Close all views before launching HomePage
            homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(homepage);

            // Close Login Screen
            finish();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:36:56.443

从 android 3.0(Honeycomb) 开始，Android 不允许在主线程上进行网络调用。所以你必须使用 Asynctask 进行网络调用。

要摆脱这种情况，您需要使用 AsynTask 进行网络调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T13:43:42.277

您正在使用 AsyncTask，但在 doInBackground 中，您实际上是通过以下方式执行网络代码：

```
 runOnUiThread(new Runnable() { } 
```

这就是您最终遇到此异常的原因，您需要在没有它的情况下执行您的网络代码。我猜你这样做是为了引用应用程序上下文，但是通过 AsyncTask 构造函数提供它相当简单。

# apache - Maven 不从 Apache Repository 加载 OpenJPA

> ID：12389399
> 
> 赞同：0
> 
> 时间：2012-09-12T13:34:32.047
> 
> 标签：apache, maven, repository

我想在我的应用程序中使用 openjpa。

当我使用 Maven 时，我在 pom.xml 中添加了以下条目：

```
<repositories>
    <repository>
        <id>central</id>
        <url>http://repo.maven.apache.org/maven2/</url>
    </repository>       
</repositories>
</dependencies>
    <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa</artifactId>
            <version>2.2.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-persistence</artifactId>
            <version>2.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-persistence-jdbc</artifactId>
            <version>2.2.0</version>
            <scope>provided</scope>
        </dependency>

</dependencies> 
```

我在 Linux 上使用 STS，并通过上下文菜单更新了所有依赖项，但 maven 没有从存储库中获取一个文件。/M2 目录不包含任何 openjpa 源。

我究竟做错了什么？

还有其他存储库和依赖项，但 openjpa 不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:51:21.857

您可以尝试使用 -U 选项运行 mvn。这将迫使 Maven 更新其存储库索引。

运行 maven 命令时，是否会打印一些有关下载这些依赖项的信息？

如果问题仍然存在，请尝试使用 -X 选项运行以进行详细构建并查看会发生什么。如果需要帮助，可以在此处发布输出

# magento-1.5 - “eav_entity_type”表中缺少 Magento 实体类型

> ID：12389403
> 
> 赞同：1
> 
> 时间：2012-09-12T13:34:41.297
> 
> 标签：magento-1.5, magento-1.6, magento-1.7

“eav_entity_type”表中缺少诸如 quote_item、order_item、order_type_id 等实体类型。由于这个问题，我无法集成 Magento Made to Order (MTO) 模块。我的版本是 1.7.0.2。

# objective-c - 如何使用 KVC 更改 UIButton 的标题？

> ID：12389410
> 
> 赞同：1
> 
> 时间：2012-09-12T13:34:57.957
> 
> 标签：objective-c, uibutton, key-value, key-value-coding, kvc

我有一个 UIButtons 数组，并且想一次将它们的所有标题设置为特定值，**而不是遍历**数组。我发现的唯一解决方案是通过键值编码，即这样的：

```
[self.board setValue:@"X" forKeyPath:@"titleLabel.text"]; 
```

但是，按钮的**titleLabel**属性是只读的，不能更改。我也尝试使用按钮的**标题**属性作为键路径，但它也不起作用。

我之前通过使用 KVC 一次更改所有按钮的“启用”属性来完成此操作，效果很好，但是如果我想更改标题，它就不起作用（我假设这是因为UIButton 的新 ControlState 功能，允许为其各种状态提供多个标题）。

那么，有没有人有一个单行解决方案（没有循环）来更改数组中每个按钮的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:34:37.620

实际上，KVC 正在工作并且正在设置您的文本值。来自 Apple 文档：**虽然此属性是只读的，但它自己的属性是读/写的。使用这些属性来配置按钮标签的外观**所以 textLabel 是一个*UILabel*并且 UILabel 上的*text**属性*不是只读的。它似乎不起作用的原因是您只更改了 UILabel 的文本，而不是默认值为 (0, 0, 0, 0) 的标签的帧大小。例如，如果您使用默认值“（*三个空格*）”初始化按钮（而不是*nil****) 那么它将起作用。（但是，iOS 在单击按钮后将按钮值重置为其初始值似乎仍然存在问题）***

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T15:50:43.463

如果您对子类化没问题，您可以使您的按钮 KVC 符合标题属性。出于您的目的，实现`-set<Key>:`方法就足够了，但是在 Swift 中，您可以通过定义一个计算属性来实现这`-<key>`两者`-set<Key>:`。

```
class KVCButton: UIButton {

    var titleForNormalState: String? {
        get {
            return titleForState(.Normal)
        }
        set {
            setTitle(newValue, forState: .Normal)
        }
    }
} 
```

然后只需调用`[self.board setValue:@"X" forKeyPath:@"titleForNormalState"];`.

[您可以在此处](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)找到有关确保 KVC 合规性的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-21T12:17:46.953

我知道这是个老问题，但我使用解决方案为 IBOutletCollection(UIButton); 设置 textColor; 和将文本设置为按钮类似；

正如 John Dalton 提到的，按钮属性是只读的，因此无法使用 KVC；但是如果您按类别为 UIButton 定义一个新属性，然后通过 KVC 添加文本（在我的情况下为文本颜色），这是可能的；

添加新文件-> 选择 Objective-c 文件

名称：物业（由您选择）

文件类型：类别

类：UIButton

将创建两个名为 *UIButton+Property.h/.m的文件*

。H

```
@interface UIButton (Property)

@property (nonatomic, retain) UIColor *textColor;

- (void)setTextColor:(UIColor *)textColor;
@end 
```

.m

```
#import "UIButton+Property.h"

@implementation UIButton (Property)

- (void)setTextColor:(UIColor *)textColor {
    [self setTitleColor:textColor forState:UIControlStateNormal];
}

- (UIColor *)textColor {
    return self.textColor;
}
@end 
```

在班上：

```
@property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *preLoginLbls; 
```

. . .

```
[_preLoginBtns setValue:TEXT_COLOR forKey:@"textColor"]; 
```***

# wpf - 绑定命令不起作用

> ID：12389414
> 
> 赞同：1
> 
> 时间：2012-09-12T13:35:08.603
> 
> 标签：wpf, binding, command

我是 WPF 开发的初学者。我创建了一些带有框架的窗口。我为框架编写了一个模板，我试图绑定到框架模板命令中的按钮但没有成功。

看下一段代码：

```
 <Grid.Resources>
<ControlTemplate TargetType="Frame" x:Key="NavigationButtonsTemplates">
                <DockPanel>
                    <StackPanel 
            Margin="7"
            Orientation="Horizontal"
            DockPanel.Dock="Bottom"
            HorizontalAlignment="Right"
            >
                        <Button 
                Content="Back" 
                Command="{x:Static NavigationCommands.BrowseBack}"  
                Margin="5,0,5,0" Width="80" />

                        <Button 
                Content="Next" 
                Command="{Binding Path=NavigateToPersonalDataCommand}"
                Margin="5,0,5,0" Width="80"></Button>
                    </StackPanel>
                    <Border 
            BorderBrush="LightBlue"
            Margin="7,8,9,0"
            BorderThickness="7"
            Padding="5"
            CornerRadius="7"
            Background="White"
            >
                        <ContentPresenter />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Grid.Resources> 
```

按钮的绑定似乎不起作用。当我把按钮放在标签外面时，它工作得很好。如何将命令绑定到位于 中的按钮？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:50:37.213

你`ControlTemplate`需要有一个`DataContext`. 尝试更改`DockPanel`元素以绑定到`DataContext`模板框架上的属性。这假定`Frame`正在模板化的`DataContext`.

```
<DockPanel DataContext="{Binding DataContext, RelativeSource={RelativeSource TemplatedParent}}"> 
```

或者

```
<DockPanel DataContext="{TemplateBinding DataContext}"> 
```

**编辑：**

尝试运行您的代码后，我发现了问题。您在 XAML 中绑定的属性与您的视图模型上的属性不匹配。

更改 XAML 以绑定到视图模型上的属性名称可以解决问题。

由此：

```
Command="{Binding Path=NavigateNext}"
Command="{Binding Path=NavigateToPersonalData}" 
```

对此：

```
Command="{Binding Path=BrowseNext}"
Command="{Binding Path=NavigateToPersonalDataCommand}" 
```

匹配您的视图模型属性：

```
public ICommand BrowseNext
{
    get
    {
        return m_BrowseNext;
    }
    set
    {
        m_BrowseNext = value;
    }
}

public ICommand NavigateToPersonalDataCommand
{
    get
    {
        return m_PersonalDataCommand;
    }
    set
    {
        m_PersonalDataCommand = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T19:10:34.913

这是 Xaml 代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TestProj"
    x:Class="TestProj.MainView"
    x:Name="Window"
    Title="MainView"
    Width="640" Height="480">
    <Window.DataContext>
        <local:NavigationViewModel/>
    </Window.DataContext>

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="0.25*"/>
            <RowDefinition Height="0.25*"/>
            <RowDefinition Height="0.25*"/>
            <RowDefinition Height="0.25*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.20*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Grid.Resources>
            <ControlTemplate TargetType="Frame" x:Key="NavigationButtonsTemplates">
                <DockPanel DataContext="{TemplateBinding DataContext}">
                    <StackPanel 
            Margin="7"
            Orientation="Horizontal"
            DockPanel.Dock="Bottom"
            HorizontalAlignment="Right"
            >
              <Button 
                Content="Back" 
                Command="{Binding Path=NavigateNext}"
                Margin="5,0,5,0" Width="80" />

                        <Button 
                Content="Next" 
                Command="{Binding Path=NavigateToPersonalData}"

                Margin="5,0,5,0" Width="80"></Button>
                    </StackPanel>
                    <Border 
            BorderBrush="LightBlue"
            Margin="7,8,9,0"
            BorderThickness="7"
            Padding="5"
            CornerRadius="7"
            Background="White"
            >
                        <ContentPresenter />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Grid.Resources>

        <Button Content="Opening" Grid.Row="0"></Button>
            <Button Content="Personal Data" Grid.Row="1"></Button>
        <Button Content="Business Data" Grid.Row="2"> </Button>
        <Button Content="Summery Report" Grid.Row="3"></Button>

        <DockPanel Grid.Column="2" Grid.RowSpan="4">
            <Frame x:Name="mainFrame" Template="{StaticResource NavigationButtonsTemplates}"/>

        </DockPanel>
    </Grid>
</Window> 
```

这是我如何编写命令的：

```
class NavigationViewModel
    {
        private ICommand m_BrowseNext;
        public ICommand BrowseNext
        {
            get
            {
                return m_BrowseNext;
            }
            set
            {
                m_BrowseNext = value;
            }
        }

        private ICommand m_PersonalDataCommand;
        public ICommand NavigateToPersonalDataCommand
        {
            get
            {
                return m_PersonalDataCommand;
            }
            set
            {
                m_PersonalDataCommand = value;
            }
        }

        public NavigationViewModel()
        {
            BrowseNext = new RelayCommand(new Action<object>(NavigateNext));
            NavigateToPersonalDataCommand = new RelayCommand(new Action<object>(NavigateToPersonalData));
        }

        public void NavigateToPersonalData(object obj)
        {
            MainView.Instance.GetMainFrame.Navigate(Pages.Opening.Instance);
        }

        public void NavigateNext(object obj)
        {
            MainView.Instance.GetMainFrame.Navigate(Pages.PersonalData.Instance);
        }
   } 
```

当我将按钮移到命令之外时效果很好，所以我认为问题出在 XAML 中。

谢谢！！！

# sql - 编写此查询的更好方法是什么？

> ID：12389417
> 
> 赞同：4
> 
> 时间：2012-09-12T13:35:10.960
> 
> 标签：sql

我有一个简单的连接查询，如下所示。

```
select * 
from user u left join 
     user_roles ur 
     on  ur.user_id = u.user_id 
     and ur.created_by = 'Mike'
where u.division = 'some division' 
```

或者

```
select * 
from user u left join 
     user_roles ur 
     on  ur.user_id = u.user_id 
where u.division = 'some division' 
and   ur.created_by = 'Mike' 
```

重点是我已将附加过滤子句条件从左连接移至 where 子句。

如果我在多列上加入两个表或将其放在 where 子句中，会有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:38:06.307

是的，它有很大的不同。

您基本上取消了左连接并使其成为内部连接，隐藏了不是由 Mike 创建的用户角色

```
Bell Mike
Toe Mike
Bob Jerry 
```

第一个查询返回

```
Bell Mike
Toe Mike
Bob NULL 
```

第二个查询返回

```
Bell Mike
Toe Mike 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T13:37:29.813

是的 - 它有重要的不同

连接表上的任何过滤器都应该在连接中以使其正常工作 - 即：前者将工作，第二个则不会。

尝试以下（SQL Server 语法）以查看结果有何不同

```
declare @u table (user_id int, division varchar(20))
declare @ur table (user_id int, created_by varchar(10))

insert @u values (1,'sales'), (2,'marketing'), (3,'engineering')

insert @ur values (1, 'mike'), (3,'james'), (3,'mike')

select * from @u u  
left join @ur ur on ur.user_id = u.user_id and ur.created_by = 'Mike' 

select * from @u u  
left join @ur ur on ur.user_id = u.user_id 
where ur.created_by = 'Mike' 
```

# javascript - 如何摆脱代码中的未定义和其他问题？

> ID：12389420
> 
> 赞同：3
> 
> 时间：2012-09-12T13:35:14.057
> 
> 标签：javascript, undefined, blackjack

我已经在一千次不同的时间里尝试过一千种不同的方式，但我的 JS 代码不会按照我想要的方式出现。当我在 Mozilla 暂存器中运行它时，我得到“userHand 未定义”，第二个 printHand 也显示为未定义。有人可以告诉我二十一点游戏中的错误在哪里吗？

```
function Card (s, n) {
    var suit = s;
    var number = n;
    this.getNumber = function () {
        return number;
    };
    this.getSuit = function () {
        return suit;
    };
    this.getValue = function () {
        if (number > 10) {
            return 10;
        } else if (number === 1) {
            return 11;
        } else {
            return number;
        }
    };
}

var cardNames = {1:"Ace", 2:"2", 3:"3", 4:"4", 5:"5", 6:"6", 7:"7", 8:"8", 9:"9", 10:"10", 11:"Joker", 12:"Queen", 13:"King"};
var suitNames = {1:"Clubs", 2:"Diamonds", 3:"Hearts", 4:"Spades"};

var deal = function () {
    var s = Math.floor(Math.random() * 4 + 1);
    var n = Math.floor(Math.random() * 13 + 1);
    return new Card(s, n);
};

function Hand(){
    var cards = [];
    cards.push(deal());
    cards.push(deal());
    this.getHand = function () {
        return cards;
    };
    this.score = function () {
        var score;
        for (i = 0; i < cards.length; i++) {
            score = score + cards[i].getValue();
        }
        for (i = 0; i < cards.length; i++) {
            if (score > 21 && cards[i].getValue() === 11) {
                score = score - 10;
            }
        } return score;
    };
    this.printHand = function () {
        for (i = 0; i < cards.length; i++) {
            var hand;
            if (i === 0) {
            hand = cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            } else {
            hand = hand + " and a " + cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            }
        } alert(hand);
    };
    this.hitMe = function () {
        cards.push(deal());
    };
}

var playAsDealer = function () {
    var playDealer = new Hand();
    while (playDealer.score() < 17) {
        playDealer.hitMe();
    }
    this.printHand = function () {
    return playDealer.printHand();
    };
    this.score = function () {
    return playDealer.score();
    };
};

var playAsUser = function () {
    var playUser = new Hand();
    this.printHand = function () {
    return playUser.printHand();
    };
    this.score = function () {
    return playUser.score();
    };
    var decision = confirm("Your hand is " + playUser.printHand() + ". Click OK to hit or Cancel to stand");
    for (i = 0; decision !== false; i++) {
        playUser.hitMe();
        decision = confirm("Your hand is " + playUser.printHand() + ". Click OK to hit or Cancel to stand");
    }
};

var declareWinner = function (userHand, dealerHand) {
    if ((userHand.score < dealerHand.score) || userHand.score > 21) {
        return "You lose.";
    } else if (userHand.score > dealerHand.score) {
        return "You win.";
    } else {
        return "You tied.";
    }
};

var playGame = function () {
    var user = playAsUser();
    var dealer = playAsDealer();
    declareWinner(user, dealer);
    console.log("User got " + user.printHand());
    console.log("Dealer got " + dealer.printHand());
};

playGame(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:45:21.237

你没有返回任何东西`printHand()`

我刚刚添加了 return 语句并工作了。看到这个[小提琴](http://jsfiddle.net/XEgnC/1/)

```
this.printHand = function () {
        for (i = 0; i < cards.length; i++) {
            var hand;
            if (i === 0) {
                hand = cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            } else {
                hand = hand + " and a " + cardNames[cards[i].getNumber()] + " of " + suitNames[cards[i].getSuit()];
            }
        } 
        //alert(hand);  //remove this alert
        return hand; // <----- solution
}; 
```

# regex - awk：显示匹配的正则表达式（多行）

> ID：12389421
> 
> 赞同：0
> 
> 时间：2012-09-12T13:35:15.250
> 
> 标签：regex, linux, awk

我有一个看起来像这样的文件：

```
SF:/home/developer/project/test/resources/somefile.js
DA:1,2
DA:3,2
end_of_record
SF:/home/developer/project/src/resources/otherfile.js
DA:9,2
DA:15,2
DA:22,2
end_of_record

...some more SF:/home/xxx and end_of_record lines... 
```

该文件由以 . 开头`SF: ...`和结尾的块组成`end_of_record`。请注意，( `DA:x,x`) 之间的行数可以不同。我想打印第一行中包含字符串“test”的所有块（如此处的“SF:/home/developer/ **test** /resources/...”）。对于这个例子，我想要的输出是：

```
SF:/home/developer/project/test/resources/somefile.js
DA:1,2
DA:3,2
end_of_record 
```

我想在**Linux**环境中执行此操作。

我的第一次尝试是使用“sed”命令来执行此操作，但经过一些研究后，似乎“awk”是执行多行操作的更合适的工具。

使用 awk 和 Regex，这是我到目前为止的命令：

```
awk '/SF[:\/a-zA-Z0-9]*test[\/A-Za-z0-9.,:\n]*end_of_record/ {print}' FS="\n" RS="" examplefile 
```

但它输出的是完整的`examplefile`，而不仅仅是第一行中包含“test”的块。我不确定我的正则表达式是否错误，或者我的`awk`通话中是否遗漏了某些内容。

我怎样才能只得到第一行带有“test”的块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:30:59.360

你需要一个标志：

```
awk '/^SF.*test.*/{f=1}f;/end_of_record/{f=0}' yourFile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:48:20.563

```
awk '{if($0~/SF:.*\/test\//){P=1;}if($0~/end_of_record/&& P==1){print;P=0;}if(P==1)print}' your_file 
```

# php - XAMPP 正在删除带有下划线的 HTTP 标头

> ID：12389423
> 
> 赞同：2
> 
> 时间：2012-09-12T13:35:21.170
> 
> 标签：php, http, http-headers, xampp

我试图让一个 PHP 应用程序运行，它依赖于通过 HTTP 标头提供附加信息的特定浏览器。具体来说，它是 EVE Online 游戏浏览器，但我的问题在于 XAMPP（特别是 XAMPP USB Lite 1.8.0）处理这些标头的方式。

我观察到的是，当我在 Windows 上使用 XAMPP 尝试它时，我需要的特定标头 ( `HTTP_EVE_TRUSTED`) 不可用`$_SERVER`，但如果我在 Debian 上使用 Apache 安装，它就在那里。

我使用了一个简单的脚本来输出标题：

```
<?php 
print_r($_SERVER);
?> 
```

当脚本托管在 XAMPP 上时，仅缺少这个标头。我怀疑 XAMPP 有一些奇怪的默认配置，可以去除某些标头，也许是一种安全功能，但我找不到任何相关信息。

根据 Nacerridine 的建议，我使用 Tamper Data for Firefox 来重现该问题，我发现只有包含下划线的标题被删除。

什么可能导致此标头在 XAMPP 上不可用但在其他服务器上不可用？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:38:05.130

我没有找到从数组中删除标头的确切原因`$_SERVER`，但是您仍然可以使用访问相同的信息[`apache_request_headers`](http://www.php.net/manual/en/function.apache-request-headers.php)

```
$requestHeaders = apache_request_headers();
if ($requestHeaders){
    echo $requestHeaders['EVE_TRUSTED'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T04:55:10.200

我有同样的问题，我正在使用 cUrl 传递自定义标头变量，但是当我打印 $_SERVER 变量时，我看不到自定义标头变量..

但是当我打印

```
apache_request_headers()
```

自定义变量可用。

如果您已重新配置服务器以完成此操作，请告诉我。我正在使用 xampp 1.8.0

# java - 我需要计算页面上的所有网址

> ID：12389427
> 
> 赞同：-1
> 
> 时间：2012-09-12T13:35:27.427
> 
> 标签：java, jsp, applet

> **可能重复：**
> [如何使用正则表达式在 Java 中解析 HTML？](https://stackoverflow.com/questions/677038/how-to-use-regular-expressions-to-parse-html-in-java)

我需要用 Java 计算页面上的所有 url。我是Java的初学者。我需要关于我应该使用什么技术来计算 url 的建议。我想我可以使用正则表达式来检测 url 并计算 url，但我不舒尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:40:30.860

您可以使用传递给小程序的 url 计数吗？jQuery 会很容易地为您提供： 作为标签`var aCnt = $('a').size();` `aCnt`的计数。`a`更多关于它[的信息](http://www.codestore.net/store.nsf/unid/DOMM-4U8FM6/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:10:50.463

看看[jsoup](http://jsoup.org/)：

```
Document doc = Jsoup.connect("http://www.your-url.com/").get();
Elements links = doc.select("a");
int count = links.size(); 
```

# vb.net - vb.net webbrowser documentcompleted 事件 - 页面未加载

> ID：12389428
> 
> 赞同：3
> 
> 时间：2012-09-12T13:35:30.283
> 
> 标签：vb.net, webbrowser-control

我已经搜索了有关 WebBrowser DocumentCompleted 事件的其他问题，但似乎没有人遇到我遇到的确切问题。

我正在尝试在航空公司网站上自动搜索航班。我使用的第一个 url 每次都是相同的，除了日期部分，所以很容易让 WebBrowser 通过组合字符串来访问 URL。但是，该页面是一个免责声明页面，其中包含一个“继续”按钮，需要在显示价格之前单击该按钮。如果我在表单上使用一系列按钮，我可以通过单击 button1 来访问第一个 URL，然后通过单击 button2 来单击继续按钮。它工作正常。

但是，我想消除单击 button2 的需要，因此尝试使用 WebBrowser DocumentCompleted 事件。我遇到的问题是第一页似乎永远不会完全加载到网络浏览器中，因此永远不会单击该按钮。

这是我用于两个按钮和 DocumentCompleted 事件的代码

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    TextBox1.Text = fullURL
    WebBrowser1.Navigate(fullURL)

    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim allElements As HtmlElementCollection = WebBrowser1.Document.All

    For Each webpageelement As HtmlElement In allElements

        If webpageelement.GetAttribute("src") = proceedbuttonattribute Then

            webpageelement.InvokeMember("click")

        End If

    Next

    End Sub

Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

    If TextBox1.Text.StartsWith(firstURL) = True Then 'make sure that button is only clicked after first webpage loads

        Dim allElements As HtmlElementCollection = WebBrowser1.Document.All

        'Click 'Proceed to Booking' button
        For Each webpageelement As HtmlElement In allElements

            If webpageelement.GetAttribute("src") = proceedbuttonattribute Then

                webpageelement.InvokeMember("click")

            End If

        Next

    End If

    End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:14:34.403

```
WebBrowser1.Navigate(fullURL)
    Do While wb.ReadyState <> WebBrowserReadyState.Complete
        Application.DoEvents()

    Loop 
```

;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:18:22.487

当您说 DocumentCompleted 从未被触发时，您是说它根本没有被触发，还是您说 If 语句可能没有返回 True，因此内容（和单击操作）没有运行？

此外，此页面上是否有任何框架或 iframe？因为，如果有，DocumentCompleted 将在每个单独的帧都加载并完成之前运行，如果它是一个 ajaxed 帧，那么这将引入 mroe 问题。只需要其中一个帧无法正确加载或保持在“交互”模式（其中 .readystate = 3）而不是完全正确加载（其中 .readystate = 4），这将阻止 DocumentCompleted 事件被触发。

另外，您要等待 DC 事件触发多长时间？

有一个更好的方法解决这个问题，您需要做的就是运行一个 Do/While 循环，使用与 DC 事件中完全相同的代码，它会坐在那里（在调用 .Navigate2 之后）并等到该按钮显示在 DOM 中，一旦以下返回 True，您就可以使用 .InvokeMember 并单击该按钮。

```
If webpageelement.GetAttribute("src") = proceedbuttonattribute Then 
```

因此，在这种情况下，您将创建另一个名为“WaitUntilButtonFound”的函数，并可能在每个循环之间放置一个 100 毫秒的睡眠（等待），并在睡眠方法（也可以找到）之后或之前放置一个 .DoEvents（在 .Threading 命名空间中）在 .Threading 我认为）。

这样，当文档对象模型中出现相关按钮时，您可以单击它，如果需要，一旦找到，您可以再等待 2-3 秒（如果需要，不需要）然后单击它。因为在 DOM 中找到该按钮表明页面已加载或部分加载（相关或必要部分已完成加载），因此您可以恢复您想要对该按钮执行的操作（即，单击它），就在它出现之后。事实上，这也是最快的前进方式。

你怎么看？如果您需要更多帮助或指导，请告诉我您的情况。此外，如果您可以让我们知道 DC 事件是否绝对没有被触发，或者只是您的 IF 语句阻止 DC 在 DC 事件中运行代码，那将很有帮助，因为如果 DC 事件正在触发但内部的代码由于其中的 If 语句而没有运行，这与 DC 完全不同，甚至根本没有被触发。

让我们知道，谢谢。

# qt4 - 删除 XML 中的特定节点

> ID：12389434
> 
> 赞同：0
> 
> 时间：2012-09-12T13:35:42.143
> 
> 标签：qt4

我已经使用 QXmlStreamWriter 创建了 XML 文件。如何根据某个键值删除一个节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:45:45.253

那是您在那里使用的错误 API。`QXmlStreamWriter`，顾名思义，写入一个 XML 数据流。完成编写后，您最终会得到一个 XML 文件，如果您想修改它，必须将其解析回来。

如果您计划定期修改 XML 文件，请考虑使用`QDomDocument`. 这些`QXmlStream...`类用于数据结构的序列化和反序列化，而不是用于编辑 XML 文档。

另一个想法是使用 XSLT 处理器。

# c# - 我如何在图片框中保存图像而不会出现一般错误

> ID：12389437
> 
> 赞同：3
> 
> 时间：2012-09-12T13:35:47.013
> 
> 标签：c#, image, gdi

> **可能重复：**
> [GDI+、JPEG 图像到 MemoryStream 中发生一般错误](https://stackoverflow.com/questions/1053052/a-generic-error-occurred-in-gdi-jpeg-image-to-memorystream)

我有一个`PictureBox`从数据库加载它的图像。

```
MemoryStream ms2 = new MemoryStream((byte[])reader[13]);
pbShenasname.Image = Bitmap.FromStream(ms2);
ms2.Close(); 
```

我想`PictureBox`通过执行以下操作将此图像保存到本地硬盘驱动器中的路径：

```
if (SFD.ShowDialog() == DialogResult.OK)
    pbShenasname.Image.Save(SFD.FileName,System.Drawing.Imaging.ImageFormat.Jpeg); 
```

SFD 是一个 saveFileDialog。

当我尝试此代码时，我得到一个通用错误 GDI 的错误。我怎样才能不出错地保存它？

# google-maps - 未捕获的类型错误：对象# Chrome 中没有“setCapture”方法

> ID：12389439
> 
> 赞同：3
> 
> 时间：2012-09-12T13:35:48.870
> 
> 标签：google-maps, google-maps-api-3

使用 Google Maps API v3（发布通道）时，我收到此错误消息，尝试在地图上平移并打开我的控制台窗口：

`Uncaught TypeError: Object #<HTMLDivElement> has no method 'setCapture'`

我知道关闭控制台并重新加载页面可以解决错误，但这非常不方便，因为我目前正在开发地图应用程序，我需要对其进行测试并阅读调试消息。

其他浏览器（例如 Safari 6）不会显示此错误并且平移工作正常，控制台窗口是否打开。

我正在使用 Chrome 21.0.1180.89。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T18:45:02.760

当我在开发人员工具设置窗口中将用户代理覆盖的设置留给 Internet Explorer 时，我遇到了同样的问题。取消选中覆盖解决了这个问题。

# solaris - ksh : nohup 与 root 用户连接

> ID：12389440
> 
> 赞同：0
> 
> 时间：2012-09-12T13:35:49.423
> 
> 标签：solaris, root, ksh, privileges

我使用 user1 帐户连接到 Solaris 9 机器。

```
bash-2.05$ /usr/ucb/whoami
user1 
```

当我使用 运行任何命令时`nohup`，它会以`root`特权执行：

```
bash-2.05$ nohup whoami &
[1] 20479
bash-2.05$ Sending output to nohup.out
[1]+  Done                    nohup whoami
bash-2.05$ 
bash-2.05$ cat nohup.out   #actually we had to user root here to do `cat` as `nohup.out` belongs to root, but for demonstration i ommited this step
root 
```

此行为只能在此特定帐户中看到`user1`。对于其他帐户，它由正确的用户执行。

这是nohup的属性

```
bash-2.05$ which nohup
/usr/bin/nohup
bash-2.05$ ls -altr /usr/bin/nohup
-r-sr-xr-x  43 root     bin         5424 Dec  5  2005 /usr/bin/nohup 
```

谢谢

# javascript - 为什么 .find 不能与 JQuery 中的第二个 css 选择器一起使用？

> ID：12389441
> 
> 赞同：-1
> 
> 时间：2012-09-12T13:35:49.923
> 
> 标签：javascript, jquery, css, jquery-selectors

当我使用 name=value 选择器执行 .find 时，我没有得到任何元素。我的语法看起来是正确的，我看不出我做错了什么。我知道它从中选择的对象有元素，确切地说是 7 个，以及我正在寻找的属性。所以我很困惑为什么 .find 不起作用。

页面上的 Javascript：

```
$(document).ready(function () {
        var mainCatName = 'category.SelectedValue'
        $('#Button1').on('click', function () {
            var td = $('input[name="' + mainCatName + '"]:checked').parent('td');
            var tdIndex = td.index();
            if (selectElems == null) {
                //1 
                selectElems = $("#pumpConfigTable td:nth-child(" + (tdIndex + 1) + ") select,  #pumpConfigTable td:nth-child(" + (tdIndex + 1) + ") input");
            }

            var projectInfoID = $('#ProjectInfoID').attr('value');
            var mainCategoryID = $('input[name="' + mainCatName + '"]:checked').attr('value');
            var postBackObject = makeProjectInfoObjects(projectInfoID, mainCategoryID, selectElems);
            var blah = "blah";
        });

    }); 
```

makeProjectInfoObjects 的部分来源：

```
function makeProjectInfoObjects(pInfoID, mainCatID, pcOptions) {

    //var pc = new PumpConfig();
    var pc = new Array();
    var dbIDs = _.pluck(pcOptions, "data-dbid");
    var uniquedbIDs = _.unique(dbIDs);
    uniquedbIDs = _.reject(uniquedbIDs, function (checkID) { return checkID == undefined; });
    var len = uniquedbIDs.length;

    for (var i = 0; i < len; ++i) {
        //2
        var categories = $(pcOptions).find("[data-dbid='" + uniquedbIDs[i] + "']");
        var uniqueNames = _.pluck(categories, "name");
        var singleOptions = $(categories).find(':not([name]');
        var soLen = singleOptions.length;
        for (var j = 0; j < soLen; ++j) {
            pc.push({
                pcID: uniquedbIDs[i],
                pInfoID: pInfoID,
                configCatID: mainCatID,
                configSubCatID: $(singleOptions[i]).attr('data-subcatid'),
                configValue: $(singleOptions[i]).attr('value')
            }); 
```

我在 XP 上使用 JQuery 1.8.1 和 IE8。

根据 IE 开发者工具，第一个选择器是这样的（并且有效）：//1`"#pumpConfigTable td:nth-child(2) select, #pumpConfigTable td:nth-child(2) input"`

第二个选择器是这样的（它不起作用）：//2`"#pumpConfigTable td:nth-child(2) select, #pumpConfigTable td:nth-child(2) input [data-dbid='1']"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:50:17.397

如果您希望查找具有特定属性的元素，`input`则不应使用此方法搜索作为您使用选择器字符串选择的元素的**后代的元素：**`select``data-dbid``find()`

 **```
"#pumpConfigTable td:nth-child(" + (tdIndex + 1) + ") select,  #pumpConfigTable td:nth-child(" + (tdIndex + 1) + ") input" 
```

您匹配的元素将是`select`元素和`input`元素。我认为我假设你想**在**这个集合中找到特定元素是正确的？如果是这样，请尝试使用 jQuery 的`filter()`方法而不是 find。

> .filter（选择器）
> 
> 返回：jQuery
> 
> 描述：将匹配元素的集合减少为匹配选择器或通过函数测试的元素。

所以你会这样做：

```
var categories = $(pcOptions).filter("[data-dbid='" + uniquedbIDs[i] + "']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:38:12.440

如果你想`input`拥有`data-dbid='1'`你需要删除两者之间的空间：

```
"#pumpConfigTable td:nth-child(2) select, #pumpConfigTable td:nth-child(2) input[data-dbid='1']" 
```**

# php - 分页、会话和控制器的操作 - Symfony2

> ID：12389442
> 
> 赞同：2
> 
> 时间：2012-09-12T13:35:51.680
> 
> 标签：php, symfony, doctrine-orm

我有一个朋友列表，应该在一页中显示 3 个。每个朋友都有一个类别，我还有一个下拉菜单可以选择仅查看来自所选类别的朋友。它们也应该在一页中显示 3 个。过滤和未过滤朋友的显示方式是相同的，所以我不想在我的控制器和两个相同的模板中有两个几乎动作，所以我尝试在一个控制器的动作和模板中进行此操作，但是有一个问题。我无法为过滤后的朋友的第二页和后续页进行分页。请帮忙！:(问题是我使用了一个表单，当我点击第二页时，填写在表单中并绑定的变量变得未定义。这是代码：

1.  **控制器的动作**

    ```
    public function displayAction($page, Request $request)
    {
        $em = $this->getDoctrine()->getEntityManager();
        $user = $this->get('security.context')->getToken()->getUser();

        $cat = new Category();

        $dd_form = $this->createForm(new ChooseCatType($user->getId()), $cat);

        if($request->get('_route')=='filter')
        {
            if($request->getMethod() == 'POST')
            {

                $dd_form->bindRequest($request);

                if($cat->getName() == null)
                {      
                    return $this->redirect($this->generateUrl('home_display'));
                }

                $filter = $cat->getName()->getId();
                if ($dd_form->isValid())
                {   
                    $all_friends = $em->getRepository('EMMyFriendsBundle:Friend')
                                      ->filterFriends($filter);
                    $result = count($all_friends);
                    $FR_PER_PAGE = 3;
                    $pages = $result/$FR_PER_PAGE;
                    $friends = $em->getRepository('EMMyFriendsBundle:Friend')
                                  ->getFilteredFriendsFromTo($filter, $FR_PER_PAGE, ($page-1)*$FR_PER_PAGE); 

                    $link = 'filter';
                }
            }
        }

        else
        {
            $all_friends = $user->getFriends();

            $result = count($all_friends);
            $FR_PER_PAGE = 3;
            $pages = $result/$FR_PER_PAGE;

            $friends = $em->getRepository('EMMyFriendsBundle:Friend')
                          ->getFriendsFromTo($user->getId(), $FR_PER_PAGE, ($page-1)*$FR_PER_PAGE); 

            $link = 'home_display';
        }

        // Birthdays
        $birthdays = null;
        $now = new \DateTime();
        $now_day = $now->format('d');
        $now_month = $now->format('m');

        foreach ($all_friends as $fr)
        {
            if($fr->getBirthday() != null)
            {    
                if($fr->getBirthday()->format('d') == $now_day && $fr->getBirthday()->format('m') == $now_month)
                {
                    $birthdays[]=$fr;
                    $fr->setYears();
                }
            }
        }

        // Search
        $search = new Search();
        $s_form = $this->createFormBuilder($search)
            ->add('words', 'text', array(
            'label' => 'Search: ',
            'error_bubbling' => true))
            ->getForm();

        // Renders the template
        return $this->render('EMMyFriendsBundle:Home:home.html.twig', array(
            'name' => $name, 'friends' => $friends, 'user' => $user, 'birthdays' => $birthdays, 'pages' => $pages, 'page' => $page, 'link' => $link,
            'dd_form' => $dd_form->createView(), 's_form' => $s_form->createView()));
    } 
    ```

2.  **模板**

    ```
    {% if birthdays != null %}
            <div>

                <img class="birthday" src="http://www.clker.com/cliparts/1/d/a/6/11970917161615154558carlitos_Balloons.svg.med.png">

                <div class="try"> 
                    This friends have birthday today: 
                    {% for bd in birthdays %}

                        <p>
                            <a href="{{ path('friend_id', {'id': bd.id}) }}">{{ bd.name }}</a>
                            <span class="years">
                                ({{ bd.years }} years)
                            </span>
                        </p>

                    {% endfor %}
                </div>

            </div>
        {% endif %}

        {% for fr in friends %}

            {# TODO: Fix where are shown #}

            {% if fr.getWebPath()!=null %}
                <a href="{{ path('friend_id', {'id': fr.id}) }}">
                    <img class="avatar" src="{{ fr.getWebPath }}">
                </a>
            {% endif %}

            {% if loop.index is odd %}
                    <p class="list1">
                {% else %}
                    <p class="list2">
            {% endif %}
                        <a class="friends" href="{{ path('friend_id', {'id': fr.id}) }}">{{ fr.name }}</a>
                    </p>

        {% endfor %}

        {# TODO: Pagination #}
        {% if pages>1 %}
        <p>
        {% for i in 0..pages %}

                {% if page == loop.index %}
                <span class="pagination">{{ loop.index }}</span>

                {% else %}
                <span class="pagination"><a  href="{{ path(link, {'page': loop.index}) }}">{{ loop.index }}</a></span>
                {% endif %}

        {% endfor %}
        </P>
        {% endif %}

        <p>Choose category:</p>   
        <form class="search" action="{{ path('filter') }}" method="post" {{ form_enctype(s_form) }}> 
            {{ form_widget(dd_form.name) }}
            {{ form_rest(dd_form) }}
            <input type="submit" value="Show friends" />
        </form> 
    ```

3.  **存储库**

    ```
    类 FriendRepository 扩展了 EntityRepository
    {
        公共函数 getFriendsFromTo ($user, $limit, $offset)
        {
             返回 $this->getEntityManager()
                ->createQuery('SELECT f FROM EMMyFriendsBundle:Friend f WHERE f.user='.$user.'ORDER BY f.name ASC')
                ->setMaxResults($limit)
                ->setFirstResult($offset)
                ->getResult();
        }
    公共函数 filterFriends ($filter)
        {
            $q = $this->createQueryBuilder('f');

    ```
     $q->select('f')
          ->where('f.category = :filter')            
          ->setParameter('filter', $filter);

        return $q->getQuery()->getResult();
    }

    public function getFilteredFriendsFromTo ($filter, $limit, $offset)
    {
        $q = $this->createQueryBuilder('f');

        $q->select('f')
          ->where('f.category = :filter')
                ->setMaxResults($limit)
            ->setFirstResult($offset)
          ->setParameter('filter', $filter);

        return $q->getQuery()->getResult();
    }
    } 
    ```

    ```

我尝试了很多东西，但总是有问题。在这段代码中，它说`$all_friends`生日 for 循环中的变量没有定义——是的，它没有定义。也许我必须将它存储在会话中，我尝试了这个：

```
 $session = $this->getRequest()->getSession();

    $session->set('all_friends'); 
```

然后传递`$friends=$session->get('all_friends');`给for循环，但它不起作用，并且变量不是`$all_friends`太大而无法存储它吗？

任何想法将不胜感激！感谢您的时间和精力！

* * *

**编辑**

当我使用会话的方式和

```
 $session = $this->getRequest()->getSession();

    $session->set('all_friends');

    $fri=$session->get('all_friends');

    foreach ($fri as $fr)
    { .... } 
```

我得到的错误是

```
Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\MyFriends\src\EM\MyFriendsBundle\Controller\HomeController.php line 100 
```

并且

```
Warning: Missing argument 2 for Symfony\Component\HttpFoundation\Session::set(), called in C:\xampp\htdocs\MyFriends\src\EM\MyFriendsBundle\Controller\HomeController.php on line 71 and defined in C:\xampp\htdocs\MyFriends\app\cache\dev\classes.php line 148 
```

当我不使用会话时，我得到

`Notice: Undefined variable: all_friends in C:\xampp\htdocs\MyFriends\src\EM\MyFriendsBundle\Controller\HomeController.php line 100`

当我选择一个类别来显示其中的朋友时，我单击它的第二页。

PS 错误中的行与我粘贴的代码中的行不对应，因为我跳过了操作、存储库和模板的某些部分，因为它们与此问题无关并且它们工作正常。如果有人愿意，我可以发送给他或在此处更新所有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:09:55.833

您没有在 session 上设置任何内容：

```
$session->set('all_friends'); 
```

你应该这样做：

```
$session->set('all_friends', $data); 
```

你也应该真正开始尊重 Symfony2 编码标准。

当我尝试阅读您的代码时，我的眼睛正在融化。你应该阅读[这个](http://symfony.com/doc/master/contributing/code/standards.html)并且不要忘记创建表单类而不是在你的控制器中创建表单。

**编辑：**如果您的 $data 是 Doctrine2 查询的结果，我建议您只存储`entity id`和`entity class`以便稍后在需要时获取它们。

**EDIT2：**这里有一些代码可以帮助您保存会话过滤器数据。PS，别忘了补充缺失的`use ....`

```
/**
 * Set filters
 *
 * @param array  $filters Filters
 * @param string $type    Type
 */
public function setFilters($name, array $filters = array())
{
    foreach ($filters as $key => $value) {
        // Transform entities objects into a pair of class/id
        if (is_object($value)) {
            if ($value instanceof ArrayCollection) {
                if (count($value)) {
                    $filters[$key] = array(
                        'class' => get_class($value->first()),
                        'ids' => array()
                    );
                    foreach ($value as $v) {
                        $identifier = $this->getDoctrine()->getManager()->getUnitOfWork()->getEntityIdentifier($v);
                        $filters[$key]['ids'][] = $identifier['id'];
                    }
                } else {
                    unset($filters[$key]);
                }
            } elseif (!$value instanceof \DateTime) {
                $filters[$key] = array(
                    'class' => get_class($value),
                    'id'    => $this->getDoctrine()->getManager()->getUnitOfWork()->getEntityIdentifier($value)
                );
            }
        }
    }

    $this->getRequest()->getSession()->set(
        $name,
        $filters
    );
}

/**
 * Get Filters
 *
 * @param array $filters Filters
 * @param type  $type    Type
 *
 * @return array
 */
public function getFilters($name, array $filters = array())
{
    $filters = array_merge(
        $this->getRequest()->getSession()->get(
            $name,
            array()
        ),
        $filters
    );

    foreach ($filters as $key => $value) {
        // Get entities from pair of class/id
        if (is_array($value) && isset($value['class'])) {
            if (isset($value['id'])) {
                $filters[$key] = $this->getDoctrine()->getManager()->find($value['class'], $value['id']);
            } elseif (isset($value['ids'])) {
                $data = $this->getDoctrine()->getManager()->getRepository($value['class'])->findBy(array('id' => $value['ids']));
                $filters[$key] = new ArrayCollection($data);
            }
        }
    }

    return $filters;
} 
```

**EDIT3：**为什么你不使用[KnpPaginatorBundle](https://github.com/KnpLabs/KnpPaginatorBundle)进行分页？

# c - CSR1000 分配内存

> ID：12389444
> 
> 赞同：1
> 
> 时间：2012-09-12T13:36:01.913
> 
> 标签：c, memory, csr

我目前正在玩`CSR 1000 chip`，我想分配内存。我尝试使用`malloc`，但编译器告诉我：

未定义对“malloc”的引用

我认为这是因为`gcc`使用`-nostdlib`参数运行

所以请有`CSR uEnergy SDK`经验的人告诉我为什么我不能分配内存，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:08:57.887

我对这个芯片有三个月的经验。

malloc 函数位于标准 C 库中，通常在桌面软件开发或嵌入式 linux 中可用。但这是一个小型且资源有限的嵌入式芯片。没有标准的 C 库。

如果您浏览 uEnergy SDK 安装目录，如下所示：C:\uEnergy_SDK-2.0.0\doc\reference\html\index.html。单击顶部的模块标签。您会发现在“C 标准库 API”部分下，CSR 提供​​了一些模仿标准 C 库子集的函数。不幸的是，没有像 malloc 这样的方法。

通常，当您使用小型嵌入式系统时，通常没有动态内存分配。但是，对于通常是事件驱动的 RF 应用程序，通常会提供一个简单的动态内存分配功能，因此操作系统可以将传入的数据包交给您的应用程序。我使用了 TI 的 CC2430 及其 Zigbee 堆栈。它们提供函数 osal_mem_alloc 和 osal_mem_free，模仿标准 C 库中的 malloc 和 free。

根据我使用这两种芯片的经验，我发现 CSR 比 TI 更具保护性，就像 iOS 与 Android 一样。您不知道他们使用什么 MCU，除非他们告诉您它是 16 位 RISC。

我怀疑他们在内部有动态内存分配，但您的应用程序无法使用这些功能。射频数据包由操作系统在 AppProcessLmEvent 函数中交给您，您可以从那里通过 p_event_data 指针获取数据。您不必解除分配它，因为一旦您处理完该事件，操作系统就会为您执行此操作。

所以回到你的问题，你可以分配内存，所以你只需保留一块内存作为全局数组并处理它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:51:58.123

如果有一个与该芯片捆绑在一起的 SDK，它提供了内存分配的基本例程，然后使用这些，或者您可以编写自己的分配器或使用现有的网络分配器（有些摆弄）。

作为一个快速的解决方案，您可以使用修改后的链接描述文件或使用 gcc 'section' 属性（更多[here](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html)）在内存中标记一个区域，然后将其用作 malloc 分配器中的堆区域。

一个非常简单的分配器不会保留任何会计信息，例如页眉/页脚，而是一个接一个地线性分配区域（在这种情况下，释放本质上是一个无操作），这不会让你走得太远，但你会能够运行简单的程序。

您可能想要更复杂的东西，您还可以考虑实现某种内存池或任何标准分配算法。

如果我重新调用正确的话，Dennis Ritchie 和 Brian Kernighan 的经典著作 The C Programming Language 提供了一个简单的内存分配器。你可能想看看那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:04:32.750

添加`#include <malloc.h>`到文件的头部

# java - SimpleDateFormat 和日期比较未给出正确的输出

> ID：12389445
> 
> 赞同：0
> 
> 时间：2012-09-12T13:36:03.430
> 
> 标签：java, android

```
try {
            Date sysDate = new SimpleDateFormat("dd/mm/yyyy").parse(_sysDate);
            Date userDate = new SimpleDateFormat("dd/mm/yyyy").parse(_userDate);
            if (userDate.compareTo(sysDate) > 0)
                return false;
                    else 
                            return true;
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

以上是我的以下代码片段，用于检查两个日期是否更大。当我给出： sysdate=12/9/2012 和 userdate=11/9/2012 或 10/8/2012 或 15/9/2011 它给出正确的输出

但是当我给出： sysdate=12/9/2012 和 userdate=13/8/2012 或 15/7/2012 或 16/6/2012 时，它给出的输出不正确。根据我的分析，如果我选择 12 年 1 月 12 日至 20 年 8 月之间的任何月份，并且选择的 day_of_month（即 0,1,2,...,31）多于当前 day_of_month（在本例中为 12 )，我总是得到不正确的输出。

请提出任何可能的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:38:39.693

问题是模式应该是“dd/MM/yyyy”（大写的“MM”代表月份）而不是“dd/mm/yyyy”（小写的“mm”表示分钟）。

所以，它应该如下 -

```
try {
    DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
    Date sysDate = df.parse(_sysDate);  
    Date userDate = df.parse(_userDate);
    //... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:42:19.143

```
try {
            Date sysDate = new SimpleDateFormat("dd/MM/yyyy").parse(_sysDate);
            Date userDate = new SimpleDateFormat("dd/MM/yyyy").parse(_userDate);
            if (userDate.compareTo(sysDate) > 0)
                return false;
                    else 
                            return true;
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

日期模式是错误的**dd/MM/yyyy**而不是**dd/mm/yyyy**。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-12T13:37:53.617

`dd/MM/yyyy`在 dd/mm/yyyy 的位置看到这种数据格式的变化。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# c# - RichTextBox IsDocumentEnabled 与 InlineUIContainers

> ID：12389452
> 
> 赞同：1
> 
> 时间：2012-09-12T13:36:35.717
> 
> 标签：c#, wpf, xaml, richtextbox, flowdocument

我正在创建一个`RichTextBox`包含各种不同`InlineUIContainer`的 s，但似乎无法让这些容器中的按钮单击事件起作用。如果我设置`IsDocumentEnabled = true`为`RichTextBox`，那么`BlockUIContainer`点击事件将起作用；但是，`InlineUIContainer`点击事件仍然不起作用。

有谁知道这样的功能是否可行？

编辑：添加一个代码示例。

这有效：

```
<RichTextBox IsDocumentEnabled="True">
    <FlowDocument>
        <BlockUIContainer>
            <Button Click="SomeEvent">
        </BlockUIContainer>
        <Paragraph>
            ... Some Content ...
        </Paragraph>
    </FlowDocument>
</RichTextBox> 
```

但这不会：

```
<RichTextBox IsDocumentEnabled="True">
    <FlowDocument>
        <Paragraph>
            <InlineUIContainer>
                <Button Click="SomeEvent" />
            </InlineUIContainer>
         </Paragraph>
    </FlowDocument>
</RichTextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:47:45.213

事实证明，我将它们包装在一个已经`IsHitTestVisible=true`设置好的标签中，但这并不是很明显。现在效果很好。

# objective-c - NSString 不知何故变成了一个“__NSArrayI”对象

> ID：12389454
> 
> 赞同：0
> 
> 时间：2012-09-12T13:36:43.167
> 
> 标签：objective-c, ios, nsstring, nsarray

我收到来自我的服务器的响应，它看起来像这样：

```
2012-09-12 16:29:11.690 WhatIsIt[1763:707] (
    {
    qid = ebb81a9c0c2125c9f12fee33c281dfe2ef5c1596;
    "qid_data" =         {
        labels = Wristwatch;
    };
}  ) 
```

当我解析这样的`"qid"`值时：

```
- (void)updateCompleteWithResults:(NSArray*)results{    
       NSLog(@"%@",results);
       NSString *qid = [results valueForKey:@"qid"]; 
```

对象在`NSString`字符串周围得到一个括号（我不知道如何）看起来像这样：

```
2012-09-12 16:34:17.979 WhatIsIt[1785:707] (
2e1da5854f3b4f02cd967293cd1364e6d3e0b76a
) 
```

所以我尝试使用：

```
NSString *string = @" spaces in front and at the end ";
NSString *trimmedString = [string stringByTrimmingCharactersInSet:
                              [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

应用程序崩溃了，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:46:50.597

问题是这个结构的根对象是一个数组......

如果您查看[NSArray](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BBCIBCDJ)`valueForKey:`上的方法，您会发现它实际上会调用它的每个成员并在另一个数组中返回结果（这就是您所看到的）。`valueForKey:`

相反，您应该做的是首先获取您感兴趣的对象，然后自己使用它

```
NSDictionary *myObject = [whatIsIt objectAtIndex:0];

NSString *qId = [myObject objectForKey:@"qid"]; 
```

# javascript - chrome在WebSocket握手期间出现新错误

> ID：12389460
> 
> 赞同：1
> 
> 时间：2012-09-12T13:36:53.463
> 
> 标签：javascript, node.js, google-chrome, websocket

让 node.js websockets 通过 haproxy 运行，并且已经成功运行了几个月。

现在现在给出错误

```
Error during WebSocket handshake: 'Connection' header value is not 'Upgrade' 
```

相同的代码/设置仍在开发计算机上工作

任何想法/建议都值得赞赏！

火狐工作正常！来自主服务器的 chrome 错误，但在本地正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:39:38.800

这个错误信息有一些非常令人担忧的地方。“Connection”标头值不应*为*“Upgrade”，而应*包含*“Upgrade”。“连接”是一个 HTTP 头字段，它是逐跳的，可能包含多个令牌，包括升级，但也有许多其他令牌。这是在 RFC6455 第 17 页：

> " 5\. 请求必须包含一个 |Upgrade| 标头字段，其值必须包含 "websocket" 关键字。"

所以我认为服务器软件有问题，或者至少在错误消息中。您绝对应该进行网络捕获以确定。

# android - 如何构建一个启动 android 应用程序的小部件？

> ID：12389464
> 
> 赞同：1
> 
> 时间：2012-09-12T13:37:00.213
> 
> 标签：android, android-widget, launch

我为 Galaxy Note 构建了一个自定义的 android 应用程序。

有没有办法通过一个占据整个屏幕大小的大部件来启动应用程序？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:48:13.810

尝试这个 -

```
PackageManager pm = getPackageManager();
try
{
    String packageName = "com.example.package";
    Intent launchIntent = pm.getLaunchIntentForPackage(packageName);
    startActivity(launchIntent);
}
catch (Exception e1)
{
} 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中设置资源逻辑名称？

> ID：12389470
> 
> 赞同：2
> 
> 时间：2012-09-12T13:37:12.330
> 
> 标签：visual-studio-2010

将解决方案从 VS2008 迁移到 VS2010 时遇到问题。问题是在某些情况下在运行时找不到托管资源，因为它们没有嵌入正确的名称：

“找不到适合指定区域性或中性区域性的任何资源。确保“Production.ViewDocument.resources”在编译时已正确嵌入或链接到程序集“RSProcess”，或者所需的所有附属程序集都是可加载且完全可加载的签。”

System.Resources.MissingManifestResourceException 通常在对通过类型 id 创建的资源调用 ApplyResources 时引发 InitializeComponent。在我的例子中，命名空间是 Production，类名是 ViewDocument。但是，生成的资源（来自 ViewDocument.resx）是根据 resx 文件所在的文件夹结构命名的，在本例中为 Production.folder1.folder2.ViewDocument.resources。

在 VS2008 中，您可以在 .resx 文件的设置中覆盖（默认）逻辑名称，Managed Resources/General/Resource Logical Name。在 VS2010 中我无法让它工作——它完全忽略了这个设置！有没有其他方法可以解决这个问题？

最后一种方法是删除当前文件夹结构并将所有文件移动到根项目文件夹，但在我的情况下，这似乎是相当多的工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:55:24.207

我找到了我自己问题的答案！

VS2010 中发生了一些让我感到困惑的事情。首先，在 VS2008 中，.resource 文件的名称受项目设置“资源逻辑名称”的影响，在 VS2010 中，文件始终根据项目的根命名空间和文件夹结构（扩展命名空间）命名。其次，在迁移时，这些设置被清空了，可能是因为我们使用了一个宏 $(InputFile) 已被 %(Filename) 替换。

为了解决这个问题，我在项目级别（或者您可以使用项目属性页）将“资源逻辑名称”定义为 $(RootNamespace).%(Filename).resources。请注意，.resource 文件仍然获得扩展名称（由它们所在的文件夹定义）。但是，如果您从 MSBuild 检查日志文件，您会看到逻辑名称出现在链接器的 /ASSEMBLYRESOURCE 开关中，除了资源文件名！重建后，ComponentResourceManager 现在将使用视图类型（在本例中为 Rootnamespace.filename）在“InitializeComponent”中查找资源。另请注意，这假设您的视图类放置在与该类同名的文件中！

# mysql - 使用 IF ELSE 语句连接多个表

> ID：12389480
> 
> 赞同：0
> 
> 时间：2012-09-12T13:37:43.350
> 
> 标签：mysql

`IF ELSE`当列值与指定文本匹配时，我想使用 Sql Query 中的语句连接多个表。

假设我已经检查了`coloumnName='Value'`然后我想加入一个额外的表；否则，我不想加入它。这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:46:30.207

您不能有条件地连接表您需要使用外连接无条件地连接所有表，使用连接条件中的条件，并从返回的数据集中选择您想要的值，如下所示：

```
select r.id, p.name, a.name, t.name
from requests r
left outer join person p on r.type='person' and r.item_id = p.id
left outer join animal a on r.type='animal' and r.item_id = a.id
left outer join thing t on r.type='thing' and r.item_id = t.id 
```

上面的示例显示了具有`item_id`引用人、动物或事物的“请求”。该`type`列决定引用哪个表。

结果将包含 3 列`name`，其中最多有 1 列不为空。

# font-face - 使用 font-face 的特殊字符很奇怪

> ID：12389481
> 
> 赞同：2
> 
> 时间：2012-09-12T13:37:44.090
> 
> 标签：font-face

我正在使用 font-face 来获取我在网站上使用的字体。瑞典字符 ÅÄÖ åäö 确实存在于字体集中，但它仍然显得很奇怪。

可能是什么问题？这是我用来获取字体文件的代码。

```
font-family: 'LinotypeAroma';
        src: url('../fonts/linotype_aroma_light_sc.eot');
        src: url('../fonts/linotype_aroma_light_sc.eot?#iefix') format('embedded-opentype'),
             url('../fonts/linotype_aroma_light_sc.woff') format('woff'),
             url('../fonts/linotype_aroma_light_sc.ttf') format('truetype'),
             url('../fonts/linotype_aroma_light_sc.svg#linotype_aroma_light_sc') format('svg');
        font-weight: normal;
        font-style: normal; 
```

# javascript - Google Maps API v3 无法在移动浏览器或 PhoneGap 中运行

> ID：12389485
> 
> 赞同：2
> 
> 时间：2012-09-12T13:37:54.247
> 
> 标签：javascript, html, cordova, jquery-mobile, google-maps-api-3

即使我允许所有外部主机，Google Maps API v3 也无法在移动浏览器或 PhoneGap 中运行

我尝试使用或不使用 apikey。

`loadMapScript()`当设备准备好（在 iDevice(iOS) 上）或加载页面时（在计算机上）调用该方法

当我导航到有地图的页面时，我收到消息，这`"Error Loading map"`意味着`map``null`

我怀疑谷歌检测到我正在使用 iOS 设备并限制我使用他们的 API，但我没有证据。

PS这适用于所有浏览器！PS 我在 iPad 的 safari 中尝试过，但它不起作用！但在电脑上工作！PS刚刚检查它不适用于任何移动浏览器或phonegap，但适用于所有桌面浏览器：/

任何帮助，将不胜感激

编码：

```
function loadMapScript() {
    if($("#googleMaps").length == 0) {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.id = "googleMaps"
        script.src = "http://maps.googleapis.com/maps/api/js?sensor=false&callback=initializeMap&key=HIDDEN";
        document.body.appendChild(script);
    } else console.log("Error, googleMaps already loaded");
}

function initializeMap(mapOptions) {
    console.log("Init Maps");
    var myLatlng = new google.maps.LatLng(currentLocation.coords.latitude, currentLocation.coords.longitude);
    if(!mapOptions)
        mapOptions = {
            center: myLatlng,
            zoom: 18,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    if(!map)
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    else {
        map.setOptions(mapOptions);
    }
    updateCurrentLocationMarker();
}

function updateCurrentLocationMarker() {
    if(!map) {
        return;
    }
    var myLatlng = new google.maps.LatLng(currentLocation.coords.latitude,
        currentLocation.coords.longitude);
    if(currentLocationMarker) {
        currentLocationMarker.setMap(null);
    } else {
        currentLocationMarker = new google.maps.Marker({
            position: myLatlng,
            animation: google.maps.Animation.DROP,
            title:"You!"
        });
        currentLocationMarker.setMap(map);
    }
}

function onMapsShow() {
    if(!map) {
        showToastNow("Error Loading map");
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T09:22:22.730

这段代码怎么样？我根据您的代码创建了代码。我尝试了我的 iPad，并且成功了。

```
var map, mapOptions, currentLocation, currentLocationMarker;
function loadMapScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.id = "googleMaps"
  script.src = "https://maps.googleapis.com/maps/api/js?sensor=false&callback=initializeMap";
  document.body.appendChild(script);
}

function initializeMap(mapOptions) {
  var myLatlng = new google.maps.LatLng(currentLocation.coords.latitude, currentLocation.coords.longitude);
  var mapOptions = {
    center : myLatlng,
    zoom : 18,
    mapTypeId : google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  updateCurrentLocationMarker();
}

function updateCurrentLocationMarker() {
  var myLatlng = new google.maps.LatLng(currentLocation.coords.latitude, currentLocation.coords.longitude);

  if (currentLocationMarker) {
    currentLocationMarker.setMap(null);
  } else {
    currentLocationMarker = new google.maps.Marker({
      position : myLatlng,
      animation : google.maps.Animation.DROP,
      title : "You!",
      map : map
    });
  }
}

function onSuccess(position) {
  currentLocation = position;
  if (!map) {
    loadMapScript();
  }
}

function onError(error) {
  alert('code: ' + error.code + '\n' + 'message: ' + error.message + '\n');
}

function onDeviceReady() {
  navigator.geolocation.getCurrentPosition(onSuccess, onError);
}

document.addEventListener("deviceready", onDeviceReady, false); 
```

# javascript - Javascript（innerHtml）与 HTML 选择标签混淆

> ID：12389486
> 
> 赞同：0
> 
> 时间：2012-09-12T13:37:55.183
> 
> 标签：javascript, html, css, innerhtml

我目前正在学习 HTML、PHP、JavaScript 和其他有趣的网络内容。在这一点上，我设法用 HTML、CSS 和 PHP 创建了一个漂亮的 Web 表单。

几天前，我想用 JavaScript 添加一些动态选项，但现在我碰壁了。我没有将表单写入 html 文件，而是决定将其放入 .js 文件并由 javascript 构建。这是我的做法：

```
<!-- Insert the form into <div id=field> -->
...
document.getElementById(field).innerHTML +=
'<label>Name'
   +'<span class="small">ex: stg_testdb1</span>'
+'</label>'
+'<input type="text" name="name" id="name" />';

document.getElementById(field).innerHTML +=
'<label>Layer</layer>'
 +'<span class="small">ex: stg_testdb1</span>'
 +'<select name="layer" id="layer"/>'
   +'<option value="Development">D</option>'
   +'<option value="QA">A</option>'
   +'<option value="Staging">S</option>'
   +'<option value="Production">P</option>';
 +'</select>';
.... 
```

这是我的“选择”、“输入”和“标签”标签的 CSS 代码

```
#stylized select{
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
}

#stylized input{
float:left;
font-size:12px;
padding:4px 2px;
border:solid 1px #aacfe4;
width:200px;
margin:2px 0 20px 10px;
}

#stylized label{
display:block;
font-weight:bold;
text-align:right;
width:145px;
float:left;
} 
```

当我用纯 HTML 编写表单时，一切正常。这是表格一部分的图片：

![在纯 html 中工作正常](../Images/4b941f2ae7331a93d9558a6a83a3af47.png)

但是当我使用 innetHTML += 在javascript中编写它时，除了下拉框（选择字段）之外，一切似乎都工作正常：

![无法正常使用 javascript](../Images/1b914b4901655127a74527fe8722d4e5.png)

我有点困惑，因为 css 保持完全相同。另外，如果我尝试在第一个文本字段下添加另一个文本字段，一切都会很好并且格式正确。

由于我是 Web 开发的新手，我想我错过了一些重要的东西？另外，我很确定我正在做的插入代码不是正确的做法，但现在它几乎运行良好；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:52:24.490

我不知道这是否是解决方案，但是在您的 JS 中，有：

```
<label>Layer</layer> 
```

我想你的意思是

```
<label>Layer</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:50:21.763

您的问题中没有足够的信息来重新创建问题（缺少很多 CSS 和可能的 HTML）。然而，既然你知道你的 CSS 没有改变，那么一定有一些 HTML 不合适。

JavaScript 创建 HTML 元素的方式必须不同于静态 HTML。在单独的窗口中打开两个页面并使用 Firebug（用于 Firefox）或开发者工具（在 Chrome 中）检查每个页面（HTML/元素选项卡）生成的 HTML。找出差异并在您的 JavaScript 中更正它。

很可能您只是输入错误或错误放置了一个或两个元素。

希望这可以帮助。

# c# - Datagridview 中的 CRUD 操作绑定到 SQL 数据库

> ID：12389491
> 
> 赞同：0
> 
> 时间：2012-09-12T13:37:59.717
> 
> 标签：c#, winforms, datagridview, crud

我在向我的 datagridview 添加新行时遇到问题。我希望它通过添加按钮来完成。我的绑定基于本教程[http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx](http://msdn.microsoft.com/en-us/library/fbk67b6z.aspx)，所以我的代码看起来几乎完全相同。是否可以：首先 - 向 datagridviews 绑定数据源添加新行，然后通过单击更新按钮更新数据库？我设法获得了所选行的克隆，它将用作新行的模板。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:49:41.373

您可以使用 DataGridView 的 OnRowsAdded 事件。这是此活动的链接：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.onrowsadded.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.onrowsadded.aspx)。在这种情况下，您可以遍历添加的每一行，并使用 Insert 语句将它们插入数据库中。我从来没有使用过那个事件，但它看起来像你需要的。

编辑：我刚刚在您的示例中看到了这一点。

```
private void submitButton_Click(object sender, System.EventArgs e)
{
    // Update the database with the user's changes.
    dataAdapter.Update((DataTable)bindingSource1.DataSource);
} 
```

如果您为 DataGridView 激活了 EditMode 和一个提交按钮，这不可行吗？您必须有权访问 SqlDataAdapter，因此将其声明为全局变量，您就可以在提交按钮的单击事件中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:22:41.100

> 好吧，我不能做这样的事情 dataGridView1.Rows.Add(selected_row); 它抛出一个异常。而且我不知道如何在我的数据库中插入一行。– user1651521 1 小时前

对于数据绑定的网格，您不能将行直接添加到数据网格中。您必须将新行添加到绑定表中。

因此，如果您使用与该示例相同的代码，您将向 DataTable 添加一条新记录，该记录是您的 bindingsource 对象的数据源。所以是这样的：

```
private void addButton_Click(object sender, System.EventArgs e)
{
    //I'm assuming your datatable is a member level variable 
    //otherwise you could get it through the grid
    //have the datatable send you back a new row
    DataRow newRow = table.NewRow();
    //populate your new row with default data here
    //....
    //add the new row to the data table
    table.Rows.Add(newRow);
} 
```

# android - 从 Web 服务发送的 XML 响应中获取属性

> ID：12389492
> 
> 赞同：0
> 
> 时间：2012-09-12T13:38:04.030
> 
> 标签：android, xml, web-services, ksoap2

通过 Android 应用程序访问 Web 服务我通常使用 Ksoap2 库和代码：

```
 response.getProperty("field") 
```

其中“field”是 XML 的元素名称，response 是我在其中“捕获”了 WS 答案的soapObject。与此答案相关的典型 XML 是：

```
 <registry> 
     <cf>issjdeodk1292983ls</cf> 
     <name>John</name> 
     <surname>Doe</surname> 
     <sex>M</sex>
     <message>a simple optional message</message>
   </registry> 
```

在这种情况下，当我尝试访问“消息”字段时没有问题：

```
 response.getProperty("message") 
```

准确返回字符串“一个简单的可选消息”

但是我的 Web 服务，如果未找到消息（服务器端）返回以下 XML 文件

```
 <registry> 
     <cf>issjdeodk1292983ls</cf> 
     <name>John</name> 
     <surname>Doe</surname> 
     <sex>M</sex>
   </registry> 
```

也就是之前没有标签的同一个XML。在这种情况下，如果我使用代码： response.getProperty("message")

发生错误。我可以使用仅在存在的情况下获取属性的机制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:51:23.403

我不确定您使用的是哪个库，但是在使用 xmlpullparser 时，您可以通过以下方式查找是否有类似的标签

```
if (parser.getName() == "message") { .... 
```

# java - 如何将信息保存在 Java 中的现有文本文件中？

> ID：12389505
> 
> 赞同：-1
> 
> 时间：2012-09-12T13:38:23.903
> 
> 标签：java, file, text, load, save

我想将信息保存在我已经创建的文本文件中。在学校，我们只学会了创建一个新的并在其中保存信息。

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:40:53.640

默认情况下，如果您创建`FileOutputStream`or `FileWriter`，它只会覆盖现有的文本文件 - 所以如果这是您想要做的，那么您已经很好了。

如果要*追加*到文件，请使用构造函数的重载，用于那些需要`boolean`参数来指示追加/覆盖的类型：

```
FileOutputStream output = new FileOutputStream("data.txt", true); 
```

顺便说一句，如果您*一直*在使用. 这允许您指定要使用的编码，而不是始终使用平台默认编码。`FileWriter``FileOutputStream``OutputStreamWriter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:40:56.803

```
FileWriter fw = FileWriter(new File(pathToFile), true);  
fw.write(stringToWrite); 
```

# sql - Sql Server 2008 快速递归查询

> ID：12389507
> 
> 赞同：2
> 
> 时间：2012-09-12T13:38:26.913
> 
> 标签：sql, sql-server, sql-server-2008

我有三个表 t1、t2 和 t3。t1 有我的第一点

```
--------------------------
| t1
--------------------------
| objectId, x, y     <--(these are fields)
--------------------------
| 30536, 1364690.09169,16518759.7879
|
-------------------------- 
```

t2 有我的几条折线，它们是它们的端点

```
--------------------------
| t2
--------------------------
| objectId, from_x, from_y, to_x, to_y     <--(these are fields)
--------------------------
| 43664, 1364815.8770, 16518764.8200, 1364806.6780, 16518760.9000
| 43665, 1364806.6780, 16518760.9000, 1364710.2130, 16518719.7700
| 43666, 1364710.2130, 16518719.7700, 1364709.4300, 16518720.3000
| 43667, 1364709.4300, 16518720.3000, 1364690.0920, 16518759.7900
| 43370, 1364843.6870, 16518667.7600, 1364815.8770, 16518764.8200
|------------------------- 
```

t3 有我整条线的最终终点

```
--------------------------
| t3
--------------------------
| objectId, x, y     <--(these are fields)
--------------------------
| 11191, 1364843.68657, 16518667.7589
|
-------------------------- 
```

我确实四舍五入到小数点后两位，所以端点在某一点或另一点匹配。我需要做的是创建某种类型的递归查询来完成从开始到所有连接折线到最终端点的线。现在一些折线并不总是从 -> 到它可能是相反的方式到 -> 从这样一种组合。在这个例子中

这条线（30536 -> 43667 -> 43666 -> 43665 -> 43664 -> 43370 -> 11191）到达我的最终目的地。所以我只需要结果中的起点（30536）和终点（11191）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:36:00.290

不容易，但我可以举个例子。

这是一个[SQLFiddle](http://www.sqlfiddle.com/#!3/a61c1/1)，它具有像您这样的基本表结构和`CTE`解决方案。基本实现你需要的递归查询`CTE`。但这有点困难，因为你有 3 个不同的表。如果您可以在一个表中定义所有点并且可以为起点和终点添加一个不存在的值，那么如果不是这样，它会容易得多。（甚至为 NULL）。

**表结构：**

```
CREATE TABLE startpoint(
  id int,
  x int,
  y int
)

CREATE TABLE points(
  id int,
  fx int,
  fy int,
  tx int,
  ty int
)

CREATE TABLE endpoint(
  id int,
  x int,
  y int
)

INSERT INTO startpoint VALUES(1, 1,1)
INSERT INTO startpoint VALUES(6, 2,4)
INSERT INTO points VALUES (2, 1,1 , 2,1)
INSERT INTO points VALUES (3, 2,1 , 2,2)
INSERT INTO points VALUES (4, 2,4 , 2,5)
INSERT INTO points VALUES (7, 2,5 , 3,2)
INSERT INTO points VALUES (8, 3,2 , 3,3)
INSERT INTO points VALUES (9, 3,3 , 3,4)
INSERT INTO endpoint VALUES(5, 2,2)
INSERT INTO endpoint VALUES(10, 3,4) 
```

**询问：**

```
WITH CTE_Points
AS
(
   SELECT
  -1 AS FromID,
  s.ID AS ToID,
  -1 AS fx,
  -1 AS fy,
  s.x as tx,
  s.y as ty
  FROM startpoint s
  WHERE s.ID = 6

  UNION ALL

  SELECT 
  cte1.ToID AS FromID,
  points.ID AS ToID,
  points.fx,
  points.fy,
  points.tx,
  points.ty
  FROM points
  INNER JOIN  CTE_Points cte1 ON (points.fx = cte1.tx AND points.fy = cte1.ty)
  OR (points.tx = cte1.fx AND points.ty = cte1.fy)
  WHERE points.ID != cte1.ToID AND points.ID != cte1.FromID 

  UNION ALL

  SELECT
  e.ID AS FromID,
  -1 AS ToID,
  -1 AS fx,
  -1 AS fy,
  -1 AS tx,
  -1 AS ty
  FROM CTE_Points
  INNER JOIN endpoint e ON (CTE_Points.fx = e.x AND CTE_Points.fy = e.y)
  OR (CTE_Points.tx = e.x AND CTE_Points.ty = e.y)
  OR (points.fx = cte1.fx AND points.fy = cte1.fy)
  OR (points.tx = cte1.tx AND points.ty = cte1.ty)
  WHERE e.ID != CTE_Points.ToID AND e.ID != CTE_Points.FromID 

  )
SELECT FromID AS ID FROM CTE_Points
WHERE FromID != -1
UNION
SELECT ToID AS ID FROM CTE_Points
WHERE  ToID != -1 
```

您可以尝试将 s.ID 从 6 更改为 1，如何分别选择两个“方式”。

（**注意：**这仅在您的表中没有连接时才有效，例如：Record1.FromX = Record2.FromX AND Record1.FromY = Record2.FromY）

# jakarta-ee - 除了带注释的控制器类之外，为什么还要在 Spring MVC 中使用 servlet？

> ID：12389511
> 
> 赞同：0
> 
> 时间：2012-09-12T13:38:47.970
> 
> 标签：jakarta-ee, servlets, spring-mvc

**背景**

我是 Spring MVC 的新手，但我可以清楚地看到使用带有 @Controller 注释的类而不是 HttpServlet 的子类的好处。

**问题**

由于 spring 允许您拥有多个 servlet-context 文件，因此我假设有些人将带注释的控制器类和标准 HttpServlet 混合在一起。我的问题是你为什么想要？那么您是否不必费心将那个 servlet 连接到适当的视图而失去了选择 Spring MVC 的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:11:56.937

Spring 的主要思想之一是使其不显眼——如果您决定在应用程序中使用 Spring，则不应被迫重写所有代码。

从这个角度来看，在 Spring 应用程序`Servlet`之外使用 s`DispatcherServlet`是很合理的：您可能有`Servlet`s 包含遗留代码，或者以 s 实现的第三方库`Servlet`（Web 服务、RPC、其他 Web 框架等）。您不想一次重写这些遗留组件，但是 Spring 允许您通过将应用程序的核心服务移动到根应用程序上下文来利用其在这些组件中的优势，以便您也可以从 Spring MVC 控制器中使用它们和其他`Servlet`的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:52:04.867

Spring 注释控制器与 Spring DispatcherServlet 结合使用。这是 HttpServlet 的 Spring 实现，它提供了[文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)中描述的所有功能。

DispatcherServlet 在 web.xml 中配置，并提供了 Spring 配置的位置。这可以是一个或多个 xml 文件，或者注释为 @Configuration 的多个类之一（来自 Spring 3.1）。

此配置应包含元素（或@EnableWebMvc）。这将触发 spring 在应用程序启动时扫描 @Controller 类的类路径。

# javascript - Rails 3.2 js.erb 文件转义 JS

> ID：12389517
> 
> 赞同：0
> 
> 时间：2012-09-12T13:39:18.693
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我是 Rails 新手，我对某些事情感到困惑。

我正在使用 js.erb 文件向我显示从服务器获取的产品列表。我感到困惑的是如何在 js.erb 文件中执行此操作并且它可以工作：

```
<ul class="list-bordered" id="products">
    <%= render_cell :businesses, :index, {:businesses => @businesses} %>
</ul>

<%= render :partial => 'partials/infinite', :locals => {:segment => businesses_path, :container => '#businesses'} %> 
```

并且所有其他 JS 代码都被转义，因此

```
var t = 0; 
```

在页面中输出为“var t=0;”

我检查了服务器日志，响应确实是 JS。我正在使用 respond_with，并检查我确实在响应 JS 请求。

**附带问题**：以“最佳实践方式”说话，在 .js.erb 文件中包含 html 代码可以吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:02:31.083

由于您正在触发 AJAX 请求，它的数据类型`script`现在是在`.js.erb`文件中，您可以轻松编写 Javascript 代码。

```
$("#products").html("<%=escape_javascript(render_cell :businesses, :index, {:businesses => @businesses}%>") 
```

现在您可以`.js.erb`根据自己的意愿操作您的或 HTML；这只是一个示例，您如何在`.js.erb`.

现在假设您在客户端呈现 HTML（考虑数据类型是`text/html`）。在 AJAX 成功后，您必须替换该 HTML。

# c - Representing EOF in C code?

> ID：12389518
> 
> 赞同：57
> 
> 时间：2012-09-12T13:39:20.723
> 
> 标签：c, character, ascii, eof

The newline character is represented by `"\n"` in C code. Is there an equivalent for the end-of-file (EOF) character?

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-09-12T13:42:16.557

EOF is not a character (in most modern operating systems). It is simply a condition that applies to a file stream when the end of the stream is reached. The confusion arises because a user may *signal* EOF for console input by typing a special character (e.g Control-D in Unix, Linux, *et al*), but this character is not seen by the running program, it is caught by the operating system which in turn signals EOF to the process.

Note: in some very old operating systems EOF *was* a character, e.g. Control-Z in CP/M, but this was a crude hack to avoid the overhead of maintaining actual file lengths in file system directories.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-12T13:48:50.400

`EOF` is not a character. It can't be: A (binary) file can contain any character. Assume you have a file with ever-increasing bytes, going 0 1 2 3 ... 255 and once again 0 1 ... 255, for a total of 512 bytes. Whichever one of those 256 possible bytes you deem `EOF`, the file will be cut short.

That's why `getchar()` et al. return an `int`. The range of possible return values are those that a `char` can have, plus a genuine `int` value `EOF` (defined in `stdio.h`). That's also why converting the return value to a `char` *before* checking for `EOF` will not work.

Note that some protocols have "EOF" "characters." ASCII has "End of Text", "End of Transmission", "End of Transmission Block" and "End of Medium". Other answers have mentioned old OS'es. I myself input ^D on Linux and ^Z on Windows consoles to stop giving programs input. (But files read via pipes can have ^D and ^Z characters anywhere and only signal EOF when they run out of bytes.) C strings are terminated with the `'\0'` character, but that also means they cannot *contain* the character `'\0'`. That's why all C non-string data functions work using a `char` array (to contain the data) and a `size_t` (to know where the data ends).

Edit: The C99 standard §7.19.1.3 states:

> The macros are [...]
> **EOF**
> which expands to an integer constant expression, with type `int` and a negative value, that is returned by several functions to indicate *end-of-ﬁle*, that is, no more input from a stream;

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-12T13:43:22.910

No. EOF is not a character, but a state of the filehandle.

While there are there are control characters in the ASCII charset that represents the end of the data, these are not used to signal the end of files in general. For example [EOT](http://en.wikipedia.org/wiki/End-of-transmission_character) (^D) which in some cases almost signals the same.

When the standard C library uses signed integer to return characters and uses -1 for end of file, this is actually just the signal to indicate than an error happened. I don't have the C standard available, but to quote SUSv3:

> If the end-of-file indicator for the stream is set, or if the stream is at end-of-file, the end-of-file indicator for the stream shall be set and fgetc() shall return EOF. If a read error occurs, the error indicator for the stream shall be set, fgetc() shall return EOF, and shall set errno to indicate the error.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-16T15:28:53.647

I've read all the comments. It's interesting to notice what happens when you print out this:

```
printf("\nInteger =    %d\n", EOF);             //OUTPUT = -1
printf("Decimal =    %d\n", EOF);               //OUTPUT = -1
printf("Octal =  %o\n", EOF);                   //OUTPUT = 37777777777
printf("Hexadecimal =  %x\n", EOF);             //OUTPUT = ffffffff
printf("Double and float =  %f\n", EOF);        //OUTPUT = 0.000000
printf("Long double =  %Lf\n", EOF);            //OUTPUT = 0.000000
printf("Character =  %c\n", EOF);               //OUTPUT = nothing 
```

As we can see here, EOF is NOT a character (whatsoever).

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-01T20:00:57.077

The `EOF` character recognized by the command interpreter on Windows (and MSDOS, and CP/M) is 0x1a (decimal 26, aka `Ctrl`+`Z` aka SUB)

It can still be be used today for example to mark the end of a human-readable header in a binary file: if the file begins with `"Some description\x1a"` the user can dump the file content to the console using the `TYPE` command and the dump will stop at the `EOF` *character*, i.e. print *Some description* and stop, instead of continuing with the garbage that follows.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T13:42:40.840

This is system dependent but often -1\. See [here](http://en.wikipedia.org/wiki/End-of-file)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-12T13:43:40.693

I think it may vary from system to system but one way of checking would be to just use `printf`

```
#include <stdio.h>
int main(void)
{
    printf("%d", EOF);
    return 0;
} 
```

I did this on Windows and `-1` was printed to the console. Hope this helps.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-27T13:18:11.217

The value of EOF can't be confused with any real character.

If `a= getchar()`, then we must declare `a` big enough to hold any value that `getchar()` returns. We can't use `char` since `a` must be big enough to hold EOF in addition to characters.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-23T10:50:44.193

The answer is NO, but...

You may confused because of the behavior of `fgets()`

From [http://www.cplusplus.com/reference/cstdio/fgets/](http://www.cplusplus.com/reference/cstdio/fgets/) :

> Reads characters from stream and stores them as a C string into str until (num-1) characters have been read or **either a newline or the end-of-file** is reached, whichever happens first.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-18T03:52:31.920

I have been researching a lot about the EOF signal. In the book on Programming in C by Dennis Ritchie it is first encountered while introducing putchar() and getchar() commands. It basically marks the end of the character string input.

For eg. Let us write a program that seeks two numerical inputs and prints their sum. You'll notice after each numerical input you press Enter to mark the signal that you have completed the iput action. But while working with character strings Enter is read as just another character ['\n': newline character]. To mark the termination of input you enter ^Z(Ctrl + Z on keyboard) in a completely new line and then enter. That signals the next lines of command to get executed.

```
#include <stdio.h>

int main()
{
char c;
int i = 0;
printf("INPUT:\t");
c = getchar();

while (c != EOF)
{
   ++i;
   c = getchar();

};

printf("NUMBER OF CHARACTERS %d.", i);

return 0;} 
```

The above is the code to count number of characters including '\n'(newline) and '\t'( space) characters. If you don't wanna count the newline characters do this :

```
#include <stdio.h>

int main()
{
char c;
int i = 0;
printf("INPUT:\t");
c = getchar();

while (c != EOF)
{
    if (c != '\n')
    {
        ++i;
    }

    c = getchar();
    };

printf("NUMBER OF CHARACTERS %d.", i);

return 0;}. 
```

NOW THE MAIN THINK HOOW TO GIVE INPUT. IT'S SIMPLE: Write all the story you want then go in a new line and enter ^Z and then enter again.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-12T13:42:51.340

There is the constant `EOF` of type int, found in stdio.h. There is no equivalent character literal specified by any standard.

# gnuplot - gnuplot - 设置透明直方图

> ID：12389520
> 
> 赞同：3
> 
> 时间：2012-09-12T13:39:22.000
> 
> 标签：gnuplot, histogram

我正在尝试叠加两个直方图，我需要第二个（图像中的蓝色）是透明的，以便可以看到它下面的一个：

![在此处输入图像描述](../Images/c413918b319ae54a78d40c8fafd633bd.png)

这是我正在使用的代码：

```
#!/bin/bash
gnuplot << EOF

set term postscript portrait color enhanced 
set output 'test.ps'
set size ratio 1
set multiplot
set size 0.5,0.5

n=20    #number of intervals
max=1.0 #max value
min=0.0    #min value
width=(max-min)/n        #interval width
hist(x,width)=width*floor(x/width)+width/2.0

set boxwidth width*0.9
set xrange [0:1]
plot "/path_to_file" u (hist(\$1,width)):(1.0) smooth freq w boxes lc rgb "black" lt 1 lw 0.5 notitle fs solid 0.5, \
"/path_to_file" u (hist(\$2,width)):(1.0) smooth freq w boxes  notitle fs transparent pattern 4 noborder lc rgb "blue" lt 1 lw 0.5

EOF 
```

这是可以与上述代码一起使用的文件：http: [//pastebin.com/5qpFHgtZ](http://pastebin.com/5qpFHgtZ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:40:26.837

当我将终端更改为`png`（或`pdf`或`pdfcairo`）（例如`set term png enhanced`）时，我得到一个看起来正确的图。

然而，gnuplot 似乎认为`postscript`应该创建一个透明的图（见下表，取自`help transparent`）。所以，我的诊断是它要么是 gnuplot 中的错误，要么是文档中的错误。

```
 terminal   solid pattern    pm3d
   --------------------------------
   gif           no     yes      no
   jpeg         yes      no     yes
   pdf          yes     yes     yes
   png    TrueColor   index     yes
   post          no     yes      no
   svg          yes      no     yes
   win          yes     yes     yes
   wxt          yes     yes     yes
   x11           no     yes      no 
```

# php - CakePhp 从另一个表中为特定用户提取数据

> ID：12389521
> 
> 赞同：0
> 
> 时间：2012-09-12T13:39:23.590
> 
> 标签：php, cakephp-2.0

我有一个 cakephp2 应用程序，用户根据他们在数据库上的凭据登录。身份验证和授权工作正常。

我有一个笔记表，其中存储了用户的笔记。每个用户可以有很多笔记。

在一个页面上，我需要提取登录用户的所有笔记。

我创建了一个笔记模型：

```
class Note extends AppModel {

public $name = 'Note';

public $belongsTo = 'User';

} 
```

在我的用户模型中，我有：

```
class User extends AppModel {
public $name = 'User';
public $displayField = 'name';
public $hasMany = 'Note';.... 
```

在我创建的用户控制器中：

```
public function getnotes($id = null) {
$this->User->id = $id;
} 
```

但无论我运行什么 find 语句，我都不能只获取特定用户的注释。我运行 debug($id) 并在屏幕上显示为 false，因此显然当前用户 ID 未被识别。

我必须列出用户的所有笔记，然后链接到每个单独的笔记页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:21:58.047

在 cakePHP 中集成一个 AUTH 组件 ...这样您将通过 auth 函数和数组（$this->Auth->user('id')) 登录用户 ID/信息

对于身份验证集成，请使用以下链接作为参考 [http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

现在像这样使用这个用户 ID 来查找记录

$this->Note->find('all',array('conditions'=>array('Note.user_id'=>$this->Auth->user('id')))

# wix - wix 3.6 ComponentGroupRef Id="Product.Generated" 给出错误，wix 3.5 没有

> ID：12389522
> 
> 赞同：9
> 
> 时间：2012-09-12T13:39:24.523
> 
> 标签：wix, wix3.6

我刚刚将 wix 更新到 3.6，升级后我的 wix 项目无法构建。

xml 中的以下行触发错误：

```
<ComponentGroupRef Id="Product.Generated"/> 
```

错误解释如下：

```
error LGHT0094: Unresolved reference to symbol 'WixComponentGroup:Product.Generated' in section 'Product:*'. 
```

如果我注释掉 ComponetGroupRef 元素，则创建的 msi 没有任何错误，并且它似乎与升级到 3.6 之前一样工作。

失败：

```
<Feature Id="ProductFeature" Title="My.net Server" Level="1">
   <ComponentRef Id="My.Server" />
   <ComponentRef Id="My.Server.exe.config"/>
   <!-- Note: The following ComponentGroupRef is required to pull in generated authoring from project references. -->
   <ComponentGroupRef Id="Product.Generated" />
</Feature> 
```

作品：

```
<Feature Id="ProductFeature" Title="My.net Server" Level="1">
   <ComponentRef Id="My.Server" />
   <ComponentRef Id="My.Server.exe.config"/>
</Feature> 
```

任何人都可以阐明这个错误吗？我是否破坏了我应该注意或修复的东西？该条目有多重要，它到底有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:24:28.247

今天发布的完全相同的问题，[LGHT0094：未解决在“产品：*”部分中对符号“WixComponentGroup：Product.Generated”的引用](https://stackoverflow.com/questions/12386211/lght0094-unresolved-reference-to-symbol-wixcomponentgroupproduct-generated-i/12386738#12386738)您应该在提出问题之前进行搜索，道歉在那里有点粗鲁，很匆忙。在发布之前进行快速搜索总是好的，它可以防止downvoting .. :)

# php - facebook 通过 searchterm 获取所有公开的照片

> ID：12389523
> 
> 赞同：1
> 
> 时间：2012-09-12T13:39:26.097
> 
> 标签：php, facebook, api, facebook-graph-api, photos

我写了一个 cronjob，cronjob 从 facebook 获取数据并显示。我曾经获取数据[https://graph.facebook.com/search?q=query&type=posts](https://graph.facebook.com/search?q=query&type=posts) 我得到了所有公开帖子，但我只得到共享的照片。

如何通过给定的搜索词获取 facebook 中的所有照片。

# python - 在 Python 线程中导入

> ID：12389526
> 
> 赞同：17
> 
> 时间：2012-09-12T13:39:32.073
> 
> 标签：python, multithreading, concurrency, locking, python-import

我有一些使用交互式加载 python 模块的函数`__import__`

我最近偶然发现了一些关于 Python 中的“导入锁”的文章，即专门用于导入的锁（不仅仅是 GIL）。但是这篇文章很旧，所以也许这不再是真的了。

这让我想知道在线程中导入的做法。

1.  `import`/`__import__`线程安全吗？
2.  他们可以创建死锁吗？
3.  它们会导致线程应用程序中的性能问题吗？

编辑 2012 年 9 月 12 日

感谢 Soravux 的精彩回复。所以导入是线程安全的，我不担心死锁，因为`__import__`在我的代码中使用的函数不会相互调用。

即使模块已经导入，您是否知道是否获得了锁？如果是这种情况，我可能应该在 sys.modules 中查看模块是否已经被导入，然后再调用`__import__`.

当然，这在 CPython 中应该不会有太大的不同，因为无论如何都有 GIL。但是，它可能会对 Jython 或无堆栈 python 等其他实现产生很大影响。

编辑 2012 年 9 月 19 日

关于 Jython，这是他们在文档中所说的：

[http://www.jython.org/jythonbook/en/1.0/Concurrency.html#module-import-lock](http://www.jython.org/jythonbook/en/1.0/Concurrency.html#module-import-lock)

> 然而，Python 确实定义了一个由 Jython 实现的模块导入锁。每当导入任何名称时都会获取此锁。无论导入是通过 import 语句、等效的`__import__`内置函数还是相关代码，都是如此。需要注意的是，即使相应的模块已经被导入，模块导入锁仍然会被获取，即使只是短暂的。

因此，在进行导入之前检查 sys.modules 以避免获取锁似乎是有意义的。你怎么看？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T15:04:24.020

更新：从 Python 3.3 开始，导入锁是每个模块而不是全局的，并且`imp`不推荐使用[`importlib`](https://docs.python.org/3/library/importlib.html#module-importlib). 有关[更改日志](https://docs.python.org/3.3/whatsnew/3.3.html#a-finer-grained-import-lock)和[此问题票](https://bugs.python.org/issue9260)的更多信息。

**下面的原始答案早于 Python 3.3**

普通导入是线程安全的，因为它们在执行之前获取一个导入锁，并在导入完成后释放它。如果您使用可用的钩子添加自己的自定义导入，请务必向其中添加此锁定方案。Python 中的锁定设施可以由`imp`模块 ( `imp.lock_held()`/ `acquire_lock()`/ `release_lock()`) 访问。**编辑：**自 Python 3.3 以来已弃用，无需手动处理锁。

[除了已知](http://docs.python.org/faq/programming.html#what-are-the-best-practices-for-using-import-in-a-module)的循环依赖（模块`a`导入模块`b`导入模块`a`）之外，使用此导入锁不会产生任何死锁或依赖错误。**编辑：** Python 3.3 更改了每个模块的锁定机制，以防止循环导入导致的死锁。

存在多种创建新进程或线程的方法，例如[`fork`](https://linux.die.net/man/2/fork)和[`clone`](http://linux.die.net/man/2/clone)（假设是 Linux 环境）。在创建新进程时，每种方式都会产生不同的内存行为。默认情况下，fork 会复制大多数内存段（数据（通常是 COW）、堆栈、代码、堆），实际上不会在子节点和父节点之间共享其内容。a `clone`（通常称为线程，这是 Python 用于线程的）的结果与其父级共享所有内存段，但堆栈除外。Python 中的导入机制使用*不*放在堆栈上的全局命名空间，因此在其线程之间使用共享段。这意味着所有的内存修改（堆栈除外）都由一个`import`在一个线程中将对其所有其他相关线程和父线程可见。如果导入的模块是纯 Python 的，则它在设计上是线程安全的。如果导入的模块使用非 Python 库，请确保它们是线程安全的，否则**会**在多线程 Python 代码中造成混乱。

顺便说一句，Python 中的线程程序会受到[GIL的影响，除非您的程序受 I/O 限制或依赖于 C 或外部线程安全库（因为它们](http://wiki.python.org/moin/GlobalInterpreterLock)*应该*在执行之前释放 GIL），否则不会获得太多性能提升。由于这个 GIL，在两个线程中运行相同的导入 Python 函数不会同时执行。请注意，这只是 CPython 的限制，Python 的其他实现可能有不同的行为。

回答您的编辑：导入的模块都由 Python 缓存。如果模块已经加载到缓存中，它将不会再次运行，并且导入语句（或函数）将立即返回。您不必自己在 sys.modules 中实现缓存查找，Python 会为您执行此操作并且不会`imp`锁定任何内容，除了用于 sys.modules 查找的 GIL。

回答您的第二次编辑：与尝试优化对我使用的库（在本例中为标准库）的调用相比，我更喜欢维护更简单的代码。理由是执行某事所需的时间通常比导入执行该操作的模块所需的时间更重要。此外，在整个项目中维护此类代码所需的时间远高于执行所需的时间。这一切都归结为：“程序员的时间比 CPU 的时间更有价值”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-25T22:27:50.067

我在官方文档中找不到有关此问题的答案，但似乎在某些 CPython 3.x 版本中，`__import__`调用不是线程安全的，并且可能导致死锁。请参阅：[https](https://bugs.python.org/issue38884) ://bugs.python.org/issue38884 。

# cordova - Mobile Safari 中可能的输入焦点错误？

> ID：12389528
> 
> 赞同：1
> 
> 时间：2012-09-12T13:39:38.373
> 
> 标签：cordova, input, keyboard, focus

我正在使用以下插件在 phonegap 应用程序中创建虚拟键盘：

[http://mottie.github.com/Keyboard/mobile.html](http://mottie.github.com/Keyboard/mobile.html)

除了光标不只出现在 Mobile Safari 中之外，这可以 100% 正常工作。

试一试，将您的 iOS 设备指向该 URL，然后观察如何完全没有光标。

但是，当您在任何其他桌面浏览器（包括桌面 Safari）中打开该 URL 时，光标会像预期的那样闪烁。

我的问题是我是否可以做任何事情来在移动 Safari 中显示光标，或者这是否是 Apple 的错误/或要求。另外请记住，我们根本不希望显示本机键盘，因此在输入字段中点击是不可能的，因为它会生成本机键盘。

我们只想在我们的应用程序中使用虚拟键盘。

**更新：**

我们距离将应用程序提交到 AppStore 还差 99.9%，我们只是不想在没有光标闪烁的情况下进行部署。它看起来很糟糕，从可用性的角度来看，我们甚至不确定 Apple 是否会批准这样的功能。

我们的测试设备正在运行：5.1.1 (9B206)。

**编辑：**

因为这可能是实际库本身的错误。我也在 Github 上发布了一个问题：

[移动 Safari 不显示插入符号/光标](https://github.com/Mottie/Keyboard/issues/105)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:51:06.343

不幸的是，它看起来像是 Mobile Safari 中的一个错误，不幸的是目前没有修复：

[移动 Safari 不显示插入符号/光标](https://github.com/Mottie/Keyboard/issues/105#issuecomment-8531265)

# java - jdbc.properties 和 log4j.properties 的文件目录的动态更改

> ID：12389538
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:17.310
> 
> 标签：java, spring, tomcat, web.xml

我在一个 Java Web 项目中工作。我需要根据环境更改文件“jdbc.properties”和“log4j.properties”的文件夹，因为测试、演示和发布对这些文件有不同的值。

我有这个文件夹和子文件夹：

c:\myProject\conf\dev c:\myProject\conf\test c:\myProject\conf\demo

我需要将不同的 jdbc.properties 和 log4j.properties 文件放在每个文件夹中

c:\myProject\conf\dev\log4j.properties c:\myProject\conf\dev\jdbc.properties

c:\myProject\conf\test\log4j.properties c:\myProject\conf\test\jdbc.properties

c:\myProject\conf\demo\log4j.properties c:\myProject\conf\demo\jdbc.properties

这三个项目在同一个服务器和同一个 Apache 中（它是一个 Web 项目）

首先，我进行了一些更改以使用 Windows 系统变量来获取父文件夹 (c:\myProject)。为此，我在 Spring appContext 文件上做了这个：

```
<bean id="propertyConfigurer"
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
<value>file:${PARENT_FOLDER}/conf/dev/jdbc.properties</value> 
</property>
</bean> 
```

“PARENT_FOLDER”在 Windows 环境变量/系统变量中定义

这些更改工作正常。

但是，正如你所看到的，我总是在“/conf/dev”上寻找文件

我需要使动态成为路径的“开发”部分。

我不能使用 Windows 环境变量/系统变量，因为这 3 个环境部署在同一台服务器上。

我正在尝试在 web.xml 上使用“属性”（使用），但我不知道如何在我的 Spring appContext 文件中找到该属性。

我这样定义属性：

```
<env-entry>
    <env-entry-name>ENVIRONMENT</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>Dev</env-entry-value>
</env-entry> 
```

但我不知道如何在 Spring 上访问“ENVIRONMENT”属性

我不知道该怎么办。我有点绝望

有人能帮我吗？

感谢并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:54:38.307

你考虑过使用[JNDI](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)吗？

使用 JNDI，您将在 tomcat 内部定义数据库连接属性。这样你的 spring 配置就独立于环境，你可以在所有环境中部署相同的 war。另请参阅[此](https://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring)。

如果您需要在本地运行它，您可以随时使用“新”[弹簧环境配置文件](http://java.dzone.com/articles/spring-31-environment-profiles)功能。

其他选项（如果 JNDI 不是一个选项并且假设您使用 maven）是 maven 替换插件，您将在构建时生成 db.properties。

# cocoa - 如何覆盖 ARC 中的发布？

> ID：12389539
> 
> 赞同：-3
> 
> 时间：2012-09-12T13:40:19.690
> 
> 标签：cocoa, memory-management, automatic-ref-counting

如何覆盖 ARC 中的发布方法？我需要它只是为了调试目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:14:39.887

你没有。摆弄内存管理例程可能会给您带来无穷无尽的麻烦。

如果您正在处理过度发布（听起来很像），您应该学习使用 Instruments 来代替。这将准确地告诉您所有`-release`呼叫发生的时间以及它们来自何处。

# grails - Spring安全管理控制台

> ID：12389540
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:23.557
> 
> 标签：grails, spring-security

我正在尝试添加 spring security ui 文档中显示的 spring 安全管理控制台。但是，它没有告诉您如何访问它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:20:54.523

一个好的入口点是用户控制器 ( `grails.plugins.springsecurity.ui.UserController`)。如果您使用默认 URL 映射，您将能够`http://localhost:8080/<appname>/user`在开发模式下访问它。

# java - Java：将指数值的结果转换为 int 的问题

> ID：12389541
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:29.360
> 
> 标签：java

假设我的范围是**0-100**，我选择一个随机数 X，比如 29。

现在我将范围增加到一个很大的数字，比如 10 位数字 1023654740。

现在我想在 0-1023654740 中找到那个 X 的位置。（*所以我相信是 1023654740 的 29%*）

如果我使用 执行计算`Double`，我会得到一个指数值。

```
double range = 1023654740;
double position = 29;   // Can be any number from 0 - range
Double val = (((double) position / range) * 100);

Result: 2.8329864422842414E-6 
```

但我想要最终结果`int`。*（不关心最终值是否被四舍五入或截断）*

有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:43:26.043

好像你的结果`Double`就是你不做的原因

```
val.intValue() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:48:28.503

首先，你的计算是错误的。根据您的描述，您可能想要执行以下操作：

```
Double val = ((double)position / 100) * range; 
```

然后您可以通过以下方式获取您的 int 值（通过截断）：

```
int intVal = val.intValue(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:49:11.483

如果是呈现结果的问题，您应该看看：

```
String myBeautifulInteger = NumberFormat.getIntegerInstance().format(val); 
```

如果这只是一个整数的问题。

```
int myInt = val.intValue(); 
```

# vb.net - 如何在 vb.net 的富文本框中制作隐藏文本

> ID：12389543
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:37.460
> 
> 标签：vb.net, hidden, rtf

我正在为我的项目使用 Windows 应用程序。现在我想让一些文本隐藏在富文本框控件中。

那么是否有任何功能可以在富文本框控件中隐藏一些文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:42:54.050

设置文本的颜色以匹配文本框的背景颜色。这将有效地“隐藏”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:48:19.583

如果您不想让他们看到的文本没有人可以修改，请将其放在标签中并将可见属性设置为 false。

如果您想捕获他们进入文本框但不显示在 UI 中，您可以使用 keypress/keydown 事件。

# visual-studio-2010 - 编译 C++/CLI .exe

> ID：12389544
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:41.163
> 
> 标签：visual-studio-2010, .net-4.0, compilation, c++-cli

我编写了一个 C++/CLR Windows 窗体程序，它在编译器计算机上运行良好，但在任何其他计算机上都运行良好。目标计算机具有 .Net4 和 C++ 再分发包。我真的不明白需要如何设置设置，并且网络上有关这些东西的信息对于初学者来说非常混乱。我需要如何设置我的编译器才能让这个程序运行？如果我需要链接.dll，我该怎么做。以下是我所知道的关键设置： 运行时库设置为 /MDd；MFC：标准 Windows 库；ATL：到 ATL 的静态链接；CLR:/clr:纯。

编辑：如果我在 tget 计算机上安装 VS，我可以毫无问题地打开 .exe，甚至不会打开 VS 或加载任何源文件。似乎它仍然以某种方式依赖于VS，对此有什么想法以及如何克服它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:44:39.473

/MDd 指定动态**调试**CRT，标准 CRT 可再发行 MSI 不会安装它

尝试将发布版本放在目标机器上。

# jquery - jquery 图片叠加汇总

> ID：12389545
> 
> 赞同：1
> 
> 时间：2012-09-12T13:40:43.337
> 
> 标签：jquery

只需将一个小脚本放在一起，即可在照片上汇总描述。它工作正常，但它的限制是它汇总的数量是一个硬编码的数字。因此，如果标题只有 1 行，它可以正常工作，但如果标题是 2 行，那么它（显然）不会向上移动。

所以我想要发生的是让它在翻转时标题 div 卷起，以便整个事情都显示出来。不管是多少行。

jQuery：

```
$(".hoverImage").hover(
function(){
    $(this).find(".overlay").animate({top: "108"}, 500 );
},
 function(){
    $(this).find(".overlay").animate({top: "126"}, 500 );
}); 
```

html:

```
 <div class="hoverImage">
    <div class="overlay">
    Headline Goes Here<br>Story text goes here<a href="">[learn more...]</a>
    </div>
    <img src="http://www.ABCDEFG.com/slice.jpg" />
    </div> 
```

CSS：

```
<style>
.hoverImage{
width: 228px;
height: 151px;
overflow: hidden;
position: relative; 
float:left;
margin-right:10px;  
}
.overlay{
width:220px;
color: #ffffff;
background: url("http://www.ABCDEFG.com/blackBg.png") repeat scroll 0 0 transparent;
position: absolute;
padding-left: 5px;
top: 126px;
} 
```

[您可以在此处查看示例和小提琴](http://jsfiddle.net/vWeXU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:49:39.267

您可以使用`bottom`属性，而不是`top`：

```
.overlay{
   ...
   bottom: -20px;
} 
```

```
$(".hoverImage").hover(
function() {
    $(this).find(".overlay").animate({
        bottom: "0"
    }, 500);
}, function() {
    $(this).find(".overlay").animate({
        bottom: "-20px"
    }, 500);
}); 
```

[http://jsfiddle.net/MLqWH/](http://jsfiddle.net/MLqWH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:09:43.287

你应该把 if 语句像：

if $('YOUR.CLASS.NAME').val(); 或者如果 $(YOUR.CLASS.NAME).width(); IS == YOUR-PREFERRED-VALUE THEN {YOUR ACTION} 所以你的动作可以是 .animate.stop() 或 $(this).css("width") = YOUR-PREFERED-VALUE 。我觉得你应该限制你的 THING 高度或宽度。

我想到的另一种方法是在 Jquery 中使用 bottom = 0 并使用 height 或 width to 100% 。

希望能帮助到你 。

# html - 为什么这种形式使用 HTML 实体对撇号进行编码，并保留拉丁重音字母的原样？

> ID：12389546
> 
> 赞同：0
> 
> 时间：2012-09-12T13:40:44.133
> 
> 标签：html, spring, encoding

我正在尝试解决我工作的公司的应用程序的错误。我有一个奇怪的问题：基本上，如果我在 textarea 中键入以下字符串，`Hello 'd'd' nénéné`它将接收（服务器端）它以下列方式发布到我的应用程序控制器（Spring）：`Hello &#39;d&#39;d&#39; nénéné`....奇怪的是重音 Es 仍然存在不变，而撇号被转义......但是在控制器端没有转义。

我正在使用spring，但我真的不知道是否有过滤器或拦截器在中间做一些奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:44:45.820

我想这是一个 Spring [SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)保护：`'`必须在发送到服务器时进行转义，而`é`这并不危险。

# ios - 如何使用手势识别器在大图像上画线而不会出现内存问题

> ID：12389554
> 
> 赞同：0
> 
> 时间：2012-09-12T13:41:06.023
> 
> 标签：ios, ipad, drawing, core-graphics, cgcontext

我正在开发一个应用程序，在某些时候用户需要在图像上绘制一些东西。我编写的代码适用于周围`1500x1500`和较小的图像，但是一旦图像变大，问题就开始了。

当图像变得太大时，绘制需要更多时间，并且手势识别器很少被调用。

我是这样做的：有两个类，一个是`UIScrollView`名为的子类，一个是名为`DrawView`的`UIImageView`子类`MyPen`。`DrawView`有一个每次被识别时都会`UIPanGestureRecognizer`发送消息（我得到并根据它开始或移动一行）。在其子视图中有两个 UIImageView 对象，一个用于背景图像，一个用于绘图（笔）。`MyPen``[recognizer state]``DrawView`

这是我在 MyPen 中所做的：

```
- (void)beginLine:(CGPoint) currentPoint
{
    previousPoint = currentPoint;
}

- (void)moveLine:(CGPoint) currentPoint
{
    self.image = [self drawLineFromPoint:previousPoint toPoint:currentPoint image:self.image];
    previousPoint = currentPoint;
}

- (UIImage *)drawLineFromPoint:(CGPoint)fromPoint toPoint:(CGPoint)toPoint image:(UIImage *)image
{
CGSize screenSize = self.frame.size;
UIGraphicsBeginImageContext(screenSize);
CGContextRef currentContext = UIGraphicsGetCurrentContext();
[image drawInRect:CGRectMake(0, 0, screenSize.width, screenSize.height)];

CGContextSetLineCap(currentContext, kCGLineCapRound);
CGContextSetLineWidth(currentContext, _thickness);
CGContextSetStrokeColorWithColor(currentContext, _color);
CGContextBeginPath(currentContext);
CGContextMoveToPoint(currentContext, fromPoint.x, fromPoint.y);
CGContextAddLineToPoint(currentContext, toPoint.x, toPoint.y);
CGContextStrokePath(currentContext);

UIImage *ret = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return ret;
} 
```

当图像足够大时，CoreGraphics 需要一些时间来渲染它，因此手势识别器不会经常被识别，并且向笔发送的点更少。

这里的问题是：有没有办法优化绘图？我应该为 ir 使用另一个线程吗？还有其他方法吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:06:33.347

您应该将前景（线条）和背景（应该在其上绘制线条的图像）拆分为两个视图。所以你只能在用户每次移动手指时更新前景视图。当用户完成绘图时，您可以将两个视图组合成一个图像。

在 CGContext 中绘制图像非常昂贵，尤其是在很大的时候。

# jquery - jquery-ui-timepicker-addon MVC4 没有下拉附加到文本框

> ID：12389557
> 
> 赞同：1
> 
> 时间：2012-09-12T13:41:16.260
> 
> 标签：jquery, asp.net-mvc

无法让 jquery-ui-timepicker-addon 下拉列表与 MVC4 框架一起使用。我正在尝试通过 EditorTemplate 连接时间选择器，以将其附加到我的数据模型中的所有可为空的 DateTime 对象。代码进入脚本，但没有下拉列表附加到文本框。任何帮助将不胜感激。此示例代码：

模型

```
public class MyDateModel
    {

            [Key]
            public int Date_ID { get; set; }
            public DateTime? DATE_APPOINTMENT { get; set; }

    } 
```

语境

```
public class DateContext:DbContext
    {

        public DbSet<MyDateModel> MyDateModels { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {

            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        }
    } 
```

看法

```
@using (Html.BeginForm()) {

    @Html.ValidationSummary(true)

    <fieldset>

        <legend>MyDateModel</legend>

        <div class="editor-label">

            @Html.LabelFor(model => model.DATE_APPOINTMENT)

        </div>

        <div class="editor-field">

            @Html.EditorFor(model => model.DATE_APPOINTMENT)

            @Html.ValidationMessageFor(model => model.DATE_APPOINTMENT)

        </div>

        <p>

            <input type="submit" value="Create" />

        </p>

    </fieldset> 
```

编辑器模板

日期时间.cshtml

```
@model Nullable<System.DateTime>

@if ( Model.HasValue ) {

   @Html.TextBox( "" , String.Format( "{0:MM-dd-yyyy HH:mm}" , Model.Value ) , new  { @class = "textbox" , @style = "width:400px;" } )

}
else {

   @Html.TextBox( "" , String.Format( "{0:MM-dd-yyyy HH:mm}" , DateTime.Now ) , new { @class = "textbox" , @style = "width:400px;" } )

}

@{

string name = ViewData.TemplateInfo.HtmlFieldPrefix;
string id = name.Replace( ".", "_" );
}
<script type="text/javascript">
    $(document).ready(function () {
        $("#@id").datetimepicker();
    });
</script> 
```

从 _Layout.cshtml 调用脚本

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/themes/base/css", "~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link href="../../Content/themes/base/jquery-ui-timepicker-addon.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
</head>
<body>
    <header>
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("Your logo here", "Index", "Home")</p>
            </div>
            <div class="float-right">
                <section id="login">
                    @Html.Partial("_LoginPartial")
                </section>
                <nav>
                    <ul id="menu">
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("About", "About", "Home")</li>
                        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="body">
        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">
            @RenderBody()
        </section>
    </div>
    <footer>
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
            </div>
            <div class="float-right">
                <ul id="social">
                    <li><a href="http://facebook.com" class="facebook">Facebook</a></li>
                    <li><a href="http://twitter.com" class="twitter">Twitter</a></li>
                </ul>
            </div>
        </div>
    </footer>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:17:19.997

所以我找到了答案。诀窍是在_Layou.cshtml 中正确调用脚本。从正文中删除所有脚本调用并将它们放在标题中。这是有效的代码

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/themes/base/css", "~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")

    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <p class="site-title">@Html.ActionLink("Your logo here", "Index", "Home")</p>
                </div>
                <div class="float-right">
                    <section id="login">
                        @Html.Partial("_LoginPartial")

                    </section>
                    <nav>
                        <ul id="menu">
                            <li>@Html.ActionLink("Home", "Index", "Home")</li>
                            <li>@Html.ActionLink("About", "About", "Home")</li>
                            <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div id="body">

            @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
                </div>
                <div class="float-right">
                    <ul id="social">
                        <li><a href="http://facebook.com" class="facebook">Facebook</a></li>
                        <li><a href="http://twitter.com" class="twitter">Twitter</a></li>
                    </ul>
                </div>
            </div>
        </footer>

        @RenderSection("scripts", required: false)
    </body>
</html> 
```

# memory - geforce 卡是否支持 cudaMemcpy3DPeer？

> ID：12389558
> 
> 赞同：1
> 
> 时间：2012-09-12T13:41:17.490
> 
> 标签：memory, cuda, nvidia, tesla

是否可以在 GeForce 卡上使用点对点内存传输，还是只允许在 Teslas 上使用？我假设卡是 2 个 GTX690（每个都有两个 GPU）。

我曾尝试在 Quadro 4000 和 Quadro 600 之间进行复制，但失败了。`cudaMemcpy3DPeer`我通过填充`cudaMemcpy3DPeerParms`结构来传输 3D 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:49:08.797

**对等内存复制**应该在 Geforce 和 Quadro 以及 Tesla 上工作，有关更多详细信息，请参阅[编程指南](http://developer.nvidia.com/cuda/nvidia-gpu-computing-documentation)。

> 可以在两个不同设备的内存之间执行内存复制。
> 
> 当两个设备使用统一地址空间时（请参阅统一虚拟地址空间），这是使用设备内存中提到的常规内存复制功能完成的。
> 
> 否则，这是使用 cudaMemcpyPeer()、cudaMemcpyPeerAsync()、cudaMemcpy3DPeer() 或 cudaMemcpy3DPeerAsync() 完成的

**对等内存访问**，即一个 GPU 可以直接从另一个 GPU 读取数据，需要 UVA（这意味着 64 位操作系统）和 Tesla 以及 2.0 或更高的计算能力。

> Tesla Compute Cluster Mode for Windows）、Windows XP 或 Linux 上，Tesla 系列计算能力 2.0 及更高版本的设备可以相互寻址对方的内存（即，在一个设备上执行的内核可以取消引用指向该设备内存的指针）其他设备）。

# objective-c - Objective-c "in" 运算符

> ID：12389559
> 
> 赞同：3
> 
> 时间：2012-09-12T13:41:17.740
> 
> 标签：objective-c, ios

我注意到您可以在 xcode 的目标 c 中使用“in”。

“在”是什么意思？以及如何在代码中使用它？在谷歌中找不到任何东西，因为“in”可以用于普通句子，结果非常模糊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:43:57.850

"in" 用于[快速枚举](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)obj-c 集合的语法

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T13:44:17.410

[这是有关“in”运算符](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html#//apple_ref/doc/uid/TP30001163-CH18-SW1)的 Apple 官方文档。

基本上，构造

```
for(SomeClass* anObject in aCollection){
      ....
} 
```

遍历集合中的所有对象`aCollection`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:45:41.643

该`in`关键字用于迭代符合`NSFastEnumeration`. 例如，要遍历一个数组：

```
NSArray *a = [NSArray arrayWithObjects: @1, @2, @3, nil];

for (NSNumber *n in a) {
  // Do something with n
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:44:25.980

你在说：

```
for (NSObject* object in myArray)
{

} 
```

这是一个快速枚举。

# java - Linux 上的 Java -Xmx 选项不限制内存消耗

> ID：12389560
> 
> 赞同：0
> 
> 时间：2012-09-12T13:41:19.330
> 
> 标签：java

在 Ubuntu Linux 3.2.0-25-virtual 上使用 Oracle Java 1.7.0_05，在具有 7.5 GB 内存的亚马逊 EC2 实例上，我们启动三个 java 实例，每个实例都使用开关 -Xmx 2000m。

我们使用没有交换空间的默认 Ubuntu EC2 AMI 配置。

在运行这些实例数周后，其中一个会死机——可能内存不足。但我的问题不是要找到我们的内存泄漏。

当我们尝试重新启动应用程序时，java 给我们一条消息，它无法分配 2000 mb 的内存。我们通过重启服务器解决了这个问题。

换句话说，2000 + 2000 + 2000 > 7500？

我们已经两次看到此问题，很抱歉报告我们没有良好的诊断。只有两个剩余的 java 进程，每个进程最多使用 2000 mb，我们怎么会用完空间？下次发生此问题时，我们应该如何进行诊断？我希望我有一个“free -h”输出，当我们无法启动程序时，在这里显示。

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:45:50.300

-Xmx 设置*JVM 堆*的最大大小，而不是`java`进程的最大大小，它在应用程序可用的堆之外分配更多内存：它自己的内存、永久代、在 JNI 库中分配的内容等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:49:06.990

可能有其他进程在使用内存，因此 JVM 无法以 2G 启动。如果您真的需要为每个 3 个 Java 进程提供那么多内存，而您总共只有 7.5 个，您可能需要更改您的 EC2 配置以拥有更多内存。您只需为其他所有内容留下 1.5，包括内核、Oracle 等。

# java - Java中的条件赋值

> ID：12389566
> 
> 赞同：4
> 
> 时间：2012-09-12T13:41:33.487
> 
> 标签：java, variable-assignment

有没有像ruby一样在java中消除空值的好方法有：

```
x = null || "string" 
```

我想做这样的事情。

```
String line = reader.readLine() || ""; 
```

防止传递空值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T13:43:48.133

您可以使用[Guava](https://github.com/google/guava)及其~~[`Objects.firstNonNull`](http://google.github.io/guava/releases/20.0/api/docs/com/google/common/base/Objects.html#firstNonNull-T-T-)~~方法（从 Guava 21.0 中删除）：

```
String line = Objects.firstNonNull(reader.readLine(), ""); 
```

或者对于这种特定情况，[`Strings.nullToEmpty`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Strings.html#nullToEmpty-java.lang.String-)：

```
String line = Strings.nullToEmpty(reader.readLine()); 
```

当然，如果您发现自己经常使用它们，这两者都可以静态导入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T13:43:06.207

不，Java 中没有 null 安全语法。您应该手动进行。或者，您可以创建或使用诸如 commons-lang 之类的实用程序：

```
String line = StringUtils.trimToEmpty(reader.readLine()); 
```

这样你就可以得到值，或者“”，如果它是`null`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:44:29.317

并不真地。您可以将 readline() 的结果分配给临时变量，然后有条件地分配它：

```
String t = reader.readline();
String line = t == null ? "default" : t; 
```

但这是你能做的最好的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:43:36.677

`readLine()`也可以返回 null。当您需要使用`String`.

# ruby - 如何使用#{variable}在Ruby中格式化带有浮点数的字符串？

> ID：12389567
> 
> 赞同：71
> 
> 时间：2012-09-12T13:41:33.543
> 
> 标签：ruby

我想格式化一个包含浮点变量的字符串，其中包括固定数量的小数，我想用这种格式化语法来做到这一点：

```
amount = Math::PI
puts "Current amount: #{amount}" 
```

我想获得`Current amount: 3.14`.

我知道我可以做到

```
amount = Math::PI
puts "Current amount %.2f" % [amount] 
```

但我问是否可以这样做`#{}`。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-12-23T08:34:26.183

您可以使用`"#{'%.2f' % var}"`：

```
irb(main):048:0> num = 3.1415
=> 3.1415
irb(main):049:0> "Pi is: #{'%.2f' % num}"
=> "Pi is: 3.14" 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-09-12T13:44:42.623

使用[`round`](http://ruby-doc.org/core/Float.html#method-i-round)：

```
"Current amount: #{amount.round(2)}" 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-09-12T13:51:29.387

你可以这样做，但我更喜欢这个`String#%`版本：

```
 puts "Current amount: #{format("%.2f", amount)}" 
```

正如@Bjoernsen 指出的那样，`round`这是最直接的方法，它也适用于标准 Ruby（1.9），而不仅仅是 Rails：

[http://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round](http://www.ruby-doc.org/core-1.9.3/Float.html#method-i-round)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-12T13:53:27.660

是的，有可能：

```
puts "Current amount: #{sprintf('%.2f', amount)}" 
```

# jquery - 使用 jquery 的下拉插件

> ID：12389568
> 
> 赞同：1
> 
> 时间：2012-09-12T13:41:36.117
> 
> 标签：jquery, plugins, drop-down-menu

我正在使用列表开发一个下拉插件。我让它工作了，除了如果我在同一页面上有多个下拉菜单，我想关闭所有其他下拉菜单，除了我触发关闭的那个。

这是我所拥有的：

```
(function($){

  $.fn.dropDown = function(options) {
      var defaults = {
          wrapper: 'ul'
      }

    var settings = $.extend({}, defaults, options);

    $(this).find(settings.wrapper).hide();
    $(this).css("cursor","pointer");

        $(this).click(function(event) {
            elem= $(this);
            elem.find(settings.wrapper).toggle();
            elem.find("span").toggleClass("menuOpen");
            event.preventDefault();
            event.stopPropagation();
        });

        $(document).click(function() {  
                elem.find("span").removeClass("menuOpen");  
                elem.find(settings.wrapper).hide(); 
                elem.find(settings.wrapper).find("ul").show();  
        });
  };

})(jQuery); 
```

插件的名称如下：

```
$('.dropdown').dropDown(); 
```

有任何想法吗？

在此先感谢，何塞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:50:42.950

不久前我做了类似的事情。

使您的代码可以选择所有*其他*菜单的一种方法是在运行时为它们提供一个自定义类，如下所示：

`$(this).addClass("__my_menu");`

这样您就可以掌握插件设置的菜单。因此，当您想要关闭除当前菜单之外的所有菜单时，您需要做的就是：

`$('.__my_menu').not($(this)).hide();`

另一点是，在您的`document`点击处理程序中，没有设置 var，`elem`因此它永远不会做任何事情。你应该`$(this)`改用。

进一步阅读：

使用`$.off`and`$.on`而不是`$.click`（在 jQuery 1.7 及更高版本上）：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

`$.not`和其他过滤方法：[http ://api.jquery.com/category/traversing/filtering/](http://api.jquery.com/category/traversing/filtering/)

希望这会有所帮助，祝你好运。

# ms-word - 引用其他文档的内容

> ID：12389569
> 
> 赞同：0
> 
> 时间：2012-09-12T13:41:37.647
> 
> 标签：ms-word, word-2010

我们需要从其他 2 个文档的内容创建一个矩阵。例如：

1.  doc 具有以下字段：

    **4.2 要求 A Blah**

2.  doc 具有以下字段：

    **2.1 分析 A Blah Blah**

我们要创建另一个文档（称为 Traceability Matrix），如下所示：

```
Col1    Col2    Col3
4.2     2.1     Blah Blah Blah 
```

4.2 和 2.1 应该在 doc3 中动态更新。

我们使用超链接、交叉引用进行了检查，但对于组合不同的文档似乎没有任何用处。有没有办法做到这一点？

编辑：这是一个例子：

```
Technical Specification Num         Requirement Num     Requirement
4.2                                 2.1                 A sentence that explains the relationship btw 2 cols: Technical Specification and Requirement Num 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:44:39.347

我现在创建了一个工作示例，说明如何使用 MS Word Interop 和 C# 实现这一点。

代码包含应该解释最有趣部分的注释。

该示例被实现为 C# 控制台应用程序，使用：

*   .NET 4.5
*   Microsoft Office 对象库版本 15.0，以及
*   Microsoft Word 对象库版本 15.0

...也就是说，MS Office 2013 Preview 附带的 MS Word Interop API。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Office.Interop.Word;
using Application = Microsoft.Office.Interop.Word.Application;

namespace WordDocStats
{
    internal class Program
    {
        private static void Main()
        {
            // Open word
            var wordApplication = new Application() { Visible = true };

            // Open document A, get its headings, and close it again
            var documentA = wordApplication.Documents.Open(@"C:\Users\MyUserName\Documents\documentA.docx", Visible: true);
            var headingsA = GetHeadingsInDocument(documentA);
            documentA.Close();

            // Same procedure for document B
            var documentB = wordApplication.Documents.Open(@"C:\Users\MyUserName\Documents\documentB.docx", Visible: true);
            var headingsB = GetHeadingsInDocument(documentB);
            documentB.Close();

            // Open the target document (document C)
            var documentC = wordApplication.Documents.Open(@"C:\Users\MyUserName\Documents\documentC.docx", Visible: true);

            // Add a table to it (the traceability matrix)
            // The number of rows is the number of headings + one row reserved for a table header
            documentC.Tables.Add(documentC.Range(0, 0), headingsA.Count+1, 3);

            // Get the traceability matrix
            var traceabilityMatrix = documentC.Tables[1];

            // Add a table header and border
            AddTableHeaderAndBorder(traceabilityMatrix, "Headings from document A", "Headings from document B", "My Description");

            // Insert headings from doc A and doc B into doc C's traceability matrix
            for (var i = 0; i < headingsA.Count; i++)
            {
                // Insert headings from doc A
                var insertRangeColOne = traceabilityMatrix.Cell(i + 2, 1).Range;
                insertRangeColOne.Text = headingsA[i].Trim();

                // Insert headings from doc B
                var insertRangeColTwo = traceabilityMatrix.Cell(i + 2, 2).Range;
                insertRangeColTwo.Text = headingsB[i].Trim();
            }

            documentC.Save();
            documentC.Close();

            wordApplication.Quit();
        }

        // Based on:
        // -> http://csharpfeeds.com/post/5048/Csharp_and_Word_Interop_Part_4_-_Tables.aspx
        // -> http://stackoverflow.com/a/1817041/700926
        private static void AddTableHeaderAndBorder(Table table, params string[] columnTitles)
        {
            const int headerRowIndex = 1;

            for (var i = 0; i < columnTitles.Length; i++)
            {
                var tableHeaderRange = table.Cell(headerRowIndex, i+1).Range;
                tableHeaderRange.Text = columnTitles[i];
                tableHeaderRange.Font.Bold = 1;
                tableHeaderRange.Font.Italic = 1;
            }

            // Repeat header on each page
            table.Rows[headerRowIndex].HeadingFormat = -1;

            // Enable borders
            table.Borders.Enable = 1;
        }

        // Based on:
        // -> http://stackoverflow.com/q/7084270/700926
        // -> http://stackoverflow.com/a/7084442/700926
        private static List<string> GetHeadingsInDocument(Document document)
        {
            object headingsAtmp = document.GetCrossReferenceItems(WdReferenceType.wdRefTypeHeading);
            return ((Array)(headingsAtmp)).Cast<string>().ToList();
        }
    }
} 
```

基本上，代码首先从两个给定文档中加载所有标题并将它们存储在内存中。然后它打开目标文档，创建追溯矩阵并设置样式，最后将标题插入矩阵。

该代码基于以下假设：

*   存在目标文档 (documentC.docx)。
*   两个输入文档（documentA.docx 和 documentB.docx）中的标题数量包含相同数量的标题 - 此假设是根据您关于不想要笛卡尔积的评论做出的。

我希望这符合您的要求:)

# python - 从python中的字符串中获取字符

> ID：12389570
> 
> 赞同：0
> 
> 时间：2012-09-12T13:41:40.187
> 
> 标签：python, regex

我有一个由多个块组成的文本文件，如下所示：

```
TestVar 00000000  WWWWWW 222.222 222.222 222.222
UNKNOWN ,,,,,,,,  ,,,,,,  ,,,,,, 
```

我想得到以下输出：每个部分总是 8 个字符长（例如 TestVar ，00000000） 从以 testvar 开头的每一行我希望代码返回：

```
WWWWWW_00000000 
```

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:55:55.737

假设您不希望我们在这里为您编写代码是一个非常具体的链接 [http://docs.python.org/howto/regex.html#regex-howto](http://docs.python.org/howto/regex.html#regex-howto)

请记住，您可能希望使用 findall()... 并使用 r' 编写代码，而不是经常需要反斜杠...

您可能想向我们展示您已经编写但无法正常工作的代码，以便我们可以帮助您更好地 gl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:44:35.633

使用正则表达式模式`^TestVar\s+(\d{8})\s+(\S+)`，您可以得到 >>

```
import re
p = re.compile('^TestVar\s+(\d{8})\s+(\S+)')
m = p.match('TestVar 00000000  WWWWWW 222.222 222.222 222.222')
if m:
    print 'Match found: ', m.group(2) + '_' + m.group(1)
else:
    print 'No match' 
```

[在这里](http://ideone.com/OAs5J)测试这个演示。

* * *

要查找多行`input`字符串中的所有匹配项，请使用：

```
p = re.compile("^TestVar\s+(\d{8})\s+(\S+)", re.MULTILINE) 
m = p.findall(input) 
```

* * *

要了解有关 Python 正则表达式的更多信息，请参阅[http://docs.python.org/howto/regex.html](http://docs.python.org/howto/regex.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:10:20.987

您提到了多次出现的模式，在这种情况下，您可以[`re.findall`](http://docs.python.org/library/re.html#re.findall)使用[`re.MULTILINE`](http://docs.python.org/library/re.html#re.MULTILINE)：

```
input_string = """
TestVar 00000000  WWWWWW 222.222 222.222 222.222
UNKNOWN ,,,,,,,,  ,,,,,,  ,,,,,,
TestVar 22222222  AAAAAA 222.222 222.222 222.222
UNKNOWN ,,,,,,,,  ,,,,,,  ,,,,,,
"""

import re
pat = re.compile("^TestVar\s+(\d{8})\s+(\S+)", re.MULTILINE)
matches = pat.findall(input_string)

# Result: matches == [('00000000', 'WWWWWW'), ('22222222', 'AAAAAA')]

for num, let in matches:
    print "%s_%s" % (num, let) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:01:56.037

没有正则表达式：

```
lines = ["TestVar 00000000  WWWWWW 222.222 222.222 222.222",
         "UNKNOWN ,,,,,,,,  ,,,,,,  ,,,,,,"]
print [toks[2].strip(' ')+'_'+toks[1] for toks in \
        [[line[i:i+8] for i in xrange(0,len(line),8)] for line in lines] \
       if toks[0] == 'TestVar '] 
```

# visual-studio-2010 - 如果出现异常，Windows 服务将停止

> ID：12389573
> 
> 赞同：0
> 
> 时间：2012-09-12T13:41:59.703
> 
> 标签：visual-studio-2010, c#-4.0, timer

我开发了使用 System.Threading.Timer 的 Windows 服务。计时器每 x 分钟启动一次，它工作正常（计时器在方法结束时更新）。但是，如果尝试阻止服务出现错误，尽管我正在更新计时器并告诉他何时重新开始，但为什么会发生这种情况？这是代码：

```
 System.Threading.Timer serviceTimer;

 protected override void OnStart(string[] args)
 {
     TimeSpan diff;
     diff = nextRun - now;
     TimerCallback timerDelegate =
         new TimerCallback(MyTimerCallback);
     serviceTimer = new System.Threading.Timer(timerDelegate, null, 
         diff, new TimeSpan(-1));
 }

 public  void MyTimerCallback(object something)
 {   
    try
    {
        //possible error that happened
    }
    catch(Exception)
    {

    }
    finally
    {
        //diff is a new variable telling timer when to start again 
        serviceTimer.Change(diff, new TimeSpan(-1));
    }
 } 
```

如果出现错误，我错过了为什么服务会停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:07:24.270

如果有人处理同样的问题，我会想到这样的事情：

因为我希望我的服务无论如何都保持活力：我正在向服务经理报告服务已成功启动 -

```
 base.OnStart(args); 
```

在配置中，您可以将 legacyUnhandledExceptionPolicy 设置为 true (1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:48:03.420

也许计时器无法更改。[`Timer.Change`](http://msdn.microsoft.com/en-us/library/yz1c7148.aspx)返回一个布尔值：

> **如果计时器成功更新，则为**true ；**否则，**false**。**

 **但是您没有检查该结果。我建议可能`new`每次都处理计时器并设置一个新计时器，因为它已经被触发并且您将它创建为“单次”计时器，例如

```
finally
{
    serviceTimer.Dispose();
    serviceTimer = new System.Threading.Timer(timerDelegate, null, 
     diff, new TimeSpan(-1));
} 
```**

# assembly - 汇编：16位除法

> ID：12389576
> 
> 赞同：4
> 
> 时间：2012-09-12T13:42:08.163
> 
> 标签：assembly, x86, division

我还是汇编新手，我还不知道汇编中的许多命令代码。我想在 16 位寄存器中进行除法。我想打印它的内容。我知道我需要将寄存器的内容转换为 ASCII 进行打印，但同样，我的问题是除法。请帮我。

比如cx的内容是2012（整数）。我该怎么办？

```
 mov ax, cx
 mov bx, 1000
 idiv bx 
```

上面的代码是错误的，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:45:31.690

查看[此参考资料](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html)（搜索 idiv）

> idiv 指令将 64 位整数 EDX:EAX（通过将 EDX 视为最高有效四个字节，将 EAX 视为最低有效四个字节来构造）的内容除以指定的操作数值。除法的商结果存入 EAX，余数存入 EDX。语法 idiv idiv
> 
> 例子
> 
> idiv ebx — 将 EDX:EAX 的内容除以 EBX 的内容。将商放在 EAX 中，将余数放在 EDX 中。idiv DWORD PTR [var] — 将 EDX:EAS 的内容除以存储在内存位置 var 的 32 位值。将商放在 EAX 中，将余数放在 EDX 中。

当然，由于您使用的是 16 位，因此将所有指定的位值减半并将 E 从每个寄存器中删除，它是完全相同的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T13:49:14.077

**编辑：**我注意到这是已签名的部门`idiv`，相应地编辑了答案。

上面的代码在一方面是错误的：`ax`没有符号扩展为`dx:ax`.

只需`cwd`在 前面加上 (convert word to doubleword) 即可`idiv bx`。商将在 内`ax`，余数将在 内`dx`。

# python - 转义动态sqlite查询？

> ID：12389587
> 
> 赞同：0
> 
> 时间：2012-09-12T13:42:33.163
> 
> 标签：python, database, sqlite, escaping

我目前正在根据用户的输入构建 SQL 查询。可以在此处看到如何完成此操作的示例：

```
def generate_conditions(table_name,nameValues):
    sql = u""
    for field in nameValues:
        sql += u" AND {0}.{1}='{2}'".format(table_name,field,nameValues[field])
    return sql

search_query = u"SELECT * FROM Enheter e LEFT OUTER JOIN Handelser h ON e.Id == h.Enhet WHERE 1=1"

if "Enhet" in args:
    search_query += generate_conditions("e",args["Enhet"])
c.execute(search_query) 
```

由于每次我无法在执行调用中插入值时 SQL 都会更改，这意味着我应该手动转义字符串。但是，当我搜索每个人都指向执行...

我对生成查询的方式也不满意，所以如果有人对另一种方式有任何想法，那也很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:50:58.973

你有两个选择：

1.  切换到使用[SQLAlchemy](http://www.sqlalchemy.org/)；它将使生成动态 SQL 更加 Pythonic*并*确保正确引用。

2.  由于您不能对表名和列名使用参数，因此您仍然必须使用字符串格式来将它们包含在查询中。另一方面，您的*值应始终使用 SQL 参数，前提是数据库可以准备语句。*

    直接从用户输入中插入表名和列名是不可取的，以这种方式注入任意 SQL 语句*太*容易了。对照您接受的此类名称列表验证表和列名称。

    因此，以您的示例为基础，我将朝这个方向发展：

    ```
    tables = {
        'e': ('unit1', 'unit2', ...),   # tablename: tuple of column names
    }

    def generate_conditions(table_name, nameValues):
        if table_name not in tables:
            raise ValueError('No such table %r' % table_name)
        sql = u""
        params = []
        for field in nameValues:
            if field not in tables[table_name]:
                raise ValueError('No such column %r' % field)
            sql += u" AND {0}.{1}=?".format(table_name, field)
            params.append(nameValues[field])
        return sql, params

    search_query = u"SELECT * FROM Enheter e LEFT OUTER JOIN Handelser h ON e.Id == h.Enhet WHERE 1=1"

    search_params = []
    if "Enhet" in args:
        sql, params = generate_conditions("e",args["Enhet"])
        search_query += sql
        search_params.extend(params)
    c.execute(search_query, search_params) 
    ```

# c# - 验证数组是否存在于 Lambda 或 Linq 中

> ID：12389588
> 
> 赞同：0
> 
> 时间：2012-09-12T13:42:34.757
> 
> 标签：c#, arrays, linq, lambda

如何检查是否`array2`是子集`array1`？换句话说，我想检查是否所有元素`array2`都存在`array1`？我想要解决方案`Lambda`or `Linq`。

```
int[] array1 = {6, 3, 1, 4, 5, 2};
int[] array2 = {1, 2, 3}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:43:26.417

如果我理解你的问题：

```
using System.Linq;

if (!array2.Except(array1).Any())
{
    ...validated!
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:53:31.070

另一个简单`LINQ`的，您可以使用[`All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)检查是否所有项目`array2`in `array1`：

```
if (array2.All(array1.Contains))
{
    // array2 is subset of array1
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:09:10.237

尝试，

```
 int[] array1 = { 6, 3, 1, 4, 5, 2 };
 int[] array2 = { 1, 2, 3 };

 bool isSubset = array2.Count(o => array1.Contains(o)).Equals(array2.Count()) ? true : false; 
```

# c# - 异常代码，或检测到“文件已存在”类型异常

> ID：12389599
> 
> 赞同：22
> 
> 时间：2012-09-12T13:42:58.270
> 
> 标签：c#, exception, ioexception

在尝试回答[这个问题](https://stackoverflow.com/questions/12388895/showing-the-dialog-of-the-file-already-existence-at-the-location)时，我惊讶地发现在该文件已经存在时尝试创建一个新文件不会抛出一个唯一的异常类型，它只会抛出一个通用的`IOException`.

因此，我想知道如何确定这`IOException`是现有文件的结果，还是其他一些 IO 错误。

异常有一个 HResult，但这个属性是受保护的，因此对我来说是不可用的。

我能看到的唯一另一种方法是模式匹配感觉很糟糕的消息字符串。

例子：

```
try
{
    using (var stream = new FileStream("C:\\Test.txt", FileMode.CreateNew))
    using (var writer = new StreamWriter(stream))
    {
        //write file
    }
}
catch (IOException e)
{
    //how do I know this is because a file exists?
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T13:46:38.947

```
try
{
    using (var stream = new FileStream("C:\\Test.txt", FileMode.CreateNew))
    using (var writer = new StreamWriter(stream))
    {
        //write file
    }
}
catch (IOException e)
{
    var exists = File.Exists(@"C:\Text.text"); // =)
} 
```

不适用于可能已再次删除的临时文件等。

这是我的异常最佳实践：[https ://coderr.io/exception-handling](https://coderr.io/exception-handling)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-21T12:05:16.873

编辑：当文件已经存在时使用另一个 Hresult：`0x800700B7 (-2147024713)`“当该文件已经存在时无法创建文件”。更新了代码示例。

* * *

当您尝试创建一个新文件并且它已经存在时，IOException 将具有`Hresult = 0x80070050 (-2147024816)`.

所以你的代码可能看起来像这样：

```
try
{
    using (var stream = new FileStream("C:\\Test.txt", FileMode.CreateNew))
    using (var writer = new StreamWriter(stream))
    {
        //write file
    }
}
catch (IOException e)
{
    if (e.HResult == -2147024816 || 
        e.HResult == -2147024713)
    {
        // File already exists.
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-28T12:58:07.843

您可以将此条件放在 IOException: 的 catch 语句中`if(ex.Message.Contains("already exists")) { ... }`。这是一个 hack，但它适用于文件存在的所有情况，甚至是临时文件等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-23T18:31:55.623

要修改 @jgauffin，在 C# 6 中，您可以使用子句的`File.Exists`内部`when`来避免进入`catch`块，从而[表现得更像一个实际的专用异常](http://www.thomaslevesque.com/2015/06/21/exception-filters-in-c-6/)：

```
try
{
    using (var stream = new FileStream("C:\\Test.txt", FileMode.CreateNew))
    using (var writer = new StreamWriter(stream))
    {
        //write file
    }
}
catch (IOException e) when (File.Exists(@"C:\Text.text"))
{
   //...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-12T14:03:08.337

它不是 100% 万无一失的（IOException 还有其他原因），但您至少可以排除所有派生的异常类型：

```
try
{
    ...
}
catch(IOException e)
{
    if (e is UnauthorizedAccessException) throw;
    if (e is DirectoryNotFoundException) throw;
    if (e is PathTooLongException) throw;
    // etc for other exceptions derived from IOException

    ... assume file exists
} 
```

或等价物：

```
try
{
    ...
}
catch(UnauthorizedAccessException)
{
    throw;
}
catch(DirectoryNotFoundException)
{
    throw;
}
catch(PathTooLongException)
{
    throw;
}
catch(IOException e)
{
    ... assume file exists
} 
```

至于链接的问题，我只是检查是否存在，提示用户覆盖，`OpenOrCreate`如果存在则使用覆盖。我认为大多数应用程序都是这样工作的，即使理论上存在覆盖在错误时刻创建的文件的风险。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T14:02:57.683

你不能。不幸的是，出于某种超出我对 .NET 框架的理解的原因，没有进一步指定 IOExceptions。

但是在创建新文件的情况下，通常的做法是先检查文件是否存在。像这样：

```
 try
        {
            if (File.Exists("C:\\Test.txt"))
            {
                //write file

                using (var stream = new FileStream("C:\\Test.txt", FileMode.CreateNew))
                using (var writer = new StreamWriter(stream))
                {
                    //The actual writing of file

                }

            }
        }
        catch (IOException ex)
        {
            //how do I know this is because a file exists?
            Debug.Print(ex.Message);
        } 
```

也许不是您正在寻找的答案。但是，c'est ca。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-26T09:15:01.880

在 C# 6 及更高版本中：

```
const int WARN_WIN32_FILE_EXISTS = unchecked((int)0x80070050);

try
{
    ...
}
catch (IOException e) when (e.HResult == WARN_WIN32_FILE_EXISTS)
{
    ...
} 
```

......或者只是`when (e.HResult == -2147024816)`，如果你想要“快速而坚不可摧”。;-)

（FWIW，以 Windows 为中心的错误代码已被 Mono 忠实复制，也适用于 Mac/Linux。）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-12T13:47:49.073

你应该使用

```
FileMode.Create 
```

代替

```
FileMode.CreateNew 
```

如果文件已经存在，它将覆盖文件。

# android - Android 使用 viewpager 实现片段

> ID：12389602
> 
> 赞同：0
> 
> 时间：2012-09-12T13:43:11.213
> 
> 标签：android, android-fragments, android-activity, android-viewpager

我正在考虑使用带有 viewpager 的片段而不是活动来修改我的应用程序。

因此，据我了解情况，我应该能够修改我的应用程序，它只包含一个包含 viewpager 的主要活动，并且我可以在这个 viewpager 上删除我喜欢的片段，对吗？

如果我是正确的，有人可能会链接一个简短的示例实现（主类+添加和删除片段的方法）。
...
如果我不正确，有人可以给我一个提示，对于这样的问题，最干净的实现是什么。

已经感谢您的时间和支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:52:18.187

查看 ViewPager 文档中的示例，它显示了 Fragments 的用法：

[https://developer.android.com/reference/android/support/v4/view/ViewPager.html](https://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# grep - grep 特定文件的列表

> ID：12389611
> 
> 赞同：9
> 
> 时间：2012-09-12T13:43:35.430
> 
> 标签：grep

我需要 grep 字符串，但只能在目录中的某些文件中 - 例如：

> grep -rl mystring "file1.txt file2.txt file3.blah"

什么是正确的语法？我在 Linux 操作系统中工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T13:50:30.623

删除文件名周围的引号，以便将它们视为单独的参数。另外，我认为您不需要 -r 因为您只是指定文件而不是文件夹。

```
grep  mystring file1.txt file2.txt file3.blah 
```

您可能想查看[http://ss64.com/bash/grep.html](http://ss64.com/bash/grep.html)（或 man grep）以获取其他示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:52:40.750

您可以只给出不带引号的列表，它将列出所有结果以及它们所在的文件。例如：

```
grep init foo.py bar.py
foo.py:    def __init__(self, label, active, filter, filter_string):
foo.py:    def __init__(self):
bar.py:    def __init__(self, prefs, num_panes): 
```

# asp.net - 在 asp.repeater 中查找 FooterTemplate

> ID：12389620
> 
> 赞同：0
> 
> 时间：2012-09-12T13:44:07.693
> 
> 标签：asp.net, vb.net, repeater, asprepeater

我想为 asp.net 转发器页脚模板中的控件赋值。

```
Dim FooterTemplate As Control = TicketRepeater.Controls(TicketRepeater.Controls.Count - 1).Controls(0)
Dim lblFooter As Literal = TryCast(FooterTemplate.FindControl("TicketTotalNumberOfTickets"), Literal)
lblFooter.Text = TicketDataTable.Rows.Count.ToString() 
```

返回错误：

```
Specified argument was out of the range of valid values.
Parameter name: index 
```

`AFAIU it cant find count of controls = no controls found?`. 有什么建议么？

检查点：

*   所有的 ID 都是正确的
*   转发器有 3 部分 headertemplate、itemtemplate、footertemplate

帮助！

* * *

**更新**

该代码实际上在`databind()`. 任何想法如何在数据绑定事件之前使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:44:28.880

它不能在数据绑定之前完成。在您将该转发器绑定到*某物*之前，它只是一个空壳，没有任何控件。绑定是创建页眉、页脚和项目的原因。

无论如何，绑定会擦除与页脚有关的任何内容，因此，如果您打算绑定到该转发器（以及为什么还要使用一个？），那么在绑定之前尝试对其进行操作是没有意义的。

如果您想要一个带有页眉和页脚的空中继器，然后（可能在用户执行某些操作之后）绑定到填充的数据源，您可以尝试绑定到空（但不是空）数据源。我不是 100% 确定，但我认为这应该在你的转发器中产生页眉和页脚，但没有项目。

# c# - Root element is missing error in published website

> ID：12389625
> 
> 赞同：0
> 
> 时间：2012-09-12T13:44:24.883
> 
> 标签：c#, .net, xml, linq-to-xml

I am using XDocument and XElement to read the XML. While running the website from visual studio 2012 there is no problem in reading. After publishing i am getting "Root element is missing" exception.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Xml.XmlException: Root element is missing.

Please find the XML below

```
<CTReport>
  <ReportHeader>
    <UserID>1508ac07-0070-46b9-84f4-533b83cb3770</UserID>
  </ReportHeader>
  <ReportInfoToDisplay>
    <Report PlaceHolder="7">
      <Info Name="Average Mix report" TranslatedText="" ShowPrice="1" />
      <ReportControls>
        <ControlInfo Type="Date" Name="Date" TranslatedText="" Data="!" />
        <ControlInfo Type="Lookup" Name="Scale operator" TranslatedText="" Data="" />
        <ControlInfo Type="Lookup" Name="Display Jobs of" TranslatedText="" Data="Normal!Layaway!" />
        <ControlInfo Type="Combo" Name="SortBy" TranslatedText="SortBy" Data="Sort by mixer + product group!Sort by product group" />
      </ReportControls>
    </Report>
    <Report />
    <Report PlaceHolder="8">
      <Info Name="Mix report" TranslatedText="" ShowPrice="0" />
      <ReportControls>
        <ControlInfo Type="Date" Name="Date" TranslatedText="" Data="!" />
        <ControlInfo Type="Lookup" Name="Scale operator" TranslatedText="" Data="" />
        <ControlInfo Type="Combo" Name="SortBy" TranslatedText="SortBy" Data="Sort by mixer + product group!Sort by product group" />
      </ReportControls>
    </Report>
    <Report PlaceHolder="9">
      <Info Name="Scale report" TranslatedText="" ShowPrice="0" />
      <ReportControls>
        <ControlInfo Type="Date" Name="Date" TranslatedText="" Data="!" />
        <ControlInfo Type="String" Name="Job reference" TranslatedText="" Data="" />
        <ControlInfo Type="String" Name="Job ID" TranslatedText="" Data="" />
        <ControlInfo Type="Lookup" Name="Scale operator" TranslatedText="" Data="" />
      </ReportControls>
    </Report>
  </ReportInfoToDisplay>
</CTReport> 
```

## Code:

```
 XDocument xml = XDocument.Parse(reportXML); 
```

reportXML is string.

Please note while XDocument is created from XML file there is no exception

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:21:45.060

The problem is almost certainly that the XML you're trying to parse does not match that you've posted above.

There are a few scenarios:

1.  There is more than one `CTReport` element (ie you've got two sets of reports in the XML)
2.  There is no `CTReport` at all (so at the top level you'd have `ReportHeader` and `ReportInfoToDisplay`
3.  There is a single `CTReport` element as expected, but then there is some other element also at the root level.
4.  Your document is entirely empty.

The best thing you could do would be to add a line to your code to output the contents of `reportXML` to a text file so that you can have a better look at it and make sure its what you're expecting. You can do this by putting a line similar to the one below just before you try to parse the XML:

```
System.IO.File.WriteAllText(@"<Put an output file path here>", reportXML); 
```

# c - 语言识别

> ID：12389637
> 
> 赞同：2
> 
> 时间：2012-09-12T13:44:55.767
> 
> 标签：c, unicode

我正在考虑用C语言做一个语言识别程序。我已经在互联网上搜索并找到了 N-Gram-Based Text Categorization 文章，并且我还创建了自己的一组实用程序来处理我的一些编程需求。现在，我想首先尝试创建一个简单的程序，打印日文单词，用平假名、片假名和汉字编写。我相信这可以用 C 语言完成，但我不确定如何实现它，也许这与 unicode 编程有关。任何人都可以尝试向我解释我首先需要学习什么，我需要#include 哪些库（/ies），或者可以使用哪些实用程序作为我执行和实施该程序的基础。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:15:30.683

我不认为 C 是这个项目的最佳选择。IMO，您应该考虑使用具有一些出色内置支持的高级语言（例如 C#），这只是一个简单的示例：

C＃：

```
byte[] buffer = new byte[] { 0xE8, 0x82, 0xB2, 0xE5, 0x84, 0xBF }; 
string s = Encoding.UTF8.GetString(buffer); 
```

繁荣。完毕。

现在在 C 中，据我所知，没有简单的标准编码/解码库或实用程序。您必须手动创建这些东西。我自己开始这样做，但意识到这是浪费我的时间。:)

如果您坚持使用 C，我建议您首先阅读有关不同类型编码（多字节/宽字节编码）的所有内容。网络上有很多关于[Unicode](http://www.cprogramming.com/tutorial/unicode.html)的好教程可以帮助您入门（这是我使用的一个[很好的教程）。](http://www.cl.cam.ac.uk/~mgk25/unicode.html)

编辑：好的，如果没有 C#，那么让我们再举一个 C 中的“简短”示例......再次假设您对编码有所了解（注意使用宽字符：wchar_t）：

```
#include <stdio.h>  
#include <stdlib.h>
#pragma import(__use_utf8_ctype)
#include <wchar.h>
#include <locale.h>

int main(int argc, char *argv[]) 
{
  wchar_t water = 27750;
  setlocale(LC_ALL, "");

  printf("%lc",water);
  return 0;
}

mike@linux-4puc:~> ./a.out 
汦 
```

那是中文...我认为它是相同的汉字，但我对日语不太好...您可以打印，现在存储类似的作品，您将存储在 wchar_t 中，然后进行比较。

# sql - osql.exe 无法读取特殊字符

> ID：12389643
> 
> 赞同：0
> 
> 时间：2012-09-12T13:45:18.210
> 
> 标签：sql, tsql, sql-server-2005

您好我正在尝试使用 osql.exe 对具有一些特殊字符的 sql 文件进行一些更新。但实际更新最终会出现一些有趣的字符而不是特殊字符。示例sql如下：

```
 INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'CA', 3, N'Automàtic')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'CS', 3, N'Automatický')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'DA', 3, N'Automatgear')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'DE', 3, N'Automatik')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'EL', 3, N'Αυτόματο')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'EN', 3, N'Automatic')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'ES', 3, N'Automático')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'FR', 3, N'Automatique')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'HU', 3, N'Automata')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'IT', 3, N'Cambio automatico')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'NL', 3, N'Automatisch')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'PL', 3, N'Automatyczna')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'PT', 3, N'Automático')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'A', N'TR', 3, N'Otomatik')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'CA', 2, N'2 portes')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'CS', 2, N'2dveřový')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'DA', 2, N'2-dørs')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'DE', 2, N'2-Türen')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'EL', 2, N'2-πόρτο')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'EN', 2, N'2-Door')
  INSERT [dbo].[TableName] ([Code], [Culture], [Position], [CodeDescription]) VALUES (N'B', N'ES', 2, N'2-puertas') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:30:45.600

将文件的编码从 UTF-8 更改为 Unicode-Codebase 1200 解决了这个问题。

# javascript - 根据我想在几个 JavaScript 文件中使用的类，JavaScript 中的运算符“new”

> ID：12389646
> 
> 赞同：0
> 
> 时间：2012-09-12T13:45:21.017
> 
> 标签：javascript, jquery, jsp, new-operator

我有一些带有一些 jQuery 代码的 JavaScript 文件。我根据需要将此文件包含到我的 JavaServerPages 文件中。我想知道如何在 JavaScript 中创建对象、类或常见的东西，我可以在另一个 JavaScript 文件中使用它们？

我创建了类似的东西：

```
function Util() {

    Util.getString = function() {
        var newString = "hello";
        return newString;
    }
} 
```

它发生在我的基本 JavaScript 文件中。我已将它包含在我的基本布局 JSP 文件中。我以这种方式在另一个 JavaScript 文件中的 jQuery 函数中使用它：

```
var util = new Util(); 
Util.getString(); 
```

它工作正常。但是为什么我不能使用`util.getString()`？`util`是我刚刚创建的对象，赖特？我的问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:47:19.020

您应该使用`prototype`该功能，[请在此处查看](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)。

```
function Util() {
}

Util.prototype.getString = function() {
    var newString = "hello";
    return newString;
};

var util = new Util(); 
util.getString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:48:10.093

我假设您想要页面上的全局命名空间中的单个静态对象...

```
var util = new function(){
  this.getString = function(){
    ...
  }
} 
```

或者

```
var util = {
  getString : function(){
    ...
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:49:46.760

如果你想在没有的情况下使用你的功能`new()`

```
var Util = {

    getString : function(){
    }

}; 
```

这样，`getString()`已经包含在一个对象中。所以你不需要用`new()`.

# sql-server - master数据库中记录的数据库所有者SID与数据库所有者SID不同

> ID：12389656
> 
> 赞同：92
> 
> 时间：2012-09-12T13:45:52.590
> 
> 标签：sql-server, clrstoredprocedure, tsqlt

当我尝试将 tSQLt 安装到现有数据库上时，出现以下错误：

> master 数据库中记录的数据库所有者 SID 与数据库 '' 中记录的数据库所有者 SID 不同。您应该通过使用 ALTER AUTHORIZATION 语句重置数据库 '' 的所有者来纠正这种情况。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-01T00:32:47.580

当从备份还原的数据库且数据库所有者的 SID 与 master 数据库中列出的所有者 SID 不匹配时，可能会出现此问题。这是使用错误消息中推荐的“ALTER AUTHORIZATION”语句的解决方案：

```
DECLARE @Command VARCHAR(MAX) = 'ALTER AUTHORIZATION ON DATABASE::[<<DatabaseName>>] TO 
[<<LoginName>>]' 

SELECT @Command = REPLACE(REPLACE(@Command 
            , '<<DatabaseName>>', SD.Name)
            , '<<LoginName>>', SL.Name)
FROM master..sysdatabases SD 
JOIN master..syslogins SL ON  SD.SID = SL.SID
WHERE  SD.Name = DB_NAME()

PRINT @Command
EXEC(@Command) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-12T13:45:52.590

将此添加到 tSQLt.class.sql 脚本的顶部

```
declare @user varchar(50)
SELECT  @user = quotename(SL.Name)
  FROM  master..sysdatabases SD inner join master..syslogins SL
    on  SD.SID = SL.SID
 Where  SD.Name = DB_NAME()
exec('exec sp_changedbowner ' + @user) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-05-31T09:28:47.870

在数据库上应用以下脚本，您会收到错误：

```
EXEC sp_changedbowner 'sa'

ALTER DATABASE [database_name] SET TRUSTWORTHY ON 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-22T11:58:16.867

死灵法：
如果您不想使用 SQL-Server 2000 视图（已弃用），请使用：

```
-- Restore sid when db restored from backup... 
DECLARE @Command NVARCHAR(MAX) 
SET @Command = N'ALTER AUTHORIZATION ON DATABASE::<<DatabaseName>> TO <<LoginName>>' 
SELECT @Command = REPLACE 
                  ( 
                      REPLACE(@Command, N'<<DatabaseName>>', QUOTENAME(SD.Name)) 
                      , N'<<LoginName>>' 
                      ,
                      QUOTENAME
                      (
                          COALESCE
                          (
                               SL.name 
                              ,(SELECT TOP 1 name FROM sys.server_principals WHERE type_desc = 'SQL_LOGIN' AND is_disabled = 'false' ORDER BY principal_id ASC )
                          )
                      )
                  ) 
FROM sys.databases AS SD
LEFT JOIN sys.server_principals  AS SL 
    ON SL.SID = SD.owner_sid 

WHERE SD.Name = DB_NAME() 

PRINT @command 
EXECUTE(@command) 
GO 
```

还可以防止奇怪命名的数据库或用户出现错误，并且如果没有关联用户（使用 sa 登录）也可以修复错误。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-12-10T07:07:36.030

更改数据库所有者的最简单方法是：

```
EXEC SP_ChangeDBOwner 'sa' 
```

# java - JSTL 计算 bean 值的总和

> ID：12389657
> 
> 赞同：3
> 
> 时间：2012-09-12T13:45:54.057
> 
> 标签：java, jstl

在循环运行并填充数据表后，我想计算列的总数并将它们显示在最后一行。

这是我填充表格的代码......我需要构建最后一行：

```
<table class="data_table">
  <tr>
    <th>Source Of Issues</th>
    <th>First Issues</th>
    <th>second Issues</th>
    <th>Changes</th>
  </tr>

  <c:forEach var="bean" items="${beans}" varStatus="loopCount">
    <tr>
      <td><a href="foobar">${bean.sorCode}</a></td>
      <td class="right"><fmt:formatNumber value='${bean.firstissue}'
                             type="currency" groupingUsed='true' /></td>
      <td class="right"><fmt:formatNumber value='${bean.secondissue}'
                             type="currency" groupingUsed='true' /></td>
      <td class="right"><fmt:formatNumber value='${bean.changes}'
                             type="currency" groupingUsed='true' /></td>
    </tr>
  </c:forEach>  
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:50:37.910

```
<c:set var="sum" value="${0}"/>     
<c:forEach var="bean" items="${beans}" varStatus="loopCount">
  <c:set var="total" value="${bean.actualLabor + bean.plannedLabor}"/>
  <tr>
    <td><a href="foobar">${bean.sorCode}</a></td>
    <td class="right"><fmt:formatNumber value='${bean.firstissue}' 
                           type="currency" groupingUsed='true' /></td>
    <td class="right"><fmt:formatNumber value='${bean.secondissue}'
                           type="currency" groupingUsed='true' /></td>
    <td class="right"><fmt:formatNumber value='${changes}'
                           type="currency" groupingUsed='true' /></td>
  </tr>
  <c:set var="sum" value="${sum + changes}"/>      
</c:forEach>

<fmt:formatNumber value='${sum}' type="currency" groupingUsed='true' /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T14:42:00.900

```
 <table class="data_table">
    <tr>
        <th>Source Of Issues</th>
        <th>First Issues</th>
        <th>second Issues</th>
        <th>Changes</th>
    </tr>
    <c:set var="plannedSum" value="${0}"/>
    <c:set var="actualSum" value="${0}"/> 
    <c:set var="changesSum" value="${0}"/>   
    <c:forEach var="bean" items="${beans}" varStatus="loopCount">
    <c:set var="plannedSum" value="${plannedSum + bean.firstissue}"/>
    <c:set var="actualSum" value="${actualSum + bean.secondissue}"/>  
    <c:set var="changesSum" value="${changesSum + bean.changes}"/> 
        <tr>
            <td><a href="foobar">${bean.sorCode}</a></td>
            <td class="right"><fmt:formatNumber value='${bean.firstissue}' type="currency" groupingUsed='true' /></td>
            <td class="right"><fmt:formatNumber value='${bean.secondissue}' type="currency" groupingUsed='true' /></td>
            <td class="right"><fmt:formatNumber value='${bean.changes}' type="currency" groupingUsed='true' /></td>
       </tr>
     </c:forEach>
     <tr>
            <td><a>Totals</a></td>
            <td class="right"><fmt:formatNumber value='${plannedSum}' type="currency" groupingUsed='true' /></td>
            <td class="right"><fmt:formatNumber value='${actualSum}' type="currency" groupingUsed='true' /></td>
            <td class="right"><fmt:formatNumber value='${changesSum}' type="currency" groupingUsed='true' /></td>
    </tr>

</table> 
```

# java - Java 守护线程是否与生成进程共享堆或永久代？

> ID：12389661
> 
> 赞同：1
> 
> 时间：2012-09-12T13:46:08.880
> 
> 标签：java, multithreading, heap-memory, daemon, permgen

如果我从我的程序（非守护进程）创建守护线程，堆和永久生成内存空间是与新线程共享还是重新分配？

如果守护线程有自己的空间，在创建新线程时是否尊重 JVM 内存调整参数（如最大堆大小等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:47:04.123

> heap 和 perm gen 内存空间是与新线程共享还是重新分配？

所有线程（守护进程状态无关紧要）共享堆和永久内存空间。每个线程都有自己的堆栈空间，用于存储方法字段和调用堆栈。[您可以通过更改 JVM 参数](http://www.onkarjoshi.com/blog/209/using-xss-to-adjust-java-default-thread-stack-size-to-save-memory-and-prevent-stackoverflowerror/)来调整分配的每个线程堆栈空间的大小。但即使是这些堆栈区域也是一般 JVM 堆空间的一部分。

线程在单独的 CPU 中运行时也有内存*缓存。*每个 CPU 内存缓存用于性能原因，因此可以出于速度原因对本地 CPU 内存进行更新，而无需在每次访问时将信息同步到中央存储。但是这些缓存仍然从一般 JVM 内存空间读取和写入。

有关 daemon-thread 真正含义的更多信息，请参阅[@Peter 的回答](https://stackoverflow.com/questions/12389661/does-a-java-daemon-thread-share-heap-or-perm-gen-with-spawning-process/12390015#12390015)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:04:58.137

守护线程和普通线程之间的唯一显着区别是它是否会阻止进程停止。普通线程保持 JVM 运行，而守护进程则不会。

守护线程有

*   具有一个最大大小的同一堆。
*   相同的烫发代也有一个最大尺寸。
*   相同的线程优先级。
*   使用相同数量的内存。
*   堆栈的最大大小相同。

* * *

顺便说一句：其他差异是迂腐的，

*   isDaemon() 将返回`true`
*   默认情况下，守护进程将创建守护线程。
*   将在线程转储中显示为守护进程。

# asp.net - 在 asp.net 页面中添加/嵌入 youtube 视频

> ID：12389662
> 
> 赞同：0
> 
> 时间：2012-09-12T13:46:10.820
> 
> 标签：asp.net

我想将 youtube 视频缩略图添加到我的 asp.net 网站，例如[http://jtsplatmaster.com/](http://jtsplatmaster.com/)中的视频部分。在本网站上，如果您单击右侧的缩略图，视频将在主要部分开始播放，无需刷新页面。所以我需要使用哪个控件。我知道对象标签可用于在 asp.net 页面中嵌入 youtube 视频。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:46:19.357

我找到了这个 API [http://youtube.codeplex.com/](http://youtube.codeplex.com/)。将来可能对某人有所帮助。

问候， 阿西夫·哈米德

# python - Python 在 OS X 上的文本文件中捕获 Keystrokes 值

> ID：12389665
> 
> 赞同：4
> 
> 时间：2012-09-12T13:46:23.260
> 
> 标签：python, macos, pyobjc

我正在尝试监视我的 Macbook 上的击键，以构建统计分析器。但是我怎样才能将字符与“事件”隔离开来，这更像是：

> NSEvent: type=KeyDown loc=(850,248) time=66551.8 flags=0x100 win=0x0 winNum=0 ctxt=0x0 chars="l" unmodchars="l" repeat=0 keyCode=37

那么有谁知道如何根据下面发布的脚本来完成一个具有 chars 值的 .txt 文档（来自 NSEvent）？我需要一个带有按键的文本文件，以便在其上运行我的其他脚本并分析频率等...

提前致谢 ;）

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from AppKit import NSApplication, NSApp
from Foundation import NSObject, NSLog
from Cocoa import NSEvent, NSKeyDownMask
from PyObjCTools import AppHelper

class AppDelegate(NSObject):
    def applicationDidFinishLaunching_(self, notification):
        mask = NSKeyDownMask
        NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(mask, handler)

def handler(event):
    try:
        print event
    except KeyboardInterrupt:
        AppHelper.stopEventLoop()

def main():
    app = NSApplication.sharedApplication()
    delegate = AppDelegate.alloc().init()
    NSApp().setDelegate_(delegate)
    AppHelper.runEventLoop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T14:06:27.200

```
#!/usr/bin/python2.6

#  You _must_ turn on assistive devices under Accessibility prefpane 
# for any of this code to work. Otherwise it won't do anything.

from Cocoa import *
from Foundation import *
from PyObjCTools import AppHelper
import keycode
import string
import sys

class AppDelegate(NSObject):
    def applicationDidFinishLaunching_(self, aNotification):
        NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(NSKeyDownMask, handler)

def handler(event):
    if event.type() == NSKeyDown and keycode.tostring(event.keyCode()) in string.printable:
        print keycode.tostring(event.keyCode())

def main():
    app = NSApplication.sharedApplication()
    delegate = AppDelegate.alloc().init()
    NSApp().setDelegate_(delegate)
    AppHelper.runEventLoop()

if __name__ == '__main__':
   main() 
```

我挖了一下，发现 github 用户 'gurgeh 在他的分支中对 selfspy 的 OSX 修改 - [https://github.com/gurgeh/selfspy/blob/new_activity/sniff_cocoa.py](https://github.com/gurgeh/selfspy/blob/new_activity/sniff_cocoa.py)。

我把一些我自己的想法放进去，这就是结果。感谢 gurgeh 弄清楚如何捕获窗口更改事件 - 这使得键盘记录器变得更加有趣，因为您基本上可以忽略不提供有趣事件的应用程序，或者对于具有统计意识的应用程序，绘制出您最常使用的应用程序和你在他们身上做什么..

```
#!/usr/bin/python2.6

import exceptions
import sys
from Foundation import NSObject, NSLog
from AppKit import NSApplication, NSApp, NSWorkspace
from Cocoa import *
from Quartz import CGWindowListCopyWindowInfo, kCGWindowListOptionOnScreenOnly, kCGNullWindowID
from PyObjCTools import AppHelper
import keycode

evtypes = dict(
    NSLeftMouseDown     = 1,
    NSLeftMouseUp       = 2,
    NSRightMouseDown    = 3,
    NSRightMouseUp      = 4,
    NSMouseMoved        = 5,
    NSLeftMouseDragged  = 6,
    NSRightMouseDragged = 7,
    NSMouseEntered      = 8,
    NSMouseExited       = 9,
    NSKeyDown           = 10,
    NSKeyUp             = 11,
    NSFlagsChanged      = 12,
    NSAppKitDefined     = 13,
    NSSystemDefined     = 14,
    NSApplicationDefined = 15,
    NSPeriodic          = 16,
    NSCursorUpdate      = 17,
    NSScrollWheel       = 22,
    NSTabletPoint       = 23,
    NSTabletProximity   = 24,
    NSOtherMouseDown    = 25,
    NSOtherMouseUp      = 26,
    NSOtherMouseDragged = 27
)

evtypes_rev = dict([[v,k] for k,v in evtypes.items()])

class Hooker(object):
    def __call__(self, *args, **kwargs):
        try:
            evt = kwargs.get('event')
            del kwargs['event'] 
            items = ' '.join( [ x[0]+"="+unicode(x[1]) for x in kwargs.iteritems()] )
            print "%20s | %22s | %s" % ( self.__class__.__name__, evtypes_rev[evt.type()], items)
        except Exception as e:
            print 'Horrific error!', e
            AppHelper.stopEventLoop()
            sys.exit(0)

class KeyHooker(Hooker): pass
class MouseButtonHooker(Hooker): pass
class MouseMoveHooker(Hooker): pass
class ScreenHooker(Hooker): pass

class SniffCocoa:

    def __init__(self):

        self.key_hook = KeyHooker()
        self.mouse_button_hook = MouseButtonHooker()
        self.mouse_move_hook = MouseMoveHooker()
        self.screen_hook = ScreenHooker()
        self.currentApp = None

    def createAppDelegate (self) :

        sc = self
        class AppDelegate(NSObject):
            def applicationDidFinishLaunching_(self, notification):
                mask = (
                          NSKeyDownMask 
                        | NSKeyUpMask
                        | NSLeftMouseDownMask 
                        | NSLeftMouseUpMask
                        | NSRightMouseDownMask 
                        | NSRightMouseUpMask
                        | NSMouseMovedMask 
                        | NSScrollWheelMask
                       )
                NSEvent.addGlobalMonitorForEventsMatchingMask_handler_(mask, sc.handler)
        return AppDelegate

    def run(self):
        NSApplication.sharedApplication()
        delegate = self.createAppDelegate().alloc().init()
        NSApp().setDelegate_(delegate)
        self.workspace = NSWorkspace.sharedWorkspace()
        AppHelper.runEventLoop()

    def cancel(self):
        AppHelper.stopEventLoop()

    def handler(self, event):

        try:
            activeApps = self.workspace.runningApplications()
            for app in activeApps:
                if app.isActive():
                    if app.localizedName() != self.currentApp:
                        self.currentApp = app.localizedName()
                        options = kCGWindowListOptionOnScreenOnly 
                        windowList = CGWindowListCopyWindowInfo(options, kCGNullWindowID)

                        for window in windowList:
                            if window['kCGWindowOwnerName'] == self.currentApp:
                                geom = window['kCGWindowBounds'] 
                                self.screen_hook( event=event,
                                                name = window['kCGWindowName'],
                                                owner = window['kCGWindowOwnerName'],
                                                x = geom['X'], 
                                                y = geom['Y'], 
                                                w = geom['Width'], 
                                                h = geom['Height'])
                                break
                    break

            loc = NSEvent.mouseLocation()

            # mouse clicky buttons
            if event.type() in ( NSLeftMouseDown, NSRightMouseDown, NSLeftMouseUp, NSRightMouseUp):
                self.mouse_button_hook(event=event, x=loc.x, y=loc.y)

            # mouse scrolly buttons 
            elif event.type() == NSScrollWheel:
                if event.deltaY() > 0 and event.deltaY() < 0:
                    self.mouse_button_hook(event=event, x=loc.x, y=loc.y)
                if event.deltaX() > 0 and event.deltaX() < 0:
                    self.mouse_button_hook(event=event, x=loc.x, y=loc.y)

            # keys down
            elif event.type() in ( NSKeyDown, NSKeyUp ):

                flags = event.modifierFlags()
                modifiers = [] # OS X api doesn't care it if is left or right
                if (flags & NSControlKeyMask):
                    modifiers.append('CONTROL')
                if (flags & NSAlternateKeyMask):
                    modifiers.append('ALTERNATE')
                if (flags & NSCommandKeyMask):
                    modifiers.append('COMMAND')

                self.key_hook(event=event, key=event.keyCode(), char=keycode.tostring( event.keyCode() ), mods=modifiers, is_repeat=event.isARepeat())

            # Mouse moved
            elif event.type() == NSMouseMoved:
                self.mouse_move_hook(event=event, x=loc.x, y=loc.y)
            else:
                pass

        except ( KeyboardInterrupt ) as e:
            print 'handler', e
            AppHelper.stopEventLoop()

if __name__ == '__main__':
    sc = SniffCocoa()
    sc.run() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T20:55:45.463

用于使用 Keycode 模块。只需从这里克隆它并运行“sudo setup.py install”。您将拥有密钥代码模块 [https://github.com/abarnert/pykeycode](https://github.com/abarnert/pykeycode)

# sql-server - BEGIN TRY DROP TABLE 有什么危险？

> ID：12389669
> 
> 赞同：5
> 
> 时间：2012-09-12T13:46:34.950
> 
> 标签：sql-server, tsql

在用于数据子集的交互式分析的脚本中，将查询结果存储到临时表中以供进一步分析通常很有用。

我的许多分析脚本都包含这种结构：

```
CREATE TABLE #Results (
  a INT NOT NULL,
  b INT NOT NULL,
  c INT NOT NULL
);

INSERT INTO #Results (a, b, c)
SELECT a, b, c
FROM ...

SELECT *
FROM #Results; 
```

在 SQL Server 中，临时表是连接范围的，因此查询结果在初始查询执行后仍然存在。当我要分析的数据子集的计算成本很高时，我会使用此方法而不是使用表变量，因为该子集会在不同批次的查询中持续存在。

脚本的设置部分运行一次，随后的查询（`SELECT * FROM #Results`这里是占位符）会根据需要经常运行。

偶尔，我想刷新临时表中的数据子集，所以我再次运行整个脚本。一种方法是通过将脚本复制到 Management Studio 中的新查询窗口来创建新连接，我发现这很难管理。

相反，我通常的解决方法是在 create 语句之前添加一个条件 drop 语句，如下所示：

```
IF OBJECT_ID(N'tempdb.dbo.#Results', 'U') IS NOT NULL
BEGIN
  DROP TABLE #Results;
END; 
```

该语句正确处理了两种情况：

1.  在表不存在时的第一次运行：什么都不做。
2.  在表确实存在的后续运行中：删除表。

我编写的生产脚本将始终使用这种方法，因为它在两种预期情况下都不会引发错误。

我的其他开发人员编写的一些等效脚本有时会使用异常处理来处理这两种情况：

```
BEGIN TRY DROP TABLE #Results END TRY BEGIN CATCH END CATCH 
```

我相信在数据库世界里，请求许可总比寻求宽恕好，所以这种方法让我感到不安。

第二种方法在不采取任何措施处理非异常行为（表不存在）时吞下错误。此外，由于表不存在以外的其他原因，可能会引发错误。

聪明的[猫头鹰](http://www.wiseowl.co.uk/blog/s183/drop-temporary-tables.htm)警告同样的事情：

> 在这两种方法中，[ `OBJECT_ID`method] 更难理解，但可能更好：使用 [ `BEGIN TRY`method]，您冒着捕获错误错误的风险！

但它没有解释实际风险是什么。

实际上，该`BEGIN TRY`方法从未在我维护的系统中引起问题，因此我很高兴它留在那里。

使用方法管理临时表存在有哪些可能的危险`BEGIN TRY`？空的 catch 块可能会隐藏哪些意外错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T01:14:39.940

`What possible dangers?` `What unexpected errors are likely to be concealed?`

如果 try catch 块在事务内部，则会导致失败。

```
BEGIN
BEGIN TRANSACTION t1;
SELECT 1

BEGIN TRY DROP TABLE #Results END TRY BEGIN CATCH END CATCH

COMMIT TRANSACTION t1;
END 
```

此批处理将失败，并出现如下错误：

> 消息 3930，级别 16，状态 1，第 7 行当前事务无法提交，并且无法支持写入日志文件的操作。回滚事务。消息 3998，级别 16，状态 1，第 1 行在批处理结束时检测到不可提交事务。事务被回滚。

[联机丛书](http://msdn.microsoft.com/en-us/library/ms175976.aspx)记录了这种行为：

> **不可提交事务和 XACT_STATE**
> 
> 如果 TRY 块中产生的错误导致当前事务的状态无效，则该事务被归类为不可提交事务。当错误发生在 TRY 块内时，通常在 TRY 块外结束事务的错误会导致事务进入不可提交状态。不可提交的事务只能执行读取操作或 ROLLBACK TRANSACTION。该事务不能执行任何会生成写操作或 COMMIT TRANSACTION 的 Transact-SQL 语句。

现在用测试方法替换 TRY/Catch

```
BEGIN
BEGIN TRANSACTION t1;
SELECT 1

IF OBJECT_ID(N'tempdb.dbo.#Results', 'U') IS NOT NULL
BEGIN
  DROP TABLE #Results;
END;

COMMIT TRANSACTION t1;
END 
```

并再次运行。事务将提交而不会出现任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:04:10.723

更好的解决方案可能是使用表变量而不是临时表

IE：

```
declare @results table( 
  a INT NOT NULL, 
  b INT NOT NULL, 
  c INT NOT NULL 
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:04:30.680

我也认为一个`try`块是危险的，因为它可以隐藏一个意想不到的问题。[某些编程语言只能捕获选定的错误](https://docs.djangoproject.com/en/1.2/ref/exceptions/#module-django.core.exceptions)而不捕获意外错误，如果您的编程语言具有此功能，则使用它（T-SQL 无法捕获特定错误）

对于您的场景，我可以解释说我完全像您一样使用此`try catch`块进行编码。

理想的行为是：

```
begin try
   drop table #my_temp_table
end try
begin catch __table_dont_exists_error__
end catch 
```

但这不存在！然后你可以写一些这样的想法：

```
begin try
   drop table #my_temp_table
end try
begin catch 
  declare @err_n int, @err_d varchar(MAX)
  SELECT 
    @err_n = ERROR_NUMBER() ,
    @err_d = ERROR_MESSAGE() ;
  IF @err_n <> 3701 
     raiserror( @err_d, 16, 1    )     
end catch 
```

当删除表的错误与“表不存在”不同时，这将引发一个事件。

请注意，对于您的问题，所有这些代码都不值得。但可能对其他方法有用。对于您的问题，优雅的解决方案是[仅在存在](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/02c6da90-954d-487d-a823-e24b891ec1b0)或使用[表变量](http://msdn.microsoft.com/en-us/library/ms188927.aspx)时才删除表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T16:43:17.250

不是你的问题，但可能被忽视的是临时表使用的资源。我总是在脚本末尾删除表格，这样它就不会占用资源。如果你在表中放一百万行怎么办？然后我还在脚本开始时测试表以处理上次运行时出现错误并且表没有被删除的情况。如果你想重用临时，那么至少清除行。

表变量是另一种选择。它重量更轻，但有局限性。如果要在查询连接中使用表变量，请避免使用它，因为查询优化器不能像处理临时变量那样处理表变量。

SQL 文档：

如果在单个存储过程或批处理中创建了多个临时表，则它们必须具有不同的名称。

如果在存储过程或应用程序中创建的本地临时表可以由多个用户同时执行，则数据库引擎必须能够区分不同用户创建的表。数据库引擎通过在每个本地临时表名称内部附加一个数字后缀来实现此目的。存储在 tempdb 中 sysobjects 表中的临时表的全名由 CREATE TABLE 语句中指定的表名和系统生成的数字后缀组成。为允许后缀，为本地临时名称指定的 table_name 不能超过 116 个字符。

临时表超出范围时会自动删除，除非使用 DROP TABLE 显式删除：

当存储过程完成时，在存储过程中创建的本地临时表会自动删除。该表可以被创建该表的存储过程执行的任何嵌套存储过程引用。调用创建该表的存储过程的进程不能引用该表。

所有其他本地临时表在当前会话结束时自动删除。

当创建表的会话结束并且所有其他任务停止引用它们时，将自动删除全局临时表。任务和表之间的关联仅在单个 Transact-SQL 语句的生命周期内维护。这意味着在创建会话结束时主动引用该表的最后一个 Transact-SQL 语句完成时将删除全局临时表。

# openlayers - 将 OpenLayers.Layer.WMS 导出到 GeoJSON / KML

> ID：12389677
> 
> 赞同：3
> 
> 时间：2012-09-12T13:47:06.367
> 
> 标签：openlayers, kml, geoserver, geojson, wms

我正在寻找一种使用 OpenLayers 和 Geoserver 将 WMS 图层的特定区域导出为某种 XML 格式（GeoJSON、GML、KML）的方法。我找到了如何使用 OpenLayers.Format.GeoJSON.write() 导出要素对象，但此方法仅允许转换要素对象或几何对象。

我的想法的一个例子：我正在查看某个国家的地图，其中包含几个 WMS 图层和一些数据。然后我缩放到该国家的特定状态，我想将我正在查看的内容导出到 GeoJSON 或 KML 以在桌面 GIS 应用程序（如 QGIS）中使用。

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:42:27.340

GeoServer WMS 可以返回 KML 格式的数据，因为它是类似于 SVG 的样式格式，但不是在 GeoJSON 中，而是由 WFS 生成，因为它只是原始数据。为了返回 KML，只需发出与 PNG 相同的请求，但要求“kml”作为输出格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:05:33.243

Web 地图服务 (WMS) 仅处理图像。要将“导出”为 XML，您需要使用 Web Map Context (WMC) 之类的东西，详见此处：

*   [http://dev.openlayers.org/docs/files/OpenLayers/Format/WMC-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Format/WMC-js.html)

*   [http://dev.openlayers.org/releases/OpenLayers-2.12/examples/wmc.html](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/wmc.html)

*   [http://www.opengeospatial.org/standards/wmc](http://www.opengeospatial.org/standards/wmc)

我不确定 Qgis 是否支持使用 WMC。

# image-processing - 增强现实游戏

> ID：12389680
> 
> 赞同：3
> 
> 时间：2012-09-12T13:47:24.840
> 
> 标签：image-processing, opencv, augmented-reality

我想开发一个增强现实游戏。玩家将站在一个房间里，一些摄像机会拍摄他的视频。想法是在该视频中添加一个怪物，该视频将由戴眼镜的玩家看到或从液晶显示器直接观看。基本上这可以通过一些图像处理概念来完成。在怪物所在的位置添加彩色部分或一些标记，并且一些努力会做到这一点。

但我的问题是如何让这个怪物移动，从而制作一个怪物看起来像是在攻击玩家的视频。实际游戏在那之后开始，但我会一步一步走。第一步是制作带有攻击怪物的视频。

我对此完全陌生，我只使用过opencv。所以我需要一些工具来实现我的目标。你建议我从哪里开始？我更喜欢 C++，但也可以接受任何带有一些 api 建议的语言。我也愿意接受理论上的、概念性的建议。感谢您阅读我的问题

**不是：**看了动漫《刀剑神域》后，我想到了这个想法。如果你喜欢看动漫和虚拟现实的东西；我建议你看一下。这是一个很好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T06:43:42.163

如果你想让怪物像攻击玩家一样移动，你需要知道玩家或玩家某些部位的 3D 坐标。这可以通过让玩家佩戴可被检测到的可识别标记来完成，因此可以提取单应性以获得 3D 位置。

您可以开始阅读有关该主题的这篇[文章](https://stackoverflow.com/q/12283675/744859)，它是关于 OpennCV 上的 c++ 增强现实的。

# asp.net - 如何在网络表单上画线

> ID：12389681
> 
> 赞同：0
> 
> 时间：2012-09-12T13:47:24.900
> 
> 标签：asp.net, webforms

有没有办法在 ASP.Net 网络表单上画线？

我的目标是直观地表示角度。角度不必精确，但有些动态。

有没有可以做到这一点的.Net控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:50:34.090

.NET Web 控件，至少 VS 附带的控件无法做到这一点。一般来说，您可以在[HTML5 + Javascript](http://www.w3schools.com/html5/html5_canvas.asp)或其他第三方控件上执行此操作。

另一种选择（我不喜欢，顺便说一句）是动态生成图像并将它们流式传输到浏览器。但同样，这对我来说似乎不是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:51:12.757

1 您可以使用此代码基于`DrawLine`

```
Bitmap bitmap = new Bitmap(200, 200);
graphics = Graphics.FromImage(bitmap);
graphics.DrawLine(new Pen(Color.Black), 0, 0, 200, 200); 
```

2 你可以使用html标签`<hr />`

3 你可以使用`jsdraw2d`图书馆

链接：http: [//jsdraw2d.jsfiction.com/](http://jsdraw2d.jsfiction.com/)

# c# - 非托管 C# 代码是否编译为 IL 并在 CLR 上运行？

> ID：12389682
> 
> 赞同：10
> 
> 时间：2012-09-12T13:47:27.730
> 
> 标签：c#, clr, unmanaged

在询问[手动管理 CLR 内存](https://stackoverflow.com/q/12380852/425523)的过程中，我意识到我知道的很少。

我知道当您退出托管上下文时，CLR 会在堆栈上放置一个“cookie”，这样垃圾收集器就不会占用您的内存空间；但是，在我读过的所有内容中，假设您正在调用一些用 C 编写的库。

我想在托管上下文之外用 C# 编写我的应用程序的整个写入层，以在低级别管理数据。然后，我想从托管层访问该层。

在这种情况下，我的非托管 C# 代码会编译为 IL 并在 CLR 上运行吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T14:02:53.397

我认为这与您在问题中提到的同一个 C# 数据库项目有关。

在*技​​术上可以*用 C/C++ 或任何其他语言实现整个写入层。*从技术上讲*，在 C# 中拥有所有其他内容是可能的。我目前正在开发一个应用程序，该应用程序将非托管代码用于一些高性能的低级内容，并将 C# 用于业务逻辑和上层管理。

**但是，任务的复杂性不容小觑**。做到这一点的典型方法是设计一个双方都能理解的*合同。*合约将暴露给托管语言，托管语言将触发对本机应用程序的调用。如果您曾经尝试过从 C# 调用 C++ 方法，您就会明白……此外，每次调用非托管代码都会产生相当大的性能开销，这可能会扼杀低级性能的整个想法。

如果您真的对高性能关系数据库感兴趣，那么请使用单一的低级语言。

如果您想拥有一个简单但完整的数据库实现，只需使用 C#。除非您完全了解其复杂性，否则请勿混合使用这两种语言。请参阅 Raven DB - 一个基于文档的 NoSQL 数据库，仅完全用 C# 构建。

> > 我的非托管 C# 代码会编译为 IL 并在 CLR 上运行吗？

不，不存在非托管 C# 之类的东西。C# 代码将始终编译为 IL 代码并由 CLR 执行。这是托管代码调用非托管代码的情况。非托管代码可以用多种语言 C/C++/Assembly 等实现，但 CLR 不知道该代码中发生了什么。

**从评论更新。**有一个工具 (ngen.exe) 可以将 C# 直接编译为本机架构特定的代码。该工具旨在通过删除 JIT 编译阶段并将本机代码直接放入可执行映像或库中来提高托管应用程序的性能。然而，这段代码仍然由 CLR 主机“管理”——内存分配和收集、托管线程、应用程序域、异常处理、安全性和所有其他方面仍然由 CLR 控制。因此，即使 C# 在技术上可以编译为本机代码，该代码也不会作为独立的本机映像运行。

> > 这是如何运作的？

托管代码与非托管代码*互操作*。有几种方法可以做到这一点：

*   通过.Net Interop 的代码。这相对较快，但在代码中看起来有点难看（而且很难维护/测试）（[C#/C/Assembly 示例的好文章](http://www.codeproject.com/Articles/1392/Using-Unmanaged-code-and-assembler-in-C)）
*   一种慢得多的方法，但对其他语言更开放：Web wervices（SOAP、WS、REST 和公司）、队列（例如 MSMQ、NServiceBus 等），以及（可能）进程间通信。因此，非托管进程位于一端，托管应用程序位于另一端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:40:00.630

我知道这是一个 C# 问题，但如果您熟悉 C++，*C++/CLI*可能是一个值得考虑的选项。

它允许您有选择地将部分 C++ 代码编译为托管或非托管上下文 - 但是请注意，与 CLR 类型交互的代码必须在托管上下文中运行。

我不知道在 C++ 代码中从托管上下文转换到非托管上下文以及从 C++ 代码中转换的运行时成本，但我认为它必须类似于通过 C# 中的 .net Interop 调用本机方法的成本，即正如@oleksii 已经指出的那样，价格昂贵。根据我的经验，如果您需要经常与本机 C 或 C++ 库进行交互，这确实得到了回报 - 恕我直言，从 C++/CLI 项目中调用它们比在 C# 中编写所需的 .net Interop 接口要容易得多。

有关如何完成的一些信息，请参阅此[问题。](https://stackoverflow.com/questions/10729008/mixing-managed-and-unmanaged-c-code)

# proxy - Apache如何将公司代理设置为位置

> ID：12389683
> 
> 赞同：1
> 
> 时间：2012-09-12T13:47:33.767
> 
> 标签：proxy, apache, reverse-proxy, mod-proxy

我正在尝试为我的 Apache 服务器设置 ProxyPass。我想将 / 位置设置为[http://google.de](http://google.de)。问题是，我正在针对公司的代理服务器运行，我需要“告诉”我的 Apache 服务器它应该使用公司代理服务器。

这是我配置的：

```
ProxyRequests Off
ProxyPass / http://www.google.de
ProxyPassReverse / http://www.google.de 
```

有类似“setProxy”命令的东西吗？例如我公司的代理服务器是：proxy.company.com:81。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:50:06.513

我解决了这个问题，只需要添加 ProxyRemote 命令：

```
ProxyRemote * http://proxy.mycompany.com:81

<Location /test>     
ProxyPass http://www.heise.de
ProxyPassReverse http://www.heise.de
</Location> 
```

那应该可以正常工作。唯一的问题是，相对路径会造成麻烦。我看不到图像，链接已失效。

# javascript - javascript按钮target_blank？

> ID：12389685
> 
> 赞同：1
> 
> 时间：2012-09-12T13:47:54.917
> 
> 标签：javascript

我有一个链接到网站的按钮，但我希​​望它在新窗口中打开。我知道这可能是一个愚蠢的问题，但我对 javascript 很陌生。下面是我的代码。它可以工作，但在同一个窗口中打开。我已经尝试了一些事情，但他们只是没有工作

```
<input type="button" value="eStore"

               onclick="location='www.google.com'" 
                style="width: 88px; text-align: center;" /> 
```

有没有办法让它在新窗口中打开 targt_blank？谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T13:53:43.290

用这个：

```
<input type="button" value="eStore"
 onclick="window.open('http://www.google.com/','_blank')"
 style="width: 88px; text-align: center;" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:51:35.700

听起来您可能想看看`window.open(URL)`方法，而不是更改位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:53:07.707

尝试这个：

```
onclick="javascript:window.open('www.google.com');"

```

# mvvm-light - 是否有计划为 MVVMLight 创建一个可移植类库？

> ID：12389686
> 
> 赞同：3
> 
> 时间：2012-09-12T13:47:58.740
> 
> 标签：mvvm-light

只是想知道 Laurent 是否计划将他的代码迁移到 Microsoft 为我们提供的新的可移植类库。

我们有几个针对 Windows 8 和 WinPhone 的项目正在筹备中，所以如果有这个项目就好了。

# php - 在预先存在的图像上画线导致颜色错误 - PHP

> ID：12389689
> 
> 赞同：0
> 
> 时间：2012-09-12T13:48:03.997
> 
> 标签：php, imagecreatefrompng

我正在尝试拍摄地图图像，并尝试在图像顶部绘制红色、白色和蓝色线条。我能够导入地图图像并绘制线条，但线条打印为黑色，而不是它们指定的颜色。如果我删除该`imagecreatefrompng`部分，线条将以正确的颜色出现。

map.png 是以下内容的本地副本：![这个图片](../Images/ca8ca30241a4bba850980ea239247a87.png)

这是我的导致问题的代码。

```
header("Content-type:image/png");

$img=imagecreate(800, 495);

$black_color=imagecolorallocate($img,0,0,0);
$white_color=imagecolorallocate($img,255,255,255);
$red_color=imagecolorallocate($img,255,0,0);
$blue_color=imagecolorallocate($img,0,0,255);
$clear_color=imagecolorallocatealpha($img,0,0,0,0);

$img = imagecreatefrompng('map.png');

imageline($img,550,162,100,200,$red_color);
imageline($img,550,162,200,200,$blue_color);
imageline($img,550,162,300,200,$white_color);

return (imagepng($img)); 
```

我非常感谢可以提供的任何帮助以使颜色正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T21:05:59.060

我移动了你的线路：

```
$img = imagecreatefrompng('map.png'); 
```

直到右下：

```
$img=imagecreate(800, 495); 
```

它对我有用。

# fabricjs - 如何在fabric.js中设置图像的高度和宽度？

> ID：12389692
> 
> 赞同：9
> 
> 时间：2012-09-12T13:48:11.787
> 
> 标签：fabricjs

我已经使用 fabric.Image.fromURL 在画布中加载了图像，并且使用默认图像宽度和高度工作正常。现在我想最小化图像的宽度和高度。这个怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-04-09T10:46:44.813

希望这会有所帮助

```
var src;  //Image source here
fabric.Image.fromURL(src, function(oImg) { 
    oImg.scaleToWidth(50);
    oImg.scaleToHeight(50);
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-27T10:40:46.080

我们可以使用 scalex / scaley 来设置高度/宽度，如下所示。

```
fabric.util.loadImage(imgsrc, function (img) {
    var legimg = new fabric.Image(img, {
        left: 30,
        top: marker.top,
        scaleX: 20 / img.width,
        scaleY: 20 / img.height
    });
    canvas.add(legimg);
    canvas.renderAll();
}); 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T13:46:56.790

我测试过的这个工作代码：

```
fabric.Image.fromURL(el.src, function(image) {
              image.set({
                left: left,
                top: top,
                angle: 0,
                padding: 10,
                cornersize: 10,
                hasRotatingPoint:true
              });

                      image.scaleToHeight(100);
                      image.scaleToWidth(200);

              canvas.add(image);
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-02T12:34:05.557

```
var canvas = new fabric.Canvas('canvas');
document.getElementById('file').addEventListener("change", function (e) {
  var file = e.target.files[0];
  var reader = new FileReader();
  reader.onload = function (f) {
    var data = f.target.result;                    
    fabric.Image.fromURL(data, function (img) {
      var oImg = img.set({left: 0, top: 0, angle: 00,width:100, height:100}).scale(0.9);
      canvas.add(oImg).renderAll();
      var a = canvas.setActiveObject(oImg);
      var dataURL = canvas.toDataURL({format: 'png', quality: 0.8});
    });
  };
  reader.readAsDataURL(file);
});
```

```
canvas{
  border: 1px solid black;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://rawgit.com/kangax/fabric.js/master/dist/fabric.min.js"></script>
<input type="file" id="file"><br />
<canvas id="canvas" width="450" height="450"></canvas>
```

我们可以设置宽度和高度。

检查这个 JSfiddle：[https ://jsfiddle.net/varunPes/8gt6d7op/5/](https://jsfiddle.net/varunPes/8gt6d7op/5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T14:55:35.713

使用图像比例属性而不是图像大小。这对我有用。当我设置了图像的宽度和高度，而不是比例时，当我应用过滤器时，它会重置回原始宽度和高度，因为比例是 1.0。希望这可以帮助。

# svn - 在 Jenkins Pipeline 中构建特定版本

> ID：12389693
> 
> 赞同：9
> 
> 时间：2012-09-12T13:48:14.960
> 
> 标签：svn, msbuild, jenkins, msbuild-task, jenkins-plugins

我使用 SVN 作为我的源代码控制存储库，使用 Jenkins 作为我的 CI 工具。我使用 Jenkins 运行 MSBuild 脚本来进行实际的构建和部署。我还使用 Jenkins Pipeline 插件来管理下游项目的构建。

我的管道有问题。问题是，假设我在 SVN 中进行了 10 次签入，结果发生了 10 次自动 CI 构建，因此管道显示了 10 次构建。现在，如果我想将构建号 5 推送到管道中的下一阶段，我希望所有代码到第五个构建都将构建到下一阶段，而不是最新的代码（构建 10）是一直被使用。

我不知道我是否需要修改我的构建脚本或是否需要配置 Jenkins 或是否需要配置管道插件。有人知道吗？

万一你不知道我所说的管道插件是什么意思，这里有一个截图。

![在此处输入图像描述](../Images/7eeab73376561a43bf6b45961886b603.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T13:51:33.743

您可以在 SVN 位置添加`@1234`到您的**SVN_URL**。（见[https://stackoverflow.com/a/2325478/834](https://stackoverflow.com/a/2325478/834)）

您还可以使用环境变量**SVN_REVISION**`@${SVN_REVISION}`来获取修订版并在您的 SVN 位置使用类似的东西。文档可在[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-JenkinsSetEnvironmentVariables)获得。

# asp.net-mvc-3 - ASP.NET MVC 3 如何在 cshtml 的视图中创建动态属性名称？

> ID：12389697
> 
> 赞同：1
> 
> 时间：2012-09-12T13:48:18.163
> 
> 标签：asp.net-mvc-3, razor

在 MVC 3，view-cshtml 文件中，我想创建一个如下所示的动态 id。例如，如何合并“videoItem_”和“@MenuItemIndex”以获得“videoId_5”？

```
<div class='videoItem' id='videoItem_@MenuItemIndex'> 
```

编辑：我只需要 add();

```
<div class='videoItem' id='videoItem_@(MenuItemIndex)'> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:02:52.690

将变量括在括号中以使表达式显式：

```
<div class='videoItem' id='videoItem_@(MenuItemIndex)'> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T13:51:41.967

```
@for(int i = 0; i < SomeInteger; i++){
    <div class='videoItem' id='videoItem_@(i)'>
} 
```

# javascript - 单个页面上的多个标记表单

> ID：12389701
> 
> 赞同：0
> 
> 时间：2012-09-12T13:48:26.620
> 
> 标签：javascript, jquery

我正在使用来自[http://codecanyon.net/item/dynamic-tag-form/482498?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=RikdeVos](http://codecanyon.net/item/dynamic-tag-form/482498?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=RikdeVos)的脚本。我的工作需要在一个页面中有多个标记表单。例如，我想显示三个具有不同 id 的标记表单`tags1`：`tags2`和`tag3`.

```
<div id="tags1"></div>
<div id="tags2"></div>
<div id="tags3"></div> 
```

并从以下位置调用脚本：

```
<script>
  $(document).ready(function(){
  $("#tags1").tag({
        width: 400,
        height: 90,
        inputName: 'tags1'
    });
});
 </script> 
```

现在我该如何调用`tags2`，`tags3`如果我复制/粘贴脚本部分并替换`tags1`为`tags2`我正在获取表单，但必须有更好的方法，比如将名称作为脚本中的变量传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T05:32:48.403

通过遍历容器中的每个元素来遍历所有标记表单。

HTML：

```
<div class="tags-container">
    <div id="tags1"></div>
    <div id="tags2"></div>
    <div id="tags3"></div>
</div> 
```

Javascript：

```
$(document).ready(function(){
    $(".tags-container div").each(function (index, element) {
        $(this).tag({
            width: 400,
            height: 90,
            inputName: $(this).attr('id')
        });
    });
}); 
```

# c# - 如何更新实体？

> ID：12389704
> 
> 赞同：0
> 
> 时间：2012-09-12T13:48:41.533
> 
> 标签：c#, asp.net, entity-framework-4

我之前有一个更详细的问题，但我没有答案，我将以更简单的方式提出同样的问题：

我有一个带有另一个表的外键的 EF 数据库。 ![在此处输入图像描述](../Images/8fde885b2de58d8df44aa4b44362b00f.png)

我想**更新**一个***ENTITY***。但我需要这样，我将在下面编写代码：

1.  转到数据库并通过 id**检索**成员，返回 EF 成员对象
2.  **对EF**上下文之外的对象进行一些更改
3.  将**MODIFED** EF 成员发送到 Save 方法
4.  在 BL 层保存方法使用上下文并保存更改。

1)

```
MemberManager currentMemberManager = new MemberManager();
Member NewMember = currentMemberManager.GetById(2); 
```

2)

```
NewMember.FirstName = "NewFirstName";
NewMember.LanguageId = 1; 
```

3)

```
currentMemberManager.Save(NewMember); 
```

4)

```
public void Save2(Member newMember)
{
    using (var Context = new NoxonEntities())
    {
        Member existingMember = Context.Member.First(c => c.Id == newMember.Id);
        existingMember.FirstName = newMember.FirstName;
        existingMember.Language = Context.Language.First(c => c.Id == newMember.LanguageId);
        Context.SaveChanges();//In here I get the error below
    }
} 
```

> 对数据库的更改已成功提交，但在更新对象上下文时出错。ObjectContext 可能处于不一致的状态。内部异常消息：发生引用完整性约束冲突：定义引用约束的属性值在关系中的主体对象和依赖对象之间不一致。
> 
> **注意**：您可以建议发送一个不同的类（例如：公共类 MyMember），它具有所有必要的属性并且与 EF 完全分离。但这需要做很多工作才能将所有 EF 对象转换为我的单独类。我对吗？

我希望有一种方法可以分离实体，只要足够长的时间让我修改它并将值保存到数据库中。（另外，我尝试了完全不更新行的 Detach 方法）

我已经尝试解决这个问题好几个小时了。

请帮助我更好地理解它，我真的需要一个解决方案。非常感谢任何有想法的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:56:03.993

你能做一些简单的事情，比如分离实体，然后在准备保存时将其附加到上下文中吗？

```
MemberManager currentMemberManager = new MemberManager();
Member NewMember = currentMemberManager.GetById(2); 
```

得到：

```
public Member GetById(int id)
{ 
  var member = YourContext.Members.FirstOrDefault(m => m.id == id);
  YourContext.Detach(member);
  return member;
} 
```

保存：

```
public void Save2(Member newMember)
        {
            using (var Context = new NoxonEntities())
            {
                Context.Attach(newMember);
                Context.ObjectStateManager.ChangeObjectState(newMember, EntityState.Modified);
                Context.SaveChanges();
            }
        } 
```

# ios - 获取结果两次返回 nil

> ID：12389705
> 
> 赞同：0
> 
> 时间：2012-09-12T13:48:43.123
> 
> 标签：ios, core-data, nsfetchrequest

假设我的项目中有 3 个文件：

1.  数据模型文件，处理核心数据和获取信息
2.  视图控制器 1
3.  视图控制器 2

在模型文件中，我得到结果如下：

```
- (NSArray *) getColonyData
{
NSManagedObjectContext *cxt = [self managedObjectContext];
NSEntityDescription *colonyDesc = [NSEntityDescription entityForName:@"Colony" inManagedObjectContext:cxt];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:colonyDesc];

NSError *error;
NSArray *colonyResults = [cxt executeFetchRequest:request error:&error];

return colonyResults;
} 
```

我在第一个 viewController 的 viewDidLoad 部分运行这部分代码，我得到了正确的结果：

```
 NSArray *colonyResults = [model getColonyData];
    if (colonyResults != nil)
    {
        colonyName.text = [[colonyResults objectAtIndex:0] valueForKey:@"name"];
    }
    else
    {
        colonyName.text = @"nothing setup yet";
    } 
```

然后，当我执行完全相同的代码（当然更新不同的 UI 元素）时，我通过 segue 移动到第二个 viewController。**但这一次结果是 nil**。我在这里做错了什么？我应该先手动发布结果吗？没有出现其他错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:32:50.760

正如评论中所建议的：

`experimentModel *model;`不分配任何东西；它只是声明一个变量存在。在某个地方，您必须将模型设置为第一个控制器的实际对象（并且可能不会为第二个控制器这样做）。

向 nil 对象发送消息是一种**无法**获得预期结果的常见方法。:)

# c++ - 在另一个类中使用时，重载 < 运算符给出“没有匹配的调用函数”错误

> ID：12389706
> 
> 赞同：-2
> 
> 时间：2012-09-12T13:48:44.667
> 
> 标签：c++, operator-overloading

我实现了一个自定义 TimeStruct 类，我在其中声明 < 运算符如下

```
bool operator<(const TimeStruct t2) const; 
```

实施如下。

```
bool TimeStruct::operator<(const TimeStruct t2) const
{
//do something, I don't include the actual implementation
return true;
} 
```

然后我有另一个类X，这个TimeStruct类是一个成员，我们称这个成员字段为Y。我正在使用一个向量，我想在X类的Y字段上对这个向量进行排序。因此我需要指定一个方法这可以作为向量排序方法的基础。

因此，我在 X 中声明了一个附加方法来比较不同的 X。

```
bool compareX(const X& x1, const X& x2) const; 
```

实现如下：

```
bool X::compareX(const X& x1, const X& x2) const
{
return (x1.Y.operator<(x2.Y));
} 
```

不幸的是，这段代码无法编译。我收到以下错误。

```
No matching function call for TimeStruct::operator<(const TimeStruct&) const
candidates are : bool TimeStruct::operator<(TimeStruct&) const 
```

过去一个小时我一直在抓头发，谁能指出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:50:48.060

您需要在运算符中通过*const 引用*`TimeStruct`：

```
bool operator<(const TimeStruct& t2) const; 
```

并且，根据错误消息，您提供了

```
bool operator<(TimeStruct&) const 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:53:23.327

运算符声明中需要有一个 const**引用**说明符。

此外，您可能希望将`operator<`成员函数转换为友元函数。这通常是最佳实践。

# c# - TaskScheduler.UnobservedTaskException - 引发前的高延迟

> ID：12389708
> 
> 赞同：1
> 
> 时间：2012-09-12T13:48:45.917
> 
> 标签：c#, exception, task

我正在使用基于任务（TPL）的线程模型。启动我的应用程序 (WPF) 时，我注册**TaskScheduler.UnobservedTaskException**以显示一条消息。

但是，如果引发异常（例如Task.Factory.StartNew(() => throw new Exception());），则在引发UnobservedTaskException 事件之前需要相当长的时间（3-10 秒）。

我希望立即（或至少非常快）提出它，对这里可能出现的情况有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:12:25.360

这是因为该线程的终结器尚未运行。由于这发生在垃圾收集中，因此这是不确定的。此外，CLR 如何确定是立即抛出它还是您想检查任务的结果或调用`Wait()`并自己观察异常？

如果您启用 Break on First Chance Exceptions，它将在调试时抛出。

它将被传播回加入线程，保证。如果您使用的是 .NET 4.0，您的进程将终止。如果您使用的是 .NET 4.5，则不会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-07T12:27:02.093

Async void 方法总是在 Dispatcher 上引发异常，因此如果您有一个返回 Task 的方法，您可以将它包装在 async void 方法中然后等待它。

我必须这样做一次，因为我必须在属性设置器中调用异步方法（有一个很好的理由，我不会进入，但通常这是一个坏主意）

```
private T _activeItem;
public T ActiveItem
{
    get => _activeItem;
    set => ActivateItemAsyncVoid(value);
}

private async void ActivateItemAsyncVoid(T item)
{
    await ActivateItemAsync(item);
}

public async Task ActivateItemAsync(T item, CancellationToken cancellationToken = default)
{
    // Do stuff
} 
```

如果我直接调用`ActivateItemAsync`setter，那么我不能等待它，但是这样我可以等待它。

# powershell - 使用 PowerShell 修改 RSReportServer.config

> ID：12389711
> 
> 赞同：3
> 
> 时间：2012-09-12T13:48:55.383
> 
> 标签：powershell, config, reportserver

如何使用 PowerShell 更新或更改 RSReportServer.config 文件？

我想将服务标记内的 IsReportManagerEnabled 标记中的值从 True 更改为 False。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T16:03:25.320

根据[http://msdn.microsoft.com/en-us/library/bb630448.aspx](http://msdn.microsoft.com/en-us/library/bb630448.aspx)，您的配置文件很可能在 `c:\Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\`但更新以下内容以适合您的系统。并在做任何其他事情之前备份文件。

```
[xml]$config = gc "c:\Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\RSReportServer.config"
$config.SelectSingleNode("//IsReportManagerEnabled").InnerText = "False";
$config.save("c:\Program Files\Microsoft SQL Server\MSSQL.n\Reporting Services\ReportServer\RSReportServer.config") 
```

您可能需要重新启动 ReportServer 服务才能使其生效。

# c++ - 在 C++ 上的两个 MFC TreeList 之间拖放

> ID：12389716
> 
> 赞同：0
> 
> 时间：2012-09-12T13:49:01.687
> 
> 标签：c++, mfc, treelist

我需要将项目从一个 TreeList 拖放到另一个 ThreeList，但只能找到在同一个 TreeList 中进行此操作的教程。任何人都可以帮忙吗？我也很有趣如何将文件或文件夹从文件系统（窗口资源管理器）拖放到 TreeList？我正在使用 MFC C++。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:29:49.143

在不遗漏对所有 MFC 问题的强制性*真实*答案（即*“不要使用 MFC — 除非您居住的地方是 1997 年”*）的情况下，OLE 拖放将帮助您实现这两个目标。

虽然我目前没有手边的 MSVC，但这个例子似乎相当彻底......移动、复制和滚动：

[http://www.ucancode.net/CPP_Library_Control_Tool/OLE-DRAG-DROP-TREE-Control-CTreeCtrl-VC-Article.htm](http://www.ucancode.net/CPP_Library_Control_Tool/OLE-DRAG-DROP-TREE-Control-CTreeCtrl-VC-Article.htm)

你可以以此为基础。但是对于从 Windows-Explorer 中插入，请在您的`OnDragEnter()`和`OnDragOver()`方法中进行额外的检查，以查看`CF_HDROP`数据是否可用：

```
if (pDataObject->IsDataAvailable(CF_HDROP)) {
   /* Extract the DROPFILES data out of the pDataObject */
} 
```

本文详细介绍了如何从古怪的`DROPFILES`OLE 结构中获取文件名列表：

[http://www.codeproject.com/Articles/840/How-to-Implement-Drag-and-Drop-Between-Your-Progra](http://www.codeproject.com/Articles/840/How-to-Implement-Drag-and-Drop-Between-Your-Progra)

* * *

*相比之下，如果您想查看设计得不太好的东西，请查看 Qt Drag & Drop 示例：*

[http://doc.qt.nokia.com/4.7-snapshot/dnd.html#examples](http://doc.qt.nokia.com/4.7-snapshot/dnd.html#examples)

# php - .htaccess 获取 3 级文件夹文件内容到 2 级文件夹文件

> ID：12389723
> 
> 赞同：0
> 
> 时间：2012-09-12T13:49:14.933
> 
> 标签：php, .htaccess, mod-rewrite

我想指出

[http://example.com/folder1/folder2/folder3/index.php](http://example.com/folder1/folder2/folder3/index.php)

至

[http://example.com/folder1/folder2/index.php](http://example.com/folder1/folder2/index.php)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:24:06.240

试试这个代码：

```
RewriteRule ^folder1/folder2/folder3/(.*)$ http://{%HTTP_HOST}/folder1/folder2/$1 [L] 
```

此代码从：重定向`folder1/folder2/folder3/another_foler/or_another_file.php?and=get`
到： `folder1/folder2/another_foler/or_another_file.php?and=get`

所以相同的链接，但没有`folder3`.

# c# - 表未使用新数据更新

> ID：12389725
> 
> 赞同：1
> 
> 时间：2012-09-12T13:49:19.177
> 
> 标签：c#, asp.net, sql

rId页面中有两个文本框。一个用于 UserId，另一个用于电子邮件。两者都是从表 aspnet_membership 中检索到的数据并设置为“只读”。对于电子邮件文本框，它将更改为只读 = false。然后用户输入一个新的电子邮件，然后点击按钮保存。它应该使用新电子邮件更新表中的电子邮件，但遗憾的是没有进行任何更改。有人可以告诉我应该删除/添加什么以使其正常工作。这是我的代码。

```
 protected void Page_Load(object sender, EventArgs e)
{

    string email = Membership.GetUser(User.Identity.Name).Email;
    MembershipUser currentUser = Membership.GetUser();
    string UserId = currentUser.ProviderUserKey.ToString();

    TextBox2.Text = email;
    TextBox3.Text = UserId;
} 
```

* * *

```
 protected void Button4_Click(object sender, EventArgs e)
{
    TextBox2.ReadOnly = false;
} 
```

* * *

```
protected void Button3_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    SqlCommand cmd = new SqlCommand("UPDATE aspnet_membership SET Email = @email WHERE UserName = @id1", conn);

    cmd.Connection = conn;
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@email", TextBox2.Text);
    cmd.Parameters.AddWithValue("@id1", TextBox3.Text);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:53:43.850

看起来你忘了打开连接

```
con.Open(); 
```

运行命令

```
cmd.ExecuteNonQuery(); 
```

然后关闭连接

```
con.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:08:07.203

```
I have refatored your code, now it should work

protected void Button3_Click(object sender, EventArgs e){
SqlConnection conn = new   SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
SqlCommand cmd = new SqlCommand("UPDATE aspnet_membership SET Email = @email WHERE UserName = @id1", conn);

cmd.Connection = conn;
cmd.CommandType = CommandType.Text;
cmd.Parameters.AddWithValue("@email", TextBox2.Text);
cmd.Parameters.AddWithValue("@id1", TextBox3.Text);   
 try { 
conn.Open();
cmd.ExecuteNonQuery();

   }
  catch(Exception ex){ 
  throw ex;    
  }
finally{    
conn.Close();
   }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:10:24.817

您的代码没有显示将任何数据提交回其数据源的迹象。

您需要一个数据适配器，并且需要将其插入命令设置为上述命令。

```
SQLDataAdapter adapt = new SQLataAdapter(); 
```

然后你需要打开一个连接： -

```
conn.open();

adapt.UpdateCommand = cmd;

adapt.UpdateCommand.ExecuteNonQuery()

conn.close(); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:59:49.447

您可以尝试在按钮单击事件中通过 Membership 类直接更新用户：

```
protected void Button3_Click(object sender, EventArgs e)
{
     var memUser = Membership.GetUser(TextBox3.Text) //Fetch the user by user Id
     memUser.Email = TextBox2.Text // Assign the new email address
     Membership.UpdateUser(memUser) // update the user record.
} 
```

# objective-c - NSFilePresenter -presentedSubitemDidAppearAtURL：方法永远不会被调用

> ID：12389726
> 
> 赞同：12
> 
> 时间：2012-09-12T13:49:30.690
> 
> 标签：objective-c, cocoa, nsfilecoordinator

我有一个符合 NSFilePresenter 协议的对象，它代表我的基于文档的应用程序文档包。当在包内创建新文件时，以编程方式使用具有适当 NSFileCoordination 方法的 NSFileManager 或通过 Finder 我只得到`-presentedSubitemDidChangeAtURL:`事件，但在这种情况下似乎并不那么明显`-presentedSubitemDidAppearAtURL:`。

这是预期的行为还是我做错了什么？

`-presentedSubitemDidAppearAtURL:`NSFilePresenter 中的评论清楚地表明：

> 通知该目录包含的文件或目录已添加。如果这个方法没有实现但是`-presentedItemDidChange`已经实现了，并且目录实际上是一个文件包，那么文件协调机制将被调用`-presentedItemDidChange`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-13T09:42:16.880

在为这个确切的问题挣扎了很长一段时间后，我向 Apple 提出了一个技术支持问题。他们的回答是这是一个错误，我们现在唯一能做的就是通过`-presentedSubitemDidChangeAtURL:`.

我会鼓励遇到此问题的任何人提交错误 ( [https://bugreport.apple.com](https://bugreport.apple.com) )，以鼓励 Apple 尽快解决此问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-10-14T22:30:44.223

[https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSFilePresenter_protocol/](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSFilePresenter_protocol/)

**使用对文件的低级读写调用直接进行的更改不会通知**您的演示者**对象**。**只有****通过文件协调器的**更改才会产生通知。

# c# - 从asp.net c# mvc导出到excel

> ID：12389729
> 
> 赞同：0
> 
> 时间：2012-09-12T13:49:41.970
> 
> 标签：c#, asp.net-mvc, export-to-excel

我正在尝试将数据表导出到 asp.net mvc 中的 excel 表。我尝试了以下代码来导出。它没有显示任何错误，但也没有创建 excel 文件。那么这段代码有什么问题呢？

```
if (dt.Rows.Count > 0)
                {
                    string filename = "DownloadMobileNoExcel.xls";
                    System.IO.StringWriter tw = new System.IO.StringWriter();
                    System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);
                    DataGrid dgGrid = new DataGrid();
                    dgGrid.DataSource = dt;
                    dgGrid.DataBind();

                    dgGrid.RenderControl(hw);
                    Response.ContentType = "application/vnd.ms-excel";
                    Response.AppendHeader("Content-Disposition", "attachment; filename=" + filename + "");

                    this.EnableViewState = false;
                    Response.Write(tw.ToString());
                    Response.End();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:27:51.420

The process is explained in detail in this post: [Export DataSet and DataTable to Excel 2007 in C#](http://bytesofcode.hubpages.com/hub/Export-DataSet-and-DataTable-to-Excel-2007-in-C)

# xml - 是否可以使用 xslt 设置交叉表视图的样式？

> ID：12389731
> 
> 赞同：2
> 
> 时间：2012-09-12T13:49:50.687
> 
> 标签：xml, xslt, pivot-table, crosstab

我有一个看起来像这样的 xml 文档：

```
<units>
    <unit>
       <year></year>
       <month></month>
       <qty></qty>
    </unit>
</units> 
```

我想在 html 中创建此数据的交叉表视图，其中每一行由一年表示，每一列由一个月表示，每个值包含特定年/月的数量总和。有点像这样：

```
 Jan  Feb   Mar   Apr.... etc
2010  345    0    12     0
2011    1   23   344     0
2012   99    1    23     0.... etc 
```

我的主要问题是：交叉表甚至可以使用 xslt 吗？

我的后续问题是，您能否为 xslt 新手（例如我自己）指明正确的方向，开始尝试完成这项工作？

样本数据：

```
<units>
    <unit>
        <year>2010</year>
        <month>9</month>
        <qty>13320</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>9</month>
        <qty>2445</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>10</month>
        <qty>8949</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>10</month>
        <qty>13650</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>11</month>
        <qty>4091</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>11</month>
        <qty>6600</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>12</month>
        <qty>686</qty>
    </unit>
    <unit>
        <year>2010</year>
        <month>12</month>
        <qty>678</qty>
    </unit>

    <unit>
        <year>2011</year>
        <month>1</month>
        <qty>1234</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>1</month>
        <qty>12345</qty>
    </unit>
    <unit>
         <year>2011</year>
        <month>2</month>
        <qty>4500</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>2</month>
        <qty>999</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>3</month>
        <qty>166</qty>
    </unit>
    <unit>
         <year>2011</year>
        <month>3</month>
        <qty>456666</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>4</month>
        <qty>41113</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>4</month>
        <qty>1150</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>5</month>
        <qty>4150</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>5</month>
        <qty>491</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>6</month>
        <qty>11250</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>6</month>
        <qty>3400</qty>
    </unit>
    <unit>
         <year>2011</year>
        <month>7</month>
        <qty>485</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>7</month>
        <qty>90</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>8</month>
        <qty>1606</qty>
    </unit>
    <unit>
         <year>2011</year>
        <month>8</month>
        <qty>202000</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>9</month>
        <qty>45333</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>9</month>
        <qty>13650</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>10</month>
        <qty>4050</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>10</month>
        <qty>431</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>11</month>
        <qty>45713</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>11</month>
        <qty>13690</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>12</month>
        <qty>4050</qty>
    </unit>
    <unit>
        <year>2011</year>
        <month>12</month>
        <qty>431</qty>
    </unit>

    <unit>
        <year>2012</year>
        <month>1</month>
        <qty>2500</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>1</month>
        <qty>34100</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>2</month>
        <qty>400</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>2</month>
        <qty>99</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>3</month>
        <qty>1606</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>3</month>
        <qty>202000</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>4</month>
        <qty>53773</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>4</month>
        <qty>13650</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>5</month>
        <qty>4150</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>5</month>
        <qty>4231</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>6</month>
        <qty>278</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>6</month>
        <qty>6100</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>7</month>
        <qty>406</qty>
    </unit>
    <unit>
        <year>2012</year>
        <month>7</month>
        <qty>95</qty>
    </unit>

</units> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T04:19:13.200

**这是一个 XSLT 1.0 解决方案**（可能需要一些工作才能使数字正确对齐）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kUnitByY" match="unit" use="year"/>
 <xsl:key name="kUnitByYM" match="unit" use="concat(year,'|',month)"/>

 <xsl:template match="/*">
<xsl:text>      Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec</xsl:text>
  <xsl:apply-templates select=
   "unit[generate-id()=generate-id(key('kUnitByY',year)[1])]">
    <xsl:sort select="year" data-type="number"/>
   </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="unit">
  <xsl:value-of select="concat('&#xA;',year,'  ')"/>

  <xsl:variable name="vCur" select="."/>

  <xsl:for-each select="(//node()|//namespace::*)[not(position() >12)]">
    <xsl:value-of select=
    "sum(key('kUnitByYM', concat($vCur/year,'|',position()))/qty)"/>
    <xsl:text>    </xsl:text>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（没有提供！！！）：

2010 2 3 2010 3 44 2010 9 44 2011 1 5 2011 3 11 2011 6 11 2011 4 15

**产生了想要的正确结果**：

```
 Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
2010  0    3    44    0    0    0    0    0    44    0    0    0    
2011  5    0    11    15    0    11    0    0    0    0    0    0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T16:03:56.113

# XSLT 1.0 解决方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>
<xsl:key name="row" match="unit" use="year" />

<xsl:template match="/">
  <xsl:text>     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec&#x0A;</xsl:text>
  <xsl:apply-templates select="*/unit[
    generate-id() = generate-id( key('row',year)[1])]">
      <xsl:sort select="year" data-type="number" />
  </xsl:apply-templates>    
</xsl:template>

<xsl:template match="unit">
  <xsl:variable name="year" select="year" />
  <xsl:value-of select="concat($year,' ')" />
  <xsl:for-each select="((/)//@*|(/)//node())[position() &lt; 13]">
    <xsl:variable name="month-num" select="position()" />
    <xsl:variable name="sum" select="sum(/*/unit[year=$year][month=$month-num]/qty)" />
    <xsl:value-of select="concat(substring('   ',1,3 - string-length($sum)),$sum,' ')" />
  </xsl:for-each>  
  <xsl:value-of select="'&#x0A;'" />
</xsl:template>

</xsl:stylesheet> 
```

...将接受这样的输入...

```
<units>
    <unit>
       <year>2010</year>
       <month>2</month>
       <qty>3</qty>
    </unit>
    <unit>
       <year>2010</year>
       <month>3</month>
       <qty>44</qty>
    </unit>
    <unit>
       <year>2011</year>
       <month>1</month>
       <qty>5</qty>
    </unit>
    <unit>
       <year>2011</year>
       <month>3</month>
       <qty>11</qty>
    </unit>
    <unit>
       <year>2011</year>
       <month>4</month>
       <qty>15</qty>
    </unit>
</units> 
```

...并产生这样的文字...

```
 Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
2010   0   3  44   0   0   0   0   0   0   0   0   0 
2011   5   0  11  15   0   0   0   0   0   0   0   0 
```

* * *

# XSLT 2.0 解决方案

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
       Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
  <xsl:for-each-group select="*/unit" group-by="year">
    <xsl:sort select="year" data-type="number" />
    <xsl:value-of select="concat(current-grouping-key(),' ')" />  
      <xsl:value-of select="        
          (string-join(
          for $month-num in 1 to 12 return
                for $sum in sum(current-group()/qty) return
                  concat(substring('   ',1,3 - string-length($sum)),$sum),
          ' '), '&#x0A;')" />
 </xsl:for-each-group>    
</xsl:template>

</xsl:stylesheet> 
```

* * *

# 更新 1

添加了 Dimitre 建议的线路终止校正。

* * *

# 更新 2

删除了输出中的前导零，但保留了列对齐。

* * *

# 注意事项

1.  XSLT 1.0 解决方案仅在最大和小于 1000 时有效。如果不是，请相应调整。
2.  Dimitre 利用密钥而不是重新计算 '/*/unit[year=$year][month=$month-num]' 的解决方案更胜一筹。也许最佳解决方案是使用他的 key() 风格的解决方案来计算总和，但我的代码片段用于非前导零列对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T15:23:38.193

您可以使用[`Muenchian Method`](http://ewbi.blogs.com/develops/2005/02/crosstabs_of_xm.html)

# javascript - Module.start() 触发了两次？

> ID：12389736
> 
> 赞同：0
> 
> 时间：2012-09-12T13:49:58.460
> 
> 标签：javascript, backbone.js, marionette

我目前正在用 Backbone 和 Marionette 重写一个旧应用程序。在我的模块文件 sls.module.insight.js 中：

```
spls.module('Insight', {
    startWithApp: false,
    define: function(self, spls, Backbone, Marionette, $, _) {

        self.start = function () {
            console.log('Insight started!');
        }

        self.addInitializer(function() {
           console.log('Insight instantiated!');
        });
    }
}); 
```

我正在尝试使用 start() 方法，因为我认为这将是等待模块的 start() 时使用的正常方法。（它只被初始化一次，所以我不能使用初始化程序。但还有什么？）在第二次调用 spls.module('Insight').start(); 我收到两个“洞察力开始！” 消息。为什么是这样？

有没有更好的方法来解决这个问题？

* * *

有关我想要实现的目标的更多信息：我刚开始使用 Marionette，因此对模块的作用以及它们交互的方式还没有深入了解。我想要实现的基本上是一个主要的应用程序（作品），它通过路由器打开页面（模块）。目前我正在打电话

```
Spls.module('Insight').start(); 
```

来自路由器，但我不知道如何设计模块本身。初始化程序似乎只在第一个 .start() 上被调用，因此模块不知道何时显示它的内容。我应该像这样使用事件聚合器吗？

```
// router
Spls.module('Insight').start();
Spls.vent.trigger('insight:show');

// module
Spls.vent.on('insight:show', function () {  /* show index */ }); 
```

我基本上需要更多关于如何使用模块的信息，我找不到任何关于这方面的适当工作流程的好信息。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T23:36:29.220

不要覆盖 start 方法。正如您已经看到的，坏事将会发生，包括您的初始化程序不会运行，其他幕后代码也不会执行。

如果您需要在模块启动时运行代码，请使用初始化程序。如果您需要在模块停止时运行代码，请使用终结器。start 方法和 stop 方法负责在后台运行初始化程序、终结程序和一些其他必要的事情。

至于该消息出现两次 - 在我的快速测试中，我没有看到此消息两次。我只看过一次。是否有另一段代码定义了同名的第二个模块（拆分模块定义）或其他类似的东西？

* * *

更新您的其他问题：

如果您还调用了模块，`start`则多次调用只会重新运行初始化程序。`stop`

```
 Spls.module("Insight").start();

// some time later...
Spls.module("Insight").stop();

// now it can be re-started and the initializers will run again
Spls.module("Insight").start(); 
```

您可以跟踪当前正在运行的模块。然后，当一条新路线触发时，您可以在开始下一条路线之前停止当前路线。这应该足以让事情正常工作：

```
 insightRoute: function(){
  if (this.module){
    this.module.stop();
  }
  this.module = Spls.module("Insight");
  this.module.start();
} 
```

如果您使用 Marionette 的 AppRouter，这可以很容易地提取到路由器中的方法或路由器调用的对象中。

希望有帮助。

# long-integer - 找不到从“帐户”引用的标识符“acinfo”的组件

> ID：12389745
> 
> 赞同：0
> 
> 时间：2012-09-12T13:50:22.590
> 
> 标签：long-integer

```
<ui:define name="content">
    <h:panelGroup id="acinfo">
        <fieldset>
            <legend>#{masterdata['bank.account.info']}</legend>

            <table width="100%">
                <tr>
                    <td width="20%">#{masterdata['bank.account.name']}</td>
                    <td width="30%"><h:inputText
                            value="#{bankAccountBean.accountBank.name}" style="width:98%"
                            class="validate[required] text-input" tabindex="1" /></td>
                    <td width="20%">#{masterdata['bank.account.branch.name']}</td>
                    <td width="30%"><h:inputText
                            value="#{bankAccountBean.accountBank.namech}" style="width:98%"
                            class="validate[required] text-input" tabindex="6" /></td>
                </tr>
                ...............
            </table>
        </fieldset>
    </h:panelGroup>
    <fieldset>
        <legend> #{masterdata['bank.branch.list']} </legend>
        <p:dataTable id="account" value="#{bankAccountBean.listbankAccount}"
            var="baccount" selection="#{bankAccountBean.accountBank}"
            selectionMode="single" rowKey="#{baccount.makhtaikhoan}"
            scrollable="true" scrollWidth="1088" scrollHeight="250"
            style="text-align: left;">
            <p:ajax event="rowSelect" update="acinfo" />
            <p:column headerText="#{masterdata['bank.branch.name']}">
                <h:outputText value="#{baccount.name}" />
            </p:column>
            <p:column headerText="#{masterdata['bank.account.branch.name']}">
                <h:outputText value="#{baccount.namech}" />
            </p:column>
            <p:column headerText="#{masterdata['bank.account.code']}">
                <h:outputText value="#{baccount.makhtaikhoan}" />
            </p:column>
            <p:column headerText="#{masterdata['bank.account.number']}">
                <h:outputText value="#{baccount.mataikhoan}" />
            </p:column>
        ...........

        </p:dataTable>
    </fieldset>
</ui:define> 
```

**主模板**

```
<h:form id="formbutton" prependId="false">

    <div id="cont" class="contentform" style="padding-top: 16px;">
        <div style="text-align: left; height: 18px; margin-top: 10px;">
            <p:messages id="messages" autoUpdate="true" />

        </div>
        <div>
            <ui:insert name="content">Content Form</ui:insert>

        </div>
    </div>
    <div id="jSplash"></div>
</h:form> 
```

**错误**

```
[javax.enterprise.resource.webcontainer.jsf.application] (http-localhost-127.0.0.1-8080-6) Error Rendering View[/masterdata/CM_Bank_Account.xhtml]: javax.faces.FacesException: Cannot find component with identifier "acinfo" referenced from "account". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:58:34.983

首先，尝试在它前面添加一个冒号，让它变成`update=":acinfo"`并看看它是否有效。

如果不是，那么如果您取出更新（因此页面加载）并在页面上找到 acinfo panelGroup，它的 ID 是否仍然是 acinfo？我看到您已`prependId`在主模板中设置为 false，但仔细检查可能是明智的。如果它不同，请尝试将其设置为那个（或在它前面加上一个冒号。）

如果这两个都失败了，也许尝试将`prependId`formbutton设置为true，那么`update=":formbutton:acinfo"`？

# c# - 重新绘制时的 WPF 事件

> ID：12389746
> 
> 赞同：1
> 
> 时间：2012-09-12T13:50:25.103
> 
> 标签：c#, .net, wpf, events, rendering

我有一些将 Canvas 的内容呈现为位图的代码。Canvas 的子元素会周期性地在视觉上发生变化，我需要一种方法来辨别这种情况何时发生，以便我可以重新绘制位图。我最初的想法是覆盖`Canvas.OnRender`，但是当孩子重新渲染时，这似乎没有被调用。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:03:59.117

请记住，WPF 不是基于帧重绘，而是更多地基于脏区域的概念。此外，OnRender 不像 OnPaint，它用于创建缓存表示来渲染实际内容，在大多数情况下，它不需要重新渲染来显示一些更改，这就是它不被调用的原因。要获得您想要的效果，您可以使用[CompositionTarget.Rendering](http://msdn.microsoft.com/en-us/library/system.windows.media.compositiontarget.rendering.aspx)事件。它可能是最接近绘画活动的地方。但是有一个警告，当您附加到该事件时，渲染行为会发生一些变化，请检查[this](http://msdn.microsoft.com/en-us/library/bb613584.aspx#CompositionTarget_Rendering_Event)。

另一个想法可能是研究[VisualBrush](http://msdn.microsoft.com/en-us/library/system.windows.media.visualbrush.aspx)。

# php - 将分钟转换为小时和分钟

> ID：12389747
> 
> 赞同：0
> 
> 时间：2012-09-12T13:50:25.357
> 
> 标签：php, date, datetime

如何将分钟转换为小时和分钟？例如

```
$dt = new DateTime();
$currDate = date_format($dt, 'Y-m-d');

$startMinutes = 939;

$startT = $currDate . " " . gmdate("H:i", $startMinutes); 
```

此代码返回类似 '2012-09-12 00:15' 而不是 15:... 为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:59:43.540

date 和 gmdate 函数都以秒而不是分钟作为输入。所以你所要做的就是将你的 startminutes 乘以 60 来得到你的答案。

```
$startT = $currDate . " " . gmdate("H:i", ($startMinutes * 60)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T13:57:38.580

类似以下公式的东西应该起作用：

```
$hours  = floor($minutes/60); //round down to nearest minute. 
$minutes = $minutes % 60; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:59:41.777

非常快速的方法，这应该有效：

```
echo date('H:i', strtotime($startMinutes.' minutes')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:02:55.537

```
$dt = new DateTime('now');
$dt->modify('+939 minutes');
echo $dt->format('Y-m-d H:i'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T13:55:11.403

试试这个..

```
$d = floor ($startMinutes / 1440);
$h = floor (($startMinutes - $d * 1440) / 60);
$m = $startMinutes - ($d * 1440) - ($h * 60);

echo "{$startMinutes}min converts to {$d}d {$h}h {$m}m"; 
```

你应该可以从那里拼凑起来..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T18:33:33.210

试试这个

```
function hour_min($minutes){
       if($minutes == 0){return '';}else{
        $hours  = round(intval($minutes/60) , 2); //round down to nearest minute.
        $minutes = $minutes % 60; return sprintf("%02d", $hours).':'.sprintf("%02d", $minutes);
       }
 }
 echo hour_min(720);  // 12:00 
 echo hour_min(480); //  08:00 
```

# ios - 如何在同一域上的移动 Safari 和 web 视图之间共享数据（仅限客户端）

> ID：12389763
> 
> 赞同：1
> 
> 时间：2012-09-12T13:51:01.290
> 
> 标签：ios, mobile-safari, local-storage, web-sql, frontend

在**iOS**上：
是否可以在移动 Safari 上的页面和 WebView（本机应用程序）上的页面之间在客户端共享数据？
两个页面在完全相同的域上。

到目前为止，我厌倦了 webSQL 和 localStorage，即使它们的链接完全相同，它们似乎也将数据保存在单独的数据库中。

我不介意使用 WebSQL/indexDB、localStorage、cookie、appCache、*Kung Fu*等等！

非常感谢您的帮助:)
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:55:49.747

我不认为您可以在 Mobile Safari 和嵌入`UIWebView`. 实际上，它们是托管在不同沙箱中的两个应用程序。（有关沙盒的一般信息，请阅读[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/TheiOSEnvironment/TheiOSEnvironment.html)）。如果这是可能的，您的应用程序可能会损害 Safari 的安全性，这绝对是不可取的。

您可以做的是使用 cookie 在服务器端存储数据。您应该提供有关您尝试做什么的更多详细信息，以便提供一些具体示例，但这里的一般想法是您唯一地标识您的用户会话，然后使用来自`UIWebView`Safari 和 Mobile Safari 的这个唯一标识符。然后你可以让`UIWebView`和 Mobile Safari 像这样通信：

1.  从`UIWebView`到 Mobile Safari：您可以在 Mobile Safari 中打开一个 URL，并让该 URL 对用户标识符进行编码，以便 Safari 可以访问相同的用户数据；

2.  在 Mobile Safari 中：使用自定义 URL 方案（例如：“myapp://xxxxxxx”）并使您的应用程序将自己注册为该 URL 方案的处理程序；此外，在 URL 中对用户标识符进行编码，以便您的应用知道要请求哪些数据。

我希望这些提示可以让您了解如何设计您的应用程序。

# c# - C#：手动创建一个 console.writeline

> ID：12389766
> 
> 赞同：3
> 
> 时间：2012-09-12T13:51:13.480
> 
> 标签：c#, class, methods

我正在尝试手动模拟 Console.Writeline。即：我正在创建一个带有WriteLine 函数的小型控制台类。请参阅下面的代码：

```
static class Console
{
    public static string WriteLine(string text)
    {
        return text;
    }
} 
```

所以我尝试了：

```
class Program
{
    static void Main()
    {
        Console.WriteLine("HiMan");
    }
}
static class Console
{
    public static string WriteLine(string text)
    {
        return text;
    }
} 
```

我知道它会返回文本，但是如何在不使用 Write 或 Writeline 方法的情况下将其显示在屏幕上？

我创建这个示例是为了让人们了解类是如何工作的，以及为什么当我使用 WriteLine 或 Write() 时它会在控制台窗口中显示文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:56:54.710

这取决于你想去多深。[Console.WriteLine()](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)在内部调用 Console.Out 上的 WriteLine [。](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)Console.Out 是一个提供 WriteLine 实现的[TextWriter 。](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)您始终可以通过直接将字节写入流来实现自己的 WriteLine。

如果您想更深入，例如直接写入控制台缓冲区，请注意 Console 的 Out、In 和 Error 属性都是可重定向的，忽略它们可能会导致问题，例如无法使用重定向输入和输出命令行上的管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:24:20.700

我猜你想在相当低的水平上做到这一点。我已经使用`ReadConsoleOutput`并`WriteConsoleOutput`以我不允许的方式直接读取和写入控制台的显示`Console.WriteLine`（这些对于复古 2d 控制台游戏来说非常有用，我的初衷）。

PInvoke 链接：[ReadConsoleOutput](http://pinvoke.net/default.aspx/kernel32/ReadConsoleOutput.html) | [写控制台输出](http://pinvoke.net/default.aspx/kernel32/WriteConsoleOutput.html)

你可能不需要`ReadConsoleOutput`，但对于那些在谷歌这个页面上搜索的人来说，这些方法有点相辅相成。

如果你想从键盘上阅读，*我相信*你可以使用`ReadConsoleInput`，但我还没有真正尝试过。对那个建议有点怀疑。

# mysql - 根据状态汇总货币列？

> ID：12389767
> 
> 赞同：1
> 
> 时间：2012-09-12T13:51:16.973
> 
> 标签：mysql, crosstab

我有一个交叉表查询，可以很好地根据某个记录状态汇总所有记录 [活动、结束等]

```
Select
  c.ReferralName,
  Sum((d.CaseStatusName) = 'Active') As Active,
  Sum((d.CaseStatusName) = 'Completed') As Completed,
  Sum((d.CaseStatusName) = 'Submitted') As Submitted,
  Count(b.CaseID) As Total,
  Sum(b.LeadCost) As Cost
From
  tblcontacts a Inner Join
  tblcases b On a.ContactID = b.ContactID Inner Join
  tblreferral c On c.RefferalID = a.ContactReferrelSource Inner Join
  tblcasestatus d On d.CaseStatusID = b.CaseStatusName
Group By
  c.ReferralName With Rollup 
```

这很好用，但我现在还想运行一个查询，将 d.CaseStatusName 的总和替换为 b.LeadCost 的总和，但找不到实现它的方法！

我认为如果 d.CaseStatusName='Active' 等，我需要有 b.LeadCost 的总和等

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:12:49.757

```
Select
  c.ReferralName,
  Sum(CASE WHEN (d.CaseStatusName) = 'Active'    THEN b.LeadCost ELSE 0 END) As Active,
  Sum(CASE WHEN (d.CaseStatusName) = 'Completed' THEN b.LeadCost ELSE 0 END) As Completed,
  Sum(CASE WHEN (d.CaseStatusName) = 'Submitted' THEN b.LeadCost ELSE 0 END) As Submitted,
  Count(b.CaseID) As Total,
  Sum(b.LeadCost) As Cost
From
  tblcontacts a Inner Join
  tblcases b On a.ContactID = b.ContactID Inner Join
  tblreferral c On c.RefferalID = a.ContactReferrelSource Inner Join
  tblcasestatus d On d.CaseStatusID = b.CaseStatusName
Group By
  c.ReferralName With Rollup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:11:25.163

我不确定我是否理解您的要求，但似乎您可能希望`CASE`根据以下条件检查条件`d.CaseStatusName`：

```
SELECT
  c.ReferralName,
  CASE
    WHEN d.CaseStatusName = 'Active'
      THEN b.LeadCost
    ELSE 'SomethingElse'
  END AS casecolumn
... 
```

# c# - 通过 JQuery 将 JSON 数据放入网格中

> ID：12389768
> 
> 赞同：0
> 
> 时间：2012-09-12T13:51:17.333
> 
> 标签：c#, jquery, asp.net, ajax, json

希望某处有一个简单的 json 网格插件。我需要通过 JSON/Ajax 填充网格，问题是数据或列的数量几乎总是不同的，因此需要相应地进行调整。

即通过jQuery ajax调用传递参数，配置sql并针对数据库运行这可能是任何字段/表，然后需要以某种方式返回行并填充网格/ div

我正在使用 ASP .Net c#，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:56:03.853

JQuery UI 团队正在构建一个...

[http://blog.jqueryui.com/2011/02/unleash-the-grid/](http://blog.jqueryui.com/2011/02/unleash-the-grid/)

并参考现有的可能性：

[https://github.com/mleibman/SlickGrid/wiki](https://github.com/mleibman/SlickGrid/wiki)

[http://www.trirand.com/blog/](http://www.trirand.com/blog/)

[http://www.datatables.net/](http://www.datatables.net/)

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

[http://flexigrid.info/](http://flexigrid.info/)

[http://reconstrukt.com/inggrid/](http://reconstrukt.com/ingrid/)

# ajax - 不同的 .js 文件中的 Ajax 调用

> ID：12389774
> 
> 赞同：0
> 
> 时间：2012-09-12T13:51:29.737
> 
> 标签：ajax, html, jquery-mobile

我想从不同的 .js 文件进行 Ajax 调用。我做了这样的事情：

```
function ajax(url,success,error)
{
    success+="(data)";
    error+="(xhr, ajaxOptions, thrownError)";

    console.log("Starting AJAX");
    console.log("Success function: " + success);
    console.log("Success function: " + error);

    $.ajax({                                                                   
        crossDomain: true,
        type: 'GET',
        url: url, 
        callback: 'jsonpCallback',
        jsonpCallback: 'jsonpCallback',
        jsonp: '_jsonp',
        scriptCharset: "utf-8",
        contentType:  'application/json',
        dataType: 'jsonp json',
        timeout : 5000,

        success: success_contact(data),
        error: error_contact(),
    });
} 
```

还有函数success_contact 和error contact。我是这样开始的：

```
$(document).bind('pageinit', function() {
    ajax('http://topfirma-dev/topfirma-www/services/rest/contact/list','success_contact','error_contact');
}); 
```

调用了ajax调用，但是报错：

```
Uncaught ReferenceError: data is not defined 
```

这是我的问题。如何从我的 Ajax 调用中捕获数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:59:10.767

如果`success_contact`和`error_contact`在别处定义，您不需要在那里将它们称为函数，您只需告诉它们是哪些函数。

```
var success_contact = function (data) {
    /* do something */
}

var error_contact = function (jqXHR, textStatus, errorThrown) {
    /* do something */
}

// ...

$.ajax({                                                                   
    crossDomain: true,
    type: 'GET',
    url: url, 
    callback: 'jsonpCallback',
    jsonpCallback: 'jsonpCallback',
    jsonp: '_jsonp',
    scriptCharset: "utf-8",
    contentType:  'application/json',
    dataType: 'jsonp json',
    timeout : 5000,

    success: success_contact,
    error: error_contact,
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:00:57.993

当您进行 ajax 调用（或内联传递函数）时，您应该只将函数的名称传递给成功（和错误）属性。

例如

```
$.ajax({                                                                   
    crossDomain: true,
    type: 'GET',
    url: url, 
    callback: 'jsonpCallback',
    jsonpCallback: 'jsonpCallback',
    jsonp: '_jsonp',
    scriptCharset: "utf-8",
    contentType:  'application/json',
    dataType: 'jsonp json',
    timeout : 5000,

    success: success_contact,
    error: error_contact,
}); 
```

然后你应该声明success_contact（和error_contact）函数：

```
var success_contact = function(data) {
    console.log(data);
}; 
```

或者：

```
$.ajax({                                                                   
    crossDomain: true,
    type: 'GET',
    url: url, 
    callback: 'jsonpCallback',
    jsonpCallback: 'jsonpCallback',
    jsonp: '_jsonp',
    scriptCharset: "utf-8",
    contentType:  'application/json',
    dataType: 'jsonp json',
    timeout : 5000,

    success: function(data, textStatus, jqXHR) {
    console.log(data);
    // Do stuff
},
    error: function(jqXHR, textStatus, errorThrown) {
    // Do stuff
}
}); 
```

# java - 从 Servlet 转发到 JSP 页面时如何在 URL 中显示 .jsp 扩展名

> ID：12389775
> 
> 赞同：0
> 
> 时间：2012-09-12T13:51:30.517
> 
> 标签：java, jsp, servlets

正如标题所说：从 Servlet 转发到 JSP 页面时，如何在 URL 中显示 .jsp 扩展名**而不重定向，从而失去 Servlet 的功能**？

如果我使用以下代码从 Servlet 转发到 JSP 页面，我的 URL 中仍然有 Servlet：

```
request.getRequestDispatcher("index.jsp").forward(request, response); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:03:09.107

你没有。

浏览器会显示它认为正在从中获取数据的 URL。除非你告诉它它通过重定向获得不同的 URL，否则它无法知道服务器在幕后做什么。也不应该。

从应用程序设计的角度来看，您也不应该关心。使用唯一 URL 的唯一原因是用户可以设置书签。如果 JSP 页面需要来自 servlet 的数据，那么为用户提供不同的 URL 是没有意义的。

如果您对为浏览器提供“.jsp”URL 不以为然，那么让 servlet 将数据存储在会话中。这是丑陋的，毫无意义的，并且受到并发访问问题的影响，但它确实有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T13:57:02.040

您可以重定向到 JSP 而不是转发到它：

```
response.sendRedirect("index.jsp"); 
```

# c# - 为什么我可以创建这个功能？

> ID：12389778
> 
> 赞同：-1
> 
> 时间：2012-09-12T13:51:40.220
> 
> 标签：c#

```
private void List<string> removeDuplicates(
    List<string> currentsites, 
    List<string> listintheformlevelsitesvisited)
{
} 
```

我想得到两个列表，但我得到了错误。很多错误：

; 预期标识符预期无效令牌）无效令牌> Sysntax错误（

错误 10 找不到类型或命名空间名称“listintheformlevelsitesvisited”（是否缺少 using 指令或程序集引用？）

错误 9 找不到类型或命名空间名称“removeDuplicates”（您是否缺少 using 指令或程序集引用？）

我想要的只是一个获取两个列表的简单函数。怎么了 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T13:52:19.767

一个函数不能同时返回`void`和`List<string>`。

去掉一个就可以了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T13:52:55.870

您的函数必须返回`void` **OR** `List<string>`，而不是两者。

# css - Opera 12 的 CSS 特定规则？

> ID：12389782
> 
> 赞同：4
> 
> 时间：2012-09-12T13:51:43.793
> 
> 标签：css, opera, css-hack

> **可能重复：**
> [如何使 CSS 仅对 Opera 可见](http://stackoverflow.com/questions/1120335/how-to-make-css-visible-only-for-opera)

很多时候，我需要使用特定于浏览器的 CSS 规则来使设计在每个浏览器中看起来都一样。通常我需要它们用于 IE 7-8，但这次是用于 Opera，特别是 Opera 12 及更高版本。

我为 Opera 找到了一些解决方案：

*   [让 CSS 仅适用于 Opera 11？](https://stackoverflow.com/questions/4647992/how-to-make-css-visible-only-for-opera-11-opera-11-css-hack)
*   [如何使 CSS 仅对 Opera 可见](https://stackoverflow.com/questions/1120335/how-to-make-css-visible-only-for-opera)

但这些仅适用于 11 岁或以下...

Opera 12 有解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T16:06:59.207

这是官方推荐的 Opera hack（以防万一***一切***都失败了）：

```
doesnotexist:-o-prefocus, .example {
  color: red;
} 
```

[http://www.opera.com/docs/specs/presto2.12/css/o-vendor/](http://www.opera.com/docs/specs/presto2.12/css/o-vendor/)

通过：[https ://stackoverflow.com/a/4021618](https://stackoverflow.com/a/4021618)

ps：请注意**davehale32**的评论，*该 hack 不适用于 IE6*。我现在没有可用的 IE6，所以我无法确认或否认。

# sharepoint - BDLC 需要安装 Excel 才能读取 .xls 文件？

> ID：12389784
> 
> 赞同：0
> 
> 时间：2012-09-12T13:51:56.680
> 
> 标签：sharepoint, odbc, oledb, excel-2003

我正在使用 Sharepoint 2007 和业务数据列表连接器 Web 部件来尝试将一些 Excel 2003 文件转换为 Sharepoint 列表。在运行 Windows Server 2003 并安装了 Microsoft Office 2003 的虚拟机上，我设法做到了这一点。当尝试在装有 Windows Server 2003 但未安装 Microsoft Office 的服务器上执行相同操作时，但当我尝试运行查询时，出现的错误是：
***ERROR [42000] [Microsoft][ODBC Excel Driver] ' Project$' 不是有效名称。确保它不包含无效字符或标点符号，并且不要太长。***，
查询是

```
select * from [Project$] 
```

我尝试使用 OleDB 和 ODBC 连接到 Excel 文件，当我验证连接时，我在这两种情况下收到的消息都是
***Connected to: C:\TEST-EXCEL (System.Data.Odbc)。连接服务器版本：08.00.0000 ***
我是否还需要在服务器上安装 Microsoft Office 或者问题出在其他地方？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:00:51.087

我不明白为什么，当我将文件移动到服务器时，项目表的名称更改为原来的名称，更长的名称。将查询中的名称更改为原始工作表名称后，它工作正常。

# haskell - 在haskell中为这种堆栈类型定义函子

> ID：12389787
> 
> 赞同：0
> 
> 时间：2012-09-12T13:52:02.797
> 
> 标签：haskell, functor

这就是我定义堆栈类型的方式。可能有更好的方法，但现在让我们坚持这个。

```
data Stack' v = Stack' [v] Int deriving (Show)

```

所以像 push' 这样的东西看起来像这样

```
push' :: (Ord v) => Stack' v -> v -> Stack' v 
push' (Stack' l m) a = if m <= length l then Stack' l m else Stack' (l ++ [a]) m 
```

但我无法为此定义函子。我的这次尝试失败了，说“Parse error in pattern: v”

```
instance Functor Stack' where
    fmap f (v l) = (map f v) (l) 
```

有人可以帮我定义函子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:56:26.210

```
instance Functor Stack' where
    fmap f (Stack' v l) = Stack' (map f v) (l) 
```

看看类型，`fmap :: Functor f => (a -> b) -> f a -> f b`你会发现你的错误。

您需要提供一个类型的值`f a`（这里 f 是 Stack'）并返回一个类型的值`f a`。

你也应该尽量避免`++`，因为`O(n)`n 是第一个参数的长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:12:33.820

最简单的定义是：

```
{-# LANGUAGE DeriveFunctor #-}

data Stack' v = Stack' [v] Int deriving (Show, Functor) 
```

你也应该避免`length`，因为它是`O(n)`.

使用`a : l`而不是`l ++ [a]`- 列表只能有效地附加在它们的头部，附加到尾部是`O(n)`。

你`push'`可以通过移动来重写`if`：

```
push' (Stack' l m) a = Stack' (if m <= length l then l else l ++ [a]) m 
```

# sql - 从 Excel 中的数据透视表中提取 SQL

> ID：12389792
> 
> 赞同：0
> 
> 时间：2012-09-12T13:52:08.757
> 
> 标签：sql, excel, pivot-table

我有一个包含数据和数据透视表的 Excel 2007 文件。我正在将数据迁移到 MSSQL 数据库，但我想从数据透视表中获取 SQL。有办法做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:56:32.570

如果数据透视表使用 SQL 查询从数据库中获取信息，您应该能够单击数据->连接并双击数据透视表的连接，转到定义，在命令文本下它应该有 SQL 查询.

这里有一篇关于如何使用 SQL 创建数据透视表的帖子： [http ://www.spreadsheetsmadeeasy.com/excel-create-pivot-table-using-sql/](http://www.spreadsheetsmadeeasy.com/excel-create-pivot-table-using-sql/)

如果它不存在，请检查同一窗口中的命令类型，因为它可能类似于“Cube”，它不是 SQL 查询，而是与 OLAP 多维数据集建立的连接。

# android - 如何在 sqllite 事务中捕获异常 - java android

> ID：12389795
> 
> 赞同：5
> 
> 时间：2012-09-12T13:52:16.723
> 
> 标签：android, android-sqlite

所以我正在为android编写一个数据库管理器，在那个类中将是一个写入该数据库表的方法..

```
 SQLiteDatabase db = this.getReadableDatabase();
        db.beginTransaction();
        try {
          //DO some db writing
          db.setTransactionSuccessful();
        } finally {
          db.endTransaction();
        } 
```

我的理解是，如果事务没有像在尝试中那样设置为成功，这将自动回滚数据，但是如果它不成功，我该如何捕捉，以便我可以通知用户成功或回滚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:55:06.397

只需将 catch 块放在 finally 块之前

```
SQLiteDatabase db = this.getReadableDatabase();
        db.beginTransaction();
        try {
          //DO some db writing
          db.setTransactionSuccessful();
        }catch(Exception e){
           // here you can catch all the exceptions
           e.printStack();
        } finally {
          db.endTransaction();
        } 
```

try catch 的例子

[http://www.java-samples.com/showtutorial.php?tutorialid=293](http://www.java-samples.com/showtutorial.php?tutorialid=293)

[http://tutorials.jenkov.com/java-exception-handling/basic-try-catch-finally.html](http://tutorials.jenkov.com/java-exception-handling/basic-try-catch-finally.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-19T07:43:11.967

对我来说，使用`e.printStackTrace();`工作而不是`e.printStack();`

```
SQLiteHelper dbHelper = new SQLiteHelper(mContext);
        mDatabase = dbHelper.getReadableDatabase();

        mDatabase.beginTransaction();

        try {

        }catch(Exception e){
            // here you can catch all the exceptions
            e.printStackTrace();

        } finally {

            mDatabase.endTransaction();
        }

        mDatabase.close(); 
```

# matlab - Matlab矩阵dimagree错误仅在独立应用程序中

> ID：12389797
> 
> 赞同：0
> 
> 时间：2012-09-12T13:52:20.437
> 
> 标签：matlab, matrix, matlab-compiler

我必须将我的 Matlab 函数转换为独立的应用程序。我使用 Matlab 构建工具构建它，那部分没问题。但是，我在运行我的独立程序时遇到了一个可怕的错误，即使它在 Matlab 中工作得很好；这里的代码似乎是错误的：

```
% INITIALISATIONS
% find connected components
cc = bwconncomp(bw);
% find areas and centroids
stats = regionprops(cc, 'Area','Centroid');
% keep only the particles in the right dimensions
all_areas = cat(1, stats(:).Area);
idx = zeros(size(all_areas));
fprintf('\nSize all_areas : %d %d \n',size(all_areas,1), size(all_areas,2));
fprintf('\nSize idx : %d %d \n',size(idx,1), size(idx,2));
fprintf('\nProgram paused. Press enter to continue.\n');
pause;
idx = all_areas > minArea & all_areas < maxArea; 
```

错误显示在上述代码的最后一行。我得到：

```
??? Error using lt
Matrix dimensions must agree.
Error in ==> stats at 46
Error in ==> statPart at 83
MATLAB:dimagree 
```

如您所见，我尝试用 zeros() 初始化 idx，并输出 idx 和 all_areas 的大小，运行程序时它们是相同的。所以我现在不知道，我真的需要帮助......

[编辑]

这是我用来处理 statPart 函数输入的代码：

```
function [BW2,stat] = statPart(varargin)
i = 1; 
while i<=length(varargin), 
    argok = 1; 
    if ischar(varargin{i}), 
        switch varargin{i}, 
            % argument IDs
            case 'minArea', i = i+1; minArea = varargin{i};
            case 'maxArea', i = i+1; maxArea = varargin{i}; 
            case 'subImgSize', i = i+1; subImgSize = varargin{i};
            case 'image', i = i+1; Igray = varargin{i};
            otherwise argok = 0; 
        end
    else
        argok = 0; 
    end
    if ~argok, 
        disp(['(statPart) Argument invalide ignore #' num2str(i+1)]); 
    end
    i = i+1; 
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:55:32.880

错误消息指出他的问题出现在`lt`这一行的（小于比较）中：

```
idx = all_areas > minArea & all_areas < maxArea; 
```

因为 `minArea`和`maxArea`的尺寸不同`all_areas`。它们要么必须是 of 要么是`size(all_areas)`标量，但它们不是。

根据您的检查，`minArea`and `maxArea`are `[50 48 48]`，它是“200”的 ASCII 等价物。它们作为字符串从命令行接收，您应该[`str2num`](http://www.mathworks.com/help/matlab/ref/str2num.html)在处理它们的值之前将它们转换为数字。
但是，我不明白为什么它们不等于您的输入字符串“2”和“20000”。你是如何解析你的输入参数的？那将是开始寻找问题的好地方，但是如果没有其他信息，我将无法为您提供进一步的帮助。

此外，您在评论中提到`disPart`调用`statPart`. 是什么`disPart`，和它有什么关系`statPart`？

# java - 禁止在 JTabbedPane 中更改选项卡

> ID：12389801
> 
> 赞同：6
> 
> 时间：2012-09-12T13:52:35.803
> 
> 标签：java, swing, jtabbedpane

我试图阻止用户在当前选项卡无效时更改选项卡。因此，当他单击一个选项卡时，我想检查当前选项卡是否“有效”，如果不是，则留在当前选项卡上。我尝试使用无效的 VetoableChangeListener，代码永远不会进入 vetoableChange 方法：

```
jTabbedPane.addVetoableChangeListener(new VetoableChangeListener() {

  @Override
  public void vetoableChange(PropertyChangeEvent evt) throws PropertyVetoException {
    if (!isCurrentTabValid()) {
      throw new PropertyVetoException("test", evt);
    }
  }
}); 
```

我怎样才能正确地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T14:31:33.400

VetoableChangeListener 仅在其注册的类触发可否决的 propertyChange 时才有用。JComponents 和子类上的大多数（全部？从来没有遇到过一个）属性是不可否决的。此外，选择由 SingleSelectionModel 处理，而不是组件本身。

该模型是支持可否决更改的钩子

*   实现一个自定义模型，在选择更改时触发 vetoablePropertyChange
*   如果没有任何听众反对，则继续进行更改，否则什么也不做
*   将自定义模型设置为 tabbedPane
*   实现一个包含验证逻辑的 VetoablePropertyChangeListener
*   将 vetoableListener 注册到模型

在代码中，类似

```
public static class VetoableSingleSelectionModel extends
        DefaultSingleSelectionModel {

    private VetoableChangeSupport vetoableChangeSupport;

    @Override
    public void setSelectedIndex(int index) {
        if (getSelectedIndex() == index)
            return;
        try {
            fireVetoableChange(getSelectedIndex(), index);
        } catch (PropertyVetoException e) {
            return;
        }
        super.setSelectedIndex(index);
    }

    private void fireVetoableChange(int oldSelectionIndex,
            int newSelectionIndex) throws PropertyVetoException {
        if (!isVetoable())
            return;
        vetoableChangeSupport.fireVetoableChange("selectedIndex",
                oldSelectionIndex, newSelectionIndex);

    }

    private boolean isVetoable() {
        if (vetoableChangeSupport == null)
            return false;
        return vetoableChangeSupport.hasListeners(null);
    }

    public void addVetoableChangeListener(VetoableChangeListener l) {
        if (vetoableChangeSupport == null) {
            vetoableChangeSupport = new VetoableChangeSupport(this);
        }
        vetoableChangeSupport.addVetoableChangeListener(l);
    }

    public void removeVetoableChangeListener(VetoableChangeListener l) {
        if (vetoableChangeSupport == null)
            return;
        vetoableChangeSupport.removeVetoableChangeListener(l);
    }

}

// usage
JTabbedPane pane = new JTabbedPane();
VetoableSingleSelectionModel model = new VetoableSingleSelectionModel();
VetoableChangeListener validator = new VetoableChangeListener() {

    @Override
    public void vetoableChange(PropertyChangeEvent evt)
            throws PropertyVetoException {
        int oldSelection = (int) evt.getOldValue();
        if ((oldSelection == -1) || isValidTab(oldSelection)) return;

        throw new PropertyVetoException("change not valid", evt);

    }

    private boolean isValidTab(int oldSelection) {
        // implement your validation logic here
        return false;
    }
};
model.addVetoableChangeListener(validator);
pane.setModel(model);
pane.addTab("one", new JLabel("here we are and stay"));
pane.addTab("other", new JLabel("poor me, never shown")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:00:23.163

听起来你想先禁用标签。然后当当前页面有效时启用选项卡。听起来您可能还想考虑使用 CardLayout 而不是选项卡。然后在当前页面有效时使用“下一步”或“继续”按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:59:52.500

看起来 vetoableChange 是 java.beans 包的一部分。尝试添加一个`javax.swing.event.ChangeListener`.

```
bodyTabbedPane.addChangeListener(new javax.swing.event.ChangeListener() {
        public void stateChanged(javax.swing.event.ChangeEvent evt) {
            bodyTabbedPaneStateChanged(evt);
        }
    });

private void bodyTabbedPaneStateChanged(javax.swing.event.ChangeEvent evt) {
    if (!isCurrentTabValid()) {             
         throw new PropertyVetoException("test", evt);           
     }
} 
```

# sharepoint - 获取正在运行的工作流的关联数据

> ID：12389802
> 
> 赞同：1
> 
> 时间：2012-09-12T13:52:37.223
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我需要以编程`AssociationData`方式从控制台应用程序中获取正在运行的工作流。现在我只能获取`AssociationData`它的父级（列表中的工作流关联）。

```
using (SPSite site = new SPSite("http://sp:2200"))
    {
        using (SPWeb web = site.OpenWeb())
        {
            string parentAssociationData =
                web.Lists["TestWorkflow"].GetItemById(1).Workflows[0].
                    ParentAssociation.AssociationData;
        }
    } 
```

我需要这样的东西

```
string neededData = item.Workflows[0].AssociationData; 
```

因为当您手动启动工作流程并在开始之前更改其设置时：`workflow.AssociationData != workflow.ParentAssociation.AssociationData`

例如，我可以通过

```
SPWorkflowActivationProperties workflowProperties = new SPWorkflowActivationProperties();
workflowProperties.AssociationData 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:33:59.323

我想你误会了`AssociationData`。关联数据仅在将工作流与您的列表关联时输入*一次。*您说您正在**开始之前**更改设置- 在这种情况下您正在谈论`InitiationData`！
[SPWorkflowActivationProperties.InitiationData](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.workflow.spworkflowactivationproperties.initiationdata)将帮助您：

> --> 获取传递给工作流**实例**的启动数据。

# c# - 使用正则表达式清理字体大小标签

> ID：12389807
> 
> 赞同：2
> 
> 时间：2012-09-12T13:52:58.803
> 
> 标签：c#, .net, regex

我尝试使用正则表达式`<font style="font-size:85%;font-family:arial,sans-serif">`从

```
font-size:85%; 
```

我的正则表达式是`^font-size:(*);`

我的意思是我必须完全删除字体大小标签。

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:06:09.960

您当前的正则表达式有几件事会导致它失败：

```
^font-size:(*); 
```

您正在锚定到行首`^`- 属性不在行首。

`*`就其本身而言，没有任何意义。

将其更改为：

```
font-size: ?\d{1,2}%; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T14:06:01.020

这是您需要的正则表达式：

```
string html = @"<font style=""font-size:85%;font-family:arial,sans-serif"">";
string pattern = @"font-size\s*?:.*?(;|(?=""|'|;))";
string cleanedHtml = Regex.Replace(html, pattern, string.Empty); 
```

即使在or`font-size`中定义了，或者定义了一组不同的 CSS 样式（即未指定），此正则表达式也将起作用。你可以在[**这里**](http://regexr.com?324im)看到结果。`pt``em``font-family`[](http://regexr.com?324im)

 **正则表达式的解释如下：

```
// font-size\s*?:.*?(;|(?="|'|;))
// 
// Match the characters “font-size” literally «font-size»
// Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
//    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
// Match the character “:” literally «:»
// Match any single character that is not a line break character «.*?»
//    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
// Match the regular expression below and capture its match into backreference number 1 «(;|(?="|'|;))»
//    Match either the regular expression below (attempting the next alternative only if this one fails) «;»
//       Match the character “;” literally «;»
//    Or match regular expression number 2 below (the entire group fails if this one fails to match) «(?="|'|;)»
//       Assert that the regex below can be matched, starting at this position (positive lookahead) «(?="|'|;)»
//          Match either the regular expression below (attempting the next alternative only if this one fails) «"»
//             Match the character “"” literally «"»
//          Or match regular expression number 2 below (attempting the next alternative only if this one fails) «'»
//             Match the character “'” literally «'»
//          Or match regular expression number 3 below (the entire group fails if this one fails to match) «;»
//             Match the character “;” literally «;» 
```**

# php - 使用 PHP 编辑 XML

> ID：12389809
> 
> 赞同：0
> 
> 时间：2012-09-12T13:53:06.520
> 
> 标签：php, xml, xmldom

> **可能重复：**
> [如何使用 PHP 修改 xml 文件](https://stackoverflow.com/questions/1193528/how-to-modify-xml-file-using-php)

我有一个看起来像这样的 xml：

```
<host host-name="www.1.com">
   <root-directory>c:/public_html</root-directory>
</host>
<host host-name="www.2.com">
   <root-directory>c:/public_html</root-directory>
</host> 
```

我需要像这样使用php修改xml

如果主机名的值 = www.2.com

更改 c:/public_html/blahblah 中根目录的值

所以最终的结果是：

```
<host host-name="www.1.com">
   <root-directory>c:/public_html</root-directory>
</host>
<host host-name="www.2.com">
   <root-directory>c:/public_html/blahblah</root-directory>
</host> 
```

我真的需要一些帮助。谢谢！

更新：

哦，我忘了说我不是程序员，反正这是我试过的

```
$xmlDomain= "www.2.com";
$nomefile='myfile.xml';
$xmlDoc = new DomDocument();
$xmlDoc->load($nomefile); 
$Xroot = $xmlDoc->documentElement;
$products = $Xroot->getElementsByTagName("host");
$length = $products->length;
for ($i=$length-1;$i>=0;$i--)
{
$p = $products->item($i);    
$pid = $p->getAttribute("host-name");

if ($pid == $xmlDomain)
{  
$parent = $xmlDoc->getElementsByTagName("root-directory");     
$parent->nodeValue = 'c:/public_html/blahblah';             
}
}
$strxml = $xmlDoc->saveXML();
$handle = fopen($nomefile, "w");
fwrite($handle, $strxml);
fclose($handle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:13:25.103

好的，我需要花一分钟时间远离编写文档，所以这里是：

```
function modifyRootDirectoryFormHosts(DOMDocument $doc, $hostNameToLookFor, $newRootDirectory)
{
    $xpath = new DOMXPath($doc);
    $items = $xpath->query(sprintf('//host[@host-name="%s"]', $hostNameToLookFor));

    if (count($items) > 0)
    {
        foreach($items as $item)
        {
            foreach($item->getElementsByTagName('root-directory') as $rootDirElement)
            {
                $rootDirElement->removeChild($rootDirElement->firstChild);
                $rootDirElement->appendChild($doc->createTextNode($newRootDirectory));
            }
        }
    }
}

$xmlSource = <<<XML
<root>
<host host-name="www.1.com">
   <root-directory>c:/public_html</root-directory>
</host>
<host host-name="www.2.com">
   <root-directory>c:/public_html</root-directory>
</host>
</root>
XML;

$doc = new DOMDocument();
$doc->loadXML($xmlSource);

modifyRootDirectoryFormHosts($doc, 'www.2.com', 'c:/public_html/blahblah');

echo $doc->saveXML(); 
```

输出是：

```
<?xml version="1.0"?>
<root>
<host host-name="www.1.com">
   <root-directory>c:/public_html</root-directory>
</host>
<host host-name="www.2.com">
   <root-directory>c:/public_html/blahblah</root-directory>
</host>
</root> 
```

# xml - 如何解析多个不唯一的 XML 元素

> ID：12389810
> 
> 赞同：2
> 
> 时间：2012-09-12T13:53:06.193
> 
> 标签：xml, linq, parsing

我对 XML to Linq 很陌生。这个问题看起来很简单，但我似乎无法弄清楚。希望有人可以帮助我。我得到这样的肥皂响应：

```
<customernumbers>    
     <customernumber>99999</customernumber>      
     <customernumber>27554</customernumber>          
     <customernumber>27555</customernumber>       
</customernumbers> 
```

我想在一个列表中解析这个 XML 文档。我使用这段代码：

```
var xml = XDocument.Load (@"c:\\mydata.xml");
var query =from e in xml.Elements("customernumbers")
    select e.Value;
query.Dump();

    5IEnumerable<String> (1 item)  
    999992755427555 
```

Ofcource 我想要的是分开的 3 个客户号码。不在 1 个字符串中。

任何帮助将非常感激。

//潘

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:22:29.867

您的查询基本上是选择 root node 的值`<customernumbers>`，但该`XElement.Value`属性将返回所有子节点的值，完全按照您的示例显示。相反，您需要做的是选择查询中的每个子节点。

要使用完全相同的查询格式，您只需要再添加一种`Elements()`方法：

```
var query = from e in xml.Element("customernumbers").Elements()
            select e.Value; 
```

`query`现在将包含 3 个`String`对象的集合，每个对象都有一个子节点的值。

如果您有不同名称的子元素，并且您只想要具有特定名称的元素的值，您也可以更改它：

```
var query = from e in xml.Element("customernumbers").Elements("customernumber")
            select e.Value; 
```

现在`query`将包含`String`名称为“customernumber”的任何子元素的值的集合。

您可以进一步缩短它：

```
var query = from e in xml.Descendants("customernumber")
            select e.Value; 
```

这将做同样的事情。当您不知道 XML 的确切结构或者它非常复杂时，这会容易得多。缺点是它会选择任何子节点、孙子节点或任何其他名称为“customernumber”的节点，而不管 XML 树中的位置如何，因此如果您有多个不同的节点带有`<customernumber>`您不想选择的标签，则此方法将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:41:55.043

试试这个来迭代子元素：

```
 var query = from e in xml.Element("customernumbers").Elements("customernumber")
                select e.Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:23:59.127

尝试，

```
List<string> customerNumbers = (from e in xmlelement.Elements("customernumber")
                    select e.Value).ToList<string>(); 
```

# c# - SQLite 不返回它应该返回的内容

> ID：12389815
> 
> 赞同：0
> 
> 时间：2012-09-12T13:53:29.620
> 
> 标签：c#, sqlite, ado.net

一切正常，除了一件事。当我尝试提取得分最高的用户名时，程序失败。

我得到的结果是 0 而不是 le_user

这是行为怪异的代码部分：

```
string query = "SELECT * FROM \"Highscore_List\" ORDER BY Highscore_List.score DESC LIMIT 1";
DataTable  recipe = db.GetDataTable(query);
foreach (DataRow r in recipe.Rows)
{
    string old_user = r["user_name"].ToString();
    int oude_topscore = Convert.ToInt32(r["score"]);
} 
```

而且分数是对的，只是用户名不对。当我离开这部分查询时

```
ORDER BY Highscore_List.score DESC LIMIT 1 
```

结果还是一样。所以这不是问题。

那么我做错了什么？

**编辑：**

这是它的 SQL 转储：

```
-- ----------------------------
-- Table structure for "main"."Highscore_List"
-- ----------------------------
DROP TABLE "main"."Highscore_List";
CREATE TABLE "Highscore_List" (
"id"  INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
"score"  INTEGER NOT NULL,
"user_name"  INTEGER NOT NULL
);

-- ----------------------------
-- Records of Highscore_List
-- ----------------------------
INSERT INTO "main"."Highscore_List" VALUES (1, 1, 'hui');
INSERT INTO "main"."Highscore_List" VALUES (2, 2, 'Onbekend');
INSERT INTO "main"."Highscore_List" VALUES (3, 3, 'onbekend_tt');
INSERT INTO "main"."Highscore_List" VALUES (4, 2, 'onbekenddd');
INSERT INTO "main"."Highscore_List" VALUES (5, 6, 'le_user');
INSERT INTO "main"."Highscore_List" VALUES (6, 0, 'Onbekend'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:27:00.440

You have created your column "user_name" as an integer column.

Actually, it is ok for SQLite to put text values into an integer column and read it out again as text. However, I'm not familiar with the ADO.NET interface to SQLite. It seems that it reads out "user_name" values as integer which results in the `0` values. I see two ways to solve the problem:

1.  Create the "user_name" column as TEXT
2.  Find a way to tell the ADO.NET-SQLite-bridge that it should interpret the values in the "user_name" column of query results as TEXT

# ios - 在 iOS / HTML5 中，是否可以通过 元素？

> ID：12389820
> 
> 赞同：1
> 
> 时间：2012-09-12T13:53:43.620
> 
> 标签：ios, html, video

在我看来，由于某种原因，您无法收听放置在元素上的元素上的点击事件。例如，如果您想创建自己的带有两个按钮的“确认”对话框，显示在元素上，则这些按钮是不可点击的。

有趣的是，如果视频在 iframe 内（作为 YouTube 嵌入），则按钮可以按预期完美运行。

当然，我说的是尚未开始的视频，播放按钮中仅显示海报。

视频是 100%，不是内联的。

我不是在问如何在一个元素上添加一个按钮或一个以屏幕为中心的链接。我在问其他人是否遇到了同样的问题并找到了合适的解决方案。

听“touchend”而不是“click”没有帮助。

# actionscript-3 - 多次使用 .setMode() 后相机崩溃；

> ID：12389821
> 
> 赞同：0
> 
> 时间：2012-09-12T13:53:50.250
> 
> 标签：actionscript-3, flash, apache-flex, actionscript

我正在使用 flex 开发视频聊天应用程序。经过一些带宽检查后，我想根据结果调整相机分辨率。

但是每隔一次我这样做，相机帧就会冻结，我必须杀死 Flash 播放器并重新启动它。相机基本崩溃。

```
private var camera:Camera;

private function setCameraResolution(width:Number, height:Number):void {
    try {
        camera = null;
        camera = Camera.getCamera();

        if (camera == null) {
            infoPanel.title = "Error: ";
            infoText.text = "No Camera Found";
            infoPanel.visible = true;
            hideAllControllers();
            throw new Error("No Camera Found");
        }

        camera.setQuality(0, 80);
        camera.setKeyFrameInterval(15);
        camera.setMode(width, height, 24);
        camera.addEventListener(ActivityEvent.ACTIVITY, cameraActivityHandler);

        videoCamera.clear();
        videoCamera.attachCamera(camera);
    } catch (error:Error) {
        if (debug) {
            ExternalInterface.call('console.log', "Error: " + error.message);
        }
    }
} 
```

此时相机未连接到任何 NetStream。它只发生在一些相机上，我正在使用 Mac。我在其他网站上检查过，他们也更改了分辨率，我从来没有遇到过问题。这一定是我的代码。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:00:20.107

您永远不应该多次更改相机分辨率。

而是缩放您用来表示相机输出的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:44:06.730

我建议你检查这个问题[如何使用 AS3 提高相机的质量？](https://stackoverflow.com/questions/6339398/how-to-increase-the-quality-of-the-camera-using-as3/6340091#6340091)

我不认为你应该把相机归零，试着打电话 cam.setMode()

# python - Python，从已完成的 dict 中获取所有项目。出现内存错误

> ID：12389823
> 
> 赞同：1
> 
> 时间：2012-09-12T13:53:56.927
> 
> 标签：python, xml-parsing

我目前正在完成一个程序，该程序应该解析一个 xml 文件，然后设置它，然后通过电子邮件发送它。我几乎完成了它，但我似乎被卡住了，可以使用一些帮助。我正在尝试从已完成的字典中获取路径属性“dir”和“file”，但出现错误。这是我目前正在处理的部分代码。

更新：我添加了字典，告诉我它是目录更改还是文件名更改旁边的列表

```
def formatChangesByAuthor(changesByAuthor): 
    content = ''
    for author, changes in sorted(changesByAuthor.iteritems()):
    authorName = get_author_name( author );
    content += '       ***** Changes By '+authorName+'*****\n\n'
    for change in changes:
        rawDate = change['date']
        dateRepresentation = rawDate.strftime("%m/%d/%Y %I:%M:%S %p")
        content += '           Date: '+ dateRepresentation+'\n\n'

        path_change = change['paths']
        path_attribute= change['Attribute_changes']

        finalizedPathInformation = []

        for single_change in path_change:
            for single_output in path_attribute:  
                finalizedPathInformation.append(single_output+single_change)

        content +="           " + str(finalizedPathInformation) + "\n" 
```

我希望开始工作的是当路径中有多个路径时它会做

文件名：test.xml

目录位置：/Testforlder/

出于某种原因，它向我显示了一个内存错误。我想知道我是否可以更好地编写路径部分。这是我得到的错误。

```
 content +="           " + str(finalizedPathInformation) + "\n" MemoryError 
```

如果有帮助，现在这里是 xml 文件的一部分。

```
<log>
<logentry
revision="33185">
<author>glv</author>
<date>2012-08-06T21:01:52.494219Z</date>
<paths>
<path
action="M"
kind="file">/trunk/build.xml</path>
<path
 kind="dir"
 action="M">/trunk</path>
 </paths>
 <msg>PATCH_BRANCH:N/A
 BUG_NUMBER:N/A
 FEATURE_AFFECTED:N/A
 OVERVIEW:N/A 
 Testing the system log.
 </msg>
 </log> 
```

现在我将 nodeValue 保存在字典中，但由于某种原因，我无法获取 nodeValue 中的属性以查看它是否具有“dir”或“file”属性。我很确定我在某处做错了什么。任何建议或帮助将不胜感激和欢迎:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T13:58:20.603

显然你`path_change`是一个列表。试试`path_change[0].getAttribute('kind')`。

我还建议添加调试输出（`print path_change`在调用 getAttribute() 之前）以了解有关您的数据结构的更多信息。

当然，如果有一个列表，您可能想要处理列表中的所有元素，而不仅仅是第一个。一种方法可能是：

```
...
    for single_change in path_change:
        kind = str(single_change.getAttribute("kind"))
        if kind == 'dir':
            content += '            Directory Location: '
        elif kind == 'file':
            content += '            Filename:  '
        else:
            raise SomeException("kind is neither dir nor file", kind, single_change)
        content += (str(single_change).
                    replace("u'","       \n").
                    replace("[","").
                    replace("',","").
                    replace("']", "\n ") + "\n")
... 
```

# excel - 求和函数不适用于带有公式的单元格

> ID：12389825
> 
> 赞同：5
> 
> 时间：2012-09-12T13:54:09.920
> 
> 标签：excel, excel-formula

我有 3 个带有公式的单元格。

A1：

```
=IF(B6>=3.3,"1","0") 
```

B1：

```
=IF(C6<7,"0", IF(C6<9,"1",IF(C6>=9,"2"))) 
```

C1：

```
=IF(D6>85,"1","0") 
```

我的单元格 D1 想总结上面的 3 个单元格。

```
=SUM(A1:C1) 
```

但这总是返回 0。

但是当我这样做的时候

```
=A1 + B1 + C1 
```

它返回我的结果

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:58:39.907

您的公式使用文本而不是数字

例如`=IF(B6>=3.3,"1","0")`，也许应该是`=IF(B6>=3.3,1,0)`

=A1 + B1 + C1 强制 Excel 将任何数字文本转换为数字类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T21:32:17.610

您可以使用需要汇总的 VALUE() 封装计算的单元格：

A1：

> =**值（** *如果（B6>=3.3，“1”，“0”）* **）**

B1：

> =**值（** *如果（C6<7,"0", IF(C6<9,"1",IF(C6>=9,"2"))）* **）**

C1：

> =**值（** *如果（D6>85，“1”，“0”）* **）**

D1：

> =总和（A1：C1）

这将强制您的公式输出数字而不是文本，并且可以对此进行总结。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-14T14:21:59.427

请注意：真正的问题在于 IF 公式。返回值时，它不应该用引号引起来。引号使它成为文本。例如，C1: 应该是 If(D6>85,1,0)。那么，Value 就不是必需的了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T18:09:07.347

您也可以将项目封装在您希望被视为数字的公式中。在我的情况下，如果没有结果（IF = false），我不想要计算单元格中的任何内容，但封装整个公式导致结果为 0。如果我让 false = "" 我得到一个错误。所以我只有 =IF(test=X,Value(true),"") - X 在我的情况下是文本，但可以是数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T12:55:25.713

您可能想对以前使用迭代计算（*循环引用*）的公式求和。在这种情况下，excel 偶尔会在没有任何通知的情况下**打开/关闭此功能。**您需要先**打开**该功能。

要做到这一点：`Excel -> Option > Formulas ...>`

# clearcase - 将目标机器（或服务器）安装到 Clearcase VOB

> ID：12389826
> 
> 赞同：1
> 
> 时间：2012-09-12T13:54:15.310
> 
> 标签：clearcase

我在 IBM 的 Rational ClearCase 手册上读到有一个[ct mount](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mount.htm.)命令，但我相信这只是在您进入 ClearCase 环境后从 VOB 服务器[安装 VOB 。](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=%2Fcom.ibm.rational.clearcase.ccrc.help.doc%2Ftopics%2Ft_use_dyn_views.htm)

我正在尝试确定是否可以将目标机器安装到我的个人 ClearCase 视图中。例如，理想情况下，我会在目标机器上输入以下挂载命令：

> mount -t nfs [server_of_view]:/some/vob/dir /local/dir/of/target/machine

是否可以对 ClearCase 视图执行 unix 挂载？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:08:20.297

`mount`并且[`cleartool mount`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mount.htm)是两个不同的命令。

后者用于从动态视图访问vob（根本不用于快照视图）。

前者将使您能够访问快照视图，而您将无法在其中结帐。

# android - Android 4.0 上的 onclicklistener

> ID：12389827
> 
> 赞同：0
> 
> 时间：2012-09-12T13:54:22.970
> 
> 标签：android

我在子对象上定义的按钮控件中遇到了 onclicklistener 问题。这个事件似乎永远不会被解雇。ontouchlistener 似乎正在工作。有没有人遇到过 Android 4.0 的这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:00:52.777

尝试

```
// Create an anonymous implementation of OnClickListener
private OnClickListener mCorkyListener = new OnClickListener() {
    public void onClick(View v) {
      // do something when the button is clicked
    }
};

protected void onCreate(Bundle savedValues) {
    ...
    // Capture our button from layout
    Button button = (Button)findViewById(R.id.corky);
    // Register the onClick listener with the implementation above
    button.setOnClickListener(mCorkyListener);
    ...
} 
```

或者

xml:

```
<Button android:layout_height="wrap_content" 
    android:id="@+id/butHello" 
    android:layout_width="wrap_content" 
    android:text="Поздороваться" 
    android:onClick="butHello_Click"></Button> 
```

代码：

```
public void butHello_Click(View v){
    edtext.setText("Здравствуй, друг");
} 
```

//复制自[http://habrahabr.ru/post/114580/](http://habrahabr.ru/post/114580/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:19:22.640

点击可能会使用喜欢

```
 Button  btnclick = (Button) findViewById(R.id.button1);
    btnclick.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                // do here as require

            }
        });

} 
```

# sql - 删除旧版本条目的语句

> ID：12389833
> 
> 赞同：1
> 
> 时间：2012-09-12T13:54:39.750
> 
> 标签：sql, sql-server, sql-server-2012

我有几个版本分配给 DocumentID。

```
DocID  Version
ABC    1
ABC    2
ABC    3
DEF    1
DEF    2 
```

如何删除旧版本并仅保留最新版本？删除后，这应该保留在表中：

```
DocID  Version
ABC    3
DEF    2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T13:57:54.803

SQL Server 2005+：

```
;WITH x AS (SELECT DocID, Version, rn = ROW_NUMBER() OVER 
  (PARTITION BY DocID ORDER BY Version DESC)
  FROM dbo.tablename
)
DELETE x WHERE rn > 1; 
```

对于 SQL Server 2000，它稍微复杂一些。（包含版本信息总是有用的。）

```
DELETE t
FROM dbo.tablename AS t
LEFT OUTER JOIN 
(
  SELECT DocID, Version = MAX(Version)
  FROM dbo.tablename
  GROUP BY DocID
) AS t2
ON t.DocID = t2.DocID
AND t.Version = t2.Version
WHERE t2.DocID IS NULL; 
```

显然，后一个查询[也可以在 MySQL 中工作](http://sqlfiddle.com/#!2/4055c/1)（感谢@bluefeet）。

~~对于 MySQL，您是一个人，您最好发布一个完全不同的问题。~~

# c# - 如何判断 ComboBox 中什么时候没有选择

> ID：12389838
> 
> 赞同：1
> 
> 时间：2012-09-12T13:54:46.873
> 
> 标签：c#, .net, combobox

我有一个由 LINQ 查询填充的 ComboBox：

```
var locations = 
    from loc in db.LOCATIONs
        .Where(a => a.Omit == false)
select new
{
    LocationID = loc.LocationID,
    Location = loc.Location1
};

cbo = this.cboAdminLocation;
cbo.DataSource = locations;
cbo.DisplayMember = "Location";
cbo.ValueMember = "LocationID";
cbo.SelectedIndex = -1; 
```

我还有一个例程 DisplayAccounts()，它列出了 DataGridView 中的所有帐户，但如果选择，则按组合中选择的值进行过滤，如果没有，则显示所有帐户。我认为这将非常简单，并尝试使用 DisplayAccounts() 中的以下语句来处理它：

```
if (this.cboAdminLocation.SelectedIndex > -1)
    filterAdminLocation = Convert.ToInt32(this.cboAdminLocation.SelectedValue.ToString());
else
    filterAdminLocation = 0; 
```

在 LINQ 查询结束时：

```
if (filterAdminLocation > 0)
{
    accountData = accountData.Where(a => a.LocationID == filterAdminLocation);
} 
```

但是，我在第一轮循环中（即在有机会从组合中选择一个值之前）出现“输入字符串的格式不正确”的错误，实际上这个阶段的组合值是显示为`{ LocationID = 1, Location = "Brentwood" }`并且所选索引为 0。如果我跳过此步骤并在我选择了一个值时进行测试，它会按预期返回一个整数值。

`if (this.cboAdminLocation.SelectedIndex > -1)`因此，我的问题是，为什么当所选索引为0时，为什么要超越测试，而当我在填充控件时明确将其明确设置为-1时，为什么选择了所选索引0？

我很欣赏这可能很简单，但我对 C# 还很陌生，所以你必须原谅我的愚蠢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:07:06.810

> Therefore, my question is why does get past the if (this.cboAdminLocation.SelectedIndex > -1) test when the selected index is supposedly 0, and more to the point why is the selected index 0 when I explicitly set it to -1 when填充控件？

这是因为您*首先*填充了组合框，*然后*将选定的索引设置为`-1`. 在这两个步骤之间，选定的索引是 - 短时间 - `0`。

为了纠正这种情况，您`DisplayAccounts()`只能在运行后调用您的例程`cbo.SelectedIndex = -1;`。我猜你调用`DisplayAccounts()`了组合框的 SelectedIndexChanged 事件。如果是这样，请将事件附加到其后的组合框（如果您已在 Designer 窗口中添加事件，请确保将其从*Designer.cs文件中删除）：*

```
//...
cbo = this.cboAdminLocation;
cbo.DataSource = locations;
cbo.DisplayMember = "Location";
cbo.ValueMember = "LocationID";
cbo.SelectedIndex = -1;
cbo.SelectedIndexChanged += new EventHandler(cbo_SelectedIndexChanged); 
```

# c# - C#用sql数据库提交表单

> ID：12389850
> 
> 赞同：0
> 
> 时间：2012-09-12T13:55:21.933
> 
> 标签：c#, sql

我有一个注册表单，我想提交到 SQL 2008 数据库，我认为我做对了，但它似乎不起作用。我在下面发布了代码以显示我到目前为止所拥有的。

基本上我想知道我拥有的代码是否应该工作，如果没有，有人可以告诉我如何调整我拥有的东西。

```
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    SqlConnection NutRegistration = new SqlConnection("Data Source=server; Initial Catalog=DBname;Integrated Security=false;User ID=uname;Password=password");
    NutRegistration.Open();

    SqlCommand thisCommand = NutRegistration.CreateCommand();
    thisCommand.CommandText = "INSERT INTO users (txtNickName, txtEmail, txtPassword) VALUES (nickname, email, password);";

    NutRegistration.Close();
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:59:50.760

尝试：

```
thisCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:00:48.493

什么都不会发生。您没有执行命令，只是创建它。您必须这样做才能将其实际提交到数据库。

```
thisCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T14:04:19.773

您没有执行命令，您只是在设置 CommandText。
这应该有效：

```
thisCommand.ExecuteNonQuery(); 
```

在设置 CommandText 之后关闭连接之前执行此操作。
这也将返回受影响的行数。

# android - 如何在单击按钮时从多个编辑文本中保存文本？

> ID：12389858
> 
> 赞同：-2
> 
> 时间：2012-09-12T13:55:49.153
> 
> 标签：android, eclipse, android-edittext

我有多个编辑文本框，单击“保存”按钮，它应该能够在应用程序再次打开时获取文本并检索它。

xml文件的代码如下：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="false"
                android:focusable="false"
                android:gravity="center"
                android:height="50dip"
                android:text="@string/TabletName"
                android:textColor="@color/white"
                android:textStyle="bold"
                android:width="200dip" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left"
                android:clickable="false"
                android:focusable="false"
                android:gravity="center"
                android:height="50dip"
                android:text="@string/Quantity"
                android:textColor="@color/white"
                android:textStyle="bold"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" >

                <requestFocus />
            </EditText>

            <EditText
                android:id="@+id/editText10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="160dip"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText12"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText13"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText14"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/editText15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterNameHere"
                android:inputType="text"
                android:textColor="@color/black"
                android:width="200dip" />

            <EditText
                android:id="@+id/editText16"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="@string/EnterQuantity"
                android:inputType="number"
                android:textColor="@color/black"
                android:width="120dip" />

        </TableRow>

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/Save"
            android:textColor="@color/white" />

    </TableLayout> 
```

java文件中的代码如下：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class TabletNotifier extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_screen2);              
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_screen2, menu);
        return true;
    }
} 
```

我正在使用 Eclipse IDe，而且我对 android 也很陌生，所以任何答案都将不胜感激。谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:23:43.560

首先从`EditText`和`AppPreferences`类中获取值：

```
AppPreferences appPrefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    appPrefs=new AppPreferences(this);

    EditText editMessage=(EditText)findViewById(R.id.youredittext);
    String messageString1=editMessage.getText().toString();

    //so as for other too

} 
```

AppPreferences.java**是**：

```
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.preference.PreferenceManager;

public class AppPreferences {
    private SharedPreferences appSharedPrefs;
    private Editor prefsEditor;

    public AppPreferences(Context context) {
        this.appSharedPrefs = PreferenceManager
        .getDefaultSharedPreferences(context);
        this.prefsEditor = appSharedPrefs.edit();
    }

    public String getValue(String text) {
        return appSharedPrefs.getString(text, "");
    }

    public void setValue(String key,String text) {
        prefsEditor.putString(key, text);
        prefsEditor.commit();
    }
} 
```

然后在保存按钮上：

```
appPrefs.setValue("message1",messageString1);
//so as save others too 
```

然后您可以随时检索这些值，例如：

```
appPrefs.getValue("message1")
//so as retrive other values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:01:04.010

Android 允许您使用 Bundle 存储有关 Activity 的持久信息。当 Activity 再次启动时，此 Bundle 会作为 onCreate 方法中的参数提供给您。你可以看看这个已回答的问题：

[什么是 onCreate(Bundle savedInstanceState)](https://stackoverflow.com/questions/10810418/whats-oncreatebundle-savedinstancestate)

更新：如果您想要持久存储，那么您将不得不使用 SharedPreferences 对象或 SQLite 数据库。[您可以在Android 开发者网站](http://developer.android.com/guide/topics/data/data-storage.html)上阅读更多内容。

# c# - 使用 TPL 任务更新 UI 不会立即更新 UI

> ID：12389859
> 
> 赞同：3
> 
> 时间：2012-09-12T13:55:51.883
> 
> 标签：c#, winforms, task-parallel-library

我有一个 .NET Windows 窗体，它创建了一个异步运行的任务。该任务应调用以更新其进度的 UI。它可以工作，但进度条只会随着某种延迟而更新。

```
public partial class WaitDialog : Form
{
    private readonly TaskScheduler _uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();

    private void ReportViewerWaitForm_Load(object sender, EventArgs e)
    {
        _asyncTask = Task.Factory.StartNew(Calculate(), _cancellationTokenSource.Token);   
        _asyncTask.ContinueWith(task => Close(), CancellationToken.None, TaskContinuationOptions.None, _uiScheduler);
    }

    private void Calculate()
    {
        UpdateProgressCount(0, 1000);

        for (int i = 0; i < 1000; i++)
        {
            // do some heavy work here
            UpdateProgressCount(i);
        }
    }

    private void UpdateUserInterface(Action action)
    {
        Task.Factory.StartNew(action, CancellationToken.None, TaskCreationOptions.None, _uiScheduler).Wait();
    }

    public void UpdateProgressCount(int count)
    {
        UpdateUserInterface(() => progressBar.Value = count);
    }

    public void UpdateProgressCount(int count, int total)
    {
        UpdateUserInterface(() =>
            {
                progressBar.Minimum = 0;
                progressBar.Maximum = total;
            });
        UpdateProgressCount(count);
    }

    private void WaitForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (!_asyncTask.IsCompleted)
        {
            e.Cancel = true;
        }
    }
} 
```

进度条设置正确，当表单关闭时，它的值设置为 1000（或 100%），但它不会在 UI 上以这种方式显示，它只显示大约 50% 的完成。

启动更新 UI 的任务，然后调用 Wait()，但异步任务似乎在更新 UI 之前继续运行。我认为这是因为 UI 线程本身做了某种 BeginInvoke() 来更新 UI。

最终，当异步（繁重的工作）任务完成时，UI 并未完全更新并且表单关闭。但是 UI 任务 Wait()、Application.DoEvents() 或 progressBar.Update() 有任何作用，以允许 UI 在返回繁重的工作任务之前进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:03:42.077

在 UpdateProgressCount 中，您可能希望使用进度调用表单。这是更新事物的标准方式，而不是通过创建另一个任务。

此外，我相信通过等待 UI 线程上运行的任务，您的后台线程将继续运行。但我可能对那部分不正确。无论如何，如果您使用应该解决问题的进度调用表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:32:26.453

不要为 UI 更新创建另一个任务，调用 invoke 方法来更新 WinForm 中的状态`progressBar`。

更换

```
UpdateUserInterface(() => progressBar.Value = count) 
```

至

```
if (progressBar.InvokeRequired) {
    progressBar.Invoke(() => progressBar.Value = count);
} else {
    progressBar.Value = count;
} 
```

# php - 什么可以阻止带有 PHP 变量的 CSS 加载？

> ID：12389868
> 
> 赞同：2
> 
> 时间：2012-09-12T13:56:26.207
> 
> 标签：php, android, css

在网站上：[http ://www.agricultureupdate.com/invest/new/index.php](http://www.agricultureupdate.com/invest/new/index.php)

我使用 PHP 来生成某些颜色等。

它在所有经过测试的台式笔记本电脑上都能正常工作，但它确实在运行 android 4.04 的 Galaxy Note 上加载了 css 文件（只是加载了 html）。奇怪的是它适用于我自己的运行 4.1 的银河笔记。

关于可能导致这种情况的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:21:07.503

既然你用 PHP 解析 CSS，为什么不直接把它拉到模板页面

```
<style>
<?php require_once('path to php/css file'); ?>
</style> 
```

该错误可能与文件类型和标题有关，因此应该可以。

# django - 为什么我在 Heroku 上的 Django 站点需要不同的导入路径？

> ID：12389869
> 
> 赞同：3
> 
> 时间：2012-09-12T13:56:29.373
> 
> 标签：django, heroku

我有一个本地开发的 Django 1.4 站点（OS X 10.8.1）。它工作正常。但我现在正试图在 Heroku 上进行设置，但它无法从我的应用程序中导入模块。

结构是这样的：

```
manage.py
projectname/
    __init__.py
    appnameone/
    appnametwo/
    settings/
    static/
    wsgi.py
requirements.txt 
```

在我的设置中，我使用项目名称包含我自己的应用程序，如下所示：

```
INSTALLED_APPS = (
    ...
    'projectname.appnameone',
    'projectname.appnametwo',
    ...
) 
```

当我导入一个模块时，我没有项目名称，例如：

```
from appnameone.models.model_name import ModelName 
```

这在本地工作得很好，但是当我尝试`syncdb`在 Heroku 上运行任何东西（如 ）时，我会`ImportError`从上面的行中得到一个。如果我将项目名称添加到导入语句中，它似乎可以工作，如下所示：

```
from projectname.appnameone.models.model_name import ModelName 
```

但这不适用于我的本地环境。

我想这与路径有关，但我不确定发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:59:03.917

当我认为这在我的本地环境中不起作用时：

```
from projectname.appnameone.models.model_name import ModelName 
```

我想我一定是遇到了其他问题。因为已经通过并更新了我的应用程序的所有导入以使用项目名称作为前缀，所以它现在可以在我的本地环境和 Heroku 上运行。

[这个答案](https://stackoverflow.com/a/10062871/250962)很好地解释了将您的应用程序与您的项目处于同一级别（在这种情况下导入不需要项目名称前缀）和将您的应用程序*放在*您的项目中（在这种情况下项目名称前缀是需要）。

如问题中所述，听起来我的本地环境不应该正常工作，因为我的应用程序在项目中，但我没有将它们导入。我猜我的 Python 路径在这里非常松散，并且在不应该的时候让我侥幸逃脱。

**更新：**我意识到了最终的原因。在使用 virtualenv 和 virtualenvwrapper 进行设置期间，我做了这样的事情：

```
$ add2virtualenv ~/Projects/clientname/django-projectname/projectname 
```

这将它添加到我的 PYTHONPATH 中，这使我的环境非常宽容。在 Heroku 上，情况并非如此（至少默认情况下不是这样；也许可以对其进行调整）。一旦我从`lib/python2.7/site-packages/virtualenv_path_extensions.pth`我的 virtualenv 目录中删除了那个额外的路径，我就会开始遇到与 Heroku 相同的错误。这意味着我可以更好地修复它们！

# spring - 在 notifyExpired 上使用 CacheEventListener 刷新缓存

> ID：12389871
> 
> 赞同：2
> 
> 时间：2012-09-12T13:56:36.643
> 
> 标签：spring, hibernate, ehcache

我的项目需要将 SQL DB 中的一些数据保存在缓存中以满足业务服务需求。这些数据就像可以由管理应用程序更改的系统参数。

规范告诉我，其中一些数据需要每 2 分钟刷新一次。

我使用 Spring 3 + Hibernate 3.6 + ehcache 来做到这一点。

对于 2 分钟刷新要求，我已经像这样配置了我的 ehcache.xml：

```
<cache name="xxx.yyy.zzz.domain.Parameter"
    maxEntriesLocalHeap="1000" eternal="false" timeToIdleSeconds="0"
    timeToLiveSeconds="120" statistics="true">
    <cacheEventListenerFactory class="xxx.yyy.zzz.listner.CacheListnerFactory" properties="bean=myCacheEventListner" listenFor="all"/>

    <persistence strategy="localTempSwap" />

</cache> 
```

当这个缓存过期时，我的监听器通知方法会被调用。很好。但从医生。ehcache，我读到删除块，直到通知方法返回！！！！我想使用这个通知方法来回调数据库并重新加载缓存中的数据！。

如何使用 cacheEventListener 实现此行为。

这是我的监听器代码：

```
 @Override
public void notifyElementExpired(Ehcache arg0, Element arg1) {
    log.info("CACHE EXPIRED : " + arg0.getName());
    log.info("CACHE EXPIRED ELEMENT: " + arg1);
    log.info("RELOADING CACHE");
    List<Parameter> params = servParam.getAllParameter();
    for (Parameter p : params) {
        servParam.getParameter(p.getCodeParam(), p.getCodeMarche());
    }

} 
```

这是我的junit日志的一部分：

```
<ENTER testGetParameterExpired>
<enter - get parameters - code param = PAIEMENT_FACTURE_DELAI_MIN code marche = P>
<CACHE EXPIRED : [ name = auport.commun.shared.domain.Parameter status = STATUS_ALIVE eternal = false overflowToDisk = true maxEntriesLocalHeap = 1000 maxEntriesLocalDisk = 0 memoryStoreEvictionPolicy = LRU timeToLiveSeconds = 5 timeToIdleSeconds = 0 persistence = LOCALTEMPSWAP diskExpiryThreadIntervalSeconds = 120 cacheEventListeners: auport.commun.shared.listner.MyCacheEventListner net.sf.ehcache.statistics.LiveCacheStatisticsWrapper  hitCount = 2 memoryStoreHitCount = 2 diskStoreHitCount = 0 missCountNotFound = 5 missCountExpired = 1 maxBytesLocalHeap = 0 overflowToOffHeap = false maxBytesLocalOffHeap = 0 maxBytesLocalDisk = 0 pinned = false ]>
<CACHE EXPIRED ELEMENT: [ key = sql: select parameter0_.cod_paap as cod1_0_, parameter0_.cod_mrch as cod2_0_, parameter0_.TMS_MAJ as TMS3_0_, parameter0_.NOM_ANGL_PAAP as NOM4_0_, parameter0_.nom_fran_paap as nom5_0_, parameter0_.NOM_UTLR_MAJ as NOM6_0_, parameter0_.NUM_UTLR_MAJ as NUM7_0_, parameter0_.PRN_UTLR_MAJ as PRN8_0_, parameter0_.VAL_PAAP as VAL9_0_ from TABCOMMUN.TPAAP parameter0_ where parameter0_.cod_paap=? and parameter0_.cod_mrch=?; parameters: PAIEMENT_FACTURE_DELAI_MIN, P, ; named parameters: {}, value=[5519186315907073, [Ljava.lang.Object;@1f6d2e3], version=1, hitCount=1, CreationTime = 1347457596657, LastAccessTime = 1347457596750 ]>
<RELOADING CACHE>
<enter - get all parameters>
<CACHE EXPIRED : [ name = auport.commun.shared.domain.Parameter status = STATUS_ALIVE eternal = false overflowToDisk = true maxEntriesLocalHeap = 1000 maxEntriesLocalDisk = 0 memoryStoreEvictionPolicy = LRU timeToLiveSeconds = 5 timeToIdleSeconds = 0 persistence = LOCALTEMPSWAP diskExpiryThreadIntervalSeconds = 120 cacheEventListeners: auport.commun.shared.listner.MyCacheEventListner net.sf.ehcache.statistics.LiveCacheStatisticsWrapper  hitCount = 2 memoryStoreHitCount = 2 diskStoreHitCount = 0 missCountNotFound = 6 missCountExpired = 2 maxBytesLocalHeap = 0 overflowToOffHeap = false maxBytesLocalOffHeap = 0 maxBytesLocalDisk = 0 pinned = false ]>
<CACHE EXPIRED ELEMENT: [ key = sql: select parameter0_.cod_paap as cod1_0_, parameter0_.cod_mrch as cod2_0_, parameter0_.TMS_MAJ as TMS3_0_, parameter0_.NOM_ANGL_PAAP as NOM4_0_, parameter0_.nom_fran_paap as nom5_0_, parameter0_.NOM_UTLR_MAJ as NOM6_0_, parameter0_.NUM_UTLR_MAJ as NUM7_0_, parameter0_.PRN_UTLR_MAJ as PRN8_0_, parameter0_.VAL_PAAP as VAL9_0_ from TABCOMMUN.TPAAP parameter0_; parameters: ; named parameters: {}, value=[5519186315202560, [Ljava.lang.Object;@1286b10, [Ljava.lang.Object;@8d2280, [Ljava.lang.Object;@1d4340c, [Ljava.lang.Object;@a51027, [Ljava.lang.Object;@c7833c, [Ljava.lang.Object;@790192, [Ljava.lang.Object;@5646a5, [Ljava.lang.Object;@381a9c, [Ljava.lang.Object;@15b011c], version=1, hitCount=0, CreationTime = 1347457596485, LastAccessTime = 1347457596485 ]>
<RELOADING CACHE>
<enter - get all parameters>
... 
```

如您所见，调用getParemeters触发过期事件，然后调用getAllParameter刷新缓存但是这个调用重新触发过期事件......所以刷新缓存的过程完成了两次！

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:30:30.483

您可以移动代码以将数据重新加载到缓存中到另一个方法（在另一个 bean 中），并使用 spring @Async 注释异步执行它。

这样回调将返回，ehcache 将从缓存中删除条目（希望在触发异步调用之前）。

仍然有可能在删除条目之前发生异步，在这种情况下，您可能会收到对侦听器的重复调用 - 但这种情况很少见。

# javascript - Javascript 正则表达式替换不按预期工作

> ID：12389882
> 
> 赞同：0
> 
> 时间：2012-09-12T13:57:34.693
> 
> 标签：javascript, regex

测试字符串是：

```
hello hello hello

<span class="self-reference">Tom</span> I don't know <span class="self-reference">Tom</span> I don't think. 
```

我希望成为：

```
hello hello hello

@Tom I don't know @Tom I don't think. 
```

我使用这个正则表达式：

```
comment = comment.replace(/\<span class="self-reference"\>(.*)\<\/span\>/gi,"@$1"); 
```

但它输出：

```
hello hello hello

@Tom</span> I don't know <span class="self-reference">Tom I don't think. 
```

谁能告诉我如何修改它以使其按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:00:10.487

使用非贪婪的正则表达式匹配：

```
comment = comment.replace(/\<span class="self-reference"\>(.*?)\<\/span\>/gi,"@$1"); 
```

如果没有`?`我添加，您的正则表达式 (.*) 将匹配整个字符串，直到`</span>`它在您的字符串中找到的最后一个。使用非贪婪运算符`*?`，您可以在找到匹配项后立即停止匹配。

> 惰性量化
> 
> 正则表达式中的标准量词是贪婪的，这意味着它们尽可能匹配。

（[来源](http://en.wikipedia.org/wiki/Regular_expression)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T14:02:41.180

另一种可能的解决方案：

```
comment = comment.replace(/\<span class="self-reference"\>([^<]+)\<\/span\>/gi,"@$1"); 
```

`([^<]+)`捕获所有字符，直到`<`找到

# php - 为什么我的 pregmatch() 函数返回捕获括号之外的行描述？

> ID：12389886
> 
> 赞同：-2
> 
> 时间：2012-09-12T13:57:40.803
> 
> 标签：php, regex, preg-match, explode

我正在使用这种方法：

```
$matches;
preg_match('/^days:\s(.*)$/', $line, $matches);
if (count($matches) > 1)
  return explode('; ', $matches[1]);
return array(); 
```

在具有以下行的文件上：

`days: Monday; Thursday; Friday`,

第一个结果（在示例中，`Monday`）总是带有`days:`添加的“”部分，如下所示：

```
array[0](
  myObject=>object
  (
    visitors[0]=>array //notice "visitors" is the problem.  It should be "days".
    (
      [0]=>days: Monday
      [1]=>Thursday
      [2]=>Friday
    )
  )
) 
```

我认为正则表达式应该返回括号（`()`）内的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:06:09.540

`$matches[0]`将始终包含整个匹配项（触发匹配项的完整字符串），而不仅仅是用括号捕获的内容。这是大多数（全部？）正则表达式库的标准。您捕获的表达式以 1 开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T14:20:54.007

正如 nickb 指出的那样，您的代码似乎运行得很好。也许当你手写它时，你实际上解决了生产代码中的一个问题。或者您看到的错误可能是您代码的另一部分发生的其他事情的结果。

[这是](http://viper-7.com/B83tTw)我跑步时得到的

```
$line = "days: Monday; Thursday; Friday";
preg_match('/^days:\s(.*)$/', $line, $matches);
if (count($matches) > 1)
   var_dump(explode('; ', $matches[1])); 
```

> 数组（3）{[0]=>字符串（6）“星期一”[1]=>字符串（8）“星期四”[2]=>字符串（6）“星期五”}

# configuration - 防止 AddThis 在不分享的情况下增加社交媒体数量

> ID：12389887
> 
> 赞同：1
> 
> 时间：2012-09-12T13:57:45.813
> 
> 标签：configuration, addthis

我在我的应用程序上使用[AddThis](http://www.addthis.com/)，它显示特定网页通过可用社交网络之一共享的次数。

但是，即使没有实际共享，这个计数似乎也会增加。例如，我可以单击 Twitter 图标，在我实际提交推文之前计数会增加。

我认为这可能只是一个 UI 功能，但似乎计数实际上被记录为刷新不会重置计数。

这是一个 jsFiddle 演示，它显示了每次单击图标时计数如何增加：

**[-- 看演示 --](http://jsfiddle.net/wvMLr/)**

是否有任何 AddThis 配置设置来防止此计数增加，除非页面实际共享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:14:51.293

根据我之前所做的研究，AddThis 的开发人员正在尝试实施一种更好的方法，但截至上个月仍然一无所获。这是他们的支持网站[Addthis 支持网站的回复](http://support.addthis.com/customer/portal/questions/447384-counter-updates-on-click-not-share-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T11:58:41.640

这是获得良好性能的不饱和方式。Addthis 等待关闭事件而不是 ajax 响应。是向其他用户显示真实的共享数量。您可以使用另一个插件作为 mocanvas 来获取即时真实共享，而不是在生成器中，而是在安装时 [http://share.mocanvas.com](http://share.mocanvas.com)

# jquery - 检测 html 表单的 tabindex 的结尾以触发 jQuery 事件

> ID：12389892
> 
> 赞同：3
> 
> 时间：2012-09-12T13:57:53.323
> 
> 标签：jquery, html, tabindex

我有一个 html 表格，每行中都有表单元素，可以将项目、价格、数量等添加到发票中。

在每个表格行的末尾都有一个“添加”按钮，该按钮会触发一个事件以将新的空白表单元素行添加到表格的底部（用于发票上的新项目）。

有没有办法检测表格中的最后一个表单元素失去焦点（选项卡传递它）并触发事件以添加新的空元素行？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:02:40.590

[模糊是你想要的](http://api.jquery.com/blur/)。像这样的东西：

```
$('.add-button').blur(function() {
     add_row();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:05:08.747

将模糊事件附加到最后一行，最后一个单元格。

```
$('table tr:last-child td:last-child').blur(function() {
     // add row function
}); 
```

阅读：[http ://api.jquery.com/blur/](http://api.jquery.com/blur/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:07:17.020

你想摆脱添加按钮吗？如果是这样，您应该将一个类添加到每个新行的最后一个元素（即“最后一个”）并使用模糊

```
$('.last').blur(function() { 
    //code to add new row of elements
}); 
```

# jquery - jQuery UI 多选 Next - onChange

> ID：12389895
> 
> 赞同：0
> 
> 时间：2012-09-12T13:58:06.897
> 
> 标签：jquery, jquery-ui, select, multi-select

我有 jQuery UI Multiselect Next [http://quasipartikel.at/multiselect_next](http://quasipartikel.at/multiselect_next) 我想在选择发生任何变化时触发一个事件。

此示例不起作用：

```
$('#countries').change(function() {
alert('Hi');
}); 
```

所以基本上，我如何在任何选择更改时触发事件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:06:34.787

提供一个反馈函数来处理选定的事件作为一个初始化选项。

```
$('.selector').multiselect({ selected: function(event, ui) { alert($(ui.option).val() + " has been selected"); } });

$('.selector').multiselect({ deselected: function(event, ui) { alert($(ui.option).val() + " has been deselected"); } }); 
```

绑定到 multiselectselected 类型的选定事件。

```
$('.selector').bind('multiselectselected', function(event, options) {
  ...   // ui.option is the DOMOption node of ui.sender
});

$('.selector').bind('multiselectdeselected', function(event, ui) {
  ...   // ui.option is the DOMOption node of ui.sender
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:00:27.480

尝试

```
$('#countries').mouseleave(function() {
 alert('Hi');
}); 
```

# python - Python Pandas：如何在 groupby/transform 操作中向数据框中添加一个全新的列

> ID：12389898
> 
> 赞同：35
> 
> 时间：2012-09-12T13:58:12.403
> 
> 标签：python, group-by, transform, dataframe, pandas

我想在我的数据中标记一些分位数，对于 DataFrame 的每一行，我希望一个名为“xtile”的新列中的条目保存这个值。

例如，假设我创建了一个这样的数据框：

```
import pandas, numpy as np
dfrm = pandas.DataFrame({'A':np.random.rand(100), 
                         'B':(50+np.random.randn(100)), 
                         'C':np.random.randint(low=0, high=3, size=(100,))}) 
```

假设我编写了自己的函数来计算数组中每个元素的五分位数。我对此有自己的功能，但例如只需参考 scipy.stats.mstats.mquantile。

```
import scipy.stats as st
def mark_quintiles(x, breakpoints):
    # Assume this is filled in, using st.mstats.mquantiles.
    # This returns an array the same shape as x, with an integer for which
    # breakpoint-bucket that entry of x falls into. 
```

现在，真正的问题是如何使用`transform`向数据添加新列。像这样的东西：

```
def transformXtiles(dataFrame, inputColumnName, newColumnName, breaks):
    dataFrame[newColumnName] = mark_quintiles(dataFrame[inputColumnName].values, 
                                              breaks)
    return dataFrame 
```

进而：

```
dfrm.groupby("C").transform(lambda x: transformXtiles(x, "A", "A_xtile", [0.2, 0.4, 0.6, 0.8, 1.0])) 
```

问题是上面的代码不会添加新列“A_xtile”。它只是返回我的数据框不变。如果我首先添加一个充满虚拟值的列，例如 NaN，称为“A_xtile”，那么它*会*成功覆盖该列以包含正确的五分位数标记。

但是，对于我可能想即时添加的任何内容，必须先在专栏中写下非常不方便。

请注意，一个简单的`apply`方法在这里不起作用，因为它不知道如何理解每个组可能大小不同的结果数组。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-12T18:19:35.553

你遇到了什么问题`apply`？它适用于这里的这个玩具示例，并且组长度不同：

```
In [82]: df
Out[82]: 
   X         Y
0  0 -0.631214
1  0  0.783142
2  0  0.526045
3  1 -1.750058
4  1  1.163868
5  1  1.625538
6  1  0.076105
7  2  0.183492
8  2  0.541400
9  2 -0.672809

In [83]: def func(x):
   ....:     x['NewCol'] = np.nan
   ....:     return x
   ....: 

In [84]: df.groupby('X').apply(func)
Out[84]: 
   X         Y  NewCol
0  0 -0.631214     NaN
1  0  0.783142     NaN
2  0  0.526045     NaN
3  1 -1.750058     NaN
4  1  1.163868     NaN
5  1  1.625538     NaN
6  1  0.076105     NaN
7  2  0.183492     NaN
8  2  0.541400     NaN
9  2 -0.672809     NaN 
```

# php - yii url 重写

> ID：12389903
> 
> 赞同：0
> 
> 时间：2012-09-12T13:58:29.717
> 
> 标签：php, url, yii

我正在使用 Yii，我想更改 URL 路径。此时我有一个这样的 URL：

```
controller/action/param1/value1/param2/value2 
```

我希望它像：

```
controller/value1/value2 
```

或者也可以：

```
controller/action/value1/value2 
```

我怎样才能做到这一点？我在 URLManager 设置中尝试了许多选项，但要么保持完全相同，要么出现错误提示`Undefined index: param2`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:24:19.227

检查[CUrlManager的文档](http://www.yiiframework.com/doc/api/1.1/CUrlManager/)

将以下行添加到 main.php 中的 CUrlManager 规则数组

```
'/controller_name/<param1:\w+>/<param2:\w+>' => '/controller_name/action_name', 
```

例如。

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=> false,
        'rules'=>array(
            '/controller_name/<param1:\w+>/<param2:\w+>' => '/controller_name/action_name',
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

# php - PHP move_uploaded_file 本地路径

> ID：12389904
> 
> 赞同：0
> 
> 时间：2012-09-12T13:58:32.163
> 
> 标签：php, apache, upload, alias

是否可以将本地目的地添加到方法`move_uploaded_file`？例子`C:/foo/`

我想上传文件，但将它们存储在根文件夹之外，并使用别名来访问新目的地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:02:12.253

这是定义： bool move_uploaded_file ( string $filename , string $destination )

在 $destination 中，您可以放置​​任何有效路径。确保目录安全性允许为运行 Web 服务器的用户写入内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:30:30.700

发现了问题。因为我有别名`bar`指向我的路径，所以在我添加到参数`C:/foo/`的 PHP 代码中。`bar``$destination`

如果我将参数设置`$destination`为`C:/foo/`

# maven - 有没有办法为 wro4j jshint maven 插件生成一个可靠的报告？

> ID：12389905
> 
> 赞同：2
> 
> 时间：2012-09-12T13:58:35.380
> 
> 标签：maven, jshint, wro4j

有没有办法让（优秀的）wro4j jshint 插件生成一个可靠的报告作为其执行的一部分？

我不确定这是否是一个出色的功能请求，或者是否已经有办法做到这一点。目前我能得到的唯一输出是命令行 - 这是正确的还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:24:08.370

默认情况下尚不支持此问题。有一个[未解决](http://code.google.com/p/wro4j/issues/detail?id=257)的问题将在未来的一个版本中修复。在此之前，您可以创建[JsHintMojo](https://github.com/alexo/wro4j/blob/v1.4.9/wro4j-maven-plugin/src/main/java/ro/isdc/wro/maven/plugin/JsHintMojo.java)的自定义实现并实现万无一失的报告支持。

# ruby-on-rails-3 - pjax 发出多个请求

> ID：12389907
> 
> 赞同：0
> 
> 时间：2012-09-12T13:58:40.470
> 
> 标签：ruby-on-rails-3, pjax

在 Chrome（版本 21）javascript 控制台中调用 pjax 时，我在开发日志中看到两个请求。[我尝试按照这篇文章](https://stackoverflow.com/questions/8153263/jquery-pjax-request-sending-twice)中的建议更改超时，但我仍然收到两个请求。有任何想法吗？

```
$.pjax({timeout: 4000,
      container: '[data-pjax-container]',
      url: document.location.href }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:06:18.777

所以问题是我没有渲染应用程序模板，它在 http 正文中没有返回任何内容。因此，它导致请求回退到标准 GET 的 pjax 代码。

为什么我没有渲染应用程序模板？好吧，我是个假人，在我的应用程序控制器中使用了这个方法

```
def get_layout
  request.xhr? || request.headers['X-PJAX'] ? nil : 'application'
end 
```

这里的问题是我`content_for`在我的 index.html.haml 中使用。

```
- content_for :sub_nav do
 # view code
- content_for :main do
 # view code 
```

我的 application.html.haml 模板看起来像这样......

```
.col1
  = yield :sub_nav
.col2
  = yield :main 
```

这是解决方案...

我将控制器方法重构为应用程序助手

```
 def is_pjax?
    request.xhr? || request.headers['X-PJAX'] ? true : false
  end 
```

然后我修改了应用程序视图以不呈现各种元素，如页眉、页脚、javascript、css 等

```
= render :partial => '/shared/footer' unless is_pjax? 
```

现在 .pjax 请求将呈现页面和模板（左栏、主栏等），但不是已经加载的现有元素。

希望这对其他人有帮助。

# node.js - Express 和 Node.js 模块 i18n 以及现在缺少帮助程序

> ID：12389913
> 
> 赞同：1
> 
> 时间：2012-09-12T13:59:02.707
> 
> 标签：node.js, internationalization, express

从[https://github.com/mashpie/i18n-node](https://github.com/mashpie/i18n-node)的自述文件中，他们展示了如何使用快速模板进行设置，但它使用了帮助程序：

```
// register helpers for use in templates
app.helpers({
  __i: i18n.__,
  __n: i18n.__n
}); 
```

那么在 Express 3.0 中没有帮助程序，那么如何使用模板注册 i18n 模块？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:33:48.797

助手现在重命名为本地人：

```
app.locals({
  __i: i18n.__,
  __n: i18n.__n
}); 
```

# android - 为 CheckboxPreference 设置字体

> ID：12389914
> 
> 赞同：1
> 
> 时间：2012-09-12T13:59:04.020
> 
> 标签：android

我想为`CheckBoxPreference`. 我知道我们可以为`CheckBox`使用`setTypeface`方法设置字体。但是，CheckBoxPreference 类没有字体方法。

有人可以指导我解决我的问题吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:35:46.490

尝试创建自己的子类`CheckBoxPreference`，覆盖`onBindView()`并更新其中的字体。

# android - 使用 TAG `android:switcher: + R.id.ot_pag_main + :0` 来查找片段是否安全？

> ID：12389918
> 
> 赞同：3
> 
> 时间：2012-09-12T13:59:15.947
> 
> 标签：android, android-viewpager

我还没有在 Android 文档上看到这个。使用这个自动生成的标签来引用 viewPager 中的片段是否安全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:17:18.097

我不推荐它，因为这是`PagerAdapter`实现内部的私有数据。

您最好将`FragmentPagerAdapter`和/或`FragmentStatePagerAdapter`源代码复制到您的项目中（重构到您自己的包中）。然后，您不仅不会受到命名方案中的任何更改的影响，而且您甚至可以公开用于生成这些名称的方法。

`PagerAdapter`当然，不利的一面是，除非您重复该过程，否则将来您将无法使用对这些实现所做的改进。

# windows-8 - 画布不会在 WinJS 中自动调整大小

> ID：12389919
> 
> 赞同：0
> 
> 时间：2012-09-12T13:59:30.297
> 
> 标签：windows-8, windows-runtime, winjs

我刚刚将我的游戏移植到 Win8JS。出乎意料地相当简单。但我在制作游戏时考虑了一个固定的分辨率。我已在所有画布元素上明确设置了 800 x 500 像素的分辨率，但我希望它们自动缩放到模拟器上的所有分辨率 - 我该如何实现？

这就是我的游戏现在的样子[http://i.msdn.microsoft.com/dynimg/IC571329.png](http://i.msdn.microsoft.com/dynimg/IC571329.png) :(

在同一链接[http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

它说“画布自动填充空白空间”但在我的情况下它没有可能是因为我已经预先定义了固定的高度和宽度？

我该怎么做呢？如果我删除宽度和高度，那么画布将不可见。这一切都相当新 - 将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T14:13:51.207

如果你给一个控件一个固定的大小，它就不会调整大小。如果您需要明确的布局，那么您的链接建议使用[ViewBox](http://msdn.microsoft.com/en-us/library/windows/apps/br229771.aspx)。

> 缩放单个子元素以填充可用空间而不调整其大小。此控件对容器大小的变化以及子元素大小的变化做出反应。例如，媒体查询可能会导致纵横比发生变化。

将您的画布放在一个视图框中，它应该适合您。

```
<body>
    <div data-win-control="WinJS.UI.ViewBox">
        <div class="fixedlayout">
            <p>Content goes here</p>
        </div>
    </div>
</body>

 //.css file
.fixedlayout {
    -ms-grid-columns: 1fr;
    -ms-grid-rows: 1fr;
    display: -ms-grid;
    height: 768px;
    width: 1024px;
} 
```

编辑：

我对此进行了测试并且有效：

```
<body>
    <div data-win-control="WinJS.UI.ViewBox">
        <div class="fixedlayout">
            <canvas id="canvas"/>
        </div>
    </div>
</body>

window.onload = draw;
function draw() {
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    context.fillStyle = "rgb(255, 215, 0)";
    context.fillRect(15, 15, 55, 50);
    context.fillStyle = "rgba(0, 0, 200, 0.5)";
    context.fillRect(40, 40, 45, 40);
}

.fixedlayout {
    -ms-grid-columns: 1fr;
    -ms-grid-rows: 1fr;
    display: -ms-grid;
    height: 768px;
    width: 1024px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:00:45.190

关键似乎是这个——“确保 ViewBox 控件的大小设置为 100% 的宽度和高度。” 尝试为 ViewBox div 放置一个 style="width:100%;height:100%" 。并删除画布的高度和宽度。

# html - 将 CSS 省略号与同一行上的其他元素一起使用

> ID：12389921
> 
> 赞同：1
> 
> 时间：2012-09-12T13:59:32.600
> 
> 标签：html, ellipsis, css

我正在开发一个带有需要省略的可视组件的 Web 应用程序。问题是我需要在同一行上有一些其他元素。

`[ ellipsized text | element-x | element-y ]`

我尝试使用浮点数来将所有内容放在一条线上，但这可以防止元素省略。

我想出的唯一解决方案是制作 element-y `{ position: fixed; top:0; right:0 }`，但是我必须对`margin-right: xxx`椭圆形的文本做 a ，我可以接受。

问题是，element-x 是一个来自翻译文件的外部化字符串，所以我没有一种干净的方法来获取这里的宽度。

有谁知道实现这一目标的干净方法？理想情况下，我想避免在除了 element-y 之外的任何东西上设置任何宽度，这是一个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-26T10:16:25.250

您必须`float`为第二个 div 设置为 right 并使用以下 CSS 规则使第一个 div 椭圆：

```
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis; 
```

然后将以下规则添加到第一个元素：

```
display: inline-block;
width: calc(100% - 50px); 
```

（您可以根据需要调整`calc`规则）。

这是一个有效的[JSFiddle](https://jsfiddle.net/y87qsgqu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:44:57.053

我想出了一个似乎适用于不同浏览器的解决方案：

您必须将椭圆形块元素包装在内联元素中。椭圆化的工作方式，你的椭圆化元素需要受到某些东西的约束。通常，这是一个静态宽度。但是，最大宽度或来自父级的任意约束也有效。

```
<div class="container">
   <span style="display:inline; float: right;">
       Right-aligned elements
   </span>
   <span>
      <span class="ellipsized-block-text">Long text goes here</span>
   </span>
</div> 
```

# ruby-on-rails - 未定义的方法 `send_file' for #

> ID：12389922
> 
> 赞同：2
> 
> 时间：2012-09-12T13:59:39.213
> 
> 标签：ruby-on-rails

我正在尝试创建一个链接以从文件系统下载文件。为此，我在“license_helper.rb”文件中定义了以下内容：

```
def license_download_link(license, link_text = nil)
    if link_text.blank?
      link_text = image_tag("download_icon.png", :border => 0, :width => 32, :height =>32,  :alt => 'Download License', :title => 'Download License')
    end

    licenseFileId = license.asset.serial_number
    send_file '#{licenseFileId}license.xml', :type => "application/xml", :filename => "#{licenseFileId}license.xml"
    #send_file ' "#{licenseFileId}license.xml" ', :disposition => 'inline'
    #send_file("#{licenseFileId}license.xml", :type => :xml)
    #link_to link_text, '#{"C:\\Entitlement\\trunk\\entitlement_site\\entitlement\\25license.xml"}'
end 
```

我的“视图”只是调用这个助手类：

```
<td><%= license_download_link(license, ' ') %></td> 
```

当我尝试查看该页面时，我收到以下错误消息：

```
undefined method `send_file' for #<ActionView::Base:0x5fb3650> 
```

如您所见，我尝试了很多方法来调用“send_file”，但总是得到相同的错误消息。任何帮助将不胜感激，感谢您的时间，问候，--- AJ

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T14:07:46.643

您需要`send_file`从控制器操作而不是从您的视图中调用。控制器动作被调用以响应用户点击它的链接。

在视图中，您只需要一个指向控制器操作的链接。

* * *

细节将取决于您的确切应用，但这里是零件如何组合在一起的粗略概述

生成控制器：

```
class LicenceController < ApplicationController
  def download
    # look up the licence and then use send_file
  end
end 
```

然后，您可以编辑`config/routes.rb`为许可证下载创建一个友好的 URL，例如

```
match 'licences/:id/download' => 'licence#download', :as => 'licence_download' 
```

这意味着表单的 URL`licences/xyz/download`将调用您的`download`控制器方法，并且`licence_download_url`会自动为您创建一个辅助方法。

然后在你看来你可以做

```
<%= link_to 'Download your licence', licence_download_url(licence) %> 
```

如果您想创建一个帮助方法来生成带有下载图标的链接，您也可以这样做。

如果您是 Rails 的新手，并且正在为如何将应用程序的各个部分组合在一起而苦苦挣扎，那么[使用 Rails 进行敏捷 Web 开发](http://pragprog.com/book/rails4/agile-web-development-with-rails)将是一本好书。

# ios - 是否可以在 Jenkins 中抑制 clang 警告？

> ID：12389930
> 
> 赞同：0
> 
> 时间：2012-09-12T13:59:55.850
> 
> 标签：ios, jenkins, warnings, clang

我有一个使用许多 3rd 方库的 iOS 项目——当我在 Xcode 和 Jenkins 中构建项目时，这些会导致大量警告，我已经检查过并且很高兴忽略这些警告。我查看并在每个类上设置了以下编译标志，但无济于事：

`-w -Xanalyzer -analyzer-disable-checker`

有什么想法可以在每个班级的基础上抑制这些警告吗？我并不特别担心 xcode，但在 Jenkins 中抑制它们是关键。

我正在使用 Xcode 4.4 和 LLVM 编译器

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:12:42.063

要从日志中**隐藏**这些消息，您需要阻止它们被发送到 STDOUT
（您必须从您的构建脚本中管理它）。

要**忽略**这些消息，没有什么可做的 -
我认为这些消息不会导致您的构建失败，
因为 Jenkins 默认忽略日志的内容，
并通过返回码确定构建的
结果在该 Jenkins 作业中执行的最后一个命令。

# java - 在具有自动身份验证的浏览器中从应用程序 HTTPS 页面打开

> ID：12389934
> 
> 赞同：1
> 
> 时间：2012-09-12T14:00:07.660
> 
> 标签：java, android, https, webkit

作为互联网 html 表单，运行 POST 到[https://anysite.net/do.aspx](https://anysite.net/do.aspx) ?.... (httpS)

表单包括字段：登录名、密码、域等。

我知道目标页面、登录值、密码、域等。

我需要在 Android 应用程序中自动完成此页面并在默认浏览器中转到新页面。

在分析这一点时，我提出了四个问题：

1.  如何在带有“填写”字段的默认浏览器页面（webkit）中以编程方式打开源页面？
2.  如何在默认浏览器中使用“已接受”字段以编程方式打开新页面（html-form 的目标）？尝试HttpsURLConnection、SSLContext等都失败了，浏览器表现得好像没有值域login、password、domain……在哪看？
3.  如何做同样的事情，但没有在浏览器中打开页面并在文件/字符串中记录源页面？
4.  将带有 html 代码的字符串作为新页面，将其“推送”到默认浏览器，并安装会话 cookie 等。 SSL (TLS) 变量？

我很乐意参考该主题的工作示例！

# deployment - 由于 Classloader 加载了错误的库，导致 ClassNotFoundExceptoin 被抛出

> ID：12389936
> 
> 赞同：0
> 
> 时间：2012-09-12T14:00:10.840
> 
> 标签：deployment, migration, classloader, classnotfoundexception, websphere-8

我在以下课程中收到 ClassNotFoundException：

> org.apache.commons.pool.impl.CursorableLinkedList$Cursor。

我查看了打包到 EAR 中的 Web 应用程序，并注意到上面的类存在 2 个库（CursorableLinkedList）。

JAR 文件是：

1.) com.ibm.ws.jpa.jar
2.) commons-pool-1.4.jar

项目特定的 JAR 文件（即 commons-pool-1.4.jar）打包在**lib**目录下的 WAR 文件中。

## 环境

EAR 正在部署到 Websphere Applicatoin Server 8。我使用的 IDE 是 Rational Application Developer 8。

我已将应用程序部署设置如下：

**应用程序**：

我的应用程序.EAR

*   类加载器模式：Parent_First
*   WAR 类加载器策略：模块
*   起始重量：10
*   自动启动：是

我的应用程序.WAR

*   类加载器模式：PARENT_FIRST
*   起始重量：10000

使用上述设置，我有时会收到 ClassNotFoundException，有时不会。我不想再出现这个错误，因为我相信由于不正确的类加载，以后可能会出现其他错误。谁能帮助我设置正确的部署设置，以便首先加载特定于项目的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:30:08.603

这里发生的情况是，由于您使用的是 PARENT_FIRST，当 WebSphere 正在寻找一个包含 com.ibm.ws.jpa.jar 和 commons-pool-1.4.jar 的类时，它将从 com 加载它。 ibm.ws.jpa.jar，我猜有版本不匹配之类的东西。

我的猜测是一些类是从 com.ibm.ws.jpa.jar 加载的，而一些（不在 om.ibm.ws.jpa.jar 中）是从 commons-pool-1.4.jar 加载的，然后你开始问题。

如果您希望首先加载您的 jar，您需要指定您的 WAR 模块以使用 PARENT_LAST，这样您可以确保类将从您的 jar 而不是 WebSphere 的 jar 加载

# javascript - 参考错误：未定义

> ID：12389937
> 
> 赞同：0
> 
> 时间：2012-09-12T14:00:16.030
> 
> 标签：javascript, jquery, defined

所以我有这个功能应该对图像进行一些更改（对于我正在制作的投资组合）并且有一个更改图像的按钮，还有一个运行的计时器，它每六秒更改一次图像，但是，尽管按钮 100% 有效，但计时器却没有，我的 firefox 控制台告诉我：ReferenceError: nextone is not defined 但它是... 可能是什么原因造成的？

我的脚本：

```
 function nextone() {
$("#portfolio1").fadeOut(500, function() {
    nextinline += 1;
    if(nextinline > jpgss) { nextinline = 1; }      
    $("#portfolio1").attr("src","images/portfolio/" + nextinline + ".jpg")
    $("#hyperlink").attr("href","portfolio.php?e=" + nextinline + "")
    $("#portfolio1").fadeIn(500);
    });
}
var timerr = setInterval("nextone()",6000); // Error Given on this line 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:25:02.663

尝试做：

```
var timerr = setInterval(nextone,6000); 
```

或者

```
setInterval(function (){ 
  nextone() }, 6000); 
```

# c - 访问指针数组中的元素

> ID：12389943
> 
> 赞同：3
> 
> 时间：2012-09-12T14:00:51.393
> 
> 标签：c, arrays, pointers

我正在尝试使用 gcc 编译器执行以下 C 程序。

```
#include <stdio.h>

int main()
{   
    int *a[] = {1,2,3,4,5,6};

    printf("\narr0=%d\n", *a);
    printf("arr1=%d\n", *(a+1));
    printf("arr2=%d\n", *a+2);
    printf("arr3=%d\n", *a+3);
    printf("arr4=%d\n", *a+4);

    return 0;
}

Output:-
arr0=1
arr1=2
arr2=9
arr3=13
arr4=17 
```

当我跳过 *a+2、*a+3、*a+4 的括号时，我无法理解发生了什么。对于 *a+2 它操作为：

```
= *a+2
= *a+(4*2)           4 ->Size of int
= 1+(8)
So, *a+2 = 9 
```

对其他人也是如此。

但我期待输出如下。（？）

```
arr0=1
arr1=2
arr2=3
arr3=4
arr4=5 
```

我知道，我声明指针数组的方式不好。

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T14:02:40.523

您正在声明一堆指向无效地址的指针，因为小整数通常*不是*有效的整数指针。顺便说一句，您应该收到编译器警告；*在此处发布问题之前阅读*并修复它们是个好主意。或者至少提到你确实收到了警告。

一旦您取消引用其中任何一个，未定义的行为就会发生。

最好你永远不要这样做，你所做的只是索引到数组本身，并使用错误的格式说明符打印指针（你应该使用`%p`，而不是`%d`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T15:01:34.157

一元`*`的优先级高于二元`+`，因此`*(a + i)`和`*a + i`的解释不同。

`*(a + i)`相当于`a[i]`; 您正在检索 的`i`'th*元素*，`a`因此`*(a + 2)`将与`a[2]`which相同`3`。

`*a + i`相当于`a[0] + i`; 因为`a[0]`是 type `int *`，结果是*'th 指向*after的指针`a[0] + i`的值。如果is 4 并且equals ，则will be ，will be等。 *`i``int`*`a[0]``sizeof (int *)``a[0]``1``*a + 1``5``*a + 2``9`

使用`%p`转换说明符打印指针值：

```
printf("*a + 2 = %p\n", *a + 2); 
```

如果要对数组进行索引，请使用下标表示法 ( `a[i]`)。使用指针表示法令人困惑且容易出错（正如您所发现的）。

# jsp - 如果我没有手动创建会话对象，如何在我的 jsp 页面中自动创建会话？

> ID：12389947
> 
> 赞同：3
> 
> 时间：2012-09-12T14:01:03.710
> 
> 标签：jsp, session, servlets

我是 jsp 和 servlet 的初学者。我正在学习其中的会话处理。

我做了一个简单的程序，它有 3 个 jsp 页面，其中一个 jsp 页面具有到 jsp 第 2 页的超链接。jsp 第 2 页检查是否存在任何现有会话，如果是，则它使用调度程序将控制分派到 jsp 第 3 页。但如果会话对象为空，那么它会创建新会话并为其设置属性，然后使用调度程序将控制调度到 jsp 页面 3。

以下是所有 3 个 jsp 页面的代码；

test1.jsp（jsp页面1的代码）

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<a href="test2.jsp"> start here</a>

</body>
</html> 
```

test2.jsp（jsp页面2的代码）

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
HttpSession ses=request.getSession(false);

if(ses==null){
    System.out.println("Session is null creating new session ");
%>
    Session is null creating new session.
<%
    //Usersession objusersession=new Usersession();
    ses=request.getSession(false);
    request.setAttribute("a", "This");
    ses.setAttribute("name", "sandip"); 
    System.out.println("Session created and attributes are set now dispatching");
    %>
    Session created and attributes are set now dispatching
<%
    response.sendRedirect("test3.jsp");
    //dispatch.forward(request, response);
}else{
    System.out.println("Session is old then dispatching");
    %>
    Session is old then dispatching
<%
    response.sendRedirect("test3.jsp");
    //RequestDispatcher dispatch=request.getRequestDispatcher("test3.jsp");
    //dispatch.forward(request, response);
}
%>
<a href="test.jsp"> Click here</a>
</body>
</html> 
```

test3.jsp（jsp页面3的代码）

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
HttpSession ses=request.getSession();
if(!session.isNew()){
    //Usersession objusersession=new Usersession();
    //ses.setAttribute("name", "sandip");
    //request.getAttribute("a");
    //System.out.println(request.getAttribute("a"));
    System.out.println(ses.getAttribute("name"));
    %>
    printed the session attribute value on console.
<%
}else{
    response.sendRedirect("test1.jsp");
}   
%>
</body>
</html> 
```

在上面的代码中，当我们直接调用序列时如下

1) 调用 test1.jsp，其中包含指向 test2.jsp 的超链接 2) 当我们点击超链接时，它会调用 test2.jsp。在 test2.jsp 文件 3 中，它检查预先存在的会话。如果找到它，那么它应该直接调用 test3.jsp，但如果 preexixting 会话不存在，那么它应该创建新会话并为其设置一个属性并调用 test3.jsp，它会在控制台上打印此属性值。

在我的情况下，当我第一次调用 test1.jsp 并单击超链接时，它会调用 test2.jsp 并发现该会话已经存在并直接调用 test3.jsp。但在实际情况下，会话既不会在 test1.jsp 上也不会在 test2.jsp 上启动，除非它进入 test2.jsp 中的 if 块。那么我的查询是如何在我的应用程序中自动创建会话？

我敢肯定，要么我做错了编码，要么我错误地理解了这个概念。

我还用 servlet 替换了 test2.jsp 页面，该 servlet 执行与 test2.jsp 页面相同的任务，但我仍然得到相同的结果。

我想请教专家，请告诉我到底是怎么回事。谢谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T14:15:17.313

除非你使用指令

```
<%@ page session="false" %> 
```

在 JSP 中，只要您点击该 JSP，就会创建一个会话（除非它显然已经存在）。

我不知道你试图达到什么目标，但 99% 的情况下，使用默认值（即，只要你点击 JSP 就创建一个会话）是一个可以接受的解决方案。除非您有充分的理由不希望创建会话，否则您不必在意。

# javascript - Twitter Bootstrap Typeahead - 标识和标签

> ID：12389948
> 
> 赞同：46
> 
> 时间：2012-09-12T14:01:09.413
> 
> 标签：javascript, jquery, twitter-bootstrap, autocomplete, typeahead.js

我正在使用 Bootstrap 2.1.1 和 jQuery 1.8.1 并尝试使用 Typeahead 的功能。

我尝试显示**标签**并使用标准的**id**`<select />`

这是我的预输入初始化：

```
$(':input.autocomplete').typeahead({
    source: function (query, process) {
        $('#autocompleteForm .query').val(query);
        return $.get(
            $('#autocompleteForm').attr('action')
          , $('#autocompleteForm').serialize()
          , function (data) {
              return process(data);
          }
        );
    }
}); 
```

这是我要发送的 JSON 类型

```
[{"id":1,"label":"machin"},{"id":2,"label":"truc"}] 
```

如何告诉`process()`我显示我的标签并将所选 ID 存储在另一个隐藏字段中？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-07T22:13:45.773

这里有一个很棒的教程来解释如何做到这一点： http: [//tatiyants.com/how-to-use-json-objects-with-twitter-bootstrap-typeahead/](http://tatiyants.com/how-to-use-json-objects-with-twitter-bootstrap-typeahead/)（如果没有，请阅读我对该页面的评论尚未反映在帖子的主要部分）。

根据该教程和您提供的 JSON，您可以执行以下操作：

```
$(':input.autocomplete').typeahead({
    source: function(query, process) {
        objects = [];
        map = {};
        var data = [{"id":1,"label":"machin"},{"id":2,"label":"truc"}] // Or get your JSON dynamically and load it into this variable
        $.each(data, function(i, object) {
            map[object.label] = object;
            objects.push(object.label);
        });
        process(objects);
    },
    updater: function(item) {
        $('hiddenInputElement').val(map[item].id);
        return item;
    }
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-14T10:00:10.723

从 Twitter Typeahead ( [https://github.com/twitter/typeahead.js](https://github.com/twitter/typeahead.js) ) 的 0.10.1 版本开始，Id / Label 原生支持：

```
 $('input[name=address]').typeahead({
        hint: false
    }, {
        source: function (query, cb) {
            $.ajax({
                url: '/api/addresses?q=' + encodeURIComponent(query),
                dataType: 'json',
                cache: false,
                type: 'GET',
                success: function (response, textStatus, jqXHR) {
                    cb(response.data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                }
            });
        },
        name: 'addresses',
        displayKey: 'text'
    }).on('typeahead:selected', function (e, suggestion, name) {
        window.location.href = '/' + suggestion.id;
    }); 
```

如果是上面的示例，我将一个对象数组传递给源回调 (cb)。通过指定 displayKey: 'text'，我告诉库使用 'text' 属性进行自动建议。当调用 'typeahead:select' 回调时，传入的第二个参数（建议）包含被选择的对象。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-21T23:48:36.687

澄清我在评论中所说的话。如果您想在同一页面上输入多个类型，您需要在一个函数中定义每个类型并为它们创建一个单独的映射变量。

```
function initFromField() {
    var map;
    $('#from:input.autocomplete').typeahead({
        source: function(query, process) {
            map = {};
            var data = [{"id":1,"label":"machin"},{"id":2,"label":"truc"}] // Or get your JSON dynamically and load it into this variable
            objects = constructMap(data, map);
            process(objects);
        },
        updater: function(item) {
            $('#hidden-from-input').val(map[item].id);
            return item;
        }
    });
}

function initToField() {
    var map;
    $('#to:input.autocomplete').typeahead({
        source: function(query, process) {
            objects = [];
            map = {};
            var data = [{"id":1,"label":"machin"},{"id":2,"label":"truc"}] // Or get your JSON dynamically and load it into this variable
            objects = constructMap(data, map);
            process(objects);
        },
        updater: function(item) {
            $('#hidden-to-input').val(map[item].id);
            return item;
        }
    });
}

function constructMap(data, map) {
    var objects = [];
    $.each(data, function(i, object) {
        map[object.label] = object;
        objects.push(object.label);
    });
    return objects;
}

$(function initFields() {
    initFromField();
    initToField();
}); 
```

请注意我如何在两个字段初始化函数中限定 map 变量的范围。这很重要，它确保两个输入字段不使用相同的映射变量。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-26T03:34:21.963

我自己一直在努力解决这个问题，这是我想出的解决方案，用于以下类型的数据：

```
[{'id':an_id, 'name':a_name}] 
```

曾是：

```
$("#memberSearch").typeahead({
            source: function (query, process) {
                var $this = this //get a reference to the typeahead object
                return $.get('/getSwimmerListJSON',function(data){
                    var options = [];
                    $this["map"] = {}; //replace any existing map attr with an empty object
                    $.each(data,function (i,val){
                        options.push(val.name);
                        $this.map[val.name] = val.id; //keep reference from name -> id
                    });
                    return process(options);
                });
            },
            updater: function (item) {
                console.log(this.map[item],item); //access it here

            }

        }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-02T21:43:58.217

这是一个封装的解决方案。此解决方案允许您在同一页面上有多个预输入。

这是[#13279176](https://stackoverflow.com/questions/12389948/twitter-bootstrap-typeahead-id-label/13279176#13279176) Gerbus 答案的修改版本。

```
$('.make-me-typeahead').typeahead({
    source: function (query) {
        var self = this;
        self.map = {};
        var items = [];

        var data = [
            {"id": 1, "label": "machin"},
            {"id": 2, "label": "truc"}
        ];

        $.each(data, function (i, item) {
            self.map[item.label] = item;
            items.push(item.label)
        });

        return items;
    },

    updater: function (item) {
        var selectedItem = this.map[item];
        this.$element.data('selected', selectedItem);
        return item;
    }
}); 
```

现在，当您需要获取当前所选项目的密钥时，您只需要做`$('.make-me-typeahead').data('selected')`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-17T17:30:08.790

选择的答案有点骇人听闻。我一直在寻找同样的东西，这种方法效果很好：

[https://github.com/twbs/bootstrap/pull/3682](https://github.com/twbs/bootstrap/pull/3682)

它保留两个数组，一个用于预先输入显示的名称，另一个用于从中提取名称的对象。When one of the options is selected, it uses the name to find the object from whence it came.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-25T08:18:52.073

我在其中一些解决方案中看到的问题是，`source`在输入框的每个 keyup 事件上都会重复调用该函数。这意味着，数组正在构建并在每个 keyup 事件上循环。

这不是必需的。`source`使用闭包，您可以只处理一次数据，并在函数内维护对它的引用。此外，以下解决方案解决了@Gerbus 解决方案的全局命名空间问题，并且还允许您在用户选择某些内容（例如，从列表中删除该项目）后使用数据数组。

```
 // Setup the auto-complete box of users
  var setupUserAcUi = function(data) {
      var objects = [];
      var map = {};
      $.each(data, function(i, object) {
          map[object.name] = object;
          objects.push(object.name);
      });

      // The declaration of the source and updater functions, and the fact they
      // are referencing variables outside their scope, creates a closure
      $("#splitter-findusers").typeahead({
        source: function(query, process) {
            process(objects);
        },
        updater: function(item) {
            var mapItem = map[item];
            objects.splice( $.inArray(item, objects), 1 ); // Remove from list
            // Perform any other actions
        }
      });
  };

  // `data` can be an array that you define,
  // or you could pass `setupUserAcUi` as the callback to a jQuery.ajax() call
  // (which is actually how I am using it) which returns an array
  setupUserAcUi(data); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-24T11:22:03.407

只是实现 Pierref 功能的另一种方式。

```
var separator = "####";
$("'.autocomplete'").typeahead({
    minLength: 3,
    source: function (query, process) {
        var config = {
            type: 'POST',
            url: 'Requests/AJAX.PHP', //Change it
            cache: 'false',
            data: {
                query: query
            },
            dataType: 'json'
        };

        config.beforeSend = function () {
            //TODO : loading gif
        };

        config.error = function (json) {
            if (json.error) {
                alert(json.error);
            }
        };

        config.success = function (json) {
            if (json.error) {
                alert(json.error);
            }
            var data = [];
            for (var i = 0; i < json.data.length; i++) {
                data.push(json.data[i].id + separator + json.data[i].name);
            }

            process(data);
        };

        $.ajax(config);
    },
    highlighter: function (item) {
        var parts = item.split(separator);
        parts.shift();
        return parts.join(separator);
    },
    updater: function (item) {
        var parts = item.split(separator);
        $('.autocomplete').val(parts.shift());
        return parts.join(separador);
    }
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-05T12:15:20.277

所选答案不处理非唯一标签（例如人名）。我正在使用以下保持默认荧光笔格式的内容：

```
 var callback = function(id) {
                console.log(id);
            };

            $('.typeahead',this.el).typeahead({
                source: function (query, process) {

                    var sourceData = [
                        {id:"abc",label:"Option 1"},
                        {id:"hfv",label:"Option 2"},
                        {id:"jkf",label:"Option 3"},
                        {id:"ds",label:"Option 4"},
                        {id:"dsfd",label:"Option 5"},
                    ];

                    var concatSourceData = _.map(sourceData,function(item){
                        return item.id + "|" + item.label;
                    });

                    process(concatSourceData);
                },

                matcher : function(item) {
                    return this.__proto__.matcher.call(this,item.split("|")[1]);
                },

                highlighter: function(item) {
                    return this.__proto__.highlighter.call(this,item.split("|")[1]);
                },

                updater: function(item) {
                    var itemArray = item.split("|");
                    callback(itemArray[0]);
                    return this.__proto__.updater.call(this,itemArray[1]);
                }
            }); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-01T19:54:18.503

我制作了一个 Angular 2 指令*typeahead-angular2*，它完全符合您的要求，并且还处理了非唯一标签的情况。您可以使用预输入部分。

> 该指令处理具有多个属性的复杂对象并处理标签不唯一的情况。它基本上接收 4 个参数：
> 
> *   `@Input() name;`//预先输入的名称
> *   `@Input() objectsDataSet;`// 对象的数据集，它可以是任何类型的对象
> *   `@Input() handleFunction;`// 选择对象时调用的回调函数，您可以将对象或您想要的任何内容传递给此函数。
> *   `@Input() labelAtt;`// 标签属性（`object[labelAtt]`显示给用户，必须是字符串）。
> 
> 例子 ：
> 
> ```
> <input type="text" class="form-control" placeholder="Name..." typeaheadautocomplete [objectsDataSet]="clientList" [labelAtt]="'Firstname'" [name]="'clients'" [handleFunction]="logClient"> 
> ```
> 
> 如您所见： `clientList`是“客户端”对象的数组，假设`{"Fistname":"Billel","Lastname":"Guerfa",....}`我们使用 Firstname 属性作为自动完成列表。`logClient`这里接收一个客户端对象并显示它。
> 
> # 依赖项：
> 
> 只需在 index.html 级别声明 typeahead 脚本。
> 
> *   提前输入：[https ://twitter.github.io/typeahead.js/](https://twitter.github.io/typeahead.js/)

见：[https ://github.com/BillelGuerfa/typeahead-angular2/](https://github.com/BillelGuerfa/typeahead-angular2/)

# iphone - 如何在雪豹mac中将文件夹拖放到终端窗口中

> ID：12389949
> 
> 赞同：0
> 
> 时间：2012-09-12T14:01:14.530
> 
> 标签：iphone, ios, xcode4.2

我正在尝试在 Mac OS X 10.6.8 中安装 Phonegap 2.0。我正在遵循此链接中的步骤：

```
 "http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts" 
```

这里提到的文档将“bin”文件夹拖放到“Doc​​k”中的“Terminal Window”上。如果我们完成了这个终端窗口，在屏幕短下方这样打开。

![在此处输入图像描述](../Images/6c28843f4124b75197c7e8a9da4523d3.png)

我曾尝试这样做，例如将 bin 文件夹拖放到 Dock 中的终端窗口。但是，这并没有发生。当我尝试将 bin 文件夹拖放到终端应用程序时，它没有打开。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:09:32.123

将文件夹拖到 Dock 中的终端图标上的功能需要 MacOS 10.7 或更高版本。

然而，这只是一个捷径。您可以通过以下方式完成相同的操作：

1.  打开一个新的终端窗口。
2.  键入`cd`后跟一个空格 - 不要按回车！
3.  将文件夹拖到终端窗口中
4.  按回车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:07:25.117

在您看到文本的打开的终端窗口中将其放入，这会将拖动的文件/文件夹的路径添加到光标位置的右侧。

# c++ - 读取二进制文件并正确使用流迭代器

> ID：12389951
> 
> 赞同：0
> 
> 时间：2012-09-12T14:01:25.137
> 
> 标签：c++, stl, compiler-errors, iterator, iostream

我正在尝试使用这种迭代器，但以下代码出现错误：

```
void linearMatrix::Write_File_Matrix(const char *Path)
{
    ofstream FILE(Path, std::ios::out | std::ofstream::binary);
    FILE.write(reinterpret_cast<const char *>(&myWidth), sizeof(float));
    FILE.write(reinterpret_cast<const char *>(&myHeight), sizeof(float));
    ostreambuf_iterator<float> out_it (FILE);
    copy(myVector.begin(), myVector.end(), out_it);
}

void linearMatrix::Read_File_Matrix(const char *Path)
{
    ifstream FILE(Path, std::ios::in | std::ifstream::binary);

    if(!FILE)
    {
        cerr << "Cannot open the file" << endl;
        exit(1);
    }
    FILE.read(reinterpret_cast<const char *>(&myWidth), sizeof(myWidth));
    FILE.read(reinterpret_cast<const char *>(&myHeight), sizeof(myHeight));
    istreambuf_iterator<float> iter(FILE);
    copy(iter.begin(), iter.end(), std::back_inserter(myVector));
} 
```

问题是：

1-`ostreambuf_iterator<float> out_it (FILE);`

> 错误：从 'void*' 到 'std::ostreambuf_iterator::streambuf_type* {aka std::basic_streambuf >*}' [-fpermissive] 的无效转换

2-`FILE.read(reinterpret_cast<const char *>(&myWidth), sizeof(myWidth));`

> 错误：从 'const char*' 到 'std::basic_istream::char_type* {aka char*}' 的无效转换 [-fpermissive]

3-`FILE.read(reinterpret_cast<const char *>(&myHeight), sizeof(myHeight));`

> 错误：从 'const char*' 到 'std::basic_istream::char_type* {aka char*}' 的无效转换 [-fpermissive]

4-`std::ifstream FILE(Path, std::ios::in | std::ifstream::binary);`

> 错误：从 'void*' 到 'std::ostreambuf_iterator::streambuf_type* {aka std::basic_streambuf >*}' [-fpermissive] 的无效转换

5-复制（iter.begin（），iter.end（），std::back_inserter（myVector））；

> 错误：“class std::istreambuf_iterator”没有名为“begin”的成员</p>
> 
> 错误：“类 std::istreambuf_iterator”没有名为“end”的成员</p>

我究竟做错了什么？我正在使用 CUDA 的 nsight eclipse，但使用 g++ 编译 C++ 项目。我指的是：[正确读取和写入 std::vector 到文件中](https://stackoverflow.com/questions/12372531/reading-and-writing-a-stdvector-into-a-file-correctly)

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <fstream>
#include <vector>

using namespace std;

void Write_File_Matrix(const char *Path)
{
    float myWidth = 0;
    float myHeight = 0;
    vector<float> v;
    v[0] = 1;
    v[1] = 2;
    v[2] = 3;
    ofstream outFILE(Path, ios::out | ofstream::binary);
    outFILE.write(reinterpret_cast<const char *>(&myWidth), sizeof(float));
    outFILE.write(reinterpret_cast<const char *>(&myHeight), sizeof(float));
    ostreambuf_iterator<float> out_it (outFILE);
    copy(V.begin(), V.end(), out_it);
}

void Read_File_Matrix(const char *Path)
{
    float myWidth = 0;
    float myHeight = 0;
    vector<float> v;

    ifstream inFILE(Path, ios::in | ifstream::binary);

    if(!inFILE)
    {
        cerr << "Cannot open the file" << endl;
        exit(1);
    }
    inFILE.read(reinterpret_cast<const char *>(&myWidth), sizeof(myWidth));
    inFILE.read(reinterpret_cast<const char *>(&myHeight), sizeof(myHeight));
    istreambuf_iterator<float> iter(inFILE);
    copy(iter.begin(), iter.end(), std::back_inserter(myVector));
}

int main() {

    Write_File_Matrix("M.dat");
    Read_File_Matrix("R.dat");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T14:17:50.620

编辑：删除了对 1、4 的错误答案。

Re: 2, 3\. 你不能读成`const char*`; 它是**const**。改为a `char*`。这就是错误消息所说的。

Re: 5\. 是的，迭代器没有`begin()`和`end()`成员函数。您已经有了一个指向文件开头的迭代器（一旦解决了前面的问题）。它的名字是`iter`。现在你需要一个文件结束迭代器，正确的调用是`std::copy(iter, end_iter, std::back_inserter(myVector));`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T14:27:40.207

> 1- ostreambuf_iterator out_it (FILE);
> 
> 错误：从 'void*' 到 'std::ostreambuf_iterator::streambuf_type* {aka std::basic_streambuf >*}' [-fpermissive] 的无效转换

`std::ostreambuf_iterator`将流的字符类型作为模板参数，而不是您要转换为的类型。尝试：

```
std::ostreambuf_iterator<char> out_it(FILE); 
```

#4 同上。

* * *

**编辑**：让我们解决你的大问题而不是你的小问题：

不要打扰迭代器，只需一次将矢量数据全部写出来：

```
void Write_File_Matrix(const char *Path)
{
    float myWidth = 0;
    float myHeight = 0;
    vector<float> v;
    v[0] = 1;
    v[1] = 2;
    v[2] = 3;
    ofstream outFILE(Path, ios::out | ofstream::binary);
    outFILE.write(reinterpret_cast<const char *>(&myWidth), sizeof(float));
    outFILE.write(reinterpret_cast<const char *>(&myHeight), sizeof(float));
    outFile.write(reinterpret_cast<const char *>(&v[0]), v.size()*sizeof(float));
} 
```

然而，阅读仍然需要一次一件。

```
void Read_File_Matrix(const char *Path)
{
    float myWidth = 0;
    float myHeight = 0;
    vector<float> v;

    ifstream inFILE(Path, ios::in | ifstream::binary);

    if(!inFILE)
    {
        cerr << "Cannot open the file" << endl;
        exit(1);
    }
    inFILE.read(reinterpret_cast<char *>(&myWidth), sizeof(myWidth));
    inFILE.read(reinterpret_cast<char *>(&myHeight), sizeof(myHeight));
    float f;
    while( inFILE.read(reinterpret_cast<char *>(&f), sizeof(f)))
      v.push_back(f);
} 
```

# java - 使用服务器 IP 地址连接到 mysql

> ID：12389953
> 
> 赞同：0
> 
> 时间：2012-09-12T14:01:38.123
> 
> 标签：java, mysql, connection

```
private DBHandler(String ServerIP, String userName, String password)
{
    DB_USERNAME = userName;
    DB_PASSWORD = password;

    DB_CONNECTION_URL = "jdbc:mysql://"+ServerIP+"/Test";
    connection = createConnetcion(DB_DRIVER, DB_CONNECTION_URL, DB_USERNAME, DB_PASSWORD);
    System.out.println("Connection created");

} 
```

执行此代码时发生 java sql 异常。“不允许主机 'WS1A101.ushustech.com' 连接到此 MySQL 服务器”。对我的代码有任何投诉吗？这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T14:02:51.227

让您的 DBA 检查是否允许来自客户端计算机的连接连接到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:03:41.940

代码没有问题，请您的 DBA 授予您的计算机连接到该数据库的权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T14:05:01.133

除非您的 mysql 帐户创建为`username@name_of_machine_you_connect_from`or`username@ip_of_machine_you_connect_from`或使用通配符`username@%`，否则您将无法连接。如果它使用主机名版本，请确保有一个反向 DNS 映射，以便 mysql 可以将它看到的 IP 地址映射回用户表中列出的主机名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:11:23.407

您需要在 MySQL 中为您的主机设置权限。在您的情况下，它应该类似于

```
GRANT ALL PRIVILEGES on Test.* to 'user'@'WS1A101.ushustech.com' identified by 'password';
FLUSH PRIVILEGES; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T14:06:53.317

放`DB_CONNECTION_URL = "jdbc:mysql://ws1a101.ushustech.com/Test";`

而不是 DB_CONNECTION_URL = "jdbc:mysql://"+ServerIP+"/Test";

# bash - tr -cd '[[:digit:]]' 只提供一位数字

> ID：12389964
> 
> 赞同：0
> 
> 时间：2012-09-12T14:02:37.150
> 
> 标签：bash, tr

此函数遍历destinationDirectory 中的文件夹名称，以查找文件名末尾的最高数值，增加该值，并将该值附加到folderNameWithoutNumber 的末尾。或者我认为会的。bash函数：

```
$backupFolderNumber=0
$1=$sourceDirectory
$2=$destinationDirectory
$3=$folderNameWithoutNumber
# The values when the function are called

backupDirectory() {
for currentFolder in $2/*
do
    backupFolderNumber=$(echo $currentFolder | tr -cd '[[:digit:]]')
done
let backupFolderNumber+=1
cp -r $1 $2/$3$backupFolderNumber
echo "Backup complete."
} 
```

当此函数被调用前 10 次时，一切似乎都运行良好，因为我以 /path/to/backups/folderName_1、/path/to/backups/folderName_2、... 的形式创建了前十个备份/path/to/backups/folderName_10\. 再次调用该函数时，不会创建 /path/to/backups/folderName_11。

我的第一个问题是为什么这不像我想象的那样工作（创建 folderName_11 并计数）？

我的第二个问题是如何格式化文件名以包含前面的零以使数字部分长 3 位（文件夹名称_001，文件夹名称_002）？

我的第三个也是最后一个问题，目标应该只包含同名文件夹的备份，因此组中的最后一个文件夹应该具有最新（最高）的编号。如果由于某种原因文件夹没有排序，可以做些什么来保证找到最高数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:04:13.110

Bash 有一个*printf*函数，可以帮助您回答第二个问题。

如果您的 backupFolderNumber 是一个整数，您可以使用：

```
paddedFolderNumber=$(printf "%03d" $backupFolderNumber) 
```

%03d 语法告诉 printf 将数字打印为至少三个字符长，如果*backupFolderNumber*的长度少于三个字符，则用零填充。

请注意，如果您的文件夹名称为 folder_name001 您当前的代码，

```
backupFolderNumber=$(echo $currentFolder | tr -cd '[[:digit:]]') 
```

将不再为您提供所需的结果，因为它将返回 ie 010，let 语句将认为它是 8 的八进制数，导致*backupFolderNumber 变为*9，而不是您想要的 11 或 011。

从当前文件夹名称中检索数字时，为您提供非填充数字的一种解决方案是：

```
backupFolderNumber=$(echo $currentFolder | tr -cd '[[:digit:]]' | sed -e 's/^0\{1,2\}//') 
```

这里 sed 去掉 1 或 2 个前导零（这样序列 000 返回 0 而不是什么都没有），因此 let 应该期望十进制而不是八进制。

# actionscript-3 - 转换如何在 actionscript 或 flex 中工作？

> ID：12389971
> 
> 赞同：1
> 
> 时间：2012-09-12T14:02:50.367
> 
> 标签：actionscript-3, flash, apache-flex, flex3

![在此处输入图像描述](../Images/408d6da45a0fb0565ab9e7e7da3a2b75.png)

我有以 3D 形状创建的组件。我想为这个组件添加一个按钮。由于组件是在 3D 视图中创建的，如果我将组件添加到 3D 视图中，按钮将不会显示。

在挖掘了许多 API 之后，我遇到了 transform 和 Matrix。

据我了解，我遵循了这种方法

1）从3D视图组件，得到矩阵对象

例如：`var matrix2D:Matrix = transform.matrix`;

2）然后应用，这个矩阵到按钮变换

例如： var button:Button = new Button();

```
 button.transform.matrix = matrix2D. 
```

它没有用，我是否遵循正确的方法。请指导我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:25:39.717

您需要将按钮转换为 3D 对象并以与放置第一个对象相同的方式放置它。

# r - 如何在 R 中实现 dist

> ID：12389972
> 
> 赞同：0
> 
> 时间：2012-09-12T14:02:50.670
> 
> 标签：r, distance, heatmap

我有一个看起来像这样的距离函数

```
sed <- function(x, y){
x <- x / sum(x)
y <- y / sum(y)

x <- x[y > 0]
y <- y[y > 0]
y <- y[x > 0]
x <- x[x > 0]

xy <- x + y
a <- x / xy
b <- y / xy

w <- xy / 2
2 * prod(a^(a*w) * b^(b*w)) - 1 
```

}

我有一些看起来像这样的数据：

```
> head(x)
             x         y
[1,] 0.5836377 0.8120142
[2,] 0.4642154 0.8857223
[3,] 0.8707579 0.4917120
[4,] 0.4688734 0.8832654
[5,] 0.8105051 0.5857316
[6,] 0.6409956 0.7675446 
```

其中每一行是一个具有 x 和 y 坐标的点。所以 sed 计算行之间的距离。

我想使用距离函数绘制热图，但出现以下错误，我该如何解决？

```
> heatmap(as.matrix(x), distfun=as.dist(sed))
Error in as.vector(x, mode) : 
  cannot coerce type 'closure' to vector of type 'any' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:04:27.040

该`distfun`参数需要一个函数，该函数将返回一个对象，该对象`"dist"`属于`dist()`. 您的函数计算两个向量之间的距离，而不是每对观察值的整个差异集。它不会返回正确类型的对象，并且如果没有迭代输入数据中所有行对所需的所有脚手架，它也不能返回。

尽管通过 CRAN 上可用的**代理** [包提供](http://cran.r-project.org/web/packages/proxy/index.html)帮助，但不要害怕。这使您可以准确地提供您编写的函数类型，并提供生成相异矩阵所需的所有脚手架。

您需要先使用**代理**注册您的功能，然后才能在愤怒中使用它：

```
## create a new distance measure
mydist <- function(x,y) x * y

## create a new entry in the registry with two aliases
pr_DB$set_entry(FUN = mydist, names = c("mydist")) 
```

只需替换`mydist`为您的函数名称，您可以在将其输入代理数据库时为其指定任何名称。继续此示例，然后您将`dist()`用于计算相异矩阵：

```
dist(X, method = "mydist") 
```

看看这是否适合您的需求

```
install.packages("proxy")
require("proxy") 
```

然后阅读`?dist`和`?pr_DB`。

# cmd - 为 SQL 作业字符串化 CmdExe 命令

> ID：12389980
> 
> 赞同：1
> 
> 时间：2012-09-12T14:03:03.663
> 
> 标签：cmd, sql-job

我正在开发一个简单的 CmdExe 操作，作为夜间 SQL 作业的一部分运行。该作业的核心功能是创建一个导出的 txt 文件到一个文件夹，供我们的合作伙伴通过 ftp 访问。我们希望作业在创建新文件之前将文件夹中的所有文件移动到备份位置。我已经完成了一个简单的移动命令，例如下面的命令：

```
MOVE "\\Server1\e$\FTPFolder\1234.TXT" "\\Server1\e$\Backup\" 
```

该命令工作正常。但是，由于这是一个测试环境，现在需要完成多项工作以及转移到生产环境，我希望使用变量对其进行格式化，以便可以轻松更改服务器名称上下文。从我的搜索中，正确的语法应该是这样的：

```
SET location=Server1 && MOVE "\\%location%\e$\FTPFolder\1234.TXT" "\\%location%\e$\Backup\" 
```

但是，使用作业执行此操作会失败，并且使用 cmd 进行测试会返回“文件名、目录名或卷标语法不正确”。但是，如果我通过首先设置变量在 cmd 中将它们断开，请按 Enter，然后创建相同的 Move 命令，它可以工作。有什么我遗漏的东西需要做才能正确地将它们串在一起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:36:08.713

Cmd 在运行之前评估整行。所以它去：

```
SET location=Server1 && MOVE "\\\e$\FTPFolder\1234.TXT" "\\\e$\Backup\" 
```

因为当它评估 %location% 时没有定义。要告诉他在运行时进行评估，请将 % 替换为 ! (帮助设置) SET location=Server1 && MOVE "\!location!\e$\FTPFolder\1234.TXT" "\!location!\e$\Backup\"

# wpf - 如何将 DataContext 绑定到窗口资源中的 ViewModel 对象

> ID：12389986
> 
> 赞同：3
> 
> 时间：2012-09-12T14:03:30.070
> 
> 标签：wpf, mvvm, binding, datacontext

我正在尝试将我的用户控件数据上下文绑定到 viewmodel 对象。由于未知原因，在 Window.Resources 中设置 DataContext 结果给出

> System.Windows.Data 错误：3：找不到提供 DataContext 的元素。绑定表达式：路径=区域过滤器；数据项=空；

在 window.resources 之外设置相同的数据上下文非常完美。一段代码应该可以解决问题：

```
<Window>
<Window.Resources>
    <GridViewColumnCollection x:Key="eventColumns">
        <GridViewColumn DisplayMemberBinding="{Binding Path=Area}">
            <GridViewColumn.Header>
                <v:FilterV DataContext="{Binding AreaFilter}"/> <!--here is the problem-->
            </GridViewColumn.Header>
        </GridViewColumn>
    </GridViewColumnCollection>
</Window.Resources>
<Grid>
    <v:FilterV DataContext="{Binding AreaFilter}"/> <!-- here it works OK -->
    <GridViewHeaderRowPresenter Name="listHeader" Columns="{StaticResource eventColumns}"/>
</Grid> 
```

FilterV 是我目前简化为仅显示文本块的 UserControl。在 Grid 内，它显示 AreaFilter.Name 没有问题。在这两种情况下设置DataContext有什么区别以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:18:24.227

我相信`GridViewColumn`它实际上不是 的一部分`VisualTree`，因此其中的绑定将不起作用，因为`DataContext`在评估绑定时它没有要使用的或源。

您可以尝试使用引用您`DataContext`的绑定设置`RelativeSource``GridView`

```
<GridViewColumn.HeaderTemplate>
    <DataTemplate>
        <v:FilterV DataContext="{Binding DataContext.AreaFilter, 
            RelativeSource={RelativeSource AncestorType={x:Type GridView}}}"/>
    </DataTemplate>
</GridViewColumn.HeaderTemplate> 
```

虽然如果这不起作用，我发现的唯一解决方法是在包含您正在寻找的绑定中创建一个[Freezeable](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)对象，然后将您设置为静态资源`.Resources``v:FilterV.DataContext`

```
<GridView.Resources>
    <local:BindingProxy x:Key="proxy" 
        Data="{Binding AreaFilter, ElementName=MyGridView}" />
</DataGrid.Resources>

...

<GridViewColumn.HeaderTemplate>
    <DataTemplate>
        <v:FilterV DataContext="{Binding Source={StaticResource proxy}}"/>
    </DataTemplate>
</GridViewColumn.HeaderTemplate> 
```

[您可以在此处](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)查看此示例

此外，您应该将`GridViewHeaderTemplate`属性设置为`DataTemplate`包含您的控件的属性，而不是像现在`<v:FilterV />`这样直接在属性中设置它。`.Content`将`Content`直接设置为对象意味着使用该样式的任何项目都将尝试使用 中的相同控件`Content`，因此如果您有多个应用该`Content`属性的对象，它将引发异常，因为项目只能属于一个父控件

# yii - 如何在连接模型上显示验证错误？

> ID：12389991
> 
> 赞同：0
> 
> 时间：2012-09-12T14:03:42.367
> 
> 标签：yii

在**留言簿 _form**视图中，我们有：

```
 <?php $form=$this->beginWidget('CActiveForm', array(
        'id'=>'hs-guestbook-form',
        'enableAjaxValidation'=>false,
            'htmlOptions' => array('enctype' => 'multipart/form-data'),
    )); 

    ?>
    <script type="text/javascript">

    $(document).ready(function()
    {   

        if($('#localized fieldset').length==1) 
        {

            $.ajax({
            success: function(html){
                $('#localized').append(html); 
                $('#localized fieldset:last-child').toggle()
            },
                            type: 'get',
                            url: '<?php echo $this->createUrl('localized'); ?>',
                            data:
                                {
                                    index: 1
                                },
                            cache: false,
                            dataType: 'html'
                        });
        }                    
         else { 
            $('#localized fieldset:last-child').toggle();
         }

    });
    </script>

... and later down this view...

<div id="localized">
        <?php for($i=0; $i<count($local);$i++): ?>
            <?php if(isset($local[$i]))
                $this->renderPartial('_localized',array('model'=>$local[$i],'index'=>$i));
            ?>
            <?php endfor;?>
    </div> 
```

问题是：

我们还需要在我在这里加载`$form->error`的另一个连接模型 ( **GuestbookTr**`localized` ) 上显示. 显然，我们与那个模型没有`_form.php`关联，因为它正在加入这个模型（留言簿）。

这是该留言簿_form上加载的部分视图：

```
<fieldset>
    <label><?php echo $model->getAttributeLabel('title'); ?></label>
    <?php echo CHtml::activeTextField($model, "[$index]title"); ?>

    <label><?php echo $model->getAttributeLabel('description'); ?></label>
    <?php echo CHtml::activeTextArea($model, "[$index]description"); ?>
</fieldset> 
```

问题是相当简单的面团：

### 我们如何在这个局部视图上显示错误，知道 `$form->error` 会给我们：“未定义的变量形式”？

**以下是其他详细信息：**

在我们的**GuestbookController**上，我们这样调用一个新模型：

```
 public function getExtraModelGuestTr()
 {
   $model = new HsGuestbookTr;
   if (isset($_POST['HsGuestbookTr']))
   {
     $model->attributes = $_POST['HsGuestbookTr'];
   }

    return $model;
 } 
```

然后，在**创建**时，我们像这样使用它：

```
public function actionCreate()
{
    $this->layout = 'admin';

    $model=new HsGuestbook;

     $localized[] = $this->getExtraModelGuestTr();

     if(isset($_POST['HsGuestbook']))
     {

         if (($_POST['HsGuestbook']['status']) === '0') {
              $model->setScenario('Insert'); 
          } else {
              $model->setScenario('Publish'); 
      }
... 
```

在**留言簿模型**上，我们有：

```
public function rules()
{
 return array(
   array('name, category', 'required', 'on'=>'Insert'),
   array('name, category, image', 'required', 'on'=>'Publish'),
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:46:32.463

你可以递 $form->error(); 任何模型的 $model 变量。在您的情况下，您必须首先使其可访问并使其名称明确。

```
$model=new HsGuestbook;
$modelTr = new HsGuestbookTr;

$form->error($model,'name');
$form->error($modelTr,'name'); 
```

要创建 $form 变量，您需要实例化一个新的 CActiveForm 类，如此处文档中所述：

[http://www.yiiframework.com/doc/api/1.1/CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm)

# google-play - 我没有密钥库证书，Android 市场升级应用程序的私钥

> ID：12389993
> 
> 赞同：1
> 
> 时间：2012-09-12T14:03:57.103
> 
> 标签：google-play, upgrade

大家好，我没有密钥库 - 证书，用于在 Android 市场升级旧应用程序的私钥，但我想用新的更改升级我的旧应用程序。请提出任何升级它的技巧。我不需要更改我原来的应用程序包。我想用相同的包升级。请帮我。谢谢你！

# visual-studio-2010 - 我无法调试 Windows 服务

> ID：12389996
> 
> 赞同：0
> 
> 时间：2012-09-12T14:03:59.657
> 
> 标签：visual-studio-2010, debugging, windows-services

我在调试 Windows 服务时遇到问题。该服务已安装并正在运行，并且我已将调试器附加到该进程。

我已经设置了几个断点，但是当附加调试器时，我得到：

**当前不会命中断点。没有为此文档加载任何符号。**

所有配置均已设置为调试。

有人可以指点我一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:12:51.200

一个可能的原因可能是该服务是使用 Release 配置构建的，并且您希望通过将其附加到 VS 中来对其进行调试。

既然你和之前构建的服务有相同版本的源代码，那你为什么不根据源代码构建服务程序，然后测试呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T16:01:15.667

这可能不会帮助第一个问的人，但可能会有类似问题的人。
在我的情况下，我通过这种方式解决了它，在选择“附加到进程”时，我点击了“选择...”：![在此处输入图像描述](../Images/98328ee9c804b5cd4926607f0460cc53.png)

然后选择“自动确定要调试的代码类型”：![在此处输入图像描述](../Images/007b754ee5015b80b29f5a1865ff171d.png)

它奏效了。