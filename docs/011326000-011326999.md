# StackOverflow 问答 11326000-11326999

# c# - 如何循环将 AllowPaging 属性设置为 true 的整个 GridView？

> ID：11326009
> 
> 赞同：0
> 
> 时间：2012-07-04T09:14:04.573
> 
> 标签：c#, asp.net, c#-3.0

我在页面中有一个 GridView asp 服务器控件，并且我已将其 AllowPaging 设置为 true。现在，我想循环到整个行，但它只迭代到我定义的 PageSize 的数量。

这是asp代码：

```
 <asp:GridView ID="gvName" runat="server" AllowPaging="True" PageSize="5" AutoGenerateColumns="True"></asp:GridView> 
```

这是后面的代码：

```
 List<string> list = new List<String>();
    for(int x = 0; x <= 9; x++)
    {
        list.Add("Name " + (x + 1).ToString()); 
    }

    gvName.DataSource = list;
    gvName.DataBind();

foreach(GridViewRow row in gvName.Rows)
{
    // gvName.Rows.Count only returns 5 instead of the total number of its record that is 10
} 
```

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:19:38.627

这是分页工作方式的一个特性，而不是错误——它只为每个页面加载加载 x 行。根据您需要完成的任务，您可以：

1.  循环浏览每个页面加载时的行（因为无论如何您都应该只关心可见的行，对吗？）
2.  使用您的*列表*对象或*GridView.DataSource*（首先转换为适当的类型）循环浏览实际数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:21:46.840

使用网格事件`OnRowDataBound`事件对行进行您想要的所有工作

获取计数使用： int count = list.Count;

# java - 为我绘制的画布设置缩放

> ID：11326010
> 
> 赞同：0
> 
> 时间：2012-07-04T09:14:05.177
> 
> 标签：java, android, zooming

我有一个应用程序，它使用来自 2 个布尔数组的线在画布上绘制迷宫。我已经让这一切正常工作，但是我需要一种方法来设置缩放，所以它只显示 5x5 而不是当前的 50x50 迷宫大小。

一点进一步的信息 - 用户圈将始终位于迷宫的中心，并且当他向任何方向移动时，将显示迷宫的下一部分。请查看我以前的问题以获取一些可能有用的代码片段。

[以前的问题代码片段](https://stackoverflow.com/questions/11310279/android-canvas-ondraw/11311557#comment14905142_11311557)

非常感谢这里的任何帮助/指导。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:45:37.223

我回答了我自己的问题，我在移动中遇到了一个小错误，它正在检查缩放大小而不是数组大小。

# php - 用于邮寄的最佳 WYSIWYG 编辑器（或用于邮寄的最佳方式）

> ID：11326012
> 
> 赞同：6
> 
> 时间：2012-07-04T09:14:13.223
> 
> 标签：php, html, ckeditor, wysiwyg, mailing-list

对于我的一位客户，我一直在为他的客户开发邮件系统。他的客户一直在他们的商店中收集电子邮件地址，并希望偶尔开始使用这些电子邮件地址。

我知道所有可能出错的事情，但据我所知，我们已经尽可能地涵盖了它。我们使用 SMTP（经过身份验证）向客户发送电子邮件，电子邮件在服务器端签名，我们以每 5 分钟最多 25 封的方式拆分邮件，将标头发送到退出位置等。我可以想象这只是我必须照顾的所有事情的冰山一角。但我警告我的客户，他可能会更好地使用像 MailChimp 这样的现有应用程序，但他坚持自己做。

在我们的测试版开发完成后，我们进行了一些测试，实际上一切都很顺利。没有任何垃圾邮件文件夹问题，所有邮件都可以在不同的客户端中阅读，等等。

然而，有一件事现在有点难……编辑！我们正在为我们的客户创建模板（1 个模板，6 种样式）。我们的客户可以将这些加载到他们的编辑器中并编辑里面的文本。然而，就我们（和客户）所见，一切都很顺利 - 编辑器不会创建电子邮件友好的 HTML 代码（我应该知道...）

我已经在网上搜索了一些文章/操作方法，但是关于此的内容确实很少。

目前我们正在使用`CKEditor`（编辑器）和`KCFinder`（图像插件）。据我所知，CKEditor 是最好的免费 WYSIWYG 可用......但它对电子邮件编辑有好处吗？

我注意到一些公司使用自定义编辑器 (MailChimp)，其他公司使用 TinyMCE (Enormail.eu)。

有人有好的推荐吗？或者 CKeditor 是最好的选择，但我是否需要修改一些设置以获得最佳的邮件 html 代码？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:29:22.863

我对此进行了一些研究，因为我也对使用 CKEditor 进行基于电子邮件的编辑感兴趣。

一般来说，CKEditor 是最好的 WYSIWYG 网页编辑器，但您必须使用一些通常在 HTML 页面中不使用的技术。

由于您正在使用模板（我猜是 CKEditor 的`config.templates`），因此您的大部分优化都将在您的模板中，而不是没有配置 CKEditor。

**这些是主要目标：**

*   不要使用`<style>`标签 - 而是使用内联样式（`style`属性）。一些网络邮件阅读器不阅读此标签。

*   **请勿**使用`config.fullPage = true;`，因为某些阅读器不会读取`<body>`标签。

*   不要使用`<body>`、`<div>`和其他用于布局的标签，而是使用表格。是的，这种技术已经过时了，但是通过这样做，您可以确保（几乎）所有读者都能正确呈现页面。不要将样式应用于`<body>`标签，而是将这些样式应用于主`<table>`标签。

*   不要使用绝对定位。表也​​可以参与解决方案。

*   对于所有图像 - 插入`alt`属性，**对于**所有宽度和高度优化，不要使用基于 CSS 的宽度和高度。我的意思是 - 而不是`<img style="width: 100px;" />`使用`<img width="100px" />`。

**此外**，重要的事情之一，是自定义和优化[输出格式](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Output_Formatting)。我个人至少`breakAfterOpen : true`在里面改变`writer.setRules('p')`。

**CKEditor**是最流行的 WYSIWYG 基于 Web 的 HTML 编辑器，我想没有其他基于 Web 的电子邮件编辑器。

**我能想到的另一件事**是，在您的客户写完他的邮件后，他可以选择在一些流行的邮件客户端中预览邮件。那里有许多电子邮件测试和预览工具，但不幸的是我没有找到任何免费的工具。

我真的希望它对某人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T09:04:10.487

我在网络邮箱上工作了三年。我可以试试[tinyMCE](http://www.tinymce.com/)、[CKEditor](http://ckeditor.com)或[Redactor](http://imperavi.com/redactor/)。没有提供完美的解决方案。您仍然会遇到问题，您应该始终添加功能。有些太重，太慢，缺乏功能。

我发现最有效的是 Gmail，但不幸的是，该代码不可用。

最好的解决方案是创建**您的所见即所得**。

**更新**

试试FastMail 制作的[Squire 。](http://neilj.github.io/Squire/)

# javascript - 未捕获的类型错误：对象

> ID：11326017
> 
> 赞同：0
> 
> 时间：2012-07-04T09:14:24.277
> 
> 标签：javascript, typeerror

我想搜索两个项目（名称=字符串和位置=json）。这个搜索是（一个输入框和两列搜索）。目前使用此代码我可以找到“名称”，但我还需要找到位置。

```
if(textToCheck !== '') {                                
            if((searchArray[i]['location']).toLowerCase().search(textToCheck) === -1) {
                display = false;
            }
        } 
```

我建议但不起作用的代码是：

```
if(textToCheck !== '') {                                
            if((searchArray[i]['name']).toLowerCase().search(textToCheck) === -1 || (searchArray[i]['location']).toLowerCase().search(textToCheck) === -1) {
                display = false;
            }
        } 
```

错误是：

> 未捕获的类型错误：对象 123 Street,xxx,xx,Canada,123rd Street,xxx,xx,123 xxx,12345 xxx,France has no method 'toLowerCase' FilterController.showFilteredSet（匿名函数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:24:14.763

正如你所说`location=json`，实际上`searchArray[i]['location']`是一个对象而不是字符串。您需要根据对象的喜好进行搜索。

或者简单地将对象更改为字符串格式，如下所示：

```
JSON.stringify(searchArray[i]['location']).toLowerCase().search(textToCheck) === -1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:41:42.697

JSON.stringify() 很好。但这也在对象键中搜索。

这意味着：
如果您的“JSON”对象如下所示：

```
({
  street: 'my street',
  country: 'Texas'
}) 
```

`JSON.stringify(obj).toLowerCase().search('country')`会找到结果，即使“数据”不包含它。

相反：
使用通用方式对对象进行平面搜索。

```
Object.prototype.search = function(subject) {
  for(var k in this) {
    if(this.hasOwnProperty(k) && this[k].toString().toLowerCase().search(subject) !== -1) 
      return true;
  }
  return false;
};

var myObj = ({ foo: 'bar', hello: 'world' });
console.log(myObj.search('ar')); //search for "ar", returns true
console.log(myObj.search('ponyo!')); //search for "ponyo!", returns false
console.log(myObj.search('hello')); //search for "hello", returns false 
```

在您的情况下，这将拒绝：

```
//somewhere above, run this only once:
Object.prototype.search = function(subject) {
  for(var k in this) {
    if(this[k].toString().toLowerCase().search(subject) !== -1) 
      return true;
  }
  return false;
};
/////

if(textToCheck !== '') {                                
   if((searchArray[i]['name']).toLowerCase().search(textToCheck) === -1 && 
      (searchArray[i]['location']).search(textToCheck) === false) {
         display = false;
   }
} 
```

请注意，此代码修改了对象原型，为*所有*对象添加了“搜索”功能（这可能与其他库冲突，您可能正在使用，也可能不使用，想要做同样的事情）。

# c - 在 SharedLibrary 中创建线程会引发分段错误

> ID：11326018
> 
> 赞同：0
> 
> 时间：2012-07-04T09:14:28.983
> 
> 标签：c, linux, shared-libraries

我对 linux 操作系统很陌生，所以我正在尝试设计一个共享库，女巫将启动一个线程，我有以下代码：

1.  函数 init_log 不会引发分段错误，它不会在日志中显示注释，但有人可以告诉我为什么吗？

2.  函数 pthread_create 引发了一个分段错误，我使用 derror() 在日志中打印它！

* * *

```
void __attribute__ ((constructor)) setup();

void init_log()
{
    setlogmask(LOG_UPTO(LOG_NOTICE));
    openlog("TRACKER",LOG_CONS | LOG_PID | LOG_NDELAY, LOG_LOCAL1);
}

    void loop()
    {
        while (0 == 0)
        {
            syslog(LOG_NOTICE,"OK BOSS");
            sleep(1000);
        }
    }

    void setup()
    {
        pthread_t thread_id;
        init_log();
        syslog(LOG_NOTICE,"LIB LOADED"); // this doesn't display
        pthread_create(&thread_id,0,&loop,(void*)(NULL));
    } 
```

**编译器链接器参数**

```
**** Build of configuration Debug for project gt_trackers ****

make all 
Building target: libgt_trackers.so
Invoking: GCC C Linker
gcc -shared -o "libgt_trackers.so"  ./main.o   
Finished building target: libgt_trackers.so

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:27:48.507

函数`void loop()`应该是`void *loop (void *)`

并且调用 pthread_create 应该是

```
pthread_create(&thread_id,0,loop,NULL); 
```

pthread_create 的原型如下。您应该将循环函数的原型与下面提到的“start_routine”相匹配。

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                   void *(*start_routine) (void *), void *arg); 
```

另一点是，只需提供函数的名称就足以传递它的地址。无需在其`&`前添加。

Pthread 教程链接：[https ://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)

正如 alk 所指出的，也不需要类型转换“NULL”。谢谢你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:14:16.453

关于你的第一个问题。`syslog`不会将日志消息直接打印到控制台。它默认写入文件`/var/log/message`（至少在我的情况下:-)。您可以使用`tail -f /var/log/messages`查看您的日志消息。

中的`LOG_CONS`标志`openlog`仅表示

> 如果在发送到系统记录器时**出现错误**，请直接写入系统控制台。

更多信息`syslog`可以在[这里找到](http://linux.die.net/man/3/syslog)

仅供参考，这是一篇关于[linux 日志文件的博文](http://www.cyberciti.biz/faq/linux-log-files-location-and-how-do-i-view-logs-files/)

# android - Android XML 解析和首选项错误

> ID：11326019
> 
> 赞同：0
> 
> 时间：2012-07-04T09:14:31.467
> 
> 标签：android, xml, preference

我正在解析一个 xml 文件，但我不断收到一个空指针异常。我不知道这里的空指针是:(

列表视图.java

```
static String URL = "https://dl.dropbox.com/u/####/wosm-library-EN.xml";    
static final String KEY_ITEM = "item"; 
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DESCRIPTION = "description";
static final String KEY_FILESIZE = "filesize";
static final String KEY_THUMB_URL = "thumb_url";
static final String KEY_DOCUMENT_URL = "document_url";
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.library);

    sharedPrefs.getBoolean("french", false); {
                  URL="https://dl.dropbox.com/u/######/wosm-library-EN.xml";        

        }
         sharedPrefs.getBoolean("french", true);
            {
                  URL="https://dl.dropbox.com/u/######/wosm-library-FR.xml";        
        } 

    ArrayList<HashMap<String, String>> libraryList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); 
    Document doc = parser.getDomElement(xml); 

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    for (int i = 0; i < nl.getLength(); i++) {

        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
        map.put(KEY_FILESIZE, parser.getValue(e, KEY_FILESIZE));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
        map.put(KEY_DOCUMENT_URL, parser.getValue(e, KEY_DOCUMENT_URL));

        libraryList.add(map);
    }

    list=(ListView)findViewById(R.id.list);         
    adapter=new LazyAdapter(this, libraryList);        
    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String description = ((TextView) view.findViewById(R.id.artist)).getText().toString();
            //String thumb_url = ((ImageView)view.findViewById(R.id.list_image)).getImageMatrix().toString();
            //String thumb_url = ((TextView) view.findViewById(R.id.thumburl)).getText().toString();            
            String filesize = ((TextView) view.findViewById(R.id.duration)).getText().toString();
            String thumburl = ((TextView) view.findViewById(R.id.imgurl)).getText().toString();
            String doc_url = ((TextView) view.findViewById(R.id.documenturl)).getText().toString();

            Intent in = new Intent(CustomizedListView.this, org.scouts.library.SingleMenuItem.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DESCRIPTION, description);
            //in.putExtra(KEY_THUMB_URL, thumb_url);
            in.putExtra(KEY_FILESIZE, filesize);
            in.putExtra(KEY_THUMB_URL, thumburl);
            in.putExtra(KEY_DOCUMENT_URL, doc_url);
            startActivity(in);

        }
    });     
}   
} 
```

在我添加了偏好变量后，我才开始得到空指针异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:19:57.650

将 SharedPreferences 行放入您的 onCreate() 方法中。

你还需要使用`if(){//do something} else {//do something else}`

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
if(sharedPrefs.getBoolean("french", false))
{
   URL="https://dl.dropbox.com/u/######/wosm-library-EN.xml";        
}
else
{
   URL="https://dl.dropbox.com/u/######/wosm-library-FR.xml";        
} 
```

更好的方法是使用 Dropbox URL 的资源字符串并提供不同的本地化。那么你根本不需要这个代码。

# ruby-on-rails - rails3-jquery-autocomplete 将参数传递给范围查询

> ID：11326021
> 
> 赞同：2
> 
> 时间：2012-07-04T09:14:37.977
> 
> 标签：ruby-on-rails

我正在努力寻找 rails3-jquery-autocomplete gem 的问题的答案。

我有2个模型。环境与财产。

```
class Environment < ActiveRecord::Base
  has_many :properties

 name: string, envfile: string

class Property < ActiveRecord::Base
  scope :with_environment_id, where(:environment_id => 14)  
  belongs_to :environment 

name: string, value: string, environment_id: integer 
```

我有一个视图，它显示属于特定环境的所有属性，并在该视图中根据属性名称自动搜索以下代码

```
<%= form_tag('tbd')%>
  <%= autocomplete_field_tag :property_name, '', autocomplete_property_name_properties_path> 
```

属性控制器

```
class PropertiesController < ApplicationController
  autocomplete :property, :name, :scopes => [:with_environment_id] 
```

和 routes.rb 有

```
 get :autocomplete_property_name, :on => :collection 
```

自动完成工作正常，但它返回返回属性表中的所有记录。我只想在视图中显示属于环境的属性。

如您所见，我在属性模型中定义了一个范围，在该范围内我硬编码了一个有效的 environment_id 以使其按我的意愿工作。

所以我的问题是如何将 environment_id 从视图/控制器传递回范围？

也许我从错误的角度解决了这个问题。

抱歉，如果这是一个愚蠢的问题，但它困扰了我一整天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T14:22:06.727

```
def get_autocomplete_items(parameters)
  super(parameters).where(:user_id => current_user.id)
end 
```

# performance - AS3 引用单例

> ID：11326024
> 
> 赞同：2
> 
> 时间：2012-07-04T09:14:59.450
> 
> 标签：performance, actionscript-3, reference, singleton

我有一个 GameEngine 类，它是一个精灵，还有一个 GameModel，它是一个 Singleton 并保存大量数据。

然后我得到数据

```
GameModel.getInstance().variable; 
```

我的游戏引擎现在有很多，我想知道如果我在我的 GameEngine 中有对 GameModel 的引用而不是一直创建它是否会更有效

```
private var _data:GameModel = GameModel.getInstance();
trace(_data.variable); 
```

我有一种非常强烈的感觉，它会更有效率，但如果有人可以让我确定并让我知道你是否可以看到这种方法的缺陷，我将不胜感激，欢呼，罗里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:19:21.723

将实例存储在属性中绝对是一个好主意，因为查找会更快，而且还因为它降低了 GameEngine 对 GameModel 实现细节的了解。

例如，假设您在`GameModel.getInstance()`GameEngine 类中有一堆调用，并且您决定放弃单例行为。您将重写所有这些调用，但是如果您将实例缓存在一个属性中，您只需要重写一行。

That said, forget about singletons altogether, they're a far greater evil than premature optimization, but if you MUST use one, at least store the instance in a property in your client classes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:24:52.923

您当然可以将其添加为实例，但我怀疑它会产生明显的不同。过早的优化是万恶之源 :)

如果你真的很好奇，你应该尝试对其进行基准测试，看看它是否真的改变了任何东西。

编辑：哦，是的，正如这里提到的另一个答案 - 可能想要完全放弃单身人士。我建议查看 swiftsuspenders [https://github.com/tschneidereit/SwiftSuspenders/](https://github.com/tschneidereit/SwiftSuspenders/)以进行依赖注入（甚至是robotlegs，以获得出色的轻量级 MVC 解决方案，包括 swiftsuspenders）。

# iphone - ASIHttprequest 带有一个进度视图的多个请求

> ID：11326025
> 
> 赞同：0
> 
> 时间：2012-07-04T09:15:06.267
> 
> 标签：iphone, ios, ios4, asihttprequest

购买完成后，我想从服务器下载图像、音频和视频。

目前我能够下载图像并可以在 UIProgressView 中看到进度，但我不确定如何为多个 url 请求显示单个 UIProgressView。

我想知道我们是否可以使用 ASIHttpRequest 为多个 url 请求显示一个 UIProgressView。

请让我知道如何进行？非常感谢

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.request=nil;
    }
    return self;
}

- (void)fetchThreeImages1:(id)sender
{
    [imageView1 setImage:nil];

    if (!networkQueue) {
        networkQueue = [[ASINetworkQueue alloc] init];  
    }
    failed = NO;
    [networkQueue reset];
    [networkQueue setRequestDidFinishSelector:@selector(requestForDownloadOfFileFinished:)];
    [networkQueue setRequestDidFailSelector:@selector(requestForDownloadOfFileFailed:)];

    [networkQueue setShowAccurateProgress:YES];
    [networkQueue setDelegate:self];
    self.request=nil;

    NSURL *url;

    NSString *urlString=@"http://www.digitalreview.ca/cams/pics/DSCN0044.JPG";
    url = [NSURL URLWithString:urlString];
    request = [ASIHTTPRequest requestWithURL:url];
    NSString *Filename = [urlString lastPathComponent];

    [request setDownloadProgressDelegate:imageProgressIndicator1];
    [request setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
    [request setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:Filename]];
    [request setShouldContinueWhenAppEntersBackground:YES];
    [request setDelegate:self];
    [request setDidReceiveDataSelector:@selector(request:didReceiveBytes:)]; 
    [request setShowAccurateProgress:YES];

    [networkQueue addOperation:request];

    [networkQueue go];

}
- (void)requestForDownloadOfFileFinished:(ASIHTTPRequest *)request1
{

    NSLog(@"req finish.........");
    NSLog(@"Content will be %llu bytes in size",[request1 contentLength]); 

    goButton.hidden=YES;
    [imageProgressIndicator1 removeFromSuperview];
    UIImage *img = [UIImage imageWithContentsOfFile:[request1 downloadDestinationPath]];
    array=[[[NSMutableArray alloc]init]autorelease];
    [array addObject:img];
    image = [[UIImage alloc ]initWithData:[request1 responseData]];

    NSString *receivedString = [request1 responseString];
    NSLog(@"received string %@",receivedString);
    NSData *responseData = [request1 responseData];

    NSString *response = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSLog(@"Server response:%@", response);

    NSLog(@"response data %@",[request1 responseData]);
    NSLog(@"download destination path %@",[request downloadDestinationPath]);
    NSLog(@"download destination path1 %@",[request1 downloadDestinationPath]);
    NSLog(@"image %@",img);
    NSLog(@"image1 %@",image);
    if (img) {
        [imageView1 setImage:img];
    }
    UIAlertView *alertView = [[[UIAlertView alloc] initWithTitle:@"Download" message:@"Download Completed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alertView show];
    //completed=true;
    NSLog(@"mutablearray count %@",[array objectAtIndex:0]);

}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
 (NSIndexPath *)indexPath
 //-------------------------------------------------------------------------------
 {
   int tablePadding = 40;
   int tableWidth = [self.tblViewDownload frame].size.width;
   if (tableWidth > 480) {
     tablePadding = 110;
   }

  static NSString *CellIdentifier = @"TypeCell";

  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if (cell == nil)
  {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero]autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    if([indexPath row]==0)
    {
      NSString *urlString=@"http://www.digitalreview.ca/cams/pics/DSCN0044.JPG";

      NSString* theFileName = [urlString lastPathComponent];

      NSLog(@"%@ the filename",theFileName);

      goButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
      [goButton setTitle:@"Go" forState:UIControlStateNormal];
      [goButton sizeToFit];
      [goButton setFrame:CGRectMake(220,30,50,30)];

      [goButton addTarget:self action:@selector(fetchThreeImages1:) forControlEvents:UIControlEventTouchUpInside];
      [cell addSubview:goButton];

    //-------------
    NSString *workSpacePath=[[self applicationDocumentsDirectory] stringByAppendingPathComponent:theFileName];
    NSLog(@"%@ workSpacePath ",workSpacePath);
    if ( workSpacePath ){

        NSLog(@"%@ workSpacePath ",workSpacePath);

        //--------------
        UIImage *imgBack = [UIImage imageNamed:@"btn-back.png"];
        imageView1 = [[[UIImageView alloc] initWithFrame:CGRectMake(0,0,20,20)] autorelease];
        [imageView1 setBackgroundColor:[UIColor grayColor]];

        //imageView1.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]];
        imageView1.image = [UIImage imageWithContentsOfFile:workSpacePath];
        [cell addSubview:imageView1];

        NSLog(@"dfdfD");
        NSLog(@"sdfdsf");
    }

    imageProgressIndicator1 = [[[UIProgressView alloc] initWithFrame:CGRectZero] autorelease];
    [cell addSubview:imageProgressIndicator1]; 

    }
    NSUInteger imageWidth = (tableWidth-tablePadding-20)/3;
    NSUInteger imageHeight = 35;
   [imageView1 setFrame:CGRectMake(tablePadding/2,20,imageWidth,imageHeight)];
   [imageProgressIndicator1 setFrame:CGRectMake(120,40,imageWidth,20)];

  }

  return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:26:09.700

查看 ASIHTTPRequest 文档部分[“跟踪一组请求的下载进度”](http://allseeing-i.com/ASIHTTPRequest/How-to-use#tracking_download_progress_for_a_set_of_requests)。

您基本上需要创建一个`ASINetworkQueue`并将您的每个请求添加到它。队列负责跟踪整体进度并将调用委托方法，您可以在其中更新进度条。

# c# - 地铁应用程序中的自定义光标

> ID：11326026
> 
> 赞同：2
> 
> 时间：2012-07-04T09:15:08.170
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在开发一种类似油漆的应用程序。我想在某些情况下更改光标。那么，如何在 Metro 应用程序中使用自定义光标？

我找到了这个

```
Window.Current.CoreWindow.PointerCursor = new Windows.UI.Core.CoreCursor(Windows.UI.Core.CoreCursorType.Custom, uint id); 
```

在上述方法中，“自定义”光标有一个枚举，第二个参数是资源 ID。那么我怎样才能得到呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T01:06:20.610

这样做的基本途径：

创建您的自定义光标并使用 C++ Metro DLL 将其打包为 .res 通过查看 C++ 项目中的 resource.h 文件来记下您的资源 ID 在我的项目中，资源编号为 101，我没有调整。将 .res 添加到 CSharp XAML Metro 项目 使用文本编辑器打开 .csproj 在第一个属性组中添加一个指向 .res 文件的部分 使用您引用的函数调用将光标切换到自定义光标，然后您通过查看 resource.h 找到的资源编号。Window.Current.CoreWindow.PointerCursor = new Windows.UI.Core.CoreCursor(Windows.UI.Core.CoreCursorType.Custom, 101);

我意识到这很多。[我在我的博客http://blogs.msdn.com/b/devfish/archive/2012/08/02/customcursors-in-windows-8-csharp-metro-applications.aspx](http://blogs.msdn.com/b/devfish/archive/2012/08/02/customcursors-in-windows-8-csharp-metro-applications.aspx)上发布了详细的逐步演练. 希望这可以帮助。

# spring - Spring bean 未注入 JBoss6 上的 CXF Restful 服务中

> ID：11326028
> 
> 赞同：1
> 
> 时间：2012-07-04T09:15:27.587
> 
> 标签：spring, rest, cxf, jboss6.x, cxfrs

我正在 JBoss 6 上使用 Spring 编写 CXF Restful 服务。没有注入 Spring bean。我没有在此处显示大量代码，而是在此处共享了一个示例[项目](https://sites.google.com/site/kenbase/misc/restservice.zip)。我的理解是spring上下文没有创建rest服务类，因此没有注入spring bean（项目中的CoreService）。然而，同样适用于 TomCat。我想让它在 JBoss6 上运行。

请分享您的想法并帮助我解决问题。非常感谢您的帮助。谢谢。

# c# - 在引发 clr 异常时创建核心转储

> ID：11326029
> 
> 赞同：3
> 
> 时间：2012-07-04T09:15:28.823
> 
> 标签：c#, debugging, clr, windbg, dump

每次抛出**特定**的clr 异常时，我都会尝试使用 windbg 创建转储。

我知道！soe，但我不希望执行停止，我只是希望它创建一个转储。

这可能吗？

如果无法使用windbg，我也愿意接受其他关于如何实现这一目标的建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:20:14.437

尝试[procdump](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)。也许使用选项“-e 1”来捕获第一次机会异常的转储。

编辑：

对于特定的例外情况，您可能需要 ADPlus。例如看这篇[文章](http://msdn.microsoft.com/en-us/magazine/cc163530.aspx)。

更多编辑：

没有 ADPlus 也可以：在 Windbg -> Debug -> Event Filters 中，将 CLR exception 设置为**ignored - not processed**。单击命令按钮，然后输入以下内容（当然还有您的特定异常类型）：

```
!soe  System.ArgumentNullException 1;.if(@$t1==0) {g} .else {.dump /ma /u d:\ANE.dmp} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:58:35.000

In WinDbg, 'Debug > Event Filters', find the specifc exception you want to execute a command for or add a numbered exception.

Then click 'Commands' and enter:

```
.dump /ma c:\mydump.dmp 
```

in the command box, you can even enter a second command for second chance exception handling and this will write a full mini-dump when the exception event is triggered.

# emacs - 在 emacs 中编译大型项目

> ID：11326030
> 
> 赞同：2
> 
> 时间：2012-07-04T09:15:29.393
> 
> 标签：emacs, compilation

一个大型项目可能有几个级别深度的目录。Emacs 的默认编译命令是`"make -k"`，如果我修改了某个源代码，然后键入`"M-x compile RET RET"`，它将`"make -k"`在源代码所在的目录下执行。

我想我可以写一个函数来判断Makefile是否存在于当前目录下，如果存在，则继续在父目录下搜索直到找到最顶层目录，然后执行构建命令，这和我的预期一样。

但是，我不太清楚如何开始，有人可以给我一些开始的提示吗？就像我可能遇到的函数或变量一样。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:39:46.623

您可以尝试使用类似的东西：

```
(setq compile-command
      '(let ((mf (locate-dominating-file default-directory "Makefile")))
         (if mf (setq mf (file-name-directory mf)))
         (concat (if (and mf (not (equal mf default-directory)))
                     (format "cd %s; "
                             (shell-quote-argument
                              (file-relative-name
                               (directory-file-name mf)))))
                 "make -k "))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T21:16:15.713

果酱中有一个[更智能的编译器。](http://marmalade-repo.org/packages/smarter-compile)

从文档中......当您需要它时，您可以指定一个 cons 单元格列表，每个单元格都像`(TEST . COMMAND)`.

COMMAND 用于`compile-command`测试成功的时间。

测试可以是：

*   一个字符串。在这种情况下，它用作正则表达式，并与与缓冲区关联的文件名匹配。当正则表达式匹配时，TEST 成功。

*   一个符号，代表主模式。在这种情况下，如果缓冲区使用该主要模式，则 TEST 成功。

*   一个符号，表示名称不以 \"-mode\" 结尾的任何函数。在这种情况下，调用该函数，如果它返回非零，则 TEST 成功。

*   表格列表。在这种情况下，表单是 eval'd，如果返回值不是 nil，则 TEST 成功。

因此，您可以生成一个函数来扫描父目录中的 makefile，并将其用作您的测试。

根据文档，如果 COMMAND 为 nil，则包使用 TEST 的结果作为编译命令。这意味着您只需要一个函数，返回一个引用相应目录中的 makefile 的 make 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:25:50.887

看看：[http ://emacswiki.org/emacs/CompileCommand](http://emacswiki.org/emacs/CompileCommand)

直接来自 emacs 的“Ch v compile-command”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-18T12:11:39.503

对于那些喜欢 bash 脚本而不是 Emacs Lisp 的人来说，这是一个解决方案。在我的 .emacs 中，我定义了一个保存所有缓冲区并运行编译项目的 bash 脚本的命令。

```
(defun save-all-and-compile () (interactive)
 (save-some-buffers 1)
 (shell-command "make-and-run.sh &"))
(add-hook 'c-mode-common-hook (lambda ()
 (local-set-key (kbd "<f5>") 'save-all-and-compile))) 
```

对于小型项目，脚本可能很简单

```
#!/bin/bash
make -j && ./<main> 
```

其中“main”是可执行文件的名称。对于较大的项目，首先需要找到根目录。同样，您可以使用不同的脚本（绑定到不同的键）来构建和运行程序。然后是一些用于测试项目不同部分的脚本。但这些只是一个可以自己弄清楚的细节。

确保使用“&”异步运行脚本。这样，*Async Sh​​ell 命令*缓冲区将使用 make 和您的项目的输出打开，并将保持打开状态。

**编辑**

根据下面的讨论，我最初似乎想多了，解决方案非常简单。与其将通常的“make”或“make -k”传递给编译命令，不如使用一个 shell 脚本，它首先导航到项目的根目录和构建。

```
(setq compile-command "script.sh") 
```

# java - 从 Excel 文件中读取内容

> ID：11326031
> 
> 赞同：4
> 
> 时间：2012-07-04T09:15:29.563
> 
> 标签：java, jxl, jxls

```
package jexcel.jxl.nimit;

import java.io.*;  

import jxl.Cell;  
import jxl.Sheet;  
import jxl.Workbook;  
import jxl.read.biff.BiffException;  
import jxl.read.biff.File;  

public class ExampleJxl {  

    /**
     * @param args
     */
    public static void main(String[] args)throws IOException, BiffException {
        ExampleJxl.ExcelFile("D:/nimit.xls");
    }

public static String ExcelFile(String path){    

    Workbook workbook = Workbook.getWorkbook(File(path));
    Sheet sheet = workbook.getSheet(0); 
    Cell a1 = sheet.getCell(0,0);
    Cell a2 = sheet.getCell(0,1);
    String s1=a1.getContents();
    String s2=a2.getContents();
    System.out.println("My name is"+a1+"\t"+a2);
     }  
} 
```

我不明白为什么 File(path) 显示错误**The method File(String) is undefined for the type ExampleJxl** 我试图打印我在 Excel 文件中输入的姓名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:20:58.453

更改您的代码

```
Workbook workbook = Workbook.getWorkbook(File(path)); 
```

至

```
Workbook workbook = Workbook.getWorkbook(new java.io.File(path)); 
```

# perl - Unix/Perl - 在模式之前删除文件的内容

> ID：11326033
> 
> 赞同：-2
> 
> 时间：2012-07-04T09:15:35.830
> 
> 标签：perl, file, unix

我有这样的文件

```
### SECTION 1 ###
data data
data data
### SECTION 2 ###
data data 
data data 
```

现在我希望删除**第 2 节之前的所有内容。**

我如何在 Perl 或 Unix 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:47:09.950

要就地编辑文件：

```
perl -i -ne 'print if /SECTION 2/..0' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:27:08.987

```
perl -ne '$m = 1 if $_ =~ /SECTION 2/ ; next unless $m ; print $_;' filename > newfilename 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:46:40.187

```
$ perl -pi -e '$_ = "" unless /SECTION 2/ .. /(*FAIL)/' file 
```

# ios - 完美手机评论

> ID：11326037
> 
> 赞同：0
> 
> 时间：2012-07-04T09:16:12.447
> 
> 标签：ios, testing, mobile

谁能告诉我，与物理设备相比，perfecto mobile 是测试的正确选择，这对本机应用程序和混合有什么影响，perfecto 在后端某处使用模拟器，因为它只能在云上提供那。

请帮忙。

谢谢深

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T10:04:36.593

公平地说，我为 Perfecto 工作:-)

1.  Perfecto 使用真实设备，而不是模拟器。所以不需要比较，那些是真实的设备
2.  对设备没有影响。或者公平地说，对设备的影响很小（没有客户端），已经实施了 4000 多台设备和数百个客户（包括设备 OEM、运营商和许多一级企业），我们从来没有抱怨过测试不代表真实设备
3.  云只是帮助您减少拥有设备所涉及的物流。

# c# - 二维数组的所有可能组合

> ID：11326038
> 
> 赞同：0
> 
> 时间：2012-07-04T09:16:14.800
> 
> 标签：c#, java, vba, combinations, multidimensional-array

我想从 2D [mxn] 数组中生成所有可能的组合，每个数组的第一个元素除外。该元素将代表表示其余元素的“类型”。例如，如果我有一个数组

```
shirts[][] = 
{
  {"colour", "red", "blue", "green", "yellow"},
  {"cloth", "cotton", "poly", "silk"},
  {"type", "full", "half"}
}; 
```

所需的输出应该是衬衫所有可能性的组合。对于上面的例子，

```
colour red
colour blue
...
cloth silk
type full
type half
colour red cloth cotton
colour red cloth poly
...
colour yellow type half
cloth cotton type full
...
cloth silk type half
colour red cloth cotton type full
...
colour yellow cloth silk type half 
```

我试过这样的事情（也从其他 Stack Overflow [Question](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)得到帮助）

```
String shirts[][] = 
{
  {"colour", "red", "blue", "green", "yellow"},
  {"cloth", "cotton", "poly", "silk"},
  {"type", "full", "half"}
};

majorCombinations = new int[possibilities][shirts.length];

int currentCombination;
int offset = 1;

for (int i=0; i < shirts.length; i++)
{
    currentCombination = 0;
    while (currentCombination < possibilities)
    {
        for (int j=0; j < shirts[i].length; j++)
        {
            for (int k=0; k < offset; k++)
            {
                if (currentCombination < possibilities)
                {
                    majorCombinations[currentCombination][i] = shirts[i][j];
                    currentCombination++;
                }
            }
        }
    }
    offset *= shirts[i].length;
} 
```

但它只给出所有 n 组合的值，即

```
colour cloth type
colour cloth full
...
yellow silk half 
```

它没有考虑较小的组合，它甚至不是通用的，即用于 [mxn] 数组（n 不需要固定）。非常感谢 VBA 的帮助。我对 C、Java 和 C# 很熟悉。提前致谢 ：）

**编辑：**

[这与这里提出的问题](https://stackoverflow.com/questions/3093622/generating-all-possible-combinations)不同。这不是笛卡尔积，其中*一个*元素是从每个相关数组中获取的。我需要的输出没有这个限制；因此，这种情况下的组合数 > 链接问题中的组合数。此外，第一列是内容的描述符，必须伴随内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:22:01.210

[链接到原始答案](https://stackoverflow.com/a/9521790/1004522)

对于两个数组，两个嵌套循环应该做：

```
for (int i = 0 ; i != c[0].length ; i++) {
    for (int j = 0 ; j != c[1].length ; j++) {
        System.out.writeln(""+c[0][i]+c[1][j]);
    }
} 
```

对于更多嵌套，您需要递归或等效的基于堆栈的解决方案。

```
void combos(int pos, char[][] c, String soFar) {
    if (pos == c.length) {
         System.out.writeln(soFar);
         return;
    }
    for (int i = 0 ; i != c[pos].length ; i++) {
        combos(pos+1, c, soFar + c[pos][i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:23:38.463

是你想要的，笛卡尔积吗？

```
var colours = new[]{"colour - red", "colour - blue", "colour - green", "colour - yellow"};
var cloth = new[] {"cloth - cotton", "cloth - poly", "cloth - silk"};
var type = new[]{"type - full", "type - half"};

var combinations = from c in colours
                   from cl in cloth
                   from t in type
                   select new[]{c, cl, t}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T13:53:28.133

```
for (int i = 0; i < shirts[0].length; i++) {
        for (int j = 0; j < shirts[1].length; j++) {
            for (int k = 0; k < shirts[2].length; k++) {
if (i != 0)
                    System.out.print(shirts[0][0] + " " + shirts[0][i]
                            + " ");
                if (j != 0)
                    System.out.print(shirts[1][0] + " " + shirts[1][j]
                            + " ");
                if (k != 0)
                    System.out.print(shirts[2][0] + " " + shirts[2][k]
                            + " ");
                System.out.println();
            }
        }

    }
} 
```

# c++ - 防止带有尾随返回类型的悬空右值引用

> ID：11326040
> 
> 赞同：2
> 
> 时间：2012-07-04T09:16:16.750
> 
> 标签：c++, c++11, rvalue-reference

**此功能工作正常：**

```
std::string get_str() {
  return std::get<0>( make_tuple(std::string("hi")) );
} 
```

但是，如果您尝试使用**定义的尾随返回类型做同样的事情`decltype`，该函数将返回一个悬空的右值引用**：

```
auto get_str() -> decltype( std::get<0>( make_tuple(std::string("hi")) ) ) {
  return std::get<0>( make_tuple(std::string("hi")) );
} 
```

我有一个很酷的尾随返回类型应用程序，我想在其中使用`std::get`. 不幸的是，在这种情况下，返回类型`std::get` *是*一个右值引用，所以`decltype`只是在做它的工作......

**你知道一种使用尾随返回类型`decltype`但避免悬空右值引用的方法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:28:31.443

利用`std::remove_reference`

```
auto get_str() -> 
std::remove_reference<
    decltype( std::get<0>( make_tuple(std::string("hi")) ) )
    >::type {
  return std::get<0>( make_tuple(std::string("hi")) );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:28:34.627

听起来好像你想要`std::remove_reference`。因此，在您的情况下，只需将您的尾随返回类型更改为
`std::remove_reference<decltype( std::get<0>( make_tuple(std::string("hi")) ) )>::type`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T09:28:36.793

`remove_reference`您可以使用标准类型特征删除引用：

```
#include <string>
#include <tuple>
#include <type_traits>

auto get_str() ->
    std::remove_reference<
        decltype( std::get<0>( make_tuple( std::string("hi") ) ) )
    >::type
{
    return std::get<0>( make_tuple( std::string("hi") ) );
} 
```

# single-sign-on - 多个域一次登录（无需登录每个域）

> ID：11326042
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:16:25.830
> 
> 标签：single-sign-on

我被要求监督少数网站的开发。运行该节目的人想要它，以便如果您登录其中一个站点，那么您将自动登录到其余站点。

我的一个优秀程序员朋友说没有安全的方法可以做到这一点，对吗？

我有一个想法，主站点（父站点）可以将子站点托管为子域，每个站点都有自己唯一的域名。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:39:19.983

是的，这是可以做到的。然而，这不是一个简单的解决方案，而是一个非常昂贵的项目，需要大量的技能。公司通常试图通过自己建立内部解决方案来实现这一目标，但随着复杂性的增加往往会失败。

您尝试完成的工作也可以作为服务完成。您可能想查看以下网页：

[http://www.covisint.com/web/guest/about-identity-services](http://www.covisint.com/web/guest/about-identity-services)

希望有帮助！

# github-api - Github Java API - 搜索存储库

> ID：11326045
> 
> 赞同：5
> 
> 时间：2012-07-04T09:16:45.117
> 
> 标签：github-api

我想根据大小和关键字参数搜索 Github 存储库。这是我编写的 Java 代码：

```
package searchTest;

import java.io.IOException;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.eclipse.egit.github.core.SearchRepository;
import org.eclipse.egit.github.core.client.GitHubClient;
import org.eclipse.egit.github.core.service.RepositoryService;

public class GithubSearch {
    private static Map<String, String> searchQuery = new HashMap<String, String>();

    public static void main(String[] args) throws IOException {
        GitHubClient client = new GitHubClient();
        client.setCredentials("username", "password");
        RepositoryService service = new RepositoryService(client);
        searchQuery.put("keyword","microsoft"); 
        searchQuery.put("size","304");
        List<SearchRepository> searchRes = service.searchRepositories(searchQuery);
        System.out.println("Search result "+searchRes.toString());
    }   
} 
```

但我得到的输出是空的：

```
Search result [] 
```

我检查了[GitHub Java API](https://github.com/eclipse/egit-github/tree/master/org.eclipse.egit.github.core) javadoc，但找不到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-19T03:23:55.460

试试[jcabi-github](http://github.jcabi.com/index.html)（我是它的开发者之一）：

```
final Github github = new RtGithub();
final JsonResponse resp = github.entry()
    .uri().path("/search/repositories")
    .queryParam("q", "java").back()
    .fetch()
    .as(JsonResponse.class);
final List<JsonObject> items = resp.json().readObject()
    .getJsonArray("items")
    .getValuesAs(JsonObject.class);
for (final JsonObject item : items) {
    System.out.println(
        String.format(
            "repository found: %s",
            item.get("full_name").toString()
        )
    );
} 
```

完整示例在这里：[https ://github.com/jcabi/jcabi-github/tree/master/examples/search-repos](https://github.com/jcabi/jcabi-github/tree/master/examples/search-repos)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T08:50:34.900

我运行了如下示例代码，没有关键字“java”的大小

```
Map<String, String> searchQuery = new HashMap<String, String>();
searchQuery.put("keyword", "java");
List<SearchRepository> searchRes = null;
try {
    searchRes = service.searchRepositories(searchQuery);
} catch (IOException e) {
    e.printStackTrace();
}

System.out.println("Search result "+searchRes.toString()); 
```

输出如下：

```
 Search result [michaelriha/WASC-Essay, sayems/Keyword-Driven-Framework, youdevise/karg, frinknet/DBG.js, andorp/testkeys, jpolitz/defaults.js, lsmith/article--javascript-this, qiaoyu314/TwitterMiner, cookieglitch/SearchToDB_Twitter, snoooze03/costOfVolatile, dziaduZLasu/java-critical-section-synchro, tvalletta/this-presentation, youdevise/jpoeisis, Sixtease/RtkInputMethod, metabrain/java8-plugin-persitent-local-vars, atestology/roark, jsmreese/pureshare-javascript-api, kentcdodds/genie, TARUNTEJAKOPPULA/Runnung-java-code-with-another-java-program,  aleSuglia/SitesLook, neetsdkasu/LittleLisp, odbol/Port-Java-to-C, artfulgeek/Hybrid-Search-and-Delivery-of-Learning-Objects, itcuties/Java-XStream-Complex-Example, codeheadzxc/TomsMovieFinder, truongsinh/generator, nsdevaraj/SwizDAO, dineshkummarc/jameleon-test-suite-3.3-RC1] 
```

现在添加大小 196 到查询搜索：

```
Map<String, String> searchQuery = new HashMap<String, String>();
searchQuery.put("keyword", "java");
searchQuery.put("size", "196");
List<SearchRepository> searchRes = null;
try {
    searchRes = service.searchRepositories(searchQuery);
} catch (IOException e) {
    e.printStackTrace();
}
System.out.println("Search result "+searchRes.toString()); 
```

输出如下：

```
 Search result [michaelriha/WASC-Essay] 
```

我认为“大小”参数不是固定搜索限制的数量，而是仅获取具有该大小的存储库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T08:14:58.543

也许您应该尝试仅搜索关键字。我认为他们不支持尺寸搜索。

# java - JFace Dialog 以编程方式最大化

> ID：11326046
> 
> 赞同：2
> 
> 时间：2012-07-04T09:16:46.850
> 
> 标签：java, dialog, swt, jface

我目前正在尝试以`Dialog`编程方式最大化 JFace。通常调用`setMaximized(true)`的`parentShell`就`Dialog`足以实现这一点。

但是，它不适用于我的`Dialog`. 使用窗口按钮手动最大化它是可行的。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:30:51.670

尝试执行以下操作：

```
Rectangle bounds = parentShell.getDisplay().getClientArea();
myDialog.setBounds(bounds);
parentShell.setMaximized(true); 
```

**UPD：**但是这种方法并不完全正确，因为此代码会破坏您对话框的先前大小。以下方法似乎效果更好：

```
parentShell.pack();
parentShell.setMaximized(true); 
```

# asp.net - 在 asp.net 中成功注册后发出警报

> ID：11326053
> 
> 赞同：0
> 
> 时间：2012-07-04T09:17:01.543
> 
> 标签：asp.net

我想在人注册成功后发出警报。然后我将它重定向到索引页面我尝试了类似的东西

```
ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('" + "Login is successful!" + "');", true);
Response.Redirect("index.html"); 
```

但看不到警觉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:24:05.613

这不起作用——您正在将启动脚本注册到当前页面，然后重定向到不同的页面。因此，您的脚本页面永远不会被发送回客户端。

您可以尝试以下两种方法之一：

1.  在重定向之后注册脚本（当然，重定向目标必须是一个*aspx*文件，而不是*html*才能工作）。
2.  将另一行添加到在客户端执行重定向的启动脚本。（即在警报后使用*window.location = index.html ）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:29:19.867

使用饼干。成功登录后，添加一个包含问候语的 cookie 作为响应，并在登录页面上 - 使用 javascript 检查 cookie 是否存在，如果存在 - 显示警报并删除 cookie。通过这种方式，您可以使用例如用户名来个性化警报消息。

# wpf - 合并字典中的静态资源查找

> ID：11326056
> 
> 赞同：2
> 
> 时间：2012-07-04T09:17:30.993
> 
> 标签：wpf, styles, staticresource

我一直在阅读和尝试很多，但我仍然找不到我的问题的答案。所以我真的希望你们能帮助我。

如果我有一个 TopLevel 字典、一个颜色字典和一个样式字典。

TopLevelDictionary.xaml

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Base="clr-namespace:Hamilton.XRP2.Base;assembly=Hamilton.XRP2.Base.BaseUI">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Resources/ColorDictionary.xaml"/>
        <ResourceDictionary Source="Controls/Button.xaml"/>
    </ResourceDictionary.MergedDictionaries>

</ResourceDictionary> 
```

如果我在 Button.xaml 中使用来自 ColorDictionary.xaml 的资源，为什么静态资源不起作用？应该，不是吗？为什么我必须将 ColorDictionary 合并到我的控件样式字典中？如果我有 70 个基本控件，每个基本控件都必须合并颜色字典，我不知道为什么，但这会大大减慢我的应用程序！

有人可以建议我如何以正确的方式做到这一点吗？

问候， m00ni

# android - C2DM 注册 ID 与 GCM 注册 ID？

> ID：11326057
> 
> 赞同：1
> 
> 时间：2012-07-04T09:17:31.163
> 
> 标签：android, push-notification, android-c2dm, google-cloud-messaging

我注意到 Google 已弃用 C2DM 并将其更改为 GCM。然后，在其[Migration docs](http://developer.android.com/guide/google/gcm/c2dm.html#client)中，它指出：

> 收到 GCM 的响应后，必须将获取的注册 ID 发送到应用服务器。执行此操作时，应用程序应指示它正在发送 GCM 注册 ID，以便服务器可以将其与现有 C2DM 注册区分开来。

对于已将 C2DM 迁移到 GCM 的任何人，两种服务的注册 ID 格式是否不同？因为它说

> 应用程序应表明它正在发送 GCM 注册 ID，以便服务器可以将其与现有的 C2DM 注册区分开来。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:37:54.897

我相信格式相同，但两种服务的注册 ID 不同。应用服务器中需要有指示，因为 Google 对 GCM 和 C2DM 有不同的请求。

# outlook - 以编程方式从 Exchange Outlook 联系人获取 Internet 电子邮件地址？

> ID：11326062
> 
> 赞同：4
> 
> 时间：2012-07-04T09:17:39.547
> 
> 标签：outlook

我正在尝试从连接 Exchange 的 Outlook 中读取 Internet 格式的地址。我从 Outlook 联系人中读取了所有联系人，而不是从全局通讯簿 (GAB) 中读取，问题是对于存储在 Exchange GAB 中的联系人中的所有用户，我只能读取 X.500 格式在这种情况下没有用的地址。对于不在 Exchange 服务器域中的所有手动添加的联系人，将按预期导出 Internet 地址。

基本上，我使用以下代码片段来枚举联系人：

```
static void Main(string[] args)
{
    var outlookApplication = new Application();
    NameSpace mapiNamespace = outlookApplication.GetNamespace("MAPI");
    MAPIFolder contacts = mapiNamespace.GetDefaultFolder(OlDefaultFolders.olFolderContacts);

    for (int i = 1; i < contacts.Items.Count + 1; i++)
    {
        try
        {
            ContactItem contact = (ContactItem)contacts.Items[i];
            Console.WriteLine(contact.FullName);
            Console.WriteLine(contact.Email1Address);
            Console.WriteLine(contact.Email2Address);
            Console.WriteLine(contact.Email3Address);
            Console.WriteLine();
        }
        catch (System.Exception e) { }
    }
    Console.Read();
} 
```

有没有办法提取 Internet 地址而不是 X.500？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T16:01:03.660

您需要一次转换`ContactItem`为`AddressEntry`- 一个电子邮件地址。

为此，您需要`AddressEntry`通过`Recipient`对象模型访问。检索实际收件人的唯一方法`EntryID`是[利用`PropertyAccessor`.`ContactItem`](https://stackoverflow.com/a/4668233/175679)

```
const string Email1EntryIdPropertyAccessor = "http://schemas.microsoft.com/mapi/id/{00062004-0000-0000-C000-000000000046}/80850102";
string address = string.Empty;
Outlook.Folder folder = this.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
foreach (var contact in folder.Items.Cast<Outlook.ContactItem>().Where(c=>!string.IsNullOrEmpty(c.Email1EntryID)))
{
    Outlook.PropertyAccessor propertyAccessor = contact.PropertyAccessor;
    object rawPropertyValue = propertyAccessor.GetProperty(Email1EntryIdPropertyAccessor);
    string recipientEntryID = propertyAccessor.BinaryToString(rawPropertyValue);
    Outlook.Recipient recipient = this.Application.Session.GetRecipientFromID(recipientEntryID);
    if (recipient != null && recipient.Resolve() && recipient.AddressEntry != null)
        address = recipient.AddressEntry.GetExchangeUser().PrimarySmtpAddress;
} 
```

# django - 是否可以在应用 Django 数据库 API 之前解析 json？

> ID：11326063
> 
> 赞同：0
> 
> 时间：2012-07-04T09:17:51.780
> 
> 标签：django, json, django-models

我有一个 Django 数据库，其中存储了一些 JSON。我希望提取此 JSON，对其进行解析，然后对其应用过滤器/查询。更具体地说，我想要一个动态网页，显示按用户偏好排序、过滤或分组的 JSON。

通过阅读 Django 文档，我只能看到如何使用像starts_with 这样的预制过滤器，而不是如何预处理数据。我确实看到了应用正则表达式的选项，但我认为我不能手动实现完整的 JSON 解析器。我目前解析 JSON，然后使用 python 类搜索它，但这似乎违背了使用数据库的目的，特别是因为它可以处理的查询类型有限。

JSON 来自其他来源，不能保证它的字段或结构。

提前致谢，

乔伊拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:28:53.460

我能想出的最佳答案是将 JSON 作为表动态添加到数据库中以获得两个结果字符串（我这样做是因为不能保证字典保持顺序。）

```
TABLECONFIG = 'data_result' 
def jsontodb(conn, jsonarray):
    inits = reduce(lambda x, y: x.union(y.keys()), jsonarray, set())

conn.execute("CREATE TABLE " + TABLECONFIG + " (" + 
str(map(lambda x: x.encode('UTF-8'), inits)).encode('UTF-8').strip('[]')  + ");")
for i in jsonarray:
        d = map(lambda y: str(map(lambda x: x.encode('UTF-8'), y)).strip('[]'), zip(*i.items()))    
        conn.execute("INSERT INTO " + TABLECONFIG + " (" + d[0] + ") VALUES (" + d[1] + ");")
conn.commit()

DBCONFIG = '/work/django.sqlite3'
def pullquery(query):
    p  = loads(oqr.main(
        [str(x) for x in shlex.split(query.encode('UTF-8'))]
    ))
    conn = sqlite3.connect(DBCONFIG)
    jsontodb(conn, p)
    return conn 
```

给出我想要的结果，但这仅在 JSON 最多 1 层深的情况下才有效（尽管我认为这可以修复，但它已经很老套了。

# android - 从 C2DM 迁移到 GCM

> ID：11326065
> 
> 赞同：2
> 
> 时间：2012-07-04T09:18:04.117
> 
> 标签：android, android-c2dm, google-cloud-messaging

我读[了这个](http://developer.android.com/guide/google/gcm/c2dm.html)，但我不明白我必须做什么。现在我的应用程序通过以下代码在 c2dm 中进行注册：

```
String pushId =  C2DMessaging.getRegistrationId(this);
if(pushId == "")
{
    C2DMessaging.register(this, "email@gmail.com");
} 
```

为了从 c2dm 迁移到 gcm，我必须在此代码中进行哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:34:30.570

首先，完成[入门](http://developer.android.com/guide/google/gcm/gs.html)步骤。创建 API 项目后，您将收到一个“项目 ID”，如该文档中提到的 #4 项：

```
Take note of the value after #project: (4815162342 in this example). This is your project ID, and it will be used later on as the GCM sender ID. 
```

因此，您只需将代码更改为：

```
C2DMessaging.register(this, "4815162342"); 
```

senderID 必须是字符串数字。

我正在使用“入门”指南中的示例，您应该将发件人 ID 替换为您自己的项目 ID。

最后，阅读[GCM 架构概述](http://developer.android.com/guide/google/gcm/gcm.html)，因为您需要对服务器进行一些更改才能使所有这些工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:34:41.247

您需要更改的基本上是电子邮件地址。您需要发送您在 Google API 控制台页面中收到的 API 密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:54:35.043

在 GCM 中，为了摆脱 Qutota，谷歌删除了注册和使用谷歌云服务的电子邮件激活。

当您转到[Google Developer Console](https://code.google.com/apis/console) Here 并单击创建一个新项目时，它将为您提供一个新的**项目 ID**，该 ID 将出现在 URL 中。

这里的**PROJECT ID**将像**用户名**和另一件事一样工作，这次 Google 提供了一个 jar **gcm.jar**，您需要使用构建路径将其添加到项目类路径中以使 GCM 工作。

这个 jar 包含一个名为 GCMRegistrar 的类，它具有预定义的函数 register() 所以你只需要添加这个代码就可以了

```
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

> 在 C2DM **SENDER_ID 中**：激活的**Gmail ID**。
> 
> 在 GCM **SENDER_ID**中 ： url 中的**PROJECT ID**。

# php - 在 PHP 中获取 android 应用程序的信息

> ID：11326068
> 
> 赞同：0
> 
> 时间：2012-07-04T09:18:14.907
> 
> 标签：php, json, cakephp, app-store, google-play

我一直在寻找一些机制，通过它我可以获取 android 应用程序的信息，例如市场中的应用程序 ID、类别、价格、图标，同样来自 Google Play。我知道有一个适用于 iOS 的 App Store 工具，我们可以通过下面的 URL 获取应用程序的信息，它会返回给我们它的 JSON：

http://itunes.apple.com/search?media=software&term=[query_word]

我需要同样的 Android 市场。是否有任何网址可以做同样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:23:13.690

这是移植到 PHP 的 Android Market API： [https ://github.com/splitfeed/android-market-api-php](https://github.com/splitfeed/android-market-api-php)

# solr - 在 Solrj 中使用空格对查询进行排序

> ID：11326070
> 
> 赞同：1
> 
> 时间：2012-07-04T09:18:24.957
> 
> 标签：solr, solrj

我正在使用 solr 查询一些文档。在这种情况下，我不想按相关性对结果进行排序，我希望它们按标题排序。我在 solrj 中做了以下工作：

```
//sort by title
setSortField("title", SolrQuery.ORDER.asc) 
```

当文档标题中没有空格或斜杠时，这可以正常工作。当我有 4 个文档时，标题值的顺序如下：

```
"A"
"B"
"C"
"B D" 
```

在我看来，Solr 从第一个空格之后的字段开始排序。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:30:09.650

我描述的示例是一个构造示例，但我现在也使用给定示例对其进行了测试，并且具有相同的行为。

我对该字段使用以下配置：

```
<fieldType name="textgen" class="solr.TextField" positionIncrementGap="100">
   <analyzer type="index">
      <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      <filter class="solr.StopFilterFactory" enablePositionIncrements="true" words="stopwords.txt" ignoreCase="true"/>
      <filter class="solr.WordDelimiterFilterFactory" splitOnCaseChange="0" catenateAll="0" catenateNumbers="1" catenateWords="1" generateNumberParts="1" generateWordParts="1"/>
      <filter class="solr.LowerCaseFilterFactory"/>
   </analyzer>
   <analyzer type="query">
      <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      <filter class="solr.SynonymFilterFactory" ignoreCase="true" expand="true" synonyms="synonyms.txt"/>
      <filter class="solr.StopFilterFactory" enablePositionIncrements="true" words="stopwords.txt" ignoreCase="true"/>
      <filter class="solr.WordDelimiterFilterFactory" splitOnCaseChange="0" catenateAll="0" catenateNumbers="0" catenateWords="0" generateNumberParts="1" generateWordParts="1"/>
      <filter class="solr.LowerCaseFilterFactory"/>
   </analyzer>
</fieldType> 
```

感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T13:01:57.080

请找到要创建的字段类型

```
{
  "add-field-type" : {
     "name":"master_keyword_sort",
     "class":"solr.TextField",
     "positionIncrementGap":"100",
     "analyzer" : {
         "tokenizer":{ 
           "class":"solr.KeywordTokenizerFactory" },
        "filters":[{
           "class":"solr.PatternReplaceFilterFactory",
           "pattern":"([^A-Za-z0-9])",
           "replacement":"" ,"replace":"all"},
           {
           "class":"solr.LowerCaseFilterFactory"
           }]}}
} 
```

# sql-server-2008 - SQL Server 2008 时区转换

> ID：11326074
> 
> 赞同：1
> 
> 时间：2012-07-04T09:18:36.497
> 
> 标签：sql-server-2008, timezone, utc

在我的 Web 应用程序中，所有日期值在传递到 SQL 数据库之前都转换为 UTC，然后在应用程序中显示时转换回本地时间。所以底线是数据库中的所有日期都是UTC。

在我开始报告开发之前，它工作得很好。Crystal Reports 没有能力（我可以检测到）进行时区转换，因此我需要在 SQL 中进行转换，然后再将值传递给报表。

SQL Server 似乎具有更有限的转换日期时间值的能力。我看到的唯一功能是`SWITCHOFFSET`. 这个功能的问题是它不知道夏令时，这似乎是一个主要缺陷。在 asp.net 中，我可以传递带有时区的 datetime 值，它会自动将其转换为 UTC 时间，同时考虑到任何需要的夏令时调整。

不过，在 SQL 中`SWITCHOFFSET (SomeDate,"Eastern Time")`，
我现在不得不说`SWITCHOFFSET(SomeDate, "-4:00")`. 但是，如果我从表中提取数据并要求提供夏时制开始的 3 月的所有数据，会发生什么情况？无论如何，其中一些是不正确的。我可以说 -4:00 或 -5:00，但显然不能同时说两者。

是否有其他功能可以对此进行调整，坦率地说，`SWITCHOFFSET`如果它不知道如何进行夏令时转换，它似乎是半生不熟的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:24:00.013

我发现 Crystal Reports 有一个 ShiftDateTime 函数，它可以检测用户的本地时区，然后从 UTC 转换日期。这取决于用户是否正确设置了他们的时区，我认为这在大多数人的计算机上是 98%。

# rrdtool - 值在 RRD 数据库中得到更新，但在执行提取或转储时不反映

> ID：11326075
> 
> 赞同：2
> 
> 时间：2012-07-04T09:18:39.277
> 
> 标签：rrdtool, rrd

我每小时填充一次rrd db。该值在 rrd db 中成功更新，但未更新为档案

每当我尝试使用 rrdfetch 获取数据时，它都会返回 NaN 并且 rrddump 也会显示转储。

但 rrdtool info 显示最后的更新值。

步数是 2000 和 rras

```
'RRA:MIN:0.5:1:44640'
'RRA:MAX:0.5:1:44640'
'RRA:AVERAGE:0.5:1:44640'
'RRA:LAST:0.1:1:44640' 
```

以下是我的 rrdtool 信息输出。

```
filename = "abc.red.prod.rrd"
rrd_version = "0003"
step = 2000
last_update = 1341392733
ds[resume_l].type = "GAUGE"
ds[resume_l].minimal_heartbeat = 2000
ds[resume_l].min = NaN
ds[resume_l].max = NaN
ds[resume_l].last_ds = "22403399"
ds[resume_l].value = 1.6471702915e+10
ds[resume_l].unknown_sec = 0
ds[suspend_l].type = "GAUGE"
ds[suspend_l].minimal_heartbeat = 2000
ds[suspend_l].min = NaN
ds[suspend_l].max = NaN
ds[suspend_l].last_ds = "23203177"
    ds[suspend_l].value = 1.7281112506e+10
    ds[suspend_l].unknown_sec = 0
    rra[0].cf = "MIN"
    rra[0].rows = 44640
    rra[0].cur_row = 31110
    rra[0].pdp_per_row = 1
    rra[0].xff = 5.0000000000e-01
    rra[0].cdp_prep[0].value = NaN
    rra[0].cdp_prep[0].unknown_datapoints = 0
    rra[0].cdp_prep[1].value = NaN
    rra[0].cdp_prep[1].unknown_datapoints = 0
    rra[1].cf = "MAX"
    rra[1].rows = 44640
    rra[1].cur_row = 32625
    rra[1].pdp_per_row = 1
    rra[1].xff = 5.0000000000e-01
    rra[1].cdp_prep[0].value = NaN
    rra[1].cdp_prep[0].unknown_datapoints = 0
    rra[1].cdp_prep[1].value = NaN
    rra[1].cdp_prep[1].unknown_datapoints = 0
    rra[2].cf = "AVERAGE"
    rra[2].rows = 44640
    rra[2].cur_row = 41634
    rra[2].pdp_per_row = 1
    rra[2].xff = 5.0000000000e-01
    rra[2].cdp_prep[0].value = NaN
    rra[2].cdp_prep[0].unknown_datapoints = 0
    rra[2].cdp_prep[1].value = NaN
    rra[2].cdp_prep[1].unknown_datapoints = 0
    rra[3].cf = "LAST"
    rra[3].rows = 44640
    rra[3].cur_row = 8075
    rra[3].pdp_per_row = 1
    rra[3].xff = 1.0000000000e-01
    rra[3].cdp_prep[0].value = NaN
    rra[3].cdp_prep[0].unknown_datapoints = 0
    rra[3].cdp_prep[1].value = NaN
    rra[3].cdp_prep[1].unknown_datapoints = 0 
```

这是 rrdtool dump .. 的输出 .. only selected region

```
 <!-- 2012-07-04 01:06:40 UTC / 1341364000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 01:40:00 UTC / 1341366000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 02:13:20 UTC / 1341368000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 02:46:40 UTC / 1341370000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 03:20:00 UTC / 1341372000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 03:53:20 UTC / 1341374000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 04:26:40 UTC / 1341376000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 05:00:00 UTC / 1341378000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 05:33:20 UTC / 1341380000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 06:06:40 UTC / 1341382000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 06:40:00 UTC / 1341384000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 07:13:20 UTC / 1341386000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 07:46:40 UTC / 1341388000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 08:20:00 UTC / 1341390000 --> <row><v> NaN </v><v> NaN </v></row>
                    <!-- 2012-07-04 08:53:20 UTC / 1341392000 --> <row><v> NaN </v><v> NaN </v></row>
            </database>
    </rra> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:35:01.680

请注意，rrdtool 确实会默默地忽略违反在创建时设置的数据源限制的值......它将改为记录 NaN。使用 updatev 而不是 update 来获得关于存储到 RRA 的内容的即时反馈。

# ruby-on-rails - Rails 查找关联的效率

> ID：11326082
> 
> 赞同：1
> 
> 时间：2012-07-04T09:19:07.497
> 
> 标签：ruby-on-rails, performance, activerecord

我有一个包含用户、帖子和评论的应用程序。用户 has_many Posts, Posts has_many Comments and Comments belongs_to Users and Posts。

在我的视图模板中，我正在循环这样的评论以获取评论者的用户名：

`User.find(comment.user_id).name`

如果我对每个帖子的每个评论都这样做，效率如何？我可以想象将用户名存储在 Comments 表的单独行中可能会更快，但复制数据似乎是错误的。

我是偏执狂，ActiveRecord 是在做一些缓存魔法还是有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:11:44.340

If performance is an issue for you, using a none relational DB, like Mongodb is the way to go.

If you still want to use ActiveRecord, either you use eager loading with `Post.comments.include(:user)` (which will load unused users info - and that's not great), or you can use **caching** techniques.

I find it OK to cache the `user.name` in the comments table, as you suggested, as long as you control the changes that can occur. You can do that by setting callbacks in your `User` model:

```
after_save do |user|
  Comment.where(user_id: user.id).update_all(:username, user.name)
end 
```

This technique is sort of a DB caching, but, of course, you can cache HTML fragments. And a comment block is a good to cache HTML block.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:28:25.917

[渴望加载关联](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Eager+loading+of+associations)

```
class Post < ActiveRecord::Base
  has_many :comments
  # ...
end

class Comment < ActiveRecord::Base
  belongs_to :user
end

comments = @post.comments.includes(:user) 
```

它将预加载用户。

SQL 将如下所示：

```
SELECT * FROM `comments` WHERE `comments`.`post_id` = 42;
SELECT * FROM `users` WHERE `users`.`id` IN (1,2,3,4,5,6) # 1,2,3,4,5,6 - user_ids from comments 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:29:44.847

您可以在初始查询中预加载用户。看到您在 User 和 Comment 之间设置了关联，您可以通过关联访问用户。

假设您有一个控制器方法：

```
def show
  @posts = Post.limit(10).includes(:comments => :user)
end 
```

在您循环时的视图中`@comments`：

```
@posts.each do |post|
  # show post stuff
  post.comments.each do |comment|
    comment.user.name
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:30:17.837

修改

如果您有如下关联，则可以从评论对象本身访问用户`comment.user`

```
class User < ActiveRecord::Base
  has_many :posts
  has_many :comments
end

class Post < ActiveRecord::Base
  belongs_to :user
  has_many :comments
end

class Comment < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
end 
```

# backbone.js - 创建模型时如何获取服务器创建的属性

> ID：11326087
> 
> 赞同：1
> 
> 时间：2012-07-04T09:19:19.903
> 
> 标签：backbone.js

为了创建一个新模型，我只需要传递一个属性：

```
model.save({
    name: 'bar'
}); 
```

然后服务器会为这个模型添加额外的属性，比如 id。

实际上，当我创建新模型时服务器的响应是

> 此请求没有可用的响应数据。

获取服务器创建的额外属性的最佳方法是什么？
我应该修复服务器部分吗？

这是我的代码：

```
var ListView = Marionette.CompositeView.extend({

    // some code        

    events: {
        'click #create-user': 'createUser'
    },

    createUser: function (e) {
        this.collection.create(this.newAttributes(e));
    },

    newAttributes: function (e) {
        return {
            name: $(e.currentTarget).val(),
        };
    }

    appendHtml: function (collectionView, itemView) {
        collectionView.$el.find('ul.list-users').append(itemView.el);
    }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:30:36.987

这个问题与 Marionette 无关，Marionette 只扩展视图，不扩展模型。

Backbone 将自动合并从服务器发回的任何新属性——在客户端没有什么特别需要做的。但要使其正常工作，您的服务器需要返回您想要设置的属性值对的 JSON 对象。

# android - Android gridview保持选中项目

> ID：11326089
> 
> 赞同：19
> 
> 时间：2012-07-04T09:19:22.620
> 
> 标签：android, gridview, view

我有一个包含多个项目的 GridView，但是一旦调用了 onClickListener，这些项目必须保持选中状态。我怎样才能做到这一点？

我已经尝试过`v.setSelected(true)`了，但它似乎不起作用。

```
gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            // Toast.makeText(Project.this, "Red" + position,
            // Toast.LENGTH_SHORT).show(); //position = al catelea element
            v.setPressed(true);
            if (bp == 2) {
                if (position == 0) {
                Square.setSex(R.drawable.girl_body2v);
                Square2.setHair(R.drawable.girl_hair_01v);
                SquareAccesories.setAcc(R.drawable.girl_accessories_01v);
                SquareEyes.setEyes(R.drawable.eyes_1v);
                SquareLips.setLips(R.drawable.lip_1v);
                Square3.setDress(R.drawable.girl_tops_01v);
                SquareShoes.setShoes(R.drawable.girl_shoes_01v);
                SquarePants.setPants(R.drawable.girl_bottom_01v);
                setS(2); 
```

这是 onClickListener 代码的一小部分，因为我有很多案例。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-06-30T11:27:43.843

我认为更好的方法是告诉`GridView`您希望支持选择（检查）项目：

```
gridView.setChoiceMode(GridView.CHOICE_MODE_MULTIPLE); 
```

然后确保**GridView 中的项目实现[Checkable](http://developer.android.com/reference/android/widget/Checkable.html)接口**。这意味着项目可以是`Checkbox`,`ToggleButton`等等，或者您可以`Checkable`自己添加支持 - 例如使 RelativeLayout 可检查。（请参见下面的示例。）

与其他答案相比，大部分工作都由 GridView 本身负责 -`onClickListener`不需要。而不是自己存储状态，只需调用`gridView.getCheckedItemIds()`或类似的方法。

* * *

要使`RelativeLayout`（或任何东西）可检查，请创建它的子类：

```
public class CheckableRelativeLayout extends RelativeLayout implements Checkable {
    private boolean checked = false;
    private static final int[] CHECKED_STATE_SET = { android.R.attr.state_checked };

    public CheckableRelativeLayout(Context context) {
        super(context);
    }

    public CheckableRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CheckableRelativeLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
         final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
         if (isChecked())
             mergeDrawableStates(drawableState, CHECKED_STATE_SET);
         return drawableState;
    }

    @Override
    public boolean isChecked() {
        return checked;
    }

    @Override
    public void setChecked(boolean _checked) {
        checked = _checked;
        refreshDrawableState();
    }

    @Override
    public void toggle() {
        setChecked(!checked);
    }

} 
```

请注意，该方法会`onCreateDrawableState`更新视觉样式。您不必这样做，例如，您可以直接在 setChange 方法中更改背景。

然后使用`CheckableRelativeLayout`GridView 中的项目作为顶视图：

```
<foo.bar.CheckableRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/my_awesome_background"
    ... more stuff
    >
        ...  content of the relative layout
</com.test.CheckableRelativeLayout> 
```

并定义在签入项目时背景如何变化`res/drawable/my_awesome_background.xml`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" > 
     <item android:state_checked="true" >
        <!-- This applies when the item is checked. -->
         <shape android:shape="rectangle"  >
             <solid android:color="#A8DFF4" />
         </shape>
     </item>

    <item>
        <!-- This applies when the item is not checked. -->
        <shape android:shape="rectangle"  >
             <solid android:color="#EFEFEF" />
         </shape>
     </item>
</selector> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-04T11:17:12.517

您想要实现的概念是可能的，但不像您现在的工作方式。

最好和最简单的解决方案是跟踪单击项目的状态并在适配器内为它们提供正确的布局。我已经建立了一个小例子：

**活动**

```
public class StackOverFlowActivity extends Activity {
    GridView gridView;
    MyCustomAdapter myAdapter;
    ArrayList<GridObject> myObjects;

    static final String[] numbers = new String[] { "A", "B", "C", "D", "E",
            "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R",
            "S", "T", "U", "V", "W", "X", "Y", "Z" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myObjects = new ArrayList<GridObject>();
        for (String s : numbers) {
            myObjects.add(new GridObject(s, 0));
        }

        gridView = (GridView) findViewById(R.id.gridView1);

        myAdapter = new MyCustomAdapter(this);

        gridView.setAdapter(myAdapter);
        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3) {
                myObjects.get(position).setState(1);
                myAdapter.notifyDataSetChanged();
            }
        });
    }

    static class ViewHolder {
        TextView text;
    }

    private class MyCustomAdapter extends BaseAdapter  {

        private LayoutInflater mInflater;

        public MyCustomAdapter(Context context) {
            mInflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            GridObject object = myObjects.get(position);
            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_item_icon_text, null);
                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.text);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.text.setText(object.getName());

            if (object.getState() == 1) {
                holder.text.setBackgroundColor(Color.GREEN);
            } else {
                holder.text.setBackgroundColor(Color.BLUE);
            }
            return convertView;
        }

        @Override
        public int getCount() {
            return myObjects.size();
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }
    }
} 
```

**网格对象**

```
public class GridObject {

    private String name;
    private int state;

    public GridObject(String name, int state) {
        super();
        this.name = name;
        this.state = state;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getState() {
        return state;
    }

    public void setState(int state) {
        this.state = state;
    }   
} 
```

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="50dp"
        android:gravity="center"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth" >
    </GridView>

</LinearLayout> 
```

**list_item_icon_text**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-25T21:26:45.290

当您不需要在其他地方重用该代码时，这是 Strix 答案的简洁版本（我认为它比公认的答案更好）。`Checked`您可以在方法中创建一个匿名类，而不是创建一个新类并实现，如 Strix 的答案中那样`Adapter.getView`覆盖，但用. 这是我的适配器的完整代码，它在图库中的选中缩略图周围绘制边框：`onCreateDrawableState``isChecked()``((AbsListView)parent).isItemChecked(position)`

```
public class ImageAdapter extends BaseAdapter {
    private final int[] CHECKED_STATE_SET = { android.R.attr.state_checked };
    public int getCount() {return images.size();}
    public Object getItem(int position) {return images.get(position);}
    public long getItemId(int position) {return position;}

    public View getView(final int position, final View convertView, final ViewGroup parent) {
        final ImageView imageView = new ImageView(getApplicationContext()) {
            @Override public int[] onCreateDrawableState(int extraSpace) {
                final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
                if (((AbsListView)parent).isItemChecked(position)) {
                    mergeDrawableStates(drawableState, CHECKED_STATE_SET);
                }
                return drawableState;
            }
        };
        imageView.setBackground(getResources().getDrawable(R.drawable.my_awesome_background));
        imageView.setScaleType(ImageView.ScaleType.CENTER);
        final byte[] buffer = images.get(position);
        final Bitmap bmp = BitmapFactory.decodeByteArray(buffer, 0, buffer.length);
        imageView.setImageBitmap(bmp);
        return imageView;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-20T20:29:45.477

我知道答案有点老了。但我认为这是最简单的。在您的适配器类中，添加一个包含所选项目位置的变量。将透明度设置为除 GetView 方法中选定的图像之外的所有图像。在 main 方法中的单击处理程序中，保护选定的 ItemPosition。通知适配器他已更改。

**在您的适配器类中，添加一个包含所选项目位置的变量。**

```
public class GridImageAdapter extends BaseAdapter {
       public int selectedImage = 0; 
```

**将透明度设置为所有图像，不包括适配器 GetView 方法中选定的图像。**

```
@Override
public View getView(final int position, View convertView, final ViewGroup parent) {
    int[] images = { R.drawable.walk, R.drawable.run, R.drawable.jump }

    ImageView imageView = new ImageView(mContext);
    if (position < imgMapper.length) {

        imageView.setImageResource(images[position]);

        if (position != selectedImage) {
            imageView.setImageAlpha(50);
        }
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setLayoutParams(new GridView.LayoutParams(150, 150));
    };

    return imageView;
} 
```

**在 main 方法中的单击处理程序中，保护选定的 ItemPosition。通知适配器他已更改**

```
 myGridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            GridImageAdapter myAdapter = (GridImageAdapter) myGridView.getAdapter();
            myAdapter.selectedImage = position;
            myAdapter.notifyDataSetChanged();
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T09:32:36.810

`gridview`must be中的views，`CheckBoxs`这样就可以勾选和取消勾选。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-08T08:08:10.250

```
**You can add tag and check for tag**

 gv.setOnItemClickListener((adapterView, view, i, l) -> {

                int f = gv.getCheckedItemPosition();

                if(view.getTag()=="selected")
                {
                    view.setTag("notselected");
                    String clickedText = gv.getItemAtPosition(i).toString();
                    filterKeywords.remove(clickedText);
                    view.setBackgroundColor(Color.WHITE);
                }
                else
                {
                    view.setTag("selected");
                    String clickedText = gv.getItemAtPosition(i).toString();
                    filterKeywords.add(clickedText);
                    view.setBackgroundColor(Color.GREEN);

                }

                System.out.println("KEYWORDS"+filterKeywords);

            }); 
```

# wpf - 防止 ControlTemplate 中的控件继承全局样式 (WPF)

> ID：11326093
> 
> 赞同：2
> 
> 时间：2012-07-04T09:19:34.860
> 
> 标签：wpf, styles, custom-controls, controltemplate, inheritance

我有这个模板的自定义控件的通用样式。

```
<Style TargetType="{x:Type local:MyType}">        
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:MyType}">                    
                    <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                        <local:MyControl />
                    </Border>
                    ... 
```

如果此控件用于全局设置此样式的项目中：

```
<Style  TargetType="{x:Type Border}">
    <Setter Property="Padding" Value="3" />
    <Setter Property="VerticalAlignment" Value="Top" />
</Style> 
```

但是 MyControl 是一个普通`UserControl`的包含：...

```
<Border .. /> 
```

然后 UserControl 中的边框（位于模板中）也继承了这种样式（填充 3 等）
有没有办法说 ControlTemplate 中的控件不继承这些全局样式？顺便提一下。这是一个通用模板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-11T14:16:22.777

不确定我是否理解正确。做了一些工作，因为我有类似的情况，我的所有控件的样式都是全局指定的，并且在没有 x:key 的情况下自动继承。

我不得不删除某些控件的样式并为某些控件应用不同的样式。

在那种情况下，我创建了单独的样式（例如下面要删除样式），所以只创建了 Empty 样式并在需要的地方和任何地方使用它。

**空样式：**

```
<Grid.Resources>
    <ResourceDictionary>
        <Style x:Key="EmptyStyle"/>
    </ResourceDictionary>
</Grid.Resources> 
```

**适用于控制：**

```
<TextBlock Text="First Name" Style="{StaticResource EmptyStyle}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:56:38.793

您可以使用 ax:Key 将您的样式放入资源字典中，我一直这样做，并且仅当我在控件上指定键时才应用我的样式。

# css - 什么是 CSS 钩子，什么是非常常见的 CSS 钩子？

> ID：11326097
> 
> 赞同：4
> 
> 时间：2012-07-04T09:19:43.830
> 
> 标签：css

我已经了解了 CSS 钩子这个术语，但我不是很清楚。你能给我一些想法吗？

*   什么是 CSS 钩子？
*   最常见的钩子是什么？
*   使用 CSS 钩子的最佳实践是什么？

任何类型的示例和相关链接都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:22:17.517

你能详细说明一下吗？

CSS Hooks 通常被认为是放置在 HTML 中的类或 ID，以允许后端或服务器端语言与这些客户端“钩子”交互

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:32:10.243

> 什么是 CSS 钩子？

CSS Hooks 是一种简单的机制，它为您的元素定义了一种从第三方来源检索其样式的方法。

> 常见的挂钩有哪些？

没有。变化在于你的想象。

> 使用 CSS Hooks 的最佳实践是什么？

查看[JQuery.cssHooks](http://api.jquery.com/jQuery.cssHooks/)。

# matlab - 神经网络中的二维输入

> ID：11326105
> 
> 赞同：1
> 
> 时间：2012-07-04T09:20:26.250
> 
> 标签：matlab, neural-network

我想将一个包含二维输入的单元格提供给 matlab 中的神经网络。输入是一个以二维矩阵 (n*n) 显示的图形。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:41:42.307

I guess that your neural network is 2D, subsequently your input is 1D, which means you will have to give a vector. In your case, this latter would be n²-sized.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T22:33:18.340

只需将整个输入串成一维数组即可：

```
input_vec = reshape(input_mat, length(input_mat)^2, 1);  % assuming your input_mat is square 
```

因此，与其将 10x10（或其他）矩阵输入到您的网络，不如输入一个 100x1 向量。然后在这个向量上训练你的网络。这种方法通常用于教科书字符识别网络，例如阅读[本教程中标题为 MNIST 数据的部分](https://www.tensorflow.org/get_started/mnist/beginners)。

# c++ - C++ IDE Eclipse

> ID：11326111
> 
> 赞同：0
> 
> 时间：2012-07-04T09:20:41.333
> 
> 标签：c++, ide, eclipse-plugin

我正在寻找一个 C++ IDE，通常用于调试目的。特别是，我可以在源代码中导航的地方；说方法定义，成员声明等。

我是一名 Java 开发人员并使用 Eclipse。我在 Eclipse 中创建 J2ME 项目，构建它并最终将它部署在同一个地方。在调试时，我可以很容易地找出我在寻找什么。

对于 C/C++ 支持，我安装了插件“Eclipse C/C++ Development Tools”。安装上述插件后，C/C++ 代码以字体/样式/颜色打开...但无法导航:(

请帮我。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:23:43.867

eclipse 的 cdt 插件对我来说很好用。也许您应该更新到最新版本并确保将您的观点更改为 c++。

另一个很棒的 c++ ide 是 qtcreator。

# css - IE7定位元素隐藏在父元素后面

> ID：11326112
> 
> 赞同：0
> 
> 时间：2012-07-04T09:20:44.273
> 
> 标签：css, internet-explorer-7

我正在努力让 CSS 适合 IE7，我希望在我将电脑扔出窗外之前，这里有人可以帮我一把：p

我做了一个小提琴来说明我的意思：http: [//jsfiddle.net/ZqkEE/](http://jsfiddle.net/ZqkEE/)

带有单词“joepie”的 div 隐藏在 IE7 中的图像后面。

我该如何解决？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:54:59.680

这里有几件事。您在 intro 上的高度为 1，在 .wrp div 上的 line-height 为 0。此外，整个 .intro div 都被推到了右边。我添加了一个左属性并将其移回原位 - [jsfiddle.net/Rpjhc/2/](http://jsfiddle.net/Rpjhc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:17:45.807

似乎IE7中根本没有显示文本。如果您删除 img-tag，您会看到文本不在图像下方，实际上根本不存在。不太确定为什么它不存在，但这里有一些建议：没有指定的左属性，这可能是吗？或者也许 IE7 不喜欢底部属性？

我不是 IE7 专家，但我希望我为您指明了正确的方向！:-)

# html - 让文本在 Firefox 中占据整个文本区域的宽度

> ID：11326114
> 
> 赞同：3
> 
> 时间：2012-07-04T09:20:56.270
> 
> 标签：html, css, firefox, textarea

请在 Firefox 中查看以下小提琴，您会看到 textarea 中的文本行由于文件名过长而在中途被截断，但在 IE 和 Chrome 中，该行占据了 textarea 的整个宽度，并且仅一旦它到达终点就换行。我想在 Firefox 中实现同样的行为，并用我有限的 CSS 技能尝试了所有我能做的事情，但无济于事，所以我想我会停止拔头发，向专业人士寻求帮助。

小提琴：http: [//jsfiddle.net/yGuAy/1/](http://jsfiddle.net/yGuAy/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:43:41.587

没有价值`word-wrap:`并且`text-wrap:`似乎对我有用。但是，您可以通过在链接中使用破折号而不是下划线来省略您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:30:01.220

通过在 textarea 中添加尺寸样式，它可以工作-

```
<textarea cols="70" rows="3" style="width: 675px; height: 30px;">http://www.example.com/some_dir/another_dir/some_really_long_and_complex_file_name.ext</textarea> 
```

但这是临时解决方案，但无法弄清楚为什么 firefox 会这样。我认为问题在于 url 中的“/”。如果我删除它可以工作，但同样我不知道原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:46:03.503

如果您使用 textarea width 属性和 font-size ，您可以获得理想的结果。

[JsFiddle 示例](http://jsfiddle.net/yGuAy/57/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T09:36:16.803

我认为Firefox正在考虑字符串的最后一部分

```
/some_really_long_and_complex_file_name.ext 
```

是一个单词（这是真的），它可能比文本区域中可用的水平空间长，所以它只是将最后一部分放在下一行。因此，如果您尝试增加文本区域的宽度，它将水平放置。

# struts2 - 在struts2的双选框中填充值

> ID：11326118
> 
> 赞同：0
> 
> 时间：2012-07-04T09:21:06.777
> 
> 标签：struts2

我在加载时从数据库动态填充双选框中的值。

我成功地获得了第一个选择框的值，但我没有获得第二个选择框的相应值。

请如果有任何机构可以帮助我获得我真正需要的第二个选择中的值。

我正在使用 MAP 集合。

```
<s:doubleselect label="Control" 
name="controlNameValue" list="control.keySet()" 
doubleName="controlAreaValue" doubleList="control.get(top)" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:18:38.503

使用`moveSelectedOptions(... ..)`on`addToLeftOnClick`和`addToRightOnClick`按钮。

# spring - 无法使用 jetty maven 插件加载外部弹簧配置文件

> ID：11326119
> 
> 赞同：1
> 
> 时间：2012-07-04T09:21:08.797
> 
> 标签：spring, maven, jetty

我尝试在[http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)中使用 jetty-maven-plugin 启动 webapp 。但我想外部化我的环境配置文件。这是我的项目层次结构：

```
myapp-webapp
- src
- - test
- - - ressources
- - - java
- - main
- - - ressources
- - - java
- - - webapp
- - - - WEB-INF
- - - - META-INF
- - - - templates
- - - - ressources
- - - - index.xhtml
+ target (I don't detail it)
- configuration
- - local
- - - databaseLocal.properties
- - - ... others config files
- - dev
- - test
- - prod 
```

这是我的 pom 文件：

```
<profiles>
    <profile>
    <id>myapp-work</id>
    <activation>
        <property>
            <name>!env</name>
        </property>
    </activation>
    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>${jetty.version}</version>
                <configuration>
                    <webApp>
                        <contextPath>/</contextPath>
                        <extraClasspath>configuration/local/</extraClasspath>
                    </webApp>
                    <scanTargetPatterns>
                    <scanTargetPattern>
                      <directory>configuration/local/</directory>
                      <includes>
                        <include>**/*.xml</include>
                        <include>**/*.properties</include>
                      </includes>
                    </scanTargetPattern>
                  </scanTargetPatterns>
                </configuration>
                <dependencies>
                    <dependency>
                    ...
                </dependencies>
            </plugin>
            ...
        <plugins> 
```

我正面临这个错误 2012-07-04 10:33:26.460:WARN::Failed startup of context JettyWebAppContext@29b829b8@29b829b8/,file:/C:/DEV/RTCworkspace/myapp/myapp-webapp/src/ main/webapp/,file:/C:/DEV/RTCworkspace/myapp/myapp-webapp/src/main/webapp/ org.springframework.beans.factory.BeanInitializationException: 无法加载属性；嵌套异常是 java.io.FileNotFoundException：类路径资源 [databaseLocal.properties] 无法打开，因为它不存在

我找到了很多信息，但没有任何效果： - [http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin) -[无法在 Jetty + Spring + Tiles 部署中找到配置文件](https://stackoverflow.com/questions/9896694/cant-find-config-files-in-jetty-spring-tiles-deployement) - [maven-jetty 插件没有使用正确的路径](https://stackoverflow.com/questions/6427600/maven-jetty-plugin-not-using-correct-paths)

我也尝试：${basedir}/${externalConfiguration.directory}

这是启动日志的摘录（我的 webapp 名称是 cct，直到现在我才替换它）：

```
[INFO] webAppSourceDirectory C:\DEV\RTCworkspace\cct\cct-webapp\src\main\webapp does not exist. Defaulting to C:\DEV\RTCworkspace\cct\cct-webapp\src\main\webapp
[INFO] Reload Mechanic: automatic
[INFO] Classes = C:\DEV\RTCworkspace\cct\cct-webapp\src\main\webapp\WEB-INF\classes
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\database.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\databaseLocal.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\efrit-security.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\efrit.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\efrit_logback.xml
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\ldap.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\logback.properties
[INFO] Adding extra scan target from pattern: C:\DEV\RTCworkspace\cct\cct-webapp\configuration\local\logback.xml
[INFO] Context path = /
[INFO] Tmp directory = C:\DEV\RTCworkspace\cct\cct-webapp\target\tmp
[INFO] Web defaults = org/eclipse/jetty/webapp/webdefault.xml
[INFO] Web overrides =  none
[INFO] web.xml file = file:/C:/DEV/RTCworkspace/cct/cct-webapp/src/main/webapp/WEB-INF/web.xml
[INFO] Webapp directory = C:\DEV\RTCworkspace\cct\cct-webapp\src\main\webapp
[INFO] Starting jetty 7.1.6.v20100715 ...2012-07-04 11:16:56.349:INFO::jetty-7.1.6.v20100715 
```

所以他说，他看到了我的配置文件，但他无法读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:24:35.543

I try the precedent answer and it's not working. In fact , I found the problem. A profil hide a bean wich load this file. I had the profile and it's work well. It's an impact to spring 3.1 migration.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:37:23.950

尝试设置：

```
<directory>configuration/local/</directory> 
```

至：

```
<directory>${basedir}/configuration/local</directory> 
```

# vim - 如何映射 在 vim 中？

> ID：11326120
> 
> 赞同：8
> 
> 时间：2012-07-04T09:21:11.980
> 
> 标签：vim, keymapping

我想映射 ctrl+leader 键。是否可以？

试过：`:nnoremap <c-leader> :CtrlP<CR>`

它不起作用。

（ctrlp 绑定与 yankring 绑定冲突）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T09:59:47.483

`<Leader>`是 Vim 中的特殊键符号；因此，它不能与诸如`C-`. 假设它的默认设置（即`\`），你可以使用这个：

```
nnoremap <c-\> :CtrlP<CR> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T10:13:49.760

这里有两个问题：

1.  您没有阅读 CtrlP 的文档，您会发现：

    ```
    Use this option to change the mapping to invoke CtrlP in Normal mode:
        let g:ctrlp_map = '<c-p>' 
    ```

2.  `<leader>`应该是在映射中使用常用修饰键（Alt、Ctrl、Shift、Cmd）的跨平台替代方案。

    通常，您将使用以下方式`<leader>`代替`<Ctrl>`：

    ```
    nnoremap <leader>p :CtrlP<CR> 
    ```

您的这一行`~/.vimrc`可能会解决您的问题：

```
let g:crtlp_map='<F11>' 
```

虽然这对我的 CtrlP 映射没有多大帮助：

```
nnoremap <leader>f :CtrlP<CR>
nnoremap <leader>b :CtrlPBuffer<CR>
nnoremap <leader>m :CtrlPMRUFiles<CR>
nnoremap <leader>t :CtrlPTag<CR> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-10T17:33:24.817

例如将领导键映射到空间试试这个......

`let mapleader=" "`

# android - 如何从广播接收器发送电子邮件？

> ID：11326121
> 
> 赞同：0
> 
> 时间：2012-07-04T09:21:23.673
> 
> 标签：android, email

我正在实施一个应用程序。

基于我的应用程序，我创建了名为“RepeatingAlarm.java”的类

我的 RepeatingAlarm 类扩展了广播接收器。

我每隔一小时就给上面的班级打电话。

我的要求是，当这个类被调用时

我想从 sdcard 获取文件并通过电子邮件发送此文件。

如果有人知道解决方案，请帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:41:42.213

在您的 BroadcastReceiver 中的 onReceive 方法中添加这些内容。

```
 File file= new File(Environment.getExternalStorageDirectory()
                    + "/filefolder/"+"filename");
Uri u1  =   null;
u1  =   Uri.fromFile(file);

Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Sending a file");
 sendIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] 
        {"me@gmail.com"}); 
sendIntent.putExtra(Intent.EXTRA_STREAM, u1);
sendIntent.setType("text/html");
context.startActivity(Intent.createChooser(sendIntent , "Send mail...")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:11:36.290

这是一个完整的示例，它向其他人发送背景电子邮件（使用 gmail 帐户），当然还有附件。[使用 GMAIL 帐户发送带附件的电子邮件。](http://pastie.org/4185959)

如果您不需要 ZipUtility 类，请将其删除并根据需要使用它

# javascript - html-javascript：每当触发事件时页面都会刷新

> ID：11326122
> 
> 赞同：1
> 
> 时间：2012-07-04T09:21:23.767
> 
> 标签：javascript, html, events

我有一个带有按钮等的 html 页面，我为其分配了事件侦听器。每当单击其中一个按钮时，页面就会恢复到其原始状态，就好像浏览器已关闭并再次打开一样。因此，如果我在其中输入了一些信息的文本字段，一旦单击按钮，它们就会被清除，即使它的事件侦听器什么也不做。

同样，如果我将此事件侦听器包含在 html 中`<body onload="pageLoaded();">`，则只要单击按钮，就会调用 pageLoaded() 函数。

为什么会发生这种情况，我该如何防止它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:23:11.837

大概您正在使用提交按钮，除非您取消默认操作，否则它将提交它们所在的表单。

```
eventObject.preventDefault(); 
```

请参阅[文档](https://developer.mozilla.org/en/DOM%3aevent.preventDefault)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:25:21.677

也许您的单击事件侦听器已添加到表单中的链接或按钮。如果是这样，您可以`return false`在侦听器的末尾添加一个以防止执行默认行为。

```
var link = $("#mybutton");
link.click(function() {
    alert("clicked");
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T18:20:43.207

将按钮类型设置为“按钮”将解决此问题。默认类型是“提交”，正如其他人所说，它将提交表单。

```
<button type="button">Button</button> 
```

# binding - Ember.TextArea 通过车把助手设置输入

> ID：11326123
> 
> 赞同：2
> 
> 时间：2012-07-04T09:21:25.157
> 
> 标签：binding, textarea, ember.js, helper

我有一个 Ember.Handlerbars.JSON 助手，它将给定值格式化为缩进的 JSON 字符串。我想像这样设置文本区域的内容（值）：

```
 {{#view Ember.TextArea}}
       {{JSON someValue}}
    {{/view}} 
```

这不起作用，因为我应该设置 textareas 的“值”属性。

但是，这也行不通

```
 {{view Ember.TextArea valueBinding="JSON someValue"}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:57:30.547

您可以通过使用计算属性来解决此问题，请参阅[http://jsfiddle.net/pangratz666/3A33H/](http://jsfiddle.net/pangratz666/3A33H/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{#with App.jsonController}}
        {{view Ember.TextArea valueBinding="formatted" rows="10" }}    
    {{/with}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({
    formatJSON: function(obj) {
        return JSON.stringify(obj, null, '\t');
    }
});

App.jsonController = Ember.Object.create({
    content: {
        abc: 123,
        foo: 'hello'
    },

    formatted: function() {
        var obj = this.get('content');
        return App.formatJSON(obj);
    }.property('content')
});​ 
```

* * *

*更新您的评论*：

在评论（[http://jsfiddle.net/4QNur/](http://jsfiddle.net/4QNur/)）的小提琴中，您声明`{{view Ember.TextArea valueBinding="JSON App.someComplexValue"}}`：这不起作用，因为`valueBinding`将路径作为参数而不是表达式，例如`JSON App.someComplexValue`. 如果要绑定到转换后的值，只需创建一个计算属性并绑定到它。这就是 Ember 做这些事情的方式......

在您原来的问题中，您有以下代码：

```
{{#view Ember.TextArea}}
    {{JSON someValue}}
{{/view}} 
```

这在这种情况下不起作用，因为`value`for`Ember.TextArea`只能通过 a`value`分别设置`valueBinding`：

```
{{view Ember.TextArea valueBinding="App.controller.transformedComplexValue" }} 
```

# json - 使用 Spring Data JPA 将 JSON 作为字段存储在 PostgreSQL 中

> ID：11326124
> 
> 赞同：4
> 
> 时间：2012-07-04T09:21:26.843
> 
> 标签：json, spring, postgresql, jpa-2.0, spring-data-jpa

我想要一个包含两列的特定表，一个 ID 和一个我将在其中存储 JSON 对象的字段。我正在使用 Spring Data JPA。

我正在考虑这一行，但我不确定：

```
@Entity
@Table(name = "some_table")
public class SomeTable {

    @Id
    @Column(name = "id", unique = true)
    @GenericGenerator(name = "uuid", strategy = "uuid2")
    @GeneratedValue(generator = "uuid")
    private UUID id;

    // getters and setters for id here..

    // here to be the field for storing JSON objects and it's getters and setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:05:10.797

答案取决于您使用的 PostgreSQL 版本。如果您使用的是 9.1，请查看[https://bitbucket.org/adunstan/json_91](https://bitbucket.org/adunstan/json_91)，它为您提供了与 9.2 相同的功能。如果它是旧版本，您将不得不使用文本或反向移植该模块。

# wcf - wcf 在局域网中传输非常慢

> ID：11326130
> 
> 赞同：0
> 
> 时间：2012-07-04T09:22:01.700
> 
> 标签：wcf, performance

我有一个服务，它有一种从客户端向服务发送文件的方法。我注意到，当我在同一台机器上运行客户端和服务并且我要发送的文件也在本地机器上时，一切都运行得非常快。

但是，我的客户端和服务在同一台机器上，但文件在另一台计算机上，那么速度很慢。

如果我将文件从一台计算机复制到另一台计算机，速度很快，所以问题似乎不是带宽。

我尝试使用 tcp 和 basicHttp Binding，但结果是一样的。

如果客户端在其他计算机上，我尝试发送时也会出现此问题。

谢谢。

编辑：如果我打开任务管理器，在计算机的网络选项卡中运行客户端，我可以看到网络的使用率约为 0.5%。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:51:27.083

传输大文件的 WCF 不是最佳方法，因为 WCF 有很多层和开销，这些层和开销加起来会导致文件传输延迟。此外，您可能没有编写 WCF 服务来连续读取字节块并写入响应。您可能正在执行 File.ReadAll 然后只返回整个字符串，这将导致服务器上的大量同步读取、大量内存分配，然后将大字符串写入 WCF 缓冲区，进而写入 IIS缓冲区等。

传输大文件的最佳方式是使用 HttpHandlers。您可以只使用 Response.TransmitFile 来传输文件，IIS 将以最佳方式传输文件。否则，您始终可以一次读取 8k，然后写入响应流并在每次写入 8k 后**调用 Flush 。**

如果你因为任何奇怪的原因不能使用 HttpHandler，你能告诉我 WCF 代码吗？

另一件事。当 IIS 出现在图片中时，您可能期望的性能根本不可能。首先，如果您只是将文件直接托管在网站上并通过执行 WebClient.downloadString 下载文件，您应该测量 IIS 传输文件需要多长时间。

另一件事是，你是如何下载的？通过浏览器？或通过客户端代码？如果您尝试一次性传输整个文件并尝试将其保存在字符串中，客户端代码也可能不是最佳的。例如，WebClient.DownloadString 将是最糟糕的方法。

# django - MongoEngine 查询获取帖子的作者和评论作者（同时）

> ID：11326132
> 
> 赞同：1
> 
> 时间：2012-07-04T09:22:12.983
> 
> 标签：django, mongodb, mongoengine

我正在开发一个使用**Django 和 MongoDB**作为我的数据库的 Web 项目（使用 MongoEngine 连接它们）。我必须创建 Celery 任务来清理旧用户帐户。一个月后我只需要清理没有任何内容的懒惰用户帐户（懒惰用户在他们第一次连接到网站时自动创建用户）。什么算作内容？来自用户的任何帖子或对任何帖子的评论。

我是这样做的，但如果可能的话，我想将其转换为查询：

```
def clean_inactive_lazy_users():
    users_with_content = []

    for post in api_models.Post.objects:
        users_with_content.append(post.author)
        for comment in post.comments:
            users_with_content.append(comment.author)

    users_with_content = list(set(users_with_content))

    for user in account_models.User.objects:
        if not user.is_authenticated() and (timezone.now() - user.connection_last_unsubscribe).days >= settings.DELETE_LAZY_USER_AFTER_DAYS and user not in users_with_content:
            user.delete() 
```

模型如下所示：

基础.py

```
class AuthoredEmbeddedDocument(mongoengine.EmbeddedDocument):
    author = mongoengine.ReferenceField(models.User, required=True)

class AuthoredDocument(mongoengine.Document):
    author = mongoengine.ReferenceField(models.User, required=True) 
```

api_models：

```
from . import base

class Comment(base.AuthoredEmbeddedDocument):
    """
    This class defines document type for comments on posts.
    """

class Post(base.AuthoredDocument):
    """
    This class defines document type for posts.
    """ 
```

帐户模型：

```
class User(auth.User):
    def is_authenticated(self):
        return self.has_usable_password() 
```

希望我提供了足够的信息，以便您可以帮助我解决问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:34:41.773

我认为有几种方法可以让你清理它。

您可以通过以下方式获取帖子的所有作者唯一 ID：

```
user_ids_with_posts_list = Posts.objects.scalar('author.id', flat=True).distinct('author.id') 
```

[标量](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet.scalar)应该给你一个作者 ID 列表而不是文档对象，并且[distinct](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.queryset.QuerySet.distin) 应该确保它们是唯一的。这会将您在 python 中所做的事情推到 mongodb

然后，您可以为用户构造一个查询。您可以将您的几天前更改为日期。检查什么条件`has_usable_password`？

```
start_time = timezone.now() - timedelta(days=DAYS_AGO_CONSTANT)

invalid_users = User.objects.filter(connection_last_unsubscribe__lte=start_time,
                                     password__isnull=True).exclude(pk__in=user_ids_with_posts_list)
invalid_users.delete() 
```

# jakarta-ee - JavaEE 命名文件和包基础知识

> ID：11326135
> 
> 赞同：0
> 
> 时间：2012-07-04T09:22:18.203
> 
> 标签：jakarta-ee

开发小型样例 BookStore 应用程序，如果有人向我解释，请提出问题。

将 Model 2 架构 (MVC) 模式与 JSP 和 Servlet 结合使用。希望添加 CDI 依赖注入。

抱歉，添麻烦了。

**1 - 命名约定。**

在屏幕截图中。我的文件夹结构和命名文件是否正确？

前任：

我将我的文件命名为：

*BookRepository.java 实现 IBook* = 数据访问层。添加、更新、删除等方法

*IBook.java* = 上述方法的接口。

我正在关注的在线教程使用文件名，例如

*BookRepositoryImpl.java* = CRUD 方法实现

*BookRepository* = 接口

**问：**我们在 JavaEE 中命名文件时有什么特定约定吗？

**你如何命名你的文件和包？**

![书店应用](../Images/3a1aa8c3bbe747ebb6d7340362e7e9ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:46:50.670

在 Java EE 中命名这些工件没有任何一种且唯一的真正约定。

`Book`但是，如果您的实体/模型被调用，它确实感觉有点奇怪，那`IBook`是相应 DAO/Repository 的接口。我希望那是`IBookRepository`相反的。

我提到了关于这些术语没有任何真正的约定，但是已经说过，`ISomething`接口在 Java 中不像在 C# 中那样常见。Eclipse 使用这种约定，其他一些项目也使用这种约定，但并不常见。

更常见`BookRepository`的是用于接口，然后`SomeTechBookRepository`用于实现，其中“SomeTech”可以是例如“JPA”或“JDBC”。还要考虑术语`DAO`而不是`Repository`.

Java EE 的另一个最新趋势是，如果您还不需要它的存储库/dao 接口（这个话题值得商榷）。如果您使用`BookDAO`实现类的命名约定并且没有接口，那么稍后制作`BookDAO`接口并添加例如`JPABookDAO`.

最后，基于 JSP / Servlet 的方法在 Java EE 中已经有些过时了。Java EE 带有一个开箱即用的 MVC 框架 (JSF)，并支持服务/DAO (EJB) 和持久性 (JPA)。有关这些技术的 CRUD 示例，请参阅：http: [//jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces](http://jdevelopment.nl/sample-crud-app-with-jsf-and-richfaces)

# python - Python exec 中的作用域

> ID：11326137
> 
> 赞同：4
> 
> 时间：2012-07-04T09:22:19.123
> 
> 标签：python, scope, exec, globals, locals

当一个变量/函数在一个内部定义时，`exec`它似乎转向`locals()`了`globals()`我如何改变这种行为？仅当您将全局和本地字典传递给`exec`.

例子：

```
exec("""
a = 2

def foo():
    print a

foo()""") in {},{} 
```

当你尝试这个时：

```
NameError: global name 'a' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:04:35.433

乍一看，这对我来说也很奇怪。但是有了更多的输出，我找到了原因：

```
>>> g, l = {}, {}
>>> print id(g), id(l)
12311984 12310688
>>>
>>> exec '''
... a = 2
... print 'a' in globals(), 'a' in locals(), id(globals()), id(locals())
... def f():
...     print 'a' in globals(), 'a' in locals(), id(globals()), id(locals())
... f()
... ''' in g, l
False True 12311984 12310688
False False 12311984 12311264 
```

如[http://effbot.org/pyfaq/what-are-the-rules-for-local-and-global-variables-in-python.htm](http://effbot.org/pyfaq/what-are-the-rules-for-local-and-global-variables-in-python.htm)所述：

> 在 Python 中，仅在函数内部引用的变量是隐式全局的。如果一个变量在函数体内的任何地方都被赋予了一个新值，那么它就被认为是一个局部变量。如果一个变量在函数内部被赋予了一个新值，那么该变量是隐式本地的，您需要将其显式声明为全局。

因此，一种解决方案是对全局变量和本地变量使用相同的 dict：

```
>>> l = {}
>>> exec '''
... a = 2
... def f():
...     print a
... f()
... ''' in l, l
2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T09:42:34.083

如果`a`不是全球性的，那就让它成为全球性的......

```
exec("""
global a
a = 2

def foo():
    print a

foo()""") in {}, {} 
```

# maven - 使用 maven 执行 acceleo 项目

> ID：11326139
> 
> 赞同：0
> 
> 时间：2012-07-04T09:22:33.820
> 
> 标签：maven, acceleo

在我的项目中，我正在使用插件从 eclipse 执行 acceleo 项目。我有 generate.mtl 和 generate.java。执行是通过使用 run as 配置并选择 acceleo 应用程序来完成的。此配置将 generate.java 作为主类作为输入，并将 uml 文件作为模型。它提供了一些 atl 文件作为输出。

一切正常，文件被执行并产生输出。我现在正在尝试通过使用 MAVEN 来自动化这个过程。有人可以给我一些提示吗？即使是基本的，因为是 MAVEN 的新手。如何使用与上述相同的参数执行 mtl 文件？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:36:39.293

前几天我一直在研究这个话题，并提出了一个在这里解释的解决方案：http: [//lbroudoux.wordpress.com/2012/07/24/launching-acceleo-generation-from-maven](http://lbroudoux.wordpress.com/2012/07/24/launching-acceleo-generation-from-maven)。让我知道它是否对您有帮助。

问候，

洛朗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:16:08.273

为您的主模块生成的 Java 类有一个入口点 ( `public static void main(String[])`)，可以像这样从 maven 调用：http: [//www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from -行家/](http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/)

您只需将模型的路径、输出文件夹以及一些额外的参数（如有必要）作为参数提供。

# c# - 如何在简单的方法中正确使用 try-catch？

> ID：11326142
> 
> 赞同：0
> 
> 时间：2012-07-04T09:22:42.260
> 
> 标签：c#, .net

我想确保我的类是健壮的——即使它们很简单并且对于有经验的程序员来说似乎很愚蠢。

假设我有一个如下所示的方法，它接受一个字符串 [] 并将其作为一个 int [] 返回。

```
public static int[] GetIntArrayFromStringArray(string[] stringArray)
    {
        int i = 0;
        int[] ints = new int[stringArray.Length];
        foreach (var str in stringArray)
        {
            ints[i++] = (str != "" ? int.Parse(str) : 0);
        }
        return ints;
    } 
```

使用 try-catch 并抛出异常的最佳选择是什么？当我尝试使用 try-catch 时，我的变量似乎不在范围内，但我需要它们在 try-catch 中以捕获 stringArray 为空的任何错误！

也许我应该使用这个？

```
 if (stringArray == null) //do something ... 
```

但不确定发生错误时该怎么办......我是返回 null int[] 还是抛出异常？

*（我还必须检查 int.Parse(str) 是否失败 - 我正在处理那个但希望它可能在 try-catch 块中！）*

正如我所说，这些都是简单的任务，我想在我养成太多坏习惯之前尝试并改正。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:27:10.183

您可以改用 int.TryParse() 。

[http://msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:29:52.753

1.  如果*stringArray*为 null，则立即抛出*NullArgumentException*。
2.  尝试一些更简单的转换：

    return stringArray.Select(s => IntParseOrDefault(s, 0)).ToArray();

IntParseOrDefault*就像*这样：

```
int IntParseOrDefault(string s, int defaultVal)
{
    int i;
    if (!int.TryParse(s, out i)) i = defaultVal;
    return i;
} 
```

如果您希望方法在*任何*字符串不是有效整数时失败，则不要使用默认值，而是在*TryParse*失败时抛出*InvalidArgumentException 。*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:28:59.223

这里有一个例子

```
 foreach (string str in stringArray)
        {
            int nr = 0;
            int.TryParse(str, out nr);

            if (nr > 0)
                ints[i++] = nr;
        } 
```

这是完整的代码

```
public static int[] GetIntArrayFromStringArray(string[] stringArray)
{
    if (stringArray == null || stringArray.Length == 0)
        throw new ArgumentNullException("string array is null or empty");

    int i = 0;
    int[] ints = new int[stringArray.Length];
    foreach (var str in stringArray)
    {
        int nr = 0;
        int.TryParse(str, out nr);
        if (nr > 0)
            ints[i] = nr;
        i++;
    }
    return ints;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:30:14.217

以下是使用 try - catch 的方法：

```
public static int[] GetIntArrayFromStringArray(string[] stringArray)
{
    int i = 0;
    int[] ints = null;
    try {
        ints = new int[stringArray.Length];
        foreach (var str in stringArray)
        {
            ints[i++] = (str != "" ? int.Parse(str) : 0);
        }
    }
    catch {
         // Throw custom exception
    }
return ints;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T09:31:38.203

我会在 catch-block 中抛出一个自定义异常。因此，您班级的用户可以捕获此异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T09:32:19.673

```
public static int[] GetIntArrayFromStringArray(string[] stringArray)
    {
        int i = 0;
        int[] ints;
        int num;
        if (stringArray == null && stringArray.Length > 0)
        {
        ints = new int[stringArray.Length]
        foreach (var str in stringArray)
        {
            if (string.IsNullOrEmpty(str) && int.TryParse(str, num))
            {
            ints[i++] = num;
            }  
        }
        }
        return ints;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T09:32:25.980

```
 public static int[] GetIntArrayFromStringArray(string[] stringArray)
    {
        if (stringArray == null)
        {
            throw new ArgumentNullException("stringArray");
        }

        int count = stringArray.Length;
        int[] ints = new int[count];
        for (int i = 0; i < count; i++)
        {
            int intValue;
            ints[i] = int.TryParse(stringArray[i], out intValue) ? intValue : 0;
        }
        return ints;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-04T09:33:18.453

.NET Framework 中的许多在无效输入上引发异常的方法都有非引发对应项，通常以 为前缀`Try`，而是返回一个布尔值。例如，在 的情况下`int.Parse`，您可以更轻松地调用`int.TryParse`，例如：

```
public static int[] GetIntArrayFromStringArray(string[] stringArray)
{
    int i = 0;
    int[] ints = new int[stringArray.Length];
    foreach (var str in stringArray)
    {
        int a = 0
        int.TryParse(str, out a)
        ints[i++] = a;
    }
    return ints;
} 
```*

# osgi - 对 OSGi 包进行分组以制作连贯的“应用程序”的最佳方式是什么

> ID：11326143
> 
> 赞同：11
> 
> 时间：2012-07-04T09:22:45.900
> 
> 标签：osgi

“OSGi 方式”是开发包含离散的、连贯的功能块的单独包。有时这些包包含实用程序类，有时它们依赖于实用程序类并设置自己的 OSGi 服务。

另一方面，用户不太可能接触到捆绑软件。他们更关心*应用程序*，即执行任务或解决问题的软件。通常，应用程序将使用多个包（例如，通过 Import-Package 导入）来执行其任务。

**在 OSGi 世界中形式化这种关系的最佳方式是什么？**一个示例要求是向用户显示*应用程序*的当前版本号（不是捆绑包）一样简单。如何发现这个版本号？

Eclipse 有一个称为“功能”的概念，但这不是 OSGi 标准。

Peter Kriens[写过关于 OSGi 应用程序](http://blog.osgi.org/2008/07/osgi-application-grouping.html)的文章，他的文章很有道理。我从中得出的结论是，应用程序可以映射到捆绑包。只是捆绑包以某种方式使用了其他捆绑包。但是，如果要使用 Import-Package 创建应用程序包，从开发的角度来看，我不认为这是可行的。

一种方法可能是使用 Require-Bundle 并拥有自己的版本的“应用程序包”，但 Require-Bundle 在 OSGi 世界中是不受欢迎的。

然而，使用 Import-Package 来导入具有所需版本的所有所需包，给开发人员增加了**很大**的维护开销，我认为这是不可行的。每次进行最小的更改时，即使是实现包，也必须更新包版本，然后在“应用程序包”中更新对包版本的依赖关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:17:30.397

框架就是应用程序……恕我直言，OSGi 世界中最大的错误是将 OSGi 视为多租户框架，它不是为此目的而设计的，也不适合。在一个框架内部，有很高的内聚性，所有注册的服务都是**你的**服务。OSGi 的架构模型允许您从通过服务连接的松散耦合组件编写应用程序。恕我直言，到目前为止，它在软件中是最好的（尽管不幸的是，会有很多缺失的组件会出现）。

在 bndtools 中，我们竭尽全力帮助这个模型。bndtools bndrun 文件基本上是您可以部署的应用程序。bnd 可以将此 bndrun 文件转换为带有 Main-Class 清单头的可运行 Jar。（并且使用 JPM，它可以很容易地部署在任何系统上。）

所以工作流基本上是：设计你的服务（==架构），找到标准组件，开发缺失的组件，测试组件，测试集成，然后把整个东西变成一个可运行的 JAR（或 WAR）。

显然，如果需要，您仍然可以在单个 VM 中运行多个框架，但永远不要在同一个框架中运行不同的不相关应用程序，这不是一个好主意，生活已经够艰难了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T10:17:36.707

我认为您正在寻找的词是“子系统”，我认为有一个 OSGi 草案规范。在那里。

我个人的看法：

构建你的包并将它们存储在某个地方（例如一个 Sonatype Nexus 服务器，我对它非常满意，它甚至支持 OBR 并且对生成 p2 数据的支持有限）

然后，“应用程序”是从该存储库中选择具有特定版本的捆绑包，您可以再次对其进行版本控制。

目前还没有真正的标准，我认为此时您需要选择其中一个非标准的标准。更改为标准版本甚至支持多个版本的成本应该不会那么高。

[这些幻灯片](http://www.slideshare.net/mfrancis/subsystems-for-those-occasions-where-bundles-are-just-too-small-graham-charters)提到了所有这些

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T10:18:31.883

如果您使用 OBR 之类的解析器或新的 R5 解析器，则使用`Import-Package`不一定会产生大量维护开销。

不过，`Require-Bundle`方法也是可以的。一个“应用程序”通常由少量（例如 1-5 个）“有趣的”捆绑包组成。然后是所有其他依赖项，例如依赖项、SCR、蓝图等。因此，您可以创建一个顶级应用程序包，用于`Require-Bundle`引用一小部分有趣的包，然后所有其他依赖项都使用`Import-Package`.

# c++ - 创建 Windows 服务和批处理文件

> ID：11326151
> 
> 赞同：0
> 
> 时间：2012-07-04T09:23:14.803
> 
> 标签：c++, windows, windows-services

我想创建将在启动时运行批处理文件的 Windows 服务。我知道 API 之类的`createservice`，但我想要的是当我说我想用参数调用我的批处理文件时`Start service`，当我说停止时我想用参数调用同一个批处理文件`Service Control Manager``start``stop`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:19:59.533

每当您执行任何 Windows 服务操作（例如启动/停止/暂停服务）时，您通过 RegisterServiceCtrlHandler() 注册的服务主控制器处理程序函数都会接收诸如 SERVICE_CONTROL_PAUSE、SERVICE_CONTROL_CONTINUE、SERVICE_CONTROL_STOP 等消息...

您可以创建单独的函数来调用具有不同输入参数的 bat 文件，并且可以在收到适当的服务消息时调用这些函数。

void ServiceMainCntrlHandler(unsigned long request) { switch(request) { /* 收到服务暂停信号 */ case SERVICE_CONTROL_PAUSE: // 将服务当前状态改为暂停 ServiceStatus.dwCurrentState = SERVICE_PAUSED; SetServiceStatus (hStatus, &ServiceStatus);

```
 // TODO: Call appropriate function
  break;

/* Received service continue signal */
case SERVICE_CONTROL_CONTINUE:
  // Change the service current status to started
  ServiceStatus.dwCurrentState  = SERVICE_RUNNING;
  SetServiceStatus (hStatus, &ServiceStatus);

  // TODO: Call appropriate function
  break;

/* Received service stop signal */
case SERVICE_CONTROL_STOP:
  // Change the service current status to stopped
  ServiceStatus.dwWin32ExitCode = 0;
  ServiceStatus.dwCurrentState  = SERVICE_STOPPED;
  ServiceStatus.dwCheckPoint        = 0;
  ServiceStatus.dwWaitHint      = 0;
  SetServiceStatus (hStatus, &ServiceStatus);

  // TODO: Call the function which will invoke the bat file with input parameter as "stop"
  break;         
default:  break; 
```

}
}

# android - 在后台堆栈上不调用片段 onResume() 和 onPause()

> ID：11326155
> 
> 赞同：219
> 
> 时间：2012-07-04T09:23:31.520
> 
> 标签：android, android-fragments, onresume, back-stack

我在一个活动中有多个片段。在一个按钮上单击我开始一个新的片段，将它添加到后台堆栈。我自然希望调用`onPause()`current Fragment 和`onResume()`new Fragment 的方法。那么它没有发生。

## 登录片段.java

```
public class LoginFragment extends Fragment{
  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
      final View view  =   inflater.inflate(R.layout.login_fragment, container, false);
      final FragmentManager mFragmentmanager =  getFragmentManager();

      Button btnHome  = (Button)view.findViewById(R.id.home_btn);
      btnHome.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view){
           HomeFragment fragment    = new HomeFragment();
           FragmentTransaction ft2   =  mFragmentmanager.beginTransaction();
           ft2.setCustomAnimations(R.anim.slide_right, R.anim.slide_out_left
                    , R.anim.slide_left, R.anim.slide_out_right);
           ft2.replace(R.id.middle_fragment, fragment);
           ft2.addToBackStack(""); 
           ft2.commit();    
         }
      });
  }

  @Override
  public void onResume() {
     Log.e("DEBUG", "onResume of LoginFragment");
     super.onResume();
  }

  @Override
  public void onPause() {
    Log.e("DEBUG", "OnPause of loginFragment");
    super.onPause();
  }
} 
```

## HomeFragment.java

```
public class HomeFragment extends Fragment{
  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
     final View view  =   inflater.inflate(R.layout.login_fragment, container, false);
  }

  @Override
  public void onResume() {
     Log.e("DEBUG", "onResume of HomeFragment");
     super.onResume();
  }

  @Override
  public void onPause() {
     Log.e("DEBUG", "OnPause of HomeFragment");
     super.onPause();
  }
} 
```

我所期待的是，

1.  单击按钮时，LoginFragment**被****HomeFragment**替换 ，**LoginFragment**`onPause()`和HomeFragment **被**调用**`onResume()`**
*****   当按下返回时，会**弹出 HomeFragment**并看到**LoginFragment**`onPause()`，并调用**HomeFragment**和**LoginFragment** 。`onResume()`****

 ******我得到的是，

1.  单击按钮时，**HomeFragment**正确替换 **LoginFragment**，调用 HomeFragment 的 onResume() ，**但从不调用 LoginFragment****的**onPause() 。
***   按下后，**HomeFragment**正确弹出以显示 **LoginFragment**， HomeFragment 的 onPause()被调用，但 LoginFragment 的 onResume()**永远****不会**被调用。**

 **这是正常的行为吗？为什么当我按下后退按钮时没有调用`onResume()`LoginFragment **。**

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2013-04-27T13:55:01.720

只有在调用活动或时才会调用片段`onResume()`或。它们与.`onPause()``onResume()``onPause()``Activity`

阅读本文的[处理片段生命周期部分](http://developer.android.com/guide/components/fragments.html#Lifecycle)。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-27T13:45:07.710

*   由于您已使用`ft2.replace()`,`FragmentTransaction.remove()` 方法被调用并且`Loginfragment`将被删除。参考[这个](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)。所以`onStop()`of`LoginFragment`将被调用而不是`onPause()`. （因为新片段完全取代了旧片段）。
*   但是由于你也使用过`ft2.addtobackstack()`，所以状态`Loginfragment`会被保存为一个bundle，当你点击返回按钮from时`HomeFragment`， `onViewStateRestored()`会调用of后面`onStart()`的 `LoginFragment`。所以最终`onResume()`不会被调用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-11-24T17:41:30.230

这是我更强大的 Gor 答案版本（使用 Fragments.size() 是不可靠的，因为在弹出片段后大小没有减少）

```
getFragmentManager().addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
        @Override
        public void onBackStackChanged() {
            if (getFragmentManager() != null) {

                Fragment topFrag = NavigationHelper.getCurrentTopFragment(getFragmentManager());

                if (topFrag != null) {
                    if (topFrag instanceof YourFragment) {
                        //This fragment is being shown. 
                    } else {
                        //Navigating away from this fragment. 
                    }
                }
            }
        }
    }); 
```

和“getCurrentTopFragment”方法：

```
public static Fragment getCurrentTopFragment(FragmentManager fm) {
    int stackCount = fm.getBackStackEntryCount();

    if (stackCount > 0) {
        FragmentManager.BackStackEntry backEntry = fm.getBackStackEntryAt(stackCount-1);
        return  fm.findFragmentByTag(backEntry.getName());
    } else {
        List<Fragment> fragments = fm.getFragments();
        if (fragments != null && fragments.size()>0) {
            for (Fragment f: fragments) {
                if (f != null && !f.isHidden()) {
                    return f;
                }
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-24T15:55:58.317

如果你真的想在其他片段中替换片段，你应该使用[嵌套片段](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)。

在您的代码中，您应该替换

```
final FragmentManager mFragmentmanager =  getFragmentManager(); 
```

和

```
final FragmentManager mFragmentmanager =  getChildFragmentManager(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-13T13:47:59.540

```
getFragmentManager().addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
        @Override
        public void onBackStackChanged() {
            List<Fragment> fragments = getFragmentManager().getFragments();
            if (fragments.size() > 0 && fragments.get(fragments.size() - 1) instanceof YoureFragment){
                //todo if fragment visible
            } else {
                //todo if fragment invisible
            }

        }
    }); 
```

但要小心，如果多个片段可见

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-19T20:45:14.860

我有一个与您的代码非常相似的代码，如果它在 onPause () 和 onResume () 上工作。当改变片段时，这些功能分别被激活。

片段中的代码：

```
 @Override
public void onResume() {
    super.onResume();
    sensorManager.registerListener(this, proximidad, SensorManager.SENSOR_DELAY_NORMAL);
    sensorManager.registerListener(this, brillo, SensorManager.SENSOR_DELAY_NORMAL);
    Log.e("Frontales","resume");
}

@Override
public void onPause() {
    super.onPause();
    sensorManager.unregisterListener(this);
    Log.e("Frontales","Pause");

} 
```

片段更改时的日志：

```
05-19 22:28:54.284 2371-2371/madi.cajaherramientas E/Frontales: resume
05-19 22:28:57.002 2371-2371/madi.cajaherramientas E/Frontales: Pause
05-19 22:28:58.697 2371-2371/madi.cajaherramientas E/Frontales: resume
05-19 22:29:00.840 2371-2371/madi.cajaherramientas E/Frontales: Pause
05-19 22:29:02.248 2371-2371/madi.cajaherramientas E/Frontales: resume
05-19 22:29:03.718 2371-2371/madi.cajaherramientas E/Frontales: Pause 
```

片段 onCreateView：

```
View rootView;
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {

    rootView = inflater.inflate(R.layout.activity_proximidad, container, false);
    ButterKnife.bind(this,rootView);
    inflar();
    setTextos();
    return rootView;
} 
```

当我脉冲回来时的动作（在我加载片段的活动中）：

```
@Override
public void onBackPressed() {

    int count = getFragmentManager().getBackStackEntryCount();

    if (count == 0) {
        super.onBackPressed();

    } else {
        getFragmentManager().popBackStack();
    }

 } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-05-10T22:20:06.957

我在我的活动中使用 - **KOTLIN**

```
supportFragmentManager.addOnBackStackChangedListener {
                val f = supportFragmentManager.findFragmentById(R.id.fragment_container)

                if (f?.tag == "MyFragment")
                {
                    //doSomething
                }
            } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-10T09:01:58.560

我在子片段中做什么：

```
@Override
public void onDetach() {
   super.onDetach();
   ParentFragment pf = (ParentFragment) this.getParentFragment();
   pf.onResume();
} 
```

然后在 ParentFragment 上覆盖 onResume

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-26T17:24:20.803

尽管使用不同的代码，但我遇到了与 OP 相同的问题，因为我最初使用的是

```
fm.beginTransaction()
            .add(R.id.fragment_container_main, fragment)
            .addToBackStack(null)
            .commit(); 
```

代替

```
fm.beginTransaction()
                .replace(R.id.fragment_container_main, fragment)
                .addToBackStack(null)
                .commit(); 
```

使用“替换”，当您从第二个片段返回时会重新创建第一个片段，因此也会调用 onResume()。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-24T07:22:15.413

如果在 XML 中添加片段，则不能动态交换它们。发生的事情是它们过度，因此它们的事件不会像人们期望的那样触发。这个问题记录在这个问题中。[FragmenManager 替换使覆盖](https://stackoverflow.com/questions/16079992/fragmenmanager-replace-makes-overlay)

将 middle_fragment 转换为 FrameLayout，然后像下面这样加载它，您的事件就会触发。

```
getFragmentManager().beginTransation().
    add(R.id.middle_fragment, new MiddleFragment()).commit(); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-20T12:25:31.900

你可以试试这个

第 1 步：覆盖活动中的 Tabselected 方法

```
@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    try {
    if(MyEventsFragment!=null && tab.getPosition()==3)
    {
        MyEvents.fragmentChanged();
    }
    }
    catch (Exception e)
    {

    }
    mViewPager.setCurrentItem(tab.getPosition());
} 
```

第 2 步：使用静态方法在片段中执行您想要的操作，

```
public static void fragmentChanged()
{
    Toast.makeText(actvity, "Fragment Changed", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-02T13:44:28.733

`onPause()`方法适用于您可以使用的活动类：

```
public void onDestroyView(){
super.onDestroyView    
} 
```

出于同样的目的。。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-07-20T12:43:17.963

根据[@Gor](https://stackoverflow.com/a/40022868/2914140)的回答，我在 Kotlin 中写了类似的内容。将此代码放入`onCreate()`活动中。它适用于一个可见的片段。如果你有`ViewPager`片段，它会调用`ViewPager`'片段，而不是以前的片段。

```
supportFragmentManager.addOnBackStackChangedListener {
    supportFragmentManager.fragments.lastOrNull()?.onResume()
} 
```

阅读[https://medium.com/@elye.project/puzzle-fragment-stack-pop-cause-issue-on-toolbar-8b947c5c07c6](https://medium.com/@elye.project/puzzle-fragment-stack-pop-cause-issue-on-toolbar-8b947c5c07c6)后，我了解到在许多情况下将新片段附加到`replace`，而不是`add`. 所以`onResume`在某些情况下需要会消失。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-06-01T14:39:37.320

对我来说，原因是使用 navGraph 在片段之间切换

```
app:navGraph 
```

像这样（在 Kotlin 中）创建片段，然后调用所有生命周期函数

```
val transaction = supportFragmentManager.beginTransaction()
transaction.replace(R.id.nav_host_fragment, fragment)
transaction.addToBackStack(null)
transaction.commit() 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-11-07T20:53:05.697

**您不能**简单地将片段添加到片段中。这需要在 FragmentActivity 中发生。我假设您正在 FragmentActivity 中创建 LoginFragment，因此为了使其正常工作，您需要在登录关闭时通过 FragmentActivity 添加 HomeFragment。

一般的一点是，您需要一个 FragmentActivity 类，从中将每个 Fragment 添加到 FragmentManager。在 Fragment 类中**不可能**做到这一点。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-07-16T11:23:16.260

片段必须始终嵌入到活动中，并且片段的生命周期直接受宿主活动生命周期的影响。比如activity暂停的时候，里面的所有fragment也暂停，activity销毁的时候，所有的fragment也暂停

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-04-09T21:09:33.310

**按照以下步骤，您将得到所需的答案**

1- 对于两个片段，创建一个新的抽象父片段。
2-添加一个应该由他们俩实现的自定义抽象方法。
3-在用第二个替换之前从当前实例调用它。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-20T09:44:01.570

调用`ft.replace`应该触发（被替换片段的）onPause 和（被替换片段的）onResume。

我确实注意到您的代码`login_fragment`在主片段上膨胀，并且也没有返回 onCreateView 中的视图。如果这些是拼写错误，你能说明这些片段是如何从你的活动中被调用的吗？

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-26T02:10:20.857

当片段出现/消失时，保证调用两种可能的覆盖方法。

oncreateview/ondestroyview - 每当片段可见性发生变化时都会调用它

onpause/onresume - 当应用程序被外部关闭或您使用片段替换时调用

如果您希望像我一样创建一个钩子，您可以在片段关闭时收到通知，并在不创建重复调用的情况下捕获任何一种情况，因为有时两者都可以调用。

尝试扩展片段类并在两个覆盖中添加一个布尔标志，这样你就可以确定打开和关闭而不重复

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2013-03-07T13:25:17.450

创建片段事务时，请确保添加以下代码。

```
// Replace whatever is in the fragment_container view with this fragment, 
// and add the transaction to the back stack 
transaction.replace(R.id.fragment_container, newFragment); 
transaction.addToBackStack(null); 
```

还要确保在将事务添加到后台堆栈后提交事务********

# ruby-on-rails-3 - 更改项目名称

> ID：11326161
> 
> 赞同：0
> 
> 时间：2012-07-04T09:23:50.377
> 
> 标签：ruby-on-rails-3

如何在 ruby​​ on rails 中更改项目名称？而你创建项目的项目名称分散在以下文件中 在Rails 3中，在以下文件中有对应用程序名称的引用：

```
config/application.rb
config/environment.rb
config/environments/development.rb
config/environments/production.rb
config/environments/test.rb
config/initializers/secret_token.rb
config/initializers/session_store.rb
config/mongoid.yml (if using Mongoid)
config/routes.rb
config.ru
Rakefile
app/views/layouts/application.html.erb, in title tag 
```

是否有任何命令可以替换所有这些文件中的项目名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:31:26.253

为此，请点击以下链接
[http://gkunwar1.wordpress.com/2012/07/03/rails-tips/](http://gkunwar1.wordpress.com/2012/07/03/rails-tips/)
希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:51:04.173

没有命令可以替换所有这些文件中的名称。您将需要手动进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T05:21:52.797

利用[`rename`](https://rubygems.org/gems/rename)

对于 Rails 5/4.x

```
#Gemfile
gem `rename`

#Command prompt
rails g rename:into NewAppName 
```

对于 Rails 3

```
rails plugin install git://github.com/get/Rename.git
rails g rename_to SweetNewName 
```

# c++ - 从键值对的两种方式查找

> ID：11326171
> 
> 赞同：1
> 
> 时间：2012-07-04T09:24:18.297
> 
> 标签：c++, key

我在一个需要迭代的类中有一组设置：

A B C D

每次迭代的最终结果都是一个数字，从结果列表的索引中找出 A、B、C 和 D 的值的最佳方法是什么？

例如

```
A= 2 到 10，步长为 0.1
B= 4 到 20，步长为 0.5
C= 5 到 50，步长为 0.2
D= 6 到 70，以 3 为步长

```

结果来自每次迭代的列表中的索引，例如

```
迭代[0] = 2; (A=2,B=4,C=5,D=6)
迭代[1] = 10；(A=2,B=4,C=5,D=9)

```

如果我有原始设置，从索引号反向查找 A、B、C、D 值的最佳方法是什么？

我也需要进行相反的计算，从一组设置中，索引是多少。

任何帮助都会很棒！

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:55:07.233

看看 boost 反向映射 [http://www.boost.org/doc/libs/1_50_0/libs/bimap/doc/html/index.html](http://www.boost.org/doc/libs/1_50_0/libs/bimap/doc/html/index.html) 也许这有帮助

# google-apps-script - 使用 Google 脚本的数据透视表

> ID：11326172
> 
> 赞同：2
> 
> 时间：2012-07-04T09:24:26.477
> 
> 标签：google-apps-script, google-sheets

我在 Google 电子表格中使用脚本，它非常棒。

我有一个问题。

我试图创建（从已经加载的一条数据）来创建一个数据透视报告..电子表格中的菜单选择没有问题（菜单“日期”->“数据透视报告”）......我找不到方法创建一个我可以自动执行此操作的脚本。

如何在 Google 电子表格脚本中创建数据透视表？

和'可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-18T13:07:51.487

表格中有一项新功能：高级表格服务。

它具有更多功能，例如创建数据透视表

> 这是一项高级服务，必须在使用前启用。

这意味着您需要启用它两次：

1.  在脚本菜单中：资源 → 高级 Google 服务
2.  在 Google Api 控制台中：https [://console.developers.google.com/apis/](https://console.developers.google.com/apis/)`Google Apps APIs → Sheets Api`

这是代码：

[https://developers.google.com/apps-script/advanced/sheets#create_a_pivot_table](https://developers.google.com/apps-script/advanced/sheets#create_a_pivot_table)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T23:10:22.000

已通过脚本创建了一个数据透视表，尽管它不是您在帖子中提到的 Google 数据透视表。[通过 Romain Vialard 的脚本](http://www.youtube.com/watch?v=lJJwNrS_dig "Romain Vialard 的数据透视表")查看数据透视表，该脚本可在电子表格脚本相册中找到（只需从电子表格的菜单中转到工具>脚本相册；一旦搜索数据透视表，就会出现 Romain's。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-18T12:55:17.500

您可以`createDataSourcePivotTable`从`Range`类中使用，如[文档](https://developers.google.com/apps-script/reference/spreadsheet/range#createDataSourcePivotTable(DataSource))中所示：

```
var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
var anchorCell = spreadsheet.getSheets()[0].getRange('A1');
var dataSource = spreadsheet.getDataSources()[0];

var pivotTable = anchorCell.createDataSourcePivotTable(dataSource);
pivotTable.addRowGroup('dataColumnA');
pivotTable.addColumnGroup('dataColumnB');
pivotTable.addPivotValue('dataColumnC', SpreadsheetApp.PivotTableSummarizeFunction.SUM);
pivotTable.addFilter('dataColumnA', SpreadsheetApp.newFilterCriteria().whenTextStartsWith('A').build()); 
```

# android - wrap_content 时 dp 中的 TextView 大小

> ID：11326174
> 
> 赞同：1
> 
> 时间：2012-07-04T09:24:31.667
> 
> 标签：android

我正在创建一个需要计算`minHeight`and的小部件`minWidth`。

现在，如果我有`TextView`一个宽度和高度为`wrap_content`，文本大小为 的`18sp`，我怎样才能知道`TextView`它将变成什么大小`dp`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:34:14.143

```
TextView tv;
int tvWidth = tv.getWidth();
int tvHeight = tv.getHeight();

float density = getResources().getDisplayMetrics().density;
float densityWidth = tvWidth / density;
float densityHeight = tvHeight / density; 
```

如果我理解正确，它是给你的。

# jquery - 更改 div 的顺序以使用浮动定位

> ID：11326175
> 
> 赞同：2
> 
> 时间：2012-07-04T09:24:31.737
> 
> 标签：jquery, dom

我有很多 div 区域 ll 向左浮动，因此它们彼此相邻地排成一行，填满一页。我想以编程方式更改它们的顺序并且仍然让它们浮动。

我写了一段 JS，它获取每个框的偏移量，给它们一个固定的位置（使用偏移量使它们保持在原位），然后将它们设置为其他偏移量之一。我的问题是我现在需要将它们从绝对定位转换回浮动定位。这样做显然会使它们恢复到原来的样子。

我需要知道的是是否可以设置每个 div 的索引 - 所以我可以将偏移量与索引相关联并更新每个 div 的偏移量和索引，以便它们在浮动时保持原位。有没有办法使用 jQuery 设置 DOM 元素的索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:29:04.677

你不想设置他们的*index*，本身；您想从字面上更改他们在容器中的顺序。

这很容易（使用 DOM 或 jQuery）：如果要将元素移动到其前一个兄弟元素的前面，请使用：[`insertBfore`](http://api.jquery.com/insertBefore) `prev`

```
var elm = $("selector_for_the_element");
elm.insertBefore(elm.prev()); 
```

...或在其下一个兄弟之后，使用：[`insertAfter`](http://api.jquery.com/insertAfter) `next`

```
var elm = $("selector_for_the_element");
elm.insertAfter(elm.next()); 
```

大概你会在完成动画时这样做，将 div 恢复为浮动而不是绝对定位。

[实例](http://jsbin.com/uziwul)| [来源](http://jsbin.com/uziwul/edit)

HTML：

```
<div id="container"></div> 
```

CSS：

```
#container div {
  float: left;
  width: 4em;
  border: 1px solid black;
  margin: 2px;
  padding: 2px;
}
.left, .right {
  cursor: pointer;
  font-weight: bold;
  font-size: 14pt;
  background-color: #eee;
  border: 1px solid #aaa;
} 
```

JavaScript：

```
jQuery(function($) {

  var container = $("#container");
  var index;

  for (index = 0; index < 10; ++index) {
    $("<div>d" + index +" <span class='left'>&lt;</span> <span class='right'>&gt;</span></div>")
      .appendTo(container)
      .attr("id", "d" + index);
  }

  container.delegate(".left", "click", function() {
    var div = $(this).closest("div"),
        prev = div.prev();
    if (prev[0]) {
      div.insertBefore(prev);
    }
  });
  container.delegate(".right", "click", function() {
    var div = $(this).closest("div"),
        next = div.next();
    if (next[0]) {
      div.insertAfter(next);
    }
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:29:35.967

在开始重新排列 div 的动画之前，您能否将它们的原始位置和 id 存储在对象数组中？然后有一个函数可以遍历该数组中的对象，调用以原始位置为坐标的动画？

工作示例：http: [//jsfiddle.net/JpVS4/3/](http://jsfiddle.net/JpVS4/3/)

html:

```
<div class="moving">Item 1</div>
<div class="moving">Item 2</div>
<div class="moving">Item 3</div>
<div id="move-back">Click to Move To Orignal Pos</div> 
```

CSS：

```
.moving{
    width: 100px;
    float:left;
}

#move-back{
    position: absolute;
    top: 200px;
    border: 1px solid lightgray;
} 
```

Javascript：

```
var originalPos =[];

//Store Original

    $(".moving").each(function(){
        originalPos.push({"left":$(this).position().left,"top":$(this).position().top});
    });

    //rearrange
    $(".moving").each(function(i,e){
        $(this).css("position", "absolute");
        $(this).css("left",100 * ((3-i)-1));                
    });

    //move back to original - if needed you could also set top
    $("#move-back").click(function(){
        $(".moving").each(function(i,e){
            var position = originalPos[i];
            $(this).css("left",originalPos[i].left);                
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:07:26.810

最后我修改了这个问题的解决方案以满足我的需求并且工作得非常好：

[使用 jQuery 随机化 div 元素序列](https://stackoverflow.com/questions/1533910/randomize-a-sequence-of-div-elements-with-jquery)

非常感谢[TJ Crowder的帮助](https://stackoverflow.com/users/157247/t-j-crowder)

# http - 用于区分不正确参数和失败值的 HTTP 响应代码

> ID：11326176
> 
> 赞同：6
> 
> 时间：2012-07-04T09:24:32.830
> 
> 标签：http, rest

什么是合适的响应代码和消息：

1.  字段提交方式错误（URL 参数与正文）或缺少字段
2.  字段获取无效值（字符串而不是数字，将来的时间戳）
3.  某些字符，例如`?, /`URL 参数中的中断内容
4.  实际失败：无效凭据，重复已经完成的操作

目前，我们全部使用400。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:47:10.787

您问题中的案例 1、2 和 3 本质上是请求中的语法错误

=> **400 错误请求**

（RFC 2616 说：*由于语法错误，服务器无法理解请求。*）

至于案例4：

一个。无效证件

=> **401 未经授权**

湾。重复已经完成的动作

=> **403 禁止**

（RFC 说：*服务器理解请求，但拒绝执行。授权无济于事，请求不应重复。*）

但是，当尝试错误地修改内容 (PUT) 或访问已删除的资源时， **409 Conflict**和**410 Gone**是有意义的。

这是[RFC 2616 第 10 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T18:57:56.107

阅读每个响应代码的 HTTP 规范，以获取有关在响应正文中返回的内容的一些信息。例如，4xx 表示“除了响应 HEAD 请求时，服务器应该包含一个表示，其中包含对错误情况的解释，以及它是暂时的还是永久的情况。”

要记住的主要一点是，HTTP 响应代码被设计为统一的，因此与促进互操作性有关，而不是满足单个应用程序的详细需求。使用响应正文而不是代码，以您希望客户理解的格式包含详细信息。

> 1 个字段以错误的方式提交（URL 参数与正文）或缺少字段

返回“404 未找到”。查询字符串参数是 URI 的一部分，用于标识资源。`/foo/bar?a=1&b=2`标识与 不同的资源`foo/bar`。如果资源不存在，则返回 404。代码中的相同逻辑用于处理相同路径的任何查询字符串参数并不重要：这些细节被有意隐藏在统一接口后面。有关更多详细信息，请参阅[URI 规范](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)。

> 2 个字段获得无效值（字符串而不是数字，未来的时间戳）

400 在这里是最好的，除非资源处于与用户可以合理地解决（然后重新提交请求）的请求相冲突的状态，在这种情况下返回 409。

> 3 一些字符，如 ?, / 破坏 URL 参数中的内容

如果这种破坏是由于您的服务器未正确处理查询字符串组件中的保留字符，则返回 500。如果客户端提交了格式错误的 Request-URI，则返回 400。如果 URI 标识了您的服务器未处理的资源，则返回 404。

> 4 实际失败：无效凭据，重复已经完成的操作

无效的凭据应导致“401 Unauthorized”。[如果请求方法是幂等](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p2-semantics-19#section-6.1.2)的（GET、HEAD、PUT、DELETE），重复已经完成的操作应该会导致 200 OK（或重定向等）。对于 POST，重复操作完全取决于操作的性质，实际上可能会返回任何状态代码。400/409 很常见，但许多此类资源只是再次执行操作，这通常是可取的。

# c# - 将函数从代码隐藏到业务逻辑层类

> ID：11326182
> 
> 赞同：0
> 
> 时间：2012-07-04T09:25:20.323
> 
> 标签：c#, asp.net, code-behind, business-logic-layer

我正在使用`ASP.NET Web Forms/C#`.

我有这个功能，它根据州选择`code behind`填充城市。`DropDownList``DropDownList`

这是我的功能。

```
public void CityFill(int index,int id)
        {
            //This function calls GetCities method which will get all cities of a state.
            var city = CustomerBLL.GetCities(index);

            //If id=0 then clear all dropdown before filling
            //or else they get appended.
            if (id == 0)
            {
                NewCustomerddlResidentialCity.Items.Clear();
                NewCustomerddlOfficeCity.Items.Clear();
                NewCustomerddlNativeCity.Items.Clear();
                NewCustomerddlNomineeCity.Items.Clear();
            }
            else
            {
                //If 1 then clear residential city
                if(id==1)
                    NewCustomerddlResidentialCity.Items.Clear();

                //If 2 then clear Office city.
                if(id==2)
                    NewCustomerddlOfficeCity.Items.Clear();

                //If id=3 then clear Native City.
                if(id==3)
                    NewCustomerddlNativeCity.Items.Clear();

                //If id=4 then clear Nominee City
                if(id==4)
                    NewCustomerddlNomineeCity.Items.Clear();
            }

            //Loop through all the cities in st object
            foreach (var c in city)
            {
                //If id=0 then fill all dropdowns
                if (id == 0)
                {
                    NewCustomerddlResidentialCity.Items.Add(c.city_name.Trim());
                    NewCustomerddlOfficeCity.Items.Add(c.city_name.Trim());
                    NewCustomerddlNativeCity.Items.Add(c.city_name.Trim());
                    NewCustomerddlNomineeCity.Items.Add(c.city_name.Trim());
                }
                else
                {
                    //If 1 then fill Res City
                    if(id==1)
                    NewCustomerddlResidentialCity.Items.Add(c.city_name.Trim());

                    //If 2 then fill Off City
                    if(id==2)
                    NewCustomerddlOfficeCity.Items.Add(c.city_name.Trim());

                    //If 3 then fill nat city
                    if(id==3)
                    NewCustomerddlNativeCity.Items.Add(c.city_name.Trim());

                    //If 4 then fill nominee city
                    if(id==4)
                    NewCustomerddlNomineeCity.Items.Add(c.city_name.Trim());

                }
            }
        } 
```

传递给函数的参数是 index 和 id。index 属于`SelectedIndex`State `DropDownList`。id是`DropDownList`需要填写的城市。

这是BLL类

```
namespace CwizBankApp
{
    public class CustomerBLL
    {
        public IList<mem_city> GetCities(int index)
        {
            using (var db = new DataClasses1DataContext())
            {
                var city = db.mem_cities.Where(c => c.state_id.Equals(index)).ToList();
                return city;
            }
        }
    }
} 
```

我需要将函数从后面的代码移动到 BLL 类。

我该怎么做。

谁能帮我解决这个问题？欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:30:56.493

我建议不要在 BLL 课程中执行此操作。不要强迫它使用 BLL，因为它旨在将数据访问逻辑与表示逻辑分开。

# python - Python 3空终止字符串列出？

> ID：11326184
> 
> 赞同：3
> 
> 时间：2012-07-04T09:25:29.393
> 
> 标签：python, string, binary, python-3.x, ascii

当您有一个包含一些字符串的二进制文件时，Python 3 确实使整个文件读取过程变得复杂。

`string.decode('ascii')`当我确定我读的是 ascii 文本时，我可以这样做，但是在我的文件中，我有带有空`('\x00')`终止字符串的字符串，我必须读取一个转换为字符串列表的字符串。新的方法是如何做到这一点，而不是逐字节检查它是否为空？

```
mylist = chunkFromFile.split('\x00')

TypeError: Type str doesn't support the buffer API 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:29:36.687

我猜那`chunkFromFile`是一个`bytes`对象。然后您还需要`bytes`为该方法提供一个参数`.split()`：

```
mylist = chunkFromFile.split(b'\x00') 
```

看：

```
>>> chunkFromFile = bytes((123,45,0,67,89))
>>> chunkFromFile
b'{-\x00CY'
>>> chunkFromFile.split(b'\x00')
[b'{-', b'CY']
>>> chunkFromFile.split('\x00')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Type str doesn't support the buffer API 
```

# ruby-on-rails - 如何在 ROR 中的选择中添加选项。？

> ID：11326185
> 
> 赞同：0
> 
> 时间：2012-07-04T09:25:34.823
> 
> 标签：ruby-on-rails

我正在尝试在选择字段中添加选项。但它不会像我预期的那样工作。

下面我发布我的代码。请帮助解决这个问题。

```
<select id='address_select' name='address_select' style="width: 100%; border-radius: 9px 9px 0 0; padding-top: 6px;">
  <% OrganizationSettings.getInstance().fetch() %>
  <% @addresses = OrganizationSettings.getInstance().valueForField('addresses') %>
  <option value="123" selected="selected">Facility</option> 
  <% for address in @addresses: %>
    <% @val = address.label %>
    <option value='<% address.id %>'> <% @val %> </option> 
  <% end %>
</select> 
```

在这里，在@addresses 中，我获取地址类的值。我得到了答案，`<% alert(address.label) %>`但是当我在选项中传递相同的值时，它不会显示。它在选择中创建相同数量的选项，但无法填充选项中的值。

请帮助我..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:50:43.327

你错过了`=`登录`<%= ... %>`

```
<%= @val = address.label %>
<option value='<%= address.id %>'> <%= @val %> </option> 
```

# android - 我如何从 SVN 存储库中签出一个 android 项目

> ID：11326189
> 
> 赞同：2
> 
> 时间：2012-07-04T09:25:55.643
> 
> 标签：android, eclipse, svn, eclipse-plugin, subclipse

我有一个 android 项目，我已将其添加到 SVN 存储库。这些是我添加的目录/文件

目录：res、src、lib、

文件：AndroidManiFest.xml、project.properties、proguard.cfg 和 2 个启动文件

但是，当我执行以下操作时，我无法将文件创建为 android 项目

1.  通过从 SVN 签出导入项目（这是一个项目 A）
2.  使用 Eclipse 中的创建新项目来创建新项目 - 步骤是：`Create New Projects -> Android Project from Existing Source Code`

在创建新项目时，您是否有一些我没有提交的文件或者我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T18:03:59.413

我花了很多时间尝试将一个基于 Web 的 SVN 提供程序的 Android 项目导入 Eclipse (Juno)。

看到我很难找到正确的步骤，我把我的建议留在这里，并附上截图。享受！

*   *您必须已经安装和配置了 SVN。Eclipse 中不需要以前的项目* ![您必须已经安装和配置了 SVN。 Eclipse 中不需要以前的项目](../Images/5035dae41bd5a61d497795d75c9cccab.png)

*   *由于之前的尝试，我已经正确配置了与提供程序的连接。YMYV 在这里。* ![由于之前的尝试，我已经正确配置了与提供程序的连接。 YMYV 在这里。](../Images/65d4a6eff4b586fb7bcd56415ee73c9f.png)

*   *我使用 SVNKit 1.7，因为它可以通过代理在这里正常工作。* ![我使用 SVNKit 1.7，因为它可以通过代理在这里正常工作。](../Images/df7c5f9aa7807e9cd252817e4efb20cf.png)

*   *这是最重要的一步：确保选中**Find projects in the children**选项* ![这是最重要的一步：确保选中 Find projects in the children 选项。](../Images/f98eea926fc1eb84e083dda348d4f560.png)

*   *选择**Checkout 作为项目*** ![选择结帐作为项目](../Images/e7ac6d645cabc80238e5ed02941a612d.png)

*   *选择您需要的任何工作空间* ![选择您需要的任何工作空间](../Images/57a829d55de931877d4e88e94d77f373.png)

*   *瞧，该项目已准备就绪！* ![*voilá*，该项目已准备就绪！](../Images/d8b928e4f02fdda573af7fc8188a51c7.png)

我在图像中添加了描述，以供您观赏。希望在找出正确的步骤后，它可以为我节省很多时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:30:27.467

在 Eclipse 中尝试：

在项目视图中单击鼠标右键。

> -> 导入
> 
> -> 进入安卓
> 
> -> 选择“现有的 Android 代码到工作区”
> 
> -> 选择您签出的 svn 文件夹。

结束。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-13T15:13:41.713

尽管使用了 biggvsdiccvs，但我还是跳过了使用临时目录**，这有助于避免引用的库（如 android 支持库）出现问题**。

1.  安装 Subclipse 和 SVNKit（[**视频教程 0:12**](http://www.youtube.com/watch?v=D_AsYaHofX0#t=12)）
2.  切换到 SVN 视角并添加您的存储库（[**视频教程 1:12**](http://youtu.be/D_AsYaHofX0?t=1m12s)）
3.  切换回 Java 透视图并使用新安装的 SVN Eclipse 插件选择“文件 > 导入 > SVN > Checkout Projects from SVN”或按照[**视频教程 1:42**](http://youtu.be/D_AsYaHofX0?t=1m42s)
4.  选择你的回购
5.  选择“结帐为具有指定名称的项目”
6.  选择“作为项目签出到工作区”
7.  启用“使用默认工作区位置”
8.  删除项目，不要勾选“删除文件”
9.  从现有代码中导入 Android 项目，选择您导入的项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T10:08:33.447

使用 Eclipse 检查 Android 项目的最简单方法是使用插件“Subclipse”（http://subclipse.tigris.org）。使用此插件，您可以直接在 Eclipse 上签出“作为 android 项目”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-14T00:26:11.020

我不知道为什么，但我错过了“在儿童中查找项目”选项。在撰写本文时，我正在使用带有最新 Subclipse 的 Eclipse Kepler Service Release 2。这是解决方法。与我在此站点上找到的一些说明不同，此方法还保留了提交更改的能力。

1.  在您的默认工作区目录下创建一个临时目录（可能不一定需要在工作区下，但可以）
2.  通过 Eclipse 将您的项目从 SVN 导入到 temp 目录
3.  删除项目，不要勾选“删除文件”
4.  从现有代码导入Android项目，在临时目录中选择您导入的项目
5.  重构 -> 移动，选中“使用默认位置”。这会将项目从临时目录移动到您的常规工作区，即上一级。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-04T11:48:03.030

使用[TortoiseSVN](http://tortoisesvn.net/downloads.html)。您也可以将它用于 Git。从 SVN 正确上传和下载文件。也许您的 SVN 客户端无法正常工作。

# c# - 即使是处理的异常也会触发 Application_Error

> ID：11326192
> 
> 赞同：3
> 
> 时间：2012-07-04T09:25:59.070
> 
> 标签：c#, exception-handling, webforms, global-asax, application-error

如果 URL 存在，我有一些代码可以显示按钮：

```
try
{
    string dashboardURL = Config.RootUrl + "/Dashboard/Default.aspx";
    WebRequest req = WebRequest.Create(dashboardURL);
    WebResponse response = req.GetResponse();
    btnDashboard.Visible = true;
}
catch (Exception)
{
    btnDashboard.Visible = false;
} 
```

但是，在调试时，`req.getResponse()`会导致`Application_Error`火灾。我检查了这里捕获的异常，它是一个`System.Net.WebException`. 我的理解是`Application_Error`因为未处理的异常而被解雇。

如果我更改代码以强制异常如下：

```
try
{
    string dashboardURL = Config.RootUrl + "/Dashboard/Default.aspx";
    WebRequest req = WebRequest.Create(dashboardURL);

    int j = 0;
    int i = 1 / j;

    WebResponse response = req.GetResponse();
    btnDashboard.Visible = true;
}
catch (Exception)
{
    btnDashboard.Visible = false;
} 
```

then`Application_Error`不会被解雇，这很好。即使处理了异常，处理`GetResponse()`总是导致触发的错误是否有什么特别之处？`Application_Error`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T02:52:40.623

在 Application_Error 检查异常：

```
var exception = Server.GetLastError(); 
```

使用此代码触发 Application_Error 是不可能的。您的异常必须在此 try/catch 块之后。

还尝试清理和重建您的解决方案，或强制重新创建设计器文件（更改 aspx 文件上的内容）。

我在不同的 ASP.NET 版本上测试了您的代码，即使在 MVC3/MVC4 环境中，也不会触发 Application_Error！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:57:26.970

是否`/Dashboard/Default.aspx`在同一个服务器/应用程序中？

如果是这样，那么处理该请求可能会导致错误，该错误将被`Application_Error`. 原因是`GetResponse()`您正在执行 HTTP 请求，并且在（可能）远程服务器上处理请求时发生的任何异常都不会由调用代码上的 try/catch 处理。在您的特殊情况下，远程服务器 = 本地服务器，但想法没有改变。

# .htaccess - 使用 .htaccess 文件在 cPanel 中隐藏页面扩展名

> ID：11326195
> 
> 赞同：2
> 
> 时间：2012-07-04T09:26:16.480
> 
> 标签：.htaccess, hide, file-extension

我了解到 .htaccess 文件可用于隐藏页面 url。示例：www.mydomain.com/mypage1.html 可以显示为 www.mydomain.com 或 www.mydomain.com/mypage1。所以我对此有几个问题。我有三个页面，分别是 mypage1.html、mypage2.html 和 mypage3.html；都在 cPanel 的同一个文件夹中。有没有办法可以隐藏所有三个 url，就像它只会显示为 www.mydomain.com。或者我可以让所有三个页面都出现在 www.mydomain.com/mycustomname/ 下。或者这三个文件会分别显示为 www.mydomain.com/mypage1/、www.mydomain.com/mypage2/ 和 www.mydomain.com/mypage3/。

任何人都可以为此提供 .htaccess 代码吗？我还需要对我的 html 文件代码进行任何更改吗？就像 page1.html 在单击按钮时重定向到 page2.html 一样；还是可以使用现有代码。

还有一个问题是，我可以在 cPanel 的子文件夹中上传 .htaccess 文件吗？因为我有很多插件域添加到我的 cPanel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T11:53:03.343

.ht 访问代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.html [NC,L] 
```

如果最后一行包含 .php，您可以更改它

```
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

# java - Android Gameloop：结束游戏并开始活动

> ID：11326198
> 
> 赞同：0
> 
> 时间：2012-07-04T09:26:21.197
> 
> 标签：java, android, multithreading, surfaceview, game-loop

我的 Android 项目（我的第一个 Android 项目）中的 GameLoop 有问题：

我有一个 GameView (SurfaceView) 启动的 Activity。

```
setContentView(new GameView(this)); 
```

GameView (SurfaceView) 启动 GameThread。

```
 public void surfaceCreated(SurfaceHolder holder) {
    Log.d("GameView", "surfaceCreate");
    surfaceHolder = holder;
    synchronized (this) {               //Must be executed exclusively
        if (gameLoop == null) {
            gameLoop = new GameLoop();  //Start animation here
            gameLoop.start();
        }
    }
}

    private class GameLoop extends Thread {

    public boolean running = true;

    public void run() {
        Canvas canvas = null;
        final SurfaceHolder surfaceHolder = GameView.this.surfaceHolder;

        while (running) {
            try {
                canvas = surfaceHolder.lockCanvas();
                synchronized (surfaceHolder) {
                    update();

                    checkCollision();

                    render(canvas);
                }
            } finally {
                if (canvas != null)
                    surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
    }

} 
```

现在我可以玩了。至此，一切正常。

如果玩家丢失了一个新的 Activity (GameOver) 启动并且 GameThread 停止。他在这里崩溃了！

```
 public void endgame() {

    Log.d("GameView", "ENDGAME");

    this.score.setStopscoring(true);
    this.box.stop();

    synchronized (surfaceHolder) {
        boolean retry = true;
        if (gameLoop != null) { 
            gameLoop.running = false;
            while (retry) {
                try {
                    gameLoop.join();
                    retry = false;
                } catch (Exception e) {
                }
            }
        }

    }

    Context context = getContext();
    context.startActivity(new Intent(context, _1GameOver.class));   

} 
```

在`gameLoop.join();`它冻结之后。

我已经尝试了很多，但没有任何效果。之前谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:51:46.273

我还没有找到确切的错误。

相反，我稍微转换了代码。

```
 public void surfaceDestroyed(SurfaceHolder holder) {

        boolean retry = true;

        if (gameLoop != null) {

            gameLoop.running = false;

            while (retry) {
                try {
                    gameLoop.join();
                    retry = false;  
                } catch (InterruptedException e) {
                }
            }
        }
        gameLoop = null;
} 
```

以及我在关闭活动时得出的所有结论。

```
((_1GameActivity)getContext()).finish(); 
```

不漂亮，但它有效！

消遣

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:52:07.570

我认为问题在于您正在使用两个同步块，一个用于渲染（在游戏循环中），另一个用于结束它。第二个块必须等待第一个块停止执行，这永远不会，因此游戏冻结。

尝试从您发布的第二段代码中删除“synchronized (surfaceHolder)”语句。

# javascript - 允许事件继续

> ID：11326201
> 
> 赞同：2
> 
> 时间：2012-07-04T09:26:27.370
> 
> 标签：javascript, jquery, forms, events, event-handling

我有一个自定义日期选择器 jQuery 插件。在表单提交时，日期选择器验证所选日期以检查它是否有效。如果不是，它会显示一条错误消息，否则它*应该*继续并发布表单。

发生的情况是，如果用户第一次输入有效日期，一切正常。但是，如果用户输入了无效的日期，则会显示错误消息，然后当用户修复日期时，它仍然不会发布表单。它只是坐在那里。

下面是处理表单提交事件的代码部分：

```
 var hiddenInput = $('.custom-date-picker-value');
        var form = hiddenInput.closest('form');
        $(form).submit(function (e) {
            selectedMonth = monthSelect.find('option:selected').text();
            selectedYear = yearSelect.find('option:selected').text();
            selectedDay = daySelect.find('option:selected').text();

            $('#dateValidationMessage').html('');
            if (selectedMonth == '' || selectedDay == '' || selectedYear == '') {
                $('#dateValidationMessage').html($('#dateOfBirthRequired').val());
                e.preventDefault();
            }
            else {
                var dateValue = selectedMonth + '/' + selectedDay + '/' + selectedYear;
                var dob = new Date(dateValue);
                var modifiedDate = new Date(dob.getFullYear() + 2, dob.getMonth(), dob.getDay());
                if (modifiedDate > new Date()) {
                    $('#dateValidationMessage').html($('#AgeGreaterThan').val());
                    e.preventDefault();
                }
                else {
                    hiddenInput.val(dateValue);
                    console.log('date is valid');
                }
            }
        }); 
```

当用户输入有效日期时，我可以看到正在输出到控制台的跟踪显示“日期有效”，但由于某种原因，表单没有被提交。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T09:33:38.613

尝试

```
return true 
```

在这种情况下，

```
console.log //returns undefined. 
```

此外，在某些浏览器中，表单提交事件中的 preventDefault 存在错误，因此您可能需要更改

```
e.preventDefault() 
```

至

```
return false; 
```

# android - 我写了一个 android 应用程序来接收蓝牙耳机事件，但是 onReceive() 没有被调用

> ID：11326203
> 
> 赞同：1
> 
> 时间：2012-07-04T09:26:30.910
> 
> 标签：android

我编写了一个 android 应用程序来接收蓝牙耳机事件，但是 onReceive() 没有被调用。虽然我不确定 ACTION_MEDIA_BUTTON 是用作事件还是不是这个事件。

* * *

实现接收器的示例代码：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.KeyEvent;
import android.widget.Toast;

public class MediaButtonIntentReceiver extends BroadcastReceiver {

private static final String TAG = "MediaButtonIntentReceiver";
public MediaButtonIntentReceiver() {
    super();
    }

@Override
public void onReceive(Context context, Intent intent) {//OnReceive

    String intentAction = intent.getAction(); //getAction()
    Log.d(TAG, "onReceive called");
    if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
                return;
    }
    KeyEvent event = (KeyEvent)intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
    if (event == null) {
                return;
    }
    int action = event.getAction();
       if (action == KeyEvent.ACTION_DOWN) {
    // do something
                Toast.makeText(context, "BUTTON PRESSED!", Toast.LENGTH_SHORT).show(); 
    }
    abortBroadcast();
}
} 
```

* * *

活动看起来像这样：

```
public class myactivity extends Activity {
    private static final String TAG ="Bluetooth_priority";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) { //onCreate 
        super.onCreate(savedInstanceState);
        Log.d(TAG, "Oncreate called");
        setContentView(R.layout.main);
        IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);
        MediaButtonIntentReceiver r = new MediaButtonIntentReceiver();
        filter.setPriority(1000); // set teh priority
        registerReceiver(r, filter); //register
    }
} 
```

* * *

Manifest.xml 看起来像这样：

```
<receiver android:name="MediaButtonIntentReceiver">
        <intent-filter android:priority="1000">
            <action android:name="android.intent.action.MEDIA_BUTTON" />
        </intent-filter> 
```

万一有人知道，请回复。即使将优先级设置为2147483647，它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:16:33.177

我认为您正在过滤错误的意图。我认为您想要的意图操作是 BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED

你可以参考[http://developer.android.com/reference/android/bluetooth/BluetoothHeadset.html#ACTION_CONNECTION_STATE_CHANGED](http://developer.android.com/reference/android/bluetooth/BluetoothHeadset.html#ACTION_CONNECTION_STATE_CHANGED)

# android-ndk - 如何在 android ndk 中包含使用 posix 标头的本机库

> ID：11326206
> 
> 赞同：0
> 
> 时间：2012-07-04T09:26:39.130
> 
> 标签：android-ndk, native, static-libraries, apk

我必须在 android ndk 项目中包含一个使用 System V IPC 的静态本机库 (dsplink.a)。

包括我在 android.mk 中的库，

```
 LOCAL_LDLIBS := ($MY-PATH)/dsplink.a 
```

给出以下错误：

```
 _sync_usr.c:(.text+0x24b4): undefined reference to `semget'
    _sync_usr.c:(.text+0x24d4): undefined reference to `__errno_location'
    _sync_usr.c:(.text+0x24f4): undefined reference to `semget'
    _sync_usr.c:(.text+0x2538): undefined reference to `semctl' 
```

semctl,semget,.. 函数包含在 sys/sem.h 中。有没有办法包括图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:31:20.957

遗憾的是这是不可能的。

从 android-ndk-r8/docs/system/libc/SYSV-IPC.html 中提取

Android 不支持 System V IPC，即以下标准 Posix 标头提供的设施：

```
<sys/sem.h>   /* SysV semaphores */
<sys/shm.h>   /* SysV shared memory segments */
<sys/msg.h>   /* SysV message queues */
<sys/ipc.h>   /* General IPC definitions */ 
```

其原因是，根据设计，它们会导致全局内核资源泄漏。

# c++ - 没有参数的复制构造函数

> ID：11326212
> 
> 赞同：0
> 
> 时间：2012-07-04T09:26:47.650
> 
> 标签：c++, copy-constructor

写了这个小类，每次创建这个类的对象时都会生成一个UUID。

```
#include <boost/uuid/uuid.hpp>
#include <boost/uuid/uuid_generators.hpp>
#include <boost/uuid/uuid_io.hpp>    

class myClass {

public:

    boost::uuids::uuid GetUUID();

    virtual ~myClass();

    myClass() {   // constructor
        mId = boost::uuids::random_generator()();
        std::cout<< "object created with uuid " << mId <<std::endl;
    }

private:

    boost::uuids::uuid mId;

} 
```

在某些时候，我将这些对象推送到一个向量，并使用简单的赋值运算符将该向量与另一个向量相等。为了确保新向量中的对象不会生成新的 UUID，我想编写一个复制构造函数。但正如您所见，构造函数不需要参数。所以我不确定如何编写复制构造函数。此外，如果我有多个变量而不是只有一个 UUID，我该如何处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:28:18.563

您需要以下签名：

```
 myClass(const myClass& other)
 {
     mId = other.mId;
 } 
```

还有赋值运算符

```
 myClass& operator=(const myClass& other)
 {
     mId = other.mId;
     return *this;
 } 
```

请注意，如果您不实现这些，编译器生成的将执行浅拷贝，因此不会生成新的 UUID。但是你应该让它们遵守三规则（毕竟你确实有一个析构函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:31:06.353

编译器将为您生成一个复制构造函数和一个赋值运算符。如果此操作唯一要做的就是复制所有成员，那么编译器生成的操作将完全执行此操作。如果不是，复制构造函数的签名是：

```
myClass( const myClass& other ) 
```

作业的签名是：

```
myClass& operator=( const myClass& other ) 
```

亲切的问候

托尔斯滕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:38:14.493

在这种情况下，编译器生成的默认复制构造函数和赋值运算符应该符合您的预期，因此您不需要显式定义它。

# eclipse - Tomcat没有在eclipse中运行

> ID：11326216
> 
> 赞同：1
> 
> 时间：2012-07-04T09:26:59.587
> 
> 标签：eclipse, tomcat, servlets

我试图让 Tomcat 在 Eclipse 中工作，但它只是拒绝。我已经按照[这个](http://www.vogella.com/articles/EclipseWTP/article.html)和[这个](http://theopentutorials.com/env-setup/java-ee/how-to-configure-apache-tomcat-in-eclipse-ide/)教程。但尽管我努力，它仍然显示下面的页面。它说服务器在 Eclipse 中成功启动。但我无法在浏览器中访问 localhost:8080。如果我从开始菜单手动启动它，服务器工作得非常好。但是，当我尝试从 Eclipse 运行应用程序时，它不起作用。有人可以帮我吗？

![在此处输入图像描述](../Images/69da4b289568a1915c03be05bfd89b3d.png)

![在此处输入图像描述](../Images/106fee4edec254ec404ecf6235c3d5ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:06:33.997

您似乎想在域根目录上访问您的 Web 项目，而不是在默认为 Eclipse 项目名称的 Web 项目的默认上下文根目录上访问。`http://localhost:8080/myproject`例如，如果您的 Eclipse 项目名称是“myproject” ，那么它将`FirstServlet`在`http://localhost:8080/myproject/FirstServlet`.

如果您需要访问域根上的 Web 项目，则应将 Web 项目的上下文根更改为`/`. 您可以在 Web 项目属性的*Web Project Settings*条目中执行此操作，您可以通过右键单击项目并选择*Properties*来访问该条目。

![在此处输入图像描述](../Images/f32cda80ade86a944199ade2f174537a.png)

请注意，这些 Tomcat 特定的 404 错误表明 Tomcat 运行良好。如果 Tomcat 没有运行，那么您会得到一个特定于 webbrowser 的“连接超时”错误页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:30:37.617

您需要使用`localhost:8080/{project-name}/FirstServlet` 或设置上下文根到/来自 Eclipse 设置才能像访问它一样`localhost:8080/FirstServlet`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T09:52:54.260

谢谢它真的有帮助。在 Eclipse 中添加 Web 模块（ROOT）有助于 Navugat 添加外部 Web 模块并将 ROOT 文件夹添加到我的 Web 模块中。

从 TOMCAT_HOME/webapps/ROOT 复制 ROOT 文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:17:12.353

我有一个解决方案给你。我猜你已经在 Eclipse 上配置了 Tomcat。然后单击服务器选项卡，然后双击服务器（如在 tomcat 服务器中）。将打开一个 tomcat 配置页面。现在查看页面的左下角，您会发现一个名为 modules 的选项卡。点击它。点击--->添加模块-->导航到Tomcats WepApp文件夹--->“你的部署文件夹”

![在此处输入图像描述](../Images/8a7803d54dd3bb2adee98372c2ef5647.png)

![在此处输入图像描述](../Images/9d872ea98ab167564bfc304883c2429f.png)

上图显示了我如何从 Add External we Module 导航并将 ROOT 文件夹添加到我的 web 模块。请记住我在 Eclipse 中添加了服务器。我希望你也这样做。

# jquery - 在没有滚动偏移的情况下悬停在元素上时显示元素

> ID：11326227
> 
> 赞同：0
> 
> 时间：2012-07-04T09:27:55.973
> 
> 标签：jquery

我正在尝试从 AjaxControlToolkit 编写一个与[HoverMenuExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HoverMenu/HoverMenu.aspx)等效的 jQuery ，这样当我将鼠标悬停在一个元素上时，我可以显示一个包含一些上下文相关帮助的 div。

我可以在页面首次加载时完成这项工作（鼠标悬停在第一个帮助符号上）：
![在此处输入图像描述](../Images/0463524d2c58be3ec48a02f834aa3b84.png)

但是当页面向下滚动时，div 会被垂直滚动的量所抵消（如果我有水平滚动，它也会向右移动）（鼠标仍然悬停在第一个帮助符号上）： ![在此处输入图像描述](../Images/1cf0a92ada8f3be5b05c70f78099d7c9.png)

我的 jQuery 是：

```
$('.hoverHelpAnchor').hover(function (e)
{
    $(this).next().show().css('left', e.pageX).css('top', e.pageY);
}
, function ()
{
    $(this).next().hide();
}); 
```

CSS是：

```
.hoverHelp
{
    display: none;
    background-color: White;
    border-style: solid;
    border-width: thin;
    border-color: Black;
    width: 200px;
    z-index: 10000;
    position: fixed;
    margin: 2;
} 
```

我的标记是：

```
<img src="@Url.Content("~/Content/images/help.png")" class="hoverHelpAnchor" alt="" />
<div class="hoverHelp">
     Project Name help blah blah blah very very very very very very very very long string that I want to word-wrap
</div> 
```

如果有人能指出我缺少的内容以说明页面滚动，我将不胜感激，这样 div 就不会出现在偏移位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:40:18.390

我希望我明白了，对吧

获取发生悬停的元素的位置，并在同一位置或周围某处显示您的工具提示

```
 $('.hoverHelpAnchor').hover(function (e)
    {
        var pos = $(this).position();
        $(this).next().show().css('position', 'absolute').css('left', pos.left).css('top', pos.top);
    }
    , function ()
    {
        $(this).next().hide();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:36:59.897

您对元素的定位引起了问题。您可能希望它定位[absolute](http://www.w3schools.com/Css/css_positioning.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:33:30.023

您需要将悬停帮助框绝对定位在问号框内，然后从那里定位。

您也可以完全使用 CSS 来完成此操作，方法是隐藏帮助元素，然后在`:hover`问号上方取消隐藏其中的工具提示。

这是我刚刚制作的[JSFIDDLE 示例](http://jsfiddle.net/42Ugz/2/)

# .net - 如何向 WPF CheckBox 控件添加左填充？

> ID：11326229
> 
> 赞同：1
> 
> 时间：2012-07-04T09:28:00.510
> 
> 标签：.net, wpf, checkbox, padding, controltemplate

再会，

我正在为 WPF 应用程序中的 CheckBox 控件设置样式。我的目标是在 CheckBox“默认”矩形/边框的左侧添加一个填充。

默认情况下，填充仅应用于 CheckBox 的内容区域。Margin 确实在左侧起作用，但在这种情况下，CheckBox 不会注册单击以选中该框。

有人有想法吗？提前致谢！！

**编辑#1**，作为对 Vlad 的回答，一个显示填充/边距差异的示例：

```
<StackPanel Orientation="Vertical">
   <Border Width="400" Height="50" BorderBrush="Black" BorderThickness="1">
      <CheckBox Content="Normal, clickable everywhere" />
   </Border>
   <Border Width="400" Height="50" BorderBrush="Black" BorderThickness="1">
      <CheckBox Content="Content padding, clickable everywhere" Padding="5" />
   </Border>
   <Border Width="400" Height="50" BorderBrush="Black" BorderThickness="1">
      <CheckBox Content="Control margin, not clickable in area 5px around" Margin="5" />
   </Border>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:05:00.160

好吧，预计它会以这种方式运行。边距被认为是控件的“外部”，因此边距区域不会让点击进入控件。相反，填充区域被认为是控件的一部分（在控件本身和呈现内容的“客户区”之间），因此填充区域正在获得点击。

看起来你可以只用`Padding="5,0,0,0"`. （这只会在左侧添加填充。）请参阅[这张](http://i.msdn.microsoft.com/dynimg/IC155786.png)关于 WPF 盒子模型的图片。

* * *

更新：根据您的评论，您需要破解默认模板。默认模板可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms752319%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms752319%28v=vs.100%29.aspx)。

您需要进行以下更改：将 包含`BulletDecorator`到`Grid`中，并将所需的边距设置为`BulletDecorator`. 这一定会有所帮助，因为希望重点将应用于整体`Grid`而不是`BulletDecorator`. 或者，或者，您可以将边距设置为`BulletDecorator.Bullet`'s `Border`。

* * *

更新：当然最好不要将整个模板定义复制到实际代码中以提高可维护性。可以通过以下技巧避免。

假设您决定在`Bullet`'s设置额外的边距`Border`。您可以尝试`Border` *在`Checkbox`'s`Bullet`*中覆盖默认样式。以下技巧应该做到这一点：

```
<!-- first, define a style for border -->
<Style TargetType="Border" x:Key="MyCoolBorderWithMargin">
    <Setter Property="Margin" Value="5,0,0,0"/>
</Style>

<!-- then, define a style for BulletDecorator -->
<!-- this style overrides the style for inner borders -->
<Style TargetType="BulletDecorator" x:Key="MyCoolDecoratorStyle">
    <Style.Resources>
        <Style TargetType="Border"
               BasedOn="{StaticResource MyCoolBorderWithMargin}"/>
    </Style.Resources>
</Style>

<!-- finally, override the style for CheckBox -->
<Style TargetType="CheckBox">
    <Style.Resources>
        <Style TargetType="BulletDecorator"
               BasedOn="{StaticResource MyCoolDecoratorStyle}"/>
    </Style.Resources>
</Style> 
```

这应该会有所帮助。

Beware that this code is a hack, using the knowledge about how the default control template for `CheckBox` is implemented in the current WPF version. (If you are using WPF version different from 4.0, you may need to update the code, as it's version-specific: different versions of WPF use different control templates!)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:36:35.460

听起来您正在寻找`Margin`而不是`Padding`。你找到[文档了](http://msdn.microsoft.com/en-us/library/ms751709.aspx#wcpsdk_layout_amp_padding_properties)吗？我认为它给出了相当彻底的解释。

仅在左侧添加空格的复选框：

```
<CheckBox Margin="50 0 0 0"/> 
```

# python - 将 django-tables 的列自定义为下拉列表

> ID：11326234
> 
> 赞同：0
> 
> 时间：2012-07-04T09:28:18.793
> 
> 标签：python, django, django-tables2

我有一个表格，在其中比较所选数据的两个版本。该数据实际上存储了多个版本，因此在我的表中，我的列如下：

```
 class ver_compare(tables.Table):
       new_db = tables.CheckBoxColumn()
       data = tables.Column()
       current_rev = tables.Column()
       next_rev = tables.Column()* 
```

现在，我希望作为每个单元格的最后一个字段有一个可供选择的版本下拉列表，类似于选择字段。有什么办法可以走吗？？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:23:22.333

您可以使用模板列。这里有我能想到的最简单的模型。当然，您需要将模板更改为更有用的东西。

```
countries = [
    {'name': 'Australia', 'population': 21, 'tz': 'UTC +10', 'visits': 1},
    {'name': 'Germany', 'population': 81, 'tz': 'UTC +1', 'visits': 2},
    {'name': 'Mexico', 'population': 107, 'tz': 'UTC -6', 'visits': 0},
]

template = """
<select>
<option{% if record.visits = 0%} selected {% endif %}>0
<option{% if record.visits = 1%} selected {% endif %}>1
<option{% if record.visits = 2%} selected {% endif %}>2
</select>
"""

class CountryTable(tables.Table):
    name = tables.Column()
    population = tables.Column()
    tz = tables.Column(verbose_name='time zone')
    visits = tables.TemplateColumn(template) 
```

# regex - 如何将字符串的某个部分中的某些字符与正则表达式匹配？

> ID：11326243
> 
> 赞同：0
> 
> 时间：2012-07-04T09:28:53.700
> 
> 标签：regex

我有一些看起来像这样的网址：

```
http://subdomain_domain_com/some_path

http://subdomain_domain_com/?some_var=some_value 
```

如何编写正则表达式以仅匹配域中的下划线？

PS：我在 ruby​​ 1.8.7 中使用正则表达式引擎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:37:18.233

这是一个正则表达式（基于我在关于 URI 的评论中写的异常）：

```
(?<=https?://).*(?=/) 
```

它涵盖了 HTTP 和 HTTPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:15:59.530

用这个：

```
https?://(?<underscore>[^/]+) 
```

并获取名为*下划线的组*

# android - 页面卷曲下载链接丢失

> ID：11326248
> 
> 赞同：-2
> 
> 时间：2012-07-04T09:29:08.710
> 
> 标签：android

我很难在 stockoverflow 中找到关于 android page curl 的下载链接。就像活动之间的iphone动画一样。他们给了我这个链接：[http](http://code.google.com/p/android-page-curl/) ://code.google.com/p/android-page-curl/但我找不到下载链接。这是死链接吗？我在这两个链接中不知何故感到困惑：

[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

[https://github.com/harism/android_page_curl/](https://github.com/harism/android_page_curl/)

他们是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:43:54.610

要下载源代码，请使用[此链接](http://tortoisesvn.net/downloads.html)下载 TortoiseSVN 并安装它。

`http://android-page-curl.googlecode.com/svn/trunk/`现在在您的 PC 中的任何位置创建一个文件夹，然后右键单击它，单击 SVN Checkout 选项并粘贴[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)这个

`https://github.com/harism/android_page_curl.git`对于[https://github.com/harism/android_page_curl/](https://github.com/harism/android_page_curl/)这个_

在 URL 字段中，然后单击确定。您的代码将下载到您的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:31:18.807

可以使用 subversion 下载源代码，如下[所述](http://code.google.com/p/android-page-curl/source/checkout)：

*命令行访问 使用此命令匿名签出最新的项目源代码：*

```
# Non-members may check out a read-only working copy anonymously over HTTP.
svn checkout http://android-page-curl.googlecode.com/svn/trunk/ android-page-curl-read-only 
```

# html - 如何扩展 div azure 正方形以填充正方形，棕色？

> ID：11326249
> 
> 赞同：0
> 
> 时间：2012-07-04T09:29:09.363
> 
> 标签：html, css

1 - 如何扩展天蓝色正方形`<div id="Blue">`以填充正方形，棕色？

2 - 我如何将`#frame`尺寸高度与我的分辨率窗口匹配，因为它有一段时间变大，然后滑动窗口向下滚动以查看底部，有时它变小了？

感谢任何帮助

你可以在这里看到 [演示 jsFiddle](http://jsfiddle.net/centerwow/hfuGx/43/show/)

相关代码。

**html**

```
<div id="frame">
    <div id="inside_window">
        <div id="Yellow"></div>
        <div id="Green"></div>
    <div id="Blue"><img src="http://www.centerwow.com/stackoverflow/shark.png"  height="50" width="50" />
    <img src="http://www.centerwow.com/stackoverflow/ship.png"  height="100" width="120" /></div>
    <div id="Red"></div>
    <div id="ver"></div>
    <div id="hor"></div>
    <div id="ver2"></div>
</div> 
```

**风格**

```
#Blue{
    position: absolute;
    min-height:100%;
    min-width:75%;
    -webkit-border-radius: 0px;    
    margin: 0 150px;    
    background-color: #62A9FF;
    z-index:10;
    display:table;
    font-size:220%;
    cursor: url(http://www.centerwow.com/stackoverflow/magnet.png), auto;
    left:0px;
    top:0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:37:51.847

所以这是你第一个问题的答案：http: [//jsfiddle.net/surendraVsingh/hfuGx/49/](http://jsfiddle.net/surendraVsingh/hfuGx/49/)

**将最小高度更改为高度：100%；**

```
#Blue
{
    position: absolute;
    height:100%;
    min-width:75%;
    -webkit-border-radius: 0px;    
    margin: 0 150px;
    background-color: #62A9FF;
    z-index:10;
    display:table;
    font-size:220%;
    cursor: url(http://www.centerwow.com/stackoverflow/magnet.png), auto;
    left:0px;
    top:0px; 
} 
```

**对于您的第二个问题：** 在您的 css 代码顶部添加以下给定 css：

```
html, body{height:100%;} 
```

**注意：**如果浏览器窗口高度太小，它会显示一个滚动条，因为它会将高度作为绿色和红色 div 的总和。

# javascript - 使用 highcharts/highstock 中的按钮打开/关闭标志

> ID：11326254
> 
> 赞同：1
> 
> 时间：2012-07-04T09:29:30.473
> 
> 标签：javascript, jquery, html, highcharts, highstock

我想知道是否有人会知道在 jQuery 中是否有可能有一个按钮来显示/隐藏显示在 highcharts 股票图表上的标志，例如我的 jsfiddle 中的那个[http://jsfiddle.net/hcharge/G7rsh/6 /](http://jsfiddle.net/hcharge/G7rsh/6/)

我假设你会使用这样的东西

```
$('.on').click(function() {
        $('flags').toggle('1000', function() {
         });
    }); 
```

我只是不确定您将如何引用图表中的标志？我还希望按钮在单击时切换类。任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:42:55.597

您可以在 Highcharts 中调用 Series.show() 和 Series.hide() 方法：http: [//jsfiddle.net/G7rsh/7/](http://jsfiddle.net/G7rsh/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:59:04.937

Here is a [poc fiddle](http://jsfiddle.net/G7rsh/8/)

Torstein answered before me but that's not fair, he created the lib :-D

BTW, his solution is better than mine

# c# - xml Entity Framework 对象的反序列化具有空子对象

> ID：11326261
> 
> 赞同：1
> 
> 时间：2012-07-04T09:29:51.880
> 
> 标签：c#, xml, silverlight, entity-framework, deserialization

我遇到了 EF 和 xml 反序列化的问题。我设法在 xml 文件中序列化 EF 对象，但我被这些文件的反序列​​化所困扰。

我的序列化功能：

```
public static void SerializeIntoFile(object inputObject, string fileName)
{
    DataContractSerializer serializer = new DataContractSerializer(typeof(Form));

    using (XmlWriter wr = XmlWriter.Create(new StringBuilder(fileName)))
    {
        serializer.WriteObject(wr, inputObject);
    }
} 
```

我的反序列化功能：

```
 public static T DeserializeFromStream<T>(Stream stream)
    {
        DataContractSerializer dataContract = new DataContractSerializer(typeof(Form));
        return (T)dataContract.ReadObject(stream);
    } 
```

此函数在 silverlight 中使用此函数调用：

```
private void FilePicker(object sender, System.Windows.RoutedEventArgs e)
{
    var filepicker = new OpenFileDialog();
    bool? userClickedOK = filepicker.ShowDialog();
    if (userClickedOK == true)
    {
        var form = SerialisationHelper.DeserializeFromStream<Form>(filepicker.File.OpenRead());
    }
} 
```

和输入 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Form xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="i1" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/" xmlns="http://schemas.datacontract.org/2004/07/SuiviAT.WebService.EFModel">
    <EntityKey xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Data" z:Id="i2" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
        <d2p1:EntityContainerName>
            SuiviATModelContainer
        </d2p1:EntityContainerName>
        <d2p1:EntityKeyValues i:nil="true" />
        <d2p1:EntitySetName>
            FormSet
        </d2p1:EntitySetName>
    </EntityKey>
    <Id>
        0
    </Id>
    <Rows>
        <Row z:Id="i3">
            <EntityKey xmlns:d4p1="http://schemas.datacontract.org/2004/07/System.Data" z:Id="i4" xmlns="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
                <d4p1:EntityContainerName>
                    SuiviATModelContainer
                </d4p1:EntityContainerName>
                <d4p1:EntityKeyValues i:nil="true" />
                <d4p1:EntitySetName>
                    RowSet
                </d4p1:EntitySetName>
            </EntityKey>
            <Form z:Ref="i1" />
            <FormId>
                0
            </FormId>
            <FormReference xmlns:d4p1="http://schemas.datacontract.org/2004/07/System.Data.Objects.DataClasses">
                <d4p1:EntityKey xmlns:d5p1="http://schemas.datacontract.org/2004/07/System.Data" i:nil="true" />
            </FormReference>
            <Id>
                0
            </Id>
            <Label>
                Couleur
            </Label>
            <Type>
                String
            </Type>
            <Value>
                Bleu
            </Value>
        </Row>
    </Rows>
</Form> 
```

反序列化后返回的对象是 children null 我不知道为什么......

如果有人可以帮助我，将不胜感激！

谢谢！

# android - 如何以编程方式找出该文件是否已经存在？

> ID：11326266
> 
> 赞同：-5
> 
> 时间：2012-07-04T09:30:09.147
> 
> 标签：android, file

实际上我正在开发一个应用程序，当应用程序第一次运行时，它将创建一个 txt 文件，如果文件已经存在，那么它将简单地将其写入文件。
但我不知道如何以编程方式检查该文件是否存在。我试过了，

```
try  
    {  
        FPartyCreation = new File ("/data/data/com.MediExcel/files/","dbPartyCreation.dat");  
        if (FPartyCreation.exists())  
        {  
            writeOnFile();
        }  
        else  
        {  
            FPartyCreation.createNewFile();  
            writeOnFile();
        }  
    }  
    catch (IOException ioe)  
    {  
        ioe.printStackTrace();  
    } 
```

但它给出了以下错误，并且文件也没有在同一路径上创建。

```
07-06 01:39:26.183: E/AndroidRuntime(23107): FATAL EXCEPTION: main
07-06 01:39:26.183: E/AndroidRuntime(23107): java.lang.NullPointerException
07-06 01:39:26.183: E/AndroidRuntime(23107):    at com.MediExcel.AddMethodPartyCreation.getMethod(AddMethodPartyCreation.java:28)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at com.MediExcel.PartyCreationActivity$1.onClick(PartyCreationActivity.java:64)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.view.View.performClick(View.java:3511)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.view.View$PerformClick.run(View.java:14105)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.os.Handler.handleCallback(Handler.java:605)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.os.Looper.loop(Looper.java:137)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at java.lang.reflect.Method.invokeNative(Native Method)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at java.lang.reflect.Method.invoke(Method.java:511)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-06 01:39:26.183: E/AndroidRuntime(23107):    at dalvik.system.NativeStart.main(Native Method) 
```

请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:34:49.393

创建 SQLite 数据库 -

```
public class DatabaseHelper extends SQLiteOpenHelper {

static final String dbName="demoDB";
static final String employeeTable="Employees";
static final String colID="EmployeeID";
static final String colName="EmployeeName";
static final String colAge="Age";
static final String colDept="Dept";

static final String deptTable="Dept";
static final String colDeptID="DeptID";
static final String colDeptName="DeptName";

static final String viewEmps="ViewEmps"; 
```

创建数据库

```
public void onCreate(SQLiteDatabase db) 
{
    // TODO Auto-generated method stub

    db.execSQL("CREATE TABLE "+deptTable+" ("+colDeptID+ " INTEGER PRIMARY KEY , "+
    colDeptName+ " TEXT)");

  db.execSQL("CREATE TABLE "+employeeTable+" 
    ("+colID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
        colName+" TEXT, "+colAge+" Integer, "+colDept+" 
    INTEGER NOT NULL ,FOREIGN KEY ("+colDept+") REFERENCES 
    "+deptTable+" ("+colDeptID+"));");

  db.execSQL("CREATE TRIGGER fk_empdept_deptid " +
    " BEFORE INSERT "+
    " ON "+employeeTable+

    " FOR EACH ROW BEGIN"+
    " SELECT CASE WHEN ((SELECT "+colDeptID+" FROM "+deptTable+" 
    WHERE "+colDeptID+"=new."+colDept+" ) IS NULL)"+
    " THEN RAISE (ABORT,'Foreign Key Violation') END;"+
    "  END;");

  db.execSQL("CREATE VIEW "+viewEmps+
    " AS SELECT "+employeeTable+"."+colID+" AS _id,"+
    " "+employeeTable+"."+colName+","+
    " "+employeeTable+"."+colAge+","+
    " "+deptTable+"."+colDeptName+""+
    " FROM "+employeeTable+" JOIN "+deptTable+
    " ON "+employeeTable+"."+colDept+" ="+deptTable+"."+colDeptID
    );
  //Inserts pre-defined departments
  InsertDepts(db);  
 } 
```

看看这个[Using-SQLite-Database-with-Android](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android#)博客。希望这个博客足以满足您的查询。

# c# - 如何压缩包含文件的现有文件夹？

> ID：11326267
> 
> 赞同：0
> 
> 时间：2012-07-04T09:30:09.850
> 
> 标签：c#, sharpziplib

我正在使用 SharpZipLib，我需要压缩一个现有文件夹，其中有文件。

**示例：** 我需要压缩“Folder2”

C:\文件夹1\文件夹2

Folder2 有两个文件 a.txt 和 b.txt

我当前的代码使用“FastZip”

```
 FastZip fastzip = new FastZip();
        Boolean recurse = true;
        String filter = null;

        fastzip.CreateZip(folderName, @"\" + folderName, recurse, filter); 
```

我收到以下错误：

*拒绝访问路径 C:\Folder1\Folder2。*

SharZipLib 上有专家吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:35:00.750

我本来希望 c:\folder1\folder2 将它作为选项传递 folder2 因为您没有显示所有代码，所以会失败。

我希望以下可能会工作假设 foldername = "c:\folder1\folder2"

```
FastZip fastzip = new FastZip(); 
        Boolean recurse = true; 
        String filter = null; 

        fastzip.CreateZip("azip.zip",  folderName, recurse, filter); 
```

# c# - 从 SQL Server 读取十进制值时出现溢出异常

> ID：11326269
> 
> 赞同：17
> 
> 时间：2012-07-04T09:30:16.587
> 
> 标签：c#, .net, sql-server, ado.net, decimal

我想知道这是一个错误还是我出错了。

我正在`SqlDataReader`从 SQL Server 2008 数据库加载值，但在某些情况下，它无法将 SQL 值转换为 .net 值。（.NET 4.0）

我已经将其追溯到一个演示实际问题的测试用例：

工作示例：

```
"select convert(decimal(38, 19), 260000 ) as test"
rs.GetValue(1);
--> returns 260000 (decimal) 
```

不工作的例子：

```
"select convert(decimal(36, 26), 260000 ) as test"

rs.GetValue(1);
--> throws
   System.OverflowException: Conversion overflows.
   at System.Data.SqlClient.SqlBuffer.get_Decimal()
   at System.Data.SqlClient.SqlBuffer.get_Value()
   at System.Data.SqlClient.SqlDataReader.GetValueInternal(Int32 i)
   at System.Data.SqlClient.SqlDataReader.GetValues(Object[] values) 
```

我检查了 SQL Server 返回的实际值。它们的不同之处在于，非工作的使用 4 个整数来表示值，工作的只有 3。

我还使用 .net Reflector 检查了源代码，它揭示了如果存在超过 3 个值的值，则会引发异常，但我不了解它们背​​后的机制。

所以，我想知道这是否是.net 框架中的真正错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T10:39:51.663

除了可能过于精确之外，这并不是您做错了什么。我也不认为它是一个[新问题](http://weblogs.sqlteam.com/mladenp/archive/2010/08/31/when-does-sql-server-decimal-not-convert-to-net-decimal.aspx)。

你可以说它是一个错误，或者只是功能上的一个差距。.Net`Decimal`结构不能代表存储在 SQL Server 中的值，`decimal`因此`OverflowException`会抛出一个。

您需要在检索之前将值操作为数据库中兼容的值，或者以原始二进制或字符串格式读取数据并在 .Net 端进行操作。

或者，您可以编写一个新类型来处理它。

首先使用兼容的`decimal`定义可能更简单，除非您真的需要那种精度。如果你这样做，我很想知道为什么。

# ruby-on-rails - Ruby 应用程序的类似 PHP-FPM 的运行

> ID：11326277
> 
> 赞同：1
> 
> 时间：2012-07-04T09:30:50.123
> 
> 标签：ruby-on-rails, ruby, php

PHP 有 PHP-FPM，一个 PHP 进程池，可以运行、管理、离开和重生等。这个池可以用于系统中的一堆不同的应用程序。您使用虚拟主机设置 nginx 并告诉它`*.php`在特定端口（或 unix 套接字）上转发请求，然后由 worker 处理其余部分。

当您在一个资源受限的盒子上运行许多不经常使用的小应用程序时，它真的**非常有用。**

对于 Ruby，我还没有看到类似的东西，因为 Rails 需要一段时间才能启动，并且是一个可以运行的独立应用程序，而不是 PHP 有一个或多个任意的入口点，你可以扔给它。 .

**我的假设是否正确，您不能使用 Ruby 完全免费地制作 FPM 风格的应用程序？**

*（我知道 Heroku 并且已经将它用于副项目，但我更感兴趣的是了解更多事情是如何在幕后工作的。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:54:26.043

多看几眼后：

据我所知，最接近的等价物是[Phusion Passenger（使用 Nginx 设置）](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)，它根据应用程序的请求（或在需要时提前）为应用程序设置工作人员，然后在可配置的空闲期后终止。

足够接近（tm）。:-)

# c# - C# 测试变量是否赋值

> ID：11326279
> 
> 赞同：14
> 
> 时间：2012-07-04T09:30:52.493
> 
> 标签：c#, .net, linq

我正在尝试编写 Linq MinBy 扩展方法

```
public static class Extensions
{
    public static T MinBy<T>(this IEnumerable<T> source, Func<T,int> selector)
    {
        T min;
        int? minKey = null;
        foreach (var x in source)
        {
            var key = selector(x);
            if (minKey == null || key < minKey)
            {
                minKey = key;
                min = x;
            }
        }
        if (minKey == null)
        {
            throw new ArgumentException("source should not be empty");
        }
        return min;
    }
} 
```

我认为我的逻辑是正确且可读的。但我得到一个构建错误

> 使用未分配的局部变量“min”

我能做些什么呢？我可以测试变量是否已分配？

* * *

澄清： MinBy 函数可以回答以下问题。哪个数字 [-5, -2, 3] 的正方形最小？

```
> new List<int>{-5,-2,3}.MinBy(x => x*x)
-2 
```

.NET 的 Min 函数回答了一个不同的问题（这是最小的正方形）

```
> new List<int>{-5,-2,3}.Min(x => x*x)
4 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T09:32:24.450

您需要这样的默认值`min`：

`T min = default(T);`

[`default()`您可以在 MSDN 上阅读更多信息：](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.100%29.aspx)

> 给定参数化类型 T 的变量 t，语句 t = null 仅在 T 是引用类型且 t = 0 仅适用于数值类型而不适用于结构时才有效。解决方案是使用 default 关键字，它将为引用类型返回 null，而为数值类型返回零。对于结构，它将返回结构的每个成员，根据它们是值类型还是引用类型，初始化为零或空。对于可为空的值类型，默认返回一个 System.Nullable，它像任何结构一样被初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T09:33:31.033

添加一个默认值`min`：

```
T min = default(T); 
```

它抱怨的原因是编译器无法验证在行`min`中使用它之前是否已经分配了一个值`return min;`。无法引用未分配的局部变量，因此编译器会产生错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:32:34.817

那是因为 min 是在条件内部分配的。编译器无法确定它是否会得到一个值，你应该用[默认](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.100%29.aspx)值初始化 min。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:57:26.527

**不**，你不能测试一个变量是否被赋值，你总是会得到一个编译错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T09:57:24.660

仅供参考，这就是我最终得到的

```
 public static T MinBy<T>(this IEnumerable<T> source, Func<T,int> selector)
    {
        T min = default(T);
        bool started = false;
        int minKey = default(int);
        foreach (var x in source)
        {
            var key = selector(x);
            if (!started || key < minKey)
            {
                minKey = key;
                min = x;
                started = true;
            }
        }
        if (!started)
        {
            throw new ArgumentException("source should not be empty","source");
        }
        return min;
    } 
```

# c# - 首次显示后如何重置jit treemap控件？

> ID：11326282
> 
> 赞同：4
> 
> 时间：2012-07-04T09:30:57.463
> 
> 标签：c#, json, thejit

我使用[jit 树图](http://thejit.org/static/v20/Jit/Examples/Treemap/example1.html)来显示 .txt 文件中最常用的前 50 个单词。我的代码部署[在这里](http://ntextnetwork.apphb.com)。

第一次上传文本后，我收到 JSON 结果并将其绑定到 jit 控件。到目前为止一切都很好。但是，如果我在没有手动刷新页面的情况下再次上传文件，我会得到第一个结果中的框与第二次上传中的框重叠的结果。

见下图。

![JSON的重叠](../Images/294bf6a43e8ff540e6a67d0b37fb35ba.png)

**问题：**如何重置此控件以仅显示新的 JSON 并丢弃任何以前的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T09:58:05.123

在加载新数据之前清空包含可视化的 div。

在`InitTreeMap`函数的第一行（`var tm = new $jit.TM.Squarified({`行前），添加：

```
$('#infovis').empty(); 
```

# c# - 正则表达式 - 是否可以找到重叠的组？

> ID：11326284
> 
> 赞同：1
> 
> 时间：2012-07-04T09:31:08.450
> 
> 标签：c#, regex

我是正则表达式的新手，只想知道是否有可能在匹配中找到“重叠”组。

假设以下字符串：

> 20122 0029431 7094 0111 5890

我现在想要所有匹配项：4number+space+4number+space+4number

我尝试的是这样的：`[0-9]{4}[\s][0-9]{4}[\s][0-9]{4}`

但这只是给了我：9431 7094 0111

我想要的是这些比赛：

*   9431 7094 0111
*   7094 0111 5890

这可以用正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:38:01.223

是的，如果您将[前瞻断言](http://www.regular-expressions.info/lookaround.html)与[捕获组](http://www.regular-expressions.info/brackets.html)结合使用：

```
Regex regexObj = new Regex(@"(?=(\d{4}\s\d{4}\s\d{4}))");
Match matchResult = regexObj.Match(subjectString);
while (matchResult.Success) {
    resultList.Add(matchResult.Groups[1].Value);
    matchResult = matchResult.NextMatch();
} 
```

# c++ - 固定大小的 std::vector

> ID：11326286
> 
> 赞同：3
> 
> 时间：2012-07-04T09:31:13.363
> 
> 标签：c++, arrays, vector, stack

我目前正在更改访问数据结构的方式，并且正在审查向量向量的一般情况下的两种解决方案之一。

我的动机很简单；我想要缓存位置而不放弃我的接口。

我在编译时知道我的向量的最大大小，但它们并不总是达到最大值。常见的情况是80%左右，每个向量的总大小要比较小。如果我达到那个最大值，我在某处的逻辑上犯了错误，并希望它抛出一个错误。

想到的第一个解决方案是使用带有 std::vector 的池分配器，这似乎是个好主意，但可能有点混乱；之前没有正确使用分配器，我不太确定解决方案。我不太喜欢将数据与其所有者分开存储，我希望实现尽可能透明。

第二种解决方案目前对我来说很有效，但我想让它不那么符合要求。目前，它是这样的：

```
class Foo {
public:
        std::array<Bar, 10> bars;
        size_t used;

        // std::vector<Bar> bars; // reserved to 10... maybe

        void add(int var1, int var2) {
                if (used >= bars.size()) throw "Error";
                bars[used] = Bar(var1, var2);
                ++used;

                // std::vector alternative
                // bars.push_back(Bar(var1, var2));
        }
        void remove(size_t idx) {
                bars[idx] = bars.back();
                --used;

                // bars.back().~Bar(); // should happen, not sure if safe

                // std::vector alternative
                // bars[idx] = bars.back();
                // bars.pop_back();
        }
} 
```

如前所述，哪个效果很好。但是，如果我想将此解决方案移到其他地方，我宁愿不必再次实现它，并且在破坏方面具有适当的语义（类似于*实际*向量的语义）。

所以，我想知道一个好的解决方案可能是什么？目前，我已经开始包装一个`std::array`，但它开始变得凌乱，我确信这是已解决的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:43:52.857

有关具有类向量接口的固定大小数据结构的几个选项，请参阅此[链接。](http://binglongx.wordpress.com/tag/auto_buffer/)特别是，`boost::auto_buffer`您`eastl::fixed_vector`的代码似乎可行的选择。

另一种选择是使用 Hinnant 的[堆栈分配器](https://howardhinnant.github.io/stack_alloc.html)和常规的`std::vector`，但是 MSVC++ 在编译它时遇到了一些麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:16:11.670

Boost 有一个用于此目的的 MultiArray 类。

# coldfusion - ColdFusion 自定义标签调用 cfmail 作为 attibuteCollection 并抛出错误

> ID：11326287
> 
> 赞同：0
> 
> 时间：2012-07-04T09:31:13.943
> 
> 标签：coldfusion, structure, coldfusion-8, cfmail

我在 CF 8.0.1 上尝试这个，但失败了。我正在尝试将自定义值传递给自定义标签，如下所示：

```
<cf_call ckmail="#{to='test@test.com',from='test@test.com',subject='Error reported',mailserver='mail.domain.com',username='1234',password='tested'}#"> 
```

在自定义标签 call.cfm 我有以下内容：

```
<cfparam name="attributes.ckmail" default="">
<cfmail attributecollection = "#attributes.ckmail#"> 
```

我得到的错误是：

> 在第 11 行第 18 列发现无效的 CFML 构造。ColdFusion 正在查看以下文本：{

它在 CF9 中运行良好，但在 CF8.0.1（或以前的版本）中，它因上述消息而失败。

* * *

> 截至 2012 年 7 月 18 日的代码更新

* * *

我尝试使用 dan 的代码，但现在我面临一个不同的问题，在我的自定义标签中，我使用的是这样

```
 <cfset emailSetting = StructNew()>
   <!--- loop our query string values and set them in our structure --->
   <cfloop list="#attributes.ckmail#" index="key" delimiters=",">
     <cfset emailSetting["#listFirst(key,'=')#"] = urlDecode(listLast(key,"="))>
   </cfloop>
   <cfdump var="#emailSetting#"><cfabort>
       <cfmail attributecollection = "#emailSetting#"> 
```

以上是我在自定义标签中的设置，我从我的代码中将其称为

```
 <cf_call ckmail="to=i@test.com,from=test@domain.com,subject='Error reported',
    server=mail.domain.com,username=test@domain.com,password=tes@,type=html"> 
```

我现在得到的错误是“smtp”服务器未定义，

如果我在 cfadmin 中添加 smtp 详细信息，它可以工作，可能是它忽略了我输入的字段中的值，但是当 cfadmin 中也没有定义 smtp 设置时它会显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:56:56.077

隐式结构应该可以在 CF8.0.1 中正常工作。

您当然可以使用以下代码来使用 structNew() 函数构建结构：

```
<cfset mailArgs             = StructNew() />
<cfset mailArgs.to          = 'test@test.com' />
<cfset mailArgs.from        = 'test@test.com' />
<cfset mailArgs.subject     = 'Error reported' />
<cfset mailArgs.mailserver  = 'mail.domain.com' />
<cfset mailArgs.username    = '1234' />
<cfset mailArgs.password    = 'tested' />

<cf_call ckmail="#mailArgs#"> 
```

您能否在此处发布来自 ColdFusion 的更详细的错误报告，以便我们帮助您找到错误的确切位置？或者您可以发布更多代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:27:55.597

嗯....我想知道在自定义标签调用中，英镑符号对其他任何人来说是否看起来很奇怪？结构符号通常如下所示：

```
<cfset mystruct = {to='test@test.com',from='test@test.com',subject='Error reported',mailserver='mail.domain.com',username='1234',password='tested'}/> 
```

磅符号会导致 CF 尝试并“做某事”来合并值（就像当你这样做时一样`<cfset z = #x+y#/>` ......但将它们关闭允许 CF “看到”构造函数指示符（花括号）。

但我不确定自定义标签在该实例中的行为方式。你有没有试过这样称呼它：

```
<cf_call 
 ckmail={to='test@test.com',from='test@test.com',subject='Error reported',mailserver='mail.domain.com',username='1234',password='tested'}/> 
```

或者失败 - 正如建议的那样 - 提前将其设置为：

```
<cfset args = {to='test@test.com',from='test@test.com',subject='Error reported',mailserver='mail.domain.com',username='1234',password='tested'}/> 
```

然后调用：

```
<cf_call ckmail="#args#"/> 
```

看看这些是否有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:36:03.810

您在 ckmail 属性中使用了 struct 文字语法，我认为这改变了 CF8 和 CF9 之间的行为。我会尝试以老式的方式创建一个结构，看看是否可行。

# android - 使用 HttpURLConnection 将调用正文添加到 POST

> ID：11326289
> 
> 赞同：0
> 
> 时间：2012-07-04T09:31:16.050
> 
> 标签：android, http-post, httpurlconnection

我正在尝试使用 HTTPURLConnection 对服务器 api 进行 POST 方法调用。我的通话正文的 JSON 版本是：

```
{
    "grant_type"        : "password",
    "username"          : "perry.marange@zmod.co",
    "password"          : "password"
} 
```

如何使用 httpURLConnection 添加这部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:48:28.993

i think you can use the [Android Rest-Client](https://github.com/TylerSmithNet/RESTclient-Android) for sending data to a webservice

take classes `RequestMethod.java` and `RestClient.java` from this link [https://github.com/TylerSmithNet/RESTclient-Android/tree/master/RESTclient-example/src/com/tylersmith/restclient](https://github.com/TylerSmithNet/RESTclient-Android/tree/master/RESTclient-example/src/com/tylersmith/restclient)

and use those in your project like this

```
String webServiceUrl = "your-service-url";
RestClient client = new RestClient(webServiceUrl);
String serverResponse = "";
String inputJsonString = "{" + 
    "    \"grant_type\"        : \"password\"," + 
    "    \"username\"          : \"perry.marange@zmod.co\"," + 
    "    \"password\"          : \"password\"" + 
    "}";
client.setJSONString(inputJsonString);
client.addHeader("Content-Type", "appication/json"); // if required
try {
    client.execute(RequestMethod.POST);
    if (client.getResponseCode() != 200) {
        // response error
    }
    else
    {
                    // the response from server
        serverResponse = client.getResponse();
    }
} catch (Exception e) {
    // handle error
} 
```

# c# - 通过控制台应用程序中的 WCF 服务更新 asp 页面中的文本框值

> ID：11326292
> 
> 赞同：1
> 
> 时间：2012-07-04T09:31:20.567
> 
> 标签：c#, asp.net, wcf, service

我有 ac# 控制台应用程序计划在 Win 2003 服务器上运行，读取磁盘空间、cpu 使用率等值。

现在我想在 aspx 页面上在线或实时显示这些值。

到目前为止，这是我的（非工作）尝试：

WCF 服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace ServerMonitoring
{
    public class Service1 : IService1
    {

        public void InsertDataValues(DataValues server)
        {
            FreeDiskSpace = server.FreeDiskSpace;
            Data.FreeDiskSpace = FreeDiskSpace;
        }

        [DataMember]
        public decimal FreeDiskSpace
        {
            get { return Data.FreeDiskSpace; }
            set { Data.FreeDiskSpace = value; }
        }

    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace ServerMonitoring
{
    [ServiceContract]
    public interface IService1
    {        
        [OperationContract]
        void InsertDataValues(DataValues server);
    }

    [DataContract]
    public class DataValues
    {
        [DataMember]
        public decimal FreeDiskSpace;
        /*
        [DataMember]
        public decimal TotalDiskSpace;
        */
    }
} 
```

尝试从后面的代码更新文本框：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ServerMonitoring
{
    public partial class _Default : System.Web.UI.Page
    {
       protected void Page_Load(object sender, EventArgs e)
       {
        TextBox1.Attributes.Add("onchange", "DefaultValue();");
        HiddenFieldFreeDiskSpace.Value = Data.FreeDiskSpace.ToString();

        }
    }
} 
```

默认.aspx：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master"                 
AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="ServerMonitoring._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="head">
    <script type="text/javascript">
        function DefaultValue() {
            var data = $('#<%=HiddenFieldFreeDiskSpace.ClientID%>').val(); 
            var txt1 = document.getElementById("TextBox1");
            txt1.setAttribute("value", data);
        }
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server"     ContentPlaceHolderID="ContentPlaceHolder1">
    <div class="extra-wide-column">
        <h2>
            FIC Server Monitoring Services
        </h2>
        <br />
        <br />
        <br />
        <h3>System</h3>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
               <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
               <asp:HiddenField runat="server" ID="HiddenFieldFreeDiskSpace" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

要写入文本框的值来自我的控制台应用程序，并引用了我的 WCF 服务

```
static void UpdateList(string columnName, decimal diskSpaceValue)
    {
        Service1 serv = new Service1();
        DataValues dv = new DataValues();
        dv.FreeDiskSpace = diskSpaceValue;
        serv.InsertDataValues(dv);

    } 
```

但是，该值不会发送到asp页面

BR，同行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:36:10.577

我真的建议使用带有 RESTful WCF 服务的 jQuery。在 CodeProject 上查看这篇很棒的文章：

[http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)

起初这似乎是额外的工作，但对于你想要实现的目标来说绝对是值得的。

# iphone - NSLocale - 找到 CountryCode 然后使用它来部署代码

> ID：11326294
> 
> 赞同：0
> 
> 时间：2012-07-04T09:31:23.343
> 
> 标签：iphone, ios, locale, nslocale

我很困惑为什么这段代码不能按照下面的评论工作：

```
NSString *countryCode = [[NSLocale currentLocale] objectForKey: NSLocaleCountryCode];
NSLog(@"Country Code: %@", countryCode);

if (countryCode == @"US") {
    NSLog(@"Country is USA"); // Does not execute since the if does not pass
} 
```

语言环境是 en_US，因此国家代码是 US。在这方面一切都是正确的。我做错了什么，如何让“国家是美国”显示？

谢谢！

*在 iOS 5.1 和 6.0 上测试，结果相同*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:36:34.050

您必须使用该`isEqualToString:`方法来比较两个字符串的内容。`==`运算符测试两个指针是否相等，因此返回 0 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:36:42.497

无法使用`==`运算符比较字符串，请尝试使用`isEqualToString:`：

```
NSString *countryCode = [[NSLocale currentLocale] objectForKey: NSLocaleCountryCode];
NSLog(@"Country Code: %@", countryCode);

if ([countryCode isEqualToString: @"NL"]) {
    NSLog(@"Country is NL");
} 
```

`NL`自从我在荷兰开始使用:)

# git-svn - msysgit 从 1.7.11 中断？

> ID：11326301
> 
> 赞同：12
> 
> 时间：2012-07-04T09:32:00.930
> 
> 标签：git-svn, msysgit

将 msysgit 更新到 1.7.11 后，调用 git-svn 时出现以下错误：

```
$ git svn rebase
Can't locate Git/SVN/Editor.pm in @INC (@INC contains: /lib 
/usr/lib/perl5/5.8.8/msys
/usr/lib/perl5/5.8.8
/usr/lib/perl5/site_perl/5.8.8/msys
/usr/lib/perl5/site_perl/5.8.8 /usr/lib/perl5/site_perl .) 
at C:\Program Files\Git/libexec/git-core\git-svn line 81.
BEGIN failed--compilation aborted at C:\Program Files\Git/libexec/git-core\git-svn line 81. 
```

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T09:44:43.543

**更新**

似乎这个问题同时得到了解决。保留原始答案以供参考。

* * *

**原答案：**

经过一番研究，我发现了这个问题：[https ://github.com/msysgit/msysgit/issues/32](https://github.com/msysgit/msysgit/issues/32)

显然这个错误是已知的。

同时，我通过手动下载丢失的包来帮助自己：

```
cd C:/Program\ Files/Git/lib/perl5/site_perl
mkdir -p Git/SVN/Memoize
cd Git/SVN
for i in Editor.pm Fetcher.pm Prompt.pm Ra.pm Memoize/YAML.pm
do
  curl -x $HTTP_PROXY https://raw.github.com/gitster/git/master/perl/Git/SVN/$i > $i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:13:46.867

我能够浏览到 repo，但使用的 URL 略有不同： [https ://github.com/gitster/git/tree/master/perl/Git/SVN](https://github.com/gitster/git/tree/master/perl/Git/SVN)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:13:51.747

这个问题已经解决了，你可以下载并从这里安装 Git-1.7.11-preview20120710.exe： [http ://code.google.com/p/msysgit/downloads/list?q=full+installer+official+git](http://code.google.com/p/msysgit/downloads/list?q=full+installer+official+git)

# ruby - 数组仅按日期和月份排序（忽略年份）

> ID：11326305
> 
> 赞同：1
> 
> 时间：2012-07-04T09:32:17.423
> 
> 标签：ruby, arrays, ruby-on-rails-3

我有以下节日数组：

```
id = 1, Start_date = 2011-11-01 , End_date = 2016-12-31

[[1, 2011-11-01 , 2016-12-31],
[2, 2011-11-28 , 2016-12-31],
[3, 2011-10-01 , 2015-12-31],
[4, 2011-11-28 , 2021-12-31],
[5, 2010-11-15 , 2016-12-31],
[6, 2011-07-01 , 2017-12-31],
[7, 2012-02-01 , 2013-02-19],
[8, 2011-03-21 , 2015-04-30],
[9, 2012-03-01 , 2016-03-20]] 
```

我需要`start_date`从当前日期开始对其进行排序，但在这里忽略年份（仅使用月份和日期）。

实际上，这些是节日的开始日期和结束日期。我需要先显示正在运行的节日（按：start_date 排序），然后是即将到来的节日（按：start_date 分别排序）。

例如：

```
festival A: start_date: 15-may  - end_date: 15-june  
festival B: start_date: 01-june - end_date: 20-june
festival C: start_date: 01-oct  - end_date: 30-oct 
```

*   如果今天是 6 月 14 日，那么订单应该是`A B C`
*   如果今天是 6 月 16 日，那么订单应该是：`B C A`
*   最后，如果今天是 2 月 1 日，那么订单应该是：`A B C`

预先感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:30:00.073

假设`start_date`和`end_date`是[`Date`](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html)对象：

```
# get the festivals from the database
festivals = Festival.all

# define the day of interest
day = Date.today

# partition the festivals into running and upcoming
# based on the day of the year (1-366)
running, upcoming = festivals.partition { |f|
  (f.start_date.yday..f.end_date.yday).include? day.yday
}

# sort each array by day of the year
running.sort_by!{ |f| f.start_date.yday }
upcoming.sort_by!{ |f| f.start_date.yday } 
```

# google-app-engine - AppEngine SNI https 和 Google 网站管理员工具

> ID：11326314
> 
> 赞同：0
> 
> 时间：2012-07-04T09:32:41.840
> 
> 标签：google-app-engine, ssl, chrome-web-store

我正在尝试在 Chrome WebStore 清单中包含托管在 AppEngine（带有 SNI）上的 https url。

当我尝试上传 .zip 文件时，Chrome Webstore 抱怨说我不拥有该 url。

因此尝试使用 WebMaster Tools 添加 url。我可以添加 http url，但无法验证 https url（它抱怨无法访问服务器。我可以从浏览器访问 https url，没有问题。）

Google 小工具所有权验证工具 (https://www.google.com/gadgets/directory/verify) 也存在同样的问题，该工具无法找到（并因此验证）Appengine SNI https。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:04:03.663

感谢您指出问题。

许多类型的 Google 获取当前没有在其 SSL 握手中发送 SNI 详细信息，并且无法与服务对话。

我已安排重新启用该功能，并将在未来几天内推出。

# php - 父子数据

> ID：11326316
> 
> 赞同：1
> 
> 时间：2012-07-04T09:32:49.950
> 
> 标签：php, database

嗨，我正在一个项目中工作，我必须用父子关系保存数据。

数据结构是这样的：

```
flight_id     child_id      Flight_name 

1               1           E213    

2               2           E333

3               2           E444 
```

航班 1 没有`child_id`所以它的父 id 替换它，航班 2 有两个所以我必须`child_id`在每个中放置父 id。`child_id`

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:56:38.273

Parent-child relationships are usually modeled the other way around: the child belongs to a parent. Think about it, a child can only have one parent, that's easy to model; but a parent with many child ids is pretty hard to model.

Additionally you can use Nested Sets a.k.a. MPTT to make querying for children/parents easier.

See [http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/) and [http://en.wikipedia.org/wiki/MPTT](http://en.wikipedia.org/wiki/MPTT).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:57:35.297

Normally you won't store all the child ID's, but the parent ID's:

```
CREATE TABLE `flight` (
    `id` int(11) NOT NULL,
    `parent` int(11) DEFAULT NULL,
    `flight_name` varchar(255) NOT NULL,
    PRIMARY KEY (`id`),
    FOREIGN KEY (`parent`) REFERENCES `flight` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

Your data would look like:

```
id     parent    flight_name 
1      NULL      E213    
2      NULL      E333
3      2         E444  
4      2         E555  
5      2         E666 
```

# pdf - 使用 Ghostscript 生成缩略图会旋转我的横向 pdf 页面的设备大小定义

> ID：11326318
> 
> 赞同：2
> 
> 时间：2012-07-04T09:32:57.627
> 
> 标签：pdf, thumbnails, ghostscript, postscript, landscape-portrait

我想使用 GS 从 pdf 文件中生成缩略图。

*   缩略图必须适合 90x120 像素的矩形
*   图像不应旋转
*   图像应调整大小以适应矩形并保持纵横比

**我使用以下命令：**

```
gswin32 -dPDFFitPage -dPARANOIDSAFER -dBATCH -dNOPAUSE -dNOPROMPT 
-dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=0 
-dDEVICEWIDTH=90 -dDEVICEHEIGHT=120 -dORIENT1=true 
-sDEVICE=jpeg  -dTextAlphaBits=4 -dGraphicsAlphaBits=4 
-sOutputFile=output.%d.jpg input.pdf 
```

**结果：**

如果我使用一些带有**纵向页面** [的](http://www.sendspace.com/file/2p66gw)PDF ，您可以下载，那么缩略图是正确的，您可以在此处看到：

![在此处输入图像描述](../Images/0428a930cb0c1cddce7b90a60d34d38e.png)

如果我将它[用于](http://www.sendspace.com/file/ht7ily)带有**横向页面的 PDF，则 devicewidth 以某种方式被视为高度**：

![在此处输入图像描述](../Images/ffb46a3716e749959498abda4d05b968.png)

我怎样才能防止这种行为？我希望我的保时捷也是 90x120。我想也许我需要为 Ghostscript 提供一些 Postscript 代码（带有 -c 命令行参数），但我没有这方面的经验。有人可以帮我吗？

**EDIT1**：我尝试了[KenS 的建议](https://stackoverflow.com/a/11329697/337621)。使用 -dFIXEDMEDIA，我的保时捷会被裁剪，如下所示：

![在此处输入图像描述](../Images/c9ede0701e88732e905a9e90b3b78b18.png)

**EDIT2：** [Kurt Pfeifle 的第一个解决方案不适](https://stackoverflow.com/a/11330121/337621)用于肖像图像（右侧的白色部分，未正确使用空间）。见下文：

![在此处输入图像描述](../Images/665c762c7c18f3c0ae76394bfafb17dd.png)

**EDIT3：** [Kurt Pfeifle](https://stackoverflow.com/a/11345225/337621)的第三个解决方案几乎是好的。对于风景图像，它是完美的：

![在此处输入图像描述](../Images/93cce9dfb61b3d6f4ed92e9f6fc1234a.png)

但是，纵向页面存在尺寸问题，背景也变得完全灰色：

![在此处输入图像描述](../Images/f7217964ef7e17b19851f517c2d97dae.png)

所以库尔特，我想**我可以将 pdf 拆分为页面**（使用 GS -dFirstPage 和 -dLastPage），然后如果您有一些想法，**如何确定页面是横向还是纵向**，那么我可以进行一些条件处理。任何想法？至于背景颜色，我认为它并不重要，但如果您在这里也有想法，那么欢迎他们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:22:51.600

好的，现在尝试一个更详细的答案，基于上面提到的***“首先操作 PDF（以便它使用纵向媒体格式来显示其横向图像内容）”的***想法......

请注意，由于您的原始 PDF 并未对所有页面使用通用尺寸（它们都不同），因此我仅对第一页进行了概念验证。

## 第 1 步：从原始（横向）中提取第 1 页

我正在使用`pdftk`这个：

```
porsches.pdf  cat 1  output porsche-page1.pdf 
```

## 第 2 步：在较大的纵向页面上居中横向内容

为此，我正在使用 Ghostscript 和`-c ...`PostScript 命令行片段：

```
gs \
 -o porsche-page1-on-portrait-medium.pdf \
 -sDEVICE=pdfwrite \
 -dPDFSETTINGS=/prepress \
 -g1920x2560 \
 -r72 \
 -c "<</PageOffset [0 560]>> setpagedevice" \
 -f porsche-page1.pdf 
```

这些`/PageOffset`值源自我将 1120 点添加到 1440 点的原始页面高度这一事实。因此，我将内容向上移动一半的值，使图片再次居中。

## 第 3 步：创建 JPEG 缩略图（纵向）

```
gs \
 -sOutputFile=proofofconcept-thumb_%03d.jpg \
 -dPDFFitPage \
 -dDEVICEWIDTH=90 \
 -dDEVICEHEIGHT=120 \
 -sDEVICE=jpeg \
  porsche-page1-on-portrait-medium.pdf 
```

除非我没有完全误解你的意图：这应该是你想要的结果。（*注意：我在缩略图中添加了一个黑框，以使其真实尺寸即使在 Stackoverflow 的白色 HTML 背景上也可见。*）

![概念验证缩略图](../Images/fd786db67ba178505001333c3fff88b0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:31:42.713

我认为如果不*首先*处理 PDF （以便它使用纵向媒体格式来显示其横向图像内容），您目前想要的东西是不可能的。

由于您似乎主要对所获得的 120 像素***宽度***提出问题，因此我自己处理未修改输入的解决方法是更改​​高度/宽度设置，如下所示：

```
-dDEVICEWIDTH=90 -dDEVICEHEIGHT=89 
```

这将创建 90 像素宽、未旋转的 JPEG，它们将适合您的 90x120 像素矩形（根据您的需要）。:-)

（之后，您仍然可以使用 ImageMagick 命令行工具之一操作获得的 JPEG，以使它们真正成为 90x120 像素，保时捷以矩形为中心或其他任何东西......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:21:33.113

这是您可以更轻松地编写整个事情的方法。（我现在才完全意识到，你似乎想要这个用于 Windows ......）

### 第一步：创建第一个页面大小相同的中间 PDF

```
gswin32c.exe ^
   -o 1920x1440pts.pdf ^
   -dPDFFitPage ^
   -sDEVICE=pdfwrite ^
   -dPDFSETTINGS=/prepress ^
   -g19200x14400 ^
    porsche.pdf 
```

这是为第二步做准备。“所有页面的大小相同”将允许我们为此使用相同的固定`/PageOffset`值。

### 第二步：第二个中间PDF（纵向，横向内容居中）

```
gswin32c.exe 
   -o 1920x1440-portrait.pdf ^
   -sDEVICE=pdfwrite ^
   -dPDFSETTINGS=/prepress ^
   -g19200x25600 ^
   -c "<</PageOffset [0 560]>> setpagedevice" ^
   -f 1920x1440pts.pdf 
```

这是为第四步做准备。现在我们在 PDF 中有纵向页面（包含横向图像内容），我们的缩略图创建也将产生纵向缩略图......

### 第三步：为纵向页面添加灰色背景

```
gswin32c.exe ^
   -o - ^
   -sDEVICE=pdfwrite ^
   -g1920x2560 ^
   -c ".6 setgray 0 0 192 256 rectfill showpage" ^
| ^
pdftk.exe ^
   1920x1440-portrait.pdf ^
   background - ^
   output 1920x1440-portrait-gray-background.pdf 
```

管道中的第一个命令使用 Ghostscript 将灰色背景的 PDF 页面写入*stdout*，而第二个命令用于`pdftk`从其标准输入读取背景信息*并*创建下一个中间输出。

如果您不喜欢那种灰色阴影，请使用其他值而不是`.6`. 如果您不喜欢灰色，但想要颜色，请使用而不是`.6 setgray`

*   `1 0 0 setrgbcolor`对于红色背景，
*   `0 1 0 setrgbcolor`对于绿色背景，
*   `0 0 1 setrgbcolor`对于蓝色背景，
*   `1 0 0 0 setcmykcolor`对于青色背景，
*   `0 1 0 0 setcmykcolor`对于洋红色背景，
*   `0 0 1 0 setcmykcolor`黄色背景。

### 第四步：创建最终的 JPEG 缩略图

```
gswin32c.exe ^
   -o porsche-thumbnails-portrait_%03d.jpg ^
   -dPDFFitPage ^
   -dDEVICEWIDTH=90 ^
   -dDEVICEHEIGHT=120 ^
   -sDEVICE=jpeg ^
    1920x1440-portrait-gray-background.pdf 
```

我将这些命令复制到批处理文件中并添加一些您可能想要的其他内容是为了您自己的乐趣... :-)

* * *

**更新：** 当然，如果您有一个包含横向页面和纵向页面的文件，则需要应用一些条件处理。要在命令行上发现页面的方向和大小，`pdfinfo`可能会有所帮助，如果这样调用：

```
 pdfinfo -f 4 -l 7 some.pdf 
```

**这将打印第 4 页（第**一个）到第 7页（**最后**一个）的页面大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T13:03:45.593

设置 -dFIXEDMEDIA 以便 Ghostscript 知道媒体已修复。

再一次你可能会发布一个较小的示例文件，我们真的不需要所有 71 页，尽管我很欣赏它们是漂亮的图片....

# modx - 使用 TemplateVariable 复选框 ModX

> ID：11326321
> 
> 赞同：1
> 
> 时间：2012-07-04T09:33:02.530
> 
> 标签：modx

如果用户选中模板变量中的复选框，我正在尝试显示社交图标。
所以我做了我需要的一切，在模板变量中的每个页面上显示这个复选框（我只有一个模板）。
接下来，我将此代码放入 base.html（我对所有块和模板使用静态文件 - 该文件是 BaseTemplate 静态文件）

```
<?php if ($modx->getTemplateVar(1,'Yes')) { ?>
  <a href="#"><img src="assets/templates/default/images/facebook.png" alt="Facebook" style="width: 26px; height: 26px; border: 0; margin-left: 40px;" /></a>
  <a href="#"><img src="assets/templates/default/images/twitter.png" alt="Twitter" style="width: 26px; height: 26px; border: 0; margin-left: 10px;" /></a>
  <a href="#"><img src="assets/templates/default/images/linkedin.png" alt="LinkedIn" style="width: 25px; height: 25px; border: 0; margin-left: 10px;" /></a><br /><br />
<?php } ?> 
```

我也试过：

```
<?php if ($modx->getTemplateVar($social,'Yes')) { ?> 
```

哪里`social`是我的电视的名称，是我的电视`1`的 ID。

这就是我在网站上得到的：

```
getTemplateVar($social,'Yes')) { ?> 
```

我虽然这是因为我不能在块/模板文件中使用 php，所以我创建了代码片段并放入代码来检查电视是否被签入，但这并没有给我任何结果。

这是我阅读以使用电视的[文档。](http://wiki.modxcms.com/index.php/Template_Variable_Checkbox)
我做错了什么？如何以这种方式使用电视，而不是作为显示资源的过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:47:26.327

试试这个，你不需要使用代码片段或编写任何代码来完成这项工作，

在您的模板 [base.html] 中：

```
[[*social:eq=`Yes`:then=`[[$YourSocialHTMLChunk]]` ]] 
```

[更好的是，将您的“社交”电视更改为 1 或 0 的数字类型，您可能需要仔细检查输出过滤器：[http ://rtfm.modx.com/display/revolution20/Input+and+Output+Filters+ （输出+修饰符](http://rtfm.modx.com/display/revolution20/Input+and+Output+Filters+(Output+Modifiers)），我不确定“eq”是否适用于字符串...]

然后将您所有的社交链接粘贴到您想要命名的任何地方 YourSocialHTMLChunk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:06:47.147

您可以在 Modx 的模板或块中使用纯 PHP。如果必须使用 PHP，则需要为此创建一个 Snippet。

您可以通过编写在模板或块中访问您的模板变量，`[*templatevarname*]`它将输出内容。请注意，这仅输出您正在显示的页面的内容。

如果你想从其他资源加载模板变量，你必须为此创建一个片段。

看看这个维基页面：[http ://wiki.modxcms.com/index.php/Placeholders_used_by_MODx_Pages_and_Templates](http://wiki.modxcms.com/index.php/Placeholders_used_by_MODx_Pages_and_Templates)

对于一个片段，您必须编写类似

```
[!yourSnippetName? &sid=`[[*id*]]`!] 
```

片段内容：

```
$tvPr = $modx->getTemplateVarOutput(array("templatevarname"),$sid,1);
echo $tvPr['templatevarname']; 
```

[http://wiki.modxcms.com/index.php/API:getTemplateVarOutput](http://wiki.modxcms.com/index.php/API:getTemplateVarOutput)

# c# - 在 HPUX 上运行 c#

> ID：11326322
> 
> 赞同：3
> 
> 时间：2012-07-04T09:33:06.187
> 
> 标签：c#, unix, sharepoint-2010, mono, hp-ux

我想知道是否可以运行/转换/编译/重新编译一个小型 c# 程序，其任务是调用 web 服务并将通常的 xml 文件传递​​给 unix。HP ux 11.23（2003 年发布）的 unix 版本。

无论我在哪里寻找它，唯一合理的答案是“单声道”。然而，在搜索时我也遇到了这个：[http ://www.mono-project.com/Mono:HPUX](http://www.mono-project.com/Mono:HPUX)

> 目前只有 Mono Interpreter (mint) 可以在 HPUX 上工作。目前，Mono 的 JIT 不适用于 HPUX。

我想唯一让我尖叫的是我对这件事的无知。这会给我带来什么改变或阻止我编译和运行我的小程序？

顺便说一句，我使用的参考是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml.Serialization;
using System.Net; 
```

有没有什么办法可以让我自己摆脱“几个”瘀伤，而不是完全被毁坏并且每根骨头都断了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:40:49.567

You can still use mono, however you are not able to use the JIT engine. This means that optimizations that run at the interpretation layer don't get run.

Mono has two modes of running JIT and interpreter runtime. The interpreter runtime is created on platforms before the JIT platform since its much much less complicated for the mono team, normally they move away from the interpreter runtime and switch to the JIT runtime, and as soon as that happens the interpreter runtime is no longer supported.

Also consider what you are doing, whilst you think it may be nice and simple, its actually quite a complex task, just looking at your using statements you are not only asking a program to interact with your network card (load drivers, create sockets, do host-name lookups, but are looking to work with anonymised advanced language features of c# 3.0\. Theres a lot of backend work that needs to go on for this too work).

I'm sure the Mono team will support hpux eventually, you can get a list of the current supported platforms [here](http://www.mono-project.com/Supported_Platforms)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:45:10.763

> 一个小型 c# 程序，用于调用 web 服务并将通常的 xml 文件传递​​给它，用于 unix

诚实地？用您的服务器支持的脚本语言编写一个简单的脚本。它会为您节省大量的血液、汗水和眼泪。

当然，如果您尝试过但它不起作用。如果是这样：只需使用 Mono。

# java - 增加 jar 文件的 JVM 大小

> ID：11326323
> 
> 赞同：1
> 
> 时间：2012-07-04T09:33:07.577
> 
> 标签：java

我正在尝试增加启动简单神经元程序的 jar 文件的 java 堆大小。有一个补丁文件我试图修改成这样

```
java -jar easyNeurons.jar -Xmx1024M -Xms1024M 
```

但我仍然得到`VectorSizeMismatchException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:37:59.240

当 Java 程序内存不足时，您得到的`OutOfMemoryException`是 ，而不是`VectorSizeMismatchException`.

`VectorSizeMismatchException`表示

> 向量大小与网络输入或训练元素大小不匹配

（[请参阅文档](http://neuroph.sourceforge.net/javadoc/org/neuroph/core/exceptions/VectorSizeMismatchException.html)）。

# jmeter - JMeter：如何在“查看结果树”页面上将内容设置为 Java 请求示例的请求？

> ID：11326327
> 
> 赞同：0
> 
> 时间：2012-07-04T09:33:17.540
> 
> 标签：jmeter, viewresult

我用 JMeter 创建了一个测试计划，这个计划包括一个包含 2 个 Java 请求示例的线程组。计划成功运行。但是，当我打开“查看结果树”并为 Java 请求选择“请求”选项卡时，“没有要显示的数据”。

我想在这里显示一个字符串，我确实通过以下方式将字符串设置为 SampleResult：

*sampleResult.setRequestHeader(requestString);*

但是，设置请求标头似乎不起作用。

我应该怎么做才能在“请求”选项卡中显示字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:16:34.073

您应该首先在`classname`下拉菜单值下选择`org.apache.jmeter.protocol.java.test.JavaTest`

然后在该`Sampler data`字段中输入您的请求数据，即`I requested this`。

然后，当您查看来自 的结果时`View Results Tree`，当您单击`Request`那里的采样器选项卡时，您会看到`I requested this`您之前编写的内容。

![在此处输入图像描述](../Images/1c4613d563286bcf3401b5a36eae06c4.png)

@JuliaLi 单击此答案左侧的检查图像。

# sql - 如果通过对表的特定索引使用 sp_autostats 将 auto_update_statistics 设为 ON，那么每个 DML 的统计信息？

> ID：11326329
> 
> 赞同：2
> 
> 时间：2012-07-04T09:33:18.677
> 
> 标签：sql, sql-server, tsql, statistics, dml

我在 google 上找到了**auto_update_statistics**，它建议如果我们将其设为 ON，我们不需要更新**Statistics**，SQL Server 会这样做。

我想知道对于表上的任何插入、更新（索引列）、删除都会导致**统计**信息的更新吗？如果是，则不会为事务创建延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:49:40.750

统计信息不会与插入/更新/删除操作本身一起更新。这些操作只是更新一个修改计数器，因此 SQL Server 可以跟踪有多少更改以及更新是否到期。

当执行将使用统计信息的查询时，SQL Server 检查统计信息是否过时并在需要时更新统计信息。

关于该主题的权威文章是[SQL Server 2008 中的计划缓存](http://msdn.microsoft.com/en-us/library/ee343986%28v=sql.100%29.aspx)（此流程图取自其中）

![在此处输入图像描述](../Images/43d9c44e6dd89049eeab0945364fa4d9.png)

如前所述，SQL Server 维护对每列所做修改次数的计数。如果自编译计划以来的修改次数超过重新编译阈值 (RT)，则将重新编译计划并更新统计信息。RT 取决于表类型和大小。

> RT 计算如下。（n 指编译查询计划时表的基数。）
> 
> **永久表**
> - 如果 n <= 500，RT = 500。
> - 如果 n > 500，RT = 500 + 0.20 * n。
> 
> **临时表**
> - 如果 n < 6，RT = 6。
> - 如果 6 <= n <= 500，RT = 500。
> - 如果 n > 500，RT = 500 + 0.20 * n。
> **表变量**
> - RT 不存在。因此，不会因为表变量的基数变化而发生重新编译。

这些重新编译阈值并不适用于所有情况。例如，请参阅[统计、行估计和升序日期列](http://sqlinthewild.co.za/index.php/2011/03/22/statistics-row-estimations-and-the-ascending-date-column/)和[跟踪标志 2371](http://blogs.msdn.com/b/saponsqlserver/archive/2011/09/07/changes-to-automatic-update-statistics-in-sql-server-traceflag-2371.aspx)可用于修改行为。

如果`AUTO_UPDATE_STATISTICS_ASYNC`是，`OFF`那么在编译可以继续之前，请求 spid 会更新统计信息。如果选择此选项，`ON`则系统 spid 在后台更新统计信息，原始查询不会被阻止，而只是继续使用陈旧的统计信息。

可以更新统计信息的另一种方法是重建索引也将同时更新统计信息`FULLSCAN`。

# android - 使用 onPostExecute 的结果，在处理完成之前不执行下一条指令

> ID：11326337
> 
> 赞同：0
> 
> 时间：2012-07-04T09:33:51.660
> 
> 标签：android, android-intent, android-asynctask, android-activity

我在检查某事的活动中有一个功能。我在该函数中调用一个 web 服务（在 doInbackground 方法中），并根据结果我开始另一个活动。

该函数在活动的 onCreate 方法中被调用，问题是下一条指令的执行在不等待我的函数结果的情况下继续执行。

这是代码：

```
public class EditAccountActivity extends Activity {

 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edit_account);

    save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

                checkConflict();

                Log.i("VERIF",
                        "WE GO HERE WITHOUT WAITING THE RESULT");
//i don't want to go here if we start the other activity in checkConflict
...

}}}

public void checkConflict() {

    final Intent intent = new Intent(this, ConflictFieldActivity.class);

    new WSDataAccount() {
        @Override
        public void onPostExecute(final ArrayList<ArrayList<String>> result) {

            if (modifiedTimeOnServer > modifiedTimeLocal
                    && !conflictWithFields(fieldLocalFirstStateMap,
                            fieldServerMap.getAccountFieldMap(),
                            modifiedTimeLocal, modifiedTimeOnServer)
                            .isEmpty()) {

                Toast.makeText(getApplicationContext(),
                        " EDITION CONFLICT !!!! ", Toast.LENGTH_LONG)
                        .show();
                startActivity(intent);
            }
        }
    }.execute(sessionName, accountId, "retrieveModifiedTime");

}} 
```

你知道另一种处理“onPostExecute”返回结果的方法，以便在执行下一条指令之前等待我的处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:38:07.957

在您调用的类中添加 OnPostExecute。

**调用 AsyncTask**

```
 new WSDataAccount().execute(sessionName, accountId, "retrieveModifiedTime"); 
```

**创建类**

```
class WSDataAccount extends AsyncTask<?,?,?>{

        doInBackGround(){

        }
       //add here

        @Override
        public void onPostExecute(final ArrayList<ArrayList<String>> result) {

            if (modifiedTimeOnServer > modifiedTimeLocal
                    && !conflictWithFields(fieldLocalFirstStateMap,
                            fieldServerMap.getAccountFieldMap(),
                            modifiedTimeLocal, modifiedTimeOnServer)
                            .isEmpty()) {

                Toast.makeText(getApplicationContext(),
                        " EDITION CONFLICT !!!! ", Toast.LENGTH_LONG)
                        .show();
                startActivity(intent);
            }
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:44:50.687

我想对您来说最简单的方法是根据结果调用 Activity 的不同方法；

```
public class EditAccountActivity extends Activity {
   void foo(){}
   void boo(){}
} 
```

接着

```
 @Override
    public void onPostExecute(final ArrayList<ArrayList<String>> result) {
        if(result){
            foo();
        }else{
            boo();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:40:48.453

You can use `Executor` pass it a `Callable`, it will return `FutureTask` then you can wait for `FutureTask.isDone` as in this example [http://programmingexamples.wikidot.com/futuretask](http://programmingexamples.wikidot.com/futuretask)

Not sure if waiting in `onCreate` is a good thing though

# php - 使用 PHP / sqlite3，如果表中不存在列，我该如何添加？

> ID：11326340
> 
> 赞同：0
> 
> 时间：2012-07-04T09:34:12.513
> 
> 标签：php, sqlite

我正在寻找一种仅在使用 sqlite3 的 PHP 脚本中尚不存在列时才将列添加到表中的方法。看起来单独的 SQL 在这里无法帮助我，例如

```
ALTER TABLE items ADD COLUMN IF NOT EXISTS new_col INTEGER; 
```

好吧，我正在考虑像尝试运行查询这样的黑客攻击，如果失败，则得出该列尚不存在的结论：

```
if ($db->querySingle('SELECT new_col FROM items') === FALSE) {
    // False means the query failed
    $db->exec('ALTER TABLE items ADD COLUMN new_col INTEGER');
}

update_stuff_with_new_column($db); 
```

我想它应该可以工作，但是如果查询由于其他原因（例如，事务正在运行）而失败怎么办？

我可以想到其他一些解决方案，但它们看起来都一样：“如果查询失败，则该列可能不存在，请创建它”。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:49:39.477

可以`CREATE TABLE`在表中找到该语句的SQL `sqlite_master`；您需要对其进行解析以查看是否`new_col`已定义：

```
sqlite> create table items (col1, col2);
sqlite> select sql from sqlite_master where type = 'table' and name = 'items';
CREATE TABLE items (col1, col2)
sqlite> alter table items add column new_col;
sqlite> select sql from sqlite_master where type = 'table' and name = 'items';
CREATE TABLE items (col1, col2, new_col) 
```

附录：

查看表中是否已存在列的其他方法包括：

尝试准备 ( `sqlite3_prepare_v2`) 形式的陈述

```
select ColumnToCheck from TableToCheck; 
```

看看它是否给出了错误（感谢 Igor Tandetnik！）。

或使用

```
PRAGMA table_info(myTable) 
```

记录[在这里](http://www.sqlite.org/pragma.html#pragma_table_info)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T07:18:39.527

```
php file 
===========
<pre>
<?php

define(DB_USER,'root');
define(DB_PASS,'');
define(DB_NAME,'DATABASENAME');

//Load the class

/* Creating Connection for database where we want to make changes using sql file */

$con = mysql_connect('localhost',DB_USER,DB_PASS) or die ("error in connecting $sitename ");
mysql_select_db(DB_NAME,$con) or die("error in databse selction in $sitename");

/* getting content from sql file where we have updated fields */
$fp= file_get_contents('blank_hotel_version_1.0.sql', true);

/* getting list of create table query from sql file content */

$pattern_gettable = '/CREATE TABLE IF NOT EXISTS (.*?) ;/is';

preg_match_all($pattern_gettable,$fp,$tables);

foreach($tables[0] as $value):
    mysql_query($value,$con) or die(mysql_error());
endforeach;

//exit;

/* getting Database table list */

$tables_db ="*";
if($tables_db == '*')
{
    $tables_db = array();
    $result = mysql_query('SHOW TABLES');
    while($row = mysql_fetch_row($result))
    {
        $tables_db[] = $row[0];
    }
}
else
{
    $tables_db = is_array($tables_db) ? $tables_db : explode(',',$tables_db);
}

foreach($tables_db as $tablename):
     $pattern = "CREATE TABLE IF NOT EXISTS `{$tablename}`";

    foreach($tables[0] as $value):

        if(strpos($value,$pattern)=== false):

        else:

            /*getting columns  list from perticular table query of sql file */

            $pattern_cloumn="/CREATE TABLE IF NOT EXISTS `{$tablename}` \((.*?) PRIMARY KEY/is";
            preg_match_all($pattern_cloumn,$value,$columns);

            /*Replacing comma with # so that while we exploade we can easily make array of columns othere wise it make problem for enum(..) datatype or comment */
            $pattern_cm="/\n/ims";
            $columns[1][0]= preg_replace($pattern_cm,"#",$columns[1][0]);
            $colmn=explode("#",$columns[1][0]);
            array_shift($colmn);

            /*Getting name of columns currently we have columns with sql query like "`id` int(11) not null," and we get column name like 'id' into $columnnames array */
            $columnnames=array();
            foreach($colmn as $cols):
                $pattern = '/`(.*?)`/is';
                preg_match_all($pattern, $cols ,$namecols);

                array_push($columnnames,$namecols[1][0]);
            endforeach;

            /*Getting column names from database table */
            $column_query="SHOW COLUMNS FROM {$tablename}";
            $result_clm=mysql_query($column_query);
            $colum_db_array=array();
            while($row_clm=mysql_fetch_array($result_clm))
            {
                array_push($colum_db_array,$row_clm['Field']);
            }

            foreach($columnnames as $key=>$value_cols)
            {
                /*if column not exists in database table then we add column into table */

                if(!in_array($value_cols,$colum_db_array) && $value_cols!="")
                {

                    if(substr($colmn[$key],strlen($colmn[$key])-2)=="',")
                    {
                        $query_cl="ALTER TABLE {$tablename} ADD ".substr($colmn[$key],0,strlen($colmn[$key])-1);
                    }
                    else
                    {
                        $query_cl="ALTER TABLE {$tablename} ADD ".substr($colmn[$key],0,strlen($colmn[$key])-1);
                    }

                    mysql_query($query_cl) or die(mysql_error());
                }
            }
        endif;

    endforeach;

endforeach;

exit;

?>
</pre>

Sql File 
========
<pre>

-- --------------------------------------------------------

--
-- Table structure for table `advertising`
--

CREATE TABLE IF NOT EXISTS `advertising` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `image` varchar(255) NOT NULL,
  `title_tag` varchar(255) NOT NULL,
  `alt_tag` varchar(255) NOT NULL,
  `d_order` int(11) NOT NULL,
  `is_visible` varchar(11) NOT NULL DEFAULT 'Y',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

--
-- Dumping data for table `advertising`
--

-- --------------------------------------------------------

--
-- Table structure for table `advertising_enquiry`
--

CREATE TABLE IF NOT EXISTS `advertising_enquiry` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `advertising_id` varchar(255) NOT NULL,
  `name` varchar(255) NOT NULL,
  `address` varchar(255) NOT NULL,
  `city` varchar(255) NOT NULL,
  `state` varchar(255) NOT NULL,
  `country` varchar(255) NOT NULL,
  `phone` varchar(255) NOT NULL,
  `mobile` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  `website` varchar(255) NOT NULL,
  `enquiry` text NOT NULL,
  `budget` varchar(255) NOT NULL,
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15 ;

--
-- Dumping data for table `advertising_enquiry`
--

-- --------------------------------------------------------

--
-- Table structure for table `agents`
--

CREATE TABLE IF NOT EXISTS `agents` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `agent_name` varchar(150) NOT NULL,
  `contact` varchar(1000) NOT NULL,
  `cat_id` int(3) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

--
-- Dumping data for table `agents`
--

-- --------------------------------------------------------

--
-- Table structure for table `amenities`
--

CREATE TABLE IF NOT EXISTS `amenities` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `am_name` varchar(200) NOT NULL,
  `type` enum('H','R','RE') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=234 ;

--
-- Dumping data for table `amenities`
--

</pre> 
```

这可能会帮助你谢谢

# each - 如何使用带有 javascript 属性数组变量的 jquery 模板以表格格式显示完整数据

> ID：11326344
> 
> 赞同：0
> 
> 时间：2012-07-04T09:34:15.617
> 
> 标签：each

例如：

我已经创建了一个 javascript 属性数组模型，其中包含一些属性，例如 Name、start、director、year，如下所示：

```
model = {}
  model.Name = [];
  model.Stars = [];
  model.Director = [];
  model.Year = []; 
```

然后我使用 push 方法在模型中添加了一些数据，例如在运行时

```
Name="DDLJ"
Stars="SRK"
Director="Yashraj"
Year="1998"

Name="K3G"
Stars="SRK"
Director="Karan"
Year="2004"

Name="KKHH"
Stars="SRK"
Director="Karan"
Year="2000" 
```

所以我想使用 jquery 模板将模型数组对象的所有信息显示到 html 表中，但我不知道该怎么做？

我一直在使用`{{each}} {{/each}}`，但它一次只显示一个属性数据，然后下一个像....

```
{{each Name}} ${{$Value}} {{/each}}

{{each stars}} ${{$Value}} {{/each}} 
```

请解决这个问题并帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:38:51.003

模型应该是这样的（对象数组，而不是具有多个数组的对象）：

```
var model = [];
model.push( { Name: "DDLJ", Stars: "SRK", Director: "Yashraj", Year: 1998 } );
// etc 
```

然后你应该可以为模板写这样的东西：

```
<script id="modelTemplate" type="text/x-jquery-tmpl"> 
        <tr> 
            <td>${$Name}</td>
            <td>${$Stars}</td>
            <td>${$Director}</td>
            <td>${$Year}</td>
        </tr> 
</script>

<table id="modelTable"><table> 
```

然后渲染模板：

```
$("#modelTemplate").tmpl(model).appendTo($("#modelTable"); 
```

# compiler-optimization - 实现公共子表达式消除

> ID：11326346
> 
> 赞同：7
> 
> 时间：2012-07-04T09:34:27.640
> 
> 标签：compiler-optimization, graph-algorithm, compiler-theory

我正在研究为对应于大型数学表达式（数百万个节点）的表达式图实施公共子表达式消除（CSE）。

哪些算法适合执行此操作？我在互联网上搜索一个易于实现的算法，但我找不到任何东西。如果可能，算法应该在完整表达式图的节点数上具有线性复杂度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T10:50:33.023

这些是没有副作用的表达方式？然后最简单的做法是将每个子表达式的树散列到桶中，以确定子表达式消除的候选者。[这是CSE](http://en.wikipedia.org/wiki/Common_subexpression_elimination)的一个特例，其中所有表达式都在一个（巨大的）“基本块”中。（我以此思路作为检测[重复代码](http://www.semanticdesigns.com/Products/CloneDR)的基础。）

如果表达式具有顺序和副作用，您可能需要考虑[Value Numbering](http://en.wikipedia.org/wiki/Global_value_numbering)。

# iphone - 改进 iPhone 中的 Grid View 显示性能

> ID：11326347
> 
> 赞同：2
> 
> 时间：2012-07-04T09:34:30.910
> 
> 标签：iphone, objective-c, ios, ipad, nscalendar

我有一个网格视图，我想在这个网格视图的每个单元格内绘制矩形，

这里的矩形代表一个事件或提醒，所以当我从本地日历中获取提醒和事件时，我会过滤它们以分别获取每天的事件，这样我就可以在网格视图中的适当单元格中绘制它们，但是这种方法的性能很差.

那么如何才能在网格视图中以优异的性能绘制这些事件呢？如何避免每月每天过滤事件产生的延迟？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:00:31.400

I am assuming what you are doing now is that you are getting the entire contents of the grid view rectangles simultaneously.

What you can do is to load the grid view rectangles with the events/reminders in a background thread so that you do not jam up the UI while your data is loading. Try using [Apple's Grand Central Dispatch](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) to do your loading in another thread.

Something along the lines of

```
dispatch_async(DISPATCH_QUEUE_PRIORITY_DEFAULT, ^{
        // Your code to get data
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:06:02.030

使用 NSOperationQueue 做一个后台进程

# python - SyntaxError: 无效的语法 href = 'http://maps.google.com' + href

> ID：11326348
> 
> 赞同：0
> 
> 时间：2012-07-04T09:34:45.320
> 
> 标签：python, compiler-errors

```
def download_if_dne(href, filename):
    if os.path.isfile(filename):
#        print 'already downloaded:', href
        return False
    else:
        if not href.startswith('http://'
            href = 'http://maps.google.com' + href
            print 'Fixed url :', href
        try:
            print 'downloading:', href
            oa = openanything.fetch(href)
            if oa['status']==200:
                file = open( filename, 'w' )
                file.write( oa['data'] )
                file.close()
            return True
        except KeyboardInterrupt:
            raise
        except:
            print '\tdownload failed -', sys.exc_info()[0]
            return False 
```

此代码是对软件 ogmaps 的编辑。
[http://code.google.com/p/ogmaps/issues/detail?id=1](http://code.google.com/p/ogmaps/issues/detail?id=1)

错误信息：

```
 File "ogmaps.py", line 36
    href = 'http://maps.google.com' + href
       ^
SyntaxError: invalid syntax 
```

我不是 python 人，无法弄清楚错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:35:55.783

`if not href.startswith('http://'`应该`if not href.startswith('http://'):`

# emacs - 将“跟随模式”状态添加到 Emacs 模式行

> ID：11326350
> 
> 赞同：4
> 
> 时间：2012-07-04T09:34:56.803
> 
> 标签：emacs

如何向 Emacs 模式行添加一个指示器以指示`follow-mode`在当前缓冲区中启用该指示器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T14:43:16.080

尝试

```
(push (list 'follow-mode " Follow") minor-mode-alist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:37:04.177

这是一种可行的天真方式

```
(push '(:eval (if follow-mode "Following... " "")) global-mode-string) 
```

但请参考`mode-line-format`using的文档`C-h v`，因为`global-mode-string`在这种情况下可能会被滥用。

# sql-server-2008 - 查找 NoOfComments 的百分比

> ID：11326353
> 
> 赞同：0
> 
> 时间：2012-07-04T09:34:58.707
> 
> 标签：sql-server-2008, sql-server-2008-r2

```
Id  Answer  NoOfComments
18      1        2
19      2        0
20      3        0
21      4        0
22      5        1 
```

上面给出的数据是从以下 StoredProcedure 获得的输出。

```
 ALTER PROCEDURE [dbo].[BlogAnswerByQuestionId]
(
    @QuestionId int
)
AS
BEGIN
    SELECT [HRM_BlogAnswer].[Id] as Id
          ,[HRM_BlogAnswer].[Answer]
          ,(SELECT COUNT(*) FROM HRM_BlogVote  WHERE HRM_BlogVote.AnswerId  =[HRM_BlogAnswer] .[Id]) AS NoOfComments

        FROM [HRM_BlogAnswer] 
    WHERE [HRM_BlogAnswer].[QuestionId] = @QuestionId

END 
```

现在我需要根据 NoOfComments 字段中的值找到每个答案的百分比值。我可以提供更多信息。1.HRM_blogquestion表中的数据如下。

```
Id  Question    CreatedDate          CreatedBy
8   tttt    2012-07-03 17:36:47.513        1 
```

2.HRM_Bloganswer表中的数据如下

```
Id  QuestionId  Answer
18  8             1
19  8             2
20  8             3
21  8             4
22  8             5 
```

3.HRM_Blogvote表中的数据如下

```
Id  QuestionId  AnswerId    EmployeeId
19  8                18        1
23  8                22        24
24  8                18        25 
```

从这些表格数据中我写了上面的 SP 现在我需要找到投票答案的百分比

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:08:07.853

`@Results`您可以将现有查询转换为[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)，然后进行查询，而不是创建此表。最终查询是您想要的查询：

```
declare @Results table (
    Id int not null,
    Answer int not null,
    NoOfComments int not null
)
insert into @Results (Id,Answer,NoOfComments) values
(18,      1,        2),
(19,      2,        0),
(20,      3,        0),
(21,      4,        0),
(22,      5,        1)

select *,((NoOfComments * 100.0) / SUM(NoOfComments) OVER (PARTITION BY (1))) as Pcnt
from @Results 
```

结果：

```
Id          Answer      NoOfComments Pcnt
----------- ----------- ------------ ---------------------------------------
18          1           2            66.666666666666
19          2           0            0.000000000000
20          3           0            0.000000000000
21          4           0            0.000000000000
22          5           1            33.333333333333 
```

* * *

所以，你的过程将是：

```
 ALTER PROCEDURE [dbo].[BlogAnswerByQuestionId]
(
    @QuestionId int
)
AS
BEGIN
    ;With Results as (
    SELECT [HRM_BlogAnswer].[Id] as Id
          ,[HRM_BlogAnswer].[Answer]
          ,(SELECT COUNT(*) FROM HRM_BlogVote  WHERE HRM_BlogVote.AnswerId  =[HRM_BlogAnswer] .[Id]) AS NoOfComments

        FROM [HRM_BlogAnswer] 
    WHERE [HRM_BlogAnswer].[QuestionId] = @QuestionId
    )
    select *,((NoOfComments * 100.0) / SUM(NoOfComments) OVER (PARTITION BY (1))) as Pcnt
    from Results

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:12:34.027

```
ALTER PROCEDURE [dbo].[BlogAnswerByQuestionId] 
(     
@QuestionId int 
) 
AS 
BEGIN    
WITH Results 
AS 
    (     
        SELECT [HRM_BlogAnswer].[Id] as Id           
              ,[HRM_BlogAnswer].[Answer]           
              ,(SELECT COUNT(*) FROM [HRM_BlogVote]  WHERE [HRM_BlogVote].[AnswerId]  =[HRM_BlogAnswer].[Id]) AS NoOfComments          
          FROM [HRM_BlogAnswer]      
        WHERE [HRM_BlogAnswer].[QuestionId] = @QuestionId     
    )     
        SELECT *,
        case when NoOfComments>0 then  ((NoOfComments * 100.0) / SUM(NoOfComments) OVER (PARTITION BY (1))) else 0 end as Percentage    
            FROM Results  
END 
```

# java - 将 Java Web 应用程序部署到 Amazon Elastic Beanstalk

> ID：11326359
> 
> 赞同：4
> 
> 时间：2012-07-04T09:35:23.433
> 
> 标签：java, amazon-web-services, git-svn, amazon-elastic-beanstalk

我的团队正在开发一个 Java Web 应用程序，该应用程序将部署在 Amazon Elastic Beanstalk 中。开发环境是 Eclipse 和 Subversion。他们能够使用 Eclipse 插件部署它，但为了自动化部署，我正在尝试使用 Amazon 提供的 CLI 工具。

基本上，在将 subversion 存储库转换为 git 存储库后，我遵循了[Amazon 博客文章中详述的步骤。](http://aws.typepad.com/aws/2012/06/aws-elastic-beanstalk-simplfied-command-line-eb.html)我按照[这个 SO 答案中解释的步骤](https://stackoverflow.com/questions/5368643/how-to-synchronize-a-git-repository-with-svn)

完成上述步骤后，我发出命令 git **aws.push**，成功完成。但是在运行应用程序时，会出现错误和 . 于是从Beanstalk环境下载了war文件，发现文件夹结构乱了，源文件没有编译成class文件。看起来源文件是这样上传的。

在使用 aws.push 之前，我是否需要构建应用程序（使用 ant）？还是我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:24:12.470

现在看来，我的问题有了答案。

**aws.push**不仅适用于 PHP 应用程序，还可以用于部署 Java 和 PHP 应用程序。我已经成功地与**Apache Ant**一起使用，并且该设置在我们的 UAT 环境中运行良好。

我开发了一个 shell 脚本，它执行以下操作：

1.  从 subversion 存储库中查看源代码
2.  使用 Apache Ant 构建和创建 WAR 文件
3.  将 WAR 文件分解到 git 存储库（使用 Amazon EB 工具初始化）
4.  将分解后的文件添加到 git 存储库并提交更改。
5.  使用 aws.push 将 war 文件部署到 EB。

*（我现在无法访问 shell 脚本，所以我可能无法提供详细的命令）*

**这是基本形式的Shell脚本**

```
source_dir="/home/libregeek/myapp"
workingcopy="$source_dir/trunk"
gitrepo="$source_dir/gitrepo"
cd $workingcopy
svn update
ant createwar
cd $gitrepo
unzip -o $workingcopy/build/myapp.war
git add *
git commit -m "Deployed new version"
git aws.push 
```

此脚本存在与陈旧类文件相关的已知问题。要摆脱它，您可能必须清理 git repo。

这是蚂蚁目标：

```
<target name="createwar" depends="build" description="Create WAR file for deployment">
<war destfile="${alternate.path}/${name}.war" webxml="${web.dir}/WEB-INF/web.xml">
<fileset dir="${web.dir}">
<include name="**/*.*"/>
</fileset>
</war>
</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T23:03:46.777

如果您使用 Maven 和[Beanstalker](http://docs.ingenieux.com.br/project/beanstalker/)，则 git aws.push 的等效功能可以恢复为单个命令，无论您是否使用 git。

`$ mvn package beanstalk:fast-deploy`

但要确保你的[pom 准备好了](http://docs.ingenieux.com.br/project/beanstalker/deploying-using-git.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T18:50:39.177

我遇到了同样的问题 - 似乎 git 方法仅适用于 PHP 应用程序。

我目前正在寻找其他一些基于 Java 的工具，因为我不使用 Eclipse，而且 AWS 控制台是一种管理版本的笨拙方式（而且上传速度非常慢）。

# php - 无法使用 jquery.post 获取价值（帖子）

> ID：11326362
> 
> 赞同：1
> 
> 时间：2012-07-04T09:35:34.657
> 
> 标签：php, jquery, html

为了从页面中获取一些值，我有一个小问题。

我有以下 jQuery UI 脚本：

```
 $(function() {
    $( "#dialog" ).dialog({
        autoOpen: false,
        show: "slideUp",
        hide: "slideDown",
        height: "300",
        width: "400",
        title: "Test pop-up",
        buttons: {
            "Close": function(){
                $(this).dialog("close");
                    }
                }
            }           
        );

    $( "p.diag").click(function(e) {
        var monUrl = 'test2.php';
        $.post("test2.php", { name: "test", time: "test" } );
        $('#dialog').load(monUrl, function(response, status) {
        $('#test_dialog').html(response);
        pos = $("p.diag").attr("id");       
    });
    $( "#dialog" ).dialog("open");      
    e.preventDefault();

}); 
```

test2.php 页面如下所示：

```
<?php
$var = $_POST['name'];
echo 'name = '.$var.'';
?> 
```

我只想从我的 jQuery 脚本中检索“名称”值，但无论我做什么，`$_POST['name']`仍然是无效的......

有什么线索吗？难道我做错了什么 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:40:08.267

您的代码中没有回调处理程序。

```
$.post("test2.php", { name: "test", time: "test" }, function(data) {
  console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T09:40:42.120

use this method for take response from php You did wrong

```
 $.post("test2.php", { name: "test", time: "test" },function(data){
  $('#test_dialog').html(data);  
  }); 
```

# android-ndk - Android NDK 原生 JPEG 编码

> ID：11326364
> 
> 赞同：4
> 
> 时间：2012-07-04T09:35:48.940
> 
> 标签：android-ndk, jpeg, encode, libjpeg

如何使用 C 中的 NDK 将 ARGB 像素数组编码为 JPEG (jpg) 文件？但不使用它对 Java API 包装器的任何调用？我看到有一个名为 libjpeg 的库，但我找不到任何关于如何在 NDK 中使用它的教程。还有更多选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:08:05.410

这是您的教程，请查看此[http://www.usefullcode.net/2011/01/android_ndklibjpeg.html](http://www.usefullcode.net/2011/01/android_ndklibjpeg.html)在谷歌浏览器或其他带有谷歌翻译器的浏览器中打开此链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T09:47:22.390

除了 JNI 调用之外，还有至少 2 个选项：

1)`libjpeg`直接使用。源代码可以在这里下载：[http](http://www.ijg.org) : //www.ijg.org 源代码对 NDK 非常友好，您只需要`Android.mk/Application.mk`为项目创建即可。但是，API`libjpeg`相当复杂。

2）使用包装图像库。我会推荐使用`FreeImage`： http: [//freeimage.sourceforge.net](http://freeimage.sourceforge.net) 它有非常干净的 API，可以很容易地为 Android 编译（不需要 autoconf 配置）并且具有生产质量（用于 Unity3D 引擎）。作为额外的奖励，您将能够读取和写入除 JPEG 之外的许多其他图像格式。实际上它包含`libjpeg`，但提供了更清洁的 API。

# sql - 如何使用 LINQ 或 SQL 根据其他表上存在的其他字段的数据更新一个表中某些字段的数据？

> ID：11326365
> 
> 赞同：1
> 
> 时间：2012-07-04T09:35:50.150
> 
> 标签：sql, sql-server, tsql, sql-update

我的项目中有以下视图和表格，

vw_get_arabia_upod_full_details ![在此处输入图像描述](../Images/85eb22055809061650b1c23ebefafad1.png)

arabia_upod_item_avalability_master ![在此处输入图像描述](../Images/faf04285804b4ad4f9d2c6afecd64aea.png)

我想根据同一张表中的 maxAllowed 和 arabia_upod_item_avalability_master 中的可用数量来更新 vw_get_arabia_upod_full_details 中每个 item_id 的数量和总价。availableQuantity 是总数。可用的数量。因此，我需要更新每个项目的数量，检查 maxAllowed 并将 maxAllowed（或小于该值）分配给数量，直到 availableQuantity 变为零。你可以帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:39:16.900

```
update vw_get_arabia_upod_full_details 
set
    quantity = your value
    price = ...
from vw_get_arabia_upod_full_details d
join arabia_upod_item_avalability_master m on d.id = m.id
where your condition 
```

# javascript - 使用 javascript 或 jquery 向移动设备显示特定内容

> ID：11326373
> 
> 赞同：0
> 
> 时间：2012-07-04T09:36:24.837
> 
> 标签：javascript, jquery

我需要向 iPhone 用户显示不同的信息，因为他们无法显示闪光灯。因此，例如为使用 iPhone 的任何人显示一个 jpeg，并且任何其他设备都可以看到 flash 内容。

我认为最好的方法是使用 JavaScript 或 jQuery，使用 http 标头信息。但是我不知道从哪里开始，有没有人有任何想法？

理想情况下，如果此人没有 JavaScript，我不想将其替换为错误，因为我不希望 iPhone 用户认为他们错过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:02:15.970

您可以定义`navigator.userAgent.match(/iPhone/i)`哪些检查网页是否在`iphone`或其他设备中打开。使其成为配置变量或全局定义它，以便您在整个脚本中访问它。然后您可以轻松地将检查条件设置为显示 iphone 特定内容。这将返回并`true`用于其他设备。我想这就是你正在寻找的。希望这可以帮助。`iphone``false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:08:34.763

以特定设备为目标通常不被认为是好的做法，因为您只能在编码时满足已知设备的需求，将来可能会出现问题。您可以在 JS 中测试用户代理，但这不是一个好方法。例如，请参阅：-

[http://www.htmlgoodies.com/beyond/webmaster/toolbox/article.php/3888106/How-Can-I-Detect-the-iPhone--iPads-User-Agent.htm](http://www.htmlgoodies.com/beyond/webmaster/toolbox/article.php/3888106/How-Can-I-Detect-the-iPhone--iPads-User-Agent.htm)

...更好的做法是测试对给定技术/硬件/功能等的支持。要测试 Flash，请查看以下答案：-

[如何检测是否安装了 Flash，如果没有，显示一个隐藏的 div 通知用户？](https://stackoverflow.com/questions/998245/how-can-i-detect-if-flash-is-installed-and-if-not-display-a-hidden-div-that-inf)

也许还值得一提的是，CSS 是一种强大的工具，可以为不同的屏幕尺寸显示不同的内容。谷歌搜索“javascript 媒体查询”，您会发现大量信息。这是一个开始的介绍：-

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

# c# - 在数据库中添加或删除条目时刷新dataGridView项目？

> ID：11326381
> 
> 赞同：0
> 
> 时间：2012-07-04T09:36:46.903
> 
> 标签：c#, winforms, gridview

我正在向 Winforms 中的数据库添加、删除和更新数据。我在所有添加、删除和更新表单上都有 gridview。单击“删除”按钮删除记录后，删除的记录应立即从 dataGridView 中删除。

////请注意，DATABIND 给出错误，即缺少使用或程序集引用。

代码背后：

```
 private void btnDelete_Click(object sender, EventArgs e)
    {

        if (txtIDD.Text == "")
        {
            MessageBox.Show("Please fill ID no. of record to Delete", "Important Message");

        }
        else
        {
            try
            {
                OleDbCommand Cmd = new OleDbCommand();
                Cmd.Connection = conn;
                conn.Open();
                Cmd.CommandText = "DELETE FROM AddressBook WHERE ID="+txtIDD.Text;
                Cmd.CommandType = CommandType.Text;
                Cmd.ExecuteNonQuery();
                Cmd.Connection.Close();
                conn.Close();
                dataGridView3.Update();
                MessageBox.Show("Delete Succesfull");
            }
            catch (System.Exception err)
            {
                  dataGridView3.DataSource = dt;
                  dataGridView3.DataBind();
                  dataGridView3.Update();

                this.label27.Visible = true;
                this.label27.Text = err.Message.ToString();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:38:17.937

在添加、更新和删除等操作后，再次绑定网格以从数据库中获取值。

```
private void btnDelete_Click(object sender, EventArgs e)
{

    if (txtIDD.Text == "")
    {
        MessageBox.Show("Please fill ID no. of record to Delete", "Important Message");

    }
    else
    {
        try
        {
            OleDbCommand Cmd = new OleDbCommand();
            Cmd.Connection = conn;
            conn.Open();
            Cmd.CommandText = "DELETE FROM AddressBook WHERE ID="+txtIDD.Text;
            Cmd.CommandType = CommandType.Text;
            Cmd.ExecuteNonQuery();
            Cmd.Connection.Close();
            conn.Close();                

            **//Call a method that binds the grid or get DataTable from database and bind it like this**
             dataGridView3.DataSource = dt;               
            dataGridView3.Update();

            MessageBox.Show("Delete Succesfull");
        }
        catch (System.Exception err)
        {
            this.label27.Visible = true;
            this.label27.Text = err.Message.ToString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-04T09:43:03.477

创建一个函数，您可以在其中重新加载网格

```
private method ReloadGrid()
{
   // first load your datatable/dt then set it as the datasource of your grid
   dataGridView3.DataSource = dt;
   dataGridView3.DataBind();

} 
```

# android - 以 STRING 格式存储图像需要什么列大小（varchar 数据类型）？

> ID：11326382
> 
> 赞同：0
> 
> 时间：2012-07-04T09:36:48.047
> 
> 标签：android, sqlite

我想将图像存储在我的 SQLITE 数据库中。我使用以下代码检查了图像字符串的长度：

```
String res;
int reslen;
Log.i("asd", "doinback");
WebServiceConnecting wbs = new WebServiceConnecting();
res=wbs.SoapAction(new String[] {"FileName"}, new String[] {"1.jpg"}); //gets the image in string format
reslen=res.length();
res=String.valueOf(reslen);
Log.i("string res=",res ); 
```

我得到 reslen 的值约为 300,000。那么我应该为 SQLite db 中的 varchar 列提供什么大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:39:36.460

AFAIK sqlite 对 TEXT 列使用字符集对话，考虑使用 BLOB 类型来存储图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:49:18.373

support a string or BLOB length up to 231-1 or 2147483647

Check further in [http://www.sqlite.org/limits.html](http://www.sqlite.org/limits.html)

# android - 以编程方式将位置分配给android中的按钮

> ID：11326384
> 
> 赞同：3
> 
> 时间：2012-07-04T09:36:57.113
> 
> 标签：android, button

告诉我如何使用线性布局以编程方式将位置分配给 android 中的按钮。默认情况下，它占据屏幕的极左位置。我也想使用线性布局来做到这一点，请不要建议我使用相对布局。以下是我的代码

```
buttons_and_edittext=new LinearLayout(HelloAugmentedWorldActivity.this);
buttons_and_edittext = (LinearLayout)findViewById(R.id.linearLayout1);
buttons_and_edittextParameters = new LinearLayout.LayoutParams(120, 150);

button3 = new Button(this);
button3.setText("log");

buttons_and_edittext.addView(button3,      
buttons_and_edittextParameters); 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:00:36.570

Please refer below link for add buttons into relative layout at fix position.

[Android User Interface Design: Relative Layout](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-relative-layouts/)

And Use Below Code also for that.

```
Button but1 = new Button(this);  
RelativeLayout.LayoutParams params2 = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);  
params2.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);  
but1.setLayoutParams(params2);  
but1.setText("Press Here!");  
// give the button an id that we know  
but1.setId(1001);
layout1.addView(but1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T11:19:12.507

很长一段时间后，我得到了一个完美的解决方案，通过执行这些步骤，在 android studio 中借助相关布局参数以编程方式设置按钮和图像位置 - 请查看此[链接](https://youtu.be/PynfI_9CSqA)。

# file - 可变网格制造商

> ID：11326386
> 
> 赞同：2
> 
> 时间：2012-07-04T09:36:59.903
> 
> 标签：file, batch-file

我一直在研究一个批处理文件，它创建了一个像这样的变量网格：

```
%G1%%G2%%G3%%G4%%G5% 
%G6%%G7%%G8%%G9%%G10% 
%G11%%G12%%G13%%G14%%G15% 
```

但是当我尝试运行我的批处理文件时，它只是这样写：

```
%G1%%G2%%G3%%G4%%G5%
Echo is off.
Echo is off.
Echo is off.
Echo is off. 
```

我在这里添加了代码，请有人告诉我我做错了什么？

```
@echo off
title GirdMaker
setlocal enabledelayedexpansion

set lineid=0
set COLS=0
set LINES=0
set /p LINES=Enter number of lines:
set /p COLS=Enter the number of colums:
cls
set START=1
set linecount=0
:A
set LINE=
for /l %%I in (%START%,1,%COLS%) do (
set LINE=!LINE!%%G%%I%%
)
set /a linecount=%linecount%+1
echo %LINE% 
set /a lineid=%lineid%+%COLS%+1
set START=%lineid%

if %LINES% EQU %linecount% (
pause >nul
exit
) 
goto :A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:24:15.817

我们来分析这部分：

```
:A
set LINE=
for /l %%I in (%START%,1,%COLS%) do (
set LINE=!LINE!%%G%%I%%
) 
```

第一次循环迭代创建：`set LINE=%G1%`对吗？第二次循环迭代：`set LINE=%G1%%G2%`等等，直到`set LINE=%G1%%G2%%G3%%G4%%G5%`，对吧？

现在，这一行：

```
echo %LINE% 
```

首先是这样展开的：

```
echo %G1%%G2%%G3%%G4%%G5% 
```

并且*不再*扩展，因为 % 扩展只从左到右进行了一次。结果是：

```
%G1%%G2%%G3%%G4%%G5% 
```

对不起，您没有告诉我们您希望从程序中得到什么，但是如果您希望显示变量 G1 到 G5 的值，那么您必须以这种方式*重新启动*% 扩展：

```
call echo %LINE% 
```

关于您的其他线路，您必须仔细检查限制；很明显，在这些情况下 LINE 变量是空的。

**编辑**：也许这是你想要的？

```
set /p LINES=Enter number of lines: 
set /p COLS=Enter the number of colums: 
set index=0
for /L %%I in (1,1,%LINES%) do (
   set LINE=
   for /L %%J in (1,1,%COLS%) do (
      set /A index+=1
      set LINE=!LINE!%%G!index!%%
   )
   call echo !LINE!
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:06:37.513

您没有在 for 循环中调整结束位置，因此内容永远不会在第一行之后运行（`START`已经大于`COLS`），因此`LINE`留空并且您的调用`echo`为空。

你需要改变这个：

```
for /l %%I in (%START%,1,%COLS%) do ( 
```

这是试图从（1-5、6-5、11-5）循环。对于这样的事情：

```
set /a ENDCOL = %START% + %COLS% - 1
for /l %%I in (%START%,1,%ENDCOL%) do ( 
```

这样，它将从 1-5、6-10、11-15 等循环...

# oracle - SQL 查询可以连接到执行时间未知的表吗？

> ID：11326393
> 
> 赞同：0
> 
> 时间：2012-07-04T09:37:32.587
> 
> 标签：oracle, plsql

我需要编写一个查询，该查询将定期从系统中提取大量数据。

我遇到的问题是，在启动新项目时，应用程序创建了大约 100 个具有乱码名称的表。特定项目的表名称保存在项目表中。

所以我需要在项目表、其他几个表之间加入，然后在项目表的列中列出的每个表。

这可能吗，如果有的话，有什么指针吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:52:44.470

将您的查询放入`EXECUCTE IMMEDIATE`语句中。（这称为动态 sql）

```
declare
  vcTableName varchar2(30);
  vcResult varchar2(128);
begin

  vcTableName := 'SOME_TABLE_NAME';

  EXECUTE IMMEDIATE 'SELECT column FROM '||vcTableName||' WHERE conditions' into vcResult;

  do_something(vcResult);

end;
/ 
```

# solr - Solr：按匹配文档中的字段进行 MLT 过滤

> ID：11326397
> 
> 赞同：0
> 
> 时间：2012-07-04T09:37:38.767
> 
> 标签：solr

MoreLikeThis 可以返回匹配的文档。我的问题是，我能否以某种方式传入查询参数以指示我想过滤匹配文档的字段值？非常感谢！

# git - Git 合并只修复，不合并其他分支

> ID：11326399
> 
> 赞同：1
> 
> 时间：2012-07-04T09:37:45.100
> 
> 标签：git, merge, branch

我们的处境很复杂。我们有这个存储库之王：

```
 C1      C4              C5
devel   *---*---*---*-----------*---------
              \_____
                    \    C2    C3      
fix-ie  *--*---------*----*----*-------*---
                     M1                 \___
                                            \
testing *----*-------------------------------*---
                                             M2 
```

如您所见，devel 被合并到 fix-ie 分支中。

问题是“测试”分支不应该有“开发”提交（我们不想要 C1）但我们需要在“测试”中合并修复即只有 C2 和 C3 提交

如果我做：

```
git checkout testing
git merge fix-ie 
```

我将在我的测试分支中进行 M1 合并...所以在我们的测试分支中可以找到 C1 提交。这不是我们想要的。

如何避免这种情况？

请记住，我简化了示例，在我们的 fix-ie 和 devel 分支中有很多合并和提交。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:27:59.577

一种方法是创建一个单独的`fix-ie`分支，从您的分支中排除合并提交`devel`。然后，您可以将该分支合并到您的`testing`分支。

您可以搜索您的 reflogs，以从您要忽略`git reflog show -all`的分支中查找合并提交。`devel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:57:44.367

看来我找到了解决方案。

获取第一个合并 SHA，例如名为“123abc”。我可以：

```
git rev-list --no-merges --reverse --topo-order debug-ie ^123abc 
```

然后每一行都是一个提交，但列表中没有合并。

所以我能做的就是：

```
for SHA in $(git rev-list --no-merges --reverse --topo-order debug-ie ^123abc); do
    git cherry-pick $SHA
done 
```

如果我错了，请告诉我……但这似乎是个好主意。

# backbone.js - 两个模型之间的关系模型：关系键

> ID：11326402
> 
> 赞同：1
> 
> 时间：2012-07-04T09:37:56.370
> 
> 标签：backbone.js, backbone-relational

我想使用骨干关系在两个模型 User 和 Task 之间建立关系。
我想为每个任务获取用户模型或用户属性。

两种模型之间的关系如下：

```
taskModel.creator_id = userModel.id 
```

* * *

```
// TaskModel
var TaskModel = Backbone.RelationalModel.extend({

    relations: [
        {
            type: 'HasOne',
            key: 'creator_id',
            relatedModel: UserModel
        }
    ],

    urlRoot: 'url_get_tasks'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:37:30.620

```
relations: [
        {
            type: Backbone.HasOne,
            key: 'user',
            relatedModel: UserModel
        }
    ] 
```

`key`属性存储相关模型的初始数据。您可以在 TaskModel 中定义[parse](http://backbonejs.org/#Model-parse)方法以 `user: {id: 1}`从`creator_id: 1` on 开始`fetch`或在以下位置进行`initialize`：

```
this.set('user', {id: this.get('creator_id') }) 
```

# python - Python 类变量初始化访问变量外部 init

> ID：11326405
> 
> 赞同：2
> 
> 时间：2012-07-04T09:38:04.543
> 
> 标签：python, django, django-forms, python-2.7

我在我们的项目中使用 Django。我已经使用 Django 表单创建了一个表单。在其中一种形式中，我需要检查一个变量，并根据变量的值添加或删除一个元素。

我在初始化对象时将此变量传递给表单。IE`form=MyForm(flag)`

在表单类中，我正在这样做

```
class MyInfoForm(forms.Form):
    def __init__(self, *args,**kwargs):
        self.flag= kwargs.pop('flag', None)
        super(MyInfoForm, self).__init__(*args, **kwargs)
        print self.flag

    Firstname = forms.CharField(label=u' First name :', max_length=30) 
```

在初始化函数中，我打印了标志并且它工作正常。但是我怎样才能访问 我尝试过的*初始化之外的变量*

```
 class MyInfoForm(forms.Form):
        myFlag=None
        def __init__(self, *args,**kwargs):
            self.flag= kwargs.pop('flag', None)
            myFlag=self.flag
            super(MyInfoForm, self).__init__(*args, **kwargs)
            print self.flag

        Firstname = forms.CharField(label=u' First name :', max_length=30)
        print myFlag 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:17:14.457

该`class`语句是一个可执行语句，它：

1.  创建命名空间
2.  依次执行类语句块顶层的所有代码
3.  `type`使用类名、命名空间和父类列表调用适当的元类（默认为）
4.  将新创建的`class`对象绑定到封闭（通常是模块）命名空间中的类名

长话短说，您不能从`class`语句主体中访问实例属性，因为实例甚至类本身都不存在。

如果您想要在每个实例的基础上更新/添加/删除字段并根据传递给表单初始化程序的某些参数，正确的解决方案是首先调用父级的初始化程序（以确保您的表单的实例字段已正确初始化）然后做任何你必须做的事情，即：

```
class MyInfoForm(forms.Form):
    firstname = forms.CharField(label=u' First name :', max_length=30)
    def __init__(self, *args,**kwargs):
        self.flag= kwargs.pop('flag', None)
        super(MyInfoForm, self).__init__(*args, **kwargs)
        if self.flag:
            # XXX IMPORTANT : 
            # you want to access self.fields['fieldname']                
            # NOT self.fieldname
            self.fields["firstname"].label = "Yadda" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:40:42.060

```
print MyInfoForm.myFlag 
```

这个怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:43:18.313

这取决于...标志的范围应该是类还是类的实例？

如果范围应该是实例（这是您第一次尝试时的样子），那么您可以通过以下方式访问它：

```
instance = MyInfoForm(flag)
...
instance.flag 
```

另一方面，如果变量 flag 属于该类（意思是，对于 MyInfoForm 的每个实例只有一个 flag 值），那么您可以通过执行以下操作来访问它：

```
MyInfoForm.myFlag #using your second attempt 
```

另外...您将变量声明为`myFlag`，并尝试打印`myflag`。变量名区分大小写。

# mysql - 使用表中的变量创建触发器

> ID：11326407
> 
> 赞同：2
> 
> 时间：2012-07-04T09:38:09.237
> 
> 标签：mysql

我对 MYSQL 中的触发器相对较新，如果这是我想要做的一件非常基本的事情，我很抱歉。我找到了如何设置一个允许静态更新的方法，但是我没有看到任何关于如何使用初始更新中的一个字段作为触发器语句中的变量

例子：

表 1 `items`：

```
id | name | total_stock
1 | item | 8
2 | item2 | 0 
```

表 2 `item_options`，：

```
id | item_id | option | stock
1 | 1 | test | 5
2 | 1 | test2 | 3
3 | 2 | test | 0 
```

如果我再更新`item_options`：

```
UPDATE `item_options` SET `stock`=7 WHERE `id`=1 
```

或将新项目插入`item_options`：

```
INSERT INTO `item_options` (`item_id`,`option`,`stock`) VALUES ('2','add','2') 
```

然后我想（如果可能的话）使用触发器来更新表`total_stock`中`items`的 SUM`stock`与`item_options`表中具有相同对应的`item_id`.

所以，我想我的问题分为两部分：

1.  这可能吗？
2.  有人可以指出我如何做到这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:49:17.623

您可以使用伪行`new`或`old`如此[处所述](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)。

它应该是这样的：

```
CREATE
TRIGGER my_trigger after insert, update
ON item_options FOR EACH ROW 
BEGIN
    update items set total_stock = (select sum(stock) from item_options where item_id = new.item_id) where item_id = new.item_id;
END; 
```

请注意，我没有测试过它，但它应该给你一个大致的想法。

# php - 如何使用 bcrypt 和 php 进行密码认证？

> ID：11326417
> 
> 赞同：0
> 
> 时间：2012-07-04T09:38:49.413
> 
> 标签：php, bcrypt

我尝试了[如何使用 bcrypt 在 PHP 中散列密码？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php) 但似乎无法获得一个有效的例子。我复制了 Bcrypt 类并在其底部添加了以下代码。

```
$bcrypt = new Bcrypt(15);

// pw on server. Used $pwHash = $bcrypt->hash($formPassword); to get the hash from 'qwerty'.
$serverPw = '$2a$15$Ty6hIEEWFpUFHoKujvdmw.9kmyrwYip2s8TLdjDfNoVJuQx/TGgwu'; 

// user enters plain text pw...
$passAttempt = 'qwerty';

// attempt to check the attempted password against the server hashed pasword.
$pwVerify = $bcrypt->verify($serverPw, $passAttempt); 

if ( $pwVerify == 1 ) {echo "$pwVerify = true";} else {echo "$pwVerify = not true";}
// I also tried if ($pwVerify) and if ($bcrypt->verify($serverPw, $passAttempt))
// Output is "= not true" 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:57:50.963

您必须存储密码和 BCrypt 时使用的盐，否则您将永远不会得到相同的字符串。这门课对我来说似乎很糟糕，不要使用它。请参阅[此示例](https://gist.github.com/972386)和[文档](http://php.net/manual/fr/function.crypt.php)以直接使用 PHP 的 crypt 函数。

编辑：您可能应该使用[PHPPass](http://www.openwall.com/phpass/)，这似乎是一个经过良好测试和引用的库。

# jquery - 谷歌地图，带有所有气球的面板可以在地图上拖放

> ID：11326418
> 
> 赞同：0
> 
> 时间：2012-07-04T09:38:50.280
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在开发一个嵌入“谷歌地图”视图的网页。在此网页中，用户必须在地图上指定多个位置

此时，当用户单击要拖动的按钮时，我可以在显示的地图上展开气球，但是根据缩放，放大和缩小将气球拖动到某个地方可能会非常痛苦。

我想知道是否可以有一个带有所有气球的面板可以在地图上拖放？

我目前的发展：

![在此处输入图像描述](../Images/500e63d956a066998b1293b4529a8be3.png)

我的目标： ![在此处输入图像描述](../Images/b0b893fb3c5bffa1ea9fd9eacb695f32.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:58:23.847

我有一个几年前制作的旧演示，它可能具有您正在寻找的功能。问题是它使用 API V2，所以你必须将它转换为 V3。

这里：

[http://maps.forum.nu/gm_user_defined_marker.html](http://maps.forum.nu/gm_user_defined_marker.html)

# jsp - RequestDispatcher 无法转发到 WEB-INF 中的资源

> ID：11326421
> 
> 赞同：1
> 
> 时间：2012-07-04T09:39:00.093
> 
> 标签：jsp, tomcat, servlets

开发小型样例 BookStore 应用程序并遇到问题。

在屏幕截图中，我得到了 WEB-INF/pages/book-form.jsp，当我在 doGet servlet 方法中使用以下行时，例如

```
getServletContext().getRequestDispatcher("/WEB-INF/pages/book-form.jsp").forward(req, res); 
```

但是如果我使用找不到页面

```
getServletContext().getRequestDispatcher("/book-form.jsp").forward(req, res); 
```

这工作正常。

**问题：**如何解决“/WEB-INF/pages/book-form.jsp”？

![书店应用](../Images/3a1aa8c3bbe747ebb6d7340362e7e9ca.png)

# zk - 找不到 org.zkoss.bind.BindComposer

> ID：11326427
> 
> 赞同：0
> 
> 时间：2012-07-04T09:39:16.613
> 
> 标签：zk

我使用带有 ZK 插件的 Eclipse。项目也是使用 zk 插件创建的。尝试开始绑定错误“java.lang.ClassNotFoundException：org.zkoss.bind.BindComposer”...我看到具有此类的库位于构建路径和Web应用程序库中。我正在阅读教程[http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/BindComposer](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/MVVM/Data%20Binding/BindComposer)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:32:20.723

为避免此类问题，请尝试[ZK Studio](http://www.zkoss.org/download/zkstudio)

而不是手动添加jar文件..现在可以创建一个ZK Project Jar自动添加到项目lib文件夹中。

# java - [java]为什么我添加了一些数据后hashmap的数据又回来了，尽管我已经清除了hashmap

> ID：11326433
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:39:38.533
> 
> 标签：java, hashmap

```
public class readBin {
public static void main(String[] args) throws IOException{
    long time1 = System.currentTimeMillis();

File targetfile = new File("d:\\d2012.bin");
    FileInputStream in = new FileInputStream(targetfile);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));
    byte[] buffer = new byte[2097152];
    int byteread = 0;
    String bufferString = "";

    ArrayList<HashMap> arr = new ArrayList<HashMap>();
    ArrayList arrstr = new ArrayList();
    HashMap hashmap = new HashMap();
    ArrayList<String> cttarr = new ArrayList<String>();
    String[] strarr = new String[2];
    ArrayList<String> valarr = new ArrayList<>();
    //It's all init above,below comes the file reading
    bufferString = br.readLine();
    while(bufferString != null){
        //if data readed this line from the file is not "*newrecord" or ""
        if(!bufferString.equals("*NEWRECORD")&&!bufferString.equals("")){
            //according to the need,make use of these data
            strarr = bufferString.split("=");
            switch (strarr[0].trim()) {
            case "UI":
                hashmap.put(strarr[0].trim(), strarr[1].trim());
                break;
            case "MH":
                hashmap.put(strarr[0].trim(), strarr[1].trim());
                break;
            case "AQ":
                String[] valuearr = strarr[1].split(" ");
                hashmap.put(strarr[0], valuearr);
                break;
            case "ENTRY":
                bufferString = bufferString.split("\\|")[0].toString();
                //if key named ENTRY has already existed,update the data
                if (hashmap.containsKey(strarr[0].trim())) {
                    ArrayList<String> templist = ((ArrayList<String>)hashmap.get(strarr[0].trim()));
                    templist.add(bufferString.split("=")[1].trim());
                    hashmap.put(strarr[0].trim(), templist);
                //or insert it 
                } else {
                    cttarr.add(bufferString);
                    hashmap.put(strarr[0].trim(),cttarr);
                }
                break;
            case "MS":
                hashmap.put(strarr[0].trim(), strarr[1].trim());
                break;
            case "MN":
                //as ENTRY do
                if (hashmap.containsKey(strarr[0].trim())) {
                    ArrayList<String> templist =     ((ArrayList<String>)hashmap.get(strarr[0].trim()));
                    templist.add(strarr[1].trim());
                    hashmap.put(strarr[0].trim(), templist);
                } else {
                    cttarr.add(strarr[1].trim());
                    hashmap.put(strarr[0].trim(),cttarr);
                }
                break;

            default:
                break;
            }
        } else if(hashmap.size() != 0) {
            //if it equals to *newrecord or "",init the hashmap again
            arr.add(hashmap);
            hashmap = new HashMap();
        }
        bufferString = br.readLine();
        if (bufferString == null) {
            arr.add(hashmap);
        }
    }
    ArrayList arrresult = arr;
    long time2 = System.currentTimeMillis();
    System.out.println(time2-time1);
    String ui = (String) arr.get(0).get("MH");
    ArrayList<String> entrys = (ArrayList<String>) arr.get(0).get("ENTRY");
    int len = arr.size();
    System.out.println(ui);
    System.out.println(len);
}

public String getbs(){
    return "";
}
} 
```

我想从文件中迭代数据并将它们添加到hashmap中，在将hashmap更新为arrayList之后，再次初始化hashmap。但是从结果来看，hashmap中的数据似乎不会清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:55:54.343

很明显，因为不知道 new HashMap() 会保留前一个实例的数据

```
 } else if(hashmap.size() != 0) {
        //if it equals to *newrecord or "",init the hashmap again
        arr.add(hashmap);
        hashmap = new HashMap();
    } 
```

当你希望它被执行时不被执行。所以检查输入文件的格式，和/或尝试调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:19:26.560

OK，现在我知道学好英语有多重要了。

我现在明白了，在集合中，它总是引用而不是实体，所以我不应该这样写代码

`ArrayList<String> templist = ((ArrayList<String>)hashmap.get(strarr[0].trim()));`

当我打开它时`ArrayList<String> templist = new ArrayList<String>((ArrayList<String>)hashmap.get(strarr[0].trim()));`，它运行良好。

# playframework-2.0 - sbt playframework 发布子模块

> ID：11326436
> 
> 赞同：1
> 
> 时间：2012-07-04T09:40:06.490
> 
> 标签：playframework-2.0, sbt

我有以下项目结构：

```
myproject
  |
  +- app
  |
  +- conf
  |
  +- project
  |  |
  |  +- project
  |  |
  |  +- Build.scala (etc.)
  |
  +- modules
     |
     +- security
        |
        +- app
        |
        +- conf 
```

这是我的构建文件中的片段：

```
val security = PlayProject(
    appName + "-security", appVersion, path = file("modules/security")
) 
```

如果我尝试`sbt publish`使用非快照版本，sbt 将退出并出现以下错误：

```
sbt.ResolveException: unresolved dependency: myproject-security#myproject-security_2.9.1;123 
```

当然它在存储库中找不到依赖项。但是我怎样才能将子模块与主项目一起发布呢？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:21:40.443

这个问题确实需要更多澄清才能正确回答。很高兴看到更多您的构建文件。

如果您的 Play 项目正在利用 SBT 子项目，则应使用根项目进行编译。看起来您可能正在为 myproject-security 在 Build.scala 中声明一个依赖项。可能是这样的：

```
"myproject-security" %% "myproject-security" % "123" 
```

我不确定这是否正确，但是如果没有看到完整的构建文件就很难回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:38:47.770

我发现我需要聚合主项目以达到预期的结果。像这样：

```
...

lazy val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA)
.dependsOn(security)
.aggregate(security) 
```

# windows-runtime - 无法在 web 视图之间滑动 (Windows 8)

> ID：11326437
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:06.927
> 
> 标签：windows-runtime, winrt-xaml

目前我正在开发一个 WinRT 应用程序，我想在网页之间实现滑动。我使用 FlipView 进行滑动。

但显然 WebView 正在捕获滑动并且不会将这些事件传递给 FlipView。

```
<FlipView HorizontalAlignment="Left" Grid.Row="1" VerticalAlignment="Top" Margin="50,50,50,50">
        <FlipViewItem>
            <WebView HorizontalAlignment="Left" Height="600" VerticalAlignment="Top" Width="1200" Source="http://www.site1.com" ManipulationMode="None"/>
        </FlipViewItem>
        <FlipViewItem>
            <WebView HorizontalAlignment="Left" Height="600" VerticalAlignment="Top" Width="1200" Source="http://www.site2.com"/>
        </FlipViewItem>
</FlipView> 
```

有没有办法将滑动事件传递给 FlipView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:29:04.957

您可以尝试在 WebView 上方添加一个标题栏区域，该区域中的滑动事件仍将传递给 FlipView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T14:24:41.143

没有。因为 webview 与其他控件不同，在技术上是一个单独的窗口，所以当您尝试将其放在另一个交互式控件中或尝试在其上呈现其他控件时，您会遇到这样的限制，即它不能很好地播放。这个不幸的限制一直困扰着微软的 UI 框架。

# android - Android Beam - 以编程方式激活

> ID：11326438
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:08.300
> 
> 标签：android, nfc, android-beam

我尝试在 ICS 上以编程方式激活或停用 Android Beam 功能，但我找不到任何 api。是否可以 ？

而且我会知道在启动推送操作之前是否启用了 Android Beam 功能。是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:32:30.680

在手机的设置中，您可以启用和禁用 Android Beam 功能（无线网络 -> 更多... -> Android Beam）。普通应用没有打开或关闭此功能的必要权限（并且没有 API）。但是，您可以使用`new Intent(Settings.ACTION_WIRELESS_SETTINGS)`.

在 Android 4.1 JB 上，添加了一个新的 API 调用[NfcAdapter.isNdefPushEnabled()](http://developer.android.com/reference/android/nfc/NfcAdapter.html#isNdefPushEnabled%28%29)来检查 Android Beam 是打开还是关闭。

顺便说一句：即使 Android Beam 被禁用，只要 NFC 开启，您的设备仍然能够接收 Beam 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T23:58:35.563

您可以根据 Android 版本和当前状态具体选择要调出的设置屏幕。我是这样做的：

```
import android.annotation.TargetApi;
import android.app.Activity;
import android.content.Intent;
import android.nfc.NfcAdapter;
import android.os.Build;
import android.os.Bundle;
import android.provider.Settings;

@TargetApi(14)
// aka Android 4.0 aka Ice Cream Sandwich
public class NfcNotEnabledActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final Intent intent = new Intent();
        if (Build.VERSION.SDK_INT >= 16) {
            /*
             * ACTION_NFC_SETTINGS was added in 4.1 aka Jelly Bean MR1 as a
             * separate thing from ACTION_NFCSHARING_SETTINGS. It is now
             * possible to have NFC enabled, but not "Android Beam", which is
             * needed for NDEF. Therefore, we detect the current state of NFC,
             * and steer the user accordingly.
             */
            if (NfcAdapter.getDefaultAdapter(this).isEnabled())
                intent.setAction(Settings.ACTION_NFCSHARING_SETTINGS);
            else
                intent.setAction(Settings.ACTION_NFC_SETTINGS);
        } else if (Build.VERSION.SDK_INT >= 14) {
            // this API was added in 4.0 aka Ice Cream Sandwich
            intent.setAction(Settings.ACTION_NFCSHARING_SETTINGS);
        } else {
            // no NFC support, so nothing to do here
            finish();
            return;
        }
        startActivity(intent);
        finish();
    }
} 
```

（我特此将此代码放入公共领域，无需许可条款或归属）

# hibernate - 在声纳分析中初始化 Hibernate 需要大量时间

> ID：11326440
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:13.350
> 
> 标签：hibernate, sonarqube, static-code-analysis

我在我的项目中使用 Sonar 进行静态代码分析。问题是 Sonar 在**Initializing Hibernate**上花费了很多时间。有谁知道如何加快声纳分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:10:04.237

我们正在逐步将 Hibernate 从 Sonar 中移除，但目前您无法摆脱它。

当你说“很多时间”时，你的意思是什么？这不应该花费几分钟。

# lotus-notes - 从 NSF 数据库文件中提取数据 - Domino

> ID：11326442
> 
> 赞同：1
> 
> 时间：2012-07-04T09:40:22.180
> 
> 标签：lotus-notes, lotus-domino

我有一个来自基于 Lotus Domino 6.5 版的 domino Web 应用程序的 nsf 数据库文件。

关于如何提取数据的任何想法？数据包含word、pdf和html文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:54:51.240

word和pdf文档可以分离：

```
For a=1 To coll.count
     Set doc=coll.GetNthDocument(a)
     Set rtitem = doc.GetFirstItem("Body")
     Forall o In rtitem.EmbeddedObjects
        oname="c:\" + o.name
        Call o.ExtractFile( oname )
        Call o.Remove
     End Forall
     Call doc.Save(True, False)
  Next 
```

上面的代码只是一个例子，重点是找到嵌入的对象并使用`o.ExtractFile( oname )`

如果 html 文档也是附加文件，您可以对它们执行相同的操作。如果不是，那就另当别论了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:36:18.423

您可以无限制地[从 IBM](http://www.ibm.com/developerworks/downloads/ls/dominodesigner/?S_CMP=LSDL)下载 Notes 设计器客户端，以及具有 90 天评估期的[Notes 和管理员客户端。](http://www.ibm.com/developerworks/downloads/ls/lsndad/index.html)然后您应该能够以本机方式访问数据。

# java - 在不使用意图的情况下将变量从一个类传递到另一个类得到额外的

> ID：11326443
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:28.283
> 
> 标签：java, android

我今天正在做一些 android 代码，现在的问题是我需要让变量通过。场景是我需要先登录 facebook 然后获取我的信息。之后出现一个启动屏幕，它将使用意图显示我的姓名等信息。之后主屏幕现在将出现，并且来自初始屏幕的所有数据现在也将使用意图传递到主屏幕，但问题是这个主屏幕只是我的 tabViews 的容器，我可以随时从一个页面到另一个，我认为我没有必要在这部分再次使用意图。现在我需要获取所有传递到主屏幕的传递数据到我的一个选项卡并将其显示在 TextView 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:56:55.140

您可以`android.app.Application`为此目的使用该类。

创建和使用 Application 类的步骤：

1.  创建您的应用程序类。一个例子如下所示：

    ```
    public class ApplicationController extends Application {

    //Application wide instance variables
    //Preferable to expose them via getter/setter methods

    @Override
    public void onCreate() {
        super.onCreate();
        //Do Application initialization over here
    }

    //Appplication wide methods
    //Getter/Setter methods
    } 
    ```

2.  在中指定您的应用程序类`AndroidManifest.xml`

    `<application android:icon="@drawable/icon" android:label="@string/app_name" android:name=".ApplicationController">`

3.  获取Application Class实例的实例并调用各种方法：

    `ApplicationController AC = (ApplicationController)getApplicationContext();`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:47:32.293

为此，请在主屏幕中使用**公共静态变量。**或者您也可以为此目的使用[**Application类。**](http://developer.android.com/reference/android/app/Application.html)其他选项是[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

对于应用程序类全局变量，请查看这个 SO 问题[如何在 Android 中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:48:46.533

将变量定义为公共静态或其他选项是将变量的值存储到共享首选项中并在下一个活动中检索首选项的值，并参考下面的链接以获取更多信息。

[共享偏好](http://android-er.blogspot.in/2011/01/example-of-using-sharedpreferencesedito.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T09:51:42.260

您可以使用 SharedPreferences 像这样传递值：

```
//for write id one Activity
SharedPreferences spre = context.getSharedPreferences("Your prefName",
        Context.MODE_PRIVATE);
SharedPreferences.Editor prefEditor = spre.edit();
prefEditor.putString("key", value);
prefEditor.commit();

// for get id  second Activity
SharedPreferences spre = context.getSharedPreferences("Your prefName",
        Context.MODE_PRIVATE);
String mystring=  spre.getString("key",""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T09:54:19.650

最简单的方法是，您可以使用带有静态变量的数据类在任何地方使用它。像这样的东西。

```
public class User {

    public static String name;
    public static String email;
        .....

} 
```

然后，在从 Facebook 接收数据后，您可以填写此内容并可以在任何地方访问它。

执行所需任务的另一种方法是类的 SharedPreferences 和 Application Object。[您可以在此处](http://saigeethamn.blogspot.com/2009/10/shared-preferences-android-developer.html)和[此处](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android)阅读有关它们的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-20T13:51:59.820

假设第一类是A，另一个类是B，您想将数据从A发送到B，即您想将user_id从A类发送到B，然后在您的A类中将user_id声明为公共字符串。在 B 类中以 id = A.user_id 访问您的 user_id。

希望这对您有所帮助。

# java - 创建自定义 java.util.concurrent.ForkJoinTask

> ID：11326444
> 
> 赞同：3
> 
> 时间：2012-07-04T09:40:32.877
> 
> 标签：java, java.util.concurrent, fork-join

我目前正在评估各种并发解决方案来解决业务问题。该用例类似于“令人尴尬的并行”算法。

基本上对于单个用户请求，我们需要在计算响应之前从多个不同的数据源中检索数据。目前所有 3 个 DAO 调用都是串行进行的，但没有相互依赖关系，因此可以并行进行。

目前实施的解决方案：

*   java.util.concurrent.ExecutorService 使用 Callables 和 Futures
*   org.springframework.scheduling.annotation.Async 启用 spring 管理线程池，但仍然允许我进行异步调用
*   Akka（被认为是矫枉过正）用于我们相对简单的用例

我想评估的最后一个框架是 Java ForkJoin 框架，我可以看到多个使用 RecursiveTasks 的示例，但我的用例本质上不是递归的，因此不适合模型：如果任务足够小，则拆分它并递归调用相同的方法（即分而治之）

我的用例是将任务拆分为 3 个任务。分叉所有 3 并再次加入。这甚至是 ForkJoin 实现的有效用例吗？或者我应该坚持使用通用的 ExecutorService 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:54:16.087

正如您已经提到的，您的用例中不涉及任何递归。如果您只需要并行运行 3 个任务并等待它们完成，[`ExecutorService.invokeAll`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#invokeAll%28java.util.Collection%29)这似乎是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:03:13.970

对于只有 3 个并行任务，最简单的方法是运行 3 个线程，并使用 thread.join() 等待它们完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:22:11.933

ExecutorService 的优点是它可以保留线程池。因此，在您的情况下，对于多个连续调用，线程将被重用，这为操作系统节省了一些周期来停止和创建新线程。

ForkJoinPool 的另一个优点是它可以“窃取”工作。AFAIK，这意味着它允许一个已完成任务的线程立即执行另一项任务，其开销比 ExecutorService 少得多。

在您的情况下， ForkJoinPool 的优势似乎很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:40:49.390

绝对不是 ForkJoinPool。

在 javadoc 中声明，您必须避免推送任何可能导致任何 IO 的任务，除非在某些情况下输出到异步流。

> 任务也不应该执行阻塞 IO……100 到 10000 个基本计算步骤。

因此，最好将容器并发管理或 ExecutorServices 与 Futures 一起使用。

# ruby-on-rails - Rails 从数组中设置会话变量

> ID：11326445
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:35.323
> 
> 标签：ruby-on-rails, ruby, arrays

我正在从外部来源返回一些结果，其中：

```
session[:response]['cpm_by_volxs'] == [ 0.0416, 0.0411, ..., 0.0335, 0.0333 ] 
```

然后我怎么能将第一个数字存储`0.0416`为不同的会话变量：

```
session[:somethingElse] = 0.0416 
```

以动态的方式（响应总是不同的）？

我努力了：

```
 temp = session[:response]['cpm_by_volxs']
 session[:somethingElse] = temp[temp.index(1)] 
```

**更新**

根据 Ben Taitelbaum 的建议：

```
<%= session[:Response]['cpm_by_volxs'][0] %> == [
<%= session[:Response]['cpm_by_volxs'][1] %> == 0
<%= session[:Response]['cpm_by_volxs'][2] %> == .
<%= session[:Response]['cpm_by_volxs'][3] %> == 0
<%= session[:Response]['cpm_by_volxs'][4] %> == 4
<%= session[:Response]['cpm_by_volxs'][5] %> == 1
<%= session[:Response]['cpm_by_volxs'][6] %> == 6 
```

等等。我怎样才能一次退回这个？（我无法以任何方式更改响应）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:47:44.430

您可以像使用其他语言一样在 ruby​​ 中索引数组，因此第一个数字是 just `session[:response]['cpm_by_volxs'][0]`，这与`temp[0]`您的示例相同。

# c# - HttpRequest POST method timeout when using proxy

> ID：11326446
> 
> 赞同：0
> 
> 时间：2012-07-04T09:40:37.790
> 
> 标签：c#, post, proxy, timeout, httprequest

the following is my code:

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Timeout = timeout;
request.ReadWriteTimeout = timeout;
request.Proxy = new WebProxy("http://" + proxyUsed + "/", true);
request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.63 Safari/535.7";
request.CookieContainer = new CookieContainer();
request.AllowAutoRedirect = true;

ASCIIEncoding encoding = new ASCIIEncoding();
string postData = "";

foreach (string[] p in parameter)
{
    if (postData != "")
        postData += "&";
    postData += string.Format("{0}={1}", p[0], p[1]);
}
byte[] data = encoding.GetBytes(postData);

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = data.Length;

using (Stream newStream = request.GetRequestStream())
{
    newStream.Write(data, 0, data.Length);
    newStream.Close();
}

using (WebResponse myResponse = request.GetResponse())
{
    using (StreamReader sr = new StreamReader(myResponse.GetResponseStream(), System.Text.Encoding.UTF8))
    {
        result = sr.ReadToEnd();
        httpLink = myResponse.ResponseUri.AbsoluteUri;
        sr.Close();
    }
    myResponse.Close();
} 
```

I have encountered a problem that when makeing a POST http request to a Webpage. When I use direct connection it works fine. But if I use proxy, it throw a timeout exception. However, if I set the postData to be empty, it works fine even I am using proxy. What's the most likely reason for this? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:45:40.173

没有大量信息可以继续，您是否有权访问代理服务器日志？

如果您检查返回变量，您会收到 405 错误吗？这表明代理不支持 POST 处理。

在调试方面，我要做的是将[fiddler 设置](http://fiddler2.com/fiddler2/)为您的代理（或透明地使用它）然后您可以查看进出您的盒子的流量并分析数据以查看请求/响应中是否有任何异常.

# winapi - 从倒车开始

> ID：11326447
> 
> 赞同：1
> 
> 时间：2012-07-04T09:40:38.203
> 
> 标签：winapi, reverse-engineering, decompiling

我刚开始学习逆向工程。所以我指的是逆向机密书和二进制审计程序包。除此之外，如果我想完善将程序集转换为 c/c++（反编译），任何人都可以告诉我应该阅读或参考什么，即使我只知道 C 而不是 cpp。我也想做WinAPI；除了 Forger 的 tut 之外的任何阅读材料，而且很短。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:55:45.937

关于逆向工程：我不会因为尝试这样做而气馁，但您应该考虑以下几个原因：

*   也许是非法的。大多数想要共享其源代码的程序都会公开声明这一点，因此周围有大量的开源 - GPL 程序。商业的、封闭源代码的程序通常不允许诸如反编译-反汇编或任何类型的逆向工程之类的事情。所以要小心。
*   反编译不是一个微不足道的问题，因为它似乎是。反转 Java 字节码并不难。但是，当您遇到反转 exe 时，情况就会发生变化。像[IDA pro](http://www.hex-rays.com/products/ida/index.shtml)这样的反编译器需要强大的用户体验和足够的“耐心”。也许你会成功地逆向一个简单的可执行代码，但是对于一个“更胖”的程序，你更有可能遇到麻烦。
*   您必须花费大量时间来尝试反转可执行程序。

* * *

关于 C 和 Winapi 材料：我找到了一本好书，Charles Petzold 的 Programming Windows（MS Press），还有 Jeffrey Richter 和 Christophe Nasarre 的 Windows via C-C++，以及 Johnson M 的 Windows System Programming。哈特。关于网络上的免费链接，我可以向您建议：

[维基教科书 Windows 编程](http://en.wikibooks.org/wiki/Windows_Programming)

[这个简短的 Win32 API 教程](http://zetcode.com/gui/winapi/index.html)

[Aleax.it 教程（意大利语）](http://www.aleax.it/TutWin32/tc.htm)

[当然是 MSDN 参考资料](http://msdn.microsoft.com/en-us/library/windows/desktop/)。

希望能帮助到你！

# python - Python XML parsing comparison of files

> ID：11326450
> 
> 赞同：1
> 
> 时间：2012-07-04T09:40:42.480
> 
> 标签：python, xml, xml-parsing, elementtree

I have to compare two XML files using Python. Each has a list of items and I have to output which items do not appear in both. Each item has various properties which need to agree to see if it's the same item.

Which parser would be the most suitable. It has to already be included in Python 2.7\. I looked at etree but does it enable me to do what I want easily? Or is there something else that would be more suitable. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:45:21.667

这取决于，如果您的 xml 元素有子元素，并且该子元素也需要进行比较，请使用 DOM，

您要比较的元素只有属性，使用 SAX 是最好的方法，我在这里发布了一些 SAX 代码，您可以参考：

```
import xml.sax
from xml.sax.handler import ContentHandler

class TableHandler(ContentHandler):
    def __init__(self):
        self.columns = {}

    def startElement(self, name, attrs):
        if name == 'R':
            for k, v in attrs.items():
                if not self.columns.has_key(k):
                    self.columns[k] = []
                self.columns[k].append(v)

def xml_to_table(xml_str):
    handler = TableHandler()
    xml.sax.parseString(xml_str, handler)
    return handler.columns

if __name__ == '__main__':    
    txt = """<xml>
    <R CatalogId="8"/><R CatalogId="8"/><R CatalogId="7"/>
    </xml>
    """

    columns = xml_to_table(txt)
    print columns 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:45:29.467

您可以使用[lxml](http://lxml.de/)。您可以浏览第一个文件的项目并检查它们是否在第二个文件中`xml.find(".//itemname")`

# rss - 可以有不止一个 -在 RSS 提要中添加标签？

> ID：11326454
> 
> 赞同：2
> 
> 时间：2012-07-04T09:40:50.847
> 
> 标签：rss, itunes

我想为不止一位作者的播客创建一个 RSS 提要。我要不要写

```
<item>
    ...
    <itunes:author>Person 1, Person 2</itunes:author>
    ...
</item> 
```

或者

```
<item>
    ...
    <itunes:author>Person 1</itunes:author>
    <itunes:author>Person 2</itunes:author>
    ...
</item> 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:53:10.040

如果允许多个作者姓名，它们将嵌套在一般作者父级中，就像这样（或类似的东西）：

```
<itunes:authors>
    <itunes:author>Person 1</itunes:author>
    <itunes:author>Person 2</itunes:author>
</itunes:authors> 
```

规范文档（[http://www.apple.com/itunes/podcasts/specs.html#author](http://www.apple.com/itunes/podcasts/specs.html#author)）声明了一个 itunes:author 元素，这意味着您问题中的选项 1 是要走的路：

```
<item>
    ...
    <itunes:author>Person 1, Person 2</itunes:author>
    ...
</item> 
```

您始终可以通过在线验证工具测试您的提要：http: [//feedvalidator.org/](http://feedvalidator.org/)

# windows-7 - QTP v 10.0 on windows 7 - need to solve the issue with getVisibleText

> ID：11326457
> 
> 赞同：1
> 
> 时间：2012-07-04T09:41:06.660
> 
> 标签：windows-7, windows-xp, gettext, qtp

On Windows XP getVisibleText was working fine in scripts. After migration to QTP10 and Windows 7 was done they stopped to work.

Is there a good workaround for that issue? (migration to QTP11 is not an option)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:07:04.123

由于 Windows 7 的更改，这似乎是 QTP 的一个限制。快速搜索会找到引用[KB的](http://support.openview.hp.com/selfsolve/document/KM817982)[这个线程](http://www.sqaforums.com/showflat.php?Cat=0&Number=609430&an=&page=&vc=1)。

> Windows 7 和 Windows Server 2008 R2 不支持 Windows API 测试识别机制。因此，当您安装此补丁时，选项对话框（**工具 > 选项 > 文本识别）中的****“按此顺序使用文本识别机制”**选项设置为**“仅使用 OCR”**，并且无法更改（该选项已禁用）。

 ****我相信有一个错字，它应该是*teXt recognition* 而不是*teSt recognition*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:11:25.830

我从很多天开始就面临这个问题，终于找到了一个非常好的替代方案。

使用此替代方法，您可以在不依赖 Window 版本的情况下工作。

您可以在下面的链接中看到我的完整实现

[http://qtpissues.blogspot.com/2013/03/alternative-to-getvisibletext-function.html](http://qtpissues.blogspot.com/2013/03/alternative-to-getvisibletext-function.html)****

# c++ - Why does this C++ code get SIGILL on ideone.com?

> ID：11326459
> 
> 赞同：5
> 
> 时间：2012-07-04T09:41:10.800
> 
> 标签：c++, gcc

Why does it happen? The code works and generates no warnings with GCC 4.7 on Linux and MSVC++ 2010 on Windows. Yet, on ideone.com it [crashes](http://ideone.com/kOKBm) with `SIGILL`. Is undefined behavior involved here?

```
#include <iostream>
#include <cstdarg>

using namespace std;

enum types
{
    INT,
    DOUBLE,
    CHAR,
    STRING
};

struct mt
{
    types type;

    union
    {
        int         i;
        double      d;
        char        c;
        const char *s;
    } val;

    mt(int i)
        : type(INT)
    {
        val.i = i;
    }

    mt(double d)
        : type(DOUBLE)
    {
        val.d = d;
    }

    mt(char c)
        : type(CHAR)
    {
        val.c = c;
    }

    mt(const char *s)
        : type(STRING)
    {
        val.s = s;
    }
};

void print(int n, ...)
{
    va_list ap;

    va_start(ap, n);

    for (int i = 0; i < n; i++)
    {
        mt x(va_arg(ap, mt));

        switch (x.type)
        {
        case INT:
            cout << x.val.i << endl;
            break;
        case DOUBLE:
            cout << x.val.d << endl;
            break;
        case CHAR:
            cout << x.val.c << endl;
            break;
        case STRING:
            cout << x.val.s << endl;
            break;
        }
    }

    va_end(ap);
}

int main()
{
    print(4, mt(2), mt(4.2), mt('a'), mt("Hello"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:51:52.443

GCC 4.4.6 出现错误：

```
test.cpp: In function ‘void print(int, ...)’:
test.cpp:59: warning: cannot receive objects of non-POD type ‘struct mt’ through ‘...’; call will abort at runtime
test.cpp: In function ‘int main()’:
test.cpp:83: warning: cannot pass objects of non-POD type ‘struct mt’ through ‘...’; call will abort at runtime
test.cpp:83: warning: cannot pass objects of non-POD type ‘struct mt’ through ‘...’; call will abort at runtime
test.cpp:83: warning: cannot pass objects of non-POD type ‘struct mt’ through ‘...’; call will abort at runtime
test.cpp:83: warning: cannot pass objects of non-POD type ‘struct mt’ through ‘...’; call will abort at runtime
$ g++ --version
g++ (GCC) 4.4.6 20110731 (Red Hat 4.4.6-3) 
```

您不能通过`struct`varargs 函数参数传递 s，而是传递指针：

```
void print(int n, ...)
{
    va_list ap;

    va_start(ap, n);

    for (int i = 0; i < n; i++)
    {
        mt *x(va_arg(ap, mt *));

        switch (x->type)
        {
        case INT:
            cout << x->val.i << endl;
            break;
        case DOUBLE:
            cout << x->val.d << endl;
            break;
        case CHAR:
            cout << x->val.c << endl;
            break;
        case STRING:
            cout << x->val.s << endl;
            break;
        }
    }

    va_end(ap);
}

int main()
{
    mt mt1(2);
    mt mt2(4.2);
    mt mt3('a');
    mt mt4("Hello");
    print(4, &mt1, &mt2, &mt3, &mt4);
} 
```

在我的系统上运行良好：

```
$ ./a.out
2
4.2
a
Hello 
```

# c - 使用联合位域是否有效？

> ID：11326460
> 
> 赞同：17
> 
> 时间：2012-07-04T09:41:27.587
> 
> 标签：c, structure, bit-fields, unions

我使用了具有这样结构的位字段，

```
struct
{
       unsigned int is_static: 1;
       unsigned int is_extern: 1;
       unsigned int is_auto: 1;
} flags; 
```

现在我想知道这是否可以通过联合来完成，所以我修改了代码，例如，

```
union
{
       unsigned int is_static: 1;
       unsigned int is_extern: 1;
       unsigned int is_auto: 1;
} flags; 
```

我找到了联合工作的位字段，但是正如我从输出中所理解的那样，联合中的所有这些字段都被赋予了一个位。现在我看到使用联合位字段并没有错误，但在我看来，像这样使用它在操作上是不正确的。那么答案是什么 - 将位域与联合一起使用是否有效？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-04T09:55:21.397

它是有效的，但正如你发现的那样，你在那里做的方式没有用。

您可能会这样做，这样您就可以使用标志同时重置所有位。

```
union {
    struct {
        unsigned int is_static: 1;
        unsigned int is_extern: 1;
        unsigned int is_auto: 1;
    };
    unsigned int flags;
}; 
```

或者你可以做这样的事情：

```
union {
    struct {
        unsigned int is_static: 1;
        unsigned int is_extern: 1;
        unsigned int is_auto: 1;
    };
    struct {
        unsigned int is_ready: 1;
        unsigned int is_done: 1;
        unsigned int is_waiting: 1;
    };
}; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-04T09:54:07.310

你得到一把枪和子弹。可以用它来射击自己吗？当然不是，但如果你愿意，没有人可以阻止你这样做。

我的观点是，就像枪和子弹一样，联合和位域是工具，它们有其目的、用途和“滥用”。因此，正如您在上面所写的那样，在联合中使用位域是完全有效的 C 语言，但却是一段无用的代码。union 中的所有字段都共享相同的内存，因此您提到的所有位域本质上都是相同的标志，因为它们共享相同的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-04T17:59:33.490

这是一个关于如何使用联合位域的示例。我还展示了如何安排 MSB。在图片中，它看起来像这样：

```
 MSB        LSB
 7            0
+------+-------+
| five | three |
| bits | bits  |
+------+-------+

// A struct tag definition of 
// two bit fields in an 8-bit register
struct fields_tag {
   // LSB
   unsigned int five:5;
   unsigned int three:3;
   // MSB
};

// here is a tag and typedef for less typing
// to modify the 8-bit value as a whole
// and read in parts.
typedef union some_reg_tag {
    uint8_t raw;
    struct fields_tag fields;
} some_reg_t; 
```

以下是如何在 Arduino 中使用位域

```
some_reg_t a_register;
a_register.raw = 0xC2;  // assign using raw field.

Serial.print("some reg = ");  // dump entire register
Serial.println(a_register.raw, HEX);   // dump register by field
Serial.print("some reg.three = ");
Serial.println(a_register.fields.three, HEX);
Serial.print("some reg.five = ");
Serial.println(a_register.fields.five, HEX); 
```

这是显示结果的输出

```
some reg = C2
some reg.three = 6
some reg.five = 2 
```

# apache - RewriteCond strange behavior (file exists check)

> ID：11326466
> 
> 赞同：1
> 
> 时间：2012-07-04T09:41:42.383
> 
> 标签：apache, .htaccess, mod-rewrite

I can't understand why redirect depends on RewriteRule (not on RewriteCond).

My .htaccess:

```
Options +FollowSymLinks +SymLinksIfOwnerMatch

<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ true.txt

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ false.txt
</IfModule> 
```

Root folder contains:

> true.txt (contains 'true')
> false.txt (contains 'false')
> test.txt (contains 'test')

If I try to open `test.txt` I get `true` and if I try to open `nonexist.txt` i get `true` too.

Now I change my .htaccess:

```
...
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ $1
... 
```

And now if I try to open `test.txt` I get `test` and if I try to open `nonexist.txt` i get `false`.

**UPDATE**: Thanks for answers, I understood how it works but one problem still exists. If I try to check 'if file exists' in another directory it always returns `false`.

> `/files/test.txt`
> `/script/.htaccess`
> `/script/false.txt`
> `/script/true.txt`

now my .htaccess looks like

```
RewriteCond %{REQUEST_FILENAME} .*(true|false).*$
RewriteRule .* - [S=2]

RewriteCond %{DOCUMENT_ROOT}/files/%{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ true.txt [L]

RewriteCond %{DOCUMENT_ROOT}/files/%{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ false.txt [L] 
```

I always get `false`. I also tried `RewriteCond ../files/%{REQUEST_FILENAME}` and also always get `false` result.

If I move `test.txt` in `script` folder then and change `RewriteCond %{REQUEST_FILENAME}` all works fine.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T10:40:29.663

这是因为 mod_rewrite 的工作方式：用户请求 test.txt，mod_rewrite 捕获请求并将 URI 重写为 false.txt，*然后*通过发送对 false.txt 的内部请求进行第二次传递，该请求被捕获并重写到 true.txt。然后进行第三次传递，请求被捕获并重写为 true.txt，但由于 URI 保持不变，因此不再进行传递。

这是相当违反直觉的，但这是有逻辑的。[这是文档](http://httpd.apache.org/docs/2.4/rewrite/tech.html)中的控制流程图：

![mod_rewrite的控制流程图](../Images/31e9e5ce58cef510b7ae3c64245b06db.png)

*[L] 标志通常被宣传为停止递归的灵丹妙药，但实际上它只是确保一旦请求与模式匹配，则执行停止并且在该 pass 中*不会进行进一步处理，但内部请求无论如何都会被发送出去，所以第二次通过相同的规则集。仅当通过后 URI 未更改时，执行才会停止。

**回复：更新** 您的问题是， REQUEST_FILENAME 环境变量实际上包含一个路径（默认情况下是完整的文件系统路径，但有一些曲折），所以 %{DOCUMENT_ROOT}/files/%{REQUEST_FILENAME} 最终变得很可怕.

至于解决方案……嗯，我认为这很棘手。如果 .htaccess 在根目录下，会容易得多。我现在能想到的唯一解决方案是：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} script/(.*)$
RewriteCond %{DOCUMENT_ROOT}/files/%1 -f
RewriteRule .* true.txt [L]

RewriteCond %{REQUEST_URI} !(true.txt)|(false.txt)
RewriteRule .* false.txt [L] 
```

它相当丑陋，而且不是非常可扩展或便携。在第一个条件中，我得到文件的名称，在第二个条件中，我检查它是否存在，如果存在，则为真。其他一切都是假的。再说一次，如果文件目录也在 .htaccess 的范围内，那么它就更容易和更好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:20:21.913

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_URI} !(true|false)\.txt$
RewriteRule .* true.txt [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* false.txt [L] 
```

注意第二个`RewriteCond`防止重写true.txt和false.txt文件，并`L`在规则上标记停止规则执行这些是为了防止规则循环

**更新**：

`%{REQUEST_FILENAME}`是完整路径，因此如果你将它添加到某个路径，你会得到错误（它会尝试匹配这个，本质上是：`/var/www/subfolder/var/www/filename.txt`

要匹配*另一个文件夹*中的文件，您将需要匹配与 URI 部分...

以下是您的操作方法：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_URI} ^/([^/]+)$
RewriteCond %{DOCUMENT_ROOT}/files/%1 -f
RewriteRule .* files/$0 [L] 
```

*   第一个条件检查请求是否针对根目录中的某个文件名（它检查 uri 是否以 / 开头，但不再包含斜杠
*   请注意，第一个条件将除斜线之外的所有内容都包含在括号中 - 此匹配的子模式将在稍后使用
*   第二个条件确保保存在子模式中的文件`%1`（与第一个条件匹配）存在于子文件夹`files/`中`%{DOCUMENT_ROOT}`
*   如果两个规则都匹配，则将请求重写到该文件（通过子请求 - 浏览器不会被重定向）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T13:04:12.277

而不是使用“RewriteCond %{REQUEST_FILENAME} !-f”，您可以尝试：
“RewriteCond %{THE_REQUEST} !-U”，它会检查地址是否存在。
有时文件路径和提供文件的地址不同，导致前者无法使用。

例子：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} !-U
RewriteRule ^(.*/media/.*)\.(gif|png|jpe?g)$ https://xyz.company.com$1.$2 [NC,L,R=301] 
```

# c# - how can I convert IQueryable to string?

> ID：11326468
> 
> 赞同：16
> 
> 时间：2012-07-04T09:41:47.767
> 
> 标签：c#, .net, linq, iqueryable

I do a sql query which returns a string - service name. this is the query:

```
IQueryable<string> query = from Comp in ServiceGroupdb.ServiceGroupes 
                           where (Comp.GroupID == groupID) 
                           select Comp.Name; 
```

How do i get the string out of the query?

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-04T09:43:15.603

LINQ 总是返回一个序列，因此您必须从中检索项目。如果您知道您将只有一个结果，请使用`Single()`检索该项目。

```
var item = (from Comp in ServiceGroupdb.ServiceGroupes 
            where (Comp.GroupID == groupID) 
            select Comp.Name).Single(); 
```

有四种 LINQ 方法可以从序列中检索单个项目：

*   `Single()`返回项目，如果序列中有 0 个或多个项目，则引发异常。
*   `SingleOrDefault()`返回项目或默认值 ( `null`for `string`)。如果序列中有多个项目，则抛出。
*   `First()`返回第一项。如果序列中有 0 个项目，则抛出。
*   `FirstOrDefault()`返回第一个项目，如果没有项目则返回默认值）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T09:43:38.673

要获取查询中的第一个元素，您可以使用`query.First()`，但如果没有元素，则会引发异常。相反，您可以使用`query.FirstOrDefault()`which 将为您提供第一个字符串或默认值 ( `null`)。因此，对于您的查询，这将起作用：

```
var myString = (from Comp in ServiceGroupdb.ServiceGroupes 
               where Comp.GroupID == groupID
               select Comp.Name)
               .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-04T09:44:16.300

您快到了。

做就是了

```
IQueryable<string> query = from Comp in ServiceGroupdb.ServiceGroupes where (Comp.GroupID == groupID) select Comp.Name;
// Loop over all the returned strings
foreach(var s in query)
{
    Console.WriteLine(s);
} 
```

或`query.FirstOrDefault()`如前所述使用，因为您只会得到一个结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T09:45:42.693

我发现methods'way更漂亮更清晰，所以这里是：

```
string query = ServiceGroupdb.ServiceGroupes
               .Where(Comp => Comp.GroupID == groupID)
               .Select(Comp => Comp.Name)
               .FirstOrDefault(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T09:47:18.123

就这样做；

```
var query = from Comp in ServiceGroupdb.ServiceGroupes where (Comp.GroupID == groupID) select Comp.Name; 
```

然后查询将包含您的结果。

# iphone - Custom Map View

> ID：11326471
> 
> 赞同：0
> 
> 时间：2012-07-04T09:41:53.373
> 
> 标签：iphone, map, mkmapview, mkannotationview

Here is the scenario...

I have a image of a map in jpeg format... I want to add it to my iPhone application and mark the coordinates in certain places (just like annotation in map kit ) and also when i move from one place to another place the current location should change and the new location should be marked in the image. Is that possible ? How to achieve this instead of using the mkmapview ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:53:17.853

听起来你想使用 MKOverlay。本质上，它归结为查看 WWDC 2010 中的 TileMap 示例代码。它仍然会在后台加载 Google 地图，并将您的地图放在顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:46:57.237

我发现本教程如何添加自定义谷歌地图，也许你可以使用你的图像（.jpeg）作为覆盖。 [stiern.com/tutorials/adding-custom-google-maps-to-your-website](http://stiern.com/tutorials/adding-custom-google-maps-to-your-website/)

# iphone - Viewport meta tag not working

> ID：11326472
> 
> 赞同：1
> 
> 时间：2012-07-04T09:41:53.920
> 
> 标签：iphone, html, objective-c, ios

I am testing an app on iPhone. When it's in portrait, the resize is perfect. But when switching to landscape, it's zooming.

I have put `{meta name="viewport" content="width=device-width,initial-scale=1.0"}` but it seems to be not working.

I have also tried `{meta name="viewport" content="width=device-width,initial-scale=1.0;maximum-scale=1.0"}` but of no help.

Please help me !!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:08:49.273

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0"></meta> 
```

我认为 user-scaleable=0 是关键！

# django - Is adding a robots.txt to my Django application the way to get listed by Google?

> ID：11326473
> 
> 赞同：2
> 
> 时间：2012-07-04T09:41:56.900
> 
> 标签：django, webserver, robots.txt

I have a website (Django) on a linux server, but Google isn't finding the site at all. I know that i don't have a `robots.txt` file on the server. Can someone tell me how to create one, what to write inside and where to place it? That would be a great help!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T09:46:15.533

机器人 txt 不适用于谷歌查找您的网站。我认为您必须将您的网站注册到谷歌并添加 sitemap.xml

*   网站管理员工具 - 抓取网址 -> [https://www.google.com/webmasters/tools/submit-url?continue=/addurl&pli=1](https://www.google.com/webmasters/tools/submit-url?continue=/addurl&pli=1)

也看到这个robot.txt

*   将 robots.txt 添加到 Django 项目的三种方法 | fredericiana -> [http://fredericiana.com/2010/06/09/three-ways-to-add-a-robots-txt-to-your-django-project/](http://fredericiana.com/2010/06/09/three-ways-to-add-a-robots-txt-to-your-django-project/)

**什么是robot.txt**

当搜索引擎经常访问您的网站并为您的内容编制索引时，这是非常棒的，但在某些情况下，您的在线内容的部分索引通常不是您想要的。例如，如果您有一个页面的两个版本（一个用于在浏览器中查看，一个用于打印），您宁愿将打印版本排除在爬网之外，否则您可能会面临重复内容的惩罚。此外，如果您的网站上碰巧有您不希望全世界看到的敏感数据，您也会希望搜索引擎不索引这些页面（尽管在这种情况下，不索引敏感数据的唯一可靠方法是在单独的机器上保持离线）。此外，如果您想通过从索引中排除图像、样式表和 javascript 来节省一些带宽，

告诉搜索引擎要避免网站上哪些文件和文件夹的一种方法是使用 Robots 元标记。但由于并非所有搜索引擎都读取元标签，因此机器人元标签很容易被忽视。将您的意愿告知搜索引擎的更好方法是使用 robots.txt 文件。

从什么是 Robots.txt -> [http://www.webconfs.com/what-is-robots-txt-article-12.php](http://www.webconfs.com/what-is-robots-txt-article-12.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:31:23.690

robots.txt 文件用于告诉搜索引擎哪些内容应该或不应该被索引。robots.txt 文件绝不需要被搜索引擎索引。

关于被搜索引擎索引，有很多事情需要注意。

*   不能保证你会被索引
*   索引需要时间，一个月，两个月，6个月
*   为了更快地获得索引，请尝试通过博客评论等方式分享指向您网站的链接，以增加被发现的机会。
*   [通过http://google.com/webmasters](http://google.com/webmasters)网站提交您的网站，这还将为您提供提示和技巧，以使您的网站更好以及抓取统计信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-06T06:58:35.907

robots.txt 的位置与 view.py 和此代码相同

在视野中

```
 def robots(request):      
        import os.path
        BASE = os.path.dirname(os.path.abspath(__file__))
        json_file = open(os.path.join(BASE , 'robots.txt'))    
        json_file.close() 
        return HttpResponse(json_file); 
```

在网址中

```
 (r'^robots.txt', 'aktel.views.robots'), 
```

# jquery - Uploading File in Crocodoc

> ID：11326475
> 
> 赞同：0
> 
> 时间：2012-07-04T09:42:13.523
> 
> 标签：jquery

I am trying to upload a file in Crocodoc as below

```
    $(function() {
        $("#btn").click(function(){
            $.ajax({
                type:"POST",                
url:"https://crocodoc.com/api/v2/document/upload?token=XYZ&url=http://web.crocodoc.com/files/test-simple.pdf",
                success:function(data){
                    alert("ok"+data);
                },
                error:function(data)
                {
                    alert("failed"+data.error);
                }
            })
        });
    });

```

In firebug i see a "401 UNAUTHORIZED" error.What is the problem pls help.I am passing the correct token key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:57:35.643

由于您正在发出 POST 请求，因此您需要将令牌和 url 值作为数据对象传递。

```
$(function() {
    $("#btn").click(function(){
        $.ajax({
            type: "POST",
            url: "https://crocodoc.com/api/v2/document/upload",
            data: {
                token: "XYZ",
                url: "http://web.crocodoc.com/files/test-simple.pdf"
            },
            success: function (data, textStatus, jqXHR) {
                console.log("ok", data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log("failed", jqXHR, textStatus, errorThrown);
            }
        })
    });
}); 
```

此外，使用控制台记录您的输出将为您提供比警报更有意义的调试信息。

最后，要回答您的实际问题，您不能上传这样的文件。您需要提交表单。见这里：[jQuery Ajax 文件上传](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

# c# - IIS Deploy - Attempt to load Oracle client libraries threw BadImageFormatException

> ID：11326477
> 
> 赞同：2
> 
> 时间：2012-07-04T09:42:28.063
> 
> 标签：c#, .net, iis-7

I had deployed my 2.0 application in IIS 7\. Its a 64 Bit Machine. The application developed in 32 Bit Machine. Once i browse the application i am gettting the error like

```
Attempt to load Oracle client libraries threw BadImageFormatException.  This problem will occur when running in 64 bit mode with the 32 bit Oracle client components installed. 
```

How to fix this.. I had searched google, but i dint get any solution.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:09:28.943

在 IIS 管理器中，转到应用程序池设置。然后将“允许 32 位应用程序”设置为`true`. 重新启动应用程序池或 IIS。

# c# - Logic to decrease character values

> ID：11326478
> 
> 赞同：5
> 
> 时间：2012-07-04T09:42:33.303
> 
> 标签：c#, silverlight, logic

I am working on a logic that decreases the value of an *alphanumeric* `List<char>`. For example, **A10** becomes **A9**, **BBA** becomes **BAZ**, **123** becomes **122**. And yes, if the value entered is the last one(like **A** or **0**), then I should return **-**

An additional overhead is that there is a `List<char>` variable which is maintained by the user. It has characters which are to be skipped. For example, if the list contains **A** in it, the value **GHB** should become **GGZ** and not **GHA**.

The base of this logic is a very simple usage of decreasing the `char` but with these conditions, I am finding it very difficult.

My project is in Silverlight, the language is C#. Following is my code that I have been trying to do in the 3 methods:

```
 List<char> lstGetDecrName(List<char> lstVal)//entry point of the value that returns decreased value
    {
        List<char> lstTmp = lstVal;
        subCheckEmpty(ref lstTmp);
        switch (lstTmp.Count)
        {
            case 0:
                lstTmp.Add('-');
                return lstTmp;
            case 1:
                if (lstTmp[0] == '-')
                {
                    return lstTmp;
                }
                break;
            case 2:
                if (lstTmp[1] == '0')
                {
                    if (lstTmp[0] == '1')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('9');
                        return lstTmp;
                    }
                    if (lstTmp[0] == 'A')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('-');
                        return lstTmp;
                    }
                }
                if (lstTmp[1] == 'A')
                {
                    if (lstTmp[0] == 'A')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('Z');
                        return lstTmp;
                    }
                }
                break;
        }
        return lstGetDecrValue(lstTmp,lstVal);
    }

    List<char> lstGetDecrValue(List<char> lstTmp,List<char> lstVal)
    {
        List<char> lstValue = new List<char>();
        switch (lstTmp.Last())
        {
            case 'A':
                lstValue = lstGetDecrTemp('Z', lstTmp, lstVal);
                break;
            case 'a':
                lstValue = lstGetDecrTemp('z', lstTmp, lstVal);
                break;
            case '0':
                lstValue = lstGetDecrTemp('9', lstTmp, lstVal);
                break;
            default:
                char tmp = (char)(lstTmp.Last() - 1);
                lstTmp.RemoveAt(lstTmp.Count - 1);
                lstTmp.Add(tmp);
                lstValue = lstTmp;
                break;
        }
        return lstValue;
    }

    List<char> lstGetDecrTemp(char chrTemp, List<char> lstTmp, List<char> lstVal)//shifting places eg unit to ten,etc.
    {
        if (lstTmp.Count == 1)
        {
            lstTmp.Clear();
            lstTmp.Add('-');
            return lstTmp;
        }
        lstTmp.RemoveAt(lstTmp.Count - 1);
        lstVal = lstGetDecrName(lstTmp);
        lstVal.Insert(lstVal.Count, chrTemp);
        return lstVal;
    } 
```

I seriously need help for this. Please help me out crack through this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:49:02.463

您要解决的问题实际上是如何减少字符序列的离散部分，每个部分都有自己的计数系统，其中每个部分由 Alpha 和 Numeric 之间的变化分隔。一旦你确定了这一点，剩下的问题就很容易了。

如果您在结果中得到不需要的字符，则跳过不需要的字符只是重复递减的问题。

一个困难是序列的模糊定义。例如，当你下定决心要说 A00 时该怎么办，下一步是什么？“A”或“-”。为了论证，我假设一个基于 Excel 单元名称的实际实现（即每个部分独立于其他部分运行）。

下面的代码完成了您想要的 95%，但是排除代码中有一个错误。例如“ABB”变成“AAY”。我觉得需要在更高级别应用排除项（例如重复递减直到排除列表中没有字符），但我现在没有时间完成它。此外，当它倒计时到零时，它会产生一个空白字符串，而不是你想要的“-”，但这在过程结束时添加是微不足道的。

## 第 1 部分（将问题分成多个部分）：

```
public static string DecreaseName( string name, string exclusions )
{
    if (string.IsNullOrEmpty(name))
    {
        return name;
    }

    // Split the problem into sections (reverse order)
    List<StringBuilder> sections = new List<StringBuilder>();
    StringBuilder result = new StringBuilder(name.Length);
    bool isNumeric = char.IsNumber(name[0]);
    StringBuilder sb = new StringBuilder();
    sections.Add(sb);
    foreach (char c in name)
    {
        // If we change between alpha and number, start new string.
        if (char.IsNumber(c) != isNumeric)
        {
            isNumeric = char.IsNumber(c);
            sb = new StringBuilder();
            sections.Insert(0, sb);
        }
        sb.Append(c);
    }

    // Now process each section
    bool cascadeToNext = true;
    foreach (StringBuilder section in sections)
    {
        if (cascadeToNext)
        {
            result.Insert(0, DecrementString(section, exclusions, out cascadeToNext));
        }
        else
        {
            result.Insert(0, section);
        }
    }

    return result.ToString().Replace(" ", "");
} 
```

## Part2（递减一个给定的字符串）：

```
private static string DecrementString(StringBuilder section, string exclusions, out bool cascadeToNext)
{
    bool exclusionsExist = false;
    do
    {
        exclusionsExist = false;
        cascadeToNext = true;
        // Process characters in reverse
        for (int i = section.Length - 1; i >= 0 && cascadeToNext; i--)
        {
            char c = section[i];
            switch (c)
            {
                case 'A':
                    c = (i > 0) ? 'Z' : ' ';
                    cascadeToNext = (i > 0);
                    break;
                case 'a':
                    c = (i > 0) ? 'z' : ' ';
                    cascadeToNext = (i > 0);
                    break;
                case '0':
                    c = (i > 0) ? '9' : ' ';
                    cascadeToNext = (i > 0);
                    break;
                case ' ':
                    cascadeToNext = false;
                    break;
                default:
                    c = (char)(((int)c) - 1);
                    if (i == 0 && c == '0')
                    {
                        c = ' ';
                    }
                    cascadeToNext = false;
                    break;
            }
            section[i] = c;
            if (exclusions.Contains(c.ToString()))
            {
                exclusionsExist = true;
            }
        }
    } while (exclusionsExist);
    return section.ToString();
} 
```

当然，划分可以更有效地完成，只需将开始和结束索引传递给 DecrementString，但这更容易编写和遵循，并且实际上不会慢很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:57:16.357

~~Without writing all your code for you, here's a suggestion as to how you can break this down:~~

```
char DecrementAlphaNumericChar(char input, out bool hadToWrap)
{
    if (input == 'A')
    {
        hadToWrap = true;
        return 'Z';
    }
    else if (input == '0')
    {
        hadToWrap = true;
        return '9';
    }
    else if ((input > 'A' && input <= 'Z') || (input > '0' && input <= '9'))
    {
        hadToWrap = false;
        return (char)((int)input - 1);
    }
    throw new ArgumentException(
        "Characters must be digits or capital letters",
        "input");
}

char DecrementAvoidingProhibited(
    char input, List<char> prohibited, out bool hadToWrap)
{
    var potential = DecrementAlphaNumericChar(input, out hadToWrap);
    while (prohibited.Contains(potential))
    {
        bool temp;
        potential = DecrementAlphaNumericChar(potential, out temp);
        if (potential == input)
        {
            throw new ArgumentException(
                "A whole class of characters was prohibited",
                "prohibited");
        }
        hadToWrap |= temp;
    }
    return potential;
}

string DecrementString(string input, List<char> prohibited)
{
    char[] chrs = input.ToCharArray();
    for (int i = chrs.Length - 1; i >= 0; i--)
    {
        bool wrapped;
        chrs[i] = DecrementAvoidingProhibited(
                      chrs[i], prohibited, out wrapped);
        if (!wrapped)
            return new string(chrs);
    }
    return "-";
} 
```

The only issue here is that it will reduce e.g. `A10` to `A09` not `A9`. I actually prefer this myself, but it should be simple to write a final pass that removes the extra zeroes.

For a little more performance, replace the `List<char>`s with Hashset`<char>`s, they should allow a faster `Contains` lookup.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:11:18.350

我通过其他一些解决方法找到了我自己的答案的解决方案。

调用函数：

```
 MyFunction()
    {
        //stuff I do before
        strValue = lstGetDecrName(strValue.ToList());//decrease value here
        if (strValue.Contains('-'))
        {
            strValue = "-";
        }
        //stuff I do after
    } 
```

总共有4个功能。2个主要功能和2个辅助功能。

```
 List<char> lstGetDecrName(List<char> lstVal)//entry point, returns decreased value
    {
        if (lstVal.Contains('-'))
        {
            return "-".ToList();
        }
        List<char> lstTmp = lstVal;
        subCheckEmpty(ref lstTmp);
        switch (lstTmp.Count)
        {
            case 0:
                lstTmp.Add('-');
                return lstTmp;
            case 1:
                if (lstTmp[0] == '-')
                {
                    return lstTmp;
                }
                break;
            case 2:
                if (lstTmp[1] == '0')
                {
                    if (lstTmp[0] == '1')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('9');
                        return lstTmp;
                    }
                    if (lstTmp[0] == 'A')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('-');
                        return lstTmp;
                    }
                }
                if (lstTmp[1] == 'A')
                {
                    if (lstTmp[0] == 'A')
                    {
                        lstTmp.Clear();
                        lstTmp.Add('Z');
                        return lstTmp;
                    }
                }
                break;
        }

        List<char> lstValue = new List<char>();
        switch (lstTmp.Last())
        {
            case 'A':
                lstValue = lstGetDecrTemp('Z', lstTmp, lstVal);
                break;
            case 'a':
                lstValue = lstGetDecrTemp('z', lstTmp, lstVal);
                break;
            case '0':
                lstValue = lstGetDecrTemp('9', lstTmp, lstVal);
                break;
            default:
                char tmp = (char)(lstTmp.Last() - 1);
                lstTmp.RemoveAt(lstTmp.Count - 1);
                lstTmp.Add(tmp);
                subCheckEmpty(ref lstTmp);
                lstValue = lstTmp;
                break;
        }
        lstGetDecrSkipValue(lstValue);
        return lstValue;

    }

    List<char> lstGetDecrSkipValue(List<char> lstValue)
    {
        bool blnSkip = false;
        foreach (char tmpChar in lstValue)
        {
            if (lstChars.Contains(tmpChar))
            {
                blnSkip = true;
                break;
            }
        }
        if (blnSkip)
        {
            lstValue = lstGetDecrName(lstValue);
        }
        return lstValue;
    }

    void subCheckEmpty(ref List<char> lstTmp)
    {
        bool blnFirst = true;
        int i = -1;
        foreach (char tmpChar in lstTmp)
        {
            if (char.IsDigit(tmpChar) && blnFirst)
            {
                i = tmpChar == '0' ? lstTmp.IndexOf(tmpChar) : -1;
                if (tmpChar == '0')
                {
                    i = lstTmp.IndexOf(tmpChar);
                }
                blnFirst = false;
            }
        }
        if (!blnFirst && i != -1)
        {
            lstTmp.RemoveAt(i);
            subCheckEmpty(ref lstTmp);
        }
    }

    List<char> lstGetDecrTemp(char chrTemp, List<char> lstTmp, List<char> lstVal)//shifting places eg unit to ten,etc.
    {
        if (lstTmp.Count == 1)
        {
            lstTmp.Clear();
            lstTmp.Add('-');
            return lstTmp;
        }
        lstTmp.RemoveAt(lstTmp.Count - 1);
        lstVal = lstGetDecrName(lstTmp);
        lstVal.Insert(lstVal.Count, chrTemp);
        subCheckEmpty(ref lstVal);
        return lstVal;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:45:07.330

检查它是否是数字，如果是，则对数字进行减法运算，如果是字符串，则将其更改为字符代码，然后将字符代码减 1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T06:23:47.340

昨天我一直在想这个，所以这里有一个想法。请注意，这只是伪代码，未经测试，但我认为这个想法是有效的并且应该可以工作（进行一些修改）。

要点是直接定义你的“字母表”，并指定其中哪些字符是非法的，应该跳过，然后使用这个字母表中的位置列表或数组来定义你开始的单词。

我现在不能再花时间在这上面了，但是如果你决定使用它并让它工作，请告诉我！

```
string[] alphabet = {a, b, c, d, e};
string[] illegal = {c, d};

public string ReduceString(string s){
            // Create a list of the alphabet-positions for each letter:
    int[] positionList = s.getCharsAsPosNrsInAlphabet();
    int[] reducedPositionList = ReduceChar(positionList, positionList.length);

    string result = "";
    foreach(int pos in reducedPositionList){
        result += alphabet[pos];
    }

    return result;
}

public string ReduceChar(string[] positionList, posToReduce){
    int reducedCharPosition = ReduceToNextLegalChar(positionList[posToReduce]);
    // put reduced char back in place:
    positionList[posToReduce] = reducedCharPosition; 

    if(reducedCharPosition < 0){
        if(posToReduce <= 0){
            // Reached the end, reduced everything, return empty array!:
            return new string[](); 
        }
        // move to back of alphabet again (ie, like the 9 in "11 - 2 = 09"):
        reducedCharPosition += alphabet.length;     
        // Recur and reduce next position (ie, like the 0 in "11 - 2 = 09"):
        return ReduceChar(positionList, posToReduce-1); 
    }

    return positionList;
}

public int ReduceToNextLegalChar(int pos){
    int nextPos = pos--;
    return (isLegalChar(nextPos) ? nextPos : ReduceToNextLegalChar(nextPos));
}

public boolean IsLegalChar(int pos){
        return (! illegal.contains(alphabet[pos]));
}
enter code here 
```

# c# - 突然不能用 c# 打开 microsoft.jet.4.0 的 excel 文件。我对连接字符串没有任何改变？

> ID：11326482
> 
> 赞同：0
> 
> 时间：2012-07-04T09:42:38.827
> 
> 标签：c#, excel, oledbconnection

所以我正在研究这个东西，它将一个excel指令列表转换成一个更好看的、格式化的word文档。我一直在连接到 excel 文档，然后将文件存储到数据表中以便于访问。

当我开始遇到错误时，我终于为我的 word 文档找到了正确的边框和内容： `External table is not in the expected format.`

这是完整的连接算法：

```
 public static DataTable getWorkSheet(string excelFile =
            "C:\\Users\\Mitch\\Dropbox\\Work tools\\Excel for andrew\\Air Compressor PM's.xlsx") {
            string connection = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + excelFile
                                + ";Extended Properties='Excel 8.0;HDR=YES;'";
            string sql = null;
            string worksheetName = null;
            string[] Headers = new string[4];
            DataTable schema = null;
            DataTable worksheet = null;
            DataSet workbook = new DataSet();
            //Preparing and opening connection
            OleDbConnection objconn = new OleDbConnection(connection);
            objconn.Open();
            //getting the schema data table
            schema = objconn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            worksheetName = schema.Rows[0]["Table_Name"].ToString();
            //Each worksheet will have a varying name, so the name is just called from
            //the dataTable.rows array. Can be later modified to use multiple
            //worksheets within a workbook.
            sql = "SELECT * FROM[" + worksheetName + "]";

            //data adapter
            OleDbDataAdapter objAdapter = new OleDbDataAdapter();
            //pass the sql
            objAdapter.SelectCommand = new OleDbCommand(sql, objconn);
            //populate the dataset
            objAdapter.Fill(workbook);
            //Remove spaces from the headers.
            worksheet = workbook.Tables[0];
            for (int x = 0; x < Headers.Count(); x++) {
                Headers[x] = worksheet.Columns[x].ColumnName;
                worksheet.Columns[x].ColumnName = worksheet.Columns[x].ColumnName.Replace(" ", "");
            }
            return worksheet;            
        }//end of getWorksheet 
```

编辑：我从 dropbox 以前的版本中提取了我的旧代码，这些版本确实可以正常工作，并重新下载了我知道正在工作的 excel 文档的副本.....什么给了？我的电脑有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:34:04.580

您正在连接到 2007/2010 Excel 文件（*.xlsx、*.xlsm）。您需要更新的 2010 驱动程序 (Ace)，[可以免费下载](http://www.microsoft.com/en-ie/download/details.aspx?id=13255)。正确的连接字符串可以从[http://connectionstrings.com/Excel](http://connectionstrings.com/Excel)和[http://connectionstrings.com/Excel-2007获得](http://connectionstrings.com/Excel-2007)

# jquery - 如果 DIV 加载带有重定向按钮的子页面，如何更新部分页面（DIV）？

> ID：11326485
> 
> 赞同：0
> 
> 时间：2012-07-04T09:42:42.807
> 
> 标签：jquery, html, ajax, load

我很困惑我可以将子页面嵌入到父页面的 DIV 中，但我不能限制子页面在此类 DIV 中的任何操作。如果我按下属于子页面的按钮，它会将整个页面刷新到新页面。不部分更新。

我的HTML如下：

父页面：

```
 < div id="container" >
        < /div>

        <script>
         $("#container").load("/child-page/");
        </script> 
```

子页面：

```
 < input type="button" name="Create" 
          value="Create" 
          onclick="$("#container").load("/child-page/")" /> 
```

如何只更新父页面的 DIV 而不刷新整个页面？

最好的问候，乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:48:03.277

```
<div id="container"></div>
<input type="button" name="flavor_create_btn" value="Create Flavor" />
<script>
$(document).ready(function(){
   $('input[name="flavor_create_btn"]').on('click', function(){
      $("#container").load("/child-page/");
   });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:39:35.133

您的**`parent-page.html`**页面应该是：

```
<script type="text/javascript" language="javascript">
$(document).ready(function(){
    $("#container").load("./child-page.html");
});
</script>

<marquee>Parent Page!</marquee>
<div id="container"></div> 
```

你**`child-page.html`**应该是：

```
<input type="button" name="Create" value="Create" onclick="$('#container').load('./child-page.html')" /> 
```

您也可以使用`\"`而不是`'`. 所以`onclick="$("#container").load("/child-page/")"`是不正确的！。

我用`marquee`标签告诉你整个父页面没有刷新。

# hudson - 即使在 Jenkins 上构建失败，如何运行声纳分析

> ID：11326488
> 
> 赞同：2
> 
> 时间：2012-07-04T09:42:45.007
> 
> 标签：hudson, jenkins, sonarqube, jenkins-plugins

我有一份 jenkins 工作来构建我的项目运行测试，然后使用 sonar jenkins-plugin 运行声纳。但是当测试失败时，声纳分析就跳过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T12:35:16.337

您可以将声纳分析作为构建步骤而不是构建后步骤触发。看看[这个](http://docs.sonarqube.org/display/SONAR/Triggering+SonarQube+on+Jenkins+Job)。但我的问题是，为什么要对构建失败的项目进行质量分析？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T19:13:13.327

您可以在 Jenkins 中使用灵活的发布插件。

[https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin)

作为构建后操作，使用条件操作来“始终”。无论上一步的结果是什么，都将运行该操作。选择声纳分析作为操作。

[![在此处输入图像描述](../Images/ac8afaee579bf8a1e096b8848d81846f.png)](https://i.stack.imgur.com/zxuQq.png)

# hibernate - 跨 Web 请求管理持久用户的数据

> ID：11326491
> 
> 赞同：0
> 
> 时间：2012-07-04T09:42:56.227
> 
> 标签：hibernate, persistence, jpa-2.0

我正在使用用户身份验证的 WebSocket 服务器工作。我现在真的不知道如何在请求中存储这个用户。我的 WebSocket 连接可能会保持打开数小时，有时每分钟会收到 100 个请求，有时每小时只收到 2 个请求（这是不可预测的）。用户数据可能会被另一个应用程序更改，这不是我的问题，但它可能是相关的。我正在使用spring 3和hibernate 3.6.9。

我的问题是：我应该使用特定的事务管理以及如何管理这些用户数据。

我已经测试了 2 个用例：

1.在登录时加载我的用户实体并在每个请求中合并（）它。我必须合并它，因为每次请求后事务都会关闭。合并不是一个好的解决方案，因为它不加载数据库实体，而是持久化合并的实体。因此，如果数据在其他地方更新，它将还原它们并且不加载更新的数据。

2\. 在登录时，我只存储用户 ID，并在每次请求时 find() 我的用户。为避免数据库请求泛滥，我设置了二级缓存，但根据我的 sql server 日志，休眠仍然为每个 find() 运行一个请求。

这是一些具体的代码和配置：

持久性.xml

```
<persistence-unit name="greenpacs">
<provider>org.hibernate.ejb.HibernatePersistence</provider>

<exclude-unlisted-classes>false</exclude-unlisted-classes>
<properties>
    <property name="hibernate.archive.autodetection" value="class"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
    <property name="hibernate.hbm2ddl.auto" value="update"/>
    <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider"/>

    <property name="hibernate.show_sql" value="true"/>
    <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/db"/>
    <property name="hibernate.connection.user" value="root"/>
    <property name="hibernate.connection.password" value="password"/>
    <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
</properties>
</persistence-unit> 
```

应用程序上下文.xml

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="greenpacs" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" /> 
```

用户实体

```
@Cache(usage = CacheConcurrencyStrategy.READ_ONLY)
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class User {
@Id
@Column(name = "userId", unique = true, nullable = false)
private Integer id;

private String pwd;

@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(name = "User_Role", joinColumns = { @JoinColumn(name = "user_id", referencedColumnName = "userId") }, inverseJoinColumns = { @JoinColumn(name = "role_id", referencedColumnName = "id") })
private List<Role> roles;

@OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name="id")
private Person person;

@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.user", cascade = CascadeType.ALL)
private List<Pacs> pacs;

// getter&setter 
```

WebSocket 监听器

```
@Component
public class UserManager implements WampMessageHandler {

UserService userService;
//Autowired setter

    User user;

@Override
public void onConnected(WampConnection connection) {
       //loginmethod return userId
       user = userService.find(userId);
    }

@Transactional
@Override
public boolean onMessage(String sessionId, int messageType, Object[] msg)
        throws BadMessageFormException {
    user = userService.merge(user);  
            //or  
            user = userService.find(user.getId());  
            ...
} 
```

我的 UserService 只是重定向到 EntityManager 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:07:02.797

您的第二个解决方案看起来很明显。您看到的是对数据库的查询，因为您没有将`hibernate.cache.use_second_level_cache`属性设置为`true`.

# eclipse - 如何在 Eclipse 中为插件禁用快速查看选项？

> ID：11326497
> 
> 赞同：0
> 
> 时间：2012-07-04T09:43:19.187
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我想在我的角度禁用快速视图。

[http://help.eclipse.org/galileo/topic/org.eclipse.platform.doc.user/images/Image211_fastview.png](http://help.eclipse.org/galileo/topic/org.eclipse.platform.doc.user/images/Image211_fastview.png)

我试过了

```
configurer.setShowFastViewBars(false); 
```

但徒劳无功。什么应该禁用这个栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:47:16.113

您是否将其添加到正确的位置？

我认为您需要将其添加到 ApplicationWorkbenchWindowAdvisor 类的 preWindowOpen() 方法中。

IWorkbenchWindowConfigurer 配置器 = getWindowConfigurer(); 配置器.setShowFastViewBars(false);

# asp.net-mvc - 如何用一个编辑器插入两个模型项？

> ID：11326498
> 
> 赞同：1
> 
> 时间：2012-07-04T09:43:32.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我的表中有 2 个字段：姓名、家庭。我想用一个编辑器插入这两个项目。在 asp.net 网络表单中，我们像这样插入它：

> sqlcommand1.parameters.addwithvalue("字段", txtName.text + txtFamily.text);

我在 MVC 中这样做：

> @Html.EditorFor((model => model.Name) && (model => model.Family))

现在我想知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:54:37.953

我会在您的模型中添加另一个属性*FullName*：

```
public string FullName
{
    get { return Name + " " + Family; }
    set
    {
        string[] names = value.Split(' ');
        Name = names[0];
        if (names.Length > 1) Family = string.Join(" ", names.Skip(1).ToArray());
    }
} 
```

然后你可以在视图中使用它：

```
@Html.TextBoxFor(model => model.FullName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:49:54.287

您可能已经看到了您会收到的错误消息，即“模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。”

EditorFor 的想法是获取现有值并将更改绑定回模型。因此，您尝试绑定回两个属性是没有意义的。它怎么知道如何分割文本？

如果您已创建或想要创建自己的编辑器模板，则不必拥有单独的属性或模型。您可以使用接口作为编辑器的基础。因此，如果创建一个名为 INameAndFamily 的接口，并说基于该接口的对象需要 Name 和 Family 属性，您可以定义一个需要该接口的编辑器。

如果您想更具体地了解编辑器，我可能会提供更详细的答案。

# php - 检测用户来自的页面名称

> ID：11326499
> 
> 赞同：1
> 
> 时间：2012-07-04T09:43:38.093
> 
> 标签：php, redirect, iis-7, http-referer

`404.php`如果从 IIS 设置中找不到页面，我会将页面重定向到。我的问题是我想检测他们正在寻找的 LINK。

例如：

如果有人访问[http://www.site.com/nosuchpage](http://www.site.com/nosuchpage)它将重定向到 404.php 但使用`$_SERVER["HTTP_REFERER"]`我没有得到用户来自的 url。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:48:17.343

If you are redirecting them to `404.php` via htaccess, i.e.

```
ErrorDocument 404 /404.php 
```

Then you should just be able to use `$_SERVER['REQUEST_URI']` as the URL they requested should still be the url that wasn't found.

# jquery - angularjs jsonp 在本地不起作用

> ID：11326502
> 
> 赞同：0
> 
> 时间：2012-07-04T09:43:41.407
> 
> 标签：jquery, jsonp, angularjs

我尝试了一个 Angular 演示并想玩 jsonp，但我无法让它工作，所以我将相同的代码粘贴到 jsbin 中，所以我可以问你们有什么问题。并注意它有效。

在我的开发站点上再次尝试了完全相同的代码。它不起作用。我可以在 webkit 中看到网络日志，我通过 http 代码 200 得到了一个有效的 json。但是没有执行回调。

我最终在同一个请求上尝试了 jQuery-Ajax，效果很好。为了我

```
$(document).ready(function() {
    $.getJSON('http://angularjs.org/greet.php?callback=?&name=Super%20Hero', function(data) {
        console.log(data); // Works
    });
}); 
```

这是我的代码的演示，它在本地 [http://jsbin.com/ojibel/edit#html,live](http://jsbin.com/ojibel/edit#html,live)不起作用。

**编辑：**

> 我从 .html 切换到 .php 扩展名，它开始工作了。所以它必须与apache做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:58:09.837

in JQUERY api doc its mentioned that

"However, since JSONP and cross-domain GET requests do not use XHR, in those cases the jqXHR and textStatus parameters passed to the success callback are undefined."

I modified your code at [http://jsbin.com/ojibel/3/edit](http://jsbin.com/ojibel/3/edit)

if you see i have created a function called getData and same function i am passing as call back URL and so i am able to display it in console.

The way JSONP works is it tries to add the URL as script tags and the out put of the URL is considered as script and that code executes as it is. so if you have call back xyx in output you will have something like

xyz(DATA_FROM_SERVER)

which will be same as

```
<script>xyz(DATA_FROM_SERVER)</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:19:13.673

当您说它“不起作用”时，您能否描述您正在采取的步骤以及预期与实际结果是什么？

请注意，在您的示例中，您将 $http 与 $templateCache 一起使用，并且在 html 文件的底部有`<script type="text/ng-template" id="http-hello.html">Hello, $http!</script>`，它将使用`http-hello.html`请求响应填充缓存，因此如果您获取 /http-hello.html，将会有没有向服务器发出请求，并且将使用缓存的内容调用回调。

# eclipse - osgi 框架中缺少包

> ID：11326504
> 
> 赞同：1
> 
> 时间：2012-07-04T09:43:44.800
> 
> 标签：eclipse, osgi, equinox

我正在尝试在 Eclipse IDE 中运行 Equinox 的区域有向图包。当我在 OSGi 命令提示符中使用 start 命令运行相关捆绑包时，我收到一条错误消息，提示 **无法解析捆绑包。原因：缺少约束：Import-Package: org.osgi.framework.hooks.bundle；版本=“1.0.0”**。为了找出框架中的现有版本，我尝试了命令**p org.osgi.framework.hooks.bundle**。结果显示了框架中的所有包。在该列表中**org.osgi.framework.hooks.bundle**不存在。对于少数其他捆绑包（例如 **org.osgi.framework.hooks.resolver** ），情况也是如此。有关如何解决此问题的任何帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:14:28.440

您使用的是什么版本的 Eclipse？

该`org.osgi.framework.hooks.bundle`软件包是在 OSGi 版本 4.3 中添加的，因此您需要一个支持该软件包的 Eclipse 版本，至少是 Eclipse 3.7 (Indigo)。

# cordova - phonegap 应用程序不起作用

> ID：11326505
> 
> 赞同：0
> 
> 时间：2012-07-04T09:43:49.107
> 
> 标签：cordova, geolocation

我是phonegap的新手。我正在创建一个获取设备位置的应用程序...我已经使用 samsung galaxy tab 和 htc 进行了测试，但没有做任何事情...我尝试获取设备的速度，并将其显示在屏幕中的 div。这是我的代码：

**地理位置：**

```
// Phonegap loads
    document.addEventListener("deviceready", onDeviceReady, false);
    var watchIDgeolocation = null;      
    var watchIDaccelerometer = null;    

// PhoneGap has loaded
    function onDeviceReady() {
        var options = { frequency: 1000 };  // I want obtain data each 1 s 
        watchIDgeolocation = navigator.geolocation.watchPosition(onSuccessGeolocation, onErrorGeolocation, options);
        startWatch(); 
    }

// Success
    var onSuccessGeolocation = function(position) {
        // These are functions that displays data in screen 
        cambioMarchas(position.coords.speed);       
        excesoVelocidad(position.coords.speed);     
        paradaProlongada(position.coords.speed);    
        aceleracionBrusca(position.coords.speed);   
        deceleracionBrusca(position.coords.speed);  
        accidenteDeTrafico(position.coords.speed);  

// ERROR
    function onErrorGeolocation(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    } 
```

我已经在 Chrome 的扩展 Ripple 中进行了测试，它工作正常，改变了速度的值，而且工作正常……但是对于设备，我不知道为什么不这样做。为什么可以？问候，丹尼尔

我读过可能需要在 var 选项中添加 { enableHighAccuracy: true } ......但我不明白这个......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:18:19.500

那么丹尼尔，首先我建议你试试这个常见的[PhoneGap](http://phonegap.com/)应用程序来测试设备是否准备好使用，如果是，它会通过显示警报消息提醒你，同时，如果它工作正常，那么你就有问题了使用您的代码，然后返回检查它。给你：

```
// Global variable that will tell us whether PhoneGap is ready
   var isPhoneGapReady = false;
   function init() {
// Add an event listener for deviceready
   document.addEventListener("deviceready",
   onDeviceReady, false);
// Older versions of Blackberry < 5.0 don't support
// PhoneGap's custom events, so instead we need to perform
// an interval check every 500 milliseconds to see whether
// PhoneGap is ready. Once done, the interval will be
// cleared and normal processing can begin.
   intervalID = window.setInterval(function() {
   if (PhoneGap.available) {
    onDeviceReady();
           }
       }, 500);
   }

   function onDeviceReady() {
   window.clearInterval(intervalID);
// set to true
   isPhoneGapReady = true;

   alert('The device is now ready');
   }
// Set an onload handler to call the init function
   window.onload = init; 
```

# actionscript-3 - 如何创建骨骼并将它们连接到代码中的形状（Actionscript）

> ID：11326506
> 
> 赞同：0
> 
> 时间：2012-07-04T09:43:49.533
> 
> 标签：actionscript-3, flash

```
graphics.drawCircle(20, 20, 10);
graphics.drawCircle(40, 40, 20); 
```

所以假设我已经在舞台上创建了两个圆圈，现在我想创建一个骨骼对象来将第一个圆圈连接到另一个圆圈，然后尝试在代码中移动它们，因为我已经读过骨骼只能是adobe flash 中的 BONE 工具创建的是真的吗？

你能给我一个关于如何在代码中创建骨骼对象的小例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:09:12.890

上面的代码是AS3吧？

*   在舞台上设置任何所需的对象（在您的 .fla 中）
*   右键单击并`convert to symbol..`在菜单中单击
*   从下拉框中选择类型为影片剪辑
*   然后给它一个名字（`Bone1`比如说，记住大写的 B）并选中复选框`export for Actionscript`。确保您在下面看到的名称与您在窗口顶部输入的名称相匹配。单击确定。
*   现在是 Actionscript 部分。`var`为您制作的每个 MovieClip 制作一个，如下所示：

.

```
var bone1:Bone1 = new Bone1; 
```

或者

```
 var somename:Bone1 = new Bone1; 
```

两者都是一样的，我只是用两个例子来展示可能性（第一个通常是我怎么做的）。大写和小写字母的区别很关键！

# objective-c - 总是调用当前类的方法

> ID：11326508
> 
> 赞同：3
> 
> 时间：2012-07-04T09:43:57.720
> 
> 标签：objective-c, cocoa

```
@interface A : NSObject

- (void) tmp;
- (void) foo;

@end

@implementation A

- (void) tmp {
    [self foo];
}

- (void) foo {
    NSLog(@"A");
}

@end 
```

派生类

```
@interface B : A

- (void) foo;

@end

@implementation B

- (void) foo {
    NSLog(@"B");
}

@end 
```

代码

```
B * b = [[B alloc] init];
[b tmp]; // -> writes out B 
```

有没有办法实现 A，所以在 A 类的 [self tmp] 中调用 [self foo] 会导致调用 A:foo 而不是 B:foo

**（所以调用 [b foo] == @"B" 和调用 [b tmp] == @"A" 之后的输出）**

喜欢

```
@implementation A

- (void) tmp {
    [ALWAYS_CALL_ON_A foo];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:55:52.213

You can use `super`

```
@implementation B

- (void) tmp {
     [super foo];
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:58:57.260

Use class methods

```
@interface A : NSObject {

}
- (void) tmp;
+ (void) foo;
@end

@implementation A
- (void) tmp {
    [A foo];
}

+ (void) foo {
    NSLog(@"A");
}
@end
#import "A.h"
@interface B : A {

}
+ (void) foo;
@end

@implementation B
+ (void) foo {
    NSLog(@"B");
}

@end 
```

# cucumber - 弹出框错误：无法定位元素，使用

> ID：11326511
> 
> 赞同：2
> 
> 时间：2012-07-04T09:44:14.947
> 
> 标签：cucumber, watir-webdriver, selenium-chromedriver

我在控制台中写了这段代码：`@b.text_field(:name => 'popupbox[title]').set 'Title'`

没有错误，一切正常。

我在步骤定义中写了这段代码：`@b.text_field(:name => 'popupbox[title]').set 'Title'`

发生错误：无法定位元素，使用...

我用铬。在 Firefox 中一切正常，但在 Chrome 中没有任何作用...

哪里有问题？

**宝石文件：**

```
group :test do      
  gem 'watir-webdriver'  
  gem 'chromedriver-helper'
  gem 'selenium-webdriver'    
  gem 'cucumber'    
  gem 'cucumber-rails'    
  gem 'database_cleaner'    
  gem 'factory_girl_rails'    
  gem 'rspec-rails'    
  gem 'spork'    
  gem 'watchr'    
  gem 'capybara'    
  gem 'email_spec'    
  gem 'watir-page-helper'      
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:17:17.683

如果它在 IRB 中而不是在浏览器中工作，则可能是时间问题。如果您使用的是 watir-webdriver，您可以尝试使用：

```
@b.text_field(:name => "popupbox[title]").when_present.set("Title") 
```

如果这没有帮助，错误发生时页面上是否显示文本字段？如果没有，您可能忘记了在出现文本字段之前需要在网页上执行的步骤。

由于上面的“弹出框”名称，我假设此文本字段出现在操作之后。

# c# - 正则表达式匹配 c# 中的单独整数列表

> ID：11326516
> 
> 赞同：2
> 
> 时间：2012-07-04T09:44:23.430
> 
> 标签：c#, regex

我想使用正则表达式匹配逗号分隔的整数列表。我使用了波纹管模式，但它对我不起作用。

```
if (!Regex.IsMatch(textBox_ImportRowsList.Text, @"^([0-9]+(,[0-9]+))*"))
{
        errorProvider1.SetError(label_ListRowPosttext, "Row Count invalid!");
} 
```

**有效输入：**

```
1
1,2
1,4,6,10 
```

**无效输入：**

```
1,
1.1
1,A
2,/,1
,1,3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:48:26.200

使用这个正则表达式：

```
^\d+(,\d+)*$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T09:48:08.250

**编辑**

验证逗号分隔字符串的最佳方法是

```
string someString = "1,2,3"; 

bool myResults = someString.Split(';').
       Any<string>(s => !isNumeric(s)); 
if(myResults)
  Console.Writeln("invalid number");
else
  Console.Writeln("valid number");

public bool isNumeric(string val)
{
    if(val == String.Empty)
      return false;       
    int result;
    return int.TryParse(val,out result);
} 
```

* * *

以下内容也可能对您有用。此正则表达式还将捕获一个空字符串。

```
^(\d+(,\d+)*)?$ 
```

或者

```
 ^\d+(,\d+)*$ 
```

*   以整数开头，所以 '\d+'。即 1 个或多个数字字符 ('0'-'9')
*   然后制作一组包含 ',\d+' 的括号，并在其后面加上一个星号。允许 , 和 数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:25:40.823

你把星号放错地方了。而不是这个：

```
@"^([0-9]+(,[0-9]+))*" 
```

...用这个：

```
@"^([0-9]+(,[0-9]+)*)" 
```

此外，您应该像开头一样锚定结尾，并且不需要最外层的括号：

```
@"^[0-9]+(,[0-9]+)*$" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:50:39.857

您可以使用`^\d+(,\d+)*$`，但正如@Lazarus 指出的那样，这可能是正则表达式有点矫枉过正的情况，如果您试图操纵数字，`string.Split()`您甚至可以将其与 a 一起使用。`int.tryParse`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T09:54:15.290

您可以尝试使用此代码

```
 List<string> list = new List<string>();
            list.Add("1");
            list.Add("1.1");
            list.Add("1,A");
            list.Add("2,/,1");

            foreach (var item in list)
            {
                if (!Regex.IsMatch(item, @"^([0-9](,[0-9])*)$"))
                {
                    Console.WriteLine("no match :" + item);

                }
            } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T09:58:57.830

试试这个

```
String strInput = textBox_ImportRowsList.Text;
foreach (String s in strInput.Split(new[]{',', ' '}, StringSplitOptions.RemoveEmptyEntries))
{
    if(!Regex.IsMatch(s, @"^\d+(,\d+)*$"))
    {
        errorProvider1.SetError(label_ListRowPosttext, "Row Count invalid!");    
    }
} 
```

# python - PyDev 代码分析缺失

> ID：11326522
> 
> 赞同：13
> 
> 时间：2012-07-04T09:45:02.353
> 
> 标签：python, eclipse, pydev

我在 Ubuntu 12.04 中从 APT 安装了 Eclipse 3.7.2，并在 Eclipse 中安装了 PyDev。首先，它会警告未使用的导入和未使用的狂野导入，但今天不再显示它们。但是，它可能会显示诸如缺少括号之类的错误。

我创建了一个新用户，并使用该用户安装了 PyDev，但问题仍然存在。如何启用它们以发出警告？我没有更改代码分析设置。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T13:27:54.497

列出所有可以在此处解决的操作，为其他方便起见，并关闭此问题

*   删除项目并重新创建它，这次项目目录是 PYTHONPATH

*   删除你的python解释器设置，并在eclipse中再次设置-窗口首选项-pydev-interpreter Python，刷新pydev索引

*   项目 -> 属性 -> PyDev -PYTHONPATH，全部为空。然后我“添加源文件夹”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-03T06:56:09.860

我有同样的问题。转到项目属性> pydev - PYTHONPATH，然后设置源文件夹为我完成了！

# ios - 谷歌电视开发环境

> ID：11326525
> 
> 赞同：0
> 
> 时间：2012-07-04T09:45:11.650
> 
> 标签：ios, google-tv

嗨，我是一名安卓开发人员，现在我想学习 Google TV 开发。
我想知道如何设置开发环境和模拟器来执行。

我已经有一个在 ubuntu 10.10 上使用 Eclipse 3.5 的 android 开发环境。

还有一件事是可以使用 iOS 开发 Google TV 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:36:29.277

至于主要问题，您可能希望从 Android SDK Manager 下载 Google TV Add-On。它会为您提供 GoogleTV HC3.1 的模拟器。

**有一个新的 C++ 版本的[配对协议](http://code.google.com/p/google-tv-pairing-protocol/)和[AnyMote 协议](http://code.google.com/p/anymote-protocol/)是开源的。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:26:08.370

我不太确定开发环境，但我知道围绕 google TV IOS 产品的开源版本存在问题。

例如，如果您正在考虑在 IOS 上创建一个 google TV 遥控器，那么您可能很难找到 Google Anymote 协议的开源 Objective-C 实现——由于 Apple Store 许可协议，Google 被禁止开源它。

# raphael - 如何处理 Graphiti 中的图形重叠？

> ID：11326526
> 
> 赞同：0
> 
> 时间：2012-07-04T09:45:12.837
> 
> 标签：raphael, draw2d, graphiti-js

我有一个大矩形和一个由石墨制成的小矩形，现在当我将小矩形拖到大矩形上时，我无法选择那个小矩形，而是选择了大矩形。

简而言之，小矩形在大矩形上之前没有鼠标事件。

那么，当我们将任何图 1 拖到其他图 2 上时，有什么办法，那么图 1 应该是可拖动的，而不是图 2。

我已经从大矩形（图 2）中删除了所有可选属性和可拖动属性，但它不起作用。请帮助我，因为它非常重要。提前致谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:30:33.493

目前未实施选择重叠数字。这是一个开放的问题。Graphiti 实现了一个简单的命中测试。拳头边界框击中获胜。

# c# - 尝试流式传输图像文件时出现错误 HRESULT 0x88982F72

> ID：11326528
> 
> 赞同：1
> 
> 时间：2012-07-04T09:45:26.940
> 
> 标签：c#, wpf, stream, hresult

我正在尝试使用下面的简单代码流式传输图像文件。

```
Stream stream = File.OpenRead(myFileInfo.ToString()); 
```

当我这样做时，Visual Studio 会向我发送一个异常。这个文件是一个简单的 jpeg。在调试模式下，我通过 BitmapDecoder 类看到我的文件没有帧。与其他相同扩展名的文件相比，都只有一个Frame。

我已经尝试了使用 FileStream 类的解决方案，但它不起作用:'(

我的主要代码是这样的：

```
BitmapImage myBitmapImage = new BitmapImage();
using (Stream stream = File.OpenRead(fileInfo.ToString()))
{
    myBitmapImage.BeginInit();
    myBitmapImage.StreamSource = stream;
    myBitmapImage.EndInit();
} 
```

它是用转换器编写的，自然绑定到 Image 控件。但是在下一行的 Image.Source 属性中设置之前抛出异常：

```
myBitmapImage.EndInit(); 
```

另一个细节：图像文件可以用 Photoshop、Paint.net 和其他程序打开。当这些最后保存副本时，使用相同代码打开新文件不会出现问题。

但我不能对我们的客户说一直这样做（一天大约 50 次：s）。

谢谢。

我的详细信息如下：

```
System.IO.IOException was unhandled by user code
  HResult=-2146232800
  Message=Impossible de lire à partir du flux.
  Source=PresentationCore
  StackTrace:
       à System.Windows.Media.ColorContext.GetColorContextsHelper(GetColorContextsDelegate getColorContexts)
       à System.Windows.Media.Imaging.BitmapFrameDecode.get_ColorContexts()
       à System.Windows.Media.Imaging.BitmapImage.FinalizeCreation()
       à System.Windows.Media.Imaging.BitmapImage.EndInit()
       à EDIs.Imaging.Converter.UriToBitmapSourceConverter.Convert(Object value, Type targetType, Object parameter, CultureInfo culture) dans C:\Users\Gaet\Documents\Visual Studio 2010\Projects\DotNet\MDP.EDIs\EDIs.Imaging\Converter\UriToBitmapSourceConverter.cs:ligne 40
       à System.Windows.Data.BindingExpression.TransferValue(Object newValue, Boolean isASubPropertyChange)
       à System.Windows.Data.BindingExpression.Activate(Object item)
       à System.Windows.Data.BindingExpression.AttachToContext(AttachAttempt attempt)
       à System.Windows.Data.BindingExpression.AttachOverride(DependencyObject target, DependencyProperty dp)
       à System.Windows.Data.BindingExpressionBase.OnAttach(DependencyObject d, DependencyProperty dp)
       à System.Windows.StyleHelper.GetInstanceValue(UncommonField`1 dataField, DependencyObject container, FrameworkElement feChild, FrameworkContentElement fceChild, Int32 childIndex, DependencyProperty dp, Int32 i, EffectiveValueEntry& entry)
       à System.Windows.FrameworkTemplate.ReceivePropertySet(Object targetObject, XamlMember member, Object value, DependencyObject templatedParent)
       à System.Windows.FrameworkTemplate.<>c__DisplayClass6.<LoadOptimizedTemplateContent>b__4(Object sender, XamlSetValueEventArgs setArgs)
       à System.Xaml.XamlObjectWriter.OnSetValue(Object eventSender, XamlMember member, Object value)
       à System.Xaml.XamlObjectWriter.Logic_ApplyPropertyValue(ObjectWriterContext ctx, XamlMember prop, Object value, Boolean onParent)
       à System.Xaml.XamlObjectWriter.Logic_DoAssignmentToParentProperty(ObjectWriterContext ctx)
       à System.Xaml.XamlObjectWriter.Logic_AssignProvidedValue(ObjectWriterContext ctx)
       à System.Xaml.XamlObjectWriter.WriteEndObject()
       à System.Xaml.XamlWriter.WriteNode(XamlReader reader)
       à System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlReader templateReader, XamlObjectWriter currentWriter)
  InnerException: System.Runtime.InteropServices.COMException
       HResult=-2003292302
       Message=Exception de HRESULT : 0x88982F72
       ErrorCode=-2003292302
       InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:04:58.637

查看 Scott Hanselman[处理带有错误元数据的图像 - WPF 中损坏的颜色配置文件的这篇博客文章](http://www.hanselman.com/blog/DealingWithImagesWithBadMetadataCorruptedColorProfilesInWPF.aspx)

他建议的修复在我的情况下有效。来自博客：

```
var bi = new BitmapImage();
bi.BeginInit();
    bi.CreateOptions = BitmapCreateOptions.IgnoreColorProfile;
    bi.UriSource = new Uri("http://hanselman.com/blog/images/JPGwithBadColorProfile.jpg");
bi.EndInit();

foo.Source = bi; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:45:19.890

```
 BitmapImage Art3 = new BitmapImage();
    using (FileStream stream = File.OpenRead("c:\\temp\\Album.jpg"))
    {
        Art3.BeginInit();
        Art3.StreamSource = stream;
        Art3.EndInit();
    }
    artwork.Source = Art3; 
```

“艺术品”是应该显示图像的 XAML 对象。

# jquery - jQuery 平滑滚动导航菜单栏

> ID：11326531
> 
> 赞同：0
> 
> 时间：2012-07-04T09:45:33.833
> 
> 标签：jquery, wordpress-theming, smooth-scrolling

所以我一直在尝试 RootsTheme（它使用 Bootstrap）、Wordpress（来自 Joomla！背景）和 Pagodabox；

这是它的结果： http: [//ajmalafif.com/](http://ajmalafif.com/)

但是，对于我尝试过的任何 javascript 解决方案，导航栏都有一些已知问题：

路线 #1) Chris Coyier 的平滑滚动

目前我的网站在这个网站上运行。

什么不起作用 - 对于较小的屏幕或当浏览器调整大小时，导航将笨拙地停在更高的高度（因为它设置为在 > 1200px 屏幕宽度上偏移 -90px）

什么有效 - 图像的下一个和上一个链接按钮有效（点击 mysite.com#link 在导航栏锚点和图像链接点击锚点之间没有冲突）

代码示例：http: [//jsfiddle.net/ajmalafif/LvPUC/1/](http://jsfiddle.net/ajmalafif/LvPUC/1/)

路线 #2) William Malo 的 getElementbyId

我一开始喜欢并使用了这个解决方案。

什么不起作用 - 它没有偏移解决方案，因此它直接停在 h1 标题上并阻止它的视图。- 它与 bootstrap-carousel.js 冲突，点击图像轮播后，屏幕/导航栏将移动并将图像与浏览器顶部对齐。

什么有效 - 它适用于任何浏览器大小（并在调整大小时）并相应地定位/到达。

代码示例：http: [//jsfiddle.net/ajmalafif/bReUF/](http://jsfiddle.net/ajmalafif/bReUF/)

--

看起来路线#1 是明显的赢家，但就像我网站上当前运行的一样，它几乎没有故障，尤其是在查看时，比如在 iPad 内。那么是否有任何指针/帮助我可以通过以下方式完成这项工作；

*   无论浏览器宽度如何，href 目标都会准确偏移（也许是基于 diff 浏览器宽度的 diff 偏移的解决方案）？，或者

*   使用 getElementbyId 解决方案时的一种抵消方法（参见路线#2）并使其与 bootstrap-carousel.js 兼容（因此当单击另一个图像轮播 # 锚标记时它不会自行移动）？

感谢您的关注和时间来看看这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:53:05.490

您可以计算浏览器的高度并返回该变量的滚动；

[这是演示](http://jsfiddle.net/LvPUC/6/)

```
var browH = $(window).height();
            //alert(browH);
    if ( browH < 500 ) {
      $(scrollElem).animate({scrollTop: targetOffset-80}, 800,function() { location.has = target;});
    }
    else if ( browH > 500 ) {
       $(scrollElem).animate({scrollTop: targetOffset-80}, 400,function() { location.has = target;});
    } 
```

# javascript - 匹配特定单词之前的电子邮件地址

> ID：11326534
> 
> 赞同：4
> 
> 时间：2012-07-04T09:45:43.090
> 
> 标签：javascript, regex, email-validation

我有一个正则表达式来匹配 javascript 中的电子邮件地址。让我们看一个例子：

```
var email  = "aaa@bbb.com (A,B); ccc@ddd.com (C,D); eee@fff.com (E,F);";
var emails = email.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi); 
```

这会将 var emails 中的所有电子邮件返回给我。

现在，我有一个字符串：

```
var initials = "(A,B)"; 
```

而且我想只收到首字母值之前的电子邮件；

如果 var 首字母是“(A,B)”，那么我只想获取 aaa@bbb.com 电子邮件地址。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:16:07.520

***JavaScript：***

```
var input = "aaa@bbb.com (A,B); ccc@ddd.com (C,D); eee@fff.com (E,F);";
var initials = "(A,B)";
var email = input.match(new RegExp("([a-zA-Z0-9]+(?:[-._][a-zA-Z0-9]+)*@[a-zA-Z0-9]+(?:[-.][a-zA-Z0-9]+)*)(?=\\s*" + initials.replace(/([()])/g, "\\$1") + ")"))[0];
print(email); 
```

***输出：***

```
aaa@bbb.com 
```

*[在此处](http://ideone.com/84I8O)测试此代码。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T09:52:32.137

无论您有类似“example@mail.com(A,B)”还是类似“(A,B)example@mail.com”，您所要做的就是获取唯一捕获的第一部分和最后一部分字母。所以 (A,B) 应该被自动排除，因为他捕获了正则表达式。

如果这不是问题，您可以随时获取正则表达式返回的文本并使用替换将 (A,B) 更改为空，就像这样：

```
var regexresult=str.replace("(A,B)",""); 
```

如果字符串存在，该代码将删除该字符串，否则它什么也不做。

# firefox - 带有工具栏的 Firefox 插件，从 browser.xul 访问对象

> ID：11326536
> 
> 赞同：0
> 
> 时间：2012-07-04T09:45:52.717
> 
> 标签：firefox, firefox-addon, toolbar

我正在开发一个 Firefox 插件，它主要是一个工具栏，但会有一些对话框/窗口用于偏好设置。

在`browser.xul`我声明我的全局变量中，我将在其中存储所有变量：

```
var coolAddon = {}; 
```

然后在我的工具栏中，我希望能够调用 的方法`coolAddon`，例如单击按钮。

如果我从 中打开一个对话框`browser.xul`，我可以在该对话框中`coolAddon`使用访问`window.opener.coolAddon`，效果很好。问题是这在工具栏上不起作用 - 仅在窗口/对话框上。工具栏中发生的`window.opener`是`null/undefined`.

如何从工具栏中访问`coolAddon`在 中声明的内容？`browser.xul`我不想重新声明它，因为我需要保留它的当前属性值（我意识到我的示例当前没有任何属性或方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:56:03.070

您应该可以直接从工具栏访问coolAddon。它在浏览器上下文中。

Window.opener 仅在您处于完全不同的窗口时才需要。

# android - 相对布局中的Android ScrollView问题

> ID：11326538
> 
> 赞同：1
> 
> 时间：2012-07-04T09:45:59.323
> 
> 标签：android, android-layout

在我的 android 应用程序中，我需要如下所示的布局

![在此处输入图像描述](../Images/80c4929b5a8748b4abd3261e3ee5d832.png)

内部使用相对布局作为父布局我使用4个相对布局来排列内容-标题布局1，标题布局2，内容布局（objRLScrollView - 滚动视图在此布局内）和页脚布局

我使用下面的代码来创建上面的布局

```
 public class Login1 extends Activity {

     @Override
        public void onCreate(Bundle savedInstanceState) {

          super.onCreate(savedInstanceState);

           this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
           this.requestWindowFeature(Window.FEATURE_NO_TITLE);

            RelativeLayout objRLBody=new RelativeLayout(this);
            objRLBody.setId(1001);
            RelativeLayout.LayoutParams objLLBodyParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
            objRLBody.setBackgroundColor(Color.parseColor("#d8e4f3"));
            objRLBody.setLayoutParams(objLLBodyParams); 

            /* header portion starts here*/

            RelativeLayout objRLActionBar=new RelativeLayout(this);
            objRLActionBar.setId(1002);
            RelativeLayout.LayoutParams objRLActionBarParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,50);
            objRLActionBarParams.addRule(RelativeLayout.ALIGN_PARENT_TOP); 
            objRLActionBar.setLayoutParams(objRLActionBarParams);
            objRLActionBar.setBackgroundColor(Color.parseColor("#2e4862"));

            objRLBody.addView(objRLActionBar);

            RelativeLayout objRLSelectedActionBar=new RelativeLayout(this);
            objRLSelectedActionBar.setId(1003);
            RelativeLayout.LayoutParams objRLSelectedActionBarParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
            objRLSelectedActionBarParams.addRule(RelativeLayout.BELOW,objRLActionBar.getId()); 
            objRLSelectedActionBar.setLayoutParams(objRLSelectedActionBarParams);
            objRLSelectedActionBar.setBackgroundColor(Color.WHITE);
            objRLSelectedActionBar.setGravity(Gravity.CENTER|Gravity.LEFT);

            TextView objTVSelectedAction = new TextView(this); 
            RelativeLayout.LayoutParams objTVSelectedActionParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            objTVSelectedAction.setLayoutParams(objTVSelectedActionParams);
            objTVSelectedAction.setGravity(Gravity.CENTER);
            objTVSelectedAction.setTextColor(Color.BLACK);
            objTVSelectedAction.setTextSize(TypedValue.COMPLEX_UNIT_DIP,18);
            objTVSelectedAction.setText("Scroll Test"); 
            objTVSelectedAction.setTypeface(null, Typeface.BOLD);
            objTVSelectedAction.setPadding(4, 0, 4, 0);
            objTVSelectedAction.setId(1004);
            objRLSelectedActionBar.addView(objTVSelectedAction);  

            objRLBody.addView(objRLSelectedActionBar);

            /* header portion ends here*/

            /* Relative layout which hold scroll view*/
            RelativeLayout objRLScrollView = new RelativeLayout(this); 
            objRLScrollView.setId(1005);
            objRLScrollView.setBackgroundColor(Color.parseColor("#d8e4f3"));
            objRLScrollView.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL);
            RelativeLayout.LayoutParams objRLScrollViewParams = new RelativeLayout.LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
            objRLScrollViewParams.addRule(RelativeLayout.BELOW ,objTVSelectedAction.getId());

            ScrollView  objScrollView=new ScrollView(this);
            objScrollView.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            objScrollView.setFillViewport(true);

            /* contents */

            RelativeLayout objRLContent = new RelativeLayout(this); 
            objRLContent.setId(1006);
            objRLContent.setBackgroundColor(Color.parseColor("#d8e4f3"));
            objRLContent.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL);
            RelativeLayout.LayoutParams objRLContentParams = new RelativeLayout.LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
           // objRLContentParams.addRule(RelativeLayout.BELOW ,objTVSelectedAction.getId()); 
            objRLContent.setLayoutParams(objRLContentParams);                

                  /* adding layouts containing Edittext (for testing scroll view) */

                RelativeLayout rl2= addEditText(objRLContent,null,1);
                RelativeLayout rl3= addEditText(objRLContent,rl2,2);
                RelativeLayout rl4= addEditText(objRLContent,rl3,3);
                RelativeLayout rl5= addEditText(objRLContent,rl4,4);
                RelativeLayout rl6= addEditText(objRLContent,rl5,5);
                RelativeLayout rl7= addEditText(objRLContent,rl6,6);
                RelativeLayout rl8= addEditText(objRLContent,rl7,7);
                RelativeLayout rl9= addEditText(objRLContent,rl8,8);
                RelativeLayout rl10= addEditText(objRLContent,rl9,9);
                RelativeLayout rl11= addEditText(objRLContent,rl10,10);
                RelativeLayout rl12= addEditText(objRLContent,rl11,11);
                RelativeLayout rl13= addEditText(objRLContent,rl12,12);

             objScrollView.addView(objRLContent);  // adding contents to scroll view

             objRLScrollView.addView(objScrollView);  // Adding scroll view to a relative layout

             objRLBody.addView(objRLScrollView);  // adding relative layout to body layout

             // adding footer to body

               RelativeLayout objRLFooter=new RelativeLayout(this);
               RelativeLayout.LayoutParams objRLFooterParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,25);
               objRLFooterParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,objRLBody.getId()); 
               objRLFooter.setLayoutParams(objRLFooterParams);
               objRLFooter.setBackgroundColor(Color.parseColor("#2e4862"));
               objRLFooter.setGravity(Gravity.CENTER);
               objRLBody.addView(objRLFooter); 

               this.setContentView(objRLBody); 

      }

     private RelativeLayout addEditText(RelativeLayout objRLContent,RelativeLayout layoutAbove,int i   ) {

            RelativeLayout objRLEditText = new RelativeLayout(this); 
            objRLEditText.setId(1100+i);
            RelativeLayout.LayoutParams objRLEditTextParams = new RelativeLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            if(layoutAbove!=null)
            objRLEditTextParams.addRule(RelativeLayout.BELOW,layoutAbove.getId());
            objRLEditText.setLayoutParams(objRLEditTextParams);
            objRLEditText.setPadding(8, 2, 8, 2);

             EditText objETData = new EditText(this);
             objETData.setId(1300+i);
             RelativeLayout.LayoutParams objETDataParams=new RelativeLayout.LayoutParams(200,LayoutParams.WRAP_CONTENT);
             objETData.setLayoutParams(objETDataParams);
             objETData.setPadding(8, 0, 8, 0);
             objETData.setTextSize(TypedValue.COMPLEX_UNIT_DIP,18);
             objETData.setText(""+i);
             objETData.setSingleLine(true);
             objRLEditText.addView(objETData);           

             objRLContent.addView(objRLEditText);

             return objRLEditText;

     }

} 
```

上面的代码给出了 put 如下所示

![在此处输入图像描述](../Images/cd421b589c812dbf69502ecc857f7066.png)

由于滚动视图的存在，标题布局变得不可见。我的代码有什么问题？我应该怎么做才能获得带有固定页眉和页脚的可滚动内容的布局？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:05:55.463

1- 将 ScrollView 的高度和宽度设置为 match_parent。

2- 将 Scrollview 的顶部和底部填充设置为等于顶部和底部栏的高度。

3-将顶部栏的对齐方式设置为 alignparenttop

4-将底栏的对齐方式设置为 alignparentbottom

注意：如果您想要一个良好的操作栏兼容性库，请考虑使用[ActionBarSherlock](http://actionbarsherlock.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T10:03:45.057

为您的父容器使用 LinearLayout 而不是 RelativeLayout。将 LinearLayout 的方向设置为垂直，并将 ScrollView 的 LayoutWeight 设置为 1。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T17:03:50.673

尝试followin我已经编辑了你的代码，它工作正常。

```
public class Scrolling2Activity extends Activity {
    int myid = 1000, pos=-1, etpos=-1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        RelativeLayout rlBody = new RelativeLayout(this);
        rlBody.setId(++myid);
        RelativeLayout.LayoutParams bodyParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        rlBody.setLayoutParams(bodyParams);
        rlBody.setBackgroundColor(Color.BLACK);

        //      Header-1
        RelativeLayout head1 = new RelativeLayout(this);
        head1.setId(++myid);
        RelativeLayout.LayoutParams head1Params = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, 25);
        head1Params.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        head1.setLayoutParams(head1Params);
        head1.setBackgroundColor(Color.BLUE);
        rlBody.addView(head1, ++pos);

        //      Header-2
        RelativeLayout head2 = new RelativeLayout(this);
        head2.setId(++myid);
        RelativeLayout.LayoutParams head2Params = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, 25);
        head2Params.addRule(RelativeLayout.BELOW, head1.getId());
        head2.setLayoutParams(head2Params);
        head2.setBackgroundColor(Color.CYAN);
                //      TextView  in Header-2
        TextView tv1 = new TextView(this);
        tv1.setId(++myid);
        RelativeLayout.LayoutParams tv1Params = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        tv1.setLayoutParams(tv1Params);
        tv1.setGravity(Gravity.CENTER);
        tv1.setTextColor(Color.BLACK);
        tv1.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
        tv1.setText("Scroll Test");
        tv1.setTypeface(null, Typeface.BOLD);
        tv1.setPadding(4, 0, 4, 0);
        //tv1.setBackgroundColor(Color.DKGRAY);
        head2.addView(tv1);
        rlBody.addView(head2, ++pos);

        //      RelativeLayout For ScrollView
        RelativeLayout scrollHolder = new RelativeLayout(this);
        scrollHolder.setId(++myid);
        RelativeLayout.LayoutParams scrollHolderParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        scrollHolderParams.addRule(RelativeLayout.BELOW, head2.getId());
        scrollHolder.setLayoutParams(scrollHolderParams);
        scrollHolder.setBackgroundColor(Color.DKGRAY);
        scrollHolder.setGravity(Gravity.CENTER_VERTICAL);
            //      ScrollView
        ScrollView scroll = new ScrollView(this);
        scroll.setId(++myid);
        scroll.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        scroll.setBackgroundColor(Color.GREEN);
            //      RelativeLayout
        RelativeLayout etHolder = new RelativeLayout(this);
        etHolder.setId(++myid);
        RelativeLayout.LayoutParams etHolderParams = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        etHolder.setLayoutParams(etHolderParams);
        etHolder.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
        etHolder.setPadding(0, 0, 0, 25);
            //      Creating EditTextes  and Adding to etHolder  AS you have done
        RelativeLayout rl2 = addEditText(etHolder, null, 1);
        RelativeLayout rl3 = addEditText(etHolder, rl2, 2);
        RelativeLayout rl4 = addEditText(etHolder, rl3, 3);
        RelativeLayout rl5 = addEditText(etHolder, rl4, 4);
        RelativeLayout rl6 = addEditText(etHolder, rl5, 5);
        RelativeLayout rl7 = addEditText(etHolder, rl6, 6);
        RelativeLayout rl8 = addEditText(etHolder, rl7, 7);
        RelativeLayout rl9 = addEditText(etHolder, rl8, 8);
        RelativeLayout rl10 = addEditText(etHolder, rl9, 9);
        RelativeLayout rl11 = addEditText(etHolder, rl10, 10);
        RelativeLayout rl12 = addEditText(etHolder, rl11, 11);
        RelativeLayout rl13 = addEditText(etHolder, rl12, 12);
        scroll.addView(etHolder);   //  adding RelativeLayout = etHolder  to  ScrollView = scroll
        scrollHolder.addView(scroll);   //  adding ScrollView = scroll  to  RelativeLayout = scrollHolder
        rlBody.addView(scrollHolder, ++pos);

        //      RelativeLayout  for  Footer
        RelativeLayout footer = new RelativeLayout(this);
        footer.setId(++myid);
        RelativeLayout.LayoutParams footerParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, 25);
        footerParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        footer.setLayoutParams(footerParams);
        footer.setBackgroundColor(Color.MAGENTA);
        rlBody.addView(footer, ++pos);

        setContentView(rlBody);
    }

        //      Method  as  you  have done
    private RelativeLayout addEditText(RelativeLayout objRLContent,
            RelativeLayout layoutAbove, int i) {

        RelativeLayout objRLEditText = new RelativeLayout(this);
        objRLEditText.setId(1100 + i);
        RelativeLayout.LayoutParams objRLEditTextParams = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        if (layoutAbove != null)
            objRLEditTextParams.addRule(RelativeLayout.BELOW,
                    layoutAbove.getId());
        objRLEditText.setLayoutParams(objRLEditTextParams);
        objRLEditText.setPadding(8, 2, 8, 2);

        EditText objETData = new EditText(this);
        objETData.setId(1300 + i);
        RelativeLayout.LayoutParams objETDataParams = new RelativeLayout.LayoutParams(
                200, LayoutParams.WRAP_CONTENT);
        objETData.setLayoutParams(objETDataParams);
        objETData.setPadding(8, 0, 8, 0);
        objETData.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
        objETData.setText("" + i);
        objETData.setSingleLine(true);
        objRLEditText.addView(objETData);

        objRLContent.addView(objRLEditText);

        return objRLEditText;

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T10:24:11.957

一旦尝试这个

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  //  setContentView(new BallBounce(this));        

       this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
     //  this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        RelativeLayout objRLBody=new RelativeLayout(this);
        objRLBody.setId(1001);
        RelativeLayout.LayoutParams objLLBodyParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        objRLBody.setBackgroundColor(Color.parseColor("#d8e4f3"));
        objRLBody.setLayoutParams(objLLBodyParams); 

        /* header portion starts here*/

        RelativeLayout objRLActionBar=new RelativeLayout(this);
        objRLActionBar.setId(1002);
        RelativeLayout.LayoutParams objRLActionBarParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,50);
        objRLActionBarParams.addRule(RelativeLayout.ALIGN_PARENT_TOP); 
        objRLActionBar.setLayoutParams(objRLActionBarParams);
        objRLActionBar.setBackgroundColor(Color.parseColor("#2e4862"));

        objRLBody.addView(objRLActionBar);

        RelativeLayout objRLSelectedActionBar=new RelativeLayout(this);
        objRLSelectedActionBar.setId(1003);
        RelativeLayout.LayoutParams objRLSelectedActionBarParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        objRLSelectedActionBarParams.addRule(RelativeLayout.BELOW,objRLActionBar.getId()); 
        objRLSelectedActionBar.setLayoutParams(objRLSelectedActionBarParams);
        objRLSelectedActionBar.setBackgroundColor(Color.WHITE);
        objRLSelectedActionBar.setGravity(Gravity.CENTER|Gravity.LEFT);

        TextView objTVSelectedAction = new TextView(this); 
        RelativeLayout.LayoutParams objTVSelectedActionParams=new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        objTVSelectedAction.setLayoutParams(objTVSelectedActionParams);
        objTVSelectedAction.setGravity(Gravity.CENTER);
        objTVSelectedAction.setTextColor(Color.BLACK);
        objTVSelectedAction.setTextSize(TypedValue.COMPLEX_UNIT_DIP,18);
        objTVSelectedAction.setText("Scroll Test"); 
        objTVSelectedAction.setTypeface(null, Typeface.BOLD);
        objTVSelectedAction.setPadding(4, 0, 4, 0);
        objTVSelectedAction.setId(1004);
        objRLSelectedActionBar.addView(objTVSelectedAction);  

        objRLBody.addView(objRLSelectedActionBar);

        /* header portion ends here*/

        /* Relative layout which hold scroll view*/
        RelativeLayout objRLScrollView = new RelativeLayout(this); 
        objRLScrollView.setId(1005);
        objRLScrollView.setBackgroundColor(Color.parseColor("#d8e4f3"));
        objRLScrollView.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL);
        RelativeLayout.LayoutParams objRLScrollViewParams = new RelativeLayout.LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
        objRLScrollViewParams.addRule(RelativeLayout.BELOW ,objTVSelectedAction.getId());

        ScrollView  objScrollView=new ScrollView(this);
        objScrollView.setLayoutParams(new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        objScrollView.setFillViewport(true);

        /* contents */

        RelativeLayout objRLContent = new RelativeLayout(this); 
        objRLContent.setId(1006);
        objRLContent.setBackgroundColor(Color.parseColor("#d8e4f3"));
        objRLContent.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL);
        RelativeLayout.LayoutParams objRLContentParams = new RelativeLayout.LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
       // objRLContentParams.addRule(RelativeLayout.BELOW ,objTVSelectedAction.getId()); 
        objRLContent.setLayoutParams(objRLContentParams);                

              /* adding layouts containing Edittext (for testing scroll view) */

            RelativeLayout rl2= addEditText(objRLContent,null,1);
            RelativeLayout rl3= addEditText(objRLContent,rl2,2);
            RelativeLayout rl4= addEditText(objRLContent,rl3,3);
            RelativeLayout rl5= addEditText(objRLContent,rl4,4);
            RelativeLayout rl6= addEditText(objRLContent,rl5,5);
            RelativeLayout rl7= addEditText(objRLContent,rl6,6);
            RelativeLayout rl8= addEditText(objRLContent,rl7,7);
            RelativeLayout rl9= addEditText(objRLContent,rl8,8);
            RelativeLayout rl10= addEditText(objRLContent,rl9,9);
            RelativeLayout rl11= addEditText(objRLContent,rl10,10);
            RelativeLayout rl12= addEditText(objRLContent,rl11,11);
            RelativeLayout rl13= addEditText(objRLContent,rl12,12);

         objScrollView.addView(objRLContent);  // adding contents to scroll view

         objRLScrollView.addView(objScrollView);  // Adding scroll view to a relative layout

         objRLBody.addView(objRLScrollView);  // adding relative layout to body layout

         // adding footer to body

           RelativeLayout objRLFooter=new RelativeLayout(this);
           RelativeLayout.LayoutParams objRLFooterParams=new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,25);
           objRLFooterParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,objRLBody.getId()); 
           objRLFooter.setLayoutParams(objRLFooterParams);
           objRLFooter.setBackgroundColor(Color.parseColor("#2e4862"));
           objRLFooter.setGravity(Gravity.CENTER);
           objRLBody.addView(objRLFooter); 

           this.setContentView(objRLBody); 
  }

 private RelativeLayout addEditText(RelativeLayout objRLContent,RelativeLayout layoutAbove,int i   ) {

        RelativeLayout objRLEditText = new RelativeLayout(this); 
        objRLEditText.setId(1100+i);
        RelativeLayout.LayoutParams objRLEditTextParams = new RelativeLayout.LayoutParams( LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        if(layoutAbove!=null)
        objRLEditTextParams.addRule(RelativeLayout.BELOW,layoutAbove.getId());
        objRLEditText.setLayoutParams(objRLEditTextParams);
        objRLEditText.setPadding(8, 2, 8, 2);

         EditText objETData = new EditText(this);
         objETData.setId(1300+i);
         RelativeLayout.LayoutParams objETDataParams=new RelativeLayout.LayoutParams(200,LayoutParams.WRAP_CONTENT);
         objETData.setLayoutParams(objETDataParams);
         objETData.setPadding(8, 0, 8, 0);
         objETData.setTextSize(TypedValue.COMPLEX_UNIT_DIP,18);
         objETData.setText(""+i);
         objETData.setSingleLine(true);
         objRLEditText.addView(objETData);           

         objRLContent.addView(objRLEditText);

         return objRLEditText;
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T11:52:38.960

这对我很有效....

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/light_gradient">

    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

//put your UI here

    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-04T19:07:15.347

最后我通过简单的重新排列了上面代码中给body布局添加内部布局的顺序，得到了想要的布局，顺序如下

```
objRLBody.addView(objRLScrollView);
objRLBody.addView(objRLActionBar);
objRLBody.addView(objRLSelectedActionBar);
objRLBody.addView(objRLFooter); 
```

还需要设置滚动视图填充，如果我们没有将填充设置为滚动视图（页眉布局宽度作为顶部填充和页脚作为底部），组件视图可能会被页眉或页脚布局阻塞。

# android - 如何强制生命周期从 onPause 到 onResume

> ID：11326539
> 
> 赞同：1
> 
> 时间：2012-07-04T09:46:01.383
> 
> 标签：android, onresume, android-lifecycle, onpause

我试图通过使用对话框强制我的 Android 应用程序从 onPause 方法直接转到 onResume 方法。

我在实现 OnClickListener 的 FirstActivity 类的 onClick 方法中有以下代码：

```
Dialog dialog = new Dialog(this);

dialog.setContentView(R.layout.newlayout);
dialog.setTitle("This is my custom dialog box");
dialog.setCancelable(true);
dialog.show(); 
```

我已经设置了每个生命周期方法，以便在 Android 应用程序进入每个方法时打印出一条日志消息：

```
Log.i(ActivityName, " onCreate");
Log.i(ActivityName, " onPause");
Log.i(ActivityName, " onResume"); 
```

等等..

当我单击按钮以显示对话框时，对话框显示得很好，但我没有收到任何显示对话框时调用 onPause 的日志消息，并且我没有收到任何关于 onResume 方法的日志消息按下手机上的“返回”按钮退出对话框时调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:55:39.500

A `Dialog` is always created and displayed as a part of an `Activity`(take a look at [this article](http://developer.android.com/guide/topics/ui/dialogs.html#ShowingADialog) on Dialogs). That's why your `Activity` methods `onResume` and `onPause` are not called. When a `Dialog` is displayed your `Activity` is still in running state.

# php - 用javascript显示动态时间

> ID：11326540
> 
> 赞同：0
> 
> 时间：2012-07-04T09:46:01.537
> 
> 标签：php, javascript, html

我想在 Javascript 的帮助下显示我的 php 变量中的时间

我正在编写一个在线考试模块，我想在其中显示总经过时间

例如说

`$time_elapsed`// 包含从考试开始到现在所用的时间如果我有一个 div 说，

```
<div id="time"></div> 
```

如何从`$time_elapsed`加载每个问题的窗口后开始显示动态运行时间

请问各位大佬有这个答案吗。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:00:00.800

嗨，您可以为此目的使用以下代码

javascript将是：

```
var Timer;
var TotalSeconds,TotalMins, secs;
var elapsedtime ;

function CreateTimer(TimerID, Time) {
        Timer = document.getElementById(TimerID);
        TotalSeconds = Time;
        elapsedtime = 0
        time = Time
        secs = TotalSeconds%60;
        TotalMins = Math.floor(TotalSeconds/60)
        UpdateTimer()
        window.setTimeout("Tick()", 1000);
}

function Tick() {
if(TotalSeconds-elapsedtime>0)
{
    elapsedtime += 1;
    secs = (elapsedtime%60)-60;
    TotalMins = Math.floor(elapsedtime/60)
    UpdateTimer()
    window.setTimeout("Tick()", 1000);
}
else
alert("time up")
}

function UpdateTimer() {
        Timer.innerHTML = TotalMins + ":" + secs;
} 
```

nw 创建一个要显示运行时间的 html div。

**html:**

```
<div id='timer' />
<script type="text/javascript">window.onload = CreateTimer("timer", 5);</script> 
```

给参数时间限制。它会在时间结束后发出警报。

并在刷新页面后获取时间使用 html5 的 sessionStorage

访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

因此，您可以使用 html5 存储对象在多个页面之间存储（临时）表单数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:31:49.150

这是如何显示动态时间。要使用其他基于 php 的开始时间，请将该行替换`time0 = new Date();`为`time0 =<?php echo $startTime;?>; which should be in ms since the epoch.`

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>elapsed time demo</title>
    <script type="text/javascript">
        var time0;
        function initTime() {
            time0 = new Date();
            window.setInterval("updateTime()", 1000);
        }
        function updateTime() {
            var timeNow = new Date();
            var deltas = (Number(timeNow) - Number(time0))/1000;
            var deltah = ("0"+String(Math.round(deltas / 3600))).substr(-2);
            deltah = deltah.substr(-2);
            deltas %= 3600;
            var deltam = ("0"+String(Math.round(deltas / 60))).substr(-2);
            deltas = ("0"+String(Math.round(deltas % 60))).substr(-2);
            document.getElementById("timedisplay").firstChild.data=deltah+":"+deltam+":"+deltas;
        }
    </script>
</head>
<body onload="initTime();">
    <div> elapsed time <span id="timedisplay">00:00:00</span></div>
</body>
</html>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:48:28.560

您的 php 代码应该返回加载页面时经过的时间，但是，javascript 将接管并随着时间的推移增加该时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:59:14.530

您可以将参数发送到您的 JavaScript 函数，即显示时间

```
 function display_time(int time)
      {
        //your code for further integration
      } 
```

您可以使用以下方式将参数发送到 JavaScript 函数

```
 //call the function at the time display time
       display_time(<?php echo $time_elapsed ?>) 
```

# c# - 如何在从字符串解析的 int 中捕获错误？

> ID：11326543
> 
> 赞同：1
> 
> 时间：2012-07-04T09:46:11.890
> 
> 标签：c#

我正在寻找一种可行的方法并有助于捕获错误输入。如果输入不是 1 或 2，我需要处理。喜欢 . 或 - 或任何字母。我已经尝试过捕捉，但似乎没有任何效果：/

有人有想法让我尝试吗？我很高兴有任何建议！！提前谢谢！

问候

到目前为止，我编写的代码如下所示：

```
console.WriteLine();
Console.Write("Make your choice: ");

int myinput = int.Parse(Console.ReadLine());

if (myinput == 1)
{
FirstEvent();
}
if (myinput == 2)
{
SecondEvent();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:48:42.617

通常我们使用 TryParse 方法

```
int myinput = 0;
if(false == int.TryParse(Console.ReadLine(), out myInput))
   // Error, not an integer
   Console.WriteLine("Please input 1 or 2");
else
{
    if (myinput == 1) 
    { 
        FirstEvent(); 
    } 
    else if (myinput == 2) 
    { 
        SecondEvent(); 
    } 
    else
        Console.WriteLine("Please input 1 or 2");
} 
```

# c# - 安全地抛出在另一个线程 C# 上创建的异常

> ID：11326544
> 
> 赞同：2
> 
> 时间：2012-07-04T09:46:14.650
> 
> 标签：c#, multithreading, exception, thread-safety

我想在线程 A 中捕获异常，然后将异常对象传递给线程 B，然后从线程 B 中抛出它。这样安全吗？

线程 A

```
try {
    // Code that throws exceptions
} catch (Exception e) {
    sendToOtherThread(e);
} 
```

线程 B

```
Exception e = receiveException();
throw e; 
```

**编辑**

为了清楚起见：我了解线程是如何工作的，以及我应该如何将对象引用从一个线程传递到另一个线程。问题更多的是从一个没有创建异常对象的线程抛出异常对象是否安全，或者类`Exception`本身或 .NET 处理它的方式是否存在任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:25:07.977

如果您考虑使用 .NET 4.0，则 a 引发的任何异常都会`Task`在加入时自动传播到父线程`Task`。这是设计使然，应该是完全安全的。看看这里：http: [//msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:27:42.453

您*可以*重新抛出从另一个线程接收到的异常（例如，在 BackgroundWorker 的 RunWorkerCompleted 事件处理程序中），但更常见的做法是将其包装在另一个异常中，以保留堆栈跟踪：

```
private void backgroundWorker1_RunWorkerCompleted(
    object sender, RunWorkerCompletedEventArgs e)
{
    // First, handle the case where an exception was thrown.
    if (e.Error != null)
    {
        throw new SomeException("... message ...", e.Error);
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:51:20.883

你需要改变这个：

在线程 B

```
Exception e = receiveException();
throw new Exception("Write something here, for example: 'Received from other thread'", e); // so you keep the stack trace 
```

但我会提防警告（我不完全确定这是 100% 安全的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:01:02.797

它应该是安全的，但很可能它会终止线程 B。

您的解决方案仅取决于您如何将异常对象从线程 A 传递到线程 B。如果将其放入共享资源中，则需要锁定和释放该特定共享资源。除此之外，您的代码没有任何不安全之处。

只要您不访问线程中的任何共享资源，其他一切都应该是安全的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:01:35.290

`Exception`是一个类，因此是标准引用类型，如果你想在线程之间传递它（这听起来有点奇怪），你需要确保没有其他人试图修改实例（特别是如果你创建自己的*可变*异常类型）。

**解决方案 A** 你可以做一个 Producer-Consumer pull-model

```
BlockingCollection<Exception> bc = new BlockingCollection<Exception>();

// thread A - Producer
try
{
    ...
}
catch(Exception ex)
{
    bc.Add(ex);
}

//thread B - Consumer
try
{
    // Consume bc
    while (true)
    {
        var ex = bc.Take();
        //thread sleep
    }
}
catch (InvalidOperationException)
{
    // IOE means that Take()
    // was called on a completed collection and no
    // No more exceptions, restart checking    
} 
```

**解决方案 B** 但可能更好的主意是不使用拉模型，因为在这种情况下它会浪费资源，而是使用具有线程安全的可观察集合的推模型。

# google-chrome - Windows 版 Chrome 上的 WebGL：将 float 转换为 int 时警告 X3206

> ID：11326547
> 
> 赞同：1
> 
> 时间：2012-07-04T09:46:38.370
> 
> 标签：google-chrome, webgl

我想我发现了 Windows 版本的 Chrome WebGL 实现的一个奇怪错误。将带有强制转换浮点数的着色器链接到 int 会导致“警告 X3206：向量类型的隐式截断”错误。我尝试了很多方法来避免它，但没有机会。

例如 ：

```
int i;
vec3 u = vec3(1.5, 2.5, 3.5);
float z = u.z;

i = int(u.z): // warning X3206: implicit truncation of vector type
i = int(z):  // warning X3206: implicit truncation of vector type 
```

奇怪的是，这个顶点程序在同一台电脑（同一张显卡）上的Linux版本上完美运行。是驱动问题吗？（我已经在两个具有相同结果的不同显卡的 Windows 版本上进行了测试）。其他奇怪的事情（对我来说）：X3206 是普通的 DirectX 错误（？！）与 WebGL 有什么关系？

这是我使用并导致警告的完整着色器：

```
#define MATRIX_ARRAY_SIZE 48

/* vertex attributes */
attribute vec4 p;
attribute vec3 n;
attribute vec3 u;
attribute vec3 t;
attribute vec3 b;
attribute vec4 c;
attribute vec4 i;
attribute vec4 w;

/* enable vertex weight */
uniform bool ENw;

/* enable comput tangent */
uniform bool ENt;

/* eye view matrix */
uniform mat4 MEV;

/* transform matrices */
uniform mat4 MXF[MATRIX_ARRAY_SIZE];

/* transform normal matrices */
uniform mat3 MNR[MATRIX_ARRAY_SIZE];

/* varying fragment shader */
varying vec4 Vp;
varying vec3 Vn;
varying vec2 Vu;
varying vec3 Vt;
varying vec3 Vb;
varying vec4 Vc;

void main(void) {

    /* Position et Normal transform */
    if(ENw) { /* enable vertex weight */

        Vp = vec4(0.0, 0.0, 0.0, 0.0);
        Vn = vec3(0.0, 0.0, 0.0);

        Vp += (MXF[int(i.x)] * p) * w.x;
        Vn += (MNR[int(i.x)] * n) * w.x;

        Vp += (MXF[int(i.y)] * p) * w.y;
        Vn += (MNR[int(i.y)] * n) * w.y;

        Vp += (MXF[int(i.z)] * p) * w.z;
        Vn += (MNR[int(i.z)] * n) * w.z;

        Vp += (MXF[int(i.w)] * p) * w.w;
        Vn += (MNR[int(i.w)] * n) * w.w;

    } else {

        Vp = MXF[0] * p;
        Vn = MNR[0] * n;
    }

    /* Tangent et Binormal transform */
    if(ENt) { /* enable comput tangent */

        vec3 Cz = cross(Vn, vec3(0.0, 0.0, 1.0));
        vec3 Cy = cross(Vn, vec3(0.0, 1.0, 0.0));

        if(length(Cz) > length(Cy)) {
            Vt = Cz;
        } else {
            Vt = Cy;
        }

        Vb = cross(Vn, Vt); 

    } else {

        Vt = t;
        Vb = b;
    }

    /* Texcoord et color */
    Vu = u.xy;
    Vc = c;
    gl_PointSize = u.z;
    gl_Position = MEV * Vp;
} 
```

如果有人找到了一个优雅的解决方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:57:46.913

Windows 中的 Chrome 和 Firefox 的 WebGL 是使用[ANGLE](http://code.google.com/p/angleproject/)实现的，而 ANGLE又使用 DirectX 作为底层 API。然后，在那里使用 WebGL 时出现某些 DirectX 限制/警告/错误也就不足为奇了。

而且您确实在截断浮点类型，使用`T floor(T)`or`T ceil(T)`来获得更有意义的结果并且没有警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:55:13.590

问题是你的制服用完了。

48 个 mat3s + 49 个 mat4s + 2 个布尔值 = 1218 个值 / 4 = 至少需要 306 个统一向量

在我的 GPU 上 gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS) 只返回 254。

请注意，306 个统一向量用于完美优化 GLSL 编译器。对于未优化的编译器，它可能在内部为 mat3 使用 3 个 vec4，为每个 bool 使用完整的 vec4，使其需要更统一的向量。

情况似乎是这样，因为如果我将 MATRIX_ARRAY_SIZE 降低到 35 并且它在我的机器上工作并且 36 失败。

35 个 mat3，每个使用 3 个向量 + 36 个 mat4，每个使用 4 个向量 + 2 个布尔，每个使用 1 个向量 = 需要 249 个向量。另外，36 需要 257，比我的 GPU 驱动程序支持的多 3，这就是它失败的原因。

注意 128 是需要支持的顶点统一向量的最小数量，这意味着如果你希望它在任何地方都可以工作，你需要将 MATRIX_ARRAY_SIZE 设置为 17。另一方面，我不知道你在使用什么统一片段着色器。或者，您可以查询支持的统一向量的数量并在运行时修改着色器源。

这是一个适合我的示例 [http://jsfiddle.net/greggman/474Et/2/](http://jsfiddle.net/greggman/474Et/2/)

将顶部的 35 改回 48，它将生成相同的错误消息。

错误消息很神秘，这很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:29:56.773

这应该在[ANGLE 修订版 1557](http://code.google.com/p/angleproject/source/detail?r=1557)中修复。此修复程序需要一段时间才能在主流 Chrome 中可用。

# facebook - Facebook 签到 Graph API 支持多长时间的限制参数？

> ID：11326550
> 
> 赞同：0
> 
> 时间：2012-07-04T09:46:47.410
> 
> 标签：facebook, facebook-graph-api, facebook-checkins

我正在尝试使用下面的 Facebook API 来让我的朋友在指定位置附近登记入住。

[https://graph.facebook.com/search?type=checkin¢er=xx,xx&since=XX-XX-XX](https://graph.facebook.com/search?type=checkin&center=xx,xx&since=XX-XX-XX)

这里有个问题，就是我朋友的签到能到多长时间——好像是因为参数不能支持太长的签到，比如今天是2012-07-04，我的一个朋友做了个签到-in on 2012-06-02，但即使我设置了since的参数也是这样的：since=2012-06-01，我没有任何数据，你能解释一下为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:06:49.980

此查询默认返回最近 20 次签到，最多可返回 500 次签到。

有关更多详细信息，请参阅 facebook checkins 参考：

[https://developers.facebook.com/docs/reference/fql/checkin/](https://developers.facebook.com/docs/reference/fql/checkin/)

# nhibernate - 如何在 NHibernate 中合并两个条件/QueryObjects

> ID：11326552
> 
> 赞同：0
> 
> 时间：2012-07-04T09:46:51.463
> 
> 标签：nhibernate

我有一个**分离的****QueryObject**对象，我有第二个**ICriteria**对象**标准**。

 ******```
 ICriteria criteria = session.CreateCriteria<Theme>()
            .CreateAlias("InceptionCycle", "ic", JoinType.LeftOuterJoin)
            .CreateAlias("ClosingCycle", "cc", JoinType.LeftOuterJoin)
            .Add(Restrictions.Le("ic.CycleMonth", cycleDate))
            .Add(Restrictions.Or(
                Restrictions.IsNull("cc.ID"),
                Restrictions.Ge("cc.CycleMonth", cycleDate)));

        QueryOver<Theme, Theme> detached = new GlobalTheme().GetQuery();

        // and now how to make new query : detached AND criteria 
```

是否可以在这两个条件对象之间合并/加入/添加 AND 条件？像这样的东西（当然下面的代码行不起作用，因为 Add 方法不接受**ICriteria**类型）：

```
detached.DetachedCriteria.GetExecutableCriteria(session).Add(criteria).List<Theme>(); 
```

我想实现的原因是：

*   **GlobalTheme**查询有一些条件可以与其他条件混合
*   **ICriteria 标准**有其他条件，我也可以与其他标准混合使用（我将来会将其重构为 QueryObject）

因此，为了处理**n**可能标准的所有组合，我必须至少创建 n*n **QueryObjects**。如果可以 AND 两个或多个条件，我只需要创建**n** * *QueryObject* * 类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:04:40.177

不可能“合并”条件查询，但您可以为重用做的是创建一个方法，将您想要的任何限制添加到指定的查询。

一个通用示例，使用扩展方法：

```
var results = session.CreateCriteria<AnEntity>()
                     .Add(aSpecificRestriction)
                     .AddGenericFilters()
                     .List();

public void AddGenericFilters(this ICriteria criteria)
{
    criteria.Add(whatever);
    return criteria;
} 
```******

# html - table max-height 100% 的 div 位置固定

> ID：11326553
> 
> 赞同：0
> 
> 时间：2012-07-04T09:46:51.373
> 
> 标签：html, css

我有一个 div：

```
position: fixed;
top: 100px;
bottom: 0px;
left: 0px;
right: 0px; 
```

在这个 div 里面是一个表：

```
height: 100%;
max-height: 100%; 
```

当表格单元格获取一些数据时，表格会变小，但总是不大于 div 容器。这很好用，但在 Firefox 13 中不行，表格会增长到比固定位置的容器大。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:19:51.350

你不能。桌子的尺寸是刚性的。细胞的内容永远无法突破它。这意味着，无论你喜欢与否，它都会增加宽度和/或高度，并且如果需要，它会忽略你的 CSS 规则。

解决方案？在容器上使用`overflow: auto;`or ，因此它会根据需要添加滚动条。`overflow: scroll;``div`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:15:40.527

将此行添加到您的“div css”中，它将解决您的所有问题：`overflow: auto;`

`overflow: auto;`将根据需要添加垂直或水平滚动条，同时`overflow: scroll;`添加不管和禁用（但仍然可见）未使用的滚动条。

# javascript - 从html向servlet发送数据

> ID：11326560
> 
> 赞同：1
> 
> 时间：2012-07-04T09:47:30.453
> 
> 标签：javascript, jquery, html, ajax, servlets

这是一个更多的问题，然后是一个如何的问题。当我将数据发送到 servlet 并且它们都在同一个域中时，我使用：

```
$.post('action.do', {arrayData:myArray, mode:"insert"}); 
```

或类似的东西。例如，如果我在我的设备上的一个 android 应用程序中运行 html，并且我在云中有一个服务器，我可以执行以下操作：

```
$.post('http://www.example.com/action.do', {arrayData:myArray, mode:"insert"}); 
```

example.com 是我拥有服务器的域，这可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:50:19.263

Yes, you can. You just cannot post to a server sitting on another domain, it's prevented by Ajax cross-domain policy of many browsers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:50:22.943

对的，这是可能的

```
$.ajax({
  type: "POST",
  url: "http://www.example.com/action.do",
  data: { param1: "cal1" , param2: "val2" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

**也可以看看**

*   [如何通过单击html页面中的菜单从jsp调用java方法？](https://stackoverflow.com/questions/10983961/how-to-call-a-java-method-from-jsp-by-clicking-a-menu-in-html-page)

# c++ - Qt drawPixmap 没有画出我所期望的

> ID：11326563
> 
> 赞同：2
> 
> 时间：2012-07-04T09:47:50.637
> 
> 标签：c++, qt, paint, qpixmap

我正在尝试使用 Qt 在 C++ 中创建一个 Paint 应用程序。每次我单击或单击并拖动鼠标时，程序都会在像素图上绘制一些东西。之后，它会更新调用paintEvent() 的窗口，这会将像素图绘制到窗口上。

```
void QPaintArea::mousePressEvent(QMouseEvent *event){
    startpoint = event->pos();
    drawPoint(startpoint);
    is_pressed = true;
}

void QPaintArea::mouseReleaseEvent(QMouseEvent *event){
    is_pressed = false;
}

void QPaintArea::mouseMoveEvent(QMouseEvent *event){
    if(is_pressed == true){
        endpoint = event->pos();
        drawLine(startpoint, endpoint);
        startpoint = endpoint;
    }
    else{
        return;
    }
}

void QPaintArea::paintEvent(QPaintEvent *event){
    QDesktopWidget *desktop = QApplication::desktop();
    int x = (desktop->width() - 800) / 2;
    int y = (desktop->height() - 600) / 2;
    QPainter painter(this);
    QRect target(QPoint(x, y - 35), QSize(800, 600));
    QRect dirtyrect(QPoint(0,0), QSize(800, 600));
    painter.drawPixmap(target, *pixmap, dirtyrect);
} 
```

问题是，程序没有按预期将像素图打印到窗口上。例如，我在 x: 17, y: 82 处按下鼠标试图画一些东西。该程序将打印我绘制的内容，但在偏移位置，例如 x + 20, y。

也许我不完全理解 QRect 或 drawPixmap 是如何工作的，但是 pixmap 是 800x600。“dirtyrect”应该保存整个像素图（起始 ax：0，y：0，大小为 800x600）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:29:43.877

drawPixmap(target, pixmap, source) 在像素图的源部分的画家区域（本例中为 QPaintArea）的目标矩形上绘制。因此，您在 QPaintArea 的某个 (x,y-35,800,600) 矩形上绘制整个像素图 (0,0,800,600)。如果你想在整个 QPaintArea 上绘制整个像素图，只需使用 drawPixmap(QPoint(0,0), *pixmap)。

// 编辑

但是，如果您期望，该像素图将在 QPaintArea 左上角的一些偏移处绘制，那么您的计算是错误的，如果您不解释您想要实现什么，我们将无法帮助您。向我们解释你对 x,y 的计算（y 的魔法为 -35），也许我们能弄清楚一些事情

// 编辑如果你在小部件上绘画，你不必使用像 -35 这样的窗口偏移量。小部件的 0,0 不是窗口框架的左上角，而是小部件内容的左上角。您希望它在其他平台上表现如何？

如果您想在窗口中间绘制它，只需使用：

```
void QPaintArea::paintEvent(QPaintEvent *event){
    QPoint middle = geometry.center();
    int x = middle.x() - 800/2; // probably best would be pixmap->width()/2
    int y = middle.y() - 600/2; // probably best would be pixmap->height()/2
    QPainter painter(this);
    painter.drawPixmap(QPoint(x,y), *pixmap);
} 
```

# c# - Reading specific number of lines from text file in c#

> ID：11326564
> 
> 赞同：9
> 
> 时间：2012-07-04T09:47:57.563
> 
> 标签：c#, c#-4.0

I'm using the following StreamReader to read from text file

```
string temp = fs.ReadToEnd ();
readlines[i] = temp; 
```

I want to read a specific number of lines from the text file (let we say, from line number 1 until line number 300 only), then write the lines into one element of array. Could anyone help please? thanks in advance.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T09:58:59.293

If you want to skip n first lines and read p lines from there :

```
var lines = System.IO.File.ReadLines(path).Skip(n).Take(p).ToArray() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T09:59:09.287

Tried with a simple text file.

```
var lines = File.ReadLines("yourfile").Take(300);
readlines[i] = string.Join("-", lines); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T09:49:49.433

Use the `ReadLine` method and add a `counter` and increase it by line and when you hit 300 do a `break` out of the loop

# javascript - Keeping variable value in jsp 1, after changing to jsp 2 and comming back to jsp1

> ID：11326565
> 
> 赞同：0
> 
> 时间：2012-07-04T09:47:59.997
> 
> 标签：javascript, html, jsp

I have two pages one is step1.jsp, here the user can input its Function, for example DNF and KNF. The user can select gates or multiplexer, with which the function will be simulated in step2.jsp. Now if the user clicks on "next"-button, he is forwarded to step2.jsp (using Struts2 technologie) where the function is simulated (with gates or multiplexer depending on his choice).

What I want to realize: Throw "back"-button in step2.jsp, when the user clicks on this button, he will be forwarded to step1.jsp and can select "multiplexer" or "gates" again. How to keep the functions, the user has entered in step1, sothat thy can be used again, even after changing to step2.jsp an back to step1.jsp?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:02:13.137

你可以做一些事情，比如

```
<s:url value="step1.action" var="backURL">
   <s:param name="selectedFunction" value="name_of_the_function" />   
</s:url>

<s:a href="%{backURL}">Back</s:a> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:52:57.107

使链接包含预选功能：

```
<a href="step1.action?function=the_function_you_want_to_preselect>">Back</a> 
```

# iphone - 我想在IOS中绘制一个带有可拖动角的矩形形状

> ID：11326568
> 
> 赞同：2
> 
> 时间：2012-07-04T09:48:08.373
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想在照片上覆盖一个盒子形状，并允许用户选择每个角，然后将角拖到他们想要的位置。

我可以使用 4 个不可见的按钮（代表每个角）来响应拖动事件以获取每个角的 x、y 点，但是在 xcode 中是否有一些线条绘制功能可用，而无需触及任何游戏 api 类？我想我想在 UIView 上画线。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:54:47.207

创建一个子类`UIView`来表示您的视图。`UIImageView`在您的视图中添加一个。这将保存带有用户绘图的图像。

`UIView`在子类中启用用户交互。

```
self.userInteractionEnabled = YES; 
```

通过在您的子类中实现此方法来检测开始水龙头：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // We are starting to draw
    // Get the current touch.
    UITouch *touch = [touches anyObject];    
    startingPoint = [touch locationInView:self];
} 
```

检测最后一次点击以绘制直线：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];    
    endingPoint = [touch locationInView:self];

    // Now draw the line and save to your image
    UIGraphicsBeginImageContext(self.frame.size);

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, 10);
    CGContextMoveToPoint(context, NULL, startingPoint.x, startingPoint.y);
    CGContextAddLineToPoint(context, NULL, endingPoint.x, endingPoint.y);
    CGContextSetRGBFillColor(context, 255, 255, 255, 1);
    CGContextSetRGBStrokeColor(context, 255, 255, 255, 1);
    CGContextStrokePath(context);
    self.image = UIGraphicsGetImageFromCurrentImageContext();
    CGContextRelease(context);
} 
```

# c++ - Best data structure/ container in C++ for insertion and deletion

> ID：11326571
> 
> 赞同：1
> 
> 时间：2012-07-04T09:48:17.793
> 
> 标签：c++, data-structures

I am looking for the best data structure for C++ in which insertion and deletion can take place very efficiently and fast.

Traversal should also be very easy for this data structure. Which one should i go with? What about SET in C++??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:01:28.867

链表提供[了](http://www.sgi.com/tech/stl/List.html)任意元素的有效插入和删除。这里的删除是迭代器的删除，而不是值的删除。遍历速度相当快。

出[队](http://www.sgi.com/tech/stl/Deque.html)仅在末端提供有效的插入和删除，但它们比链表更快，并且遍历也更快。

仅当您想按元素的值查找元素（例如删除它们）时，[集合](http://www.sgi.com/tech/stl/set.html)才有意义。否则检查重复的开销以及保持排序的开销将被浪费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:00:58.553

这取决于您要放入此数据结构中的内容。如果项目是无序的或者你关心它们的顺序，可以使用 list<>。如果您希望它们按排序顺序排列，则 set<> 或 multiset<> （后者允许多个相同的元素）可能是另一种选择。

list<> 通常是一个双链表，所以插入和删除可以在恒定时间内完成，只要你知道位置。遍历所有元素也很快，但访问指定元素（按值或按位置）可能会变慢。

set<> 及其家族通常是二叉树，因此插入、删除和搜索元素大多是在对数时间内（当您知道在哪里插入/删除时，它是常数时间）。遍历所有元素也很快。

（注意：boost 和 C++11 都有基于哈希表的数据结构，这也是一个选项）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:36:37.510

我会说一个链接列表，具体取决于您的删除是否是具体的和经常的。关于它的迭代器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:01:42.273

我突然想到，你需要一[棵树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)。

我不确定确切的结构（因为您没有提供详细信息），但是如果您可以将数据放入[二叉树](http://en.wikipedia.org/wiki/Binary_tree)中，则可以在搜索、删除和插入元素时达到不错的速度（平均*O(logn)*和*O(n)*最坏情况）。

请注意，我在这里谈论的是数据结构，您可以通过不同的方式实现它。

# asp.net - ASP.NET: How to make linkbutton with databinder open in new window?

> ID：11326572
> 
> 赞同：1
> 
> 时间：2012-07-04T09:48:17.937
> 
> 标签：asp.net, linkbutton

I have a pdf file I get from a DataGrid and want to open it in a new window. Here is my code:

```
<ItemTemplate><asp:LinkButton runat="server" CssClass="linkbutton1" id="TiedostoLB"  text='<%# DataBinder.Eval(Container.DataItem, "Tiedosto") %>' /></ItemTemplate> 
```

The text-partition renders in to

```
href="javascript:__doPostBack('ctl00$ContentPH$LiitetiedotDG$ctl03$TiedostoLB','')"> file.pdf</a> 
```

I tried making it a HyperLink, but NavigateUrl="<%# DataBinder.Eval(Container.DataItem, "Tiedosto") %>" renders to just the filename and not the path. How do I either fix the LinkButton to open in a new window (with some javascript:window.open() I presume) or get the HyperLink to function (which I would prefer)

# javascript - changing dynamically the "onlink" id in css

> ID：11326581
> 
> 赞同：0
> 
> 时间：2012-07-04T09:48:44.617
> 
> 标签：javascript, css, tabs

I made a navigation bar as tabs in my website, and I used the onlink identity to specify the current tab with certain characteristics. My problem is that when I change tabs, I don't know how to make the previous tab id set as none and the current one set as onlink.

Here's the navigation bar code:

```
<div id="indNavBar">
<div id="indHolder">
<ul>
<li><a onclick="DisplayDIV('IndPage');HideDIV('DoubleInd')" id="onlink">Single Indicator</a></li>
<li><a onclick="DisplayDIV('DoubleInd');HideDIV('IndPage');">Double Indicators</a></li>
</ul>
</div>
</div> 
```

There's a simple ways but it's somehow stupid, which is to make each current tab as a whole page and when I click another tab, it's just given the url of clicked tab which goes to the page with specified onlink id, but this requires reloading the whole page that's why I'm seeking a better solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:52:26.797

`this`您可以通过传入javascript方法来获取被点击的控件

```
onclick="DisplayDIV('IndPage', this);

function DisplayDIV(IndPage, sourceObj)
{
   alert(sourceObj.id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:10:50.733

You are trying to use HTML ids in the wrong way.

Ids are unique identifiers for HTML tags. They should not change at runtime.

Instead, apply CSS classes to the tab you want to be visible.

CSS

```
.hide {display:none;} 
```

Javascript

```
var indpage = document.getElementById("IndPage");
if (!indpage.classList.contains("hide")) {
    indpage.classList.add("hide");
} 
```

Then your HTML at runtime will change to

```
<div id="IndPage" class="hide">...</div> 
```

This is the standard approach.
And you can do much more with this idea.

I agree that making a tab a whole page is not a good idea. You can use javascript to apply CSS classes to hide and remove that class to show again.

Its also a good idea to learn how to separate your javascript from your HTML. Please read some more tutorials on this. One for instance: [Unobtrusive Javascript](http://labs.adobe.com/technologies/spry/articles/best_practices/separating_behavior.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:11:43.360

Here is a jquery way to do it: [http://jsfiddle.net/surendraVsingh/HyAhL/](http://jsfiddle.net/surendraVsingh/HyAhL/)

```
$('#indHolder a').click(function(){

    $(this).attr('id', 'onlink');
     $(this).parent().siblings().find('a').removeAttr('id');
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:54:32.840

Are you ok do use the jQuery Library? If so you can avoid putting inline javascript into your html and use toggleClass [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:37:46.837

我从上面的答案中得到了提示，它的工作原理如下：

```
function putOnlink(x){
document.getElementById('onlink').id = "none";
$(x).attr('id','onlink');
} 
```

标签代码是：

```
<div id="indNavBar">
<div id="indHolder">
  <ul>
    <li><a onclick="DisplayDIV('IndPage');HideDIV('DoubleInd');putOnlink(this);" id="onlink">Single Indicator</a></li>
    <li><a onclick="DisplayDIV('DoubleInd');HideDIV('IndPage');putOnlink(this);document.getElementById('onlink').id='none'">Double Indicators</a></li>
  </ul>
</div>
</div> 
```

我只是不想在第二个链接中我不得不更改第一个链接的 id 两次，因为它没有工作一次，可能是因为它的 id 设置在标签中，而不仅仅是在点击时。

# c# - 从网页开始从用户控件中获取数据

> ID：11326583
> 
> 赞同：0
> 
> 时间：2012-07-04T09:49:01.180
> 
> 标签：c#, asp.net, user-controls

我在 asp.net 中有一个简单的问题。我想知道是否可以直接从我的用户控件中的控件获取数据。我想在不使用 Session 变量、Viewstate 的情况下做到这一点......

编辑：我现在使用在 UC 中声明公共变量的方法。

这是来自我的父页面的 Page_load 的一部分：

```
 this.plan_action = (UCPlan)Page.LoadControl("~/Association/UCPlan.ascx");
 PlaceHolder1.Controls.Add(this.plan_action);

 if (this.plan_action.Validate == true)
        {
            CheckBox1.Checked = true;
            //String référence = Session["liste_action"].ToString();

            for (int i = 0; i < this.plan_action.List1.Count; i++)
            {
                Label8.Text += this.plan_action.List1[i].Référence + "/";
                //Label8.Text += "/";
            }

        } 
```

但我的变量 validate 保持为假。

这是我使用声明更改 validate 变量的值的代码：

```
 private bool validate;

    public bool Validate
    {
        get { return validate; }
        set { validate = value; }
    }

 protected void Button2_Click(object sender, EventArgs e)
      {

          //myCommand.Connection = myConnection;
          //Session["liste_action"] = this.List;
          this.Validate = true;
          //Response.Redirect("../Risques_folder/AjouterRisque.aspx");

      } 
```

感谢您的帮助，

昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:51:08.263

是的，这是可能的，但是将 UserControl 中的控件公开为**Public**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:05:36.117

**由于新信息而**更新****

 **您需要了解[ASP.NET 中的事件序列](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。

页面的发生在您的 UserControl...的处理程序`Load`之前很长时间...因此该属性始终设置为.`Click``Button2``Validate``false`

你有两个明显的选择（如我所见）......

将创建的内容保留`UserControl`在您的`Page_Load`（或者最好将其移动到您的`Page_Init`，因为这通常是最适合它的地方）。`Validate`然后将您的财产支票放入`Page_PreRender`.

或者，在单击 Button2 时`Event`在您的`UserControl`该事件中创建一个，并在 Page 中处理该事件。`Raise`

* * *

**另一个更新**

对于上述两个选项中的第二个，在您的`UserControl`班级中有以下...

```
public delegate void ButtonClickedDelegate(object sender, EventArgs e);
public event ButtonClickedDelegate ButtonClicked; 
```

在（设置**后**）调用的`Button2_Click`方法中......`UserControl`**`this.Validate = true;`**

 **```
ButtonClickedDelegate(sender, e); 
```

在 的`Page_Init`中`Page`，放置类似...

```
ctrl1.ButtonClicked += new UCPlan.ButtonClickedDelegate(ctrl1_ButtonClicked); 
```

然后有一个新方法叫做

```
void ctrl1_ButtonClicked(object sender, EventArgs e)
{
    if (ctrl1.Validate)
    {
        ...
    }
} 
```

请记住，当您控制时，`delegate`您可以传递任何您想要的信息，包括整个班级。因此，不要调用`Validate`属性，而是创建所需类的新实例，并将其作为委托参数传递。

您可以在 MSDN上找到有关[代表](http://msdn.microsoft.com/en-us/library/aa288459%28v=vs.71%29.aspx)和[事件的更多信息。](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

* * *

* * *

**原始答案**

除非我错过了什么，否则这是一个非常简单的 ASP.NET 概念......

您可以创建属性和/或方法。

例如，作为财产...

```
public string MyProperty
{
  get { return "My Property Value"; }
} 
```

或者作为一种方法

```
public string MyMethod()
{
   return "My Method Value";
} 
```

* * *

**如果您正在谈论在和包含它`UserControl`的 ASP.NET`Page`**之间传递值，那么在您的 中`Page`，您可以简单地调用属性或方法。如果您的控件被调用（例如）`myCtrl`，那么您可以像...

```
string prop = myCtrl.MyProperty;
string meth = myCtrl.MyMethod(); 
```

* * *

（在 AHMED EL-HAROUNY 的精彩评论的后面）
**如果您正在谈论将值传递给客户端页面**，那么您可以直接在 HTML 标记中使用相同的属性/方法。但是，在这种情况下，属性/方法可以声明为`protected`而不是`public`

例如，要显示值...

```
<%=MyProperty%> 
```

或者

```
<%=MyMethod()%> 
```

或者，如果您要在 javascript 中使用该值，例如...

```
var myProp = "<%=MyProperty%>"; 
```****

# android - pubnub 测试应用程序崩溃：NoClassDefFound

> ID：11326590
> 
> 赞同：0
> 
> 时间：2012-07-04T09:49:24.237
> 
> 标签：android, noclassdeffounderror, pubnub

这是我在 Pubnub 支持页面上的问题的副本：

大家好，我尝试运行可从您的 git 存储库使用 Pubnub API 下载的 PubnubTestApp。

但是当我尝试启动测试应用程序时，我首先得到一个构建路径错误，因为显然你（pubnub 家伙）已经将项目配置为查找 2 个不存在的 jar 文件。（bcprov-jdk16-145.jar 和 commons-codec-1.2.jar）。

在我删除这两个引用后，项目没有显示错误。但是当我尝试运行它时，它再次崩溃并出现以下错误：

```
"07-04 12:29:11.782: E/AndroidRuntime(754): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.fbt/com.fbt.PubNubTestActivity}: java.lang.ClassNotFoundException: com.fbt.PubNubTestActivity in loader dalvik.system.PathClassLoader[/data/app/com.fbt-1.apk" 
```

在网上查找了这次崩溃的原因后，我注意到在项目的 manifest.xml 文件中，活动名称的名称有误。（它被命名为“.PubNubTestActivity”而不是“.PubnubTestActivity”）。

更改清单后，一切正常，应用程序将安装并运行，但仍然存在一些问题。

当按下“发布”按钮或“历史”按钮时，应用程序崩溃并自动死亡。它也没有任何点击就崩溃了（就像那样）。

这是我从模拟器中得到的崩溃报告。

[http://pastie.org/private/pojnpnxmznvn9azdg7uyg](http://pastie.org/private/pojnpnxmznvn9azdg7uyg)

显然，即使我（和您）将它添加到构建路径并确保它在项目中，该项目也无法识别“pubnub.crypto”jar 文件。

请让我知道如何解决此问题，以便我可以（最后）在我的应用程序中使用 pubnub。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:38:06.880

你试过最新的版本吗？现在应该解决这个问题。

# python - 在django模板中对forloop.counter进行加法操作

> ID：11326591
> 
> 赞同：5
> 
> 时间：2012-07-04T09:49:29.327
> 
> 标签：python, django, django-templates

我想在给定条件下在 django 模板中执行减少 forloop.counter 的值，在 django 中是否可能。

下面是演示示例

```
{% for i in item %}
    {% if forloop.counter0|divisibleby:4 %}
        Start
    {% endif %}
        {% if i %}
            item{{ forloop.counter }}
        {% else %}
            ######### Here I want to reduce value of forloop.counter by 1 ###########
        {% endif %}
    {% if forloop.counter|divisibleby:4 %}
        End
    {% endif %}

{% endfor %} 
```

在上面的代码中，8 个完美的项目输出将是

```
Start
item1
item2
item3
item4
End
Start
item5
item6
item7
item8
End 
```

但假设 item2 为 None，则输出为

```
Start
item1 
item3
item4
End
Start
item5
item6
item7
item8
End 
```

如果条件不满足，我想通过每次减少 forloop 的值以正确的升序形式打印它（每一步递增 1）。请不要建议自定义模板标签，我知道，我认为这是最后的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:05:23.193

我真的怀疑 django 会让你`forloop.counter`轻易搞砸，而且无论如何也不会搞砸。显而易见的解决方案是在迭代之前过滤掉您的列表，这可以在您的视图中完成，或者（如果您坚持在模板中这样做）使用自定义过滤器。

或者您可以将列表包装在一个生成器函数中，该函数将负责过滤和编号，即：

```
def filteriternum(seq):
    num = 0
    for item in seq:
        if not item:
            continue
        num += 1
        yield num, item 
```

再次在这里，您可以在视图中进行包装，也可以编写一个自定义的标签模板过滤器来进行包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:02:40.900

也许是这样的：

```
{% for i in item %}
    {% cycle 'Start' '' '' '' %}
    {% if i %}
            item{{ forloop.counter }}
    {% else %}
            empty item{{ forloop.counter }}
    {% endif %}
    {% cycle '' '' '' 'End' %}
{% endfor %} 
```

这是输出：

```
Start
item1 
empty item2 
item3
item4
End 
Start
item5 
item6 
item7 
item8
End 
```

* * *

**更新**：我发现了一些非常有趣的东西，如何使用“本地”变量实际减少 forloop.counter：

```
{% cycle 0 -1 -2 -3 -4 -5 -6 -7 -8 -9 as dec %}

{% for i in item %}
    {% cycle 'Start' '' '' '' %}
    {% if i %}
        item{{ forloop.counter|add:dec }}
    {% else %}
        <!-- empty {% cycle dec %} here we move to the next decrementing value -->
    {% endif %}
    {% cycle '' '' '' 'End' %}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:19:22.497

改编自 Tisho 的回答：

```
{% for i in item %}
    {% if i %}
        {% cycle 'Start' '' '' '' %}
            item{% cycle 1 2 3 4 5 6 7 8 %}
        {% cycle '' '' '' 'End' %}
    {% endif %}
{% endfor %} 
```

那将输出：

```
Start
item1 
item2
item3 
item4 
End 
Start
item5
item6 
item7 
item8 
End 
```

so no holes any longer ! But this only works if you have a limited number of values, as you're obliged to write them all in the 2nd `cycle` tag used...

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-04T09:52:43.800

如果 django 模板不能实现，尝试自己写一个，检查这里[django 自定义模板标签](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)

# asp.net-mvc - Mvc 项目中的接口，在数据项目中实现 - 循环引用？

> ID：11326592
> 
> 赞同：0
> 
> 时间：2012-07-04T09:49:36.000
> 
> 标签：asp.net-mvc

我正在开发一个 mvc 应用程序只是为了练习一些最佳实践（尝试以“正确”的方式做所有事情）。更准确地说，我想为聊天服务构建一个带有一些 ajax 端点的 MVC 应用程序。

我想让那个更灵活一点，所以我想用它`interfaces`来定义使用对象的结构。然后，这些接口应由 DataLayer 项目实现。

现在我想在 Mvc-Project 中定义这些接口，并将数据层的东西放在一个单独的项目中。不过，这会导致循环引用，我认为这是不好的做法。

解决此问题的“正确”方法是什么？我的做法合理吗？

一些代码来显示我想要归档的内容：

Mvc 项目：

```
public interface IChatUser
{
    Guid    UserID  { get; }
    string  Name    { get; }
} 
```

数据层项目（类的一部分）：

```
public class User : IChatUser
{
    private Guid _userID;
    public  Guid UserID
    {
        get
        {
            return _userID;
        }
    }
    public string Name
    {
        get
        {
            return this.LastName + " ," + this.FirstName;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:55:57.660

您是否有理由不只是使用 NHibernate？如果您是，那么您的控制器只能访问 Session 对象以执行您要运行的任何基本查询。

复杂的东西被分解成单独的查询或命令对象。

我们使用此处讨论的内容构建了一个完整的 MVC 应用程序：http: [//ayende.com/blog/154081/limit-your-abstractions-you-only-get-six-to-a-dozen-in-the-entire-应用程序](http://ayende.com/blog/154081/limit-your-abstractions-you-only-get-six-to-a-dozen-in-the-entire-app)并对结果非常满意。

# spring - Spring JDBC connection without dataSource

> ID：11326593
> 
> 赞同：2
> 
> 时间：2012-07-04T09:49:40.653
> 
> 标签：spring, jdbctemplate, spring-jdbc

I had read several articles on obtaining Connection using Spring DataSource.

But in our Company Setup, connection object is obtained through already configured environment. Following the sample code:

```
 String pool = PropertyFileReader.getPropertyValue("database.properties", "development.connectionPool");

    Connection connection = RequestUtils.getConnection(pool); 
```

Hence, After reading this [tutorial](http://www.youtube.com/watch?v=0LYqy0wvS20&feature=relmfu)

I am confused on using JDBCTemplate using connection object from above code.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:59:59.663

我相信 JdbcTemplate 的设计目的不是像您所期望的那样针对 Connection 工作。作为一种解决方法，如果您可以为您创建的每个连接创建单独的 JdbcTemplate，您可以将连接包装在 DataSource 的薄包装器中，并将其提供给 JdbcTemplate。

我认为它应该可以工作，但我还没有尝试过......

```
class SingleConnectionDataSource implements DataSource {
    private Connection connection;
    public SingleConnectionDataSource(Connection connection) {
        this.connection = connection;
    }

    public Connection getConnection() {
         return this.connection;
    }
    public Connection getConnection(String username, String password) {
         return this.connection;
    }
}

// at the place you want to use JdbcTemplate
Connection conn = blablabla;  // your own way to get it
JdbcTemplate jdbcTemplate = new JdbcTemplate(new SingleConnectionDataSource(conn)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-17T13:11:46.867

实际上，Spring 已经提供了 SingleConnectionDataSource 实现（在 4.1.7 版本中已经看到）。

它甚至允许您通过模板抑制连接关闭。

# excel - 带有 sumproduct 和 styear 的 Excel 公式

> ID：11326594
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:49:43.207
> 
> 标签：excel

我试图弄清楚这个公式的作用，我已经阅读了 sumproduct 的作用，但 styear、stmonth 等是做什么的？

```
=SUMPRODUCT(--(styear=Data!AA$14),--(stmonth=Data!AA$12),--(starea='MTD Sales - Sales Teams'!C9),sthl)+SUMPRODUCT(--(stdyear2=Data!AA$14),--(stdmonth2=Data!AA$12),--(stdarea=C9),stdhl) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:08:29.573

styear、stmonth 等不是**函数**，它们可能是引用（通常是列）数据的**命名范围**

在 Excel 2007 或更高版本中，转到“公式”选项卡，然后单击“名称管理器” - 这将列出任何命名范围及其引用的数据。

该公式将 2 个 SUMPRODUCT 函数加在一起，每个函数根据满足指定条件的 3 个范围对一系列数据求和，如果您确实有 Excel 2007，使用 SUMIFS 可能会更有效

# url-shortener - How do URL shorteners guarantee unique URLs when they don't expire?

> ID：11326598
> 
> 赞同：18
> 
> 时间：2012-07-04T09:49:55.620
> 
> 标签：url-shortener

There are a lot of questions here on stackoverflow regarding URL shorteners as well as elsewhere on the internet, e.g.

[How to code a URL shortener?](https://stackoverflow.com/questions/742013/how-to-code-a-url-shortener)

[How do URL shortener calculate the URL key? How do they work?](https://stackoverflow.com/questions/3489377/how-do-url-shortener-calculate-the-url-key-how-do-they-work?lq=1)

[http://www.codinghorror.com/blog/2007/08/url-shortening-hashes-in-practice.html](http://www.codinghorror.com/blog/2007/08/url-shortening-hashes-in-practice.html)

However, there is one thing I don't understand. For instance, [http://goo.gl](http://goo.gl) uses four characters at the moment. However, they claim their short URLs don't expire. As mentioned in the article on coding horror, if they can't recycle URLs, the only possible solution is at one point to add an additional character.

Ok, so far so good. With 4 characters that means about 15 million unique addresses. For something like Google Maps, I don't think that is very much and if you can't recycle, my guess is they run out of available addresses fairly quickly.

Now for the part I don't get. While handing out addresses, they start to run out of unused addresses. They have to check if a newly generated address has not been issued yet. The chance this has happened and the address is already in use increases. The straightforward solution of course is to generate a new URL over and over again until they find a free one or until they have generated all 1.5 million alternatives. However, this surely can't be how they actually do it, because this would be far too time-consuming. So how do they manage this?

Also, there are probably several visitors at once asking for a short URL, so they must have some synchronization going on as well. But how should the situation be managed when the fifth character needs to be added?

Finally, when doing some research on how the URLs from [http://goo.gl](http://goo.gl) work, of course I requested a short URL for a map on Google Maps several times. None of them will ever be used. However, when Google would strictly enforce the policy of URLs not expiring once issued, this means that there are lots and lots of dormant URLs in the system. Again, I assume Google (and the other services as well) have come up with a solution to this problem as well. I could imagine a clean up service which recycle URLs which have not been visited in the first 48 hours after creation or less then 10 times in the first week. I hope someone can shed some light on this issue as well.

In short, I get the general principle of URL shorteners, but I see several problems when these URLs cannot expire. Does anyone know how the problems mentioned above might be resolved and are there any other problems?

* * *

**EDIT**

Ok, so [this](http://chimprawk.blogspot.nl/2005/01/random-tinyurl-browser-updated.html) blog post sheds some light on things. These services don't randomly generate anything. They rely on the underlying database's auto-increment functionality and apply a simple conversion on the resulting id. That eliminates the need to check if an id already exists (it doesn't) and the database handles synchronization. That still leaves one of my three questions unanswered. How do these services "know" if a link is actually used once created?

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-12T19:48:00.410

**[为什么 URL 缩短器不删除条目](https://stackoverflow.com/questions/11326598/how-do-url-shorteners-guarantee-unique-urls-when-they-dont-expire#answer-15370746)**

我确实写了 TinyURL（十年前）来回馈我不需要的条目。他们的回答让我意识到我是多么可笑：他们告诉我“*只需创建您需要的所有 URL* ”。数字自己说话：

A - 使用 26 个小写字母 + 26 个大写字母 + 10 个数字（合理的站点选择），使用 ONE 字符可以得到 62 个位置（即 62 个缩短的 URL），然后*每个*附加字符将位置编号*乘以*62：

*   0 个字符 = 1 个网址
*   1 个字符 = 62 个 URL
*   2 个字符 = 3,844（村庄中每个人 1 个 URL）
*   3 个字符 = 238,328（同上，在一个城市）
*   4 个字符 = 14,776,336（在洛杉矶地区）
*   5 个字符 = 916,132,832（在美洲，N+Central+S）
*   6 个字符 ~ 56,800,235,580（世界上每个人 8 个 URL）
*   7 个字符 ~ 3,521,614,606,000（每个人 503 个，世界上每个网页 4 个）
*   8 个字符 ~ 218,340,105,600,000（每个人 31,191 个 URL）
*   9 个字符 ~ 13,537,708,655,000,000（每个人约 200 万个 URL）
*   10 个字符 ~ 839,299,365,900,000,000（每个人约 1200 亿个 URL）
*   11 个字符 ~ 52,036,560,680,000,000,000

B - 实际上需求和用途低于人们的预期。很少有人创建短 URL，每个人创建的 URL 也很少。在大多数情况下，原始 URL 就足够了。结果是，最流行的缩短器，经过多年，仍然只用 4 或 5 个字符满足今天的需求，并且在需要时添加另一个字符几乎为零。显然 goo.gl 和 goo.gl/maps 都使用 5 个字符，youtube 使用 11 个（使用上面的 62 个字符，加上破折号和其他一些字符）。

C - 托管（存储 + 运营）一个 URL 的成本是 1Terabyte 每年 1000 美元，每 TB 能够包含 50 亿个 URL，因此 1 个 URL 的托管成本为 0.2 微美元/年。但是Shortener的收益也很薄，因此业务不是很强大。对于用户来说，一个 URL 的好处很难评估，但是丢失的链接将比托管成本高得多。

D - 如果用户创建短 URL 有在未来几年失效的风险，那么它是没有意义的，因此持久性是 Shortener 的主要吸引力，除非他们被迫，否则一个认真的 Shortener 可能永远不会停止为他们服务停业；然而这已经发生了，无论如何，短 URL 有很多缺点和好处，正如[Wikipedia“URL 缩短”](http://en.wikipedia.org/wiki/URL_shortening)中所解释的那样（针对用户、目标站点或缩短器的各种黑客攻击的风险；例如人们可以通过 bot 请求千兆数量的 URL 来攻击 Shortener，大多数 Shortener 肯定会抵御这种威胁）。

凡尔赛，2013 年 3 月 12 日星期二 20:48:00 +0100，编辑时间 21:01:25

# entity-framework-4.3 - Entity Framework 4.3.1 Migrations - enable automatic migration and creating a new database in the same time

> ID：11326601
> 
> 赞同：0
> 
> 时间：2012-07-04T09:50:06.610
> 
> 标签：entity-framework-4.3, entity-framework-migrations

I have played with Entity Framework 4.3 migrations for some time now, but I have trouble achieving the next behavior: In case my code runs on an existing database, I want the database to be migrated automatically to the latest version, but in case the database doesn't exist, the database should be created automatically from the migrations.

I think the problems is related to the first migration that you create. If you create the first migration using -IgnoreChanges parameter (or manually delete them as explained here: [http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/)), you will not be able to use migrations in order to create a new table using the DbMigrator class. because you don't have the initial migration. If you create the first migration without using -IgnoreChanges, than the migration of the existing database will not be possible. Does anybody has any solution for this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:28:41.390

所以你有现有的数据库，你想在该数据库上使用迁移，同时你想在新部署的情况下支持通过迁移创建数据库？

它看起来有点不受支持的用例。在这种情况下（未测试）最简单的方法是条件编译或由某些 AppSettings 键驱动的条件迁移。这意味着创建初始迁移，就好像您没有数据库并将 Up 方法修改为：

```
public override void Up() {
    if (ConfigurationManager.AppSettings["NewDatabaseRequired"] == "true") {
        // Here is generated content
    }
} 
```

或者

```
public override void Up() {
#if NewDatabaseRequired
    // Here is generated content
#endif
} 
```

还有许多其他更复杂的选项，包括为当前数据库编写脚本、修改脚本以在表已经存在时结束、将脚本作为资源添加到迁移程序集并在使用`Up`生成的方法中执行脚本`-IgnoreChanges`。

作为另一个选项，您可以打开其他数据库连接并检查迁移的表是否已经存在（通过查询`sys.tables`SQL Server 中的视图）。这将不需要生成的脚本。

# node.js - How to parse and display rss feed using Nodejs?

> ID：11326603
> 
> 赞同：0
> 
> 时间：2012-07-04T09:50:09.090
> 
> 标签：node.js, rss

How to parse RSS feed and display as html using Nodejs?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:22:09.327

我创建了[node-feedparser](https://www.npmjs.com/package/node-feedparser)，我认为它很好用！

```
npm install feedparser 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-04T09:57:52.720

You should give a try to [node-rss](https://github.com/dylang/node-rss)

# twitter - 用于制作 Twitter 网站的简单 cms/框架

> ID：11326610
> 
> 赞同：0
> 
> 时间：2012-07-04T09:50:27.717
> 
> 标签：twitter, frameworks, content-management-system

去年我读了一篇关于用于制作社交网站的 cms 软件的帖子......基本上有人说用某个 cms 做某事需要更少的时间，而回应是你可以在几秒钟内使用 so-等等框架，这并不意味着它的整体最佳。我粗暴地为某某网站添加了书签，并计划对其进行测试。但它不在我的书签中的任何地方，在谷歌搜索也没有帮助。有谁知道用于创建类似 twitter 的网站的 cms/框架是什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:10:15.157

我不知道这是否是您要查找的内容，但请查看[http://openmicroblogger.org/](http://openmicroblogger.org/)。

您可以查看其他可能性，如下所述：http: [//socialcmsbuzz.com/ever-wanted-to-start-your-own-twitter-clone-now-you-can-02122008/](http://socialcmsbuzz.com/ever-wanted-to-start-your-own-twitter-clone-now-you-can-02122008/)。

希望这可以帮助，

# c++ - 如何为 main() 中的所有 for 循环构建一个类（只是为了减少 main 函数中的代码）

> ID：11326611
> 
> 赞同：1
> 
> 时间：2012-07-04T09:50:28.413
> 
> 标签：c++, stdvector

For 循环遍历向量并成功在控制台上显示所有字符串：

```
int main(int argc, const char * argv[])
{
    vector<string>stringVector;
    string newStringEntry;

    cin>>newStringEntry;
    stringVector.push_back(newStringEntry);

    cin>>newStringEntry;
    stringVector.push_back(newStringEntry);

    for (vector<string>::iterator i = stringVector.begin(); i != stringVector.end(); ++i) 
    {
        cout<<*i<<endl;
    }
} 
```

但这使得代码难以阅读（我们的老师说）现在我们必须为 for 循环构建一个类，更改后的 main 应该如下所示：

```
int main(int argc, const char * argv[])
{
    vector<string>stringVector;
    string newStringEntry;

    cin>>newStringEntry;
    stringVector.push_back(newStringEntry);

    cin>>newStringEntry;
    stringVector.push_back(newStringEntry);

    showStrings();
} 
```

我看到的问题是我不能只是将 for 循环复制粘贴到自己的类中，因为我在 main 中声明的向量名称在类中是未知的，所以我收到错误。

我怎样才能得到这个工作？

到目前为止，我的课程如下所示：

```
class VectorHelp {
    void showStrings() const 
    {
        for (vector<string>::iterator i = vectorName.begin();
                i != vectorName.end();
                ++i)
        {
            cout << *i << endl;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:54:10.493

您应该将向量存储在您的类中，或将其传递给您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:54:24.417

您需要将您的`vector<strings>`作为*方法参数*传递：

```
VectorHelp::showStrings(stringVector);

...

static void showStrings(const vector<string>& stringVector) 
```

请注意，形式参数和实际参数的名称不必相同。还要注意`showStrings`应该是类成员函数（即`static`），而不是实例成员函数。

最后，请注意，可以使用标准 C++ 库的工具来完成不带循环的打印：

```
ostream_iterator<string> out_it (cout, "\n");
copy (stringVector.begin(), stringVector.end(), out_it); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:04:46.257

我打赌你的意思是这样的：

```
class VectorHelp
{
    private:
         std::vector<std::string> stringVector

    public:

    void add(const string& str)
    {
        stringVector.push_back(str);
    }

    void printStrings()
    {
        for (vector<string>::iterator i = stringVector.begin(); i != stringVector.end(); i++)
        {
            cout << *i << endl;
        }
    }

} 
```

不确定您提供的 for 循环是否正确，但我并没有真正使用迭代器，而只是使用索引。

但是上面的类是一个你可以实例化并添加字符串以便稍后打印出来的类！

# android - 相机活动在模拟器上消失并强制关闭

> ID：11326612
> 
> 赞同：2
> 
> 时间：2012-07-04T09:50:28.673
> 
> 标签：android, android-activity, camera, forceclose

我有一个捕获图像的应用程序，但是每当我单击按钮启动相机活动时，它都会强制关闭，下面是我得到的日志猫。我被困在这里很长时间了，没有前进的方向。任何帮助将不胜感激。

日志猫

```
 07-04 15:08:08.803: I/System.out(757): kkkkkkkkkkkk
 07-04 15:08:09.053: I/WindowManager(93): createSurface Window{416b4db8 comp.com/comp.com.receipt paused=false}: DRAW NOW PENDING
 07-04 15:08:09.133: D/dalvikvm(146): GC_FOR_ALLOC freed 339K, 36% free 10622K/16455K, paused 164ms
 07-04 15:08:09.842: W/WindowManager(93): Window freeze timeout expired.
 07-04 15:08:09.842: W/WindowManager(93): Force clearing orientation change: Window{416b4db8 comp.com/comp.com.receipt paused=false}
 07-04 15:08:09.922: W/NetworkManagementSocketTagger(93): setKernelCountSet(10006, 0) failed with errno -2
 07-04 15:08:09.922: I/ActivityManager(93): No longer want com.android.deskclock (pid 358): hidden #16
 07-04 15:08:11.153: D/dalvikvm(146): GC_FOR_ALLOC freed 371K, 36% free 10612K/16455K, paused 68ms
 07-04 15:08:11.363: I/Process(772): Sending signal. PID: 772 SIG: 9
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37): disableMessage: msg_type = 0xffff
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_ERROR
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_SHUTTER
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_FOCUS
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_ZOOM
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_PREVIEW_FRAME
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_VIDEO_FRAME
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_POSTVIEW_FRAME
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_RAW_IMAGE
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_COMPRESSED_IMAGE
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_RAW_IMAGE_NOTIFY
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37):     CAMERA_MSG_PREVIEW_METADATA
 07-04 15:08:11.403: V/EmulatedCamera_CallbackNotifier(37): **** Currently enabled messages:
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): doStopPreview
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): cancelPicture
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): releaseCamera
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): doStopPreview
 07-04 15:08:11.403: V/EmulatedCamera_FakeDevice(37): disconnectDevice
 07-04 15:08:11.403: I/CameraService(37): Destroying camera 1
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): closeCamera
 07-04 15:08:11.403: V/EmulatedCamera_Camera(37): doStopPreview
 07-04 15:08:11.413: I/ActivityManager(93): Process com.android.camera (pid 772) has died.
 07-04 15:08:11.443: W/AudioFlinger(37): session id 5 not found for pid 37
 07-04 15:08:11.453: W/AudioFlinger(37): session id 6 not found for pid 37
 07-04 15:08:11.583: D/dalvikvm(483): GC_CONCURRENT freed 295K, 4% free 10017K/10375K, paused 7ms+7ms
 07-04 15:08:12.573: D/dalvikvm(93): GC_EXPLICIT freed 495K, 11% free 12770K/14215K, paused 7ms+14ms
 07-04 15:08:19.922: W/ActivityManager(93): Activity destroy timeout for ActivityRecord{4159c1c0 com.android.camera/.Camera}
 07-04 15:09:37.513: W/ThrottleService(93): unable to find stats for iface rmnet0
 07-04 15:10:31.653: D/Smack(216): [SSLXMPPConnection@1094112608] create socket connection(mtalk.google.com, 5228)
 07-04 15:10:31.684: W/GTalkService(216): [AndroidEndpoint@1094054264] doConnect: caught XMPPError connecting to mtalk.google.com:5228.: (502)
 07-04 15:10:31.684: W/GTalkService(216):   -- caused by: java.net.ConnectException: failed to connect to mtalk.google.com/74.125.127.188 (port 5228): connect failed: ECONNREFUSED (Connection refused)
 07-04 15:10:31.693: E/GTalkService(216): connectionClosed: no XMPPConnection - That's strange!
 07-04 15:10:34.714: D/ConnectivityService(93): handleInetConditionHoldEnd: net=0, condition=0, published condition=0
 07-04 15:13:47.923: D/dalvikvm(174): GC_CONCURRENT freed 387K, 6% free 10358K/10951K, paused 5ms+6ms
 07-04 15:15:31.772: D/Smack(216): [SSLXMPPConnection@1094557096] create socket connection(mtalk.google.com, 5228)
 07-04 15:15:31.783: W/GTalkService(216): [AndroidEndpoint@1094054264] doConnect: caught XMPPError connecting to mtalk.google.com:5228.: (502)
 07-04 15:15:31.783: W/GTalkService(216):   -- caused by: java.net.ConnectException: failed to connect to mtalk.google.com/74.125.127.188 (port 5228): connect failed: ECONNREFUSED (Connection refused)
 07-04 15:15:31.792: E/GTalkService(216): connectionClosed: no XMPPConnection - That's strange! 
```

# android - 如何将内部存储器中的Android文件权限更改为MODE_PRIVATE？

> ID：11326616
> 
> 赞同：1
> 
> 时间：2012-07-04T09:50:57.437
> 
> 标签：android, file-io

我有一个应用程序试图读取内部存储器中 /data/data/appname 文件夹中的文件。但是，我需要将该文件注入该文件夹中，然后才能读取它（假设这是一个有根设备）。

如何更改权限以便只有应用程序可以读取它？我尝试以编程方式创建一个文件，然后使用 chmod 检查权限，用户/组都是 app_18。如何创建具有相同参数的文件？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:53:48.650

在 android 中，当您在应用程序的内部存储中创建文件时，`(/data/data/<package_name>)`默认情况下它具有**MODE_PRIVATE**权限。（它对您的应用程序是私有的）

[**Android - 内部存储**](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# java - 个人 Android 应用程序包名称

> ID：11326619
> 
> 赞同：0
> 
> 时间：2012-07-04T09:51:14.173
> 
> 标签：java, android, package

如果我想创建一个 Android 应用程序并将其发布到市场上，我可以使用 com.wordpress.MyName.appName 作为我的包名吗？

在安卓市场发布个人应用的包名通常是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:02:26.070

你的包名实际上可以是任何东西。但是当你在市场上发布一个应用程序时，你需要确保你的包名是唯一的。

因此，如果已经有人在已发布的应用程序中使用包的名称，则您不能使用它。

原因是如果两个应用程序的包名称相同，则手机操作系统需要在安装新应用程序之前卸载以前的应用程序，因为具有相同包名称的两个应用程序不能在手机中共存。

因此，建议您创建唯一的包名称并在市场上发布应用程序时使用它。

我觉得这将是最好的方法。

**[com/edu/org/...].[组织名称].[项目名称 + 版本/日期]**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:53:14.860

您可以使用您喜欢的任何包名称，并且适合您的组织！主包在 Android 市场上必须是唯一的（完整的包名，例如，如果 com.wordpress 已经在市场上发布，您可以发布 com.wordpress.alt）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:54:23.033

您也许应该创建自己的唯一包名称，因为这会将它与您的软件相关联。Wordpress 软件将使用“com.wordpress”。把它想象成一个反向互联网地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:00:41.600

通常最好使用与 Java 相同的方法。例如，基于您的电子邮件地址（如此处建议：http: [//c2.com/ppr/wiki/JavaIdioms/JavaPackageNames.html](http://c2.com/ppr/wiki/JavaIdioms/JavaPackageNames.html)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T10:04:31.187

阅读关于包名称的这两页

[Android 包名](http://blog.javia.org/android-package-name/)和[android 应用程序的包名应该是什么？](https://stackoverflow.com/questions/8075162/what-should-be-the-package-name-of-android-app)

*只需要注意您拥有的名称在市场上还没有。*

# wolfram-mathematica - 在 Mathematica 中创建新的元胞自动机规则

> ID：11326620
> 
> 赞同：1
> 
> 时间：2012-07-04T09:51:18.463
> 
> 标签：wolfram-mathematica, cellular-automata

我需要在 Mathematica 中创建一个新的 CA 规则。我能怎么做？我的意思是，我需要创建一个具有 3 种颜色（黑色、白色和灰色）的 CA。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:57:24.303

指定自定义规则的一种方法是定义一个函数，在给定邻居列表和时间步长的情况下，该函数将输出更新后的值。例如

```
fun[lst_, t_] := Mod[Total[lst], 3] 
```

这将简单地计算元素模3的所有邻居的总和。然后可以`CellularAutomaton`按如下方式使用此函数

```
With[{init = {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0}, nsteps = 10, r = 1},
   res = CellularAutomaton[{fun, {}, r}, init, nsteps]]

ArrayPlot[res] 
```

![数学图形](../Images/c46224e7cdf2750d85879d6df09bf783.png)

# javascript - 如何使用 html Anchor 链接到页面，然后在该页面上执行 javascript 函数？

> ID：11326623
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:51:26.217
> 
> 标签：javascript, html

我编写了一个脚本来更改 html 主要部分中 div 的内容，使用：

```
document.getElementById("id").innerHTML = "the stuff I want to put in the main box"; 
```

和一个存储内容的数组，所以我调用changetxt（1）它将innerhtml更改为'content [1]'等）

我现在要做的是从另一个页面链接，包括更改的内容，例如，我链接到“我们相遇的地方”内容部分，（内容 [2]）但是当我链接到 html 时，它显然只显示默认值价值，我想知道是否有某种方法可以通过另一个页面上的锚链接到内容，例如 -

```
href="index.html-javascript:changetxt(2); 
```

我没有在谷歌或这个网站上找到任何解释如何这样做的东西。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:00:34.810

为什么不使用哈希标签？

链接：

`index.html#2`

新页面中的 javascript (index.html)：

```
if(window.location.hash) {
  var num = Number(window.location.hash.substr(1));

  if(num > 0) {
    changetxt(num);
  }
} 
```

# c# - 无法将观察集合绑定到 ItemsControl

> ID：11326625
> 
> 赞同：0
> 
> 时间：2012-07-04T09:51:43.567
> 
> 标签：c#, wpf

我有一个 Observable Collection，我正在尝试将其绑定到 ItemsControl。以下是我的代码片段。

**类 Sample.ViewModel：**

```
//Observabale collection getter/setter property
public ObservableCollection<SQuestion> SList
{
    get
    {             
        return _sList;
    }
    set
    {
        if (_sList == value)
            return;
        _sList = value;
        if(PropertyChanged!=null)
            PropertyChanged(this, new PropertyChangedEventArgs("ListOfSamples"));
    }
} 
```

**.xaml 代码：**
**查看/Mainwindow.xaml**

```
<ItemsControl Height="422" HorizontalAlignment="Left" Margin="12,12,0,0" Name="listBox1" VerticalAlignment="Top" Width="751" ItemsSource="{Binding SList}" ItemTemplate="{StaticResource perItemTemplate}"/> 
```

在上面的代码中，我指定了 ItemsSource 绑定，但在运行我的应用程序时，列表不会出现在 ItemsControl 中，并且所有内容都显示为空白。：
但是，如果我尝试从我的 .cs 代码隐藏中将源分配给 Listbox因为`listBox1.ItemsSource = SList`，列表框被填充并按预期工作。
有人可以指出上面我正在做的绑定有什么问题，以便我可以直接从 xaml 绑定而不使用代码隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:22:19.260

这应该有效。

在代码隐藏中：

```
public void MyInitialization()
{
    listBox1.DataContext = SList;
}

//Observabale collection getter/setter property
public ObservableCollection<SQuestion> SList 
{ 
    get 
    {              
        return _sList; 
    } 
    set 
    { 
        if (_sList == value) 
            return; 
        _sList = value; 
        if(PropertyChanged!= null)
            PropertyChanged(this, new PropertyChangedEventArgs("SList")); 
    } 
} 
```

在 Xaml 中：

```
<ItemsControl Height="422" HorizontalAlignment="Left"
              Margin="12,12,0,0" Name="listBox1" VerticalAlignment="Top"
              Width="751" ItemsSource="{Binding} 
              ItemTemplate="{StaticResource perItemTemplate}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T11:59:42.050

您在 VM 中的属性名称是，`SList`但您正在使用不同的名称来提升 PropertyChange: `PropertyChanged(this, new PropertyChangedEventArgs("ListOfSamples"));`。将其替换为`PropertyChanged(this, new PropertyChangedEventArgs("SList"));`并且应该很好（假设 VM 连接正确）

# actionscript-3 - 覆盖其他类的变量

> ID：11326629
> 
> 赞同：2
> 
> 时间：2012-07-04T09:51:53.623
> 
> 标签：actionscript-3

`Global.as`假设我在一般文件中有一个变量，如下所示：

```
public static const test:String = "testString"; 
```

在另一个文件中，我想覆盖该变量。可能像下面这样：

在`File1.as`：

```
override var test:String = "testStringUpdated"; 
```

当然这是行不通的。有谁知道如何做到这一点？

它实际上是否可能`override`并且`override`应该像这样使用？还是仅用于覆盖功能？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:05:10.913

通常，您不会“覆盖”变量；只需在子类中更改它们的值（构造函数是一个很好的地方）。

```
public function File1()
{
    test = "testStringUpdated";
} 
```

至于字面上的覆盖，您可以覆盖 setter 和 getter。

只需在基类中将变量设置为 setter/getter 组合，例如：

```
class Base
{
    private var _test:String = "testString";

    public function get test():String
    {
        return _test;
    }

    public function set test(value:String):void
    {
        _test = value;
    }
} 
```

然后在您的子类（File1）中，您可以更改获取值的`test`方式，例如：

```
class File1 extends Base
{
    override public function get test():String
    {
        return super.test + "Updated"; // testStringUpdated
    }
} 
```

# c# - 如何使用键盘上的 Tab 键使 BalloonPopupExtender 出现和消失？

> ID：11326633
> 
> 赞同：0
> 
> 时间：2012-07-04T09:52:16.967
> 
> 标签：c#, asp.net

我是一名新的 ASP.NET 开发人员，并尝试将 ASP.NET Ajax BallouPopupExtender 与我拥有的表单一起使用。我编写了代码，它运行良好，但我现在想要的是：我有 4 个文本框并排对齐。现在，Ajax BalloonPopupExtender 控件仅在用户使用鼠标单击每个 TextBox 时才起作用。但是，如果用户使用键盘上的 Tab 键填充这些 TextBox，则不会出现此 BalloonPopupExtender。 **那么如何使它与 Tab 键一起使用呢？**

我的代码：

```
<ajaxToolkit:BalloonPopupExtender ID="BalloonPopupExtender1" runat="server"
                                            TargetControlID="CorrectAnswerTextBox" BalloonPopupControlID="pnlBallon"
                                            Position="BottomRight" BalloonStyle="Cloud" BalloonSize="Small" 
                                            CustomCssUrl="ballonPopupStyle" CustomClassName="oval" UseShadow="true" ScrollBars="Auto" 
                                            DisplayOnMouseOver="true" DisplayOnFocus="false" DisplayOnClick="true">
                </ajaxToolkit:BalloonPopupExtender>

                <asp:Panel ID="pnlBallon" runat="server">
                    Test TEST
                </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:02:01.850

我想出了如何用 Tab 键显示它。只需将 DisplayOnFocus 设置为 True：

```
DisplayOnFocus="true" 
```

但是，当用户移出带有气球的文本框时，它不会消失。那么该怎么做呢？

# amazon-s3 - 亚马逊 s3 文件上传混乱

> ID：11326639
> 
> 赞同：1
> 
> 时间：2012-07-04T09:52:45.697
> 
> 标签：amazon-s3

我正在使用 com.amazonaws.services.s3.AmazonS3 将文件从我的服务器上传到亚马逊的服务器。一切正常，但我因为一个问题而发疯：

我正在上传几个文件和文件夹（主要是图像、js 和 css 文件）。这些文件可以很好地上传但是我有一个特定的css文件（jquery-mobile-1.0.1.css）可以上传但是当html依赖于该文件时，css不会加载，直到我去手动上传那个文件再次公开。我确实尝试了所有内容（更改了文件名、位置、编码），但似乎没有任何效果。有谁知道什么会导致问题？文件是动态上传的，因此特定 css 文件的上传方式与其他 css 文件没有区别。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T13:06:28.053

您上传的文件的 mime 类型（HTTP 内容类型标头）不正确。S3 并不总是正确设置它们。JS 文件和 CSS 文件都设置为 text/html - 应该是`text/css`和`text/javascript`.

您需要在上传 API 调用中适当地设置它们。一些上传库会为你做这件事，你的显然不是。

[http://orensol.com/2009/07/14/google-chrome-2-css-content-type-and-amazon-s3/](http://orensol.com/2009/07/14/google-chrome-2-css-content-type-and-amazon-s3/)

# android - 在Android中使用ifconfig打开网络但它不起作用

> ID：11326645
> 
> 赞同：2
> 
> 时间：2012-07-04T09:53:01.583
> 
> 标签：android, linux, networking, adb, ifconfig

我曾尝试使用 adb shell 来操作手机的网络接口（HTC Desire Z）。如图所示，我先ping了一个站点，然后把3G网络关掉，再ping，它说网络不可达。但是当我打开它并使用 ifconfig 并确认它确实打开时。但是当我 ping 它时，它总是说网络无法访问。谁能帮我 ？！！？

这是我的控制台内容：（顺便说一句，我是新用户，不允许发布图片）

```
ping 211.69.198.222
PING 211.69.198.222 (211.69.198.222) 56(84) bytes of data.
64 bytes from 211.69.198.222: icmp_seq=1 ttl=46 time=356 ms
64 bytes from 211.69.198.222: icmp_seq=2 ttl=46 time=294 ms
64 bytes from 211.69.198.222: icmp_seq=5 ttl=46 time=342 ms
64 bytes from 211.69.198.222: icmp_seq=6 ttl=46 time=341 ms
64 bytes from 211.69.198.222: icmp_seq=8 ttl=46 time=342 ms
64 bytes from 211.69.198.222: icmp_seq=9 ttl=46 time=330 ms
^C
--- 211.69.198.222 ping statistics ---
9 packets transmitted, 6 received, 33% packet loss, time 8025ms
rtt min/avg/max/mdev = 294.831/334.533/356.018/19.263 ms
# ifconfig rmnet0
rmnet0: ip 172.22.39.243 mask 255.255.255.248 flags [up broadcast running multicast]
# ifconfig rmnet0 down
# ping 211.69.198.222
connect: Network is unreachable
# ifconfig rmnet0 up
# ping 211.69.198.222
connect: Network is unreachable
# ping 211.69.198.222
connect: Network is unreachable
# ifconfig rmnet0
rmnet0: ip 172.22.39.243 mask 255.255.255.248 flags [up broadcast running multicast] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T01:33:35.910

我是作者，我得到了答案。当关闭接口时，您的 IP 将被释放。使用“netcfg rmnet0 dhcp”首先使 ip 可用，然后您可以根据需要 ping 站点。

# https - FB.canvs.setAutoGrow() 与粉丝页面选项卡上的 https

> ID：11326649
> 
> 赞同：0
> 
> 时间：2012-07-04T09:53:10.790
> 
> 标签：https, facebook-javascript-sdk

我注意到从今天早上开始（可能是从昨天晚上开始），当我连接到 https 协议时，功能 FB.canvas.setAutoGrow 在粉丝页面选项卡上不再起作用。

这是一个很快就会解决的facebook错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:04:37.480

这似乎是一个已知问题：

[https://developers.facebook.com/bugs/161462503988165?browse=search_4ff47b9a413f04323839980](https://developers.facebook.com/bugs/161462503988165?browse=search_4ff47b9a413f04323839980)

[https://developers.facebook.com/bugs/394423653950625?browse=search_4ff47b759c3f78114111041](https://developers.facebook.com/bugs/394423653950625?browse=search_4ff47b759c3f78114111041)

# mysql - 复合键中的 AUTO_INCREMENT

> ID：11326662
> 
> 赞同：0
> 
> 时间：2012-07-04T09:54:00.900
> 
> 标签：mysql, database-design, auto-increment, composite-key

我有如下表

**个人信息**

```
CREATE TABLE personalInfo(userid BIGINT AUTO_INCREMENT PRIMARY KEY) 
```

**专利信息**

```
CREATE TABLE patentInfo 
(
 userid BIGINT,
 patentId BIGINT AUTO_INCREMENT,
 FOREIGN KEY (userid) REFERENCES personalInfo(userid), 
 PRIMARY KEY (userid,patentId)
) 
```

创建表`patentInfo`时，我收到错误

```
Incorrect table definition; there can be only one auto column and it must be defined as a key. 
```

我想做的是为用户添加专利。所以我试图使用`patentId`as`AUTO_INCREMENT`并保持 compiste 主键作为`patentId`&的组合`userid`。

知道我该怎么做吗？

## 更新1：

我的目标是，我不想插入`patentId`mysql 查询。mysql 本身将创建下一个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:57:41.783

既然`patentId`是`AUTO_INCREMENT`，那么它应该是主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:32:28.903

我会改用一个`Person`——`user`假设你有一个诊所......

*   `Patient`是一个`Person`
*   `Doctor`是一个`Person`
*   `Doctor`也可能成为（是）一个`Patient`。

![在此处输入图像描述](../Images/b7911137d5f5f5a38753aaaa4c06f0a0.png)

*   保留所有常见的个人信息`Person`
*   只有患者特定的列`Patient`
*   只有医生具体`Doctor`
*   子类型是包容性的，所以鉴别器有 {B= both}
*   请注意主键如何传播到子类型表中。

* * *

总而言之，对于您的具体示例，两个表都应该`UserID`作为主键。在第二个表中，它也是一个外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:57:20.117

您不必在一个表中自动增加值。所以您必须使用 last_insert_id() 或类似的东西在代码级别手动插入用户 ID，而不是在数据库级别执行此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T19:54:23.767

如果 auto_increment 列是主键的第一个子句，您似乎可以拥有一个带有一个 auto_increment 列的复合主键。

以下适用于我的机器

```
CREATE TABLE patentInfo 
(
  userid BIGINT,
  patentId BIGINT AUTO_INCREMENT,
  PRIMARY KEY (patentId, userid)
) 
```

然而

```
PRIMARY KEY (userid, patentId) 
```

给出您所看到的错误。

在 MariaDB 10.0 YMMV 上测试

# c++ - 无效的精灵标头linux

> ID：11326664
> 
> 赞同：3
> 
> 时间：2012-07-04T09:54:09.807
> 
> 标签：c++, gcc

我已经将一个 c++ 代码从一个开放的 solaris 操作系统移植到了 Redhat 4 操作系统。在此代码段中，我收到错误消息：

```
 AsciiFileName = new char [1024];
    cout<<"HandleFile is getting called "<<endl;
    /// Converting the file name to ascii.
    FileName += strFileName;
    FileName.ConvertToAscii( AsciiFileName );

    /// Get handle to the shared object file.
    Handle = dlopen( AsciiFileName, RTLD_LOCAL | RTLD_LAZY );
    cout<<"Handle = dlopen( AsciiFileName, RTLD_LOCAL | RTLD_LAZY ); is getting called AsciiFileName"<<AsciiFileName<<endl;
    if (!Handle)
    {
    cout<<"Handle is NULL"<<endl;
    cout<<dlerror()<<endl;
exit(EXIT_FAILURE); 
```

我得到的错误是：

```
invalid elf header linux 
```

它无法打开so文件。这是它的相关日志

```
Before ProcessSharedObject->IterateOnDir
 GCVDirectoryIterator::IterateOnDir:file name :/bin/ls /trnuser1/rmtrain/DevelopmentEnv/Telstra/USM/dat/CnEModules/*.so
 GCVDirectoryIterator::IterateOnDir:file opened  :/trnuser1/rmtrain/DevelopmentEnv/Telstra/USM/dat/CnEModules/libGCVCore.so

before GCVDirectoryIterator::AddFile
HandleFile is getting called
Handle = dlopen( AsciiFileName, RTLD_LOCAL | RTLD_LAZY ); is getting called AsciiFileName/trnuser1/rmtrain/DevelopmentEnv/Telstra/USM/dat/CnEModules/libGCVCore.so
Handle is NULL
/trnuser1/rmtrain/DevelopmentEnv/Telstra/USM/dat/CnEModules/libGCVCore.so: invalid ELF header 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:24:45.637

> /trnuser1/rmtrain/DevelopmentEnv/Telstra/USM/dat/CnEModules/libGCVCore.so：当前 ar 存档

那是一个静态库（存档），应该是`.a`，而不是`.so`. 你不能用`dlopen`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:14:00.170

您可能将 libGCVCore.so 从 Solaris 机器复制到 RedHat 机器。Solaris 机器很可能具有与 RedHat 不同的体系结构（Sparc？）。您可以通过键入以下内容进行确认：

```
file libGCVCore.so 
```

此命令应打印有关您尝试链接的库的目标体系结构的信息。

# c - implementing anonymous pipe

> ID：11326666
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:54:11.063
> 
> 标签：c, unix, operating-system, system-calls

I'm trying to implement an anonymous pipe without using system calls: pipe(), fork(), mkfifo(), open(), read(), write(), close() .

Basically i implemented the anonymous pipe with a shared memory in which two file descriptors (both of which have the shared memory id) one for reader and the other for writer, communicates via two semaphores The only situation which i didn't refer to is in case of fork.

my question would be how should i implement the fork call or alternatively how should i treat this situation.

i'm allowed to use pthread_atfork() and atexit() syscalls.

thanks a lot.

p.s

i'm attaching a regular short code for pipe in order to emphasize exactly how should my implementation work.

**the code works!!! it's there just to illustrate the way my functions should work.**

```
 #include<unistd.h>
    #include <stdio.h>

    int main()
    {
      int pfd[2], rb;
      char buff[100]; 
 //I implemented this syscall by allocating shared memory
      if (pipe(pfd)<0)
      {
        return -1;
      }
    //here is my problem. I don’t know how to treat this syscall     
     if (fork())
      {

        sleep(5);
    //I implemented this syscall by two file descriptors which communicate via two 
    //semaphores
        write(pfd[1], "hello world\n", sizeof("hello world\n"));
        wait(NULL);
      }
      else
      {
    //I implemented this syscall by two file descriptors which communicate via two 
    //semaphores

        rb = read(pfd[0], buff, sizeof(buff));
        if (rb < 0)
          perror("SON: read");
        else
        {
          printf("SON: writing %d\n", rb);
          write(1, buff, rb);
        }
      }

      return 0;
    } 
```

Sincerely,

eli

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:08:50.823

`fork`不需要实现匿名管道，尽管可能需要对其进行*测试*。如果您在使用传统 Unix 的平台上`fork`，那么创建新进程的大多数方法都将涉及`fork`系统调用。您的替代方案是：

*   `vfork`紧随其后的是`exec`，假设您可以找到您的程序并提供适当的参数；
*   从外部调用程序的另一个副本；或者
*   线程（`pthread_create`）。

# winforms - 在 Windows 窗体文本框中捕获换行符

> ID：11326669
> 
> 赞同：0
> 
> 时间：2012-07-04T09:54:16.110
> 
> 标签：winforms, barcode-scanner, linefeed

我有一个包含 TextBox 的 Windows 窗体应用程序。在我专注于 TextBox 之后，我使用 USB 条形码扫描仪读取始终以换行 (LF) 字符开头的条形码字符串。我稍后通过 Text 属性从 TextBox 检索的字符串不包括 LF 字符。我试图捕获 KeyUp 事件，但它也没有帮助，LF 字符似乎被忽略了。如何检测换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:44:37.180

我认为您需要将文本框的**MultiLine**属性设置为 True
使用默认值为 Multiline (false) 的文本框会去除换行符

# symfony - 在 symfony2 的多个其他实体中使用实体

> ID：11326682
> 
> 赞同：0
> 
> 时间：2012-07-04T09:55:13.207
> 
> 标签：symfony, doctrine-orm

我是 symfony2 的新手

如何在多个其他实体中重用一个实体？

比如说（其实是这样的）

我有一个名为 CustomVar 的实体

我的项目有项目、类别、产品。

我希望我的项目保存 customvars（onetomany），我的产品也保存 customvars（onetomany）：

```
project 1:n customvar

product 1:n customvar 
```

因此，在访问我的产品时，我可以访问项目级别的自定义变量，也可以访问产品级别的自定义变量。

我假设这些都将使用相同的对象，但我如何正确注释和使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:12:52.373

那么您希望 CustomVar 与 Product 和 Project 相关吗？

```
class CustomVar {

    /**
     * @ORM\ManyToOne(targetEntity="Project", inversedBy="customVars")
     * @ORM\JoinColumn(name="project_id", referencedColumnName="id", nullable=true)
     */
    private $project;

    /**
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="customVars")
     * @ORM\JoinColumn(name="product_id", referencedColumnName="id", nullable=true)
     */
    private $product;
} 
```

在我们的项目（或产品）中，您将拥有以下代码：

```
class Project {

    /**
     * @ORM\OneToMany(targetEntity="CustomVar", mappedBy="project")
     */
    private $customVars;
} 
```

如果您的产品和项目相关，您现在可以执行 $product->getProject()->getCustomVars() 以及 $product->getCustomVars() 并使用返回的 ArrayCollections。

如果您希望它只与两个对象之一相关，您可以让设置器检查是否设置了另一个关系（通过测试项目和产品变量），然后按您的方式处理它（抛出异常，默默地什么都不做等等） .

# javascript - How to fix another drop-down value after selecting first in javascript or jquery?

> ID：11326695
> 
> 赞同：1
> 
> 时间：2012-07-04T09:56:06.003
> 
> 标签：javascript, jquery, html

I have one one form with 2 drop-downs. What i want is, when I select 1st drop down box, then a specific option gets fixed (which can't be change by user in that form) to another drop-down box. How can i do this in javascript or jquery?

```
<select id="item_type" name="item_type" style="width:300px;" ">
                              <option value=''>-- Select --</option>
                              <option value="City">City</option>
                              <option value="Source">Source</option>
                              <option value="Follow Up">Follow Up</option>
                              <option value="Next Day">Next Day</option>                            
</select> 

<select id="item_value_type" name="item_value_type" style="width:300px;" ">
                              <option value=''>-- Select --</option>
                              <option value="value">value</option>
                              <option value="id">id</option>                            
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:11:54.117

**Jquery:**

```
$("#target_sel").attr("disabled",true);
$("#first_sel").on("change",function(){
   $("#target_sel").val($(this).val())
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:07:06.020

你可以这样做：

```
<select id="item_type" name="item_type" style="width:300px" onchange=javascript:change(this.value)>
         <option value=''>-- Select --</option>
         <option value="City">City</option>                         
</select> 
```

在更改功能中，您可以修改其他选择字段。下拉框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:02:49.630

**jQuery的方式是**

```
var valueType = $('#item_value_type')
$('#item_type').on('change', function(e) {
  valueType.val('thefixedvalue'); // sets the value
  valueType.attr('disabled', true); //disables the select
}); 
```

要重新启用选择，只需使用

```
valueType.removeAttr('disabled'); 
```

**javascript方式是**

```
var valueType = document.getElementById('item_value_type');
var itemType = document.getElementById('item_type');
itemType.onchange = function(event) {
  valueType.value = 'yourFixedValue';
  valueType.setAttribute('disabled', 'disabled');
} 
```

重新启用选择：

```
valueType.removeAttribute('disabled'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:12:53.110

**工作演示** [http://jsfiddle.net/LXRqm/](http://jsfiddle.net/LXRqm/)

API: `change`: [http://api.jquery.com/change/](http://api.jquery.com/change/) `prop` : [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

您也可以`prop('disabled', false)`将其设置为活动状态。

希望这会有所帮助，并随时使用演示，

**代码**

```
var secondSelect = $('#item_value_type');
var hulkChange = "value";

$('#item_type').change(function() {
     secondSelect.val(hulkChange); 
     secondSelect.prop('disabled', true);
});​ 
```

# javascript - tr display none crashes ie9

> ID：11326697
> 
> 赞同：8
> 
> 时间：2012-07-04T09:56:16.050
> 
> 标签：javascript, css, internet-explorer-9

This code crashes ie9 as i am having this problem in my code .. any work around will be appreciated .. This is not a problem with the previous versions of ie .. Thanks ..

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head></head>
    <body>
        <table style="border-collapse: collapse">
            <tr id="firsttr">
                <td colspan="2"></td>
                <td></td>
            </tr>
            <tr id="secondtr">
                <td></td>
                <td style="border: 1px solid #D2D2D2">Move cursor here</td>
                <td></td>
            </tr>
        </table>
    </body>
    <style type="text/css">
        #secondtr:hover {
            display: none;
        }

    </style>
</html> 
```

Even using onclick event crashes the browser .. try the following .. Move cursor here

```
 <script type="text/javascript">
    function HideThis()
    {
        document.getElementById('secondtr').style.display = 'none';
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:06:04.833

我有同样的问题，并找到了解决方案。首先，我应该说，对于 IE9 中样式borderCollapse 等于折叠（无论它是声明为内联还是在头部）的表格中的任何行，问题都是实际的。

我的解决方案：

```
function hideRow(tableNode, rowNode, hide){
    if(hide){
        if(window.navigator.userAgent.search('MSIE 9.0') != -1){
            var initValue = tableNode.style.borderCollapse;
            tableNode.style.borderCollapse = 'separate';
            rowNode.style.display = 'none';
            tableNode.style.borderCollapse = initValue;
        }else{
            rowNode.style.display = 'none';
        }
    }else{
        rowNode.style.display = '';
    }
} 
```

甚至缩短：

```
function hideRow(tableNode, rowNode, hide){
    var initValue = tableNode.style.borderCollapse;
    tableNode.style.borderCollapse = 'separate';
    rowNode.style.display = hide ? 'none' : '';
    tableNode.style.borderCollapse = initValue;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T09:59:41.157

There is a bug in IE9, but the css rule is logically undecidable :

As soon as it isn't displayed any more, your mouse isn't hovering any more so it must be visible again. Which means the mouse is over it. Which means it must be hidden... which means it must be visible... etc.

Said otherwise : the specification doesn't make sense.

This being said, this bug is really annoying as the following code crashes IE9 too :

```
$(window).ready(function(){
    $('#secondtr').mouseenter(function(){
         $('#secondtr').hide();
    });
}); 
```

But it doesn't happen if you put your event handler on a `span` (for example). So I suggest you change your HTML in order to avoid hidding the `tr` on which you have a hovering detection.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:14:59.927

这似乎是 IE9 中的一个错误。

更改`display:none`为`visibility:hidden`，您将看到文本不断闪烁。

我能想到的唯一想法是 IE 陷入无限循环或堆栈溢出。

抱歉，我无法提供解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:19:50.527

如果隐藏 TR 是您想要的，您可以尝试以下操作：

```
#secondtr:hover {
  height: 0px;
  padding: 0px;
  margin: 0px;
  border: 0px;
  font-size: 0px;
} 
```

这是在 IE、FF 和 Safari 上为我工作的完整代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<TITLE> BLAH</TITLE>
<style type="text/css">
#secondtr:hover, #secondtr:hover .secondTD  {
    height: 0px;
    padding: 0px;
    margin: 0px;
    border: 0px;
    font-size: 0px;
}
.secondTD{
    border: 1px solid #D2D2D2;
}

</style>
</head>
<body>
<table style="border-collapse: collapse">
    <tr id="firsttr">
        <td colspan="2"> </td>
        <td></td>
    </tr>
    <tr id="secondtr">
        <td></td>
        <td  class="secondTD">Move cursor here</td>
        <td></td>
    </tr>
</table>
</body>
</html> 
```

# jquery - How to create an event when the animation ends?

> ID：11326699
> 
> 赞同：1
> 
> 时间：2012-07-04T09:56:29.397
> 
> 标签：jquery, html, animation, css

1 - How to create an event when the animation ends? Animation written in css3

2 - How to Play the animation only when all data loaded in the browser ? You can see

Many Thx. [Demo jsFiddle](http://jsfiddle.net/centerwow/hfuGx/48/show/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:34:40.787

1 - 你需要添加一个 animationEnd 事件监听器

```
document.getElementById('animation-03').addEventListener('animationend', function () {
    alert('end')
}, false); 
```

确保为所有浏览器供应商添加它。

这是一个分叉版本：http: [//jsfiddle.net/Fj2vF/2/](http://jsfiddle.net/Fj2vF/2/)

2 - 不要担心这个。正如 W3C 规范所说，您的动画只有在所有内容都加载后才会开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:36:11.113

使用 Javascript/jQuery 启动和处理 css3 动画非常容易。

[在此处](http://jsfiddle.net/codepo8/ATS2S/8/)查看示例

您可以为此使用 js 库 [Move.js。](http://visionmedia.github.com/move.js/)

# php - link existing account to facebook - problems/questions

> ID：11326701
> 
> 赞同：0
> 
> 时间：2012-07-04T09:56:35.360
> 
> 标签：php, mysql, facebook, facebook-graph-api, facebook-javascript-sdk

I have a website that have facebook connection and classic user_name/password login. The system currently works if user clicks facebook_connect button. However, I want to link existing account to facebook because user can choose to login with his/her user_name, password credentials and also want to make facebook auto-connected after clicking facebook connect button. I have a field namely `fb_connect` (1 or 0) that holds if user uses facebook connect or not. So, the scenario is the following ;

1) I chosed to register with facebook connect. I clicked facebook connect button and got `$user` field. My website make a registration process, gets facebook email, generates a password and sends login credentials to the email address to make user also login with email/password.

2) When I got the email, I say : "Well, it looks ok, let me try with these login credentials( email/password) and check if the website already linked the account with these credentials"

3) I enter the website and used normal login. (PROBLEM 1 OCCURS HERE) My website checks if `fb_connect` is 1 or 0\. if it's 1 then, my website calls `FB.login` function in the javascript sdk of facebook.

PROBLEM 1 : If users have existing account and use classic login, I don't want users to see an empty dialog flashes for 1-2 seconds after each login to the system.

PROBLEM 2 : When I open private browsing in chrome or mozilla and use classic login like in the problem 1's case, facebook popup wants facebook user_name and password to login. But, I certainly don't want that.

I looked at twitter and opened a private tab. After logging in to twitter and check if facebook is linked or not, twitter says my existing account is linked. I say "How's that happened ? Twitter doesn't make me enter login credentials for facebook ??? "

I think I'm doing something wrong. I really need help. I'm using php. Some logical statements, algorithms and code is needed. Any help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:58:20.670

> 我看了推特，打开了一个私人标签。登录 twitter 并检查 facebook 是否已链接后，twitter 说我现有的帐户已链接。我说“这是怎么回事？Twitter 不会让我输入 facebook 的登录凭据？？？”

唯一合乎逻辑的解释 IHMO：您过去已经将您的 twitter 与您的 Facebook 帐户连接起来，他们只是在他们的数据库中查找该信息，此时实际上并未从 Facebook 查询任何数据。

> 问题 1：如果用户有现有帐户并使用经典登录，我不希望用户在每次登录系统后看到一个空对话框闪烁 1-2 秒。

与其保存该信息，他们甚至在将其与 Facebook 连接之前就拥有了自己的帐户，resp。也没有在您的数据库中使用 Facebook*创建它。*

> 问题 2：当我在 chrome 或 mozilla 中打开隐私浏览并使用问题 1 中的经典登录时，facebook 弹出窗口需要 facebook 用户名和密码才能登录。但是，我当然不希望这样。

然后**不要**使用私人浏览。如果您使用 FB.login 并且 Facebook 无法判断用户是否已登录 Facebook，则无法不被要求登录Facebook *。*

# ruby-on-rails - 在 Rails 路由中匹配一个不好的做法吗？

> ID：11326704
> 
> 赞同：0
> 
> 时间：2012-07-04T09:56:45.940
> 
> 标签：ruby-on-rails

是否使用了以下不良做法，是否会将您的控制器操作暴露给 CSRF 攻击？

```
match ':controller(/:action(/:id))(.:format)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:05:44.323

是的。看看`verified_request?`方法[here](https://github.com/rails/rails/blob/7fb99e5743d88c04357e09960d112376428a6faa/actionpack/lib/action_controller/metal/request_forgery_protection.rb#L93)。
它不验证`GET`请求的令牌。

您必须在路由中指定 HTTP 动词。

```
match "something" => "controller#action", :via => :post 
```

# iphone - zoom image on scrollview iphone?

> ID：11326705
> 
> 赞同：2
> 
> 时间：2012-07-04T09:56:49.183
> 
> 标签：iphone, objective-c, ios, scrollview

I have to zoom an image in `UIScrollView` and after zooming i wants crop the image which is visible in `UIImageView`. I have the following problems:

1) Image not zooming, `viewForZoomingInScrollView` method not called.

2) This is my second question about cropping, the first is [here](https://stackoverflow.com/questions/11305606/crop-image-after-zooming). How can I crop the zoomed image after zooming?

My code is:

```
@interface ViewController : UIViewController<UIScrollViewDelegate>
{
     UIImageView *imageView1;
     UIScrollView *scroll;
}
@property(nonatomic,retain) UIImageView *imageView1;

@end 
```

and in .m file

```
- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
    CGRect frame1 = CGRectMake(10,10,190,200);
    self.imageView1.userInteractionEnabled = YES;

    imageView1=[[UIImageView alloc]initWithFrame:frame1];
    imageView1.contentMode = UIViewContentModeScaleToFill;

    imageView1.image= [UIImage imageNamed:@"back.jpeg"];

    CGRect frame = CGRectMake(10,10,190,200);
    scroll = [[UIScrollView alloc] initWithFrame:frame];
    scroll.contentSize = CGSizeMake(240, 260);
    scroll.showsHorizontalScrollIndicator = YES;
    scroll.showsVerticalScrollIndicator = YES;  
    scroll.clipsToBounds = YES;

    scroll.backgroundColor=[UIColor blackColor];
    [scroll addSubview:imageView1];
    [imageView1 release];

    scroll.minimumZoomScale = 0.55; 
    scroll.maximumZoomScale = 2.0;

    scroll.delegate=self;

    [self.view addSubview:scroll];

    self.imageView1.userInteractionEnabled = YES;

}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    NSLog(@"delegate method called");
    return self.imageView1;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:04:47.323

实现 UIScrollViewDelegate 并在控制器的 ViewDidLoad 中调用此函数。

```
-(void)setContentSizeForScrollView
{
    scrollView.contentSize = CGSizeMake(YOURIMAGEVIEW.frame.size.width, YOURIMAGEVIEW.frame.size.height);
    scrollView.minimumZoomScale = 1.0;
    scrollView.maximumZoomScale = 5.0;
} 
```

并编写此函数

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{   
    return YOURIMAGEVIEW;   
} 
```

# mysql - Update a column with the data of another column of another table

> ID：11326708
> 
> 赞同：2
> 
> 时间：2012-07-04T09:57:13.453
> 
> 标签：mysql, sql

I have two tables

1.  titles_downloads
2.  title_history

Currently i am saving idtitle_history in titles_downloads as a column. The title_history has a column idtitle which is different from idtitle_history.

I want to change the idtitle_history in my titles_downloads table to idtitle

Example data for title_history table

```
 idtitle_history                 idtitle
            1                             160
            2                             210
            3                             345 
```

titles_downloads

```
 iddownloads                      idtitle_history
            1                              1
            2                              2
            3                              3 
```

I want to replace the idtitle in this table to 160, 210, 345 ...

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:04:00.363

尝试

```
update titles_downloads
inner join title_history 
on title_history.idtitle_history  = titles_downloads.idtitle_history 
set idtitle_history = title_history.idtitle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:04:32.723

尝试这个：

```
UPDATE titles_downloads td
JOIN title_history th ON td.iddownloads = th.iddownloads
SET th.iddownloads = td.idtitle 
```

# php - Is it possible to have function calls as parameter defaults in php?

> ID：11326713
> 
> 赞同：2
> 
> 时间：2012-07-04T09:57:22.243
> 
> 标签：php

In php, this can be done:

```
function foo( $var = "bar" ){
    echo $var;
}

foo();         // output : bar

foo("cheese"); // output : cheese 
```

I've tried to use a function instead like so:

```
function foo( $var = get_defined_vars() ){} 
```

Which returned a parse error:

```
Parse error: syntax error, unexpected '(', expecting ')' 
```

the obvious answer is the pass the variable like so

```
function foo( $var ){
    // do stuff
}

foo( get_defined_vars() ); 
```

however, the function is overloadable and can handle many params.

I usually use the function like:

```
foo( $var1, $var2, $var3 ... etc ); 
```

However I NEED the defined vars from the scope above the `foo` function, which means EVERYTIME I use the `foo` function I have to pass `get_defined_vars()`.

I find it pretty annoying how everytime I want to use this function I have to call `get_defined_vars();` Like so:

```
foo( get_defined_vars(), $var1, $var2, $var3 ... etc ); 
```

So PLEASE can anybody think of a way to over come this?

I tried this, also to no avail:

```
function foo(){
    $args = func_get_args();
    array_unshift( get_defined_vars() );
    call_user_func_array( "bar", $args );
}

function bar(){
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:59:09.773

No, you can't. Like for properties only static values and arrays are allowed. Even if, I would not recommend it, because it makes a function call unpredictable.

> The default value must be a constant expression, not (for example) a variable, a class member or a function call.
> 
> [http://php.net/functions.arguments#example-152](http://php.net/functions.arguments#example-152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:04:57.983

尝试以下方式：

```
function foo( $var1, $var2, $varForDefinedVars=null ){
  if (is_null($varForDefinedVars)){
     $varForDefinedVars = get_defined_vars();
  }
} 
```

# java - 如何修复我得到的 Base64 错误？

> ID：11326716
> 
> 赞同：0
> 
> 时间：2012-07-04T09:57:29.743
> 
> 标签：java, base64

在阅读了很多关于 AES、JCE 及其 256 位密钥的无限强度策略文件以及这个[Oracle/Sun 指南](http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html)之后，我已经实现了这一点。

**更新**

我结合sun提供的代码，做了一个java类AESencrp.java

```
/**
 *
 * @author MUDASSIR
 */

import java.security.*;
import javax.crypto.*;
import javax.crypto.spec.SecretKeySpec;
import sun.misc.*;

public class AESencrp {

     private static final String ALGO = "AES";
//    private static final byte[] keyValue = 
//        new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't',
//'S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

public static String encrypt(String Data, byte[] keyValue) throws Exception {
        Key key = generateKey(keyValue);
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.ENCRYPT_MODE, key);
        byte[] encVal = c.doFinal(Data.getBytes());
        String encryptedValue = new BASE64Encoder().encode(encVal);
        return encryptedValue;
    }

    public static String decrypt(String encryptedData, byte[] keyValue) throws Exception {
        Key key = generateKey(keyValue);
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.DECRYPT_MODE, key);
        byte[] decodedValue = new BASE64Decoder().decodeBuffer(encryptedData);
        byte[] decValue = c.doFinal(decodedValue);
        String decryptedValue = new String(decValue);
        return decryptedValue;
    }
    private static Key generateKey(byte[] keyValue) throws Exception {
        Key key = new SecretKeySpec(keyValue, ALGO);
        return key;
}

} 
```

这工作得很好，但是每当我构建我的项目时，它都会发出警告
“Base64encoder 是专有软件，必须在未来的版本中删除”。

当我移除 base64 编码器并改用 asHex 方法时（由[此处](http://java.sun.com/developer/technicalArticles/Security/AES/AES_v1.html)的太阳指南提供），它给了我一个 BadPadding 异常。
线程“主”javax.crypto.BadPaddingException 中的异常：给定最终块未正确填充

这是我没有 base64 编码器的代码

```
/**
 *
 * @author MUDASSIR
 */

import java.security.*;
import javax.crypto.*;
import javax.crypto.spec.SecretKeySpec;
import sun.misc.*;

public class AESencrp2 {

     private static final String ALGO = "AES";
//    private static final byte[] keyValue = 
//        new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't',
//'S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

     public static String asHex(byte buf[]) {
        StringBuilder strbuf = new StringBuilder(buf.length * 2);
        int i;

        for (i = 0; i < buf.length; i++) {
            if (((int) buf[i] & 0xff) < 0x10) {
                strbuf.append("0");
            }

            strbuf.append(Long.toString((int) buf[i] & 0xff, 16));
        }

        return strbuf.toString();
    }

public static String encrypt(String Data, byte[] keyValue) throws Exception {
        Key key = generateKey(keyValue);
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.ENCRYPT_MODE, key);
        byte[] encryptedValue = c.doFinal(Data.getBytes());
        return asHex(encryptedValue);
    }

    public static String decrypt(String encryptedData, byte[] keyValue) throws Exception {
        Key key = generateKey(keyValue);
        Cipher c = Cipher.getInstance(ALGO);
        c.init(Cipher.DECRYPT_MODE, key);
        byte[] decValue = c.doFinal(encryptedData.getBytes());
        String decryptedValue = new String(decValue);
        return decryptedValue;
    }
    private static Key generateKey(byte[] keyValue) throws Exception {
        Key key = new SecretKeySpec(keyValue, ALGO);
        return key;
}

} 
```

这是主要的，我在这里尝试代码

```
public static void main(String args[]) throws Exception {

        byte[] keyValue = new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't',
'S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };

        String password = "This is the data that is going to be encrypted";

        String passwordEnc = AESencrp.encrypt(password, keyValue);
        //String passwordEnc = AESencrp2.encrypt(password, keyValue);

        String passwordDec = AESencrp.decrypt(passwordEnc, keyValue);
        //String passwordDec = AESencrp.decrypt(passwordEnc, keyValue);

        System.out.println("Plain Text : " + password);
        System.out.println("Encrypted Text : " + passwordEnc);
        System.out.println("Decrypted Text : " + passwordDec);
} 
```

问题，

1.  1 - 如果我使用 base64 编码器，它是专有的。
2.  2 - 如果使用 sun 提供的 asHex 方法，我会得到错误的填充异常。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:25:25.847

您可以使用自己的 Base64 编码/解码例程来解决问题。

# facebook - FQL: How to get "likes a link" data

> ID：11326723
> 
> 赞同：1
> 
> 时间：2012-07-04T09:57:54.677
> 
> 标签：facebook, facebook-graph-api, facebook-fql

I am trying to get the posts on user's stream of type: " likes a link". I have the "read_stream" permissions and I can't see those kind of status updates.

I know about the "url_like" table (which gives the URL which the user liked), using this table I get the relevant posts I want. My problem is that the "url_like" table has only 2 fields (user_id, url) and I can't figure out how to get the DATA about this url (the post_id which got the LIKE)

The post_id will help me get the DATA about that post (same data which is displayed in the real facebook stream - showing the original post which the user liked)

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:40:26.633

据我了解，您想通过 fql 获取所有必需的数据。但我认为你应该像下面那样使用 Grap Api；

[喜欢信息](https://developers.facebook.com/tools/explorer/?method=GET&path=me/likes?fields=links)

有关 like 的详细信息，您应该使用以下链接中的 EDGE 模块；

[详细点赞信息](https://developers.facebook.com/tools/explorer/?method=GET&path=me/likes?fields=posts)

您应该将该前缀注入您的代码中，例如（例如 PHP）

// 获取用户 ID
$user = $facebook->getUser();
    if ($user) {
       try {
          // 继续知道您有一个已登录的用户，该用户已通过身份验证。
          $user_profile = $facebook->api('/me/likes');
       } 捕捉 (FacebookApiException $e) {
           error_log($e);
           $用户=空；
       }
}

看看结果如何。

```
<?php  #print_r($user_profile); ?> 
```

# c# - 关于 DatasourceId 和 DataSource 的查询

> ID：11326728
> 
> 赞同：0
> 
> 时间：2012-07-04T09:58:29.630
> 
> 标签：c#, visual-studio-2010, linq-to-sql, dynamic-data

有两张桌子

```
EmpInf
    EmpId,
    EmpName,
    Salary,
    DepartNumber.

Dept
    DeptNo,
    Deptname, 
```

我有一个`linqdatasource control`比如

```
<asp:LinqDataSource ID="LinqDataSource1" runat="server" EntityTypeName="" 
    ContextTypeName="FilterControl.DataClasses1DataContext" EnableDelete="True" 
    EnableInsert="True" EnableUpdate="True" OrderBy="DeptName"  
    TableName="Dept1s" Select="new (DeptNo, DeptName)">
</asp:LinqDataSource> 
```

一种`listview`

```
<asp:ListView ID="ListView1" runat="server" DataSourceID="LinqDataSource1"
   style="z-index: 1; left: 10px; top: 34px; position: absolute; height: 63px; width: 293px" 
    >
    <AlternatingItemTemplate>
        <tr style="">
            <td>
                <asp:DynamicControl runat="server" DataField="DeptNo" Mode="ReadOnly" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptName" Mode="ReadOnly" />
            </td>
        </tr>
    </AlternatingItemTemplate>
    <EditItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="UpdateButton" runat="server" CommandName="Update" 
                    Text="Update" />
                <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                    Text="Cancel" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptNo" Mode="Edit" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptName" Mode="Edit" />
            </td>
        </tr>
    </EditItemTemplate>
    <EmptyDataTemplate>
        <table runat="server" style="">
            <tr>
                <td>
                    No data was returned.</td>
            </tr>
        </table>
    </EmptyDataTemplate>
    <InsertItemTemplate>
        <tr style="">
            <td>
                <asp:Button ID="InsertButton" runat="server" CommandName="Insert" Text="Insert" 
                    ValidationGroup="Insert" />
                <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                    Text="Clear" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptNo" Mode="Insert" 
                    ValidationGroup="Insert" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptName" Mode="Insert" 
                    ValidationGroup="Insert" />
            </td>
        </tr>
    </InsertItemTemplate>
    <ItemTemplate>
        <tr style="">
            <td>
                <asp:DynamicControl runat="server" DataField="DeptNo" Mode="ReadOnly" />
            </td>
            <td>
                <asp:DynamicControl runat="server" DataField="DeptName" Mode="ReadOnly" />
            </td>
        </tr>
    </ItemTemplate> 
```

并尝试通过`listview`动态数据来实现这一点，并使用了`dynamic data manager control`

```
<asp:DynamicDataManager ID="DynamicDataManager1" runat="server" >
<DataControls>
<asp:DataControlReference ControlID="ListView1" />
</DataControls>
</asp:DynamicDataManager> 
```

我拿了一个`dropdownlist`，它绑定到`EmpInf.Empname`，当我从下拉列表中选择特定的员工姓名时，我想绑定部门名称。

在后端

```
FilterControl.DataClasses1DataContext obj = new DataClasses1DataContext();
        protected void DropDownList1_SelectedIndexChanged1(object sender, EventArgs e)
        {

            var a = from r in obj.EmpInfs
                    join s in obj.Dept1s on r.DeptNumber equals s.DeptNo 
                    where r.EmpName ==  DropDownList1.SelectedValue  
                    select s.DeptName;

            ListView1.DataSource = a;
            ListView1.DataBind();

        } 
```

在运行时，它会抛出一个异常，它会在执行过程中显示任何一个使用`DataSourceID="LinqDataSource1" or use the datasource a the back end. remove one of them.`，因此在此过程中不会返回任何内容。我该如何运行，需要建议。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:20:18.937

解决此问题的一种方法是从 ListView 控件中删除 DataSourceID 并将数据绑定到 page_load

```
protected void Page_Load(object sender, EventArgs e)
{

   if(!Page.IsPostBack)
   {
      //Bind datasource to ListView here
   }
} 
```

现在一切都应该正常了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:12:05.650

FilterControl.DataClasses1DataContext obj = new DataClasses1DataContext(); protected void DropDownList1_SelectedIndexChanged1（对象发送者，EventArgs e）{

```
 var a = from r in obj.EmpInfs
                join s in obj.Dept1s on r.DeptNumber equals s.DeptNo 
                where r.EmpName ==  DropDownList1.SelectedValue  
                select s;

        listview1.DatasourceId=null;
        ListView1.DataSource = a;
        ListView1.DataBind();

    } 
```

也可以通过`listview.DatasourceId=null`上面的代码来解决

# javascript - 用变量属性名构造 JS 对象的简写方法

> ID：11326729
> 
> 赞同：4
> 
> 时间：2012-07-04T09:58:31.747
> 
> 标签：javascript, backbone.js, javascript-objects

有没有一种简写的方法来创建一个带有属性字段变量的对象？

假设我有变量`PROP.Todo.PRIORITY = 'priority'`，然后在这个例子中使用[Backbone](http://backbonejs.org)，我想[保存](http://backbonejs.org/#Model-save)这个属性，我怎样才能避免创建一个新对象，将它分配给某个变量然后设置属性？

我想实现这一点：

```
var tmpObj = {};
tmpObj[PROP.Todo.PRIORITY] = "high";
this.model.save(tmpObj); 
```

我尝试过这样的事情，但没有成功：

```
this.model.save(({}[PROP.Todo.PRIORITY] = "high")); 
```

有什么建议么？否则我会写很多长篇的对象声明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:05:55.227

如果你只保存一个参数，`Model.save`有另一种接收参数的方式，`(key,value,options)`

[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

> **save** *model.save([attributes], [options])*
> [...] 与 set 一样，您可以传递单个键和值而不是散列。[...]

这意味着您可以将示例编写为

```
this.model.save(PROP.Todo.PRIORITY, "high"); 
```

如果要同时保存多个属性，则必须编写一个临时对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:06:41.443

如果您只是想要一种更简单的方法来创建对象，那么使用辅助函数怎么样？

```
function obj(prop, value) {
  var o = {};
  o[prop] = value;
  return o;
}

this.model.save(obj(PROP.Todo.PRIORITY, "high")); 
```

我不确定我是否理解您问题的后半部分：

> 否则我将创建很多临时对象。

无论如何，您都必须创建一个对象，我怀疑创建对象是一个性能问题。

# mysql - default mysql.sock

> ID：11326732
> 
> 赞同：0
> 
> 时间：2012-07-04T09:58:46.090
> 
> 标签：mysql, sockets, mysqldump, serversocket

I'm using mysql and mysqldump and I'm using MAMP.

I have to put --socket=/Applications/MAMP/tmp/mysql/mysql.sock in every CLA mysql commands

How can I use mysql command in CLI without using that boring line (--socket=/Applications/MAMP/tmp/mysql/mysql.sock) ?

Ho yes, I'm on OSX.

Thanks to read me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:00:52.407

搜索您的 my.conf 文件，并检查其中的套接字路径：

```
...
[mysqld]
socket=/path/to/socket
... 
```

（首先点击“mysql config socket path”[谷歌搜索](https://www.google.fr/search?sourceid=chrome&client=ubuntu&channel=cs&ie=UTF-8&q=mysql%20config%20socket%20path)）

# php - 如何将电子邮件发送到从数据库中获取的包含其他数据的电子邮件数组

> ID：11326733
> 
> 赞同：0
> 
> 时间：2012-07-04T09:58:49.397
> 
> 标签：php, mysql, phpmailer

我一直在使用 phpmailer 发送批量电子邮件时遇到问题，但一封电子邮件没有问题。

这是我的代码：

```
$result = mysql_query("select * from $to",$conn) or die("list 
            selected  ($to) does not exist ".mysql_error());

while ($row = mysql_fetch_array($result))
{           
    $email[] = $row['email'];           
    $student[] = $row['name'];
}

foreach ($email as $val => $uemail) {
    $email = $uemail;
    $students= $student[$val] ;

    require("class.phpmailer.php");
        $mail = new PHPMailer(true); 

    try {
           $mail->AddReplyTo('info@bratim.com', 'My Name');
           $mail->AddAddress("$email", "$student");
           $mail->SetFrom('info@me.com', 'MyName');
           $mail->AddReplyTo('info@me.com', 'My nameg');
           $mail->Subject = "$sub";

           $mail->MsgHTML("Dear $student<br> $msg <br>
             <img src=\"$path\"> <p>

             $host_upper
            ______________________________________________________
            THIS IS AN AUTOMATED RESPONSE. 
            ***DO NOT RESPOND TO THIS EMAIL****

             ");
            $mail->AddAttachment("$path2");      // attachment

          $mail->Send();
          echo "Message Sent OK to $email  </p>\n";
    } catch (phpmailerException $e) {
        echo $e->errorMessage(); //Pretty error messages from PHPMailer
    } catch (Exception $e) {
        echo $e->getMessage(); //Boring error messages from anything else!
    } 
} 
```

任何帮助，建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:03:44.923

您可以在 while 循环内发送邮件：

```
<?php
require_once("class.phpmailer.php");

$result = mysql_query('SELECT `email`, `student`, `data1` FROM `students` ORDER BY `email` ASC;');

while ( $row = mysql_fetch_assoc($result) )
{
    $current_mail = new PHPMailer(true);

    $current_mail->AddReplyTo('info@bratim.com', 'My Name');
    // ....
    $current_mail->Send();
    unset($current_mail);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:08:08.067

您分配`$student[$val]`到`$students`foreach 内部，然后将数组分配`$student`给您的 phpmailer 对象：

```
$mail->AddAddress("$email", "$student"); 
```

不应该

```
 $mail->AddAddress("$email", "$students"); 
```

除此之外，为您必须发送的每封电子邮件实例化一个新的邮件程序对象是一种不好的做法，您应该只在动态变量上循环，`AddAddress`并将所有其他变量保留在外部以避免过载，并记住清除将更改的变量，像这样`AddAddress`，像这样：

```
require_once("class.phpmailer.php");
$result = mysql_query("select * from $to",$conn) or die("list selected  ($to) does not exist ".mysql_error());

          while ($row = mysql_fetch_array($result))
    {

        $email[] = $row['email'];

        $student[] = $row['name'];
    }

$mail = new PHPMailer(true); 
try {
            $mail->AddReplyTo('info@bratim.com', 'My Name');
            $mail->SetFrom('info@me.com', 'MyName');
            $mail->AddReplyTo('info@me.com', 'My nameg');
            $mail->Subject = "$sub";
            $mail->AddAttachment("$path2"); 
            foreach ($email as $val => $uemail) {
                $email = $uemail;
                $students= $student[$val] ;

                $mail->AddAddress("$email", "$students");
                $mail->MsgHTML("Dear $student<br> $msg <br>
                <img src=\"$path\"> <p>

             $host_upper
            ______________________________________________________
            THIS IS AN AUTOMATED RESPONSE. 
            ***DO NOT RESPOND TO THIS EMAIL****

             ");
              $mail->Send();
              $mail->ClearAddresses();
            echo "Message Sent OK to $email  </p>\n";
              }
            } catch (phpmailerException $e) {
        echo $e->errorMessage(); //Pretty error messages from PHPMailer
           } catch (Exception $e) {
          echo $e->getMessage(); //Boring error messages from anything else!
             } 
            } 
```

# python - 如何以某种pythonic方式将列表中的所有字符串截断为相同的长度？

> ID：11326737
> 
> 赞同：13
> 
> 时间：2012-07-04T09:58:59.883
> 
> 标签：python

假设我们有一个列表，例如：

```
g = ["123456789123456789123456", 
     "1234567894678945678978998879879898798797", 
     "6546546564656565656565655656565655656"] 
```

我需要每个元素的前十二个字符：

```
["123456789123", 
 "123456789467", 
 "654654656465"] 
```

好的，我可以在 for 循环中构建第二个列表，如下所示：

```
g2 = []
for elem in g:
    g2.append(elem[:12]) 
```

但我很确定有更好的方法，现在无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-04T10:00:21.990

使用列表推导：

```
g2 = [elem[:12] for elem in g] 
```

如果您更喜欢`g`就地编辑，请使用带有生成器表达式的切片赋值语法：

```
g[:] = (elem[:12] for elem in g) 
```

演示：

```
>>> g = ['abc', 'defg', 'lolololol']
>>> g[:] = (elem[:2] for elem in g)
>>> g
['ab', 'de', 'lo'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T10:00:39.917

使用列表推导：

```
[elem[:12] for elem in g] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-04T10:46:36.743

另一种选择是使用`map(...)`：

```
b = map(lambda x: x[:9],g) 
```

# android - 应用程序兼容手机和平板电脑

> ID：11326746
> 
> 赞同：0
> 
> 时间：2012-07-04T09:59:17.733
> 
> 标签：android, android-version, android-compatibility

我想让一个应用程序兼容手机和平板电脑。请建议我该怎么做？我需要制作两个单独的应用程序还是一个应用程序可以解决我的目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:07:06.823

默认情况下，所有应用程序都兼容所有形状和大小（唯一的限制是 API 级别）。应用程序将根据屏幕大小自动调整大小 - 是否正确是另一回事。

您可以（并且应该）重新设计应用程序，使其在所有设备上都能正确显示。这意味着利用 Android 使用的特定文件夹结构：Android 开发指南上有大量关于该主题的信息，网址为

*   [http://developer.android.com/guide/practices/compatibility.html](http://developer.android.com/guide/practices/compatibility.html)
*   [http://developer.android.com/guide/practices/tablets-and-handsets.html](http://developer.android.com/guide/practices/tablets-and-handsets.html)
*   [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

但是，无需制作单独的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:04:40.767

[你可以在这里](http://developer.android.com/guide/practices/screens_support.html)看到你想要的 android 开发者部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:06:30.347

这个问题有点笼统。但这里有几点：

1.  Android 提供了足够的机制来处理具有不同操作系统、大小和功能的设备。

2.  从操作系统的角度来看，确保 API 在旧版本中可用，如果不可用，Android 确实提供了兼容性/支持 JAR 来解决这个问题。

3.  从大小的角度来看，您需要确保为小、中、大和超大 dpi 创建资源（尤其是图像）。您还需要确保为适当的大小创建布局，以便就可用性而言，您的应用程序以最佳方式呈现。

这些只是一些要点，但希望它们能让您预览需要考虑的各个领域。

# php - Magento 不运行 Sql 设置脚本

> ID：11326747
> 
> 赞同：0
> 
> 时间：2012-07-04T09:59:18.543
> 
> 标签：php, magento

Magento 没有运行我的模块的安装程序脚本。但是安装脚本版本正在添加到`core_resource`表中。这是我的文件

config.xml 的一部分

```
 <config>
        <modules>
            <Company_Brands>
                <version>1.0.0</version>
            </Company_Brands>
        </modules>
        <global>
            <models>
                <brands>
                    <class>Company_Brands_Model</class>
                    <resourceModel>brands_mysql4</resourceModel>
                </brands>
                <brands_mysql4>
                    <class>Company_Brands_Model_Mysql4</class>              
                </brands_mysql4>
            </models>

        <resources>
            <brands_setup>
                <setup>
                    <module>Company_Brands</module>
                    <class>Company_Brands_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </brands_setup>
            <brands_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </brands_read>
            <brands_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </brands_write>
        </resources>
</global>
</config> 
```

应用程序/代码/本地/公司/品牌/sql/brands_setup/mysql4-install-1.0.0.php

```
$installer = $this;
$installer->startSetup();

$data = array(
    'label' => 'Brands',
    'type' => 'select'
    'input' => 'text',
    'global'=> Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'required'=>false,
    'is_configurable'=>true,
    'compareble'=>true,
    'filterable' =>true,
    'searchable'=>true
);

$installer->addAttribute('catalog_product','some_brands',$data);

$installer->endSetup(); 
```

app/code/local/Company/Brands/Model/Mysql4/Setup.php

```
class Company_Brands_Model_Mysql4_Setup extends Mage_Eav_Model_Entity_Setup
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:02:13.093

感谢大家的建议。

`,`失踪后`'select'`

```
$data = array(
    'label' => 'Brands',
    'type' => 'select'
    'input' => 'text', 
```

它应该是

```
$data = array(
        'label' => 'Brands',
        'type' => 'select',
        'input' => 'text', 
```

# python - My url patterns in urls.py in Django do not match

> ID：11326748
> 
> 赞同：-1
> 
> 时间：2012-07-04T09:59:25.037
> 
> 标签：python, django, linux, ubuntu

This is my views.py file

```
#!/usr/bin/python 

from django.template import Context, loader, RequestContext
from django.http import HttpResponse
from skey import find_root_tags, count, sorting_list
from search.models import Keywords
#from django.shortcuts import render_to_response as rr

def front_page(request):

    if request.method == 'POST' :
        str1 = request.POST['word'] 
        fo = open("xml.txt","r")
        for i in range(count.__len__()):

             file = fo.readline()
             file = file.rstrip('\n')
             find_root_tags(file,str1,i)    

             list.append((file,count[i]))

             sorting_list(list)

        for name, count in list:
            s = Keywords(file_name=name,frequency_count=count)
            s.save()

        fo.close()
        return HttpResponseRedirect('/results/')

    else :  
        str1 = ''
        list = []
        template = loader.get_template('search/search.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response)

def results(request):

    list1 = Keywords.objects.all()
    t = loader.get_template('search/results.html')
    c = Context({'list1':list1,
    })

    return HttpResponse(t.render(c)) 
```

this is my results.html(which is stored in /home/pooja/Desktop/my_templates/search/results.html, (here search is my app name) :

```
<html>
<body bgcolor = "#9ACD32">
<style type="text/css">
    h1 {
         position: absolute;
         top:   200px;
         left:  480px;
       }    

form #Edit1 { position: relative; 
              top: 245px; 
              left:   480px; 
            }

form #Edit2 { position: relative; 
              top:    220px; 
              left:   680px; 
            }
</style>
<font size="5" face="arial" color="#0000FF">
<h1>Search Page</h1>
</font>
<hr/>
<br/>
<br/>
<Form Method ="POST">
<div id="Edit1">
<INPUT TYPE = 'text'  name ='word' VALUE ="">
</div>
<div id="Edit2">
<INPUT TYPE = "Submit" VALUE = "Search">
</div>
</FORM>
</body>
</html> 
```

When I ran this app on server, the search.html page was coming and as I entered some word say 'book' it gave me this error:

```
Using the URLconf defined in mysite.urls, Django tried these URL patterns,in this order:
^search/$
^admin/
The current URL, front_page/, didn't match any of these. 
```

Why has this happened? I have my all the skey.py, xml documents and xml.txt stored in search app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:02:34.623

表单上的操作是`/front_page/`。如果您希望它转到当前 URL，那么您应该`action`完全省略该属性。

# ios - How can I wire up IBOutlets to a custom UIView?

> ID：11326752
> 
> 赞同：2
> 
> 时间：2012-07-04T09:59:40.503
> 
> 标签：ios, cocoa-touch, uiview, xib, iboutlet

I have a view controller with generic interface elements that needs to load in a menu view. I have created a custom UIView called `MenuView.h` and `MenuView.m` and built all the views in it using code. However, I'd much rather set out the views in a .xib file so that I can lay them out more easily.

I do know about the whole `loadNibNamed` in order to load a nib/xib file into my custom UIView, however what I don't understand is how I can wire up some IBOutlets to the loaded nib.

Does anyone have any pointers to how this is done please?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:23:49.280

去做这个：

1.  创建xib。
2.  ***将文件的所有者设置***为您想要充当控制器的类（通常是`UIViewContoller`子类 - 尽管在 iOs5 之前，Apple 不建议`UIViewController`在屏幕上有多个控制器时使用）。（此步骤是使此类在 xib 中可见，以便您可以创建您的插座）。
3.  `IBOutlet/IBAction`在此类中为您的自定义视图创建。
4.  并在调用时`loadNibNamed:owner:option:`，将所有者作为此类的对象。

IE

```
UIView *view = [[[NSBundle mainBundle] loadNibNamed:@"CustomXib" owner:<customClassobject> option:nil] objectAtIndex:0]; 
```

并在某处使用它：

```
[someView addSubview:view] 
```

另一种方法是创建自定义视图控制器并使用视图控制器访问视图。

*   重复上述步骤 1-3，将自定义视图控制器（比如 MyViewCon）作为文件的所有者。您还必须将控制器的视图引用连接到 xib 视图。

然后不使用`loadNibNamed...`，而是初始化视图控制器。IE

```
MyViewCon *myVC = [[MyViewCon alloc] initWithNibName:@"CustomXib"]; 
```

然后无论您必须使用视图使用`myVC.view`. 例如，

```
 [someview addSubview: myVC.view]; 
```

**更新**：

如果您为`UIViewController`子视图和父视图使用与文件所有者相同的子类，您应该意识到这将是同一类的两个不同对象，并且可能会导致混淆，因为在同一变量中执行操作时可能会显示不同的值场景。

有关场景的多个控制器的设计角度的更多信息，请参阅[此处](https://stackoverflow.com/questions/2423858/multiple-view-controllers-on-screen-at-once)。

# android - 我的交换两个视图背景的代码不起作用

> ID：11326755
> 
> 赞同：2
> 
> 时间：2012-07-04T09:59:47.850
> 
> 标签：android, view, background, imageview, swap

我有 20 个带有背景图像集的图像视图。

当用户点击一张图片然后点击第二张图片时，我希望这两个

imageviews 可以交换它们的图像背景。

使用我构建的代码，我知道只有点击的第一张图片会更新他的背景。

```

`private View z; //view for temporary save the first clicked image
public ImageView[] images = new ImageView[20]; //array with my imageviews

public void onClick(View v) {

if (attivo == false) {
   attivo = true;
   z = v;  }   //save the clicked view to a temporary one
else { 

//we enter here when we click on the second image           
//this cycles search inside the array which imageview 
//has the same ID of the saved one or the new one (the first/second image clicked)    
    for (int h = 0; h<20; h++) {
        if (images[h].getId()== z.getId()) {
           images[h].setBackgroundDrawable(v.getBackground());}
                    }
    for (int h = 0; h<20; h++) {
        if (images[h].getId()== v.getId()) {
       images[h].setBackgroundDrawable(z.getBackground());}
                           }
    attivo = false; 
    }
}` 

第一个周期有效！将第二个背景设置为单击的第一个 imageview。

第二个循环，即使执行了命令，也不行！背景始终是原始的。

我知道我可以通过一些不同的方式来做到这一点，比如使用 src 而不是背景，或者

网格视图。但请我想知道为什么这段代码不能完全工作。

            回答 #1

赞同：2

时间：2012-07-04T10:05:18.700

最好的解决方案应该将您的后台资源存储在两个变量中：

```
Drawable d1 = v1.getBackgound();
Drawable d2 = v2.getBackgound(); 
```

然后将您的背景可绘制对象设置为引用该变量：

在一种情况下：

```
 images[h].setBackgroundDrawable(d1);
 images[h].setBackgroundDrawable(d2); 
```

反之亦然：

```
 images[h].setBackgroundDrawable(d2);
 images[h].setBackgroundDrawable(d1); 
```

```

# amazon-dynamodb - amazon dynamodb through rest api

> ID：11326756
> 
> 赞同：3
> 
> 时间：2012-07-04T10:00:00.147
> 
> 标签：amazon-dynamodb

which are the required headers we need to send in the header using dynamodb rest api

```
'x-amz-date': 'Mon, 16 Jan 2012 17:50:52 GMT',
'x-amzn-authorization': 'AWS3 AWSAccessKeyId=TemporaryAccessKeyID,Algorithm=HmacSHA256,SignedHeaders=Host;x-amz-date;x-amz-target;x-amz-security-token,Signature=*Signature Value*=',
'Date': 'Mon, 31 Oct 2011 17:49:52 GMT',
'x-amz-target': 'DynamoDB_20111205.GetItem',
'x-amz-security-token': '*Token Value*',
'Content-Type': 'application/x-amz-json-1.0',
'Content-Length': '135',
'Connection': 'Keep-Alive',
'User-Agent': 'aws-sdk-java/1.2.10 Windows_7/6.1 Java_HotSpot(TM)_64-Bit_Server_VM/20.2-b06',
} 
```

can i know what are all the required parameters we need to pass through http rest api for dynamo ... I need to fetch the data from dynamodb database??? can anyone suggest what are required headers [link](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/UsingJSON.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T16:29:55.450

问这个问题还不到一年，所以我希望现在回答还为时不晚。:-)

找出需要哪个 HTTP 标头字段的最佳方法之一是使用 AWS 开发工具包。AWS 推荐这种方法。（根据@AWS 人的论坛帖子）您可以：

1.  为 AWS 的包（例如 com.amazonaws）和可选的 Apache HTTP 客户端（例如 org.apache.http）启用 DEBUG 日志以查看。一种直接配置 log4j 的方法。就个人而言，我使用 slf4j-over-jcl 然后配置 logback.xml
2.  写一个请求DynamoDB的简单程序，确保结果正确，查看日志

例如，在 ListTables 请求中，使用了以下 Headers：

*   内容长度
*   内容类型
*   主持人
*   用户代理
*   X-Amz-日期
*   X-Amz-目标

请注意，HTTP 标头应大写。日志还显示转换为小写的签名。“Content-Length”和“User-Agent”是可选的，其他字段是必需的。如果您不喜欢“x-amz-json-1.0”，“Content-Type”可以是“application/json”。

在我看来，实现我们自己的 REST 客户端有两个棘手的部分，一个是正确的签名，另一个是正确的标题。对于签名部分，AWS 提供了一个测试套件，允许我们验证我们的签名实施。

# c# - WCF 还是普通的旧 HttpWebRequest 与 JSP 通信？

> ID：11326759
> 
> 赞同：0
> 
> 时间：2012-07-04T10:00:05.877
> 
> 标签：c#, .net, wcf, httpwebrequest

我们有一个用 Java 编写的基于 Web 的第三方内容管理系统。它有一个 SDK，一组 JSP 调用，您可以调用它们返回 XML。现在我必须在 .NET 中编写一个包装器，它将进行这些调用并返回对象来代替 XML。这将是一个 dll，可以像任何其他外部 dll 一样添加到 .NET 项目中。

我想知道的是，它可以使用 WCF 来完成，这不会是一个服务顺便说一句，还是我对普通的 HttpWebRequest 很好？如果是，那么请指点我可以开始的地方。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:18:02.027

当我得到正确的 jsp 是 Web 服务时，对吗？应该没有问题。

根据具有不同类型源的工作 WCF，您应该查看下一篇文章：

*   [互操作性和集成](http://msdn.microsoft.com/en-us/library/ms730017)
*   [创建 WS-I Basic Profile 1.1 可互操作服务](http://msdn.microsoft.com/en-us/library/ms733080.aspx)

您可以查看[Sun 的 Project Tango](http://java.sun.com/developer/technicalArticles/glassfish/ProjectTango/)，但它与复杂的解决方案有关。

# objective-c - 在类之间传递数据

> ID：11326761
> 
> 赞同：4
> 
> 时间：2012-07-04T10:00:08.473
> 
> 标签：objective-c, cocoa

我开发了一个问答游戏，一切运行良好，但有一点我想改进：我的问题是我有 3 个视图控制器。在第一个视图控制器中，用户选择单人或多人模式。

第二个 ViewController 是问答游戏。但是现在在第三个 ViewController（结果屏幕）中，我需要知道用户是选择单人模式还是多人模式。

我不知道如何将这个布尔值从 ViewController 1 传递给 ViewController 3。

目前，我在每个 ViewController 中都有一个布尔值，只需将此变量从 View1 传递给 View2，然后再传递给 View3。但我不喜欢这个解决方案。有没有办法和代表一起解决这个问题？或者您知道其他更好的解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:12:34.027

模型-视图-控制器方法表明布尔值属于应用程序的模型代码。使您的模型成为*单例*是很常见的事情：

测验模型.h

```
@interface QuizModel : NSObject
@property (nonatomic, readwrite) BOOL isMultiplayer;
-(id)init;
+(QuizModel*)instance;
@end 
```

测验模型.m

```
static QuizModel* inst = nil;

@implementation QuizModel
@synthesize isMultiplayer;
-(id)init {
    if(self=[super init]) {
        self.isMultiplayer = NO;
    }
    return self;
}
+(QuizModel*)instance {
    if (!inst) inst = [[QuizModel alloc] init];
    return inst;
}
@end 
```

现在您可以在控制器代码中使用布尔值： include`"QuizModel.h"`和 write

```
if ([QuizModel instance].isMultiplayer) 
```

或者

```
[QuizModel instance].isMultiplayer = YES; 
```

# java - 串行 GC 对远程应用程序的影响？

> ID：11326770
> 
> 赞同：1
> 
> 时间：2012-07-04T10:00:38.243
> 
> 标签：java, garbage-collection

所以我有一个 RESTful 应用程序，内存中有大量短暂的复杂对象。当 GC 决定运行时，它会运行数百毫秒。这是否意味着如果客户端在我的 JVM 正在 GCing 时尝试发出 HTTP 请求，客户端会收到错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:24:45.173

不，客户端不会收到错误。如果只需要几百毫秒，其余调用就不会超时。此外，除非与应用程序服务器有关，否则您在 JVM 上运行服务应该能够响应服务调用。

如果应用程序服务器受 CPU 限制并且已经在努力响应所有请求，那么额外的延迟可能会导致超时，但这更多地表明应用程序服务器性能不佳，而不是垃圾收集本身。

# iphone - 如何将下载的小部件添加到 Xcode 中的对象框

> ID：11326774
> 
> 赞同：1
> 
> 时间：2012-07-04T10:00:43.747
> 
> 标签：iphone, objective-c, ios, xcode

我正在编写我的第一个 iPhone 应用程序。我需要一个自定义开关（我希望它说“男/女”而不是“开/关”），我找到[了 RCSwitch](http://osiris.laya.com/projects/rcswitch/)，但我无法弄清楚如何将下载的小部件集成到我的项目中。我认为这是一件相当常见的事情，但我似乎无法在网上找到任何关于如何使用下载的小部件/类的文档。

我已成功通过 Build Phases -> Link Binary with Libraries 添加代码。一个 RCSwitch 目录出现在我的项目树中，如果我进行比较，我会看到它已将与 RCSwitch 相关的代码添加到头文件中。

问题是将小部件放到 .storyboard 图像上。RCSwitch 小部件本身不会出现在“对象”框中——默认情况下位于屏幕右下角的框包含可以拖到情节提要中的小部件图像。也许我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:47:07.270

来自[xcode 4 过渡指南](http://developer.apple.com/library/ios/documentation/IDEs/Conceptual/Xcode4TransitionGuide/Xcode4TransitionGuide.pdf#page65)（第 65 页）：

> 将**自定义视图对象**从库中拖到 nib 文件中。将自定义视图添加到 nib 后，选择自定义视图并在身份检查器中自定义类下的类字段中为其分配正确的类

更多资源：

[iphone-creating-custom-objects-for-interface-builder](https://stackoverflow.com/questions/4411208/iphone-creating-custom-objects-for-interface-builder)

[Interface Builder 帮助 - 自定义对象](http://developer.apple.com/library/mac/ipad/#recipes/xcode_help-interface_builder/CustomObject.html)

# android - SherlockActionBar 半透明

> ID：11326776
> 
> 赞同：0
> 
> 时间：2012-07-04T10:00:54.627
> 
> 标签：android, transparency, actionbarsherlock

是否可以使 SherlockActionBar 半透明，而无需为其分配背景可绘制对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:08:36.277

您可以使用`requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);`它使其类似透明，但它是一个浮动的 ActionBar，内容可以在它后面。

# javascript - 带有 on 的事件附加不会解除绑定

> ID：11326779
> 
> 赞同：4
> 
> 时间：2012-07-04T10:01:04.590
> 
> 标签：javascript, jquery

我正在`.html`使用 jquery`load()`函数加载文件。我正在加载的 html 文件

包含一些脚本，在该脚本中`keydown event`与文档绑定，

喜欢： `$(document).on("keydown", handler);`。现在在`load()`我的回调中

试图解除绑定`keydown event`，`$(document).off("keydown");`但事件没有解除绑定。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:30:48.790

尝试：

```
 $(document).unbind("keydown"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:16:53.117

您可以考虑使用`bind`and`trigger`来附加和触发事件，而不是`on`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T10:22:13.277

尝试使用这个：

```
$(document).off("keydown", "*"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T10:13:49.640

尝试像这样取消绑定事件：

```
$('#foo').unbind(); 
```

# data-structures - WinRT/WPF - 在没有 TreeView 或 HeirarchicalDataTemplate 的情况下显示递归数据

> ID：11326781
> 
> 赞同：1
> 
> 时间：2012-07-04T10:01:13.490
> 
> 标签：data-structures, recursion, windows-8, microsoft-metro, windows-runtime

所以在 Windows 8 Metro（使用 C#/WinRT）中，我的数据结构如下：

```
public class Comment
{
    public string body;
    public List<Comment> replies;
} 
```

并且想在页面上显示它，但以前的方法现在在 WinRT 中不可用（TreeView 和 HeirarchicalDataTemplate）。在 Windows 8 中，无论如何现在都可以这样做吗？非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:29:12.797

除了实现 TreeView 控件或寻找已经实现的控件之外，您还可以拥有一个带有 ListView 的 Frame，它的 ItemsSource 绑定到 Comments 列表。您可以通过以下方式连接 ListView，即点击评论将导航到 Frame 中的另一个 Page，其中包含 ListView 和绑定到它的回复列表。后退按钮将导航回框架中，让您返回页面以获取父评论。

编辑*

WinRT XAML Toolkit`TreeView`现在有一个控件。检查出来：[http ://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/b0ee76bd6492#WinRTXamlToolkit/Controls/TreeView/TreeView.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/b0ee76bd6492#WinRTXamlToolkit/Controls/TreeView/TreeView.cs)

不过要小心 - 这只是 Silverlight Toolkit 的一个粗略移植，可能效果不佳。此外，如果您计划将其作为 Windows 应用商店应用程序的一部分发布 - 您将需要对其进行大量重新设计，除非您的应用程序仅适用于桌面，因为它不是很适合触控。

# java - 访问 SecurityContextHolderAwareRequestWrapper 实例？

> ID：11326782
> 
> 赞同：2
> 
> 时间：2012-07-04T10:01:14.297
> 
> 标签：java, spring, spring-security

我在 Vaadin 应用程序中使用 Spring 和 Spring-Security。

我想使用[SecurityContextHolderAwareRequestWrapper.isUserInRole(...)](http://static.springsource.org/spring-security/site/apidocs/org/springframework/security/web/servletapi/SecurityContextHolderAwareRequestWrapper.html#isUserInRole%28java.lang.String%29)检查用户是否具有特定角色，但无法弄清楚如何获取对包装器的引用（我尝试使用 @Autowired 注入它，注意：我没有手动配置实例我相信 DelegatingFilterProxy 已经在幕后这样做了）。

[这个](https://stackoverflow.com/questions/3021200/how-to-check-hasrole-in-java-code-with-spring-security)堆栈溢出问题为我提供了解决方案，但我无法发现如何正确访问或实例化包装器。

我的另一种选择是直接访问 SecurityContext 并根据链接的 SO 问题中的其他建议通过 GrantedAuthorities 进行迭代。

我应该如何访问/实例化包装器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T10:47:09.047

它应该开箱即用，至少在 Spring Security 3.1`HttpServletRequest`中（安全链中的每个都应该是 的实例`SecurityContextHolderAwareRequestWrapper`）。

[`servlet-api-provision``<http>`元素的属性](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http-servlet-api-provision)添加到堆栈：

> 提供 HttpServletRequest 安全方法的版本，例如 isUserInRole() 和 getPrincipal()，它们是通过将 SecurityContextHolderAwareRequestFilter bean 添加到堆栈来实现的。默认为真。

过滤器很简单，`SecurityContextHolderAwareRequestFilter`只包含：`HttpServletRequest``SecurityContextHolderAwareRequestWrapper`

```
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)
        throws IOException, ServletException {
    chain.doFilter(new SecurityContextHolderAwareRequestWrapper(
            (HttpServletRequest) req, rolePrefix), res);
} 
```

（注意[错误 #SEC-1943](https://jira.springsource.org/browse/SEC-1943) - 过滤器分配给别名的名称错误`SERVLET_API_SUPPORT_FILTER`。）

# objective-c - 多个 GLKview 快照导致崩溃。内存问题？

> ID：11326785
> 
> 赞同：0
> 
> 时间：2012-07-04T10:01:22.273
> 
> 标签：objective-c, ios, opengl-es, glkit

我的目标是用一小段 opengl 帧（大约 200 帧）制作视频。所以为了做到这一点，我使用下面的代码来创建一个图像数组：

```
NSMutableArray* images = [NSMutableArray array];
KTEngine* engine = [KTEngine sharedInstance]; //Opengl - based engine

for (unsigned int i = engine.animationContext.unitStart; i < engine.animationContext.unitEnd ; ++i)
{
    NSLog(@"Render Image %d", i);
    [engine.animationContext update:i];
    [self.view setNeedsDisplay];
    [images addObject:[view snapshot]];
}

NSLog(@"Total image rendered %d", [images count]);
[self createVideoFileFromArray:images]; 
```

所以这在模拟器上工作得很好，但在设备（视网膜 iPad）上却不行。所以我的猜测是该设备不支持这么多的UIimages（特别是2048 * 1536）。崩溃总是发生在 38 帧左右之后。

现在至于解决方案，我想为每 10 帧创建一个视频，然后将它们全部连接在一起，但是我什么时候才能知道我是否有足够的空间（自动释放池是否已耗尽？）。

也许我应该使用一个线程，处理 10 张图像，然后在它结束后再次触发接下来的 10 帧？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:48:05.287

您似乎很可能内存不足。

为了减少内存使用，您可以尝试使用 PNG 或 JPG 格式将图像存储为 NSData。当表示为数据时，PNG 和 JPG 都非常小，但是将它们加载到 UIImage 对象中可能会**非常**消耗内存。

我建议您在循环中执行以下操作。每次迭代都需要自动释放池来耗尽返回的快照。

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
UIImage *image = [view snapshot];
NSData *imageData = UIImagePNGRepresentation(image);
[images addObject:imageData];
[pool release]; 
```

这当然需要您的 createVideoFileFromArray: 方法来处理纯图像数据而不是 UIImage 对象，但这应该是可行的。

# c# - 在存储库模式中使用接口优于抽象类的优势？

> ID：11326786
> 
> 赞同：15
> 
> 时间：2012-07-04T10:01:28.147
> 
> 标签：c#, design-patterns, architecture

> **可能重复：**
> [接口与基类](https://stackoverflow.com/questions/56867/interface-vs-base-class)

使用接口实现的存储库模式很常见

```
public interface IFooRepository
{
   Foo GetFoo(int ID);
}

public class SQLFooRepository : IFooRepository
{
   // Call DB and get a foo
   public Foo GetFoo(int ID) {}
}

public class TestFooRepository : IFooRepository
{
   // Get foo from in-memory store for testing
   public Foo GetFoo(int ID) {}
} 
```

但是你同样可以使用抽象类来做到这一点。

```
public abstract class FooRepositoryBase
{
    public abstract Foo GetFoo(int ID);
}

public class SQLFooRepository : FooRepositoryBase
{
    // Call DB and get a foo
    public override Foo GetFoo(int ID); {}
}

public class TestFooRepository : FooRepositoryBase
{
    // Get foo from in-memory store for testing
    public override Foo GetFoo(int ID); {}
} 
```

**在存储库场景中使用接口而不是抽象类的具体优势是什么？**

*（即不要只是告诉我你可以实现多个接口，我已经知道这一点 - 你为什么要在存储库实现中这样做）*

**编辑以澄清**- “ [MSDN - 在类和接口之间选择”](http://msdn.microsoft.com/en-us/library/ms229013.aspx)之类的页面可以解释为“在接口上选择类，除非有充分的理由不这样做” - 在**存储库模式的特定情况下，好的理由是什么**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:09:29.493

Personally, I tend to have an interface that holds the signature for the methods that are purely "business-related" for example `Foo GetFoo()`, `void DeleteFood(Foo foo)`, etc. I also have a generic abstract class that holds protected methods like `T Get()` or `void Delete(T obj)`.

I keep my methods protected in the abstract `Repository` class so that the outside world is not aware of the plumbery (`Repository` will look like `object`) but only of the business model via the interface.

On top of having the plumbery shared another advantage is that I have for example a `Delete` method (`protected`) available to any repository but it is not public so I am not forced to implement it on a repository where it has no business meaning to delete something from my data source.

```
public abstract class Repository<T>
{
    private IObjectSet objectSet;

    protected void Add(T obj)
    {
        this.objectSet.AddObject(obj);
    }

    protected void Delete(T obj)
    {
        this.objectSet.DeleteObject(obj);
    }

    protected IEnumerable<T>(Expression<Func<T, bool>> where)
    {
        return this.objectSet.Where(where);
    }
}

public interface IFooRepository
{
    void DeleteFoo(Foo foo);
    IEnumerable<Foo> GetItalianFoos();
}

public class FooRepository : Repository<Foo>, IFooRepository
{
    public void DeleteFoo(Foo foo)
    {
        this.Delete(foo);
    }

    public IEnumerable<Foo> GetItalianFoos()
    {
        return this.Find(foo => foo.Country == "Italy");
    }
} 
```

The advantage of using the abstract class over an interface for the plumbery is that my concrete repositories do not have to implement method they don't need (`Delete` or `Add` for example) but they are at their disposal if they need it. In the current context, there is no business reason for to some Foos so the method is not available on the interface.

The advantage of using an interface over an abstract class for the business model is that the interface provides the answers to how it make sense to manipulate `Foo` from a business side (does it make sense to Delete some foos? To create some? etc.). It's also easier to use this interface when Unit testing. The abstract `Repository` I use cannot be unit tested because it is usually tightly coupled with the database. It can only be tested in integration tested. Using an abstract class for the business purpose of my repositories would prevent me from using them in unit tests.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T10:46:19.410

在这种情况下，使用接口而不是抽象类的主要优点是接口是完全透明的：这更多的是您无法访问要继承的类的源代码的问题。

但是，这种透明性允许您生成已知范围的单元测试：如果您测试一个接受接口作为参数的类（使用依赖注入方法），您知道您正在测试一个已知数量的类；接口的测试实现将只包含您的测试代码。

同样，在测试存储库时，您知道您只是在测试存储库中的代码。这有助于限制测试中可能的变量/交互的数量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T10:21:08.917

这是适用于任何类层次结构的一般问题，而不仅仅是存储库。从纯 OO 的角度来看，接口和纯抽象类是相同的。

如果您的类是公共 API 的一部分，那么使用抽象类的主要优点是您可以在将来添加方法而不会破坏现有实现的风险。

有些人还喜欢将接口定义为“类可以做的事情”，将基类定义为“类是什么”，因此只会将接口用于外围功能，并始终将主要功能（例如存储库）定义为一类。我不确定我在这件事上的立场。

要回答您的问题，我认为在定义类的主要功能时使用接口没有任何优势。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T14:47:51.947

由于该模式起源于领域驱动设计，这里有一个 DDD 答案：

Repository 的合约通常在 Domain 层中定义。这允许域和应用层中的对象操作存储库的抽象，而无需关心它们的实际实现和底层存储细节 - 换句话说，是持久性无知的。此外，我们经常希望将特定行为包含在某些存储库的合同中（除了您的普通 Add()、GetById() 等），所以我更喜欢这种`ISomeEntityRepository`形式，而不仅仅是`IRepository<SomeEntity>`——我们会明白为什么它们需要后面的接口。

另一方面，存储库的具体实现驻留在基础设施层（或测试存储库的测试模块中）。他们实现了上述存储库合约，但也有自己的持久性特定特征范围。例如，如果您使用 NHibernate 来持久化您的实体，那么拥有一个包含 NHibernate 会话和其他 NHibernate 相关通用管道的所有 NHibernate 存储库的超类可能会派上用场。

由于您不能继承多个类，因此您的最终具体存储库继承的这两件事之一必须是接口。

将域层契约作为一个接口 ( `ISomeEntityRepository`) 更合乎逻辑，因为它是一个纯粹的声明性抽象，并且不能对将使用什么底层持久性机制做出任何假设——即它*不能实现*任何东西。

特定于持久性的可以是一个抽象类（`NHibernateRepository`或`NHibernateRepository<T>`在基础设施层中），它允许您将一些行为集中在那里，这些行为对于将存在的所有特定于持久性存储的存储库都是通用的。

这导致类似：

```
public class SomeEntityRepository : NHibernateRepository<SomeEntity>, ISomeEntityRepository 
{
  //...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-04T10:07:43.157

虽然其他人可能需要添加更多内容，但从纯粹实用的角度来看，大多数 IoC 框架在接口 -> 类映射方面工作得更好。您可以在接口和类上拥有不同的可见性，而对于继承，可见性必须匹配。

如果您不使用 IoC 框架，那么在我看来没有区别。提供者基于抽象基类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-04T10:13:13.540

我想关键的区别是，抽象类可以包含私有属性和方法，其中接口不能，因为它只是一个简单的合同。

接口的结果始终是“这里没有恶作剧——所见即所得”，而抽象基类可能会产生副作用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-04T10:40:48.720

看看 Tim McCarthy 的 Repository Framework 的实现。< [http://dddpds.codeplex.com/](http://dddpds.codeplex.com/) >

他使用接口`IRepository<T>`来定义合约，但他也使用抽象类`RepositoryBase<T>`或者他`SqlCeRepositoryBase < T >`的实现`IRepository<T>`。抽象基类是消除大量重复代码的代码。特定类型的存储库只需要从抽象基类继承，并且需要为其添加代码。API 的用户可以通过合约对接口进行编码。

所以你可以结合这两种方法来利用它们的优点。

此外，我认为大多数 IoC 框架都可以处理抽象类。

# iphone - IIS7.5：iPhone 上未提供 m4v

> ID：11326788
> 
> 赞同：2
> 
> 时间：2012-07-04T10:01:29.587
> 
> 标签：iphone, iis, mime-types, m4v

我正在使用 Windows Server 2008 R2、IIS 7.5。我为我的网站添加了这种 mime 类型：.m4v 视频/m4v。我的网页使用带有 m4v 格式视频文件的 html5 标签。我的问题是我在 iPhone 上看不到视频。我收到错误消息：“由于服务器或网络故障或不支持格式，无法加载视频”

如果我在 iPhone 上打开视频（不使用 url），我可以阅读它。另外，我把视频安装在Apache服务器上，可以正常播放。所以我想视频是正确的，但 IIS 没有提供正确的格式文件。

我尝试了其他几种 mime 类型、服务和服务器重启，但我无法在 iPhone 的网页上获取视频。静态内容压缩已打开（当我将其关闭时同样的问题）。关于如何管理这个的任何想法？谢谢你。

# asp.net-mvc-3 - ASP.NET MVC 3 和 jquery.unobtrusive-ajax.min.js

> ID：11326792
> 
> 赞同：6
> 
> 时间：2012-07-04T10:01:50.770
> 
> 标签：asp.net-mvc-3, unobtrusive-ajax

我想使用 Ajax.ActionLink Html 帮助程序，因此我需要 jquery.unobtrusive-ajax.min.js 库，但 IE 总是显示此错误：

> Microsoft JScript 运行时错误：无法设置属性“unobtrusive”的值：对象为空或未定义

我已经读到解决方案是使用 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js 但后来我无法识别服务器端的 ajax 调用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-04T10:13:46.067

> 我读过解决方案是使用 jquery.validate.min.js 和 jquery.validate.unobtrusive.min.js

不，那 2 个脚本与`jquery.unobtrusive-ajax.min.js`. 它们用于不显眼的验证。对于 Ajax.* 助手，您只需要`jQuery`和`jquery.unobtrusive-ajax.min.js`（包含在**那个**顺序中）。

因此，对于不显眼的 AJAX，您需要：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

如果您想使用不显眼的验证，您还可以在之后包含 2 个脚本（**按此**顺序）：

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

您应该确保的另一件非常重要的事情是您已经`Microsoft*.js`从项目中完全删除了任何脚本痕迹。这些脚本已过时，默认情况下不再使用从 ASP.NET MVC 3 开始的脚本。还要确保您在 web.config 中启用了不显眼的 AJAX，否则系统将回退到旧版 Microsoft ajax 脚本：

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
</appSettings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T00:20:49.377

这是一篇旧文章，但如果有人需要关于不显眼的 ajax 的最新信息，可以在这里找到：

[http://nuget.org/packages/Microsoft.jQuery.Unobtrusive.Ajax/3.0.0-beta2](http://nuget.org/packages/Microsoft.jQuery.Unobtrusive.Ajax/3.0.0-beta2)

还有其他适用于最新 jquery 库的稳定版本。

# sql-server - 对于表中的给定 ID，我们如何获得前后两行？

> ID：11326801
> 
> 赞同：0
> 
> 时间：2012-07-04T10:02:17.493
> 
> 标签：sql-server, sql-server-2008

我有一个 10 行的表

```
id  values
 1    a
 2    b
 3    c
 4    d
 5    e
 6    f
 7    g
 8    h
 9    i
 10   j 
```

对于@id = 5，我想在之前得到两行，在之后得到两行。

怎么能得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:11:36.927

**Edit** This should work as expected (hopefully):

```
select id, value
from [table]
where id-@id >= -2 
AND   id-@id <=  2 
AND   id-@id <>  0 
```

Here's the running sql: [http://sqlfiddle.com/#!6/ca4e5/3/0](http://sqlfiddle.com/#!6/ca4e5/3/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:03:13.293

一种可能的解决方案：

```
select *
from table
where id in (3, 4, 6, 7) 
```

如果您使用的是 int 变量 @id，您可以这样做：

```
select *
from table
where id in (@id-2, @id-1, @id+1, @id+2) 
```

* * *

要选择前两个：

```
select top 2 *
from tablename
where id < @id
order by id desc 
```

要选择接下来的两个：

```
select top 2 *
from tablename
where id > @id
order by id asc 
```

# css - 自定义光标 alpha 通道在 Firefox 中变黑

> ID：11326804
> 
> 赞同：0
> 
> 时间：2012-07-04T10:02:29.247
> 
> 标签：css, firefox, browser, png, alpha

我有一个在大多数浏览器中都能正常工作的自定义光标。然而，在 Firefox 中，没有 100% alpha 的部分会变成黑色。据我所知，Firefox 应该支持光标图像中的 alpha。

[https://developer.mozilla.org/en/SVG/Element/cursor](https://developer.mozilla.org/en/SVG/Element/cursor)

示例页面（悬停图像）： [http ://dev.nuagency.se/illustrators/beata-boucht-2/](http://dev.nuagency.se/illustrators/beata-boucht-2/)

图片： [http ://dev.nuagency.se/wp-content/themes/nuagency/images/left.png](http://dev.nuagency.se/wp-content/themes/nuagency/images/left.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:45:40.690

Firefox 不支持光标中的 Alpha 层，对此无所谓。

# php - Drupal：更改投票/高级投票的整个标记

> ID：11326806
> 
> 赞同：0
> 
> 时间：2012-07-04T10:02:39.243
> 
> 标签：php, html, templates, drupal, drupal-modules

是否可以编辑核心投票模块或高级投票的整个标记（它们使用大致相同的模板）？

我正在为一位希望以特定布局对民意调查进行风格化的客户制作一个 drupal 站点。仅将 CSS 应用于投票默认呈现的任何内容是不可能的。

这是否可能不修改核心模块/模板，而是扩展它们以及如何？

PS：我对drupal很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:16:19.757

修改核心模块本身是绝对不可取的。Drupal 有一个非常灵活和强大的主题系统，可以让您覆盖核心投票、高级投票或（就此而言）任何内容类型的输出。

您需要了解的是，按照 Drupal 的说法，您将创建的每个民意调查都是`node`内容类型为`poll`. 现在，有了这些基本知识，根据您使用的是 Drupal 6 还是 7，以下链接之一将为您提供帮助：

*   [Drupal 6](http://drupal.org/node/1089642)
*   [德鲁巴 7](http://drupal.org/node/17565)

此外，这里有一些关于[投票特定主题信息](https://www.google.com/search?sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8&q=drupal+poll+tpl.php)的页面。

# oracle - SAS Oracle 数据问题

> ID：11326807
> 
> 赞同：4
> 
> 时间：2012-07-04T10:02:40.767
> 
> 标签：oracle, sas

我有一个关于特殊字符的问题。我使用 SAS 连接到 Oracle 数据库，然后将表从 Oracle 下载到 SAS 数据集。

以前，正确下载的特殊字符没有问题。我最近在工作中收到了一台新笔记本电脑，从那以后出现了一些数据问题。

基本上，正在发生的事情是特殊字符被删除或完全替换。例如，é 正在被 e 取代。á 替换为 a。其他特殊字符被完全删除并替换为“？”

我已经阅读了一堆关于编码、转码和 NLS_LANGUAGE 的文章，但我就是不知道为什么会发生这种情况以及如何解决它。我的其他仍在使用旧笔记本电脑的同事没有同样的问题！

请，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:57:06.840

检查您的 Windows 注册表。在我的机器上，设置为`HKEY_LOCAL_MACHINE\SOFTWARE\oracle\KEY_OraClient11g_home1\NLS_LANG`. 将此密钥与使用 SAS w/Oracle 并且仍然拥有旧笔记本电脑的同事的密钥进行比较。

# macos - Mounted Volume 无法用 Finder 打开，用终端打开解决一切

> ID：11326810
> 
> 赞同：3
> 
> 时间：2012-07-04T10:02:44.563
> 
> 标签：macos, terminal, finder, file-sharing, volumes

我们遇到了一个奇怪的问题。我们已经在 /etc/fstab 中声明要挂载一个卷。起初，一切似乎都有效。但现在我们面临这样的情况：

如果您转到查找器（/网络/共享）中已安装的卷，它不会打开该文件夹并说您没有足够的权限打开它（在 fstab 中声明了用户 + 密码并且密码不是t 改变）。

但是如果我们打开终端并这样做：

```
ls /Network/Shared    
cd /Network/Shared 
```

他给出了位于共享文件夹中的所有文件夹和文件的输出。他可以访问该文件夹。

如果我们打开终端并执行以下操作：

```
open /Network/Shared 
```

他打开卷，如果我们关闭它并转到 /Network/Shared 卷是可访问的，但早些时候他无法打开它。你们知道为什么会这样吗？以及我们如何解决它。因为我无法告诉客户是否无法在查找器中访问共享卷，他需要打开终端并从这里打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T13:25:04.200

在 Mail.app 或 Safari 和 OS X Lion 中，当您单击 smb://myserver.mydomain.com/Sharepoint/Folder1/Folder2 形式的 URL 以连接到 SMB 服务器 myserver.mydomain.com 时，卷桌面上的安装将不同于以前版本的 Mac OS X。

在 OS X Lion 及更高版本中，Finder 将在 SMB 服务器 myserver.mydomain.com 上挂载名为 Sharepoint 的卷，并打开一个显示名为 Folder2 的目录内容的窗口。注意：您必须有权读取 Sharepoint、Folder1 以及 Folder2 路径中的所有其他目录。否则，您将看到消息“无法打开该文件夹，因为您无权查看其内容。”

在 Mac OS X v10.6 及更早版本中，Finder 将挂载名为 Folder2 的文件夹并打开一个显示其内容的窗口。您只需要读取 Folder2 的权限即可安装它。附加信息

在 OS X Lion 及更高版本中，“mount_smbfs”命令可用于终端窗口或 shell 脚本，以复制 Mac OS X v10.6 及更早版本中的 Finder 行为。有关更多信息，请在终端窗口中键入以下命令：

人 mount_smbfs

更多细节可以在这里找到：http: [//infoapple.com.br](http://infoapple.com.br)

# java - java.io.IOException：尝试加入非多播组

> ID：11326813
> 
> 赞同：1
> 
> 时间：2012-07-04T10:02:58.160
> 
> 标签：java, android, sockets, multicast

我正在开发一个 Android 3.1 平板电脑应用程序。

它有一个**MulticastSocket**：

```
public MulticastClient(String serverName, int port, Handler serviceHandler) throws IOException
{
    super(serverName);

    socket = new MulticastSocket(8888);
    InetAddress group = InetAddress.getByName("203.0.113.0");
    socket.joinGroup(group);

    this.mServiceHandler = serviceHandler; 
} 
```

我在这里收到一个错误：

`InetAddress group = InetAddress.getByName("203.0.113.0");`

这是**错误**：

`java.io.IOException: Attempted to join a non-multicast group`

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:11:11.373

[如此处](http://www.iana.org/assignments/multicast-addresses/multicast-addresses.xml)所述，多播地址具有严格的强制范围。

> 多播地址在 224.0.0.0 到 239.255.255.255 范围内。

# android - 在 Looper 的帮助下访问/发布消息到 UI 线程

> ID：11326814
> 
> 赞同：0
> 
> 时间：2012-07-04T10:03:03.387
> 
> 标签：android, multithreading

如何从线程向主 UI 循环器发布消息？我正在研究一个独立的助手类，它应该显示一个窗口。

一个不好的解决方案是通过构造传递一个视图，然后使用 View.post()，但我正在寻找一个更好的解决方案。

我认为这会起作用，但我得到了常见的“在 ui 线程上没有”异常。

```
public class Example {

    private Context context;

    public Example(Context context) {
        this.context = context;
    }

    public void build() {

    }

    public void show() {
        Handler handler = new Handler(Looper.getMainLooper());
        handler.post(new Runnable() {
            @Override
            public void run() {
                Toast.makeText(context, "test", Toast.LENGTH_LONG);
            }
        }); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:06:56.017

只需传递上下文并使用 runonUiThread 方法，就像这样，

```
((Activity)contextObj).runOnUiThread(new Runnable() {

                public void run() {
                     Toast.makeText(context, "test", Toast.LENGTH_LONG).show();

                }
            }); 
```

# java - 对类似于 Foobar2000:Title Formatting Reference 的脚本语言语法的任何 Java 支持

> ID：11326815
> 
> 赞同：1
> 
> 时间：2012-07-04T10:03:04.360
> 
> 标签：java, javascript

以前我问过这个问题[Putting a simple expression language into java](https://stackoverflow.com/questions/6285045/putting-a-simple-expression-language-into-java)关于允许用户输入支持 if 语句、子字符串等的格式化掩码。

使用 Script Engine 和 javascript 的答案有效，但是 javascript 语法对用户来说不是很容易

```
(albumartist.length>0  ? albumartist +'-' :(artist.length>0 ? artist + '-' : ' ')) + (album.length>0 ? album + '-' :'') + (trackno.length>0 ? trackno + '-' :'')  + title 
```

可以输出

```
U2-Boy-Twilight-02 
```

但更简单的语法类似于

```
if(%albumartist%,%artist%)-if(%album%,%album%-)if(%trackno%,%trackno-)%title 
```

主要区别是我们不必用 '+' 显式连接字符串或用 ' ' 引用字符串文字

这类似于[http://wiki.hydrogenaudio.org/index.php?title=Foobar2000:Title_Formatting_Reference#.24if2.28a.2Celse.29](http://wiki.hydrogenaudio.org/index.php?title=Foobar2000:Title_Formatting_Reference#.24if2.28a.2Celse.29)中详述的 Foobar 标题格式参考，但我无法对此进行物理实现用Java解析。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:36:35.857

*   AFAIK，标准 JDK 仅支持 javascript (ECMAScript)。您可以使用下面的代码检查可用的引擎。
*   [脚本项目](http://java.net/projects/scripting/sources/svn/show/trunk/engines?rev=236)中提供了其他引擎，但我不相信您提到的语言是其中的一部分。
*   如果您喜欢（并且有很多空闲时间），您可以[创建自己的脚本引擎](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html#engineimpl)。

[您可以在这里](http://today.java.net/pub/a/today/2006/04/11/scripting-for-java-platform.html)、[那里](http://today.java.net/pub/a/today/2006/09/21/making-scripting-languages-jsr-223-aware.html)和[那里](http://www.javaworld.com/javaworld/jw-04-2006/jw-0424-scripting.html)阅读有关引擎的更多信息。

最后，您可以“简单地”[解析 Java 中的 FooBar2000 语法](https://stackoverflow.com/questions/1188889/parsing-a-simple-language-for-title-formatting)。

总而言之，**你想做的事情听起来并不容易**——祝你好运！;-)

```
public static void main(String[] args) {
    ScriptEngineManager mgr = new ScriptEngineManager();
    List<ScriptEngineFactory> factories =
            mgr.getEngineFactories();
    for (ScriptEngineFactory factory : factories) {
        String engName = factory.getEngineName();
        String engVersion = factory.getEngineVersion();
        String langName = factory.getLanguageName();
        String langVersion = factory.getLanguageVersion();
        System.out.printf("Script Engine: %s (%s)\n", engName, engVersion);
        System.out.printf("\tLanguage: %s (%s)\n", langName, langVersion);
    }
} 
```

# android-emulator - OpenSL ES 无法在 Android 模拟器上播放音频

> ID：11326821
> 
> 赞同：3
> 
> 时间：2012-07-04T10:03:17.200
> 
> 标签：android-emulator, android-ndk, pcm, opensl

我将 amrnb 解码为 PCM，然后将正确的 pcm 缓冲区放入 Enqueue 缓冲区（我确定 PCM 数据是正确的），但听不到声音。并且在提供缓冲区时，记录输出：

```
/AudioTrack(14857): obtainBuffer timed out (is the CPU pegged?) 
```

我的代码如下，我的问题是：

1.  使用 OpenSL ES 时有什么问题吗？
2.  OpenSL ES 真的只能在真机上运行吗？

示例代码：

```
void AudioTest()
{    

    StartAudioPlay();

    while(1)
    {
          //decode AMR to PCM

      /* Convert to little endian and write to wav */

          //write buffer to buffer queue     
      AudioBufferWrite(littleendian, 320);

   }
}

void bqPlayerCallback(SLAndroidSimpleBufferQueueItf bq, void *context)
{

//do nothing

}

void AudioBufferWrite(const void* buffer, int size) 
{

    (*gBQBufferQueue)->Enqueue(gBQBufferQueue, buffer, size );

}

// create buffer queue audio player
void SlesCreateBQPlayer(/*AudioCallBackSL funCallback, void *soundMix,*/ int rate, int nChannel, int bitsPerSample ) 
{

    SLresult result;

    // configure audio source
    SLDataLocator_AndroidSimpleBufferQueue loc_bufq = {SL_DATALOCATOR_ANDROIDSIMPLEBUFFERQUEUE, 2};

    SLDataFormat_PCM format_pcm = {SL_DATAFORMAT_PCM, 1, SL_SAMPLINGRATE_8,
        SL_PCMSAMPLEFORMAT_FIXED_16, SL_PCMSAMPLEFORMAT_FIXED_16,
        SL_SPEAKER_FRONT_CENTER, SL_BYTEORDER_LITTLEENDIAN};

    SLDataSource audioSrc = {&loc_bufq, &format_pcm};

    // configure audio sink
    SLDataLocator_OutputMix loc_outmix = {SL_DATALOCATOR_OUTPUTMIX, gOutputMixObject};
    SLDataSink audioSnk = {&loc_outmix, NULL};

    // create audio player
    const SLInterfaceID ids[3] = {SL_IID_BUFFERQUEUE, SL_IID_EFFECTSEND, SL_IID_VOLUME};
    const SLboolean req[3] = {SL_BOOLEAN_TRUE, SL_BOOLEAN_TRUE, SL_BOOLEAN_TRUE};
    result = (*gEngineEngine)->CreateAudioPlayer(gEngineEngine, &gBQObject, &audioSrc, &audioSnk,
            3, ids, req);

    // realize the player
    result = (*gBQObject)->Realize(gBQObject, SL_BOOLEAN_FALSE);

    // get the play interface
    result = (*gBQObject)->GetInterface(gBQObject, SL_IID_PLAY, &gBQPlay);

    // get the buffer queue interface
    result = (*gBQObject)->GetInterface(gBQObject, SL_IID_BUFFERQUEUE,
            &gBQBufferQueue);

    // register callback on the buffer queue
    result = (*gBQBufferQueue)->RegisterCallback(gBQBufferQueue, bqPlayerCallback, NULL/*soundMix*/);

    // get the effect send interface
    result = (*gBQObject)->GetInterface(gBQObject, SL_IID_EFFECTSEND,
            &gBQEffectSend); 

    // set the player's state to playing
    result = (*gBQPlay)->SetPlayState(gBQPlay, SL_PLAYSTATE_PLAYING );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:01:05.157

我不完全确定，但我认为你是正确的，因为模拟器的 OpenSL ES 支持实际上不起作用。我从来没有让它在实践中工作，而它可以在我尝试过的任何设备上工作。

在我的应用程序中，我还必须支持 Android 2.2，因此我可以使用 JNI 来访问 Java AudioTrack API。我在我的应用程序中添加了一个特殊情况，以便在检测到模拟器时始终使用 AudioTrack 接口。

# php - 我如何使用 IP 地址将 PHP 连接到 SQL Server

> ID：11326822
> 
> 赞同：1
> 
> 时间：2012-07-04T10:03:26.337
> 
> 标签：php, sql-server-2008-r2, ip

我无法使用我的 PC IP 地址连接到数据库，但我可以使用我的 PC 名称连接到数据库。我如何修复它或者我可以在 sql server 中配置它？

那么，连接 SQL Server 的 PC Name 和 127.0.0.1 有什么区别呢？

这是我的代码不同：

```
mssql_connect("MYPCNAME","sa","solution") or die('Connection Failed'); //this is OK

mssql_connect("127.0.0.1","sa","solution") or die('Connection Failed'); // this is failed 
```

我需要你的专业知识；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:17:51.057

如果您使用端口号，它可能会起作用，例如：

```
mssql_connect("127.0.0.1:1433","sa","solution") or die('Connection Failed'); 
```

如果您在 Windows 上使用 PHP，请尝试：

```
 mssql_connect("127.0.0.1,1433","sa","solution") or die('Connection Failed'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:09:10.257

使用主机名时，它通常会解析为机器的非环回地址。使用`localhost`或`127.0.0.1`将始终使用环回接口。

SQL Server 很可能不会绑定到环回接口，而只会绑定到真实接口（解析时获得 IP 的接口`MYPCNAME`）。您可以继续使用 PC 名称或其 IP，也可以将 SQL Server 配置为侦听环回接口。

# android - 为什么我的进度对话框在新意图开始（）时没有旋转？

> ID：11326823
> 
> 赞同：1
> 
> 时间：2012-07-04T10:03:43.590
> 
> 标签：android, spinner, progressdialog

我尝试打开第二个活动，这需要一些时间从主要活动首先从互联网加载数据，在此期间，我的屏幕将全黑，所以我决定使用进度对话框显示“嘿，我还活着，不要关我！” 一切都很顺利，但唯一的问题是微调器没有旋转。这是我的代码：单击按钮后： new YourAsyncTask().execute();

```
public class YourAsyncTask extends AsyncTask<Void, Void, Void> {

    private ProgressDialog myDialog;

    @Override
    protected void onPreExecute() {
        //show your dialog here
        myDialog = ProgressDialog.show(ScrollingTab.this, "loading..", "please wait..", true, true);  
        myDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER); 
    }

    @Override
    protected Void doInBackground(Void... params) {        
        //update your DB - it will run in a different thread

        startActivity(new Intent("com.android.ricky.RESULT_DETAIL"));
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        //hide your dialog here
        myDialog.dismiss();
    }
} 
```

我试图删除“ startActivity(new Intent("com.android.ricky.RESULT_DETAIL"));” 和“myDialog.dismiss();” 同时，旋转器正在旋转><请帮助，非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:19:58.787

你的概念有点混乱和错误，

您必须在单击按钮时启动 2nd Activity，然后`onCreate()`在您的 2nd Activity 中执行`YourAsyncTask()`. 并从互联网下载数据以进行 2nd Activity 中`doInBackground()`的`AsyncTask`。完成下载后，为 2nd Activity 准备你的UI `onPostExecute()`，`AsyncTask`然后.`dismiss()``ProgressDialog`

# google-chrome - chrome 开发者工具中的网络图标是什么意思？

> ID：11326826
> 
> 赞同：1
> 
> 时间：2012-07-04T10:03:56.343
> 
> 标签：google-chrome, google-chrome-devtools

我在谷歌浏览器开发人员工具、网络视图中看到支柱形式的帖子旁边有不同的图标。见下文。

![struts 窗体的不同图标](../Images/723688ed943c90e74f6f0310687299be.png)

我检查了[谷歌文档](https://developers.google.com/chrome-developer-tools/docs/network)，但看不到任何信息？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:25:12.723

似乎没有太多选择。这是此页面上有关堆栈溢出的资源的屏幕截图。

![在此处输入图像描述](../Images/50cbd04a7e40e11f31f6d9174ee93460.png)

*   如果 mime 类型是`text/*`or even `application/javascript`，那么你会得到文本图标。
*   如果 mime 类型是，`image/*`那么您将在图标中获得实际图像。
*   空响应将显示白色图标。
*   看起来一个空图像将显示一个正方形，指示响应具有 mime 类型但没有内容（HTTP 204，如我的屏幕截图的状态列中所示）。

我的猜测是，开发人员工具的变化太频繁了，以至于他们不想记录图标以便以后可以更改它们。如果您愿意，该图标只是一个有用的“快速查看”。您应该通过单击资源并了解请求/响应的详细信息来真正查看 mime 类型、状态以及最终的内容。

# iis - IIS 托管故障工作流服务

> ID：11326829
> 
> 赞同：0
> 
> 时间：2012-07-04T10:04:09.613
> 
> 标签：iis, workflow-foundation-4

我在 IIS 中托管我的工作流服务，当实例在执行期间因内部异常而出现故障时，我需要执行一些自定义操作。

我找到了 WorkflowUnhandledExceptionBehavior 扩展，但我只能使用预定义的操作。我希望能够有一些我可以订阅的“事件”来运行我自己的逻辑。我认为我应该使用自定义行为，但我在哪里可以找到一个很好的例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:50:58.147

这在一定程度上取决于您想要/需要做什么。如果您添加[TrackingParticipant ，它可以通过](http://msdn.microsoft.com/en-us/library/ee513993.aspx)[WorkflowInstanceUnhandledExceptionRecord](http://msdn.microsoft.com/en-us/library/system.activities.tracking.workflowinstanceunhandledexceptionrecord.aspx)接收有关未处理错误的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:50:41.307

如果任何活动内部发生任何异常，都可以通过内置的 try catch 活动轻松捕获。在工作流级别进行尝试。如果生成任何异常，请捕获它们并执行您自己的任务。

# asp.net-mvc-3 - Telerik Kendo ui 网格显示 html 单元格而不是生成的 html 控件

> ID：11326831
> 
> 赞同：10
> 
> 时间：2012-07-04T10:04:13.680
> 
> 标签：asp.net-mvc-3, kendo-ui

我正在尝试使用来自 asp.net mvc 3 的新 Kendo UI 网格。

我有一个表，该表是从 asp.net mvc 3 中的控制器自动生成的。

并用 Kendo.ui 网格显示它。

但是，我在单元格中使用 html 代码而不是 html 控件

例子：

它显示在单元格中：`<input checked="checked" class="check-box" disabled="disabled" type="checkb..`视图中的代码不是输入，而是@html.input

或者`<a href="/Admin/Edit">Edit</a> | <a href="/Admin/Details">Details</a> | <a href="/Adm`代替链接（视图中的代码是@Html.actionLink）

我怎样才能让它编码html代码？

这是我的脚本：

```
$(document).ready(function() {
    $("#calendrierMatch").kendoGrid({

    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T10:14:53.623

KendoUI Grid 自动对网格的内容进行编码，这就是为什么您获取文本`<input type= ...`而不是实际的输入控件的原因。

`encoded`您可以使用选项禁用给定列的编码[（请参阅文档）](http://www.kendoui.com/documentation/ui-widgets/grid/configuration.aspx)：

> **编码：布尔（默认：真）**指定是否对列内容进行转义。如果数据包含 HTML 标记，则禁用编码。

所以你需要类似的东西：

```
 $(document).ready(function(){
      $("#grid").kendoGrid({
      //...
        columns: [
           {
               field: "Column containing HTML",
               encoded: false
           }
        ]          
      });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T01:34:51.190

在模型绑定剑道网格 Razor Html 页面中使用此代码

```
@Html.Kendo().Grid(Model).Name("GridName").Columns(col =>{
col.Bound(m => m.ID);
col.Bound(m => m.Name);
col.Template(@<text>
        @Html.Raw(HttpUtility.HtmlDecode( item.Text))
    </text>);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T09:45:30.360

```
You need to add the template feature  of kendo grid.

In the below code i have created a text box inside the cell of kendo grid.

 {
     field: "Total",
     title: "Total",
     width: "40px",
     template: "<input type='text'  class=\"quantity_total\"   id='txtTotal_${ItemId}'    
                name='txtTotal_${ItemId}' maxlength='8'    onkeypress = 'return 
                fnCheckNumeric_total(event,this.id)'  />"  

}, 
```

# mysql - 使用合并或 if 导致 where 子句 mysql

> ID：11326833
> 
> 赞同：1
> 
> 时间：2012-07-04T10:04:23.983
> 
> 标签：mysql

我使用一些这样的sql：

```
SELECT COALESCE(group.display,item.display) as display.... 
```

我想在 WHERE 子句中添加：

```
WHERE display='1' 
```

WHERE 显示是合并的结果。

同样，我希望能够对这样的事情做同样的事情：

```
IF(ISNULL(gd.group_main_image),p.main_image,gd.group_main_image) AS image
... WHERE image IS NOT NULL 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:06:36.180

您不能在同一级别的查询中使用别名。

你必须重复自己。

```
WHERE COALESCE(group.display,item.display) = '1' 
```

**编辑**

好吧，我限制得太多了。您可以在 MySql 的 having 子句中使用别名。您不能在其他 DBMS（Oracle、SQl Server）中做到这一点。通常它在 ANSI SQL 中也是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:09:13.797

As described in [Problems with Column Aliases](http://dev.mysql.com/doc/en/problems-with-alias.html):

> An alias can be used in a query select list to give a column a different name. You can use the alias in `GROUP BY`, `ORDER BY`, or `HAVING` clauses to refer to the column:
> 
> ```
> SELECT SQRT(a*b) AS root FROM *tbl_name*
>   GROUP BY root HAVING root > 0;
> SELECT id, COUNT(*) AS cnt FROM *tbl_name*
>   GROUP BY id HAVING cnt > 0;
> SELECT id AS 'Customer identity' FROM *tbl_name*;
> ```
> 
> Standard SQL disallows references to column aliases in a `WHERE` clause. This restriction is imposed because when the `WHERE` clause is evaluated, the column value may not yet have been determined. For example, the following query is illegal:
> 
> ```
> SELECT id, COUNT(*) AS cnt FROM *tbl_name*
>   WHERE cnt > 0 GROUP BY id;
> ```
> 
> The `WHERE` clause determines which rows should be included in the `GROUP BY` clause, but it refers to the alias of a column value that is not known until after the rows have been selected, and grouped by the `GROUP BY`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:06:55.310

您不能在子句中使用**列别名**`WHERE`

所以：

```
WHERE COALESCE(group.display,item.display)='1' 
```

或者：

```
HAVING display='1' 
```

但是，`HAVING`在发现所有结果集之后执行，所以基本上这会更消耗内存

# tomcat - 如何找出 Tomcat 使用的 GC 策略？

> ID：11326836
> 
> 赞同：0
> 
> 时间：2012-07-04T10:04:32.360
> 
> 标签：tomcat, garbage-collection

当我启动我的 Tomcat 服务器时，我不知道它使用的是哪种 GC 策略。我怎样才能找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:30:12.680

它使用您正在使用的 Java 版本的默认策略，除非您在 setenv.bat/.sh 中更改了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:43:55.487

打印启动 Tomcat 时使用的命令行标志的选项是：

```
-XX:+PrintCommandLineFlags 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:05:44.453

您可以使用`jinfo`JDK 附带的实用程序在运行时查询 VM 标志和系统属性。但是，它只显示已明确设置的标志，而不显示正在使用的默认值。您必须阅读您的 JVM 供应商文档以了解默认值是什么，因为它们可能因一种 VM 实现而异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T19:46:25.143

您可以使用“jmap”来确定。例如：

jmap-堆 15290

正在附加到进程 ID 15290，请稍候... 已成功附加调试器。检测到服务器编译器。JVM版本是24.55-b03

使用线程局部对象分配。 **具有 8 个线程的并行 GC** .....

正如您在此处看到的，它显示了并行 GC 策略

# adobe-reader - 在 Adob e LiveCycle Designer 中创建的 PDF 无法打开

> ID：11326842
> 
> 赞同：2
> 
> 时间：2012-07-04T10:04:45.023
> 
> 标签：adobe-reader, livecycle-designer

我在 Adob​​e LiveCycle Designer 中设计了一个可编辑的 PDF。客户抱怨 PDF 无法打开并显示以下消息：

> 请稍候... 如果此消息最终没有被文档的正确内容替换，您的 PDF 查看器可能无法显示此类文档。[您可以通过访问http://www.adobe.com/go/reader_download](http://www.adobe.com/go/reader_download)升级到适用于 Windows、Mac 或 Linux 的 Adob​​e Reader 的最新版本 。有关 Adob​​e Reader 的更多帮助，请访问[http://www.adobe.com/go/acrreader](http://www.adobe.com/go/acrreader)。

我亲自走下来检查，他们也在使用最新的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T04:32:03.773

弄清楚了。客户试图在浏览器中打开可编辑的 PDF。

要求客户下载然后打开。工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T07:55:59.513

如果您在 Linux 上，即使下载文件后也无法打开。我抱怨使用的表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T17:49:28.220

这是旧的，但如果其他人遇到这个问题，如果您正在使用生命周期，请尝试将您的表单保存为静态 PDF。

另存为>> Adob​​e 静态 PDF 表单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T20:09:29.183

添加到@terminator 接受的答案

[您可以使用html 下载属性](http://www.w3schools.com/tags/att_a_download.asp)强制文档在现代浏览器上下载

```
<a href='example.pdf' download>Example</a> 
```

# java - 在 Swing 中输入格式化的日期和时间以使用 GET REST 获取节点

> ID：11326848
> 
> 赞同：1
> 
> 时间：2012-07-04T10:04:55.577
> 
> 标签：java, swing, url, inputstream, httpurlconnection

我需要输入开始时间和结束时间，在 Swing java 中，我将进一步发送到 URL 以获取在此时间使用`GET REST`调用创建的一些选定节点。 `URL`是：

```
http://wisekar.iitd.ernet.in/active/api_resources.php/method/mynode
    ?key=YOUR_API_KEY_HERE
    &startTime=START_TIME[Optional]
    &endTime=END_TIME[Optional]en 
```

该网站将采用图像中给出的输入（时间戳）。

我的窗口截图

![在此处输入图像描述](../Images/3c58a5df7e58520b253aa3c16d8d93b6.png)

现在我的代码在这里：

```
class Algorithm extends JFrame implements ActionListener {

    private static String ENDPOINT =
            "http://wisekar.iitd.ernet.in/active/api_"
            + "resources.php/method/mynode.json?key=api_key";

    Algorithm() {
       // label1 = new JLabel();.....

        panel = new JPanel(new GridLayout(5, 2));
        //adding in panel label1,text1 ... 
        add(panel, BorderLayout.CENTER);
        SUBMIT.addActionListener(this);
        setTitle("Optimal Travel Route");
    }

    public void actionPerformed(ActionEvent ae) {
        try {
            //String value1 = text1.getText();..

            URL url = new URL(ENDPOINT + "&datasetId=" + value3
                    + "&startTime=" + value1 + "&endTime=" + value2);
            System.out.println(url);
            HttpURLConnection httpCon;
            httpCon = (HttpURLConnection) url.openConnection();
            httpCon.setDoInput(true);
            System.out.println(httpCon.getResponseCode());
            System.out.println(httpCon.getResponseMessage());
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    httpCon.getInputStream()));
            String inputLine;
            while ((inputLine = in.readLine()) != null) {
                System.out.println(inputLine);
            }
            in.close();
        } catch (IOException ex) {
            Logger.getLogger(Algorithm.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

class AlgorithmDemo {

    public static void main(String arg[]) {
        try {
            Algorithm frame = new Algorithm();
            frame.setSize(450, 200);
            frame.setVisible(true);
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage());
        }
    }
} 
```

我什么都试过了；我已经评论过了。使用此代码，当我在浏览器中键入生成的 URL 时，我得到了节点，但是当我打印时它没有在控制台上给出结果。我的代码有什么问题？有人可以告诉我应该如何将日期和时间传递给 GET。请帮忙。当我只输入数据集 ID 时，它会给出该数据集 ID 的所有节点。据我说，传递时间戳存在一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:51:54.880

不幸的是，当我进行快速测试时，我得到了未经授权的响应。但看起来问题是字符串不是 url 安全的。您需要确保您的空间转换为 %20。这也是它使用浏览器工作的原因，因为浏览器地址栏会在幕后为您执行此操作。如果您使用：

```
String urlSafeValue1 = URLEncoder.encode(value1, "UTF-8");
String urlSafeValue2 = URLEncoder.encode(value2, "UTF-8");
String urlSafeValue3 = URLEncoder.encode(value3, "UTF-8"); 
```

参数将成为 url 安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:15:45.313

试试这个我的朋友...

```
String httpURL = ENDPOINT + URLEncoder.encode("&datasetId=" + value3
                 + "&startTime=" + value1 + "&endTime=" + value2, "UTF-8");
URLConnection urlConnection = new URL(httpURL).openConnection();
urlConnection.connect(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:48:37.600

如果您的时间戳采用屏幕截图中的格式，则它们包含必须在 URL 中转义的空格。尝试

```
value1 = value1.replaceAll(" ", "+"); 
```

`value2`在构建 URL 之前也是如此。

# c - C fread二进制数并将其转换为ASCII码

> ID：11326852
> 
> 赞同：3
> 
> 时间：2012-07-04T10:05:03.187
> 
> 标签：c, fread

我正在尝试从文件中读取以下二进制文件（01100001）并将其转换为 ascii 代码（97），但是当使用 fread 时，我得到了一个非常大的数字。文件“c:/input.txt”仅包含以下行 -01100001 数组值的 printf 打印大数字，例如 825241648

我的代码：

```
int main()
{
    unsigned int arr[8];
    int cnt,i,temp=0;
    FILE * input;
    if(!(input=fopen("C:/input.txt","r")))
    {
        fprintf(stderr,"cannot open file\n");
        exit(0);
    }
    cnt = fread(arr,1,8,input);
    for(i=0;i<cnt;i++)
    {
        printf("%d\n",arr[i]);
    }
    return 0;
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:17:03.990

`arr`是一个整数数组。但是您只读取了 8 个字节。所以你的第一个整数会有一些很大的值，你的第二个整数也会有，但在那之后它们会有垃圾值。（您创建了`arr`一个“自动”变量，该变量分配在堆栈上，因此其中会有随机垃圾；如果您将其设为静态变量，它将被预初始化为零字节。）

如果您更改 的声明`arr`，使其类型为`char`，您可以读取您的字符串，并且您的`for`循环将一次循环遍历这些字节。

然后，您可以编写一个字符串到二进制的转换器，或者您可以使用`strtol()`将基数设置为 2 进行转换。 `strtol()`并非在所有编译器中都可用；GCC 很好，但 Microsoft C 没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:48:25.217

PL。看看下面的代码（在 Linux 上使用 gcc 编译）是否适用于此。

```
#include<stdio.h>
#include<stdlib.h>
int main()
{
 char  arr[8];
 int cnt,i,temp=0;
 FILE * input;

if((input=fopen("data","r"))==NULL)
{
        fprintf(stderr,"cannot open file\n");
        exit(1);
}
 //Read the 8 bytes in a character array of size 8
 cnt = fread(arr,1,8,input);
 for (i = 0; i < cnt; i++)
 {
        //Now change it to 0/1 form by substracting 48
        arr[i] = arr[i] - '0';/* Ascii of 0 = 48*/
        //Also Left shift..
        arr[i] = arr[i] << (cnt - (i+1));
        //Now Bit wise OR with the integer...
        temp = temp | arr[i];
 }
  printf("The ascii value is %d and the character is %c\n", temp, temp);
  return 0; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:10:37.163

您首先声明`unsigned int arr[8];`这意味着 8 个整数或更准确地说是 8*4=32 个字节。之后，您读取 8 个字节，然后再次尝试输出 8 个整数。我想您想读取 8 个字节并将它们作为数字输出？如果您将 type 更改`int`为`char`，代码可能会起作用。如果文件大小为 32 字节并包含整数，您可能需要像这样更改 fread()：`fread(arr,sizeof(int),8,input);`

# android - 如何根据传感器输出更新数据库？

> ID：11326853
> 
> 赞同：0
> 
> 时间：2012-07-04T10:05:03.053
> 
> 标签：android, oracle10g, sensors, android-sensors

我必须为自动停车系统创建一个 Android 应用程序。让我给你这个应用程序开发的整体背景想法。

当我进入我的办公室时，我应该能够通过我的手机 Antroid App 找出哪个楼层有停车位。

停车位可用性信息应在我的 Android 应用程序将通过 web 服务访问的数据库中自动更新。

假设我要在每个停车位的前面放置一个传感器。因此，当一个人停车时，传感器将被激活。所以此时在我的数据库中应该输入一个新数据。

当那个人把他的车从那个停车位拿走时，我的传感器将处于非活动状态。所以此时应该从我的数据库中删除相应的数据。

所以基本上我想知道我们可以根据传感器输出进行数据库更新吗？如果是这样，我们怎么能达到？

如果您对理解我的要求有任何疑问，请告诉我。

期待您的快速回复。谢谢！

问候， Velava.S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:11:49.807

You would probably have to connect the sensors to a central server which would monitor the status of each sensor. Dependant on how the sensors worked they would either send a signal when there state changed, at fixed time intervals, or the server would have to poll input.
Once a change has been sent/recieved by the server it would update a database of all sensor states.

When your app then makes requests to this server it would respond with a formatted XML response on the availability of each floor.

I'm afraid I can't give exact details on how to connect the sensor array, most likely for this type of project it would be a custom built box, if you search around you should find some suppliers, or if you are just learning you can have a look at [http://www.arduino.cc/](http://www.arduino.cc/) - these are programmable microcontrollers so you could build a prototype with them.

# javascript - 有没有办法使用 Javascript 将 ASP.Net 隐藏字段值设置为 NULL？

> ID：11326857
> 
> 赞同：1
> 
> 时间：2012-07-04T10:05:21.867
> 
> 标签：javascript, jquery, asp.net, null, hidden-field

我正在查看大量有关如何使用 Javascript 设置隐藏字段值的示例。我的问题实际上是，您可以使用 Javascript/jquery 将隐藏字段值设置为 NULL，然后将该 NULL 反映在服务器端的值中吗？

每次我尝试设置 null 时，我都会返回空白。

我有一个特定的要求来了解 NULL 和空白之间的区别，并且客户端和服务器之间唯一允许的通信模式是 runat=server 隐藏字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:15:41.030

我可以想一种方法让它为空，完全删除`value`属性，或者更难删除`name`属性，这样它就不会回发，然后当这个输入再次具有值时将其添加回来。

或者将一个参数设置为该值，例如“null”，然后检查后面的代码。

想一想，这`null`是您列表中的另一个参数，仅此而已，并且回发的值实际上都是字符串。因此，您可能遇到的唯一冲突是将其设置为“null”，以防万一您有文本，但在文本上您可以与没有文本进行比较，并决定这是否可以为 null 或为空......是决定你必须做。

# java - 使用自定义注释添加 EJB 拦截器

> ID：11326862
> 
> 赞同：0
> 
> 时间：2012-07-04T10:05:31.177
> 
> 标签：java, ejb, interceptor

我有许多需要额外配置的 EJB3.0 拦截器。到目前为止，我只是简单地通过添加拦截器`@Interceptors( { MyInterceptor.class } )`，然后添加第二个自定义注释，如`@MyInterceptorConfiguration(value=something)`.

不过，这相当乏味。是否可以注释自定义注释以触发添加拦截器？理想情况下，我只想添加`@DoMyInterception(config=foo)`一个类并让它添加我的拦截器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:10:25.717

这仅在 EE 6 (EJB 3.1) 中使用 CDI[原型](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/stereotypes.html)注释（参见[拦截器绑定](http://docs.jboss.org/cdi/spec/1.0/html/interceptors.html)页面的示例）才有可能。

# android - 根据屏幕大小在位图上绘制

> ID：11326863
> 
> 赞同：0
> 
> 时间：2012-07-04T10:05:31.803
> 
> 标签：android, canvas, bitmap, draw, mutable

我正在与另外两个人一起研究一个 Android 项目 (2.2)。

我们希望显示一些大学建筑的地图，以便您更轻松地找到房间。我们使用自定义 ImageView ( [TouchImageView](https://github.com/MikeOrtiz/TouchImageView) )。

我使位图可变

`plant = plant.copy(Bitmap.Config.ARGB_8888, true);`

所以我可以把画布放在它上面。然后我在上面画一个红色圆圈

`Paint paint = new Paint(); paint.setColor(Color.RED); Canvas canvas = new Canvas(plant); canvas.drawCircle(xFromSearch, yFromSearch, 15, paint);`

xFromSearch 和 yFromSearch 是已经用给定值初始化的全局变量。

它适用于我的 Google G1，但对于其他显示器尺寸（例如 AVD 或三星 Galaxy SII），圆圈被画在错误的位置......

当我做某事时它可以工作吗

`Display display = getWindowManager().getDefaultDisplay(); screenWidth = display.getWidth(); screenHeight = display.getHeight();`

??

我希望我给了你所有你需要的信息，有人可以帮助......非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:04:29.267

试试这个

```
int scale = getApplicationContext().getResources().getDisplayMetrics().density;
canvas.drawCircle(xFromSearch*scale , yFromSearch*scale , 15*scale , paint); 
```

# javascript - 将评论附加到图像的 jQuery 框架，例如 Facebook 或 Flickr

> ID：11326865
> 
> 赞同：3
> 
> 时间：2012-07-04T10:05:32.973
> 
> 标签：javascript, jquery, ruby-on-rails

在我的 Rails 应用程序中，我想为上传的图像添加反馈。有谁知道允许在图像上轻松附加评论的 Javascript/jQuery/Rails 解决方案？例如在 Flickr 上： http: [//www.flickr.com/photos/galt-museum/4112917253/](http://www.flickr.com/photos/galt-museum/4112917253/)

我认为 Flickr 使用 YUI，但我没有这方面的经验，我更喜欢 jQuery 世界的东西！

重要的是，评论可以附加到该图像上的给定位置。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:31:42.597

试试这个：[http](http://www.bennadel.com/blog/1839-jQuery-Photo-Tagger-Plugin-For-Flickr-Style-Photo-Tagging.htm)
://www.bennadel.com/blog/1839-jQuery-Photo-Tagger-Plugin-For-Flickr-Style-Photo-Tagging.htm 官方项目页面：[http ://www.bennadel.com/项目/jquery-photo-tagger.htm](http://www.bennadel.com/projects/jquery-photo-tagger.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:27:05.493

最后我选择了： http: [//odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

# javascript - 带有 jQ uery 的图像滚动器，支持图像预缓存

> ID：11326868
> 
> 赞同：0
> 
> 时间：2012-07-04T10:05:40.867
> 
> 标签：javascript, jquery, gallery, image-gallery, scroller

我需要实现的一个很好的例子可以在[http://www.gojee.com](http://www.gojee.com)上看到，不同的食物图像可以有效地滚动，图像到图像使用 javascript，并且 sript 支持下一个图像预缓存。他们的 JS 被混淆和最小化，所以我不能只是“看”他们是如何实现它的。

任何人都可以指向一个 jQuery 插件，它允许“分页”图像并嵌入下一个图像的预缓存，但不知道像 jQuery 工具“可滚动”控件这样的整个列表？

# sql - SQL - 从父列和子列创建树

> ID：11326869
> 
> 赞同：1
> 
> 时间：2012-07-04T10:05:43.560
> 
> 标签：sql, tree, parent, teradata

我在弄清楚如何创建一个表来显示子列与其后续父列的所有关系时遇到了一些麻烦。我在 Teradata SQL 助手中使用 SQL。

例如，这是我拥有的数据：

```
家长 | 孩子                               
一个 | 乙                                                     
一个 | C         
乙| D           
E | 乙

```

我希望能够获得一个输出表，显示最低级别的子元素及其所有后续父元素，如下所示：

```
儿童 | 父L1 | 父级 L2        
C | 一种       
D | 乙| 一种       
乙

```

问题是，我不知道我的数据中存在多少父级，并且我只能访问查询数据，因此我无法创建新表、更改此表或更改任何值。

有没有办法在查询中获得预期的输出？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:22:00.867

像这样的东西（用 PostgreSQL 测试，因为我没有可用的 Teradata）：

```
with recursive tree as (

    select parent, child, child||'/'||parent as path
    from foo
    where child not in (select parent from foo)
    or parent = child

    union all

    select c.parent, c.child, p.path||'/'||c.parent
    from foo c
      join tree p on c.child = p.parent
    where c.parent <> c.child
)
select path
from tree
order by parent; 
```

# c# - SqlCommand 备份数据库

> ID：11326874
> 
> 赞同：2
> 
> 时间：2012-07-04T10:05:56.087
> 
> 标签：c#, sql, database, sql-server-2008, tsql

我有一个 c# winforms 应用程序（.net 2 框架）。我需要从我的应用程序中备份数据库。我试图通过异步执行 SqlCommand 来做到这一点。代码无一例外地执行，但我没有在我的目的地获得 .bak 文件......

这是代码：

```
#region backup DB using T-SQL command

string connString = "Data Source=" + ConfigurationManager.AppSettings.Get("localhost_SQLEXPRESS") + ";Initial Catalog=" + db + ";UserID=" + ConfigurationManager.AppSettings.Get("user") + ";Password=" + ConfigurationManager.AppSettings.Get("password");
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(connString);
builder.AsynchronousProcessing = true;
using (SqlConnection sqlConnection1 = new SqlConnection(builder.ConnectionString))
{
    using (SqlCommand cmd = new SqlCommand("BACKUP DATABASE " + db + " TO DISK=" + location + "\\" + ConfigurationManager.AppSettings.Get("DataBaseBackupsFolderName") + "\\" + db + ".bak'", sqlConnection1))
    {    
        sqlConnection1.Open();    
        IAsyncResult result = cmd.BeginExecuteNonQuery();

        while (!result.IsCompleted)
        {
            Thread.Sleep(100);
        }
    }
}
#endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:14:04.507

在您的 SQL 备份行中，您似乎在备份文件路径的开头缺少一个单引号。

```
 using (SqlCommand cmd = new SqlCommand("BACKUP DATABASE " + db + " TO DISK='" + location + "\\" + ConfigurationManager.AppSettings.Get("DataBaseBackupsFolderName") + "\\" +db + ".bak'", sqlConnection1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:11:32.490

您应该调用[`EndExecuteNonQuery()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.endexecutenonquery)SqlCommand 实例以引发任何最终异常，从而了解您的 SQL 语句有什么问题：

```
IAsyncResult result = cmd.BeginExecuteNonQuery();

// Wait for the command to complete

result.AsyncWaitHandle.WaitOne();

// End the execution and throw any eventual exception

cmd.EndExecuteNonQuery(result); 
```

正如你所看到的，我还用更有效的等待命令的等待句柄替换了你原来的 Thread.Sleep() 循环块。

引用[MSDN](http://msdn.microsoft.com/en-us/library/ms228963.aspx)：

> 对于对 BeginOperationName 的每次调用，应用程序还应调用 EndOperationName 以获取操作结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:15:53.867

尝试隔离问题的两个建议：

1）获取结果字符串（您在 SqlCommand 上执行的字符串并在 SQL Server 上手动运行它以确保备份命令正确。

2) 尝试使用常规 ExecuteNonQuery 的同步命令，查看是否收到 SQL Server 异常

# javascript - 设置：Firefox 的配置参数

> ID：11326876
> 
> 赞同：2
> 
> 时间：2012-07-04T10:06:09.360
> 
> 标签：javascript, firefox

我正在使用 Mozilla Firefox 5.0。我想使用 JavaScript 代码更改 about:config 的“signed.applet.codebase_principal_support”参数的值。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:08:52.593

不，那是不可能的。如果您可以访问硬盘驱动器，则可以更改`prefs.js`文件。

该文件通常位于 windows 下的`%appdata%\Mozilla\Firefox\Profiles\<randompart>.default\prefs.js`. 您可以在那里添加或修改这样的一行：

```
user_pref("signed.applets.codebase_principal_support", <<your value>>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-02T13:40:55.557

我还不能发表评论，所以我在答案中写了这个。请不要更改 prefs.js，正如文件开头和官方网站所说的那样。您可以更改 user.js，这将覆盖 about:config 在启动 firefox 时所做的所有设置，或者使用 API（我不太了解，自行查找）或模拟 about:config 中的访问浏览器。

# git - 如何将客户端挂钩应用于 git 中的所有本地存储库？

> ID：11326895
> 
> 赞同：5
> 
> 时间：2012-07-04T10:07:10.643
> 
> 标签：git, githooks

我在`myrepo/.git/hooks`.

```
#!/bin/sh
message=`cat $1`
c=`echo $message|grep -c 'fff'`
if[ $c -gt 0 ];then
  echo "Error"
  exit 1
fi
exit 0 
```

当我尝试像这样提交时，会发生错误并阻止提交。

```
$ git commit -m "reffrffffeffff fffeef"
Error 
```

然后我执行以下操作：

```
$ cd myrepo
$ mkdir .hooks
$ mv .git/hooks/commit-msg .hooks/commit-msg
$ ln -s .hooks/commit-msg .git/hooks/commit-msg 
```

并尝试使用相同的消息再次提交。提交成功。我想我可能在上述步骤中做错了什么？

谁能告诉我如何制作客户端钩子，并让每个开发人员都从这个钩子中获得限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:18:10.733

### 您的步骤中的问题：

你做了一个错误的符号链接。符号链接`commit-msg`指向。`.git/hooks/.hooks/commit-msg`相反，试试这个：

```
$ cd myrepo
$ mkdir .hooks
$ cd .git/hooks
$ mv commit-msg ../../.hooks/commit-msg
$ ln -s !$ commit-msg  # lazy: '!$' expands to '../../.hooks/commit-msg' 
```

### 如何限制每个开发者的提交信息

如您所知，`commit-msg`钩子是客户端钩子。如果您希望每个开发人员的提交消息在他们不遵循某些方案时被拒绝，您需要让开发人员自己安装钩子。您不能将钩子作为存储库的一部分进行维护，但可以选择将它们保存在另一个 Git 存储库中。（需要明确的是，您*可以*将它们保存在您的存储库中，但您的开发人员仍然需要在`.git/hooks`目录中创建符号链接，就像您所做的那样）。

如果您真的想强制开发人员受到钩子的限制，请查看[服务器端钩子](https://git-scm.com/book/es/v2/Customizing-Git-An-Example-Git-Enforced-Policy#_an_example_git_enforced_policy)。例如，您可以使用[`pre-receive`](https://git-scm.com/book/es/v2/Customizing-Git-Git-Hooks#Server-Side-Hooks)来检查所有推送的提交消息是否符合您的方案。

[Chapter 8.3 (Customizing Git - Git Hooks)](http://git-scm.com/book/ch8-3.html) of Pro Git is an excellent resource. There are some quality walk-throughs there to help you. You can also take a look at the example files included in `.git/hooks` for your repository.

# c# - Linq.Contains 能否抛出“集合已修改；枚举操作可能无法执行”。例外？

> ID：11326898
> 
> 赞同：0
> 
> 时间：2012-07-04T10:07:23.110
> 
> 标签：c#, linq, exception, collections, dictionary

我有以下代码向字典添加一些值。将项目添加到字典时方法可以`Linq.Contains`抛出吗？`System.InvalidOperationException` `"Collection was modified; enumeration operation may not execute."`

```
private static object _lock = new object();
private static Dictionary<Type, A> _dic = new Dictionary<Type, A>();

public static AddNewValue(Type t, A value)
{
    if ( !_dic.Keys.Contains( t ) )
    {
        lock ( _lock )
        {
            if ( !_dic.Keys.Contains( t ) )
            {
                _dic.Add( t, value );
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:12:38.070

是的，这不是线程安全的。如果一个线程正在修改字典，而另一个线程`Contains`在锁外执行，则会出现异常。

# git - git检查文件是否存在于带有SHA的HEAD上？

> ID：11326899
> 
> 赞同：4
> 
> 时间：2012-07-04T10:07:23.757
> 
> 标签：git, sha

我需要检查最近一次提交 ( `HEAD`) 中是否存在文件。我一直在这样做

```
git cat-file -e HEAD:path/to/file 
```

但我意识到如果文件已被移动或重命名，这可能会出现问题。有没有办法根据 SHA 检查文件？我试过

```
git cat-file -e SHA 
```

但它似乎搜索所有提交，而不仅仅是最近的。

根据[Alan Curry 的回答](https://stackoverflow.com/a/11327054)，这似乎可行

```
git ls-tree -r HEAD | grep SHA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:16:14.483

你可以解析输出`git ls-tree -r HEAD`

# jakarta-ee - 如何使用 Web 服务接口作为插件动态加载 EJB？

> ID：11326900
> 
> 赞同：0
> 
> 时间：2012-07-04T10:07:24.343
> 
> 标签：jakarta-ee, soap, jboss, ejb

我有一个 Web 应用程序，它的数据有一个可选的 SOAP 接口（作为一组 EJB 实现）。主应用程序和 SOAP 接口是分开的，只共享数据库访问代码，但最近它们被集成为一个应用程序（SOAP 接口被打包为一个 JAR，添加到主应用程序的依赖项中）。两者都托管在 JBoss 服务器上。

该解决方案有效，但我们的应用程序使用模块化插件界面，允许从应用程序的用户界面打开和关闭特定功能，使用 Maven 来定位插件。然后使用`URLClassLoader`应用程序的默认类加载器作为父级加载插件，并注册到映射到的通用页面调度程序 servlet `*.page`：

```
<!-- from web.xml -->
<servlet-mapping>
  <servlet-name>dispatcer</servlet-name>
  <url-pattern>*.page</url-pattern>
</servlet-mapping> 
```

在当前解决方案中，EJB 使用以下方式公开`web.xml`：

```
<!-- the very same web.xml -->
<servlet>
  <display-name>BaseService</display-name>
  <servlet-name>BaseService</servlet-name>
  <servlet-class>ourapp.services.BaseService</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>BaseService</servlet-name>
  <url-pattern>/services/Base/*</url-pattern>
</servlet-mapping> 
```

当然，当 EJB:s 在运行时加载时，我们不能提前指定它们，所以：

**如何从 JAR 加载 EJB:s 并在运行时将它们公开为 Web 服务？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:14:25.013

没有标准的 API 可以动态加载 EJB（我什至不知道有任何供应商 API 允许这样做）。通常，EE 部署侧重于预先打包，使应用程序服务器能够内省您的应用程序并执行各种准备和优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T14:20:24.000

您可以将 Web 应用程序拆分为 EJB jar 和 WAR 并部署/重新部署。然后在您的应用程序中，您可以检查特定服务的可用性。

如果您使用 JBoss AS 7，那么您可以利用管理 API 来部署/取消部署插件 EJB jar。
看这里：

*   [https://docs.jboss.org/author/display/AS7/The+native+management+API](https://docs.jboss.org/author/display/AS7/The+native+management+API)
*   [https://community.jboss.org/thread/155937](https://community.jboss.org/thread/155937)
*   [Jboss as 7 使用 HTTP 管理 api 部署](https://stackoverflow.com/questions/10395271/jboss-as-7-deploy-using-http-managment-api)

# php - 在没有下载提示的浏览器中查看 pdf

> ID：11326901
> 
> 赞同：1
> 
> 时间：2012-07-04T10:07:29.027
> 
> 标签：php

firefox 每次都提示下载 PDF 文件，但 Chrome 在浏览器中显示 PDF 而没有下载提示，但我需要在任何浏览器中显示 PDF 而没有下载提示，有人可以帮我吗？

**这是代码**

```
$file = 'the_pdf.pdf';

header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="' . $file . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
header('Accept-Ranges: bytes');

@readfile($file); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:10:50.313

"show PDF in any browser": You can't, since most browser allow to override the inline display of plugins via some setting. My Opera for example always opens PDF-links with a download dialog. A web-developer can't do anything about this. And this is intended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:09:01.623

这将基于插件。如果浏览器不知道如何打开文件，则会提示下载。

# java - 使用 ODBC/JDBC 连接到 MSAccess 可在 Eclipse 上运行，但未发布

> ID：11326903
> 
> 赞同：0
> 
> 时间：2012-07-04T10:07:31.737
> 
> 标签：java, database, eclipse, ms-access, odbc

我正在使用 jdbc-odbc 连接来读取 Access 数据库。一切都在使用 Eclipse，但在我发布的 .jar 中，我有“Source de données introuvable et nom de Pilote non spécifié”（“未找到数据源名称且未指定默认驱动程序”）。我包括了 rt.jar（驱动程序）、清单等。你知道吗？

```
public class SQL {
    public String url = "d:/neg_p/MonBureau/AccessToWeb/pfsce.mdb";
    public Connection connection = null;

    //variables pour JDBC
    private String urljdbc = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+url+";"; // format spécifique à Access
    private String login = "";
    private String password = "";

    public boolean Connect()
    {
        try
        {
            // connexion
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            File f = new File(url);
            if (!f.exists())
                System.out.println("Fichier non trouvé.");
            this.connection = DriverManager.getConnection(urljdbc,login,password);
            return true;
        }
        catch (Exception e)
        {
            System.out.println("Erreur lors de la connexion à la base de données : "+e.getMessage());
            e.printStackTrace();
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:51:20.373

答案是：jar 必须使用 java 32bits 启动。

在 win7 64 上，您必须卸载 java64。如果命令 java 不存在（cmd），则必须将环境变量“path”设置为 jdk 或 jre。

# ruby-on-rails - Rails - 可扩展的计算模型

> ID：11326904
> 
> 赞同：2
> 
> 时间：2012-07-04T10:07:38.203
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, model-view-controller, model

我目前在我的 rails 应用程序中有一个计算结构，其中包含模型`metric`和.`operand``operation_type`

目前`metric`模型有很多`operands`，可以进行基于的计算`operation_type`（如求和、乘等），每个`operand`都定义为右或左（即如果运算是除法，就可以识别分子和分母）。

目前，操作数始终是某个模型的属性，例如`@customer.sales.selling_price.sum`.

为了使这种可扩展性，需要允许操作数*是*某种属性，或者是先前操作的结果，即操作数可以是度量。

我已经包含了我的模型当前外观的图表：

![在此处输入图像描述](../Images/91d2002c5078fc4a6514c842e895f2fe.png)

谁能帮助我以最优雅的方式让操作数成为实际操作数或其他指标？

谢谢！

编辑：似乎基于迄今为止唯一的答案，也许多态关联是解决这个问题的方法，但答案是如此简短，我不知道如何以这种方式使用它们 - 任何人都可以详细说明吗？

编辑2：好的，我想我到了某个地方 - 基本上我现在有一个指标，它有一个操作数，还有一个操作数有一个指标。我需要一个多态自联接，其中一个指标也可以有许多指标——我是否需要将其称为其他东西，也许是计算的_metrics，以便指标模型可以使用自己？这会让我遇到一个指标有很多操作数，而一个指标有很多计算指标的情况。

编辑 3：我已经更新了我的模型，如下所示，如果对这是否是解决问题的好方法提出任何批评，我将不胜感激。您会注意到，我添加了一个名为的模型，该模型`calculated_metric`本质上是其他指标的持有者——即可以使用两个操作数或一个操作数和一个计算指标的组合来计算一个指标。

![修正模型](../Images/4ade55a767bf90617b7691f1f6516e9c.png)

编辑 4：为任何可以向我展示详细的 rails-y 方法的人添加了赏金。

编辑 5：赏金仍在等待中；虽然下面提供的答案很详细，但我正在寻找最好的方法，而不是解决问题的替代方法（即请让我知道解决问题的最佳方法，而不是寻找回避它的方法，因为我需要这个功能）。谢谢！

编辑6：对此没有引起太多关注-增加赏金会有所帮助，还是这个问题不是跑步者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:55:44.890

考虑退后一步，问问自己是否真的需要拆分表达式，并将它们逐个存储在关系数据库中。

*   这对您的目的真的有意义吗？
*   其他应用程序是否会查询包含表达式片段的基础表？
*   您是否要生成显示每个运算符的使用频率的报告？
*   或者您是否因为最熟悉而使用关系数据库来存储表达式？

RDBMS 似乎真的不是这项工作的正确工具。

您可以将表达式存储为字符串，然后在从文件或数据库加载字符串时将它们解析为表达式树。有很多例子展示了如何编写表达式解析器。

所以用 Ruby 和 Rails 的术语来说。我会做以下事情：

1.  将构成表达式树的大多数类变成不扩展 ActiveRecord 的普通旧 Ruby 类。
2.  在每个类中实现 to_s，这样如果您将 to_s 发送到表达式树的根，您将获得表达式的格式良好的字符串表示形式作为回报。
3.  实现可以从字符串创建表达式树的 ExpressionParser 或 ExpressionBuilder 或 ExpressionFactory（使用您喜欢的任何术语）。
4.  然后，如果某个 ActiveRecord 模型曾经指向它专门“拥有”的指标，您可以让它指向内存中的表达式树，但在保存自己时让它存储字符串表示形式（通过 to_s）。
5.  如果多个 ActiveRecord 模型在旧设计中指向同一个（共享）表达式，那么您必须为 SharedExpressions 创建一个类，该类使用字符串作为其持久表示，然后将 AciveRecords 更改为指向新的 SharedExpression。

如果你走这条路，像 before_save 这样的 ActiveRecord 回调可能会很有用。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T20:04:28.100

如果我正确理解您的问题，我相信您正在寻找[Polymorphic Associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

例子：

```
class Metric < ActiveRecord::Base
   belongs_to :calculable, :polymorphic => true
   has_many :operations, :as => calculable
end

class Operand < ActiveRecord::Base
   belongs_to :calculable, :polymorphic => true
end 
```

# django - 使用特殊字符反转 Django URL

> ID：11326908
> 
> 赞同：1
> 
> 时间：2012-07-04T10:07:50.540
> 
> 标签：django, url

除了宽空格、正斜杠 (/) 和破折号 (-) 之外，我还需要为任何字符定义部件号。此外，我想要像 /part// 这样的网址

除了在我的模板中进行反向 url 查找之外，我还试图让两个 urls.py 都能正常工作。

在 urls.py 我已经定义

```
url(r'^part/(?P<part_number>[A-Z0-9- ]{3,20})', 'inventory.views.part'), 
```

在我使用的模板中

```
{% url inventory.views.part part.part_number %}" 
```

但这会导致“Caught NoReverseMatch while rendering”异常，两个参数都带有斜线和空格。

我在管理界面中看到空格部件号显示正确（仅带有空格），并且带有斜线的部件号在 url 中以“_2F”编码显示。例如，部件号“1A17OE / JHA7660”在管理界面中编码为“/part/1A17OE _2F JHA7660/”。

管理员 url 是如何做到这一点的，我该如何做同样的事情？

提前致谢， 拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:15:56.400

您应该使用[`urlencode`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#urlencode)对零件编号中的空格进行编码。

# php - jQuery Validator：验证 AlphaNumeric + Space 和 Dash

> ID：11326910
> 
> 赞同：9
> 
> 时间：2012-07-04T10:07:55.983
> 
> 标签：php, jquery

我的网站上安装了 jQuery 验证插件 (http://docs.jquery.com/Plugins/Validation)。

我正在使用此代码来验证文本字段中的字母数字，并且它有效。但它不允许空格和破折号 (-)。

```
$.validator.addMethod("titleAlphaNum", function(value, element, param) 
{
return value.match(new RegExp("^" + param + "$"));
}); 
```

如何使它与空间和破折号一起使用？谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-04T10:17:26.070

**工作演示** [http://jsfiddle.net/cAADx/](http://jsfiddle.net/cAADx/)

`/^[a-z0-9\-\s]+$/i`应该做的伎俩！

g = /g 修饰符确保所有出现的“替换”

i = /i 使正则表达式匹配不区分大小写。

**好读：** [http ://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

希望这可以帮助，

**代码**

```
$(function() {

    $.validator.addMethod("loginRegex", function(value, element) {
        return this.optional(element) || /^[a-z0-9\-\s]+$/i.test(value);
    }, "Username must contain only letters, numbers, or dashes.");

    $("#myForm").validate({
        rules: {
            "login": {
                required: true,
                loginRegex: true,
            }
        },
        messages: {
            "login": {
                required: "You must enter a login name",
                loginRegex: "Login format not valid"
            }
        }
    });

});​ 
```

**将在 2 分钟内删除此图像，**请参阅此处的 robert，如下所示[http://jsfiddle.net/5ykup/](http://jsfiddle.net/5ykup/)

![在此处输入图像描述](../Images/1a4809d35c5b00f5e2e32b1e04c732af.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:14:33.497

我认为如果您将以下 RegExp 传递为`param`：

```
[A-za-z0-9_\-\s]+ 
```

# wordpress - 如何按日期过滤类别帖子？

> ID：11326914
> 
> 赞同：1
> 
> 时间：2012-07-04T10:08:08.520
> 
> 标签：wordpress

我希望在类别页面顶部有一个下拉菜单，以便我可以按日期过滤帖子。

我很可能不得不使用自定义字段，但这不是问题。

我知道您可以使用 GET 样式变量进行自定义帖子查询，但是启用漂亮的 URL 后，我似乎无法使用 GET 变量来过滤特定帖子（例如`www.domain.com/category/?orderby=title&order=ASC`等）

我曾尝试寻找插件，但似乎没有什么能满足我的需要，而且我还注意到这里有很多关于类似主题的讨论，但没有适合我的情况的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:19:32.567

一般查询是这样的：

```
<?php $posts = query_posts( $query_string . '&orderby=date&order=asc' ); ?>
    <?php if( $posts ) : ?>
    //whatever
            <?php foreach( $posts as $post ) : setup_postdata( $post ); ?>
        //whatever
            <p><?php the_content(); ?></p>
                <?php endforeach; ?>

    <?php endif; ?> 
```

对于下拉菜单，您可以执行以下操作：

```
$args = $args=array(
      'cat' => $cat_id,
      'post_type' => 'post',
      'post_status' => 'publish',
      'posts_per_page' => -1,
      'orderby' => 'DATE', 
       'order' => 'ASC' // or DESC
    );

<form action="<? bloginfo('url'); ?>" method="get">
 <select name="page_id" id="page_id">
 <?php
 global $post;
 $args = array( 'numberposts' => -1);
 $posts = get_posts($args);
 foreach( $posts as $post ) : setup_postdata($post); ?>
                <option value="<? echo $post->ID; ?>"><?php the_title(); ?></option>
 <?php endforeach; ?>
 </select>
 <input type="submit" name="submit" value="view" />
 </form> 
```

还有另一个选择：

```
<?php
    $cat_id = get_cat_ID('uncategorized'); //your-category
    $args=array(
      'cat' => $cat_id,
      'post_type' => 'post',
      'post_status' => 'publish',
      'posts_per_page' => -1,
      'orderby' => 'DATE', 
       'order' => 'ASC' // or DESC
    );
    $my_query = null;
    $my_query = new WP_Query($args);
    if( $my_query->have_posts() ) {
?>
    <form name="jump">
        <select name="menu">
            <?php
              while ($my_query->have_posts()) : $my_query->the_post(); ?>
                <option value="<?php the_permalink() ?>"><?php the_title(); ?></option>
                <?php

              endwhile;
            }
            ?>
        </select>
        <input type="button" onClick="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="Go">
    </form>

<?php
    wp_reset_query();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T09:33:25.280

我正在寻找按日期搜索的帖子。无法在 stackoverflow 上找到合适的解决方案。然后我打印了 wp_query 对象并将这个东西整理出来。它对我有用。在我的场景中，我按标题或日期搜索帖子。这是钩子的代码。

```
function SearchFilter($query) {
if ($query->is_search) {
    $query->set('post_type', 'post');
    // check if query is a date
    $search_query   = $query->query['s'];
    $date_format        = DateTime::createFromFormat('d/M/Y', $search_query);
    if ($date_format)
    {
        $dte            = date('j',$date_format->getTimestamp());
        $month          = date('n',$date_format->getTimestamp());
        $year           = date('Y',$date_format->getTimestamp());
    }
    if (isset($dte) && isset($month) && isset($year)) {
        unset($query->query['s']);
        unset($query->query_vars['s']);
        $query->query['date_query'] = array(
                    array(
                        'year'  => $year,
                        'month' => $month,
                        'day'   => $dte,
                    )
                );
        $query->set('date_query', array(
                        array(
                            'year'  => $year,
                            'month' => $month,
                            'day'   => $dte,
                        )
                    )
                );

    }
}
return $query;
}

add_filter('pre_get_posts','SearchFilter'); 
```

你可以注意到这个过滤器会自动检查传递的参数是字符串还是日期。米使用

```
$query->set('post_type', 'post') 
```

要获得发布结果，否则它也会获取页面。假设您在每个帖子下都有日期，您可以将 href 添加到该日期。因此，要在 href 末尾添加该日期的所有帖子，请添加搜索参数，例如 ?s=something

```
http://my.blog?s=1/Jun/2015 
```

等等模板你不需要写你的自定义，而只需使用默认的模板功能，比如`have_posts()`

# css - CSS: :last-child 在列表项上

> ID：11326915
> 
> 赞同：14
> 
> 时间：2012-07-04T10:08:18.680
> 
> 标签：css, html-lists, css-selectors

如果 ul 有多个类的 li 项，是否可以使用 :last-child 获取特定类的最后一项？

例如，考虑以下内容：

```
<ul class="test">
    <li class="one">
    <li class="one">
    <li class="one">
    <li class="two">
    <li class="two">
</ul> 
```

我想在最后一个具有“一”类的 li 中添加一些样式（即列表中的第三个）。

我尝试了以下，但它不起作用。

```
ul.test li.one:last-child 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-04T10:14:28.347

[*那还*](http://dev.w3.org/csswg/selectors4/#nth-match)不可能。

*   [`:last-child`](https://developer.mozilla.org/en/CSS/:last-child)选择最后一个孩子，而不考虑标签名称等。
*   可能的替代方法是[`:last-of-type`](https://developer.mozilla.org/en/CSS/:last-of-type)选择最后一次出现的**tag**。它忽略了类名等。

您唯一的选择是为该元素添加一个特定的类名，或者使用 JavaScript 添加这个类名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T11:44:11.517

您可以选择第 n 个孩子，而不是为每个 li 上课，您可以在其中按 li 编号分配样式。

如果你想为你的第三个 li 提供单独的 css，那么你需要写

```
li:nth-child(3) {
    color: green;   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T10:22:46.833

您可以使用 jquery 来做到这一点：http: [//jsfiddle.net/surendraVsingh/HyAhL/2/](http://jsfiddle.net/surendraVsingh/HyAhL/2/)

**jQuery代码：**

```
var n = $('.one').length;
$('.one').eq(n-1).css('color', 'red'); 
```

# php - 通过 cURL 和 PHP 在 Google Docs 中创建空电子表格

> ID：11326916
> 
> 赞同：0
> 
> 时间：2012-07-04T10:08:24.567
> 
> 标签：php, curl, google-docs-api, google-drive-api

我正在尝试在不使用 Zend 库的情况下在 Google 文档中创建一个新的电子表格。我浏览了文档并尝试按照步骤操作，但现在我被卡住了。我的代码看起来像这样

```
 $curl = curl_init();

    $headers = array(
        "GData-Version: 3.0",
        "Authorization: GoogleLogin auth=" . $myToken,
        "Content-Length: 350",
        "Content-Type: application/atom+xml",
        "X-Upload-Content-Length: 0"
    );      

    $post_field = '<?xml version="1.0" encoding="UTF-8"?>
        <entry xmlns="http://www.w3.org/2005/Atom" xmlns:docs="http://schemas.google.com/docs/2007">
        <category scheme="http://schemas.google.com/g/2005#kind"
            term="http://schemas.google.com/docs/2007#spreadsheet"/>
        <title>Mytitle</title>
        </entry>';

    curl_setopt($curl, CURLOPT_URL, 'https://docs.google.com/feeds/upload/create-session/default/private/full');
    curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_field);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);      

    $response = curl_exec($curl);
    curl_close($curl); 
```

该令牌似乎工作正常，因为我可以使用它从谷歌文档中检索数据。令我惊讶的是，我没有得到 API 的响应。在尝试不同的解决方案时，我通常会收到一条错误消息，但这里的响应字符串是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T03:26:27.583

您正在发送请求以启动可恢复的上传会话 (https://developers.google.com/gdata/docs/resumable_upload)，但从未发送实际内容。

创建空文件时不需要恢复上传，而是将您的请求发送到[https://docs.google.com/feeds/default/private/full](https://docs.google.com/feeds/default/private/full)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:11:52.033

如果可以，您应该改用 Google Drive API 的[files.insert](https://developers.google.com/drive/v2/reference/files/insert)方法。

# android - Android Gallery 问题，内存不足

> ID：11326919
> 
> 赞同：0
> 
> 时间：2012-07-04T10:08:33.453
> 
> 标签：android, bitmap, garbage-collection, android-gallery, virtual-memory

以下代码给出 java.lang.OutOfMemoryError : bitmap超出VM预算

我正在编写一个应用程序来浏览一系列全屏图像。我知道我将所有图像一起加载，这就是导致问题的原因，但我不知道如何解决这个问题。有人请帮忙。

```
 package akash.gal;

    import android.app.Activity;
    import android.content.Context;
    import android.content.res.TypedArray;
    import android.os.Bundle;
    import android.util.DisplayMetrics;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.BaseAdapter;
    import android.widget.Gallery;
    import android.widget.ImageView;

    public class GalActivity extends Activity {
    /** Called when the activity is first created. */
    Integer imageids[]={R.drawable.one,R.drawable.two,R.drawable.three};
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Gallery gallery=(Gallery) findViewById(R.id.gallery1);
        gallery.setAdapter(new ImageAdapter(this));
    }
    public class ImageAdapter extends BaseAdapter{

    private Context context;
    private int itemBackground;
    public ImageAdapter(Context c)
    {
        context=c;
        TypedArray a=obtainStyledAttributes(R.styleable.Gallery1);
        itemBackground=a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground,0);
        a.recycle();
    }
        public int getCount() {
            // TODO Auto-generated method stub
            return imageids.length;
        }

        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            // TODO Auto-generated method stub
            ImageView imageView=new ImageView(context);
            imageView.setImageResource(imageids[arg0]);
            imageView.setScaleType(ImageView.ScaleType.FIT_XY);
            DisplayMetrics dm=new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(dm);
            imageView.setLayoutParams(new Gallery.LayoutParams(dm.widthPixels,dm.heightPixels));
            imageView.setBackgroundResource(itemBackground);
            return imageView;

        }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:41:06.340

# 在主要活动中：-

```
public class Main extends Activity {

    String mImagesPath;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mImagesPath = this.getFilesDir().getParent() + "/images/";
        createImagesDir(mImagesPath);
        copyImagesToStorage();
        loadGridView();
    }

    /**
     * Method handles the logic for setting the adapter for the gridview
     */
    private void loadGridView(){

        GridView lLazyGrid = (GridView) this.findViewById(R.id.gridview);
        try {
            LazyImageAdapter lLazyAdapter = new LazyImageAdapter(this.getApplicationContext(),
                    null,
                    mImagesPath);
            lLazyGrid.setAdapter(lLazyAdapter);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    /**
     * Copy images from assets to storage
     */
    private void copyImagesToStorage(){
        AssetManager lAssetManager = getAssets();
        String[] lFiles = null;
        String lTag = "copyImageFail";

        try {
            // get all of the files in the assets directory
            lFiles = lAssetManager.list("");
        } catch (IOException e) {
            Log.e(lTag, e.getMessage());
        }

        for(int i=0; i<lFiles.length; i++) {
            // We have a file to copy

            try {

                // copy the file
                copyFile(lFiles[i], mImagesPath + lFiles[i]);
            } catch(Exception e) {
                Log.e(lTag, e.getMessage());
            }       
        }
    }

    /**
     * Method copies the contents of one stream to another
     * @param aIn stream to copy from
     * @param aOut stream to copy to
     * @throws IOException
     */
    private void copyFile(String aIn, String aOut) throws IOException {
        byte[] lBuffer = new byte[1024];
        int lRead;
        final int lOffset = 0;

        // create an in and out stream
        InputStream lIn = getAssets().open(aIn);
        OutputStream lOut = new FileOutputStream(aOut);

        // Copy contents while there is data
        while((lRead = lIn.read(lBuffer)) != -1){
          lOut.write(lBuffer, lOffset, lRead);
        }

        // clean up after our streams
        lIn.close();
        lIn = null;
        lOut.flush();
        lOut.close();
        lOut = null;
    }

    /**
     * Create the directory specified at aPath if it does not exist
     * @param aPath directory to check for and create
     */
    private void createImagesDir(String aPath){
        File lDir = new File(aPath);
        if(!lDir.exists()){
            lDir.mkdir();
        }
    }
} 
```

======================================

# 在 ImageLoader 类中：

```
public class ImageLoader extends Thread {

    public interface ImageLoadListener {

        void handleImageLoaded(ViewSwitcher aViewSwitcher, ImageView aImageView, Bitmap aBitmap);
    }

    private static final String TAG = ImageLoader.class.getSimpleName();
    ImageLoadListener mListener = null;
    private Handler handler;

    /**
     * Image loader takes an object that extends ImageLoadListener
     * @param lListener
     */
    ImageLoader(ImageLoadListener lListener){
        mListener = lListener;
    }

    @Override
    public void run() {
        try {

            // preparing a looper on current thread         
            // the current thread is being detected implicitly
            Looper.prepare();

            // Looper gets attached to the current thread by default
            handler = new Handler();

            Looper.loop();
            // Thread will start

        } catch (Throwable t) {
            Log.e(TAG, "ImageLoader halted due to a error: ", t);
        } 
    }

    /**
     * Method stops the looper and thus the thread
     */
    public synchronized void stopThread() {

        // Use the handler to schedule a quit on the looper
        handler.post(new Runnable() {

            public void run() {
                // This runs on the ImageLoader thread
                Log.i(TAG, "DownloadThread loop quitting by request");

                Looper.myLooper().quit();
            }
        });
    }

    /**
     * Method queues the image at path to load
     * Note that the actual loading takes place in the UI thread
     * the ImageView and ViewSwitcher are just references for the
     * UI thread.
     * @param aPath      - Path where the bitmap is located to load
     * @param aImageView - The ImageView the UI thread will load 
     * @param aViewSwitcher - The ViewSwitcher that needs to display the imageview
     */
    public synchronized void queueImageLoad(
            final String aPath, 
            final ImageView aImageView, 
            final ViewSwitcher aViewSwitcher) {

        // Wrap DownloadTask into another Runnable to track the statistics
        handler.post(new Runnable() {
            public void run() {
                try {

                    synchronized (aImageView){
                        // make sure this thread is the only one performing activities on
                        // this imageview
                        BitmapFactory.Options lOptions = new BitmapFactory.Options();
                        lOptions.inSampleSize = 1;
                        Bitmap lBitmap = BitmapFactory.decodeFile(aPath, lOptions);
                        //aImage.setImageBitmap(lBitmap);

                        // Load the image here
                        signalUI(aViewSwitcher, aImageView, lBitmap);
                    }
                } 
                catch(Exception e){
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Method is called when the bitmap is loaded.  The UI thread adds the bitmap to the imageview.
     * @param aViewSwitcher - The ViewSwitcher that needs to display the imageview
     * @param aImageView - The ImageView the UI thread will load 
     * @param aImage - The Bitmap that gets loaded into the ImageView
     */
    private void signalUI(
            ViewSwitcher aViewSwitcher, 
            ImageView aImageView, 
            Bitmap aImage){

        if(mListener != null){
            // we have an object that implements ImageLoadListener

            mListener.handleImageLoaded(aViewSwitcher, aImageView, aImage);
        }
    }

} 
```

=======================================

# 在 LazyImageAdapter 中：

```
public class LazyImageAdapter extends BaseAdapter implements ImageLoadListener {

    private static final int PROGRESSBARINDEX = 0;
    private static final int IMAGEVIEWINDEX = 1;

    private Context mContext = null;
    private OnClickListener mItemClickListener;
    private Handler mHandler;
    private ImageLoader mImageLoader = null;
    private File mDirectory;

    /**
     * Lazy loading image adapter
     * @param aContext
     * @param lClickListener click listener to attach to each item
     * @param lPath the path where the images are located
     * @throws Exception when path can't be read from or is not a valid directory
     */
    public LazyImageAdapter(
            Context aContext,
            OnClickListener lClickListener,
            String lPath
        ) throws Exception {

        mContext = aContext;
        mItemClickListener = lClickListener;
        mDirectory = new File(lPath);

        // Do some error checking
        if(!mDirectory.canRead()){
            throw new Exception("Can't read this path");
        }
        else if(!mDirectory.isDirectory()){
            throw new Exception("Path is a not a directory");
        }

        mImageLoader = new ImageLoader(this);
        mImageLoader.start();
        mHandler = new Handler();

    }

    @Override
    protected void finalize() throws Throwable {
        // TODO Auto-generated method stub
        super.finalize();

        // stop the thread we started
        mImageLoader.stopThread();
    }

    public int getCount() {
        return mDirectory.listFiles().length;
    }

    public Object getItem(int aPosition) {
        String lPath = null;
        File []lFiles = mDirectory.listFiles();
        if(aPosition < lFiles.length){
            lPath = mDirectory.listFiles()[aPosition].getAbsolutePath();
        }

        return lPath;
    }

    public long getItemId(int arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(final int aPosition, View aConvertView, ViewGroup parent) {
        final ViewSwitcher lViewSwitcher;
        String lPath = (String)getItem(aPosition);

        // logic for conserving resources see google video on making your ui fast
        // and responsive
        if (null == aConvertView) {
            lViewSwitcher = new ViewSwitcher(mContext);
            lViewSwitcher.setPadding(8, 8, 8, 8);

            ProgressBar lProgress = new ProgressBar(mContext);
            lProgress.setLayoutParams(new ViewSwitcher.LayoutParams(80, 80));
            lViewSwitcher.addView(lProgress);
            ImageView lImage = new ImageView(mContext);
            lImage.setLayoutParams(new ViewSwitcher.LayoutParams(100, 100));

            lViewSwitcher.addView(lImage);

            // attach the onclick listener
            lViewSwitcher.setOnClickListener(mItemClickListener);

        } else {
            lViewSwitcher = (ViewSwitcher) aConvertView;
        }

        ViewTagInformation lTagHolder = (ViewTagInformation) lViewSwitcher
                .getTag();

        if (lTagHolder == null || 
            !lTagHolder.aImagePath.equals(lPath)) {
            // The Tagholder is null meaning this is a first time load
            // or this view is being recycled with a different image

            // Create a ViewTag to store information for later
            ViewTagInformation lNewTag = new ViewTagInformation();
            lNewTag.aImagePath = lPath;
            lViewSwitcher.setTag(lNewTag);

            // Grab the image view
            // Have the progress bar display
            // Then queue the image loading
            ImageView lImageView = (ImageView) lViewSwitcher.getChildAt(1);
            lViewSwitcher.setDisplayedChild(PROGRESSBARINDEX);
            mImageLoader.queueImageLoad(lPath, lImageView, lViewSwitcher);

        }

        return lViewSwitcher;
    }

    public void handleImageLoaded(
            final ViewSwitcher aViewSwitcher,
            final ImageView aImageView, 
            final Bitmap aBitmap) {

        // The enqueue the following in the UI thread
        mHandler.post(new Runnable() {
            public void run() {

                // set the bitmap in the ImageView
                aImageView.setImageBitmap(aBitmap);

                // explicitly tell the view switcher to show the second view
                aViewSwitcher.setDisplayedChild(IMAGEVIEWINDEX);
            }
        });

    }

}

/**
 *  View holder pattern as described in google sample code
 *  we may want to add more attributes to this if the path was
 *  say being stored in a sqlite database
 * @author bacaj
 */
class ViewTagInformation {
    String aImagePath;
} 
```

# keyboard - Windows 8 - 打开超级按钮搜索栏时显示软键盘

> ID：11326925
> 
> 赞同：1
> 
> 时间：2012-07-04T10:08:45.510
> 
> 标签：keyboard, windows-8

在我的应用程序中，我使用这种代码以编程方式打开魅力搜索栏：

Windows.ApplicationModel.Search.SearchPane.GetForCurrentView().Show();

但我想打开软键盘，这样用户就可以直接搜索文本，而无需触摸文本输入。

我明白我无法控制键盘，所以我必须将焦点设置到搜索文本块。

有没有人必须解决这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:32:01.553

这是不可能的。打开软键盘必须由触摸事件触发。请参阅[此处](https://stackoverflow.com/questions/10129550/show-hide-keyboard-programmatically-on-windows8)以获取解释。

# c# - 复杂时间范围的数据库设计

> ID：11326926
> 
> 赞同：0
> 
> 时间：2012-07-04T10:08:47.100
> 
> 标签：c#, sql-server, database-design

我在一个网站上预订了门票。我需要节省时间，之后我必须放弃预订。
我有一个简单的条件：

```
drop reservation after 30 minutes after reservation 
```

和复杂的：

```
from 00:01 to 18:00 -  drop after 20 hours, from 18:01 to 00:00 - drop after 16 hours. 
```

如何为此设计数据库？现在我`TimeSpan`在课堂上有一个简单的领域`C#`。而且，对于简单的规则就足够了，但对于复杂的规则就不行了。
谢谢。

PS。数据库是 MS SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:51:32.230

您不想使用服务器和 SQL 来控制时间范围。这应该在您的应用程序中完成。因此，对于每个预订，您都会创建一个时间戳（作为 ExpiryTime 列存储在数据库中 - 或您想要的任何内容）。定期检查 ExpiryTime 列以查看给定的预留是否已超时。如果它已执行删除保留的操作...

我希望这有帮助。

# c# - 如何使用 PictureBox 在 C# 中创建 HotSpot？

> ID：11326931
> 
> 赞同：0
> 
> 时间：2012-07-04T10:08:56.030
> 
> 标签：c#

我是一名新的 C# 开发人员，我想在我的 winform 应用程序中的图像中创建一个热点。我按照[此处](https://stackoverflow.com/questions/1270147/creating-hotspots-in-c-sharp)发布的解决方案进行操作，但我不知道应该将坐标放在哪里才能使此方法有效：

```
protected override void OnMouseMove(MouseEventArgs mouseEvent) 
{ 
     string X = mouseEvent.X.ToString();
     string Y = mouseEvent.Y.ToString(); 
} 
```

我应该把坐标放在哪里？我有两个坐标 (X,Y): 110, 45

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:27:15.723

热点我觉得应该是一个小的矩形区域而不仅仅是一个坐标。假设您希望它是一个宽度为 20 的小正方形区域，那么您将编写如下内容：

编辑：

假设您的表单上有一个名为 PictureBox1 的 PictureBox，并且您希望从图片框的左上角开始的一个 20x20 大小的小矩形成为热点（即，当您将鼠标悬停在它上面时，您会看到一个 HAND 光标）然后打开PictureBox 的 MouSeMove 事件这样写：

```
 private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.X > 0 && e.X < 20 && e.Y > 0 && e.Y < 20)
            this.Cursor = Cursors.Hand;
        else
            this.Cursor = Cursors.Default;
    } 
```

请记住，我们只是显示手形光标来表示一个我们还没有处理过点击的热点，使它真正成为一个网络类型的热点。如果您想在 Click 上做某事，请尝试使用 MouseUp 事件，在 MouseUp 事件中，与上面相同的 IF 子句将为您提供用户单击热点区域的条件。

# wordpress - Wordpress 插件 - 如何随机运行插件

> ID：11326940
> 
> 赞同：0
> 
> 时间：2012-07-04T10:09:47.733
> 
> 标签：wordpress, plugins, timing

我需要在 wordpress 插件上创建一个功能：

我需要每天在数据库表中插入随机数的一些信息。

您将如何在 WordPress 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:36:10.087

看看[wp_schedule_event](http://codex.wordpress.org/Function_Reference/wp_schedule_event)它是一个 cronjob。
cron 确实会定期运行，因此您必须在 cron 定期运行期间检查随机部分

更多 WP cron:
[http://codex.wordpress.org/Category:WP-Cron_Functions](http://codex.wordpress.org/Category:WP-Cron_Functions)
[http://wpengineer.com/1908/use-wordpress-cron/](http://wpengineer.com/1908/use-wordpress-cron/) <- 教程

# .net - How does windows 8 manage stack of Pages in Frame?

> ID：11326948
> 
> 赞同：0
> 
> 时间：2012-07-04T10:10:47.007
> 
> 标签：.net, windows-8, windows-runtime

How does Windows 8 manage a stack of Pages in a Frame?

And how can I clear the whole stack programmatically, as in I need to 'pop' all pages in a stack and return to first page where I started from (let's say Login Page)?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:25:41.637

看看[Frame类的方法](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame)

在[这篇文章中](http://www.jayway.com/2012/05/25/clearing-the-windows-8-page-cache/)（关于导航的必读）：

```
private void ResetPageCache()
{
    var cacheSize = ((Frame) Parent).CacheSize;
    ((Frame) Parent).CacheSize = 0;
    ((Frame) Parent).CacheSize = cacheSize;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T09:33:56.623

在 Common/LayoutAwarePage.cs 中有以下 GoHome() 函数（除了与标准后退按钮上的 Click-event 一起使用的 GoBack() 函数）：

```
 // Use the navigation frame to return to the topmost page
    if (this.Frame != null)
    {
        while (this.Frame.CanGoBack) this.Frame.GoBack();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:15:40.567

尝试实现您自己的 Frame 类，类似于以下内容：

[http://blogs.microsoft.co.il/blogs/eshaham/archive/2012/04/30/fixing-frame-navigation-in-metro-style-apps.aspx](http://blogs.microsoft.co.il/blogs/eshaham/archive/2012/04/30/fixing-frame-navigation-in-metro-style-apps.aspx)

然后你可以编写一个 RemoveLastEntry 方法，它基本上是这样做的：

```
void RemoveLastEntry()
{
    if (_navigationStack.Count > 0)
    {
        _navigationStack.Pop();
    }
} 
```

并调用此方法一定次数。

或者您可以调用 GoHome 方法将您带回第一个屏幕（这将清除除第一项之外的整个堆栈）。

我希望这会带你朝着正确的方向前进！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T16:05:47.000

最好的解决方案是

```
while (this.Frame.CanGoBack)
{
    this.Frame.GoBack();
} 
```

# objective-c - MapKit: Update radius property of MKCircle overlay without flickering

> ID：11326952
> 
> 赞同：5
> 
> 时间：2012-07-04T10:10:53.620
> 
> 标签：objective-c, mapkit

I have a *MKMapView* (self.mapView) to which I add a *MKCircle* overlay (self.radiusOverlay) with a specific radius (self.location.radius).

Right below the *MKMapView* there is a *UISlider* (self.radiusSlider) which changes the overlay's radius on *Value Changed*:

```
- (void)viewWillAppear:(BOOL)animated {

    self.radiusOverlay = [MKCircle circleWithCenterCoordinate:CLLocationCoordinate2DMake([self.location.latitude floatValue], [self.location.longitude floatValue]) radius:[self.location.radius floatValue]];

    [self.mapView addOverlay:self.radiusOverlay];

    self.radiusSlider.value = [self.location.radius floatValue];
} 
```

This is the method which does the radius-updating stuff:

```
- (IBAction)updateLocationRadius:(UISlider *)sender {

    [self.mapView removeOverlay:self.radiusOverlay];

    self.location.radius = [NSNumber numberWithFloat:sender.value];

    self.radiusOverlay = [MKCircle circleWithCenterCoordinate:CLLocationCoordinate2DMake([self.location.latitude floatValue], [self.location.longitude floatValue]) radius:[self.location.radius floatValue]];
    [self.mapView addOverlay:self.radiusOverlay];
} 
```

This works fine, but it's not looking good: By removing and re-adding *self.radiusOverlay* I cause the overlay to flicker.

What can I do to avoid this flickering?

# phpmyadmin - can't connect to MySql with Workbench, although PhpMyAdmin works

> ID：11326953
> 
> 赞同：1
> 
> 时间：2012-07-04T10:10:56.147
> 
> 标签：phpmyadmin, mysql-workbench

I am not able to connect mysql DB from a windows sytem through the workbench. But it's possible via phpMyAdmin.

I tried both standard TCP/IP and Standard TCP/IP over SSH.

Are the password and usernames the same?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T21:38:35.797

设置数据库时，它应该询问您，或者应该有一个设置，您需要允许外部/远程登录。一旦检查为允许，它应该允许您访问。安装程序将不允许您稍后更改它。至少我认为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:46:00.893

是的，用户名和密码应该相同。我认为如果您尝试使用 Windows 终端中的 MySQL CLI 客户端连接到本地 MySQL 服务器并查看发生了什么，那将是一件好事。如果您可以连接到它，那么您应该能够连接到 Workbench。

[这是](http://dev.mysql.com/doc/refman/5.0/en/common-errors.html)MySQL 文档中的链接，描述了与您的问题相关的常见错误。

顺便说一句，您应该检查您是否有最新的 Workbench 版本（5.2.40 是撰写本文时的最新版本）。

请报告情况如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T21:02:22.663

您应该在问题中包含一些信息：

*   MySQL 服务器是在您的 PC 上运行还是在网络上的服务器上运行？
*   PhpMyAdmin 是在您的 PC 上运行还是在网络上的服务器上运行？
*   MySQL 服务器是否与 PhpMyAdmin 运行在同一主机上，或者它们各自运行在不同的服务器上？
*   当您尝试在 MySQL Workbench 中建立连接但它不起作用时，您会收到什么错误消息？（一般来说，当在 Stack Overflow 上提问时，“它不起作用”不足以描述问题——你应该描述你尝试了什么，以及错误。）

MySQL 连接凭据是用户名和密码，以及允许的客户端的 IP 地址范围。

从 MySQL 服务器的角度来看，“客户端”是运行 PhpMyAdmin 代码的主机。您只是使用 PhpMyAdmin 的 Web 界面来指导它为您做事，但它是连接到 MySQL 服务器的 PHP 代码。

您尝试与 MySQL Workbench 一起使用的用户名和密码可能仅被授权从安装 PhpMyAdmin 的主机连接。这将是我的猜测。

# php - 如何使用键从数组中获取值？

> ID：11326955
> 
> 赞同：0
> 
> 时间：2012-07-04T10:11:04.033
> 
> 标签：php, arrays, string, multidimensional-array, echo

我有一个包含国家代码和国家名称的数组。我需要从数组中呼应一个国家。

我有作为数组键的国家代码：

```
AG 
```

当我做一个 var_dump

```
var_dump($country_list); 
```

我收到以下信息：

```
array(224) { [""]=> string(19) "Select a country..." ["AF"]=> string(11) "Afghanistan" ["AL"]=> string(7) "Albania" ["DZ"]=> string(7) "Algeria" ["AD"]=> string(7) "Andorra" ["AO"]=> string(6) "Angola" ["AI"]=> string(8) "Anguilla" ["AQ"]=> string(10) "Antarctica" ["AG"]=> string(19) "Antigua and Barbuda" ["AR"]=> string(9) "Argentina" ["AM"]=> string(7) "Armenia" ["AW"]=> string(5) "Aruba" ["AU"]=> string(9) "Australia" ["AT"]=> string(7) "Austria" ["AZ"]=> string(10) "Azerbaijan" ["BS"]=> string(7) "Bahamas" ["BH"]=> string(7) "Bahrain" ["BD"]=> string(10) "Bangladesh" ["BB"]=> string(8) "Barbados" ["BY"]=> string(7) "Belarus" ["BE"]=> string(7) "Belgium" ["BZ"]=> string(6) "Belize" ["BJ"]=> string(5) "Benin" .... 
```

如何回显国家代码所在的国家名称：**AG**

对某些人来说这似乎很简单，但我遇到了困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:12:16.020

你可以简单地回显它

```
echo $country_list['AG']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T10:12:23.273

```
echo isset($country_list['AG']) ? $country_list['AG'] : ''; 
```

# android - 如何在自定义 BaseAdapter 的 getView 中创建条件

> ID：11326960
> 
> 赞同：-1
> 
> 时间：2012-07-04T10:11:33.823
> 
> 标签：android, baseadapter

我想用自定义 BaseAdapter 制作一个自定义 ListView，其中状态 = 1，我想显示一个 CheckBox，否则我想显示一个 textView..

* * *

我给定的条件是：

```
 if (NewtheStatus == 1) {
                    alreadyOrderText
                    .setVisibility(TextView.GONE);

                }
                else{
                    checkBox.setVisibility(CheckBox.GONE);

                } 
```

但有时我会得到一些既没有复选框也没有 TextView 的行。

* * *

我的自定义 BaseAdapter 的代码如下。

```
 private class MyCustomAdapter extends BaseAdapter {

    private static final int TYPE_ITEM = 0;
    private static final int TYPE_ITEM_WITH_HEADER = 1;
    // private static final int TYPE_MAX_COUNT = TYPE_SEPARATOR + 1;

    private ArrayList<WatchListAllEntity> mData = new ArrayList();
    private LayoutInflater mInflater;
    private ArrayList<WatchListAllEntity> items = new ArrayList<WatchListAllEntity>();

    public MyCustomAdapter(Context context,
            ArrayList<WatchListAllEntity> items) {

        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void addItem(WatchListAllEntity watchListAllEntity) {
        // TODO Auto-generated method stub
        items.add(watchListAllEntity);
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;
        final int position1 = position;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitempict, null);
        }
        watchListAllEntity = new WatchListAllEntity();
        watchListAllEntity = items.get(position);
        Log.i("position: iteamsLength ", position + ", " + items.size());
        if (watchListAllEntity != null) {

            ImageView itemImage = (ImageView) v
                    .findViewById(R.id.imageviewproduct);

            if (watchListAllEntity.get_thumbnail_image_url1() != null) {
                Drawable image = ImageOperations(watchListAllEntity
                        .get_thumbnail_image_url1().replace(" ", "%20"),
                        "image.jpg");

                // itemImage.setImageResource(R.drawable.icon);

                if (image != null) {
                    itemImage.setImageDrawable(image);
                    itemImage.setAdjustViewBounds(true);
                } else {

                    itemImage.setImageResource(R.drawable.iconnamecard);
                }

                Log.i("status_ja , status",
                        watchListAllEntity.get_status_ja() + " ,"
                                + watchListAllEntity.getStatus());

                int NewtheStatus = Integer.parseInt(watchListAllEntity
                        .getStatus());
                CheckBox checkBox = (CheckBox) v
                        .findViewById(R.id.checkboxproduct);
                TextView alreadyOrderText = (TextView) v
                        .findViewById(R.id.alreadyordertext);
                if (NewtheStatus == 1) {
                    alreadyOrderText
                    .setVisibility(TextView.GONE);

                }
                else{
                    checkBox.setVisibility(CheckBox.GONE);

                }
                Log.i("Loading ProccardId: ",
                        watchListAllEntity.get_proc_card_id() + "");
                checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        WatchListAllEntity watchListAllEntity2 = items
                                .get(position1);
                        Log.i("Position: ", position1 + "");
                        // TODO Auto-generated method stub
                        if (isChecked) {

                                Constants.orderList.add(watchListAllEntity2
                                        .get_proc_card_id());
                                Log.i("Proc Card Id Add: ",
                                        watchListAllEntity2
                                                .get_proc_card_id() + "");

                        } else {
                            Constants.orderList.remove(watchListAllEntity2
                                    .get_proc_card_id());
                            Log.i("Proc Card Id Remove: ",
                                    watchListAllEntity2.get_proc_card_id()
                                            + "");

                        }

                    }
                });
            }

        }

        return v;
    }

    private Drawable ImageOperations(String url, String saveFilename) {
        try {
            InputStream is = (InputStream) this.fetch(url);
            Drawable d = Drawable.createFromStream(is, "src");

            return d;
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }
    }

    public Object fetch(String address) throws MalformedURLException,
            IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        int sizef=items.size();
        Log.i("Size", sizef+"");
        return items.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return items.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:39:52.050

滚动时重用行的`ListView`布局。如果您在某个时候隐藏了`TextView`或`CheckBox`，并且 android 重用了该行，那么`View`将保持隐藏状态。

您所要做的就是`View.VISIBLE`在您的`getView()`方法中为`View`您想要显示的每个设置可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:13:51.940

我犯了一个错误......在我的代码中，我做了一个这样的条件

```
if (NewtheStatus == 1) {
    alreadyOrderText.setVisibility(TextView.GONE);
} else {
    checkBox.setVisibility(CheckBox.GONE);
} 
```

正确的代码是：

```
if (NewtheStatus == 1) {
    alreadyOrderText.setVisibility(TextView.INVISIBLE);
    checkBox.setVisibility(CheckBox.VISIBLE);
} else {
    checkBox.setVisibility(CheckBox.INVISIBLE);
    alreadyOrderText.setVisibility(TextView.VISIBLE);
} 
```

and inside my XML , I declared CheckBox and TextView those are INVISIBLE. Now the code is working well.

# c# - Irony: StringLiteral without StartEndSymbol

> ID：11326968
> 
> 赞同：2
> 
> 时间：2012-07-04T10:11:45.267
> 
> 标签：c#, dsl, irony

I'm using the Irony DSL framework to parse a language. That language allows strings to be written without quotes ("), even if they contain special characters like dot (.) or minus (-).

If I editthe text files I get, so the strings have quotes around them, they can be parsed just fine. However, I want to read the files as they are. How can I make Irony parse a string without setting a StartEndSymbol?

I'm using the current version of Irony (2012_03_15).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:11:13.203

查看示例 SQL 语法。它允许标识符包含`'.'`诸如`SELECT a.x FROM table`. 在这种情况下，“Id”将是一个带有分隔符的列表。

```
var dot = ToTerm(".");
var dash = ToTerm("-");
var Id_simple = TerminalFactory.CreateSqlExtIdentifier(this, "id_simple"); //covers normal identifiers (abc) and quoted id's ([abc d], "abc d")
Id.Rule = MakePlusRule(Id, dot, Id_simple) | MakePlusRule(Id, dash, Id_simple)

 //Covers simple identifiers like abcd, and also quoted versions: [abc d], "abc d".
    public static IdentifierTerminal CreateSqlExtIdentifier(Grammar grammar, string name) {
      var id = new IdentifierTerminal(name);
      StringLiteral term = new StringLiteral(name + "_qouted");
      term.AddStartEnd("[", "]", StringOptions.NoEscapes);
      term.AddStartEnd("\"", StringOptions.NoEscapes);
      term.SetOutputTerminal(grammar, id); //term will be added to NonGrammarTerminals automatically 
      return id;
    } 
```

如果它适用于 SQL，它应该适用于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T07:47:15.590

让我试着澄清一下。CreateSqlExtIdentifier 类中“id”变量的声明：“//涵盖简单的标识符，如 abcd，以及引用的版本：[abc d]、“abc d”和下划线和数字，*但不是更多*。事实上，SQL 解析器包含点像“id”的部分一样 - 是以下规则的结果： `**"Id.Rule = MakePlusRule(Id, dot, Id_simple);"**` 作为一种解决方案，您可以声明特殊字符（如果没有很多）并制作您的自定义规则，这将在代码中包含可能的出现。
例如：
`specialSymbols.Rule = ToTerm(".") | "-" | ...etc.;`
`myId.Rule = id_simple | specialSymbols;`
`myIds.Rule = MakePlusRule(myIds<,Delimiter if nedeed>,myId);`

最好的问候，迪奥尼斯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T15:37:30.343

我也想看看这样做的正确方法。目前我只是通过在其构造函数中设置必要的额外字符来使用 IdentifierTerminal。

# macos - 似乎没有安装 MacFUSE

> ID：11326969
> 
> 赞同：8
> 
> 时间：2012-07-04T10:11:45.237
> 
> 标签：macos, osx-lion, ntfs, macfuse

安装 MacFUSE 并打开 system Preferences -> MacFuse 后，它看起来与 Mac lion 不兼容，并说：

> 似乎没有安装 MacFUSE

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T11:50:56.083

我通过下载和安装 [macfuse-core-10.5-2.1.9.dmg](http://www.tuxera.com/mac/macfuse-core-10.5-2.1.9.dmg)
解决了这个问题我在 MacFUSE OSX 10.7 上找到了答案[- 似乎没有安装](http://macfuse.975588.n3.nabble.com/OSX-10-7-Seems-to-be-not-installed-td3147712.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:59:42.183

MacFUSE的 Google 代码[主页](http://code.google.com/p/macfuse/)说它不再被维护，并特别提到了 Lion：

> 该项目不再维护。我们目前无法帮助解决任何与狮子（或任何大型猫科动物）相关的错误或问题。[MacFuse google group](https://groups.google.com/forum/#!forum/macfuse)是寻找分叉/替换项目的不错资源。

# ios - CMAttitudeReferenceFrameXTrueNorthZVertical 不起作用

> ID：11326971
> 
> 赞同：1
> 
> 时间：2012-07-04T10:11:48.740
> 
> 标签：ios, core-location, augmented-reality, core-motion

我正在使用 Core Motion 来获取设备的姿态。

我的问题是使用`CMAttitudeReferenceFrameXTrueNorthZVertical`会使我的运动管理器崩溃。我在开始设备运动更新之前使用核心位置并开始位置更新，但我的`CMDeviceMotion`对象始终是`nil`.

因为我认为我犯了一个错误，所以我从 Apple 下载了 pARk 示例代码（[链接到示例代码](http://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html)），他们也在其中使用`CMAttitudeReferenceFrameXTrueNorthZVertical`，`CoreLocation`而且这也不起作用。

我有一个 iPhone4S，这应该不是问题，因为它是最新的硬件......

如果我`CMAttitudeReferenceFrameXMagneticNorthZVertical`改用，一切正常。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:05:16.890

问题解决了。

这是因为在 iOS 5 设置中禁用了指南针校准。我认为这意味着定位模式可能无法用于获取真正的北方。

因此，**Wikitude**也无法正常工作......

# cordova - Twitter @Anywhere not working in phonegap application

> ID：11326974
> 
> 赞同：1
> 
> 时间：2012-07-04T10:12:02.303
> 
> 标签：cordova, twitter, sencha-touch-2, twitter-anywhere

I'm currently developing a phonegap application that uses Sencha Touch. I have a share to Twitter panel set up with uses the [Twitter @anywhere Tweet Box](https://dev.twitter.com/docs/anywhere/welcome#tweetbox) (see image).

![How Twitter @Anywhere looks when it works](../Images/afdf1dd4a42562934c4ad3d777f70714.png)

When I test my app in Safari and Mobile Safari on the device, this loads as displayed. However, when I build my app using Phonegap and proceed to load this panel, the tweet box does not load.

My question is why does this not work as it should?

Finally, please note that in my phonegap application I have the external hosts set to allow content from any external site (my app loads content from youtube and this does work).

# asp.net - 为什么在 ASP.NET 中经过一段时间后 Global.asax 的命中计数器（应用程序变量）设置为“0”？

> ID：11326980
> 
> 赞同：0
> 
> 时间：2012-07-04T10:12:13.157
> 
> 标签：asp.net, global-variables, global-asax, hitcounter, application-variables

每个搜索数据库都有大约 50 个应用程序变量。从单个 Search.aspx 页面查询总共 50 个 searchDB，具体取决于它连接到特定数据库的 URL 中传递的查询字符串。

例如：如果 Search.aspx?li=1 则连接到 1SearchDB，如果 Search.aspx?li=2 则连接到 2SearchDB，.....50SercgDB。

我根据 URL 中的 QueryString 维护每个 searchDB 的总访问者，并增加 GLOBAL.ASAX 文件中的应用程序变量。

在 Global.asax 中：

```
void Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        Application["1"] = 0;          
        Application["2"] = 0;
        .
        .
        Application["50"] = 0;

    } 
```

在 Search.aspx.cs 的 Page_Load 中：

```
int LocalBody = Convert.ToInt32(Request.QueryString["li"]);
public void Page_Load(object sender, EventArgs e)
    {
    Label1.Text = GetHits(LocalBody).ToString();
    }

 private int GetHits(int LocalBody)
    {
        int counter=0;
        switch (LocalBody)
        {
            case 1:
                Application["1"] = (int)Application["1"] + 1;
                counter=(int)Application["1"];
                break;
            case 2:
                 Application["2"] = (int)Application["2"] + 1;
                counter=(int)Application["2"];
                break;
            .
            .
            case 50:
                Application["50"] = (int)Application["50"] + 1;
                counter=(int)Application["50"];
                break;            default:
                break;
        }
        return counter;

    } 
```

现在的问题是当我启动应用程序时，一段时间（30 到 40 分钟）后它会重新启动计数器。当我使用它时，它工作正常！为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:21:47.637

这是因为`Application_Start`当应用程序重新启动时会触发并重置您的计数器，并且您的应用程序可能会根据您的池设置自动重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T15:37:52.847

1.  即使 web.config 被修改，应用程序也可能重新启动
2.  或发生任何致命异常 - 应用程序可能会重新启动......所以验证是否引发任何致命异常......
3.  我怀疑应用程序计数器增量必须由 Application.Lock() 包围，以便同步值。

希望它可以帮助 HydTechie

# design-patterns - 将 SQL 视图映射到 JPA 实体

> ID：11326981
> 
> 赞同：18
> 
> 时间：2012-07-04T10:12:13.770
> 
> 标签：design-patterns, jakarta-ee, jpa

在我的开发项目中，我使用 JPA (hibernate) 作为 OR Mapping 技术进行数据库访问。当我将数据库表直接映射到实体以实现复杂关系时，有时会遇到性能问题和技术难题。

我发现一种解决方法是将数据库视图映射到 JPA 实体。这使编码更容易，有时性能更好。您认为以这种方式使用 JPA 是一种反模式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T12:38:21.633

**这不是解决方法，也不是反模式。**有一个关于[将 JPA 实体映射到 SQL 视图](http://www.dzone.com/links/r/mapping_jpa_entities_to_sql_views_it_works_even_w.html)的主题。它为您提供了是否使用此方法的足够信息。

就个人而言，我更喜欢 Java 类，因此我使用[Result Classes Constructor Expression](http://www.objectdb.com/java/jpa/query/jpql/select#Result_Classes_Constructor_Expressions_)。它根据结果查询返回实例化和填充提供的类的对象。

您可以查看这两种方法，它们可以提高性能并降低结构复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T16:44:20.847

我对 JMelnik 友好提供的链接有疑问：我在 Javadb 中将复杂查询创建为视图，然后尝试将视图拖到表单上，但 Netbeans 不允许我删除它（因此我无法自动创建绑定表.我在那个链接上看到我不是唯一一个经历过这个的人。

对我有用的解决方案：

在 db 中为您的复杂 SQL 创建视图

实体包中的“从数据库创建实体”，并将其命名为xxxViewName

*   通过在其上方添加“@Id”确保实体中的字段被标识为键。

在 Navigator 中创建 java 持久性查询：

*   确保表单设计可见，然后在 Navigator 中右键单击“其他组件”，然后选择 Add From Palette > Java Persistence > Query

*   配置查询：不要使用通常的“show xxxViewName”（因为 JPA 不支持显示而失败）。使用 Select w from xxxViewName w"

在 Navigator 中创建 java 持久化结果列表：

*   类似于创建查询。确保将 List 的类型参数设置为

将您的 JTable 绑定到列表。

# excel - Excel VBA - 自动输入密码

> ID：11326986
> 
> 赞同：1
> 
> 时间：2012-07-04T10:12:37.880
> 
> 标签：excel, vba, passwords

我想编写一个 Excel VBA 宏来自动为用户输入密码。这样，用户无需每次双击文件时手动输入密码。这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-12T07:45:50.567

@iceagle，我没有足够的声誉来“评论”@（Siddharth Routh），但我对评论和说它毫无意义/无用/无法完成的答案感到遗憾。
例如，如果您有一整套要更改但都受密码保护的 excel。如果现在你通过循环运行它们，你必须每次再次输入密码（当你有 1000 多个文件时似乎很愚蠢？）更好的选择：编码 VBS 的宏，其中包含密码，因此可以更改所有编码文件！向用户提供此密码，现在您仍然有 1000 个编码文件，只是您不必每次都输入它。

现在，如果人们遇到这个问题，@DJ 会给出正确的答案。您可以将密码放入工作簿打开器的命令行中，如下所示：

`Set wb = Workbooks.Open(Filename:="myfile.xls", Password:="password")`

我希望遇到这个问题的人不要把接受的答案当作给定的，而是看得更远。

亲切的问候，彼得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:57:24.043

正如我在评论中提到的，在我看来，您寻求的功能无法完成。让我解释一下。

要在 Excel 文件中自动运行 VBA 代码，您需要将代码放在`Workbook_Open()`代码`ThisWorkbook`区域或`Auto_Open()`模块中。

现在这两个 Subs 仅在密码保护文件中输入密码后执行，即在工作簿打开后。因此，在将密码输入密码对话框或打开工作簿之前，无法运行此操作。

我相信你的老板是个通情达理的人，如果你能很好地向他解释，我会理解的：）

您可能还想查看此链接，其中详细说明了有关自动运行宏的更多详细信息。

**主题**: Excel 启动时运行宏

**链接**： http: [//office.microsoft.com/en-us/excel-help/running-a-macro-when-excel-starts-HA001034628.aspx](http://office.microsoft.com/en-us/excel-help/running-a-macro-when-excel-starts-HA001034628.aspx)

**从上面的链接引用**

> 如果您想在启动 Microsoft Excel 时自动执行某些操作，您可以录制或编写一个在您打开工作簿时运行的宏。有两种方法可以做到这一点：
> 
> 录制一个宏并使用名称 Auto_Open 保存它。将宏编写为 Microsoft Visual Basic® for Applications (VBA) 过程，用于工作簿的 Open 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:22:37.107

没有用于传递密码的命令行参数。但是您可以做的是有一个“打开器”电子表格，它以电子表格名称和密码作为参数，并使用 VBA 打开受密码保护的电子表格。

看他的链接：

[https://superuser.com/questions/438842/excel-workbook-desktop-shortcut-with-auto-password](https://superuser.com/questions/438842/excel-workbook-desktop-shortcut-with-auto-password)

这仅向您展示了如何获取命令行参数 - 一旦您拥有了可以使用的参数：

```
Workbooks.Open "filename", , , , "Password" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-01T21:52:17.757

据我所知，您可以使用以下代码解锁 Excel 工作簿/工作表密码，但您无法取消保护`VBA`项目密码。

```
Workbooks("Book1").Unprotect Password:="password"
Worksheets("Sheet1").Unprotect "Password" 
```

# php - jQuery评分系统的更正

> ID：11326992
> 
> 赞同：1
> 
> 时间：2012-07-04T10:13:00.860
> 
> 标签：php, jquery, mysql, html, ajax

我想使用 jQuery、PHP 和 MySQL 构建一个 5 星评级系统。我正在按照[本](http://www.tutorialswindow.com/Web-Development/Javascript-tutorials/Creating-5-Star-Rating-System-Using-JQuery-PHP-MySQL-83.html)教程进行操作，但在 jQuery 部分出现错误。我擅长 PHP 和 MySQL，但对 jQuery 和 Ajax 知之甚少。

jQuery代码：

```
 $(function(){

$('.star').mouseover(function (){
var star = $(this).index() 1;
$(this).parent().css("background-position","0" - (32 * star) "px");
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
$(this).css("background-position","0 -" (32 * originalresult) "px");
}); 

}); 
```

用于此的 HTML：

```
<div class="star-rating" id="rating1result0">
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
</div>
<div class="result">
<span style="color:green">0</span> (0)
</div> 
```

CSS是：

```
.star-rating {
    width: 80px;
    height: 16px;
    float: left;
    background: url(_ls-global/images/layout-images/urating.png);
    cursor: pointer;
}
.star {
width:16px;
height:16px;
float:left;
}
.result {
float:left;
height:16px;
color:#454545;
margin-left:5px;
line-height:110%;
} 
```

我尝试像这样更改代码，但得到了意想不到的结果。

```
 $(function(){

$('.star').mouseover(function (){
var star = $(this).index()+1;
$(this).parent().css("background-position","32px");
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
$(this).css("background-position","32px");
}); 

}); 
```

请问有人可以向我建议代码中有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:28:42.020

终于明白了。

```
 $(function(){

$('.star').mouseover(function (){
var star = $(this).index()+1;
var x =(32 * star);
$(this).parent().css("backgroundPosition","0% "  +(-x)+ "px");  
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
var y =(32 * originalresult);
$(this).css("background-position","0%" +(-y)+ "px");
}); 

}); 
```

希望这有助于其他有同样问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:59:08.183

```
$(function(){

$('.star').mouseover(function (){
var star = $(this).index();
var newvalue =0-(32 * star);
$(this).parent().css("background-position",newvalue+" px");
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
var newvalue =0 -(32 * originalresult);
$(this).css("background-position",newvalue+"px");
}); 

}); 
```

试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:45:23.010

```
var star = $(this).index() 1; 
```

数字 1 应该在那里做什么？那应该是解析错误。

# php - 这种类型的表达式“开始日期：[某月] [dd]，[yyyy]”的正则表达式是什么？

> ID：11326995
> 
> 赞同：2
> 
> 时间：2012-07-04T10:13:24.787
> 
> 标签：php, regex, preg-match

这种类型的表达式“开始日期：[某个月份] [dd]，[yyyy]”的正则表达式是什么，其中输入了整个月份......我想提取这个字符串，然后进一步处理它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:17:23.320

这取决于您想要的严格程度：

```
/Start Date: ([a-zA-Z]+) (\d{2}), (\d{4})/ 
```

……应该这样做。

更严格：

```
/Start Date: (January|February|March|April|May|June|July|August|September|October|November|December) (\d{2}), (\d{4})/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:18:51.603

```
<?php
$a = 'Start Date: Febuary 10, 2012';
if(preg_match('/Start Date: (\S+) (\d+), (\d{4})/', $a, $matches)) {
  print_r($matches);
} 
```

将为您提供 $matches =

```
Array
(
    [0] => Start Date: Febuary 10, 2012
    [1] => Febuary
    [2] => 10
    [3] => 2012
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T10:19:25.910

干得好。

```
preg_match(/Start Date: ([^\s]+) \d{2}, \d{4}/, $date, $matches);
echo $matches[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:19:32.243

我会做类似的事情：

```
Start Date: \[(\w+)\] \[(\d{2,2})\], \[(\d{4,4})\] 
```

此正则表达式不直接验证月份，而是匹配该模式并将月份、日期和年份提取为捕获的组，因此您可以根据地图进行验证。

上面的表达式假设您也想匹配 [ ] 字符，如果您不这样做：

```
Start Date: (\w+) (\d{2,2}), (\d{4,4}) 
```

# regex - [left | 的正则表达式“AND OR” 对] || [顶部 | 底部]

> ID：11326998
> 
> 赞同：0
> 
> 时间：2012-07-04T10:13:37.310
> 
> 标签：regex, yacc, lex

我正在尝试编写一个匹配以下 YACC 表达式的正则表达式 `[left | right] || [top | bottom]`：

它应该匹配：（左或右）AND OR（顶部或底部）。OR ' `|`' 做起来很简单，但 ' `||`' 我想不通。这个表达式是 W3C 定义的 CSS 渐变语法的一部分：

```
<linear-gradient> = linear-gradient(
    [ [ <angle> | to <side-or-corner> ] ,]? 
    <color-stop>[, <color-stop>]+
)

<side-or-corner> = [left | right] || [top | bottom] 
```

编辑：给予：左上匹配：左上

给予：左 匹配：左

给予：右下 匹配：右下

给予：对 20px 匹配：对

希望这能更好地解释它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:46:40.970

```
/(left|right)|(top|bottom)|(left|right)\s(top|bottom)/ 
```

应该做的任务。您可以将其缩短为

```
/(left|right|top|bottom)|(left|right)\s(top|bottom)/ 
```

或者

```
/(left|right)|((left|right)\s)?(top|bottom)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:49:47.110

如果我理解正确，您需要一侧（*左/右/上/下*）或角落（*左上，右下*......）。
这可以像这样解决：

```
/^((left|right|top|bottom)|((top|bottom)delimiter(left|right)))$/ 
```

当然，您可以颠倒角符号的边顺序（将角输出为*left-top*而不是*top-left*）：

```
/^((left|right|top|bottom)|((left|right)delimiter(top|bottom)))$/ 
```

请注意，分隔符是您想要的分隔符（可以是空格或减号）。
希望这可以帮助！

PS：我在推特上听到了你的求助电话：P。

**根据您的编辑进行更新**
，我想现在我了解您的需要：

```
/^((left|right|top|bottom)|((left|right|(-?\d*(\.\d+)?(px|em|\%)))\s+(top|bottom|(-?\d*(\.\d+)?(px|em|\%)))))$/ 
```

这个正则表达式现在匹配一个边（*left/top/right/bottom*）或由 left 和 top 值定义的两个边，可以是方向关键字（*left/top/right/bottom*）或实际值（例如`100px`or `1.4em`） .
值正则表达式 ( `-?\d*(\.\d+)?(px|em|\%)`) 匹配任何浮点数（即使没有第一个零：`.123`而不是`0.123`），后跟一个测量单位（在这里您可以提供完整的单位列表）

这是我通过的一些（javascript）测试：

```
var pattern = /^((left|right|top|bottom)|((left|right|(-?\d*(\.\d+)?(px|em|\%)))\s+(top|bottom|(-?\d*(\.\d+)?(px|em|\%)))))$/;
pattern.test('left bottom');   // true
pattern.test('-10px top');     // true
pattern.test('-.23em 140%');   // true 
```

**最终更新**

*   删除了开始和结束字符
*   切换了边和角模式的顺序，优先匹配角模式

`/(((left|right|(-?\d*(\.\d+)?(px|em|\%)))\s+(top|bottom|(-?\d*(\.\d+)?(px|em|\%))))|(left|right|top|bottom))/`

# telerik-grid - Telerik MVC Ajax Grid - 在保存到数据库之前将 ViewModel 添加到其他 ViewModel

> ID：11326999
> 
> 赞同：0
> 
> 时间：2012-07-04T10:13:45.137
> 
> 标签：telerik-grid, telerik-mvc

假设我有 2 个模型：

客户（ID、姓名）<[0..1 - *]> 发票（ID、姓名、值）。

现在，Route /Customer/Create 允许我在 TelerikGrid 下方创建一个新客户（名称的一个文本框），它将发票添加到客户。

我的解决方案是：

1.  创建客户（使用默认名称，例如“-”）
2.  保存到数据库
3.  读取客户 ID
4.  将发票添加到此 CustomerId
5.  再次拯救客户

我的目标：

/Customer/Create/ -> 创建一个新的 CustomerViewModel-Object，用网格显示视图，它绑定到 InvoiceViewModel（CustomerViewModel 的属性）

```
 .DataBinding(dataBinding => dataBinding
            .Ajax()
            .Insert("InsertInvoice", "Customer") 
```

ajax-Method 应该像：

```
private CustomerViewModel myCustomerViewModel;

public ActionResult Create()
{
     this.myCustomerViewModel = new CustomerViewModel();
     this.myCustomerViewModel = new List<InvoiceViewModel>();

     return View(this.myCustomerViewModel);
}

[AcceptVerbs(HttpVerbs.Post)]
[GridAction]
public ActionResult InsertInvoice(InvoiceViewModel newInvoice)
{
     this.myCustomerViewModel.Invoices.Add(newInvoice)
     return View(new GridModel(this.myCustomerViewModel.Invoices));
} 
```

最后，当我单击“创建”按钮创建新客户时，它应该将其保存到数据库。

现在我卡住了，因为当我调用“InsertInvoice”-Method 时，myCustomerViewModel 为 NULL。

主意？

最好的问候，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:56:43.167

问题解决了，但我不知道它是否“干净”，尽管如此：

老的：

```
private CustomerViewModel myCustomerViewModel; 
```

现在：

```
public CustomerViewModel CurrentCustomer
{
    get
    {
        return (CustomerViewModel )Session["CurrentCustomer"];
    }
    set
    {
        Session["CurrentCustomer"] = value;
    }
} 
```