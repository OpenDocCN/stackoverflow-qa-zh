# StackOverflow 问答 10549000-10549999

# c# - 在 C# 中创建一个数组列表

> ID：10549003
> 
> 赞同：4
> 
> 时间：2012-05-11T09:41:46.573
> 
> 标签：c#

我在 C# 中创建数组列表时遇到了问题，你能帮帮我吗？我需要创建数组列表来删除所有长度小于 19 的管道。

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            ArrayList lstPipeTypes = new ArrayList();

            lstPipeTypes.Add(new PipesList("PVC Pipes"));
            ((PipesList)lstPipeTypes[0]).Pipes.Add(new Pipe("The blue pipe", 12));
            ((PipesList)lstPipeTypes[0]).Pipes.Add(new Pipe("The red pipe", 15));
            ((PipesList)lstPipeTypes[0]).Pipes.Add(new Pipe("The silver pipe", 6));
            ((PipesList)lstPipeTypes[0]).Pipes.Add(new Pipe("The green pipe", 52));

            lstPipeTypes.Add(new PipesList("Iron Pipes"));
            ((PipesList)lstPipeTypes[1]).Pipes.Add(new Pipe("The gold pipe", 9));
            ((PipesList)lstPipeTypes[1]).Pipes.Add(new Pipe("The orange pipe", 115));
            ((PipesList)lstPipeTypes[1]).Pipes.Add(new Pipe("The pink pipe", 1));

            lstPipeTypes.Add(new PipesList("Chrome Pipes"));
            ((PipesList)lstPipeTypes[2]).Pipes.Add(new Pipe("The grey pipe", 12));
            ((PipesList)lstPipeTypes[2]).Pipes.Add(new Pipe("The black pipe", 15));
            ((PipesList)lstPipeTypes[2]).Pipes.Add(new Pipe("The white pipe", 19));
            ((PipesList)lstPipeTypes[2]).Pipes.Add(new Pipe("The brown pipe", 60));
            ((PipesList)lstPipeTypes[2]).Pipes.Add(new Pipe("The peach pipe", 16));

            RemoveTheSmallPipes(lstPipeTypes);
        }

        public static ArrayList RemoveTheSmallPipes(ArrayList lstPipeTypes)
        {

            //should remove all pipes that have lengths lower than 19.

            return lstPipeTypes;

        }
    }

    class PipesList
    {
        public string pipeType;
        public ArrayList Pipes;

        public PipesList(string newBoxType)
        {
            pipeType = newBoxType;
            Pipes = new ArrayList();
        }
    }

    class Pipe
    {
        public string name;
        public float length;

        public Pipe(string newName, float newLength)
        {
            this.name = newName;
            this.length = newLength;
        }
    }

} 
```

我还创建了两个名为 Pipe 和 PipeList 的类，我需要将数组列表放在“RemoveTheSmallPipes”方法中。但是我现在很困惑，无法写剩下的。请帮我移除所有长度小于 19 的管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:35:14.097

这是您的方法，无需更改任何其他内容：

```
public static ArrayList RemoveTheSmallPipes(ArrayList lstPipeTypes)
{

    for (int i = 0; i < lstPipeTypes.Count; i++)
    {
        ArrayList pipesToRemove = new ArrayList();
        int pipeCount = ((PipesList)lstPipeTypes[i]).Pipes.Count;
        for (int j = 0; j < pipeCount; j++)
        {
            if (((Pipe)((PipesList)lstPipeTypes[i]).Pipes[j]).length < 19)
            {
                pipesToRemove.Add(j);
            }
        }

        for (int k = 0; k < pipesToRemove.Count; k++)
        {
            ((PipesList)lstPipeTypes[i]).Pipes.RemoveAt((int)pipesToRemove[k]);
        }
    }

    return lstPipeTypes;
} 
```

真的很遗憾你不能更改任何其他内容，因为此代码不再符合标准。为了向您展示不同之处，这里是修改后的 C# 4.0 版本：

安慰：

```
static void Main(string[] args)
{
    var pipeTypes = new List<PipePile>();

    pipeTypes.Add(new PipePile("PVC Pipes", new List<Pipe>
        {
            new Pipe { Name = "The blue pipe", Length = 12 },
            new Pipe { Name = "The red pipe", Length = 15 },
            new Pipe { Name = "The silver pipe", Length = 6 },
            new Pipe { Name = "The green pipe", Length = 52 }
        }));

    pipeTypes.Add(new PipePile("Iron Pipes", new List<Pipe>
        {
            new Pipe { Name = "The gold pipe", Length = 9 },
            new Pipe { Name = "The orange pipe", Length = 115 },
            new Pipe { Name = "The pink pipe", Length = 1 }
        }));

    pipeTypes.Add(new PipePile("Chrome Pipes", new List<Pipe>
        {
            new Pipe { Name = "The grey pipe", Length = 12 },
            new Pipe { Name = "The black pipe", Length = 15 },
            new Pipe { Name = "The white pipe", Length = 19 },
            new Pipe { Name = "The brown pipe", Length = 60 },
            new Pipe { Name = "The peach pipe", Length = 16 }
        }));

    // Remove all pipes with length longer than 19
    pipeTypes.ForEach(pile => pile.Pipes.RemoveAll(pipe => pipe.Length > 19));
} 
```

课程：

```
public class Pipe
{
    public string Name { get; set; }
    public float Length { get; set; }
}

public class PipePile
{
    public string PipeType { get; set; }
    public List<Pipe> Pipes { get; set; }

    public PipePile(string pipeType, List<Pipe> pipes)
    {
        PipeType = pipeType;
        Pipes = pipes;
    }

    public PipePile(): this("", new List<Pipe>())
    {
    }
} 
```

如您所见，它完全不同，但更优雅（Linq FTW！:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:56:33.947

你可以试试：

```
for (i = 0; i < lstPipeTypes.Count; i++) {
    ((PipesList)lstPipeTypes[i]).Pipes.remove(x => x.Length < 19);     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:17:44.653

同意关于使用 List 而不是 ArrayList 的评论，所以我稍微改变了你的代码（会改变更多，但想让它看起来很熟悉）。

```
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            IList<PipesList> lstPipeTypes = new List <PipesList>();

            lstPipeTypes.Add(new PipesList("PVC Pipes"));
            (lstPipeTypes[0]).Pipes.Add(new Pipe("The blue pipe", 12));
            (lstPipeTypes[0]).Pipes.Add(new Pipe("The red pipe", 15));
            (lstPipeTypes[0]).Pipes.Add(new Pipe("The silver pipe", 6));
            (lstPipeTypes[0]).Pipes.Add(new Pipe("The green pipe", 52));

            lstPipeTypes.Add(new PipesList("Iron Pipes"));
            (lstPipeTypes[1]).Pipes.Add(new Pipe("The gold pipe", 9));
            (lstPipeTypes[1]).Pipes.Add(new Pipe("The orange pipe", 115));
            (lstPipeTypes[1]).Pipes.Add(new Pipe("The pink pipe", 1));

            lstPipeTypes.Add(new PipesList("Chrome Pipes"));
            (lstPipeTypes[2]).Pipes.Add(new Pipe("The grey pipe", 12));
            (lstPipeTypes[2]).Pipes.Add(new Pipe("The black pipe", 15));
            (lstPipeTypes[2]).Pipes.Add(new Pipe("The white pipe", 19));
            (lstPipeTypes[2]).Pipes.Add(new Pipe("The brown pipe", 60));
            (lstPipeTypes[2]).Pipes.Add(new Pipe("The peach pipe", 16));

            RemoveTheSmallPipes(lstPipeTypes);
        }

        public static IList<PipesList> RemoveTheSmallPipes(IList<PipesList> lstPipeTypes)
        {

            foreach (var pipesList in lstPipeTypes)
            {
                pipesList.Pipes = pipesList.Pipes.Where(p => p.length >= 19).ToList();
            }

            return lstPipeTypes;
        }
    }

    class PipesList
    {
        public string pipeType;
        public IList<Pipe> Pipes;

        public PipesList(string newBoxType)
        {
            pipeType = newBoxType;
            Pipes = new List <Pipe>();
        }
    }

    class Pipe
    {
        public string name;
        public float length;

        public Pipe(string newName, float newLength)
        {
            this.name = newName;
            this.length = newLength;
        }
    }

} 
```

我还建议您取出硬编码的值 19，并使用 const 或其他东西，或者可能作为方法的参数。

# html - 使用 css 文件时未应用 CSS 属性

> ID：10549005
> 
> 赞同：-1
> 
> 时间：2012-05-11T09:42:06.080
> 
> 标签：html, css

我有一些这样的html：

```
<table id="MatrixTable" class="zebra-striped">
    <thead>
        <tr style="background-color: White;">
            <td style="min-width: 31px !important;">
                ...
            </td> 
```

如您所见，我在 html 代码中将背景颜色设置为白色。

接下来，如果我在 CSS 中设置它，那么它就不再起作用了。奇怪，因为当我在运行时检查 CSS（IE F12）时，我可以看到 thead / tr 的背景颜色为白色。

```
#MatrixTable thead tr  
{
    background-color: White !important;
} 
```

为什么这不适用于 CSS 文件？我的 css 文件中的其他内容已正确应用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:51:30.377

1.  check if your css-file is included properly
2.  check if there are other styles overriding your tr style
3.  check other (child-) elements (like your `td`) having styles that could nullify this style.
4.  correct `White` to `white`
5.  check the specificity of your selection rules (inline styles have higher priorities!)

sidenote: avoid `!important` where ever you can, it leads to sloppy style resulting in such problems. It is not meant to be used for these purposes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:54:50.627

请改用此 CSS 选择器：

```
#MatrixTable thead tr td {
    background-color: #FFF !important;
} 
```

# c++ - TimerQueue 未声明的标识符

> ID：10549006
> 
> 赞同：0
> 
> 时间：2012-05-11T09:42:07.963
> 
> 标签：c++, winapi

我在 Microsoft Visual C++ 中有一个 C++ 项目，并且包含 windows.h。但是在使用 CreateTimerQueueTimer、DeleteTimerQueueTimer 和 WT_EXECUTEINTIMERTHREAD 时，我遇到了未声明的标识符错误。

只要我看过，应该都是声明成windows.h，所以没看懂问题所在。

另外，我在同一个文件中使用了其他 winapi 函数而没有问题，例如 CreateProcess，所以我认为库安装正确。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:23:47.843

您收到“未声明标识符”错误，因为您使用的是 Visual C++ 6，并且它的 Platform SDK 标头（从 1998 年开始）早于计时器队列函数的引入。

[仍然适用于 Visual C++ 6的 SDK 版本](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK#Versions "维基百科")不再可从 Microsoft 下载中心下载，但指向原始文件的直接链接仍然有效（请参阅下面 Hans Passant 的评论），或者可以在[此处](http://go.microsoft.com/fwlink/?LinkId=48615 "微软履行")订购。

# javascript - 为 RichTextArea 生成的 HTML：#document 是什么？

> ID：10549008
> 
> 赞同：6
> 
> 时间：2012-05-11T09:42:34.303
> 
> 标签：javascript, html, gwt, dom

我可以在 Chrome 开发者工具中看到为 GWT 的`RichTextArea`小部件生成的 html 是这样的：

```
<iframe class="GCJ2VDKDEI" style="height: 40px; ">
  #document
    <html>
      <head></head>
      <body>entered text</body>
    </html>
</iframe> 
```

有人可以描述它是如何工作的吗？嵌入的页面怎么可能`<iframe>`对用户是可编辑的（看起来和行为像文本区域）？

我特别想知道那是什么奇怪`#document`的东西。这是我第一次看到这样的东西，谷歌没有给我答案:(。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:48:08.890

它是`Document`iframe 内文档的节点。[所有`Document`节点都有一个`nodeName`属性“#document”](http://www.w3.org/TR/dom/#dom-node-nodename)，你可以通过检查来查看`document.nodeName`。Chrome 的开发人员工具可能通过添加 iframe`contentDocument`属性的扩展作为 iframe 扩展的子级来处理 iframe。

至于可编辑的文档，WYSIWYG 编辑器使用 iframe 来编辑可编辑内容是很常见的。所有当前的浏览器都允许通过属性在任何元素上内置编辑功能[`contenteditable`](http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#contenteditable)，也可以通过属性在文档级别上进行编辑`document.designMode`。

# c# - 闹钟——时间选择器

> ID：10549010
> 
> 赞同：1
> 
> 时间：2012-05-11T09:43:04.763
> 
> 标签：c#, winforms, time, alarm, picker

我正在尝试编写一个收音机闹钟作为一些编程练习，我已经成功地让一个时钟在一两行中工作。然而，当谈到让用户选择闹钟时间时，我不知道如何收集信息。

日期时间选择器可以传递看起来的日期和时间，但我只能弄清楚如何选择我不想要的日期。

我可以在表单上放置任何其他对象，以便用户可以选择设置闹钟的时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:10:21.710

如果您只想用 a 操作时间`DateTimePicker`，则以下代码应根据[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms229631.aspx)工作：

```
timePicker.Format = DateTimePickerFormat.Time;
timePicker.ShowUpDown = true; 
```

# ios - IOS：网络不可用时使用 stringWithContentsOfURL

> ID：10549011
> 
> 赞同：0
> 
> 时间：2012-05-11T09:43:04.833
> 
> 标签：ios, error-handling, initwithcontentsofurl

在此代码中，从我的应用程序中查询可访问网络（“ [http://soxxx9.cafe24.com/event.php](http://soxxx9.cafe24.com/event.php) ”）

```
 NSString * szURL =[NSString stringWithFormat:@"http://soxxx9.cafe24.com/event.php"];

   NSURL *url = [NSURL URLWithString:[szURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]];

   NSString *strData;
   while(1)
  {
    NSError *error = nil;
    strData = [NSString stringWithContentsOfURL:url
                                             encoding:NSUTF8StringEncoding
                                                error:&error];
    if(!error)
       break;
    //String data is not owned by me, no need to release
} 
```

如果你有更好的方法，请教我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:34:23.543

当网络中断时，此代码似乎非常耗电：您将尝试数百万次下载无法访问的内容......

查看 Apple 提供的 Reachability 类（[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)）。你会在 gitHub 上找到 ARCified 版本（例如[https://github.com/tonymillion/Reachability ）。](https://github.com/tonymillion/Reachability)

这个想法是注册有关网络可达性的通知。

因此，在您的代码中：

1.  在检索您想要的字符串之前检查网络资源的可用性。
2.  如果可用，请使用您的代码而不使用 while(TRUE)
3.  在您的代码中检索客户端 = 时检查您的字符串是否有任何错误

如果网络不可用，您必须通知用户网络不可达，并注册可达性通知，以便在再次可达时立即检索您的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:45:00.270

你应该有一个类来为你处理连接。通过这种方式，您可以更好地控制正在发生的事情。`MKNetworkKit`是一个解决方案，你可以[在这里查看](https://github.com/MugunthKumar/MKNetworkKit)。

# java - 在字符串中的每一个或两个字符后插入空格

> ID：10549013
> 
> 赞同：2
> 
> 时间：2012-05-11T09:43:23.040
> 
> 标签：java, math, spacing, infix-notation

我需要编写代码来更正用户输入。输入是中缀形式的数学表达式。为了使我的计算正确，我需要将每个操作数与运算符隔开。

你能帮我写一个能提供以下预期结果的方法吗？

预期输入：13*21-5+33 预期输出：13 * 21 - 5 + 33

我所做的研究：我只能找出如何在字符串中的每个字符之间添加空格，而这不适用于计算具有两位数值的表达式。即：1 3 * 2 1 - 5 + 3 3\. [Java 中如何在现有字符串的每个字符后插入空格？](https://stackoverflow.com/questions/4469984/how-to-insert-space-after-every-character-of-an-existing-string-in-java)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:49:19.647

此解决方案标准化每个运算符周围的空白。

```
return expr.replaceAll("(?<=\\d)\\s*([-+/*])\\s*(?=\\d)", " $1 "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:57:31.330

使用正则表达式查找数字，然后用空格包围它们：

```
string.replaceAll("\\d+", " $0 ").trim(); // trim in case numbers are first/last 
```

# java - JFrame + JOGL 仅在调整大小或最小化 + 最大化时显示内容

> ID：10549020
> 
> 赞同：1
> 
> 时间：2012-05-11T09:43:41.900
> 
> 标签：java, eclipse, opengl, graphics, jogl

我目前正在尝试使用 JOGL，但遇到了一个对我来说真的很新的问题。启动程序后，我看到一个空白窗口。调整大小后，我通常可以看到它的内容，或者我是否进行了最小化/恢复。我想这与事件有关。*init()*不会在创建窗口后调用，而是在第一次触发调整大小或最小化后调用。

这是我用于创建窗口和设置 OpenGL 的代码：

```
package com.cogwheel.framework.graphics;

import java.awt.BorderLayout;

import javax.media.opengl.GL;
import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.awt.*;
import javax.swing.JFrame;

import com.cogwheel.framework.init.CWGPreferences;
import com.cogwheel.framework.util.CWGDebug;
import com.jogamp.opengl.util.Animator;

public class CWGOpenGLScreen extends JFrame implements GLEventListener {
private static final String TAG = "CWGOpenGLScreen";

private GLCanvas mCanvas;
private long fpsLast = System.currentTimeMillis();

public CWGOpenGLScreen(){
    this.setTitle(CWGPreferences.WINDOW_NAME);
    this.setSize(CWGPreferences.WINDOW_SIZE);
    this.setLayout(new BorderLayout());
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ///this.setResizable(false);
    this.setVisible(true);

    CWGDebug.info(TAG, "Window created!");

    CWGSetupGL();
}
private void CWGSetupGL(){
    GLCapabilities mCaps = new GLCapabilities(null);
    mCaps.setHardwareAccelerated(true);
    mCaps.setDoubleBuffered(true);

    mCanvas = new GLCanvas(mCaps);
    mCanvas.addGLEventListener(this);

    this.add(mCanvas, BorderLayout.CENTER);

    Animator animator = new Animator(mCanvas);
    animator.start();
}

public void CWGDrawScene(GLAutoDrawable drawable)
{
    CWGCalculateFPS();

    GL2 gl = drawable.getGL().getGL2();
    gl.glClear(GL.GL_COLOR_BUFFER_BIT);
    gl.glLoadIdentity();

    gl.glBegin(GL.GL_TRIANGLES);
        gl.glColor3f(1.0f, 0.0f, 0.0f);
        gl.glVertex3f(1.0f / 5 , 0.0f, 0.0f);

        gl.glColor3f(0.0f, 1.0f, 0.0f);
        gl.glVertex3f(1.0f / 5, 1.0f / 5, 0.0f);

        gl.glColor3f(0.0f, 0.0f, 1.0f);
        gl.glVertex3f(0.0f, 1.0f / 5, 1.0f / 5);
    gl.glEnd();
    gl.glFlush();
}

public void CWGCalculateFPS(){
    this.setTitle(CWGPreferences.WINDOW_NAME + " [" + 1000 / (System.currentTimeMillis() - fpsLast) + "]");
    fpsLast = System.currentTimeMillis();
}

public void init(GLAutoDrawable drawable){
        /*GL2 gl = drawable.getGL().getGL2();

        gl.glClearColor(0, 0, 0, 0);
        gl.glMatrixMode(GL2.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrtho(0, 1, 0, 1, -1, 1);
        */
        CWGDebug.info(TAG, "Init called!");
}
public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height){}
public void displayChanged(GLAutoDrawable drawable, boolean modeChanged, boolean deviceChanged){}
public void display(GLAutoDrawable drawable){ CWGDrawScene(drawable); }
public void dispose(GLAutoDrawable drawable){} 
```

}

我知道，代码质量很差，还没有时间清理。对不起。

编辑：遇到问题，在 GLEventListener 未初始化之前不应显示 JFrame。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:21:52.807

我发现了你的错误（它与 eclipse 无关）：你应该在调整画布大小时设置视口（调用 glViewport）=> 所以你在GLEventListener 的 reshape() 方法。这样 OpenGL 总是知道在哪里绘制场景，而不仅仅是在调整帧大小时。

另外，不要忘记在显示屏幕**之前**设置屏幕（调用 CWGSetupGL()） （否则您仍然会遇到同样的问题，但只有一点时间）。

这里是修改后的代码（我已经删除了对 CWGDebug.info 的调用，因为你没有提供这个类，但你可以把它们放回去）：

```
package com.cogwheel.framework.graphics;

import java.awt.BorderLayout;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.media.opengl.GL;
import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLCapabilities;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.awt.GLCanvas;
import javax.swing.JFrame;

import com.jogamp.opengl.util.Animator;

public class CWGOpenGLScreen extends JFrame implements GLEventListener {

    public static void main(String[] args) {
        new CWGOpenGLScreen().setVisible(true);
    }

private static final long serialVersionUID = 635066680731362587L;

private static final String TAG = "CWGOpenGLScreen";

private GLCanvas mCanvas;
private long fpsLast = System.currentTimeMillis();

public CWGOpenGLScreen(){
    this.setTitle(TAG);
    this.setSize(640,480);
    this.setLayout(new BorderLayout());
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ///this.setResizable(false);

    CWGSetupGL();
    this.setVisible(true);

//    CWGDebug.info(TAG, "Window created!");
}
private void CWGSetupGL(){
    GLCapabilities mCaps = new GLCapabilities(null);
    mCaps.setHardwareAccelerated(true);
    mCaps.setDoubleBuffered(true);

    mCanvas = new GLCanvas(mCaps);
    mCanvas.addGLEventListener(this);

    this.add(mCanvas, BorderLayout.CENTER);

    final Animator animator = new Animator(mCanvas);
    animator.start();

    addWindowListener(new WindowAdapter() {

        @Override
        public void windowClosing(WindowEvent e) {
            animator.stop();
            System.exit(0);
        }

    });
}

public void CWGDrawScene(GLAutoDrawable drawable)
{
    CWGCalculateFPS();

    GL2 gl = drawable.getGL().getGL2();
    gl.glClear(GL.GL_COLOR_BUFFER_BIT);
    gl.glLoadIdentity();

    gl.glBegin(GL.GL_TRIANGLES);
        gl.glColor3f(1.0f, 0.0f, 0.0f);
        gl.glVertex3f(1.0f / 5 , 0.0f, 0.0f);

        gl.glColor3f(0.0f, 1.0f, 0.0f);
        gl.glVertex3f(1.0f / 5, 1.0f / 5, 0.0f);

        gl.glColor3f(0.0f, 0.0f, 1.0f);
        gl.glVertex3f(0.0f, 1.0f / 5, 1.0f / 5);
    gl.glEnd();
    gl.glFlush();
}

public void CWGCalculateFPS(){
    this.setTitle(TAG + " [" + 1000 / (System.currentTimeMillis() - fpsLast) + "]");
    fpsLast = System.currentTimeMillis();
}

public void init(GLAutoDrawable drawable){
        /*GL2 gl = drawable.getGL().getGL2();

        gl.glClearColor(0, 0, 0, 0);
        gl.glMatrixMode(GL2.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrtho(0, 1, 0, 1, -1, 1);
        */
//        CWGDebug.info(TAG, "Init called!");
}
public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height){
    GL2 gl = drawable.getGL().getGL2();
    gl.glViewport(x, y, width, height);
}
//public void displayChanged(GLAutoDrawable drawable, boolean modeChanged, boolean deviceChanged){}
public void display(GLAutoDrawable drawable){ CWGDrawScene(drawable); }
public void dispose(GLAutoDrawable drawable){}
} 
```

问候 ：）

编辑：抱歉，我没有看到您通过编辑回答自己的问题。无论如何，我仍然认为您最好在 reshape() 方法中调用 glViewport 。

# iphone - 在 iPhone 应用程序中以 mp3 格式录制音频

> ID：10549023
> 
> 赞同：7
> 
> 时间：2012-05-11T09:43:55.963
> 
> 标签：iphone, objective-c, ios, avaudioplayer, avaudiorecorder

我正在开发一个以 .wav 格式录制音频的 iPhone 应用程序。

这是代码：

```
NSMutableDictionary* recordSetting = [[NSMutableDictionary alloc]init];         
[recordSetting setValue :[NSNumber  numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
[recordSetting setValue:[NSNumber numberWithFloat:11025.0] forKey:AVSampleRateKey];         
[recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];
[recordSetting setValue:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];

NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
 NSUserDomainMask, YES);

  NSString *documentsDirectory = [path objectAtIndex:0]; 

  NSString *myDBnew = [documentsDirectory stringByAppendingPathComponent:@"test.wav"];

 recordedTmpFile = [NSURL fileURLWithPath:myDBnew];

NSLog(@"Using File called: %@",recordedTmpFile);

        recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        [recorder record]; 
```

上面的代码是以 .wav 格式录制音频。如果我想使用 key`kAudioFormatMPEGLayer3(mp3)`而不是在 MP3 中录制音频，`kAudioFormatLinearPCM(.wav)`我还需要进行哪些其他更改？recordSetting 字典中的变化，如采样率、通道和所有。

或者建议任何兼容 iPhone 和 Android 的音频格式，体积更小，可以直接从 iPhone 应用程序录制。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-11T14:30:55.610

您不能在 MP3 中录制，它在编码方面是一种专有格式。这些是我使用的设置，2 分钟的录制时间约为 150KB：

```
NSString *tempDir = NSTemporaryDirectory();
NSString *soundFilePath = [tempDir stringByAppendingPathComponent:@"sound.m4a"];

NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,
                                  [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
                                  [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                                  [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                                  [NSNumber numberWithFloat:8000.0], AVSampleRateKey,
                                  [NSNumber numberWithInt:8], AVLinearPCMBitDepthKey,
                                  nil]; 
```

转换也是处理器密集型操作，如果您将此音频发送到服务器，您可以使用 FFMPEG 和 mp3lame 库在服务器上进行音频转换。

**编辑：**这是 Android 录制的代码，它设置为 AMR 编码，因为只有 Honeycomb 才支持 AAC。

```
mediaRecorder = new MediaRecorder();
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
mediaRecorder.setAudioChannels(1);
mediaRecorder.setOutputFile("sample.m4a"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T14:25:46.553

您不能在 .mp3 文件中录制音频。`kAudioFormatMPEGLayer3`只为`playback the .mp3 format audio`。有`no codec available for .mp3 recording`。您需要记录`aac`或`wav`格式化并将其转换为`.mp3`格式。

最好查看以下链接和图片：

[录音参考](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)

![在此处输入图像描述](../Images/39642f6391ccbb4aa91ae28f5396a3d9.png)

这是一个学习转换音频格式的基础知识的链接：

[音频转换器参考](http://developer.apple.com/library/ios/#DOCUMENTATION/MusicAudio/Reference/AudioConverterServicesReference/Reference/reference.html)

# actor - 在 Akka 中，我如何知道演员在注册到 actorOf() 后何时可以使用？

> ID：10549026
> 
> 赞同：5
> 
> 时间：2012-05-11T09:44:14.793
> 
> 标签：actor, akka, message-passing

如果我在 Akka 中使用 context().actorOf() 创建一个演员，我会得到一个有效的 ActorRef。但是，如果我执行相同操作但使用 actorFor 和我知道该演员将出现的路径创建一个 ActorRef，则我无法可靠地返回一个有效的 ActorRef。如何判断演员注册成功？

在上面的描述中，我可以简单地使用从 actorOf() 返回的 ActorRef。但是，在我的实际情况中，我创建了一个本身注册子演员的演员，我需要解决这个问题，所以一般的问题是“我如何等待/注册以获悉演员已在已知路径注册？ ”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-10T15:18:24.653

从 Akka 2.2.1 开始，您可以使用 ActorSelection.resolveOne 从演员选择中获取 ActorRef ：

```
implicit val timeout = Timeout(5, TimeUnit.SECONDS)
val selection = system.actorSelection("/user/myActor")
val actor = Await.result(selection.resolveOne(), timeout.duration) 
```

来自文档[http://doc.akka.io/api/akka/2.2.1/index.html#akka.actor.ActorSelection](http://doc.akka.io/api/akka/2.2.1/index.html#akka.actor.ActorSelection)

> 解析匹配此选择的 ActorRef。**如果存在这样的演员**，则结果将作为用 ActorRef 完成的 Future 返回。如果不存在这样的参与者或识别未在提供的超时内完成，则以失败的 ActorNotFound 完成。
> 
> 在幕后，它与演员对话以**验证其存在**并获取其 ActorRef。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:24:09.857

首先，不能保证您从 actorOf 返回的 ActorRef 仍然存在，因为它的构造函数可能已经失败。

其次，actorFor 可能会找到演员，但它在被发现之后和您开始使用它之前就死了。

第三，构建应用程序以使依赖关系以逻辑方式传播通常是一种很好的做法，以便在您的参与者之间有一个自然的集合点。

希望以上任何帮助，

快乐哈金！

√</p>

# java - 如何将 .java 文件将使用的外部文件放在源包上，并将 lib jar 放在 Java Web 应用程序上？

> ID：10549027
> 
> 赞同：0
> 
> 时间：2012-05-11T09:44:20.683
> 
> 标签：java, web-applications

我现在正在开发一个 java web 应用程序。我使用一些库（.jar）文件并在源包（.java）下创建一些java。在我的 .java 文件中，我编写了一些用于读取外部文件的代码，并且我使用的 jar 文件也将读取从我的 .java 文件调用的外部文件。

作为 java 应用程序运行时我没有遇到任何问题，但是在我的 servlet 中创建对象时出现错误。一条错误消息说我的 .java 文件和 .jar 文件找不到我需要的外部文件。我直接在我的项目文件夹中添加我的外部文件。

为了克服这个问题，我尝试了： 1.将我的外部文件添加到我的 lib 文件夹中。而我还是失败了。2.使用项目属性添加打包（右键项目然后选择编译并选择打包）。我把它们都加在那里。而我还是失败了。完成第 2 点后我得到的所有错误是：

```
WARNING: StandardWrapperValve[analyzer]: PWC1382: Allocate exception for servlet analyzerjava.lang.NullPointerException
at alphabeta.Alpha.loadAlpha(Alpha.java:36)
at alphabeta.AlphaBeta.loadCorpus(AlphaBeta.java:111)
at alphabeta.AlphaBeta.<init>(AlphaBeta.java:93)
at alphabeta.Analyzer.init(Analyzer.java:28)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1444)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:1071)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:189)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

而且当我部署我的项目时，glassfish 日志会告诉我：

```
WARNING: Illegal character in path at index 14: file:/D:/Grade 4/Noble 2/Finish II/AlphaBeta/AlphaBetaSystem/build/web/WEB-INF/lib/alphagamma.jar java.net.URISyntaxException: Illegal character in path at index 14: file:/D:/Grade 4/Noble 2/Finish II/AlphaBeta/AlphaBetaSystem/build/web/WEB-INF/lib/alpahgamma.jar
at java.net.URI$Parser.fail(URI.java:2829)
at java.net.URI$Parser.checkChars(URI.java:3002)
at java.net.URI$Parser.parseHierarchical(URI.java:3086)
at java.net.URI$Parser.parse(URI.java:3034)
at java.net.URI.<init>(URI.java:595)
at java.net.URL.toURI(URL.java:936) 
```

这是我读取外部文件的代码。我在创建对象时将在 servlet 中调用的 java 源代码上实现了这一点。

```
 public void loadPaper() throws FileNotFoundException, IOException {
    File[] corpus = new File(getDirectory()).listFiles();
    System.out.println(corpus.length);
    for (int iPaper = 0; iPaper < corpus.length; ++iPaper) {
        File paper = corpus[iPaper];
        BufferedReader input = new BufferedReader(new FileReader(paper));
        StringBuilder contents = new StringBuilder();
        String line;
        while ((line = input.readLine()) != null) {
            contents.append(line).append("\n");
        }
        String[] rawContent = contents.toString().split("\n\n");
        Paper cPaper = new Paper(iPaper, rawContent[0], rawContent[1], rawContent[rawContent.length - 1]);
        contents = new StringBuilder();
        for (int iContent = 2; iContent < rawContent.length - 1; ++iContent) {
            contents.append(rawContent[iContent]).append("\n\n");
        }
        cPaper.setText(rawContent[0] + "\n\n" + contents.toString());
        this.getCorpusCollection().add(cPaper);
        input.close();
    }
} 
```

目录是此类的一个属性。我想创建它的对象时设置它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:51:13.267

在 Java 中读取外部文件通常很痛苦……这完全取决于您使用的方法。你可以：

*   使用绝对路径（可能需要配置）
*   使用类加载器
*   使用库来帮助您（例如希望 Spring 提供）

你能粘贴阅读代码吗？

您必须意识到，在类加载和相对路径方面，在 Java EE 容器中启动代码与在 CLI 中使用代码非常不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:57:25.880

当我做一个使用外部源（.jar）的项目时，我遇到了类似的问题。问题是，当您使用 netbeans 或 eclipse 运行应用程序时，它知道如何在运行时加载外部源 (.jars)。导出应用程序时，您必须考虑一些事项：

*   导出源中的外部源
*   将外部源的路径添加到创建的应用程序的类路径中，以便它知道如何在运行时运行它

这个想法是必须在运行时加载外部源（netbeans 和 eclipse 自动执行的操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T11:48:17.310

最后我想通了。好的，我使用的技巧是：我试图从要读取数据的类的 java 类中保存我的文件。在那里，我打印绝对路径以找出服务器将外部路径保存为我的应用程序的相对路径的位置。根据该信息，我将所有外部文件都放在那里，并且我的应用程序运行良好。

感谢您的帮助。

# c++ - 读/写处理程序套接字计时器

> ID：10549035
> 
> 赞同：0
> 
> 时间：2012-05-11T09:44:33.800
> 
> 标签：c++, sockets, timeout

您如何设置读写超时（套接字）？并测试它们？

```
struct timeval timeout;
timeout.tv_sec = 3;
timeout.tv_usec = 0;
setsockopt (fd, SOL_SOCKET, SO_RCVTIMEO, (char *)&timeout,
  sizeof(timeout));
setsockopt (fd, SOL_SOCKET, SO_SNDTIMEO, (char *)&timeout,
    sizeof(timeout));
string temp;
while (1) {
    char buf [20];
    ssize_t e = read(fd, buf, 20);
            // convert current buf into string
            // add current string to temp
            // check if end of temp == \r\n\r\n
            // if yes break
} 
```

因此，如果我使用 telnet 进行测试，然后输入“hello”，控制台“挂起”，因为读取被阻塞。但是，当它挂起超过 3 秒时，超时什么也不做。我希望读取在挂起 3 秒后关闭连接。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:49:20.827

尺寸明显不对：

> ```
> setsockopt (fd, SOL_SOCKET, SO_RCVTIMEO, (char *)&timeout,
>     sizeof(timeout) < 0); 
> ```

放下`< 0`. 您可能会从一些 if 中复制粘贴，然后将括号搞砸。

# codeigniter - 如何使用 codeigniter 模块化扩展从 Module 加载库

> ID：10549037
> 
> 赞同：1
> 
> 时间：2012-05-11T09:44:38.717
> 
> 标签：codeigniter, hmvc

**我需要使用模块化扩展从我的模块中加载一个库**

**我的结构是这样的**

模块/

模块/类别/库

*   categories_class.php

模块/类别/控制器/

*   类别.php

    **我需要在类别控制器中加载类别库。**

有人帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T13:09:05.883

我看到两个问题..

## 问题 1

根据您的问题，您的类别模块组织不正确。HMVC 的全部目的是划分代码 ex；模块。鉴于您目前的问题，该结构如何允许您复制模块文件夹并将其粘贴到另一个应用程序中？**答：不会。**.

按照下面的例子

它应该是应用程序根目录中的以下内容：

```
/application/
   config
   modules/
    categories/
      views
      controllers/
        categories.php
      libraries/
        categories_class.php
      models
   libraries
   core
   controllers 
```

## 问题 2

根据用户指南：[https ://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

您必须在模块文件夹中引用的任何内容前面加上模块名称的前缀。

**例如：** `$this->load->library('module/library');`

**或者在你的情况下：** `$this->load->library('categories/categories_class');`

我之前曾尝试排除模块文件夹名称，但从未让它工作。

> 控制器可以作为其他控制器的类变量加载，`$this->load->module(’module/controller’);`或者仅 `$this->load->module(’module’);`在控制器名称与模块名称匹配的情况下加载。
> 
> 任何加载的模块控制器都可以像库一样使用，即： `$this->controller->method()`，但它可以独立于调用者访问自己的模型和库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T08:27:02.990

我对这种错误行为有另一种看法，这让我花了大约 3 个小时，实际上我总是在 Codeigniter 上的自定义库中使用大写和小写的组合。

对于 Codeigniter HMVC 的 Wiredesigz，请记住库加载器的行为与 CI 本身相同，***始终使用小写***的库类名而不是实际类名（可能是大写和小写的组合）

# ruby-on-rails - 设计中多个模型上的相同 current_user

> ID：10549038
> 
> 赞同：1
> 
> 时间：2012-05-11T09:44:40.130
> 
> 标签：ruby-on-rails, devise

## 问题

我有一个用户模型，以及从用户模型继承的志愿者模型：

```
class User < ActiveRecord::Base
end

class Volunteer < User
end 
```

它们都保存在数据库的同一张表上，但有不同的控制器/路由。

路线是：

```
devise_for :users ....
devise_for :volunteers .... 
```

这工作得很好而且很花哨，但是我使用的授权系统依赖于一个`current_user`助手。这对志愿者来说是失败的，因为设计`current_volunteer`是为志愿者模型创建的。

我尝试的是设置`devise_for :volunteers, :singular => "user"`，这会创建一个 current_user 来指代用户和志愿者，但现在的问题是志愿者的路线搞砸了。

## 问题

所以我的问题是，有没有办法让`current_user`助手引用用户以外的另一个模型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:15:52.137

我认为这样你就可以让用户在同一个会话中以用户和志愿者的身份登录。

一旦你有办法处理它，你不仅可以

```
# in application_controller.rb
alias_method :devise_current_user, :current_user
def current_user
  devise_current_user || current_volunteer
end 
```

在你的 application_controller.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:49:55.647

我遇到了类似的问题并像这样解决了它。但是这个解决方案是专门针对康康宝石的。

application_controller.rb

```
def actual_user
  @actual_user ||= current_user.present? ? current_user : current_volunteer
end

def current_ability
  @current_ability ||= Ability.new(actual_user)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:11:25.540

我接受了 viktor tron 的回答，因为这似乎是最干净的方法。

但是，我以不同的方式解决了我的问题。

我最终将其他类的登录过程硬编码为`:user`. `current_user`这使我即使是志愿者课程也可以访问该方法。

```
class Volunteers::SessionsController < Users::SessionsController

  def create
    resource = warden.authenticate!(:scope => resource_name, :recall => "#{controller_path}#new")
    if resource
      flash[:notice] = "You are logged in"
      sign_in(:user, resource)
      super
    else
      super
    end
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:51:59.493

也许有点晚了，但您可以在您的 routes.rb 中尝试以下内容

```
devise_for :users , :skip => :registrations
as :user do
    match "volunteers/edit(.:format)", :to => "devise/registrations#edit"
end
devise_for :volunteers , :skip => :sessions 
```

The above code assumes that all users and its subclasses (assuming what you are implementing STI to achieve Users model hierarchy) can sign_in and sign_out, but only volunteers can register. Since a volunteer is a user, the user should be able to edit his registration as such. You can add more routes inside the as :user block.

# list - 在 Jenkins 插件的配置果冻文件中填写 ArrayList

> ID：10549045
> 
> 赞同：5
> 
> 时间：2012-05-11T09:45:03.160
> 
> 标签：list, plugins, jenkins, jelly

尝试实现插件的配置文件时遇到问题。我使用已经存在的 SideBar 插件启动我的程序，但是当我将 a`List<String>`作为变量添加到时遇到了一个问题`class Action`：`private List<String> projects;` 如何在 jelly 文件中填充这样的列表？

我尝试这样做：

```
<f:entry>
 <f:optionalBlock title="Project to be considered :">
  <f:repeatable var="project" items="${link.projects}" name="projects" add="Add a project">
   <f:entry title="Project 1 :">
   </f:entry>
  </f:repeatable>      
 </f:optionalBlock>
</f:entry> 
```

我在 links.jelly 文件中添加了这些行，但它不起作用。

如果有人知道如何做到这一点，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T06:39:44.857

您的操作中的列表应该有一个类型（也为了更好地阅读）

```
private List<YourObject> projects 
```

然后你的 config.jelly 看起来像这样：

```
<f:repeatable var="projectInList" name="projects" items="${instance.projects}" noAddButton="true" minimum="0">
    <fieldset>
        <f:entry title="${%Project}" description="Project desc." 
                                field="variableInProjectObject">
            <f:textbox value="${projectInList.variableInProjectObject}" default="" />
        </f:entry>
    </fieldset>
</f:repeatable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T18:51:59.720

我用这种方式解决了类似的问题：

```
<f:entry title="Parameters" field="projects">
   <f:repeatableProperty field="projects"  minimum="1" />  
</f:entry> 
```

感谢[这个资源](http://jenkins-ci.361315.n4.nabble.com/Repeatable-set-of-fields-td4652233.html)

# ios-ui-automation - target.frontMostApp().keyboard() 未能找到键“N”

> ID：10549046
> 
> 赞同：4
> 
> 时间：2012-05-11T09:45:03.787
> 
> 标签：ios-ui-automation

我正在尝试使用 UI 自动化来自动化键盘输入。

```
target.frontMostApp().keyboard().typeString("INTERCOM") 
```

但是在输入第一个“I”后我会收到此错误

```
target.frontMostApp().keyboard() failed to locate key 'N'
Script threw an uncaught JavaScript error: target.frontMostApp().keyboard() failed to locate key 'N' 
```

我有一个本地化的瑞典语键盘。

任何人都知道这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:01:54.190

这可能会有所帮助：

```
var vKeyboard = target.frontMostApp().keyboard();
vKeyboard.setInterKeyDelay(0.1);
vKeyboard.typeString("INTERCOM"); 
```

默认情况下，此延迟设置为 0.03 秒。这不足以让您的应用程序更新键盘上的键。增加确定 typeString 键盘方法的键之间的超时时间将对您有所帮助。UIAKeyboard 参考页上没有关于 setInterKeyDelay 的描述，但此方法可用于 UIAKeyboard。我也不确定其他语言。我不知道 typeString 是否允许在其他语言上输入，但这 100% 适用于 iOS 5.x 的英文键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:41:56.897

```
try{
    target.delay(1);
    target.frontMostApp().mainWindow().textFields()[0].tap();
    target.delay(1);
    target.frontMostApp().mainWindow().textFields()[0].setValue("INTERCOM");
}
catch(err){
    target.delay(1);
    target.frontMostApp().mainWindow().scrollViews()[0].textFields()[0].tap();
    target.delay(1);
    target.frontMostApp().mainWindow().scrollViews()[0].textFields()[0].setValue("INTERCOM");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T13:26:41.560

我也遇到过这个问题，我相信这是字符串输入太快的情况。

似乎键的名称会根据换档按钮的状态而变化。如果启用换档，则该键称为“N”，如果未启用换档，则为“n”。您会注意到它是一个字符串正在输入，在输入大写字母之前点击了 shift 按钮。您的测试试图在按下“Shift”按钮之前按下“N”键。它不会影响句子的第一个字母，因为键盘为第一个字母启用了移位。

这也会影响在大写字符之后键入小写字符：可能会在 shift 按钮未按下的过程中键入小写字符。

我使用一种解决方法，即使用单独的 typeString() 方法键入字符串的每个字母。

```
for (i = 0; i < title.length; i++)
{
    var strChar = title.charAt(i);
    target.frontMostApp().keyboard().typeString(strChar);
} 
```

这样做的缺点是键入完整字符串需要更长的时间。

您可能还想查看以下链接，它提供了类似的解决方案，但对字符串的每个字符使用 app.keyboard().keys().tap() 方法而不是 typeString() 方法。 [http://jojitsoriano.wordpress.com/2011/06/27/ios-ui-automation-typing-a-string-in-a-uiatextfield/](http://jojitsoriano.wordpress.com/2011/06/27/ios-ui-automation-typing-a-string-in-a-uiatextfield/)

# c++ - 防止构造多个对象

> ID：10549047
> 
> 赞同：0
> 
> 时间：2012-05-11T09:45:07.093
> 
> 标签：c++, singleton, effective-c++

我正在阅读 Effective C++，所以我尝试实现防止构造多个对象的类（第 4 项）：

```
#include <iostream>
using namespace std;

class testType
{
    public: 
        testType()
        {
            std::cout << "TestType Ctor called." << std::endl;
        }
};

template <typename T, class C>
class boolWrapper 
{
    public: 
        boolWrapper()
            // Shouldn't T() be called here in the initialization list, before the
            // body of the boolWrapper? 
        {
            if (C::exists)
            {
                std::cout << "Oh, it exists." << endl;
            }
            else 
            {
                std::cout << "Hey, it doesn't exist." << endl;
                C::exists = true;
                T();
            }
        }

};

template<class T>
class singleton
{
    private: 
        static bool exists;
        boolWrapper<T, singleton> data_;

    public:
        singleton()
            :
                data_()
        {
        };

        friend class boolWrapper<T, singleton>;
};
template <class T>
bool singleton<T>::exists = false;

int main(int argc, const char *argv[])
{
    singleton<testType> s;

    singleton<testType> q;

    singleton<testType> r;

    return 0;
} 
```

为什么在 boolWrapper 构造函数的主体之前没有调用 boolWrapper 的 T() 构造？是不是因为 boolWrapper 没有 T 类型的数据成员，并且它没有从 T 继承（没有隐式调用父 ctor）？

另外，我在没有搜索解决方案的情况下进行了编码，我是否犯了任何设计错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:50:52.157

您发布的代码中的问题是 boolWrapper 没有 T 类型的数据成员。在类构造函数中，为基类和数据成员调用构造函数（默认构造函数）（如果在初始化列表中未提及显式构造函数）。

# search - Search Graph API 类型=页面空结果

> ID：10549048
> 
> 赞同：0
> 
> 时间：2012-05-11T09:45:14.077
> 
> 标签：search, facebook-graph-api, types, graph

[https://graph.facebook.com/search?q=platform&type=page&access_token=AAAAAAITEghMBAHNliisCo3f5nCVjRPaEUE6uZCpsbzOZB9LjXXbHTR5puUMbs6ObW91epZCAZCnzlqD1jXvd6K7EqiG71D1s7IojKY5eEgZDZD](https://graph.facebook.com/search?q=platform&type=page&access_token=AAAAAAITEghMBAHNliisCo3f5nCVjRPaEUE6uZCpsbzOZB9LjXXbHTR5puUMbs6ObW91epZCAZCnzlqD1jXvd6K7EqiG71D1s7IojKY5eEgZDZD)

type=page 的所有搜索都返回空结果有什么想法吗？它是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:54:03.280

删除访问令牌。这种类型的搜索不需要它。

# php - 使用 PHP 访问 Google 书签服务器端

> ID：10549049
> 
> 赞同：0
> 
> 时间：2012-05-11T09:45:18.977
> 
> 标签：php, api, bookmarks

我曾经使用以下 PHP 代码访问我的 Google 书签服务器端：

```
$curlObj = curl_init();
curl_setopt($curlObj, CURLOPT_URL, "https://www.google.com/bookmarks/?output=rss");
curl_setopt($curlObj, CURLOPT_USERPWD, "whatever@googlemail.com:mypassword");
curl_setopt ($curlObj, CURLOPT_RETURNTRANSFER, 1);
$response = curl_exec($curlObj);
echo $response;
curl_close($curlObj); 
```

以前，使用上面的代码，我会看到一个 XML 提要。

现在它显示“302 您的文档已移动。单击此处”。该链接将我带到登录页面。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:00:25.537

这种授权不再有效。您需要通过`https://accounts.google.com/ServiceLogin`和获取后的身份验证`https://www.google.com/bookmarks/?output=rss`

例子：

```
<?
$USERNAME = 'aaa';
$PASSWORD = 'bbb';

$ch = curl_init();
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
curl_setopt($ch, CURLOPT_TIMEOUT, 120);

curl_setopt($ch, CURLOPT_URL,
  'https://accounts.google.com/ServiceLogin?hl=en&service=bookmarks&continue=http://www.google.com/bookmarks');
$data = curl_exec($ch);

$formFields = getFormFields($data); // my code to get form fields, ask if you want it

$formFields['Email']  = $USERNAME;
$formFields['Passwd'] = $PASSWORD;
unset($formFields['PersistentCookie']);

$post_string = '';
foreach($formFields as $key => $value) {
    $post_string .= $key . '=' . urlencode($value) . '&';
}

$post_string = substr($post_string, 0, -1);

curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/ServiceLoginAuth');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);

$result = curl_exec($ch);
$info = curl_getinfo($ch);
// echo var_dump($info);
if ($info['url']=="https://accounts.google.com/ServiceLoginAuth")
    {
      die("Login failed");
    var_dump($result);
 } else {
    curl_setopt($ch, CURLOPT_URL, 'http://www.google.com/bookmarks/?output=rss');
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch, CURLOPT_POSTFIELDS, null);

    $result = curl_exec($ch);

    var_dump($result);
}

function getFormFields($data)
{
    if (preg_match('/(<form id=.?gaia_loginform.*?<\/form>)/is', $data, $matches)) {
        $inputs = getInputs($matches[1]);

        return $inputs;
    } else {
        die('didnt find login form');
    }
}

function getInputs($form)
{
    $inputs = array();

    $elements = preg_match_all('/(<input[^>]+>)/is', $form, $matches);

    if ($elements > 0) {
        for($i = 0; $i < $elements; $i++) {
            $el = preg_replace('/\s{2,}/', ' ', $matches[1][$i]);

            if (preg_match('/name=(?:["\'])?([^"\'\s]*)/i', $el, $name)) {
                $name  = $name[1];
                $value = '';

                if (preg_match('/value=(?:["\'])?([^"\'\s]*)/i', $el, $value)) {
                    $value = $value[1];
                }

                $inputs[$name] = $value;
            }
        }
    }

    return $inputs;
} 
```

# iphone-developer-program - 加入 Apple Developer Program 的合作伙伴关系

> ID：10549051
> 
> 赞同：3
> 
> 时间：2012-05-11T09:45:31.087
> 
> 标签：iphone-developer-program

我注册了我公司的苹果开发者计划，但我希望在工作之外开发应用程序。

我和我的合伙人打算一起开发应用程序并将它们发布到Apple App Store，但从表面上看，我们只有注册为企业并拥有营业执照等才能这样做。因为这只是一个小，合资企业，我们还没有真正建立自己的企业。

有没有办法解决？我可以以个人身份注册，但我的伴侣也需要注册，我们只能以我们的一个名字发表文章。

# iphone - 导航到 iphone 中的设置屏幕

> ID：10549053
> 
> 赞同：2
> 
> 时间：2012-05-11T09:45:39.310
> 
> 标签：iphone, ios, ios4, ios5

当按下应用程序中的按钮时，我想从我的应用程序移动到 iphone 的设置屏幕。任何人都可以通过告诉如何做到这一点来帮忙吗？任何帮助表示赞赏。对不起，我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-19T10:25:12.467

***prefs:root=General***模式不再适用于 iOS 最新版本！！！

里面有更新。以下在 iOS 8 中运行良好 ..

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:51:48.287

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]]; 
```

你可以看看这个

[iOS 启动设置 -> 限制 URL 方案](https://stackoverflow.com/questions/8246070/ios-launching-settings-restrictions-url-scheme)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:04:25.807

可以为低于 IOS 5.0 的版本打开设置屏幕，因为它已被最新的 IOS 禁用。对于较低版本，您可以尝试以下操作：

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

此外，您应该创建自己的视图并向用户呈现可编辑的设置，并从他那里获取输入（第一次或作为菜单）并使用 NSUserdefaults 存储它。

您不能要求用户输入诸如服务器地址端口等设置并每次都尝试，如果它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-21T07:27:16.880

我找到了从您的应用程序导航到设置应用程序的解决方案，该应用程序运行良好 iOS 8 或更高版本

1)`[[UIApplication sharedApplication] openURL:[NSURL URLWithString:UIApplicationOpenSettingsURLString]];`

仅当您的应用程序设置不存在时才会导航到设置，然后上面的代码将导航到您的应用程序的设置页面

我正在使用下面的字符串导航到 iCloud 页面，它工作正常

```
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"App-Prefs:root=CASTLE"] options:@{} completionHandler:nil] 
```

只需将“ `CASTLE`”替换为“ `GENERAL`”

# backbone.js - 使用backbone.js+backbone.localStorage.js复制localStorage数据

> ID：10549056
> 
> 赞同：2
> 
> 时间：2012-05-11T09:45:45.713
> 
> 标签：backbone.js, local-storage

我正在使用主干 + 主干.localStorage 来保存我的数据，但我得到了一个错误的行为：

我有一个模型设置，其中包含一个名为 user 的属性

```
Settings = Backbone.Model.extend({
    localStorage : new Backbone.LocalStorage('settingsStore')
});
var settings = new Settings();
settings.set({user: 'USERNAME'});
settings.save(); 
```

在这段代码之后，如果我在 weinre 中输出 settings.attributes 数据，我会得到以下信息：

```
 settings.attributes  
   Object  
   id: "3ac78cfb-ad60-1ab8-8391-f058ae9bfcfb"  
   user: "USERNAME"  
   __proto__: Object 
```

然后我将模型保存到 localStorage，清除，然后再次获取它：

```
settings.save();
settings.clear();
settings.fetch(); 
```

问题是，如果我输出 settings.attributes，现在这个属性存储在一个嵌套对象中：

```
 settings.attributes  
   Object  
   0: Object  
       id: "3ac78cfb-ad60-1ab8-8391-f058ae9bfcfb"  
       user: "USERNAME"  
       __proto__: Object  
   __proto__: Object 
```

问题是当我再次设置用户名以进行修改时，添加了一个新属性，如下所示：

```
 settings.attributes  
   Object  
   0: Object  
   id: "3ac78cfb-ad60-1ab8-8391-f058ae9bfcfb"  
   user: "USERNAME"  
   __proto__: Object  
   user: "NEWUSER"  
   __proto__: Object 
```

如果我保存这个模型，然后再次获取它，我会在属性上获得 2 个新对象......并且它每次都在不断增长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:36:40.873

fguillen link给出的问题的答案给出了这个问题的正确答案。

如果您想正确保存它，您只需要使用硬编码的“ID”创建模型对象。

这样做之后：

```
var settings = new Settings({ id: 1 }); 
```

save() 和 fecth() 方法工作正常。显然，您必须注意不要重复 2 个 ID ......

# sharepoint - Infopath 表单代码：获取存储启用 Web 的表单的文件夹

> ID：10549058
> 
> 赞同：0
> 
> 时间：2012-05-11T09:45:48.147
> 
> 标签：sharepoint, infopath2010, infopath-forms-services, sharepoint-object-model

我有一个存储在文档集中的支持 Web 的 Infopath 表单。

是否有可能在表单内的 c# 代码中获取存储实际表单的文件夹（文档集）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:59:49.163

您可以使用查询字符串中的查询参数 XSNLocation ...为此您可以参考以下博客：http: [//blogs.msdn.com/b/infopath/archive/2007/02/26/passing-data-into- a-form-input-parameters.aspx](http://blogs.msdn.com/b/infopath/archive/2007/02/26/passing-data-into-a-form-input-parameters.aspx)

# c++ - openFrameworks & Kinect：改善人体轮廓

> ID：10549060
> 
> 赞同：0
> 
> 时间：2012-05-11T09:45:58.530
> 
> 标签：c++, kinect, openframeworks

我正在玩 Kinect，并试图获得尽可能准确的人体轮廓。

到目前为止，我尝试更改阈值、模糊等……但我想知道是否有现有的有效方法可以做到这一点。

我认为要获得好身材有两个主要问题。一是如果一直闪烁。另一个，如何不是一个很好的形状（头发不反射红外光等......）。

关于如何进行的任何建议？目前我正在尝试平均最近帧的值以稳定第一个问题，我可能会尝试将形状转换为多边形并简化它（但是已经完成了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:50:21.673

一种方法是使用从 RGB 图像计算的前景/背景蒙版和经典的背景去除算法来改进深度蒙版。

您还可以使用 opencv 的形态函数来删除不需要的掩码小部分或关闭孔。[1](http://docs.opencv.org/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html#morphology-2)

# git - 合并时的冲突 - 如何告诉 git 总是使用更新的？

> ID：10549063
> 
> 赞同：2
> 
> 时间：2012-05-11T09:46:12.627
> 
> 标签：git, github, git-merge

我只是想合并两个存储库。由于某种原因，合并并不顺利，并产生了很多冲突。其中大多数是由于我在一个版本中更新了组件。

所以我想做的是合并，无论哪里出现冲突，告诉 git 使用较新的版本。否则，合并它需要很长时间。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:36:51.997

恐怕那个“较新”的概念有问题：在 Git 中，“树对象”（记录它们引用的 blob 的名称、大小和哈希）不包含这些 blob 的时间戳。因此存在一个逻辑问题，即决定恰好映射到相同文件系统名称的两个（或更多，对于章鱼合并）blob中的哪一个比其他的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:50:05.950

你能不能不做一个

```
git merge -s ours anotherbranch 
```

?

# c# - 启动和加载应用程序时显示等待光标

> ID：10549065
> 
> 赞同：2
> 
> 时间：2012-05-11T09:46:22.057
> 
> 标签：c#, .net, winforms

我试图在单击 exe 文件后初始化应用程序时显示等待光标。我的代码如下

```
public MainWindow(string FileName):this()
{
    this.Cursor = Cursors.WaitCursor;
    //some init code
} 
```

但是光标确实只改变了一秒钟。如何在我`some init code`执行的整个期间更改它？

**UPD**：主窗口的实例化如下所示`Program.cs`

```
mainWindow = new MainWindow(args[0]);
 Application.Run(mainWindow); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T10:38:23.400

试试这个

```
//Set the cursor to appear as busy
Cursor.Current = Cursors.WaitCursor;

---Execute your code-------

//Make the Cursor to default
Cursor.Current = Cursors.Default; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T09:57:38.587

试试这个：

```
Application.UseWaitCursor = true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:15:24.827

在表单的构造函数中做很多事情并不是很理想。

此外，用户不会很高兴看到等待光标而不是您的表单。好的做法是通知用户您的应用程序中发生了什么。我更愿意看到带有消息的表单，`Initializing... please wait`而不是认为您的应用程序有一些问题并且它不能像所有其他`exe`文件一样快速启动。

如果您想保持原样，[Marek Dzikiewicz的建议是正确的。](https://stackoverflow.com/users/698347/marek-dzikiewicz)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T12:02:42.077

你可以按照下面给出的

```
//Set the Cursor when app begins 
Cursor.Current = Cursors.WaitCursor;

//write your Code here 

//Change the Cursor to Default 
Cursor.Current = Cursors.Default; 
```

我希望这可以帮助你:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-14T12:09:42.020

确保您的表单已启用

```
this.Enabled = true;
this.Cursor = Cursors.WaitCursor;
..... 
```

# android - 像photoshop一样在android中旋转图像缩放

> ID：10549066
> 
> 赞同：0
> 
> 时间：2012-05-11T09:46:31.067
> 
> 标签：android, android-layout

如何在 android imageview 上实现图像旋转和图像缩放意味着假设我们有一个图像，我们想要通过像 photoshop 一样从图像角落拉伸来放大和缩小图像 如何实现这个功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:45:03.050

它可以帮助你：

[http://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html)

![在此处输入图像描述](../Images/5860c8cd97998f643fa761a53875fb77.png)

# javascript - dojo TabContainer 是否有在更改选项卡时触发的事件？

> ID：10549074
> 
> 赞同：4
> 
> 时间：2012-05-11T09:47:22.110
> 
> 标签：javascript, dojo

DOJO TabContainer 是否有在更改选项卡时触发的事件？

我想它会，但我在文档中找不到任何关于它的信息。:(

已解决：看起来我在这里找到了解决方案：

[Dijit TabContainer 事件 - onFocus](https://stackoverflow.com/questions/7262740/dijit-tabcontainer-events-onfocus)

不是最容易搜索的主题标题：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T10:04:48.957

连接`aspect.after`到 TabContainer 的`selectChild`方法：

```
var tabContainer1 = registry.byId("tabContainer1");

aspect.after(tabContainer1, "selectChild", function() {
    console.log("tab changed");        
}); 
```

或者，如果您对特定选项卡感兴趣，请连接到其 ContentPane 的`_onShow`：

```
var contentPane1 = registry.byId("contentPane1");

aspect.after(contentPane1, "_onShow", function() {
    console.log("[first] tab selected");        
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/Mdh4w/](http://jsfiddle.net/phusick/Mdh4w/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-06T06:14:45.653

来自[文档](https://dojotoolkit.org/reference-guide/1.10/dijit/layout/TabContainer.html)；

```
var tabs = registry.byId('someTabs');
tabs.watch("selectedChildWidget", function(name, oval, nval){
    console.log("selected child changed from ", oval, " to ", nval);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T10:14:44.643

除了@phusick 的正确答案之外，所有`StackContainer`s，包括`TabContainer`您可以订阅的主题的发布。

[http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html#published-topics](http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html#published-topics)

```
[widgetId]-addChild,
[widgetId]-removeChild
[widgetId]-selectChild 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/subscribe.html#dojo-subscribe](http://dojotoolkit.org/reference-guide/1.7/dojo/subscribe.html#dojo-subscribe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T07:35:23.407

这是一个在 Dojo 1.8 中工作的完整代码示例，我已经对其进行了测试。这不是仅在更改选项卡时触发的事件，我无法在 API 中触发它们的任何事件，但至少它适用于 Click 事件。

```
require(["dijit/registry",  "dojo/on", "dojo/ready", "dojo/domReady!"], function (registry, on, ready) {
    ready(function () { //wait till dom is parsed into dijits
        var panel = registry.byId('mainTab');   //get dijit from its source dom element
        on(panel, "Click", function (event) {   //for some reason onClick event doesn't work 
            $('.hidden_field_id').val(panel.selectedChildWidget.id);  //on click, save the selected child to a hidden field somewhere. this $ is jquery, just change it to 'dojo.query()'
        });
    });
});

//include this function if you want to reselect the tab on page load after a postback
require(["dijit/registry", "dojo/ready", "dojo/domReady!"], function (registry, ready) {
    ready(function () {
        var tabId = $('.hidden_field_id').val();
        if (tabId == null || tabId == "")
            return;
        var panel = registry.byId('mainTab');
        var tab = registry.byId(tabId);
        panel.selectChild(tab);
    });
}); 
```

# wcf - 当 WCF 服务托管在 IIS 上时，没有终结点侦听错误

> ID：10549075
> 
> 赞同：1
> 
> 时间：2012-05-11T09:47:32.807
> 
> 标签：wcf, iis, wcf-endpoint

我有一个通过 SSL 使用 WebService 的 MVC 页面。证书已安装，并且当应用程序运行时，它能够检测到证书。

问题是当我尝试调用托管的 MVC 页面时，这些代码在我的本地机器上运行良好。

但是当调用托管在服务器中的 MVC 页面时，它会引发错误：在 https:// 处没有侦听可以接受消息的端点。这通常是由不正确的地址或 SOAP 操作引起的。

我发现问题确实出在 App Pool 身份上。当我将其更改为使用我的凭据运行时，它解决了问题。但我不能在生产环境中这样做。

我需要让它与 Identity 一起工作：IIS 应用程序池中的网络服务。

我曾尝试使用 winhttpcertcfg 为网络服务授予证书权限，但这也无济于事。

不确定缺少什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:36:31.950

添加这个解决了我的问题：

```
<system.net> <defaultProxy useDefaultCredentials="true" enabled="true"> <proxy usesystemdefault="True" proxyaddress="myproxyserver:port"; bypassonlocal="False"/> </defaultProxy> <settings> <servicePointManager expect100Continue="false" /> <ipv6 enabled="true"/> </settings> </system.net> 
```

# c# - 实体数据模型设计器 - 属性名称区分大小写

> ID：10549076
> 
> 赞同：1
> 
> 时间：2012-05-11T09:47:41.783
> 
> 标签：c#, visual-studio-2010, entity-framework, c#-4.0, ado.net-entity-data-model

我在实体数据模型设计器上创建我的实体，并且错误地创建了 2 个名称相同但情况不同的属性，比如说`CustomerID`和`CustomerId`.

由于实体数据模型设计器区分大小写，因此它没有抱怨并生成脚本，但是在执行它时，它失败了，因为我最终得到了一个包含 2 列同名的表。

我的问题是，有没有办法让实体数据模型设计器不区分大小写，所以它可以看到`CustomerID`并且`CustomerId`是同一列，我可以在开发过程中发现这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:14:24.990

否，此验证选项不是实体数据模型设计器的一部分。EDMX 和 C# 区分大小写，如果您以这种方式设置数据库，甚至 SQL Server 也可能区分大小写。

# jquery - 添加结束标签和开始标签

> ID：10549080
> 
> 赞同：3
> 
> 时间：2012-05-11T09:48:00.120
> 
> 标签：jquery

我有一张桌子：

```
<div id="menu">
    <table cellspacing="0" cellpadding="0" width="930">
        <tbody>
            <tr>
                <td>
                    1
                </td>
                <td class="spacer"></td>
                <td>
                    2
                </td>
                <td class="spacer"></td>
                <td>
                    3
                </td>
                <td class="spacer"></td>
                <td>
                    4
                </td>
                <td class="spacer"></td>
                <td>
                    6
                </td>
                <td class="spacer"></td>
                <td>
                    5
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

我需要把这张桌子分成两张桌子。
像这样：

```
<div id="menu">
    <table cellspacing="0" cellpadding="0" width="930">
        <tbody>
            <tr>
                <td>
                    1
                </td>
                <td class="spacer"></td>
                <td>
                    2
                </td>
                <td class="spacer"></td>
                <td>
                    3
                </td>
            </tr>
        </tbody>
    </table>
    <table>
        <tbody>
            <tr>
                <td>
                    4
                </td>
                <td class="spacer"></td>
                <td>
                    6
                </td>
                <td class="spacer"></td>
                <td>
                    5
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

所以我这样做了：
它找到中间间隔并用一些结束标签和开始标签替换它。

```
var menuItems = jQuery('#menu table tr td.spacer').size();
var middle = Math.floor(menuItems/2);
jQuery('#menu table tr').children('td.spacer').each(function(index) {
    if(index == middle) {
        jQuery(this).replaceWith('</tr></tbody></table><table><tbody><tr>');
    }
}); 
```

但是 jQuery 似乎不喜欢那样……有可能做到这一点吗？拆分元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:01:23.617

试试这个：

```
$('<table id="sec" cellspacing="0" cellpadding="0" width="930"><tbody><tr></tr></tbody></table>').insertAfter('table');

var s = $('#menu td').size() / 2;

$('#menu td').each(function(){
    if($(this).index() > s) {
      $(this).clone(true).appendTo("#sec tr");
      $(this).remove()
    }
}) 
```

[http://jsfiddle.net/39pLc/4/](http://jsfiddle.net/39pLc/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:18:26.373

```
replaceWith doesn't change a part of html element. 
```

它应该可以正常工作。

```
<html>
<head>
<script src="../ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
<div id="menu">
    <table cellspacing="0" cellpadding="0" width="930">
        <tbody>
            <tr>
                <td>
                    1
                </td>
                <td class="spacer"></td>
                <td>
                    2
                </td>
                <td class="spacer"></td>
                <td>
                    3
                </td>
                <td class="spacer"></td>
                <td>
                    4
                </td>
                <td class="spacer"></td>
                <td>
                    6
                </td>
                <td class="spacer"></td>
                <td>
                    5
                </td>
            </tr>
        </tbody>
    </table>
</div>
<script>
var tableCells = $('#menu td');
var middleIdx = tableCells.size() / 2;
var currTable = $('#menu table');   
var secTable = $("<table/>").attr({cellSpacing:currTable.attr("cellSpacing"), cellPadding:currTable.attr("cellPadding"), width:currTable.attr("width")})
tableCells.each(function(index){
    if(index == middleIdx){
        $(this).remove();
    }else if($(this).index() > middleIdx) {
      $(this).clone(true).appendTo(secTable);
      $(this).remove()
    }
})     
$("#menu").append(secTable);
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:08:50.663

```
var menuItems = $('#menu table tr td.spacer').size();
var middle = Math.floor(menuItems/2);
var newTr =$('<tr/>');
$('#menu table').after($('<table cellspacing="0" cellpadding="0" width="930"></table>').append(newTr));
$('#menu table tr td.spacer').eq(middle).nextAll().appendTo(newTr);
$('#menu table tr td.spacer').eq(middle).remove(); 
```

[​演示](http://jsfiddle.net/HmUyR/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:16:04.560

检查它：[http ://webworkbyandrea.com/jquery_play/splitTable/split_table_into_four_tables.htm](http://webworkbyandrea.com/jquery_play/splitTable/split_table_into_four_tables.htm)

# app-store - iOS : App Store 审批流程 - 加密使用声明

> ID：10549084
> 
> 赞同：3
> 
> 时间：2012-05-11T09:48:15.370
> 
> 标签：app-store, appstore-approval, ios5

我想了解更多关于 App Store Approval Process 中的加密声明。

我有一个通过 HTTP（不是 HTTPS）连接到服务器的应用程序。敏感信息在 App 中通过公钥加密，然后通过 HTTP POST 发送到服务器。

在服务器端（用PHP编写），将使用私钥解密信息，然后提供相应的动作。

对于这样的操作，我是否需要在 App Store Approval 过程中声明使用加密？如果是，我需要向 Apple 提供哪些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-04T06:24:33.007

如果您的应用程序具有使用通过 Web API 传输的数据的加密/解密的功能，则在提交应用程序时无需提及。

原因是在数据从服务器传输到应用程序时使用加密/解密。

**重要的提示 ：**

*   如果您的应用程序在内部对某些数据操作使用加密/解密，则应在提交应用程序时正确声明
*   如果不这样做可能会导致申请被拒绝，并且如果在批准流程后发现此类活动，Apple 可能会永久从商店中删除您的申请

希望这对每个人都有帮助。

# java - 如何在 EL 中从 JSP 访问 getColumnNames？

> ID：10549085
> 
> 赞同：1
> 
> 时间：2012-05-11T09:48:16.883
> 
> 标签：java, sql, jstl, el

我正在使用 JSTL SQL 标记库从 JSP 中执行小型 SQL 查询。

我通常使用 rowsByIndex 检索 EL 中的查询结果，然后遍历返回的集合：

```
<c:forEach var="row" items="${myQuery.rowsByIndex}">
    <p>${row[0]}, ${row[1]}, ${row[2]}, ${row[3]}</p>
</c:forEach>> 
```

我想对列名做类似的事情。

我看到结果界面上有一个方法：

```
public String[] getColumnNames(); 
```

我正试图弄清楚如何从 EL 访问它。

我正在尝试做类似的事情：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>
...
  <table>
    <tr>
        <c:forEach var="columnName" items="${helloQuery.getColumnNames}">
            <th><c:out value="${columnName}" /></th>
        </c:forEach>
    <tr>
  </table>
... 
```

但是没有欢乐。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:09:33.197

[在访问属性时， EL](https://stackoverflow.com/tags/el/info)依赖于[Javabeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)及其命名约定。您基本上只需要指定属性名称（即使它是虚拟的），EL 将在需要返回值时将其转换为 getter 调用，或者在需要设置值时将其转换为 setter 调用（`#{}`仅在 JSF 语法中）。

所以，`${helloQuery.getColumnNames}`基本上是在尝试调用`getGetColumnNames()`由`${helloQuery}`. 但是没有，这将导致`PropertyNotFoundException`. 您需要将其更改为`${helloQuery.columnNames}`才能调用该`getColumnNames()`方法。

# php - php上次登录时间和当前登录时间差...对还是错？

> ID：10549087
> 
> 赞同：0
> 
> 时间：2012-05-11T09:48:22.037
> 
> 标签：php, datetime

我的代码在那里：

[如何显示上次登录时间（年、月、周、日、时间、秒）.. 我试过但输出错误](https://stackoverflow.com/questions/10547982/how-to-show-last-login-time-year-month-week-day-time-sec-i-tried-but-wrong)

上次登录时间：2012-05-11 10:16:51 当前时间：2012-05-11 10:35:51

```
$diff_seconds = strtotime($current_time) - strtotime($lastLoginTime); 
```

这是正确的`$diff_seconds -1336724211`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:51:15.093

The following code gives me `1140`:

```
<?php echo strtotime('2012-05-11 10:35:51') - strtotime('2012-05-11 10:16:51');  ?> 
```

There probably is an error elsewhere in your code that you're not showing us.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:54:53.673

我无法重现那个。我做了

```
$time1 = '2012-05-11 10:16:51';
$time2 = '2012-05-11 10:35:51';

echo strtotime($time1) - strtotime($time2);
echo '<br>';
echo strtotime($time2) - strtotime($time1); 
```

我得到了

-1140

1140

看起来合法。请出示您的代码。也许你没有字符串，它用你的年份数字做了一些奇怪的计算？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:58:56.830

您想试试**date_diff** (PHP 5 >= 5.3.0) 作为选项吗？

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

```
<?php
$datetime1 = date_create('2012-05-11 10:16:51');
$datetime2 = date_create('2012-05-11 10:35:51');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%s seconds');
?> 
```

# mongodb - 如何配置地图属性的处理

> ID：10549088
> 
> 赞同：1
> 
> 时间：2012-05-11T09:48:25.667
> 
> 标签：mongodb, spring-data

我有一个包含 HashMap 的用户类，用于在两个自定义对象之间进行映射。

目前，每当我尝试在 mongodb 中保存一个用户时，我都会得到：

```
org.springframework.data.mapping.model.MappingException: Map key net.bigpoint.globalchat.models.keys.ProjectId@0 contains dots but no replacement was configured! Make sure map keys don't contain dots in the first place or configure an appropriate replacement!
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.potentiallyEscapeMapKey(MappingMongoConverter.java:548) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeMapInternal(MappingMongoConverter.java:512) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writePropertyInternal(MappingMongoConverter.java:385) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:346) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter$3.doWithPersistentProperty(MappingMongoConverter.java:335) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mapping.model.BasicPersistentEntity.doWithProperties(BasicPersistentEntity.java:173) ~[spring-data-commons-core-1.2.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:335) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.writeInternal(MappingMongoConverter.java:307) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:272) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.convert.MappingMongoConverter.write(MappingMongoConverter.java:73) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.MongoTemplate.doSave(MongoTemplate.java:717) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:707) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at org.springframework.data.mongodb.core.MongoTemplate.save(MongoTemplate.java:703) ~[spring-data-mongodb-1.0.1.RELEASE.jar:na]
at net.bigpoint.globalchat.hazelcast.MongoMapStore.store(MongoMapStore.java:81) [classes/:na]
at net.bigpoint.globalchat.hazelcast.MongoMapStore.store(MongoMapStore.java:1) [classes/:na]
at com.hazelcast.impl.concurrentmap.MapStoreWrapper.store(MapStoreWrapper.java:110) [hazelcast-2.0.2.jar:2.0.2]
at com.hazelcast.impl.ConcurrentMapManager$PutOperationHandler$PutStorer.doMapStoreOperation(ConcurrentMapManager.java:2736) [hazelcast-2.0.2.jar:2.0.2]
at com.hazelcast.impl.ConcurrentMapManager$AbstractMapStoreOperation.run(ConcurrentMapManager.java:3440) [hazelcast-2.0.2.jar:2.0.2]
at com.hazelcast.impl.executor.ParallelExecutorService$ParallelExecutorImpl$ExecutionSegment.run(ParallelExecutorService.java:212) [hazelcast-2.0.2.jar:2.0.2]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_04]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_04]
at java.lang.Thread.run(Thread.java:722) [na:1.7.0_04] 
```

在我看来，spring data 试图通过调用 toString 来序列化键，这是不可能反序列化的。

我已经有两个类的转换器，可以将实例转换为字符串，反之亦然，那么我的设置有什么问题？

**编辑**

由于某些讨厌的原因，MappingMongoConverter 类不使用转换器将键转换为可管理的东西，它只是使用 toString 将键转换为字符串并将字符串写入 DBObject。

在反序列化期间，字符串（这里作为对象处理）被转换为正确的键类型......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:23:28.233

我不确定该行为是否是有意的，但正如我在编辑中所描述的那样，映射键通过调用 toString（适用于 Float、Double 等）进行“序列化”，并通过使用配置的转换器进行反序列化。

所以我的解决方法是在类 toString 方法中调用我的 complexClassToString 转换器。这只是可能的，因为我已经有了这个转换器，因为有问题的类在我的模型中用作 ID。

# android - Android合并适配器从xml添加视图

> ID：10549090
> 
> 赞同：1
> 
> 时间：2012-05-11T09:48:47.057
> 
> 标签：android

嗨，我正在尝试向合并适配器添加视图，但我不完全确定该怎么做。我想在两个列表之间添加一个标题栏。到目前为止，我有 3 个阵列适配器填充一个列表，我想在每个列表之间添加一个标题。我有一个要用于标题的 .xml 布局，或者以编程方式编写布局会更好。

这是我到目前为止所尝试的内容，但是当我滚动它时会不断出错，它会使应用程序崩溃。希望我已经说得够清楚了，因为我认为学习这个真的很有用。

```
arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    arrayAdapter3 = new ArrayAdapter<String>(this, R.layout.single_item, newsList3);

     RelativeLayout layout = new RelativeLayout(this);
        RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        layout.setLayoutParams(labelLayoutParams);

        ImageView mImage = new ImageView(this);
        mImage.setBackgroundResource(R.drawable.titlerect);        
        //layout.addView(mImage,labelLayoutParams);

     //RelativeLayout rc = (RelativeLayout) findViewById(R.id.redcelllayout);
    LayoutInflater inflater = 
                   (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     View Header = inflater.inflate(R.layout.redcell, layout, true);

    setListAdapter (arrayAdapter);

       ListView list = getListView();
       list.setTextFilterEnabled(true);

        adapter = new MergeAdapter();
        adapter.addAdapter(arrayAdapter);
        adapter.addView(mImage);
        adapter.addAdapter(arrayAdapter2);

        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    } 
```

这是标题栏的xml布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
     android:id="@+id/redcelllayout" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:src="@drawable/titlerect" />

    <TextView
        android:id="@+id/redheadertext"
        android:layout_width="match_parent"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="left"
        android:paddingLeft="15dp"
        android:paddingTop="3dp"
        android:textColor="@color/white"
        android:textSize="15dp"
        android:textStyle="bold"/> 
```

这也是我得到的错误

```
05-11 09:51:06.187: E/AndroidRuntime(8598): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
05-11 09:51:06.187: E/AndroidRuntime(8598):     at android.widget.ListView.setupChild(ListView.java:1834)
05-11 09:51:06.187: E/AndroidRuntime(8598):     at android.widget.ListView.makeAndAddView(ListView.java:1803)
05-11 09:51:06.187: E/AndroidRuntime(8598):     at android.widget.ListView.fillDown(ListView.java:670)
05-11 09:51:06.187: E/AndroidRuntime(8598):     at android.widget.ListView.fillGap(ListView.java:641) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:59:07.600

请用

```
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams..FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT); 
```

代替

```
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
```

这导致了 ClassCastException，如堆栈跟踪中所示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:05:03.950

试试这个

```
 View headerView = View.inflate(this, R.layout.layout_name, null);
    lv.addHeaderView(headerView); 
```

其中 lv 是列表视图。

在设置适配器之前添加您的标题。

# javascript - 导航在sencha中不起作用

> ID：10549092
> 
> 赞同：0
> 
> 时间：2012-05-11T09:48:51.053
> 
> 标签：javascript, sencha-touch, extjs

嗨，我是 sencha 的新手，我正在尝试导航，我点击 VehicleSubPage1 中的一个按钮，然后导航到 AccountInfo，但它不起作用，我正在编写代码

谁能帮我

* *VehicleSubPage1 类 **

```
Ext.define("myproject.view.VehicleSubPage1", {
    extend: 'Ext.navigation.View',
        xtype:'VehicleSubPage1form',
        requires: [
        'myproject.view.AccountInfo'
        ],

    config: {

                title: 'Account Info',
                iconCls: 'home',
                styleHtmlContent: true,
                scrollable: true,
                items: [
                {
                    xtype: 'button',
                    text: 'Push another view!',
                    handler: function() {
                      view.push({

                         xtype:'AccountInfoform'

                     });
                    }
                }
            ]        
    }

}); 
```

**AccountInfo 类**

```
Ext.define("myproject.view.AccountInfo", {
    extend: 'Ext.Panel',
        xtype:'AccountInfoform',
    config: {

               url: 'contact.php',
                title: 'Account Info',
                iconCls: 'home',
                styleHtmlContent: true,
                scrollable: true,
                items:[
                 {
                xtype: 'button',
                text: 'send',
                ui: 'confirm',
                handler:function(){
                alert("clicked");
                }

                } 
                ]   

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:44:55.483

似乎问题在于`view`按钮处理程序中未定义。你真正想做的是调用`push`导航视图的方法。因此，向您添加一个 id 属性`VehicleSubPage1`并将处理程序更改为以下内容：

```
function() {
    var accountInfo = Ext.getCmp('accountInfo'); //assuming you have set the id of VehicleSubPage1 as id: 'accountInfo'
    accountInfo.push({
        xtype:'AccountInfoform'
    });
} 
```

# jquery - jQuery Waypoints - 功能似乎相互覆盖

> ID：10549095
> 
> 赞同：0
> 
> 时间：2012-05-11T09:49:14.010
> 
> 标签：jquery, function

这是我在 StackOverflow 上的第一篇文章。对于 jQuery Waypoints 遇到的问题，我似乎找不到答案。（我对编码很陌生，所以如果这有一个简单的解决方案，请原谅）。

基本上我有一个单页网站，上面有 5 个部分，看起来像单独的页面。我对其进行了编码，以便当您到达每个页面的顶部时，页面的 HTML 会通过 jQuery 进行更改。然后，当您靠近该部分的底部时，下面下一部分的内容会淡入。这一切都很好。但是，当我向上滚动时，页面的 HTML 不会在我位于该部分的顶部时发生变化，而是在靠近底部时发生变化（因此使下一页上的内容淡入的点）。更重要的是，它似乎正在将其更改为上一页的标题，而不是当前页面的标题。

看看这个链接，看看我的意思： http: [//lovecolour.co.nz/uploader/site1/index.html](http://lovecolour.co.nz/uploader/site1/index.html)

向下滚动到橙色品牌部分。然后向上滚动，并观察当您滚动经过底部的白色虚线时 HTML 页面标题会发生什么变化。

基本上，在我看来，当您向下时它可以正常工作（当您到达页面顶部时标题会更改，当您到达该页面的近底部时内容会淡入）。但是，当您返回时，后一个函数会覆盖第一个函数，因此标题在虚线附近而不是页面顶部发生变化。

这是jQuery代码：

```
$("#digital .spacer").css({opacity:0})
$("#branding .spacer").css({opacity:0});
$("#print .spacer").css({opacity:0});
$("#about .spacer").css({opacity:0});

$("#clickToSee").waypoint(function(event, direction) {
    if(direction === "down") {
    $("#digital .spacer").animate({opacity: 1.0}, 200);
    }
    else {
    $("#digital .spacer").animate({opacity: 0.0}, 200);
    }
});

$("#bLineDigital").waypoint(function(event, direction) {
    if(direction === "down") {
    $("#branding .spacer").animate({opacity: 1.0}, 200);
    }
    else {
        $("#branding .spacer").animate({opacity: 0.0}, 200);
    }
});

$("#branding .dottedBottom").waypoint(function(event, direction) {
    if(direction === "down") {
    $("#print .spacer").animate({opacity: 1.0}, 200);
    }
    else {
        $("#print .spacer").animate({opacity: 0.0}, 200);
    }
});

$("#print .dottedBottom").waypoint(function(event, direction) {
    if(direction === "down") {
    $("#about .spacer").animate({opacity: 1.0}, 200);
    }
    else {
        $("#about .spacer").animate({opacity: 0.0}, 200);
    }
});

$("#digital").waypoint(function(event, direction) {
    if(direction === "down") {
    $("title").html("Digital");
    }
    else {
        $("title").html("LoveColour");
    }
});

$("#branding").waypoint(function(event, direction) {
    if(direction === "down") {
    $("title").html("Branding");
    }
    else {
        $("title").html("Digital");
    }
});
$("#print").waypoint(function(event, direction) {
    if(direction === "down") {
    $("title").html("Print");
    }
    else {
        $("title").html("Branding");
    }
});
$("#about").waypoint(function(event, direction) {
    if(direction === "down") {
    $("title").html("About LoveColour");
    }
    else {
        $("title").html("Print");
    }
}); 
```

我会很感激我能得到的所有帮助 - 我希望一切都清楚。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:41:30.287

Waypoints 使用事件 ( `waypoint.reached`) 来触发回调。JavaScript 中的事件冒泡。因此，如果您有嵌套的航路点，例如`#bLineDigital`的后代如何`#digital`，击中嵌套的航路点将使该事件冒泡并触发外部事件。你只需要停止冒泡。`event.stopPropagation()`在嵌套的处理程序中就可以了。

# jquery - 在 Jquery Mobile 中使用 ajax 加载表单

> ID：10549100
> 
> 赞同：0
> 
> 时间：2012-05-11T09:49:33.380
> 
> 标签：jquery, jquery-mobile

我正在尝试使用 ajax 来显示一个网站的表单但是我失去了 JQM 样式所以它只是简单地显示我怎样才能让表单正确显示？我的代码如下

```
 <div data-role="page" data-add-back-btn="true" id="events">
        <div data-role="header">
            <h1 id='heading'></h1>
            <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
        </div>    
    <div data-role="content" id="textcontent"></div>
 <li><a href="Javascript:form();">Contact Us</a></li>

function form()
{ 
alert("Success");
data = data + '<form action="index.html" method="post"><div data-role="fieldcontain"><label for="username">Username<label><input type="text" name="username" id="username"></form></div>'
$('#textcontent').html(data);
$('#textcontent').show();
 } 
```

该函数被调用并且表单出现在屏幕上，但它失去了所有的 jqm 样式任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:04:23.027

使用`trigger('create')`应该可以解决问题。

```
function form(){ 
    data = '<form action="index.html" method="post"><div data-role="fieldcontain"><label      for="username">Username<label><input type="text" name="username" id="username"></div></form>';
    $('#textcontent').html(data);
    $('.ui-page').trigger('create');
    $('#textcontent').show();

} 
```

其他一些可能对您有帮助的事情是

1.  您的表单中有一个 html 错误。您的 div 必须在表单关闭之前关闭。即`</div></form>`应该是这样。一个`<li>`元素也应该被包裹在 a`<ul>`或 an`<ol>`中。
2.  摆脱来自变量中的数据+。我不确定那是为了什么。
3.  只需将表单放入设置为`display:none`. 这样就不需要 trigger('create') 方法了。然后你可以只显示（）或切换（）可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:37:43.020

添加`$(".ui-page").trigger("create");`为`form()`.

# css - 从两侧底部开始页面背景 - CSS

> ID：10549104
> 
> 赞同：1
> 
> 时间：2012-05-11T09:49:44.573
> 
> 标签：css, background-image

我有一个具有背景图像的页面`<body>`。图像可能只停留在页面底部并且在 x 上可见，我不希望它在 x 和 y 上重复整个身体。

图像如下所示；

![瓦](../Images/9f8809e2fe512916e17d988d0f5d3a4d.png)

我希望这张图片平铺在 x 上，但想从左右两侧重复。图像可以从左右两侧开始；

![结构](../Images/3c507828dbc3e980f84f5451bbcc6704.png)

在它们之间是内容`<div>`通过这样做，图像可能看起来好像它具有整个页面的宽度。我可以简单地使用 来执行此操作`repeat-x`，但它会在末尾部分创建一些不完整的图块部分。

完成的页面可能如下图所示；

![在此处输入图像描述](../Images/b36c8d43d49217d12dd8e134acecdce3.png)

这可能与 CSS 吗？我想你明白我在说什么。如果您想了解更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:55:12.700

你可以这样写：

```
div{
 background:url(image1.jpg) repeat-x bottom left,url(image1.jpg) repeat-x bottom right;
} 
```

# nhibernate - 流畅的休眠导入类型

> ID：10549113
> 
> 赞同：1
> 
> 时间：2012-05-11T09:50:43.923
> 
> 标签：nhibernate, orm, fluent-nhibernate, nhibernate-mapping

我从字面上搜索了高低，似乎找不到最近的解决方案。

我正在尝试实现一个未映射的类，它是来自 2 个表的 DTO，将从 HQL 语句返回。

我找不到任何关于如何在 Fluent Hibernate 中执行此操作的示例，只能在标准 NHibernate XML 文件中找到，这些文件不适合我们的需求。

有人有使用`<Import class="CLASS" />`in Fluent 的经验吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:17:42.050

我最近完成了你所要求的。我在这个 URL 上找到了说明：

[http://avinashsing.sunkur.com/2010/08/18/mapping-an-unrelated-class-in-fluent-nhibernate/](http://avinashsing.sunkur.com/2010/08/18/mapping-an-unrelated-class-in-fluent-nhibernate/)

该链接中的示例碰巧在连接中使用了两个表，但它的工作原理相同：只需在其中一个类中使用 ImportType<> 指令。

# c++ - std::inserter 不工作

> ID：10549116
> 
> 赞同：4
> 
> 时间：2012-05-11T09:50:57.410
> 
> 标签：c++, inserter

我正在编写一个代码，其中一个文件使用 set_intersection 函数，并且该函数的最后一个参数应该是插入器。但是当我编译代码时，我看到以下错误：

```
error C2039: 'inserter' : is not a member of 'std'
error C2873: 'inserter' : symbol cannot be used in a using-declaration
error C3861: 'inserter': identifier not found 
```

以下是文件中使用 set_intersection 函数的代码

```
#include "Query.h"
#include "TextQuery.h"
#include <set>
#include <algorithm>
#include <iostream>

using std::set;
using std::ostream;
using std::inserter; 
using std::set_intersection;

// returns intersection of its operands' result sets
set<TextQuery::line_no>
AndQuery::eval(const TextQuery& file) const
{
    // virtual calls through the Query handle to get result sets for the operands
    set<line_no> left = lhs.eval(file), 
                 right = rhs.eval(file);

    set<line_no> ret_lines;  // destination to hold results 

    // writes intersection of two ranges to a destination iterator
    // destination iterator in this call adds elements to ret
    set_intersection(left.begin(), left.end(), 
                  right.begin(), right.end(),
                  inserter(ret_lines, ret_lines.begin()));
    return ret_lines;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-11T09:53:09.207

您需要包含`<iterator>`标题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T09:53:19.460

你忘了`#include <iterator>`。

# c# - 动态文本框错误索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

> ID：10549120
> 
> 赞同：0
> 
> 时间：2012-05-11T09:51:13.540
> 
> 标签：c#, xml, dynamic, xmlwriter

您好，我正在尝试将动态文本框中的一些数据保存到 XML 文件中。但每次我尝试我都会收到这个错误

“索引超出范围。必须为非负数且小于集合的大小。参数名称：索引”

```
XmlDocument document = new XmlDocument();
                document.Load(@"myGrades.xml");            
                for (int i = 0; i < 7; i++)
                {
                    **TextBox tb1 = (TextBox)textboxComputer[i];** //<- error is thrown here
                    string markGained = tb1.Text;
                    this.Text = markGained;
                    XmlElement root = document.DocumentElement;
                    XmlElement newAssessmentMark = document.CreateElement("Assessment");
                    XmlElement newMark = document.CreateElement("AssessmentMark");
                    XmlText mark = document.CreateTextNode(markGained);
                    newAssessmentMark.AppendChild(newMark);
                    newMark.AppendChild(mark);
                    XmlNode parentNode = document.SelectSingleNode("myGrades/courseStructure/level4");
                    parentNode.InsertAfter(newAssessmentMark, parentNode.LastChild);

                    document.Save(@"myGrades.xml");

                }

                this.Close(); 
```

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:58:46.190

`textboxComputer`似乎是一个数组，所以在你的 for 循环中：

`for( int i = 0; i < textboxComputer.Length; i++ ) ...`

或者，您可以预先计算它：

`int length = textboxComputer.Length;`

`for( int i = 0; i < length; i++ ) ...`

# c++ - 使用 LoadLibrary 加载 dll

> ID：10549125
> 
> 赞同：3
> 
> 时间：2012-05-11T09:51:22.373
> 
> 标签：c++, visual-c++, dll, loadlibrary, dynamic-loading

如果我使用 加载 DLL `LoadLibrary`，是否保证该 DLL 保持加载状态？如果没有，我该如何防止重新加载。

实际情况：我有一个调度程序，根据某些消息，它需要加载几个 dll 之一并从中执行一些功能。我无法在编译时链接它们，所以我使用`LoadLibrary`. 因为可能有很多电话，我不想`LoadLibrary`每次都打电话，因为事实证明这是一个瓶颈。所以我想每个 DLL 只调用一次，`GetProcAddress`每个 dll 也只调用一次来获取函数，并将其缓存在某个地方。但它安全吗？我是否保证在任何后续调用中调用该函数都可以？如果没有，我怎么能得到这个保证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T09:55:09.847

LoadLibrary 增加可执行文件的引用计数，而 FreeLibrary 减少它。

当引用计数达到 0 时，可执行文件被卸载。所以你通常不必担心它。只要在您的进程中没有人调用 FreeLibrary，Dll 就会留在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:02:03.030

如果您阅读 MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx)它说明了如果 dll 还没有的行为将是什么加载以及如果 dll 已经加载会发生什么，所以你不应该担心这个开销。

> 如果指定的模块是一个尚未为调用进程加载的 DLL，则系统使用 DLL_PROCESS_ATTACH 值调用 DLL 的 DllMain 函数。如果 DllMain 返回 TRUE，则 LoadLibrary 返回模块的句柄。

# javascript - JavaScript 从 Tumblr 重定向到 WordPress

> ID：10549131
> 
> 赞同：1
> 
> 时间：2012-05-11T09:51:43.207
> 
> 标签：javascript, wordpress, redirect, tumblr

我已经阅读了很多关于将 Tumblr 重定向到 WordPress 的主题，但我仍然找不到合适的解决方案。

这是问题所在：我想将[jeby.tumblr.com](http://jeby.tumblr.it)（一个**Tumblr**博客）重定向到新的[jeby.it](http://jeby.it)，一个具有自定义域和 Web 空间等的**WordPress** (WIP) 博客。我已经导入了所有内容，现在我想要的只是“自动”重定向每个帖子

```
jeby.tumblr.com/post/[POST ID]/some-slug 
```

到

```
jeby.it/2012/05/some-slug 
```

我知道 Tumblr HTML 代码中提供了帖子的年份和月份，因为它们用于构成永久链接。我不能使用`.htaccess`重定向，因为 Tumblr 博客由 Tumblr 托管。

我对 Blogspot 做了同样的事情，在那里我找到了一个插件，它创建了正确的 JavaScript 代码以粘贴到 Blogspot 模型中并获得自动重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:15:47.843

正如您已经意识到的那样，您将需要执行重定向客户端。如何做到这一点是 Tumblr[主题模板系统的可能性和局限性的问题](http://www.tumblr.com/docs/en/custom_themes)。

*   **帖子的年份和月份**分别[可以作为`{Year}`和`{MonthNumberWithZero}`](http://www.tumblr.com/docs/en/custom_themes#dates)令牌使用；这让你`2012`和`05`。
*   **但是， post slug**不能作为令牌使用（不确定这是否是故意遗漏——post slug 在 Tumblr 上是可选的；您可以手动设置一个，但如果您不这样做，则您的帖子仅使用其数字 ID） – 所以你必须从[token插入](http://www.tumblr.com/docs/en/custom_themes#posts)[的`{Permalink}`](http://www.tumblr.com/docs/en/custom_themes#posts)链接中解析它。
*   **重定向只能在单个帖子页面上进行。**不幸的是，没有基于模板的方法来确保你只针对这些，因为 Tumblr 主题 DSL 的优点和局限性在于它被定义为一个页面：你得到一个`{block:Posts}`块，Tumblr 会计算出要在里面显示多少帖子那。这意味着`meta http-equiv="Refresh"`标签是不可能的，因为它们也将包含在所有非单篇文章页面中。

幸运的是，Tumblr 确实允许您在模板中包含任意 JavaScript，这就是要走的路：

1.  在块内添加以下行`{block:Posts}`：

    ```
    <span class="redirdata">{Year},{MonthNumberWithZero},{Permalink}</span> 
    ```

    在 CSS 中设置 span 的样式`redirdata`以`display:none`隐藏它们（或将它们设置为内联样式 - 考虑到它们的预期用途，教条主义毫无意义）。

2.  现在添加一个脚本来`<head>`解析这些并重定向到 WordPress URL。由于您想为每个可能的访问者执行此操作，即尽可能兼容跨浏览器，我建议使用[*jQuery*](http://jquery.com/)。包括它：

    ```
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
    ```

    或任何其他托管源（请参阅CDN URL[的 jQuery 文档](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)）。然后添加以下脚本：

    ```
    <script type="text/javascript">
        $(function(){ 
            if ( $('.redirdata').length === 1) {
                var redirdataTokens = $('.redirdata').text().split(',');
                if (redirdataTokens.length === 3) { 
                    var redirectTo = 'http://jeby.it/'+redirdataTokens[0]+'/'+redirdataTokens[1]+'/'+redirdataTokens[2].replace(/.*\//, '');
                    window.location = redirectTo;
                }
            }
        });
    </script> 
    ```

    并且您的单一帖子页面应该自动将所有访问者重定向到 WordPress 帖子页面（当然，如果他们启用了 JavaScript）。如果需要的话，我相信你会想办法将它用于标记档案、搜索等。

*警告 Empteor：*仅当您的 WP 帖子的 slug 与您的 Tumblr 帖子的 slug 匹配时，这才有效 - 在没有文本 slug 的 Tumblr 帖子的情况下也至关重要（这意味着您的 WP slug 需要匹配数字 Tumblr 帖子 ID 在这种情况下）。

# javascript - How to stop running the next function?

> ID：10549134
> 
> 赞同：2
> 
> 时间：2012-05-11T09:51:55.943
> 
> 标签：javascript, events

I have an event on clicking the top `<tr>` and then also an event on clicking the `tr > td > button`. When i click the `tr > td > button`, the related `onclick()` function is running but, the function related on `<tr>` is also running after previous.

Like:

```
<tr onclick="run_tr();">
    <td><input type="button" onclick="run_td();" /></td>
</tr> 
```

How can i stop automatically calling the next call by clicking the button?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:54:32.077

在按钮`onclick`功能中，您需要停止事件冒泡：

```
event.stopPropagation(); 
```

遵循您的代码：

HTML：

```
<input type="button" onclick="run_td( event );" /> 
```

JS：

```
function run_td( event ) {
    if ( event.stopPropagation ) { 
        event.stopPropagation();
    }
    event.cancelBubble = true;
    // ... rest of your code.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:55:24.290

您必须使用 方法停止事件的传播`e.stopPropagation()`。有关更多信息，请查看此链接：[http ://www.quirksmode.org/js/events_order.html#link9](http://www.quirksmode.org/js/events_order.html#link9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:37:58.810

我不明白为什么你不能使用推荐的方法，这里有一个例子：

```
<div onclick="alert('div click called');">
  Click here to see div onclick
  <button onclick="
    (event.stopPropagation && event.stopPropagation());
    event.cancelBubble = true;
    alert('stopped click');
  ">Button click but no div click</button>
</div> 
```

# version-control - 并行开发/测试环境中的发布管理——死锁

> ID：10549139
> 
> 赞同：0
> 
> 时间：2012-05-11T09:52:21.530
> 
> 标签：version-control

我陷入了僵局。我们是一家与医疗保健相关的产品开发公司。我们使用的是SVN版本控制系统。我们有多个客户，每个客户都有一个专门的开发分支。客户分支总是从主干分支。我们使用主干作为我们的高级客户之一的开发分支，比如说 PC1。

现在我们向 PC1 发布了一个名为 PDT_5.0 的产品版本。发布发生在发布分支 PDT_5.0，它最初是从主干分支出来的。

与 PDT_5.0 版本相关的错误修复已经开始出现。同时客户要求我们承诺在几个月内提供一些小功能。新功能已在主干中开发。然而，在上线之前，新功能必须经过 QA 测试，并且必须得到客户方的批准。

现在死锁：PDT_5.0 已经上线。错误修复正在 PDT_5.0 的发布分支中进行。功能开发完成。这必须经过 QA 测试。但是，我们不能等待 QA 完成测试然后发布，因为必须尽快发布来自实时的紧急错误修复。我完全迷失在这里。

问题是我不想从主干分支，因为功能太小了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:03:22.727

有了一个描述的过程，我没有看到任何其他方法，而不是从您的主干和发布分支到客户的分支中进行所需功能和修复的选择性合并（AKA 挑选）。

展望未来，如果您拥有基于客户特定功能和分支的业务模型，您需要改变交付更改的方式。

第一种选择是您要求您的销售人员不要承诺在正式发布之前提供功能。严重地。只需说“伙计们，感谢您销售我们还没有的功能，但请不要做出任何额外的部署承诺”。这样，您将保持发布简单明了：主干 -> 发布分支 -> 客户分支。之后，您的开发团队将特定更改从一个旧分支迁移到一个新分支。

否则，当您必须来回集成错误修复直到您将自己埋在等待集成的大量增量中时，您应该调整您的流程以满足这一新现实。

我希望它有帮助...

# c# - Find extension of file from URL

> ID：10549141
> 
> 赞同：1
> 
> 时间：2012-05-11T09:52:40.390
> 
> 标签：c#, asp.net, file, file-extension

I want to find what is the extension of file in current URL. I have used
`http://tol.imagingtech.com/eIL/cgi-bin/eIL.pl?ACTION=get_trans_doc&DOC=ALL&CAB_NAME=TOL_AP_2012&WHSE=18&PAYEE=23003655&INV=01235770`

The extension of this file is (.pdf) how can i get this. Sometimes it will be (.doc,.txt,.jpeg) so i want the exact one.

Following is the code which i used to retrieve file extension

`var extFile = Document.DocumentFilePath.Split('.');
return "Backup document." + extFile[extFile.Length-1].Trim().ToLower();`

It works fine for normal local path but it fails to retrieve extension which DocumentFilePath is url.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:54:27.247

我认为没有实际获取文件类型就无法获取文件类型。

`header`请求完成后，您可以在响应中获取信息。

```
Content-Type: image/jpeg 
```

您可以在 C# 中使用`WebClient`

```
 WebClient client = new WebClient();
 var url = "http://tol.imagingtech.com/eIL/cgi-bin/eIL.pl?ACTION=get_trans_doc&DOC=ALL&CAB_NAME=TOL_AP_2012&WHSE=18&PAYEE=23003655&INV=01235770";
 string data = client.DownloadString(url);
 string contentType = client.Headers["Content-Type"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T09:57:27.817

`Content-Disposition: attachment; filename=FILENAME`对 URL 发出 HEAD 请求，如果正在使用，请查看标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T10:39:00.753

要查找内容类型，请从 Http 响应中获取，如下所示：

```
byte[] myDataBuffer = webClient.DownloadData(fileAbsoluteUrl);
string contentType = webClient.ResponseHeaders["Content-Type"]; 
```

# git - How to make a Git merge operation ignore identical changes made to both branches?

> ID：10549142
> 
> 赞同：27
> 
> 时间：2012-05-11T09:52:40.797
> 
> 标签：git, merge, merge-conflict-resolution

Lets assume that we have one development branch 'A', and two sub branches 'B1' and 'B2', (both taken from A). Lets say that you run a *format code command* (in our case ReSharper's cleanup code) on the entire project in B1 and B2.

Now, when we try to merge B2 into B1, Git will report conflicts on *all files* in the project (quite a large number in our case). When looking closer at each conflict, it seems like Git thinks theres a conflict even though the exact same change was made in both B1 and B2(?)

Is there a way, custom driver/git attribute etc that will make a Git merge operation not report a conflict if the files in B1 and B2 are exactly the same?

Maybe I've got it wrong, maybe it is a whitespace/line ending issue (eg different line endings in B1 and B2) in which case I can find the solution here on stack overflow.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T16:45:04.437

昨天，在与我的主分支合并后，我从（和到）一个侧分支进行了很多樱桃采摘后，我遇到了类似的问题。很多冲突与相同的变化。我用合并策略解决了这个问题：

```
git checkout main-branch
merge --no-commit -s recursive -X ours side-branch 
```

您可以将“我们的”更改为“他们的”。要小心，因为所有冲突都会自动解决，选择“我们的”或“他们的”一方。就我而言，由于这个原因，我几乎没有错误合并，我手动修复了。在此处查看其他有趣的合并策略选项：[https ://www.kernel.org/pub/software/scm/git/docs/git-merge.html](https://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

您也可以尝试使用变基（在我的情况下，它不能很好地工作，因为分支太不同了，而且我在每个新的变基交互中都有新的冲突）。看到这个：[http ://davitenio.wordpress.com/2008/09/27/git-merge-after-git-cherry-pick-avoiding-duplicate-commits/](http://davitenio.wordpress.com/2008/09/27/git-merge-after-git-cherry-pick-avoiding-duplicate-commits/)

# javascript - 什么是 HTML“服务器”元素以及 IIS 拒绝呈现它的原因

> ID：10549143
> 
> 赞同：0
> 
> 时间：2012-05-11T09:52:41.877
> 
> 标签：javascript, html, iis

一位客户向我们传递了一些文档，以帮助我们设计产品（asp.net 4.0 网络表单）以匹配他们的公司网站。面包和黄油的东西。

在他们提供的其中一个标记示例中，他们使用的标签看起来像是使用 JS 将 html 片段拉入页面。

标记看起来像这样：

```
<server>
        var client = new HttpClient();
        client.sendRequest("http://www.fakedomain.info/foo.html");
        if(client.content) write(client.content.toString()); 
</server> 
```

Visual Studio 在标签上提出“不支持元素”验证警告，而我只设法[在网上找到一个地方](http://devedge-temp.mozilla.org/library/manuals/1998/htmlguide/tags13.html#1335122)同意这是一个有效的 HTML 元素。

当我们（通过 IIS）运行应用程序时，标记的内容会呈现为文本。

我们有解决方法，但我很好奇这个元素是什么以及为什么 IIS 拒绝呈现它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:56:04.133

`<server>`不是有效的 HTML 元素，也不是在 ASP.NET 代码中定义的。

您的客户端**没有**使用 IIS - 您链接到的文档似乎表明他们正在使用理解此元素的[Netscape Web 服务器。](http://en.wikipedia.org/wiki/Netscape_Enterprise_Server)

我也猜想他们使用 Javascript 作为服务器端语言——同样，不是 IIS 的原生语言。

您可以将其转换为 IIS 服务器端代码并​​使用普通 C# 保留含义。

```
<script runat="server">
    var client = new WebClient();
    byte[] data = client.DownloadData("http://www.fakedomain.info/foo.html");
    string html = Encoding.Utf8.GetString(data);
    if(!string.IsNullOrWhitespace) Response.Write(html); 
</script> 
```

# google-sheets - 谷歌自定义功能：错误无效分配左侧

> ID：10549144
> 
> 赞同：0
> 
> 时间：2012-05-11T09:52:44.057
> 
> 标签：google-sheets, google-apps-script

我通过计算速度的脚本编辑器创建了一个自定义谷歌电子表格函数。我通过在我的电子表格中调用该函数

```
=pace(00:33:00,10,km) 
```

该功能的逻辑是

```
function pace(time, dist, unit)
{
  return pace(time.getHours(),time.getMinutes(),time.getSeconds(), dist, unit);
}

function pace(hrs,mins,secs,dist,unit) 
{ 
  var d = dist;
  if(unit=="m"||unit="M")
    d = dist*1.609344;

  var minutes = 60*hrs+mins+secs/60.0;
  var pace = minutes/d;
  return pace;
} 
```

但是当函数执行时，我得到的只是

```
error: Invalid assignment left-hand side. 
```

我认为逻辑是正确的，问题与脚本的发布状态有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:17:52.013

H，

似乎您在 if 语句的第二个参数中缺少和等号。

```
 if(unit=="m"||unit=="M") 
```

# eclipse - 必须为 ... ApplicationRequestFactory RequestFactory 类型运行 RequestFactory ValidationTool

> ID：10549147
> 
> 赞同：3
> 
> 时间：2012-05-11T09:52:50.593
> 
> 标签：eclipse, spring, gwt, sts-springsourcetoolsuite, m2e

我想在 Ubuntu 12.04 的 Springsource Tool Suite 2.9.1 中使用 Spring ROO 1.2.1 + GWT 2.6.1。按照[http://www.bytespring.com/blog/spring-roo-integration-gwt](http://www.bytespring.com/blog/spring-roo-integration-gwt)中的视频指南，我可以使用 roo 通过“expense”脚本创建一个新项目，然后使用 mvn gwt:run 运行它。好的，比我想在 STS 中管理它，现在问题开始了。这似乎是关于 m2e 的问题。

在 pom.xml 中，ID 为“exec-maven-plugin”的工件的标签有这个错误：

```
Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:exec-maven-plugin:1.2:exec (execution: default, phase: process-classes) 
```

我尝试按照[如何解决 Spring Data Maven Builds 的“生命周期配置未涵盖的插件执行”](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)中建议的解决方案。

用“pluginManagement”标签包围“plugins”标签。现在错误不再出现。

然后我运行应用程序，“运行方式 -> Web 应用程序”... HTML 页面选择：ApplicationScaffold.html。

出现该网页，但有一个带有此错误的窗口：

```
Error: One or more exceptions caught, see full set in UmbrellaException#getCause". 
```

STS 控制台说

```
"java.lang.RuntimeException: The RequestFactory ValidationTool must be run for the org.springsource.roo.extrack.client.managed.request.ApplicationRequestFactory RequestFactory type". 
```

为了解决这个问题，我按照[http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation](http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation)中的说明进行操作。

1）在Project Properties->Java Compiler->Annotation Properties我启用了项目特定的设置，注释处理和编辑器中的处理，gen.source目录：.apt_generated；冗长的错误。

2) 在 Factory Path 中，启用项目特定设置，并添加位于的外部 requestfactory-apt.jar

```
/home/toni/springsource/sts-2.9.1.RELEASE/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205091048-rel-r37/gwt-2.4.0 
```

（对？？）

（我不明白“验证工具”和“Maven 构建”部分对我来说是否重要）

现在我尝试重新运行（在重建项目之后）并且同样的错误仍然存​​在。

有人解决了这个问题？？如何？请逐步解释，因为我不是专家，这是我第一次使用 spring 和 gwt 的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T00:05:40.130

这看起来就像我不久前遇到的同样的问题，这（经过大量挖掘）似乎归结为AJDT（Eclipse 的 AspectJ 编译器）中的[一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=344159)，这意味着它目前无法处理 Java 6 注释（被 Roo 大量使用） .

对已连接 GWT 错误报告[的评论描述了以下解决方法：](http://code.google.com/p/google-web-toolkit/issues/detail?id=7083#c5)

> 1.  将 AspectJ 构建器移动到项目属性、构建器页面中 Java 构建器的前面（顶部）。
> 2.  清理并构建项目。
> 3.  将 .apt_generated 目录中生成的 Java/类文件复制并保存到其他地方。
> 4.  将 Java builder 移回 AspectJ builder 前面。
> 5.  清理并重建项目
> 6.  将上面 3 中的类文件复制到项目的类路径中。

或者，您可以在 Eclipse 之外构建您的项目 - 非 IDE AspectJ 编译器 ajc 不会遇到此问题。

# ios - 如何在 html 文件上链接本地 pdf 文件 - html 文件显示在 UIWebView

> ID：10549149
> 
> 赞同：2
> 
> 时间：2012-05-11T09:52:57.050
> 
> 标签：ios, uiwebview

我正在使用以下代码在我的 UiWebView 上显示本地 html 文件。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"test.html"];  

NSString* htmlString = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];    

NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:bundlePath];

[_webView loadHTMLString:htmlString baseURL:baseURL];
[_webView setBackgroundColor:[UIColor clearColor]]; 
```

应用程序正确显示 html。在 test.html 中有一个指向本地 pdf 文件 hello.pdf 的链接。此 pdf 已添加到项目中。但是当我点击链接时，什么也没有发生。当用户单击链接时，我想在我的 Web 视图中加载 pdf。

我想使用 UIWebView 委托将 Internet 超链接（例如[http://www.google.com](http://www.google.com)）请求发送到 safari 应用程序。

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType 
{
    NSLog(@"%@",inRequest.URL.absoluteString);
    if([inRequest.URL.absoluteString rangeOfString:@"hello.pdf"].location == NSNotFound)
    {
        if ( inType == UIWebViewNavigationTypeLinkClicked ) 
        {
            [[UIApplication sharedApplication] openURL:[inRequest URL]];
            return NO;
        }
        return YES;
    }
    else
    {
       return NO; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:36:50.517

您应该更清楚地说明您希望 Internet 超链接在 Safari 中加载，而本地超链接在您的`UIWebView`.

我刚刚对此进行了测试，它可以满足您的要求：

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType 
{
    if (inType == UIWebViewNavigationTypeLinkClicked) {
        if ([inRequest.URL.absoluteString rangeOfString:@"http://"].location == NSNotFound) {
            return YES;
        }
        else {
            [[UIApplication sharedApplication] openURL:[inRequest URL]];
            return NO;
        }
    }
    else {
        return YES;
    }
} 
```

这仅通过加载`UIWebView`不包含超文本类型协议前缀 (http://) 的链接来工作。

*提示：*确保您已`UIWebView`在`viewDidLoad`方法中设置了委托。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    webView.delegate = self;
} 
```

# .net - Sending back a hashtable inside a dictionary in WCF

> ID：10549151
> 
> 赞同：0
> 
> 时间：2012-05-11T09:53:19.580
> 
> 标签：.net, wcf, dictionary, hashtable

I'm trying to send a class via WCF over basicHttpBinding that contains a `Dictionary<byte, object>` and inside it is a `Hashtable` - this is needed due to existing code requirements and it can not be changed.

Now if I send out a class with just a `Dictionary<byte, object>` or `Hashtable` it works like a charm, but when I send out a dictionary containing a Hashtable I get the following error message:

> There was an error while trying to serialize parameter [http://tempuri.org/:UpdateResult](http://tempuri.org/:UpdateResult). The InnerException message was 'Type 'System.Collections.Hashtable' with data contract name 'ArrayOfKeyValueOfanyTypeanyType:http://schemas.microsoft.com/2003/10/Serialization/Arrays' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'. Please see InnerException for more details.

Now I've even tried adding all the "Service Known Type" attributes to my service interface, with no luck:

```
 [ServiceContract]
    public interface IServerProxy
    {
        [OperationContract]
        bool Connect(long FBUID, string SecretKey);

        [OperationContract]
        [ServiceKnownType(typeof(IDictionary<byte, Hashtable>))]
        [ServiceKnownType(typeof(IDictionary<Hashtable, Hashtable>))]
        [ServiceKnownType(typeof(IDictionary<object, object>))]
        [ServiceKnownType(typeof(IDictionary<object, IDictionary<object, object>>))]
        List<QueuedMessage> Update(long FBUID, string SecretKey);
    } 
```

But to be perfectly honest, I've used that tag blindly without full understanding of what it does and how (and if) it can be used to help me.

So, anyone has any idea what I should do?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:51:26.037

请参阅我关于 wcf 中泛型的[回答。](https://stackoverflow.com/questions/10500870/serialize-generic-type-over-wcf-service/10501162#10501162)泛型在 SOA 情况下是不可能的。[这个问题](https://stackoverflow.com/questions/1554205/sending-a-hashtable-to-a-webservice)提出了一个替代解决方案。希望这可以帮助

# c++ - Why swap doesn't use Xor operation in C++

> ID：10549155
> 
> 赞同：12
> 
> 时间：2012-05-11T09:53:33.780
> 
> 标签：c++, swap, xor, micro-optimization, premature-optimization

I've learned that Xor operation can be used to implement effective swap function. like this:

```
template<class T>
void swap(T& a, T& b)
{
    a = a^b;
    b = a^b;
    a = a^b;
} 
```

But the implementation of swap all i can found on the internet is essentially like this:

```
template<class T>
void swap(T& a, T& b)
{
    T temp(a);
    a = b;
    b = temp;
} 
```

It seems that the compiler didn't generate the same code for the two form above because I tested it on VC++ 2010 and the first one is done the job more quickly than `std::swap`. Is there portable or any other problem with first one? Feel free to correct any of my mistake cause i'm not an English native and not good at C++.

(Editor's note: likely that test was done with a non-optimized debug build, not a release build where `std::swap` could inline. Benchmarking debug builds is meaningless. Compilers generally don't optimize away xor-swap into something more efficient.)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T10:17:34.020

> 我了解到可以使用异或操作来实现有效的交换功能

你学错了，我怕。XOR 交换已过时：如果它比使用临时值可靠地快，那么它不应该出现在现代编译器和处理器上（“现代”我的意思是大约过去 20 年或更长时间）。你说它对你来说更快，可能你应该展示你的基准代码，看看其他人是否得到相同的结果。

除了您的代码仅适用于整数类型这一事实之外，它还有一个基本错误。用你的交换版本试试这个：

```
int a = 1;
swap(a,a);
std::cout << a << '\n'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-11T10:05:46.520

效果取决于你在哪里使用它。

在普通 cpu 上，两个整数变量的普通交换看起来像

```
$1 <- a
$2 <- b
a <- $2
b <- $1 
```

4 次操作，2 次加载，2 次存储，最长依赖为 2

以异或方式：

```
$1 <- a
$2 <- b
$3 <- $1 ^ $2
$4 <- $3 ^ $2
$5 <- $3 ^ $4
a <- $5
b <- $4 
```

7 个操作，2 个加载，2 个存储，3 个逻辑，最长依赖为 4

因此，即使适用，至少通常与 xor 交换也会更慢。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T09:55:09.737

我认为最明显的原因是 XOR 运算符仅对整数类型有意义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T09:54:42.137

当然，因为这个`xor`技巧适用于 POD 类型。

如果你想交换两个用户定义的复杂类型，`xor`那是行不通的。你需要一个深拷贝，而不是原始内存的直接拷贝，这有点`xor`像。

编辑：

> 我在 VC++ 2010 上对其进行了测试，第一个完成的工作更快（并且比 std::swap 更快）。

真的吗？你是在调试模式下编译的吗？你的结果是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:59:31.253

首先，XOR 运算符只为整数类型定义。

其次，您可以使用强制转换技巧将非整数类型转换为整数形式。

但第三，对于除 POD 类型之外的所有类型，这都会导致未定义的行为，

第四，对于 XOR 操作没有得到很好支持的大小/对齐方式的类型，需要更多的玩弄（循环是最不邪恶的）。

您可以重载`operator^`, 但这意味着 的每个特化都`swap()`必须确保它存在或定义一个，这可能会在名称查找时产生更多的混乱，而不是值得的。当然，如果这样的运算符已经存在，它不一定具有正确的行为，并且您可能最终得到更差的性能，因为这种重载不一定是`inline`or `constexpr`。

# iphone - iOS Variable names and memory management

> ID：10549156
> 
> 赞同：0
> 
> 时间：2012-05-11T09:53:35.663
> 
> 标签：iphone, objective-c, ios

I am a bit confused by the underscore naming and the self. Is the following code OK?

@interface MyClass()

```
@property (nonatomic,retain) NSString        *name;
@property (nonatomic,retain) NSString        *surname;

@end

@implementation MyClass
@synthesize name = _name;
@synthesize surname = _surname; 
```

Then when I need to assign a value I do this

```
self.name = [someParam retain]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:55:30.267

不，这是不行的，因为它`self.name`还将保留您在属性中声明的值。

这将保留：

```
self.name = someParam; 
```

其他方式写入相同（注意释放当前变量）：

```
if (_name != someParam) {
    if(_name) {
       [_name release], _name = nil;
    }
    _name = [someParam retain];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:56:09.250

你不必重复保留:)

只是：

```
self.name = someParam; 
```

但其余的我认为还可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:12:12.453

不，这是不对的，因为您必须使用别名 _name

```
if(_name)
{
    [_name release];
    _name=nil;
}
else
{
    //retain the object
} 
```

# android - Android-facebook chat client using xmpp

> ID：10549157
> 
> 赞同：0
> 
> 时间：2012-05-11T09:53:38.160
> 
> 标签：android, facebook, xmpp, asmack

Am using asmack to login to the facebook for chatting using my apikey and access token ! But the login is failing with the following exception

"SASL authentication failed using mechanism X-FACEBOOK-PLATFORM: " I want to know from where i can get a properly working "extends SASLMechanism" class to do it and also help me to login currently am using the following class [custom](http://community.igniterealtime.org/servlet/JiveServlet/download/220711-15693/SASLXFacebookPlatformMechanism.java.zip) . And for making the login :--

```
SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM",     SASLXFacebookPlatformMechanism.class);     
            SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);     
            connection.connect(); 
            connection.login(facebook.getAppId(), facebook.getAccessToken()); 
```

// But it's not working

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:06:36.247

我测试了这个，它对我有用。

首先编辑您的 SASLXFacebookPlatformMechanism 类。复制并粘贴此代码。

```
package com.facebook.android;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Map;

import org.apache.harmony.javax.security.auth.callback.CallbackHandler;
import org.apache.harmony.javax.security.sasl.Sasl;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.sasl.SASLMechanism;
import org.jivesoftware.smack.util.Base64;

import android.util.Log;

public class SASLXFacebookPlatformMechanism extends SASLMechanism {

    private static final String NAME              = "X-FACEBOOK-PLATFORM";

    private String              apiKey            = "";
    private String              accessToken        = "";

    /**
     * Constructor.
     */
    public SASLXFacebookPlatformMechanism(SASLAuthentication saslAuthentication) {
        super(saslAuthentication);
    }

    @Override
    protected void authenticate() throws IOException, XMPPException {
        getSASLAuthentication().send(new AuthMechanism(NAME, ""));
    }

    @Override
    public void authenticate(String apiKey, String host, String accessToken) throws IOException, XMPPException {
        if (apiKey == null || accessToken == null) {
            throw new IllegalArgumentException("Invalid parameters");
        }

        this.apiKey = apiKey;
        this.accessToken = accessToken;
        this.hostname = host;

        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, this);
        authenticate();
    }

    @Override
    public void authenticate(String username, String host, CallbackHandler cbh) throws IOException, XMPPException {
        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, cbh);
        authenticate();
    }

    @Override
    protected String getName() {
        return NAME;
    }

    @Override
    public void challengeReceived(String challenge) throws IOException {
        byte[] response = null;

        if (challenge != null) {
            String decodedChallenge = new String(Base64.decode(challenge));
            Map<String, String> parameters = getQueryMap(decodedChallenge);

            String version = "1.0";
            String nonce = parameters.get("nonce");
            String method = parameters.get("method");

            String composedResponse =
                "method=" + URLEncoder.encode(method, "utf-8") +
                        "&nonce=" + URLEncoder.encode(nonce, "utf-8") +
                        "&access_token=" + URLEncoder.encode(accessToken, "utf-8") +
                        "&api_key=" + URLEncoder.encode(apiKey, "utf-8") +
                        "&call_id=0" +
                        "&v=" + URLEncoder.encode(version, "utf-8");
            response = composedResponse.getBytes();
        }

        String authenticationText = "";

        if (response != null) {
            authenticationText = Base64.encodeBytes(response);
        }

        // Send the authentication to the server
        getSASLAuthentication().send(new Response(authenticationText));
    }

    private Map<String, String> getQueryMap(String query) {
        Map<String, String> map = new HashMap<String, String>();
        String[] params = query.split("\\&");

        for (String param : params) {
            String[] fields = param.split("=", 2);
            map.put(fields[0], (fields.length > 1 ? fields[1] : null));
        }

        return map;
    }
} 
```

然后在您要登录 facebook 的活动类中使用此方法

```
private void LoginToFaceBook(){
        ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
        config.setSASLAuthenticationEnabled(true);
        config.setSecurityMode(ConnectionConfiguration.SecurityMode.enabled);
        xmpp = new XMPPConnection(config);
        SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM",SASLXFacebookPlatformMechanism.class);
        SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAppId());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        try {
            xmpp.connect();
            Log.i("XMPPClient",
                    "Connected to " + xmpp.getHost());

        } catch (XMPPException e1) {
            Log.i("XMPPClient",
                    "Unable to " + xmpp.getHost());

            e1.printStackTrace();
        }
        try {
            xmpp.login(PreferenceConnector.APP_ID, mFacebook.getAccessToken());

        } catch (XMPPException e) {
            e.printStackTrace();
        }  
    } 
```

# javascript - 未捕获的 ReferenceError：jQuery 不仅在 Chrome 中定义

> ID：10549160
> 
> 赞同：2
> 
> 时间：2012-05-11T09:53:59.873
> 
> 标签：javascript, jquery, google-chrome, asynchronous

我使用此代码在头部加载我的 JS 异步

```
<script type='text/javascript'>
 // Add a script element as a child of the body
 function downloadJSAtOnload() {
var element4= document.createElement("script");
var element5= document.createElement("script");
element4.src="http:///ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
element5.src="http://yourjavascript.com/301810712121/slidemenu_horiz.js"
element4.async=true;
element5.async=true;
document.body.appendChild(element4);
document.body.appendChild(element5);
}
 // Check for browser support of event handling capability
 if (window.addEventListener)
 window.addEventListener("load", downloadJSAtOnload, false);
 else if (window.attachEvent)
 window.attachEvent("onload", downloadJSAtOnload);
 else window.onload = downloadJSAtOnload;
</script> 
```

在 IE 和 Firefox 中工作正常，但在 Chrome 中我有这个错误：“未捕获的 ReferenceError：jQuery 未定义”

当我第二次（或第三次）刷新页面时，脚本在 Chrome 中运行良好，我需要知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:45:28.573

鉴于您的需求，并且因为我过去成功使用过它，我建议使用 LABjs - [http://labjs.com/](http://labjs.com/)

如前所述，有大量脚本加载器可供选择 - LABjs 更注重性能，不包含许多其他功能，例如 requirejs（AMD 加载器）、YepNope（基于特征检测的条件加载器）有。如果您只需要异步加载脚本并控制执行顺序，那么 LABjs 是一个非常小的脚本，可以很好地处理这个问题。

使用 LABjs，您将执行以下操作来复制上面的代码：

```
<script src="js/libs/LAB.js"></script>
<script>
$LAB
.script('http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js').wait()
.script('http://yourjavascript.com/301810712121/slidemenu_horiz.js')
.wait(function () {
    // Check jQuery has loaded (could do this for the slider as well)
    if (window.jQuery) {
        // Do something with your slider
    }
});
</script> 
```

在上面的示例中，该`.wait()`函数确保 jQuery 在 slidemenu_horiz.js 之前执行 - 最后`.wait()`一个作为回调传递一个匿名函数 - 在此您可以测试所有内容是否已加载，然后进行初始化。

就脚本加载器而言，值得检查所有选项。确实有很多负载，每个都有不同的功能集，您可能会发现它们可以更好地解决您的问题。

**编辑：**为清楚起见，在代码示例中添加了对 LABjs 的脚本引用

# c# - 为什么我不能发送这个 IP 数据包？

> ID：10549163
> 
> 赞同：8
> 
> 时间：2012-05-11T09:54:08.503
> 
> 标签：c#, sockets, tcp, raw-sockets

我正在尝试使用 c# 发送 IP 数据包。

```
 destAddress = IPAddress.Parse("192.168.0.198"),
    destPort = 80;

    // Create a raw socket to send this packet
    rawSocket = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);

    // Bind the socket to the interface specified
    IPEndPoint iep = new IPEndPoint(IPAddress.Parse("192.168.0.140"),0);
    rawSocket.Bind(iep);

    // Set the HeaderIncluded option since we include the IP header
    rawSocket.SetSocketOption( socketLevel, SocketOptionName.HeaderIncluded, 1 );

    // Send the packet!
    int rc = rawSocket.SendTo(builtPacket, new IPEndPoint(destAddress, destPort));
    Console.WriteLine("sent {0} bytes to {1}", rc, destAddress.ToString()); 
```

builtPacket 的内容如下所示。它是一个包含 TCP SYN 数据包的 IP 数据包（这就是我认为我创建的）。

45 00 00 28 00 00 00 00 02 06 36 6E C0 A8 00 8C

C0 A8 00 C6 14 1E 00 50 00 00 00 00 00 00 00 00

05 02 FF FF E6 4F 00 00

输出是：

```
sent 40 bytes to 192.168.0.198 
```

问题是我在 Wireshark 跟踪中看不到任何内容。就像数据在堆栈中的距离不够远，Wireshark 无法看到它？如果我使用浏览器连接到 192.168.0.198，Wireshark 会显示所有数据包，但当我尝试使用上述代码和数据发送数据包时，什么也不显示。

我的配置：

*   我以管理员身份运行，所以这不是权限问题。

*   Windows7（不在虚拟机中运行）

*   Wireless connection only (IP config reports its IP as 192.168.0.140)

What am I doing wrong?

I'm sure Occam's Razor applies here, but I've been looking at this for hours and can't figure out what's wrong.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:50:31.720

[This question](https://stackoverflow.com/q/7533205/715075), [backed up by MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548(v=vs.85).aspx#Limitations_on_Raw_Sockets), claims that Windows no longer (XP SP 2 through 7) allows transmission of TCP data using raw sockets.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:19:25.300

My guess is that either Wireshark is not looking at the right network interface, or that the destination ip address somehow resolves to the local machine, in which case it will routed inside of the OS and be invisible to the 'Shark.

# php - PHP：从函数返回一个值并更改它所在的while循环的变量

> ID：10549166
> 
> 赞同：0
> 
> 时间：2012-05-11T09:54:25.057
> 
> 标签：php, function, while-loop

是否可以**执行一个函数**，然后**为 Var 返回一个新值**，因此**当它再次尝试循环时，它会检查条件并检测更改**？

* * *

假设我有这个`function`：

```
 function changeZ(){
   $z=1
   return $z;      
   } 
```

这是我的`while`循环：

```
$a = 0;
$z = 10;
while($a<$z){
changeZ();
$a++;
} 
```

我应该如何修改代码，以便

函数`changeZ()`返回变量的新值`$z`

因此，当循环**检查条件**(1<1) 时，它返回**false**并**停止循环**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:58:46.040

您可以将其用于将函数返回的数据存储到数组中。

```
function changeZ(){
     $z = $row['result'];       //your data from database
     return $z;      
}

$a = 0;
$z = 10;
$returned_value=new array();

while($a<$z){
    $returned_value[] = changeZ();
    $a++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:13:45.297

```
$a = 0;
$z = 10;
while($a<$z){
$z = changeZ();
$a++;
} 
```

由于您的函数返回一个值，因此您应该将变量设置为包含返回值。这将按照您的要求执行，导致循环仅运行一次。

您可以做的另一件事是将变量传递给这样的函数

```
function changeZ($in){
$out = $in-1;
return $out;
}

$a = 0;
$z = 10;
while($a<$z){
$z = changeZ($z);
$a++;
} 
```

这将导致循环运行 5 次，一个数字上升另一个数字下降 0<10 1<9 2<8 3<7 4<6

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:56:50.310

函数中的 $z 和循环中使用的 $z 不是同一个人。因此，您必须将 loop-z 的值设置为函数的返回值...

```
$a = 0;
$z = 10;

while($a<$z){
    $z = changeZ();
    $a++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:57:21.230

你必须把这个

```
$a = 0;
$z = 10;
while($a<$z) {
    $z = changeZ();
    $a++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:59:31.173

```
$z = changeZ(); 
```

但正如评论的那样，你似乎肯定会犯这个错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T09:59:45.213

您可以通过引用传递或返回值

```
$z = 100;
change($z);

function change(&$var) {
  $var = 1;
}

$z = 100;
$z = change($z);
function change($var) {
  return $var * 100 - 50;// Logic with $z obviously can be whatever
} 
```

# xml - Delphi - xml - 列表视图和组

> ID：10549170
> 
> 赞同：-2
> 
> 时间：2012-05-11T09:54:33.887
> 
> 标签：xml, delphi, listview

我正在尝试将 xml 文件填充到 Delphi ListView1 中，然后通过在 Category 部分下的 xml 文件中定义的 [tag] “分组”所有 [items and subitems]，

我试图让我的程序有一个“标签”系统，所以类似的软件将按一个通用标签分组，如果 listview 不可能，我愿意接受建议，然后我可以使用其他组件来喜欢 VirtualStringTree，easylistview ..等等，这个程序是供我个人使用的，我只是从学习的角度很好奇，因为我没有看到其他关于如何完成这个的例子。

所以对于下面列出的 xml，它应该看起来像

```
ListView1
TAG1 [Each tag name in the category, this would be a group]
- New Item 1 <- Category name
   -Copy of File <- subitem software name
- bin [This is another category but it has TAG1 so group it with TAG1 items]
TAG4 [Each tag name in the category, this would be a group]
- New Item 1 <-this is the same as TAG1, add it to the TAG4 group since its in tags]
  -Copy of File <- subitem software of category 
```

这是我的 xml 文件的示例。

```
file.xml
<Category>
<Category name="New Item 1" Tags="TAG1 TAG4"/>
 <Software name="Copy of File" Tags="">
  <PathCache>data\cache\945.ico</PathCache>
  <PathExe>$Drive\Development\file.exe</PathExe>
 </Software>
<Category name="bin" Tags="TAG1">
 <Software name="Copy of File" Tags="">
  <PathCache>data\cache\947.ico</PathCache>
 <PathExe>$Drive\Development\file.exe</PathExe>
</Software>
<Software name="softwaretitle" Tags="">
    <PathCache>data\cache\946.ico</PathCache>
    <PathExe>$Drive\Development\test.exe</PathExe>
 </Software>
 </Category>
 </Category> 
```

我将 tags="" 部分添加到 xml 文件中的 Category 部分，如果需要我可以重写它

```
 <Category name="New Item 1"/>
  <Tags>Tag1 Tag4</tag> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T23:00:27.777

首先你应该更好地组织你的 XML 文件，至少这样（我建议你使用 Notepad++ 来缩进你的 XML）：

```
<Categories>
  <Category name="New Item 1" Tags="TAG1 TAG4">
    <Software name="Copy of File" Tags="">
      <PathCache>data\cache\945.ico</PathCache>
      <PathExe>$Drive\Development\file.exe</PathExe>
    </Software>
    <Software name="Copy of File" Tags="">
      <PathCache>data\cache\945.ico</PathCache>
      <PathExe>$Drive\Development\file.exe</PathExe>
    </Software>
  </Category>
  <Category name="bin" Tags="TAG1">
    <Software name="Copy of File" Tags="">
      <PathCache>data\cache\947.ico</PathCache>
      <PathExe>$Drive\Development\file.exe</PathExe>
    </Software>
    <Software name="softwaretitle" Tags="">
      <PathCache>data\cache\946.ico</PathCache>
      <PathExe>$Drive\Development\test.exe</PathExe>
    </Software>
  </Category>
</Categories> 
```

获得规范化的 XML 后，您可以使用 XMLDataBinding (File/New/Other/XML/XMLDataBinding) 将其转换为 Delphi 类，选择您的 Categories.xml 文件。

通过将 XML 映射到 Delphi 类，您可以轻松地浏览 XML 数据。

示例（德尔福 XE）：

```
type
  TForm1 = class(TForm)
    btnPopulate: TButton;
    lvCategories: TListView;
    procedure btnPopulateClick(Sender: TObject);
  private
    Categories: IXMLCategoriesType;
    procedure LoadCategories(const FileName: string);
    procedure PopulateCategoriesList;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.LoadCategories(const FileName: string);
var
  XMLDoc1: TXMLDocument;
begin
  if Assigned(Categories) then
    Exit;

  XMLDoc1 := TXMLDocument.Create(Self);
  XMLDoc1.FileName := FileName;
  XMLDoc1.Active := True;
  Categories := GetCategories(XMLDoc1);
end;

procedure TForm1.PopulateCategoriesList;
  i, j: Integer;
  Column: TListColumn;
  Group: TListGroup;
  Item: TListItem;
begin
  lvCategories.ViewStyle := vsReport;
  lvCategories.GroupView := True;
  Column := lvCategories.Columns.Add;
  Column.Caption := 'Software name';
  Column.AutoSize := True;

  Column := lvCategories.Columns.Add;
  Column.Caption := 'Exe path';
  Column.AutoSize := True;

  for i := 0 to Categories.Count - 1do
  begin
    Group := lvCategories.Groups.Add;
    Group.Header := Copy(Categories.Category[i].Tags, 1, Pos(' ', Categories.Category[i].Tags) - 1);
    for j := 0  to Categories.Category[i].Count - 1 do
    begin
      Item := lvCategories.Items.Add;
      Item.Caption := Categories.Category[i].Software[j].Name;
      Item.GroupID := Group.GroupID;
      Item.SubItems.Add(Categories.Category[i].Software[j].PathExe)
    end;
  end;
end;

procedure TForm1.btnPopulateClick(Sender: TObject);
begin
  LoadCategories(ExtractFilePath(Application.ExeName) + '..\..\Categories.xml');
  PopulateCategoriesList;
end; 
```

希望这对你有帮助！

# java - 如何使用 Java Graphics.DrawString 绘制 Wingding.ttf 字体的字符？

> ID：10549171
> 
> 赞同：1
> 
> 时间：2012-05-11T09:54:38.813
> 
> 标签：java, graphics, drawstring, non-unicode

我正在尝试使用 Java Graphics.DrawString 从 Wingding.ttf 字体中绘制字符。但生成的图像仅包含矩形而不是字符。

```
BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_4BYTE_ABGR);

Graphics graphics = image.getGraphics();

Font font = new Font("Wingdings", Font.PLAIN, 20);
graphics.setFont(font);

graphics.setColor(Color.BLACK);

graphics.drawString("\u00d8", 10, 10); // THREE-D TOP-LIGHTED RIGHTWARDS ARROWHEAD char

ImageIO.write(image, "PNG", new File(TEST_DATA_DIR + "bullet_char.png")); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:44:43.197

我不认为wingdings是“标准”字体之一

```
Font font = null;
try {
    font=Font.createFont( Font.TRUETYPE_FONT,
        new FileInputStream(new File("/pathto/WINGDINGS.TTF")) );
} catch(Exception e) {
    System.out.println(e);
}
font=font.deriveFont(Font.PLAIN, 200);
graphics.setFont(font); 
```

加载字体后（始终为 PLANE 1 pnt），您可以导出所需的样式和大小....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T07:53:50.613

在这里已经回答了类似的问题：[在 java applet 中绘制异国字体](https://stackoverflow.com/questions/8692095/drawing-exotic-fonts-in-a-java-applet)，您需要通过`\uF0d8`而不是`\u00d8`.

```
graphics.drawString("\uF0d8", 10, 10); 
```

# android - android，删除sqlite中的多行

> ID：10549178
> 
> 赞同：1
> 
> 时间：2012-05-11T09:54:52.670
> 
> 标签：android, sqlite, delete-row

我需要从我的数据库表中删除多行。这是我的删除代码

```
String[] paragraph;
.....
//here you can to put various strings within it (1 or more)
.....
db.delete(mytablename,"Paragraph = ?",paragraphs); 
```

它适用于 1 个字符串，但不适用于更多字符串。有人能帮助我吗？

这里有 LogCat 显示的错误：

```
05-11 11:03:01.400: E/AndroidRuntime(767): FATAL EXCEPTION: main
05-11 11:03:01.400: E/AndroidRuntime(767): android.database.sqlite.SQLiteException: bind or column index out of range: handle 0x377500
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.database.sqlite.SQLiteProgram.native_bind_string(Native Method)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:241)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.database.DatabaseUtils.bindObjectToProgram(DatabaseUtils.java:191)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1769)
05-11 11:03:01.400: E/AndroidRuntime(767):  at it.tirocinio.Segnalibro$3$3.onClick(Segnalibro.java:196)
05-11 11:03:01.400: E/AndroidRuntime(767):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.os.Looper.loop(Looper.java:123)
05-11 11:03:01.400: E/AndroidRuntime(767):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-11 11:03:01.400: E/AndroidRuntime(767):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 11:03:01.400: E/AndroidRuntime(767):  at java.lang.reflect.Method.invoke(Method.java:521)
05-11 11:03:01.400: E/AndroidRuntime(767):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-11 11:03:01.400: E/AndroidRuntime(767):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-11 11:03:01.400: E/AndroidRuntime(767):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T09:58:06.727

```
use this way:

for(int i = 0 ; i < paragraphs.lenght;i++)
{

db.delete(mytablename,"Paragraph ='"+paragraphs[i]+"'",null);
} 
```

# javascript - 访问 Javascript 中的参数

> ID：10549179
> 
> 赞同：0
> 
> 时间：2012-05-11T09:54:52.683
> 
> 标签：javascript

我对 JS 有一个奇怪的问题（可能是一个新手错误），但我坚持下去

在函数`fillInVersionsList`中，如果我`alert("tempo")`在 firebug 中放置一个或中断，我可以在参数中访问我的数据（即：`alert(pSimulator.simulatorData['LastVersion'])`并且我得到了正确的结果。问题是，如果我在访问之前没有放置警报/firebug 中断对于数据，我有一个 JS 错误 `pSimulator.simulatorData is undefined`。

```
$(document).ready(function() {

    var simulator = new Simulator();

    // Load SimulatorData into the simulator class
    initSimulatorData(simulator);
    // Fill in datas into VersionsList (2nd arg = Id of the list)
    fillInVersionsList(simulator, $('#VersionsList'));  

});

function initSimulatorData(pSimulator)
{
    $.ajax({
      url: "getData.php?action=init",
      success: function(data) {
          pSimulator.initSimulatorData(data);
        }

    });

}

function fillInVersionsList(pSimulator, pSelect)
{
    //alert("tempo");
    alert(pSimulator.simulatorData['LastVersion']);

    pSelect.html('<option>test</option>')       

}

function Simulator()
{

    var simulatorData;

    this.initSimulatorData = function(pSimulatorData)
    {
        this.simulatorData = pSimulatorData;    
    }

} 
```

有什么办法可以解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:01:46.890

我怀疑`initSimulatorData`正在异步加载一些数据。

添加`alert`给它足够长的时间来加载数据。

您将需要添加某种回调函数，例如：

```
initSimulatorData(simulator, function () {
    // Fill in datas into VersionsList (2nd arg = Id of the list)
    fillInVersionsList(simulator, $('#VersionsList'));  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:04:26.757

从您的问题来看，模拟器需要时间来初始化，而当调用 fillInVersionsList 时 pSimulator 仍未完全初始化。

当您发出警报时，初始化时间模拟器会出现一些时间延迟。

检查模拟器完全初始化后是否有回调方法，然后调用fillInVersionsList方法。

initSimulatorData(simulator) 是做什么的？这里面有什么异步代码吗？

# php - javascript ajax responesText比较在Chrome中不起作用？

> ID：10549181
> 
> 赞同：0
> 
> 时间：2012-05-11T09:54:56.067
> 
> 标签：php, jquery, ajax, google-chrome, response

我有一些返回简单字符串的 jquery ajax 调用。返回字符串的解释在 Firefox 和 IE 中有效（类设置为 ok），但在 Chrome 中无效（类设置为错误）？

myurl 中的 php 只返回一个带有数值的字符串。在 Chrome 中，警报（result.responseText 的类型）；还给了我一个字符串，调试提示该值确实是 100。但是 Chrome 出于某种原因并没有深入到 if 语句中。

有任何想法吗？

```
 $.ajax({
  url : 'myurl',
  data:{o:1},
  dataType:"text",
  complete : function (result) {
  if (result.responseText==100){
   $("#mydiv").addClass("ok");
  }
  else {
   $("#mydiv").addClass("wrong");
  }
 }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:57:04.713

尝试条件为`if (result.responseText== "100"){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:58:53.340

```
complete : function (result) { 
```

`result``responseText`当你使用 jQuery 时已经是。如果您绝对想使用该`responseText`属性，则可以使用以下内容：

```
complete : function(result, statusText, xhrObject) {
    // access xhrObject.responseText there
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:58:59.890

您是否尝试将响应与“100”进行比较？

```
if (result.responseText=="100"){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:59:20.857

尝试字符串比较`if (result.responseText== "100")`

或者将响应转换为整数，然后像这样比较

```
if (parseInt(result.responseText,10) == 100) 
```

如果您只发回一个号码。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T10:09:07.713

似乎 myurl 返回了一个带有额外 BOM 的字符串（返回的是“﻿100”，而不是“100”）。在没有 DOM 的 UTF 中设置文档编码修复了它。这有助于：[如何避免在 php 中回显字符 65279？（这个问题也与 Javascript xmlhttp.responseText (ajax) 有关）](https://stackoverflow.com/questions/6538203/how-to-avoid-echoing-character-65279-in-php-this-question-also-relates-to-java)

# android - 应用程序无法自动检测设备屏幕尺寸

> ID：10549185
> 
> 赞同：0
> 
> 时间：2012-05-11T09:55:10.757
> 
> 标签：android, android-screen-support

我开发了一个应用程序。我做了两组布局，分别是

> 默认和小

所以我有 2 个布局文件夹，分别是 res/layout 和 res/layout-small。

我在 2.7 英寸 HVGA 的模拟器中进行了测试，它确实自动使用 res/layout-small 文件夹。

当我在设备上运行它时，它没有但仍在使用 res/layout。

这是我的 manifest.xml

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:requiresSmallestWidthDp="480"
    android:compatibleWidthLimitDp="480"
    android:largestWidthLimitDp="480" >
</supports-screens> 
```

为什么应用程序安装到设备后无法检测设备屏幕尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:01:28.310

从[文档](http://developer.android.com/guide/practices/screens_support.html)中复制：

> **注意**：这些最小屏幕尺寸在 Android 3.0 之前没有得到很好的定义，因此您可能会遇到一些设备被错误分类为普通和大屏幕。这些也基于屏幕的物理分辨率，因此可能因设备而异 - 例如，带有系统栏的 1024x720 平板电脑实际上由于系统栏使用它而对应用程序的可用空间要少一些。

如果您使用的不是 3.0+ 设备，那么这可能是该设备的问题。

# sql - 用作表达式的子查询返回的多行

> ID：10549188
> 
> 赞同：0
> 
> 时间：2012-05-11T09:55:22.590
> 
> 标签：sql, postgresql

我有以下查询，它在 Oracle 和 SQL Server 2008 上运行得非常好，但它似乎不能在 PostgreSQL 上运行。该查询旨在返回与给定条件匹配的记录计数。有人可以解释这个原因，并提供一个解决方案来解决如何修改这个查询以允许它产生预期的结果。

询问：

```
select count(*) 
from tma_notices 
where TNOT_NOTICE_TYPE ='0400' 
and TNOT_NOTICE_STATUS = 'OK' 
and tnot_notice_id >= 
    (
        select NOTICE_NUM_AT_MIDNIGHT 
        from RWOL_COUNTER_QUERY_TYPE 
        where QUERY_TYPE = 'START_NOTICES_TODAY' 
        and USER_NAME = 'PUBLIC'
    ) 
```

更新：此错误是由 PostgreSQL 数据库中不可预见的重复记录引起的。需要调查重复的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:00:12.650

很明显，子查询可以返回一组行，并且`tnot_notice_id >=`如果与一组行而不是单个值进行比较，则条件无效。

您确定存在满足您的 where 条件的唯一记录吗？

如果你想避免这种行为，我建议你使用`tnot_notice_id >= ALL ( subquery )`

# r - 为什么我通过 R 中的 FFT 从一个简单的 sin 函数中得到两个频率尖峰？

> ID：10549192
> 
> 赞同：8
> 
> 时间：2012-05-11T09:55:36.177
> 
> 标签：r, signal-processing, fft

我在数学课上了解了傅立叶变换，并认为我已经理解了它们。现在，我正在尝试使用 R（统计语言）并在实践中解释离散 FFT 的结果。这就是我所做的：

```
x = seq(0,1,by=0.1)
y = sin(2*pi*(x))

calcenergy <- function(x) Im(x) * Im(x) + Re(x) * Re(x)

fy <- fft(y)
plot(x, calcenergy(fy)) 
```

并得到这个情节：

![sin(2*pi*(x)) 从 0 到 1 的能量密度谱，步长为 0.1](../Images/5faf2a7eeb99706dd3eb4b2c2b313f72.png)

如果我理解正确，这代表能量密度谱的“一半”。由于变换是对称的，我可以将所有值镜像到 x 的负值以获得完整的光谱。

但是，我不明白的是，为什么我会得到两个尖峰？这里只有一个正弦频率。这是混叠效应吗？

另外，我不知道如何从这个图中得到频率。让我们假设正弦函数的单位是秒，那么密度谱中 1.0 处的峰值是 1Hz 吗？

再说一遍：我理解 FFT 背后的理论；实际应用是问题:)。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T10:04:18.607

对于 N 点的纯实输入信号，您会得到 N 点的复数输出，其复共轭对称性约为 N/2。您可以忽略 N/2 以上的输出点，因为它们没有为真实输入信号提供有用的附加信息，但如果您绘制它们，您将看到上述对称性，对于单个正弦波，您将看到 bin`n`和`N - n`. （注意：您可以将上面的 N/2 个 bin 视为代表*负频率*。）总而言之，对于 N 个点的实际输入信号，您可以从 FFT 中获得 N/2 个有用的复数输出 bin，它们表示来自 DC ( 0 Hz）至奈奎斯特（Fs / 2）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T17:03:43.907

要从 FFT 的结果中获取频率，您需要知道输入到 FFT 的数据的采样率和 FFT 的长度。每个 bin 的中心频率是 bin 索引乘以采样率除以 FFT 的长度。因此，您将在中途 bin 处获得从 DC (0 Hz) 到 Fs/2 的频率。

FFT 结果的后半部分只是实际数据输入的前半部分的复共轭。原因是复共轭的虚部抵消，这是表示具有零虚部（例如严格实数）的求和结果所必需的。

# joomla - Joomla - 更改主菜单

> ID：10549194
> 
> 赞同：1
> 
> 时间：2012-05-11T09:55:54.573
> 
> 标签：joomla, joomla-template

我是 Joomla 的新手。如何将主菜单（如下面的屏幕）更改为我的自定义菜单？

[菜单](http://i.stack.imgur.com/YKTlE.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:42:39.573

从后端创建您自己的自定义菜单。登录到您的管理员面板。

```
Menus->Menu Manager->Add New Manager 
```

输入菜单详细信息，您将能够在下拉菜单中看到它。选择菜单类型项目并将文章、联系人等分配给您新创建的菜单。

现在在`Extensions`标签下点击`Module Manager`。现在将您的自定义菜单管理到您希望它显示的位置。就像如果您想显示您`custom menu`的主菜单然后转到主菜单并在基本选项和您希望它显示的位置下将您的菜单分配给它。

以下是您可以找到更多帮助的链接 -

*   [Joomla 代码帮助](http://docs.joomla.org/Developers)
*   [Joomla 文档](http://docs.joomla.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T13:38:50.910

从您的问题中不清楚您需要做什么，但根据您的菜单图片，我将描述我的答案。

1.  如果您需要更改菜单的位置，请转到后端扩展-> 模块管理器-> 选择主菜单并更改主菜单的位置。

同样，您可以更改自定义菜单位置。

2.  如果您需要更改主菜单并设置自定义菜单而不是主菜单，那么您需要从模块管理器更改菜单位置并设置自定义菜单的位置。

菜单项将从菜单->选择菜单->添加新菜单项中添加。

3.  从您的问题中不清楚您需要做什么，但根据您的菜单图片，我将在下面解释我的答案 -

如果你想让主菜单成为下拉菜单，那么你可以使用 joomla 的一些免费菜单扩展模块，如 JB DropDown Menu 或 CK Megamenu，下拉菜单。

# regex - 正则表达式不匹配所有应匹配的项目

> ID：10549195
> 
> 赞同：0
> 
> 时间：2012-05-11T09:55:55.930
> 
> 标签：regex

输入字符串“This.is.it.CAT.DOG.MOUSE.HORSE.go”

```
Regex = [ _\,\.\(\)\[\]\-](CAT|DOG|MOUSE|HORSE)([ _\,\.\(\)\[\]\-]) 
```

这似乎只匹配“.CAT”。和“.MOUSE”。什么时候它也应该匹配“.DOG”和“.HORSE.”。

我假设是因为'。已经匹配，从那时起它被忽略了？

谢谢尼格玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:37:57.470

修改它以满足您的需要：[http](http://rubular.com/r/10wI5rf1I4) ://rubular.com/r/10wI5rf1I4 。

```
 (?:^|[\[\] _,.()-])(CAT|DOG|MOUSE|HORSE)(?=[\[\] _,.()-]|$) 
```

# javascript - onLoad iFrame 与 Colorbox

> ID：10549199
> 
> 赞同：1
> 
> 时间：2012-05-11T09:56:10.987
> 
> 标签：javascript, jquery, colorbox

我正在尝试使用 onload 事件将 iFrame 加载到 colorbox - 看起来应该很简单，但我收到错误“内容无法加载”

这是我的代码：

```
<script type="text/javascript"> 
    $(document).ready(function(){ 
    $.colorbox({href:"http://www.google.com", open: true});
    }); 
</script> 
```

关于为什么这可能不起作用的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:04:02.407

您需要在函数调用中添加 iframe: true

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T10:17:16.987

我做了[这个 Fiddle](http://jsfiddle.net/zuul/TKHbJ/)来测试这个问题，并得出结论，当宽度和高度没有设置时，它有一个奇怪的行为，所以我确实解决了这个问题：

**查询**

```
$(document).ready(function(){
  $.colorbox({
    iframe      : true,
    innerWidth  : 425,
    innerHeight : 344,
    href        : "http://www.youtube.com/embed/617ANIA5Rqs?rel=0&wmode=transparent"
  });
}); 
```

# jquery - 在选中复选框并使用 jquery 按下提交按钮后运行一个函数

> ID：10549205
> 
> 赞同：0
> 
> 时间：2012-05-11T09:56:35.060
> 
> 标签：jquery, function, checkbox, submit

我正在尝试在选中复选框并使用 jquery 按下提交按钮后运行一个函数

这就是我所拥有的：

```
 <form name="select">
       <label for="Genre"><input type="checkbox" checked="checked" id="Genre">Genre</label>
       <input type="button" onclick="myFunction()" value="submit">      
 </form> 
```

这是我的功能：

```
function myFunction() {

    $("input [id=Genre] [checked]").each(
        function() {
            alert("genre is checked");  
        }

    );  
} 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:01:08.360

```
$('#formid').submit(function(){
$('#genre:checked').each(function()
      {
         alert('checked');
      })
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:01:37.390

尝试使用：`$('input#Genre :checked')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:02:52.640

```
$("input#Genre :checked").each(
    function() {
        alert("genre is checked");
    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:02:54.473

将函数附加到提交按钮的方式不是“jQuery”方式。

试试这个 ：

```
$('input[value=submit]').on('click', myFunction); 
```

[http://jsfiddle.net/5jj8e/](http://jsfiddle.net/5jj8e/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T10:03:01.620

如果您按 ID 选择，则可以使用：

```
$('#Genre') 
```

如果您想选择所有复选框，那么您可以：

```
$('input[type="checkbox"]') 
```

如果您想选中一个选中的复选框，您可以使用：

```
$('input[type="checkbox"]:checked') 
```

如果你想在有人选中复选框时做某事，你需要添加一个事件监听器：

```
$('#Genre').bind('click', function() {
   // do something when checkbox with ID Genre is clicked

   if ($(this).is(':checked')) {
      // do something when the checkbox is checked
   }
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T10:03:58.263

```
$('#formid').submit(function(){
   if($('#Genre').is(':checked')){
    return true;
}
alert('Not checked');
return false;

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T10:08:27.260

在 HTML中，在单选按钮中给出**值**

```
<form name="select">
       <label for="Genre"><input type="checkbox" checked="checked" id="Genre" value="Genre1" >Genre</label>
       <input type="button" onclick="myFunction()" value="submit">      
 </form> 
```

jquery应该是

```
function myFunction() {

    if($("input[id='Genre']:checked").length==0)
    {
        alert("genre is checked");  
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T10:17:35.107

您可以使用 jQuery 的检查选择器：[http ://api.jquery.com/checked-selector/](http://api.jquery.com/checked-selector/)

# java - 如何在 Java 中获取小程序查看器像素的颜色？

> ID：10549207
> 
> 赞同：1
> 
> 时间：2012-05-11T09:56:46.573
> 
> 标签：java, graphics2d, japplet

我绘制了任何图片，使用了 Graphics 2D。如何获得x，y处像素的颜色？getPixelColor 不起作用，因为此方法从屏幕获取像素，而不是小程序查看器坐标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T11:37:12.967

1.  将图片绘制到`Graphics`a`BufferedImage`
2.  将图像绘制到`Graphics2D`.
3.  要获取任何像素、调用[`BufferedImage.getRGB(x,y)`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)或变体的颜色（查看文档。）。

# java - 将树作为子树添加到不同类型的树

> ID：10549211
> 
> 赞同：1
> 
> 时间：2012-05-11T09:56:56.333
> 
> 标签：java, eclipse, eclipse-plugin

我在具有不同类型的父节点或节点的 Eclipse 插件中有树**T结构。**现在我想添加一棵树**T1**，它有一个不同类型的节点。那么，完成这项任务的清晰而稳健的方法是什么，因为假设它会得到很多负载，所以方法应该是非常有远见的？

**我的方法：**由于我对此很陌生，因此我认为我必须（无论如何）管理与**T**相同类型的**T1**`getParent()`的方法，因为这将是树**T**的最下层子树。

 ******（我想问这个问题是为了讨论的观点。我只是想澄清我的观点和方法。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:05:58.567

制作/使用所有其他树实现/扩展的树接口或抽象类，然后创建该接口或抽象类的列表。例如：

```
ArrayList<TreeInterface> treeArray = new ArrayList<TreeInterface>(); 
```

这个接口/抽象类应该有所有的方法，getter 和 setter，你以后需要访问你想要的数据。

如果你不能这样做，我认为你只能制作一个 Object 数组来满足这个......******

# mysql - 播放框架 - 在 mySql 中上传文件

> ID：10549216
> 
> 赞同：3
> 
> 时间：2012-05-11T09:57:11.807
> 
> 标签：mysql, file-upload, playframework, playframework-2.0

在 play 2.0 中在 mySql db 中上传文件的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:55:00.360

在数据库或上传文件夹中上传文件，然后在数据库中保存链接？

> 我会去将参考保存在数据库中并将图像上传到您的网络服务器上的某个位置。或者，如果您坚持将图像保存在数据库中，请将其保存为拇指，这将使您的数据库大小保持可维护性并且您的数据库大小可以接受。在我看来，数据库是用于数据而不是像图像这样的资产。

上传文件记录在案：[http ://www.playframework.org/documentation/2.0/JavaFileUpload](http://www.playframework.org/documentation/2.0/JavaFileUpload)

我是怎么做到的：

**看法**

在视图中，确保你有正确的`enctype`（这个是基于 twitter bootstrap 的）

```
@helper.form(controllers.orders.routes.Task.save, 'class -> "form-horizontal", 'enctype -> "multipart/form-data") 
```

文件输入：

```
@inputFile(taskForm("file1"), '_display -> "Attachment", '_label -> Messages("file")) 
```

**在您的控制器中**

```
// first i get the id of the task where I want to attach my files to
MultipartFormData body = request().body().asMultipartFormData();
List<FilePart> resourceFiles = body.getFiles(); 
```

然后遍历附件并将它们上传到上传文件夹：

```
for (int i = 0; i < resourceFiles.size(); i++) {
    FilePart picture = body.getFile(resourceFiles.get(i).getKey());
    String fileName = picture.getFilename();
    File file = picture.getFile();

    File destinationFile = new File(play.Play.application().path().toString() + "//public//uploads//"
        + newTask.getCode() + "//" + i + "_" + fileName);
    System.out.println(play.Play.application().path());
    System.out.println(file.getAbsolutePath());

    try {
    FileUtils.copyFile(file, destinationFile);

    TaskDocument taskDocument = new TaskDocument(newTask.description, "/assets/uploads/"
        + newTask.getCode() + "/" + i + "_" + fileName, loggedInUsr, newTask);
    taskDocument.save();
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
} 
```

**结果**

上面的代码导致创建一个文件夹并将文件放置在该文件夹中。例子：

文件夹：T000345

*   0_orange.png
*   1_apple.png
*   2_pear.png

**编辑：2012-06-23**

如果您收到有关 commons 包的错误，则必须将其包含在文件中`Build.scala`：

```
val appDependencies = Seq(
// Add your project dependencies here,
"mysql" % "mysql-connector-java" % "5.1.18",
"org.specs2" %% "specs2" % "1.9" % "test",
"commons-io" % "commons-io" % "2.2") // at least this one must be present! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-19T19:39:25.070

另一种方式，您可以在数据库中存储对照片的引用。

## 鉴于：

```
<form action="@routes.Application.index" method="POST" enctype="multipart/form-data">
           Photo<input type="file" name="photo"> <br>
             <input type="submit" value="Submit">    
</form> 
```

在控制器中：

```
MultipartFormData body = request().body().asMultipartFormData();
            FilePart photo = body.getFile("photo");
            if (photo != null) {
                String fileName = photo.getFilename();
                File file = photo.getFile();
                File newFile = new File(play.Play.application().path().toString() + "//public//uploads//"+ "_" + fileName);
                file.renameTo(newFile); //here you are moving photo to new directory          
                System.out.println(newFile.getPath()); //this path you can store in database
            }
} 
```

# android - 如何在android上禁用频率缩放？

> ID：10549221
> 
> 赞同：1
> 
> 时间：2012-05-11T09:57:38.677
> 
> 标签：android, cpu, scaling, frequency

在android上运行程序时如何检测频率？我想使用 top -m 命令检测 CPU 使用率，但是由于默认情况下 android 内核会进行频率缩放，恐怕“top -m”命令的结果不正确。所以我想禁用android的频率缩放。这个问题有什么解决办法吗？

欢迎任何意见！

# eclipse - 文件刷新后在编辑器后面更新模型

> ID：10549223
> 
> 赞同：0
> 
> 时间：2012-05-11T09:57:47.753
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在为 Eclipse 编写多选项卡编辑器。这个插件有几个选项卡，最后一个是文本源——类似于 PDE 中的 plugin.xml 编辑器。

它背后有一些模型，用于在选项卡中显示一些信息，这些信息基于文本源中的数据。用户可以编辑源，当他/她切换到另一个选项卡时，模型会更新。这很好用。

问题是当有人在外部编辑器中编辑源文件时。然后刷新项目，模型也应该刷新。但我怎样才能做到这一点？

我尝试使用`addResourceChangeListener`，它通过预刷新事件通知我，但它不包含我的文件是否要更新的信息（例如，如果有人试图刷新整个项目，则只有项目资源）。

我的另一个想法是在预刷新事件发生时添加文档侦听器，并在更改后处理程序中将其删除。但是这里的问题是，如果文件未更改且未更新，则不会发送更改后事件，因此我将保留不必要的文档侦听器，该侦听器将被告知用户在最后一个（源）选项卡中所做的所有编辑.

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:16:14.803

刷新，当它发现更改的文件时，将报告它们*已更改*。您可能想要收听 POST_CHANGE 通知，如[http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html](http://www.eclipse.org/articles/Article-Resource-deltas/resource-deltas.html)所示。

# sql - 是否可以编写一个 SQLite 查询以递归方式获取作为根节点的子项的所有项

> ID：10549225
> 
> 赞同：8
> 
> 时间：2012-05-11T09:58:01.060
> 
> 标签：sql, sqlite

我有 2 张桌子。 `items`和`itemItems`

`itemItems`描述了 之间的多对多关系`items`。即一个成员`items`可以有很多孩子，他们可以有很多孩子，而这些孩子又可以有很多孩子等等。

**物品：**

```
itemID |  more stuff ......
1         ...    
2         ...
3         ...
4         ... 
```

**项目项目：**

```
parentItemID |  childItemID  
1               2 
1               3
2               4 
```

我想编写一个查询，该查询将递归地获取一个根节点下的所有子节点。

我相信这可以通过称为递归连接的方法实现，但我发现这个概念非常令人困惑......（类似于[这个](https://stackoverflow.com/questions/1757260/simplest-way-to-do-a-recursive-self-join-in-sql-server)问题，但使用 sqlite 不是 sql server 并且多对多不是一对多）

我可以通过执行以下操作获得第一级（即一个项目下的所有孩子）

```
SELECT * 
FROM items 
INNER JOIN itemItems
ON items.itemID = itemItems.childItemID
WHERE itemItems.parentItemID = 1 
```

我如何扩展它以递归地获取所有孩子的孩子等......？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-07T14:58:20.013

我刚刚得到了一个类似的查询来使用该`with recursive`语法。一般形式为：

```
with recursive tc( i )
  as ( select [... initial-query ...]
        union [... recursive-part (include tc) ...]
     )
 select * from tc; 
```

在我的案例中，关键是确保 tc 列在递归部分中。此外，这个最终选择只是为了显示传递闭包的全部内容，真正的应该选择您需要的行。

我认为这个食谱将适用于你的情况，如下所示。我没有对此进行测试，我只是从我的查询中复制/粘贴并替换为您的表名。它确实对我有用，但我可能翻译错了。我也不太确定效率等，这只是我必须工作的事情。

```
with recursive tc( i )
  as ( select childItemID from itemItems where parentItemID = 1
        union select childItemID from itemItems, tc
               where itemItems.parentItemID = tc.i
     )
  select * from item where itemID in tc; 
```

注意：这适用于我的版本 3.8.3.1，但不适用于 3.7.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T05:51:34.477

上面的递归版本需要ANSI SQL:1999，当时通用DBMS都支持，但也有ANSI SQL-92方法可以实现*有界*递归。这种方法可以任意扩展。

下面的示例最多支持 7 个级别。如果您想要更多，请添加更多。

```
SELECT DISTINCT
    I.*
FROM
    item I INNER JOIN (
        SELECT 
            I1.itemID as Level1,
            I2.itemID as Level2,
            I3.itemID as Level3,
            I4.itemID as Level4,
            I5.itemID as Level5,
            I6.itemID as Level6,
            I7.itemID as Level7
        FROM 
            item I1 LEFT JOIN 
            item I2 ON EXISTS (SELECT NULL FROM itemItems II1 WHERE II1.parentItemID = I1.itemID AND I2.itemID = II1.childItemID) LEFT JOIN
            item I3 ON EXISTS (SELECT NULL FROM itemItems II2 WHERE II2.parentItemID = I2.itemID AND I3.itemID = II2.childItemID) LEFT JOIN
            item I4 ON EXISTS (SELECT NULL FROM itemItems II3 WHERE II3.parentItemID = I3.itemID AND I4.itemID = II3.childItemID) LEFT JOIN
            item I5 ON EXISTS (SELECT NULL FROM itemItems II4 WHERE II4.parentItemID = I4.itemID AND I5.itemID = II4.childItemID) LEFT JOIN
            item I6 ON EXISTS (SELECT NULL FROM itemItems II5 WHERE II5.parentItemID = I5.itemID AND I6.itemID = II5.childItemID) LEFT JOIN
            item I7 ON EXISTS (SELECT NULL FROM itemItems II6 WHERE II6.parentItemID = I6.itemID AND I7.itemID = II6.childItemID)
        WHERE
            I1.itemID = 1    -- root node condition
    ) D ON I.itemID = D.Level1 OR I.itemID = D.Level2 OR I.itemID = D.Level3 OR I.itemID = D.Level4 OR I.itemID = D.Level5 OR I.itemID = D.Level6 Or I.itemID = D.Level7 
```

# objective-c - 如何获取 NSMutableArray 中的内容？

> ID：10549232
> 
> 赞同：0
> 
> 时间：2012-05-11T09:58:22.480
> 
> 标签：objective-c, nsmutablearray

我是学习目标c的初学者。我想让我的 iphone 应用程序做这件事：

*   如果触摸A区，做XXXXX
*   如果触摸 B 区，做 YYYYY
*   如果同时触摸A&B区域，做ZZZZZZ

我认为我需要做的第一件事是保存每次触摸的坐标，然后检查正确区域中的所有坐标。

我使用 NSMutableArray 保存坐标，但我不知道如何获取数组中的内容。

这是我的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    NSMutableArray *Xarray;
    NSMutableArray *Yarray;

    Xarray=[NSMutableArray arrayWithCapacity:[touches count]];
    Yarray=[NSMutableArray arrayWithCapacity:[touches count]];

    for(UITouch *touch in touches)
    {   
        CGPoint pstart=[touch locationInView:self.view];
        [Xarray addObject:[NSNumber numberWithFloat:pstart.x]];
        [Yarray addObject:[NSNumber numberWithFloat:pstart.y]];
    }    
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:05:38.053

`NSMutableArray`是 的子类`NSArray`，其文档位于[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/cl/NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/cl/NSArray)其中例如，您会发现访问数组中元素的方法称为`objectAtIndex:`. 因此，例如，`Xarray objectAtIndex:0`获取数组中的第一个元素。还有一些方法可以一次提取多个元素，迭代数组中的所有对象等。

对于您可能真正想要的应用程序`indexOfObjectPassingTest:`（测试将寻找给定区域内的位置）。

# android - 无法在 android 版本 2.2.6 中结束通话

> ID：10549234
> 
> 赞同：0
> 
> 时间：2012-05-11T09:58:30.623
> 
> 标签：android, telephonymanager, getmethod

我尝试使用以下方法结束通话

```
private void getTeleService(Context context) {
    TelephonyManager tm = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);
    try {

        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tm);
        telephonyService.silenceRinger();
        telephonyService.endCall();
    } catch (Exception e) {
        e.printStackTrace();
        Log.e("","FATAL ERROR: could not connect to telephony subsystem");
        Log.e("", "Exception object: " + e);
    }
} 
```

这适用于 android 2.2 版但无法在 android 2.2.6 版中结束通话我不知道这段代码有什么问题。

我得到了解决方案，我只是注释掉了这一行 telephonyService.silenceRinger(); 因为android 2.3以上版本不支持此方法

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:03:07.730

Android 2.2 后改了，这些技巧不再奏效

# java - 如何在 servlet 中使用依赖注入？

> ID：10549241
> 
> 赞同：11
> 
> 时间：2012-05-11T09:59:05.870
> 
> 标签：java, servlets, dependency-injection

如何将对象注入到 servlet？

我的意思是，我不能使用构造函数 DI，因为 servlet 是由 servlets 容器实例化的。
而且我也没有看到为 servlet 实现基于 setter 的 DI 的好方法。

我应该使用 servlet 侦听器吗？有没有最佳实践？

PS 我既没有 Spring 也没有 Guice 也没有任何其他 DI 框架，我对手动依赖注入很感兴趣。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-11T10:08:53.807

这在 Servlet 3.0 下是可能的。您注册一个[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html) ，它在应用程序启动之前以编程方式使用 ServletContext 的[addServlet(String, Servlet)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#addServlet%28java.lang.String,%20javax.servlet.Servlet%29)方法注册 Servlet 实例。由于您自己实例化了 Servlet 实例，因此您可以为它们提供适当的构造函数并注入依赖项。

不久前我创建[了一个示例](https://github.com/seanjreilly/httpServletExample)来说明基本技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:12:17.730

您可以使用 JNDI（Java 命名和目录接口）并`@Resource`注入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:06:13.240

您可以使用由某些 IOC 容器（Spring、Guice）创建/管理的服务

您可以创建一个 ContextAware 实现并在需要时从 Servlet 中提取 bean

# java - c3p0连接池属性没有设置？

> ID：10549243
> 
> 赞同：0
> 
> 时间：2012-05-11T09:59:13.647
> 
> 标签：java, spring, hibernate, c3p0

我正在使用 spring/hibernate 应用程序并配置了 c3p0 连接池。c3p0 连接池已启用。我验证了我的日志。

```
10 May 2012 14:55:56  INFO AbstractPoolBackedDataSource:462 - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource 
```

但问题是，我以编程方式获取配置的数据源并试图查看它的属性，但是我在配置文件中设置的任何属性都没有设置。请在下面找到配置和调试值。

```
<prop key="hibernate.connection.pool.size">20</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.format_sql">true</prop>
                <prop key="hibernate.use_sql_comments">true</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.c3p0.min_size">5</prop>
                <prop key="hibernate.c3p0.max_size">20</prop>
                <prop key="hibernate.c3p0.timeout">300</prop>
                <prop key="hibernate.c3p0.max_statements">50</prop>
                <prop key="hibernate.c3p0.idle_test_period">3000</prop>
                <prop key="hibernate.jdbc.batch_size">50</prop>
                <prop key="hibernate.c3p0.preferredTestQuery">SELECT GETDATE()</prop>
                 <prop key="hibernate.c3p0.testConnectionOnCheckout">true</prop> 
```

调试值：

![在此处输入图像描述](../Images/78c456fb928dab591a38d11fcd6fb8c6.png)

我得到如下数据源。

```
 WebApplicationContext context = WebApplicationContextUtils.getRequiredWebApplicationContext(getServletContext());
.......getBean("datasourceId");
.................. 
```

在属性中我设置了首选测试查询。这在图像中也是空的。

我在这里错过任何东西吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:10:56.297

我使用它如下

```
<bean id="sessionFactory"  class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="pooledConn"/>
    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect" >${HIBERNATE.DIALECT}</prop>
        <!--  <prop key="hibernate.show_sql">${HIBERNATE.SHOW_SQL}</prop> -->
          <prop key="hibernate.show_sql">true</prop>
         <prop key="hibernate.hbm2ddl.auto">${HIBERNATE.hBM2DDL.AUTO}</prop>   
       </props>
    </property> 
```

它对我来说绝对完美，您能否粘贴您的配置以获得更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T09:45:48.777

我遇到了同样的问题，需要时间来找出解决方案。

我使用 Hibernate 4.0.1 和 mysql 5.1（没有 spring 框架），我遇到了这个问题。首先确保您正确配置了 c3p0 jar，这是必不可少的。

我在 hibernate.cfg.xml 中使用了这些属性

```
<property name="hibernate.c3p0.validate">true</property>
<property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property>
<property name="hibernate.c3p0.min_size">5</property>
<property name="hibernate.c3p0.max_size">20</property>
<property name="hibernate.c3p0.max_statements">50</property>
<property name="hibernate.c3p0.preferredTestQuery">SELECT 1;</property>
<property name="hibernate.c3p0.testConnectionOnCheckout">true</property>
<property name="hibernate.c3p0.idle_test_period">10</property>
<property name="hibernate.c3p0.acquireRetryAttempts">5</property>
<property name="hibernate.c3p0.acquireRetryDelay">200</property>
<property name="hibernate.c3p0.timeout">40</property> 
```

但这没有用，因为 C3p0 仍然采用默认属性，而不是我在 hibernate.cfg.xml 中设置的属性，您可以在日志中检查它。所以，我在很多网站上搜索了正确的解决方案，最后我想出了这个。删除 cfg.xml 中的 C3p0 属性并在根路径（以及 cfg.xml）中创建 c3p0-config.xml 并按如下方式设置属性。

```
<c3p0-config>
<default-config> 
<property name="automaticTestTable">con_test</property>
<property name="checkoutTimeout">40</property> 
<property name="idleConnectionTestPeriod">10</property> 
<property name="initialPoolSize">10</property>
<property name="maxPoolSize">20</property> 
<property name="minPoolSize">5</property> 
<property name="maxStatements">50</property>
<property name="preferredTestQuery">SELECT 1;</property>
<property name="acquireRetryAttempts">5</property>
<property name="acquireRetryDelay">200</property>
<property name="maxIdleTime">30</property>
</default-config>
</c3p0-config> 
```

但是如果你运行，ORM 使用 jdbc 连接而不是 C3p0 连接池，因为我们应该在 hibernate.cfg.xml 中添加这些属性

```
<property name="hibernate.c3p0.validate">true</property>

<property name="hibernate.connection.provider_class">org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider</property> 
```

现在一切正常（至少对我来说很好）并且问题已解决。

检查以下内容以获取参考。

[http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing](http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing)

[https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool](https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:07:41.080

尝试将以下内容添加到您的配置文件中：

```
<prop key="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</prop> 
```

# c - 如何在 C 中调整 OpenCV 中的对比度？

> ID：10549245
> 
> 赞同：8
> 
> 时间：2012-05-11T09:59:28.427
> 
> 标签：c, opencv, contrast

我只是想调整灰度图像中的对比度/亮度，以使用 C 中的 Opencv 突出显示该图像中的白色。我该怎么做？是否有任何功能可以在 opencv 中完成此任务？

原图：

![在此处输入图像描述](../Images/35602f3f15dd82cb7870b371586ebf96.png)

修改后的图像：

![在此处输入图像描述](../Images/d97cafbd01a0aedcca570b3dbf3ab38c.png)

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T13:01:48.553

我认为您可以通过两种方式在这里调整对比度：

1）**[直方图均衡：](http://en.wikipedia.org/wiki/Histogram_equalization)**

但是当我用你的图像尝试这个时，结果并不像你预期的那样。在下面检查：

![在此处输入图像描述](../Images/834784c6c3a7346598b2874d00321667.png)

2）**阈值**：

在这里，我将输入的每个像素值与任意值（我取的`127`）进行了比较。以下是在 opencv 中具有内置功能的逻辑。`But remember, output is Binary image, not grayscale as you did.`

```
If (input pixel value >= 127):
    ouput pixel value = 255
else:
    output pixel value = 0 
```

以下是我得到的结果：

![在此处输入图像描述](../Images/7404db6bae5db24c1ceb7a96a804652d.png)

为此，您可以使用**[阈值函数](http://opencv.itseez.com/modules/imgproc/doc/miscellaneous_transformations.html?highlight=cv2.threshold#threshold)**或**[比较函数](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?highlight=cv2.add#compare)**

3）**如果您必须将灰度图像作为输出，请执行以下操作**：

（代码在 OpenCV-Python 中，但对于每个函数，相应的 C 函数都可以在 opencv.itseez.com 中获得）

```
for each pixel in image:
   if pixel value >= 127: add 'x' to pixel value.
   else : subtract 'x' from pixel value. 
```

（“x”是一个任意值。）因此，亮像素和暗像素之间的差异会增加。

```
img = cv2.imread('brain.jpg',0)

bigmask = cv2.compare(img,np.uint8([127]),cv2.CMP_GE)
smallmask = cv2.bitwise_not(bigmask)

x = np.uint8([90])
big = cv2.add(img,x,mask = bigmask)
small = cv2.subtract(img,x,mask = smallmask)
res = cv2.add(big,small) 
```

下面是得到的结果：

![在此处输入图像描述](../Images/566003084f8766b56e6d7f88dcd808f7.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-03T06:23:51.257

您还可以查看 OpenCV CLAHE 算法。它不是全局均衡直方图，而是将图像分割成图块并在局部均衡它们，然后将它们拼接在一起。这可以提供更好的结果。

在 OpenCV 3.0.0 中使用您的图像：

```
import cv2
inp = cv2.imread('inp.jpg',0)
clahe = cv2.createCLAHE(clipLimit=4.0, tileGridSize=(8,8))
res = clahe.apply(inp)
cv2.imwrite('res.jpg', res) 
```

给了一些很好的东西

[![在 CLAHE 之后](../Images/e7944b079dac47658c063b7e38726fac.png)](https://i.stack.imgur.com/VKCL0.jpg)

在这里阅读更多关于它的信息，虽然它不是很有帮助： [http ://docs.opencv.org/3.1.0/d5/daf/tutorial_py_histogram_equalization.html#gsc.tab=0](http://docs.opencv.org/3.1.0/d5/daf/tutorial_py_histogram_equalization.html#gsc.tab=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T15:57:47.087

虽然这篇文章有点陈旧：使用“cvAddWeighted()”怎么样？

它的作用是：

```
 dst = src1*alpha + src2*beta + gamma 
```

我从应用亮度和对比度中了解到，一个人想要做的是：

```
 dst = src*contrast + brightness; 
```

因此，如果

```
 src1  = input image
             src2  = any image of same type as src1
             alpha = contrast value
             beta  = 0.0
             gamma = brightness value
             dst   = resulting Image (must be of same type as src1) 
```

一个人应该完成这项任务，不是吗？

这个方法适用于我使用 CvMat* 图像

# qt - 如何在 PySide / PyQt / Qt 中重置模型和视图？

> ID：10549248
> 
> 赞同：0
> 
> 时间：2012-05-11T09:59:32.810
> 
> 标签：qt, pyqt, reset, pyside

添加和删​​除行非常简单，但是如果我想完全重置模型和视图呢？

在我的特定示例中，我在模型和视图中显示了一个数据集，并且模型中的整个数据集不时被丢弃，并在其位置上放置一个新数据集。我怎样才能最有效地做到这一点？

（可能值得指出我正在使用模型和代理模型和视图。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:10:49.297

[beginResetModel()](https://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#beginResetModel)和[endResetModel()](https://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#endResetModel)。

# sas - 第 5 和第 95 根胡须有凹痕？

> ID：10549250
> 
> 赞同：0
> 
> 时间：2012-05-11T09:59:37.307
> 
> 标签：sas

是否可以使用 proc sgplot 选择胡须值。因为似乎只有 25th 和 75th 可用于 SGPLOT。

也许有人知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:07:59.663

不可能添加非标准晶须，可能是因为统计学家不鼓励这样做。

他们不鼓励这样做，因为箱线图在四分位数方面有一个特定的定义。虽然偶尔会有变化（即，为了得到一个粗略的正态图），但通常人们希望在箱形图中看到四分位数。添加任意百分位数，即使是像您建议的那样有意义的百分位数，也可能会使观众感到困惑，而不是帮助。

试试这个可视化：基于您建议的百分位区间的销售贡献瀑布图：

```
data actualBinned; set sashelp.prdsale;
   keep actual;
run;
proc rank data=actualBinned out=actualBinned
     groups=100
     descending;
   var actual;
   ranks rank;
run;
data actualBinned; set actualBinned;
   if      rank < 5  then bin="00-05";
   else if rank < 25 then bin="05-25";
   else if rank < 50 then bin="25-50";
   else if rank < 75 then bin="50-75";
   else if rank < 95 then bin="75-95";
   else                   bin="95-100";
run;
proc sort data=actualBinned;
   by bin;
run;
proc sgplot data=actualBinned;
  waterfall category=bin response=actual;
run; 
```

我不是以相同宽度显示不同宽度的垃圾箱的忠实粉丝。我宁愿使用 20 个宽度为 5 的箱。有了这个警告，我可以看到经理如何发现这种可视化在特定环境中更有用。

顺便说一句，瀑布图在 9.3 中是实验性的。对于旧版本的 SAS，网上有几个食谱。

# ruby - Delayed_job，从延迟方法中发送邮件

> ID：10549256
> 
> 赞同：0
> 
> 时间：2012-05-11T10:00:06.220
> 
> 标签：ruby, ruby-on-rails-3, delayed-job

我有一个按预期运行的延迟方法**async_checkout_assist**，它被添加到表中并毫无问题地执行，并在执行后从表中删除，但是在该延迟方法中，如果 condition_is_true 但是当我添加邮件行时，我想发送一封邮件它不发送邮件：\

* * *

```
class ApplicationController < ActionController::Base

  async = ApplicationController.new #create new instance
  async.async_checkout_assist #call method

  def async_checkout_assist
    Mailer.delay.mailer_checkout_assist(@contact_name, @contact_email, @contact_tel)
  end

  end
  handle_asynchronously :async_checkout_assist, :run_at => Proc.new { 10.seconds.from_now }

end 
```

* * *

**更新：**

延迟方法（async_checkout_assist）被工人添加并运行

```
SQL (14.1ms)  INSERT INTO `delayed_jobs` (`attempts`, `created_at`, `failed_at`, `handler`, `last_error`, `locked_at`, `locked_by`, `priority`, `queue`, `run_at`, `updated_at`) VALUES (0, '2012-05-11 10:14:27', NULL, '--- !ruby/object:Delayed::PerformableMethod\nobject: !ruby/object:ApplicationController\n _routes: !!null \n _action_has_layout: true\n _headers:\n Content-Type: text/html\n _status: 200\n _request: !!null \n _response: !!null \nmethod_name: :async_checkout_assist_without_delay\nargs: []\n', NULL, NULL, NULL, 0, NULL, '2012-05-11 10:14:37', '2012-05-11 10:14:27')
   (17.2ms)  COMMIT 
```

```
Marais-Mac-mini:cybercellar.com_heroku davidmuller$ rake jobs:work
[Worker(host:Marais-Mac-mini.local pid:886)] Starting job worker
[Worker(host:Marais-Mac-mini.local pid:886)] ApplicationController#async_checkout_assist_without_delay completed after 9.5160
[Worker(host:Marais-Mac-mini.local pid:886)] Class#mailer_checkout_assist completed after 7.3627
[Worker(host:Marais-Mac-mini.local pid:886)] 2 jobs processed at 0.0923 j/s, 0 failed ... 
```

**它现在适用于两者**

```
Mailer.delay.mailer_checkout_assist(@contact_name, @contact_email, @contact_tel)
Mailer.mailer_checkout_assist(@contact_name, @contact_email, @contact_tel).deliver 
```

# regex - 正则表达式比可用文本获得更多结果

> ID：10549258
> 
> 赞同：1
> 
> 时间：2012-05-11T10:00:13.760
> 
> 标签：regex, perl

我有一个非常奇怪的问题：我在 html 网站上搜索 URL，并且只想要 url 的特定部分。在我的测试 html 页面中，链接只出现一次，但我得到的不是一个结果，而是大约 20...

这是我正在使用的正则表达式：

```
perl -ne 'm/http\:\/\myurl\.com\/somefile\.php.+\/afolder\/(.*)\.(rar|zip|tar|gz)/; print "$1.$2\n";' 
```

示例输入将是这样的：

```
<html><body><a href="http://myurl.com/somefile.php&x=foo?y=bla?z=sdf?path=/foo/bar/afolder/testfile.zip?more=arguments?and=evenmore">Somelinknme</a></body></html> 
```

这是一个非常简单的例子。所以实际上链接会出现在一个普通的网站上，内容围绕着......

我的结果应该是这样的：

```
testfile.zip 
```

但相反，我经常看到这条线......这是正则表达式的问题还是其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:03:51.603

是的，正则表达式是[贪婪](http://p3rl.org/retut#Matching-repetitions)的。

使用适当的 HTML 工具代替：[HTML::LinkExtor](http://p3rl.org/HTML%3a%3aLinkExtor)或[WWW::Mechanize 中的链接方法之一](http://p3rl.org/WWW%3a%3aMechanize#LINK-METHODS)，然后使用[URI](http://p3rl.org/URI)提取特定部分。

```
use 5.010;
use WWW::Mechanize qw();
use URI qw();
use URI::QueryParam qw();

my $w = WWW::Mechanize->new;
$w->get('file:///tmp/so10549258.html');
for my $link ($w->links) {
    my $u = URI->new($link->url);
    # 'http://myurl.com/somefile.php?x=foo&y=bla&z=sdf&path=/foo/bar/afolder/testfile.zip&more=arguments&and=evenmore'
    say $u->query_param('path');
    # '/foo/bar/afolder/testfile.zip'
    $u = URI->new($u->query_param('path'));
    say (($u->path_segments)[-1]);
    # 'testfile.zip'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:10:53.830

链接后的文件中是否有 20 行？

你的问题是匹配的变量没有被重置。您第一次匹配您的链接，`$1`并`$2`获得它们的值。在以下几行中，正则表达式不匹配，但`$1`仍然`$2`具有旧值，**因此您应该仅在正则表达式匹配时才打印**，而不是每次都打印。

从[perlre](http://perldoc.perl.org/perlre.html)，请参阅*捕获组部分*

> 注意：Perl 中失败的匹配不会重置匹配变量，这样可以更轻松地编写代码来测试一系列更具体的情况并记住最佳匹配。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-11T10:30:28.280

这应该为您的示例输入和输出解决问题。

```
$Str = '<html><body><a href="http://myurl.com/somefile.php&x=foo?y=bla?z=sdf?path=/foo/bar/afolder/testfile.zip?more=arguments?and=evenmore">Somelinknme</a></body></html>';

@Matches = ($Str =~ m#path=.+/(\w+\.\w+)#g);
print @Matches ; 
```

# c# - VS 2010 无法设置断点

> ID：10549259
> 
> 赞同：0
> 
> 时间：2012-05-11T10:00:17.400
> 
> 标签：c#, visual-studio-2010, debugging, breakpoints

我启动 VS 2010。单击创建新项目。键入以下代码。按 f5。运行良好。但是当我尝试通过 F9 或右键单击一行代码并选择 Breakpoint -> Insert Breakpoint 设置断点时，没有任何反应。

项目属性设置为调试。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SetBreakPoints
{
    class Program
    {
        static void Main(string[] args)
        {
            int a = 7;
            int b = 5;
            a = a - b;
            b = b + a;
            a = b - a;
            Console.WriteLine("Value of a is {0} and value of b is {1}", a, b);
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:34:27.393

请重置 VS 2010 设置。

要重置 VS 2010 设置，请执行以下步骤：

在工具菜单上，单击导入和导出设置。

在欢迎使用导入和导出设置向导页面上，单击重置所有设置，然后单击下一步。

如果要保存当前设置组合，请单击是，保存我的当前设置，指定文件名，然后单击下一步。

——或者——</p>

如果要删除当前设置组合，请选择否，只需重置设置，覆盖我当前的设置，然后单击下一步。此选项不会删除默认设置，下次使用向导时仍可使用这些设置。

在您要重置到哪个设置集合中，从列表中选择一个设置集合。

单击完成。

重置完成页面会提醒您重置期间遇到的任何问题。

现在关闭 VS 2010 并重新打开解决方案并在框中选择“常规开发设置”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:06:57.080

您似乎在 VS 2010 中打开了一个现有项目，该项目是在 Visual Studio 2005/2008 的早期版本中创建的。

如果您的加载项是针对 4.0 之前的 .Net 框架版本构建的，则存在一个已知问题，即您不会遇到断点。对我来说，更改为 4.0 解决了这个问题。

[如何解决问题](https://connect.microsoft.com/VisualStudio/feedback/details/650694/vs-2010-sp1-breaks-add-in-debugging-targetting-net-framework-2-0-rather-than-net-framework-4-0#details)

要尝试的另一件事是`devenv`使用参数从命令行运行，`/log vslog.xml`然后退出。检查文件`<ApplicationData>\Roaming\Microsoft\VisualStudio\<version>\vslog.xml`。这可能会告诉您加载加载项时存在其他问题，这意味着 dll 未加载。

# tsql - 如何在不存在的 SQL 查询中使用参数？

> ID：10549260
> 
> 赞同：1
> 
> 时间：2012-05-11T10:00:22.700
> 
> 标签：tsql, sql-server-2005, parameters

如何更改以下查询，以便能够参数化`SparePartNames`？

它返回并非所有强制备件都已更改的所有维修 ID，即至少缺少一个零件。

请注意，备件的数量将来可能不仅名称会发生​​变化。是否可以不使用带有动态 SQL 的存储过程？如果不是，这个 SP 会是什么样子？

**编辑**：请注意，我不需要知道如何将列表/数组作为参数传递，这是在 SO 上被问到的无数时间。我也已经有了一个`Split`表值函数。我只是想知道如何重写查询以能够加入（或其他）强制性部分列表，以便找到**至少**缺少一个部分的所有记录。那么是否可以使用 varchar 参数`'1264-3212,1254-2975'`而不是列表`NOT EXISTS`？如果一开始不清楚，很抱歉造成混乱。

```
SELECT  d.idData
FROM    tabData d
INNER JOIN modModel AS m ON d.fiModel = m.idModel 
WHERE  (m.ModelName = 'MT27I') 
AND (d.fiMaxServiceLevel >= 2) 
AND (d.Manufacture_Date < '20120511') 
AND (NOT EXISTS
      (SELECT NULL
        FROM  tabDataDetail AS td 
        INNER JOIN tabSparePart AS sp ON sp.idSparePart = td.fiSparePart
        WHERE (td.fiData = d.idData) 
        AND (sp.SparePartName = '1264-3212'))
    OR (NOT EXISTS
      (SELECT NULL
        FROM  tabDataDetail AS td 
        INNER JOIN tabSparePart AS sp ON sp.idSparePart = td.fiSparePart
        WHERE (td.fiData = d.idData) 
        AND (sp.SparePartName = '1254-2975'))
    )
) 
```

不幸的是，我不知道如何`sp.SparePartName IN/NOT IN(@sparePartNames)`在这里使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:27:32.497

一种方法是创建一个函数来拆分分隔的字符串：

```
CREATE FUNCTION [dbo].[Split] 
(
    @Delimiter char(1), 
    @StringToSplit varchar(512)
)
RETURNS table
AS
RETURN 
(
    WITH Pieces(pieceNumber, startIndex, delimiterIndex) 
    AS 
    (
        SELECT 1, 1, CHARINDEX(@Delimiter, @StringToSplit)
        UNION ALL
        SELECT pieceNumber + 1, delimiterIndex + 1, CHARINDEX(@Delimiter, @StringToSplit, delimiterIndex + 1)
        FROM Pieces
        WHERE delimiterIndex > 0
    )
    SELECT 
        SUBSTRING(@StringToSplit, startIndex, CASE WHEN delimiterIndex > 0 THEN delimiterIndex - startIndex ELSE 512 END) AS Value
    FROM Pieces
) 
```

用备件名称填充表变量：

```
DECLARE @SpareParts TABLE
(
    SparePartName varchar(50) PRIMARY KEY CLUSTERED
);

INSERT INTO @SpareParts
SELECT Value FROM dbo.Split(',', '1264-3212,1254-2975'); 
```

然后加入表变量：

```
SELECT  d.idData
FROM    tabData d
INNER JOIN modModel AS m ON d.fiModel = m.idModel 
WHERE  (m.ModelName = 'MT27I') 
AND (d.fiMaxServiceLevel >= 2) 
AND (d.Manufacture_Date < '20120511') 
AND EXISTS (
        SELECT 1
        FROM  tabDataDetail AS td 
        INNER JOIN tabSparePart AS sp ON sp.idSparePart = td.fiSparePart
        LEFT JOIN @SpareParts AS s ON s.SparePartName = sp.SparePartName
        WHERE td.fiData = d.idData
            AND s.SparePartName IS NULL
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:57:28.883

假设存在（或将存在）强制性备件的表或视图，存在的列表可以替换为 SparePartName 上的 tabDataDetail / tabSparePart 对的左连接；不匹配使用`td.fiSparePart is null`.

```
; with mandatorySpareParts (SparePartName) as (
  select '1264-3212'
  union all
  select '1254-2975'
)
SELECT  d.idData
FROM    tabData d
INNER JOIN modModel AS m ON d.fiModel = m.idModel 
WHERE  (m.ModelName = 'MT27I') 
AND (d.fiMaxServiceLevel >= 2) 
AND (d.Manufacture_Date < '20120511') 
AND exists
(
  SELECT null
    from mandatorySpareParts msp
    left join ( tabDataDetail AS td 
                INNER JOIN tabSparePart AS sp 
                   ON sp.idSparePart = td.fiSparePart 
                  AND td.fiData = d.idData
              )
      ON msp.SparePartName = sp.SparePartName
   WHERE td.fiSparePart is null
) 
```

部分名称应替换为它们的 id，这将简化左连接并加快查询速度。

编辑：我错误地在 where 子句中留下了对 td 的过滤，这使左连接无效。它现在位于它所属的 ON 子句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:27:37.347

使用表变量并加入。

# wcf - WCF ProtocolException 接收 html

> ID：10549261
> 
> 赞同：3
> 
> 时间：2012-05-11T10:00:24.417
> 
> 标签：wcf

从 WCF 到 DotNet 访问方法时出现以下错误

内容类型 text/html；响应消息的 charset=utf-8 与绑定的内容类型不匹配 (text/xml; charset=utf-8)。如果使用自定义编码器，请确保正确实现 IsContentTypeSupported 方法。响应的前 1024 个字节是：' 运行时错误正文 {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} p {font-family:"Verdana";字体重量：正常；颜色：黑色；边距顶部：-5px} b {字体系列：“Verdana”；字体重量：粗体；颜色：黑色；边距顶部：-5px} H1 {字体系列： “Verdana”；字体粗细：正常；字体大小：18pt；颜色：红色 } H2 { 字体系列：“Verdana”；字体粗细：正常；字体大小：14pt；颜色：栗色 } pre {font-家庭：“Lucida 控制台”；字体大小：。9em} .marker {字体粗细：粗体；颜色：黑色；文本装饰：无；} .version {颜色：灰色；} .error {margin-bottom：10px；} .expandable { 文本装饰：下划线；字体粗细：粗体；颜色：海军蓝；光标：手；}

```
<body bgcolor="white">

        <span><H1>Server Error in '/ORSXMLWCFServiceNew' Application.<hr width=100% size=1 color=silver></H1>

        <h2> <i>Runtime Error</i> </'. 
```

请帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:29:23.083

我找到了一种获得完整响应的方法，而不仅仅是无用的 1024 字节......

```
using (var client = new Service1Client())
{
    try
    {
        Console.WriteLine(client.DoWork());
    }
    catch (ProtocolException e)
    {
        var webException = e.InnerException as WebException;

        var responseString = webException.ExtractResponseString();

        if (string.IsNullOrEmpty(responseText))
            Console.WriteLine(e);
        else
            Console.WriteLine(responseString);
    }
    catch (Exception e)
    {
        Console.WriteLine(e);
    }
} 
```

使用以下辅助方法的地方

```
public static string ExtractResponseString(this WebException webException)
{
    if (webException == null || webException.Response == null)
        return null;

    var responseStream = webException.Response.GetResponseStream() as MemoryStream;

    if (responseStream == null)
        return null;

    var responseBytes = responseStream.ToArray();

    var responseString = Encoding.UTF8.GetString(responseBytes);
    return responseString;
} 
```

有关更多详细信息，请参阅我的博客[http://mnaoumov.wordpress.com/2012/09/28/wcf-protocolexception/](http://mnaoumov.wordpress.com/2012/09/28/wcf-protocolexception/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:12:19.357

这是由您的 WCF 服务上的错误引起的，修复它的最佳方法（在检查您的代码是否有任何明显的内容之后）是在 WCF 服务上进行一些错误日志记录并检查日志中的任何异常。

这些可能会有所帮助：

[将日志记录添加到 WCF](http://msdn.microsoft.com/en-us/library/ms730064.aspx)

[创建日志记录类](https://stackoverflow.com/questions/9569547/logging-errors-in-wcf-nothing-being-stored-in-log-file-when-exception-is-being)

# maven - mvn 编译器：编译有效，mvn 编译无效

> ID：10549263
> 
> 赞同：7
> 
> 时间：2012-05-11T10:00:28.077
> 
> 标签：maven

我有一个带有 maven pom.xml 的项目

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Minimal-J</groupId>
    <artifactId>Minimal-J</artifactId>
    <version>0.1-SNAPSHOT</version>
    <name>Minimal-J</name>
    <dependencies>
        <dependency>
            <groupId>org.apache.derby</groupId>
            <artifactId>derby</artifactId>
            <version>10.8.2.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.derby</groupId>
            <artifactId>derbyclient</artifactId>
            <version>10.8.2.2</version>
        </dependency>
        <dependency>
            <groupId>com.vaadin</groupId>
            <artifactId>vaadin</artifactId>
            <version>6.7.6</version>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-core</artifactId>
            <version>3.4.0</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.miglayout</groupId>
            <artifactId>miglayout</artifactId>
            <version>3.7.4</version>
        </dependency>
        <dependency>
            <groupId>commons-dbutils</groupId>
            <artifactId>commons-dbutils</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.json</groupId>
            <artifactId>json</artifactId>
            <version>20090211</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-dev</artifactId>
            <version>2.3.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <packaging>pom</packaging>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
</project> 
```

如果我执行

> mvn 编译器：编译

我的所有 189 个 Java 类都已编译

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Minimal-J 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-compiler-plugin:2.4:compile (default-cli) @ Minimal-J ---
[INFO] Compiling 189 source files to C:\projects\open-ech\workspace\minimal-j\MinimalJ\target\classes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.386s
[INFO] Finished at: Fri May 11 11:50:54 CEST 2012
[INFO] Final Memory: 13M/37M
[INFO] ------------------------------------------------------------------------ 
```

如果我只是输入

> mvn 编译

似乎什么都没做：

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Minimal-J 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.120s
[INFO] Finished at: Fri May 11 11:53:36 CEST 2012
[INFO] Final Memory: 1M/15M
[INFO] ------------------------------------------------------------------------ 
```

在另一个项目中，一切正常。

我可能在哪里配置了错误的东西来触发这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T10:59:17.243

是因为`pom`包装。通过调用`mvn compiler:compile`您在 Maven 的默认生命周期之外运行`compile`目标，并且基本上将源代码编译为`src/main/java`. 并且通过`mvn compile`您将生命周期运行到`compile`各个阶段，并且在每个阶段执行的实际目标取决于项目的包装类型。`pom`-type 项目在阶段中什么都不做`compile`，因为 - 事实上 - 没有什么可以用 POM 编译。

我想您的意图是进行`jar`包装和更改，这应该会有所帮助。

# r - 使用 for 循环在 df 中选择列之间的相关性

> ID：10549268
> 
> 赞同：1
> 
> 时间：2012-05-11T10:00:41.930
> 
> 标签：r, for-loop, dataframe, correlation

我有一个`df`包含 8 列的数据框 ( )。我想使用`for`循环来计算选择列的 Pearson 相关性，方法如下：

```
cor1=cor(df[,1], df[,2])
cor2=cor(df[,3], df[,4]) 
```

等等。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:47:41.083

最简单的就是计算相关矩阵，然后你可以根据需要对其进行索引：

```
df <- data.frame(rnorm(10),rnorm(10),rnorm(10))
corMat <- cor(df) 
```

例如，变量 1 和 2 之间的相关性：

```
corMat[1,2] 
```

或者你真的需要在不同的对象中有特定的相关性吗？

# 编辑

这是您想要的 for 循环示例：

```
df <- data.frame(rnorm(10),rnorm(10),rnorm(10),rnorm(10))

for (i in seq(1,ncol(df),by=2))
{
    assign(paste("cor",i/2+0.5,sep=""),cor(df[,i],df[,i+1]))
} 
```

虽然效率很低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:20:57.107

您可以使用`apply`广义函数：

```
df<-data.frame(a=rnorm(10),b=rnorm(10),c1=rnorm(10),d=rnorm(10))
f<- function(x) {
  cc=x[1] #column index
  if (cc<ncol(df)){
    cor(x[-1],df[,cc+1]) #ignore 1st element [-1]
  }
}

apply(rbind(1:dim(df)[2], 2, f) #apply over columns after adding a column id numbers at the top row 
```

可能有一个 R 函数来获取应用函数中的列/行 ID？在这种情况下，我们不需要 rbind 列 ID。

# java - 删除绝对路径中的文件前缀，但前缀也是目录部分

> ID：10549269
> 
> 赞同：3
> 
> 时间：2012-05-11T10:00:44.997
> 
> 标签：java, string, trim

我想知道以下问题是否有任何好的解决方案：

假设我有一个带有文件绝对路径的字符串，并且该文件具有前缀“temp_”。我可以用 string.replaceFirst() 修剪前缀。

但如果我不走运，“temp_”也是该字符串中目录的一部分。如何确保只有最后一次出现会被修剪？

我只能想自己解析它，但想知道是否还有魔法可以更好地做到这一点？

更准确地说，例如：

```
C:\Dump\sol1\temp_results\temp_2012-04-core.pcap 
```

应该变成：

```
C:\Dump\sol1\temp_results\2012-04-core.pcap 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:03:53.123

如果使用`Path.getFileName()`，则仅返回文件的基本名称（即，它不包括任何父目录）。您可以使用它进行替换，然后使用其他 Path 函数（请参阅`getName()`、`subpath()`等）将其重新组合到另一个 Path 或单个字符串中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T10:05:27.053

如果你有它是一个 File id defo 使用@goldilocks 的方法。但是如果由于某种原因你只是将它作为一个字符串，那么我脑海中第一件事就是：

```
 String target = "temp_";

    String fullPath = "C:/Dump/sol1/temp_results/temp_2012-04-core.pcap";

    StringBuffer sb = new StringBuffer(fullPath);
    int end = fullPath.lastIndexOf(target) + target.length();

    System.out.println(sb.replace(fullPath.lastIndexOf(target), end, "")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:30:23.663

这只是另一个示例如何做到这一点。

将整个字符串分成三个部分。

```
1.substring till temp_ last occurence

2.last occuerence of temp_

3.substring after last occuerence of temp_ 
```

cancat 1+3 无论如何我推荐@goldilocks 解决方案

# java - 当 XPath 使用前兄弟轴时，我想以相反的顺序返回节点吗？如何 ？

> ID：10549270
> 
> 赞同：2
> 
> 时间：2012-05-11T10:00:58.967
> 
> 标签：java, xml, xpath, xml-parsing

给定以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE stock SYSTEM "new.dtd">
<stock>
    <book num="myBook1">
        <title>Lindsy Boxer</title>
        <author>James Patterson</author>
        <publisher>LittleBig</publisher>
        <price>18.21</price>
        <chapter>
            <title>Alex Cross Is Back - Chapter A</title>
            <paragraph>
                This is the <emph>first</emph> paragraph.
                <image file="alexCrossImage.gif"/>
                afetr image...
            </paragraph>
            <paragraph>
                This is the <emph>second</emph> paragraph.
                <image file="alexCrossImageAnother.gif"/>
                afetr image...
            </paragraph>
        </chapter>
        <chapter>
            <title>Along Came A Spider - Chapter B</title>
            <section>
                <title>Along Came A Spider - Chapter B - section 1</title>
                <paragraph>
                    This is the <emph>first</emph>paragraph for chapter TWO section ONE.
                    <image file="Chapter_B_firstParagraphImage.gif"/>
                    afetr image...
                </paragraph>
                <paragraph>
                    This is the <emph>second</emph> paragraph for chapter TWO section ONE.
                    <image file="Chapter_B_secondParagraphImage.gif"/>
                    afetr image...
                </paragraph>
            </section>
        </chapter>
        <chapter>
            <title>Chapter C</title>
            <paragraph>
                This chapter has no images and only one paragraph
            </paragraph>
        </chapter>
    </book>
    <book num="myBook2">
        <title>Jack Reacher Series</title>
        <author>Lee Child</author>
        <author>Jonny White</author>
        <publisher>Pocket</publisher>
        <price>5.99</price>
        <chapter>
            <title>Jack Reacher - Chapter ONE</title>
        </chapter>
        <chapter>
            <title>Jack Reacher - Chapter TWO</title>
            <paragraph>
                This is the <emph>second</emph> paragraph of SECOND book chapter TWO.
                <image file="Jack_Reacher_Picture_Top_Sniper_US_Army.gif"/>
                afetr image...
            </paragraph>
        </chapter>
    </book>
    <book num="myBook3">
        <title>Alex Cross - Double Cross</title>
        <author>James Patterson</author>
        <publisher>Spectra</publisher>
        <price>17.30</price>
        <chapter>
            <title>Alex Cross - Double Cross - Chapter A</title>
        </chapter>
    </book>
</stock> 
```

当我输入以下查询时：

```
Object myQuery= xpath.evaluate("stock/book/chapter[3]/preceding-sibling::chapter//title",doc,XPathConstants.NODESET); 
```

我得到的输出为：

```
<title>Alex Cross Is Back - Chapter A</title>
<title>Along Came A Spider - Chapter B</title>
<title>Along Came A Spider - Chapter B - section 1</title> 
```

**但我想要的是当我的 XPath 使用前兄弟轴时，我想以相反的顺序返回节点，即：**

```
 *  <title>Along Came A Spider - Chapter B</title>
         *  <title>Along Came A Spider - Chapter B - section 1</title>
         *  <title>Alex Cross Is Back - Chapter A</title> 
```

所以基本上，如您所见，Java 以混合顺序返回节点，按 XML 文件中节点的顺序，但我需要的是，当 XPath 使用前兄弟轴时，然后反向返回节点命令 。

这不是发生这种“行为”的唯一命令（返回混合节点）。

我的目标是解决这个问题，我试图改变`XPath's` `evalute`，但它仍然不起作用。

谁能给出一些指示/提示如何做到这一点？

附言

使用这段代码：

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        domFactory.setNamespaceAware(true); // never forget this!
        DocumentBuilder builder = domFactory.newDocumentBuilder();
        Document doc = builder.parse("new.xml");
        //create an XPath factory
        XPathFactory factory = XPathFactory.newInstance();
        //create an XPath Object
        XPath xpath = factory.newXPath();
        //***********************************************************//
        Object myQuery= xpath.evaluate("stock/book/chapter[3]/preceding-sibling::chapter//title",doc,XPathConstants.NODESET);
        System.out.println("The Results are:");
        NodeList nodes = (NodeList) myQuery;
        //print the output
        for (int i = 0; i < nodes.getLength(); i++) {
            System.out.println("i: " + i);
            System.out.println("*******");
            System.out.println(nodeToString(nodes.item(i)));
            System.out.println("*******");
        } 
```

我得到了上述结果（混合节点）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:57:00.870

您希望所选节点以不是其文档顺序的顺序返回。

**这在今天的 XPath 1.0 引擎中是不可能的**——它们都以文档顺序返回选定的节点。而且 XPath 1.0 没有办法指定任何特殊顺序。

因此，如果您使用的是 XPath 1.0（似乎是这种情况），您将不得不忍受这一点——例如，索引结果不是用增加的索引而是用减少的索引。

**在 XPath 2.0 中有*序列*，您可以编写 XPath 表达式并指定序列中的每个项目**。

或者（再次在 XPath 2.0 中）您可以只拥有：

```
reverse(yourExpression) 
```

这将产生相反的项目序列 - 产生的项目序列`yourExpression`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:12:09.340

事实上，这不是“混合”顺序。这只是XPath 执行的[广度优先搜索的结果。](http://en.wikipedia.org/wiki/Breadth-first_search)正如我所见，您需要[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)。DFS 结果就像一个普通的搜索结果——首先出现在文档中的内容，将出现在搜索结果的前面。

您可以尝试使用流阅读器[StAX自己实现它。](http://docs.oracle.com/javaee/5/tutorial/doc/bnbem.html)那不是 DFS，而是可以为您提供所需结果的普通 XML 阅读器。

# excel - VBA - 在 Excel 中漂亮地打印一行

> ID：10549271
> 
> 赞同：1
> 
> 时间：2012-05-11T10:00:59.737
> 
> 标签：excel, vba, pretty-print

我想在 Excel 中打印一行。一行包含一个项目的数据。

我想在一页上打印一行，格式很好。这意味着一个单元格的值是标题，应该打印成胖并居中，其他值也应该放在页面上的固定位置。

这与VBA可能吗？当我搜索这个问题时，我只找到了打印工作表或表格或其部分的结果，但没有找到使用单元格值和格式化它们的结果。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:21:38.000

模板是一个很好的方法。使用宏有更好的性能，它可以避免使用 INDIRECT() 等易失性函数。不过，这又取决于您的工作表带有多少易失性函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:12:07.957

是的，当您在 excel 中使用样式时，这是可能的。我知道你可以很容易地进行字体格式化。不确定是否缩进，但值得一试。

如果样式不支持它（它可能在 Excel 2010 中），您总是可以通过 VBA 缩进它（在缩进值时记录一个宏，它应该如下所示）：

`Selection.InsertIndent 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:28:05.143

正如其他答案所表明的那样，在 Excel VBA 中肯定是可能的，但这并不是 Excel 的强项。

为了获得您似乎想要的结果，通常需要使用带有字段的完全格式化的 Word 文档，然后用 Excel 工作表中的值填充这些字段。您甚至可以作弊并使用 Mail Merge \ Letter 向导来设置所有内容。

如果您确实想在 Excel 中完成所有操作，您可以在此处找到说明和示例 VBA 宏： [http ://www.tek-tips.com/faqs.cfm?fid=4223](http://www.tek-tips.com/faqs.cfm?fid=4223)

# database - 如何测试 DB2 9.5 -> 9.7 迁移/升级？

> ID：10549275
> 
> 赞同：1
> 
> 时间：2012-05-11T10:01:14.663
> 
> 标签：database, migration, db2, upgrade

我打算将一个 DB2 9.5 数据库迁移到 DB2 9.7。我希望这将是一个顺利的过程。但我想确保应用程序不会受到负面影响。
“您可以运行您的应用程序并查看是否一切正常”将是确保所需数据库功能的一种方式。我想知道的是

*   是否有任何我需要特别注意的主题/DB2 功能。
*   我可以选择的最佳测试方式是什么。
*   是否有一个功能可以提高我必须添加到我的旧数据库结构中的性能。

欢迎任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T05:00:35.467

[IBM 在Information Center](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.qb.upgrade.doc/doc/c0023662.html)上有一个非常好的升级指南，涵盖了这些主题（以及更多！）。我强烈建议您检查一下！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:46:02.007

您可以使用名为 iReplay 的捕获重放工具来捕获您的数据库流量并针对 DB2 9.7 对其进行测试。[http://exact-solutions.com/products/iReplay](http://exact-solutions.com/products/iReplay)

# iphone - 用于 MAC 的 TortoiseSVN？

> ID：10549277
> 
> 赞同：0
> 
> 时间：2012-05-11T10:01:18.373
> 
> 标签：iphone, macos, svn

我最近开始开发一个 iphone 应用程序，而我以前从未在 MAC 上工作过。（仅限 Windows）。我在 Windows 上使用了 tortoiseSVN。我想知道我可以在 mac 上使用哪些颠覆客户端，最好是最常用的一个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:10:53.807

这是一款带有免费模式的好应用——Smart SVN。

尝试从 Mac 打开此链接： [https ://www.smartsvn.com/download/](https://www.smartsvn.com/download/)

如果您从 Windows 打开，那么您将获得 Windows 版本的 Smart SVN。

第一次您将获得试用 Pro 版本，之后您的应用将进入 Foundation 模式。

但是Foundation模式还是有一个基本的重要特性：Commit、Update、Merge、Compare...

这是一个非常好的Mac产品

# php - 会话和 LDAP

> ID：10549279
> 
> 赞同：3
> 
> 时间：2012-05-11T10:01:26.977
> 
> 标签：php, session, ldap

我有一个网页。网页的身份验证由我设置的 ldap 服务器处理。现在我不想实现会话，这样当用户在一段时间内不活动时（在下面的例子中，10 秒），会话将结束并且用户将与 ldap 服务器解除绑定。我找到了这段代码摘录：

```
<?php
    session_cache_expire(20);

    session_start(); 
    $inactive = 10;
    if(isset($_SESSION['start'])) {
        $session_life = time() - $_SESSION['start'];
        if($session_life > $inactive){
            header("Location: endSession.php"); 

        }
    }
    $_SESSION['start'] = time();
?> 
```

它不工作。如果我刷新页面，它会将我重定向到我的“endSession.php”页面，即使我处于活动状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T10:36:49.313

```
function check_auth_ldap () {

  $sessionTimeoutSecs = 10;
  $ldapServer = '11.22.33.44';
  $ldapPort = 389;

  if (!isset($_SESSION)) session_start();

  if (!empty($_SESSION['lastactivity']) && $_SESSION['lastactivity'] > time() - $sessionTimeoutSecs && !isset($_GET['logout'])) {

    // Session is already authenticated
    $ds = ldap_connect($ldapServer, $ldapPort);
    if (ldap_bind($ds, $_SESSION['username'], $_SESSION['password'])) {
      $_SESSION['lastactivity'] = time();
      return $ds;
    } else {
      unset($_SESSION['lastactivity'], $_SESSION['username'], $_SESSION['password']);
      header("Location: endSession.php");
      exit;
    }

  } else if (isset($_POST['username'], $_POST['password'])) {

    // Handle login requests
    $ds = ldap_connect($ldapServer, $ldapPort);
    if (ldap_bind($ds, $_POST['username'], $_POST['password'])) {
      // Successful auth
      $_SESSION['lastactivity'] = time();
      $_SESSION['username'] = $_POST['username'];
      $_SESSION['password'] = $_POST['password'];
      return $ds;
    } else {
      // Auth failed
      header("Location: endSession.php");
      exit;
    }

  } else {

    // Session has expired or a logout was requested
    unset($_SESSION['lastactivity'], $_SESSION['username'], $_SESSION['password']);
    header("Location: endSession.php");
    exit;

  }

} 
```

只需在每个受保护页面的顶部调用上述函数即可。这将处理所有身份验证过程。如果用户通过身份验证，它将返回 LDAP 连接资源，如果`endSession.php`没有，则将其重定向到。

只需将这一行放在每一页的顶部：

```
$ds = check_auth_ldap(); 
```

...并且该功能将为您完成所有工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-24T06:57:38.880

通常需要基于 uid 的绑定。我已经稍微修改了函数来实现这一点。cn for bind 来自基于用户名的 uid 的搜索操作。希望这可以帮助某人。

```
function check_auth_ldap () {

  if (!($_POST['username'] && $_POST['password'])) {

    header("Location: login.php?failure=6");

  }

  $sessionTimeoutSecs = 10;
  $ldapServer = localhost;
  $ldapBaseDN = ou=users,ou=subtree,dc=domain,dc=tld;
  $ldapPort = 389;
  $ldapFilter = "(&(objectClass=*)(uid=".$_POST['username']."))";
  $ldapAttributes = array("cn");

  if (!isset($_SESSION)) session_start();

  if (!empty($_SESSION['lastactivity']) && $_SESSION['lastactivity'] > time() - $sessionTimeoutSecs && !isset($_GET['logout'])) {

    // Session is already authenticated
    $ds = ldap_connect($ldapServer, $ldapPort);
    $sr = ldap_search($ds,$ldapBaseDN,$ldapFilter,$ldapAttributes);
    $result = ldap_get_entries($ds, $sr);

    if ($result) {
        $binddn = $result[0]['dn'];
    } else {
        header("Location: login.php?failure=1");
    }

    ldap_close ($ds);

    $ds = ldap_connect($ldapServer, $ldapPort);
    ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);

    if (ldap_bind($ds, $binddn, $_SESSION['password'])) {
      $_SESSION['lastactivity'] = time();
      return $ds;
    } else {
      unset($_SESSION['lastactivity'], $_SESSION['username'], $_SESSION['password']);
      header("Location: login.php?failure=2");
      exit;
    }

  } else if (isset($_POST['username'], $_POST['password'])) {

    // Handle login requests
    $ds = ldap_connect($ldapServer, $ldapPort);
    $sr = ldap_search($ds,$ldapBaseDN,$ldapFilter,$ldapAttributes);
    $result = ldap_get_entries($ds, $sr);

    if ($result) {
        $binddn = $result[0]['dn'];
    } else {
        header("Location: login.php?failure=3");
    }
    ldap_close ($ds);

    $ds = ldap_connect($ldapServer, $ldapPort);
    ldap_set_option($ds, LDAP_OPT_PROTOCOL_VERSION, 3);

    if (ldap_bind($ds, $binddn, $_POST['password'])) {
      // Successful auth
      $_SESSION['lastactivity'] = time();
      $_SESSION['username'] = $_POST['username'];
      $_SESSION['password'] = $_POST['password'];
      return $ds;
    } else {
      // Auth failed
      header("Location: login.php?failure=4");
      exit;
    }

  } else {

    // Session has expired or a logout was requested
    unset($_SESSION['lastactivity'], $_SESSION['username'], $_SESSION['password']);
    header("Location: login.php?failure=5");
    exit;

  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T10:11:12.067

我刚刚写过（并测试过）这个：

**测试.php**

```
<?php
session_start();

if(isset($_GET['start']))
    $_SESSION['start'] = time();

if(time() - $_SESSION['start'] > 10)
    echo 'Logged out';
else 
    echo 'Logged in';

?> 
```

如果你进入`test.php?start`浏览器，它会说“登录”，然后进入`test.php`浏览器，10 秒后的任何时间，它都会回显“退出”，10 秒以下的任何时间都会显示“登录”

# c++ - dynamic_cast 和多态的最佳实践

> ID：10549284
> 
> 赞同：3
> 
> 时间：2012-05-11T10:01:38.530
> 
> 标签：c++, oop, polymorphism, downcast

我有一个设计问题，我不确定如何以最佳方式处理。我希望我的代码是面向未来的，并且仍然不会变得混乱和复杂（极客的困境）。

目前我的设计有以下设置

```
derived class D          derived class E
  ^                          ^
  |                          |
derived abstract class B  ->              derived class C
  ^                                            ^ 
  |                                            |
              Abstract Base class A 
```

class`B`与class 不同`A`，class`D`与 class`E`不同，class`B`与class`C`不同`A`。

由于这些类不同，我需要使用`dynamic_cast`运算符。

```
A* a1 = new class C;
C* c1 = dynamics_cast<C*>(a1);
if(c1){ //Success!!!}
... 
```

正如你所看到的，我会想要使用`dynamic_cast`很多！我需要尝试找到一种很好的方法来做到这一点，而不是`if()`额外的陈述。

有没有一种巧妙的方法来做到这一点？我似乎记得在 Scott Meyers 的书中看到过一些东西，但我离家一两个星期都无法访问它。

任何参考/示例将不胜感激。

另外，如果需要，我可以将类`B`变成一个接口，这将是一种解决方案

```
B* d1 = new D;
B* e1 = new E; 
```

但并不理想。

注意：我添加了这个例子来显示我当前的设计失败

```
class A {...};

class B: public A {
   public:
      virtual std::vector<objectType1*>& getObjectType1();
};

class C: public B {
   private:
     void newFunction();
};

A* c1 = new C();
std::vector<objectType1*> example = c1->getObjectType1(); // Wrong; need dyanmic_cast :-( 
```

`getObjectType1()`由于静态类型 A不`dynamic_cast`知道此功能，因此无法访问。我需要重新考虑我的设计。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T11:12:07.280

在适当设计的对象层次结构中，使用`dynamic_cast`是相当罕见的。当然，它可以上下转换多态树，但这并不意味着您必须使用它。

想想这个。`dynamic_cast`一般来说，为什么需要使用？因为您拥有的基指针不能提供您需要的设施，对吧？多态性的意义何在？为类似的操作提供不同的行为，在运行时选择行为，对吧？

这两种说法是不是有些矛盾？如果您的对象接口设计正确，那么您并不真正关心调用时将采用什么样的行为`->Foo()`——您只想调用`->Foo()`.

如果您需要频繁使用`dynamic_cast`，这是一种代码异味，它会告诉您您的接口有问题。也许您正试图在一个界面中投入太多？

# shell - 使用动作脚本 3.0 执行 Shell 脚本

> ID：10549286
> 
> 赞同：0
> 
> 时间：2012-05-11T10:01:40.247
> 
> 标签：shell, actionscript, execute

我有 shell 脚本命令，我想使用动作脚本 3.0 来执行它。这是我下面的shell脚本

```
#!/bin/sh
set backslash_quote = "yes"
osascript -e "tell application \"System Events\" to set visible of some item of\
 ( get processes whose name = \"Terminal\" ) to false" 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T10:54:07.347

您尝试执行的 shell 脚本在哪里？是在托管 Flash 的服务器上还是在最终用户的计算机上？

如果它在服务器上，那么您将需要设置一个服务来执行此操作。就个人而言，我推荐 PHP。

如果它在最终用户机器上，请查看在[Win 上使用 Flex/AIR 创建隐藏文件](https://stackoverflow.com/questions/10489952/creating-hidden-file-with-flex-air-on-win/10491378#10491378)。该链接中的答案将让您了解如何在用户机器上执行脚本......虽然我很确定这只会在 AIR 应用程序中工作。

# asp.net-mvc-3 - 使用 htmlhelpers 将复选框值返回给控制器

> ID：10549288
> 
> 赞同：1
> 
> 时间：2012-05-11T10:01:52.947
> 
> 标签：asp.net-mvc-3

我的视图中有以下代码，然后是提交按钮。在我看来，我确实有很多这样的复选框，以便用户可以随意点击。

```
@Html.CheckBox("code" + l_code, false, new { Value = @item.expertiseCode }) 
```

在我的控制器中，我有 flll.，这是 HTTPPost 方法

```
public ActionResult RegisterSP(RegisterModel model, FormCollection collection) 
```

但是，在调试时，我看到所有复选框都被传递回控制器，而不仅仅是被点击的那些。我只想要那些被点击的并忽略其余的，因为我需要将它们添加到数据库中。此外，传入的复选框值包含 TRUE/FALSE。因此，错误值也被添加到数据库中。如果我使用下面的方法（不使用 htmlHelper），我没有上述问题。但我喜欢使用 htmlHelper：

```
<input type="checkbox" name="code@(l_code)" value="@item.expertiseCode" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:31:15.490

如果您有一组复选框，请像这样创建一个 ViewModel

```
public class ExpertiseCodeViewModel 
{
  public string Name { set;get;}
  public int ExpertiseId { set;get;}
  public bool IsSelected { set;get;}
} 
```

现在在您的主 ViewModel 中，将其集合添加为属性

```
public class UserViewModel
{
  public List<ExpertiseCodeViewModel > Expertises{ set; get; }

  public UserViewModel()
  {
    if(this.Expertises==null)
       this.Expertises=new List<ExpertiseCodeViewModel>();
  }
} 
```

并在您创建一个名为 ExpertiseCodeViewModel 的编辑器模板

```
@model ExpertiseCodeViewModel 
@Html.CheckBoxFor(x => x.IsSelected)
@Html.LabelFor(x => x.IsSelected, Model.Name)
@Html.HiddenFor(x => x.ExpertiseId ) 
```

将此包含在您的主视图中

```
@model UserViewModel
@using (Html.BeginForm())
{
  //other elements
 @Html.EditorFor(m=>m.Expertises)
 <input type="submit" value="Save" />
} 
```

在您的 HTTPPost Action 方法中，

```
[HttpPost]
public ActionResult Save(UserViewModel model)
{
  List<int> items=new List<int>();
   foreach (ExpertiseCodeViewModel objItem in model.Expertises)
   {
     if (objPVM.IsSelected)
     {
       //you can get the selected item id here
       items.Add(objItem.ExpertiseId);

     }
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:08:34.053

尝试

```
@Html.CheckBox("code" + l_code, false, new { @value = item.expertiseCode }) 
```

或者

```
string name = "code" + l_code;
@Html.CheckBox(name, false, new { @value = item.expertiseCode }) 
```

# java - 仅在 xml 文件中删除标签之间的空格的正则表达式是什么？

> ID：10549290
> 
> 赞同：2
> 
> 时间：2012-05-11T10:02:00.390
> 
> 标签：java, xml, regex

我有一个充满空格的 xml 文件的情况。

```
<test>  <level>    <sub name="xyz">test</sub>   </level>  <test> 
```

我需要删除空格，但不是元素属性名称的空格，因为这会使我的标记为`<subname>`. 我可以递归地查找空格，直到找到`<`并删除它们，如果找到`>`则不删除它。我想知道是否可以通过 Java 中的正则表达式来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T11:52:49.203

切勿尝试在没有 XML 解析器的情况下处理 XML。

只需通过一个简单的 XSLT 转换即可：

```
<xsl:stylesheet ...>
  <xsl:strip-space elements="*"/>
  <xsl:template match="/"><xsl:copy-of select="."/></xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:19:45.253

如果真的那么简单，这应该足够了：

```
my $xml_string = '<test>  <level>    <sub name="xyz">test</sub>   </level>  </test>';

# remove all whitespace before '<' symbol
$xml_string =~ s/\s+</</g;

print $xml_string; 
# echoes <test><level><sub name="xyz">test</sub></level></test> 
```

我用过 Perl 语法，但我想将它转换成你想要的任何语言都很容易。

但是请注意，有几个警告（在这种情况下总是如此）。

例如，您不会`<`在 XML 元素中遇到符号 - 但它可以愉快地存在于 PCDATA 部分中，并且该正则表达式忽略了这种细微差别。

**更新：**正则表达式可能会通过“前瞻”功能变得更加简洁：

```
$xml_string =~ s/\s+(?=<)//g; # remove the sequence of whitespace, if followed by '<' 
```

...但并非所有语言都支持（虽然 Perl 支持））。

# javascript - Google 路线 - 不同 ISP 的不同行为

> ID：10549292
> 
> 赞同：1
> 
> 时间：2012-05-11T10:02:03.147
> 
> 标签：javascript, google-maps

我们正在使用谷歌地图服务以 dragdir 格式获取两点之间的方向数据：

```
http://maps.google.com/maps?f=d&hl=en&saddr=43.2602841679131,16.6526985168457&daddr=43.5602841679131,16.7526985168457&ie=UTF8&0&om=0&output=dragdir 
```

我们不计其数的问题，表现为通过特定 ISP（例如 t-com）连接到互联网的用户的方向路径被绘制、缩放、旋转或平移或任意组合。

此外，我们在 android 原生应用程序中使用相同的模式，我们从未遇到过此类问题。

您是否有任何建议或良好做法如何避免所描述的问题？

这是从 maps api 返回的 dragdir json 对象的示例：

```
{tooltipHtml:" 
    (151\x26#160;km / 1 hour 51 mins)",polylines:[{id:"route0",points:"e}ruGis|eBsGdPiBxJ{Ab
    h@aAdKoDjNeDlHuC~Di@bBsAnPqAlGwDpGmDbCkGrO
aCzJ.. more scrambled data here ..?B",numLevels:4,zoomFactor:16}]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:17:17.263

如果您的页面是从世界的不同地方访问的，那么很可能会导致方向不同。从[开发者指南的](https://developers.google.com/maps/documentation/javascript/directions#TravelModes)[**区域偏向**](https://developers.google.com/maps/documentation/javascript/directions#TravelModes)部分：

> Google Maps API 路线服务返回受您加载 JavaScript 引导程序的域（地区或国家/地区）影响的地址结果。（由于大多数用户加载[http://maps.google.com/](http://maps.google.com/) 这会将隐式域设置为美国。）如果您从不同的受支持域加载引导程序，您将获得受该域影响的结果。例如，搜索“旧金山”可能会从加载 [http://maps.google.com/](http://maps.google.com/)（美国）的应用程序返回的结果与加载 [http://maps.google.es/](http://maps.google.es/)（西班牙）的应用程序返回的结果不同。

您可以通过将以下内容添加到请求 URL 参数来强制**区域偏差：**

```
[after sensor=false, etc.] &region=US 
```

这会将路线服务设置为返回偏向特定区域（在本例中为美国）的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:08:42.027

我相信谷歌正在对输出进行特定区域的更改。

我建议你直接调用你的服务器，然后从你的服务器调用谷歌服务以获得统一的结果。

看看你是否也可以在谷歌服务调用本身中提及区域。

# ruby-on-rails - Rails 3.1 生成附加到 ActiveRecord 模型对象的样式表

> ID：10549295
> 
> 赞同：1
> 
> 时间：2012-05-11T10:02:03.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, paperclip, asset-pipeline, assets

我们过去在 Rails 3.0 中所做的是让回形针将一个文件附加到我们的“站点”模型中，该模型代表 css 样式表。我们的应用程序中有大量站点，每个站点都有一个样式表，每次站点中的属性（如 site.color1 或 site.color 2）更改时都会生成该样式表。然后我们有一个 .sass 文件，它使用 $color1 之类的变量，这些变量被解释为生成正确的 css 文件并使用回形针上传

这是 Site.rb （模型）的相关部分：

```
has_attached_file :stylesheet, PAPERCLIP_OPTIONS

def generate_site_specific_stylesheet(force = false)
  if use_custom_stylesheet && (force || color_changed?)
      stylesheets_path = Rails.root + 'app/assets/stylesheets'
      template = File.read(stylesheets_path + '_site_specific_stylesheet.sass')
      sass_engine = Sass::Engine.new(template, :load_paths =>[stylesheets_path.to_s, '.'],
                                 :template_location => stylesheets_path.to_s, :custom =>            {:site => self})
      stylesheet_contents = sass_engine.render
      puts stylesheet_contents
      self.stylesheet = StringIO.new stylesheet_contents
      self.stylesheet.instance_write(:file_name, 'site_stylesheet.css')
      self.stylesheet.instance_write(:content_type, 'text/css')
  end
  true
end 
```

正确的问题是，当这些样式表被创建时，它们并没有识别像 image-path 这样的 sass 助手。我无法找到解决方法。我们确实在模块（模块 Sass::Script::Functions）中定义了自定义 sass 函数，但是助手也不能在那里工作，我不知道如何在 include ActionView::Helpers 中使用 image_path 方法，尽管我尝试将该模块包含到我的 sass 函数模块中，但没有成功。

有人对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:53:25.560

`image-path`helper 不隶属于 SASS。它是一种方法，[提供了](https://github.com/rails/rails/blob/0d7d3a6e77c7f2f34236459bd1170951ded91bd5/actionpack/lib/action_view/helpers/asset_tag_helper.rb#L274)我的 Rails 本身。尝试在模型类中包含以下模块：

```
include ActionView::Helpers::AssetTagHelper 
```

# c# - 从已经运行的 BackgroundTask 更新进度？

> ID：10549298
> 
> 赞同：1
> 
> 时间：2012-05-11T10:02:16.470
> 
> 标签：c#, windows-8, windows-runtime

主应用程序如何从主应用程序启动时已经运行的后台任务获取进度通知？我已经注册了一个由 a 触发的后台任务`SystemTriggerType.TimeZoneChange`（为简单起见）。这是代码：

```
public sealed class Class1:IBackgroundTask
{
    public async void Run(IBackgroundTaskInstance taskInstance)
    {
        var defferal = taskInstance.GetDeferral();
        await Task.Delay(3000);
        for (uint i = 1; i < 100; i++)
        {
            await Task.Delay(1000);
            taskInstance.Progress = i;
        }
        defferal.Complete();
    }
} 
```

进度条会正确报告进度。在应用程序开始时，我重新附加 Completed 和 Progress 事件

```
foreach (var i in BackgroundTaskRegistration.AllTasks)
{
   i.Value.Completed += task_Completed;
   i.Value.Progress += task_Progress;
} 
```

但我猜如果任务已经在运行，taskInstance 不会更新......

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:38:14.260

看看[后台任务示例](http://code.msdn.microsoft.com/windowsapps/Background-Task-Sample-9209ade9)。它完全符合您的要求，并且更新得很好。

# android - 可搜索字典在硬件测试中不起作用

> ID：10549305
> 
> 赞同：1
> 
> 时间：2012-05-11T10:03:05.897
> 
> 标签：android, eclipse, avd

使用示例可搜索字典，我创建了一个自定义字典，当我在 AVD 中运行它时它可以完美运行。但是当我连接我的 Android 设备（摩托罗拉 Droid）时，搜索表明没有找到搜索结果（但它似乎正在工作）。我在 Android 清单和我的设备上打开了调试。它似乎没有阅读definitions.txt。对此的任何建议都会有所帮助

# jquery - 显示/隐藏li的对应部分内容？

> ID：10549306
> 
> 赞同：0
> 
> 时间：2012-05-11T10:03:07.110
> 
> 标签：jquery

hmtl代码：

```
 <div id="nav">
 <ul>
 <li><a href="#">test 1</a></li>
 <li><a href="#">test 2</a>
  <div class="sub-nav">
  <p> <a href="#">link </a>  <a href="#">link </a> <a href="#">link </a>  </p>
  </div>

  </li>
 <li><a href="#">test 3</a>
  <div class="sub-nav">
  <p> <a href="#">link2 </a>  <a href="#">link3</a> <a href="#">link4 </a>  </p>
  </div>

</li>
 <li><a href="#">test 4</a></li>
 </ul>
  </div> 
```

我想当鼠标悬停在**li**上时，它会显示相应的部分内容（`sub-nav`）。当鼠标移开 li 时，相应的部分将被隐藏。

```
.sub-menu css is display:none; 
```

以下是我的代码，但不起作用。

```
$(function(){

    $("#nav ul li").mouseenter(function() {
       $(this).find(".sub-menu").show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:06:25.860

检查您`.sub-menu`在 CSS 和 JavaScript 中是否有类，但`.sub-nav`在标记中。

这是工作解决方案：

```
$("#nav ul li").hover(function() {
    $(this).find(".sub-nav").show();
}, function() {
    $(this).find(".sub-nav").hide();
});​ 
```

**演示：http:** [//jsfiddle.net/e8GYJ/](http://jsfiddle.net/e8GYJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:07:30.773

```
$("#nav ul li").mouseenter(function() {
       $(this).find(".sub-menu").show();
    }.mouseleave(function(){
      $(this).find(".sub-menu").hide();
    }); 
```

看看这段代码...

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:05:07.327

尝试`hover()`事件回调：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:07:58.187

尝试用户[悬停](http://api.jquery.com/hover/)功能：

```
$("li").hover(
  function () {
     $(this).find(".sub-menu").show();
  }, 
  function () {
     $(this).find(".sub-menu").hide();
  }
); 
```

# jquery-plugins - 选择选项值不是数字的 jquery 选项列表

> ID：10549310
> 
> 赞同：1
> 
> 时间：2012-05-11T10:03:16.850
> 
> 标签：jquery-plugins

jquery 选择列表插件似乎仅在选择中的选项值是数字时才起作用，例如

```
<select>
   <option value="1">Value 1</option>
   <option value="2">Value 2</option>
</select> 
```

相对于：

```
<select>
   <option value="one">Value 1</option>
   <option value="two">Value 2</option>
</select> 
```

是否有不涉及将列表中填充的对象更改为具有数字属性的替代方法或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:28:01.373

这是一个已修复的已知错误。从 0.9.0 版开始，[**jquery-picklist 小部件**](http://plugins.jquery.com/picklist/)支持非数字选项值。[**更新到最新版本**](http://plugins.jquery.com/picklist/)以进行修复。

有关非数字值的演示，请参阅[**非数字值测试**](http://code.google.com/p/jquery-ui-picklist/wiki/Demos)。

# c++ - 从 Objdump 实用程序检索 vptr（指向虚拟表又名 VTABLE 的指针）？

> ID：10549311
> 
> 赞同：0
> 
> 时间：2012-05-11T10:03:30.580
> 
> 标签：c++, assembly, virtual-functions, objdump

我们如何使用 objdump 实用程序和反汇编代码知道 VTABLE 的地址（即对应的**vptr**）。vptr 通常存储在 object 的第一个字节中。（更正/编辑这个）。有这个使用虚函数的简单代码：

```
class base
{
public:
    int x;
    virtual void func()
    {
        //test function

    }

};

class der : public base
{
   void func()
    {
        //test function

    }

};

/*
 * 
 */
int main() {
    int s = 9;
    base b;
    der d ;
    std::cout<<"the address of Vptr is = "<<(&b+0)<<std::endl;
    std::cout<<"the value at Vptr is = "<<(int*)*(int*)((&b+0))<<std::endl;

    return 0;
} 
```

以下是代码的输出：

```
the address of Vptr is = 0x7fff86a78fe0
the value at Vptr is = **0x400c30** 
```

以下是主要功能的一部分 - 代码的**反汇编**：

```
base b;
  4009b4:   48 8d 45 d0             lea    -0x30(%rbp),%rax
  4009b8:   48 89 c7                mov    %rax,%rdi
  4009bb:   e8 f4 00 00 00          callq  400ab4 <_ZN4baseC1Ev>
    der d ;
  4009c0:   48 8d 45 c0             lea    -0x40(%rbp),%rax
  4009c4:   48 89 c7                mov    %rax,%rdi
  4009c7:   e8 fe 00 00 00          callq  400aca <_ZN3derC1Ev> 
```

这里显示 _ZN4baseC1Ev 是基础对象的地址，_ZN3derC1Ev 是派生对象的地址。

在 _ZN4baseC1Ev

```
0000000000400ab4 <_ZN4baseC1Ev>:
  400ab4:   55                      push   %rbp
  400ab5:   48 89 e5                mov    %rsp,%rbp
  400ab8:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
  400abc:   48 8b 45 f8             mov    -0x8(%rbp),%rax
  400ac0:   48 c7 00 30 0c 40 00    movq   $0x400c30,(%rax)
  400ac7:   c9                      leaveq 
  400ac8:   c3                      retq   
  400ac9:   90                      nop

    0000000000400aca <_ZN3derC1Ev>:
        }

#include<iostream>
class base
{
public:
    int x;
    virtual void func()
  400a8a:   55                      push   %rbp
  400a8b:   48 89 e5                mov    %rsp,%rbp
  400a8e:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
    {
        //test function

    }
  400a92:   c9                      leaveq 
  400a93:   c3                      retq   

0000000000400a94 <_ZN3der4funcEv>:

};

class der : public base
{
   void func()
  400a94:   55                      push   %rbp
  400a95:   48 89 e5                mov    %rsp,%rbp
  400a98:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
    {
        //test function

    }
  400a9c:   c9                      leaveq 
  400a9d:   c3                      retq   

0000000000400a9e <_ZN4baseC2Ev>:
 */

#include <stdlib.h>
#include<iostream>
class base
{
  400a9e:   55                      push   %rbp
  400a9f:   48 89 e5                mov    %rsp,%rbp
  400aa2:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
  400aa6:   48 8b 45 f8             mov    -0x8(%rbp),%rax
  400aaa:   48 c7 00 50 0c 40 00    movq   $0x400c50,(%rax)
  400ab1:   c9                      leaveq 
  400ab2:   c3                      retq   
  400ab3:   90                      nop

0000000000400ab4 <_ZN4baseC1Ev>:
  400ab4:   55                      push   %rbp
  400ab5:   48 89 e5                mov    %rsp,%rbp
  400ab8:   48 89 7d f8             mov    %rdi,-0x8(%rbp)
  400abc:   48 8b 45 f8             mov    -0x8(%rbp),%rax
  400ac0:   48 c7 00 50 0c 40 00    movq   $0x400c50,(%rax)
  400ac7:   c9                      leaveq 
  400ac8:   c3                      retq   
  400ac9:   90                      nop

0000000000400aca <_ZN3derC1Ev>:
    }

}; 
```

这是[objdump](http://www.pastedump.com/paste/2220) -S exe文件输出的链接

**还有 objdump -t virtualfunctionsize | grep vtable 给出了这个：**

```
0000000000400c40  w    O .rodata    0000000000000018              vtable for base
0000000000601e00 g     O .dtors 0000000000000000              .hidden __DTOR_END__
0000000000400b00 g     F .text  0000000000000089              __libc_csu_init
0000000000400c20  w    O .rodata    0000000000000018              vtable for der 
```

我想知道 - **VTABLE**地址和它所表示的相应虚函数是什么。

*   Vptr 的地址是 = 0x7fff86a78fe0 ，这代表什么 - VTABLE 位置？

*   Vptr 的值是 = **0x400c30** - 这代表什么 - 基类的第一个虚函数？

*   怎样才能找到派生类的虚函数的后续地址呢？

Rgds，软软的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:31:01.220

Gcc 遵循这个 C++ ABI：[http ://refspecs.linuxbase.org/cxxabi-1.83.html#vtable](http://refspecs.linuxbase.org/cxxabi-1.83.html#vtable)

要查看gcc生成的vtable，可以用“gcc -S”编译生成汇编源，然后通过c++filt过滤

您可以看到生成了以下 vtable：

```
 .type   vtable for base, @object
    .size   vtable for base, 24
vtable for base:
    .quad   0
    .quad   typeinfo for base
    .quad   base::func() 
```

您可以看到前两个 8 字节值为零（从顶部偏移，派生类在基类中的偏移量）和指向 typeinfo 的指针。然后真正的 vtable（指向虚函数的指针）开始。这就是您在调试输出中看到的 vptr 值。这解释了 +0x10 偏移量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:25:11.107

`_ZN4baseC1Ev`是`base::base()`，基构造函数，`_ZN3derC1Ev`是派生构造函数。您可以使用诸如`c++filt`对名称进行解构的工具。它们不是实际对象的地址。

正如预期的那样，基础对象的地址`b`是在堆栈上。`0x7fff86a78fe0`对于此编译器，这与 vptr 的地址相同，它是指向虚拟成员的函数指针数组的指针。

如果取消引用它，您将获得指向基类中第一个虚函数 (0x400c30) 的指针的地址。

编辑：您需要再次取消引用它以获取`base::func()`. 使用类似的东西 `(int*)*(int*)*(int*)(&b)`

# c# - 如何在c sharp中以编程方式将html标签目录属性从rtl设置为ltr，反之亦然

> ID：10549312
> 
> 赞同：3
> 
> 时间：2012-05-11T10:03:36.953
> 
> 标签：c#, asp.net, html, multilingual

我正在尝试在 asp.net 上构建一个多语言网站，我需要将 html 标记 dir 属性从 rtl 设置为 ltr，反之亦然，以编程方式在 c 语言中进行设置。现在我有 3 种语言英语、希伯来语和俄语，我需要在它们之间切换。每次我从 ltr 更改为 rtl 语言以及从 rtl 更改为 ltr 语言时，我都需要更改网站的方向，这里我的母版页示例请帮助我

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage.master.cs"     Inherits="MasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<link href="CSS/Site-RTL.css" rel="stylesheet" type="text/css" />
</head>
<body id="html" runat="server">
<form id="theForm" runat="server">
<div>
    <asp:ContentPlaceHolder ID="ContentPlaceHolder" runat="server">
    </asp:ContentPlaceHolder>
</div>
<div style="margin-top: 20px;">
    <asp:LinkButton ID="btnSetEnglish" runat="server" Text="English" CommandArgument="en-GB"
        OnClick="RequestLanguageChange_Click"></asp:LinkButton>&nbsp;&nbsp;
    <asp:LinkButton ID="btnSetHebrew" runat="server" Text="Hebrew" CommandArgument="he-IL"
        OnClick="RequestLanguageChange_Click"></asp:LinkButton>&nbsp;&nbsp;
    <asp:LinkButton ID="btnSetRussian" runat="server" Text="Russian" CommandArgument="ru-RU"
        OnClick="RequestLanguageChange_Click"></asp:LinkButton>&nbsp;&nbsp;
</div>
<div>
    <asp:SiteMapDataSource ID="smdsMaster" runat="server" OnDataBinding="Page_Load" />
    <asp:Menu ID="MenuMaster" runat="server" CssClass="menu" DataSourceID="smdsMaster"
        Orientation="Horizontal" StaticDisplayLevels="2" StaticSubMenuIndent="16px" MaximumDynamicDisplayLevels="1">
        <DataBindings>
            <asp:MenuItemBinding DataMember="SiteMapNode" NavigateUrlField="Url" />
        </DataBindings>
    </asp:Menu>
    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>
</div>
</form> 
```

这里是母版页后面的代码

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using Localization.Classes;

public partial class MasterPage : System.Web.UI.MasterPage
{

protected void Page_Load(object sender, EventArgs e)
{

}

protected void RequestLanguageChange_Click(object sender, EventArgs e)
{
    LinkButton senderLink = sender as LinkButton;

    //store requested language as new culture in the session
    if (senderLink.CommandArgument == "he-IL")
    {
        // some code
    }
    else
    {
        // some code
    }
    Session[Global.SESSION_KEY_CULTURE] = senderLink.CommandArgument;

    //reload last requested page with new culture
    Server.Transfer(Request.Path);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:06:48.603

在您后面的代码中：

```
this.html.Attributes.Add("dir", "ltr"); 
```

* * *

如果这不起作用，另一种方法是将属性直接放在标签上并使用属性来填充它：

```
<body dir="<%:Dir%>">

public string Dir { get; set; }

// Set Dir in the on click event

protected void RequestLanguageChange_Click(object sender, EventArgs e)
{
    LinkButton senderLink = sender as LinkButton;

    //store requested language as new culture in the session
    if (senderLink.CommandArgument == "he-IL")
    {
        Dir = "rtl";
    }
    else
    {
        Dir = "ltr";
    }

    Session[Global.SESSION_KEY_CULTURE] = senderLink.CommandArgument;

    //reload last requested page with new culture
    Server.Transfer(Request.Path);

} 
```

# jquery - 如何停止从服务器端重定向

> ID：10549314
> 
> 赞同：2
> 
> 时间：2012-05-11T10:03:44.397
> 
> 标签：jquery, ajax, facebook, http-headers

我正在使用 AJAX 调用从外部服务器访问某些资源。但是服务器将我重定向到另一个位置并且不返回任何内容。我想获取该位置的网址....

JS Fiddle 上的示例.... [http://jsfiddle.net/5KtVE/2/](http://jsfiddle.net/5KtVE/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:36:34.927

由于这是一个跨域请求，您必须将`dataType`选项设置为`jsonp`，这应该可以：

```
$.ajax({
    url: 'https://graph.facebook.com/mahernazeer/picture', 
    dataType: 'jsonp',
    success: function(imageUrl) {
        console.log(imageUrl);    // https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc4/274173_100002201391414_6210108_q.jpg
    }
}); 
```

[http://jsfiddle.net/5KtVE/3/](http://jsfiddle.net/5KtVE/3/)

# android - 在 WebView 中动态移动动画角色

> ID：10549315
> 
> 赞同：0
> 
> 时间：2012-05-11T10:03:44.990
> 
> 标签：android, android-layout, animation, webview

我通过使用 html 中的图像地图创建了一个预期的地图，并将其嵌入到 WebView 中。创建了可点击的热点以显示特定地点的详细信息。现在我想在这个自定义室内地图中添加获取方向功能。

我的客户的要求是展示一个动画角色，他在建筑物的平面图中行走以显示从一个地方到另一个地方的方向。如何在用户选择的每个排列和组合中动态移动动画角色。

请建议我一些想法，我该如何实现。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:22:31.910

您可以在 Webview 中设置 Marquee 文本以移动文本

```
WebView mWebView = (WebView) findViewById(R.id.webview);

mWebView.getSettings().setJavaScriptEnabled(true);

String summary = "<html><body><MARQUEE>Welcome</MARQUEE></body></html>";

mWebView.loadData(summary, "text/html", "utf-8"); 
```

# c# - 获取 Bing 地图 SOAP 服务中使用的所有国家/地区名称

> ID：10549316
> 
> 赞同：1
> 
> 时间：2012-05-11T10:03:45.413
> 
> 标签：c#, web-services, bing-maps

我在我的 Web 应用程序中使用 Bing Maps SOAP 服务、[GeocodeService](http://msdn.microsoft.com/en-us/library/dd221354.aspx)来对地图上的一个点进行反向地理编码（即从经度和纬度获取国家名称）。我需要获取 Web 服务可以返回的所有确切国家/地区名称。我试图从[这里](http://msdn.microsoft.com/en-us/library/dd435699)获取所有国家/地区名称，但例如在 Web 服务中返回“FYRO 马其顿”的“马其顿，前南斯拉夫共和国”。由于我需要将它们存储在数据库中，因此有没有办法获取 Web 服务可以返回的所有确切国家名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:31:16.703

蛮力？（你可能会想念梵蒂冈城，但我希望你会得到其他的，它也会花很多时间尝试对海洋进行地理编码）

```
 GeoServiceReference.GeocodeServiceClient client = new GeoServiceReference.GeocodeServiceClient();

        var countries = new List<string>();

        for (double lat = 0; lat < 360; lat+=0.1)
            for(double lon = 0; lon < 360; lon+=0.1)
        {
            var result = client.ReverseGeocode(new GeoServiceReference.ReverseGeocodeRequest
            {
                Location = new GeoServiceReference.Location
                {
                    Latitude = lat,
                    Longitude = lon
                }
            });

            if (!countries.Contains(result.Results.First().Address.CountryRegion))
            {
                Console.WriteLine(result.Results.First().Address.CountryRegion);
                countries.Add(result.Results.First().Address.CountryRegion);
            }
        } 
```

# iphone - 录制声音并以改变的音高播放

> ID：10549317
> 
> 赞同：5
> 
> 时间：2012-05-11T10:03:50.400
> 
> 标签：iphone, ios

我必须实现一个 iphone 应用程序，它会在您开始讲话时记录用户的声音，并更改录制声音的音高并播放。我可以在 AVAudiorecorder 的帮助下记录检测到声音的音频，并使用 Dirac 库更改了录制声音的音高。这种方法的问题是输出声音足够嘈杂。我得到了使用 SoundEngine 的响应，但我没有办法实现它。任何人都可以向我解释一下实现这一点的任何其他方式吗？

```
my code//
        -(void)initialSetup
    { 
        count=0; 
        silenceTime=0;

    //[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error: nil];
    recordSetting = [[NSMutableDictionary alloc] init];
    [recordSetting setValue:[NSNumber numberWithInt:kAudioFormatAppleLossless] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];
    recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat: @"%.0f.%@",[NSDate timeIntervalSinceReferenceDate]*1000.0,                  @"caf"]]];
    recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
    //recorder = [[ AVAudioRecorder alloc] init];
    [recorder setDelegate:self];
    [recorder updateMeters];
    [recorder prepareToRecord];
    //[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: nil];
    //In Order To Move Sound To The Speaker
    //UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    //AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof(audioRouteOverride),&audioRouteOverride);

    NSArray *dirPaths;
    NSString *docsDir;
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"audio.caf"];
    recordedTmpFile1 =  [NSURL fileURLWithPath:soundFilePath];

    recordSetting1 =   [[NSMutableDictionary alloc] init];
    recordSetting1 =   [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithInt:AVAudioQualityMin],AVEncoderAudioQualityKey,
                        //[NSNumber numberWithInt:kAudioFormatAppleIMA4],AVFormatIDKey,
                        [NSNumber numberWithInt:16], 
                        AVEncoderBitRateKey,
                        [NSNumber numberWithInt: 2], 
                        AVNumberOfChannelsKey,
                        [NSNumber numberWithFloat:44100.0], 
                        AVSampleRateKey,nil];
    recorder1 = [[AVAudioRecorder alloc] initWithURL:recordedTmpFile1 settings:recordSetting1 error:&error];
    [recorder1 prepareToRecord];
    [recorder1 setDelegate:self];
    if(recorder) 
    {
        recorder.meteringEnabled = YES;
        [recorder record];
        double val=[recorder peakPowerForChannel:0];
        NSLog(@"The Very First Value Of The Recorder Is=%f",val);
        levelTimer = [NSTimer scheduledTimerWithTimeInterval:0.4 target: self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];
    }
    else
    {
        NSLog(@"error in initilising of the recorder=%@",[error localizedDescription]);
    }
}

-(void)levelTimerCallback:(NSTimer *)timer                      
{ 
    [recorder updateMeters];
    const double ALPHA = 0.05;
    //NOISE FILERATION ALGORITHMS
    double peakPowerForChannel = pow(10,(0.05 *[recorder peakPowerForChannel:0]));
    double audioMonitorResults1 = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * audioMonitorResults1;
    double audioMonitorResults;
    audioMonitorResults= [recorder peakPowerForChannel:0];
    NSLog(@"This time only  frequency is==>%f",audioMonitorResults1);
    //if (audioMonitorResults1 >0.020)
    if(audioMonitorResults1 > .05)//the value of audioMonitorResults may be equal to -10 for device
    {

        [recorder1 updateMeters];
        recorder1.meteringEnabled=YES;
        //recorder.meteringEnabled=YES;
        [recorder1 record];
        NSLog(@"SOUND IS DETECTED");
        NSLog(@"%f",[recorder1 peakPowerForChannel:0]);
        NSLog(@"Recording is going on");
        count=1;
        silenceTime=0;

    }
    else
    {

        NSLog(@"NO SOUND IS DETECTED");
        silenceTime=silenceTime+0.3;
        if(count==1 && silenceTime>1)
        { 

            [levelTimer invalidate];
            [recorder1 stop];

        }

    }

}
- (void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag
{
    NSLog(@"Recorder stop delegate is processing");
    if(flag)
    {
        NSLog(@"Player has finished successfully");
        [self playRecording];
    }
    else
    { 
        NSLog(@"problem in recording.......not recorded");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:35:49.370

1.  如何检测声音？
    我在教程的帮助下解决了我的第一个问题..这里是这个链接，链接：http: [//mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)
    我们在这里可以很容易地理解录音时检测到一些噪音。

2.  如何改变录制声音的音高并播放。
    我在改变声音的音高时遇到的第二个问题。因为我们只能在`AVAudioRecorder`我们无法改变音高的帮助下录制声音。
    为此，我使用了外部库*DIRAC*。 [这是狄拉克图书馆的链接。](http://dirac.dspdimension.com/)
    这提供了一些关于在应用程序中实现 dirac 库的示例项目（用于移动应用程序和桌面应用程序）。

我发现解决此问题的另一种方法是使用 Dirac 实现 Cocoas2D，Cocos Denshion。因为上述过程不适用于我的应用程序。 [这是实现此功能的链接](http://www.mediafire.com/?dofz0hofjrlkrg9)（有关更改音高和播放录制声音的示例项目）。

我找到[了另一个](http://purplelilgirl.tumblr.com/page/25)与录音有关的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T15:06:36.263

Actually there is an easier solution. Use the rate feature of the audio player. It ranges between 0.1f - 2.0f where higher number means faster and squeekier pitch and lower number means slow dragged out sound (deep voice)

```
player = [[AVAudioPlayer alloc] initWithContentsOfURL:
                  [NSURL fileURLWithPath:path] error:&err];
        player.volume = 0.4f;
        player.enableRate=YES;
        [player prepareToPlay];
        [player setNumberOfLoops:0];
        player.rate=2.0f;
        [player play]; 
```

# python - python dropbox api - 保存令牌文件？

> ID：10549326
> 
> 赞同：7
> 
> 时间：2012-05-11T10:04:08.280
> 
> 标签：python, api, authentication, dropbox

我想避免一遍又一遍地授权这个脚本。换句话说，当我从终端启动脚本时，它给了我一个必须在浏览器中打开的链接，然后单击浏览器中的“允许”按钮，然后返回终端......我想有一种方法保存身份验证详细信息但如何保存？

```
# Include the Dropbox SDK libraries
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website

APP_KEY = 'xxxxxxxxxxx'
APP_SECRET = 'yyyyyyyyyyyy'
ACCESS_TYPE = 'dropbox'

sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE )

request_token = sess.obtain_request_token()

# Make the user sign in and authorize this token
url = sess.build_authorize_url(request_token)
print "url:", url
print "Please authorize in the browser. After you're done, press enter."
raw_input()

# This will fail if the user didn't visit the above URL and hit 'Allow'
access_token = sess.obtain_access_token(request_token)

client = client.DropboxClient(sess)
#stored_creds = open(CONF_DIR + self.TOKEN_FILE).read()
print "linked account:", client.account_info()

f = open('t.txt')
response = client.put_file('/uploaded_with_python.txt', f)
print "uploaded:", response

folder_metadata = client.metadata('/')
print "metadata:", folder_metadata

f, metadata = client.get_file_and_metadata('/uploaded_with_python',rev='362e2029684fe')
out = open('/uploaded_with_python.txt', 'w')
out.write(f)
print(metadata) 
```

-------------------------------------------------- - - - - - - - - - - - - - - - - - - - - - 编辑

我修改了脚本并创建了脚本但是我在读取令牌文件时仍然遇到问题

```
# Include the Dropbox SDK libraries
from dropbox import client, rest, session

# Get your app key and secret from the Dropbox developer website

APP_KEY = 'i4ffahjltei1bnu'
APP_SECRET = 'cjullao1iiymrse'
ACCESS_TYPE = 'dropbox'

#acces token file
token_file = open(TOKENS)
token_key,token_secret = token_file.read().split('|')
token_file.close()

sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE )

request_token = sess.obtain_request_token()

# Make the user sign in and authorize this token
url = sess.build_authorize_url(request_token)
print "url:", url
print "Please authorize in the browser. After you're done, press enter."
raw_input()

# This will fail if the user didn't visit the above URL and hit 'Allow'
access_token = sess.obtain_access_token(request_token)
#save token file
TOKENS = 'dropbox_token.txt'
token_file = open(TOKENS,'w')
token_file.write("%s|%s" % (access_token.key,access_token.secret) )
token_file.close()

client = client.DropboxClient(sess)

print "linked account:", client.account_info()

f = open('t.txt')
response = client.put_file('/uploaded_with_python.txt', f)
print "uploaded:", response

folder_metadata = client.metadata('/')
print "metadata:", folder_metadata

f, metadata = client.get_file_and_metadata('/uploaded_with_python',rev='362e2029684fe')
out = open('/uploaded_with_python.txt', 'w')
out.write(f)
print(metadata) 
```

我收到此错误：

```
Traceback (most recent call last):
  File "dropb.py", line 14, in <module>
    token_file = open(TOKENS)
NameError: name 'TOKENS' is not defined 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T10:31:21.720

您可以将 access_token 写入文件：

```
TOKENS = 'dropbox_token.txt'
token_file = open(TOKENS,'w')
token_file.write("%s|%s" % (access_token.key,access_token.secret) )
token_file.close() 
```

如果您这样做一次，那么您可以使用该令牌：

```
token_file = open(TOKENS)
token_key,token_secret = token_file.read().split('|')
token_file.close()

sess = session.DropboxSession(APP_KEY,APP_SECRET, ACCESS_TYPE )
sess.set_token(token_key,token_secret)
client = client.DropboxClient(sess) 
```

# sql - Postgresql 选择直到达到一定的总量

> ID：10549327
> 
> 赞同：11
> 
> 时间：2012-05-11T10:04:09.917
> 
> 标签：sql, postgresql, select

我想知道是否可以就以下问题获得任何帮助。

我有一个交易表（如下所示），我只想选择交易，直到我的总金额达到一定金额。

`Transactions`桌子

```
 id |   date   | amount 
----|----------|--------
 1  | 1/1/2012 |   2 
 2  | 2/1/2012 |   3 
 3  | 3/1/2012 |   4
 4  | 4/1/2012 |   20 
 5  | 5/1/2012 |   1 
 6  | 6/1/2012 |   2 
```

现在说我想在表格上进行选择，直到总数为 6 即前 2 行，我该怎么做？

我在想也许可以加入自己和一些总和，但并没有真正到达任何地方。如果可能的话，我宁愿不使用任何功能。

最低金额也有类似的东西。

任何帮助将非常感激 ：）

吨

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-11T10:54:42.460

```
select id, 
       date, 
       amount, 
       running_total
from (
    select id,
           date,
           amount,
           sum(amount) over (order by date asc) as running_total
    from transactions
) t
where running_total <= 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:46:14.857

```
select T1.*
from Transactions as T1
where 6 - (select sum(T2.amount) 
               from Transactions as T2 where  T2.id <= T1.id
          ) >= 0
order by id asc 
```

如果 Postgres 支持 SQL Server 之类的子查询，则此查询适用于 SQL Server 是否可以帮助您

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T10:57:21.740

尽管这可能不是最有效的方式（本质上，您仍然是首先选择所有内容），但我会考虑使用运行总计。

就像是：

```
SELECT
  *
FROM
  (
  SELECT
    id
    , date
    , amount
    , (SELECT SUM(amount) FROM Transactions WHERE id <= t.id) AS RunningTotal
  FROM
    Transactions t
) t1
WHERE
  t1.RunningTotal < 6 
```

# mysql - mysql select true if... 语句满足两个条件

> ID：10549332
> 
> 赞同：0
> 
> 时间：2012-05-11T10:04:23.357
> 
> 标签：mysql

我有一个带有布尔值的表，我想知道一组 id 是否同时具有这两个值。

此 sql 选择我要测试的产品组：

```
SELECT 
  cp.ItemID,
  cp.IsUnitsOfMeasure
from grouped_products gp
LEFT JOIN products p ON p.product_id = gp.product_id
LEFT JOIN c_products cp ON cp.ItemID = p.product_id
WHERE gp.group_id=123 
```

我想知道该组的 cp.IsUnitsOfMeasure 是否同时包含 1 和 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:08:27.073

试试这个：

```
SELECT 
    cp.ItemID,
    SUM(cp.IsUnitsOfMeasure) AS sum,
    COUNT(cp.IsUnitsOfMeasure) AS count,
    from grouped_products gp
LEFT JOIN products p ON p.product_id = gp.product_id
LEFT JOIN c_products cp ON cp.ItemID = p.product_id
WHERE gp.group_id=123 
```

*   如果`sum`等于，`count`则所有行都为 1
*   如果`sum`等于 0 那么所有的行都为 0
*   在所有其他情况下：组中有 1 和 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:09:20.557

```
SELECT   gp.group_id,
         SUM(cp.IsUnitsOfMeasure=0) AND SUM(cp.IsUnitsOfMeasure=1) AS ContainsBoth,
FROM     grouped_products AS gp
  LEFT JOIN products      AS  p USING (product_id)
  LEFT JOIN c_products    AS cp ON cp.ItemID = p.product_id
GROUP BY gp.group_id 
```

`ContainsBoth`将是`TRUE`或`FALSE`表示每个相应的组是否同时包含*一个*with`c_product`和`IsUnitsOfMeasure=0` *另一个*with `=1`。

# iphone - UISearchBar 和 UITableView

> ID：10549337
> 
> 赞同：0
> 
> 时间：2012-05-11T10:04:47.827
> 
> 标签：iphone, objective-c, uitableview, uisearchbar

运行我的应用程序时出现以下错误，

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UITableViewController loadView] 加载了“2-view-3”笔尖，但没有获得 UITableView。

以下是我正在使用的代码，

视图控制器.h

```
@interface ViewController : UITableViewController <UISearchDisplayDelegate,UITableViewDataSource,UITableViewDelegate>

@property (nonatomic,strong) NSArray *arForTable;
@property (nonatomic,strong) NSArray *arForSearch; 
```

视图控制器.m

```
@implementation ViewController

@synthesize arForTable = _arForTable;
@synthesize arForSearch = _arForSearch;

-(void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.arForTable = [NSArray arrayWithObjects:
                       [NSDictionary dictionaryWithObjectsAndKeys:@"Pending",@"name",@"2",@"value",nil],
                       [NSDictionary dictionaryWithObjectsAndKeys:@"Pent",@"name",@"22",@"value",nil],
                       [NSDictionary dictionaryWithObjectsAndKeys:@"Pen",@"name",@"5",@"value",nil],
                       [NSDictionary dictionaryWithObjectsAndKeys:@"Neon",@"name",@"7",@"value",nil],
                       [NSDictionary dictionaryWithObjectsAndKeys:@"Spark",@"name",@"99",@"value",nil],
                       nil];
    self.arForSearch = nil;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return (tableView == self.tableView)?self.arForTable.count:self.arForSearch.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    }

    NSDictionary *dToAccess = (self.tableView==tableView)?[self.arForTable objectAtIndex:indexPath.row] : [self.arForSearch objectAtIndex:indexPath.row];
    [(UILabel*)[cell viewWithTag:1] setText:[dToAccess valueForKey:@"name"]];
    [(UILabel*)[cell viewWithTag:2] setText:[dToAccess valueForKey:@"value"]];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

- (void)filterContentForSearchText:(NSString*)str{
    // for inCaseSensitive search
    str = [str uppercaseString];

    NSMutableArray *ar=[NSMutableArray array];
    for (NSDictionary *d in self.arForTable) {
        NSString *strOriginal = [d valueForKey:@"name"];
        // for inCaseSensitive search
        strOriginal = [strOriginal uppercaseString];

        if([strOriginal hasPrefix:str]) {
            [ar addObject:d];
        }
    }
    self.arForSearch=[NSArray arrayWithArray:ar];
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString];

    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:21:39.790

我没有找到 UITableView 或 UISearchBar 的任何出口，而且您继承了 UITableViewController 并实现了不需要的委托和数据源。此外，要拥有 UISearchBar 您将需要创建一个视图控制器来保存表格视图和uisearchbar 因为不建议在 tableview 上添加搜索栏，也不应该这样做。因此，拥有一个搜索栏委托表明您已尝试在 tableview 中实现搜索栏。

如果您需要在uitableviewcontroller 中添加搜索栏，您可以在navigationcontroller 上添加一个按钮。请通过本教程进行检查。

[UISearchBar 教程](http://www.iphonedeveloperdiary.com/2010/07/adding-a-uisearchbar-to-top-part-tableview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:11:24.933

由于你的类是 UITableViewController 类型，你不需要实现 UITableViewDataSource 和 UITableViewDelegate 接口。此外，您需要在界面构建器中有一个 UITableView 对象，并且它应该作为类的视图出口链接。然后只会加载屏幕并运行

希望这可以帮助您消除问题。

# titanium - 当应用程序在 Titanium 中关闭时，Android 服务停止工作

> ID：10549339
> 
> 赞同：1
> 
> 时间：2012-05-11T10:04:49.147
> 
> 标签：titanium, appcelerator, android-service, titanium-mobile, appcelerator-mobile

我创建了一个服务，当我通过按返回按钮关闭我的应用程序时运行。我不知道它是否是正确的方法，但当应用程序在前台运行时它工作正常。我的`androidService`文件放在 android 文件夹中，它的条目在 tiapp.xml 文件中。

在我的`androidService.js`档案中

```
 var locUpdate = require('/locationUpdate');
  locUpdate.userLocationUpdate(); 
```

现在我怀疑我们是否可以使用模块或在服务中调用模块。或者我必须只在服务文件中编写我的所有逻辑（API 调用等）。[使用 SDK 2.0.1] 任何帮助

# cocos2d-iphone - 使用cocos2d iPhone制作流动背景效果的问题

> ID：10549341
> 
> 赞同：0
> 
> 时间：2012-05-11T10:05:05.127
> 
> 标签：cocos2d-iphone

我正在使用 cocos2d 并尝试制作背景流动的效果......所以我制作了以下代码。但是有一些问题。当时间到时，两个图像之间的距离比第一次更大。这是为什么？我无法理解这一点，任何人帮助我？错误在哪里。代码如下。

*-(void) startScreen:(ccTime) dt {*

 *```
mBackgroundFar.position = ccp(mBackgroundFar.position.x - 50*dt , mBackgroundFar.position.y);
if (mBackgroundFar.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundFar setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundFar.position.y)];
mBackgroundFar1.position = ccp(mBackgroundFar1.position.x - 50*dt , mBackgroundFar1.position.y);
if (mBackgroundFar1.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundFar1 setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundFar1.position.y)];

mBackgroundMiddle.position = ccp(mBackgroundMiddle.position.x - 150*dt , mBackgroundMiddle.position.y);
if (mBackgroundMiddle.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundMiddle setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundMiddle.position.y)];
mBackgroundMiddle1.position = ccp(mBackgroundMiddle1.position.x - 150*dt , mBackgroundMiddle1.position.y);
if (mBackgroundMiddle1.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundMiddle1 setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundMiddle1.position.y)];

mBackgroundNear.position = ccp(mBackgroundNear.position.x - 250*dt , mBackgroundNear.position.y);
if (mBackgroundNear.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundNear setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundNear.position.y)];
mBackgroundNear1.position = ccp(mBackgroundNear1.position.x - 250*dt , mBackgroundNear1.position.y);
if (mBackgroundNear1.position.x < -SCREEN_WIDTH * 2 )
    [mBackgroundNear1 setPosition:ccp(SCREEN_WIDTH*2 , mBackgroundNear1.position.y)]; 
```* 

*}*

在这里，图像大小是 2*ScreenWidth of iphone(480*2)，所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:21:17.000

假设您的图像从右向左滚动。根据您的代码，一旦图像滚动超过某个点，您将其移回右侧。

问题是，位置不基于像素边界。您实际上可以将图像定位在子像素边界上，例如 {100.5, 100.12345}。这可能会产生间隙，尤其是当您的滚动代码容易产生舍入错误时。例如，如果您将移动速度乘以更新之间的增量时间，以使图像以相同的速率滚动，而不管帧速率如何，这很容易发生。

最简单的解决方法是将两个图像重叠 1 个像素。另一种可能的解决方案是将所有图像添加到同一节点（也可以是 spritebatch 节点或图层），然后仅移动包含图像的单个节点。这样，图像之间始终保持固定距离。

# javascript - 用 JavaScript 计算真实的 box-shadow

> ID：10549344
> 
> 赞同：3
> 
> 时间：2012-05-11T10:05:17.007
> 
> 标签：javascript, css

我正在构建一个图书库 web 应用程序，其中的图书可在书架之间拖动。 

应用于`box-shadow`书籍使它们看起来更加逼真，但我想知道我是否可以更进一步，`box-shadow`通过相对于单个选定“光源”点的位置动态计算每本书的值，就像游戏引擎一样。 

因此，如果我们选择顶部中心点作为光源，左边的书会有左下阴影，右边的书会有右下阴影。底部的书会得到更大高度的阴影，等等。我们可能需要指定光源的深度（z 坐标）及其位置。

虽然`box-shadow`不允许复杂的逼真阴影，但我怀疑调整阴影大小和角度对于矩形对象（例如书籍）的位置来说已经绰绰有余，可以使它们更加逼真。 

有没有人已经研究过在 JavaScript 中实现这个？`box-shadow`您是否知道任何计算特定光源点值的开源库？如果不是，这个想法在某种程度上是我没有想到的本质上是错误的，还是没有人尝试过这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:11:19.047

一个名叫杰夫帕默的家伙对此做了一个实验

需要 jQuery 和 jQuery UI Draggable（[参见演示](http://www.wewillbeok.com/likeacastshadow/)）

**你的html：**

```
<div id="light_source">Light Source<br />(drag me)</div>
<div id="div1" class="needs_shadow">(drag me)</div>
<div id="div2" class="needs_shadow">(drag me)</div> 
```

**你的 JavaScript**

```
$(document).ready(function() {
  $("div").draggable({
    drag: function() { make_shade() }
  });
  make_shade();  
});

function make_shade() {
  var light = $("div#light_source");
  var light_pos = light.position();
  var light_x = light_pos.left + (light.width() / 2);
  var light_y = light_pos.top + (light.height() / 2);

  $(".needs_shadow").each(function() {
    var div1 = $(this);
    var div1_pos = div1.position();

    var div_x = div1_pos.left + (div1.width() / 2);
    var div_y = div1_pos.top + (div1.height() / 2);

    var left_diff = light_x - div_x;
    var top_diff = light_y - div_y;

    var left = (left_diff / 10) * -1;
    var top = (top_diff / 10) * -1;

    var distance = Math.sqrt(Math.pow(left_diff, 2) + Math.pow(top_diff, 2));
    distance = distance / 10;

    shadow_style = left + "px " + top + "px " + distance + "px #3f3f3f";
    div1.css("-moz-box-shadow", shadow_style);
    div1.css("-webkit-box-shadow", shadow_style);
    div1.css("box-shadow", shadow_style);
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:42:27.120

我在评论中写了我的尝试，但也许我会得到支持，所以我也会在答案中写出来。:D。

```
var source = [0, 0], faktor = [10, 20]; 
```

source 是光应该在的位置，faktor 是阴影的 faktor（[0] 表示阴影位置，[1] 表示模糊）。

```
function addShadows() {
    var i, j, position, sizeE, distance; for(i=0,j=arguments.length;i<j;++i) {
        position = offset(arguments[i]); // Get position from element

        sizeE = size(arguments[i]); // Get width and height from element

        distance = parseInt(Math.sqrt(Math.pow(position[0] + sizeE[0] / 2 - source[0], 2) + Math.pow(position[1] + sizeE[1] / 2 - source[1], 2))) / faktor[1]; // calculate a distance for bluring (middle of element to source)

        arguments[i].style.cssText += 'box-shadow: ' + ((position[0] + sizeE[0] - source[0]) / faktor[0]) + 'px ' + ((position[1] + sizeE[1] - source[1]) / faktor[0]) + 'px ' + distance + 'px #555555'; // add the shadow
    }
} 
```

该函数`addShadows`将为所有参数添加阴影。

```
function getStyle(element, attribut) {
    var style;

    if(window.getComputedStyle) {
        style = window.getComputedStyle(element, null);
    } else {
        style = element.currentStyle;
    }

    return style[attribut];
}
function offset(element) {
    var pos = [parseInt(getStyle(element, 'border-top')), parseInt(getStyle(element, 'border-top'))];

    while(element !== null) {
        pos[0] += element.offsetLeft;
        pos[1] += element.offsetTop;

        element = element.offsetParent;
    }

    return pos;
}
function size(element) {
    return [element.offsetWidth, element.offsetHeight];
}
function id(idE) {
    return document.getElementById(idE);
} 
```

上面的四个函数只是辅助函数。

JSfiddle：http: [//jsfiddle.net/R5UbL/1/](http://jsfiddle.net/R5UbL/1/)

# python - 如何使用列表理解从列表中删除重复项？

> ID：10549345
> 
> 赞同：14
> 
> 时间：2012-05-11T10:05:23.397
> 
> 标签：python, list-comprehension

如何使用列表理解从列表中删除重复项？我有以下代码：

```
a = [1, 2, 3, 3, 5, 9, 6, 2, 8, 5, 2, 3, 5, 7, 3, 5, 8]
b = []
b = [item for item in a if item not in b] 
```

但它不起作用，只会产生相同的列表。为什么它产生一个相同的列表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T10:09:33.967

它生成一个相同的列表，因为`b`它在运行时不包含任何元素。你想要什么：

```
>>> a = [1, 2, 3, 3, 5, 9, 6, 2, 8, 5, 2, 3, 5, 7, 3, 5, 8]
>>> b = []
>>> [b.append(item) for item in a if item not in b]
[None, None, None, None, None, None, None, None]
>>> b
[1, 2, 3, 5, 9, 6, 8, 7] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-11T10:06:49.077

如果您不介意使用与列表理解不同的技术，您可以使用一个集合：

```
>>> a = [1, 2, 3, 3, 5, 9, 6, 2, 8, 5, 2, 3, 5, 7, 3, 5, 8]
>>> b = list(set(a))
>>> print b
[1, 2, 3, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T10:07:06.580

`keys`在`dict`以值 in`a`作为其键的构造上使用。

```
b = dict([(i, 1) for i in a]).keys() 
```

或使用一组：

```
b = [i for i in set(a)] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T10:09:47.803

列表不变的原因是它`b`开始时是空的。这意味着`if item not in b`永远是`True`。只有在生成列表之后，才会将这个新的非空列表分配给变量`b`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-11T12:14:51.903

使用[groupby](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
>>> from itertools import groupby
>>> a = [1, 2, 3, 3, 5, 9, 6, 2, 8, 5, 2, 3, 5, 7, 3, 5, 8]
>>> [k for k, _ in groupby(sorted(a, key=lambda x: a.index(x)))]
[1, 2, 3, 5, 9, 6, 8, 7] 
```

如果您不关心值首先出现在原始列表中的哪个顺序，请省略 key 参数，例如

```
>>> [k for k, _ in groupby(sorted(a))]
[1, 2, 3, 5, 6, 7, 8, 9] 
```

你可以用`groupby`. 要识别多次出现的项目：

```
>>> [k for k, v in groupby(sorted(a)) if len(list(v)) > 1]
[2, 3, 5, 8] 
```

或者建立一个频率字典：

```
>>> {k: len(list(v)) for k, v in groupby(sorted(a))}
{1: 1, 2: 3, 3: 4, 5: 4, 6: 1, 7: 1, 8: 2, 9: 1} 
```

[itertools](http://docs.python.org/library/itertools.html)模块中有一些非常有用的功能：`chain`，仅举几例！`tee``product`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-11T10:45:50.420

```
>>> from itertools import groupby
>>> repeated_items = [2,2,2,2,3,3,3,3,4,5,1,1,1]
>>> [
...     next(group)
...     for _, group in groupby(
...         repeated_items,
...         key=repeated_items.index
...     )
... ]
[2, 3, 4, 5, 1] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-10T02:40:04.493

[对于 Python 3.6+，与Niek de Klein 最出色的解决方案](https://stackoverflow.com/a/10549362/364696)相比，有一个改进（主要缺陷是它丢失了输入顺序）。由于`dict`s 现在是插入排序的，您可以这样做：

```
b = list(dict.fromkeys(a)) 
```

在早期的 Python 上，你会这样做：

```
from collections import OrderedDict

b = list(OrderedDict.fromkeys(a)) 
```

虽然它并没有那么快（即使`OrderedDict`移动到 C 层，它也保留了大量开销来支持`dict`不支持它们的重新排序操作，避免了）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-03T07:01:06.800

```
>>> a = [10,20,30,20,10,50,60,40,80,50,40,0,100,30,60]
>>> [a.pop(a.index(i, a.index(i)+1)) for i in a if a.count(i) > 1]
>>> print(a) 
```

# android - android中的页面卷曲动画？

> ID：10549348
> 
> 赞同：10
> 
> 时间：2012-05-11T10:05:32.790
> 
> 标签：android, view, page-curl

任何人都可以知道为视图或布局实现卷曲效果。我搜索了很多关于它的东西，但我不知道。我参考以下链接

[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

但是这两个链接仅用于为图像提供效果。我尝试使用 harism 代码，我只创建一个布局并在显示后转换为位图。它对我来说是成功的。但它不像视图那样工作。意味着只是一个静态页面（如果超出文本大小，则没有滚动条）。如果有任何想法，请向我提出建议。

```
public class CurlActivity extends Activity {

    private CurlView mCurlView;
    private BitmapDrawable[] bmp = new BitmapDrawable[7];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int index = 0;
        if (getLastNonConfigurationInstance() != null) {
            index = (Integer) getLastNonConfigurationInstance();
        }
        mCurlView = (CurlView) findViewById(R.id.curl);
        mCurlView.setPageProvider(new PageProvider());
        mCurlView.setSizeChangedObserver(new SizeChangedObserver());
        mCurlView.setCurrentIndex(index);
        mCurlView.setBackgroundColor(0xFF202830);

        for (int i = 0; i < bmp.length; i++) {
            bmp[0] = (BitmapDrawable) getResources().getDrawable(
                    R.drawable.obama);
            bmp[1] = (BitmapDrawable) getResources().getDrawable(
                    R.drawable.road_rage);
            if (i < 2)
                continue;

            TextView b = new TextView(this);
            b.setLayoutParams(new LayoutParams(480, 854));
            b.setText("page " + i);
            b.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
            b.setTextColor(Color.BLACK);
            b.setBackgroundColor(Color.WHITE);
            bmp[i] = new BitmapDrawable(loadBitmapFromView(b));

        }

        // This is something somewhat experimental. Before uncommenting next
        // line, please see method comments in CurlView.
        // mCurlView.setEnableTouchPressure(true);
    }

    public static Bitmap loadBitmapFromView(View v) {
        Bitmap b = Bitmap.createBitmap(v.getLayoutParams().width,
                v.getLayoutParams().height, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(b);
        v.layout(0, 0, v.getLayoutParams().width, v.getLayoutParams().height);
        v.draw(c);
        return b;
    }

    @Override
    public void onPause() {
        super.onPause();
        mCurlView.onPause();
    }

    @Override
    public void onResume() {
        super.onResume();
        mCurlView.onResume();
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        return mCurlView.getCurrentIndex();
    }

    /**
     * Bitmap provider.
     */
    private class PageProvider implements CurlView.PageProvider {

        // Bitmap resources.
        // private int[] mBitmapIds = { R.drawable.obama, R.drawable.road_rage,
        // R.drawable.taipei_101, R.drawable.world };

        @Override
        public int getPageCount() {
            return 7;
        }

        private Bitmap loadBitmap(int width, int height, int index) {
            Bitmap b = Bitmap.createBitmap(width, height,
                    Bitmap.Config.ARGB_8888);
            b.eraseColor(0xFFFFFFFF);
            Canvas c = new Canvas(b);

            Drawable d = bmp[index];
            // Drawable d = getResources().getDrawable(mBitmapIds[index]);

            int margin = 5;
            int border = 3;
            Rect r = new Rect(margin, margin, width - margin, height - margin);

            int imageWidth = r.width() - (border * 2);
            int imageHeight = imageWidth * d.getIntrinsicHeight()
                    / d.getIntrinsicWidth();
            if (imageHeight > r.height() - (border * 2)) {
                imageHeight = r.height() - (border * 2);
                imageWidth = imageHeight * d.getIntrinsicWidth()
                        / d.getIntrinsicHeight();
            }

            r.left += ((r.width() - imageWidth) / 2) - border;
            r.right = r.left + imageWidth + border + border;
            r.top += ((r.height() - imageHeight) / 2) - border;
            r.bottom = r.top + imageHeight + border + border;

            Paint p = new Paint();
            /**
             * Border Color
             */
            p.setColor(Color.RED);
            //p.setColor(0xFFC0C0C0);

            c.drawRect(r, p);
            r.left += border;
            r.right -= border;
            r.top += border;
            r.bottom -= border;

            d.setBounds(r);
            d.draw(c);

            return b;
        }

        @Override
        public void updatePage(CurlPage page, int width, int height, int index) {

            switch (index) {
            // First case is image on front side, solid colored back.
            case 0: {
                Bitmap front = loadBitmap(width, height, 0);
                page.setTexture(front, CurlPage.SIDE_FRONT);
                page.setColor(Color.rgb(180, 180, 180), CurlPage.SIDE_BACK);
                break;
            }
            // Second case is image on back side, solid colored front.
            case 1: {
                Bitmap back = loadBitmap(width, height, 2);
                page.setTexture(back, CurlPage.SIDE_BACK);
                page.setColor(Color.CYAN, CurlPage.SIDE_FRONT);
                break;
            }
            // Third case is images on both sides.
            case 2: {
                Bitmap front = loadBitmap(width, height, 1);
                Bitmap back = loadBitmap(width, height, 3);
                page.setTexture(front, CurlPage.SIDE_FRONT);
                page.setTexture(back, CurlPage.SIDE_BACK);
                break;
            }
            // Fourth case is images on both sides - plus they are blend against
            // separate colors.
            case 3: {
                Bitmap front = loadBitmap(width, height, 2);
                Bitmap back = loadBitmap(width, height, 1);
                page.setTexture(front, CurlPage.SIDE_FRONT);
                page.setTexture(back, CurlPage.SIDE_BACK);
                page.setColor(Color.argb(127, 170, 130, 255),
                        CurlPage.SIDE_FRONT);
                page.setColor(Color.WHITE, CurlPage.SIDE_BACK);
                break;
            }
            // Fifth case is same image is assigned to front and back. In this
            // scenario only one texture is used and shared for both sides.
            case 4:
                Bitmap front = loadBitmap(width, height, 0);
                page.setTexture(front, CurlPage.SIDE_BOTH);
                page.setColor(Color.argb(127, 255, 255, 255),
                        CurlPage.SIDE_BACK);
                break;
            }
        }

    }

    /**
     * CurlView size changed observer.
     */
    private class SizeChangedObserver implements CurlView.SizeChangedObserver {
        @Override
        public void onSizeChanged(int w, int h) {
            if (w > h) {
                mCurlView.setViewMode(CurlView.SHOW_TWO_PAGES);
                mCurlView.setMargins(.1f, .05f, .1f, .05f);
            } else {
                mCurlView.setViewMode(CurlView.SHOW_ONE_PAGE);
                mCurlView.setMargins(.1f, .1f, .1f, .1f);
            }
        }
    }

} 
```

像这样的截图。

![在此处输入图像描述](../Images/110ed775cf4ecaae745b1082a0b1339d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T09:17:57.400

我找到了一个示例代码。

[YouTube](http://www.youtube.com/watch?v=mP_AlvJqSLQ)

[媒体火](http://www.mediafire.com/download/9x3qm304nv9i805/PageFlipWithLayout.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T17:58:40.957

在滑动时，您可以将动态视图转换为位图数据，然后将其传递给页面卷曲库（隐藏实际视图）。卷页效果完成后，您可以恢复视图。

# java - 在 Java 中使用 XPath 解析 XML 时出现致命错误

> ID：10549349
> 
> 赞同：0
> 
> 时间：2012-05-11T10:05:35.580
> 
> 标签：java, xml, xpath, xml-parsing

我想解析一个 XML 文件。它在创建对象时抛出异常：

```
Document doc = builder.parse("Response.xml"); 
```

例外：

```
[Fatal Error] Response.xml:63:67: The prefix "UDF" for element "UDF:RTSIDUDF.LIST" is not bound.
Exception in thread "main" org.xml.sax.SAXParseException: The prefix "UDF" for element "UDF:RTSIDUDF.LIST" is not bound.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:249)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:180)
    at tallyreqandresponse.Ledger.main(Ledger.java:38)
Java Result: 1 
```

示例 xml 代码：

```
 <A>
 <LANGUAGENAME.LIST>
   <NAME.LIST TYPE="String">
       <NAME>ABC India (P) Ltd.,</NAME>
   </NAME.LIST>
   <LANGUAGEID TYPE="Number"> 1033</LANGUAGEID>
   <UDF:RTSIDUDF.LIST DESC="`RTSIDUDF`" ISLIST="YES" TYPE="Number">
       <UDF:RTSIDUDF DESC="`RTSIDUDF`"> 1387</UDF:RTSIDUDF>
   </UDF:RTSIDUDF.LIST>
   </LANGUAGENAME.LIST>
 </A> 
```

请帮我摆脱它。

编辑说明：添加 LANGUAGENAME.LIST 开始标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:18:05.153

您的输入标记不是命名空间格式正确的 XML，因此它被 XML 解析器拒绝。您需要使用例如修复输入

```
<A>
 <NAME.LIST TYPE="String">
       <NAME>ABC India (P) Ltd.,</NAME>
 </NAME.LIST>
 <LANGUAGEID TYPE="Number"> 1033</LANGUAGEID>
       <UDF:RTSIDUDF.LIST xmlns:UDF="http://example.com/" DESC="`RTSIDUDF`" ISLIST="YES" TYPE="Number">
                      <UDF:RTSIDUDF DESC="`RTSIDUDF`"> 1387</UDF:RTSIDUDF>
      </UDF:RTSIDUDF.LIST>
  </LANGUAGENAME.LIST>
</A> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:34:58.943

除了缺少的命名空间定义之外，似乎还有一个不匹配的标签：

```
</LANGUAGENAME.LIST> 
```

没有对应的开始标签。

如果你谷歌你会得到很多好的链接——例如`xml namespaces`看看[这里。](http://www.w3schools.com/XML/xml_namespaces.asp)

# java - 连接到android中的db时表中缺少字段

> ID：10549354
> 
> 赞同：0
> 
> 时间：2012-05-11T10:06:02.900
> 
> 标签：java, android, android-layout

使用准备好的语句，我尝试将值插入表中，显示**电子邮件中没有列名，**但很明显我没有错过项目中任何地方的电子邮件。

注册活动.java

```
public void reg_submit(View v){

    DataHelper con=new DataHelper(this);
    GetterRegistration model=new GetterRegistration();

        SQLiteDatabase db = con.getWritableDatabase();

        **String sql="insert into registration(name,email,password)values(?,?,?)";**

        SQLiteStatement stmt = db.compileStatement(sql);

        stmt.bindString(1, model.getName());
        stmt.bindString(2, model.getEmail());
        stmt.bindString(3,  model.getPassword());           
        stmt.execute();
        db.close();
        Intent in = new Intent(this, CocomoActivity.class);
        startActivityForResult(in, requestCode);

} 
```

}

数据助手.java

```
 public class DataHelper extends SQLiteOpenHelper {
        public static final String TABLE_COMMENTS = "registration";
        public static final String id= "_id";
        public static final String name = "name";
        **public static final String email = "email";**
        public static final String password = "password";

        private static final String DATABASE_NAME = "mydb.db";
        private static final int DATABASE_VERSION = 1;

        // Database creation sql statement
        private static final String DATABASE_CREATE = "create table "
            + TABLE_COMMENTS + "( " + id
                + " integer primary key autoincrement, " + name
                + " text not null,"+email
                +"text not null," +password
                +"text not null)"; 
```

这是 Logcat 中的错误报告

05-11 15:16:25.785: E/AndroidRuntime(704): 在 java.lang.reflect.Method.invoke(Method.java:507) 05-11 15:16:25.785: E/AndroidRuntime(704): 在android.view.View$1.onClick(View.java:2139) 05-11 15:16:25.785: E/AndroidRuntime(704): ... 11 更多 05-11 15:16:25.785: E/AndroidRuntime(704 ）：引起：**android.database.sqlite.SQLiteException：表注册没有名为email的列，编译时：插入注册（名称，电子邮件，密码）值（？，？，？）** 05-11 15:16:25.785: E/AndroidRuntime(704): 在 android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 05-11 15:16:25.785: E/AndroidRuntime(704): 在 android.database .sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92) 05-11 15:16:25.785: E/AndroidRuntime(704): 在 android.database.sqlite.SQLiteCompiledSql.(SQLiteCompiledSql.java:65) 05-11 15: 16:25.785: E/AndroidRuntime(704): 在 android.database.sqlite.SQLiteProgram.(SQLiteProgram.java:83) 05-11 15:16:25.785: E/AndroidRuntime(704): 在 android.database.sqlite。 SQLiteStatement.(SQLiteStatement.java:41) 05-11 15:16:25.785: E/AndroidRuntime(704): 在 android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1149) 05-11 15:16:25.785 : E/AndroidRuntime(704): 在 android.cocomo.login.RegistrationActivity.reg_submit(RegistrationActivity.java:45)。

任何帮助将不胜感激 。先感谢您。如果有人建议让我知道朋友，我仍然在尝试解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:10:52.157

电子邮件和文本之间没有空格。

```
 **email+"text** not null," +... 
```

在密码和文本之间

# hibernate - Hibernate：复合自然主键中的可选属性

> ID：10549358
> 
> 赞同：0
> 
> 时间：2012-05-11T10:06:26.683
> 
> 标签：hibernate, composite-primary-key, optional-values

我遇到了休眠问题。我有一个实体映射到具有自然复合主键的表。主键由强制代码和可选的日期或期间 ID 组成，因此 date 和 period_id 是互斥的。我将它映射到我的 hbm 中（是的，我们还没有注释），例如：

```
 <composite-id name="myEntity" class="myEntity">
        <key-property name="code" column="bookcode" />
        <key-property name="period" column="PRD_ID" />
        <key-property name="pDate" column="PNL_DT"/>
    </composite-id> 
```

但是对日期不为空且期间为空的 myEntity 进行查询无法填充 myEntity 对象。我看不出它为什么会失败，但我可以看到在返回 period 的 NULL 值后，hibernate 停止记录返回的属性。

```
org.hibernate.type.NullableType.nullSafeSet:151 - binding '1157' to parameter: 4
org.hibernate.type.NullableType.nullSafeGet:193 - returning '1157' as column: LVE1_69_
org.hibernate.type.NullableType.nullSafeGet:187 - returning null as column: PRD2_69_
END OF LOGGING 
```

删除 PeriodId 键属性解决了他的问题，并且 myEntity 已成功填充。

```
org.hibernate.type.NullableType.nullSafeSet:151 - binding '1156' to parameter: 4
org.hibernate.type.NullableType.nullSafeGet:193 - returning '1156' as column: LVE1_69_
org.hibernate.type.NullableType.nullSafeGet:193 - returning '2012-04-06 00:00:00' as column: PNL2_69_
org.hibernate.type.NullableType.nullSafeGet:193 - returning '1156' as column: LVE1_69_
LOTS MORE RETURNING lines. 
```

我怀疑 key-property 中有一个 not-null="false" 属性，但我在文档中找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:28:11.010

因为 id 对应于数据库中的主键，默认情况下不为空，Hibernate 认为它们是相同的。如果代码本身是唯一的，则将其声明为 id 并将其他 2 保留为正常的多对一

# python - pypy如何找到有关实现列表类型的文件

> ID：10549359
> 
> 赞同：-3
> 
> 时间：2012-05-11T10:06:39.447
> 
> 标签：python, list, cpython, pypy

如何在pypy上找到python列表实现我想阅读源代码bui我没有找到任何人可以提供帮助谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:40:25.300

你看过他们的[开发指南](http://doc.pypy.org/en/latest/coding-guide.html)吗？它很好地了解了[源代码](https://bitbucket.org/pypy/pypy)的布局方式。

从文档：

> 标准对象空间 (pypy/objspace/std/) 是 CPython 的对象库（分发中的“Objects/”子目录）的直接等价物。它是用低级语言实现的常见 Python 类型。

浏览代码会给出与您相关的[listobject.py](https://bitbucket.org/pypy/pypy/src/5e2a8b1e5782/pypy/objspace/std/listobject.py)和[listtype.py](https://bitbucket.org/pypy/pypy/src/5e2a8b1e5782/pypy/objspace/std/listtype.py)。

# vb.net - 如果对 DataTable 的验证失败 VB.Net，如何在 gridview 上突出显示无效数据？

> ID：10549360
> 
> 赞同：0
> 
> 时间：2012-05-11T10:06:47.617
> 
> 标签：vb.net, validation, gridview, datatable, gridviewrow

我尽力将程序缩小为以下代码。在此示例中，我将英国和美国作为有效国家/地区。如果有人住在这些国家/地区之外，我想显示一条错误消息并在网格视图上突出显示它们。例如，John 和 Chris 来自中国，因此他们应该在 gridview 上突出显示。有可能这样做吗？请看示例图片。可以仅突出显示名称或整行。

非常感谢。

```
 Dim dt As New DataTable
    dt.Columns.Add("ID")
    dt.Columns.Add("Name")
    dt.Columns.Add("Country")

    dt.Rows.Add("1", "John", "China")
    dt.Rows.Add("2", "Harry", "USA")
    dt.Rows.Add("3", "Joe", "UK")
    dt.Rows.Add("4", "Emma", "UK")
    dt.Rows.Add("5", "Chris", "China")
    dt.Rows.Add("6", "Jenny", "UK")

    Dim isValid As Boolean = True
    Dim keywords() As String = {"UK", "USA"}
    Dim str As String = ""

    For Each x As DataRow In dt.Rows
        If Not keywords.Contains(x("Country").ToString()) = True Then
            isValid = False
        End If
    Next

    If isValid = False Then
        lblmessage.Text = "Some people don't live in valid countries"
    End If

    GridView1.DataSource = dt
    GridView1.DataBind() 
```

![在此处输入图像描述](../Images/38549eb16c45a662ccf8bdf8e3d61398.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:18:56.263

> 有可能这样做吗？

是的，一种方法是使用 GridView 的[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件。假设您有一个有效国家/地区的列表：

```
Private validCountries() As String = {"UK", "USA"}

Protected Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs)
    Select Case e.Row.RowType
        Case DataControlRowType.DataRow
            Dim row = DirectCast(e.Row.DataItem, DataRowView).Row
            Dim country = row.Field(Of String)("Country")
            ' assuming you're using TemplateFields with LblName for the Name of the user '
            Dim LblName = DirectCast(e.Row.FindControl("LblName"), Label)
            If Not validCountries.Contains(country.ToUpper) Then
                LblName.CssClass = "InvalidCountry"
            End If
    End Select
End Sub 
```

如果您改用 BoundFields，则需要在表格单元格上应用 CSS

```
e.Row.Cells(1).CssClass = "InvalidCountry" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:17:17.410

我会保留蒂姆的答案作为正确答案。我非常感谢他的帮助。如果有人像我一样尝试做同样的事情，这是我们可以做的另一种选择。希望它对那里的人有所帮助。

```
 Imports System.Data

    Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    Dim dt As New DataTable
    dt.Columns.Add("ID")
    dt.Columns.Add("NAME")

    dt.Rows.Add("1", "John")
    dt.Rows.Add("2", "Chris")
    dt.Rows.Add("3", "")

    Dim str As New StringBuilder

    If checkName(dt) = False Then
        str.Append("Empty Name <br />")
    End If

    Literal1.Text = str.ToString

    GridView1.DataSource = dt
    GridView1.DataBind()

    For Each gvrow In GridView1.Rows
        For iCol = 0 To gvrow.Cells.Count - 1
            If InStr(gvrow.Cells(iCol).Text, "***") > 0 Then
                gvrow.Cells(iCol).Text = Replace(gvrow.Cells(iCol).Text, "***", "")
                gvrow.Cells(iCol).ForeColor = Drawing.Color.Red
                gvrow.Cells(iCol).BackColor = Drawing.Color.LightCyan
            End If

        Next
    Next

    End Sub

    Private Function checkName(dt As DataTable) As Boolean

    For Each x In dt.Rows
        If x("Name") = "" Then
            x("Name") = "***"
            Return False
        End If
    Next

    Return True
    End Function

    End Class 
```

# macos - 多模态窗口问题

> ID：10549363
> 
> 赞同：0
> 
> 时间：2012-05-11T10:06:49.877
> 
> 标签：macos, cocoa

我有两个模态窗口，一个在另一个之上。订购时最顶部的模态窗口，下面的窗口不采取行动。在顶部模态窗口排序后我应该做什么以使较低级别成为关键窗口并接受鼠标事件或任何其他操作。

这是下面的代码，用于从顶部模式窗口中订购

```
NSInteger result = [NSApp runModalForWindow:topWindow];
if (result){
    //do some saving here
}
[runModalForWindow:topWindow nil]; 
```

问候，

# python - 是否可以制作一个也是实例方法的类方法？

> ID：10549364
> 
> 赞同：0
> 
> 时间：2012-05-11T10:06:54.293
> 
> 标签：python, testing

> **可能重复：**
> [类和实例](https://stackoverflow.com/questions/7750896/the-same-method-for-class-and-instance)
> [使用相同的方法同时使用来自类和实例的方法](https://stackoverflow.com/questions/10413488/use-a-method-both-from-a-class-and-from-an-instance)

我正在做一个项目，我们有用 python 编写的测试用例。在某些测试用例中，我们在 setUpClass 中进行大部分设置，在某些情况下在 setUp 中进行设置。例如，我们在数据库中准备数据。我们有填充数据库等的辅助方法。我想要的是既作为类方法又作为实例方法工作的方法。例如：

```
class TestBase(object):

    def insertStuff(self, data):
        self.cursor.execute(...)

# Usage 1, class
class Test1(TestBase):

    @classmethod
    def setUpClass(cls):
        cls.insertStuff([1, 2, 3])

# Usage 2, instance
class Test2(TestBase):

    def setUp(self):
        self.insertStuff([1, 2, 3]) 
```

这不起作用，因为 insertStuff 不是类方法。如果我们改变它，使它成为一个类方法，用法 2 将不起作用。

当然，我们可以让它成为一个静态方法，将类或实例作为参数，但我觉得这很丑陋，如果可能的话，我宁愿以更好的方式来做。

至少我想知道是否有可能让我停止思考。我希望测试用例清晰易读，如果基类中有丑陋的解决方案，我可以接受。

# java - 高效的性能测量

> ID：10549367
> 
> 赞同：4
> 
> 时间：2012-05-11T10:06:57.607
> 
> 标签：java, performance

在这个问题中，我想质疑如何测试 Java 代码性能的知识。通常的方法遵循以下原则：

```
long start = System.nanoTime();

for( int i=0; i<SOME_VERY_LARGE_NUMBER; i++) {
    ...do something...
}

long duration = System.nanoTime() - start;
System.out.println( "Performance: " 
    + new BigDecimal( duration ).divide( 
      new BigDecimal( SOME_VERY_LARGE_NUMBER, 3, RoundingMode.HALF_UP ) ) ); 
```

“优化”版本将调用移动`System.nanoTime()`到循环中，增加了误差范围，因为与比较相比`System.nanoTime()`需要更长的时间（并且在运行时行为中更难以预测）`i ++`。

我的批评是：

这给了我平均运行时间，但这个值取决于一个我并不真正感兴趣的因素：比如测试循环运行时的系统负载或 JIT/GC 启动时的跳转。

在大多数情况下，这种方法不是更好吗？

1.  经常运行代码来测量以强制进行 JIT 编译
2.  在循环中运行代码并测量执行时间。记住最小值并在该值稳定时中止循环。

我的理由是我通常想知道某些代码的速度有多快（下限）。任何代码都可能因外部事件（鼠标移动、显卡中断，因为桌面上有模拟时钟、交换、网络数据包……）而变得任意慢，但大多数时候，我只想知道有多快我的代码可以在完美的情况下。

它还可以使性能测量更快，因为我不必运行代码几秒钟或几分钟（以消除不需要的影响）。

有人可以确认/揭穿这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:54:14.297

我认为您提出的建议非常合理，并进行了一些调整：

1）我会报告中位数 - 或一堆百分位数 - 而不是最小值。如果您的代码对垃圾收集器施加了很大压力，那么简单地取最小值很容易无法接受（只需一次迭代以适应两次连续的 GC 暂停）。

2) 在许多情况下，测量 CPU 时间而不是挂钟时间是有意义的。这解决了在同一个盒子上运行其他代码的一些影响。

3）一些基准测试工具使用两级循环：内循环重复执行操作，外循环查看内循环前后的时钟。然后在外循环的迭代中汇总观察结果。

最后，以下内容很好地概述了需要注意的特定于 JVM 的问题：[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:55:39.040

您可以使用[**-XX:CompileThreshold**](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html) JVM 选项来指定 JIT 何时启动。然后您可以通过在运行定时循环之前运行大于 CompileThreshold 的循环来“预热”您的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:39:49.813

我会运行 SOME_VERY_LARGE_NUMBER 循环 50 次并计算性能最佳循环的平均值。这通常在其他基准测试中完成，而不仅仅是代码微基准测试。

我还认为 GC 引起的性能问题通常是代码的一部分。您可能不应该将 GC 排除在外，因为分配大量内存的例程应该为此付出一定的基准价格。如果您选择的 SOME_VERY_LARGE_NUMBER 足够大，则建议的方法会考虑每次调用的平均 GC 成本。

关于您的建议：所有计时器的精度都有限，因此很可能是一个简短的例程在零时钟滴答内完成。这意味着您的算法会发现例程在零时间内运行。这显然是不正确的。

# c# - 在单个 xml 文件中写入多个 xml 节点

> ID：10549370
> 
> 赞同：0
> 
> 时间：2012-05-11T10:07:15.093
> 
> 标签：c#, c#-4.0, linq-to-xml

我有使用 LINQ to XML 的代码。我希望每次都将该 XElement 写入一个新的 XML 文件，以便其中的所有 XML 都存储在指定位置的 XML 文件中。

```
XElement xml = new XElement("contacts",
                    new XElement("contact", 
                        new XAttribute("contactId", "2"),
                        new XElement("firstName", "Barry"),
                        new XElement("lastName", "Gottshall")
                    ),
                    new XElement("contact", 
                        new XAttribute("contactId", "3"),
                        new XElement("firstName", "Armando"),
                        new XElement("lastName", "Valdes")
                    )
                );

Console.WriteLine(xml); 
```

我希望追加 xml 变量并向其中添加更多节点，我尝试使用以下代码但无法获得它，我希望编写我在 EveryComment List 中获得的所有 xml

```
 XElement xml;
                    foreach (string Dcomment in EveryComment) 
                    {
                        string commentDetail = "http://www.edmunds.com" + Dcomment;
                        WebClient wc1 = new WebClient();
                        try { 
                            string comm = wc1.DownloadString(commentDetail);
                            string[] time_sep = { @"<time itemprop=""dtreviewed"" datetime=", "</time></div>" };
                            string[] car_split = {@"<span itemprop=""itemreviewed"">",@"</span><br/>        <div class=""header-5"">Review</div>"};
                            string[] name_comment_split = {@"<div class=""crr_by"">By <strong itemprop=""reviewer"">","</strong> on <time itemprop=",@"<div class=""header-5"">Review</div>        <span itemprop=""description"">",@"<div class=""header-5"">Favorite Features</div>" };
                            string[] get_name_comment = comm.Replace("\n", "").Replace("\t", "").Split(name_comment_split, StringSplitOptions.None);
                            string[] get_car_name = comm.Replace("\n","").Replace("\t","").Split(car_split, StringSplitOptions.None);
                            //CAR NAME AT 1 INDEX
                            string perfor,comfi,fuel,fun,interi,exteri,made,reliable;
                            string[] get_time = comm.Split(time_sep, StringSplitOptions.None);//TIME AT 1TH INDEX
                            comm = comm.Replace(@"""", "").Replace("\n"," ").Replace("\t"," ").Replace(" ","").Replace("\r","");
                            //HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
                            //doc.LoadHtml(comm);
                            //var links = doc.DocumentNode.Name="span".Select(n => n.["href"].Value).ToArray();
                            string[] comm_split = { "Performance<hr/><spanclass=ratingtitle=", "Comfort<hr/><spanclass=ratingtitle=", "FuelEconomy<hr/><spanclass=ratingtitle=", "Fun-to-Drive<hr/><spanclass=ratingtitle=", "InteriorDesign<hr/><spanclass=ratingtitle=", "ExteriorDesign<hr/><spanclass=ratingtitle=", "BuildQuality<hr/><spanclass=ratingtitle=", "Reliability</div><spanclass=rating-bigtitle=","<divclass=header-5>FavoriteFeatures</div>", "<divclass=header-5>SuggestedImprovements</div>" };
                            string[] features = comm.Split(comm_split, StringSplitOptions.None);
                            if (features[1].ElementAt(1) == '.')
                            {

                                perfor = features[1].Substring(0, 3);
                            }
                            else
                                perfor = features[1].Substring(0, 1);
                            if (features[2].ElementAt(1) == '.')
                            {

                                comfi = features[2].Substring(0, 3);
                            }
                            else
                                comfi = features[2].Substring(0, 1);
                            if (features[3].ElementAt(1) == '.')
                            {

                                fuel = features[3].Substring(0, 3);
                            }
                            else
                                fuel = features[3].Substring(0, 1);
                            if (features[4].ElementAt(1) == '.')
                            {

                                fun = features[5].Substring(0, 3);
                            }
                            else
                                fun = features[5].Substring(0, 1);
                            if (features[6].ElementAt(1) == '.')
                            {

                                interi = features[6].Substring(0, 3);
                            }
                            else
                                interi = features[6].Substring(0, 1);

                            if (features[7].ElementAt(1) == '.')
                            {

                                exteri = features[7].Substring(0, 3);
                            }
                            else
                                exteri = features[7].Substring(0, 1);

                            if (features[8].ElementAt(1) == '.')
                            {

                                reliable = features[8].Substring(0, 3);
                            }
                            else
                                reliable = features[8].Substring(0, 1);

               xml = new XElement("DOC", 
                    new XAttribute("Relevance", c1.relevance),
                    new XElement("Date", get_time[1]),
                    new XElement("Author", get_name_comment[1]),
                    new XElement("Text", get_name_comment[3]),
                    new XElement("Favourite",features[9]),
                    new XElement("Peformance",perfor),
                    new XElement("Fuel",fuel),
                    new XElement("Fun",fun),
                    new XElement("Interior",interi),
                    new XElement("Exterior",exteri),
                    new XElement("Reliability",reliable)
                );
                       // xml = new XElement(get_car_name

                        }
                        catch (Exception ex) 
                        {
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:09:15.097

```
xml.Save(path); 
```

还是有一些更微妙的东西，这不是问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:54:37.820

我在循环结束时将每个 xelemnt 转换为字符串并继续连接该字符串，在循环之后我通过字符串编写器在 .xml 文件中写入

# objective-c - “委托”属性可以支持多种协议吗？

> ID：10549374
> 
> 赞同：2
> 
> 时间：2012-05-11T10:07:20.533
> 
> 标签：objective-c, properties, delegates, protocols

我可以找到很多关于使对象支持多种协议的问题，但没有人确认 @property 是否可以。例如，我有一个具有以下属性的类：

```
@property (strong) id dataSource; 
```

此处传入的对象支持 UITableViewDataSource 协议，因此我可以毫无问题地分配它，在 ARC 中没有警告：

```
self.tableView.dataSource = self.dataSource; 
```

我还想实现另一个名为 CustomControllerSearchDelegate 的搜索协议。但是，如果我开始随机调用其他方法，ARC 就会开始抱怨。所以我们沿着协议路在我的对象中定义它并让属性支持它。这会导致分配给表数据源的问题。所以对于主要问题，我可以这样做：

```
@property (strong) id <UITableViewDataSource, CustomControllerSearchDelegate> dataSource; 
```

如果不是，什么是合适的选择？

或者，什么是正确的方法来消除这个编译器警告：

```
Assigning to 'id<UITableViewDataSource>' from incompatible type
'id<PickerViewControllerDataSource>' 
```

抱歉，如果这解释得不好。：/

- 编辑 -

所以我的协议现在定义为：

```
@protocol PickerViewControllerDataSource <UITableViewDataSource> 
```

属性定义为：

```
@property (strong) id <PickerViewControllerDataSource> dataSource; 
```

然而编译器会抛出以下错误：

```
No known instance method for selector 'objectAtIndexPath:' 
```

- 编辑 -

上面在自定义协议中声明。现在声明如下：

```
@protocol PickerViewControllerDataSource <UITableViewDataSource>

- (id)objectAtIndexPath:(NSIndexPath *)indexPath;

@optional

- (void)searchDataWithString:(NSString*)string;
- (void)cancelSearch;

@end 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:19:07.547

您可以创建一个包含其他协议的协议，例如：

```
@protocol MyDataSourceProtocol <UITableViewDataSource, CustomControllerSearchDelegate>
@end 
```

来自[Objective-C 编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)：

> 一个协议可以使用与类用于采用协议的相同语法来合并其他协议：
> 
> @protocol ProtocolName <协议列表>

您的`dataSource`财产将被定义为：

```
@property (strong) id <MyDataSourceProtocol> dataSource; 
```

或者，您的`CustomControllerSearchDelegate`协议可以包含以下`UITableViewDataSource`协议：

```
@protocol CustomControllerSearchDelegate <UITableViewDataSource>
  ... new methods here ...
@end 
```

在这种情况下，您的`dataSource`财产将被定义为：

```
@property (strong) id <CustomControllerSearchDelegate> dataSource; 
```

我个人更喜欢后一种方法。

# opengl - opengl 绘制深度缓冲图像

> ID：10549377
> 
> 赞同：1
> 
> 时间：2012-05-11T10:07:29.477
> 
> 标签：opengl, depth-buffer, stencil-buffer

在 openGL 上阅读时，我发现了一些我无法理解的东西。这是关于这个链接 [方法描述](http://www.glprogramming.com/red/chapter14.html#name18)的。我一直在努力实现他们所说的，但我没有掌握一些要素。假设我们有 3 张图像 i=0..2 **图像**[i][width*height*4]（考虑 rgba8 图像）和每个图像对应的深度浮点**深度**[i][width*height]。我将如何实施链接中描述的技术？如果我有压缩纹理而不是**图像，我也很感兴趣，我还能使用那里描述的技术吗？**编辑：我试图将解释放入代码中，但到目前为止我只能设法提出这个问题，因为我无法理解该过程

```
glDrawPixels(width,height,GL_DEPTH_COMPONENT,GL_FLOAT,depth[0]);
glEnable(GL_DEPTH_TEST);
glDepthMask(GL_FALSE);
glEnable(GL_STENCIL_TEST);  
glStencilFunc(GL_EQUAL,0x1,0x1);
glStencilOp(GL_KEEP,GL_KEEP,GL_REPLACE);
glDrawPixels(width,heigh,GL_RGBA,GL_UNSIGNED_BYTE,image[0]);
//don't know what comes next 
```

# cakephp - 如何向 add() 函数添加一个参数

> ID：10549379
> 
> 赞同：0
> 
> 时间：2012-05-11T10:07:36.337
> 
> 标签：cakephp

当然，我可以添加像 add($pid) 这样的参数。并像 control/add/4 一样调用。
但是当任何验证错误时，它会崩溃并告诉
“缺少参数 1 用于 ConsultingDetsController::add()” cakePHP 默认 add() 从哪里调用以及如何解决这个问题？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:02:53.787

当你编写一个函数，并想在 URL 中传递一个变量时，你可以这样写：

```
public function add($pid) {
    //... 
```

但是 - 如果这样写，任何时候你试图访问这个函数，你必须有那个变量，否则你会得到你提到的错误。

如果您希望能够访问该函数并且有时将其传递一个变量（例如，当您提交表单时，并且不一定需要 URL 变量），**只需设置参数的值**：

```
public function add($pid = null) { 
```

这样做将允许您通过`controller/add/4`or调用该函数，`controller/add`并且不会导致错误。

然后，在尝试将它用于重要的事情之前，请确保您验证 $pid 有数据：

```
if(!empty($pid)) {  //or something similar, depending on your data 
```

# python - 如何在 QSqlDatabase 中创建自定义函数：sqlite 和 PyQT 中的正则表达式

> ID：10549380
> 
> 赞同：6
> 
> 时间：2012-05-11T10:07:40.917
> 
> 标签：python, regex, sqlite, qt, pyqt

我们在 sqlite 和 python 中定义 python 类型 REGEXP 函数，遵循[Problem with regexp python and sqlite](https://stackoverflow.com/questions/5365451/problem-with-regexp-python-and-sqlite)

我们如何在 PyQT 中做同样的事情，即。使用 QSqlDatabase？

更准确地说，我们使用 REGEXP 函数来创建一个视图：

```
Create view temp as select * from somewhere where columnname REGEXP 'myregex'; 
```

这很好用，只要我们从 Python中进行*选择。*我们想在 a 中显示结果`QTableView`（通过`QSqlTableModel`填充视图）。由于视图使用 REGEXP，我们必须将 Python*正则表达式*函数链接到 QSqlDatabase。

# java - java中对象的大小是多少

> ID：10549381
> 
> 赞同：5
> 
> 时间：2012-05-11T10:07:42.583
> 
> 标签：java, oop

众所周知，java使用以下数据类型

```
byte    Occupy 8 bits in memory
short   Occupy 16 bits in memory
int     Occupy 32 bits in memory
long    Occupy 64 bits in memory 
```

如果我创建一个类

```
class Demo{
    byte b;        
    int i;
    long l;
}

Demo obj = new Demo(); 
```

现在我的问题是`obj`size`< or > or =`的大小`b+i+l`是`104 bytes`. 请给我一个有正当理由的澄清。

谢谢，
阿尼尔库马尔 C

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T10:13:35.400

来自[http://www.javamex.com/tutorials/memory/object_memory_usage.shtml](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)

> 1.  一个裸 Object 占用 8 个字节；
> 2.  具有单个布尔字段的类的实例占用 16 个字节：8 个字节的标头，1 个字节的布尔值和 7 个字节的“填充”，以使大小达到 8 的倍数；
> 3.  具有 8 个布尔字段的实例也将占用 16 个字节：8 个用于标头，8 个用于布尔值；因为这已经是 8 的倍数，所以不需要填充；
> 4.  具有两个长字段、三个 int 字段和一个布尔值的对象将占用：
>     *   8个字节的头部；
>     *   16 个字节用于 2 个 long（每个 8 个）；
>     *   3 个整数 12 个字节（每个 4 个）；
>     *   布尔值 1 个字节；
>     *   另外 3 个字节的填充，将总数从 37 向上舍入到 40，即 8 的倍数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T10:14:49.367

对象的内存大小取决于架构，主要取决于 VM 是 32 位还是 64 位。实际的 VM 实现也很重要。

对于每个对象，您需要为其对象头（在 64 位 VM 上通常为 2*8 字节）、其字段（用于对齐的额外空间，具体取决于 VM 实现）提供空间。最后的空格然后四舍五入到最接近的单词大小的倍数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:15:27.830

很难说 obj 在内存中的大小，类型大小指示对开发人员有帮助，但实际上在内存中它有点不同。我建议你阅读[这篇文章](http://www.javaworld.com/javaworld/javatips/jw-javatip130.html?page=1)，它真的很有趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T10:17:23.500

首先，您混淆了位和字节。

其次，它还需要指向“vtable”的指针，其中存储了有关其类的信息。它很可能是 32 位系统上的 4 个字节（32 位）和 64 位系统上的 8 个字节。

最后，请注意，由于内存碎片，总程序内存可能高于所有对象的总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T11:55:44.437

对象的标头在 32 位 JVM 上可以占用 8 个字节，在 32 位 JVM 上可以占用 12 个字节。

每个原语都采用位数（不是您指示的字节数）

对象分配是 8 字节对齐的，因此对象末尾最多有 7 个字节的填充。即实际使用的空间四舍五入到下一个8的倍数。

```
class Demo{ // 8 or 12 bytes
    byte b; // 1 byte
    int i;  // 4 bytes
    long l; // 8 bytes
}

Demo obj = new Demo(); 
```

所以对象的大小在 32 位 JVM 上可以占用 24 个字节，在 64 位 JVM 上可以占用 32 个字节。

# iphone - 写自己的 UINavigationController？类似的功能，而不是子类化

> ID：10549385
> 
> 赞同：0
> 
> 时间：2012-05-11T10:08:02.303
> 
> 标签：iphone, ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我需要一个与 UINavigationController 具有相同功能的自定义视图控制器。为什么我不使用标准的导航栏是因为我真的需要一个自定义的 NavigationBar（超过 2 个按钮，标题和副标题，不同的高度等......）

我正在尝试使用充当标题的视图来实现自定义 ViewController，但我无法真正获得与原始 UINavigationViewController 相同的功能...

你将如何实现这个？我玩了2天（首先修改导航栏的外观，然后创建自定义导航栏，今天创建自定义ViewController）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:02:03.820

还可以查看 iOS 5 中的 View Controller Containment（您可以在 iOS 5 中添加子视图控制器并自己处理演示文稿）。

您可以在任何其他视图上方使用透明导航栏（灵活大小 ^^），并使用核心动画作为过渡动画（对于 push-pop-animation，动画选项比 UIKit 中的要多）。

确保继承 UIViewController 并向其添加一个特殊的“custonNavigationController”属性（弱），您可以从自定义导航控制器中设置该属性；使用这个类作为你的基本视图控制器类（或者，创建一个你在 UIViewController、UITableViewController 的子类中实现的协议作为这些类型的基类）。您“可以”覆盖“旧”navigationController 属性的 getter 方法，以便您可以使用其他（Apple，3rd 方框架）视图控制器。

如果您想完美地为动画计时（而不是硬编码值 - 这应该足够了），您还可以实现 UINavigationBar 的委托方法:)

到目前为止，这在我们的项目中效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:45:13.120

只需使用 ios5 外观代理，您就可以添加任意数量的按钮等。只需通过苹果文档。

我希望这些对你有帮助。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)

[UINavigationBar 和新的 iOS 5+ 外观 API - 如何提供两个背景图像？](https://stackoverflow.com/questions/7761552/uinavigationbar-and-new-ios-5-appearance-api-how-to-supply-two-background-imag)

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# jsf - JSF：验证后重置=ok

> ID：10549397
> 
> 赞同：0
> 
> 时间：2012-05-11T10:08:40.273
> 
> 标签：jsf

我是 JSF 的新手，我为我的 inputText 使用 rich:validator，我使用 type="reset" 在按钮单击后清除表单。所以问题是，即使出现验证错误，我也会丢失我刚刚在 inputText 上写的内容，我们如何在验证成功后进行重置操作？tnx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T19:59:37.347

我远离`type=reset`按钮。

我曾经有过没有正确重置所有组件的时候。我只是将您的支持 bean 中的字段重置为您做的最后一件事。

# python - 经度/纬度的KDTree

> ID：10549402
> 
> 赞同：11
> 
> 时间：2012-05-11T10:08:55.970
> 
> 标签：python, data-structures, latitude-longitude, kdtree

Python中是否有任何软件包允许对球体表面的经度/纬度进行类似kdtree的操作？（这需要适当考虑球面距离以及经度环绕）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T12:58:58.410

二叉搜索树无法通过设计处理极坐标表示的环绕。您可能需要将坐标转换为 3D 笛卡尔空间，然后应用您喜欢的搜索算法，例如 kD-Tree、Octree 等。

或者，如果您可以将坐标的输入范围限制在表面上的一个小区域，您可以对该区域应用适当的地图投影，即不会过度扭曲您所在区域的形状，并应用标准二进制在这些无环绕的笛卡尔地图坐标上搜索树。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-06-16T15:00:06.880

我相信来自 scikit-learn 的 BallTree 与 Haversine 指标应该可以为您解决问题。

举个例子：

```
from sklearn.neighbors import BallTree
import numpy as np
import pandas as pd

cities = pd.DataFrame(data={
    'name': [...],
    'lat': [...],
    'lon': [...]
})

query_lats = [...]
query_lons = [...]

bt = BallTree(np.deg2rad(cities[['lat', 'lon']].values), metric='haversine')
distances, indices = bt.query(np.deg2rad(np.c_[query_lats, query_lons]))

nearest_cities = cities['name'].iloc[indices] 
```

请注意，这将返回假设半径为 1 的球体的距离 - 将地球上的距离乘以半径 = 6371km

看：

*   [https://jakevdp.github.io/blog/2013/04/29/benchmarking-nearest-neighbor-searches-in-python/](https://jakevdp.github.io/blog/2013/04/29/benchmarking-nearest-neighbor-searches-in-python/)
*   [https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.BallTree.html](https://scikit-learn.org/stable/modules/generated/sklearn.neighbors.BallTree.html)
*   [https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.haversine_distances.html#sklearn.metrics.pairwise.haversine_distances](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.haversine_distances.html#sklearn.metrics.pairwise.haversine_distances)

# windows-phone-7 - 是否可以在 windows phone 7 中使用微软推送通知发送图像、视频、声音等？

> ID：10549403
> 
> 赞同：3
> 
> 时间：2012-05-11T10:09:10.100
> 
> 标签：windows-phone-7

我正在使用 Windows 推送通知服务。当我将通知消息传递给 Microsoft 推送通知服务时，我可以将音频或视频与消息一起传递吗？有效载荷是否必须只包含文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:42:04.673

您可以在通知的有效负载中放置几乎所有您想要的内容，但大小不能超过 3KB。因此，您应该将内容托管在某个地方，发送带有通知的 URL，然后让客户端下载它。

# java - 在JAVA中捕获文件路径

> ID：10549406
> 
> 赞同：1
> 
> 时间：2012-05-11T10:09:23.473
> 
> 标签：java, file, jar, path

我需要设计一个可执行的*.jar*来生成两个文本文件，我希望每当我双击可执行 jar 时，它会自动将文件路径传输到一个字符串，以便我可以在我的 fileWriter 的目录中使用它，这样我就可以为我的文本文件提供相同的路径。

目前我已经在我的代码文件中手动输入了路径。这对我来说没用。

```
FileWriter write = new FileWriter ("D:/final project/report.txt", false);
BufferedWriter bufferedWriter = new BufferedWriter (write); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:11:47.967

我认为您可以使用`System.getProperty("user.dir")`which 将返回当前目录路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:12:53.900

您应该提供相对路径而不是绝对路径

# php - PHP curl：无法获取网站内容 - cookie 问题？

> ID：10549407
> 
> 赞同：0
> 
> 时间：2012-05-11T10:09:28.740
> 
> 标签：php, cookies, curl

我正在尝试获取此站点的内容：`http://www.gratka.pl/`，但我只收到以下内容：

> * 即将 connect() 到 gratka.pl 端口 80
> * 正在尝试 195.8.99.42... * 已连接
> * 已连接到 gratka.pl (195.8.99.42) 端口 80
> GET / HTTP/1.1
> 用户代理：Mozilla/5.0 (Windows; U；Windows NT 5.1；pl；rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2
> 主机：gratka.pl
> 接受：*/*
> 
> < HTTP/1.1 302 找到
> < Cache-Control: no-cache
> < Content-length: 0
> < Location: ..
> * 到主机 gratka.pl 的连接 #0 保持不变
> * 向该 URL 发出另一个请求：' [http://blad .gratka.pl/403.html](http://blad.gratka.pl/403.html) '
> * 即将 connect() 到 blad.gratka.pl 端口 80
> * 正在尝试 195.8.99.1... * 已连接
> * 已连接到 blad.gratka.pl (195.8.99.1) 端口 80
> GET / 403.html HTTP/1.1
> 用户代理：Mozilla/5.0（Windows；U；Windows NT 5.1；pl；rv:1.9.1.2） Gecko/20090729 Firefox/3.5.2
> 主机：blad.gratka.pl
> 接受：*/*
> ...
> < HTTP/1.1 302 找到
> < 缓存控制：无缓存
> < 内容长度：0
> < 位置：[http](http://blad.gratka.pl/403.html)
> : //blad.gratka.pl/403.html * 连接 #1 到主机 blad.gratka.pl 保持不变
> * 最多 (20) 个重定向跟随
> * 关闭连接 #0
> * 关闭连接 #1

什么意味着我总是用来抓取内容的脚本不起作用：

```
 $ch = curl_init();
    $timeout = 15;
    $cookie_file_path = 'c.txt';
    $fp = fopen($cookie_file_path, "w");
    fclose($fp);
    $url = 'http://gratka.pl';
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2');
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
    $info = curl_exec($ch);
    curl_close($ch); 
```

执行脚本后 cookie 文件 (c.txt) 为空。怎么了？也许网站需要有效的 cookie，或者可能是正确的 HTTP 标头的问题？任何帮助将不胜感激！

**编辑：当我在本地主机上执行上述脚本时，它正在工作，但在专用服务器上执行时它不起作用。有什么猜测吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:13:14.453

您的代码是正确的。只需将此行添加到`curl section`

```
$curl = curl_init();
    curl_setopt($curl, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") );

    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_ENCODING, "gzip");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($curl);
curl_close($curl);
return $data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:34:36.613

我遇到了同样的问题，我在另一台服务器上尝试了我的代码并且它有效。我想我的第一台服务器被禁止了。:)

我猜 gratka 指向[http://blad.gratka.pl/403.html](http://blad.gratka.pl/403.html)，当他们不想要你的时候。

# iphone - 应用商店中的 A/B 测试视图？

> ID：10549411
> 
> 赞同：3
> 
> 时间：2012-05-11T10:09:56.667
> 
> 标签：iphone, ios, testing

有没有人有发布应用程序的经验，该应用程序通过开关加载不同的 ViewController 以获得相同的功能。所以 50% 的用户总是使用一个版本，而 50% 的用户总是使用另一个版本。【这里有很好的描述】[http://littlebigthinkers.com/post/how-to-run-ab-tests-in-ios-apps](http://littlebigthinkers.com/post/how-to-run-ab-tests-in-ios-apps)。这是否以某种方式违反了 Apple TOS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:15:53.337

如果两个视图控制器提供相同的功能，那肯定没问题。即使做了不同的事情，只要用户 A 和 B 可以访问描述和屏幕截图等中描述的所有内容，您很可能会没事。
不过，您确实有让用户感到困惑的风险，所以我在这里要小心一点. 如果 A 用户与 B 用户谈论您的应用程序或发布屏幕截图等，您可能会感到困惑，或者更糟糕的投诉和差评。

例如：为什么我的应用程序没有做 COOL THING 而我 mate 的副本可以？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T00:41:05.197

我开发的应用程序实现了非常重要的 A/B 测试（不仅仅是小的 UI 差异，而是启用/禁用大功能），这对 Apple 来说从来都不是问题。

如果有人好奇，我构建了这个框架来做到这一点：[https ://github.com/mindsnacks/MSActiveConfig](https://github.com/mindsnacks/MSActiveConfig)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T08:22:45.627

Appiterate 有一个所见即所得的编辑器，可以对 iOS 和 Android 的不同版本的屏幕进行 A/B 测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T15:50:17.580

Arise.io 提供了一个为 iOS 进行 A/B 测试的框架，所以我很确定 Apple 对这种做法“没问题”，即使它不是官方的。

# android - 在网格视图中显示来自 sd 卡中特定文件夹的图像

> ID：10549417
> 
> 赞同：3
> 
> 时间：2012-05-11T10:10:26.000
> 
> 标签：android, gridview, android-sdcard

我开发了一个应用程序，我必须在其中显示来自 sd 卡中特定文件夹的图像。我的代码工作正常，但它显示了所有 sd 卡的图像。我已将选择 args 作为我的文件夹名称，因为它已在以下帖子中提及： [使用 gridview 显示来自 SDCard 上特定文件夹的图像](https://stackoverflow.com/questions/5039779/displaying-images-from-a-specific-folder-on-the-sdcard-using-a-gridview)

但是，它没有奏效。请建议我如何做到这一点：下面我发布我的代码。

```
public class Album1Activity extends Activity {
static Cursor imageCursor;
static int columnIndex;
GridView gridView;
Intent in;
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);
    String[] imgColumnID = {MediaStore.Images.Thumbnails._ID};
    Uri uri = MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI;
    imageCursor = managedQuery(uri, imgColumnID, null, null, 
                    MediaStore.Images.Thumbnails.IMAGE_ID);
    columnIndex = imageCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
    gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(new ImageAdapter(getApplicationContext()));
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            String[] dataLocation = {MediaStore.Images.Media.DATA};
            //String []dataLocation = {Environment.getExternalStorageDirectory().getAbsolutePath()};
            imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                        dataLocation, null, null, null);
            columnIndex = imageCursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            imageCursor.moveToPosition(position);
            String imgPath = imageCursor.getString(columnIndex);
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", imgPath);
            startActivity(in);
        }//onItemClickListener
    });
}//onCreate

public static class ImageAdapter extends BaseAdapter{
    private Context context;
    //Album1Activity act = new Album1Activity();
    public ImageAdapter(Context context){
        this.context = context;
    }//ImageAdapter
    public int getCount() {
        // TODO Auto-generated method stub
        return imageCursor.getCount();
    }//getCount

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }//getItem

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }//getItemId

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView iv;
        if(convertView == null){
            iv = new ImageView(context);
            imageCursor.moveToPosition(position);
            int imageID = imageCursor.getInt(columnIndex);
            iv.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                            "" +imageID));
            iv.setScaleType(ImageView.ScaleType.FIT_XY);
            iv.setPadding(5, 5, 5, 5);
            iv.setLayoutParams(new GridView.LayoutParams(100, 100));
        }//if
        else{
            iv = (ImageView)convertView;
        }//else
        return iv;
    }//getView

}//ImageAdapter 
```

}//相册1活动

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T03:25:51.237

抱歉回答晚了...下面我发布最终解决方案

```
public class Album3 extends Activity {
File [] mediaFiles;
File imageDir;
static GridView gridView;
ImageAdapter adapter;
Intent in;
ImageButton btncam;
String name = null;
ArrayList<Bitmap> bmpArray = new ArrayList<Bitmap>();
ArrayList<String> fileName = new ArrayList<String>();
public static final String TAG = "Album3Activity";

public void onCreate(Bundle savedInstanceState) 
{
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    super.onCreate(savedInstanceState);
    if((imageDir.exists()))
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.grid);
        mediaFiles = imageDir.listFiles();
        //Log.d("Length of images",""+mediaFiles.length);
        for(File file : mediaFiles)
        {
            bmpArray.add(convertToBitmap(file));
            fileName.add(readFileName(file));
            //Log.d(TAG + "bmpArray Size", ""+bmpArray.size());
            //Log.d(TAG, "call to convertToBitmap");
        }//for

        adapter = new ImageAdapter(this, bmpArray, fileName);
        gridView = (GridView)findViewById(R.id.gridview);
        gridView.setAdapter(adapter);
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
                , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));

        gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", position);
            startActivity(in);
        }
    });
    }//if
    else
    {
        setContentView(R.layout.no_media);
    }
}//onCreate

public static Bitmap convertToBitmap(File file) 
{
    URL url = null;
    try 
    {
        url = file.toURL();
    } catch (MalformedURLException e1) 
    {
        //Log.d(TAG, e1.toString());
    }//catch

    Bitmap bmp = null;
    try
    {
       bmp = BitmapFactory.decodeStream(url.openStream());
       //bmp.recycle();
    }catch(Exception e)
    {
        //Log.d(TAG, "Exception: "+e.toString());
    }//catch
    return bmp;
}//convertToBitmap

public String readFileName(File file){
    String name = file.getName();
    return name;
}//readFileName
}//class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:26:03.537

您可以使用

**Uri.parse("sdcard 文件夹路径")**

方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:17:56.840

您的链接答案已经有了答案。正确使用选择参数。

```
cursor = managedQuery( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
    projection, 
    MediaStore.Images.Media.DATA + " like ? ",
    **new String[] {"%myimagesfolder%"},**  
    null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:49:00.993

在上面的代码中，你从图库中获取所有图片试试这个

```
File sdImageMainDirectory ;
String imageName ;
File root = new File(Environment.getExternalStorageDirectory()
                + File.separator + "MYPICS" + File.separator);
        if (!root.exists()) {
            root.mkdirs();
        }

ImageView camera = (ImageButton) findViewById(R.id.imageButton1);

cam.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                imageName = "MyPic.png";
                sdImageMainDirectory = new File(root, imageName);
                i++;
                Uri imgUri = Uri.fromFile(sdImageMainDirectory);

                Intent intent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, imgUri);
                startActivityForResult(intent, 0);

                // startCameraActivity();
            }
        });

@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (resultCode) {
        case 0:
             finish();
            break;

        case -1:
            files = root.listFiles();
            count = files.length;
            try {

                ImageView image = new ImageView(this);

                LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams(
                        200, 200);
                image.setLayoutParams(vp);
                image.setScaleType(ImageView.ScaleType.CENTER_CROP);
                image.setPadding(8, 8, 8, 8);
                image.setMaxHeight(50);
                image.setMaxWidth(50);
                image.setAdjustViewBounds(true);
                BitmapFactory.Options option = new BitmapFactory.Options();
                option.inSampleSize = 2;
                Bitmap bm = BitmapFactory.decodeFile(root.getPath() + "/"
                        + imageName,option);
                image.setImageBitmap(bm);
                linearImageView.addView(image);

            } catch (Exception e) {
                e.printStackTrace();
            }

        }

    } 
```

# java - java分割字符串函数

> ID：10549419
> 
> 赞同：0
> 
> 时间：2012-05-11T10:10:43.410
> 
> 标签：java, string, split

我正在尝试构建一个在使用 Split 函数后读取某个字符串的程序

```
import java.util.Scanner;

   public class Lexa2 {

public void doit() {
    String str = "( 5 + 4 ) * 2";
    String [] temp = null;
    temp = str.split(" "); 
    dump(temp);
}
public void dump(String []s) {
    for (int i = 0 ; i < s.length ; i++) {           
        if (s[i] == "(") {              
            System.out.println("This is the left paren");
        } else if (s[i] == ")"){                
            System.out.println("This is the right paren");          
        }else  if (s[i] == "+"){                
            System.out.println("This is the add");          
        }else  if (s[i] == "-"){                
            System.out.println("This is the sub");          
        }else  if (s[i] == "*"){                
            System.out.println("This is the mult");         
        }else  if (s[i] == "/"){                
            System.out.println("This is the div");          
        }else               
            System.out.println("This is a number");
    }
}   

     public static void main(String args[]) throws Exception{
       Lexa2 ss = new Lexa2();
         ss.doit();
 }
    } 
```

输出应该是这样的：

```
This is the left paren
this is a number
this is the add
this is the right paren
this is a number 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:16:39.240

你非常接近，只需替换`(s[i] == "?")`为`(s[i].equals("?"))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:23:55.913

不要`s[i] == ")"`用来比较字符串。这样，您就不会检查字符串 in`s[i]`是否等于`)`.

使用[等号](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法。然后您可以使用以下方法比较字符串：

```
if (s[i].equals("(")) 
```

`equals`在其他`if`语句中替换。

**更新**

PS我认为比较字符串的最佳方法，查看您的代码，是使用`switch/case`语句。但是，此功能[仅在 Java 7 中可用](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。我认为这样可以避免不断检查`if`语句，并且代码更具可读性。如果您有 Java 7，请使用此功能，否则，对于 Java 6 或更低版本，请遵循 @pstanton 的建议。;-)

# c++ - 在 Visual Studio2010 中拍摄快照非常慢

> ID：10549420
> 
> 赞同：0
> 
> 时间：2012-05-11T10:10:47.047
> 
> 标签：c++, snapshot, gettickcount

我开发了一个应用程序，它每 1000/30 毫秒拍摄一次 DESKTOP 快照。应用程序将运行 10 分钟。所以在 10 分钟内它应该保存 18000 个快照，但它只有大约 80 个快照。我不明白为什么会这样。

我的代码在这里：-

```
#include "windows.h" // should be less than and greater than instead of \"
#include "string.h"
int CaptureBMP(LPCTSTR szFile)
{
    // Source[1]
    HDC hdcScr, hdcMem;
    HBITMAP hbmScr;
    BITMAP bmp;
    int iXRes, iYRes;

    // Create a normal DC and a memory DC for the entire screen. The
    // normal DC provides a "snapshot" of the screen contents. The
    // memory DC keeps a copy of this "snapshot" in the associated
    // bitmap.
    hdcScr = CreateDC("DISPLAY", NULL, NULL, NULL);
    hdcMem = CreateCompatibleDC(hdcScr);

    iXRes = GetDeviceCaps(hdcScr, HORZRES);
    iYRes = GetDeviceCaps(hdcScr, VERTRES);

    // Create a compatible bitmap for hdcScreen.
    hbmScr = CreateCompatibleBitmap(hdcScr, iXRes, iYRes);
    if (hbmScr == 0) return 0;

    // Select the bitmaps into the compatible DC.
    if (!SelectObject(hdcMem, hbmScr)) return 0;

    // Copy color data for the entire display into a
    // bitmap that is selected into a compatible DC.
    if (!StretchBlt(hdcMem,
        0, 0, iXRes, iYRes,
        hdcScr,
        0, 0, iXRes, iYRes,
        SRCCOPY))

        return 0;

    // Source[2]
    PBITMAPINFO pbmi;
    WORD cClrBits;

    // Retrieve the bitmap's color format, width, and height.
    if (!GetObject(hbmScr, sizeof(BITMAP), (LPSTR) &bmp)) return 0;

    // Convert the color format to a count of bits.
    cClrBits = (WORD)(bmp.bmPlanes * bmp.bmBitsPixel);
    if (cClrBits == 1)
        cClrBits = 1;
    else if (cClrBits <= 4)
        cClrBits = 4;
    else if (cClrBits <= 8)
        cClrBits = 8;
    else if (cClrBits <= 16)
        cClrBits = 16;
    else if (cClrBits <= 24)
        cClrBits = 24;
    else cClrBits = 32;

    // Allocate memory for the BITMAPINFO structure. (This structure
    // contains a BITMAPINFOHEADER structure and an array of RGBQUAD
    // data structures.)
    if (cClrBits != 24)
        pbmi = (PBITMAPINFO) LocalAlloc(LPTR,
                sizeof(BITMAPINFOHEADER) +
                sizeof(RGBQUAD) * (1 << cClrBits));

    // There is no RGBQUAD array for the 24-bit-per-pixel format.
    else
        pbmi = (PBITMAPINFO) LocalAlloc(LPTR,
                sizeof(BITMAPINFOHEADER));

    // Initialize the fields in the BITMAPINFO structure.
    pbmi->bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    pbmi->bmiHeader.biWidth = bmp.bmWidth;
    pbmi->bmiHeader.biHeight = bmp.bmHeight;
    pbmi->bmiHeader.biPlanes = bmp.bmPlanes;
    pbmi->bmiHeader.biBitCount = bmp.bmBitsPixel;
    if (cClrBits < 24)
        pbmi->bmiHeader.biClrUsed = (1 << cClrBits);

    // If the bitmap is not compressed, set the BI_RGB flag.
    pbmi->bmiHeader.biCompression = BI_RGB;

    // Compute the number of bytes in the array of color
    // indices and store the result in biSizeImage.
    pbmi->bmiHeader.biSizeImage = (pbmi->bmiHeader.biWidth + 7) / 8
                                    * pbmi->bmiHeader.biHeight * cClrBits;

    // Set biClrImportant to 0, indicating that all of the
    // device colors are important.
    pbmi->bmiHeader.biClrImportant = 0;

    HANDLE hf;                  // file handle
    BITMAPFILEHEADER hdr;       // bitmap file-header
    PBITMAPINFOHEADER pbih;     // bitmap info-header
    LPBYTE lpBits;              // memory pointer
    DWORD dwTotal;              // total count of bytes
    DWORD cb;                   // incremental count of bytes
    BYTE *hp;                   // byte pointer
    DWORD dwTmp;

    pbih = (PBITMAPINFOHEADER) pbmi;
    lpBits = (LPBYTE) GlobalAlloc(GMEM_FIXED, pbih->biSizeImage);

    if (!lpBits) return 0;

    // Retrieve the color table (RGBQUAD array) and the bits
    // (array of palette indices) from the DIB.
    if (!GetDIBits(hdcMem, hbmScr, 0, (WORD) pbih->biHeight, lpBits, pbmi, DIB_RGB_COLORS)) return 0;

    // Create the .BMP file.
    hf = CreateFile(szFile,
                    GENERIC_READ | GENERIC_WRITE,
                    (DWORD) 0,
                    NULL,
                    CREATE_ALWAYS,
                    FILE_ATTRIBUTE_NORMAL,
                    (HANDLE) NULL);
    if (hf == INVALID_HANDLE_VALUE) return 0;

    hdr.bfType = 0x4d42;        // 0x42 = "B" 0x4d = "M"

    // Compute the size of the entire file.
    hdr.bfSize = (DWORD) (sizeof(BITMAPFILEHEADER) +
                 pbih->biSize + pbih->biClrUsed *
                 sizeof(RGBQUAD) + pbih->biSizeImage);
    hdr.bfReserved1 = 0;
    hdr.bfReserved2 = 0;

    // Compute the offset to the array of color indices.
    hdr.bfOffBits = (DWORD) sizeof(BITMAPFILEHEADER) +
                    pbih->biSize + pbih->biClrUsed *
                    sizeof (RGBQUAD);

    // Copy the BITMAPFILEHEADER into the .BMP file.
    if (!WriteFile(hf, (LPVOID) &hdr, sizeof(BITMAPFILEHEADER), (LPDWORD) &dwTmp, NULL)) return 0;

    // Copy the BITMAPINFOHEADER and RGBQUAD array into the file.
    if (!WriteFile(hf, (LPVOID) pbih, sizeof(BITMAPINFOHEADER)
                + pbih->biClrUsed * sizeof (RGBQUAD),
                (LPDWORD) &dwTmp, NULL))
        return 0;

    // Copy the array of color indices into the .BMP file.
    dwTotal = cb = pbih->biSizeImage;
    hp = lpBits;
    if (!WriteFile(hf, (LPSTR) hp, (int) cb, (LPDWORD) &dwTmp, NULL)) return 0;

    // Close the .BMP file.
    if (!CloseHandle(hf)) return 0;

    // Free memory.
    GlobalFree((HGLOBAL)lpBits);
    ReleaseDC(0, hdcScr);
    ReleaseDC(0, hdcMem);

    return 1;
} 

void main()
{
    int index =0;

    char str[50];      
    char pmp[10]=".bmp";
    LPCTSTR szFile;
    Sleep(5000);
    DWORD  tickes=0;
    DWORD timespan = 1000/30;
    DWORD diff ;
    DWORD  entry=GetTickCount() +30000;
    while(entry>tickes)
    {
        char num[500]="C:\\SANSHOT\\"; 
        diff=GetTickCount() - tickes;
        tickes=GetTickCount();
        if(diff<timespan)
        {
            Sleep(timespan-diff);

        }
        itoa(index, str, 10);
        strcat(num,str);
        strcat(num,pmp);
        szFile = num;
        CaptureBMP(szFile);
        index++;

    }

} 
```

我不知道问题出在什么地方。

谁能帮我解决这个问题。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:48:24.490

我认为你的问题是while条件。您的程序没有运行 10 分钟，而是运行了大约 30 秒 ( `DWORD entry=GetTickCount() + 30000`)。然后满足条件`entry > tickes`并且循环中止。在这么短的时间内，您的应用程序只写了 80 个 bmp。如果您希望它运行 10 分钟，则该数字必须不是`30000`但是`600000`(10min * 60 * 1000 = 600000ms)

# android - 显示错误的天气预报应用程序

> ID：10549421
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:10:50.307
> 
> 标签：android, logcat, google-weather-api

我从这个链接获得了天气预报应用程序的示例代码：

[http://www.anddev.org/viewtopic.php?t=361](http://www.anddev.org/viewtopic.php?t=361)

并尝试在模拟器上运行它，但它显示错误

我尝试了很多来解决它，但我不能

如何解决这个问题？

在这一行中我得到了错误

```
xr.parse(new InputSource(url.openStream())); 
```

这些是 logcat 消息

```
 05-11 06:39:14.149: E/WeatherForcaster(709): WeatherQueryError
  05-11 06:39:14.149: E/WeatherForcaster(709):   
    org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 190: not well- formed (invalid token)
  05-11 06:39:14.149: E/WeatherForcaster(709): 
    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:520)                                            
  05-11 06:39:14.149: E/WeatherForcaster(709):  
   at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:479)
      05-11 06:39:14.149: E/WeatherForcaster(709): 
        at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:318)
         05-11 06:39:14.149: E/WeatherForcaster(709):   
          at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:275)    
        05-11 06:39:14.149: E/WeatherForcaster(709): 
         at  org.anddev.android.weatherforecast.Weatherforecast$1.onClick(Weatherforecast.java:74)                                                                                  
       05-11 06:39:14.149: E/WeatherForcaster(709):     
             at android.view.View.performClick(View.java:2485)
       05-11 06:39:14.149: E/WeatherForcaster(709): 
            at android.view.View$PerformClick.run(View.java:9080)
         05-11 06:39:14.149: E/WeatherForcaster(709):   
           at android.os.Handler.handleCallback(Handler.java:587)
            05-11 06:39:14.149: E/WeatherForcaster(709):    
             at android.os.Handler.dispatchMessage(Handler.java:92)
            05-11 06:39:14.149: E/WeatherForcaster(709):    
              at android.os.Looper.loop(Looper.java:123)
               05-11 06:39:14.149: E/WeatherForcaster(709): 
                at android.app.ActivityThread.main(ActivityThread.java:3683)    
               05-11 06:39:14.149: E/WeatherForcaster(709):     
                at java.lang.reflect.Method.invokeNative(Native Method)
     05-11 06:39:14.149: E/WeatherForcaster(709):   
               at java.lang.reflect.Method.invoke(Method.java:507)
         05-11 06:39:14.149: E/WeatherForcaster(709):   
              at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
      05-11 06:39:14.149: E/WeatherForcaster(709):  
       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:38:58.510

您可能对源 XML 的编码有问题。尝试将 InputSource 的编码设置为 UTF8。这是一个例子：

```
 InputSource is = new InputSource(url.openStream());
    is.setEncoding("UTF-8");
    xr.parse(is); 
```

# c - 从控制台应用程序显示系统资源使用情况

> ID：10549426
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:11:02.800
> 
> 标签：c, windows, resources, console-application

我想从 Windows 控制台应用程序打印以下详细信息

1.  可用的总 RAM、使用的总 RAM、应用程序使用的 RAM
2.  使用的总 CPU，应用程序使用的 CPU
3.  可用的总硬盘内存，已用内存大小

我在网上找到了很多方法来做到这一点。谁能告诉我这是最好的方法

提前致谢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:14:50.167

可用的总 RAM - [GetProcessMemoryInfo](http://msdn.microsoft.com/en-us/library/ms683219.aspx)
使用的总 CPU - [GetProcessTimes](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223%28v=vs.85%29.aspx)
可用的总硬盘内存 - [GetDiskFreeSpace](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364935%28v=vs.85%29.aspx)

# python - 使用 AJAX 通过用户输入从数据库中检索记录

> ID：10549430
> 
> 赞同：1
> 
> 时间：2012-05-11T10:11:20.903
> 
> 标签：python, ajax, google-app-engine, google-cloud-sql

平台：Google App Engine (Python) 数据库：Google Cloud SQL

我基本上有一个带有侧边栏和主视图的简单网页。侧边栏基本上由数据库中的一组记录组成，当我单击其中一个时，我希望从数据库中提取更详细的信息并显示在主视图中。

我尝试在处理程序中使用 def get(self)，但没有读取变量。是否可以在 def get(self) 中使用 self.request.get('variable')？有没有其他方法可以将变量从 def post(self) 传递给 def get(self)？

下面是我正在使用的大部分代码。除了下面的代码，我将结果传递给一个模板，然后使用 AJAX 再次获取该模板。该部分按预期工作。

**// HTML 代码**

```
<table class="query-results user">
<tbody>
{% autoescape on %}
{% for row in user_queries %}
<tr class="query-results">
  <td class="query-user">
    <img class="query-user-avatar" src="../img/avatars/{{ row.1 }}_32x32x32.png"><br />
  </td>
  <td class="query-main" data-queryid="{{ row.8 }}">
    <span class="query-title">{{ row.2 }}</span><br />{{ row.3 }}</br>{{ row.0 }} || {{ row.5 }} ago
  </td>
</tr>
{% endfor %}
{% endautoescape %}
</tbody>
</table> 
```

**// AJAX - 将变量发送到 QueryTab 处理程序：**

```
$("td.query-main").live('click', function(){
  var queryid = $(this).data("queryid");
    var dataString = 'queryId='+ queryid;
    $.ajax({  
      type: "GET",  
      url: "/querytab",  
      data: dataString,
      success: function () { alert("data sent: " + dataString) }
      });  
    return false;
}); 
```

**蟒蛇代码：**

```
class QueryTab(webapp2.RequestHandler):
  def get(self):
    query_id = self.request.get('queryId')

    fmt = '%Y-%m-%d %H:%M:%S'

    conn = rdbms.connect(instance=_INSTANCE_NAME, database='userPrefs')
    cursor = conn.cursor()
    cursor.execute('SELECT q.userNickname, a.avatar, q.queryName, q.queryDescription, q.queryValue, q.dateCreated, q.dateLastUpdated, q.activeFlag, q.uniqueId, q.entryID FROM queries AS q LEFT JOIN avatarPrefs AS a ON q.userNickname = a.userNickname WHERE q.activeFlag ="true" AND q.uniqueId = %s ORDER BY q.dateLastUpdated DESC LIMIT 6', (query_id))
    self_query = [[str(row[0]), str(row[1]), str(row[2]), str(row[3]), str(row[4]), str(timesince(datetime.strptime(str(row[5]), fmt))), str(timesince(datetime.strptime(str(row[6]), fmt))), str(row[7]), str(row[8]), str(row[9])] for row in cursor.fetchall()]

    template_file_name = 'templates/querytab.html'
    template_values = {
      'self_query': self_query,
      'query_id': query_id,
    }

    path = os.path.join(os.path.dirname(__file__), template_file_name)
    self.response.out.write(template.render(path, template_values))
    conn.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:34:57.333

当时，我对 AJAX 还不是很熟练，所以对回调功能不太了解。我最终使用的是以下内容：

```
$('td.query-main').live('click', function() {
  var queryid = $(this).data("queryid");
  var dataString = 'term=' + queryid;
  $.ajax({  
    type: "POST",  
    url: "/snippets",  
    data: dataString,
    success: function(data) {
      $('#query-focus').html(data);
    }
  });
}); 
```

# sqlite - 在 Windows 上编译 gosqlite 时出错

> ID：10549433
> 
> 赞同：1
> 
> 时间：2012-05-11T10:11:46.060
> 
> 标签：sqlite, go

我尝试构建 gosqlite 以使我的项目在 Windows 下运行。不幸的是，cgo 在调用 gcc 时抛出了一个错误。我把它分解成这样：

```
$ ../../../../../pkg/tool/windows_386/cgo.exe sqlite.go
fork/exec C:\cygwin\bin\gcc.exe: error 5 (FormatMessage failed with err=15100) 
```

我研究了错误代码并得到了这个：系统错误代码 15100 的意思是“资源加载器找不到 MUI 文件”。此错误代码也可能显示为“ERROR_MUI_FILE_NOT_FOUND”或值 0x3AFC。 [资源](http://pcsupport.about.com/od/findbyerrormessage/tp/system_error_codes_15100_15199.htm)

我的环境是全新的 win7 virtualbox 安装，带有 cygwin、go1、sqlite3。

我希望得到帮助，这是我的第三天，我正在努力解决这个问题......

亲切的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:45:16.847

你从 cgo 得到的错误信息不是很好：

fork/exec C:\cygwin\bin\gcc.exe: 错误 5 ...

错误 5 是 ERROR_ACCESS_DENIED。我怀疑，cgo 试图运行 gcc 并且 CreateProcess 因 ERROR_ACCESS_DENIED 而失败。

您应该已经收到正确的错误消息，但 Go 无法将“错误 5”转换为消息字符串。它正在寻找“英语”消息：

[http://code.google.com/p/go/source/browse/src/pkg/syscall/syscall_windows.go#82](http://code.google.com/p/go/source/browse/src/pkg/syscall/syscall_windows.go#82)

但是，我怀疑，你的电脑没有这些。如果是这种情况，那么 Go 应该回退到“本机”消息。

[如果您在这里http://code.google.com/p/go/issues/list](http://code.google.com/p/go/issues/list)就您的错误消息创建问题，也许会有所作为。

亚历克斯

# sql - SQL查询中的左边距两列字符串连接

> ID：10549437
> 
> 赞同：0
> 
> 时间：2012-05-11T10:11:55.980
> 
> 标签：sql, sql-server-2008

我有以下这种格式的 SQL 查询结果

```
1     Cash in Hand
1040    Saving Account
1050    Student fee Account 1050 
```

我希望此查询结果采用以下格式

```
1       Cash in Hand
1040    Saving Account
1050    Student fee Account 1050 
```

这并不是说它是一列具有连接两列的结果。

我已经尝试过这个查询，但问题仍然存在

```
SELECT     
   CAST(AccountNo as char(10)) + ' ' + AccountName As AccountName,AccountNo
FROM         
   ChartOfAccounts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:18:31.283

```
SELECT AccountNo + REPLICATE(' ', 10 - DATALENGTH(AccountNo)) + AccountName as AccountName
FROM ChartOfAccounts 
```

# postgresql - 基于 SELECT 和 CamelCase 列的 PL/pgSQL 记录

> ID：10549442
> 
> 赞同：0
> 
> 时间：2012-05-11T10:12:06.327
> 
> 标签：postgresql, stored-procedures, plpgsql

我在这里拉头发。我有以下示例 SP - 请记住，我已经将 rec 声明为 RECORD；

```
FOR rec IN
   SELECT
     "AclObjects"."ObjectName",
     "AclRoles"."RoleId"
   FROM
     "AclObjects",
     "AclRoles",
     "AclGrantRole"
   WHERE
     "AclObjects"."ObjectRef" = "AclGrantRole"."ObjectRef"
     AND "AclRoles"."RoleId" = "AclGrantRole"."RoleId"
     AND "AclObjects"."ObjectClass" = "inObjectClass"
     AND now() BETWEEN "AclGrantRole"."EffectiveFrom"
                   AND "AclGrantRole"."EffectiveTo"
 LOOP
    "outStatusCode" := 0;
    "outObjectName" := rec."AclRoles"."ObjectName";
    "outObjectName" := rec."AclRoles"."RoleId";
    "outStatusMsg" := NULL;

    return next;
  END LOOP; 
```

请注意，我正在尝试将其他骆驼案例变量分配给记录变量。我试过搜索这个，但什么也没出现。

从本质上讲，我很可能有两个具有相同列名的表，我想返回完全引用`Table1.ColumnName`，并且`Table2.ColumnName`

所以：

1) 我不确定 RECORD 如何处理完全引用的 SELECT 值 2) 当它们是驼峰式时甚至可以返回它们

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:52:42.557

您可以返回区分大小写的标识符。但是第二部分-rec.“AclRoles”。“ObjectName”是胡说八道-应该是rec.“ObjectName”。

RETURN QUERY 或者只是 sql 函数而不是 plpgsql 是更好的解决方案

# php - eclipse中没有BOM编码的utf8

> ID：10549445
> 
> 赞同：12
> 
> 时间：2012-05-11T10:12:14.757
> 
> 标签：php, eclipse, byte-order-mark

经过一番头痛后，我发现使用设置编码 UTF8（带有 BOM）的 eclipse 会导致错误。当您使用包含导致网页的标题在 chrome 的正文中呈现时，它会导致添加空格。

IE。在 index.php 上，当然之前或之​​后没有间隙

```
<?php include_once('header.php'); ?><body>test</body> 
```

和 header.php 有（当然又没有间隙）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>test title</title>
</head> 
```

然后测试标题出现在正文中（不是在视图源中，而是在 chrome 的控制台中）。这会导致页面顶部出现间隙。

在 notepad++ 中打开 index.php 和 header.php 并将编码更改为不带 BOM 的 UTF8 即可解决问题。*如何在 Eclipse 中解决这个问题？！*切换到 notepad++ 是不可取的，eclipse 中有太多有用的好功能（更好的自动完成、自动版本控制等）。

对我来说是个谜...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-28T07:56:25.537

在eclipse中，只需将文件的编码更改为iso（右键单击文件->属性）并删除前三个BOM字符，保存文件并重新打开它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-04T11:07:08.057

据我所知，只要您的工作区（或文件类型）设置为 UTF-8，就不会为新文件创建新的 BOM，但会保留旧的 BOM（在其他编辑器中创建）甚至显示取决于打开文件的编辑器（PHP 编辑器与 PHP+HTML 编辑器）。

如果您的文件中有随机的 BOM，可能是因为您的团队中的某个人正在使用默认打开 BOM 的其他编辑器（你好，Dreamweaver！）。每当这个人创建一个新文件时，您和他的编辑都会插入和维护一个 BOM（但如果你们中的一个人删除它就可以了）。

如果您精通 bash，我建议您使用以下脚本批量修剪 BOM：

`sed '1 s/\xEF\xBB\xBF//' < input > output`

* * *

BOM 魔法来源：[http ://thegreyblog.blogspot.com/2010/09/shell-script-to-find-and-remove-bom.html](http://thegreyblog.blogspot.com/2010/09/shell-script-to-find-and-remove-bom.html)

# c++ - 如何在 cimg 显示窗口中显示右键菜单？

> ID：10549455
> 
> 赞同：0
> 
> 时间：2012-05-11T10:13:06.000
> 
> 标签：c++, cimg

我正在编写一个 C++ 光线跟踪器并使用 CImg 库来显示最终图像。我希望能够右键单击最终渲染图像中的特定像素并显示一个包含特定像素内容的菜单。CImg 可以很容易地检测到对像素位置的右键单击，但它似乎并没有让我能够生成右键单击菜单。我以前从未使用过图形小部件工具包，我不确定如何找到一个并将其与 CImg 生成的窗口集成。我正在 linux 中开发它，但理想情况下我想要一个跨平台的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:08:07.417

根据 cimg 他们提供独立于平台的代码，因此您很可能需要使用一些特定于操作系统的代码来制作弹出菜单。对于 Windows，您从以下位置开始：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms647626%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647626%28v=vs.85%29.aspx)对于 QT，您从[http://qt-project 开始。 org/doc/qt-4.8/qmenu.html](http://qt-project.org/doc/qt-4.8/qmenu.html)和来自 GTK：http: [//developer.gnome.org/gtk-faq/stable/x669.html](http://developer.gnome.org/gtk-faq/stable/x669.html)

# magento - Magento 1.6 可以使用 connect 1.0 安装扩展

> ID：10549457
> 
> 赞同：0
> 
> 时间：2012-05-11T10:13:21.507
> 
> 标签：magento

我需要为我的 Magento 1.6 安装安装一个扩展，但是该扩展只有旧的 1.0 协议，没有其他扩展可用。

是否可以安装，连接管理器声明密钥无效。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T10:18:12.160

抱歉找到了答案，以防它对其他人有用：

使用网址： [http ://connect20.magentocommerce.com/community/name_of_extension](http://connect20.magentocommerce.com/community/name_of_extension)

# java - 使用spring进行Java注解扫描

> ID：10549458
> 
> 赞同：2
> 
> 时间：2012-05-11T10:13:21.623
> 
> 标签：java, spring, annotations, applicationcontext

我需要用名称注释的类很少，因此我将注释定义为

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface JsonUnmarshallable {
    public String value();
} 
```

现在需要这个注解的类被定义为

```
@JsonUnmarshallable("myClass")
public class MyClassInfo {
<few properties>
} 
```

我使用下面的代码来扫描注释

```
private <T> Map<String, T> scanForAnnotation(Class<JsonUnmarshallable> annotationType) {
    GenericApplicationContext applicationContext = new GenericApplicationContext();
    ClassPathBeanDefinitionScanner scanner = new ClassPathBeanDefinitionScanner(applicationContext, false);
    scanner.addIncludeFilter(new AnnotationTypeFilter(annotationType));
    scanner.scan("my");
    applicationContext.refresh();
    return (Map<String, T>) applicationContext.getBeansWithAnnotation(annotationType);
} 
```

问题是返回的地图包含`["myClassInfo" -> object of MyClassInfo]`但我需要地图包含`"myClass"`作为键，这是注释的值而不是 bean 名称。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:59:12.823

只需获取注释对象并拉出值

```
Map<String,T> tmpMap = new HashMap<String,T>();
JsonUnmarshallable ann;
for (T o : applicationContext.getBeansWithAnnotation(annotationType).values()) {
    ann = o.getClass().getAnnotation(JsonUnmarshallable.class);
    tmpMap.put(ann.value(),o);
}
return o; 
```

如果不清楚，请告诉我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-08T07:03:25.153

就我而言，我写如下：

```
ClassPathScanningCandidateComponentProvider scanner = new ClassPathScanningCandidateComponentProvider(false);
scanner.addIncludeFilter(new AnnotationTypeFilter(JsonUnmarshallable.class));
Set<BeanDefinition> definitions = scanner.findCandidateComponents("base.package.for.scanning");

for(BeanDefinition d : definitions) {
    String className = d.getBeanClassName();
    String packageName = className.substring(0,className.lastIndexOf('.'));
    System.out.println("packageName:" + packageName + " , className:" + className);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:17:40.217

也许您可以使用[http://scannotation.sourceforge.net/](http://scannotation.sourceforge.net/)框架来实现这一点。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:35:44.287

您可以为 ClassPathBeanDefinitionScanner 提供自定义[BeanNameGenerator](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/support/BeanNameGenerator.html)，它可以查找注释的值并将其作为 bean 名称返回。

我认为这些方面的实现应该适合你。

```
package org.bk.lmt.services;

import java.util.Map;
import java.util.Set;

import org.springframework.context.annotation.AnnotationBeanNameGenerator;
public class CustomBeanNameGenerator extends AnnotationBeanNameGenerator{
    @Override
    protected boolean isStereotypeWithNameValue(String annotationType,
            Set<String> metaAnnotationTypes, Map<String, Object> attributes) {

        return annotationType.equals("services.JsonUnmarshallable");
    }
} 
```

将此添加到您以前的扫描仪代码中： `scanner.setBeanNameGenerator(new CustomBeanNameGenerator());`

# c# - Infragistics ExcelExporter 异步

> ID：10549465
> 
> 赞同：0
> 
> 时间：2012-05-11T10:13:45.870
> 
> 标签：c#, asynchronous, infragistics, xamdatagrid

我需要两次导出相同的 Infragistics DataGrid 并在导出期间更新进度条。所以我开始像这样的第一个出口

```
excelExporter.ExportAsync(_xamDataGrid, "excelFile", WorkbookFormat.Excel97To2003); 
```

问题是在第一个完成之前，我无法开始该网格的第二次导出。

有没有办法等到这个异步操作结束后再开始第二个操作？

处理`ExportEnded`事件并不能解决问题，因为这里`excelExporter`有属性`IsExporting=true`.

`excelExporter`是类型`DataPresenterExcelExporter`。

# javascript - Web 应用程序无法在 iPad 上运行，但可以在桌面浏览器上运行

> ID：10549468
> 
> 赞同：0
> 
> 时间：2012-05-11T10:14:00.833
> 
> 标签：javascript, jquery, html, ipad, browser

我正在创建一个使用 JQuery、CSS 和 HTML 在 ipad 上运行的 Web 应用程序，当我在 Web 浏览器上测试我的应用程序时，一切正常，但是当我通过 ipads 浏览器访问 Web 应用程序时，所有窗口看起来都一样，但没有的功能在那里。我不知道为什么，因为我将所有 .js 文件都导入到 .html 文件中，并且所有功能都可以在 safari 上运行并在桌面上启动……就好像 ipad 上的网络应用程序忽略了我的所有.js 文件！

这是我的文件的图片，如果有人需要，我可以添加代码

![在此处输入图像描述](../Images/8bc3ccae8953a76d7b39d4b4f2595dfa.png)

有谁知道为什么该功能无法在 ipad 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:02:35.280

另一种可能性是它确实加载了您的 js 文件，但是由于您的代码中的一些错误，js 只是停止运行。如果我没记错的话，iPad 上有一些可用的开发者工具，您可以通过 de settings 应用程序打开它们。您还可以查看您的 Web 服务器日志，以查看在通过 iPad 访问时是否还请求了 js 文件。如果是，则很可能是某个地方的 js 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:03:19.100

我无法告诉您为什么它不起作用，但您可能有兴趣尝试以下方法之一以了解发生了什么：

*   weinre (WEB INspector REmote): [http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)
*   Adobe 影子 - [http://labs.adobe.com/downloads/shadow.html](http://labs.adobe.com/downloads/shadow.html)

它们的作用是让您拥有像 FireBug 这样的检查器，用于检查通过移动浏览器的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T13:15:41.463

您是在设备上本地运行网页还是远程运行网页？

如果它们在本地运行，则确保 JS 文件实际复制到应用程序包中。

默认情况下，它们出于某种原因卡在“编译源”中，而不是按原样复制。

在 XCode4 中，单击左窗格中的项目，然后`Build Phases`在右窗格中选择。
在 下`Copy Bundle Resources`，确保您的 js 文件在那里 - 如果没有，请使用“+”添加它们。

# android - 如何调整按钮的图像？

> ID：10549469
> 
> 赞同：0
> 
> 时间：2012-05-11T10:14:02.870
> 
> 标签：android, image

我为按钮使用了背景图像，但图像被拉伸并且看起来很奇怪。那么有人可以帮我做什么吗？我的xml文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" android:orientation="vertical" android:layout_weight="2" android:background="@drawable/board" >
  <ScrollView android:layout_weight="1" android:layout_marginLeft="30dp" android:layout_height="wrap_content" android:layout_width="fill_parent" android:id="@+id/scrollView1">
  <LinearLayout android:id="@+id/linearLayout1" android:layout_height="wrap_content" 
    android:orientation="vertical" android:layout_width="match_parent" 
    android:layout_weight="1" > 

    <LinearLayout android:orientation="horizontal" android:layout_height="wrap_content" android:id="@+id/linearLayout1" android:layout_width="match_parent">
        <TextView android:text="1" android:textSize="30dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>
        <ImageView android:id="@+id/imag1" android:src="@drawable/w10"  android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_weight="1"> </ImageView>
        <TextView android:id="@+id/no1" android:text="1" android:textSize="60dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>

    </LinearLayout>
    <LinearLayout android:orientation="horizontal" android:layout_height="wrap_content" android:id="@+id/linearLayout1" android:layout_width="match_parent">
        <TextView android:text="2" android:textSize="30dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>
        <ImageView android:id="@+id/imag1" android:src="@drawable/w10"  android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_weight="1"> </ImageView>
        <TextView android:id="@+id/no2" android:text="2" android:textSize="60dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>

    </LinearLayout>
    <LinearLayout android:orientation="horizontal" android:layout_height="wrap_content" android:id="@+id/linearLayout1" android:layout_width="match_parent">
        <TextView android:text="3" android:textSize="30dp" android:id="@+id/textView1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>
        <ImageView android:id="@+id/imag1" android:src="@drawable/w10"  android:layout_height="wrap_content" android:layout_width="wrap_content" android:layout_weight="1"> </ImageView>
        <TextView android:id="@+id/no3" android:text="3" android:textSize="60dp" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_weight="1"></TextView>
<Button android:id="@+id/practice" android:layout_width="wrap_content" android:layout_weight="1" android:background="@drawable/practice" android:layout_height="wrap_content" ></Button>
            <Button android:id="@+id/home" android:layout_width="wrap_content" android:layout_weight="1" android:background="@drawable/home" android:layout_height="wrap_content" android:onClick="onClick"></Button> 
```

我的Java文件是：

```
package com.android;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;

public class Numbers extends Activity {

    TextView[] txt = new TextView[20];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.no);
        Typeface tf = Typeface.createFromAsset(getBaseContext().getAssets(), "fonts/brhknd.ttf");

        for(int i = 0; i<mBtn.length; i++ )
        {
        txt[i] = (TextView)findViewById(mBtn[i]);
        txt[i].setTypeface(tf);

        }
        Button btnPractice = (Button)findViewById(R.id.practice);
        btnPractice.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(Numbers.this,DrawingNumber.class);
                startActivity(intent);

            }
        });

        Button btnHome = (Button)findViewById(R.id.home);
        btnHome.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(Numbers.this,mainClass.class);
                startActivity(intent);

            }
        });
    }

    int[] mBtn = {R.id.no1,R.id.no2,R.id.no3,R.id.no4,R.id.no5,R.id.no6,R.id.no7,R.id.no8,R.id.no9,R.id.no10};

} 
```

谁能帮我？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:16:40.333

使用九补丁资源。

[九补丁](http://developer.android.com/guide/topics/resources/drawable-resource.html#NinePatch)

[状态列表](https://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)

# android - 在 Android Phonegap 中手动暂停应用程序

> ID：10549472
> 
> 赞同：5
> 
> 时间：2012-05-11T10:14:04.950
> 
> 标签：android, cordova

是否可以手动暂停 Android PhoneGap 应用程序？当有人单击按钮时，我需要暂停应用程序并转到后台。我用过`navigator.app.exitApp();`，但它完全关闭了应用程序。我不想像使用本机后退按钮那样关闭应用程序只是卸载。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-12T20:30:38.937

这是一个类似于 Joram Teusink 的答案的解决方案，但更简单，因为您不需要手动编辑 java 代码 - 只需使用 phonegap / cordova CLI 安装一个插件。

插件一功能：goHome()。如果你调用它，应用程序将暂停 - 就像按下主页按钮一样。

用法：

```
navigator.Backbutton.goHome(function() {
  console.log('success - the app will now pause')
}, function() {
  console.log('fail')
}); 
```

安装：

phonegap 本地插件添加[https://github.com/mohamed-salah/phonegap-backbutton-plugin.git](https://github.com/mohamed-salah/phonegap-backbutton-plugin.git)

这是github页面：

[https://github.com/mohamed-salah/phonegap-backbutton-plugin.git](https://github.com/mohamed-salah/phonegap-backbutton-plugin.git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T13:06:44.510

在您的 Javascript 中：

```
// HomeButton
cordova.define("cordova/plugin/homebutton", function (require, exports, module) {
    var exec = require("cordova/exec");
    module.exports = {
        show: function (win, fail) {
            exec(win, fail, "HomeButton", "show", []);
        }
    };
}); 
```

和：

```
// HomeButton
function homeButton() {
    var home = cordova.require("cordova/plugin/homebutton");
    home.show(
        function () {
            console.info("PhoneGap Plugin: HomeButton: callback success");
        },
        function () {
            console.error("PhoneGap Plugin: HomeButton: callback error");
        }
    );
} 
```

在 Android Native 上的 Java 中：

```
package org.apache.cordova.plugins;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;

import android.content.Intent;
import android.util.Log;

public class HomeButton extends CordovaPlugin {

    public static final String LOG_PROV = "PhoneGapLog";
    public static final String LOG_NAME = "HomeButton Plugin";

    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) {
        Log.d(LOG_PROV, LOG_NAME + ": Simulated home button.");
        Intent i = new Intent(Intent.ACTION_MAIN);
        i.addCategory(Intent.CATEGORY_HOME);
        this.cordova.startActivityForResult(this, i, 0);
        callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.OK));
        return true;
    }

} 
```

调用它：

```
homeButton(); 
```

它有效，并且是我的回购的一部分：[https ://github.com/teusinkorg/jpHolo/](https://github.com/teusinkorg/jpHolo/)

# java - 在 Java Swing 中使用 Jframe 调整 Jpanel 的大小

> ID：10549473
> 
> 赞同：0
> 
> 时间：2012-05-11T10:14:10.880
> 
> 标签：java, swing, jframe, jpanel, resizable

我在 Jframe 中有 2 个 jpanels。当我减小框架大小时，需要减小的 jpanel 大小不应隐藏。jpanel 中的文本框或标签大小等内容也需要减小。分享你对这个问题的看法。如何设置 jframe 和 Jpanel 的宽度和高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:15:43.550

为此，您需要使用 LayoutManagers。在此处阅读有关[LayoutManagers 的所有信息](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# querydsl - QueryDSL 中的简单 (E1 AND E2) OR (E3 AND E4) 表达式

> ID：10549477
> 
> 赞同：8
> 
> 时间：2012-05-11T10:14:23.657
> 
> 标签：querydsl

如何在 QueryDSL where 子句中以形式表达：

```
 WHERE (E1 AND E2) OR (E3 AND E4) 
```

E1..E4 是任意布尔表达式。关键是要在括号内开始查询，因此是 (E1 AND E2)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T11:13:40.803

```
where(e1.and(e2).or(e3.and(e4))) 
```

# java - Hibernate Criteria：向 Restrictions.isEmpty 添加额外的限制

> ID：10549478
> 
> 赞同：3
> 
> 时间：2012-05-11T10:14:31.800
> 
> 标签：java, hibernate, hibernate-criteria

我创建了一个 Hibernate (3.5) Criteria 查询：

```
Criteria criteria = db.getSession().createCriteria(Vendor.class);
criteria.add(Restrictions.isEmpty("models")); 
```

当使用 Criteria.list 执行时，Hibernate 会生成以下 SQL（为了便于阅读而进行了简化）：

```
SELECT this_.*
FROM   VENDOR this_
       left outer join MODEL models1_
         ON this_.id = models1_.VENDOR_ID
WHERE  NOT EXISTS (SELECT 1
                   FROM   MODEL
                   WHERE  this_.id = VENDOR_ID) 
```

我想做的是在“不存在”部分添加一个限制，以便 SQL 查询看起来像这样

```
`SELECT this_.* FROM VENDOR this_
left outer join MODEL models1_
         ON this_.id = models1_.VENDOR_ID
WHERE
NOT EXISTS (SELECT 1
                             FROM   MODEL
                             WHERE  this_.id = VENDOR_ID **AND DEPRECATED = 0** )` 
```

`是否可以使用 Hibernate Criteria API，如果可以，如何？或者是否有其他可能达到相同的结果（但仍使用 Criteria API）？`

 `* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T11:37:59.530

是的，有可能，使用子查询：

```
Criteria criteria = db.getSession().createCriteria(Vendor.class, "vendor");

DetachedCriteria dc = DetachedCriteria.forClass(Vendor.class, "vendor2");
dc.createAlias("vendor2.models", "model");
dc.add(Restrictions.eq("model.deprecated", 0));
dc.add(Restrictions.eqProperty("vendor2.id", "vendor.id"));
dc.setProjection(Projections.id());

criteria.add(Subqueries.notExists(dc)); 
```

这相当于以下 HQL 查询：

```
select vendor from Vendor vendor
where not exists(select vendor2.id from Vendor vendor2
                 inner join vendor2.models model
                 where model.deprecated = 0
                 and vendor2.id = vendor.id) 
````

# .htaccess - htaccess 删除 php 扩展和重定向索引

> ID：10549482
> 
> 赞同：0
> 
> 时间：2012-05-11T10:15:05.530
> 
> 标签：.htaccess

在我的网站（所有 .php 文件）中，我想使用 htaccess 来：

a) 删除 .php 扩展名

b) 将 index.php 重定向到 www.mysite.com （连同 index ）

我在stackoverflow中进行了搜索，我想出了：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} !^/robots\.txt$
RewriteCond %{HTTP_HOST} !^www\.mysite\.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php

#Rewrite index.php back to /
RewriteCond %{THE_REQUEST} ^[^/]*/index\.php [NC]
RewriteRule . / [R=301,L] 
```

哪个完成了部分工作，但看不到如何纠正：

a）如果我加载（在浏览器中）页面 www.mysite.com/about 它正确显示页面 about.php。但是，如果我加载 www.mysite.com/about.php 它不会删除 .php 扩展名，这对于谷歌来说这是 2 个不同的页面。

b）如果我加载（在浏览器中）页面 www.mysite.com/index.php 它会转到 www.mysite.com 这是我想要的但是如果加载 www.mysite.com/index 我有一些问题，因为它显示同一页面，但看不到如何在此处删除索引部分。再说一次，对于谷歌，我有 2 个不同的页面。

希望我能正确解释我的问题。在简历中，htaccess 正在工作，但看不到如何按我的意愿调整它。

（obs：在我的网站页面之间建立了内部链接... href="about">关于我们...）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:22:07.007

再次编辑

尝试

```
RewriteCond %{THE_REQUEST} ^[^/]*/^(.*)$\.php [NC]
RewriteRule . /$1 [R=301,L] 
```

# jquery - 上传图片 jQuery File-uploader - 最小尺寸？

> ID：10549483
> 
> 赞同：1
> 
> 时间：2012-05-11T10:15:09.430
> 
> 标签：jquery

如何禁止上传小于 300px x 300px 的图片？

脚本：http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:17:44.903

用 javascript 是不可能的。为此使用服务器端脚本，例如。[PHP 的 getimagesize()](http://nl.php.net/manual/en/function.getimagesize.php)。或者，您可以搜索 Flash 上传器。

javascript 的问题是它无法访问您电脑上的文件，flash 有。因此，您需要先上传图像，以便您的服务器端脚本语言可以处理图像文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T23:19:57.943

这是您可以做的（我假设您的问题与[jQuery File Upload](https://github.com/blueimp/jQuery-File-Upload)相关）

```
$('#fileupload').fileupload({
    url: url,
    dataType: 'json',
    autoUpload: false,
    acceptFileTypes: /(\.|\/)(gif|jpe?g|png|pdf)$/i,
    maxFileSize: 9990000, //9.9MB
    minFileSize:99000, //99KB
    // Enable image resizing, except for Android and Opera,
    // which actually support image resizing, but fail to
    // send Blob objects via XHR requests:
    disableImageResize: /Android(?!.*Chrome)|Opera/
        .test(window.navigator.userAgent),
    previewMaxWidth: 100,
    previewMaxHeight: 100,
    previewCrop: true
}) 
```

# php - 不同文件版本上的 APC 操作码缓存

> ID：10549493
> 
> 赞同：1
> 
> 时间：2012-05-11T10:15:49.590
> 
> 标签：php, caching, apc, opcode

我们有一个服务器，上面部署了**SAME Web 应用程序的多个****不同**版本。

 **例如 ：

*   `www.myserver.com`
*   `rc.myserver.com`
*   `alpha.myserver.com`

我们担心同一个 PHP 类的版本之间可能会发生冲突。APC 是否正确处理此问题？如果没有，如何解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:23:47.197

APC 缓存基于类的*路径*，而不仅仅是类名。因此，只要您的每个版本都有自己的类副本，您就不应该有任何问题。**

# python - 你了解这种僵局吗？

> ID：10549500
> 
> 赞同：0
> 
> 时间：2012-05-11T10:16:12.593
> 
> 标签：python, multithreading, join, wxpython, deadlock

我正在为我的 GUI 使用 wxPython。在`AppLogic`课堂上，我有一个工作线程，它在这个类的方法中运行。

这是`GUI`课程：

```
class GUI:
    _wx_app = None
    _main_window = None
    _app_logic = None

    def start(self):
        # bla bla bla
        self._main_window.Show()
        self._app_logic.begin()
        self._wx_app.MainLoop()

    def _cancel_listener(self):
        """Called from MainWindow, if the user has clicked the cancel
        button."""
        print("I'm leaving this scope.")
        self._app_logic.cancel()  # Should cancel the task done in
                                  # a second thread.

    def _status_listener(self, status_text):
        """Called often by the worker thread."""
        print("Here I am again.")
        if self._main_window.status.GetLabel() != status_text:
            self._main_window.status.SetLabel(status_text) 
```

`AppLogic`这是上面调用的类的取消方法`_cancel_listener`：

```
 def cancel(self):
        self._shall_abort = True
        self._thread.join(self._some_time_out)
        assert self._thread.isAlive() == False 
```

不知何故，有一个死锁`join`和`GetLabel`（因此`MainLoop`？）涉及，但我真的不明白发生了什么。有人对此有更深入的了解吗？那太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:22:16.510

我不在我的领域，但我怀疑 wxPython 像其他工具包一样工作，通过 GUI 线程向子窗口发送消息，然后等待答案。如果是这种情况，GetLabel() 或 SetLabel() 方法必须通过主消息循环（== GUI 线程），并停止调用线程，直到得到答案。

当您从 GUI 线程调用 cancel() 时，它会设置 abort 变量，然后等待另一个线程以 结束`self._thread.join()`，因此在另一个线程停止之前不会处理更多消息。但是另一个线程一直在等待它的 GetLabel() 消息的答案 -> 宾果游戏！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T14:37:41.253

所有 GUI 工具包都有一个主 GUI 线程。它们都有特殊的方法，允许您以线程安全的方式操作 GUI 小部件。在 wxPython 世界中，这些方法是 wx.CallAfter、wx.CallLater 和 wx.PostEvent。我在您的示例中的任何地方都看不到这些，所以您所做的基本上是暂停 GUI 线程或导致发生“未定义”的事情。

这里有几篇关于线程和 wxPython 的文章：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# matlab - Matlab中求积分的函数

> ID：10549502
> 
> 赞同：1
> 
> 时间：2012-05-11T10:16:25.263
> 
> 标签：matlab

我做了一个函数来获取 intergal Likehood(L,U,gamma,sigma)，但是有一些错误。这是我的 Matlab 代码。

```
function func=Likelihook(L,U,gamma,sigma)
Lstar=3;
Ustar=20;
gammastar=1.5;
a=0.2;
func=-0.5.*log(2.*pi)-log(sigma)+log(gamma)-log(L.^(-gamma)-U.^(-gamma))+quad(@(y)(log(quad(@(x)(x.^(-gamma-1).*exp(-0.5.*((y-x)./sigma).^2)),L,U)).*gammastar./(sqrt(2*pi).*Lstar.^(-gammastar)-Ustar.^(-gammastar)).*quad(@(x)(x.^(-gammastar-1)./(a.*x).*exp(-0.5.*((y-x)./(a.*x)).^2)),Lstar,Ustar)),-inf,inf) ; 
```

这是我要计算的函数

[http://i.stack.imgur.com/lP1lz.png](http://i.stack.imgur.com/lP1lz.png)

有人帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:01:23.340

## 解释

Matlab 尝试以矢量方式计算积分，因此

```
f = @(x) x;
quad(f(x) x,1,5) 
```

被评估为

```
sum(f(1:dx:5)) 
```

用matlab弄清楚离散化间隔应该是多少。这是可计算的，因为 `f = @(x) x`需要矢量输入。

当你有一个双积分时，你会得到这样的东西：

```
f = @(x,y) x+y;
quad(quad(f(x,y) x,1,5),4:10) 
```

变成

```
sum(sum(f(1:dx:5,),4:dy:10)) 
```

这只会评估是否`1:dx:5`并且`4:dy:10`恰好具有相同数量的元素（不太可能）。

## 解决方案

当然，您可以通过调整您的函数来解决它，`f`以便它确实将任何两个向量作为输入，例如通过使用 arrayfun。

对于您的问题，这样做是这样的：

```
func = -0.5.*log(2.*pi)-log(sigma)+log(gamma)-log(L.^(-gamma)-U.^(-gamma)) ...
+quad(@(y)( ...
    log( arrayfun(@(z) quad(@(x)( x.^(-gamma-1).*exp(-0.5.*((z-x)./sigma).^2)),L,U), y) ) ...
    .* gammastar./(sqrt(2*pi).*Lstar.^(-gammastar)-Ustar.^(-gammastar)) ...
    .* arrayfun(@(z) quad(@(x)( x.^(-gammastar-1)./(a.*x).*exp(-0.5.*((z-    x)./(a.*x)).^2)),Lstar,Ustar), y) ...
),-inf,inf) ; 
```

我插入了一些换行符 ( `...`) 以便于阅读:)

## 评论

我不确定这是否会为您带来可靠的结果，因为集成 from `-Inf`to `Inf`: 在[quad 的文档中](http://www.mathworks.nl/help/techdoc/ref/quad.html)，据说

*如果区间是无限的，[a,Inf)，那么对于 fun(x) 的积分存在，fun(x) 必须随着 x 接近无穷大而衰减*

所以，你必须确保是这种情况，否则你会不断得到`NaNs`

# java - 从绝对路径获取名称，从最后一个斜杠获取子字符串，java android

> ID：10549504
> 
> 赞同：18
> 
> 时间：2012-05-11T10:16:36.607
> 
> 标签：java, android, file

我想提取绝对路径的名称。如果我有一个值为 /mnt/sdcard/Videos/Videoname 的字符串，我想保存一个值为 Videoname 的字符串。

字符串正在改变，我之前无法获得斜杠的数量。如何从最后一个斜杠中拆分子字符串？

> /mnt/sdcard/Videos/Videoname --> 视频名称

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-11T10:20:10.820

你应该通过[`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)api。从[`File.getName()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getName%28%29)文档中引用：

> 返回此抽象路径名表示的文件或目录的名称。这只是路径名的名称序列中的最后一个名称。如果路径名的名称序列为空，则返回空字符串。

例子：

```
String name = new File("/mnt/sdcard/Videos/Videoname").getName(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-11T10:19:40.923

如果您从“文件”对象中获取 if，则可以使用以下方法获取它：

```
String fileName = myFile.getName(); 
```

如果你从一个简单的字符串中得到它，你可以使用

```
String fileName = myString.substring(myString.lastIndexOf("/")+1); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-28T09:02:41.717

```
String path = "/mnt/sdcard/Videos/Videoname"; // Your path

String fileName = new File(path).getName(); // you file name 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-14T11:40:15.260

最简单的方法是

```
String path ="AnyDirectory/subFolder/last.htm";
int pos = path.lastIndexOf("/") + 1;

path.substring(pos, path.length()-pos); 
```

现在您在路径字符串中拥有了 last.htm。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-05T07:21:06.267

但是通过更多的研究，以下代码可以工作......

```
String[] Tokens = stringPath.split("\\\\"); 
```

您需要将“\”转义两次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T10:19:04.153

```
string a = "/foo/bar/target";
string words = a.Split("/")
string target = words[words.length-1] 
```

# javascript - 添加元素动态后的动态window.location

> ID：10549509
> 
> 赞同：0
> 
> 时间：2012-05-11T10:17:02.083
> 
> 标签：javascript, html

我在我的页面上放了一个 A 标签，当用户点击它时，页面会有一个新的输入字段来写入信息，如下所示：

**HTML 代码**

```
<a href="" class="smallLink" onclick="return ioAddNewContent()">new info</a> 
```

单击“新信息”后，我不想向 url 添加哈希，因此我使 javascript 返回 null，如下所示：

**javascript代码**

```
 function ioAddNewContent(){
    var bigLi = document.getElementById('ioAddContents');
    var p = document.createElement('p');
    var label=document.createElement('label');
    var input = document.createElement('input');
    var a = document.createElement('a');
    label.setAttribute('class', 'ioAddOneContent');
    label.innerHTML='write one info';
    input.setAttribute('type', 'text');
    input.setAttribute('class', 'longInput');
    a.setAttribute('href', '');
    a.setAttribute('class', 'smallLink');
    a.setAttribute('onclick', 'return ioAddNewContent()');
    a.innerHTML=' new info';
    p.appendChild(label);
    p.appendChild(input);
    p.appendChild(a);
    bigLi.appendChild(p);
    return false;
} 
```

点击“新信息”10次后，用户必须向下滚动才能看到**新的输入字段**，我不希望这样，我**希望每次点击“新信息”时屏幕都应该转到那个新的输入字段，**

我知道我可以通过在 html 代码上添加一个带有 name =“here”的标签，然后在 javascript 代码上放置 `window.location("#here")` 来做到这一点，但我想做那个动态的

**当用户单击添加新输入字段时，屏幕应自动滚动到该新输入字段**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:21:00.447

您可以更改滚动容器（例如正文或您的 div）上的 scrollTop 属性。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:26:30.110

使用`.focus()`和`.last()`

```
$('a.smallLink').last().focus(); 
```

这是 jQuery 集的一部分，不确定您是否使用库。

# mysql - 更新表，在 3 个随机字符串之间进行选择 - 如何？

> ID：10549512
> 
> 赞同：8
> 
> 时间：2012-05-11T10:17:23.373
> 
> 标签：mysql

我正在为 5000 个用户制作标准个人资料图片，现在我需要在“用户”表中插入参考。我不希望所有用户都拥有相同的标准个人资料图片，因此我尝试使用以下查询中的字符串之一更新“user_profile_image”行。

```
UPDATE users 
SET user_profile_image = rand('adrian.jpg', 'bendix.jpg', 
hr_skaeg.jpg', `'jeppe.jpg') 
```

查询似乎不起作用。

这种方式是不是太简单了？

任何帮助深表感谢！

亲切的问候， 马蒂亚斯

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-11T10:22:22.643

`RAND()`返回一个介于 0 和 1 之间的数字；如果您将它乘以您拥有的照片数量并拍摄`FLOOR()`，您可以使用以下命令打开结果`ELT`：

```
UPDATE users SET user_profile_image =
 ELT(1 + FLOOR(RAND()*4), 'adrian.jpg', 'bendix.jpg', 'hr_skaeg.jpg', 'jeppe.jpg'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T10:18:37.867

您需要阅读手册。[`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)不像你认为的那样做。

试试这个：

```
UPDATE users
SET user_profile_image = 
    CASE FLOOR(RAND() * 4) 
    WHEN 0 THEN 'adrian.jpg.img' 
    WHEN 1 THEN 'bendix.jpg' 
    WHEN 2 THEN 'hr_skaeg.jpg' 
    WHEN 3 THEN 'jeppe.jpg' 
    END 
```

;

# java - 无限启动应用程序android Eclipse

> ID：10549517
> 
> 赞同：0
> 
> 时间：2012-05-11T10:17:44.390
> 
> 标签：java, android, eclipse, launch, infinite

我遇到了一个大问题。当我启动应用程序时，eclipse 中“进度”视图中的进度条卡在 100% 并且应用程序永远不会启动。我无法取消启动，我必须终止 Eclipse 的进程。Java 给我一个退出代码：-805306369。我在谷歌上没有看到我的问题......关于java版本，它是jdk1.7.0_03。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:19:13.467

`java7`不兼容android所以使用`java6`更好...

所以，在

**Eclipse->Window->Prefrences->Java->Compiler->Complier Compliance level->1.6->点击OK**

# wpf - 哪个重量最轻：帆布还是网格？

> ID：10549521
> 
> 赞同：3
> 
> 时间：2012-05-11T10:17:47.400
> 
> 标签：wpf, performance, wpf-controls

有时我需要将几个项目组合在一起，并且在父面板的布局方面我不需要太多。几乎任何面板都可以。

在这些情况下，不同的面板类型之间是否有明显的赢家，或者它们实际上是等效的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:52:11.187

Canvas 在处理布局时比 Grid 轻得多。

但是你说：

> 在布局方面我不需要太多。

Canvas 甚至可能无法为您提供所需的少量内容。尽管让 Canvas 为您工作可能并不费力。当然，这取决于你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:43:45.700

Canvas 是轻量级的，因为它的布局（测量和排列）通道比 Grid 简单得多。

话虽如此，Grid 在适应其容器和屏幕（包括屏幕尺寸、分辨率和 dpi）方面比画布具有很大的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T23:03:13.243

要记住的一件事是 Grid 会自动调整大小以适应其内容，而 Canvas 不会。当 Canvas 或 Grid 嵌套在其他面板中时，这很重要。特别是如果面板的大小可以改变（例如显示可变大小的列表），Grid 或 StackPanel 会更容易使用。

# c# - 扩展实体框架：如何将属性“edmx:CopyToSSDL="true"”默认添加到 edmx

> ID：10549522
> 
> 赞同：0
> 
> 时间：2012-05-11T10:17:51.843
> 
> 标签：c#, entity-framework, t4

我正在扩展 Entity Framework Designer 自定义属性，例如，如果我的属性是 FriendlyName 并且开发人员单击名为“MK_CUSTOMER_NAME”的字段，他们可以在“属性”下将 FriendlyName 添加为“CustomerName”，我稍后想要当我将模型反向工程到数据库时，将其作为扩展属性包含在内。保存模型时，将属性值“客户”保存到 edmx 文件中：

```
<Property Name="MK_CUSTOMER_NAME" Type="String">
    <a:MyFriendlyName xmlns:a="http://schemas.tempuri.com/MyPropertyExtension">
       CustomerName
    </a:MyFriendlyName>
</Property> 
```

我遇到的问题是，保存属性时，我的 CSDL 部分中不包含属性 'edmx:CopyToSSDL="true"`，有谁知道如何通过代码实现这一点？

我正在寻找的理想结果是；

```
<Property Name="MK_CUSTOMER_NAME" Type="String">
    <a:MyFriendlyName xmlns:a="http://schemas.tempuri.com/MyPropertyExtension" edmx:CopyToSSDL="true">
       CustomerName
    </a:MyFriendlyName>
</Property> 
```

我创建的属性是否需要使用任何属性？

# java - 根据从不同类获得的值更新进度条

> ID：10549531
> 
> 赞同：0
> 
> 时间：2012-05-11T10:18:44.907
> 
> 标签：java, android, android-progressbar

我必须`Activity`在其中更新 的进度`ProgressBar`，并使用从不同类获得的值。

在下载类中，我使用此函数来计算进度..

```
public void publishDownloadProgress(long lengthoffile, long bytesDownloaded){
        mFileLength = lengthoffile;
        totalBytesDownloaded = bytesDownloaded;
        mProgress = ((totalBytesDownloaded*100)/mFileLength);    
    } 
```

这是为了取得进展

```
public long getDownloadProgress(){
       return mProgress;
   } 
```

但是当我使用`getDownloadProgress()`; 在我的`Activity`，我只得到`0`这是可以理解的，因为它只得到一次。

但是我喜欢的是一系列连续的进度值，我想使用这些值来更新我的`ProgressBar`，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:26:07.317

您应该多次调用**getDownloadProgress() 。**

并在两次通话之间设置一些时间。

你得到了零，因为第一次进步可能是零。等待一段时间 4ex **Thread.sleep(50000);**

然后再次调用**getDownloadProgress()**您将获得更新的值

# javascript - 从另一个框架获取框架的内部宽度

> ID：10549533
> 
> 赞同：0
> 
> 时间：2012-05-11T10:18:49.887
> 
> 标签：javascript, jquery, frame

假设我有两个框架`top_frame`和`bottom_frame`. 是否有可能获得 from 的`bottom_frame`innerWidth `top_frame`？

我知道我们可以`$(window).innerWidth()`用来获取当前帧的内部宽度。但是其他框架呢。

我设法在纯 JavaScript 中使用`top.frames["bottom_frame"].innerWidth`. 但我正在寻找 jQuery 中的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:29:30.030

尝试这个：

```
$(document).find("#bottom_frame").width() 
```

`innerWidth()`不能用于`document`和`window`对象。

# android - API android中使用的方法

> ID：10549535
> 
> 赞同：0
> 
> 时间：2012-05-11T10:18:56.330
> 
> 标签：android

我经常使用类型 API 作为 Google Translate API、Yahoo Weather API、....我不知道用于向服务器发送请求以获取信息的提取方法..GET 或 POST 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:26:54.157

使用 GET 方法。

有详细的代码吗？

# jsf - 用getParameter值填充jsf中的文本输入字段？

> ID：10549536
> 
> 赞同：1
> 
> 时间：2012-05-11T10:18:59.910
> 
> 标签：jsf

我需要获取在 URL 中传递的参数名称为“ONum”的参数，并在 orderNum 字段中输入其值。

```
<h:panelGroup>
<h:inputText id="orderNum" value="#{LoginBean.orderNum}" size="18" maxlength="17" tabindex="1" title="Order Number" disabled="#{LoginBean.disableField}"/>
</h:panelGroup> 
```

在此之前，我需要检查 #{LoginBean.orderNum} 是否没有返回值，然后从 ONum 获取参数内容并将其显示在 orderNum 文本输入字段中。如果它返回一个值，则忽略这样做。请帮助我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:23:49.260

一种简单的方法是直接从请求中读取参数值并将其填充到 bean 中。

```
@SessionScoped
public class LoginBean {

    private String orderNum;

    public String getOrderNum() {
        if (getRequestParameter("onum") != null) {
            orderNum = getRequestParameter("onum");
        }
        return orderNum;
    }       

    private String getRequestParameter(String name) {
        return ((HttpServletRequest)FacesContext.currentInstance().getExternalContext().getRequest()).getParameter(name);
    } 
    // ... 
```

这应该足够了。

# svn - 非交互式脚本中的 svn propedit

> ID：10549540
> 
> 赞同：3
> 
> 时间：2012-05-11T10:19:13.000
> 
> 标签：svn, shell, unix, post-commit

提交发生后，我需要编辑文件上的 svn 属性。因此，我想使用提交后脚本。

例子：

我有一个名为的属性，当我提交一个名为的文件时`export`设置 为（或删除）该属性为新值，如.`test``example.ex``export``succeeded`

在命令行我会使用这个：

```
svn propedit "export"  file:///svn/repositoryName/path/to/file/in/repository/example.ex 
```

这将打开我的系统编辑器`vi`，我会看到值`test`。我可以将它更改为我想要的任何内容，并使用 vi 命令保存并退出文件，例如`:wq`

Subversion 会返回这样的消息

```
"svn-prop.tmp" 1L, 10C written
Set new value for property 'export' on file:///svn/repositoryName/path/to/file/in/repository/example.ex'
Committed revision 67. 
```

太好了。但正如我所说，我需要在提交后脚本中，我无法控制 vi （或者我错了吗？）。

所以 Subversion 让我可以将文件添加到命令`propedit`中。该文件仅包含新值`succeeded`。

新命令应如下所示：

```
svn propedit "export"  file:///svn/repositoryName/path/to/file/in/repository/example.ex --file /path/to/propertyValueFile/propValue.file 
```

这就是问题所在：最后一个命令不起作用。再次`vi`打开，我需要手动更改我的值。为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T06:48:16.277

我找到了对我有用的解决方案。

```
svn propedit "export" file:///svn/repositoryName/path/to/file/in/repository/example.ex --file /data/svn/intranet/hooks/fileWithLogMessage --editor-cmd "echo succeeded >" 
```

`--editor-cmd`给另一个编辑器，我可以用`echo newValueForProp`.

现在它就像一个魅力。

--

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:12:01.567

尝试使用`svn propset`而不是`svn propedit`. 使用`propedit` *总是*打开一个外部编辑器......这就是它的用途。

# mysql - Codeigniter mysql程序多变量

> ID：10549549
> 
> 赞同：1
> 
> 时间：2012-05-11T10:20:00.273
> 
> 标签：mysql, arrays, codeigniter, stored-procedures

行。我们可以像这样在 Codeigniter 中调用 MySQL 过程：

```
$buf = array('something', NULL); //array of vars
$this->db->query("CALL some_proc(?, ?)", $buf); //calling stored procedure 
```

但是如果我有巨大的数组（25-30 项），有没有更流畅的方法来使用数组调用 MySQL 例程？比 $this->db->query("CALL some_proc(?, ?, ?, ? ..."); 更好的东西提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:38:33.933

好吧...您可以`$this->db->escape()`在它们之前解析字符串。

```
$arr_cols = array('value_1', 'value_2', 'value_3');
foreach(array_keys($arr_cols) as $h)
    $arr_cols[$h] = $this->db->escape($arr_cols[$h]);

$str_cols = implode(', ', $arr_cols);

$this->db->query("CALL some_proc({$str_cols})"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:40:21.823

只需使用[`str_repeat()`](http://php.net/manual/en/function.str-repeat.php)：

```
$this->db->query("CALL some_proc(?" . str_repeat(",?", count($buf)-1) . ")", $buf); 
```

# c# - C#：显示百分比是否为负值

> ID：10549550
> 
> 赞同：0
> 
> 时间：2012-05-11T10:20:00.693
> 
> 标签：c#, asp.net-mvc, percentage, string.format

简单的在这里。我正在计算两个值之间的百分比差异。我想在网页上显示它们。计算发生在我的类文件中，例如

```
public decimal UnitPercentageDifference { get { return (decimal)ComparativeTotalSold / (decimal)BaseTotalSold; } } 
```

然后，在我的视图中，我显示如下值：

```
<p><%: String.Format("{0:0.0%}",Model.OverallSummary.UnitPercentageDifference) %> increase/decrease on previous month</p> 
```

如果值为负，我希望能够显示减号（ - ），但这不会发生，它看起来就像一个正常的正百分比。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:24:55.767

试试这个面具 {0:0.0%;-0.0%}

从[这里](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)（见关于 ; 分隔符）

编辑：做了一些测试 - 你应该用你现有的面具得到正确的负输出。所以检查你的计算程序。

# web - 如何在IE网页使用dojo框架一次上传多个文件

> ID：10549551
> 
> 赞同：0
> 
> 时间：2012-05-11T10:20:10.143
> 
> 标签：web, dojox.grid, dojo

我想在 IE 网页中一次上传多个文件。如何在 Dojo 框架中实现此功能。我已经找到了一些解决方案，但需要在 IE 中安装插件。有没有完善的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:23:22.780

作为我自己的 CMS 的一部分，这是我实例化具有多个文件功能的 dojox.form.Uploader 的方式。有插件可以处理（1.7+，还有 html5）不同的设置；最简单的方法是使用闪光灯，但它在 -moz 和 -webkit 中有焦点怪癖。

有关参考和简单示例，请参见[http://dojotoolkit.org/documentation/tutorials/1.6/uploader/](http://dojotoolkit.org/documentation/tutorials/1.6/uploader/)

事先，调用 require 拉入：`dojox/form/Uploader`和`dojox/form/uploader/plugins/Flash`. 在声明 plugins/Flash 的同时，它使用 Base、Flash 和 HTML5 扩展了表单/Uploader，按给定顺序用作后备。

```
 // NB: don't use AMD reference of plugins will not load corrently
 this._fileuploader = new dojox.form.Uploader({
        flashFieldName: 'flashUploadFiles',
        url: this.uploadUrl || 'upload.php', 
        multiple: true,
        swfPath : 'resources/uploader_1.7.2.swf', 
        isDebug: true,
        //                                      force:'flash',
        iconClass: 'dijitFolderOpened', 
        label:'File to upload',  
        id: 'assetsuploader'

}); 
```

如果您需要了解“this”引用的位置，请参阅[https://github.com/mschr/oocms/blob/master/admin/include/assets.js](https://github.com/mschr/oocms/blob/master/admin/include/assets.js)

# ruby-on-rails - 如何将哈希键从`Symbol`s更改为`String`s？

> ID：10549554
> 
> 赞同：69
> 
> 时间：2012-05-11T10:20:23.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash

我正在使用 Ruby on Rails 3.2.2，我想“轻松”/“快速”地将哈希键从`Symbol`s 更改为`String`s。也就是说，从`{:one => "Value 1", :two => "Value 2", ...}`到`{"one" => "Value 1", "two" => "Value 2", ...}`。

我怎样才能通过尽可能少的代码来做到这一点？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-11T10:31:48.377

只需调用`stringify_keys`（或`stringify_keys!`）

[http://apidock.com/rails/Hash/stringify_keys](http://apidock.com/rails/Hash/stringify_keys)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-11T10:30:57.877

类的使用`stringify_keys`/`stringify_keys!`方法`Hash`。

您还可以使用`some_hash.with_indifferent_access`返回一个 Hash 实例，其中您的键可以指定为符号或字符串，没有区别。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-29T10:47:52.503

`stringify_keys`很好，但仅在 Rails 中可用。这是我将如何在一行中做到这一点，零依赖：

```
new_hash = Hash[your_hash.collect{|k,v| [k.to_s, v]}] 
```

这适用于 Ruby 1.8.7 及更高版本。如果你正在使用 Ruby 2.1，你可以这样做：

```
new_hash = a.collect{|k,v| [k.to_s, v]}.to_h 
```

请注意，此解决方案不是递归的，也不会正确处理“重复”键。例如。如果您有`:key`并且 也`"key"`作为哈希中的键，则最后一个将优先并覆盖第一个。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-13T12:49:37.357

`hash = hash.transform_keys(&:to_s)`将所有键从符号转换为字符串。

更多信息：[https ://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_keys](https://ruby-doc.org/core-2.6.3/Hash.html#method-i-transform_keys)

这是在 ruby​​ 2.5 中添加的：[https ://bugs.ruby-lang.org/issues/13583](https://bugs.ruby-lang.org/issues/13583)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-23T12:12:20.273

## stringify_keys from rails

[http://api.rubyonrails.org/classes/Hash.html#method-i-stringify_keys](http://api.rubyonrails.org/classes/Hash.html#method-i-stringify_keys)

```
hash = { name: 'Rob', age: '28' }
hash.stringify_keys
# => { "name" => "Rob", "age" => "28" } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-11T10:43:14.453

有一个不错的库可以解决问题，该库是“facets/hash/rekey”，方法是 rekey！。请参阅下面的示例，了解如何使用它。这只是过去的复制品

```
> require 'facets/hash/rekey'
 => true
> a = {:one => "Value 1", :two => "Value 2"}
 => {:one=>"Value 1", :two=>"Value 2"} 
> a.rekey!(&:to_s)
 => {"one"=>"Value 1", "two"=>"Value 2"} 
> a
 => {"one"=>"Value 1", "two"=>"Value 2"} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-11T10:31:04.480

```
 new_hash = Hash.new
 your_hash.each{ |k,v| new_hash[k.to_s] = v } 
```

new_hash 将与 your_hash 相同，但带有字符串键

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-16T22:52:21.353

我来这里看看是否有比这更好的东西：

```
JSON.parse(hash.to_json) 
```

但我想我会坚持我所拥有的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-11T06:25:51.303

您可以将密钥从符号显式传输到字符串：
`hash = hash.map { |k, v| [k.to_s, v] }.to_h`

# java - 如何在java中查找本地/任何时区中的时间戳已经过去的毫秒数

> ID：10549557
> 
> 赞同：0
> 
> 时间：2012-05-11T10:20:40.057
> 
> 标签：java, date, calendar, timezone

我知道 System.currentTimeMillis() 给出了从纪元（1970 年 1 月 1 日，格林威治标准时间 00:00:00）经过的毫秒数。但是我需要一个解决方案来找到从 1970 年 1 月 1 日、00:00:00 IST 或任何其他时区开始的毫秒数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:25:00.767

将 转换`Calendar`为 IST 时区并通过调用比较值`Calendar.getTimeInMillis();`

请通过以下链接转换为时区。[时区转换](http://www.kodejava.org/examples/200.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:28:08.070

这是一种获取特定区域时间的方法：

```
DateTimeZone tz = DateTimeZone.forID("America/Winnipeg");
DateTime dt = new DateTime(tz);
DateFormat df = DateFormat.getDateInstance();
df.format(dt.getTime()); 
```

可以在此[站点](http://joda-time.sourceforge.net/timezones.html)上找到 ID 。

# java - Jmagick 错误：magick.MagickException：没有要缩放的图像

> ID：10549558
> 
> 赞同：0
> 
> 时间：2012-05-11T10:20:54.643
> 
> 标签：java, ubuntu, imagemagick, jmagick

我正在尝试通过 ImageMagick 集成 jmagick，因此我在我的 Ubuntu 11.10 上安装了 Image magick 6.4.0 和 JMagick 6.4.0 Q16 我在 Eclipse 上尝试了以下代码来测试 jmagick 集成：

```
try{
ImageInfo info = new ImageInfo("myPic.jpg");
MagickImage image = new MagickImage();
MagickImage bigger = image.scaleImage(1200, 900);
bigger.setFileName("bigger.jpg");
bigger.writeImage(info);
} catch (MagickException e){
e.printStackTrace();
} 
```

运行一个简单的主类时，我得到以下异常：

```
magick.MagickException: No image to scale
at magick.MagickImage.scaleImage(Native Mehtod)
at comcom.myCompany.image.ImageTest.main(ImageTest.java:20) 
```

有没有人面临/解决同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:54:13.177

一个解决方案可能是验证 image magick 是否配置为使用所有需要的图像格式。要验证这一点，请点击以下命令并搜索关键字 DELEGATES 以获取**ImageMagick**配置为使用的文件扩展名：

```
convert -list configure 
```

如果您没有安装所需的库，那么您需要从图像魔法代表特殊页面下载它，您可以在这里找到：[http ://www.imagemagick.org/download/delegates/](http://www.imagemagick.org/download/delegates/)

下载委托库后，您需要按照以下说明解压缩并安装它：

```
tar xzvf jpegsrc.v7.tar.gz
 cd jpegsrc/
 ./configure
 sudo make
 sudo make install
 make clean 
```

接下来，您需要从您需要找到的 image magick 的源目录重新配置和重新安装 imagemagick：

```
./configure
 sudo make
 sudo make install 
```

现在重试看看 image magick 是否处理你的图像格式

# ruby-on-rails - 任何 Ruby API 或 Web 服务来读取扫描的 OMR 表？

> ID：10549562
> 
> 赞同：0
> 
> 时间：2012-05-11T10:21:08.620
> 
> 标签：ruby-on-rails, ruby, rest

我们正在构建一个 Rails 应用程序，该应用程序需要处理扫描的 OMR 答案表并保留结果。

是否有任何 Ruby 库可以读取扫描的 OMR 表？可以通过命令行调用的付费网络服务或桌面软件也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T15:05:14.407

试试[http://ocrsdk.com/](http://ocrsdk.com/)，它是一个基于云的 OCR 引擎，带有 Web API。它为您描述的数据捕获场景以及[复选标记](http://ocrsdk.com/documentation/apireference/processCheckmarkField/)和[条形码识别提供](http://ocrsdk.com/documentation/quick-start/barcode-sdk/)[字段级识别](http://ocrsdk.com/documentation/quick-start/text-fields/)功能。该服务提供 90 天免费试用，无需任何预付费用，因此在投入生产之前您无需支付任何费用。

您可能还会发现这个[Ruby 代码示例 @github](https://github.com/abbyysdk/ocrsdk.com/tree/master/Ruby)很有用（您需要注册 @ocrsdk.com 以接收 API 密钥）。我是该服务前端开发团队的一员，如有必要，可以为您提供更多信息。希望能帮助到你！

# javascript - 检查具有相同名称属性的元素是否存在jQuery

> ID：10549565
> 
> 赞同：0
> 
> 时间：2012-05-11T10:21:24.060
> 
> 标签：javascript, jquery, html

我有以下[jsFiddle](http://jsfiddle.net/Ue7VQ/)最能说明我想要做什么。这是相当不言自明的：如果存在具有相同名称属性的元素，则什么也不做；如果不存在这样的元素，则附加该元素。

```
if (an element exists in the div 'selects' with name="folder3") {
    return false;
} else {
    $('#selects').append('<select name="folder3"></select>');
} 
```

为这个保持简短和甜蜜！任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:24:28.317

就像是：

```
if ($('#selects select[name="folder3"]').length) { 
```

可能是您正在寻找的。

[http://jsfiddle.net/Ue7VQ/1/](http://jsfiddle.net/Ue7VQ/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:27:21.533

```
if ($("#selects select[name='folder3']").length>0) {
    return false;
} else {
    $('#selects').append('<select name="folder3"></select>');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T17:48:05.240

[**我在这里**](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery#answer-13313296)用以下插件回答了同样的问题。有关创建插件的完整详细信息，请访问答案。

* * *

如果元素存在，以下插件将允许您使用回调功能（与 jQuery 样式标记保持内联）。因此，对于您的示例，您可能会执行以下操作：

```
//  first callback is "if exist",
//  second callback method is "if not exist"
$('#selects select[name="folder3"]').exist(function(exist, elements, index) { // with a param, this cb will always fire
    /*  Do work for existing elements here  */
    /*  $(this) && this work just like any other jQuery method. this is the current element worked on   */
    /*  Params:
            exist: boolean (should always be true here) if exist
            elements: complete list of elements called using your selector, in this case '#selects select[name="folder3"]'
            index: the index number within the list of elements of THIS element
    */
},
function (exist, elements) {
    /*  Do alternate work, for elements do not exist    */
    /*  Params:
            exist: boolean (should always be false here) if exist
            elements: complete list of elements called using your selector, in this case '#selects select[name="folder3"]'
    */
}); 
```

| **或**|

```
if (!$('#selects select[name="folder3"]').exist()) {
    // element did not exist
    $('#selects').append('<select name="folder3"></select>');
} 
```

## 插入

```
(function($) {
    if (!$.exist) {
        $.extend({
            exist: function() {
                var ele, cbmExist, cbmNotExist;
                if (arguments.length) {
                    for (x in arguments) {
                        switch (typeof arguments[x]) {
                            case 'function':
                                if (typeof cbmExist == "undefined") cbmExist = arguments[x];
                                else cbmNotExist = arguments[x];
                                break;
                            case 'object':
                                if (arguments[x] instanceof jQuery) ele = arguments[x];
                                else {
                                    var obj = arguments[x];
                                    for (y in obj) {
                                        if (typeof obj[y] == 'function') {
                                            if (typeof cbmExist == "undefined") cbmExist = obj[y];
                                            else cbmNotExist = obj[y];
                                        }
                                        if (typeof obj[y] == 'object' && obj[y] instanceof jQuery) ele = obj[y];
                                        if (typeof obj[y] == 'string') ele = $(obj[y]);
                                    }
                                }
                                break;
                            case 'string':
                                ele = $(arguments[x]);
                                break;
                        }
                    }
                }

                if (typeof cbmExist == 'function') {    //  has at least one Callback Method
                    var exist =  ele.length > 0 ? true : false; //  strict setting of boolean
                    if (exist) {    // Elements do exist
                        return ele.each(function(i) { cbmExist.apply(this, [exist, ele, i]); });
                    }
                    else if (typeof cbmNotExist == 'function') {
                        cbmNotExist.apply(ele, [exist, ele]);
                        return ele;
                    }
                    else {
                        if (ele.length <= 1) return ele.length > 0 ? true : false;
                        else return ele.length;
                    }
                }
                else {  //  has NO callback method, thus return if exist or not based on element existant length
                    if (ele.length <= 1) return ele.length > 0 ? true : false; //   strict return of boolean
                    else return ele.length; //  return actual length for how many of this element exist
                }

                return false; //    only hits if something errored!
            }
        });
        $.fn.extend({
            exist: function() {
                var args = [$(this)];
                if (arguments.length) for (x in arguments) args.push(arguments[x]);
                return $.exist.apply($, args);
            }
        });
    }
})(jQuery); 
```

[`jsFiddle`](http://jsfiddle.net/SpYk3/cEUR5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T10:24:30.410

```
//if (an element exists in the div 'selects' with name="folder3") -yours comment
if ($('#selects').find('select[name="folder3"]').length) {
    return false;
} else {
    $('#selects').append('<select name="folder3"></select>');
}​ 
```

[**现场演示**](http://jsfiddle.net/gdoron/LtUr3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T10:28:51.857

```
if ($('#selects select[name="folder3"]').length) {
    return false;
} else {
    $('#selects').append('<select name="folder3"></select>');
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T10:29:33.623

```
var itemName = "folder4";
var $item = $('#selects select[name="' + itemName + '"]');

if($item.length == 0)
{
    $('#selects').append('<select name="' + itemName + '"></select>');
} 
```

[在这里](http://jsfiddle.net/FranWahl/G9Pmu/2/)提琴

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T10:30:13.480

看一下这个。还有许多其他解决方法。在这里，我检查每个下拉菜单，而不是页面中的所有其他元素。[http://jsfiddle.net/Ue7VQ/4/](http://jsfiddle.net/Ue7VQ/4/)

```
$(function ()
  {
      $.each( $("select"), function() {
          if ($(this).attr("name") == "folder3")
          {
              alert('Do you what you want to do over here');
          }
      });
  });​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T10:46:46.833

你可以试试这个

```
function checkSelects() {
        var contains = false;
        var temp = $("#selects").children();
        $(temp).each(function () {
            if ($(this).attr("name") == "folder3")
                contains = true;
         });
        if (!contains)
            $("#selects").append('<select name="folder3"></select>');

    } 
```

# java - 通知系统模型套装

> ID：10549568
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:21:35.307
> 
> 标签：java, architecture

我想为我的项目开发一个通知模块。系统在发生事件之一、新对话、新请求、标记我的新人时通知？一些朋友建议我使用 SQL Server 通知服务。其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:32:31.743

有很多很多选项可供您选择：

1.  您可以构建自己的系统
2.  您可以使用 JMS ( [ActiveMQ](https://activemq.apache.org/) , MQ 系列)
3.  您可以使用[Swing 的事件处理](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)（它完全独立于 UI）
4.  您可以使用[Spring 的 ApplicationEvent](http://static.springsource.org/spring-integration/reference/html/applicationevent.html)
5.  您可以使用我的[Signal Manager](http://epen.hg.sourceforge.net/hgweb/epen/signal/)，它实现了类似于[Qt](https://qt.nokia.com/products/)的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:29:04.293

为此使用 db 是我会选择的。使用发布订阅模式。例如，对于中间件，您可以使用 JMS 或 ActiveMQ。如果这是内部组件，您可以自己开发此模式。

# c# - “全球”WinForms 事件

> ID：10549570
> 
> 赞同：0
> 
> 时间：2012-05-11T10:21:39.490
> 
> 标签：c#, winforms, events

我有几个自定义控件的实例，它们在 MouseMove 上引发自定义事件。这是代码： EventArgs 类：

```
public class GroupMoveEventArgs
{
    public enum Action { CalcOffset, Move };
    Action action;
    int mouse_x;
    int mouse_y;

    // setters missed here

    public GroupMoveEventArgs(GroupMoveEventArgs.Action action,
        int mouse_x, int mouse_y)
    {
        this.action = action;
        this.mouse_x = mouse_x;
        this.mouse_y = mouse_y;
    }
} 
```

控制类：

```
public delegate void GroupMoveEventHandler(object sender, GroupMoveEventArgs e);
public event GroupMoveEventHandler GroupMoveEvent;

protected virtual void figureMouseMove(object sender, MouseEventArgs e)
{
    if (mouseDown)
    {
        if (inGroup)
        {   // raising the event
            if (this.GroupMoveEvent != null)
                GroupMoveEvent(this, new GroupMoveEventArgs(
                               GroupMoveEventArgs.Action.Move,
                               Parent.PointToClient(Control.MousePosition).X,
                               Parent.PointToClient(Control.MousePosition).Y));
        }
    }
}

protected virtual void OnGroupMoveEvent(object sender, GroupMoveEventArgs e)
{
    Console.WriteLine("Got mouse move event " + this.num_of_points);
    if (inGroup)
    {
        if (e.EventAction == GroupMoveEventArgs.Action.Move)
        {
            Location = new Point(e.MouseX - offset.X, e.MouseY - offset.Y);
        }
        else
        if (e.EventAction == GroupMoveEventArgs.Action.CalcOffset)
        {
            Control c = sender as Control;
            Point pnt = Parent.PointToClient(Control.MousePosition);
            Point tmp = c.Location;
            offset.X = pnt.X - tmp.X;
            offset.Y = pnt.Y - tmp.Y;
        }
    }
} 
```

问题是当我引发一个事件时，它只由发送者处理，而我需要所有控件来处理它。我怎样才能做到这一点？

在此先感谢，伊万。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:48:39.497

**选项1**

我会在控件上使用静态事件

```
 public static event GroupMoveEventHandler GroupMoveEvent; 
```

那么你的事件处理程序也需要是静态的

```
 protected static virtual void 
                  OnGroupMoveEvent(object sender, GroupMoveEventArgs e)
 { 
```

**注意** 如评论中所述，请确保您像这样引用您的静态事件

```
 GroupMoveEventHandler -= OnGroupMoveEvent; 
```

如果您想了解更多信息，这里是[静态事件的示例](http://www.c-sharpcorner.com/uploadfile/853a6a/static-event-in-C-Sharp/)

**选项 2**

将您的事件处理程序放在包含该控件的表单中，并在制作完所有实例控件后，将表单中的单个事件处理程序分配给来自控件的事件

**在表格中**

```
 Control c = new control();
 c.GroupMoveEventHandler += figureMouseMove(object sender, MouseEventArgs e); 
```

公共委托无效 GroupMoveEventHandler（对象发送者，GroupMoveEventArgs e）；公共事件 GroupMoveEventHandler GroupMoveEvent；

```
 protected virtual void figureMouseMove(object sender, MouseEventArgs e)
 {
     if (mouseDown)
     {
         if (inGroup)
         {   // raising the event
              if (this.GroupMoveEvent != null)
               GroupMoveEvent(this, new GroupMoveEventArgs(
                               GroupMoveEventArgs.Action.Move,
                               Parent.PointToClient(Control.MousePosition).X,
                               Parent.PointToClient(Control.MousePosition).Y));
         }
      }
    } 
```

# c# - 是否可以使用 Javascript 通过图像 url 获取图像大小

> ID：10549574
> 
> 赞同：0
> 
> 时间：2012-05-11T10:21:57.447
> 
> 标签：c#, javascript, asp.net, imageurl

有一个图像 url，这个图像的大小必须按最小宽度和高度按比例缩小，以便它可以显示在模板中。

上述模板及其内容将使用 javascript 生成到 html 中。所以我必须找到一种方法来使用 javascript 从图像 url 获取图像大小，以便图像的大小可以按比例减小，是否可以这样做？

我正在研究 asp.net 和 c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:24:58.820

如果我理解正确，您想加载图像并按比例缩小以适应屏幕上的特定空间？

在这种情况下，您无需计算任何内容，只需将 CSS 宽度/高度设置为您希望在加载时适合图像的最大空间。浏览器本身会按比例缩小图像以适应空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:25:30.937

不是直接的，但您可以使用一个技巧：URL 必须在某处生成；可能在服务器上。

你可以做的是生成这个网址：`http://domain/path/image.png?size=320x200`

当浏览器下载图像时，服务器将忽略该参数`size`，但您可以在 JavaScript 中检查这部分 URL。

# c# - 像在循环中一样查询

> ID：10549575
> 
> 赞同：0
> 
> 时间：2012-05-11T10:22:06.570
> 
> 标签：c#, .net, linq, predicate

我在一个方法中有一个 LINQ，该方法正在传递一个`HalfHour`对象数组，每个对象都包含 a`DateAndTime`和 a `HalfHourNumber`。

我需要分别查询每一个，然后平均结果。目前我的查询仅适用于第一个元素（我正在选择元素`[1]`）：

```
internal static decimal? Average(this IQueryable<LOSSES> query, HalfHour[] array)
{
     var list = query.ToList();

     var numbers = (from q in list
                    where  q.DAY == array[1].DateAndTime.Date
                    select q).Select(x => Calculations.SingleElement(x, 
                    array[1].HalfHourNumber));

     return numbers.Average();

} 
```

我将如何防止需要在循环中执行此操作（多次调用查询）同时保持对象属性正确关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:27:52.270

要获得与您的列表一起使用的平均值列表`LOSSES`：

```
var averages = list.Select(
    q => array.Where(hh => q.DAY == hh.DateAndTime.Date)
              .Select(hh => Calculations.SingleElement(q, hh.HalfHourNumber)
              .Average()).ToList(); 
```

或者，将每个`LOSSES`与字典中的平均值相关联（如果`LOSSES`支持用作键）：

```
var averages = list.ToDictionary(
    q => q,
    q => array.Where(hh => q.DAY == hh.DateAndTime.Date)
              .Select(hh => Calculations.SingleElement(q, hh.HalfHourNumber)
              .Average()
); 
```

# android - LinearyLayout 一旦高度为 0 就不会调整大小

> ID：10549580
> 
> 赞同：7
> 
> 时间：2012-05-11T10:22:17.787
> 
> 标签：android, android-layout, android-animation

有一个奇怪的。我已经设法将其归结为一个非常简单的示例。实在想不通。

我在 LinearLayout 中有一个 LinearLayout。我想使用动画来调整孩子的大小（有时我会很享受）。这是我的布局 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <!-- Lots more controls will appear above -->
        <LinearLayout android:layout_width="fill_parent" android:layout_height="0dp" android:id="@+id/animation_subject">
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/hello"
                android:gravity="center" />
        </LinearLayout> 
        <!-- Lots more controls will appear below -->
    </LinearLayout>

    <Button android:text="Slide it Down!" android:layout_width="fill_parent" android:layout_height="wrap_content" android:onClick="btnDoAnimDown_OnClick" />

</LinearLayout> 
```

现在，如您所见，有一个按钮，这是该按钮的代码。

```
public void btnDoAnimDown_OnClick(View v)
{
    View pnlSlider = findViewById(R.id.animation_subject);
    pnlSlider.measure(1000, 1000);
    DropDownAnim anim = new DropDownAnim(pnlSlider, pnlSlider.getMeasuredHeight(), true);
    anim.setDuration(2000);
    pnlSlider.startAnimation(anim);

    return;     
} 
```

如果你现在运行它，它就不会滑下来。完全没有。但是，如果您要将 Button 移动到我将其命名为 Overview 的 LinearLayout 并将其放在 Child LinearLayout 之后，它会很有效！像这样...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <!-- Lots more controls will appear above -->
        <LinearLayout android:layout_width="fill_parent" android:layout_height="0dp" android:id="@+id/animation_subject">
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/hello"
                android:gravity="center" />
        </LinearLayout> 
        <!-- Lots more controls will appear below -->
        <Button android:text="Slide it Down!" android:layout_width="fill_parent" android:layout_height="wrap_content" android:onClick="btnDoAnimDown_OnClick" />
    </LinearLayout>

</LinearLayout> 
```

它现在向下滑动，正如预期的那样。显然，父布局正在发生一些事情......由于 getMeasuredHeight() 返回正确的值，它只是动画实际上并没有运行！

这是动画课，我错过了什么傻事吗？大概是吧！

```
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.Transformation;

public class DropDownAnim extends Animation {
    int targetHeight;
    View view;
    boolean down;

    public DropDownAnim(View view, int targetHeight, boolean down) {
        this.view = view;
        this.targetHeight = targetHeight;
        this.down = down;
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        int newHeight;
        if (down) {
            newHeight = (int) (targetHeight * interpolatedTime);
        } else {
            newHeight = (int) (targetHeight * (1 - interpolatedTime));
        }
        Log.d("new height", String.valueOf(newHeight));
        view.getLayoutParams().height = newHeight;
        view.requestLayout();
    }

    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        super.initialize(width, height, ((View)view.getParent()).getWidth(), parentHeight);
    }

    @Override
    public boolean willChangeBounds() {
        return true;
    }
} 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:41:04.227

让我在这里猜测一下。

在您的第一个布局中，内部布局和按钮共享外部线性布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <!-- Lots more controls will appear above -->
        <LinearLayout android:layout_width="fill_parent" android:layout_height="0dp" android:id="@+id/animation_subject">
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/hello"
                android:gravity="center" />
        </LinearLayout> 
        <!-- Lots more controls will appear below -->
    </LinearLayout>

    <Button android:text="Slide it Down!" android:layout_width="fill_parent" android:layout_height="wrap_content" android:onClick="btnDoAnimDown_OnClick" />

</LinearLayout> 
```

这使得外部布局成为 ViewGroup！

但是在动画的初始化方法中，您对给定视图的父级进行强制转换。

您将其转换为 View，它不在您的第一个布局中。

在你的第二个它是，这就是它工作的原因。

因此，我希望您尝试将其转换为 ViewGroup：

```
@Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        super.initialize(width, height, ((ViewGroup)view.getParent()).getWidth(), parentHeight);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T01:45:18.597

我不知道为什么你的代码不想做动画。但我做了一点改变。我所做的是将动画应用于父布局而不是您正在转换的布局。这是xml的代码，我只在父布局中添加了一个Id：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:id="@+id/animation_subject_parent" android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <!-- Lots more controls will appear above -->
        <LinearLayout android:layout_width="fill_parent" android:layout_height="0dp" android:id="@+id/animation_subject">
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="@string/hello"
                android:gravity="center" />
        </LinearLayout> 
        <!-- Lots more controls will appear below -->
    </LinearLayout>
        <Button android:text="Slide it Down!" android:layout_width="fill_parent" android:layout_height="wrap_content" android:onClick="btnDoAnimDown_OnClick" />

</LinearLayout> 
```

这是按钮 clic 的代码：

```
public void btnDoAnimDown_OnClick(View v)
{
    View pnlSlider = findViewById(R.id.animation_subject);
    View parent = findViewById(R.id.animation_subject_parent);

    pnlSlider.measure(1000, 1000);
    DropDownAnim anim = new DropDownAnim(pnlSlider, pnlSlider.getMeasuredHeight(), true);
    anim.setDuration(2000);

    parent.startAnimation(anim);

    return;     
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T14:08:28.830

不确定它是否会有所帮助，但尝试添加`android:layout_weight="1"`到`LinearLayout``id="@+id/animation_subject"`

# objective-c - 复制捆绑资源

> ID：10549582
> 
> 赞同：0
> 
> 时间：2012-05-11T10:22:34.717
> 
> 标签：objective-c, bundle, resourcebundle

我在objective-c上编程。我已经从 MyTarget -> Build Phases -> Copy Bundle 资源中删除了所有文件。由于我的项目不起作用，我该如何退货？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:39:58.953

您需要再次添加它们。如果您的项目结构良好，那么您应该将它们放在 Resources 文件夹中。如果没有，现在是修复项目结构的好时机，但不幸的是，您必须手动添加每个资源文件。

此外，由于 SDK 现在随 git 一起提供，因此最好使用它并提交您的更改。如果您使用 git，恢复它就像将项目文件恢复到以前的版本一样简单。

# php - 输入 bbcode 异常

> ID：10549584
> 
> 赞同：0
> 
> 时间：2012-05-11T10:23:02.987
> 
> 标签：php, regex, bbcode

```
$pattern = "/\[url\=(.*)\](.*)\[\/url\]/i"; 
```

我上面的模式将 bbcode 重写为 html，但我想从我自己的域中排除链接。是否可以修改正则表达式，使其适用于所有外部链接，但不适用于我自己域的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:39:46.810

假设您的域是`example.com`，则此模式可以完成工作：

```
/\[url\=((?:(?!example\.com).)*)\](.*)\[\/url\]/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:45:07.977

每当您想做类似的事情时，您通常都会使用该[`preg_replace_callback`](http://php.net/preg_replace_callback)功能。

它允许您指定一个回调函数，该函数可以在提供替换字符串之前检查进一步的条件，该替换字符串允许用相同的“替换”，因此不进行替换。

```
$pattern = "/\[url\=(.*)\](.*)\[\/url\]/i";
$callback = function($matches)
{
    $url = $matches[1];
    if (is_own_domain_url($url)) {
        return $matches[0]; # no changes
    } else {
        $title = $matches[2];
        return sprintf('<a href="%s">%s</a>'
                , htmlspecialchars($url)
                , htmlspecialchars($title)
        );
    }
}

$html = preg_replace_callback($pattern $callback, $bbcode); 
```

# javascript - d3.js & json - 简单的示例代码？

> ID：10549585
> 
> 赞同：27
> 
> 时间：2012-05-11T10:23:07.647
> 
> 标签：javascript, json, d3.js

有一些示例可以从 d3.js 中的外部 json 文件获取数据。但是这些示例没有显示 json，所以我真的很想看看它是如何工作的。

我有这个 json 文件 test.json，它看起来像

```
[
    {"a":"-1.14","b":"4.14"},
    {"a":"-0.13","b":"1.38"},
    {"a":"-4.19","b":"1.43"},
    {"a":"-0.21","b":"3.34"}
] 
```

我想用这些数据做一个散点图。

在 d3.js 脚本中。我添加到现在。

```
var width = 400;
var height = 400;

var x = d3.scale.linear()
    .domain ([-5, 5])
    .range([0, width]);
var y = d3.scale.linear()
    .domain ([-5, 5])
    .range([0, height]);

var chart = d3.select("body").append("svg")
    .attr("width", width+70)
    .attr("height", height+70)
    .attr("class", chart)
    .append("g")
        .attr("transform", "translate(30, 30)");

chart.selectAll("xline")
    .data(x.ticks(11))
    .enter().append("line")
        .attr("x1", x)
        .attr("x2", x)
        .attr("y1", 0)
        .attr("y2", height)
        .style("stroke", "#ccc");

chart.selectAll("yline")
    .data(y.ticks(11))
    .enter().append("line")
        .attr("y1", y)
        .attr("y2", y)
        .attr("x1", 0)
        .attr("x2", width)
    .style("stroke", "#ccc"); 
```

如果我使用这个数据集：

```
var dataset = [ [-1, -3], [2, 4], [3, -4], [-3, 1]]; 
```

我添加了这个，它工作正常。

```
 chart.selectAll("scatter-dots")
      .data(dataset)
      .enter().append("circle")
        .attr("cx", function (d) { return x(d[0]); } )
        .attr("cy", function (d) { return y(d[1]); } )
        .attr("r", 10)
        .style("opacity", 0.6); 
```

我想知道如果我使用外部 json 文件，我应该如何更改调用数据的部分。我真的很感激有人能教我这个！非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-13T19:52:33.733

尝试这样的事情

```
d3.json("data.js", function(data) {
alert(data.length)
}); 
```

其中 data.js 或 data.json 或任何你想调用它的东西，只要它有 js 内容就是你的 json 文件。还可以尝试阅读：[https](https://github.com/mbostock/d3/wiki/Requests) ://github.com/mbostock/d3/wiki/Requests 。所有使用 json 数据的代码都将从 json 回调函数中调用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-14T18:53:11.163

如果您更熟悉这些，也可以使用[Jquery JSON 调用。](http://api.jquery.com/jQuery.getJSON/)或者您甚至可以只使用引用分配给 JSON 的变量的脚本标记，如下所示：

```
<script src="us-pres.json" type="text/javascript"></script> 
```

us-pres.json 的开头是这样的：

```
var dataset = {"state":"US",... 
```

只要您将 JSON 放入变量（集合）中，d3 并不真正关心您是如何做到的。一旦它在那里，你只需使用 d3`.data(dataset)`调用来分配它。

# drupal - Drupal 站点的 FTP 地址以及 dev 和 prod 之间的迁移

> ID：10549588
> 
> 赞同：0
> 
> 时间：2012-05-11T10:23:13.717
> 
> 标签：drupal, ftp

我现在正在学习 Drupal，我对迁移有一些疑问：

1) 我知道这是一个愚蠢的问题，但我有一个 Drupal 站点需要更新。我也可以访问管理菜单，但我没有托管该站点的 ftp 地址。我收到了一份数据表，但没有提及。我在哪里可以找到它？

2) 将开发站点迁移到生产站点的最简单解决方案是什么？我有备份和迁移模块，所以我可以将它用于数据库，但我还需要备份 ftp 服务器上的文件......但正如提到的，我没有地址。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:37:18.343

1.  如果您不知道 FTP 地址，您可以向您的主机询问
2.  我真的不知道它是否是最干净的解决方案，但是当我必须迁移 Drupal 解决方案时，我会导出我的数据库，然后编辑配置文件。如果您不确定，您可以在新的服务器上部署您的所有 drupal 文件，然后处理安装并导入数据库。

仍然检查数据库上没有配置

# ios - 为什么滚动 UITableView 比滚动 UIScrollView 响应更快？

> ID：10549589
> 
> 赞同：1
> 
> 时间：2012-05-11T10:23:13.983
> 
> 标签：ios, uitableview, uiscrollview

注意：这不是性能问题！我知道 UITableView 中单元格出列的好处。

为了测试，我创建了一个带有一些简单不透明 UIView 子视图的 UIScrollView，这些子视图在白色滚动视图上具有黑色背景色，它们之间有 100 点间距，因此可以滚动。重量很轻。没有其他的。真的相信我，它并不重。

我注意到开始滚动滚动视图和开始滚动表格视图之间存在巨大差异。

当我触摸滚动视图并立即开始拖动时，它滞后了大约 0.25 秒，然后突然赶上。从那里开始它是流动的，在我再次触地之前不再滞后。

在一个更大、更复杂的 UITableView 上，当我做同样的事情时，在它开始滚动之前没有 0.25 秒的初始延迟。

我试图改变所有可能的属性，但无法消除这种愚蠢的延迟。我相信它与滚动视图有关，想要确定触摸是否打算在子视图上发生，然后查看用户是否移动它的手指太多。然后它开始滚动。

现在疯狂的是 UITableView 本身就是一个 UIScrollView，我想让我的 UIScrollView 开始滚动的速度和 UITableView 一样快。如何？

**编辑：**嘘..我发现了一些疯狂的东西！

```
NSLog(@"GR = %@", self.gestureRecognizers);

GR = (

"<UIScrollViewDelayedTouchesBeganGestureRecognizer: 0x13e930; 
state = Possible; 
delaysTouchesBegan = YES; 
view = <TestScrollView 0x13e380>; 
target= <(action=delayed:, target=<TestScrollView 0x13e380>)>>",

"<UIScrollViewPanGestureRecognizer: 0x13ee00; 
state = Possible; 
delaysTouchesEnded = NO; 
view = <TestScrollView 0x13e380>; 
target= <(action=handlePan:, target=<TestScrollView 0x13e380>)>>"

) 
```

这是 iOS 4，iOS4 中没有 panGestureRecognizer 属性。最可疑的是 UIScrollViewDelayedTouchesBeganGestureRecognizer 和 delaysTouchesBegan。该死！如何在 iOS4中将其设置为**NO ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:34:43.083

编辑：

我[在 SO 找到了这个答案](https://stackoverflow.com/questions/3642547/uibutton-touch-is-delayed-when-in-uiscrollview)。

基本上，您可以尝试子类化`UIScrollView`和覆盖`touchesShouldCancelInContentView`，以便它始终返回 NO：

```
- (BOOL)touchesShouldCancelInContentView:(UIView *)view
{
      return NO;
} 
```

上一个答案：

> 我试图改变所有可能的属性，但无法消除这种愚蠢的延迟。我相信它与滚动视图有关，想要确定触摸是否打算在子视图上发生，然后查看用户是否移动它的手指太多。然后它开始滚动。

我认为这是正确的假设。事实上，响应者链和事件管理的设计方式是，最具体的视图是接收事件通知的视图；在此过程中，会询问响应者链中的每个视图，直到找到最深的视图。

> 触摸事件。窗口对象使用命中测试和响应者链来找到接收触摸事件的视图。在命中测试中，窗口在视图层次结构的最顶层视图上调用 hitTest:withEvent:；此方法通过在视图层次结构中返回 YES 的每个视图上递归调用 pointInside:withEvent: 来继续，沿着层次结构向下进行，直到找到在其范围内发生触摸的子视图。该视图成为命中测试视图。

（[来源](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/EventsiPhoneOS/EventsiPhoneOS.html)）

可能`UITableView`会做一些事情来改变这种行为。

让您的滚动视图成为第一响应者：

```
 [scrollView becomeFirstResponder] 
```

将不起作用，因为这只会影响非触摸事件的调度。

您可以尝试使内部视图不启用触摸，看看是否有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:59:05.637

你试过`subViews.userInteractionEnabled = NO;`吗？这将帮助您消除接触假设。

# iis - asp.net页面中的时间格式

> ID：10549594
> 
> 赞同：0
> 
> 时间：2012-05-11T10:23:33.637
> 
> 标签：iis, parameters, telerik, culture

我使用 Telerik RadDateTime 控件将日期和时间插入到 SQL Server DB 的一个表中。问题在于我在浏览器中看到的内容：

当我的网格绑定到数据库时，它以 dd/MM/yyyy hh.mm.ss 格式显示包含日期时间值的单元格，我想以 dd/MM/yyyy hh:mm:ss 格式显示此数据，因为当我通过编辑模式，RadDateTimeColumn 正确显示“：”而不是“。” 但是接下来当我确认更新或插入时，参数将再次以 dd/MM/yyyy hh.mm.ss 格式传递给存储过程！！！

这个问题只在网络服务器上，因为相同的页面/数据库在我的机器上并且一切正常，我控制了 CULTURE,WEB.CONFIG 但我现在不知道该怎么做

我也可以说，如果我在网络服务器上调试网站，问题就会消失......

可能是IIS？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:29:27.293

如果您只是想格式化页面上的日期，我认为您可以这样做。

```
<telerik:RadDateTimePicker ID="RadDateTimePicker1" runat="server">
    <DateInput
       DateFormat="dd/MM/yyy hh:mm:ss tt"
       DisplayDateFormat="dd/MM/yyy hh:mm:ss tt"  >
    </DateInput>
</telerik:RadDateTimePicker> 
```

我知道这适用于 datetimepicker 控件，但就 RadDateTimeColumn 而言，我不确定。可能有类似于 DateFormat 和 DisplayDateFormat 的属性。

# java - Java Swing：阻止组件更新启用状态，直到我告诉他们

> ID：10549595
> 
> 赞同：0
> 
> 时间：2012-05-11T10:23:34.963
> 
> 标签：java, swing

我有一个广泛的 Gui，其中包含许多组件。有一种`updateEnable()`方法可以根据某些配置更新所有组件的启用状态。

我基本上首先将它们的启用状态设置为 true，然后禁用其中的一些（基于配置）：

```
private void updateEnable() {
  enableAllRec(panel, true);
  // disable some components
}

private void enableAllRec(Container root, boolean b) {
  if (root == null) return;
  for (Component c : root.getComponents()) {
    c.setEnabled(b);
    if (c instanceof Container) enableAllRec((Container) c, b);
  }
} 
```

我这样做的原因是某些组件没有存储为成员变量，我无权访问它们。然而，它们可以改变它们的状态，因为我像这样初始化了它们中的一些（例如）：

```
final JLabel exampleLabel = new JLabel("yoink");
final JCheckBox exampleCheckBox = new JCheckBox("boing");
exampleCheckBox.addItemListener(new ItemListener() {
  @Override
  public void itemStateChanged(ItemEvent e) {
    exampleLabel.setEnable(exampleCheckBox.isSelected());
  }
}); 
```

现在我的问题如下：当我调用时`updateEnable()`，一些（存储的）组件可能会闪烁，因为它们被启用，然后在一段时间后再次禁用。我想防止这种情况发生。我的想法是以某种方式阻止 GUI 刷新，直到结束，`updateEnable()`然后执行`updateUI()`. 但这不是很优雅，我不知道如何防止 GUI 更新。

我是否错过了一个非常优雅的替代解决方案来解决这个问题？

非常感谢，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:01:59.677

如果您的组件可能由于某些逻辑更改和计算而连续启用/禁用几次 - 您应该在将某些更改应用于可视组件之前执行该计算。在这种情况下，您会将组件状态直接更改为最终状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:58:50.637

好的，我的方法似乎奏效了。我只是扩展了`enableAllRec(Container root, boolean b)`一些排除项：

```
private void enableAllRec(Container root, boolean defaultState, Set<Component> disableList, Set<Component> enableList) {
  if (root == null) return;
  for (Component c : root.getComponents()) {
    if (disableList != null && disableList.contains(c)) {
      c.setEnabled(false);
      disableList.remove(c);
    } else if (enableList != null && enableList.contains(c)) {
      c.setEnabled(true);
      enableList.remove(c);
    } else c.setEnabled(defaultState);
    if (c instanceof Container) enableAllRec((Container) c, defaultState, disableList, enableList);
  }
} 
```

这样，我可以确定我想要启用/禁用的所有组件，将它们添加到相应的集合中，然后调用 enableAllRec。例子：

```
Set<Component> enableList = new HashSet<Component>();
enableList.add(searchFreqButton);
enableList.add(advMeasButton);
enableAllRec(configPanel, false, null, enableList); 
```

显然，这对于大型套装来说并不理想，但足以满足我的需求（大约 800 个组件，并且套装包含不超过 20-30 个组件）。我怀疑这种方法也可以轻松处理更大的集合。

在上面的例子中，引入 disableList 是没有意义的（因为默认情况下所有组件都将被禁用）。因此，根据默认值，可以省略相应的集合。当然，这应该最好完成`enableAllRec()`。

# jquery - Ajax 返回错误

> ID：10549601
> 
> 赞同：0
> 
> 时间：2012-05-11T10:23:56.770
> 
> 标签：jquery, ajax, asp.net-mvc

这是ajax调用：

```
$.ajax({ url: "/TheControllerName/MyMethod",
    type: "GET",
    contentType: "application/json", dataType: 'json',
    success: function (data) {
        alert('something');
    },
    error: function (httpRequest, textStatus, errorThrown) {
        console.log("status=" + textStatus + ",error=" + errorThrown);
    }
})//end of ajax call 
```

这是方法：

```
 public JsonResult MyMethod()
    {
        //get some list
        return Json(theList, JsonRequestBehavior.AllowGet);
    } 
```

该方法被调用并且断点成功出现，但我收到此错误：500 (Internal Server Error) status=error,error=Internal Server Error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:42:32.570

将接受类型设置为 json 而不是内容类型，输入 url 时它起作用的原因是因为它没有设置

# algorithm - 网络上的泛洪算法

> ID：10549604
> 
> 赞同：1
> 
> 时间：2012-05-11T10:24:13.737
> 
> 标签：algorithm, networking, flooding

所以我必须模拟一个课程项目的原始洪水算法，我想澄清和确认一些想法，因为在互联网上似乎很难找到我想要的东西（所以我一定做错了什么）......

无论如何，据我所知，泛洪算法是当一个节点想要将一系列数据包发送到目的地时，将每个数据包发送到每个连接的节点。然后，这些接收节点通过将它们收到的数据包的副本发送到所有连接的节点（发送原始数据包的节点除外）来重复该过程。依此类推，直到数据包到达目的地。所以基本上这个算法可以确保数据包在网络泛滥的同时到达目的地；因此得名。所以这是我和我的教授澄清的：

1）我假设生成的数据包将有一个跳跃计数器，它的值对于每个数据包都是相同的，在每个访问的节点上都会减少，当它达到 0 时数据包将被丢弃。我还假设该值将取决于网络的大小，他同意但没有说明网络的大小如何影响它。你拿它的直径吗？有人能帮我一下吗？

2) 一个节点在自己身上保留他们收到的数据包的副本（为什么？如果他们将其插入的一个节点没有发送回确认，则重新发送？）并且当跳跃计数器达到 0 时，数据包从网络中掉线，但是当一个数据包到达一个已经拥有它的副本的节点时会发生什么？我假设节点丢弃它，因为它有一个副本并且逻辑上已经将它发送给它的所有邻居，但我不确定。有人可以澄清一下吗？

3）所有节点都具有它们可以容纳的最大数据包容量。那么当一个节点达到最大容量时“停止”工作并且不接受进一步的数据包或以 FIFO 方式丢弃？我假设第一个，因为该项目的目标之一是估计哪些节点将首先被淹没。但实际上会发生什么？连接到它的节点不断发送数据包，只是没有得到确认，因为它丢弃它们或发送一个不再接收数据包的信号，我不知道，将其路由表中的成本更改为一个值这意味着没有连接/或无限成本，因此他们不再发送任何东西。

4）另外我忘了问，生成数据包的源节点呢？它还保留副本吗？我认为确实如此，但它不是最有可能首先泛滥的节点，因为它会在生成的那一刻保留每个数据包的副本？大概是我想多了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T01:20:58.423

> 1) [跳计数器值]

它需要足够大才能遍历网络。它基本上是数据包在通过网络的最长路径上遇到的中间节点的数量。

> 2）当一个数据包到达一个已经拥有它的副本的节点时会发生什么？

它被丢弃。

> 3）所有节点都具有它们可以容纳的最大数据包容量。那么当一个节点达到最大容量时“停止”工作并且不接受进一步的数据包或以 FIFO 方式丢弃？

不接受新数据包。无处可放：它仍然有未处理的数据包排队。这不是先进先出。

> 4）另外我忘了问，生成数据包的源节点呢？它还保留副本吗？我认为确实如此，但它不是最有可能首先泛滥的节点，因为它会在生成的那一刻保留每个数据包的副本？大概是我想多了……

如果源节点正在收集确认，它将保留每个数据包直到它被确认，因此它可以实现重试算法。

了解您是在谈论 IP、UDP 还是 TCP，还是只是数据链路层，这将有很大帮助。

# html - Colspan 扰乱了表格布局

> ID：10549605
> 
> 赞同：2
> 
> 时间：2012-05-11T10:24:15.977
> 
> 标签：html, html-table

请看下面的html：

```
 <table style="width: 700px;table-layout: fixed ; margin-top: 30px;" cellpadding="0" cellspacing="0">
        <tr class="tableHeader">
          <td width="220px">Event Name</td>

          <td width="120px">City</td>
          <td width="77px">Date</td>
          <td width="110px">Price</td>
          <td width="80px">Status</td>
          <td width="60px">Select</td>
        </tr>
    </table>

    <div style="overflow: auto;height: 360px; width: 730px;">
        <table style='width: 700px;table-layout: fixed;' cellpadding='0' cellspacing='0'>
                <tr >
                    <td colspan='6' >adnanpo </td>
                </tr>
                <tr >
                    <td width='220px' >adnanpo </td>
                    <td width='120px' > </td>
                    <td width='77px' >04/20/2012 </td>
                    <td width='110px' >USD $30.00 </td>
                    <td width='80px' >Paid </td>
                    <td width='60px' >
                        <input class='orgOkButton' type='button' id='btnOpenOrder' name='btnOpenOrder' onclick='return openOrderWindow('/RealResource/submitorder.aspx?OId=35731&EvtId=771')</td> 
                </tr>
            </table>
        </div> 
```

以下部分解决了这个问题：

```
 <tr >
                    <td colspan='6' >adnanpo </td>
                </tr> 
```

![在此处输入图像描述](../Images/622b864e2a09f07c391bde3271456a37.png)

请看图，列宽有问题！！请帮我修复它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:46:26.967

显而易见的解决方案是删除`tr`导致问题的元素。这里似乎没有功能。如果您只需要一些间隔，`div`请在两个表之间放置一个元素。

出现问题是因为`table-layout: fixed`告诉浏览器根据**第一**行决定列宽，如果宽度没有以某些其他方式设置。这里第一行只有一个跨越所有列的单元格，然后定义的行为是在列之间平均划分宽度。

或者，明确设置列宽，例如使用

```
 <col width=220>
    <col width=120> 
```

等在每个`<table>`标签之后。但请确保宽度的总和与您设置为表格总宽度的数字相加（目前没有）。当`col`以这种方式使用元素来设置所有列宽时，浏览器将毫无疑问地使用这些确切的宽度（这可能会导致问题，但我想你已经考虑过了）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T10:28:54.753

删除第二个表中的 'table-layout' 属性，它会正常工作。并关闭你的输入元素（`onclick="return openOrderWindow('/RealResource/submitorder.aspx?OId=35731&EvtId=771')"/>`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:30:28.437

如果我理解正确，您担心您的列未与顶部对齐。

我首先建议您使用以下 CSS：

```
table { empty-cells: show; } 
```

这将允许您必须填写空白单元格。（否则你可以`&nbsp;`在它的空白处放一个）。

另外，如果可以的话，我建议你使用一张连续的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:30:44.803

关闭您的输入标签 - > 丢失了。如果问题仍然存在，我们可以进一步观察。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T10:33:18.553

是的`colspan`，在表格的“第一行”中使用就是这种情况。为了解决这个问题，你可以做这样的事情（同样只是第一行 - 你可以在`colspan`下面使用 fine）：

```
 <tr>
                    <td width="220px"><div style="position:absolute;width:220px;">adnanpo</div></td>
                    <td width="120px"></td>
                    <td width="77px"></td>
                    <td width="110px"></td>
                    <td width="80px"></td>
                    <td width="60px"></td> 
                </tr> 
```

# objective-c - 向手势识别器初始化选择器发送参数？

> ID：10549606
> 
> 赞同：11
> 
> 时间：2012-05-11T10:24:21.707
> 
> 标签：objective-c, ios, methods, selector, uitapgesturerecognizer

在我的程序中，我有一个`UITapGestureRecognizer`用`initWithTarget: action:`. 我传入了一个选择器来调用一个名为`PlanetTapped: (UIImageView *)aPlanet`. 这很好地调用了该方法，但是我想知道如何`action:`像使用`performSelector: withObject`. 这是可能的吗？允许您向`UIGestureRecognizer`' 选择器发送参数是有意义的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T10:26:58.860

要调用的方法的正确签名是：

```
-(void) PlanetTapped: (UIGestureRecognizer*)gestureRecognizer 
```

然后你可以通过调用来访问接收到手势的视图：

```
-(void) PlanetTapped: (UIGestureRecognizer*)gestureRecognizer {

    UIImageView* aPlanet = gestureRecognizer.view;
    ...
} 
```

事实上，这就是[UIGestureRecognizer 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)状态：

> 手势识别器有一个或多个与之关联的目标-动作对。如果有多个目标-动作对，它们是离散的，而不是累积的。手势的识别导致将动作消息发送到每个对的目标。调用的操作方法必须符合以下签名之一：
> 
> *   (void)handleGesture；
> *   (void)handleGesture:(UIGestureRecognizer *)gestureRecognizer;

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T10:34:34.677

```
- (void)viewDidLoad
{
UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressOnPhotos:)];
[yourView addGestureRecognizer:longPressRecognizer];
}

- (IBAction)handleLongPressOnPhotos:(UILongPressGestureRecognizer *)sender{
// use "sender.view" to get the "yourView" you have long pressed
} 
```

希望这些对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T00:41:41.697

在 Swift 3.0 中，函数签名如下（在这些示例中适当地替换另一个手势识别器类）：

```
func myButtonLongTouch(_ sender: UILongPressGestureRecognizer) 
```

您在设置手势识别器时引用此函数，如下所示：

```
longTouchGesture = UILongPressGestureRecognizer(target: self, action: #selector(myButtonLongTouch(_:))) 
```

然后，要访问被按下的视图（在我的例子中是一个按钮），请使用以下代码：

```
if let button = sender.view as? UIButton {
    // Your code here
} 
```

最后，不要忘记这个函数被多次调用（通常是在手势开始和结束时），所以你需要检查状态，你可以这样做：

```
if (sender.state == UIGestureRecognizerState.ended) {
    // Your code here
} 
```

# c# - 如何过滤 Sharepoint 中的查找字段？

> ID：10549610
> 
> 赞同：2
> 
> 时间：2012-05-11T10:24:37.667
> 
> 标签：c#, sharepoint

我有一个“合同”列表，它有两列 - “标题”和“状态”。状态是一个选择字段，可以是“活动”或“关闭”。我有另一个列表，我在其中创建了一个查找字段“合同”，该字段由“合同”列表中“标题”列中的记录填充。现在，我需要让它只填充那些具有活动状态的标题。

到目前为止我有这个

```
 SPList contractList = web.Lists.TryGetList("Contracts");
            if (contractList != null)
            {
                myList.Fields.AddLookup("Contract", contractList.ID, false);
                SPFieldLookup lookup = (SPFieldLookup)taskList.Fields["Contract"];
                lookup.LookupField = contractList.Fields["Title"].InternalName;
                lookup.Update();
            } 
```

显然，它从“合同”列表中获取所有标题。是否可以过滤它，只显示“状态”字段等于“活动”的那些？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T12:16:37.157

您可以在从列表中检索时使用查询来过滤数据。这可能会对您有所帮助：http: [//msdn.microsoft.com/en-us/library/ms457534.aspx](http://msdn.microsoft.com/en-us/library/ms457534.aspx)

# c++ - WaitforMultipleObjects 无法正常工作

> ID：10549614
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:24:53.970
> 
> 标签：c++, windows, winapi

我尝试监控更改

1.  `//server/results`
2.  `//server/results/1`
3.  `//server/results/1/output`
4.  `//server/results/2`
5.  `//server/results/2/output`
6.  `//server/results/3`
7.  `//server/results/3/output`
8.  ETC...

他们每个人都有一个由`FindFirstChangeNotification`. 因此，当生成更多结果时，句柄数接近服务器连接限制 50。（通常一个远程服务器可以同时支持最多 50 个接收功能。）我的问题是一切正常，直到数量手柄达到 47 左右，然后`//server/results`停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:58:22.287

`FindFirstChangeNotification`您可以尝试使用[ReadDirectoryChangesW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465.aspx)而不是使用，它可以递归地监视文件夹。

# php - 如何在没有报价或订单的情况下在我的帐户页面中显示付款方式表单？

> ID：10549621
> 
> 赞同：1
> 
> 时间：2012-05-11T10:25:11.460
> 
> 标签：php, magento

在 Magento 1.6 社区版中：

我想使用我的自定义模块将所有付款方式显示到我的帐户部分。问题是所有付款方式都显示正确，但付款方式表单仅在购物车中有某些物品时显示。

这个查询什么也不返回：

`$this->getChildHtml('payment.method.'.$_code)`

# android - SQLite：增加“真实”类型的值

> ID：10549624
> 
> 赞同：0
> 
> 时间：2012-05-11T10:25:33.150
> 
> 标签：android

我的意图：我正在尝试增加 SQLite 列中的值。该列的类型为“REAL”。

问题：当我执行递增（使用 UPDATE）时，什么也没有发生，并且列没有被更新。我在游标 mCount、mPos 和 mRowIdColumnIndex 上得到 -1。

我的调查：我发现（通过将我的数据库导入 PC 并使用 SQLite 数据库浏览器打开它）当初始值为 NULL 时，我无法增加“真实”类型的值，所以我添加了“myColumn real DEFAULT 0.0”到我的表创建方法。这会将值设置为 0.0，以后可以递增。

SQLiteQuery: UPDATE ts_stocks SET score= (score + 1.0) WHERE stock_id=35 AND t_id=1

我的表结构：

```
create table ts_stocks (_id integer primary key autoincrement,
        t_id integer, 
        stock_id integer,
        score real DEFAULT 0.0,
        datetime text not null,
        FOREIGN KEY(t_id) REFERENCES ts(_id) ON DELETE CASCADE ON UPDATE CASCADE);  
        FOREIGN KEY(stock_id) REFERENCES stocks(_id) ON DELETE CASCADE ON UPDATE CASCADE); 
```

我的代码：

```
public Cursor updateParticipantScore(TParticipant tParticipant, Long tId)
{
    String queryUpdateParticipantScore = "UPDATE " +
            StConstants.TblTsStocks.TBL_TS_STOCKS_NAME +
            " SET " +
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_SCORE +
            "= (" + 
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_SCORE + 
            " + " + 
            tournamentParticipant.getScore() +
            ") WHERE " + 
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_ID +
            "=" +
            tParticipant.getStock().getId() +
            " AND " +
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_TOURNAMENT_ID +
            "=" +
            tId;

    Cursor resultSetCursor = mDb.rawQuery(queryUpdateParticipantScore, null);

    return resultSetCursor;
} 
```

此代码创建上述 SQL：

更新 ts_stocks SET score= (score + 1.0) WHERE stock_id=35 AND t_id=1

取自正在运行的应用程序调试器。在下载的 db WORKS 上使用此 SQL 语句 - 它以正确的方式增加“分数”。

任何人都知道我做错了什么？

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:00:34.700

你不应该使用更新`rawQuery`

```
mDb.rawQuery(queryUpdateParticipantScore, null); 
```

尝试：

```
mDb.execSQL(queryUpdateParticipantScore); 
```

甚至更好的是，格式化一次查询，创建一个`SQLiteStatement`并绑定您的参数*，如下所示*：

```
static final String UPDATE_PARTICIPANTS_SCORE = "UPDATE " +
            StConstants.TblTsStocks.TBL_TS_STOCKS_NAME +
            " SET " +
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_SCORE +
            "= (" + 
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_SCORE + 
            " + ?) WHERE " + 
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_STOCK_ID +
            "=? AND " +
            StConstants.TblTsStocks.TBL_COLUMN_TS_STOCKS_TOURNAMENT_ID +
            "=?";
SQLiteStatement mUpdateParticipantsScoreStatement;

public .. whereEverYouInitializeYourStuff() {
    mUpdateParticipantsScoreStatement = mDb.compileStatement(UPDATE_PARTICIPANTS_SCORE);
}

public int updateParticipantScore(TParticipant tParticipant, Long tId)
{
    mUpdateParticipantsScoreStatement.bindDouble(1, tParticipant.getScore());
    mUpdateParticipantsScoreStatement.bindLong(2, tParticipant.getStock().getId());
    mUpdateParticipantsScoreStatement.bindLong(3, tId);
    return mUpdateParticipantsScoreStatement.executeUpdateDelete();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T22:39:18.160

谢谢 Jens - 我改为：

```
mDb.execSQL(queryUpdateParticipantScore); 
```

现在它正在工作，所以我的 SQL 语法基本上是正确的。几天后，当我有时间检查所有代码时，我打算将其更改为使用

```
SQLiteStatement 
```

非常感谢你教会了我一些新东西！D.

# android - 如何创建同时支持手机和平板电脑的应用程序？

> ID：10549625
> 
> 赞同：1
> 
> 时间：2012-05-11T10:25:39.547
> 
> 标签：android

我想创建一个同时支持手机和平板电脑的应用程序。在我使用视图显示的应用程序 ABCD 图像中。我不希望这个应用程序同时在移动设备和平板电脑上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:30:43.357

请阅读以下文档以支持多个屏幕

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://developer.android.com/guide/practices/screen-compat-mode.html](http://developer.android.com/guide/practices/screen-compat-mode.html)

[http://developer.android.com/guide/practices/tablets-and-handsets.html](http://developer.android.com/guide/practices/tablets-and-handsets.html)

来自谷歌文档

> 要禁用此版本的屏幕兼容模式，您只需将 android:minSdkVersion 或 android:targetSdkVersion 设置为“4”或更高，或者将 android:resizeable 设置为“true”。

使用以下添加多屏支持：

您应该在清单文件中包含该元素，如以下链接所示

[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:29:38.553

根据平台操作系统选择您的版本。

对于 android 选择版本 [在移动设备中运行的最低版本]... 然后它也将在 TABLET 中运行。

如果您喜欢我的回答，请单击右键，否则请发布您的困难。

# java - 使用 FlowLayout 时 JTextField 显示为狭缝...请解释

> ID：10549627
> 
> 赞同：5
> 
> 时间：2012-05-11T10:25:43.097
> 
> 标签：java, swing, jtextfield, flowlayout

有人可以向我解释一下，为什么每次我使用 FlowLayout 布局管理器时，我的文本字段都会显示为狭缝。

一段时间以来，我一直在努力解决这个问题，但我似乎无法弄清楚为什么会出错。

我觉得这是一件简单的事情，我一次又一次地忽略了，所以如果有人能向我解释这个现象，我将永远感激不尽。

```
import java.awt.Container;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JTextField;

public class Console
{   
    public Console()
    {
        makeConsole();
    }

    private void makeConsole()
    {
        JFrame console = new JFrame("ArchiveConsole");
        Container base  = console.getContentPane();
        base.setSize(400, 250);
        console.setSize(base.getSize());
        base.setLayout(new FlowLayout(FlowLayout.CENTER, 5,5));

        JTextField tf = new JTextField();
        tf.setSize(base.getWidth(), 25);
        base.add(tf);

        console.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T10:36:39.887

来自 Swing 布局管理器教程

> FlowLayout 类将组件排成一排，按其首选大小调整大小。如果容器中的水平空间太小，无法将所有组件放在一行中，则 FlowLayout 类使用多行。如果容器比一行组件所需的宽，则默认情况下，该行在容器内水平居中

因此，您需要调整文本字段的首选大小，最好使用该`setColumns`方法。

请注意，如果您希望您的文本字段跨越整个宽度，您可能需要使用另一个布局，那么`FlowLayout`出于上面引用的原因

例如，下面的代码看起来不错`JTextField`，但我已经硬编码了列数

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.FlowLayout;

public class TextFieldWithFlowLayout {
  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame console = new JFrame("ArchiveConsole");
        Container base  = console.getContentPane();
        base.setLayout(new FlowLayout( FlowLayout.CENTER, 5,5));

        JTextField tf = new JTextField();
        tf.setColumns( 20 );
        base.add(tf);
        console.pack();
        console.setVisible(true);
      }
    } );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:36:49.607

使用：JTextField tf = new JTextField(25);

而不是： JTextField tf = new JTextField(); tf.setSize(base.getWidth(), 25);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T10:38:26.457

使用 LayoutManagers 时，不要尝试手动设置大小和位置。您与 LayoutManager 的作用相冲突。Layoutmanagers 根据约束和首选/最小/最大尺寸大小和位置组件。大多数 Swing 组件会自动处理该问题，因此您通常不应强制使用它们的首选大小。

至于您的 JTextField，由于它不包含任何文本，因此它的首选大小几乎为零。使用[setColumns](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#setColumns%28int%29)来指示一个 preferredSize 或调用[setPreferredSize](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-23T02:52:14.930

谢谢！

JTextField 函数中使用的参数很重要！

```
JPanel panel_buttons = new JPanel(new FlowLayout(FlowLayout.LEFT));
panel_buttons.add(...);
...
panel_buttons.add(...);
JTextField txt_search = new JTextField(20);
panel_buttons.add(txt_search); 
```

如果将 20 更改为 30 或更大，可能是你找不到它。可能是 txt_search 在下一行。

# android - 网络超时异常

> ID：10549628
> 
> 赞同：1
> 
> 时间：2012-05-11T10:25:58.790
> 
> 标签：android, sockets, connection, arduino, timed

我有一个 Android 应用程序，它连接到 Arduino 服务器并在按下按钮时向其发送套接字，但只要我按下按钮，它就会等待一会儿，然后抛出“连接超时”。我知道 Arduino 的工作原理；我在浏览器上试了一下，没问题。为什么我的应用程序无法访问它？

安卓代码：

```
Button.OnClickListener buttonConnectOnClickListener = new Button.OnClickListener() {
    public void onClick(View v) {
        Log.i(Tag,"connecting to Server");
        try {
            Log.i(Tag,"Enters try");
            socket = new Socket("161.53.168.112", 8888);
            Log.i(Tag,"stvorio socket");
            dataOutputStream = new DataOutputStream(socket.getOutputStream());//and stream

            Log.i(Tag,"Writing 1 on socket.");
            dataOutputStream.writeBytes("1");
        }
        catch (UnknownHostException e) {
            Log.i(Tag,e.toString());
        }
        catch (IOException e) {
            Log.i(Tag,e.toString());
        }
        catch (Exception e) {
            Log.e(Tag, e.toString()); 
```

这是 Arduino 中使用的代码。这很简单，所以我不明白出了什么问题。我使用了很多日志，因为我想看看错误在哪里。我使用我的 Arduino 作为服务器并在其上发布一些内容。如果我在网络浏览器中输入 161.53.168.112:8888，它会找到它并可以发送请求，但我的 Android 手机什么也得不到，即使使用浏览器而不是应用程序也是如此。我无法访问我的服务器。我是否可能缺少服务器或 Android 上的某些权限？

```
byte mac[] = { 0x90, 0xA2, 0xDA, 0x00, 0x36, 0xFF };
byte ip[] = { 161, 53, 168, 114 };
int serverPort = 8888;

#define kitchenLight = 9;

Server server(serverPort);

void setup()
{
    Serial.begin(9600);
    Ethernet.begin(mac, ip, gateway, subnet);
    pinMode(kitchenLight,OUTPUT);
    server.begin();
}

void loop()
{
    Client client = server.available();
    if(client)
    {
        while(client.connected()) {
            if(client.available()) {
                char c = client.read();
                appMessage += c;
                if (c == '\n')
                {
                    Serial.println("Message from Client: "+appMessage);

                    if(appMessage.IndexOf("kitchenLight1") != -1)
                    {
                        digitalWrite(kitchenLight,HIGH);
                    }
                }
            }
        }
    }
    client.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:06:43.800

在 Arduino 和 Android 之间建立连接后，您应该添加延迟，例如一两秒（更可能是两秒），因为 Arduino 需要这段时间才能准备好接收命令。希望这可以帮助 ：）

# python - 如何在 Python Mayavi 中画一条线？

> ID：10549634
> 
> 赞同：8
> 
> 时间：2012-05-11T10:26:23.743
> 
> 标签：python, plot, line, draw, mayavi

如何在 Python Mayavi 中在 3D 空间中画一条线？MLAB 模块中是否有一个函数允许我指定将要绘制的线的起点和终点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-16T09:10:23.637

绘制线条时可以使用的一项重要功能是将它们表示为管。下面的例子我用来绘制 X、Y、Z 轴和 3D 图形（请注意，在我的例子中尺寸很大，因此您可能需要调整它们）：

```
import mayavi.mlab as mlab

black = (0,0,0)
white = (1,1,1)
mlab.figure(bgcolor=white)
mlab.plot3d([0, 1000], [0, 0], [0, 0], color=black, tube_radius=10.)
mlab.plot3d([0, 0], [0, 1500], [0, 0], color=black, tube_radius=10.)
mlab.plot3d([0, 0], [0, 0], [0, 1500], color=black, tube_radius=10.)
mlab.text3d(1050, -50, +50, 'X', color=black, scale=100.)
mlab.text3d(0, 1550, +50, 'Y', color=black, scale=100.)
mlab.text3d(0, -50, 1550, 'Z', color=black, scale=100.) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T20:34:16.177

检查 mayavi 的文档；3d 绘图在教程中并[在此处](http://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#mayavi.mlab.plot3d)记录。`mlab`它是,的一部分`mayavi.mlab.plot3d(*args, **kwargs)`。

语法是

```
plot3d(x, y, z, ...) 
```

# c# - 如何为 DbContext 设置 CommandTimeout？

> ID：10549640
> 
> 赞同：73
> 
> 时间：2012-05-11T10:26:37.403
> 
> 标签：c#, entity-framework-4, dbcontext, command-timeout

我正在寻找一种为 DbContext 设置 CommandTimeout 的方法。搜索后，我通过将 DbContext 转换为 ObjectContext 并为 objectContext 的 CommandTimeout 属性设置值找到了方法。

```
var objectContext = (this.DbContext as IObjectContextAdapter).ObjectContext; 
```

但我必须使用 DbContext。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-05-11T10:30:59.343

它将与您的方法一起使用。

或将其子类化（来自[msdn 论坛](http://social.msdn.microsoft.com/Forums/en-ZA/adodotnetentityframework/thread/6fe91a64-0208-4ab8-8667-d061af340994)）

```
public class YourContext : DbContext
{
  public YourContext()
    : base("YourConnectionString")
  {
    // Get the ObjectContext related to this DbContext
    var objectContext = (this as IObjectContextAdapter).ObjectContext;

    // Sets the command timeout for all the commands
    objectContext.CommandTimeout = 120;
  }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-03-25T16:17:29.960

```
var ctx = new DbContext();
ctx.Database.CommandTimeout = 120; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-11T10:34:21.430

这可能会对您有所帮助。

```
public class MyContext : DbContext
{    
    public MyContext () : base(ContextHelper.CreateConnection("my connection string"), true)
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 300;
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-09T14:58:16.657

我发现更改 .tt 文件对我有用，因为我以后不会丢失更改：

添加这一行：

```
((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 300; 
```

在 DbContext 创建者之后和 !loader.IsLazy 构造之前：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext
{
    public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 300;
<#
if (!loader.IsLazyLoadingEnabled(container)) 
```

然后它应该出现在您生成的 Context.cs 中：

```
public MyEntities()
            : base("name=MyEntities")
        {
            ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 300;
        } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-05T15:26:50.730

以下是我在使用 EDMX 文件时解决此问题的方法。此解决方案更改默认 T4 模板以使生成的类继承自自定义 DbContext 类，该类指定默认命令超时和更改它的属性。

我正在使用 Visual Studio 2012 和 EF 5.0。您的体验可能与其他版本不同。

## 创建自定义 DbContext 类

```
public class CustomDbContext : DbContext
{
    ObjectContext _objectContext;

    public CustomDbContext( string nameOrConnectionString )
        : base( nameOrConnectionString )
    {
        var adapter = (( IObjectContextAdapter) this);

        _objectContext = adapter.ObjectContext;

        if ( _objectContext == null )
        {
            throw new Exception( "ObjectContext is null." );    
        }

        _objectContext.CommandTimeout = Settings.Default.DefaultCommandTimeoutSeconds;
    }

    public int? CommandTimeout
    {
        get
        {
            return _objectContext.CommandTimeout;
        }
        set
        {
            _objectContext.CommandTimeout = value;
        }
    }
} 
```

这有一个可选功能：我没有硬编码默认命令超时。相反，我从项目设置中加载它，以便我可以更改配置文件中的值。如何设置和使用项目设置不在此答案的范围内。

我也没有硬编码连接字符串或连接字符串名称。它已经由生成的上下文类传递给构造函数，因此在这里对其进行硬编码是没有意义的。这不是什么新鲜事。EDMX 文件已经为您生成了以下构造函数，所以我们只是传递值。

```
public MyEntities()
    : base("name=MyEntities")
{
} 
```

（这指示 EF 从配置文件中加载名为“MyEntities”的连接字符串。）

`ObjectContext`如果它为空，我将抛出一个自定义异常。我认为它永远不会，但它比获得一个更有意义`NullReferenceException`。

我将 存储`ObjectContext`在一个字段中，以便我可以创建一个属性来访问它以覆盖默认值。

## 修改实体上下文 T4 模板

在解决方案资源管理器中，展开 EDMX 文件以查看 T4 模板。他们有一个 .tt 扩展名。

双击“MyModel.Context.tt”文件将其打开。在第 57 行附近，您应该看到：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext 
```

此模板行生成继承 DbContext 的“MyEntities”类的类定义。

更改该行，以便生成的类继承 CustomDbContext，而不是：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : CustomDbContext 
```

保存此文件后，它应立即重新生成该类。如果没有，您可以右键单击 EDMX 文件并选择“运行自定义工具”。如果您在 EDMX 文件下展开“MyModel.Context.tt”文件，您将看到“MyModel.Context.cs”。这就是生成的文件。打开它，你应该会看到它现在继承了`CustomDbContext`.

```
public partial class MyEntities : CustomDbContext 
```

这里的所有都是它的。

## 问题

将上下文类从 更改为`DbContext`后`CustomDbContext`，如果您尝试使用“具有读/写操作和视图的控制器，使用实体框架”模板添加新的 MVC 控制器类，Visual Studio 会给您一个错误。它会说“不支持的上下文类型。”。要解决此问题，请打开生成的“MyModel.Context.cs”类，并将其继承的类型临时更改回`DbContext`. 添加新控制器后，您可以将其更改回`CustomDbContext`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-29T17:20:46.067

我喜欢扩展方法：

```
public static class DbContextExtensions
{
   public static void SetCommandTimeout(this ObjectContext dbContext,
       int TimeOut)
   {
       dbContext.CommandTimeout = TimeOut;
   }
} 
```

然后简单地

```
((IObjectContextAdapter)cx).ObjectContext.SetCommandTimeout(300); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-26T10:27:57.190

如果有帮助，这是 VB.Net 解决方案：

```
Dim objectContext As Objects.ObjectContext = CType(Me,IObjectContextAdapter).ObjectContext
objectContext.commandTimeout = connectionTimeout 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-25T20:45:15.013

这类似于上面@Glazed 使用的方法，但我的方法也是使用自定义 DbContext 类，但我正在做相反的事情。我实际上没有修改 T4 模板（.edmx 下的.tt 文件），而是从生成的 MyEntities 类继承，而不是像这样：

T4 模板生成的 MyEntities 类：

```
public partial class MyEntities : DbContext
{
    public MyEntities()
        : base("name=MyConnectionStringName")
    {
    }
...
} 
```

然后创建一个新的自定义类作为 MyEntities 的包装器，如下所示：

```
public class MyEntitiesContainer : MyEntities
{
    private static readonly int _DEFAULT_TIMEOUT = 100;
    public MyEntitiesContainer()
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = _DEFAULT_TIMEOUT;
    }

    //Use this method to temporarily override the default timeout
    public void SetCommandTimeout(int commandTimeout)
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = commandTimeout;
    }

    //Use this method to reset the timeout back to default
    public void ResetCommandTimeout()
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = _COMMAND_TIMEOUT;
    }
} 
```

在您的代码中，实例化 Container 类，如果您需要为特定命令使用自定义超时，请使用提供的方法手动设置它。

```
using (var db = new MyEntitiesContainer()) {
    db.SetCommandTimeout(300);
    db.DoSomeLongCommand();
    db.ResetCommandTimeout();
    db.DoShorterCommand1();
    db.DoShorterCommand2();
    ...
} 
```

这种方法的好处是您还可以为您的 Container 类创建一个接口并使用具有依赖注入的接口实例，然后您可以在单元测试中模拟您的数据库，此外还可以更轻松地控制命令超时和其他您可以为其创建方法的对象上下文的属性（例如延迟加载等）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-12T09:20:50.160

我来这里是为了寻找一个为单个命令设置超时而不是这样的全局设置的示例。

我认为它可能会帮助某人举例说明我是如何实现这一目标的：

```
var sqlCmd = new SqlCommand(sql, context.Database.Connection as SqlConnection);
sqlCmd.Parameters.Add(idParam);
sqlCmd.CommandTimeout = 90;

if (sqlCmd.Connection.State == System.Data.ConnectionState.Closed)
{
    sqlCmd.Connection.Open();
}
sqlCmd.ExecuteNonQuery();
sqlCmd.Connection.Close(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-02T11:30:34.580

@PerryTribolet 的答案对于 EF6 来说看起来不错，但它确实适用于 EF5。对于 EF，这是一种方法：创建一个 ObjectContext，在其上设置 CommandTimeout，然后从 ObjectContext 创建一个 DBContext。我将标志设置为将两个对象一起处理。这是 VB.NET 中的一个示例：

```
 Dim context As New ObjectContext("name=Our_Entities")
        Dim dbcontext As New System.Data.Entity.DbContext(context, True)

        With context
            .CommandTimeout = 300 'DBCommandTimeout
        End With 
```

当然，您不必使用“With”。

# c# - DropDownList - 在编辑表单中显示的选定值

> ID：10549641
> 
> 赞同：1
> 
> 时间：2012-05-11T10:26:43.220
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, drop-down-menu

我有带有编辑表单的 MVC3 网站。在此表单上，有一个 DropDownList 显示可以选择的值列表。我希望将其设置为先前选择的值（在创建表单上）。该值在 Model.Status 中。我认为这段代码可以工作：

```
 @Html.DropDownList("Status",
           new SelectList(ViewBag.Status as System.Collections.IEnumerable, "Id", "Status", Model.Status)) 
```

但是 DropDownList 始终设置在列表中的第一个值上。我已经检查过 - 正确的值在`Model.Status`. 的值`Model.Status`是列表中状态的 id。`ViewBag.Status`是一个带有 id 和字符串描述的列表 - 状态。

如何让它显示正确的价值？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:47:16.963

你检查过[这个错误吗](http://aspnet.codeplex.com/workitem/4932)

避免使用`DropDownList`和的相同名称`SelectList`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:06:21.917

```
@Html.DropDownListFor(x=>x.SelectedItemId,
                     new SelectList(ViewBag.Status as System.Collections.IEnumerable,"Id",
                     "Status"),"Select Item") 
```

但是如果我正在编写这段代码，我会摆脱`ViewBag`并改变它以使用另一个强类型对象

```
public class YourMainViewModel
{
  public int ID { set;get;}

  public int SelectedItemId { set;get;}
  public IEnumerable<Item> Items();
  //other properties
}

public class Item
{
  public int Id { set;get;}
  public string Status { set;get;}
} 
```

我现在不用发送集合，而是`Viewbag`使用我的新模型属性

```
public ActionResult EditUser(int id)
{
  var user=myRepositary.GetUser(id);
  user.Items=myRepositary.GetAllItems();
  user.SelectedItemId=5; // replace with the value from your database here,
} 
```

现在在我的强类型视图中`YourMainViewModel`，我会写这个

```
@Html.DropDownListFor(x=>x.SelectedItemId,
                     new SelectList(Model.Items,"Id",
                     "Status"),"Select Item") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:30:46.840

下面是一些示例代码，您可以在场景中修改和使用它们。我有一个编辑视图，在此视图上是下拉列表中的银行列表，并且与此应用程序关联的银行已在列表中预先选择。

我的观点：

```
@model MyProject.ViewModels.MyViewModel 
```

我的银行下拉菜单：

```
<td><b>Bank:</b></td>
<td>
     @Html.DropDownListFor(
          x => x.BankId,
          new SelectList(Model.Banks, "Id", "Name", Model.BankId),
          "-- Select --"
     )
     @Html.ValidationMessageFor(x => x.BankId)
</td> 
```

我的视图模型：

```
public class MyViewModel
{
     // Partial class

     public int BankId { get; set; }
     public IEnumerable<Bank> Banks { get; set; }
} 
```

我的编辑操作方法：

```
public ActionResult Edit(int id)
{
     // Get the required application
     GrantApplication application = grantApplicationService.FindById(id);

     // Mapping
     MyViewModel viewModel = (MyViewModel)
          grantApplicationMapper.Map(
          application,
          typeof(GrantApplication),
          typeof(MyViewModel)
     );

     // BankId comes from my table.  This is the unique identifier for the bank that was selected when the application was added

     // Get all the banks
     viewModel.Banks = bankService.FindAll().Where(x => x.IsActive);

     return View(viewModel);
} 
```

我的银行班：

```
public class Bank
{
     public int Id { get; set; }
     public string Name { get; set; }
     public bool IsActive { get; set; }
} 
```

这样做会在表单加载后在您的下拉列表中有一个选定的值。

我希望这有帮助 ：）

# iis - 使用 Powershell 为 IIS 虚拟目录设置“允许客户端上传文件”

> ID：10549642
> 
> 赞同：2
> 
> 时间：2012-05-11T10:26:52.183
> 
> 标签：iis, powershell, powershell-2.0, virtual-directory

我正在使用 PowerShell 自动设置 Web 服务器，我需要创建一个虚拟目录，我可以使用以下代码执行此操作

```
New-Item 'IIS:\Sites\Default Web Site\folder' -type VirtualDirectory -physicalPath $folder 
```

我还需要设置这个虚拟目录，以便它允许客户端上传文件，这可以通过打开 BITS 上传功能并选中“允许客户端上传文件”复选框手动完成。

有没有办法使用 PowerShell 进行设置？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:40:35.343

以下示例显示如何使用 PowerShell 为 BITS 上载启用 IIS 虚拟目录。它使用 System.DirectoryServices 设置虚拟目录，它处理 IIS 6 类，如果安装了 IIS 6 管理兼容性功能，它也适用于 IIS 7（请参阅[使用 System.DirectoryServices 创建站点和虚拟目录](http://msdn.microsoft.com/en-us/library/ms524896)）。

```
$root = new-object system.directoryservices.directoryentry("IIS://127.0.0.1/W3SVC/1/Root/folder")
$root.EnableBITSUploads()
#$root.BITSUploadEnabled = $true
#$root.setinfo() 
```

# c# - 如何从自定义 ASP.Net 服务器提供非 aspx 文件

> ID：10549644
> 
> 赞同：3
> 
> 时间：2012-05-11T10:26:55.310
> 
> 标签：c#, asp.net, .net

我在 WinForms 应用程序中有一个自定义的 ASP.Net 服务器。服务器是使用**CreateApplicationHost**和一个简单的**HttpWorkerRequest**实现创建的。

我发现自定义服务器只处理对 aspx 文件的请求。**如果我尝试从浏览器访问 xml / txt / png 文件，它会给出“找不到资源”。错误。**

我的问题是：必须做什么才能提供此类文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:26:53.513

答案是必须重写**HttpWorkerRequest.SendResponseFromFile方法才能通过响应流发送文件。**

# jquery - Jqplot：动态获取标签和x轴刻度

> ID：10549645
> 
> 赞同：2
> 
> 时间：2012-05-11T10:26:56.810
> 
> 标签：jquery, grails, jqplot

我正在使用 grails 上的 groovy 开发 jqplot。我将数据作为列表传递，我想填充标签和 x 轴刻度。对于一个标签，它工作正常，但我该如何迭代？

```
 series:[ 
                {label:'${labelList[0]}'},
                {label:'aaa'},
                {label:'bbb'},
                {label:'ccc'},
                {label:'ddd'}
            ], 
```

我没有使用 Json 对象。因此，对于上述问题的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:39:24.770

如果我猜对了，您希望能够在代码中设置随机数量的标签，对吗？您可以使用`JavaScript`构建数组系列并将其设置为图形系列。

```
var labelList = ["Label1", "L2", "Oi", "Bro"];
var series = [];

for(var i = 0; i < labelList.length; i++){
    var label = labelList[i];
    console.log("label = "+label);
    series.push({label:label});
}
for(var i = 0; i < series.length ; i++)
    console.log("series[i] = "+series[i].label); 
```

[这是工作代码示例。](http://jsfiddle.net/eDek4/)

然后在你的图表中：

```
$.jqplot('chart', [data], {
   series: series
}); 
```

# javascript - JavaScript - 拆分，在给定数字后选择所有

> ID：10549649
> 
> 赞同：1
> 
> 时间：2012-05-11T10:27:12.063
> 
> 标签：javascript, string, include, split

我有一个动态数组，我想排除字符串的第一部分，但我不知道第一部分之后会有多少对象，我想将它们全部包含在一个新字符串中。

```
string = "text.'''hi''','''who''' '''are''' '''you'''. I'm ken and you're barbie"

x = string.split("'''")[1] 
```

我可以做些什么来将它们都包括在内吗？像 [1..?]

我有 JQuery 但不认为这是必要的，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:30:17.677

`shift`：

> 从数组中删除第一个元素并返回该元素。此方法更改数组的长度。

**代码：**

```
x = theString.split("'''");
var firstElement = x.shift();
// Now x is the shifted array.
x[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:30:05.037

你似乎想要：

```
x = string.split("'''").slice(1); 
```

这将返回从索引 1 开始的数组的所有元素。

# android - List Click 上的新活动

> ID：10549650
> 
> 赞同：0
> 
> 时间：2012-05-11T10:27:15.607
> 
> 标签：android, android-intent, android-activity

我创建了一个列表。现在，当我单击列表项时，我想运行一个 Java 类，它是另一个名称列表。

这是我的代码：

```
public class SecondAct extends ListActivity {
   private String[] items = { "Pending Retailers", "Ordered Retailers",
         "No Order Retailers", "Today's Plan", "Messages", "Daily Sales",
         "Pending Invoices", "Day Close", "Tools and Updates", "Exit" };

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, items);
      // Get the activity's ListView and set its choice mode as multiple choice
      getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
      setListAdapter(adapter);
   }

   protected void onListItemClick(ListView l, View v, int position, long id) {
      // TODO Auto-generated method stub

      super.onListItemClick(l, v, position, id);
      String selectionValue = "";
      selectionValue = (String) getListView().getItemAtPosition(position);

      Log.i("List Selection Value: ",
            (String) getListView().getItemAtPosition(position));

      if (selectionValue.equalsIgnoreCase("Pending Retailers")) {

         Intent intent = new Intent("my.com.npi.List");
         startActivity(intent);
         AlertDialog alertDialog = new AlertDialog.Builder(SecondAct.this)
               .create();
         alertDialog.setTitle("Pending Retailers Selected");

         alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

               // here we i add functions

            }
         });

         // alertDialog.setIcon(R.drawable.icon);
         alertDialog.show();
      }

      else if (selectionValue.equalsIgnoreCase("Exit")) {
         finish();
      }
   }
} 
```

现在，当我单击第一项时，应用程序被强制关闭。我使用意图开始新活动，但它不起作用。无望的卡住了！请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:03:35.497

首先将 Manifest 中的新活动注册为

在清单中的应用程序标记之前声明包，如

```
<package name="my.com.npi">

<activity android:name = ".List" /> 
```

然后在 Intent 中给出正确正确的类名称。不要像 my.com.npi 一样使用，只需导入那些包，将纯名称作为 List.class

```
Intent intent = new Intent(this,List.class);
         startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:35:54.103

如果您在自己的应用程序中有活动，则使用：

```
Intent electIntent = new Intent();
electIntent.setClass(SecondAct.this, List.class);
startActivity(electIntent); 
```

并在 AndroidManifest

```
<activity
   android:name = ".List" /> 
```

使用此意图从您的应用程序中启动另一个应用程序活动：

```
Intent intent25 = new Intent(Intent.ACTION_MAIN).addCategory(
Intent.CATEGORY_LAUNCHER).setClassName("APP_PACKAGE_NAME",
"APP_PACKAGE_NAME.TestActivity").addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
.addFlags(Intent.FLAG_FROM_BACKGROUND).setComponent(new ComponentName("APP_PACKAGE_NAME",
"APP_PACKAGE_NAME.TestActivity"));
getApplicationContext().startActivity(intent25); 
```

# php - 脚本 src 属性有时在 .php 文件中不起作用

> ID：10549653
> 
> 赞同：0
> 
> 时间：2012-05-11T10:27:33.703
> 
> 标签：php, javascript, html, dom, syntax

我在一个php文件中这样写（例如：a.php）

```
<script src="scripts/a.js"></script>
<div>
 .....
</div> 
```

我可以保证js文件的路径是正确的，因为我可以在firebug HTML-view中看到js内容。但是，在脚本视图中没有 a.js。好像是在html中添加了a.js但是加载不出来，但是其他一些js文件可以识别。如果我将 js 内容直接粘贴到 DOM 中，它就可以工作。

我想知道什么时候不工作，为什么？非常感谢~

* * *

**答：我的 js 文件中有一些严重的语法错误。错误可能太严重，浏览器无法识别...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:29:42.320

我不能给你一个肯定的答案，因为细节很少，但你应该使用 JavaScript 的绝对路径。

```
<script src="/scripts/a.js"></script> 
```

# c# - RenderTarget2D 将所有 alpha 紫色着色

> ID：10549654
> 
> 赞同：1
> 
> 时间：2012-05-11T10:27:35.380
> 
> 标签：c#, xna, spritebatch, rendertarget

所以，我正在尝试将我的游戏玩法渲染到 XNA 中的 RenderTarget2D，这样我就可以将着色器应用到场景中。它在某种程度上是有效的，但任何以 255 以外的 alpha 级别绘制的东西似乎都被染成了紫色。alpha 效果有效，但也有紫色色调。我试图四处寻找解决方案，我似乎唯一能找到的要么是全屏呈现紫色，要么是 alpha 被紫色替换。

我的问题不完全是那些......

![染紫！](../Images/cfe39b8fb7248a9c0dae75245b05dd10.png)

这是我抛出的一个场景，向你展示发生了什么。如您所见，alpha 效果正在工作，但对象被染成紫色。

这是我发布渲染代码的部分：

```
gameTarget = new RenderTarget2D(GraphicsDevice, (int)screenSize.X, (int)screenSize.Y, 1, SurfaceFormat.Color, RenderTargetUsage.PreserveContents);

gameDepthBuffer = new DepthStencilBuffer(GraphicsDevice, (int)screenSize.X, (int)screenSize.Y, GraphicsDevice.DepthStencilBuffer.Format); 
```

这是我正在使用的初始化。

```
GraphicsDevice g = GraphicsDevice;
DepthStencilBuffer d = g.DepthStencilBuffer;
g.SetRenderTarget(0, gameTarget);
g.DepthStencilBuffer = gameDepthBuffer;
g.Clear(Color.Black);
GameBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Immediate, SaveStateMode.SaveState);
        level.Draw(GameBatch);

GameBatch.End();
g.SetRenderTarget(0, null);
g.DepthStencilBuffer = d;
GameBatch.Begin(SpriteBlendMode.AlphaBlend, SpriteSortMode.Immediate, SaveStateMode.SaveState);
        if (renderEffect != null)
        {
            renderEffect.Begin();
            renderEffect.CurrentTechnique.Passes[0].Begin();
        }
        Sprite.Draw(GameBatch, gameTarget.GetTexture(), new Rectangle(0, 0, (int)assumedSize.X, (int)assumedSize.Y), Color.White);
        if (renderEffect != null)
        {
            renderEffect.CurrentTechnique.Passes[0].End();
            renderEffect.End();
        }
        GameBatch.End(); 
```

renderEffect 是效果文件，Sprite 是处理相对于假定屏幕尺寸的绘图（以应对不同的分辨率）的类。

我在 XNA 3.1 中工作。我知道我现在应该使用 4.0，但我不是因为我有 3.1 的书，这在某些情况下很有帮助。

无论如何，这里的一些帮助将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:55:58.630

通常紫色是 RenderTarget 被清除的默认颜色。

考虑到这一点，我发现在将渲染目标设置为`null`. 所以你的代码应该是这样的：

```
g.SetRenderTarget(0, null);
g.Clear(Color.Transparent);//or black 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T01:22:18.987

固定的！我需要设置一些 alpha 参数：

```
GraphicsDevice.RenderState.SeparateAlphaBlendEnabled = true;
GraphicsDevice.RenderState.AlphaDestinationBlend = Blend.One;
GraphicsDevice.RenderState.AlphaSourceBlend = Blend.SourceAlpha;
GraphicsDevice.RenderState.SourceBlend = Blend.SourceAlpha;
GraphicsDevice.RenderState.DestinationBlend = Blend.InverseSourceAlpha; 
```

# android - 如何在下载完成前显示 PDF 的第一页

> ID：10549659
> 
> 赞同：0
> 
> 时间：2012-05-11T10:27:54.980
> 
> 标签：android, pdf

> **可能重复：**
> [如何在使用 android 中的 Pdf 阅读器应用程序下载时缓冲正在下载的 pdf 并显示它](https://stackoverflow.com/questions/8415450/how-to-buffer-pdf-which-is-downloading-and-display-it-while-dowloading-using-pdf)

我正在从服务器下载 PDF 文件并想在 android 中显示它。

但我的问题是 pdf 有很多页面，那么如何在下载完成之前显示它。

我的意思是说我想下载它并显示第一页。当用户要阅读第一页时，其他左侧页面应该在后台下载。

# actionscript-3 - 需要动态加载字体而不在 as3 中嵌入字体

> ID：10549661
> 
> 赞同：-2
> 
> 时间：2012-05-11T10:27:57.677
> 
> 标签：actionscript-3, flash

我正在开发一个项目，我们使用 Flash 加载图像，而用户查看图像时，我们正在显示图像的平铺标签。这些标题标签使用各种字体，如 Comic sans、Georgia、verdana 等。默认情况下，标签以 Arial 字体显示。我们需要根据用户选择的字体使字体动态加载。字体应动态使用而不嵌入

我们不想被 CSS 使用。

请帮助我并找到解决方案

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:31:55.333

谷歌停止工作了吗？

第一个结果之一： http: [//www.leebrimelow.com/?p=807](http://www.leebrimelow.com/?p=807)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:56:12.453

认真地你需要学习所以搜索东西......当你创建一个问题时，会有几十个类似的问题弹出给你。

[在 as3 中嵌入字体的替代方法](https://stackoverflow.com/questions/6735556/alternative-to-embedding-a-font-in-as3/6735870#6735870)

# version-control - Sitefinity 开发环境和源代码控制

> ID：10549663
> 
> 赞同：4
> 
> 时间：2012-05-11T10:28:23.530
> 
> 标签：version-control, content-management-system, telerik, sitefinity

在购买 sitefinity 5.0 许可证之前，我们需要解决一些查询。如果能得到这些问题的答案，我将不胜感激

1.  在源代码管理中设置 sitefinity 项目的推荐指南是什么？如果项目有 4 到 5 个开发人员，那么设置初始代码库的起点应该是什么？每个开发人员都必须在他们的开发盒上创建 sitefinity 网站和数据库吗？
2.  是否建议为 sitefinity 网站设置一个公共数据库，所有开发机器都将连接到该网站进行开发，如果不是，替代方法是什么？
3.  除了从 Visual Studio 中发布之外，是否有任何与构建和发布 sitefinity Web 应用程序相关的在线文档？

谢谢高拉夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T19:28:17.040

自版本 2 以来，我们一直在使用 Sitefinity 进行开发，并与多个开发人员合作。

具体回答您的问题：

1.  让一个开发人员（最好是您的首席开发人员）在他们的本地计算机上创建一个干净的 sitefinity Visual Studio 解决方案。将其检入您的源代码控制存储库，并让每个其他开发人员从那里下载一个副本。你们现在都同步了。

2.  在数据库位置方面，有两种方法可行——或者让每个人运行一个本地数据库，然后在 web.config 中将连接字符串位置设置为`.`（即本地）。这样一来，没有人需要检查 web.config 来运行它。否则为数据库使用一个通用的开发/测试服务器。我们发现最简单的方法是每个人都有一个本地数据库，除非多个开发人员同时一起处理非常具体的任务。

3.  我还没有看到任何与在 Visual Studio 之外构建相关的在线文档。如果您有 TFS 或 MS 构建服务器，它也应该可以正常工作。

一般来说，Sitefinity 的架构并没有什么“特别”之处，可以将其与任何其他 .NET / MSSQL 解决方案区分开来。属于这些技术的最佳实践仍然适用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T16:41:36.783

我在源代码管理方面的经验是两种选择之一。如果您使用 SQLExpress 用户实例数据库（即 App_Data 文件夹中的 mdf），我发现除此数据库文件和配置文件夹中的 dataconfig.config 文件之外的所有内容都进行版本控制，这将允许每个开发人员运行他们自己的网站副本.

从那里您可以对数据库进行某种手动合并，也可以创建一个新的用于部署。

如果您的开发人员只是在开发功能，而不需要在实际网站上工作，修改必须保持同步的内容，则此选项最有效。

或者，如果他们确实需要使用实时内容并且所有内容都必须相同，请在他们都有权访问的共享服务器中创建数据库，并对所有内容进行版本控制（因为两者的连接字符串应该相同）。

如果您的开发人员正在努力支持现有内容，而不是说创建操作数据库的模块（创建表、列等），那么这种方法效果最好，因为请记住，使用这种方法，每个人都将访问和修改同一个数据库。

就个人而言，我更喜欢选项 1，因为它允许每个开发人员完全控制他们的环境。然后可以将源合并并隐藏到临时服务器，以便主站点内容仅受这一实例的影响。

我希望这是有帮助的！

# php - 会话结束后 ExtJS 4 从 ExtJS 注销

> ID：10549666
> 
> 赞同：0
> 
> 时间：2012-05-11T10:28:38.350
> 
> 标签：php, extjs

我的后端使用 CodeIgniter，前端使用 ExtJS 4.1。在 CI 的控制器中，我检查用户会话是否结束，如果是，我执行

> 重定向（“登录”）；

然而实际发生的是 - 我停止从服务器获取响应，但我的 ExtJS 仍在工作，我没有得到登录页面。当我在服务器端看到会话结束时，如何从 ExtJS 重定向？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:29:13.480

```
var runner = new Ext.util.TaskRunner();

// poll some page every 10 seconds
var task = runner.start({
    run: function() {
        Ext.Ajax.request({
            url: 'is_logged_out.php',

            success: function(response){
                var json = Ext.JSON.decode(response.responseText);

                // is we are logged out then redirect somewhere
                if (json.isLoggedOut) {
                    task.destroy();
                    location.href = json.redirectToPage;
                }
            }
        })
    },
    interval: 10000
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:33:57.007

您还可以添加特殊逻辑来处理 403 错误（假设您的 ExtJs 会话在后端已过期，但客户端仍然打开页面 - 下一个请求应该返回`Not Authorized`消息）。

查看单例类`Ext.Ajax`以了解如何订阅全局 Ajax 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:31:09.810

当用户的会话结束时，通常由用户自己通过执行某种行为来完成：例如，用户按下注销按钮。嗯，那个时候，客户端（ExtJS）应该是转发一个AJAX请求给服务器的，如下：

```
Ext.Ajax.request ({
  url: serverUrl + 'logout' ,
  success: function (response) {
    location.href = serverUrl + 'login';
  } ,
  failure: function (response) {
    // Something here to handle the failure
  }
}); 
```

当用户注销时，服务器会到达该请求：您的 CI 应用程序将通过会话并使用“200 OK HTTP/1.1”响应客户端，并且客户端提供将用户重定向到登录页面。

再见。

威尔克

# windows-server-2008 - 在不登录的情况下列出 Windows Server 2008 Enterprise 本地用户帐户

> ID：10549667
> 
> 赞同：0
> 
> 时间：2012-05-11T10:28:38.747
> 
> 标签：windows-server-2008, user-accounts

我在服务器上安装了 Windows Server 2008 Enterprise，但我不记得本地用户帐户或密码，因此无法登录服务器。（此服务器有一段时间未使用）。无论如何，我可以在不登录的情况下列出本地用户帐户名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:33:12.610

您可以使用 ERD Commander 之类的工具，但我不确定它是否适用于 W2K8

# php - 在 ajax 函数的同时处理 ajax 函数

> ID：10549668
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:28:41.033
> 
> 标签：php, ajax, apache, jquery

我有一个发送 X 邮件的 PHP 进程 每次发送邮件后，我在数据库中添加一行以告知已发送邮件。

所以，我不想创建一个进度条来告诉用户 X 邮件是在 Y 上发送的（ Y = 总数）

我有两个这样的 jquery 函数：

```
function mail_send()
{
    var refreshIntervalId;
    $('.loading').css('display','block');
    $.ajax({
        'url': '/an/url/', 
        'data': {
                    someParam: param
                },
        'beforeSend':function()
                    {
                        $('#loadingBg').append('<span id="count"></span>');
                        refreshIntervalId =setInterval(function () {
                            mail_updateProgress(id);
                        }, 500);
                    }

        , 
        'success':  function (data,textStatus)
                    {
                       (....)
                       clearInterval(refreshIntervalId);
                       javascript: console.log(' send finish !!!');
                    }
    });
}

function mail_updateProgress(id) {
    javascript: console.log('updatePG');
    $.ajax({
        'url': '/an/url/', 
            'data': {
                        someParam: param
                    },
        'success':  function (data) {
                        var res = $.parseJSON(data);
                        javascript: console.log('  => data received ' + res.nbSended);
                        $('#count').html(res.nbSended + '/' + res.total);
                    }
    });
} 
```

$.ajax 有队列吗？我正在登录 3 件事：第一：当进程进入 updateProgress 函数时第二：当 updateProgress ajax 成功时第三：当 mail_send() ajax 成功时

日志的顺序是：

*   updatePG => 100 次（我已经在我的 php 代码中进行了睡眠测试）
*   发送完成！！！=> 1次
*   => 收到数据 11 => X 次（我发送了 11 封邮件）

所以对我来说，它告诉我有一个 ajax 调用队列。但是我怎样才能执行我的进度条呢？

**编辑：** 这可能是一个 php 配置问题，

有人可以告诉我如何允许来自同一进程的多连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:34:05.650

您可能会遇到这样的问题，即 Web 浏览器旨在为任何域运行不超过 2 个并发 Web 请求。您正在尝试使用此功能填充这两个插槽。在不知道有关您正在构建的应用程序的更多信息的情况下，具体来说，这就是我现在所能猜测的全部内容。

我认为，更好的方法是考虑终止您的邮件发送请求的客户端连接，并在客户端终止之后继续该过程。这将为您的浏览器释放一个 http 请求槽，并且应该允许您的 mailProgress ajax 函数继续按写入运行，而不必担心队列等问题。

这是关于忽略客户端终止的另一个 Stack Overflow 问题：[PHP 脚本可以在结束 HTTP 请求后继续运行吗？](https://stackoverflow.com/questions/1428340/can-a-php-script-continue-running-after-ending-the-http-request)

以及有关如何执行此操作的更多详细信息的博客文章（也链接在上述堆栈溢出问题中）：[http ://waynepan.com/2007/10/11/how-to-use-ignore_user_abort-to-do -进程带外/](http://waynepan.com/2007/10/11/how-to-use-ignore_user_abort-to-do-process-out-of-band/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:40:05.347

我认为您正在寻找[$.done()](http://api.jquery.com/deferred.done/)

# boost - 由于 lib 前缀，链接到 Boost 库失败

> ID：10549669
> 
> 赞同：5
> 
> 时间：2012-05-11T10:28:48.503
> 
> 标签：boost, linker

我从 boostpro 为 VC9 安装了 boost v1.47 DLL (MT, Debug)。我的`#include`代码`<boost/regex.hpp>`。当我尝试构建时，VC 给了我`LNK1104 cannot open file libboost_regex-vc90-mt-gd-1_47.lib`，即使`boost_1_47/lib`已添加到**Additional Library Dependencies**（双引号中）。问题似乎是目录中的库的名称不是`libboost_regex-vc90-mt-gd-1_47.lib`，而是简单`boost_regex-vc90-mt-gd-1_47.lib`的。

如何让 VC 省略前导 'lib' ？任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T20:29:00.403

在 Boost 中，lib 前缀表示库是为静态链接还是动态（共享）链接构建的。为了表明您想要动态链接库（正如没有 lib 前缀的名称所暗示的那样），请定义`BOOST_ALL_DYN_LINK`.

在 Visual Studio 中，转到项目的设置，然后选择**配置属性**> **C/C++** >**预处理器**页面。添加`BOOST_ALL_DYN_LINK`到**预处理器定义**。

另请参阅此相关问题：[https ://stackoverflow.com/a/2521866/483776](https://stackoverflow.com/a/2521866/483776)

# android - Android 应用程序许可问题

> ID：10549670
> 
> 赞同：0
> 
> 时间：2012-05-11T10:28:50.683
> 
> 标签：android, android-lvl

明确给出了使用 Android LVL 使应用程序获得许可和付费。我仍然对免费试用有疑问，例如我是否提供 30 天免费试用，但如果用户更改日期（在设备上放置之前的日期）。在总共 30 天的免费试用期内，它是否仍然可用，还是会继续？

有什么建议可以处理吗？

另一个问题是，如果我想免费将我的应用程序提供给某些人，如果他们从 google play/market 下载应用程序，该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:35:31.093

Android LVL 中没有对试用使用的内置支持。

在使用 Android LVL 和 Google Play 商店时，有一种方法可以免费提供付费应用程序。转到 Android 开发者控制台，然后单击编辑配置文件。在许可和应用内结算部分，输入您希望在“测试帐户”部分中向其提供应用的用户的与 Google 关联的电子邮件地址。将许可证测试响应设置为 LICENSED。现在，这将允许您将上传到 Google Play 商店的相同的包含 LVL 的应用 APK 发送给审阅者，而无需他们购买应用。

关于使用此方法的两个重要说明：

1.  此列表中的用户可以免费访问您的所有付费应用和所有应用内付费内容。
2.  如果您使用的是 ServerManagedPolicy，则向测试帐户发出的 LICENSED 响应具有非常短的许可证有效期（我相信 1 分钟）和最大允许重试次数为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:42:22.910

Google Play 商店不支持试用。您可以通过将使用开始日期存储在某处来自己实现它。如果您将其存储在设备上，任何拥有根设备的用户都可以重置它。您可以对其进行一些混淆以使其更难。您也可以将其存储在服务器上，但您需要来自设备的一些信息才能将其关联。

也不支持免费提供应用程序。如果您有某种服务器并使用应用内购买来启用免费应用中的高级功能，您可以自己开发它。如果您想使用付费应用程序，唯一的方法是实际向人们发送 APK。

# python - 如何将元组数据提取为单元素格式

> ID：10549672
> 
> 赞同：3
> 
> 时间：2012-05-11T10:28:53.760
> 
> 标签：python, tuples

我从以下得到了很好的结果，但是如何从元组中提取该数据？换句话说，我如何清理数据？

这是数据库中的数据，我用完了。

```
>>> policy_id = ((2309L,), (118L,), (94L,))
>>> for i in policy_id:
        print i

(2309L,)
(118L,)
(94L,) 
```

但我希望结果为：

```
2309
118
94 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T10:33:01.260

```
policy_id = ((2309L,), (118L,), (94L,))
for i in policy_id:
    print i[0] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T10:36:11.930

```
>>> from itertools import chain
>>> policy_id = ((2309L,), (118L,), (94L,))
>>> for i in chain.from_iterable(policy_id):
        print i

2309
118
94 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T10:36:12.460

```
print '\n'.join(str(x[0]) for x in policy_id) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-19T14:05:32.850

我喜欢的一个可能会让人混淆的概念如下：

**Python2**

```
policy_id = ((2309L,), (118L,), (94L,))
for i, in policy_id:
    print i 
```

**Python3**

```
policy_id = ((2309,), (118,), (94,))
for i, in policy_id:
    print(i) 
```

`,`后解`i`包单个元素元组的元素（不适用于元素多于一个的元组）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T10:39:11.200

```
>>> policy_id = ((2309L,), (118L,), (94L,))
>>> print("\n".join(str(x[0]) for x in policy_id))
2309
118
94 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T07:45:18.240

使用地图的其他方式

`map(lambda x: str(x[0]), policy_id)`

如果你想要新的线路然后

`"\n".join(map(lambda x: str(x[0]), policy_id))`

# google-analytics - 在谷歌分析中发送自定义变量 gif 请求时是否需要 utmt 参数？

> ID：10549674
> 
> 赞同：1
> 
> 时间：2012-05-11T10:29:01.543
> 
> 标签：google-analytics

我正在尝试使用自定义变量在服务器端使用谷歌分析。

谷歌对 utmt 参数有以下说明：

> 指示请求的类型，它是以下之一：事件、事务、项目或自定义变量。如果 GIF 请求中不存在此值，则请求类型为 page。

但是，当我使用 http 标头时，即使在定义自定义变量时，我也看不到正在发送 utmt 参数。有必要吗？如果是这样，您能否提供一个查询字符串示例？

编辑：这是我正在使用的 javascript 代码：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-123456789-1']);
_gaq.push(['_setCustomVar', 1, 'Test', 'Test', 2]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); 
ga.type = 'text/javascript'; 
ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; 
s.parentNode.insertBefore(ga, s);
})();

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T12:46:05.820

与文档的建议相反，您不能在综合浏览量或事件跟踪之外设置 customvar。并且`_setCustomVar`不要单独调用 GA 服务器。
`utmt`参数值只能是'event', 'item', 'transaction'，如果不设置有一个pageview值。

自定义变量通过来自综合浏览量或事件的调用传递（如此处简要[说明](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#recommended)）

在您的示例中，自定义变量是通过`_trackPageview`调用发送的（您可以在 中查看`utme=8(Test)9(Test)11(2)`）。
Pageview 是 的默认值`utmt`，所以这里不需要指定。

注意：文档中的“自定义变量”指的是已弃用的[旧`_setVar`函数。](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setVar)

# c# - 新 Async/Await 命令的中间结果

> ID：10549683
> 
> 赞同：1
> 
> 时间：2012-05-11T10:29:54.713
> 
> 标签：c#, asynchronous, async-await, .net-4.5, c#-5.0

我一直在想...

新的 Async 结构实际上是否允许中间结果，而无需在消费者端编写新代码？

让我用一个例子来详细说明。

假设我们有一个方法可以将数据下载到字节数组或流中，以哪个更好。

是否有可能，`await`在下载完成之前，使用内置异步功能的方法可以开始使用字节数组或流？我可以做的是每次下载流的某个部分时引发事件，但这会再次增加混乱。

让我写一个代码示例（从我的脑海中，不会是正确的代码！）我（会）期望产生中间结果，因为`await`ed 方法返回这样的结果。

```
io.Stream data = await downloadData();
byte[4096] buffer = new byte[4096];
while (!data.EOF) {
  (await?) data.Read(buffer, offset, 4096);
} 
```

到目前为止，`Stream.Read`还*不能*等待，但是我们有什么方法可以做到这一点吗？我希望能够`await`通过转账。我在监督什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T19:22:57.367

我对它不太熟悉，无法给你一个很好的例子，但因为听起来你不想要一次性结果，而是想要多个结果，这听起来更适合 observable。此处[输入的链接描述](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)是来自 Rx 团队的 2.0 beta 博客文章的图像，在这些方面非常有用（恕我直言）。

![在此处输入图像描述](../Images/01734f9e08c17697780e44695c014f54.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T11:28:41.110

如果你`Stream`在 .Net 4.5 中使用，你可以使用它的[`ReadAsync()`](http://msdn.microsoft.com/en-us/library/hh137813%28v=vs.110%29.aspx)方法：

```
Stream stream = await downloadData();
byte[4096] buffer = new byte[4096];
int read;
do
{
    read = await stream.ReadAsync(buffer, 0, buffer.Length);
    // do something with buffer here
} while (read > 0); 
```

如果您的意思是您的流没有诸如 之类的方法，但确实支持使用,模式`ReadAsync()`的异步，并且您想使用，那么您也可以这样做：`BeginXxx()``EndXxx()``await`

```
do
{
    read = await Task.Factory.FromAsync<byte[], int, int, int>(
        stream.BeginRead, stream.EndRead, buffer, 0, buffer.Length, null);
    // do something with buffer here
} while (read > 0); 
```

但是，如果您只有一个同步`Read()`方法，那么使用它的唯一方法是在后台线程上`async`启动一个新方法：`Task`

```
do
{
    read = await Task.Run(() => stream.Read(buffer, 0, buffer.Length));
    // do something with buffer here
} while (read > 0); 
```

这段代码的问题是它仍然阻塞了一个线程，这`async`是试图避免的。但如果该方法在 GUI 线程上运行，并且您不能在后台线程上运行整个循环，它可能仍然有用。

# c# - 有没有办法指定 where T:new() 限制但使用内部构造函数？

> ID：10549685
> 
> 赞同：7
> 
> 时间：2012-05-11T10:30:12.257
> 
> 标签：c#, .net, generics, restriction

我创建了一个需要实例化其实现类型的泛型类，因此实现类型必须具有可访问的无参数构造函数。看起来 new() 限制可以完成这项工作，但它强制实现类型有一个公共构造函数，当我有它内部时（但可以访问，因为两者都在同一个程序集中）。

1.  是否有理由强迫它公开而不是“可访问”？
2.  有没有办法做我需要的？

提前致谢。

编辑：这样做的原因是我有一个必须通过单例使用的 X 类。Singleton 类是一个泛型类，我想将类 X 构造函数设为内部以避免外部用户以错误的方式访问对象（调用构造函数）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T11:22:16.550

*如规范Bound and Unbound Types*的第 4.4.3 节所述，C# 语言不允许这样做。

> 如果约束是构造函数约束`new()`，则该类型`A`不能`abstract`并且必须具有公共无参数构造函数。如果满足以下条件之一，则满足此条件。
> 
> *   `A`是一个值类型，因为所有值类型都有一个公共的默认构造函数
> *   `A`是一个具有 cosntructor 约束的类型参数
> *   `A`是具有值类型约束的类型参数
> *   `A`是一个不是`abstract`并且包含一个`public`没有参数的显式声明的构造函数的类
> *   `A`不是`abstract`并且有一个默认构造函数。

如果不满足这些条件中的任何一个，则会出现编译器错误。如果您发现自己拥有公共类型但仅具有内部构造函数，那么它们很可能实际上应该是具有公共构造函数的内部类型。

我建议将您的类型访问器更改为`internal`并将其构造函数更改为`public`，并使其无参数。然后，您`public`的无参数构造函数可以调用非无参数`private`或`internal`构造函数来执行任何额外的初始化工作。

```
internal class C<T> where : T new()
{
    public C() : this(new T()) {
    }

    private C(T t) {
        // Do additional initialization
    }
} 
```

请注意，模式是有限的，但没有什么能阻止您使用`private`方法。

```
internal class C<T> where T : new() {
    public C() {
        T t = new T();
        InitializeClass(t);
    }

    private void InitializeClass(T t) {
        throw new NotImplementedException();
    }
} 
```

根据您的更新，这是一个公共单身模式的小例子。

```
public class Singleton<T> where T : new()
{
    public static Singleton<T> Current {
        get;
        private set;
    }

    internal Singleton() : this(new T()) {
    }

    private Singleton(T t) {
        Current = this;
        // Do whatever you need to with T
    }        

    public String Name {
        get;
        set;
    }
} 
```

用法

```
// Somewhere in your internal assembly
Singleton<String> singleton = new Singleton<String>();

// In an external assembly
Singleton.Current.Name = "SoMoS"; 
```

您甚至不需要以这种方式使用构造函数，您可以轻松地做一些简单的事情。

```
public class Singleton<T> where T : new()
{
    public static Singleton<T> Current {
        get;
        private set;
    }

    internal Singleton() {
        T t = new T();
        // Do stuff with T
    }

    public String Name {
        get;
        set;
    }
} 
```

如果你不能设计它来满足你的要求，泛型*可能不是要走的路。*泛型只能做这么多，并不能解决所有问题。有工厂模式，注入等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T10:34:26.457

> 是否有理由强迫它公开而不是“可访问”？

术语可访问是非常*上下文敏感*的，泛型不是，由架构。在您的特定情况下`internal`可以访问，但*泛型*是为通用解决方案制作的。

> 有没有办法做我需要的？

基于第一点，不，这是不可能的，我也不知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:12:36.140

泛型用于通用解决方案，因此如果您使用“新”约束，您的解决方案必须与实现公共 ctor 的每个类一起使用。

如果您想为特定类型的类实现通用解决方案，您可以定义一个实现此类内部构造函数的抽象基类。为这个抽象基类实现一个通用的解决方案并使用

* 其中 T : MyBaseClassWithInternalCtor *

作为约束。

# date - 登录时 Drupal 中的日期会延迟一天

> ID：10549686
> 
> 赞同：0
> 
> 时间：2012-05-11T10:30:12.533
> 
> 标签：date, drupal-6

我维护的网站上的日期显示正常，直到我登录（以管理员身份）。然后他们会减一天。我认为这是因为时间戳随后以 UTC 显示，而它们应该以 UTC+1 显示。由于 UTC 休息一小时，因此天数显示为休息一天。我可以查找显示日期的每一段代码并将它们硬编码为始终显示为 UTC+1（这是我想要的），但我觉得可能有一种更简单的全局方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:44:13.557

检查您的时区设置。Drupal 必须使用它来显示日期。

# java - 简单的java代码，打印星星

> ID：10549688
> 
> 赞同：0
> 
> 时间：2012-05-11T10:30:16.000
> 
> 标签：java, loops, println

这是一个打印三角形的java代码，将它们命名为A、B、C、D；我的问题是如何在**同一级别*上打印它们*

```
public class ex_5_10 {
public static void main(String args[]){
    // (A)
    System.out.println("(A)") ;

    for(int row = 0 ; row < 10 ; row++){
        for(int column = 0 ; column < 10 ; column++){
            if(column > row) continue ;
            System.out.print("*");
        }
        System.out.println() ;
    }
    //*********************************
    // (B)
    System.out.println("(B)") ;

    for(int row = 0 ; row < 10 ; row++){
        for(int column = 0 ; column < 10 ; column++){
            if(column < row) continue ;
            System.out.print("*");
        }
        System.out.println() ;
    }
    //********************************
    //(C)
    System.out.println("(C)") ;
    for(int row = 0 ; row < 10 ; row++){
        for(int column = 0 ; column < 10 ; column++){
            if( column < row ) System.out.print(" ") ;
            else System.out.print("*");
        }
        System.out.println() ;
    }
    // (D)
    System.out.println("(D)") ;
    for(int row = 0 ; row < 10 ; row++){
        for(int column = 10 ; column >= 0 ; column--){
            if( column > row ){ System.out.print(" ") ; }
            else {System.out.print("*"); }
        }
        System.out.println() ;
    }

} 
```

}

所以上面的java代码会打印这个：

```
*
**
***

***
**
*

***
 **
  *

  *
 **
*** 
```

现在我需要在同一级别上打印相同的数字！

```
*    *** ***   *   
**   **   **  **
***  *     * *** 
```

请帮我！我正在寻找你的答案！提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:34:14.723

你为什么不想这样打印？

```
System.out.println("*    *** ***   *") ;
System.out.println("**   **   **  **") ;
System.out.println("***  *     * ***") ; 
```

更新：好的。

如果这是循环的作业。只需创建矩阵（数组数组）并通过分配的矩阵元素打印。

然后逐行打印出矩阵。

您应该为每个打印周期使用偏移量。Fox 示例，伪代码中的第二个（不是 java 代码！）：

```
//*********************************
// (B)
matrix[0][offset] = "B";

for(int row = 0 ; row < height ; row++){
    for(int column = 0 ; column < width ; column++){
        if(column < row) continue ;
        matrix[row][column+offset] = "*";
    }
}
offset += width + space_length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T11:07:03.500

你也可以尝试这样的事情：

```
for(int row = 0 ; row < 10 ; row++){    

    // A
    for(int column = 0 ; column < 10 ; column++){
        if(column > row) continue ;
        System.out.print("*");
    }
    System.out.print("   ");

    // B
    for(int column = 0 ; column < 10 ; column++){
        if(column < row) continue ;
        System.out.print("*");
    }
    System.out.print("   ");

    // C
    for(int column = 0 ; column < 10 ; column++){
        if( column < row ) System.out.print(" ") ;
        else System.out.print("*");
    }
    System.out.print("   ");

    //D
    for(int column = 0 ; column < 10 ; column++){
        if(column > row) continue ;
        System.out.print("*");
    }

    System.out.println() ;
} 
```

也许您可以通过将 4 个内部循环更改为一个循环来进一步简化它。但这是你的功课...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-09T14:24:40.047

```
enter code hereclass y{
        public static void main(String args[])
        {
            for(int x=1;x<=3;x++)
            {
                for(int y=1;y<=x;y++)
                {
                    System.out.print("*");
                }
                for(int sp1=1;sp1<=(4-x);sp1++)
                {
                    System.out.print(" ");
                }
                for(int se=1;se<=(4-x);se++)
                {
                    System.out.print("*");
                }
                for(int sp2=1;sp2<(2*x);sp2++)
                {
                System.out.print(" ");
                }
                for(int p=1;p<x;p++)
                {
                System.out.print(" ");

                }
                for(int stt=1;stt<=(4-x);stt++)
                {
                System.out.print("*");
                }
                for(int spth=1;spth<=(4-x);spth++)
                {
                System.out.print(" ");
                }
                for(int stfr=1;stfr<=x;stfr++)
                {
                System.out.print("*");
                }
                System.out.print("\n");
            }

        }

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T10:34:06.407

对此没有单行答案。

您需要记住，当您调用 时`println()`，字符串末尾将有一个换行符输出，因此该行不会再出现任何内容。

考虑到这一点，您需要拆分逻辑，以便首先*组装*各种“图形”的输出，然后在处理完它们后，以有意义的方式*输出*结果（所以每个字符的第一行，然后是第二行等）。不要在处理每个图形时调用 print，而是将结果放入适当的数据结构中。

对于奖励分数，当提供足够的数据以跨越显示的宽度时，您需要自动换行......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T10:41:13.417

如果您想使用结果，您可以执行以下操作：（这是一个家庭作业）

您会注意到，在循环中存在以下条件：

1.  `if(column < row) continue ; System.out.print("*");`
2.  `if(column < row) continue ; System.out.print("*");`
3.  `if( column < row ) System.out.print(" ") ; else` System.out.print("*");

4.  `if( column > row ){ System.out.print(" ") ; } else` {System.out.print("*"); }

只需混合并重新排列它们，然后查看结果。并且还移动行的一个循环内部的列的循环内部，并为列添加偏移量。
这次你需要使用一个循环块而不是 4 个。

玩得开心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T08:41:55.677

```
public class ex_5_10 {
public static void main(String args[]){
    // (A)
    System.out.println("(A)") ;

    for(int row = 0 ; row < 10 ; row++){
        for(int column = 0 ; column < 10 ; column++){
            if(column > row) continue ;
            System.out.print("*");
        }
        System.out.print() ;
    }
   //*********************************
   // (B)
   System.out.println("(B)") ;

   for(int row = 0 ; row < 10 ; row++){
      for(int column = 0 ; column < 10 ; column++){
         if(column < row) continue ;
         System.out.print("*");
      }
      System.out.print() ;
   }
   //********************************
   //(C)
   System.out.println("(C)") ;
   for(int row = 0 ; row < 10 ; row++){
      for(int column = 0 ; column < 10 ; column++){
          if( column < row ) System.out.print(" ") ;
          else System.out.print("*");
      }
      System.out.print() ;
   }
   // (D)
   System.out.println("(D)") ;
   for(int row = 0 ; row < 10 ; row++){
       for(int column = 10 ; column >= 0 ; column--){
         if( column > row ){ System.out.print(" ") ; }
         else {System.out.print("*"); }
       }
       System.out.print() ;
   }

  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T10:35:44.730

您可以将所有不同图形的代码放在同一个循环中，然后在每个图形之间放置计算的空格。找出图形之间的空间模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-11T10:35:52.547

您将在行的一个循环内移动列的内部 for 循环，并为列添加偏移量。内部 if 的逻辑将全部是列 - 偏移量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-21T04:43:26.920

代码

```
public class Main {

    public static void main(String[] args) {

    for(int line = 1 ; line<=3; line++){
        for(int patternOne=1; patternOne<=line; patternOne++ ){
            System.out.print("*");
        }

        for(int space=3; space>=line; space--){
            System.out.print(" ");
        }

        for(int patternTwo=3; patternTwo>=line; patternTwo--){
            System.out.print("*");
        }

        for(int space=1; space<=(line*2)-1; space++){
            System.out.print(" ");
        }
        for(int patternThree=3; patternThree>=line; patternThree-- ){
            System.out.print("*");
        }
        for(int space=3; space>=line; space--){
            System.out.print(" ");

        }
        for(int patternFour=1; patternFour<=line; patternFour++){
            System.out.print("*");
        }

        System.out.println();
    }

    }
} 
```

输出

```
*    *** ***   *   
**   **   **  **
***  *     * *** 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-06-01T07:14:16.783

整数行 = 10；

```
 for(int i=0; i<rows ; i++)
    {
        for (int j = 0; j <i; j++) {
            System.out.print("*");
        }
        System.out.println();
    } 
```

# c# - 这是我的 XAML 代码，第 41 行和第 252 行

> ID：10549690
> 
> 赞同：1
> 
> 时间：2012-05-11T10:30:20.490
> 
> 标签：c#, windows-phone-7

我一直在开发一个 Windows Phone 应用程序，该应用程序将图像和文本放在一起并将它们上传到服务器。

调试应用程序时出现问题。这个问题似乎是技术性的。我真的不知道该怎么做。

这就是为什么我想在这里发布这个问题。如果你们中的某个人可以帮助解决这个问题，我将非常感谢这里提供给我的帮助。

我非常感谢这里所做的工作。没有你们，我们真的不会走到这一步。您让我们有机会从错误中吸取教训。

再次感谢。

请检查我的代码是否需要任何调整。

这是我在模拟器上调试时弹出的错误消息：

未能分配给属性“System.Windows.Controls.Primitives.ButtonBase.Click”。[行：41 位置：250]

这是我的第一篇文章，所以我不能发布图片，很遗憾。

我很欣赏这里所做的工作。

```
 private void button3_Click(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)

       //void photoChooserTask_Completed(object sender, PhotoResult e)
        //{

            {
                System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
                bmp.SetSource(e.ChosenPhoto);
                image1.Source = bmp;
                byte[] sbytedata = ReadToEnd(e.ChosenPhoto);
                string s = sbytedata.ToString();
                WebClient wc = new WebClient();
                Uri u = new Uri("ftp://ftp.icupload.cs201.com/icupload.cs201.com/images/");
                wc.OpenWriteCompleted += new OpenWriteCompletedEventHandler(wc_OpenWriteCompleted);
                wc.OpenWriteAsync(u, "POST", sbytedata);

            }
        }
        public static void wc_OpenWriteCompleted(object sender, OpenWriteCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                object[] objArr = e.UserState as object[];
                byte[] fileContent = e.UserState as byte[];

                Stream outputStream = e.Result;
                outputStream.Write(fileContent, 0, fileContent.Length);
                outputStream.Flush();
                outputStream.Close();
                string s = e.Result.ToString(); ;

            }
        }
        public static byte[] ReadToEnd(System.IO.Stream stream)
        {
            long originalPosition = stream.Position;
            stream.Position = 0;

            try
            {
                byte[] readBuffer = new byte[4096];

                int totalBytesRead = 0;
                int bytesRead;

                while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
                {
                    totalBytesRead += bytesRead;

                    if (totalBytesRead == readBuffer.Length)
                    {
                        int nextByte = stream.ReadByte();
                        if (nextByte != -1)
                        {
                            byte[] temp = new byte[readBuffer.Length * 2];
                            Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                            Buffer.SetByte(temp, totalBytesRead, (byte)nextByte);
                            readBuffer = temp;
                            totalBytesRead++;
                        }
                    }
                }

                byte[] buffer = readBuffer;
                if (readBuffer.Length != totalBytesRead)
                {
                    buffer = new byte[totalBytesRead];
                    Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
                }
                return buffer;
            }
            finally
            {
                stream.Position = originalPosition;
            }    

    } 
```

这是第 41 行...位置 252 是“Click = myButton3_Click”

```
<Button BorderBrush="#FFFF7300" Content="Capture Photo" FontSize="22" Foreground="#FFFF7300" Height="78" Margin="263,23,-10,0" Name="myButton" VerticalAlignment="Top" Click="button2_Click" FontFamily="Tahoma" BorderThickness="4" />
        <Image Height="275" HorizontalAlignment="Left" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="269" />
        <Button Content="Comment &amp; Location" Height="72" HorizontalAlignment="Left" Margin="92,599,0,0" Name="button1" VerticalAlignment="Top" Width="294" Foreground="#FFFF7300" OpacityMask="#FFFF7300" BorderBrush="#FF091A08" FontFamily="Tahoma" FontWeight="Normal" Background="Transparent" Click="button1_Click" />
        <Button Content="Select Photo" HorizontalAlignment="Left" Margin="264,107,0,0" Name="button2" Width="202" FontSize="24" Foreground="#FFFF7300" FontFamily="Tahoma" Background="Transparent" BorderBrush="#FFFF7300" BorderThickness="4" Height="78" VerticalAlignment="Top" Click="button2_Click_1" />
        <Button Content="Upload" Height="84" HorizontalAlignment="Left" Margin="272,191,0,0" Name="myButton3" VerticalAlignment="Top" Width="186" BorderBrush="#FFFF7300" BorderThickness="4" FontFamily="Tahoma" FontSize="26" Foreground="#FFFF7300" Click="myButton3_Click" ClickMode="Release" DataContext="{Binding}" />
        <TextBlock Height="200" HorizontalAlignment="Left" Margin="28,290,0,0" Name="textBlock1" Text="" VerticalAlignment="Top" Width="400" FontSize="30" TextTrimming="WordEllipsis" TextWrapping="Wrap" /> 
```

在您在这里提到的所有更改之后，我仍然得到三个相同的错误。

错误 2“System.Windows.RoutedEventArgs”不包含“ChosenPhoto”的定义，并且找不到接受“System.Windows.RoutedEventArgs”类型的第一个参数的扩展方法“ChosenPhoto”（您是否缺少 using 指令或程序集参考？） C:\Users\Yaseen\Desktop\IC Final\Phone Application\MainPage.xaml.cs 107 41 Phone Application

这些直接出现在 button3 语法之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:41:22.693

我认为您发布的代码与错误消息无关。

但是您的问题似乎与

[这里](https://stackoverflow.com/questions/9875918/problems-with-silverlight-toolkit-in-wp7)

[和这里](https://stackoverflow.com/questions/10339685/failed-to-assign-to-property-when-adding-new-applicationbarmenuitem-icon)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T19:21:25.190

当`myButton3_Click`代码隐藏只有`button3_Click`.

这些应该是匹配的。

# wpf - 如何在 WPF ComboBox 中正确显示过长的文本

> ID：10549700
> 
> 赞同：10
> 
> 时间：2012-05-11T10:30:58.623
> 
> 标签：wpf, combobox, texttrimming

我有一个显示各种长度文本的组合框。对于不长的文本没有问题。对于长于 ComboBox 宽度的文本，我想修剪文本并在末尾添加“...”（省略号）以正确显示它们。底线是我不想改变 ComboBox 的宽度。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T10:38:10.013

`ItemTemplate`为您的使用自定义`ComboBox`，它使用`TextBlock`属性`TextTrimming`设置为的 a `CharacterEllipsis`。

例子：

```
<ComboBox ItemsSource="..." SelectedValuePath="...">
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <TextBlock 
        Text="{Binding ...}" 
        TextTrimming="CharacterEllipsis" />
    </DataTemplate>
  </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-30T00:36:02.197

正如罗斯所说，答案是实现自定义`ItemTemplate`. 但是，要使其正常工作，您需要正确进行绑定。

关于此方法的注意事项：您不能同时设置 the`DisplayMemberPath`和 the `ItemTemplate`，它必须是一个或另一个。

因此，对于显示成员是项目的一般情况（例如对于字符串），您可以使用不带属性的绑定来绑定到`DataContext`模板：

```
<ComboBox ItemsSource="..." SelectedValuePath="...">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding }" TextTrimming="CharacterEllipsis" />
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

或者，你可以把它放在一个风格中。

```
<Style TargetType="{x:Type ComboBox}">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock Text="{Binding }" TextTrimming="CharacterEllipsis" />
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

对于要绑定到对象的特定属性的情况，类似于使用该`DisplayMemberPath`属性的方式，请将绑定替换为您将用于要绑定的对象上的属性的绑定。因此，将我的第一个示例中的第四行替换为以下内容：

```
<TextBlock Text="{Binding MyDisplayMemberProperty}" TextTrimming="CharacterEllipsis" /> 
```

绑定在绑定到 ComboBox 类型的单个项目的上下文中。为了使这一点更明确，您可以执行以下操作：

```
<DataTemplate DataType="{x:Type namespace:MyItemType}">
    <!-- My DataTemplate stuff here -->
</DataTemplate> 
```

当您在`DataTemplate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:36:45.657

您可以使用[TextTrimming](http://msdn.microsoft.com/en-us/library/system.windows.texttrimming.aspx) `CharacterEllipsis`或`WordEllipsis`组合框中的文本块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-21T19:51:36.727

也适用于更复杂的 DataTemplate；但是，我不得不求助于 DockPanel 而不是标准的 WrapPanel。

```
<ComboBox>
  <ComboBox.ItemTemplate>
    <DataTemplate>
      <DockPanel>
        <AccessText DockPanel.Dock="Left" Text="{Binding Icon}"/>
        <TextBlock Text="{Binding Name}"  TextTrimming="CharacterEllipsis" />
      </DockPanel>
    </DataTemplate>
  </ComboBox.ItemTemplate>
</ComboBox> 
```

# google-apps-script - 将从电子表格中提取的信息添加到站点

> ID：10549708
> 
> 赞同：0
> 
> 时间：2012-05-11T10:31:31.237
> 
> 标签：google-apps-script

我在一个网站上运行的脚本给了我一个错误：服务错误：SitesApp：条目必须有一个纯文本、非空标题（第 16 行）

```
function parseNews() {
  var SS = SpreadsheetApp.openById("MY_SPREADSHEET_KEY");
  var SourcePage = SS.setActiveSheet(SS.getSheetByName("Current"));
  var TargetPage = SS.setActiveSheet(SS.getSheetByName("Archive"));
  var TotalRows = SourcePage.getLastRow();
  var RowCount;
  var pages = SitesApp.getSite('mydomain.co.uk','home').getChildren();
  Logger.log(pages.length);
  for (RowCount=1;RowCount++;RowCount <= TotalRows){
    var titleText = SourcePage.getRange(RowCount,2).getValue();
    var urlText = SourcePage.getRange(RowCount,3).getValue();
    var postType = SourcePage.getRange(RowCount,4).getValue();
    var lineEntry = ('<div>'+titleText+'<THEREISANAHREFHERE="'+urlText+'">'+urlText+'</A></div>');
    Logger.log(lineEntry);
    Logger.log(pages[1].getTitle());
    var page = pages[1].setHtmlContent(lineEntry);
    Logger.log(page);
  }
} 
```

第 16 行是 'var page = pages[1].setHtmlContent(lineEntry);

日志输出为：

```
2.0
<div>The new Samsung Galaxy S III Android Smartphone<A HREF="http://www.bbc.co.uk/news/technology-17935684">http://www.bbc.co.uk/news/technology-17935684</A></div> 
```

调试时，页面为“未定义”

任何想法我做错了什么？抱歉，如果格式很差，预览下看起来不错！(Ubuntu 12.04+Chrome)

干杯，

斯莱迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:34:50.463

我最好的猜测是，您发现一个页面不知何故没有标题，当尝试使用 setHtmlContent() 更新它时，会抛出一个关于缺少标题的错误。在尝试修改其内容之前，请尝试检查以确保页面具有标题。

# java - 在 Mac OSX Lion 中禁用将 Jboss 5.1 作为应用程序启动

> ID：10549709
> 
> 赞同：1
> 
> 时间：2012-05-11T10:31:37.363
> 
> 标签：java, osx-lion, jboss5.x

我还没有找到更好的方法来在标题中解释在 Lion 上为开发目的启动旧的 Jboss 安装时发生了什么。

基本上，org.jboss.Main 应用程序也已启动。对于“应用程序”，我的意思是 Dock 中的一个图标（经典的咖啡杯）是由 Lion 创建的，并且会立即滚动到主桌面，并在工具栏中显示 org.jboss.Main 菜单项。此项目具有默认的 mac 条目：preferences、about 等。

这是我继承的 Jboss 安装，从 USB 密钥复制和粘贴。我认为一定有一个 JAVA_OPTS 导致了这种情况，因为我机器上的其他 Java 应用程序服务器没有这种行为。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:23:58.603

在您的 JAVA_OPTS 中添加 -Djava.awt.headless=true 开关

# android - android 活动中的运行时错误已停止

> ID：10549710
> 
> 赞同：0
> 
> 时间：2012-05-11T10:31:39.967
> 
> 标签：android

> **可能重复：**
> [如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

[我刚刚通过本教程](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)构建了一个演示应用程序，当我运行该应用程序时，我在 log cat 中收到以下错误并且主应用程序已停止。有谁知道我为什么会收到这个错误？

```
05-11 15:52:06.492: E/AndroidRuntime(584): FATAL EXCEPTION: main
05-11 15:52:06.492: E/AndroidRuntime(584): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.androidhive.jsonparsing/com.androidhive.jsonparsing.AndroidJSONParsingActivity}: android.os.NetworkOnMainThreadException
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.os.Looper.loop(Looper.java:137)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-11 15:52:06.492: E/AndroidRuntime(584):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 15:52:06.492: E/AndroidRuntime(584):  at java.lang.reflect.Method.invoke(Method.java:511)
05-11 15:52:06.492: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-11 15:52:06.492: E/AndroidRuntime(584):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-11 15:52:06.492: E/AndroidRuntime(584):  at dalvik.system.NativeStart.main(Native Method)
05-11 15:52:06.492: E/AndroidRuntime(584): Caused by: android.os.NetworkOnMainThreadException
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
05-11 15:52:06.492: E/AndroidRuntime(584):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
05-11 15:52:06.492: E/AndroidRuntime(584):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
05-11 15:52:06.492: E/AndroidRuntime(584):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-11 15:52:06.492: E/AndroidRuntime(584):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-11 15:52:06.492: E/AndroidRuntime(584):  at com.androidhive.jsonparsing.JSONParser.getJSONFromUrl(JSONParser.java:38)
05-11 15:52:06.492: E/AndroidRuntime(584):  at com.androidhive.jsonparsing.AndroidJSONParsingActivity.onCreate(AndroidJSONParsingActivity.java:54)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.Activity.performCreate(Activity.java:4465)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-11 15:52:06.492: E/AndroidRuntime(584):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-11 15:52:06.492: E/AndroidRuntime(584):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:35:58.530

为 3.0 之前的 android 目标（例如 2.1）重建相同的内容。3.0 之前的 Android 不会检查您是否在主线程上进行网络连接。在它作为快速修复工作之后，然后将您的网络从主线程移开。

请参阅：http: [//developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

# jquery - 拖放动态创建的 div

> ID：10549716
> 
> 赞同：1
> 
> 时间：2012-05-11T10:31:56.380
> 
> 标签：jquery, jquery-ui, drag-and-drop

我有一个拖放代码在服务器端创建的 div 上完美运行，但是当我使用 jquery（动态）创建一个 div 时，我似乎无法将任何东西放入容器中......

```
$('.dropcontent').droppable({
            accept: '.item',
            drop: function(ev, ui) {
               /* do something */
            }    
        });

        $(".item").draggable({  
           helper:'clone',
           appendTo: 'body',
           snap: true,
           revert: true

        });

    <div id="row1seo" class="dropcontent" > </div>   // original code on server side
    <div id="row1seo" class="dropcontent ui-droppable"> </div> // the above line becomes this on client side showing it has "binded" with the droppable
    <div id="row2seo" class="dropcontent"></div> // this the dynamically created div which doesn't seem to bind with the droppable. this is created in php file using ajax to retrieve it 
```

我也试过

```
 $(".dropcontent").live('droppable', function() {
......
}); 
```

似乎不起作用...任何想法如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:36:08.530

您必须使拖动功能生效，以便它适用于生成的元素。太糟糕了 jQuery 的`live()`函数不处理拖放，所以你必须自己创建一个。例如，我使用此功能：

```
(function ($) {
    $.fn.liveDraggable = function (opts) {
        this.live("mouseover", function() {
            if (!$(this).data("init")) {
                $(this).data("init", true).draggable(opts);
            }
        });
        return $();
    };
}(jQuery)); 
```

像这样称呼它：

```
$( "element" ).liveDraggable() 
```

您也可以轻松地制作一个可放置的！GL！

# xml - XSLT 匹配包含字母的记录不正确

> ID：10549717
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:32:03.333
> 
> 标签：xml, xslt

您好，我有一个看起来像这样的 XSLT：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="record[translate(employeeNumber, 'abcdefghijklmnopqrstuvwxyzABCDEFGHILKLMNOIPQRSTUVWXYZ!£$%^', '')]" priority="1"/>
    <xsl:template match="record[string-length(employeeNumber) &lt; 8]" priority="2"/>
</xsl:stylesheet> 
```

如您所见，匹配条件不得包含字母或特殊字符，并且要多于 8 个字符。所以当我使用这个 XML 时：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <records>
        <record>
            <employeeNumber>12345678</employeeNumber>
        </record>
        <record>
            <employeeNumber>1234567A</employeeNumber>
        </record>
        <record>
            <employeeNumber>12345678A</employeeNumber>
        </record>
        <record>
            <employeeNumber>123456789</employeeNumber>
        </record>
    </records>
</request> 
```

它应该返回这个 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <records>
        <record>
            <employeeNumber>1234567A</employeeNumber>
        </record>
        <record>
            <employeeNumber>12345678A</employeeNumber>
        </record>
        <record>
            <employeeNumber>123456789</employeeNumber>
        </record>
    </records>
</request> 
```

**但是**它实际上返回：

```
<?xml version="1.0" encoding="UTF-8"?>
<request>
    <records/>
</request> 
```

为什么比赛不是：

1.  只寻找字母
2.  不使用超过 8 个字符的第二个匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:42:14.530

用这个

```
<xsl:template match="record[string-length(employeeNumber) &lt;= 8]
                           [translate(employeeNumber, '0123456789', '') = '']
" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:45:00.553

这个怎么样

```
<xsl:template match="record[
  not(
    string-length(employeeNumber) &gt;= 8
    and
    translate(employeeNumber, '0123456789', '') = ''
  )
]" /> 
```

您不需要两个模板，也不需要此任务的模板优先级。

以上产生：

```
<request>
  <records>
    <record>
      <employeeNumber>12345678</employeeNumber>
    </record>
    <record>
      <employeeNumber>123456789</employeeNumber>
    </record>
  </records>
</request> 
```

这符合您的要求

*   不得包含字母或特殊字符
*   不得少于 8 个字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:47:30.890

string-length(employeeNumber) < 8 模板永远不会匹配，因为您的员工编号中没有一个字符串长度小于 8。

translate() 模板匹配所有记录，因为您的所有员工编号都至少包含一个字符（一个数字），它不会被 translate() 消除。（所以翻译的结果是一个非空字符串，其布尔值为真）。

（注意：Saxon 有一个选项 -T 可以跟踪哪些元素与哪些模板规则匹配。这对于调试这类事情非常有用）

# sql-server - 返回列出我数据库中的所有过程、表和函数

> ID：10549719
> 
> 赞同：0
> 
> 时间：2012-05-11T10:32:10.063
> 
> 标签：sql-server

我想要 sql 查询，它将返回我的数据库中的所有过程、表和函数的列表我尝试跟踪查询过程但不起作用

```
SELECT NAME FROM sys.all_objects WHERE type='P' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:41:28.733

要返回所有过程（系统过程除外），查询是：-

```
select * from DBName.information_schema.routines where routine_type = 'PROCEDURE' 
```

对于您可以使用的所有功能

```
SELECT name AS function_name
,type_desc
FROM sys.objects
WHERE type_desc LIKE '%FUNCTION%'; 
```

对于所有表，查询是：

```
SELECT * FROM sys.Tables 
```

# r - 访问数据框中的列名

> ID：10549720
> 
> 赞同：1
> 
> 时间：2012-05-11T10:32:23.147
> 
> 标签：r, dataframe

我有一个列名 z_1、z_2 到 z_200 的数据框。在以下示例中，为了便于表示，我仅显示 z_1

```
df <- data.frame(x=1:5, y=2:6, z_1=3:7, u=4:8) 
df
i=1
tmp <- paste("z",i,sep="_")
subset(df, select=-c(tmp)) 
```

上面的代码将在循环 i 中用于访问需要从数据框中删除的某些元素

执行上述代码时，出现错误“-c(tmp) 中的错误：一元运算符的参数无效”

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:44:15.507

如果您想使用子集并且要包含或排除大量相似名称的列，我通常会考虑使用`grepl`它来构造与列名称匹配的逻辑向量（或者您可以使用它来构造数字向量一样容易）。结果的否定将删除列

```
df <- data.frame(x=1:5, y=2:6, z_1=3:7, u=4:8) 
df
i=1
tmp <- paste("z",i,sep="_")
subset(df, select= !grepl("^z", names(df) ) )
  x y u
1 1 2 4
2 2 3 5
3 3 4 6
4 4 5 7
5 5 6 8 
```

通过否定，您可以使用该模式删除（或不包括）所有以“z”开头的列。或者您可以将`grep`with`value =TRUE`与字符值结合使用：

```
subset(df, select= c("x", grep("^z", names(df), value=TRUE ) ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:51:28.553

尝试：

```
df[names(df)!=tmp] 
```

您的代码不起作用的原因是`-c(tmp)`， where`tmp`是一个字符，计算结果为空。您只能使用这种排除数值的方式。

或者，这也可以：

```
subset(df, select=-which(names(df)==tmp)) 
```

因为`which`返回一个数字。

# javascript - 如何将值传递给用作参数的函数？

> ID：10549721
> 
> 赞同：0
> 
> 时间：2012-05-11T10:32:24.553
> 
> 标签：javascript

如果单击元素，我想将函数作为参数传递。但是在我传递的函数中，我想从单击的元素中设置属性信息。

将属性值传递到函数内部的最佳方法是什么？

我的 JavaScript 看起来像这样：

```
$('.edit-link').livequery(function(){
    $('.edit-link').click(function(){
        WMT.openOverlay($('#edit'),{
            relativeTo: $('.search'),
            width: $('.search'),
            close: $('#cancel_edit'),
            fillFields: function(){
                return $.getJSON("ajax/edit.php?id=" + $(clickedElement).data('id'));
            }
        });
    });
}); 
```

我想在 json 中发送数据属性“id”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:34:05.773

你需要使用`this`. 它指向点击的元素：

```
$(this).data('id') 
```

如果这不起作用，试试这个：

```
var clickedElement = this;
WMT.openOverlay($('#edit'),{
// ... rest of your code. 
```

# ruby-on-rails - CanCan ruby on rails 错误

> ID：10549722
> 
> 赞同：3
> 
> 时间：2012-05-11T10:32:29.280
> 
> 标签：ruby-on-rails, authentication, authorization, cancan

我刚刚在 Rails 中开始一个新项目，我想添加一些 CanCan 角色检查到应用程序。我做了什么：1.安装了正确的gem 2.包含在gemfile“cancan”中3.创建了能力类4.在我的ApplicationController中-添加了“check_authorization”

但是，我仍然得到

> ApplicationController:Class 的未定义局部变量或方法“authorize_resource”

或者

> ApplicationController:Class 的未定义局部变量或方法“check_authorization”

错误。有人有任何想法，这可能是什么原因？

我的cancan版本是1.6.7。宝石版本是 1.9.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-11T14:08:19.090

正如作者@Animattronic 所说，重新启动您的 Rails 服务器。

# c# - 如何检查对象是否不是特定类型？

> ID：10549727
> 
> 赞同：47
> 
> 时间：2012-05-11T10:32:57.890
> 
> 标签：c#, c#-4.0

我想检查一个对象是否不是特定类型。我知道如何检查某些东西*是否*属于特定类型：

```
if (t is TypeA)
{
   ...
} 
```

但

```
if (t isnt TypeA)
{
   ...
} 
```

不起作用。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-11T10:33:53.547

**2020 年 10 月 30 日更新：**

时代在变。从 C# 9.0 开始，您可以使用更自然的方式来检查它：

```
if(t is not TypeA) { ... } 
```

**原始答案：**

C# 不是很自然的语言；）使用这个

```
if(!(t is TypeA))
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T10:36:57.657

如果您不仅要*检查*，还可以使用[as](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)运算符。

```
var a = t as TypeA;
if(a!= null)
   //use a.. 
```

这样，如果要在检查后使用类型，就可以避免双重转换..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T10:38:37.580

如果你`TypeA x = (TypeA)t;`在 if 块里面做一个更好的方法是

```
TypeA x = t as TypeA
if(x != null)
{
...
} 
```

这只会导致一次类型检查，而不是两次。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-18T15:31:24.247

救援的扩展方法！！

```
public static class ObjectExtensions
{
    public static bool Isnt(this object source, Type targetType)
    {
        return source.GetType() != targetType;
    }
} 
```

用法

```
if (t.Isnt(typeof(TypeA)))
{
   ...
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-11T22:39:40.893

简短回答：您可能想使用：

```
if (t.GetType()==typeof(TypeA))
{
   ...
}
if (t.GetType()!=typeof(TypeA))
{
  ...
} 
```

* * *

长答案：

所以。请注意，您是在询问它是否是特定类型。 `is`不会告诉您它是否是特定类型 - 它会告诉您它是特定类型还是该类型*的任何后代*。

所以如果你有两个类，Animal 和 Cat：Animal，而 felix 是一只猫，那么

```
if (felix is Animal)
{
    //returns true
}
if (felix.GetType() == typeof(Animal))
{
    //does not
} 
```

如果它对你来说不重要，继承类是可以的，那么别担心，`!(felix is Animal)`像其他人提到的那样使用，你就可以了！（你可能没问题。）

但是，如果您需要确定 felix 是特定的动物，那么您需要询问是否`t.GetType()==typeof(TypeA)`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-11T10:59:04.467

我通常将 null 和类型检查全部放在一行中：

```
if (t == null || !(t is TypeA)) {
  ...
} 
```

如果 TypeA 是一个结构，您需要再次稍微不同地处理它：

```
if (t == null || t.GetType() != typeof(TypeA)) {
  ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-27T08:26:25.670

检查以下示例`getType()`：

```
object obj = new object();
obj.GetType();

string s;
s.GetType();

List<string> StringList = new List<string>();
StringList.GetType(); 
```

# visual-studio - 为什么我不能保存继承的项目属性表的值？

> ID：10549729
> 
> 赞同：1
> 
> 时间：2012-05-11T10:33:02.063
> 
> 标签：visual-studio, visual-studio-2010, propertysheet

我正在尝试将继承的项目属性表添加到项目的配置中。

我粘贴在字符串中

`..\..\vs\library.vsprops;..\..\vs\debug.vsprops;..\..\vs\platformx64.vsprops`

然后单击应用/确定。一旦我这样做，该属性就会被清除（单击应用时最明显）。到底是怎么回事？

# git - Sourcetree 中的源代码树在哪里？

> ID：10549730
> 
> 赞同：14
> 
> 时间：2012-05-11T10:33:15.990
> 
> 标签：git, atlassian-sourcetree

单击“树”后，gitk 会显示给定提交的目录树。sourcetree中有类似的东西吗？

## 示例（gitk）

*   第一版的目录树（见右下窗框）

    ![第一版的目录树](../Images/ccc5a1cb245b60e24f9b45692d67c945.png)

*   第二次修订的目录树 ![在此处输入图像描述](../Images/0f0e09c650d75b67c224a30bd279a822.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:39:46.080

目前在 SourceTree (v1.5.3) 中无法浏览任何给定版本的源代码树。

已在 JIRA（官方 Atlassian 错误跟踪器）中以[错误 #1021](https://jira.atlassian.com/browse/SRCTREE-1021)的形式提交功能请求。

它尚未实现，但预计将在 1.6 中发布。

如果需要，您可以注册 JIRA 并投票或观看问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-28T18:52:39.557

选择文件状态选项卡（底部）> 所有文件（顶部）> 树视图。

# javascript - javascript中的Facebook游戏声音

> ID：10549733
> 
> 赞同：1
> 
> 时间：2012-05-11T10:33:22.933
> 
> 标签：javascript, facebook, html, audio, soundmanager2

我正在寻找一种在 facebook HTML5 游戏中播放声音的工作方式。

HTML5 音频现在有很多问题，在我的游戏中使用它有太多问题。我尝试了一个声音工具包：SoundManager2，它使用 Flash（http://www.schillmania.com/projects/soundmanager2/），但由于 iframe，它无法在 facebook 内工作......

有什么方法可以让 HTML5 游戏的声音正常工作吗？或者，如果有人知道让 soundmanager 在 facebook 中工作的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:54:40.770

我通过创建自己的引擎解决了这个问题 - [https://github.com/Malharhak/SoundManager](https://github.com/Malharhak/SoundManager)

# java - 当有多个数据源时获取活动数据源？

> ID：10549740
> 
> 赞同：0
> 
> 时间：2012-05-11T10:34:00.933
> 
> 标签：java, spring, hibernate, c3p0

我正在使用弹簧/休眠应用程序。我配置了 c3p0 连接池。我的应用程序有 5 个数据源，它们连接到 5 个不同的数据库。5 个数据库用于 5 个不同的模块。当我使用一个模块时，它已连接到某个数据源。是否可以获得当前模块正在使用的特定数据源？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:39:41.623

您必须明确选择模块的数据源。签入代码。

# android - 如何从 android 上的 sdcard 读取选定的文本文件

> ID：10549741
> 
> 赞同：5
> 
> 时间：2012-05-11T10:34:04.293
> 
> 标签：android, file, text, sd-card

我是 android 开发的新手，我需要你的帮助。我锁定了与我的发展相似但对我没有帮助的主题。到目前为止，我创建的函数可以从我的 sdcard 中获取文件并向我显示当时的列表。那是有效的

这是在 sdcard 上获取路径的代码：

```
package com.seminarskirad;

import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.ListActivity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FilenameFilter;
import java.io.IOException;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.List;

public class LoadActivity extends ListActivity{

     private enum DISPLAYMODE{ ABSOLUTE, RELATIVE; }
     private final DISPLAYMODE displayMode = DISPLAYMODE.ABSOLUTE;
     private List<String> directoryEntries = new ArrayList<String>();
     private File currentDirectory = new File("/");

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Browse(Environment.getExternalStorageDirectory());

        }

        private void upOneLevel(){
                if(this.currentDirectory.getParent() != null)
                        this.Browse(this.currentDirectory.getParentFile());
        }

        private void Browse(final File aDirectory){
                if (aDirectory.isDirectory()){
                        this.currentDirectory = aDirectory;
                        fill(aDirectory.listFiles());

              }
        }

        private void fill(File[] files) {
                this.directoryEntries.clear();
                if(this.currentDirectory.getParent() != null)
                        this.directoryEntries.add("..");

                switch(this.displayMode){
                        case ABSOLUTE:
                                for (File file : files){
                                        this.directoryEntries.add(file.getPath());
                                }
                                break;
                        case RELATIVE: // On relative Mode, we have to add the current-path to the beginning
                                int currentPathStringLenght = this.currentDirectory.getAbsolutePath().length();
                                for (File file : files){
                                        this.directoryEntries.add(file.getAbsolutePath().substring(currentPathStringLenght));
                                }
                                break;
                }

        ArrayAdapter<String> directoryList = new ArrayAdapter<String>(this, R.layout.load, this.directoryEntries);
        this.setListAdapter(directoryList);
        }

        protected void onListItemClick(ListView l, View v, int position, long id) {
                int selectionRowID = position;
                String selectedFileString = this.directoryEntries.get(selectionRowID);
                if(selectedFileString.equals("..")){
                        this.upOneLevel();
                }else if(selectedFileString.equals()){   /// what to write here ???
                        this.readFile();    ///what to write here???
                } else {
                        File clickedFile = null;
                        switch(this.displayMode){
                                case RELATIVE:
                                        clickedFile = new File(this.currentDirectory.getAbsolutePath()
                                                                                                + this.directoryEntries.get(selectionRowID));
                                        break;
                                case ABSOLUTE:
                                        clickedFile = new File(this.directoryEntries.get(selectionRowID));
                                        break;
                        }
                        if(clickedFile.isFile())
                            this.Browse(clickedFile);
                }
        }

        private void readFile() {
// what to write here???
        } 
```

抱歉，我无法放置图像，因为我没有声誉，但是当我在模拟器上运行它时，会得到如下结果：

```
 /mnt/sdcard/kuzmanic.c
/mnt/sdcard/text.txt
/mnt/sdcard/DCIM
/mnt/sdcard/LOST.DIR 
```

所以我想要做的是当我点击我想要打开的 text.txt 或 kuzmanic.c 文件时，然后在同一个布局文件中，即我的 load.xml 文件：

```
This is the code for the xml file:
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:textSize="18sp">    

</TextView> 
```

我需要在我的代码中写什么，我是否必须在清单中写任何东西？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T10:56:30.377

试试这个代码：

```
package com.javasamples;
import java.io.*;
import android.app.Activity;
import android.os.Bundle;
import android.view.*;
import android.view.View.OnClickListener;
import android.widget.*;

public class FileDemo2 extends Activity {
    // GUI controls
    EditText txtData;
    Button btnWriteSDFile;
    Button btnReadSDFile;
    Button btnClearScreen;
    Button btnClose;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // bind GUI elements with local controls
    txtData = (EditText) findViewById(R.id.txtData);
    txtData.setHint("Enter some lines of data here...");

    btnWriteSDFile = (Button) findViewById(R.id.btnWriteSDFile);
    btnWriteSDFile.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // write on SD card file data in the text box
        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = 
                                    new OutputStreamWriter(fOut);
            myOutWriter.append(txtData.getText());
            myOutWriter.close();
            fOut.close();
            Toast.makeText(getBaseContext(),
                    "Done writing SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
    }// onClick
    }); // btnWriteSDFile

        btnReadSDFile = (Button) findViewById(R.id.btnReadSDFile);
        btnReadSDFile.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // write on SD card file data in the text box
        try {
            File myFile = new File("/sdcard/mysdfile.txt");
            FileInputStream fIn = new FileInputStream(myFile);
            BufferedReader myReader = new BufferedReader(
                    new InputStreamReader(fIn));
            String aDataRow = "";
            String aBuffer = "";
            while ((aDataRow = myReader.readLine()) != null) {
                aBuffer += aDataRow + "\n";
            }
            txtData.setText(aBuffer);
            myReader.close();
            Toast.makeText(getBaseContext(),
                    "Done reading SD 'mysdfile.txt'",
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(getBaseContext(), e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        }
        }// onClick
        }); // btnReadSDFile

        btnClearScreen = (Button) findViewById(R.id.btnClearScreen);
        btnClearScreen.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // clear text box
                txtData.setText("");
            }
        }); // btnClearScreen

        btnClose = (Button) findViewById(R.id.btnClose);
        btnClose.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // clear text box
                finish();
            }
        }); // btnClose

    }// onCreate

}// AndSDcard 
```

布局文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
android:id="@+id/widget28"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ff0000ff"
android:orientation="vertical"
xmlns:android="http://schemas.android.com/apk/res/android"
>
<EditText
android:id="@+id/txtData"
android:layout_width="fill_parent"
android:layout_height="180px"
android:textSize="18sp"  />

<Button
android:id="@+id/btnWriteSDFile"
android:layout_width="143px"
android:layout_height="44px"
android:text="1\. Write SD File"  />

<Button
android:id="@+id/btnClearScreen"
android:layout_width="141px"
android:layout_height="42px"
android:text="2\. Clear Screen"  />

<Button
android:id="@+id/btnReadSDFile"
android:layout_width="140px"
android:layout_height="42px"
android:text="3\. Read SD File"  />

<Button
android:id="@+id/btnClose"
android:layout_width="141px"
android:layout_height="43px"
android:text="4\. Close" />

</LinearLayout> 
```

![在此处输入图像描述](../Images/2ae63a071099e0e3707d4199d7423d02.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:47:51.070

我使用此代码读取 SD 卡中的文本文件，

```
public class ReadFileSDCardActivity extends Activity {  
    /** Called when the activity is first created. */  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        //Find the view by its id  
        TextView tv = (TextView)findViewById(R.id.fileContent);  

        File dir = Environment.getExternalStorageDirectory();  
        //File yourFile = new File(dir, "path/to/the/file/inside/the/sdcard.ext");  

        //Get the text file  
        File file = new File(dir,"text.txt");  
        // i have kept text.txt in the sd-card  

        if(file.exists())   // check if file exist  
        {  
              //Read text from file  
            StringBuilder text = new StringBuilder();  

            try {  
                BufferedReader br = new BufferedReader(new FileReader(file));  
                String line;  

                while ((line = br.readLine()) != null) {  
                    text.append(line);  
                    text.append('\n');  
                }  
            }  
            catch (IOException e) {  
                //You'll need to add proper error handling here  
            }  
            //Set the text  
            tv.setText(text);  
        }  
        else  
        {  
            tv.setText("Sorry file doesn't exist!!");  
        }  
     }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:54:36.303

首先，您必须在 load.xml 文件中为您的 textview 提供一个 ID，并在线性布局中定义 textview。像这样

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" android:layout_height="match_parent"
<TextView android:id="@+id/tv1
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:textSize="18sp"/> 
```

现在您必须设置活动的布局。您只能在 onCreate() 方法中执行此操作。

```
setContentView(R.layout.load); 
```

现在制作一个像这样的 TextVew 对象。

```
TextView tview = (TextView) findViewById(R.id.tv1); 
```

现在您必须使用**FileInputStream**读取文本文件并将其保存到字符串变量中。

之后，您可以将字符串分配给文本视图。

```
tview.setText(string variable name); 
```

# jquery - Highchart 动态创建 - 未正确渲染

> ID：10549745
> 
> 赞同：7
> 
> 时间：2012-05-11T10:34:19.950
> 
> 标签：jquery, highcharts

我正在使用动态函数绘制高图，在调用函数之后它根本没有渲染。稍后如果我调整窗口大小，它会渲染数据吗？有什么具体原因吗？

我的功能：

```
var chart;
$(document).ready(function(){

    function randomData(len){
        var arr = [];
        for(var i = 0; i<len;i++){
            arr.push(Math.random())
        }
        return arr;
    }

    var options = {
        chart:{
            renderTo:'graph',
            type:'line'
        },
        title:{
            text:null
        },
        xAxis: {
            plotBands: [{
                    from: 5,
                    to: 6,
                    color: 'yellow',
                    label: {
                            text: 'Yellow'
                    }
            }, {
                    from: 10,
                    to: 11,
                    color: 'green',
                    label: {
                            text: 'Green'
                    }
            }]
    },
        plotOptions:{
            series:{
                animation:false,
                dataLabels:{enabled:true,formatter:function(){return Highcharts.numberFormat(this.y)}}
            }
        }
    }

    chart = new Highcharts.Chart(options);
    var i = 1, s1,s2,s3,s4;

    function createChart(){
        s1 = chart.addSeries({data:randomData(20),name:'Line'+i},false);
    }

    $('#create').click(function(){  createChart() });

}) 
```

请检查我的jsfiddle。

[http://jsfiddle.net/w46Sr/](http://jsfiddle.net/w46Sr/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T11:28:51.417

[问题是您将addSeries](http://www.highcharts.com/stock/ref/#chart-object)的 set 参数设置为 false。
在这种情况下，您必须设置为 true，它会在添加新系列后重新绘制图表。

对于**一个系列**。

```
chart.addSeries({data:randomData(20),name:'Line'+i},true); 
```

像下面的例子。
**[jsfiddle](http://jsfiddle.net/w46Sr/1/)**

或者，如果您想在每次点击中添加**多个**系列，您只需更改一件事。

```
function createChart(seriesData){
    s1 = chart.addSeries(seriesData,false);
}

$('#create').click(function(){
    createChart(seriesData);
    chart.redraw();
}); 
```

您将添加所有系列，然后重新绘制图表，因此您不必每次添加新系列时都重新绘制图表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T10:39:42.613

您需要添加 chart.redraw();

```
function createChart(){
    s1 = chart.addSeries({data:randomData(20),name:'Line'+i},false);
    chart.redraw();
} 
```

# c++ - Notepad++ SourceCookifier 插件在大型 C++ 头文件上非常慢

> ID：10549752
> 
> 赞同：4
> 
> 时间：2012-05-11T10:34:30.950
> 
> 标签：c++, notepad++

我喜欢在 Notepad++ 中浏览我的 C++ 项目。我使用 SourceCookifier 插件以便在大文件的定义之间轻松跳转。但是，如果我加载一个包含大量`#define`和`typedef`声明的大型 C++ 头文件（大约 30.000 行），它似乎会挂起并且需要很长时间才能加载。

有谁知道是否可以设置任何选项以使其更快，或者这个插件通常不会加载这么多定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:58:41.710

您可以通过将项目文件夹放入 SourceCookifier 面板来加速一切，同时（这是重要但记录不充分的部分）**按下修饰键（shift、ctrl 或 alt）**。

> .. 用于导入 INCLUDE 文件。但是您必须在将文件或文件夹拖放到树形视图中时另外按下 CTRL、SHIFT 或 ALT 键。

甚至更聪明......单独只添加您描述的大型定义/类型定义源。它将导致性能提升，因为它们的**符号将不再列在树视图中**，但 SourceCookifier 仍会在您在项目中其他地方的其中一个符号上点击“转到定义”时导航到那里。

我有时也会将包含数千个定义的头文件添加到 SourceCookifier 会话中。不按 ctrl-key 每个文件最多需要 5 分钟，但按 ctrl-key 只需要 1 秒！

编辑/

**在不**按 ctrl 键的情况下添加源文件：

*   “转到定义”功能？是的。
*   树视图中显示为源文件节点的子节点的符号？是的。
*   ==>**不**推荐用于**laaaarge**源文件。

**按**ctrl 键添加源文件：

*   “转到定义”功能？是的。
*   树视图中显示为源文件节点的子节点的符号？**不。**
*   ==>**推荐**用于**laaaarge**源文件。

# java-me - 在我的组件中可滚动

> ID：10549753
> 
> 赞同：1
> 
> 时间：2012-05-11T10:34:31.620
> 
> 标签：java-me, lwuit, lwuit-form, nokia-s40

我无法为中心组件设置滚动。但 NORTH 和 SOUTH 必须固定。

```
this.setLayout(new BorderLayout());
this.setScrollable(false);
this.addComponent(BorderLayout.NORTH, top);
scrollWrap.setScrollable(true);
this.addComponent(BorderLayout.CENTER, scrollWrap);
this.addComponent(BorderLayout.SOUTH, bottom); 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:43:45.910

我假设这段代码在 Form 的子类中？具体是什么不工作？您打算在 X 和 Y 上启用滚动吗？您是否将组件添加到容器中？仅当您将组件添加到 scrollWrap 容器中时，滚动才会起作用

# web-services - unity3d 和 Yii 网络服务

> ID：10549755
> 
> 赞同：0
> 
> 时间：2012-05-11T10:34:36.113
> 
> 标签：web-services, yii, unity3d

我正在通过 Unity3d 为游戏代码构建服务器，我的服务器是用 Yii 构建的，但是当我看到 Yii[教程](http://www.yiiframework.com/doc/guide/1.1/en/topics.webservice)的 webservice 指南时，我看到它使用soapClient 来调用服务器中的函数。但是在 Unity3d 中，我只知道 WWW 和 WWWForm 来请求服务器。那么，有人知道如何在 Unity3d 中使用 webservice 与 Yii 进行通信吗？
太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T06:46:59.533

您只需通过 WWWForm 发送数据

[http://unity3d.com/support/documentation/ScriptReference/WWWForm.html](http://unity3d.com/support/documentation/ScriptReference/WWWForm.html)

```
var highscore_url = "http://www.my-site.com/?r=MyGame/highscore"; 
```

在 Yii 的 Controller 中：\protected\controller\MyGameController.php

```
class MyGame extends Controller
{
   public function actionHighscore()
   {
      // Here you get data from $_REQUEST ($_POST or $_GET) 
      // and use Yii's power for output some data
      // like perl example in link upthere
   }

} 
```

# iphone - 将表格视图滚动到一个单元格，然后闪烁该单元格

> ID：10549756
> 
> 赞同：2
> 
> 时间：2012-05-11T10:34:37.797
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, selection

我有一个包含许多单元格的表格视图。当我添加一个新单元格（使用模态视图控制器）时，我想向用户展示新添加的单元格。为此，我想将表格视图滚动到新单元格，选择它并立即取消选择它。

现在，我在`deselectRowAtIndexPath`定时间隔后向我的表格视图发送一个：

```
- (IBAction)selectRow 
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:7 inSection:0];
    [self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionTop];
    [self performSelector:@selector(deselectRow:) withObject:indexPath afterDelay:1.0f];
}

- (void)deselectRow:(NSIndexPath *)indexPath
{
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我想知道是否有更好的方法来做到这一点。它工作得很好，但我不喜欢依靠静态计时器来执行有时可能需要不同时间的操作（例如，如果表很长）。

**编辑：**请注意，这`selectRowAtIndexPath:animated:scrollPosition`不会导致`UITableView`委托方法被解雇。既`tableView:didSelectRowAtIndexPath:`不会也`scrollViewDidEndDecelerating:`不会被调用。从文档：

> 调用此方法不会导致委托接收`tableView:willSelectRowAtIndexPath:`或`tableView:didSelectRowAtIndexPath:`消息，也不会向观察者发送`UITableViewSelectionDidChangeNotification`通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:41:50.840

`UITableViewDelegate`是 的延伸`UIScrollViewDelegate`。您可以实现其中一种`UIScrollViewDelegate`方法并使用它来确定何时取消选择该行。`scrollViewDidEndDecelerating:`似乎是一个不错的起点。

`performSelector...`此外，由于 1 参数限制，我个人发现方法受到限制。我更喜欢使用 GCD。代码如下所示：

```
- (IBAction)selectRow 
{
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:7 inSection:0];
    [self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionTop];
    //deselect the row after a delay
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self.tableView deselectRowAtIndexPath:indexPath animated:YES];
}); 
```

}

# php - 显示我关注的用户的状态

> ID：10549757
> 
> 赞同：0
> 
> 时间：2012-05-11T10:34:38.677
> 
> 标签：php, mysql

我想问，我真的需要答案。

在这里，我在一个数据库中有 3 个表。

1 # users - id_user (int) - username (text)

2 # status_update - id_status (int) - id_user (int) - username (text) - status (text)

3 # follow - id_user (int) - id_user_follow (int) - username (text) - username_follow (text)

问题是，如何显示我关注的用户的状态..而不显示我未关注的用户的状态。?? .. 使用 php 和 mysql，请，需要帮助。

# 新问题

对不起，我还是不明白，这是我真正的桌子

请帮忙，我仍然不明白[我以前的帖子] [1]中的答案，这里我有3个表。

```
1#简介
- id_user
- 用户名
- 电子邮件

2#图片
- id_picture
- id_user
- 标题

3 # 订阅
- id_user_a
- Id_user_b（在 user_a 订阅的人）
- 日期

```

现在的问题是，如何在只订阅的人中显示标题图片，而不在未订阅的人中显示标题图片，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:51:22.310

```
SELECT u.username, s.status 
FROM users u 
LEFT JOIN follow f ON (u.id_user = f.id_user_follow) 
LEFT JOIN status_update s ON (u.id = s.user_id) 
WHERE f.id_user = USER_ID; 
```

您应该考虑规范化您的表，您不需要在每个表中复制用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:05:20.957

首先你应该修复你的数据库结构。这是我的建议：

```
users - id (int), username (varchar)
status_updates - id (int), users_id (int), status (text)
follow - users_id, following_users_id 
```

请注意，您不应将用户名保存在每个表中，仅将其保存在`users`表中。此外，用户名应该是`varchar`类型。

这是您在固定数据库中的查询：

```
SELECT u.username, s.status
FROM users u
LEFT JOIN follow f ON u.id = f.following_users_id
LEFT JOIN status_updates s ON u.id = s.user_id
WHERE f.user_id = USER_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:52:48.440

SQL：`SELECT status FORM status_update AS s LEFT JOIN follow AS f ON s.id_user = f.id_user_follow WHERE f.id_user = 'YOUR_ID' LIMIT 0,5`

与 PHP 相比，这取决于您是否已经与 Db 建立了连接。作为您可以开始的草稿`var_dump($query->result());`

# java-me - 在 j2me 中无法在三星手机上打开相机

> ID：10549762
> 
> 赞同：3
> 
> 时间：2012-05-11T10:35:07.190
> 
> 标签：java-me, midp, mmapi

我写了以下一段代码。它用于创建相机播放器。我在诺基亚手机上测试过。它工作正常，我可以看到相机并使用它的功能。

但问题是，当在三星手机上测试代码时，它会引发媒体异常，最终不得不退出应用程序。由于此代码，我的内置相机功能（即在三星手机上）也停止工作。那么它的原因是什么？

```
 public void startCamera()
{
    try
    {
        try 
        {
            // if player==null
            player = createPlayer();
        } 
        catch (Exception ex) 
        {
            ex.printStackTrace();
            ErrorDialog.show(ex, "We are exiting the application.",
                        "Exit", new com.auric.qrev.scanqrcode.lwuit.ui.Action(){
                    public void actionPerformed() {
                        m_objMIDlet.exitApp();
                    }
            });
        }
        try 
        {
            player.realize(); 
            player.prefetch();
        }
        catch (MediaException ex) 
        {
            ex.printStackTrace();
            ErrorDialog.show(ex, "We are exiting the application.",
                        "Exit", new com.auric.qrev.scanqrcode.lwuit.ui.Action(){
                    public void actionPerformed() {
                        m_objMIDlet.exitApp();
                    }
            });
        }

        //Grab the video control and set it to the current display.
        videoControl = (VideoControl)(player.getControl("VideoControl"));
        if (videoControl == null)
        {
            //discardPlayer();
            stopCamera();
            ErrorDialog.show("Unsupported:\n"+
                 "Can't get video control\n"+
                 "We are exiting the application.",
                    "Exit", new com.auric.qrev.scanqrcode.lwuit.ui.Action(){
                public void actionPerformed() {
                    m_objMIDlet.exitApp();
                }
            });
        }

        mediaComponent = new MediaComponent(player);
        mediaComponent.setFocusable(false);
        m_cameraScreen.showCamera(mediaComponent);
        start();
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
        //discardPlayer();
        stopCamera();
        ErrorDialog.show("Sorry,Resources unavailable.\nWe are exiting the application.",
                        "Exit", new com.auric.qrev.scanqrcode.lwuit.ui.Action(){
                    public void actionPerformed() {
                        m_objMIDlet.exitApp();
                    }
        });
    } 
```

}

```
 private Player createPlayer()throws MediaException, Exception 
{
    Player mPlayer = null;
    // try capture://image first for series 40 phones
    try 
    {
        mPlayer = Manager.createPlayer("capture://image");
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
    catch (Error e) 
    {
        e.printStackTrace();
    }

    // if capture://image failed, try capture://video
    if (mPlayer == null) 
    {
        try 
        {
            mPlayer = Manager.createPlayer("capture://video");
        } 
        catch (Exception e)
        {
            e.printStackTrace();
            throw new MediaException("Sorry,Resources unavailable.");
        }
    }

    if(mPlayer == null)
        throw new Exception("Sorry,Resources unavailable.");

    return mPlayer; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:00:44.110

首先，您必须意识到，`printStackTrace()`除非您使用的是 Symbian 手机，否则在模拟器之外几乎没有用处。

您也可以使用`java.lang.Throwable`而不是分隔`Exception`和`Error`

您可以通过在测试时将信息收集为 a`String`并将其附加到简单的 lcdui来准确了解发生了什么`Form`：

```
 try {
    // do something that could potentially fail
} catch (Throwable th) {
    myDebugLcduiForm.append("potential failure number xx." + th + th.getMessage());
    // if necessary, throw a new RuntimeException
} 

```

一旦您确切知道哪行代码引发了什么异常，您可能想要更新/重新发布您的问题。

# ios - 如何处理请求中带有获取参数的重定向 url？

> ID：10549766
> 
> 赞同：3
> 
> 时间：2012-05-11T10:35:37.223
> 
> 标签：ios, nsurl, response.redirect

我正在尝试从服务器（aspx）获取 html 响应。

```
NSString *urlstr = [[NSString alloc] initWithFormat:@"http://www.someSiteThatRedirectsWithGetParameters.com?parameter1=1&parameter2=2"];

NSURL *url = [ NSURL URLWithString:urlstr];     
NSMutableURLRequest *urlRequest = [ NSURLRequest requestWithURL: url];

NSData data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error];

NSURL *lastURL=[response URL];

NSLog(@"Last url %@", lastURL); 
```

我将 lastURL 作为 www.someSiteThatRedirectsWithGetParameters.com 获取，因此没有获取原始请求 url 的 html 页面。

为什么会这样，我该如何解决？

**编辑**

这就是我到目前为止所尝试的全部内容：[Get the last redirected url in iOS 5?](https://stackoverflow.com/questions/10577690/get-the-last-redirected-url-in-ios-5) 但我仍然无法实现我想要的，即：获取在 url 中有参数的原始 GET 请求（通过重定向）的 html 页面源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T07:18:15.953

> 我将 lastURL 作为 www.someSiteThatRedirectsWithGetParameters.com 获取，因此没有获取原始请求 url 的 html 页面。

如果您的请求被重定向，那是因为您要连接的服务器告诉您，您第一次发出请求的 URL 没有页面，您应该改用重定向的 URL。这就是重定向响应的全部意义所在。

如果您收到的响应是[HTTP 303](http://en.wikipedia.org/wiki/HTTP_303)，则新请求将从 POST 正确更改为 GET。有时这样做是为了避免刷新页面会重新提交原始请求而产生不良后果的情况。在这种情况下，您将请求发布到某个 URL，服务器接受请求，但通过将客户端重定向到最终显示服务器响应的不同 URL 来响应。

> 为什么会这样，我该如何解决？

我已经解释了上面的“为什么”。“解决方案”是接受来自服务器的响应，并按照重定向到包含服务器响应的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:09:08.787

我会尝试发送两个请求的方法。发送第一个请求，redirectURL 将是响应。然后创建响应的新 URL，使用 GET 参数向该 URL 发送请求。我没试过，但我想它可以工作。

# c++ - ostream 上的 VS2010 链接问题

> ID：10549767
> 
> 赞同：0
> 
> 时间：2012-05-11T10:35:38.750
> 
> 标签：c++, visual-c++, mfc, linker-errors

我收到这些错误：

```
1>test.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall     std::basic_ofstream<char,struct std::char_traits<char> >::`vbase destructor'(void)" (__imp_??_D?  $basic_ofstream@DU?$char_traits@D@std@@@std@@QAEXXZ) referenced in function _main
1>test.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall    std::basic_ofstream<char,struct std::char_traits<char> >::basic_ofstream<char,struct std::char_traits<char>>(void)" (__imp_??0?$basic_ofstream@DU?$char_traits@D@std@@@std@@QAE@XZ) referenced in function _main 
```

此测试代码工作正常：

```
int main(int argc, char **argv)
{
    std::ofstream game_record_output;
} 
```

直到我包含一个从 VS 2003 .NET 转换的旧项目中的 .h

首先，我认为它可能有一些与此相关的问题：

[http://msdn.microsoft.com/en-us/library/8h8eh904(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/8h8eh904(v=vs.90).aspx)

但是，我已经检查过只有 MSVCRT.LIB 和 MSVCPRT.LIB 被链接，所以旧的 iostream 没有被链接......

我不确定为什么会发生这种情况，我假设在包含链中包含了一些错误的文件，但是我已经在包含链中搜索了旧的 iostream .h 文件（即：（fstream.h，iomanip. h、ios.h、iostream.h、istream.h、ostream.h、streamb.h 和 strstrea.h))

那么，我还有什么需要检查的吗？

该项目使用MFC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:41:16.660

根据此更改您的 Visual Studio 项目`Properties`设置：`C/C++ -> Code Generation -> Runtime Library`

*   用于调试配置的多线程调试 DLL (/MDd)
*   用于发布配置的多线程 DLL (/MD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T16:44:15.410

此页面包含 LNK2019 的一些原因：[https](https://msdn.microsoft.com/en-us/library/799kze2z.aspx) ://msdn.microsoft.com/en-us/library/799kze2z.aspx 。特别是，从 VS 2003 升级可能会触发此问题：

> 构建依赖项仅定义为解决方案中的项目依赖项。在早期版本的 Visual Studio 中，这种依赖级别就足够了。但是，从 Visual Studio 2010 开始，Visual Studio 需要项目到项目的引用。如果您的项目没有项目到项目的引用，您可能会收到此链接器错误。添加项目到项目的引用来修复它。

或这个

> 您将使用本机 wchar_t 的代码与不使用的代码混合在一起。在 Visual C++ 2005 中完成的 C++ 语言一致性工作使 wchar_t 默认成为本机类型。您必须使用 /Zc:wchar_t- 编译器选项来生成与使用早期版本的 Visual C++ 编译的模块兼容的代码。如果不是所有模块都使用相同的 /Zc:wchar_t 设置编译，则类型引用可能无法解析为兼容类型。验证所有模块中的 wchar_t 类型是否兼容，方法是更新使用的类型，或者在编译时使用一致的 /Zc:wchar_t 设置。

# java - Jasper 报告中的评估异常

> ID：10549777
> 
> 赞同：0
> 
> 时间：2012-05-11T10:36:07.047
> 
> 标签：java, xml, jasper-reports, evaluation

我的一份 Jasper 报告出现以下异常。

我的***jrxml***文件的一部分是

```
<textField>
    <reportElement x="813" y="30" width="25" height="16"/>
    <textElement>
        <font size="12"/>
    </textElement>
    <textFieldExpression><![CDATA[Pcs]]></textFieldExpression>
</textField>
<line>
    <reportElement x="232" y="2" width="1" height="20"/>
</line> 
```

Exception的完整堆栈跟踪如下

```
net.sf.jasperreports.engine.fill.JRExpressionEvalException: Error evaluating expression: 
at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:203)
at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:591)
at net.sf.jasperreports.engine.fill.JRCalculator.evaluate(JRCalculator.java:559)
at net.sf.jasperreports.engine.fill.JRFillElement.evaluateExpression(JRFillElement.java:876)
at net.sf.jasperreports.engine.fill.JRFillTextField.evaluateText(JRFillTextField.java:421)
at net.sf.jasperreports.engine.fill.JRFillTextField.evaluate(JRFillTextField.java:406)
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257)
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:473)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillBandNoOverflow(JRVerticalFiller.java:434)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnHeader(JRVerticalFiller.java:479)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:261)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:128)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:746)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
at Utilities.ReportDriver.runReport(ReportDriver.java:85)
at jewelleryerpapplication.GUI.MainReports.jbtnViewReportActionPerformed(MainReports.java:864)
at jewelleryerpapplication.GUI.MainReports.access$700(MainReports.java:19)
at jewelleryerpapplication.GUI.MainReports$8.actionPerformed(MainReports.java:504)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2713)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
DetaiListlCustReport__1336728676796_795705
at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:49)
at org.codehaus.groovy.runtime.callsite.GetEffectivePogoPropertySite.getProperty(GetEffectivePogoPropertySite.java:86)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGroovyObjectGetProperty(AbstractCallSite.java:239)
at DetaiListlCustReport__1336728676796_795705.evaluate(calculator_DetaiListlCustReport__1336728676796_795705:227)
at net.sf.jasperreports.engine.fill.JREvaluator.evaluate(JREvaluator.java:190) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:07:02.447

***您丢失了textField***元素表达式的双引号，或者您应该`${}`对变量、字段或参数使用构造。

*常量字符串“Pcs”*的正确表达式是：

```
<textFieldExpression><![CDATA["Pcs"]]></textFieldExpression> 
```

*变量Pcs*的正确表达式是：

```
<textFieldExpression><![CDATA[$V{Pcs}]]></textFieldExpression> 
```

这是***staticText***元素的有效表达式（不带双引号）：

```
<text><![CDATA[Static text]]></text> 
```

# c# - C# SqlTransaction.Commit 抛出异常，因为 Connection 为空

> ID：10549779
> 
> 赞同：2
> 
> 时间：2012-05-11T10:36:10.653
> 
> 标签：c#, database-connection, sqltransaction

我在使用 SqlTransaction 时遇到问题。这是代码

```
SqlConnection conn = new SqlConnection(connectionString);
// assume that at this point I add try/catch and the connection is successfully opened.
conn.Open();
SqlTransaction trans = conn.BeginTransaction(IsolationLevel.RepeatableRead);

//.........
// Here I do my action with database, change it, commit, call ExecuteNonQuery, //ExecuteScalar,etc...

// And after that long processing with this transaction, I don't know why trans.Connection //is null. and therefore when I call trans.commit(), an exception was raised?

trans.commit(); 
```

有人有任何线索吗？

我认为这可能是因为数据库服务器的内存因连接过多而被占用。但我不确定。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:41:39.980

好像错字

```
con.BeginTransaction(IsolationLevel.RepeatableRead) 
```

应该

```
conn.BeginTransaction(IsolationLevel.RepeatableRead) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:42:14.367

利用使用

```
using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        Console.WriteLine("ServerVersion: {0}", connection.ServerVersion);
        Console.WriteLine("State: {0}", connection.State);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:45:18.057

使用`using`声明：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
//your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-25T07:13:11.320

c# - 捕获事务连接后的 SqlTransaction 为空 - [代码日志](https://stackoverflow.com/questions/9839631/sqltransaction-after-catch-transaction-connection-is-null)

Edyn 说：遇到了类似的问题。就我而言，它发生在特定的 SqlException 上。大多数异常都会被很好地捕获和处理，但是每当我遇到转换错误（例如尝试将字符串转换为数字）时，它会自动结束事务。

在我的解决方案中，如果发现底层连接为空，我会重建事务。但这是一项肮脏的工作。

# excel - 使用条件公式 VBA 计算数据透视表中的字段

> ID：10549786
> 
> 赞同：1
> 
> 时间：2012-05-11T10:36:38.547
> 
> 标签：excel, vba, pivot-table, calculated-field

我有这个我无法解决的问题，我正在编写一个 Excel 宏来构建一个从表中获取数据的数据透视表。当表中的字段为 0 时，我不想执行计算字段的计算并在数据透视表中显示空白单元格。

我的条件公式是这个：

```
=IF((field1=0),"",(field1/field2)) 
```

将此公式放入VBA如下

```
pt.CalculatedFields.Add Name:="ptfieldname", Formula:="=IF((field1=0),"",(field1/field2))" 
```

显示一个空的数据透视表，当我使用数据透视表选项选项卡中的“字段，项目和设置”按钮将相同的公式放入 excel 时运行良好......所以我认为公式是正确的，但我必须做在 VBA 宏中也能很好地实现性能？！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T19:30:59.710

欢迎来到 SO。我自己在这里很新，但最近发现它非常有用。

无论如何，这是你的答案。我通过使用宏记录器找到了它，以查看它在数据透视表中创建计算字段时使用的确切语法。希望我找到答案的方法可以帮助您将来自己找到更多答案。

问题在于您在 VBA 中引用公式的方式。VBA 需要在引号内有实际的引号，所以

```
=IF((field1=0),"",(field1/field2)) 
```

在

```
pt.CalculatedFields.Add Name:="ptfieldname", Formula:="=IF((field1=0),"",(field1/field2))" 
```

需要是

```
=If(field1=0,"""",(field1/field2)) 
```

# c# - 如何动态执行多个 Linq to Entities 排序

> ID：10549788
> 
> 赞同：5
> 
> 时间：2012-05-11T10:36:43.837
> 
> 标签：c#, .net, linq, linq-to-entities, sql-order-by

所以我的问题是这样的；在 C# 代码中，我需要在 Linq to Entities 的帮助下执行实体集的多个排序，具体取决于输入参数。有三列要排序，排序列的顺序本身是可变的（这意味着对于每个排序，我需要查找要排序的列）。我怎样才能做到这一点？

我有一些应该可以工作的代码，但是我重复自己的方式太多了，因为我无法参数化我的操作（Linq to Entities 非常严格。我可以在我的 lambda 中做的事情）。请建议我如何根据[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则重写我的代码，也许在 T4 代码生成的帮助下？

以下代码应该说明我的问题。这是真实代码的摘录，为简洁起见，如果我应该包含更多内容，请告诉我。该`orderSpecs`变量是“订单规范”的数组，每个指定要排序的列以及是否以降序方式排序。数组至少有`orderSpecs`一个元素，所以至少要进行一次排序。

```
using (var db = new MyContainer())
{
    var orderSpec = orderSpecs[0];
    IQueryable<DbVersion> dVersions = null;
    if (orderSpec.Column == 0)
    {
        if (orderSpec.Descending)
        {
            dVersions = db.Versions.OrderByDescending(ver => ver.Name);
        }
        else
        {
            dVersions = db.Versions.OrderBy(ver => ver.Name);
        }
    }
    else if (orderSpec.Column == 1)
    {
        if (orderSpec.Descending)
        {
            dVersions = db.Versions.OrderByDescending(ver => ver.Built);
        }
        else
        {
            dVersions = db.Versions.OrderBy(ver => ver.Built);
        }
    }
    else if (orderSpec.Column == 2)
    {
        if (orderSpec.Descending)
        {
            dVersions = db.Versions.OrderByDescending(ver => ver.Id);
        }
        else
        {
            dVersions = db.Versions.OrderBy(ver => ver.Id);
        }
    }

    foreach (var spec in orderSpecs.Skip(1))
    {
        if (spec.Column == 0)
        {
            if (spec.Descending)
            {
                dVersions = dVersions.ThenByDescending(ver => ver.Name);
            }
            else
            {
                dVersions = dVersions.ThenBy(ver => ver.Name);
            }
        }
        else if (spec.Column == 1)
        {
            if (spec.Descending)
            {
                dVersions = dVersions.ThenByDescending(ver => ver.Built);
            }
            else
            {
                dVersions = dVersions.ThenBy(ver => ver.Built);
            }
        }
        else if (spec.Column == 2)
        {
            if (spec.Descending)
            {
                dVersions = dVersions.ThenByDescending(ver => ver.Id);
            }
            else
            {
                dVersions = dVersions.ThenBy(ver => ver.Id);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T11:00:50.153

如何创建一个字典来将导致这些巨大的 if-else 构造的这些列映射到属性。可能看起来像这样：

```
using (var db = new MyContainer())
{
    var orderSpec = orderSpecs[0];
    IOrderedEnumerable<DbVersion> dVersions;

    var mapping = new Dictionary<int, Func<DbVersion, object>>()
    {
        { 0, ver => ver.Name },
        { 1, ver => ver.Built },
        { 2, ver => ver.Id }
    };

    if (orderSpec.Descending)
        dVersions = db.Versions.OrderByDescending(mapping[orderSpec.Column]);
    else
        dVersions = db.Versions.OrderBy(mapping[orderSpec.Column]);

    foreach (var spec in orderSpecs.Skip(1))
    {
        if (spec.Descending)
            dVersions = dVersions.ThenByDescending(mapping[spec.Column]);
        else
            dVersions = dVersions.ThenBy(mapping[spec.Column]);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T10:48:51.780

对于**Untype**：您还可以使用动态 Linq 库：[使用 LINQ 动态查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

![在此处输入图像描述](../Images/89ae2919e6d3acf7565ca45b3fa6c6d6.png)

# 或者

全文：[使用 LINQ 处理 GridView.OnSorting() 并动态创建排序表达式](http://www.codeproject.com/Articles/246361/Handle-GridView-OnSorting-using-LINQ)

对于**Typed**：您可以进行如下动态排序，删除您编写的代码

如何在列名和排序方向不固定的名为 person 的类上进行排序

```
IEnumerable<Person> persons = GetPersons();
    persons = persons.OrderBy(e.SortExpression, e.SortDirection); 
```

人物类

```
class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

用于对数据进行排序的具有表达式树的通用方法

```
public static IEnumerable<T> OrderBy<T>(this IEnumerable<T> collection, 
       string columnName, SortDirection direction)
{
    ParameterExpression param = Expression.Parameter(typeof(T), "x"); // x
    Expression property = Expression.Property(param, columnName);     // x.ColumnName
    Func<T, object> func = Expression.Lambda<Func<T, object>>(        // x => x.ColumnName
        Expression.Convert(Expression.Property(param, columnName), 
        typeof(object)), param).Compile();

    Func<IEnumerable<T>, Func<T, object>, IEnumerable<T>> expression =
        SortExpressionBuilder<T>.CreateExpression(direction);
    IEnumerable<T> sorted = expression(collection, func);
    return sorted;
} 
```

# javascript - Google MAPS API V3 --> 如何计算多边形内的标记数？

> ID：10549796
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:37:06.563
> 
> 标签：javascript, google-maps-api-3

我认为这个问题已经很清楚了。我的地图中有一些多边形，也有一些标记。我想计算每个 Polyogn 中的标记数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:46:14.373

在没有事先准备的情况下执行此操作的唯一方法是遍历您的标记集合并对每个多边形使用多边形中的点分析，直到找到包含该标记的多边形。为每个多边形保留一个运行总计。

使这更容易的事先准备是在添加该标记时维护一个包含该标记的多边形的记录。您可以使用标记的自定义属性 - `marker.containedBy`例如 - 或多边形（将标记添加到附加到多边形的数组中：类似于`polygon.containsMarkers=[]`）。甚至两者兼而有之。

# jpa - 如何处理主表

> ID：10549799
> 
> 赞同：1
> 
> 时间：2012-05-11T10:37:39.683
> 
> 标签：jpa

我有一个带有主表（A）的ERD，它有一个属性（字符串），它是另一个表（B）的FK。

我遇到的问题是，在 B 中唯一的属性是 PK；我只想确保用户在主表属性中只输入一个允许的值。我什至不想从应用程序更新 B 表，因为这将是一项非常不寻常的任务，我将直接在数据库中完成。

我可以将 B 视为另一个实体并使用“常规”JPA 处理它们，但我有点担心也许有更有效的方法来做到这一点*。我想从 B 表中获取完整的值列表并确保属性值正确。

所以问题是：JPA 中有一个特定的模式来处理那些主表吗？

提前致谢。

*：我关心的是创建/检索实体 B 对象时，它只需要一个字符串，每次创建实体 A 对象时都会检索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:12:21.973

我将简单地使用本机查询从`B`表中获取所有字符串，或者将 B 映射为实体以使用 JPQL 查询检索所有 B 字符串，但没有从 A 到 B 的任何关联。

B 字符串将作为基本 String 列存储在 entity 中`A`。如果您尝试`A`使用不在`B`表中的字符串创建或更新实例，那么您将在刷新或提交时收到异常，因为外键约束被破坏。

# liferay - 在 Liferay Portal 6.1 中保存自定义属性

> ID：10549800
> 
> 赞同：0
> 
> 时间：2012-05-11T10:37:52.367
> 
> 标签：liferay

我写了一个liferay portlet 来学习expando/custom 属性。我为每个用户都有一个名为 nick 的自定义属性。我在jsp中有这个表格

```
<form action='<portlet:actionURL></portlet:actionURL>' method="post">
    <liferay-ui:custom-attribute className="<%=User.class.getName()%>"
        classPK="<%=user.getPrimaryKey()%>" name="nick" editable="true" label="Nick">
    </liferay-ui:custom-attribute>
    <input type="submit" value="Save" />
</form> 
```

当我尝试在 processAction 中使用

```
String nick = request.getParameter("nick"); 
```

或者

```
String nick = ParamUtil.get(request, "nick", "no nick given"); 
```

它什么也没给我。我检查了这个文本框的名称是 _testexpandoportlet_WAR_testexpandoportlet_ExpandoAttribute--nick--

如何在 processAction 中得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:40:29.860

尝试使用`PortalUtil.getExpandoValue(...)`

```
 String expandoValue = (String)PortalUtil.getExpandoValue(request, "nick", ExpandoColumnConstants.STRING, ExpandoColumnConstants.PROPERTY_DISPLAY_TYPE_TEXT_BOX); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T06:26:30.040

此代码部分将起作用

```
String nick = "";
nick = (String) PortalUtil.getExpandoValue(request,
                "ExpandoAttribute--" + "nick" + "--",
                ExpandoColumnConstants.STRING, ExpandoColumnConstants.PROPERTY_DISPLAY_TYPE_TEXT_BOX); 
```

为了其他人的帮助，我在 Sourceforge 上上传了 portlet。[test-expando-portlet 的](https://sourceforge.net/projects/test-expando/files/)链接

# c# - 我正在使用断点，但它永远不会到达课堂的第一行

> ID：10549804
> 
> 赞同：0
> 
> 时间：2012-05-11T10:38:18.187
> 
> 标签：c#

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using HtmlAgilityPack;
using System.Net;

namespace GatherLinks
{
    /// <summary>
    /// A result encapsulating the Url and the HtmlDocument
    /// </summary>
    class WebPage
    {
        public Uri Url { get; set; }

        /// <summary>
        /// Get every WebPage.Internal on a web site (or part of a web site) visiting all internal links just once
        /// plus every external page (or other Url) linked to the web site as a WebPage.External
        /// </summary>
        /// <remarks>
        /// Use .OfType WebPage.Internal to get just the internal ones if that's what you want
        /// </remarks>
        public  static IEnumerable<WebPage> GetAllPagesUnder(Uri urlRoot)
        {
            var queue = new Queue<Uri>();
            var allSiteUrls = new HashSet<Uri>();

            queue.Enqueue(urlRoot);
            allSiteUrls.Add(urlRoot);

            while (queue.Count > 0)
            {
                Uri url = queue.Dequeue();

                HttpWebRequest oReq = (HttpWebRequest)WebRequest.Create(url);
                oReq.UserAgent = @"Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5";

                HttpWebResponse resp = (HttpWebResponse)oReq.GetResponse();

                WebPage result;

                if (resp.ContentType.StartsWith("text/html", StringComparison.InvariantCultureIgnoreCase))
                {
                    HtmlDocument doc = new HtmlDocument();
                    try
                    {
                        var resultStream = resp.GetResponseStream();
                        doc.Load(resultStream); // The HtmlAgilityPack
                        result = new Internal() { Url = url, HtmlDocument = doc };
                    }
                    catch (System.Net.WebException ex)
                    {
                        result = new WebPage.Error() { Url = url, Exception = ex };
                    }
                    catch (Exception ex)
                    {
                        ex.Data.Add("Url", url);    // Annotate the exception with the Url
                        throw;
                    }

                    // Success, hand off the page
                    yield return new WebPage.Internal() { Url = url, HtmlDocument = doc };

                    // And and now queue up all the links on this page
                    foreach (HtmlNode link in doc.DocumentNode.SelectNodes(@"//a[@href]"))
                    {
                        HtmlAttribute att = link.Attributes["href"];
                        if (att == null) continue;
                        string href = att.Value;
                        if (href.StartsWith("javascript", StringComparison.InvariantCultureIgnoreCase)) continue;      // ignore javascript on buttons using a tags

                        Uri urlNext = new Uri(href, UriKind.RelativeOrAbsolute);

                        // Make it absolute if it's relative
                        if (!urlNext.IsAbsoluteUri)
                        {
                            urlNext = new Uri(urlRoot, urlNext);
                        }

                        if (!allSiteUrls.Contains(urlNext))
                        {
                            allSiteUrls.Add(urlNext);               // keep track of every page we've handed off

                            if (urlRoot.IsBaseOf(urlNext))
                            {
                                queue.Enqueue(urlNext);
                            }
                            else
                            {
                                yield return new WebPage.External() { Url = urlNext };
                            }
                        }
                    }
                }
            }
        }

        ///// <summary>
        ///// In the future might provide all the images too??
        ///// </summary>
        //public class Image : WebPage
        //{
        //}

        /// <summary>
        /// Error loading page
        /// </summary>
        public class Error : WebPage
        {
            public int HttpResult { get; set; }
            public Exception Exception { get; set; }
        }

        /// <summary>
        /// External page - not followed
        /// </summary>
        /// <remarks>
        /// No body - go load it yourself
        /// </remarks>
        public class External : WebPage
        {
        }

        /// <summary>
        /// Internal page
        /// </summary>
        public class Internal : WebPage
        {
            /// <summary>
            /// For internal pages we load the document for you
            /// </summary>
            public virtual HtmlDocument HtmlDocument { get; internal set; }
        }
    }
} 
```

它永远不会停在这条线上：

```
public Uri Url { get; set; } 
```

并且永远不要停在这个班级的任何其他线路上。仅当我删除该行时：

```
public Uri Url { get; set; } 
```

然后它停在其他线路上。但我不明白为什么它不会停在第一行？我该如何解决？

我尝试阅读有关自动属性的信息，但我不明白它是什么，我不想在这个类中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:40:32.053

[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)不[支持](http://social.msdn.microsoft.com/Forums/sk/vsdebug/thread/b1dd0dc3-e9c1-402a-9c79-a5abf7f7286a)断点。尝试在方法的第一行设置它。`GetAllPagesUnder`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:43:36.253

将断点添加到您声明此类的位置。

```
WebPage wp =new WebPage(); 
```

因为正如 Asif 上面所说，它不会停止在声明中。

或者在声明类之后设置 Url 变量

```
wp.Url="blahblahblah.html"; 
```

编辑：我不知道断点不适用于自动属性。改变你的

```
public Uri Url{get;set;} 
```

至

```
private Uri _Url=new Uri();
public Url URL{get{return _Url;}set{_Url = value;}} 
```

您在这里所做的是创建一个私有变量名称 _Url 并使用属性 Url 访问它

用途是

```
Url="blahblahblah"; 
```

与您当前使用的相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:21:21.190

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:42:39.000

你的问题很模糊 - 但我有一种预感，你正在调用的程序中的某个地方：

```
var results = WebPage.GetAllPagesUnder([some uri]); 
```

并且您期望在调用该方法时会触发断点？

它不会 - 它产生一个枚举器。代码实际上并没有做任何事情，直到你可以`foreach`枚举；或者可能通过或类似的方式`ToArray`急切地加载它。`ToList`

至于自动属性，不，你不能断点 - 但是你不应该需要 - 只是断点设置属性的代码。如果你*真的*想要，坚持一个私有的支持字段并手动实现该属性。如果做不到这一点，请给该类一个构造函数，该构造函数接受`Uri`并设置它，然后改为断点。

# jquery - 如何停止 JqueryTools 可滚动触摸

> ID：10549812
> 
> 赞同：1
> 
> 时间：2012-05-11T10:38:51.057
> 
> 标签：jquery, jquery-tools, scrollable

我一直在使用可滚动的[JQueryTools](http://jquerytools.org/demos/scrollable/index.html)进行测验，效果非常好，尽管我在 iOS 设备上发现的唯一问题是您可以通过滑动到下一张幻灯片而不是使用下一个按钮来滚动，这违背了填写表格的目的测验，有没有人使用过这个插件并且知道“如何关闭任何触摸功能”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:23:26.360

~~如果您查看源代码，他们正在使用 touchstart 和 touchmove 并且它与插件的其余部分完全分开，没有什么依赖于它，所以我只是进去并删除那些东西。应该不会花很长时间。~~

**编辑：**

废弃所有这些，刚刚发现：[https ://raw.github.com/jquerytools/jquerytools/master/src/scrollable/scrollable.js](https://raw.github.com/jquerytools/jquerytools/master/src/scrollable/scrollable.js)

您可以将 touch 设置为 false，它将禁用所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T10:40:22.863

```
var scrollObject = $(".scrollable").scrollable({touch: false}); 
```

# php - 将变量从while循环中传递给jquery

> ID：10549813
> 
> 赞同：1
> 
> 时间：2012-05-11T10:38:58.973
> 
> 标签：php, jquery, variables, while-loop

我有一个网页，列出了 MYSQL 数据库中的许多公司，列表中只显示了公司的名称。当用户单击公司名称时，jquery 手风琴滑块会显示有关该公司的其余信息。

单击公司名称时，它还会向 php 脚本发送请求，以记录某人查看了该公司的详细信息。

**我的问题**

我想将每条记录的 ID 发送到 php 脚本。

我通过在读取 mysql 查询输出的 while 循环中包含手风琴 jquery 代码来实现这一点，但它会生成许多不必要的源代码（即针对每个列出的公司）。

我需要在 while 语句之外包含 jquery 手风琴代码。

**当它在while循环之外时，如何将每个数据库记录的ID（即公司名称）传递给jquery代码中的$ .post？**

手风琴 Jquery 代码

```
$(document).ready(function() {    $('div.listing> div').hide();     $('div.listing> h4').click(function() {

 $.post("/record.php", { id: "<?php echo $LM_row02[id]; ?>" } ) 

    var $nextDiv = $(this).next();
    var $visibleSiblings = $nextDiv.siblings('div:visible');

    if ($visibleSiblings.length ) {
      $visibleSiblings.slideUp('fast', function() {
        $nextDiv.slideToggle('fast');
      });
    } else {
       $nextDiv.slideToggle('fast');
    }   }); }); 
```

任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:44:20.490

当您创建 HTML 时（我假设您也在循环中执行此操作），向元素添加一个`data-*`带有 ID 作为值的属性，并在单击该元素时使用 jQuery 读取该值。

例如，您生成的 HTML 将如下所示：

```
<h4 data-id="123">Some title</h4> 
```

和你的 JavaScript：

```
$('div.listing > h4').click(function() {

    $.post("/record.php", { id: $(this).attr('data-id') }, function() {
        // ...
    }); 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:45:40.647

当您在 html 中创建 h4 元素时，添加一个 html5 数据属性，例如

```
<h4 data-companyid="<?php echo $LM_row02[id]; ?>">Company Name</h4> 
```

然后在你的ajax调用中使用那个companyid，比如

```
$.post("/record.php", { id: $(this).data('companyid') } ); 
```

# linux - 条件表达式中的语法错误

> ID：10549814
> 
> 赞同：5
> 
> 时间：2012-05-11T10:39:06.797
> 
> 标签：linux, shell, while-loop

我尝试：

```
 while [[ $c -le $n]]
        do
        now=$(date +"%T")
        echo "Tps at :- $now"
        @c=$c+1
        done 
```

我有：

```
 syntax error in conditional expression

   syntax error near `do' 
```

有人能弄清楚出了什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T10:43:08.853

在关闭测试表达式之前需要一个空格

```
while [[ $c -le $n ]] 
```

并用“”包围你的变量以避免一些痛苦的错误：

```
while [[ "$c" -le "$n" ]] 
```

# c - C 中 pthread 的竞争条件

> ID：10549816
> 
> 赞同：0
> 
> 时间：2012-05-11T10:39:12.150
> 
> 标签：c, pthreads, race-condition, file-pointer

我是 C 中 pthreads 的新手，我正在编写一个简单的程序，可以在多个文件中并行查找单词。但是，每当我输入多个文件时，输出都会发生变化，这表明存在我没有在我的代码中修复的竞争条件。你能帮我修一下吗？

以下代码段位于 main 中，用于创建 pthreads。

```
 int i = 0;
char *word = "Pluto"; //Word to be found

Message messages[argc-1];
pthread_t threads[argc-1];
for(i; i < argc - 1; i++){
    messages[i].file = argv[i + 1];
    messages[i].word = word;
    messages[i].fp   = fopen(argv[i + 1], "r");
    int  iret = pthread_create( &threads[i], NULL, threadFindWord, (void*) &(messages[i]));
}for(i = 0; i < argc - 1; i++){
    pthread_join(threads[i],NULL);
} 
```

每个线程调用的函数：

```
Message *msg;
msg = (Message *) ptr;

int numFound = ffindWord(msg->fp, msg->word);

printf("File %s has %i occurences of the word %s\n", msg->file, numFound, msg->word);

fclose(msg->fp);
pthread_exit(NULL); 
```

以下是在文件中查找单词的代码）

```
int findWord(char * file, char * word){
 char * current = strtok(file, " ,.\n");
 int sum = 0;
 while (current != NULL){
    //printf("%s\n", current);
    if(strcmp(current, word) == 0)
        sum+=1;
    current = strtok(NULL, " ,.\n");
}
return sum;
}

int ffindWord(FILE *fp, char *word){

 fseek(fp, 0, SEEK_END);
 long pos = ftell(fp);
 fseek(fp, 0, SEEK_SET);
 char *bytes = malloc(pos);
 fread(bytes, pos, 1, fp);
 bytes[pos-1] = '\0';

 int sum = findWord(bytes, word);

 free(bytes);
 return sum;
 } 
```

为了澄清起见，问题是我在程序连续运行时得到不同的结果。调用 $programname file1 file2 打印的结果与之后调用的相同调用不同。但是请注意，该程序仅在传递一个文件时有效。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:49:06.227

这会导致未定义的行为，因为它超出了`messages`and`threads`数组的末尾：

```
Message messages[argc-1];
pthread_t threads[argc-1];
for(i; i < argc; i++){ 
```

并且可能是问题的原因。当仅执行 1 个线程时，它可能会偶然工作。

尝试更改为（或类似的）：

```
int i;
Message messages[argc-1];
pthread_t threads[argc-1];
for(i = 1; i < argc; i++)
{
    messages[i - 1].file = argv[i];
    messages[i - 1].word = word;
    messages[i - 1].fp   = fopen(argv[i], "r");
    int iret = pthread_create(&threads[i - 1],
                               NULL,
                               threadFindWord,
                               (void*)&(messages[i - 1]));
}

for(i = 0; i < argc - 1; i++)
{
    pthread_join(threads[i],NULL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T20:03:32.053

strtok 保留一个全局的内部指针......使用[strtok_r](http://linux.die.net/man/3/strtok_r)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:43:23.427

为了避免每个线程的输出以随机方式混合在一起，您需要缓冲每个线程的输出，然后一次显示一个。

对于您的情况，最简单的方法是在结构中添加一个`char *thread_output`字段（和`thread_output_size`字段）`Message`，然后在您的主线程中执行以下操作：

```
for(i = 0; i < argc - 1; i++)
{
    pthread_join(threads[i],NULL);
    printf("%s", messages[i - 1].thread_output);
} 
```

您可能还想实现一个函数，确保`thread_output`缓冲区足够大，然后用于`vsnprintf()`向缓冲区添加新文本，这样您就可以像使用`printf()`.

例如：

```
void add_thread_output(int thread_number, const char *template, ...) {
    int old_length;
    int length;
    char *temp;

    va_start(ap, template);
    length = vsnprintf(NULL, 0, template, ap);
    va_end(ap);

    old_length = messages[thread_number - 1].thread_output_size;
    temp = realloc(messages[thread_number - 1].thread_output, old_length + length + 1);
    if(temp == NULL) {
        /* Set a flag or something */
    } else {
        va_start(ap, template);
        vsnprintf(&temp[old_length], length + 1, template, ap);
        va_end(ap);
        messages[thread_number - 1].thread_output_size += length;
        messages[thread_number - 1].thread_output = temp;
    }
} 
```

*注意：上面的任何示例代码仅用于示例目的，未经测试或保证编译或工作，也不一定是最有效的方法。例如，分配比您需要的更多的空间（以避免`realloc()`每次向线程的输出缓冲区添加内容时都这样做）可能是个好主意。*

# c - 基于控制台的聊天。如何分离消息和输入？

> ID：10549831
> 
> 赞同：1
> 
> 时间：2012-05-11T10:41:12.740
> 
> 标签：c, console, client, chat

我必须用 C 编写一个简单的聊天。一个程序是客户端连接的服务器，它管理他们发送的消息。客户端是另一个程序，在这里我遇到了问题。我希望能够从其他客户端（通过服务器）接收消息并将它们打印在控制台输出上。但与此同时，我希望能够编写自己的消息并将其发送到服务器（因此也发送到其他客户端）。
问题是，当我写一些消息时，同时从服务器接收到一个，整个输入都搞砸了。我想以某种方式将消息输出区域和消息输入区域分开。有什么好办法吗？这是我在客户端程序中的分支（仍然是草稿）：

```
int pid = fork();
if(pid==0){
    do{
        scanf("%s", msg);
        printf("sending the message to the server\n");
    } while(strcmp(msg, "exit"));
    kill(getppid(), SIGKILL);
    printf("kill the child\n");
} else {
    while(1){
        printf("receiving a new message\n");
        sleep(1);
    }
} 
```

编辑：
好的，我制作了一个简单的 ncurses 应用程序，但还有一个问题。当我有两个进程（在 fork() 之后）时，如何在 ncurses 中写入同一个窗口？他们似乎有自己的独立窗口，我可以提供输入或从服务器读取输出，但不能同时在一个屏幕上。有什么建议吗？我不想在它们之间建立 IPC，只在客户端和服务器之间建立。

EDIT2：
由于临近截止日期，我终于放弃了 ncurses 的想法。如果程序是多线程的（不是多处理的），那么它会完美地工作，但是使用 fork 一切都变得一团糟。无论如何，我在 ncurses 中完成了我的最终项目，所以仍然是一个有用的建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:51:32.483

你没有提到你是在 Windows 还是 Linux 上……这个答案在很大程度上假设 Linux。

一个典型的解决方案是使用类似[ncurses](https://www.gnu.org/software/ncurses/ncurses.html)的东西将屏幕分成两个“窗口”，然后在一个窗口中显示从其他客户端接收到的消息，并在另一个窗口中显示您的输入。Curses 是一个库，用于利用终端控制代码进行光标定位等，以提供简单的基于控制台的 GUI。

如果您曾经使用过`irc`客户端，那么您已经经历过我所描述的情况。

有一个[ncurses 编程 HOWTO](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)，这可能是一个很好的起点。

# android - 作为选项卡的活动是否会在轮换时调用其 onSaveInstanceState/onRestoreInstanceState 方法？

> ID：10549834
> 
> 赞同：0
> 
> 时间：2012-05-11T10:41:16.163
> 
> 标签：android, tabs, rotation

嗨，我目前有一个承载选项卡视图的活动，每个选项卡都是一个活动。我当前遇到的问题是，在其中一个活动（选项卡）上，我需要在旋转时保存一些东西，但是当我更改旋转时，似乎这些方法不会被调用，仅在包含选项卡视图和启动的活动上每个活动作为一个选项卡。

这是包含选项卡的活动的 onCreate 方法：

```
LocalActivityManager mlam = new LocalActivityManager(this, false);
    tabs=(TabHost)findViewById(android.R.id.tabhost);
    mlam.dispatchCreate(savedInstanceState);
    tabs.setup(mlam);

    TabHost.TabSpec spec;
    Intent intent;

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, MyProcessList.class);
    spec = tabs.newTabSpec("artists").setIndicator((buildTabIndicator("Home")))
            .setContent(intent);
    tabs.addTab(spec);

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, MyProcessList.class);
    spec = tabs.newTabSpec("artists2").setIndicator((buildTabIndicator("Menu")))
    .setContent(intent);

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, MyProcessList.class);
    tabs.addTab(spec);
    spec = tabs.newTabSpec("artists2").setIndicator((buildTabIndicator("Options")))
    .setContent(intent);

    tabs.addTab(spec);

    tabs.setCurrentTab(0);` 
```

同一个类中的 onSaveInstanceState/onRestoreInstanceState 方法：

```
 @Override
public void onSaveInstanceState(Bundle bundle) {

    bundle.putString(BOB,"ola");

}

@Override
public void onRestoreInstanceState(Bundle bundle) {

    String hi=bundle.getString(BOB);
    System.out.println(hi);

} 
```

但是作为选项卡（MyProcessList）的活动似乎没有被调用 onSaveInstanceState/onRestoreInstanceState 方法......有没有办法解决这个问题？

问候，

这是我在使用 MainMenu 活动中的方法时收到的警告：

```
05-11 12:15:16.017: W/Bundle(32053): Key BOB expected Bundle but value was a java.lang.String.  The default value <null> was returned. 
```

05-11 12:15:16.033: W/Bundle(32053): 尝试转换生成的内部异常: 05-11 12:15:16.033: W/Bundle(32053): java.lang.ClassCastException: java.lang.String无法转换为 android.os.Bundle 05-11 12:15:16.033: W/Bundle(32053): at android.os.Bundle.getBundle(Bundle.java:1142) 05-11 12:15:16.033: W /Bundle(32053): 在 android.app.LocalActivityManager.dispatchCreate(LocalActivityManager.java:455) 05-11 12:15:16.033: W/Bundle(32053): 在 sinfic.mobile.ipdms.MainMenu.initActivity(MainMenu. java:66) 05-11 12:15:16.033: W/Bundle(32053): 在 sinfic.mobile.ipdms.core.IpdmsCoreActivity.onCreate(IpdmsCoreActivity.java:38) 05-11 12:15:16.033: W/ Bundle(32053)：在 android.app.Activity.performCreate(Activity.java:4465) 05-11 12:15:16.033：W/Bundle(32053)：在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 05-11 12:15:16.033: W/Bundle(32053): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 05-11 12:15:16.033: W/Bundle(32053): 在android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 05-11 12:15:16.033: W/Bundle(32053): 在 android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351) 05-11 12: 15:16.033: W/Bundle(32053): 在 android.app.ActivityThread.access$700(ActivityThread.java:123) 05-11 12:15:16.033: W/Bundle(32053): 在 android.app.ActivityThread$ H.handleMessage(ActivityThread.java:1151) 05-11 12:15:16.033: W/Bundle(32053): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-11 12:15:16.033: W/Bundle(32053): 在 android.os.Looper.loop(Looper.java:137) 05-11 12:15:16.033: W/Bundle(32053): 在 android.app.ActivityThread.main(ActivityThread.java ：4424) 05-11 12:15:16.033: W/Bundle(32053): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-11 12:15:16.033: W/Bundle(32053): 在 java .lang.reflect.Method.invoke(Method.java:511) 05-11 12:15:16.033: W/Bundle(32053): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java: 784) 05-11 12:15:16.033: W/Bundle(32053): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-11 12:15:16.033: W/Bundle( 32053）：在 dalvik.system.NativeStart.main（本机方法）在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-11 12:15:16.033: W/Bundle(32053): 在 dalvik.system.NativeStart.main(Native Method)在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 05-11 12:15:16.033: W/Bundle(32053): 在 dalvik.system.NativeStart.main(Native Method)

它指的是：mlam.dispatchCreate(savedInstanceState);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:47:17.237

我想你也需要打电话给超级。

```
@Override
protected void onSaveInstanceState(Bundle outState)
{
    // SAVE YOUR DATA IN "outState"
    super.onSaveInstanceState(outState);
}
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    //RECOVER YOUR DATA FROM "savedInstanceState"
} 
```

# c# - 如何从已签名的 .Net 程序集中读取数字签名信息？

> ID：10549836
> 
> 赞同：10
> 
> 时间：2012-05-11T10:41:21.200
> 
> 标签：c#, x509certificate, digital-signature, signed, authenticode

我正在编写要在我们的软件构建过程中使用的程序集信息应用程序，并尝试从已签名的 .Net 程序集中读取数字签名信息。

我想在我的 C# 代码中执行 Windows Explorer 可以通过右键单击已签名程序集并选择“数字签名”选项卡然后单击详细信息按钮来执行的操作。例如

![Windows 7 资源管理器可以通过右键单击文件属性来完成](../Images/70f771c2ecfb610299e4de8492b0faf6.png)

![数字签名详细信息](../Images/562adb134934c455b00102927154adef.png)

有没有人知道如何在 C# 中以编程方式执行此操作？我目前正在使用[Mono Cecil 库](http://www.mono-project.com/Cecil)从程序集中获取其余信息。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T22:03:41.710

Mono 项目为两者提供源代码[`signcode`](https://github.com/mono/mono/blob/master/mcs/tools/security/signcode.cs)，[`chktrust`](https://github.com/mono/mono/blob/master/mcs/tools/security/chktrust.cs)您可以在自己的应用程序中重复使用（开源，MIT X11 许可）。

两者都使用`Mono.Security.dll`程序集（在 Windows 下工作，而不仅仅是 Linux 和 OSX）并且包括一个非常[完整的 Authenticode 支持](https://github.com/mono/mono/tree/master/mcs/class/Mono.Security/Mono.Security.Authenticode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-18T09:45:17.827

从[这个回复](https://stackoverflow.com/a/3731122/361177)：

> SignCode（用于 .Net 1.0 和 1.1）使用 Authenticode 签名，据我所知，它缺少 .Net Framework 托管接口。

希望它看起来像一些 Nuget 包实现它：

*   [https://github.com/vcsjones/AuthenticodeExaminer](https://github.com/vcsjones/AuthenticodeExaminer)
*   [https://github.com/vcsjones/AuthenticodeLint](https://github.com/vcsjones/AuthenticodeLint)
*   [https://www.nuget.org/packages/CodeFluentRuntimeClient/](https://www.nuget.org/packages/CodeFluentRuntimeClient/)

# extjs - 嵌套列表返回按钮 sencha touch 2

> ID：10549838
> 
> 赞同：4
> 
> 时间：2012-05-11T10:41:24.593
> 
> 标签：extjs, sencha-touch, sencha-touch-2, nested-lists

我需要在嵌套列表 sencha touch 2 中**获取后退按钮的值**.. 但它只返回，因为它将默认设置为 back ..**有没有办法获得它的实际值？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T10:53:52.753

在 下`navigationview`，您有一个名为 as 的属性`defaultBackButtonText`，用于设置`back`按钮的默认文本。

您可以像这样提供自己的文本，

```
.....
defaultBackButtonText: 'PopView',
..... 
```

要获取此文本的值，您只需进行以下调用...

```
// Returns 'PopView'
navigationView.getDefaultBackButtonText(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T23:47:42.920

我使用以下代码进行了此操作：

```
nestedlist.getBackButton().getText() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:10:59.060

试试这个： `useTitleAsBackText: true`

# java - SWT：表丢失选择

> ID：10549842
> 
> 赞同：0
> 
> 时间：2012-05-11T10:41:40.243
> 
> 标签：java, swt

我有一个如下所示的表格，但是当表格失去焦点时（例如单击某个按钮），选择也会丢失。如何避免这种情况？

```
Table table = new Table(group, SWT.BORDER | SWT.FULL_SELECTION);
table.setLinesVisible(true);
table.setHeaderVisible(true);

table.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent arg0) {
        onSelection();
    }
}); 
```

选择的行： ![选择](../Images/941c00f8054ecfa4d21c5c808191d28d.png)

选择丢失： ![选择丢失](../Images/a9af9e3aa1db623ed8552ab321be4a11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:15:31.470

啊，所以当表格没有焦点时，您的表格不会*显示选定的行？*这是几个不同版本的 Windows 中的一个众所周知的问题。

*请注意*：这不是 SWT 问题，而只是某些 Windows 版本的工作方式！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T09:23:12.057

您可以更改所选表格项目的背景和前景色。请参阅此处[在焦点丢失时突出显示 swt 表行](https://stackoverflow.com/questions/17614209/highlighting-swt-table-row-on-focus-lost/18013138#18013138)

# c++ - 无法更新相关文件中记录的字段，C++

> ID：10549845
> 
> 赞同：0
> 
> 时间：2012-05-11T10:42:03.927
> 
> 标签：c++, file-io, writefile, seekg, fixed-length-record

在[相关文件](https://stackoverflow.com/q/10546952/3744182)中添加记录后，我试图更新用户提供帐号的给定记录（客户端）的一个字段（余额）。更新发生在文件中，但没有正确完成。输出显示更新影响了其他数据，并且还带有垃圾。我无法弄清楚问题的原因。您的帮助将不胜感激。我正在使用 Dev-C++。输出后面的代码如下。

```
#include <iostream>   //   cin, cout
#include <iomanip>
#include <fstream>
#include <conio.h>
using namespace std;

#define SIZE 10

struct     client        // Client record
{   int    account;      // from 1 to SIZE
    char   name[20];
    double balance;
};

void show_file(char filename[])  // Sequential display of all records
{
   client c;
   int n=0;
   void *ptr;

   ifstream IS(filename, ios::in);  // Open for sequential read
   if(!IS) {cerr << filename<< " file open error." << endl; exit(1);}

   cout << "\n\nSHOW_FILE: The contents of file " << filename;

   while(ptr=IS.read((char *)&c, sizeof(c)))
   {
     cout <<'\n'<< setw(3)<< ++n << setw(6) << c.account <<setw(20)
       << c.name << setw(10) << c.balance;
   }

   IS.close();
}

int main(void)
{  client c;
   void *ptr; 
   int n=0, acc,number_of_records=SIZE, field1; 
   double new_balance, field3;
   char *fname = "credit.dat"; char field2;

   cout << "\nMAKE_FILE: Creating a blank relative file " << fname
     << " containing " << number_of_records << " records.";
   fstream iof(fname, ios:: in | ios::out | ios::binary );
   if(!iof) {cerr << "File open error." << endl; exit(1);}

   client blank={0, "", 0.0}; // Create an empty client record
   while(number_of_records--)
   iof.write((char *)&blank, sizeof(blank));
   cout << "\n\n\nFile has been succesfully created!";  //file is still empty, no records yet.

   cout<<"\n\nenter the 10 customers into the file: "<< fname<<endl<<endl;

   cout << "\nAccount[1.." << SIZE 
     << "], Name, Balance  (0 0 0 to exit)= ";
   cin >> c.account >> c.name >> c.balance;

   while(0 < c.account) // && c.account <= maxrec)
   {
     iof.seekp((c.account-1) * sizeof(client));  // position the pointer
     iof.write((char *)&c, sizeof(c));
     cout << "Account[1.."<< SIZE 
       << "], Name, Balance  (0 0 0 to exit)= ";
     cin >> c.account >> c.name >> c.balance;
  }

  cout << "\n\nAccount number to apply changes on balance(0 to exit) = "; 
  cin >> acc;
  /// while(0 < acc && acc <= SIZE)
  if (0<acc && acc <= SIZE)
  {
    //cout << "\nPositioning at " << (acc-1) * sizeof(client)<< endl;
    iof.seekg((acc-1) * sizeof(client));  // position the pointer
    iof.read((char *)&c, sizeof(c));
    if(c.account) 
     cout <<'\n'<< setw(6) << c.account <<setw(20)
                     << c.name << setw(10) << c.balance;

    new_balance=c.balance+0.05*(c.balance);  //calculation of the new balance by adding interests of 5%

    cout<<"\n\n\nnew balance after the 5% interest:"<<new_balance<<endl;
    c.balance=new_balance;
    cout<<"current new balance:  "<<c.balance<<endl;  //just to check if it will be displayed

    //WHERE THE PROBLEM IS...
    iof.seekg(0, ios::cur); //trying to stay in the current position to apply 
                          //change on current balance
    iof<<c.account << c.name << c.balance;  //trying to update record with new balance

  }
  else cout << "\nEmpty record";

  iof.close();
  cout<<"\n\nFILE after THE UPDATE: "<<endl;
  show_file (fname);

   cout << "\n\n"; 
   system("pause");
   return 0;

}

*********************output**************************

MAKE_FILE: Creating a blank relative file credit.dat containing 10 records.

File has been succesfully created!

enter the 10 customers into the file: credit.dat

Account[1..10], Name, Balance  (0 0 0 to exit)= 1 aaaa 2399
Account[1..10], Name, Balance  (0 0 0 to exit)= 2 bbbb 4000
Account[1..10], Name, Balance  (0 0 0 to exit)= 3 cccc 50
Account[1..10], Name, Balance  (0 0 0 to exit)= 4 dddd 5000
Account[1..10], Name, Balance  (0 0 0 to exit)= 5 eeee 180
Account[1..10], Name, Balance  (0 0 0 to exit)= 0 0 0

Account number to apply changes on balance(0 to exit) = 3

 3                cccc        50

new balance after the 5% interest:52.5
current new balance:  52.5

FILE after THE UPDATE:

SHOW_FILE: The contents of file credit.dat
  1     1                aaaa      2399
  2     2                bbbb      4000
  3     3                cccc        50
  41667457843             c52.5♫'      5000
  5     5                eeee       180
  6     0                             0
  7     0                             0
  8     0                             0
  9     0                             0
 10     0                             0

Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:45:33.540

哈哈哈，我们一定是同班的……

您使用 seekg() 定位要读取的指针，并使用 seekp() 定位要写入的指针。

就像您之前在文件中所做的那样：

iof.seekp((c.account-1) * sizeof(client)); // 定位指针 iof.write((char *)&c, sizeof(c));

seekg = 寻求得到 seekp = 寻求放 - requ

祝你好运！

# algorithm - DIjkstra 和 BellmanFord 算法的区别

> ID：10549849
> 
> 赞同：14
> 
> 时间：2012-05-11T10:42:16.683
> 
> 标签：algorithm

我正在写关于最短路径算法的论文。而且我不明白一件事...![在此处输入图像描述](../Images/c8ac76a12c6b8e5c213b9f11dc20279b.png)

我已经对 dijkstras 算法进行了可视化。1) 正确吗？还是我做错了什么？2) Bellman-Ford 算法的外观如何？就我寻找差异而言，我发现“Bellman-ford：基本思想与 Dijkstra 的非常相似，但不是选择最短距离的相邻边，而是选择所有相邻边。” 但 dijkstra 也会检查所有顶点和所有边，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T11:46:48.157

dijkstra 假设路径的成本是单调增加的。再加上有序搜索（使用优先级队列），当你第一次到达一个节点时，你是通过最短路径到达的。

这不适用于负权重。如果您使用带负权重的 dijkstra，那么您可能会发现后面的路径比前面的路径更好（因为负权重在后面的步骤中改进了路径）。

所以在贝尔曼福特，当你到达一个节点时，你会测试新路径是否更短。相反，使用 dijkstra，您可以剔除节点

在某些（大多数）情况下，dijkstra 不会探索所有完整路径。例如，如果 G 只链接回 C，那么任何通过 G 的路径都会比通过 C 的任何路径的成本更高。bellman-ford 仍然会考虑通过 G 到 F 的所有路径（dijkstra 永远不会考虑那些，因为它们的成本更高通过 C)。如果它不这样做，它就不能保证找到负循环。

这是一个例子：上面从不计算路径AGEF。当您从 G 到达时，E 已被标记为已访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T05:32:04.470

我也有同样的想法

当所有边都具有非负权重时，Dijkstra 算法解决了单源最短路径问题。它是一种贪心算法，类似于 Prim 的算法。算法从源顶点 s 开始，它会生成一棵树 T，它最终跨越从 S 可达的所有顶点。顶点按距离顺序添加到 T，即首先是 S，然后是最接近 S 的顶点，然后是下一个最近的顶点， 等等。

# asp.net-ajax - 该页面正在执行异步回发，但 ScriptManager.SupportsPartialRendering 属性设置为 false

> ID：10549866
> 
> 赞同：5
> 
> 时间：2012-05-11T10:44:09.250
> 
> 标签：asp.net-ajax

如何修复以下异常？

> 该页面正在执行异步回发，但 **ScriptManager.SupportsPartialRendering**属性设置为 false。确保在异步回发期间将该属性设置为 true。

此异常从 `Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T13:53:05.617

我在[这里发现这篇博客文章](http://dev.flauschig.ch/wordpress/?p=271)谈到了类似的问题，并提到了在缓存用户代理时仅尊重 64 个字符的默认设置：

```
<browserCaps userAgentCacheKeyLength="64" /> 
```

这个元素被放置在里面`<system.web>`但可能不存在，因为根据[这个 MSDN library entry](http://msdn.microsoft.com/en-us/library/sk9az15a.aspx) 64 是默认值。

ASP.NET 究竟是如何确定某些浏览器的功能的，我还没有调查过，但可以在备注部分找到一些[提示](http://msdn.microsoft.com/en-us/library/bb343063%28d=lightweight,v=vs.100%29.aspx)。

# dojox.grid - Dojo.toJson() 方法返回“null”字符串

> ID：10549871
> 
> 赞同：2
> 
> 时间：2012-05-11T10:44:27.650
> 
> 标签：dojox.grid, dojox.grid.datagrid, dojo

这里我们使用 dojo.toJson 将 dijit.form.TextBox 转换为 json 格式。没有任何输入，它返回“null”，我们期望它是“”。

源代码如下：

//aspx代码

```
<input id="name" data-dojo-type="dijit.form.TextBox" data-dojo-props="name:'name'" />
<button id="submitButton" data-dojo-type="dijit.form.Button" type="button">
    submit</button> 
```

//js代码

```
define("views/Test", [
    "dojo",
    "dojo/parser",
    "dijit/form/Form",
    "dijit/form/TextBox",
    "dijit/form/Button"
], function () {
    dojo.declare("views.Test", null, {

        onSubmitClick: function () {
            var jsonData = dojo.toJson(dijit.byId("name").get("value")); // here: dijit.byId("name").get("value") is "" and jsonData is ""null""
        },

        startup: function () {
            dojo.connect(dijit.byId("submitButton"), "onClick", this, this.onSubmitClick);
        }
    });
    return views.Test;
}); 
```

以下两者有什么区别吗？因为结果根本不一样

```
dojo.toJson("") // returns """" 
dojo.toJson(dijit.byId("XXX").get("value")) //returns ""null"" 
```

环境信息：IE 8 Dojo 版本：1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:54:54.873

输出不是`""null""`极端的第一个和极端的最后一个引号由`console.log`这些放置`"null"`和`""`

Yes`""`是一个空字符串，它是一个字符串对象，不同于`null`.

# java - 为什么 Python 不能通过子进程执行 java.exe？

> ID：10549872
> 
> 赞同：6
> 
> 时间：2012-05-11T10:44:38.433
> 
> 标签：java, python, windows, subprocess

在将 Java 从 1.6 升级到 1.7 x64（在 Windows 7 上）后，我突然无法再通过 Python 2.7 的`subprocess`模块启动 java.exe。以下脚本曾经可以正常工作：

```
import subprocess
subprocess.check_call([r"C:\Windows\system32\java.exe"]) 
```

现在它像这样失败：

```
Traceback (most recent call last):
  File ".\tst.py", line 2, in <module>
    subprocess.check_call([r"C:\Windows\system32\java.exe"])
  File "C:\Python27\lib\subprocess.py", line 506, in check_call
    retcode = call(*popenargs, **kwargs)
  File "C:\Python27\lib\subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "C:\Python27\lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python27\lib\subprocess.py", line 896, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified 
```

我还确认`C:\Windows\system32\java.exe`确实存在，是一个应用程序，并且可以从命令 shell 执行。

这里出了什么问题？

**编辑：** 我发现我可以`C:\Program Files\Java\jre7\bin\java.exe`从 Python 开始，所以 `C:\Windows\system32\java.exe`一定是一些奇怪的伪快捷方式，尽管从技术上讲是一个 Windows 应用程序。1.7 版一定搞砸了，因为我刚刚确认 1.6 版没问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T20:03:47.627

假设“C:\Windows\System32”中有一个 java.exe 并不是一个特别安全的假设。即使假设系统上有“C:\Windows\System32”也不安全：Windows 可以驻留在计算机上的*任何*固定驱动器上。

但即使有“C:\Windows\System32\java.exe”，这对于 Win64 下的 32 位进程也可能不可见。Windows 以向后兼容的名义在这里做了一些有趣的事情，你可能想看看[http://en.wikipedia.org/wiki/WoW64](http://en.wikipedia.org/wiki/WoW64)。

查找您正在寻找的 Java 版本（可能有很多）可能是一项吃力不讨好的任务。如果您不特别关心您找到的 Java，请尝试 JAVA_HOME 环境变量*。*它并不总是存在，但如果存在，你就完成了，它可能是查找 JVM 的最便携的方式。如果它不存在，那么设置它就不会出错，而且许多 Java 应用程序都可以使用该变量。

再说一次，Java*可能*只是在 PATH 上，在这种情况下，在子进程调用中*删除除*“java”之外的所有内容就可以解决问题。尝试不会有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T12:47:05.920

您可能还想检查 PATH 环境变量是否在 jre 的 bin 路径周围有引号“”。Python 似乎不喜欢它们：

```
 C:\bin>set PATH=C:\Python27;c:\Program Files\Java\jdk1.6.0_35\bin

    C:\bin>python -c "import subprocess; subprocess.Popen(['java', '-version'], stderr=subprocess.PIPE)"

    C:\bin>set PATH=C:\Python27;"c:\Program Files\Java\jdk1.6.0_35\bin"

    C:\bin>python -c "import subprocess; subprocess.Popen(['java', '-version'], stderr=subprocess.PIPE)"
    Traceback (most recent call last):
    [...]
    WindowsError: [Error 2] The system cannot find the file specified

    C:\bin> 
```

# javascript - JQuery On Select 将值更改为变量并重新加载脚本

> ID：10549873
> 
> 赞同：0
> 
> 时间：2012-05-11T10:44:53.177
> 
> 标签：javascript, jquery

是否有可能分配选择的选定值并将其分配给脚本的变量并重新运行脚本？

这是我当前的代码示例：

```
<select onchange="reload_script;">
  <option value="123">Select 123</option>
  <option value="456">Select 456</option>
<select>

<div id="123">
    <a href="http://same.com/index.do?n=152991">link title</a>
    <br/><br/>
    <a href="http://some.com/">Link</a>
</div>
<script language="javascript" type="text/javascript">
var code = '123' // <-- THIS VARIABLE WOULD BE THE VALUE OF THE SELECTED DROPDOWN VALUE
</script> 
```

请参阅： var code = '123' ...。这就是更改选择框时更改的内容...然后我需要重新运行脚本...

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:47:02.423

如果你使用 jQuery，你总是可以绑定[`change`](http://api.jquery.com/change/)事件：

```
var code = "123";
$("#mySelect").on("change", function() {
    code = this.value;
    reload_script();
}); 
```

否则，在纯 JavaScript 中，它可能如下所示：

```
var code = "123";
document.getElementById("mySelect").onchange = function() {
    code = this.value;
    reload_script();
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:48:11.967

试试这个

```
<select onchange="reload_script();">
  <option value="123">Select 123</option>
  <option value="456">Select 456</option>
<select>

<div id="123">
    <a href="http://same.com/index.do?n=152991">link title</a>
    <br/><br/>
    <a href="http://some.com/">Link</a>
</div>
<script language="javascript" type="text/javascript">
var code = '123' // <-- THIS VARIABLE WOULD BE THE VALUE OF THE SELECTED DROPDOWN VALUE
function script_to_run()
{
//do code here
}

// Call the script one time on page load (only if you need it on page load)
script_to_run();

function reload_script()
{
  script_to_run();//run again
}

</script> 
```

# iphone - URL 连接：以下有什么区别？

> ID：10549881
> 
> 赞同：0
> 
> 时间：2012-05-11T10:45:21.380
> 
> 标签：iphone, objective-c, ios

我需要知道以下两种url连接方式的区别？这两种方法的意义是什么？在什么情况下首选哪种方法？

方法一：file.h #import

```
#define kPostURL @"http://localhost/php/register.php"
#define kemail @"email"
#define kpassword @"password"

@interface signup : UIViewController 
{
...
...
NSURLConnection *postConnection;
}
@property ...
...
@end

file.m

NSMutableDictionary *input=[[NSMutableDictionary alloc]init];
...
...
...
NSMutableString *postString = [NSMutableString stringWithString:kPostURL];

[postString appendString: [NSString stringWithFormat:@"?%@=%@", kemail, [input objectForKey:@"email"] ]];
[postString appendString: [NSString stringWithFormat:@"&%@=%@", kpassword, [input objectForKey:@"password"] ]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];

[request setHTTPMethod:@"POST"];

postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
NSLog(@"postconnection: %@", postConnection);

NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: postString ]];    
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

NSLog(@"serverOutput = %@", serverOutput); 
```

方法二：

```
NSString *post =[NSString stringWithFormat:@"email=%@&password=%@",[input objectForKey:@"email"], [input objectForKey:@"password"]];

NSString *hostStr = @"http://localhost/frissbee_peeyush/php/login.php?";
hostStr = [hostStr stringByAppendingString:post];
NSLog(@"HostStr %@",hostStr);
NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
NSLog(@"serverOutput %@", serverOutput); 
```

如果我只需要使用标头信息连接到 url 怎么办？

问题：对于登录和注册，这些方法非常好，但是每当我想插入任何包含特殊字符（如@、/、_ 等）的字符串时，它都无法执行任何操作。

请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:20:50.040

即使您实现的方法 1 也不完整，因为 NSUrlConnection 有许多委托，应该实现这些委托来获取数据、处理错误、代理、身份验证等。最好使用第一种方法，但不要以您使用的方式使用.NSUrlConnection 在异步行为中，因此您不必等到加载 url。

[NSUrlConnection 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

第二种方法只是在 NSData 中遇到 NSUrl 参数时将 url 作为 sson 命中。此外，您对 Web 服务交互没有太多控制权。

[NSUrl 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)

要获得 NSUrlConnection 的实现，您可以通过

[NSUrlConnection 教程](http://mobileorchard.com/tutorial-json-over-http-on-the-iphone/)

```
Url With Special Characters:-
[NSURL URLWithString:[string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

# product - Prestashop：如何在发票上显示产品折扣

> ID：10549882
> 
> 赞同：1
> 
> 时间：2012-05-11T10:45:23.420
> 
> 标签：product, prestashop, invoice, discount

我希望产品和团体折扣显示在我的发票上。我已将发票修改为如下所示：

参考 | 说明 | 数量 | 单价 | 折扣 | 总计 |

所以我需要在与产品相同的行中显示与产品相关的折扣。有什么办法可以做到这一点？我在谷歌和论坛上搜索过，但没有找到答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-29T20:03:59.897

而在 2016 年仍然没有答案。我只是在为此苦苦挣扎，过了一段时间，成功了。我不知道哪个 Prestashop 是在 2012 年发布的，但是我可以提供一些关于今天 1.6.1.9（我当前版本）的最新版本的 prestashop 的提示。对于任何试图在 prestashop 中修改发票的人，您会在文件夹 pdf 中找到模板文件，文件名为 invoice.product-tab.tpl，用于编辑和添加与产品相关的字段（价格、税收、折扣等）。你需要知道的是：

```
$order_detail.product_name -> returns the name of the product
$order_detail.unit_price_tax_excl_before_specific_price -> returns the price of product without tax and before discount
$order_detail.unit_price_tax_excl_including_ecotax -> returns product price without tax and included eco tax (if there is 1)
$order_detail.order_detail_tax_label -> return the tax percentage
$order_detail.product_quantity -> returns the quantity of orderd product
$order_detail.total_price_tax_incl_including_ecotax - > returns the total amout that is product price + tax 
```

使用此代码，您可以计算百分比或现金折扣，您可以在 teplate 中使用它。.tpl 中几乎没有其他代码，但这不是这个问题的一部分。

希望这会帮助任何人。

# java - ZipInputStream 在解压前检查 zip 文件是否有效

> ID：10549884
> 
> 赞同：2
> 
> 时间：2012-05-11T10:45:36.290
> 
> 标签：java, android, zip, unzip, zipinputstream

我们如何在解压之前检查 zip 文件是否损坏或有效的 Zip 文件

我的代码`

```
import java.io.IOException;
import java.io.OutputStream;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;

public void unzip() {
        FileInputStream fin = null;
        ZipInputStream zin = null;
        OutputStream fout = null;

    File outputDir = new File(_location);
    File tmp = null;

    try {
        fin = new FileInputStream(_zipFile);
        zin = new ZipInputStream(fin);
        ZipEntry ze = null;
        while ((ze = zin.getNextEntry()) != null) {
            Log.d("Decompress", "Unzipping " + ze.getName());

            if (ze.isDirectory()) {
                dirChecker(ze.getName());
            } else {
                tmp = File.createTempFile( "decomp", ".tmp", outputDir );
                fout = new BufferedOutputStream(new FileOutputStream(tmp));
                DownloadFile.copyStream( zin, fout, _buffer, BUFFER_SIZE );
                zin.closeEntry();
                fout.close();
                fout = null;
                tmp.renameTo( new File(_location + ze.getName()) );
                tmp = null; 
            }
        }
        zin.close();
        zin = null;
    } catch (IOException e) {
        throw new RuntimeException(e);
    } finally {
        if ( tmp != null  ) { try { tmp.delete();     } catch (Exception ignore) {;} }
        if ( fout != null ) { try { fout.close();     } catch (Exception ignore) {;} }
        if ( zin != null  ) { try { zin.closeEntry(); } catch (Exception ignore) {;} }
        if ( fin != null  ) { try { fin.close();      } catch (Exception ignore) {;} }
    }
} 
```

`

这适用于有效的 zipfile，但无效的 zipfile 它不会抛出任何异常，不会产生任何东西，但我需要在解压缩之前确认 zip 文件的有效性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:02:34.420

只要 Zip 文件存在其 zip 条目目录，它就有效。如果您使用 zip 命令，只要目录存在，它将允许您浏览。用于测试的参数实际上执行提取和 CRC 校验。

您可以做的是使用 Java 的 temp dir 创建工具提取临时文件夹并进行 CRC 检查。然后，如果一切都成功，则通过将文件从临时目录复制到最终目标来提交提取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:51:59.403

我认为检查 zip 文件是否已损坏几乎没有用，原因有两个：

1.  一些 zip 文件包含的字节数不仅仅是 zip 部分。例如，自解压档案有一个可执行部分，但它们仍然是有效的 zip。
2.  该文件可能被损坏而不改变其大小。

因此，我建议计算 CRC 以获得有保证的检查损坏的方法。

# c++ - 为什么指向基类的指针优于引用？

> ID：10549886
> 
> 赞同：8
> 
> 时间：2012-05-11T10:45:47.090
> 
> 标签：c++, pointers, reference, polymorphism

通常，在 C++ 中，将参数传递给多态对象的函数的代码使用指向它的指针似乎更可取：

```
class Base {};
class DerivedA : public Base {};
class DerivedB : public Base {};

void OperateOnObject(Base* obj) {};

vector<Base*> objects;
objects.push_back(new DerivedA());
objects.push_back(new DerivedB());

for (size_t i=0; i<objects.size(); i++) {
  OperateOnObject(objects[i]);
} 
```

为什么`OperateOnObject()`通常写它来获取指针`Base`而不是引用？切片是否存在潜在问题？（例如 vtable 丢失了）

我已经看到[对](https://stackoverflow.com/questions/9425822/why-use-base-class-pointers-for-derived-classes)类似问题的回答，但它似乎并没有解决同样的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T10:54:22.990

切片当然没有问题——你的类不需要 vtable，因为它们没有虚函数，但即使它们确实有它们，传递引用也不会复制对象，因此不会切片任何东西。

您可以像通过指针一样通过引用进行虚拟调用。据我所知，没有实际原因，只是为了风格。

也许这与多态对象通常由指针*创建*`new`的事实有关，当然必须通过指针（或智能指针）存储在容器中，因为您不能拥有引用容器。然后总是通过指针来操作它们似乎更一致。

此外，如果您想`OperateOnObject`在标准算法中使用`for_each`，那么它必须接受容器的元素类型，即指针，或者您必须将其包装在执行取消引用的函数适配器中。标准 C++ 没有那个适配器，所以在它的基础上建立你的风格是一个麻烦的世界。

相关：看看如果`OperateOnObject`需要一个引用会发生什么，并且你使用迭代器迭代你的向量：

```
for (vector<Base*>::iterator i = objects.begin(); i != objects.end(); ++i) {
    OperateOnObject(**i);
} 
```

第 20 次双重间接使您烦恼或困惑时，您将更改`OperateOnObject`;-)的签名

顺便说一句，一些样式指南警告不要传递非 const 引用，无论该类型是否是多态基类，因为你不能立即区分传递引用和传递值之间的区别。 '正在调用站点读取代码。因此，无论如何，他们更愿意`OperateOnObject`接受指针。

就我个人而言，我认为这个论点有点弱——一个函数的名称应该大致告诉你它做了什么，特别是像这样的语句`ChangeTheObject(my_object);`并不那么微妙地暗示我，因为它没有使用任何返回值，它必须改变它争论。但我承认，如果你正确地遵循一种风格，那么清楚且一致地将突变器与纯函数区分开来会有一些好处。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T10:55:13.497

引用不会出现切片问题 - 在这方面，它们与指针一样好。没有“硬”的理由偏爱指针，除非您希望`NULL`您的代码可以使用的语义（即传递“无”的能力，如果您使用引用则不存在）。

我认为指针类型通常用作多态函数的参数以匹配集合的语义：由于您无法进行 a `vector`of 引用，因此您的代码最终将不得不取消引用从集合中获得的指针，然后再将它们传递给函数。这可能很烦人。

# android - android如何在使用多个url连接到网络后不使用cookies保持会话打开？

> ID：10549900
> 
> 赞同：0
> 
> 时间：2012-05-11T10:46:55.983
> 
> 标签：android, session, httpurlconnection

我正在编写一个需要登录到 Web 服务器的 android 应用程序，稍后在应用程序中，当用户请求查看投资组合信息时，服务器将检查用户会话是否仍然打开，否则用户将被视为未知并将被重定向到登录页面。

我设法通过 HttpURLConnection 使用标题字段登录，并成功读取响应；但是当尝试重新连接到服务器以读取投资组合时，用户总是被认为是未知的；经过长时间的试验和在网上搜索后，我发现登录连接会话在检索到响应后自动关闭，我尝试了一些代码，假设服务器通过 cookie 跟踪登录的用户，但它失败了，因为（后来我发现out）服务器不使用cookies来跟踪登录用户！我需要帮助来解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:08:24.763

在尝试了各种方法后，我发现唯一的方法是定义一个全局 HttpClient 并使其保持打开状态，然后将其与不同的本地 HttpPost 一起使用来更改我需要查看的页面，同时保持相同的连接会话打开！

# jakarta-ee - Java EE 中使用异步方法的事务管理

> ID：10549901
> 
> 赞同：3
> 
> 时间：2012-05-11T10:46:59.723
> 
> 标签：jakarta-ee, asynchronous, transactions

我们在 StatelessSessionBean 中有一个性能不佳的业务方法。为了提高性能，我们希望将此业务方法拆分为几个异步方法调用。

问题是这些异步方法必须在同一个事务中运行（它们必须使用同一个 JPA 实体管理器）。据我了解 Java EE 规范，这是不可能使用容器管理事务的。是否可以使用 bean 管理的事务或其他机制来实现这一要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:52:53.340

您不能这样做，无论是使用标准 EJB 还是使用任何扩展。事务与数据库连接相关联，这意味着您必须在多个线程之间共享该连接。这是不安全的。

此外，由于某种原因，异步代码可能会以较大的延迟执行，例如在高 CPU 负载下。这将使您的交易保持不必要的长时间开放。

你有什么选择？首先，并行化 SQL 查询（尤其是写入 - 您需要将它们放在一个事务中）不会给您带来太多好处。数据库通常受 I/O 限制。仅当您有 CPU 密集型任务或正在等待某些事情时，并行化才值得您花时间。

在这两种情况下，重新设计您的代码以在多个线程中执行并行代码，并且只有一个编写器线程来处理数据库和事务。例如，如果您需要调用 10 个服务器，收集响应并存储它们 - 生成 10 个线程/使用一个池，等待结果并将它们全部存储在一个线程中。

# 也可以看看

*   [TransactionScope 不能与并行扩展一起使用？](https://stackoverflow.com/questions/8188009)

# android - Android 位图/画布放大或缩小

> ID：10549903
> 
> 赞同：0
> 
> 时间：2012-05-11T10:47:10.147
> 
> 标签：android, canvas, bitmap, zooming

我从网络接收样本（浮点数组）并将它们绘制为 SurfaceView 中的曲线。样本会定期更新，因此曲线是动态的。在我的程序中，我创建了一个将绘制曲线的位图，如下所示：

```
Bitmap bmp = Bitmap.createBitmap(width, height, Config.ARGB_4444);
Canvas canvas = new Canvas(bmp);
drawCurve(canvas);

void drawCurve(Canvas canvas, float[] buffer) {
      ...
      canvas.drawLine(x1, buffer[i], x2, buffer[i+1], paint);
      ...
} 
```

...

```
private class RenderThread extends Thread {
    public void run() {
        c = mHolder.lockCanvas(null);
        c.drawBitmap(bmp, 0, 0, null);
        mHolder.unlockCanvasAndPost(c);
        ...
    }
} 
```

我想支持曲线可以放大和缩小。为了有效地绘制曲线，**drawCurve**方法只是更新新样本，即擦除旧区域，并在该区域绘制新样本。我能怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:13:14.330

它可以帮助你............来自：[http ://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html](http://android-er.blogspot.in/2010/07/skew-bitmap-image-using-matrix.html)

参见 drawMatrix 函数：

```
 matrix.postScale(curScale, curScale);
   matrix.postRotate(curRotate);
   matrix.postSkew(curSkewX, curSkewY);

   Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0, bmpWidth, bmpHeight, matrix, true); 
```

# php - 如何在循环中获得价值？

> ID：10549911
> 
> 赞同：1
> 
> 时间：2012-05-11T10:47:56.997
> 
> 标签：php, javascript, popup

```
<?php foreach ($data['ACTION_DATA']['messages'] as $msg) { ?>
<form>
  <table>
   <tr><td>Name:</td><td id="name"><?php echo $msg['name']; ?> </td></tr>
   <tr><td>Telephone Number:</td><td id="tp"><?php echo $msg['tp_number']; ?></td></tr>
   <tr><td>ID:</td><td id="id"><?php echo $msg['id']; ?> </td></tr>
   <tr><td colspan="2"><input type="button" id="sub_button" onclick="show_popup()" value="View"></td></tr>
  </table>
</form>
<?php }; ?> 
```

我使用上面的代码示例来显示我的页面内容。我想根据实例块获取值。并在单击“查看”按钮时在弹出窗口中显示它们而不重新加载页面。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:01:09.250

我会添加另一个输入，隐藏类型以保存条目总数。通过为每个名称、电话和 id 输入添加一个索引号，我会让每个名称、电话和 id 输入具有不同的 id，例如：

```
<?php 
$index = 0
foreach ($data['ACTION_DATA']['messages'] as $msg) { ?>
<form>
  <table>
   <tr><td>Name:</td><td id="name<?php echo $index;?>"><?php echo $msg['name']; ?> </td></tr>
   ... same for the others ...
   <?php // increment index 
    $index++;
    ?>
   .... 
```

然后使用 for 循环（您可以从隐藏的输入字段中获取条目总数）浏览所有值。

如果您只想查看其中一个，请将索引号作为参数发送给 show_popup() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:04:13.873

你可以使用**array.count**函数吗？

```
$total_tables = count($data['ACTION_DATA']['messages']); 
```

# c# - C# - 将十进制转换为 int32

> ID：10549912
> 
> 赞同：12
> 
> 时间：2012-05-11T10:47:58.393
> 
> 标签：c#, .net, math, rounding

我有以下代码：

```
int a = Convert.ToInt32(4.5m);
int b = Convert.ToInt32(5.5m);

Console.WriteLine(a);
Console.WriteLine(b); 
```

这是输出：

```
4
6 
```

为什么`Convert.ToInt32`将十进制值四舍五入到最接近的偶数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T10:49:55.063

```
int a = (int)Math.Floor(4.5m);
int b = (int)Math.Floor(5.5m); 
```

[**MSDN**：](http://msdn.microsoft.com/en-us/library/k7ycc7xh)

或者：

```
int a = decimal.ToInt32(4.5m);
int b = decimal.ToInt32(4.5m) 
```

* * *

您也可以只使用显式 int 强制转换运算符：

```
int a = (int) 4.5m;
int b = (int) 5.5m; 
```

但请从[**MSDN**](http://msdn.microsoft.com/en-us/library/zf02hx8s.aspx)阅读此说明：

> 此运算符支持将 Decimal 显式转换为 Int32。这种显式转换的语法是依赖于语言的，各个语言编译器可以提供不同的实现并返回不同的结果。该示例说明了使用 C# 和 Visual Basic 将 Decimal 值显式转换为 Int32 值时的不同返回值。要执行独立于语言的转换，可以调用 ToInt32 或 Convert.ToInt32(Decimal) 方法。

* * *

```
Math.Floor Method (Decimal) 
```

> 返回小于或等于指定十进制数的最大整数。

请注意，`int`如果值大于`int.MaxValue`您得到的值，则十进制大于`OverflowException`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-11T10:52:58.497

Convert 使用四舍五入到最接近的值，或银行家的四舍五入：

> 此方法的行为遵循 IEEE 标准 754 第 4 节。这种四舍五入有时称为四舍五入或银行家四舍五入。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。
> 
> 要控制 Round 方法使用的舍入类型，请调用 Math.Round(Double, MidpointRounding) 重载。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T10:56:26.870

Math.Round() 允许您选择

```
Console.WriteLine(Math.Round(4.5m, 0, MidpointRounding.ToEven));  //4
Console.WriteLine(Math.Round(5.5m, 0, MidpointRounding.ToEven));  //6

Console.WriteLine(Math.Round(4.5m, 0, MidpointRounding.AwayFromZero));  //5
Console.WriteLine(Math.Round(5.5m, 0, MidpointRounding.AwayFromZero));  //6 
```

（而且，正如您猜到的那样，默认值为`ToEven`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T10:51:19.657

这样做是因为[它是这样定义的](http://msdn.microsoft.com/en-us/library/93kx4xke)（原因见下文）：

> 返回： 值，四舍五入到最接近的 32 位有符号整数。如果 value 在两个整数的中间，则返回偶数；即4.5转换为4，5.5转换为6。

`Math.Floor`如果你想要不同的结果，你必须使用类似的东西。

做同样事情的文档[`Math.Round`](http://msdn.microsoft.com/en-us/library/3s2d3xkk)说明了原因：

> 此方法的行为遵循 IEEE 标准 754 第 4 节。这种四舍五入有时称为四舍五入或银行家四舍五入。它可以最大限度地减少因在单个方向上持续舍入中点值而导致的舍入误差。
> 
> 要控制 Round(Decimal) 方法使用的舍入类型，请调用 Math.Round(Decimal, MidpointRounding) 重载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T10:50:35.697

昨天我读到一些东西，当四舍五入时，它会四舍五入到最接近的偶数，这叫做银行家四舍五入。你必须告诉它你想如何四舍五入

编辑：您要求解释为什么它会四舍五入到最接近的偶数。

假设你有 10 个数字（这是一个极端情况

1.5、2.5、3.5、4.5、5.5、6.5、7.5、8.5、9.5、10.5

总和 = 60

如果你先把它们四舍五入

总和 = 65 因为他们都会四舍五入

如果你们银行家围绕他们

总和 = 60

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T10:54:08.910

来自[http://msdn.microsoft.com/en-us/library/93kx4xke](http://msdn.microsoft.com/en-us/library/93kx4xke)

> 返回值
> 
> 类型：System.Int32 值，四舍五入到最接近的 32 位有符号整数。如果 value 在两个整数的中间，则返回偶数；即4.5转换为4，5.5转换为6。

# mysql - SELECT 在 MySQL 触发器中使用声明的变量不返回任何行

> ID：10549913
> 
> 赞同：1
> 
> 时间：2012-05-11T10:48:01.223
> 
> 标签：mysql, triggers, insert, where

一旦在“工作流”表中创建了行，我正在尝试执行 INSERT...SELECT 以在“任务”表中创建行。（工作流创建中使用的 process_index 在“process_tasks”表中查找所需的任务，然后在任务表中创建它们）。

然而，问题在于，在工作流表上使用 process_index 为“process_one”执行插入后，触发器中的 SELECT 找不到任何行。我认为@process_id 设置不正确，但是通过我在触发器中注释掉的替代插入，它表明@process_index 设置正确。任何人都可以建议吗？

这是一些简化的代码来演示该问题：

```
DROP TABLE IF EXISTS workflow;
CREATE TABLE workflow (
  id INT(10) PRIMARY KEY AUTO_INCREMENT,
  process_index VARCHAR(12)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS tasks;
CREATE TABLE tasks (
  id INT(10) PRIMARY KEY AUTO_INCREMENT,
  process_index_used VARCHAR(12),
  target_field VARCHAR(12)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS process_tasks;
CREATE TABLE process_tasks (
  id INT(10) PRIMARY KEY AUTO_INCREMENT,
  process_index VARCHAR(12),
  source_field VARCHAR(12)
) ENGINE=INNODB DEFAULT CHARSET=utf8;

INSERT INTO process_tasks SET process_index = 'process_one', source_field = 'alpha';
INSERT INTO process_tasks SET process_index = 'process_one', source_field = 'beta';

DROP TRIGGER IF EXISTS workflow_tasks;
DELIMITER //
CREATE TRIGGER workflow_tasks AFTER INSERT ON workflow
FOR EACH ROW BEGIN
  DECLARE process_index VARCHAR(12);
  SET @process_index = NEW.process_index;
--  INSERT INTO tasks (process_index_used) VALUES (@process_index);
  INSERT INTO tasks (target_field) SELECT source_field FROM process_tasks WHERE process_index = @process_index;
END//
DELIMITER ; 
```

# matlab - 如何在 Matlab 中同时使用多个 USB 网络摄像头？

> ID：10549915
> 
> 赞同：1
> 
> 时间：2012-05-11T10:48:10.537
> 
> 标签：matlab, webcam

我想用两个 USB 网络摄像头（Philips SPC 900NC）拍摄现场视频，但我发现它们不能在我的笔记本电脑上同时工作。两个 USB 网络摄像头中的任何一个都可以单独工作，也可以与另一个网络摄像头（最初安装在我的笔记本电脑上）一起工作。

当我使用 simulink 块“来自视频设备”时，Matlab 给出了错误消息“多个 VIDEOINPUT 对象无法同时访问同一设备。”。然后我用命令“imaqhwinfo”检查了视频输入设备，只能检测到一个 USB 飞利浦网络摄像头。

我想知道，

1.  这种情况的原因是什么？是因为硬件限制（USB 总线带宽）还是 matlab 视频对象不支持相同的多个视频设备？

2.  这是什么解决方案？谁能给我一些建议？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-20T21:41:23.977

您可能对此链接感兴趣：

[http://opencv.willowgarage.com/wiki/faq#How_to_use_2_cameras_.28multiple_cameras.29_with_cvCam_library](http://opencv.willowgarage.com/wiki/faq#How_to_use_2_cameras_.28multiple_cameras.29_with_cvCam_library)

其中包含：

首先，初始化 cvcam 库并通过以下方式获取凸轮的数量：

```
int ncams = cvcamGetCamerasCount( );    //returns the number of available cameras in the system 
```

显示对话框以选择正在使用的相机

```
int* out; int nselected = cvcamSelectCamera(&out); 
```

获取选定的凸轮并启用它们。

```
int cam1 = out[0];
int cam2 = out[1];

cvcamSetProperty(cam1, CVCAM_PROP_ENABLE, CVCAMTRUE);
cvcamSetProperty(cam1, CVCAM_PROP_RENDER, CVCAMTRUE);  //We'll render stream from this source
cvNamedWindow("Cam1", 1);
cvcamWindow MyWin1 = (cvcamWindow)cvGetWindowHandle("Cam1");
cvcamSetProperty(cam1, CVCAM_PROP_WINDOW, &MyWin1);   // Selects a window for  video rendering
//Same code for camera 2
cvcamSetProperty(cam2, CVCAM_PROP_ENABLE, CVCAMTRUE);
cvcamSetProperty(cam2, CVCAM_PROP_RENDER, CVCAMTRUE);
cvNamedWindow("Cam2", 1);
cvcamWindow MyWin2 = (cvcamWindow)cvGetWindowHandle("Cam2");
cvcamSetProperty(cam2, CVCAM_PROP_WINDOW, &MyWin1);

//If you want to open the property dialog for setting the video format parameters, uncomment this line
//cvcamGetProperty(cam1, CVCAM_VIDEOFORMAT, NULL);
//cvcamGetProperty(cam2, CVCAM_VIDEOFORMAT, NULL); 
```

启用立体模式（2个摄像头同时工作）

```
cvcamSetProperty(cam1, CVCAM_STEREO_CALLBACK , stereocallback); //stereocallback is the function running to process every frames

cvcamInit();
cvcamStart();

//Your app is working
while (1)
{
     int key = cvWaitKey(5);
     if (key == 27) break;
}
cvcamStop( );
cvcamExit( ); 
```

在上述函数之外定义立体回调函数。

```
void stereocallback(IplImage* image1, IplImage* image2) {

//Process 2 images here
} 
```

# windows - Windows 挂钩只被调用一次

> ID：10549917
> 
> 赞同：1
> 
> 时间：2012-05-11T10:48:17.257
> 
> 标签：windows, qt, dll, hook

下午好。我正在写一个全局鼠标钩子。除了只为第一个鼠标事件调用钩子之外，一切似乎都工作得很好。一些代码：

```
// Dll defined function
    extern "C" Q_DECL_EXPORT LRESULT MouseProc(int code, WPARAM wParam, LPARAM lParam)
    {
        qDebug() << "MouseProc";
        return TRUE;
    }

// Application code
    ...
        hLib = LoadLibrary(TEXT("ServerHook.dll"));
        HOOKPROC hookAddr = (HOOKPROC)GetProcAddress(hLib, "MouseProc");
        if (!hookAddr) {
            qDebug() << "Invalid hook proc " << GetLastError();
        }
        if ((WinInputHook::hookHandle = SetWindowsHookEx(
                    WH_MOUSE, hookAddr, hLib, 0))
                    == NULL) {
            qDebug() << "Invalid hook handle " << GetLastError();
        }
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:19:07.403

您正在安装的挂钩（WH_KEYBOARD）[“安装一个监控击键消息的挂钩程序”而不是鼠标](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

# php - preg 替换管道的模式，后跟任何字符

> ID：10549919
> 
> 赞同：0
> 
> 时间：2012-05-11T10:48:22.337
> 
> 标签：php, regex

我有一个带有管道的字符串 | 在里面。例如：

`$string = 'hello | hello <htmltags> etc|Any character';`

不，我想做的是删除最后一个管道，然后是任何字符。这样我的结果就会在 preg_replace 之后出现。

```
$replaced_string = 'hello | hello <htmltags> etc'; 
```

你能帮我吗，我应该使用什么正则表达式模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:51:12.750

那么你应该替换这个

```
\|[^|]*$ 
```

用空字符串

`\|`匹配一个`|`

`[^|]*$`匹配 0 个或多个`|`直到字符串结尾的字符（因为`$`锚点）

在php中它看起来像

```
preg_replace('/\|[^|]*$/', '', $string); 
```

正则表达式`/`周围是正则*表达式分隔符*

[每个程序员都应该知道的关于正则表达式的知识](http://blog.xisb.de/?p=4)
[免责声明：我自己的博客]

# liferay - Liferay 中的会话管理

> ID：10549921
> 
> 赞同：0
> 
> 时间：2012-05-11T10:48:39.083
> 
> 标签：liferay, liferay-6

我如何在 Liferay 中自定义会话？欢迎提供示例代码，因为它会更有帮助，我对 Liferay 还很陌生？更具体地说，我将解释我所做的。使用自定义 JSP 挂钩，我已经覆盖了 $PORTAL_ROOT_HOME/html/portlet/login login.jsp 并创建了我自己的 jsp 页面，还覆盖了 LoginAction 类。我的 login.jsp 页面如下所示：

```
<aui:form action="" method="post">
        <table>
            <tr>
                <td>Username :</td>
                <td><input name="login" size=15 type="text" /></td>
            </tr>
            <tr>
                <td>Password :</td>
                <td><input name="password" size=15 type="password" /></td>
            </tr>
        </table>
        <aui:button type="submit" value="sign-in"/>
</aui:form> 
```

现在请在单击提交按钮时告诉我如何在 LoginAction.java 中获取登录值，从而将值设置为会话。这就是我所说的定制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:27:32.670

您可以使用以下代码获取登录值：

```
 String login = ParamUtil.getString(request, "login");
    String password = ParamUtil.getString(request, "password"); 
```

要为会话设置一些值，请使用：

```
 HttpSession session = request.getSession();
    session.setAttribute("parm", "somevalue"); 
```

BR，保罗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:35:31.817

您应该从一开始就复制了原始 login.jsp 文件。从您的代码片段的外观来看，您忘记将操作设置为您的 loginAction。这可以通过以下方式完成：

```
<portlet:actionURL secure="<%= PropsValues.COMPANY_SECURITY_AUTH_REQUIRES_HTTPS || request.isSecure() %>" var="loginURL">
            <portlet:param name="saveLastPath" value="0" />
            <portlet:param name="struts_action" value="/login/login" />
            <portlet:param name="doActionAfterLogin" value="<%= portletName.equals(PortletKeys.FAST_LOGIN) ? Boolean.TRUE.toString() : Boolean.FALSE.toString() %>" />
        </portlet:actionURL>

<aui:form action="<%= loginURL %>" method="post">
        <table>
            <tr>
                <td>Username :</td>
                <td><aui:input name="login" size=15 type="text" /></td>
            </tr>
            <tr>
                <td>Password :</td>
                <td><aui:input name="password" size=15 type="password" /></td>
            </tr>
        </table>
        <aui:button type="submit" value="sign-in"/>
</aui:form> 
```

**请注意，最好将原始 $PORTAL_ROOT_HOME/html/portlet/login/login.jsp 复制到您的挂钩中。然后根据需要进行修改。**

如果提供的片段集是你所拥有的，你的 Hook 将破坏/删除现有功能的分配。

要从操作中接收参数，您可以使用 Pauls answer。

# makefile - 将选项传递给 cmake，以便将来选择交叉编译 (CROSS_COMPILE)

> ID：10549924
> 
> 赞同：4
> 
> 时间：2012-05-11T10:48:49.997
> 
> 标签：makefile, cmake, cross-compiling, cmakelists-options

```
IF(UNIX)
    # CROSS COMPILATION! ON/OFF
    #SET(CMAKE_C_COMPILER   /home/username/projects/buildroot/output/host/usr/bin/arm-linux-gcc)
    #SET(CMAKE_CXX_COMPILER /home/username/projects/buildroot/output/host/usr/bin/arm-linux-g++)
    #SET(CMAKE_C_COMPILER   /home/username/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-gcc)
    #SET(CMAKE_CXX_COMPILER /home/username/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-eabi-g++) 
```

这是我现在为交叉编译所做的。我想添加选项来运行它：

```
make CROSS_COMPILE=~/projects/buildroot/output/host/usr/bin/arm-linux- 
```

如果我不使用 CROSS_COMPILE 进行制作（而不是 cmake），它必须使用系统默认值，因此 cmake 必须将此选项传递给 makefile。我怎样才能做到？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T13:42:04.257

Buildroot 会为您生成一个 CMake 工具链文件。根据您的 Buildroot，它可能直接位于`output`目录中，也可能位于`output/host/usr/share/buildroot`. 该文件名为`toolchainfile.cmake`. 然后要构建您的 CMake 应用程序，请执行以下操作：

`cmake -DCMAKE_TOOLCHAIN_FILE=/path/to/buildroot/output/host/usr/share/buildroot/toolchainfile.cmake`

该文件包含交叉编译器路径、pkg-config 环境变量、头文件和库位置等的所有定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T03:46:28.930

对于最简单的方法，请执行以下操作：

```
SET(CMAKE_C_COMPILER   $(CROSS_COMPILE)gcc)
SET(CMAKE_CXX_COMPILER $(CROSS_COMPILE)g++) 
```

当 CROSS_COMPILE 变量传递给 make 时，它​​将被交叉编译器路径替换。

现在，正确的方法。理想情况下，应该在运行 CMake 时定义 CROSS_COMPILE 变量，因为它是跨平台的。如果使用其他 CMake 生成器，使用第一个解决方案可能会中断。

这可以这样做：

```
IF(UNIX)
    SET(CMAKE_C_COMPILER   ${CROSS_COMPILE}gcc)
    SET(CMAKE_CXX_COMPILER ${CROSS_COMPILE}g++) 
```

然后定义变量：

```
cmake -G "Unix Makefiles" -DCROSS_COMPILE=~/projects/buildroot/output/host/usr/bin/arm-linux- 
```

在这种情况下，CMake 将根据是否定义了 CROSS_COMPILE 生成正确的构建文件。

# php - 如何获取逗号分隔字符串的子字符串？

> ID：10549926
> 
> 赞同：3
> 
> 时间：2012-05-11T10:49:00.363
> 
> 标签：php, string, substring, explode

我有一个逗号分隔的字符串，并希望前 100 个条目（不包括第 100 个逗号）作为单个字符串。

例如，如果我有字符串

```
a,b,c,d,e,f,g 
```

问题是获得前 3 个条目，所需的结果字符串将是

```
a,b,c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:52:32.247

使用爆炸/内爆：

```
$str     = 'a,b,c,d,e,f,g';
$temp1   = explode(',',$str);
$temp2   = array_slice($temp1, 0, 3);
$new_str = implode(',', $temp2); 
```

使用正则表达式：

```
$new_str = preg_replace('/^((?:[^,]+,){2}[^,]+).*$/','\1',$str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:24:37.537

您可以通过查找第 100 个分隔符来做到这一点：

```
$delimiter = ',';
$count = 100;
$offset = 0;
while((FALSE !== ($r = strpos($subject, $delimiter, $offset))) && $count--)
{
    $offset = $r + !!$count;
}
echo substr($subject, 0, $offset), "\n"; 
```

或类似地对其进行标记：

```
$delimiter = ',';
$count = 100;
$len = 0;
$tok = strtok($subject, $delimiter);
while($tok !== FALSE && $count--)
{
    $len += strlen($tok) + !!$count;
    $tok = strtok($delimiter);
}
echo substr($subject, 0, $len), "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T10:51:30.423

试试php的[explode()](http://php.net/manual/en/function.explode.php)函数。

```
$string_array = explode(",",$string); 
```

遍历数组以获取所需的值：

```
for($i = 0; $i < sizeof($string_array); $i++)
{
echo $string_array[$i];//display values
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T10:51:35.370

一种方法是在逗号后拆分字符串并将前 100 个索引放在一起（逗号分隔）。在此之前，您必须检查 count(array) 是大于还是小于 100。

# mobile - 2012 年编写跨平台移动应用的工具包选项？

> ID：10549928
> 
> 赞同：4
> 
> 时间：2012-05-11T10:49:01.410
> 
> 标签：mobile, cordova, xamarin.android, coronasdk, appcelerator-mobile

我目前正在研究适用于 Android 和 iPhone 的跨平台开发替代方案（Windows 8 可能是一个不错的补充）。该应用程序基本上是一个“带有关联应用程序的地图”，当然不是游戏。

在这里搜索，我看到了 2010/2011 年以来的许多过时的建议和工具，但从那时起，Apple 改变了他们的政策，并且肯定出现了新的东西。

我目前的清单和轻型研究（可能有事实错误）是：

1.  [Monotouch/Monodroid](http://xamarin.com)：.NET (Mono) 框架。在两个平台上创建“本机”应用程序。需要重建 UI 代码（或类似的东西）。
2.  [Appcelerator](http://www.appcelerator.com)：用于编译原生应用程序的 Javascript 框架。
3.  [Corona](http://www.anscamobile.com/corona)：类似于 Appcelerator。
4.  [Phonegap](http://phonegap.com)：类似的想法，但看起来它使用包装器来应用 HTML5 内容
5.  [SenchaTouch](http://www.sencha.com/products/touch/)：另一个基于 HTML5 的平台。
6.  [Wink](http://www.winktoolkit.org/)：又一个 HTML5 工具包。
7.  [XVLM](http://xmlvm.org/android/)：Android 到 ObjC 编译器，可能会创建丑陋的 iOS 应用程序。
8.  [Unity3D](http://unity3d.com)：仅适用于游戏。
9.  [Moai](http://getmoai.com)：仅用于游戏。

所以，在我看来，有三个主要想法，每个都有一些框架实现：

*   在原生 iOS/Android 代码之上有一个抽象层，并使用提供的层为每个平台构建。（单点触控，Unity3D）
*   使用 HTML5（用 Javascript 编码）和某种包装器来“应用”网络内容。(PhoneGap,煎茶,眨眼)
*   使用框架的代码，该框架将为每个支持的平台（Moai、XVLM、Appcelerator、Corona）输出一个本机应用程序作为编译通道（或类似）

问题：

1.  我还没有找到第四个想法吗？
2.  在我对任何指定框架的研究中是否有任何明显的错误？
3.  地图与任何这些想法或特定框架的集成是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:49:19.073

根据我的经验，如果你想拥有一个原生应用程序去 Mono，如果你不需要原生应用程序去 PhoneGap。Native 是最好的 UI 非常重要，即游戏或相当图形化的应用程序。但从业务类型的应用程序，CRUD，电话差距运作良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:30:22.880

只是部分答案：

广告 2\. Appcelerator / Titanium 不仅仅是 HTML5。前几天，我在 Hackers News 上读到[了](http://news.ycombinator.com/item?id=3951958)PhoneGap 和 Titanium 之间相当广泛的比较。我发现它非常有用。链接指向 HN 评论，实际文章的链接在顶部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:57:25.230

我的主要经验是使用 Mono for Android 和 MonoTouch，所以我个人不能对其他选项说太多。我个人认为它是最好的选择，因为它允许您跨平台共享大量代码（如果您坚持使用 .NET，甚至可以扩展到非移动平台），同时仍然允许 100%原生 UI，这非常重要。如果您正在寻找入门资源，我有[这个视频](http://www.youtube.com/watch?v=WkNbRUqnSSc)，其中讨论了跨平台共享大量代码的方法和库，还有[这本书](http://shop.oreilly.com/product/0636920024002.do)涵盖了同样的事情，但也扩展了讨论如何做的事情，例如存储数据、使用地图、访问网络等。

我还想提一下[MonoGame](http://monogame.codeplex.com/)，您的列表中没有它。MonoGame 是一个开源 XNA 实现，它位于 Mono 之上，允许您以 iOS/Android/Max OS X 为目标。

# sql - SQL 反向 LIKE

> ID：10549929
> 
> 赞同：13
> 
> 时间：2012-05-11T10:49:06.187
> 
> 标签：sql, linq, sql-server-2008-r2

我有一张桌子，上面有国家名单。假设这些国家之一是“马其顿”

如果搜索“马其顿共和国”，哪个 SQL 查询会返回“马其顿”记录？

我相信在 linq 中它会像

```
var countryToSearch = "Republic of Macedonia";

var result =  from c in Countries
              where countryToSearch.Contains(c.cName) 
              select c; 
```

现在，上面查询的 SQL 等价物是什么？

如果反过来（即数据库存储了国家名称的长版本），下面的查询应该可以工作：

```
Select * from country
where country.Name LIKE (*Macedonia*) 
```

但我不知道如何扭转它。

旁注：表中的国家名称将始终是国家名称的简称

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T10:56:50.047

你可以用[`CHARINDEX`](http://msdn.microsoft.com/en-us/library/ms186323.aspx)这个。

```
Select * from country
where CHARINDEX(country.Name, 'Republic of Macedonia') > 0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T10:51:52.207

只需反转运算符（并修复语法）

```
Select * from country
where 'Republic of Macedonia' LIKE CONCAT('%',country.Name,'%') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-20T04:07:06.847

对于 SQLite，可以将表**(mytable)中的**`substring` **(mysubstring 列)**与任意更大的测试字符串进行比较：

 **`select * from mytable where instr('Somewhere substring is here', mytable.mySubstring) > 0`**

# javascript - javascript addEventListener 在所有元素上触发

> ID：10549931
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:49:20.480
> 
> 标签：javascript, validation, addeventlistener, attachevent

我确定我错过了一些明显的东西，但知道为什么下面的 addEventListener 代码到处都在触发（不仅仅是在提交按钮上）？

HTML：

```
 <form action="#">
        <input type="text"><br>
        <input type="text"><br>
        <button id="submit">submit</button><br>
    </form> 
```

JS：

```
 function validate () {
        var inputs = document.getElementsByTagName('input');
        var inputs_length = inputs.length-1;
        for (i=0; i<=inputs_length; i++) {
            var inputs_value = document.getElementsByTagName('input')[i].value;
            if (inputs_value == "") {
                alert('there is a text box empty');
            }
        }

    }   

    var el = document.getElementById('submit');

    if (el.addEventListener) {  
        el = addEventListener('click', validate, false);   
    } else if (el.attachEvent)  {  
      el.attachEvent('onclick', validate);  
    } 
```

修复就是改变

```
el = addEventListener('click', validate, false); 
```

到

```
el.addEventListener('click', validate, false); 
```

我的错字:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:50:12.473

改变这个：

```
if (el.addEventListener) {  
    el = addEventListener('click', validate, false); 
```

对此：

```
if (el.addEventListener) {  
    el.addEventListener('click', validate, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:13:19.590

很长的评论。

在您的代码中：

```
 // inputs is an HTMLCollection of all the inputs
    var inputs = document.getElementsByTagName('input');

    // No need for the -1
    var inputs_length = inputs.length;

    // Don't forget to declare counters too, very important
    // Just use < length
    for (var i=0; i<inputs_length; i++) {

        // Instead of this very inefficient method
        var inputs_value = document.getElementsByTagName('input')[i].value;

        // use the collection you already have
        var inputs_value = inputs[i].value;

        if (inputs_value == "") {
            alert('there is a text box empty');
        }
    } 
```

最好`inputs_value`在开始时声明，这样所有声明都在一个地方，但正如你所拥有的那样，它是无害的。

哦，不要给表单元素命名或 id 为“提交”（或任何其他表单方法），因为它会隐藏同名的表单方法，因此无法调用它。

# asp.net-mvc-3 - MVC3 虚拟目录查看文件夹很慢

> ID：10549932
> 
> 赞同：3
> 
> 时间：2012-05-11T10:49:20.797
> 
> 标签：asp.net-mvc-3, visual-studio-2010, iis-7.5

我有一个 MVC3 应用程序，它像通常那样使用视图和控制器。

我还有一个控制器`TestController`，它从 IIS 7.5 中的虚拟目录设置返回视图。

在视图下的 IIS 中，我添加了虚拟目录`Test`，该目录指向我的本地磁盘上的一个目录，其中包含我的 cshtml 页面。

在我的第一个请求中，视图的呈现最多需要 20 分钟，但后续请求需要几秒钟。

我本地机器上的实际文件夹包含 1000 个 cshtml 页面 - 这会是一个问题吗？

为什么我的应用程序需要 20 分钟（第一次请求）从虚拟目录呈现视图，而在解决方案本身中呈现视图需要几秒钟？

任何帮助是极大的赞赏。

**[进一步更新] - 这发生了很多次，然后就停止了。然后我不得不删除虚拟目录并在 IIS 中重新添加它，它又开始发生了。**

我决定运行蚂蚁性能分析器。这是结果（我在等待了将近 30 分钟后停止了它） ![Ants 性能分析器](../Images/4944d303f165ee4e663aed69e1a94d26.png)

我有一种感觉，我们可能会看到一个僵局，但我不知道如何测试它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:49:40.357

创建我自己的虚拟路径提供程序后，我发现一旦从我的虚拟目录请求一个文件，它就会遍历目录中的每个文件并在每个文件上调用 GetCacheDependency。

我相信 Pranav 上面的解释是正确的，因此是答案，但下面是我采取的方法：

1.  将我的文件从磁盘移动到沙发底座
2.  创建我自己的自定义 VirtualPathProvider
3.  创建我自己的自定义 CacheDependency
4.  如果文件是虚拟文件，则返回我的自定义 CacheDependecy，否则使用默认值
5.  使用 MSMQ 使缓存无效

# robocopy - 将当前日期插入目标文件夹结构

> ID：10549933
> 
> 赞同：1
> 
> 时间：2012-05-11T10:49:23.200
> 
> 标签：robocopy

是否可以在使用 robocopy 时以斯堪的纳维亚格式 (yyyymmdd) 将今天的日期插入到目标文件夹中，即

```
robocopy "\\myserver\newlayout" "\\myserver\oldlayout 20120511" /MIR 
```

在我们转换文件夹结构时，我只需要支持这一点。

干杯

啊哈，我通过查看其他答案解决了这个问题。

```
set "myDate=%date:~6,4%%date:~3,2%%date:~0,2%"
robocopy "\\myserver\newlayout" "\\myserver\oldlayout %myDate%" /MIR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T16:13:41.113

更简单的是，你可以用单行来做到这一点：

```
robocopy "\\myserver\newlayout" "\\myserver\oldlayout %date:~6,4%%date:~3,2%%date:~0,2%" /MIR 
```

# json - Delphi：JSON 数组

> ID：10549935
> 
> 赞同：7
> 
> 时间：2012-05-11T10:49:24.260
> 
> 标签：json, delphi

试图理解 Delphi 中的 JSON。使用模块“DBXJSON.pas”。如何使用它来制作这样的数组：

```
Array:[
        {"1":1_1,"1_2_1":1_2_2},
        ...,
   ] 
```

这样做：

```
JSONObject:=TJSONObject.Create;
JSONArray:=TJSONArray.Create();
...
JSONArray.AddElement(TJSONObject.Create(TJSONPair.Create('1','1_1')));
JSONArray.AddElement(TJSONObject.Create(TJSONPair.Create('1_2_1','1_2_2')));
JSONObject.AddPair('Array',JSONArray); 
```

，但得到这个：

```
{
"Array":[
{"1":"1_1"},{"1_2_1":"1_2_2"}
]
} 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T12:40:00.300

您在上面发布的代码不正确。您已经创建了一个 JSON 数组并尝试将对元素添加到该数组中。但是，您不必将对添加到数组中，而是必须添加`JSON Objects`到该数组中，并且这些对象必须包含您的对。
这是解决您的问题的示例代码：

```
program Project3;

{$APPTYPE CONSOLE}

uses
  SysUtils, dbxjson;

var jsobj, jso : TJsonObject;
    jsa : TJsonArray;
    jsp : TJsonPair;
begin
  try
    //create top-level object
    jsObj := TJsonObject.Create();
    //create an json-array
    jsa := TJsonArray.Create();
    //add array to object
    jsp := TJSONPair.Create('Array', jsa);
    jsObj.AddPair(jsp);

    //add items to the _first_ elemet of array
    jso := TJsonObject.Create();
    //add object pairs
    jso.AddPair(TJsonPair.Create('1', '1_1'));
    jso.AddPair(TJsonPair.Create('1_2_1', '1_2_2'));
    //put it into array
    jsa.AddElement(jso);

    //second element
    jso := TJsonObject.Create();
    //add object pairs
    jso.AddPair(TJsonPair.Create('x', 'x_x'));
    jso.AddPair(TJsonPair.Create('x_y_x', 'x_y_y'));
    //put it into array
    jsa.AddElement(jso);

    writeln(jsObj.ToString);
    readln;

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

输出是

```
{"Array":[
     {"1":"1_1","1_2_1":"1_2_2"},
     {"x":"x_x","x_y_x":"x_y_y"}
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:40:03.593

与@teran 相同的答案：

改变：

```
JSONArray.AddElement(TJSONObject.Create(TJSONPair.Create('1','1_1')));
JSONArray.AddElement(TJSONObject.Create(TJSONPair.Create('1_2_1','1_2_2'))); 
```

至：

```
JSONArray.AddElement(TJSONPair.Create('1','1_1'));
JSONArray.AddElement(TJSONPair.Create('1_2_1','1_2_2')); 
```

干杯。

# vb.net - 在重复结构中停止执行。VB.NET

> ID：10549937
> 
> 赞同：-3
> 
> 时间：2012-05-11T10:49:28.353
> 
> 标签：vb.net, exception, message, execution

我需要停止在 VB.net 中执行程序。在重复结构中，程序检查变量是真还是假。当变量为假时，我需要停止程序执行。我不想关闭程序而只是停止它。我发现的一种方法是引发异常，但我不想向用户显示错误消息。最好的方法是什么？

```
Do
  If myvariable=false then
  throw new exception... 'Silent exception
  end if
Loop until …. 
```

戴维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T00:57:35.307

编辑基于以下评论。

在那种情况下，我会使用类似的东西。

```
Do   
    If myvariable=false then   
        Return
    end if   
Loop until …. 
```

* * *

我真的不确定你想要做什么。

您可以使用关闭应用程序[`Application.Exit()`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.APPLICATION.EXIT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true)

> 通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。

如果你想真的很突然，你可以调用[`End`](http://msdn.microsoft.com/en-us/library/0wt87xba.aspx)声明。

```
Terminates execution immediately. 
```

和

> End 语句突然停止代码执行，并且不调用 Dispose 或 Finalize 方法或任何其他 Visual Basic 代码。其他程序持有的对象引用无效。如果在 Try 或 Catch 块中遇到 End 语句，则控制不会传递到相应的 finally 块。

您可以使用[`Stop`](http://msdn.microsoft.com/en-us/library/6acc062s.aspx)语句暂停执行，但它会调用调试器。

> 如果在集成开发环境 (IDE) 之外运行的代码中遇到 Stop 语句，则调用调试器。无论代码是在调试模式还是零售模式下编译的，都是如此。

或者，如果您只是想退出您的`Do`声明，您可以试试这个

```
Do   
    If myvariable=false then   
        Exit Do
    end if   
Loop until …. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:22:45.440

您可以使用 exit 语句退出循环。或者，您可以使用引发异常的方法并将循环包围在 Try/Catch 块中，该块捕获该特定异常并忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:25:37.130

如果您真的想停止，则可以使用 Stop 关键字。但是，我对您的问题并不确信这是您真正想要的，因为它具有不同的结果，具体取决于它是作为 exe 运行还是在 IDE 中运行。

您的问题的更多上下文将有助于为您的问题找到最佳答案。

# jquery - 使用追加返回 [object]？

> ID：10549939
> 
> 赞同：1
> 
> 时间：2012-05-11T10:49:40.333
> 
> 标签：jquery, html, input

我有一些代码可以连接来自某些输入框的文本，然后将生成的字符串放入`<span>`. 我有一个“+”按钮，它复制`<span>`并将其附加到`<div>`.

现在我想`<br>`在末尾添加一个，`<span>`以便每个跨度都放在一个新行上，但是当我这样做时，按“+”返回`[object][Object]`而不是值！我在[这里](http://jsfiddle.net/aexK8/2/)设置了一个 js fiddle 。

当您单击“+”时，您会明白我的意思。这可能是非常简单的事情，但我一生都无法找出导致这种情况的原因！

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:52:00.113

因为对字符串使用 + 运算符会将所有内容强制转换为字符串，从而导致 jQuery 对象的字符串表示形式（通常是`[Object object]`）。尝试：

```
$("#five").append(creativeCopy.html() + "<br>"); 
```

或者：

```
$("#five").append(creativeCopy).append("<br />"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:57:20.447

我已经更正了代码

```
$(document).ready(function() {

    var creativeUniqueId = 1;
    $(".addCreative").click(function() {
        var creativeCopy = $("#creative_text").clone();
        var creativeCopyId = "creative_text" +creativeUniqueId;
        creativeCopy.attr("id",creativeCopyId);
        $("#five").append(creativeCopy);
         $("#five").append("<br>");
        creativeUniqueId++;
    }); 
}); 
```

您可以在[http://jsfiddle.net/aexK8/3/看到](http://jsfiddle.net/aexK8/3/)

# php - 我如何找到 php 会话开始时间戳

> ID：10549941
> 
> 赞同：5
> 
> 时间：2012-05-11T10:49:52.857
> 
> 标签：php, session, timestamp, global-variables

我记得最近在某处读到，您可以以时间戳格式获取服务器会话开始时间，该时间戳格式与用户开始 php 会话的确切时间相同，但我再也找不到这篇文章了。

我不想要的是请求时间（即时间`'REQUEST_TIME'`）或执行时的“当前时间戳”，`date()`因为（如果我理解正确的话）它们会因每个请求和每个脚本执行而改变。

我想要的是在服务器上启动会话的时间，这在逻辑上只能是一个时刻。

显然有一个检索此信息的过程。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T10:53:44.723

有什么问题：

```
if (!isset($_SESSION['started'])) {
    $_SESSION['started'] = $_SERVER['REQUEST_TIME'];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T12:04:27.707

```
if (!isset($_SESSION['start_time']))
{
    $str_time = time();
    $_SESSION['start_time'] = $str_time;
}

echo $_SESSION['start_time']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-31T02:05:12.340

如果你想要一个最短的答案

```
$_SESSION['started'] = (!isset($_SESSION['started'] ? time() : $_SESSION['started']); 
```

# iphone - App Store 中 iPhone 应用的不同数据源

> ID：10549943
> 
> 赞同：0
> 
> 时间：2012-05-11T10:49:55.037
> 
> 标签：iphone, web-services, localization, app-store

我将在英国和美国的应用商店发布一款应用。根据下载我的应用程序的商店，我想有两个不同的数据源。基本上，我希望我的应用程序在从美国商店下载时连接到我的美国服务器，并在从英国商店下载时连接到英国服务器。我正在考虑将原始 URL 包含在本地化字符串中，但我认为这不是一个稳定的解决方案。

任何想法？

多谢

克劳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:35:40.380

我不确定，但我认为该应用程序不知道它是从哪里下载的。

您可以创建两个应用程序，一个用于英国，一个用于美国，并让这些应用程序仅在其各自的本地 App Store 中可用。

但是，根据您必须生成的应用程序的数量（如果您打算将来在超过 2 个国家/地区分发您的应用程序），可能更容易询问用户在启动时使用哪个数据源，或者让他在设置等中定义一个。或者使用iPhone的当前语言甚至位置来选择数据源。

# php - 如何使用 php 和 html 在电子邮件中发送嵌入图像

> ID：10549947
> 
> 赞同：0
> 
> 时间：2012-05-11T10:50:23.277
> 
> 标签：php, html, email, html-email

我知道这个问题被问了好几次，这是一个基本问题，但我在过去三天进行了搜索，但我仍然无法在电子邮件中发送图像。请帮助我如何在我的电子邮件中嵌入图像，即我应该在标题中包含哪些标题编写以下代码。

```
 $to = "example@gmail.com";
 $subject = "new account created";
 $body = "New account has been created 
 <img border=’0' src=’http://www.example.com/myimages/track.php?MID=1111&SID=2222'  width=’1' height=’1'>
  " ;

 $headers = "MIME-Version: 1.0" . "\r\n";
 $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
 $headers .= "From: admin@gmail.com";  

 $neww=mail($to,$subject,$body,$headers); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T10:55:16.297

您无法在电子邮件中看到图像的原因是大多数电子邮件阅读器将它们剥离，因为它们可用于验证有效的电子邮件地址，这是垃圾邮件发送者常用的策略。您的代码尖叫跟踪仅证明了这一点。

没有办法解决这个问题，因为图像过滤是由电子邮件客户端完成的，并且无法由您编写的任何代码控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T04:54:44.747

[看看这个线程](https://stackoverflow.com/questions/4312687/how-to-embed-images-in-email/18008898#18008898)。

我发布了一个解决方案，您可以使用*Mozilla Thunderbird*为您获取可以放置在脚本中的 html 图像代码。图像将被嵌入并且不依赖于链接或外部内容。

用蜥蜴的大屏幕截图寻找我的答案。

但是，尽管如此，用户仍然可以阻止各种图像。但是嵌入图像可能被认为比链接内容更容易接受——这取决于客户如何处理图像。

# sql - 在具有不同名称的列上连接表但在结果中产生单列

> ID：10549952
> 
> 赞同：1
> 
> 时间：2012-05-11T10:50:56.040
> 
> 标签：sql, sql-server, database, tsql, join

我不确定如何简洁地提出问题来描述我想解决的问题。
我有两个下表：
`Table 1`

```
[idA] [numA]
 NULL   8
 1      10
 2      15
 3      16 
```

`Table 2`

```
[idB] [numB]
 2      14
 3      30
 4      32 
```

现在，我不确定如何制定 T-Sql 查询以产生以下结果：

```
[id] [numA] [numB]
NULL  8      0
1     10     0
2     15     14
3     16     30
4     0      32 
```

关于如何解决这个问题有什么建议吗？

**更新：**

* * *

如果还有一张表（idC，numC）要加入，@AdaTheDev 的脚本会有问题吗？在那种情况下，最好的解决方案是什么？问题是我有 15 个要加入一个表，它们应该按 id 分组并有 15 个对应的 numX 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T10:55:41.923

这样的事情，应该做

```
SELECT ISNULL(t1.idA, t2.idB) AS id, 
    ISNULL(t1.numA, 0) AS numA, 
    ISNULL(t2.NumB, 0) AS numB
FROM table1 t1
    FULL OUTER JOIN table2 t2 ON t1.idA = t2.idB OR t1.ida IS NULL AND t2.idb IS NULL 
```

**更新**
说明我在连接中添加了一个 OR 条件来处理 idA 和 idB 为 NULL 的情况，以给出单个结果

完整的测试脚本（在 table2 中添加了 NULL id 记录）：

```
DECLARE @Table1 TABLE (ida integer, numA INTEGER)
DECLARE @Table2 TABLE (idb integer, numb INTEGER)

INSERT @Table1 ([ida], [numA])
VALUES (NULL, 8), (1, 10), (2, 15), (3, 16)

INSERT @Table2 ([idb], [numb])
VALUES (NULL, 9), (2, 14), (3, 30), (4, 32)

SELECT ISNULL(t1.idA, t2.idB) AS id, 
    ISNULL(t1.numA, 0) AS numA, 
    ISNULL(t2.NumB, 0) AS numB
FROM @table1 t1
    FULL OUTER JOIN @table2 t2 ON t1.idA = t2.idB OR t1.ida IS NULL AND t2.idb IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:57:35.257

```
DECLARE @table1 AS TABLE (idA INT, numA INT)
DECLARE @table2 AS TABLE (idB INT, numB INT)

INSERT INTO @table1
VALUES 
(NULL, 8),
(1, 10),
(2, 15),
(3, 16)

INSERT INTO @table2
VALUES
(2, 14),
(3, 30),
(4, 32)

SELECT COALESCE(ida, idb) AS id, ISNULL(numa, 0) AS numa, ISNULL(numb, 0) AS numb
FROM @table1
FULL OUTER JOIN @table2 ON ida = idb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:54:47.520

这就是你所追求的吗？

```
select tableA.idA as Id, tableA.numA as numA, tableB.numB as numB
from tableA
inner join tableB on tableA.Id = tableB.Id 
```

# windows-phone-7 - 大图像居中

> ID：10549959
> 
> 赞同：0
> 
> 时间：2012-05-11T10:51:21.117
> 
> 标签：windows-phone-7

我从服务器图像 800X800 以 jpg 格式获取，我需要将其显示在 WP7 屏幕的中心。 我需要在此网址 [http://imageshack.us/photo/my-images/152/examplea.jpg/](http://imageshack.us/photo/my-images/152/examplea.jpg/)中显示类似的示例的应用。我尝试了拉伸矩形几何。我写这个没有代码示例，因为这只是插入图像。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:02:18.753

在 Xaml 中尝试这样

```
Image name="Image" width = 800 height = 1000 stretch = fill Margin="-215,-120,-255,-184" 
```

然后设置源

# java - 单击后禁用左侧导航窗格上的链接

> ID：10549960
> 
> 赞同：1
> 
> 时间：2012-05-11T10:51:22.107
> 
> 标签：java, javascript, jsp

使用 Javascript 如何在单击一次后禁用链接。场景是：我有一个左侧导航窗格，其中包含指向不同 JSP 的链接，这些 JSP 显示在 中。我想要完成的是，在我单击一个链接后，它应该在中心打开，并且应该在左窗格中禁用超链接.

我能够浏览左侧导航窗格。但无法禁用显示在中心的页面链接。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:59:46.977

在链接旁边创建一个隐藏跨度。

```
<a href="..." id="myLink">your link</a>
<span style="display:none">your alter link text</span> 
```

然后在脚本上做

```
$("#myLink").click(function(){ $(this).hide().next().show(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:57:35.517

像下面这样的东西应该可以工作：

```
<a onclick="
  var el = this;
  setTimeout(function(){el.onclick=function(){return false;}},1);
" ... >link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:58:01.437

```
$("#click").click(function(e){
   ...
   e.preventDefault();
   $(this).unbind('click');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:00:20.053

你可以这样做：

```
jQuery(document).ready( function() {
    jQuery("a#yourLinkId").click( function(event) {
        jQuery(this).attr('disabled', '');
        // You can optionally prevent default processing and implements your own:
        event.preventDefault();
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T10:55:52.223

您需要声明一个隐藏元素并为其提供一个标志值，该标志值在链接是否被禁用时保留。现在，每当您单击链接时，服务器都会读取隐藏元素，并且在第二次加载时，您可以根据标志的值禁用链接，只需在 jsp 中进行简单检查即可。

# ruby-on-rails - 定义计时器方法控制器导轨

> ID：10549969
> 
> 赞同：2
> 
> 时间：2012-05-11T10:51:50.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在控制器中有一个方法，它调用在模块中创建的另一个方法，如下例所示：

```
 def example
    @var1 = ModuleName::ClassName.get()

    respond_to do |format|
      format.json { render json: @var1}
    end
  end 
```

get() 方法去一个网站寻找信息并返回一个数组。一切正常，但我想知道如果应用程序需要很长时间才能运行，控制器中是否有设置超时的方法！是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:21:37.403

这是一种方法（一种更通用的方法）你可以做到这一点..

```
def example
 Timeout::timeout(40) do  # 40 sec, change it to anything you like
   @var1 = ModuleName::ClassName.get()
 rescue Timeout::error
   # do something (maybe set @var1's value if it couldn't get desired array)
 end
 respond_to do |format|
  format.json { render json: @var1}
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:16:56.607

如果在 ModuleName::ClassName.get() 下暗示某种第三方 ruby​​ http 库，那么很可能您应该设置某种`timeout`参数（取决于库）。您只需在几秒钟内通过所需的超时（或您想要的任何测量值）。

因此伪代码可能如下所示：

```
ModuleName::ClassName.get(10) 
```

有关更详细的答案，您能否更具体地了解您如何致电外部服务？

# php - 如何在 PHP 中为每个客户创建沙箱？

> ID：10549974
> 
> 赞同：0
> 
> 时间：2012-05-11T10:52:15.573
> 
> 标签：php, security, plugins, sandbox, add-on

我有一个问题，我现在留下来，将为多个用户创建功能强大的软件。我想让客户能够为这个系统创建他们自己的插件/插件，但我不喜欢客户可以阅读我所有的“定义”和“全局变量”等等......

现在我寻找解决方案。我的想法是为每个客户构建一个沙箱，我可以在其中定义在此沙箱中发生的事情，并且客户无法与我的系统代码联系。

有人可以通过链接到我可以找到有关如何制作这样一个系统的更多信息的网站来帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:12:48.073

您需要调查插件架构。

这里有这个概念的介绍：

[http://shameerc.com/2010/12/simple-plugin-architecture-using-php5-reflection-api.html](http://shameerc.com/2010/12/simple-plugin-architecture-using-php5-reflection-api.html)

# ruby - 是否可以在 Rspec 中访问周围上下文的主题？

> ID：10549975
> 
> 赞同：4
> 
> 时间：2012-05-11T10:52:22.260
> 
> 标签：ruby, testing, rspec

以下代码不起作用，但它最好地显示了我想要实现的目标

```
context "this context describes the class" do

  subject do
    # described class is actually a module here
    c = Class.new.extend(described_class)
    c.some_method_that_has_been_added_through_extension
    c
  end

  # ... testing the class itself here ...

  context "instances of this class" do

    subject do
      # this doesn't work because it introduces a endless recursion bug
      # which makes perfectly sense
      subject.new
    end

  end

end 
```

我还尝试在使用主题初始化的内部上下文中使用局部变量，但没有运气。有什么方法可以从内部范围的主题定义中访问外部范围的主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:05:35.057

使用#subject 有时会引起麻烦。它“主要用于”与#its 等速记检查一起使用。

它还可以使示例更难阅读，因为它可以掩盖您测试的名称/意图。这是 David Chelimsky 写的一篇关于#subject 和 #let 主题及其在揭示意图中的作用的博客文章：[http ://blog.davidchelimsky.net/blog/2012/05/13/spec-smell-explicit-use-主题/](http://blog.davidchelimsky.net/blog/2012/05/13/spec-smell-explicit-use-of-subject/)

尝试使用 let，而不是 [https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/helper-methods/let-and-let](https://www.relishapp.com/rspec/rspec-core/v/2-10/docs/helper-methods/let-and-let)

这是我最有可能写它的方式。

```
context "this context describes the class" do
  let(:name_of_the_module) { Class.new.extend(described_class) }
  before do
    c.some_method_that_has_been_added_through_extension
  end

  # ... testing the class itself here ...

  context "instances of this class" do

    let(:better_name_that_describes_the_instance) { klass.new }

    # ... test the instance
  end

end 
```

*旁注* 您可能想重新考虑是否要使用主题。我更喜欢在几乎所有情况下使用#let。YMMV

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:59:02.270

显然有效的方法是在*内部上下文中使用**实例变量*，而不是用 the 初始化它。主题是 Procs。因此，我的第一种方法不起作用。*`subject``subject.call`*

 *```
context "instances of this class" do

  klass = subject.call
  subject { klass.new }

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-18T15:27:39.313

我一直在寻找解决方案，但出于不同的原因。当我测试一个可能返回值或引发错误的方法时，我经常不得不在两个上下文中重复这个主题，一次是作为 proc，`raise_error`一次是正常的。

我发现你可以给出`subjects`名字，比如`lets`. 这让您可以`subject`在新的`subject`. 这是一个例子：

```
describe 'do_some_math' do
  let!(:calculator) { create(:calculator) }

  # proc to be used with raise_error
  subject(:do_some_math) { 
    -> { calculator.do_some_math(with, complicated, args) } 
  }

  context 'when something breaks' do
    it { is_expected.to raise_error } # ok
  end

  context 'when everything works' do

    # here we call the named subject from the outer scope:
    subject { do_some_math.call } # nice and DRY

    it { is_expected.to be_a(Numeric) } # also ok!
  end
end 
```*

# delphi - Delphi XE2：EResNotFound 异常“资源” 在某些目标机器上出现“未找到”，但在其他机器上未出现

> ID：10549976
> 
> 赞同：1
> 
> 时间：2012-05-11T10:52:31.453
> 
> 标签：delphi, resources, delphi-xe2, regression

在过去的两天里，我一直在努力解决这个问题，似乎无法取得任何进展......

几乎从一个时刻到下一个时刻，Delphi XE2 将不再正确编译我的一个项目。也就是说，它实际上编译时没有错误，但在运行时我得到资源未找到错误，因为它本质上是主要的“表单”（在这种情况下它实际上是一个数据模块）。我已经从源代码控制恢复到项目的旧版本，我知道这些版本肯定可以正常工作，但无济于事。由此看来，它似乎一定是 Delphi/IDE 本身内部的东西，而不是项目源代码中的东西。但是，我也无法通过一个简单的测试项目或任何其他现实项目来重现该问题......它只发生在这个项目中。

另一个奇怪的事情是，当我使用 XN Resource Explorer 查看生成的二进制文件时，一切看起来都应该是：错误消息中提到的表单资源实际上是存在的并且完好无损......

在某些时候，我怀疑这可能是由我在 IDE 中安装的一位专家（例如 Uwe 的平台和 OI 专家以及 VersionInsightPlus、Andreas 的 IDEFixPack 和 DDevExtensions、GExperts）的错误引起的，但即使在禁用所有这些问题之后坚持。

不幸的是，我无法准确追踪何时开始发生这种情况，因为我已经工作了一段时间而没有实际运行二进制文件，修复 x64 目标的编译器警告和错误，调整更新的第三方工具的构建事件（本地化和许可证保护）等等……

有没有其他人见过这样的事情发生？关于如何确定这一点的更多想法？

* * *

有关该项目的更多详细信息：

*   它是使用 Add-In-Express 框架（即 COM-DLL）构建的 Outlook 插件。
*   “主表单”是一个`TDataModule`-后代——我们还将我们自己的祖先类插入到层次结构中，即“插件模块”不是直接继承自`TadxCOMAddInModule`——自定义祖先表单的资源也似乎存在并且完好无损使用资源查看器检查时输出二进制文件。
*   没有为 Win32 和 Win64 平台构建的运行时包。

如果您认为我错过了提及任何其他可能相关的细节，请告诉我。

**更新：** 我现在已将相关资源转移到另一台机器上。有趣的是，我在那里编译的 DLL 没有出现问题 - 在那台机器上......当我将它转移回原始机器并尝试调用它时，错误又回来了（强调这一点：这是确切的同一个 DLL 在一台机器上生成一个`EResNotFound`但在另一台机器上不生成。当然，一旦我发现了这一点，我也进行了反向测试，你瞧，在原始机器上编译的 DLL 在另一台机器上运行没有错误......似乎这毕竟不是德尔福问题......但那是什么？

两台机器的区别：

*   机器 1（出现问题的机器）：Windows 7 Ultimate English 64bit with Delphi XE2 Update 4
*   机器 2：Windows 7 Professional German 32bit with Delphi XE2 Update 3

在第三台机器上，除了没有 Delphi 外，几乎与第一台机器相同，两台机器生成的 DLL 都可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:36:36.433

在这里看到你的问题我有点惊讶。:)

在最近的 Delphi XE2 更新 4 中，我们遇到了许多严重问题。尽管我们从未遇到或报告过“找不到资源”错误，但我认为此更新可能是原因之一。你安装了吗？

我想到的另一件事是用于 Office 控件（命令栏和功能区）的图像。可能它们以某种方式损坏了，运行时代码无法加载它们并报告此错误。

无论如何，如您所知，这些只是我的猜测，如果您需要我们的 Office 插件方面的帮助，请联系 Add-in Express 支持服务，我们会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:25:00.247

**更新：**似乎我有点太快了，得出结论。显然，Sisulizer 解决方案也应该执行回退到主资源块。我现在已将此问题提交到[产品论坛](http://www.sisulizer.net/view_topic.php?id=2751&forum_id=4&jump_to=17151#p17151)，一旦解决，我将在这里报告。

* * *

好吧，谜团终于解开了：

我关闭了[Sisulizer](http://www.sisulizer.com/)中“复制所有资源”的选项，试图减小生成的资源 DLL 的大小，然后忘记了它......

我还没有完全意识到标准 Delphi 资源 DLL 方法对 Sisulizer “搭载”的本地化的影响——尤其是这是一个孤注一掷的交易：我们之前的翻译解决方案实现了一个可以读取任何资源的后备机制而是在主机二进制文件的外部资源 DLL 中找不到。Sisulizer 似乎不是这种情况 - 至少不是开箱即用的......因此，就应用程序而言，本地化资源 DLL 中不包含的任何资源都不存在。
我也没有意识到仅仅存在一个与主二进制文件具有相同基本名称的文件和一个与当前系统的默认语言环境匹配的扩展名（例如`.EN`or `.DE`）会自动导致 VCL 加载它......

没有出现错误的机器要么仍然有旧的、更大的（=完整的）资源 DLL，要么根本没有资源 DLL。

# opengl-es - OpenGL ES 和重叠三角形与 VBO

> ID：10549981
> 
> 赞同：4
> 
> 时间：2012-05-11T10:52:44.627
> 
> 标签：opengl-es

一些背景：

我对 OGL 很陌生。我的应用程序只关注 2D。所有对象都垂直于观察方向，我使用正交投影。我发现系统的性能受到 draw* 调用次数的限制，这表明我需要进行更多批处理。

我只需要绘制一个对象，但它由数千个可能重叠的三角形组成。我有能力在我的特定应用程序中预先计算几何形状，并将三角形从后到前排列，因为它们具有不同程度的透明度。顶点属性由（仅）包含片段程序中使用的 alpha 的颜色组成。

我做了什么：

所有的基元都是三角形，我为每个三角形的 3 个顶点分配相同的颜色，因为颜色在整个面上是恒定的。我将所有三角形的所有顶点及其颜色放入一个 VBO（16 位；没有那么多顶点）。索引缓冲区将三角形排序到前面，然后我发出一个绘图调用。我使用 alpha 混合（SRC_ALPHA，ONE_MINUS_SRC_ALPHA）。

结果：

我看到结果在我拥有和测试的唯一机器上正确混合和渲染。我没有在别人身上试过。我已经搜索了很长一段时间，但徒劳无功，寻找一些明确的答案。顺便说一句，唯一的参考是在 VBO 扩展规范中提到了“原语序列”，但它没有解决原语重叠时会发生什么。

问题：

这是保证的行为吗？那结果是否与在立即模式下在 glBegin(...) 和 glEnd(...) 中发出多个调用相同（由标准保证）？

注意：深度缓冲区和模板缓冲区已关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:53:14.377

OpenGL 规范保证基元将按照提供的顺序呈现。从`glDraw*`命令中提取的每个图元都将按照其组件顶点指定的顺序进行渲染。

所以是的：如果您按顺序排列三角形，这就是渲染它们时将它们取出的顺序。

# phpstorm - 隐藏 Jetbrains PHPStorm 4 中的断点栏

> ID：10549987
> 
> 赞同：5
> 
> 时间：2012-05-11T10:53:16.860
> 
> 标签：phpstorm

我最近升级并购买了 PHPStorm 4 的新许可证，但我从未注意到，但现在 PHPStorm 中有一个令人讨厌的断点栏，我真的想隐藏它，但我找不到如何隐藏它。

有谁知道怎么做（在 OSX 10.7 Lion 上）？截屏：

![截屏](../Images/44da4894136520b7c8d751f212f5aaab.png)

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:19:20.850

此栏还显示一些有用的信息，如书签、覆盖方法的图标、СSS 颜色。没有办法隐藏它。

# c#-4.0 - Ilist 和 Iqueryable

> ID：10549988
> 
> 赞同：0
> 
> 时间：2012-05-11T10:53:25.010
> 
> 标签：c#-4.0

这是我在应用程序中使用的代码，但我对这里需要**ilist**接口和使用**iqueryable 感到困惑**。它们的确切定义是什么？

```
private IList<Emp2> getcountry()
        {
            IList<Emp2> countryList = null;
            using (CountryDataContext context = new CountryDataContext(ConnectionString))
            {
              IQueryable<Emp2> query = from c in context.Emp where c.EmpName=="ss"select c;
                countryList = query.ToList();
            }

            return countryList;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:02:11.060

它们都是接口。

C# 中的接口：

[http://www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners](http://www.codeproject.com/Articles/18743/Interfaces-in-C-For-Beginners)

[http://www.codeproject.com/Articles/10197/The-Interface-Construct-in-C](http://www.codeproject.com/Articles/10197/The-Interface-Construct-in-C)

msdn链接：

[http://msdn.microsoft.com/en-us/library/ms173156.aspx](http://msdn.microsoft.com/en-us/library/ms173156.aspx)

[http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx](http://msdn.microsoft.com/en-us/library/system.collections.ilist.aspx)

[http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)

# java - 使用 Spring 和 AspectJ 在类上定位基于方面的注释

> ID：10549992
> 
> 赞同：3
> 
> 时间：2012-05-11T10:54:01.360
> 
> 标签：java, spring, annotations, aspectj, aop

如何创建一个面向所有公共方法的方面，这些公共方法属于标有特定注释的类？在下面的方法1 *（）*和方法2 *（）*应该由方面处理，*方法3（）*不应该由方面处理。

```
@SomeAnnotation(SomeParam.class)
public class FooServiceImpl extends FooService {
    public void method1() { ... }
    public void method2() { ... }
}

public class BarServiceImpl extends BarService {
    public void method3() { ... }
} 
```

如果我在方法级别上添加注释，则此方面将起作用并匹配方法调用。

```
@Around("@annotation(someAnnotation)")
public Object invokeService(ProceedingJoinPoint pjp, SomeAnnotation someAnnotation) 
 throws Throwable { 
   // need to have access to someAnnotation's parameters.
   someAnnotation.value(); 
```

}

我正在使用 Spring 和基于代理的方面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:18:12.893

以下应该工作

```
@Pointcut("@target(someAnnotation)")
public void targetsSomeAnnotation(@SuppressWarnings("unused") SomeAnnotation someAnnotation) {/**/}

@Around("targetsSomeAnnotation(someAnnotation) && execution(* *(..))")
public Object aroundSomeAnnotationMethods(ProceedingJoinPoint joinPoint, SomeAnnotation someAnnotation) throws Throwable {
    ... your implementation..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T11:17:10.150

使用 @target 并通过反射读取类型级别注释。

```
@Around("@target(com.example.SomeAnnotation)")
public Object invokeService(ProceedingJoinPoint pjp) throws Throwable { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-19T16:15:53.163

这适用于 Spring Boot 2：

```
@Around("@within(xyz)")
public Object method(ProceedingJoinPoint joinPoint, SomeAnnotation xyz) throws Throwable {
    System.out.println(xyz.value());
    return joinPoint.proceed();
} 
```

请注意，基于方法参数类型 ( `SomeAnnotation xyz`)，Spring 和 AspectJ 将知道您正在寻找哪个注解，因此`xyz`不必是注解的名称。

# java - Java - 从短到字节[2] 使用 LITTLE_ENDIAN

> ID：10549997
> 
> 赞同：1
> 
> 时间：2012-05-11T10:54:19.390
> 
> 标签：java, audio, bytearray, audio-recording

我在尝试将短值转换为字节 [2] 时遇到了一些问题。我正在使用它对某些音频数据缓冲区进行一些转换（将增益应用于缓冲区）。首先，我像这样加载音频缓冲区：

```
mRecorder.read(buffer, 0, buffer.length); 
```

缓冲区在哪里

```
private byte[] buffer; 
```

然后，我得到了样本（录音是 16 位样本大小），如下所示：

```
short sample = getShort(buffer[i*2], buffer[i*2+1]); 
```

getShort 的定义如下：

```
/* 
 * 
 * Converts a byte[2] to a short, in LITTLE_ENDIAN format
 * 
 */
private short getShort(byte argB1, byte argB2)
{
    return (short)(argB1 | (argB2 << 8));
} 
```

然后我将增益应用于样本：

```
sample *= rGain; 
```

在此之后，我尝试从相乘的样本中取回字节数组：

```
byte[] a = getByteFromShort(sample); 
```

但这失败了，因为即使增益为 1，声音也有很多噪音。

下面是 getByteFromShort 方法定义：

```
 private byte[] getByteFromShort(short x){
//variant 1 - noise
    byte[] a = new byte[2];
    a[0] = (byte)(x & 0xff);
    a[1] = (byte)((x >> 8) & 0xff);

//variant 2 - noise and almost broke my ears - very loud
//      ByteBuffer buffer = ByteBuffer.allocate(2);
//      buffer.putShort(x);
//      buffer.flip();

    return a;
} 
```

所以问题在于将短值转换为字节[2]。当增益为 1.0 时，声音充满了噪音。

以下是完整的增益应用方法：

```
for (int i=0; i<buffer.length/2; i++)
{ // 16bit sample size                      
    short curSample = getShort(buffer[i*2], buffer[i*2+1]);
if(rGain != 1){
    //apply gain
    curSample *= rGain;
    //convert back from short sample that was "gained" to byte data
    byte[] a = getByteFromShort(curSample);
    //modify buffer to contain the gained sample
    buffer[i*2] = a[0];
    buffer[i*2 + 1] = a[1];
}

   } 
```

你们能否看看 getByteFromShort 方法并告诉我我错在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:39:21.343

`getByteFromShort()`似乎还可以。

`getShort(byte argB1, byte argB2)`是错的。当 argB1 为负时，它会产生不正确的结果。

它应该是

```
return (short)((argB1 & 0xff) | (argB2 << 8)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:59:00.927

使用以下代码：

```
ret[0] = (byte)(x & 0xff);
ret[1] = (byte)((x >> 8) & 0xff); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T11:50:48.713

我会使用 ByteBuffer

```
ByteBuffer buffer = ByteBuffer.allocate(8*1024);
mRecorder.read(buffer.array(), 0, buffer.capacity());
// using NIO
mRecorder.read(buffer);

while(buffer.remaining() > 1) {
    short s = bb.getShort(x);
    // do something with s
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:52:57.850

ByteBuffer 及其在 java.nio 中的同类可以帮助解决这个问题。基本上，您将使用您的数据创建一个由数组支持的 ByteBuffer `ByteBuffer.wrap(array)`。然后，您可以设置缓冲区的字节顺序，`ByteBuffer.order()`并使用 get/put Int/Short/byte... 等函数来操作底层数组中的数据。

# ios4 - iPhone 应用程序是否有富媒体支持？

> ID：10549999
> 
> 赞同：-1
> 
> 时间：2012-05-11T10:54:22.360
> 
> 标签：ios4, xcode4

是否有适用于 iPhone 应用程序的富媒体支持 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:59:58.377

术语“富媒体”通常用于描述“范围广泛的数字交互媒体”。有关适用于 iOS (iPhone) 应用程序开发人员的音频/视频格式和相关技术的可用（内置）支持的最新视图，请查看： [https ://developer.apple.com/technologies/ios/audio-and -video.html](https://developer.apple.com/technologies/ios/audio-and-video.html)

亲切的问候，
博