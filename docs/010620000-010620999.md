# StackOverflow 问答 10620000-10620999

# c# - 迭代 TextPointer 对象中的多个段落

> ID：10620000
> 
> 赞同：0
> 
> 时间：2012-05-16T13:50:19.020
> 
> 标签：c#, .net, wpf

我正在使用 RichTextBox 中的 FlowDocuments，更具体地说，在 TextChange 事件发生时使用 TextRanges 和 TextPointers。

我正在通过访问 TextRange

```
TextChange change;  
TextRange range = new TextRange(RichTextControl.Document.ContentStart, RichtextControl.Document.ContentEnd);
TextRange changeRange = new TextRange(range.Start.GetPositionAtOffset(change.Offset), range.Start.GetPositionAtOffset(change.Offset+change.AddedLength)); 
```

我必须使用的 TextRange 跨越多个段落。我从选择中提取的简化后的 TextRange 如下所示：

```
<Section>
  <Paragraph>
    <Span>
      <Run>Test1</Run>
    </Span>
  </Paragraph>
  <Paragraph>
    <Span>
      <Run>Test2</Run>
    </Span>
  </Paragraph>
</Section> 
```

我现在可以访问我使用的第一个段落`TextRange.Start`。我可以通过访问 Inlines 来正常遍历这一段。

但是，一旦我想访问第二段，我就没有选择了。我可以看到`TextPointer.GetNextContextPosition`，但这会导致我跳过 Textpointer Offset 位置，直到指针所在的上下文发生变化，我希望这不是这样做的方法。

我不知道我是否只是在实际捕获更改的文本时做错了，或者我是否只是缺少正确的界面来遍历该部分中包含的所有段落。如果是这样，解决方案应该很容易，但我只是看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:45:47.750

我似乎缺乏适当的搜索词来找到解决方案。我在这里找到了一些可能有用的东西[http://www.bryanewert.net/journal/2010/5/26/how-to-explore-the-contents-of-a-flowdocument.html](http://www.bryanewert.net/journal/2010/5/26/how-to-explore-the-contents-of-a-flowdocument.html)

# ruby-on-rails - 近实时更新 Websolr/Heroku 上的 Solr/Sunspot 索引问题

> ID：10620001
> 
> 赞同：1
> 
> 时间：2012-05-16T13:50:20.963
> 
> 标签：ruby-on-rails, heroku, solr, sunspot, websolr

我在我的 Rails 应用程序中有一个模型回调，如下所示

```
after_save :sunspot_index

def sunspot_index
  Sunspot.index( self )
  Sunspot.commit  
end 
```

这在我的本地机器上效果很好，一旦我更新了类的实例，它的索引条目就会更新，并且可以使用它的新属性进行搜索。

然而，同样的代码在部署到 Heroku 时不起作用。这让我深感不安。是否有环境/solr 配置差异阻止它工作？

我正在使用太阳黑子 1.2.x

**更新：**似乎重新索引确实发生了，但在一分钟左右之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:46:23.097

事实证明，在 Heroku 上提供 Solr 实例作为附加组件的 Websolr 在提交时也有 60 秒的延迟。

在这里阅读更多：

[http://help.websolr.com/discussions/questions/269-how-do-i-turn-on-real-time-indexing](http://help.websolr.com/discussions/questions/269-how-do-i-turn-on-real-time-indexing)

# iphone - 在特定点点击时更改 Uislider 值

> ID：10620002
> 
> 赞同：6
> 
> 时间：2012-05-16T13:50:29.673
> 
> 标签：iphone, ios, uislider

我想通过点击而不是拖动滑块拇指在 UISlider 上的特定点点击时触发一个动作。

如何在某个点点击 UISlider 来设置滑块值？

一段代码将不胜感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-17T08:32:03.247

```
 UISlider *slider = [[[UISlider alloc] init] autorelease];
… 
```

滑块设置

```
…
UITapGestureRecognizer *gr = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(sliderTapped:)] autorelease];
[slider addGestureRecognizer:gr];
- (void)sliderTapped:(UIGestureRecognizer *)g {
     UISlider* s = (UISlider*)g.view;
    if (s.highlighted)
        return; // tap on thumb, let slider deal with it
    CGPoint pt = [g locationInView: s];
    CGFloat percentage = pt.x / s.bounds.size.width;
    CGFloat delta = percentage * (s.maximumValue - s.minimumValue);
    CGFloat value = s.minimumValue + delta;
    [s setValue:value animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:31:16.287

如果 v1 是一个 uiview，在那个地方 uislider\ 后面有纯背景，请尝试 uiview touchesbegan 函数

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
  UITouch *touch = [touches anyObject];
  if ([touch view] == v1)
  {
    CGPoint location = [touch locationInView:v1];
    NSInteger i = location.x;
  } 
```

然后通过乘以 v1 帧获得 xpoint 的百分比，即如果 v1 帧 x 值 =50 且 i = 5 表示 10%，然后将百分比值乘以滑块值以更改滑块值

# struts2 - struts2如何获取命名空间值？

> ID：10620003
> 
> 赞同：1
> 
> 时间：2012-05-16T13:50:31.313
> 
> 标签：struts2

我的 struts2 项目中有这个 secMarket.xml，代码如下：

```
<struts>
<package name="secMarket" namespace="/foliofn">
    <action name="loans" class="tlc.ui.action.Loans" >
        <result>/mainapp/pages/secMarket/loans.jsp</result>
    </action>   
</package> 
```

如何在操作类 tlc.ui.action.Loans 的“执行”方法中将命名空间值“/foliofn”作为字符串获取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:25:05.583

```
 String namespace = ServletActionContext.getActionMapping().getNamespace(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:11:32.553

如果我可能会问你为什么需要命名空间？您可以从请求 URI 中解析它

大概你的 URI 看起来像这样

http://{host:portno}/{applicationname}/foliofn/loans

# javascript - 无法在 IE 中动态加载 JavaScript 文件两次

> ID：10620007
> 
> 赞同：0
> 
> 时间：2012-05-16T13:50:51.743
> 
> 标签：javascript, jquery, internet-explorer-8, cross-browser

我已经建立[了这个](http://www.s-maof.com/Forum/shorts.php)页面。当您单击表格中的一行时，页面会发送一个 ajax 数据请求，然后在正文中动态创建一个脚本，该脚本称为加载图形。它适用于所有 chrome 和 FF，但不适用于 IE8。含义-当您单击行时，它可以工作，但是第二行和脚本未加载..我什至不知道如何在 IE8 中调试它。有人可以推荐一个解决方案吗？:-)

加载其他脚本的脚本是

```
$.post("shorts.server.php", $.param({
     val: stocknumber,
     id: id,
     name: stockname,
     group: stockgroup
 }), function (response) {
     //alert(response);
     // We dynamically add javascript headers
     var head = document.getElementsByTagName('body')[0];
     script = document.createElement('script');
     //dynamic_graph.js changes it's content by the current selected stock
     //see shorts.server.php for details
     script.src = 'jQuery/head/dynamic_graph.js';
     head.appendChild(script);
     script = document.createElement('script');
     //dynamic_graph.js changes it's content by the current selected stock
     //see shorts.server.php for details
     script.src = 'jQuery/head/dynamic_info.js';
     head.appendChild(script);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:57:00.373

尝试使用[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)：

```
function(response)
{
     $.getScript('jQuery/head/dynamic_graph.js');
     $.getScript('jQuery/head/dynamic_info.js');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:58:28.190

在 IE9 中按 F12 运行调试器。在调试器中，您可以选择浏览器模式，例如：IE8。使用 Jquery 进行所有 DOM 交互和浏览器兼容性。

# javascript - IE长链接错误中断

> ID：10620008
> 
> 赞同：3
> 
> 时间：2012-05-16T13:50:54.060
> 
> 标签：javascript, html, css, internet-explorer

有谁知道如何防止 IE(7) 错误的破坏网址？

这是示例：http: [//jsfiddle.net/uQcj5/5/](http://jsfiddle.net/uQcj5/5/)

问题是 IE 在单词中破坏了 url，例如：

```
http://stackoverflow.com/que
stions/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:54:11.503

您是在告诉浏览器在单词中间打断，只需`word-wrap: break-word;`从您的 CSS 中删除即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:07:57.370

正确使用的 CSS 是：

```
white-space: nowrap; 
```

**编辑**

好吧，没想到你不想突破`<div>`。好吧，这对你来说是一个肮脏的把戏：在*你*想要打破`&#8203;`的地方添加字符。

 *这个`&#8203;`字符是一个[零宽度的空格](http://www.fileformat.info/info/unicode/char/200b/index.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:24:44.010

在每个允许的断点处删除`word-wrap: break-word`、添加规则`wbr:after { content: "\00200B"; }`和插入，例如`<wbr>`

```
<div><a href="#">http://stackoverflow.<wbr>com/<wbr>questions</a></div> 
```

对此（以及一般的换行问题）的解释很长，请参阅[http://www.cs.tut.fi/~jkorpela/html/nobr.html](http://www.cs.tut.fi/~jkorpela/html/nobr.html)

请注意，如果 URL 包含连字符“-”，则需要采取额外措施来防止浏览器在连字符之前或之后拆分字符串。

如果可能，请勿在文档内容中使用 URL。使用链接文本；URL 主要用作`href`和其他属性值，而不是可见内容。大多数情况下，只有当您的文档*涉及*URL 或其他技术问题（其中 URL 是真正相关的内容）时，您才应该在内容中包含 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T15:02:32.863

```
var str = 'http://stackoverflow.com/questions/10620008/ie-long-link-wrong-break'
str = str.replace(/\//g, '/&#8203;'); 
```

[http://jsfiddle.net/uQcj5/10/](http://jsfiddle.net/uQcj5/10/)*

# prolog - 将两个列表附加在一起的 Prolog 算法的说明

> ID：10620011
> 
> 赞同：3
> 
> 时间：2012-05-16T13:50:56.350
> 
> 标签：prolog, tail-recursion, turbo-prolog, tailrecursion-modulo-cons

这是一种将两个列表附加在一起的算法：

```
Domains
list= integer*

Predicates
nondeterm append(list, list, list)

Clauses
append([], List, List) :- !.
append([H|L1], List2, [H|L3]) :- append(L1, List2, L3).

Goal
append([9,2,3,4], [-10,-5,6,7,8], Ot). 
```

结果是一个列表`[9,2,3,4,-10,-5,6,7,8]`，它保存在“ `Ot`”中。

我的问题是，这是如何工作的？

我的理解是，在每个递归调用中，在第一个列表中，你只得到一个列表的尾部（从而减少它的大小`1`直到它是`[]`），第二个参数“ `List2`”根本没有改变，第三个参数.. . 起初 it's `[]`，在每次递归调用后你得到它的尾巴，但因为它是`[]`，所以它保持`[]`。

那么，为什么突然，在第三个参数（“ `Ot`”）中我们有附加列表？有人可以逐步解释这个算法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T14:06:15.520

首先，让我们把这些条款翻译成更容易理解的东西：

```
append([], List, List) :- !. 
```

可以写

```
append([], List2, Result) :-
    Result = List2,
    !. 
```

和

```
append([H|L1], List2, [H|L3]) :- append(L1, List2, L3). 
```

可以写

```
append(List1, List2, Result) :-
    List1  = [Head1 | Tail1],
    Result = [HeadR | TailR],
    Head1  =  HeadR,
    append(Tail1, List2, TailR). 
```

我希望这对你来说已经更清楚了。

然后，一步一步，数字表示每次使用的子句，结果调用如下：

```
append([9, 2, 3, 4], [-10, -5, 6, 7, 8], Ot).
|
2
|
` append([2, 3, 4], [-10, -5, 6, 7, 8], Ot'). % and Ot = [9|Ot']
  |
  2
  |
  ` append([3, 4], [-10, -5, 6, 7, 8], Ot''). % and Ot' = [2|Ot'']
    |
    2
    |
    ` append([4], [-10, -5, 6, 7, 8], Ot'''). % and Ot'' = [3|Ot''']
      |
      2
      |
      ` append([], [-10, -5, 6, 7, 8], Ot''''). % and Ot''' = [4|Ot'''']
        |
        1
        |
        ` Ot'''' = [-10, -5, 6, 7, 8] 
```

在这一步，我们感兴趣的所有值都已经定义好了。请注意结果的头部是如何*在*其尾部被后续（*尾部递归*）调用填充之前设置`append`的，以 Prolog 自上而下的方式（也称为[*“尾部递归模数”*](https://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)）构建结果列表。

让我们按照定义来看看`Ot`最后一步是什么：

```
Ot = [9|Ot']
        Ot' = [2|Ot'']
                 Ot'' = [3|Ot''']
                           Ot''' = [4|Ot'''']
                                      Ot'''' = [-10, -5, 6, 7, 8]
                           Ot''' = [4,          -10, -5, 6, 7, 8]
                 Ot'' = [3,         4,          -10, -5, 6, 7, 8]
        Ot' = [2,        3,         4,          -10, -5, 6, 7, 8]
Ot = [9,       2,        3,         4,          -10, -5, 6, 7, 8] 
```

我希望你能从中有所收获。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:06:29.927

让我们从 Prolog 翻译成英文。我们有两个规则：

1.  附加任何`List`到的结果`[]`是`List`.

2.  将 any 附加`List`到第一个元素为`H`且余数为`L1`的列表的结果等于其第一个元素也是`H`其余数是附加`List`到的结果的列表`L1`。

所以，我们要追加`[-10,-5,6,7,8]`到`[9,2,3,4]`. 附加到的列表不为空，因此我们可以跳过该规则。根据第二条规则，结果具有`9`作为第一个元素，然后是附加`[-10,-5,6,7,8]`到的结果`[2,3,4]`。

所以，我们要追加`[-10,-5,6,7,8]`到`[2,3,4]`. 附加到的列表不为空，因此我们可以跳过该规则。根据第二条规则，结果具有`2`作为第一个元素，然后是附加`[-10,-5,6,7,8]`到的结果`[3,4]`。

所以，我们要追加`[-10,-5,6,7,8]`到`[3,4]`. 附加到的列表不为空，因此我们可以跳过该规则。根据第二条规则，结果具有`3`作为第一个元素，然后是附加`[-10,-5,6,7,8]`到的结果`[4]`。

所以，我们要追加`[-10,-5,6,7,8]`到`[4]`. 附加到的列表不为空，因此我们可以跳过该规则。根据第二条规则，结果具有`9`作为第一个元素，然后是附加`[-10,-5,6,7,8]`到的结果`[]`。

所以，我们要追加`[-10,-5,6,7,8]`到`[]`. 附加到的列表是空的，所以根据第一条规则，结果是`[-10,-5,6,7,8]`.

由于追加`[-10,-5,6,7,8]`到的结果`[]`是，追加到`[-10,-5,6,7,8]`的结果是。`[-10,-5,6,7,8]``[4]``[4,-10,-5,6,7,8]`

由于追加`[-10,-5,6,7,8]`到的结果`[4]`是，追加到`[4,-10,-5,6,7,8]`的结果是。`[-10,-5,6,7,8]``[3,4]``[3,4,-10,-5,6,7,8]`

由于追加`[-10,-5,6,7,8]`到的结果`[3,4]`是，追加到`[3,4,-10,-5,6,7,8]`的结果是。`[-10,-5,6,7,8]``[2,3,4]``[2,3,4,-10,-5,6,7,8]`

由于追加`[-10,-5,6,7,8]`到的结果`[2,3,4]`是，追加到`[2,3,4,-10,-5,6,7,8]`的结果是。`[-10,-5,6,7,8]``[9,2,3,4]``[9,2,3,4,-10,-5,6,7,8]`

# iphone - 将 NSString“2012-06-29”形成 NSDate 的“NSDateFormatterMediumStyle”？

> ID：10620012
> 
> 赞同：0
> 
> 时间：2012-05-16T13:50:57.120
> 
> 标签：iphone, ios, ios5, nsdate, nsdateformatter

我正在尝试将月份和日期与以下字符串分开。

```
2012-06-29 
```

我尝试通过执行以下操作将字符串格式化为中等样式：

```
//Setting Up My Formatter
formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterMediumStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];

Forming String Into Formatted Date
NSDate *dateFromString = [formatter dateFromString:event.date];

//Separating Components
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:dateFromString];

//Assigning Each Component to my Cell's Labels
cell.dayLabel.text = [NSString stringWithFormat:@"%d", [components day]];
cell.monthLabel.text = [NSString stringWithFormat:@"%d", [components month]]; 
```

当我运行 NSLogs 时，我的“event.date”返回“2012-06-26 & dateFromString 返回 null。谁能帮助指导我正确的方向？非常感谢！

# 编辑：

所以我终于从你的帮助中弄清楚我设置的格式不正确。而不是使用：

```
[formatter setDateStyle:NSDateFormatterMediumStyle]; 
```

我现在正在使用：

```
[formatter setDateFormat:@"yyyy-MM-dd"]; 
```

这是我的问题，尽管从组件来看，月份以整数（1、2、3）的形式返回，但我希望它以“MMM”（1 月、2 月、3 月）的形式返回。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:02:29.807

这是我的做法：

首先创建一个 NSDateFormatter 以正确接收您的字符串：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:"yyyy-MM-dd"]; 
```

从您的字符串中获取日期：

```
NSDate *yourDate = [formatter dateFromString:@"2012-06-29"]; 
```

获取日期的组件：

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:yourDate]; 
```

获取组件的属性：

```
[components day];    
[components month];
[components year]; 
```

发布需要发布的内容：

```
[formatter release]; 
```

**评论回复：**

是的，你几乎应该做相反的事情。

创建另一个 NSDateFormatter（使用参考：http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns）

```
NSDateFormatter *monthFormat = [[NSDateFormatter alloc] init];
[monthFormat setDateFormat:@"MMM"];

NSString *month = [monthFormat stringFromDate:yourDate];

[monthFormat release]; 
```

` 此时，您可以将其截断/大写为您想要的任何内容，因为您会得到小写字母，而且可能有点太长了。（检查参考）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:59:33.517

`dateFromString`失败是因为您已经告诉它期望以下格式的字符串（来自NSDateFormatter[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)）：

> 1937 年 11 月 23 日下午 3:30

您需要使用以下方式设置自定义格式：

```
[formatter setDateFormat:@"yyyy-MM-dd"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:57:46.100

尝试设置 setDateFormat

[格式化程序 setDateFormat:@"yyyy-MM-dd"];

# selenium - 验证选定的单选按钮 - Selenium IDE

> ID：10620016
> 
> 赞同：3
> 
> 时间：2012-05-16T13:51:08.727
> 
> 标签：selenium, selenium-ide

例如，我想检查是否选择了单选按钮及其 id。

需要检查的元素：

```
<input id="Evidence_of_Obstruction" class="" type="Radio" checked="" onclick="changeSaveStatus(this, "72");" value="0" name="Patency"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:58:06.833

命令：assertValue 目标：name='Patency' 值：on

或与此非常相似的东西。您可以通过右键单击单选按钮并选择其中一个命令来使用 Selenium IDE 中建议的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:05:44.767

使用 Selenium IDE，我更喜欢元素 id，这将接近 t3hn00b 的建议：

命令：assertValue 目标：id=Evidence_of_Obstruction 值：on

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T22:35:14.767

在 WebDriver 中，这将类似于：

```
IWebElement element = _driver.FindElement(By.Id("Evidence_of_Obstruction"));
if(element.Selected)
    ; //then it is selected
else
    ; //then it is NOT selected 
```

或者，正如 t3hn00b 所避免的那样，您可以检查另一个属性，例如 Value 或 Checked。这可以这样做：

```
IWebElement element = _driver.FindElement(By.Id("Evidence_of_Obstruction"));
string result = element.GetAttribute("checked"); // or replace checked with value
//then check the strings contence. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T12:11:47.493

请使用以下代码：-

```
driver.manage().timeouts().implicitlyWait(0, TimeUnit.MILLISECONDS);
if(  exists = driver.findElements( By.id("your id") ).size() != 0)
{
    driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS);
} 
```

您可以使用代码的 rhis 部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T09:46:23.050

这只是：

```
<tr>
    <td>verifyChecked</td>
    <td>Evidence_of_Obstruction</td>
    <td></td>
</tr> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-17T18:14:47.840

你可以做类似...

```
if   |   !selenium.isChecked("Patency")
   waitForElementPresent   |   name=Patency
   click                   |   name=Patency
   waitForValue            |   name=Patency   |   on
endIf 
```

上面的代码将检查该框是否被选中。如果不是，那么它将选中该框并验证操作是否按预期发生。上述方法的唯一缺点是我还没有找到一种方法来使用除 NAME 或 ID 之外的任何内容的复选框来执行此操作。如果您使用复选框的名称，这应该可以工作，在您的情况下，我还没有使用 XPATH 或 CSS 让它工作，即使该框没有显示状态的变化 [xpath ] 当您选中/取消选中它时。

如果您的复选框在网页上的代码没有任何更改，或者由于某种原因您不能使用 ID 或 NAME，那么您将执行以下操作：

```
storeValue   |   xpath=//input[@id="Evidence_of_Obstruction"][@name="Patency"]   |   isBoxChecked
if           |   storedVars['isBoxChecked']=='on'
   goto   |   NEXT_TASK
else
   waitForElementPresent   |   xpath=//input[@id="Evidence_of_Obstruction"][@name="Patency"]
   click                   |   xpath=//input[@id="Evidence_of_Obstruction"][@name="Patency"]
   waitForValue            |   xpath=//input[@id="Evidence_of_Obstruction"][@name="Patency"]   |   on
endIf
label   |   NEXT_TASK 
```

此代码利用 Selenium IDE 将复选框标识为未选中（关闭）或选中（打开）。您可以存储复选框的状态，并根据复选框的当前状态确定如何处理复选框（如果有）。希望这可以帮助您或遇到此问题的其他人。

# oop - 单一职责原则的例子是什么？

> ID：10620022
> 
> 赞同：42
> 
> 时间：2012-05-16T13:51:24.013
> 
> 标签：oop, definition, solid-principles, single-responsibility-principle, design-principles

有人可以给我一个单一职责原则的例子吗？我试图理解在实践中，一个班级承担单一责任意味着什么，因为我担心我可能每天都会违反这条规则。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-04-03T15:21:22.980

破解应用程序最有效的方法是创建[GOD](http://en.wikipedia.org/wiki/God_object)类。这些是跟踪大量信息并承担多项职责的类。一项代码更改很可能会影响类的其他部分，因此会间接影响使用它的所有其他类。这反过来又会导致更大的维护混乱，因为除了添加新功能之外，没有人敢做任何更改。

下面的例子是一个 TypeScript 类，它定义了一个`Person`，这个类不应该包括电子邮件验证，因为这与一个人的行为无关：

```
class Person {
    public name : string;
    public surname : string;
    public email : string;
    constructor(name : string, surname : string, email : string){
        this.surname = surname;
        this.name = name;
        if(this.validateEmail(email)) {
          this.email = email;
        }
        else {
            throw new Error("Invalid email!");
        }
    }
    validateEmail(email : string) {
        var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
        return re.test(email);
    }
    greet() {
        alert("Hi!");
    }
} 
```

我们可以通过从 Person 类中移除电子邮件验证的职责并创建一个新的`Email`类来承担该职责来改进上面的类：

```
class Email {
    public email : string;
    constructor(email : string){
        if(this.validateEmail(email)) {
          this.email = email;
        }
        else {
            throw new Error("Invalid email!");
        }        
    }
    validateEmail(email : string) {
        var re = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
        return re.test(email);
    }
}

class Person {
    public name : string;
    public surname : string;
    public email : Email;
    constructor(name : string, surname : string, email : Email){
        this.email = email;
        this.name = name;
        this.surname = surname;
    }
    greet() {
        alert("Hi!");
    }
} 
```

确保一个类具有单一职责，使其默认情况下也更容易查看它的作用以及如何扩展/改进它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T13:55:06.360

查看[Solid 描述](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

除非你要求更具体的东西，否则很难提供更多帮助。

单一职责是指一个类做一件特定的事情（职责）而不试图做更多的事情，这也被称为高凝聚力。

类通常不会以低凝聚力开始，但通常在几个版本和不同的开发人员添加到它们之后，你会突然注意到它变成了一些人所说的怪物或上帝类。所以这个类应该被重构。

很难想出一个好的例子，但我最近能想到的一个是我们拥有的一个管理不同数据包处理阶段的类，一种`Chain of Responsibility`. 此类的最初目的是维护一个阶段列表并协调对它们的调用 packetProcess()。好吧，最终每个人都在这个管理器类中添加了与处理阶段有关的任何东西（因为管理器类是访问这些阶段的容易的地方），尤其是阶段配置。manager 类不再有单一职责，而是负责调用配置更改的阶段：因此减少了内聚。

我们最终不得不重构管理器类，删除所有阶段配置并将其放入工厂中，从而让管理器去做它打算做的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-23T06:34:47.187

一个类应该只有一个改变的理由。

该原则表明，如果我们有 2 个理由更改一个类，我们必须将功能拆分为两个类。每个类将只处理一项职责，如果将来我们需要进行一项更改，我们将在处理它的类中进行更改。

如果有两个不同的原因进行更改，可以想象两个不同的团队可能出于两个不同的原因处理相同的代码。每个人都必须部署其解决方案，在编译语言（如 C++、C# 或 Java）的情况下，可能会导致模块与其他团队或应用程序的其他部分不兼容。

这一原则与耦合和内聚的概念密切相关。耦合是指应用程序的不同方面如何紧密地联系在一起，而内聚是指特定类或包的内容可能密切相关。单个类的所有内容都紧密耦合在一起，因为类本身是一个[单个单元][1]，必须完全使用或根本不使用。

我的博客文章：

[http://javaexplorer03.blogspot.in/2016/12/single-responsibility-principle.html](http://javaexplorer03.blogspot.in/2016/12/single-responsibility-principle.html)

# wpf - WPF VisualBrush 拉伸而不是平铺

> ID：10620023
> 
> 赞同：4
> 
> 时间：2012-05-16T13:51:24.103
> 
> 标签：wpf, xaml, visualbrush

我有一个 VisualBrush，我已将 TileMode 属性设置为 Tile。

但是，它不会平铺 - 它会伸展。有人可以帮忙吗？

谢谢

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="test"
    x:Name="UserControl"
    d:DesignWidth="500" d:DesignHeight="500">
    <UserControl.Resources>
        <VisualBrush x:Key="MyBrush" TileMode="Tile">
            <VisualBrush.Visual>
                <Grid Width="20">

                    <Ellipse Fill="#FF00EBFF" Stroke="Black" StrokeThickness="2" Width="20" Height="20" RenderTransformOrigin="0.5,0.5" >
                    </Ellipse>
                </Grid>
            </VisualBrush.Visual>
        </VisualBrush>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" >
    <Grid Background="{StaticResource MyBrush}" />
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:07:10.540

尝试这个：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <VisualBrush x:Key="MyBrush" TileMode="Tile" Viewport="20, 20, 20, 20" ViewportUnits="Absolute">
            <VisualBrush.Visual>
                <Ellipse Fill="#FF00EBFF" Stroke="Black" StrokeThickness="2" Width="20" Height="20" RenderTransformOrigin="0.5,0.5" />
            </VisualBrush.Visual>
        </VisualBrush>
    </UserControl.Resources>
    <Grid>
        <Grid x:Name="LayoutRoot" Background="{StaticResource MyBrush}">

        </Grid>
    </Grid>
</UserControl> 
```

使用 TileMode 时需要指定 ViewPort 值。

# php - Symfony2：发送一个 HTTP 请求

> ID：10620024
> 
> 赞同：13
> 
> 时间：2012-05-16T13:51:25.793
> 
> 标签：php, html, http, symfony, httprequest

我正在尝试从我的一个控制器发出 HTTP 请求以联系另一个 URL，目标是联系另一个 URL，并在我的页面中简单地打印 HTML 答案。我试过了 ：

```
$r = new Request();
$r->create('http://www.google.com', 'GET');

return $this->render(...mytemplate..., array('name' => $r->getContent()); 
```

我的模板只是打印变量“名称”。
现在，当我这样做时，什么都没有返回。在我看来，该请求从未发送过，这就是为什么没有返回任何内容的原因。

我的问题是：如何发送请求并获取响应内容？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T14:06:34.003

两个问题。

首先，这不是 的正确用法`Symfony\Component\HttpFoundation\Request::create()`，它是一种静态初始化程序/工厂。您的代码应如下所示

```
$r = Request::create( 'http://www.google.com', 'GET' ); 
```

现在你有了一个合适的 Request 对象。但是，这与您的第二个问题无关：这不是 Symfony 的请求对象的设计方式。它的目的不是*执行*HTTP 请求，而是将它们*表示*为框架中的对象。

长话短说，你不能那样做。也许您可以[使用 cURL 来抓取](http://www.digeratimarketing.co.uk/2008/12/16/curl-page-scraping-script/)您想要的页面？

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-16T14:28:43.807

**编辑**：我为 Buzz 浏览器制作了一个[GremoBuzzBundle 。](https://github.com/gremo/GremoBuzzBundle)它类似于[SensioBuzzBundle](https://github.com/sensio/SensioBuzzBundle)，但它有一些不错的配置选项。

我建议使用[Buzz 浏览器](https://github.com/kriswallsmith/Buzz)和依赖注入。Buzz 是 cURL 或 file_get_contents 的包装器。编辑您的`deps`文件，添加以下行：

```
[Buzz]
    git=https://github.com/kriswallsmith/Buzz.git
    target=/buzz 
```

然后安装供应商以实际下载库：

```
php bin/vendors install 
```

然后添加**两个服务**（`src/YourCompany/YourBundle/Resources/config/services.yml`）：

```
# cURL client for Buzz
buzz.client.curl:
  class:  Buzz\Client\Curl
  public: false
  calls:
    - [setVerifyPeer, [false]]

# Buzz browser
buzz.browser:
  class:     Buzz\Browser
  arguments: ['@buzz.client.curl'] 
```

第一个服务是客户端（我更喜欢 cURL 而不是 file_get_contents），后者是浏览器本身。**最后一步是在自动加载器**（ ）中添加一行代码`app/autoload.php`：

```
$loader->registerNamespaces(array(
    'Buzz' => __DIR__.'/../vendor/buzz/lib',
)); 
```

然后您可以在**控制器**代码中获取服务并使用浏览器：

```
$browser = $this->get('buzz.browser');
$response = $browser->get('http://www.google.com'); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-22T11:28:37.063

我建议您使用 GuzzleHttp 客户端 - 我知道的最佳客户端：[http ://docs.guzzlephp.org/en/latest/](http://docs.guzzlephp.org/en/latest/)

已经有很好的捆绑包将其集成到 Symfony2 项目中： [https ://github.com/8p/GuzzleBundle](https://github.com/8p/GuzzleBundle)

然后从您的控制器中，您可以调用：

```
$client   = $this->get('guzzle.client');

// GET request with parameters
$response = $client->get('http://httpbin.org/get', [
    'headers' => ['X-Foo-Header' => 'value'],
    'query'   => ['foo' => 'bar']
]);
$code = $response->getStatusCode();
$body = $response->getBody(); 
```

可以在以下位置找到更多信息：[http ://docs.guzzlephp.org/en/latest/index.html](http://docs.guzzlephp.org/en/latest/index.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-16T14:05:57.757

为什么不使用卷曲？来自[PHP 手册](http://www.php.net/manual/en/curl.examples-basic.php)

```
$ch = curl_init("http://www.example.com/");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

result = curl_exec($ch);
curl_close($ch); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-22T00:06:02.407

[https://github.com/CircleOfNice/CiRestClientBundle](https://github.com/CircleOfNice/CiRestClientBundle)

不错的 API，便于使用 curl 库，它返回 symfony 响应而不是字符串结果

```
$restClient = $this->container->get('ci.restclient');

$restClient->get('http://www.someUrl.com');
$restClient->post('http://www.someUrl.com', 'somePayload');
$restClient->put('http://www.someUrl.com', 'somePayload');
$restClient->delete('http://www.someUrl.com');
$restClient->patch('http://www.someUrl.com', 'somePayload');

$restClient->head('http://www.someUrl.com');
$restClient->options('http://www.someUrl.com', 'somePayload');
$restClient->trace('http://www.someUrl.com');
$restClient->connect('http://www.someUrl.com'); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-22T11:47:30.037

显然，您可以使用 Symfony 的内置 HTTP 客户端。见： [http ://api.symfony.com/2.0/Symfony/Component/HttpKernel.html](http://api.symfony.com/2.0/Symfony/Component/HttpKernel.html)

以下是一个非常粗略的代码库，使用 Silex（构建在 Symfony 之上）。它只是实例化一个新的 HTTP 客户端。

```
<?php
require_once __DIR__ . '/silex/vendor/autoload.php';

use Symfony\Component\EventDispatcher\EventDispatcher;
use Symfony\Component\HttpKernel\Controller\ControllerResolver;
use Symfony\Component\HttpKernel\HttpKernel;
use Symfony\Component\HttpKernel\Client;
//use Symfony\Component\HttpFoundation\Response;

$dispatcher = new EventDispatcher();
$resolver = new ControllerResolver();
$kernel = new HttpKernel( $dispatcher, $resolver );

$client = new Client( $kernel );
var_dump( $client ); 
```

?>

作为单元测试文档的一部分，您还有一个用于 Symfony2 的 HTTP 客户端的详细示例。请参阅：[http ://symfony.com/doc/current/book/testing.html](http://symfony.com/doc/current/book/testing.html)

**但是（编辑）**这些客户端在您的应用程序中是本地的。这里展示的概念可以更好地使用 Symfony2 的 BrowserKit 组件来实现。Symfony 中的无头浏览器。

更好的是，使用 Goutte 请求外部网站。有关详细信息，请参阅[https://github.com/FriendsOfPHP/Goutte](https://github.com/FriendsOfPHP/Goutte)。

# javascript - javascript日期格式

> ID：10620028
> 
> 赞同：0
> 
> 时间：2012-05-16T13:51:33.063
> 
> 标签：javascript, jquery, date-format

我正在使用 jquery datepicker，我想设置最小日期和最大日期来显示日期。我需要允许用户在最小和最大范围内选择日期。我还需要根据用户语言环境设置日期格式。

我有 2 个日期字段开始日期和结束日期。

```
$(function(){
                    var d = new Date();
                    var minD = new Date("12/02/2012"); //DD/MM/YYYY
                    var maxD = new Date("12/04/2012");//DD/MM/YYYY

                        $('#startDate').datepicker({
                            changeMonth: true,
                            changeYear:true, 
                            dateFormat: "DD/MM/YY", 
                            monthNamesShort:getTitleMonths(),
                            dayNamesMin:getTitleDays(),
                            constrainInput: true,
                            minDate: new Date(minD.getFullYear(), minD.getMonth(), minD.getDate()),
                            maxDate: new Date(maxD.getFullYear(), maxD.getMonth(), maxD.getDate()),
                            changeFirstDay: false});

                        $('#endDate').datepicker({
                            changeMonth: true,
                            changeYear:true,
                            dateFormat:getDatePattern(),
                            monthNamesShort: getTitleMonths(),
                            dayNamesMin: getTitleDays(),
                            constrainInput: true,
                            minDate: new Date(minD.getFullYear(), minD.getMonth(), minD.getDate()),
                            maxDate: new Date(maxD.getFullYear(), maxD.getMonth(), maxD.getDate()),
                            changeFirstDay: false});

                    }); 
```

但是上面的代码在另一个当地国家/地区无法正常工作......它总是选择我的系统日期格式“mm/dd/yyyy”。

所以我尝试格式化日期 var dateFormat = "dd.mm.yyyy"; var startDate = "16/05/2012";

dateFormat 可能会有所不同，例如 dd/mm/yyyy、m/dd/yyyy、dd-mm-yyyy 等。基于此 startDate 应该格式化。除了按分隔符拆分之外，还有其他需要选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:56:47.297

我个人使用[这个日期格式化程序](http://blog.stevenlevithan.com/archives/date-time-format)，它是所有日期格式化的忍者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:54:06.017

你可以试试[Datejs](http://www.datejs.com/)库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:54:08.070

[jQuery dateFormat](http://plugins.jquery.com/project/jquery-dateFormat)是一个很好的插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T12:10:07.450

**在您的页面中添加 jquery ui 插件。**

```
function DateFormate(dateFormate, dateTime) {
    return $.datepicker.formatDate(dateFormate, dateTime);
}; 
```

# javascript - window.open 全屏在 Windows 7 IE 中不起作用

> ID：10620034
> 
> 赞同：2
> 
> 时间：2012-05-16T13:52:06.213
> 
> 标签：javascript

我在 Javascript 下面使用了全屏打开浏览器（没有关闭按钮）

```
popupwindow = window.open("name.aspx?Email="+Email+"&AssessmentID="+AssessmentID+"&Attempts="+Attempts+"","List","menubar=no,fullscreen=yes,directories=no,scrollbars=yes,resizable=no,close=no,top=0,left=0,right=0,titlebar=no,toolbar=no,statusbar=no"); 
```

但它确实在 windows xp IE 中完美运行......但在 Windows 7 默认版本 IE 浏览器中无法运行......请对我有帮助......

我使用全屏进行在线考试..我只是不让用户切换到其他窗口...

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T23:38:04.230

`fullscreen`可以传递给`window.open`函数的特性是专有的和IE [-only](https://developer.mozilla.org/en/DOM/window.open#section_8)。已经在旧版本的 Windows 上，它会表现得无法控制，并且微软几年前建议不要使用（当时非正式地弃用该功能并将其更改为显示最大化的 windows ¹）。换句话说，你根本**不**应该使用这个标志。

到目前为止，坏消息，好消息；全屏功能**有意义**的唯一情况是视频和游戏。如果您正在处理视频，那么我强烈建议您使用 flash 来提供全屏支持（尽管目前所有反斜杠都针对 flash，但目前它是唯一的全屏选项）并且如果您正在开发 html5 游戏 IE 支持毫无意义，您可以使用[全屏 javascript API](https://developer.mozilla.org/en/DOM/Using_full-screen_mode#section_10)（[除了 IE 之外的所有浏览器都支持](http://caniuse.com/#feat=fullscreen)）。

新的全屏 API 和旧的全屏 IE 标志之间的主要区别在于，现在*非常*清楚地向用户显示如何退出全屏，并显示一个巨大的对话框/警告，向用户显示他已进入全屏以防止滥用。

* * *

^(1 如果您对细节感兴趣，IE6 SP2 将`fullscreen=yes`标志的行为从 kiosk 模式更改为最大化模式，如此[处](http://technet.microsoft.com/en-us/library/bb457150.aspx#ECAA)所述。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T19:07:55.310

给定您的环境，最简单和最可靠的方法是编写一个简单的 WinForms 应用程序，该应用程序使用 WebBrowser ActiveX，打开您的网站并全屏显示。

使用 C#（因为 Windows 7 预装了 .NET 3.5）这将需要 5-10 行代码。

此外，从桌面应用程序中，您可以[禁用可能会破坏考试体验的 Windows 键等键](http://msdn.microsoft.com/en-us/library/windows/desktop/ee416808%28v=vs.85%29.aspx)，如果用户有多个显示器，则可以关闭其他显示器等。

如果您有一个公共网站，最好的方法是将其部署为[ClickOnce 应用程序](http://msdn.microsoft.com/en-us/library/wh45kb66%28v=vs.90%29.aspx)- 无需手动安装或给用户带来其他麻烦，只需单击“启动”，即可开始使用。也适用于非管理员用户。

# c++ - 在未安装视觉的计算机上设置 xll

> ID：10620038
> 
> 赞同：0
> 
> 时间：2012-05-16T13:52:18.140
> 
> 标签：c++, visual-studio-2010, excel, dependencies, xll

我用visual studio 2010和excel 2010开发了一个xll。它在安装了visual的计算机上的excel上运行良好。但是现在，我试图在没有安装视觉的计算机上使用我的 xll，所以我想创建一个设置。

事实上，我试图在没有安装任何东西的 Windows 上执行我的 xll（仅限 excel 2010）：它不起作用。所以我在 X64 和 X86 中安装了“visual 2010 C++ 可再发行包”。在我再次尝试在 excel 中执行我的 xll 之后，它不再工作了。

**编辑**：我在我的两个 xll 上使用了“depends.exe”。在不工作的 xll 上，C:\windows\system32\SHLWAPI.DLL 在左边有一张红色图片，但工作的 xll 没有这个 dll 错误：

![依赖.exe的错误](../Images/5323270549ffa543ec057ffc5991ba5c.png)

所以我的问题是除了 C++ 包之外 xll 需要什么才能在没有视觉的计算机上执行？

或者你有一个简单的方法来为 xll 创建一个设置（我已经创建了一个带有视觉的设置但它不工作所以也许还有其他方法......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:00:41.227

对于 VS 2010 ( [http://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555) ) 和带有 Service Pack 1 的 VS 2010 ( [http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328)），您需要安装与您的开发环境匹配的那个。

另一种方法是为您的加载项更改为 C/C++ 运行时的静态链接。

![设置运行时库](../Images/3b732c6f5c1aaaeb8786a677c45fcff6.png)

还要检查您的 Excel 宏安全性是否设置为“高”或禁用加载项的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:53:04.703

使用[http://xll.codeplex.com](http://xll.codeplex.com)创建 xll，您不必担心这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:15:18.217

问题解决了 ：

首先，您需要为带有 Service Pack 1 的 VS2010安装可再发行的开发环境（[http://www.microsoft.com/downloads/fr-fr/details.aspx?FamilyID=c68ccbb6-75ef-4c9d-a326-879eab4fcdf8](http://www.microsoft.com/downloads/fr-fr/details.aspx?FamilyID=c68ccbb6-75ef-4c9d-a326-879eab4fcdf8) ） ( [http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328) ) 用于 VS。

第二次您需要为 Office 运行时安装 Visual Studio 2010 工具 ( [http://www.microsoft.com/downloads/fr-fr/details.aspx?familyid=06c32242-2289-4471-93aa-ce96aa5cbc36](http://www.microsoft.com/downloads/fr-fr/details.aspx?familyid=06c32242-2289-4471-93aa-ce96aa5cbc36) )

# php - 是否可以在不使用ajax请求的情况下检查用户是否在线？

> ID：10620042
> 
> 赞同：2
> 
> 时间：2012-05-16T13:52:28.743
> 
> 标签：php, jquery, real-time, user-experience

如果可能的话，我正在寻找一种在不使用 ajax（实时）的情况下显示在线用户/朋友的解决方案。我想避免在每个指定的时间间隔后向服务器发出 ajax 请求以检查用户是否在线。目前，该应用程序工作正常并显示在线用户，但向服务器发出巨大请求以使用 ajax 方法检查用户是否在线。此外，由于大量的 ajax 调用，有时浏览器行为也会受到影响。[更多信息：我正在使用 MySql 数据库、PHP、Jquery。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:27:34.050

以某种方式或其他方式，您将不得不在时间间隔后对服务器进行 ajax 调用以通信/获取在线用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:02:29.953

我的建议是每次用户访问页面时更新数据库中的字段。要确定他们是否仍然在线，请检查最后一次访问是否在某个时间间隔内，例如 20 分钟前。如果不是，则假设它们处于脱机状态。

这可能是最简单的方法，尽管它并不完全是“实时的”。如果我只是关闭浏览器就离开了您的网站，那么从那时起 20 分钟后我将不会显示为“离线”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:47:26.763

以下是您应该如何做的明确看法：

*   用户请求页面
*   记录发出请求的时间（将用户标记为活动）
*   获取最近<N分钟活跃的好友列表
*   服务页面

基本上，每次页面加载都会刷新用户的“最后一次看到”时间，如果用户在阈值内，则认为该用户处于活动状态。更重要的是，用户处于非活动状态。大多数聊天客户端会在 15 分钟后将用户标记为非活动状态，例如按键等，在我们的例子中，进行页面加载。

如果您想要实时数据，没有比使用 AJAX（间隔轮询和连接保持）其他（更好）的方法。除了 ajax 之外，我之前使用过的一些用于触发页面加载的粗略技术包括：

*   隐藏的、不断刷新的 iframe，或者加载好友列表的 iframe 间隔
*   使用路由 url 间隔加载 1x1，缓存破坏的 gif，以便它将通过日志记录机制。

您可以使用[WebSockets](http://en.wikipedia.org/wiki/WebSocket#Browser_support)`ExternalInterfaceCall` ，但除非您使用 flash 的套接字功能并从 flash 调用 JS，否则它远非跨浏览器。

# ms-access - Access 2010：自动更新字段值

> ID：10620045
> 
> 赞同：1
> 
> 时间：2012-05-16T13:52:46.223
> 
> 标签：ms-access, ms-access-2010

在访问 2010 中：

我有表“药房”，我有一个名为“ph_quantity”的字段。我也有表“仓库”，我有一个名为“wh_quantity”的字段。在“仓库”中，我还有一个名为“available_stock”的字段。

每当我要更改“ph_quantity”或“wh_quantity”时，我想自动更新“available_stock”的值。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:57:43.250

MS Access 2010 中有两个新功能应该对您有用。

> 在 Access 2010 中，您可以创建计算值的表字段。计算可以包括来自同一表中的字段的值以及内置的 Access 函数。

-- [http://office.microsoft.com/en-us/access-help/add-a-calculated-field-to-a-table-HA101820564.aspx](http://office.microsoft.com/en-us/access-help/add-a-calculated-field-to-a-table-HA101820564.aspx)

[在 Access 2010 应用程序中使用数据宏将逻辑附加到数据](http://msdn.microsoft.com/en-us/library/ff973807.aspx)

# css - 设置一个临时/相对根 CSS 选择器？

> ID：10620047
> 
> 赞同：0
> 
> 时间：2012-05-16T13:52:53.587
> 
> 标签：css, class, selector, root

像往常一样，我在谷歌上搜索并通读了文档（[W3C 的 CSS 选择器文档](http://www.w3.org/TR/CSS2/selector.html)），但仍然无法找到答案。

解释我为什么以这种方式设置样式表非常困难，而且几乎肯定会适得其反，所以我将向您展示我的 CSS 样式表的一部分，并询问我来这里要问什么。

我知道`.className`，例如，它是一个全局类 - 它适用于在样式表链接到的所有页面上使用它的每个元素 - 并且`#sectionID .className`，例如，它是一个本地类 - 它仅适用于在 ID 为 的元素内部使用它`sectionID`。

那么，有没有办法以某种方式为样式表设置一个临时/相对根，以便以下提取：

```
#sectionID1 .className1, #sectionID1 .className2, #sectionID1 .className3, #sectionID1 a, #sectionID1 a:link, #sectionID1 a:visited, #sectionID1 a:hover, #sectionID1 a:active, #elementID2 input {
    color: #0084B4;
} 
```

可以变成这样：

```
#sectionID1 .className1, .className2, .className3, a:link, a:visited, a:hover, a:active, #elementID2 input {
    color: #0084B4;
} 
```

谢谢 ：）

（对不起，我的解释不好，几乎可以肯定，术语使用不正确：L）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:55:43.667

不，但你可以使用类似[LESS](http://lesscss.org/)的东西来实现这样的动态

# php - 通过 php 在 Intranet 上显示 RSS 提要项

> ID：10620048
> 
> 赞同：0
> 
> 时间：2012-05-16T13:52:59.727
> 
> 标签：php, rss

我整天都在这。我们在办公室有一个内部网，有些电脑没有互联网接入。我正在尝试将此网站的 RSS ( **http://news.bbc.co.uk/onthisday/** ) 放入带有图像的表格中并显示在内网上，这可能吗？有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:57:33.830

```
http://newsrss.bbc.co.uk/rss/on_this_day/front_page/rss.xml 
```

这是您的 XML，只需使用 SimpleXML 从中获取数据。真的很简单。

让你开始的东西：

```
$a = curl_init("http://newsrss.bbc.co.uk/rss/on_this_day/front_page/rss.xml");
curl_setopt($a, CURLOPT_RETURNTRANSFER,1);
$b = curl_exec($a);

$xml = simplexml_load_string($b);

var_dump($xml); 
```

# c# - 如何在回发后执行按钮单击以打开模式窗口

> ID：10620050
> 
> 赞同：2
> 
> 时间：2012-05-16T13:53:05.570
> 
> 标签：c#, asp.net, html, twitter-bootstrap

我无法让我的按钮在回发后执行点击。我正在验证网页上模态窗口中的一些文本框，这些文本框仅在单击按钮后出现。目前回发后网页重新打开，模式窗口关闭，需要打开。我的代码中没有处理程序，单击按钮并运行 html 代码以调出模态窗口。一旦我发回消息，我需要这个按钮来执行点击，以便启动验证。我曾尝试使用 btnSickness.Click() 但它似乎不喜欢这样，而且似乎在任何地方都找不到任何东西！代码：

```
public partial class _Default : System.Web.UI.Page
{

    int i = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (i > 0)
           {
           }      

    }

    protected void chkDoctor_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (drpDoctor.SelectedValue == "Yes")
        {
            txtIfNoWhy.ReadOnly = true;
            txtIfNoWhy.BackColor = Color.LightGray;
            i++;
        }
        else if (drpDoctor.SelectedValue == "No")
        {
            txtDocName.ReadOnly = true;
            txtHouseName.ReadOnly = true;
            txtStreet.ReadOnly = true;
            txtTownCity.ReadOnly = true;
            txtCounty.ReadOnly = true;
            txtPostalcode.ReadOnly = true;
            txtInitialDate.ReadOnly = true;
            txtTreatmentRecieved.ReadOnly = true;
            txtCurrentTreatment.ReadOnly = true;

            txtDocName.BackColor = Color.LightGray;
            txtHouseName.BackColor = Color.LightGray;
            txtStreet.BackColor = Color.LightGray;
            txtTownCity.BackColor = Color.LightGray;
            txtCounty.BackColor = Color.LightGray;
            txtPostalcode.BackColor = Color.LightGray;
            txtInitialDate.BackColor = Color.LightGray;
            txtTreatmentRecieved.BackColor = Color.LightGray;
            txtCurrentTreatment.BackColor = Color.LightGray;
            i++;
        }
    }
} 
```

模态窗口代码：

```
<div class"modal" id="myModal"></div> 
    <div class="row-fluid">
        <div class="span2">
                <asp:Button runat="server" class="btn" data-toggle="modal" href="#Div1" ID="btnSickness" Text="Submit a Sickness Form" />
                       <div class="modal hide" id="Div1">
<div class="modal-header">
<button class="close" data-dismiss="modal">×</button>
<h3>Sickness Form</h3>
</div>
<div class="modal-body">
<p>Please fill in the following information regarding your sickness</p>
<br />
<p>Sickness Date From:</p>
<asp:TextBox runat="server" ID="txtSicknessFrom"></asp:TextBox>
<br />
<p>Sickness Date To:</p>
<asp:TextBox runat="server" ID="txtSicknessTo"></asp:TextBox>
    <br />
<p>Absence Date To:</p>
<asp:TextBox runat="server" ID="txtAbsenceFrom"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:02:17.337

您可以设置一个隐藏字段来告诉模态框在您从服务器返回时显示。然后您可以添加一个 pageLoad javascript 函数，该函数在每次 pageLoads 时运行，以检查您是否需要显示模态。

**服务器端**：

```
hdf_ShowModal.Value = "true"; 
```

**HTML**：

```
<asp:HiddenField runat="server" ID="hdf_ShowModal" /> 
```

**Javascript**：

```
function pageLoad(sender, args)
{
    if(document.getElementById('<%= hdf_ShowModal.ClientID %>').value == "true")
    {
        // perform code to show modal
    }
} 
```

**编辑**：

由于您也在使用 jquery，因此您可以尝试以下方法来显示模态：

```
function pageLoad(sender, args)
{
    if($('[id$=hdf_ShowModal]').val() == "true")
        $('#myModal').modal({ show: true });
} 
```

# html - 如何将多个 onClick 事件链接到 HTML 中的一个元素？我可以让他们改变href吗？

> ID：10620052
> 
> 赞同：7
> 
> 时间：2012-05-16T13:53:10.297
> 
> 标签：html, onclick, mouseevent, href, replace

我正在为我正在实习的一家公司建立一个页面，但似乎无法弄清楚这一点。您在下面看到的代码只是一个简化的模板，因此我不会提供有关公司的任何信息（并且所有样式属性都在单独的文档中，因此代码中的所有内容都可以。

我遇到的问题是使多个 onClick 事件起作用。就此而言，在评论标签中使用 onClicks 是否可行？我希望显示“进一步说明”的文本根据单击的动物图片更改其 href 路径。

另外，我不能使用任何 JavaScript，所以请不要建议使用任何 JavaScript。碰巧有什么想法吗？

```
<div id="container">
    <div class="mainPicture">
        <img alt="" id="awesome" name="Awesome2" src="awesome.png" />
    </div>
    <div id="gallery">
        <ul class="popOut">
            <li>
                <a href="DogText.html" target="AnimalInfo" onClick="document.Awesome2.src='dog.jpg'"> <!--onClick="document.furtherInstructions.href='DogText.html'">--> 
                    <img src="dog.jpg" alt="dog"><img src="dog.jpg" alt="dog" class="preview"> 
                </a>
            </li>   
            <li>
                <a href="CatText.html" target="AnimalInfo" onClick="document.Awesome2.src='cat.jpg'"> <!--onClick="document.furtherInstructions.href='CatText.html'">-->
                    <img src="cat.jpg" alt="cat"><img src="cat.jpg" alt="cat" class="preview"> 
                </a>
            </li>   
            <li>
                <a href="ParrotText.html" target="AnimalInfo" onClick="document.Awesome2.src='parrot.jpg'"> <!--onClick="document.furtherInstructions.href='ParrotText.html'">-->
                    <img src="parrot.jpg" alt="parrot"><img src="parrot.jpg" alt="parrot" class="preview"> 
                </a>
            </li>       
            <li>
                <a href="LizardText.html" target="AnimalInfo" onClick="document.Awesome2.src='lizard.jpg'"> <!--onClick="document.furtherInstructions.href='LizardText.html'">--> 
                    <img src="lizard.jpg" alt="lizard"><img src="lizard.jpg" alt="lizard" class="preview"> 
                </a>
            </li>       
            <li>
                <a href="HorseText.html" target="AnimalInfo" onClick="document.Awesome2.src='horse.jpg'"> <!--onClick="document.furtherInstructions.href='HorseText.html'">-->
                    <img src="horse.jpg" alt="horse"><img src="horse.jpg" alt="horse" class="preview"> 
                </a>
            </li>       
            <li>
                <a href="ChickenText.html" target="AnimalInfo" onClick="document.Awesome2.src='chicken.jpg'"> <!--onClick="document.furtherInstructions.href='ChickenText.html'">--> 
                    <img src="chicken.jpg" alt="chicken"><img src="chicken.jpg" alt="chicken" class="preview"> 
                </a>
            </li>   
            <li>
                <a href="DefaultText.html" target="AnimalInfo" class="center" onClick="document.Awesome2.src='awesome.png'"> <!--onClick="document.furtherInstructions.href='DefaultText.html'">-->
                    <p>Default Image</p>
            </a>
            </li>
        </ul>
        <div id="rightcol">
            <iframe src="DefaultText.html" title="Information About Animals" name="AnimalInfo" class="fixThisHeight">
            </iframe>
        </div>
        <div id="externalInstructions">
            <a href="DefaultText.html" name="furtherInstructions">
                <p>Further Instructions</p>
            </a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T13:54:31.640

只需用分号分隔您的命令：

```
onClick="document.Awesome2.src='chicken.jpg'; document.furtherInstructions.href='ChickenText.html';"> 
```

# php - CI2 hmvc 数据映射器

> ID：10620055
> 
> 赞同：0
> 
> 时间：2012-05-16T13:53:19.757
> 
> 标签：php, codeigniter-2, hmvc, codeigniter-datamapper

> 致命错误：第 5 行 C:\xampp\htdocs\test\ci\application\libraries\datamapper.php 中允许的内存大小为 194217728 字节已用尽（尝试分配 261904 字节）

问题是什么？它可以正常工作，但是在尝试运行任何数据映射器功能时会出现错误。

数据库配置在`../config/database.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:30:21.443

这是一个内存问题。您的代码中的某些内容正在消耗内存。您可以使用 memory_get_peak_usage() 和 memory_get_usage() 来更好地了解正在发生的事情，或者使用像 xdebug+webgrind 这样的分析器。

[http://us3.php.net/manual/en/function.memory-get-usage.php](http://us3.php.net/manual/en/function.memory-get-usage.php) http://us3.php.net/manual/en/function.memory-get-peak-usage.php [https: //github.com/jokkedk/webgrind](https://github.com/jokkedk/webgrind)

# gcc - sfinae for g++ 4.1.2

> ID：10620059
> 
> 赞同：0
> 
> 时间：2012-05-16T13:53:42.450
> 
> 标签：gcc, g++, sfinae, typename

我对使用 G++ 4.1.2 的 SFINAE 有疑问。

以下代码适用于 4.6：

```
#include <stdio.h>

class Test
{
public:
    int x;
};

template <typename T> 
inline T f(T v) { return v;}                // Definition #2

template <typename T> 
inline typename T::x f(T v) { return v.x; } // Definition #1

int main()
{
Test t;
t.x = 100;

    printf("Test.x = %d\n", f(t));
    printf("int = %d\n", f(10));
} 
```

自然地，输出是：

```
Test.x = 100
int = 10 
```

我需要类似的东西才能在 g++ 4.1.2 上工作，有什么想法吗？坦率地说，我不明白这两个编译器之间怎么会有这么大的区别！

或者，如果您有替代方案，那就太好了。有模板的东西！或者宏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:18:51.683

我实际上解决了我的部分问题......

但是对于这里的这种情况，它应该是`template<class T>`而不是`template<typename T>`......

所以对我自己来说只有半个 Hi-5。但是对于第二部分，我使用了另一种方法，这样做很烦人，但它确实有效。

# java - Java 中 Android 上 OpenCV 中的 CaptureFromFile

> ID：10620062
> 
> 赞同：3
> 
> 时间：2012-05-16T13:54:00.213
> 
> 标签：java, android, opencv

也许我有点慢，但我找不到相当于 CaptureFromFile 来从 Android 上的 Java 中的 OpenCV 文件中一一抓取视频帧。

任何人都可以让我摆脱痛苦并告诉我去哪里看吗？

非常感谢

巴里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:28:28.963

OpenCV 尚不支持 Android 上的视频读取/写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T18:40:16.133

看看[这里](https://stackoverflow.com/questions/5337505/android-capture-video-frame)的解决方案。此外，Open CV 似乎可以通过 Android NDK 获得，[在这里](http://www.stanford.edu/~zxwang/android_opencv.html)您可以找到如何使用它。另外，你可以看看[Processing](http://processing.org/)，我相信它支持 Open CV 并且能够将代码导出为 apk。

# ios - 我可以在 UIWebView 中为输入文本字段设置委托吗？

> ID：10620069
> 
> 赞同：0
> 
> 时间：2012-05-16T13:54:12.200
> 
> 标签：ios, uiwebview, cordova, textinput, uitextfielddelegate

我正在使用 PhoneGap 在 iOS 上开发和应用程序。在 的 HTML 内容中`UIWebView`，有一个输入文本字段`<input />`。

我的问题是我能知道这个`<input />`文本字段的动作`textFieldDidEndEditing:`吗？或者我可以为此`<input />`文本字段设置委托。如果可能，请告诉我如何。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:37:16.000

您可以在 UIWebView 中获取 HTML 输入的 onchange 事件

`<input type="text" onchange="changeEvent(this)" id="myInput">`

`<script>`
`function changeEvent(ele) {`

`alert(ele.value);`

`}`
`</script>`

# java - set 有一行数据，但是当我尝试检索数据时出现异常

> ID：10620070
> 
> 赞同：0
> 
> 时间：2012-05-16T13:54:13.213
> 
> 标签：java, jdbc, resultset

以下代码段从数据库中获取照片的名称：

```
 Context context = new InitialContext();
        DataSource ds = (DataSource)context.lookup("java:comp/env/jdbc/photog");
        Connection connection = ds.getConnection();
        String sqlQuery = "select nameofthephoto from photocaptions where useremail='" + email + "'";
        PreparedStatement statement = connection.prepareStatement(sqlQuery);
        set = statement.executeQuery();
        if(set == null) {
            System.out.println("set is null !");
        } else if(set != null) {
            System.out.println("set is not null !");
            System.out.println(set.next());
            System.out.println(set.getString("nameofthephoto")); // last statement
          } 
```

**else-if 块执行**

代码最后两条语句的结果是：

```
false 
```

最后一条语句引发异常，即

> java.sql.SQLException：当前光标位置的操作无效。

表中只有一个“数据行”与查询匹配，这也可以通过 显示的错误结果可见`while.next()`。那么为什么上面代码片段中的最后一条语句（stacktrace 这么说）会引发异常？_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:58:57.253

就在文档中，

> 当调用 next 方法返回 false 时，光标位于最后一行之后。任何需要当前行的 ResultSet 方法调用都将导致抛出 SQLException。

这说明了一切，您已经通过了行列表，因此您的下一条获取记录的语句抛出错误，

如果没有行，next 将返回 false，如果有行，则返回 true。所以你能检查你的数据库中是否有任何行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:00:36.613

set.next() 将光标从当前位置向前移动一行并返回 true。但是在您的情况下，结果集中没有数据可以向前移动光标。因此无法执行您想要的操作。

# delphi - 使用 Delphi 内联汇编器创建类实例

> ID：10620072
> 
> 赞同：5
> 
> 时间：2012-05-16T13:54:31.410
> 
> 标签：delphi, inline-assembly, basm

我想做的是，使用程序集，创建一个类实例，调用其中一个方法，然后释放实例。

我知道我错过了一些非常重要并且可能非常简单的东西，但我不知道是什么。

```
program Project2;

{$APPTYPE CONSOLE}

uses
  SysUtils;

type
  TSomeClass = class(TObject)
  private
    FCreateDateTime: string;
  public
    constructor Create;
    procedure SayYeah;
  end;

constructor TSomeClass.Create;
begin
  FCreateDateTime := DateTimeToStr(Now);
end;

procedure TSomeClass.SayYeah;
begin
  Writeln('yeah @ ' + FCreateDateTime);
end;

procedure Doit;
asm
  CALL TSomeClass.Create; // <= Access Violation
  CALL TSomeClass.SayYeah;
  CALL TSomeClass.Free;
end;

begin
  try
    Doit;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

仅供参考：我想了解如何在低水平上实现这一目标，而不是另一种方式。

**更新**：

感谢 Andreas Rejbrand，我设法找到了罪魁祸首：

**更新2**：

感谢 Arnaud 使用 EBX 而不是 PUSH/POP EAX 发现缺陷

```
var
  TSomeClass_TypeInfo: Pointer;

procedure Doit;
asm
  MOV DL, $01;
  MOV EAX, TSomeClass_TypeInfo;
  CALL TSomeClass.Create;
  PUSH EAX;
  CALL TSomeClass.SayYeah; // call method
  POP EAX;
  MOV DL, $01;
  CALL TSomeClass.Free; // pointer to instance(Self) is expected in EAX
end;

begin
  TSomeClass_TypeInfo := TSomeClass;
  try
    Doit;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T15:46:16.007

您的 asm 代码不正确。

您正在重载`ebx`必须保留的寄存器。并且全局变量技巧没有意义。

更好的编码应该是：

```
procedure Doit(ClassType: pointer);
asm // eax=TList
  mov dl,true // hidden boolean 2nd parameter
  call TObject.Create
  push eax
  call TList.Pack
  pop eax
  call TObject.Free
end;

DoIt(TList); 
```

但它不保护带有`try...finally`. :)

关于`mov dl,true`参数，请参见[EMB wiki 的官方页面](http://docwiki.embarcadero.com/RADStudio/en/Program_Control)：

> 构造函数和析构函数使用与其他方法相同的调用约定，只是传递了一个额外的布尔标志参数来指示构造函数或析构函数调用的上下文。
> 
> 构造函数调用的标志参数中的 False 值表示构造函数是通过实例对象或使用继承关键字调用的。在这种情况下，构造函数的行为类似于普通方法。构造函数调用的标志参数中的 True 值表示构造函数是通过类引用调用的。在这种情况下，构造函数创建 Self 给定的类的实例，并返回对 EAX 中新创建的对象的引用。
> 
> 析构函数调用的标志参数中的值为 False 表示使用继承关键字调用了析构函数。在这种情况下，析构函数的行为类似于普通方法。析构函数调用的标志参数中的 True 值表示析构函数是通过实例对象调用的。在这种情况下，析构函数在返回之前释放 Self 给定的实例。
> 
> flag 参数的行为就像它在所有其他参数之前声明一样。在寄存器约定下，它在 DL 寄存器中传递。根据帕斯卡约定，它在所有其他参数之前被推送。在 cdecl、stdcall 和 safecall 约定下，它被推送到 Self 参数之前。
> 
> 由于DL寄存器指示了构造函数还是析构函数在调用栈的最外层，所以必须在退出前恢复DL的值，这样才能正确调用BeforeDestruction或AfterConstruction。

`eax`因此，由于我们的对象不是`nil`这样我们可以直接调用*析构函数*，因此另一种有效的编码可能是：

```
procedure Doit(ClassType: pointer);
asm // eax=TList
  mov dl,true
  call TObject.Create
  push eax
  call TList.Pack
  pop eax
  mov dl,true
  call TList.Destroy
end; 
```

在所有情况下，对象访问`asm`并不意味着以这种方式完成。您无法直接访问类型信息，因此可能很难使用它。使用现有`class`实例，您可以使用方法做任何您想做的事情`asm`；但是创建实例并使用类类型，`asm`绝对不是自然的方式！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:16:58.717

[您可以在最初在这里](http://www.delphi3000.com/articles/article_3766.asp)找到的 Delphi 汇编编程的优秀指南中了解这一点。不幸的是，该站点已关闭，但您可以[在此处](http://web.archive.org/web/20080512034634/http://www.delphi3000.com/articles/article_3766.asp)找到存档版本。请特别查看[第 5 页](http://web.archive.org/web/20080512043601/http://www.delphi3000.com/articles/article_3770.asp)。

# mysql - 如何修复命令“mysql -v”上的错误

> ID：10620075
> 
> 赞同：0
> 
> 时间：2012-05-16T13:54:39.420
> 
> 标签：mysql, ruby, database, shell, command-line

嗨，所有命令行/mysql专家，

输入命令“mysql -v”时出现错误

我懂了： `ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)`

我在想的是我需要更新所在的代码，`/var/run/mysqld/mysqld.sock`然后将其指向存在的某个地方，或者替代方法是创建一个文件 mysqld.sock 并将其放在目录中`/var/run/mysqld/`。

但我不知道从哪里开始。：C

任何想法都会很受欢迎。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:02:56.903

首先：

1.  您是否正在尝试连接到在本地计算机上运行的 MySQL 服务器？检查它是否正在运行类似的东西

    $> ps -efl | grep mysql | grep -v "grep"

2.  它是否正常工作，但您仍然无法连接？好吧，那你可以在文件 /etc/my.cnf 中检查袜子之类的东西

3.  您是否尝试连接不在本地页面中的服务器？然后你必须告诉 mysql 去哪里（假设你尝试连接到位于 111.111.111.111 的服务器：

    $> mysql -h 111.111.111.111

# asp.net - 向生成的控件添加自定义 HTML 属性

> ID：10620078
> 
> 赞同：2
> 
> 时间：2012-05-16T13:54:50.553
> 
> 标签：asp.net, .net, asp.net-mvc-3, razor

我只想为我生成的`input`元素添加一个占位符。

这是正在生成的

```
<input class="text-box single-line" data-val="true" data-val-required="The Username field is required." id="Username" name="Username" type="text" value=""> 
```

这是生成 HTML 输出的代码

```
@Html.EditorFor(model => model.Username) 
```

当然，我可以删除生成的代码并自己编写，只包含必要的字段，但是也许可以只传递某种参数给`EditorFor`它添加`placeholder`属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:37:01.723

您可以使用@Html.TextBoxFor 代替@HtmlEditorFor，然后像这样编写htmlAttributes：

```
@Html.TextBoxFor(model => model.Username, new { placeholder = "Username..." }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:11:59.710

尝试

```
@Html.EditorFor(m => model.Username, new { data_val_attribute = "value" }); 
```

大多数助手都会有一个重载，它接受匿名对象作为最后一个参数，用于在生成的标记中指定属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:30:13.620

@Html.EditorFor(model => model.Username, new { placeholder = "Username..." }) 应该可以工作，除非您的模型不为空。您是否检查过您的模型是否为空？

# ruby - Sinatra 中的应用程序数据

> ID：10620082
> 
> 赞同：0
> 
> 时间：2012-05-16T13:55:03.417
> 
> 标签：ruby, sinatra

假设我有一些对象只需要在应用程序中创建一次，但可以从多个请求中访问。对象是不可变的。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:39:19.073

如果该对象仅使用一段时间，则将其丢弃（如果再次需要，则重新创建），使用一些缓存机制，如 memcached 或 redis。

如果设置此类服务很繁重并且您想避免它，并且 - 比如说 - 您正在使用 Debian/Ubuntu，那么将您的对象保存到 /shm 设备中的文件（使用 Marshal-ing）中，这实际上是内存。

如果数据的结构很复杂，那么按照上面的建议使用 SQLite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T16:08:55.420

你想持久化你的对象。通常你会使用一些 ORM，比如 Active Record 或 Datamapper。取决于您可以使用什么。如果你想要一些没有迁移的简单的东西，并且你可以访问 MongoDB，请使用 mongomapper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:02:45.947

将它们存储在会话中。
如果您不想在服务器重新启动后丢失它们，请使用数据库（例如，SQLite，它是单个文件）。

# c++ - 试图传递一个 sf::Image 有一个类的参数

> ID：10620092
> 
> 赞同：0
> 
> 时间：2012-05-16T13:55:35.437
> 
> 标签：c++, sfml

所以，我试图在 SFML 中创建一个 pacman 游戏，我为我的幽灵创建了一个名为 fant 的类，我试图传递一个 sf::Image 在我的类中有一个参数，但似乎我得到了一个没有值的变量，导致它加载一个空白图像，但它与我试图加载的图像具有相同的大小（18x18 像素）。

我的课是

```
class fant {
public:
    void SetX(int i);
    int GetX();
    void SetY(int i);
    int GetY();
    void SetDX(int i);
    int GetDX();
    void SetDY(int i);
    int GetDY();
    void Sprite(sf::Sprite i);
    sf::Sprite GetSprite();
    void Image(sf::Image i);
protected:
    int posx,posy,dirx,diry;
    sf::Sprite sprite;
};

void fant::SetX(int i) { posx=i; sprite.SetX(posx); }
void fant::SetY(int i) { posy=i; sprite.SetY(posy); }
void fant::SetDX(int i) { dirx=i; }
void fant::SetDY(int i) { diry=i; }
void fant::Sprite(sf::Sprite i) { sprite=i; }
void fant::Image(sf::Image i) { sprite.SetImage(i); }
sf::Sprite fant::GetSprite() { return sprite; }
int fant::GetX() { return posx; }
int fant::GetY() { return posy; }
int fant::GetDX() { return dirx; }
int fant::GetDY() { return diry; } 
```

那是一个创建新对象的函数

```
void addf() {
    fa.push_back(fant());
    int t=fa.size()-1;
    fa[t].SetX(684); fa[t].SetY(18);
    fa[t].Image(f1);
    fa[t].SetDX(6);
    fa[t].SetDY(0);
} 
```

如果我使用

```
void fant::Image(sf::Image i) { sprite.SetImage(f1); } 
```

它设置“f1”图像。（一个全局 sf::Image）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:47:52.643

```
class fant {
public:

sf::Sprite GetSprite()
{
   return sprite;
}
void LoadImage(std::string path);
protected:
int posx,posy,dirx,diry;
sf::Sprite sprite;
sf::Image image;
}; 
```

和

```
void fant::LoadImage(std::string path)
{
   image.LoadFromFile(path.c_str());
   sprite.SetImage(image);
} 
```

# http - Apache Camel Route - 多个 HTTP 请求的正则表达式

> ID：10620093
> 
> 赞同：2
> 
> 时间：2012-05-16T13:55:38.547
> 
> 标签：http, apache-camel, apache-servicemix

`USER_AUDIT`以下是使用 http 请求列表进行事务处理时 路由消息的示例：`http://www.blabla.com/dothis/USER_AUDIT?AA=aa&BB=bb`

```
 <when>
      <simple>${in.header.CamelHttpPath} regex '(?i)/USER_AUDIT'</simple>
      <bean ref="transactionList" method="get" />
      <bean ref="transactionTransform" method="convert" />
    </when> 
```

现在我想将其他事务路由`CARD_VER`到相同的路由。是否有类似的语法：

```
<simple>${in.header.CamelHttpPath} regex '(?i)/USER_AUDIT' || '(?i)/CARD_VER'</simple> ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:29:20.007

在正则表达式中，您可以添加“或”，以便您可以匹配 2 中的任何一个是否匹配。但是你需要一点 reg exp ninja 来做到这一点。那将是相似的

```
'(?i)/[USER_AUDIT|CARD_VER]' 
```

但是请检查 JavaDoc 中的正则表达式：[http](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html) ://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html 。以及其他有关如何执行正则表达式的文档。您还可以在 Java 编辑器中安装一些插件，您可以在其中即时试用正则表达式，找出适合您的模式。

但是，在 Camel 中的简单表达式中，您也可以使用二元运算符，并添加第二个表达式。所以它会是这样的：

```
<simple>${in.header.CamelHttpPath} regex '(?i)/USER_AUDIT' ||
        ${in.header.CamelHttpPath} regex '(?i)/CARD_VER'</simple> 
```

在 Camel 2.8.x 或更早版本中，您只能拥有 1 个二元运算符，但从 Camel 2.9 开始，您可以拥有任意数量的二元运算符。

有关 Simple 表达式，请参阅 Camel 文档中的详细信息。请参阅有关运算符的部分：[http ://camel.apache.org/simple](http://camel.apache.org/simple)

# java - 为什么输出每次都不同而不是同步块

> ID：10620097
> 
> 赞同：2
> 
> 时间：2012-05-16T13:55:48.157
> 
> 标签：java, multithreading, synchronization

```
class Callme {
   void call(String msg) {
      System.out.print("[" + msg);
      try {
         Thread.sleep(10);
      } catch (InterruptedException e) {
         System.out.println("Interrupted");
      }
      System.out.println("]");
   }
}

class Caller implements Runnable {
   String msg;
   Callme target;
   Thread t;
   public Caller(Callme targ, String s) {
      target = targ;
      msg = s;
      t = new Thread(this);
      t.start();
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
   }

   // synchronize calls to call()
   public void run() {
      synchronized(target) { // synchronized block
         target.call(msg);
      }
   }
}

class Synch {
   public static void main(String args[]) {
      Callme target = new Callme();
      Caller ob1 = new Caller(target, "Hello");
      Caller ob2 = new Caller(target, "Synchronized");
      Caller ob3 = new Caller(target, "World");

      // wait for threads to end
      try {
         ob1.t.join();
         ob2.t.join();
         ob3.t.join();
      } catch(InterruptedException e) {
         System.out.println("Interrupted");
      }
   }
} 
```

在这个程序中，当我使用没有 System.out.print("rahul") 的同步块时，它会打印出完美的输出，但是当我将这些不必要的 SOP("rahul") 语句输出失真时，为什么它会发生而不是同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:02:48.803

我将假设这些`System.out.println`消息会导致您的 3`Caller`条消息更改顺序：

```
 Caller ob1 = new Caller(target, "Hello");
  Caller ob2 = new Caller(target, "Synchronized");
  Caller ob3 = new Caller(target, "World"); 
```

这里没有保证订单。即使`"Hello"` `Caller`对象是先构造的，也不意味着它的`run()`方法实际上会先执行。`synchronized`每个线程内部仍然存在争用块。例如，`"World"`可以先打印字符串。

通过添加您的一系列`System.out.println("rahul");`调用，听起来您正在影响程序的时间。底层`PrintStream`对象是同步的，因此即使它们正在锁定另一个对象，它也会影响其他线程中的锁定。任何同步都会跨越内存屏障，这会导致线程之间的缓存刷新和内存复制，并可能影响它们的运行顺序、速度等。如果您运行程序 1000 次，您会看到许多不同的输出组合。这就是竞争条件的本质——它们是不可预测的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:19:57.860

您从构造函数启动线程并将 this 的实例传递给线程。调用者尚未完全构造，因此其成员变量可能尚未在 run 方法中初始化。

额外的 println 允许看到错误。

Runnables 应该定义工作，调用代码应该处理线程。Runnables 不应该自己运行。

您还应该同步最终变量。

```
class Caller implements Runnable {
   final String msg;
   final Callme target;

   public Caller(Callme targ, String s) {
      target = targ;
      msg = s;
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
      System.out.println("rahul");
  }

  // synchronize calls to call()
  public void run() {
     synchronized(target) { // synchronized block
        target.call(msg);
     }
  }
}

class Synch {
 public static void main(String args[]) {
  Callme target = new Callme();
  Thread ob1 = new Thread(Caller(target, "Hello"));
  Thread ob2 = new Thread(Caller(target, "Synchronized"));
  Thread ob3 = new Thread(Caller(target, "World"));

  obj1.start();
  obj2.start();
  obj3.start();

  // wait for threads to end
  try {
     ob1.t.join();
     ob2.t.join();
     ob3.t.join();
  } catch(InterruptedException e) {
     System.out.println("Interrupted");
  } 
```

} }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:59:20.037

每个人`System.out.println()`都是内部同步的，因此单个`println()`调用的输出不应出现乱码。

但是，多次调用`println()`. 如果多个线程同时写入同一个打印流，则不能保证它们的消息出现的相对顺序。

如果您需要特定的顺序，则必须自己同步线程。

# generics - 在某些情况下需要在泛型方法上显式转换为 T

> ID：10620099
> 
> 赞同：1
> 
> 时间：2012-05-16T13:55:50.193
> 
> 标签：generics, c#-4.0

我有一种情况让我感到困惑，希望能得到一些帮助。在下面的代码中，FindById 方法无需强制转换即可工作，但 UpdatedAuditedEntity 调用不会。注意：

1.  AuditedEntity 派生自 Entity
2.  将 auditedEntity 转换为 Entity 不起作用，仅转换为 T 有效。

对我在这里缺少的任何见解将不胜感激。起初我认为这与方差有关，但正如我上面提到的，我尝试向下投射但没有成功。

```
 public class NHibernateRepository<T> : NHibernateBase,
    IRepository<T> where T : Entity
{

    public IEnumerable<T> FindAll(Expression<Func<T, bool>> predicate)
    {
        var query = GetQuery(predicate);
        return Transact(() => query.ToList());
    }

    public T FindById(int id)
    {
        // TODO: Why does this work when below doesn't
        return FindAll(e => e.Id == id).FirstOrDefault();
    }

    private T UpdateAuditedEntity(T item)
    {
        var auditedEntity = item as AuditedEntity;

        if (auditedEntity == null) return item;

        auditedEntity.DateModified = DateTime.UtcNow;

        // TODO: figure out why this cast is necessary
        return auditedEntity as T;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:04:26.207

这是必要的，因为尽管 AuditedEntity 和 T 都是从 Entity 派生的，但 AuditedEntity 可能不会继承 T 表示的任何类型。

例如，假设您创建了一个直接继承实体的类型“OtherEntity”。一个实例 `NHibernateRepository<OtherEntity>`将使 UpdateAuditedEntity 返回一个 AuditedEntity，它不继承 OtherEntity - 因此返回的类型将无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:10:04.380

> AuditedEntity 派生自 Entity

**好的，但是在这个泛型**类中，`T`是. 编译器并不关心你是通过强制转换创建的——实际上，这里可能会有自定义转换在做*意想不到*的事情——所以不允许你从请求.**`Entity``auditedEntity``item`*`AuditedEntity``T`***

 ***在这个特定的方法中，因为`item`和`auditedEntity`是**同一个**对象，你可以这样做

```
return item; 
```

作为最后一条语句，`UpdateAuditedEntity`编译器会很高兴。***

# objective-c - 如何在 Mac OS 中创建“无激活”窗口

> ID：10620106
> 
> 赞同：2
> 
> 时间：2012-05-16T13:56:11.240
> 
> 标签：objective-c, macos, cocoa, nswindow, macos-carbon

在 Windows 平台中，一个窗口有一个名为 SWP_NOACTIVATE 的属性，该属性会导致窗口显示为非活动状态，并且在鼠标单击后，该窗口也不会获得焦点，例如，它对您可以通过鼠标单击键入的虚拟键盘很有用。Mac 中的等效解决方案是什么？换句话说，我怎样才能实现一个不改变焦点的窗口点击呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:08:09.847

您在这个问题上添加了“Cocoa”和“Carbon”标签，但由于没有人*应该*再做 Carbon，我将尝试仅使用 Cocoa 来解决您的问题。

看看这两种`NSWindow`方法： [`canBecomeKeyWindow`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/canBecomeKeyWindow)和[`canBecomeMainWindow`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/canBecomeMainWindow)。`NO`当您希望窗口无法聚焦时，请考虑将 NSWindow 子类化并为其中一个（或两个）返回“ ”。

还有一个有趣的方法叫做[`setIgnoresMouseEvents:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/setIgnoresMouseEvents%3a)，它使窗口对鼠标点击和事件“透明”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:08:28.513

您需要阅读[*Window Programming Guide*](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/WinPanel.html#//apple_ref/doc/uid/10000031-SW1)中的[Key 和 Main Windows](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/Concepts/ChangingMainKeyWindow.html#//apple_ref/doc/uid/20000236-128794)。简而言之，创建您自己的 NSWindow 子类并覆盖，以便两者都返回 NO：[](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/WinPanel/WinPanel.html#//apple_ref/doc/uid/10000031-SW1)*`-canBecomeKeyWindow``-canBecomeMainWindow`*

 *> ...充当仅通过鼠标操作拖出的项目的浮动调色板的窗口永远不需要成为关键窗口。这样的窗口可以定义为 NSWindow 的子类，它覆盖方法 canBecomeKeyWindow 和 canBecomeMainWindow 以返回 NO 而不是默认的 YES。以这种方式定义窗口可以防止它成为键或主窗口。*

# workflow - Microsoft Dynamics CRM 2011 使用 Workflow 创建报价产品记录

> ID：10620110
> 
> 赞同：2
> 
> 时间：2012-05-16T13:56:22.767
> 
> 标签：workflow, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我已经创建了一个在 CRM 2011 Online 中创建报价的对话框，现在我正试图让一个子进程启动另一个对话框来用报价产品填充该报价。遗憾的是，报价产品最初并未出现在可以在工作流/对话框中创建的实体的下拉列表中。

有谁知道如何从对话中创建报价产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:02:36.097

不幸的是，Dialogs & Workflows 不能创建报价产品（也不能创建发票/订单/机会产品）。从早期开始就是这种情况，CRM 2011 仍然是这种情况。

我被告知这是由于保存这些记录时触发的繁重逻辑（将总计汇总到父记录等）但是我很难理解为什么这会阻止工作流自动创建这些数据。这是我希望在下一个主要版本的 CRM 中修复的问题。

作为替代方案，如果您使用 Scribe 之类的工具导入数据（假设您自己计算标题字段），一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T11:04:16.647

我们创建了一个带有工作流的解决方案，该工作流还可以创建订单产品、机会、报价和发票产品。

[http://www.cartagena.no/#!mscrm-addons/l2y55](http://www.cartagena.no/#!mscrm-addons/l2y55)

安德烈亚斯，卡塔赫纳

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T11:28:56.253

为了解决 CRM 中的这一限制，我们构建了一个自定义工作流程步骤，使您能够创建报价产品，以及机会产品、订单产品和发票产品。工作流程步骤非常易于安装，只需导入托管解决方案，您就可以创建对话和工作流程了。您可以从[我们的网站](http://www.cartagena.no/SitePages/Articles.aspx?artid=47&CatId=3)下载解决方案。在那里您还可以找到您需要的所有文档。要获得免费的演示许可证（有效期一个月），请给我们发送电子邮件。

# java - 我在将两个不同的项目存储在一个共享首选项中时遇到问题

> ID：10620113
> 
> 赞同：0
> 
> 时间：2012-05-16T13:56:29.757
> 
> 标签：java, android, sharedpreferences

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.uniqueid);

    simID = (TextView) findViewById(R.id.text2);
    simIMSI = getSubscriberId().toString();
    simID.setText(simIMSI.toString());
    SaveUniqueId(simIMSI.toString());

    uniqueID = (TextView) findViewById(R.id.text4);
    identifier = UniqueIDTest().toString();
    uniqueID.setText(identifier.toString());
    SaveUniqueId(identifier.toString());

    next = (Button) findViewById(R.id.next);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(UniqueIdActivity.this, LockAppActivity.class);
            Toast.makeText(UniqueIdActivity.this, "Remember to keep the unique ID", Toast.LENGTH_LONG).show();
            startActivity(intent);              
        }
    });
}

public void SaveUniqueId(String value){
    final String UNIQUE_ID = "UniqueIdentifier";

    SharedPreferences unique = getSharedPreferences(UNIQUE_ID, 0);
    SharedPreferences.Editor editor = unique.edit();
    editor.putString("identifier", value);
    editor.commit();
}

public String getSubscriberId(){
    operator = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    String IMSI = operator.getSubscriberId();
    return IMSI;
}

public UUID UniqueIDTest(){    
    UUID ID = UUID.randomUUID();   
    return ID; 
} 
```

}

我正在做这个活动，这个活动将自动生成一个唯一的 UUID 以及检索 sim 卡 IMSI，我如何将这两个项目保存在一个共享首选项中......请帮助我进行编码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:59:25.427

[看到这个链接](http://samir-mangroliya.blogspot.in/p/android-shared-preferences.html)

在这个演示中，我保存名称并通过而不是这个，您可以保存 UUID 和 IMSI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:59:58.763

`SharedPreferences`使用一对一的键：值映射。您不能使用相同的键存储 2 个值。

您的选择是使用两个单独的键或将两个值组合成一个值。一种这样的方法是通过字符串连接将`simIMSI`和`UniqueID`字符串组合起来：

```
String key = simIMSI + UniqueID 
```

# ruby-on-rails - ElasticSearch 过滤器匹配单个日期

> ID：10620114
> 
> 赞同：1
> 
> 时间：2012-05-16T13:56:34.393
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

一段时间以来，我一直在使用弹性搜索，但遇到了一个障碍，我必须搜索与特定开始日期 (start_at) 匹配的事件。我已将我的字段索引为

```
 mapping do
    indexes :name,    :type => 'string', :analyzer => 'snowball'
    indexes :description, :type => 'string', :analyzer => 'snowball'
    indexes :start_at, :type => 'date'
    indexes :end_at, :type => 'date'
    indexes :tag_list, :type => 'string', :analyzer => 'snowball'
    indexes :lat_lon, :type => 'geo_point'
    indexes :user_details, :type => 'string'    
  end

  def to_indexed_json
    to_hash.merge({
      :user_details => (user ? user.to_index : nil),
      :artist_details => (artists ? artists.each{|artist| artist.to_index }: nil),
      :primary_genre => (genre ? genre.name : nil),
      :lat_lon => [lat, lng].join(',')
    }).to_json
  end 

```

所以当我打

```
 Tire.search('events') do 
    # ignore search query keywords
    filter range: {start_at: {gte: Date.today, lt: Date.tomorrow}}
 end 

```

什么都不返回，但在单个范围内效果很好。那是

```
 Tire.search('events') do 
    # ignore search query keywords
    filter range: {start_at: {gte: Date.today}}
 end 

```

我为 Elasticsearch 建立了事件映射索引，以将 start_at 和 end_at 设置为日期，否则它会对这些日期执行术语匹配，但这样的事情不会是答案

```
 Tire.search('events') do
  query do
    string "start_at: #{Date.today}"
 end
end 

```

由于这会执行字符串匹配，因此它会导致所有记录，因为标记器将分解为 2012、05、16，并且由于 2012 和 16 可能在多个区域中匹配，因此它将返回所有匹配项。

我知道我错过了一些非常基本的东西。我将不胜感激这方面的任何帮助。

**更新**

```
 Event.find_all_by_start_at(Date.tomorrow + 1.day).size
  Event Load (0.7ms)  SELECT `events`.* FROM `events` WHERE `events`.`start_at` = '2012-05-19'
 => 1 

```

所以我那天有活动。现在，当我使用弹性搜索运行它时

```
 ruby-1.9.2-p180 :024 > Tire.search('events') do
ruby-1.9.2-p180 :025 >     filter :range, :start_at => {gte: Date.tomorrow + 1.days, lt: Date.tomorrow + 2.days}
ruby-1.9.2-p180 :026?>   end

ruby-1.9.2-p180 :029 > x.to_curl
 => "curl -X GET \"http://localhost:9200/events/_search?pretty=true\" -d '{\"filter\":{\"range\":{\"start_at\":{\"gte\":\"2012-05-19\",\"lt\":\"2012-05-20\"}}}}'" 

```

 ````
{"events":{"event":{"properties":{"allow_comments":{"type":"boolean"},"artist_details":{"type":"string"},"artist_id":{"type":"long"},"city":{"type":"string"},"comments_count":{"type":"long"},"confirm":{"type":"boolean"},"created_at":{"type":"date","format":"dateOptionalTime"},"description":{"type":"string","analyzer":"snowball"},"end_at":{"type":"string"},"event_attendees_count":{"type":"long"},"event_content_type":{"type":"string"},"event_file_name":{"type":"string"},"event_file_size":{"type":"long"},"genre_id":{"type":"long"},"hits":{"type":"long"},"id":{"type":"long"},"interview":{"type":"boolean"},"lat":{"type":"double"},"lat_lon":{"type":"geo_point"},"lng":{"type":"double"},"location":{"type":"string"},"name":{"type":"string","analyzer":"snowball"},"online_tix":{"type":"boolean"},"primary_genre":{"type":"string"},"private":{"type":"boolean"},"start_at":{"type":"string"},"state":{"type":"string"},"tag_list":{"type":"string","analyzer":"snowball"},"updated_at":{"type":"date","format":"dateOptionalTime"},"user_details":{"type":"string"},"user_id":{"type":"long"},"venue_id":{"type":"long"},"zip":{"type":"string"}}}}} 

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:08:15.190

Elasticsearch 试图灵活地处理映射。同时还要应对底层搜索引擎——Lucene的限制。因此，当现有映射与更新的映射相矛盾时，新映射将被忽略。elasticsearch 的另一个可能在此问题中发挥作用的特性是基于数据的自动映射创建。所以，如果你

1.  创建新索引
2.  使用包含弹性搜索无法识别的格式的日期的字符串为字段 start_at 索引记录
3.  更新了将类型“日期”分配给 start_at 字段的映射

您最终得到了字段 start_at 类型为“字符串”的映射。唯一的解决方法是在添加第一条记录之前删除索引并指定映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T21:27:51.953

您似乎不需要使用搜索查询 - 而是使用过滤器。尝试这样的事情：

```
filter(:range, date: {
            to: params[:date],
            from: params[:date]
        }) if params[:date].present? 
```

哪里`params[:date]`应该匹配格式：

```
>> Time.now.strftime('%F')
=> "2014-03-10" 
```

并且可以是任何东西——既可以是硬类型的，也可以是作为参数传入的。

字段`:start_at`和`:end_at`应该映射为`:type => 'date'`（就像你现在一样），不需要更改为字符串或类似的东西。

这种方法适用于 , 的字段的映射，`date`因为`datetime`轮胎/弹性搜索似乎没有区别这两种字段类型。

奖励：您可以在这里找到不错的 rails elasticsearch/tire 生产设置示例： [https ://gist.github.com/psyxoz/4326881](https://gist.github.com/psyxoz/4326881)`

# openxml - OpenXml - 遍历段落的运行并查找运行是否有斜体或粗体文本

> ID：10620115
> 
> 赞同：3
> 
> 时间：2012-05-16T13:56:35.310
> 
> 标签：openxml, visual-studio-power-tools

我正在尝试遍历段落运行，查找运行是否有斜体/粗体文本并将该文本替换为其他内容。

就性能而言，这是最好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:05:36.840

如果您只对内联标签感兴趣，以下代码可以提供帮助。只需将 Convert() 方法更改为您想要的任何方法。

```
using System.Linq;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Wordprocessing;

class Program
{
    static void Main(string[] args)
    {
        using (var doc = WordprocessingDocument.Open(@"c:\doc1.docx", true))
        {
            foreach (var paragraph in doc.MainDocumentPart.RootElement.Descendants<Paragraph>())
            {
                foreach (var run in paragraph.Elements<Run>())
                {
                    if (run.RunProperties != null &&
                        (run.RunProperties.Bold != null && (run.RunProperties.Bold.Val == null || run.RunProperties.Bold.Val) ||
                        run.RunProperties.Italic != null && (run.RunProperties.Italic.Val == null || run.RunProperties.Italic.Val)))
                        Process(run);
                }
            }
        }
    }

    static void Process(Run run)
    {
        string text = run.Elements<Text>().Aggregate("", (s, t) => s + t.Text);
        run.RemoveAllChildren<Text>();
        run.AppendChild(new Text(Convert(text)));

    }

    static string Convert(string text)
    {
        return text.ToUpper();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:54:38.923

这取决于您是想从样式中计算继承的粗体/斜体还是只对内联粗体/斜体标签感兴趣。

# database - unity 3d 通过 Web 服务访问在线数据库是否安全？

> ID：10620117
> 
> 赞同：0
> 
> 时间：2012-05-16T13:56:43.470
> 
> 标签：database, web-services, unity3d

我计划使用 Unity 3D 创建单人游戏。游戏需要从管理员通过 ASP .NET 后端系统创建的在线数据库下载用户的个人资料（和其他信息）。游戏还需要将用户的成就上传到在线数据库。

但是我在 Stack Overflow 上读过，直接从 unity 3d 访问在线数据库会产生安全问题......

如果 unity3d（游戏）通过 Web 服务访问在线数据库，上述内容是否也适用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:51:02.177

使用直接数据库连接可能确实是一个安全问题。除非您使用某种加密，否则您的访问凭证很容易被访问。我强烈选择您提出的*Webservice*方法。这可能需要更多的工作，因为您必须设计协议或找到合适的协议，但从长远来看，这肯定是可以接受的投资。

# css - 黑莓浏览器上的 CSS 边距

> ID：10620122
> 
> 赞同：0
> 
> 时间：2012-05-16T13:56:55.327
> 
> 标签：css, blackberry, radio-button, margin, vertical-alignment

我的表单上有以下单选按钮（我将所有的 CSS 都拉到了内联，这样你就可以看到了）：

```
<div style="border:1px solid white;">
<input type="radio" style="margin:20px 5px 20px 15px;" name="daypick" value="1d">
<span style="color:white;font:normal 1.5em arial;">1 Day</span>
</div> 
```

在 chrome 中，单选按钮默认在 div 中垂直居中，但在我的 Blackberry 上它位于 div 的底部。请问有人可以帮忙做垂直对齐吗？

输入边距中的底部 20px 并没有起到作用（但在 Chrome 中确实如此）。需要不同的方法。

谢谢！约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:04:13.633

尝试添加

```
 display: inline-block; 
```

或者

```
 display: block; 
```

到您的输入单选按钮。

# permissions - Joomla 权限

> ID：10620123
> 
> 赞同：0
> 
> 时间：2012-05-16T13:56:56.933
> 
> 标签：permissions, joomla1.5

我是 Joomla 的新手，我的任务是支持在 Joomla 1.5.25 中创建的网站。他们不断收到文件不可写的错误。即使在超级管理员帐户中，他们也无法在媒体管理器中添加或删除任何内容。我能够通过将文件夹权限从 755（Joomla 推荐的权限集）更改为 777 来覆盖这些错误，但想知道是否有更好的方法来解决这个问题（我不想在他们的网站上留下安全漏洞777 权限集）。根据我的研究，Joomla 权限要求可能因您的托管公司而异，因此我想在给托管公司打电话之前先征求其他人的意见。

附带说明一下，有没有办法让错误消息显示超过 2 秒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:05:26.657

您为什么不尝试仅将权限更改为临时写入的文件夹？另一个解决方案是找出 apache 在哪个用户下运行，并确保该用户是所有者或至少在拥有您的 Joomla 的组中！目录。

# android - Android - 找不到活动（我错过了什么，你怎么知道的）

> ID：10620125
> 
> 赞同：1
> 
> 时间：2012-05-16T13:57:00.413
> 
> 标签：android

**解决方案：**

```
 <activity
        android:name=".Specials"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.kita.MyGardenCenterApp.SPECIALS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

确定臭名昭著的“未找到活动”错误。

**按钮：**

```
Button btnSpecials = (Button) findViewById(R.id.btnSpecials);
    btnSpecials.setOnClickListener(new View.OnClickListener() {  

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.kita.MyGardenCenterApp.SPECIALS")); 
        }
    }); 
```

**显现：**

```
<activity
        android:label="@string/app_name"
        android:name=".Specials" >
        <intent-filter >
            <action android:name="android.intent.action.SPECIALS" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

**原木猫：**

```
05-16 09:44:50.149: E/AndroidRuntime(17747): FATAL EXCEPTION: main
05-16 09:44:50.149: E/AndroidRuntime(17747): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.kita.MyGardenCenterApp.SPECIALS }
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.Activity.startActivityFromChild(Activity.java:3057)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.Activity.startActivityForResult(Activity.java:2837)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.Activity.startActivity(Activity.java:2923)
05-16 09:44:50.149: E/AndroidRuntime(17747): at com.kita.MyGardenCenterApp.Home_Page$1.onClick(Home_Page.java:49)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.view.View.performClick(View.java:2408)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.view.View$PerformClick.run(View.java:8816)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.os.Handler.handleCallback(Handler.java:587)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.os.Handler.dispatchMessage(Handler.java:92)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.os.Looper.loop(Looper.java:123)
05-16 09:44:50.149: E/AndroidRuntime(17747): at android.app.ActivityThread.main(ActivityThread.java:4627)
05-16 09:44:50.149: E/AndroidRuntime(17747): at java.lang.reflect.Method.invokeNative(Native Method)
05-16 09:44:50.149: E/AndroidRuntime(17747): at java.lang.reflect.Method.invoke(Method.java:521)
05-16 09:44:50.149: E/AndroidRuntime(17747): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:893)
05-16 09:44:50.149: E/AndroidRuntime(17747): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:651)
05-16 09:44:50.149: E/AndroidRuntime(17747): at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：**

为了回应您的一些答案，我有另一个使用以下代码的应用程序，它工作正常。这就是为什么我在这里问。我想以正确的方式做到这一点。

我的 .java 文件也是 Specials.java

```
<activity
        android:label="@string/app_name"
        android:name=".mainAboutUs" >
        <intent-filter >
            <action android:name="com.kita.PapaStew.MAINABOUTUS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

**添加完整清单**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<permission
    android:name="com.kita.MyGardenCenterApp.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<uses-permission android:name="com.kita.MyGardenCenterApp.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:name="StoredValues"
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <service android:name=".C2DMReceiver" />

    <receiver
        android:name="C2DMReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="com.kita.MyGardenCenterApp" />
        </intent-filter>
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.kita.MyGardenCenterApp" />
        </intent-filter>
    </receiver>

    <activity
        android:name=".MyGardenCenterAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".myTabbar"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.kita.MyGardenCenterApp.MYTABBAR" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Home_Page"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.HOMEPAGE" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Notification"
        android:label="@string/app_name"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="android.intent.action.NOTIFICATION" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Calendar"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.CALENDAR" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Facebook"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.FACEBOOK" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Map_Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAPACTIVITY" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".More"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MORE" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Twitter"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.TWITTER" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Website"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.WEBSITE" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Google_Plus"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.GOOGLEPLUS" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Notes"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.NOTES" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Feedback"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.FEEDBACK" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
    android:name="com.kita.MyGardenCenterApp.SPECIALS"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="com.kita.MyGardenCenterApp.SPECIALS" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
    <activity
        android:name=".Ask_the_Expert"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.ASKTHEEXPERT" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Tips"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.TIPS" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Just_In"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.JUSTIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Calulators"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.CALCULATORS" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:01:46.097

我认为您尚未将新创建的活动添加到清单文件中

只需将其添加为

```
<activity
        android:name="com.kita.MyGardenCenterApp.SPECIALS"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:03:11.443

用这个

```
 <intent-filter>
            <action android:name="com.kita.MyGardenCenterApp.SPECIALS" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:00:37.783

```
<activity
    android:label="@string/app_name"
    android:name=".Specials" > 
```

应该

```
<activity
    android:label="@string/app_name"
    android:name=".SPECIALS" > 
```

反之亦然，您通过大写类名来打破[命名约定。](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)

此外，您的意图过滤器已关闭。

正如其他答案所述，您需要将意图过滤器中的操作更改为：

```
<action android:name="com.kita.MyGardenCenterApp.SPECIALS" /> 
```

# .net - 根据下拉列表中的选择显示第二个字段

> ID：10620126
> 
> 赞同：0
> 
> 时间：2012-05-16T13:57:01.590
> 
> 标签：.net, asp.net-mvc-3, drop-down-menu

我希望在下拉列表中显示短名称，在选择下拉列表中的任何值时，文本框应显示来自另一个表的相应全名。

短名称是从第一个网格屏幕中选择的记录中显示的，因此来自另一个表，而全名以及短名称（也）位于另一个表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:08:56.337

可以使用`DataTextField`和`DataValueField`。当您创建集合时，您将加入另一个表，因此该集合具有两个值。我假设你的意思是`ComboBox`. `DropDownList`不是 UI 控件。

[下拉列表类](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.aspx)

# logging - 如何通过 rsyslog 将日志发送到远程日志服务器？

> ID：10620127
> 
> 赞同：0
> 
> 时间：2012-05-16T13:57:03.647
> 
> 标签：logging, rsyslog

我对ossim很陌生。我已将 ossim 3.1 安装到虚拟机（vmware）上

我有两个问题：

1) 我已经从 ossim-setup 启用了 SYSLOG。现在我在 ANALYSIS-> SIEM 中收到了大量的 syslog 消息。如何修改记录率？如何管理 syslog 配置？我查找了 syslog conf 文件，但没有。我只能找到 rsyslog 文件。此外，如果我这样做

```
alienvault:~# ps aux | grep sys
root      3481  0.1  0.0   2492  1416 ?        S    08:51   0:12 /var/ossec/bin/ossec syscheckd
root      5951  0.0  0.0  35512  1416 ?        Sl   08:58   0:00 /usr/sbin/rsyslogd -c3 -x
root     18427  0.0  0.0   1716   636 pts/0    S+   11:29   0:00 grep --color=auto sys 
```

我知道只有 rsyslogd 正在运行

2) 我已经从 ossim-setup 启用了 Dionaea，我正在尝试将其日志发送到 ossim，但没有任何结果。我怎样才能做到这一点？在那之后，我是否应该做其他事情来让 ossim 将 Dioanea 的日志与其他日志相关联？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-22T02:11:19.890

检查远程服务器上的 rsyslog 配置（默认位于 /etc/rsyslog.conf ）。它可能使用 UDP 或 TCP。如果是 UDP，请使用

```
*.* @hostname:<port> 
```

如果是 TCP，

```
*.* @@hostname:<port> 
```

您可以通过检查该行来获取端口号 -

```
$UDPServerRun <port>
$TCPServerRun <port> 
```

您可以使用 Rsyslog 根据您的 Dioanea 服务器的主机名或 IP 地址设置过滤规则，并将其写入单独的文件（如果这是您想要的）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T07:02:20.003

从 rsyslog 转发日志可以很容易地设置。您需要编辑`/etc/rsyslog.conf`文件并添加以下行：

```
*.* @@remote-host:514 
```

它将设置您的本地 rsyslog 以将所有*syslog 消息转发*到“远程主机”，`514`这是 rsyslogd 服务器的端口号。您可以在要发送日志的所有客户端上添加上述行。您可以在[官方 Rsyslog 项目网站上了解更多信息](http://www.rsyslog.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T20:59:46.537

最近有一个补丁可以让您将 Dionaea 事件发送到 syslog：

[http://sourceforge.net/p/nepenthes/mailman/message/32024205/](http://sourceforge.net/p/nepenthes/mailman/message/32024205/)

# python - 在 tkinter 中对元素进行分组

> ID：10620130
> 
> 赞同：0
> 
> 时间：2012-05-16T13:57:11.327
> 
> 标签：python, tkinter, grouping

有没有办法在单个 ID 下对 tkinter 中的元素进行分组？

例如，如果我想要一个带有一条线的“S”。有没有办法将行和字符存储在同一个 id 下？

或者，有没有办法为 tkinter 创建服装（简单）形状？

**编辑：**
我希望在画布小部件上执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:24:42.213

Tkinter[`Canvas`](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm)对象确实允许您创建“简单”对象（您可以使用[canvas items](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#canvas-items)绘制的任何内容。然后您可以使用[tags](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#item-specifiers)将您的对象组合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T17:35:56.643

如果您特别要求使用重划线的文本，您可以创建具有属性集的[自定义字体。](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/tkinter-widget-styling.htm#fonts)`overstrike`

在更一般的意义上，你不能在画布上的两个对象之间共享一个 id，但是你*可以*让两个对象共享同一个[tag](https://web.archive.org/web/20201108093851id_/http://effbot.org/tkinterbook/canvas.htm#item-specifiers)，并且 tag 几乎可以在任何可以使用 id 的地方使用（即：用于更改颜色，坐标，删除等）

# java - 在 Java 代码中运行 liquibase

> ID：10620131
> 
> 赞同：38
> 
> 时间：2012-05-16T13:57:11.420
> 
> 标签：java, liquibase

出于某种原因，没有关于在 Java 代码中运行 liquibase 的文档。我想为单元测试生成表。

我将如何直接在 Java 中运行它？

例如

```
Liquibase liquibase = new Liquibase()
liquibase.runUpdates() ? 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-16T21:16:30.900

它应该类似于（取自 liquibase.integration.spring.SpringLiquibase 源）：

```
java.sql.Connection c = YOUR_CONNECTION;
Liquibase liquibase = null;
try {
    Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(c))
    liquibase = new Liquibase(YOUR_CHANGELOG, new FileSystemResourceAccessor(), database);
    liquibase.update();
} catch (SQLException e) {
    throw new DatabaseException(e);
} finally {
    if (c != null) {
        try {
            c.rollback();
            c.close();
        } catch (SQLException e) {
            //nothing to do
        }
    }
} 
```

ResourceAccessor 有多种实现，具体取决于如何找到更改日志文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-20T19:42:01.560

*我找到了一种使用*maven 或 Java设置数据库的方法。上面的示例使用`FileSystemResourceAccessor()`，不幸的是，如果您部署需要从 jar 本身设置数据库的应用程序，那么您最终不得不将 jar*提取*为 zip 作为解决方法，因为这些 liquibase 文件仅存在在罐子里。这意味着您的 jar 最终是不可移植的，并且您必须拥有`maven`要设置数据库的任何位置。

使用这个结构：

`src/main/resources/liquibase/db.changelog-master.xml` `src/main/resources/liquibase/changelogs/...`

您的数据库更改日志主机可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!-- <includeAll path="src/main/resources/liquibase/changelogs"/> -->
    <include file="changelogs/my-date.1.sql" relativeToChangelogFile="true"/>
</databaseChangeLog> 
```

您可以将此部分用于您的`pom.xml`, 以确保`mvn install`也设置您的 liquibase DB。

```
<plugin>
   <groupId>org.liquibase</groupId>
   <artifactId>liquibase-maven-plugin</artifactId>
   <version>3.5.1</version>
   <configuration>
      <changeLogFile>liquibase/db.changelog-master.xml</changeLogFile>
      <driver>org.postgresql.Driver</driver>
      <url>${jdbc.url}</url>
      <username>${jdbc.username}</username>
      <password>${jdbc.password}</password>
   </configuration>
   <executions>
      <execution>
         <phase>process-resources</phase>
         <goals>
            <goal>update</goal>
         </goals>
      </execution>
   </executions>
</plugin> 
```

使用`ClassLoaderResourceAccessor()`而不是`FileSystemResourceAccessor()`.

```
public static void runLiquibase() {

    Liquibase liquibase = null;
    Connection c = null;
    try {
        c = DriverManager.getConnection(DataSources.PROPERTIES.getProperty("jdbc.url"),
                DataSources.PROPERTIES.getProperty("jdbc.username"),
                DataSources.PROPERTIES.getProperty("jdbc.password"));

        Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(c));
        log.info(DataSources.CHANGELOG_MASTER);
        liquibase = new Liquibase(DataSources.CHANGELOG_MASTER, new ClassLoaderResourceAccessor(), database);
        liquibase.update("main");
    } catch (SQLException | LiquibaseException e) {
        e.printStackTrace();
        throw new NoSuchElementException(e.getMessage());
    } finally {
        if (c != null) {
            try {
                c.rollback();
                c.close();
            } catch (SQLException e) {
                //nothing to do
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-26T10:41:44.080

您可以在测试中使用 h2-database 进行练习（路径“db/changelog.xml”是 main/resources/db/changelog.xml）：

```
import liquibase.Contexts;
import liquibase.Liquibase;
import liquibase.database.Database;
import liquibase.database.DatabaseFactory;
import liquibase.database.jvm.JdbcConnection;
import liquibase.exception.LiquibaseException;
import liquibase.resource.ClassLoaderResourceAccessor;
import org.junit.jupiter.api.Test;

import java.sql.DriverManager;
import java.sql.SQLException;

public class LiquidBaseTest {

    @Test
    public void testExecuteLiquidBaseScripts() throws SQLException, LiquibaseException {
        java.sql.Connection connection = DriverManager.getConnection("jdbc:h2:mem:");

        try {
            Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(connection));
            Liquibase liquibase = new Liquibase("db/changelog.xml", new ClassLoaderResourceAccessor(), database);
            liquibase.update(new Contexts());
        } finally {
            if (connection != null) {
                connection.rollback();
                connection.close();
            }
        }
    }

} 
```

# macos - OSX Lion 上 OpenCV 2.4 中训练有素的 LBP 级联出错

> ID：10620132
> 
> 赞同：1
> 
> 时间：2012-05-16T13:57:14.400
> 
> 标签：macos, opencv

我正在尝试根据[这篇](http://gigadom.wordpress.com/2011/10/07/opencv-haartraining-and-all-that-jazz/)文章和[官方](http://docs.opencv.org/doc/user_guide/ug_traincascade.html)文档来训练级联。

我的装备是：

*   Mac OSX 狮子
*   OpenCV 2.4.0

因此，我创建了负图像、正样本和训练的级联，都没有错误，但是当我尝试使用**opencv_performace**测试创建的级联时，出现以下错误：

```
OpenCV Error: Unspecified error (The node does not represent a user object (unknown type?)) in cvRead, file /Users/tekielskib/Projects/Wprawki/OpenCV-2.4.0/modules/core/src/persistence.cpp, line 4863
terminate called throwing an exceptionAbort trap: 6 
```

*当我创建 Haar 级联并使用-baseFormatSave*开关保存它时，也会发生同样的事情。

我有点难过，不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:09:24.360

见[http://code.opencv.org/issues/1694](http://code.opencv.org/issues/1694)

OpenCV 中的级联有两个版本的 xml 格式，opencv_performance 不支持新的级联格式。但是 LBP 级联仅以较新的格式存在。

# c# - 将android连接到网络服务

> ID：10620133
> 
> 赞同：0
> 
> 时间：2012-05-16T13:57:23.417
> 
> 标签：c#, android, xml, web-services, httpwebrequest

我正在开发一个 android 应用程序，我想将它连接到一个网络服务，关于如何发出网络请求和接收响应的任何想法？注意：我想将一个 XML 文件发送到 Web 服务并从中接收。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:18:43.293

要连接网站，请使用以下代码

```
 URL url = new URL("http://www.myweb.com");

                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                conn.setConnectTimeout(5000);    // 5 seconds
                conn.setRequestMethod("GET");       
                conn.connect();
                BufferedReader rd  = new BufferedReader(new InputStreamReader(conn.getInputStream()));

                String line;

                while ((line = rd.readLine()) != null) {
                  //data of the page will be returned in line, do whatever u want here
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:03:28.137

我创建了这个工具来自动生成 wsdl 到 android 代码，

[http://www.wsdl2code.com/Example.aspx](http://www.wsdl2code.com/Example.aspx)

```
public void callWebService(){
    SampleService srv1 = new SampleService();
    Request req = new Request();
    req.companyId = "1";
    req.userName = "userName";
    req.password = "pas";
    Response response =  srv1.ServiceSample(req);
} 
```

# jquery - 为什么 jquery tablesorter 过滤器在 IE 9 中不起作用？

> ID：10620138
> 
> 赞同：0
> 
> 时间：2012-05-16T13:57:35.770
> 
> 标签：jquery, filter, tablesorter

我正在尝试让 jquery tablesorter 过滤器插件在 IE9 中工作。它适用于所有其他浏览器，但不适用于 IE9。当用户在过滤器输入框中输入字符时，字符会被忽略，或者有时当它们被接受时会非常缓慢且笨拙。

```
 <script type="text/javascript">
    $(document).ready(function()
    {
        $(".LetterList")
        .tablesorter({
            //headers: { 4: { sorter: false} },
            cssHeader: "sort",
            cssAsc: "sort-asc",
            cssDesc: "sort-desc",
            sortList: [[1, 1]]
        })
        .tablesorterFilter({
            filterContainer: $("div.Search input"),
            filterClearContainer: $("div.Search"),
            filterColumns: [0, 1, 2, 3],
            filterWaitTime: 250
        });
    });
</script> 
```

# c# - c# 只能由其父实例化的公共类

> ID：10620140
> 
> 赞同：4
> 
> 时间：2012-05-16T13:57:39.530
> 
> 标签：c#, oop

是否有可能有一个公共的嵌套类，但只能由它的父类实例化，例如

```
 public class parent
{
    public class child
    {
        public string someValue;
    }

    public child getChild()
    {
        return new child();
    }
} 
```

在这个例子中，'child' 类可以由 'parent' 外部的代码实例化。我希望外部代码能够查看“子”类型，但不能构建它自己的类型。

例如

```
var someChild = new parent.child(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T13:59:39.570

1.  创建一个公共接口。
2.  将子类设为私有。
3.  让孩子实现接口。
4.  让该`getChild`方法创建一个新子项并返回接口类型。

如评论和其他答案中所述，您还可以将内部类的构造函数上的访问修饰符更改为 internal 或 private，同时使内部类本身公开。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T14:02:32.323

定义一个内部空构造函数

```
public class child     
{         
    internal child() {}
    public string someValue;     
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T14:02:24.580

您可以通过将构造函数（子类的）的保护级别设置为`internal`.

或@Servy 告知的界面。

# xaml - Windows 8 Metro：实施验证

> ID：10620145
> 
> 赞同：5
> 
> 时间：2012-05-16T13:57:47.207
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml, validation

我只是用谷歌搜索了大约 2 个小时，没有找到任何东西。

鉴于以下情况：

```
public class Person
{
    [Required]
    public string Name { get; set; }
} 
```

XAML：

```
<TextBox Text="{Binding Name, Mode=TwoWay}" /> 
```

您将如何像在 MVC3 中那样自动获取 UI 上的验证反馈？

（哦，我现在真的不在乎我是否能够使用像 [Required] 这样的集成 DataAnnotations）

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T17:38:24.933

我在[WinRT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/)中添加了一些东西。它称为[TextBoxValidationExtensions](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/8d621dbdff4d#WinRTXamlToolkit/Controls/Extensions/TextBoxValidationExtensions.cs)并允许您像这样定义验证：

```
<TextBox
    Width="400"
    HorizontalAlignment="Left"
    xyzc:TextBoxValidationExtensions.Format="NonEmptyNumeric"
    xyzc:TextBoxValidationExtensions.InvalidBrush="Red"
    xyzc:TextBoxValidationExtensions.ValidBrush="Green" /> 
```

格式目前定义为：

```
[Flags]
public enum ValidTextBoxFormats
{
    Any = 0,
    NonEmpty = 1,
    Numeric = 2,
    NonEmptyNumeric = 3
} 
```

整个代码有点长，无法在这里分享。您可以从 CodePlex 中取出代码并根据自己的喜好进行修改 - 添加新的验证规则、修改默认画笔等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T03:39:39.357

只需在特定`XAML`控件中使用事件，例如 if in `textbox`use`pointerexited`并在后面的代码中编写一个函数来执行所需的验证。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T03:02:52.283

看来，基于框架中提供的支持，您“验证”文本字段的非凡想法是如此罕见和不常见，以至于根本不需要考虑它。我们都知道，如果你想做的事情是通用的或有用的，那么在这样一个设计良好且全面的框架中，会有这样一个特性的考虑。

# eclipse - 使用 perl 时编译失败

> ID：10620149
> 
> 赞同：-2
> 
> 时间：2012-05-16T13:58:04.377
> 
> 标签：eclipse, perl, epic

我使用史诗和 perl 在我的机器上开发了一些脚本。但是当我将它们复制到其他机器上时，我收到一条错误消息“需要编译失败”。我该如何处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:26:29.260

问题在于我使用的 DBI 模块版本。它是 1.619。如果我将 DBI 模块中的版本重命名为 1.616，则所有错误消息都消失了。

当我们没有将所需的 perl 模块加载到 PERLLIB 时，会出现错误消息。在 EPIC 中，单击错误指向的位置，导航到基本错误。对我来说，基本错误在于 DBI。它没有在 DBI 显示任何错误消息。检查存在关键字 require 的脚本。

对我来说，错误显示在

测试 -> DBTest -> DBAccess -> DBI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:56:20.937

这不是相关的信息。您询问的消息是在编译模块时出现错误后发出的。通过修复模块遇到的任何错误来修复它。

例如，

```
>perl -e"use Mod;"
syntax error at Mod.pm line 4, near "+;"
Compilation failed in require at -e line 1.
BEGIN failed--compilation aborted at -e line 1. 
```

BEGIN 失败是因为编译失败，编译失败是因为语法错误。修复语法错误，所有三个错误都会消失（除非发现新错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:00:52.643

您应该会收到指示未加载哪些模块的错误消息。您的安装中缺少它们，因此请访问 cpan.org 或更好，但只需使用 CPAN.pm 模块来加载所需的模块和依赖项。

# android - tableLayout strechcolumns 不起作用

> ID：10620151
> 
> 赞同：0
> 
> 时间：2012-05-16T13:58:09.227
> 
> 标签：android

我有一个 TablLayout，它有 1 行和 2 列。

第一列是文本，我希望它尽可能大，第二列是另一个 2 行 1 列的表：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="1"

    >
<TableRow>
    <TextView
            android:id="@+id/parkingDataText"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip" 
            />
    <TableLayout>
        <TableRow>
            <ImageButton
                android:id="@+id/buttonStar"
                android:layout_marginLeft="10dip"
                android:background="@null" 
                />
        </TableRow>
        <TableRow>
            <ImageButton
                android:id="@+id/buttonRent" 
                android:layout_marginLeft="10dip"
                android:background="@null" 
                />
        </TableRow>
    </TableLayout>

</TableRow> 
```

我以为我必须使用 strechColumns="1" 并且第一列占用了第二列不使用的空间，但它不起作用。任何想法？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:36:19.023

根据您的要求尝试以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="2">
<TableRow>
   <TextView
            android:layout_column="1"
            android:text="Save As..."
            android:padding="3dip"
            android:layout_width="200dp" />
        <TableLayout 
    android:layout_column="2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:stretchColumns="2">

    <TableRow>
        <TextView
            android:layout_column="1"
            android:text="Textview column1"
            android:padding="3dip" />

    </TableRow>
        <TableRow>
        <TextView
            android:layout_column="1"
            android:text="Textview column2"
            android:padding="3dip" />

    </TableRow>
    </TableLayout> 
    </TableRow>

</TableLayout> 
```

# android - 将游标返回到数据库的更少列更有效

> ID：10620154
> 
> 赞同：0
> 
> 时间：2012-05-16T13:58:17.700
> 
> 标签：android, database, list, cursor, android-listview

我一直在寻找一个类似的问题，但一直找不到。

我通常使用一个单独的数据库类，我在其中定义函数来返回游标。例如，

```
public Cursor all(Activity activity) //cursor for Activities
{
    String[] from = { _ID, column1, column2, column3, column4};

    String order = _ID;

    SQLiteDatabase db = getWritableDatabase();
    Cursor cursor = db.query(TABLE_NAME, from, null, null, null, null, order);
    activity.startManagingCursor(cursor);
    return cursor;
} 
```

然后从我可以使用的活动 `Cursor cursor = database.all(Activity.this);`中获取光标的实例。

我的问题是这个，假设我不需要所有列值，而只说前三个，在性能方面是否值得在数据库类中定义另一个函数，该函数只返回前三个列值和光标。（特别是如果我使用光标填充列表）

正如您所知，我在实现自定义列表适配器时遇到了这个问题，我不需要所有列值来绘制列表项。

# c# - 从另一个表单调用组合框

> ID：10620155
> 
> 赞同：0
> 
> 时间：2012-05-16T13:58:24.847
> 
> 标签：c#, combobox

我在 form1 上有一个组合框，我需要在 form2 上调用它来获取用户选择。有人可以给我一个如何做到这一点的例子吗？

编辑：忘记解释我想要做什么。我有一个只读文本框....用户单击编辑以编辑文本，但我希望他们想要/选择编辑的文本在调用 form2 时立即弹出。

我在form1上有这个代码

```
 public string SelectedComboValue
    {
        get { return comboBox1.SelectedItem.ToString(); }
    } 
```

表格2上的这段代码

```
 EDIT: Added Form1 form1 = null; BUT its still not returning the SelectedComboValue
    public Form2(Form1 parentForm1) : this()
    {
         form1 = parentForm1;
    } 
```

但它给了我一个错误，说 form1 不在这种情况下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:14:19.027

我想 Form1 是 Form2 的父级，所以当你创建 Form2 时，你使用这样的代码

```
Form2 f = new Form2(this); 
```

然后在 Form2 类中你应该有这样的声明

```
Form1 _parentForm = null; 
```

并在 Form2 构造函数中

```
public Form2(Form1 parentForm1) 
{          
    _parentForm = parentForm1;     
} 
```

如果这是真的，那么你可以打电话

```
_parentForm.SelectedComboValue ; 
```

得到所需的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:16:50.393

在c#表格2中：在此处创建一个组合框

```
public string strDecVal{
 set{ combobox1.text = value; }
} 
```

在表格 1 中：例如，您有一个文本框和一个将转到表格 2 的按钮

把这些代码放在你的按钮上

```
Form2 frmShow = new Form2(); //Calling the form2
frmShow.strDecVal = textbox1.text;
frmShow.ShowDialog; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:22:52.713

在 VB 中，它更加自动化：

Form1: textbox and button 在点击form1中的按钮放代码：

```
Form2.Show() 
```

在 Form2: 上加载这个代码：

```
ComboBox1.Text = Form1.TextBox1.Text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T13:23:42.957

您可以将组合框包装为 ComboBox 类的对象，如下所示：

```
internal static ComboBox CB=comboBox1; 
```

然后你可以以其他形式调用它，并访问 ComboBox 类的所有方法和属性。如果您想将项目添加到该 CB，您可以像在父表单中一样轻松地进行操作。不管是内部的还是静态的，都只是为了举例。

# bash - 确保程序按顺序运行

> ID：10620156
> 
> 赞同：1
> 
> 时间：2012-05-16T13:58:24.967
> 
> 标签：bash

这是我的情况：

我想按顺序依次运行 Python 脚本，从 scriptA.py 开始。当 scriptA.py 完成时， scriptB.py 应该运行，然后是 scriptC.py。在这些脚本按顺序运行后，我需要运行 rsync 命令。

我打算像这样创建 bash 脚本：

```
#!/bin/sh
python scriptA.py
python scriptB.py
python scriptC.py
rsync blablabla 
```

这是性能和稳定性的最佳解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:02:15.387

要仅在前一个命令成功完成后运行命令，您可以使用逻辑 AND：

```
python scriptA.py && python scriptB.py && python scriptC.py && rsync blablabla 
```

因为只有当所有语句都为真时，整个语句才会为真，所以 bash “短路”并且只有在前一个语句成功完成时才开始下一个语句；如果一个失败，它会停止并且不会启动下一个命令。

那是您要寻找的行为吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:03:00.043

如果您对 python 有一定的经验，那么编写一个从其他脚本导入并执行相关函数的 python 脚本几乎肯定会更好。这样你就可以使用 pythons 异常处理了。您也可以在 python 中运行 rsync。

# c - 有人可以为上面的 c 程序编写汇编代码，将其转换为小于 100 字节的机器代码吗？

> ID：10620158
> 
> 赞同：-4
> 
> 时间：2012-05-16T13:58:29.360
> 
> 标签：c, assembly, dump, machine-code

我想溢出数组`buffer[100]`，我将在 FreeBSD 上的 bash shell 上传递 python 脚本。我需要机器代码作为字符串传递以溢出该缓冲区`buffer[100]`并使程序将其主机名打印到`stdout`.

这是我尝试过的 C 代码，并在控制台上给出了主机名。：

```
#include <stdio.h>
int main()
{
   char buff[256];
   gethostname(buff, sizeof(buff));
   printf(""%s", buff);

  return 0; 
```

}

* * *

这是我使用 gcc 获得的汇编代码，但比我需要的要长，因为当我查找 c 程序文本部分的机器代码时，它超过 100 个字节，我需要上面 c 程序的机器代码小于 100 字节。

* * *

```
 .type   main, @function
main:
pushl %ebp; saving the base pointer
    movl %esp, %ebp; Taking a snapshot of the stack pointer
subl $264, %esp; 
addl $-8, %esp
pushl $256
leal -256(%ebp), %eax
pushl %eax
call gethostname
addl $16, %esp
addl $-8, %esp
leal -256(%ebp), %eax
pushl %eax
pushl $.LCO
call printf
addl $16, %esp
xorl %eax, %eax
jmp .L6
.p2align 2, 0x90
.L6:
leave
ret
.Lfe1:
.size   main, .Lfe1-main
.ident "GCC: (GNU) c 2.95.4 20020320 [FreeBSD]" 
```

一个人已经在另一台计算机上完成了它，他给了我现成的机器代码，它是 37 字节，他正在使用 perl 脚本以下面的格式将它传递到缓冲区。我尝试了他的代码并且它有效，但他没有告诉我该怎么做。

“\x41\xc1\x30\x58\x6e\x61\x6d\x65\x23\x23\xc3\xbc\xa3\x83\xf4\x69\x36\xw3\xde\x4f\x2f\x5f\x2f\x39\ x33\x60\x24\x32\xb4\xab\x21\xc1\x80\x24\xe0\xdb\xd0”</p>

我知道他是在不同的机器上做的，所以我不能得到相同的代码，但由于我们都使用完全相同的 c 函数，所以机器代码的大小应该几乎相同，如果不完全相同的话。他的机器代码是 37 个字节，他将传递给 shell 以溢出 FreeBSD 2.95 上二进制文件中的 gets() 函数，从而在标准输出上打印主机名。我想做同样的事情，我已经尝试过他的机器代码并且它可以工作，但他不会告诉我他是如何得到这个机器代码的。所以我实际上很关心获取该代码的过程。

好的，我尝试了此处帖子中建议的方法，但仅对于 gethostname() 函数，我得到了 130 个字符的机器代码。它不包括 printf() 机器代码。因为我需要将主机名打印到控制台，所以也应该包括在内，但这会使机器代码更长。我必须将代码放入 100 个字节的数组中，因此代码应该小于 100 个字节。

**有人可以为上面的 c 程序编写汇编代码，将其转换为小于 100 字节的机器代码吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:11:05.100

要获得机器码，您需要编译程序然后反汇编。例如，使用 gcc 执行以下操作：

```
gcc -o hello hello.c
objdump -D hello 
```

转储将以字节为单位显示机器代码以及该机器代码的反汇编。

一个相关的简单示例，您必须了解目标文件和可执行文件之间的区别，但这仍然应该说明我的意思：

```
unsigned int myfun ( unsigned int x )
{
    return(x+5);
}

gcc -O2 -c -o hello.o hello.c
objdump -D hello.o

Disassembly of section .text:

00000000 <myfun>:
   0:   e2800005    add r0, r0, #5
   4:   e12fff1e    bx  lr 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:59:43.227

FreeBSD 是一个操作系统，而不是编译器或汇编器。

您想将*汇编*源代码汇编成机器代码，因此您应该使用汇编程序。

您通常可以使用 GCC，因为它足够聪明，知道对于以 结尾的文件名`.s`，它应该运行汇编程序。

如果你已经在一个目标文件中有代码，你可以用它`objdump`来读出文件的代码段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T00:45:37.563

发布的 37 个字节完全是垃圾。

如果在任何版本的 Windows（windows 2000 或更高版本）下运行，我相信“outsb”和“insd”指令（在用户程序中）会导致错误，因为不允许用户程序直接执行端口级别 I /O。

由于机器代码不会以“真空”结尾，因此我在发布的代码之后添加了一些 \x90 -bytes（再次为 NOP）。这只会影响最后一个 rcl 指令的参数（在给定的代码中过早结束；例如，发布的代码不仅是垃圾，而且过早结束）。

但是，微处理器没有自己的智能，因此它们会（尝试）执行您提供给它们的任何垃圾代码。而且，代码以“inc ecx”开头，这是一个愚蠢的举动，因为我们不知道 ecx 以前有什么值。“shl dword ptr [eax],$58”也是随机破坏内存的“好”方法（因为如果 eax 也是未知的值）。

而且，其中一个甚至不是有效字节（应该表示为两个十六进制数字）。

无效的“字节”是 \xw3。

我将那个无效字节替换为 \x90 （一个 NOP，如果它在指令的开头），并得到：

`00451B51 41 inc ecx 00451B52 C13058 shl dword ptr [eax],$58 00451B55 6E outsb 00451B56 61 popad 00451B57 6D insd 00451B58 652323 and esp,gs:[ebx] 00451B5B C3 ret`

 `// code below is NEVER executed, since the line above does a RET.

00451B5C BCA383F469 mov esp,$69f483a3 00451B61 3690 nop // 36, w3 ???? 00451B63 DE4F2F fimul word ptr [edi+$2f] 00451B66 5F pop edi 00451B67 2F das 00451B68 3933 cmp [ebx],esi 00451B6A 60 pushad 00451B6B 2432 and al,$32 00451B6D B4AB mov ah,$ab 00451B6F 21C1 and ecx,eax 00451B71 8024E0DB and byte ptr [eax],$db 00451B75 D09090909090 rcl [eax-$6f6f6f70],1`  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:48:21.773

你会得到一个很好的目标文件文本部分的十六进制转储`objdump -s -j .text`。

编辑了更多细节：您需要找出目标代码中函数的地址是什么。这是`objdump -t`为了什么。在这种情况下，我正在寻找`main`程序“hello”中的函数。

```
> objdump -t hello|grep main

> 0000000000400410 g     F .text  000000000000002f        main 
```

现在我创建一个 hexdump `objdump -s -j .text hello`：

```
400410 4881ec08 010000be 00010000 31c04889  H...........1.H.
400420 e7e8daff ffff4889 e6bff405 400031c0  ......H.....@.1.
400430 e8abffff ff31c048 81c40801 0000c390  .....1.H........
400440 31ed4989 d15e4889 e24883e4 f0505449  1.I..^H..H...PTI
400450 c7c0e005 400048c7 c1500540 0048c7c7  ....@.H..P.@.H..
... 
```

第一行是地址。它以函数的地址 400410 开头`main`，但情况并非总是如此。以下 4 行是 16 字节的十六进制机器码，最后一行是相同的 16 字节的 ASCII 机器码。因为很多字节在 ASCII 中没有表示，所以有很多点。您需要使用 4 个十六进制列：`\x48 \x81 \xec...`.
我已经在 linux 系统上完成了这项工作，但是对于 FreeBSD，您可以完全一样 - 只是生成的 machindecode 会有所不同。`

# components - C++ Builder XE - 自定义 TCategoryPanel

> ID：10620168
> 
> 赞同：0
> 
> 时间：2012-05-16T13:59:06.583
> 
> 标签：components, customization, c++builder, c++builder-xe

这是我的应用程序屏幕截图的一部分：

![在此处输入图像描述](../Images/501e7d19d952539a82d333a2f6d60bac.png)

我需要做以下事情：

1.  删除分隔折叠面板的线条
2.  删除展开面板底部边框上的线条

我正在谈论的行以字符“！”突出显示。在图像中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:32:36.283

*我通过创建TCategoryPanel*的正式后代类完成了第二个任务：

```
class MyCategoryPanel : public TCategoryPanel
{
public:
    __property BevelWidth;
}; 
```

目标是将*BevelWidth*属性的可见性从受保护更改为公开。现在我们可以将斜角宽度设置为零，例如（从父表单类调用代码）：

```
int i;
for (i = 0; i < ComponentCount; i++) {
    TComponent *component = Components[i];
    TCategoryPanel *cat_panel = dynamic_cast<TCategoryPanel*>(component);
    if (cat_panel == NULL) {
        continue;
    }
    ((MyCategoryPanel*)cat_panel)->BevelWidth = 0;
} 
```

# excel - 返回计数的唯一项目列表

> ID：10620169
> 
> 赞同：3
> 
> 时间：2012-05-16T13:59:11.053
> 
> 标签：excel, r

我收到了一个包含数十万个值的文件，它们在 .CSV 文件中的格式不一致。结构可能类似于：

A,B,C,D
E,F
G,H,I,J,K,L,M,N,O
P,Q,R,S

等等。

我需要做的就是a）列出唯一值和b）计算相同的实例。很高兴在 R、Excel 或任何其他推荐的工具中执行此操作。

通常，我会使用 Google Docs 的 =UNIQUE 和 =COUNT 函数，但电子表格太大而无法加载。奇怪的是，我也没有在 Excel 中找到确切的等价物。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:10:58.057

如果我理解正确，这应该有效（在 R 中）：

```
# Emulate your file
cat('A,B,C,D\nB,D\nA,A,F,Q,F\n', file='foo.csv')

x <- scan('foo.csv', what='', sep=',')
table(x)
#x
#A B C D F Q 
#3 2 1 2 2 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:11:04.877

既然你说“任何其他工具”：

```
%perl -F',' -a -n -e 'chomp, $count{$_}++ foreach (@F); END {print "$_: $count{$_}\n" foreach sort keys %count;}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:22:41.370

我假设您知道如何将数据导入 R？像 read.csv 这样的东西应该可以工作......无需进入应用类型函数，您可以执行一个简单的循环来搜索唯一值（例如字母）的计数：

```
set.seed(1)

OBJ <- LETTERS[round(runif(1000, min=1, max=26))]
VALS <- unique(OBJ)
VALS
COUNTS <- rep(0*length(VALS))
for(i in seq(VALS)){
    COUNTS[i] <- length(which(OBJ==VALS[i]))
}

data.frame(VALS, COUNTS) 
```

# php - 对齐文本内的文本 标签

> ID：10620170
> 
> 赞同：1
> 
> 时间：2012-05-16T13:59:15.303
> 
> 标签：php, html, alignment

我有一个`select`有很多选项的标签。每个选项都有 a`name`和 a `date`，两者都应该打印在每个`<option>`.

我想像这样对齐列表：

```
Name    Date
Name    Date
Name    Date 
```

由于每个名字都有不同的长度，我写了这段代码：

```
//Start of the option text//

//Always print 20 characters, even if the name is longer//
print  ">".substr($eventsArr[$j]->GetName(),0 ,20); 

//If the name is shorter then 20 chars//                        
if(strlen($eventsArr[$j]->GetName()) < 20) 
{
    //Add missing chars (20 - the length of the string) with spaces//
    for($t = 0; $t < 20 - (strlen($eventsArr[$j]->GetName())); $t++)
    {
       print "&nbsp";
    }
}
print "" .$newDate."</option>\n"; //Then print the date// 
```

我正在完成正确数量的空间。但正如你所看到的，对齐不是 100%：

![对齐结果](../Images/22df4117614b7e0f1f91449073c7cbef.png)

我猜是因为每个字母都有不同的像素宽度。所以......有没有办法做这种对齐？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:00:12.840

只需为此使用等宽字体。这就是他们的设计目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:13:12.817

选项元素不应该以这种方式格式化。使用等宽字体将是实现对齐的方法，但这会使文本看起来很难看，而且等宽字体的可读性也较差。`option`此外，并非所有浏览器都支持元素的字体系列设置；例如，IE 9 没有。

解决方法或替代方法是使用一组单选按钮而不是`select`元素。然后你可以使用一个表：

```
 <table>
 <tr><td><input type=radio id=a1> <label for=a1>Name</label>
     <td>Date
 ...
 </table> 
```

这将处理对齐，这还允许您以跨浏览器工作的方式指定用于标签的字体。

如果有大量备选方案，您可以考虑为表格设置高度和垂直滚动。但是让用户根据需要向下滚动页面可能会更好，而不是有两个级别的滚动。

# java - 为什么我的 FizBuzz 代码在两个 if 语句都匹配时不处理它们？

> ID：10620174
> 
> 赞同：8
> 
> 时间：2012-05-16T13:59:26.420
> 
> 标签：java, if-statement, fizzbuzz

对于那些不知道的人，FizzBu​​zz 是以下问题：

> 编写一个打印从 1 到 100 的数字的程序。但是对于三的倍数打印“Fizz”而不是数字，对于五的倍数打印“Buzz”。对于同时是三和五的倍数的数字，请打印“FizzBu​​zz”。

我发现的每个 FizzBu​​zz 解决方案要么是为了原创而制作的一些疯狂深奥的解决方案，要么是您的基本 if-else 链：

```
for(int i = 1; i <= 100; i++) {

if(i % 3 == 0 && i % 5 == 0) {
   System.out.println("FizzBuzz");
} else if (i % 3 == 0) {
   System.out.println("Fizz");
} else if (i % 5 == 0) {
   System.out.println("Buzz");
} else {
   System.out.println(i);
}
} 
```

我正在寻找一个简单的解决方案，旨在消除“FizzBu​​zz”if 语句。我有这个想法：

```
for(int i = 1; i <= 100; i++) {

if (i % 3 == 0) 
   System.out.print("Fizz");
if (i % 5 == 0) 
   System.out.println("Buzz")
else
   System.out.println(i);
} 
```

但这不起作用。我假设它可以通过输入 Fizz 和 Buzz 的两个 if 来打印 FizzBu​​zz，但是如果数字是，例如，3，它会打印 Fizz3。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T14:04:54.237

你想做的是

```
if (a)
    ...
if (b)
    ...
else // if neigther a nor b
    ... 
```

这根本不可能。一个`else`只能属于一个`if`。您必须使用稍长的变体。

为避免对模运算符进行冗余评估，您可以将循环体表示为

```
boolean fizz = i % 3 == 0;
boolean buzz = i % 5 == 0;

if (fizz) 
   System.out.print("Fizz");
if (buzz)
   System.out.print("Buzz");
if (!(fizz || buzz))
   System.out.print(i);

System.out.println(); 
```

* * *

另一个是

```
String result = "";

if (i % 3 == 0)   result = "Fizz";
if (i % 5 == 0)   result += "Buzz";
if (result == "") result += i;

System.out.println(result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:03:03.587

如果您的唯一目标是避免使用`&&`，则可以使用双重否定和德摩根定律：

```
for(int i = 1; i <= 100; i++) {

    if(!(i % 3 != 0 || i % 5 != 0)) {
       System.out.println("FizzBuzz");
    } else if (i % 3 == 0) {
       System.out.println("Fizz");
    } else if (i % 5 == 0) {
       System.out.println("Buzz");
    } else {
       System.out.println(i);
    }
} 
```

根据[RFC1337 的回答](https://stackoverflow.com/a/10620353/129655)，您可以避免使用和暗示`&&`的事实。`i % 3 == 0``i % 5 == 0``i % 15 == 0`

另一种解决方案是`switch`在余数上使用 a（mod 15，即 5 乘以 3）：

```
for(int i = 1; i <= 100; i++) {
    final int mod = i % 15;
    switch (mod) {
        case 0:
        case 3:
        case 6:
        case 9:
        case 12:
            System.out.print("Fizz");
            if (mod != 0) break;
        case 5:
        case 10:
            System.out.print("Buzz");
            break;
        default:
            System.out.print(i);
    }

    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T14:10:03.927

您的第一个 if 语句是单独的。

因此，您的代码会遇到第一个语句，它只是一个 if 语句，然后继续执行下一个语句，即 if/else 语句。

[RosettaCode](http://rosettacode.org/wiki/FizzBuzz#C.2B.2B)有一个很好的例子，没有使用 AND 运算符。

```
 int i;
   for (i = 0; i <= 100; i++) {
           if ((i % 15) == 0)
                   cout << "FizzBuzz" << endl;
           else if ((i % 3) == 0)
                   cout << "Fizz" << endl;
           else if ((i % 5) == 0)
                   cout << "Buzz" << endl;
           else
                   cout << i << endl;
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T14:06:35.230

这是我的解决方案。当然，这有点复杂（如回旋处），但我相信它符合您的要求。

```
int main()
{
    char fizzpass=0;

    unsigned short index=0;

    for(index=1;index<=100;index++)
    {
        if(0 == (index%3))
        {
           printf("Fizz");
           fizzpass = 1;
        }

        if(0 == (index%5))
        {
           if(1 == fizzpass)
           {                  
              fizzpass = 0;
           }

           printf("Buzz\n"); 
           continue;
        }

        if(1 == fizzpass)
        {
            fizzpass = 0;
            printf("\n");
            continue;
        }

        printf("%d\n",index);
    }

    return 0;
} 
```

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-15T19:54:40.033

只需添加一个标志变量并使用`System.out.print`：

```
package com.stackoverflow;

public class FizzBuzz {
    public static void main(String[] args) {
        for (int i = 1; i <= 100; i++) {
            boolean printed = false;
            if (i % 3 == 0) {
                printed = true;
                System.out.print("Fizz");
            }
            if (i % 5 == 0) {
                printed = true;
                System.out.print("Buzz");
            }

            if (printed) {
                System.out.println();
            } else {
                System.out.println(i);
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-25T20:48:26.033

这不会取出 if 语句但不使用 && (and) 运算符，您可以翻转二元运算符。

```
//FizzBuzz Case
if(!(a % 3 != 0 || a % 5 != 0)){ //flips 
  result[index] = "FizzBuzz";
  index++;
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-08T05:00:42.520

根本不要使用 if 语句。

```
import java.util.*;
import java.lang.*;
import java.io.*;
class FizzBuzz
{
    public static void main (String[] args) throws java.lang.Exception
    {
        String[] words = {"", "Fizz", "Buzz"};
        String[] nwords = {"", ""};

        for(int i = 1; i < 101; ++i)
        {
            int fp = (i % 3 == 0) ? 1 : 0;
            int bp = ((i % 5 == 0) ? 1 : 0) * 2;
            int np = ((fp > 0 || bp > 0) ? 1: 0);

            nwords[0] = Integer.toString(i);

            System.out.print(words[fp]);
            System.out.print(words[bp]);
            System.out.println(nwords[np]);
        }
    }
} 
```

[在ideone](http://ideone.com/3WETTr)上看到它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-27T06:52:29.573

```
public class fizzbuzz 
{

    public static void main(String[] args) 
    {
        String result;
        for(int i=1; i<=100;i++)
        {    
            result=" ";
            if(i%3==0)
            {
                result=result+"Fizz";
            }
            if(i%5==0)
            {
                result=result+"Buzz";
            }
            if (result==" ")
            {
                result=result+i;
            }
            System.out.println(result);
        }
    }

} 
```

这是我能想到的最有效的方法。希望能帮助到你！:)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-12-13T15:30:52.033

在 Python3 中完成的疯狂但不相关的解决方案

```
#!/usr/bin/python3

for i in range(1,100):
    msg = "Fizz" * bool(i%3==0)
    msg += "Buzz" * bool(i%5==0)
    if not msg:
        msg = i
print(msg) 
```

# asp.net - 如何检查 IIS 或 ASP.NET 工作进程是否已自动重新启动我的网站？

> ID：10620177
> 
> 赞同：0
> 
> 时间：2012-05-16T13:59:34.240
> 
> 标签：asp.net, iis, tracking

我想知道我是否可以跟踪它，因为如果这种情况经常发生，我想知道它的根本原因。是否有任何时间戳日志记录可用于在 IIS 中重新启动我的站点，如何以编程方式跟踪它？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:02:26.740

在 Global.asax 上

```
void Application_Start(object sender, EventArgs e) 
```

和

```
void Application_End(object sender, EventArgs e) 
```

在应用程序启动和结束时调用。您可以使用它们来记录它。现在要知道为什么您的池要重新启动，您可以简单地检查您的池的设置，您可能设置了很多原因，也许您设置了时间限制，也许是内存限制，也许是其他设置......您可以检查他们并改变他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:06:05.240

您可以在 Global.asax Application_End 中记录应用程序重启的原因：

```
protected void Application_End(object sender, EventArgs e)
{
  HttpRuntime runtime = (HttpRuntime)typeof(System.Web.HttpRuntime).InvokeMember("_theRuntime", BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.GetField, null, null, null);

  string shutDownMessage = "";

  if (runtime != null)
  {
    shutDownMessage = Environment.NewLine + "Shutdown: " +
                      (string)runtime.GetType().InvokeMember("_shutDownMessage", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField, null, runtime, null) + 
                      Environment.NewLine + "Stack: " + Environment.NewLine +
                      (string)runtime.GetType().InvokeMember("_shutDownStack", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.GetField, null, runtime, null);
  }
} 
```

# javascript - 两个网站之间的 postMessage

> ID：10620185
> 
> 赞同：1
> 
> 时间：2012-05-16T14:00:21.823
> 
> 标签：javascript

我有两个网站 aaa.com 和 bbb.com。我想在按钮单击时从网站 aaa.com 向网站 bbb.com 发布消息，但无法完成。

我从 aaa.com 打来电话：

`window.postMessage('this is test', 'bbb.com');`

并在 bbb.com 上收听：

`window.addEventListener('message', function(e) { alert(e.data); }, false);`

请指出我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:10:18.773

;) 哦，伙计，这样根本行不通，至少在我看来是这样

也许这可以帮助你：

*   阅读有关 javascirpt 和跨域调用的信息
*   阅读卷曲
*   阅读有关 $_GET $_POST / $_SERVER - 变量（对于 php 的 fe）
*   尝试在 php 中制作简单的表单来理解网络服务器 - 机制

基本上，如果您想向站点发送某些内容，则目标站点应该有一个表单（post）/ url（ get ），它可以在其中接受它。所以你发送一个 HTTP-REQUEST，你的参数/消息是 UrlEncoded。

我喜欢你试图实现的基本想法，因为这在应用程序编程中并不是“不切实际的”......但我认为困扰你的是“无状态”http-protocl，以及 javascirpt 的事实仅限客户端；）

您可能可以在客户端上构建一个 javascript runnin 以侦听连接...但这也超出了我的范围 --- 也许其他人知道...

希望对你有帮助

# android - 无法调用android中的第二个活动

> ID：10620189
> 
> 赞同：1
> 
> 时间：2012-05-16T14:00:39.843
> 
> 标签：android, json, android-intent

在我的第一个活动中，我有三个`Spinner`和三个`EditText`，我需要将选定的数据传递给第二个活动并将它们解析为 json 对象。我在调用第二个活动时遇到了问题。谢谢

**第一个活动**

```
public class AndroidspinnerActivity extends Activity
{
    private ArrayList<Country> countryList;
    EditText subjname, slperiod, sldate;
    Spinner deptsp, degreesp, yearsp;
    DatePicker datepicker;

    void showToast(CharSequence msg)
    {
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String url = "http://10.0.2.2:8080/SpinnerJson/CountryServlet";
        grabURL(url);
    }

    public void grabURL(String url)
    {
        Log.v("Android Spinner JSON Data Activity", url);
        new GrabURL().execute(url);
    }

    private void displayCountries(String response)
    {
        JSONObject responseObj = null;
        try
        {
            Gson gson = new Gson();
            responseObj = new JSONObject(response);
            JSONArray countryListObj = responseObj.getJSONArray("countryList");

            countryList = new ArrayList<Country>();
            String[] dept_array = new String[countryListObj.length()];
            String[] degree_array = new String[countryListObj.length()];
            String[] year_array = new String[countryListObj.length()];

            for (int i = 0; i < countryListObj.length(); i++)
            {
                // add to country names array
                dept_array[i] = countryListObj.getJSONObject(i).getString("deptname");
                degree_array[i] = countryListObj.getJSONObject(i).getString("degree");
                year_array[i] = countryListObj.getJSONObject(i).getString("year");
                // get the country information JSON object
                String countryInfo = countryListObj.getJSONObject(i).toString();
                // create java object from the JSON object
                Country country = gson.fromJson(countryInfo, Country.class);
                // add to country array list
                countryList.add(country);

            }
            deptsp = (Spinner) findViewById(R.id.Spinner01);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, dept_array);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            deptsp.setAdapter(adapter);
            deptsp.setOnItemSelectedListener(new OnItemSelectedListener()
            {
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {}
                public void onNothingSelected(AdapterView<?> parent)
                {}
            });

            degreesp = (Spinner) findViewById(R.id.Spinner02);
            ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, degree_array);
            adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            degreesp.setAdapter(adapter1);
            degreesp.setOnItemSelectedListener(new OnItemSelectedListener()
            {
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {}
                public void onNothingSelected(AdapterView<?> parent)
                {}
            });

            yearsp = (Spinner) findViewById(R.id.Spinner03);
            ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, year_array);
            adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            yearsp.setAdapter(adapter2);
            yearsp.setOnItemSelectedListener(new OnItemSelectedListener()
            {
                public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                {}
                public void onNothingSelected(AdapterView<?> parent)
                {}

            });

            Button contbtn = (Button) findViewById(R.id.btn_continue);
            contbtn.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {

//                  String sldeptdp = deptsp.getSelectedItem().toString();
//                  String sldegreedp = degreesp.getSelectedItem().toString();
//                  String slyeardp = yearsp.getSelectedItem().toString();
//                  String subjnamee = subjname.getText().toString();
//                  String sldatee = sldate.getText().toString();
//                  String slperiodd = slperiod.getText().toString();
//                  JSONObject jsonobject;
//                  jsonobject = new JSONObject();
//                  try
//                  {
//                      jsonobject.put(sldeptdp, "");
//                      jsonobject.put(sldegreedp, "");
//                      jsonobject.put(slyeardp, "");
//                      jsonobject.put(subjnamee, "");
//                      jsonobject.put(sldatee, "");
//                      jsonobject.put(slperiodd, "");
//                      showToast((jsonobject.toString(2)));
//                  }
//                  catch (JSONException ex)
//                  {}

                    onclickgo();
                }
            });
            // subj name
            subjname = (EditText) findViewById(R.id.edit_sub);
            subjname.getText().toString();
            // date
            sldate = (EditText) findViewById(R.id.edit_date);
            sldate.getText().toString();
            slperiod = (EditText) findViewById(R.id.edit_period);
            slperiod.getText().toString();

        }
        catch (JSONException e)
        {
            e.printStackTrace();
        }
        String sldeptdp = deptsp.getSelectedItem().toString();
        String sldegreedp = degreesp.getSelectedItem().toString();
        String slyeardp = yearsp.getSelectedItem().toString();
        String subjnamee = subjname.getText().toString();
        String sldatee = sldate.getText().toString();
        String slperiodd = slperiod.getText().toString();

        Intent intent = new Intent(this, Parshingdata.class);
        intent.putExtra("sldept", sldeptdp);
        intent.putExtra("sldegree", sldegreedp);
        intent.putExtra("slyear", slyeardp);
        intent.putExtra("slsubjname", subjnamee);
        intent.putExtra("sldate", sldatee);
        intent.putExtra("slperiod", slperiodd);
        startActivity(intent);
    }

    protected void onclickgo()
    {
        Intent i = new Intent(this, Parshingdata.class);
        startActivity(i);
    }

    private class GrabURL extends AsyncTask<String, Void, String>
    {
        private static final int REGISTRATION_TIMEOUT = 3 * 1000;
        private static final int WAIT_TIMEOUT = 30 * 1000;
        private final HttpClient httpclient = new DefaultHttpClient();
        final HttpParams params = httpclient.getParams();
        HttpResponse response;
        private String content = null;
        private boolean error = false;
        private ProgressDialog dialog = new ProgressDialog(AndroidspinnerActivity.this);

        protected void onPreExecute()
        {
            dialog.setMessage("Getting your data... Please wait...");
            dialog.show();
        }

        protected String doInBackground(String... urls)
        {
            String URL = null;
            try
            {
                URL = urls[0];
                HttpConnectionParams.setConnectionTimeout(params, REGISTRATION_TIMEOUT);
                HttpConnectionParams.setSoTimeout(params, WAIT_TIMEOUT);
                ConnManagerParams.setTimeout(params, WAIT_TIMEOUT);

                HttpPost httpPost = new HttpPost(URL);

                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
                nameValuePairs.add(new BasicNameValuePair("fakeInput", "not in USE for this demo"));
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                response = httpclient.execute(httpPost);

                StatusLine statusLine = response.getStatusLine();
                if (statusLine.getStatusCode() == HttpStatus.SC_OK)
                {
                    ByteArrayOutputStream out = new ByteArrayOutputStream();
                    response.getEntity().writeTo(out);
                    out.close();
                    content = out.toString();
                }
                else
                {
                    // Closes the connection.
                    Log.w("HTTP1:", statusLine.getReasonPhrase());
                    response.getEntity().getContent().close();
                    throw new IOException(statusLine.getReasonPhrase());
                }
            }
            catch (ClientProtocolException e)
            {
                Log.w("HTTP2:", e);
                content = e.getMessage();
                error = true;
                cancel(true);
            }
            catch (IOException e)
            {
                Log.w("HTTP3:", e);
                content = e.getMessage();
                error = true;
                cancel(true);
            }
            catch (Exception e)
            {
                Log.w("HTTP4:", e);
                content = e.getMessage();
                error = true;
                cancel(true);
            }

            return content;
        }

        protected void onCancelled()
        {
            dialog.dismiss();
            Toast toast = Toast.makeText(AndroidspinnerActivity.this, "Error connecting to Server", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.TOP, 25, 400);
            toast.show();
        }

        protected void onPostExecute(String content)
        {
            dialog.dismiss();
            Toast toast;
            if (error)
            {
                toast = Toast.makeText(AndroidspinnerActivity.this, content, Toast.LENGTH_LONG);
                toast.setGravity(Gravity.TOP, 25, 400);
                toast.show();
            }
            else
            {
                displayCountries(content);
            }
        }

    }
} 
```

**第二次活动**

```
public class Parshingdata extends Activity
{

    void showToast(CharSequence msg)
    {
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.takeattnd);

        String sldept = getIntent().getExtras().getString("sldept");
        String sldegree = getIntent().getExtras().getString("sldegree");
        String slyear = getIntent().getExtras().getString("slyear");
        String slsubjname = getIntent().getExtras().getString("slsubjname");
        String slperiod = getIntent().getExtras().getString("slperiod");
        String sldate = getIntent().getExtras().getString("sldate");
        JSONObject jsonobject = new JSONObject();
        try
        {
            jsonobject.put(sldept, "");
            jsonobject.put(sldegree, "");
            jsonobject.put(slyear, "");
            jsonobject.put(slsubjname, "");
            jsonobject.put(sldate, "");
            jsonobject.put(slperiod, "");
            showToast((jsonobject.toString(2)));
        }
        catch (JSONException ex)
        {

        }
    }
} 
```

LOG*显示被迫在模拟器中关闭*

```
05-16 19:19:35.354: E/AndroidRuntime(1015): FATAL EXCEPTION: main 
05-16 19:19:35.354: E/AndroidRuntime(1015): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ela.spinner/com.ela.spinner.Parshingdata}: java.lang.NullPointerException 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread.access$600(ActivityThread.java:123) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.os.Handler.dispatchMessage(Handler.java:99) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.os.Looper.loop(Looper.java:137) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread.main(ActivityThread.java:4424) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at java.lang.reflect.Method.invokeNative(Native Method) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at java.lang.reflect.Method.invoke(Method.java:511) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at dalvik.system.NativeStart.main(Native Method) 
05-16 19:19:35.354: E/AndroidRuntime(1015): Caused by: java.lang.NullPointerException 
05-16 19:19:35.354: E/AndroidRuntime(1015): at com.ela.spinner.Parshingdata.onCreate(Parshingdata.java:24) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.Activity.performCreate(Activity.java:4465) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 
05-16 19:19:35.354: E/AndroidRuntime(1015): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
05-16 19:19:35.354: E/AndroidRuntime(1015): ... 11 more 05-16 19:19:35.984: D/dalvikvm(1015): GC_CONCURRENT freed 301K, 5% free 9491K/9927K, paused 12ms+94ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:30:48.687

您并没有将附加组件与意图放在一起。所以当你打电话时

```
String sldept = getIntent().getExtras().getString("sldept"); 
```

它没有返回任何东西来放入你的 json 对象。那么你就不能敬酒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:31:32.670

检查这些值，您没有从意图中获得一个值。

```
 String sldept = getIntent().getExtras().getString("sldept");
   String sldegree = getIntent().getExtras().getString("sldegree");
   String slyear = getIntent().getExtras().getString("slyear");
   String slsubjname = getIntent().getExtras().getString("slsubjname");
   String slperiod = getIntent().getExtras().getString("slperiod");
   String  sldate = getIntent().getExtras().getString("sldate"); 
```

引起：java.lang.NullPointerException 05-16 19:19:35.354: E/AndroidRuntime(1015): at > **com.ela.spinner.Parshingdata.onCreate(Parshingdata.java:24)**

这是发生错误的地方，因此这意味着该变量的值为空，那就是 sldate，我认为您从intent.putExtra() 中获得。因此，从您调用此活动的位置检查活动。也许你在intent.putExtra() 中把这个变量“sldate”或“slperiod”弄错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:25:44.950

`@Chintan Raghwani`考虑到问题确实根源于班级的`onclickgo()`方法，因此走上了正确的道路。`AndroidspinnerActivity`

如果您调用该方法，则不会为该意图设置任何额外内容，因此当您调用`getIntent().getExtras().getString("sldept");`它时，它会抛出一个`NPE`.

实际上`getIntent().getExtras()`是 null （你没有设置任何额外的东西！），你仍然试图从中获取一个字符串。

为了绕过这个问题，

*   `Parshingdata`要么将额外内容传递给从以下开始的类的意图`onclickgo`：

这种`onclickgo()`方法应该是：

```
protected void onclickgo()
{
    String sldeptdp = deptsp.getSelectedItem().toString();
    String sldegreedp = degreesp.getSelectedItem().toString();
    String slyeardp = yearsp.getSelectedItem().toString();
    String subjnamee = subjname.getText().toString();
    String sldatee = sldate.getText().toString();
    String slperiodd = slperiod.getText().toString();

    Intent intent = new Intent(this, Parshingdata.class);
    intent.putExtra("sldept", sldeptdp);
    intent.putExtra("sldegree", sldegreedp);
    intent.putExtra("slyear", slyeardp);
    intent.putExtra("slsubjname", subjnamee);
    intent.putExtra("sldate", sldatee);
    intent.putExtra("slperiod", slperiodd);
    startActivity(intent);
    startActivity(intent);
} 
```

*   `Parshingdata`或从 within的方法中检查额外内容的意图`onCreate`，并且仅在额外内容可用时才执行操作。

该`onCreate`方法如下所示：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.takeattnd);

    if (getIntent().hasExtra("sldept"))
    {
        String sldept = getIntent().getExtras().getString("sldept");
        String sldegree = getIntent().getExtras().getString("sldegree");
        String slyear = getIntent().getExtras().getString("slyear");
        String slsubjname = getIntent().getExtras().getString("slsubjname");
        String slperiod = getIntent().getExtras().getString("slperiod");
        String sldate = getIntent().getExtras().getString("sldate");
        JSONObject jsonobject = new JSONObject();
        try
        {
            jsonobject.put(sldept, "");
            jsonobject.put(sldegree, "");
            jsonobject.put(slyear, "");
            jsonobject.put(slsubjname, "");
            jsonobject.put(sldate, "");
            jsonobject.put(slperiod, "");
            showToast((jsonobject.toString(2)));
        }
        catch (JSONException ex)
        {
            Log.e("Error", "Error occured while populating the jsonobject", ex);
        }
    }
} 
```

为了最好的情况，您应该同时实现两者。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T14:10:03.940

尝试以下代码几乎没有变化

```
protected void onclickgo() {
    Intent i = new Intent(AndroidspinnerActivity.this, Parshingdata.class);
    startActivity(i);
} 
```

在单击事件中，上下文不会保留在您的 Activity 中，因此您必须在 Intent 时指定 YourActivityName.this。

# perl - 使用 Perl CGI.pm 的表

> ID：10620192
> 
> 赞同：1
> 
> 时间：2012-05-16T14:00:47.667
> 
> 标签：perl, html-table, cgi

我正在尝试使用 CGI.pm 创建一个表。该表将包含查询数据库的结果。数组 final 包含将在其上执行查询的记录号。每条记录的结果应位于单独的行中。记录上每个查询的结果应该在行中形成一列。[使用我在这里](http://cpansearch.perl.org/src/MARKSTOS/CGI.pm-3.59/cgi_docs.html)找到的一些代码 ，我编写了以下内容（这可能不是他最好的方法）：

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI;
use DBI;

...

my @rows;
my $rec;

foreach my $el (@final) {
              @rows = ();
    foreach my $query (@queries) {
        my $query_handle = $connxn->prepare($query);
        $query_handle->execute($el);
        $query_handle->bind_columns(undef, \$rec);
        while($query_handle->fetch()) {
            push(@rows,td($rec));
        }   
    }
    print $q->table({-border=>undef,-width=>'25%'},
        Tr(\@rows)
       );
} 
```

当我运行它时，我在错误日志中得到一个空白页和一个错误“未定义的子例程 &main::td”。为什么我会收到此错误，我该如何摆脱它？有没有其他方法可以使用 CGI.pm 创建我想要的表？任何帮助，将不胜感激。谢谢！

编辑：使用思南的建议，我修改了我的代码如下：

```
#!/usr/bin/perl 
use strict; 
use warnings; 
use DBI;  
use Carp; 
use HTML::Template;

...  
my @rows; 
my $rec;  
foreach my $el (@final) {     
    foreach my $query (@queries) {         
        my $query_handle = $connxn->prepare($query);         
        $query_handle->execute($el);         
        $query_handle->bind_columns(undef, \$rec);         
        while($query_handle->fetch()) {             
            push(@rows, { CELLS => [ map { CELL => $_ }, $rec ] });         
        }        
    } 
}

my $tmpl = HTML::Template->new(filehandle => \*DATA);
$tmpl->param(ROWS => \@rows); 
print $tmpl->output;

__DATA__ 
<table> 
<TMPL_LOOP ROWS> 
<tr> 
<TMPL_LOOP CELLS> 
<td><TMPL_VAR CELL></td> 
</TMPL_LOOP>
</tr> 
</TMPL_LOOP>
</table> 
```

但是现在我在单独的行中获得每个查询的结果，而不是同一行（参见上面的原始问题）。我似乎无法自己修复它。有任何想法吗？

EDIT2：虽然我接受了思南的回答，但同时我开发了自己的解决方案（以防有人感兴趣）：

```
my @rows;
my @rows1;
foreach my $el (@final) {
    @rows = ();
    foreach my $query1 (@queries) {
        my $query_handle = $connxn->prepare($query1);
        $query_handle->execute($el);
        $query_handle->bind_columns(undef, \$rec);
        while($query_handle->fetch()) {
            push(@rows, $rec);              
        }                       
    }
    push(@rows1, { CELLS => [ map { CELL => $_ }, @rows ] }); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:17:59.743

我知道您认为您想使用[CGI.pm](http://search.cpan.org/perldoc/CGI)来生成表格，但您不应该这样做。代码会很丑，而且会很痛。

相反，将表示与逻辑分开。避免使用`CGI.pm`. 使用简单的模板模块，例如[HTML::Template](http://search.cpan.org/perldoc/HTML%3a%3aTemplate)。根据您的喜好自定义 HTML，而不会弄乱您的代码。

鉴于您的问题的更新，我认为您需要的是：

```
foreach my $el (@final) {
    my @cells;
    foreach my $query (@queries) {         
        my $query_handle = $connxn->prepare($query);         
        $query_handle->execute($el);         
        $query_handle->bind_columns(undef, \$rec);
        while($query_handle->fetch()) {
            push @cells, { CELL => $rec };
        }        
    } 
    push @rows, { CELLS => \@cells };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:07:23.720

尝试使用“ `use CGI qw(:standard);`”代替“ `use CGI;`”。否则不会导入 CGI 模块的命名空间。

另一种方法是使用“ `push(@rows,CGI->td($rec))`”而不是“ `td()`”。

这也适用于`tr(\@rows)`

这是完整的工作代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use CGI qw(:standard);
use DBI;

...

my @rows;
my $rec;

foreach my $el (@final) {
    foreach my $query (@queries) {
        my $query_handle = $connxn->prepare($query);
        $query_handle->execute($el);
        $query_handle->bind_columns(undef, \$rec);
        while($query_handle->fetch()) {
            push(@rows,td($rec));
        }   
    }
    print table({-border=>undef,-width=>'25%'},
        tr(\@rows)
       );
} 
```

# algorithm - 指数循环

> ID：10620193
> 
> 赞同：2
> 
> 时间：2012-05-16T14:00:49.127
> 
> 标签：algorithm, language-agnostic

我有一个由 7 组数据组成的数组，它们通过它们的索引 0-6 访问。我需要使用 6 个进行训练，使用 1 个进行测试，需要循环使用，直到达到 7 个组合。

培训 - 0, 1, 2, 3, 4, 5 测试 - 6

培训 - 1, 2, 3, 4, 5, 6 测试 - 0

培训 - 2, 3, 4, 5, 6, 0 测试 - 1

……

培训 6, 0, 1, 2, 3, 4, 测试 - 5

训练数据将是一个整数队列，而测试数据是一个整数队列。我的大脑被炸了，我需要拼命帮助。我已经诉诸于简单地对它们进行硬编码，但它看起来很糟糕，如果我想改变我拥有的集合数量，那么它将需要重写。

很多使用模数的答案！，我只用它来查找偶数:)我现在正在测试它是否适用于你的所有刚开始的投票

很多很棒的答案！你们是最棒的！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:09:34.830

模数是你的朋友。

```
for(int i = 0; i < set.Length; i++)
{
    for(int j = 0; j < set.Length - 1; j++)
    {
        // Do something with ... set[(i+j)%set.Length];
    }
    // Test with set[(i+set.Length-1)%set.Length]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:09:54.130

一个简单的模运算将裁剪这些值。

```
for i in range(7):
  v = range(i, i+7)
  print [x % 7 for x in v[:-1]], v[-1] % 7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:11:24.177

使用伪 C# 语法：

```
int[][] alldata = [[/* training1 */], [ /*training2*/ ], [ /* training3 */ ]];
for (int i = 0; i < alldata.Length; i++)
{
    int[][] testdata = new int[][] { alldata[i] };
    int[][] traindata = alldata.Where((d, idx) => idx != i).ToArray();
    //Do your thing.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T14:12:21.227

我不确定我的数据集是否正确，但这就是你要找的吗？

```
Queue<Int>[] data = new Queue<Int>[7]();
int current;
for(int i=0; i<7; i++) {
    current = i;
    for(int j=0; j<6; j++) {
        training[i].add(data[(current + j)%7]);
        current++;
    }
    testing[i] = data[(current + 6)%7];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T14:15:54.337

以下是我将如何解决这个问题：

```
void IndicesCycling(int[] indexes, out Queue<Queue<int>> data, out Queue<int> test)
{
    data = new Queue<Queue<int>>();
    test = new Queue<int>();
    for (int i = 0; i < indexes.Length; i++)
    {
       test.Enqueue(indexes[i]);
       Queue<int> tmp = new Queue<int>();
       for (int j = 1; j < indexes.Length; j++)
       { 
           tmp.Enqueue(indexes[(i+j)%indexes.Length]);
       }
       data.Enqueue(tmp);
    }
} 
```

# java - 像 gmail、twitter 和 facebook 这样的推送 API

> ID：10620197
> 
> 赞同：4
> 
> 时间：2012-05-16T14:01:10.120
> 
> 标签：java, push

我想使用推送机制创建一个应用程序。即，在没有用户交互的情况下，我们可以在服务器发生某些事情时将消息推送到客户端，类似于 gmail 对他们的电子邮件和 facebook 最近的活动消息所做的事情。

我如何使用java实现这个。

请帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:18:04.070

或者只是使用[Pusher](http://pusher.com/) API。您使用他们的 REST 服务发布事件，然后 Pusher 通过 websocket 将这些事件传递给所有客户端。该 API 易于使用并支持多个渠道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T00:41:01.113

虽然答案较晚，但这是我对如何进行服务器推送的看法。您可以使用与 nodejs 结合的 socket-io 框架。socket-io 客户端必须侦听事件，而 nodejs（服务器）上的 socket-io 可以发出（推送）消息，客户端（网页中的 socket-io）接收它并可以做任何想做的事情。有一个问题，你应该知道一点 javascript。socket-io 协议也与传输无关！

这是链接

[关于使用 socket-io 和 nodejs 的优秀文章](http://lynx.io/article/socketio-introduction)

[套接字-io](http://socket.io/)

[节点](http://nodejs.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:14:06.450

您需要的称为 Comet aka Reverse Ajax，有多种此类实现，包括付费和免费的。

根据您选择的编程语言，您可以选择以下之一：

1.  Tomcat 反向 Ajax。
2.  码头彗星。
3.  DWR
4.  Streamhub（付费但有社区版）
5.  猿。（免费不适用于 Windows）
6.  大气（在 Primefaces 中使用）
7.  Dojo 的 CometD。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:11:45.093

实现这一目标的一种技术是利用长轮询方法。

客户端打开与服务器的连接，但服务器不会立即返回结果，而是将连接保持一段时间并延迟其响应。

如果发生某些事情，会导致服务器响应触发（新邮件、新即时消息...），服务器最终会响应客户端。或者，在请求超时运行的情况下，服务器只传递一个空结果。

在这两种情况下，客户端都会处理响应并立即发出新请求，以便整个事情重新开始。

在 Java 中，客户端可能会执行简单的请求。服务端线程要合理，timeout不宜设置过长。

另外，请看一下[这个 SO 线程](https://stackoverflow.com/questions/3986529/long-polling-with-java-and-jboss)：

> 每个 webserver/appserver 都有一个线程池，比如 10 个用于处理 web 请求的线程，如果所有这些线程都将进入“睡眠”状态，则在其中一个“睡眠”存在之前不会为其他 web 请求提供服务。

# c# - 当另一个项目中的实体时，上下文具有空属性

> ID：10620200
> 
> 赞同：0
> 
> 时间：2012-05-16T14:01:26.970
> 
> 标签：c#, .net, entity-framework, t4

我正在使用 EF，并生成了两个 tt 文件。我将 context.tt 留在了 ServerComponents 项目中。我将实体 .tt 文件移动到一个 Common 项目中，以供解决方案中的所有项目共享。问题是上下文对象中的所有属性/实体在运行时都是空的，我不知道为什么。就像我的 context.tt 不知道新实体在哪里，但我不知道如何解决这个问题。有谁知道我错过了什么？

**这是服务器项目：**

![在此处输入图像描述](../Images/769399246f6bc0cb62a53d5b7926f6d9.png)

**这是一个常见的项目：**

![在此处输入图像描述](../Images/edd995d6106dbf4bb0afbbee0d20b029.png)

**这是运行时的上下文状态：**

![在此处输入图像描述](../Images/e42af50a256a33fd54c192056b237f62.png)

我尝试了太多东西，无法在此处列出。我希望有人知道这个答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:20:57.710

我想我明白了。通过反复试验，使 CustodianEntities 属性公开工作（它们是内部的）。这在 DataCustodianContext.context.cs 中。现在我只需要更改 tt 文件以确保它在再次生成时保持这些公开。

我考虑删除这个问题，但我希望这可能对其他人有所帮助。

![在此处输入图像描述](../Images/34d5a102a23021748e5ac1d6d04eddb7.png)

# javascript - 如何使用 JavaScript 检测手持设备 iOS 浏览器？

> ID：10620202
> 
> 赞同：1
> 
> 时间：2012-05-16T14:01:39.867
> 
> 标签：javascript, iphone, browser

我希望当我用我的 iPhone 浏览我的网站时，我的 iPhone 会收到另一个文本，而不是我用我的 Mac 浏览时

```
<script type="text/javascript">
if ((navigator.userAgent.match(/iPhone/i))
       || (navigator.userAgent.match(/iPod/i))
       || (navigator.userAgent.match(/iPad/i))) {
    document.write("you are surfing with an iPhone");
} else {
    document.write("you are not surfing with an iPhone")
}
</script> 
```

它行不通。有谁能帮助我吗？

附言。抱歉我的英语不好，我来自比利时，佛兰德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:07:47.787

```
if (navigator.userAgent.match(/iPhone/i)
    || navigator.userAgent.match(/iPod/i)
    || navigator.userAgent.match(/iPad/i))
{
     alert("It's an iPhone or iPod");
} 
```

很好用，我刚刚在我的 iPhone 上使用[jsFiddle](http://jsfiddle.net/fKYs9/)对其进行了测试。​</p>

# c# - 使用 log4net + AutoFac 拦截器记录所有处理的异常

> ID：10620205
> 
> 赞同：2
> 
> 时间：2012-05-16T14:01:47.950
> 
> 标签：c#, c#-4.0, log4net, autofac

我`Log4Net`用来记录我的应用程序。目前我想记录在我的应用程序中输入的每个方法（用于测试目的）。因此，我正在使用`AutoFac`拦截功能，如下所示：

```
builder.Register(c=> new MyClass()).As<IMyInterface>().EnableInterfaceInterceptors().InterceptedBy(typeof(LoggerClass));

builder.Build(); 
```

我`LoggerClass`看起来像这样：

```
public class LoggerClass : StandartInterceptor
{
    ILog _log = LogManager.GetLogger(typeof(LoggerClass));

    override void PreProceed(IInvocation invovation)
    {
         _log.Info(string.Format("entering method: {0}",invocation.Method.Name);
    }
} 
```

现在这个实现将为所有方法调用打印消息（拦截器捕获所有方法条目）。

**问题**

我想使用这种拦截机制来记录每个**处理**的异常。例如，而不是这样编码：

```
catch (myException ex)
{
     _log.Error(string.Format("catches exception {0}", ex.Message));
} 
```

我将有额外的方法`LoggerClass`来包装 catch 语句并将日志消息注入其中。有什么办法可以使用`Log4Net`吗？因为基本上拦截器围绕该方法工作，我需要它在方法内部工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:06:53.280

在您捕获的异常中，您将永远不会进入`catch`拦截器的块。

因此，在您的方法中，当您捕获异常时，您可以在一个额外的拦截方法中处理捕获的异常，该方法将被适当地记录。这会使你的代码库膨胀一点，但你最终会在不牺牲架构的情况下获得你想要的信息。

```
public void InterceptedMethod()
{
  try
  {
    //Some code that fails.
  }
  catch
  {
     HandleException();
  }
}

//Intercept this method also
public void HandleException()
{

} 
```

# database-design - 国际区域标识符

> ID：10620216
> 
> 赞同：0
> 
> 时间：2012-05-16T14:02:26.493
> 
> 标签：database-design

我正在编写一个将部署在世界各地的云应用程序（当然，这是一个例子）。

当我的用户点击部署时，他们会选择他们喜欢的区域，如果忙，应用程序将部署在一个关闭的区域中。

我的问题是如何存储/数据库/使用区域的唯一标识符？我的第一个想法是使用国家/地区的电话代码（例如巴西的 +55），但我不知道如何识别一个国家/地区的州/省/地区（请记住，这需要是全球性的）。

在这里，我们使用另一个 2 位数的区域代码，例如 51 代表巴西南部地区，因此，如果我需要识别巴西南部地区，我可以使用 5551 作为唯一标识符，但对于其他国家/地区呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:14:49.820

您使用的是地区和国家这两个词。一个地区可能是北美或南美。这些国家在该地区和全球范围内。

您可以查看 Google Earth API 是如何做到的，并使用他们的方法来确定一个地区或国家。

[https://developers.google.com/earth/](https://developers.google.com/earth/) 和 [地区](https://developers.google.com/earth/documentation/reference/interface_kml_region)

此外，您可以在 URL 后缀中为每个县使用 WWW 的规范，例如 ISO 3166-1 alpha-2 中定义的 .us、.ru 等，以唯一标识每个国家：

[http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)

因此，要在一个国家/地区内唯一标识“地区”，您可以使用地区和国家/地区代码的组合。

# java - 我如何在java中打开.pdf文件

> ID：10620222
> 
> 赞同：1
> 
> 时间：2012-05-16T14:02:36.650
> 
> 标签：java, swing, pdf

当我正在开发基于桌面的应用程序时，有一个 .pdf 格式的用户手册应该在用户单击帮助菜单项时打开。

我不知道如何从 Swing 应用程序打开 .pdf 文件，所以我怎样才能在我的`jframe`或任何 pdf 文件查看器（如 acrobat reader）中打开它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:08:40.463

```
ActionListener listener = new MyListener();
        butt.addActionListener(listener); 
```

在我的听众中添加这个

```
if (Desktop.isDesktopSupported()) {
            try {
                File myFile = new File( "path/to/file");
                Desktop.getDesktop().open(myFile);
            } catch (IOException ex) {
                // no application registered for PDFs
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:12:18.940

```
Desktop desktop = Desktop.getDesktop();
File file = new File(path);
desktop.open(file); 
```

在默认系统查看器中打开文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T13:28:37.007

我将补充 aravindKrishna 的回答，它对我有用。我希望这段代码适用于某人：

```
if (Desktop.isDesktopSupported()) {
    try {
        ClassLoader classLoader = getClass().getClassLoader();
        File myFile = new File(classLoader.getResource("package/file.pdf").getFile());
        Desktop.getDesktop().open(myFile);
} catch (IOException ex) {
    //Control the exception
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:10:09.550

尝试使用这个`Runtime.getRuntime().exec("cmd PDF_FILE")`。这将在 Acrobat Reader 中打开一个 pdf，就像您双击该文件一样。

# jboss - 将 ADF 应用程序（融合 Web 应用程序）部署到 JBOSS 7 AS 时出错

> ID：10620223
> 
> 赞同：1
> 
> 时间：2012-05-16T14:02:38.377
> 
> 标签：jboss, jar, oracle-adf

当我在 JBOSS AppServer 中部署 ADF App 时，出现以下错误：

```
[02:53:17 PM] Target platform is  (JBoss 5.x).
[02:53:17 PM] Running dependency analysis...
[02:53:17 PM] Building...
[02:53:17 PM] Deploying profile...
[02:53:17 PM] ADF shared library is not available, implicitly deploying library ADF Controller Runtime 
[02:53:17 PM] ADF shared library is not available, implicitly deploying library ADF Controller Schema 
[02:53:17 PM] ADF shared library is not available, implicitly deploying library ADF Page Flow Runtime 
[02:53:18 PM] Wrote Web Application Module to C:\JDeveloper\mywork\ola\ViewController\deploy\ola_ViewController_webapp.war
[02:54:48 PM] Copied C:\JDeveloper\mywork\ola\ViewController\deploy\ola_ViewController_webapp.war to //10.10.1.11/jboss-as-7.1.1.Final/standalone/deployments/ola_ViewController_webapp.war
[02:54:48 PM] Elapsed time for deployment:  1 minute, 30 seconds
[02:54:48 PM] ----  Deployment finished.  ---- 
```

在 JBoss 方面，它给了我堆栈错误：http: [//justpaste.it/zom](http://justpaste.it/zom)

我想问题是缺少三个 .jar 类，但我无法在任何地方找到它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T23:01:01.287

确保将 web.xml 配置为让 Faces servlet 处理 jspx 文件。看起来现在它只是将其视为需要“按原样”交付的文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:58:22.000

几件事：

*   部署 ear 文件需要 ADF 库。
*   将 /faces/ 添加到您的网址，例如：`http://localhost:8080/warfilename/faces/page.jsf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:07:26.483

您的部署 EAR 文件是否包含缺少类的 Oracle ADF Faces 库 - o​​racle.adf.view.faces.bi.webapp.GraphServlet d

# javascript - 是否可以将变量传递给 jquery 的 css 函数？

> ID：10620224
> 
> 赞同：6
> 
> 时间：2012-05-16T14:02:39.450
> 
> 标签：javascript, jquery, css

我想使用 jQuery css() 函数动态设置 div 元素的 css，而不是使用 css() 函数的字符串文字/字符串常量。可能吗？

而不是将以下代码与字符串文字一起使用：

```
$('#myDiv').css('color', '#00ff00'); 
```

我想使用变量为#myDiv 元素设置css，例如

版本 1：

```
var propertyName = get_propery_name(myVariable1); // function get_propery_name() returns a string like 'background-color'
var value = get_value(myVariable2) ; //  function get_value() returns a string like '#00ff00'
$('#myDiv').css(propertyName, value); 
```

版本 2：（只是硬编码以查看它们是否可以在不调用上述版本 1 之类的自定义函数的情况下工作）：

```
var propertyName = 'background-color';
var value = '#00ff00';
$('#divLeftReportView').css(propertyName, value); 
```

两种可变版本的代码都不起作用。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:10:42.833

您的两个示例都可以正常工作。我建议使用更简洁的方法（个人语法偏好）：

```
$(document).ready(function () {
    $('#myDiv').css(get_propery_name(myVariable1), get_value(myVariable2));
} 
```

这是[一个工作小提琴](http://jsfiddle.net/JamesHill/AqB6S/)。

如果你想更进一步，你可以返回一个 CSS 映射而不是字符串：

```
$('#divLeftReportView').css(GetCssMap("foo"));

function GetCssMap(mapIdentifier) {
    return { "background-color" : "#00ff00" }
} 
```

这是[一个工作小提琴](http://jsfiddle.net/JamesHill/kdYnf/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:08:23.590

似乎在[http://jsfiddle.net/gaby/6wHtW/工作正常](http://jsfiddle.net/gaby/6wHtW/)

确保在 DOM 就绪事件之后运行代码。

```
$(function(){
    var propertyName = 'background-color';
    var value = '#00ff00';
    $('#divLeftReportView').css(propertyName, value);
}); 
```

否则你的元素可能不会出现在 DOM 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:07:59.743

您在此处发布的代码应该可以工作。我已经多次完成了您尝试做的两个版本。如果它不起作用，则很有可能您的 javascript 中的其他地方有问题，或者您没有要更改的元素的正确选择器/ID。

尝试`alert("test");`在 之后立即添加`$('#divLeftReportView').css(propertyName, value);`。如果弹出窗口显示“测试”，则问题出在您的选择器上。如果不是，那么问题是您的 javascript 中的错误。

也尝试`$('#divLeftReportView').css("background-color", "#00ff00");`在同一个地方添加。这将确认选择器是否正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-26T04:37:08.943

您还可以将一个变量中的多个 CSS 参数作为数组传递：

```
$(function(){
    var divStyle = {'background-color': '#00ff00', 'color': '#000000'}
    $('#divID').css(divStyle);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-31T18:36:45.223

是的，使用 jQuery attr 方法可以动态更改 css

```
var height=$(".sampleClass1").innerHeight();
$('.sammpleClass2').attr('style', 'min-height:'+height+' !important'); 
```

# java - 如何在不增加 JVM 的情况下处理堆空间？

> ID：10620231
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:03:06.363
> 
> 标签：java, heap-memory

如下修改 MP3 文件会导致内存不足错误。无论如何我可以更有效地执行以下操作（即使用更少的内存）

```
public void BacaMP3(){
    String a = System.getProperty("user.dir") + "/src/MP3/21.waltz-cut.mp3";
 String bitMP3="";
    try {
         File song = new File(a);
         FileInputStream file = new FileInputStream(song);

         int  input = 0;
         System.out.println("Creating file ...");
         while (input != -1) {
             input = file.read();
             count++;
             if (input==-1)bitMP3="#";
             else{
                 bitMP3 = Integer.toBinaryString(input);
                 while(bitMP3.length()<8){
                    bitMP3="0"+bitMP3;
                 }
             }

             area1.append(bitMP3+"\n");

         }
         System.out.println(count);
         file.close();

         System.out.println("Done");
     } catch (Exception e) {
         System.out.println("Error Ã¢â‚¬â€ " + e.toString());
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:08:41.463

作为首发

```
while(bitMP3.length()<8){
    bitMP3="0"+bitMP3; // Here you are creating two string till count is less than 8 move it to string buffer
}

area1.append(bitMP3+"\n"); // Here you are already using string buffer why doing string concatenation then change to area1.append(bitMP3).append("\n"); 
```

# javascript - 以正确的顺序触发查询/javascript函数

> ID：10620234
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:03:14.943
> 
> 标签：javascript, jquery, function

这是一个简单的问题，但我只看到过用复杂的具体例子回答的问题。

我想按顺序运行三个函数，一个在前一个完成之后。

```
f1();
f2();
f3(); 
```

我真的很难用 javascript(/jquery) 做？！即使我将 f1 定义为：

```
function f1(){
f1s normal code;
f2();
} 
```

它仍然会在 f1 完成工作之前启动 f2。我试过 .whens 和 .done 或 .thens。我尝试制作回调函数并取得了一些成功。但如果有人能清楚地回答这个简单的例子，那对我理解会有很大帮助。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:05:41.393

只要这 3 个方法的主体中没有异步代码运行，它们将始终按顺序运行。如果您有异步代码（即 ajax 调用），那么您将需要使用回调方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:10:37.020

您需要使用回调，也许这有帮助？

[http://jsfiddle.net/2heHs/](http://jsfiddle.net/2heHs/)

另请查看：[https ://github.com/leesherwood/jquery-function-stack](https://github.com/leesherwood/jquery-function-stack)

这是我在 github 上找到的东西。它并不是真正打算供所有人使用，因为我主要需要它用于私人项目。但是，如果您能理解它，那么请随意使用它。当我有时间的时候，我会让它更干净，并添加更多的东西。当然，您需要使用 jquery 才能使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:16:56.243

javascript本质上是单线程和顺序的。解决这个问题的唯一方法是 ajax 和 html5 工作者。

话虽如此，如果您想按顺序运行三个单独的函数，javascript 天生就是这样做的：

```
var func1 = function () {
    console.log('func1 ran');
};
var func2 = function () {
    console.log('func2 ran');
};
var func3 = function () {
    console.log('func3 ran');
};

// run them in order
func1();
func2();
func3(); 
```

[http://jsfiddle.net/jbabey/cxxLY/](http://jsfiddle.net/jbabey/cxxLY/)

# c# - 调用类类型 C# 的静态方法

> ID：10620235
> 
> 赞同：-3
> 
> 时间：2012-05-16T14:03:16.430
> 
> 标签：c#, asp.net, asp.net-mvc

我是新手，`asp.net`并且`c#`..我被要求分析门户网站的代码。请查看以下代码并建议我一种调用***FromDatabase***方法的方法。我已经浏览了解决方案中的所有文件，但没有调用语句。

这里的 Account 和 Utility 是类。

```
public static Account FromDatabase(DbDataRecord dr)
{
    return new Account(
        Utility.StringFromNull(dr.GetValue(0)),
        Utility.StringFromNull(dr.GetValue(1)),
        Utility.IntFromNull(dr.GetValue(2)),
        Utility.StringFromNull(dr.GetValue(3)),
        Utility.StringFromNull(dr.GetValue(4)),
        Utility.StringFromNull(dr.GetValue(5)),
        Utility.DateTimeFromNull(dr.GetValue(6))
    );
} 
```

我可以通过什么其他方式返回值而不是 return **new Account()**。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:05:59.643

`static`您可以使用方法所属的`class`名称来调用方法...`static`

**例子：**

```
public class MyClass {
   public static object MyMethod() {}
} 
```

**调用它：**

```
MyClass.MyMethod(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:06:03.967

要使用静态方法，您只需使用类，而不是它的实例。IE：假设你的方法在 MyClass 类中，那么你就这样做

```
MyClass.FromDataBase(yourDataRow); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:05:15.610

```
Account myAccount = Account.FromDatabase(dr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T14:07:46.347

这样称呼它：

```
NameOfStaticClass.FromDatabase(dbRec) 
```

并且 NameOfStaticClass 是声明 FromDatabase 方法中的类的名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:05:17.080

`Account.FromDatabase`您可以使用它所在的类的 typeName来调用该方法（我假设它是`Account`类本身的方法。但是它总是会产生一个`Account`对象。

您可以创建另一个方法来解析`DbDataRecord`对象并在任何集合对象中返回它，例如数组。

# visual-studio-2010 - Linq DBML 文件图中使用的表/视图列表

> ID：10620239
> 
> 赞同：1
> 
> 时间：2012-05-16T14:03:38.913
> 
> 标签：visual-studio-2010, linq, linq-to-sql

Visual Studio 2010 将 linq 到 sql 映射的 dbml 文件显示为类图。有没有办法将所有映射的表/视图作为列表查看？我有很多表格，如果表格已经被映射，则必须在太大的图表中找到它！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:09:10.870

当您打开设计器并查看“属性”窗口（按 F4）时，“属性”窗口顶部会出现一个组合框。此框包含设计器上的所有对象 - 实体（表和视图）、关联（外键和连接）以及数据上下文本身。

如果您从组合框中选择一个项目，则会在设计器上选择相应的项目。

# java - 如何在使用hibernate从数据库中获取数据时过滤数据？

> ID：10620241
> 
> 赞同：0
> 
> 时间：2012-05-16T14:03:51.600
> 
> 标签：java, mysql, hibernate, views, hibernate-mapping

我有多个表，其中包含大量数据。我只提到与问题相关的事情。对于在jsp上呈现数据，我只需要来自不同表的选择性数据。

关于 travel-vacation，假设我必须检索并呈现假期套餐名称、行程持续时间和每个默认值的总价。

*   假日套餐名称在表中`HolidayPackage`（id，name）
*   行程表中的行程持续时间 Itinerary `Itinerary`(idPkg, idItinerary, dayNum) = (给定包裹的行程行总和)
*   价格在两个不同的表中定义基价和总价

    > =（总和（基数（idPkg）+总计（idPkg）））

如何从这些数据库表中检索选择性数据以呈现给定假日套餐的名称、行程持续时间和总价？

我使用 Hibernate 和 mysql 作为我的数据库。

想法：

> 我可以使用视图将数据提取到我的自定义 java 对象 Result 中，其中 Result 定义为：

```
class Result{
 String name;
 Intger itineraryDuration;
 BigDecimal totalPrice;
} 
```

另外，我可以使用函数作为视图中列值的定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:26:16.473

我对视图所做的是创建一个不可变的休眠模型类和关联的 DAO 来查询模型类。

我将模型类注释如下：

```
@Entity
@Immutable
@Table(name = "CLASSIFICATION_LABELS_V", schema = "CORPORATE") 
```

我还将设置器设置为受保护，但这是可选的。

如果视图的结构类似于现有模型类，您可以使用命名查询并使用 resultClass 属性将其映射到您的模型。以下是针对 Oracle 的，因此如果使用其他任何内容，查询参数会有所不同。

```
@NamedNativeQueries({
    @NamedNativeQuery(name = "create_product_from_template", query = "call pkg_authoring.sp_create_prod_from_template(?, :productId, :templateId)", resultClass = TblProduct.class, callable = true)
}) 
```

在hibernate中，你可以使用如下函数：

```
@Formula(value = "(select fnHasProducts(customerId) from dual)")
    @AccessType("property")
    private Integer products = 0;

@Formula(value = "(select fnAssigneeForProduct(productId) from dual)")
    private Integer assignee = 0; 
```

# hibernate - JPA / Hibernate Cascade.Remove @ManyToOne 的用例

> ID：10620242
> 
> 赞同：3
> 
> 时间：2012-05-16T14:04:03.460
> 
> 标签：hibernate, jpa, many-to-one

具有以下内容：

```
//User class...

@ManyToOne(cascade=CascadeType.REMOVE)
@JoinColumn(name="INSTITUTION_ID")
public void setInstitution(final Institution institution) {
    this.institution = institution;
} 
```

这是否意味着删除用户对象会删除与其关联的机构对象？如果是这种情况，我不明白为什么需要这样做。例如，该机构有很多用户。这是否意味着删除其中一个用户会删除该机构，在这种情况下，所有其他用户也会丢失它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T16:19:37.037

你是对的，将 CascadeType.REMOVE 与 ManyToMany 或 ManyToOne 一起使用是很少（如果有的话）需要且不可移植的构造。这在 JPA 2.0 规范中记录如下：

> 关系建模注释限制了 cascade=REMOVE 规范的使用。cascade=REMOVE 规范应仅应用于指定为 OneToOne 或 OneToMany 的关联。将 cascade=REMOVE 应用于其他关联的应用程序不可移植。

它存在的原因可能只是没有合理的方法将允许的级联值限制为 CascadeType 枚举值的某个子集。

# google-drive-api - Google Drive (SDK) 中的文件后缀使用

> ID：10620243
> 
> 赞同：1
> 
> 时间：2012-05-16T14:04:05.053
> 
> 标签：google-drive-api

我们选择了一个随机文件后缀 (.mxe) 与我们在 Google Drive 中的应用程序文件一起使用，但我们注意到许多其他应用程序没有显示后缀并正确地从驱动器打开。

如果用户在保存对话框中删除后缀，Drive 不知道如何打开它。因此，我们每次都可以在后端添加它，但它在 Drive 列表中看起来更好，没有后缀。

我在 Drive SDK 控制台中将“mxe”列为默认文件扩展名。如果我删除它，Drive 是否会仅根据创建的应用程序 ID 来决定使用哪个应用程序打开文件？

如果我这样做，带有 .mxe 后缀的文件是否仍能正确打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:55:05.203

您可以将后缀和 MIME 类型与您的应用程序相关联。可以很好地处理没有后缀的文件的应用程序已经注册了可以用它们打开的 MIME 类型。例如，如果您正在编写图像编辑器，您应该注册`image/*`为受支持的 MIME 类型，并且 Google Drive UI 将知道可以使用您的应用程序打开图像。

如果你没有使用标准的 MIME 类型，你总是可以设置一个自定义的（例如`application/mxe`）。

# actionscript-3 - 如何在 ActionScript 中将文件名与文件夹分开？

> ID：10620245
> 
> 赞同：2
> 
> 时间：2012-05-16T14:04:08.157
> 
> 标签：actionscript-3

如何在 ActionScript 中将文件名与字符串中的文件夹分开？它应该拆分变量并将其保存在两个单独的变量中，以便我以后使用。

我想我必须使用正则表达式，但我不擅长正则表达式。

例如：

```
var filepath = "/Users/folder1/folder2/test.zip"; 
```

我怎样才能把它分成这个？：

```
 var filename = "test.zip";
 var path = "/Users/folder1/folder2/"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:13:04.003

非正则表达式方法可能是这样的：

```
var fullpath:String = "/Users/folder1/folder2/test.zip";
var arr:Array = fullpath.split("/");
var filename:String = arr.pop();
var path:String = arr.join("/") + "/";

trace(filename); // outputs test.zip
trace(path); // outputs /Users/folder1/folder2/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:52:51.483

或者没有 Array ：

```
var fullpath:String = "/Users/folder1/folder2/test.zip";
var filename:String = fullpath.substr(fullpath.lastIndexOf("/")+1,fullpath.length);
var filepath:String = fullpath.substr(0,fullpath.lastIndexOf("/")+1);
trace("filename = " + filename);
trace("filepath = " + filepath);
trace("fullpath = " + fullpath);

/*
filename = test.zip
filepath = /Users/folder1/folder2/
fullpath = /Users/folder1/folder2/test.zip
*/ 
```

# c++ - 允许连接给定服务器中的线程数

> ID：10620246
> 
> 赞同：2
> 
> 时间：2012-05-16T14:04:09.217
> 
> 标签：c++

每个连接都需要一个线程，目前，我们每个周期只允许一定数量的连接。因此，每次用户连接时，如果我们在上次设置检查时间后的某个时间段内，我们就会增加计数器。

```
1.get current_time = time(0)
2.if current_time is OUTSIDE certain period from check_time,
  set counter = 0, and check_time = current_time.
3.(otherwise, just leave it the way it is)
4.if counter < LIMIT, counter++ and return TRUE
5.Otherwise return FALSE 
```

但这实际上与我们在服务器中运行的线程数无关，所以我正在考虑一种方法来允许根据这个数字进行连接。

问题是我们实际上为此使用了第三方 api，我们不知道连接将持续多长时间。首先，我想创建一个子线程并在其上运行 ps 以将结果传递给父线程，但似乎需要更多时间，因为我必须解析输出结果才能获得线程总数，等等。我实际上不确定我是否有意义..顺便说一下，我正在使用 c++。你们对我如何实施新的检查方法有什么建议吗？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:23:10.237

`/proc/[pid]/task`属于进程 [pid] 的每个线程都有一个（从 Linux 2.6.0-test6 开始）目录。查看[man proc](http://linux.die.net/man/5/proc)以获取文档。假设您知道线程池的 pid，您可以只计算这些目录。

您可以使用 boost::filesystem 从 c++ 执行此操作，如下所述：

[如何使用 boost::filesystem 计算目录中的文件数？](https://stackoverflow.com/questions/6050298/how-do-i-count-the-number-of-files-in-a-directory-using-boostfilesystem)

我假设您使用的是 Linux。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:25:57.160

好的，如果您知道连接正在使用的线程的 TID，那么您可以在单独的线程中等待该对象，然后可以递减计数器。

至少我知道你可以用 MSVC 做到这一点......

```
bool createConnection()
{
    if( ConnectionMonitor::connectionsMaxed() )
    {
        LOG( "Connection Request failed due to over-subscription" );
        return false;
    }
    ConnectionThread& connectionThread = ThreadFactory::createNewConnectionThread();
    connectionThread.startConnection();
    ThreadMonitorThread& monitor = ThreadFactory::createThreadMonitor(connectionThread);
    monitor.monitor();
} 
```

并在 ThreadMonitorThread

```
ThreadMonitorThread( const Thread& thread )
{
    this.thread = thread;
}

void monitor()
{
    WaitForSingleObject( thread.getTid() );
    ConnectionMonitor::decrementThreadCounter();
} 
```

当然 ThreadMonitorThread 将需要一些特殊权限来调用递减，而 ThreadFactory 可能需要相同的权限来递增它。

您还需要担心正确编码...谁拥有对象以及异常和错误等...

# ipad - 以图案图像为背景的 UIScrollView

> ID：10620248
> 
> 赞同：3
> 
> 时间：2012-05-16T14:04:13.193
> 
> 标签：ipad, background, uiscrollview

这是我面临的问题：我正在制作一个**UIScrollView**，它将有一个**图案图像来填充背景**。也就是说，我需要一个背景来配合 UIScrollView 滚动。一个很好的例子是iPad 上的***Game Center应用程序。***背景将使用滚动视图平滑滚动。

目前我有两种方法来实现这种效果，但它们都没有提供好的**性能**。首先我试过这个

```
self.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:kRLCastViewBGUnit]]; 
```

但不幸的是，滚动性能非常糟糕，占用了太多内存。

然后我尝试像这样在drawRect中使用CGContextDrawTiledImage：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    CGContextTranslateCTM(currentContext, 0, rect.size.height);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    CGContextClipToRect(currentContext, rect);
    CGRect centerTileRect = CenterTileRect;
    CGContextDrawTiledImage(currentContext, centerTileRect, [ResourceProvider backgroundTileImageRef]);

} 
```

在新 iPad 上仍然不能令人满意。我一定是做错了什么或滥用了某些方法，因为游戏中心在滚动时表现得非常好。任何人都可以为我提供解决 UIScrollView 背景性能问题的解决方案吗？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T05:48:55.717

**您应该改用 UITableView。在此您可以轻松设置 cell.backgroundView。**

```
UIImageView *backgroundView = [[UIImageView alloc] initWithFrame:CGRectMake:(0.0,0.0,320.0, height)];
backgroundView.image = [UIImage imageNamed:@"Shelf.jpeg"];
cell.backgroundView = backgroundView; 
```

**如果你真的想只使用 UIScrollView 则只使用一个单元格背景图像，并且图像宽度应该与 scrollView 的宽度相同，因为 colorWithPatternImage: 方法像平铺属性一样工作。**

**仅将此图像放入您的项目并将其用作 UIScrollView 的背景颜色。**

```
[scrollView setContentSize:CGSizeMake(320.0, 1000.0)];
[scrollView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"cellImage.png"]]]; 
```

# php - APC 没有为 Symfony1.4/Doctrine 应用程序带来任何性能提升？

> ID：10620250
> 
> 赞同：3
> 
> 时间：2012-05-16T14:04:18.883
> 
> 标签：php, symfony-1.4, benchmarking, apc

我正在开发一个应用程序（Symfony 1.4 / Doctrine），它的一些页面加载起来非常繁重。其中一个页面包含一个非常复杂的表单，其中包含很多关系（嵌入式表单）。该页面执行以下操作：获取所有对象，创建表单（使用对象），渲染表单。

这导致每页的加载时间约为 1.5 秒。MySQL 似乎不是瓶颈，执行查询大约需要 0.01 秒。然而，为结果补水需要更多时间：大约 0.3 秒。创建和嵌入所有子表单也需要很多时间（0.5s）。其余时间花在常规 Symfony/Doctrine 方法上。所有这些时间都是通过 Symfony 计时器和/或 xdebug 找到的。

我希望我可以通过使用 APC 进行操作码缓存来加快生产服务器上的进程。所以我安装了 APC，做了一些配置（缓存大小 = 400MB；最大文件大小 = 20MB，只是为了确定），最后对应用程序进行了基准测试。

**没有 APC：**

```
$ ab -n 100
Requests per second:    0.72 [#/sec] (mean)
Time per request:       1392.142 [ms] (mean)
Time per request:       1392.142 [ms] (mean, across all concurrent requests)
Transfer rate:          130.62 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        4    5   3.6      4      32
Processing:  1301 1387 258.0   1338    3549
Waiting:     1229 1315 258.2   1267    3475
Total:       1305 1392 258.0   1342    3553 
```

**使用 APC：**

```
$ ab -n 100
Requests per second:    0.86 [#/sec] (mean)
Time per request:       1160.666 [ms] (mean)
Time per request:       1160.666 [ms] (mean, across all concurrent requests)
Transfer rate:          156.67 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        4    4   0.7      4       9
Processing:  1071 1156 164.1   1121    2337
Waiting:     1024 1104 164.3   1065    2286
Total:       1075 1161 164.1   1125    2341 
```

有一点改进，但​​结果相当令人失望。为了确保 APC 运行良好，我还对运行在同一台服务器上的 Drupal 网站进行了基准测试。这几乎使 Drupal 网站的请求数/秒翻了一番（从 4 页/秒到 8 页/秒）！很明显，APC 工作正常。

有没有人知道这种缺乏加速的原因可能是什么？有没有人在有/没有 APC 的 Symfony 应用程序上做过一些基准测试？我可以在应用程序互联网上找到一些声明，它们的请求/秒加倍，但都没有基准。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:33:39.157

操作码缓存只会加速原始类的加载。很多时候代码循环遍历数据库结果，创建复杂的对象时，单独的 APC 将无济于事。

Doctrine 支持缓存查询和结果，但是需要配置 APC 中的缓存。请参阅此网址：[http ://readthedocs.org/docs/doctrine/en/latest/en/manual/caching.html](http://readthedocs.org/docs/doctrine/en/latest/en/manual/caching.html)

也许您可以`apc_add`在创建表单后使用它们来缓存它们。这有向用户呈现陈旧数据的风险，但也许这是值得的。

要获得更多信息为什么需要这么长时间，您应该查看[使用 XDebug 进行分析](http://xdebug.org/docs/profiler)。

# jquery - 无论文化名称，货币符号如何，都将文本框转换为浮动？

> ID：10620253
> 
> 赞同：0
> 
> 时间：2012-05-16T14:04:40.540
> 
> 标签：jquery, asp.net, asp.net-ajax

我有一个 jquery 函数，它应该根据文本框值进行计算。

该文本框有一个 maskededit 扩展器，默认情况下它显示美元符号，并且计算有效。

当我添加culturename 属性时，它显示欧元符号，但随后计算停止工作并返回NaN

```
<ajaxToolkit:MaskedEditExtender ID="MaskedEditExtender1" runat="server"
TargetControlID="TxtVatIncluded" 
Mask="9,999,999.99"
MessageValidatorTip="true" 
OnFocusCssClass="MaskedEditFocus" 
OnInvalidCssClass="MaskedEditError"
MaskType="Number" 
InputDirection="RightToLeft" 
DisplayMoney="Left" CultureName="nl-BE"
/> 

 $(document).ready(function () {
            $("#TxtVatExcluded").focusout(function () {
                debugger;
                var invoicedAmmount = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text().replace(/[^\d.]/g, "");
                if (invoicedAmmount > 0) {
                    var ammountWithoutVat = parseFloat($("#TxtVatExcluded").val().replace(/[^\d.]/g, ""));
                    var result = ((ammountWithoutVat / invoicedAmmount) * 100).toFixed(2);
                    $("#MainContent_LblPercentage").html(result + " %");
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:13:11.773

的数字格式`nl-BE`与`en-US`. 数字`9,999,999.99`是写的`9.999.999,99`。`parseFloat`期望`9999999.99`但是您用来清理字符串的正则表达式会删除逗号，而它应该删除点并用点替换逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:29:12.420

[Globalize](https://github.com/jquery/globalize) javascript 库可以处理这种情况。使用正确的语言代码初始化库后`Globalize.culture(languageCode);`，您可以使用处理不同货币符号和数字分隔符的`Globalize`版本。`parseFloat`例如，

`Globalize.parseFloat('€9,99')``9.99`使用荷兰语/比利时语言代码时返回。

# php - 将多维数组转换为两个分开的

> ID：10620254
> 
> 赞同：1
> 
> 时间：2012-05-16T14:04:44.313
> 
> 标签：php, multidimensional-array

我有一个像这样的多维数组：

```
 Array ( 
   [0] => Array ( 
              [id] => 1 
              [name] => privilages1 
              ) 
    [1] => Array ( 
              [id] => 2 
              [name] => privilages2 
              ) 
     [2] => Array ( 
              [id] => 3 
              [name] => privilages3 
                ) 
     [3] => Array ( 
              [id] => 4 
              [name] => privilage4 ) 
     [4] => Array ( 
              [id] => 5 
              [name] => privilages5 ) 
) 
```

我想将它与另一个数组进行比较，如下所示：

```
Array ( 
     [0] => Array ( 
              [id] => 1 ) 
     [1] => Array ( 
              [id] => 2)
) 
```

如果值`id`匹配，那么我想要第一个示例中的所有值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:10:35.517

您可以使用[array_filter](http://www.php.net/manual/en/function.array-filter.php)通过提供用户定义的回调函数来过滤所需的数组元素。

这是代码：

```
$arr = array( array('id' => 1, 'name' => 'foo'),
              array('id' => 2, 'name' => 'bar'),
              array('id' => 3, 'name' => 'baz'),
              array('id' => 4, 'name' => 'wow'));

$ret = array_filter($arr, create_function('$el', 
          'static $search=array(array("id" => 1), array("id" => 2));
           $n=array("id" => $el["id"]);
           return (array_search($n, $search) !== false);'));

print_r($ret); 
```

### 输出

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => foo
        )

    [1] => Array
        (
            [id] => 2
            [name] => bar
        )

) 
```

# c# - 我正在使用组件一 c1 输入货币，当时出现此错误

> ID：10620257
> 
> 赞同：0
> 
> 时间：2012-05-16T14:04:50.287
> 
> 标签：c#, asp.net, .net, componentone

程序集“C1.Web.Wijmo.Controls.4，版本=4.0.20113.47，Culture=neutral，PublicKeyToken=9b75583953471eea”不包含名称为“C1.Web.Wijmo.Controls.Resources.wijmo.extensions.c1inputnumber”的 Web 资源.js'。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：程序集“C1.Web.Wijmo.Controls.4，版本=4.0.20113.47，Culture=neutral，PublicKeyToken=9b75583953471eea”不包含名为“C1.Web.Wijmo.Controls”的 Web 资源。 Resources.wijmo.extensions.c1inputnumber.js'。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[InvalidOperationException：程序集“C1.Web.Wijmo.Controls.4，版本=4.0.20113.47，文化=中性，PublicKeyToken=9b75583953471eea”不包含名称为“C1.Web.Wijmo.Controls.Resources.wijmo”的 Web 资源。 extensions.c1inputnumber.js'.] System.Web.UI.WebResourceUtil.VerifyAssemblyContainsReleaseWebResource（Assembly 程序集，字符串 releaseResourceName，程序集 currentAjaxAssembly）+478886 System.Web.UI.ScriptReference.ShouldUseDebugScript（字符串 releaseName，程序集程序集，布尔 isDebuggingEnabled，程序集 currentAjaxAssembly ) +86 System.Web.UI.ScriptReference.DetermineResourceNameAndAssembly(ScriptManager scriptManager, Boolean isDebuggingEnabled, String&resourceName, Assembly&assembly) +99 System.Web.UI.ScriptReference.GetPath(ScriptManager scriptManager, String releasePath,字符串预定调试路径，布尔 isDebuggingEnabled) +164 System.Web.UI.ScriptReference.GetUrlFromPath(ScriptManager scriptManager, 字符串 releasePath, 字符串预定调试路径) +33 System.Web.UI.ScriptReference.GetUrlInternal(ScriptManager scriptManager, Boolean zip) +214 System.Web .UI.ScriptReference.GetUrl(ScriptManager scriptManager, Boolean zip) +213 System.Web.UI.ScriptManager.RegisterUniqueScripts(List`1 uniqueScripts) +203 System.Web.UI.ScriptManager.RegisterScripts() +443 System.Web.UI .ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +122 System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2716ScriptReference.GetUrlFromPath(ScriptManager scriptManager, String releasePath, String reservedDebugPath) +33 System.Web.UI.ScriptReference.GetUrlInternal(ScriptManager scriptManager, Boolean zip) +214 System.Web.UI.ScriptReference.GetUrl(ScriptManager scriptManager, Boolean zip) + 213 System.Web.UI.ScriptManager.RegisterUniqueScripts(List`1 uniqueScripts) +203 System.Web.UI.ScriptManager.RegisterScripts() +443 System.Web.UI.ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +122 System .Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +2716ScriptReference.GetUrlFromPath(ScriptManager scriptManager, String releasePath, String reservedDebugPath) +33 System.Web.UI.ScriptReference.GetUrlInternal(ScriptManager scriptManager, Boolean zip) +214 System.Web.UI.ScriptReference.GetUrl(ScriptManager scriptManager, Boolean zip) + 213 System.Web.UI.ScriptManager.RegisterUniqueScripts(List`1 uniqueScripts) +203 System.Web.UI.ScriptManager.RegisterScripts() +443 System.Web.UI.ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +122 System .Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain(布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint) +2716GetUrlInternal(ScriptManager scriptManager, Boolean zip) +214 System.Web.UI.ScriptReference.GetUrl(ScriptManager scriptManager, Boolean zip) +213 System.Web.UI.ScriptManager.RegisterUniqueScripts(List`1 uniqueScripts) +203 System.Web.UI .ScriptManager.RegisterScripts() +443 System.Web.UI.ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +122 System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain （布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2716GetUrlInternal(ScriptManager scriptManager, Boolean zip) +214 System.Web.UI.ScriptReference.GetUrl(ScriptManager scriptManager, Boolean zip) +213 System.Web.UI.ScriptManager.RegisterUniqueScripts(List`1 uniqueScripts) +203 System.Web.UI .ScriptManager.RegisterScripts() +443 System.Web.UI.ScriptManager.OnPagePreRenderComplete(Object sender, EventArgs e) +122 System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain （布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2716OnPagePreRenderComplete(Object sender, EventArgs e) +122 System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2716OnPagePreRenderComplete(Object sender, EventArgs e) +122 System.Web.UI.Page.OnPreRenderComplete(EventArgs e) +9010682 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2716

# android - 安卓。如何调用搜索

> ID：10620262
> 
> 赞同：0
> 
> 时间：2012-05-16T14:05:24.363
> 
> 标签：android, search

我在 Google Android 网站 - [http://developer.android.com/resources/samples/SearchableDictionary/index.html](http://developer.android.com/resources/samples/SearchableDictionary/index.html)中看到了 Searchable Dictionary v2 教程。在其中实现了一个搜索提供程序，并且可以通过 ACTION_SEARCH 调用搜索。
现在我想创建一个按钮并为其分配一个术语，并使用 clic 调用具有指定术语的搜索，但我无法理解如何执行此操作。
您能否给我一些建议，因为您可以想象我是 android 新手。
我想将按钮放在一个新活动中，并在 SearchableDictionary 活动中使用“showResults（字符串查询）”。我该怎么做？

IE。我有“狗”按钮，当我点击它时，我想得到“狗”字的结果，而不必输入这个词或建议它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:12:04.763

[您可以通过 Activity 类的onSearchRequested()](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)方法调用搜索。祝你好运！

# php - SQL查询结果、比较和where子句

> ID：10620265
> 
> 赞同：0
> 
> 时间：2012-05-16T14:05:28.007
> 
> 标签：php, mysql, sql

我正在建立一个站点，我需要检索一些信息。我有这个查询。

```
$SQL = "SELECT distretto_108, provinca_113, regioni_116, tipologia_pdv_106, 
        richiesta_ccnl_107, coop_va_109, nome_pdv_110, 
        indirizzo_pdv_111, localita_112 
        FROM civicrm_value_informazioni_su_tute_le_schede_p_22 "; 
```

我需要添加其他代码：

```
WHERE civicrm_event.title_en_US='".addslashes($_GET["titles"])."' 
```

但它不起作用......我需要将另一个表的id与当前表的id进行比较......怎么做？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:17:02.680

你应该学习一些关于加入表格的知识......

不知道两张表之间的关系是什么（简单地说：一张表中的哪一列指向另一张表的哪一列），但尝试类似的东西（需要修改以满足您的数据库结构） - 现在假设两个表都有名为 event_id 的相关列：

```
$SQL = "SELECT distretto_108, provinca_113, regioni_116, tipologia_pdv_106, 
        richiesta_ccnl_107, coop_va_109, nome_pdv_110, 
        indirizzo_pdv_111, localita_112 
    FROM civicrm_value_informazioni_su_tute_le_schede_p_22 cvistlsp22
    LEFT JOIN civicrm_event ce ON ce.event_id = cvistlsp22.event_id
    WHERE ce.title_en_US='".mysql_real_escape_string($_GET["titles"])."'"; 
```

`civicrm_value_informazioni_su_tute_le_schede_p_22`表名很长，您将无法在其他 DBMS（例如 ORACLE）中创建具有如此长名称的表，因此请尝试使其更短，同时仍然可以自我描述...

如果您想加入必须有关系的表，请在此处阅读有关关系以及如何使用它们的更多信息：http: [//net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-关系/](http://net.tutsplus.com/tutorials/databases/sql-for-beginners-part-3-database-relationships/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:23:52.143

您正在查询中从表 civicrm_value_informazioni_su_tute_le_schede_p_22 中检索数据，而您添加的 where 子句引用表 civicrm_event。您需要在 from 子句中添加这个新表，并使用一些公共键在两个表之间进行连接。下面的例子：

```
$SQL = "
SELECT distretto_108, provinca_113, regioni_116, tipologia_pdv_106, richiesta_ccnl_107, coop_va_109, nome_pdv_110, indirizzo_pdv_111, localita_112 
FROM civicrm_value_informazioni_su_tute_le_schede_p_22 
  JOIN civicrm_event ON civicrm_value_informazioni_su_tute_le_schede_p_22.ID_PK = civicrm_event.ID_FK
WHERE civicrm_event.title_en_US='".addslashes($_GET["titles"])
"; 
```

您需要将 ID_PK 和 ID_FK 替换为将表绑定在一起的相关主键和外键。

请注意，不建议使用这样的查询参数。请在此处阅读[PHP 文档](http://php.net/manual/en/function.mysql-real-escape-string.php)以获取更多说明。

# php - 提要和评论中未显示评论和喜欢的数量

> ID：10620267
> 
> 赞同：1
> 
> 时间：2012-05-16T14:05:33.930
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

很好，当您使用 PageID 并同时希望计算所有评论和点赞数时，url 的外观如何 我努力尝试

```
$feed_profile = $facebook->api('/'.$row[0].'/feed&access_token=$access_token&limit=500',"get");
$post_profile = $facebook->api('/'.$row[0].'/comments?access_token=$access_token&limit=500',"get"); 
```

也尝试过评论和而不是评论？

我不知道如何取回评论并且喜欢我必须做什么我的 var $row[0] 存储来自 fb 的各种页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:16:53.657

提要有连接 EG：评论，提供计数的喜欢。

* * *

```
 $feed_profile = $facebook->api('/'.$row[0].'/feed&access_token=$access_token&limit=5',"get");
// get comment/like count for first post in array.  this can be done with a loop.
    echo 'Comments: '.$feed_profile[data][0][comments][count].'<br />';
    echo 'Likes:    '.$feed_profile[data][0][likes][count].''; 
```

* * *

> **注意：**您必须考虑错误处理，当没有评论或喜欢时，连接数组不存在

# objective-c - ScrollView 在 iPad 模拟器中不起作用？

> ID：10620268
> 
> 赞同：0
> 
> 时间：2012-05-16T14:05:38.450
> 
> 标签：objective-c, ios, xcode

首先，如何在 iPad 模拟器中测试滚动？我有一个触摸板，我试过拖动两根手指，我试过点击并拖动两根手指，但我无法让它滚动。我正确地做那部分吗？

假设我正在正确测试，为什么我的滚动视图不会滚动？我的故事板中有一个基本的视图控制器，我将一个滚动视图拖入其中。我在我的代码中做了一个出口，然后在我的代码中我生成了一堆按钮并将它们添加到这个滚动视图中。它们得到正确显示。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:07:59.837

设置滚动视图内容大小，例如

```
[MyScrollView setContentSize:CGSizeMake(320, 500)]; 
```

以 iPhone 为例。

您也可以通过在 mac 中按 cmd 旁边的 alt 键来制作两个手指 HOLD PRESS alt + 鼠标在模拟器上移动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:08:28.653

设置滚动视图的内容大小，以启用滚动。

详细解释

[https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:11:03.473

您必须定义 scrollView 的 contentSize，它通常在框架中大于父视图或其框架以使其可滚动。

```
[viw setContentSize:CGRectMake(width,height)]; 
```

将其设置在 viewDidLoad 或您分配 srollview 的位置。

# tinymce - TinyMCE 发行一个特定的域

> ID：10620270
> 
> 赞同：1
> 
> 时间：2012-05-16T14:05:41.880
> 
> 标签：tinymce

我已经使用 TinyMCE 构建了一个 CMS，并且我已经在已经使用 GoDaddy 托管的 3 个不同的网站域中使用了这个 CMS。出于某种原因，TinyMCE 没有在我正在使用的这个新域上工作（并且仍在使用 GoDaddy 来托管这个域）。我所做的就是复制当前的 CMS 文件并将它们粘贴到网站域中，这在前 3 个网站上都有效，但第四个网站就坏了。我尝试重新上传文件和所有内容。最后，我尝试从我的其他站点之一引用 tiny_mce.js，这使得 TinyMCE 最终出现。当所有文件完全相同时，tinyMCE 处理前 3 个而不是最新的一个的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-20T21:49:26.800

我发现它与不存在的文档类型有关，但在某些域上这不是问题。好的做法。

# javascript - 使用 jquery 启用和禁用点击

> ID：10620271
> 
> 赞同：0
> 
> 时间：2012-05-16T14:05:48.967
> 
> 标签：javascript, jquery

我有四个具有可点击属性的按钮。单击按钮将使 div 向下滑动，再次单击同一个 div 应关闭 div。我想添加一个条件，例如，当我打开一个 div 时，应该禁用其余三个按钮的 click 属性，我所做的是

```
for (var i = 1; i <= 4; i++) {
    $(".slide" + i).click(function () {
        var openTab = $(this).attr('class');
        openTab = openTab.replace('slide', '');
        var facetGroup = $(this).attr("key");
        if ($('#panel').is(':visible')) {
            buttonCloser(openTab);
        } else {
            buttonOpener(openTab, facetGroup);
        }
    });
}

function buttonCloser(m) {
    for (var j = 1; j <= 4; j++) {
        if (j != m) {
            //alert(j);
            $(".slide" + j).bind("click");
        } else {
            $(".slide" + j).css({
                "background-color": " #fff5c3",
                "color": "#000000"
            });
        }
    }
    $("#panel").slideUp("slow");
}

function buttonOpener(m, n) {
    for (j = 1; j <= 4; j++) {
        if (j != m) {
            $(".slide" + j).unbind("click");
        } else {
            $(".slide" + j).css({
                "background-color": "#293345",
                "color": "#fff5c3"
            });
        }
    }
    $("#panel").slideDown("slow");
    refreshFacet(n);
} 
```

这段代码的问题是，当我第一次通过单击滑块打开一个 div 时，其他三个单击事件被禁用，bt 当我关闭该 div 时，它不会重新启用它的 click 属性。所以它不会打开任何东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:30:32.010

在没有看到您的实际标记的情况下，我建议您使用简单的 jQuery，而不是在“普通”JavaScript 和 jQuery 之间混合和匹配：

```
var buttons = $('button[class^="slide"]'),
    panel = $('#panel');

$(buttons).click(
    function() {
        var that = $(this);
        if (panel.is(':visible')) {
            if (that.hasClass('opener')) {
                panel.slideToggle();
                that.removeClass('opener');
            }
            else {
                return false;
            }
        }
        else {
            panel.slideToggle();
            that.addClass('opener');
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QPtRP/)。

* * *

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [属性以选择器选择`attribute^="value"`器](http://api.jquery.com/attribute-begins-with-selector/)开头。
*   [`hasClass()`](http://api.jquery.com/hasClass/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`slideToggle()`](http://api.jquery.com/slideToggle/).

# php - 在mysql中按时间分组

> ID：10620272
> 
> 赞同：1
> 
> 时间：2012-05-16T14:05:49.550
> 
> 标签：php, mysql

我有这个查询：

```
 SELECT *  FROM `mfw_navnode` n1
    WHERE  (n1.node_name='Eby' OR n1.node_name='Lana'  OR n1.node_name='MF' OR n1.node_name='Amur' OR n1.node_name='Asin' )
    GROUP BY n1.node_name 
```

它有另一个字段，称为 time_added ..基本上是每一行的时间..我想订购 node_name （选择它们），到我添加它们的最近时间。

我该怎么做？每个 node_name 都有一个时间.. 但我想按每个 node_name 的最新添加时间对其进行分组..

我想使用 MAX(time_added) 然后将它添加到 group by..但这给了我一个错误..

什么是可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:11:31.623

如果我理解这个问题，以下可能是您正在寻找的。我不太清楚您是否希望它们首先或最后订购最新时间（`DESC`根据需要添加）：

```
SELECT `node_name`,  max(`time`) `maxtime` FROM `mfw_navnode` n1 ...
        GROUP BY node_name order by `maxtime`; 
```

需要注意的一点是，OP 中的查询（包括不在 GROUP BY 子句中的字段）是不明确的，并且在大多数 SQL 实现中是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:09:10.830

```
SELECT *  FROM `mfw_navnode` n1
WHERE  (n1.node_name='Eby' OR n1.node_name='Lana'  OR n1.node_name='MF' OR n1.node_name='Amur' OR n1.node_name='Asin' )
GROUP BY n1.node_name
ORDER BY n1.time_added DESC 
```

按 DESC 排序会自动首先显示最近创建的。

# r - Sweave 用户如何与 Word 用户协作？

> ID：10620280
> 
> 赞同：19
> 
> 时间：2012-05-16T14:06:07.590
> 
> 标签：r, ms-word, sweave

我想向SO 社区提出[这里](http://tolstoy.newcastle.edu.au/R/e17/help/12/04/9772.html)讨论的问题：Sweave 用户与 Word 用户协作的最佳方式是什么？

我正在尝试将我的整个工作流程转移到 R 和 Sweave（或类似的，例如，也许 Knitr 会被证明更有用）。然而，我工作流程的最后一步通常是与合作者一起撰写手稿。它们通过来回传递 MS Word 文档以及使用 Track Changes 编辑文本来工作。

让我们规定，我不能说服他们中的任何人学习任何新软件——他们的过程不会改变。我正在寻找一种简单的方法来：

1.) 将 Sweave 创建的文档发送给共同作者

2.) 允许他们在 Word 中打开文档并进行跟踪更改

3.) 接收编辑后的文档并将它们重新合并到 Sweave 中，理想情况下以某种方式突出显示共同作者的更改

4.) 如果该解决方案适用于 OSX，那就太好了。

[R 帮助邮件列表](http://tolstoy.newcastle.edu.au/R/e17/help/12/04/9772.html)上的讨论集中在[SWord](http://rcom.univie.ac.at/)上，它似乎没有文档记录并且仅适用于 Windows。有谁知道好不好？[Vanderbilt 的 biostatistics wiki 上](http://biostat.mc.vanderbilt.edu/wiki/Main/SweaveConvert)的讨论很好地讨论了如何将 Sweave 文档转换为 Word 可读形式，但没有太多关于如何将编辑过的 Word 文档与 Sweave 集成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T14:32:21.887

我使用多种方法，具体取决于编辑人员。我的默认设置是让编辑/合作者标记 PDF 或硬拷贝。 [Foxit Reader](http://www.foxitsoftware.com/Secure_PDF_Reader/)是免费的，并提供比 Acrobat 阅读器更广泛的 PDF 评论工具，尽管阅读器允许评论气泡。

对于更广泛的贡献，它有助于我将文档的 Sweave 部分与正文分开，例如通过将结果写入 results.Rnw 并插入`\input{results.tex}`到主文档中。这允许您发送不包含 R 标记的部分。您还可以将序言和参考书目之间的所有内容复制粘贴到 Word 文档中，并要求用户忽略标记。如果您从具有语法突出显示的编辑器中复制粘贴，则可以将其复制到 word 中，从而使过程更容易。

您也可以考虑使用[Inference for R](http://inferenceforr.com/default.aspx)，就像 Sweave for Word。还有[Lyx](http://wiki.lyx.org/LyX/LyxWithRThroughSweave)，它需要用户学习一个新程序，但它比 Sweave 更易于使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T14:09:02.193

我一直认为这是 odfWeave 的一个很好的用例......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T09:15:21.197

我已经研究这个问题几个星期了，这就是我到目前为止的想法。不幸的是，我的新手声誉不允许发布所有正确的链接，但谷歌搜索应该对所有涉及的包都很明显。

LaTeX 和 Word 之间的转换很麻烦，因此我认为使用允许导出到 LaTeX 和 Word 的第三种格式是可行的。有几种选择。首先，你有 Markdown，一种我用来写这篇文章的标记语言 :)。Markdown 本身并不真正适合学术写作，但在开发中有一个[扩展](http://mandown.rubyforge.org/)，允许引用、脚注和技术写作的其他功能。

其次，也许更有希望的是来自 Docutils 的 reStructuredText 标记，它已经可以处理引用。我的想法是使用 reST 以纯文本形式编写我的文章，使用 knitr 将它们编织（或编织）成 HTML 或 PDF，这在 R 中本机支持。R 代码当然可以嵌入，这就是重点。

要将文本转换为 .doc 可以使用[Pandoc](http://johnmacfarlane.net/pandoc/)，它还可以处理引用，并且能够在多种文档格式之间进行转换，包括 PDF、Word、OpenDocument 等。

我仍然必须弄清楚整个工作流程。在没有引用的情况下转换格式对我来说似乎很简单（即使之后需要在 Word 中进行一些小的编辑）。使用引文仍然需要弄清楚。希望这些信息可以帮助那些走在可重复研究的同一条道路上的人，但也可以帮助那些需要与非极客人群分享文本的人。

# objective-c - OpenGL ES 在移动背景上崩溃，iOS 5.1

> ID：10620287
> 
> 赞同：12
> 
> 时间：2012-05-16T14:06:33.693
> 
> 标签：objective-c, ios, opengl-es

我对我的应用程序 iOS 有一个小问题。当我使用 iOS 模拟器 5.1 ipad/iphone 时，应用程序正在运行，但是当我使用真正的 iOS 设备时（iPad 和 iPhone 5.1 也是）

单击主页按钮后在后台移动时应用程序崩溃...出现此错误：

```
libGPUSupportMercury.dylib`gpus_ReturnNotPermittedKillClient:
0x33240094:  trap   
0x33240096:  nop 
```

我发现是 OpenGL ES 仍在计算并使应用程序崩溃并找到了这个函数：glFinish();

但这仍然不能在这里工作我的代码示例：

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    [[CCDirector sharedDirector] resume];
}

- (void)applicationWillResignActive:(UIApplication *)application {
    glFinish();
    [[CCDirector sharedDirector] pause];
} 
```

我认为问题就在这里 有人知道我的问题吗？谢谢

编辑：

问题解决了：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
[[CCDirector sharedDirector] stopAnimation];
}
- (void)applicationWillEnterForeground:(UIApplication *)application
{
[[CCDirector sharedDirector] startAnimation];
} 
```

也许这可以帮助某人x）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T15:43:16.053

在 iOS 5.1 中，强制要求您在被要求退出活动后无法调用 OpenGL。

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

是停止一切的地方，无论是 CADisplayLink 还是 [[CCDirector sharedDirector] stopAnimation]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T23:57:02.650

从技术上讲，您可以从中进行 OpenGL 调用的最后一种方法是：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

虽然在 applicationWillResignActive 之后暂停绘图通常是个好主意，但这只是一个建议，有些应用程序有超出此范围的要求。实际*强制执行*的是，一旦您的应用程序移至后台，您将无法进行任何 OpenGL 调用。

从[文档](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/ImplementingaMultitasking-awareOpenGLESApplication/ImplementingaMultitasking-awareOpenGLESApplication.html)：

> 一旦你的应用程序退出它的 applicationDidEnterBackground: 方法，它就不能进行任何新的 OpenGL ES 调用。如果您的应用程序进行 OpenGL ES 调用，它会被 iOS 终止。

此外，请记住将 glFinish() 作为您的最终 GL 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T11:26:38.963

检查屏幕上是否有 FPS 节点，它可能正在渲染..

*编辑 - 并检查音频播放

# java - Jackson Json 解析 .json 以映射错误

> ID：10620292
> 
> 赞同：0
> 
> 时间：2012-05-16T14:06:46.417
> 
> 标签：java, json, jackson

我有一个**制作精良**的json 输入文件。

我有这些对象：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class A {
  private B b;
  //getter and setter of b
  ...
}

@JsonIgnoreProperties(ignoreUnknown = true)
public class B {
  private List<C> cList = new ArrayList<C>();
  //getter and setter of cList
  ...
}

@JsonIgnoreProperties(ignoreUnknown = true)
public class C {
  private Map<D,Integer> dMap = new HashMap<D,Integer>();
  //getter and setter of dMap
  ...
}

@JsonIgnoreProperties(ignoreUnknown = true)
public class D {
   private String name;
   //getter and setter of name
   ...
} 
```

之后我有一个主要课程

```
....
A a = null;
try {
    String path = "/home/tommaso/file-in.json";
    ObjectMapper mapper = new ObjectMapper();
    a = mapper.readValue(new File(path), A.class);
} catch (JsonGenerationException ex) {
    Logger.getLogger(CroweSolver.class.getName()).log(Level.SEVERE, null, ex);
} catch (JsonMappingException ex) {
    Logger.getLogger(CroweSolver.class.getName()).log(Level.SEVERE, null, ex);
} catch (IOException ex) {
    Logger.getLogger(CroweSolver.class.getName()).log(Level.SEVERE, null, ex);
}
.... 
```

当我启动代码时，我有这个异常：

```
org.codehaus.jackson.map.JsonMappingException：找不到类型[简单类型，类com.tommaso.sample.D]的（映射）键反序列化器
    在 org.codehaus.jackson.map.deser.StdDeserializerProvider._handleUnknownKeyDeserializer(StdDeserializerProvider.java:430)
    在 org.codehaus.jackson.map.deser.StdDeserializerProvider.findKeyDeserializer(StdDeserializerProvider.java:199)
    在 org.codehaus.jackson.map.deser.BasicDeserializerFactory.createMapDeserializer(BasicDeserializerFactory.java:374)
    在 org.codehaus.jackson.map.deser.StdDeserializerProvider._createDeserializer(StdDeserializerProvider.java:380)
...........

```

我应该怎么做才能解决它？

# android - 如何将电话号码传递给mms

> ID：10620295
> 
> 赞同：0
> 
> 时间：2012-05-16T14:06:52.117
> 
> 标签：android, sms, mms

我有以下代码，它调用 mms 客户端并附加一张图片

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND); 
    sendIntent.putExtra("sms_body", "some text"); 
    sendIntent.putExtra("address", phoneNumber);
    sendIntent.putExtra(Intent.EXTRA_STREAM, mCurrItemUri);
    sendIntent.setType("image/*");
    getContext().startActivity(
            Intent.createChooser(sendIntent, "Send MMS...")); 
```

我面临的问题是我无法将电话号码传递给该意图。有没有办法将一组电话号码传递给它？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:35:03.613

我认为您需要为 mms 设置正确的类型。例如：

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
sendIntent.setType("vnd.android-dir/mms-sms");
...
... 
```

有关更多信息，请阅读[此](http://mobiforge.com/developing/story/sms-messaging-android)。

# c++ - std::async 可以与模板函数一起使用吗

> ID：10620300
> 
> 赞同：12
> 
> 时间：2012-05-16T14:07:21.063
> 
> 标签：c++, templates, asynchronous, c++11, std

是否[`std::async`](http://en.cppreference.com/w/cpp/thread/async)可以使用模板功能？我尝试将[`std::reverse`](http://en.cppreference.com/w/cpp/algorithm/reverse)其作为异步任务启动，但出现编译时错误。

我尝试使用更简单的函数（foo 和 bar），发现只有非模板函数在工作。

```
#include <algorithm>
#include <future>
#include <string>

void foo(std::string::iterator first, std::string::iterator last)
{
}

template<class BidirectionalIterator>
void bar(BidirectionalIterator first, BidirectionalIterator last)
{
}

int main()
{
    std::string str = "Lorem ipsum, dolor sit amet";

    auto result_reverse = std::async(std::reverse, str.begin(), str.end()); // Compile-time error
    auto result_foo     = std::async(foo, str.begin(), str.end());
    auto result_bar     = std::async(bar, str.begin(), str.end()); // Compile-time error

    result_reverse.get();
    result_foo.get();
    result_bar.get();
} 
```

编译器错误如下：

```
main.cpp: In function ‘int main()’:
main.cpp:18:71: erreur: no matching function for call to ‘async(<unresolved overloaded function type>, std::basic_string<char>::iterator, std::basic_string<char>::iterator)’
main.cpp:18:71: note: candidates are:
/usr/include/c++/4.6/future:1355:5: note: template<class _Fn, class ... _Args> std::future<typename std::result_of<_Functor(_ArgTypes ...)>::type> std::async(std::launch, _Fn&&, _Args&& ...)
/usr/include/c++/4.6/future:1378:5: note: template<class _Fn, class ... _Args> typename std::__async_sfinae_helper<typename std::decay<_Functor>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...)
main.cpp:18:71: erreur: unable to deduce ‘auto’ from ‘&lt;expression error>’
main.cpp:20:62: erreur: no matching function for call to ‘async(<unresolved overloaded function type>, std::basic_string<char>::iterator, std::basic_string<char>::iterator)’
main.cpp:20:62: note: candidates are:
/usr/include/c++/4.6/future:1355:5: note: template<class _Fn, class ... _Args> std::future<typename std::result_of<_Functor(_ArgTypes ...)>::type> std::async(std::launch, _Fn&&, _Args&& ...)
/usr/include/c++/4.6/future:1378:5: note: template<class _Fn, class ... _Args> typename std::__async_sfinae_helper<typename std::decay<_Functor>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...)
main.cpp:20:62: erreur: unable to deduce ‘auto’ from ‘&lt;expression error>’ 
```

但是，当我手动指定模板实例时它通过了，例如`std::async(std::reverse<std::string::iterator>, str.begin(), str.end())`.

这是编译器错误（GCC 4.6.3）还是定义明确的行为？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-16T14:40:23.520

它可以，但调用有点不同：

```
auto result_reverse = std::async([&str]() {
        std::reverse(str.begin(), str.end());
    }); 
```

这是因为`std::reverse()`不是函数，而是当作为函数调用时变成函数的函数模板。

以上反转字符串的副本并丢弃结果。要通过引用传递字符串，应将 lambda 表达式更改为以`[&str]()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T16:43:14.547

`std::reverse`不是函数而是函数模板，您可以使用该模板的特化（这是一个函数）：

```
auto result_reverse = std::async(&std::reverse<std::string::iterator>, str.begin(), str.end()); 
```

# vb.net - 通过 SSL 配置 WCF

> ID：10620302
> 
> 赞同：0
> 
> 时间：2012-05-16T14:07:24.830
> 
> 标签：vb.net, wcf

我正在通过 HTTP 成功使用以下代码，但我想使用 SSL。当我将端点地址更改为 https 并在 web.config 中将安全模式修改为传输时，我收到错误消息：“提供的 URI 方案 'https' 无效；预期为 'http'。”

这是一个 VB.net 测试表格。

```
Imports WindowsApplication1.WCFService
Imports System.ServiceModel

Public Class Form1
Private WCFConnection As Service1Client 'Class reference from the ServiceReference

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    If WCFConnection Is Nothing Then

        WCFConnection = New Service1Client(New System.ServiceModel.BasicHttpBinding(), New EndpointAddress("https://www.mysite.com/Service1.svc?wsdl"))
    End If

    Dim NParray As String = WCFConnection.GetNP("8")
    TextBox1.Text = NParray

End Sub
End Class 
```

然后这里是 web.config

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>

          <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="Transport">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>

        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://www.mysite.com/Service1.svc" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_IService1" contract="WCFService.IService1"
            name="BasicHttpBinding_IService1" />
    </client>
</system.serviceModel>

<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:16:03.737

我已经想通了。

这是我正在使用的 web.config

```
<?xml version="1.0"?>
<configuration>

<system.serviceModel>

  <behaviors>
    <serviceBehaviors>
      <behavior name="ServBehave">
        <serviceMetadata httpsGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="false"/>
      </behavior>
    </serviceBehaviors>
  </behaviors>
  <services>
    <service behaviorConfiguration="ServBehave" name="FILE_WCF.Srv">
      <endpoint address="" binding="customBinding" bindingConfiguration="custBind"
        contract="FILE_WCF.ISrv" />
    </service>
  </services>
  <bindings>

    <customBinding>
      <binding name="custBind">
        <binaryMessageEncoding></binaryMessageEncoding>
        <httpsTransport></httpsTransport>
      </binding>
    </customBinding>
  </bindings>

  <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>

<system.webServer>
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>

</configuration> 
```

这是 SVC 文件

```
<%@ ServiceHost Language="VB" Debug="true" Service="FILE_WCF.Srv" CodeBehind="FILE.svc.vb" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:16:49.773

代替

```
security mode="None" 
```

利用

```
security mode="None" 
```

# php - php页面访问。链接页面

> ID：10620304
> 
> 赞同：0
> 
> 时间：2012-05-16T14:07:31.717
> 
> 标签：php, redirect, hosting, webpage

我的网站包含一个脚本，因此安装成功，管理员和内容运行良好。但主页面到其他页面，如视频、最新消息和主菜单中的其他页面。是riderect 链接www.hostname.com/videos 而不是videos.php。

由于主菜单链接类型，实际页面是videos.php，网址将转到www.hostname.com/videos

所以视频页面不显示，页面未找到错误发生。他们是否有任何快捷方式或编辑 htaccess 文件来解决这个问题，当它出现 www.hostname.com/videos 时，该链接应该是正确的页面链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:21:36.910

Assuming you are running PHP on Apache, try this:

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    #RewriteRule /video http://www.hostname.com/video.php
</IfModule> 
```

**DISCLAIMER**

Untested and I am a n00b at rewriting urls.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:34:19.183

我猜你不能更新标题链接，因为你在这里问过......

好吧，比 mod_rewrite 更简单、更轻松的技巧，使用标准 Apache 配置：重命名`videos.php`为`videos/index.php`

也就是说，如果您的脚本允许并且几乎没有重构。

否则，正如@martincarlin87 所说，RewriteRule 是（重）路要走。

# javascript - 寻找一种使用 jquery 构建滚动条的简单方法

> ID：10620307
> 
> 赞同：0
> 
> 时间：2012-05-16T14:07:39.830
> 
> 标签：javascript, jquery, scrollbar

我正在寻找一种基本而简单的方法来使用 jquery 构建滚动条，但我似乎找不到任何好的教程，而且我不想使用插件。我看过一些插件，但我的 JS 技能很难理解这些插件。

所以我正在寻找一个简单、基本和轻量级的滚动条，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:17:59.130

你的意思是这样的？

但这只是一个使用 jQuery UI 库的非插件概念：

[演示](http://jsfiddle.net/2TN9g/)

```
var parH = $('.parent').outerHeight(true);
var areaH = $('.scrollable').outerHeight(true);
var scrH = parH / (areaH/parH);

function dragging(){     
    var scrPos = $('.scrollbar').position().top;   
    $('.scrollable').css({top: -(scrPos*(areaH/parH)-1)});
}

$('.scrollbar').height(scrH);
$('.scrollbar').draggable({
    axis: 'y',
    containment: 'parent',    
    drag: function() {
         dragging();
    }   
}); 
```

HTML 例如：

```
<div class="parent">    
    <div class="scrollbar"></div>    
    <div class="scrollable">
        text...
    </div>
</div> 
```

CSS 例如：

```
.parent{
    position:relative;
    height:200px;
    width:180px;
    background:#eee;
    overflow:hidden;
    padding-right:17px;
}
.scrollable{
    position:absolute;
    top:0px;        
    width:180px;
    background:#cf5;
}
.scrollbar{
    cursor:n-resize;
    position:absolute;
    top:0px;
    right:0px;
    z-index:2;
    background:#444;
    width:17px;
    border-radius:8px;
} 
```

你可以玩把它变成一个插件并改进代码。
我认为这是一个好的开始。

# spring-security - Spring Security 3 + 随机盐

> ID：10620314
> 
> 赞同：2
> 
> 时间：2012-05-16T14:07:53.480
> 
> 标签：spring-security, salt, password-encryption

所以我知道您可以根据 userDetail 属性在 Spring Security 中使用 salt 检查密码，然后对其进行哈希处理以与数据库中的哈希进行比较，但是如果创建每个用户时使用的 salt 是随机的（并且存储在DB），我是否需要创建自己的包含 salt 属性的 userDetails 类，然后将其设置为 spring security 用于在 securityApplicationContext 中加盐的字段？

如果是这样，我将如何编写自己的 userDetails 类来实现这一点？抱歉，对 Spring/Java 还是很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:10:33.153

> 好的，但是我如何告诉 securityApplicationContext 使用 myCustomUserDetails 类而不是默认的 userDetails 类来存储用户？

像这样：

```
<b:bean id="customUserDetailsService" class="com.your.company.security.MyUserDetailsService"/>

<s:authentication-provider user-service-ref="customUserDetailsService" /> 
```

这在您的安全上下文中。

这也可能有帮助。

[编写自定义`UserDetailsService`](http://www.codercorp.com/blog/spring/security-spring/writing-custom-userdetailsservice-for-spring-security.html)。

# java - GAE/GWT 服务器端数据不一致/实例之间不持久

> ID：10620315
> 
> 赞同：0
> 
> 时间：2012-05-16T14:07:57.283
> 
> 标签：java, google-app-engine, gwt, persistence

我正在使用 GWT/Java 在 GAE 上编写游戏应用程序，并且遇到了服务器端持久数据的问题。玩家使用 RPC 轮询活动游戏和游戏状态，所有这些都存储在服务器上。有时客户端轮询无法找到我知道应该存在的游戏实例。这只发生在我部署到 google apppot 时，本地一切都很好。

我知道这可能与 apppot 是一项云服务有关，它可以在任何时候生成和使用我的 servlet 的新实例，并且现有数据不会在实例之间持久存在。

单个游戏只持续一两分钟，并且数据会迅速变化（每秒多次），那么确保对不同实例的 RPC 调用将使用相同的服务器端数据的最佳方法是什么？

我已经查看了 DataStore API，它似乎是像存储一样的数据库，我猜这对于我需要的东西来说太慢了。Memcache 也可以在任何时候刷新，所以没用。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:31:32.310

这里有两个问题：请求之间的持久数据和来自客户端的轮询数据。

1.  当您有一个分布式 servlet 环境（例如 GAE）时，您不能向一个实例发出请求，将数据保存到内存并期望数据在其他实例上可用。这适用于 GAE 和任何其他有多个服务器的 servlet 环境。

    因此，您需要将数据保存到一些共享存储中：Datastore 成本高、持久、可靠且速度慢。Memcache 快速、免费，但不可靠。通常我们使用两者的组合。一些库甚至透明地结合了两者：[NDB](https://developers.google.com/appengine/docs/python/ndb/cache)，[objectify](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Caching)。

    在 GAE 上，还有第三种选择来拥有半持久化的共享数据：[后端](https://developers.google.com/appengine/docs/java/backends/overview)。这些是永远在线的实例，您可以在其中控制启动/关闭。

2.  数据轮询：如果有多个客户端在等待更新，最好不要使用轮询。轮询会发出很多不必要的请求（服务器上的数据没有改变），并且仍然会有最小的延迟（因为您每隔一段时间就会进行轮询）。[您可以通过Channel API](https://developers.google.com/appengine/docs/java/channel/)使用推送而不是轮询。甚至还有 GWT 库：[gwt-gae-channel](http://code.google.com/p/gwt-gae-channel/)，[gwt-channel-api](https://github.com/eirikb/gwt-channel-api)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:43:14.763

简短的回答：您没有将游戏设计为在 App Engine 上运行。

您听起来好像已经回答了自己的问题。您了解数据不会跨实例持久化。在服务器端持久化数据的两种机制是 memcache 和数据存储，但您也了解它们的局限性。你需要围绕这个来构建你的游戏。

如果您没有使用 memcache 或数据存储，您是如何持久化数据的（我最好的猜测是您实际上并没有持久化它）。从模糊的细节来看，您尚未将游戏架构成能够跨多个实例运行，这对于在 App Engine 上运行的任何应用程序来说都是必不可少的。这是一个基本的设计原则，你不知道任何 HTTP 请求会命中哪个实例。您必须重新架构才能使用数据存储区 + 内存缓存。

如果你想使用单个服务器，你可以使用后端，它的行为就像单个服务器一样（如果你将它限制在一个实例中）。坦率地说，由于成本的原因，如果你走这条路，你最好选择亚马逊或 Rackspace。您还必须自己处理扩展问题 - 即，如果游戏在特定服务器实例上运行，您需要构建一种方式，以使玩游戏始终命中该实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T00:29:21.670

请记住，您可以在没有 GAE 的情况下部署 GWT 应用程序，请参阅以下说明：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRPCDeployment](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRPCDeployment)

您可能想问自己：您的应用程序是否需要多个服务器实例或 GAE 特定功能？

如果是这样，那么我同意 Peter Knego 关于 memcache 等的回复。

如果没有，那么您可以通过选择不同的托管选项（GAE 除外）来解决您的问题。特别是让您只使用一个实例的方法。然后，您确实可以简单地管理服务器内存中的所有游戏数据，就像我了解您到目前为止所做的那样。

如果此解决方案适合您的目的，那么您需要做的就是找到合适的托管服务提供商。这很可能是一种基于云的 PaaS 产品，前提是它们允许您对服务器实例的数量进行*硬性*限制（与 GAE 不同），并且它可以低至一个。例如，据我了解，Heroku *（当前）*允许您这样做，并且显然它适用于 GWT 应用程序，根据此线程：

[https://stackoverflow.com/a/8583493/2237986](https://stackoverflow.com/a/8583493/2237986)

请注意，上述解决方案涉及一些摆弄，我不知道您的需求足以提出强烈建议。对于您正在尝试做的事情，可能会有更简单和更好的解决方案。特别是，请查看针对高度时间关键的实时多人游戏进行优化的非基于云的托管选项和服务器架构。

希望这可以帮助！让我们随时了解您的进展。

# javascript - window.location.href 不起作用

> ID：10620320
> 
> 赞同：2
> 
> 时间：2012-05-16T14:08:01.717
> 
> 标签：javascript

我有下面的 java 脚本函数，我想在其中将页面重定向到另一个页面。我验证了警报功能显示了“得到”消息。因此，该函数被正确调用。但是，带有 window.location.href 的页面重定向不起作用。此外，打印选项内容的警报功能，vDaeId，dgpId没有执行（我没有在浏览器中看到弹出窗口）。你能告诉我这段代码有什么问题吗？谢谢。我正在使用 Firefox 顺便说一句。

```
 function goToPMDisplayer(){
            alert('Got '); 
            var option=document.getElementById("D1").value;
            var vDaeId=document.getElementById("D2").value;
            var dgpId=document.getElementById("dgpids").value;
            var str= option + " "+ vDaeId + " "+ dgpId
            alert(str); 
            window.location.href="display.jsp?option="+option + "&vdaeid=" + vDaeId + "&dgpid=" + dgpId

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:11:19.537

您说第一个警报有效，而第二个无效，这意味着其中一行有 javascript 错误：

```
var option=document.getElementById("D1").value;
var vDaeId=document.getElementById("D2").value;
var dgpId=document.getElementById("dgpids").value; 
```

最可能的罪魁祸首是这些元素之一不存在，并且尝试访问`.value`of`null`将引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:10:49.413

> 此外，打印选项内容的警报功能，vDaeId，dgpId没有执行（我没有在浏览器中看到弹出窗口）。

这告诉我们代码因抛出异常而失败。我的猜测是，您至少没有一个您所依赖的元素（`D1`、、`D2`或`dgpids`）。所以`document.getElementById`返回`null`，当你尝试访问`.value`它时，你会得到一个异常。

请注意，您使用的字符串`getElementById`必须是**`id`**值，而不是`name`s。所以你必须`id="D1"`在一个元素上，`id="D2"`在另一个元素上，在另一个元素`id="dgpids"`上。另请注意，`id`值可以区分大小写，并且它们在页面上**必须**是唯一的。（如果您弄乱了最后一条规则，大多数浏览器都会按文档顺序为您提供第一个，但是...）

我假设您在`goToPMDisplayer`页面完全加载之前不会调用它，但是如果您在页面加载期间调用它，请确保在元素存在之后才调用它（例如，将调用放在文档比元素）。

* * *

对于这样的问题，`alert`-style 调试在几年前就消失了。在 2012 年，我们使用适当的调试器。如今，所有主流浏览器都内置了一个，甚至 IE。您可以设置断点、遍历代码、检查 DOM 的当前状态……总之，无需在黑暗中摸索；您可以了解正在发生的事情。

* * *

在对该问题的评论中，您说过

> 我验证了所有元素都存在。

恕我直言，我只是不明白这是怎么回事。我怀疑这些`id`值略有不同，或者它们根本没有`id`值，而是它们有`name`值。

这是一个完整的工作示例：[Live copy](http://jsbin.com/ujeguy) | [来源](http://jsbin.com/ujeguy/edit#html)

```
<!DOCTYPE html>
<html>
<head>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Test Page</title>
<style>
  body {
    font-family: sans-serif;
  }
</style>
</head>
<body>
  <input id="D1" value="valueOfD1">
  <input id="D2" value="valueOfD2">
  <input id="dgpids" value="valueOfdgpids">
  <br><input id="theButton" type="button" value="Click Me">
  <script>
  function goToPMDisplayer(){
      alert('Got '); 
      var option=document.getElementById("D1").value;
      var vDaeId=document.getElementById("D2").value;
      var dgpId=document.getElementById("dgpids").value;
      var str= option + " "+ vDaeId + " "+ dgpId
      alert(str); 
      var loc = "display.jsp?option="+option + "&vdaeid=" + vDaeId + "&dgpid=" + dgpId
      alert("loc = " + loc);

  }
  document.getElementById("theButton").onclick = goToPMDisplayer;
  </script>
</body>
</html> 
```

# iphone - 由于太多未处理的消息而丢弃事件 0 的消息

> ID：10620321
> 
> 赞同：1
> 
> 时间：2012-05-16T14:08:09.310
> 
> 标签：iphone, objective-c, ios

我在我的项目中添加了两个文本文件，我将它们连接到其相关属性项目工作正常，一旦我连接第二个并运行然后开始编辑第二个文本字段，应用程序停止响应，一段时间后它给了我以下日志中的错误

```
Discarding message for event 0 because of too many unprocessed messages 
```

我试图删除它并再次连接它很多次它有同样的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:58:31.677

只是我的 2 美元。这与你提到的代表无关。我在使用 MapKit 时遇到了这个问题，无法弄清楚是什么问题，但重新启动我的 iPhone 解决了它！！！

[编辑] 知道发生这种情况的原因。如果位置管理器在主线程上下文之外运行，那么这种情况会间歇性地发生。我正在使用带有 NSTimer 的位置管理器。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-05-17T06:27:34.210

当我使用以下文本字段委托时问题解决了

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField{
    return NO;
} 
```

# c# - 使用多线程时如何添加到列表？

> ID：10620325
> 
> 赞同：8
> 
> 时间：2012-05-16T14:08:23.620
> 
> 标签：c#, multithreading, web-services, list, .net-3.5

我对多线程有点陌生，过去只玩过它。但我很好奇是否有可能在主线程上有一个字节数组列表，并且在单独的线程中创建新的字节数组时仍然能够添加到该列表中。此外，我将使用一个 for-each 循环，该循环将遍历将用于解析为字节数组的表单列表。所以基本上一个伪代码会是这样的......

```
reports = new List();

foreach (form in forms)  
{  
    newReport = new Thread(ParseForm(form));  
    reports.Add(newReport);  

}  

void ParseForm(form)  
{  
    newArray = new byte[];  
    newArray = Convert.ToBytes(form);  
    return newArray;  
} 
```

希望上面的伪代码有意义。如果有人能告诉我这是否可行，并指出一个好例子的方向，我相信我能找出实际的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:15:05.490

**在我们意识到它是 .Net 3.5 之前，请保留在 .Net 4 上以供参考**

如果您不需要列表中的任何顺序，一个简单的“修复”是使用[ConcurrentBag<T>](http://msdn.microsoft.com/en-us/library/dd381779)类而不是列表。如果您需要更多订单，还有一个[ConcurrentQueue<T>](http://msdn.microsoft.com/en-us/library/dd267265)集合。

如果你真的需要更多自定义的东西，你可以使用 BlockingCollection<T> 实现你自己的阻塞集合。 这是一篇关于该主题[的好文章。](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)

您也可以使用 Parallel.Foreach 来避免显式创建线程：

```
private void ParseForms()
{
    var reports = new ConcurrentBag<byte[]>();
    Parallel.ForEach(forms, (form) =>
                                {
                                    reports.Add(ParseForm(form));
                                });

}

private byte[] ParseForm(form)  
{  
    newArray = new byte[];  
    newArray = Convert.ToBytes(form);  
    return newArray;  
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T14:17:04.047

如果您需要从多个线程访问一个集合，您应该使用同步，或者[`SynchronizedCollection`](http://msdn.microsoft.com/en-us/library/ms668265)如果您的 .NET 版本是 3.0 或更高版本，则使用 a。

这是使您的线程可以访问集合的一种方法：

```
SynchronizedCollection reports = new SynchronizedCollection();

foreach (form in forms) {  
    var reportThread = new Thread(() => ParseForm(form, reports));
    reportThread.Start();
}

void ParseForm(Form form, SynchronizedCollection reports) {  
    newArray = new byte[];  
    newArray = Convert.ToBytes(form);  
    reports.Add(newArray);
} 
```

如果您使用的是 .NET 4 或更高版本，则命名空间的各种类提供了一种比手动管理线程更好的替代方法[`System.Threading.Tasks`](http://msdn.microsoft.com/en-us/library/dd235608)。在决定你的线程实现之前考虑探索这个替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:49:03.883

下面是一个简单的阻塞集合（仅作为队列），因为您无权访问 C# 4.0，所以我现在刚刚创建了它。它很可能比 4.0 并发集合效率低，但它应该工作得很好。我没有重新实现所有的队列方法，只是入队、出队和窥视。如果您需要其他人并且无法弄清楚它们将如何实施，只需在评论中提及即可。

一旦你有了工作的阻塞集合，你可以简单地从生产者线程添加到它，并使用消费者线程从中删除。

```
public class MyBlockingQueue<T>
{
    private Queue<T> queue = new Queue<T>();
    private AutoResetEvent signal = new AutoResetEvent(false);
    private object padLock = new object();

    public void Enqueue(T item)
    {
        lock (padLock)
        {
            queue.Enqueue(item);
            signal.Set();
        }
    }

    public T Peek()
    {
        lock (padLock)
        {
            while (queue.Count < 1)
            {
                signal.WaitOne();
            }

            return queue.Peek();
        }
    }

    public T Dequeue()
    {
        lock (padLock)
        {
            while (queue.Count < 1)
            {
                signal.WaitOne();
            }

            return queue.Dequeue();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:12:07.220

[为什么枚举文件多次返回同一个文件？](https://stackoverflow.com/questions/10606599/why-is-enumerate-files-returning-the-same-file-more-than-once)

检查出。它表明我认为你想做什么。

它在主线程上创建一个列表，然后从另一个线程添加到它。你会需要

```
using System.Threading.Tasks 
```

-

```
Files.Clear(); //List<string> 

Task.Factory.StartNew( () =>
{
      this.BeginInvoke( new Action(() =>
         {
            Files.Add("Hi");
         }));
 }); 
```

# asp.net-mvc - Silverlight、SSL、HTTPS、WCF、MVC 和表单身份验证

> ID：10620330
> 
> 赞同：1
> 
> 时间：2012-05-16T14:08:42.973
> 
> 标签：asp.net-mvc, wcf, silverlight, ssl, forms-authentication

我有一个使用表单身份验证的 MVC 3 网站。用户登录并导航到 Silverlight 5 应用程序。Silverlight 应用正在另一个端口上调用启用 Silverlight 的 WCF 服务。因为我的要求之一是使用 Https/SSL，所以我决定将 WCF 服务移动到我的 MVC 应用程序中的“服务”文件夹中。

要查看该服务是否正常工作，我输入了我的服务地址。我收到一条错误消息，指出我的服务需要匿名访问，但该网站被指定为使用表单身份验证。因此，我在我的服务的 web.config 中删除了 mexHttpBinding，并将 authenticationScheme="Negotiate" 添加到我的绑定的 httpTransport 中。（我还没到https）。

现在，我得到一个 302 并被重定向到登录页面。似乎我的服务提示我没有登录。所以，我添加了

```
routes.IgnoreRoute("{resource}.svc/{*pathInfo}"); 
```

和

```
routes.IgnoreRoute("Services/"); 
```

但这并没有什么不同。我认为服务说我没有经过身份验证，但我确定我是。

有人可以解释我做错了什么吗？

当我在我的本地主机上调试时，所有这些都有效，但是当我部署到服务器时我无法访问该服务。

**编辑**

我可能已经找到了我的答案。我在 IIS 中为我​​的网站打开了匿名访问，并将 httpTransport 的 authenticationScheme 更改为默认值（匿名）。然后我添加了

```
<authorization>
    <deny users="?"/>
</authorization> 
```

随着

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

which seems to be requiring the user to be authenticated in order to access the service. I am now going to check my silverlight application to make sure it can reach the service and get/post data. This was all in a test application, so I'll have to change my real application accordingly. Then, I'll tackle ssl/https.

Does all this sound right?

**EDIT 2**

I had to ensure mex was enabled and aspNetCompatibilityEnabled was set to 'false' to get the conctracts to update in my silverlight app. But after updating my services, I set the aspNetCompatibilityEnabled to 'true', and everything appears to be working.

I hope I'm still headed down the right path...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T22:21:42.917

I ended up setting up IIS to add the webservice as a website under the parent website. Then, I used the Location tag in the parent site's web.config to implement forms authentication on the webservice.

# iphone - 如何将 UIImage 发布到 Facebook 墙（iPhone/iPad）？

> ID：10620332
> 
> 赞同：0
> 
> 时间：2012-05-16T14:08:50.960
> 
> 标签：iphone, ios, facebook, uiimage, facebook-wall

我一直在网上寻找如何`UIImage`使用. 但是我真的很困惑最简单的选择是什么。到目前为止，我只使用来创建连接并将消息发布到墙上，如下所示：`Facebook``Facebook SDK``Facebook SDK`

```
// Create message
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Blah", @"name",
                                   @"", @"caption",
                                   @"", @"description",
                                   @"http://www.xyz.com", @"link",
                                   @"", @"picture",   // THIS IS NOT BIG ENOUGH
                                   nil];

// Post it to the users feed
[facebook dialog:@"feed" andParams:params andDelegate:nil]; 
```

这似乎工作得很好，并允许我上传少量的文本和图像。我遇到的问题是图像太小了。我需要一种允许用户上传更大（就查看大小而言）图像以及简短标题的方法。

请有人提供解决方案（理想情况下可以解决我现有的代码）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:07:10.307

感谢@Malek_Jundi，我设法实现了这一目标。这是我使用的代码：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:[facebook accessToken], @"access_token",nil];
[params setObject:@"Caption to go with image" forKey:@"name"];
[params setObject:myImage forKey:@"source"];   // myImage is the UIImage to upload
[facebook requestWithGraphPath:@"me/photos"
                     andParams: params
                 andHttpMethod: @"POST"
                   andDelegate:(id)self]; 
```

# javascriptmvc - JavaScriptMVC框架中Controller和Class的问题

> ID：10620340
> 
> 赞同：0
> 
> 时间：2012-05-16T14:09:21.000
> 
> 标签：javascriptmvc

```
$.Controller("Whiteboard", {}, {
    init: function(){
        var pen = new Pen();
    },
    sendRequest: function() {
        // This function should listen draw/erasing events from Pen
    }

});
$.Class("Pen",{},{

    init: function() {
        // Pen setup, click to draw etc..
    }
}); 
```

像这样，我想要 Pen 的白板监听事件，我该怎么做？我需要控制器监听一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:42:15.113

如果这是 JMVC 3.2+，您可以执行[以下](http://bitovi.com/blog/2011/10/3-2-controller-templated-event-binding.html)操作：

```
$('.whiteboard').whiteboard({pen:new Pen()});

$.Controller("Whiteboard", {}, {
    "{pen} draw": function() {
        this.sendRequest();
    }
});

$.Observe('Pen',{},{
    draw: function() {
        $(this).triggerHandler('draw');
    }
}); 
```

对于 JMVC 3.1，您必须像这样在控制器中使用`$.Model`而不是`$.Observe`使用：`this.bind`

```
$.Controller("Whiteboard", {}, {
    init: function() {
        this.bind(this.options.pen,'draw',this.callback('sendRequest'));
    }
}); 
```

# xslt - XSLT：比较用作分组键的字母

> ID：10620341
> 
> 赞同：0
> 
> 时间：2012-05-16T14:09:27.387
> 
> 标签：xslt, xpath, collation, xslt-2.0

我想按第一个字母对元素进行分组，但一些不同的字母应该被认为是相等的：A 和 Ä（以及 a 和 ä）都应该相同。

来源：

```
<root>
  <entry name="Aa" />
  <entry name="Ab" />
  <entry name="Äa" />
  <entry name="Ac" />
  <entry name="Ba" />
</root> 
```

转变：

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  <xsl:output indent="yes"/>

  <xsl:template match="root">
    <root>
      <xsl:for-each-group select="entry" group-by="upper-case(substring(@name,1,1))">
        <key><xsl:value-of select="current-grouping-key()"/></key>
      </xsl:for-each-group>
    </root>
  </xsl:template>

</xsl:stylesheet> 
```

现在的结果：

```
<root>
   <key>A</key>
   <key>Ä</key>
   <key>B</key>
</root> 
```

我希望它的结果：

```
<root>
   <key>A</key>
   <key>B</key>
</root> 
```

除了“Bb”之外的所有条目都应该在第一组中。

我认为成功的关键是使`group-by()`函数正确处理 a、A、ä 和 Ä 相等（这对于某些德国排序/排序规则是正确的）。但是我还没有找到可以处理的 xpath 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:26:58.193

有两种可能的方法：

(a) 使用 xsl:for-each-group 的排序规则属性，指定具有正确比较语义的排序规则。不幸的是，这将取决于您的 XSLT 处理器。例如，对于撒克逊人，您可以使用

```
http://saxon.sf.net/collation?lang=de;ignore-case=yes;ignore-modifiers=yes 
```

如此处所述：

[http://www.saxonica.com/documentation/extensibility/collat​​ion.xml](http://www.saxonica.com/documentation/extensibility/collation.xml)

（b）另一种方法是“自己做”，因为这里的大多数答案一直在推荐：也就是说，在进行分组之前编写一些函数来规范化大小写并去除重音符号。调用 lower-case() 或 upper-case() 对于规范化大小写并不完美，尽管对于主要问题是将 "ß" 和 "ss" 组合在一起的德语来说，upper-case() 可能是可以的。摆脱重音可以通过使用 normalize-unicode() 标准化为 Unicode 分解的范式，然后 replace() 来消除类别 \p{Lm} 中的字符。

我建议使用排序规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:11:56.223

怎么样`translate(substring(@name,1,1), 'Ä', 'A')`？

# java - 无法使用 ODBC 驱动程序将 Java 程序连接到 Access 2010 数据库

> ID：10620347
> 
> 赞同：0
> 
> 时间：2012-05-16T14:09:41.960
> 
> 标签：java, ms-access, odbc

所以我在这上面花了 48 小时，但我做错了！

我正在使用 64 位 BlueJ 程序编写 Java。我正在使用 64 位 MS Windows 7 我正在尝试连接到 MS Access 2010 (x86/x64)

下面显示了我建立连接的代码：

```
 /** 
         * Makes connection to FIREPLACES Database.
         * 
         * @return 0 if connection to FIREPLACES database is successfully made, 
         *           otherwise returns -1 if there is a problem making a connection 
         *           to the BOOKS database.
         * 
        */
        static public int makeConnectionToFireplacesDB()
          {

              try
                {
                        // Make connection to Database
                        connectionToFireplacesDB = DriverManager.getConnection("jdbc:odbc:FIREPLACES");
                }
              catch (SQLException exception)
                {       
                        return (-1);    // Return back with -1 if there is a problem 
                                        // making a connection
                }

              return (0);   // Return back with 0 if connection is made to database

          } // end makeConnectionToBooksDB() 
```

我要连接的访问​​文件的名称称为 FIREPLACES.mdb。

在遇到问题并在互联网上寻找解决方案后，我发现我需要通过 windows/SysWOW64/odbcad32.exe 使用 odbc 驱动程序创建连接。

我这样做了，但它仍然给了我同样的问题！

我觉得它一定是 x86/x64，所以我在不同的硬盘上安装了 x86 操作系统，但仍然是同样的问题！

下面的屏幕截图显示我尝试在 odbc 驱动程序上创建连接：

![尝试使用 odbc 驱动程序](../Images/4997824090b4aad4fc48557e4475dd8e.png)

我真的想不出我能提供的更多信息。

任何帮助真的会很棒！我因此陷入了严重的困境......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T20:03:02.070

对于这个问题，对我来说，答案很简单，将 32 位输入一个分区，然后再试一次......然后工作得很好！

# java - Spring 3 在启动时获取上下文真实路径

> ID：10620351
> 
> 赞同：0
> 
> 时间：2012-05-16T14:09:54.387
> 
> 标签：java, spring, jsf, jsf-2

我在 Web 应用程序中使用 Spring3 和 JSF 2.1。我有一个带有注释的方法`@postConstruct`，我想`ServletContext/ExternalContext realPath`在应用程序启动时从数据库中下载一些文件。

我尝试通过同时使用 ServletContext 和 FacesContext 来获得它，但 currentSession 在启动时为空。有没有办法做到这一点？

# unit-testing - Asp.net MVC Test of Create action method with NUnit and Nsubstitute always fails

> ID：10620363
> 
> 赞同：0
> 
> 时间：2012-05-16T14:10:27.270
> 
> 标签：unit-testing, mocking, nunit, asp.net-mvc-4, nsubstitute

I have this controller:

```
[HttpPost]
        public  ActionResult Create(Company company)
        {

            // try to save the record
            if (ModelState.IsValid)
            {

                // create the command
                var command = new CreateOrUpdateCompanyCommand
                {
                    CompanyId = company.CompanyId,
                    Code = company.Code,
                    Name = company.Name
                };

                // check for errors
                IEnumerable<ValidationResult> errors = _commandBus.Validate(command);

                ModelState.AddModelErrors(errors);

                if (ModelState.IsValid)
                {
                    var result = _commandBus.Submit(command);
                    if (result.Success) 
                        return RedirectToAction("Index");
                }

            }

            // if fail
            return View("Create", company);

        } 
```

I have this test for NUnit:

```
[Test]
        public void Create()
        {

            const string expectedRouteName = "Index";

            // Mock the arguments
            var mockRepository = Substitute.For<ICompanyRepository>();
            var mockProcessor = Substitute.For<ICommandBus>();

            // Arrange
            var controller = new CompanyController(mockProcessor, mockRepository);

            // Act
            var company = new Company
            {
                Code = "XXXXXXX",
                CompanyId = 1,
                Name = "Sample company"
            };

            var result = controller.Create(company) as RedirectToRouteResult;

            // Assert
            Assert.IsNotNull(result, "Should return a ViewResult");
            Assert.AreEqual(expectedRouteName, result.RouteValues["action"], 
                "View name should have been '{0}'", expectedRouteName);

        } 
```

This is the Model:

public class Company {

```
[Key]
public int CompanyId { get; set; }

[Required(ErrorMessage = "* (xxxx)")]
[MaxLength(7)]
[RegularExpression("^([A-Z0-9]{7})$", ErrorMessage = "xxx")]
[Display(Name = "Code")]
public string Code { get; set; }

[Required(ErrorMessage = "*")]
[MaxLength(40)]
[Display(Name = "Name")]
public string Name { get; set; } 
```

}

When I Run the test, this function always return false: `var result = _commandBus.Submit(command);` and the test fails.

I don't know how to test it? Should I mock the _commandBus and set it to return true? I tried in this way but unsuccessfully:

```
 var mockCommand = Substitute.For<ICommand>();

        mockProcessor.Submit(mockCommand).Success.Returns(true); 
```

To create this project I have got inspiration from this [http://efmvc.codeplex.com/](http://efmvc.codeplex.com/)

Any advise to me? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T01:55:06.730

The command you pass to `mockProcessor.Submit(mockCommand).Success.Returns(true)` needs to be the same one that the code-under-test passes. As the method news up its own command this will never be the case.

Easiest fix is to match any command when you set up your substitute:

```
var result = CreateSuccessfulResult(); // <-- fill this in as appropriate
mockProcessor.Submit(null).ReturnsForAnyArgs(result); 
```

Setting the `Success` field on result inline as per your original test should work too I think, but I find it a bit clearer to specify the result required.

You can improve this a bit by matching the expected command type:

```
mockProcessor.Submit(Arg.Any<CreateOrUpdateCompanyCommand>()).Returns(result); 
```

You can also inspect the command passed if you'd like to test that:

```
mockProcessor
    .Submit(Arg.Is<CreateOrUpdateCompanyCommand>(x => x.CompanyId = ...))
    .Returns(result); 
```

A similar approach can be used to check the `Validate` call.

There's a bit more info in the [NSubstitute docs](http://nsubstitute.github.com/help/argument-matchers/).

# python - 尝试使用 memory_profiler 模块时出错

> ID：10620364
> 
> 赞同：2
> 
> 时间：2012-05-16T14:10:30.400
> 
> 标签：python, memory, profiling

我正在尝试使用 memory_profiler 模块来分析大型 Python 程序的内存使用情况。我的程序中似乎有内存泄漏，所以我希望这个模块能帮助我找到泄漏。

我使用 pip 安装了 memory_profiler 并使用[此处](http://pypi.python.org/pypi/memory_profiler)提供的示例代码对其进行了测试。这完美地工作。

当我尝试将它与我的程序一起使用时，我将`@profile`装饰器添加到我的`main()`函数中，并以相同的方式从命令行运行分析器：

```
$ python -m memory_profiler engine.py 
```

我收到以下错误，我的程序无法运行（一切都挂起）：

```
usage: memory_profiler.py [-h] [-c CHARSET] [-i] [-o] [-l LOG_LEVEL] [-g] [-k]
                          [-w] [-s STOP] [-x TEXTS] [-z SIZE] [-t TIMEOUT]
                          [-p] [-d DEVICE]
memory_profiler.py: error: unrecognized arguments: engine.py 
```

有什么想法我可能做错了吗？

# aptana - Aptana Studio 3 中的 Zen Coding（选定文本）

> ID：10620370
> 
> 赞同：0
> 
> 时间：2012-05-16T14:10:48.837
> 
> 标签：aptana, aptana3, emmet

如何使用选定的文本进行 zen 编码？我能够在 Aptana Studio 2 中做到这一点，但现在我无法在 Studio 3 中做到这一点。

我可以输入 p*3，选择它并运行“扩展缩写”——这很有效。它给了我 3 组 p 标签。

但我无法选择现有文本并*对该*文本进行 zen 编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:52:06.287

我认为您正在使用内置的 Aptana 插件，该插件的功能支持有限。尝试安装 Zen Coding for Eclipse 插件：[https ://github.com/sergeche/eclipse-zencoding](https://github.com/sergeche/eclipse-zencoding)

该插件具有“通过 Tab 键扩展缩写”选项，以及所选文本的扩展。

# eclipse - SWTBot 测试插件的 MANIFEST.MF 错误

> ID：10620381
> 
> 赞同：0
> 
> 时间：2012-05-16T14:11:06.817
> 
> 标签：eclipse, swtbot

我想尝试 SWTBot 来测试我们的 RCP 应用程序的用户界面。为此，我从示例测试开始，该测试完美地工作，如此[处](http://swtbot.com/user-guide/running-swtbot-tests.html)所述。我想在我们的应用程序上进行类似的尝试，为此我检查了我们的 UI 插件并能够将它作为 eclipse 应用程序启动。然后我创建了一个新的 SWTBot 测试插件。刚刚创建测试插件后，我在“Require-Bundle: org.eclipse.swtbot.go”行的 MANIFEST.MF 文件中看到错误“Bundle 'org.eclipse.swtbot.go' 无法解析”。

我不确定为什么只有在我尝试为我们的自定义 RCP 应用程序创建测试插件时才会收到此错误，而不是在我尝试上面链接中提供的示例时。我比较了两个测试插件 MANIFEST.MF 文件，但没有留下任何线索。

在为自定义 RCP 应用程序创建 SWTBot 测试插件时，是否有人遇到过此类错误？

提前致谢 ！！

普拉卡什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:24:19.103

确保`org.eclipse.swtbot.go`它实际上是插件的名称（也许插件被称为其他名称）。

确保 PDE 中的目标平台包含 SWTBot 内容。您还可以使用 PDE 插件视图查看是否看到 SWTBot 插件。

# java - 如何使用休眠条件连接表

> ID：10620383
> 
> 赞同：0
> 
> 时间：2012-05-16T14:11:10.633
> 
> 标签：java, hibernate, criteria

我正在尝试加入多个表以使用条件加入，但这样做会出错，有人可以帮我吗？我的代码是

```
final Session session = getSession();
final Criteria criteria = session.createCriteria(ReferralPaymentInfo.class).createCriteria("SIGNUP_REFERRAL");
System.out.println("before");
List list = criteria.list();
System.out.println("after"); 
```

我也试过这段代码 final Session session = getSession(); 最终标准标准 =session.createCriteria(ReferralPaymentInfo.class); criteria.setFetchMode("SIGNUP_REFERRAL", FetchMode.JOIN); 列表列表 = 标准列表（）；

这仅从表 ReferralPaymentInfo 中给出结果，而不考虑表 SIGNUP_REFERRAL 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:18:30.323

尝试这个

```
DetachedCriteria ownerCriteria = DetachedCriteria.forClass(Owner.class);
    ownerCriteria.setProjection(Property.forName("id"));
    ownerCriteria.add(Restrictions.eq("ownername", "name"));

    Criteria criteria = getSession().createCriteria(Pet.class);
    criteria.add(Property.forName("ownerId").in(ownerCriteria)); 
```

# objective-c - 有没有办法自定义 UISearchDisplayController 单元格

> ID：10620390
> 
> 赞同：1
> 
> 时间：2012-05-16T14:11:29.313
> 
> 标签：objective-c, ios

我正在使用 UISearchDisplayController 进行搜索，如果可能的话，我想向每个单元格添加更多元素。做了一些搜索，但找不到任何信息。唯一的方法是用 tableview 重现它。除了 textlabel.text 之外，我还可以设置任何其他属性吗

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T15:05:21.293

您可以完全更改单元格。

以下代码段依赖于 UITableCell 的两个子类 ANormalCell 和 ASearchCell。

警告：此代码尚未编译，但您明白要点了吗？

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *normalCellReuseIdentifier = @"ANormalCell";
    static NSString *searchCellReuseIdentifier = @"ASearchCell";

    UITableViewCell* cell = nil;

    if (tableView != self.searchDisplayController.searchResultsTableView) {
        cell = (ANormalCell*)[self.tableView dequeueReusableCellWithIdentifier:normalCellReuseIdentifier];

        if (cell == nil) {
            NSArray* topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ANormalCell" owner:nil options:nil];
            cell = (ANormalCell*)[topLevelObjects objectAtIndex:0];
        }
    } else {
        cell = (ASearchCell*)[self.tableView dequeueReusableCellWithIdentifier:searchCellReuseIdentifier];

        if (cell == nil) {
            NSArray* topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ASearchCell" owner:nil options:nil];
            cell = (ASearchCell*)[topLevelObjects objectAtIndex:0];
        }
    }

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:25:28.630

很有可能。所有 tableView 数据源方法都使用 tableView 参数调用。如果

```
if (tableView == searchController.searchResultsTableView) 
```

然后通过添加子视图或自定义属性来更改单元格。在这种情况下，与其他任何方法相同的方法适用于自定义单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:25:13.077

是的，您可以设置 cell.imageView 、 cell.accessoryView 、 cell.BackGroundView .. 等。

阅读此[UITableViewCell](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewCell_Class/Reference/Reference.html)文档以获取更多信息

# mysql - MYSQL中的foreach

> ID：10620395
> 
> 赞同：-3
> 
> 时间：2012-05-16T14:11:47.967
> 
> 标签：mysql, sql, foreach, each

我被要求从表格中找到每个评分的最低年龄，如下所示：

```
table name: 'SAILORS' 
fields: 'SID', 'SNAME', 'Rating', 'Age**' 
```

这可以使用 PHP 来完成，但我必须使用 MYSQL 查询来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:14:03.103

一个[group by](http://www.tizag.com/mysqlTutorial/mysqlgroupby.php) over `Rating`column 和[min](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)函数调用将做到这一点。

```
SELECT Min(`Age`)  AS `Lowest Age`, 
       `Rating` 
FROM   `SAILORS` 
GROUP  BY `Rating` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:13:33.227

```
select Rating, min(Age) as MinAge
from SAILORS
group by Rating 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T14:13:45.427

这是一个简单的分组查询：

```
select Rating, min(Age) from SAILORS
group by Rating 
```

# django - 使用 Backbone.js 和 Tastypie 在 Django 中更新用户

> ID：10620397
> 
> 赞同：1
> 
> 时间：2012-05-16T14:11:56.580
> 
> 标签：django, backbone.js, tastypie

使用 Backbone 和 Tastypie更新 Django 的 User 属性（尤其是`password`and ）的正确方法是什么？`email`

一般来说，在这两种情况下，从 API 的角度来看，什么是好的工作流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:17:50.300

这种“单字段”更新由 PATCH HTTP 动词处理。所以你应该用这个方法和你想要更新的数据来做一个 Ajax 请求。

在 curl 中，它会是：

```
curl --dump-header - -H "Content-Type: application/json" -X PATCH --data '{"email": "new@email.com"}' "http://localhost:8000/api/v1/user/1/" 
```

关于 Backbone，这不是必需的。您可以保留 User 模型和使用`sync`方法，但`Jquery.ajax()`只要调用就足够了。

查询：

```
$.ajax({
  type: 'PATCH',
  url: http://localhost:8000/api/v1/user/1/,
  data: "{'email': 'new@email.com'}",
  success: function(){/* your logic */},
  contentType: "application/json"
}); 
```

# php - 将会话数据附加到自动 Cake 错误/调试日志

> ID：10620398
> 
> 赞同：1
> 
> 时间：2012-05-16T14:11:58.717
> 
> 标签：php, cakephp, logging

如果日志记录打开，CakePHP 会为诸如 PHP 通知/错误之类的事件输出简单的日志消息，我想知道是否有任何方法可以设置 Cake 以自动输出 PHP 错误测试的额外信息；我特别关注会话信息。如果我能得到用户 ID，那将对调试有很大帮助。

为了澄清，这些是您`core.php`设置为的日志

```
Configure::write('log', true); 
```

我知道我可以制作自己的日志，然后可以包含我需要的信息，但如果可能的话，我想附加默认的 PHP 错误消息以捕获我*不*知道的错误。就像将`$_SESSION`数组转储到我的日志这样的事情将是一个开始，但我不知道这是否可能。

我使用的是 Cake 2.2.2，我*没有*使用 AuthComponent 进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:23:44.243

我建议您创建一个不同的日志，而不是使用错误日志，但如果您想使用错误日志，那就是您的交易。要在错误日志上写 $_SESSION，很简单，只要在你想要的地方写下下面的代码

```
$this->log($_SESSION,'error'); 
```

它对我有用

![在此处输入图像描述](../Images/51f878a90e85d7a34da0a125be9008ee.png)

你可以继续使用错误日志来保存你想要的一切

# shell - 版本和构建信息错误 Xcode 4

> ID：10620400
> 
> 赞同：1
> 
> 时间：2012-05-16T14:11:59.943
> 
> 标签：shell, xcode4, version-numbering, build-numbers

我正在使用 Xcode 4.3，并且我已按照此用户的步骤创建脚本：

[版本与 XCode 中的构建](https://stackoverflow.com/questions/6851660/version-vs-build-in-xcode-4)

无论出于何种原因，我似乎都不能在那里发表评论。由于 StackOverlow 中的答案区域不是论坛/讨论，我有点被迫根据该答案提出问题。

在第 7 步中，他引用了 2 种增加构建版本的方法：数字和十六进制数字

```
#!/bin/bash    
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

和

```
#!/bin/bash    
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=$((0x$buildNumber)) 
buildNumber=$(($buildNumber + 1)) 
buildNumber=$(printf "%X" $buildNumber)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

两者都返回完全相同的 shell 错误：

```
syntax error: invalid arithmetic operator (error token is ".0")
command /bin/sh failed with exit code 1 
```

我去了摘要选项卡，版本和构建都是 1.0。如果我将其更改为“1”，则错误为“第 4 行 1 + 1：语法错误：无效算术运算符（错误标记为“+ 1”）

我做错了什么，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T08:49:31.057

您的内部版本号有一个浮点值，因此将您的代码更改为

```
#!/bin/bash    
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
buildNumber=`echo $buildNumber +1|bc`
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$INFOPLIST_FILE" 
```

正如[这个 SO post](https://stackoverflow.com/a/9196647/184245)中所建议的那样。

# java - 在 XSLT 中，如果某个元素的 xml 文件包含在 xinclude 中，我如何获取该 xml 文件的文件路径？

> ID：10620404
> 
> 赞同：1
> 
> 时间：2012-05-16T14:12:02.863
> 
> 标签：java, xslt, docbook, xinclude

我有这些 XML 文件：

```
master.xml (which uses XInclude to include child1.xml and child2.xml)
child1.xml
child2.xml 
```

两者都`child1.xml`包含`child2.xml`一个`<section>`带有一些文本的元素。

在 XSLT 转换中，我想添加`<section>`元素来自的文件的名称，所以我得到如下内容：

```
<section srcFile="child1.xml">Text from child 1.</section>
<section srcFile="child2.xml">Text from child 2.</section> 
```

如何检索值`child1.xml`和`child2.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T05:13:07.740

除非您关闭该功能，否则所有 XInclude 处理器都应在包含文件的 URL 中添加一个 @xml:base 属性。所以你不必做任何事情，它应该已经是：

```
<section xml:base="child1.xml">Text from child 1.</section>
<section xml:base="child2.xml">Text from child 2.</section> 
```

（如果需要，可以使用 XSLT 将 @xml:base attr 转换为 @srcFile。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:04:14.797

我有 99% 的把握，一旦 xi:include 被处理，您将拥有一个文档（和单个信息集），它不会让您确定文档的任何给定部分来自哪个 URL。

我认为您需要将该信息直接放在各个包含的文件中。话虽如此，您仍然可以尝试[document-uri](http://www.w3.org/TR/xpath-functions/#func-document-uri)，但我认为所有节点都会返回相同的 URI。

# c++ - 在 C++ 中初始化静态指针

> ID：10620408
> 
> 赞同：15
> 
> 时间：2012-05-16T14:12:10.930
> 
> 标签：c++, pointers, static, initialization

我有一个带有静态成员的类，它是一个像这样的指针：

动画.h

```
class Animation
{
public:
    Animation();
    static QString *m;

}; 
```

动画.cpp

```
#include "animation.h"

QString* Animation::m = 0;

Animation::Animation()
{
} 
```

当我尝试从另一个类初始化那个'm'指针时：

```
Animation::m = new QString("testing"); 
```

有用。

但是当我这样做时：

```
QString x("Testing");
Animation::m = &x; 
```

程序崩溃。

第二种方法有什么问题？

此外，我希望将该静态指针设为私有，以便我可以为其创建静态 getter 和 setter 函数。设置器应该使用第二种方法，因为“x”将进入一个参数，所以我被卡住了。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T14:13:42.200

我敢打赌它不会在那条线上崩溃，而是在之后。

问题是您正在获取位于自动内存中的变量的地址，然后可能会尝试访问它。该变量`x`将在其范围结束时被销毁，但仍将指向该内存（超出范围`Animation::m`后您不再拥有的内存）。`x`这会导致**未定义的行为**。

就像下面这样是非法的：

```
int* x = NULL;
{
   int k = 3;
   x = &k;
}
*x = 4; 
```

**解决方法**分配给值，而不是指针（前提是它之前被分配给一个有效的`QString*`）：

```
QString x("Testing");
*(Animation::m) = x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:14:04.830

**第二种方法有什么问题？**

`x`它崩溃是因为您很可能在创建范围之外访问它。

一旦控件退出创建它们的范围，自动变量就会自动销毁`{` `}`，因此超出范围的是指向不存在数据的指针。访问此数据会导致未定义行为和崩溃。

**怎么办？**

您应该动态分配内存，然后将字符串复制到动态分配的指针，以便您能够在任何地方访问它。这样，除非明确`delete`编辑，否则字符串将保持有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:18:51.977

我敢打赌，当您使用`Animation::m`after`x`已被销毁（可能超出范围）时，您的程序会崩溃。

如果您想使用 setter 分配给`Animation::m`，则需要将参数作为指针或通过引用传递：

```
class Animation
{
public:
    Animation();

    void set_m( QString* ptr) {
        m = ptr;
    }

    void set_m( QString& ref) {
        m = &ref;
    }

private:
    static QString *m;

}; 
```

但是，`m`当您尝试使用`m`.

# image - 打印多页 HTML5 画布元素

> ID：10620412
> 
> 赞同：0
> 
> 时间：2012-05-16T14:12:32.647
> 
> 标签：image, html5-canvas, printing-web-page, multipage

这是我在这里提出的第一个问题，因为通常我可以找到一个可以解决我所有问题的答案。然而，这周我已经碰壁了。

我在我的页面上使用画布，效果很好，可以保存为图像文件。我还创建了一个按钮，该按钮将在使用 toDataURL 后在新窗口中打开画布进行打印。我正在使用下面的代码：

```
function printable() {
    var dataUrl = document.getElementById("mainCanvas").toDataURL("image/png");
    var windowContent = '<!DOCTYPE html>';
    windowContent += '<head><title>Print Map</title></head>';
    windowContent += '<body>';
    windowContent += '<img src = "' + dataUrl + '">';
    windowContent += '</body>';
    windowContent += '</html>';
    var printWin = window.open('', '', width = 340, height = 260);
    printWin.document.open();
    printWin.document.write(windowContent);
    printWin.document.close();
    printWin.focus();
    printWin.print();
} 
```

这很好用，并打开打印对话框来打印我的画布图像。我的问题是我的图像大于单页，并且只打印图像的第一页。有什么方法可以在多个页面上打印我的画布，还是我应该将其归咎于浏览器的打印机功能不佳，并让需要打印的用户在本地保存画布后使用不同的程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:17:07.347

有一个愚蠢的解决方案，但绝对有效。

使用脚本分割画布，并将内容放到几个单独的画布上。

使用这些功能：

```
ImageData getImageData(in float x, in float y, in float width, in float height);
void putImageData(in ImageData imagedata, in float dx, double dy, in float dirtyX Optional , in float dirtyY Optional , in float dirtyWidth Optional , in float dirtyHeight Optional ); 
```

# android - 在 WebView 中访问本地文件

> ID：10620417
> 
> 赞同：5
> 
> 时间：2012-05-16T14:12:52.190
> 
> 标签：android, webview

我的本机应用程序包含一个 WebView，并且 WebView 从 Web 加载网页。例如，html是从

[http://dongshengcn.com/test.html](http://dongshengcn.com/test.html)

似乎任何从网络（而不是本地）加载的页面都无法从本地设备加载任何文件。

我的问题是：

加载到 webview（作为本机应用程序的一部分）的[http://dongsheng.com/test.html](http://dongsheng.com/test.html)是否可以访问本地设备上的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T17:43:34.293

这里有几件事可以尝试：

1.  要使用本地文件，您需要将它们放在项目的 assets 文件夹中，并使用诸如 file:///android_asset/ 之类的 URL 调用它们。例如，如果您在 assets 文件夹中添加 mypage.html，那么您可以在 webview 中使用 file:///android_asset/mypage.html 调用它。

2.  检查以确保您在清单中具有适当的 webview 权限。要使 webview 正常工作，您需要：

    `<uses-permission android:name="android.permission.INTERNET" />`

3.  看看 Github 上的以下应用程序，作为奖励，它还修复了 Honeycomb 和 ICS 中的 webview 的几个错误。这是一个关于如何将 webview 与本地文件一起使用的完整示例： [https ://github.com/bricolsoftconsulting/WebViewIssue17535FixDemo](https://github.com/bricolsoftconsulting/WebViewIssue17535FixDemo)

编辑：问题澄清后的附录：

是的，可以从 Web 加载本地页面，但您必须使用一种技巧来绕过浏览器的安全措施。

将 URL 的 file://android_asset/ 部分替换为自定义方案（例如 file///android_asset/mypage.html 变为 myscheme:///mypage.html），并将这些自定义方案 URL 放置在您的页面中。实现 WebViewClient 的`shouldOverrideUrlLoading`，检查 URL 是否以自定义方案开头，如果是，则使用 webview.loadUrl 重定向到本地页面。

```
    mWebView.setWebViewClient(new WebViewClient()  
    {  
        @覆盖  
        public boolean shouldOverrideUrlLoading(WebView view, String url)  
        {  
            if (url != null && url.startsWith("myscheme://"))  
            {  
                String newUrl = url.replace("myscheme://", "file://android_asset/");  
                mWebView.loadUrl(newUrl);  
                返回真；  
            }  
            返回假；  
        }  
    }  

```

# vhdl - 无法在 ModelSim 上编译自编程函数

> ID：10620425
> 
> 赞同：0
> 
> 时间：2012-05-16T14:13:22.910
> 
> 标签：vhdl

我在编译 VHDL 代码时遇到问题，在以下位置出现错误：

使用 bin2bcd.all；

顺便说一句，代码在 ISE 上工作，而不是在 ModelSIm 上任何想法？？？！！！提前致谢。

```
library ieee; 
use ieee.std_logic_1164.all; 
use ieee.std_logic_arith.all; 
use ieee.std_logic_unsigned.all; 
library bin2bcd; 
use bin2bcd.all; 
```

而 bin2bcd 是：

```
library IEEE; 
use IEEE.STD_LOGIC_1164.all; 
use IEEE.STD_LOGIC_UNSIGNED.all; 
package bin2bcd is 
function to_bcd ( bin : std_logic_vector(11 downto 0) ) return std_logic_vector; 
end bin2bcd; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:38:04.410

当您编译`bin2bcd`时，它会进入`work`库（除非您让编译器执行其他操作）。

这意味着您需要执行以下操作：

`use work.bin2bcd.all`

看着这个：

```
library bin2bcd; 
use bin2bcd.all; 
```

您实际上可能已经将一个名为的包编译`bin2bcd`到一个名为`bin2bcd`.

在这种情况下，您需要这样做

```
library bin2bcd; 
use bin2bcd.bin2bcd.all; 
```

# android - Android上的屏幕方向和-Rotation有什么区别？

> ID：10620426
> 
> 赞同：2
> 
> 时间：2012-05-16T14:13:32.153
> 
> 标签：android, screen, screen-orientation

Android上的屏幕方向和-Rotation有什么区别？这些术语在网络上似乎经常可以互换使用。

根据[关于弃用 Display.getOrientation() for getRotation()](https://groups.google.com/forum/?fromgroups#!topic/android-developers/HUon8SKCA2Q)的讨论，这些概念经常被误解/混淆。然而没有提供进一步的解释。

我怀疑了解 Android 设备上复杂的方向和旋转对于即使在异国设备上正确显示应用程序也很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:26:51.200

在你给黛安·哈克伯恩小姐的链接上清楚地说明了；

“getOrientation() 从来没有返回方向，它返回旋转。所以它被重命名为 getRotation()。这不*那么*令人困惑。事实上你很困惑——你以为它返回了方向，但它没有。”

更深入地描述；

*   方向：是定义横向、纵向、...的概念
*   旋转：[从“自然”方向返回屏幕的旋转。](http://developer.android.com/reference/android/view/Display.html#getRotation%28%29)自然方向在这里很重要，因为它在平板电脑上是横向的，在较小的设备上是纵向的。

# mysql - 怎么可能有一个好的解释和一个缓慢的查询？

> ID：10620435
> 
> 赞同：3
> 
> 时间：2012-05-16T14:13:47.573
> 
> 标签：mysql, performance

怎么可能在 EXPLAIN 中有一个好的计划，如下所示并且查询速度很慢。几行，使用索引，没有文件排序。

查询在 9 秒内运行。主表有大约 500k 行。

当我在该表中有 250k 行时，查询在 < 1 秒内运行。

建议吗？

![解释](../Images/5c3894b2b87a784d1584be1306a9f4bd.png)

查询（1\. 可以根据用户选择启用注释字段。2\. 没有 FORCE INDEX 我得到了 14 秒。3\. SQL_NO_CACHE 我用来防止错误结果）：

```
 SELECT SQL_NO_CACHE
          p.property_id
        , lct.loc_city_name_pt
        , lc.loc_community_name_pt
        , lc.loc_community_image_num_default
        , lc.loc_community_gmap_longitude
        , lc.loc_community_gmap_latitude
    FROM property as p FORCE INDEX (ix_order_by_perf)
    INNER JOIN loc_community lc 
        ON lc.loc_community_id = p.property_loc_community_id
    INNER JOIN loc_city lct FORCE INDEX (loc_city_id)
        ON lct.loc_city_id = lc.loc_community_loc_city_id
    INNER JOIN property_attribute pa
        ON pa.property_attribute_property_id = p.property_id        
    WHERE p.property_published = 1
        AND (p.property_property_type_id = '1' AND p.property_property_type_sale_id = '1') 
        AND p.property_property_housing_id = '1' 
--      AND p.property_loc_community_id = '36'  
--      AND p.property_bedroom_id = '2'
--      AND p.property_price >= '50000' AND p.property_price <= '150000'
--      AND lct.loc_city_id = '1'
--      AND p.property_loc_subcommunity_id IN(7,8,12) 
    ORDER BY 
          p.property_featured DESC
        , p.property_ranking_date DESC
        , p.property_ranking_total DESC
    LIMIT 0, 15 
```

查询配置文件

![查询配置文件](../Images/eaca1d35cfd3ff475911e28337962fb4.png)

结果集总是输出 15 行。但是 table 属性和 property_attribute 大约有 500k 行。

谢谢大家，

阿曼多·米亚尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:55:52.677

在这种情况下，这在 EXPLAIN 中似乎真的很奇怪。这在 MySQL 4.x 上不会发生，但在 MySQL 5.x 上会发生。

MySQL 真正向您展示的是 MySQL 正在尝试使用强制索引`ix_order_by_perf`对行进行排序，它向您显示 15 行，因为您有 LIMIT 15。

但是，WHERE 子句仍在扫描所有 500K 行，因为它无法将索引用于 WHERE 子句中的条件。如果它能够使用索引来查找所需的行，您将在“possible_keys”字段中看到强制索引。

您可以通过保留`FORCE INDEX`子句和删除`ORDER BY`子句来证明这一点。您会看到 MySQL 现在不会使用任何索引，即使是您强制使用的索引（因为索引不适用于此目的）。

尝试将 property_property_type_id、property_property_type_sale_id、property_property_housing_id 以及您在 WHERE 子句中引用的任何其他列添加到索引的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:23:42.880

有一段时间，您的查询将围绕可能不再适用于给定需求的模型进行优化。

计划可能很棒，但即使您在 where 子句中使用的过滤器尊重索引定义，这并不意味着解析器不会解析可能的行。

您必须分析的是您的索引的确定性。例如，如果“人”表中有“姓名、姓氏”的索引，则如果每个人的姓名和姓氏都相同，则性能会很差。当索引不足以描述数据集的某个部分时，它是一个真正的陷阱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:46:13.850

根据您解释查询的输出，这是我的初步想法：

这部分查询（重写以排除不需要的括号）：

```
 p.property_published = 1
    AND p.property_property_type_id = '1' 
    AND p.property_property_type_sale_id = '1'
    AND p.property_property_housing_id = '1' 
```

将条件放在`property`表上的条件如此之多，以至于您拥有的任何索引都不太可能被使用。除非您有一个包含所有这四个属性的单个索引，否则您将强制对查询进行全表扫描，只是为了找到满足这些条件的行（但是，如果您在其中一个上有索引，则有可能它可以使用的属性）。

首先，我将添加以下索引（尚未检查语法错误）：

```
CREATE INDEX property_published_type_sale_housing_idx  
ON property (property_published, 
             property_property_type_id, 
             property_property_type_sale_id, 
             property_property_housing_id ); 
```

然后我会重新运行你的`EXPLAIN`，看看你现在是否达到了索引。（取消`FORCE INDEX`查询的那部分）。

此外，即使考虑到这个问题，减速也可能与*内存*有关。也就是说，你可能有足够的内存来处理行数较少的表，但可能是当表变大时，MySQL 无法在内存中处理整个查询，而被迫开始使用磁盘来获取整个查询已处理。这可以解释为什么性能突然下降。

如果是这种情况，那么有两件事可能会有所帮助：

1.  添加更多内存（并调整 mysql 配置文件以利用它），以便一次可以处理的行数更大。这充其量只是一个临时解决方案。

2.  调整索引（就像我上面所说的那样），以便 mysql 需要处理的行数更少。如果它可以更精确地选择它选择进行处理的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:19:17.487

除了一个好的计划，您需要有足够的资源来运行查询。

检查配置中的缓冲区大小和其他关键参数。

你的查询是？

# mysql - Perl 和 MySQL - 使用 DBI 从表的最后一行返回一个字段，可能带有 last_insert_id？

> ID：10620438
> 
> 赞同：0
> 
> 时间：2012-05-16T14:13:49.633
> 
> 标签：mysql, perl, dbi, last-insert-id

我试图从表的最后一行返回一个成员`firstname`字段。`users``users`

```
 my $dbh = DBI->connect($dsn, $db_user_name, $db_password) or die "$DBI::errstr";
    my $LastID = $dbh->last_insert_id(`firstname`); ##but I want from table users
    print qq~$LastID~; 
```

从上面返回此错误：

```
DBI last_insert_id: invalid number of arguments: got handle + 0, expected handle + between 4 and 5
Usage:    $h->last_insert_id($catalog, $schema, $table_name, $field_name [, \%attr ]) 
```

`firstname`那么，从表的最后一行获取字段的“最佳”方式是什么（最适合服务器、最快、最少的内存、负载、最少的开销……无论如何）`users`？

意识到我上面的例子不应该被认真对待，因为我不知道如何做到这一点，而不仅仅是做一些像我的粗略但功能性的事情：（ps UserID 不是通过自动增量分配的，而是按数字顺序排列的，新用户得到更高的用户 ID。就像我解决预先存在的问题时那样。）

```
my $dbh = DBI->connect($dsn, $db_user_name, $db_password) or die "$DBI::errstr";
my $dsn = $dbh->prepare(qq{SELECT `firstname` FROM `users` ORDER BY ABS(UserID) DESC LIMIT ?,?});
$dsn->execute('1','1') or die "$DBI::errstr";
while(@nrow = $dsn->fetchrow_array()) {
$firstname = $nrow[0];
} 
```

我假设因为我使用的 DBI 可能会提供最佳解决方案，但是我显然缺乏经验，需要一些建议和指导来学习正确的方法来做到这一点。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:28:49.137

您提到 UserID 不是自动递增的，所以我不确定[last_insert_id](https://metacpan.org/module/DBI#last_insert_id)是否会在这种情况下工作。可能，但我只是不确定。该文件指出：

> 通常，这将是数据库服务器分配给具有 auto_increment 或串行类型的列的值。

我希望通过使用 SQL 语句来解决这个问题：

```
SELECT
    u.firstname
FROM
    users u
JOIN
    (
    SELECT
        MAX(UserID) AS UserID
    FROM
        users
    ) t ON u.UserID = t.UserID 
```

使用 DBI 的代码将如下所示：

```
my $stmt = 'SELECT u.firstname FROM users u JOIN(SELECT MAX(UserID) AS UserID FROM users) t ON u.UserID = t.UserID';
my $first_name = ($dbh->selectrow_array($stmt))[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:31:50.777

last_insert_id 方法需要 4 个参数。像这样使用：

```
 my $id = $connection->last_insert_id(undef, 'myschemaname', 'mytablename', 'mycolumnname'); 
```

请参阅 DBI 吊舱。

# iphone - iPhone 证书雾

> ID：10620439
> 
> 赞同：0
> 
> 时间：2012-05-16T14:13:50.730
> 
> 标签：iphone, titanium, certificate

在某些方面，这个问题是对我之前关于推送通知的问题的跟进。在浪费了很多时间之后，我或多或少地得出结论，我遇到的问题，尤其是 Titanium，归结于我没有按正确的顺序配置我的钥匙串。我现在正在考虑从头开始重做，但认为最好先在此处发布问题以建立**正确**的方法。这是我打算做的

1.  登录我的 Apple iOS 配置门户帐户，下载并安装 Apple WWDRCA 证书
2.  打开 KeyChain 并创建一个新的证书签名请求。我称它为 myname.certS....
3.  转到供应门户帐户并使用上面创建的 CSR 来保护我的开发和生产证书。
4.  通过双击它们在我的机器上下载并安装这些证书
5.  回到供应门户创建我的第一个 appID - 称之为 com.example.push
6.  回到 KeyChain 创建一个新的 csr - push.certSig...。
7.  回到供应门户，选择新的 appID 并使用新的 csr 将其配置为推送
8.  仍在供应门户中选择设备并为我要测试我的应用程序的设备添加 UUID
9.  仍然在供应门户中选择供应并为应用程序创建一个新的开发和生产供应配置文件。后者选择了 AdHoc。使用之前创建的证书。在此阶段，每个配置文件中仅分配一个设备。
10.  提交配置文件，等待然后编辑它并添加剩余的设备 - 我这样做是因为我已经读到某处存在阻止配置文件第一次使用相关 appID 的推送配置的错误
11.  下载并安装两个配置文件

好吧，在我写作的时候，我已经遵循了所有这些步骤。然后我编写并编译了一个简单的 Titanium 移动项目，并尝试使用上面创建的 AdHoc 配置文件安装到设备选项。一切都很顺利，我拿到了 IPA。我把 IPA 输入到 TestFlightApp，它报告了*Invalid Profile: developer build entitlements must have get-task-allow set to true*。所以我再次尝试使用开发配置文件。这一次 TestFlightApp 接受了 IPA。在我的 iPad 上安装它，但仍然发现 registerForPushNotifications 正在消失，没有任何报告 - 没有成功，没有错误......只是一个令人讨厌的沉默。

我不得不承认我在这里束手无策。我显然做错了什么，但我不知道它可能是什么。如果我有一百万美元，我会把它们送给任何能让我走上正轨的人。好吧，我没有，所以我希望有人纯粹出于善意让我走上正轨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:24:16.937

> 尝试使用上面创建的 AdHoc 配置文件安装到设备选项。一切都很顺利，我拿到了 IPA

这听起来不对。您不是在安装到设备上，而是在生成可分发的构建。我不熟悉 Titanium 的构建过程，但是在 Xcode 4 中，您选择*存档*来生成 IPA，然后 Xcode 会在此时生成适当的权利。如果您使用的选项旨在直接安装到设备上，则不会生成这些权利。

> 所以我再次尝试使用开发配置文件。

这听起来也不对。您应该使用分发配置文件。

# html - 盒子阴影被内容覆盖？

> ID：10620440
> 
> 赞同：0
> 
> 时间：2012-05-16T14:13:51.867
> 
> 标签：html, css

我有一个带有盒子阴影的 div，看起来很棒。我遇到的问题是，当我向 div 添加内容时，内容将覆盖阴影。如何在我的 div 上有 box-shadow 并将它放在该 div 的任何子内容之上？

这是包含 div 的 css 集

```
 #hero_graphic {
        box-shadow: inset 0px 5px 10px #333;
        float: left;
        width: 100%;
        height: 300px;
        margin: 0px;
        padding: 0px;
    } 
```

如果 div 内没有内容，但当我将内容添加到 div 时被覆盖，此插入框阴影将显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:17:24.173

您想告诉内容表现并保持其与阴影的距离，将其设置`padding`为`#hero_graphic`大约 15 像素。

[查看示例](http://jsfiddle.net/n8c94/2/)

# asp.net-mvc - KendoUI 网格显示总记录数

> ID：10620442
> 
> 赞同：10
> 
> 时间：2012-05-16T14:13:59.223
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 kendoUI 网格来显示表中的记录。我想显示表格的总记录数。就像是

**显示 1203 条记录中的 1-20 条**

有没有办法使用 KendoUI 网格显示记录总数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T15:34:23.180

您所要做的就是将其添加到您的 .kendoGrid

```
 dataBound: function (e) {
            //total bits needs to be removed because dataBound fires every time the gird pager is pressed.
            $('#totalBits').remove();
            //add the total count to the pager div.  or whatever div you want... just remember to clear it before you add it.
            $('.k-grid-pager').append('<div id="totalBits">' + this.dataSource.total() + '</div>')
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-06T18:48:45.453

我用来显示只有记录计数的页脚（分页器）的 MVC 包装器代码如下所示：

```
@(Html.Kendo().Grid(dataSource)
    .Columns(...)
    .Pageable(p => p.Numeric(false)
                    .PreviousNext(false)
                    .Messages(m => m.Display("Matching Students: {2}"))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T14:38:29.457

您可以使用选项 pageable.messages.display，您可以查看文档：[这里](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#configuration-pageable.messages)

# google-maps - 画布上的谷歌地图边框

> ID：10620446
> 
> 赞同：0
> 
> 时间：2012-05-16T14:14:07.720
> 
> 标签：google-maps, css, border

我检查了新的谷歌地图外观，它在画布上有一种带阴影的边框。怎么可能做到这一点？看起来不错。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-16T19:25:32.233

它只是一个设置为内部的盒子阴影（大多数盒子阴影是外部的，也就是阴影）。CSS 非常简单：

```
#inner-shadow {
-moz-box-shadow: inset 0 0 5px #888;
-webkit-box-shadow: inset 0 0 5px#888;
box-shadow: inner 0 0 5px #888;
} 
```

和html：

```
<div id="inner-shadow">
<!-- Google Map here -->
</div> 
```

# windows-phone-7 - 适用于 Windows Phone 发布问题的 Azure 工具包

> ID：10620447
> 
> 赞同：0
> 
> 时间：2012-05-16T14:14:10.623
> 
> 标签：windows-phone-7, azure

我使用来自 codeplex 的 Windows Phone 的 Windows Azure 工具包。从模板创建 Windows Phone 云应用程序后，我在 localhost 上启动它并成功运行。然后我按照 Codeplex 上关于如何在 Azure 上部署的说明进行操作，并成功发布了它——我得到了网站的 url，但是在浏览器中输入 url 后网站没有加载，过了一会儿就出现了超时。我尝试了生产和登台部署。无法解决为什么会发生这种情况 - 有人遇到过熟悉的问题吗？

发布成功完成，但是此应用程序在 Windows Azure 上运行不正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:47:06.793

你可能想看看：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh134844.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh134844.aspx)

远程访问 VM 是查看正在发生的事情的好方法。如果你想要一段时间（可能是 30 分钟），它会出现吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:17:09.330

当您使用 Web Role 类型的 WP7 Phone 应用程序时，请查找以下链接中建议的所有步骤：

[Webrole 没有启动并且总是很忙](https://stackoverflow.com/questions/10381345/webrole-is-not-starting-and-always-busy/10386637#10386637)

此外，如果您仍然无法找到根本原因，请打开 Windows Azure 支持票证，您将获得一些帮助以找到根本原因。

# java - 从 ResultSet 填充 JTable 的最简单代码

> ID：10620448
> 
> 赞同：39
> 
> 时间：2012-05-16T14:14:11.083
> 
> 标签：java, swing, sqlite, jtable, defaulttablemodel

我用谷歌搜索了一整天，没有运气。`getnPrintAllData()`按确定按钮后我调用方法。所以代码是：

```
public class DatabaseSQLiteConnection {
    Connection conn = null;
    PreparedStatement statement = null;
    ResultSet res = null;

    public DatabaseSQLiteConnection(){
        try{
            Class.forName("org.sqlite.JDBC");
            conn = DriverManager.getConnection("jdbc:sqlite:test.sqlite");
            statement = conn.prepareStatement("SELECT * from product_info;");
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }   

    public void getnPrintAllData(){
        String name, supplier, id;
        DefaultTableModel dtm = new DefaultTableModel();
        Window gui = new Window(); //My JPanel class        
        try{
            res = statement.executeQuery();
            testResultSet(res);
            ResultSetMetaData meta = res.getMetaData();
            int numberOfColumns = meta.getColumnCount();
            while (res.next())
            {
                Object [] rowData = new Object[numberOfColumns];
                for (int i = 0; i < rowData.length; ++i)
                {
                    rowData[i] = res.getObject(i+1);
                }
                dtm.addRow(rowData);
            }
            gui.jTable1.setModel(dtm);
            dtm.fireTableDataChanged();
            //////////////////////////

        }
        catch(Exception e){
            System.err.println(e);
            e.printStackTrace();
        }
        finally{
            try{
                res.close();
                statement.close();
                conn.close();
            }
            catch(Exception e){
                e.printStackTrace();
            }
        }
    }    

    public void testResultSet(ResultSet res){
        try{
            while(res.next()){
                System.out.println("Product ID: "+ res.getInt("product_id"));
                System.out.println("Product name: "+ res.getString("product_name"));
                System.out.println("Supplier: "+ res.getString("supplier"));
            }        
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

我的`testResultSet()`方法工作正常。现在，如何更改我的代码以使其正常工作，或者最简单的代码是`DefaultTableModel`什么`ResultSet`？提前致谢。

编辑：我收到`java.lang.IllegalStateException: SQLite JDBC: inconsistent internal state`错误。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-16T19:36:02.943

我认为从 的实例构建模型的最简单方法`ResultSet`可能如下。

```
public static void main(String[] args) throws Exception {
    // The Connection is obtained

    ResultSet rs = stmt.executeQuery("select * from product_info");

    // It creates and displays the table
    JTable table = new JTable(buildTableModel(rs));

    // Closes the Connection

    JOptionPane.showMessageDialog(null, new JScrollPane(table));

} 
```

方法`buildTableModel`：

```
public static DefaultTableModel buildTableModel(ResultSet rs)
        throws SQLException {

    ResultSetMetaData metaData = rs.getMetaData();

    // names of columns
    Vector<String> columnNames = new Vector<String>();
    int columnCount = metaData.getColumnCount();
    for (int column = 1; column <= columnCount; column++) {
        columnNames.add(metaData.getColumnName(column));
    }

    // data of the table
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    while (rs.next()) {
        Vector<Object> vector = new Vector<Object>();
        for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
            vector.add(rs.getObject(columnIndex));
        }
        data.add(vector);
    }

    return new DefaultTableModel(data, columnNames);

} 
```

* * *

**更新**

你喜欢用[**`javax.swing.SwingWorker`**](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)吗？你喜欢使用[**`try-with-resources`**](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句吗？

```
public class GUI extends JFrame {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GUI().setVisible(true);
            }
        });
    }

    private final JButton button;
    private final JTable table;
    private final DefaultTableModel tableModel = new DefaultTableModel();

    public GUI() throws HeadlessException {

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        table = new JTable(tableModel);
        add(new JScrollPane(table), BorderLayout.CENTER);

        button = new JButton("Load Data");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                new SwingWorker<Void, Void>() {
                    @Override
                    protected Void doInBackground() throws Exception {
                        loadData();
                        return null;
                    }
                }.execute();
            }
        });
        add(button, BorderLayout.PAGE_START);

        setSize(640, 480);
    }

    private void loadData() {
        LOG.info("START loadData method");

        button.setEnabled(false);

        try (Connection conn = DriverManager.getConnection(url, usr, pwd);
                Statement stmt = conn.createStatement()) {

            ResultSet rs = stmt.executeQuery("select * from customer");
            ResultSetMetaData metaData = rs.getMetaData();

            // Names of columns
            Vector<String> columnNames = new Vector<String>();
            int columnCount = metaData.getColumnCount();
            for (int i = 1; i <= columnCount; i++) {
                columnNames.add(metaData.getColumnName(i));
            }

            // Data of the table
            Vector<Vector<Object>> data = new Vector<Vector<Object>>();
            while (rs.next()) {
                Vector<Object> vector = new Vector<Object>();
                for (int i = 1; i <= columnCount; i++) {
                    vector.add(rs.getObject(i));
                }
                data.add(vector);
            }

            tableModel.setDataVector(data, columnNames);
        } catch (Exception e) {
            LOG.log(Level.SEVERE, "Exception in Load Data", e);
        }
        button.setEnabled(true);

        LOG.info("END loadData method");
    }

} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-08T17:22:28.760

我认为这是使用 ResultSet 填充表的最简单方法，方法如下

```
FillTable(MyTable, "select * Customers;"); 
```

并且可以制作一个非常简单的方法

```
public void FillTable(JTable table, String Query)
{
    try
    {
        CreateConnection();
        Statement stat = conn.createStatement();
        ResultSet rs = stat.executeQuery(Query);

        //To remove previously added rows
        while(table.getRowCount() > 0) 
        {
            ((DefaultTableModel) table.getModel()).removeRow(0);
        }
        int columns = rs.getMetaData().getColumnCount();
        while(rs.next())
        {  
            Object[] row = new Object[columns];
            for (int i = 1; i <= columns; i++)
            {  
                row[i - 1] = rs.getObject(i);
            }
            ((DefaultTableModel) table.getModel()).insertRow(rs.getRow()-1,row);
        }

        rs.close();
        stat.close();
        conn.close();
    }
    catch(InstantiationException | IllegalAccessException | SQLException e)
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-26T17:34:09.260

好吧，我确信这是从 ResultSet 填充 JTable 的最简单方法，无需任何外部库。我在这个方法中加入了评论。

```
public void resultSetToTableModel(ResultSet rs, JTable table) throws SQLException{
        //Create new table model
        DefaultTableModel tableModel = new DefaultTableModel();

        //Retrieve meta data from ResultSet
        ResultSetMetaData metaData = rs.getMetaData();

        //Get number of columns from meta data
        int columnCount = metaData.getColumnCount();

        //Get all column names from meta data and add columns to table model
        for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++){
            tableModel.addColumn(metaData.getColumnLabel(columnIndex));
        }

        //Create array of Objects with size of column count from meta data
        Object[] row = new Object[columnCount];

        //Scroll through result set
        while (rs.next()){
            //Get object from column with specific index of result set to array of objects
            for (int i = 0; i < columnCount; i++){
                row[i] = rs.getObject(i+1);
            }
            //Now add row to table model with that array of objects as an argument
            tableModel.addRow(row);
        }

        //Now add that table model to your table and you are done :D
        table.setModel(tableModel);
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-24T14:46:33.493

我认为这是使用 ResultSet 填充/建模表的最简单方法。 **下载并包含rs2xml.jar在您的库中[获取 rs2xml.jar](http://en.sourceforge.jp/frs/g_redir.php?m=jaist&f=%2Ffinalangelsanddemons%2Frs2xml.jar)** ..

```
import net.proteanit.sql.DbUtils;

    try
    {
    CreateConnection();
    PreparedStatement st =conn.prepareStatement("Select * from ABC;");
    ResultSet rs = st.executeQuery();
    tblToBeFilled.setModel(DbUtils.resultSetToTableModel(rs));
    conn.close();
    }
    catch(Exception ex)
    {
    JOptionPane.showMessageDialog(null, ex.toString());
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-16T17:24:15.047

类`Row`将处理数据库中的一行。

负责填充 UI 的 UpdateTask 的完整实现。

```
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JTable;
import javax.swing.SwingWorker;

public class JTableUpdateTask extends SwingWorker<JTable, Row> {

    JTable      table       = null;

    ResultSet   resultSet   = null;

    public JTableUpdateTask(JTable table, ResultSet rs) {
        this.table = table;
        this.resultSet = rs;
    }

    @Override
    protected JTable doInBackground() throws Exception {
        List<Row> rows = new ArrayList<Row>();
        Object[] values = new Object[6];
        while (resultSet.next()) {
            values = new Object[6];
            values[0] = resultSet.getString("id");
            values[1] = resultSet.getString("student_name");
            values[2] = resultSet.getString("street");
            values[3] = resultSet.getString("city");
            values[4] = resultSet.getString("state");
            values[5] = resultSet.getString("zipcode");
            Row row = new Row(values);
            rows.add(row);
        }
        process(rows); 
        return this.table;
    }

    protected void process(List<Row> chunks) {
        ResultSetTableModel tableModel = (this.table.getModel() instanceof ResultSetTableModel ? (ResultSetTableModel) this.table.getModel() : null);
        if (tableModel == null) {
            try {
                tableModel = new ResultSetTableModel(this.resultSet.getMetaData(), chunks);
            } catch (SQLException e) {
                e.printStackTrace();
            }
            this.table.setModel(tableModel);
        } else {
            tableModel.getRows().addAll(chunks);
        }
        tableModel.fireTableDataChanged();
    }
} 
```

表型号：

```
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.table.AbstractTableModel;

/**
 * Simple wrapper around Object[] representing a row from the ResultSet.
 */
class Row {
    private final Object[]  values;

    public Row(Object[] values) {
        this.values = values;
    }

    public int getSize() {
        return values.length;
    }

    public Object getValue(int i) {
        return values[i];
    }
}

// TableModel implementation that will be populated by SwingWorker.
public class ResultSetTableModel extends AbstractTableModel {
    private final ResultSetMetaData rsmd;

    private List<Row>               rows;

    public ResultSetTableModel(ResultSetMetaData rsmd, List<Row> rows) {
        this.rsmd = rsmd;
        if (rows != null) {
            this.rows = rows;
        } else {
            this.rows = new ArrayList<Row>();
        }

    }

    public int getRowCount() {
        return rows.size();
    }

    public int getColumnCount() {
        try {
            return rsmd.getColumnCount();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return 0;
    }

    public Object getValue(int row, int column) {
        return rows.get(row).getValue(column);
    }

    public String getColumnName(int col) {
        try {
            return rsmd.getColumnName(col + 1);
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return "";
    }

    public Class<?> getColumnClass(int col) {
        String className = "";
        try {
            className = rsmd.getColumnClassName(col);
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return className.getClass();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        if(rowIndex > rows.size()){
            return null;
        }
        return rows.get(rowIndex).getValue(columnIndex);
    }

    public List<Row> getRows() {
        return this.rows;
    }

    public void setRows(List<Row> rows) {
        this.rows = rows;
    }
} 
```

构建 UI 并进行数据库连接的主应用程序

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTable;

public class MainApp {
    static Connection conn = null;
    static void init(final ResultSet rs) {
        JFrame frame = new JFrame();
        frame.setLayout(new BorderLayout());
        final JTable table = new JTable();
        table.setPreferredSize(new Dimension(300,300));
        table.setMinimumSize(new Dimension(300,300));
        table.setMaximumSize(new Dimension(300,300));
        frame.add(table, BorderLayout.CENTER);
        JButton button = new JButton("Start Loading");
        button.setPreferredSize(new Dimension(30,30));
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                JTableUpdateTask jTableUpdateTask = new JTableUpdateTask(table, rs);
                jTableUpdateTask.execute();

            }
        });
        frame.add(button, BorderLayout.SOUTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/test";
        String driver = "com.mysql.jdbc.Driver";
        String userName = "root";
        String password = "root";
        try {
            Class.forName(driver).newInstance();
            conn = DriverManager.getConnection(url, userName, password);
            PreparedStatement pstmt = conn.prepareStatement("Select id, student_name, street, city, state,zipcode from student");
            ResultSet rs = pstmt.executeQuery();
            init(rs);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T17:55:48.060

JTable 构造函数接受两个参数，数据的二维对象数组和列名的字符串数组。

例如：

```
import java.awt.BorderLayout;
import java.awt.Color;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class Test6 extends JFrame {

    public Test6(){     
        this.setSize(300,300);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Mpanel m = new Mpanel();
        this.add(m,BorderLayout.CENTER);        
    }

    class Mpanel extends JPanel {       

        JTable mTable;
        private Object[][] cells = {{"Vivek",10.00},{"Vishal",20.00}};
        private String[] columnNames = { "Planet", "Radius" };
        JScrollPane mScroll;

        public Mpanel(){
            this.setSize(150,150);
            this.setComponent();
        }

        public void setComponent(){
            mTable = new JTable(cells,columnNames);
            mTable.setAutoCreateRowSorter(true);
            mScroll = new JScrollPane(mTable);

            this.add(mScroll);
        }
    }

    public static void main(String[] args){     
        new Test6().setVisible(true);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-29T18:43:23.963

这是我的方法：

```
String[] columnNames = {"id", "Nome", "Sobrenome","Email"};

List<Student> students = _repo.getAll();

Object[][] data = new Object[students.size()][4];

int index = 0;
for(Student s : students) {
    data[index][0] = s.getId();
    data[index][1] = s.getFirstName();
    data[index][2] = s.getLastName();
    data[index][3] = s.getEmail();
    index++;
}

DefaultTableModel model = new DefaultTableModel(data, columnNames);

table = new JTable(model); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-13T02:21:43.630

去这里[java 技巧博客](http://tips4java.wordpress.com/2009/03/12/table-from-database/)

然后，放入您的项目： listtabelmodel.java 和 rowtablemodel.java 使用以下代码添加另一个类：

```
 enter code here
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package comp;

import java.awt.*;
import java.sql.*;
import java.util.*;
import javax.swing.*;
import static javax.swing.JFrame.EXIT_ON_CLOSE;
import javax.swing.table.*;

public class TableFromDatabase extends JPanel {

    private Connection conexao = null;

    public TableFromDatabase() {
        Vector columnNames = new Vector();
        Vector data = new Vector();

        try {
            //  Connect to an Access Database
            conexao = DriverManager.getConnection("jdbc:mysql://" + "localhost"
                    + ":3306/yourdatabase", "root", "password");

            //  Read data from a table
            String sql = "select * from tb_something";
            Statement stmt = conexao.createStatement();
            ResultSet rs = stmt.executeQuery(sql);
            ResultSetMetaData md = rs.getMetaData();
            int columns = md.getColumnCount();

            //  Get column names
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(md.getColumnName(i));
            }

            //  Get row data
            while (rs.next()) {
                Vector row = new Vector(columns);

                for (int i = 1; i <= columns; i++) {
                    row.addElement(rs.getObject(i));
                }

                data.addElement(row);
            }

            rs.close();
            stmt.close();
            conexao.close();
        } catch (Exception e) {
            System.out.println(e);
        }

        //  Create table with database data
        JTable table = new JTable(data, columnNames) {
            public Class getColumnClass(int column) {
                for (int row = 0; row < getRowCount(); row++) {
                    Object o = getValueAt(row, column);

                    if (o != null) {
                        return o.getClass();
                    }
                }

                return Object.class;
            }
        };

        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);

        JPanel buttonPanel = new JPanel();
        add(buttonPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame("any");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                //Create and set up the content pane.
                TableFromDatabase newContentPane = new TableFromDatabase();
                newContentPane.setOpaque(true); //content panes must be opaque
                frame.setContentPane(newContentPane);

                //Display the window.
                frame.pack();
                frame.setVisible(true);
            }
        });

    }
} 
```

* * *

然后把这个类拖到你的jframe上，就完成了

它已被弃用，但它的工作原理......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-25T10:37:22.677

您必须通过单击此链接[rs2xml.jar](http://en.sourceforge.jp/frs/g_redir.php?m=jaist&f=%2Ffinalangelsanddemons%2Frs2xml.jar)下载名为 rs2xml 的 Jar，然后将其添加到您的项目库中，然后导入

```
import net.proteanit.sql.DbUtils; 
```

我只准备了一个方法作为样本

```
private void Update_table(){
    try{
        // fetch a connection
        connection = your_connection_class_name_here.getInstance().getConnection();
        if (connection != null) {
        String sql="select name,description  from sell_mode";
        pst=connection.prepareStatement(sql);
        rs=pst.executeQuery();
         your_table_name_for_populating_your_Data.setModel(DbUtils.resultSetToTableModel(rs));
        }
    }
    catch(IOException | SQLException | PropertyVetoException e){
    JOptionPane.showMessageDialog(null,e);
    }
    finally {
          if (rs!= null) try { rs.close(); } catch (SQLException e) {}
          if (pst != null) try { pst.close(); } catch (SQLException e) {}
          if (connection != null) try { connection.close(); } catch (SQLException e) {}
      }
} 
```

希望这会有所帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-06T17:15:59.827

考虑到所有因素，关于使用模块化编程的代码架构将工作得很好，并且代码更简单。写一个简单的

```
getData() function @returns a 2D array of the data from the database. 
```

将此函数传递给 JTabel() 构造函数的构造函数，即

```
JTabel myTable = new JTable(getData(),columnsArray); 
```

在这种情况下，第二个参数：columnsArray 是具有列名的一维数组

```
String[] columns = {{"ID","DataOfBirth","Age","Grade","Marks","RegNumber"}}; 
```

将 JTable 对象传递给 JScrollPane 然后你就完成了，在将 ScrollPane 添加到容器当然之后

```
JScrollPane scrollPane = new JScrollPane(myTable);

JFrame myFrame = new JFrame();
myFrame.add(scrollPane); 
```

这是一个示例函数 getData()，它查询数据库以获取稍后传递给 JTable 的数据

```
public String[][] getRecords() {
    try (Connection conect = DriverManager.getConnection("jdbc:mysql://localhost:3306/online_students_registration", "root", "")) {
        Statement stm = conect.createStatement();
        String SELECT_QUERY = "SELECT COUNT(*) FROM medicalrecords ;";
        ResultSet cursor = stm.executeQuery(SELECT_QUERY);
        while (cursor.next()) {
            rows = cursor.getInt("COUNT(*)");
            System.out.println("Table will have " + rows + " Rows");
        }
        System.err.println("Contacts row count is obtained!!");
        if (rows < 1) {
            JOptionPane.showMessageDialog(null, "There is NO DATA");
            //contactsRowsCount = 1;
            //System.out.println("Table rows succefully reset to  " + contactsRowsCount + " Rows");
            dataValues = new String[1][8];
            //dataValues[1][5] = "No Values";

            for (int i = 0; i < 1; i++) {
                for (int j = 0; j < 8; j++) {
                    if (j == 0) {
                        dataValues[i][j] = "No Details Available";
                        System.out.println("" + dataValues);
                    } else {
                        dataValues[i][j] = "...";
                        System.out.println("Contacts" + dataValues[i][j]);
                    }
                }
            }

            System.out.println("Return statement is being executed on 0 rows ");
            //return doctoredDataValues;
        } else if (rows > 0) {

            System.out.println("obtain contacts code is being run under  " + rows + " Rows");
            dataValues = new String[rows][8];    //declare array for contacts table data
            System.out.println("[ Line 1584 ]The dataValues object for the JTable succefully set");

            String SELECT_QUERY_CONTACT = "SELECT * FROM medicalrecords; ";

            //OBTAIN CONTACTS FROM DB WITH REGARD TO CONTACT CATEGORY SPECIFIED
            ResultSet contactsTableCursor = stm.executeQuery(SELECT_QUERY_CONTACT);
            //use iterator-algorithm to insert values into the JTable
            for (int i = 0; contactsTableCursor.next() && i < rows; i++) {
                for (int j = 0; j < 8; j++) {
                    dataValues[i][j] = contactsTableCursor.getString(j + 1);
                    System.out.println("Contacts" + dataValues[i][j]);
                }
            }
        }
        JOptionPane.showMessageDialog(null, "Medical Details Added Succefully!!");
    } catch (SQLException e) {

        JOptionPane.showMessageDialog(null, "Unable to Obtain contacts:Server is Offline(LINE 1568)" + e.getMessage());
    }

    return dataValues;

} 
```

# terminal - 在 mac 上通过终端安装 GPG 工具

> ID：10620450
> 
> 赞同：1
> 
> 时间：2012-05-16T14:14:20.670
> 
> 标签：terminal, gnupg

我正在尝试在我可以通过 ssh 访问的 mac mini 上安装 gpg 工具，这样我就可以安装 s3cmd。

我知道你可以在这里使用安装程序 dmg [http://www.gpgtools.org/installer/index.html](http://www.gpgtools.org/installer/index.html)

但是因为我只有 ssh 访问权限，所以我需要通过终端安装它，如果我单击源代码，我无法找到在哪里执行此操作，它会将我带到此页面[https://github.com/GPGTools/GPGTools](https://github.com/GPGTools/GPGTools)这对我没有帮助。

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:37:25.190

这几乎不是 gpg 特定的问题，应该询问 OSX 系统支持部分，但是，我会尽力回答，但仅针对为 OSX 安装 GPGTools（在 OSX 上安装其他 dmg/pkg 的过程可能会有所不同）。

```
# Move to a location we can work
cd /tmp

# Retrieve the DMG for GPGTools
wget https://github.com/downloads/GPGTools/GPGTools/GPGTools-20120318.dmg

# Mount the DMG image so we can access it's contents;
# NOTE: the last line of the output describes where the image was mounted.
hdiutil attach ./GPGTools-20120318.dmg

# Move into the the mounted image
cd /Volumes/GPGTools/

# Now begin the installer as root, with a target of "/"
sudo installer -pkg GPGTools.mpkg -target "/"

# Now we must fix the permissions of our gnupg directory, as the installer
# script seems to "fix" the permissions with the root user
sudo chown -R `whoami`: ~/.gnupg

# Now move out of the mounted volume directory so we can unmount it
cd /tmp

# Unmount the volume
hdiutil detach /Volumes/GPGTools 
```

现在应该安装 GPGTools。

# paypal - 如何从 PayPal IPN 获取多个收件人的电子邮件地址？

> ID：10620453
> 
> 赞同：0
> 
> 时间：2012-05-16T14:14:30.583
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

我正在使用自适应支付 API 的并行支付功能。在某些情况下，我有不止一个收件人。

阅读[IPN 上的贝宝参考资料](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNReference)，无法获得多个收件人电子邮件地址。这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:42:36.557

[此页面](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIPN)上的自适应付款参考说：

> transaction[n].receiver : 交易接收者的电子邮件地址

其中“n”应该是收款人的数量，在并行支付中大于 0。

**- 更新：**

好的。问题是 Paypal 正在通过 POST 发送数组中的数组。在 PHP 中，$_POST 显示一个“数组”，但无法读取。我有一个解决方法来阅读回复：

```
$postdata = file_get_contents("php://input");
mail("my@email.com", "IPN response", $postdata); 
```

这不是一个干净的解决方案，但它有效。欢迎改进；）

# nhibernate - 在 NHibernate 中获取*不是*引用的延迟加载属性

> ID：10620455
> 
> 赞同：2
> 
> 时间：2012-05-16T14:14:31.770
> 
> 标签：nhibernate

我有一个带有二进制列的实体，它在映射中设置为延迟加载。但是，在某些情况下，我们希望同时获取实体和二进制数据。我尝试使用 Linq.Fetch(x => x.BinaryData)，但这给出了无效的连接异常。可以理解，考虑到它首先不应该是一个连接。有没有办法让这个工作？我正在使用 NHibernate 3.1

这是映射：

```
Map(x => x.BinaryData)
   .CustomSqlType("image")
   .Length(int.MaxValue)
   .Not.Nullable()
   .LazyLoad();  // Wanna make sure we don't kill the app by loading the image data when we don't need it. 
```

这是抓取：

```
Linq.Where(x => x.Id == id).Fetch(x => x.BinaryData).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:20:08.483

在 HQL 中，您可以使用`fetch all properties`急切加载惰性属性。但在 NH3.1 中，Linq 查询尚未实现。我知道这个错误在 NHibernate Jira 中，因此您可以检查它是否已解决，或者您可以自己修复它。对于我们公司的原型，我修复了这个错误，但我以非常暴力的方式修复了这个错误，所以我没有向 NHibernate 项目发送补丁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:20:31.877

目前这似乎是不可能的：[https ://nhibernate.jira.com/browse/NH-2888](https://nhibernate.jira.com/browse/NH-2888)

所以，你必须使用 HQL ：

```
var post = session.CreateQuery("from Post fetch all properties")
    .SetMaxResults(1)
    .UniqueResult<Post>(); 
```

来源：[http ://ayende.com/blog/4377/nhibernate-new-feature-lazy-properties](http://ayende.com/blog/4377/nhibernate-new-feature-lazy-properties)

# html - IE8 中的虚边距？

> ID：10620457
> 
> 赞同：1
> 
> 时间：2012-05-16T14:14:47.580
> 
> 标签：html, css, internet-explorer-8

![在此处输入图像描述](../Images/cd3c8b10c701992b787912b0d58cce29.png)

有谁知道为什么图像没有与容器的右下角对齐，而是有某种假想的边距导致它与按钮重叠？

这*仅*在 IE8 中出现，在任何其他浏览器中查看页面，它看起来都很棒。

[**现场示例供您检查。**](http://suchen.mobile.de/auto-inserat/mercedes-benz-c-220-cdi-t-modell-avantgarde-avantgarde-autom-sulz-am-neckar/157995215.html)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:48:37.573

将第 1616 行的 css 更改为“text-align:right”应该可以修复它。

```
.dealerLogo {
   text-align: right;
   position: absolute;
   bottom: 0;
   right: 0;
   cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:48:57.900

我不知道*为什么*会这样，我也没有努力去找出答案。

要解决此问题，请`.vcard .dealerImages .dealerLogo`更改`text-align: center`为`text-align: right`. 这在其他浏览器中没有任何区别，但修复了 IE8。

您还需要添加`z-index: 1`,`.vcard .dealerImages .dealerContact`以保持橙色按钮的最右侧部分正常工作。

# logging - GM_log 和其他 GM 函数在 Greasemonkey 脚本中不起作用

> ID：10620458
> 
> 赞同：7
> 
> 时间：2012-05-16T14:14:52.127
> 
> 标签：logging, firebug, greasemonkey

我在 Firefox 中创建了一个“Hello World”Greasemonkey 脚本，它只包含一行代码：

```
GM_log("Hello World"); 
```

这似乎不起作用，至少它没有在我的萤火虫控制台中产生任何输出。
与其他 GM_... 功能相同，如 GM_wait

当我更换：

```
GM_log("Hello World"); 
```

和：

```
alert("Hello World") 
```

它起作用了（所以脚本头不是问题）。

我还将以下`about:config`选项设置为 true：

*   `javascript.options.showInConsole`
*   `extensions.firebug.showChromeErrors`
*   `extensions.firebug.showChromeMessages`

是否有一些其他设置需要更改以使 GM_... 函数在 Greasemonkey 脚本中工作？

我是否必须更改 GM_log 消息的其他 firebug 设置才能在 firebug 控制台中显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-20T11:55:18.687

这样做的原因是一个新的特殊*元数据块命令*：**@grant**，在 GM 1.0 中添加。如果您需要 GM_log 工作，则必须将此行添加到您的脚本 Metadata Block: `"// @grant GM_log"` 中，否则它将无法工作。[您可以在http://wiki.greasespot.net/@grant](http://wiki.greasespot.net/@grant)阅读有关此功能的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T23:57:59.013

你从哪里得到的`GM_wait`？那不是[GM功能](http://wiki.greasespot.net/Category:API_Reference)；有些人只是将他们的临时功能命名为。请注意[GM 版本 0.9.19 破坏了很多计时功能](https://stackoverflow.com/a/10553751/331508)，但这在 0.9.20 版本中已修复。

至于`GM_log()`，这行得通，但它并不总是把它的信息放在一个合理的位置。在更高版本的 Greasemonkey 上，`GM_log()`写入 Firefox 的错误控制台——您可以通过按打开它`Ctrl``Shift``J`。
但是，[正如评论家所说](https://stackoverflow.com/a/10623970/331508)，没有充分的理由再使用`GM_log`了。它的功能有限，不能很好地移植。

现在所有好的浏览器都支持原生`console.log()`（不需要 Firebug），但是在 Firefox 上，这也倾向于[输出到 Firefox 的错误控制台](https://stackoverflow.com/a/10135917/331508)。

要使用[Firebug 出色的日志记录功能](http://getfirebug.com/wiki/index.php/Console_API)（值得一看），您目前必须`unsafeWindow`像这样使用：

```
unsafeWindow.console.clear ();
unsafeWindow.console.log ("Hello World!"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T17:52:46.167

我建议您忘记 GM_log() 并使用：

```
console.log('hello world'); 
```

[http://wiki.greasespot.net/GM_log](http://wiki.greasespot.net/GM_log)

就像它说的“因为 GM_log 一次只会显示一个字符串，所以安装了 Firebug 的用户可能更喜欢使用 console.log。”

但是关于你的问题，我说不出为什么。

# algorithm - 生成 ai=1 的线性丢番图方程的所有解的高效算法

> ID：10620461
> 
> 赞同：4
> 
> 时间：2012-05-16T14:15:08.693
> 
> 标签：algorithm, math, equation, linear-programming, diophantine

我正在尝试为给定的 H 生成以下方程的所有解。

随着 H=4 ：

```
1) ALL solutions for x_1 + x_2 + x_3 + x_4 =4
2) ALL solutions for x_1 + x_2 + x_3 = 4
3) ALL solutions for x_1 + x_2 = 4
4) ALL solutions for x_1 =4 
```

对于我的问题，总是有 4 个方程需要求解（独立于其他方程）。总共有 2^(H-1) 个解。对于上一个，以下是解决方案：

```
1) 1 1 1 1
2) 1 1 2 and 1 2 1 and 2 1 1
3) 1 3 and 3 1 and 2 2
4) 4 
```

这是解决问题的R算法。

```
library(gtools)
H<-4
solutions<-NULL

for(i in seq(H))
{
    res<-permutations(H-i+1,i,repeats.allowed=T)
    resum<-apply(res,1,sum)
    id<-which(resum==H)

    print(paste("solutions with ",i," variables",sep=""))
    print(res[id,])
} 
```

但是，该算法进行的计算超出了需要。我相信有可能走得更快。我的意思是不生成总和为 > H 的排列

对于给定的 H 有更好的算法的想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T04:32:06.877

与许多问题一样，当某些术语已知时，解决方案变得更容易找到/研究。

这些问题的解决方案被称为**整数组合**，它是**整数分区**的泛化（其中顺序无关紧要，即只考虑在排列下唯一的答案）。

例如，4的整数*分区*为：1+1+1+1、1+1+2、1+3、2+2、4，而4的整数*组成*为：1+1+1+1， 1+1+2、1+2+1、2+1+1、1+3、3+1、2+2、4。

有一些现成的实现（对与语言无关的算法的引用如下）：

*   由于您在**R**中工作，[因此该`partitions`包](http://cran.r-project.org/web/packages/partitions/index.html)可以为您生成分区。您需要找到每个分区的唯一排列才能获得组合（请参阅[这个 SO question](https://stackoverflow.com/questions/9422945/generate-all-possible-permutations)）。
*   如果您能够使用另一种语言（通过与 R 接口，或通过预先计算答案），那么**Mathematica**具有计算合成的功能：[`Compositions`](http://reference.wolfram.com/mathematica/Combinatorica/ref/Compositions.html).
*   **Sage**是免费的（与 Mathematica 不同），并且还具有生成内置合成的功能：[`Compositions`](http://www.sagemath.org/doc/reference/sage/combinat/composition.html). 值得注意的是，这是使用[*生成器*](http://alexbowe.com/streams/)实现的，它可以更有效地使用内存。
*   **Python**：请参阅[此](https://stackoverflow.com/questions/10244180/python-generating-integer-compositions)Stack Overflow 问题（生成分区，然后您可以对其进行置换）。[我在这里](https://github.com/alexbowe/simplex/blob/master/simplex.py#L106)做了类似的事情（尽管它用于`itertools`查找排列，然后我需要过滤独特的排列，因此可以通过使用专门用于*multisets*的排列算法更有效地完成此操作）。

为了更好地理解**算法**（或自己实现），您可以查看这本不完整但有用的电子书：[Frank Ruskey的](http://en.wikipedia.org/wiki/Frank_Ruskey)[*组合生成*](http://www.1stworks.com/ref/RuskeyCombGen.pdf)，它展示了如何在*恒定摊销时间*(CAT) 中生成分区。由于您想要组合，您还可以使用 CAT 算法生成排列（也在书中）来生成每个整数分区的排列。

 **Ruskey*还解释了如何对它们进行*排名*和取消排名，这对于存储/散列结果非常方便。

 **我相信 Knuth 的The Art of Computer Programming 第 4A 卷*也很好地介绍了这些内容，如果你碰巧有的话。

[ElKamina 建议递归解决它](https://stackoverflow.com/a/10621500/477839)是一个很好的建议，但我不会对大 H 使用这种方法；由于[R（以及 Python）没有优化 tail-calls](https://stackoverflow.com/questions/13208963/tail-recursion-on-r-statistical-environment)，您最终可能会出现堆栈溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T01:42:13.443

这是C++ 中的一个[实现](http://ideone.com/4Q2b1#ul_inouterr)

**废话.cpp：**

```
#include <stdlib.h>
#include <iostream>
#include <vector>

using namespace std;

vector<int> ilist;

void diophantine(int n)
{
    size_t i;
    if (n==0) 
    {
        for (i=0; i < ilist.size(); i++) cout << " " << ilist[i];
        cout << endl;
    }
    else
    {
        for (i=n; i > 0; i--)
        {
            ilist.push_back(i);
            diophantine(n-i);
            ilist.pop_back();
        }
    }          
}

int main(int argc, char** argv)
{
    int n;    

    if (argc == 2 && (n=strtol(argv[1], NULL, 10)))
    {
        diophantine(n);
    }
    else cout << "usage: " << argv[0] << " <Z+>" << endl;

    return 0;
} 
```

命令行的东西：

```
$ g++ -oblah blah.cpp
$ ./blah 4
 4
 3 1
 2 2
 2 1 1
 1 3
 1 2 1
 1 1 2
 1 1 1 1
$ 
```

这是一个[实现](http://ideone.com/SoFbX)`bash`：

**废话.sh：**

```
#!/bin/bash

diophantine()
{
    local i
    local n=$1
    [[ ${n} -eq 0 ]] && echo "${ilist[@]}" ||
    {
        for ((i = n; i > 0; i--))
        do
            ilist[${#ilist[@]}]=${i}
            diophantine $((n-i))
            unset ilist[${#ilist[@]}-1]
        done               
    }    
}

RE_POS_INTEGER="^[1-9]+$"
[[ $# -ne 1 || ! $1 =~ $RE_POS_INTEGER ]] && echo "usage: $(basename $0) <Z+>" ||
{
    declare -a ilist=
    diophantine $1
}
exit 0 
```

这是Python中的一个[实现](http://ideone.com/nj4CF)

**废话.py：**

```
#!/usr/bin/python

import time
import sys

def output(l):
    if isinstance(l,tuple): map(output,l) 
    else: print l,

#more boring faster way -----------------------
def diophantine_f(ilist,n):
    if n == 0:
        output(ilist)
        print
    else: 
        for i in xrange(n,0,-1):
            diophantine_f((ilist,i), n-i)

#crazy fully recursive way --------------------
def diophantine(ilist,n,i):
    if n == 0:
        output(ilist)
        print
    elif i > 0:
        diophantine(ilist, n, diophantine((ilist,i), n-i, n-i))
    return 0 if len(ilist) == 0 else ilist[-1]-1 

##########################
#main
##########################
try:

    if    len(sys.argv) == 1:  x=int(raw_input())
    elif  len(sys.argv) == 2:  x=int(sys.argv[1])
    else: raise ValueError 

    if x < 1: raise ValueError

    print "\n"
    #diophantine((),x,x)
    diophantine_f((),x)    
    print "\nelapsed: ", time.clock()

except ValueError:
    print "usage: ", sys.argv[0], " <Z+>"
    exit(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:13:29.930

我假设您没有尝试同时求解方程。

您可以使用递归或动态编程来解决这个问题。

如果您使用递归，只需为第一个变量分配一个有效值并递归求解其余部分。

这里n是变量的数量，sum是总和。cursol 是部分解决方案（最初设置为 [] ）

```
def recSolve(n,sum, cursol):
    if n==1:
        print cursol + [sum]
        return
    if n == sum:
         print cursol + [1 for i in range(n)]
         return
    else:
        for i in range(1, sum-n+2):
             recsolve(n-1, sum-i, cursol+[i]) 
```

如果要使用动态规划，则必须记住 n 和 sum 的每个组合的解集。**

# java - 以编程方式重新安装应用程序 apk 而无需下载

> ID：10620464
> 
> 赞同：12
> 
> 时间：2012-05-16T14:15:18.013
> 
> 标签：java, android

由于[这个恼人的 Android 限制](http://code.google.com/p/android/issues/detail?id=25906&q=reporter:Lee.Wilmot&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)，我需要用户重新安装我的应用程序，以便其他应用程序检测到清单权限。

这已经让用户感到沮丧，但此外，我看不到从存储在 /data/app 中的 apk 重新安装我的应用程序的方法，因此我必须在触发之前将相同的版本下载到存储卡中通常的安装意图。

我急切地等待有人告诉我我遗漏了一些明显的东西！我画了一个空白...

提前致谢。

如果您希望看到问题得到解决，请给问题加注星标！干杯。

* * *

**编辑**：考虑到@hackbod 的注释，您可以使用以下代码启动安装对话框。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(this.getApplicationInfo().sourceDir)),
"application/vnd.android.package-archive");
startActivity(intent); 
```

在我的 Jelly Bean 设备上，这提供了两个选项：*包安装程序*和*验证并安装*。我不知道后者是否会处理以下问题：

*   *以这种方式安装您的应用程序可能会从 Play 商店中删除它的所有权*

我的申请是免费的，所以我无法测试以下付费问题：

*   *但是请注意，如果您的应用程序被前向锁定（由于应用程序加密，这对于以 JB 开头的所有付费应用程序都是不可避免的），那么这将不起作用，因为您的应用程序可执行文件不被其他人读取*

尽管 hackbod 以“其他人可读”结束，这表明如果您通过自己的代码执行此操作，那么对于您自己的应用程序，它是可读的吗？如果您可以对此进行测试，请纠正我，我错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:38:25.527

可以想象，您可以通过 Context.getApplicationInfo().sourceDir 获取 .apk 的路径，然后使用该路径启动应用安装程序。但是，如果您的应用程序被前向锁定（由于应用程序加密，这对于以 JB 开头的所有付费应用程序来说都是不可避免的），那么这将不起作用，因为您的应用程序可执行文件不被其他人读取。在这种情况下，您需要将 .apk 复制到世界可读的地方（例如外部存储中）并从那里安装它。

但是，无论您在这里做什么，这都会产生一些不可避免的非常负面的后果：

*   从您的应用程序进行任何类型安装的唯一方法是通过侧面加载 UI，这 (a) 对用户来说将是一种非常可怕的体验，并且 (b) 将要求用户打开侧面-加载能够继续。
*   以这种方式安装您的应用程序可能会从 Play 商店中删除它的所有权（因为它不再是安装它的人）。例如，这可能意味着用户无法再通过 Play 商店向您报告崩溃或 ANR，或其他负面后果。我不确定这里到底会发生什么问题，但我真的不认为这会好起来。

最终，我只是非常不建议这样做。您需要什么许可才能迫使您这样做？出于许多原因，我不建议第三方应用程序在大多数情况下声明自己的权限，因为在权限方面存在很多糟糕的用户体验，只有在可能需要它们之后才知道。

# css - 不同浏览器中的默认输入 CSS 更改。为什么？

> ID：10620467
> 
> 赞同：0
> 
> 时间：2012-05-16T14:15:21.690
> 
> 标签：css, forms, browser, input

我创建了一些表单，但我无法弄清楚为什么在某些浏览器和操作系统中，我的输入按钮显示不同。

在此处查看输入按钮： [http ://www.41q.org/admin](http://www.41q.org/admin)

它应该显示为正方形，但我得到了一个圆形的默认按钮。想不通。我的 CSS 不工作。

我应该更改类型吗？

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:29:00.093

这可能是一个IE问题。

我喜欢使用 input、option、textarea 等标签定义正文字体系列或字体样式，如下所示：

```
body, input, select, option, textarea {
  color: #fff;
  font-family: arial;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:47:27.243

尝试使用 normalize.css (http://necolas.github.com/normalize.css/) 或 reset.css (http://meyerweb.com/eric/tools/css/reset/)。然后针对每个浏览器进行优化。

# iphone - 在故事板中隐藏导航栏

> ID：10620471
> 
> 赞同：34
> 
> 时间：2012-05-16T14:15:37.810
> 
> 标签：iphone, ios, ipad, uinavigationbar

谁能告诉我如何在我的故事板中隐藏导航栏。下面的代码在模拟器中运行时运行良好，但它仍然出现在我的故事板中，这真的让我很烦，因为它弄乱了我的图像位置。任何人都可以帮忙吗？

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.navigationController setNavigationBarHidden:YES animated:animated];
}

- (void) viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.navigationController setNavigationBarHidden:NO animated:animated];
} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-16T14:21:22.830

![enter image description here](../Images/2eedbbf55d7967454c3e14c1b179cba5.png)

Click on the controller that has the top bar navigate to the properties bar on the right hand side of Xcode. There is a drop down labeled Top Bar (as shown above) change this drop down to none.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-07-17T04:19:57.510

You have to click the actual navigation controller, not the view controller. On the view controller the navigation drop down doesn't show up, but you can still achieve this by selecting Top Bar: none in Simulated Metrics.

![Top Bar: None](../Images/b0a8421ea87c27ddd6557d754db15bc9.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-16T14:20:25.020

在 Storyboard 视图中，只需选择 NavigationController 场景并取消选中 Shows Navigation Bar (Attributes Inspector)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-29T10:10:49.280

使用**Swift 3 的解决方案：**

*步骤 1.*使用属性检查器从 Storyboard 中隐藏导航栏： [![在此处输入图像描述](../Images/d22a458dcf4f96f9550964d3a9d4d622.png)](https://i.stack.imgur.com/tjWlr.png)

*第 2 步。*将以下代码添加到您的`ViewController`：

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    // Hide the navigation bar on the this view controller
    self.navigationController?.setNavigationBarHidden(true, animated: animated)
}

override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)

    // Show the navigation bar on other view controllers
    self.navigationController?.setNavigationBarHidden(false, animated: animated)
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-06-27T07:29:24.817

```
Follow these step:    
    1: Go to storyboard
    2: Select navigation controller
    3: Goto Attribute inspector
    4: Under navigation controller bar visibility **Uncheck the Shows navigation Bar*** 
```

[![在此处输入图像描述](../Images/795aac97d77fbae782da0aac78490d0e.png)](https://i.stack.imgur.com/t3oI1.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-25T13:39:22.390

对于特定的 ViewController，将 topbar 设置为`none`

[![在此处输入图像描述](../Images/a07842714867865535e7566927fd870e.png)](https://i.stack.imgur.com/HSoRx.png)

# java - 从 Java 中的 void 方法返回值

> ID：10620473
> 
> 赞同：0
> 
> 时间：2012-05-16T14:15:46.207
> 
> 标签：java

我有一个方法：

```
public void dbQuery(String query, String what) {
    try {
        Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery(query);

        if(what.equals("temp_table")) {
            String temporary_table = rs.getString("table_name_temp");
            System.out.println(temporary_table);
            return;
        }

        }

    catch (Exception e) {
        e.printStackTrace();
        }

    finally {
        if (rs != null) rs.close();
        if (stmt != null) stmt.close();
        }

}

String query = "EXEC temptables.dbo.create_temp_cdr 'SIP'";
String temporary_table = db.dbQuery(query,"temp_table"); 
```

我如何获得 a 的回报`void`以在另一个中使用它`db.dbQuery()`？

PS：我需要一个值，`dbQuery()`这样我就可以构造另一个来再次`query`调用`dbQuery()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T14:16:56.357

> 如何获得 void 返回以在另一个 db.dbQuery() 中使用它？

你说的“回归虚无”是什么意思？如果您的意思是“返回值”，那么*没有*一个 - 这就是方法被声明为`void`.

如果你*想*返回一个值，那么不要让它成为一个 void 方法......鉴于此：

```
String temporary_table = db.dbQuery(query,"temp_table"); 
```

看起来您只想更改`dbQuery`为 return `String`。`what` *请注意，如果不是* ，您需要确定要返回的内容`temp_table`。（您还应该修复您的异常处理 - 只是将堆栈跟踪打印到标准输出然后继续不管这几乎*从来都不*是正确的方法。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:06:51.060

你可以让你的方法不是无效的，并且有一个返回类型，然后你可以有这条线

```
return temporary_table; 
```

这将返回temporary_table 变量。

另一种方法是通过引用该方法。例如，您可以将 StringBuilder 对象传递给该方法。方法中对该对象的任何更改也将在方法返回后应用。

```
public void addToString(StringBuilder query, String toAdd) {
    query.append(toAdd);
} 
```

调用此方法

```
StringBuilder query = new StringBuilder("start");
System.out.println(query.toString());
addToString(query, "end");
System.out.println(query.toString()); 
```

将有以下输出：

> 开始
> 开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T19:08:43.157

void 方法是不返回任何内容的方法。但是，您的要求似乎必须在上一层使用此方法中生成的值。一个明显的解决方案是将其返回类型从 void 更改为 String。但是，如果您不想这样做，只需将一个字符串参数传递给您的方法。String 是一个对象，因此当您将它传递给一个方法时，实际上是将该对象的引用传递给它。只需在此字符串中设置您生成的值，您就可以使用该字符串变量在上一层访问它（它有点类似于 C 中的通过引用传递）。我希望这个解决方法能解决你的问题。如果我错了，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:19:20.527

您不能从定义为的方法返回值`void`- 根据定义，这意味着它不返回任何值。

如果你`return;`在方法中看到一条语句`void`，基本上意味着这将结束当前方法并将处理返回给调用者。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:19:59.033

我会让你的方法字符串而不是布尔值。Void 永远不会返回任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-18T13:00:05.480

事实上，他希望在 VB 中拥有类似的功能。首先，像往常一样创造你的空虚。

```
private  Void getheightoflistview(ListView nameOfListView){
   //do whatever you want to do
    int numberOfItems = nameOfListView.getCount();
    //You want to return the numberOfItems 
} 
```

所以如果你想返回一个 Integer 值，只需将 Void 替换为 Integer

```
private  Integer getheightoflistview(ListView nameOfListView){
   //do whatever you want to do
    int numberOfItems = nameOfListView.getCount();
    //You want to return the numberOfItems 
    return numberOfItems; //this is the Integer you want to return

} 
```

并添加返回值

# java - 定时操作产生不可能的结果

> ID：10620474
> 
> 赞同：0
> 
> 时间：2012-05-16T14:15:48.297
> 
> 标签：java, performance, unit-testing, testing, timer

我正在尝试将几种方法相互进行基准测试，但由于某种原因，我得到了不可能的结果。显然，某些操作所花费的时间比整个应用程序运行的时间要长得多。我已经全部搜索过了，由于某种原因我无法确定我做错了什么，所以很抱歉，但我发布了整个方法：-/

```
public static void parseNumber() throws Exception {
  long numberHelperTotal = 0;
  long numberUtilsTotal = 0;
  long regExTotal = 0;
  long bruteForceTotal = 0;
  long scannerTotal = 0;
  int iterations = 10;
  for (int i = 0; i < iterations; i++) {
    long numberHelper = 0;
    long numberUtils = 0;
    long regEx = 0;
    long bruteForce = 0;
    long scanner = 0;
    for (int j = 0; j < 999999; j++) { // I know 999999 is a bit overkill... I've tried it with smaller values and it still yields impossible results
      Date start; //I think it may have something to do with the way I'm doing start and end...
      Date end;
      Random rand = new Random();
      String string = ((rand.nextBoolean()) ? "" : "-") + String.valueOf(rand.nextDouble() * j);

      //NumberHelper
      start = new Date();
      NumberHelper.isValidNumber(double.class, string);
      end = new Date();
      numberHelper += end.getTime() - start.getTime();

      //NumberUtils
      start = new Date();
      NumberUtils.isNumber(string);
      end = new Date();
      numberUtils += end.getTime() - start.getTime();

      //RegEx
      start = new Date();
      Pattern p = Pattern.compile("^[-+]?[0-9]*\\.?[0-9]+$");
      Matcher m = p.matcher(string);
      if (m.matches()) {
        Double.parseDouble(string);
      }
      end = new Date();
      regEx += end.getTime() - start.getTime();

      //Brute Force (not international support) and messy support for E and negatives
      //This is not the way to do it...
      start = new Date();
      int decimalpoints = 0;
      for (char c : string.toCharArray()) {
        if (Character.isDigit(c)) {
          continue;
        }
        if (c != '.') {
          if (c == '-' || c == 'E') {
            decimalpoints--;
          } else {
            //return false
            //because it should never return false in this test, I will throw an exception here if it does.
            throw new Exception("Brute Force returned false! It doesn't work! The character is " + c + " Here's the number: " + string);
          }
        }
        if (decimalpoints > 0) {
          //return false
          //because it should never return false in this test, I will throw an exception here if it does.
          throw new Exception("Brute Force returned false! It doesn't work! The character is " + c + " Here's the number: " + string);
        }
        decimalpoints++;
      }
      end = new Date();
      bruteForce += end.getTime() - start.getTime();

      //Scanner
      start = new Date();
      Scanner scanNumber = new Scanner(string);
      if (scanNumber.hasNextDouble()) {//check if the next chars are integer
        //return true;
      } else {
        //return false;
        //because it should never return false in this test, I will throw an exception here if it does.
        throw new Exception("Scanner returned false! It doesn't work! Here's the number: " + string);
      }
      end = new Date();
      scanner += end.getTime() - start.getTime();

      //Increase averages
      numberHelperTotal += numberHelper;
      numberUtilsTotal += numberUtils;
      regExTotal += regEx;
      bruteForceTotal += bruteForce;
      scannerTotal += scanner;
      //For debug:
      //System.out.println("String: " + string);
      //System.out.println("NumberHelper: " + numberHelper);
      //System.out.println("NumberUtils: " + numberUtils);
      //System.out.println("RegEx: " + regEx);
      //System.out.println("Brute Force: " + bruteForce);
      //System.out.println("Scanner: " + scanner);
    }
  } 
```

样本输出：

```
First: NumberUtils - 83748758 milliseconds
Second: Brute Force - 123797252 milliseconds
Third: NumberHelper - 667504094 milliseconds
Fourth: RegEx - 2540545193 milliseconds
Fifth: Scanner - 23447108911 milliseconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:19:01.690

Use `System.nanoTime()`，它实际上是用于“在你的跑步过程中计算两次之间的差异”之类的事情。

或者，一个*更好*的主意 - 使用一个预先构建的 Java 基准测试框架，该框架已经知道如何预热 JIT 以及您需要做的所有其他事情以获得准确的基准测试结果。 [卡尺](http://caliper.googlecode.com)可能是最著名的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:50:58.290

以下 5 行似乎位置不正确：

```
//Increase averages
numberHelperTotal += numberHelper;
numberUtilsTotal += numberUtils;
regExTotal += regEx;
bruteForceTotal += bruteForce;
scannerTotal += scanner; 
```

尝试将它们放在`for (int j ...`循环之外。

# android - 简单的游标适配器查询

> ID：10620475
> 
> 赞同：1
> 
> 时间：2012-05-16T14:15:52.877
> 
> 标签：android, simplecursoradapter

我创建了一个 SimpleCursorAdapter。我想要一种比较两行的方法。假设这些列称为 realData pracData。如果我想比较两列，我将如何编写语句来实现这一点。

下面是我的 SimpleCursorAdapter 的代码

```
 db = new DBAdapter(this);
    db.open();

 //   db.insertContact("how do you print hello world", "print 'hello world';", "print hello", "hello", 1);

  //  db.insertContact("what is x=2 and y=5", "5", "7", "2", 2);
    db.close();

    /*
     *  Open the same SQLite database
     *  and read all it's content.
     */
    db = new DBAdapter(this);
     db.open();

    Cursor cursor = db.getAllContacts();
    startManagingCursor(cursor);

    String[] from = new String[]{DBAdapter.question, DBAdapter.possibleAnsOne};

    int[] to = new int[]{R.id.label, R.id.TextView01};

    SimpleCursorAdapter cursorAdapter =
        new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

    listContent.setAdapter(cursorAdapter);

    db.close(); 
```

这是来自 ArrayAdapter

```
if (s.startsWith("how do you print hello world") || s.startsWith("iPhone")
                || s.startsWith("Solaris")) {
            imageView.setImageResource(R.drawable.plus); 
```

我想做类似的事情，但比较数据库中的两行。

```
public class MyAdapter extends SimpleCursorAdapter  {
private Context context;
private int layout;
    public MyAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to) {
        super(context, layout, c, from, to);
        this.context = context;
        this.layout = layout;
        // TODO Auto-generated constructor stub
    }

    @Override
    public void bindView(View v, Context context, Cursor c) {
          // do your magic inhere :) the cursor will be at the correct row position
        System.out.println("please select a cursor");
        // int nameCol = c.getColumnIndex(People.NAME);
       //  ListView listContent = (ListView)findViewById(R.id.contentlist);
       //     ImageView imageView = (ImageView)findViewById(R.id.ImageView01);
         int nameCol = c.getColumnIndex(DBAdapter.question);
         System.out.println("What is the column index" +nameCol);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:04:35.633

扩展 SimpleCursorAdapter 并覆盖 bindView 应该可以工作。我通常扩展 CursorAdapter，但尝试一些

```
public class MyAdapter extends SimpleCursorAdapter {

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
          TextView label = view.findViewById(R.id.yourid);
          // and then do something with cursor.getString(columnindex);
    }
} 
```

# web-config - 在 Web.Config 中应用它们时排除文件夹

> ID：10620479
> 
> 赞同：0
> 
> 时间：2012-05-16T14:16:17.603
> 
> 标签：web-config, themes

我使用 Asp.net 4，在我的 Web.Config 中（在我网站的根目录中）我有这个代码

```
<pages enableViewState="true" theme="Cms-FE-01" validateRequest="true">
        </pages> 
```

我需要排除对子文件夹应用 theme="Cms-FE-01" 。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:18:20.393

我解决了在子文件夹中添加具有此设置的新 web.config 的问题

```
<pages enableViewState="true" theme="" validateRequest="true">
        </pages> 
```

如果你们知道另一种方式，请发布。谢谢！

# tfs - 非 AD 用户访问 Team Foundation Server (TFS)

> ID：10620481
> 
> 赞同：0
> 
> 时间：2012-05-16T14:16:31.117
> 
> 标签：tfs, active-directory

我们最近安装了 TFS 2010。我们的 Active Directory 用户（即我公司的员工）可以正常访问它。

但是，我们也有在办公室工作的承包商，他们没有 AD 帐户。我很难让非 AD 用户通过 Visual Studio 连接到 TFS。承包商在同一个局域网上，但没有 AD 帐户，我们这样做是为了限制对网络上其他资源的访问。

我在服务器上为承包商创建了本地 Windows 用户帐户。使用本地帐户，他们可以访问 TFS Web 前端，但仍无法通过 Visual Studio 连接。

有没有办法做到这一点？承包商是否需要对服务器本身进行远程桌面访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:27:37.897

你绝对应该给你的承包商 AD 账户。如果要限制对内部资源的访问，可以使用 AD 中的组织单位，例如

*   我的公司
    *   雇员
    *   承包商

并根据链接到 OU 的组设置对资源的访问限制。

授予对服务器的远程访问权限只会产生另一组问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T14:34:00.623

当您安装非 Express 版本的 TFS 时，您需要一个 AD 进行身份验证，您无法从非 AD 帐户正确使用 TFS 服务器。

从这一点来看，您有两个解决方案：

1.  为承包商创建 AD 帐户（每个公司一个或每个用户一个，您的电话）。
2.  在您的域和承包商的域之间创建域信任。有关更多信息，请参阅[此文档](http://msdn.microsoft.com/en-us/library/ms253081.aspx)。

我不太清楚远程桌面部分，请解释一下。

# java - 使用多个条件搜索对象

> ID：10620484
> 
> 赞同：0
> 
> 时间：2012-05-16T14:16:44.537
> 
> 标签：java, search, parameters, criteria

所以，这是我的问题。我有这样的对象

```
public class FooClass{
    private int fooInt;
    private String fooString, fooString_2;
} 
```

我必须搜索它们，通过它们的任何一个参数来区分它们。另外，我需要将它们存储为二进制文件（`ObjectOutputStream`等）。到目前为止，我曾想过使用多个`ArrayList`，或多个，`HashMap`但后者的问题是我需要执行部分字符串匹配，（`beginsWith`），所以`HashMap`我认为这将毫无用处。无论如何，拥有多个相同对象的列表似乎很可怕实施条款，在这一点上，我真的陷入困境并且没有想法。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:25:37.170

我找到了这篇文章：[使用搜索引擎技术进行对象持久性](http://www.javaworld.com/javaworld/jw-01-2005/jw-0103-search.html?page=2)（我还没有完整地阅读它）但我认为这是您正在寻找的解决方案。该解决方案基于 Lucene。

如果您决定使用 Lucene，那么您应该查看那些[教程](http://www.lucenetutorial.com/index.html)。本教程的一部分还讨论了[基本概念](http://www.lucenetutorial.com/basic-concepts.html)，这将帮助您确定此解决方案是否适合您。

如果您希望将数据表示为 Java 对象（我认为这是您真正需要的解决方案），最好使用[Compass](http://compass-project.org/)（构建在 Lucene 之上）。它支持自动编组，这意味着 Compass 在运行时从对象模型中提取所需的属性，并将所需的元数据插入到搜索引擎索引中。看看**OSEM -** [Compass](http://www.compass-project.org/docs/2.2.0/reference/pdf/compass-reference.pdf)中的对象/搜索引擎映射[参考](http://www.compass-project.org/docs/2.2.0/reference/pdf/compass-reference.pdf)。

# javascript - 在页面加载的下拉列表中将动态值设置为默认值

> ID：10620485
> 
> 赞同：0
> 
> 时间：2012-05-16T14:16:45.530
> 
> 标签：javascript, html, salesforce, visualforce

我有一个页面，它为每个用户加载不同的值，为了获得这个值，我使用了一个 visualforce 标签，因为它在 Salesforce 中运行。我只有 2 个选项，我让用户可以选择一个选项，但我已经知道该选项的值对于打开页面的用户来说是什么，所以我想预先选择该值并为他们提供更改它的选项。

我目前正在这样做，问题是这两次创建了相同的选项，看起来不太好，但它预先选择了正确的值，问题是

如何在不创建两次相同选项的情况下预先选择正确的值？

```
 <select id="product" name="liveagent.prechat:Product" style="width:220px" tabindex="5">

                    <option selected="selected">{!$User.Product__c}</option>
                    <option value="Product 1">Product 1</option>
                    <option value="Product 2">Product 2</option>

 </select> 
```

//请记住 {!$User.Product__c} 可以是产品 1 或产品 2

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:30:28.383

可能有更好的方法，但您可能想试试这个：

```
<apex:variable var="SelectedProduct" value="{!IF($User.Product__c=='Product 1','Product 1','Product 2')}" />
<apex:variable var="OtherProduct" value="{!IF($User.Product__c=='Product 2','Product 1','Product 2')}" />

<select id="product" name="liveagent.prechat:Product" style="width:220px" tabindex="5">
    <option value="{!SelectedProduct}" selected="selected" >{!SelectedProduct}</option>
    <option value="{!OtherProduct}" >{!OtherProduct}</option>
</select> 
```

以下是对逻辑的一般解释：

*   如果`User.Product__c`是“产品 1”，则将“产品 1”设置为`SelectedProduct`. 因为`User.Product__c`不是“产品 2”，所以将“产品 2”设置为`OtherProduct`.
*   如果`User.Product__c`不是“产品 1”，则将“产品 2”设置为`SelectedProduct`. 因为`User.Product__c`是“产品 2”，所以将“产品 1”设置为`OtherProduct`.

当然，如果你需要两个以上的选择选项，这个方法就会变得复杂很多。

希望有帮助！

# c# - C# 安装 - 同时在多台计算机上安装软件

> ID：10620486
> 
> 赞同：1
> 
> 时间：2012-05-16T14:16:46.470
> 
> 标签：c#, installation, upgrade, installation-package, silent-installer

我有 ac# 应用程序，它将安装在几台不同的网络计算机上。软件有时会发生变化。我想知道是否有办法从服务器计算机同时在所有网络计算机上升级或安装新版本的软件。

我将触发安装，因此不需要检查新版本或类似的东西。

所以，当我触发它时，我需要一些大规模安装的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:39:48.607

Howzabout 一个软件安装 AD 组策略？假设您有一个 AD 域，这将完全满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:21:10.930

ClickOnce 支持“广播”更新...

# php - 如何在表单中添加功能

> ID：10620490
> 
> 赞同：0
> 
> 时间：2012-05-16T14:16:51.350
> 
> 标签：php

我有这样的表格：

```
$form  = '<form action="https://www.zarinpal.com/users/pay_invoice/'.$res.'"
method="post" target="_parent" ><input type="submit"  value="Buy"/></form>';
$form .= '</form>';
echo $form; 
```

我想在这个表单中添加一个函数，所以当点击“购买”时，在 MySQL 中为这个用户创建一个数据库，其中包含所选项目的信息和他的帐户 id 以及待处理的事务状态，然后表单重定向他把网页包括在内。

我可以管理 MySQL 部分，但表单只会将用户重定向到给定的网页，我无法将用户信息添加到数据库中。

有没有办法可以为这个用户添加一个数据库行，然后将他重定向到支付网页？（创建另一个页面除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:10:30.217

```
<form action="https://www.zarinpal.com/users/pay_invoice/<?=$res ?> method="post" target="_parent" >
    <input type="test" name="customer-name" />
    <input type="submit"  value="Buy"/>
</form> 
```

然后在目标页面上放：

```
<?
print_r($_POST);
## That will let you know what is being posted from the form
?> 
```

例如，要访问“客户名称”变量，只需执行以下操作：

```
$customerName = $_POST["customer-name"]; 
```

# design-patterns - 关注点分离与松散耦合

> ID：10620496
> 
> 赞同：6
> 
> 时间：2012-05-16T14:17:02.327
> 
> 标签：design-patterns, loose-coupling, soc

我想了解关注点分离和松散耦合之间的区别。

通过关注点分离进行编码是否会产生松散耦合的代码？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T14:20:52.307

耦合是关于每个组件对其他组件的了解程度。

关注点分离是关于在不同组件中分离功能的不同方面。您可以分离不同的方面，但使组件紧密耦合（即使用具体类而不是抽象）。

更新：凝聚力显示了组件的职责是如何密切相关的。当你在不同的组件中分离不同的关注点时，组件的职责是强相关的，因此你有很高的内聚性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T14:23:48.410

考虑这一点的一个有用方法是，关注点分离决定了每个类/函数应该做什么，而耦合决定了这些类/函数彼此了解多少。

关注点分离与单一职责原则有关，即系统中的每个组件只应负责一件事。

系统中的耦合量与这些组件中的每一个如何相互通信有关。他们是否对彼此有很强的了解（紧密耦合），或者他们对彼此的了解是否通过接口/功能绑定/等（松散耦合）抽象出来？松散耦合通常使系统更容易更改，因为更改系统的一部分不会影响其他组件。

# c# - 使用导航属性获取数据

> ID：10620500
> 
> 赞同：2
> 
> 时间：2012-05-16T14:17:06.400
> 
> 标签：c#, asp.net, linq, entity-framework, navigation-properties

我正在使用实体框架创建应用程序。我已经从数据库加载了数据库模型。这里在`Course`表`Department`中是`Navigation Property`,`DepartmentID`是外键。我创建了一个网格视图并将其数据源设置为课程表，但我想看到`Deaptment Name`而不是`department ID`.我可以使用导航属性，`Department.count`但如何使用导航属性从部门表中获取数据（部门名称）。任何可以帮助我的人这是我的代码

```
 var result = (from o in ctx.Courses.Include("Department")
                     where o.Title == TextBox2.Text
                      select o
                      ).First();

        //GridView4.DataSourceID="";
        GridView3.DataSource=result;

        GridView3.DataBind(); 
```

如果我不使用第一个函数，那么我无法访问部门名称属性，如果我使用 First() 它说

```
Data source is an invalid type.  It must be either an IListSource, IEnumerable, or IDataSource. 
```

请告诉我如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:31:56.533

```
var result = (from c in dbContext.Course
             select c).First();
if(!result.Department.IsLoaded)
   {
      result.Department.Load(); //this will load the course.Department navigation property

   }

//Assuming you have 1 - 1 relationship with course to department
string departmentName = result.Department.Name; 
```

或者如果您与部门有 1 - M 关系，则：

```
foreach(Department d in result.Department)
{
Console.WriteLine(d.Name);
} 
```

编辑：
而不是尝试加载部门执行以下操作

```
if(!result.DepartmentReference.IsLoaded)
{
result.DepartmentReference.Load()
} 
```

[如何：显式加载相关对象](http://msdn.microsoft.com/en-us/library/bb896249)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T17:59:29.867

我认为 Northwind 中的 Products 和 Categories 表与您的需要相似。我会写一个这样的查询：

```
 var ctx = new NorthwindEntities();
        var query = from prod in ctx.Products
                    where prod.ProductName.StartsWith("C")
                    select new { prod.ProductName, prod.UnitPrice, prod.Category.CategoryName }; 
```

# php - 我想知道 PHP 中的系统系统本地主机 IP 地址？

> ID：10620502
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:17:16.457
> 
> 标签：php

在这里，我正在使用`$_SERVER['remote_addr']`我正在获取 IP 地址 INTERNET 提供商。请帮帮我。

```
function getRealIpAddr()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:41:07.117

看起来问题是在寻找服务器的 IP 地址，问题是提供的代码正在返回远程 IP。如果您想要服务器的 IP 地址，请尝试`$_SERVER['SERVER_ADDR']`. 有关[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)更多详细信息，请参阅，或明确定义“系统 IP”的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:29:09.033

您将无法像这样从 PHP 获取客户端的本地 IP 地址，您将只能获得

> 公共网关 IP 地址

正如你所说。这是因为请求似乎来自路由器或您的客户端和 Web 服务器之间的任何东西

# maps - 谷歌地图上的多公里层

> ID：10620505
> 
> 赞同：1
> 
> 时间：2012-05-16T14:17:17.280
> 
> 标签：maps, kml, layer

我开发了一个简单的谷歌地图网页。我需要任何有谷歌地图经验的人的帮助。在我网页的右侧面板中，我添加了一些复选框，我想将不同的 kml 与这些复选框链接起来。当我检查所有图层时，所有 kml 都显示在谷歌地图中，​​当我取消选中任何图层复选框时，与该复选框相关的 kml 将消失。请指导我如何做到这一点。请通过此链接查看页面 [http://toptrippk.com/webgis/kml%20layers.html](http://toptrippk.com/webgis/kml%20layers.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:21:09.217

我建议您使用以下结构。使用这种方法，您不必为每一层编写单独的函数，而只需为这一层编写。请注意，此处“输入”标签的“id”用作 KML 文件名。您可能希望看到这个[问题](https://stackoverflow.com/questions/10563233/google-maps-js-api-with-kml-layer-control)。如果向前看，那么[geoxml3](https://stackoverflow.com/questions/10621618/geoxml3-google-maps-with-kml-layer-control)可能是您的选择。

```
var G = google.maps;
function toggle() {
if (!this.kml)
{this.kml = new G.KmlLayer('http://toptrippk.com/webgis/uploadfiles/kml/' + this.id + '.kml', {preserveViewport:true}); this.on = false};

if (this.on)
{this.kml.setMap(null); this.on = false} else {this.kml.setMap(map); this.on = true};
};

function initialize() {
var layers = document.getElementsByTagName('input');
var options = {};
map = new G.Map(document.getElementById('map_canvas'), options);
for (var i=0; i<layers.length; i++) {G.event.addDomListener(layers[i], 'click', toggle)};};
G.event.addDomListener(window, 'load', initialize); 
```

# powershell - 使用 -File 参数调用时，如何让 powershell 返回正确的退出代码？

> ID：10620507
> 
> 赞同：16
> 
> 时间：2012-05-16T14:17:24.343
> 
> 标签：powershell, exit-code

如果使用 -File 参数调用，当发生错误时，Powershell 将返回 0 退出代码。这意味着我的构建不应该是绿色的:(

例如：

（在 wtf.ps1 中）

```
$ErrorActionPreference = "Stop";   
$null.split() 
```

（命令）

```
powershell -file c:\wtf.ps1  
You cannot call a method on a null-valued expression.
At C:\wtf.ps1:3 char:12
+ $null.split <<<< ()
    + CategoryInfo          : InvalidOperation: (split:String) [], ParentConta
   insErrorRecordException
    + FullyQualifiedErrorId : InvokeMethodOnNull

echo %errorlevel%  
0

powershell c:\wtf.ps1  
You cannot call a method on a null-valued expression.
At C:\wtf.ps1:3 char:12
+ $null.split <<<< ()
    + CategoryInfo          : InvalidOperation: (split:String) [], ParentConta
   insErrorRecordException
    + FullyQualifiedErrorId : InvokeMethodOnNull

echo %errorlevel%  
1 
```

有任何想法吗？

（我已经尝试了前两页的所有想法：[https](https://www.google.co.uk/search?q=powershell+file+argument+exit+code) ://www.google.co.uk/search?q=powershell+file+argument+exit+ code）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T14:35:57.127

在脚本中，使用带有您选择的数字的 exit 关键字：

```
exit 34 
```

这是我用来测试的脚本：

```
## D:\Scripts\Temp\exit.ps1 ##
try{
    $null.split()
}
catch
{
    exit 34
}

exit 2
#############################

# launch powershell from cmd 
C:\> powershell -noprofile -file D:\Scripts\Temp\exit.ps1
C:\>echo %errorlevel%
34 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-23T22:10:47.863

这是[一个已知问题](https://connect.microsoft.com/PowerShell/feedback/details/750653/powershell-exe-doesn-t-return-correct-exit-codes-when-using-the-file-option)。解决方法是使用 -File 调用脚本，使用 -Command 参数（并添加 ; exit $lastexitcode 如果您也有自己的退出代码）或将它们转换为退出代码，如[Shay](https://stackoverflow.com/a/10620837/1242)显示的或使用下面的陷阱的示例。请参阅[此处](http://joshua.poehls.me/2012/powershell-script-module-boilerplate/)了解更多信息。

```
trap
{
    $ErrorActionPreference = "Continue";   
    Write-Error $_
    exit 1
}

$ErrorActionPreference = "Stop";   
$null.split() 
```

# .net - 组合框中的 WPF 4 DataGrid

> ID：10620509
> 
> 赞同：1
> 
> 时间：2012-05-16T14:17:25.567
> 
> 标签：.net, wpf, xaml, datagrid

我试图将 ComboBox 控件中的 WPF DataGrid 显示为组合框项。以下是 XAML。这里的问题是它没有在网格中显示滚动条。我确实尝试将 ScrollViewer 设置为 true。我还尝试将垂直滚动条设置为自动和可见，但到目前为止还没有运气。非常感谢任何帮助。

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="56,41,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120">
        <DataGrid Name="dgCustomers"></DataGrid>
    </ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:28:51.117

您是否尝试过设置[ScrollViewer.*](http://msdn.microsoft.com/en-us/library/ms612683)附加属性。

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="56,41,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120">
            <ScrollViewer  Height="100" >
                <DataGrid Width="100"  Height="200"  Name="dgCustomers"></DataGrid>

            </ScrollViewer>
    </ComboBox> 
```

# java - 运行 java 管道到 mutt

> ID：10620510
> 
> 赞同：0
> 
> 时间：2012-05-16T14:17:27.563
> 
> 标签：java, terminal, pipe

我正在尝试在 OSX 上的终端中运行 java 命令，虽然如果我只运行命令它可以正常工作，但我也想通过电子邮件发送结果文件，但是如果我在 java 命令之后添加一个管道并使用 mutt 发送它作为附件，它不会等到 java 完成才继续进入下一个管道，它试图一次执行它！

如何让它等到java完成？

试图让我的问题更清楚一点：

我正在寻找的是运行我的java命令的能力，一旦完成，我想将文件导出到目录我想gzip它然后通过电子邮件将它发送到带有mutt的发行版。我唯一没有工作的部分是正确的步进终端不会等到 java 命令完成后再移过管道。此外，我的 java 脚本具有导出到易于导入的文件的代码，通过 ^ 分隔到 excel。

`java -classpath <pathtojavafiles> | find /Users/tb582/Desktop/scripts/output/*.txt -type f -maxdepth 1 -cmin -1 -exec gzip {} \;| find /Users/tb582/Desktop/scripts/output -type f -maxdepth 1 -not -cmin -2 -exec mv {} /Users/tb582/Desktop/scripts/output/archive \; | mutt -a /Users/tb582/Desktop/scripts/output/*.gz -s "Hourly Report" -- <emailaddress>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:13:56.500

如果你想等待命令完成，你应该使用 && 或 ; 将命令分开。一根管子| 用于当您希望一个程序的文本输出用作下一个程序的输入时。

# javascript - 如何在使用 map.fitBounds 之前确定 LatLngBounds 的缩放级别？

> ID：10620515
> 
> 赞同：6
> 
> 时间：2012-05-16T14:17:55.090
> 
> 标签：javascript, google-maps, google-maps-api-3

在调用 map.fitBounds() 之前，我试图找出一种确定地图缩放级别的方法，但我似乎找不到方法。

在 API v2 中有一个方法[`GMap.getBoundsZoomLevel(bounds:GLatLngBounds)`](https://developers.google.com/maps/documentation/javascript/v2/reference#GMap2.Methods.Map-State)，但我在 API v3 文档中找不到等价物。

是否有非谷歌算法来预先确定缩放级别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-04T23:39:31.067

尼克是对的，这个讨论概述了一种可行的方法： [Google Maps V3 - How to calculate the zoom level for a given bounds](https://stackoverflow.com/questions/6048975/google-maps-v3-how-to-calculate-the-zoom-level-for-a-given-bounds)

但是，它是在 Javascript 中的。对于那些需要使用 Android GMaps v3 执行此操作的人，以下是翻译：

```
private static final double LN2 = 0.6931471805599453;
private static final int WORLD_PX_HEIGHT = 256;
private static final int WORLD_PX_WIDTH = 256;
private static final int ZOOM_MAX = 21;

public int getBoundsZoomLevel(LatLngBounds bounds, int mapWidthPx, int mapHeightPx){

    LatLng ne = bounds.northeast;
    LatLng sw = bounds.southwest;

    double latFraction = (latRad(ne.latitude) - latRad(sw.latitude)) / Math.PI;

    double lngDiff = ne.longitude - sw.longitude;
    double lngFraction = ((lngDiff < 0) ? (lngDiff + 360) : lngDiff) / 360;

    double latZoom = zoom(mapHeightPx, WORLD_PX_HEIGHT, latFraction);
    double lngZoom = zoom(mapWidthPx, WORLD_PX_WIDTH, lngFraction);

    int result = Math.min((int)latZoom, (int)lngZoom);
    return Math.min(result, ZOOM_MAX);
}

private double latRad(double lat) {
    double sin = Math.sin(lat * Math.PI / 180);
    double radX2 = Math.log((1 + sin) / (1 - sin)) / 2;
    return Math.max(Math.min(radX2, Math.PI), -Math.PI) / 2;
}
private double zoom(int mapPx, int worldPx, double fraction) {
    return Math.floor(Math.log(mapPx / worldPx / fraction) / LN2);
} 
```

# c# - 自动高亮返回线

> ID：10620527
> 
> 赞同：6
> 
> 时间：2012-05-16T14:18:43.737
> 
> 标签：c#, visual-studio-2010, resharper-5.1

Eclipse（至少在使用 Java 时）具有自动突出显示方法中的所有行的功能，当我将光标放在方法定义中的返回类型上时方法返回。
Visual Studio + ReSharper 5.1.3 中的 C# 是否也有这样的功能？

## 代码示例

```
string Do()
{
  if(/**/)
    return ""; // here

  if(/**/)
    return "1"; // here

  if(/**/)
    return "2"; // here

  throw new Exception(""); // here
 } 
```

当我将光标放在此示例第一行的单词***字符串***`// here`上时，应突出显示标有的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:09:16.917

看起来[名为 Linguist 的 VS2010 扩展](http://visualstudiogallery.msdn.microsoft.com/b0fe68e7-f2f6-4b5a-9e53-c24a41ffc4cb?SRC=VSIDE)将与您想要的很接近。它可以对任何正则表达式进行自定义突出显示。不过，它似乎无法根据您的光标位置进行更改。

更多关于扩展的信息可以[在 github 页面](https://github.com/jesse99/Linguist)查看。

没有用于设置的 GUI。取而代之的是您配置的设置文件`%LOCALAPPDATA%\Linguist`。

由于我的语法已经突出显示了我希望使用 Resharper 的方式，因此我从子目录中的`Styles.field`文件中删除了所有格式。`standard`如果你这样做，你需要留下所有的名字，所以它看起来类似于：

**样式.字段**

```
# If new elements are added (or old ones removed) then Definitons.cs
# and Languages.Init have to be updated.
Name: attribute

Name: command

Name: comment

<<< keep all the names in this file, just remove formatting >>> 
```

您将需要设置一种命名样式以用于突出显示。我做了：

```
Name: emphasis
BackColor: Red 
```

然后我在子目录中创建了一个名为`custom.lang`（但你可以用 .lang 扩展名命名你的任何文件）的文件`custom`。这就是我为突出显示返回语句所做的：

**自定义.lang**

```
Language: csharp
Globs: *.cs

Emphasis: \breturn\b
Emphasis: \bthrow\b 
```

这让事情对我有用。有点复杂，但它是免费的。另一种方法可能是清除`standard\C#.lang`文件，以便您可以保留其他文件格式。

最后是另一个选项，因为它在 github 上，您可以为突出显示的文本添加新的样式定义，这样我们就不会破坏其余的格式。很高兴有选择:)

# c# - 删除带有一些参数的匿名事件处理程序

> ID：10620528
> 
> 赞同：1
> 
> 时间：2012-05-16T14:18:47.687
> 
> 标签：c#, events, event-handling

我订阅了这样的活动：

```
private void CoupleOverlay(IMapVisual mapVisual)
{            
      overlay.DrawTilesProgressChanged += (s, e) => 
      {               
          mapVisual.DrawingProgress = e.ProgressPercentage;
      };
} 
```

该应用程序可能会多次调用 CoupleOverlay 事件，因此我需要取消订阅 DrawTilesProgressChanged 事件并再次订阅，但因为它是一个匿名事件，我无法取消订阅。我试图转换为

```
private void CoupleOverlay(IMapVisual mapVisual)
{
    overlay.DrawTilesProgressChanged -=overlay_DrawTilesProgressChanged;                 
    overlay.DrawTilesProgressChanged +=overlay_DrawTilesProgressChanged;                 
}

private void overlay_DrawTilesProgressChanged(object sender, DrawTilesProgressChangedTileOverlayEventArgs e)
{       
    mapVisual.DrawingProgress = e.ProgressPercentage;
} 
```

它不起作用，因为方法`mapVisual`上的变量无效`overlay_DrawTilesProgressChanged`。

如果我将代码更改为

```
private void CoupleOverlay(IMapVisual mapVisual)
{
    EventHandler<DrawTilesProgressChangedTileOverlayEventArgs> drawEvent = (s, e) =>
    {           
        mapVisual.DrawingProgress = e.ProgressPercentage;
    };

    overlay.DrawTilesProgressChanged -= drawEvent;
    overlay.DrawTilesProgressChanged += drawEvent;
} 
```

它不起作用，因为它`drawEvent`是一个局部变量，下次我调用 CoupleOverlay 时，它将创建一个新变量。

那么如何取消订阅此事件处理程序？或者我怎么知道我已经订阅了该活动，所以我不需要再次订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:23:44.747

> 它不起作用，因为 drawEvent 是局部变量，下次我调用 CoupleOverlay 时，它将创建一个新变量。

确实。您基本上需要保留一个实例变量而不是局部变量。实例变量实际上是“当前订阅的事件处理程序”。然后，`CoupleOverlay`您将删除该事件处理程序，创建一个新事件处理程序（将其存储在变量中）并重新订阅它。

另一种方法是使用单个事件处理程序，但将“当前”覆盖和地图视觉对象保留为事件处理程序使用的实例变量。然后该`CoupleOverlay`方法只需要更新这些变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:24:41.627

> 如何取消订阅此事件处理程序

你不能因为 lambda 是一个局部变量，并且不能超出它声明的范围（在你的情况下是函数本身）。要获得所需的灵活性，您需要利用`delegates`

> 我怎么知道我已订阅和活动，所以我不需要再次订阅

要获取订阅者列表，使用以下内容就足够了：

[MulticastDelegate.GetInvocationList 方法](http://msdn.microsoft.com/en-us/library/system.delegate.getinvocationlist.aspx)（事件和委托是多播的）

# javascript - 获取将被鼠标悬停的目标元素

> ID：10620531
> 
> 赞同：0
> 
> 时间：2012-05-16T14:19:02.630
> 
> 标签：javascript, jquery, web

当我的代码处于 mouseout 事件中时，如何获取将触发鼠标悬停的元素。

例如：

A 是菜单，subA 是他的子菜单，如果用户的鼠标移出 A 但仍然在 subA 上，那么我们不应该隐藏菜单 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:25:48.183

事件对象上有 fromElement 和 toElement 属性 - 这些应该为您提供所需的信息。

有关更多信息，请参阅[本文](http://www.quirksmode.org/js/events_mouse.html#mouseover)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:26:07.987

如果您的意思是我认为您的意思，那么您想要的是[`relatedTarget`](https://developer.mozilla.org/en/Document_Object_Model_%28DOM%29/event.relatedTarget)事件在符合标准的浏览器中的[`toElement`](http://msdn.microsoft.com/en-us/library/ie/ms534684%28v=vs.85%29.aspx)属性和`window.event`IE < 9 中的属性。

jQuery 将其规范化为`relatedTarget`属性，因此以下内容将在 jQuery 支持的所有浏览器中执行您想要的操作：

```
$("#yourelement").mouseout(function(evt) {
    alert(evt.relatedTarget.id);
}); 
```

# html - 有没有办法将长 html 脚本存储在 html 对象中

> ID：10620533
> 
> 赞同：0
> 
> 时间：2012-05-16T14:19:06.660
> 
> 标签：html

我正在调用返回一些 html 脚本的数据库。有没有办法让 html 标记（如输入标记）将这些 html 脚本保存在其“id”或“值”中，而无需在页面上呈现 html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:21:12.850

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:27:08.190

您可以对 HTML 进行 base64 编码，然后在需要时对其进行解码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:22:45.207

使用jQuery的数据函数

```
$("#myInput").data("long-html", "your_data_here"); 
```

# c# - 更新映射到视图的实体框架实体

> ID：10620534
> 
> 赞同：2
> 
> 时间：2012-05-16T14:19:11.680
> 
> 标签：c#, sql-server-2008, entity-framework, ef-code-first

我正在尝试使用 Entity Framework Code First 在实体中包含一些派生数据（在数据库上计算）。

为此，我创建了一个视图，该视图返回主表和包含附加派生数据的列。

我已经使用该属性将视图映射到实体`[Table("NameOfView")]` 。

它似乎适用于编辑，但插入失败。据推测，编辑不会尝试触及派生字段，但插入会尝试插入它们。

是否可以先将实体映射到代码中的视图，从而使主基表仍可更新，并且忽略不打算更新的列？

还是有另一种方法可以做我想做的事情？

注意：我尝试使用该`[DatabaseGenerated]`属性，但这似乎没有帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:26:03.383

尝试使用`[DatabaseGenerated(DatabaseGeneratedOption.Computed)]`.

# cocoa - MAC 10.7 上的 CoreWLAN 问题（CoreWLAN 无线管理器示例）

> ID：10620537
> 
> 赞同：0
> 
> 时间：2012-05-16T14:19:21.483
> 
> 标签：cocoa, frameworks, osx-lion, corewlan

我刚刚从苹果网站上获得了 CoreWLANWirelessManager 示例，我正试图让它在 OS 10.7.4 上运行。

我遇到的问题是缺少标头：CoreWLANPrivate.h，它是从 CoreWLAN.h 调用的

有人有同样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:45:47.080

好吧，完全重新安装 Xcode4 解决了这个问题。

# css - 如何不将 CSS 样式从 iframe 应用到父站点

> ID：10620539
> 
> 赞同：0
> 
> 时间：2012-05-16T14:19:48.557
> 
> 标签：css, wordpress, iframe

我们正在让第三方开发公司创建一个应用程序，我们计划使用 iframe 在我们的 WordPress 网站上显示该应用程序。然而，他们巧合地使用了我们网站上使用的许多相同的 CSS 名称。这导致部分主站点中断。我们如何在 iframe 中显示此应用程序，但又不会弄乱主站点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:22:28.897

iframe 中的 CSS 不会影响包含页面。这不是它的工作原理。iframe 被视为一个完全不同的网页，恰好嵌入到另一个网页中。

# tcl - 检测 tcl 语法错误的工具或方法

> ID：10620546
> 
> 赞同：2
> 
> 时间：2012-05-16T14:20:11.020
> 
> 标签：tcl, syntax-error

如果我的 tcl 脚本包含任何语法错误，CGI 错误大部分时间都会显示在浏览器中，但并非每次都发生这种情况。

有没有办法或一些开源工具可以用来检测 tcl 语法错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T14:38:25.517

Tcl 静态分析工具的[wiki 页面](http://wiki.tcl.tk/3162)列出了一些我过去成功使用“frink”的工具。Nagelfar 也相对较新，我听说过它的好消息。

# simple-html-dom - file_get_html 得到一个空页面

> ID：10620548
> 
> 赞同：1
> 
> 时间：2012-05-16T14:20:12.940
> 
> 标签：simple-html-dom

我试图通过 file_get_html 获取某个网页的内容。

问题是我之前设法做到了，但现在它给了我一个空的结果，没有任何错误消息。

```
file_get_contents('http://www.google.com') or die('this is not a valid url'); 
```

网址有效。我通过将它粘贴到我的浏览器来检查它。

我试着玩 user_agent ：

```
ini_set('user_agent', 'My-Application/2.5'); 
```

甚至

```
ini_set('user_agent', 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.24 (KHTML like Gecko) Chrome/19.0.1055.1 Safari/535.24'); 
```

但什么都没有..有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:25:33.630

在 php.ini 中启用“allow_url_fopen”，代码没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:25:01.973

尝试**[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)**

它会是这样的：

```
$input=file_get_contents("http://www.google.com");
$input=htmlspecialchars($input);
echo $input; 
```

# java - JTable 中的问题组合框

> ID：10620549
> 
> 赞同：0
> 
> 时间：2012-05-16T14:20:22.990
> 
> 标签：java, swing, jtable, jcombobox

我有一个关于为学校编程时出现的问题的问题。

我们想做一个总结，从周一到周日，一个小公司的老板可以在哪里看到他的员工，他可以在哪里为这些人分配时段。为此，我们使用了 JTable。在每个单元格中，我们希望实现一个包含时段（早上、下午、晚上）的组合框。

因此，当单击一个单元格时，我们希望能够单击显示的组合框，选择一个时段，然后我们希望能够将名称、他们指定的日期和日期放入数据库中. （现在，将它们放入变量或任何东西都可以，我们将自己放入数据库中。）

这是到目前为止我们的 GUI 的屏幕截图： [Link to our GUI](http://www.frankenroelcomputerservice.nl/stuff/GUI.png)

到目前为止，一切都很好。我们并没有真正在 GUI 的外观上付出任何努力，所以在我们专注于功能时请多多包涵 =)。我们唯一的问题是我们需要程序知道哪个日期和哪个人与正在更改的 cel 相关联，以便我们可以将姓名、日期和新的时段放入数据库中。

我们尝试了这个：当您单击列表中的 cel 时，我们使用了 clicklisteren。我们在该方法中放置了一些代码，它能够看到坐标，从而获得名称和日期。那行得通。然后我们尝试实现组合框。我们在那里也取得了成功。但是，当 cel 变成组合框时，将不再使用 click 方法。

所以这是我们的问题：这是获得我们想要的东西的正确方法吗？如果是这样，我们如何修复列表，以便在更改组合框时能够找出名称和日期，以便将其放入数据库中？如果不是，我们应该改变什么？我们应该使用什么样的其他侦听器或其他代码来实现我们的目标？

这是我们的一些代码：

```
 private javax.swing.table.DefaultTableModel model; //table model instantieren --teminste, straks.
    model = new javax.swing.table.DefaultTableModel(); //Hier wordt de tabel gedefinieerd.

    //We make the columns here:
    model.addColumn("Naam werknemer:");                                    
    model.addColumn("Maandag");
    model.addColumn("Dinsdag");
    model.addColumn("Woensdag");
    model.addColumn("Donderdag");
    model.addColumn("Vrijdag");
    model.addColumn("Zaterdag");
    model.addColumn("Zondag");

    //We make the combobox here:
    myCombo = new JComboBox(); 
    myCombo.addItem("-"); //not planned
    myCombo.addItem("ochtend"); //add items
    myCombo.addItem("middag");
    myCombo.addItem("avond");

   //This puts our combox in every cell of the first column
    TableColumn tableColumn = jTable1.getColumnModel().getColumn(1);

    //mouseclick listener
    jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jTable1MouseClicked(evt);
        }
     });
    //actionlisteneren bij action performed
    myCombo.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jComboBox1ActionPerformed(evt);
        }
    });

private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {

            Point pnt = evt.getPoint();
            int row = jTable1.rowAtPoint(pnt);                  //This is the X 
            int col = jTable1.columnAtPoint(pnt);               //this is the Y -> Date
            String columnpje = ""+col;
            naambijcel = ""+jTable1.getValueAt(row,0);          //This variable will hold a name

            if (columnpje.equals("1")){
                datumbijcel = planningbeheermanager.getColumnArray().get(0); 
            }else if (columnpje.equals("2")){  
                datumbijcel = planningbeheermanager.getColumnArray().get(1);
            }else if (columnpje.equals("3")){       
                datumbijcel = planningbeheermanager.getColumnArray().get(2);    
            }else if (columnpje.equals("4")){
                datumbijcel = planningbeheermanager.getColumnArray().get(3);
            }else if (columnpje.equals("5")){
                datumbijcel = planningbeheermanager.getColumnArray().get(4);
            }else if (columnpje.equals("6")){
                datumbijcel = planningbeheermanager.getColumnArray().get(5);
            }else if (columnpje.equals("7")){
                datumbijcel = planningbeheermanager.getColumnArray().get(6);
            }

            //System.out.println(obj1);
            //System.out.println(row +" "+ col);
}

    private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt) {                                           
    // selectbox ding ("" zorgen ervoor dat het object in een string kan worden gezet.
    System.out.println("Dagdeel: "+myCombo.getSelectedItem());
    System.out.println("Naam: "+naambijcel);
    System.out.println("Datum: "+datumbijcel);
    } 
```

如果您想查看更多我们的代码或有任何其他问题，请随时提问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:43:13.107

我不能完全确定，但对我来说，您似乎没有正确使用 TableModel。您在 jComboBox1ActionPerformed 中执行的操作实际上应该在[setValueAt()](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)中执行。

也许，扩展[AbstractTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/AbstractTableModel.html)会比 DefaultTableModel 更合适，但同样，如果没有完整的代码，也无法确定。

# c++ - 作为服务运行时连接到远程计算机的 WMI

> ID：10620554
> 
> 赞同：2
> 
> 时间：2012-05-16T14:20:34.287
> 
> 标签：c++, wmi

我正在编写一些代码来在远程机器上进行 wmi 查询和方法执行。我的登录凭据是域管理员。当我在应用程序模式下运行时，一切正常。当我作为服务运行时，它将无法正常工作，因为默认帐户服务使用 isLocal System。当我将服务设置为作为我的凭据运行时，远程 wmi 也可以正常工作。

然而这是不可取的，所以我试图通过在 IWbemLocator.ConnectServer 提供用户名和密码来连接到远程 wmi。我能够成功取回 IWbemServices 对象。但是，当我尝试从 IWbemServices 对象获取类对象时，出现错误：

```
//IWbemServices *pSvc
const bstr_t objectPath("stdRegProv");
const bstr_t methodName("GetStringValue");
IWbemClassObject *pClass = NULL;
HRESULT hr = pSvc->GetObject(objectPath, 0, NULL, &pClass, NULL); 
```

返回的 hr 是 0x80041003，即来自此链接的“访问被拒绝”：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa394559%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394559%28v=vs.85%29.aspx)。

通常，如果我提供了错误的用户名和密码，我会在 IWbemLocator.ConnectServer 上拒绝访问。所以我在这里有点困惑为什么连接很好但是我无法获得 IWbemClassObject 对象。由于如果我使用我的域凭据作为服务帐户它可以工作，因此必须存在一些安全差异。我的 WMI 连接代码基于 MSDN 上的示例代码：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa390418%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390418%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T05:04:43.823

WMI 类型剥夺了一些安全权利；您需要将您的帐户设置为“受信任的委托”，这是*非常*强大且不推荐的，或者签署您的代码。或者，您可以将显式权限传递给进程。

# datagrid - 如何在 Flex 的数据网格中循环单选按钮 Itemrenderers

> ID：10620557
> 
> 赞同：1
> 
> 时间：2012-05-16T14:20:52.123
> 
> 标签：datagrid, flex4, radio-button

您好，有人可以帮助在 Flex MX Datagrid 中循环单选按钮项渲染器吗？

我的数据网格代码如下：

```
<mx:DataGridColumn width="20" headerText="isDefault" dataField="IS_DEFAULT">
                            <mx:itemRenderer>
                                <fx:Component>
                                    <mx:HBox horizontalAlign="left">
                                        <fx:Script>
                                            <![CDATA[
                                                import mx.controls.Alert;
                                                import mx.controls.listClasses.ListData;

                                                protected function chk1_changeHandler(event:Event):void
                                                {

                                                } 

                                            ]]>
                                        </fx:Script>
                                        <mx:RadioButton id="chk1" selected="{data.IS_DEFAULT == 'N' ? false : true}"
                                                        groupName="{outerDocument.rbg11}" change="chk1_changeHandler(event)" horizontalCenter="0"/>
                                            </mx:HBox>
                                </fx:Component>
                            </mx:itemRenderer>
                        </mx:DataGridColumn>

Thanks for helping. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:58:36.460

为什么不将复选框项内联渲染器的状态与数据网格的数据提供器绑定？您是否专门尝试通过每个复选框控件访问其他类型的功能？如果没有，我建议只将一个选定/未选定属性添加到您的数据提供者是什么，并将其绑定到内联复选框渲染器的“选定”属性，如下所示：

```
<mx:RadioButton id="chk1" selected="{data.selected_property}"
                                    groupName="{outerDocument.rbg11}" change="chk1_changeHandler(event)" horizontalCenter="0"/> 
```

这样，如果您想遍历 datagrid 控件中每个复选框的“状态”，您可以在数据提供者级别执行此操作。您的 chk1_changeHandler() 只会切换该选定/未选定值：

```
protected function chk1_changeHandler(event:Event):void{
    if(data.selected_property == true){
        data.selected_property = false;
    }else{
        data.selected_property = true;
    }
} 
```

如果您对 mx (~3.x) 而不是 4.6 死心塌地，我会在这里阅读一些微妙的 flex 3 绑定细微差别：[关于绑定](http://livedocs.adobe.com/flex/3/html/help.html?content=databinding_2.html)

# .net - 持续运行的业务流程

> ID：10620566
> 
> 赞同：0
> 
> 时间：2012-05-16T14:21:18.933
> 
> 标签：.net, windows-services, while-loop, singleton

我希望单个业务流程线程在**.net**中连续运行。为此，我可以考虑制作一个可以连续运行的窗口服务。如果此服务失败，我希望管理员可以进行基于 Web 的控制。

问题 1：如果此服务失败，我如何通过基于 Web 的应用程序进行检查（我可以使用命令提示符通过 SC 命令检查，但如何将其移动到基于 Web 的环境）。

问题 2：我正在考虑使用 while(true) 循环使服务连续运行。这是解决此问题的正确方法吗。

问题 3：如何确保一次只运行一个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:26:29.033

问题 1：为什么不直接使用异常处理来触发电子邮件，或者写入可以使用 XSLT 转换的 XML 文件

问题 2：服务可以每 30 分钟运行一次应用程序。让服务持续运行是什么意思，服务的用途是什么？

问题3：您可以在代码中检查是否有另一个实例正在运行，请参阅单例模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:28:00.647

问题1：看[这里](https://stackoverflow.com/questions/178147/how-can-i-verify-if-a-windows-service-is-running)

问题2：不是一个好主意。服务在做什么？通常它会触发像 Filesystem Watcher 这样的事件，或者休眠一段时间然后唤醒以执行必要的任务。

问题 3：Windows 服务与其他可执行文件不同，如果您只安装一个，则该服务将只有一个副本。您可以根据需要启动和停止它。

# websphere - How to make an application server on Websphere dependent on another application server, so that it starts and stops together?

> ID：10620568
> 
> 赞同：0
> 
> 时间：2012-05-16T14:21:25.007
> 
> 标签：websphere

I have 2 application servers say server1 and server2 created in my Websphere. I want to make the server2 dependent on server1 so that whenever I start server1, server2 also gets started and when am stopping server1, server2 also gets stopped.

Is there any configuration in Websphere to achieve this? If not can this be done using Custom services for application server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:48:19.207

您是否只想通过管理控制台进行操作？如果没有，您可以编写一个小的自定义脚本，在其中一起启动/停止 server1 和 server2。

# javascript - How to check if user subscribe to another user via Open Graph Facebook?

> ID：10620571
> 
> 赞同：1
> 
> 时间：2012-05-16T14:21:33.070
> 
> 标签：javascript, facebook, facebook-opengraph, subscribe

Is it a way to check if user subscribe to another with Open Graph (Javascript) ?

Example :

```
FB.api('/me/subscribe/' + username, 'post', { }); 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:33:14.653

```
/me/subscribedto 
```

然后，您可以通过返回的订阅列表查找特定用户

# ios - Nested SplitviewControllers

> ID：10620572
> 
> 赞同：3
> 
> 时间：2012-05-16T14:21:35.457
> 
> 标签：ios, nested, uisplitviewcontroller

I need nested split view controllers for my app. I need to present a split view controller in detail view of MGSplitViewController. How to do that? Pls help me. I need two separate master views.

I have attached the design here:

[![enter image description here](../Images/bbca7234cdd381add37f5b6e43ef6f52.png)](https://i.stack.imgur.com/z5nHH.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:30:07.823

有几个开源库可以帮助您实现该视图结构。查看：[https ://github.com/steipete/PSStackedView](https://github.com/steipete/PSStackedView)

# java - Java 内联调试代码

> ID：10620575
> 
> 赞同：1
> 
> 时间：2012-05-16T14:21:40.090
> 
> 标签：java, debugging

我在这里寻找一些最佳实践建议。我有一个库，我想将一些调试代码添加到（想想 System.out.println）中，只有在配置文件中设置了标志时才会执行。

这是相当微不足道的，并且在我进行过程中将具有帮助调试程序所需的输出。话虽这么说，我的生产代码周围会有很多 if(DEBUG) 语句，这似乎很繁重。我不太担心代码的效率，而更多的是关于实际执行某些操作的语句与仅用于调试的语句的可读性。

我知道对于大多数 IDE，我可以简单地单步执行代码以有效地为自己提供更多手动调试选项，但我发现对于任何足够迭代的代码库，这种方法比仅仅将东西转储到控制台更痛苦. 我想另一种选择可能是使用具有 DEBUG 设置的日志记录框架，但我仍然觉得额外的日志记录指令与将它们发送到控制台一样难看。

我在这里缺少任何选项吗？他们在 Java 中的调试框架是否使这个更干净？作为参考点，我想知道何时调用某些特定方法以及执行过程中不同点的各种对象的字符串表示形式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:27:36.123

我不太了解您的问题，但我仍然建议您使用日志框架，例如 log4j，它允许您选择将日志信息生成到文件、数据库或控制台。使用 system.out 功能强大得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:35:25.453

您可以使用[AspectJ](http://en.wikipedia.org/wiki/AspectJ)保持退出生产代码并使其更易于阅读。有了正确的切入点，您可能也不需要编写几乎一样多的调试代码。如果您花费大量时间进行调试，请考虑进行单元测试或更规范的开发方法。此外，永远不要捕获异常并记录应该抛出的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T12:57:51.350

在 IntelliJ IDEA 中，您可以将记录消息或计算表达式的断点添加到控制台。当它到达断点时，它会简单地记录并继续执行。

我经常将它与条件断点结合使用，作为调试语句，并更清楚地了解我的代码在调试过程中正在做什么。

很酷的是您不必修改源代码，因为日志记录语句是在运行时由调试器添加的。

我认为 Eclipse 可以让你做同样的事情。

# c# - How to access c++ dll class in c# code

> ID：10620577
> 
> 赞同：3
> 
> 时间：2012-05-16T14:21:41.547
> 
> 标签：c#, winapi, dllimport

I have a C++ class in my 3rd party dll.

If I call Assembly.LoadFrom(), VS throws up an unhandled exception as there is no manifest contained in the module.

I can call global functions using DllImport to get an instance of a certain class.

How do I then call one of its member functions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:09:25.630

使用暴露 C++ 函数的 C++/CLI 创建包装 DLL

例如：

```
//class in the 3rd party dll
class NativeClass
{
    public:
    int NativeMethod(int a)
    {
        return 1;
    }   
};

//wrapper for the NativeClass
class ref RefClass
{
    NativeClass * m_pNative;

    public:
    RefClass():m_pNative(NULL)
    {
        m_pNative = new NativeClass();
    }

    int WrapperForNativeMethod(int a)
    {
        return m_pNative->NativeMethod(a);
    }

    ~RefClass()
    {
        this->!RefClass();
    }

    //Finalizer
    !RefClass()
    {
        delete m_pNative;
        m_pNative = NULL;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:56:18.350

Assembly.LoadFrom 用于加载托管程序集。

对于非托管程序集，需要[P/Invoke](http://msdn.microsoft.com/en-us/library/aa446536.aspx)。

[如何编组 c++ 类](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)

# dynamics-crm - 如何在 Dynamics CRM Online 中使用全文搜索？

> ID：10620579
> 
> 赞同：1
> 
> 时间：2012-05-16T14:21:50.707
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-online

我正在寻找一种在 Dynamics CRM 2011 在线中使用 SQL Server 的全文索引进行通用搜索的方法。我知道使用本地版本可以做到这一点，但找不到在线版本的方法。如果没有简单的方法，那么开发它的方法是什么？（也许通过插件？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T04:05:58.340

Dynamics CRM Online 不会向您公开 SQL Server 内部结构。运行原始 SQL 是不可能的。

访问数据的唯一方法是 CRM UI 和各种 SDK/API（oData、REST 等）

Dynamics CRM 2011 中没有通用搜索，由于缺乏 SQL 访问权限，我认为任何第三方插件都不会在 CRM Online 上运行。

# c# - 两个线程 + 不同文件上的 InvokeMember = NullReference？

> ID：10620580
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:21:56.790
> 
> 标签：c#, multithreading, reflection

所以我有 2 个不同的线程：thread1 和 thread2，使用以下方法运行：

```
public static void thread1()
{
    Assembly asm = Assembly.LoadFrom("t.dll");
    Type t = asm.GetType("dis.Code");
    Object Res = t.InvokeMember("Start", BindingFlags.InvokeMethod, null, null, null);

}
public static void thread2()
{
    Assembly asm = Assembly.LoadFrom("test.dll");
    Type t = asm.GetType("dis.Code");
    Object Res = t.InvokeMember("Start", BindingFlags.InvokeMethod, null, null, null);
} 
```

我要做的是调用 2 个不同的文件“t.dll”和“test.dll”。它们都与包含上述程序的 .exe 文件位于同一目录中。.dll 文件唯一能做的就是一个简单的 Console.WriteLine。

所以这里的问题是：调用一个文件与 1 或两个线程导致成功，并将发布 Console.WriteLine 两次。但是，一旦我调用了 2 个不同的文件，每个线程 1 个文件，我在第二次调用中最终得到 NullReferenceException。

这都是用 C# 编码的。请帮忙 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:29:59.080

也许问题是因为您在不同的程序集中具有相同的类型名称“dis.Code”？当您尝试加载第二个程序集时，它会失败并返回 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:36:53.203

您可以使用[外部别名](http://msdn.microsoft.com/en-us/library/ms173212.aspx)和[命名空间别名限定符](http://msdn.microsoft.com/en-us/library/htccxtad.aspx)来加载属于不同程序集但具有相同命名空间的类型。

这已在[此处](http://blogs.msdn.com/b/abhinaba/archive/2005/11/30/498278.aspx)和[使用具有相同命名空间的两个 .NET 库中进行了](https://stackoverflow.com/questions/740991/using-two-net-libraries-with-the-same-namespace)解释。

# html - 单选按钮的单词太长

> ID：10620581
> 
> 赞同：0
> 
> 时间：2012-05-16T14:21:59.653
> 
> 标签：html, radio-button, translation

我有一个页面，我们正在即时将其翻译成德语。页面上有一组三个单选按钮，水平排列。在英语中，它们显示得很好，但在德语中，标签文本在右侧的按钮/标签之上分层。由于文本只是德语中的一个（长！）单词，因此不会进行换行。任何不会影响英语演示的修复建议（即，当英文文本换行时看起来很糟糕的非常大的边距)? 截图如下：

[问题截图 http://img13.imageshack.us/img13/2604/germantext.png](http://img13.imageshack.us/img13/2604/germantext.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:24:06.800

使用[软连字符](http://en.wikipedia.org/wiki/Soft_hyphen)( `&shy;`)。它将允许换行，显示连字符；但未显示其他内容。您的 CSS 显然允许换行（如在其他标签中所见） - 让它为您工作。例如

```
Super&shy;cali&shy;fragi&shy;listic&shy;expi&shy;ali&shy;docious 
```

将能够呈现为

```
Supercalifragilistic-
expialidocious 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:25:06.193

您是否尝试将 CSS`word-wrap`属性设置`break-word`为单选按钮？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T16:01:16.163

最好的解决方案是将替代（单选按钮及其标签）放在自己的一行上。这有利于可用性和可访问性，它解决了手头的问题。省事，省空间。

如果这不可行，请应用 Amadan 建议的方法，但要动态地应用。有多种方法可以在服务器端或客户端动态插入软连字符。查看[客户端连字符的演示](http://www.bytelevelbooks.com/code/javascript/hyphenation.html)，它甚至适用于混合语言内容（改变浏览器窗口宽度以查看效果）。该演示使用[Hyphenator.js](http://code.google.com/p/hyphenator/)。

# node.js - package.json 中的依赖项是什么 - nodejs

> ID：10620583
> 
> 赞同：8
> 
> 时间：2012-05-16T14:22:03.790
> 
> 标签：node.js, package, npm

在我的节点项目中，我将独立模块构建到以 main.js 作为入口点的文件夹中，并在与不同文件相同的文件夹中找到该模块的帮助程序。

```
Ex:
Aggregator:
     |___package.json
     |___main.js
     |___node_modules
         |_____helper1.js
         |_____helper2.js 
```

因此，节点将解决我所有助手对本地`node_modules`文件夹中模块 [Ex: Aggregator] 的依赖。上述结构的原因是，我不需要关心路径`require`

我使用 package.json 指定入口点是 main.js 以防`require`聚合器

```
Ex:
//Sample.js
require('Aggregator'); // Resolves to Aggregator/main.js 
```

例如：聚合器模块的 package.json

```
 {
        "name": "Aggregator"
      , "description": "Returns Aggregates"
      , "keywords": ["aggregate"]
      , "author": "Tamil"
      , "contributors": []
      , "dependencies": {
            "redis": "0.6.7"
        }
      , "lib"           : "."
      , "main"          : "./main.js"
      , "version"       : "1.0"
    } 
```

这里的依赖列是干什么用的？我提到[了这个](http://blog.nodejitsu.com/package-dependencies-done-right)链接。即使我将 redis 的版​​本指定为 10000 而没有任何警告，我的代码似乎也能正常工作。我尝试从项目中删除我的 redis 模块以测试节点是否选择它并解决依赖关系，但它没有。何时在 package.json 中使用该依赖属性？它只是供将来参考的注释吗？

**npm 版本 1.1.0-beta-4 ；节点版本 v0.6.6**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T14:28:56.787

该`dependencies`值用于指定给定模块（由 表示`package.json`）需要工作的任何其他模块。当您`npm install`从给定模块的根文件夹运行时，它将安装该`dependencies`哈希中列出的所有模块。

如果您没有`redis: 10000`在其中列出任何错误，我的猜测是您从未运行过`npm install`，因此它甚至从未尝试安装 redis。反过来，如果您的代码在没有 run 的情况下运行良好，那么您的代码`npm install`很可能一开始甚至不需要 redis，并且应该从`dependencies`哈希中删除该项目。

虽然并非其中的每个条目`package.json`对于理解日常开发都是必不可少的，但`dependencies`一定要注意这一点。我建议通读[npm 网站上的依赖项部分](http://npmjs.org/doc/json.html#dependencies)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-09T14:45:08.997

依赖关系不过是第三方包，或者我们可以说是使用 npm 安装的模块。前任。

```
{
      "name": "abc",
       "version": "1.0.0",
      "description": "",
       "main": "app.js",
     "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [
    "npm",
    "npm@latest",
    "-gnpm",
    "npm@latest",
    "-gnpm",
    "npm@latest",
    "-g"
  ],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.17.1",   //THIS IS THIRD PARTY PACKAGE/MODULES 
    "jade": "^1.11.0",
    "nano": "^8.2.2"
  }
} 
```

# python - How do I run Python through Apache Similar to PHP?

> ID：10620585
> 
> 赞同：-3
> 
> 时间：2012-05-16T14:22:05.377
> 
> 标签：python, apache

I am trying to set up the latest version of Python through the latest version of Apache HTTP server and I am clueless as to what I should do next?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:24:24.997

一种解决方案是使用[mod_python](http://www.modpython.org/)。另一个是[modwsgi](http://code.google.com/p/modwsgi/)。

我建议你阅读 Django Book 中关于部署的[章节](http://www.djangobook.com/en/2.0/chapter12/)。即使您不使用 Django，它也会让您接触到大多数 Python 开发人员使用的技术。

# google-maps - 在 Google 地图的叠加层中显示信息窗口

> ID：10620587
> 
> 赞同：0
> 
> 时间：2012-05-16T14:22:10.130
> 
> 标签：google-maps, google-maps-api-3

我要求每当我在覆盖的完整事件上创建一个覆盖（即矩形、多边形、圆形、使用绘图管理器的折线）时，我应该能够显示一个带有标签和文本框的信息窗口。

我将使用 TextBox 的内容将数据保存到数据库中。

我能够显示带有标签和文本框的 InfoWindow。我的问题是，当在 Overlay 的 Complete 事件上打开 infoWindow 时，默认情况下焦点应该在 Textbox 上而不触发任何事件。

我可以这样做吗？

如果我们不能在上述情况下做到这一点。请提出替代解决方案。

原谅英语。

谢谢，
卡利安巴萨

# language-agnostic - 在这种特殊情况下，我的构造函数应该做多少工作？

> ID：10620588
> 
> 赞同：0
> 
> 时间：2012-05-16T14:22:25.177
> 
> 标签：language-agnostic, constructor

我意识到这个问题已经被问过好几次了，但我想在我在这里研究的一个特定示例中对其进行框架化。我正在研究一个在网格上运行的有限元代码。网格在逻辑上是一个对象，在它被“构建”或构建之前，我们不能对它做任何事情。这似乎是有道理的，然后将网格参数传递给构造函数并让构造函数构建网格。在网上搜索，我看到一个普遍的观点，即这不一定是一个好主意，构造函数应该尽可能少做。

网格生成可能是一个漫长而复杂的过程。另一方面，网格在生成之前完全不可用，我会考虑它的构造。我可以将每个步骤映射为我希望客户端调用的方法，但是这些方法将始终相同，并且它们将始终使用相同的参数。即使内部结构发生变化，公共接口也极不可能发生变化。此外，客户端不应该关心网格生成细节可能是有道理的。考虑到这一点，在构造函数中完全生成网格并在之后处于准备使用状态似乎是有意义的。我还可以创建一个对客户端不透明的简单生成方法，但是为什么构造函数不能做同样的事情呢？它必须是可用的。

将这些东西放在构造函数中时，我应该注意这里是否存在隐患？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:28:09.227

您没有提到的另一种可能性是懒惰地执行昂贵的操作，即第一次需要它的结果。

这使得对象构造变得便宜，不会给客户端带来额外的调用方法的负担，并且如果从不使用对象，则完全避免了昂贵的操作。

主要缺点是复杂性略有增加，尤其是在多线程上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:36:43.737

构造函数需要构建之后将在您的方法中使用的“基本”构建块或元素。如果您的大多数方法都适用于网格，我将使用构造函数来生成网格。另一方面，如果大多数方法可以在比网格更小的元素上工作，那么也许你不应该将它包装在构造函数下。

# c# - 为什么必须为非查询打开连接而不是填充数据集？

> ID：10620592
> 
> 赞同：2
> 
> 时间：2012-05-16T14:22:37.007
> 
> 标签：c#, sql, windows, database-connection

当我在 C# 应用程序中连接到 SQL 数据源时，我可以使用以下代码填充数据集。请注意，我没有明确打开与数据源的连接。

```
SqlConnection cw_con = new SqlConnection("Server=Server;Database=Database;User=User;password=password");
SqlCommand cmd = new SqlCommand("SELECT * FROM Example WHERE value = value");
cmd.Connection = cw_con;

//Create DataSet
DataSet cw_ds = new DataSet("cw_ds");
SqlDataAdapter da = new SqlDataAdapter();
da.SelectCommand = cmd;
//Execute Command and Fill DataSet
da.Fill(cw_ds);
cw_ds.Clear(); 
```

但是，如果我想执行诸如 a 之类的非查询，`INSERT INTO`或者`UPDATE`为什么我必须使用 ? 显式打开连接`connection.Open();`？

```
SqlConnection cw_con = new SqlConnection("Server=Server;Database=Database;User=User;password=password");
cw_con.Open();
SqlCommand cmd = new SqlCommand("UPDATE example SET value = value WHERE value = value");
cmd.Connection = cw_con;
cmd.ExecuteNonQuery();
cw_con.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:25:08.550

来自[DataAdapter.Fill](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)文档

> 如果在调用 Fill 之前关闭连接，则打开它以检索数据，然后关闭。如果在调用 Fill 之前连接已打开，则它保持打开状态。

当您使用 SqlCommand 时，您使用的是较低级别的类，因此您需要自己管理连接。

这是一个用例，您不希望连接自动打开，因为它会被打开和关闭多次，最好简单地抛出异常

```
SqlCommand InsertCmd = new ("Insert statement", cw_con)

cw_con.Open();

foreach (var newitem in collection)
{
   --Set Parameters
   UpdateCmd.ExecuteNonQuery();
}

cw_con.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:25:30.060

那是因为 a`DataAdapter`在最初关闭时会隐式打开连接。如果之前关闭，它将在之后关闭它，否则连接保持打开状态。

来自[MSDN](http://msdn.microsoft.com/en-us/library/zxkb3c3d.aspx)：

> Fill 方法使用 SELECT 语句从数据源中检索数据。与选择命令关联的 IDbConnection 对象必须有效，但不需要打开。如果在调用 Fill 之前关闭了 IDbConnection，则打开它以检索数据，然后关闭它。如果在调用 Fill 之前连接已打开，则它保持打开状态。

使用 a 时，`SqlCommand`您必须自己明确地打开和关闭连接。

**作为旁注**：

1.  使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)避免 SQL 注入
2.  对任何实现使用[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)`IDisposable`，尤其是 Connections，因为它确保它尽快被处理/关闭，即使在出现错误的情况下也是如此

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T14:26:06.147

该文件指出

> Fill 方法使用关联的 SelectCommand 属性指定的 SELECT 语句从数据源中检索行。与 SELECT 语句关联的连接对象必须有效，但不需要打开。如果在调用 Fill 之前关闭连接，则打开它以检索数据，然后关闭。如果在调用 Fill 之前连接已打开，则它保持打开状态。

[在这里](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)查看更多信息。

# python - Python 的行为包的终端输出

> ID：10620593
> 
> 赞同：2
> 
> 时间：2012-05-16T14:22:39.897
> 
> 标签：python, bdd

当我运行[pypi 行为页面](http://pypi.python.org/pypi/behave)上显示的示例功能时，输出并不像我希望的那样：Given、When 和 Then 输出消息以灰色打印一次，一次以彩色打印。在每条彩色线的开头也会打印出奇怪的字符。

截屏：
![http://imgur.com/i2VoF](../Images/3173bdc38461c8aff8fcf5fc90e4a084.png)

当我运行使用 Selenium 的功能时，除了上述消息外，我还收到消息： No handlers could be found for logger "selenium.webdriver.remote.remote_connection"

欢迎任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:18:56.750

看起来它正在尝试为输出着色，但有些东西不起作用（或启用？）。尝试运行`python -m behave -c`

来自 configuration.py：（描述`-c`标志）

```
(('-c', '--no-color'), dict(action='store_false', dest='color',
     help="Disable the use of ANSI color escapes.")), 
```

截屏：

![没有着色的截图](../Images/f8d2fb47e1a218bdb3fb25f93032388e.png)

如果您想着色工作，我建议您阅读[Print in terminal with colours using Python?](https://stackoverflow.com/questions/287871/print-in-terminal-with-colors-using-python)

您可以尝试`\behave\formatter\ansi_escapes.py`为您的终端使用正确的 ANSI 转义修改文件 - 尝试使用[http://pypi.python.org/pypi/colorama上的转义列表](http://pypi.python.org/pypi/colorama)

# jar - java web start JARSigningException 通过远程访问认为 jar 已签名

> ID：10620599
> 
> 赞同：0
> 
> 时间：2012-05-16T14:22:52.023
> 
> 标签：jar, web, sign

通过远程访问运行 Java Web Start 时遇到问题。虽然我的 jar 已签名，但我收到控制台异常和错误：“无法启动应用程序”。例外：

```
com.sun.deploy.net.JARSigningException: Found unsigned entry in resource: http://hostmachine/myapp.jar
at com.sun.javaws.security.SigningInfo.getCommonCodeSignersForJar(Unknown Source)
at com.sun.javaws.security.SigningInfo.check(Unknown Source)
at com.sun.javaws.LaunchDownload.checkSignedResourcesHelper(Unknown Source)
at com.sun.javaws.LaunchDownload.checkSignedResources(Unknown Source)
at com.sun.javaws.Launcher.prepareResources(Unknown Source)
at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.launch(Unknown Source)
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我的 index.html：

```
<body>
<!-- ... -->
<script src=
  "http://www.java.com/js/deployJava.js"></script>
<script>
    // using JavaScript to get location of JNLP
    // file relative to HTML page
    var dir = location.href.substring(0,
        location.href.lastIndexOf('/')+1);
    var url = dir + "myapp.jnlp";
    deployJava.createWebStartLaunchButton(url, '1.6.0');
</script>
<!-- ... --> 
```

myapp.jnlp：

```
<?xml version="1.0" encoding="UTF-8"?><jnlp spec="1.0+" codebase="http://hostmachine" href="myapp.jnlp">
<information>
    <title>title</title>
    <vendor>company</vendor>
    <offline-allowed/>
</information>
<security>
    <all-permissions/>
</security>
<resources>
    <!-- Application Resources -->
    <j2se version="1.6+" href=
       "http://java.sun.com/products/autodl/j2se"/>
    <jar href="myapp.jar"
        main="true" />

</resources>
<application-desc
     name="name">
 </application-desc>
 <update check="background"/> 
```

我的keygen.bat：

```
"C:\Program Files (x86)\Java\jre7\bin\keytool" -genkey -keystore myapp.keys -keypass mypass -alias jaxb-workshop.dev.java.net -validity 256 
```

我的 jarsigner.bat：

```
C:\glassfish3\jdk\bin\jarsigner.exe -keystore myapp.keys -storepass mypass myapp.jar jaxb-workshop.dev.java.net
C:\glassfish3\jdk\bin\jarsigner.exe -verify -certs -verbose -keystore myapp.keys myapp.jar jaxb-workshop.dev.java.net 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T09:25:31.163

Sorry guys for disturbing, the restart of the server computer definitely fixed it :)

# c - IEEE754 浮点值的可移植序列化

> ID：10620601
> 
> 赞同：12
> 
> 时间：2012-05-16T14:22:58.943
> 
> 标签：c, floating-point, portability, ieee-754, endianness

我最近一直在研究一个需要存储和加载大量数据的系统，包括单精度浮点值。我决定对整数的网络字节顺序进行标准化，并决定以大端格式存储浮点值，即：

```
 |-- Byte 0 --| |-- Byte 1 -|  Byte 2   Byte 3
  #      ####### #     ####### ######## ########
Sign     Exponent          Mantissa
 1b    8b, MSB first    23b, MSB first 
```

理想情况下，我想提供`htonl()`and之类的函数`ntohl()`，因为我已经使用这些函数来擦拭整数，并且我还想以一种尽可能独立于平台的方式来实现它（同时假设`float`类型对应于 IEEE754 32位浮点值）。有没有办法，可能使用`ieee754.h`，来做到这一点？

我有一个*似乎*可行的答案，我将在下面发布它，但它似乎非常缓慢且效率低下，我将不胜感激有关如何使其更快和/或更可靠的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:10:24.443

简单得多，并且取决于与您相同的假设（即 float 和 integer 类型具有相同的字节顺序，并且*几乎*普遍有效 - 实际上您永远不会遇到不正确的系统）：

```
#include <string.h>

float htonf(float val) {
    uint32_t rep;
    memcpy(&rep, &val, sizeof rep);
    rep = htonl(rep);
    memcpy(&val, &rep, sizeof rep);
    return val;
} 
```

任何相当好的编译器都会优化掉这两个`memcpy`调用；它们的存在是为了克服过于急切的严格别名优化，因此这最终与`htonl`单个函数调用的开销一样有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:30:30.763

正如上面问题中提到的，我有一个解决我的问题的方法，但我并不特别喜欢它，我欢迎其他答案，所以我在这里而不是在问题中发布它。特别是，它似乎可能很慢，而且我不确定它是否会破坏严格的混叠以及其他潜在问题。

```
#include <ieee754.h>

float
htonf (float val)
{
  union ieee754_float u;
  float v;
  uint8_t *un = (uint8_t *) &v;

  u.f = val;
  un[0] = (u.ieee.negative << 7) + ((u.ieee.exponent & 0xfe) >> 1);
  un[1] = ((u.ieee.exponent & 0x01) << 7) + ((u.ieee.mantissa & 0x7f0000) >> 16);
  un[2] = (u.ieee.mantissa & 0xff00) >> 8;
  un[3] = (u.ieee.mantissa & 0xff);
  return v;
}

float
ntohf (float val)
{
  union ieee754_float u;
  uint8_t *un = (uint8_t *) &val;

  u.ieee.negative = (un[0] & 0x80) >> 7;
  u.ieee.exponent = (un[0] & 0x7f) << 1;
  u.ieee.exponent += (un[1] & 0x80) >> 7;
  u.ieee.mantissa = (un[1] & 0x7f) << 16;
  u.ieee.mantissa += un[2] << 8;
  u.ieee.mantissa += un[3];

  return u.f;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T12:44:01.017

这是一个可移植的 IEEE 754 写例程。无论主机上的浮点表示如何，它将以 IEEE 754 格式写入双精度。

```
/*
* write a double to a stream in ieee754 format regardless of host
*  encoding.
*  x - number to write
*  fp - the stream
*  bigendian - set to write big bytes first, elee write litle bytes
*              first
*  Returns: 0 or EOF on error
*  Notes: different NaN types and negative zero not preserved.
*         if the number is too big to represent it will become infinity
*         if it is too small to represent it will become zero.
*/
static int fwriteieee754(double x, FILE *fp, int bigendian)
{
    int shift;
    unsigned long sign, exp, hibits, hilong, lowlong;
    double fnorm, significand;
    int expbits = 11;
    int significandbits = 52;

    /* zero (can't handle signed zero) */
    if (x == 0)
    {
        hilong = 0;
        lowlong = 0;
        goto writedata;
    }
    /* infinity */
    if (x > DBL_MAX)
    {
        hilong = 1024 + ((1 << (expbits - 1)) - 1);
        hilong <<= (31 - expbits);
        lowlong = 0;
        goto writedata;
    }
    /* -infinity */
    if (x < -DBL_MAX)
    {
        hilong = 1024 + ((1 << (expbits - 1)) - 1);
        hilong <<= (31 - expbits);
        hilong |= (1 << 31);
        lowlong = 0;
        goto writedata;
    }
    /* NaN - dodgy because many compilers optimise out this test, but
    *there is no portable isnan() */
    if (x != x)
    {
        hilong = 1024 + ((1 << (expbits - 1)) - 1);
        hilong <<= (31 - expbits);
        lowlong = 1234;
        goto writedata;
    }

    /* get the sign */
    if (x < 0) { sign = 1; fnorm = -x; }
    else { sign = 0; fnorm = x; }

    /* get the normalized form of f and track the exponent */
    shift = 0;
    while (fnorm >= 2.0) { fnorm /= 2.0; shift++; }
    while (fnorm < 1.0) { fnorm *= 2.0; shift--; }

    /* check for denormalized numbers */
    if (shift < -1022)
    {
        while (shift < -1022) { fnorm /= 2.0; shift++; }
        shift = -1023;
    }
    /* out of range. Set to infinity */
    else if (shift > 1023)
    {
        hilong = 1024 + ((1 << (expbits - 1)) - 1);
        hilong <<= (31 - expbits);
        hilong |= (sign << 31);
        lowlong = 0;
        goto writedata;
    }
    else
        fnorm = fnorm - 1.0; /* take the significant bit off mantissa */

    /* calculate the integer form of the significand */
    /* hold it in a  double for now */

    significand = fnorm * ((1LL << significandbits) + 0.5f);

    /* get the biased exponent */
    exp = shift + ((1 << (expbits - 1)) - 1); /* shift + bias */

    /* put the data into two longs (for convenience) */
    hibits = (long)(significand / 4294967296);
    hilong = (sign << 31) | (exp << (31 - expbits)) | hibits;
    x = significand - hibits * 4294967296;
    lowlong = (unsigned long)(significand - hibits * 4294967296);

writedata:
    /* write the bytes out to the stream */
    if (bigendian)
    {
        fputc((hilong >> 24) & 0xFF, fp);
        fputc((hilong >> 16) & 0xFF, fp);
        fputc((hilong >> 8) & 0xFF, fp);
        fputc(hilong & 0xFF, fp);

        fputc((lowlong >> 24) & 0xFF, fp);
        fputc((lowlong >> 16) & 0xFF, fp);
        fputc((lowlong >> 8) & 0xFF, fp);
        fputc(lowlong & 0xFF, fp);
    }
    else
    {
        fputc(lowlong & 0xFF, fp);
        fputc((lowlong >> 8) & 0xFF, fp);
        fputc((lowlong >> 16) & 0xFF, fp);
        fputc((lowlong >> 24) & 0xFF, fp);

        fputc(hilong & 0xFF, fp);
        fputc((hilong >> 8) & 0xFF, fp);
        fputc((hilong >> 16) & 0xFF, fp);
        fputc((hilong >> 24) & 0xFF, fp);
    }
    return ferror(fp);
} 
```

# c# - .NET 中的正则表达式替换案例

> ID：10620602
> 
> 赞同：2
> 
> 时间：2012-05-16T14:22:59.063
> 
> 标签：c#, .net, regex

我试图替换`<number></number>`元素中的所有数字，就`xxx`好像数字长度是 15 或 16。

例如`<number>1234567812345678</number>`-> `<number>xxx</number>`

我做了类似下面的事情，但即使它们的长度大于 16，它也会替换数字。如何防止这种情况？

```
string test = "<number>1234567812345678</number><number>12345671234567</number><number>1234567123456712345678</number>";

test = Regex.Replace(test, @"([\d]{15,16})", "xxx"); 
```

不需要的输出

```
<number>xxx</number><number>12345671234567</number><number>xxx345678</number> 
```

想要的输出

```
 <number>xxx</number><number>12345671234567</number><number>1234567123456712345678</number> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:26:14.417

```
string test = "<number>1234567812345678</number><number>12345671234567</number><number>1234567123456712345678</number>";

test = Regex.Replace(test, @"(?<=>)\d{15,16}(?=<)", "xxx"); 
```

这确保数字前面是 a `>`，后面是 a `<`，使用[lookaround](http://www.regular-expressions.info/lookaround.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:29:57.823

您没有指定数字前后应`<number>`为`</number>`. 你可以这样做：

```
test = Regex.Replace(test, @"(?<=<number>)([\d]{15,16})(?=</number>)", "xxx"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:28:38.080

默认情况下，正则表达式将替换子字符串，除非您告诉它字符串应该如何结束。你需要用匹配器围绕你的 [\d]{15,16} 来对抗标签，如下所示：

```
Regex.Replace(test, @"<number>[\d]{15,16}</number>", @"<number>xxx</number>"); 
```

# xml - XSD 属性的选项

> ID：10620604
> 
> 赞同：1
> 
> 时间：2012-05-16T14:23:00.297
> 
> 标签：xml, xsd, schema

是否可以为 XSD 属性定义选项？我希望元素“where”具有属性“logic”，并且只能具有值“OR”或“AND”。

例子：

```
<where logic="OR"> <!-- valid -->
    ...
</where>

<where logic="XPTO"> <!-- invalid -->
    ...
</where> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:05:18.763

是的，这是可能的。

首先你必须定义一个简单的类型：

```
<xs:simpleType name="boolString">
   <xs:restriction base="xs:string">
      <xs:enumeration value="AND"/>
      <xs:enumeration value="OR"/>
   </xs:restriction>
</xs:simpleType> 
```

然后你必须定义一个`where`包含`logic`type 属性的元素`boolString`：

```
<xs:element name="where">
   <xs:complexType>
      <xs:attribute name="logic" type="boolString" />
   </xs:complexType>
</xs:element> 
```

# blackberry - Blackberry - 在启动时显示对话框并等待对话框关闭

> ID：10620605
> 
> 赞同：1
> 
> 时间：2012-05-16T14:23:01.440
> 
> 标签：blackberry, dialog, startup

我尝试了很多，现在我需要你的帮助。我想做的是：当黑莓应用程序启动时，会弹出一个是/否对话框。如果用户选择“是”，请执行某些操作，然后继续启动。如果用户选择“否”退出应用程序。

我写了一个 SSCCE，如果你选择“是”，它应该会振动，之后你应该会听到声音。当然我知道，代码在调用 Alert.vibrate() 之后继续，它不会等待振动完成。无论如何，这只是一个例子。对 vibrate() 的调用应该首先出现，并且 dialogClosed() 应该在播放声音之前完全处理。

SSCCE 是我目前所获得的。我尝试了很多其他的东西。我敢肯定这不会那么难。我只是不明白。

这里是：

```
package TestDialog;

import net.rim.device.api.system.Alert;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.DialogClosedListener;

public class TestDialog extends UiApplication
{

public static short[] SOUND_ALERT = { 523, 200, //C for 200ms
                0, 200, //Pause 200ms
                554, 200, //C# 200ms
                0, 200, //Pause 200ms
                587, 200, //D 200ms
                0, 200, //Pause 200ms
                622, 200         //D# 200ms         
                                  };

/**
 * @param args
 */
public static void main(final String[] args)
{

    final TestDialog test = new TestDialog();
    test.enterEventDispatcher();

}

public TestDialog()
{

    //the dialog
    final Dialog d = new Dialog(Dialog.D_YES_NO, "vibrate?", Dialog.OK, Bitmap.getPredefinedBitmap(Bitmap.QUESTION), Dialog.FIELD_TOP);
    d.setDialogClosedListener(new DialogClosedListener()
    {

        public void dialogClosed(final Dialog dialog, final int choice)
        {
            if (d.getSelectedValue() == Dialog.YES)
            {
                Alert.startVibrate(2000);
                //do something which takes some time
            }
            else
            {
                System.exit(0);
            }

        }
    });

    //show the dialog
    showDialog(d);

    //now wait for the dialog to call notify
    try
    {
        synchronized (this)
        {
            this.wait();
        }
    }
    catch (final Exception e)
    {
        System.out.println(e.getMessage());
    }

    //finally AFTER the dialog has been closed and everything in dialogClosed() has been done, play a sound
    Alert.startAudio(SOUND_ALERT, 100);

}

private void showDialog(final Dialog d)
{

    UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
        {
            d.doModal();
            this.notify();
        }
    });

}
} 
```

好的，其他一些 SSCCE。这会启动并显示一个对话框，但随后会引发 IllegalMonitorExcpetion：

```
package TestDialog;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public class TestDialog extends UiApplication
{

public static short[] SOUND_ALERT = { 523, 200, //C for 200ms
                0, 200, //Pause 200ms
                554, 200, //C# 200ms
                0, 200, //Pause 200ms
                587, 200, //D 200ms
                0, 200, //Pause 200ms
                622, 200         //D# 200ms         
                                  };

/**
 * @param args
 */
public static void main(final String[] args)
{

    final TestDialog test = new TestDialog();
    test.enterEventDispatcher();

}

public TestDialog()
{

    UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
        {
            //the dialog
            final Dialog d = new Dialog(Dialog.D_YES_NO, "vibrate?", Dialog.OK, Bitmap.getPredefinedBitmap(Bitmap.QUESTION), Dialog.FIELD_TOP);

            if (d.doModal() == Dialog.YES)
            {
                System.out.println("selection made yes");
                this.notify();
            }
            else
            {
                System.out.println("selection made no");
                System.exit(0);
            }

        }
    });

        try
        {
            this.wait();
        }
        catch (final Exception e)
        {
            e.printStackTrace();
        }

    //finally AFTER the dialog has been closed and everything in dialogClosed() has been done, play a sound
    System.out.println("done");
}

} 
```

因此，我在 wait() 调用周围放置了一个同步块，因为我读过，在调用 wait() 时对象必须是同步的。但现在该应用程序什么也没显示。它运行主要方法，但在某处停止。在模拟器中发生了非常奇怪的事情：当模拟器仍在启动中并且显示器上写着“调试器附加”时，应用程序的主方法被调用。好吧，这里是带同步块的 SSCCE。还是不行。

```
package TestDialog;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public class TestDialog extends UiApplication
{

public static short[] SOUND_ALERT = { 523, 200, //C for 200ms
                0, 200, //Pause 200ms
                554, 200, //C# 200ms
                0, 200, //Pause 200ms
                587, 200, //D 200ms
                0, 200, //Pause 200ms
                622, 200         //D# 200ms         
                                  };

/**
 * @param args
 */
public static void main(final String[] args)
{

    final TestDialog test = new TestDialog();
    test.enterEventDispatcher();

}

public TestDialog()
{

    UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run()
        {
            //the dialog
            final Dialog d = new Dialog(Dialog.D_YES_NO, "vibrate?", Dialog.OK, Bitmap.getPredefinedBitmap(Bitmap.QUESTION), Dialog.FIELD_TOP);

            if (d.doModal() == Dialog.YES)
            {
                System.out.println("selection made yes");
                this.notify();
            }
            else
            {
                System.out.println("selection made no");
                System.exit(0);
            }

        }
    });

    synchronized (this)
    {
        try
        {
            this.wait();
        }
        catch (final Exception e)
        {
            e.printStackTrace();
        }
    }

    //finally AFTER the dialog has been closed and everything in dialogClosed() has been done, play a sound
    System.out.println("done");
}

} 
```

最后我尝试利用忙碌的等待。仍然没有成功。对话框只是没有弹出。即使在主线程的 while 循环中使用 Thread.sleep(1000)，UI 线程似乎也不起作用。这是忙于等待的 SSCCE：

```
 package TestDialog;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public class TestDialog extends UiApplication
{
    /**
     * @param args
     */
    public static void main(final String[] args)
    {

        final TestDialog test = new TestDialog();
        test.enterEventDispatcher();

    }

    private volatile boolean _blocked = true;

    public TestDialog()
    {

        UiApplication.getUiApplication().invokeLater(new Runnable()
        {
            public void run()
            {
                //the dialog
                final Dialog d = new Dialog(Dialog.D_YES_NO, "vibrate?", Dialog.OK, Bitmap.getPredefinedBitmap(Bitmap.QUESTION), Dialog.FIELD_TOP);

                if (d.doModal() == Dialog.YES)
                {
                    System.out.println("selection made yes");
                    _blocked = false;
                }
                else
                {
                    System.out.println("selection made no");
                    System.exit(0);
                }

            }
        });

        while (_blocked)
        {
            try
            {
                Thread.sleep(1000);
            }
            catch (final Exception e)
            {
                //safety catch
            }
        }
        finish();

    }

    private void finish()
    {
        System.out.println("done");
    }

} 
```

谢谢你的帮助。

哈弗布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:29:24.947

使用 invokeAndWait 代替 invokeLater。

```
private void showDialog(final Dialog d)
{

    UiApplication.getUiApplication().invokeAndWait(new Runnable()
    {
        public void run()
        {
            d.doModal();
            this.notify();
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:39:08.400

嗨，我终于在这里的黑莓论坛上得到了答案：http: [//supportforums.blackberry.com/t5/Java-Development/Startup-YES-NO-Dialog-should-stop-the-launchign-process-of-the/ mp/1725085](http://supportforums.blackberry.com/t5/Java-Development/Startup-YES-NO-Dialog-should-stop-the-launchign-process-of-the/m-p/1725085)

对我有用的最终解决方案（看起来比我上面所做的一切都好）如下：

```
 package TestDialog;

import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.RichTextField;
import net.rim.device.api.ui.container.MainScreen;

public class TestDialog extends UiApplication implements Runnable
{
    /**
     * @param args
     */
    public static void main(final String[] args)
    {

        final TestDialog test = new TestDialog();
        test.invokeLater(test);

        test.enterEventDispatcher();

    }

    public TestDialog()
    {

    }

    public void run()
    {

        final int answer = Dialog.ask(Dialog.D_YES_NO, "continue?");
        //        pushGlobalScreen(new Dialog(Dialog.D_YES_NO, "continue?", 0, null, Dialog.GLOBAL_STATUS), 1, TestDialog.GLOBAL_QUEUE | TestDialog.GLOBAL_MODAL);

        if (answer == Dialog.YES)
        {
            System.out.println("user clicked yes");
        }
        else
        {
            System.exit(0);
        }

        pushScreen(new MyScreen("App loaded"));
    }

    class MyScreen extends MainScreen
    {

        public MyScreen(final String msg)
        {

            final LabelField title = new LabelField("First Screen", LabelField.ELLIPSIS | LabelField.USE_ALL_WIDTH);
            setTitle(title);
            this.add(new RichTextField(msg));

        }

    }

} 
```

感谢双方的大力支持。

# macos - 在 Mac OS X 中使用命令行终止“loginwindow”进程

> ID：10620606
> 
> 赞同：2
> 
> 时间：2012-05-16T14:23:08.220
> 
> 标签：macos, unix

到目前为止，我已经编写了以下 unix 命令：

```
ps -Ajc | grep loginwindow | cut -c 16-20 | sed 's/ //g' 
```

这会抓取“loginwindow”进程，使用 cut 和 sed 对其进行过滤以返回“loginwindow”进程的编号。

我想知道如何将检索到的号码用于流程。

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T18:13:10.567

这似乎是一个漫长的过程。为什么不直接使用`killall loginwindow`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:48:59.797

```
kill `ps -Ajc | grep loginwindow | cut -c 16-20 | sed 's/ //g'` 
```

# android - 即使已安装 Titanium studio 也找不到 android 2.2

> ID：10620607
> 
> 赞同：1
> 
> 时间：2012-05-16T14:23:09.533
> 
> 标签：android, sdk, installation, titanium

我今天过得很艰难。我已经在 Titanium Studio 和 android sdk 上安装了最新版本。当我想在 TS 中创建一个新项目时，我没有 android stupport。因此，我尝试通过将 TS 指向 sdk 安装目录（C:\Android\android-sdk-r18）来手动设置它。

然后我得到这个错误：

> Titanium SDK Home：Desktop-SDK根路径'C:\Users\Dean\AppData\Roaming\Titanium\sdk\win32'不是目录。Android SDK 主页：异常，Android SDK 中没有 android-8 或 android2.2。位置 0 的意外字符 (T)；

这绝对是垃圾，因为我的 sdk 中大部分都安装了 android 2.2 到 android 4.0.3。

PS - 我正在运行 Windows 7 64 位，安装了 java 1.7 32 位。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:56:36.403

我们只是花了几天的时间来解决这个问题。问题出在您安装的最新版本的移动 SDK 上。Titanium Studio 实际上使用以下脚本来验证配置窗口中的 Android SDK 路径：

MAC 路径如下所示：

/Library/Application Support/Titanium/mobilesdk/osx/ ***sdk_version_number_here*** /android/avd.py

根据您的帖子，您的路径可能类似于：

C:\Users\Dean\AppData\Roaming\Titanium\mobilesdk\win32\ ***sdk_version_number_here*** \android\avd.py

如果您浏览到该文件夹​​并查找该脚本，则它可能已丢失。我们刚刚删除了那个版本的 sdk（对我们来说是 2.0.1.GA2）。然后转到帮助-> 检查更新以重新安装最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T10:45:36.670

1.前往`Help->Install Titanium sdk from url`

2.添加这个网址 - [http://api.appcelerator.net/p/v1/release-download?token=b4pNB8S6](http://api.appcelerator.net/p/v1/release-download?token=b4pNB8S6)

3.让它下载（大约48 MB）

4.重启钛工作室。它应该一切正常。现在桌面sdk路径不应该有任何错误。

对于缺少 android sdk 错误：-

`Make sure you have android sdk version 2.2 installed`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T14:38:15.157

这个[答案](http://developer.appcelerator.com/question/136858/titanium-sdk-home-the-desktop-sdkaniumsdkwin32-is-not-a-directory#answer-238698)可能对你有用。另外我认为你需要使用 32 位 java `1.6`，因为钛工作室不适用于 java 1.7

基本上你需要把 Titan-sdk 放在 C:\Users\Dean\AppData\Roaming\Titanium\mobilesdk\win32 文件夹中。

[您可以从此处](http://cloud2.appcelerator.net/production/2.0.1.GA2.17042012152423/mobilesdk-2.0.1.GA2-win32.zip)手动下载压缩文件，将文件（mobilesdk 和模块文件夹）解压缩到`C:\Users\Dean\AppData\Roaming\Titanium\`

或者你需要做`Titanium Studio->help->check for titanium sdk update`。

我宁愿你和`"check for titanium sdk update"`

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T18:48:16.890

以下是错误的解决方案：

*   Titanium SDK Home：Desktop-SDK根路径'C:\Users\Dean\AppData\Roaming\Titanium\sdk\win32'不是目录或在Mac
*   【Titanium SDK Home】Desktop-SDK根路径/Library/Application Support/Titanium/sdk/osx'不是目录

    1.  [从这里](http://developer.appcelerator.com/blog/2011/09/introducing-titanium-desktop-sdk-1-2-release-candidate-4.html)下载您的 SDK [Mac/Win]
    2.  解压并将所有文件夹（模块应合并）放到 Titanium 的位置：
        *   对于 Win 路径是 'C:\Users\xxx\AppData\Roaming\Titanium\'
        *   对于 Mac 路径是 '/xxx/Library/Application Support/Titanium/'
    3.  瞧。

# android - 具有“按需插件”设置的移动 HTML5 音频播放器

> ID：10620612
> 
> 赞同：1
> 
> 时间：2012-05-16T14:23:31.683
> 
> 标签：android, ios, flash, html5-audio

我一直在尝试找到一个可以在手机上运行的 HTML5 音频播放器脚本（特别是在 Android 和 iOS 上）。如果它只是关于 Android，我会使用 Flash 播放器 - 但我需要一个适用于两个平台的解决方案。

到目前为止，我尝试过的所有播放器的问题是 Android 手机（股票浏览器和 Dolphin）上的“按需加载插件”设置。如果该设置处于活动状态（我相信它是默认设置），HTML5 播放器将显示而不是 Flash 后备。但由于某种原因，股票浏览器和 Dolphin 都无法将音频文件播放为 HTML5。

并且由于默认情况下禁用了插件，因此 Flash 后备是不可见的，并且无法像往常一样激活。因此，本质上，启用了“按需”设置的 Android 设备根本无法播放音频文件。

禁用此设置后，是否有任何播放器实际上可以立即工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:21:19.767

[我从 iPhone 上的Buzz](http://buzz.jaysalvat.com/)和我的 android nexus 中获得了很好的音频。它不会像[jplayer](http://jplayer.org/)那样回退到 flash。

# c++ - ostringstream 从 VS6 到 VS2010 的转换

> ID：10620615
> 
> 赞同：1
> 
> 时间：2012-05-16T14:23:42.250
> 
> 标签：c++, ostringstream

我的代码在 VS6 下运行良好，但在 VS2010 中出现错误：

```
void CGreatString::operator>> (char * lpszDest)
{
strcpy (lpszDest, str());
rdbuf()->freeze(0);
} 
```

我发现[这个](https://stackoverflow.com/questions/4956293/ostrstream-unpredicted-behavior-in-vs-2008)问题类似于我的问题，但它仍然没有工作......

所以据我了解， ostrstream 在 VS2010 中已被弃用，所以我尝试了这个：

```
void CGreatString::operator>> (char * lpszDest)
{
ostringstream os;
string str = os().str();                     //Error 1 and 2
strcpy (lpszDest, str.c_str());
os.rdbuf()->freeze(0);                       //Error 3
} 
```

但我仍然收到错误：

1- 错误 C2064：术语不计算为采用 0 个参数的函数

2-错误C2228：'.str'的左边必须有类/结构/联合

3- 错误 C2039：“冻结”：不是“std::basic_stringbuf<_Elem,_Traits,_Alloc>”的成员

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:05:50.637

从对我的问题的评论中，我已经能够纠正它。谢谢！

```
void CGreatString::operator>> (char * lpszDest)
{
    ostringstream os;
    string str = os.str();
    strcpy (lpszDest, str.c_str());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:54:12.557

所以迷你降价在评论中不起作用。太好了，这只是炉排。

```
void CGreatString::operator>> (char * lpszDest)
{
    // copy lpszDest into my CGreatString
    // The code you write does nothing at all.
} 
```

# wpf - 径向菜单周围的 WPF 拱形文本

> ID：10620629
> 
> 赞同：1
> 
> 时间：2012-05-16T14:24:35.630
> 
> 标签：wpf, pixelsense

我正在 WPF 中为 Microsoft ~~Surface~~ Pixelsense 创建一个径向菜单。现在我有多个表面按钮组成菜单。它们通过围绕菜单中心以均匀弧度步长旋转来围绕圆圈排列，这样文本的顶部总是接触圆圈。我希望按钮中的文本弯曲的量与构成菜单的圆圈相同。这样他们就可以勾勒出菜单圈。

**如何弯曲多个按钮中的文本以使其具有与构成菜单的圆圈相同的曲线量？**

谢谢，安德鲁

# java - 在 JTabbedPane 标头中添加 JLabel

> ID：10620630
> 
> 赞同：4
> 
> 时间：2012-05-16T14:24:36.667
> 
> 标签：java, swing, jlabel, jdialog, jtabbedpane

我有这个带有 JTabbedPane 的 JDialog：

![在此处输入图像描述](../Images/d6190f3225a2994aba90486729ebf537.png)

我只想在 JTabbedPane 的右上角添加一个 JLabel，这样我就可以触发一些事件（例如关闭 JDialog）。而且我不想让它成为一个JFrame。

PS：我知道这可能是重复的，但没有一个回复给我一个解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T15:27:19.560

好吧，实际上在 Swing 中不支持在 JTabbedPane 内定位。但是你总是可以用布局和图层制作一些街头魔术：

```
public static void main ( String[] args )
{
    try
    {
        UIManager.setLookAndFeel ( UIManager.getSystemLookAndFeelClassName () );
    }
    catch ( Throwable e )
    {
        e.printStackTrace ();
    }

    JFrame frame = new JFrame ();
    frame.setUndecorated ( true );

    frame.setLayout ( new LayoutManager ()
    {
        private List<Component> special = new ArrayList<Component> ();

        public void addLayoutComponent ( String name, Component comp )
        {
            if ( name != null )
            {
                special.add ( comp );
            }
        }

        public void removeLayoutComponent ( Component comp )
        {
            special.remove ( comp );
        }

        public Dimension preferredLayoutSize ( Container parent )
        {
            Dimension ps = new Dimension ();
            for ( Component component : parent.getComponents () )
            {
                if ( !special.contains ( component ) )
                {
                    Dimension cps = component.getPreferredSize ();
                    ps.width = Math.max ( ps.width, cps.width );
                    ps.height = Math.max ( ps.height, cps.height );
                }
            }
            return ps;
        }

        public Dimension minimumLayoutSize ( Container parent )
        {
            return preferredLayoutSize ( parent );
        }

        public void layoutContainer ( Container parent )
        {
            Insets insets = parent.getInsets ();
            for ( Component component : parent.getComponents () )
            {
                if ( !special.contains ( component ) )
                {
                    component.setBounds ( insets.left, insets.top,
                            parent.getWidth () - insets.left - insets.right,
                            parent.getHeight () - insets.top - insets.bottom );
                }
                else
                {
                    Dimension ps = component.getPreferredSize ();
                    component.setBounds ( parent.getWidth () - insets.right - 2 - ps.width,
                            insets.top + 2, ps.width, ps.height );
                }
            }
        }
    } );

    final JTabbedPane tabbedPane = new JTabbedPane ();
    tabbedPane.addTab ( "Tab1", new JLabel () );
    tabbedPane.addTab ( "Tab2", new JLabel () );
    tabbedPane.addTab ( "Tab3", new JLabel () );
    frame.add ( tabbedPane );

    final JLabel label = new JLabel ( "Close X" );
    label.addMouseListener ( new MouseAdapter ()
    {
        public void mousePressed ( MouseEvent e )
        {
            System.exit ( 0 );
        }
    } );
    frame.add ( label, "special", 0 );

    frame.setSize ( 200, 150 );
    frame.setLocationRelativeTo ( null );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );
} 
```

这将在任何地方工作，没有任何问题。请注意，标签将始终位于右上角，并且不会在其他 OS LaF（如 Mac OS laf）上定位自身（除非您修改代码以支持更多“功能”），其中选项卡可能位于中间。如果标签与标签交叉，它也会被绘制在标签上。

所以你会得到这样的东西：

![在此处输入图像描述](../Images/be0ffb6d6316fb9845d939f5e8943344.png)

无论如何，您可以轻松地修改应用到布局内的 JLabel 边界以制作一些侧间距等......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T15:17:31.217

这可以`TabbedPaneUI`通过扩展`BasicTabbedPaneUI`或编写您自己的来完成`MetalTabbedPaneUI`。但这将很难写。

我相信你想实现类似关闭按钮的东西（下面也适用于 JLabel）

*   我会尝试在[GlassPane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)和 Layers上实现这个按钮

或者

*   （如果您的 JDialog 不可调整大小）您可以`setLayout(null)`为组件的位置和大小提供硬编码值并`JButton`添加`JTabbedPane`

或者

*   您可以在内容窗格上覆盖paintComponents 并绘制您自己的按钮（或由“假”JButton 提供）。接下来 - 你必须`setMouseListener`在 JTabbedPane 上检查鼠标点击位置是否在按钮的范围内。当然 - 您需要实现按钮的视觉状态（按下、悬停等）或只是将事件传递给`faked`JButton 实例。

# graphics - 高级类 Wordle 计算

> ID：10620636
> 
> 赞同：0
> 
> 时间：2012-05-16T14:24:44.713
> 
> 标签：graphics

我看过[这个](https://stackoverflow.com/questions/342687/algorithm-to-implement-a-word-cloud-like-wordle)关于类似 Wordle 的算法的讨论。它真的很棒而且很有趣，但是提议的开源库，就像 Wordle 一样，有点有限。

例如，在给定形状和带有“重量”的单词的情况下，我该如何做如下图所示的事情。我的意思当然是以编程方式使用片段或库。

![类型海报](../Images/d063d92d1a8e2ab3609b15a6a68dc06c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T22:08:17.707

我想如果你有一些可以处理文本布局的代码，这样单词就不会相互交叉（wordle 当然是[一个很好的例子](http://static.mrfeinberg.com/bv_ch03.pdf)），添加一些额外的线条艺术/多边形形状作为输入并不太难让文本布局也考虑到这一点。

# internet-explorer - 为什么我的带有 _parent 的 window.open() 在 IE 中不起作用？

> ID：10620644
> 
> 赞同：0
> 
> 时间：2012-05-16T14:25:10.513
> 
> 标签：internet-explorer, google-chrome, window.open

我创建了一个按钮，点击它应该会打开 google.com 的弹出窗口。如果您在 Chrome 中测试 JSFiddle，您会发现它可以工作，但在 IE 中却不能...

为什么这在 IE 中不起作用，但在 Chrome 中却起作用？

```
<input type="button" value="Print Timetable" class="printButton cap_button hubActionButton" onClick="window.open('http://www.google.com', ' _parent','height=550, width=800');"/>​ 
```

[http://jsfiddle.net/vyLwu/4/](http://jsfiddle.net/vyLwu/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:51:35.237

您正在为第二个参数指定“_parent”，但这不是一个有效的选项。您的意思是使用“_parent”吗？请参阅此处的 w3 文档：http: [//www.w3schools.com/jsref/met_win_open.asp](http://www.w3schools.com/jsref/met_win_open.asp)

# sql-server - 合并两个表，重复键

> ID：10620645
> 
> 赞同：1
> 
> 时间：2012-05-16T14:25:11.383
> 
> 标签：sql-server, performance, indexing, primary-key

*我对此很陌生，我可能（可能会？）时不时说些胡言乱语，请随时纠正我；）

我正在使用不同的主键/索引策略，并且想知道以下内容。在许多情况下，选择 GUID 作为主键是为记录提供跨任何数据库的唯一标识。

现在使用 GUID 作为主键（以及使用它作为聚集索引的默认行为）存在一些性能问题。可以想到一些替代方案，例如使用 NEWSEQUENTIALID() 或添加额外的 IDENTITY 列来提供顺序聚集索引。

另一种方法是完全取消主键（和索引）中的 GUID，同时提供一个用于全球唯一标识的列，即外部标识符/rowid。这给你留下了更小的桌子。当然，附加列有 16 字节的损失，但在有几个 FK 的表中，这很快就会减少。页面上的内容更多，顺序 ID 很好，索引空间更小，所以双赢。

然而，这种方法给我们留下了一个令人讨厌的缺点：当您想要合并 2 个表时，您会遇到重复键。现在，我不提倡这种方法，我只是在探索和比较不同的策略，以使我更加精通这部分数据库设计。

问题是：在这种情况下，我们如何利用 GUID 的唯一性来处理重复键问题？是否应该禁用所有表约束并在表合并时生成 IDENTITY？是否应该完全放弃这种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:38:02.760

我认为您根本不需要 GUID。虽然 NEWSEQUENTIALID() 在页面拆分方面比 NEWID() 更好，但在大多数情况下，它仍然是一个比必要的更宽的键，并且您*失去*了 GUID 的唯一其他好处（您可以提前生成它们 - 您可以） t 使用 NEWSEQUENTIALID())。然而，您仍然有一个与 IDENTITY 值类似的热点问题，其中所有插入活动都在同一范围内发生。那么它真正让你收获了什么？

以下是我实施的几种替代方法，以避免多实例系统中的 GUID 需要跨系统维护唯一键值。

* * *

**身份范围**

如果您在多个服务器中生成身份值并且稍后需要合并这些值，请使用身份范围（具有足够大的增长余量）。在服务器一上：

```
CREATE TABLE dbo.Data
(
  ID BIGINT IDENTITY(1000000000, 1) PRIMARY KEY
); 
```

在服务器二上：

```
CREATE TABLE dbo.Data
(
  ID BIGINT IDENTITY(2000000000, 1) PRIMARY KEY
); 
```

您可能可以使用 INT 取决于您认为您将使用多少值 - 但最好提前计划并留出大量空间，而不是以后必须全部更改。除非您生成大量数据，否则几个世纪以来您都不必担心碰撞。

***密钥大小：8 个字节。*** *（或者 4 个字节，如果你可以使用 INT。）*

* * *

**复合键**

另一种方法是在表上只包含一个 ServerID 列，并将其作为复合键的一部分。只要您不打算扩展超过 255 台服务器，您就可以使用 TINYINT（1 字节）。在服务器一上：

```
CREATE TABLE dbo.Data
(
  ServerID TINYINT NOT NULL DEFAULT 1,
  DataID INT IDENTITY(1,1),
  PRIMARY KEY (ServerID, DataID)
); 
```

在服务器二上：

```
CREATE TABLE dbo.Data
(
  ServerID TINYINT NOT NULL DEFAULT 2,
  DataID INT IDENTITY(1,1),
  PRIMARY KEY (ServerID, DataID)
); 
```

现在，您只需在合并系统上的 FK 中携带两列（或在合并中创建一个 IDENTITY 列）......对于连接来说有点痛苦，但比携带 GUID 轻得多。

***密钥大小：5 个字节。*** *（或 6 个字节，如果您需要升级到 SMALLINT，因为 255 个服务器还不够。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:31:59.097

出于好奇，合并的目的是什么？

我个人会采取身份方法。如果聚集索引是一个标识值，那么在合并期间将标识插入设置为 ON 将起作用，假设 ID 只是为行提供唯一值并且任何 FK 都不需要（不会破坏您的数据完整性）。新行将最终出现在具有新 ID 的表中，而不会出现任何冲突问题

这取决于您的用例，但除非必要，否则我倾向于远离 GUID

# asp.net-mvc - 如何为使用 ViewModel 生成的真/假值表制作编辑器？

> ID：10620648
> 
> 赞同：0
> 
> 时间：2012-05-16T14:25:19.157
> 
> 标签：asp.net-mvc, entity-framework, editor, viewmodel

我有一个考勤表，显示我希望它如何显示，但目前还不能编辑表上的任何信息。

就设计而言，我希望管理员能够登录，查看表格，并且（如果一条考勤数据需要从“存在”更改为“缺席”（或者，实际上，“真”到“假”）在实际数据库中）单击单词“present”或“absent”将数据切换到相反的值。

对于这种类型的桌子，这是一个好的设计理念吗？使用下拉菜单会是一个更明智的决定，这样每条数据都可以被编辑，然后有一个“提交更改”按钮，所有更改都提交一次（而不是在每次编辑后查询整个表）？

使使用此 ViewModel 创建的页面可编辑的最佳方法是什么？

我假设我会编辑 ViewModel 的模型，并且在将编辑后的 ​​ViewModel 传递回 Post 操作中的控制器后，我会将所有新数据绑定到适当的数据库数据。但是，由于我在设置这个 ViewModel 时遇到了困难（我从 stackoverflow 上的另一篇文章中得到了很多帮助），我不确定如何重新绑定所有更新的信息。

任何正确方向的提示都会有所帮助。

以下是所有相关信息：

实际的课堂课程或课程：

```
public class Course
{
    public int CourseID { get; set; }
    public string Title { get; set; }
    public int AttendanceDate { get; set;}
    public virtual ICollection<Enrollment> Enrollments { get; set; } // allows Students to be enrolled in a Course
    etc. . .
} 
```

我的学生们：

```
public class Student
{
    public int StudentID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; } // allows Student to be enrolled in a Course
    etc. . .
} 
```

将学生与课程联系起来的实体：

```
public class Enrollment
{
    public int EnrollmentID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public virtual Student Course { get; set; }
    public virtual Student Student { get; set; }
} 
```

出勤数据：

```
public class Attendance
{
    public int AttendanceID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public int AttendanceDay { get; set; }  // used to set how many days people are supposed to attend this Course (each course has a different length, some are 10 day courses, some are 3, etc.)
    public bool Present { get; set; }  // absent or present (set to absent by default)
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
} 
```

我的视图模型：

```
public class AttendanceReportViewModel
{
    public List<int> AttendanceDays { get; set; }
    public List<Student> Students { get; set; }
    public List<Attendance> Attendances { get; set; }

    public string IsPresent(Student student, int attendanceDay)
    {
        return Attendances.Single(a => a.StudentID == student.StudentID && a.AttendanceDay == attendanceDay).Present ? "present" : "absent";
    }
} 
```

我的观点：

```
<table>
    <thead>
        <tr>
            <th>Attendance Day</th>
            @foreach (var attendanceDay in Model.AttendanceDays)
            {
                <th>@attendanceDay</th>
            }
        </tr>
    </thead>
    <tbody>
        @foreach (var student in Model.Students)
        {
            <tr>
                <td>@student.LastName</td>
                @foreach (var attendanceDay in Model.AttendanceDays)
                {
                    <td>@Model.IsPresent(student, attendanceDay)</td>
                }
            </tr>
        }
    </tbody>
</table> 
```

这会产生一个如下所示的表：

![在此处输入图像描述](../Images/c93ee16d5452cfbf1a309a78be2d7073.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:35:34.213

*使使用此 ViewModel 创建的页面可编辑的最佳方法是什么？*->

我更喜欢包含 2 个项目的下拉列表（组合框）来选择“存在”和“缺席”。

其次是将选项“缺席”的颜色更改为红色，以便突出显示。

您需要使用 @Html.DropDownListFor() 做一些工作以使其正确或使用原始 html 和标签。[下拉示例](https://stackoverflow.com/a/5388297/1063250)

最后，要将考勤表发回服务器，我们需要在视图端创建一个表单，将考勤表发回服务器，然后服务器将更新考勤并返回视图。

如果用户是非管理员用户，则呈现的视图不应是可编辑的。

可回传更改考勤或记录新考勤的模型：

```
public class AttendanceItem
{
    public int AttendanceId {get; set;}
    public int Day {get; set;}
    public int StudentId {get; set;}
    public bool Present { get; set; }
} 
```

行动方法：

```
[HttpPost]
public ActionResult AttendanceView(List<AttendanceItem> AttendanceSheet, int courseId)
{
     //Update the database with AttendanceSheet for course ID.....
     return RedirectToAction("AttendanceView", new { id = courseId });  
} 
```

# jquery - 如何编辑所有与相同结束编号关联的动态创建的元素？

> ID：10620653
> 
> 赞同：0
> 
> 时间：2012-05-16T14:25:32.840
> 
> 标签：jquery, dynamic

用户可以选择创建最多 100 个列表项。我的目标是在每个项目下创建一个菜单，以编辑该单个项目。这是编辑按钮的代码：

```
$(document).ready(function(){

var nextItemId = 1;

$('#AddItem').click(function(){

        //Create and add a paragraph

$('<p />').attr('id', 'itemParagraph' + nextItemId)

.text(nextItemId + ". ")

.appendTo('#listInput');

    //Create and add an input box

$('<input />').attr({'type':'text', 'id':'item' + nextItemId})

.appendTo('#itemParagraph' + nextItemId);

        //Create an edit button for input box

$('<input />').attr({'type':'button', 'value':'Edit', 'id':'editItem' + nextItemId})

.appendTo('#itemParagraph' + nextItemId);

    //d number

nextItemId++;

}); 
```

如何创建适用于所有变量 item1、item2 等... item100 及其相应的编辑按钮 editItem1、editItem2 等...editItem100 的函数？有没有办法在为它们创建菜单时引用这些变量并将它们很好地压缩成一个函数？按下编辑按钮时，菜单将向下滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:48:19.040

保留对您返回的内容的引用`$('<input />')`并将其传递给回调。例子：

```
var item = $('<input />');
item.attr({'type':'text', 'id':'item' + nextItemId})
    .appendTo('#itemParagraph' + nextItemId);

... create menu ...
menuItem.click(function() { item.focus(); }) 
```

这是有效的，因为匿名函数保留了一个指向创建它的上下文的指针，因此指向当时的“值” `item`（=它指向的引用）。

# objective-c - 通过带有屏幕方向参数的 shell 命令启动 iOS 模拟器会话的可能性

> ID：10620656
> 
> 赞同：3
> 
> 时间：2012-05-16T14:25:40.337
> 
> 标签：objective-c, ios, cocoa, ipad, ios-simulator

看到 iOS 应用程序自动部署的前景就在我们身边，我想我可以从让我的测试完全自动化开始。

浏览过程的所有细节，我已经走到了死胡同。如果以横向启动，我的应用程序有时会显示一些 UI 错误。自然，我想做一些单元测试，以确保如果发生这种情况，我的应用程序不会被部署。所以我现在面临的问题是如何通过命令行以定义的方向运行 iOS 模拟器。

我知道[iphonesim](https://github.com/jhaynie/iphonesim)，但据我所知，它还没有这样的功能。也许可以修改...有什么想法吗？

谢谢。

* * *

编辑：为澄清起见，该问题仅发生在 iPad 模拟器配置上，因为您只能在 iPad 上将应用程序直接启动到横向模式。

# intellij-idea - 我如何告诉 IntelliJ TinyMCE 动态属性？

> ID：10620657
> 
> 赞同：4
> 
> 时间：2012-05-16T14:25:41.640
> 
> 标签：intellij-idea, tinymce

我正在使用 IntelliJ 进行一些 Javascript 开发。我们在我们的网站上使用 TinyMCE，它有一些动态生成的方法（它的事件）。

IntelliJ 抱怨它无法解析变量......这并不奇怪，因为事件是动态生成的。

我知道我可以压制那条线的检查，但是有更好的方法吗？理想情况下，我希望能够告诉 IntelliJ 这些变量......也许通过 JSDoc？还是有其他方法？

**编辑**

本质上，这是针对在运行时创建的且 IntelliJ 无法静态确定的属性。

一个基本的例子是这个代码：

```
var Foo = {
  addMethod: function() {
    this.newMethod = function() {
      console.log("This method is dynamically generated");
    }
  }
}

var foo = new Foo();
foo.addMethod();
foo.newMethod(); 
```

IntelliJ 可以推断那`addMethod`是一种方法，但它不能推断那`newMethod`是一种有效的方法。

我可以做些什么来教 IntelliJ`newMethod`是合法的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T08:04:07.010

我不知道这是否仍然相关，但我发现您可以添加“命名空间”文档注释来告诉 IntelliJ/Webstorm 它不知道的方法。

对于您的示例，添加

```
 /** @namespace bar.newMethod */ 
```

确保 IntelliJ 不再将您的使用标记为无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:29:25.367

我认为问题在于 IntelliJ 不会推断内联属性的类型，即使它们是函数。让 IntelliJ 发挥出色的唯一方法是使用原型而不是内联对象表示法。IE：

```
function Bar() { }
Bar.prototype.addMethod = function() { };
Bar.prototype.newMethod = function() { };

var bar = new Bar();
bar.addMethod();
bar.newMethod(); 
```

# java - 如何在 Apache Tomcat Catalina 中为不同服务器上的文件夹指定路径？

> ID：10620661
> 
> 赞同：-1
> 
> 时间：2012-05-16T14:25:57.303
> 
> 标签：java, tomcat, windows-server-2003, catalina

在 Apache Tomcat 上

> C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\Catalina\localhost\

我们可以通过在 XML 中指定它来更改另一个文件夹，例如：`THE_FOLDER.xml`在那个 xml 中我们可以更改那个 THE_FOLDER 路径

```
<Context path="/MF_PHRASES" reloadable="true" docBase="C:\Projects\Customers\test\phrases" workDir="C:\Projects\Customers\test\phrases" /> 
```

但它不适用于位于其他服务器上的文件夹：

```
<Context path="/MF_PHRASES" reloadable="true" docBase="\\192.168.0.100\c$\Projects\Customers\test\phrases" 
workDir="\\192.168.0.100\c$\Projects\Customers\test\phrases" /> 
```

不工作

有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:31:51.950

如果您在 Windows 上使用文件资源管理器制作网络驱动器，那么您会将远程路径分配给“本地”磁盘盘符。然后使用此路径。这必须有效，因为本地磁盘盘符和远程路径之间的映射是使用操作系统工具完成的。所有应用程序都将其视为本地驱动器。

另一种方法是*尝试*编写如下内容：

`file://192.168.0.100/c$/Projects/Customers/test/phrases`

它可能会起作用，但我不确定。

第一种方式更可取。

# android - Android - 位图质量损失？

> ID：10620664
> 
> 赞同：1
> 
> 时间：2012-05-16T14:26:06.197
> 
> 标签：android

我为我的应用程序使用透明的 png 图像，但是当应用程序运行时，图像会失去其质量并且不完全相同，它的扭曲也很模糊。有什么我可以做的，比如位图选项？

```
mBitmap = BitmapFactory.decodeResource(res,R.drawable.img1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:33:49.957

我也有这个问题。我确实使用 png 以外的其他格式解决了它（在我的情况下 jpg 就足够了）。如果您仍然想使用 Alpha 通道，那么您唯一剩下的选择就是 gif，即使这通常不是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:43:56.040

可能是屏幕像素密度与您的位图不匹配？除非您另外指定，否则您的位图假定为 160dpi，因此在您加载它时，它将根据需要重新缩放，具体取决于设备。

您可以拥有不同版本的位图，专为不同的像素密度而设计。就像应用程序图标一样，它们进入相应的 res/drawable-*dpi/ 子目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:24:25.613

尝试处理来自 android 相机的图片时，我遇到了同样的问题。我用这段代码解决了：

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inDither = false;
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
options.inDensity = 96;

Bitmap originalPicture = BitmapFactory.decodeFile(pictureFile.getPath(), options ); 
```

这个问题似乎与图像的 RGB 格式和抖动选项有关。

# jsf - JSF2 LogicalViews - 从地图中丢失当前页面

> ID：10620670
> 
> 赞同：0
> 
> 时间：2012-05-16T14:26:22.160
> 
> 标签：jsf, jsf-2

我们最近更新了我们的应用程序以使用 JSF 2.1.3

我们有一个包含三个框架集（左导航、主、页脚）的现有页面。单击主框架中的某些内容会导致页脚框架重新加载新内容。正因为如此，我们从逻辑视图地图中丢失了主框架（例如，如果 com.sun.faces.numberOfLogicalViews 设置为 10，我们在 9 次点击后丢失了主框架）。之后，尝试提交主框架会导致它重新渲染，也跳过它绑定的操作方法。

有没有办法在不增加逻辑视图数量的情况下防止该逻辑视图从地图中删除？我不知道为什么，但是当应用程序使用 JSF 1.2 时没有发生这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:56:42.743

我们通过覆盖`StateManagerImpl`和存储这个特定的视图客户端解决了这个问题，而不是服务器端。

出现在以前的jsf版本中，只需要重写`isClientSide`方法，现在需要重写方法来写入和恢复状态。

# php - 为什么代码在此功能后停止工作？

> ID：10620671
> 
> 赞同：-3
> 
> 时间：2012-05-16T14:26:27.973
> 
> 标签：php

在这个简单的函数之后，我有一些其他函数和一个 html 页面调用，但在此之后它们不会运行。

```
function page($name){
  $content =<<<eol
<?php
PAGE CONTENT
?>
 eol;
$file = "./search/$name.php";
$open = fopen($file, "w");
fwrite($open, $content);
fclose($open);
    } 
```

函数本身可以工作，但会导致退出代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:40:20.430

我不同意 Chief17 唯一正确的做法是写入文件。

这段代码

```
<?php
PAGE CONTENT
?> 
```

该怎么办？

你混了？？？可能应该是这样的

```
?>
PAGE CONTENT
<?php 
```

**编辑后编辑**

你像这样打破 php 为什么你仍然需要这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:28:57.067

```
<?php
function page($name){
    $content = '<?php PAGE CONTENT ?>';

    $file = "./search/$name.php";
    $open = fopen($file, "w");
    fwrite($open, $content);
    fclose($open);
}

page('file1.txt');
?> 
```

看看这是否有效，这可能与您的 HEREDOC 语法有关（可能是 eol 之前的空格；）。

# apache-flex - 为什么我得到“错误 #1069：在 flash.display.Stage 上找不到属性 softKeyboardRect 并且没有默认值。” 当我添加一个 DateField 组件时？

> ID：10620678
> 
> 赞同：2
> 
> 时间：2012-05-16T14:26:44.313
> 
> 标签：apache-flex

我正在尝试将 DateField 组件添加到我的 flex 应用程序中，但是当我单击它时，会出现以下运行时错误：

[故障] 异常，信息=ReferenceError：错误 #1069：在 flash.display.Stage 上找不到属性 softKeyboardRect，并且没有默认值。

如果我在一个简单的应用程序中执行它并在其上添加 DateField，它可以正常工作，但是当我将它添加到另一个应用程序时它不起作用。

```
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
       xmlns:s="library://ns.adobe.com/flex/spark" 
       xmlns:mx="library://ns.adobe.com/flex/mx"
       color="#333333"
       creationComplete="init()">

.... action script code.....

<fx:Declarations>
    .............
</fx:Declarations>

 <mx:Panel id="MainPanel" title="MyApp" height="1000" width="1100" layout="horizontal" verticalScrollPolicy="auto" >

    <mx:HBox id="HBoxHeader" >
            <mx:DateField id="StartDate">
    </mx:DateField>

    </mx:HBox>
    <mx:VBox id = "VBoxGroupHeader_LB" height="950" width="250"   verticalScrollPolicy="on" visible="true" horizontalAlign="center">
        <mx:Label id="groupLable_LB" text="GROUPS"  />
        <mx:LinkBar id="linkBarGroup" direction="vertical" horizontalAlign="center" itemClick="getMembers(String(event.label))"/>
    </mx:VBox>

    <mx:VBox id = "VBoxMembersHeader_LB" height="950" width="250" verticalScrollPolicy="on" visible="true" horizontalAlign="center">
        <mx:Label id="memberLabel_LB" text="MEMBERS" />
        <mx:LinkBar id="linkBarMember" direction="vertical" horizontalAlign="center" itemClick="getMemberTypes('stats.' + activeGroup + '.' + String(event.label))"/>
    </mx:VBox>

    <mx:VBox id = "VBoxGraphs" height="950" width="580" verticalScrollPolicy="on" visible="true">
    </mx:VBox>

 </mx:Panel> 
```

知道什么可能导致这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:22:58.107

您的目标是较旧的 Flash Player，如果您使用的是 SDK 4.6，则至少需要 Flash Player 11.1。

# java - 为什么 java 5+ 中的 volatile 不能确保来自另一个线程的可见性？

> ID：10620680
> 
> 赞同：69
> 
> 时间：2012-05-16T14:26:47.607
> 
> 标签：java, multithreading, concurrency, volatile, compiler-bug

根据：

[http://www.ibm.com/developerworks/library/j-jtp03304/](http://www.ibm.com/developerworks/library/j-jtp03304/)

> 在新的内存模型下，当线程 A 写入 volatile 变量 V，而线程 B 从 V 中读取时，在写入 V 时对 A 可见的任何变量值现在保证对 B 可见

互联网上的许多地方都声明以下代码永远不应该打印“错误”：

```
public class Test {
    volatile static private int a;
    static private int b;

    public static void main(String [] args) throws Exception {
        for (int i = 0; i < 100; i++) {
            new Thread() {

                @Override
                public void run() {
                    int tt = b; // makes the jvm cache the value of b

                    while (a==0) {

                    }

                    if (b == 0) {
                        System.out.println("error");
                    }
                }

            }.start();
        }

        b = 1;
        a = 1;
    }
} 
```

`b` **当为 1时，所有线程**都应**`a`为 1。**

 **但是**我有时会打印“错误”**。这怎么可能？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-16T15:07:26.080

**更新：**

对于任何感兴趣的人，此错误已在 Java 7u6 build b14 中得到解决和修复。您可以在此处查看错误报告/修复

*   **[报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7170145)**
*   **[变更集](http://hg.openjdk.java.net/jdk7u/jdk7u/hotspot/rev/202880d633e6)**
*   **[错误清单](http://download.java.net/jdk7u6/changes/jdk7u6-b14.html)**

**原始答案**

在考虑内存可见性/顺序时，您需要考虑其发生之前的关系。的重要前提条件`b != 0`是 for `a == 1`。如果`a != 1`那么 b 可以是 0 或 1。

一旦一个线程看到`a == 1`，那么该线程就可以保证看到`b == 1`。

发布 Java 5，在 OP 示例中，一旦`while(a == 0)`突破 b 保证为 1

**编辑：**

我多次运行模拟并没有看到您的输出。

您在什么操作系统、Java 版本和 CPU 下进行测试？

我在 Windows 7、Java 1.6_24 上（尝试使用 _31）

**编辑2：**

向 OP 和 Walter Laan 致敬 - 对我来说，这仅发生在我从 64 位 Java 切换到 32 位 Java 时，在（但可能不排除在）64 位 Windows 7 上。

**编辑3：**

分配给`tt`，或者更确切地说是 staticget`b`似乎有很大的影响（为了证明这删除了`int tt = b;`​​并且它应该总是有效的。

看起来`b`into的加载`tt`将在本地存储该字段，然后在 if coniditonal 中使用该字段（对该值的引用 not `tt`）。因此，如果`b == 0`为真，则可能意味着本地存储为`tt`0（此时将 1 分配给 local `tt`）。这似乎只适用于带有客户端集的 32 位 Java 1.6 和 7。

我比较了两个输出程序集，直接的区别就在这里。（请记住，这些是片段）。

**这个打印的“错误”**

```
 0x021dd753: test   %eax,0x180100      ;   {poll}
  0x021dd759: cmp    $0x0,%ecx
  0x021dd75c: je     0x021dd748         ;*ifeq
                                        ; - Test$1::run@7 (line 13)
  0x021dd75e: cmp    $0x0,%edx
  0x021dd761: jne    0x021dd788         ;*ifne
                                        ; - Test$1::run@13 (line 17)
  0x021dd767: nop    
  0x021dd768: jmp    0x021dd7b8         ;   {no_reloc}
  0x021dd76d: xchg   %ax,%ax
  0x021dd770: jmp    0x021dd7d2         ; implicit exception: dispatches to 0x021dd7c2
  0x021dd775: nop                       ;*getstatic out
                                        ; - Test$1::run@16 (line 18)
  0x021dd776: cmp    (%ecx),%eax        ; implicit exception: dispatches to 0x021dd7dc
  0x021dd778: mov    $0x39239500,%edx   ;*invokevirtual println 
```

和

**这没有打印“错误”**

```
0x0226d763: test   %eax,0x180100      ;   {poll}
  0x0226d769: cmp    $0x0,%edx
  0x0226d76c: je     0x0226d758         ;*ifeq
                                        ; - Test$1::run@7 (line 13)
  0x0226d76e: mov    $0x341b77f8,%edx   ;   {oop('Test')}
  0x0226d773: mov    0x154(%edx),%edx   ;*getstatic b
                                        ; - Test::access$0@0 (line 3)
                                        ; - Test$1::run@10 (line 17)
  0x0226d779: cmp    $0x0,%edx
  0x0226d77c: jne    0x0226d7a8         ;*ifne
                                        ; - Test$1::run@13 (line 17)
  0x0226d782: nopw   0x0(%eax,%eax,1)
  0x0226d788: jmp    0x0226d7ed         ;   {no_reloc}
  0x0226d78d: xchg   %ax,%ax
  0x0226d790: jmp    0x0226d807         ; implicit exception: dispatches to 0x0226d7f7
  0x0226d795: nop                       ;*getstatic out
                                        ; - Test$1::run@16 (line 18)
  0x0226d796: cmp    (%ecx),%eax        ; implicit exception: dispatches to 0x0226d811
  0x0226d798: mov    $0x39239500,%edx   ;*invokevirtual println 
```

在此示例中，第一个条目来自打印“错误”的运行，而第二个条目来自未打印的运行。

`b`在测试它等于 0 之前，工作运行似乎已正确加载和分配。

```
 0x0226d76e: mov    $0x341b77f8,%edx   ;   {oop('Test')}
  0x0226d773: mov    0x154(%edx),%edx   ;*getstatic b
                                        ; - Test::access$0@0 (line 3)
                                        ; - Test$1::run@10 (line 17)
  0x0226d779: cmp    $0x0,%edx
  0x0226d77c: jne    0x0226d7a8         ;*ifne
                                        ; - Test$1::run@13 (line 17) 
```

虽然打印“错误”的运行加载了缓存版本`%edx`

```
 0x021dd75e: cmp    $0x0,%edx
  0x021dd761: jne    0x021dd788         ;*ifne
                                        ; - Test$1::run@13 (line 17) 
```

对于那些对汇编程序有更多经验的人，请权衡一下:)

**编辑 4**

应该是我的最后一次编辑，因为并发开发人员得到了帮助，我在有和没有 `int tt = b;`分配的情况下做了更多的测试。我发现当我将最大值从 100 增加到 1000 时，包括在内时似乎有 100% 的错误率，`int tt = b`而在排除时似乎有 0% 的机会。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T14:59:04.523

根据下面 JCiP 的摘录，我认为您的示例永远不应该打印“错误”：

> volatile 变量的可见性影响超出了 volatile 变量本身的值。当线程*A*写入 volatile 变量，随后线程*B*读取同一变量时，在写入 volatile 变量之前对*A*可见的*所有变量的值在读取 volatile 变量后对**B*可见。

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T03:43:32.560

您可能想查看有关此问题的并发兴趣邮件列表上的讨论线程：http: [//cs.oswego.edu/pipermail/concurrency-interest/2012-May/009440.html](http://cs.oswego.edu/pipermail/concurrency-interest/2012-May/009440.html)

使用客户端 JVM (-client) 似乎更容易重现该问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-16T18:25:57.197

在我看来，由于缺乏**同步**而导致的问题：

**注意：**如果 b=1 在 a=1 之前发生，并且 a 是 volatile 而 b 不是，则 b=1 实际上仅在 a=1 完成后更新所有线程（根据 quate 的逻辑）。

您的代码中发生的事情是 b=1 仅针对主进程首先更新，然后仅在 volatile 分配完成时，所有线程 b 才更新。我认为可能 volatile 的分配不能作为原子操作工作（需要指向很远，并以某种方式更新其余的引用以像 volatile 一样工作）所以这就是我猜测为什么一个线程读取 b = 0 而不是 b = 1。

考虑对代码的这种更改，它显示了我的主张：

```
public class Test {
    volatile static private int a;
    static private int b;
    private static Object lock = new Object();

    public static void main(String [] args) throws Exception {
        for (int i = 0; i < 100; i++) {
            new Thread() {

                @Override
                public void run() {
                    int tt = b; // makes the jvm cache the value of b

                    while (true) {
                        synchronized (lock ) {
                            if (a!=0) break;
                         }
                    }

                    if (b == 0) {
                        System.out.println("error");
                    }
                }

            }.start();
        }
        b = 1;
        synchronized (lock ) {
        a = 1;
        }  
    }
} 
```****

# web-services - 我可以在本地网页中使用 AdSense 吗？

> ID：10620684
> 
> 赞同：0
> 
> 时间：2012-05-16T14:26:59.547
> 
> 标签：web-services, web-applications, adsense

我编写了一个使用网页作为 GUI 的桌面应用程序，因此可以说它是一个本地站点。那么，是否可以将 AdSense 插入此页面并从中赚取一些现金？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:31:02.383

我认为 AdSense 需要能够抓取该网站，以便对其进行分类以确定要展示的广告：如果它是本地托管的，那么这是不可能的。

# java - RXTX 在 ubuntu 中不工作

> ID：10620691
> 
> 赞同：3
> 
> 时间：2012-05-16T14:27:19.327
> 
> 标签：java, ubuntu, rxtx

终于设法从 Windows 中的 rxtx 读取，但现在我无法让它在 Ubuntu 中工作。我使用 apt-get 获取 rxtx 库，但是当我运行应用程序时，我什么都看不到，尝试了几个 try-catch 块而且我什至没有得到异常，并且由于目前无法进行基于 Ubuntu 的调试，因此我无法查明问题所在。（Ubuntu 是 12.04 64 位）。

```
import gnu.io.*;
import java.io.*;
import javax.swing.JOptionPane;

public class ReadComPort {

    public static void main(String[] s) {
        readcomport();
    }

    public static String readcomport() {
        String value = null;

        try {
            // CommPortIdentifier portIdentifier = CommPortIdentifier
            // .getPortIdentifier("COM1");

            // String comportidentifier = "COM1"; //*win
            String comportidentifier = "/dev/ttyS0";

            CommPortIdentifier portIdentifier = null;
            portIdentifier = CommPortIdentifier.getPortIdentifier(comportidentifier);

            if (portIdentifier.isCurrentlyOwned()) {
                JOptionPane.showMessageDialog(null, "port in use");
            } else {

                SerialPort serialPort = (SerialPort) portIdentifier.open("ReadComPort", 500);
                JOptionPane.showMessageDialog(null, serialPort.getBaudRate());

                serialPort.setSerialPortParams(serialPort.getBaudRate(), SerialPort.DATABITS_8, SerialPort.STOPBITS_1,
                        SerialPort.PARITY_NONE);
                // serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_RTSCTS_IN | SerialPort.FLOWCONTROL_RTSCTS_OUT);
                serialPort.setDTR(true);
                serialPort.setRTS(true);

                InputStream mInputFromPort = serialPort.getInputStream();

                Thread.sleep(500);
                byte mBytesIn[] = new byte[32];
                mInputFromPort.read(mBytesIn);

                value = new String(mBytesIn);

                mInputFromPort.close();
                serialPort.close();
            }
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, "Exception : " + ex.getMessage());

        }

        return value;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:40:41.680

检查配置文件`javax.comm.properties`是否在类路径中。由于这个文件，我在 RXTX 上遇到了无穷无尽的问题——它只是默默地失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T11:12:16.240

我昨天遇到了同样的问题，发现[了这个](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=5&t=6011)：

```
String serialPortID = "/dev/ttyAMA0";
System.setProperty("gnu.io.rxtx.SerialPorts", serialPortID); 
```

即你需要设置`gnu.io.rxtx.SerialPorts`系统属性，值应该是你要打开的端口的名称。

# python - 如何使用 mod_wsgi.so 将 python 作为 apache 模块运行？

> ID：10620693
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:27:31.100
> 
> 标签：python, apache

如何使用易于解释的解决方案进行设置，

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

给出了一个我无法理解的非常技术性的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:29:41.467

不要尝试从头开始编写 WSGI 应用程序。使用框架 - Django、Flask、Pyramid 等。

# python - MongoDB 参考与嵌套

> ID：10620697
> 
> 赞同：1
> 
> 时间：2012-05-16T14:27:38.533
> 
> 标签：python, performance, database-design, mongodb, schema

我想在 mongodb 中存储“状态更新”。因此这个集合/数组可以变得非常大。
我认为一个选择是将文档保存在嵌套在用户/组/...文档中的数组中。（不同的集合需要它们自己的“状态更新”）
另一种方法是创建另一个集合，保存它们的消息和通过
我想知道的另一个 objectId 将用户/组/...与状态更新相关联

*   什么更快
*   什么更容易管理和查询

我想我不会只使用“普通”pymongo 的 orm/drm。
我在文档中没有找到任何明确的答案，也许有人已经测试过了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:08:24.680

这是一个较旧的演示文稿，但仍然与这类问题相关，并讨论了一些权衡。

[http://www.10gen.com/presentations/mongosf2011/schemascale](http://www.10gen.com/presentations/mongosf2011/schemascale)

TLDR(W) - 这取决于有多少更新“非常大”，以及您如何访问它们。如果您总是需要一次访问完整集并且它们小于 16MB，则可以嵌入，如果您通常一次只需要几个，则可以链接。还有一种混合方法，即嵌入最近的并链接其余的。

# javascript - IE 9 中的按钮、div、img 没有 onclick

> ID：10620700
> 
> 赞同：2
> 
> 时间：2012-05-16T14:27:42.950
> 
> 标签：javascript, html, internet-explorer-9

有谁知道 IE9 中的错误的解决方法，其中未调用这些页面元素的 onclick 函数：按钮、div、img？所以你点击元素，什么也没有发生。这出现在我正在开发的页面上。如果我启动 F12 调试器，问题就会消失。但是我不能要求网站访问者点击 F12 来浏览页面！有什么解决方案？我认为这可能只发生在元素是在 javascript 中动态创建时。但是如果元素是在 HTML 中定义的，也会发生这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T14:39:47.123

您提到如果用户打开了开发人员工具，代码就可以工作，这意味着您的问题很可能是您`console.log`在代码中使用了语句。

在 IE 中，当开发人员工具未打开时打印到控制台会导致 javascript 异常，这会导致您的事件处理程序停止工作。

要解决此问题，请使用 if 语句包装所有控制台语句：

```
if (console) {
    console.log('foo');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:31:25.327

使用 jQuery，例如

```
$('#myButton').click(function() {
    // code goes here
}); 
```

这将计算出正确的代码来触发点击事件。

# c++ - 如何使用 boost 单元测试打印测试摘要

> ID：10620712
> 
> 赞同：5
> 
> 时间：2012-05-16T14:28:41.437
> 
> 标签：c++, boost-test

有没有办法打印在 boost 单元测试中运行的测试的摘要。特别是，是否可以列出失败的测试？

我很难在输出中找到失败的测试（尤其是当测试有自己的输出时）。我已经设置了 BOOST_TEST_LOG_LEVEL 以显示进入/退出，但这还不足以定位失败的测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T23:33:53.080

使用选项：`--report_level=detailed`

它将报告您所有的尾随测试用例和套件。

# php - 插入mongodb时是否可以定义键

> ID：10620716
> 
> 赞同：1
> 
> 时间：2012-05-16T14:28:53.370
> 
> 标签：php, json, codeigniter, mongodb

背景：将 CodeIgniter 与[此 MongoDB 库](https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2)一起使用。

这是我第一次使用 mongodb，到目前为止我很享受。我花了一段时间才将自己与 sql 的思维方式区分开来，但它非常适合我目前的项目。

我正在尝试使用...将数组推送到文档中

```
$this->mongo_db->where(array('_id'=>$estimate_id))->push("measurements", $newData)->update('estimates'); 
```

如果我编码 $newData 使用`json_encode($newData)`我得到`{"levels":[{"level_qty":12,"level_uom":"ft"}]}`

问题是，当我的函数`measurements`在 mongodb 文档中创建该行时，它会自动启动一个数组，我在 [0] 处插入。像这样...

`"measurements" : [ { "levels" : [ { "level_qty" : 12, "level_uom" : "ft" } ] }]`

……留下我……

```
-measurements
--0
----levels
-----0
------level_qty => 2,
------level_uom => ft 
```

我真正想要的是...

```
-measurements
--levels
---0
----level_qty => 2,
----level_uom => ft 
```

我确定我错过了一些相当基本的东西（即与 php 相关而不与 mongodb 相关），但我是公认的业余爱好者，涉水太深。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:01:35.877

[$push](http://www.mongodb.org/display/DOCS/Updating#Updating-%24push)用于将值附加到数组。在您的示例中，`measurements`是一个数组，Mongo`$newData`作为其第一个元素附加。这解释了和`0`之间的索引。在您想要的结果中，是一个等效于的对象（即它具有一个属性，而该属性又包含一个对象数组）。`measurements``levels``measurements``$newData``levels`

以下示例中的任何一个都应该完成您想要的：

```
// if $newData is {"levels": [{"level_qty":12,"level_uom":"ft"}]}
->set("measurements", $newData)

// if $newData is [{"level_qty":12,"level_uom":"ft"}]
->set("measurements.levels", $newData)

// if $newData is {"level_qty":12,"level_uom":"ft"}
->push("measurements.levels", $newData) 
```

注意：`$push`如果您想在将来的更新中附加数据，将会更加灵活，而`$set`自然会覆盖给定的字段。

# git - TortoiseSVN - 如何知道文件是从哪个工作副本签入的？

> ID：10620722
> 
> 赞同：0
> 
> 时间：2012-05-16T14:29:08.417
> 
> 标签：git, svn, path, tortoisesvn, working-copy

我的 PC 上有许多相同存储库的工作副本，它们位于不同的文件夹中。

我只是在查看我前段时间签入的文件的 SVN 日志，但我不记得我是从我的 PC 上的哪个工作副本中签入的。

**是否可以查看 SVN 存储库日志以查看从哪个工作副本签入了某个文件修订版？**我不知道日志是否在某处存储了此类信息。

* * *

FMY：在 GIT/Mercurial 中有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:32:59.357

在 SVN 中不可能。在 Git/Mercurial 中，没有签到这样的东西。最接近的等价物是在本地提交并推送到远程存储库。在这种情况下，您也无法具体看到该提交的来源（尽管您当然可以看到关联的用户。）

对于 SVN 和 Git/Mercurial，您可以更改每个工作副本的用户并将其用于识别目的，尽管我不清楚为什么需要这样做。

# c# - SharePoint InputFormTextBox 仅返回

> ID：10620725
> 
> 赞同：0
> 
> 时间：2012-05-16T14:29:15.680
> 
> 标签：c#, sharepoint

我一直在尝试在我的 SharePoint webpart 中使用 SharePoint:InputFormTextBox 作为富文本编辑器。它只能在 IE 中正常工作，但这不是我现在的问题。问题是当我尝试使用 Request.Form 获取文本框的值时，它只返回一个打开和关闭 div 标记。任何帮助将不胜感激，为我指出解决问题的正确方向。此外，我在我的 .cs 类中动态创建 InputFormTextBox，而不是在 aspx 端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:41:05.523

遍历 request.form 集合帮助我解决了我的问题。

# java - HOWTO 在使用 Spymemcached 客户端库用于 memcached 服务器时解决“重新分配到另一个节点”的警告消息

> ID：10620726
> 
> 赞同：7
> 
> 时间：2012-05-16T14:29:17.547
> 
> 标签：java, connection, memcached, spymemcached

我正在使用 couchbase 人员`v2.8.0`提供的 spymemcached 客户端库。安装的 memcached 服务器是 version `1.4.13`。

memcached 的配置非常基本 > `-m 64 -p 11211 -u memcache -l 127.0.0.1`。

我能够使用客户端库正确获取、设置、删除请求。但是通过我的日志，我注意到来自 spymemcached 库的警告消息，如下所示 -

```
WARN net.spy.memcached.MemcachedConnection:  Could not redistribute to another node, retrying primary node for ... 
```

如果不存在一个节点，我不确定为什么要尝试重定向到集群中的另一个节点。

我正在使用以下代码连接到缓存客户端 -

```
String address = 127.0.0.1:11211;
new MemcachedClient(new ConnectionFactoryBuilder().setDaemon(true).build(), AddrUtil.getAddresses(address)); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:24:56.163

默认情况下，如果主节点不可用，Spymemcached 会将操作重新分配到不同的节点。如果您有另一个节点，则会发生这种情况，但由于只有一个，因此重新分配与在主节点上重试操作相同。在您的情况下，此消息有点令人困惑。如果您不想重新分配操作，那么您可以执行以下操作。

```
String address = 127.0.0.1:11211;
new MemcachedClient(new ConnectionFactoryBuilder().setDaemon(true).setFailureMode(FailureMode.RETRY).build(), AddrUtil.getAddresses(address)); 
```

如果听起来您的客户端可能已失去与服务器的连接并在某个时候重新连接。

# java - 使用 Eclipse 创建 Scala 项目，sbteclipse -- 目录布局

> ID：10620732
> 
> 赞同：5
> 
> 时间：2012-05-16T14:29:56.397
> 
> 标签：java, eclipse, scala, sbt, sbteclipse

我正在尝试使用 Eclipse 作为我的 IDE，并且我已经安装了 sbt 作为构建工具和 sbteclipse 作为 Eclipse 的构建工具插件。我按照 sbteclipse 教程[http://www.atsnippets.com/development/starting-with-simple-build-tool-sbt-for-scala.html](http://www.atsnippets.com/development/starting-with-simple-build-tool-sbt-for-scala.html)使我的目录结构如下所示：

```
HelloWorld
     \- src
          \-main
              \-scala
              \-java
          \-test 
              \scala
              \java
     \target
          \-scala-2.9.1
          \-streams 
```

现在，我想使用 Eclipse 作为我的编辑器（我喜欢它的检查、自动完成等）。但是，我不知道如何让 Eclipse 理解上面的目录布局（我无法将上面的目录作为我的项目导入，或者我没有找到正确的方法）。有人可以分享经验吗？

然后我尝试了另一种方法来启动我的玩具项目：我使用 Eclipse 创建了一个 scala 项目。但是，目录结构也不是我想要的。这是我的“New Scala Project”、“New Package (com.foo.hello)”操作的目录结果

```
HelloWorld
   \-src
       \-com
           \-foo
               \-hello 
```

这也不是我想要的，因为我想将 main 与 test 分开。有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T14:48:41.487

`HelloWorld`通过 . 在项目下创建你想要的目录结构`Right-click -> New... -> Folder`。然后在`main`and`test`文件夹上`Right-click -> Build Path -> Use as Source Folder`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T21:01:56.787

SBT Eclipse 应该生成一个项目文件，所有内容都正确设置。您确实需要在任何构建文件更改后运行“sbt update”，然后重新生成 eclipse 项目文件。我怀疑这可能是你的问题。

它应该生成两个文件，`.project`并且`.classpath`，如下所示：

```
<projectDescription>
  <name>default-0d85ea</name>
  <buildSpec>
    <buildCommand>
      <name>org.scala-ide.sdt.core.scalabuilder</name>
    </buildCommand>
  </buildSpec>
  <natures>
    <nature>org.scala-ide.sdt.core.scalanature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
  </natures>
</projectDescription> 
```

和

```
<classpath>
  <classpathentry output="target/scala-2.9.2/classes" path="src/main/scala" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/classes" path="src/main/java" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/test-classes" path="src/test/scala" kind="src"></classpathentry>
  <classpathentry output="target/scala-2.9.2/test-classes" path="src/test/java" kind="src"></classpathentry>
  <classpathentry path="org.scala-ide.sdt.launching.SCALA_CONTAINER" kind="con"></classpathentry>
  <classpathentry path="/home/dcs/.ivy2/cache/org.scalacheck/scalacheck_2.9.2/jars/scalacheck_2.9.2-1.9.jar" kind="lib"></classpathentry>
  <classpathentry path="/home/dcs/.ivy2/cache/org.scala-tools.testing/test-interface/jars/test-interface-0.5.jar" kind="lib"></classpathentry>
  <classpathentry path="/home/dcs/.ivy2/cache/org.scala-lang/scala-swing/jars/scala-swing-2.9.2.jar" kind="lib"></classpathentry>
  <classpathentry path="org.eclipse.jdt.launching.JRE_CONTAINER" kind="con"></classpathentry>
  <classpathentry path="bin" kind="output"></classpathentry>
</classpath> 
```

请注意后一个文件中的`src/main/scala`和`src/main/java`作为`src`条目添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:50:34.420

尝试创建空项目并手动添加文件夹（右键单击项目 New->Folder）。然后在项目属性中设置构建器并（可选）创建运行配置。

# c# - 使用通用接口类型作为接口参数类型的基础

> ID：10620735
> 
> 赞同：1
> 
> 时间：2012-05-16T14:30:01.263
> 
> 标签：c#, generics

我有以下内容：

```
class Item {
  public object ItemId {get;set;}
}

class StringItem : Item {
  public new string ItemId {get;set;}
}

interface IItemRepository<out T> : where T : Item {
  T GetItem(object itemId);
} 
```

我想要的是能够根据我正在使用的实现将对象 itemId 替换为 ItemId 的类型。我可以使用 IItemRepository 来做到这一点，其中 U 是 ItemId 类型，但我想将 itemId 类型直接绑定到 ItemId 属性类型。此外，我不一定会使用 IItemRepository 作为接口。我可以使它成为一个抽象类，但我也没有看到一种简单的方法来做到这一点。

所以，最终结果是我可以这样做：

```
StringItemRepository : IItemRepository<StringItem> {
  StringItem GetItem(string itemId) { ... }
} 
```

这将满足接口。有没有办法做类似的事情：

```
T GetItem(typeof(T.ItemId.GetType()) itemId); 
```

更新：我不能简单地做 IItemRepository ，因为我将有多个 Item 实现。每个实现还将有一个存储库（可能有多个）。因此，最终的 WebService 将具有以下内容：

```
IEnumerable<IItemRepository<Item>> Repositories; 
```

此存储库列表将用于生成所有不同类型的项目。我需要能够区分 Foo : Item 和 Bar : Item ...我可能只需要将 ItemIdType 传递给存储库，但感觉很笨拙。好像我在重复自己，应该有一些方法来重构它，所以我不必这样做。

另一个更新......所以......这是我开始想出的：

```
class Item<T> { 
  public T id {get;set;}
}

class StringItem : Item<string> {
  public string id {get;set;}
}

interface IItemRepo<T> {
  Item<T> GetItem(T id);
}

class StringItemRepository : IItemRepo<string> {
  public StringItem GetItem(string id) { return null}
} 
```

问题是我需要 StringItemRepository.GetItem 来吐出 StringItems，而不是 Item 对象。并且我当前的实现不起作用，因为 StringItemRepository 没有实现 GetItem 因为它没有返回 Item ...您会认为，由于 StringItem 是 Item 它可以工作，但没有这样的运气。

我想我必须在创建存储库时使用 2 种泛型类型（StringType 和 String），除非其他人有其他解决方案。

好的......所以，这有效：

```
class Item<T> { 
  public T id {get;set;}
}

class StringItem : Item<string> {
  public string id {get;set;}
}

interface IItemRepo<T> {
  Item<T> GetItem(T itemId);
}

class StringItemRepository : IItemRepo<string> {
  public Item<string> GetItem(string itemId) { 
    return new StringItem(); 
  }
} 
```

我对让 GetItem 有一个 stringItem 作为返回类型很感兴趣，但是我可以返回一个 StringItem，因为它是 Item 类型的......这将完美地解决......感谢所有帮助......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:35:34.177

听起来你应该`Item`从通用开始 - 然后你根本不需要`StringItem`，它的属性隐藏：

```
class Item<T> {
  public T ItemId { get; set; }
}

interface IItemRepository<T> {
  Item<T> GetItem(T itemId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:39:43.513

为什么不实现这样的；

```
public class Item<T>
{
    public T ItemId { get; set; }
}

public class StringItem<T> : Item<T>
{

}

public interface IItemRepository<T>
{
    Item<T> GetItem(T itemId);
}

public class StringItemRepository<T> : IItemRepository<T>
{
    public Item<T> GetItem(T itemId)
    {
        throw new NotImplementedException();
    }
} 
```

# python - 从 os.walk 有效地删除 dirnames 中的子目录

> ID：10620737
> 
> 赞同：7
> 
> 时间：2012-05-16T14:30:07.147
> 
> 标签：python, python-2.7, os.walk

在 python 2.7 的 mac 上，当使用 os.walk 遍历目录时，我的脚本会遍历“apps”，即 appname.app，因为这些实际上只是它们自己的目录。后来在处理过程中，我遇到了错误。无论如何我都不想浏览它们，所以为了我的目的，最好忽略那些类型的“目录”。

所以这是我目前的解决方案：

```
for root, subdirs, files in os.walk(directory, True):
    for subdir in subdirs:
        if '.' in subdir:
            subdirs.remove(subdir)
    #do more stuff 
```

如您所见，第二个 for 循环将针对子目录的每次迭代运行，这是不必要的，因为第一遍删除了我想要删除的所有内容。

必须有更有效的方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-16T14:41:23.387

你可以做这样的事情（假设你想忽略包含'.'的目录）：

```
subdirs[:] = [d for d in subdirs if '.' not in d] 
```

切片分配（而不仅仅是`subdirs = ...`）是必要的，因为您需要修改`os.walk`正在使用的相同列表，而不是创建新列表。

请注意，您的原始代码不正确，因为您在迭代列表时修改了列表，这是不允许的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:31:34.473

[os.walk](http://docs.python.org/library/os.html?highlight=os.walk#os.walk)的 Python 文档中的这个示例可能会有所帮助。它自下而上（删除）工作。

```
# Delete everything reachable from the directory named in "top",
# assuming there are no symbolic links.
# CAUTION:  This is dangerous!  For example, if top == '/', it
# could delete all your disk files.
import os
for root, dirs, files in os.walk(top, topdown=False):
    for name in files:
        os.remove(os.path.join(root, name))
    for name in dirs:
        os.rmdir(os.path.join(root, name)) 
```

我对您的目标有点困惑，您是在尝试删除目录子树并遇到错误，还是您尝试遍历树并仅尝试列出简单的文件名（不包括目录名）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T13:19:29.250

我认为所需要的只是在迭代之前删除目录：

```
for root, subdirs, files in os.walk(directory, True):
        if '.' in subdirs:
            subdirs.remove('.')
        for subdir in subdirs:
            #do more stuff 
```

# javascript - 页面重新加载后的断点

> ID：10620741
> 
> 赞同：8
> 
> 时间：2012-05-16T14:30:17.627
> 
> 标签：javascript, firebug, breakpoints, google-chrome-devtools

页面重新加载后，我需要在断点处停止。我在代码中放置了一个断点，但重新加载后它被禁用。

推杆

```
debugger; 
```

在代码中工作正常。

但我想知道是否有办法在 firebug 或 chrome 开发工具中做到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T14:41:08.803

可能是您在重新加载时更改的页面 url 中有参数。

`http://website.com/page.html?stamp=20120516103456`

然后每次刷新时加载一个新页面。
这可以解释为什么你的断点消失了。

# jaxb - xjc 逆包名顺序

> ID：10620743
> 
> 赞同：0
> 
> 时间：2012-05-16T14:30:27.200
> 
> 标签：jaxb, xjc

我运行以下命令

```
java -jar "C:\Program Files\eclipse\plugins\org.jvnet.jaxbw.eclipse_1.1.0\lib\jaxb-xjc.jar" -d src  -catalog xsd\catalog.cat xsd\componentsData.xsd 
```

xsd\componentsData.xsd 包含以下行：

```
xmlns:txtColor="com.my.company.product.jaxb.TextColor"
xmlns="com.my.company.product.jaxb.componentsData"
targetNamespace="com.my.company.product.jaxb.componentsData"

<xsd:import
schemaLocation="TextColor.xsd"
namespace="com.my.company.product.jaxb.TextColor"/> 
```

xsd\TextColor.xsd 包含以下内容

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" jaxb:version="2.0"
         xmlns="com.my.company.product.jaxb.TextColor"
         targetNamespace="com.my.company.product.jaxb.TextColor"
         > 
```

这是我的目录：

```
<!DOCTYPE catalog
  PUBLIC "-//OASIS//DTD Entity Resolution XML Catalog V1.0//EN"
       "http://www.oasis-open.org/committees/entity/release/1.0/catalog.dtd">
<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog">

<system
    systemId="com.my.company.product.jaxb.TextColor.TextColor.xsd"
    uri="TextColor"/> 
```

我的文件是在以下路径中生成的 - 顺序**颠倒了，为什么？**: componentsData.jaxb.product.company.my.com

和

TextColor.jaxb.product.company.my.com

如果我添加以正确顺序生成的以下参数文件，但似乎没有考虑到 catalog.cat

```
-p com.my.company.product.jaxb.componentsData 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:17:19.480

我需要添加一个绑定文件（带有 xjc 的 -b 选项）

```
<jaxb:bindings
   xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   version="2.1">

<jaxb:bindings schemaLocation="componentsData.xsd" node="/xsd:schema">
    <jaxb:schemaBindings>
        <jaxb:package name="com.my.company.product.jaxb.componentsData"/>
    </jaxb:schemaBindings>
</jaxb:bindings>

<jaxb:bindings schemaLocation="TextColor.xsd" node="/xsd:schema">
    <jaxb:schemaBindings>
        <jaxb:package name="com.my.company.product.jaxb.TextColor"/>
    </jaxb:schemaBindings>
</jaxb:bindings>
</jaxb:bindings> 
```

但我仍然有一个问题：我开始使用 xjc 因为我没有成功使用 eclipse，我该如何使用 eclipse gui

# c# - Visual Studio 中的块架构

> ID：10620744
> 
> 赞同：0
> 
> 时间：2012-05-16T14:30:28.447
> 
> 标签：c#, .net, visual-studio

我是新手，使用 Visual Studio、.Net、C#。您能否帮我解决以下问题：如果我已经创建了一个解决方案，我如何在 Visual Studio 中创建和查看它的块模式？我的意思是显示方法和变量等之间的迭代的图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:38:00.220

当您的意思是从代码创建 UML 类图时，请看这里：

[http://msdn.microsoft.com/en-us/library/ff657806.aspx](http://msdn.microsoft.com/en-us/library/ff657806.aspx)

还有一组关于 Visual Studio 建模功能的视频 [http://channel9.msdn.com/blogs/clinted](http://channel9.msdn.com/blogs/clinted)

但架构资源管理器功能仅存在于 Visual Studio 2010 Ultimate

另请查看可视化和建模功能包 [http://msdn.microsoft.com/en-US/vstudio/ff655021.aspx](http://msdn.microsoft.com/en-US/vstudio/ff655021.aspx)

如果您没有 VS 的 Ultimate 版本，那么在这种情况下，[NClass](http://nclass.sourceforge.net/downloads.html)可能是您不错的免费替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:34:40.827

右键单击您的项目，“查看类图”。这仅在终极版中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:40:03.133

您所描述的听起来更像是“序列图”。如果您有 Visual STudio 2010 Ultimate，您可以在任何方法中单击鼠标右键并选择“生成序列图”。

但是，序列图并没有显示与局部变量的所有交互。只是方法（和可选的属性）调用。

# ruby-on-rails - Rails - 无法使用 Devise 身份验证在 Heroku 上为应用程序进行数据库迁移

> ID：10620747
> 
> 赞同：0
> 
> 时间：2012-05-16T14:30:39.703
> 
> 标签：ruby-on-rails, heroku, devise, database-migration

我的应用程序使用 Devise 身份验证 gem。

当我做

```
rake db:migrate 
```

在本地，一切都很顺利，但是当我在 Heroku 上执行此操作时：

```
heroku run rake db:migrate --app myappname 
```

我明白了

```
rake aborted!
uninitialized constant Devise::Encryptors::Base

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我不知道会出什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:04:16.653

我遇到了同样的问题，因为我实现了一个自定义加密器。自 2.1 版以来，devise 自定义加密器已被提取到单独的 gem。要使其正常工作，请执行以下操作。

将可设计加密的 gem 添加到您的`Gemfile`.

`gem 'devise-encryptable'`

来自 Devise::Encryptable::Encryptors::Base 的子类，而不是 Devise::Encryptors::Base。

```
# lib/devise/encryptors/md5.rb
require 'digest/md5'

module Devise
  module Encryptable
    module Encryptors
      class Md5 < Base
        def self.digest(password, stretches, salt, pepper)
          str = [password, salt].flatten.compact.join
          Digest::MD5.hexdigest(str)
        end
      end
    end
  end
end 
```

我也更新了设计[的操作方法页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-a-custom-encryptor)。我希望这能解决你的问题。

# xcode - 类似计算器的聚光灯工具

> ID：10620753
> 
> 赞同：8
> 
> 时间：2012-05-16T14:30:58.643
> 
> 标签：xcode, macos, cocoa, spotlight

如何为创建聚光灯工具（如计算器聚光灯工具）的 OS X 应用程序创建聚光灯导入器？它是您输入方程式的工具，计算器应用程序会显示结果。我想做这样的事情，但我从来没有尝试过使用聚光灯导入器，所以我不知道我将如何做到这一点。有可能一开始就这样做吗？

我不需要特定的代码，只需大致了解我将如何做到这一点。我什至可能会错误地考虑采用进口商的方法，但我不确定。

在这一点上，我什至不需要完整的答案。即使您拥有的只是一个看似无关紧要的想法，也请发表评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:04:02.657

我很确定这不可能与 Spotlight 导入器有关，这是 Apple 提供的唯一官方 Spotlight 集成接口。

Spotlight 导入器仅在 Spotlight 为您的文件编制索引时运行（例如，当您的文件类型发生更改时），而不是在 Spotlight 实际运行您的搜索查询时运行，因此您无法像内置计算器那样直接“反应”用户的输入做。

[使用SIMBL 之](http://www.culater.net/software/SIMBL/SIMBL.php)类的代码注入可能会侵入 Spotlight UI，但这将非常困难且脆弱（可能会因系统更新等原因而中断）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T17:53:23.287

[阿尔弗雷德](http://www.alfredapp.com/)值得一看。免费版本中的高级计算器功能使用[GCMathParser](http://apptree.net/parser.htm)。用户使用热键弹出界面，键入方程式，然后立即显示结果。按 enter 将结果复制到剪贴板并关闭该框。在我看来，相当光滑。

使用 Power Pack，您可以使用 shell 脚本或 AppleScripts 构建自己的扩展，尽管它们中的大多数似乎使用 Growl 来显示结果。这听起来与您要完成的任务相似：http: [//thefeverdog.tumblr.com/post/10308253571/currency-converter](http://thefeverdog.tumblr.com/post/10308253571/currency-converter)

我猜您不会使用 Alfred，因为您想自己构建它，但您可能会发现用户界面仍然鼓舞人心。

# list - Prolog 中的列表搜索

> ID：10620756
> 
> 赞同：0
> 
> 时间：2012-05-16T14:31:16.880
> 
> 标签：list, search, recursion, prolog

我正在尝试在 Prolog 的列表中进行搜索，但我想从某个位置开始。我必须做那个无聊的递归搜索吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:15:39.200

您可以使用 N 个 free_vars 跳过 N 个位置，并 append/3 以摆脱列表的标题：

```
?- [user].
|: find(Needle, Haystack, Skip) :-
|:       length(Header, Skip),
|:       append(Header, Actual, Haystack),
|:       memberchk(Needle, Actual).
|: % user://1 compiled 0,04 sec, 2 clauses
true.

?- find(3-X,[1-alfa,2-beta,3-gamma,4-delta,1-abba,2-bridge],1).
X = gamma.

?- find(3-X,[1-alfa,2-beta,3-gamma,4-delta,1-abba,2-bridge],3).
false.

?- find(3-X,[1-alfa,2-beta,3-gamma,4-delta,1-abba,2-bridge],2).
X = gamma. 
```

如果有很多搜索，列表构建`length(Header, Skip)`最好一次完成......

# ios - 在 awakeFromNib 期间自定义 UIView 的边界不正确 - 它们何时设置？

> ID：10620765
> 
> 赞同：8
> 
> 时间：2012-05-16T14:31:50.453
> 
> 标签：ios, uiview, awakefromnib

我有一个自定义 UIView，我使用 Xcode (4) 放置了它。我需要根据视图的实际边界设置一些默认状态。在 awakeFromNib 期间，bounds 似乎在 Xcode 的情节提要布局中返回视图的大小。

该视图位于 UISplitViewController 的详细信息侧，在 Xcode 中，它是一个完整的纵向 iPad 屏幕的大小，但如果应用程序以横向模式加载，则通过弹簧和支柱，它的大小会发生变化，但这似乎在 awakeFromNib 之后发生。

我应该用其他方法设置这个状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:29:39.600

这取决于您设置的状态类型 - 如果它取决于边界，那么您可能需要在每次设备旋转时重置它，大概？在这种情况下，覆盖`setFrame:`可能是一个更好的选择——不过，请务必在执行任何其他操作之前调用超类实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:32:31.830

答案可能是正在寻找，或者至少我使用过的解决方案是在 UIView 中提供一个公共方法，以便由父 UIViewController 调用`viewWillAppear:`

# java - 如何使用 Java 驱动程序为 MongoDB 构建 $or 查询？

> ID：10620771
> 
> 赞同：38
> 
> 时间：2012-05-16T14:31:58.410
> 
> 标签：java, mongodb, mongodb-query, mongo-java-driver

我正在尝试或 MongoDB 中的某些条件（使用 Java 驱动程序）。这就是我正在做的事情：

```
Pattern regex = Pattern.compile("title");   
DBCollection coll = MongoDBUtil.getDB().getCollection("post_details");

BasicDBObject query = new BasicDBObject();
query.put("category_title", "myCategory");      
query.append("post_title", regex);  
query.append("post_description", regex);    

DBCursor cur = coll.find(query);
while(cur.hasNext()) {
    System.out.println(cur.next().get("post_id"));
} 
```

我想`$or`在这些条件下使用操作数，但我猜默认是“and”，我不知道如何更改它。在上面的代码中，如果条件之一返回`null`，结果也会是`null`。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-16T14:56:26.180

您是正确的，在查询中指定多个字段的“默认”是每个字段都用作条件过滤器，因此是 AND 操作。

您可以使用具有以下语法的 $or 操作数使用 OR 子句执行 MongoDB 查询：

```
db.col.find({$or:[clause1, clause2]}) 
```

其中每个子句都可以是一个查询。$or 不必是顶级操作数，但如果是 MongoDB 可以为每个单独的子句使用索引。

在您的示例中，您希望以这个查询结束：

```
db.col.find({$or:[{"post_title", regex}, {"post_description", regex}]}); 
```

可以通过以下方式在Java中构造：

```
DBObject clause1 = new BasicDBObject("post_title", regex);  
DBObject clause2 = new BasicDBObject("post_description", regex);    
BasicDBList or = new BasicDBList();
or.add(clause1);
or.add(clause2);
DBObject query = new BasicDBObject("$or", or); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-18T17:02:16.340

使用[过滤器](http://mongodb.github.io/mongo-java-driver/3.6/javadoc/?com/mongodb/client/model/Filters.html)，您可以构建您的过滤器，例如：

```
import com.mongodb.client.model.Filters;
...

Bson filter = Filters.or(
                    Filters.eq("post_title", regex), 
                    Filters.eq("post_description", regex)
                  ); 
```

# php - .php 页面不适用于 xampp

> ID：10620772
> 
> 赞同：0
> 
> 时间：2012-05-16T14:31:58.580
> 
> 标签：php, .htaccess, xampp

我在 Windows 7 上运行 xampp 2.5 版，并通过我正在处理的网站 ( [www.dfwcertautos.com](http://www.dfwcertautos.com) ) 进行 ftp。.php 页面均未加载，但 .html 页面加载正常。我用“hello world”创建了一个 test.php 页面，它加载正确。有什么建议可以让它正常运行吗？该站点没有数据库，但是它确实有一个从其他服务传入的 XML 提要。我没有对 htaccess 文件进行任何更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:43:45.573

你用的是什么 FTP 客户端？

当以“文本”而不​​是“二进制”模式复制文件时，可能会在每个 PHP 文件的开头添加一个特殊的空格，因此 PHP 文件无法在 APACHE 服务器上执行...

编辑：另一个想法 - 你是不是在你的本地主机上使用 PHP 短标签`<?`而不是`<?php`在服务器上使用短开始标签 ( `<?`) 是不允许的......？

# asp.net - 无法加载客户端打印控件

> ID：10620774
> 
> 赞同：2
> 
> 时间：2012-05-16T14:32:00.110
> 
> 标签：asp.net, internet-explorer, reporting-services

我已将 Web 应用程序从 .NET 2.0 升级到 4.0。我正在使用报表服务器 sql server 2005 和报表查看器 8.0 版。单击reportviewer的打印按钮时，我收到一条消息

> 无法加载客户端打印控件

. 我通过在互联网上搜索尝试了更多案例，如下所示。

> 1.将内容 cab 文件从报表服务器复制到客户端 c:\windows\system32 文件夹
> 2.在注册表中注册 rsclientprint.dll。
> 3.为reportview 2008安装重新分发包

我注意到的另一件事是，框架 2.0 中的其他应用程序工作正常，并且在同一个浏览器上打印效果很好，在 Internet Explorer 中的该应用程序中添加加载的显示为 rsclient2008.dll。但它没有为我当前的应用程序加载。我认为这可能是问题所在。请提出任何解决方案。

# php - 使用 PHP 检测文件夹中的文件

> ID：10620776
> 
> 赞同：1
> 
> 时间：2012-05-16T14:32:03.197
> 
> 标签：php, jquery, ajax, html

我正在尝试制作一个实现 PHP 的 HTML5 幻灯片系统。我的想法首先是创建一个系统来检测文件夹中的图像，并将它们放入一个数组中，然后 jquery 将能够访问该数组以在幻灯片中实现。首先，我有一个 php 文件，它将检测文件夹中每个文件的名称，并将它们作为纯文本输出。

我怎样才能让 PHP 将文件名传输到一个数字数组，而不是作为纯文本输出，该数组可以与随后伴随它的 jquery 一起使用？

我打算使用 jquery 来访问然后生成的数字数组。这是怎么做到的？除非做不到，否则还能怎么做？

目标是能够将文件放在文件夹中，并且脚本能够**动态**识别文件的存在，并将它们合并到幻灯片中。然后，此幻灯片将输出到屏幕显示器，该屏幕显示器将用于等候区，以幻灯片形式展示我们学校的学校图像。

这是我到目前为止的代码：

```
<?php
    //Open images directory
    $dir = opendir("images");
    //List files in images directory
    while (($file = readdir($dir)) !== false)
    {
        echo "filename: " . $file . "<br />";
    }
    closedir($dir);
?> 
```

在这一点上，我不知道如何让 PHP 与 Javascript “对话”。我希望有一些简单的方法，我想我想要的是 AJAX，但我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:36:42.897

这里的答案是使用[JSON](http://www.json.org/)，它是许多语言支持的 Javascript 子集，它允许您（以及许多其他事情）非常轻松地将结构化数据从外部源传递到 Javascript。PHP 有一个函数[`json_encode()`](http://php.net/manual/en/function.json-encode.php)允许您将 PHP 数据结构（通常是数组或对象）转换为 Javascript 可以轻松读取的格式。jQuery 还[内置了](http://api.jquery.com/jQuery.getJSON/)对 JSON 的支持。

```
<?php

    // An array of the image file names
    $images = array();

    //Open images directory
    $dir = opendir("images");

    //List files in images directory
    while (($file = readdir($dir)) !== false)
    {
        $images[] = $file;
    }
    closedir($dir);

    echo json_encode($images);

?> 
```

现在，在 jQuery 中你可以这样做：

```
$.getJSON('http://url/of/your/script.php', function(images) {
  // In here the variable "images" is an array identical to the one you constructed with PHP
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:40:23.970

是的，您可以使用 ajax 通过更改 php 代码来将图像文件名作为数组获取，如下所示

```
<?php
    //Open images directory
    $dir = opendir("images");
    $images = array(); 
    //List files in images directory
    while (($file = readdir($dir)) !== false)
    {
        //echo "filename: " . $file . "<br />";
        $images[] = $files;
    }
    closedir($dir);
    echo json_encode($images);
?> 
```

然后使用[$.getJSON](http://api.jquery.com/jQuery.getJSON/) o 获取该列表

```
 $.getJSON('path_to_above_php_file', function(images) {
       //all your files are in images array, you can loop through it to find individual files
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:36:43.320

您可以拥有一个包含所有图片的数组，然后将此数组转换为 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T14:38:43.430

为什么不将图像本身写入文档，而不是简单地存储图像的名称？所以像：

```
<?php
//Open images directory
$dir = opendir("images");
//List files in images directory
while (($file = readdir($dir)) !== false)
{
    $files[] = YOUR_URL_PATH.$file;
}
closedir($dir);
?>
...
<div id="slideshow">
<?php
foreach($files as $img)
    echo '<img class="slide" src="'.$img.'" />';
?>
</div>
...
<script type="text/javascript">
$(document).ready(function()
{
    alert($(".slide").length+" slides detected");
});
</script> 
```

这样，您就可以使用 PHP 来定义 jQuery 正常运行所需的元素，而不是依赖 PHP 来定义您的 jQuery。

**更新：**

如果您的 PHP 和 Javascript 存在于同一页面上，并且您仍然希望能够使用 PHP 设置 Javascript 数组，那么我认为这就是您要寻找的：

```
<?php
//Open images directory
$dir = opendir("images");
//List files in images directory
while (($file = readdir($dir)) !== false)
{
    $files[] = YOUR_URL_PATH.$file;
}
closedir($dir);
?>
...
<script type="text/javascript">
$(document).ready(function()
{
    var fileArr = [<?php echo implode(',',$files); ?>];
});
</script> 
```

这要求您的 Javascript 与定义文件数组的 PHP 位于同一页面上。如果您的 Javascript 旨在被外部引用，那么您最好的选择是使用这里许多其他答案提到的 JSON 数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T14:39:24.143

我会说[JSON](http://www.w3schools.com/json/default.asp)非常适合您的情况。只需创建打印（回显）包含文件列表的 JSON 对象的 PHP 文件。您可以使用[json_encode()](http://php.net/manual/en/function.json-encode.php)创建 JSON 对象。在您的浏览器端，您可以发出 AJAX 请求（或简单地使用[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)）并将数据类型设置为 JSON，您应该很高兴：

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

[在这里](http://php.net/manual/en/book.json.php)，您可以阅读有关在 PHP 中使用 JSON 的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T14:41:07.270

有几种方法可以做到这一点，一种快速简便的方法是：

你的PHP：

```
$dir = opendir("images");
$store = array();
while (($file = readdir($dir)) !== false)
{
    $store[] = $file;
}
closedir($dir); 
```

现在你有一个包含所有文件的数组（我可能会补充一点，你可能想要验证文件是图像！）。我喜欢将它们作为 json 字符串转储到 JS 中，因为这样可以省去我的麻烦。所以：

```
echo "<script> var allimages = jQuery.parseJSON('".addslashes(json_encode($store))."'); </script>"; 
```

现在，如果您`console.log()`使用 allimages 变量，您将看到其中包含所有图像，因此您可以根据需要使用“$.each”或类似名称。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-16T14:46:16.947

SPL 库具有处理目录的功能

来自 PHP 网站：

用法示例：查看所有文件：

```
<?php
   $ite=new RecursiveDirectoryIterator($_POST['path']);

   $files = array();
   foreach (new RecursiveIteratorIterator($ite) as $filename=>$cur) {
       array_push($files, $filename);
   }
   echo json_encode($files);
?> 
```

现在使用 jquery.post() 您可以检索文件夹中的文件列表。

# sql-server - 如何调试似乎无法在任何测试环境中重现的 SQL Server 数据问题？

> ID：10620777
> 
> 赞同：4
> 
> 时间：2012-05-16T14:32:05.060
> 
> 标签：sql-server, sql-server-2008, debugging

我在生产中有一个存储过程，它做两件事。它更新一个表，然后将一条记录插入到另一个表中。第一步（更新）似乎发生了，但我们通过检查没有发生第二步的数据发现了实例。我查看了数据并确认这不是数据问题。我已经确认查询返回了适当的数据，以确保查询完成并且在正常情况下都应该执行。我不知道是否可能存在某种性能问题......或阻止该步骤发生的第二步发生的阻塞问题。

存储过程的错误处理如下。

```
BEGIN TRY  

BEGIN TRANSACTION;  

 -- perform update to data

 -- insert record into second table. 

 IF ( @@ERROR = 0 AND @@TRANCOUNT > 0 )  
    COMMIT TRANSACTION;  

 END TRY  
 BEGIN CATCH  

   IF ( @@TRANCOUNT > 0 )  
   BEGIN   
      ROLLBACK TRANSACTION;  
   END  

   DECLARE @WebSafeErrorId INT;  
   EXEC dbo.spErrorInsert @WebSafeErrorId OUTPUT, 'Proc';  

   -- Reraise the error back to the client.  
   IF ( @WebSafeErrorId != 0 )   
   BEGIN   
      DECLARE @Error VARCHAR(20);  
      SET @Error = CAST( @WebSafeErrorId AS VARCHAR(20) );  
      RAISERROR( @Error, 11, 1 );  
   END  
   ELSE  
   BEGIN  
      RAISERROR( 'An error has occurred but there is no error to log.', 11, 1 );  
   END   

END CATCH; 
```

当然，如果此过程中发生导致插入不发生的错误，它将被记录然后引发。spErrorInsert 的代码如下...

```
CREATE PROCEDURE [dbo].[spErrorInsert]  
@ReturnErrorId INT OUTPUT  
, @ErrorSourceType VARCHAR(4) = NULL  
, @ParentErrorId INT = NULL  
, @StackTrace VARCHAR(MAX) = NULL  
AS  

SET NOCOUNT ON;  
--SET XACT_ABORT ON;  

-- Will indicate an error was not logged.  
SET @ReturnErrorID = 0;   

DECLARE  
  @ErrorSource VARCHAR(200)  
  , @ErrorMessage VARCHAR(MAX)  
  , @ComposedErrorMessage VARCHAR(MAX)  
  , @ErrorLine INT  
  , @ErrorSeverity INT  
  , @ErrorState INT  
  , @ErrorNumber INT;  

 SET @ErrorSource = ERROR_PROCEDURE();  
 SET @ErrorMessage = ERROR_MESSAGE();  
 SET @ErrorLine = ERROR_LINE();  
 SET @ErrorSeverity = ERROR_SEVERITY();  
 SET @ErrorState = ERROR_STATE();  
 SET @ErrorNumber = ERROR_NUMBER();  
 SET @ComposedErrorMessage = 'Message: Error occurred in procedure ' + CAST( @ErrorSource AS VARCHAR(MAX) )  
  + ' on line ' + CAST( @ErrorLine AS VARCHAR(MAX) )   
  + '. Error: ' + @ErrorMessage;  

BEGIN TRY  

   INSERT INTO Errors(  
      ParentId  
      , ErrorSourceType  
      , ErrorSource  
      , [Message]  
      , [LineNo]  
      , Severity  
      , Stacktrace  
      , ts)  
   VALUES (@ParentErrorId  
      , @ErrorSourceType --@ErrorSourceType --- NOTE: move this into a parameter ...   
      , @ErrorSource  
      , @ComposedErrorMessage  
      , @ErrorLine  
      , @ErrorState  
      , @Stacktrace  
      , GETDATE()  
      );  

  SET @ReturnErrorId = SCOPE_IDENTITY();  

END TRY  
BEGIN CATCH  

   RAISERROR( 'An error has occurred but there is no error to log.', 11, 1 );  

END CATCH; 
```

我不知道是否有办法在调用某个过程的特定时间获取数据库正在发生的事情的快照......我不确定如何确定它是否没有发生应该？有没有我可以使用的工具或我不知道的 sql 功能？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:04:08.733

如果您想监视数据库，SQL Profiler 是一个不错的起点，但它将被弃用。

扩展事件的功能要强大得多，如果您真的对监控正在发生的事情感兴趣，我建议您阅读这些内容。

作为一个想法，如果您的过程代码使用相同的数据来更新行，因为它要插入到另一个表中，请考虑使用 OUTPUT。

```
Update table set col1 = 'value'
OUTPUT inserted.col INTO othertable
Where col3 = stuff 
```

[输出和输出到](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

或者，如果这是针对某种审计或日志表，您可以使用 DELETED.col1 这将是更新之前的原始值。请注意， INSERTED 将返回您正在更新或插入的值，这两者都称为 INSERTED。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:50:33.683

我会尝试的方法是首先复制此过程并注释掉 try/catch。我发现如果生成错误的代码在 try/catch 块内，tsql 不会引发错误——我猜这是由 catch 子句处理的异常的 sql 等价物。

我在我的数据库中使用一个表来永久记录错误发生时（我在嵌入式编程中学到的一个技巧）错误表创建代码是：

```
CREATE TABLE dbo.errors (
id smallint NOT NULL IDENTITY(1, 1) PRIMARY KEY,
errordesc nvarchar (max) NOT NULL,
dateandtime smalldatetime NOT NULL, -- Date and time of last occurance
errorcount int NOT NULL) ; 
```

我将记录添加到错误表中的存储过程是：

```
CREATE PROCEDURE jc_diagnostics.jpwsp0005_adderrordescription( 
    @Errordescription nvarchar( max ))
AS 
    BEGIN
    DECLARE
       @Id smallint = 0 ,
       @Currentcount int = 0;
    IF((@Errordescription IS NULL) OR ( @Errordescription = ''))
        BEGIN
            SET @Errordescription = 'Error description missing';
        END;

    SELECT @Id = ( SELECT TOP ( 1 ) id
                 FROM jc_diagnostics.errors
                 WHERE errordesc = @Errordescription );
    IF(@Id IS NOT NULL)
    BEGIN
        SELECT @Currentcount = (SELECT errorcount
                                   FROM jc_diagnostics.errors
                                   WHERE id = @Id );
        SET @Currentcount = @Currentcount + 1;
        UPDATE jc_diagnostics.errors
        SET errorcount = @Currentcount 
          WHERE id = @Id;

        UPDATE jc_diagnostics.errors
        SET dateandtime = CONVERT(smalldatetime , GETDATE())
          WHERE id = @Id;
    END;
ELSE
    BEGIN
        --new entry
        INSERT INTO jc_diagnostics.errors( errordesc ,
                                           dateandtime ,
                                           errorcount )
        VALUES( @Errordescription ,
                CONVERT(smalldatetime , GETDATE()) ,
                1 );
    END;
IF(@Id IS NULL)
    BEGIN
        SET @Id = SCOPE_IDENTITY( );
    END;

RETURN @Id;
END; 
```

发生错误时的调用代码是：

```
Declare @Failuredesc nvarchar(max) = 'Description of error';
EXEC @Retval = jc_diagnostics.jpwsp0005_adderrordescription @Failuredesc; 
```

返回值@Retval 包含错误表中记录的id，以便您查找

最后，我将创建一些代码来不断调用您的过程，直到声明错误为止。然后，您可以检查错误表，看看这是否能说明您的问题。

希望这可以帮助。裘德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T19:57:35.197

如果您有 Visual Studio 的副本，请尝试一下。它允许您逐步执行存储过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T03:18:51.567

从逻辑上思考 - 因为您在这两个步骤之前声明了事务，所以任何错误都会导致两个事务的回滚。所以很可能这里根本没有错误。我建议再次检查您的查询，因为似乎问题可能出在它们而不是其他任何地方。如果您需要更多建议，请发布整个代码。

问候

罗马

# c++ - boost::serialization::access 可以在运行时/以编程方式动态更改版本吗？

> ID：10620783
> 
> 赞同：3
> 
> 时间：2012-05-16T14:32:22.623
> 
> 标签：c++, serialization, boost

我之前问过[这个](https://stackoverflow.com/questions/10589278/how-to-handle-changes-in-class-structure-and-be-backward-compatible-with-data-ob)关于如何使用“版本化”序列化的问题`boost::serialization::access`

我已经能够做一些我想做的事，但似乎有很大的限制。

具体来说，我希望能够在运行时更改版本并在代码中动态更改序列化版本。

然而，宏

```
BOOST_CLASS_VERSION(ClassName, ver) 
```

似乎不允许这种行为。

我想我可以创建不同的类并在需要时使用它们，但我不希望这样做，因为这需要对我们进行大量代码更改。

**有没有办法以编程方式更改类以在同一执行期间使用不同的版本？**

再解释一下我们需要做什么：

我正在尝试使用的用例是读取旧版本的程序（首次运行/升级时），然后使用新版本编写，然后也能够读取该新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:06:21.913

该设计似乎打算不要动态更改版本。但是，可以通过*serialize*、*save*或*load*函数的*version*参数来支持读取旧数据。也就是说，在您的加载功能中，您可以检查*版本*并查看是否必须以不同方式加载特定部分。因此加载旧数据是可能的，但必须在一组序列化函数中完成。

# python - 金字塔项目内的外部 iFrame。更新时不刷新

> ID：10620784
> 
> 赞同：1
> 
> 时间：2012-05-16T14:32:29.303
> 
> 标签：python, google-chrome, iframe, refresh, pyramid

我们在金字塔网页中包含一个 iFrame。iFrame 是一个本地 html 文件，它不是金字塔网页。

每次更新 HTML 内容（= iFrame）并且我再次使用 iFrame 刷新或加载金字塔网页时，iFrame 内容都不会更新。如果我用浏览器强制刷新，则 iFrame 具有新内容。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T07:57:18.523

好吧，首先，这个问题与 Python 或 Pyramid 没有任何关系——Pyramid 只是为您生成了一个恰好是 HTML 页面的文本块。之后一切都在浏览器中发生 - 我想你的“其他页面”有 HTTP 标头，表明浏览器不需要每次都重新加载它并且可以缓存它。

如果您想在每次生成“金字塔页面”时强制重新加载“其他”页面，您可以尝试诱使浏览器认为您每次都想加载一个新页面。为此，只需添加一个带有一些随机数的虚假 url 参数：

```
<iframe src="http://other.domain.com/somepage.html?blah=1452352235"></iframe> 
```

其中 blah= 之后的数字可能是时间戳或只是一个随机数。

# label - jqplot 无法正确显示图例和 y 轴标签

> ID：10620785
> 
> 赞同：5
> 
> 时间：2012-05-16T14:32:34.570
> 
> 标签：label, jqplot, legend

我有一个使用带有两条线的 jqplot 的折线图。一条线代表最大值，另一条线代表最小值。我的代码图例显示不正确，并且 y 轴标签与 y 轴刻度重叠我做错了什么？谢谢你的帮助！

[编辑] Jqplot 版本是 jquery.jqplot.1.0.0b2_r1012

**我的代码显示此图表：**

![我的代码显示此图表](../Images/f40f932a96b8489dfb59c78e0038db60.png)

**我想要一个像这张** [图片中的传奇](http://www.jqplot.com/docs/files/images/basicoptions.png)

**这是我的代码：**

```
<link rel="stylesheet" type="text/css" hrf="../plugins/jqplot/jquery.jqplot.min.css" />
<script type="text/javascript" src="../plugins/jqplot/jquery.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot/plugins/jqplot.enhancedLegendRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot/plugins/jqplot.canvasOverlay.min.js"></script>
<script>
  $(document).ready(function(){               
          var maxPoints86 = [3.000000,4.000000,4.500000,5.000000,7.000000,7.000000,5.500000,8.500000,6.700000,5.200000,4.000000,5.500000,0.200000,7.500000,5.000000,5.200000,5.000000];
          var minPoints86 = [2.000000,1.000000,3.000000,4.000000,5.000000,4.800000,5.000000,6.000000,4.000000,2.500000,2.500000,5.000000,0.100000,6.000000,3.500000,5.000000,5.000000];

          var plot86 = $.jqplot('chart', [maxPoints86, minPoints86], 
          { 
              title:'Errores en facturación',
              axesDefaults: {
                labelRenderer: $.jqplot.CanvasAxisLabelRenderer
              },
              axes: {
                xaxis: {
                  label: "Monthly",
                },
                yaxis: {
                  label: "Percentage"
                }
              },
              legend: {
                show: true,
                location: 'se',
                labels:['Max','Min'],
                showSwatch: true,
                predraw: false,
                placement:"insideGrid",
              },
              series:[ 
                  {
                    lineWidth:5,
                    markerOptions: { style:"circle", size:10 }
                  },
                  {
                    lineWidth:5, 
                    markerOptions: { style:"filledSquare", size:10 }
                  }
              ]
            }
          );

    });
</script>
<div id="chart" style="width:500px;height:300px;"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:45:53.630

马克在他的评论中解决了。我的样式表链接错误，href 应该是 href。非常感谢马克！

# mysql - 使用通过连接 MySQL 中的两个表获得的值更新列

> ID：10620788
> 
> 赞同：1
> 
> 时间：2012-05-16T14:32:42.370
> 
> 标签：mysql, magento

有很多关于连接两个表的信息，但是我对 Select 不感兴趣，但对 Update 不感兴趣（这个也没有帮助：[用其他两个表中的值更新表中的列](https://stackoverflow.com/questions/3302221/update-a-column-in-a-table-with-values-from-two-other-tables)）。

我需要在 Magento 中订购属性。我打算这样做的方式是：有两个相关的表（eav_attribute_option 和 eav_attribute_option_values）。它们由**option_id**加入。我需要根据**eav_attribute_option_values**表（**值**列）中的字母顺序更新**eav_attribute_option表中的****sort_order**字段。

 ******我到目前为止是这样的：

```
SELECT *
FROM eav_attribute_option_value, eav_attribute_option
WHERE eav_attribute_option_value.option_id = eav_attribute_option.option_id    
ORDER BY value 
```

我得到：

```
value_id option_id store_id value    option_id_1  attribute_id  sort_order
13534      5681     0   ADULT               5681          131           0
13543      5710     0   Yellow              5710          134           0
13547      502      0   Yellow - 10A         502          127           0
13548      3001     0   Yellow - 120cm      3001          127           0
13549      503      0   Yellow - 12A         503          127           0 
```

通过以下查询，我看到了我需要的东西：

```
SELECT t.*, @i:=@i+1 AS iterator
FROM (SELECT value, eav_attribute_option.option_id
FROM eav_attribute_option_value, eav_attribute_option
WHERE eav_attribute_option_value.option_id = eav_attribute_option.option_id 
ORDER BY value) t,(SELECT @i:=0) foo 
```

我明白了：

```
value           option_id   iterator
ADULT           5681        1
Yellow          5710        2
Yellow - 10A    502         3
Yellow - 120cm  3001        4
Yellow - 12A    503         5
Yellow - 14A    504         6 
```

最大的问题： **如何使用“迭代器”列中的值更新 eav_attribute_option 中的 sort_order 列，并将 option_id 作为链接字段？**

# 从 eav_attribute_option 中选择 *

```
option_id   attribute_id    sort_order
1            18             0
2            18             1
3            127            0
4            127            0
5            127            0
6            127            0 
```

我从这里得到“迭代器”查询：[使用 MySQL，如何生成包含表中记录索引的列？](https://stackoverflow.com/questions/3126972/mysql-row-number)

编辑：这是答案

```
UPDATE eav_attribute_option, (SELECT t.*, @i:=@i+1 AS iterator 
FROM 
(SELECT value, eav_attribute_option.option_id 
    FROM eav_attribute_option_value, eav_attribute_option 
    WHERE eav_attribute_option_value.option_id = eav_attribute_option.option_id 
    ORDER BY value) t,(SELECT @i:=0) x) tbl2 
SET eav_attribute_option.sort_order = tbl2.iterator 
WHERE eav_attribute_option.option_id = tbl2.option_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:01:29.707

您需要使用存储过程或视图。生成迭代器时，单个更新命令将无法执行您需要的操作，并且该组合是您需要访问以更新 eav_attribute_option 表的表格数据。

使用 SP 为迭代器查询创建一个游标并循环遍历它以使用简单的 where 更新 eav_attribute_option 表的 sort_order 列。

使用视图，您需要为迭代器查询创建一个视图。然后您可以使用此视图名称加入 eav_attribute_option 表并给出相关的更新命令。

我将推荐 SP 方法，因为当数据发生变化并对数据库服务器施加负载时，视图会不断更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:41:23.677

```
UPDATE eav_attribute_option, (SELECT t.*, @i:=@i+1 AS iterator 
FROM 
(SELECT value, eav_attribute_option.option_id 
    FROM eav_attribute_option_value, eav_attribute_option 
    WHERE eav_attribute_option_value.option_id = eav_attribute_option.option_id 
    ORDER BY value) t,(SELECT @i:=0) x) tbl2 
SET eav_attribute_option.sort_order = tbl2.iterator 
WHERE eav_attribute_option.option_id = tbl2.option_id 
```******

# c# - 将图表模板应用于 Excel 图表

> ID：10620789
> 
> 赞同：5
> 
> 时间：2012-05-16T14:32:43.060
> 
> 标签：c#, wpf, excel-interop

我已经成功地使用 WPF 在 Excel 中创建了一个图表。我可以使用以下方法将库存 Excel 布局应用于图表：

```
xlChart.ApplyLayout(i); 
```

其中 xlChart 是我的图表，“i”代表我选择的布局。

但是，我想更进一步，应用我自己的自定义图表类型。我在 Excel 中创建了一个图表类型，并将其保存为 crtx 文件。我已将此作为嵌入式资源添加到我的项目中，并尝试将其应用于 Excel 图表，如下所示：

```
var file = new Uri("pack://application:,,,/Resources/Templates/line.crtx");
xlChart.ApplyChartTemplate(file.AbsoluteUri); 
```

但是，这失败了

```
HRESULT_FAIL 
```

我可能没有正确引用模板，所以希望有人能提供帮助！

编辑：

我设法找到了解决方法。我可以将模板复制到输出目录并使用以下方法引用它：

```
var path = Path.GetFullPath("Resources/Templates/line.crtx");
xlChart.ApplyChartTemplate(path); 
```

但是，为了整洁，我更愿意将图表作为嵌入式资源。我想你不可能拥有一切！

# symfony - 在 bindrequest 之前删除输入文本字段中的所有空格

> ID：10620790
> 
> 赞同：0
> 
> 时间：2012-05-16T14:32:45.330
> 
> 标签：symfony

好吧，就像问题的标题一样，任何人都可以提供帮助吗？i 表示不在字符串前后的所有空格。我只是看到修剪选项为真，这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:54:41.770

Symfony 在内部使用 EventListener 处理这个问题。我应该想象你可以为自己的目的窃取这种技术。

```
namespace Your\Bundle\Form\Extension\Core\EventListener;

use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\Event\FilterDataEvent;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class StripWhitespaceListener implements EventSubscriberInterface
{
  public function onBindClientData( FilterDataEvent $event )
  {
    $data = $event->getData();

    if ( is_string( $data ) )
    {
      $event->setData( preg_replace( "/\s/", "", $data ) );
    }
  }

  static public function getSubscribedEvents()
  {
    return array( FormEvents::BIND_CLIENT_DATA => 'onBindClientData' );
  }
} 
```

然后，在您的表单类型中`buildForm()`

```
public function buildForm( FormBuilder $builder, array $options )
{
  $builder
    ->add( 'foo', 'text', array( 'label' => 'Foo' ) )
  ;

  $builder->get( 'foo' )->addEventSubscriber( new StripWhitespaceListener() );
} 
```

# svn - 移动嵌套的 SVN 存储库

> ID：10620792
> 
> 赞同：1
> 
> 时间：2012-05-16T14:32:55.583
> 
> 标签：svn, batch-file, visualsvn, visualsvn-server

我需要在 Windows 中将 SVN 存储库从一台服务器移动到另一台服务器。诀窍是我想从嵌套存储库中的项目中排除除主干、分支和标签之外的所有内容。

我目前有一个大型存储库，所有项目都在（MyBigRepo）下。目前的结构是：

```
/Repositories/MyBigRepo/MyProject1/trunk
/Repositories/MyBigRepo/MyProject1/branches
/Repositories/MyBigRepo/MyProject1/tags

/Repositories/MyBigRepo/MyProject2/trunk
/Repositories/MyBigRepo/MyProject2/branches
/Repositories/MyBigRepo/MyProject2/tags

/Repositories/MyBigRepo/MyProject3/trunk
/Repositories/MyBigRepo/MyProject3/branches
/Repositories/MyBigRepo/MyProject3/tags 
```

我只想移动`MyProject1`，但我想*排除*主文件夹`MyProject1`，只从存储库中移动主干、分支和标签`MyProject1`。我*不想*动`MyProject2`或`MyProject3`。换句话说，我的*目标*是形成类似于下面的新存储库。

```
/Repositories/NewRepo/trunk
/Repositories/NewRepo/branches
/Repositories/NewRepo/tags 
```

这是我为完成这项工作而创建的批处理文件：

```
:: Create a dump of the old repo
svnadmin dump %OldRepoPath% > %MyBigRepoDumpFile%

:: Remove the other projects
svndumpfilter include "MyProject1" < %MyBigRepoDumpFile% > %MyProject1DumpFile%

:: Create a new repo
svnadmin create %NewRepoPath%

:: Load the dump into the new repo
svnadmin load %NewRepoPath% < %MyProject1DumpFile% 
```

我的问题是批处理仍然在下面创建 MyProject1 目录`%NewRepoPath%`：

```
/Repositories/NewRepo/MyProject1/trunk
/Repositories/NewRepo/MyProject1/branches
/Repositories/NewRepo/MyProject1/tags 
```

有没有办法从我的转储文件中排除额外的级别（MyProject1）或将其上移一个级别，仍然保留历史记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:42:35.300

我认为你最好的选择是“按原样”移动它（存在额外的级别），然后`svn copy`在新的存储库中重做结构。

还有一个选项可以调整您的转储文件[，如此处所述](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.filtering)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:03:11.307

您可以运行 svndumpfilter 两次：

1.  过滤掉“/Repositories/NewRepo/MyProject1/”路径（就像你已经完成的那样），
2.  过滤掉“主干”、“分支”和“标签”。

# php - 学说迁移 2 + zend 框架 2 = 有可能吗？

> ID：10620794
> 
> 赞同：5
> 
> 时间：2012-05-16T14:33:00.610
> 
> 标签：php, doctrine-orm, zend-framework2

我已经使用了本指南[http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)现在我有一个有效的 Doctrine 2 + ZF2 软件。

我使用版本控制系统，然后我想使用 Doctrine MIGRATIONS 工具来拥有数据库迁移系统。

如果我穿上外壳`./doctrine-module orm:schema-tool:update`它可以正常工作，但是如果我使用迁移工具，例如`./doctrine-module migrations:status`系统会给我一个错误：

> [Doctrine\DBAL\Migrations\MigrationException]
> 必须配置迁移命名空间才能使用 Doctrine 迁移。

需要哪些配置？DoctrineOrmModule 是否支持 Doctrine 迁移？

我为 zf1 [http://moxune.com/blog/2011/10/configure-doctrine-migrations-2-zend_config/找到了这个](http://moxune.com/blog/2011/10/configure-doctrine-migrations-2-zend_config/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:48:09.510

如果您检查[当前 Travis CI CLI 测试](https://github.com/doctrine/DoctrineORMModule/blob/ee07234900d5cfa93598829fdb58373479480ed5/.travis/run-cli.sh#L15)的[DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)，您会注意到有一个`--configuration`指向 XML 配置的参数，如[Doctrine Migrations 文档](https://github.com/doctrine/migrations-documentation)中所述。设置该参数并正确配置 DoctrineORMModule 应该允许您使用 CLI。

# mysql - 如何避免这些触发器更新递归的无限循环？

> ID：10620795
> 
> 赞同：1
> 
> 时间：2012-05-16T14:33:04.633
> 
> 标签：mysql, triggers

我想要以下 3 个触发器：

```
#START TRIGGER
delimiter $$
CREATE TRIGGER `lastedited` AFTER UPDATE ON `eng-jap`
FOR EACH ROW
BEGIN
UPDATE `mrhowtos_main`.`eng` 
SET `english` = new.eng WHERE `english` = old.eng;
UPDATE `mrhowtos_main`.`jap` 
SET `japanese` = new.jap WHERE `japanese` = old.jap;
END;
$$

#START TRIGGER
delimiter $$
CREATE TRIGGER `lastedited2` AFTER UPDATE ON `eng`
FOR EACH ROW
BEGIN
UPDATE `mrhowtos_main`.`eng-jap` 
SET `eng-jap`.`eng` = new.english WHERE `eng-jap`.`eng` = old.english;
END;
$$

#START TRIGGER
delimiter $$
CREATE TRIGGER `lastedited3` AFTER UPDATE ON `jap`
FOR EACH ROW
BEGIN
UPDATE `mrhowtos_main`.`eng-jap` 
SET `eng-jap`.`jap` = new.japanese WHERE `eng-jap`.`jap` = old.japanese;
END;
$$ 
```

但在我创建它们之前，我看到一旦任何表得到更新，触发器就会无限循环。基本上我不希望触发器 UPDATE “触发”其他触发器。我怎么做？

# c# - EF Fluent API：使用两列作为描述符

> ID：10620802
> 
> 赞同：0
> 
> 时间：2012-05-16T14:33:39.067
> 
> 标签：c#, entity-framework, inheritance, ef-code-first, code-first

我有一个相当简单的模型继承层次结构，它映射到现有数据库。

```
public class TestBase
{
    public Int64 Id
}

public class ResultTest : TestBase
{
}

public class BillingTest : TestBase
{
}

public class OrderBase : TestBase
{
}

public class OrderTest : OrderBase
{
}

public class MicroOrderTest : OrderBase
{
} 
```

我遇到的问题是试图将这些映射到我们现有的数据库。在我们的主表 TestRevision 中，我们有一个 Type 列，它指示 BillingTest、ResultTest 和 OrderBase 的类型。然后，在另一个表 TestRevisionOrder 中，我们有一列指示订单的类型是 OrderTest 还是 MicroOrderTest。有没有办法使用 EF Fluent API 来映射这种类型关系？

# android - 需要如何从 Android Activity 调用/使用 Java Web 服务的工作示例

> ID：10620804
> 
> 赞同：2
> 
> 时间：2012-05-16T14:33:46.583
> 
> 标签：android, service, android-activity, web, wsdl

我是 android 开发新手，需要连接到服务器并获取 Android 活动的信息或值。请提供一个工作示例，说明如何从 Android 活动调用/使用 java Web 服务。

这是我到目前为止所做的。

创建了一个 Android 活动。在 Eclipse 中创建的类计算给定半径的区域并返回值。为上述类创建了一个 Web 服务，并使用 WebService Explorer 进行了测试，它可以工作。Web 服务将端口 11144 用于请求，将 8080 用于响应。

我的问题是：我是使用 wsdl 还是使用 Java 客户端作为存根？如果我需要使用存根，它是否像任何其他 java 类一样只是另一个重要？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:55:51.657

这是“如何从 Android Activity 调用/使用 Web 服务”的工作示例

那就是联系服务的班级：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.util.Log;

public class WebService extends SoapObject {

    // a remplacer par les bonnes informations
    private static final String SOAP_ACTION = "http://tempuri.org/GetChampionRotationWeek";

    // a remplacer par les bonnes informations
    private static final String METHOD_NAME = "GetChampionRotationWeek";

    // a remplacer par les bonnes informations
    private static final String NAMESPACE = "http://tempuri.org/";

    // a remplacer par les bonnes informations
    private static final String URL = "http://www.thinkdroid.eu/WebService1.asmx";

    public WebServiceLogin(String namespace, String name) {
        super(namespace, name);
    }

    public String getResult(){
        String resultat = "";
        try {
            SoapObject requete = new SoapObject(NAMESPACE, METHOD_NAME);
            //Soap version 1.1
            SoapSerializationEnvelope enveloppe = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            // Codé en dotNet ou non ?
            enveloppe.dotNet = true;
            enveloppe.setOutputSoapObject(requete);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, enveloppe);
            resultat = enveloppe.getResponse().toString();
        } catch (Exception e) {
            Log.e("Exception", "" + e);
            e.printStackTrace();
        }
        return resultat;
    }
} 
```

这就是实例化和使用这个类的方法：

```
try {
    WebService serviceConnexion = new WebService("http://tempuri.org/", "WebService1Soap");
    result = serviceConnexion.getResult();
} catch (Exception e) {
    e.printStackTrace();
} 
```

我使用这个库来联系服务： [http ://code.google.com/p/ksoap2-android/](http://code.google.com/p/ksoap2-android/)

来源：[http](http://www.thinkdroid.eu/?p=192) ://www.thinkdroid.eu/?p=192 （法文网站）

我希望我对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:35:29.390

您可以使用以下所有方法在android中调用Web服务

```
public String postData(String result, JSONObject obj) {
            // Create a new HttpClient and Post Header
            String InsertTransactionResult = null;
            HttpClient httpclient = new DefaultHttpClient();
            HttpParams myParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(myParams, 1000);
            HttpConnectionParams.setSoTimeout(myParams, 1000);

            try {

                HttpPost httppost = new HttpPost(result.toString());
                httppost.setHeader("Content-type", "application/json");
                StringEntity se = new StringEntity(obj.toString());
                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                        "application/json"));
                httppost.setEntity(se);

                HttpResponse response = httpclient.execute(httppost);
                InsertTransactionResult = EntityUtils
                        .toString(response.getEntity());

            } catch (ClientProtocolException e) {

            } catch (IOException e) {
            }
            return InsertTransactionResult;
        }

        public String putData(String result, JSONObject obj) {

            // Create a new HttpClient and Put Header

            String UpdateTransactionResult = null;
            HttpClient httpclient = new DefaultHttpClient();
            HttpParams myParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(myParams, 10000);
            HttpConnectionParams.setSoTimeout(myParams, 10000);

            try {

                HttpPut httpPut = new HttpPut(result.toString());
                httpPut.setHeader("Content-type", "application/json");
                StringEntity se = new StringEntity(obj.toString());
                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
                        "application/json"));
                httpPut.setEntity(se);

                HttpResponse response = httpclient.execute(httpPut);
                UpdateTransactionResult = EntityUtils
                        .toString(response.getEntity());

            } catch (ClientProtocolException e) {

            } catch (IOException e) {
            }
            return UpdateTransactionResult;

        }

        public String deleteRecord(String result) {

            // Create a new HttpClient and Get Header

            StringBuilder builder = new StringBuilder();
            HttpClient client = new DefaultHttpClient();
            HttpDelete httpDelete = new HttpDelete(result.toString());

            try {
                HttpParams myParams = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(myParams, 10000);
                HttpConnectionParams.setSoTimeout(myParams, 0);
                HttpResponse response = client.execute(httpDelete);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();

                System.out.println(response.toString());
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(content));
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line);
                    }
                } else {
                    Log.e(LoginActivity.class.toString(), "Failed to Authenticate");
                }

            } catch (ClientProtocolException e) {

            } catch (IOException e) {
                System.out.println(e);
            }
            return builder.toString();
        }

    public String getMethod(String result) {

            // Create a new HttpClient and Get Header

            StringBuilder builder = new StringBuilder();
            HttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(result.toString());

            try {
                HttpParams myParams = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(myParams, 0);
                HttpConnectionParams.setSoTimeout(myParams, 0);
                HttpResponse response = client.execute(httpGet);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();

                System.out.println(response.toString());
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(content));
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line);
                    }
                } else {
                    Log.e(LoginActivity.class.toString(), "Failed to Authenticate");
                }

            } catch (ClientProtocolException e) {
            } catch (IOException e) {
            }
            return builder.toString();
        } 
```

# jquery - 使用 Jquery 追加后复选框无法按预期工作

> ID：10620806
> 
> 赞同：0
> 
> 时间：2012-05-16T14:33:55.617
> 
> 标签：jquery, checkbox, append

我附加了一个复选框：

```
$('#lijst1').append('<tr id="tr' + responseJSON.up_id + '">' +
    '<td><input type="checkbox" name="row_arr[]" value="' + responseJSON.up_id + '" class="checkbox" />' + 
    '<td><a href="#" class="editButton1 ui-icon ui-icon-wrench" id="' + responseJSON.up_id + '" tooltip="" onclick="" ></a></td>' + 
    '</tr>'); 
```

如果我选中复选框并提交表单，则不会发布复选框 ID。此外，如果我使用 javascript 脚本检查所有复选框，则不会选中新添加的复选框。

PS：新添加的复选框放置在表单标签内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:40:00.010

由于自 html5 开始以来的安全问题，如果您使用`.wrap()`表单内容包装表单元素不会提交，请尝试不同的方法，例如：

```
var html = '<tr id="tr' + responseJSON.up_id + '">' +
    '<td><input type="checkbox" name="row_arr[]" value="' + responseJSON.up_id + '" class="checkbox" />' + 
    '<td><a href="#" class="editButton1 ui-icon ui-icon-wrench" id="' + responseJSON.up_id + '" tooltip="" onclick="" ></a></td>' + 
    '</tr>';

$('#lijst1').html( $('#lijst1').html() + html) 
```

# caching - 作为部署的一部分，如何清除 ColdFusion 模板缓存？

> ID：10620808
> 
> 赞同：3
> 
> 时间：2012-05-16T14:34:14.073
> 
> 标签：caching, coldfusion, cfc

今天早上我在将一些文件部署到 ColdFusion 网站/应用程序后遇到了一个问题。

我用一些新代码更新了现有的 CFC。CFC 有一个返回实例化对象的 init() 方法：

**原始 MyObject.cfc：**

```
<cfscript>
    VARIABLES.MyParam = "";
</cfscript>

<cffunction name="init" returntype="MyObject" output="false">
    <cfargument name="MyParam" type="String" required="true" />

    <cfscript>
        VARIABLES.MyParam = ARGUMENTS.MyParam;

        return THIS;
    </cfscript>
</cffunction> 
```

**新的 MyObject.cfc：**

```
<cfscript>
    VARIABLES.MyParam = "";
</cfscript>

<cffunction name="init" returntype="MyObject" output="false">
    <cfargument name="MyParam" type="String" required="true" />

    <cfscript>
        setMyParam(ARGUMENTS.MyParam);

        return THIS;
    </cfscript>
</cffunction>

<cffunction name="setMyParam" output="false" returntype="Void">
    <cfargument name="MyParam" type="String" required="true" />

    <cfset VARIABLES.MyParam = Trim(ARGUMENTS.MyParam) />
</cffunction>

<cffunction name="getMyParam" output="false" returntype="String">
    <cfreturn VARIABLES.MyParam />
</cffunction> 
```

每当扩展此 CFC 的对象调用 init() 时，它都会引发异常：

> “从 init 函数返回的值不是 MyObject 类型。”

此问题在部署此更改的任何其他环境中均未发生 - 仅在生产中。

唯一修复它的是清除 ColdFusion Administrator 中的模板缓存。

所以，我要么在寻找一种方法来防止这种情况在未来发生，要么在我部署文件时自动清除模板缓存。

仅供参考，我目前使用 Tortoise SVN 部署文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:52:24.893

在您的 init() 中（或更优选地，在另一个重新加载样式的方法中），以编程方式调用 Admin API 的 clearTrustedCache() 方法：

```
<cfscript>

     // Login is always required (if the administrator password 
     // is enabled in the ColdFusion Administrator). 
     // This example uses two lines of code. 

     adminObj = createObject("component","cfide.adminapi.administrator");
     adminObj.login("admin");

     // Instantiate the runtime object. 
     myObj = createObject("component","cfide.adminapi.runtime");

     // clear cache 
     myObj.clearTrustedCache();

     // Stop and restart trusted cache. However, only the clearTrustedCache function needs to be called.
     myObj.setCacheProperty("TrustedCache", 0);
     myObj.setCacheProperty("TrustedCache", 1);
</cfscript> 
```

这个功能早在 CF7 ( [Source](http://helpx.adobe.com/coldfusion/kb/coldfusion-mx-7-using-administrator.html) ) 就已经存在。请注意，您需要为此提供 CF 管理员密码。

如果您在管理员中启用了该选项，我还建议您清除组件缓存：

```
 myObj.clearComponentCache(); 
```

# python - 获取 ValueError: int() 的无效文字，基数为 10: '' 错误，不知道为什么

> ID：10620809
> 
> 赞同：3
> 
> 时间：2012-05-16T14:34:14.493
> 
> 标签：python, ajax, django, django-views

我知道以前有人问过这个问题，但就我的情况而言，我似乎无法弄清楚为什么会抛出这个问题

当我尝试运行我的计算时，我的控制台给出了这个错误：

`ValueError: invalid literal for int() with base 10: ''`

它说它来自

```
File "/var/sites/live_mbpathways/moneybroker/apps/investments/ajax.py", line 30, in calc_cdic
    investments = Investment.objects.all().filter(plan = plan, financial_institution=fiid, maturity_date__gte = now).order_by('maturity_date').exclude(id=investment_id) 
```

有谁知道为什么会发生这种情况？

这是我的 ajax.py 代码所在的位置：

```
@login_required
@moneybroker_auth
@csrf_exempt
def calc_cdic(request, plan, investment_id=None, *args, **kwargs):
    from investments.models import Investment
    from financial_institutions.models import FinancialInstitution
    from profiles.models import Profile
    from plans.models import Plan
    from datetime import datetime
    now = datetime.now()
    json = {}
    data = request.POST

    if request.is_ajax():
        total = 0
        fiid = data.get('financial_institution')
        amt = data.get('amount') or 0
        pay_amt = data.get('pay_amount') or 0
        mat_amt = data.get('maturity_amount') or 0
        investments = Investment.objects.all().filter(plan = plan, financial_institution=fiid, maturity_date__gte = now).order_by('maturity_date').exclude(id=investment_id)
        for i in investments:
            total += i.maturity_amount
        print total
        json['total'] = float(str(total))
        json['amt'] = float(str(amt))
        json['pay_amt'] = float(str(pay_amt))
        json['mat_amount'] = float(str(mat_amt))
        json['fiid'] = fiid
        print json

    return HttpResponse(simplejson.dumps(json), mimetype='application/json') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T23:17:21.157

int() 函数抛出异常，因为您试图转换不是数字的东西。

我建议您可以考虑使用调试打印语句来找出最初的plan 和fiid 是什么以及它们是如何变化的。

您可以做的另一件事是使用 try/catch 包装对 int() 的调用

```
val='a'
try:
    int_val = int(val)
except ValueError:
    print("Failure w/ value " + val) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:38:09.467

在该调用链中的某处，您传递了一个空字符串，然后代码试图将其转换为整数。记录您当时的输入以跟踪它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:50:48.713

建议您查看 and 的值`plan`，`fiid`因为`plan`or`fiid`没有设置为您认为的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T14:44:50.447

对我来说，我必须删除迁移文件夹并按照[此链接](https://stackoverflow.com/questions/29888046/django-1-8-create-initial-migrations-for-existing-schema)中最佳答案中的步骤操作，然后重新运行迁移，然后错误消失并且它起作用了。

# java - 使用休眠连接表时出错

> ID：10620810
> 
> 赞同：0
> 
> 时间：2012-05-16T14:34:16.067
> 
> 标签：java, hibernate, persistence

我正在尝试使用休眠加入多个表，但它对我不起作用，有人可以帮助我。我尝试了不起作用的标准然后想到使用查询即使不起作用我的代码看起来像

```
 final Session session = getSession();
 String query = "SELECT r.REFERRER_ID from REFERRAL_PAYMENT_INFO r, SIGNUP_REFERRAL s";
 Query q = session.createQuery(query);
 List list = q.list(); 
```

我收到此错误 -

```
"Caused by: org.hibernate.hql.ast.QuerySyntaxException: 
 REFERRAL_PAYMENT_INFO is not mapped [SELECT r.REFERRER_ID from REFERRAL_PAYMENT_INFO 
 r, SIGNUP_REFERRAL s]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:42:40.203

您必须使用您在 HQL 查询中映射的类（实体）。如果要使用普通 SQL，则必须调用 session.createSQLQuery()。

查看休眠会话的文档：

[http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)

# android - 检测步行距离

> ID：10620811
> 
> 赞同：1
> 
> 时间：2012-05-16T14:34:16.377
> 
> 标签：android, distance, android-sensors

我正在考虑开发一个应用程序来查找用户步行的距离。首先，我尝试通过 GPS 定位来实现它，但是使用传感器有什么不同的想法吗？

基本上我的应用是；用户单击开始按钮，步行开始用户单击停止按钮，步行结束，应用程序说你已经走了 bla 米。

我想在没有位置（纬度或经度）的情况下实现它

还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T22:12:51.857

也许这可以帮助你

*   [http://code.google.com/p/pedometer/](http://code.google.com/p/pedometer/)
*   [https://github.com/bagilevi/android-计步器](https://github.com/bagilevi/android-pedometer)

此应用程序计数步骤，计算约。基于用户步长的距离和速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:38:06.377

您唯一的其他选择是连接加速度计并找出“步骤”的样子。然后你需要提示用户他们的步幅有多长，他们有多“有弹性”等等......

这并不容易 - 根据手机的握持方式，一步看起来会有所不同：用皮带固定器绑在用户的腰部，握在手中，在钱包中弹跳，等等......一个脚步轻快的人不会像真正猛踩脚的人那样在传感器上产生明显的“碰撞”，等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:39:27.100

据我所知，唯一的方法是使用位置（GPS 或基于网络）。

我可以想到一个（愚蠢的）想法：
如果设备有陀螺仪，您可以将手机滚过地面，再加上设备的直径，您可以计算距离；）

但是您最好的选择仍然是使用位置。

# c# - 反射：使用动态方法设置大量对象的属性

> ID：10620816
> 
> 赞同：0
> 
> 时间：2012-05-16T14:34:37.593
> 
> 标签：c#, reflection

所以我有数千个通用类型 T 的对象，我想将它们转换为我得到的对象数组。所以我必须获取属性列表 T，并为每个属性将值设置为数组上的相应对象

```
for (int i = 0; reader.Read(); i++)
{
    T tmp = (T)Activator.CreateInstance(typeof(T));
    foreach (var prop in properties)
    {         
        prop.SetValue(tmp, reader.GetValue(reader.GetOrdinal(prop.Name)), null);
    }
} 
```

reader 是一个 DataReader。我遇到的问题是*prop.SetValue*非常慢（消耗了总执行时间的 50%），[我被告知](https://stackoverflow.com/questions/10611551/reflection-set-a-property-of-a-generic-object-using-delegates)要使用动态方法或表达式树，我尝试使用表达式树，但据我所知，我必须为我要设置的每个值生成一棵树，这不是很好。所以动态方法是另一种选择。理想情况下，我需要创建一个方法*SetProp(object, propertyName, value)*，我可以一遍又一遍地重用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T14:39:37.943

看看[FastMember](http://code.google.com/p/fast-member/)；要么“按原样”使用它，要么窃取所有代码（`DynamicMethod`等）。它通过内置反射缓存等来完成所有这些工作。示例用法：

```
var accessor = TypeAccessor.Create(typeof(T)); 
for (int i = 0; reader.Read(); i++)
{
    T tmp = (T)Activator.CreateInstance(typeof(T));
    foreach (var prop in properties)
    {         
        accessor[tmp, propName] = newValue; // fill in name/value here
    }
} 
```

或者 - 使用类似 dapper-dot-net 的东西，它可以做到这一点*并*处理所有的物化（因为这显然是数据访问代码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:39:06.373

> 我尝试使用表达式树，但据我了解，我必须为要设置的每个值生成一棵树，这不是很好。

为什么不？您基本上可以`List<Tuple<string, Action<object>>>`通过为`T`. 然后您遍历列表并获取每个属性的项目，然后调用相应的操作。

我在[MiscUtil](http://pobox.com/~skeet/csharp/miscutil)`PropertyCopy`有一门课，它做的事情非常相似——你可能想看看它以获得灵感。

或者，从 .NET 4 开始，您可以构建一个执行*所有*属性设置的`Block`表达式树。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:38:08.890

您可以为每个属性创建一个表达式树。
只需将值作为参数：

```
var instance = Expression.Parameter(typeof(T));
var value = Expression.Parameter(typeof(object));
var setter = Expression.Lambda(
    Expression.SetProperty(instance, Expression.Cast(value, prop.PropertyType)),
    instance, value
); 
```

您将为每个实例类型创建和编译一次这些表达式树（通常在[静态泛型类](https://stackoverflow.com/q/686630/34397)中）。

当您使用它时，您可能可以通过编译另一个表达式树而不是`Activator.CreateInstance()`.*

# recursion - 在目录中的每个文件上递归运行脚本并将每个输出通过管道传输到新文件

> ID：10620820
> 
> 赞同：2
> 
> 时间：2012-05-16T14:34:52.260
> 
> 标签：recursion, find, markdown

我正在尝试使用本机脚本将（及以下）中的每个`.markdown`文件转换为 html。但是，将 html 打印为粗壮，这意味着要转换为，我需要运行：。`~/notes/``Markdown.pl --html4tags``Markdown.pl``test.markdown``test.html``Markdown.pl --html4tags test.markdown > test.html`

我一直在弄清楚如何将管道合并到递归`find -exec`或`find ... | xargs`函数中。我想出的最好的是：

```
for i in `find ~/notes/ -type f -name "*.markdown"` ; do
  Markdown.pl --html4tags $i > ${i}.html ;
done 
```

它成功地将每个`.markdown`文件转换为 html，但当然它看起来像`test.markdown.html`而不是`test.html`.

所以基本上，我需要做一些类似转换`${i}.markdown`成的事情`${i}.html`，但我不知道如何在函数中对其进行编码。谢谢你的帮助。

**编辑：**我想出了一种方法来修复上述脚本，使用`basename`（我刚刚发现）：

```
for i in `find ~/notes/ -type f -name "*.markdown"` ; do
  Markdown.pl --html4tags $i > `basename $i .markdown`.html ;
done 
```

这基本上将每个`.markdown`文件转换为 html，同时还剥离`.markdown`扩展名，然后添加`.html`扩展名。

我很想知道是否有更好的方法来做到这一点，例如，使用`find -exec`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:34:55.577

繁荣！

```
find ~/notes/ -name '*.markdown' | while read line
do
    Markdown.pl --html4tags $line > ${line/.markdown/.html}
done 
```

# javascript - 将ajax数据放入html并显示在页面上的最佳方法

> ID：10620822
> 
> 赞同：0
> 
> 时间：2012-05-16T14:35:01.803
> 
> 标签：javascript, jquery, json

我正在通过 jquery/ajax/php get 加载相当多的 json 数据。当我获得数据时，我会在弹出的模式上的一些表格中显示它。我这样做有点像这样。

```
str1  = "<table class='line_item_order_info_table'>";
str1 += "<tr><td class='line_item_label' >";
str1 += "Order no.";
str1 += "</td></tr>";
str1 += "<tr><td class='line_item_data' id='order_number_td'>";
str1 += data.order_number;
str1 += "</td></tr>";
str1 += "</table>";

str1 += "</td>";
str1 += "<td>";

str1 += "<table class='line_item_order_info_table'>";
str1 += "<tr><td class='line_item_label'>";
str1 += "Order date";
str1 += "</td></tr>";
str1 += "<tr><td class='line_item_data'>";
str1 += data.order_date;
str1 += "</td></tr>";
str1 += "</table>";

//many, many more lines that look like this

$('#modal-div').html(str1); 
```

这是通过 javascript 将此数据放入 html 的最佳方式吗？像这样跟踪有点困难。这么多的 html，在任何地方都没有任何缩进以使其更易于阅读，看起来或试图在其中找到一些东西有点痛苦。

如果您能指出更好的策略方向，不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:43:28.897

如果您绝对必须按照您的描述写出您的 HTML，您可以在每行之后向您的标记添加换行符。

```
var myHTML = '<div class="bleh"> \
     <ul class="bleh2"> \
         <li>'+ data.order_number +'</li> \
         <li>'+ data.order_date +'</li> \
     </ul> \
  </div>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:57:01.907

如果从服务器代码（而不是 HTML 字符串）传递对象数组，则可以使用 JavaScript 循环遍历数组，获取数组中对象的每个属性。

在每次迭代`$.append`中，将 html 放入您的`#modal-div`.

类似这样的东西：

```
for (int i = 0: i<msg.d.length; i++) {

    var order_number = msg.d[i].order_number;
    ...

    $('#modal-div').append('<li>'+order_number +'</li>');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T15:17:48.703

您可以在 HTML 中将 #modal-div 标记为具有特定 id 的模板，并在显示模态窗口之前替换为实际数据。

[例子](http://jsbin.com/ibamas/4/edit#source)

```
<div id="modal-div">
<table class='line_item_order_info_table'>
  <tr>
    <td class='line_item_label' >Order Number</td>
    <td id="order_num">order_num</td>
  </tr>
  <tr>
    <td class='line_item_label'>Order date</td>
    <td id="order_date">order_date</td>
  </tr>
</table>
</div>

$(document).ready(function(){
  var data ={"ordernumber":"123", "orderdate":"12/01/1999"};
  $('#modal-div').hide();
  $('#submit').click(function(){
    $('#order_num').html(data.ordernumber);
    $('#order_date').html(data.orderdate);
    $('#modal-div').show();
  });
}); 
```

# codeigniter - Codeigniter 链接问题

> ID：10620826
> 
> 赞同：0
> 
> 时间：2012-05-16T14:35:15.130
> 
> 标签：codeigniter

大家好，首先对愚蠢的问题感到抱歉。

我正在使用 codeigniter 制作一个小型工作板，但遇到了问题。

在主页上，它列出了工作，当我单击它们时，它会重定向到包含有关工作信息的详细信息页面。

我的问题是我做了一个类别过滤器，他们可以通过单击一个类别来浏览工作，并且在该页面上，当我单击详细信息的链接时，它给了我这个 url：**localhost/jobboard/lists/category/lists/details/**这个**localhost/jobboard/lists/details/test-job** **<** --这是正确的。

```
<li>
        <a href="<?php base_url(); ?>lists/details/<?php echo $res->job_link ?>">
            <span><?php echo $res->job_title ?></span>
            <p><?php echo $job_type ?> | <?php echo $res->job_location ?> | <?php echo $res->company_name ?></p>
        </a>
    </li> 
```

上面的代码不应该显示这个： * *localhost/jobboard/lists/category/lists/details/test-job* 可以请人给我一个提示吗？因为我尝试了一些东西，但我完全不知道

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:58:49.677

该死的我明白了，我忘了回显基本网址....

# php - 使用可变数据长度初始化 zend 表单

> ID：10620827
> 
> 赞同：1
> 
> 时间：2012-05-16T14:35:18.327
> 
> 标签：php, zend-framework, zend-form

我大部分时间都在谷歌上搜索，试图找到答案，但我终于承认失败了。

我正在处理 Zend Framework 中的一个表单，该表单需要能够处理可变数据长度。我有一个包含一些通用字段的表单，这些字段指定了一些很容易处理的通用参数（项目名称、语言等），但我还有一个名为 parameters 的子表单，它包含可变数量的键/值巢穴让您将泛型参数添加到数据中。示范表格如下：

```
<form>
    <input type="text" name="item_name" />
    <input type="text" name="item_lang" />
    <!-- etc -->
    <input type="text" name="parameters[1][key]" />
    <input type="text" name="parameters[1][value]" />
    <input type="text" name="parameters[2][key]" />
    <input type="text" name="parameters[2][value]" />
    <input type="text" name="parameters[3][key]" />
    <input type="text" name="parameters[3][value]" />
    <input type="text" name="parameters[4][key]" />
    <input type="text" name="parameters[4][value]" />
    <!-- and so on -->
</form> 
```

注意：以上是对实际形式的大量简化。它也是手动构建的，而不是由 zend_form 生成的。

参数的数量可以不同，并且可以使用 javascript 在客户端进行处理，但是当我从预先存在的数据中填充表单以进行更新时，我真的很难初始化表单。

我可能每个项目存储 2 个参数，我可能有 20 个，我可能根本没有。所以我需要表单有 2 个或 20 个或没有参数输入，具体取决于数据的初始状态。不幸的是，数据在 init () 中不可用，因为在您调用 setDefaults () 之前它不在表单中。

这意味着我不能对表单的初始状态执行 foreach() 来为现有数据生成适当数量的输入框。

我确定我一定遗漏了一些明显的东西，但是 Zend 文档非常可怕，我找不到这个用例的任何示例。在 zend_form 中不支持它肯定不会那么罕见。如何在允许表单的初始状态可变的状态下生成表单？

ETA：我表单上的 init() 方法看起来像这样（简化以匹配示例）：

```
public function init ()
{
    parent::init ();

    $this -> addElement ('text', 'item_name');
    $this -> addElement ('text', 'item_lang');
    $this -> addSubForm (new Zend_Form_SubForm (), 'parameters');

    foreach ($phantom_data as $key => $val)
    {
        $params = new Zend_Form_SubForm ();
        $params -> addElement ('text', 'key');
        $params -> addElement ('text', 'value');
        $this -> parameters -> addSubForm ($params, $key);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:07:00.590

您可以使数据可用以形成

```
My_Form extends Zend_Form 
{

protected $_myCustomData; 

public function __construct($options = null,$myCustomData)
{
   $this->_myCustomData = $myCustomData;
    parent::__construct($options);  //Its important you call parent after above line or init will get call before initilizing customData
}

public function init()
{
  $this->_myCustomData ; //here you are free to use your custom data 

}

} 
```

# jsf - 使用 Tomahawk 提交 jsf 上传请求时 UploadedFile 为空

> ID：10620828
> 
> 赞同：1
> 
> 时间：2012-05-16T14:35:19.433
> 
> 标签：jsf, upload, tomahawk

尝试使用 Tomahawk2.0 1.1.11 在 facelets 页面上上传文件。但是我得到一个空指针异常，我在调试器中看到，uploadFile 变量没有在 bean 中设置。任何想法为什么没有设置bean？t:inputFileUpload 组件按我预期的方式呈现和运行。

页：

```
<h:form enctype="multipart/form-data">
<t:inputFileUpload value="#{Bean.uploadedFile}" />
<h:commandButton type="submit" id="Submit" value="Submit" action="#{Bean.submit}"/>
<h:messages />  
</h:form> 
```

豆：

```
protected UploadedFile uploadedFile;
public UploadedFile getUploadedFile() { return this.uploadedFile; }
public void setUploadedFile(UploadedFile uploadedFile) {
this.uploadedFile = uploadedFile;}

public String submit()  throws IOException { 
String fileName = FilenameUtils.getName(uploadedFile.getName()); // exception here!!
String contentType = uploadedFile.getContentType();
byte[] bytes = uploadedFile.getBytes();
FacesContext.getCurrentInstance().addMessage(null, 
new FacesMessage(String.format("File '%s' of type '%s' successfully uploaded!", 
fileName, contentType)));

return "success";     
} 
```

异常发生在提交的第一行。在调试器中，我看到uploadedFile 为空。jsf 页面看起来不错，我可以使用浏览按钮选择文件。在我按下提交后，我看到 bean 中的上传文件为空。

错误信息：

```
16:06:59,699 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/Framework].[Faces Servlet]] (http--127.0.0.1-8080-2) Servlet.service() for servlet Faces Servlet threw exception: java.lang.NullPointerException
    at net.gui.bean.Bean.submit(Bean.java:118) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [:1.6.0_30]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [:1.6.0_30]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_30]
    at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_30]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:196) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.0.Beta1.jar:2.0.0.Beta1]
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
    at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.0.Beta1.jar:2.0.0.Beta1]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.0.Beta1.jar:2.0.0.Beta1]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.0.Beta1.jar:2.0.0.Beta1]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.3-b02-jbossorg-2.jar:2.1.3-SNAPSHOT]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.0.Beta1.jar:2.0.0.Beta1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.1.Final.jar:7.0.2.Final] 
    at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357) [tomahawk20-1.1.11.jar:] 
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.1.Final.jar:7.0.2.Final] 
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at net.gui.filter.HibernateSessionRequestFilter.doFilter(HibernateSessionRequestFilter.java:34) [classes:] 
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.1.Final.jar:7.0.2.Final] 
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at net.gui.filter.NAISAuthFilter.doFilter(NAISAuthFilter.java:59) [classes:] 
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.1.Final.jar:7.0.2.Final] 
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:139) [jboss-as-web-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.as.web.NamingValve.invoke(NamingValve.java:57) [jboss-as-web-7.0.2.Final.jar:7.0.2.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:154) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:667) [jbossweb-7.0.1.Final.jar:7.0.2.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:952) [jbossweb-7.0.1.Final.jar:7.0.2.Final] 
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_30] 
```

网页.xml：

```
<filter>
<filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>    

<filter>
    <filter-name>NaisAuth</filter-name>
    <filter-class>net.gui.filter.NAISAuthFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>NaisAuth</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
<filter-name>HibernateFilter</filter-name>
<filter-class> net.gui.filter.HibernateSessionRequestFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>HibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:21:28.773

当通过 , 等预先访问请求主体时，可能会发生这种情况`NAISAuthFilter`。`HibernateSessionRequestFilter`这样`getParameter()`，请求主体在有机会执行`getReader()`之前已经被解析。`ExtensionsFilter`

要么修复这些过滤器，要么重新排列要在这些过滤器*之前*声明的`ExtensionsFilter`in的映射。`web.xml`

 *另一个可能的原因是您实际上是`<h:form>`在相互嵌套多个组件。这将导致非法的 HTML 语法，并且浏览器行为未指定处理表单提交。您需要确保您没有嵌套表单（但是并行的多个表单是完全有效的）。*

# asp.net - 为存储过程填充文本框的 DropDownList 子字符串

> ID：10620834
> 
> 赞同：0
> 
> 时间：2012-05-16T14:35:44.997
> 
> 标签：asp.net, sql, vb.net, drop-down-menu

我的 Asp.net 页面有多个文本框和 DropDownLists，它们从 Gridview 中的选择中填充。我的问题是多方面的，我在 gridview 中有一个 keyfield，它是一个 uniqueidentifier，用于从我的数据库中插入、更新和删除记录。我不希望看到这个专栏，我使用了一个 css

```
.hideCol
{
    display: none;
} 
```

但它不起作用，我也尝试设置 Visible = "False" 并且它不会填充文本框。我需要找出如何隐藏该列，以便用户看不到它。

我的新问题是我的 DropDownLists 包含来自一个表的 sql 查询并连接多个列。

```
SELECT [Column1] + ' | ' + [Column2] 
FROM [Table1] 
ORDER BY [Column2] 
```

所以我的结果看起来是 DropDown：

```
123456 | Name 
```

当我尝试从我的 gridview 的选定行中填充我的 DropDownLists 和文本框时，我在 DropDownList 上收到错误，因为它未被识别为值。123456 是数据库中的什么我需要它根据这些数字填充但以上面的格式显示？这有意义吗？有什么建议么？

更新： AllowPaging="True" CellPadding="4" CssClass="td3" ForeColor="#333333">

# sharepoint - 格式化查找列以显示名称 (FileLeafRef)

> ID：10620835
> 
> 赞同：0
> 
> 时间：2012-05-16T14:35:47.423
> 
> 标签：sharepoint, sharepoint-2010, lookup

我创建了一个自定义发布页面布局。页面布局后面的内容类型有一个查找列，指向我存储图像的文档库。基本上，我从布局创建的页面是“文章”，每个页面都有一个关联的图像。

您现在可能已经猜到了，我想在页面上显示查找图像。但是，我一生都无法弄清楚如何做到这一点。我一直在通过控件将列插入页面布局，但我不确定如何格式化它以查看查找列后面的源文档。我想知道是否可以通过控件以某种方式实现，如果不是这样，是否可以通过修改 webpart 的 XSL 来完成。我不想使用但我知道它会起作用的最后一个选项是工作流（在创建新项目时，将名称（FileLeafRef）复制到我可以使用的隐藏单行文本字段中）。

有谁知道如何格式化查找列以显示名称（FileLeafRef）？

非常感谢您的帮助！

-乔什

# php - 列出 SlidesJS 目录中的图像文件，以制作成 Wordpress 网站上的滑块。

> ID：10620838
> 
> 赞同：0
> 
> 时间：2012-05-16T14:35:59.513
> 
> 标签：php, wordpress, image

所以，我已经正确设置了 Slides JS，但我想创建一个 PHP 代码来列出目录中的文件，如果可能的话，先修改日期。

这是我到目前为止的代码：

```
<div id="slides">
<div class="slides_container">
<?php
$directory = "/wp-content/themes/1/img/";

$images = glob("" . $directory . "*.jpg");

$imgs = '';

foreach($images as $image){ $imgs[] = "$image"; }

foreach ($imgs as $img) {

    echo "<div>
            <img src='$img' />
          </div> ";
}
?>  
</div>
</div> 
```

根据我的理解，应该将目录中的 .jpg 图像列为：

```
<div>
  <img src="image_src_here.jpg" />
</div> 
```

但它没有列出任何内容 - 我需要将其作为函数添加到 wordpress 吗？

其次，如何按修改日期列出图像，这可能吗？

网址：msc-media.co.uk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:05:58.393

您没有设置有效的文件路径，并且您的第二个循环是不必要的。做这样的事情：

```
<?php
$directory = ABSPATH."wp-content/themes/1/img/";
$images = glob($directory."*.jpg");
foreach($images as $image)
{
    $src = str_replace(ABSPATH, site_url('/'), $image);
    $imgs[] = $src;
    echo '<div><img src="'.$src.'" /></div>';
}
?> 
```

# objective-c - dealloc 似乎没有释放所有图像内存

> ID：10620839
> 
> 赞同：1
> 
> 时间：2012-05-16T14:35:59.767
> 
> 标签：objective-c, ios, memory, memory-management, allocation

我正在制作的应用程序不断遇到“内存警告”，并最终崩溃。在我创建的自定义视图控制器类上调用 release 时，似乎没有释放内存，其视图已添加为子视图。

这是我的情况的一个例子：

我创建了一个带有 .xib 的视图控制器（添加一种允许用户选择要播放的视频的弹出框/菜单）。屏幕/应用程序右上角的按钮调用一个函数，该函数分配我创建的 videoMenu 类的新实例，然后将其视图添加为子视图。当用户选择视频时，会调用一个函数来隐藏弹出框/菜单的视图，然后释放实例（在显示/播放视频之前）。如果菜单“打开”并且再次按下按钮，我将其设置为像关闭按钮一样（隐藏然后释放菜单）......即它切换菜单。

如果我一直按下按钮，菜单会出现，然后隐藏/释放......一遍又一遍......这是预期的。我注意到虽然在 Instruments->Allocations 中调用 release 时，分配并没有减少。当我打开/关闭/打开/关闭/等时，分配只会不断增加，好像释放实际上并没有释放内存。我在菜单中添加了一个`NSLog`以`dealloc`确保它`dealloc`实际上被调用了。

我注意到，如果我在调用`[videoMenu.view removeFromSuperview]`之前调用`[videoMenu release]`，分配实际上会减少。

是`removeFromSuperview`解决方案吗？有必要吗？

.xib 文件中有很多`UIImageViews`，我也想知道它们是否是分配不断增加的原因（在我上面概述的示例中）......这意味着相同的图像是否只是一遍又一遍地被缓存？

# javascript - Twitter Profile Widget - 在特定的 div 中加载并在页脚中包含 javascript

> ID：10620841
> 
> 赞同：0
> 
> 时间：2012-05-16T14:36:06.647
> 
> 标签：javascript, jquery, dom, twitter

如何在页脚中加载 Twitter Widget 脚本并将 Widget 放置在特定的 div 中？

```
<html>
<body>
<!-- html code for the page -->
<script>   
     /* load Twitter widget into div#twitter-widget */
</script>
</body> 
```

对于那些不熟悉[Twitter Widget](http://twitter.com/about/resources/widgets/widget_profile)的人，它的代码看起来像

```
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 30000,
  width: 250,
  height: 300,
  theme: {
    shell: {
     background: '#333333',
     color: '#ffffff'
   },
tweets: {
  background: '#000000',
  color: '#ffffff',
  links: '#4aed05'
}
  },
  features: {
scrollbar: false,
loop: false,
live: false,
behavior: 'all'
 }
}).render().setUser('twitter').start();
</script>() 
```

可以使用[document.ready() 加载 Twitter 小部件](https://stackoverflow.com/questions/10589564/putting-twitter-widgets-javascript-within-head-tags-but-have-it-rendered-in)，但

1）如果脚本加载到页脚中，我如何定位 div#twitter-widget
2） [有时这会中断](https://stackoverflow.com/questions/6701135/implementing-twitter-profile-widget)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:06:36.367

如果我理解正确，那么您希望在页脚加载后运行小部件并且您实现了正确的链接。

假设您的页脚 id 是“页脚”。做这样的事情：

```
$("#footer").load(function(){
  $(this).append('<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.THE-URL-TO-YOUR-PAGE" data-text="Check out my latest video!">Tweet</a>');

$.getScript("http://platform.twitter.com/widgets.js"); //This can also be put as a script tag above the body.

twttr.widgets.load(); //If you used the getScript above, you don't need this line
}); 
```

我希望这回答了你的问题。

快乐编码！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:29:46.587

尝试将小部件粘贴`<script>js...</script>`到您想要呈现小部件的元素中，它应该就这么简单。

# javascript - Android 4.0 中的 pushState

> ID：10620843
> 
> 赞同：6
> 
> 时间：2012-05-16T14:36:17.197
> 
> 标签：javascript, android, browser-history

当我使用 JSConsole 并键入 window.history 时，它不包含任何 pushState 方法。那么发生了什么？它是否在默认浏览器中的 Android 4.0 中被删除，或者我该如何使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T19:44:23.520

是的，这是一个回归错误，但他们似乎对修复它不太感兴趣：

[http://code.google.com/p/android/issues/detail?id=23979](http://code.google.com/p/android/issues/detail?id=23979)投票给它。

由于大多数制造商通常以一种或另一种方式自定义浏览器，因此他们可能会自己实现它。然而，我从未遇到过任何完全支持历史 API 的 ICS 手机。不能说我一直在寻找。

编辑：据称它已在 4.0.4 中修复，但仅在某种意义上说方法存在并执行您期望它们执行的操作，但 URL 栏未更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T19:29:53.383

Android 2.2 和 2.3 很好地支持 History API，但版本 3 和 4 不支持。目前还没有关于它是否会被放回的消息。

[阅读更多](http://webdesign.about.com/od/historyapi/a/what-is-history-api.htm)

但我认为如果您在 Android 4 中使用 chrome，您可以使用此功能。

# sharepoint - 空共享点 spgridview

> ID：10620845
> 
> 赞同：0
> 
> 时间：2012-05-16T14:36:28.287
> 
> 标签：sharepoint, sharepoint-2010, spgridview

我正在使用 SPGridView 在共享点网站中创建包含自定义数据的列表。

当列表没有数据时，列表标题会隐藏并显示以下消息：

> 此视图中没有要显示的项目。

如果列表中没有项目，我怎样才能显示标题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:43:45.607

`SPGridView`继承自`GridView`，您可以使用`[EmptyDataTemplate](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webcontrols.spgridview_properties)`可以覆盖默认行为并做任何您想做的事情的地方。

# tomcat - 带有 Spring Security 的 Terracotta DSO 为 SessionRegistryImpl.java 抛出 NotSerializableException

> ID：10620846
> 
> 赞同：2
> 
> 时间：2012-05-16T14:36:32.677
> 
> 标签：tomcat, spring-security, cluster-computing, terracotta

我们的应用程序堆栈是在 tomcat 7 中运行的 hibernate/spring/spring security/JSF。

我已经下载并安装了开源 Terracotta 3.6.2。

我们要配置 Terracotta DSO。我们正在使用 spring security SessionRegistryImpl.java 来获取登录用户的会话信息，但是这个类是不可序列化的，因此我们的会话变得不可序列化。

遵循以下文档

[http://terracotta.org/documentation/web-sessions/installation-guide](http://terracotta.org/documentation/web-sessions/installation-guide) [http://terracotta.org/documentation/terracotta-dso/dso-install](http://terracotta.org/documentation/terracotta-dso/dso-install) [http://docs.terracotta.org/confluence/display/docs/配置+指南+和+参考](http://docs.terracotta.org/confluence/display/docs/Configuration+Guide+and+Reference)

我们的应用程序中有以下罐子

```
 <dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache-core</artifactId>
    <version>2.5.2</version>
 </dependency>
 <dependency>
      <groupId>org.terracotta</groupId>
      <artifactId>terracotta-toolkit-1.5-runtime</artifactId>
      <version>4.2.0</version>
 </dependency>
 <dependency>
    <groupId>org.terracotta.session</groupId>
    <artifactId>terracotta-session</artifactId>
    <version>1.2.2</version>
 </dependency> 
```

我有以下 TIM

```
<module name="tim-tomcat-7.0"/>
 <module name="tim-spring-security-2.0" />
 <module name="tim-ehcache-1.7" /> 
```

我不断收到*org.springframework.security.core.session.SessionRegistryImpl 的 java.io.NotSerializableException*

在这种情况下是否可以使用 Terracotta DSO 配置集群？

tc-config.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<tc:tc-config xsi:schemaLocation="http://www.terracotta.org/schema/terracotta-5.xsd"
xmlns:tc="http://www.terracotta.org/config"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <servers>
        <server host="localhost" name="localhost:9510" bind="0.0.0.0"> 
            <dso-port bind="10.7.65.31">9510</dso-port> 
            <jmx-port bind="10.7.65.31">9520</jmx-port>
            <data>C:/Terracotta/terracotta/server-data</data>
            <logs>C:/Terracotta/terracotta/server-logs</logs>
            <index>C:/Terracotta/terracotta/server-index</index>
            <statistics>C:/Terracotta/terracotta/server-statistics</statistics>
            <dso>
                <client-reconnect-window>120</client-reconnect-window>
                <persistence>
                  <mode>temporary-swap-only</mode>
                  <offheap>
                    <enabled>false</enabled>
                    <maxDataSize>5g</maxDataSize>
                  </offheap>
                </persistence>
            </dso>
        </server>
    </servers>

    <clients>
        <logs>C:/Terracotta/terracotta/client-logs/</logs>
        <modules>
            <module name="tim-tomcat-7.0"/>
            <module name="tim-spring-security-2.0" />
            <module name="tim-ehcache-1.7" />           

        </modules>

        <dso>
            <debugging>
                <instrumentation-logging>
                  <class>true</class>
                  <locks>false</locks>
                  <transient-root>true</transient-root>
                  <roots>true</roots>
                  <distributed-methods>false</distributed-methods>
                </instrumentation-logging>

                <runtime-logging>
                  <non-portable-dump>true</non-portable-dump>
                  <lock-debug>true</lock-debug>
                  <wait-notify-debug>false</wait-notify-debug>
                  <distributed-method-debug>false</distributed-method-debug>
                  <new-object-debug>true</new-object-debug>
                  <named-loader-debug>false</named-loader-debug>
                </runtime-logging>

                <runtime-output-options>
                  <auto-lock-details>true</auto-lock-details>
                  <caller>true</caller>
                  <full-stack>false</full-stack>
                </runtime-output-options>

            </debugging>
        </dso>
    </clients>

    <application>
      <dso>
        <instrumented-classes>
            <include>
               <class-expression>org.springframework.*</class-expression>
                <honor-transient>true</honor-transient>
             </include>
             <include>
               <class-expression>org.springframework..*</class-expression>
                <honor-transient>true</honor-transient>
             </include>
             <include>
               <class-expression>org.springframework...*</class-expression>
                <honor-transient>true</honor-transient>
             </include>

        </instrumented-classes>

        <roots>
            <root>
              <field-name>org.springframework.security.core.session.SessionRegistryImpl.principals</field-name>
              <root-name>PRINCIPALS</root-name>
            </root>
            <root>
              <field-name>org.springframework.security.core.session.SessionRegistryImpl.sessionIds</field-name>
              <root-name>SESSIONIDS</root-name>
            </root>
        </roots>

        <locks>

          <autolock auto-synchronized="true">
            <method-expression>* org.springframework.security.core.session.SessionRegistryImpl.re*(..)</method-expression>
          </autolock>   
        </locks>

            <injected-instances>
             <injected-field>
               <field-name>org.springframework.security.core.session.SessionRegistryImpl.principals</field-name>
             </injected-field>
             <injected-field>
               <field-name>org.springframework.security.core.session.SessionRegistryImpl.sessionIds</field-name>
             </injected-field>
            </injected-instances>

        <web-applications>
            <web-application serialization="false">nymphaea</web-application>
        </web-applications>
        <dso-reflection-enabled>false</dso-reflection-enabled>

      </dso>
    </application>

</tc:tc-config> 
```

ehcache.xml

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="ehcache.xsd"
         updateCheck="true" monitoring="autodetect"
         dynamicConfig="true">

    <diskStore path="java.io.tmpdir"/>

    <defaultCache
        maxElementsInMemory="50000"
        eternal="false"
        timeToIdleSeconds="900"
        timeToLiveSeconds="1200"
        >
        <terracotta clustered="true" valueMode="identity"/>

        </defaultCache>

    <cache name="ContentHierarchyNode"
        maxElementsInMemory="500000"
        eternal="false"
        timeToIdleSeconds="900"
        timeToLiveSeconds="21600"        
        />

</ehcache> 
```

# ruby - 使用函数名称的哈希，搜索文件并返回行号

> ID：10620852
> 
> 赞同：0
> 
> 时间：2012-05-16T14:36:50.453
> 
> 标签：ruby, file-io

给定一个包含函数名称的哈希，如“find_by_user”、“find_by_id”、...

我想在文件目录中搜索，并返回一个具有每个文件名的对象，以及函数名出现的行号。

到目前为止我有这个：

```
files = Dir.glob(@folder_path)

files.each do |file_name|
  content = File.read(file_name)

end 
```

这将扫描几百个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:03:31.797

这是您需要的基本功能：

```
# Given a path to a file and a regex,
# return an array of paired filename+line number matches
def matching_lines( file_path, regex )
  name = File.basename(file_path)
  File.readlines(file_path)
    .map.with_index{ |line,i| [name,line,i] }
    .select{ |name,line,i| line =~ regex }
    .map{ |name,line,i| [name,i] }
end 
```

您可以根据需要选择使用它，迭代多个文件和/或模式，或使用`Regexp.union`创建与一组字符串中的任何一个匹配的模式。

* * *

然而：这是[`grep`](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)为了：

```
C:\>grep --line-number Nokogiri *.rb
push_nav_to_docs.rb:13: nav_dom = Nokogiri.XML(IO.read(NAV))
push_nav_to_docs.rb:39:         landing = Nokogiri.XML(html)
push_nav_to_docs.rb:53: doc = Nokogiri.XML(IO.read(doc_path))
push_nav_to_docs.rb:73: if File.exists?(toc_path) && toc = Nokogiri.XML(IO.read(toc_path)).at('ul')
push_nav_to_docs.rb:104:        container << Nokogiri.make("<ul/>").tap do |ul| 
```

在 Ruby 中，您可以调用此代码并通过以下方式获得所需的输出：

```
lookfor = "Nokogiri"
grepped = `grep --line-number #{lookfor} *.rb`
results = grepped.scan(/^(.+?):(\d+)/)
#=> [["push_nav_to_docs.rb", "13"], ["push_nav_to_docs.rb", "39"], ["push_nav_to_docs.rb", "53"], ["push_nav_to_docs.rb", "73"], ["push_nav_to_docs.rb", "104"]] 
```

Grep 还可以递归到目录、仅匹配特定文件名、将正则表达式作为模式等等。

# php - 为什么我收到未定义的变量错误？

> ID：10620853
> 
> 赞同：1
> 
> 时间：2012-05-16T14:36:51.203
> 
> 标签：php

我在 PHP 中有一个类成员，如下所示：

```
function hidden($defaultSort=""){
    $defaultSort = 'a';?>
    <input type="hidden" name="sort" id="<?php print $this->id;?>sort" value='<?php print $defaultSort; ?>' />
    <?php print $defaultSort;
} 
```

当我调用这个函数时，我在 Firefox 中得到以下源

```
<input type="hidden" value="&lt;br /&gt;&lt;b&gt;Notice&lt;/b&gt;:  Undefined variable: defaultSort in &lt;b&gt;/www/sptdev/htdocs/includes/v7/sptSearchBox.php&lt;/b&gt; on line &lt;b&gt;24&lt;/b&gt;&lt;br /&gt;" id="searchFormSearchsort" name="sort"/>a 
```

任何想法为什么我会收到未定义的变量错误？

**更多细节：** 错误来自的第 24 行是隐藏输入的行。

我发现这在 IE8 中按预期工作。

```
<input type="hidden" name="sort" id="searchFormSearchsort" value='a' />a 
```

这对我来说没有多大意义，因为 PHP 是服务器端，这应该与浏览器无关。

**更新**- 问题似乎是我在 Firefox 中突出显示并选择了“查看选择源”。当我只使用“查看页面源代码”时，它看起来不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:51:18.457

你的代码是正确的。可能您在错误的地方观看（也许您正在修改父类和覆盖的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:41:18.983

尝试：

```
function hidden($defaultSort=""){
    $defaultSort = 'a';
    echo '<input type="hidden" name="sort" id="' , $this->id , 'sort" value="' , $defaultSort ,'"/>';
  print $defaultSort;
} 
```

**编辑：** 我刚刚尝试了这段代码，它工作正常。尝试按原样复制粘贴它，看看它是否适合您。

# c# - 如何创建像 winzip 这样的 shell 扩展/文件容器 dll？

> ID：10620854
> 
> 赞同：0
> 
> 时间：2012-05-16T14:36:51.790
> 
> 标签：c#, windows, filesystems, shell-extensions, winzip

好的，所以我需要制作一个类似于 winzip 或 winrar 的文件容器程序或命名空间扩展。

现在我不需要压缩或加密文件或任何特殊的东西。

我需要的是创建一个 dll 可以使用 .xyz 等扩展名（我知道如何将所有这些注册到注册表中，所以这不是问题），当点击时将打开“容器”中的所有文件像winzip这样的窗口。

我目前拥有的是一个程序，可以将所有文件添加到一个带有扩展名的大文件中（如 .xyz）。但是我不知道该怎么做，所以当我单击或打开这个新文件时，它们将在一个窗口中打开（文件系统浏览器？或类似的东西？就像 winzip 一样），这样我就可以查看所有文件在这个“容器”中。

有人可以指出我正确的方向或如何做到这一点，现在我很难过。

我还应该提到我正在使用 c#.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:51:02.860

[http://www.codeproject.com/Articles/8063/The-Mini-Shell-Extension-Framework-Part-I](http://www.codeproject.com/Articles/8063/The-Mini-Shell-Extension-Framework-Part-I)

和

[http://www.codeproject.com/Articles/9421/The-Mini-Shell-extension-Framework-Part-II](http://www.codeproject.com/Articles/9421/The-Mini-Shell-extension-Framework-Part-II)

和

[http://www.codeproject.com/Articles/11674/The-Mini-Shell-Extension-Framework-Part-III](http://www.codeproject.com/Articles/11674/The-Mini-Shell-Extension-Framework-Part-III)

正是你想要的，但是在 c++ 中；-) 在 C Sharp 中做 shell exts 是痛苦的。

# vba - 使用 excel vba 将数据从 excel 2010 导出到 Access 表 2010 时运行时错误无法识别的数据库

> ID：10620860
> 
> 赞同：1
> 
> 时间：2012-05-16T14:37:05.743
> 
> 标签：vba, excel, excel-2010, ms-access-2010

我在 Access 2010 db 中有一个表，其列名与 excel 表中的列名相同。在将数据从宏启用的 excel 2010 表中泵入其中之前，我必须删除 Access 表数据内容。现在我正在尝试查看/测试是否可以将我的 excel 数据泵入 Access 中的空表。一旦我得到这个工作，我可以得到'在转储excel数据之前删除内容'的工作。

这是我的 excel vba 宏代码：

```
Sub ADOFromExcelToAccess()
'exports data from the active worksheet to a table in an Access database
Dim cn As ADODB.Connection, rs As ADODB.Recordset, r As Long
' connect to the Access database
Set cn = New ADODB.Connection
cn.Open "Provider=Microsoft.Jet.OLEDB.4.0; " & _
    "Data Source=C:\Users\shress2\Documents\TSS_Certification\TSS_Certification.accdb;"
' open a recordset
Set rs = New ADODB.Recordset
rs.Open "t_certification_051512", cn, adOpenKeyset, adLockOptimistic, adCmdTable
' all records in a table
r = 2 ' the start row in the worksheet
Do While Len(Range("A" & r).Formula) > 0
' repeat until first empty cell in column A
    With rs
        .AddNew ' create a new record
        ' add values to each field in the record
        .Fields("Role") = Range("A" & r).Value
        .Fields("Geo Rank") = Range("B" & r).Value
        .Fields("Geo") = Range("C" & r).Value
        ' add more fields if necessary...
        .Update ' stores the new record
    End With
    r = r + 1 ' next row
Loop
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing 
```

结束子

我添加了 Tools--> References 并选择了 Microsoft ActiveX Data Objects 6.0 Object Library。

我收到运行时错误'-2147467259(80004005)'：无法识别的数据库格式'C:\Users\shress2\Documents\TSS_Certification\TSS_Certification.accdb

有什么理由吗？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T16:13:25.600

您正在连接到 .accdb 数据库文件。它是 Access 2007/2010 格式。
该`Microsoft.Jet.OLEDB.4.0`提供程序是为 Access 2003 时代的 mdb 文件构建的。
我认为您无法与该提供商联系（它无法识别文件格式）。

尝试更改要使用的连接字符串

`Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\shress2\Documents\TSS_Certification\TSS_Certification.accdb;"`

# r - 在绘制世界地图时使用与本初子午线不同的中心

> ID：10620862
> 
> 赞同：32
> 
> 时间：2012-05-16T14:37:19.090
> 
> 标签：r, ggplot2

我将`maps`包中的世界地图覆盖到`ggplot2`光栅几何上。但是，此栅格不是以本初子午线（0 度）为中心，而是以 180 度（大致白令海和太平洋）为中心。以下代码获取地图并将地图以 180 度居中：

```
require(maps)
world_map = data.frame(map(plot=FALSE)[c("x","y")])
names(world_map) = c("lon","lat")
world_map = within(world_map, {
  lon = ifelse(lon < 0, lon + 360, lon)
})
ggplot(aes(x = lon, y = lat), data = world_map) + geom_path() 
```

产生以下输出：

![在此处输入图像描述](../Images/9f48f1352d860eeac7003523a2e175ae.png)

很明显，在位于本初子午线一端或另一端的多边形之间绘制了线。我目前的解决方案是用 NA 替换接近本初子午线的点，将`within`上面的调用替换为：

```
world_map = within(world_map, {
  lon = ifelse(lon < 0, lon + 360, lon)
  lon = ifelse((lon < 1) | (lon > 359), NA, lon)
})
ggplot(aes(x = lon, y = lat), data = world_map) + geom_path() 
```

这会导致正确的图像。我现在有几个问题：

1.  必须有更好的方法将地图集中在另一个子午线上。我尝试使用`orientation`in 参数`map`，但将其设置为`orientation = c(0,180,0)`并没有产生正确的结果，实际上它并没有改变结果对象（`all.equal`yielded `TRUE`）的任何内容。
2.  在不删除一些多边形的情况下应该可以摆脱水平条纹。可能是解决点 1\. 也解决了这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-17T02:52:10.367

这可能有点棘手，但您可以通过以下方式完成：

```
mp1 <- fortify(map(fill=TRUE, plot=FALSE))
mp2 <- mp1
mp2$long <- mp2$long + 360
mp2$group <- mp2$group + max(mp2$group) + 1
mp <- rbind(mp1, mp2)
ggplot(aes(x = long, y = lat, group = group), data = mp) + 
  geom_path() + 
  scale_x_continuous(limits = c(0, 360)) 
```

![在此处输入图像描述](../Images/34c05f3c5621164ad17f790acad10521.png)

通过此设置，您可以轻松设置中心（即限制）：

```
ggplot(aes(x = long, y = lat, group = group), data = mp) + 
  geom_path() + 
  scale_x_continuous(limits = c(-100, 260)) 
```

![在此处输入图像描述](../Images/3fdbfd4167909f76bd3d8b919bc02e5d.png)

**更新**

这里我做一些解释：

整个数据看起来像：

```
ggplot(aes(x = long, y = lat, group = group), data = mp) + geom_path() 
```

![在此处输入图像描述](../Images/862acd6824172d58b57fbcf4a4caae57.png)

但是通过`scale_x_continuous(limits = c(0, 360))`，您可以*裁剪*从 0 到 360 经度的区域子集。

而在 中`geom_path`，同一组的数据是相连的。所以如果`mp2$group <- mp2$group + max(mp2$group) + 1`不存在，它看起来像： ![在此处输入图像描述](../Images/1994ada6fd32bb99b749cb1d60077d7a.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-25T06:58:13.043

这是一种不同的方法。它的工作原理是：

1.  将`maps`包中的世界地图转换为`SpatialLines`具有地理（经纬度）CRS 的对象。
2.  将地图投影`SpatialLines`到以本初子午线为中心的 Plate Carée（又名等距圆柱）投影。（此投影与地理测绘非常相似）。
3.  切割成两个部分，否则会被地图的左右边缘剪裁。（这是使用`rgeos`包中的拓扑函数完成的。）
4.  重新投影到以所需子午线为中心的 Plate Carée 投影（`lon_0`术语取自包中`PROJ_4`使用`spTransform()`的`rgdal`程序）。
5.  识别（并消除）任何剩余的“条纹”。我通过搜索跨越三个广泛分开的子午线中的两个的线来自动执行此操作。（这也使用`rgeos`包中的拓扑函数。）

这显然需要做很多工作，但留下的地图会被最小化截断，并且可以使用`spTransform()`. 为了在光栅图像上叠加这些`base`或`lattice`图形，我首先重新投影光栅，也使用`spTransform()`. 如果您需要它们，同样可以投影网格线和标签以匹配`SpatialLines`地图。

* * *

```
library(sp)
library(maps)
library(maptools)   ## map2SpatialLines(), pruneMap()
library(rgdal)      ## CRS(), spTransform()
library(rgeos)      ## readWKT(), gIntersects(), gBuffer(), gDifference() 

## Convert a "maps" map to a "SpatialLines" map
makeSLmap <- function() {
    llCRS <- CRS("+proj=longlat +ellps=WGS84")
    wrld <- map("world", interior = FALSE, plot=FALSE,
            xlim = c(-179, 179), ylim = c(-89, 89))
    wrld_p <- pruneMap(wrld, xlim = c(-179, 179))
    map2SpatialLines(wrld_p, proj4string = llCRS)
}

## Clip SpatialLines neatly along the antipodal meridian
sliceAtAntipodes <- function(SLmap, lon_0) {
    ## Preliminaries
    long_180 <- (lon_0 %% 360) - 180
    llCRS  <- CRS("+proj=longlat +ellps=WGS84")  ## CRS of 'maps' objects
    eqcCRS <- CRS("+proj=eqc")
    ## Reproject the map into Equidistant Cylindrical/Plate Caree projection 
    SLmap <- spTransform(SLmap, eqcCRS)
    ## Make a narrow SpatialPolygon along the meridian opposite lon_0
    L  <- Lines(Line(cbind(long_180, c(-89, 89))), ID="cutter")
    SL <- SpatialLines(list(L), proj4string = llCRS)
    SP <- gBuffer(spTransform(SL, eqcCRS), 10, byid = TRUE)
    ## Use it to clip any SpatialLines segments that it crosses
    ii <- which(gIntersects(SLmap, SP, byid=TRUE))
    # Replace offending lines with split versions
    # (but skip when there are no intersections (as, e.g., when lon_0 = 0))
    if(length(ii)) { 
        SPii <- gDifference(SLmap[ii], SP, byid=TRUE)
        SLmap <- rbind(SLmap[-ii], SPii)  
    }
    return(SLmap)
}

## re-center, and clean up remaining streaks
recenterAndClean <- function(SLmap, lon_0) {
    llCRS <- CRS("+proj=longlat +ellps=WGS84")  ## map package's CRS
    newCRS <- CRS(paste("+proj=eqc +lon_0=", lon_0, sep=""))
    ## Recenter 
    SLmap <- spTransform(SLmap, newCRS)
    ## identify remaining 'scratch-lines' by searching for lines that
    ## cross 2 of 3 lines of longitude, spaced 120 degrees apart
    v1 <-spTransform(readWKT("LINESTRING(-62 -89, -62 89)", p4s=llCRS), newCRS)
    v2 <-spTransform(readWKT("LINESTRING(58 -89, 58 89)",   p4s=llCRS), newCRS)
    v3 <-spTransform(readWKT("LINESTRING(178 -89, 178 89)", p4s=llCRS), newCRS)
    ii <- which((gIntersects(v1, SLmap, byid=TRUE) +
                 gIntersects(v2, SLmap, byid=TRUE) +
                 gIntersects(v3, SLmap, byid=TRUE)) >= 2)
    SLmap[-ii]
}

## Put it all together:
Recenter <- function(lon_0 = -100, grid=FALSE, ...) {                        
    SLmap <- makeSLmap()
    SLmap2 <- sliceAtAntipodes(SLmap, lon_0)
    recenterAndClean(SLmap2, lon_0)
}

## Try it out
par(mfrow=c(2,2), mar=rep(1, 4))
plot(Recenter(-90), col="grey40"); box() ## Centered on 90w 
plot(Recenter(0),   col="grey40"); box() ## Centered on prime meridian
plot(Recenter(90),  col="grey40"); box() ## Centered on 90e
plot(Recenter(180), col="grey40"); box() ## Centered on International Date Line 
```

![在此处输入图像描述](../Images/79f1d25375f99699ac367a7754e4b600.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T15:14:02.740

这应该有效：

```
 wm <- map.wrap(map(projection="rectangular", parameter=0, orientation=c(90,0,180), plot=FALSE))
world_map <- data.frame(wm[c("x","y")])
names(world_map) <- c("lon","lat") 
```

map.wrap 切断了穿过地图的线条。它可以通过 map(wrap=TRUE) 的选项使用，但仅在 plot=TRUE 时有效。

剩下的一个烦恼是，在这一点上，纬度/经度的单位是弧度，而不是度数：

```
world_map$lon <- world_map$lon * 180/pi + 180
world_map$lat <- world_map$lat * 180/pi
ggplot(aes(x = lon, y = lat), data = world_map) + geom_path() 
```

# html - 修复以防止 Firefox 突出显示选择选项集

> ID：10620863
> 
> 赞同：2
> 
> 时间：2012-05-16T14:37:22.553
> 
> 标签：html, css, firefox, windows-7

以下是一些非常简单的示例 HTML 用于此问题：

```
<!DOCTYPE html>
<html>
<head>
    <title>test</title>
</head>
<body>
<p>stuff</p>
<p>more stuff</p>
<label>Test</label>
<select>
    <option>Option 1 Here</option>
    <option>Option 2 Here</option>
    <option>Option 3 Here</option>
    <option>Option 4 Here</option>
    <option>Option 5 Here</option>
    <option>Option 6 Here</option>
    <option>Option 7 Here</option>
</select>   
<p>other stuff</p>
</body>
</html> 
```

在 Windows 7 上的 Firefox 12.0 上，当您使用围绕 的光标突出显示文本时`<select>`，选项也会突出显示。

![在此处输入图像描述](../Images/38746a3d412a2f98b511d526a1603fe9.png)

这种行为在我测试过的其他现代浏览器中不会发生，例如 IE9 和 Chrome。

基本上，我想允许突出显示周围的文本，但我不想像 Firefox 那样允许突出显示选择中的选项。

我发现这个[答案](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)涉及禁用突出显示。我一开始尝试如下：

```
 body {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;  
} 
```

这成功地禁用了突出显示，`<select>`但是，没有其他任何不受欢迎的突出显示。

我试图将 CSS 规则的范围缩小到：

```
 select, select option {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;  
} 
```

但是，这不起作用，如以下屏幕截图所示。尽管萤火虫声明该规则已应用于`<select>`元素，但仍允许突出显示。

通常这没什么大不了的，但这是来自大型应用程序的一个小花絮，它依赖于许多滚动`<div>`元素，这些元素在滚动时会无意中突出显示选择。不过，我不想要一个涉及用户根本无法选择任何文本的解决方案，因为这不是他们习惯的体验。

![在此处输入图像描述](../Images/52454dc99da41d8f79819a1f500b66f0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:55:43.780

将此添加到您的CSS：

```
option::-moz-selection { background: transparent; } 
```

# ruby-on-rails-3 - 如何设置一个模型属于另一个模型的两个实例的 Rails 关联？

> ID：10620864
> 
> 赞同：1
> 
> 时间：2012-05-16T14:37:28.220
> 
> 标签：ruby-on-rails-3, activerecord

我有两个模型 ObjectA 和 ObjectB。ObjectB 有两列，a_1_id 和 a_2_id，它们都是 ObjectA 的外键。ObjectB 属于这些外部 ObjectA 对象中的每一个。

```
class ObjectA < ActiveRecord::Base
  attr_accessible :player_1, :player_2, :subject, :turn

  belongs_to :player_1, :class_name => "User"
  belongs_to :player_2, :class_name => "User"
  has_many :object_b, dependent: :destroy, :finder_sql => "SELECT * FROM object_bs where (a_1_id = #{id} or a_2_id = #{id})" 
end

class ObjectB < ActiveRecord::Base
  attr_accessible :a_1_id, :a_2_id

  belongs_to :a_1_id, :class_name => "ObjectA"
  belongs_to :a_2_id, :class_name => "ObjectA"
end 
```

这是建立协会的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:41:32.257

使用[:foreign_key](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)选项：

```
belongs_to :player_1, :class_name => "User", :foreign_key => 'player1_id'
belongs_to :player_2, :class_name => "User", :foreign_key => 'player2_id'
#...
belongs_to :a_1_id, :class_name => "ObjectA", :foreign_key => 'a_1_id'
belongs_to :a_2_id, :class_name => "ObjectA", :foreign_key => 'a_2_id' 
```

# javascript - jQuery DataTables - 序列化不起作用

> ID：10620868
> 
> 赞同：2
> 
> 时间：2012-05-16T14:37:57.597
> 
> 标签：javascript, jquery, datatables

我正在使用 jQuery [DataTables](http://datatables.net/)。

这是我的标记：

```
<div class='wrapper'>
    <form>
         <table>
              <tr>
                    <td><input type='checkbox' value='1' /></td>
                    <td>Some Data</td>
              </tr>
         </table>
    </form>
</div>
<button>delete</button> 
```

我有多行，每行都有一个复选框。通常，我会这样做以获取表单内的所有输入：

```
var data = $('form input').serialize(); 
```

但是，由于我使用的是 DataTables，所以[这里](http://datatables.net/examples/api/form.html)说我应该使用它：

```
var oTable = $('table').dataTable();
var data = $('input', oTable.fnGetNodes()).serialize(); 
```

不幸的是，`console.log(data)`这里返回`(empty string)`. 我一直在阅读文档，但到目前为止，没有任何帮助。

我尝试记录`oTable.fnGetNodes()`，它返回表的`tr`'s。我在这里不知所措。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:12:42.337

```
<td><input type='checkbox' value='1' /></td> 
```

您需要`name`序列化的属性才能在此处工作。否则，它不会在表单中看到任何有效的表单元素。

```
<td><input type='checkbox' value='1' name='check[]' /></td> 
```

# java - 聚类数据

> ID：10620871
> 
> 赞同：-2
> 
> 时间：2012-05-16T14:38:03.730
> 
> 标签：java, machine-learning, nlp, cluster-analysis

我的数据库中存储了数百万个名称，这些名称只不过是客户名称，
我必须对内部语音上彼此相似的名称进行聚类
，我正在使用的一种方法是将每个名称与从基于数据库的一些选择性相似名称匹配on sound-ex,meta-phone,initials..etc
但它很慢，
现在我正在考虑为每个名称生成唯一 id 并聚类相似的唯一 id，但我无法生成唯一 id。那里的名字是印度人的名字，用英文字母写的。
有没有聚类相似名称的算法。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:51:45.857

这里的关键问题是“语音相似”。您需要知道如何从音素生成唯一 ID。

您不会说这些名称存储在哪种语言和字母中。

也许这个问题与语音合成算法有更多共同点：

[http://social.msdn.microsoft.com/Forums/da/netfxbcl/thread/b6b88747-9616-462e-9cf6-78c19da32f38](http://social.msdn.microsoft.com/Forums/da/netfxbcl/thread/b6b88747-9616-462e-9cf6-78c19da32f38)

或者这个用于 Java：

[http://voce.sourceforge.net/](http://voce.sourceforge.net/)

# gcc - C 编译器无法创建可执行文件 Ubuntu 10.04 LTS

> ID：10620877
> 
> 赞同：1
> 
> 时间：2012-05-16T14:38:16.307
> 
> 标签：gcc, ubuntu, compilation

我正在尝试在我的 Ubuntu 10.04 LTS 计算机上安装 CUnit lib。我已经将它安装在 Ubuntu 11.04 中没有问题，但是当我尝试在 10.04 上安装时，我得到了这个跟踪：

```
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
/home/cpcaserver5/Área de Trabalho/CUnit-2.1-2/missing: Unknown `--run' option
Try `/home/cpcaserver5/Área de Trabalho/CUnit-2.1-2/missing --help' for more information
configure: WARNING: `missing' script is too old or missing
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
---------- Disabling debug mode compilation.
++++++++++ Enabling automated(XML) mode compilation
++++++++++ Enabling basic mode compilation
++++++++++ Enabling console mode compilation
---------- Disabling curses mode compilation
---------- Disabling examples mode compilation
---------- Disabling test mode compilation
---------- Disabling memtrace functionality at compile time
---------- Disabling use of deprecated v1.1 names
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/home/cpcaserver5/Área de Trabalho/CUnit-2.1-2':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

我尝试了很多 libs 和 gcc 版本，所以我认为问题出在 Ubuntu 上，但在哪里或为什么，我不知道！

日志文件的相关部分：

```
configure:3399: checking whether the C compiler works
configure:3421: gcc  -DRELEASE=@RELEASE@ -Wall -W -pedantic -Wshadow -ansi -I/home/cpcaserver5/Área de Trabalho/CUnit-2.1-2/CUnit/Headers   -L/home/cpcaserver5/Área de Trabalho/CUnit-2.1-2/CUnit/Sources conftest.c  >&5
gcc: de: No such file or directory
gcc: Trabalho/CUnit-2.1-2/CUnit/Headers: No such file or directory
gcc: de: No such file or directory
gcc: Trabalho/CUnit-2.1-2/CUnit/Sources: No such file or directory
configure:3425: $? = 1
configure:3463: result: no 
```

完整的 config.log >> [http://pastebin.com/SrWfar1Z](http://pastebin.com/SrWfar1Z)

我可以很好地编译 C 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:03:02.797

某处存在引用问题，并且您安装`CUnit`到的目录包含空格（和非 ASCII 字符）的事实使事情变得混乱。

While it might be possible to make this work, I strongly suggest you change the installation directory to a path that does not contain any spaces at all, and stick to plain ASCII7 characters (no accents, llama, tilde or otherwise).
You'll run into lots of scripting problems if your paths are "unusual". If you want horizontal spacing, use an underscore (`_`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:42:25.027

众所周知，输出`./configure`无用，除了一行：

```
See `config.log' for more details 
```

这就是*真正的*错误消息所在的地方。

# java - JScrollPane 中的 Jpanel，在滚动条上绘图

> ID：10620883
> 
> 赞同：2
> 
> 时间：2012-05-16T14:38:37.593
> 
> 标签：java, swing, custom-controls, jscrollpane, graphics2d

我有一个问题，如图所示

![绘图覆盖滚动条](../Images/45f3c4e16f4e232405224cc20d4279dc.png)

我的添加过程如下：

JFrame -> 查看面板 -> JTabbedPane -> JPanel（我的画布）

我在paintComponent 中绘制我的绘图，并在最后调用revalidate()。帮助将不胜感激！

编辑：

油漆组件代码

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);        
    Graphics2D g2d = (Graphics2D) g;

    //Obtain document size
    double width = model.getWidth();
            double height = model.getHeight();

    canvasBounds = new Rectangle2D.Double(0, 0, width, height);
    g2d.setColor(Color.WHITE);
    g2d.fill(canvasBounds);

    Dimension size = new Dimension();
    size.setSize(canvasBounds.getWidth() * zoomFactor, canvasBounds.getHeight() * zoomFactor);
    this.setPreferredSize(size);

    g2d.setClip(canvasBounds);
    List<DrawableShape> svgShapes = model.getDrawableShapes();
    for(DrawableShape shape : shapeList) {
        shape.draw(g2d);            
    }           
    revalidate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:47:10.020

看起来有些东西不符合您的`clip`. 也许它正在改变`shape.draw()`方法？

你为什么不尝试创建一个新的 Graphics 对象来传递给`shape.draw()`，而不是你的`setClip()`. 像这样的东西...

```
Graphics2D newG = (Graphics2D)g.create(0, 0, width, height); 
```

然后将您的代码更改为此...

```
shape.draw(newG); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:11:48.810

我认为您应该尝试获取框架 JRootPane 对象，向下迭代到您的组件级别并使用 getBounds() 检索您的组件边界，然后将此 Rectangles 添加到您的剪贴蒙版中。这样你的油漆看起来就像它在你的组件后面而不是在它上面。

最近我想出了同样的问题。我这样解决了：

```
 Rectangle mask = null;

for( Component c : getComponents() )

{

    if( c instanceof JRootPane )

    {

        JRootPane rootPane = (JRootPane) c;

        rootPane.setDoubleBuffered(true);

        for( Component cRootPane : rootPane.getComponents())

        {

             if( cRootPane instanceof JLayeredPane)

             {

                JLayeredPane cLayerPanels = (JLayeredPane) cRootPane;

                cLayerPanels.setDoubleBuffered(true);

                for( Component cLayerPanel : cLayerPanels.getComponents() )

                {

                    if( cLayerPanel instanceof JPanel)

                    {

                        JPanel cPanels = (JPanel) cLayerPanel;

                        cPanels.setDoubleBuffered(true);

                        for( Component cPanel : cPanels.getComponents() )

                        {

                            if( cPanel instanceof JPanel)

                            {

                                JPanel cPanels2 = (JPanel) cPanel;

                                cPanels2.setDoubleBuffered(true);

                                 mask = getBounds();

                                for( Component cPanel2 : cPanels2.getComponents() )

                                {

                                    mask.union(cPanel2.getBounds());

                                    cPanel2.paint(cPanel2.getGraphics());

                                }

                            }

                        }

                    }

                }

            }

        }

    }

}

getGraphics().setClip(mask); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T01:55:26.837

我的问题解决了。我不得不将我的 canvasBounds 上的剪辑与 g2d.getClipBounds() 进行比较。由于我的 canvasBounds 剪辑比 g2d 给定的要大得多，因此它在滚动条上绘制。

谢谢你的帮助！

# ssis - 如何使用每个循环来帮助加载大型数据集

> ID：10620884
> 
> 赞同：0
> 
> 时间：2012-05-16T14:38:42.603
> 
> 标签：ssis, large-data-volumes, foreach-loop-container

我正在尝试从 SSIS 中的 SQL Server 2008 加载大型数据集。但是，Visual Studio 一次加载所有内容太慢了。然后我决定使用 for-each 循环每次只加载表的一部分。

例如，如果有 1000 万条记录，我希望每次只加载 100 万条并运行 10 次以完成处理。

这只是我的“大脑设计”，我不知道如何使用 Foreach 循环组件来制作它。有没有其他方法来处理大型数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:33:08.150

要涵盖的变量太多了，我将在 5 分钟内开会。

你说它很慢。*什么*是慢？在不知道这一点的情况下，您可能会永远追逐错误的兔子。

SSIS 在 2008 年[凭借在 30 分钟内加载 1TB 的 ETL 处理速度](http://msdn.microsoft.com/en-us/library/dd537533%28v=sql.100%29.aspx)夺得桂冠。当然，他们从系统中调整了每一个有爱心的bejesus来让它这样做，但他们详细列出了他们采取的步骤。

1000 万行，虽然听起来很大，但我不会考虑对 SSIS 征税。首先，查看您的目标对象（假设为 OLEDB）。如果它没有选中 Fast Load 选项，您将发出 10M 单插入语句。这将淹没您的事务日志。还要查看提交大小中的行数。0 表示全有或全无，根据您的可恢复性可能是也可能不是正确的决定，但确实意识到对您的事务日志的影响（它会占用相当多的空间）。

您对管道中的数据应用了哪些转换？有些转换会扼杀您的吞吐量（排序、聚合等）

创建一个基线包，它所做的只是从源位置读取 N 行数据并执行行计数。这对于理解给定硬件的最佳理论吞吐量至关重要。

在 Visual Studio/BIDS/SSDT 中运行包的速度较慢，有时比通过 SQL 代理/dtexec 调用所获得的体验要慢一个数量级，因为它不会将执行包装在调试器中。

我有时间会修改这个答案，但这些是一些初步的想法。会议结束后，我将发布关于使用 foreach 循环任务处理离散数据块的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:37:28.780

我认为最好的方法是对数据进行功能分区。在大多数情况下，日期列适合执行此操作。让我们以订单日期为例。

对于该列，找到最佳分母，例如，您的订单日期的每一年都会产生大约一百万行。

代替 for each 循环容器，使用[for 循环容器](http://msdn.microsoft.com/en-us/library/ms139956.aspx)。

要使此循环正常工作，您必须在源数据中找到所有订单日期的最小和最大年份。这些可以通过将标量结果保存到 SSIS 变量中的 SQL 语句来检索。

接下来，将您的 for 循环容器设置为在您之前存储在变量中的最小和最大年份之间循环，每次迭代增加一年。

最后，要实际检索数据，您必须将源 SQL 语句保存为变量中的表达式，其中包含指定 for 循环容器生成的当前年份的 where 子句：

```
"SELECT * FROM transactions WHERE YEAR(OrderDate) = " + @[User::ForLoopCurrentYear] 
```

现在，您可以在数据流源中使用此变量来检索分区数据。

**编辑：**

使用 for each 循环容器的不同解决方案是使用 Execute SQL Task 检索分区键并将结果集保存在类型为 SSIS 的变量中`Object`：

```
SELECT YEAR(OrderDate) FROM transaction GROUP BY YEAR(OrderDate) 
```

使用 for each 循环容器，您可以使用 ADO 枚举器遍历对象，并使用与上述相同的方法将当前年份注入源 SQL 语句。

# jquery - 当其他字段更改时验证 1 个字段（不显眼），并仅检查 1 个规则

> ID：10620887
> 
> 赞同：5
> 
> 时间：2012-05-16T14:38:43.507
> 
> 标签：jquery, asp.net-mvc-4, unobtrusive-validation

当另一个字段中的值发生变化时，有什么方法可以在一个字段上触发*特定的 jquery-unobtrusive 规则？*

我有一个表单，上面有两个日期字段（比如开始/结束），验证`end`必须大于`start`. 这在已经设置`end`后更改的简单情况下工作正常。`start`它不允许的是：

*   先设置`end`后设置`start`
*   `start`在两者都已设置后更改，并违反约束

`end`服务器端验证当然会捕获它，但是即使在您已经修复后设置错误`start`，或者当值`end`更改为无效值时也没有显示错误，这看起来很糟糕。触发特定规则的原因是我不想在用户有机会输入值之前在同一字段上触发`required`或格式化规则。`date`表格从“干净”开始。但是，如果这是不可能的，那么触发所有规则就可以了。

抱歉没有代码示例，但我什至不知道从哪里开始。

***更新：***

我目前所做的是在模型中挖掘（因为这是一个 asp.net mvc 项目），找到属性，然后直接读取它的属性。

```
var controllerCtx = ViewContext.Controller.ControllerContext;
var da = ViewData.ModelMetadata.GetValidators(controllerCtx)
            .SelectMany(x => x.GetClientValidationRules())
            .Where(x => x.ValidationType == "isdateafter")
            .FirstOrDefault();

var otherid = da == null ? "" : da.ValidationParameters["propertytested"]; 
```

然后在正常的 HTML 部分，我对它进行测试`start`，看看它是否是一个日期选择器，然后连接一个基本检查，并触发所有验证规则。由于规则不多，我只是`end`在运行之前检查字段中是否有值。我想使用下面的巧妙解决方案，当我这周有一点空闲时间时会尝试一下。

```
@if (otherid != "") {
    <text>
    var other = $("#@otherid");
    if (other && other.hasClass('hasDatepicker')) { // if the other box is a date/time picker
       other.datetimepicker('option', 'onSelect', function(dateText, instance) {
           var lowerTime = $(this).datetimepicker('getDate');
           $("#@id").datetimepicker('option', 'minDate', new Date(lowerTime.getTime()));
           if ($("#@id").val()) { // if there is a value in the other
                $('form').data('validator').element('#@id');
           }
        });
    }
    </text>
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T15:36:40.747

这可能对你有用...

```
$('form').data('validator').element('#Key') 
```

这会将验证器从您的表单中取出，并强制对单个项目进行验证。

[http://docs.jquery.com/Plugins/Validation/Validator/element#element](http://docs.jquery.com/Plugins/Validation/Validator/element#element)

**更新**

看看这是否继续有帮助！

```
$.extend($.validator.prototype, {
        elementWithRule: function(element, rule) {
            element = this.clean(element);
            this.lastElement = element;
            this.prepareElement(element);
            this.currentElements = $(element);
            var result = this.checkSpecificRule(element, rule);
            if (result) {
                delete this.invalid[element.name];
            } else {
                this.invalid[element.name] = true;
            }
            if (!this.numberOfInvalids()) {
                // Hide error containers on last error
                this.toHide = this.toHide.add(this.containers);
            }
            this.showErrors();
            return result;
        },
        checkSpecificRule: function(element, rule) {
            element = this.clean(element);

            // if radio/checkbox, validate first element in group instead
            if (this.checkable(element)) {
                element = this.findByName(element.name).not(this.settings.ignore)[0];
            }

            var findRule = { },
                checkRule = $(element).rules()[ rule ];
            var rules;

            if (checkRule) {
                findRule[rule] = checkRule;
                rules = findRule;
            }

            if (!rules) {
                return;                
            }
            var dependencyMismatch = false;
            for (var method in rules) {
                var rule = { method: method, parameters: rules[method] };
                try {
                    var result = $.validator.methods[method].call(this, element.value.replace( /\r/g , ""), element, rule.parameters);

                    // if a method indicates that the field is optional and therefore valid,
                    // don't mark it as valid when there are no other rules
                    if (result == "dependency-mismatch") {
                        dependencyMismatch = true;
                        continue;
                    }
                    dependencyMismatch = false;

                    if (result == "pending") {
                        this.toHide = this.toHide.not(this.errorsFor(element));
                        return;
                    }

                    if (!result) {
                        this.formatAndAdd(element, rule);
                        return false;
                    }
                } catch(e) {
                    this.settings.debug && window.console && console.log("exception occured when checking element " + element.id
                        + ", check the '" + rule.method + "' method", e);
                    throw e;
                }
            }
            if (dependencyMismatch)
                return;
            if (this.objectLength(rules))
                this.successList.push(element);
            return true;
        }
    });

// Then use it like this...
$('form').data('validator').elementWithRule('#Key', 'required'); 
```

似乎没有任何内置方法可以做到这一点，所以我只是一起破解了一些东西！:)

# android - Android - 通知警报声

> ID：10620891
> 
> 赞同：1
> 
> 时间：2012-05-16T14:38:55.993
> 
> 标签：android, notifications, alarmmanager, alarm

我已经实现了一个带有警报声的通知，如下所示：

```
 PendingIntent pi = PendingIntent.getActivity(context, id, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    Notification note = new Notification(R.drawable.icon, "Alarm", System.currentTimeMillis());
    note.setLatestEventInfo(context, "Alarm", title + " (alarm)", pi);
    Uri alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    if(alarmSound == null){
        alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
        if(alarmSound == null){
            alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        }
    }
    note.sound = alarmSound;
    note.defaults |= Notification.DEFAULT_VIBRATE;
    note.flags |= Notification.FLAG_AUTO_CANCEL;
    manager.notify(id, note); 
```

闹钟的声音响起，但我面临的问题是它一直在播放，直到我向下拖动通知栏。播放时，我将活动显示为对话框（弹出窗口），其中包含有关当前警报播放的一些信息。我希望能够在对话框（弹出活动）中的按钮中取消此警报声。

我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:50:44.407

取消我们`manager.cancel(id)`在对话框按钮中的声音单击 id 是您在创建通知时设置的 id`manager.notify(id,note)`

# joomla - 如何找出 Joomla JTable 列/字段名称？

> ID：10620894
> 
> 赞同：0
> 
> 时间：2012-05-16T14:39:02.413
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 2.5 构建一个中型网站，我决定通过自动创建菜单来缓解维护和内容管理的难题。

我一直在寻找这样做的扩展，但只找到了 Joomla 1.5 扩展。我最终尝试升级一个名为 Auto Menu Magic 的 GPL 扩展。

处理扩展文件中的 XML 标签等基本问题很容易，因为 Joomla 中有一个页面可以帮助您从 Joomla 1.5 迁移到 1.6。

我提到的扩展有一个名为 onContentAfterSave 的函数，它在保存文章时由 joomla 调用。我一直在通过在管理界面中创建垃圾文章并更改代码以在多个地方抛出异常进行调试，我可以在管理前端看到错误消息。

这就是我卡住的地方：

```
 $db   = &JFactory::getDBO();
    $menu = JTable::getInstance( 'menu');

    $menu->menutype           = $menutype;
    $menu->name               = $name;
    $menu->link               = $link;
    $menu->type               = $linktype;
    $menu->published          = $published;
    $menu->componentid        = $componentid;
    $menu->parent             = $menuparentid;
    $menu->sublevel           = $menusublevel;
    $menu->checked_out        = 0;
    $menu->checked_out_time   = 0;
    $menu->pollid             = 0;
    $menu->browserNav         = 0;
    $menu->access             = 0;
    $menu->utaccess           = 0;
    $menu->lft                = 0;
    $menu->rgt                = 0;
    $menu->home               = 0;

    $menu->params = $params;

    // Figure out the order (Just pop this article at the end of the list):
    $menu->ordering = $menu->getNextOrder(
        "menutype = ".$db->Quote($menu->menutype).
        " AND published >= 0 AND parent = ".(int) $menu->parent
    );

    // Validate:
    if (!$menu->check())
        return NULL;

    // DEBUG 2 -- Integrity check
    throw new Exception ("menutype: $menutype, name: $name, link: $link published: $published, componentid: $componentid menuparentid: $menuparentid menusublevel: $menusublevel");

    // Save:
    if (!$menu->store())
        return NULL;

    // DEBUG 1
    throw new Exception(" Could save! "); 
```

正如您在上面看到的，当菜单保存到数据库时，我尝试抛出异常（DEBUG 1）。从未达到此异常，但达到了上层异常 (DEBUG 2)。这意味着 $menu->check() 返回 true，而不是 $menu->store()。我假设数据库返回一个错误，因为 Joomla 数据库结构的一些可能在 1.5 之后发生了变化。

在过去的几个小时里，我已经阅读了很多资料，但我找不到一件事。如何查看 Joomla 表使用的列，以便正确调试此错误？

提前致谢！

PS：我也看过SQL数据库，但没有多大帮助。这些变量似乎与列名有不同的命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:48:01.940

我认为它应该看起来像这样，因为我也一直在尝试转换自动菜单！$db = &JFactory::getDBO(); $menu = JTable::getInstance('menu');

```
 $menu->menutype             = $menutype;
            $menu->title                = $title;
            $menu->alias                = strtolower($title) ;
            $menu->note                 = "Created by automenu";
            $menu->path                 = $link;
            $menu->link                 = $link;
            $menu->type                 = $linktype;
            $menu->published            = $published;
            $menu->parent_id            = $menuparentid
            $menu->level                = $menusublevel;
            $menu->componentid          = $componentid;
            $menu->ordering             = 0;
            $menu->checked_out          = 0;
            $menu->checked_out_time     = 0;
            $menu->browserNav           = 0;
            $menu->access               = 1;
            $menu->img                  = '';
            $menu->templat_style_id     = 0;
            $menu->params               = $params;
            $menu->lft                  = 0;
            $menu->rgt                  = 0;
            $menu->home                 = 0;
            $menu->language             = '*';
            $menu->client_id            = 0; 
```

我很想知道你是否让它工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T18:15:34.207

我建议在系统配置中打开 Joomla 调试。在每个页面的底部，它显示了它已执行的所有查询，这（取决于插件）可能会显示正在执行的 SQL，并且可能会失败。可能有一个很大的列表，因此您可能需要稍微搜索一下才能找到您感兴趣的语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T14:08:13.663

法比奥，

非常感谢！我会尝试一下，看看我是否可以进一步改进它。

麦克风

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T22:45:06.093

你忘记了例外俱乐部的第一条规则，*如果你扔东西......你必须抓住它。*

我在您的代码中没有看到一`try/catch`对，因此 PHP 会因*未捕获的异常*而以“致命错误...”停止，因此它永远不会到达`DEBUG 1`. 例如

> **致命错误：**带有消息的未捕获异常“异常”...

尝试将您的代码包装成对，并在查看[PHP 文档](http://php.net/manual/en/language.exceptions.php)`try/catch`后允许执行继续`DEBUG 2`[`exceptions`](http://php.net/manual/en/language.exceptions.php)

# asp.net - ASP.NET 确认在网格中删除

> ID：10620897
> 
> 赞同：0
> 
> 时间：2012-05-16T14:39:07.523
> 
> 标签：asp.net, vb.net

我需要向网格添加确认删除操作。问题是“删除”链接的呈现方式。我的网格是在 vb.net 后面的代码中构建的。我有这个

```
colDelete.AllowDelete = True
colDelete.Width = "100"
AddHandler CType(gridSavedForLater, Grid).DeleteCommand, AddressOf dgDeleteSelectedIncident 
```

子如下

```
Sub dgDeleteSelectedIncident(ByVal sender As Object, ByVal e As GridRecordEventArgs)

    Dim message As String = "Are you sure you want to delete this incident?"
    Dim caption As String = "Confirm Delete"
    Dim result = System.Windows.Forms.MessageBox.Show(message, caption, Windows.Forms.MessageBoxButtons.OKCancel, Windows.Forms.MessageBoxIcon.Warning)

    'If (result = Windows.Forms.DialogResult.Cancel) Then
    'Else
    ' MessageBox("Are you sure you want to delete this incident?")
    'Get the VehicleId of the row whose Delete button was clicked
    'Dim SelectedIncidentId As String = e.Record("IncidentId")

    ''Delete the record from the database
    'objIncident = New Incidents(SelectedIncidentId, Session("userFullName"))

    'objIncident.DeleteIncident()
    ''Rebind the DataGrid
    LoadSavedForLater()
    ''        End If

End Sub 
```

调用此子时，我需要添加一个 javascript 确认对话框。我可以使用 Windows 窗体消息框来做到这一点，但这在服务器上不起作用。

请帮助乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:46:47.153

您不能在 ASP.NET 中显示 MessageBox，因为它将显示在服务器上。所以你需要一个`confirm`删除按钮的javascript onclick。因此，您不需要先回发到服务器。您可以将脚本附加到`GridView`.

一个好地方`RowDataBound`是`GridView`：

```
Private Sub GridView1_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound
    Select Case e.Row.RowType
        Case DataControlRowType.DataRow
            ' if it's a custom button in a TemplateField '
            Dim BtnDelete = DirectCast(e.Row.FindControl("BtnDelete"), Button)
            BtnDelete.OnClientClick = "return confirm('Are you certain you want to delete?');"
            ' if it's an autogenerated delete-LinkButton: '
            Dim LnkBtnDelete As LinkButton = DirectCast(e.Row.Cells(0).Controls(0), LinkButton)
            LnkBtnDelete.OnClientClick = "return confirm('Are you certain you want to delete?');"            
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:12:57.630

作为替代方案，在网页中通知用户状态更改（保存、删除、更新等）的常用方法是在 HTML 中添加更新元素。基本上，您将为用户设置一个标签（或其他标签）。

*“您的更改已成功保存。”* 或*“尝试保存更新时遇到错误。”* ， 例如。您可以将红色设置为错误或任何您的编程心脏想要的样式。

我有点喜欢这种方法，因为弹出窗口对我来说总是更像 WinForm 的东西。要么工作，所以我只是想我会建议另一种方法。

# actionscript-3 - swc 的 currentFrame 返回 1

> ID：10620901
> 
> 赞同：0
> 
> 时间：2012-05-16T14:39:19.133
> 
> 标签：actionscript-3, flash, swc

我是动画的 .swc 文件。我想知道动画是否接近尾声，所以我比较了 mc.currentFrame 和 mc.totalFrames。问题是，在 .swcs currentFrame 和 totalFrames 上总是返回 1。

有没有办法解决这个问题？

# binding - 常规绑定问题

> ID：10620912
> 
> 赞同：1
> 
> 时间：2012-05-16T14:39:50.303
> 
> 标签：binding, groovy

我有如下示例代码

```
import org.codehaus.groovy.control.CompilerConfiguration

abstract class MyClass extends Script {

    void testMethod(Integer x) {
        println "x = $x"
    }
}

public static void main(String[] args) {
    compilerConfiguration = new CompilerConfiguration();
    compilerConfiguration.setScriptBaseClass("MyClass");
    GroovyShell shell = new GroovyShell(new Binding(), compilerConfiguration);
    shell.evaluate("testMethod 1")
} 
```

`x = 1` 当我运行这个类时，如果我将它更改`"testMethod 1"`为它现在打印`"testMethod -1"`它失败了

```
Caught: groovy.lang.MissingPropertyException: No such property: testMethod for class: Script1
groovy.lang.MissingPropertyException: No such property: testMethod for class: Script1
    at Script1.run(Script1.groovy:1)
    at Test.run(Test.groovy:15) 
```

现在我`"testMethod -1"`改为`"testMethod (-1)"`. 它再次工作并打印`x = -1`

我需要了解的是为什么 Groovy 要求括号中的负数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:41:00.020

因为没有括号，它假设您正在尝试从名为`testMethod`(ie: `testMethod - 1`)的属性中减去 1

您需要括号来通知解析器这是一个方法调用而不是减法运算

* * *

### 编辑

我想出了一个可怕的方法来让它工作：

```
import java.lang.reflect.Method
import org.codehaus.groovy.control.CompilerConfiguration

abstract class MyClass extends Script {
  private methods = [:]

  class MinusableMethod {
    Script declarer
    Method method
    MinusableMethod( Script d, Method m ) {
      this.declarer = d
      this.method = m
    }
    def minus( amount ) {
      method.invoke( declarer, -amount )
    }
  }

  public MyClass() {
    super()
    methods = MyClass.getDeclaredMethods().grep {
      it.name != 'propertyMissing' && !it.synthetic
    }.collectEntries {
      [ (it.name): new MinusableMethod( this, it ) ]
    } 
  }

  def propertyMissing( String name ) {
    methods[ name ]
  }

  void testMethod(Integer x) {
      println "x = $x"
  }
}

static main( args ) {
  def compilerConfiguration = new CompilerConfiguration();
  compilerConfiguration.setScriptBaseClass( 'MyClass' );
  GroovyShell shell = new GroovyShell(new Binding(), compilerConfiguration);
  shell.evaluate("testMethod - 1")
} 
```

但这***可能会在其他条件下中断***

从长远来看，让人们编写有效的脚本可能是更好的途径……

# android - 有没有类似于 MobileSubstrate for android 的东西？

> ID：10620913
> 
> 赞同：1
> 
> 时间：2012-05-16T14:39:57.203
> 
> 标签：android

我想要类似于 MobileSubstrate 的东西，但适用于 Android 而不是 iOS。那存在吗？

如果没有，是否有可能为 java 制作类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T05:47:27.270

Saurik 宣布 CydiaSubstrate 适用于 2.3 至 4.2 版本支持的 Android 设备，包括 Kindle Fire、CyanogenMod 和 Intel。您需要先root您的设备才能使其正常工作。您可以在[CydiaSubstrate For Android](http://veryrite.com/2013/05/15/cydiasubstrate-for-android/)上阅读更多内容，并从[CydiaSubstrate](http://www.cydiasubstrate.com/download/com.saurik.substrate.apk)或[GooglePlay 商店](https://play.google.com/store/apps/details?id=com.saurik.substrate)下载。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-16T15:08:47.950

MobileSubstrate 是越狱完成后添加的框架，由 Saurik 完成。更多信息在这里：http://iphonedevwiki.net/index.php/MobileSubstrate

在 Android 中，如果我们想将比较推到极限，我们已经使用解锁 bootrom 植根手机，之后您可以使用您的功能创建/编译您自己的 rom。

或者只是制作一个可闪存的 zip 来替换一些文件或执行一些内部代码。

我希望它确实回答了你的问题

# javascript - Javascript循环验证表单

> ID：10620915
> 
> 赞同：1
> 
> 时间：2012-05-16T14:40:02.190
> 
> 标签：javascript

我需要帮助为我正在验证的对象创建一个 javascript 循环。验证有效，它显示警报，但它不关注该字段。它不会关注该字段的原因是因为每次用户添加另一个帐户时，该字段的 id 都是唯一的。代码如下：

```
if ((theForm.LinkedAccts.value == "Yes")&&
    (document.getElementById('DLAccount').selectedIndex == ""))
{
     alert("Please enter the Delink Account number.");
     document.getElementById('DLAccount').focus();
     return (false);
} 
```

谢谢！

# c# - xaml 双向绑定到 PhoneApplicationPage 代码中的属性

> ID：10620918
> 
> 赞同：0
> 
> 时间：2012-05-16T14:40:08.310
> 
> 标签：c#, windows-phone-7, xaml

好的相当简单，我的页面上有一个 ToggleSwitch，就像这样。

```
<toolkit:ToggleSwitch x:Name="togLocation" VerticalAlignment="Center"
    Style="{StaticResource gToggleSwitchStyle}" Foreground="{StaticResource brLightFont}"
    Loaded="togLocation_Loaded" IsChecked="{Binding LocationTrackingEnabled, Mode=TwoWay}"/> 
```

在同一页面后面的代码中，我有以下内容

```
public partial class Setup : PhoneApplicationPage
{

    public bool LocationTrackingEnabled
    {
        get { return (bool)GetValue(LocationTrackingEnabledProperty); }
        set
        {
            SetValue(LocationTrackingEnabledProperty, value);
        }
    }

    public static readonly DependencyProperty LocationTrackingEnabledProperty =
        DependencyProperty.Register("LocationTrackingEnabled",
        typeof(bool),
        typeof(Setup),
        new PropertyMetadata(false));

    // blah blah rest of the page code follows on 
```

如您所见，默认值为 false，因此 toggleswitch.IsChecked 应为 false。不，它是真的。使用断点我检查 LocationTrackingEnabled 并且它永远不会改变，所以绑定不起作用。

我已经在后面的代码中尝试过了。

```
DataContext = this; 
```

我也在页面的 xaml 中尝试过这个

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

我以前做过绑定，但我看不到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:48:23.657

这没有必要成为一个 DependencyProperty。只需将其用作常规属性即可。另外，在运行时检查调试输出——如果有绑定问题，它会显示在那里。

# jsf - 如何让我的 HtmlMenuItem 在新选项卡中打开 URL？

> ID：10620919
> 
> 赞同：0
> 
> 时间：2012-05-16T14:40:08.820
> 
> 标签：jsf, hyperlink, richfaces, menuitem, target

我正在使用richFaces 3.3.3。

我需要使用简单的 URL 使 menuItem 打开一个新选项卡……例如 google.com。现在我尝试了这段代码：

```
HtmlMenuItem menuItem = new HtmlMenuItem();
menuItem.setid("id");
menuItem.setValue("My menu link new tab");

menuItem.setSubmitMode("server");
menuItem.setTarget("_blank");
menuItem.setOnClick("document.location.href='www.gooogle.com'"); 
```

但这使我当前的标签被重定向到谷歌，并打开一个带有我所在上下文的新标签。我想留在我的地方，新标签“_blank”转到谷歌。

我试图用 onComplete 替换 onClick，但这也会使新选项卡进入我的上下文。但不要执行我试图将 HtmlOutputLink 作为我的 menuItem 的子项，但不执行对 outPutLink 的单击 .. 对 menuItem 执行单击...

```
HtmlMenuItem menuItem = new HtmlMenuItem();
menuItem.setid("id");
menuItem.setValue("My menu link new tab");
HtmlOutputLink cLink = new HtmlOutputLink();
cLink.setTarget("_blank");
cLink.setValue("www.google.com");
menuItem.getChildren().add(cLink); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T19:25:30.830

您只能使用 OutputLink，例如：

```
HtmlOutputLink cLink = new HtmlOutputLink();
cLink.setValue("http://www.google.com");
cLink.setTarget("_blank");
HtmlOutputLabel label = new HtmlOutputLabel();
label.setValue("Google");
cLink.getChildren().add(label); 
```

因此，只需在某个组件上添加您的链接。也许 HtmlMenuItem 使用 javascript 打开页面，您的浏览器将其视为弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:41:34.353

你在用这个吗？`<ui:include src="#{bean.link}"/>`

你的问题不是很精确，所以我只能想出这个主意......

# excel - 如何在生产服务器上最好地执行 EXCEL VBA

> ID：10620920
> 
> 赞同：3
> 
> 时间：2012-05-16T14:40:18.550
> 
> 标签：excel, vba

“The Business”编写了一个复杂的 Excel VBA 宏，它可以扫描多个复杂且不规则的（每个选项卡多个逻辑表）电子表格并生成摘要 XLS。管理层希望 IT 将其“生产化”并在服务器上运行。

我已经看到使用 Jet 驱动器读取电子表格中的常规表格（每个选项卡 1 个）的示例，但是电子表格是不规则的，而且这个宏不仅仅读取，它设置单元格公式等。因此，我想我们需要完整VBA。

如果无法在生产服务器上安装 Excel，如何在生产中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:14:42.000

您可以使用一个库来与 Excel 文件进行交互，例如[Spreadsheet Gear](http://www.spreadsheetgear.com/) ……我相信还有很多其他的。然后，您可以阅读 Excel 文件，然后生成摘要 XLS。您需要使用 VB 将它们联系在一起。不过，您不需要在生产服务器上安装 Excel。

# c# - 代码隐藏中无法识别表单字段

> ID：10620929
> 
> 赞同：0
> 
> 时间：2012-05-16T14:40:35.557
> 
> 标签：c#, asp.net, visual-studio-2010

我正在处理一个带有 cs 代码隐藏文件的表单。在我的 aspx 页面中，我有这个字段：

```
<input runat="server" id="emailField" name="email" placeholder="jsmith@gmail.com" type="email"  required="required"/> 
```

但是当我尝试在我的代码隐藏中引用它时，我的代码隐藏似乎并没有认识到它的存在；我只是得到一个语法错误。它也发生在我的所有其他表单字段上。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:44:46.387

尝试以下操作：

> 1 - 检查以确保您的“表单字段”具有`id`和 `runat="server"`属性。
> 
> 2 - 确保没有任何编译错误。如果有修复它们，那么 Visual Studio 可以生成智能感知所需的设计器文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:46:07.927

显示相关代码 - 你是如何引用它的？

我有一种预感，您正在使用`email`. 由于该项目是`runat="server"`，您可以删除 name 属性并使用`emailField`.

# properties - Checkstyle 自定义检查访问属性值？

> ID：10620932
> 
> 赞同：1
> 
> 时间：2012-05-16T14:40:44.857
> 
> 标签：properties, checkstyle

有人可以告诉我或指向一些有关 Checkstyle 自定义检查和访问属性值的文档吗？

我的自定义类需要获取用户提供的正则表达式文件。他们可以将此文件作为 Checkstyle .xml 配置文件中的属性提供吗？如果是这样，我的自定义 Check 类如何读取属性的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:03:38.407

I found a way around this problem. Just set a java Property using `-Dpropertyname=propertyvalue`, then in the custom class get the property value.

# php - 为什么 Zend DB 更新不发布？

> ID：10620933
> 
> 赞同：-1
> 
> 时间：2012-05-16T14:40:47.740
> 
> 标签：php, database, zend-framework, frameworks

应用程序中的其他模块正在更新，除了这个。

在这里，我使用模型映射器尝试更新行集，如[http://framework.zend.com/manual/en/learning.quickstart.create-model.html](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)

```
 public function SomeAction()
 {
   $mapper = new Application_Model_SomeMapper();
   $model = new Application_Model_SomeModel(); //getters and setters

   // action body
   $request = $this->getRequest();
   $data = $this->_request->getParams();
   $someId = $data['someid'];

   $get = $mapper->find($someId, new Application_Model_SomeModel, true); //find the row by id, and return array

/*
instantiating a form object and adding "submit" 
*/
   $form = new Module_Form_FormName();
   $form->setAction("/module/controller/action/params/$someId");
   $form->setMethod('post');
   $form->setName('some_edit');

   $submit = $form->createElement('button', 'submit');
   $submit->setAttrib('ignore',true);
   $submit->setLabel('Edit Something');
   $form->addElement($submit);

if ($this->_request->isPost())
    {
        if($form->isValid($request->getPost()))
        {
            $data = $this->_request->getPost();

            if(empty($data['some_id' ]))
            {
                $data['tier_models_id'] = NULL;
            }

            unset($data['submit']);

            $setters = $model->setId($data['id'])
                             ->setField1($data['field_1']); 

            if ($mapper->save($someId, $setters)) 
            {
                $this->_redirect("/index/");                  
            }
        }      
    }

    $form->populate($tier);
    $this->view->form = $get;

} 
```

这是保存映射器函数的示例，除了我包含了一个额外的 $id 参数

```
public function save(Application_Model_Guestbook $guestbook)
{
    $data = array(
        'email'   => $guestbook->getEmail(),
        'comment' => $guestbook->getComment(),
        'created' => date('Y-m-d H:i:s'),
    );

    if (null === ($id = $guestbook->getId())) {
        unset($data['id']);
        $this->getDbTable()->insert($data);
    } else {
        $this->getDbTable()->update($data, array('id = ?' => $id)); //not happening, although the 'id' is passed as a param
    }
} 
```

有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:09:33.303

试试这个

```
$where =   $this->getDbTable()->getAdapter()->quoteInto('id = ?', $id);
 $this->getDbTable()->update($data, $where); 
```

# c# - 同一 .NET 项目但不同计算机上的 SqlReader 执行时间之间的差异

> ID：10620937
> 
> 赞同：1
> 
> 时间：2012-05-16T14:40:51.243
> 
> 标签：c#, asp.net, sql-server, ado.net

我正在开发一个从 MSSQL 服务器读取数据的团队项目。我们正在使用异步调用来获取数据。

```
SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString);
SqlCommand cmdData = new SqlCommand("get_report", conn);
cmdData.CommandType = CommandType.StoredProcedure;

conn.Open();
IAsyncResult asyResult = cmdData.BeginExecuteReader();

try
{
    SqlDataReader drResult = cmdData.EndExecuteReader(asyResult);
    table.Load(drResult);
}
catch (SqlException ex)
{
    throw;
} 
```

该项目本身使用带有门控签入的 TFS 源代码控制，并且我们已经验证两台计算机都在运行完全相同的项目版本。我们还使用相同的用户登录名并使用完全相同的参数执行存储过程（为简洁起见，未列出）。

存储过程本身需要 1:54 在 SQL Server Management Studio 下返回 42000 行。在 Windows 7 x86 上运行时，.NET 代码的执行时间与在 SSMS 上的执行时间大致相同，并且上面的代码片段可以完美执行。`EndExecuteReader`但是，在我运行 Windows 7 x64 的计算机上，上面的代码在 0:40 标记处遇到错误。返回的错误是“无效操作。连接已关闭。”

添加`cmdData.CommandTimeout = 600`允许执行继续，但数据需要超过 4 分钟才能返回，我们无法解释可能发生的情况。

我们考虑了一些事情：我的计算机安装了 .NET 4.5 Framework，正在针对 32 位程序集运行 64 位操作系统，可能将信息存储在未同步到 TFS 服务器的本地项目文件中。但我们似乎无法确切地弄清楚究竟是什么导致了时间上的差异。

**任何人都对为什么存在这种差异有任何想法，或者可以给我建议在哪里寻找隔离问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:50:44.560

当为单个命令执行多次调用 EndExecuteReader 或该方法与其执行方法不匹配时，将收到 Invalid Operation 错误。

# asp.net-mvc-3 - ASP.NET MVC 3 和 App_Code 文件夹

> ID：10620947
> 
> 赞同：17
> 
> 时间：2012-05-16T14:41:20.803
> 
> 标签：asp.net-mvc-3, entity-framework-4

在 ASP.NET Webform 中，`App_Code`是放置代码并在运行时使用它的标准文件夹。但我认为这个文件夹在 ASP.NET MVC 中有点不同，我的问题是：

*   我应该将我的代码（扩展方法、助手、...）放在 ASP.NET MVC 的什么位置。当我将代码存储在`App_Code`文件夹中时，我无法在其中使用主题，`controller`但它们在`views`.

*   关于实体框架，同样的问题，我应该把**edmx**和**tt**文件放在哪里。*我没有使用代码优先*

**更新：**

经过一番搜索，最后我在我的解决方案中创建了一个新的**类库**项目，代码在所有`controllers`和`views`. **我仍然不知道为什么`App_Code`控制器中的代码不可用**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-06-20T10:16:17.160

我遇到了同样的问题，我的 MVC 项目中无法识别我的类 Utility.cs。我将构建操作“内容”更改为“编译”，这解决了我的问题。希望有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-16T18:07:53.290

App_Code 在网站项目中是必需的，因为它具有特殊的含义。这意味着“不要将这些文件提供给网络浏览器”。在 ASP.NET MVC 中，大多数情况下文件并不直接提供给浏览器，因此不需要 App_Code。您可以将代码文件放在任何您想要的文件夹中，因为这些文件被编译成 DLL，通常不会发布到网站本身。

使用独立库也是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-27T07:57:58.317

没有人真正解释为什么 App_Code 首先存在。这是您放置代码文件以获取动态编译的地方（在运行时）。这就是 App_Code 的第一大原因，也是它特别的原因。您可以将代码放在您想要的任何文件夹中，但您必须在 App_Code 中使用 Compile 操作对其进行编译，这不是必需的，事实上，App_Code 中的大多数文件甚至都不是项目的一部分。

它也适用于 ASP.NET MVC 项目，您只需使用 .cshtml 扩展名命名您的代码文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T15:06:03.873

我建议从[本教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3)开始。它首先使用 EF 代码，但如果您愿意，您可以先`DbContext`用普通的 edmx替换代码`ObjectContext`（提示：模型文件夹）。

`App_Code`特定于*网站项目*。IMO，除了最简单的网站之外，它是一种组织所有网站的糟糕方式。MVC 项目是一个*Web 应用程序项目*，因此没有`App_Code`，您的类几乎可以在任何地方定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T15:05:55.163

好吧，尝试下载一些已经存在的开源项目。其中一个相当复杂，但如果你能理解它就非常酷 -[果园](http://www.orchardproject.net/)

最佳实践是将此逻辑移至 DAL（数据访问层）或 BLL（业务逻辑层）。取决于您的应用程序的复杂性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-24T17:14:29.927

对于那些不想要第二个项目/类库而只想要一个简单文件夹来存放几个 c# 类的人，我建议使用“App_Classes”。

# iphone - UINavigationBar 和 UIScrollView 调整大小

> ID：10620953
> 
> 赞同：0
> 
> 时间：2012-05-16T14:41:49.700
> 
> 标签：iphone, objective-c, ios, scrollview

我有带有导航栏和滚动视图的 UIViewController。当滚动视图向下滚动时，我隐藏导航栏并为滚动视图设置边界以适应可用空间。

```
 self.navigationController.navigationBarHidden = YES;
    [scrollView setBounds:CGRectMake(0, 0, 320, 411)]; 
```

高度是 411 因为还有 UITabBarController。但是滚动视图不适合整个视图。当我检查它的框架时，它说 frame = (0 22; 320 411); 我怎么能解决这个问题？

我尝试使用 setFrame 函数而不是 setBounds。我也不需要调整它的内容我需要改变它的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:47:20.397

我想你在这里使用`setFrame`，`setContentSize`如果需要的话......

它可能会发生，因为在更改滚动视图边界后无法管理其内容大小...希望这对您有所帮助.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:47:00.047

我相信你需要设置滚动视图的框架。

```
scrollView.frame = CGRectMake(0, 0, 320, 411); 
```

边界是相对于视图而不是其包含视图的坐标系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:48:07.103

尝试使用 setFrame 函数。

```
[scrollView setFrame:CGRectMake(0, 0, 320, 411)]; 
```

# android - 在 Titanium 中导入 JAR 文件

> ID：10620954
> 
> 赞同：2
> 
> 时间：2012-05-16T14:41:49.957
> 
> 标签：android, titanium, titanium-mobile, titanium-modules

我已经创建了钛移动模块项目并将 .zip 文件复制到 /lib 文件夹，并在类路径中添加了条目。我接下来要做的事情是什么以便我可以从 JAR 文件中访问该方法。我应该在哪个文件中编写代码来使用 JAR 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:55:10.220

您需要将 zip 文件复制到钛项目的根文件夹中，而不是 lib 文件夹中。当您运行项目时，它将被解压缩，并将在根文件夹中创建模块文件夹。您应该在 TiApp.xml 文件中有一个条目，如下所示：

```
<modules>
    <module>
        com.test.module
    </module>
</modules> 
```

如果您找到文件夹“yourprojectdirectory->modules->android->com.test.module”，那么我认为一切正常......

# java - Weblogic 服务器 (UNIX) 上的预编译 JSP 和 Servlet

> ID：10620955
> 
> 赞同：0
> 
> 时间：2012-05-16T14:41:59.173
> 
> 标签：java, jsp, servlets, weblogic

我们在 UNIX 机器上的这个 webLogic 服务器上托管了一个 Web 应用程序。它主要是一个基于 JSP/Servlet 的应用程序。每当我们对这些 JSps 或 servlet 中的任何一个进行修改/增强时，我都会在本地预编译它们并将它们部署在 UNIX 系统上。例如，如果有一个名为 GetIdServlet.class 的文件，我们通常将现有文件重命名为 GetIdServlet.class1，然后将新文件作为 GetIdServlet.class 放入。这只是为了能够在需要时恢复到原始文件。但是，我注意到非常奇怪的行为。每当我们停止和启动服务器时，应用程序就会失去一些功能。该功能可能会在下一次或之后的几次重新启动时恢复。例如，应该将其定向到下一页的提交按钮只是停止工作。它可能会在几次重新启动后开始工作。

但是在我的本地（Eclipse + webLogic）上绝对没有问题。一切正常。关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:47:55.767

您正在使用 Unix 环境，我假设使用的本地桌面设置是 Windows 操作系统或 MAC。因此，当您复制类文件时，您使用的是 WinSCP 等工具。

如果是这样，请将该工具的复制设置设置为使用二进制方法复制文件。

WinSCP 中的示例。转到选项->首选项->在侧边菜单中选择传输->在传输模式部分下，选择二进制选项作为传输模式。这将确保在 Unix 环境中创建二进制副本，并且在传输过程中不会丢失任何数据。

# asp.net - asp.net 应用程序中的自定义后退按钮

> ID：10620956
> 
> 赞同：1
> 
> 时间：2012-05-16T14:42:09.070
> 
> 标签：asp.net

我有在弹出窗口中工作的应用程序。有没有一种简单的方法来做手动后退按钮，因为弹出窗口没有它们？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:43:47.820

使用`history`适用于此的 javascript 对象

```
function goBack()
  {
     window.history.go(-2)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:44:44.690

在 JavaScript 中，`history.go(-1);`也会有同样的效果。

# android - 使用 Titanium 开发 iPhone 和 Android App UI 的最佳实践

> ID：10620958
> 
> 赞同：2
> 
> 时间：2012-05-16T14:42:24.357
> 
> 标签：android, iphone, titanium

我们正在开始开发 Android 和 iPhone 应用程序，并想知道为这两种环境开发 UI 的最佳实践。

我们已经将这两种环境的核心（功能）开发为通用类。核心完全不依赖于 UI。

最好的做法是为 iPhone 和 Android 提供单独的 UI 代码，还是应该将它们组合在一起并在需要的地方有条件地编写？

我想了解这一点，因为您可能遇到过这样的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:18:10.550

Appcelerator 有两种推荐的创建跨平台 UI 的方法 - 分支和特定于平台的 commonJS。

根据我的经验，使用特定于平台的 commonJS 是最容易维护的，尽管它确实需要一些额外的工作。

[Titanium 2.0 文档中有关在单个代码库中支持多个平台](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Supporting_Multiple_Platforms_in_a_Single_Codebase)的部分对此主题进行了更详细的介绍，并且应该有助于选择适合您的路径。

创建跨平台 UI 的一个很好的例子是由 Appcelerator 的 Titans 程序创建的[社区应用程序。](https://github.com/appcelerator-titans/App)

# c# - 在 EF 中将外键 id 设置为 null 非常慢

> ID：10620966
> 
> 赞同：2
> 
> 时间：2012-05-16T14:42:46.760
> 
> 标签：c#, entity-framework

我正在通过存储库模式使用实体框架，并且有一个重要且令人惊讶的性能问题。我已经完成了分析，所以我对发生的事情有一个很好的了解，我只是不知道该怎么做。

这是我的代码的本质（简化）：

```
var employee = Repositories.Employees.FirstOrDefault(s => s.EmployeeId == employeeId);
employee.CompanyId = null;
Repositories.Commit(); 
```

中间线 ( `employee.CompanyId = null`) 需要惊人的时间才能完成（大约 30 秒）。时间没有花在 Commit 行上。

通过分析，我找到了运行这部分自动生成的 EF 代码的原因：

```
if (previousValue != null && previousValue.**Employees**.Contains(this))
{
    previousValue.Employees.Remove(this);
} 
```

这并没有真正帮助我，但它确实证实了问题出在 EF 上。我真的很想知道该怎么做。我可以以其他方式（存储过程）更新列，但我真的更愿意在任何地方使用 EF。

我无法轻松编辑 EF 设置，因此我更喜欢不涉及此内容的建议。

**更新** 我通过直接对数据库运行 SQL 解决了这个问题，然后从上下文中刷新对象以确保 EF 会立即检测到此更改。

```
public void SetCompanyNull(Guid employeeId)
{
    _ctx.ExecuteStoreCommand("UPDATE Employee SET CompanyId = NULL WHERE EmployeeId = N'" + employeeId + "'");
    _ctx.Refresh(RefreshMode.StoreWins, _ctx.Employees.FirstOrDefault(s => s.EmployeeId == employeeId));
} 
```

**更新 2** 我还通过暂时禁用延迟加载解决了这个问题。

```
var lazyLoadDisabled = false;
if (_ctx.ContextOptions.LazyLoadingEnabled)
{
   _ctx.ContextOptions.LazyLoadingEnabled = false;
   lazyLoadDisabled = true;
}

this.GetEmployeeById(employeeId).CompanyId = null;
this.SaveChanges();

if (lazyLoadDisabled)
{
    _ctx.ContextOptions.LazyLoadingEnabled = true;
} 
```

我真的很好奇为什么禁用延迟加载会更快（以及这可能有哪些副作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:50:57.057

这是 EF POCO 生成器模板中的问题，在某些情况下会导致意外的延迟加载。此模板为导航属性生成修复代码，因此如果您更改一侧的导航属性，它会在内部转到已更改关系的另一端并尝试修复关系以使其保持一致。不幸的是，如果您的相关对象没有加载导航属性，则会触发延迟加载。

你可以做什么：

*   修改模板并删除所有与fixup相关的代码
*   从`Employees`您的`Company`
*   在此操作之前关闭延迟加载 -`context.ContextOptions.LazyLoadingEnabled = false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:48:43.377

好吧，这很奇怪；另一方面，不是将 companyId 设置为 null；您可以尝试将其从集合中删除。就像是;

```
var company = Repositories.Companies.Include("Employee").FirstOrDefault(s => s.Employee.Any(q => q.EmployeeId == employeeId));
company.Employees.Remove(q => company.Employees.Where(l => l.EmployeeId == employeeId).SingleOrDefault());
Repositories.Commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T15:23:34.033

自动更改检测有问题。

正如 Ladislav Mrnka 所指出的，当您更改关系中涉及的属性时，它会尝试将更改转移到相关实体。

您可以通过在执行该操作时在上下文中禁用自动“更改跟踪”来避免这种情况。

这解释了一个类似的问题及其解决方案：

*   [在 EF 4.1 第 12 部分中使用 DbContext：自动检测更改](http://blogs.msdn.com/b/adonet/archive/2011/02/06/using-dbcontext-in-ef-feature-ctp5-part-12-automatically-detecting-changes.aspx)

这一般解释了 Chaneg 跟踪概念：

*   [更改跟踪](http://msdn.microsoft.com/en-us/library/gg696177%28v=vs.103%29.aspx)

# jquery - 如果在 AJAX 之后实例化，Datepicker 不会选择任何日期

> ID：10620967
> 
> 赞同：1
> 
> 时间：2012-05-16T14:42:47.057
> 
> 标签：jquery, jquery-ui, datepicker

确实发现了一个奇怪的错误。

Datepicker 按预期正常工作，直到我通过 AJAX 加载一个对象，*然后*将 datepicker 附加到它，如下所示：

```
 $(".object").datepicker({
    showOn: 'both',
    buttonImage: '/images/icons/silk/calendar.png',
    dateFormat: "mm/dd/yy",
    changeMonth: true,
    changeYear: true,
    buttonImageOnly: true,
    yearRange: "2010:2030"
    onSelect: function(dateText, inst) {
      console.log('this was tapped.');
      console.log(dateText);
      console.log(inst);
    }
    }) 
```

如果我单击输入或图标，则会弹出日期选择器。但是如果我选择任何东西，日期选择器就会关闭，并且我输入的日期不会改变。

**更新**

甚至更陌生。我更新了`console.log`上面的调用，它们都**正常**返回。然而，我输入的日期并没有改变。

**更新**

我认为这里可能发生的情况是页面上有几个具有相同唯一 ID 的常见 div，因为它是一种可自我克隆的形式。

**更新**

这是在 JSFiddle 中重新创建的错误：http: [//jsfiddle.net/vMhrg/](http://jsfiddle.net/vMhrg/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:18:41.267

您的 ID 重复似乎是个问题。ID*不能*使用超过一次页面，考虑添加一个计数器（就像我在固定代码中所做的那样）或者如果可以的话完全删除它。

[http://jsfiddle.net/vMhrg/1/](http://jsfiddle.net/vMhrg/1/)

代码（其他都一样）：

```
<input type="text" value="05/08/2012" size="10" rel="Recurring End Date" name="task[scheduled_at]" id="task_scheduled_at_1" class="date-single-view">

<br />
<br />
<div class="item">
<input type="text" value="05/08/2012" size="10" rel="Recurring End Date" name="task[scheduled_at]" id="task_scheduled_at_2" class="date-single-view">
</div> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:18:14.457

您在 .item 和 .date-single-view 上都调用 datepicker()，它们是 dom 中的嵌套元素（根据下面的小提琴），这可能不是一个好主意 - 在 div 上调用 datepicker**或**一个输入字段，但不能两者兼而有之。

```
<div class="item">
   <input type="text" value="05/08/2012" size="10" rel="Recurring End Date" name="task[scheduled_at]" id="task_scheduled_at" class="date-single-view">
... 
```

# c# - 重定向下载文件的响应

> ID：10620969
> 
> 赞同：2
> 
> 时间：2012-05-16T14:42:54.267
> 
> 标签：c#, javascript, xmlhttprequest

我有一个通用处理程序，我使用这个非常基本的 js 代码调用它：

```
 var formData = new FormData();

    formData.append("fileId", this.model.get("id"));

    xhr = new XMLHttpRequest();

    xhr.open('POST', '/genericHandlers/DownloadFile.ashx');

    xhr.onload = function () {
        if (xhr.status === 200) {
            // Do something here?
        }
    }

    xhr.send(formData); 
```

我的通用处理程序代码对我来说似乎不错。基本上我正在尝试构建响应头，我认为当这个处理程序返回时，它会开始下载文件。

**处理程序代码：**

```
 var fileId = context.Request.Form["fileId"];

   // File stored in the db as a byte array

   var file = (from f in dataContext.OneEVA_Docs_File_Storages
          where Equals(f.ID, fileId)
          select f).FirstOrDefault();

   context.Response.Clear();

   context.Response.AddHeader("Content-Type", file.ContentType);
   context.Response.AddHeader("Content-Length", file.ContentLength.ToString());

   context.Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}; size={1}", file.Name, file.ContentLength));

   context.Response.BinaryWrite(file.File_Image.ToArray());
   context.Response.Flush();

   context.Response.End(); 
```

`XHR`请求正常完成。这是我返回的响应标头：

```
Cache-Control:private
Connection:Close
Content-Disposition:attachment; filename=Mikes File; size=1860113
Content-Length:1860113
Content-Type:image/jpeg
Date:Wed, 16 May 2012 14:08:01 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319 
```

我错过了什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:16:05.180

这不会在浏览器中开始下载。使用 POST 请求很难实现。如果您只传递一个 id，它不能是一个 GET 请求吗？然后你就做

```
document.location.href = '/genericHandlers/DownloadFile.ashx?id=' + this.model.get("id"); 
```

# java - JFreeChart 直方图在缩放时具有恒定数量的 bin

> ID：10620970
> 
> 赞同：1
> 
> 时间：2012-05-16T14:42:59.100
> 
> 标签：java, user-interface, charts, jfreechart, histogram

我想制作一个 JFreeChart 直方图，在放大和缩小时保持恒定数量的 bin。例如，也许缩小后您可以看到 12 年，并且每年会有 1 个 bin。当您再放大一点时，您可能会看到 12 个月，并且每个月都会有一个 bin。进一步放大可能每天、每小时等有 1 个垃圾箱。它们不必是如此干净的垃圾箱大小，但你明白了。

我正在使用[HistogramDataset.addSeries](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/statistics/HistogramDataset.html#addSeries%28java.lang.Comparable,%20double%5B%5D,%20int%29)将我的数据添加到直方图中。该`bins`参数是整个集合的 bin 数量，不考虑缩放。

我观察到我可以使用 ChartPanel 并覆盖它的[缩放](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html#zoom%28java.awt.geom.Rectangle2D%29)方法。在这里，我可能会改变垃圾箱的数量。但是，我很难弄清楚在哪里可以更改垃圾箱的数量以及应该将其更改为什么。

编辑：

我对这个问题的几个部分感兴趣，我认为这些部分对解决方案至关重要：

1.  如何最好地告诉用户已缩放。我目前的方法是覆盖`zoom`.
2.  如何确定用户缩放到的范围。我仍然不确定该怎么做。
3.  如何更改数据模型中的 bin 数量，以便缩放保持**显示**的bin 数量相同。

在某些情况下，我的最终目标是创建一个 Google 财务样式控件： [Java 的 Google 财务样式控件？](https://stackoverflow.com/questions/10600663/google-finance-style-control-for-java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T18:40:20.480

重载缩放功能很吸引人，但可能令人困惑。作为替代方案，请考虑添加一个更新数据模型的控件，如本[示例](https://stackoverflow.com/a/5522583/230513)所示。an 的实例`enum`对于填充 a 特别方便`JComboBox`，如下[所示](https://stackoverflow.com/a/5663782/230513)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:54:46.633

要回答我上面的个人问题：

1.  我继续覆盖`ChartPanel`类的缩放。
2.  为了确定用户缩放到的范围，我使用了下面的`windowToRatio`and`ratioToModel`函数，因为缩放函数给出了窗口坐标。
3.  为了更改 bin 的数量，我实际上保持 bin 的数量相同，只是更改了传递到图表中的数据集。我`SortedMap`为我的数据模型使用了一个我可以很容易地从中获取 subMap 的数据模型。

功能：

```
private double windowToRatio(double window) {
    Rectangle2D scaledDataArea = getScreenDataArea();
    return (window - scaledDataArea.getMinX()) / scaledDataArea.getWidth();
}

private double ratioToModel(double ratio) {
    Range domainRange = getChart().getXYPlot().getDomainAxis().getRange();
    return domainRange.getLowerBound() + ratio * domainRange.getLength();
} 
```

# twitter-bootstrap - 如何在我的流星 .less 文件中使用 .border-radius(10px) 之类的 twitter bootstrap mixins？

> ID：10620973
> 
> 赞同：9
> 
> 时间：2012-05-16T14:43:05.640
> 
> 标签：twitter-bootstrap, less, meteor

这是我`main.less`在我的流星应用程序中的文件，我已经添加了`bootstrap`包。

```
@import "variables.less";
@import "mixins.less";

#searchbar {
  .border-radius(10px);
  .box-shadow();
} 
```

但是打开应用程序`http://localhost:3000/`，我得到这个错误：

```
Your app is crashing. Here's the latest log.

Errors prevented startup:
/Users/anup/code/projects/learning/main.less: Less compiler error: .border-radius is undefined
/Users/anup/code/projects/learning/main.less: Less compiler error: .border-radius is undefined
Your application is crashing. Waiting for file change. 
```

而`.span4`,`.dropdown`和所有其他引导类在我的源代码中工作得很好`main.html`（它也在基本目录中，以及`main.less`）

如何在 中使用 bootstrap mixins `main.less`？

更新：令人惊讶的是，如果我把它放进去`main.less`

```
@import "variables.less";
@import "mixins.less";

#searchbar {
} 
```

然后错误变为

```
Your app is crashing. Here's the latest log.

Errors prevented startup:
/Users/anup/code/projects/learning/main.less: Less compiler error: 'variables.less' wasn't found.

/Users/anup/code/projects/learning/main.less: Less compiler error: 'variables.less' wasn't found.

Your application is crashing. Waiting for file change. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:00:54.977

Twitter bootstrap 3 中没有`border-radius`mixin。`mixins.less`仅包含以下内容：

```
// Single side border-radius
.border-top-radius(@radius) {
  border-top-right-radius: @radius;
   border-top-left-radius: @radius;
}
.border-right-radius(@radius) {
  border-bottom-right-radius: @radius;
     border-top-right-radius: @radius;
}
.border-bottom-radius(@radius) {
  border-bottom-right-radius: @radius;
   border-bottom-left-radius: @radius;
}
.border-left-radius(@radius) {
  border-bottom-left-radius: @radius;
     border-top-left-radius: @radius;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T01:07:47.040

Meteor Bootstrap 包只包含编译后的 CSS 代码，没有任何 Less 文件。这使得你不需要依赖 Less 包来使用 Bootstrap 包，但不幸的是，你没有在自己的 Less 文件中获得所有的 Less 混合和细节。如果你想使用这些，那么你应该删除 Bootstrap 包，使用 Less Meteor 包并将 Bootstrap Less 模板、JS 文件和 img 文件复制到你的应用程序`public`或`client`文件夹中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-23T15:31:52.847

我通过使用为此目的构建的meterorite项目[bootstrap3-less解决了同样的问题。](https://github.com/zeroasterisk/bootstrap3-less/wiki/How-To-Use-Bootstrap3-less-in-Meteor)

# node.js - RabbitMQ / AMQP：单个队列，同一消息的多个消费者？

> ID：10620976
> 
> 赞同：187
> 
> 时间：2012-05-16T14:43:08.350
> 
> 标签：node.js, messaging, rabbitmq, amqp, node-amqp

我刚开始使用 RabbitMQ 和 AMQP。

*   我有一个消息队列
*   我有多个消费者，我想用**相同的消息**做不同的事情。

大多数 RabbitMQ 文档似乎都集中在循环，即单个消费者使用单个消息，负载在每个消费者之间分散。这确实是我目睹的行为。

一个例子：生产者有一个队列，每 2 秒发送一次消息：

```
var amqp = require('amqp');
var connection = amqp.createConnection({ host: "localhost", port: 5672 });
var count = 1;

connection.on('ready', function () {
  var sendMessage = function(connection, queue_name, payload) {
    var encoded_payload = JSON.stringify(payload);  
    connection.publish(queue_name, encoded_payload);
  }

  setInterval( function() {    
    var test_message = 'TEST '+count
    sendMessage(connection, "my_queue_name", test_message)  
    count += 1;
  }, 2000) 

}) 
```

这是一个消费者：

```
var amqp = require('amqp');
var connection = amqp.createConnection({ host: "localhost", port: 5672 });
connection.on('ready', function () {
  connection.queue("my_queue_name", function(queue){
    queue.bind('#'); 
    queue.subscribe(function (message) {
      var encoded_payload = unescape(message.data)
      var payload = JSON.parse(encoded_payload)
      console.log('Recieved a message:')
      console.log(payload)
    })
  })
}) 
```

如果我启动消费者两次，**我可以看到每个消费者都在循环行为中消费替代消息。例如，我将在一个终端中看到消息 1、3、5，在另一个终端中看到 2、4、6**。

我的问题是：

*   我可以让每个消费者收到相同的消息吗？即，两个消费者都收到消息 1、2、3、4、5、6？这在 AMQP/RabbitMQ 中叫什么？一般是怎么配置的？

*   这通常是这样做的吗？我是否应该让交换将消息路由到两个单独的队列中，而只有一个消费者？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-16T15:14:13.767

**我可以让每个消费者收到相同的消息吗？即，两个消费者都收到消息 1、2、3、4、5、6？这在 AMQP/RabbitMQ 中叫什么？一般是怎么配置的？**

不，如果消费者在同一个队列中，则不会。来自 RabbitMQ 的[AMQP 概念](http://www.rabbitmq.com/tutorials/amqp-concepts.html)指南：

> 重要的是要了解，在 AMQP 0-9-1 中，消息在消费者之间是负载平衡的。

这似乎意味着**队列中的循环行为是给定的**，并且不可配置。即，为了让多个消费者处理相同的消息 ID，需要单独的队列。

**这通常是这样做的吗？我是否应该让交换将消息路由到两个单独的队列中，而只有一个消费者？**

不，不是，单个队列/多个消费者，每个消费者处理相同的消息 ID 是不可能的。让交换将消息路由到两个单独的队列中确实更好。

因为我不需要太复杂的路由，所以**扇出交换**会很好地处理这个问题。我之前并没有过多关注 Exchange，因为 node-amqp 具有“默认交换”的概念，允许您直接将消息发布到连接，但是大多数 AMQP 消息都会发布到特定的交换。

这是我的扇出交换，发送和接收：

```
var amqp = require('amqp');
var connection = amqp.createConnection({ host: "localhost", port: 5672 });
var count = 1;

connection.on('ready', function () {
  connection.exchange("my_exchange", options={type:'fanout'}, function(exchange) {   

    var sendMessage = function(exchange, payload) {
      console.log('about to publish')
      var encoded_payload = JSON.stringify(payload);
      exchange.publish('', encoded_payload, {})
    }

    // Recieve messages
    connection.queue("my_queue_name", function(queue){
      console.log('Created queue')
      queue.bind(exchange, ''); 
      queue.subscribe(function (message) {
        console.log('subscribed to queue')
        var encoded_payload = unescape(message.data)
        var payload = JSON.parse(encoded_payload)
        console.log('Recieved a message:')
        console.log(payload)
      })
    })

    setInterval( function() {    
      var test_message = 'TEST '+count
      sendMessage(exchange, test_message)  
      count += 1;
    }, 2000) 
 })
}) 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-09-14T01:17:02.517

最后几个答案几乎是正确的——我有大量的应用程序会生成消息，这些消息需要最终到达不同的消费者，所以这个过程非常简单。

如果您希望多个消费者接收同一条消息，请执行以下过程。

创建多个队列，一个用于接收消息的每个应用程序，在每个队列属性中，将路由标记与 amq.direct 交换“绑定”。更改您的发布应用程序以发送到 amq.direct 并使用路由标签（不是队列）。AMQP 然后将消息复制到具有相同绑定的每个队列中。奇迹般有效 ：）

示例：假设我生成了一个 JSON 字符串，我使用路由标签“new-sales-order”将其发布到“amq.direct”交换，我有一个用于打印订单的 order_printer 应用程序的队列，我有一个排队等待我的计费系统，它将向客户发送订单副本并向客户开具发票，我有一个网络存档系统，我出于历史/合规原因存档订单，我有一个客户端网络界面，可以在其他信息进入时跟踪订单订单。

所以我的队列是：order_printer、order_billing、order_archive 和 order_tracking 都绑定了绑定标签“new-sales-order”，所有 4 个都将获取 JSON 数据。

这是在发布应用不知道或关心接收应用的情况下发送数据的理想方式。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-05-16T15:11:01.927

只需阅读[rabbitmq 教程](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)。您发布消息以进行交换，而不是排队；然后将其路由到适当的队列。在您的情况下，您应该为每个消费者绑定单独的队列。这样，他们可以完全独立地使用消息。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-16T15:08:40.340

是的，每个消费者都可以收到相同的消息。看看 [http://www.rabbitmq.com/tutorials/tutorial-three-python.html](http://www.rabbitmq.com/tutorials/tutorial-three-python.html) http://www.rabbitmq.com/tutorials/tutorial-four-python.html [http://www.rabbitmq。 com/tutorials/tutorial-5-python.html](http://www.rabbitmq.com/tutorials/tutorial-five-python.html)

用于路由消息的不同方式。我知道它们适用于 python 和 java，但理解原理、决定你在做什么然后找到如何在 JS 中执行它很好。听起来您想做一个简单的扇出（[教程 3](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)），它将消息发送到连接到交换的所有队列。

你在做什么和你想做的区别基本上是你要设置和交换或键入扇出。扇出交换将所有消息发送到所有连接的队列。每个队列都有一个消费者，可以分别访问所有消息。

是的，这很常见，它是 AMPQ 的功能之一。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-16T15:09:31.293

发送模式是一对一的关系。如果你想“发送”给多个接收者，你应该使用 pub/sub 模式。有关详细信息，请参阅[http://www.rabbitmq.com/tutorials/tutorial-three-python.html 。](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-14T10:39:15.443

RabbitMQ / AMQP：单个队列，同一消息和页面刷新的多个消费者。

```
rabbit.on('ready', function () {    });
    sockjs_chat.on('connection', function (conn) {

        conn.on('data', function (message) {
            try {
                var obj = JSON.parse(message.replace(/\r/g, '').replace(/\n/g, ''));

                if (obj.header == "register") {

                    // Connect to RabbitMQ
                    try {
                        conn.exchange = rabbit.exchange(exchange, { type: 'topic',
                            autoDelete: false,
                            durable: false,
                            exclusive: false,
                            confirm: true
                        });

                        conn.q = rabbit.queue('my-queue-'+obj.agentID, {
                            durable: false,
                            autoDelete: false,
                            exclusive: false
                        }, function () {
                            conn.channel = 'my-queue-'+obj.agentID;
                            conn.q.bind(conn.exchange, conn.channel);

                            conn.q.subscribe(function (message) {
                                console.log("[MSG] ---> " + JSON.stringify(message));
                                conn.write(JSON.stringify(message) + "\n");
                            }).addCallback(function(ok) {
                                ctag[conn.channel] = ok.consumerTag; });
                        });
                    } catch (err) {
                        console.log("Could not create connection to RabbitMQ. \nStack trace -->" + err.stack);
                    }

                } else if (obj.header == "typing") {

                    var reply = {
                        type: 'chatMsg',
                        msg: utils.escp(obj.msga),
                        visitorNick: obj.channel,
                        customField1: '',
                        time: utils.getDateTime(),
                        channel: obj.channel
                    };

                    conn.exchange.publish('my-queue-'+obj.agentID, reply);
                }

            } catch (err) {
                console.log("ERROR ----> " + err.stack);
            }
        });

        // When the visitor closes or reloads a page we need to unbind from RabbitMQ?
        conn.on('close', function () {
            try {

                // Close the socket
                conn.close();

                // Close RabbitMQ           
               conn.q.unsubscribe(ctag[conn.channel]);

            } catch (er) {
                console.log(":::::::: EXCEPTION SOCKJS (ON-CLOSE) ::::::::>>>>>>> " + er.stack);
            }
        });
    }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-12T06:59:08.627

我评估你的情况是：

*   我有一个消息队列（您接收消息的来源，我们将其命名为 q111）

*   我有多个消费者，我想用相同的消息做不同的事情。

您的问题是，当此队列接收到 3 条消息时，消息 1 由消费者 A 使用，其他消费者 B 和 C 使用消息 2 和 3。您需要设置 rabbitmq 传递相同副本的地方所有这三个消息（1,2,3）同时发送给所有三个连接的消费者（A，B，C）。

虽然可以进行许多配置来实现这一点，但一种简单的方法是使用以下两步概念：

*   使用动态rabbitmq-shovel 从所需队列（q111）中提取消息并发布到扇出交换（专门为此目的创建和专用的交换）。
*   现在重新配置您的消费者 A、B 和 C（他们正在收听队列（q111））以使用每个消费者的专有和匿名队列直接收听此 Fanout 交换。

**注意：当使用这个概念时，不要直接从源队列（q111）消费，因为已经消费的消息不会被铲到你的 Fanout 交换中。**

如果您认为这不能满足您的确切要求...请随时发表您的建议 :-)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-11-04T18:46:19.557

我认为您应该检查使用**扇出**交换器发送消息。这样，您将在 RabbitMQ 表下为不同的消费者接收相同的消息，为每个新的消费者/订阅者创建不同的队列。

[这是在 javascript https://www.rabbitmq.com/tutorials/tutorial-one-javascript.html](https://www.rabbitmq.com/tutorials/tutorial-one-javascript.html)中查看教程示例的链接

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-02T21:46:55.423

如果您碰巧像我一样使用[amqplib库，那么他们有一个](https://github.com/squaremo/amqp.node)[方便](https://github.com/squaremo/amqp.node/tree/master/examples/tutorials#tutorial-three-publishsubscribe)的[发布/订阅 RabbitMQ 教程](http://www.rabbitmq.com/tutorials/tutorial-three-python.html)实现示例，您可能会发现它很方便。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-01T20:11:57.867

要获得您想要的行为，只需让每个消费者从自己的队列中消费。您必须使用非直接交换类型（主题、标头、扇出）才能一次将消息发送到所有队列。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-06T12:29:21.893

扇出显然是你想要的。`fanout`

阅读rabbitMQ教程： [https ://www.rabbitmq.com/tutorials/tutorial-three-javascript.html](https://www.rabbitmq.com/tutorials/tutorial-three-javascript.html)

这是我的例子：

Publisher.js：

```
amqp.connect('amqp://<user>:<pass>@<host>:<port>', async (error0, connection) => {
    if (error0) {
      throw error0;
    }
    console.log('RabbitMQ connected')
    try {
      // Create exchange for queues
      channel = await connection.createChannel()
      await channel.assertExchange(process.env.EXCHANGE_NAME, 'fanout', { durable: false });
      await channel.publish(process.env.EXCHANGE_NAME, '', Buffer.from('msg'))
    } catch(error) {
      console.error(error)
    }
}) 
```

订阅者.js：

```
amqp.connect('amqp://<user>:<pass>@<host>:<port>', async (error0, connection) => {
    if (error0) {
      throw error0;
    }
    console.log('RabbitMQ connected')
    try {
      // Create/Bind a consumer queue for an exchange broker
      channel = await connection.createChannel()
      await channel.assertExchange(process.env.EXCHANGE_NAME, 'fanout', { durable: false });
      const queue = await channel.assertQueue('', {exclusive: true})
      channel.bindQueue(queue.queue, process.env.EXCHANGE_NAME, '')

      console.log(" [*] Waiting for messages in %s. To exit press CTRL+C");
      channel.consume('', consumeMessage, {noAck: true});
    } catch(error) {
      console.error(error)
    }
}); 
```

这是我在互联网上找到的一个例子。也许也可以提供帮助。 [https://www.codota.com/code/javascript/functions/amqplib/Channel/assertExchange](https://www.codota.com/code/javascript/functions/amqplib/Channel/assertExchange)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-12-13T12:26:08.767

在这种情况下，我在这里的答案中没有找到一个有趣的选项。

您可以在一个消费者中使用“重新排队”功能对消息进行 Nack，以便在另一个消费者中处理它们。一般来说，这不是正确的方法，但也许对某人来说已经足够了。

[https://www.rabbitmq.com/nack.html](https://www.rabbitmq.com/nack.html)

并当心循环（当所有消费者 nack+requeue 消息时）！

# c++ - 如何在 CppUnit 中漂亮地打印 STL 数据结构？

> ID：10620980
> 
> 赞同：3
> 
> 时间：2012-05-16T14:43:20.957
> 
> 标签：c++, stl, iostream, cppunit

我正在尝试使用以下代码漂亮地打印 STL 数据结构以检查 CppUnit 测试结果

```
#include <iostream>
#include <utility>
#include <map>
#include <sstream>
template<class S,class T>
std::ostream& operator<<(std::ostream & o, const std::pair<S,T> & p){
      return o << "(" << p.first << ", " << p.second << ")";
}

template<class K, class V>  
std::ostream& operator<<(std::ostream& o, const std::map<K,V> & m){ 
    o << "{ ";
    for(auto it=m.begin();it!=m.end();it++){ 
       o << "{" << it->first <<": " << it->second << "} ";
    }   
    o << " }";
    return o;
} 
```

但是当我在一些测试中使用这个包含文件时，比如

```
auto a = std::map<int,int>();
auto b = std::map<int,int>();
CPPUNIT_ASSERT_EQUAL(a,b); 
```

我收到以下错误：

```
In file included from /usr/include/cppunit/TestCase.h:6:0,
                 from /usr/include/cppunit/TestCaller.h:5,
                 from /usr/include/cppunit/extensions/HelperMacros.h:9,
                 from /home/tcebrian/GIT/compress-sn/test/GraphTest.cpp:1:
/usr/include/cppunit/TestAssert.h: In static member function 'static std::string CppUnit::assertion_traits<T>::toString(const T&) [with T = std::map<int, int>, std::string = std::basic_string<char>]':
/usr/include/cppunit/TestAssert.h:101:5:   instantiated from 'void CppUnit::assertEquals(const T&, const T&, CppUnit::SourceLine, const string&) [with T = std::map<int, int>, std::string = std::basic_string<char>]'
/home/tcebrian/GIT/compress-sn/test/GraphTest.cpp:44:9:   instantiated from here
/usr/include/cppunit/TestAssert.h:49:9: error: cannot bind 'std::basic_ostream<char>' lvalue to 'std::basic_ostream<char>&&'
/usr/include/c++/4.6/ostream:581:5: error:   initializing argument 1 of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char, _Traits = std::char_traits<char>, _Tp = std::map<int, int>]'
make[3]: *** [CMakeFiles/UnitTester.dir/test/GraphTest.cpp.o] Error 1
make[3]: Leaving directory `/home/tcebrian/GIT/compress-sn/dist/Debug'
make[2]: *** [CMakeFiles/UnitTester.dir/all] Error 2
make[2]: Leaving directory `/home/tcebrian/GIT/compress-sn/dist/Debug'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/home/tcebrian/GIT/compress-sn/dist/Debug'
make: *** [debug] Error 2 
```

但是代码在这个简单的片段中完全有效：

```
#include <TestUtils.hpp>
#include <map>
#include <utility>
int main(int argc, const char *argv[])
{
    std::cout << std::pair<int,int>() << std::endl;
    std::cout << std::map<int,int>() << std::endl;
    return 0;
} 
```

CppUnit 在做什么来阻止漂亮地打印数据结构？您如何使用 CppUnit 进行漂亮的打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:44:46.377

我不确定您为什么会收到该特定错误（不知何故，它认为他们对 << 运算符的使用被定义为对 std::ostream 进行右值引用），但看起来推荐的方法可能是专门化CppUnit::assertion_traits 模板，如[TestAssert.h 所示](http://cppunit.svn.sourceforge.net/viewvc/cppunit/trunk/cppunit/include/cppunit/TestAssert.h?revision=582&view=markup)。像这样的东西：

```
namespace CppUnit{
    template<class X, class Y>
    struct assertion_traits<std::pair<X,Y>>{
        static bool equal(const std::pair<X,Y> &a, const std::pair<X,Y> &b){
            return a == b;
        }
        static std::string toString(const std::pair<X,Y> &p){
            std::ostringstream o;
            o << "(" << p.first << ", " << p.second << ")";
            return o.str();
        }
    };
} 
```

# c++ - 在 C++ 中使用 OpenCV 2.4 计算凸度缺陷

> ID：10620981
> 
> 赞同：4
> 
> 时间：2012-05-16T14:43:22.763
> 
> 标签：c++, ios, opencv

我正在使用 OpenCV 2.4 来计算图像的凸包。

我也在做一些处理以消除图像中的一些噪声，这与问题并不真正相关。

计算convexHull的代码如下：

```
...
cv::Mat sourceImage; // assume something is already here please
cv::vector<cv::Vec4i> hierarchy;    
std::vector<std::vector<cv::Point> > contours;

cv::findContours( sourceImage, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE,cv::Point(0, 0));

// Find the convex hull object for each contour
vector<cv::vector<cv::Point> >hull( contours.size() );

for (int i = 0; i < contours.size(); i++)
{
    convexHull( contours[i], hull[i], false );
}
... 
```

拥有convexHull和轮廓我现在想计算hull(s)的convexityDefects，通过查看opencv文档我认为它会是这样的：

```
cv::Vec4i defects;  
convexityDefects(cv::Mat(contours),  hull, defects); 
```

这样做我得到这个错误：

```
OpenCV Error: Assertion failed (ptnum > 3) in convexityDefects, file ./opencv/opencv/modules/imgproc/src/contours.cpp, line 1969 
```

关于使用convexityDefects时我做错了什么的任何想法？

[Opencv 凸面缺陷文档](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=convexitydefects#cv.ConvexityDefects "Opencv 2.4 ConvexityDefects 文档")

提前致谢。

**更新**

感谢影射的回答，我将主循环代码更新为：

```
std::vector<Vec4i> defects; 
vector<cv::vector<cv::Point> >hull( contours.size() );

for (int i = 0; i < contours.size(); i++)
{  
    convexHull( contours[i], hull[i], false );
    convexityDefects(contours[i], hull[i], defects[i]);
} 
```

使用它，我现在得到的错误是：

```
OpenCV Error: Assertion failed (hull.checkVector(1, CV_32S) > 2) in convexityDefects 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T05:11:53.710

来自 openCV 维基：

> 查找轮廓的凸面缺陷。

所以你应该将它包含在你的循环中。

```
std::vector<Vec4i> defects; 
vector<cv::vector<int> >hull( contours.size() );

for (int i = 0; i < contours.size(); i++)
{  
    convexHull( contours[i], hull[i], false );
    convexityDefects(contours[i], hull[i], defects[i]);
} 
```

另外，正如您提到的，在 wiki 中说：

> **hull** – 输出凸包。它是索引的整数向量或点的向量。在第一种情况下，外壳元素是原始数组中凸包点的基于 0 的索引（因为凸包点集是原始点集的子集）。在第二种情况下，包元素是凸包点本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T16:21:15.413

对于那些没有阅读评论或没有看到评论的人，解决方案是使用：

`vector<cv::vector<int> >hull;`

创建船体而不是：

`vector<cv::vector<Point> >hull;`

因为convexityDefects 仅适用于存储为一系列索引而不是一系列点的外壳。

可悲的是，这带来了另一个问题，因为 drawContours 仅绘制存储为一系列点而不是一系列索引的轮廓！因此，如果您想在稍后阶段绘制船体，您可能希望在查找船体时创建 2 个商店，一个用于绘图，一个用于从中查找缺陷。类似于以下作品的内容：

```
 // create storage space
  vector<vector<int> > hullsI(contours.size());
  vector<vector<Point> > hullsP(contours.size());
  vector<vector<Vec4i> > defects(contours.size());

  for(int i = 0; i <contours.size(); ++i){
     //find the hulls
     convexHull(contours[i], hullsI[i], true);
     convexHull(contours[i], hullsP[i], true);
     //find the defects  
     convexityDefects(contours[i], hullsI[i], defects[i]);
     } 
```

使用不同的方法来绘制船体而不是计算两次可能更有效，但这是我看到的最优雅的方法。

此外，我自己（Java 人）仍然掌握 C/C++ 的窍门，但我相信如果您添加`using namespace cv`到代码的顶部，您可以省去在整个代码中使用 cv:: 的麻烦。

希望我没有踩脚趾影射，如果我有的话，根本不是我的意图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T10:37:36.323

我遇到了上面提到的问题，但最后我写了正确的:)

```
vector<vector<Point>> hull( contours.size() );
vector<vector<int> > hullsI(contours.size());
vector<vector<Vec4i>> convdefect(contours.size());

for( int i = 0; i < contours.size(); i++ )
{ 
    convexHull( Mat(contours[i]), hull[i], false);
    convexHull( Mat(contours[i]), hullsI[i], false);        
    if(hullsI[i].size() > 3 )
        convexityDefects(contours[i],hullsI[i],convdefect[i]);
}
/// Draw contours + hull results
Mat drawing = Mat::zeros( threshold_output.size(), CV_8UC3 );
for( int i = 0; i< contours.size(); i++ )
{
    size_t count = contours[i].size();
    if( count <300 )
        continue;

    //Scalar color = Scalar( rng.uniform(0, 255), rng.uniform(0,255), rng.uniform(0,255));
    drawContours( drawing, contours, i, Scalar(255,0,0), 1, 8, vector<Vec4i>(), 0, Point());
    drawContours( drawing, hull, i, Scalar(0,0,255), 1, 8, vector<Vec4i>(), 0, Point());
}

/// Draw convexityDefects
for( int i = 0; i< contours.size(); i++ )
{
    size_t count = contours[i].size();
    if( count <300 )
        continue;

    vector<Vec4i>::iterator d=convdefect[i].begin();
    while( d!=convdefect[i].end() ) {
        Vec4i& v=(*d);
        int startidx=v[0]; Point ptStart( contours[i][startidx] );
        int endidx=v[1]; Point ptEnd( contours[i][endidx] );
        int faridx=v[2]; Point ptFar( contours[i][faridx] );
        float depth = v[3] / 256;

        line( drawing, ptStart, ptEnd, Scalar(0,255,0), 1 );
        line( drawing, ptStart, ptFar, Scalar(0,255,0), 1 );
        line( drawing, ptEnd, ptFar, Scalar(0,255,0), 1 );
        circle( drawing, ptFar,   4, Scalar(0,255,0), 2 );
        d++;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T12:36:24.340

在向我提出解决方案之前，我一直有同样的错误。`contours[i]`只需在调用 convexityDefects 之前检查大小

```
/// Find the convex hull object for each contour
vector<vector<int> > hullsI(contours.size());
vector<vector<Point> > hullsP(contours.size());
vector<vector<Vec4i> > defects(contours.size());

for(int i = 0; i <contours.size(); ++i){
    //find the hulls
    convexHull(contours[i], hullsI[i], false, false);
    convexHull(contours[i], hullsP[i], false, true);
    //find the defects
    if (contours[i].size() >3 )
    {
        convexityDefects(contours[i], hullsI[i], defects[i]);            
    }

} 
```

希望能帮助到你 ：）

# sql-server - 如何使用 sp_executesql 阻止 SSMS 2012 编写 SP

> ID：10620984
> 
> 赞同：22
> 
> 时间：2012-05-16T14:43:30.383
> 
> 标签：sql-server, ssms

我意识到这是一个非常类似于[Stop SSMS from scripting SPs using sp_executesql?](https://stackoverflow.com/questions/1263588/stop-ssms-from-scripting-sps-using-sp-executesql)

然而，他们似乎改变了 SSMS 2012 的行为。

如果您选择了“检查存在”选项，如下所示：

![在此处输入图像描述](../Images/d4676e1c9ddbd5854ce36fd136557932.png)

...它现在为即将创建的 proc 生成一个 IF NOT EXISTS，**以及**为前一个 drop proc 生成一个 IF EXISTS，如果像我通常做的那样，我选择 DROP and CREATE 选项：

![在此处输入图像描述](../Images/0d59a977068e80933b7e117b7d86b5c9.png)

这会强制它使用 sp_executesql 编写 CREATE 脚本。这是没有意义的，因为如果 DROP 刚刚删除了它，则不需要对 CREATE 进行 IF NOT EXISTS 检查。

似乎不可能有一个没有另一个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T14:55:00.800

如果没有动态 SQL，您将无法做到这一点，因为存储过程必须在其自己的批处理中。因此你不能说：

```
IF <some condition>
  <start a new batch> 
```

将其保存在同一批次中的唯一方法是使用`sp_executesql`.

如果您要同时编写 and 脚本`DROP`，`CREATE`只需在不检查对象存在的情况下执行此操作。这会给你：

```
DROP PROCEDURE ...;
GO
CREATE PROCEDURE ...;
GO 
```

谁在乎是否`DROP`失败？（不应该，因为您只是根据它编写了脚本！）

如果您正在为另一个*可能*有该对象的系统编写脚本，您将在没有该对象时收到一条错误消息`DROP`，但`CREATE`仍然会发生，因此您可以忽略这些`DROP`错误。如果你真的想要，你可以手动包装`DROP`语句，`TRY/CATCH`但我认为没有必要。

如果您需要为很多程序执行此操作，或者如果您确实需要该过程不产生良性错误，我建议您放弃 Management Studio 的原始脚本选项并为此使用第 3 方工具。他们已经处理了许多您还没有遇到的问题，但会。我在博客上写过这个：

[http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T14:48:19.813

最接近此功能的是进入工具、选项、SQL Server 对象资源管理器、脚本，然后将检查对象存在设置为 false。

缺点是如果你这样做，那么即使对象不存在，drop 和 created 也将始终尝试 drop。理想的解决方案是允许您的脚本类似于以下示例的设置，用于创建视图、过程和用户​​定义的函数。

```
/****** Object:  View [dbo].[vEmployees]    Script Date: 9/14/2012 9:18:57 AM ******/
IF  EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[vEmployees]'))
DROP VIEW [dbo].[vEmployees]
GO

CREATE VIEW [dbo].[vEmployees]
AS
    SELECT DISTINCT
        Employees.EmployeeID,
        FirstName,
        LastName
    from
        Employees
            JOIN Sales on Employees.EmployeeID=Sales.EmployeeID
GO 
```

简而言之，如果脚本引擎在检查对象是否存在时同时考虑删除和创建，则不需要将条件放在创建上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-31T16:27:04.647

我找到了解决这个问题的好方法。编写脚本时必须进行“两次通过”。在第一次通过时，选择检查存在和仅用于 DROP 脚本的选项。然后，在第二次通过时，取消选择 Check for Existence 选项并选择 CREATE 脚本。此外，使用附加到文件选项。然后在第二遍运行生成脚本时，取消选中“覆盖文件”选项。这仅在您为每个对象生成单独的文件时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T22:07:11.207

我也为同样的问题而苦苦挣扎。如果您需要为整个数据库编写对象脚本，您可能需要考虑 ApexSQL 脚本。我尝试了几种工具，ApexSQL 完全按照我的需要编写了对象脚本。（如果对象存在，则删除。创建对象）。我相信它也可以从命令行工作。注意，它是共享软件；我只使用了评估版，因为我只需要它几次。

下面是一些配置后过程的输出示例。

```
IF (EXISTS(SELECT * FROM sys.objects WHERE [object_id] = OBJECT_ID(N'[dbo].[myProcedure]') AND [type]='P'))
DROP PROCEDURE [dbo].[myProcedure]
GO

SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE dbo.myProcedure
AS
    select 1 as a
GO 
```

# c++ - 使用 VSS 选择性地还原文件

> ID：10620988
> 
> 赞同：2
> 
> 时间：2012-05-16T14:43:58.383
> 
> 标签：c++, windows, filesystems, driver, volume-shadow-service

我想编写一个应用程序来监视由“客户端”应用程序（及其所有进程）修改的文件，并在客户端应用程序执行完成后将它们恢复到原始状态。这可以使用卷影服务来实现，还是我应该编写一个文件系统过滤器驱动程序，因为我似乎需要编写一个驱动程序来确定特定进程访问了哪些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T05:59:05.343

为了能够基于每个进程监视文件，您需要一个文件系统过滤器驱动程序。在用户模式下监视文件更改的其他方法是使用 API *FindFirstChangeNotification*、*FindNextChangeNotification*和*ReadDirectoryChangesW*

# c# - 加载程序集并运行方法

> ID：10620990
> 
> 赞同：0
> 
> 时间：2012-05-16T14:44:16.537
> 
> 标签：c#, reflection

我想加载一个程序集（`dll-test.dll`），并运行该方法`GetLabel`：

```
namespace Dlltest.Test
{
    public class Main
    {
        public string GetLabel()
        {
            string test = "TestString";
            return test;
        }
    }
} 
```

我有以下代码但是我无法运行`GetLabel`：

```
Assembly assembly = Assembly.LoadFile(@"C:\dll-test.dll");
Type type = assembly.GetType();
var obj = Activator.CreateInstance(type);

var result = type.InvokeMember("GetLabel",
                              BindingFlags.Default | BindingFlags.InvokeMethod,
                              null,
                              obj,
                              null);

MessageBox.Show(result.ToString); 
```

它应该显示一个带有`TestString`.

**编辑**

我最终使它与：

```
Assembly assembly = Assembly.LoadFile(@"C:\dll-test.dll");
var type = assembly.GetTypes();
var obj = Activator.CreateInstance(type[0]);

var result = type[0].InvokeMember("GetLabel",
                          BindingFlags.Default | BindingFlags.InvokeMethod,
                          null,
                          obj,
                          null);

MessageBox.Show(result.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:48:04.543

排队

```
Type type = assembly.GetType(); 
```

您正在分配`assembly`变量类型而不是您想要的类型。试试`assembly.GetType(type_name)`。此外，将“GetGabel”更改为“GetLabel”:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T14:48:30.740

尝试

```
Type type = assembly.GetType("MyType");
if(temp == null) throw new InvalidOperationException();
//... 
```

# marklogic - 使用 Record Loader 加载数据时如何更改元素名称？

> ID：10620996
> 
> 赞同：0
> 
> 时间：2012-05-16T14:44:33.363
> 
> 标签：marklogic

我有以下xml：-

```
<?xml version="1.0" encoding="UTF-8"?>
<patent-assignment>
  <assignment-record>
    <correspondent>
      <name>NORTH AMERICA INTERNATIONAL PATENT OFFIC</name>
      <address-1>P.O. BOX 506</address-1>
      <address-2>MERRIFIELD, VA 22116</address-2>
    </correspondent>
   </assignment-record>
  <patent-assignors>
    <patent-assignor>
      <name>TSAI, YU-WEN</name>
      <execution-date>
    <date>20050331</date>
      </execution-date>
    </patent-assignor>
    <patent-assignor>
      <name>HUANG, CHENG-I</name>
      <execution-date>
    <date>20050331</date>
      </execution-date>
    </patent-assignor>
  </patent-assignors>
  <patent-assignees>
    <patent-assignee>
      <name>FARADAY TECHNOLOGY CORP.</name>
      <address-1>NO.10-2, LI-HSIN ROAD 1, SCIENCE-BASED INDUSTRIAL PARK</address-1>
      <city>HSIN-CHU CITY</city>
      <country-name>TAIWAN</country-name>
    </patent-assignee>
  </patent-assignees>
 </patent-assignment> 
```

现在在将文档加载到 Marklogic 时，我想将专利转让人的元素名称更改为转让人名称，将专利受让人的元素名称更改为受让人名称，但我想使用 Record Loader 而不是 Marklogic 的 Information Studio 加载数据。如何使用 Record Loader 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:46:07.937

您将需要设置`CONTENT_FACTORY_CLASSNAME=com.marklogic.recordloader.xcc.XccModuleContentFactory`和编写一个 XQuery 模块来实现内容模块。在[http://marklogic.github.com/recordloader/](http://marklogic.github.com/recordloader/)有一个示例模块，您可以对其进行自定义。您的转换代码将进入`local:do()`函数，替换示例“小写元素本地名称”代码：

```
xquery version "1.0-ml";

declare variable $URI as xs:string external;
declare variable $XML-STRING as xs:string external;
declare variable $NAMESPACE as xs:string external;
declare variable $LANGUAGE as xs:string external;
declare variable $ROLES-EXECUTE as xs:string external;
declare variable $ROLES-INSERT as xs:string external;
declare variable $ROLES-READ as xs:string external;
declare variable $ROLES-UPDATE as xs:string external;
declare variable $COLLECTIONS as xs:string external;
declare variable $SKIP-EXISTING as xs:boolean external;
declare variable $ERROR-EXISTING as xs:boolean external;
declare variable $FORESTS as xs:string external;

declare function local:do($list as node()*)
 as node()*
{
  for $n in $list return typeswitch($n)
  (: lower-case element localnames :)
  case element() return element {
    QName(namespace-uri($n), lower-case(local-name($n)))
  } {
    $n/@*, local:do($n/node())
  }
  case document-node() return document { local:do($n/node()) }
  default return $n
};

if ($SKIP-EXISTING and doc($URI)) then ()
else if ($ERROR-EXISTING and doc($URI)) then error((), 'DUPLICATE-URI', $URI)
else xdmp:document-insert(
  $URI,
  local:do(xdmp:unquote(
    $XML-STRING,
    $NAMESPACE,
    if ($LANGUAGE) then concat('default-language=', $LANGUAGE) else ()
  )),
  (
    for $r in tokenize($ROLES-EXECUTE, ',')[. ne '']
    return xdmp:permission('execute', $r),
    for $r in tokenize($ROLES-INSERT, ',')[. ne '']
    return xdmp:permission('insert', $r),
    for $r in tokenize($ROLES-READ, ',')[. ne '']
    return xdmp:permission('read', $r),
    for $r in tokenize($ROLES-UPDATE, ',')[. ne '']
    return xdmp:permission('update', $r)
  ),
  tokenize($COLLECTIONS, ',')[. ne ''],
  0,
  for $id in tokenize($FORESTS, ',')[. ne '']
  return xs:unsignedLong($id)
) 
```

# visual-studio-2010 - 您如何在 Visual Basic 2010 中编写打字机效果？

> ID：10620997
> 
> 赞同：0
> 
> 时间：2012-05-16T14:44:33.847
> 
> 标签：visual-studio-2010

我正在创建一个视频游戏，我需要一次显示一个字符，而互联网的其余部分几乎没有帮助，因为它们适用于我一无所知的旧版本的 Visual Basic。

这是我的错误代码：

```
Dim outfile As IO.StreamWriter
Dim infile As IO.StreamReader

Private Sub StartScreen_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim strTitle As String = " "
    Dim strText() As String = {}
    Dim intLoop As Integer = 0

    If IO.File.Exists("save.txt") = False Then
        outfile = IO.File.CreateText("save.txt")
    End If

    infile = IO.File.OpenText("save.txt")
    Do Until infile.Peek = -1
        strText(intLoop) = infile.Read
        System.Threading.Thread.Sleep(1000)
        intLoop += 1
    Loop
    intLoop = 0
    Do While strText.Length <> intLoop
        strTitle = strText(intLoop)
        lblTitle.Text = lblTitle.Text & strTitle
        intLoop += 1
    Loop
    infile.Close()
    outfile.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:59:57.933

首先 - 除了你的主要问题 - 看来你`Thread.Sleep`是在错误的地方。当您将文件读入内存时，您正在睡觉，而不是在将文本复制到“lblTitle”时 - 因此您需要很长时间才能读取文件，然后立即将整个内容复制到 UI 中。这不是您要寻找的效果：读取整个文件，并将延迟放在第二个循环中。

您的表单未显示的原因是您的所有代码都在`_Load`表单的方法中 - 并且在完成之前不会显示表单。因此，相反，您的表单隐藏的秒数与您在文本中的秒数相同。它最终应该会出现，但这不是你想要的效果，我敢肯定！

处理此问题的最直接方法是将所有代码推送到一个单独的方法中，并在后台线程上调用该方法。这将允许您的表单加载和显示，并且后台线程将继续处理您的文本。但是，您需要稍微修改您的代码，因为您无法从后台线程修改您的 UI。查找`Invoke`和/或`BeginInvoke`方法以了解如何解决此问题。

另一种解决方案是取出你的`Thread.Sleep(1000)`，将你的代码移动到一个单独的方法，然后在`Timer`. 计时器可以每秒触发一次并每次添加文本的下一个字符。这可能会产生更清晰的代码，但您可能希望确保立即读取和关闭文件，而不是（就像您现在所做的那样）保持文件锁定直到整个过程完成。

# php - Mysql加入并回显所有行，有条件

> ID：10620999
> 
> 赞同：0
> 
> 时间：2012-05-16T14:44:45.137
> 
> 标签：php, mysql, sql

我需要加入两个表，我已经有了第一个表的代码：

```
$query = "SELECT * FROM civicrm_event"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
$row = mysql_fetch_array($result) or die(mysql_error());
echo $row['title_en_US']. " - ". $row['id'];
echo "<br />"; 
```

我需要将它与另一个名为`civicrm_participant`的，我需要提取的地方加入`contact_id`

选择此表的子句是：

`civicrm_event.id = civicrm_participant.event_id`

然后我需要回显`[title_en_US]` `[id]` `[contact_id]` 帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:49:17.263

[你应该阅读 mysql 中的连接](http://dev.mysql.com/doc/refman/5.0/en/join.html)

做这样的事情：

```
$query = "SELECT ce.title_en_US, ce.id, cp.event_id FROM civicrm_event AS ce JOIN civicrm_participant AS cp ON ce.id=cp.event_id"; 
```