# StackOverflow 问答 11646000-11646999

# c# - 如果一个类中有很多属性，创建默认构造函数的简单方法是什么？

> ID：11646007
> 
> 赞同：1
> 
> 时间：2012-07-25T08:52:39.327
> 
> 标签：c#, .net, constructor

如果我有一个具有很多属性的类，并且我想创建一个具有所有这些属性的构造函数，我必须输入很多。C# 4.0 中是否有更聪明的方法来做到这一点？

```
class MyClass {
  public string A{get;set;}
  public string B{get;set;}
  public string C{get;set;}
  public string D{get;set;}
  public string E{get;set;}
  public string F{get;set;}
  public string G{get;set;}
  //and so on...

  public MyClass(string a, string b, string c /*and so on...*/)
  {
    this.A = a;
    this.B = b;
    this.C = c;
    //...
  }
} 
```

我想强制用户创建一个具有所有属性的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:01:15.277

如果您安装[Resharper](http://www.jetbrains.com)，其中一个重构工具允许您“生成构造函数”，然后向导会为您提供一个属性列表，您可以选择要包含的属性。

不，我与 Jetbrains 没有任何关系，我只是使用 R# 并发现它是一个非常宝贵的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:55:12.690

前段时间我问了一个类似的问题：

[重构大型构造函数](https://stackoverflow.com/questions/7256009/refactoring-large-constructors)

简而言之，没有太多支持让它看起来更好或更容易创建。解决方案永远不会“解决”问题，它们只会将其转移到另一个地方或避开它。

首先要看的是类是否真的需要这么多状态。班级做的太多了吗？它可以分解成更多、更简单的类吗？这并不总是可能的，有时您只是拥有带有大量构造函数参数的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:57:36.467

如果您使用的是 .Net4.0，您可以使用`Named parameters`.

像这样的东西：

```
class Person
    {
        public long Age { get; set; }
        public string Name { get; set; }
        public double Salary { get; set; }

        public Person(int age=22,string name="Ram",int salary=9000)
        {
            Age = age;
            Name = name;
            Salary = salary;
        }
    } 
```

# php - zend_translate 与 mysql 数据库

> ID：11646010
> 
> 赞同：0
> 
> 时间：2012-07-25T08:52:51.573
> 
> 标签：php, zend-framework, zend-db

目前我有一个带有翻译插件的zend应用程序，如下所示

```
class Zc_Controller_Plugin_LangSelector extends Zend_Controller_Plugin_Abstract
{

public function preDispatch(Zend_Controller_Request_Abstract $req)
{

    $lang = $req->getParam('lang','');

    if($lang !== 'en' && $lang !== 'de')
        $req->setParam('lang','en');

    $state = $req->getParam('state');

    $lang = $req->getParam('lang');
    if($lang == 'en')

    $zl = new Zend_Locale();
    $zl->setLocale($locale);
    Zend_Registry::set('Zend_Locale',$zl);

    $translate = new Zend_Translate('csv',APPLICATION_PATH.'/configs/lang/'.$lang.'.csv',$lang);

    Zend_Registry::set('Zend_Translate',$translate);

}
  } 
```

我也在 application.ini 中启用了插件，如下所示

```
resources.frontController.plugins.DetectCountry =    
       "Zc_Controller_Plugin_LangSelector" 
```

我创建了一个名为 lang 的文件夹，并在其中创建了另一个名为 en.csv 和 fr.csv 的 2 个文件。目前翻译是从 .csv 文件中读取的，但我希望翻译从 db 读/写，以便我可以管理直接从 db 添加/删除新的键值字段。谢谢

# sql-server - 减去并以百分位数显示

> ID：11646011
> 
> 赞同：0
> 
> 时间：2012-07-25T08:52:53.713
> 
> 标签：sql-server, tsql

我在 sql server 表中有如下数据：

```
 Slno  Revenue     Data        Loading
   1    8989898     10/07/12    Before Load
   2    2124124     10/07/12    After Load 
```

我想减去这两个值并将结果显示为百分比说“10％”

请帮助正确查询以计算以下内容

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:15:11.837

这可能有效

```
 Declare @Sample Table
 ( SNo int,
   revenue int,
   date datetime,
   Loading varchar(20)
 )

Insert into @Sample
values 
(1, 8989898,'10/07/12','Before Load'),
(2,2124124 ,'10/07/12','After Load')

 SELECT  
((cast(a.revenue as float) - cast(b.revenue as float))/cast(a.revenue as float))*100.0 AS     diff
FROM @Sample a
LEFT OUTER JOIN @Sample b
ON  b.Sno = (a.Sno +1) 
```

如果收入列的数据类型是浮点数，则无需强制转换。编辑 ：

```
 SELECT  
cast(((cast(f.revenue as float) - cast(f2.revenue as float))/cast(f.revenue as float))*100.0 as varchar(max))+'%'
 AS diff
FROM @Sample f
LEFT OUTER JOIN @Sample f2
ON  f2.Sno = (f.Sno +1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:16:14.117

```
select convert(varchar,((t.revenue - tt.revenue)*100)/(t.revenue)) +'%'   as value
from dbo.Table_1 t
inner join dbo.Table_1 tt on tt.data = t.data and t.loading = 'Before Load' and tt.loading = 'After Load' 
```

这是假设在单个日期仅存在一个加载前（和加载后）

# css - 阿拉伯语第一个字符截断问题

> ID：11646015
> 
> 赞同：0
> 
> 时间：2012-07-25T08:53:00.637
> 
> 标签：css, arabic

有谁知道为什么阿拉伯语的第一个字符会在每行换行符或每行的边缘被截断。我在 CSS 中做了很多修改以尝试修复它，但第一个字符仍然不显示，除非您将网站缩放到大约 130%。它是一个使用 Drupal 的多语言站点，但该站点的英文版没有这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:22:20.837

我有同样的问题，我已经通过将字体从 arial 更改为 tahoma 来解决它。我知道这可能不是最终的解决方案，但由于某种原因（我花了很长时间后无法弄清楚）arial 字体导致了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:15:10.543

听起来您可能需要增加包含文本的元素的行高。

显然，如果没有看到任何代码，很难分辨。

# php - 从数据库填充的树视图

> ID：11646023
> 
> 赞同：0
> 
> 时间：2012-07-25T08:53:46.573
> 
> 标签：php, mysql, database, treeview

我一直在试图弄清楚如何使用我遇到的各种示例从数据库中创建一个树视图，但到目前为止还没有成功。

我的数据库结构如下：

`id | parent_id | title | Urgency`（紧迫性尚未落实）

最终结果应该生成一个树状视图，其中紧迫性的值决定了用于每个项目的图像。

我最近尝试使用的代码是：

```
<hmtl>
<body>
<?php

function get_children($parent, $level = 1)
{
$result = mysql_query('SELECT * FROM treeview_items WHERE parent_id = '.$parent);
$result2 = mysql_fetch_array($result, MYSQL_ASSOC);
#for avoiding some errors
if(mysql_num_rows($result) > 0)
    #start the list
    echo '<ul>';
    foreach($result2 as $row) {
        #print the item, you can also make links out of these
        echo '<li>'.$row['title'].'</li>';
        #this is similar to our last code
        #this function calls it self, so its recursive
        get_children($row['id'], $level+1);
    }
    #close the list
echo '</ul>';
}

mysql_connect('localhost', 'root');
mysql_select_db('test');

$result = mysql_query('SELECT * FROM treeview_items');
$result2 = mysql_fetch_array($result, MYSQL_ASSOC);

#for avoiding some errors
if(mysql_num_rows($result) > 0) {
#start the list
echo '<ul>';
foreach($result2 as $row) {
    #print the item, you can also make links out of these
    echo '<li>'.$row['title'].'</li>';
    #recursive function(made in next step) for getting all the subs by passing   
 id of main item
    get_children($row['id']);
}
#end the list
echo '</ul>';
#some message if the database is empty
}
else echo 'No Items';

#clear the memory
mysql_free_result($result);
?>
</body>
<html> 
```

基本上我的代码不起作用。我可以尝试解决什么问题？

## 编辑

我修改了一些代码来修复几个错误所以现在我看到的是：

*   1
*   2
*   5

警告：第 13 行 C:\Program Files\EasyPHP-5.3.9\www\test.php 中为 foreach() 提供的参数无效

重复 100 次，直到它中止。不知道为什么，因为`foreach()`代码中的两者是相同的，但是函数内部的那个不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:47:55.347

函数调用失败的原因是您没有将该代码包装在 PHP 标记中，而是将它们包装在 JS 标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:51:26.547

将`<script...`行替换为`<?php`和`</script>`行`?>`

您在 php 中有服务器端代码，而不是客户端 javascript（从语法判断）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:29:45.470

感谢您提供的所有帮助，但 Jey 基本上通过给我全新的代码来解决我的问题，哈哈

这是他在另一个问题上的代码的链接： [Categories with sub PHP / MYSQL](https://stackoverflow.com/questions/10215980/categories-with-sub-php-mysql/10244518#10244518)

谢谢杰伊和其他所有人！:)

# android - Android 上的数据压缩（java.util.zip 除外？）

> ID：11646025
> 
> 赞同：5
> 
> 时间：2012-07-25T08:53:51.853
> 
> 标签：android, compression, zip

我有很多数据（文本格式）要从设备发送。这显然意味着我应该压缩它。[但我的问题是除了 zip 算法（像这样](http://www.jondev.net/articles/Zipping_Files_with_Android_%28Programmatically%29)）之外，是否还有其他方法可以做到这一点。我问这个问题的原因就在[这里](http://www.online-tech-tips.com/software-reviews/7-zip-vs-winzip-vs-winrar/)- 对于文本文件，即 7-zip 比 zip 好两倍（！）。这是一个重大的收获。也许还有更好的算法。

那么Android有没有有效的数据压缩方式（比zip更好）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:23:06.003

您需要将另一个库编译到您的代码中，因为我怀疑除[zlib](http://zlib.net/)以外的压缩算法可作为 Android 标准库的一部分。

您提到的 7-zip 算法实际上称为 LZMA，您可以在[LZMA SDK](http://www.7-zip.org/sdk.html)中以库的形式获得。源代码在 Java 和 C 中都可用。如果您可以将 C 代码链接到您的应用程序中，那么这对于速度来说将是可取的。

因为没有免费的午餐，所以速度很重要。LZMA 将需要更多的内存和更多的执行时间来实现改进的压缩。您应该对数据使用 LZMA 和 zlib 进行试验，以查看您希望在执行时间和压缩之间进行权衡，以选择包和选择包中的压缩级别。

如果你发现你想换一种方式，比 zlib 更少压缩甚至更高的速度，你可以看看[lz4](http://code.google.com/p/lz4/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T09:18:43.943

你的问题太笼统了。

您可以使用任何库，只要它是 Java 或 C/C++（通过 NDK）。如果您不想使用外部库，则必须坚持使用 SDK 中的内容。根据您发送数据的方式，可能有标准的方法可以做到这一点。例如，HTTP 使用 gzip 并且已经定义了必要的标头。

简而言之，用你预期的数据格式和大小测试不同的东西，找到最好的，然后将它集成到你的应用程序中。

# html - 将 kineticJS 画布上的锚点更改为箭头？

> ID：11646027
> 
> 赞同：1
> 
> 时间：2012-07-25T08:53:54.407
> 
> 标签：html, canvas, drag-and-drop, image-resizing, kineticjs

在过去的几天里，我一直在玩 kineticjs 和画布。我有一个拖放画布，可以加载可调整大小的图像。可调整大小的图像上的锚点是圆圈：

```
var anchor;

  function addAnchor(group, x, y, name) {
    var stage = group.getStage();
    var layer = group.getLayer();

    anchor = new Kinetic.Circle({
      x: x,
      y: y,
      stroke: "#666",
      fill: "#ddd",
      strokeWidth: 2,
      radius: 8,
      name: name,
      draggable: true
            });                   

    anchor.on("dragmove", function() {
      update(group, this);
      layer.draw();
    });
    anchor.on("mousedown touchstart", function() {
      group.setDraggable(false);
      this.moveToTop();
    });
    anchor.on("dragend", function() {
      group.setDraggable(true);
      layer.draw();
    });
    // add hover styling
    anchor.on("mouseover", function() {
      var layer = this.getLayer();
      document.body.style.cursor = "pointer";
      this.setStrokeWidth(4);
      layer.draw();
    });
    anchor.on("mouseout", function() {
      var layer = this.getLayer();
      document.body.style.cursor = "default";
      this.setStrokeWidth(2);
      layer.draw();
    });

    group.add(anchor);

  } 
```

我想把它们变成箭头，或者类似的东西来向用户展示图像实际上是可调整大小的。有没有人有这样做的方法或教程可以告诉我如何绘制箭头或用图像替换锚点？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:07:33.757

我认为您需要将新的 Kinetic.Cirle 及其属性更改为如下所示：

```
var anchor = new Kinetic.RegularPolygon({
      x: x,
      y: y,
      sides: 3,
      rotation: -190,
      radius: 8,
      stroke: "black",
      strokeWidth: 2,
      name: name,
      draggable: true
    }); 
```

虽然这只是开始，但由于每个锚点的旋转不同，您还必须向锚点组添加更多变量，以使每个三角形朝向正确的方向。

我只是简单地测试了这个，但我希望它作为一个起点有所帮助。

记得仔细检查[Docs](http://www.kineticjs.com/docs)。

编辑：另见[此处](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-regular-polygon-tutorial/)。

# java - 覆盖 Java 中的标准编码

> ID：11646028
> 
> 赞同：5
> 
> 时间：2012-07-25T08:53:55.263
> 
> 标签：java, character-encoding

我们遇到了由此处描述的错误引起的问题： http://bugs.sun.com/view_bug.do?bug_id= [6183404](http://bugs.sun.com/view_bug.do?bug_id=6183404)

我已经使用自定义字符集实现了修复以修复不正确的映射。然而，这仍然不能解决我们正在使用的一个 Java 应用程序的问题，因为它被硬编码为使用标准的“GBK”字符集。

有没有办法`java.nio.charset.spi.CharsetProvider`覆盖现有的标准字符集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:33:49.323

根据 中的这段代码`Charset`，您似乎无法覆盖standardProvider，因为它会在任何其他内容之前被搜索。

```
if ((cs = standardProvider.charsetForName(charsetName)) != null ||
    (cs = lookupExtendedCharset(charsetName))           != null ||
    (cs = lookupViaProviders(charsetName))              != null) 
```

如果应用程序将字符集名称存储在一个字段中，您可以在应用程序启动之前通过反射做一些讨厌的事情来更改它。

# c# - 如何在我的 ASP.NET 应用程序中使用 XML 文件中的数据填充我的 DropDownList

> ID：11646031
> 
> 赞同：0
> 
> 时间：2012-07-25T08:54:05.180
> 
> 标签：c#, asp.net, xml, drop-down-menu

我有一个带有 DropDownList 的 ASP.NET 应用程序，我希望它用我的 XML 文件值填充。我如何使用我的 XML 来为我的 XML 中的每个值创建一个新项目。

**我的 XML 文件：**

```
<?xml version="1.0" standalone="yes" ?>
<NewDataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="resources">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="Werk" type="xs:string" minOccurs="0" />        
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <resources>
    <Werk>foo1</Werk>      <!-- The first Value-->
  </resources>
  <resources>
    <Werk>foo2</Werk>      <!-- The second Value-->
  </resources>
  <resources>
    <Werk>foo3</Werk>      <!-- The third Value-->
  </resources>
</NewDataSet> 
```

**在我的 ASPX 中：**

```
<asp:XmlDataSource ID="XMLData" runat="server" DataFile="~/App_Data/Werke.xml" />
        <asp:DropDownList ID="dropWerk" runat="server" Width="245px" /> 
```

我需要一种方法，用 XML 文件中的数据填充我的 DropDownList

塔拉索夫

**CS文件：**

```
private void BindXML()
        {
          XmlDocument xmldoc = XMLData.GetXmlDocument();

          using (DataSet ds = new DataSet())
          {
              ds.ReadXml(XMLData.DataFile);
              dropWerk.DataSource = ds;
              dropWerk.DataTextField = "Werk";
              dropWerk.DataBind(); 
          }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:22:07.413

**第一种方法：** 将xml存储在数据集中，然后将其分配给下拉列表

```
DataSet ds=new DataSet();
ds.ReadXml("xmlfile.xml");

dropWerk.DataSource = ds; or dropWerk.DataSource = ds.Tables[0]; 
dropWerk.TextField = "field name"; // field to display in dropdown
dropWerk.ValueField="Value Field";
dropWerk.DataBind(); 
```

**更新的答案：** **第二种方法：* * 将值一一添加到您的下拉列表项如果我从评论中理解您的问题，您想将 xml 值添加到列表项中，请尝试此操作

```
XmlDocument xdoc=new XmlDocument();
xdoc.Load("xmlfile.xml");

XmlNodeList node = xdoc.SelectSingleNodes("/NewDataSet/resources/");
foreach(XmlNode n in node )
{
ListItem l = new ListItem();
    l.Text = n.InnerXml.ToString();
    drpWerk.Items.Add(l);
}
drpWerk.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:01:56.623

试试这个：

```
<script runat="server">  
    protected void dropWerk_OnSelectedIndexChanged(object sender, System.EventArgs e) {  
        Label1.Text = dropWerk.SelectedItem.Text.ToString();  
}  
</script>  
<asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/App_Data/YourXmlFile.xml"></asp:XmlDataSource>
<asp:DropDownList ID="dropWerk" runat="server" Width="245px" DataSourceID="XmlDataSource1" OnSelectedIndexChanged="dropWerk_OnSelectedIndexChanged" /> 
```

您可能希望在 dropWerk_OnSelectedIndexChanged 处理程序中放置一个断点并检查 dropWerk.SelectedItem 以了解如何更好地使用传递的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:16:27.647

解决方案：

```
private void BindXML()
        {
            XmlDocument xmldoc = new XmlDocument(); 

          xmldoc.Load(Server.MapPath("~/App_Data/Werke.xml"));

          XmlNodeList nodes = xmldoc.GetElementsByTagName("Werk");

            foreach (XmlNode n in nodes)
            {
                ListItem l = new ListItem();
                l.Text = n.InnerXml.ToString();
                dropWerk.Items.Add(l);
            }

            dropWerk.DataBind();

        } 
```

在 Page_Load 方法中绑定此方法，它可以工作:)

# java - 使一个类在运行时扩展另一个类

> ID：11646035
> 
> 赞同：2
> 
> 时间：2012-07-25T08:54:16.593
> 
> 标签：java, class, inheritance, runtime, extends

有一个库有一个执行某些任务的基类（我们称之为 CBase），并且可以创建扩展此 CBase 类的类。

CBase 的行为对我来说还不够，所以我想创建自己的 CBase 类（我们称之为 MyCBase），它具有相同的方法和成员，但这些方法做的事情不同。

到现在为止一切正常。但阻碍我的是我想用 MyCBase 替换 CBase。但是，我有很多扩展 CBase 的类，我不想全部更改它们。

是否可以在运行时用 MyCBase 替换 CBase？以便

```
public class A extends CBase {} 
```

变成

```
public class A extends MyCBase {} 
```

我可以使用代码增强来执行此操作吗？（就像我们在运行时向类添加方法一样。是否也可以通过这种方式更改继承？）

谢谢您的帮助 ！

**编辑**

我想为框架编写一个插件，这就是为什么我想在运行时更改继承。这样框架的用户可以使用我的插件而不改变他们的源代码（改变他们的类的继承从 CBase 到 MyCBase）

**编辑 2**

是否可以这样做：？

```
CtClass cc = CtClass.forName("pkg.AClass");
cc.setSuperclass(CtClass.forName("mylib.MyCBase"));
cc.compile(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:00:59.020

我不是专家。也许你可以延长`ClassLoader`. 但我强烈建议不要这样做。替换将触及您的许多类，但在代码阅读和应用程序执行方面会很清楚。

我认为还有架构改进的空间，因为你有这么多的扩展类`CBase`。人们正试图从其他库中删除依赖项或使其非常小。因为在这种情况下，您可以轻松切换到另一个库或添加自己的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:06:52.933

我认为您不能在运行时更改类的扩展。我建议更改对象的扩展或构建一个接口，其中包含您需要的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:12:55.707

更改所有派生类是一件简单的事情，只要您控制它们的源代码：

1.  在您的项目中创建一个新类。将其称为 CBase，并将其与库类放在同一个包中。
2.  使用 IDE 的重命名/移动重构将 CBase 重命名为 MyBase。这将使 IDE 重命名对重命名/移动的类的所有引用...
3.  为 MyBase 编写代码，从 CBase 扩展。

如果你不能这样做（例如，因为某些派生类在你无法控制的库中），你可以用你自己的替换 CBase 的实现。只需在您的项目中创建一个具有相同包和名称的类（类加载器按顺序搜索类路径，并使用它找到的正确包的第一个类和名称）。然而，这种方法非常脆弱，因为编译器无法检查新旧版本 CBase 之间的二进制兼容性。JVM 将在加载类时检查这种兼容性，但由于类仅在需要时加载，因此很难测试您的更改。（这就是为什么如果有其他选择，我不推荐这种方法）。

您还可以在加载类文件时更改类，这将变得更加脆弱，并且编译器将允许您使用 MyBase 可能具有的任何附加功能。==> 绝对不是一个好主意。

# sql-server-2008 - 在 MSSQL 中最后一次出现某个字符后选择字段的一部分

> ID：11646036
> 
> 赞同：0
> 
> 时间：2012-07-25T08:54:17.637
> 
> 标签：sql-server-2008, tsql, texttrimming

我有一个包含更改日志的字段。每次都在方括号之间添加日期。

我需要在最后一个 ] 之后提取文件的最后一位以将其放入表中。

我正在尝试这个，但它不起作用......

```
select
SUBSTRING(BUG.CloseDescription,0,PATINDEX(']',bug.CloseDescription)) as myString
from Bug 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:06:28.940

```
declare @field varchar(100)
set @field = 'test [2012-02-10 10:00] wibble'
select right(@field, charindex('[',@field)) 
```

或获取日期

```
declare @field varchar(100)
set @field = 'test [2012-02-10 10:00] wibble'
select substring(@field, charindex('[',@field)+1, charindex(']',@field)-charindex('[',@field)-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:00:14.413

```
select
right(BUG.CloseDescription,charindex(']',reverse(BUG.CloseDescription))-1)
from Bug 
```

# rest - RESTeasy 客户端是否支持 TLS/SSL？

> ID：11646039
> 
> 赞同：4
> 
> 时间：2012-07-25T08:54:28.480
> 
> 标签：rest, ssl, https, resteasy

我在基于 JAVA 的 Web 应用程序中使用了几个 RESTful Web 服务。我正在使用 RESTeasy 客户端访问我的网络服务。这里客户端和服务之间的所有通信都是通过 XML（JAX-B xml 带注释的详细信息类）。以下是以下代码

```
String serviceURL  = "https://service.company.com/Service/getService"

ServiceRequestDetail serviceRequestDetail = getServiceRequestAsDetailClass();
ServiceResponseDetail serviceResponseDetail = new ServiceResponseDetail();
ClientRequest clientRequest = new ClientRequest(serviceURL);
clientRequest.accept(MediaType.APPLICATION_XML);   
clientRequest.body(MediaType.APPLICATION_XML, serviceRequestDetail);
ClientResponse<ServiceRequestDetail> response =
  clientRequest.post(ServiceRequestDetail.class);

if (response.getStatus() != 200) {
  throw new RuntimeException("Failed : HTTP error code : " + 
                             response.getStatus());
}

ServiceResponseDetail serviceResponseDetail =
  response.getEntity(ServiceResponseDetail.class); 
```

当我尝试访问我的服务时，我收到“Peer not Authenticated”错误

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
... 
```

有没有办法在 RESTeasy 客户端中添加 SSL 配置详细信息？也欢迎任何其他解决此问题的建议

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T11:55:29.190

我找到了答案，但我真的很抱歉迟到的回复。

要回答我的问题，RESTeasy 客户端确实支持 TLS/SSL。事实上，问题是我错过了将证书安装到 JVM 中。

```
keytool -import -alias <Replace certificate Alias name> -keystore $JAVA_HOME\jre\lib\security\cacerts -file <Replace your Certificate file location> 
```

这解决了“Peer Not Authenticated”的问题。希望能帮助到你。荣誉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-14T20:36:56.110

如果您不想将证书添加到 JVM 并将此证书分开。您可以将证书作为代码的一部分加载，如下所示。

```
 // load the certificate
    InputStream fis = this.getClass().getResourceAsStream("file/path/to/your/certificate.crt");
    CertificateFactory cf = CertificateFactory.getInstance("X.509");
    Certificate cert = cf.generateCertificate(fis);

    // load the keystore that includes self-signed cert as a "trusted" entry
    KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
    keyStore.load(null, null);
    TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    keyStore.setCertificateEntry("cert-alias", cert);
    tmf.init(keyStore);
    SSLContext ctx = SSLContext.getInstance("TLS");
    ctx.init(null, tmf.getTrustManagers(), null);` 
```

然后附上休息容易的建设者，如

`resteasyClientBuilder.sslContext(sslContext)`

# c# - 如何在此 ListView 中添加复选框并将其绑定？

> ID：11646040
> 
> 赞同：1
> 
> 时间：2012-07-25T08:54:31.500
> 
> 标签：c#, asp.net, listview, checkbox

我正在开发的基于 Web 的测验管理应用程序中有一个 ListView，我将它绑定到数据库中的 Answers 表。现在，我想添加一个带有 CheckBox 控件的列，该控件将绑定到数据库中 QuizContent 表中的 (isCorrect) 列。我不知道该怎么做，所以你能帮我吗？

仅供参考，我有以下数据库设计：

```
QuizContent Table: ID, QuizID, QuestionID, AnswerID, isCorrect
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer 
```

我的 ASP.NET 代码：

```
<div align="center">
        <asp:ListView ID="ListView3" runat="server" DataSourceID="SqlDataSource3" 
            DataKeyNames="AnswerID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>' />
                    </td>
                    <td>
                        <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true"
                            Text='<%# Bind("isCorrect") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table id="Table2" runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>'/>
                    </td>
                    <td>
                        <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true" 
                            Text='<%# Bind("isCorrect") %>' />
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="IsCorrectLabel" runat="server" Text='<%# Eval("isCorrect") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                    <thead>
                        <tr style="background-color:#C6D7B5;">
                            <th style="border-bottom:2px solid #003366; ">...</th>
                            <th style="border-bottom:2px solid #003366; ">Answer</th>
                            <th style="border-bottom:2px solid #003366; ">is Correct?</th>
                        </tr>
                    </thead>
                    <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                </table></div>
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" 
                            Text='<%# Eval("Answer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="isCorrectLabel" runat="server" 
                            Text='<%# Eval("isCorrect") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT        AnswerID, Answer
                            FROM            Answers
                            WHERE        (AnswerID IN
                                                         (SELECT DISTINCT AnswerID
                                                           FROM            QuizContent
                                                           WHERE        (QuestionID = @QuestionID)))"

            DeleteCommand="DELETE FROM [Answers] WHERE [AnswerID] = @AnswerID" 
            InsertCommand="INSERT INTO [Answers] ([Answer]) VALUES (@Answer)" 

            UpdateCommand="UPDATE [Answers] SET [Answer] = @Answer WHERE [AnswerID] = @AnswerID">
                <DeleteParameters>
                    <asp:Parameter Name="AnswerID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                    <asp:ControlParameter ControlID="ListView2" Name="QuestionID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView2" Name="QuestionID" DefaultValue="0"
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

同样，我的问题是数据库中有两个不同的表。ListView 绑定到 Answer 表。而对于 CheckBox，它必须绑定到 QuizContent 的第二个表，**那么该怎么做呢？**

**更新：**

这是一个快照，向您展示我在代码中缺少的内容： ![在此处输入图像描述](../Images/61a36ee0379bab1938ef415c77900112.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:33:47.200

修改查询就`SqlDatasource3`可以了

![在此处输入图像描述](../Images/9eddd5c49f310776885c9250ab9b55fa.png)

```
 <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT        Answers.*, QuizContent.IsCorrect
FROM            Answers INNER JOIN
                         QuizContent ON Answers.AnswerID = QuizContent.AnswerID
WHERE        (QuizContent.QuestionID = @QuestionID)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:37:27.133

将您的 sqldatasource3 选择语句更改为

```
SELECT        AnswerID, Answer
                        FROM            Answers
                        WHERE        (AnswerID IN
                                                     (SELECT DISTINCT AnswerID
                                                       FROM            QuizContent
                                                       WHERE        (QuestionID = @QuestionID)))

UNION ALL 
SELECT AnswerID,isCorrect from QuizContent 
WHERE Answers.AnswerID = QuizContent.AnswerID 
```

# visual-studio - 错误：无法访问文件 bin/Debug/... 因为它正被另一个进程使用

> ID：11646047
> 
> 赞同：121
> 
> 时间：2012-07-25T08:54:53.110
> 
> 标签：visual-studio, debugging, projects-and-solutions, locked-files

当我调试我的项目时，我收到以下错误：

> “无法将文件“obj\Debug\My Dream.exe”复制到“bin\Debug\My Dream.exe”。该进程无法访问文件“bin\Debug\My Dream.exe”，因为它正在被其他人使用过程。”

使用 Process Explorer，我看到 MyApplication.exe 已退出，但系统进程仍在使用它，尽管我之前停止了调试。每当我更改代码并开始调试时，它都会发生。如果我将项目复制到 USB 并调试，它运行正常。

为什么？我该如何解决这个错误？

我使用 Window 7 专业版。使用 Xp 我从来没有遇到过这个错误。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-07-25T09:36:13.543

呃，这是一个老问题，在 Visual Studio 中仍然偶尔会出现。它咬了我好几次，我已经失去了几个小时重新启动和与 VS 战斗。我敢肯定它已经在这里讨论过不止一次了。MSDN 论坛上也讨论过它。没有实际的解决方案，但有几个解决方法。[在这里开始研究](http://www.google.com/search?&q=debug+being+used+by+another+process+visual+studio)。

发生的事情是 VS 正在获取文件上的锁，然后不释放它。具有讽刺意味的是，该锁会阻止 VS 本身删除文件，以便在您重建应用程序时重新创建它。唯一明显的**解决方案是关闭并重新启动 VS**，以便它释放文件上的锁定。

我最初的解决方法是打开 bin/Debug 文件夹并重命名可执行文件。如果它被锁定，你不能*删除它，但你可以重命名它。*因此，您可以在末尾添加一个数字或其他内容，这样您就可以继续工作，而无需关闭所有窗口并等待 VS 重新启动。[有些人甚至使用预构建事件](https://stackoverflow.com/a/19649014/366904)将随机字符串附加到旧输出文件名的末尾来自动执行此操作。是的，这是一个*巨大*的黑客，但这个问题变得如此令人沮丧和衰弱，以至于你会做任何事情。

我后来了解到，经过更多的实验，这个问题似乎只有在您打开其中一位设计师的情况下构建项目时才会出现。因此，长期为我工作并阻止我再次处理这些愚蠢错误之一的解决方案是确保我始终在构建 WinForms 项目之前关闭所有设计器窗口。是的，这也有点不方便，但它确实比每小时重新启动 VS 两次或更多更省心。

我认为这也适用于 WPF，尽管我没有使用它，也没有亲身经历过那里的问题。

我还没有尝试在 VS 2012 RC 上复制它。不知道那里修好没。但到目前为止，我的经验是，即使在微软声称已修复它之后，它仍然会弹出。它仍然存在于 VS 2010 SP1 中。当然，我并不是说他们的程序员是不知道自己在做什么的白痴。我认为这个错误有多种原因和/或很难在实验室中可靠地复制。这与我没有亲自提交任何错误报告的原因相同（尽管我已经 +1 了其他人），因为我似乎无法可靠地复制它，就像可恶的雪人一样。

[<结束没有特别针对任何人的咆哮>]

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-10-29T03:15:54.813

我以前也遇到过这个错误，即使在 Visual Studio 2008 中也是如此。它又回来了，并且在 Visual Studio 2012 中更为普遍。

这就是我所做的。

将此粘贴到麻烦项目的预构建事件中：

```
if exist "$(TargetPath).locked" del "$(TargetPath).locked"
if exist "$(TargetPath)" if not exist "$(TargetPath).locked" move "$(TargetPath)" "$(TargetPath).locked" 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-06-10T11:37:00.317

计算机（右键）-> 管理-> 服务和应用程序-> 服务-> 启用应用程序体验

为我工作！

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-06-09T11:35:58.143

我在 Visual Studio 2013 中遇到了同样的问题。我不确定是什么原因导致我的项目出现这种情况，但我能够通过清理解决方案并重建它来修复它。

1.  构建 > 清洁解决方案
2.  构建 > 重建解决方案

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-07-02T12:22:47.957

我知道这是一个老问题。不幸的是，我`.net core 2.0`在`visual studio 2017`. 所以，我想分享对我有用的解决方案。在此解决方案之前，我尝试了以下步骤。

1.  重新启动视觉工作室
2.  关闭所有应用程序
3.  清理我的解决方案并重建

以上步骤都没有解决问题。

然后我打开我`Task Manager`选择的`dotnet`进程，然后单击结束任务按钮。后来我打开了我的 Visual Studio，一切正常。

[![在此处输入图像描述](../Images/6d2edb8a0711350b61795844d392157e.png)](https://i.stack.imgur.com/xpKoO.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-02-05T23:19:23.260

至少在我的情况下，我注意到 Visual Studio 2012 正在创建至少两个 msbuild.exe 幽灵进程，这些进程在构建后并没有消失。这些僵尸显然导致文件锁出现。

杀死 msbuild.exe 是一次性解决方案，需要在每个构建基础上完成。

但是后来我发现我可以一劳永逸地禁用并行构建-进入工具>选项>项目和解决方案>构建和运行>“并行项目构建的最大数量”-默认情况下它的值为8，我'已经切换到 1。像魅力一样工作。

当然，现在构建速度有点慢，但安全总比后悔好。至少对于这个特殊的小项目，我不需要多个构建线程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-01T13:33:28.703

如果您在运行单元测试时遇到此问题，请[在此处](https://stackoverflow.com/a/29987762/973624)查看我的答案。答案复制如下：

> 基于 Sébastien 的回答，我在我的测试项目中添加了一个预构建步骤，以自动终止任何`vstest.*`仍在运行的可执行文件。以下预构建命令对我有用：
> 
> ```
> taskkill /f /im vstest.*
> exit 0 
> ```
> 
> 该`exit 0`命令位于末尾，以防止在没有`vstest.*`可执行文件运行时构建失败。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-24T11:44:14.723

为我工作。任务管理器 -> 项目名称 -> 结束任务。（我的项目名称有 3 个相同的流程）；

与 2013 年相比；赢8；

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-20T07:44:40.330

最近我在使用 Visual Studio 2012 时遇到了同样的错误描述：“该进程无法访问该文件，因为它正在被另一个进程使用......”

要解决此问题，首先您需要了解仍在使用它的应用程序。我已经关闭了“MSBuild”和“MSBuild 主机”等所有进程。但这还不够。如果您已安装“代码合同”并打开，则有时需要您的 DLL 来检查并挂断此操作。

因此，您需要停止“CCCheck.exe”的所有进程，仅此而已。

最后，要了解该进程正在使用您的 DLL，您总是可以尝试在文件管理器中删除“obj”文件夹，此操作将失败，您可能会看到“消息窗口”，其中描述了挂起操作。此外，作为变体，您可以尝试使用“Sys Internals Suite”应用程序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-05T04:29:41.017

就我而言，我启用了“显示所有文件”。视觉工作室 2017

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-21T13:10:34.077

我在 Visual Studio 2017 中一直受到这个问题的困扰。它大约在两三周前开始，严重影响了我的工作效率。Clean 和 Rebulid 没有用；即使重新启动我的机器也无法完成这项工作。

处理该问题的一种方法是清理有问题的程序集，然后构建（而不是重新构建）您想要在之后立即运行的项目。这大约有 30% 的时间有效。

但是，我发现的最可靠的解决方案可能是打开开发人员命令提示符，然后`msbuild`直接使用。我过去三天一直在这样做，到目前为止，问题还没有发生过一次。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-06-28T06:23:16.847

我解决了这个问题..

在调试附近，您会看到带有一些配置的下拉菜单。默认有任何 CPU。选择 x86 并运行它将运行的程序。如果没有 x86，请转到配置管理器并添加 x86

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-27T00:15:28.010

确保应用程序的任何先前运行（例如，在没有调试选项的情况下启动）实际上已停止。我正在开发一个 WPF 应用程序，没有调试就开始了，当我不断收到错误时将其最小化。关闭应用程序 VS 行为后恢复正常。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-10-21T17:01:05.053

运行`taskmanager`。
找到`netcore`并删除它。
然后，您可以手动删除该文件，也可以运行`Clean`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-09-19T19:06:28.763

这是纯粹的猜测，而不是答案。

但是，我遇到这个问题已经有一段时间了。

一段时间后，我怀疑 VS 和我的 AV 预防措施之间存在相互作用。

玩了一段时间后，好像我修改了我的杀毒软件后它**可能**已经消失了，所以下面的所有内容

**C:\Users[用户名]\AppData\Local\Microsoft\VisualStudio\10.0\ProjectAssemblies**

文件夹未包含在实时保护中。

看起来好像构建实际上首先在此处写入 DLL，然后将其复制到最终构建位置。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-01-20T15:21:04.023

可能为时已晚。但是，我遇到了类似的问题，就我而言，该项目有自我参考。因此，从参考文献中删除它就像一个魅力！！！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-07-02T02:32:31.873

我发现不关闭表单或重新启动 VisualStudio 的最快方法是转到项目的编译页面并单击“高级编译选项...”按钮。然后对其中一个选项进行任何更改（例如，将 Generate Debug Info 从 Full 更改为 pdb-only），然后单击 OK。它每次都有效，并且必须这样做，直到 MS 修复了这个错误（在我从 VS2012 切换到 VS2013 之前，我从来没有遇到过这个问题）

另请注意，如果您无法清理项目或解决方案，它将无法构建。这些文件肯定被VS锁定（不是防病毒问题，至少在我的情况下不是）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-08-02T11:00:53.847

预编译命令

```
(if exist "$(TargetDir)*old.pdb" del "$(TargetDir)*old.pdb") & (if exist "$(TargetDir)*.pdb" ren "$(TargetDir)*.pdb" *.old.pdb) 
```

帮助

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-07-02T18:44:45.607

我尝试了所有这些建议以及在其他地方找到的其他建议，唯一对我有用的是重新启动计算机。然后我做了一个干净的解决方案，然后重建。我正在使用 Visual Studio 2013 作为参考。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-02-02T21:35:30.183

关闭 VisualStudio，按 ctrl-alt-delete，选择任务管理器，找到并结束所有 MSBuild 进程 - VisualStudio 基本上有一个非常严重的错误，它失去对其调试器的控制，并且调试器保持对 debug/bin 中 .pdb 文件的锁定文件夹。结束所有 MSBuild（调试器）进程后，删除 /debug/bin 文件夹并在 Visual Studio 中重新打开解决方案。你现在可以走了。微软需要解决这个问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-11-13T16:02:26.407

我的问题是 dotnet 挂断了，每当 VS 尝试制作新的 dll 或访问旧的 dll 时，dotnet 进程都会锁定 dll 并阻止 Visual Studio 克隆 dll。解决方案只是在任务管理器中结束所有 dotnet 任务（它只会真正删除死的任务，如果你试图结束一个并且它不会关闭，这意味着它正在工作）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-02-08T03:55:47.823

一个简单的解决方案是转到 bin\Debug 文件夹，删除该文件夹中的所有文件，然后重新构建。如果它不起作用，请关闭 Visual Studio，然后使用文件资源管理器转到 bin\Debug 文件夹，在左侧角落，单击文件>打开命令提示符>以管理员身份打开命令提示符>输入此命令“DEL /F /Q / A *" > 然后重建

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-10-07T08:15:47.960

我遇到了同样的问题，但以上答案都没有帮助我！我只是简单地关闭了我的 Visual Studio 2017 然后重新运行它，它成功了！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-03-27T09:16:05.020

我已经打开了一个关于 VS 2017 的[单独问题](https://stackoverflow.com/questions/49364962/visual-studio-is-locking-the-executable-which-needs-to-be-built/49452278#49452278)，该问题在一次更新后具有类似的行为。该问题似乎是由防病毒程序产生的。

*我已将 bin 文件夹添加到防病毒排除列表中，重新启动机器，现在它似乎可以工作了。*

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-11-04T17:29:56.420

**[已解决] 错误：无法访问文件 bin/Debug/... 因为它正被另一个进程使用：**

我正在接近您在尝试一个接一个地运行两个窗口时遇到此错误，例如首先加载一个表单，然后有时它会自动消失并将第二个表单加载到屏幕上。

基本上，您需要关闭在后台运行的第一个表单以及此错误背后的主要原因。

要关闭第一个表单，您必须在第二个表单加载事件处理程序中添加这两行代码。

```
 Form1 form = new Form1();
    form.Close(); 
```

这将完美地解决错误。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-07-28T07:59:18.223

我遇到了同样的问题，我发现实际上在后台**运行了多个 Windows 窗体应用程序。**当您的应用程序有两个表单并且您关闭不是**主表单的****第二个表单**时，就会发生这种情况，因此应用程序不会完全退出。

 ****我通常运行我的应用程序**

*   通过其 exe 或
*   无需调试即可运行

**解决方法是关闭 Windows 窗体应用程序的其他实例**。这是始终关闭应用程序实例的[一种方法。](https://stackoverflow.com/a/10769349/3969838)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-10-22T21:57:30.110

我发现 Cody Gray 的回答部分有帮助，因为它确实引导我找到了你们中的一些人可能也遇到的问题的真正根源：Visual Studio 的测试执行默认保持打开状态并保持对文件的锁定。

要停止这种主要无用的行为，请按照[https://connect.microsoft.com/VisualStudio/feedback/details/771994/vstest-executionengine-x86-exe-32-bit-not-closing-vs2012-11-0中的说明进行操作-50727-1-rtmrel](https://connect.microsoft.com/VisualStudio/feedback/details/771994/vstest-executionengine-x86-exe-32-bit-not-closing-vs2012-11-0-50727-1-rtmrel)

取消选中测试菜单 -> 测试设置 -> “保持测试执行引擎运行”

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2015-02-26T04:13:33.063

另一个kludge，呃，但它很容易并且在VS 2013中对我有用。单击项目。在属性面板中应该有一个名为 Project File 的条目，其中包含一个值

（您的项目名称）.vbproj

更改项目名称 - 例如在末尾添加 -01。被锁定的原始 .zip 文件仍然存在，但不再被引用……因此您的工作可以继续。下次重新启动计算机时，该锁定将消失，您可以删除错误文件。**

# html - css 会应用在这个特定的场景中吗？

> ID：11646053
> 
> 赞同：0
> 
> 时间：2012-07-25T08:55:08.020
> 
> 标签：html, css, image, styles

请原谅我对前端开发的所有事情的无知 - 但我想知道我是否有一种针对图像的样式，例如，然后在任意时间后用户将图像插入内容编辑器（即图像是页面渲染后很长时间才引入页面） - css 样式是否适用于该图像？还是“为时已晚”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T08:56:32.223

是的，尝试使用 AJAX 加载一些应该应用样式的内容。这些*将*被应用。

***但是：***正如@BoltClock 指出的那样，一些较旧的 IE 版本不喜欢这样，我建议您考虑他的评论。

# php - PHP - 计算特定的数组值

> ID：11646054
> 
> 赞同：60
> 
> 时间：2012-07-25T08:55:09.853
> 
> 标签：php, arrays, count

如何计算数组中值等于常数的元素数量？例子，

```
$myArray = array("Kyle","Ben","Sue","Phil","Ben","Mary","Sue","Ben"); 
```

我怎么能直接知道里面有多少个“本”？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-07-25T08:59:01.283

```
$array = array("Kyle","Ben","Sue","Phil","Ben","Mary","Sue","Ben");
$counts = array_count_values($array);
echo $counts['Ben']; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-07-25T09:10:39.373

您可以使用*array_keys*和*count*来做到这一点。

```
$array = array("blue", "red", "green", "blue", "blue");
echo count(array_keys($array, "blue")); 
```

输出：

```
3 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-11-14T21:25:41.053

要计算二维数组中的值，这里是**处理和获取特定值计数**的有用片段-

```
 <?php

    $list = [
      ['id' => 1, 'userId' => 5],
      ['id' => 2, 'userId' => 5],
      ['id' => 3, 'userId' => 6],
    ];

    $userId = 5;

    echo array_count_values(array_column($list, 'userId'))[$userId]; // outputs: 2 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-25T09:00:02.170

使用[array_count_values](http://php.net/manual/en/function.array-count-values.php)函数。

$countValues = array_count_values($myArray);

`echo $countValues["Ben"];`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-25T08:58:10.177

使用`array_count_values()`功能。检查此链接[http://php.net/manual/en/function.array-count-values.php](http://php.net/manual/en/function.array-count-values.php)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-21T21:18:19.190

```
define( 'SEARCH_STRING', 'Ben' );

$myArray = array("Kyle","Ben","Sue","Phil","Ben","Mary","Sue","Ben");

$count = count(array_filter($myArray,function($value){return SEARCH_STRING === $value;}));

echo $count, "\n"; 
```

输出：

```
3 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-25T08:59:59.010

尝试 array_count_values() 函数

```
<?php
$array = array(1, "hello", 1, "world", "hello");
print_r(array_count_values($array));
?> 
```

输出：

```
Array
(
    [1] => 2
    [hello] => 2
    [world] => 1
) 
```

[http://php.net/manual/en/function.array-count-values.php](http://php.net/manual/en/function.array-count-values.php)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-25T09:00:57.940

试试 PHP 函数[`array_count_values`](http://sg2.php.net/manual/en/function.array-count-values.php)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-11T02:05:49.067

如果你想计算数组中所有相同的出现，这里有一个函数来计算它们，并将结果作为多维数组返回：

```
function countSame($array) {

$count = count($array);
$storeArray = array();
while ($count > 0) {
$count--;

if ($array[$count]) {
$a = $array[$count];
$counts = array_count_values($array);
$counts = $counts[$a];
$tempArray = array($a, $counts);
array_push($storeArray, $tempArray);

$keys = array_keys($array, $a);
foreach ($keys as $k) {
unset($array[$k]);
} //end of foreach ($keys as $k)
} //end of if ($array[$count])

} //end of while ($count > 0)

return $storeArray;

} //end of function countSame($array) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-03T18:38:20.677

`array_count_values`仅适用于整数和字符串。如果您碰巧需要浮点/数值的计数（并且您不注意精度或表示的微小变化），则可以使用：

```
function arrayCountValues($arr) {
  $vals = [];
  foreach ($arr as $val) { array_push($vals,strval($val)); }
  $cnts = array_count_values($vals);
  arsort($cnts);
  return $cnts;
} 
```

请注意，我`$cnts`将键作为字符串返回。重新转换它们很容易，但我正在尝试确定值的**模式**，所以我只需要重新转换第一个（几个）值。

我测试了一个循环的版本，创建一个计数数组而不是使用`array_count_values`，结果证明效率更高（可能提高 8-10%）！

# plsql - ALTER SESSION SET NLS_TERRITORY=ITALY 抛出 ORA-00911

> ID：11646056
> 
> 赞同：0
> 
> 时间：2012-07-25T08:55:13.277
> 
> 标签：plsql, oracle10g, system.data.oracleclient

如果我尝试`ALTER SESSION SET NLS_TERRITORY=ITALY`在 SQL Developer 中执行该语句，则不会出现错误。但是，如果我通过我的 Win Forms 应用程序运行它，通过 System.Data.OracleClient 提供程序连接，我会收到“ORA-0911：无效字符”错误。为什么？我的 Oracle 版本是 10.2.0.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:10:20.317

解决了。我在执行

```
ALTER SESSION SET NLS_TERRITORY=ITALY;
pl/sql block: DECLARE ... BEGIN ... END;
/ 
```

我删除了分号并将其替换为

```
ALTER SESSION SET NLS_TERRITORY=ITALY
/
pl/sql block: DECLARE ... BEGIN ... END;
/ 
```

现在可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:30:17.887

尝试将其包装在立即执行中：

```
execute immediate 'ALTER SESSION SET NLS_TERRITORY=ITALY'; 
```

# date - 在 Drupal 中隐藏结束日期

> ID：11646057
> 
> 赞同：0
> 
> 时间：2012-07-25T08:55:14.603
> 
> 标签：date, drupal, drupal-7, calendar, themes

我正在 Drupal 中创建一个日历模块。由于客户的需要，我需要能够使用节点上的布尔变量隐藏结束日期，保存在 CCK 字段中。

我的问题是我可以通过连接到 theme_date_display_range() 主题函数来隐藏它，但不能从我的模块中隐藏它。据我所知，这只能在主题内实现。这意味着，如果不使用启用此功能的某个主题，我将无法隐藏结束日期。

如果我然后说，我将使用某个主题并接受它，我仍然无法看到调用 mytheme_date_display_range() 的上下文，因此我无法知道当前节点是否想要显示或隐藏结束日期。我可以将它作为变量传递，但是有更好的方法吗？

我是否可以覆盖日期的主题功能以改用我的模块，如果这是最好/正确的方法，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:56:22.600

好的，所以我想我已经找到了一个很好的解决方案，根本不使用主题功能。我仔细查看了以日期为主题的 theme_date_display_combination()。如果没有设置结束日期，它只会显示开始日期。我连接`hook_entity_prepare_view()`并检查日期和隐藏结束时间字段是否都存在。如果是这样，我会根据布尔值取消设置结束时间。

```
/**
 * Implements hook_entity_prepare_view().
 */
function kw_calendar_full_entity_prepare_view($entities, $type, $langcode) {
    foreach ($entities as &$entity) {
        if (isset($entity->field_event_date) && isset($entity->field_hide_endtime)     && $entity->field_hide_endtime[LANGUAGE_NONE][0]['value'] == 0) {
            unset($entity->field_event_date[LANGUAGE_NONE][0]['value2']);
        }
    }
} 
```

希望有一天这会对某人有所帮助...

# iphone - 如何为每个 uitableviewcell 缓存从互联网下载的图像和标签文本？

> ID：11646070
> 
> 赞同：1
> 
> 时间：2012-07-25T08:56:05.820
> 
> 标签：iphone, objective-c, caching, uitableview, nscache

我从互联网上下载每个表格单元格的文本和图像。我在后台（GCD）中执行此操作，但性能不佳（需要一段时间为所有行的 dll 图像），因为有很多行。

我将 nsurlconnection 用于图像 dll。

我用谷歌搜索了一下，变得困惑。最简单的方法是什么？使用 NSCache（用于图像和文本）还是我必须学习核心数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:07:01.497

您可以使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView/)下载和缓存图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:01:28.537

我使用这个库来兑现网络图像
[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage) 非常简单易用

```
`[imageView setImageWithURL:[NSURL URLWithString:yoururl]];` 
```

* * *

 `## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:02:39.333

结帐`https://github.com/rs/SDWebImage/`一个超级简单的方法来做到这一点......

从自述文件：

```
[cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

这就是缓存图像所需的全部内容。您可以查看源代码以了解如何扩展它以支持缓存文本对象。或者，您可以使用`NSUserDefaults`基于 URL 和文本数据存储键值对。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T08:59:05.053

我为此使用块和[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，它工作正常。

```
[ASIHTTPRequest setDefaultCache:[ASIDownloadCache sharedCache]];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL urlWithString:<yoururl>]];
[request setDownloadCache:[ASIDownloadCache sharedCache]];
[request setCachePolicy:ASIOnlyLoadIfNotCachedCachePolicy];
[request setCacheStoragePolicy:ASICacheForSessionDurationCacheStoragePolicy];

[request setCompletionBlock:^{
    //do your things
}];

[request setFailedBlock:^{
     //request failed - inform the user
}];

[request startAsynchronous]; 
````

# nosql - Cassandra 在一些插入/更新后给出 TTransportException

> ID：11646071
> 
> 赞同：0
> 
> 时间：2012-07-25T08:56:07.153
> 
> 标签：nosql, cassandra

大约有 15 个进程在 Cassandra 中插入/更新唯一条目。一切正常，但一段时间后我收到此错误。（当我重新启动该过程时，一切都很好，直到某个时候）

> 尝试连接到每个服务器两次，但没有一次成功。最后一次失败是 TTransportException: Could not connect to 10.204.81.77:9160

我对所有 Cassandra 机器进行了 CPU/内存分析。CPU 使用率有时会达到 110% 左右，而内存使用率则在 60% - 77% 之间。不确定这是否是原因，因为它在大多数情况下都可以正常使用这种内存和 cpu 使用情况。

ps：如何确保 Cassandra 更新/插入无误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:12:49.447

如果您的插入出现任何问题，Cassandra 将抛出异常；否则，您可以假设它没有错误。

连接失败是网络问题，而不是 Cassandra 问题。从一些地方开始：Cassandra 进程还活着吗？netstat 是否显示它仍在监听 9160？你能连接到那台机器上的非 Cassandra 服务吗？您的服务器或路由器是否配置为通过防火墙阻止频繁的连接尝试？

# javascript - 获取文档内容的高度，包括绝对/固定定位元素

> ID：11646075
> 
> 赞同：3
> 
> 时间：2012-07-25T08:56:21.083
> 
> 标签：javascript, css, iframe

我需要调整 iframe 的大小以匹配其**内容**，但我尝试过的高度属性不考虑带有`position: fixed`.

假设一个文档只有两个元素与`absolute`和`fixed`类。

```
body { padding: 0; margin: 0; }
.absolute {
    position: absolute;
    height: 100px;
}
.fixed {
    position: fixed;
    height: 200px;
} 
```

*   `html.scrollHeight`0（Opera/Firefox 中的视口高度）
*   `html.offsetHeight`0
*   `body.scrollHeight`0（Chrome 中的视口高度）
*   `body.offsetHeight`0
*   `body.outerHeight`0

如果我添加`html { position: relative; }`,`html.scrollHeight`在 Chrome 中将是 100px，但没有值将是 200px。起初我也遇到了浮动问题，但我通过在`body`.

我在这里做了一个jsbin：http: [//jsbin.com/ehixiq](http://jsbin.com/ehixiq)

如果无法获得真正的高度，我最好的解决方法是什么？我只需要支持最新版本的 Opera、Chrome 和 Firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:09:12.030

我发现最好的方法是使用 javascript，因为它可以在渲染后可靠地获得高度。在最近的一个项目中，我使用 jQuery 来获得窗口的完整高度：

```
$(document).height() 
```

你可以为元素高度做这样的事情：

```
$('.element2').height($('.element1').height()) 
```

更新：

```
$('iframe').height($('iframe').parent().height()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:38:41.137

我能弄清楚的唯一方法是获取所有元素的实际底部位置：

```
var els = Array.prototype.slice.call(document.body.getElementsByTagName('*'));
var elHeights = [];
for (var i = 0, l = els.length; i < l; i++) {
  elHeights.push(els[i].scrollTop + els[i].offsetHeight);
}
var docHeight = Math.max.apply(Math, elHeights); 
```

浏览器在具有 100 个元素的 DOM 上每秒管理 5-100k 次操作，就我而言，这大约是大多数文档的大小。

# jquery - 如何使用 javascript 或 jQuery 删除部分字符串？

> ID：11646077
> 
> 赞同：0
> 
> 时间：2012-07-25T08:56:27.723
> 
> 标签：jquery

我有以下内容：

```
$('.select-topic').click(function () {
    if ($(this).attr('data-list') == "N") {
        $(this).attr('data-list', 'Y')
        var topicSelectHtml = $('#TopicID').html();
        $(this).html(topicSelectHtml);
        $(this).attr('data-clicked', 'Y')
    } 
```

当用户点击一个新主题时，它会将`$('#TopicID').html();`并用作 html 的`topicSelectHtml`.

这可行，但我需要做的是删除`$('#TopicID').html();`新选择不需要的部分。这是我选择的html：

```
<select name="TopicID" id="TopicID"><optgroup label="Admin">
<option value="00">All Topics</option>
<option value="050002">Classes</option>
</optgroup>
xxxxxxxxx</select> 
```

如何删除该`<optgroup label="Admin"> ... </optgroup>`部分？请注意，我的 html 中没有换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:59:02.577

```
var topicSelectHtml = $('#TopicID').clone().find("optgroup:first").remove().end().html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:59:39.843

将 id 添加到每个 optgroup，然后使用 remove() 函数。

请参阅此处的示例 - [http://jsfiddle.net/ue2KJ/](http://jsfiddle.net/ue2KJ/)。

如果你愿意，你可以避免给元素添加 id，但是如果你有不止一种类型的相同元素，那么它可能会导致问题。

要删除第一个元素，只需使用 -

```
$(this).children("optgroup:first").remove(); 
```

# python - 在文件上迭代 Python 脚本，使用通配符扩展，并通过 args

> ID：11646079
> 
> 赞同：0
> 
> 时间：2012-07-25T08:56:36.553
> 
> 标签：python, loops, wildcard, glob, execfile

我有一些脚本可以对文件进行一些处理。通常他们接受文件作为他们的第一个命令行参数，然后是其他参数。

我想编写一个主脚本，它接受要运行的脚本的名称、指定目标文件（a-la `glob`）的通配符，以及可能传递给输入脚本的参数。主脚本将遍历文件，并使用附加参数运行输入脚本。

`if __name__ == "__main__":`请注意，输入脚本是遗留的，并且可能在末尾不包含通常的行。他们还可以访问`sys.argv`.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:05:09.657

[`import glob`](http://docs.python.org/library/glob.html)

应该让你开始，

我还会对脚本进行子处理并传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:12:30.593

你可能会尝试这样的事情。（非常粗糙，但你明白了）

```
import os
import sys

def callScripts(wildcard, arguments):
    # convert a list ["hello", "world"] to a space delimited "hello world"
    arguments = " ".join(arguments)
    for file in os.listdir(".")
    # feel free to replace with regex or w/e
    if file.endswith(wildcard)
        # system shell call
        os.system("python " + file + " " + arguments)

if __name__ == "__main__":
    wildcard = sys.argv[1]
    arguments = sys.argv[2:]
    callScripts(wildcard, arguments) 
```

# git - 与另一个 git 存储库保持同步？

> ID：11646080
> 
> 赞同：8
> 
> 时间：2012-07-25T08:56:37.240
> 
> 标签：git, github

我在 Github 上创建了一个仓库。现在，原来的有一些更新。如何从原始存储库中提取更改并与它们保持同步？

如果我的来源与原始来源冲突，我是否有机会手动编辑它？

EDIT1：感谢大家的帮助。我想我需要 RTFM :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T11:44:01.897

其他两个答案中没有明确说明的是，您不能直接从 github 上的原始项目合并到 github 上的 fork，您需要通过自己机器上的本地克隆。

因此，您将原始项目设置为远程（`upstream`在 Magnus Skog 和 CJlano 的答案中调用），然后从该远程拉入您的本地克隆，解决与本地更改的任何合并冲突，然后将结果推送到 github 上的 fork。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T11:42:52.427

只需将原始存储库添加为远程并从中提取更改

```
git remote add upstream path/to/upstream/repo.git
git pull upstream master 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-25T09:06:21.467

见：[https ://help.github.com/articles/fork-a-repo](https://help.github.com/articles/fork-a-repo)

> **拉入上游更改**
> 
> 如果您从 fork 项目的原始 repo 得到更新，您可以通过运行以下代码将这些更新添加到您的 fork：
> 
> ```
> git fetch upstream
> # Fetches any new changes from the original repo
> git merge upstream/master
> # Merges any changes fetched into your working files 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-27T07:40:29.163

请参阅有关“同步分叉”的 github 文档

[https://help.github.com/articles/syncing-a-fork](https://help.github.com/articles/syncing-a-fork)

1.  在同步之前，您需要添加一个指向上游存储库的远程。当你最初分叉时，你可能已经这样做了。
2.  将存储库与上游同步需要两个步骤：首先必须从远程获取，然后必须将所需的分支合并到本地分支。
3.  从远程存储库中获取将引入其分支及其各自的提交。这些存储在您的本地存储库中的特殊分支下。我们现在将上游的 master 分支存储在本地分支 upstream/master 中
4.  现在我们已经获取了上游存储库，我们希望将其更改合并到我们的本地分支中。这将使该分支与上游同步，而不会丢失我们的本地更改。如果您的本地分支没有任何独特的提交，git 将改为执行“快进”

Ps：同步你的fork只会更新你本地的repository副本；它不会更新您在 GitHub 上的存储库。

Ps 2：每个步骤的实际代码在开头粘贴的链接中。

# c++ - C ++如何从此字符串中获取值

> ID：11646082
> 
> 赞同：1
> 
> 时间：2012-07-25T08:56:49.490
> 
> 标签：c++, html-parsing

我如何在这段 html 代码中获取值

```
<select id="convert-from" name="currency-1">
  <option value='EUR'>Euro (EUR)</option>
  <option value='GBP'>British Pound (GBP)</option>
  <option value='USD'>United States Dollar (USD)</option>
  <option value='AUD'>Australian Dollar (AUD)</option>
  <option value='CAD'>Canadian Dollar (CAD)</option>
  <option value='CHF'>Swiss Franc (CHF)</option>
  <option value='CNY'>Chinese Yuan (CNY)</option>
</select> 
```

我想要 EURO (EUR)、Brish Pound (GBP) 的值并将其输出到名为 currency.txt 的文件中，格式如下：

> 欧元 (EUR)
> 英镑 (GBP)
> 美元 (USD)
> 澳元 (AUD)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:00:16.147

使用 XML/HTML 解析器（我不会推荐任何特定的解析器，但有很多）。一种不太通用的方法是尝试自己解析它，*例如*使用正则表达式。

# axapta - Dynamics Axe 标签未更新

> ID：11646085
> 
> 赞同：1
> 
> 时间：2012-07-25T08:56:54.797
> 
> 标签：axapta, labels, dynamics-ax-2012

我只是使用 Dynamics Ax 中的标签编辑器编辑了一个标签，它并没有在任何地方更改。有些表格已经接受了更改，有些则没有。

更准确地说，我修改了标签：案例管理中的责任员工。名称已更改为列出所有案例的大表格（此处标签更改有效）但如果我单击单个案例查看详细信息，旧名称仍然出现并且我三重检查，它是相同的标签并且标签列表中没有旧名称的标签。

有人有想法吗？我可以尝试重新编译 CIL，但我不敢相信对于这么简单的事情我必须运行编译器几个小时......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:54:00.147

更改现有标签时，我总是重新启动 AOS 以确保更改发生。我注意到，在 AOS 关闭之前，标签不会写入 .ald 文件，这可以解释为什么如果您有多个 AOS 或有一些标签缓存，它是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:53:29.670

您确定您更改的语言与您的用户设置（en-us 或 en-uk）中的语言相同吗？

您有多个 AOS 实例吗？如果是这样，重新启动（其他）AOS。

您是否也制作了新标签并更新了相应的元素？旧标签可能还有其他用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:30:07.830

请尝试从应用程序文件系统中删除 .ali 文件。一般位于C:/program file/dynamics ax/50(if is ax 2009)/application/appl// 尝试找到与label file id同名的.ali文件(eg: axPQRen-us.ali, 其中PQR 是标签文件）和语言。删除 .ali 文件后重新启动 aos，这应该会自动创建具有最近更改的 ali 文件。还要确保大表单控件的标签和案例（您发现差异的地方）控件来自相同的标签。

# php - mysql_query() 期望参数 2 是资源，字符串在

> ID：11646087
> 
> 赞同：-2
> 
> 时间：2012-07-25T08:57:22.193
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

这条线有什么问题？

```
23\. $result = mysql_query("INSERT INTO $tbl_name('city_id', 'city', 'state_id') VALUES('NULL, '.$city.","', '4421'') or die(mysql_error())"); 
```

每次我都会收到此错误消息：

> 警告：mysql_query() 期望参数 2 是资源，第 23 行给出的字符串

这是我的完整代码

```
<?php
// Get values from form 
$city = explode(',', $_POST['city']);

//create a loop
if(isset($_POST['city'])) {

    $city = explode(',', $_POST['city']);
    $n = count($city);
    for($i=0; $i<$n; $i++) {
    $result = mysql_query("INSERT INTO $tbl_name(city_id, city, state_id) VALUES(NULL, '.$city.","', '4421')") or die(mysql_error());
    }
} if($result) {
    header('Location: index.html'); 
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:03:53.310

尝试`mysql_query("INSERT INTO ".$tbl_name."(city_id, city, state_id) VALUES(NULL,'".$city."','4421')") or die(mysql_error());`

我想它应该这样工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:05:27.117

您的查询应该是这样的

```
mysql_query("INSERT INTO $tbl_name(city_id, city, state_id) VALUES('NULL, '.$city.","', '4421'") or die(mysql_error())); 
```

不带逗号的列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:06:12.420

### 您忘记在`"`之后关闭`after '4421'')`并且语法不正确！

**代替：**

```
'NULL, '.$city.","', '4421'') or die(mysql_error())"); 
```

**和**

```
'NULL, '.$city.","', '4421'')") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:07:02.810

```
mysql_query("INSERT INTO $tbl_name(city_id, city, state_id) VALUES(NULL, ".$city.",'4421')") or die(mysql_error()); 
```

试试这个。

`or die()`是一个 php 构造 - 你放错了一个括号，这意味着它进入了 sql 查询。

这就是为什么你的错误认为`mysql_query()`有第二个参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:07:33.747

这是因为语法不正确，并且 INSERT 查询中的列名不应用引号引起来：尝试

```
$result = mysql_query("INSERT INTO ".$tbl_name."(city_id, city, state_id) VALUES(NULL, '".$city."','4421') or die(mysql_error()"; 
```

# iphone - 使用 phonegap 连续拍摄图像

> ID：11646089
> 
> 赞同：2
> 
> 时间：2012-07-25T08:57:23.433
> 
> 标签：iphone, ios, cordova, phonegap-plugins

有没有办法在相机上每秒捕捉图像。我正在使用 phonegap Camera API 来捕获图像并且它工作正常。不，我需要在不按捕获按钮的情况下每秒捕获图像。可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:54:30.413

您可以使用*NSTimer*：

```
myTimerShoot = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(mySnapshotMethod) userInfo:nil repeats:YES]; 
```

# android - Android - 如何在 android 应用程序中打开 Adob e Acrobat

> ID：11646090
> 
> 赞同：-3
> 
> 时间：2012-07-25T08:57:28.477
> 
> 标签：android, pdf, adobe, acrobat

我正在开发一个用于显示 pdf 文件的 android 应用程序。我想在我的 android 应用程序中打开 adobe acrobat 来打开 pdf 文件。所以请帮助我如何做到这一点。

提前致谢。

问候 preet_Android

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:50:17.390

首先，您需要检查您的系统中是否有可用的 pdf 查看器。因此，您需要调用意图来读取文件

```
 Intent intent = new Intent(Intent.ACTION_VIEW,
    Uri.parse("path-to-document"));
intent.setType("application/pdf");
 PackageManager pm = getPackageManager();
 List<ResolveInfo> activities = pm.queryIntentActivities(intent, 0);
 if (activities.size() > 0) {
   startActivity(intent);
   }  
 else
  {
Toast.maketext("hi there is no pdf viewer in your system");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:00:55.233

您可以通过以下方式在您的应用中打开 pdf 文件：

```
File pdfFile = new File("/sdcard/read.pdf"); 
 if(pdfFile.exists()) {
           Uri path = Uri.fromFile(pdfFile); 
            Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
            pdfIntent.setDataAndType(path, "application/pdf");
            startActivity(pdfIntent);

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:01:53.717

```
File file = new File(mRealPath);
Uri path = Uri.fromFile(file);
Intent intent = new Intent(Intent.ACTION_VIEW);
setDataAndType(path, "application/pdf");

intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
try{
       //If pdf reader app already installed it will cause and exception

       startActivity(intent);    

}catch(Exception e)
{
    // IF NO PDF APPLICATION INSTALLED ASK USER TO DOWNLOAD
} 
```

# php - 如何在 iphone 应用程序的 url 中发布一些数据以获得所需的结果

> ID：11646094
> 
> 赞同：0
> 
> 时间：2012-07-25T08:57:44.530
> 
> 标签：php, iphone, mysql, xcode

我正在从服务器获取 json 格式的数据，但我希望用户在调用 json 服务时发送 user_id，以便它应该显示我正在使用以下代码的所需结果

如何通过传递 user_id PHP 代码从 iphone 调用数据

我用过

```
 $user_id=$_POST['user_id'];
   $query = mysql_query("SELECT s.*, u.user_id FROM survey_master AS s
JOIN user_profile AS u on u.user_id = s.user_id where s.user_id=$user_id");

    $rows = array();
    while($row = mysql_fetch_assoc($query)) {
   $rows[] = $row;
   }
  echo json_encode($rows); 
```

iPhone 代码

```
 NSArray *tempArray =[[DataManager staticVersion] startParsing:@"http://celeritas-solutions.com/emrapp/surveyDescription.php"];

for (int i = 0; i<[tempArray count]; i++) {

    id *item = [tempArray objectAtIndex:i];
    NSDictionary *dict = (NSDictionary *) item;
    ObjectData *theObject =[[ObjectData alloc] init];
    [theObject setSurvey_title:[dict objectForKey:@"survey_Title"]];
    [theObject setSurvey_Description:[dict objectForKey:@"survey_Description"]];    
    [theObject setDate_Created:[dict objectForKey:@"date_Created"]];

    [surveyList addObject:theObject];
    [theObject release];
    theObject=nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:03:21.137

您可以使用 GET 发送 user_id。

在 PHP；

```
$user_id=$_GET['user_id']; 
```

在 iPhone；

```
 NSString *url = [NSString stringWithFormat:@"http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=%@", user_id];
  NSArray *tempArray =[[DataManager staticVersion] startParsing:url]; 
```

# python - Python 如何处理全局变量？

> ID：11646105
> 
> 赞同：3
> 
> 时间：2012-07-25T08:58:14.657
> 
> 标签：python

我在 Python 中遇到了一些非常奇怪的全局变量处理。我希望有人能解释和证明这些惊喜！

A）此代码按预期打印 10 ：

```
def func():
  print(a)
a = 10
func() 
```

B）这段代码抛出了一个关于太早引用的异常：

```
def func():
  print(a)
  a += 1
a = 10
func() 
```

C）但是此代码按预期打印 [10] ：

```
def func():
  print(a)
  a.append(1)
a = [10]
func() 
```

所以我可以收集到它的类型`a`改变了它的范围，另外后来甚至还没有达到的声明改变了如何`a`被看到。我知道我可以`global a`在函数的开头使用，但它相当冗长。

谁能告诉我 Python 使用什么规则来处理其奇怪的作用域？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:00:07.213

第二个实例**重新绑定** `a`，因此编译器为其生成本地访问。另外两个只读`a`，因此执行正常的全局范围搜索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T09:13:38.110

基本上，有两个规则：

1.  当你只读取一个变量（在一个范围内）时，Python 将沿着范围链向上移动，直到找到该名称的变量。
2.  当您至少写入一次变量时，Python 将始终在当前范围内创建该变量。

但是，您可以更改 #2 的行为：

*   如果您希望名称引用模块级变量，您可以使用`global my_module_variable`. 当您现在写入 时`my_module_variable`，Python*不会*创建局部变量。
*   从 Python 3 开始，您还可以让名称引用封闭范围内的变量：使用`nonlocal my_non_local_variable`它来引用最近封闭范围内的变量。

## 代码中的问题

B）您正在使用`+=`：您正在尝试写入变量。所以规则 2 生效，它将写入当前范围内的变量。但是，它也必须从中读取 ( `print(a)`)，但该变量还没有值，因为您之前没有写入过它。Python 不允许您在函数中混合使用规则`1.`和规则`2.`。

如果你想`func()`处理这个`a = 10`变量，你可以像这样改变你的代码：

```
>>>> def func()
        global a
        print(a)
        a += 1
>>>> a = 10
>>>> func()
10
>>>> func()
11 
```

# excel - 按总数和最后一个字母排序所需的excel代码

> ID：11646106
> 
> 赞同：0
> 
> 时间：2012-07-25T08:58:15.450
> 
> 标签：excel, sorting

好的，我会更好地解释标题。

使用excel：

我有一个名为“PART”的字段，示例数据是 CV101R CV102R。每个部分都有一个替代部分，例如 CV101RN CV102RN。现在我需要对它们进行排序，使其看起来像末端带有 N 的零件编号在对应的下方。通常一个简单的按部分排序就可以做到这一点。不幸的是，还有第二列是销售。我的 excel 需要按销售额从上到下排序，但仍按相同的零件编号排序。

所以它仍然会显示 CV101L 和 CV101LN，但 CV101L 是该表的最高销量，低于它的是它的 N 版本，它有自己的销量……但这些销量相比可能较低。

有这样做的功能吗？还是需要额外的排序列等？正如你所知道的，我不经常使用 Excel，所以我希望有一个快速简单的方法，呵呵

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:32:47.757

一半的战斗是理解你想说什么。我想我大部分都理解 - “低比较”是什么意思？

我建议您了解 Excel 函数 LEN、RIGHT 和 LEFT。它们允许您操作文本单元格（这就是您的部件号）。

使用这些功能，您可以将您的零件编号分成您想要的任何组。

```
=LEFT(A2,5) // this will grab the first five chracters from the left of the part number.

=RIGHT(A2,LEN(A2)-5) // this will grab the right letter characters from your part number.

=RIGHT(D2,LEN(D2)-1) // This will split off any extra letters 
```

将零件编号拆分为单独的列后，您可以使用自定义排序进行排序：

![基本文本操作示例](../Images/63066dc0418d79baa2c62d2519ba2c03.png)

您还应该学习 CONCATENATE、FIND 和 MID - 仅供将来参考。

# git - 您尚未完成合并（MERGE_HEAD 存在）

> ID：11646107
> 
> 赞同：1375
> 
> 时间：2012-07-25T08:58:17.663
> 
> 标签：git

我创建了一个名为“f”的分支并进行了结帐。当我尝试`git pull`命令时，我收到了这条消息：

```
You have not concluded your merge (MERGE_HEAD exists).
Please, commit your changes before you can merge. 
```

当我尝试时`git status`，它给了我以下信息：

```
On branch master
# Your branch and 'origin/master' have diverged,
# and have 1 and 13 different commit(s) each, respectively.
#
# Changes to be committed:
#
#   modified:   app/assets/images/backward.png
#   modified:   app/assets/images/forward.png
#   new file:   app/assets/images/index_background.jpg
#   new file:   app/assets/images/loading.gif
#   modified:   app/assets/images/pause.png
#   modified:   app/assets/images/play.png
#   new file:   app/assets/javascripts/jquery-ui-bootstrap.js
#   new file:   app/assets/stylesheets/jquery-ui-bootstrap.css
#   modified:   app/controllers/friends_controller.rb
#   modified:   app/controllers/plays_controller.rb
#   modified:   app/mailers/invite_friends_mailer.rb
#   modified:   app/mailers/send_plays_mailer.rb
#   modified:   app/mailers/shot_chart_mailer.rb
#   modified:   app/views/friends/show_plays.html.erb
#   modified:   app/views/layouts/application.html.erb
#   modified:   app/views/plays/_inbox_table.html.erb
#   modified:   app/views/plays/show.html.erb
#   modified:   app/views/welcome/contact_form.html.erb
#   modified:   app/views/welcome/index.html.erb
#   modified:   log/development.log
#   modified:   log/restclient.log
#   new file:   tmp/cache/assets/C1A/C00/sprockets%2Fb7901e0813446f810e560158a1a97066
#   modified:   tmp/cache/assets/C64/930/sprockets%2F65aa1510292214f4fd1342280d521e4c
#   new file:   tmp/cache/assets/C73/C40/sprockets%2F96912377b93498914dd04bc69fa98585
#   new file:   tmp/cache/assets/CA9/090/sprockets%2Fa71992733a432421e67e03ff1bd441d8
#   new file:   tmp/cache/assets/CCD/7E0/sprockets%2F47125c2ebd0e8b29b6511b7b961152a1
#   modified:   tmp/cache/assets/CD5/DD0/sprockets%2F59d317902de6e0f68689899259caff26
#   modified:   tmp/cache/assets/CE3/080/sprockets%2F5c3b516e854760f14eda2395c4ff2581
#   new file:   tmp/cache/assets/CED/B20/sprockets%2F423772fde44ab6f6f861639ee71444c4
#   new file:   tmp/cache/assets/D0C/E10/sprockets%2F8d1f4b30c6be13017565fe1b697156ce
#   new file:   tmp/cache/assets/D12/290/sprockets%2F93ae21f3cdd5e24444ae4651913fd875
#   new file:   tmp/cache/assets/D13/FC0/sprockets%2F57aad34b9d3c9e225205237dac9b1999
#   new file:   tmp/cache/assets/D1D/DE0/sprockets%2F5840ff4283f6545f472be8e10ce67bb8
#   new file:   tmp/cache/assets/D23/BD0/sprockets%2F439d5dedcc8c54560881edb9f0456819
#   new file:   tmp/cache/assets/D24/570/sprockets%2Fb449db428fc674796e18b7a419924afe
#   new file:   tmp/cache/assets/D28/480/sprockets%2F9aeec798a04544e478806ffe57e66a51
#   new file:   tmp/cache/assets/D3A/ED0/sprockets%2Fcd959cbf710b366c145747eb3c062bb4
#   new file:   tmp/cache/assets/D3C/060/sprockets%2F363ac7c9208d3bb5d7047f11c159d7ce
#   new file:   tmp/cache/assets/D48/D00/sprockets%2Fe23c97b8996e7b5567a3080c285aaccb
#   new file:   tmp/cache/assets/D6A/900/sprockets%2Fa5cece9476b21aa4d5f46911ca96c450
#   new file:   tmp/cache/assets/D6C/510/sprockets%2Fb086a020de3c258cb1c67dfc9c67d546
#   new file:   tmp/cache/assets/D70/F30/sprockets%2Facf9a6348722adf1ee7abbb695603078
#   new file:   tmp/cache/assets/DA3/4A0/sprockets%2F69c26d0a9ca8ce383e20897cefe05aa4
#   new file:   tmp/cache/assets/DA7/2F0/sprockets%2F61da396fb86c5ecd844a2d83ac759b4b
#   new file:   tmp/cache/assets/DB9/C80/sprockets%2F876fbfb9685b2b8ea476fa3c67ae498b
#   new file:   tmp/cache/assets/DBD/7A0/sprockets%2F3640ea84a1dfaf6f91a01d1d6fbe223d
#   new file:   tmp/cache/assets/DC1/8D0/sprockets%2Fe5ee1f1cfba2144ec00b1dcd6773e691
#   new file:   tmp/cache/assets/DCC/E60/sprockets%2Fd6a95f601456c93ff9a1bb70dea3dfc0
#   new file:   tmp/cache/assets/DF1/130/sprockets%2Fcda4825bb42c91e2d1f1ea7b2b958bda
#   new file:   tmp/cache/assets/E23/DE0/sprockets%2Fb1acc25c28cd1fabafbec99d169163d3
#   new file:   tmp/cache/assets/E23/FD0/sprockets%2Fea3dbcd1f341008ef8be67b1ccc5a9c5
#   modified:   tmp/cache/assets/E4E/AD0/sprockets%2Fb930f45cfe7c6a8d0efcada3013cc4bc
#   new file:   tmp/cache/assets/E63/7D0/sprockets%2F77de495a665c3ebcb47befecd07baae6
#   modified:   tmp/pids/server.pid
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   Coachbase/
#   log/development.log.orig
#   log/restclient.log.orig 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2483
> 
> 时间：2012-07-25T10:38:31.393

问题是您之前的拉动未能自动合并并进入冲突状态。在下一次拉动之前，冲突没有得到妥善解决。

1.  撤消合并并再次拉动。

要撤消合并：

`git merge --abort` [从 git 版本 1.7.4 开始]

`git reset --merge` [以前的 git 版本]

2.  解决冲突。

3.  **不要忘记添加并提交合并。**

4.  `git pull`现在应该可以正常工作了。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2014-02-17T12:52:45.043

如果您确定您已经解决了所有合并冲突：

```
rm -rf .git/MERGE* 
```

并且错误将消失。

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2014-07-18T04:45:59.863

我认为值得一提的是，该消息`You have not concluded your merge (MERGE_HEAD exists)`可能出现的场景有很多，因为可能有很多人在搜索该消息后到达了该页面。分辨率将取决于您如何到达那里。

`git status`始终是一个有用的起点。

如果您已经将内容合并到您满意的程度，并且仍然收到此消息，则可以像这样做一样简单

```
git add file
git commit 
```

但同样，这真的取决于情况。在尝试任何事情之前了解基础知识是个好主意（Terence 发布了相同的链接）： [Git - Basic Merge Conflicts](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts)

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2019-08-26T19:17:28.207

我认为这是正确的方法：

```
git merge --abort

git fetch --all 
```

然后，您有两个选择：

```
git reset --hard origin/master 
```

或者，如果您在其他分支上：

```
git reset --hard origin/<branch_name> 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2021-04-22T02:21:30.510

中止对我不起作用。所以我不得不这样做`continue`，这对我有用：

```
git merge --continue 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-03-13T16:45:29.123

尝试

```
git reset --hard origin/trunk 
```

'trunk' 是我想要到达的分支。

我不知道这是如何或为什么起作用的。它与我所做的一些提交有关，这迫使我的拉取请求进行合并。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-11-08T06:25:52.497

我解决了冲突并提交了但仍然收到此错误消息`git push`

> 所有冲突都已修复，但您仍在合并。
> （使用“git commit”结束合并）

我做了这些步骤来解决错误：

```
rm -rf .git/MERGE*
git pull origin branch_name 
git push origin branch_name 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2020-03-13T12:21:11.043

提交合并更改解决了我的问题：

```
git commit -m "commit message" 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2021-08-25T14:54:55.497

只需运行此命令即可中止冲突：

```
git merge --abort 
```

之后，您可以拉取您的项目：

```
git pull origin YOUR_BRANCH 
```

> 测试 git 版本 2.25.1

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-09-29T15:38:54.120

就我而言，我有一个产生许多合并冲突的樱桃选择，所以我决定不完成樱桃选择。我放弃了所有的更改。这样做使我进入收到以下错误的状态：

> 您尚未完成合并（MERGE_HEAD 存在

为了解决这个问题，我执行了以下解决问题的 git 命令。

```
git cherry-pick --abort 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-05-10T05:12:04.220

尝试更改任何临时文件。就像只是删除任何空间或添加空间，然后提交并推送该文件。

> git add 'temporary_change_file'
> 
> git commit -m "git 问题解决"
> 
> git push origin 开发

然后尝试 git pull，

> git pull origin 开发

希望这可以帮助你。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-01-24T21:18:08.943

块引用

如果您试图从另一个分支拉入您的分支。如果您看到此错误。

首先，您应该尝试执行 git commit，然后将另一个分支拉入您的分支。

1.  “混帐添加。”
2.  git 提交
3.  然后从所需的分支执行 git pull 。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-11-14T06:54:33.460

最好的方法是撤消合并并再次执行合并。通常你会把事情的顺序搞砸。尝试解决冲突，让自己陷入混乱。

所以撤消它并再次合并。

确保为您的环境设置了适当的差异工具。我在 Mac 上使用 DIFFMERGE。我认为 DIFFMERGE 适用于所有环境。说明在这里：[在 MAC 上安装 DIFF Merge](http://twobitlabs.com/2011/08/install-diffmerge-git-mac-os-x/)

我有这个有助于解决我的冲突：[Git Basic-Merge-Conflicts](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-10-06T08:49:28.137

解决冲突后，我们可以使用`git merge --continue`git 2.12 及以上版本继续合并。可以看到这个[答案](https://stackoverflow.com/questions/2474097/how-do-i-finish-the-merge-after-resolving-my-merge-conflicts/41369600#41369600)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-07T05:03:35.997

首先，用于`git pull`合并存储库保存您的更改。然后重新输入`git commit -m "your commit"`。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-10-29T14:25:31.730

我解决了冲突，然后使用 -a 选项进行了提交。它对我有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-26T05:54:08.000

首先，在继续之前确保没有冲突。

检查是否没有***MERGE_MSG。**** .git 文件夹中的文件。

我知道没有冲突，不知何故我有两个（一个 * *.swp*第二个 * *.swo*）并删除它们（尝试将它们剪切+粘贴到某个不同的目录以防万一）有助于处理错误和合并成功。

 ** * *

## 回答 #18

> 赞同：-12
> 
> 时间：2015-09-21T12:42:47.337

这对我有用：

```
git log
`git reset --hard <089810b5be5e907ad9e3b01f>`
git pull
git status 
```*

# php - PHP 会话未创建

> ID：11646108
> 
> 赞同：2
> 
> 时间：2012-07-25T08:58:21.597
> 
> 标签：php, session

我在注册会话时遇到问题，它总是有效，但有一次，它没有。我使用*PHP 版本 5.2*，阅读了一些要更改`session_register("");`的内容`$_SESSION('') = $$blabla;`，所以我这样做了，但这也没有用。

这是我的代码：

```
<?
ob_start();
$host="localhost"; // Host name

$username="transrpt_transrp"; // Mysql username 

$password="******************"; // Mysql password 

$db_name="transrpt_transrp"; // Database name 

$tbl_name="PlayerData"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$myusername=$_POST['myusername']; 
$mypassword= hash('whirlpool', $_POST['mypassword']);

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM $tbl_name WHERE Name='$myusername' and Password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row

if($count!=0){
// Register $myusername, $mypassword and redirect to file "login_success.php"
$resultt = mysql_query("SELECT * FROM PlayerData WHERE Name='$myusername'");
$row = mysql_fetch_array($resultt);
$playerlevel = $row['PlayerLevel'];
$_SESSION['myusername'] = $$myusername;
$_SESSION['mypassword'] = $$mypassword;
$_SESSION['playerlevel'] = $$playerlevel;
header("location:index.php");
}
else {
echo "Wrong username or password";
}

ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:02:44.990

您尚未开始会话：使用`session_start()`

> $_SESSION('') = $$blabla;

这是没有意义的。就好像你试图调用一个函数，但你不能调用`$_SESSION`.

此外，您正在使用`$$myusername`and`$$mypassword`而不是`$myusername`and`$mypassword`

*   你为什么用`stripslashes()`？`mysql_real_escape_string()`照顾逃跑。你`magic_quotes`启用了吗？

*   由于您不再需要`$result`，您可以用第二次调用覆盖它，您 `mysql_query()`不需要`$resultt`.

*   你为什么要进行第二个查询？您已经从 中获取了适当的行`PlayerData`。

*   您似乎不需要输出缓冲。为什么你有`ob_start()`and `ob_end_flush()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:01:22.110

您是否尝试过添加 session_start(); 到您的 PHP 文件的开头？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:11:33.930

在脚本顶部使用 session_start()

# python - 在 setup.py 中包含直接依赖下载链接

> ID：11646110
> 
> 赞同：2
> 
> 时间：2012-07-25T08:58:34.217
> 
> 标签：python, egg, sourceforge, setup.py

可以为 Python egg 依赖项指定直接下载链接吗？

我有 Skype4Py 作为依赖项，easy_install 似乎无法从 sourceforge.net 正确下载文件（sourceforge.net 问题）。生成的 tar 文件被打乱。[https://github.com/stigkj/Skype4Py/issues/3](https://github.com/stigkj/Skype4Py/issues/3)

为了解决这个问题，我想为 Skype4Py 存档指定一个直接下载链接，以避免 sourceforge.net 出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:36:08.307

首先，我强烈建议使用 pip[而不是easy_install，因为它](https://stackoverflow.com/q/3220404/95735)[几乎](https://stackoverflow.com/a/13233935/95735)在各个方面都更好。

您不能直接在其中指定直接下载链接，`setup.py`但这是一件好事。应在安装时决定在何处查找依赖项。Pip 有一些[`options`](http://www.pip-installer.org/en/latest/usage.html#alternate-package-repositories)允许配置在哪里查找包；`--index-url`,`--extra-index-url`和`--find-links`. 但是，在您的情况下，我认为最简单的解决方案是首先使用某个备用位置安装无法从其*默认*位置安装的依赖项，然后安装使用它的软件包，如下所示：

`pip install alternate_location_of_dependency`
`pip install some_package_having_above_depedency`

以[`human_curl`](http://pypi.python.org/pypi/human_curl/)依赖于 pycurl2 包的包为例，可能是：

`pip install https://github.com/pycurl2/pycurl2.github.com/archive/master.zip`
`pip install human_curl`

# java - 添加自定义事件侦听器（休眠）抛出我 org.hibernate.MappingException：无法实例化指定事件（保存更新）侦听器类

> ID：11646111
> 
> 赞同：2
> 
> 时间：2012-07-25T08:58:36.153
> 
> 标签：java, hibernate, jboss5.x

我正在尝试在我的项目中为 (UPDATE,INSERT) 添加自定义事件侦听器。以下是我的代码片段。

hibernate.cfg.xml 文件条目：

```
<event type="post-insert">
    <listener class="sample.org.app.MyProjectAdaptorHibEventListener"/>
</event>
<event type="save-update">
    <listener class="sample.org.app.MyProjectAdaptorHibEventListener"/>
</event> 
```

和 MyProjectAdaptorHibEventListener 实现代码片段：

```
public class MyProjectAdaptorHibEventListener implements PostInsertEventListener,
    PostUpdateEventListener, PostDeleteEventListener,
    SaveOrUpdateEventListener {

private static final long serialVersionUID = 400000L;
private MyProjectAdaptorHibEventListenerUtil util;

public MyProjectAdaptorHibEventListener() {
    util = new MyProjectAdaptorHibEventListenerUtil();
    System.out.println("*************   MyProjectAdaptorHibEventListener loaded **************");
}

@Override
public void onPostDelete(PostDeleteEvent event) {
    util.objectChanged("DELETE", event.getEntity());

}

@Override
public void onPostUpdate(PostUpdateEvent event) {

    util.objectChanged("UPDATE", event.getEntity());

}

@Override
public void onPostInsert(PostInsertEvent event) {
    util.objectChanged("INSERT", event.getEntity());

}

@Override
public void onSaveOrUpdate(SaveOrUpdateEvent event)
        throws HibernateException {
    util.objectChanged("SAVEORUPDATE", event.getObject());

  }
} 
```

和我的 MyProjectAdaptorHibEventListenerUtil 代码：

```
public class MyProjectAdaptorHibEventListenerUtil {

MyProjectAdaptorHibEventListenerUtil(){        
}

public void objectChanged(String event, Object object) {

    if (object instanceof AbstractDomainObject && ! object.getClass().getName().startsWith("edu.wustl.common.domain.Audit")) {
        long objId = ((AbstractDomainObject) object).getId();
        System.out.println("*********** " + event + " : " + object.getClass().getName()+ ":" + objId + " , value= " + object.toString());
        insertIntoDB(event,object.getClass().getName(),objId);
    }else{
       // System.out.println("*********** " + event + " : " + object.getClass().getName());
    }
  }
} 
```

我不确定我的代码有什么问题。请建议我进行更改。我收到以下错误。

我正在使用 Hibernate 3 Jboss- 5.1.0 GA Java - 1.6

错误日志：

```
14:02:43,092 INFO  [STDOUT] *************   MyProjectAdaptorHibEventListener loaded **************
    14:02:43,104 INFO  [STDOUT] ERROR 14:02:43,097 (DAOFactory) - Unable to instantiate specified event (save-update) listener class: edu.wustl.bms.MyProjectAdaptorHibEventListener
    org.hibernate.MappingException: Unable to instantiate specified event (save-update) listener class: edu.wustl.bms.MyProjectAdaptorHibEventListener
        at org.hibernate.cfg.Configuration.setListeners(Configuration.java:1539)
        at org.hibernate.cfg.Configuration.parseEvent(Configuration.java:1521)
        at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1452)
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1414)
        at org.hibernate.cfg.Configuration.configure(Configuration.java:1405)
        at edu.wustl.dao.daofactory.DAOFactory.setConfiguration(DAOFactory.java:278)
        at edu.wustl.dao.daofactory.DAOFactory.buildSessionFactory(DAOFactory.java:195)
        at edu.wustl.dao.daofactory.ApplicationDAOPropertiesParser.parseDocument(ApplicationDAOPropertiesParser.java:143)
        at edu.wustl.dao.daofactory.ApplicationDAOPropertiesParser.getDaoFactoryMap(ApplicationDAOPropertiesParser.java:67)
        at edu.wustl.dao.daofactory.DAOConfigFactory.populateDaoFactoryMap(DAOConfigFactory.java:102)
        at edu.wustl.dao.daofactory.DAOConfigFactory.<init>(DAOConfigFactory.java:59)
        at edu.wustl.dao.daofactory.DAOConfigFactory.<clinit>(DAOConfigFactory.java:49)
        at edu.wustl.simplequery.bizlogic.QueryBizLogic.getQueryObjectNameTableNameMap(QueryBizLogic.java:129)
        at edu.wustl.simplequery.bizlogic.QueryBizLogic.initializeQueryData(QueryBizLogic.java:307)
        at edu.wustl.catissuecore.util.listener.CatissueCoreServletContextListener.initCatissueParams(CatissueCoreServletContextListener.java:127)
        at edu.wustl.catissuecore.util.listener.CatissueCoreServletContextListener.contextInitialized(CatissueCoreServletContextListener.java:97)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4393)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:310)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
        at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
        at $Proxy38.start(Unknown Source)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
        at org.jboss.system.ServiceController.start(ServiceController.java:460)
        at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
        at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
        at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
        at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
        at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
        at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
        at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.ArrayStoreException: edu.wustl.bms.MyProjectAdaptorHibEventListener
        at org.hibernate.cfg.Configuration.setListeners(Configuration.java:1536)
        ... 84 more
    14:02:43,108 INFO  [STDOUT] ERROR 14:02:43,107 (DAOFactory) - Problem while parsing hibernate configuration file.
    edu.wustl.dao.exception.DAOException: Problem while parsing hibernate configuration file.
        at edu.wustl.dao.util.DAOUtility.getDAOException(DAOUtility.java:348)
        at edu.wustl.dao.daofactory.DAOFactory.setConfiguration(DAOFactory.java:284)
        at edu.wustl.dao.daofactory.DAOFactory.buildSessionFactory(DAOFactory.java:195)
        at edu.wustl.dao.daofactory.ApplicationDAOPropertiesParser.parseDocument(ApplicationDAOPropertiesParser.java:143)
        at edu.wustl.dao.daofactory.ApplicationDAOPropertiesParser.getDaoFactoryMap(ApplicationDAOPropertiesParser.java:67)
        at edu.wustl.dao.daofactory.DAOConfigFactory.populateDaoFactoryMap(DAOConfigFactory.java:102)
        at edu.wustl.dao.daofactory.DAOConfigFactory.<init>(DAOConfigFactory.java:59)
        at edu.wustl.dao.daofactory.DAOConfigFactory.<clinit>(DAOConfigFactory.java:49)
        at edu.wustl.simplequery.bizlogic.QueryBizLogic.getQueryObjectNameTableNameMap(QueryBizLogic.java:129)
        at edu.wustl.simplequery.bizlogic.QueryBizLogic.initializeQueryData(QueryBizLogic.java:307)
        at edu.wustl.catissuecore.util.listener.CatissueCoreServletContextListener.initCatissueParams(CatissueCoreServletContextListener.java:127)
        at edu.wustl.catissuecore.util.listener.CatissueCoreServletContextListener.contextInitialized(CatissueCoreServletContextListener.java:97)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4393)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:310)
        at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
        at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
        at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
        at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
        at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
        at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
        at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
        at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
        at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
        at $Proxy38.start(Unknown Source)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
        at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
        at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
        at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
        at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
        at org.jboss.system.ServiceController.start(ServiceController.java:460)
        at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
        at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
        at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
        at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
        at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
        at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
        at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter.java:117)
        at org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:70)
        at org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
        at org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
        at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
        at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
        at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
        at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
        at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
        at org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
        at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
        at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:461)
        at org.jboss.Main.boot(Main.java:221)
        at org.jboss.Main$1.run(Main.java:556)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: org.hibernate.MappingException: Unable to instantiate specified event (save-update) listener class: edu.wustl.bms.MyProjectAdaptorHibEventListener
        at org.hibernate.cfg.Configuration.setListeners(Configuration.java:1539)
        at org.hibernate.cfg.Configuration.parseEvent(Configuration.java:1521)
        at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1452)
        at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1414)
        at org.hibernate.cfg.Configuration.configure(Configuration.java:1405)
        at edu.wustl.dao.daofactory.DAOFactory.setConfiguration(DAOFactory.java:278)
        ... 79 more
    Caused by: java.lang.ArraySt
    14:02:43,108 INFO  [STDOUT] oreException: edu.wustl.bms.MyProjectAdaptorHibEventListener
        at org.hibernate.cfg.Configuration.setListeners(Configuration.java:1536)
        ... 84 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:05:39.687

**编辑**
我认为你的xml有问题。据我所知，没有事件类型：（ `insert`至少在 hibernate v3.3 中没有）但有以下类型（以及需要实现的接口）：

```
"auto-flush"- AutoFlushEventListener
"merge", MergeEventListener
"create", PersistEventListener
"create-onflush", PersistEventListener
"delete", DeleteEventListener
"dirty-check", DirtyCheckEventListener
"evict", EvictEventListener
"flush", FlushEventListener
"flush-entity", FlushEntityEventListener
"load", LoadEventListener
"load-collection", InitializeCollectionEventListener
"lock", LockEventListener
"refresh", RefreshEventListener
"replicate", ReplicateEventListener
"save-update", SaveOrUpdateEventListener
"save", SaveOrUpdateEventListener
"update", SaveOrUpdateEventListener
"pre-load", PreLoadEventListener
"pre-update", PreUpdateEventListener
"pre-delete", PreDeleteEventListener
"pre-insert", PreInsertEventListener
"pre-collection-recreate", PreCollectionRecreateEventListener
"pre-collection-remove", PreCollectionRemoveEventListener
"pre-collection-update", PreCollectionUpdateEventListener
"post-load", PostLoadEventListener
"post-update", PostUpdateEventListener
"post-delete", PostDeleteEventListener
"post-insert", PostInsertEventListener
"post-commit-update", PostUpdateEventListener
"post-commit-delete", PostDeleteEventListener
"post-commit-insert", PostInsertEventListener
"post-collection-recreate", PostCollectionRecreateEventListener
"post-collection-remove", PostCollectionRemoveEventListener
"post-collection-update", PostCollectionUpdateEventListener 
```

所以我认为你应该使用“post-insert”，因为这种类型要求你的监听器实现 PostInsertEventListener（你实现的那个）

**OLD**
我看到您收到此异常的根本原因是 java.lang.ArrayStoreException，正如 javadoc 所述，它是

> 抛出以指示已尝试将错误类型的对象存储到对象数组中。例如，以下代码生成 ArrayStoreException：
> 
> ```
>  Object x[] = new String[3];
>     x[0] = new Integer(0); 
> ```

请提供 MyProjectAdaptorHibEventListener 的来源

# jquery - jquery将价格加在一起

> ID：11646112
> 
> 赞同：0
> 
> 时间：2012-07-25T08:58:43.813
> 
> 标签：jquery

早上，我在使用 jQuery 加总一些总数时遇到问题。

我将以下内容传递给...

*   价格 - 600.00
*   航运 - 4.05

但是我得到以下结果......

> subTotal = 600
> productShipping = 4.05
> orderTotal = 4.05600

```
 $.each(result, function (index, res) {
                var price = 600.00; //res.productPrice;

                var subTotal = res.itemQty * price;
                var orderTotal = res.productShipping + subTotal;

                new_record = "<tr>" +
                             "<td class=\"totals\">Sub Total</td>" +
                             "<td>£" + subTotal + "</td>" +
                             "</tr>" +
                             "<tr>" +
                             "<td class=\"totals\">Shipping</td>" +
                             "<td>£" + res.productShipping + "</td>" +
                             "</tr>" +
                             "<tr>" +
                             "<td class=\"totals\">Order Total</td>" +
                             "<td>£" + orderTotal + "</td>" +
                             "</tr>";

                $('#orderTotals').append(new_record); 
```

我觉得我的 jQuery 添加这些项目可能存在一些问题，但是我可以解决。有人可以说明我哪里出错了。

res 是我从 web 服务调用中使用的响应。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:01:53.263

`+`将连接字符串以及将数字相加。当你得到连接时，我们可以假设它`res.productShipping`是一个字符串。

因此在相加之前将其解析为浮点数：

```
var orderTotal = parseFloat(res.productShipping) + subTotal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:01:31.997

`res.productShipping`当您使用它来创建时，您是否尝试过包裹`parseInt()`或`parsedouble()`（或类似的）`ordertotal`？

在我看来，这听起来像是试图将它们作为字符串加在一起 ​​- 因此将它们连接起来 - 而不是将数字加在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:02:44.173

试试这个：

```
var orderTotal = parseFloat(res.productShipping) + parseFloat(subTotal); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:03:29.207

您应该使用 parseInt 将价格转换为数字，然后执行计算。

# locate - 如何找出我的定位数据库的年龄？

> ID：11646120
> 
> 赞同：0
> 
> 时间：2012-07-25T08:59:08.103
> 
> 标签：locate

```
locate -Sd /path/to/db 
```

没有给出数据库的年龄。而且我在 locate 或 updatedb 的手册页中找不到任何进一步的信息。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:13:50.637

您无需查找即可找到。只需右键单击资源管理器中的文件并选择属性。“Created”值告诉您数据库何时创建。

# php - 锁定未注册IP地址的表数据库访问

> ID：11646121
> 
> 赞同：0
> 
> 时间：2012-07-25T08:59:09.320
> 
> 标签：php, mysql, login, locking, ip-address

美好的一天，伙计们，

我正在创建一个将在我的 Web 服务器上运行的系统。问题是当用户获得他们的帐户详细信息（用户表中的用户名和密码）然后可以在公司以外的任何地方打开它。我不知道如何创建这个，但我有一些方法：

1.  每台计算机都有各自的 IP 地址。我想要的是该系统只有在从公司网络内部访问而不是从外部访问时才能工作。你能帮我解决这个问题吗？

2.  除了第一点，如何在没有用户登录时锁定表并在任何用户登录时解锁表。

我正在使用 mysql 数据库、php、phpmyadmin ......你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:14:25.893

```
$ip=$_SERVER['REMOTE_ADDR'];
if($ip=="xxx.xxx.xxx.xxx") //xxx.xxx.xxx.xxx will be your gateway ip
{
//your application code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:32:19.323

实际上第一个应该在 PHP 中完成，因为您对数据库的请求将仅通过 Web 服务器发送（希望如此）

```
 print_r($_SERVER);
                    $myip = $_SERVER['REMOTE_ADDR']; 
```

但是，如果您有直接的 mysql 访问权限，则限制登录名撤销所有其他授予选择 A_DATABASE_NAME.A_TABLE_NAME 到 'login'@'hostname'

对于2，您的意思是实际上不允许任何人在没有登录权的情况下访问数据吗？只需授予适当的授权。您的应用程序是唯一允许登录的应用程序

即 1\. 您的数据库只能由 1 个登录帐户访问，只能通过 php 服务器访问 2\. 将 db.privatetable 上的选择授予对外部网络可见的表 3\. 不惜一切代价避免锁定

# sql - 如何创建一个有两个长列的表？

> ID：11646124
> 
> 赞同：4
> 
> 时间：2012-07-25T08:59:27.293
> 
> 标签：sql, oracle, sqldatatypes

我正在使用 Oracle 10 g。

我有一个需要两列`Long`类型的表：

```
CREATE TABLE emp
 (
    id1 LONG NULL,
    id2 LONG NULL,
    //
    // Other columns.
); 
```

当我执行这个查询时，它给了我这个错误：

```
Error report:
SQL Error: ORA-01754: a table may contain only one column of type LONG
01754\. 00000 -  "a table may contain only one column of type LONG"
*Cause:    An attempt was made to add a LONG column to a table which already
           had a LONG column. Note that even if the LONG column currently
           in the table has already been marked unused, another LONG column
           may not be added until the unused columns are dropped.
*Action:   Remove the LONG column currently in the table by using the ALTER
           TABLE command. 
```

我在谷歌上搜索，但找不到合适的解决方案。为什么他们不允许两列`LONG`？

使用`number`而不是列是个好主意吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T09:03:07.613

`LONG`柱子很久不推荐了；从 8i 开始，我相信。来自[11g 文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#sthref138)：

> 不要创建具有 LONG 列的表。请改用 LOB 列（CLOB、NCLOB、BLOB）。支持 LONG 列仅是为了向后兼容。

您只被允许`LONG`在表格中使用一列。我不完全确定，但我认为这是因为`LONG`数据与其他列一起存储，而且不止一个会使它更难以管理。LOB 的存储方式不同；[请参阅此处](http://docs.oracle.com/cd/E11882_01/appdev.112/e18294/adlob_tables.htm#i1006208)的表格进行比较。

* * *

Oracle 的[`LONG`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#i54330)数据类型是“可变长度高达 2 GB 的字符数据”。如果要存储数字数据，请使用`NUMBER`.

如果您正在映射 Java 数据类型（从您的配置文件中猜测！），[此表](http://docs.oracle.com/cd/B19306_01/java.102/b14355/datacc.htm#BHCJBJCC)可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:08:18.907

由于 Oracle 8i 建议不要使用 LONG 数据类型，而是使用 CLOB 或 NLOB 数据类型。

以防万一查看有关数据类型的[Oracle 10g 文档](http://docs.oracle.com/cd/B13789_01/server.101/b10759/sql_elements001.htm)。另[请查看此处了解其他详细信息](http://www.orafaq.com/wiki/LONG)

# c# - 我的积分算法正确吗？我们还可以改进并行处理和效率吗？代码在 C# 中

> ID：11646125
> 
> 赞同：2
> 
> 时间：2012-07-25T08:59:33.047
> 
> 标签：c#, .net, performance, parallel-processing, calculus

我如何更好地计算定积分？我正在使用一个函数来集成，另一个函数来递归地找到阶乘。

我想改进算法或效率，甚至在这方面的准确性。

```
 public static double testStatistic(double meanTreatmentSumOfSquares, double meanErrorSumOfSquares)
    {
        return (meanTreatmentSumOfSquares / meanErrorSumOfSquares);
    }

    public static double pValue(double fStatistic, int degreeNum, int degreeDenom)
    {
        double pValue = 0;
        pValue = integrate(0, fStatistic, degreeNum, degreeDenom);

        return pValue;

    }

    public static double integrate(double start, double end, int degreeFreedomT, int degreeFreedomE)
    {
        int iterations = 100000;
        double x, dist, sum = 0, sumT = 0;
        dist = (end - start) / iterations;
        for (int i = 1; i <= iterations; i++)
        {
            x = start + i * dist;
            sumT += integralFunction(x - dist / 2, degreeFreedomT, degreeFreedomE);
            if (i < iterations)
            {
                sum += integralFunction(x, degreeFreedomT, degreeFreedomE);
            }
        }
        sum = (dist / 6) * (integralFunction(start, degreeFreedomT, degreeFreedomE) + integralFunction(end, degreeFreedomT, degreeFreedomE) + 2 * sum + 4 * sumT);
        return sum;
    }

    public static double integralFunction(double x, int degreeFreedomT, int degreeFreedomE)
    {
        double temp=0;
        temp = ((Math.Pow(degreeFreedomE, degreeFreedomE / 2) * Math.Pow(degreeFreedomT, degreeFreedomT / 2)) / (factorial(degreeFreedomE / 2 - 1) * factorial(degreeFreedomT / 2 - 1))) * (factorial(((degreeFreedomT + degreeFreedomE) / 2 - 1)))*((Math.Pow(x, degreeFreedomE / 2 - 1)) / (Math.Pow((degreeFreedomT + degreeFreedomE * x), ((degreeFreedomE + degreeFreedomT) / 2))));
        return temp;
    }

    public static double factorial(double n)
    {
        if (n == 0)
        {
            return 1.0;
        }
        else
        {
            return n * factorial(n - 1);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:11:08.873

这些可能是评论而不是答案...

您递归地计算阶乘。迭代计算阶乘可能会更快；与以往一样，您应该对此进行测试，以找出在您的平台上最有效的方法。更糟糕的是，您在阶乘函数的开头测试了一个与 0 相等的 double 值。您使用的函数仅适用于整数，如果您真的想计算实数的阶乘，您应该（最有可能）[使用 Gamma Function](http://en.wikipedia.org/wiki/Gamma_function)。

由于从to的定积分等于从 to 的定积分加上从`a`to的定积分（对于行为合理的函数），您可以将定积分的计算拆分为任意数量的块。`b``a``c``c``b``a < c < b`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:05:06.383

阶乘计算效率极低，尤其是当输入值变大时。我还想记住计算 - 为什么一旦有了它就重做呢？

更好的解决方案是使用 gamma 函数来实现它。它也更能抵抗溢出，因为它返回一个双精度值。

我也会担心这个计算的数值错误：

```
temp = ((Math.Pow(degreeFreedomE, degreeFreedomE / 2) * Math.Pow(degreeFreedomT, degreeFreedomT / 2)) / (factorial(degreeFreedomE / 2 - 1) * factorial(degreeFreedomT / 2 - 1))) * (factorial(((degreeFreedomT + degreeFreedomE) / 2 - 1)))*((Math.Pow(x, degreeFreedomE / 2 - 1)) / (Math.Pow((degreeFreedomT + degreeFreedomE * x), ((degreeFreedomE + degreeFreedomT) / 2)))); 
```

您正在乘以和除以可能很大的数字。您希望四舍五入不会杀死您，并且取消会成功

另一件要尝试的事情是利用对数来发挥自己的优势。它们有两个不错的属性：

```
ln(A*B) = ln(A) + ln(B) 
```

和

```
ln(A/B) = ln(A) - ln(B) 
```

这将减少那些较大数字的大小，并使计算更不容易出现舍入错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:24:13.930

如下更改 for 循环以删除 for 循环内的 if 条件：

```
for (int i = 1; i < iterations; i++)
{
    x = start + i * dist;
    sumT += integralFunction(x - dist / 2, degreeFreedomT, degreeFreedomE);
    sum += integralFunction(x, degreeFreedomT, degreeFreedomE);
}
x = start + iterations * dist;
sumT += integralFunction(x - dist / 2, degreeFreedomT, degreeFreedomE); 
```

编辑：您也可能想要使用此编译器选项`-finline-functions`（适用于 gcc 和 icc。检查 C# 中的等效项）。对函数的调用`integralFunction` （一个简单的 1 行函数）将在编译期间内联，并且可以消除每次迭代的函数调用开销

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T09:05:09.620

您可以使用并行化您的外部 for 循环`Parallel.For`。请注意，您不能随处使用它。这在很大程度上取决于算法和/或数据。

```
public static double integrate(double start, double end, int degreeFreedomT, int degreeFreedomE)
{
    int iterations = 100000;
    double x, dist, sum = 0, sumT = 0;
    dist = (end - start) / iterations;
    Parallel.For(1, iterations, i => {
        x = start + i * dist;
        sumT += integralFunction(x - dist / 2, degreeFreedomT, degreeFreedomE);
        if (i < iterations)
        {
            sum += integralFunction(x, degreeFreedomT, degreeFreedomE);
        }
    });

    sum = (dist / 6) * (integralFunction(start, degreeFreedomT, degreeFreedomE) + integralFunction(end, degreeFreedomT, degreeFreedomE) + 2 * sum + 4 * sumT);
    return sum;
} 
```

# algorithm - 批量加载最小-最大堆

> ID：11646126
> 
> 赞同：2
> 
> 时间：2012-07-25T08:59:34.960
> 
> 标签：algorithm, data-structures, heap, bulk, bulk-load

最小-最大堆是可以在 中找到最小和最大元素`O(1)` 并将其删除的堆`O(log n)`。它与经典堆密切相关，但它实际上交错了三个堆：一个最小堆和两个最大堆，其中偶数级别是最小级别，奇数级别是最大级别（因此有两个根）。经典的堆属性适用于孙子而不是孩子。min-max-heap 的叶子层级本质上在 min 和 max 堆之间共享，在这里插入的新元素可以移动到树的偶数层或奇数层。

虽然 sift up 和 sift down 是简单的修改，但棘手的部分是当元素需要从堆的最小排序部分移动到最大排序部分时。

对于经典堆，我可以`O(n)`通过执行自下而上的堆修复来批量加载树，而明显的逐一插入需要`O(n log n)`时间。我也可以为批量插入执行此操作，而不是一一插入，我可以将它们全部附加并批量修复堆。

对于 min-max 堆，我当然可以线性加载它`O(n log n)`，但我想知道是否还有一种方法可以将它批量加载`O(n)`或批量修复堆自下而上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T16:44:15.750

对于可能有相同问题的其他人，我将用我迄今为止发现的内容来回答自己：

最小-最大堆本质上是*三合一*的堆，具有共享的叶级别。

```
 min1           <--- one min heap, first level
     /      \
   mi2       mi3      <--- third level
  /   \     /   \
 m5   m6   m7   m8    <--- fifth level
 /\   /\   /\   /\
a  b c  d e  f g  h   <--- leaf level (here: sixth level)
 \/   \/   \/   \/
 x1   x2   x3   x4    <--- fourth level
   \ /       \ /
   max1      max2     <--- two max heaps, second level 
```

（重要提示：这不准确，因为堆的扇出为 4！另外，这是逻辑顺序，而不是内存布局，它按层次交错堆）叶级别的对象属于所有三个堆，这是元素从堆的最小部分过渡到最大部分的地方。

现在可以计算最小堆和最大堆的大小，使用部分排序（例如快速选择）对数据进行分区并单独批量加载这三个部分。但是，*quickselect 的成本已经与您希望整个批量加载的成本一样高*（部分订购数据集）！批量加载和批量修复（！）堆的另一种明显方法是查看较小的子堆。在常规最小堆中，您将查看三个元素 a、b、c 的原子堆，并确保 a 是最小的。在这里，我们可以查看高度为 4 的堆，即 15 个元素：

```
 min1
         /  \
    max1      max2
   /  \        /  \
 m1    m2    m3    m4
 /\    /\    /\    /\
a  b  c  d  e  f  g  h 
```

并确保 min1 是最小的，max1 和 max2 是最大的两个，m1-m4 是接下来的 4 个最大的，并且分两级爬上树（即仅 min 级）

或者我们可以查看大小为 7（3 个级别）的堆并识别最小和最大类型

```
 min1           max1
   /  \           /  \
max1  max2     min1  min2
 /\    /\       /\    /\
a  b  c  d     a  b  c  d 
```

确保对于最低级别我们有第一种类型，对于最高级别我们有第二种类型。然后我们需要遍历所有级别。

但也许更好的解决方案是使用**区间堆**。这本质上也是一个交错的最小和最大堆。但是，它们是对称交错的并且具有相同的大小。它们似乎实现起来要简单得多，并且可以解释为如下所示的堆：

```
 min1,max1
      /       \
min2,max2   min3,max3 
```

有关批量加载的详细信息，请参阅原始区间堆出版物。

**因此，如果您对可批量加载的最小最大堆感兴趣，请考虑查看区间堆！**有人说它们无论如何都优于最小最大堆；它们密切相关，应该更容易实施。特别是，没有明显的理由为什么最小最大堆应该表现得更好，如果详细的复杂性分析表明它们在需要的比较和交换中的一个常数因子表现更差（因为据我可以天真地说，一个 min-max-heap 需要更多的比较来验证堆的正确性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:37:31.317

我相信自下而上的树修复应该有效：

```
def heapify(N)
  if (N is a min-node)
     if(*N > *left_child(N))
        swap(*N, *left_child(N))
     if(*N > right_child(N))
        swap(*N, *right_child(N))
     find the smallest X among N, grand-children(N)
  else
     if(*N < left_child(N))
        swap(*N, *left_child(N))
     if(*N < right_child(N))
        swap(*N, *right_child(N))
     find the largest X among N, grand-children(N)
  if(X != N)
     swap(*X, *N)
     heapify(X)

load heap in arbitrary order
for each N in bottom-up order of heap
   heapify(N) 
```

# c - 包含引用本地 C 库的本地 Perl 模块

> ID：11646127
> 
> 赞同：1
> 
> 时间：2012-07-25T08:59:36.883
> 
> 标签：c, perl, wrapper, portability, suffix-tree

我想在未安装的 Perl 脚本中包含一个本地模块。下面的代码似乎适用于此目的。但是，我要包含的模块是 C 库的包装器。我这样做如下：

```
use FindBin;
use lib "$FindBin::Bin/gray-tree-suffix-59e1c06/lib";
use Tree::Suffix; 
```

Perl 模块称为[Tree::Suffix](https://github.com/gray/tree-suffix)并充当[libstree](http://www.icir.org/christian/libstree/)的包装器。我的问题是，我如何在本地也引用 C 库（假设它没有安装）。

我认为这与 Perl 模块的内部工作有关？如果这是一个业余问题，我深表歉意。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:21:21.163

你试过这个：

说`.so`文件是`foo.so`，它的完整路径是`/bar/baz/foo.so`：

```
BEGIN
{
  $ENV{LD_LIBRARY_PATH} = '/bar/baz:'.$ENV{LD_LIBRARY_PATH};
}

use FindBin;
use lib "$FindBin::Bin/gray-tree-suffix-59e1c06/lib";
use Tree::Suffix; 
```

或者，`LD_LIBRARY_PATH`在调用 Perl 程序之前更改 shell：

```
export LD_LIBRARY_PATH=/bar/baz:$LD_LIBRARY_PATH
[run your program] 
```

# sql - SQL 查询 - 平均数据增加

> ID：11646130
> 
> 赞同：0
> 
> 时间：2012-07-25T08:59:44.683
> 
> 标签：sql, vb.net, sql-server-2008

我每 x 小时进行一次数据轮询，它基于液位。水平总是在上升。

我需要知道如何计算一周（每天）的平均增长。

因此，如果天数数据为 1000-1200-1300-1400，那么我们知道平均每天增加 100 个。

```
DateReceived  DeviceLevel Serial

1/mm/yyyy     3200         346
1/mm/yyyy     12000        222
2/mm/yyyy     3560         346
2/mm/yyyy     13600         222 
```

试图使用

```
AVG() 
```

功能但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:06:40.687

您可以使用自加入来查找前一天的级别。这会给你一天的增长。外部查询可用于查找一周内的平均增长：

```
select  datepart(wk, Day) as WeekNr
,       avg(IncreasePerDay) as AverageDailyIncrease
from    (
        select  cast(d1.MeasureDt as date) as Day
        ,       avg(d2.level) - avg(d1.level) as IncreasePerDay
        from    YourTable d1
        join    YourTable d2
        on      cast(d2.MeasureDt as date) = cast(d1.MeasureDt as date) + 1
        group by
                cast(d1.MeasureDt as date)
        ) as SubQueryAlias
group by
        datepart(wk, Day) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:06:21.593

对于你的桌子#t

```
select t2.serial, avg(t2.devicelevel-t1.devicelevel) from #t t1
    inner join #t t2 on t1.datereceived = dateadd(d,1,t2.datereceived)
group by t2.serial 
```

间隔4小时...

```
create table #t (polldate datetime, amount int)
insert #t values ('2012-06-01 16:00', 200),
('2012-06-01 20:00', 220),
('2012-06-02 00:00', 250),
('2012-06-02 04:00', 270)

select avg(t1.amount-t2.amount) from #t t1
    inner join #t t2 on t1.polldate = dateadd(hh,4,t2.polldate)

drop table #t 
```

# c# - 扫描字符串中的数值c#

> ID：11646138
> 
> 赞同：0
> 
> 时间：2012-07-25T08:59:58.803
> 
> 标签：c#, string

我有一个字符串`string rx;` ，该字符串具有以下类型的数据：“v=123.111i=10.123r=1234\r\n”

所以，我想要的是：-有一个 3 个浮点（或其他一些十进制变量）变量，“v”i”和“r”。-扫描字符串......使用像“v=%.3fi=”这样的格式字符串%.3fr=%.3f\r\n" 其中 %.3f 是值（3 个十进制数字）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:07:56.273

`var result = Regex.Matches(rx, @"\d+([,.]\d{1,3})?");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:00:30.063

使用`Regex`和`Double.Parse`：

```
var inputString = @"v=123.111i=10.123r=1234\r\n";

foreach (Match match in Regex.Matches(inputString, @"\d+[.]?\d{3}"))
{
    double result = Double.Parse(match.Value);
} 
```

解释：

```
\d+          digits (0-9) 
             (1 or more times, matching the most amount possible)

[.]?         character of: '.' 
             (optional, matching the most amount possible)

\d{3}        digits (0-9) 
             (3 times) 
```

我用过[`Double.Parse`](http://msdn.microsoft.com/en-us/library/fd84bdyt.aspx)。它将`string`数字的表示形式转换为其等效的双精度浮点数。

# java - this.getClass().getClassLoader().getResourceAsStream 总是返回 null

> ID：11646147
> 
> 赞同：2
> 
> 时间：2012-07-25T09:00:30.787
> 
> 标签：java, classloader

在使用 Web 应用程序读取文件时

```
this.getClass().getClassLoader().getResourceAsStream(../abc.txt) 
```

总是返回null。谁能提供详细信息我应该把 abc.txt 放在哪里以便阅读。任何关于 getResourceAsStream 的文章都会有所帮助。我搜索了很多，但没有得到任何相关信息。

请提出您宝贵的建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:13:43.663

如果您`abc.txt`在`classpath`不同的包装中，例如`com/test/oops/testpaper/abc.txt`.

然后像下面这样阅读。

```
InputStream io=this.getClass().getClassLoader().getResourceAsStream("com/test/oops/testpaper/abc.txt"); 
```

有关详细信息，请通过[java doc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)。

# android - 运行应用程序后在 logcat 中显示这些错误？

> ID：11646148
> 
> 赞同：0
> 
> 时间：2012-07-25T09:00:32.047
> 
> 标签：android, nullpointerexception

```
07-25 14:27:41.218: E/AndroidRuntime(351): FATAL EXCEPTION: Thread-8
07-25 14:27:41.218: E/AndroidRuntime(351): java.lang.NullPointerException: println needs a message
07-25 14:27:41.218: E/AndroidRuntime(351):  at android.util.Log.println_native(Native Method)
07-25 14:27:41.218: E/AndroidRuntime(351):  at android.util.Log.e(Log.java:215)
07-25 14:27:41.218: E/AndroidRuntime(351):  at commerce.app.lib.login.LoginScreen$1$1.run(LoginScreen.java:224)
07-25 14:27:42.848: E/WindowManager(351): Activity commerce.app.lib.login.LoginScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f299e0 that was originally added here
07-25 14:27:42.848: E/WindowManager(351): android.view.WindowLeaked: Activity commerce.app.lib.login.LoginScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f299e0 that was originally added here
07-25 14:27:42.848: E/WindowManager(351):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
07-25 14:27:42.848: E/WindowManager(351):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
07-25 14:27:42.848: E/WindowManager(351):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
07-25 14:27:42.848: E/WindowManager(351):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
07-25 14:27:42.848: E/WindowManager(351):   at android.app.Dialog.show(Dialog.java:241)
07-25 14:27:42.848: E/WindowManager(351):   at android.app.ProgressDialog.show(ProgressDialog.java:107)
07-25 14:27:42.848: E/WindowManager(351):   at android.app.ProgressDialog.show(ProgressDialog.java:90)
07-25 14:27:42.848: E/WindowManager(351):   at commerce.app.lib.login.LoginScreen$1.onClick(LoginScreen.java:214)
07-25 14:27:42.848: E/WindowManager(351):   at android.view.View.performClick(View.java:2408)
07-25 14:27:42.848: E/WindowManager(351):   at android.view.View$PerformClick.run(View.java:8816)
07-25 14:27:42.848: E/WindowManager(351):   at android.os.Handler.handleCallback(Handler.java:587)
07-25 14:27:42.848: E/WindowManager(351):   at android.os.Handler.dispatchMessage(Handler.java:92)
07-25 14:27:42.848: E/WindowManager(351):   at android.os.Looper.loop(Looper.java:123)
07-25 14:27:42.848: E/WindowManager(351):   at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 14:27:42.848: E/WindowManager(351):   at java.lang.reflect.Method.invokeNative(Native Method)
07-25 14:27:42.848: E/WindowManager(351):   at java.lang.reflect.Method.invoke(Method.java:521)
07-25 14:27:42.848: E/WindowManager(351):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 14:27:42.848: E/WindowManager(351):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 14:27:42.848: E/WindowManager(351):   at dalvik.system.NativeStart.main(Native Method)
07-25 14:27:43.328: I/Process(351): Sending signal. PID: 351 SIG: 9 
```

私有 CapstrovDatabaseOperations dbOperation；私有上下文 mContext；

```
 CheckBox remember;
 CheckBox loginAutomatic;
 EditText accountNumber;
 EditText emailAddress;
 EditText password;
 int flag = 0;
 ProgressDialog dialog;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.login_screen);
    TextView txAreaName = (TextView) findViewById(R.id.areaName);
    txAreaName.setText("");

    accountNumber = (EditText) findViewById(R.id.ed_AccountNumber);
    emailAddress = (EditText) findViewById(R.id.ed_Email);
    password = (EditText) findViewById(R.id.ed_password);
    remember = (CheckBox) findViewById(R.id.chk_Remember);
    loginAutomatic = (CheckBox) findViewById(R.id.chk_Automatically);

    accountNumber
            .setBackgroundResource(android.R.drawable.editbox_background);
    emailAddress
            .setBackgroundResource(android.R.drawable.editbox_background);
    password.setBackgroundResource(android.R.drawable.editbox_background);

    mContext = getApplicationContext();
    dbOperation = new CapstrovDatabaseOperations(mContext);

    // Creating table in database
    dbOperation.createTable();

    // Opening Database in write mode
    dbOperation.openForWrite();

    // Showing All data from the database
    Cursor cr = dbOperation.fetchData();
    startManagingCursor(cr);

    if (cr == null || cr.getCount() <= 0) {

        flag = 0;
    } else {
        flag = 1;
        cr.moveToFirst();
        if (cr.getInt(cr.getColumnIndex("isRemember")) == 1) {
            accountNumber.setText(cr.getString(cr
                    .getColumnIndex("capstrov_ac_no")));
            emailAddress.setText(cr.getString(cr.getColumnIndex("email")));
            password.setText(cr.getString(cr.getColumnIndex("password")));
            remember.setChecked(true);
            if (cr.getInt(cr.getColumnIndex("isAutomatic")) == 1) {
                loginAutomatic.setChecked(true);
            }
        }
        if (cr.getInt(cr.getColumnIndex("isAutomatic")) == 1) {

            dialog = ProgressDialog.show(LoginScreen.this,
                    "Loading...", "Please wait...", true);
            new Thread() {
                public void run() {
                    try {
                        performBackgroundProcess();

                    } catch (Exception e) {
                        Log.e("tag", e.getMessage());
                    }
                    // dismiss the progress dialog
                    dialog.dismiss();
                }
            }.start();

        }
    }
    cr.deactivate();

     TextView tv_Register = (TextView) findViewById(R.id.link_Register);
     tv_Register.setMovementMethod(LinkMovementMethod.getInstance());

     TextView tv_Forgot = (TextView) findViewById(R.id.link_Forgot);
     tv_Forgot.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent in_Forgot = new Intent().setClass(
                    getApplicationContext(), WebViewPage.class);
            startActivity(in_Forgot);
        }
    });

Button  btnLogin = (Button)findViewById(R.id.bt_Login);
    btnLogin.setOnClickListener(loginlistener);
}

private boolean checkEmail(String email) {
    return EMAIL_ADDRESS_PATTERN.matcher(email).matches();
}

@Override
public void onBackPressed() {

    finish(); // finishes the current activity and doesn't save in stock
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
    System.exit(0);
}

private OnClickListener loginlistener = new OnClickListener() {

    public void onClick(View v) {

        if (accountNumber.getText().toString() == null
                || emailAddress.getText().toString() == null
                || password.getText().toString() == null
                || accountNumber.getText().toString().equals("")
                || emailAddress.getText().toString().equals("")
                || password.getText().toString().equals("")) {

            if (accountNumber.getText().toString() == null
                    || accountNumber.getText().toString().equals("")) {
                accountNumber
                        .setBackgroundResource(R.drawable.login_edit_text_focussed);
            } else {
                accountNumber
                        .setBackgroundResource(android.R.drawable.editbox_background);

            }
            if (emailAddress.getText().toString() == null
                    || emailAddress.getText().toString().equals("")) {
                emailAddress
                        .setBackgroundResource(R.drawable.login_edit_text_focussed);
            } else {
                emailAddress
                        .setBackgroundResource(android.R.drawable.editbox_background);
            }
            if (password.getText().toString() == null
                    || password.getText().toString().equals("")) {
                password.setBackgroundResource(R.drawable.login_edit_text_focussed);
            } else {
                password.setBackgroundResource(android.R.drawable.editbox_background);
            }
            Toast.makeText(mContext, "All Fields Are Mendatory",
                    Toast.LENGTH_LONG).show();

        } else if (!checkEmail(emailAddress.getText().toString())) {
            Toast.makeText(mContext, "Please enter valid Email Address",
                    Toast.LENGTH_LONG).show();
            emailAddress
                    .setBackgroundResource(R.drawable.login_edit_text_focussed);
            emailAddress.requestFocus();
            accountNumber
                    .setBackgroundResource(android.R.drawable.editbox_background);
            password.setBackgroundResource(android.R.drawable.editbox_background);
        } else {
            emailAddress
                    .setBackgroundResource(android.R.drawable.editbox_background);
            dialog = ProgressDialog.show(LoginScreen.this, "Loading...",
                    "Please wait...", true);
            Log.i(":::::::::::::::::::::", dialog.toString());
            new Thread() {
                public void run() {
                    try {
                        performBackgroundProcess();

                    } catch (Exception e) {
                    Log.i("###############", "Catch Block $$$$$$$$$$$$$$$$$$");
                        Log.e("tag", e.getMessage());
                    }
                    // dismiss the progress dialog
                    dialog.dismiss();
                }
            }.start();
        }
    }
};

private void performBackgroundProcess() {

    String authenticationLoginResponse = null;
    String pst = null;
    String accNumber = accountNumber.getText().toString();
    String emailAddrs = emailAddress.getText().toString();
    String pass = password.getText().toString();
    int isRem;
    int isAuto;
    if (remember.isChecked()) {
        isRem = 1;
    } else {
        isRem = 0;
    }
    if (loginAutomatic.isChecked()) {
        isAuto = 1;
    } else {
        isAuto = 0;
    }

    String envelope1 = "<req>" + "<channel>10</channel>" + ""
            + "<system>CAPSTROV</system>" + "<persist>0</persist>"
            + "<device>10B23T12SA</device>" + "<acno>" + accNumber
            + "</acno>" + "<email>" + emailAddrs + "</email>" + "<pass>"
            + pass + "</pass>" + "</req>";

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("requestXml", envelope1);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    Object response = null;
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();
        authenticationLoginResponse = response.toString();
        Log.i("&&&&&&&&&&&&&&&&&&&&&&", authenticationLoginResponse);
    } catch (Exception e) {
        e.printStackTrace();
    }
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(new StringReader(
                authenticationLoginResponse)));

        // normalize the document
        doc.getDocumentElement().normalize();
        NodeList detnode = doc.getElementsByTagName("det");
        Node node1 = detnode.item(0);
        Element fstelement1 = (Element) node1;
        NodeList reglist1 = fstelement1.getElementsByTagName("pst").item(0)
                .getChildNodes();
        Node nvalue1 = (Node) reglist1.item(0);
        pst = nvalue1.getNodeValue();
        SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putString("pstValue",pst);
         prefsEditor.commit();

        LoginScreenData loginScreenData = new LoginScreenData();
        loginScreenData.setPst(pst);
        if (flag == 0) {
            // Inserting values into login Table
            dbOperation.insertData(accNumber, emailAddrs, pass, isRem,
                    isAuto, pst);
        } else {
            // Updating values into login Table
            dbOperation.updateData(accNumber, emailAddrs, pass, isRem,
                    isAuto, pst);
        }
        dbOperation.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    if (pst.equals("")) {
        dialog = ProgressDialog.show(LoginScreen.this, "Loading...",
                "Please wait...", true);
        dialog.show();
    } else {
        Intent intent = new Intent();
        intent.setClass(getApplicationContext(), MainScreen.class);
        intent.putExtra("pst", pst);
        startActivity(intent);
    }

    Log.i("*************", dialog.toString());
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:04:46.607

```
E/AndroidRuntime(351): java.lang.NullPointerException: println needs a message 07-25 14:27:41.218: 
```

你完成你的活动然后进入一个意图？为什么？完成意图然后完成（）

```
public void onBackPressed() {

Intent i = new Intent(this, actio_main.class);
i.setFlages(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.addCategory(Intent.CATEGORY_HOME);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i);
finish(); 
```

# emacs - 在 emacs 中，当函数尚未定义时，如何将函数添加到钩子？

> ID：11646150
> 
> 赞同：1
> 
> 时间：2012-07-25T09:00:37.103
> 
> 标签：emacs, elisp, elpa

我从 ELPA 安装了一些东西，即邪恶和彩虹分隔符。

为了让它们在 emacs 加载时运行，我会放一些类似的东西：

```
(evil-mode)
(global-rainbow-delimiters-mode) 
```

在我的 init.el 文件中。

但是，因为我是从 ELPA 安装它们的，所以直到我的 init.el 加载后才加载它们，因此这两个符号都是未定义的。

据我了解，这也阻止了我做类似的事情

```
(add-hook 'after-init-hook 'global-rainbow-delimiters-mode) 
```

我该如何解决这个问题？

后记：这个问题实际上是由于我没有`(package-initialize)`在我的 init.el 开始时调用引起的，它会在正确的时间加载使用包安装的所有东西（evilmode 和彩虹分隔符只是其中的两个）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:09:58.860

您的`add-hook`解决方案将起作用。

那里，`'global-rainbow-delimiters-mode`只是一个名称，它会在稍后`add-hook`被调用时解析为函数，并且到那时该函数将存在。

ELPA[文档](http://emacswiki.org/emacs/ELPA)确实提到了这种方法，尽管它似乎认为它是最后的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:52:42.933

AFAIU 编译 init 文件不是一个好主意——但到目前为止还没有关系。

你的钩子失败了，因为它在读取初始化之后运行，但在加载东西之前。从 ELPA 加载后，您需要一个函数来运行。

尝试 eval-after-load

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:57:44.743

您还可以使用`(package-initialize)`. 这将允许您不将所有代码放在一个钩子中。

# perl - 如何从 perl 调用 gnuplot 脚本

> ID：11646153
> 
> 赞同：3
> 
> 时间：2012-07-25T09:00:44.047
> 
> 标签：perl, gnuplot

我有一个 gnu.gp 文件：

```
# grphist.conf
set terminal canvas
#Terminal type set to 'canvas'
#Options are ' solid butt size 600,400 fsize 10 lw 1 fontscale 1 standalone'
set output 'output.html'  

set grid
set xtic rotate by 90
set style data histograms
set style fill solid 1.00 border -1
#$ cat grphist.conf | gnuplot
plot "c_time"  using 2:xtic(1) title "time to number of UIDs" 
```

但是，我必须将它与 perl 脚本集成。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T09:24:29.953

您可以打开管道到 gnuplot：

```
use autodie qw(:all);
open my $GP, '|-', 'gnuplot';

print {$GP} <<'__GNUPLOT__';
    set xrange [-5:5];
    plot sin(x);
__GNUPLOT__

close $GP; 
```

或者，您可以访问 CPAN 上的[Chart::Gnuplot](http://p3rl.org/Chart::Gnuplot)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:23:55.553

```
`gnuplot <your file>`; #linux
`wgnuplot.exe <your file>`; #win 
```

或者

```
system("gnuplot <your file>"); #linux
system("wgnuplot.exe <your file>"); #win 
```

或者

```
exec("gnuplot <yout file>"); #linux
exec("wgnuplot.exe <your file>"); #win 
```

您的选择取决于：

[Perl 的反引号、system 和 exec 有什么区别？](https://stackoverflow.com/questions/799968/whats-the-difference-between-perls-backticks-system-and-exec)

# c - 使用 MinGW32 GCC 编译。只告诉链接库一次？

> ID：11646155
> 
> 赞同：0
> 
> 时间：2012-07-25T09:00:48.040
> 
> 标签：c, gcc, command-line, compilation, mingw

我正在使用 mingw32 gcc 通过命令行编译程序。随着源文件的增加，我遇到了一些问题。首先，考虑以下脚本：

```
gcc -Wall -I"MyDir" -I"MyDir2" -L"MyLibDir" -L"MyLibDir2" -l lib1 -l lib2 -l lib3 -c file.c
gcc -Wall -I"MyDir" -I"MyDir2" -L"MyLibDir" -L"MyLibDir2" -l lib1 -l lib2 -l lib3 -c file2.c
gcc -Wall -I"MyDir" -I"MyDir2" -L"MyLibDir" -L"MyLibDir2" -l lib1 -l lib2 -l lib3 -c file3.c
gcc -o myprog.exe file1.o file2.o file3.o 
```

现在，我不能只告诉`gcc`编译器目录`-I`、链接器目录`-L`和链接库`-l`一次，然后用相同的选项编译第二个和第三个源文件，而不必重新键入它们吗？就像是

```
gcc -define-options -Wall -I"MyDir" -I"MyDir2" -L"MyLibDir" -L"MyLibDir2" -l lib1 -l lib2 -l lib3 
gcc -Wall -c file1.c
gcc -Wall -c file2.c
gcc -Wall -c file3.c
gcc -o myprog.exe file1.o file2.o file3.o 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:06:28.550

据我所知，不，你不能。但这就是发明 make 和 Makefile 的原因 :) 我认为[本教程](http://mrbook.org/tutorials/make/)足以让您开始为您的小项目编写一个像样的 Makefile。

PS：快速而肮脏的方法是编写一个简单的 bash 脚本，将包含目录保存在一个变量中，但在我看来 Makefile 是一个更好的选择，因为你不想重新发明轮子。

PS2：出于好奇，我发现确实有办法做到这一点。您只需要定义一些环境变量。有关详细信息，请参见此处：[如何在 linux 中为 gcc 添加默认包含路径？](https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux)

# c# - 托管与非托管：如何编组

> ID：11646156
> 
> 赞同：0
> 
> 时间：2012-07-25T09:00:47.830
> 
> 标签：c#, dllimport, signature

我正在使用包含具有此签名的方法的 C++ dll：

```
int GetEnumerationString(int type, int value, const char** s ); /* ALLOCATES */ 
```

如标题注释中所述，该方法分配指针。我在 C# 中尝试了以下签名：

```
[DllImport("thedll.dll", EntryPoint="GetEnumerationString")]
private static extern int GetEnumerationString(int type, int value, ref string s ); 
```

但是当我运行我的程序时，我得到一个`AccessViolationException`.

该方法的正确签名是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:08:58.203

如果非托管函数分配缓冲区，它必须使用 CLR 分配器，以便 CLR 获取内存并在需要时释放它。

如果这不可能，则必须返回一个指针：

```
[DllImport("thedll.dll", EntryPoint="GetEnumerationString")]
private static extern int GetEnumerationString(int type, int value, out IntPtr s); 
```

然后手动从中[找出一个字符串](http://msdn.microsoft.com/en-us/library/7b620dhe)并处理指向的内存（您必须知道分配器是什么）。

# android - android.content.ActivityNotFoundException：找不到明确的活动类{}；您是否在 AndroidManifest.xml 中声明了此活动？

> ID：11646159
> 
> 赞同：2
> 
> 时间：2012-07-25T09:00:55.693
> 
> 标签：android, android-activity

这是场景：我**在同一个项目中有 2 个不同的包。** 当我尝试从**com.stable.app ActivityA包中通过 Intent** **ActivityB（在 com.stable.app.in 中）**启动时，我收到此错误。我想我的清单没问题，但似乎是错误的。我的清单是：

 **```
<activity android:name=".in.Principal">
   <intent-filter>
     <action android:name="android.intent.action.MAIN" />
     <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
</activity> 
```

我的代码是：

```
final Intent intent = new Intent();                
intent.setClassName("com.stable.app.in", "com.stable.app.in.Principal");
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(intent); 
```

我已经尝试了很多其他主题中的建议。它们是： 将包裹的整个路线交给 Manifest。尝试减少 MAIN、LAUNCHER 等。

如果您遇到过同样的问题，或者有可能的解决方案，请不要急于回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:13:23.103

你让这有点复杂。如果要在项目中启动另一个 Activity，可以使用以下代码段：

```
final Intent intent = new Intent(this, ActivityB.class);
startActivity(intent); 
```

这更短更重要，您不会将活动名称用作字符串。这样，当您在 IDE 中重构活动类名称时，它也可以更改代码。使用字符串名称时，大多数 IDE 不会更改它。

此外，您必须确保在清单文件中声明活动正确。您不需要使用完整的类名，但如果您使用`.in.Principal`，请确保您的清单文件的包是`com.stable.app`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:11:51.773

> 根据您的要求，您声明的软件包数量取决于您的项目要求。您需要在清单文件中使用完整的包名称指定该活动名称。
> 
> 假设在您的情况下，您的 Principal 是您在 com.stable.app.in 中的活动。那么在清单文件中你需要声明

```
<activity android:name="com.stable.app.in.Principal">
       <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
</activity> 
```

> 如上。**

# php - 如何在 disqus 中获得最多评论的帖子？

> ID：11646163
> 
> 赞同：2
> 
> 时间：2012-07-25T09:01:12.760
> 
> 标签：php, drupal, disqus

我正在寻找大多数评论帖子的 disqus api，但它让我无处可去。有人可以与我分享如何获取线程/帖子排序的评论计数吗？像这样的东西：

```
listPosts.json?orderby=comment_count&order=desc 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T19:23:27.737

我正在处理同样的问题，答案是：

[http://disqus.com/api/docs/threads/listPopular/](http://disqus.com/api/docs/threads/listPopular/)

您可以设置这些参数...以及更多...

```
$api_key = 'your_public_key';
$interval = '90d';
$forum = 'your_website_shortname';
$limit = 5;

$url_call = "http://disqus.com/api/3.0/threads/listPopular.json?api_key=" . 
            $api_key . "&forum=" . $forum . "&interval=" . 
            $interval . "&limit=" . $limit;

$get_contents = file_get_contents( $url_call ); 

$call = json_decode($get_contents); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:07:17.363

[Disqus API](http://disqus.com/api/docs/threads/)似乎不直接支持这一点。但是每个[`threads/list`](http://disqus.com/api/docs/threads/list/)都有一个`posts`元素 `response`。

# c# - 在 C# 中，将“\\”替换为“\”

> ID：11646168
> 
> 赞同：2
> 
> 时间：2012-07-25T09:01:24.713
> 
> 标签：c#, replace

我有一个字符串：

```
var path = "d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

我正在尝试替换`\\`为`\`.

我试过这个：

```
path = path.Replace("\\\\", "\\");
path = path.Replace(@"\\", @"\"); 
```

这些都没有用单反斜杠代替双反斜杠。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T09:03:06.483

`path`不包含任何双反斜杠。`"blah\\blah"`实际上是`blah\blah`。

在普通字符串文字（不以 开头`@`）中，您需要通过在它们前面放置反斜杠 ( `\`) 来转义某些字符。其中一个字符是反斜杠本身，所以如果你想把一个反斜杠放到一个字符串中，你可以用另一个反斜杠对其进行转义，这就是为什么`path`包含所有这些双反斜杠的原因。在运行时，这些将是单个反斜杠。

有关可用的转义序列，请参见此处：[C# FAQ：Escpape 序列](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-character-escape-sequences-are-available.aspx)

另一方面，逐字字符串（以 开头`@`）不需要对大多数字符进行转义。`@"\"`原来如此`\`。您需要在逐字字符串中转义的唯一字符是引号。您只需键入双引号即可。`@""""`实际上也是如此`"`。

所以如果你想放入`d:\project\Bloomberg\trunk\UI.Demo\`一个字符串，你有两种可能性。

普通字符串文字（注意`\`已转义）：

```
var path = "d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

或逐字字符串文字（无需转义`\`）：

```
var path = @"d:\project\Bloomberg\trunk\UI.Demo\"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:07:56.550

你别忘了放@？你链子前面说的？

```
var path = @"d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

但是那个 -> @"d:\project\Bloomberg\trunk\UI.Demo\";
是平等的->“d：/project/Bloomberg/trunk/UI.Demo/”；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:04:29.773

在此字符串中`\\`，转义为`\`：

```
var path = "d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

所以这实际上是说：

```
@"d:\project\Bloomberg\trunk\UI.Demo\" 
```

因此，当您替换为时`\\`，`\`您不会替换任何东西。双斜线看起来像`\\\\`普通字符串。您在替换方法中正确执行了该操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T09:05:50.680

改变：

```
var path = "d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

到：

```
var path = @"d:\\project\\Bloomberg\\trunk\\UI.Demo\\"; 
```

你会很好的。请记住，这`\\`意味着`\`在普通字符串中，因此如果您想要实际的双反斜杠，您需要使用`\\\\`或简单地在字符串前面加上 @ - 就像在调用 Replace 时一样。

其次，您可能不需要在特定情况下调用 Replace，因为`\\`您看到的实际上是单个反斜杠，因为您的字符串没有以 @ 为前缀，并且转义序列被评估。

# json - RestSharp JSON 序列化

> ID：11646170
> 
> 赞同：0
> 
> 时间：2012-07-25T09:01:26.197
> 
> 标签：json, restsharp

我正在使用 RestSharp 构建 .net 客户端 REST 应用程序，我需要使用 JSON 格式将一些数据发布到服务器（服务器应用程序只能接受 JSON）。JSON格式如下：

`{ "username": "username", "address": { "address1": "address1", "address2": "address2", "town": "Town", "county": "County", "postCode": "postcode", "country": "United Kingdom" } , "contact": { "telephone": "1234", "fax": "12345", "email": "testemail@test.co.uk"
} }`

我需要将上面的数据作为参数添加到请求对象中，如下所示：

`request.AddBody(new { username = "username" });`

上面的行将使用 JSON 序列化器创建一个 JSON 字符串，它工作正常，但我不确定如何创建下一个级别（地址、联系人）......所有地址详细信息和联系人详细信息都需要嵌入到地址和联系人元素中。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:26:26.983

你有没有尝试过

```
request.AddBody(new { username = "username", 
address: new { address1: "address1", address2: address2, "town": Town, county: "County", postCode: "postcode", country: United Kingdom } , 
contact: new { telephone: "1234", fax: "12345", email: "testemail@test.co.uk" }); 
```

?

如果您知道接受的格式，那应该会生成所需的 json。

如果您在发出请求时运行 Fiddler [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)，您可以在其余清晰的 json 序列化程序启动后看到您的 json 的格式（通常是 json.net，应该采用上述格式）和希望看看哪里出了问题

# javascript - jquery中的同步确认框

> ID：11646183
> 
> 赞同：0
> 
> 时间：2012-07-25T09:02:05.110
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何创建自定义“确认”并暂停 js 执行，直到用户单击按钮？](https://stackoverflow.com/questions/358168/how-to-create-a-custom-confirm-pause-js-execution-until-user-clicks-button)

我正在尝试在 jquery 中实现自定义确认框，但我的自定义确认框不等待用户的响应并且执行进一步的脚本。有人可以帮我实现同步自定义确认框。

我的代码就像

```
<a type="button" name="/ActionName/ViewName/@item.RawDocumentID" href="../ActionName/ViewName/@item.RawDocumentID" id="replaceDoc" class="openDialog">Replace</a>open a popup

$('.replaceDoc').click(function (e)
{  
    if (condition)
    {
        MyConfirm(msg, function (e)//This function is used create customconfirm
        {
            status = true;         
        }
        },
        function ()
        {
            status = false;
            e.stopImmediatePropagation();
            e.preventDefault();        
        },
        'MyConfirm');     
});

function MyConfirm(temp, okFunc, cancelFunc, dialogTitle)
   {
       $("<div class='carbon-alert'></div>")
           .attr("id", 'CarbonConfirm')
           .dialog({
               resizable: false,
               height: 140,
               modal: true,
               title: dialogTitle,
               open: function ()
               {
                   $(this).html(temp);
               },
               buttons: {
                   OK: function ()
                   {
                       if (typeof (okFunc) == 'function') { setTimeout(okFunc, 50); }
                         $('#MyConfirm').remove();                  
                   },
                   Cancel: function ()
                   {
                       if (typeof (cancelFunc) == 'function') { setTimeout(cancelFunc, 50); }
                       $('#MyConfirm').remove();                     
                   }
               }

           });
       } 
```

现在的问题是我的确认框来了，但是在它上面显示了弹出窗口，我希望我的弹出窗口只有在我单击确定时才会出现。

# c++ - Pthread 模板参数错误

> ID：11646185
> 
> 赞同：2
> 
> 时间：2012-07-25T09:02:13.337
> 
> 标签：c++, templates, pthreads

我正在尝试使用 pthreads 编写一个简单的 parallel_for。原始代码是这样的。

```
#ifdef HAVE_TBB
 template<typename Body> static inline
 void parallel_for( const BlockedRange& range, const Body& body )
 {
        tbb::parallel_for(range, body);
 }
#else
 template<typename Body> static inline
 void parallel_for( const BlockedRange& range, const Body& body )
 {      
        body(range); 
 }
#endif 
```

我重写了 TBB 不存在的情况。这是我写的。我在编译它时遇到问题。当我在它之前写时，threadFunc 给出了错误`template<typename Body>`。

```
In function 'void cv::parallel_for(const cv::BlockedRange&, const Body&)':
error: no matches converting function 'threadFunc' to type 'void* (*)(void*)'
error: candidates are: template<class Body> void* cv::threadFunc(void*) 
```

这些是我收到的错误消息。可能必须有一个简单的修复。谢谢。

```
struct MyStruct {
    BlockedRange range;
    Body& body;
};

//template<typename Body>
static void* threadFunc(void *arg) {
    MyStruct<Body> *rangeBody = (MyStruct<Body>*) arg;
    rangeBody->body(rangeBody->range);
}

template<typename Body> static inline
void parallel_for( const BlockedRange& range, const Body& body )
{
    BlockedRange& range1 = BlockedRange(range.begin(), range.end()/2);
    BlockedRange& range2 = BlockedRange(range.end()/2, range.end());

    MyStruct<Body> rangeBody1; 
    rangeBody1.range = range1; 
    rangeBody1.body = body;

    MyStruct<Body> rangeBody2; 
    rangeBody2.range = range2; 
    rangeBody2.body = body;

    pthread_t thread1, thread2;
    pthread_create(&thread1, NULL, threadFunc, (void*) &rangeBody1);
    pthread_create(&thread2, NULL, threadFunc, (void*) &rangeBody2);
    pthread_join( thread1, NULL);
    pthread_join( thread2, NULL);    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:09:49.323

如果`threadFunc`是函数模板，则需要对其进行特化以获取所需的函数：

```
pthread_create(&thread1, NULL, threadFunc<Body>, &rangeBody1);
                                         ^^^^^^ 
```

# mysql - 使用时间戳手动跟踪更改还是自动跟踪更改？

> ID：11646195
> 
> 赞同：0
> 
> 时间：2012-07-25T09:02:54.293
> 
> 标签：mysql, sql-server, synchronization, change-tracking

我使用 SqlServer 2008 Tracking Changes 的跟踪更改同步了两个数据库，这很酷，因为我可以毫不费力地控制数据库的插入/更新和删除并发送到另一个数据库。目前我正在将系统迁移到 MySQL。是否存在类似于跟踪更改的东西，或者我必须手动实现它。

手动实现这一点是一个好方法，使用时间戳来控制 INSERTS/UPDATES 和触发器来填充删除表来控制 DELETES？

当我说时间戳时，我想说的是 SQLServer 时间戳（插入、修改寄存器时自动递增的二进制字段。是否存在类似于 MySQL 中的 SQLServer 时间戳的东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:25:48.907

是的，您可以使用 MySQL TIMESTAMP 字段监视表中的更改（插入、更新）；必须使用`ON UPDATE CURRENT_TIMESTAMP`选项创建 TIMESTAMP 字段。它将帮助您了解记录何时更改。

例如 -

```
CREATE TABLE table1(
  id INT(11) NOT NULL,
  name VARCHAR(255) DEFAULT NULL,
  ts TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id)
); 
```

此处的更多信息 - [TIMESTAMP 的自动初始化和更新](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)。

# load - Load Runner：无法创建 OTA 集成对象

> ID：11646205
> 
> 赞同：0
> 
> 时间：2012-07-25T09:03:35.823
> 
> 标签：load, automated-tests, performance-testing, loadrunner

我已经在我的机器上成功安装了 Load Runner 11。但是当我打开 VU 生成器时，它会弹出一个弹出窗口，上面写着“无法创建 OTA 集成对象”。然后同时，它会引发另一个警报，上面写着“无法创建 FileDialog 对象”。

当我尝试创建一个新的虚拟用户时，VU 生成器会自动关闭。

如果有人遇到类似问题，请提出任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:02:04.187

我通过简单地修复安装过程解决了这个问题，有一些dll文件首先没有在安装中注册。

最好的问候 SK

# c# - 获取产品 ID 和供应商 ID

> ID：11646212
> 
> 赞同：4
> 
> 时间：2012-07-25T09:03:53.497
> 
> 标签：c#, java, usb

大家好，有一种方法可以获取供应商 ID，并且产品是使用 java 或 C# 的 USB 设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:31:58.763

你看过[jUSB](http://jusb.sourceforge.net/)吗？当然，它已经很老了，没有更新，但似乎 usb.core API 适用于 Linux 和 Windows。

值得一提的是，我认为[DeviceDesriptor](http://jusb.sourceforge.net/apidoc/usb/core/DeviceDescriptor.html)类（仅位于提到的 usb.core 包中）提供了 getVendorId() 和 getDeviceId() 方法是多么方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:44:01.390

USB 设备由它们的**vendor id**和**product id 标识**。这些 ID 由前缀（`vid_`用于供应商 ID 或`pid_`产品 ID）和 4 位十六进制数字组成。例如`MAX3420E`有 vendor id`vid_06ba`和 product id `pid_5346`。

查看`C#`这些有用的文章：

*   [在 .NET 和 C# 中使用 USB 设备](http://www.developerfusion.com/article/84338/making-usb-c-friendly/)
*   [用于 .Net/C# 的 HID USB 驱动程序/库](http://www.florian-leitner.de/index.php/2007/08/03/hid-usb-driver-library/)

# ssh - Gitolite ssh 命令

> ID：11646217
> 
> 赞同：2
> 
> 时间：2012-07-25T09:04:00.267
> 
> 标签：ssh, gitolite

我正在尝试使用正在运行的 gitolite 服务器。运行时，`ssh git@host info`我得到了预期的存储库列表。但是当我尝试运行其他命令时，例如`ssh git@host help`服务器以**错误命令响应：帮助**

不幸的是，gitolite 文档对故障排除没有帮助:(

有什么建议么？干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:32:50.883

这是意料之中的。

根据[gitolite 如何使用 ssh](http://sitaramc.github.com/gitolite/g2/gl_ssh.html)（即使用[强制命令](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)），您将始终收到*任何*命令的错误消息，除了：

*   git 命令（克隆、推送、拉取……）
*   在 gitolite 中明确[定义和启用的gitolite 命令](https://gitolite.com/gitolite/non-core.html#gitolite-commands)

没有 Gitolite 授权的交互式 ssh 会话。
任何命令都会被拦截并通过 gitolite 脚本运行。
如果它不是已定义和启用的命令之一……您`bad command`每次都会得到一个“”。

在这种特定情况下，OP 使用的 gitolite 配置没有`help`作为已定义和启用的命令；根据后续评论。

# c# - 按特定日期获取数据以在 ListView 中呈现

> ID：11646218
> 
> 赞同：0
> 
> 时间：2012-07-25T09:04:00.690
> 
> 标签：c#, asp.net, sql-server-2008

我正在尝试按日期获取博客文章以建立档案，更具体地说，我希望按一年中的月份呈现数据，例如 2012 年 7 月、2012 年 8 月等。哦，考虑我是一个新手。

数据由在标签中呈现日期的 ListView 检索，然后将标签文本（例如 Juni，2012）转发到我目前正在努力处理的代码隐藏中的新 SP。我正在尝试使用 LIKE 子句检查带有日期字段的参数，但是当我尝试使用参数“juli”的 SP 时，不知何故我得到了 June och July。它与数据类型有点混淆，我真的不知道在这种情况下使用什么。

SP：我已经将长度排除在参数数据类型之外，如果定义了长度，它会给我任何数据，但应该是 10。我还尝试将表中的日期时间转换为与@Date 有点相似的字符串，我对此有点迷失，对 LIKE 子句不太熟悉，所以请考虑我是新手。

```
@Date varchar
AS
BEGIN
    SELECT A.ArticleID, A.Name, A.Header, A.Article, A.Date, 
    C.Category, C.CategoryID,
    M.FirstName + ' ' + M.LastName as 'Author', A.ArticleLevel
    FROM Article as A
        LEFT JOIN Category as C on A.CategoryID = C.CategoryID
        LEFT JOIN Member as M ON A.MemberID = M.MemberID            
    WHERE CONVERT(VARCHAR(4), a.Date, 100) + CONVERT(VARCHAR(4), a.Date, 120) LIKE @Date + '%'
    ORDER BY A.Date, A.ArticleLevel Asc
END

exec [usp_GetArticlesForArticleDates] 'juli' 
```

C#：“ArchiveArticlesListView”是嵌套的 ListView，用于呈现特定日期的文章。

```
protected void ArchiveListView_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        var articleId = (int)ArchiveListView.DataKeys[e.Item.DataItemIndex].Value;
        //var dateParam = (int)ArchiveListView.DataKeys[e.Item.DataItemIndex].Value; // Tried to use the DataKey for Date and convert it to char, but that only left me with values like "309 j"

        var DateLabel = e.Item.FindControl("DateLabel") as Label;
        var date = DateLabel.Text;
        var articlesLV = e.Item.FindControl("ArchiveArticlesListView") as ListView;
        articlesLV.DataSource = Service.GetArticleArchive(date);
        articlesLV.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:09:49.420

如果要获取两个日期之间的数据，请尝试以下操作：

```
@Date datetime
@year datetime
AS
BEGIN
SELECT A.ArticleID, A.Name, A.Header, A.Article, A.Date, 
 C.Category, C.CategoryID,
 M.FirstName + ' ' + M.LastName as 'Author', A.ArticleLevel
 FROM Article as A
 LEFT JOIN Category as C on A.CategoryID = C.CategoryID
LEFT JOIN Member as M ON A.MemberID = M.MemberID            
 WHERE CONVERT(VARCHAR(4), a.Date, 100) + CONVERT(VARCHAR(4), a.Date, 120) =CONVERT(VARCHAR(4), @Date , 100) + CONVERT(VARCHAR(4), @year, 120)'
ORDER BY A.Date, A.ArticleLevel Asc
END
exec [usp_GetArticlesForArticleDates] 'juli','2012'' 
```

我认为这对你有用。

# vb6 - 输出类型为类库的项目无法直接启动VB.NET

> ID：11646224
> 
> 赞同：-5
> 
> 时间：2012-07-25T09:04:23.523
> 
> 标签：vb6, vb.net-2010, vb6-migration

目前，我的老板分配了一项将 VB 转换为 VB.NET 的任务。

我的一个程序发生了错误，它。有人遇到过吗？如何解决它以及为什么会发生此错误？

我知道我的信息不够，请告诉我你需要什么信息。我的程序包含 Designer 文件夹，其中包括 .Dsr 文档（其相关水晶报告）。谢谢

[![在此处输入图像描述](../Images/40ea6ae606bb6479c0cb76a65fb997ee.png)](https://i.stack.imgur.com/ITB79.png)
[（来源：[msdn.com](http://blogs.msdn.com/blogfiles/mtcmuc/WindowsLiveWriter/SpicIEHowtodebugtraceaSpicIEplugin_55F9/image_6.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:59:34.553

正如错误所说，您不能只是“启动”一个库项目，您需要启动一些东西来创建一个托管在库中的对象。

这可以是测试 exe 项目、第 3 方可执行文件或测试主机。您只需要指定要运行的内容。当这开始时，调试器将在创建对象时启动。

# android - 点击项目上的Android自动完成文本视图

> ID：11646227
> 
> 赞同：3
> 
> 时间：2012-07-25T09:04:30.360
> 
> 标签：android, autocompletetextview

我想用`AutoCompleteTextview`一个`list`我有。我也在使用`Adapter`我添加`list`. 我想打印我点击的元素。我使用以下代码，但它不起作用。

```
myAutoComplete.setOnItemClickListener(new OnItemClickListener() {

    String selected;
    boolean click = false;                  
    public void onItemClick (AdapterView<?> parentView,View selectedItemView,int position, long id) {
        //code
    }
} 
```

另外如何禁用写入的能力`AutoCompleteTextview`？我什么都不想写。我只想打印一个列表并从中选择一个元素（包括第一个元素）。

这是布局xml文件。

```
<AutoCompleteTextView
    android:id="@+id/myautocomplete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.95"
    android:background="@android:color/black"
    android:textColor="#FFFFFF" /> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:05:43.943

如果你不想在上面写任何东西`autoCompleteTextView`并选择项目，你必须实现`SPINNER`更棒的

把它放在你的 xml 文件中

```
<Spinner
    android:id="@+id/mySpinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="40dp" /> 
```

在你的代码中

```
ArrayAdapter quartadapter = new ArrayAdapter(
        this, android.R.layout.simple_spinner_item, CONSTANT.LISTPAIMENT);
quartadapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

Spinner sp = (Spinner) findViewById(R.id.mySpinner);
sp.setAdapter(quartadapter); 
```

在你可以使用之后

```
sp.setOnItemClickListener(new OnItemClickListener() {

    String selected;
    boolean click = false;                  
    public void onItemClick (AdapterView<?> parentView,View selectedItemView,int position, long id) {
        //code
    }
}); 
```

# php - 使用xampp在本地向gmail帐户发送电子邮件，没有错误但电子邮件未到达

> ID：11646230
> 
> 赞同：0
> 
> 时间：2012-07-25T09:04:42.997
> 
> 标签：php, windows-7, smtp, gmail, xampp

如主题..！

我配置我的文件如下

在 php.ini 中

```
 SMTP =smtp.gmail.com
  smtp_port = 587
  sendmail_from = my adress@gmail.com
  sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t" 
```

在 sendmail.ini 中

```
 smtp_server=smtp.gmail.com
    smtp_port=587
    smtp_ssl=tls
    auth_username=(my adress @gmail.com)
    auth_password=( here my gamil account password ) 
```

要清楚你可以在这里看到我的 php 代码！

```
 $headers = "MIME-Version: 1.0" . "\r\n";
      $headers .= "Content-type: text/html; charset=iso-8859-1"."\r\n";
      $headers .="From: my adress @gmail.com"."\r\n";

       $subject = "Your New Password";
       $message = "Your new password is as follows:
        ----------------------------
        Password: $emailpassword
         ----------------------------
        Please make note this information has been encrypted into our database 

        This email was automatically generated."; 

      if(!mail($forgotpassword, $subject, $message, $headers)){
         die ("Sending Email Failed, Please Contact Site Admin! ($site_email)");
      }else{
           print'New Password Sent!.';
     } 
```

我发送时得到的是新密码已发送！。

没有错误，就像它真的已经发送但是当我检查电子邮件时没有消息！

注意：我在 windows-7 上运行

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:44:27.367

在本地，您不允许联系 gmail SMTP 服务器。您只能访问您自己的互联网提供商的 SMTP 服务器。[但是，您可以像这样](http://www.softstack.com/freesmtp.html)在本地安装一个简单的 SMTP 服务器。

在某些网络中，这将允许您从 xampp 本地发送邮件到本地安装的 SMTP 服务器，然后从那里发送到 Internet。

# android - 如何在android中删除从Canvas中绘制的文本

> ID：11646233
> 
> 赞同：0
> 
> 时间：2012-07-25T09:04:49.440
> 
> 标签：android, canvas, drawable

我想从`Canvas`使用以下代码绘制的文本中删除文本。

```
 canvas.drawText(label, width / 4, height / 3, paint_text); 
```

完成后，用户可以编辑该文本，因此我想在编辑之前从画布中删除已经绘制的文本并编写新文本。

我想澄清一件事，我用*图像位图*在画布上写文本。

是否有可能以任何其他方式？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:11:50.230

从画布中删除文本的唯一方法是采用一个条件，如果条件不满足，则不要绘制这些文本。一般我们使用canvas来连续绘制。

```
if(flag){
///draw text
}else{
//Do not draw
} 
```

再次调用 onDraw() 方法以显示新更改 如果您在同一个线程中调用 inValidate() 或来自不同线程的 postInvalidate()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:12:29.950

我建议您在每次编辑文本时重绘，这可以通过在 setText() 方法中调用 invalidate() 方法来完成。所以让用户编辑文本，然后简单地重绘画布：

```
public setText(String text)
{ 
     label = text;
     this.invalidate();
}

...
//inside your draw method
canvas.drawText(label, width / 4, height / 3, paint_text);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-28T07:48:39.220

使用无效（）；见下面的例子

@覆盖

```
 protected void onDraw(final Canvas canvas) { 
```

//invalidate 可以删除然后重新创建另一个

```
 invalidate();
        // put your drawing commands here
        paintText.setColor(Color.GRAY);
        paintText.setTextSize(Util.dpToPx(BaseActivity.this, OVERLAY_TEXT_SIZE_INT));
        paintText.getTextBounds(overlayText, 0, overlayText.length(), bounds);
        canvas.drawText(overlayText,
                getWidth() - (bounds.width() + TEN),
                this.getHeight() - OVERLAY_TEXT_SIZE_INT,
                paintText);

    } 
```

# apache - 使用特殊字符重写 URL

> ID：11646238
> 
> 赞同：1
> 
> 时间：2012-07-25T09:05:05.193
> 
> 标签：apache, mod-rewrite

我的网站有一个“不正确”的传入链接，我无法更改传入链接，因此我必须为其制定重定向规则。

链接指向：mydomain.tld/search_engin%3C/td

我试过了：

```
RewriteRule ^/search_engin%3C/td$ http://www.osirion.co.za/search_engine_marketing_optimisation/1-about_our_search_engine_marketing_services.htm [NE,R=301,L]

RewriteRule ^/search_engin%3C/td$ http://www.osirion.co.za/search_engine_marketing_optimisation/1-about_our_search_engine_marketing_services.htm [B,R=301,L] 
```

（上面两个没有$）Normal Redirect 301而不是RewriteRule。

他们都没有工作：S

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:09:57.270

尝试将正则表达式更改为：

```
`^/search_engin</td$` 
```

在`%3C`通过重写引擎之前被解码。此外，如果此规则在 htaccess 文件中，请去掉前导斜杠。您不需要`NE`or`B`标志，但其他一切看起来都很好。

# php - 如何使用 bash 变量创建 PHP 模板

> ID：11646239
> 
> 赞同：0
> 
> 时间：2012-07-25T09:05:04.760
> 
> 标签：php, bash, shell, sed

我需要在 bash 脚本中读入一个 php 模板文件，然后替换模板中的一些变量（可以是任何东西，比如`$(variable)`），最后将整个内容输出到一个新文件中。

我原本有

`stuff=$stuff bash templatefile > newfile`

对于非 PHP 文件

```
cat <<END
//stuff
END 
```

但我的 php 模板文件看起来像

```
#!/usr/bin/php
<?php
//lots of php variables, so can't use bash variables that have the same $ prefix
?> 
```

因为 PHP 也像 bash 一样为它的变量使用 $ 前缀，所以我不能轻易地传入参数。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:14:31.553

试试这个答案： [Bash Templating: How to build configuration files from templates with Bash?](https://stackoverflow.com/questions/2914220/bash-templating-how-to-build-configuration-files-from-templates-with-bash)

这允许您使用**${varname}**而不是**$varname**

# sencha-touch - 按下按钮 sencha touch2 时按钮需要时间来加载/显示图像

> ID：11646241
> 
> 赞同：0
> 
> 时间：2012-07-25T09:05:08.470
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个按钮，我想在页面加载正常按钮图标中向用户显示，一旦他按下按钮，我需要向他显示按下按钮图标。我通过为按钮设置 cls 来实现这一点。我正在使用 sass 样式，从服务器访问图像 url 路径。根据我的要求，它工作正常。***但是在第一次加载页面时它显示正常的按钮图标很好，一旦我按下按钮它需要一些时间意味着（5-10秒）接下来它会显示按下按钮图标，这只是第一次发生。为什么第一次加载要花这么多时间来加载更改按下图标？*** 下次它会正常工作，在按下按钮时立即更改图标。可以有其他最好的方法来实现这一目标吗？

这是我的代码：

```
 {
                        xtype: "button",                           
                        cls: 'aboutclsT',
                        handler: function () {

                        }

                    } 
```

在我的 app.scss

```
.aboutclsT{
 background: url('http://src.sencha.io/100/http://s11.postimage.org/dg1zv08j7/about.png') !important;
 background-repeat: no-repeat;
 height: 133px;
 width: 100px;

 }

 .aboutclsT.x-button-pressing{
 background: url('http://src.sencha.io/100/http://s7.postimage.org/4vy4hg72z/about_active.png') !important;
 background-repeat: no-repeat;
 height: 133px;
 width: 100px;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:41:22.190

从 URL 加载按钮图像，第一次调用会下载它。之后浏览器将其缓存，因此需要时间。**如果你在 CSS 中对它进行 base64，它会一直很快**。

# hibernate - 如何从 Hibernate 中检索具有多对多关系的记录？

> ID：11646244
> 
> 赞同：0
> 
> 时间：2012-07-25T09:05:14.307
> 
> 标签：hibernate

我有三张桌子

```
Users                           Deal                Dealusers
==========                     ======               ==========
userid(PK)                     dealid(PK)           dealid(PK+FK)
                                                    userid(PK+FK) 
```

现在我已经在 Eclipse 中使用休眠工具生成映射，所以我得到了用户和交易表的 POJO 类和 hbm 文件，只是因为这种多对多关系。

现在我想查询“获取购买 dealid=1 的用户列表”

那么我应该如何使用休眠进行查询呢？提前致谢。

```
<set name="userses" table="dealusers" inverse="false" lazy="true" fetch="select">
            <key>
                <column name="dealid" not-null="true" />
            </key>
            <many-to-many entity-name="com.test.model.Users">
                <column name="userid" not-null="true" />
            </many-to-many>
        </set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:09:59.697

```
Deal deal = session.get(Deal.class, 1);
return deal.getUsers(); 
```

就如此容易。

# css - CSS旋转从页面的一侧移动DIV

> ID：11646245
> 
> 赞同：3
> 
> 时间：2012-07-25T09:05:23.660
> 
> 标签：css, rotation

我正在尝试创建一个侧面标签，如此处的基本形式。[http://www.firstforturf.co.uk/quotation.php](http://www.firstforturf.co.uk/quotation.php)

我正在尝试使用 CSS 来做尽可能多的事情，而不仅仅是放入图像，但是我遇到了问题。

在旋转侧面 DIV 时，它会从页面的侧面移动。我尝试将边距设置为 0，但它似乎不起作用。

如果有帮助，这里是 sidetag 的 CSS 规则。

```
 color: #FFF;
    height: 50px;
    width: 200px;
    position: fixed;
    background-color: rgb(0,102,204);
    font-size: 32px;
    line-height: 50px;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    text-align: center;
    top: 50%;
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    writing-mode: tb-rl; 
```

如果有人可以提供帮助，那就太好了。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:14:52.167

使用`transform-origin`：

```
-moz-transform-origin: 20px;
-ms-transform-origin: 20px;
-o-transform-origin: 20px;
-webkit-transform-origin: 20px;
transform-origin: 20px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:08:31.217

看看[-webkit-transform-origin](http://css-infos.net/property/-webkit-transform-origin)。由于您的元素是固定的，您可能需要相应地修改变换原点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:17:26.160

您可以使用`transform-orign`：

```
transform: rotate(45deg);
transform-origin:20% 40%;
-ms-transform: rotate(45deg); /* IE 9 */
-ms-transform-origin:20% 40%; /* IE 9 */
-webkit-transform: rotate(45deg); /* Safari and Chrome */
-webkit-transform-origin:20% 40%; /* Safari and Chrome */
-moz-transform: rotate(45deg); /* Firefox */
-moz-transform-origin:20% 40%; /* Firefox */
-o-transform: rotate(45deg); /* Opera */
-o-transform-origin:20% 40%; /* Opera */ 
```

[试试这个链接](http://www.w3schools.com/cssref/css3_pr_transform-origin.asp)

# c# - 在 .Net C# 中打开 SDP 文件

> ID：11646248
> 
> 赞同：0
> 
> 时间：2012-07-25T09:05:31.623
> 
> 标签：c#, http, stream, mjpeg, sdp

我正在开发一个 C# 的应用程序，它能够从编码器（Teleste MPX-E8）查看 MJPEG 编码的视频流。

我可以通过编码器的视频编码设置页面看到一个流，并且我已经阅读了该流被封装在一个 SDP 文件中。

因此，在我的 C# 应用程序中，我尝试实现 SDP 协议，但我发现的唯一文档/示例都与 SIP 协议有关。

使用 Wireshark，我可以看到当我向编码器发出 HTTP 请求时，它以 200 OK 和 SDP 响应。我想我需要向我的编码器发送确认以接收流，但我不知道如何发送它。

有谁可以帮助我？！

提前感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-06T18:08:28.453

您可以使用[SDPLib](https://github.com/tvildo/SDPLib)会话描述协议库库来读取 SDP 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:41:01.217

视频编码器实现`RTSP`协议，SDP 是其中描述视频馈送细节的一部分。RTSP 配置在设备上设置，请参阅[P6I_MPX_E.pdf](http://www.teleste.com/ProductDocument/P6I_MPX_E.pdf)第 45 页，并远程连接 RTSP 客户端软件，例如[VLC](http://www.videolan.org/vlc/)。

在 C# 中，您需要一个实现 RTSP 客户端的库 - 它会完成您需要的所有网络，并从设备中为您提供 JPEG 帧，无论是压缩的还是已经解码的。您将在应用程序 UI 上显示框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:05:18.197

[https://net7mma.codeplex.com/](https://net7mma.codeplex.com/) Sdp..

它还包含一个纯 C# 中的 RtspClient 和 RtspServer

这里有一篇文章

[http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

需要帮助请叫我！

# iphone - 由于 ipad/iphone 上未捕获的异常而终止应用程序

> ID：11646252
> 
> 赞同：0
> 
> 时间：2012-07-25T09:05:41.907
> 
> 标签：iphone, ios

我从这个例程 (IBAction)curr:(id)sender 中遇到了崩溃。所以我可以确定哪个按钮调用它。当我按下调用上述方法（curr）的按钮时发生崩溃。它最终必须显示当前用户位置，但在显示纬度和经度后立即崩溃。以字符串形式接收数据

```
{
Error = "Lat must be provided";
Success = 0;
} 
```

它抛出异常：`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x6e20000'`

这是我的代码：

```
-(IBAction)curr:(id)sender
{
count=0;
NSLog(@"fhfg");
NSLog(@"%@",latu);
NSLog(@"%@",longs);
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
if (count==0)
{
int degrees = newLocation.coordinate.latitude;
double decimal = fabs(newLocation.coordinate.latitude - degrees);
int minutes = decimal * 60;
double seconds = decimal * 3600 - minutes * 60; 
latu= [NSString stringWithFormat:@"%d° %d' %1.4f\"", degrees, minutes, seconds];
    //a=latu;
NSLog(@" Current Latitude : %@",latu);
//latLabel.text = lat;
degrees = newLocation.coordinate.longitude;
decimal = fabs(newLocation.coordinate.longitude - degrees);
minutes = decimal * 60;
seconds = decimal * 3600 - minutes * 60;
longs = [NSString stringWithFormat:@"%d° %d' %1.4f\"", degrees, minutes, seconds];
NSLog(@" Current Longitude : %@",longs);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T11:16:17.443

您可以检查您的 .xib 文件并通过右键单击急救人员立方体符号来检查急救人员。如果第一响应者连接插座中有任何警告符号，这就是您的应用程序崩溃的原因。

# c - 关于读写器同步

> ID：11646253
> 
> 赞同：1
> 
> 时间：2012-07-25T09:05:42.153
> 
> 标签：c, synchronization, mutex, semaphore

我正在查看读者/作者同步实现，我有一个问题。

这是我正在查看的代码：

```
start_reading(){
lock(m);
if (em_escrita || escritores_espera > 0) {
    leitores_espera++;
    unlock(m);
    wait(readers);
    lock(m);
}else
    nleitores++;
unlock(m);
}

finish_reading(){
lock(m);
nleitores--;
if (nleitores == 0 && escritores_espera > 0){
    post(writers);
    em_escrita=TRUE;
    escritores_espera--;
}
unlock(m);
} 
```

这是阅读器代码，我的问题是，为什么等待（阅读器）在互斥区域之外完成。出于同样的原因，为什么邮报（作家）也不在外面做呢？

这段代码来自操作系统课程，所以我很确定它是正确的。

有人可以告诉我区别吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:49:46.607

无论如何，等待锁定资源是个坏主意。如果在等待时可以释放资源，则应该释放它（以防止锁定另一个喜欢锁定资源的人）。

Semaphore post 不锁定任何资源，可以在任何上下文中使用（不注意锁定）。

# javascript - jQuery Selector 在 UNKNOWN DEPTH 下获取 (nth) 元素？

> ID：11646256
> 
> 赞同：1
> 
> 时间：2012-07-25T09:05:58.457
> 
> 标签：javascript, jquery, html, dom, jquery-selectors

要选择特定的`<div>`（例如`<div>`注释为`<!-- This one!`） ，
**请注意所有`<..>`元素都是所有级别的未知元素，但没有`<div>`。**

```
<div></div>
<div class="class1">
    <..>
        <..></..>
        <div></div>
        <div></div>
        <div> <!-- 3rd-child div, of its parent -->
            <..></..>
            <..>
                <div></div>
                <div></div> <!-- This one! The 2nd-child div, of its parent -->
                <div></div>
            </..>
        </div>
        <div></div>
    </..>
</div> 
```

在这种情况下，我能想到的唯一逻辑是：

*   只有元素类型为`<div>`s 和`nth`数字（在兄弟姐妹之间）是已知的。
*   中间元素是`unknowns`. 可以是`<p>`or`<table>`或`<ul>`其他，但不能`<div>`是 s。
*   水平未知。

所以：

*   目标**递归**地`<div>`位于**`div#class1`**
***   **它是`2nd <div>`里面`3rd <div>`的`div#class1`****

 **我怎么才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:43:15.877

对不起大家，我已经有了自己的答案：

```
$("div.class1 div:eq(2) div:eq(1)").html() 
```**

# objective-c - 如何在 UITableView 中显示新歌和旧歌

> ID：11646258
> 
> 赞同：0
> 
> 时间：2012-07-25T09:06:09.423
> 
> 标签：objective-c, ios, xcode

```
-(void) mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {

    [self dismissViewControllerAnimated:YES completion:nil];

    NSURL* assetUrl = [mediaItemCollection.representativeItem valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset* asset = [AVURLAsset URLAssetWithURL:assetUrl options:nil];

    AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];

    myPlayer = [AVPlayer playerWithPlayerItem:playerItem];

    collectionMutableCopy = [mediaItemCollection.items mutableCopy]; 
    [self.myPlaylistTable reloadData];

    //[self updatePlayerQueueWithMediaCollection: mediaItemCollection];
    [myPlayer play]; 

} 
```

我有一个按钮，可以让我从 Iphone 库中选择歌曲。我有另一个 UIButton，它显示从 ipod 库中选择的歌曲列表。

我在**UITableview**中显示选定的歌曲，即**myPlaylistTable** 当我从 iPod 库中选择两首歌曲时，这两首歌曲会显示**为 myPlaylistTable**，但是当我尝试添加更多歌曲时，会出现问题，之前显示的两首歌曲消失了。

例如，如果我第一次选择两首歌曲，如果我再添加两首歌曲，它应该显示四首歌曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:13:41.990

请考虑执行以下操作....它应该有助于解决您的问题。

> self.clearsSelectionOnViewWillAppear = 否；

这将使该行保持选中状态，除非您手动取消选择该行或用户选择表上的另一行。

# google-app-engine - GWT、Google 代码和 App Engine 的新手

> ID：11646262
> 
> 赞同：1
> 
> 时间：2012-07-25T09:06:11.823
> 
> 标签：google-app-engine, gwt

我是整个谷歌代码的新手。

所以我的问题如下。

下载了 Eclipse 的 Google 插件后，我创建了一个新项目，它自动创建了一个示例代码，即 Greeting Example。

所以我将它部署到应用引擎，一切正常。所以现在我正在尝试添加一些功能。通过 Eclipse，我下载了 Google Contacts API 并将 Jar 转移到类路径和 LIB 目录中。

因此，在项目的服务器端，在 GreetingServiceImpl.java 文件中，我添加了以下行

```
 ContactsService contactsService = new ContactsService("Contacts"); 
```

所以文件看起来像这样..

```
package com.gnt.server;

import com.gnt.client.GreetingService;
import com.gnt.shared.FieldVerifier;
import com.google.gdata.client.contacts.ContactsService;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;

/**
 * The server side implementation of the RPC service.
 */
@SuppressWarnings("serial")
public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer(String input) throws IllegalArgumentException {
        // Verify that the input is valid. 
        if (!FieldVerifier.isValidName(input)) {
            // If the input is not valid, throw an IllegalArgumentException back to
            // the client.
            throw new IllegalArgumentException(
                    "Name must be at least 4 characters long");
        }

        String serverInfo = getServletContext().getServerInfo();
        String userAgent = getThreadLocalRequest().getHeader("User-Agent");

        // Escape data from the client to avoid cross-site script vulnerabilities.
        input = escapeHtml(input);
        userAgent = escapeHtml(userAgent);
            ContactsService contactsService = new ContactsService("Contacts");
        return "Hello, " + input + "!<br><br>I am running " + serverInfo
                + ".<br><br>It looks like you are using:<br>" + userAgent;
    }

    /**
     * Escape an html string. Escaping data received from the client helps to
     * prevent cross-site script vulnerabilities.
     * 
     * @param html the html string to escape
     * @return the escaped string
     */
    private String escapeHtml(String html) {
        if (html == null) {
            return null;
        }
        return html.replaceAll("&", "&amp;").replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;");
    }
} 
```

现在，当我将其部署到 App Engine 时，出现以下错误。

```
javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.gnt.client.GreetingService.greetServer(java.lang.String) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.NoClassDefFoundError: com/google/gdata/client/GoogleService
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:135)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.NoClassDefFoundError: com/google/gdata/client/GoogleService
    at com.google.appengine.runtime.Request.process-ff033622b2cd8d3f(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at com.gnt.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    ... 1 more
Caused by: java.lang.ClassNotFoundException: com.google.gdata.client.GoogleService
    at com.google.appengine.runtime.Request.process-ff033622b2cd8d3f(Request.java)
    ... 34 more 
```

怎么会这样; 必要的库位于类路径和 Lib 目录中...

我已经搜索了两天了，我没有找到任何答案...

出于测试目的，我添加了 Apache commons Lib 并从该 lib 调用了一个方法，它在 App Engine 中完美运行。

那我做错了什么？如何在 App Engine 中使用联系人 API？

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:11:35.143

您可能缺少 Google 数据 JAR。

请参阅[此处](https://developers.google.com/gdata/articles/eclipse)获取教程。确保`gdata-client`、`gdata-client-meta`、`gdata-core`和`gdata-media`JAR 在您的构建路径中。

# wpf - DockPanel LastChildFill 调整为 MinWidth？

> ID：11646268
> 
> 赞同：1
> 
> 时间：2012-07-25T09:06:34.347
> 
> 标签：wpf, dockpanel, css

我尝试在 WPF 中实现一个简单的菜单栏。

这是 XAML：

```
<Page
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
 <DockPanel>  
    <DockPanel Background="Black" VerticalAlignment="Top" LastChildFill="True" DockPanel.Dock="Top" Height="28">
        <ToggleButton Content="--" Visibility="Collapsed" />
        <StackPanel Orientation="Horizontal">
           <Button Content="Add" />
           <Button Content="Expand" /> 
        </StackPanel>
        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
           <TextBox Text="Search" MinWidth="80" Width="200" />
           <Button Content="X" Margin="0,1,50,0" />
        </StackPanel>
    </DockPanel>
 </DockPanel>
</Page> 
```

它看起来不错，但是当我将页面调整为更小的宽度时，最后一个子项（带有搜索文本框的 Stackpanel）隐藏在左侧项目的后面。像这样： [http ://s9.postimage.org/m0tkrobwd/printscreen.png](http://s9.postimage.org/m0tkrobwd/printscreen.png)

如果文本框有足够的空间来实现其最小宽度，那么它会自行调整大小……这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:29:05.410

棘手的事情是给一个控件（在你的情况下是 SearchTextBox）一个对齐，但仍然可以将可用空间捕获到`MaxWidth`. 感谢[这个答案](https://stackoverflow.com/a/280417/620360)。

```
<DockPanel>
    <DockPanel Background="Black" DockPanel.Dock="Top" Height="28">
        <ToggleButton DockPanel.Dock="Left" Content="--" Visibility="Collapsed" />
        <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
            <Button Content="Add" />
            <Button Content="Expand" />
        </StackPanel>
        <Button DockPanel.Dock="Right" Content="X" />
        <Border Name="Container">
            <TextBox Text="Search" HorizontalAlignment="Right"
                     Width="{Binding ElementName=Container, Path=ActualWidth}" MaxWidth="200" />                                
        </Border>
     </DockPanel>        
</DockPanel> 
```

*容器也可以是另一个控件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:20:08.990

嗨，为 TextBox Not Width 设置 MaxWidth 和 MinWidth。如果您要设置宽度，那么它具有最高优先级，因此 MinWidth 不会起作用。我希望这会有所帮助。

```
 <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <ToggleButton Content="--" Visibility="Collapsed" />
                <Button Content="Add"  Grid.Column="1"/>
                <Button Content="Expand"  Grid.Column="2"/>
                <TextBox Text="Search" MinWidth="80" MaxWidth="600" Grid.Column="3" ClipToBounds="True" />
                <Button Content="X" Margin="0,1,50,0" Grid.Column="4"/>
            </Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:22:45.293

它只是因为页面的大小不足以在页面上显示两个堆栈面板。为此，您可以使用页面的最小尺寸。这将防止控件隐藏的损坏。

它也取决于你想要什么设计。您可以使用网格而不是 stackpanles。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:15:38.630

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50"/>
    </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                      <ColumnDefinition Width="*"/>
                    <ColumnDefinition MaxWidth="200" MinWidth="80"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <ToggleButton Content="--" Visibility="Collapsed" />
                <Button Content="Add"  Grid.Column="1"/>
                <Button Content="Expand"  Grid.Column="2"/>
                <TextBox Text="Search" Grid.Column="4"/>
                <Button Content="X" Margin="0,1,50,0" Grid.Column="5" />
            </Grid> 
```

与其将 MaxWidth 和 MinWidth 提供给 TextBox，不如将其提供给 Grid Column。我希望这会有所帮助。

# c - 为什么 C 中函数的原型和定义可能不同？

> ID：11646278
> 
> 赞同：20
> 
> 时间：2012-07-25T09:07:09.237
> 
> 标签：c

我想知道为什么这会编译：

```
int test();

int main() { return test((void*)0x1234); }
int test(void* data) { return 0; } 
```

为什么编译器不会发出任何错误/警告（我尝试过 clang，gcc）？如果我更改返回值，它将无法编译 - 但参数可能不同？！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-25T09:10:57.563

如果你改变：

```
int test(); 
```

到：

```
int test(void); 
```

你会得到预期的错误：

```
foo.c:4: error: conflicting types for ‘test’
foo.c:1: error: previous declaration of ‘test’ was here 
```

这是因为`int test();`简单地声明了一个带有*任何*参数的函数（因此与您的后续定义兼容`test`），而`int test(void);`实际的函数原型声明了一个*不*带参数的函数（并且与后续定义*不*兼容）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-25T09:09:19.730

```
 int test(); 
```

在函数声明中，没有参数意味着函数接受未指定数量的参数。

这不同于

```
 int test(void); 
```

这意味着该函数不接受任何参数。

没有参数的函数声明是旧的 C 风格的函数声明；C 将这种风格标记为过时并不鼓励使用。简而言之，不要使用它。

在您的情况下，您应该使用具有正确参数声明的函数声明：

```
 int test(void *data); 
```

# django - 芹菜错误：“没有名为 billiard.forking 的模块” - 如何诊断？

> ID：11646279
> 
> 赞同：0
> 
> 时间：2012-07-25T09:07:08.813
> 
> 标签：django, celery, egg, fork

我不知道从哪里开始诊断和解决这个问题：

```
$  bin/django celeryd -l DEBUG -v 3

 -------------- celery@lucid32 v3.0.3 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      django://localhost//
- ** ---------- . app:         default:0x8b0aa4c (djcelery.loaders.DjangoLoader)
- ** ---------- . concurrency: 1 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 

[Tasks]
  . celery.backend_cleanup
  . celery.chain
  . celery.chord
  . celery.chord_unlock
  . celery.chunks
  . celery.group
  . celery.map
  . celery.starmap
  . tardis_portal.make_local_copy
  . tardis_portal.verify_as_remote
  . tardis_portal.verify_files

[2012-07-25 18:27:37,168: DEBUG/MainProcess] [Worker] Loading modules.
[2012-07-25 18:27:37,173: DEBUG/MainProcess] [Worker] Claiming components.
[2012-07-25 18:27:37,173: DEBUG/MainProcess] [Worker] Building boot step graph.
[2012-07-25 18:27:37,173: DEBUG/MainProcess] [Worker] New boot order: {ev, queues, pool, mediator, beat, autoreloader, timers, state-db, autoscaler, consumer}
[2012-07-25 18:27:37,174: DEBUG/MainProcess] Starting celery.concurrency.processes.TaskPool...
[2012-07-25 18:27:37,229: DEBUG/MainProcess] celery.concurrency.processes.TaskPool OK!
[2012-07-25 18:27:37,233: DEBUG/MainProcess] Starting celery.worker.mediator.Mediator...
[2012-07-25 18:27:37,235: DEBUG/MainProcess] celery.worker.mediator.Mediator OK!
[2012-07-25 18:27:37,236: DEBUG/MainProcess] Starting celery.worker.consumer.BlockingConsumer...
[2012-07-25 18:27:37,236: WARNING/MainProcess] celery@lucid32 has started.
[2012-07-25 18:27:37,237: DEBUG/MainProcess] Consumer: Re-establishing connection to the broker...
[2012-07-25 18:27:37,242: DEBUG/MainProcess] Consumer: Connection established.
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named billiard.forking
[2012-07-25 18:27:37,287: DEBUG/MainProcess] Consumer: basic.qos: prefetch_count->4
[2012-07-25 18:27:37,298: DEBUG/MainProcess] Consumer: Ready to accept tasks!
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named billiard.forking
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named billiard.forking
... 
```

我不知道 Billiard 是什么，除了它是 Django 使用的一些进程多叉组件。由于给出的上下文很少，我不知道我是在查看 Django 还是我的应用程序中的错误。

适当的 forking.py 存在于`./eggs/billiard-2.7.3.10-py2.6-linux-i686.egg/`. 运行`bin/django shell`然后`import billiard.forking`正确执行。

所以，大概是一些子进程在错误的环境中产生并且没有找到 billiard.forking。

应用程序在[这里](https://github.com/mytardis/mytardis)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:34:38.527

ImportError 是从台球分叉时创建的子流程中引发的。当这些进程的 sys.path 上没有台球时会引发 ImportError，这可能在我现在知道的两种情况下发生。

第一个是你的情况，因为 Django 正在修改（然后取消修改）sys.path，如[https://github.com/celery/billiard/issues/10](https://github.com/celery/billiard/issues/10)中所述。解决方法是显式修复 sys.path，如该线程中所述。

第二种，就是发生在我身上的情况，导致我发现这个问题，是因为你在一个virtualenv中，并且由于某种原因它没有被子进程激活。

Celery（称为台球的东西）在“#!/usr/bin/env python2.6”下运行，所以如果您的 virtualenv 是在没有 python2.6 二进制文件的情况下创建的（也许它只有“python”），子进程将退回使用系统的python2.6，它不会安装台球。这实际上有时会发生（并且发生在我身上） - 我已经打开了一个针对 virtualenv 的拉取请求，希望能删除其中一些案例：[https ://github.com/pypa/virtualenv/pull/341](https://github.com/pypa/virtualenv/pull/341)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:39:03.540

好的，我克服了第一个障碍。天真的方法奏效了：grep 整个源代码树，包括鸡蛋，用于“billiard.forking”。令人惊讶的是，它出现的唯一地方是分叉模块本身：

```
if getattr(sys, 'frozen', False):
    return [sys.executable, '--billiard-fork']
else:
    prog = 'from billiard.forking import main; main()'
    return [_python_exe, '-c', prog, '--billiard-fork'] 
```

这绝对是原因。在运行时，该代码返回：

```
/usr/bin/python -c "from billiard.forking import main; main()" --billiard-fork 
```

其中，可以预见的是：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named billiard.forking 
```

我不知道为什么，也不知道这段代码是做什么的，但我已经过了“我不知道从哪里开始”的阶段。

# javascript - jQuery 在 IE 中不起作用 - simplacart 实现

> ID：11646280
> 
> 赞同：0
> 
> 时间：2012-07-25T09:07:16.553
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我对 jQuery 比较陌生，所以如果答案很明显，我很抱歉。

我有一个使用 simpleCart js 的购物车，当在 FF 和 Chrome 中将商品添加到购物车时，一切运行顺利，但 IE(9) 似乎无法管理它。

[http://www.peaknature.co.uk/cart/](http://www.peaknature.co.uk/cart/)

脚本的主要部分是：

**更新**

```
$(document).ready(function() {
$(".simpleCart_shelfItem").hover(function(event) {
    $(this).find('.tooltip').stop(true,true).show();
});
$(".simpleCart_shelfItem").mouseleave(function(event) {
    $(this).find('.tooltip').stop(true,true).fadeOut(500);
});
//Cart info (all items in cart)
$(".cartInfo").toggle(function(){
    $("#cartPopover").show();
    $(".cartInfo").addClass('open');
}, function(){
    $("#cartPopover").hide();
    $(".cartInfo").removeClass('open');
});

$(".shelf .simpleCart_shelfItem:eq(0)").css('left', '20px');
$(".shelf .simpleCart_shelfItem:eq(1)").css('left', '250px');
$(".shelf .simpleCart_shelfItem:eq(2)").css('left', '480px');
$(".shelf .simpleCart_shelfItem:eq(3)").css('left', '710px');
$(".shelf .simpleCart_shelfItem:eq(4)").css('left', '20px').css('top', '170px');

}); 
```

我知道 IE 在选择器等方面可能很有趣，但我不确定出了什么问题。

任何帮助深表感谢。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:17:39.653

我相信正在发生的事情是 simplecart 逻辑在其准备好之前正在运行，添加这一轮所有代码（并删除脚本标签）。

```
$(document).ready(function() {
  //All your code here.
}); 
```

这将确保在尝试使用它之前加载所有内容。

**更新**

查看 ie9 控制台后显示以下错误

```
SEC7112: Script from https://raw.github.com/
wojodesign/simplecart-js/master/simpleCart.js was blocked due to mime type mismatch 
```

这可能是因为 raw.github 向您提供了一个原始文本文件，而没有告诉您它是一个 js 文件。

尝试设置标签`type="text/javascript"`上的`<script></script>`纠正

在旁注中，我不确定您是否实际上是 wojodesigns 的所有者，但是最好使用本地版本（本地到您的服务器）以确保它在您不知情的情况下不会更改（如果有任何事情要做，那就更重要了与电子商务）。

希望这可以帮助

# sql - 调用过程或函数作为 Hibernate 查询的一部分

> ID：11646282
> 
> 赞同：0
> 
> 时间：2012-07-25T09:07:18.830
> 
> 标签：sql, nhibernate

我需要返回按复杂逻辑过滤和排序的记录。我打算在数据库端（函数或存储过程）进行排序和过滤。

是否可以在 QueryOver 或 Criteria 语法中调用过程或函数来过滤查询？

类似于下面显示的代码，其中 CallProcedure - 调用我的过程/函数

```
var articles = Session.QueryOver<ArticleData>()
    .Where(x => x.CompanyId == 1)
    .CallProcedure???
    .Skip(startIndex)
    .Take(number).List(); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:33:35.187

首先，您需要通过创建自定义方言向 NHibernate 注册您的函数：

```
public class MyDialect : MsSqlServer2008Dialect
{
    public MyDialect() 
    {
        RegisterFunction("myfunction", new SQLFunctionTemplate(...));
    }
} 
```

之后，您可以在查询中使用该函数：

```
var articles = Session.QueryOver<ArticleData>()
    .Where(x => x.CompanyId == 1)
    .Where(Projections.SqlFunction("myfunction", ...))
    .Skip(startIndex)
    .Take(number).List(); 
```

类似的东西。不确定您是否可以同时使用它进行过滤和排序。也许[数据库视图](https://stackoverflow.com/questions/2963020/strategies-for-mapping-views-in-nhibernate)更适合这种情况。

一些帮助您入门的链接：
[我可以在 NHibernate QueryOver 中使用 SQL 函数吗？](https://stackoverflow.com/questions/5966986/nhibernate-queryover-use-sql-functions)
[NHibernate QueryOver SQLFunction in where 子句](https://stackoverflow.com/questions/11097193/nhibernate-queryover-sqlfunction-in-where-clause)
[NHibernate 的 QueryOver 语法可以选择 SqlFunction 的 MAX() 吗？](https://stackoverflow.com/questions/6867395/can-nhibernates-queryover-syntax-select-max-of-an-sqlfunction)

# php - 使用 PHP 创建 TYPO3 加盐密码？

> ID：11646285
> 
> 赞同：6
> 
> 时间：2012-07-25T09:07:28.750
> 
> 标签：php, typo3

我正在尝试在未安装 TYPO3 的外部网站上为 TYPO3 创建一个自定义注册组件（我只使用它的数据库）。问题是我没有使用 TYPO3 的经验。我想知道是否有人知道如何为 TYPO3 创建正确的密码加密？密码如下所示：

$P$CeO/XYcbzRH9nLpCwKdp1HhsJGwJum0

我正在寻找一个 php 代码来创建相同的加密并检查密码。我有来自安装工具的加密密钥（我相信）用于加盐。

或者是否有可能只将密码保存为 MD5？不是最好的选择，但我可能是唯一剩下的人。

我找到了这个网址： [http ://srv123.typo3.org/TYPO3/Extensions/saltedpasswords/4.6/#compatibility-of-other-extensions-with-salted-user-password-hashes](http://srv123.typo3.org/TYPO3/Extensions/saltedpasswords/4.6/#compatibility-of-other-extensions-with-salted-user-password-hashes)

但我不知道如何在我自己的脚本中实现它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-30T15:56:47.790

适用于typo3 6.X：

```
 $password = 'XXX'; // plain-text password
    $saltedPassword = '';

    if (\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::isLoaded('saltedpasswords')) {
        if (\TYPO3\CMS\Saltedpasswords\Utility\SaltedPasswordsUtility::isUsageEnabled('FE')) {
            $objSalt = \TYPO3\CMS\Saltedpasswords\Salt\SaltFactory::getSaltingInstance(NULL);
            if (is_object($objSalt)) {
                $saltedPassword = $objSalt->getHashedPassword($password);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T09:26:00.397

看看开发者指南：

[1.5.1 从给定的纯文本密码创建一个新的加盐用户密码哈希](http://docs.typo3.org/typo3cms/extensions/saltedpasswords/4.7/#creating-a-new-salted-user-password-hash-from-a-given-plain-text-password)

你必须在typo3-Frontend中使用它：

```
$password = 'XXX'; // plain-text password
$saltedPassword = '';

if (t3lib_extMgm::isLoaded('saltedpasswords')) {
  if (tx_saltedpasswords_div::isUsageEnabled('FE')) {
    $objSalt = tx_saltedpasswords_salts_factory::getSaltingInstance(NULL);
    if (is_object($objSalt)) {
      $saltedPassword = $objSalt->getHashedPassword($password);
    }
  }
} 
```

**但是**，您永远不应该尝试在typo3 之外生成加盐密码，因为加密取决于您的typo3 设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T11:20:27.537

通过查看提供的哈希，我认为 TYPO3 中的*saltedpasswords*扩展（负责在数据库中存储加盐哈希）设置为使用**[phpass](http://www.openwall.com/phpass/)**。因此，您应该能够学习该课程并在您的脚本中使用它来创建/检查密码，就像 TYPO3 一样。

**或者是否有可能只将密码保存为 MD5？**

是的，在 TYPO3 中使用加盐密码是可选的，不是强制性的。但是，如果将来任何 TYPO3 安装都应该使用该数据库，我不确定 TYPO3 将如何处理混合记录，因为其中一些将密码存储为未加盐的哈希值，而另一些存储为加盐的。我的猜测是，它会优雅地处理它，识别每个哈希使用哪个检查。

# android - Android中ExifInterface类的所有方向常量是什么意思？

> ID：11646289
> 
> 赞同：5
> 
> 时间：2012-07-25T09:07:41.490
> 
> 标签：android, orientation, jpeg, exif

我理解 `ORIENTATION_NORMAL`, `ORIENTATION_ROTATE_180`, `ORIENTATION_ROTATE_270`和 `ORIENTATION_ROTATE_90`. `ORIENTATION_UNDEFINED`

但是我不明白 Android 的[ExifInterface](http://developer.android.com/reference/android/media/ExifInterface.html)类中的 、 `ORIENTATION_FLIP_HORIZONTAL`和 含义 。我通过谷歌搜索并找不到任何东西。`ORIENTATION_FLIP_VERTICAL``ORIENTATION_TRANSPOSE``ORIENTATION_TRANSVERSE`

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:38:32.747

以下是来自源代码 ( *android\media\ExifInterface.java* ) 的注释：

```
// left right reversed mirror
public static final int ORIENTATION_FLIP_HORIZONTAL = 2;
// upside down mirror
public static final int ORIENTATION_FLIP_VERTICAL = 4;
// flipped about top-left <--> bottom-right axis
public static final int ORIENTATION_TRANSPOSE = 5;
// flipped about top-right <--> bottom-left axis
public static final int ORIENTATION_TRANSVERSE = 7; 
```

我认为他们是不言自明的。

# java - Java中的拆分按钮

> ID：11646290
> 
> 赞同：4
> 
> 时间：2012-07-25T09:07:42.740
> 
> 标签：java, swing, jbutton, split-button

有人有SplitButton的编码实现吗？

我试过搜索一些实现，但它们都不起作用。（例如[`JSplitButton`](http://code.google.com/p/jsplitbutton/)）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:46:52.597

演示不工作！= splitButton 不工作 :-)

```
splitButton = new JSplitButton("Split Button Demo");
splitButton.setPopupMenu(jPopupMenu2);
add(splitButton); 
```

（注意：这*不是*特定 splitButton 实现的建议，只是提醒您在评估您正在寻找的项目时应该更加小心。如果由于某种原因不能，您可能会考虑使用商业产品，如 Synthetica 或 JIDE，仅举两例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T22:17:14.730

您应该尝试使用[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)。它们的工作不仅仅是简单的下拉，但它应该可以解决问题。

# testing - 我应该如何测试两个 erlang gen_servers

> ID：11646291
> 
> 赞同：2
> 
> 时间：2012-07-25T09:07:43.713
> 
> 标签：testing, erlang

我有两个使用 gen_tcp 套接字进行通信的 gen_servers。

第一个 gen_server 导出一个函数，调用该函数时会构建（调用另一个函数）一个 RFC 791 数据包，连接到另一个 gen_server 正在侦听传入连接的套接字，并将数据包发送给它。

我在 shell 中测试了它并且它正在工作，但是测试这样的代码的正确工具/方法是什么？我应该使用 eunit 还是有其他更合适的工具？

此外，我想知道我应该实际测试什么？只有发送部分还是也用于数据包构造？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:49:58.407

您绝对可以为每个 gen_servers 编写一些 EUnit 测试：

[http://www.erlang.org/doc/apps/eunit/chapter.html](http://www.erlang.org/doc/apps/eunit/chapter.html)

[http://learnyousomeerlang.com/eunit#the-need-for-tests](http://learnyousomeerlang.com/eunit#the-need-for-tests)

您还可以查看 Common Test 来测试交互：

[http://www.erlang.org/doc/apps/common_test/basics_chapter.html](http://www.erlang.org/doc/apps/common_test/basics_chapter.html)

[http://learnyousomeerlang.com/common-test-for-uncommon-tests#what-is-common-test](http://learnyousomeerlang.com/common-test-for-uncommon-tests#what-is-common-test)

由于您的实现很大程度上依赖于传递的数据，我会看看 QuickCheck Mini 或 PropEr 提供的生成器：

[http://www.quviq.com/](http://www.quviq.com/)

[http://proper.softlab.ntua.gr/](http://proper.softlab.ntua.gr/)

此处提供了有关如何使用 QuickCheck mini 之类的工具改进单元测试的简要说明：

[http://www.erlang-solutions.com/upload/docs/85/EUG-London-Apr2011.pdf](http://www.erlang-solutions.com/upload/docs/85/EUG-London-Apr2011.pdf)

首先，我将专注于测试您导出的功能（模块接口）。您仍然可以稍后添加更多测试。

# c# - 将测试项目自动连接到 WCF 服务

> ID：11646298
> 
> 赞同：0
> 
> 时间：2012-07-25T09:08:01.920
> 
> 标签：c#, .net, wcf, azure

我编写了一个旨在在 Azure 中运行的 WCF Web 服务（*不是*网站，只是基于 HTTP 的 JSON）。我需要为它编写测试。

**我知道怎么做**，但看起来很业余：

1.  运行网络服务，
2.  复制根 URL（例如`http://localhost:81/`）
3.  将根 URL 应用到我的测试项目，
4.  运行测试项目。

**我希望能够做到这一点：**

1.  按 F5
2.  --> web 服务开始运行
3.  --> 测试开始运行，自动查找 IIS 决定运行服务的位置。

有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:40:05.290

有两种方法可以做到这一点。由于您使用的是 Windows Azure，我假设您使用的是模拟器。使用模拟器意味着 RoleEnvironment 可用，并且您可以获得可用的角色、它们的实例和它们的端点的列表。

```
var endpoint = RoleEnvironment.Roles["WebRole1"].Instances.First().InstanceEndpoints["Endpoint1"];
var siteUrl = String.Format("{0}://{1}", endpoint.Protocol, endpoint.IPEndpoint); 
```

此代码将获取名为**WebRole1**的角色，获取该角色的第一个实例（您可以使用它来测试您的 Web 服务是否支持负载平衡）并获取**InstanceEndpoint**。实例端点将为您提供所需的所有信息，例如协议 (http/https) 和 IP/端口（这些是您在 ServiceConfiguration 中配置的内容）。

**注意**：这也适用于在模拟器之外运行的进程（如您的测试项目）。您唯一需要做的就是参考 Microsoft.WindowsAzure.ServiceRuntime。

Besides that you can also try to use the [ServerManager](http://blogs.msdn.com/b/carlosag/archive/2006/04/17/microsoftwebadministration.aspx) class to find the current sites running in IIS, but I don't think this will work if you're running in IIS Express (which is also possible if you're working with Azure).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:12:52.853

修复 WCF 项目的端口号：转到项目的属性，将“使用动态端口”设置为 false，然后指定一个固定数字，例如 81。

在您的解决方案中指定多个启动项目：在解决方案上单击鼠标右键：选择“设置启动项目”，然后选中单选按钮“多个启动项目”，将您的 WCF 服务项目包括在启动列表中。

我希望这能满足您的需求...

# c# - 实体框架：多对多关系中的重复记录

> ID：11646299
> 
> 赞同：11
> 
> 时间：2012-07-25T09:08:04.057
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有以下实体框架代码第一个代码。创建表并插入数据。但是 Club 表中有重复的记录。

我的操作是：-

1.  使用俱乐部创建应用程序创建俱乐部

2.  使用人员应用创建人员

如何避免重复输入？

![在此处输入图像描述](../Images/f4da19edf1e18f8e112682cd4213a606.png)

```
 static void Main(string[] args)
    {
        Database.SetInitializer<NerdDinners>(new MyInitializer());

        CreateClubs();
        InsertPersons();

    }

    public static void CreateClubs()
    {

        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = new Club();
            club1.ClubName = "club1";

            Club club2 = new Club();
            club2.ClubName = "club2";

            Club club3 = new Club();
            club3.ClubName = "club3";

            db.Clubs.Add(club1);
            db.Clubs.Add(club2);
            db.Clubs.Add(club3);

            int recordsAffected = db.SaveChanges();

        }
    }

    public static Club GetClubs(string clubName)
    {
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            //var query = db.Clubs.Where(p => p.ClubName == clubName);
            var query = db.Clubs.SingleOrDefault(p => p.ClubName == clubName);
            return query;
        }
    }

    public static void InsertPersons()
    {
        string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
        using (var db = new NerdDinners(connectionstring))
        {

            Club club1 = GetClubs("club1");
            Club club2 = GetClubs("club2");
            Club club3 = GetClubs("club3");

            Person p1 = new Person();
            p1.PersonName = "Person1";

            Person p2 = new Person();
            p2.PersonName = "Person2";

            List<Club> clubsForPerson1 = new List<Club>();
            clubsForPerson1.Add(club1);
            clubsForPerson1.Add(club3);

            List<Club> clubsForPerson2 = new List<Club>();
            clubsForPerson2.Add(club2);
            clubsForPerson2.Add(club3);

            p1.Clubs = clubsForPerson1;
            p2.Clubs = clubsForPerson2;

            db.Persons.Add(p1);
            db.Persons.Add(p2);

            int recordsAffected = db.SaveChanges();

        }
    } 
```

领域

```
public class Person
{
    public int PersonId { get; set; }
    public string PersonName { get; set; }
    public virtual ICollection<Club> Clubs { get; set; }
}

public class Club
{
    public int ClubId { get; set; }
    public string ClubName { get; set; }
    public virtual ICollection<Person> Members { get; set; }
}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
         //Fluent API - Plural Removal
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<Person> Persons { get; set; }
    public DbSet<Club> Clubs { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-25T09:54:05.080

问题是您创建了更多上下文。

首先，您创建俱乐部。没关系。但是当您创建人员时，您会通过 获取俱乐部`GetClubs`，但是对于每个俱乐部，您都会处理实际的实体框架上下文，因此您最终会得到分离的实体。在`InsertPersons`您将分离的俱乐部实体添加到新人员时，实际上下文将认为俱乐部是新俱乐部。

所以当你给一个人添加一个俱乐部时，你实际上是在创建新的俱乐部。

这是因为实体框架跟踪更改并管理每个上下文的实体。如果您将实体添加到尚未包含它的上下文中，那么它将像新实体一样对待。

实际上，你应该做这样的事情（未经测试）：

```
static void Main(string[] args)
{
    Database.SetInitializer<NerdDinners>(new MyInitializer());

    string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";
    using (var db = new NerdDinners(connectionstring))
    {
        CreateClubs(db);
        InsertPersons(db);
    }

}

public static void CreateClubs(NerdDinners db)
{
    Club club1 = new Club();
    club1.ClubName = "club1";

    Club club2 = new Club();
    club2.ClubName = "club2";

    Club club3 = new Club();
    club3.ClubName = "club3";

    db.Clubs.Add(club1);
    db.Clubs.Add(club2);
    db.Clubs.Add(club3);

    int recordsAffected = db.SaveChanges();
}

public static Club GetClubs(string clubName, NerdDinners db)
{
    //var query = db.Clubs.Where(p => p.ClubName == clubName);
    var query = db.Clubs.SingleOrDefault(p => p.ClubName == clubName);
    return query;
}

public static void InsertPersons(NerdDinners db)
{
    Club club1 = GetClubs("club1", db);
    Club club2 = GetClubs("club2", db);
    Club club3 = GetClubs("club3", db);

    Person p1 = new Person();
    p1.PersonName = "Person1";

    Person p2 = new Person();
    p2.PersonName = "Person2";

    List<Club> clubsForPerson1 = new List<Club>();
    clubsForPerson1.Add(club1);
    clubsForPerson1.Add(club3);

    List<Club> clubsForPerson2 = new List<Club>();
    clubsForPerson2.Add(club2);
    clubsForPerson2.Add(club3);

    p1.Clubs = clubsForPerson1;
    p2.Clubs = clubsForPerson2;

    db.Persons.Add(p1);
    db.Persons.Add(p2);

    int recordsAffected = db.SaveChanges();
} 
```

当然，您应该重构此代码的结构，但请注意，我的操作仅使用一个 EF 上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:20:38.540

感谢@PeterPorfy

另请阅读 [“System.ObjectDisposedException”类型的异常](https://stackoverflow.com/questions/11648504/exception-of-type-system-objectdisposedexception/11663686#11663686)

我用了

```
 ((IObjectContextAdapter)db).ObjectContext.Attach((IEntityWithKey)entity); 
```

用于附加来自先前上下文的对象。

我使用的 IEntityWithKey 的一个示例如下。如果您发现此方法有任何问题，请发表评论。

```
public class Person : IEntityWithKey
{
    public int PersonId { get; set; }
    public string PersonName { get; set; }

    public EntityKey EntityKey { get; set; }
} 
```

也请参考以下

1.  [SaveChanges() 实体框架 4.1 的问题](https://stackoverflow.com/questions/5693571/problem-with-savechanges-entity-framework-4-1)
2.  [实体框架更新多对多关系 - POCO](https://stackoverflow.com/questions/10275699/entity-framework-updating-many-to-many-relationships-poco)

* * *

# java - .NET 中的 Reader 和 Java 中的 ResultSet

> ID：11646303
> 
> 赞同：0
> 
> 时间：2012-07-25T09:08:11.887
> 
> 标签：java, .net, sql-server-2008, jdbc

当我了解`reader`.NET 的功能时，我才知道我们只能打开`reader`一对一的数据库连接。所以我必须使用连接池，这样我的应用程序才能正常工作而不会崩溃，在这种情况下，我也不能为我的连接应用单例模式。但是现在当我开始用 Java 开发相同的应用程序时，我发现我可以用相同的连接做很多事情，而且我也可以在连接上应用单例模式。我只需要每次都创建语句对象。

现在我的问题是：

1.  为什么 .NET 对 db 连接对象有这个限制？
2.  如果 Java 允许这样做，那么我们为什么要使用连接池呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:22:14.503

`Connection`不，你不能在 Java中一次做任意多的事情。您*可能*会逃脱一些事情，但一般来说`Connection`，Java 中的 a 一次只能用于一件事（由单个线程）。如果交易开始发挥作用，那就**更**重要了，因为它们绑定到`Connection`.

从它的声音看，.NET 的行为看起来完全一样，但是你很幸运，你在 Java 中尝试过。

Java中正确的做法是使用连接池，每次你做一些业务操作时，从池中获取一个连接，用那个连接做数据库操作，然后将连接返回到池中（通过简单的调用`.close()`，好东西是你真的不需要关心连接是来自池还是每次请求时都重新创建）。

我怀疑在.NET 中它非常相似。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T09:18:23.130

1.  因为与数据库的实际连接以这种方式受到限制。Java 中的连接对象只是在需要时打开更多的数据库连接。有一个设置可以让 .NET 中的连接对象做同样的事情，但我建议您使用默认模式，因为它可以让您更好地控制资源。

2.  因为Java中的连接对象会从池中获取数据库连接。如果它会打开一个到数据库的新连接，那么当您将连接对象用于多个阅读器时，您会看到相当大的性能差异。

# java - 更改代码以永远重复

> ID：11646306
> 
> 赞同：0
> 
> 时间：2012-07-25T09:08:18.963
> 
> 标签：java, scheduled-tasks

```
class BeeperControl {
    private final static ScheduledExecutorService scheduler = 
                                  Executors.newScheduledThreadPool(1);

    public static void main(String[] args){
        beepForAnHour();
    }

    public static void beepForAnHour() {
        final Runnable beeper = new Runnable() {
            public void run() {
                System.out.println(“beep”);
            }
        };
        final ScheduledFuture beeperHandle = 
             scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);

        scheduler.schedule(new Runnable() {
            public void run() {
                beeperHandle.cancel(true);
            }
        }, 60 * 60, SECONDS);
    }
} 
```

此代码每 10 秒发出一声哔哔声，持续一个小时。我如何让它永远每 10 分钟响一次。因为它应该永远每 10 分钟发出一次哔哔声（不仅仅是一个小时）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:12:20.527

您明确安排取消任务。如果您不想取消，则不要安排取消任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:12:28.737

只需删除执行取消的第二个时间表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:12:56.297

我提议：

```
public void run() {
    while(true) {
        System.out.println(“beep”);
        Thread.sleep(10000);
    }
} 
```

+的;

*   更简单
*   您可以跟踪您是否被打断

-'s: - 你必须捕获 InterruptedException

如果你想停止：

*   将停止/暂停的代码放在 catch 语句中并说`myThread.interrupt();`停止，再次启动它有点困难，最好的选择是创建一个新线程（完全相同）。此处的信息：[如何在 Java 中启动/停止/重新启动线程？](https://stackoverflow.com/questions/1881714/how-to-start-stop-restart-a-thread-in-java)
*   在while循环中放置一个if语句，检查一个公共布尔isRunning，如果它是假的，`continue;`一次又一次地说重新检查，直到它再次为真，把你的哔哔声代码放在'true-block'中。

# android - 更改方向后 getResources().getString() 不起作用

> ID：11646310
> 
> 赞同：1
> 
> 时间：2012-07-25T09:08:27.630
> 
> 标签：android

我的 android 应用程序是双语的。所以我有 2 个 res 文件夹值和 value-sw（用于斯瓦希里语）。我在设计和运行时都从这个文件中获取字符串值。例如在布局中：

```
android:hint="@string/Officer" 
```

在代码中：

```
getResources().getString(R.string.Officer); 
```

要更改语言环境设置，我有调用 onCreate() 的函数，如下所示：

```
public void ChangeLanguage(Context ctx,String Language){
        Resources res = ctx.getResources();
        DisplayMetrics dm = res.getDisplayMetrics();
        android.content.res.Configuration config = res.getConfiguration();
        config.locale = new Locale(Language.toLowerCase());
        res.updateConfiguration(config, dm);
} 
```

一切正常。只有当我改变方向时才会出现问题。

例如，在启动时，我将语言设置为斯瓦希里语。所以一切都在斯瓦希里语。现在，如果我将方向从垂直更改为水平或反之亦然。我期望在布局中设置的文本框提示仍保留在斯瓦希里语中。但是 getResources().getString(R.string.Officer); 从默认值文件中获取值，即英语。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:12:56.267

**在AndroidManifest.xml**中设置`android:configChanges="orientation"`为您的活动

 **这样做将导致您的活动在方向更改时不会被破坏和重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:19:10.630

具有该`android:configChanges`属性的问题在于，它会在方向更改后禁用 onCreate() 调用。您基本上是在告诉应用程序：“我知道会有方向变化，所以不要重新创建屏幕，我会处理它”

我建议在`onConfigurationChanged()`方法中调用你的那个函数。请记住，此时任何视图都将为空，因此如果您需要它们，则需要获得新的参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T23:12:25.330

我的情况与问题中的情况相同，在应用程序中使用英语和斯瓦希里语。这就是我处理它的方法：我创建了一个文件夹，`values-sw`然后在文件夹中创建了一个名为`string.xml`. 这是我所有的斯瓦希里语翻译都写在这里的。我在 onCreate 中调用以下方法：

```
 public static void setLocale(Context context) {
    SharedPreferences sharedPreferences = context.getSharedPreferences(context.getPackageName(), Context.MODE_PRIVATE);
    String userLocale = sharedPreferences.getString("userlocale", null); // adapt to your need
    if (userLocale != null) {
        Locale locale = new Locale(userLocale);
        Locale.setDefault(locale);
        Configuration config = new Configuration();
        config.locale = locale;
        context.getResources().updateConfiguration(config, context.getResources().getDisplayMetrics());
    }
} 
```

不要忘记刷新您的活动以使更改生效：

```
finish();
startActivity(getIntent()); 
```

（我知道这个答案已经很晚了，我希望它可以帮助那里的人，干杯！）**

# mysql - 如何在 MySQL 5.2 中备份和恢复？

> ID：11646318
> 
> 赞同：1
> 
> 时间：2012-07-25T09:09:07.443
> 
> 标签：mysql

这是我使用的命令：

```
mysql> mysql -u root -p -h HOST sample < mysqldump.sql; 
```

但是我遇到了如下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'mysql -u root -p -h HOST sample < mysqldump.sql' at line 1 
```

希望你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:10:36.270

那是你应该在命令行中给出的命令，而不是在 MySQL 本身中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:15:01.027

打开 mysql 终端或 konsole，然后转到`mysqldump.sql`文件所在的目录。尝试：

```
shell> cd /file_path/;
shell> ls -al mysqldump.sql; 
```

它应该显示您的文件。如果您登录到同一台服务器，您也不需要指定 HOST。

```
shell> mysql -u root -p sample < mysqldump.sql; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T09:13:10.340

从客户端您可以运行`\. mysqldump.sql`，但我认为第一个变体更可取。

# api - 这里现在没有按预期工作

> ID：11646322
> 
> 赞同：2
> 
> 时间：2012-07-25T09:09:14.393
> 
> 标签：api, foursquare

我知道他们根据这个改变了他们的 api：[https ://groups.google.com/forum/?fromgroups#!topic/foursquare-api/sQMuHlv9wiU](https://groups.google.com/forum/?fromgroups#!topic/foursquare-api/sQMuHlv9wiU)

但是如果我在特定地点办理登机手续，我应该能够让附近的人。但是，它在办理登机手续之前和办理登机手续后给了我相同的回复......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:15:16.693

**编辑：**其他几个开发人员遇到了这个问题，在许多情况下，看起来问题是纬度/经度没有被传递到签入/添加请求（“ll”参数）中。除非您被认为合理地靠近场地，否则您不包括在此处。

签入后，您应该可以让其他人签入，但请记住，可能并不总是有其他人签入。

一般来说，对于您签到的地点，您应该看到 hereNow 块中列出的人数与“计数”字段显示的人数大致相同。但是，人们可以选择不再出现在 hereNow 中，因此您偶尔仍会看到比计数字段显示的人数更少。

请记住，只有在以下情况下，您才会被视为“签到”某个场所：(a) 您签到后不到 3 小时，并且 (b) 您没有在其他任何地方签到。

如果您仍然遇到问题，请发送电子邮件至 api (at)foursquare.com，并在入住前向 hereNow 提出具体要求，您提出的入住要求，然后是您在入住后向 hereNow 提出的要求，我们可以帮你调试。

# iphone - 在 iPhone 的 Document 目录中的文件夹中获取文件

> ID：11646325
> 
> 赞同：1
> 
> 时间：2012-07-25T09:09:24.367
> 
> 标签：iphone, ipad, nsmutablearray, nsfilemanager, nsdocumentdirectory

我是 iPhone 新手，

我制作了一个应用程序，我正在下载一本书并将其存储在一个名为`book1Folder`which is inside的文件夹中`Document directory`。

现在我想要数组中所有书籍的名称，a 中有 2 本书，`book1Folder`但是当我编写此代码时，它显示数组计数为 3。

这是我的代码片段，

```
-(void)viewWillAppear:(BOOL)animated{
    NSString *files;
    NSString *Dir=[self applicationDocumentsDirectory];
    Dir=[Dir stringByAppendingPathComponent:@"book1Folder"];

    NSDirectoryEnumerator *direnum = [[NSFileManager defaultManager] enumeratorAtPath:Dir];

    Downloadedepubs = [[NSMutableArray alloc]init];
    while(files = [direnum nextObject])
    {
        if([[files pathExtension] isEqualToString:@"epub"])
            NSLog(@"files=%@",files);
            [Downloadedepubs addObject:files];
    }
} 
```

我的日志仅显示 2 本书的名称，但是当我遍历数组时，它包含 3 个对象。

```
[Downloadedepubs ObjectAtIndex:0]=.DS_Store;
[Downloadedepubs ObjectAtIndex:1]=abcd;
[Downloadedepubs ObjectAtIndex:2]=pqrs; 
```

***那是什么`.DS_Store`原因呢？***

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:22:14.163

把你的 if 块放在大括号里。它只影响 if 之后的第一行。

如下所示；

```
if([[files pathExtension] isEqualToString:@"epub"]) {
            NSLog(@"files=%@",files);
            [Downloadedepubs addObject:files];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:21:18.880

.DS_Store 是 mac 中的隐藏文件，用于将文件消息存储在文件夹中。您可以将其删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:25:17.970

试试这个：

```
 NSDirectoryEnumerator*    e = [[NSFileManager defaultManager] enumeratorAtPath:yourPathhere];

// Ignore any files except XYZ.epub
for (NSString*  file in e)
{
    if (NSOrderedSame == [[file pathExtension] caseInsensitiveCompare:@"epub"])
    {
           // Do something with file.epub
               [Downloadedepubs addObject:files];

    }
    else if ([[[e fileAttributes] fileType] isEqualToString:NSFileTypeDirectory])
    {
        // Ignore any subdirectories
        [e skipDescendents];
    }
} 
```

# php - PHP 菜单查询数据库并显示文本/链接

> ID：11646328
> 
> 赞同：0
> 
> 时间：2012-07-25T09:09:39.733
> 
> 标签：php, javascript, mysql, forms

我有一个站点，用户当前从从数据库填充的列表菜单中选择一个选项（“事件”）（参见下面的代码）。

当用户在框中单击他们的选择时，我希望显示一些文本链接，这些链接是该事件所在的“位置”，它们与事件存储在数据库的同一行中。

或者，代替文本链接，它可以使用位置填充第二个列表菜单，尽管我还不能让它为我工作

我一直试图通过使用 onclick 让它工作，但没有这样的运气。关于我应该做什么的任何提示/想法？

到目前为止的代码是：

```
 <?
    require_once('dbconnect.php');

    $sql="SELECT id, event FROM events";
    $result=mysql_query($sql);

    $options="";

  while ($row=mysql_fetch_array($result)) {

$id=$row["id"];
$event=$row["event"];
$options.="<OPTION VALUE=\"$event\">".$event;'</OPTION>';

}
?> 
```

对于形式：

```
 <select name="event" id="event">
    <?=$options?>
    </select> 
```

任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:15:50.310

您没有发布任何 JS 代码，但如果我理解正确，事件将显示为下拉列表，一旦用户选择了您想要触发事件的选项。

在这种情况下，`click`将不起作用，您需要绑定的是`change`.

看[这里](http://api.jquery.com/change/)。

# java - Jconfig - XML 和属性文件：错误的输出

> ID：11646334
> 
> 赞同：0
> 
> 时间：2012-07-25T09:09:50.483
> 
> 标签：java, xml

我正在使用 Jconfig 进行配置。我正在使用 XML 和属性文件。我在类路径中有 Jconfig.jar、属性文件和 xml 文件。

属性文件`test.properties`：

```
app.site=xyz.com 
```

XML 文件：

```
<properties>
  <include properties="test.properties" />
  <category name="test">
    <app-site>${app.site}</app-site>
  </category>
</properties> 
```

在 Java 代码中使用：

```
String site = config.getProperty("app-site", "test"); 
```

我得到输出

```
${app.site} 
```

控制台上没有异常或错误。怎么了？任何人都可以帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:41.623

尝试使用`<property name="app-site" value="${app.site}">`而不是`<app-site>${app.site}</app-site>`

# resize - 如何调整 Keynote 幻灯片的大小？

> ID：11646342
> 
> 赞同：0
> 
> 时间：2012-07-25T09:10:14.600
> 
> 标签：resize, applescript, slideshow, keynote

我是 Applescript 的绝对新手，但首先我需要知道是否可以启动 Keynote 幻灯片，然后如何将该幻灯片调整为特定尺寸并在桌面上调整大小。

我知道你要开始幻灯片放映。我知道如何调整窗口大小

```
set the bounds of the window 1 to {0, 0, 200, 400} 
```

但不知道如何将此命令传递给 Keynote 幻灯片，如果可能的话.. 任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:16:04.893

您可以使用“tell”语句或块来调整任何应用程序的窗口大小。在您的情况下，您将使用：

```
tell application "Keynote" to set the bounds of window 1 to {0, 0, 200, 400} 
```

# java - 读取状态码

> ID：11646344
> 
> 赞同：0
> 
> 时间：2012-07-25T09:10:22.963
> 
> 标签：java, android

```
conn = (HttpURLConnection) connectURL.openConnection();
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setUseCaches(false);
conn.setRequestMethod("POST");
conn.connect();
int code = conn.getResponseCode(); 
```

我已成功建立连接。我正在尝试通过互联网传递信息。当通过浏览器打开 url 时，我得到的响应为

```
{"status":"0","responseCode":"1001","response":"Wrong Settings."} 
```

对于正确的状态返回为 1。

有没有什么方法可以让我只获得状态。我一直在尝试以下方法，但每次我通过浏览器手动验证时将代码（下面是代码片段）作为-1而不考虑状态代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:15:46.097

这是一个 JSON 文本。您将需要使用 JSON 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:20:55.330

```
int code = conn.getResponseCode(); 
```

该方法返回http状态码，http状态码见

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

而您要检索的响应代码实际上是服务器返回的响应字符串。要阅读此用法：

```
 try {
     InputStream in = new BufferedInputStream(conn.getInputStream());

     readStream(in);//method to read characters from stream.
    finally {
     urlConnection.disconnect();
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:28:17.073

您可以添加以下代码以从您的连接中获取响应字符串。

```
 OutputStream connectionOutput = null;
connectionOutput=connection.getOutputStream();
            connectionOutput.write(requestJson.toString().getBytes());
            connectionOutput.flush();
            connectionOutput.close();

            inputStream = new BufferedInputStream(connection.getInputStream());

            ByteArrayOutputStream dataCache = new ByteArrayOutputStream();

            // Fully read data
            byte[] buff = new byte[1024];
            int len;
            while ((len = inputStream.read(buff)) >= 0) {
                dataCache.write(buff, 0, len);
            }

            // Close streams
            dataCache.close(); 
```

现在得到 json 的响应字符串，如下所示。

```
String jsonString = new String(dataCache.toByteArray()).trim();
JSONObject mJsonobject=new JSONObject(jsonString); 
```

您现在可以从此`mJsonobject`对象解析您的密钥。

# ruby-on-rails - 基于 hidden_ field_tag 的条件验证

> ID：11646348
> 
> 赞同：0
> 
> 时间：2012-07-25T09:10:43.023
> 
> 标签：ruby-on-rails, validation, conditional

在我的表格中，我使用： `<%= hidden_field_tag :formtemplate, "newuser" %>`

基于这种情况，我想在我的模型中进行验证：

```
 validates_format_of :email, :supervisor, :with => /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i, :message => "Adresse überprüfen.", :if => :newuser_formtemplate? 
```

这里是 newuser_formtemplate？

```
def newuser_formtemplate?
    newuser_formtemplate = "newuser"
    newuser_formtemplate == "newuser"
end 
```

我将如何更改它以使其基于 hidden_​​_field_tag 进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:57:45.323

使用 new_record 怎么样？来自 activerecord 的助手，而不是使用隐藏字段

[http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F)

```
validates_format_of :email, :supervisor, :with => /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i, :message => "Adresse überprüfen.", :if => :new_record? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:17:33.080

在模型中使用 attr_accessor

```
attr_accessor :formtemplate

def newuser_formtemplate?
    newuser_formtemplate = self.formtemplate
    newuser_formtemplate == "newuser"
end 
```

如果您`form_for`在视图中使用，请使用表单对象

```
<%= form.hidden_field :formtemplate, "newuser" %> 
```

# andengine - AndEngine TMX 性能

> ID：11646350
> 
> 赞同：1
> 
> 时间：2012-07-25T09:10:45.617
> 
> 标签：andengine, tmx

在 AndEngine 中显示 TMX 地图的性能很差。有没有加快速度的机会？TMXLayer.draw() 分别绘制每个图块。有没有机会将多个 TMX 瓦片放到一个顶点缓冲区并一次绘制它们？如果是这样，有人可以显示一些（伪）代码吗？

# nhibernate - 为什么使用 Autofac 时我的 ISession 没有自动刷新？

> ID：11646353
> 
> 赞同：1
> 
> 时间：2012-07-25T09:11:03.367
> 
> 标签：nhibernate, asp.net-mvc-4, autofac

## 概述

我正在尝试连接 Autofac 以帮助管理`ISession`我的 MVC 4 RC 项目中的 NHibernate。据我了解，Autofac 应该`ISession.Dispose`在每个 HTTP 请求结束时按照我配置的方式调用（见下文）。但是，情况似乎并非如此——如果我不调用`ISession.Flush()`，则数据不会保存在数据库中。

## 配置

### 自动法

```
container.Register(c => DbConfig.Generate(connectionString).BuildSessionFactory())
    .As<ISessionFactory>()
    .SingleInstance();

container.Register(c => c.Resolve<ISessionFactory>().OpenSession())
    .As<ISession>()
    .InstancePerLifetimeScope();

container.RegisterGeneric(typeof(Repository<>))
    .As(typeof(IRepository<>))
    .InstancePerLifetimeScope(); 
```

### 存储库

```
public class Repository<T> : IRepository<T> where T : class
{
    protected readonly ISession Session;

    public Repository(ISession session)
    {
        Session = session;
    }

    public void Add(T entity)
    {
        Session.Save(entity);
    }
} 
```

### 数据库种子 (Application_Start)

```
public class DatabaseSeed
{
    public static void Seed(IContainer container)
    {
        var session = container.Resolve<ISession>();
        var userRepo = container.Resolve<IRepository<User>>();
        userRepo.Add(new User { Id = 5, Name = "Test User" });

        //session.Flush(); <-- if not called, user will not be persisted!
    }
} 
```

## 结束语

我确实知道我应该将其包装在交易中。但是，我想在进入更复杂的场景之前先了解基础知识，并且很困惑为什么上述内容不能按我预期的方式工作......

*（附带说明一下，我尝试运行 Whitebox，即 Autofac 的“分析器”，但它在我身上失败了，但有一些例外（发布在 Autofac 组@Google 上），所以我不完全确定是 Autfac 在取笑我还是NHibernate :-)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:23:54.610

提交事务将刷新会话。交易是基础的一部分。

*- 或者 -*

打开 NHibernate 日志记录，您将看到 AutoFac 是否处理会话以及 NHibernate 是否自行刷新。

您将 AutoFac 配置为应在生命周期结束时释放会话。你在哪里配置生命周期应该匹配一个 http 请求？

* * *

**更新**

我只是自己测试了它，如果会话被处理，会话不会被刷新。这是有道理的，因为您通常使用的事务将在会话被释放之前提交。否则，会话将在事务之外刷新。

因此，要么将刷新模式设置为“始终”，要么使用事务。就像我在原始答案中所说的那样，交易**是**基础的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:30:39.447

我对 AutoFac 一无所知，因为我最喜欢的 DI 框架是 Spring.NET 及其 XML :)。但是对对象进行更改的问题并没有持续存在，这对我来说非常熟悉。在我得到的所有情况下，它们都与刷新模式和事务有关。我通过以下程序处理这些：

首先要检查的是交易。到位了吗？强烈建议您至少在事务中进行所有更新/删除。让我们假设事务确实开始了。

我们进入冲洗模式。会话的刷新模式是什么？如果是 Commit，则应保留更改。如果是 Auto，则还必须保留更改。所以我认为它是 Never，这需要您使用 Session.Flush() 手动刷新它。

# linq - Linq to nHibernate - 排除没有子元素的元素

> ID：11646356
> 
> 赞同：0
> 
> 时间：2012-07-25T09:11:11.603
> 
> 标签：linq, nhibernate, linq-to-nhibernate

```
var locations = (from location in session.Query<Location>()                                     
             where 
                (location.MB_ID == 0 || location.MB_ID == null) &&
                (location.hide != "Y" || location.hide == null) &&
                (location.locationNameRaw != "" && location.locationNameRaw != null) &&
                ((location.isIPCapableText != "" && location.isIPCapableText != null) || (
                    (location.ISDNNumber1 != null && location.ISDNNumber1 != "") ||
                    (location.ISDNNumber2 != null && location.ISDNNumber2 != "") ||
                    (location.ISDNNumber3 != null && location.ISDNNumber3 != "") ||
                    (location.ISDNNumber4 != null && location.ISDNNumber4 != "") ||
                    (location.ISDNNumber5 != null && location.ISDNNumber5 != "") ||
                    (location.ISDNNumber6 != null && location.ISDNNumber6 != "")                                        
                ))
                && (location.privateRoom == "N" || location.privateRoom == "" || location.privateRoom != null)
                && (
                        from lll in session.Query<LocationLonLat>()                                             
                        where
                            location.locationID == lll.locationId
                        select lll.locationId
                    ).Any()
                && (location.LastUpdatedTime > lastUpdateTime)
                && location.LocationTimes.Count() > 0
               /*&& (
                        from lt in session.Query<LocationTimes>()
                        where
                            location.locationID == lt.LID
                        select lt.LID
                    ).Any()*/
                select location
                  )
                  .ToList(); 
```

Location (1) 和 LocationTimes (many) 之间存在关系，我只想返回一个包含至少一个 LocationTime 记录的位置数据集。

我尝试了几件事...

当我添加该行时：

```
&& location.LocationTimes.Count() > 0 
```

或者如果我添加以下行：

```
 && (                      
     from lt in session.Query<LocationTimes>()
     where
    location.locationID == lt.LID
        select lt.LID
     ).Any() 
```

**底层连接已关闭：服务器关闭了预期保持活动状态的连接。**

我怀疑这可能是因为数据集的大小或其他原因......

有没有更好的方法来做到这一点？就像“左外连接”之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:01:51.520

我认为一个简单的加入应该做到这一点。

```
from locationTime in Query<LocationTime>()
join location in Query<Location>() on locationTime.Location.LocationId equals location.LocationId
join locationLat in Query<LocationLat>() on location.LocationLat.LocationLatId equals locationLat.LocationLatId
where ...
select location; 
```

# orm - 但是为什么 PetaPoco 选择将 Guid 转换为字符串？

> ID：11646358
> 
> 赞同：1
> 
> 时间：2012-07-25T09:11:23.880
> 
> 标签：orm, petapoco

当我查看 PetaPoco [Micro ORM] 代码时，我看到了

```
else if (t == typeof(Guid))
{
                    p.Value = item.ToString();
                    p.DbType = DbType.String;
                    p.Size = 40;
} 
```

为什么 PetaPoco 会做出这个决定？选择将 guid 写为字符串而不是二进制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:43:24.753

如果 GUID 映射到字符串，从应用程序外部查询数据库会容易得多。

# ruby-on-rails - 运行服务器时出错

> ID：11646363
> 
> 赞同：0
> 
> 时间：2012-07-25T09:11:36.350
> 
> 标签：ruby-on-rails

当我运行我的服务器时，我在控制台中收到以下错误：----

C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `require': no such file to load -- mysql2/mysql2 (LoadError) from C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/m ysql2.rb:9:in`'来自 C:/Ruby192/lib/ruby/gems/1.9 .1/gems/bundler-1.1.5/lib/bundler/runti me.rb:68:in `require' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runti me.rb:68:in`block (2 levels) in require' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler -1.1.5/lib/bundler/runti me.rb:66:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runti me.rb:66:in`block in require' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runti me.rb:55:in `each' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runti me.rb:55:in`require' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:11 9:in `require' from D:/usr/barun/project/rails/forum web service/dummy/config/applicati on.rb:7:in`'来自 C:/Ruby192/ lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/comman ds.rb:53:in `require' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/comman ds.rb:53:in`block in ' 来自 C:/Ruby192/lib/ruby/gems/1.9.1/gems /railties-3.2.5/lib/rails/comman ds.rb:50:in `tap' from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.5/lib/rails/comman ds.rb:50:in`'来自脚本/rails:6:在`require' from script/rails:6:in`'

如何解决这个错误我没有得到......请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:18:45.427

我有同样的问题。以下解决方案对我有用

```
Solution: the libmysql.dll file is located in the bin directory of your mysql installation. This file needs to be a copy of it in the Ruby\bin directory. 
```

# java - 日期到营业时间功能显示错误时间

> ID：11646364
> 
> 赞同：0
> 
> 时间：2012-07-25T09:11:44.210
> 
> 标签：java, android, date, calendar

我想创建一个函数，在字符串数组中显示地点的开放时间，其中第一个条目是“异常”，其他（1-7）显示“day opentime:closetime”

但是显示错误的营业时间！
我展示了对象中的数据之一：

```
"created_at": "2012-01-03T13:31:53Z",
    "updated_at": "2012-03-02T11:08:36Z",
    "start_timestamp": 1325376000,
    "exception_nl": "",
    "exception_en": "",
    "id": 447,
    "end": "2012-12-31T00:00:00Z",
    "enabled": true,
    "start": "2012-01-01T00:00:00Z",
    "season_openings": [
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Monday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3123,
            "day": "Maandag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Tuesday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3124,
            "day": "Dinsdag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Wednesday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3125,
            "day": "Woensdag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Thursday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3126,
            "day": "Donderdag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Friday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3127,
            "day": "Vrijdag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Saturday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3128,
            "day": "Zaterdag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        },
        {
            "endtime_timestamp": 946749600,
            "created_at": "2012-01-03T13:31:53Z",
            "endtime": "2000-01-01T18:00:00Z",
            "closed": false,
            "day_en": "Sunday",
            "updated_at": "2012-03-02T11:08:36Z",
            "id": 3129,
            "day": "Zondag",
            "starttime": "2000-01-01T10:00:00Z",
            "starttime_timestamp": 946720800
        } 
```

您可以很清楚地看到开放时间有效的“季节”（在这种情况下为全年），然后有 7 个显示日期的对象。开始时间和结束时间是我需要的时间，这是标准日期。日、年、月无关紧要。

但是当我运行代码时，我的输出是：

```
07-25 10:46:17.720: I/openingstijden(31338): Maandag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Dinsdag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Woensdag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Donderdag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Vrijdag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Zaterdag: 21:50 - 21:50
07-25 10:46:17.720: I/openingstijden(31338): Zondag: 21:50 - 21:50 
```

（这里我还没有对日期进行子串，对荷兰人感到抱歉，但这意味着周一到周日，所以效果很好）
但是所有的时间都是错误的。我不知道 21:50 是如何突然出现的。任何人的想法？下面是我的代码：

```
public String[] GetOpeningHours(JVenue venue, String language){
        Calendar calendar = GregorianCalendar.getInstance(); // creates a new calendar instance
        String[] oh= new String[8];
        Date start,end;

        JVenueSeasons seizoen = venue.venue_seasons.get(0); // get first, second ALWAYS enabled:false

        if(language.equals("nld")){
        oh[0]=seizoen.exception_nl; //exception eerste string uit array
        for (int i=0; i<7;i++){
            if(seizoen.season_openings.get(i).closed==true){
                oh[(i+1)]= "gesloten";
            }else{
            start=seizoen.season_openings.get(i).starttime;
            end=seizoen.season_openings.get(i).endtime;
            calendar.setTime(start);
            String starttijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE));
            calendar.setTime(end);
            String eindtijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE));

            oh[(i+1)]= seizoen.season_openings.get(i).day.substring(0, 2)+ ": " + starttijd +" - "+eindtijd;
            }
        }
        }else{
            oh[0]=seizoen.exception_en; //exception eerste string uit array
            for (int i=0; i<7;i++){
                if(seizoen.season_openings.get(i).closed==true){
                    oh[(i+1)]= "closed";
                }else{
                start=seizoen.season_openings.get(i).starttime;
                end=seizoen.season_openings.get(i).endtime;
                calendar.setTime(start);
                String starttijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE));
                calendar.setTime(end);
                String eindtijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE));
                oh[(i+1)]= seizoen.season_openings.get(i).day_en.substring(0, 2)+ ": " + starttijd +" - "+eindtijd;
                }
            }   
        }
        return oh;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:27:57.417

在您的代码中，您有：

> ```
> calendar.setTime(start);
> String starttijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE));
> calendar.setTime(end);
> String eindtijd= String.valueOf(calendar.get(Calendar.HOUR_OF_DAY))+":"+String.valueOf(calendar.get(Calendar.MINUTE)); 
> ```

我不太确定，但似乎该`calendar.setTime()`功能没有按预期工作，并且日历仍然具有当前日期和时间值，您将其设置为开始和结束变量。

尝试使用 [SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)，例如：

```
SimpleDateFormat timeFormat = new SimpleDateFormat("HH:mm");
String starttijd = timeFormat.format(start);
String eindtijd = timeFormat.format(end); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T07:43:45.710

我也不确定，但您的代码似乎采用了 ISO 8601 字符串，例如“2000-01-01T10:00:00Z”并将其分配给 java.util.Date。我看不到您在哪里实例化 Date 对象。像 Adinia 一样，我猜想您在执行时（运行时）以某种方式用当前日期时间实例化了一个 Date。

此外，无需使用这些`String.valueOf`调用。[如Adinia 的回答](https://stackoverflow.com/a/11649703/642706)中所述，为此使用格式化程序。

我建议尽可能避免使用 java.util.Date 和 .Calendar 类。他们是出了名的麻烦。而是使用 Joda-Time 或 Java 8 中的新 java.time.* 类。

在[Joda-Time](http://www.joda.org/joda-time/)中，您可以简单地将[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)字符串传递给 DateTime 上的构造函数。

这是一些使用 Joda-Time 2.3 的示例代码。我使用阿姆斯特丹时区来调整您数据的日期时间值。如果要显示 UTC/GMT，请将常量“DateTimeZone.UTC”传递给构造函数。

```
String endtime = "2000-01-01T18:00:00Z";
String starttime = "2000-01-01T10:00:00Z";

DateTimeZone timeZone = DateTimeZone.forID( "Europe/Amsterdam" ); // Or: DateTimeZone.UTC

DateTime end = new DateTime( endtime, timeZone );
DateTime start = new DateTime( starttime, timeZone );

DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm");

System.out.println( "Hours: " + formatter.print(  start ) + " - " + formatter.print( end ) ); 
```

运行时……</p>

```
Hours: 11:00 - 19:00 
```

* * *

您的数据表明您的真正意图是记录没有任何日期的时间。如果是这样，请这样做。存储完整的日期时间和时区 (“Z”) 表示日期时间，将来可能会令人困惑。Joda-Time 和 Java 8 都为此目的提供了一个“LocalTime”对象。

# visual-studio - SSIS 包无法在 VS 2008 中加载

> ID：11646366
> 
> 赞同：2
> 
> 时间：2012-07-25T09:11:49.980
> 
> 标签：visual-studio, ssis, bids

尝试在 VS 2008 中加载 SSIS 包时遇到问题。在关于它说它已安装“SQL Server 集成服务”但在加载包时我收到一条消息：

> Microsoft Visual Studio 无法加载此文档：
> 
> 要在 Business Intelligence Development Studio 中设计 Integration Services 包，必须通过以下 SQL Server 2008 版本之一安装 Integration Services：Standard、Enterprise、Developer 或 Evaluation。要安装 Integration Services，请运行 SQL Server 安装程序并选择 Integration Services。

我想这可能是一个版本问题，所以我想我会看看一个新的 Intergation Services 项目来找出差异。然而，当我告诉 Visual Studio 创建一个新的 IS 项目（非常高兴地在列表中）时，它创建了它，然后再次给了我上述错误消息。

为了对我的环境有所了解，我有几个版本的 Visual Studio（2k5、2k8、2k10）和几个版本的 SQL Server（2k5、2k8），所以我不知道版本之间是否存在一些混淆......

我想知道的另一件事是，安装东西的顺序是否有问题（即安装 SSIS 的东西时没有安装我的 VS2008）。

我希望有一个简单的方法来解决这个问题，这并不意味着重新安装东西。我可以去我们的 IT 部门请他们尝试让它工作，但这需要一些时间。如果确实如此，尽管我想知道我应该要求他们安装什么，因为它似乎目前已全部安装...

因此，如果有人可以 a) 帮助我准确计算出安装了哪些组件以及缺少哪些组件，那就太好了。无需安装介质即可帮助修复它的奖励积分...

**编辑**：我想到了。难道是我只安装了 2005 集成服务？如果是这样，我该如何确定？而且我仍然不确定为什么 VS 的行为是这样并让我创建一个项目但其中没有 SSIS，即使它们是旧版本......

**编辑**：另外，如果我加载 VS 2005，我似乎可以创建 IS 项目，但当然不能加载较新的 SSIS 包，我假设因为它们可能来自较新的版本......

**编辑：** VS 2008 中 SSIS 的版本信息：

```
Microsoft SQL Server Integration Services Designer
Version 10.0.1600.22 ((SQL_PreRelease).080709-1414 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:14:41.190

以下行可以告诉您软件包的版本：

```
<DTS:Property DTS:Name="PackageFormatVersion">3</DTS:Property> 
```

3 代表 2008 年，2 代表 2005 年，6 代表 2012 年。

顺便问一下，你的系统打了多少补丁？10.0.1600.22 听起来确实像 2008 的原始安装。尝试安装[SP3](http://support.microsoft.com/kb/2546951)和最新的[累积更新](http://support.microsoft.com/kb/2629969)- 这会将您的安装带到 10.00.5788，问题可能会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T01:26:37.163

如果您之前从 Express 2008 安装中获得了组件，然后您安装了 Standard、Enterprise、Developer 或 Evaluation，而不是实际安装新实例/组件（可能您看到 Integration Services 灰显），请使用 SQL 的升级选项服务器 2008 设置，然后 VS 将完美加载 DTSX 文件。

# c++ - 如何在 C++ 中将文件编码格式设置为 UTF8

> ID：11646368
> 
> 赞同：5
> 
> 时间：2012-07-25T09:11:55.037
> 
> 标签：c++, winapi, utf-8, character-encoding

我的软件的一个要求是包含导出数据的文件的编码应为 UTF8。但是当我将数据写入文件时，编码始终是 ANSI。（我使用 Notepad++ 来检查这个。）

我目前正在做的是尝试通过读取文件手动转换文件，将其转换为 UTF8 并将文本写入新文件。

`line`是一个`std::string`
`inputFile`是一个`std::ifstream`
`pOutputFile`是一个`FILE*`

```
// ...

if( inputFile.is_open() )
{
    while( inputFile.good() )
    {
        getline(inputFile,line);

        //1
        DWORD dwCount = MultiByteToWideChar( CP_ACP, 0, line.c_str(), -1, NULL, 0 );
        wchar_t *pwcharText;
        pwcharText = new wchar_t[ dwCount];

        //2
        MultiByteToWideChar( CP_ACP, 0, line.c_str(), -1, pwcharText, dwCount );

        //3
        dwCount = WideCharToMultiByte( CP_UTF8, 0, pwcharText, -1, NULL, 0, NULL, NULL );
        char *pText;
        pText = new char[ dwCount ];

        //4
        WideCharToMultiByte( CP_UTF8, 0, pwcharText, -1, pText, dwCount, NULL, NULL );

        fprintf(pOutputFile,pText);
        fprintf(pOutputFile,"\n");

        delete[] pwcharText;
        delete[] pText;
    }
}

// ... 
```

不幸的是，编码仍然是 ANSI。我搜索了一段时间的解决方案，但我总是通过 MultiByteToWideChar 和 WideCharToMultiByte 遇到解决方案。但是，这似乎不起作用。我在这里想念什么？

我也在这里寻找解决方案，但大多数 UTF8 问题都涉及 C# 和 php 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:50:57.873

在 VC++2010 的 Windows 上，使用本地化方面 std::codecvt_utf8_utf16 （即在 C++11 中）是可能的（据我所知，尚未在 GCC 中实现）。[来自cppreference.com](http://en.cppreference.com/w/cpp/locale/codecvt_utf8_utf16)的示例代码包含读/写 UTF-8 文件所需的所有基本信息。

```
std::wstring wFromFile = _T("teststring");
std::wofstream fileOut("textOut.txt");
fileOut.imbue(std::locale(fileOut.getloc(), new std::codecvt_utf8_utf16<wchar_t>));
fileOut<<wFromFile; 
```

它将 ANSI 编码文件设置为 UTF-8（在记事本中检查）。希望这是你需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T01:16:06.093

在 Windows 上，文件没有编码。每个应用程序都将根据自己的规则进行编码。您可以做的最好的事情是在文件的前面放置一个[字节顺序标记并希望它被识别。](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T01:12:33.083

AFAIK`fprintf()`进行字符转换，因此不能保证将 UTF-8 编码数据传递给它实际上会将 UTF-8 写入文件。由于您已经自己转换了数据，`fwrite()`因此请改用原样编写 UTF-8 数据，例如：

```
DWORD dwCount = MultiByteToWideChar( CP_ACP, 0, line.c_str(), line.length(), NULL, 0 );  
if (dwCount == 0) continue;

std::vector<WCHAR> utf16Text(dwCount);  
MultiByteToWideChar( CP_ACP, 0, line.c_str(), line.length(), &utf16Text[0], dwCount );  

dwCount = WideCharToMultiByte( CP_UTF8, 0, &utf16Text[0], utf16Text.size(), NULL, 0, NULL, NULL );  
if (dwCount == 0) continue;

std::vector<CHAR> utf8Text(dwCount);  
WideCharToMultiByte( CP_UTF8, 0, &utf16Text[0], utf16Text.size(), &utf8Text[0], dwCount, NULL, NULL );  

fwrite(&utf8Text[0], sizeof(CHAR), dwCount, pOutputFile);  
fprintf(pOutputFile, "\n"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T10:29:45.830

该类型`char`没有任何编码的线索，它所能做的就是存储8位。因此，任何文本文件都只是一个字节序列，用户必须猜测底层编码。以 BOM 开头的文件表示 UTF 8，但不再建议使用 BOM。相反的类型`wchar_t`在 Windows 中总是被解释为 UTF 16。

假设你有一个 UTF 8 编码的文件，只有一行：“孔子说：微笑。孔子说：微笑！”。以下代码片段再次附加此文本，然后读取第一行并将其显示在 a`MessageBoxW`和`MessageBoxA`中。请注意，它`MessageBoxW`显示了正确的文本，同时`MessageBoxA`显示了一些垃圾，因为它假定我的本地代码页 1252 用于`char*`字符串。

请注意，我使用了方便的`CA2W`类而不是`MultiByteToWideChar`. 请注意，该`CP_Whatever`参数是可选的，如果省略，则使用本地代码页。

```
#include <iostream>
#include <fstream>
#include <filesystem>
#include <atlbase.h>

int main(int argc, char** argv)
{
  std::fstream  afile;
  std::string line1A = u8"Confucius says: Smile. 孔子说：微笑！ ";
  std::wstring line1W;

  afile.open("Test.txt", std::ios::out | std::ios::app);
  if (!afile.is_open())
        return 0;

  afile << "\n" << line1A;
  afile.close();

  afile.open("Test.txt", std::ios::in);
  std::getline(afile, line1A);
  line1W = CA2W(line1A.c_str(), CP_UTF8);
  MessageBoxW(nullptr, line1W.c_str(), L"Smile", 0);
  MessageBoxA(nullptr, line1A.c_str(), "Smile", 0);
  afile.close();

  return 0;
} 
```

# javascript - $().countdown 不是函数

> ID：11646370
> 
> 赞同：2
> 
> 时间：2012-07-25T09:11:57.687
> 
> 标签：javascript, jquery, ajax, countdown

我的代码中有这一行

```
$('#timeLeftDiv').countdown({ until: expires, timezone: 0, serverSync: serverTime, onTick: serverTime, tickInterval: 60 }); 
```

它给了我这个错误

```
TypeError: $("#timeLeftDiv").countdown is not a function 
```

的内容`timeLeftDiv`被 Ajaxily 刷新。这有什么关系吗？

我已将这一行包含在我的代码中

```
<script src="/<path>/jquery.countdown.min.js"> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:15:13.473

可能是缺少的`</script>`标签。

假设您之前已经包含 jQuery，请尝试：

```
<script type="text/javascript" src="/<path>/jquery.countdown.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:40:32.393

您好，我遇到了同样的问题，我通过使用解决了它。

```
jQuery('#timeLeftDiv').countdown({ until: expires, timezone: 0, serverSync: serverTime, onTick: serverTime, tickInterval: 60 }); 
```

如您所见，我将 $ 替换为 jQuery，这是因为我也在我的项目中使用原型，并且我认为与此插件存在某种冲突。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-29T09:33:49.340

确保你包括`countdown.js`之后`plugin.js`

```
<script type="text/javascript" src="js/jquery.plugin.js"></script>    
<script type="text/javascript" src="js/jquery.countdown.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-19T09:59:00.553

我只是通过删除它来解决我的问题

```
$(document).ready(function() { }); 
```

因为我有两个版本的 jQuery 加载，而且这是在其他函数中。我得到的问题来自倒计时。它是通过删除它并只留下一个功能来解决的。尝试这样做：它对我有用。

# c# - 在遍历集合时如何确定当前项目的位置？

> ID：11646371
> 
> 赞同：0
> 
> 时间：2012-07-25T09:11:59.543
> 
> 标签：c#, linq, collections

在遍历集合时如何确定当前项目的位置？

我正在处理按每个客户分组的决策数据，但我有一些业务逻辑取决于集合中的“位置”，即第 1、第 2、第 3 等以及记录的其他属性，例如，*如果这是关于客户的第三个决定，他们在实例中的评级是 A 然后......*

```
var multiples = from d in context.Decision_Data
                group d by d.Client_No
                    into c
                    where c.Count() > 1
                    select c;

foreach (var grouping in multiples)
{
    foreach (var item in grouping)
    {
        // business logic here for processing each decision for a Client_No
        // BUT depends on item position ... 1st, 2nd, etc.
    } 
```

**更新：**我很感激我可以放入一个计数器并手动递增，但感觉*不对*，我认为 .NET 中有*一些东西*可以处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:30:58.820

像这样的东西：

```
foreach (var grouping in multiples)
{
    foreach (var x in grouping.Select(index,item) => new {index, item})
    {
        // x.index is the position of the item in this group
        // x.item is the item itself
    }
} 
```

旁注：您可以使 LINQ 查询的实现更加高效。`Count() > 1`将完全枚举每个组，无论如何您都可能在 foreach 中这样做。相反，您可以使用`Skip(1).Any()`，它会在找到两个项目后立即停止迭代组。显然，这只会对（非常）大的输入列表产生真正的影响。

```
var multiples = from d in context.Decision_Data
                group d by d.Client_No
                    into c
                    where c.Skip(1).Any() 
                    select c; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:14:14.943

标准没有提供任何东西`foreach`。只需保持外部计数。

`Enumerable.Select`提供当前项目索引的扩展方法有一个重载：

[http://msdn.microsoft.com/en-us/library/bb534869](http://msdn.microsoft.com/en-us/library/bb534869)

但是，如果不知道您的代码在尝试做什么，`foreach`我就无法真正提供使用它的示例。从理论上讲，您可以投影一个存储了索引的匿名类型，然后将其与`foreach`. 看来[jeroenh 的答案](https://stackoverflow.com/a/11646729/358221)是沿着这条路线走的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:14:20.217

正如亚当所说，您可以使用 Adams 解决方案，也可以`ToList()`在查询中执行

```
multiples.IndexOf(grouping) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:33:43.487

我看不出你怎么能确定你的决定顺序。我猜您的数据来自长期数据源（例如数据库等），并且您无法控制从数据源中获取决策的顺序，尤其是在应用“组经过”。

我将向`Decision`实体添加一个“顺序”字段（或列），以跟踪在将决策添加到数据源时设置的决策顺序。这样，您可以直接在业务逻辑中使用此字段。

必须有很多方法来实现对决策顺序的跟踪，但是如果没有，您甚至无法确定它们是按什么顺序制定的。

# json - 支柱 2 + json

> ID：11646372
> 
> 赞同：1
> 
> 时间：2012-07-25T09:12:03.323
> 
> 标签：json, struts2

我想知道 Struts 2 核心 jar 是否必须与 Struts2-Json-Plugin jar 同步。因为当我从 Action 类中的方法返回“SUCCESS”时，就会发生异常。我在我的 xml 中将结果类型声明为“json”

```
<result-type name="json" class="org.apache.struts2.json.JSONResult"/> 
```

我得到的例外是

```
java.lang.NoSuchMethodError: com.opensymphony.xwork2.ActionContext.get(Ljava/lang/String;)Ljava/lang/Object;
at org.apache.struts2.json.JSONResult.execute(JSONResult.java:166)
at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:348)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86) 
```

我正在使用 struts2-core-2.0.11.jar 而我的 struts.xml 是

```
<action name="editEmployee" class="myaction.AddEmployeeAction" method="getValue">
      <result name="success" type="json" />
</action> 
```

我的行动是

```
public class AddEmployeeAction extends ActionSupport implements ParameterAware {

/**
 * 
 */
private static final long serialVersionUID = 1L;
private EmployeeDaoImp empdao;
private Map parameters;

public EmployeeDaoImp getEmpdao() {
    return empdao;
}

public void setEmpdao(EmployeeDaoImp empdao) {
    this.empdao = empdao;
}

public String getValue() throws Exception
{
    //JSONArray jsonArr = new JSONArray();
    JSONObject jsonObject = new JSONObject();
    String query = getParameterValue("selChar");
    List<String> names = empdao.getData(query);
    /*for (String name : names) {
        jsonArr.add(name);
    }*/
    jsonObject.put("namesList", names);
    return SUCCESS;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:11:51.323

S2 插件版本必须与 S2 版本匹配；插件使用 struts2-core 提供的机制。

虽然插件*可能*与不同版本的核心一起工作，但它永远不会被这样*测试*，因此除非您提供自己的测试工具，否则如果您开始随机混合和匹配，则无法知道行为会是什么。你不应该*混搭*。

# php - 如何在php中使用会话？

> ID：11646375
> 
> 赞同：1
> 
> 时间：2012-07-25T09:12:09.107
> 
> 标签：php, session

我正在php中创建一个登录模块。我为此使用会话变量。在文件的顶部，我写 `session_start();`

然后当我的登录密码通过身份验证时，我写 `$_SESSION["username"] = $_POST["userid"]`

现在我还需要做其他事情来确保开始的会话能够持续吗？因为一旦登录，它就会自动注销？这是否意味着会话在我登录后立即到期？在那种情况下，我应该怎么做才能使会话持续下去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:15:56.223

不，会话旨在停留在请求之间。如果您`$_SESSION['username']`在下一个请求中阅读，它将包含您在上一个请求中保存的数据。显然，您需要将`session_start();`要与之交互的每个页面放在开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:18:19.497

把 session_start(); 在您将使用会话变量的页面顶部。并确保您没有在登录脚本中取消设置会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:15:38.047

`session_start()`不启动会话，它启动*会话引擎*。它必须在您想要访问会话的*每个页面上运行。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:15:38.827

您需要`session_start();`在要访问 Session 数据的所有文件的顶部

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:24:40.013

在顶部，`session_start();`还要在您要使用会话的每个页面上放置，您需要此功能。

只要您没有删除会话或关闭浏览器，会话就会持续，不确定它是否会在某个时间过期。要检查您是否仍处于登录状态，您可以使用 访问会话`$username = $_SESSION['username'];`，或者该功能`isset($_SESSION['username'])`也有帮助。

# android - 如何查看 apk 文件的开发者 ID？

> ID：11646376
> 
> 赞同：1
> 
> 时间：2012-07-25T09:12:15.457
> 
> 标签：android, android-manifest, google-play

我的系统上下载的 apk 文件很少。现在我想找到他们的 Developer ID/Creator_ID（就像我们有 Google Inc、Facebook 等）。我在 apk 的清单文件中找不到它。这个信息甚至存在于 apk 中吗？

我已经看到我们可以使用位于 Android SDK 工具文件夹内的*“aapt.exe”*实用程序查看 apk 文件信息（如包名称、版本代码等），但从中我也找不到任何关于开发者 ID。

我已经在网上寻找过这个，但找不到任何重要的东西。有人可以帮我弄这个吗..？？提前致谢。

如果上面有任何不清楚的地方，请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:24:51.980

如果 APK 已签名，您可以获得证书信息。它可能有也可能没有实际名称，但很可能会有。使用 jarsigner 命令：

```
jarsigner -verify -verbose -certs my.apk 
```

以 'X.509, CN=blah, blah' 开头的行将最接近开发人员 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:20:09.870

感谢大家的及时回复。我也找到了解决此问题的解决方法。（虽然可能会发现它有点开销，但我认为它值得在这里分享。）

所以首先需要将“apk”文件的扩展名更改为“.zip”。然后解压。

在 META-INF 文件夹中，您会找到一个文件名“Cert.RSA”您可以使用 openssl.exe util 使用此命令对其进行解码 -

```
openssl pkcs7 -inform DER -in yourRSAfile.rsa -print_certs -text 
```

（有关此的更多信息，您可能必须阅读此[http://www.openssl.org/docs/apps/pkcs7.html](http://www.openssl.org/docs/apps/pkcs7.html)）

现在在那里你可能会看到一行提供有关“发行人”的信息。标签“O”的值通常是开发者 ID（也用于 Google Play）。

希望这可以帮助..！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:18:34.893

开发人员“id”本身并不存在于 apk 中。apk 文件中唯一存在的信息是应用程序的清单，包括包名称、权限和活动列表。

开发者信息在 Google Play 开发者控制台中设置，并且可以独立于应用程序的 apk 进行更改。

唯一的是包名称，它通常提供有关开发人员的信息。例如，我所有的应用程序包都基于我自己的网站域。Google 的应用程序通常以 com.google 等开头...

# php - jQuery 数据表插件太慢 - 需要更换

> ID：11646377
> 
> 赞同：15
> 
> 时间：2012-07-25T09:12:15.943
> 
> 标签：php, jquery, datatables

我已经使用 jQuery 数据表[插件](http://datatables.net/)大约两年了，到目前为止效果很好。当我需要一次加载大约**45000**条记录时，现在出现了问题（您单击按钮并等待加载数据的页面） - 加载时间太长而无法等待。

这是我使用 Chrome 网络浏览器进行的测试（数据来自它的网络选项卡使用）：

*数据表插件打开：*
**5476**条记录：**45071**条记录：
`24 requests ❘ 256.26KB transferred ❘ 19.80s
(onload: 19.80s, DOMContentLoaded: 18.58s)`
 **`34 requests ❘ 1.85MB transferred ❘ 11.1min
(onload: 11.1min, DOMContentLoaded: 11.0min)`**

 ***数据表插件关闭（jQuery数据表初始化被注释掉）：*
**5476**条记录：
`21 requests ❘ 255.84KB transferred ❘ 6.57s
(onload: 13.26s, DOMContentLoaded: 13.28s)`

**45071**条记录：
`31 requests ❘ 1.84MB transferred ❘ 2.0min
(onload: 2.0min, DOMContentLoaded: 2.0min)`

45k 行的数据表*加载时间增加*了**80%以上，5k 行增加了近****40%**。

所以我想知道你们是否知道任何类似的插件可以更快地处理很多行（45000+），或者我只是通过尝试“一次性”加载所有 45000+ 记录而错过了重点？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-25T09:32:48.957

从 DataTables 常见问题解答 ( [http://datatables.net/faqs#speed](http://datatables.net/faqs#speed) )：

*   客户端处理 - DOM 源数据：~5'000 行。速度选项：bSortClasses
*   客户端处理 - Ajax 源数据：~50'000 行。速度选项：bDeferRender
*   服务器端处理：数百万行。

如果您目前不使用延迟渲染，对于 45'000 行，我肯定会建议您这样做。如果做不到这一点，对于 DataTables 选项，您可能需要查看[server-side processing](http://datatables.net/examples/data_sources/server_side.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-05T18:03:56.833

艾伦的回答很好；但要提到的另一件事（极大地影响加载时间）是设置`bProcessing`和`bServerSide`为真，如下面的代码所示：

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "../examples_support/server_processing.php"
    } );
} ); 
```

参考。[http://datatables.net/examples/data_sources/server_side.html](http://datatables.net/examples/data_sources/server_side.html)

我的代码加载需要 15 秒，现在需要 1 秒 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-24T14:41:04.963

我发现浏览器插件也会降低 DataTable 的性能，这就是我的情况。表本身的加载时间从大约 15 秒变为 2 秒。

其中之一是**Skype 工具栏**，它会自动解析表格中的数据，除非你告诉它不要这样做。

这对于大表来说是个问题。很多用户都有这个插件，它在不知不觉中减慢了他们加载大表的速度。

对此有一个很好的解决方案，将其添加到标题中。每个公开的 DataTables 网页都应包含以下内容：

```
<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" /> 
```**

# ruby-on-rails - 无法在浏览器中检索 haml 文件

> ID：11646378
> 
> 赞同：0
> 
> 时间：2012-07-25T09:12:16.237
> 
> 标签：ruby-on-rails, haml

我已经生成了一个新的控制器 -

```
murtaza@murtaza-dev:~/workspace/rails/sim-sim$ rails g controller home index
          create  app/controllers/home_controller.rb
           route  get "home/index"
          invoke  haml
          create    app/views/home
          create    app/views/home/index.html.haml
          invoke  test_unit
          create    test/functional/home_controller_test.rb
          invoke  helper
          create    app/helpers/home_helper.rb
          invoke    test_unit
          create      test/unit/helpers/home_helper_test.rb
          invoke  assets
          invoke    coffee
          create      app/assets/javascripts/home.js.coffee
          invoke    scss
          create      app/assets/stylesheets/home.css.scss 
```

但是，当我尝试在 localhost:3000/home/index 上访问它时，我的网页上出现以下错误 -

> 模板丢失
> 
> 缺少带有 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]} 的模板主页/索引、应用程序/索引。搜索：*“/home/murtaza/workspace/rails/sim-sim/app/views”

我该如何补救？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:28:12.377

可能您应该将“gem 'haml-rails'”添加到 Gemfile 开发组

像这样：

**宝石文件**

```
gem 'haml-rails', :group => :development 
```

# groovy - 如何使用 Groovy XmlNodePrinter 编写输出？

> ID：11646379
> 
> 赞同：1
> 
> 时间：2012-07-25T09:12:19.293
> 
> 标签：groovy, soapui

如何使用 XmlNodePrinter 将对象的输出写入soapUI 中的测试步骤（Soaprequest）。

我有以下 groovy 脚本，其中有一个输入 xml 文件。我执行文件操作，然后想使用 xmlnodeprinter 将对象写入soapUI中的测试步骤（soaprequest）（以粗体突出显示......不确定 wat 应该代替 ---）

我尝试写入一个有效的外部文件（以绿色突出显示）

```
def alert = com.eviware.soapui.support.UISupport;
//Define a file pointer for groovy to handle the file operations.
def inputFile = new File("V:\\Sample\\Sample.xml")
if(!inputFile.exists())
{
//Display an alert if the file is not found.
alert.showInfoMessage("Input File 'Sample.xml' not found!");
}
else
{
xml=new XmlParser().parseText(inputFile.text)
def nodeToDel=xml.A.B.find{it.@C3='1'}
def parent = nodeToDel.parent()
parent.remove(nodeToDel)
//new XmlNodePrinter(new PrintWriter(new FileWriter(new File('V:\\Sample\\e.xml')))).print(parent)
new XmlNodePrinter(new PrintWriter(new FileWriter(---))).print(parent)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:30:06.760

定义一个字符串编写器

```
def sw = new StringWriter()

new XmlNodePrinter(new PrintWriter(sw)).print(parent)

def modifiedXml = sw.toString() 
```

modifiedXml 变量将包含带有已删除节点的 xml，您可以将其进一步用于测试步骤。

# android - android中的日期检索

> ID：11646388
> 
> 赞同：-2
> 
> 时间：2012-07-25T09:12:40.730
> 
> 标签：android, date

在我的应用程序中，我有 1 个编辑文本框，在此用户中将输入一些日期。我想要的是我必须从用户输入的日期中获取第 7 天的日期。我在谷歌中搜索，我找到了 1 个解决方案。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");                    
Calendar cal = Calendar.getInstance();
cal.add("field", +7);
String currentDateandTime = sdf.format(cal.getTime()); 
```

在上面`cal.add("field",+7)`->字段是int。但我的日期格式是字符串。所以我不能在这里使用..请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:18:55.607

从 SimpleDateFormat 获取日期并将此日期对象添加到日历中，然后更改为日历。并再次从日历获取新的更新日期。等我贴代码

```
try {
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
    Date UserEnterDate = sdf.parse("String from your editbox");
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(UserEnterDate);
    int day = calendar.get(Calendar.DAY_OF_MONTH);
    day = day + 7;
    calendar.set(Calendar.DAY_OF_MONTH, day);
    String newDate = calendar.get(Calendar.DAY_OF_MONTH) + "/"
                                + calendar.get(Calendar.MONTH) + "/"
                                + calendar.get(Calendar.YEAR);
} catch (Exception e) {
    // TODO: handle exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:22:08.713

我建议你`DatePickerDialog`最好使用`onClick()``EditText`

那么您将获得单独的日期月份年份。然后你可以设置你的日期

```
Date+=7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:21:17.093

```
As you said thatyou got the date in string format.
So let me start from there
Suppose the date is:
String dt = "2008-01-05";  // Start date
Then do thhis::   
     SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
     Calendar c = Calendar.getInstance();
     try {
        c.setTime(sdf.parse(dt));
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     c.add(Calendar.DATE, 7);  // number of days to add
     dt = sdf.format(c.getTime());
     System.out.println(""+dt); 
```

Hope.this 肯定会对您有所帮助。享受！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:32:30.503

如果您知道格式，则可以从字符串中获取日期对象，根据您的问题，格式为：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");                    
                       Calendar cal = Calendar.getInstance();
                       cal.add("field", +7);
                       String currentDateandTime = sdf.format(cal.getTime()); 
```

现在使用此日期格式解析字符串以获取 Date 对象，例如：

```
Date dt=sdf.parse(txtDt.getText().toString()); 
```

现在将此日期设置为日历对象：

```
Calendar cal=Calendar.getInstance();
cal.setTime(dt); 
```

现在您需要在此日期上添加 7 天，请执行以下操作：

```
cal.add(Calendar.DAY_OF_MONTH, 7); 
```

现在您已经成功添加了 7 天，现在通过使用以下方法从此日历对象获取日期：

```
Date dtNew=cal.getTime(); 
```

您可以使用以下方法将其转换为可读字符串：

```
String strNewDt=sdf.format(dtNew); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T09:19:32.540

您必须将要修改的字段名称写入“字段”参数，此处#sa 链接到日历参考。日历对象不是字符串，而是您使用的完全不同的生物。使用它的功能来做到这一点。

[http://developer.android.com/reference/java/util/Calendar.html](http://developer.android.com/reference/java/util/Calendar.html)

所以你会写

!edit，您实际上必须使用整数设置日历并解析您的字符串以匹配。使用日历中的 set 函数：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");                    
                   Calendar cal = new Calendar;
                   cal.set(int year, int month, int day, int hourOfDay, int minute)
                   cal.add(DATE, 7);
                   String currentDateandTime = sdf.format(cal.getTime()); 
```

# php - 如何用php检测文本的相似度？

> ID：11646390
> 
> 赞同：1
> 
> 时间：2012-07-25T09:12:41.700
> 
> 标签：php, similarity

假设我有两句话：

“敏捷的棕色狐狸跳过了懒狗”

“快速的棕色兔子跳过懒惰的猫”

有没有一种算法来检测这两个句子的相似度？例如：

```
function similarity_ratio($text1, $text2) {
code code code
return $similarity_ratio;
}
$text1 = "The quick brown fox jumps over the lazy dog";
$text2 = "The quick brown cat jumps over the lazy chicken";
echo similarity_ratio($text1, $text2);
// output 88% 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T09:21:14.467

```
function similarity_ratio($text1, $text2) {
     similar_text($text1, $text2, $similarity_ratio);
     return $similarity_ratio;
}

$text1 = "The quick brown fox jumps over the lazy dog";
$text2 = "The quick brown fox jumps over the lazy cat";
echo similarity_ratio($text1, $text2);

Output: 93.023255813953 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T09:15:55.123

看看这个 PHP 函数： http: [//php.net/manual/en/function.similar-text.php](http://php.net/manual/en/function.similar-text.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:16:06.220

你在找这个吗？[http://php.net/manual/en/function.similar-text.php](http://php.net/manual/en/function.similar-text.php)。如果速度很重要，请考虑这一点：http: [//php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)

# javascript - jQuery UI 对话框问题

> ID：11646397
> 
> 赞同：0
> 
> 时间：2012-07-25T09:12:56.347
> 
> 标签：javascript, jquery, html, modal-dialog, jquery-ui-dialog

我正在尝试创建 jquery 对话框，但没有用:(这是我的 jQuery 代码：

```
$(document).ready(function() {
    createDialog();

});
function createDialog() {

    $("#dialog:ui-dialog").dialog("destroy");
    $("#dialog-form").dialog(
            {
                autoOpen : false,
                height : 475,
                width : 350,
                modal : true,
                buttons : {
                    "submit" : function() {

                        var bValid = true;
                        allFields.removeClass("ui-state-error");
                        postText();
                            $(this).dialog("close");
                        }
                    },
                    cancel : function() {
                        $(this).dialog("close");
                    }
                },
                close : function() {
                    allFields.val("").removeClass("ui-state-error");
                }
            });

    $(".add-org").click(function() {

            $("#dialog-form").dialog("open");
    });
} 
```

这是html代码：

```
<link href="<c:url value="/resources/styles/jquery-ui-1.8.21.custom.css"/>"
    rel="stylesheet" type="text/css">
<script type="text/javascript"
    src="<c:url value='/resources/js/jquery-1.7.js'/>"></script>
<script type="text/javascript"
    src="<c:url value='/resources/js/jquery-ui-1.8.21.custom.min.js'/>"></script>
    <script type="text/javascript"
    src="<c:url value='/resources/js/myScript.js'/>"></script>

    <a href="javascript:void(0)" class="add-org">New </a>

<div id="dialog-form" title="Add New ">
    <p class="validateTips">All form fields are required.</p>
    <form>
    ..................
    </form>
</div> 
```

萤火虫 说：

> TypeError: $("#dialog:ui-dialog").dialog 不是函数
> 
> $("#dialog:ui-dialog").dialog("destroy");

在我的页面上，我看到了表单中的所有字段。那么我的问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:23:50.040

试试这个：**工作演示** [http://jsfiddle.net/kEZkh/](http://jsfiddle.net/kEZkh/)

不确定您的源路径是否正确，请包含以下脚本。

休息，请随意玩演示并希望它有助于事业`:)`

**脚本**

```
 <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/base/jquery-ui.css">

      <link rel="stylesheet" type="text/css" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css">

      <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
      <script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script> 
```

**代码**

```
$("#forgot").click(function(e){ 
    $("#dialog-form").dialog("open");
    e.preventDefault();
});

$("#dialog-form").dialog({
            modal: true,
            autoOpen: false,
            height: 255,
            width: 300,
            buttons: {
                "Retrieve": function() {
                    document.forms["forgotform"].submit();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:22:22.213

如果脚本文件已成功加载，请检查 Firebug/DevTools。如果是，请在控制台（Firebug、DevTools）或更好的控制台中输入，将该行放在执行其他代码的位置：

```
console.debug(jQuery.ui) 
```

[如果显示`undefined`，则 jQuery UI 尚未加载（还）。](https://stackoverflow.com/questions/2260250/testing-if-jqueryui-has-loaded)在加载所有内容之前检查您的代码是否运行，将其放入 jQuery 的[`$(document).ready();`](http://jqapi.com/#p=ready). 如果它是一个对象，请检查它并检查`dialog`属性。

[如果您在jqueryui.com](http://jqueryui.com)上配置了自定义构建，请仔细检查您是否包含对话框小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:25:41.837

该`destroy`调用应该与您在创建对话框时使用的元素相同，而不是`.ui-dialog`包装在您的内容周围的容器：

```
$("#dialog-form").dialog('destroy'); 
```

由于您当前的代码正在引发异常，因此应该创建对话框的后续行永远不会被调用。

如果你想销毁*每个*可能已经打开的对话框，jQuery UI 可以轻松地`.ui-dialog-content`在每个内容 div 上放置一个类：

```
$('.ui-dialog-content').dialog('destroy'); 
```

# javascript - 用于设置值的跨浏览器 innerText

> ID：11646398
> 
> 赞同：11
> 
> 时间：2012-07-25T09:13:01.180
> 
> 标签：javascript, html, cross-browser, innertext

假设我有以下代码：

```
<html>
  <head></head>
  <body>
   <div id="d">some text</div>

  <script type="text/javascript">
    var d = document.getElementByid('d');
    var innerText = d.innerText || d.textContent;

    innerText = 'new text';
  </script>
  </body>
</html> 
```

我想用 id='d' 更改 div 标签的文本值。不幸的是，上面的代码块不起作用，文本内容也没有改变。

如果执行以下配方，它会起作用：

```
if (d.innerText) d.innerText = 'new text';
else d.textContent = 'new text'; 
```

但我不喜欢上面的食谱，因为它不紧凑。

你有什么建议为什么第一种方法不起作用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T09:25:10.297

您可以获取属性并使用它，而不是多次分配

```
var text = ('innerText' in d)? 'innerText' : 'textContent';
d[text] = 'New text'; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T09:16:09.500

第一种方法不起作用，因为它所做的只是将变量设置为新值，而不是将值写入元素。线

```
var innerText = d.innerText || d.textContent; 
```

...将变量设置为它找到的文本属性`innerText`的*值*，它不是对实际属性本身的引用。

你必须做分支，例如：

```
var d = document.getElementById('d');
var msg = "new text";
if ("innerText" in d) {
    d.innerText = msg;
}
else {
    d.textContent = msg;
} 
```

该功能 - 检测浏览器是否使用`innerText`或`textContent`通过查找元素上是否存在属性（这就是`in`操作员所做的，检查对象是否具有具有给定名称的属性，即使该属性为空白，`null`,`undefined`等。 ）。

你甚至可以为它自己写一个函数：

```
var setText = (function() {
    function setTextInnerText(element, msg) {
        element.innerText = msg;
    }

    function setTextTextContent(element, msg) {
        element.textContent = msg;
    }

    return "innerText" in document.createElement('span') ? setTextInnerText : setTextTextContent;
})(); 
```

这会进行一次特征检测，并返回一个函数，任何半体面的引擎都会为您内联。

或者，如果您希望将消息中的 HTML 标记作为标记（而不是文字文本）处理，您可以只使用`innerHTML`（跨浏览器一致）。但同样，如果您使用`innerHTML`，标记将被处理，这可能不是您想要的。

* * *

我发现使用一个好的 JavaScript 库来处理这些浏览器差异（并提供*大量*有用的进一步功能）很有用，例如[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他几个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)。显然，没有图书馆就无法做到，这只是站在已经完成大量工作的人们的肩膀上的问题。:-)

在这种情况下，例如，使用 jQuery，上面的代码将是：

```
$("#d").text("new text"); 
```

而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-08T10:35:56.960

```
d.appendChild(document.createTextNode("new text"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-12T19:54:01.843

您只能使用`textContent`它，它可以在主流浏览器中运行......（FF、Safari 和 Chrome）

```
var d = document.getElementById('d');
var msg = "new text";
d.textContent = msg; 
```

# console - 按键上的奇怪 console.log 行为

> ID：11646399
> 
> 赞同：0
> 
> 时间：2012-07-25T09:13:06.800
> 
> 标签：console, keypress

如果`keyPressed`事件是 27 通过按“esc”，它将一次打印与 var`console.log("ESCY");`一样多的次数`loopcnt`

```
 loopcnt = 0;
var fps = 22;
var interval = 1000 / fps;

function draw()
{
    setTimeout(function() 
    {

        if (willAnimate)
        {
            window.requestAnimationFrame(draw);
            console.log("Framecnt: "+ loopcnt);
            loopcnt++;

        }

        IndexJSON.each(function(key, value){ IndexOBJECT[key].render(); });

        $(window).delegate('body', 'keydown', function(event){
            keyPressed = event.which;
            if (keyPressed == 27)
            {
                willAnimate = false;
                console.log("ESCY");
            }           
        }); 
    }, interval);
};

willAnimate = true;
draw(); 
```

如果你问我，这没有逻辑意义......

就好像它正在缓冲所有的`console.log`s，直到`if`语句为真..

知道为什么会这样吗？

（还有另一个问题：我尝试用 取消`setTimeout`函数`return`，但它不会终止函数，可能是因为`return`只会从 if 语句返回，但有没有办法从外部终止函数？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:55:19.163

好的，显然当我将 .delegate 移到 setTimeout() 之外时；它不会多次触发 if 语句。

而且，我现在意识到，每次循环循环时我都会绑定键，因此当我按下键时，它将触发所有绑定..

现在想想就很明显了……

# android - 在 Nook 设备中存储外部数据

> ID：11646400
> 
> 赞同：0
> 
> 时间：2012-07-25T09:13:06.703
> 
> 标签：android, storage, nook

如何在没有 SD 卡的 Nook 设备（模拟器）中存储数据。或如何在 Nook 设备（模拟器）中使用 /media。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:21:02.227

在日食中

转到 DDMS 透视图并选择 FileExplorer 选项卡，在选择 sd 卡后选择一个 sd 卡，您会看到两个图标，用于将文件推送到设备并从设备中提取文件

# sql - 最多选择 COUNT 个

> ID：11646401
> 
> 赞同：7
> 
> 时间：2012-07-25T09:13:07.800
> 
> 标签：sql, sql-server-2005, count, max

我有一张“好”的桌子。它包含一个列 app_rate_unit（类型：nvarchar）。我的目标是计算表中的每个不同值，并让 DBMS (MS Server 2005) 给我最常出现的值。

这是我的代码：

```
SELECT MAX(app_rate_unit) AS MAX_APP
  FROM (SELECT app_rate_unit, COUNT(*) AS co
          FROM dbo.well AS w
         GROUP BY app_rate_unit
        ) AS derivedtbl_1 
```

然而，它的问题是，我的 DBMS 实际上为我提供了最低的计数。

SideQuestion：如何在计数时过滤外键（在表中）和 NOT NULL（在 app_rate_unit 中）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T09:29:10.070

```
select top 1 app_rate_unit, count(*) from dbo.well
group by app_rate_unit
order by count(*) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:32:08.403

试试这个

```
 SELECT 
        COUNT(app_rate_unit)AS MAX_APP , 
        app_rate_unit 
    FROM 
        dbo.well
    WHERE
            app_rate_unit IS NOT NULL
    GROUP BY 
        app_rate_unit 
    ORDER BY 
            MAX_APP DESC 
```

上面的脚本会给你计数和项目。如果您不确定只有一项会出现最大次数，您可以更改计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:24:31.710

```
select top 1 count(*) as co from dbo.well as w group by app_rate_unit
order by count(*) desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T07:11:34.770

在 PostgreSQL 中，我们可以编写使用最大计数的查询

```
select max(count) from (

select count(id) from Table _name group by created_by,status_id having status_id = 6 ) as Alias 
```

例如

```
select max(count) from (

select count(id) from orders group by created_by,status_id having status_id = 6 ) as foo 
```

# javascript - 如何在列表和项目视图中呈现主干集合？

> ID：11646402
> 
> 赞同：9
> 
> 时间：2012-07-25T09:13:08.310
> 
> 标签：javascript, backbone.js

我正在开发一个联系人栏，它在 html 列表中呈现用户的所有联系人。

我有的：

1.  UserModel - 这是一个带有用户名和电子邮件的简单 Backbone.Model
2.  UserCollection - 用作联系人列表
3.  ContactsView - 这是 ul 联系人列表
4.  ContactView - 这是呈现为 li 的单个联系人模型

我目前正在对如何（以及在​​何处）获取我的 UserCollection 以及如何将单个模型传递给单个 ContactView 项目的解决方案感到头疼。

具体障碍是：

1.  我应该在哪里获取，存储 UserCollection
2.  如何呈现联系人列表
3.  如何呈现联系人项目
4.  如何防止 fetch({ success: callback }) 破坏我的代码结构

我目前的代码是这样的：

入口点：

```
// create a new instance of the contact list view
var view = new ContactsView();
// insert the rendered element of the contact list view in to the dom
$('div.contacts-body').html(view.render().el);
view.fetch({ success: view.loadContacts }); 
```

联系人查看：

```
define(
    ['jquery', 'underscore', 'backbone', 'text!templates/conversations/contacts.html', 'collections/users', 'views/conversations/contact'],
    function($, _, Backbone, ContactsTemplate, UserCollection, ContactView) {

        var ContactsView = Backbone.View.extend({

            tagName: "ul",

            className: "contacts unstyled",

            attributes: "",

            // I am feeling uneasy hardcoding the collection into the view
            initialize: function() {
                this.collection = new UserCollection();
            },

            // this renders our contact list
            // we don't need any template because we just have <ul class="contacts"></ul>
            render: function() {
                this.$el.html();
                return this;
            },

            // this should render the contact list
            // really crappy and unflexible
            loadContacts: function() {
                this.collection.each(function(contact) {
                    // create a new contact item, insert the model
                    var view = new ContactView({ model: contact });
                    // append it to our list
                    this.$el.append(view.render().el);
                });
            }

        });

        return ContactsView;

}); 
```

联系人查看

```
define(
    ['jquery', 'underscore', 'backbone', 'text!templates/conversations/contact.html'],
    function($, _, Backbone, ContactTemplate) {

        var ContactView = Backbone.View.extend({

            tagName: "li",

            className: "contact",

            attributes: "",

            template:_.template(ContactTemplate),

            initialize: function() {
                this.model.bind('change', this.render, this);
                this.model.bind('destroy', this.remove, this);
            },

            render: function() {
                this.$el.html(this.template(this.model.toJSON()));
                return this;
            }

        });

        return ContactView;

}); 
```

有人可以帮我解决我的四个障碍。

欢迎使用良好的示例链接。我将我的代码风格定位在待办事项列表中，不幸的是，待办事项列表并不是那么先进......

**更新代码：**

```
define(
    ['jquery', 'underscore', 'backbone', 'text!templates/conversations/contacts.html', 'collections/users', 'views/conversations/contact'],
    function($, _, Backbone, ContactsTemplate, UserCollection, ContactView) {

        var ContactsView = Backbone.View.extend({

            tagName: "ul",

            className: "contacts unstyled",

            attributes: "",

            events: {

            },

            initialize: function() {
                this.collection = new UserCollection();
                this.collection.on('reset', this.render);
                this.collection.fetch();
            },

            render: function() {
                // in chromium console
                console.log(this.el); // first: html, second: undefined
                console.log(this.$el); // first: html in array, second: undefined
                this.$el.empty(); // error on the called that this.$el is undefined

                this.collection.each(function(contact) {
                    var view = new ContactView({ model: contact });
                    this.$el.append(view.el);
                }.bind(this));

                return this;
            }

        });

        return ContactsView; 
```

会不会是 reset 触发了 this.render 两次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:02:53.330

首先：为什么要获取视图？主干视图没有 fetch 方法。

### 1 获取 UserCollection 的正确位置是在视图的初始化方法中：

```
initialize: function() { // ContactsView
  _.bindAll(this, 'render', 'otherMethodName', ...); // Bind this to all view functions
  ...
  this.collection.on('reset', this.render); // bind the collection reset event to render this view
  this.collection.fetch();
  ...
} 
```

现在，您可以在需要时准确获取联系人。下一步是渲染集合。

### 2 绑定到重置事件会使您的 loadContacts 方法过时，我们可以在渲染函数中执行此操作：

```
render: function() {
  this.$el.empty(); // clear the element to make sure you don't double your contact view
  var self = this; // so you can use this inside the each function

  this.collection.each(function(contact) { // iterate through the collection
    var contactView = new ContactView({model: contact}); 
    self.$el.append(contactView.el);
  });

  return this;
} 
```

现在你在 render 方法中渲染你的联系人列表，它应该在哪里完成。

### 3 ContactView 实际上看起来不错。

只需在 initialize 方法中使该项目自身呈现，这样您就不必在 ContactsView 的渲染方法中进行无用的调用并弄乱您的代码。也在这里 bindAll 。

```
initialize: function() { // ContactView
  _.bindAll(this, 'render', 'otherMethodName', ...);
  ...
  this.render(); // Render in the end of initialize
} 
```

我不知道你在这里问什么，但我认为最好的方法是不使用成功回调。每当对它们执行某些操作时，集合和模型都会触发事件，因此利用它们比成功回调更健壮和可靠。[查看活动目录以了解更多信息。](http://backbonejs.org/#FAQ-events)Christophe Coenraets的[Wine Cellar 教程](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)是这种 listview-listitemview 安排的一个很好的例子。

希望这可以帮助！

更新：添加了 _.bindAlls 以在事件绑定渲染调用中解决此问题。[关于绑定这个的一些信息。](http://backbonejs.org/#FAQ-this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:17:35.073

*注意：所有代码均已简化且未经测试*

当我像你一样定义了所有元素结构时，实现了所有模型、集合和视图，然后我实现了一个*加载器*，它负责触发获取和渲染操作。

首先，我需要从外部公开类定义，如下所示：

```
// App.js
var App = {}

// ContactsCollection.js
$(function(){
  var App.ContactsCollection = Backbone.Collection.extend({ ... });
});

// ContactsView.js
$(function(){
  var App.ContactsView = Backbone.View.extend({ ... });
});

// and so on... 
```

然后我实现了我称之为*Loader*的东西：

```
// AppLoad.js
$(function(){

  // instantiate the collection
  var App.contactsCollection = new App.ContactsCollection();

  // instantiate the CollectionView and assign the collection to it
  var App.contactsView = new App.ContactsView({
    el: "div.contacts-body ul",
    collection: App.contactsCollection
  });

  // fetch the collection the contactsView will
  // render the content authomatically
  App.contactsCollection.fetch();
}); 
```

您必须做的另一个更改是以`ContactsView`响应更改的方式配置，`App.contactsCollection`因为由于`fetch()`是异步的，您可以`render()`在集合仍未加载时调用，因此您必须告诉 CollectionView 在集合时自行呈现它准备好了：

```
var ContactsView = Backbone.View.extend({
  initialize: function( opts ){
    this.collection.on( 'reset', this.addAll, this );
    this.collection.on( 'add', this.addOne, this );
    // ... same with 'remove'
  },

  addOne: function( model ){
    var view = new App.ContactView({ model: contact });
    this.$el.append( view.render().el );
  },

  addAll: function(){
    this.collection.each( $.proxy( this.addOne, this ) );
  }
}); 
```

您必须按正确的顺序*要求您的 js 文件：*

1.  应用程序.js
2.  您的模型、集合、视图
3.  应用加载.js

使用该系统，您可以获得：

*   如果您需要从其他地方访问它，可以从外部访问您的收藏。
*   with的外部控制`CollectionView.el`更适合解耦和测试。
*   CollectionView 将自动响应 Collection 中的更改

**注意：**如果您使用`Router`，您可以将`AppLoad.js`逻辑移到那里。

# windows-8 - WinRT 的 Silverlight IApplicationService 等效项

> ID：11646407
> 
> 赞同：1
> 
> 时间：2012-07-25T09:13:26.143
> 
> 标签：windows-8, windows-runtime

我开始将 windows phone 7 应用程序移植到 windows 8，他们使用 IApplicationService 继承类来启动停止服务。我如何在 Windows 8 中实现相同的功能。我在下面附上了 Windows 电话代码。请帮我。它的阻塞部分似乎有点困难。

```
 public class ApplicationService : IApplicationService
      {
           private IApplicationService _logger;
           private IApplicationService _dataSourceManager;
           public void StartService(ApplicationServiceContext context)
           {
                  _logger = new Logger();
                  _dataSourceManager = new DataSourceManager();
                  _logger.StartService(context);
                  _dataSourceManager.StartService(context);
           }  
           private IApplicationService LoadService(string assemblyName, string typename)
           {
                    var parts = Deployment.Current.Parts;
                    if (parts.Any(part => part.Source.StartsWith(assemblyName)))
                    {
                             var assembly = Assembly.Load(assemblyName);
                             Type type = assembly.GetType(typename);
                             return Activator.CreateInstance(type, new[] {   
                             SynchronizationContext.Current }) as IApplicationService;
                    }
                    return null;
           }
           public void StopService()
          {
                  Current.StopService();
                 _dataSourceManager.StopService();
                 _logger.StopService(); // stop last because other services depend on it
                 _logger = null;
                 _dataSourceManager = null;
           }
} 
```

# c# - 如何将指向 char[256] 数组的指针从 C++ 编组到 C#

> ID：11646408
> 
> 赞同：3
> 
> 时间：2012-07-25T09:13:26.220
> 
> 标签：c#, c++, interop, pinvoke, marshalling

我有具有以下签名的 C++ 方法：

```
typedef char TNameFile[256];

void Foo(TNameFile** output); 
```

我已经没有如何编组它的想法了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:16:11.543

假设他们返回一个空字符串作为最后一个元素：

```
static extern void Foo(ref IntPtr output);

IntPtr ptr = IntPtr.Zero;
Foo(ref ptr);
while (Marshal.ReadByte(ptr) != 0)
{
   Debug.Print(Marshal.PtrToStringAnsi(ptr, 256).TrimEnd('\0'));
   ptr = new IntPtr(ptr.ToInt64() + 256);
} 
```

**编辑：**因为我已经在我的智能手机上编写了上面的代码，所以我今天早上测试了代码，它似乎应该可以工作（我只需要添加`TrimEnd('\0')`）。这是我的测试用例：

```
class Program
{
    const int blockLength = 256;

    /// <summary>
    /// Method that simulates your C++ Foo() function
    /// </summary>
    /// <param name="output"></param>
    static void Foo(ref IntPtr output)
    {
        const int numberOfStrings = 4;
        byte[] block = new byte[blockLength];
        IntPtr dest = output = Marshal.AllocHGlobal((numberOfStrings * blockLength) + 1);
        for (int i = 0; i < numberOfStrings; i++)
        {
            byte[] source = Encoding.UTF8.GetBytes("Test " + i);
            Array.Clear(block, 0, blockLength);
            source.CopyTo(block, 0);
            Marshal.Copy(block, 0, dest, blockLength);
            dest = new IntPtr(dest.ToInt64() + blockLength);
        }
        Marshal.WriteByte(dest, 0); // terminate
    }

    /// <summary>
    /// Method that calls the simulated C++ Foo() and yields each string
    /// </summary>
    /// <returns></returns>
    static IEnumerable<string> FooCaller()
    {
        IntPtr ptr = IntPtr.Zero;
        Foo(ref ptr);
        while (Marshal.ReadByte(ptr) != 0)
        {
            yield return Marshal.PtrToStringAnsi(ptr, blockLength).TrimEnd('\0');
            ptr = new IntPtr(ptr.ToInt64() + blockLength);
        }
    }

    static void Main(string[] args)
    {
        foreach (string fn in FooCaller())
        {
            Console.WriteLine(fn);
        }
        Console.ReadKey();
    }
} 
```

一个问题仍然存在：**谁来释放缓冲区？**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T19:55:01.197

如果您使用 C++/CLI 而不是本机 C++，这将使您的生活更轻松，您不必担心不安全的代码和编组：

```
array<Byte>^ cppClass::cppFunction(TNameFile** input, int size)
{
    array<Byte>^ output = gcnew array<Byte>(size);

    for(int i = 0; i < size; i++)
        output[i] = (**input)[i];

    return output;
} 
```

如果您必须使用编组，请尝试使用[Marshal.PtrToStringAnsi](http://msdn.microsoft.com/en-us/library/7b620dhe.aspx)，正如 WouterH 在他的回答中所建议的那样。

# sql - 在邻接列表中查找后代的根节点

> ID：11646409
> 
> 赞同：4
> 
> 时间：2012-07-25T09:13:30.577
> 
> 标签：sql, sql-server, tree, root, adjacency-list

在**邻接列表**表中，给定节点的 id，我如何找到它的关联**根节点**？

*笔记：*

*该表包含多棵树，因此我不能简单地搜索 null parentId。*

**更多信息：**

这是我目前所拥有的，对此有任何问题或改进吗？

```
with tree as
(
    select 
        t.*

    from table1 t
    where t.id = @id

    union all 

    select 
        t2.*

    from tree
    join table1 t2 on tree.parentId = t2.id
) 

select * 
from tree
where parentId is null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T08:00:30.687

我不认为提供的任何解决方案都比我自己的更好，所以我最终选择了这个：

```
with tree as
(
    select 
        t.*

    from table1 t
    where t.id = @id

    union all 

    select 
        t2.*

    from tree
    join table1 t2 on tree.parentId = t2.id
) 

select * 
from tree
where parentId is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T18:32:54.303

这个解决方案对我来说效果很好。不能肯定地说性能是否比你的快。

```
declare @base_id as int;
set @base_id = 1;
WITH n(id) AS 
   (SELECT id 
    FROM table
    WHERE id = @base_id
        UNION ALL
    SELECT nplus1.ID
    FROM table as nplus1, n
    WHERE n.id = nplus1.ParentID)
SELECT id FROM n 
```

***[（从SQL SERVER 中 ORACLE 的 CONNECT BY PRIOR 模拟](https://stackoverflow.com/questions/959804/simulation-of-connect-by-prior-of-oracle-in-sql-server)修改的答案）***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T12:47:16.850

这是带有 WHILE 循环的代码。适用于表中的多棵树：

```
declare @current_node int
declare @parent_node int
declare @MAX_ITERATIONS int
declare @count int

SET @current_node=@id -- node to start with
SET @MAX_ITERATIONS = 100 --maximum iterations count
SET @count=0 

while(@count<@MAX_ITERATIONS) -- to prevent endless loop  
begin
 select @parent_node=parentid from tree where id=@current_node
 if @parent_node is null -- root is found
  begin 
    break; 
  end
 set @current_node=@parent_node 
 SET @count=@count+1
end

if (@count=@MAX_ITERATIONS) SET @current_node=NULL --if it was endless loop

select @current_node; -- output root id 
```

# c# - 编程游戏，代码执行是随机的

> ID：11646412
> 
> 赞同：2
> 
> 时间：2012-07-25T09:13:34.223
> 
> 标签：c#, visual-studio-2010

**大家好，我只是VS2010中的C#初学者，学习它的原因是能够在游戏编程中发展，我得到了这个程序的源代码并添加了很多东西。这是控制台应用程序源。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace First_Game

{
     class Program
    {
        void DisplayChoices(int heroHitPoints, int monsterHitPoints) // 1st method to display the choices 
        {
            Console.Write(@"
************************************************
Your hero has {0}hp and the Monster has {1}hp
************************************************", heroHitPoints, monsterHitPoints);

            Console.Write(@"
__________________________
Please Choose an action:
(A)ttack
(D)efend
(H)eal
(F)lee
__________________________");
            Console.WriteLine();
        }
        int GetHeroDamage(Random rand)// 2nd Method to calculate the hero's Damage during battle.
     {
         int attackdamage;
         attackdamage = rand.Next(350, 450);
         return attackdamage;
     }
        int GetMonsterDamage(Random rand) // 3rd Method to calculate the monster's damage during the battle.
         {
         int attackdamage;
         attackdamage = rand.Next(250, 350);
         return attackdamage;
     }
        static void Main(string[] args)
        {
            Program CH = new Program();
            int heroHitPoints, monsterHitPoints, attackdamage, healing, fleechance, hitchance;
            Random rand;
            string battlechoice;
            Console.WriteLine("You are facing a Monster!");
            //this is outside the loop so that it will only print once
            heroHitPoints = 1500;// our variables are assigned ouside
            monsterHitPoints =2000;//so that each loop won't "heal" them
            do
            {
                rand = new Random();
                CH.DisplayChoices(heroHitPoints, monsterHitPoints);
                battlechoice = Console.ReadLine();
                switch (battlechoice)
                {
                    case "a":
                    case "A"://this way a or A work
                        hitchance = rand.Next(0, 100);
                        if (hitchance > 30)
                        {
                            attackdamage = CH.GetHeroDamage(rand);
                            Console.WriteLine("The hero attacks!");
                            monsterHitPoints -= attackdamage;
                            Console.WriteLine("The monster loses {0}hp", attackdamage);
                        }
                        else
                        {
                            Console.WriteLine("You missed!");
                        }
                        break;
                    case "d":
                    case "D":
                        Console.WriteLine("The Hero Defends");
                        break;
                    case "h":
                    case "H":
                        healing = 400;
                        heroHitPoints += healing;
                        Console.WriteLine("The Hero uses a Potion!");
                        Console.WriteLine("The Hero heals himself for {0} Points", healing);
                        break;
                    case "f":
                    case "F":
                        fleechance = rand.Next(0, 100);
                        if (fleechance > 40)
                        {
                            Console.WriteLine("The hero fled!");
                            Console.ReadLine();
                            Environment.Exit(0);
                        }
                        else
                        {
                            Console.WriteLine("Fleeing Failed");
                            Console.ReadLine();

                        }
                        break;
                    default://defaults always a good idea with user input
                        Console.WriteLine("Sorry that choice was invalid and the monster took a cheap shot!");
                        break;
                }

                Console.WriteLine();
                if (monsterHitPoints > 0)//if the monster is still alive
                {
                    hitchance = rand.Next(0, 100);
                    if (hitchance > 30)
                    {
                        attackdamage = CH.GetMonsterDamage(rand);
                        Console.WriteLine("The Monster Attacks!");
                        if (battlechoice == "d" || battlechoice == "D")
                        { //this is so that defend has some sort of benefit
                            attackdamage /= 2;
                        }
                        heroHitPoints -= attackdamage;//subtract the damage
                        Console.WriteLine("The Hero loses {0}hp", attackdamage);
                    }
                    Console.WriteLine("Press Enter to Continue");
                    Console.ReadLine();
                    Console.Clear();//this clears the screen so that we don't have the
                    //last turns info on it.
                }
            }
            while (heroHitPoints > 0 && monsterHitPoints > 0);

            if (heroHitPoints > 0)
            {
                Console.WriteLine("You are Victorious!");
            }
            else
            {
                Console.WriteLine("You have been defeated :(");
            }
            Console.ReadLine();
        }
    }

     } 
```

该程序应该要求您选择一个选项，并且在您执行它之后，怪物应该无论如何都会攻击。我创建了 3 个方法并调用了它们。我的问题是，以 IF 语句开头并在 while 之前结束的部分有时会运行，有时不会，就像它完全随机一样，我认为这与怪物的偶然性有关，但事实并非如此，帮助表示赞赏。VS2010没有给我任何错误，并且每次都使用相同的方式英雄攻击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:30:10.413

好的。我试过了，它工作正常，但是当怪物错过时你不打印任何东西，这就是你所说的随机失败吗？要纠正它，只需在条件后面附加一个`else`：

```
hitchance = rand.Next(0, 100);
if (hitchance > 30)
{
    attackdamage = CH.GetMonsterDamage(rand);
    Console.WriteLine("The Monster Attacks!");
    if (battlechoice == "d" || battlechoice == "D")
    { //this is so that defend has some sort of benefit
        attackdamage /= 2;
    }
    heroHitPoints -= attackdamage;//subtract the damage
    Console.WriteLine("The Hero loses {0}hp", attackdamage);
}
else
{
    Console.WriteLine("The monster misses!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:29:23.200

我认为它工作正常；你只是因为`hitchance`. 不过，怪物确实会攻击，这取决于偶然性：

```
You are facing a Monster!

************************************************
Your hero has 1500hp and the Monster has 2000hp
************************************************
__________________________
Please Choose an action:
(A)ttack
(D)efend
(H)eal
(F)lee
__________________________
a
The hero attacks!
The monster loses 442hp

The Monster Attacks!
The Hero loses 348hp
Press Enter to Continue 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:14:47.957

我重构了你的代码只是为了好玩 :) 在提取了一些类`Game`、`Hero`和`Monster`移动相关逻辑之后（是的，OOP），你的游戏看起来像：

```
class Program
{     
    static void Main(string[] args)
    {
        Game game = new Game();
        game.Start();
        Console.ReadLine();
    }
} 
```

所有游戏逻辑都移到了`Game`类，它负责创建和管理角色、向用户显示游戏以及检索用户输入：

```
public class Game
{
    private const int _dispalyWidth = 42;

    public void Start()
    {
        Hero hero = new Hero();
        Monster monster = new Monster();
        Console.WriteLine("You are facing a Monster!");
        Console.ReadKey();
        Console.Clear();

        do
        {
            DisplayBattle(hero, monster);

            switch (GetChoice())
            {
                case BattleChoice.Attack:
                    hero.Attack(monster);
                    break;
                case BattleChoice.Defend:
                    hero.Defend();
                    break;
                case BattleChoice.Heal:
                    hero.Heal(400);
                    break;
                default:
                    Console.WriteLine("Monster took a cheap shot!");
                    break;
            }                

            if (monster.IsAlive)
                monster.Attack(hero);

            Console.WriteLine("Press Enter to Continue");
            Console.ReadLine();
            Console.Clear();
        }
        while(hero.IsAlive && monster.IsAlive);

        DisplayBattleResult(hero);
        Console.ReadLine();
    }

    private void DisplayBattleResult(Hero hero)
    {
        if (hero.IsAlive)
            Console.WriteLine("You are victorious!");
        else
            Console.WriteLine("You have been defeated :(");
    }

    private void DisplayBattle(Hero hero, Monster monster)
    {
        Console.WriteLine(new String('*', _dispalyWidth));
        Console.WriteLine("{0} has {1}hp and the {2} has {3}hp", 
            hero.Name, hero.HitPoints, monster.Name, monster.HitPoints);
        Console.WriteLine(new String('*', _dispalyWidth));
    }

    private void DisplayChoices()
    {
        Console.WriteLine(new String('-', _dispalyWidth));
        Console.WriteLine("Please Choose an action:");
        Console.WriteLine("(A)ttack");
        Console.WriteLine("(D)efend");
        Console.WriteLine("(H)eal");
        Console.WriteLine("(F)lee");
        Console.WriteLine(new String('-', _dispalyWidth));
    }

    private BattleChoice GetChoice()
    {
        DisplayChoices();
        ConsoleKeyInfo key = Console.ReadKey(true);
        switch (key.Key)
        {
            case ConsoleKey.A:
                return BattleChoice.Attack;
            case ConsoleKey.H:
                return BattleChoice.Heal;
            case ConsoleKey.D:
                return BattleChoice.Defend;
            default:
                return BattleChoice.Wait;
        }
    }
} 
```

如你所见，我介绍了英雄和怪物的类。它们继承自`Character`类，该类负责保存和操作角色的数据：

```
public class Character
{
    private readonly Random _random = new Random();

    public Character(string name, int hitPoints, Range damageRange, int hitChance)
    {
        Name = name;
        HitPoints = hitPoints;
        HitChance = hitChance;
        DamageRange = damageRange;
    }

    public string Name { get; set; }
    public int HitChance { get; private set; }
    public int HitPoints { get; private set; }
    public Range DamageRange { get; private set; }
    private bool IsDefending { get; set; }

    public bool IsAlive
    {
        get { return HitPoints > 0; }
    }

    public void Defend()
    {
        Console.WriteLine("The {0} defends", Name);
        IsDefending = true;
    }

    public void Heal(int amount)
    {
        Console.WriteLine("The {0} uses a Potion!", Name);            
        IsDefending = false;
        HitPoints += amount;
        Console.WriteLine("The {0} heals himself for {0} points", amount);
    }

    public void Hit(int amount)
    {
        int receivedDamage = IsDefending ? (amount / 2) : amount;
        HitPoints -= receivedDamage;
        Console.WriteLine("The {0} loses {1}hp", Name, receivedDamage);
    }

    public void Attack(Character target)
    {
        Console.WriteLine("The {0} attacks!", Name);
        IsDefending = false;

        if (HitChance <= _random.Next(0, 100))
        {
            Console.WriteLine("{0} missed!", Name);
            return;
        }

        target.Hit(_random.Next(DamageRange.Min, DamageRange.Max));
    }
}

public class Hero : Character
{
    public Hero()
        : base("Hero", 1500, new Range(350, 450), 30)
    {
    }   
}

public class Monster : Character
{
    public Monster()
        : base("Monster", 2000, new Range(250, 350), 30)
    {
    }
} 
```

我还使用范围来保持可能的伤害（也许在同一个物体上保持伤害机会也很好）：

```
public class Range
{
    public Range(int min, int max)
    {
        Min = min;
        Max = max;
    }

    public int Min { get; private set; }
    public int Max { get; private set; }
} 
```

以及描述用户选择的枚举：

```
public enum BattleChoice
{
    Attack,
    Defend,
    Heal,
    Wait
} 
```

我认为将机会验证和伤害生成转移到诸如 之类`Universe`的类会很好，但它适合你。祝你好运！

# iphone - 如何使新屏幕不完全覆盖 iPhone 上的底层屏幕

> ID：11646420
> 
> 赞同：1
> 
> 时间：2012-07-25T09:14:05.160
> 
> 标签：iphone, ios, uiviewcontroller

我有几个`inputScreens`用户按下一个按钮的地方，该按钮当前打开了另一个按钮`pickerScreen with a picker and several buttons`。

而不是显示`pickerScreen`为一个完全覆盖的全新屏幕，`inputScreens`我希望`pickerScreen`显示在`inputScreen`-

> 就像一个较小的屏幕居中并变灰，`inputScreen`只要`pickerScreen`显示 ，就无法访​​问底层。

目前`inputScreens`并`pickerScreen`用 UIViewController 实现。...并且`pickerScreen`完全取代了`inputScreen`.

**有没有一种简单的方法来更改pickerScreen，使其出现在inputScreens 的顶部？**

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:23:35.333

使用选择器视图制作一个 UIView，其大小符合您的要求。并在视图 DidLoad 中隐藏该视图。当按下所需按钮时，取消隐藏该视图。然后在您需要后将其隐藏。它是如此简单。否则调整根据需要调整 Pickerview 的大小。

```
UIView *whiteCoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
    whiteCoverView.alpha = 0.9;
    whiteCoverView.tag = 999;
    whiteCoverView.backgroundColor = [UIColor grayColor];
    [self.view addSubview:whiteCoverView];

    UILabel *label2 = [[UILabel alloc] initWithFrame:CGRectMake(0, 25, 320, 40)];
    label2.backgroundColor = [UIColor clearColor];
    label2.numberOfLines = 0;
    label2.font = [UIFont boldSystemFontOfSize:15.0];
    label2.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label2.textAlignment = UITextAlignmentCenter;
    label2.textColor = [UIColor whiteColor];
    label2.text = @"cfff";
    [whiteCoverView addSubview:label2];
    [label2 release];

    int gap = 10;

    UILabel *label3a = [[UILabel alloc] initWithFrame:CGRectMake(20, gap+50, 280, 15)];
    label3a.backgroundColor = [UIColor clearColor];
    label3a.numberOfLines = 0;
    label3a.font = [UIFont boldSystemFontOfSize:13.0];
    label3a.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    label3a.textAlignment = UITextAlignmentCenter;
    label3a.textColor = [UIColor whiteColor];
    label3a.text = @"cfccc ";
    [whiteCoverView addSubview:label3a];
    [label3a release]; 
```

像这样添加选择器。`

# ada - 操作只能以一种类型进行调度

> ID：11646421
> 
> 赞同：5
> 
> 时间：2012-07-25T09:14:09.170
> 
> 标签：ada, accessor, gnat

我有一个记录，想要一些访问器功能。

```
package Some_Package is                                                             

   type A is tagged record                                                          
      First_Field  : Integer;                                                       
      Second_Field : Character;                                                     
   end record;                                                                      

   type B is private;                                                               

   function Some_A (Some_B : B) return A;                                           

private                                                                             

   type B is tagged record                                                          
      Some_A : A;                                                                   
   end record;                                                                      

end Some_Package; 
```

这是 GNAT 给我的：

```
some_package.ads:10:13: operation can be dispatching in only one type 
```

这个错误对于 Ada 新手来说有点神秘，我希望能得到一些解释我做错了什么以及如何正确地做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T11:21:08.230

这是因为 ARM 中的[特定规则](http://www.ada-auth.org/standards/12rm/html/RM-3-9-2.html#p12)；涉及到两种标记类型（`B`私下），在 Ada 中，子程序可以在其参数之一或函数结果上[分派](http://en.wikibooks.org/wiki/Ada_Programming/Object_Orientation#Polymorphism.2C_class-wide_programming_and_dynamic_dispatching)（实际上，如果所有参数和结果都是*相同*的标记类型就可以了）。我认为这是 Ada 单继承设计的结果。

你真的需要`A`被标记吗？（我希望这是实际问题代码的精简版）。

如果两者都`A`需要`B`标记，则规范的解决方案`function Some_A`是将其参数/结果之一设为*[类范围](http://www.ada-auth.org/standards/12rm/html/RM-3-4-1.html#p4)*（类范围的参数不调度）：

```
function Some_A (Some_B : B'Class) return A; 
```

或者

```
function Some_A (Some_B : B) return A'Class; 
```

取决于从应用程序的角度来看哪个更有意义；猜第二个，然后你可以说

```
The_A : A’Class := Some_A (Some_B => The_B); 
```

顺便说一句，如果你说，它对读者来说会更清楚，并且不会失去太多的封装性

```
type B is tagged private; 
```

# c# - 从非托管 C++ 调用 WCF 服务会导致访问冲突

> ID：11646422
> 
> 赞同：0
> 
> 时间：2012-07-25T09:14:09.670
> 
> 标签：c#, c++, wcf, com-interop, wcf-interoperability

我想从非托管代码访问 wcf 服务。该服务只是连接到字符串并返回它们，以保持简单。

```
public class Stringconcat : IStringconcat
{
        public string stringconcat(string a, string b)
        {
            return b + a;
        }
}

[ServiceContract]
public interface IStringconcat
{
    [OperationContract]
    string stringconcat(string a, string b);
} 
```

我使用引用该服务的 .dll 的 ac# 控制台应用程序托管该服务。并公开服务的端点。在主（）：

```
using (ServiceHost host = new ServiceHost(typeof(stringconcatservice.Stringconcat)))
{
    host.Open();
    Console.WriteLine("Press <ENTER> to terminate the host application");
    Console.ReadLine();
} 
```

主机的配置如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
    <configuration>
        <system.serviceModel>
            <behaviors>
                <serviceBehaviors>
                    <behavior name="serviceBehavior">
                        <serviceDebug includeExceptionDetailInFaults="true"/>
                        <serviceMetadata />
                    </behavior>
                </serviceBehaviors>
            </behaviors>
            <services>
                <service behaviorConfiguration="serviceBehavior"
                name="stringconcatservice.Stringconcat" >
                    <endpoint address="stringconcat" binding="basicHttpBinding"
                    name="basicHttp" contract="stringconcatservice.IStringconcat" />
                    <endpoint binding="mexHttpBinding" name="mex"
                    contract="IMetadataExchange" />
                    <host>
                        <baseAddresses>
                         <add baseAddress="http://localhost:8000/stringconcatService" />
                        </baseAddresses>
                    </host>
                </service>
            </services>
        </system.serviceModel>
    </configuration> 
```

现在，如果我从用于服务引用基地址的 .net 客户端调用服务，一切正常。

```
StringconcatClient proxy = new StringconcatClient();

string a = " string a ";
string b = " string b ";
string c = proxy.stringconcat(a, b);

Console.WriteLine(c);
Console.WriteLine("Press <ENTER> to terminate Client.");
Console.ReadKey(); 
```

现在我遇到的问题。因为我想从非托管 c++ 代码访问服务。为此，我使用了一个 .dll，它注册了 com 互操作，并且还使用了正在运行的主机的服务引用。

```
[Guid("E4435D3B-CBC3-4D41-B4A5-D8116B394195")]
[ClassInterface(ClassInterfaceType.None)]
[ComVisible(true)]
public class Stringconcat_IAMCOM : IStringconcat_IAMCOM
{
    public string stringconcat(string a, string b)
    {
        StringconcatClient client = new StringconcatClient();
        return client.stringconcat(a, b);
    }
}
[Guid("E130F97E-1844-4C8B-9E57-AF42632A2557")]
[ComVisible(true)]
public interface IStringconcat_IAMCOM
{
    [DispId(1)]
    string stringconcat(string a, string b);
} 
```

现在，当我尝试使用 c++ 通过中间 .dll 访问服务时...

```
#import "..\stringconcatInteropSvcClient\bin\Debug\stringconcatInteropSvcClient.tlb" 
#include <iostream>
#include <stdio.h>
using namespace stringconcatInteropSvcClient;
int main(int argc, const char* argv[])
{
    HRESULT hr = CoInitialize(NULL);
    BSTR a =  L" string a ";
    BSTR b =  L" string b ";
    IStringconcat_IAMCOM* q;
    hr = CoCreateInstance(__uuidof(Stringconcat_IAMCOM), NULL, CLSCTX_INPROC_SERVER,
    __uuidof(IStringconcat_IAMCOM), (void**)&q );
    std::cout << q->stringconcat(a, b);

    //Uninitialize COM.
    CoUninitialize();
    return 0;
} 
```

...我在 stringconcatinteropsvcclient.tli 中遇到异常，例如：

“xyz.exe 中 0x75... 处未处理的异常：Microsoft C++ 异常：_com_error 在内存位置 0x...”

然后我可以继续并在 strlen.asm 中获取下一个异常：

“xyz.exe 中 0x5d ... (msvcr100d.dll) 处的未处理异常：0xC0 ...：访问冲突读取位置 0x00 ...”

在此异常停止后。也许有人对此问题有解决方案，或者知道错误可能出在哪里。我只是用这个例子来保持简单。我正在从事的项目使用相同的结构。它还使用 wcf 服务，这些服务将从非托管 c++ 中调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:09:12.913

刚刚创建了小测试项目，它正在工作：

```
namespace ComTest
{
    [Guid("E4435D3B-CBC3-4D41-B4A5-D8116B394195")]
    [ClassInterface(ClassInterfaceType.None)]
    [ComVisible(true)]
    public class Stringconcat_IAMCOM : IStringconcat_IAMCOM
    {
        public string stringconcat(string a, string b)
        {            
            return a + b;
        }
    }
    [Guid("E130F97E-1844-4C8B-9E57-AF42632A2557")]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface IStringconcat_IAMCOM
    {
        [DispId(1)]
        string stringconcat(string a, string b);
    }
} 
```

和客户：

```
#import "C:\Users\rst\Documents\Visual Studio 2008\Projects\ComTest\ComTest\bin\Debug\ComTest.tlb" 
#include <iostream>
#include <stdio.h>
#include <windows.h>

using namespace ComTest;

    int main(int argc, const char* argv[])
    {

        HRESULT hr = CoInitialize(NULL);
        BSTR a =  L" string a ";
        BSTR b =  L" string b ";
        IStringconcat_IAMCOM* q;
        hr = CoCreateInstance(__uuidof(Stringconcat_IAMCOM), NULL, CLSCTX_INPROC_SERVER,
        __uuidof(IStringconcat_IAMCOM), (void**)&q );
        std::cout << q->stringconcat(a, b);

        //Uninitialize COM.
        CoUninitialize();
        return 0;
    } 
```

我的程序集名称是 ComTest.dll，所以我使用以下方法注册了它：

```
regasm Comtest.dll /CodeBase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T10:25:28.860

我在 c++ 代码中有错误，CoCreateInstance(...) 的错误调用，谢谢 zilog 的帮助。

```
IStringconcat_IAMCOM* q;
hr = CoCreateInstance(__uuidof(Stringconcat_IAMCOM), NULL, CLSCTX_INPROC_SERVER, __uuidof(IStringconcat_IAMCOM), (void**)&q ); 
```

并且在调用 serviceproxy 时也出现了错误。我必须将端点属性 address="stringconcat" 添加到基地址。地址应该是这样的：

```
http://localhost:8000/stringconcatService/stringconcat 
```

我现在以这种方式创建服务代理：

```
[Guid("E4435D3B-CBC3-4D41-B4A5-D8116B394195")]
[ClassInterface(ClassInterfaceType.None)]
[ComVisible(true)]
public class Stringconcat_IAMCOM : IStringconcat_IAMCOM
{
    public string stringconcat(string a, string b)
    {  
        EndpointAddress ep = new EndpointAddress("http://localhost:8000/stringconcatService/stringconcat");
        proxy = ChannelFactory<IStringconcat>.CreateChannel(new BasicHttpBinding(), ep);
        proxy.stringconcat(string a, string b);
    }
}

[Guid("E130F97E-1844-4C8B-9E57-AF42632A2557")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IStringconcat_IAMCOM
{
    [DispId(1)]
    string stringconcat(string a, string b);
} 
```

现在我可以从 c++ 调用 WCF-Services，这太棒了！

# cakephp - 使用 cakephp js helper 自定义效果

> ID：11646423
> 
> 赞同：2
> 
> 时间：2012-07-25T09:14:11.633
> 
> 标签：cakephp

我正在使用 Js 助手类，并且我已经成功实现了这一点。我正在使用以下代码来使用 ajax。

```
$this->Js->link('test','action',array(
                'before'=>$this->Js->get('#loader')->effect('fadeIn'),
                'success'=>$this->Js->get('#front_album')->effect('fadeIn'),
                'update'=>'#front_album')); 
```

现在，当我尝试添加动画效果而不是淡入时，什么都没有发生。我按照以下方式尝试。

```
$this->Js->get('#loader')->effect('animate','opacity: 1.0'); 
```

请告诉我我错在哪里以及如何在其中添加动画效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:30:57.173

JsHelper 中有一些[预先指定的效果名称。](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#JsHelper::effect)如果您想`animate`在单击 JsHelper 链接时生效，那么您必须让自己的助手通过 JsHelper 扩展并提供该效果的定义。

[这篇文章](https://stackoverflow.com/questions/11305567/triggering-event-manually-in-js-helper-cakephp)将帮助您创建自己的助手来支持您想要的功能。

这是您可以用来获得所需效果的唯一方法。

# asp.net - 如何通过 ASP.NET 在 IIS 上使用自定义错误

> ID：11646436
> 
> 赞同：0
> 
> 时间：2012-07-25T09:14:47.050
> 
> 标签：asp.net, visual-studio-2010, iis-7, webforms, web-config

我在我的 asp.net Web 应用程序中修改了我的 web.config 文件，以便显示自定义错误页面：

```
<configuration>
    <system.web>
       ...snip
        <customErrors mode="On" defaultRedirect="WebForms/ErrorPage.aspx">
          <error statusCode="404" redirect="WebForms/ErrorPageNotFound.aspx" />
        </customErrors>        
    </system.web>  
</configuration> 
```

当我在 IIS 上运行该站点时，出现以下错误：

```
Error code: 0x800700b7
Config section 'system.web/customErrors' already defined. 
Sections must only appear once per config file. 
See the help topic <location> for exceptions 
```

显然，我在这里有一些配置层次结构，但我不知道我需要查看哪个文件（我的机器上有 276 个 web.config 文件）——有人能指出我正确的方向吗？

当我找到该文件时，我可以只删除顶层`customErrors`部分，还是这会导致同一台机器上`customErrors`未定义的其他 Web 应用程序出现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:24:17.443

该部分应在根 web.config 上进行修改

如果您收到该错误，可能您的主应用程序的子目录中有多个 web.config，您应该开始检查这些以删除它们

> 显然，我在这里有一些配置层次结构，但我不知道我需要查看哪个文件（我的机器上有 276 个 web.config 文件）——有人能指出我正确的方向吗？

为什么不简单地使用 windows 搜索来查找包含字符串*customErrors的文档*

要启用 Windows 7 高级搜索：

[http://answers.microsoft.com/en-us/windows/forum/windows_7-files/in-windows-7-i-want-to-search-for-all-files/aadfe1f1-4a33-406b-8e72- bb920efa4f30](http://answers.microsoft.com/en-us/windows/forum/windows_7-files/in-windows-7-i-want-to-search-for-all-files/aadfe1f1-4a33-406b-8e72-bb920efa4f30)

配置文件层次结构

1.  全球机器。`<windir>\Microsoft.NET\Framework\<ver>\Config\Machine.config`
2.  根网络配置。`<windir>\Microsoft.NET\Framework\<ver>\Config\Web.config`
3.  网站。`<wwwroot>\Web.config`
4.  Web应用程序。`<wwwroot>|IIS Web Site path\<webapp>\Web.config`
5.  文件夹。`<wwwroot>|IIS Web Site path\<webapp>\<dir>\Web.config`

# ios - 从 sudzC ios 将参数传递给 java webservice 始终为空

> ID：11646442
> 
> 赞同：0
> 
> 时间：2012-07-25T09:15:04.753
> 
> 标签：ios, web-services, parameters, null, sudzc

使用 glassfish Web 服务测试器测试的 Soap 请求

```
<?xml version="1.0" encoding="UTF-8"?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Header/>
<S:Body>
    <ns2:hello xmlns:ns2="http://WS/">
        <name>asd</name>
    </ns2:hello>
</S:Body> 
```

肥皂反应

```
<?xml version="1.0" encoding="UTF-8"?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
    <ns2:helloResponse xmlns:ns2="http://WS/">
        <return>Hello asd !</return>
    </ns2:helloResponse>
</S:Body> 
```

现在我尝试在我的 ios 上调用这个 hello 方法，使用 sudz 将“name”参数传递给 web 服务。所以这是createEnvelope里面的代码：

```
[s appendString: @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"];
[s appendString:@"<S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\">"];
[s appendString:@"<S:Header/>"];
[s appendString:@"<S:Body>"];
[s appendString:@"<ns2:hello "];
[s appendString:@"xmlns:ns2=\"http://WS/"];
[s appendString:@"\"/>"];
[s appendString:@"<name>alvin</name>"];
[s appendString:@"</ns2:hello> "];
[s appendString:@"</S:Body>"];
[s appendString:@"</S:Envelope>"]; 
```

这是ios访问时的netbeans日志

```
INFO: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: http://WS/hello
INFO: berhasil null 
```

被android访问时记录

```
 INFO: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: http://WS/hello
 INFO: berhasil Cornel 
```

但它总是返回 null 参数，并且在 android 中使用 ksoap 并且它工作得很好。使用上面的那些信封，我可以调用方法（你好），但它传递了 null 参数。请帮忙T_T

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:01:51.183

由于还没有人回答这个问题，而我遇到了同样的问题，网络上的其他帖子没有解决这个问题......

我启用了 ARC，那里没有问题。我确实生成了 ARCless 版本，尽管我坚持使用 ARC，但效果也很好。我不得不更改为 Soap.m 中的请求生成参数的代码。我在返回行中添加了 xmlns=""

```
// Serializes an object to a string, XML representation with a specific node name.
+ (NSString*) serialize: (id) object withName: (NSString*) nodeName {
    if([object respondsToSelector:@selector(serialize:)]) {
        return [object serialize: nodeName];
    }
    return [NSString stringWithFormat:@"<%@ xmlns=\"\">%@</%@>", nodeName, [Soap serialize: object], nodeName];
} 
```

* * *

我还必须做出这样的改变：

此处引用：[http](http://code.google.com/p/sudzc/issues/detail?id=40) ://code.google.com/p/sudzc/issues/detail?id=40 更改自：

```
if([child respondsToSelector:@selector(name)] && [[child name] isEqual: name]) { 
```

对此

```
if([child respondsToSelector:@selector(name)] && [[child name] hasSuffix:: name]) { 
```

* * *

这是最终为我工作的 SOAP 请求。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns="http://webservice.alerts.xxxconsulting.com/">
<soap:Body>
<echo>
<arg0 xmlns="">echo msg</arg0>
</echo>
</soap:Body>
</soap:Envelope> 
```

# xml - XSLT 帮助 - 检索元素的 ID

> ID：11646446
> 
> 赞同：0
> 
> 时间：2012-07-25T09:15:16.377
> 
> 标签：xml, xslt

我正在使用 XSLT 选择和循环具有特定 parentID 的对象，这工作正常。然后我需要做的是根据一个值检查 XML 的每个选定元素的 ID。

这是我的代码：

XSL：

```
<xsl:for-each select="categories/category[@parentId='1333']">
    <xsl:choose>
       <xsl:when test="id='1349'">Yes</xsl:when>
       <xsl:otherwise>No</xsl:otherwise>
    </xsl:choose>
</xsl:for-each> 
```

这是一个示例 XML 块：

```
 <categories>
    <category !!!!THIS IS THE ID I WANT!!!!! id="1348" parentId="1333">
      <name>Name</name>  
      <description>Desc</description>  
      <path>/test/test/testing</path> 
    <category id="1349" parentId="1333">
      <name>Name</name>  
      <description>Desc</description>  
      <path>/test/test/testing</path> 
    </category>  
    <category id="1352" parentId="1333">
      <name>Name</name>  
      <description>Desc</description>  
      <path>/test/test/testing</path> 
    </category>  
    <category id="1370" parentId="1333">
      <name>Name</name>  
      <description>Desc</description>  
      <path>/test/test/testing</path> 
    </category>  
  </categories> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:30:23.860

我认为这只是您没有正确检查属性。

改变...

```
<xsl:when test="id='1349'"> 
```

To（注意额外的`@`，这意味着它是属性名称而不是元素名称）...

```
<xsl:when test="@id='1349'"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T12:15:44.897

**您不需要`xsl:for-each`and`xsl:choose`来定位和处理想要的元素。**

只需有一个与所需元素匹配的模板：

```
<xsl:template match="categories/category[@id='1349' and @parentId='1333']">
  <!-- Your processing here -->
</xsl:template> 
```

# jquery - 在jQuery滑块的背景图像上添加淡出淡入淡出

> ID：11646459
> 
> 赞同：0
> 
> 时间：2012-07-25T09:16:08.673
> 
> 标签：jquery, slider, fading

我创建了一个 jQuery 滑块。我只想在第一个和最后一个缩略图外观上显示/隐藏左右箭头，还想为背景图像淡入/淡出方法设置动画。这是演示链接[http://jsfiddle.net/NwmLL/8/](http://jsfiddle.net/NwmLL/8/)请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:25:16.623

为了处理您的箭头更改，我添加了一个简单的函数来检查 liSelect 是第一个选项还是最后一个选项，并分别更改隐藏/显示。

```
function checkArrows() {
        if($('ul#carousel>li:last').is('.liSelect')) {
            $(".rightArrow").fadeOut('slow');
        }
        else {

           $(".rightArrow").fadeIn('slow'); 
        }

        if($('ul#carousel>li:first').is('.liSelect')) {
            $(".leftArrow").fadeOut('slow');
        }
        else {
           $(".leftArrow").fadeIn('slow'); 
        }
    }​ 
```

此外，为了使您能够淡入淡出背景，您需要确保它不会隐藏您的前层（即您的轮播），因此我在下面添加了另一个 div 作为示例。

[小提琴](http://jsfiddle.net/NwmLL/10/)

希望这可以帮助 ：）

# jquery - 没有双下拉菜单的jQuery点击事件

> ID：11646462
> 
> 赞同：0
> 
> 时间：2012-07-25T09:16:13.663
> 
> 标签：jquery, html, drop-down-menu

我是 jQuery 的新手。我想用点击事件制作一个简单的下拉菜单。这是html结构：

```
<ul id="menubar">
        <li class="menu">
            <a href="#">Menu 1</a>
            <ul class="submenubar">
                <li class="submenu"><a href="#">Submenu 1</a></li>
            </ul>
        </li>
        <li class="menu">
            <a href="#">Menu 2</a>
            <ul class="submenubar">
                <li class="submenu"><a href="#">Submenu 2</a></li>
            </ul>
        </li>
</ul>​ 
```

我制作的脚本如下：

```
$(document).ready(function(){
            $('li.submenu').hide()
            $('li.menu').click(function(e){
                $(this).find('li.submenu', this).slideToggle('fast'); 
                e.stopPropagation();
            })
        })​ 
```

但下拉是重叠的。那不是我想要的。我想要的是： - 如果我单击菜单 1，它将显示子菜单 1。其他菜单和子菜单被隐藏。- 然后如果我单击菜单 2，子菜单 2 将显示为子菜单 1 将被隐藏。- 等等...

我应该怎么办？有人可以帮我解决这个问题吗？感谢您的答复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:34:20.103

嘿检查一下点击menu1它会显示submenu1再次隐藏其他当你点击menu1然后它会menu2会显示试试这个

[http://jsfiddle.net/96xnB/](http://jsfiddle.net/96xnB/)

# javascript - JavaScript 从我的小数中剥离 .00？

> ID：11646464
> 
> 赞同：0
> 
> 时间：2012-07-25T09:16:18.650
> 
> 标签：javascript

想知道是否有人可以解释为什么我的小计是 1，并且 .00 被从小计中剥离。

price 是 1.00，itemQty 是 1。

```
var price = parseFloat(res.productPrice).toFixed(2);
var subTotal = price * parseInt(res.itemQty); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:20:17.640

`1`并且`1.00`在数字上是相同的。

`toFixed()`产生一个字符串。字符串几乎是唯一意义上的`1.00`和`1`是两个不同的值。

如果`price * parseInt(res.itemQty)`您`"1.00"`在数字运算中使用字符串，因此该值将被解释为数字。`subTotal`将是一个数字，因为它是数值运算的结果，因此它既是又是`1`同时`1.00`。

如果你想用小数显示它，你需要`toFixed`再次使用将它转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:20:09.817

您必须`toFixed()`再次转换 subTotal，因为它是一个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:23:09.603

```
var price = parseFloat(res.productPrice).toFixed(2);
var subTotal = (price * parseInt(res.itemQty)).toFixed(2); 
```

您必须调用`toFixed()`subTotal 以返回字符串而不是数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:24:59.027

因为您没有使用 toFixed(2) 将 subTotal 设为 String

```
var res = {productPrice:3.00, itemQty:2}
var price = parseFloat(res.productPrice).toFixed(2);
var subTotal = price * parseInt(res.itemQty);

console.log(subTotal.toFixed(2)); 
```

我希望这会有所帮助

# jquery - 在 jQuery 中，如何选择具有多个空格值的文本框？

> ID：11646470
> 
> 赞同：0
> 
> 时间：2012-07-25T09:16:39.730
> 
> 标签：jquery

我需要选择这样的文本框以验证必填字段。我该怎么做呢？似乎我可以使用 if 语句，但我不确定如何实现。

我编写了以下必填字段验证器来测试空文本框，但无法检测具有多个空格的文本框。我没有以正确的方式进行验证吗？我应该使用插件进行验证吗？

```
function validate()
        {
            $('.LoginFormBodyRightColumn input:text[value!=""]').next('span[class*="RequiredValidator"]').hide();
            $('.LoginFormBodyRightColumn input:text[value=""]').next('span[class*="RequiredValidator"]').show();
            $('.LoginFormBodyRightColumn input:password[value!=""]').next('span[class*="RequiredValidator"]').hide();
            $('.LoginFormBodyRightColumn input:password[value=""]').next('span[class*="RequiredValidator"]').show();

        } 
```

在我看来，if 语句在 jQuery 中没有位置，因为在 jQuery 中你选择了一些东西，然后在选择器上执行一些东西。涉及选择器的 if 语句是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:27:17.910

```
function validate()
        {
         $('.LoginFormBodyRightColumn input:text,.LoginFormBodyRightColumn input:password,').each(function(){
         if($.trim($(this).val())==="")
         $(this).next('span[class*="RequiredValidator"]').show();
         else
         $(this).next('span[class*="RequiredValidator"]').hide();
         });
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:29:28.680

据我了解你的问题试试这个..

```
<input class="LoginFormBodyRightColumn" type="text" />
<span class="RequiredValidator">*</span>
<input class="LoginFormBodyRightColumn" type="password" />
<span class="RequiredValidator">*</span>

<script >
  $("input").each(function(){
  var str=$(this).val();

  if(str=='')
      $(this).next('span[class*="RequiredValidator"]').show();
  else
      $(this).next('span[class*="RequiredValidator"]').hide();
  });
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:34:14.573

尝试获取所有输入的值并使用不使用 jquery 选择器的代码进行验证。使用 jquery trim 函数删除空格。

```
function validate( jQueryFormSelector )
{
  var inputs = $(jQueryFormSelector).find('input');
  inputs.each( function (i,el) {
    if ( $.trim( $(el).val() ) == '' )
    {
      $(el).next('span[class*="RequiredValidator"]').show();
    }
    else
    {
      $(el).next('span[class*="RequiredValidator"]').hide();
    }
  });

} 
```

# ios - 通知 APNS 反馈服务有关停用通知的设备？

> ID：11646471
> 
> 赞同：0
> 
> 时间：2012-07-25T09:16:41.400
> 
> 标签：ios, push-notification, apple-push-notifications

Apple 推送通知服务的反馈服务会通知我有关已删除我的应用程序的设备。但它还会通知我用户完全停用通知的设备（对于我的应用程序）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:29:37.233

我只是做了一些测试。反馈服务未通知我有关已停用推送通知的设备。

其实，思考“问题”，是有道理的。用户希望在她重新激活推送通知后立即收到推送通知。重新启动每个应用程序（以便应用程序可以向其提供者重新注册）对于用户在激活推送通知后执行的逻辑操作不是很合理。

# android - Android片段类notfoundexception

> ID：11646476
> 
> 赞同：0
> 
> 时间：2012-07-25T09:17:03.740
> 
> 标签：android, android-fragments

我正在关注以下链接以在 anadroid 中创建片段

[http://www.vogella.com/articles/Android/article.html#fragments](http://www.vogella.com/articles/Android/article.html#fragments)

但它总是给出classnotfound异常。请指导我如何解决它？

日志猫：

```
07-25 14:45:22.511: E/AndroidRuntime(497): FATAL EXCEPTION: main
07-25 14:45:22.511: E/AndroidRuntime(497): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragment/com.example.fragment.FragmentProjectActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.os.Looper.loop(Looper.java:123)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-25 14:45:22.511: E/AndroidRuntime(497):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 14:45:22.511: E/AndroidRuntime(497):  at java.lang.reflect.Method.invoke(Method.java:521)
07-25 14:45:22.511: E/AndroidRuntime(497):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-25 14:45:22.511: E/AndroidRuntime(497):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-25 14:45:22.511: E/AndroidRuntime(497):  at dalvik.system.NativeStart.main(Native Method)
07-25 14:45:22.511: E/AndroidRuntime(497): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-25 14:45:22.511: E/AndroidRuntime(497):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.Activity.setContentView(Activity.java:1647)
07-25 14:45:22.511: E/AndroidRuntime(497):  at com.example.fragment.FragmentProjectActivity.onCreate(FragmentProjectActivity.java:11)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-25 14:45:22.511: E/AndroidRuntime(497):  ... 11 more
07-25 14:45:22.511: E/AndroidRuntime(497): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.fragment-2.apk]
07-25 14:45:22.511: E/AndroidRuntime(497):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-25 14:45:22.511: E/AndroidRuntime(497):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-25 14:45:22.511: E/AndroidRuntime(497):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
07-25 14:45:22.511: E/AndroidRuntime(497):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
07-25 14:45:22.511: E/AndroidRuntime(497):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
07-25 14:45:22.511: E/AndroidRuntime(497):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:55:38.323

您是否使用高于 Lvl 11 的 API lvl？碎片从 Lvl 11 开始添加。

StackTrace 显示它尝试加载类 'android.view.fragment' 但 Fragment 类位于 'android.app.Fragment'，所以确实有问题。

您的 .xml 布局文件可能有问题。或者您正在开发的 SDK 版本是旧版本。

为了更好的分析，请发布更多代码（.xml 文件和 .java 文件）

请参阅文档：http: [//developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:57:20.333

感谢大家的宝贵回复..我的包名不正确..我更正并解决了..:)

# php - 如何使用 valums 文件上传器获取未失败的文件名列表

> ID：11646479
> 
> 赞同：1
> 
> 时间：2012-07-25T09:17:09.637
> 
> 标签：php, jquery-ui, jquery, jquery-plugins

我正在使用 valums 文件上传器创建多文件上传，如何获取未失败的文件名列表。我到目前为止所尝试的就是这个。

```
function createUploader(){            
    var UploadedFileNames = [];
            var uploader = new qq.FileUploader({
            element: document.getElementById('file-uploader-demo1'),
            action: '../server/php.php',
            allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],

            /*onSubmit: function(id, fileName){
                UploadedFileNames.push(fileName);
                        alert(UploadedFileNames);
            },*/

            onComplete: function(id, fileName, responseJSON){
                UploadedFileNames.push(fileName);
            //alert(UploadedFileNames);
            },
            debug: true
        });           
    } 
```

通过使用它，我得到了所有已上传但未成功上传的文件名。只是一个想学习的新手。帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:07:02.740

找到了答案。希望这对其他人有用。

```
var UploadedFilesNames = [];        
onComplete: function(id, fileName, responseJSON){

var success = responseJSON["success"];
if(success == true){
    UploadedFileNames.push(fileName);
}

} 
```

# algorithm - R 结构中的部分数

> ID：11646481
> 
> 赞同：1
> 
> 时间：2012-07-25T09:17:31.947
> 
> 标签：algorithm, r, math

嗨，我正在处理 R 中的大量数据，我需要检查一个结构是否由 1 个或多个部分组成。首先我有一个方法向量

```
wayIds <- [way1, way2, way3, etc..] 
```

然后我有一个矩阵，每个节点的第一个和最后一个节点

```
endWays
           wayId firstNode lastNode
      [1,]  way1  node1      node2
      [2,]  way2  node4      node8
      [3,]  way3  node5      node1... 
```

两个都很大。所以我需要一种方法来确定结构是否遵循连接方式有一个或多个部分。例如

```
_|______/ 1 section (all the ways are connected)
_|__   ____/ 2 sections (NOT all the ways are connected) 
```

所以到目前为止，我可以确定所有的开放端（例如分支末端的那些），显然如果我只有两个开放节点，那么解决方案是微不足道的。因此，我需要一种有效的方法来确定所有开放节点是否在不使用循环的情况下相互连接。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:08:54.210

尝试这个：

```
library(igraph)

data <- read.table(text=
'wayId firstNode endNode
way1 node1 node2
way2 node2 node4
way3 node2 node3
way4 node4 node3
way5 node5 node6
way6 node5 node8
way7 node8 node7'
,header=TRUE,sep=' ')

# I reorder the columns before passing the data.frame to the function, 
# because the first 2 columns have to be node from and node to
g <- graph.data.frame(data[,c(2,3,1)],directed=FALSE)

# plot the graph (don't do it if your graph is really big)
plot.igraph(g,vertex.label=V(g)$name,
            vertex.size=30,vertex.label.cex=0.7,
            vertex.shape='square')

subGraphs <- decompose.graph(g,mode='strong')

for(i in 1:length(subGraphs)){
  subGraph <- subGraphs[[i]]

  message(paste('Sub graph:',i))
  # find vertices having just one connected node
  openVertices <- V(subGraph)[sapply(as.vector(V(subGraph)),FUN=function(v){length(E(subGraph)[from(v) | to(v)]) == 1})]

  message(paste('Open vertices:',toString(openVertices$name)))

  # plot the sub-graph (don't do it if your graph is really big)
  plot.igraph(subGraph,vertex.label=V(subGraph)$name,
              vertex.size=30,vertex.label.cex=0.7,
              vertex.shape='square')
} 
```

# delphi - Onvif - 无效的 SOAP 消息或 SOAP 版本不匹配

> ID：11646482
> 
> 赞同：0
> 
> 时间：2012-07-25T09:17:36.760
> 
> 标签：delphi, soap, axis, ws-security, onvif

我真的对 Onvif 身份验证感到困惑。

我无法在 AXIS 和 SONY 相机上执行 onvif 命令。

这是生成请求的代码：

```
procedure RebootDevice(dev: Device; Username, Password: string);
var
  sdt: SystemDateTime;
  Created: string;
  Nonce: string;
  Nonce64: string;
  Password64: string;
  Header: Security;
begin
  sdt := dev.GetSystemDateAndTime;
  Created := SystemDateTimeToStr(sdt.UTCDateTime); // yyyy-MM-ddTHH.mm.ss.000Z
  Nonce := '1234';
  Nonce64 := Base64Encode(Nonce);
  Password64 := Base64Encode(HashSHA1(Nonce+Created+Password));
  Header.UsernameToken.Username := Username;
  Header.UsernameToken.Password.Type := 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest';
  Header.UsernameToken.Password.Text := Password64;
  Header.UsernameToken.Nonce.EncodingType := 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary';
  Header.UsernameToken.Nonce.Text := Nonce64;
  Header.UsernameToken.Created := Created;
  SetHeader(Header)
  dev.SystemReboot;  // <---- Error in here
end; 
```

生成的 SOAP XML：

```
<?xml version="1.0"?>
<SOAP-ENV:Envelope 
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Header 
        SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
        xmlns:NS1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <NS1:Security
            SOAP-ENV:mustUnderstand="1">
            <NS1:UsernameToken>
                <Username>
                    admin
                </Username>
                <NS1:Password 
                    Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">
                   +sWiewkgfkjFqzW2O5cuGJr9SiE=
                </NS1:Password>
                <NS1:Nonce 
                    EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">
                    MTIzNA==
                </NS1:Nonce>
                <Created>
                    2004-01-03T08:20:09.000Z
                </Created>
            </NS1:UsernameToken>
        </NS1:Security>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body 
        xmlns:NS2="http://www.onvif.org/ver10/device/wsdl"
        SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
       <NS2:SystemReboot/>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是回应：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:c14n="http://www.w3.org/2001/10/xml-exc-c14n#" 
    xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
    xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
    xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" 
    xmlns:wsa5="http://www.w3.org/2005/08/addressing" 
    xmlns:xmime="http://tempuri.org/xmime.xsd" 
    xmlns:xop="http://www.w3.org/2004/08/xop/include" 
    xmlns:wsrfbf="http://docs.oasis-open.org/wsrf/bf-2" 
    xmlns:wstop="http://docs.oasis-open.org/wsn/t-1" 
    xmlns:tt="http://www.onvif.org/ver10/schema" 
    xmlns:wsrfr="http://docs.oasis-open.org/wsrf/r-2" 
    xmlns:aa="http://www.axis.com/vapix/ws/action1" 
    xmlns:aev="http://www.axis.com/vapix/ws/event1" 
    xmlns:tan1="http://www.onvif.org/ver20/analytics/wsdl/RuleEngineBinding"
    xmlns:tan2="http://www.onvif.org/ver20/analytics/wsdl/AnalyticsEngineBinding"
    xmlns:tan="http://www.onvif.org/ver20/analytics/wsdl" 
    xmlns:tds="http://www.onvif.org/ver10/device/wsdl" 
    xmlns:tev1="http://www.onvif.org/ver10/events/wsdl/NotificationProducerBinding" 
    xmlns:tev2="http://www.onvif.org/ver10/events/wsdl/EventBinding" 
    xmlns:tev3="http://www.onvif.org/ver10/events/wsdl/SubscriptionManagerBinding" 
    xmlns:wsnt="http://docs.oasis-open.org/wsn/b-2"
    xmlns:tev4="http://www.onvif.org/ver10/events/wsdl/PullPointSubscriptionBinding" 
    xmlns:tev="http://www.onvif.org/ver10/events/wsdl"
    xmlns:timg="http://www.onvif.org/ver20/imaging/wsdl"
    xmlns:tptz="http://www.onvif.org/ver20/ptz/wsdl"
    xmlns:trt="http://www.onvif.org/ver10/media/wsdl"
    xmlns:ter="http://www.onvif.org/ver10/error"
    xmlns:tns1="http://www.onvif.org/ver10/topics"
    xmlns:tnsaxis="http://www.axis.com/2009/event/topics">
    <SOAP-ENV:Body>
        <SOAP-ENV:Fault 
            SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
            <SOAP-ENV:Code>
                <SOAP-ENV:Value>
                    env:VersionMismatch
                </SOAP-ENV:Value>
            </SOAP-ENV:Code>
            <SOAP-ENV:Reason>
                <SOAP-ENV:Text 
                    xml:lang="en">
                    SOAP version mismatch
                </SOAP-ENV:Text>
            </SOAP-ENV:Reason>
            <SOAP-ENV:Detail>
                <SOAP-ENV:Text>
                    Invalid SOAP message or SOAP version mismatch
                </SOAP-ENV:Text>
            </SOAP-ENV:Detail>
        </SOAP-ENV:Fault>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

你能告诉妈妈出了什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:49:12.680

故障排除提示：

*   首先，尝试使用 SoapUI 之类的工具访问服务并验证它是否发送了预期的响应
*   比较 SoapUI 和 Delphi 的请求（header 和 body）

或者

*   使用 Fiddler 或 Wireshark 捕获 HTTP 流量并比较 Delphi / OnvifDM 请求

# jakarta-ee - JBoss 7，java.lang.OutOfMemoryError：PermGen 空间

> ID：11646483
> 
> 赞同：27
> 
> 时间：2012-07-25T09:17:37.483
> 
> 标签：jakarta-ee, jboss, webserver, jboss7.x

我遇到了这个错误，CPU 使用率达到极限并且 JBoss 需要重新启动（`java.lang.OutOfMemoryError: PermGen space`）。

我找到了旧 JBoss 版本的解决方案来增加`MaxPermSize`. 我想JBoss7也是如此。

为了不再面临任何问题，哪个值足够好？有没有办法永久摆脱这个问题（比如让我们说使用像 JRockit 这样的不同 VM）？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-31T07:51:03.980

由于这发生在多次重新部署之后，听起来您遇到了[类加载器泄漏](http://frankkieviet.blogspot.com.au/2006/10/classloader-leaks-dreaded-permgen-space.html)，这是一种常见的[permgen 泄漏](http://cdivilly.wordpress.com/2012/04/23/permgen-memory-leak/)。

这些可爱的野兽的发生是因为从容器拥有的对象到作为从应用程序类加载器加载的类的实例的对象的正常（非弱）引用。如果这些引用在取消部署时没有被清除，那么应用程序的类加载器仍然有一个强大的引用链，所以它不能被 GC'd 并且加载的类不能被释放。

一个常见原因是容器类中的静态集合添加了对应用程序类的非静态引用。

JBoss AS 7 在其模块系统中有一些相当强大的规定来防止类加载器泄漏，所以我很惊讶你设法触发了一个。自从我从 Glassfish 迁移到 AS7 后，我还没有看到类加载器泄漏。

增加 MaxPermSize 会为您争取一些时间，但不会解决问题。

您确实需要弄清楚类加载器泄漏的原因。这样做很“有趣”。您享受税收、间歇性故障和清洁淋浴，对吗？请参阅第一部分中的链接，了解一些可以帮助您开始跟踪泄漏的博客。基本上，您需要使用[VisualVM](http://visualvm.java.net/)和[OQL](http://visualvm.java.net/oqlhelp.html)来挖掘对应用程序类加载器的引用，或者进行堆转储并使用[`jhat`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)（JDK 的一部分）来查找引用。无论哪种方式，我们的想法都是通过应用程序类的实例找出从应用程序服务器到类加载器的强引用链在哪里。

或者，它可以帮助获取您的应用程序的副本，然后开始从中提取部分内容，直到泄漏消失。您可以通过将 VisualVM 或其他监控连接到应用服务器 VM 并观察 PermGen 在两个或多个部署/取消部署周期后是否增加来判断它是否泄漏。考虑自动化部署/取消部署周期。将泄漏的原因缩小到应用程序的一小部分和/或其依赖项之一，并生成一个小的、独立的测试用例，然后将其作为 (a) JBoss AS 7 的错误报告提交，因为 AFAIK 它是旨在阻止这种情况的发生和（b）持有参考的罪魁祸首。

如果您将原因缩小到捆绑在部署存档中的依赖项，则将其移动到 JBoss AS 7 模块中可能会解决问题。为它创建一个 JBoss 模块，将其部署到`modules`AS7 的目录，并通过您的`Manifest.MF`或通过`jboss-deployment-structure.xml`. 请参阅有关[AS7 类加载器的文档](https://docs.jboss.org/author/display/AS7/Class+Loading+in+AS7)。

这就是为什么 Jigsaw 项目被推迟的事实让我感到难过。Java*需要*一个强大的模块系统来摆脱这种垃圾。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T09:27:21.213

虚拟机参数为：

```
-XX:MaxPermSize=256M 
```

只要让它足够大，你就不会达到极限。

从广义上讲，perm gen 内存用于与类和实习字符串相关的对象。除非你使用了很多不同的类，否则你不应该用完。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-29T14:02:15.023

我们必须做完全相同的事情，不幸的是，visualvm 并没有为我们做太多事情。

我们最终使用 eclipse mat 分析了崩溃时生成的堆转储，然后查看了`leak suspects`报告，该报告告诉我们有很多`ModuleClassLoader`实例被泄露。

单击概述选项卡中的一个实例，然后选择`merge shortest paths to GC roots`+`exclude weak references`给了我们我们的罪魁祸首，即不允许这些`ModuleClassLoader`实例被 GC'ed！

[https://smalldata.tech/blog/2015/09/29/detecting-java-permgen-memory-leak](https://smalldata.tech/blog/2015/09/29/detecting-java-permgen-memory-leak)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-25T10:26:35.287

为什么会发生？

> 当 Java 虚拟机在永久代中耗尽内存时，会发生“PermGen”错误。回想一下，Java 有一个分代垃圾收集器，有四代：eden、young、old 和 Permanent。在伊甸园时代，对象的生命周期很短，垃圾回收又快又频繁。年轻代由在伊甸代幸存下来的对象组成（或者因为在分配时伊甸代已满而被下推到年轻代），年轻代中的垃圾收集不太频繁，但仍然定期发生（前提是您的应用程序实际上会时不时地做一些事情并分配对象）。老一代，好吧，你想通了。它包含在年轻代中幸存下来的对象，或者被推倒的对象，垃圾收集甚至更少见，但仍然可能发生。最后是永久一代。这是针对虚拟机决定支持永生的对象——这正是问题的核心。永久代中的对象永远不会被垃圾回收；也就是说，在正常情况下，当 jvm 以正常的命令行参数启动时。因此，当您重新部署 Web 应用程序时会发生什么，您的 WAR 文件被解压缩，并且它的类文件被加载到 jvm 中。事情是这样的：几乎总是以永久代结束......（取自：这是针对虚拟机决定支持永生的对象——这正是问题的核心。永久代中的对象永远不会被垃圾回收；也就是说，在正常情况下，当 jvm 以正常的命令行参数启动时。因此，当您重新部署 Web 应用程序时会发生什么，您的 WAR 文件被解压缩，并且它的类文件被加载到 jvm 中。事情是这样的：几乎总是以永久代结束......（取自：这是针对虚拟机决定支持永生的对象——这正是问题的核心。永久代中的对象永远不会被垃圾回收；也就是说，在正常情况下，当 jvm 以正常的命令行参数启动时。因此，当您重新部署 Web 应用程序时会发生什么，您的 WAR 文件被解压缩，并且它的类文件被加载到 jvm 中。事情是这样的：几乎总是以永久代结束......（取自：您的 WAR 文件已解压缩并将其类文件加载到 jvm 中。事情是这样的：几乎总是以永久代结束......（取自：您的 WAR 文件已解压缩并将其类文件加载到 jvm 中。事情是这样的：几乎总是以永久代结束......（取自： [http://rlogiacco.blogspot.com/2009/02/jboss-and-permgen-outofmemoryerror.html](http://rlogiacco.blogspot.com/2009/02/jboss-and-permgen-outofmemoryerror.html)）

这里有一些建议：

将此参数用于您的 JVM。他们告诉垃圾收集器也在 PermGen 上调用它的算法。

```
set JAVA_OPTS=-Xms512m -Xmx1024m 
-XX:PermSize=512m 
-XX:MaxPermSize=1024m 
-XX:+UseConcMarkSweepGC 
-XX:+CMSPermGenSweepingEnabled 
-XX:+CMSClassUnloadingEnabled 
```

*   CMSPermGenSweepingEnabled设置包括垃圾回收运行*中*的 PermGen。默认情况下，PermGen 空间永远不会包含在垃圾回收中（因此会无限增长）。
*   CMSClassUnloadingEnabled设置告诉 PermGen 垃圾收集扫描对类对象执行操作*。*默认情况下，类对象获得豁免，即使在垃圾回收期间访问 PermGen 空间也是如此。

重新启动 JBOSS，因为每次部署应用程序时，都会增加 PermGen 中的数据量。

您还可以使用 JRocket JVM 代替 Sun JVM。它的垃圾收集器算法中没有任何 PermGen。

# java - 如何将具有文本数据类型的数据库字段中的java日期toString值格式化为mysql日期表示？

> ID：11646491
> 
> 赞同：1
> 
> 时间：2012-07-25T09:18:08.063
> 
> 标签：java, mysql, date

鉴于我有一个表，其中某个字段具有文本数据类型，假设 FieldValue 可以`text`作为数据类型给出。我正在使用完整格式从 java 中保存一个日期对象，并将其保存在这样的列中：

```
Wed Jul 25 00:00:00 CST 2012 
```

现在我想使用`str_to_date()`函数在我的 mysql 查询中将其设为日期类型，以便我可以在查询中进行日期到日期比较。

考虑到上述情况，这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:29:17.900

试试这个，正在工作：

```
SET @var_time = 'Wed Jul 25 00:00:00 2012';

SELECT STR_TO_DATE(REPLACE(@var_time, 'CST ', ""),'%a %M %d %H:%i:%s %Y'); 
```

您可以将上述查询的结果存储`TIMESTAMP`在 MySQL 的字段中，并对时间和日期进行进一步的操作。

# objective-c - 从 Cocoa 中的 URL Scheme 捕获 URL

> ID：11646492
> 
> 赞同：0
> 
> 时间：2012-07-25T09:18:09.077
> 
> 标签：objective-c, cocoa

我已经向我的应用程序添加了一个 URL 方案，当单击“my_scheme://item_to_add”链接时，它会正确打开（或者如果已经打开，则返回到前面）。

我找到了如何在 iOS 上捕获链接：

`- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url;`

任何人都可以在Mac上指出我类似的方法，我可以在哪里捕获链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:43:19.700

好的，我自己又找到了答案；）

```
//Register to the AppleEventManager
NSAppleEventManager *appleEventManager = [NSAppleEventManager sharedAppleEventManager];
[appleEventManager setEventHandler:self   andSelector:@selector(handleGetURLEvent:withReplyEvent:) forEventClass:kInternetEventClass andEventID:kAEGetURL]; 
```

并实现选择器方法：

```
- (void)handleGetURLEvent:(NSAppleEventDescriptor *)event withReplyEvent:       (NSAppleEventDescriptor *)replyEvent
{
    NSString* url = [[event paramDescriptorForKeyword:keyDirectObject] stringValue];
    NSLog(@"%@", url);
} 
```

# php - Facebook登录窗口出现并很快消失

> ID：11646494
> 
> 赞同：3
> 
> 时间：2012-07-25T09:18:11.417
> 
> 标签：php, javascript, facebook, facebook-login

最近我上传了一段代码到phpfog，我遇到了一个本地没有发生的问题：

当页面加载时，它会尝试获取应该设置的 $idFacebook：

```
$idFacebook = $facebook->getUser();
if ($idFacebook) { ... } 
```

我登录到 Facebook，但是，条件失败并出现登录按钮：

```
<div class="fb-login-button" data-scope="user_likes,user_photos"></div> 
```

另一个问题是，当我按下按钮时，似乎出现了登录窗口，但它很快就自动关闭了。

我的代码与 Heroku 在您创建 Facebook 应用程序时提供的代码基本相同。存储库是这个：[https](https://github.com/heroku/facebook-template-php) ://github.com/heroku/facebook-template-php 。我找不到解决方法，而且我看到很多人在使用 facebook 登录时遇到了几个问题。

我期待着你能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T23:42:47.117

我的实际错误是 $facebook->getUser() 返回 0 因为应用程序未通过身份验证，并且应用程序未通过身份验证，因为我将代码从主机移动到不同域中的另一个主机并且我忘记更改应用程序配置[http://developers.facebook.com](http://developers.facebook.com)。

现在，该应用程序自动获取登录信息。谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T11:03:36.997

快速消失的登录窗口是 Facebook 检查您是否需要授予应用程序权限。它几乎立即关闭，因为您已经登录并获得 Facebook 授权。

我不熟悉 Heroku / Facebook 集成，但我认为`$idFacebook`问题与无效配置有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T11:17:21.543

登录窗口很快就消失了，因为您可能在同一浏览器中登录了 facebook。

我不熟悉 Heroku，但我已经在 Zend Framework - php 中克服了这个问题。我使用 javascript-sdk 进行登录和注销。你可以参考这个链接。

[http://developers.facebook.com/blog/post/2011/07/21/updated-javascript-sdk-and-oauth-2-0-roadmap/](http://developers.facebook.com/blog/post/2011/07/21/updated-javascript-sdk-and-oauth-2-0-roadmap/)

因此，当您在代码中实现此示例时，当您在同一浏览器中登录 FB 时，它会要求您注销。因此，当您单击注销时，它会再次要求您登录，仅此而已。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T15:45:02.647

为避免这种情况，您必须使用 FB.getLoginStatus 稍微更改 facebook 脚本的行为。它会检查用户是否已经登录 Facebook，以及他是否已经授权了您的应用程序。

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        window.location = //redirect to page with logged user (you have the response token in response)
    } else {
      //Show the login popup
      FB.login(function(response) {
        if (response.authResponse) {
          window.location = //redirect to location after correct login
        }
      }, { scope: '<scopes>', state: '<state>' });
    }
  }); 
```

这样，如果用户“已连接”（已登录并获得应用授权），您将不会调用 FB.login 方法，因此登录窗口不会闪烁。在任何其他情况下，它将显示登录窗口，这是预期的结果。

检查[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus)以获取完整文档。

# php - 提交数据不刷新页面并在表单下方实时显示数据

> ID：11646497
> 
> 赞同：1
> 
> 时间：2012-07-25T09:18:20.450
> 
> 标签：php, jquery, ajax

有人知道如何在表单下方提交后显示数据吗？我有一个类似下面的代码来保存数据，但我想在保存数据后，它会显示在下面的表单中。我认为就像 facebook 发布墙一样。

```
<script type="text/javascript" >
$(function() {
   $(".submit").click(function() {
        var name = $("#name").val();
        var username = $("#username").val();
        var password = $("#password").val();
        var gender = $("#gender").val();
        var dataString = 'name='+ name + '&username=' + username + '&password=' + password + '&gender=' + gender;

        if(name=='' || username=='' || password=='' || gender=='')
        {
            $('.success').fadeOut(200).hide();
            $('.error').fadeOut(200).show();
        }
        else
        {
           $.ajax({
               type: "POST",
               url: "result.php",
               data: dataString,
               success: function(){
                  $('.success').fadeIn(200).show();
                  $('.error').fadeOut(200).hide();
               }
            });
         }
return false;
});

});
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:47:00.293

只需在您的 ajax 请求成功后将您的响应附加到您指定的 HTML 元素（div、span 等）。

```
 $.ajax({
           type: "POST",
           url: "result.php",
           data: dataString,
           success: function(response){

              $('.success').fadeIn(200).show();
              $('#response').append(response);
              $('.error').fadeOut(200).hide();
           }
        }); 
```

响应将附加到您指定的 HTML 元素。

# spring - Spring Hibernate-sessionfactory 在尝试将其注入 DAO 时为空

> ID：11646498
> 
> 赞同：1
> 
> 时间：2012-07-25T09:18:21.557
> 
> 标签：spring, hibernate, dependency-injection, spring-annotations

我定义的会话工厂`null`在 DAO 中。这是我的代码：

```
@Repository
public class LinkDetailsDAO {

     private SessionFactory sessionFactory;

     @Autowired
     public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
     }

     Session session = sessionFactory.getCurrentSession(); 
```

`NullPointerException`当我尝试创建会话对象时抛出一个。

我的应用程序上下文：

```
 <!-- Load Hibernate related configuration -->
  <import resource="hibernate-context.xml"/>

 <context:annotation-config/>
 <context:component-scan base-package="com.Neuverd.*"/> 
```

我的休眠上下文：

```
 <context:property-placeholder location="/WEB-INF/config/testapp.properties" />

<!-- Enable annotation style of managing transactions -->
<tx:annotation-driven transaction-manager="transactionManager" /> 

<!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"
 p:dataSource-ref="dataSource"
 p:configLocation="/WEB-INF/config/hibernate.cfg.xml"
 p:packagesToScan="com.Neuverd"/>

 <!-- Declare a datasource that has pooling capabilities--> 
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
 destroy-method="close"
p:driverClassName="${app.jdbc.driverClassName}"
p:url="${app.jdbc.url}"
p:username="${app.jdbc.username}"
p:password="${app.jdbc.password}"
/> 
```

和我的休眠配置文件

```
<hibernate-configuration>
    <session-factory>
        <!-- We're using MySQL database so the dialect needs to MySQL as well-->
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
        <!-- Enable this to see the SQL statements in the logs-->
        <property name="show_sql">true</property>
        <property name="hbm2ddl.auto">create</property>
    </session-factory>
</hibernate-configuration> 
```

我也尝试过使用 @Resource 注释。但没有运气。我正在使用 Spring 3.1 和 Hibernate 4.1。

由于上述原因，应用程序在启动过程中抛出了一个`BeanCreationException`for 。`LinkDetailsDAO``NullPointerException`

`sessionFactory`bean和bean创建后`transactionManager`，当容器尝试创建`LinkDetailsDAO`bean时，失败。我不明白为什么要`null` `sessionFactory`创建一个bean！尝试了[春季](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/orm.html#orm-session-factory-setup)文档`sessionFactory`中提到的。不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T14:48:22.237

您尝试`sessionFactory.getCurrentSession()`在构造函数中调用。但是必须先构造对象，然后 Spring 才能调用 setter 并注入会话工厂。所以很明显，在构建时，会话工厂是空的。

即使会话工厂被注入到构造函数中并且您在之后请求会话，也不会有任何事务上下文，并且`getCurrentSession()`会抛出异常。

您应该仅从 DAO 的方法内部从工厂获取会话。这是获取当前会话的方法，即与当前事务关联的会话。

```
public void doSomething() {
    Session session = sessionFactory.getCurrentSession();
    ...
} 
```

# c# - 如何在 Active Directory 上为 Windows 服务创建服务连接点（scp）？

> ID：11646501
> 
> 赞同：1
> 
> 时间：2012-07-25T09:18:29.903
> 
> 标签：c#, .net, windows-services, active-directory

我有 1 个用 C# 编写的 Windows 服务。我想在安装此服务时为其创建服务连接点。此 scp 应在 Active Directory 上的 1 个组织单位中创建。任何人都知道如何做到这一点。谢谢！

# apache-flex - 如何理解 flex 中的“this”关键字

> ID：11646505
> 
> 赞同：0
> 
> 时间：2012-07-25T09:18:44.053
> 
> 标签：apache-flex, this

搜索时似乎 stackoverflow 忽略了`this`关键字。

似乎`this`flex 中的关键字与 JavaScript 不同。我觉得它与Java相似，但不确定。

怎么理解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:36:27.143

`this`对于 MXML 的新手来说可能会有些困惑。在 MXML`this`中，当前的“根标签”不是您附加事件监听器或提供一些数据绑定的标签。

即便如此，一开始它可能有点令人困惑，如果你仔细想想，它是非常有意义的，因为 MXML 文件基本上编译为一个引用的 .as3 类`this`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:37:42.937

在 AS3 中，`this`和在 Java 中一样，都是对当前对象的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T04:39:35.260

“this”的工作方式与在 Java 或 C# 中的工作方式相同。如果您熟悉 C#，此链接可能有助于[c# 在类方法中添加“this”可选](https://stackoverflow.com/questions/11593697/c-sharp-is-adding-this-optional-within-a-class-method)

# extjs - 如何使用 ExtJS 更改光标

> ID：11646507
> 
> 赞同：4
> 
> 时间：2012-07-25T09:18:46.017
> 
> 标签：extjs, mouse-cursor

我想设置一列网格，以便在悬停后将光标更改为指针。

我不知道将样式应用于它是否是最佳实践，请告诉我。

我就是想不通。

这是我的代码，我希望该列在鼠标悬停时会改变光标。

```
Ext.define('Ext.grid.Panel', {
store: services,
xtype: 'log',
features: [groupingFeature],
stateId: 'stateGrid',
columns: [
    {
        text: 'URL',
        sortable: true,
        flex: true,
        dataIndex: 'url'
    }
  ]
}); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-01T06:30:28.793

这个对我有用：

```
columns: [
{
    text: 'URL',
    sortable: true,
    flex: true,
    dataIndex: 'url',
    renderer: function (val, metadata, record) {
            metadata.style = 'cursor: pointer;'; 
        return val;
    }
}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T01:34:45.787

对于大多数组件，可以直接附加 CSS 片段，如下所示：

```
 Ext.define('...', {
    extend: 'Ext.chart.CartesianChart',
    legend: {
        style: 'cursor: pointer;'
    }
}); 
```

使用 时`renderer`，还可以附加一个 CSS 类（以及任何样式）：

```
renderer: function (value, meta, record) {
     meta.tdCls += 'x-cursor-pointer'; 
     return value;
} 
```

`Ext.grid.column.Column`还有一个`componentCls`属性：[Ext.grid.column.Column#cfg-componentCls](http://docs.sencha.com/extjs/5.1.1/api/Ext.grid.column.Column.html#cfg-componentCls)和一个`style`属性：[Ext.grid.column.Column#cfg-style](http://docs.sencha.com/extjs/5.1.1/api/Ext.grid.column.Column.html#cfg-style) ...它将设置整个列的样式，而不是每个单独的行- 或者可以根据值将一个类添加到整个列并使用渲染器添加更多类（然后使用这些组合的 CSS 选择器）。

# cordova - 如何将 dojox.mobile.ListItem 动态添加到 RoundRectList？

> ID：11646508
> 
> 赞同：1
> 
> 时间：2012-07-25T09:18:47.963
> 
> 标签：cordova, dojo, ibm-mobilefirst

我正在尝试将`dojox.mobile.ListItem`s 动态添加到 a`dojox.mobile.RoundRectList`中，并且正在努力解决应该相对简单的事情。

这是我的道场小部件：

```
<ul data-dojo-type="dojox.mobile.RoundRectList" id="theTable" >
        <li data-dojo-type="dojox.mobile.ListItem"
            data-dojo-props='icon:"images/i-icon-1.png",
                            moveTo:"#article",
                            variableHeight:true' 
            id="theItem">
            text here
        </li>
    </ul> 
```

我有一些javascript，我试图抓住一个句柄并在其中`RoundRectList`添加一些`ListItem`s：

```
dojo.require("dojox.mobile.parser");
dojo.require("dojox.mobile");
dojo.requireIf(!dojo.isWebKit, "dojox.mobile.compat");
var theTable = dojo.byId("theTable");
var childWidget = new dojox.mobile.ListItem({
                   id:"item1", 
                   icon:"images/icon.png", 
                   rightText:"Off", 
                   moveTo:"bar", 
                   label:"u1space"});
theTable.addChild(childWidget); 
```

这似乎不起作用，特别是在 Chrome 的 Javascript 控制台中显示以下错误：

> 未捕获的类型错误：无法调用未定义的方法“addChild”

有人可以告诉我我在这里做错了什么吗？本质上，我有一个 JSON 对象，我试图对其进行迭代并将元素放入列表中。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T15:31:53.527

要访问 dojo 小部件，您需要使用 dijit.byId 而不是 dojo.byId。dojo.byId 用于访问非小部件化的 DOM 节点。我在下面提供了一个示例，但我建议查看 dojox.mobile.RoundRectDataList 而不是普通的 dojox.mobile.RoundRectList。数据列表版本由 dojo.data.store 支持，并且可以更轻松地进行动态更新 - [http://livedocs.dojotoolkit.org/dojox/mobile/RoundRectDataList](http://livedocs.dojotoolkit.org/dojox/mobile/RoundRectDataList)

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <title>index</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum- scale=1,minimum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-config="async: true"></script>
   <script type="text/javascript">
   require(["dojox/mobile/parser",
            "dijit/registry",
            "dojox/mobile/deviceTheme",
            "dojox/mobile",
            "dojo/domReady!"],function(parser,registry){
             parser.parse();
             var list = registry.byId("list");
             var childWidget = new dojox.mobile.ListItem({id:"item1", 
                                                              icon:"images/icon.png", 
                                                              rightText:"Off", 
                                                              moveTo:"bar", 
                                                              label:"u1space"});
             list.addChild(childWidget);
           });
    </script>

  </head>
  <body>

  <div id="settings" data-dojo-type="dojox.mobile.View" data-dojo-props="selected: true">

  <!-- a sample heading -->
  <h1 data-dojo-type="dojox.mobile.Heading">Settings</h1>

  <!-- a rounded rectangle list container -->
  <ul data-dojo-type="dojox.mobile.RoundRectList" id="list">

     <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='moveTo:"article"' id="theItem">
        Go to Article view
    </li>
  </ul>
  </div>

  <div id="article" data-dojo-type="dojox.mobile.View">

    <!-- a sample heading -->
    <h1 data-dojo-type="dojox.mobile.Heading" data-dojo-props='back: "settings",moveTo: "settings"'>Article</h1>

    This is the article view
  </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:43:22.117

错误消息似乎是在说您的 theTable 变量未指向具有 addChild() 函数的对象 - 暗示 dojo.byId() 已失败。

我建议先检查表中的内容。

为了比较，我有工作代码在做你想做的事情，但我使用了一个稍微不同的习语：

我正在创建自己的小部件，所以我使用 attachPoint - dapTaskList 来获取我放置列表的位置的句柄，并从头开始创建我的列表。

```
var ul  = new RoundRectList({}, domConstruct.create("ul",{}, this.dapTaskList) );
ul.startup(); 
```

然后，我使用以下代码添加项目：

```
 li = new ListItem({
          "label"          : "xx",
          "rightText"      : 997, 
          "class"          : "subTotalListItem"
        }, domConstruct.create("li",{}, ul.domNode) );
        li.startup(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:26:27.257

我不能 100% 准确地确定这是否是导致您的问题的原因，但您可能应该使用 Dojo API（特别是`dojo.place`）将此 ListItem 放在列表中，而不是使用 JavaScript/DOM API。例如

```
dojo.place(childWidget.domNode, theTable) 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/place.html](http://dojotoolkit.org/reference-guide/1.7/dojo/place.html)

# qr-code - 生成只能由我的应用程序读取的 QR 码

> ID：11646509
> 
> 赞同：2
> 
> 时间：2012-07-25T09:18:49.230
> 
> 标签：qr-code

我使用 ZXings 源开发了一个二维码阅读器和一个扫描仪。现在我想在二维码中嵌入一个只有我的读者可以阅读而其他读者无法阅读的信息。这可行吗？

我基本上不希望公众知道 qr 代码包含什么，除了我的个人朋友群，他们会使用我的 qr 阅读器来查找 qr 代码中存在的内容。当用户尝试用我的阅读器以外的阅读器阅读二维码时，他应该得到垃圾数据，而不是二维码中存在的实际数据。

通过使用密码保护（http://qrdroid.com/blog/author/droidla/page/2），QR Driod 似乎有类似的东西，但我不知道他们是如何做到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:25:41.897

有两种方法可以让您想到；

1.  **加密信息**您可以实施一个系统（正如您所说，QRDroid 和许多其他此类应用程序一样），您可以使用以下过程；**1**获取您想要放入 QR 的信息，**2**使用标准协议加密该信息（如果您对此类事情完全一无所知，维基百科可以帮助您从这里开始） - 这可以受密码保护，或者通过某些其他手段。部分取决于您在这里想要的保密级别... **3**将新的加密信息编码成二维码。在另一端，应用程序读取二维码，然后对其进行解密，瞧。

2.  **开发不同的 QR 样式协议？**这显然*更加*雄心勃勃，并且不一定提供任何理论上的安全性（除非您也以某种方式实现了第 1 部分）。但是，它*会*导致其他标准应用程序无法读取代码，因为他们不知道如何解释他们看到的模式。就是说，在开发 QR 作为一种有用的方法时进行了很多仔细的思考，所以我建议考虑这个练习，只是为了获得它的技术乐趣：D

回到第 1 点，如果您希望您的应用程序只能够读取内容，而不必让用户输入密码或其他任何内容，您可以使用应用程序知道的单个固定“密码”（甚至可能很难-编码，这是最基本的）。它将在每一端自动使用它来加密和解密。这显然代表了一个在严密审查下的巨大安全漏洞，但如果你只是想要一些东西，可以让你的信息*对当前可用的其他 QR 应用程序*保持合理的秘密，这可以完成工作。在这种情况下，您实际上只是在对您的信息进行编码而不是加密，我想，但在某种程度上，其他应用程序不知道如何将 *de*code 作为标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:20:58.527

在将数据放入二维码之前，您需要使用只有您的应用知道的密钥对数据进行加密。

# android - 当我按下主页按钮时我的应用程序重新启动

> ID：11646513
> 
> 赞同：4
> 
> 时间：2012-07-25T09:19:03.923
> 
> 标签：android

我有我的 android 应用程序正在运行。我按下“主页按钮”返回到菜单应用程序，而不是按下我的应用程序图标来恢复它，但被称为我的第一个活动的方法“onCreate()”而不是最后一个活动的方法“onResume()”看到之前按下“主页按钮”。

我只在物理设备上遇到这个问题，而不是在 android 模拟器上。清单文件上是否有一些属性要设置？

你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:02:56.417

确保您没有启用开发人员选项：离开时销毁活动。我碰巧启用了此选项，但我忘记了它，因此每次活动都在重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:26:44.400

应该有一个 Bundle 被发送到您的 onCreate 方法。该捆绑包包含有关如何恢复您的应用程序的信息。

我建议你把 Log.d("",""); 消息到您的 onCreate() 和 onResume() 方法中，以查看何时调用哪个。给我看一些代码，我可以提供进一步的帮助。

请参阅这些： [使用 onResume、onStart 和 onRestart 的 Android 示例](https://stackoverflow.com/questions/4436035/wanted-an-example-which-uses-onresume-on-start-and-on-restart) [http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:03:02.740

可能您的设备即将耗尽或内存不足。覆盖该[`onLowMemory()`](http://developer.android.com/reference/android/app/Application.html#onLowMemory%28%29)方法，并在其中输入日志或其他内容以查看它是否被调用。

# iphone - iOS 4.2 - SDWebImage

> ID：11646514
> 
> 赞同：0
> 
> 时间：2012-07-25T09:19:06.270
> 
> 标签：iphone, ios, ios4, sdwebimage

我无法在我的 ios 4.2 应用程序上使用 SDWebImage，我认为当前的 SDWebImage 库适用于 ios5.0 ARC。

请问有没有支持iOS 4.2的版本![在此处输入图像描述](../Images/b52b3a35d48b589b189e10933c23710f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:25:55.837

来自[SDWebImage GitHub](https://github.com/rs/SDWebImage/)，“**如果你想支持 iOS <3，你可以选择非 ARC 目标**”。所以部署目标根本不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:48:09.000

在您的屏幕截图中，确保您添加了“SDWebImage”，而不是“SDWebImage ARC”。然后，当您添加到“使用库链接二进制文件”时，请确保添加“libSDWebImage.a”而不是“libSDWebImageARC.a”

# tsql - 组过滤t-sql

> ID：11646517
> 
> 赞同：2
> 
> 时间：2012-07-25T09:19:15.113
> 
> 标签：tsql

我的结构如下：

```
cid status

 1    T
 2    T
 1    T
 1    T
 2    T
 3    X
 3    T
 5    T 
```

如何获得`cid`所有**状态**为“T”的位置。

响应必须是（注意 3 被省略，因为它也有一个`X`状态）：

```
cid
 1
 2
 5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:22:59.297

您可以将公用表表达式与`ROW_NUMBER`类似于以下的函数一起使用`GROUP BY`：

```
WITH CTE AS(
   SELECT CID, RN = ROW_NUMBER()OVER(PARTITION BY CID ORDER BY CID)
   FROM tbl
   WHERE NOT EXISTS(
     SELECT NULL FROM tbl t2
     WHERE t2.CID=tbl.CID
     AND Status <> 'T'
   )
)
SELECT CID FROM CTE
WHERE RN = 1 
```

这是小提琴：[http ://sqlfiddle.com/#!3/9bed7/5/0](http://sqlfiddle.com/#!3/9bed7/5/0)

# mysql - MySQL 错误 1242 即使有任何

> ID：11646522
> 
> 赞同：2
> 
> 时间：2012-07-25T09:19:35.037
> 
> 标签：mysql, subquery

我开始使用 OpenGeoDB 查找邮政编码和城市名称。我的 MySQL 查询如下所示：

```
SELECT      `d`.`text_val` AS `city`, (
    SELECT  `text_val`
    FROM    `geodb_textdata`
    WHERE   `loc_id` = ANY (
        SELECT  `loc_id`
        FROM    `geodb_textdata`
        WHERE   `text_val` LIKE '08%'
    )
        AND `text_type` = '500300000'
) AS `plz`, `c`.`lat`, `c`.`lon`
FROM        `geodb_textdata`    AS  `d`
LEFT JOIN   `geodb_coordinates` AS  `c` USING   (`loc_id`)
WHERE       `loc_id` = ANY (
    SELECT  `loc_id`
    FROM    `geodb_textdata`
    WHERE   `text_val` LIKE '08%'
)
    AND `text_type` = '500100000' 
```

如果我使用完整的邮政编码或城市名称运行此查询，则效果很好，但是使用上面的代码，我会收到错误代码

```
#1242 - Subquery returns more than 1 row 
```

我正在使用谷歌，我发现我应该在 = 和子查询之间使用 ANY。您知道如何修复我的代码吗？先感谢您。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:24:22.780

我怀疑这个子查询返回超过 1 行：

```
(
SELECT  `text_val`
FROM    `geodb_textdata`
WHERE   `loc_id` = ANY (
    SELECT  `loc_id`
    FROM    `geodb_textdata`
    WHERE   `text_val` LIKE '08%'
)
    AND `text_type` = '500300000'
) AS `plz` 
```

**更新：**未经测试，但试试这个查询。

```
SELECT      `d`.`text_val` AS `city`, `d2`.`text_val` AS `plz`, `c`.`lat`, `c`.`lon`
FROM        `geodb_textdata`    AS  `d`
LEFT JOIN  `geodb_textdata`    AS  `d2` USING (`loc_id`)
LEFT JOIN   `geodb_coordinates` AS  `c` USING   (`loc_id`)
WHERE       `d`.`text_val` LIKE '08%' AND `d`.`text_type` = '500100000'
AND         `d2`.`text_val` LIKE '08%' AND `d2`.`text_type` = '500300000' 
```

# iphone - 如何在 iOS 中构造 SOAP 请求体

> ID：11646528
> 
> 赞同：-1
> 
> 时间：2012-07-25T09:20:01.367
> 
> 标签：iphone

**如何在 iOS 中构造 SOAP 请求体**

我必须在 SOAP 中构造一个请求主体，我可以在 firefox 上使用 RESTClient 获取数据我想在 iOS 中获得相同的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:26:29.790

[SOAP & iOS：有什么指导吗？](https://stackoverflow.com/questions/6696137/soap-ios-any-guidance)

查看上面的链接。

对于 WSDL，有一个在线类生成器

www.sudz.com

您只需要在 sudz 上发布您的 SOAP 客户端 URL，您将获得示例项目下载选项，其中包含访问该 SOAP 客户端的方法和属性的代码。

我想这会帮助你。

# wpf - 使用 TabControl 进行 Wpf 模板

> ID：11646529
> 
> 赞同：0
> 
> 时间：2012-07-25T09:20:05.950
> 
> 标签：wpf, xaml

我有以下 xaml。Maturities 是一个整数数组 [2012;2013;2014 等...]

我想用 Gethisto(currentitem) 替换 GetHisto2013 ....

-> 我可以用 Tabcontrol 的当前项参数化 Datagrid 的 ItemsSource 吗？

-> 如何使用 XAML 中的此类参数调用我的视图模型的函数？

```
 <TabControl ItemsSource="{StaticResource maturities}">
       <TabControl.ItemTemplate>
          <DataTemplate>
             <TextBlock Text="{Binding}" />
          </DataTemplate>
       </TabControl.ItemTemplate>
       <TabControl.ContentTemplate>
          <DataTemplate>
             <ContentControl>
                <DataGrid x:Name="quotes13"  AutoGenerateColumns="True"  ItemsSource="{StaticResource GetHisto2013}" />
             </ContentControl>
          </DataTemplate>
       </TabControl.ContentTemplate>
    </TabControl> 
```

# jsp - 从数据库中删除表时在网页中显示表已删除消息

> ID：11646533
> 
> 赞同：0
> 
> 时间：2012-07-25T09:20:15.800
> 
> 标签：jsp, jquery

我必须在前端的后端数据库或服务器中显示错误。（如表删除、密码不匹配、服务器连接等）我不知道这样做。

我已经完成了： **mypage.jsp**

```
<script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript">
$(document).ready(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
});
      </script>

<body>
<form id="test">
            <table id="data" cellpadding="5px;" cellspacing="5px;">
                <tr>
                    <td>name</td>
                    <td>c_price</td>

                </tr>

 <%
            Connection connection = null;

            Class.forName("oracle.jdbc.OracleDriver");
                try{
                connection = DriverManager.getConnection("jdbc:oracle:thin:@...","u_name","pwd");
                Statement stmt = connection.createStatement();

                ResultSet rs = stmt.executeQuery("SELECT * FROM test_tbl");

            while(rs.next())
                {
                   %>

   <tr>
        <td><%out.print(rs.getString("name"));%></td>
        <td><%out.print(rs.getString("c_price"));%></td>        
   </tr>
    <% }%>

<%
            connection.close();
       }
      catch(Exception e)
      {
      JOptionPane.showMessageDialog(null,"Error = " + e.getMessage());
     }//end of catch
    %>    

</table>     
</body> 
```

从前端执行时，我从后端删除了表 test_tbl，但网页没有显示任何警报。我也输入了错误的密码，但它也没有显示任何错误。我怎么解决这个问题？？

我必须在以下情况下显示**警报框**：

**当后端没有表时**。上面的 ajax 代码显示了 n/w 错误的警报框，但是**当数据库中没有表或密码/用户名不匹配时如何显示警报框**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:15:17.223

我没有看到任何通过 ajax 和 JSP 进行用户名/密码检查的代码，所以无法给出答案。

现在为了在没有表时显示警报，您是否在从后端删除数据库表后刷新了页面（因为我没有看到触发检查`catch`块以外的表的 ajax 调用）？

另外我不认为 this:`JOptionPane.showMessageDialog(null,"Error = " + e.getMessage());`可以在 JSP 中工作，相反，您可以尝试以下方法来显示消息：

```
// your code ...
<%
        connection.close();
    }
    catch(Exception e)
    {
%>
<div id="errorMsg" class="errorMsg">
Error = <%= e.getMessage() %>
</div>
<%
    }//end of catch
%>
// your code continues ... 
```

您还可以放置一些`javascript`代码来获取`<div>`内容并在页面完全加载后显示警报。

如果您可以粘贴一些显示流程的代码以及更多关于您正在做什么的详细说明，那将会很有帮助。

希望这可以帮助。

# php - 登录表单失败 jQuery + Ajax + PHP

> ID：11646539
> 
> 赞同：0
> 
> 时间：2012-07-25T09:20:23.757
> 
> 标签：php, jquery

我试图在 Ajax 脚本中成功登录后刷新页面，但页面未刷新。我被迫手动刷新页面，然后才会显示已登录。在此先感谢您的帮助，非常感谢。

这是ajax的登录脚本；

```
$("document").ready(function() {
    $("#what").click(function() {
        var email = $("#emailLogin").val();
        var password = $("#passwordLogin").val();
        var dataString = 'email='+email+'&password='+password;
        $.ajax({
            type: "POST",
            url: "authenticate.php",
            data: dataString,
            success: function(response){                
                //alert (response);
                if (response == 0) {
                $("#problem").html("Please enter correct details");
                            } else {
                    window.location = "index.php";
                }
            }
        });
    return false;
    });
}); 
```

这是用于验证表单的 php 脚本

```
// authenticate.php

session_start();
require_once "database.php";
db_connect();
require_once "auth.php";

$user_id = credentials_valid($_POST['email'], $_POST['password']);

if($user_id){
  log_in($user_id);
  if($_SESSION['redirect_to']){
    header("Location: " . $_SESSION['redirect_to']);
    unset($_SESSION['redirect_to']);
  }else{
    header("Location: index.php");
  }

}else{
  echo "0";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:25:58.313

您可以使用 javascript 重定向。AJAX 请求不能重定向用户的浏览器

```
if (response == 0) {
    $("#problem").html("Please enter correct details");
} else {
    window.location = "/index.php";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:26:48.657

当然，您需要刷新页面，因为您使用 JQuery 发布，而 php 函数只返回一些数据。

您有 2 个选择：

1.  发布经典方式（表单提交）

2.  使用 window.location='url' 从 javascript 重定向；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:48:24.840

i see you are redirecting in the js if the response is not equal to 0, and in the php you are redirecting if the log-in failed. also the server side redirecting is not working with ajax, you have to redirect it with `window.location.href = 'url'` also you may send the code status in the response but not writing it yourself.

# c# - MonoTouch.Dialog：添加（System.Collections.Generic.IEnumerable ) 已过时 - 我是否必须更改某些内容？

> ID：11646540
> 
> 赞同：2
> 
> 时间：2012-07-25T09:20:28.310
> 
> 标签：c#, xamarin.ios, monotouch.dialog

下面的一段代码给了我警告：

> 警告 CS0618： `MonoTouch.Dialog.Section.Add(System.Collections.Generic.IEnumerable<MonoTouch.Dialog.Element>)' is obsolete:`请使用 AddAll，因为当我们引入 4.0 协方差时，此版本将无法在 MonoTouch 的未来版本中工作'

这是代码。我没有`Add()`明确地打电话。`aMyReviewElements`是一个`List<Element>()`，我正在使用便利初始化程序。我是否必须调整我的代码（这将使整个便利性无法使用），或者 MT.Dialog 内部是否需要更改？

```
...
List<Element> aMyReviewElements = new List<Element>();

...
new Section("My Reviews")
{
  aMyReviewElements
},
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:39:19.957

在 C# 中，集合初始值设定项需要一个`Add`在 MD 中引用[该方法](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L2103)的方法（注意 Obsolete 属性）。

看起来好像 MD 家伙已经引入了一种[支持 LINQ](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L2083)`Add`的新方法。所以我的建议是注意警告并更新您的代码以使用 LINQ，例如

```
List<Element> aMyReviewElements = new List<Element>();
...
new Section("My Reviews")
{
    from e in aMyReviewElement
    select e
}; 
```

# php - 将数字日期（03-11-1991）转换为阿拉伯数字（1991/111/03）php

> ID：11646546
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:04.037
> 
> 标签：php, string, arabic

我只想在 php.ini 中将这种格式 dd-mm-yyyy(03-11-1991) 的日期转换成这样的阿拉伯语(1991/111/03)。

**答案** 我做了这个逻辑，它完美无缺

```
 $dateofbirth_numerial="03-05-2001";
                             $numerial_no = array("0","1","2","3","4","5","6","7","8","9","-");
                             $arabic_no = array("۰","۱","۲","۳","۴","۵","۶","۷","۸","۹","/");
                             $dateofbirth_arabic = str_replace($numerial_no , $arabic_no , $dateofbirth_numerial);
                             $result = explode('/',$dateofbirth_arabic);
                             echo $result[2]."/".$result[1]."/".$result[0]; /* yyyy/mm/dd */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:35:50.253

您可以使用 PHP 本地化方法：

```
 setlocale(LC_TIME, 'ar');
    $arabic = strftime('%A %e %B %Y', time());
    echo $arabic; 
```

如果您没有看到阿拉伯字母而是拉丁字母，这可能是因为您的系统上没有安装语言环境。您可以通过运行以下命令检查已安装的语言环境：`locale -a`

有关更多选项，请参阅文档：http:
[//php.net/manual/en/function.strftime.php](http://php.net/manual/en/function.strftime.php)
[http://php.net/manual/en/function.setlocale.php](http://php.net/manual/en/function.setlocale.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:56:57.597

```
header('Content-Type: text/html; charset=utf-8');
$standard = array("0","1","2","3","4","5","6","7","8","9");
$eastern_arabic_symbols = array("٠","١","٢","٣","٤","٥","٦","٧","٨","٩");
$current_date = date('d').'-'.date('m').'-'.date('Y');
$arabic_date = str_replace($standard , $eastern_arabic_symbols , $current_date); 
```

你可以试试`str_replace`功能

# jquery - 使用其 URL 显示页面的小图像

> ID：11646547
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:07.773
> 
> 标签：jquery, image, url

我正在寻找一种通过将其 URL 作为参数来获取网页的小图像的方法。我希望它看起来像您使用 gchat 并发送一个 youtube 网址。是否有任何 Jquery 插件可以做到这一点？（我没有使用wordpress）

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:25:51.357

您不能仅使用 javascript 来执行此操作。Ajax（在我们的页面中加载外部内容的方式）无法访问其他域的页面。

哟需要创建一个服务器编程服务（PHP，ASP，C，Phyton，...）。此服务必须加载此 url 并获取图像。然后，您可以使用 ajax 作为 Json 或 XML 加载此服务。

这与您可以在 facebook、pinterest 等中找到的相同。

# tridion - 如何以编程方式取消本地化组件/页面

> ID：11646549
> 
> 赞同：-4
> 
> 时间：2012-07-25T09:21:14.107
> 
> 标签：tridion, tridion-2011

如何在 Tridion 中以编程方式取消本地化组件/页面。

我正在使用 csClient.UnLocalize();

我收到如下错误：UnLocalize 方法没有重载需要 1 个参数。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:34:27.070

根据您所说的错误，您没有为调用提供足够的参数。查看 API 文档应该可以解决这个问题，甚至可以查看 Visual Studio 的对象浏览器中的方法......

根据这两个选项中的后者，我花了一些时间检查，您需要指定一个表示要取消本地化的对象的 URI 的字符串和一个 ReadOptions 对象。像这样的东西：

```
csClient.UnLocalize("tcm:1-234", new ReadOptions()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:34:05.137

```
csClient.UnLocalize(subjectId, new ReadOptions(LoadFlags.None)); 
```

# c# - HTML 解析——我应该使用什么样的线程？

> ID：11646551
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:17.063
> 
> 标签：c#, wpf, multithreading, html-parsing, backgroundworker

我有一个解析 html 文档的方法，但它需要很长时间并且 UI 冻结。所以我想使用一个线程，但我很困惑。线程有很多种，比如后台工作线程、调度程序等。我应该使用哪种类型的线程？另外，在我的方法中，我传递了一个参数。如果我使用线程，如何传递一个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:48:50.643

自 WPF 以来，我不再使用后台工作程序。我听说它是​​为 WinForms 创建的，应该在 WPF 中避免使用，但是我可能弄错了。由于您将字符串作为参数传递（而不是某些 ui 控件），因此访问另一个线程应该没有问题，如下所示：

```
private void DoStuff(string documentName)
{
    Action a = () => 
    {
        var result = ParseFile(documentName);
        Action b = () => 
        {
            TextBox1.Text = result;
        };
        Dispatcher.BeginInvoke(b);
    };
    a.BeginInvoke(callback => 
    {
        a.EndInvoke(callback);
    }, null);
} 
```

注意：不要将委托放入循环中，而是将循环放入委托中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:36:09.410

这是一个使用后台工作者的示例代码：

```
// I usually disable controls (buttons, etc.)
// so user is prevented to perform other
// actions
BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (s, e) =>
{
     // Get the parameter
     var param = e.Argument as <your expected object>
     // Perform parsing
}
worker.RunWorkerCompleted += (s1, e1) =>
{
     System.Windows.Threading.Dispatcher.CurrentDispatcher.BeginInvoke(
        new Action(() =>
        {
             // enable you controls here
        }));
}
worker.RunWorkerAsync(parameter); 
```

希望这可以帮助！

# actionscript-3 - 如何将数组写入文件

> ID：11646557
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:28.750
> 
> 标签：actionscript-3, flash, air, builder

我正在为 android 制作一个简单的程序，可以将文本行添加、读取和写入 txt 文件并将其显示在列表中。我得到了 saveFile(); 函数将 todo_items 数组写入文件 todo.txt。但由于某种原因，它没有在列表中显示真实的文本行，而是给了我数字......例如，当我添加“喂狗，喂猫，喂鱼，喂鸟”，然后删除它给出的结果中的 3d 项目我“0、1、2”。不知道为什么。这是函数的代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           height="494" creationComplete="readFile()"
           >
<fx:Script>
    <![CDATA[
        public var intTemp:int;
        import mx.collections.ArrayCollection;
        [Bindable] public var todo_items:ArrayCollection;   
        private function readFile():void
        {
            var todoFile:File =File.applicationStorageDirectory.resolvePath("todo.txt");

                var fs:FileStream = new FileStream();
                fs.open(todoFile, FileMode.READ);
                var result:String = fs.readUTFBytes(fs.bytesAvailable);
                var items:Array = result.split("\n");
                items.pop();
                todo_items = new ArrayCollection(items);
                fs.close();

        }
        private function writeFile():void
        {
            var todoFile:File = File.applicationStorageDirectory.resolvePath("todo.txt");

            var fs:FileStream = new FileStream();
            fs.open(todoFile, FileMode.APPEND);

            fs.writeUTFBytes(task_txt.text + "\n");

            fs.close();
            readFile();
        }

        private function deleteItem():void
        {           
                var todoFile:File =File.applicationStorageDirectory.resolvePath("todo.txt");
                var fs:FileStream = new FileStream();
                fs.open(todoFile, FileMode.READ);
                var result:String = fs.readUTFBytes(fs.bytesAvailable);
                var items:Array = result.split("\n");
                items.pop();
                todo_items = new ArrayCollection(items);
                todo_items.removeItemAt(intTemp);
                fs.close();
                safeFile();
        }
        private function safeFile():void
        {

            var todoFile:File = File.applicationStorageDirectory.resolvePath("todo.txt"); 

            var fs:FileStream = new FileStream(); 
            fs.open(todoFile, FileMode.WRITE); 

            for(var item:String in todo_items)
            {
                fs.writeUTFBytes(item + "\n")
            }

            fs.close(); 
            readFile(); 

        }   

    ]]>
</fx:Script>

<s:List id="todo_list" left="10" right="10" top="142" bottom="87" dataProvider="{todo_items}"/>
<s:Button left="11" right="10" top="69" height="65" label="Save task" click="writeFile(); task_txt.text = null"
          enabled="{task_txt.text.length > 0}"/>
<s:TextInput id="task_txt" left="10" right="10" top="10" height="51" prompt="Specify a task"/>
<s:Button left="10" right="10" bottom="14" label="Delete"
          click="intTemp = todo_list.selectedIndex; todo_items.removeItemAt(todo_list.selectedIndex); deleteItem()"
          enabled="{todo_list.selectedIndex != -1}"/>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:43:11.077

好吧，`for(var item in array)`设置`item`为数组中的所有键，即 0, 1, 2, ...

要获取实际项目，您需要执行以下操作之一：

```
for(var item:String in todo_items)
{
    fs.writeUTFBytes(todo_items[item] + "\n")
} 
```

或者

```
for each(var item:String in todo_items)
{
    fs.writeUTFBytes(item + "\n")
} 
```

我推荐第二个，因为它更干净。

# c# - 在 XElement 中设置值 - 我真的必须从根开始吗？

> ID：11646561
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:43.413
> 
> 标签：c#, xml, xpath, linq-to-xml

以下对我有用：

```
Xdoc.Element("session")
    .Element("immediate")
    .Element("pivot")
    .Element("axes")
    .Element("axis")
    .Element("attribute")
    .Element("selection")
    .Attribute("value")
    .SetValue("New_Value"); 
```

我真的需要从文档顶部开始吗？我知道我可以使用后代，但我不能引用该元素？

这样做的正确方法是什么？在 XPath 中，我会做类似的事情

```
/*/*/*/*etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:02.407

你的意思是：

```
var el = XElement.Parse("<session><immediate><pivot><axes><attribute><selection a=\"b\"/></attribute></axes></pivot></immediate></session>");
var sel = el.XPathSelectElement("immediate/pivot/axes/attribute/selection");
sel.SetAttributeValue("value","new_value"); 
```

? 注意这需要：

```
using System.Xml.XPath; 
```

请注意，如果这是由您可以使用的*文档*`/`所植根：

```
var doc = XDocument.Parse("<session><immediate><pivot><axes><attribute><selection a=\"b\"/></attribute></axes></pivot></immediate></session>");
var sel = doc.XPathSelectElement("/session/immediate/pivot/axes/attribute/selection"); 
```

另一种方法是寻找`.Descendants("selection")`，但 xpath 通常更灵活。

# c# - 在后面的代码中编写代码后无法单击任何按钮

> ID：11646563
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:55.707
> 
> 标签：c#, asp.net

当我在做一个预订系统时，我在我的网页中实现了几个按钮。我设法限制用户点击我网页中的按钮，但我的问题是用户现在甚至无法选择一个按钮，因为当他们尝试点击第一个按钮时，我的警报消息会弹出，要求他们只选择一个按钮。我如何允许用户只选择一个按钮，当他们尝试选择另一个按钮时，我的警报消息将开始使用。我怀疑这是我造成问题的原因。

这是我的 .cs 代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    int counter = 0;
    if (counter > 1)
    {
        Button1.Text = "Selected";
        Button1.BackColor = System.Drawing.Color.DarkGreen;
        Button2.Text = "Selected";
        Button2.BackColor = System.Drawing.Color.DarkGreen;
        startingTime.Text = "9AM";
        endingTime.Text = "11AM";
    }

    else
    {
        ScriptManager.RegisterStartupScript(this, GetType(), "showalert", "alert('Please select one slot only');", true);
    }
}
protected void Button2_Click(object sender, EventArgs e)
{
    int counter = 1;
    if (counter > 0)
    {
        Button2.Text = "Selected";
        Button2.BackColor = System.Drawing.Color.DarkGreen;
        Button3.Text = "Selected";
        Button3.BackColor = System.Drawing.Color.DarkGreen;
        startingTime.Text = "10AM";
        endingTime.Text = "12PM";

    }

    else
    {
        ScriptManager.RegisterStartupScript(this, GetType(), "showalert", "alert('Please select one slot only');", true);
    }
}
protected void Button3_Click(object sender, EventArgs e)
{
    int counter = 1;
    if (counter > 0)
    {
        Button3.Text = "Selected";
        Button3.BackColor = System.Drawing.Color.DarkGreen;
        startingTime.Text = "11AM";
        endingTime.Text = "1PM";

    }

    else
    {
        ScriptManager.RegisterStartupScript(this, GetType(), "showalert", "alert('Please select one slot only');", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:23:52.807

这将始终评估为`false`，因此您始终会进入`else`块：

```
int counter = 0;
if (counter > 1) 
```

您应该在代码执行`counter` **后进行**更改，它也应该是您的类的一个字段（否则对它的任何更改都会丢失，因为`counter`一旦方法退出，当前就消失了）。

您还可以使用[`Button.Enabled`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.enabled.aspx)启用/禁用按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:27:07.733

声明`int counter = 0`为全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:28:34.757

您必须尝试对 Button1 使用此示例

```
//Save your counter in Viewstate or InputHidden in order to persist

public int Counter 
{
    get
    {
        int s = (int)ViewState["Counter"];
        return (s == null) ? 0 : s;
    }
    set
    {
        ViewState["Counter"] = value;
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    Counter = Counter + 1;

    if (Counter > 1)
    {
        Button1.Text = "Selected";
        Button1.BackColor = System.Drawing.Color.DarkGreen;
        Button2.Text = "Selected";
        Button2.BackColor = System.Drawing.Color.DarkGreen;
        startingTime.Text = "9AM";
        endingTime.Text = "11AM";
    }

    else
    {
        ScriptManager.RegisterStartupScript(this, GetType(), "showalert", "alert('Please select one slot only');", true);
    }
} 
```

# google-maps - 谷歌地图在安卓手机上运行失败

> ID：11646564
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:58.923
> 
> 标签：google-maps

嗨，我使用 google api 1.5 开发了 gpslocator 应用程序。谷歌地图正在模拟器中显示....我在移动设备中安装了 apk 文件。但它不显示地图。它只显示网格。是否应该像我们为系统所做的那样为移动设备指定任何 api 密钥..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:34:13.967

是的。您必须使用密钥工具。[在这里](https://developers.google.com/android/maps-api-signup)查看详细信息。

该过程将为您提供一个需要放入 apiKey 字段的密钥。例如：

```
 <com.google.android.maps.MapView
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:apiKey="0AHIjblxfiqK2Zq0sDLXmAyMbYMLRdkf4TmiFuQ"
  /> 
```

# mysql - 带有 UPDATE 语句的触发器中的 MySQL IF 语句

> ID：11646565
> 
> 赞同：0
> 
> 时间：2012-07-25T09:21:59.590
> 
> 标签：mysql, triggers

我真的希望你能帮我解决这个问题。我正在尝试根据旧字段长度是否大于一个来运行两种不同的更新查询。这背后的想法是，当用户更新产品时，它会将 ProductRef 附加到纯粹用于搜索的搜索表中。

很简单，如果 ProductRef 的字符串长度大于 0，则将旧的产品 ref 替换为新的。否则，添加新产品参考。这是我到目前为止所拥有的，但它似乎触发了一个错误 -

```
-- Update the ProductType UpdatedTS that corresponds with this product
-- The below section simply updates the main products UpdatedTS
UPDATE tbl_product_types 
SET UpdatedTS = now() 
WHERE ID = New.ProductTypeID;

IF ( SELECT Length(Old.ProductRef) > 0 )
    BEGIN
        -- We have already stored the product reference so run a replace
        UPDATE tbl_product_type_search AS STable
        SET `STable.Search` = replace(`Search`,CONCAT(Old.ProductRef,' '),New.ProductRef) 
        WHERE `STable.ProductTypeID` = Old.ProductTypeID
    END
ELSE
    BEGIN
        -- We haven't yet stored the product reference, store it
        UPDATE tbl_product_type_search AS STable
        SET `STable.Search` = CONCAT(NEW.ProductRef,' ',`STable.Search`) 
        WHERE STable.ProductTypeID = New.ProductTypeID
    END 
```

供您参考，以下是相关的数据库结构：

![数据库结构](../Images/6c45a87f1d6a5f10f25373fdeec41661.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:44:21.823

它似乎是 UPDATE 触发器。不是吗？如果是这样，试试这个代码（有一些语法错误） -

```
 UPDATE
    tbl_product_types
  SET
    UpdatedTS = NOW()
  WHERE ID = NEW.ProductTypeID;

  IF (SELECT length(Old.ProductRef) > 0) THEN
    -- We have already stored the product reference so run a replace
    UPDATE
      tbl_product_type_search AS STable
    SET
      `STable.Search` = REPLACE(`Search`, CONCAT(Old.ProductRef, ' '), NEW.ProductRef)
    WHERE
      `STable.ProductTypeID` = OLD.ProductTypeID;
  ELSE
    -- We haven't yet stored the product reference, store it
    UPDATE
      tbl_product_type_search AS STable
    SET
      `STable.Search` = CONCAT(NEW.ProductRef, ' ', `STable.Search`)
    WHERE
      STable.ProductTypeID = NEW.ProductTypeID;
  END IF; 
```

**两个 UPDATE 语句合二为一：**

```
UPDATE
  tbl_product_type_search AS STable
SET
  `STable.Search` =
    IF(
      LENGTH(OLD.ProductRef) > 0,
      REPLACE(`Search`, CONCAT(OLD.ProductRef,' '), NEW.ProductRef),
      CONCAT(NEW.ProductRef, ' ', `STable.Search`)
    )
WHERE
  LENGTH(OLD.ProductRef) > 0 AND `STable.ProductTypeID` = OLD.ProductTypeID
  OR
  LENGTH(OLD.ProductRef) <= 0 AND STable.ProductTypeID = NEW.ProductTypeID 
```

**关于分隔符：**

```
DELIMITER $$

CREATE TRIGGER trigger_name
AFTER UPDATE
ON table_name
FOR EACH ROW
BEGIN

  UPDATE tbl_product_types...;

  other statements...;
END
$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:44:20.393

以下是未经测试的更新 if 语句。你可以试试看。

```
UPDATE tbl_product_type_search AS STable 
inner join tbl_product_type_search as Old on STable.ID=Old.ID 
SET `STable.Search` = 
     IF(Length(Old.ProductRef) > 0  AND `STable.ProductTypeID` = Old.ProductTypeID,   
        replace(`Search`,CONCAT(Old.ProductRef,' '),New.ProductRef),  
        IF(Length(Old.ProductRef) < 0 AND STable.ProductTypeID = New.ProductTypeID, 
          CONCAT(NEW.ProductRef,' ',`STable.Search`) ,`STable.Search` )); 
```

# asp.net - 本地 IIS 中的 Ajax 扩展出错

> ID：11646567
> 
> 赞同：0
> 
> 时间：2012-07-25T09:22:04.070
> 
> 标签：asp.net, sql-server, c#-3.0

我已经在*Windows 7中配置了我的**IIS*。并托管运行良好的网站。

 *但它现在显示错误如下

> “/”应用程序中的服务器错误。ID 为“UpdatePanel1”的控件需要页面上的 ScriptManager。ScriptManager 必须出现在任何需要它的控件之前。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：ID 为“UpdatePanel1”的控件需要页面上的 ScriptManager。ScriptManager 必须出现在任何需要它的控件之前。

我已经安装了*Ajax 1.0*。错误的原因是什么..我坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:40:33.060

您的脚本管理器应放在表单标记内的 aspx 页面中的 updatepanel 之前。因为 ajax updatepanel 需要您可以在工具箱中找到的 Scriptmanager。*

# jira-plugin - 如何在 Jira 插件中进行数据库查询？

> ID：11646574
> 
> 赞同：2
> 
> 时间：2012-07-25T09:22:23.577
> 
> 标签：jira-plugin

我正在编写一个自定义 Jql 函数来执行普通 Jql 无法执行的高级查询。我需要找到多个组件的所有问题或（恰好一个组件和给定的自定义字段不为空）。

我可以在我的插件中注入什么 Manager 类，以便发出 SQL、Hibernate 或其他类型的数据库查询？

目的是让我的自定义函数返回匹配问题的列表，以便可以在 Jira 中的 Jql 搜索中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:43:37.053

尝试查看 JIRA API 参考： [http](http://docs.atlassian.com/jira/4.1/com/atlassian/jira/jql/builder/JqlClauseBuilder.html) ://docs.atlassian.com/jira/4.1/com/atlassian/jira/jql/builder/JqlClauseBuilder.html 和 [http://docs.atlassian.com/jira/4.1/ com/atlassian/jira/jql/builder/ConditionBuilder.html](http://docs.atlassian.com/jira/4.1/com/atlassian/jira/jql/builder/ConditionBuilder.html)

您始终可以为您的插件类创建一个方法，如下所示：

```
public class MyPlugin
{
    JiraAuthenticationContext authenticationContext;
    SearchProvider searchProvider; 
    public MyPlugin(JiraAuthenticationContext authenticationContext, SearchProvider searchProvider){
        this.authenticationContext = authenticationContext;
        this.searchProvider = searchProvider; 
    }

    public List<Issue> getIssues(CustomField your_cf) throws SearchException{
        User user = authenticationContext.getLoggedInUser();

        JqlClauseBuilder jqb = JqlQueryBuilder.newBuilder().where();
        jqb = jqb.not().componentIsEmpty();
        Query query = jqb.endWhere().buildQuery(); 

        List<Issue> issues = searchProvider.search(query, user, PagerFilter.getUnlimitedFilter()).getIssues();

        List<Issue> result = new ArrayList<Issue>(); 
        for(Issue issue : issues){
                Collection<GenericValue> components = issue.getComponents(); 
                //component size already > 0 from query
                if(components.size() > 1 || (issue.getCustomFieldValue(your_cf) != null)) 
                        result.add(issue); 
        }
        return result; 
    }
} 
```

# latex - BibTex 上的 LaTeX 错误

> ID：11646575
> 
> 赞同：-2
> 
> 时间：2012-07-25T09:22:26.353
> 
> 标签：latex

我正在使用 WinEdt 编译 Tex 文档，但遇到了以下问题：

> “！LaTeX 错误：出了点问题——可能是缺少 \item。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:22:26.353

我已经解决了一个下午的问题，我想我必须分享这个。`\cite`如果正在使用 BibTeX 但文档中没有命令，则会产生此错误。

# fitnesse - 我可以通过restful服务将变量传递给fitnesse测试用例吗？

> ID：11646576
> 
> 赞同：0
> 
> 时间：2012-07-25T09:22:26.553
> 
> 标签：fitnesse

我正在自动执行fitnesse，以便可以从代码中调用测试用例。现在这些测试用例依赖于我在 wiki 中定义的一些变量。我可以通过 RestFul 服务在 wiki 中指定变量的值吗？有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T23:49:12.040

您可以通过夹具代码从任何源读取数据并将结果保存为变量。

*   创建夹具
*   将数据读入fitnesse变量
*   在其他固定器中使用 var

# c# - 具有应用程序名称 IsInRole 的自定义 IPrincipal

> ID：11646580
> 
> 赞同：3
> 
> 时间：2012-07-25T09:22:53.950
> 
> 标签：c#, asp.net-mvc-3, roleprovider

我正在实现一个`IPrincipal`我想在多个应用程序中使用的自定义。我有2个关于`IsInRole`方法的问题......

1）是否建议我将自定义 RoleProvider 与自定义一起使用`IPrincipal`？我总是可以将检查用户角色的逻辑放在从 IPrincipal 继承的类中。

就像是：

```
public class SSDSPrincipal : IPrincipal
{ 
    public SSDSPrincipal(SSDSIdentity identity)
    {
        this.Identity = identity;
    }        

    public IIdentity Identity {get;private set;}

    public bool IsInRole(string role)
    {   
        string[] roles = Roles.Providers["SSDSRoleProvider"].GetRolesForUser(Identity.Name);
        return roles.Any(s => role.Contains(s)); 
    }
} 
```

2）因为我想在多个 MVC3 应用程序中使用它。存储应用程序名称的最佳位置在哪里？我需要能够手动设置它。

```
public bool IsInRole(string role)
{   
    string applicationName = [where can I store this globally for my asp.net mvc3 app]
    return AreTheyInARoleForThisApplication(applicationName, role);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:27:18.030

我想说你可以自由地使用任何你想要的技术来确定一个用途是否在一个角色中。RoleProvider 在这里不是必须的。

您不能将应用程序名称作为构造函数参数传递，然后将其存储在成员中吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:31:15.413

1）您不必拥有角色提供者，但是如果您这样做，想法是您的自定义角色提供者应该从 System.Web.Security.RoleProvider 继承，以便它可以与任何其他角色提供者互换而不会破坏应用

2) web.config 或 app.config 是合适的地方

# javascript - 如何将其自动化为 for 循环？

> ID：11646581
> 
> 赞同：0
> 
> 时间：2012-07-25T09:22:53.850
> 
> 标签：javascript, html, coordinates, chess

我正在尝试使用 jquery 制作一个带有可拖动棋子的棋盘，其中棋子会捕捉到新的目标方块。我一直在尝试各种概念，但我无法让我尝试的任何东西发挥作用。

我相信我缺少一些基本概念。

我编写了一些代码，可以在板上加载几块并使它们可拖动，但我无法弄清楚如何在没有手动数学的情况下定义网格。使用下面的手动系统后，我可以放置这些碎片。它似乎是 for 循环和多维数组的绝佳候选者。我最终想说的是

`a1 = [0+"%",0+((7/8)*100)+"%"],[0+((1/8)*100)+"%"], a2 = [0+((2/8)*100)+"%",0+((7/8)*100)+"%"]`

所以我以后可以对所有等级和文件使用代数符号等。

```
function initCoords(){

var aFile = [[0+"%",0+((7/8)*100)+"%"],[0+((1/8)*100)+"%",0+((7/8)*100)+"%"],[0+((2/8)*100)+"%",0+((7/8)*100)+"%"],[0+((3/8)*100)+"%",0+((7/8)*100)+"%"],[0+((4/8)*100)+"%",0+((7/8)*100)+"%"],[0+((5/8)*100)+"%",0+((7/8)*100)+"%"],[0+((6/8)*100)+"%",0+((7/8)*100)+"%"],[0+((7/8)*100)+"%",0+((7/8)*100)+"%"]];

var bFile = [[0+"%",0+((6/8)*100)+"%"],[0+((1/8)*100)+"%",0+((6/8)*100)+"%"],[0+((2/8)*100)+"%",0+((6/8)*100)+"%"],[0+((3/8)*100)+"%",0+((6/8)*100)+"%"],[0+((4/8)*100)+"%",0+((6/8)*100)+"%"],[0+((5/8)*100)+"%",0+((6/8)*100)+"%"],[0+((6/8)*100)+"%",0+((6/8)*100)+"%"],[0+((7/8)*100)+"%",0+((6/8)*100)+"%"]];

var cFile = [[0+"%",0+((5/8)*100)+"%"],[0+((1/8)*100)+"%",0+((5/8)*100)+"%"],[0+((2/8)*100)+"%",0+((5/8)*100)+"%"],[0+((3/8)*100)+"%",0+((5/8)*100)+"%"],[0+((4/8)*100)+"%",0+((5/8)*100)+"%"],[0+((5/8)*100)+"%",0+((5/8)*100)+"%"],[0+((6/8)*100)+"%",0+((5/8)*100)+"%"],[0+((7/8)*100)+"%",0+((5/8)*100)+"%"]];

var dFile = [[0+"%",0+((4/8)*100)+"%"],[0+((1/8)*100)+"%",0+((4/8)*100)+"%"],[0+((2/8)*100)+"%",0+((4/8)*100)+"%"],[0+((3/8)*100)+"%",0+((4/8)*100)+"%"],[0+((4/8)*100)+"%",0+((4/8)*100)+"%"],[0+((5/8)*100)+"%",0+((4/8)*100)+"%"],[0+((6/8)*100)+"%",0+((4/8)*100)+"%"],[0+((7/8)*100)+"%",0+((4/8)*100)+"%"]];

var eFile = [[0+"%",0+((3/8)*100)+"%"],[0+((1/8)*100)+"%",0+((3/8)*100)+"%"],[0+((2/8)*100)+"%",0+((3/8)*100)+"%"],[0+((3/8)*100)+"%",0+((3/8)*100)+"%"],[0+((4/8)*100)+"%",0+((3/8)*100)+"%"],[0+((5/8)*100)+"%",0+((3/8)*100)+"%"],[0+((6/8)*100)+"%",0+((3/8)*100)+"%"],[0+((7/8)*100)+"%",0+((3/8)*100)+"%"]];

var fFile = [[0+"%",0+((2/8)*100)+"%"],[0+((1/8)*100)+"%",0+((2/8)*100)+"%"],[0+((2/8)*100)+"%",0+((2/8)*100)+"%"],[0+((3/8)*100)+"%",0+((2/8)*100)+"%"],[0+((4/8)*100)+"%",0+((2/8)*100)+"%"],[0+((5/8)*100)+"%",0+((2/8)*100)+"%"],[0+((6/8)*100)+"%",0+((2/8)*100)+"%"],[0+((7/8)*100)+"%",0+((2/8)*100)+"%"]];

var gFile = [[0+"%",0+((1/8)*100)+"%"],[0+((1/8)*100)+"%",0+((1/8)*100)+"%"],[0+((2/8)*100)+"%",0+((1/8)*100)+"%"],[0+((3/8)*100)+"%",0+((1/8)*100)+"%"],[0+((4/8)*100)+"%",0+((1/8)*100)+"%"],[0+((5/8)*100)+"%",0+((1/8)*100)+"%"],[0+((6/8)*100)+"%",0+((1/8)*100)+"%"],[0+((7/8)*100)+"%",0+((1/8)*100)+"%"]];

var hFile = [[0+"%",0+((0/8)*100)+"%"],[0+((1/8)*100)+"%",0+((0/8)*100)+"%"],[0+((2/8)*100)+"%",0+((0/8)*100)+"%"],[0+((3/8)*100)+"%",0+((0/8)*100)+"%"],[0+((4/8)*100)+"%",0+((0/8)*100)+"%"],[0+((5/8)*100)+"%",0+((0/8)*100)+"%"],[0+((6/8)*100)+"%",0+((0/8)*100)+"%"],[0+((7/8)*100)+"%",0+((0/8)*100)+"%"]];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T10:12:20.287

I agree with other posters about separating your logical and graphical view, but I'd like to answer your question as presented, as it should help you think about finding commonality in your code that you can factor out.

When trying to automate the creation of a dataset like this, you need to look for commonalities and sequences. As you do that, you should be able to iterate towards a decent solution.

For a start, rather than having a set of variables called xFile (where x is a-h), why not create an object called "Files", with properties a-h, thus:

```
files = {
  a:[],
  b:[],
  ...
} 
```

Even that may be more complex than you need - for ease of creation, you may find that you want a 2D array, where a=0, b=1 etc. is much easier to deal with (though see below, h=0, g=1... is even easier).

So, the next obvious commonality is that the first cell in each of the arrays you present follows the same pattern: `[0+"%",0+((n/8)*100)+"%"]`, where `n` is 7->0 going from a-h. So you could easily generate each of the first cells thus:

```
files = [];
for (i = 7; i >= 0; i -= 1) {
    files[Math.abs(i-7)] = [0+"%",0+((i/8)*100)+"%"]
} 
```

Now, this is a little ugly, the Math.abs call there is because the numbers increase in the opposite direction to the array. There are other ways to do this, but IMO they are all pretty ugly. Instead, you could consider inverting the order of the array, so that it runs h-a, rather than a-h:

```
files = [];
for (n = 0; n <= 7; n += 1) {
    files[n] = [0+"%",0+((n/8)*100)+"%"]
} 
```

OK, so having seen this commonality, you can look at the next cells. These are all the same `[0+((1/8)*100)+"%",0+((n/8)*100)+"%"]` for the second, and `[0+((2/8)*100)+"%",0+((n/8)*100)+"%"]` for the third, both where where `n` is 0-7 for a-h.

Actually, we see another commonality here:
They could both be described as `[0+((j/8)*100)+"%",0+((i/8)*100)+"%"]` where `i` is the `n` from before, and `j` is the rank (1-7).

Even more, the difference between cell 0 and cells 1-7 is that cells 1-7 all start with `0+((i/8)*100)+`, whereas cell 0 just starts with `0+`. But what is `((0/8)*100)`? It's `0`!

So, there are no special cases, each cell can be defined as `[0+((j/8)*100)+"%",0+((i/8)*100)+"%"]`

So, taking the loop from before, we can extend it with an inner loop, thus:

```
files = [];
for (i = 0; i <= 7; i += 1) {
    files[i] = []
    for (j = 0; j <=7; j += 1) {
        files[i][j] = [0+((j/8)*100)+"%",0+((i/8)*100)+"%"]
    }
} 
```

The above code is untested so I don't discount having made some error, but it *should* generate an array with the data you present above, (though running from h-a rather than a-h)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:39:11.407

你这样做是一种“讨厌”的方式！

您可以用数组表示棋盘，例如

```
var board = [];  //make a new array

//push 8 new arrays of length 8 onto this board array - ie 8 x 8
for (var i=0; i<8; i++) board.push(new Array(8)); 
```

这个数组中的每个位置都可以存储任何 Javascript 对象——我建议从一些简单的方式来表示一块。

您需要将图形组件与电路板的逻辑表示分开 - 我觉得您目前没有这样做。

也许有一个类，如......

```
function piece(col, typ) {
    var colour = col, 
        pieceType = typ;

    return {
        colour : colour,
        pieceType : typ
    }
} 
```

那你可以说...

```
board[0][4] = new piece('white','queen'); 
```

..例如。

尝试在类中编码游戏逻辑，例如你能有一个蓝皇后吗？你能拥有一头白牛吗？白王会跳吗？等等等等

当您进行更多重构时，您会发现您的代码变得更好阅读。

并且不要写这么长的代码行！这是一个需要重新思考的明确信号！

玩得开心！:)

# event-handling - C++builder 以不同的形式重用事件处理程序

> ID：11646583
> 
> 赞同：0
> 
> 时间：2012-07-25T09:23:01.100
> 
> 标签：event-handling, c++builder, vcl

我有一个事件处理程序作为表单的成员函数。我想将此处理程序重新用于另一个表单中的事件，包含在它自己的单元中。但是，我无法使用对象检查器分配处理程序。

在 [1] 中，问题似乎已解决，使处理程序的“可见性”变为第二种形式，尽管我不知道这如何适用于 c++(builder)。

我认为不将处理程序定义为成员函数会更聪明。最好的方法是什么？

谢谢和最好的问候

[1][如何从另一个处理程序调用/调用按钮单击事件处理程序？（C＃ ）](https://stackoverflow.com/questions/7433428/how-do-i-invoke-call-a-button-click-event-handler-form-another-handler-c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:38:58.927

您还可以在代码本身中分配事件处理程序，而无需使用对象检查器。例如

```
 TButton* pButton = new TButton(NULL);
   pButton->OnClick = MyCustomButtonClickHandlerFunction; 
```

当然，您的自定义事件处理程序函数原型必须与相关事件处理程序的原型相同。我一直在使用这种东西，因为当您动态创建表单时，无论如何您都无法使用对象检查器。

在您的情况下，从另一个类分配事件处理程序可能是不合适的，尽管它取决于类以及函数如何访问内部成员。如果您可以将处理程序重新设计为不是成员函数，我不明白为什么您不能将它用于两个类。我使用其他类的成员函数作为表单和按钮以及其他 GUI 对象的事件处理程序，尽管 VCL 对象通常是作为该类的成员变量动态创建的。

# objective-c - 放置“全局”数据结构的正确位置

> ID：11646585
> 
> 赞同：0
> 
> 时间：2012-07-25T09:23:10.297
> 
> 标签：objective-c

**背景：** 我正在概括我刚刚继承的 iOS 项目的某些方面。我想要的一件事是从应用程序中的任何地方可访问的数据结构，用户控件可以访问特定于应用程序的样式信息（`UIColor`定义等）。

**问题：**如果我定义了一个包含需要“全局”访问的数据的数据结构，那么在哪里被认为是实例化该对象的正确位置，以及其他对象获取对它的引用的正确方法是什么？一些研究发现了以下选项：

*   创建数据结构作为 my 的属性`AppDelegate`；初始化它`applicationDidFinishLaunching`；通过访问它`((myAppDelegate *)[UIApplication sharedApplication].delegate).getStyleDefs`。
*   使结构成为全局单例（延迟加载或急切地从 实例化`AppDelegate`）。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:44:27.193

Matt Gallagher 关于[单例、AppDelegates 和顶级数据](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)的文章是关于在 Objective C 中处理此问题的各种方法的优缺点的一个很好的参考。非常简短的总结是：使用单例。

其他地方反对单身人士的主要论据大致分为两个阵营：

1.  *如果您需要这种全局对象，那么您首先做错了。*这通常是个好建议，但您似乎已经决定走这条路。请注意，应用程序委托模式只是劫持了一个 Cocoa 自动为您创建的单例，并在其上挂了更多东西。所以它并不是真正从单身人士中解脱出来的。
2.  *单例不应该是其他语言中的意义上的真正单例。*传统的单例实际上强制禁止在您的应用程序中只能实例化一个。在 Objective C 中，我们主要使用单例，其中有一个由类方法为您创建的默认对象，但如果您愿意，您可以创建更多。Apple 的课程相当普遍地使用它。在预计您不会创建更多类方法`default*`的情况下，类方法以 开头，而在您可能以`shared*`.

注意要实例化你的单例，最好的现代方法是使用 Grand Central Dispatch，如本[关于 Objective C 单例的说明](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:40:15.947

也许创建一个名为的单独文件`SharedConstants(.h/.m)`，并在其中提供所有应用程序范围的常量。

把类似的东西

`#define sharedColor [UIColor colorWithRed...]`

在`.m`文件的版本中，然后您将能够在包含该`SharedConstants.h`文件的任何其他类中使用它。

# java - 无法执行 Selenium 异步脚本

> ID：11646586
> 
> 赞同：10
> 
> 时间：2012-07-25T09:23:11.623
> 
> 标签：java, selenium-webdriver

为什么我在尝试执行异步脚本时遇到 selenium 2.25.0 异常。

```
//导航到我的测试页面。

字符串脚本=“var回调=参数[arguments.length - 1];” +
                "getResult(回调)";

对象结果 = ((JavascriptExecutor)driver).executeAsyncScript(script, "");

System.out.println(结果);

```

测试页面包含以下脚本：

```
变量结果=真；
函数获取结果（回调）{
    window.setTimeout(function(){callback(true);}, 3000);
}

```

这会引发异常：

```
失败：testSeleniumAsync
org.openqa.selenium.TimeoutException：脚本执行失败。脚本： var callback = arguments[arguments.length - 1];getResult(callback);
 2 毫秒后等待异步脚本结果超时（警告：服务器未提供任何堆栈跟踪信息）
命令持续时间或超时：11 毫秒
构建信息：版本：'2.25.0'，修订：'17482'，时间：'2012-07-18 22:18:01'
系统信息：os.name：'Linux'，os.arch：'amd64'，os.version：'3.2.0-27-generic'，java.version：'1.6.0_26'
驱动程序信息：driver.version：RemoteWebDriver
会话 ID：6347b507cf22b6c2d3312937a82a0a02
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)

```

如果我从脚本中删除 setTimeout 并调用回调它就可以工作。但这不是我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-28T14:20:29.740

API 在 2 毫秒内超时，这很奇怪。

我猜脚本超时配置不正确（<= 0sec）。由于您的窗口超时发生在 3 秒后，因此请在拨打电话之前尝试将脚本超时设置为大于 3 秒的某个值。

像这样：

```
driver.manage().timeouts().setScriptTimeout(5, TimeUnit.SECONDS); 
```

那可能行得通。

# c# - ManualResetEvent 的问题没有一致地释放所有等待的线程

> ID：11646590
> 
> 赞同：3
> 
> 时间：2012-07-25T09:23:18.350
> 
> 标签：c#, multithreading, .net-3.5, manualresetevent

我正在尝试实现一个使用简单缓存来保存从内部服务检索到的数据的类。我正在使用 ManualResetEvent 来阻止多个线程，这些线程可能会尝试同时刷新缓存的数据，第一个线程成功地向其他线程发出信号，一旦通过调用 Set() 然后 Reset() 检索到数据就继续。在测试时，我注意到有时所有线程都被释放，有时 1 个或多个线程没有被释放并且被超时，几乎就像我在所有线程被释放之前调用 Reset 一样。有人可以解释我做错了什么吗？

我已经包含了下面代码的精简版本。

```
 private bool _updating;
    private const int WaitTimeout = 20000;
    private DateTime _lastRefresh;
    private object _cacheData;
    private readonly ManualResetEvent _signaller = new ManualResetEvent(false);

private void RefreshCachedData()
        {
            Console.WriteLine("ThreadId {0}: Refreshing Cache", Thread.CurrentThread.ManagedThreadId);
        if (_updating)
        {
            Console.WriteLine("ThreadId {0}: Cache Refresh in progress, waiting on signal.", Thread.CurrentThread.ManagedThreadId);

            // another thread is currently updating the cache so wait for a signal to continue
            if (!_signaller.WaitOne(WaitTimeout))
                Console.WriteLine("ThreadId {0}: Thread timed out ({1}s) waiting for a signal that the cache had been refreshed",
                    Thread.CurrentThread.ManagedThreadId,WaitTimeout);

            Console.WriteLine("ThreadId {0}: Signal recieved to use refreshed cache.", Thread.CurrentThread.ManagedThreadId);
        }
        else
        {
            try
            {
                _updating = true;

                var result = _requestHandler.GetNewData();

                if (!result.Success)
                {
                        Console.WriteLine("Failed to retrieve new data.");
                }
                else
                {
                    // switch the cache with the new data
                    _cacheData = result.Data;

                    Console.WriteLine(
                        "ThreadId {0}: Cache refresh success.",
                        Thread.CurrentThread.ManagedThreadId);
                    Thread.Sleep(8000);
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine("Error occured: {0}", ex);
            }
            finally
            {
                // Set the refresh date time regardless of whether we succeded or not
                _lastRefresh = DateTime.Now;
                _updating = false;

                // signal any other threads to to carry on and use the refreshed cache
                Console.WriteLine("ThreadId {0}: Signalling other threads that cache is refreshed.", Thread.CurrentThread.ManagedThreadId);
                _signaller.Set();
                _signaller.Reset();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:15:22.393

看起来您的线程在重置之前没有从 ResetEvent 中释放。

您可以通过创建事件打开并让第一个线程进入您的方法重置它来解决问题。

或者，您可以通过执行以下操作来避免 ManualResetEvent 行为的变幻莫测：

```
private object _latch = new object();
private bool _updating;

private void UpdateIfRequired() 
{
    lock (_latch) 
    {
        if (_updating) 
        {
            //wait here and short circuit out when the work is done
            while (_updating)
                Monitor.Wait(_latch);

            return;
        }

        _updating = true;
    }

    //do lots of expensive work here

    lock (_latch)
    {
        _updating = false;
        Monitor.PulseAll(_latch); //let the other threads go
    }
} 
```

查看此页面以获得有关其工作原理的详细说明[http://www.albahari.com/threading/part4.aspx#_Signaling_with_Wait_and_Pulse](http://www.albahari.com/threading/part4.aspx#_Signaling_with_Wait_and_Pulse)

# csv - 参数化的junit测试

> ID：11646592
> 
> 赞同：1
> 
> 时间：2012-07-25T09:23:19.733
> 
> 标签：csv, junit, junit4

我有一个带有许多变量的 jUnit4 测试用例。我从外部 csv 文件中读取了这些变量。我想要的是测试将为文件中的每一行输入参数运行一次。我认为这可以通过使用@Parametrized 来完成。

我不确定如何...

现在我有这样的东西......

```
@Test
...
readFromCSV(filename);
String carName = varFromFile[0];
selectItemFromList(fieldName, carName); 
```

carName 是 csv 文件中的一条记录。我应该如何将其更改为从文件中获取 carName 的多个条目，并为每个条目运行一个测试？

**编辑：** 还有两件事。从文件读取看起来像这样

```
 CSVReader reader = new CSVReader(new FileReader("yourfile.csv"), ';');
    String [] nextValue;
    String [] header = reader.readNext();
    System.out.println(header[0] + " : " + header[1] + "etc...");
    while ((nextValue = reader.readNext()) != null) {
        System.out.println(nextValue[0] + " : " + nextValue[1] + "etc...");
    } 
```

参数化测试...

```
@RunWith(value = Parameterized.class)
public class testParametrized {

     private final TestParameters parameters;

     public static class TestParameters {
         String recId;
         String carName;
     }

     public testParametrized(TestParameters parameters) {
        this.parameters = parameters;
        System.out.println(parameters);
     }

     @Parameters
     public static Collection<Object[]> data() throws Exception {
       Object[][] data = new Object[][] { 
               { new TestParameters() }, 
               { new TestParameters() }
               };
       return Arrays.asList(data);
     }

     @Test
     public void pushTest() {
       System.out.println("Parameters : " + parameters);
     }

} 
```

**如何连接两者以进行从 csv 文件获取参数的测试？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:49:19.180

这工作正常

```
private TestParameters parameters;

public static class TestParameters {
//variables
}

public myTest(TestParameters parameters) {
    this.parameters = parameters;
}

@Parameters
public static Collection<Object[]> data() throws Exception {
    Collection<Object[]> parametersProvided = new ArrayList<Object[]>();
    String[][] datas = readFromCSV("data.csv");
    for (String[] nextValue : datas) {
        TestParameters testContainer = new TestParameters();
        //variables
        //
        parametersProvided.add(new Object[] { testContainer });
    }
    return parametersProvided;
}

@Test
public void pushTest() {
    System.out.println("Parameters : " + parameters);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:33:55.863

看一下这个：

```
@RunWith(org.junit.runners.Parameterized.class)
public class Test {

    private final TestParameters parameters;

    public static class TestParameters {
        int parameter1;
        String parameter2;
    }

    @Parameters
    public static Collection<Object[]> data() {
            // you can read you csv file here 
        return Arrays.asList(new Object[] { new TestParameters() }, new Object[] { new TestParameters() });
    }

    public Test(TestParameters parameters) {
        this.parameters = parameters;
        System.out.println(parameters);
    }

    @org.junit.Test
    public void test1() {
        System.out.println("test1: " + parameters);
    }
}

} 
```

此数据方法（使用@Parameters 注释）必须返回构造函数参数数组的集合，并且对于此集合中的每个条目，将创建测试类的新实例并执行测试

# c++ - 通过在QT QML中单击鼠标重复矩形

> ID：11646597
> 
> 赞同：0
> 
> 时间：2012-07-25T09:23:43.273
> 
> 标签：c++, qt, sdk, qt4, qml

似乎无法在鼠标 onReleased 中使用重复！？我该怎么做？我想在一些已经定义的矩形边缘上显示 4 个圆圈？

```
onReleased:{
    Repeater {
    id: repeatEdirPattern
    model: editParentPositionList
    delegate: editPatternComponent
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:16:41.377

`MouseArea.onReleased``MouseArea.released`接受 JS 函数的定义（发出 SIGNAL时要调用的 SLOT ）。您不能在其中放入任意 QML 声明性定义。

要执行您需要的操作，您必须`Repeater`在`Component`Item 中定义您的，然后在释放鼠标时创建该组件，调用[Component.createObject](http://qt-project.org/doc/qt-4.8/qml-component.html#createObject-method)方法。

另一种简单的方法是简单地隐藏 4 个圆圈（将它们的不透明度设置为 0），直到释放鼠标，然后将它们显示出来。无论如何，这不适合许多情况。

# c# - Asp.net MVC - 路由中的默认值

> ID：11646602
> 
> 赞同：2
> 
> 时间：2012-07-25T09:23:56.477
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-routing

我指定了以下路线：

```
routes.MapRoute(
            "myRoute1", 
            "{controller}/{action}/{id}", 
            new { controller = "Home", action = "Index", id = UrlParameter.Optional });

routes.MapRoute(
             "myRoute2", 
             "public/{controller}/{action}/{id}", 
              new { controller = "PublicHome", action = "Index", id = UrlParameter.Optional }); 
```

并希望以下网址可以正常工作

```
[http://localhost:58658/public] 
```

由于在`myRoute2`for `[/public]`url 中，我为控制器和操作指定了默认值，但这似乎不起作用。有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:26:35.100

```
routes.MapRoute(
            "myRoute1", 
            "public/{controller}/{action}/{id}", 
            new { controller = "PublicHome", action = "Index", id = UrlParameter.Optional }); 
```

安装[RouteDebugger](http://nuget.org/packages/RouteDebugger)。这将告诉您对于给定的 url，您的路线是否会被命中。

如果您匹配多条路线，则将处理第一个路线。[RouteDebugger](http://nuget.org/packages/RouteDebugger)将显示所有匹配项。您可以适当地重新排序它们。

如果 ROuteDebugger 在 404 页面上不起作用，请打开自定义错误。例子：

```
<customErrors mode="On" defaultRedirect="err/index">
  <error statusCode="404" redirect="err/notfound" />
</customErrors>` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T10:22:25.787

更改路由声明的顺序，您的第一个（默认）路由匹配 url 并搜索 PublicController。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:26:14.287

您不应该在您的路线中将大括号放在 public 周围，因为它不是参数。

# .htaccess - .htaccess 重定向一些参数

> ID：11646606
> 
> 赞同：0
> 
> 时间：2012-07-25T09:24:13.773
> 
> 标签：.htaccess, redirect, parameter-passing

我现有的链接结构是

```
http://www.domain.com/compare-smart-phone/?compare_products=SP0006++SP0002++&count_products=2&prawns-details_length=10&chk_compare=SP0006&chk_compare=SP0002&btn_compareproducts=Compare 
```

我可以通过传递所有参数来重定向。但我只想将几个参数传递给新 URL。

我想将此重定向到

```
http://www.domain.com/smart-phone/?compare_products=SP0006++SP0002++ 
```

请帮助我为此编写重定向规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:27:41.370

将此添加到您的 htaccess 文件的文档根目录中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^compare_products=([^&]+)
RewriteRule ^compare-smart-phone/?$ /smart-phone/?compare_products=%1 [R=301,L] 
```

# android - 如何在android中改变方向时继续播放rtsp视频

> ID：11646608
> 
> 赞同：-2
> 
> 时间：2012-07-25T09:24:16.613
> 
> 标签：android

> **可能重复：**
> [如何在 android 中更改方向时继续视频播放](https://stackoverflow.com/questions/11629556/how-to-continue-video-play-while-orientation-change-in-android)

我只是在android默认播放器上播放rtsp视频。Halfly，当我将方向更改为横向时，它从头开始流式传输。我怎么能继续播放。我在清单文件上给出了androidconfig =“orientation”。但仍然发生相同.我还需要做什么？

我的代码：

私有字符串 vSource="http://commonsware.com/misc/test2.3gp";

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    // sets the Bundle
    super.onCreate(savedInstanceState);
    // sets the context
    setContentView(R.layout.main);
    myVideoView= (VideoView)findViewById(R.id.vview);
       myVideoView.setVideoURI(Uri.parse(vSource));
       myVideoView.setMediaController(new MediaController(this));
       myVideoView.requestFocus();
       myVideoView.start();

}

public void onSaveInstanceState(Bundle outState){

    mStartTime = myVideoView.getCurrentPosition();
    outState.putInt("restartTime", mStartTime);
    super.onSaveInstanceState(outState);
}
 @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
      super.onRestoreInstanceState(savedInstanceState);
      myInt  = savedInstanceState.getInt("restartTime");

 }

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

      myVideoView.seekTo(myInt);

      myVideoView.start();

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:33:20.930

您可以将视频的实际进度存储在`onSaveInstanceState`（在活动被破坏时调用，例如屏幕旋转时），然后将其恢复为`onRestoreInstanceState`.

# delphi - 在过程和函数中声明参数的不同方式

> ID：11646615
> 
> 赞同：2
> 
> 时间：2012-07-25T09:24:55.180
> 
> 标签：delphi

我注意到不同的代码以与我不同的方式声明参数，我想知道这样做是否有特定的原因，或者是否是一种偏好。

假设我写了这个函数（只是一个不同参数的例子）

```
function DoSomething(AHeight, AWidth: Integer; R: TRect): Boolean
begin
  //
end; 
```

如果这样声明，这有什么不同：

```
function DoSomething(var AHeight, AWidth: Integer; const R: TRect): Boolean
begin
  //
end; 
```

我知道一个变量是可读/写的，而一个常量是只读的，但是以这种方式声明参数有什么不同呢？

对我来说，这两个函数都在寻找调用代码来提供高度、宽度和矩形，但是第二个函数使它看起来像是在声明新变量。

我有一种感觉，这将是一个直截了当的答案，我觉得问起来很傻，但我必须知道有什么区别，如果有的话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:31:31.530

该[文档](http://docwiki.embarcadero.com/RADStudio/en/Parameters_%28Delphi%29#Value_and_Variable_Parameters)非常清楚地解释了这一点：

> 大多数参数要么是值参数（默认），要么是变量（var）参数。值参数通过值传递，而可变参数通过引用传递。要了解这意味着什么，请考虑以下函数：
> 
> ```
> function DoubleByValue(X: Integer): Integer;   // X is a value parameter
> begin
>   X := X * 2;
>   Result := X;
> end;
> 
> function DoubleByRef(var X: Integer): Integer;  // X is a variable parameter
> begin
>   X := X * 2;
>   Result := X;
> end; 
> ```
> 
> 这些函数返回相同的结果，但只有第二个 - DoubleByRef 可以更改传递给它的变量的值。假设我们这样调用函数：
> 
> ```
> var
>   I, J, V, W: Integer;
> begin
>   I := 4;
>   V := 4;
>   J := DoubleByValue(I);   // J = 8, I = 4
>   W := DoubleByRef(V);     // W = 8, V = 8
> end; 
> ```
> 
> 执行此代码后，传递给 DoubleByValue 的变量 I 具有我们最初分配给它的相同值。但是传递给 DoubleByRef 的变量 V 具有不同的值。
> 
> 值参数的作用就像一个局部变量，它被初始化为过程或函数调用中传递的值。如果您将变量作为值参数传递，则过程或函数会创建它的副本；对副本所做的更改对原始变量没有影响，并且在程序执行返回给调用者时丢失。
> 
> 另一方面，变量参数的作用类似于指针而不是副本。在程序执行返回调用者并且参数名称本身超出范围后，对函数或过程主体内的参数所做的更改仍然存在。
> 
> 即使在两个或多个 var 参数中传递相同的变量，也不会制作副本。这在以下示例中进行了说明：
> 
> ```
> procedure AddOne(var X, Y: Integer);
> begin
>   X := X + 1;
>   Y := Y + 1;
> end;
> 
> var I: Integer;
> begin
>   I := 1;
>   AddOne(I, I);
> end; 
> ```
> 
> 这段代码执行后，I 的值为 3。

* * *

我建议您将[Delphi 语言指南](http://docwiki.embarcadero.com/RADStudio/en/Delphi_Language_Guide_Index)的链接添加到浏览器的书签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:32:11.717

[这里](http://www.delphibasics.co.uk/Article.asp?Name=Routines)有一个很好的讨论，但基本上，没有`var`，参数是按值传递的，而使用`var`，参数是按引用传递的。

当通过值传递参数时，会生成参数的副本，并将该副本提供给函数。对副本的任何更改都不会传播到单独的原始文件。

当通过引用传递参数时，该函数将获得对原始的引用，因此即使在进行调用之后，对副本的任何更改都将可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:37:06.307

参数可以是 var、const、out 和 'none'

通常，函数可以更改参数，但不会更改调用参数。

```
var
  x,y : Integer;
procedure Text(a: Integer);
begin
  x := a;
  a := 1;
end;
begin
  x := 10;
  y := 20;
  Test(y);
  // x = 20; y = 20;
end. 
```

使用 var 参数，更改会影响调用参数。

```
var
  x,y : Integer;
procedure Text(var a: Integer);
begin
  x := a;
  a := 1;
end;
begin
  x := 10;
  y := 20;
  Test(y);
  // x = 20; y = 1;
end. 
```

一个 const 参数，不能更改。

```
var
  x,y : Integer;
procedure Text(const a: Integer);
begin
  x := a;
  a := 1; // ERROR!
end;
begin
  x := 10;
  y := 20;
  Test(y);
  // Does not compile
end. 
```

仅写入输出参数。

```
var
  x,y : Integer;
procedure Text(out a: Integer);
begin
  x := a;
  a := 1;
end;
begin
  x := 10;
  y := 20;
  Test(y);
  // x = undefine y = 1;
end. 
```

# jquery - 如何停止jquery回调函数？

> ID：11646617
> 
> 赞同：3
> 
> 时间：2012-07-25T09:25:03.820
> 
> 标签：jquery, function, callback

我有 2 个 html 元素：A 和 B，这是 jquery 代码：

```
$('A').click(function(){
    $('B').click(function(){
        console.log("hello");
    })
}) 
```

当我单击 A 然后单击 B 时，它会显示“你好”，这很好。但是当我再次单击 A 然后单击 B 时，这一次它显示了两个“你好”，这是不可取的。我只想要一个你好。

我或多或少知道原因，可能是回调函数的结果：B在第一次点击后还在等待用户点击它。

现在我的问题是：如果我仍然想在“点击A”中“点击B”（“点击B”是“点击A”的回调函数），我该如何解决双重结果问题？

我是回调函数的新手，请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:30:38.670

您当前的代码并没有完全按照您的想法执行。每次单击`A`时，它都会向 中添加一个新的单击处理程序`B`。因此，如果您单击`A`3 次，您将获得 3 个单击处理程序`B`，所有这些处理程序都在单击 B 时执行。

一种解决方法是在 As click handler 中取消注册 Bs click handler，例如：

```
$('A').click(function(){
    // Ensure we only ever have one click-handler on B
    // by clearing existing handlers before adding our
    // new one.
    $('B').unbind('click').click(function(){
        console.log("hello");
    })
}) 
```

**但是，此代码具有删除所有**s 处理程序的副作用`B`，这是您可能不想要的。仅删除特定处理程序的更强大的版本是创建一个命名处理程序，而不是一个匿名处理程序，然后添加和删除它。这使您可以定位所需的特定处理程序。您也可以使用命名空间来执行此操作（请参阅[取消绑定](http://api.jquery.com/unbind/)的文档并查找“命名空间”）。

```
var helloHandlerForB = function() { console.log("hello"); };

$('A').click(function(){
    // Ensure we only ever have one click-handler on B
    // by clearing existing handlers before adding our
    // new one.
    $('B').unbind('click', helloHandlerForB).click(helloHandlerForB);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:54:00.930

问题是，每次连续点击都会`A`向您的`B`. 当您单击 时，这些处理程序中的每一个都会被执行`B`。所以如果你点击`A`十次，你就绑定了十个点击处理程序`B`:-D

为了避免其他解决方案的问题，不断取消和重新绑定以及都令人讨厌的全局变量，请改用这个干净的解决方案：

```
$('A').one("click", function(){
    $('B').click(function(){
        console.log("hello");
    })
}) 
```

通过使用**[`.one()`](http://api.jquery.com/one/)**而不是单击，单击事件`A`仅触发一次，将一个单击事件处理程序绑定到您的元素`B`。

**[示例小提琴](http://jsfiddle.net/poikl/YvyWh/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:34:38.397

您还可以创建一个布尔值来检查是否单击了 a。

示例：[小提琴](http://jsfiddle.net/YvyWh/)

```
var aIsClicked = false; //boolean

$('#A').click(function(){
   $('#log').html('clicked on A');
   aIsClicked = true;
});

$('#B').click(function(){
   if(aIsClicked) //check if a was clicked
   {
       $('#log').html('clicked on B and A was clicked');
       alert("hello");
   }
    else
    {
        $('#log').html('clicked on B and A was not clicked');
    }
});​ 
```

​</p>

# c# - C#：一个在运行时根据控件大小自动调整字体的函数？

> ID：11646619
> 
> 赞同：5
> 
> 时间：2012-07-25T09:25:14.087
> 
> 标签：c#, .net, winforms

在花费大量时间搜索此功能后：

我想如果有人能给我最好的方法，那就太好了。是否有可以根据任何窗体控件（标签/按钮）的大小动态调整字体大小的功能？

这是我在网上研究后得到的，不幸的是，当控件重新调整大小时，这些代码在运行时给出了很多异常。

```
public void textAdjustment()
    {
        try
        {
            while (this.label.Width < System.Windows.Forms.TextRenderer.MeasureText(this.label.Text,
               new Font(this.label.Font.FontFamily, this.label.Font.Size, this.label.Font.Style)).Width)
            {
                this.label.Font = new Font(this.label.Font.FontFamily, this.label.Font.Size - 1.0f, this.label.Font.Style);
            }
            if (this.label.Width > System.Windows.Forms.TextRenderer.MeasureText(this.label.Text, new Font(this.label.Font.FontFamily, this.label.Font.Size, this.label.Font.Style)).Width)
            {
                this.label.Font = new Font(this.label.Font.FontFamily, this.label.Font.Size + 0.1f, this.tableLabel.Font.Style);
            }
            if (this.label.Height < System.Windows.Forms.TextRenderer.MeasureText(this.label.Text, new Font(this.label.Font.FontFamily, this.label.Font.Size, this.label.Font.Style)).Height)
            {
                this.label.Font = new Font(this.label.Font.FontFamily, this.label.Font.Size - 0.6f, this.label.Font.Style);
            }
        }
        catch (Exception e)
        {
            this.label.Font = Control.DefaultFont;
        }
    } 
```

我不认为我解决这个问题的方法是正确的，有没有人知道即使在运行时增加和减少控件大小也会调整字体大小基础的方法？我个人认为这篇文章将是一个非常好的帖子，供其他人参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T06:45:06.863

这是一种非常麻烦的代码，字体的正确大小与控件的大小没有很好的相关性。这也不是一件常见的事情，UI 应该在任何窗口大小下都是可读且一致的。否则，您会看到什么样的例外情况非常不清楚。明显的错误是忘记关闭标签的 AutoSize 属性并且没有使标签足够高。一些代码可以玩，注意它只适用于标签。在粘贴此代码之前在表单上放置一个：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        label1.AutoSize = false;
        label1.Size = new Size(100, 60);
        label1.Text = "Autosize this";
        label1.Anchor = AnchorStyles.Left | AnchorStyles.Right;
        label1.Resize += new EventHandler(label1_Resize);
    }

    void label1_Resize(object sender, EventArgs e) {
        using (var gr = label1.CreateGraphics()) {
            Font font = label1.Font;
            for (int size = (int)(label1.Height * 72 / gr.DpiY); size >= 8; --size) {
                font = new Font(label1.Font.FontFamily, size, label1.Font.Style);
                if (TextRenderer.MeasureText(label1.Text, font).Width <= label1.ClientSize.Width) break;
            }
            label1.Font = font;
        }
    }

    protected override void OnLoad(EventArgs e) {
        label1_Resize(this, EventArgs.Empty);
        base.OnLoad(e);
    }
} 
```

它需要改进，MeasureText() 方法应该使用 Label 控件使用的 TextFormatFlags。但这就像发布的那样工作得很好。

# php - 单击复选框时立即更新 mysql 数据库

> ID：11646621
> 
> 赞同：1
> 
> 时间：2012-07-25T09:25:17.327
> 
> 标签：php, mysql

以前这是我的问题：

我想问当我通过将代码放在同一页面中“取消选中”具有相应ID的复选框时，是否可以立即“更新”数据库？

希望你们能明白我想说什么。任何帮助是极大的赞赏。谢谢。

过了一会儿，我设法让它以某种方式工作，但现在的问题是如何从复选框中获取我的 ID？我已经什么都想不出来了。

这是我的简短代码：

```
if (isset($_POST['product_new'])) {

$id=$_POST['product_id'];

    echo ("<script language='JavaScript'>
    window.alert('Title: ".$id."')
    window.location.href='product_listing.php'
    </script>");

}

<form name="testing" method="POST">

$select=mysql_query("select * from products_list ORDER BY id ASC");
while($row=mysql_fetch_array($select)){

echo "<table><tr>
<td>".$row['id']."</td>";
    if ($row['new_arrival'] == 'checked')
{ 
echo "<td><input type='hidden' name='product_id' value='".$row['id']."' />
<input type='checkbox' name='product_new' id='".$row['id']."' checked='checked' onclick='document.product_listing.submit();' />";
}
else
{ 
echo "<td><input type='hidden' name='product_id' value='".$row['id']."' />
<input type='checkbox' name='product_new' id='".$row['id']."' onclick='document.product_listing.submit();' />";
}
echo "</tr></table>";

}

</form> 
```

我不知道为什么我一直在数据库中获取最新的 ID，而不是获取选定的 ID。有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:29:11.410

jQuery + Ajax 将为您解决问题。

教程： [http ://www.w3schools.com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

单击复选框后，运行一个函数以查看复选框的状态，选中或未选中。如果选中，运行 $.ajax() 函数，它将复选框 id 发送到 php 页面。

# iphone - iOs 中的“非虚拟 thunk to ....”错误

> ID：11646622
> 
> 赞同：2
> 
> 时间：2012-07-25T09:25:18.143
> 
> 标签：iphone, gcc, linker, thunk

在我的 iPhone 应用程序中，我收到以下错误：

```
"non-virtual thunk to metaio::UnifeyeMobileiPhone::UnifeyeMobileiPhone()" 
```

发生错误的地方是：

```
- (void)dealloc
{
    // Tear down context.
    if ([EAGLContext currentContext] == context)
        [EAGLContext setCurrentContext:nil];

    // delete unifeye instance
    if( unifeyeMobile )
    {
        delete unifeyeMobile; //here got the error
        unifeyeMobile = NULL;
    }

    [context release];

    [glView release];
    [super dealloc];
} 
```

我用谷歌搜索了这个问题的解决方案，我在这个[链接](https://stackoverflow.com/questions/2544152/mac-gcc-non-virtual-thunk-error)中得到了一些东西。它说这个错误是一个“编译器错误”。我已将调试模式更改为发布并进行了测试，但仍然存在问题。任何想法？我只在 iPhone 4S 上遇到这个问题。在 iPhone 3GS 上它工作正常。

# oracle-adf - ADF 安全为应用程序角色禁用 RichCommandButton

> ID：11646627
> 
> 赞同：0
> 
> 时间：2012-07-25T09:25:27.417
> 
> 标签：oracle-adf

我正在将 Oracle ADF 与 JDeveloper 11g 第 1 版一起使用，我很想为各个组配置应用程序角色。让我解释一下，我有以下情况，我正在寻找一些想法：我想启用提交（RichCommandButton）Enterprise only 某些角色，我该怎么办？我决定在页面的 BackingBean get 方法中做一个 if 语句，对吗？进行的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:36:58.343

检查角色以确定是否允许某个操作是可以的，但可能会导致您的应用程序对特定角色具有硬编码的依赖关系。如果您决定将来添加角色怎么办？

更好的方法是检查权限并为角色提供权限。这样，您的策略就不会与特定角色绑定。但是，这种方法要复杂得多，因为您需要一种向角色授予权限的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:21:47.520

# {securityContext.userInRole ['角色列表']}

￼#{securityContext.userInAllRoles ['角色列表']}

来自文档： [http](http://docs.oracle.com/cd/E16162_01/web.1112/e16182/adding_security.htm) ://docs.oracle.com/cd/E16162_01/web.1112/e16182/adding_security.htm 和 [http://adfcodebits.blogspot.com/2010/04/bit-12-accessing-authenticated-用户.html](http://adfcodebits.blogspot.com/2010/04/bit-12-accessing-authenticated-users.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T05:43:00.563

实际上检查应用程序角色是可以的，因为它是应用程序中的抽象。但是，我同意权限（您可以创建自定义 ResourcePermission）是一种更好的方法，因为它允许您稍后将提交操作授予其他角色（请记住，企业管理器是 ADF 的管理工具，它还允许更改安全授权）。

显然您是 ADF 和 ADF Security 的新手，因此请观看以下视频录制，我在其中对 ADF Security 进行了端到端的解释

[http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/AdfSecurity/AdfSecurity.html](http://download.oracle.com/otn_hosted_doc/jdeveloper/11gdemos/AdfSecurity/AdfSecurity.html)

另一个有用的资源是

[http://www.oracle.com/technetwork/issue-archive/2012/12-jan/o12adf-1364748.html](http://www.oracle.com/technetwork/issue-archive/2012/12-jan/o12adf-1364748.html)

它总结了 ADF 安全性（包括前面提到的 ResourcePermission）并允许您下载示例应用程序以查看和复制）

坦率

# javascript - 单击按钮后如何在javascript中提取textarea的id（在这种情况下是动态的）？

> ID：11646628
> 
> 赞同：1
> 
> 时间：2012-07-25T09:25:28.783
> 
> 标签：javascript, jquery, html, jsp

我在生成动态元素的 a 中有以下给定`JSP`代码：`form``div`

```
<div class="ans_panel<%=qcount%>">
    <textarea class="text_<%=qcount%>" id="add_answer<%=qcount%>" rows="0" cols="80"></textarea>

    <input type="hidden" id="hiddenAns" value="<%=qcount%>" />
    <br>
    <br>

    <button class="post<%=qcount%>" onclick="addAns();">Post Answer</button>&nbsp;&nbsp;&nbsp;

    <button class="cancel<%=qcount%>">Cancel</button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:34:52.873

只需将其传递给 javascript 例程；

```
<button class="post<%=qcount%>" onclick="addAns('<%=qcount%>');">Post Answer</button>
...
function addAns(id) {
   var el = $("#text_" + id);
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:34:40.853

它应该很简单：

```
function addAns(el) {
    alert(el.id);
    document.getElementById("hiddenSubmitAns").value = "AddSubmit";
    var text = null;
    var i = 0;
    for (i = 0; i < 3; i++) {
        text = $("#add_answer" + i).val();
        if (text != "") {
            j = i;
            alert(text);
            break;
        }
    }
    text = text.replace(/(^\s*)|(\s*$)/g, "");
    if (text == "") {
        alert("Please enter the answer");
        document.getElementById("#add_answer" + i).select();
        document.getElementById("#add_answer" + i).focus();
        return false;
    }
    document.abc.submit();
    return true;
}

<div class="ans_panel<%=qcount%>">
     <textarea class="text_<%=qcount%>" id="add_answer<%=qcount%>" rows="0" cols="80"></textarea>
     <input type="hidden" id="hiddenAns" value="<%=qcount%>" />
     <br>
     <br>
     <button class="post<%=qcount%>" onclick="addAns(this);">Post Answer</button>&nbsp;&nbsp;&nbsp;
     <button class="cancel<%=qcount%>">Cancel</button>
</div> 
```

请注意，我已经添加了一个参数`addAns`，然后将您更新`onclick`为 pass `this`。

然后我正在提醒`el.id`，或者`alert($(el).attr('id'));`如果您使用 jQuery，您可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:35:27.290

页面上是否有超过 1 个文本区域？

如果没有，那么您可以使用它访问它`$("textarea")`并使用它获取它的 ID`$("textarea").attr("id")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:35:28.910

您可以使用`jQuery('[attribute^="value"]')`，它选择具有指定属性的元素，其值恰好以给定字符串开头。

```
var theTextArea = $('textarea[id^="add_answer"]'); 
```

然后

```
var theId = theTextArea.attr("id"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:35:52.000

```
var elements = document.getElementsByTagName('textarea');
for(var i = 0; i < elements.length; i++) {
    if(elements[i].class.indexOf('text') === 0) {
         return elements[i].id;
    }
} 
```

# arm - ARM-NEON 用于视频格式转换

> ID：11646629
> 
> 赞同：0
> 
> 时间：2012-07-25T09:25:31.210
> 
> 标签：arm, simd, neon

我正在尝试使用基于 ARM 的嵌入式系统（Gumstix Overo）的 NEON 来加速一些视频帧转换。源为单色（Y12 或 Y10），目标为 RGB565、RGB888 或 RGB32。是否有一些特定的技术/技巧可供学习和使用 ARM NEON 来加速这种转换并将其与标准 C 实现进行基准测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T01:46:36.837

您最好了解一下 Neon 架构及其编译器支持。您可以从阅读[本文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CG4QFjAA&url=http://www.arm.com/files/pdf/neon_support_in_the_arm_compiler.pdf&ei=DaEQUM-KIcKdiQKd6YGIAQ&usg=AFQjCNHa-3ShhDoemknhutIwdN-rO2s2vw&sig2=_MCsEBd-nWRdPn0WJ9lhlg)开始。这对新用户来说非常有用。

# jsf - 如何捕捉 FacesFileNotFoundException

> ID：11646633
> 
> 赞同：0
> 
> 时间：2012-07-25T09:25:44.213
> 
> 标签：jsf, http-status-code-404, deltaspike

虽然我做了这个[页面](https://stackoverflow.com/questions/5219809/how-to-catch-a-facesfilenotfoundexception)上写的，但我仍然无法解决这个问题。问题是 web.xml 中的更改不会影响应用程序。顺便说一句，我正在使用 ExceptionHandler （使用 org.jboss.solder.exception.control.HandlesExceptions.HandlesExceptions 注释）。我试图在我的 ExceptionHandler 类中添加一个方法，但我无法导入 FacesFileNotFoundException。所以这是我的问题，虽然应用程序抛出了FacesFileNotFoundException，为什么我不能在页面中导入FacesFileNotFoundException异常类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:03:46.193

您必须在web.xml中正确添加错误页面，您必须放置完整的异常并且抛出异常时重定向的目标位置是html而不是xhtml，这非常重要，它必须是一些东西像这样

```
<error-page>
    <exception-type>com.sun.faces.context.FacesFileNotFoundException</exception-type>
    <location>/pagenotfound.html</location>
</error-page> 
```

我不知道如何使控制台上未显示异常，但这种方式可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:49:02.507

> 我试图在我的 ExceptionHandler 类中添加一个方法，但我无法导入 FacesFileNotFoundException。所以这是我的问题，虽然应用程序抛出了FacesFileNotFoundException，为什么我不能在页面中导入FacesFileNotFoundException异常类？

该`com.sun.*`包特定于 JSF 实现 Mojarra。显然，您在编译时类路径中有 JSF API JAR 文件，但没有 JSF 实现 JAR 文件。

这应该不是什么大问题。您应该尽量不要让您的 Web 应用程序依赖于特定的 JSF 实现。您应该尽量避免导入/引用特定于实现的类。`FacesFileNotFoundException`extends from ，`java.io.FileNotFoundException`所以我建议改为导入它。不要忘记打开包装`FacesException`。有关一些提示，另请参阅[OmniFaces](http://omnifaces.org)的源代码[`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)和[`FacesExceptionFilter`](http://showcase.omnifaces.org/filters/FacesExceptionFilter).

如果您绝对需要导入特定于 Mojarra 的`FacesFileNotFoundException`代码并希望您的代码能够编译，那么您应该将 JSF 实现 JAR 文件添加到编译时类路径。具体如何做到这一点取决于所使用的 IDE。在 Eclipse 中，您应该在*Build Path*中从 appserver 引用 JSF 实现 JAR 文件。

请注意，`ExceptionHandler`默认情况下， *JSF*对`web.xml`.

# jquery - jquery选择具有attr值的tbody

> ID：11646634
> 
> 赞同：2
> 
> 时间：2012-07-25T09:25:44.943
> 
> 标签：jquery, jquery-selectors

给定一张桌子

```
<table id="t1" class="dataList dataTable">
  <thead><tr><td>a</td><td>b</td><td>c</td></tr></thead>
  <tbody role="alert" aria-live="polite" aria-relevant="all">
    <tr><td>1</td><td>2</td><td>3</td></tr>
    <tr><td>4</td><td>5</td><td>6</td></tr>
  </tbody>
</tfoot> 
```

如何选择`<tr>`with `<tbody>`role="alert" 的？

原因是我想对这些选择做点什么。使用 jquery.datatables 插件，这些 tr 取决于“dataTables_length”的选择。换句话说，如果安装了插件，只会选择那些可见的行。

TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:27:32.427

尝试

```
$('tbody[role="alert"] tr') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:35:24.303

```
$('#t1 > tbody[role="alert"] tr') 
```

它选择角色='alert' 的 tbody 元素，它们是#t1 的直接后代。

或者，您可以使用：

```
$('tbody[role="alert"] tr', '#t1'); 
```

在#t1 的上下文中查找所有具有role='alert' 的tbody 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:36:37.937

试试这个

```
$('table#t1>tbody[role="alert"] tr').css('background-color','#ddd'); 
```

# c# - 如何添加对 DataGridViewAutoFilter 的引用？

> ID：11646635
> 
> 赞同：1
> 
> 时间：2012-07-25T09:25:47.357
> 
> 标签：c#, visual-studio-2010, visual-c#-express-2010

我对 Windows 系统编程相当缺乏经验，现在我正在继续某人的工作，但是，在我可以构建项目之前，我需要摆脱警告：

```
The referenced component 'DataGridViewAutoFilter' could not be found. 
```

我想在 Microsoft Visual C# 2010 Express 中添加对 DataGridViewAutoFilter 的引用

但是，添加引用时它不在 .NET 列表中。我知道我可以[在这里](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=23459)下载它，但是我不确定如何处理它，因为它只是在一个 zip 文件中，而不是一个 dll 或可安装到我的系统上。我通过安装一些东西来修复所有其他依赖项，但在这种情况下不要做什么。

有人知道如何安装 DataGridViewAutoFilter 吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-21T13:52:03.673

安装步骤（添加参考）：

1.  [在此处](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=23459)下载 zip 文件项目

2.  提取拉链

3.  在 CS 或 VB 文件夹中打开解决方案文件**DataGridViewAutoFilter.sln**

注意：此解决方案是 Visual Studio 2005 版本 em .NET Framework 2.0

如果在 Visual Studio 2015 上打开（以防万一），需要打开**解决方案资源管理器 -> 解决方案 -> DataGridViewAutoFilter -> 属性（双击）**并将目标框架**.NET Framework 2.0**更改为**4.5.1**，重复此步骤到**DesignerSetupDemo**和**ProgrammaticSetupDemo**，保存全部，关闭解决方案 e 重新打开解决方案。

4.  现在，选择**调试**模式，项目**DesignerSetupDemo**并单击**开始**运行应用程序。这个应用程序，运行没有错误，没关系。

5.  打开**解决方案资源管理器 - 解决方案 -> DesignerSetupDemo -> 参考**这里是 DataGridViewAutoFilter。

如何检查，就可以安装？

6.  **右键单击**引用**并**选择**添加引用**...。查看**项目 -> 解决方案标记为 (x) DataGridViewAutoFilter**

答对了！您知道 DataGridViewAutoFilter 项目是功能参考。

**如何将 DataGridViewAutoFilter 项目构建到 DataGridViewAutoFilter.dll 文件？**

7.  **右键单击**DataGridViewAutoFilter 项目并选择**Build**

**DataGridViewAutoFilter.dll 文件在哪里？**

8.  DataGridViewAutoFilter ->**属性（双击）** 打开**构建 -> 输出 -> 输出路径 -> 浏览...**

在窗口中，**复制完整路径**（例如 - C:\Users\YourUser\Documents\Visual Studio 2015\Projects\Exemplos\DataGridViewAutoFilter\CS\DataGridViewAutoFilter\DataGridViewAutoFilter\bin\Debug）

**打开 Windows 探索并过去**C:\Users\Samir\Documents\Visual Studio 2015\Projects\Exemplos\DataGridViewAutoFilter\CS\DataGridViewAutoFilter\DataGridViewAutoFilter\bin\Debug （**这里是 DataGridViewAutoFilter.dll 文件**）

**如何在我的项目上安装添加引用 DataGridViewAutoFilter？**

9.  **将**DataGridViewAutoFilter.dll 文件复制**到您的项目文件夹**

10.  在**您的项目**上单击**引用-> 添加引用-> 浏览**在您粘贴文件的文件夹上选择 DataGridViewAutoFilter.dll。

11.  现在，在 DataGridView -> Edit Columns... -> Select Column -> 将 ColumnType **DataGridViewTextBoxColumn**更改为**DataGridView *AutoFilter* TextBoxColumn**

12.  构建并启动您的项目并测试该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:39:14.567

它似乎是您可以从 MS 下载并添加到您的项目中的外部程序集。请查看以下包含操作说明的线程：

[http://social.msdn.microsoft.com/Forums/zh/winformsdatacontrols/thread/b378e179-3ea6-42de-966e-f0c636891a9e](http://social.msdn.microsoft.com/Forums/zh/winformsdatacontrols/thread/b378e179-3ea6-42de-966e-f0c636891a9e)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T10:44:04.637

事实证明，我提供的下载链接是 ac# 项目的下载链接，该项目将在构建示例代码后生成 DataGridViewAutoFilter.dll

# javascript - 对 PHP 的 AJAX 调用不起作用

> ID：11646638
> 
> 赞同：-2
> 
> 时间：2012-07-25T09:25:55.410
> 
> 标签：javascript, jquery, ajax

```
function showEditDialog(regID){
        $.post("getGiftDetail.php", 
                {reg_id: regID },
                function(data) {});

} 
```

我正在用 Ajax 调用“getGiftDetail.php”，但是没有调用这个 php 文件。请帮我！为什么这不起作用？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-25T09:29:37.270

索引.html

```
<script>
    $(function(){
        function showEditDialog(regID){
            $.post("getGiftDetail.php", {reg_id: regID }, function(data) {});
        }
        showEditDialog(5);
    });
</script> 
```

并且不要忘记包含 jquery 并使用 firebug/developers 控制台

# html - HTML5 离线支持以及如何与后端数据库同步

> ID：11646644
> 
> 赞同：2
> 
> 时间：2012-07-25T09:26:13.243
> 
> 标签：html, offline-caching, offline-mode, offline-browsing

我是 HTML5 新手，如果我的问题对你来说听起来很愚蠢，我很抱歉。我想了解 HTML5 离线容量。目的是开发的应用程序将数据保存在本地数据库（浏览器）中，当应用程序在线时，会将更改发送到服务器进行同步，同样本地数据库将定期与远程数据库同步或服务器将更改推送到客户端。我正在阅读有关 HTML5 网络数据库的信息，但我发现它已被弃用。还有一种称为 IndexDB 的可用支持。谁能告诉我完成这项任务我应该关注哪一项？到目前为止，HTML5 有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T09:51:25.767

因为我不是 100% 确定你在追求什么。

以下是有关这些主题的一些优质阅读信息。

* * *

**存储**：

[Dive Into HTML5 Storage](http://diveintohtml5.info/storage.html)提供了很多关于 localStorage 的有用信息。

localStorage 的工作原理`key : value`是非常简单易用。

```
localStorage.setItem("key", "value");
localStorage.getItem("key"); 
```

* * *

**离线缓存：**

我建议阅读有关使用`appcache`.

[Dive Into HTML5 Offline](http://diveintohtml5.info/offline.html)在这方面提供了很多有用的信息。

* * *

**更新您的数据库：**

至于更新您的数据库，您需要将数据从 发送`client`到`server`最简单的方法是让您的服务器接受`HTTP POST`来自网页的 a。

看看[jQuery POST](http://api.jquery.com/jQuery.post/)。最好的方法可能是创建一个 localStorage`POST`数组和服务器数组。您可以查看将其格式化为[JSON](http://json.org/)或 XML 等。

您的 Web 服务器必须接受`HTTP POST`并具有处理从客户端提供的数据的逻辑。例如：将其添加到/更新您的服务器端数据库。

* * *

请注意，[Dive Into HTML5](http://diveintohtml5.info/)现在是开源的并且在[GitHub 上](https://github.com/diveintomark/diveintohtml5)

# java - MVC 复杂的业务逻辑职责

> ID：11646646
> 
> 赞同：0
> 
> 时间：2012-07-25T09:26:22.293
> 
> 标签：java, model-view-controller, object

我有一个关于 MVC 的小问题：例如，如果我有一个模型“视频”并且应用程序允许用户添加/删除喜欢的视频（例如处理数据库中的收藏夹）。实现它的正确方法是什么？

1.  Video 类具有**isFavourite()** / **addToFavourites()**方法。当调用模型访问数据库适配器并更新正确的值时。
2.  Video 和 VideosManager 都有 isFavourite() / addToFavourites() 调用。当某些方法调用**video.addToFavourites()**时，视频模型调用**VideoManager.addToFavourites(this)**
3.  只有 VideoManager 实现**isFavourite(Video)** / **addToFavourites(Video)**方法。当有人想要更改收藏夹时，直接调用 VideoManager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:30:20.020

为什么收藏夹也没有以一流的方式建模？

我将引入一个类来表示收藏夹并将其用作执行持久性的地方（可能通过委托给`VideoManager`您所描述的类）。

```
class Favourites {
   public void addFavourite(Video video);
   public bool removeFavourite(Video video);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:40:37.067

视频可以是特定用户的最爱。给视频类 isFavorite()/addToFavorite() 方法会导致这种关系错误。所以选项 1 和 2 不可行。

这似乎有利于选项 3。但我想补充一点。什么是视频管理器？用户应该负责管理她喜欢的视频，不是吗？

所以在我看来，应该有一个视频和用户的模型。视频视图可以让用户选择表示它是收藏夹。此操作调用一个控制器，从用户的收藏夹中添加/删除视频。

# iphone - 如何将 NSdata 转换为字节数组？

> ID：11646647
> 
> 赞同：1
> 
> 时间：2012-07-25T09:26:24.860
> 
> 标签：iphone, ios, xcode, ipad

> **可能重复：**
> [如何在 iPhone 中将 NSData 转换为字节数组？](https://stackoverflow.com/questions/724086/how-to-convert-nsdata-to-byte-array-in-iphone)

我有 20 个字节存储在中`NSData`，如何将这些数据转换为目标 c 中的字节数组？

# r - ggplot2 0.9.1：带条形图的对数 y 轴刻度

> ID：11646655
> 
> 赞同：0
> 
> 时间：2012-07-25T09:26:46.287
> 
> 标签：r, ggplot2

我正在尝试将条形图的 y 轴转换为对数刻度（即每个刻度之间的对数距离）。

一些虚拟数据：

```
DF <- data.frame(num=c(1,2,3),label=c("a","b","c")) 
```

我尝试了以下示例：

```
p <- ggplot(data=DF,aes(x=label,y=num)) + geom_bar() +
  scale_y_continuous(trans = 'log10',
                     breaks=trans_breaks("log10",function(x) 10^x),
                     labels=trans_format("log10",math_format(10^.x))) 
```

这仅记录转换标签，但不转换刻度：

```
p <- ggplot(data=DF,aes(x=label,y=num)) + geom_bar() + coord_trans(y="log10") 
```

这根本没有绘制任何东西：

```
p <- ggplot(data=DF,aes(x=label,y=num),y="log") 
```

也没有运气

我也阅读[了 0.9 过渡指南](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf) ，但这似乎也不起作用。

# 编辑：

我忘了包括一个我试过的例子：

p <- ggplot(data=DF,aes(x=label,y=num)) + geom_bar() + scale_y_log10()

这会产生以下警告：

警告消息：在 pretty(trans(x), n, ...) 中：产生了 NaN

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T09:53:01.587

如果你想做一个 log 10 规模使用

```
p + scale_y_log10() 
```

# java - 如何在 Eclipse 中添加新的 Findbug 规则或导入一组规则

> ID：11646663
> 
> 赞同：0
> 
> 时间：2012-07-25T09:27:08.183
> 
> 标签：java, eclipse, findbugs

我有一个 findbugs 的配置文件。我可以在 ant 脚本中使用它。我也想在eclipse中使用它。

是否可以通过在 Eclipse 中导入新规则集来更改 Findbugs 的规则集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T13:37:23.460

当您说“*配置文件*”时，您的意思是“[过滤文件](http://findbugs.sourceforge.net/manual/filter.html)”吗？

如果是这种情况，那么在eclipse中：

转到*Window --> Preferences --> Java --> FindBugs --> Filter files* (tab) --> 在“ **Include filter files** ”中选择“ **Add..** ”并选择您的 xml 配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:40:06.443

恐怕你不能。Eclipse 插件中的属性嵌入在属性文件中。

例如，对于 findbugs，您可以在文件中找到您的配置`my-project/.settings/edu.umd.cs.findbugs.core.prefs`。

如您所见，它包含 xml 的扁平化版本。

不幸的是，（目前）没有工具可以导入/导出配置。这可能是一个不错的功能请求！

M。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:47:59.483

我不知道 FindBugs 如何在 Eclipse 中保存其设置，但您也许可以使用[Workspace Mechanic](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)。它可以在工作区之间导入和导出几乎所有的 Eclipse 设置。

# sql - 在 MS-Access 中查询两个表？

> ID：11646664
> 
> 赞同：1
> 
> 时间：2012-07-25T09:27:12.737
> 
> 标签：sql, ms-access

有人可以帮助我吗，我必须比较两个表，我的经理想查看 Access 数据库中两个表之间的比较。两个表都包含 IP 电话、它们的类型、MAC 和分配给它们的站点 ID。我的经理想要以一种形式查看这些数据。我知道我可以用两个子表单来做到这一点，但是如果我可以用一个 sql 语句来做到这一点会更好，因为我知道它可以做到，但我只是愚蠢地这样做。我需要的是三列，第 1 列 = 手机类型，第 2 列 = 表 1 计数，第 3 列 = 表 2 计数：

```
Handset Type |TABLE 1 COUNT| TABLE 2 COUNT|
CISCO7911    | 100         | 50
CISCO7942    | 100         | 50 
```

我目前有这个只通过查询一个表来处理其中两个列，但是我将如何添加最后一列，我已经尝试过 UNION 但这会将数据添加到额外的行而不是另一列。

```
SELECT tbl_handsets.handset_type,
    Count(IIf(handset_site_id='12345',1,Null)) AS myCompany_Number
FROM tbl_Handsets
GROUP BY tbl_handsets.handset_type 
```

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:29:35.703

如果您告诉我们此查询将返回您想要的数据`Handset Type`并且`TABLE 1 COUNT`...

```
SELECT
    handset_type,
    Count(IIf(handset_site_id='12345',1,Null)) AS myCompany_Number
FROM tbl_Handsets
GROUP BY handset_type 
```

...并替换`tbl_Accenture`为返回您想要的内容`tbl_Handsets`和，然后构建一个使用这两个作为子查询的查询并将它们连接在一起。`FROM``Handset Type``TABLE 2 COUNT`

```
SELECT
    t1.handset_type,
    t1.myCompany_Number AS [TABLE 1 COUNT],
    t2.myCompany_Number AS [TABLE 2 COUNT]
FROM
    (
        SELECT
            handset_type,
            Count(IIf(handset_site_id='12345',1,Null))
                AS myCompany_Number
        FROM tbl_Handsets
        GROUP BY handset_type
    ) AS t1
    INNER JOIN
    (
        SELECT
            handset_type,
            Count(IIf(handset_site_id='12345',1,Null))
                AS myCompany_Number
        FROM tbl_Accenture
        GROUP BY handset_type
    ) AS t2
    ON t1.handset_type = t2.handset_type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:39:33.713

可能是它可以提供帮助，但我努力测试它。

如果您的表有一个代表phone_type_id的列，那么查询将更改为

```
SELECT tbl_handsets.handset_type,
    COUNT(*) AS Table1_Count,
    ( SELECT COUNT(*) FROM tbl_Accenture 
        WHERE tbl_Accenture.handset_type = tbl_handsets.handset_type
        AND  tbl_Accenture.handset_site_id  = '15017' ) 
    AS Table2_Count  
FROM tbl_Handsets
Where tbl_handsets.handset_site_id = '15017'
GROUP BY tbl_handsets.handset_type 
```

# c# - 在 ASP.NET 网页中打开 PDF

> ID：11646665
> 
> 赞同：4
> 
> 时间：2012-07-25T09:27:13.383
> 
> 标签：c#, asp.net, pdf

我想在 ASP.NET aspx 页面中打开 PDF。我不想导出 pdf 文件。

只需在 ASPX 页面中写入 pdf 文件，就像我们将字节写入图像控件一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T10:08:56.687

我得到了答案，太简单了。

我已经在这里回答了。

```
Response.Clear();
string filePath = "myfile.pdf";
Response.contentType = "application/pdf";
Response.WriteFile(filePath);
Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:53:16.480

将 pdf 文档放在页面的 IFrame 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:19:47.497

试试下面的代码：这里 FullPath 是文件名的完整路径

```
Dim f1 As New FileStream(FullPath, FileMode.Open)
Dim m1(f1.Length) As Byte
f1.Read(m1, 0, f1.Length)
f1.Close()
File.Delete(FullPath)
Response.ClearHeaders()
Response.ContentType = "application/pdf"
Response.Clear()
Response.OutputStream.Write(m1, 0, m1.GetLength(0)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:25:16.757

要创建 PDF 文件，您可以使用 pdfsharp [http://pdfsharp.com/之类的库](http://pdfsharp.com/)

您可以使用它轻松创建 PDF。示例代码：

```
PdfDocument document = new PdfDocument();
PdfPage page = document.AddPage();
... 
```

然后将其保存在您的服务器上

```
document.Save(filename); 
```

然后只需通过 a-href 或 iframe 链接到它。

# javascript - 在节点可执行文件中返回了错误的 pid

> ID：11646671
> 
> 赞同：2
> 
> 时间：2012-07-25T09:27:21.653
> 
> 标签：javascript, linux, node.js, terminal

为我的最新项目开发一个 cli 工具。我正在编写一个停止方法并尝试根据其 pid 终止节点进程。

这是我拥有的代码，但看起来我只是获取 grep 函数的 pid

```
#!/usr/bin/env node

(function () {
var args = process.argv.slice(2),
    exec = require('child_process').exec;

args.forEach(function (arg) {
    switch (arg) {
        case 'start':
            require('./library/Ubui');
            return;
        break;
        case 'stop':
            //I am aware this will kill the grep instance too
            //but I don't care. Why should we?
            exec('ps aux | grep ubui.js | cut -c11-15', function (a, b) {
                var ubuifs = b.split("\n");
                console.log(ubuifs);
                ubuifs.forEach(function (pid) {
                    if (pid !== '') {
                        console.log('\x1b[33mAttempting to kill process pid: ' + pid + '\x1b[0m');
                        exec('kill ' + pid, function (a, b) {
                            console.log(a, b);
                        });
                    }
                });
            });
        break;
    }
});
})(); 
```

[如果有人有任何想法，您可以在这里](https://github.com/davemackintosh/ubuif)回答或在 github 上提出拉取请求并解释为什么它不起作用？如果我能让它工作，这将是一个非常方便的 cli 工具！

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T02:53:45.853

这是一个黑客，但它有效。

在 mac 和 linux 上，我必须根据应用程序将 +1 或 +2 添加到 exec'd PID，无法弄清楚它为什么是 1 或 2，似乎不依赖于节点版本或操作系统。对于给定的应用程序，偏移量总是相同的，我可以肯定地说。

有趣的是 child.spawn 不需要调整。

这解决了您的问题，但没有解决根本原因。如果有人弄清楚 child.exec 中的偏移量是多少，那就太好了。

# c# - 基础设施 UltraValidator

> ID：11646672
> 
> 赞同：0
> 
> 时间：2012-07-25T09:27:23.843
> 
> 标签：c#, infragistics

我正在使用基础设施 UltraValidator。我想从验证消息框中删除文本“验证失败并出现以下错误”或需要设置自定义消息。请帮帮我。

问候安菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:33:56.560

`ValidationSettings`您可以通过位于未通过验证的控件的常规属性中的属性更改显示的错误消息。

在那里您可以找到属性`Caption`，并且`Text`可以根据需要进行更改。（以及允许在单个控件的基础上配置单个行为的其他属性）

# django - 为什么 django 不考虑我的语言文件？

> ID：11646677
> 
> 赞同：6
> 
> 时间：2012-07-25T09:27:45.547
> 
> 标签：django, internationalization, translation, gettext

我遵循了有关文本翻译的整个文档，但 django 没有考虑我的`.mo`文件。

一些事实：

*   我在`conf/locale/`项目的根目录下创建了一个文件夹
*   `django.po`成功生成`django-admin.py makemessages -l fr`
*   `django.mo`成功生成`django-admin.py compilemessages`

所以我的文件夹结构是：

```
project/
  site/
  locale/
    fr/
      LC_MESSAGES/
        django.mo
        django.po 
```

*   在`settings.py`中，我设置了`LANGUAGE_CODE = 'fr'`
*   我的浏览器正确发送`Accept-Language:fr-FR,fr;`
*   `request.LANGUAGE_CODE`从我的`fr`观点来看

但我什么也没翻译...如何让 django 考虑这些文件？

* * *

## 编辑

添加`/home/www/project/locale`到`settings.LOCALE_PATHS`作品中。但是，Django 应该自己找到这个路径，我不喜欢使用绝对路径。这里会发生什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T09:43:58.080

**LOCALE_PATHS**

Django 默认在 3 个位置查找翻译文件：

*   `LOCALE_PATHS/(language)/LC_MESSAGES/django.(po|mo)`
*   `$APPPATH/locale/(language)/LC_MESSAGES/django.(po|mo)`
*   `$PYTHONPATH/django/conf/locale/(language)/LC_MESSAGES/django.(po|mo)`

仅当您的翻译文件不在您的应用程序目录或 PYTHON_PATH 上时，才需要使用 LOCALE_PATHS。

settings.py 中的 LOCALE_PATHS 示例

```
LOCALE_PATHS = (
    '/home/www/project/conf/locale', # replace with correct path here
) 
```

**MIDDLEWARE_CLASSES**

`django.middleware.locale.LocaleMiddleware`在`MIDDLEWARE_CLASSES`settings.py中添加

**语言**

```
LANGUAGES = (
    ('fr', 'Français'),
) 
```

# java - JTextArea 在全选时禁用滚动

> ID：11646678
> 
> 赞同：2
> 
> 时间：2012-07-25T09:27:52.403
> 
> 标签：java, swing, jtextarea

**警告：**我们关闭这个是错误的，请投票重新打开，以便得到正确的答案！

每次我选择文本区域上的所有 (Ctrl+A) 文本时，它都会滚动到底部。

无论如何在选择所有内容的同时保持位置或可见矩形？

**更新**

这不是[Java / Swing 的副本：JScrollPane 中的 JTextArea，如何防止自动滚动？](https://stackoverflow.com/questions/3972337/java-swing-jtextarea-in-a-jscrollpane-how-to-prevent-auto-scroll)因为在这里，textarea 中的文本没有更新，只是被选中（即全选）。

**更新克娄巴特拉**

（不完全符合网络礼仪，但我想你需要尽快得到答案 - 所以我在这里添加它，直到问题重新打开，然后移动:-)

您基本上需要的是自定义插入符号，但我不知道这是否是全部，因为 NavigationFilters 可能（或不会）进入：在该插入符号中，覆盖 adjustVisibilty 以有条件地滚动或不滚动到新点。一个样品：

```
public static class MyCaret extends DefaultCaret {

    @Override
    protected void adjustVisibility(Rectangle nloc) {
        if (ignoreAdjustVisibility()) {
            return;
        }
        super.adjustVisibility(nloc);
    }

    /**
     * Returns a boolean to indicate whether to scroll the dot to visible.
     * This implementation checks for all-selected, that is mark at the start
     * and dot at the end.
     * @return
     */
    private boolean ignoreAdjustVisibility() {
        return (getMark() == 0) && 
                (getDot() == getComponent().getDocument().getLength());
    }

}

// use in application code
JTextArea text = new JTextArea(10, 20);
DefaultCaret caret = (DefaultCaret) text.getCaret();
MyCaret myCaret = new MyCaret();
// for some reason, the blinkrate isn't installed correctly, so do it manually
myCaret.setBlinkRate(caret.getBlinkRate());
text.setCaret(myCaret); 
```

**更新**

谢谢克娄巴特拉。你的解决方案有效。希望这个问题将被重新打开。

# php - 用PHP格式化手机号码

> ID：11646679
> 
> 赞同：0
> 
> 时间：2012-07-25T09:28:02.940
> 
> 标签：php, formatting, preg-replace, phone-number

我一直在绞尽脑汁想如何格式化一个简单的手机号码，但想不出该怎么做。一位朋友对我说我可以使用 preg_replace 函数，但我不确定，因为我已经阅读过它但不熟悉它。基本上我想要做的是通过一个字符串说一条消息，其中包含：“嗨，我的名字是约翰，你能打电话给我吗 07771234567，谢谢”并将其替换为“嗨，我的名字是约翰，你能打电话给我吗？” 07xx12x4xx7 谢谢”。换句话说，用“x”替换部分数字。

我也知道有些人可能会写这样的手机：“0777 123 4567”，所以也需要它来去除任何空白。另外，尽管我使用了一个名为 stripos() 的函数通过查找“07”的起始位置来查找数字的开头，但它还需要查找数字的开头和结尾。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T00:18:15.373

这并不适用于所有格式，一些电话号码可以以不同的格式放置，不能仅通过检查 011 或长度来完成。您需要一份所有区号/组合的完整列表，以检查每个可能的长度。

[http://support.hostgator.com/articles/specialized-help/making-international-calls-from-the-united-states](http://support.hostgator.com/articles/specialized-help/making-international-calls-from-the-united-states) 例如，您可能会看到英国 (UK) 的电话号码以其中一种方式表示：

(+44) (0)20 7930 4832 +44 20 7930 4832 020 7930 4832

简单的解决方案可能是。另外我对这段代码不满意，我确定是否可以简化大约一千次。

```
private function cleanNumber($uglyNumber){

    $number = preg_replace("/[^0-9]/","",$uglyNumber);
    if(($check = substr($number,0,3))!=='011'){
        //NON 011 Numbers

        switch(strlen($number)){
            //Same Area Code 
            //123-4567
            case 7:
                $prefix = substr($number,0,3);
                $SLN = substr($number,3,10);
                $cleanNumber = $prefix.'-'.$SLN;
                break;

            //Domestic US
            //No International Number
            case 10:
            $area = substr($number,0,3);
            $prefix = substr($number,3,3);
            $SLN = substr($number,6,10);
            $cleanNumber = '('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 11:
            // International Number [1]
                $country = substr($number,0,1);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 12:
            // International Number [12]
                $country = substr($number,0,2);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 13:
            // International Number [123]
                $country = substr($number,0,3);
                $area = substr($number,0,3);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,10);
                $cleanNumber = '['.$country .'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            default:
                //dono 
                return $number;
        }

    }else{
        switch(strlen($number)){

            case 11:
                // ExitUS 001 [1]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,1);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,11);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 12:
                // ExitUS 001 [12]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,2);
                $prefix = substr($number,4,3);
                $SLN = substr($number,7,12);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 13:
                // ExitUS 001 [123]
                //No Area Code Country
                $exitUs = substr($number,0,3);
                $country = substr($number,3,3);
                $prefix = substr($number,6,3);
                $SLN = substr($number,9,13);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ' .$prefix.'-'.$SLN;
                break;

            case 14:
                // ExitUS 001 [1]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,1);
                $area   = substr($number,4,3);
                $prefix = substr($number,7,3);
                $SLN = substr($number,10,14);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 15:
                // ExitUS 001 [12]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,2);
                $area   = substr($number,5,3);
                $prefix = substr($number,8,3);
                $SLN = substr($number,11,4);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            case 16:
                // ExitUS 001 [123]
                // With Country Code
                $exitUs = substr($number,0,3);
                $country = substr($number,3,3);
                $area   = substr($number,6,3);
                $prefix = substr($number,9,3);
                $SLN = substr($number,12,4);
                $cleanNumber = ''.$exitUs .' ['.$country.'] ('.$area.') ' .$prefix.'-'.$SLN;
                break;

            default:
                //dono 
                return $number;
        }

    }

    return $cleanNumber;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:35:21.750

像这样的东西应该可以工作，尽管可能有直接的正则表达式方法：

```
$foo = '07771234567';
$foo = preg_replace( '/\s+/', ' ', $foo ); // remove whitespaces
$foo = str_split($foo); // split into an array so we can loop over it more easily
$replace_with_x = array(2, 3, 6, 8, 9); // the positions of numbers you want to replace

// loop through your phone number, and replace with x where necessary
for($i=0; $i<len($foo); $i++) {
   if(in_array($i, $replace_with_x)) {
      $foo[$i] = 'x';
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:03:08.040

[http://www.braemoor.co.uk/software/telnumbers.shtml](http://www.braemoor.co.uk/software/telnumbers.shtml)

您可以从该站点下载一个 PHP 函数，该函数允许您验证所有不同类型的英国电话号码。

我正在使用这是一个实时系统 atm，因此它可以正常工作。

祝你好运

# websocket - websocket 可以支持 gzip 压缩吗？

> ID：11646680
> 
> 赞同：26
> 
> 时间：2012-07-25T09:28:05.263
> 
> 标签：websocket, gzip

WebSocket握手成功后，我们可以使用gzip压缩吗？

这是我的测试：

1.  我使用高速公路库构建服务器，然后响应客户端：
    `HTTP/1.1 101 Switching Protocols content-encoding: gzip Connection: Upgrade Server: AutobahnPython/?.?.? Upgrade: WebSocket Sec-WebSocket-Accept: RIR8KmljoV8Cv9mdiLY7GM2nYMc=`
2.  然后我的服务器使用 gzip 压缩
3.  chrome浏览器得到了结果，但它告诉我“无法将文本帧解码为UTF-8”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-15T21:02:54.313

WebSocket 压缩在某些浏览器中默认启用（在撰写本文时，例如在 Chrome 中，但在 Firefox 中未启用）。客户端必须为此包含“Sec-WebSocket-Extensions: permessage-deflate”标头。如果服务器使用相同的扩展名进行响应，则 WebSocket 通信会以帧为单位进行压缩。据我所知，没有用于启用/禁用扩展的浏览器 API。

关于该主题的一篇好文章是：[https ://www.igvita.com/2013/11/27/configuring-and-optimizing-websocket-compression/](https://www.igvita.com/2013/11/27/configuring-and-optimizing-websocket-compression/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T09:53:38.387

IETF Websocket ( [HyBi](http://tools.ietf.org/wg/hybi/) ) 工作组[正在开发](http://www.ietf.org/mail-archive/web/hybi/current/msg09758.html)一个压缩[扩展。](https://datatracker.ietf.org/doc/html/draft-tyoshino-hybi-permessage-compression-00)我建议关注他们的邮件列表以获取最新信息。我也建议查看[这个问题](https://stackoverflow.com/questions/11553345/access-chromes-internal-gzip-routine-from-javascript)。

* * *

2017 年更新：该扩展现已推出一段时间，请参见此处：[https ://www.rfc-editor.org/rfc/rfc7692](https://www.rfc-editor.org/rfc/rfc7692)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T13:58:47.597

是的，它可以。[Chrome 19+ 支持它。](https://stackoverflow.com/a/11643109/819417)

```
"https://github.com/crossbario/autobahn-python/blob/master/examples/twisted/websocket/echo_compressed/server_advanced.py"

from twisted.internet import reactor
from twisted.web.server import Site
from twisted.web.static import File

from autobahn.twisted.websocket import WebSocketServerFactory, \
    listenWS

from autobahn.websocket.compress import *

def accept(offers):
    for offer in offers:
        return PerMessageDeflateOfferAccept(offer)

debug = True
factory = WebSocketServerFactory(u"ws://127.0.0.1:9000", debug=debug, debugCodePaths=debug)
factory.setProtocolOptions(perMessageCompressionAccept=accept)

listenWS(factory)

webdir = File(".")
web = Site(webdir)
reactor.listenTCP(8080, web)

reactor.run() 
```

更多信息：[如何在 Autobahn 示例中使用 PerMessageDeflateOffer](http://nullege.com/codes/search/autobahn.websocket.compress.PerMessageDeflateOffer)。

# php - php 标头下载 - 无法打开文件：它似乎不是有效的存档

> ID：11646681
> 
> 赞同：1
> 
> 时间：2012-07-25T09:28:05.123
> 
> 标签：php, apache, file-upload

文件下载正常 - 除了较大的文件下载 - 大文件下载太快并且在打开时损坏 - 我收到错误消息（对于 zip 文件）：无法打开文件：它似乎不是一个有效的存档。文件上传正常，在文件夹中

这是我用来强制下载标头的 php 代码

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:12:35.850

Found the solution

It was a Maximum memory allocation problem - it had a php default setting of 236M

I upped this and its working

appreciate all the help

Regards

Jeff

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:35:08.307

首先尝试直接访问该文件（指向 zip 文件的直接 URL）。

如果它也给出错误或损坏，请使用流编写器之类的东西一次写入数据块。

（假设服务器端文件没有损坏）

或者使用这样的东西

[http://php.net/manual/en/httpresponse.send.php](http://php.net/manual/en/httpresponse.send.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:14:04.203

即使通过增加内存分配，下载仍然非常不可靠。我设法通过使用以下方法使其稳定。感谢大家的投入。

```
header("Content-Disposition: attachment; filename=" . urlencode($file));   
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Description: File Transfer");            
header("Content-Length: " . filesize($file));
flush(); // this doesn't really matter.

$fp = fopen($file, "r");
while (!feof($fp))
{
echo fread($fp, 65536);
flush(); // this is essential for large downloads
} 
fclose($fp); 
```

# iis - LDAP：服务器上的未知错误（0x8000500c），本地工作

> ID：11646682
> 
> 赞同：1
> 
> 时间：2012-07-25T09:28:10.043
> 
> 标签：iis, deployment, active-directory

我有这个类[LDAP](http://pastebin.com/R9c4tg3U)，它从 AD 获取用户。它在本地工作，但是当我在远程服务器上部署时出现未知错误（0x8000500c）。从远程机器上的堆栈跟踪来看，我认为在调用 GetUsers() 库方法时会引发错误：

```
[COMException (0x8000500c): Unknown error (0x8000500c)]
Library.LDAP..ctor(String login) in C:\Users\xxx\Documents\Visual Studio 2010\Projects\XXXLib\XXXLibrary\LDAP.cs:75
XXXLibrary.LDAP.<GetUsers>b__0(String login) in C:\Users\adkozak\Documents\Visual Studio 2010\Projects\XXXLib\XXXLibrary\LDAP.cs:148
System.Linq.WhereSelectListIterator`2.MoveNext() +110
System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +327
System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
XXXLibrary.LDAP.GetUsers(List`1 logins) in C:\Users\xxx\Documents\Visual Studio 2010\Projects\XXXLib\XXXLibrary\LDAP.cs:148 
```

远程 IIS 上的身份验证设置为：

`Windows Authentication: Enabled`

`ASP.NET Impersonation: Enabled`

其余类型被禁用。

每一个线索，帮助将不胜感激。我不知道我会做错什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:22:22.570

啊，我终于找到了问题所在 - 错误 0x8000500c 意味着`Active Directory Datatype Cannot be Converted to/from a Native DS Datatype`我已经使用[BeaverTail ADSI 浏览器](http://adsi.mvps.org/adsi/CSharp/beavertail.html)查看了 LDAP 条目，并注意到其中一个属性不是字符串而是数组。希望这对任何人都有帮助！

# javascript - 用 JavaScript 中另一个对象的属性替换对象的属性，无需库

> ID：11646685
> 
> 赞同：3
> 
> 时间：2012-07-25T09:28:20.413
> 
> 标签：javascript, object, properties, default, extend

我一直在使用 jQuery.extend 来替换像这样的默认属性

```
var Car = function(options){
    var defaultOptions = {
        color: "hotpink",
        seats: {
            material: "fur",
            color: "black",
            count: 4
        },
        wheels: 4
    }
    this.options = $.extend(true,{},defaultOptions,options); 
}

var myCar = new Car({
    color: "blue",
    seats: {
        count: 2,
        material: "leather"
    }
});

alert(myCar.options.color); // "blue"
alert(myCar.options.seats.color); // "black"
alert(myCar.options.seats.count); // 2 
```

虽然效果很好，但我想知道在没有任何库的情况下实现类似结果的最佳方法。我只想在函数中定义一些默认设置并用参数中的设置替换它们，每次我这样做时都包含一个库是一种矫枉过正的做法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:34:20.823

基本上它只是递归使用[`for..in`](http://ecma-international.org/ecma-262/5.1/#sec-12.6.4). 您可以在源代码中看到 jQuery 实现的完整[源代码](https://github.com/jquery/jquery/blob/master/src/core.js#L277)（其中的行号会随着时间的推移而腐烂，但它很可能会保留在 中`core.js`）。

这是一个非常基本的即兴表演：

```
function deepCopy(src, dest) {
    var name,
        value,
        isArray,
        toString = Object.prototype.toString;

    // If no `dest`, create one
    if (!dest) {
        isArray = toString.call(src) === "[object Array]";
        if (isArray) {
            dest = [];
            dest.length = src.length;
        }
        else { // You could have lots of checks here for other types of objects
            dest = {};
        }
    }

    // Loop through the props
    for (name in src) {
        // If you don't want to copy inherited properties, add a `hasOwnProperty` check here
        // In our case, we only do that for arrays, but it depends on your needs
        if (!isArray || src.hasOwnProperty(name)) {
            value = src[name];
            if (typeof value === "object") {
                // Recurse
                value = deepCopy(value);
            }
            dest[name] = value;
        }
    }

    return dest;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:26:11.587

你可以模仿jQuery的api“扩展”，就像楼上说的。我认为没有更好的方法可以做到这一点。所以，我认为jQuery的api是合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T06:13:40.967

在 ES6 中引入了扩展运算符。

```
var Car = function(options){
    var defaultOptions = {
        color: "hotpink",
        seats: {
            material: "fur",
            color: "black",
            count: 4
        },
        wheels: 4
    }
    this.options = {...defaultOptions, ...this.options};
}

var myCar = new Car({
    color: "blue",
    seats: {
        count: 2,
        material: "leather"
    }
}); 
```

参考：

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)
*   [如何在 ES6+ 中合并两个 javascript 对象？](https://stackoverflow.com/questions/13852852/how-do-i-merge-two-javascript-objects-together-in-es6)
*   或者你可以使用[`Object.assign`](https://stackoverflow.com/questions/39121695/merge-two-objects-with-es6)

# iphone - 访问 ios 设备设置

> ID：11646686
> 
> 赞同：2
> 
> 时间：2012-07-25T09:28:25.113
> 
> 标签：iphone, ios, nsuserdefaults

是否可以更改设备设置，例如 wifi、个人热点、手电筒、个人热点、转向位置服务。我只想将它们从应用程序中打开/关闭，而无需移动到设置屏幕。这可能吗。或者有什么好的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:31:01.143

不，不是，您无法更改这些设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:36:55.450

看到这个[问题](https://stackoverflow.com/questions/4518406/is-there-a-way-to-toggle-bluetooth-and-or-wifi-on-and-off-programatically-in-ios)它正在使用私有 API 来切换蓝牙设置。因此，无法使用公共 SDK 从应用程序内更改设置。您现在甚至无法在 ios 5.0.1 及更高版本中以编程方式打开“设置”应用程序。我的应用程序使用以下语句打开设置应用程序，但当我们迁移到最新的 iOS SDK 时它停止工作。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

# android - ListView 上的 Android SQLite 查询结果

> ID：11646687
> 
> 赞同：2
> 
> 时间：2012-07-25T09:28:29.170
> 
> 标签：android, sqlite, listview

刚开始学习如何为 Android 编程，现在我陷入了一些疑问。

我有一个 SQLite 数据库，其中包含多个表，每个表都有一些字段。

我创建了一个类来管理我的数据库，并想象其中一个功能是这样的：

```
public Cursor getGroupData() {
    String[] values = new String[] {_ROWID, _NAME, _AGE, _PHONE};
    Cursor c = db.query(BD_TABLE, values, null, null, null, null, null);
    return c;
} 
```

现在我有两种情况之一。

**第一种情况**

例如，想要在 ListView 中显示我的查询中返回的所有名称。有了这个，用户可以点击一个名字，一个新的活动将显示（想象一个包含所有用户信息的布局）

**第二种情况**

例如，想要在 ListView 中显示我的查询中返回的所有名称。有了这个，用户可以点击一个名字并执行一个新的查询（想象一下从那个用户那里获取其他数据）。查询将导致返回各种数据，我再次希望在 ListView 中显示一些字段（例如地址）。现在，如果用户点击地址，就会出现一个新的活动（例如一个包含一些地址信息的布局）。

在这两种情况下，虽然我只是选择名称或地址，但 SQLite 返回的所有数据都必须可用，例如，在第一种情况下，我选择一个名称，它将显示在布局上，类似于联系信息，但查询、年龄和电话的结果也必须可用。

现在我正在做类似的事情：

```
Cursor values = db.getGroupData();
// Now I'm thinking in putting some code to iterate over the cursor and put what I want to display on my listview on a string array

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values_I_what_to_show);
setListAdapter(adapter); 
```

问题在于我将数据放在字符串数组中，但需要查询返回的所有数据。

你能指点我一些方向吗？

问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T09:41:43.340

尝试这个 ：

```
 Cursor cursor =db.getGroupData();
 ArrayList<MyData> listData = new ArrayList<MyData>();
 while (cursor.moveToNext()) {
        MyData temp = new MyData();
        temp.id = cursor.getInt(0);
        temp.name = cursor.getString(1);
        temp.age= cursor.getInt(2);
        temp.phone= cursor.getInt(3);
        listData .add(temp);
                    temp =null;
    }
cursor.close();
MyAdapter myAdapter = new MyAdapter(this,
            R.layout.list_item, listData); //use custom adapter
listView.setAdapter(myAdapter); 
```

声明 MyData 类：

```
 private class MyData{
   int id ;
   String name;
   int age;
   int phone;
 } 
```

我的适配器类：

```
private class MyAdapter extends ArrayAdapter<projData> {
    private ArrayList<MyData> items;
    private Context context;

    public MyAdapter(Context context, int textViewResourceId,
            ArrayList<MyData> items) {
        super(context, textViewResourceId, items);
        this.context = context;
        this.items = items;
      }

    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.list_item, null);
        }
    //here getview code as per ur req 
        }
    return view;
    }
} 
```

# signalr - 为什么 PersistentConnection (SignalR) 为每个客户端实例化两次？

> ID：11646695
> 
> 赞同：0
> 
> 时间：2012-07-25T09:29:01.340
> 
> 标签：signalr

我使用 PersistentConnection
创建连接路由：

```
protected void Application_Start(object sender, EventArgs e) 
{
    RouteTable.Routes.MapConnection<MyConnection>("echo", "echo/{*operation}");
} 
```

为什么`MyConnection(PersistentConnection)`每次客户端连接时都会调用两次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:52:30.373

发生这种情况是因为客户端在建立连接时向服务器发出了两个请求：

*   协商请求，这是客户端和服务器交换支持/首选的传输（例如“ ***webSockets***
    ”、“longPolling”）并确定使用哪一个
*   真正的***连接***请求

`MyConnection`为每个传入请求创建一个新的类实例。这就是构造函数被调用两次的原因。

# python - AES 加密/解密问题 - Objective-C -> Python (Tornado)

> ID：11646697
> 
> 赞同：0
> 
> 时间：2012-07-25T09:29:06.620
> 
> 标签：python, objective-c, tornado, encryption

我有问题好几天了，不知道如何解决。我正在制作一个使用 Python-TornadoWeb 将 NSDictionary 发送到服务器的应用程序。好吧，我发送用 AES 256 加密的数据，问题是解密。

**用于加密的 Objective-C 代码 (key = "0123456789abcdef")**

```
// Copy the key data, padding with zeroes if needed
char key[kKeySize];
bzero(key, sizeof(key));
memcpy(key, keyData, keyLength > kKeySize ? kKeySize : keyLength);

size_t bufferSize = [self length] + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

size_t dataUsed;

CCCryptorStatus status = CCCrypt(decrypt ? kCCDecrypt : kCCEncrypt,
                                 kCCAlgorithmAES128,
                                 kCCOptionPKCS7Padding,
                                 key, kKeySize,
                                 NULL,
                                 [self bytes], [self length],
                                 buffer, bufferSize,
                                 &dataUsed);

switch(status){
    case kCCSuccess:
        return [NSData dataWithBytesNoCopy:buffer length:dataUsed];
    case kCCParamError:
        NSLog(@"Error: NSDataAES256: Could not %s data: Param error", decrypt ? "decrypt" : "encrypt");
        break;
    case kCCBufferTooSmall:
        NSLog(@"Error: NSDataAES256: Could not %s data: Buffer too small", decrypt ? "decrypt" : "encrypt");
        break;
    case kCCMemoryFailure:
        NSLog(@"Error: NSDataAES256: Could not %s data: Memory failure", decrypt ? "decrypt" : "encrypt");
        break;
    case kCCAlignmentError:
        NSLog(@"Error: NSDataAES256: Could not %s data: Alignment error", decrypt ? "decrypt" : "encrypt");
        break;
    case kCCDecodeError:
        NSLog(@"Error: NSDataAES256: Could not %s data: Decode error", decrypt ? "decrypt" : "encrypt");
        break;
    case kCCUnimplemented:
        NSLog(@"Error: NSDataAES256: Could not %s data: Unimplemented", decrypt ? "decrypt" : "encrypt");
        break;
    default:
        NSLog(@"Error: NSDataAES256: Could not %s data: Unknown error", decrypt ? "decrypt" : "encrypt");
}

free(buffer); 
```

好了，将加密后的数据发送到服务器并执行以下操作

```
class LoginHandler(tornado.web.RequestHandler):
  def post(self):

    # Body
    body = self.request.body
    print "--------------------------- Before decrypt ---------------------------"
    print body
    print "----------------------------------------------------------------------"

    # Decrypt
    key = '0123456789abcdef'
    mode = AES.MODE_CBC
    decryptor = AES.new(key, mode)
    bodyDecrypted = decryptor.decrypt(body)
    print "--------------------------- After decrypt ----------------------------"
    print bodyDecrypted
    print "----------------------------------------------------------------------" 
```

结果是：

------------------------- 解密前 --------- ------

BU??c??? ?????d?PP??I?G?'??

------------------------- 解密后 --------- --------

?Ƒg,??e#??? ?(?>97R??? ??

如您所见，解密不正确。如果您发送未加密，则一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:35:33.593

我会检查以确保 Objective-C 和 Python 之间的编码是相同的。在应用程序级别处理加密时，我喜欢以十六进制格式转换和发送所有内容，然后再次转换以确保编码不是问题。

顺便问一下，您使用的是哪个版本的 Python？（3.0+及以上使用unicode）

# c# - WCF 服务访问权限：没有对此命名空间的访问权限

> ID：11646704
> 
> 赞同：0
> 
> 时间：2012-07-25T09:29:22.847
> 
> 标签：c#, wcf, http

使用任务调度程序运行程序时出现以下错误：

> HTTP 无法注册 URL http://+:4711/myWCFService/。您的进程没有对此命名空间的访问权限（有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=70353](http://go.microsoft.com/fwlink/?LinkId=70353)）。---> System.Net.HttpListenerException：访问被拒绝

不幸的是，以管理员身份运行无法解决我的问题。我也尝试用 netsh 注册 http 地址，但我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T09:40:19.097

你运行了什么`netsh`命令？

```
netsh http add urlacl http://+:4711/ user=DOMAIN\USER 
```

在您的机器上，内置管理员帐户对所有 HTTP 命名空间保留具有隐式所有权，因此您需要将特定命名空间保留（如上）的所有权委托给将运行 HTTP 端点的目标帐户。`Run as administrator`您可以通过在执行`netsh`命令之前确保您做到这一点。

要检查有哪些命名空间预留，请运行：

```
netsh http show urlacl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T04:17:03.507

我正在开发托管在 Windows 服务（托管）中的测试 WFC 服务。然后我为 HTTP 添加了另一个基地址。当我再次启动服务时，我得到了同样的错误。然后我将服务帐户从“本地服务”更改为“本地系统”并解决了问题。由于这是一个测试程序，我可以继续。

# regex - 使用正则表达式匹配运算符（例如 ==、>=）

> ID：11646713
> 
> 赞同：1
> 
> 时间：2012-07-25T09:29:57.810
> 
> 标签：regex

我正在尝试编写一个匹配常用编程语言运算符的正则表达式。这是我正在使用的正则表达式字符串（它是更大表达式的一部分）：

```
[>|<|>=|<=|==|!=] 
```

这与“>”、“<”匹配，但与其他任何一个都不匹配。我试过像`\>\=`or一样逃避它们，`\=\=`但这并没有什么不同。

我敢肯定这很简单，而且我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T09:32:27.140

```
[ ] - match one character

( ) - match group of characters 
```

所以：

```
(>=|<=|>|<|==|!=) 
```

# c# - 当我尝试通过代码创建内容类型和列表时，新表单我看不到新字段

> ID：11646714
> 
> 赞同：1
> 
> 时间：2012-07-25T09:30:02.347
> 
> 标签：c#, sharepoint

当我尝试通过代码创建内容类型和列表时，新表单我看不到新字段。我不知道还要检查什么，我在其他博客文章的基础上构建了这段代码。

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
        {
            Logger.LogDebug("NLSponsoringListSalesNumbersEventReceiver", "FeatureActivated(SPFeatureReceiverProperties properties)", "BEGIN");
            try
            {
                SPSite currentSite = properties.Feature.Parent as SPSite;
                SPWeb currentWeb = currentSite.RootWeb;
                AddSourcesList(currentWeb);

     private void AddSourcesList(SPWeb currentWeb)
        {
            currentWeb.AllowUnsafeUpdates = true;

            #region Add Source content type if it doesnt exist.
                SPContentType sourceContentType = currentWeb.ContentTypes[SponsoringCommon.Constants.CONTENTTYPES_SOURCES_NAME];
                SPContentTypeId sourceContentTypeid = new SPContentTypeId(SponsoringCommon.Constants.CONTENTTYPES_SOURCE_ID);
                if (sourceContentType == null)
                {
                    sourceContentType = new SPContentType(sourceContentTypeid,
                                                            currentWeb.ContentTypes,
                                                            SponsoringCommon.Constants.CONTENTTYPES_SOURCES_NAME);
                    currentWeb.ContentTypes.Add(sourceContentType);
                    currentWeb.Update();
                }
            #endregion

            #region Removes list if it exists
                if (currentWeb.Lists.TryGetList(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME) != null)
                {
                    currentWeb.Lists.TryGetList(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME).Delete();
                    currentWeb.Lists.Add(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME, string.Empty, SPListTemplateType.GenericList);
                }
                else
                {
                    currentWeb.Lists.Add(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME, string.Empty, SPListTemplateType.GenericList);
                } 
            #endregion           

            #region Hides title column
            SPList sourceList = currentWeb.Lists.TryGetList(SponsoringCommon.Constants.LISTNAMES_SOURCES_NAME);
            SPField titleField = sourceList.Fields.GetField("Title");
            titleField.ShowInEditForm = false;
            titleField.ShowInDisplayForm = false;
            titleField.ShowInNewForm = false;
            titleField.Update(); 
            #endregion 

            string sourceFieldName = currentWeb.Fields.Add(SponsoringCommon.Constants.FIELDS_SOURCE_NAME, SPFieldType.Text, true);
            SPField sourceField = currentWeb.Fields.GetFieldByInternalName(sourceFieldName);
            sourceField.Group = "$Resources:SPNLSponsoring,Field_NationaleLoterijSponsoringColumns_Group";
            string schemaXmlWithResourceTokens = sourceField.SchemaXmlWithResourceTokens;
            int startIndex = schemaXmlWithResourceTokens.IndexOf("\"", schemaXmlWithResourceTokens.IndexOf("DisplayName=\"")) + 1;
            int endIndex = schemaXmlWithResourceTokens.IndexOf("\"", startIndex);
            int substringLength = endIndex - startIndex;
            string value = @"DisplayName=\" + schemaXmlWithResourceTokens.Substring(startIndex, substringLength);
            schemaXmlWithResourceTokens = schemaXmlWithResourceTokens.Replace(value, @"DisplayName=\$Resources:SPNLSponsoring,Field_Source_Name");
            sourceField.SchemaXml = schemaXmlWithResourceTokens;
            sourceField.ShowInEditForm = true;
            sourceField.ShowInNewForm = true;
            sourceField.ShowInDisplayForm = true;

            SPFieldLink fieldLinkSourceName = new SPFieldLink(sourceField);
            sourceContentType.FieldLinks.Add(fieldLinkSourceName);
            sourceContentType.FieldLinks.Reorder(new string[] { sourceField.InternalName });  //Reorder fields in the content type  
            sourceList.ContentTypesEnabled = true;
            sourceList.ContentTypes.Add(sourceContentType);
            sourceList.Update();

            SPContentTypeCollection currentOrderSourceList = sourceList.ContentTypes;
            List<SPContentType> resultSourceList = new List<SPContentType>();
            foreach (SPContentType ct in currentOrderSourceList)
            {
                if (ct.Name.Contains(SponsoringCommon.Constants.CONTENTTYPES_SOURCES_NAME))
                {
                    resultSourceList.Add(ct);
                }
            }
            sourceList.RootFolder.UniqueContentTypeOrder = resultSourceList;
            sourceList.RootFolder.Update();

            #region Modify view all items to show the new field
                SPView vwAllItemsSourceList = sourceList.GetSafeViewByName(SponsoringCommon.Constants.VIEWS_ALL_ITEMS);
                SPViewFieldCollection colvwAllItemsSourceList = vwAllItemsSourceList.ViewFields;
                if (vwAllItemsSourceList.ViewFields.Exists("LinkTitle"))
                {
                    vwAllItemsSourceList.ViewFields.Delete("LinkTitle");
                }
                colvwAllItemsSourceList.Add(sourceField);
                vwAllItemsSourceList.Update(); 
            #endregion

            currentWeb.AllowUnsafeUpdates = false ;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:18:02.763

问题是因为添加的内容类型默认基于文档，而不是类型。

我把那部分改成了这个

```
 SPContentType itemCtype = currentWeb.AvailableContentTypes[SPBuiltInContentTypeId.Item];
                SPContentType sourceContentType = new SPContentType(itemCtype, currentWeb.ContentTypes, SponsoringCommon.Constants.CONTENTTYPES_SOURCES_NAME);
                sourceContentType = currentWeb.ContentTypes.Add(sourceContentType); 
```

然后它工作正常

# c# - 如何在C#中检查窗口是否打开和关闭

> ID：11646718
> 
> 赞同：0
> 
> 时间：2012-07-25T09:30:07.330
> 
> 标签：c#, wpf

在我的应用程序中，当我通过编码手动按下另一个窗口中的按钮时，我想关闭一个特定窗口（如果它已打开）。如何检查窗口是否打开？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T09:44:45.973

你真的应该在你的应用程序中自己跟踪这种事情……

但是，既然听起来你不是，你可以依靠 WPF 为你做这件事。它跟踪应用程序中所有打开的窗口，通过[`Application.Current.Window`](http://msdn.microsoft.com/en-us/library/system.windows.application.windows.aspx)集合公开，因此您可以遍历此集合以查找与您感兴趣的类型的窗口匹配的窗口。

例如：

```
foreach (var wnd in Application.Current.Windows)
{
    if (wnd is MyWindow)
    {
        // We found one!
        //
        // Close it or do something else interesting here.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:36:42.483

```
while(true)
{
    SearchAndDestroy("MyProgProc");
}

public SearchAndDestroy(string programname)
    {
     foreach (Process _proc in Process.GetProcesses()) {
                if (_proc.ProcessName.StartsWith(name))
                _proc.Kill();
            }
    } 
```

IE 你的程序有两种形式。从另一个表单调用关闭表单。向formA添加按钮：

```
private void button_click(object sender, eventArgs e)
{
     FormB.ActiveForm.Disposed+= new EventHandler(CloseFormB)
}

private void CloseFormB(object sender, eventArgs e)
{
      FormB.ActiveForm.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T09:18:17.920

或者，您可以使用 linq 之类的

```
var isWindowOpen = Application.Current.Windows.Cast<Window>().Any(x => (x == WINDOW)); 
```

WINDOW 是您要检查的窗口

# java - Android - onTouchEvent 只在第一次工作

> ID：11646724
> 
> 赞同：2
> 
> 时间：2012-07-25T09:30:24.417
> 
> 标签：java, android, touch-event

我有一个使用 OnTouch 的画布绘图，但是由于某种原因，我无法让它正常工作。它第一次工作（第一次触摸运动）。但是，当用户移开手指时，OnTouch 不再运行，从而阻止用户移动字符项。

经过大量研究和各种不同的选择，我根本无法让它工作，并且这样做注意到第一次调用 ACTION_DOWN 然后调用 ACTION_UP。

下面你可以找到我的两段代码，第一段是实际的 onTouchEvent。第二块代码用于处理我绘制的画布（基于迷宫（5 x 5））中的用户权限。

另一个要考虑的问题是画布被重绘（无效），每次移动用户位置（这是一个正方形的）

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{
        float touchX = event.getX();
        float touchY = event.getY();
        int currentX = maze.getCurrentX();
        int currentY = maze.getCurrentY();
        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            case MotionEvent.ACTION_DOWN:
                if(Math.floor(touchX/totalCellWidth) == currentX && Math.floor(touchY/totalCellHeight) == currentY) 
                {
                    dragging = true;
                    return true;
                }
                break;
            case MotionEvent.ACTION_UP:
                dragging = false;
                break;
            case MotionEvent.ACTION_MOVE:
                if(dragging) 
                {
                    int cellX = (int)Math.floor(touchX/totalCellWidth);
                    int cellY = (int)Math.floor(touchY/totalCellHeight);

                    if((cellX != currentX && cellY == currentY) || (cellY != currentY && cellX == currentX)) 
                    {
                        boolean moved = false;
                        switch(cellX-currentX) 
                        {
                            case 1:
                                moved = maze.move(Maze.RIGHT);
                                break;
                            case -1:
                                moved = maze.move(Maze.LEFT);
                        }
                        switch(cellY-currentY) 
                        {
                            case 1:
                                moved = maze.move(Maze.DOWN);
                                break;
                            case -1:
                                moved = maze.move(Maze.UP);
                        }

                        if(moved) 
                        {
                            invalidate();
                            if(maze.isGameComplete()) 
                            {
                                showFinishDialog();
                            }
                        }
                    }
                    break;
                }
    }
    return true;
} 
```

迷宫位置处理程序代码：

```
public boolean move(int direction) 
{
    boolean moved = false;
    if(direction == UP) 
    {
        if(currentY != 0 && !horizontalLines[currentY-1][currentX]) 
        {
            currentY--;
            moved = true;
        }
    }
    if(direction == DOWN) 
    {
        if(currentY != verticalLines[0].length-1 && !horizontalLines[currentY][currentX]) 
        {
            currentY++;
            moved = true;
        }
    }
    if(direction == RIGHT) 
    {
        if(currentX != horizontalLines[0].length-1 && !verticalLines[currentY][currentX]) 
        {
            currentX++;
            moved = true;
        }
    }
    if(direction == LEFT) 
    {
        if(currentX != 0 && !verticalLines[currentY][currentX-1]) 
        {
            currentX--;
            moved = true;
        }
    }
    if(moved) 
    {
        if(currentX == finalX && currentY == finalY) 
        {
            gameComplete = true;
        }
    }
    return moved;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:38:32.947

尝试将最终返回更改为 True 而不是 False 像这样：

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{
float touchX = event.getX();
float touchY = event.getY();
int currentX = maze.getCurrentX();
int currentY = maze.getCurrentY();
switch (event.getAction() & MotionEvent.ACTION_MASK) 
{
    case MotionEvent.ACTION_DOWN:
    {
        if(Math.floor(touchX/totalCellWidth) == currentX &&Math.floor(touchY/totalCellHeight) == currentY) 
        {
            dragging = true;
            return true;
        }
    }
    case MotionEvent.ACTION_UP:
        dragging = false;
        return true;
    case MotionEvent.ACTION_MOVE:
        if(dragging) 
        {
            int cellX = (int)Math.floor(touchX/totalCellWidth);
            int cellY = (int)Math.floor(touchY/totalCellHeight);

            if((cellX != currentX && cellY == currentY) || (cellY != currentY && cellX == currentX)) 
            {
                //either X or Y changed
                boolean moved = false;
                //check horizontal ball movement
                switch(cellX-currentX) 
                {
                case 1:
                    moved = maze.move(Maze.RIGHT);
                    break;
                case -1:
                    moved = maze.move(Maze.LEFT);
                }
                //check vertical ball movement
                switch(cellY-currentY) 
                {
                case 1:
                    moved = maze.move(Maze.DOWN);
                    break;
                case -1:
                    moved = maze.move(Maze.UP);
                }

                if(moved) 
                {
                    invalidate();
                    if(maze.isGameComplete()) 
                    {
                        showFinishDialog();
                    }
                }
            }
            return true;
        }
  }
    return True;  // Here 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:08:37.003

不返回真，而是假。

```
if(Math.floor(touchX/totalCellWidth) == currentX && Math.floor(touchY/totalCellHeight) == currentY) 
{
    dragging = true;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:23:02.937

I thought the offending part is this one

```
 event.getAction() & MotionEvent.ACTION_MASK 
```

But looking at it again, it seems ok... Try replacing this with

```
 event.getMaskedAction() 
```

and keep that in the switch.

Or maybe you need to use ACTION_POINTER_UP instead of ACTION_UP.

Can you change this bit of code please?

```
case MotionEvent.ACTION_MOVE:
    Log.d(LOGTAG, "ACTION_MOVE block, dragging = "+dragging);
    if(dragging) 
    {
        Log.d(LOGTAG, "Dragging fired with event: "+event.toString());
        int cellX = (int)Math.floor(touchX/totalCellWidth);
        int cellY = (int)Math.floor(touchY/totalCellHeight);
        // ... 
```

and post the output please.

EDIT: also, remember that you want to return true from a onlistener ONLY when you want to fully consume the event; return false if you want to propagate it further. So i guess only one of those returns need to be true and let others pass down and be handled by their respective views' ontouch handlers...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:27:09.040

把**返回=真；**而不是在您的 switch 案例的最后一条语句中为 false 。因为如果您使用 false ，它将只调用一次，然后没有其他视图可以获取该特定视图的触摸事件..所以使用 true 而不是 false ..

**理论**
在 onTouchEvent() 中返回 true 告诉 Android 系统您已经处理了触摸事件，不需要进一步处理。如果您返回 false，Android 系统将成为 onTouch 事件的处理程序，并将覆盖您的代码以处理任何超过 ACTION_DOWN 的事件（这是您触摸屏幕时的第一个事件）。

我也有同样的问题，现在解决了。我想它可以帮助你..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T05:17:12.983

here is good example of on touch may be it is usefull not sure?

```
 public boolean onTouch(View v, MotionEvent event) {
   layoutParams = (RelativeLayout.LayoutParams) ima1.getLayoutParams();

     switch(event.getAction())                   
        {
          case MotionEvent.ACTION_DOWN:                          
                break;     

          case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();

          System.out.println("value of x" +x_cord);
          System.out.println("value of y" +y_cord);           

                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                   }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                   }
         layoutParams.leftMargin = x_cord-25;
         layoutParams.topMargin = y_cord-25;
         //   layoutParams.rightMargin = x_cord-25;
         //   layoutParams.bottomMargin = y_cord-25;
         ima1.setLayoutParams(layoutParams);
                 break;
           default: break;
          }  
           return true;
        }
     });

     ima2 = (ImageView)findViewById(R.id.imageview2);
     ima2.setOnTouchListener(new View.OnTouchListener() {         

 public boolean onTouch(View v, MotionEvent event) {
     layoutParams = (RelativeLayout.LayoutParams) ima2.getLayoutParams();
          switch(event.getActionMasked())
             {
               case MotionEvent.ACTION_DOWN:
                   break;
               case MotionEvent.ACTION_MOVE:
                   int x_cord = (int) event.getRawX();
                   int y_cord = (int) event.getRawY();

                   System.out.println("value of x1" +x_cord);
               System.out.println("value of y1" +y_cord);                            

                    if (x_cord > windowwidth) {
                        x_cord = windowwidth;
                    }
                    if (y_cord > windowheight) {
                        y_cord = windowheight;
                    }
                    layoutParams.leftMargin = x_cord - 25;
                    layoutParams.topMargin = y_cord - 75;
                    ima2.setLayoutParams(layoutParams);
                    break;
                default: break;
            }
            return true;
        }
    });
   }     
 } 
```

this is example [Android Drag and drop images on the Screen?](https://stackoverflow.com/questions/11027792/android-drag-and-drop-images-on-the-screen)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T04:11:13.613

我非常确定您`Touch`每次都会被调用，我怀疑可能是您的案件不符合要求的原因。

要交叉检查，只需打印日志

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{
   System.out.println("Touch working");
   return false;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T12:25:19.970

似乎是 Mask 和您在交换机上应用的事件有问题。看看这个[问题](https://stackoverflow.com/questions/5567340/android-motionevent-action-mask)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-24T08:26:45.353

主要问题是您在每个案例的末尾都缺少一个 break 语句。您遇到其他情况并在第二个 ACTION_DOWN 时返回 false。这意味着 ACTION_UP 和 MOVE 不会被调用。

要解决这个问题： - 在每个案例的末尾添加一个 break 语句 - 始终从 ACTION_DOWN 返回 true

# jquery - Fancyapps (fancybox) 在 ('click') 触发器上杀死 jQuery

> ID：11646728
> 
> 赞同：0
> 
> 时间：2012-07-25T09:30:56.693
> 
> 标签：jquery, fancybox-2

我在这个网站上解决了许多问题和解决方案，但没有一个对我有用。

**软件：** jQuery v1.7.2 fancybox v2.0.6

我有一个隐藏的 div，里面有另一个，我使用 jQuery 插件 fileTree 显示一个文件管理器。单击浏览图标时，此功能 100% 有效。

我现在尝试在单击浏览图标时在fancybox 中显示文件管理器div。这只适用于第一次。on('click') 函数不会记录此后的任何点击。

但是，如果我删除了 fancybox 块中的“href：myID”行，它每次都有效。因此，fancybox href 函数中的某些内容正在杀死 on('click') 触发器。

我已将其追溯到 myID 的 DOM 声明，然后仅当单击的浏览图标位于同一父结构中时。

任何想法都会受到欢迎，因为我花了很多时间来找出错误。

**HTML：**

```
<div>
    <div>
        <input field where the value will go />
    </div>
    <div>
      <img class='browse' src='images/browse.gif' title='' alt=''/>
   </div>
   <div class='hidden'>
      <div id='FM_defaultAdminUploadRootDir' class='filemanager'></div>
   </div>
</div> 
```

**jQuery：**

```
jQuery(document).ready(function() {
   jQuery.noConflict();

   var myID;
   var myRoot = '{$site_Root}';
   var myDir;

   jQuery('.browse').on('click', function(){

      myID = '#'+this.parentElement.parentElement.children[2].firstElementChild.id;

        jQuery(myID).fileTree({
           root: myRoot,
           script: '".PURPLE_WYSIWYG_SRC_ABS_PATH."jqueryFileTree/connectors/jqueryFileTree.php',
           folderEvent: 'click',
           multiFolder: false,
           expandEasing : 'easeOutExpo',
           collapseEasing : 'easeInExpo'
        },
        function(file) {
            //alert(file);
        },
        function(dire) {
            myDir = dire;
        }
      );

      jQuery.fancybox({
          href: myID,  // <----- REMOVE THIS AND IT WORKS
          title: 'Select the directory',
          helpers : {
              title: {
                  type: 'outside'
              },
              overlay : {
                 opacity: 0.7,
                 css : {
                     'background-color' : '#433'
                 }
              }
          }
    });
    return false;
}); 
```

# sql - 是否需要关闭 Web SQL 中的连接？

> ID：11646733
> 
> 赞同：2
> 
> 时间：2012-07-25T09:31:08.000
> 
> 标签：sql, web-sql

是否需要关闭 Web SQL 中的连接？当我运行相同的代码时，我无法再次访问数据库。我能够第一次运行和检索数据。如果需要在 Web SQL 中关闭连接，请分享代码。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-09T13:25:36.470

不想关闭连接的目的是什么？通常应关闭所有连接以释放资源、加快进程并避免锁定情况。虽然大多数系统在某个时间点进行垃圾收集，但当您知道不再需要它时不关闭它只是浪费时间和资源。

# ruby-on-rails - Rails 3.2.6 + rake 中止！应用程序已经初始化

> ID：11646738
> 
> 赞同：2
> 
> 时间：2012-07-25T09:31:19.137
> 
> 标签：ruby-on-rails, rake, ruby-on-rails-3.2

我正在开发一个 rails 3.2.6 应用程序（从 3.0 升级到 3.1，然后升级到 3.2），我必须解决以下问题：我不能再运行 rake 任务了。

命令**bundle exec rake db:migrate**返回

**耙中止！应用程序已经初始化。**

我正在使用 rake 0.9.2.2 并且我已经尝试过降级到版本 0.9.2 没有机会。

提前谢谢了。

毛罗

更新：

如果我尝试运行思考狮身人面像任务，我会遇到同样的问题......

**已解决：在添加 APPNAME::Application.initialize 之前在应用程序上工作的人！在库文件中，但初始化已在 config/environment.rb 中触发。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:43:29.777

通过以下命令检查：
`rake db:create`使用命令安装包后`bundle install`。

# javascript - 嵌入式节点/javascript沙箱？

> ID：11646741
> 
> 赞同：5
> 
> 时间：2012-07-25T09:31:32.137
> 
> 标签：javascript, node.js, sandbox, v8

我正在编写一个 Node 应用程序，它允许用户执行任意 javascript 代码——一种“内部 API”/业务流程，超出了常规 UI。

我正在寻找一个提供以下功能的沙盒环境：

*   在不产生全新线程的情况下单独执行 - 这将由成千上万的用户运行，我更愿意坚持使用无法访问父调用堆栈的匿名函数......或者......在线程的情况下...... . 跨多个服务器生成的能力。

*   语法检查在解析/执行错误时抛出异常与使整个应用程序崩溃。

*   禁用函数/var 访问的能力。我试图阻止对 Node 的 I/O 的访问......所以用户不能将其转换为 DoS 脚本或读取 /etc/passwd，但可以运行任何本机语法和预先批准的函数列表。

*   超时控制...所以执行上限可以适用于 `while(true) do_intensive_stuff();`等。

有什么明显的选择浮现在脑海中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T05:08:06.113

谷歌搜索“node js 沙箱”，你会得到一些不同年龄和成熟度的项目。

[http://gf3.github.com/sandbox/](http://gf3.github.com/sandbox/)似乎很受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T13:00:07.473

解决方案 1：使用[js.js](https://github.com/jterrace/js.js/)解释器。解决沙盒，但不点头解决超时控制。

解决方案 2：拥有沙盒工作 node.js 进程池（每个都在自己的 chroot 或单独的 vm 环境中），通过 tcp socket/dnode/您自己的 rpc 进行通信。输入任务在队列中等待，如果达到执行限制，则整个进程被杀死并重新生成，否则将被重用于下一个任务。这样你就不受单机限制，可以轻松横向扩展。

还尝试检查工人是如何在[travis-ci中实现的](https://github.com/travis-ci/travis-ci/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T22:00:41.330

还有另一个模块可以完成这项工作 - [vm2](https://github.com/patriksimek/vm2)。与`sandbox`它不同的是，它允许您使用列入白名单的内置节点对象安全地运行不受信任的代码。

# iphone - 测试 iphone 应用程序时发生未知错误

> ID：11646745
> 
> 赞同：1
> 
> 时间：2012-07-25T09:31:48.503
> 
> 标签：iphone, xcode

我正在 xcode 中测试 iphone 应用程序，但它给出了 unkonwo 错误

应用程序在应用程序启动结束时应该有一个根视图控制器 wait_fences: failed to receive reply: 10004003

我不知道为什么加载视图时它会破坏应用程序并给出此错误

```
 My code where it breaks 

    - (void)viewDidLoad {
      [super viewDidLoad];
      if(!surveyList){
      surveyList=[[NSMutableArray alloc]init];
       }

      [self getSurveyList];

       }

      - (void)getSurveyList {

       NSString*user_id=user_id;
       NSLog(user_id);
      NSString *url=[NSString stringWithFormat:@"http://celeritas-solutions.com/emrapp/surveyDescription.php?user_id=%@",user_id];

    NSArray *tempArray =[[DataManager staticVersion] startParsing:url];

   for (int i = 0; i<[tempArray count]; i++) {

    id *item = [tempArray objectAtIndex:i];
    NSDictionary *dict = (NSDictionary *) item;
    ObjectData *theObject =[[ObjectData alloc] init];
    [theObject setSurvey_title:[dict objectForKey:@"survey_Title"]];
    [theObject setSurvey_Description:[dict objectForKey:@"survey_Description"]];    
    [theObject setDate_Created:[dict objectForKey:@"date_Created"]];

    [surveyList addObject:theObject];
    [theObject release];
    theObject=nil;

    int count =[surveyList count];
    NSLog(@"Total is %d",count);

    }
   } 
```

从视图中调用此方法时出现此错误确实加载方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:33:14.800

您必须在 AppDelegate 中设置 rootController

```
[self.window setRootViewController:tabBarController]; 
```

使用 %i 而不是 %d

```
int count =[surveyList count];
NSLog(@"Total is %i",count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:03:20.113

您必须在 AppDelegate.m 文件中设置以下方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]  autorelease];
// Override point for customization after application launch.
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
} else {
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
}
UINavigationController *navigation =[[UINavigationController alloc]initWithRootViewController:self.viewController];
 navigation.navigationBar.hidden=YES;
self.window.rootViewController = navigation;
[self.window makeKeyAndVisible];
} 
```

# iphone - 如何将数组发送到用户可以选择朋友并发布到他们的 Facebook 墙上的表

> ID：11646746
> 
> 赞同：0
> 
> 时间：2012-07-25T09:31:49.497
> 
> 标签：iphone, ios, facebook, facebook-graph-api, nsarray

我正在使用以下代码调用 Facebook 请求方法，该请求调用委托方法，该方法返回一个带有标记为“数据”的键的 NSDictionary 对象。然后我通过调用**NSArray *data = [result objectForKey:@"data"];**

然后代码循环遍历该数组并提取将它们输出到控制台的名称。

我遇到的问题是如何将此数组发送到用户可以选择朋友并发布到他们的 FB 墙上的表格。

谢谢你的帮助 ：）

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

[[delegate facebook] requestWithGraphPath:@"me/friends" andDelegate:self];

// get the array of friends                
NSArray *data = [result objectForKey:@"data"];

NSMutableArray *array = [NSMutableArray array];    
                for (int i = 0; i < data.count; i++){
                    id object = [data objectAtIndex:i];
                    [array addObject:[object objectForKey:@"name"]];
                }

// output the array of friends
NSLog(@"list of friends %@", array); 
```

我在想我需要类似的东西（我不确定在**objectAtIndex:???**部分中放入什么：

```
[self apiDialogFeedFriend:[[data objectAtIndex:**?????**] objectForKey:@"id"]]; 
```

接着

```
 [self apiGraphFriends]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T10:16:02.200

获取 Facebook 朋友的照片和姓名。数组中的 Stroe

```
 FBRequest* friendsRequest = [FBRequest requestForMyFriends];
[friendsRequest startWithCompletionHandler: ^(FBRequestConnection *connection,
                                              NSDictionary* result,
                                              NSError *error) {
    friends = [result objectForKey:@"data"];
    arr_FaceBookFriendProfileImg = [[NSMutableArray alloc] init];
    arr_FaceBookFriendName = [[NSMutableArray alloc]init];

    for (NSDictionary<FBGraphUser>* friend in friends) {

        NSString *str_FacebookFriendNames;
        str_FacebookFriendNames = friend.name;
        NSString *userPhotoUrl = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture?", friend.id];
        NSURL *url_FriendProfileImage = [NSURL URLWithString:userPhotoUrl];

        [arr_FaceBookFriendName addObject:str_FacebookFriendNames];
        [arr_FaceBookFriendProfileImg addObject:url_FriendProfileImage];

    }
  //  [table_facebookFriends reloadData];
}]; 
```

并显示 TableView

```
 cell.lbl_FriendsProfileName.text = [arr_FaceBookFriendName objectAtIndex:indexPath.row]; 
```

# javascript - 使用正则表达式上课

> ID：11646758
> 
> 赞同：-1
> 
> 时间：2012-07-25T09:32:24.800
> 
> 标签：javascript, jquery, html, regex

```
<span class="here one-two-sdfs test">click1</span> <br />
<span class="here one-two-3er te3st">click2</span> <br />
<span class="here one-two-sdwrer test">click3</span> <br />
<span class="here one-two-s-ere test">click4</span> <br />
<span class="here one-two-wer-r test">click5</span> <br />
<span class="here one-two test">click6</span> <br />

$('.here').click(function(){
    var one-two = ????
    alert(one-two);
    })​ 
```

[小提琴](http://jsfiddle.net/tMzAH/)

我想 -

如果我点击**click1**然后警报显示我**一二自卫队**

如果我点击**click2**然后警报告诉我**one- 2-3er**

如果我点击**click3**然后警报告诉我**one-two-sdwrer**

如果我点击**click4**然后警报告诉我**one-two-s-ere**

如果我点击**click5**然后警报告诉我**one-two-wer-r**

如果我点击**click6**然后提醒我**一二**

我想以**一二**开始的表演课- 我该怎么做？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:38:48.613

[http://jsfiddle.net/tMzAH/10/](http://jsfiddle.net/tMzAH/10/)

```
$('.here').click(function(){
    var onetwo = this.className.match(/\bone-two[^\s]*/);
    console.log(onetwo[0]);
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:39:02.040

[这](http://jsfiddle.net/S4k5p/)应该有效。

```
$('.here').click(function(){
    var one_two = $(this).attr("class").match(/\bone-two\S*/)[0];
    alert(one_two);
    })​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:37:13.823

获取您单击的元素的类名。然后拆分它。您不需要 RegEx ;)

# javascript - 在 javascript 变量中去除部分 HTML 内容

> ID：11646759
> 
> 赞同：0
> 
> 时间：2012-07-25T09:32:24.873
> 
> 标签：javascript, jquery

我有一部分 HTML 页面：

```
<div class="myClass"></div>​ 
```

现在我在 javascript 变量中有一些 html 代码：

```
var alpha = "<div><p>Hello</p><img src='abc.jpg'/></div>"​ 
```

我只想将变量的部分 ie 放在类“myClass”的 div 中。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:37:29.303

```
var alpha = "<div><p>Hello</p><img src='abc.jpg'/></div>";
var img = $(alpha).find('img');
var html = $('<p>').append(img).html();

$('.myClass').append($(html))​ 
```

[http://jsfiddle.net/H64VV/1/](http://jsfiddle.net/H64VV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:40:30.970

```
$(".myClass").html($(alpha).find("img")) 
```

**[工作演示](http://jsfiddle.net/H64VV/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:48:14.023

```
var alpha = "<div><p>Hello</p><img src='abc.jpg'/></div>"
$('.myClass').append($(alpha).find('img')); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T09:35:26.383

尝试这个

`$(".myClass").html(alpha);`

# java - 使用 Intellij Idea 进行远程调试

> ID：11646763
> 
> 赞同：6
> 
> 时间：2012-07-25T09:32:35.317
> 
> 标签：java, intellij-idea, remote-debugging

最近才知道Idea下的远程调试程序。我所做的是在 Run | 下复制远程调试的配置 在idea中调试配置到命令行java执行参数。实际的命令行参数是：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000 
```

如果它是一个脚本，我将这些命令添加到它。通过这样做，命令行会显示以下消息：

```
Listening for transport dt_socket at address: 8000 
```

因此可以使用本地源代码进行调试。但是，我没有正确理解远程调试的工作原理。任何知道远程调试实际上如何工作的人，请给我一个解释。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T09:43:25.850

远程调试意味着您可以在任何地方运行您的 Java 代码，无论是在本地机器上还是在远程机器上。当它在调试模式下运行时，您可以使用 TCP 网络连接从 IDE 连接到它并执行调试。IDE 需要有运行类的源代码，以便您可以在此代码中放置断点并执行单步执行、检查变量等。

如果您对技术细节感兴趣，请参阅[JPDA 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-11T09:56:48.970

考虑一个场景，您想修复应用程序中的某些内容，但由于其他依赖关系，您的应用程序只能在服务器计算机上运行。这就是远程调试出现的地方。您只需通过提供主机名和端口来连接服务器，并将其与您各自的环境连接。

**这个怎么运作：**

1.  要调试的应用程序将附加一个套接字到自身，然后将开始侦听调试指令。
2.  调试器会将自己绑定到该套接字，然后发送指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-15T10:55:46.860

这是测试您在不同环境中的代码的最佳方法。

在您使用远程调试之前，我们需要确定以下几点。

1.  我们在我们的服务器中使用 JBOSS。
2.  配置-JBOSS_HOME/bin/run.conf JAVA_OPTS="${JAVA_OPTS} -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n"

3.  现在将服务器 IP 和端口号添加到 intellij 远程调试中。4.您应该在本地拥有与服务器同步的最新版本的项目，否则将不允许调试。

4.  您需要为项目启动 intellij 服务器。
5.  然后开始远程调试。
6.  在本地放置一个调试点，当我们在服务器中开始测试时，当它到达调试点时，它将停止并等待您处理它。

另一点是，它将把所有的请求都保存在队列中，并且不允许任何人通过断点，这可能会阻止其他用户对其进行测试。

# c++ - 使用 BOOST_ASIO_DISABLE_IOCP 的缺点是什么？

> ID：11646765
> 
> 赞同：1
> 
> 时间：2012-07-25T09:32:48.770
> 
> 标签：c++, asynchronous, boost-asio

我已阅读文档，并且了解可以使用`BOOST_ASIO_DISABLE_IOCP`预处理器定义来调用`cancel()`Windows XP 中的套接字。然后 Boost 库将使用`select`基于 - 的解决方案，一切都应该正常工作。

如果这种说法是正确的，那么基于 - 的方法的缺点是什么`select`？为什么我们不应该总是定义`BOOST_ASIO_DISABLE_IOCP`？

* * *

**编辑 1**

我已经编译了`BOOST_ASIO_DISABLE_IOCP`定义的DLL，没有问题。不幸的是，在与最终应用程序集成后，我遇到了内存访问错误。我缺少任何其他配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:11:11.360

IOCP 应该提供*更好的*性能。

顺便说一句，你真的必须使用`cancel`吗？请注意，取消套接字上的 i/o 操作后，您不知道数据流的实际状态是什么，因此您需要一种复杂的方法来与您的对等方同步。因此，通常正确的方法是`close`使用套接字。

> 不幸的是，在与最终应用程序集成后，我遇到了 memmroy 访问错误。

也许，您有几个使用 Boost.Asio 标头的模块，但没有为*所有*模块定义 BOOST_ASIO_DISABLE_IOCP ，从而导致 ODR 违规？

# null - 不打印任何内容的空整数值 vb.net

> ID：11646768
> 
> 赞同：0
> 
> 时间：2012-07-25T09:32:58.100
> 
> 标签：null, integer

我对这种价值有疑问。

我使用 WebServices 类，我不能修改，它们是这样的..

```
Public ClientReference As String

Public Passenger1_Salutation As String
Public Passenger1_FamilyName As String
Public Passenger1_FirstName As String
Public Passenger1_PassengerType As String
Public Passenger1_PassengerAge As Integer

Public Passenger2_Salutation As String
Public Passenger2_FamilyName As String
Public Passenger2_FirstName As String
Public Passenger2_PassengerType As String
Public Passenger2_PassengerAge As Integer 
```

并遵循直到`Passenger12`（具有他的五个属性）

如果我只使用两个 passsengers 发送，默认情况下字符串值为空（没有 xml 标签），但如果它没有值，则打印一个整数值，打印一个 0，这对我来说是一个值。而且我不希望一个值为空或 0 的值不创建任何标签。

我的班级创造了这个..

```
 <ClientReference>9124983</ClientReference>
  <Passenger1_Salutation>MR/S</Passenger1_Salutation>
  <Passenger1_FamilyName>TestAp11</Passenger1_FamilyName>
  <Passenger1_FirstName>Test11</Passenger1_FirstName>
  <Passenger1_PassengerType>AD</Passenger1_PassengerType>
  <Passenger1_PassengerAge>30</Passenger1_PassengerAge>
  <Passenger2_Salutation>MR/S</Passenger2_Salutation>
  <Passenger2_FamilyName>TestAp12</Passenger2_FamilyName>
  <Passenger2_FirstName>Test12</Passenger2_FirstName>
  <Passenger2_PassengerType>CH</Passenger2_PassengerType>
  <Passenger2_PassengerAge>10</Passenger2_PassengerAge>
  <Passenger3_PassengerAge>0</Passenger3_PassengerAge>
  <Passenger4_PassengerAge>0</Passenger4_PassengerAge>
  <Passenger5_PassengerAge>0</Passenger5_PassengerAge>
  <Passenger6_PassengerAge>0</Passenger6_PassengerAge>
  <Passenger7_PassengerAge>0</Passenger7_PassengerAge>
  <Passenger8_PassengerAge>0</Passenger8_PassengerAge>
  <Passenger9_PassengerAge>0</Passenger9_PassengerAge>
  <Passenger10_PassengerAge>0</Passenger10_PassengerAge>
  <Passenger11_PassengerAge>0</Passenger11_PassengerAge>
  <Passenger12_PassengerAge>0</Passenger12_PassengerAge> 
```

但我需要知道如何才能不将整数属性实例化为 xml 应该是这样的（不修改类，我可以将此属性作为字符串，但不能修改）

```
 <ClientReference>9124983</ClientReference>
  <Passenger1_Salutation>MR/S</Passenger1_Salutation>
  <Passenger1_FamilyName>TestAp11</Passenger1_FamilyName>
  <Passenger1_FirstName>Test11</Passenger1_FirstName>
  <Passenger1_PassengerType>AD</Passenger1_PassengerType>
  <Passenger1_PassengerAge>30</Passenger1_PassengerAge>
  <Passenger2_Salutation>MR/S</Passenger2_Salutation>
  <Passenger2_FamilyName>TestAp12</Passenger2_FamilyName>
  <Passenger2_FirstName>Test12</Passenger2_FirstName>
  <Passenger2_PassengerType>CH</Passenger2_PassengerType> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T09:49:18.313

原始类型（整数等）没有`null`( `Nothing`) 值 - 未分配的整数是`0`. 但是，VB.NET 提供`Nullable Types`了`Nothing`. 创建它们很容易 - 只需`?`在变量声明的末尾添加一个：

```
Public Passenger1_Salutation As String
Public Passenger1_FamilyName As String
Public Passenger1_FirstName As String
Public Passenger1_PassengerType As String
Public Passenger1_PassengerAge As Integer? 
```

此时，在赋值之前，输出：

```
Console.WriteLine("Passenger1_PassengerAge: " & Passenger1_PassengerAge) 
```

将会：

```
Passenger1_PassengerAge: 
```

而*不是* `Passenger1_PassengerAge: 0`。您现在可以安全地测试`Passenger1_PassengerAge Is Nothing`.

然而，有几个陷阱需要注意：

## 修改值

如果您尝试使用普通整数：

```
Dim i As Integer
i += 5
Console.Write(i) 
```

输出将是`5`. `i`被初始化为`0`，然后`5`被添加 - 显然，`0 + 5 = 5`

但是，请注意 a 会发生什么`Integer?`：

```
Dim i As Integer?
i += 5
Console.Write(i) 
```

输出什么都没有！根据编译器的配置方式，它要么不输出任何内容，要么编译失败并出现错误。这是因为在初始化时，`i`被初始化为`Nothing`，而*不是* `0`: `Nothing + 5 = Nothing`。如果你想让它起作用，你必须先明确说明，`i = 0`然后再尝试使用它。

## 赋值前参考

使用 normal `Integer`，您可以声明它并立即获取其类型：

```
Dim i As Integer
Console.Write(i.GetType()) 
```

哪个将输出`System.Int32`（这是`Integer`在 32 位计算机上内部表示的方式）。没问题。但是，在尝试相同时会出现更大的问题`Integer?`：

```
Dim i As Integer?
Console.Write(i.GetType()) 
```

**碰撞！**你的程序抛出一个`NullReferenceException`并死掉。如果我在这里错了，有人可以编辑我，但我相信这是因为`Integer?`在内部表示为对象而不是原语 - 并且`GetType()`试图获取尚不存在的对象的类型，因此它崩溃了。

* * *

除了这些，`Nullable Types`将解决您遇到的问题。

我应该指出，无论如何，您的课程设计似乎效率很低。考虑编写一个`Passenger`类或结构，并将上面的代码完全替换为包含`Passenger`s 集合的类：

```
Structure Passenger
    Public Passenger_Salutation As String
    Public Passenger_FamilyName As String
    Public Passenger_FirstName As String
    Public Passenger_PassengerType As String
    Public Passenger_PassengerAge As Integer?
End Structure

Class MyClass
    Public Passengers() As Passenger
    'etc
End Class 
```

# ios - 将请求特定的 HTTP 标头与 RestKit 一起使用

> ID：11646775
> 
> 赞同：0
> 
> 时间：2012-07-25T09:33:18.840
> 
> 标签：ios, restkit

我必须使用自定义授权方案与 REST API 通信。它使用我需要根据请求内容设置的授权标头，因此服务器可以检查我是否知道该方案。

我想使用 RestKit 及其强大的核心数据利用率，但我发现很难找到一种巧妙的方法来为每个不同的请求设置此标头。在每个请求之前调用 RKObjectManager 上的委托之类的东西并不存在。

也许我错过了一些东西，有人可以告诉我是否有一种简单的方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:33:27.773

你可以做类似的事情

```
[RKObjectManager sharedManager] postObject:yourObjectToPost usingBlock:^(RKObjectLoader *loader) {
    NSDictionary* httpHeaders =@{@"key1":@"value1",
                                @"key2":@"value2",
                                @"key3":@"value3"};
    loader.additionalHTTPHeaders = httpHeaders;
    loader.delegate = self;
}]; 
```

# actionscript-3 - Google IMA Flash SDK - Flash 广告未触发完成事件

> ID：11646779
> 
> 赞同：1
> 
> 时间：2012-07-25T09:33:35.183
> 
> 标签：actionscript-3, flash

我正在使用 Google IMA Flash SDK（AS3 版本）将前贴片视频广告添加到 Flash 视频播放器。

我正在使用不同的 VAST 代码对其进行测试，看看它的表现如何。当使用带有“视频”类型的广告的 VAST 代码（Google 示例代码）时，一切正常，它会按预期触发所有事件。

但是，当我使用包含“FLASH”类型广告的 VAST 代码时，它不会触发某些事件，最重要的是“COMPLETE”事件。

其他人有没有遇到过这些问题，你是如何解决的？

我做了一些阅读，文档指出对于 Flash 广告，它不会触发“完成”事件，但是我应该如何知道视频广告何时结束，以便我可以重新开始视频内容？

# c# - 四处移动代码会导致“无法识别的标签前缀或设计过滤器”错误

> ID：11646782
> 
> 赞同：0
> 
> 时间：2012-07-25T09:33:44.657
> 
> 标签：c#, asp.net, componentart

我有一个 Visual Web Developer 2010 Express Edition Web 应用程序。`Default.aspx`开始如下：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MixedZone.Default"%>
<%@ Register assembly="ComponentArt.Web.UI"
             namespace="ComponentArt.Web.UI"
             tagprefix="ComponentArt" %>
<%@ Register TagPrefix="MixedZone"
             TagName="NumberInput"
             Src="Common/UserControls/NumberInput.ascx" %> 
```

NumberInput.ascx 的开头是这样的：-

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="NumberInput.ascx.cs" Inherits="MixedZone.UserControls.NumberInput" %>
<%@ Register assembly="ComponentArt.Web.UI" namespace="ComponentArt.Web.UI" tagprefix="ComponentArt" %>
<asp:Literal ID="Literal1" runat="server" Visible="False"></asp:Literal>
<ComponentArt:NumberInput ID="niNumberInput"
                          runat="server"
                          CssClass="valid"
                          ...etc 
```

到现在为止还挺好。但我希望将此代码移动到不同的目录。我这样做（手动编辑 csproj 文件）并相应地更改 aspx 和 aspc 文件：-

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="MixedZone.Default"%>
<%@ Register assembly="ComponentArt.Web.UI"
             namespace="ComponentArt.Web.UI"
             tagprefix="ComponentArt" %>
<%@ Register TagPrefix="MixedZone"
             TagName="NumberInput"
             Src="../MixedZone/Common/UserControls/NumberInput.ascx" %> 
```

和

```
<%@ Control Language="C#" AutoEventWireup="True" CodeBehind="../MixedZone/Common/UserControls/NumberInput.ascx.cs" Inherits="MixedZone.UserControls.NumberInput" %>
<%@ Register assembly="ComponentArt.Web.UI" namespace="ComponentArt.Web.UI" tagprefix="ComponentArt" %>
<asp:Literal ID="Literal1" runat="server" Visible="False"></asp:Literal>
<ComponentArt:NumberInput ID="niNumberInput"
                          runat="server"
                          CssClass="valid"
                          ...etc 
```

但是当我这样做时， ComponentArt: 用绿色下划线标记，并且消息

> 无法识别的标签前缀或设备过滤器“ComponentArt”

（结果出现了大约五百个编译错误）。目录 Common\UserControls 已全部移动，没有其他任何更改。有谁知道问题可能是什么以及我可能会做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:26:44.100

我通过使用 SubVersion 将代码包含在旧位置中解决了这个问题，即使它不是“真的”在那里。我不太喜欢这个，因为它看起来像是一个聪明的技巧和未来维护的陷阱。但是如果它不在项目的下面，它就没有目录，如果我把它放在那里，它就不会遵循快捷方式。

# java -

> ID：11646783
> 
> 赞同：0
> 
> 时间：2012-07-25T09:33:45.933
> 
> 标签：java, json

```
JSONObject jsonObject;
try {
    int ch;
    StringBuffer b = new StringBuffer();
    System.out.println("Before second while loop");
    while((ch=is.read())!= -1) {
        b.append((char) ch);
    }
    jsonObject = new JSONObject(b.toString());
    String statusStr =  jsonObject.getString("status");
    String responseCode = jsonObject.getString("responseCode");
    Log.e("","JSON STATUS"+statusStr);
    Log.e("","JSON RESPONSE"+responseCode); 
```

I am getting error org.json.JSONException: Value at

```
jsonObject = new JSONObject(b.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:57:08.553

Your string in `new JSONObject(String)` should be in braces. Begin from `{` and end with `}`

Also you should have JSON formatted text in your string, like in example

```
{"person": {"id": "1", "firstName": "first", "lastName": "last", "middleName": "middle"}, "key" : "value" } 
```

# ruby-on-rails - 如果在 1 行中，则 ruby on rails 会缩短

> ID：11646791
> 
> 赞同：0
> 
> 时间：2012-07-25T09:34:00.533
> 
> 标签：ruby-on-rails, function, line

`code`我正在`shorten`尝试的`one line`：

```
 if !request.xhr?
                    render_404
                    return
            end 
```

从这个函数

```
def request_invite
    render_404 unless request.xhr?

        @invitation = Invite.new(params[:invite])

        if @invitation.save
            @return = { :error => false, :response => "OK" }
        else
            @return = { :error => true, :response => @invitation.errors.full_messages.join("<br />") } 
        end

        render :json => ActiveSupport::JSON.encode( @return )

end 
```

我试过了

```
 render_404 return unless request.xhr? 
```

但我得到：

```
invites_controller.rb:4: void value expressio render_404 return unless request.xhr? 
```

我应该坚持使用上述有效的代码还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:36:23.077

也许是这样：

```
(render_404; return) unless request.xhr? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:37:37.953

为什么需要`return`? 函数体不包含任何其他内容。如果有，请注意。

```
def request_invite
   render_404 unless request.xhr?
end 
```

主要问题是你不能在一行中写两个命令而不分开，它试图评估它，但它在语法上是不正确的。

更新：

```
def request_invite
    unless request.xhr? then render_404; return; end

    @invitation = Invite.new(params[:invite])

    if @invitation.save
        @return = { :error => false, :response => "OK" }
    else
        @return = { :error => true, :response => @invitation.errors.full_messages.join("<br />") } 
    end

    render :json => ActiveSupport::JSON.encode( @return )

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:35:50.673

你可以试试这个：

```
def request_invite
  render_404 return unless request.try(:xhr?)
end 
```

# c++ - C ++如何解析这个字符串

> ID：11646796
> 
> 赞同：1
> 
> 时间：2012-07-25T09:34:06.960
> 
> 标签：c++

我有一小段代码需要解析

我只想要这样的价值

长名（短名），例如欧元 (EUR) 或英镑 (GBP)

并以这种方式使用C++将其输出到file.txt中

欧元 (EUR)
英镑 (GBP)

```
{
        "shortname": "EUR",
        "longname": "Euro",
        "users":  "Austria,Belgium,Cyprus,Finland,Helsinki,France,Paris,Germany,Berlin,Greece,Athens,Ireland,Dublin,Italy,Rome,Milan,Pisa,Luxembourg,Malta,Netherlands,Portugal,Sl$
                "alternatives": "ewro,evro",
        "symbol": "€",
        "highlight": "1"
    },
    {
        "shortname": "GBP",
        "longname": "British Pound",
        "users":  "United Kingdom,UK,England,Britain,Great Britain,Northern Ireland,Wales,Scotland,UK,Isle of Man,Jersey,Guernsey,Tristan da Cunha,South Georgia and the South San$
        "alternatives": "Quid,Pound Sterling,Sterling,London,Cardiff,Edinburgh,Belfast",
        "symbol": "£",
        "highlight": "1"
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:36:18.913

它是 JSON。你最好使用解析器。我建议你`jsonCpp`（[链接](http://jsoncpp.sourceforge.net/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:31:07.200

您可以使用 lex 和 yacc。这样做的好处是没有外部库依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:46:52.730

我建议你[http://www.boost.org/doc/libs/1_50_0/doc/html/property_tree.html](http://www.boost.org/doc/libs/1_50_0/doc/html/property_tree.html)

用法示例。

```
#include <boost/property_tree/ptree.hpp>
#include <boost/property_tree/json_parser.hpp>
#include <sstream>
#include <iostream>

int main()
{
   using namespace boost::property_tree;
   std::string s = "{\
        \"shortname\": \"EUR\",\
        \"longname\": \"Euro\",\
        \"users\":  \"Austria,Belgium,Cyprus,Finland,Helsinki,France,Paris,Germany,\
        Berlin,Greece,Athens,Ireland,Dublin,Italy,Rome,Milan,Pisa,Luxembourg,Malta,Netherlands,Portugal\",\
        \"alternatives\": \"ewro,evro\",\
        \"symbol\": \"€\",\
        \"highlight\": \"1\"\
    }";
    std::stringstream ss(s);
    ptree pt;
    json_parser::read_json(ss, pt);
    std::string short_n = pt.get<std::string>("shortname");
    std::string long_n = pt.get<std::string>("longname");
    std::cout << long_n << "(" << short_n << ")" << std::endl;
} 
```

[http://liveworkspace.org/code/7b9bf87f128a2fe42d606305f4411771](http://liveworkspace.org/code/7b9bf87f128a2fe42d606305f4411771)

# android - 如何在工作灯的应用程序内使用适配器

> ID：11646797
> 
> 赞同：0
> 
> 时间：2012-07-25T09:34:08.677
> 
> 标签：android, jquery, ibm-mobilefirst

我是工作灯的新手。现在我开始使用适配器。检查这个链接我的一个stackoverflow朋友有同样的疑问[点击这个](https://stackoverflow.com/questions/11644613/how-to-calling-a-stored-procedure-in-worklight)调用应用程序内的程序。我使用的适配器是 SqlAdapter。但是在 ibm worklight 教程中，他们给出了 HttpAdapter 的示例并将该过程包含在函数中。但不适用于 SqlAdapter。如果有任何建议，请告诉我。如果你想要我的来源，我会准备好提供。我的研究仍在继续

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T22:47:36.387

从应用程序到适配器的调用对于所有类型的适配器都是相同的。

```
function getData() {
var invocationData = {
        adapter : 'ADAPTER_NAME',
        procedure : 'PROCEDURE_NAME',
        parameters : []
    };

WL.Client.invokeProcedure(invocationData,{
    onSuccess : getDataSuccess,
    onFailure : getDataFailure,
});
} 
```

有关更多信息，请查看[模块 6 - 从客户端应用程序调用适配器过程 (PDF, 370KB)](http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/Module_06_-_Invoking_Adapter_Procedures_from_the_Client_Applications.pdf)以及[练习和代码示例 (ZIP, 53.7KB)](http://public.dhe.ibm.com/ibmdl/export/pub/software/mobile-solutions/worklight/docs/module_06_0_EngadgetReader.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T05:52:23.523

![在此处输入图像描述](../Images/a1ab426b11c6f61dd0092e6966be698f.png)

在这里，我检索了值。但它没有显示在 html 页面中。这是我的代码

```
function wlCommonInit(){
    // Common initialization code goes here
    WL.Logger.debug("inside the wlcommoninit");
    busyIndicator = new WL.BusyIndicator('AppBody');
    getData();

}

function loadFeedsSuccess(result){
    WL.Logger.debug("Feed retrieve success");

}

function loadFeedsFailure(result){
    WL.Logger.error("Feed retrieve failure");

}

function getData() {
    var invocationData = {
            adapter : 'SqlAdap',
            procedure : 'procedure1',
            parameters : []
        };

    WL.Client.invokeProcedure(invocationData,{
        onSuccess :  loadFeedsSuccess,
        onFailure : loadFeedsFailure,
    });
    } 
```

# cross-platform - 在制作跨平台数据存储代码时我应该关心位字节序吗？

> ID：11646803
> 
> 赞同：1
> 
> 时间：2012-07-25T09:34:20.983
> 
> 标签：cross-platform, endianness

当我在磁盘（或内存）上保存一些二进制数据时，如果数据必须跨多个平台可移植，我应该关心字节序。但是**位字节**序呢？可以忽略吗？

我认为这可以忽略不计，但可能存在一些陷阱，所以我喜欢听听其他意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:47.373

位总是以**相同的方式**排列在一个字节中，尽管有一些奇特的架构，其中一个字节不是 8 位。在现代计算中*，您可以安全地假设一个 8 位字节*。

不同的是（正如您正确指出的那样）是字节排列 - 确实是您应该注意的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:33:35.473

当 PowerPC 流行时（由于 Mac 使用它），大端与小端更重要。既然主要的操作系统（Windows、OS X、iOS、Android）和硬件平台（x86、x86-64、ARM）都是 little-endian 的，这已经不是什么大问题了。

# android - 使用本机播放器播放时，视频无法使用 VideoView 播放

> ID：11646805
> 
> 赞同：3
> 
> 时间：2012-07-25T09:34:25.643
> 
> 标签：android, video, video-streaming, native

这是我的代码。在这种情况下，如果我使用它播放的视频 url 启动意图，而它在 videoview 中不播放，是否有任何方法可以让它在 VideoView 中工作

```
VideoView mVideoView = new VideoView(this);
String videoURL = "video_url";
mVideoView.setMediaController(new MediaController(this));
mVideoView.setVideoURI(Uri.parse(videoURL));

setContentView(mVideoView); 
```

当本机播放器播放视频时

```
Intent theIntent = new Intent();
theIntent.setDataAndType(Uri.parse(videoURL), "video/*"); 
```

我也在设备上测试了这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:47:22.133

试试下面的方法

```
 VideoView videoView = (VideoView) findViewById(R.id.VideoView);
            MediaController mediaController = new MediaController(this);
            mediaController.setAnchorView(videoView);
            // Set video link (mp4 format )
            Uri video = Uri.parse("mp4 video link");
            videoView.setMediaController(mediaController);
            videoView.setVideoURI(video);
            videoView.start(); 
```

参考这个链接

[https://stackoverflow.com/a/6410421/1441666](https://stackoverflow.com/a/6410421/1441666)

并检查支持的格式[Android Supported Media Formats](http://developer.android.com/guide/appendix/media-formats.html)

[https://stackoverflow.com/a/8714189/1441666](https://stackoverflow.com/a/8714189/1441666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:55:49.900

我认为这可能会有所帮助。

```
VideoView view = (VideoView) findViewById(R.id.xxxx);

MediaController mc = new MediaController(this);
mc.setMediaPlayer(view);
view.setMediaController(mc);
try{
    view.setVideoURI(Uri.parse(file_path));
} catch(){
}
view.requestFocus();
try{
    view.start();   
}catch(){
} 
```

# authentication - 实现“真正的”单点登录：OpenID、其他东西还是自定义黑客？

> ID：11646807
> 
> 赞同：1
> 
> 时间：2012-07-25T09:34:30.330
> 
> 标签：authentication, web-applications, single-sign-on

我们正在尝试评估一种解决方案，以便为多个（已经存在的）Web 解决方案实施“真正的”SSO。真正的 SSO 在这里意味着登录任何服务，并在所有服务上进行身份验证，而无需用户采取进一步行动。

我们将使用的所有应用程序都支持 OpenID 和/或具有允许 OpenID 的插件，所以这似乎是值得研究的东西。但是，据我了解 OpenID，用户仍需要在每项服务中输入其 OpenID 凭据。

一旦 OpenID 提供者对用户进行了身份验证，是否有一种明智的方法来实现具有自动登录的 SSO？

在较早的项目中，我们在两个应用程序（都在同一个域和服务器上运行）的登录过程中破解了 PHP 会话数据，因此第一个应用程序中的登录也会为另一个应用程序创建会话数据。但是，这是一个非常老套的解决方案，并且在更新任何一个应用程序时都容易崩溃，因此我们这次试图避免它。

还有其他我们可以研究的 SSO 解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:28:50.863

我假设您可以控制 SSO 的实施

您可以做一些事情来确保一旦用户被 SSO 应用程序识别，他将几乎自动登录到您的其他应用程序

1.  在您的 SSO 应用程序中，创建服务提供商白名单。来自这些网站的身份验证请求将被自动批准。因此，不会要求用户手动批准请求
2.  在您的应用程序中，将 return_to 参数设置为用户打算立即打开的页面。不要简单地将 return_to 设置为该应用程序主页

顺便说一句，最标准的 openid 实现接受任何 url。但是，如果您想在受控环境中使用 sso，您可以将服务提供者设置为具有受信任身份提供者的白名单。毕竟是服务提供商发起了openid认证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T08:58:16.993

是的，有办法做到这一点。运行基于节点的应用程序服务器，并注册跨域技术以提供 cookie 凭据（在每个新用户到达时由站点握手支持，以更好地扩展并最小化每个会话的资源支出）。

我现在正在研究这样一个野兽，我已经完成了 5/6。

我已经预先处理了几个烦人的变量——包括确保唯一用户登录的方法——并且我对其他问题采取了立场——一个人无法在一个系统中完成所有事情。然而，如果一个人愿意停下来，就可以拥有一个真正的 SSO。您的站点将定义您的解决方案。如果您没有准确地描述您的局限性，那么这里就没有可以提供实施的解决方案，而且您的问题的本质是完全实施而不是理论。理论上，您有 4-5 种不同的选择。在实践中，您会找到答案。

# sql - 具有多个连接条件的父子关系上的 SQL 选择

> ID：11646810
> 
> 赞同：0
> 
> 时间：2012-07-25T09:34:38.597
> 
> 标签：sql, oracle

我与以下子表有父/子关系：

```
 CHILD_ID    PARENT_ID    CHILD_VALUE
------------------------------
1           1            x
2           1            y
3           2            y 
```

现在我想选择 CHILD_VALUE 所在的所有现有不同父母：

*   child 有 value = x （只有 1 或没有）
*   如果不存在值为 x 的孩子 - NULL

换句话说，如果没有孩子“匹配”该值，则显示所有具有“匹配”孩子的父母或 NULL。

所以结果应该是这样的：

```
 PARENT_ID    CHILD_ID    CHILD_VALUE
------------------------------
1            1           x
2            NULL        NULL 
```

问题是在这种情况下我如何缩小加入范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:51:44.833

这可以解决问题：

```
select distinct a.parent_id, b.child_id, b.child_value
  from test1 a
  left outer join test1 b
               on a.parent_id = b.parent_id
              and b.child_value = 'x' 
```

另请参阅此[SQL fiddle](http://sqlfiddle.com/#!4/e6683/3)。

# android - 无法将我的应用程序启动到模拟器中

> ID：11646813
> 
> 赞同：1
> 
> 时间：2012-07-25T09:34:41.807
> 
> 标签：android, eclipse, emulation

我正在用 Eclipse 4 中的 Libgdx 开发一个应用程序。我的电脑有一个 Ubuntu 12.04。但是从前一段时间，我无法在模拟器上测试我的应用程序：模拟器已启动，检测到，但是在我的模拟器的目标字段中有一个红十字（而不是绿色标记）并且我的应用程序不是更新到它：

![在此处输入图像描述](../Images/6681d66d6a8b4d3112bc1740f06092f5.png)

我还注意到我无法在模拟器桌面上为我的应用程序创建快捷方式：它似乎不存在！（当我从模拟器启动新 -> 快捷方式 -> 应用程序时）

有人知道如何解决这个问题吗？

如果我的问题表述不当，请提前致谢并道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:39:53.653

红叉表示您的程序与模拟器版本不兼容。例如，当您为 Android 2.0 开发并拥有 Android 1.5 模拟器时。它可能仍然在模拟器上运行。按确定，看看它是否运行。如果没有为您的程序需要的 Android 版本创建模拟器

# php - PHP静态变量内存使用

> ID：11646816
> 
> 赞同：4
> 
> 时间：2012-07-25T09:35:01.050
> 
> 标签：php

我一直想知道静态变量在内存使用方面是如何工作的，甚至应该考虑吗？

我知道静态变量只会占用一个内存区域，与类本身有多少实例无关。所以从这个意义上说，使用静态变量来消耗内存也应该是明智的，对吧？但我从未偶然发现有人谈论静态变量的内存使用情况（只是你可以与不同的实例共享数据）。

例如：

```
class Something () {
    static $DB = null;
    __construct ($DB) {
        $this->DB = $DB;
    }
} 
```

如果我要创建 10 个此类的实例，那么与使用非静态 $DB 变量相比，它会产生更少的内存使用量，对吧？

而如果是这样的话，是不是影响那么小，真的无所谓吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:41:45.510

> 甚至应该真正考虑到这一点吗？

`static`不，您不应该为此担心s 。

您必须担心使用的`static`原因是您无法再对代码进行单元测试，并且您拥有紧密耦合的类和代码`Something::DB`（即Something 类）并且您正在使用全局状态。

另请查看我之前关于如何处理这些“全局”实例的回答：[在函数中访问配置的最佳实践是哪个？](https://stackoverflow.com/questions/11508170/which-is-the-best-practice-to-access-config-inside-a-function/11527094#11527094)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T09:45:22.103

在您的情况下，请重新考虑您的软件设计。在使用静态变量的情况下-您正在尝试（如果不是，那为什么需要静态变量？）使某些东西可以从一个地方访问，而无需重新创建它，例如使用单例模式来制作 db 对象的单个实例。

但是，如果我们谈论的是内存使用情况，那么是的，如果您将创建更多对象，那么您会复制变量 - 这将占用更多内存，但是关于其静态与否的内存使用情况并没有真正的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T09:42:39.830

是的，类的静态属性将存储在单个内存实例中。

但是，在决定将变量设为静态时，这不是问题。它们用于类级别信息，例如保持类实例的计数。

阅读以下有关何时使用静态变量的 Stackoverflow 帖子：

*   [什么时候在 php 中使用静态变量/函数？](https://stackoverflow.com/questions/1257371/when-do-i-use-static-variables-functions-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:47:37.280

1.  你应该使用

    自我::$DB

访问静态变量（`$this`在类范围的上下文中没有意义）

1.  应该`static`用于该类的所有对象共享的东西。

2.  您不应使用构造函数中的参数来创建静态变量。这样做会在您创建该类型的新对象时覆盖静态变量

# php - 如何制作一个php脚本来创建一个html文件？

> ID：11646817
> 
> 赞同：-1
> 
> 时间：2012-07-25T09:35:03.747
> 
> 标签：php, file, fopen

嗯....我想知道如何制作一个脚本来创建一个html页面。所以当脚本执行时，它会创建一个新页面。像这样的东西： mydomain.com/test.html 。该脚本应该创建 test.html 页面！

这是我的工作：

```
<form action="index.php" method="post">
<input type="text" name="nick" value="Enter NIck" />
<input type="submit" value="Create" />
</form>

<?php

$nick=$_POST['nick'];      // get the users input

$fh=fopen('$nick' , 'W')    // Create the page
$contents= include 'sys.php';
fwrite($fh, $contents);
fclose($fh);

echo "Redridectring to your page....";

header('Location: $nick');

?> 
```

现在，这段代码应该做的是创建一个名为 $nick 的页面。因此，如果输入是“bleugh”，则 $nick 应该是 $nick="bleugh"。然后它将创建页面“bleugh”，包括 sys.php，然后是页面的标题。这是赖特吗？它会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:39:31.093

您不能在单引号内以这种方式使用 PHP 变量

没问题：

```
"{$nick}" 
```

不会工作：

```
'$nick' 
```

但我不确定你想用“$contents=include 'sys.php';”做什么？也许您想将 sys.php 的输出捕获到一个字符串中？无论哪种方式，你都需要小心你打开自己的漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:46:13.273

我认为您通过创建文件然后重定向到文件的方法基本上是可以的。附加评论：

1.  确保 PHP 进程对您写入的文件夹具有写入权限。
2.  你真的必须包含 sys.php 吗？当你真的想创建一个 HTML 文件时，你需要在 $contents 中写入适当的 html 标签。
3.  您应该在输出任何字符之前执行重定向，因此您的重定向将不起作用，因为它前面有一个回显操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:46:39.733

尝试这个

```
 header('Location: '.$nick.''); 
```

# mysql - 获取查询以命中索引 - 搜索字符串的前缀

> ID：11646819
> 
> 赞同：0
> 
> 时间：2012-07-25T09:35:11.163
> 
> 标签：mysql, performance, indexing

我正在尝试获取查询以命中索引。

场景是这样的：

> 给定一个字符串 - 查找列“str”是该字符串的子字符串的所有行

我试过类似的东西：

```
SELECT str FROM tbl WHERE 'fullstring' LIKE CONCAT(str, '%'); 
```

但是 - 这不会命中我在使用 . 检查查询时创建的索引`EXPLAIN EXTENDED`。

在最坏的情况下，我可以通过使用嵌套集稍微改造数据库来解决这个问题——但我真的很想不必走那条路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:43:23.057

它应该使用索引。如果您的 MySQL 优化器没有选择正确的索引，那么您可以尝试`FORCE KEY`尝试：

```
SELECT str FROM tbl FORCE KEY(index_name) WHERE 'fullstring' LIKE CONCAT(str, '%'); 
```

# c# - 此查询的 lambda 等效项是什么

> ID：11646823
> 
> 赞同：2
> 
> 时间：2012-07-25T09:35:26.383
> 
> 标签：c#, lambda

假设在`SQL`我试图运行这个查询

```
Select * from MyTable where SomeCondition=true 
```

我目前正在为上述查询使用这个 lambda 表达式

```
using(var db=new DataClasses1DataContext())
{
var result=db.MyTable.Where(myTable=>myTable.SomeCondition.Equals(true)).SingleOrDefault();
} 
```

这是正确的方法还是我应该做这样的事情

```
using(var db=new DataClasses1DataContext())
    {
    var result=db.MyTable.Where(myTable=>myTable.SomeCondition.Equals(true)).Select(myTable=>myTable).SingleOrDefault();
    } 
```

谁能建议我正确的方法来进行此类查询`Lambda`？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T09:44:47.390

鉴于您*只是在*过滤、执行身份转换，然后使用，您可以通过使用[predicate的](http://msdn.microsoft.com/en-us/library/bb534956)[重载](http://msdn.microsoft.com/en-us/library/bb534956)`SingleOrDefault`来完成所有操作：[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb534956)

```
using (var db = new DataClasses1DataContext())
{
    var result = db.MyTable.SingleOrDefault(myTable => myTable.SomeCondition);
    // Use result...
} 
```

（如果这样更好，您可以`FirstOrDefault`在此处使用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:38:00.580

请问这部分有必要吗？

```
.Select(myTable=>myTable) 
```

答案是不。它将项目列表转换为相同项目的列表。拉姆达：

```
x => x 
```

是“身份函数”，准确地返回它所传递的内容。

**注意**

其他一些答案建议`FirstOrDefault`作为`SingleOrDefault`. 如果查询可能返回多条记录，而您没有`OrderBy`子句，那么数据库可能会以随机顺序返回结果。所以使用`FirstOrDefault`就像说“随机选择一个”。

如果所有记录都“足够好”（在某种意义上），那可能没问题。如果不是，您应该添加一个`OrderBy`子句，以便第一条记录是“最佳”记录。或者您可能想对符合您条件的*每条*`FirstOrDefault`记录执行操作，在这种情况下，既不使用也不使用 SingleOrDefault`。只需遍历结果。

最后（基于下面的评论）如果您只想知道是否有匹配的记录，但不想检查其内容，请使用`Any`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:46:16.020

你可以这样使用：

使用(var db=new DataClasses1DataContext())

{

```
var result=db.MyTable.Where(x=>x.SomeCondition.Equals(true));

} 
```

现在你会得到结果

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T09:37:52.360

如果您不想投影表格，您甚至不需要选择：

```
using(var db=new DataClasses1DataContext())
{
    var result=db.MyTable.Where(myTable => myTable.SomeCondition);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T09:45:05.943

无需在语句末尾添加以下代码。

```
SingleOrDefault() 
```

为此使用以下代码。

```
using(var db=new DataClasses1DataContext())
{
    var result=db.MyTable.Where(myTable=>myTable.SomeCondition);
} 
```

# css - 如何打印背景图像？

> ID：11646829
> 
> 赞同：0
> 
> 时间：2012-07-25T09:35:35.857
> 
> 标签：css, image

当我单击打印选项背景图像未打印时..你能帮帮我吗？
这是我的CSS

```
.OldNote {  
    background-image: url(/images/icons/arkiv.gif);
    background-repeat: repeat;
    width: 100%;
    height: 100%;
    margin: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:39:10.783

通常，打印或不打印背景图像取决于用户及其浏览器设置。检查您的浏览器设置。

如果您不想依赖它，请不要将图像放在背景中，将其放在页面上的`<img>`-tag 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:07:40.253

我只是补充一点，如果你想让它成为背景，没有办法让它像普通背景一样重复。要将其放在内容下，您可以使用 css 将其添加到内容之前的其他元素中，并赋予两个元素 css **position: absolute**样式，以及 * *z-index: .. **，其中内容的 z-index 会更大.

也许您可能会研究非常相似的全尺寸背景解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:57:58.900

你可以像这样添加一个图像标签，无论你想在哪里显示图像：

```
 <img src="url" class='printableonly' /> 
```

然后在css中，你可以这样做：

```
 @media screen {
      .printableonly{
           display: none;
       }
  }

  @media print{
     .printableonly {

          display: inline;

       }
   } 
```

# python - 在詹金斯的测试结果中添加日志记录

> ID：11646830
> 
> 赞同：2
> 
> 时间：2012-07-25T09:35:37.303
> 
> 标签：python, jenkins, jython, nose

我在詹金斯中使用鼻子来测试一个项目。如果测试失败，我会在控制台收到一份简短的输出报告。无论测试结果如何，我都希望有这个输出。因此，即使测试通过，我也希望能够看到测试输出到 stderr/stdout。

目前我可以通过调用 nose 来关闭日志记录`--nocapture`。然而，这会导致詹金斯默认创建的项目控制台日志下的所有输出。我如何告诉鼻子/捕获将捕获的输出附加到詹金斯中显示的每个测试结果？我`xunit`用来生成一个`junit`兼容的`xml`文件，而 Jenkins 又使用它来生成它的报告。

**编辑：**根据要求提供附加信息

Jenkins 中的网址（在 buildnumber 部分之后）：

`/testReport/testDesignParser.testDesignCsvParser.testDesignCsvParser/testDesignCsvParser/test/?`

我知道这个设计并不漂亮，但现在就是这样。如果重要的话：

```
`testDesignParser.testDesignCsvParser.testDesignCsvParser` 模块  
`testDesignCsvParser` 类  
`test`（成员）测试函数
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:11:18.913

使用最新的 Jenkins，可以在属于`JUnit`. 另外，我用`--nocapture`. 这为我提供了每个测试的控制台输出视图（打开测试时左侧菜单上的一个选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T13:24:29.660

没有办法从您的测试中实现这一点。除非有错误，否则报告生成器根本不会显示输出。

您必须获取 Jenkins 本身的源代码（JUnit runner 内置在其中）并修补报告器或编写您自己的插件。

# ios - 单击并打开 ipad 的相机时出现 uipopover 问题

> ID：11646843
> 
> 赞同：2
> 
> 时间：2012-07-25T09:36:26.523
> 
> 标签：ios, uipopovercontroller

单击并打开 ipad 的相机时，我遇到了 popoverview 问题，我编写了这样的代码

```
-(IBAction)business_takephotobtnClicked   // click the button show the popoverview

{ 

NSLog(@"business_takephotobtnClicked");
    appdelegate.takePhoto=2;

    popover = [[UIPopoverController alloc] 
               initWithContentViewController:imgclass];

    popover.popoverContentSize =  CGSizeMake(138,66);
    [popover presentPopoverFromRect:popbtn_business.bounds inView:popbtn_business 
    permittedArrowDirections:UIPopoverArrowDirectionUp + 
    UIPopoverArrowDirectionLeft 
    animated:YES]; 
}

-(IBAction) takePhoto:(id)sender // to open the camera

{

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) 
    {

       self.contentSizeForViewInPopover=CGSizeMake(138,66);

        UIPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self presentModalViewController:self.UIPicker animated:YES];

    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Camera is not available" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
        [alert show];
        [alert release];

    }

} 
```

在单击按钮之前，弹出窗口就像那个节目![在此处输入图像描述](../Images/a0023052381c01e4213d73d28bf8295f.png)

同时点击拍照（印楝照片按钮）。弹出窗口大小自动扩展，就像taht![在此处输入图像描述](../Images/296bf77ff46fb18c8e2b9d7209d47c2f.png)

但是我在打开相机时也需要相同大小的popoverview

提前致谢......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:27:05.743

而不是使用 XIB 使用以编程方式创建相机视图并执行以下操作

```
-(IBAction)popbtn_Click:(id)sender
{
    UIViewController* popoverContent = [[UIViewController alloc] init];
    UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 230, 180)];
    popoverView.backgroundColor = [UIColor whiteColor];

    take_btn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    [take_btn setTitle:@"Take" forState:UIControlStateNormal];
    take_btn.frame=CGRectMake(2,2, 250, 60);
    [take_btn addTarget:self action:@selector(take_btnclick:) forControlEvents:UIControlEventTouchUpInside];
    [popoverView addSubview:take_btn];
}

-(void)take_btnclick:(id)sender
{
    [popoverController dismissPopoverAnimated:YES];

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        UIPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        [self presentModalViewController:self.UIPicker animated:YES];

        [popoverController dismissPopoverAnimated:YES];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Camera is not available" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

    if (popoverController != nil)
    {
        [popoverController dismissPopoverAnimated:YES];
    }
} 
```

# codeigniter - codeigniter - this->db->get() 返回空结果

> ID：11646844
> 
> 赞同：0
> 
> 时间：2012-07-25T09:36:32.343
> 
> 标签：codeigniter

我有关于 codeigniters db->get() 的问题。我有正常的sql查询，当我“手动”将它传递给db时，我得到了结果，但是当我使用codeigniter时，我得到了空结果。几乎相同的查询，但使用 like 而不是 where 有效。

SQL 是：

```
SELECT se.Id, se.Name, se.Alias, sy.Name as System, os.Name as Os, ac.Name as Access, se.Description
FROM cdl_server se
INNER JOIN cdl_system sy on sy.Id = se.System
INNER JOIN cdl_os os on os.Id = se.Os
INNER JOIN cdl_access ac on ac.Id = se.Access
WHERE se.Id = 1 
```

代码如下所示：

```
 $this->db->select(
            'se.Id, se.Name, se.Alias, ' . 
            'sy.Name as System, os.Name as Os, ac.Name as Access, ' . 
            'se.Description', 
            FALSE);
    $this->db->from('cdl_server se');
    $this->db->join('cdl_system sy', 'sy.Id = se.System' ,'inner', FALSE);
    $this->db->join('cdl_os os', 'os.Id = se.Os' ,'inner', FALSE);
    $this->db->join('cdl_access ac', 'ac.Id = se.Access' ,'inner', FALSE);
    $this->db->where('se.Id', $id, FALSE);
    $this->db->get(); 
```

编辑：我像这样使用它： $query = $this->db->get(); 返回$查询->结果（）；

当我在将 sql 查询发送到数据库之前对其进行 var_dump 时，我得到以下信息：

```
string(264) "SELECT se.Id, se.Name, se.Alias, sy.Name as System, os.Name as Os, ac.Name as Access, se.Description FROM cdl_server se INNER JOIN cdl_system sy ON sy.Id = se.System INNER JOIN cdl_os os ON os.Id = se.Os INNER JOIN cdl_access ac ON ac.Id = se.Access WHERE se.Id =1" 
```

但是结果总是空的，即使当我复制上面的内容并尝试直接询问 db 时，我得到了我需要的结果。

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:42:48.697

如果你想得到结果，你必须使用 row() 或 result() 函数。

```
$this->db->get()->result(); 
```

# c++ - 更紧密地打包位域

> ID：11646845
> 
> 赞同：3
> 
> 时间：2012-07-25T09:36:34.797
> 
> 标签：c++, inheritance, g++, bit-fields, packed

我对派生类中的位域有疑问。

使用 g++ 编译器，您可以分配`__attribute__((packed))`给一个类，它会打包位域。所以

```
class A
{
  public:
    int one:10;
    int two:10;
    int three:10;
} __attribute__ ((__packed__)); 
```

只占用 4 个字节。到现在为止还挺好。
但是，如果你继承一个类，像这样

```
class B
{
  public:
    int one:10;
    int two:10;
} __attribute__ ((__packed__));

class C : public B
{
  public:
    int three:10;
} __attribute__ ((__packed__)); 
```

我希望与上面的 A 类具有相同内容的 C 类也具有相同的布局，即占用 4 个字节。但是，C 结果占用了 5 个字节。

所以我的问题是，我做错了什么，如果是，怎么办？或者这是编译器的问题？一个疏忽，一个真正的错误？

我尝试了谷歌搜索，但除了 Linux 和 Windows 之间的差异（编译器试图模拟 MSVC）之外，我没有真正想出任何东西，我对此不感兴趣。这只是在 Linux 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:45:39.460

我相信问题出在 B 上，它不容易是 2.5 字节。它必须至少为 3 个字节。

从理论上讲，派生类*可能*被允许重用基类的填充，但我从未见过这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:58:02.053

想象一下，你所要求的**是**可能的。有什么可能的副作用或问题？让我们看看你有一个特定的例子。还假设具有 1 字节内存对齐的 32 位架构。

有 20 个连续位`class A`，您可以通过类的成员`one`和`two`. 这对你来说是一个非常方便的寻址方式，人类。但是编译器做了什么来实现它呢？它使用掩码和位移位将*这些*位定位到正确的位置。

到目前为止一切顺利，似乎足够简单和安全。

再增加 10 位。假设有一些非常聪明的编译器可以让您将额外的 10 位压缩到一个已经使用的 32 位字中（它们非常适合，不是吗？）。

麻烦来了：

```
A* derived = new B; // upcast to base class
derived->one = 1;
derived->two = 2;
// what is the value of derived->three in this context?
// Especially taking into account that a compiler is free to do all sorts
// of optimizations when generating code for class A 
```

由于上述原因，该类*必须*为10 位“溢出”到下一个可寻址内存位置 - 下一个字节的成员和成员使用不同且**可单独寻址的内存位置。**`class A``class B`

当您考虑多重继承时，更麻烦的是——在派生类中排列位的**一种真正方法是什么？**

# ruby-on-rails - Rails 服务器 LoadError 未找到符号：_environ

> ID：11646848
> 
> 赞同：0
> 
> 时间：2012-07-25T09:36:50.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jruby

我正在使用 jruby 并尝试运行 Rails 应用程序。这个应用程序在我之前运行良好`rvm use jruby`。我需要使用jruby，因为我使用的是gem neo4j，它需要jruby。

除了`pg`. 经过几个小时努力摆脱`Postgresql Client Library not found`错误后，我终于得到了一个干净的输出`bundle install`

但是，现在服务器不会启动。它给了我[这个](http://pastebin.com/P3cxKZjw)错误，其要点是：

```
LoadError: load error: pg_ext -- java.lang.UnsatisfiedLinkError: dlopen(~/.rvm/gems/jruby-1.6.7/gems/pg-0.13.2/lib/pg_ext.bundle, 9): Symbol not found: _environ 
```

[这](http://pastebin.com/LiZzX0mK)就是我的 Gemfile [输出`bundle install`]

更新：根据 vvlad 的建议，我尝试了对我有用的 activerecord-jdbcpostgresql-adapter。但是，网络服务器 gem 'thin' 现在给出了一个[错误](http://pastebin.com/VmVUyMcy)

# .net - SignalR 集线器可扩展性问题

> ID：11646854
> 
> 赞同：7
> 
> 时间：2012-07-25T09:37:23.967
> 
> 标签：.net, signalr, signalr-hub

我们有一个名为 StatusUpdateHub 的 SignalR 集线器。此集线器由名为 HubClient 的 .NET 客户端更新。该客户端将（在生产中）被多个用户每秒调用大约 1000 次，用于不同的事务。这是客户端代码：

```
public static class HubClient
{
    private static readonly string statusUpdateUrl = ConfigurationManager.AppSettings["StatusUpdateUrl"];
    private static readonly HubConnection connection = new HubConnection(statusUpdateUrl);
    private static readonly IHubProxy hub = connection.CreateProxy("StatusUpdateHub");

    internal static void UpdateBrowser(long transactionId)
    {
        connection.Start().ContinueWith(task => hub.Invoke("UpdateTransactionStatus", transactionId)).ContinueWith(task =>
        {
            if (task.IsFaulted && task.Exception != null)
            {
                // log error
            }
        });
    }
} 
```

当使用 100 个并发用户调用此代码时，它工作正常，但是当我们将并发用户数增加到 250 时，我们会看到以下错误：

> UpdateBrowser 中出现意外错误：System.InvalidOperationException：尚未建立连接。在 SignalR.Client.Connection.SignalR.Client.IConnection.Send[T](String data) 在 SignalR.Client.Hubs.HubProxy.Invoke[T](String method, Object[] args) 在 SignalR.Client.Hubs。 HubProxy.Invoke(String method, Object[] args) at Application.Services.HubClient.<>c_DisplayClass2.b *_0* (Task task1) in c:\Build\Work\Application\Services\HubClient.cs:line 20
> at System .Threading.Tasks.Task`1.InvokeFuture(Object futureAsObj)
> 在 System.Threading.Tasks.Task.Execute()

让我们知道如何使代码更具可扩展性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T16:56:15.610

如果这是每秒调用 1000 次的方法，那么您不应该`connection.Start()`每次都调用。

只打开一次连接，然后调用它的方法。

**编辑**，我的意思是，至少，让你的代码做这样的事情：

```
internal static void UpdateBrowser(long transactionId)
{
    lock (connection) 
    {
        if (connection.State == ConnectionState.Disconnected){
            connection.Start().Wait();
        }
    }
    hub.Invoke("UpdateTransactionStatus", transactionId).ContinueWith(task =>
    {
        if (task.IsFaulted && task.Exception != null)
        {
            // log error
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T20:56:27.637

默认情况下，.NET 允许从客户端应用程序传出 2 个并发连接，从 ASP.NET 应用程序传出 10 个并发连接。如果要增加此数字，请将[http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx)设置为更大的数字。看看是否有帮助。

# openerp - 如何将字段添加到继承视图的选项卡/页面中？

> ID：11646856
> 
> 赞同：1
> 
> 时间：2012-07-25T09:37:27.630
> 
> 标签：openerp

如何继承视图以将字段添加到“会话”选项卡中？

例如：

```
<record model="ir.ui.view" id="partner_sessions_form_view">
    <field name="name">partner.sessions.name</field>
    <field name="model">res.partner</field>
    <field name="type">form</field>
    <field name="inherit_id" ref="base.view_partner_form" />
    <field name="arch" type="xml">
    <xpath expr="/form/notebook/page[@string='Notes']" position="after">
        <page string="Sessions">
            <field name="session_ids" nolabel="1" colspan="4"/>
        </page>
    </xpath>
    </field>
</record> 
```

这会添加一个页面，但我将如何在页面**Sessions**中添加一个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:18:35.610

如果您想在上面创建的页面“会话”中添加一个字段，那么您应该提供

```
<record model="ir.ui.view" id="partner_sessions_form_view_again_inherited">
    <field name="name">partner.sessions.name.inherited</field>
    <field name="model">res.partner</field>
    <field name="type">form</field>
    <field name="inherit_id" ref="partner_sessions_form_view" />
    <field name="arch" type="xml">
    <xpath expr="//field[@name='session_ids']" position="before">
            <field name="new_field1" nolabel="1" colspan="4"/>
    </xpath>
    </field>
</record> 
```

如果要向 session_ids 树或表单视图添加字段，则

```
<xpath expr="//field[@name='session_ids']/tree/field[@name='already_existing_field']" position="after">
    <field name="new_field1" />
</xpath> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:18:44.710

您需要像这样在页面 Session 中找到该字段（但该页面必须是他们的视图）：

```
 <xpath expr="//page[@string='Sessions']/field[@name='some_field'] position="after">
     <field name="session_ids" nolabel="1" colspan="4"/>
 </xpath> 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:55:15.697

This is covered pretty well in [the documentation](http://doc.openerp.com/v6.1/developer/03_modules_3.html#inheritance-in-views). The simplest case is to just add your new field after an existing one. In this example, you're placing the `relation_ids` field after the `lang` field.

```
<record model="ir.ui.view" id="view_partner_form4">
    <field name="name">res.partner.form.inherit4</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
        <field name="lang" position="after">
            <field name="relation_ids"/>
        </field>
    </field>
</record> 
```

If that field appears in more than one place, you'll have to use [an XPath element](http://doc.openerp.com/v6.1/developer/03_modules_3.html#xpath-element). For example, if the `lang` field appears in a subview's tree view and its form view.

# 3d - 四元数 - 如何限制轴？

> ID：11646863
> 
> 赞同：5
> 
> 时间：2012-07-25T09:37:45.010
> 
> 标签：3d, quaternions

是否有可能限制四元数仅在 x 和 y 轴上移动（如欧拉 - 偏航和俯仰，不滚动）？我有什么方程式或类似的东西可以做到这一点吗？

一些例子：

运动应该像这样：http: [//360.art.pl/experimental/1/](http://360.art.pl/experimental/1/)
但是当我在四元数上构建我的播放器时，它没有限制，我不知道如何修复它[http://360.art。 pl/实验性/2/](http://360.art.pl/experimental/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:16:33.513

让我首先描述一下您正在谈论的那种约束。给定一个`world_up`向量，您希望限制旋转，使其相对于相机看起来是垂直的。如果相机视图坐标标记为`camera_up`、`camera_right`和`camera_forward`：

```
constrain rotation matrix R such that:  dot(R*world_up, camera_right) == 0 
```

这可以[`LookAt()`](http://www.opengl.org/sdk/docs/man/xhtml/gluLookAt.xml)通过构造一组垂直坐标向量作为视图方向的函数来直接完成（例如，类似函数）`view_forward`：

```
given vectors:  view_forward, world_up

Rot_forward = normalize(view_forward)
Rot_right = normalize( cross(view_forward, world_up) )
Rot_up = cross(Rot_right, Rot_forward) 
```

* * *

回答这个问题：我可能是错的，但我认为这种约束在四元数方面并不容易实现。如上所述生成旋转矩阵[并将其转换为 quaternion](http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/)会更容易。

这确实提出了一个问题：你想通过在这里使用四元数来解决什么问题？

*   如果您需要四元数与其他系统或库交互，那很好。
*   如果您正在尝试修复不良行为，即当您的视点接近天顶时场景会快速旋转，请注意这是您的约束的结果：无论您如何实现它，它都会发生。
*   如果您尝试使用四元数来获得更自然的插值，请注意您的约束会导致此问题：自然四元数插值将违反约束。`view_forward`鉴于约束，插入向量而不是四元数会更自然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:46:27.610

您可以尝试直接从偏航/俯仰构造四元数：

```
q = quat_from_axis_angle(up_vector, yaw) * quat_from_axis_angle(local_right, pitch) 
```

（您可能必须以相反的顺序将它们相乘，具体取决于您将它们转换为旋转矩阵的方式），或者每次更改它们时重新对齐它们：

```
rotated_right = apply_rotation(q, local_right);
projected_right = rotated_right - dot(rotated_right, up_vector) * up_vector;
realign = quat_align_vector(rotated_right, normalized(projected_right));
q = realign * q 
```

`projected_right`这是`rotated_right`在水平面上的投影。如果不滚动，这两个向量必须相同，这意味着`dot(rotated_right, up_vector) = 0`。最后一个等式是必须满足的实际约束。它是 中的二次方`q`。例如 for `local_right=(1,0,0)`, and `up_vector=(0,0,1)`, 它变成`dot(q*(1i+0j+0k)*conj(q), 0i+0j+1k)=2*x*z-2*w*y=0`, with `q=w+xi+yi+zk`。

您可以在[http://en.wikipedia.org/wiki/Quaternion](http://en.wikipedia.org/wiki/Quaternion)和[http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation](http://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation)找到`quat_from_axis_angle`和的公式。至于，一种方法是`apply_rotation``quat_align_vector`

```
quat_align_vector(src, dst) = sqrt([dot(src, dst), cross(src, dst)]) 
```

with `[a, b]`beign 一个 实 部`a`和 虚部的 四元数`b`. `Sqrt(x)`可以计算为`exp(ln(x)/2)`（这些函数也在 wiki 上）。您也可以尝试将 sqrt 替换`exp(ln(x)/2*tick*realign_rate)`为平滑恢复向上向量 :) 。或者反过来，稍微简化一下公式：

```
quat_align_vector(src, dst) = [dot(halfway, dst), cross(halfway, dst)],
halfway = normalized(normalized(src) + normalized(dst)) 
```

另请参阅[https://stackoverflow.com/a/1171995](https://stackoverflow.com/a/1171995)。

编辑：更正向量，添加约束。

# c - 这个 C 宏的目的是什么？

> ID：11646866
> 
> 赞同：0
> 
> 时间：2012-07-25T09:38:04.683
> 
> 标签：c, macros

我正在阅读 opengl es 书，在源代码中我找到了这个宏

```
///
//  Macros
//
#define ESUTIL_API
#define ESCALLBACK 
```

稍后在实现文件 .c 中

```
void ESUTIL_API esInitContext ( ESContext *esContext )
{
   if ( esContext != NULL )
   {
     memset( esContext, 0, sizeof( ESContext) );
   }
} 
```

根据我对宏的理解，它们只是替换了宏定义的内容。虽然我不明白在这种情况下它是什么意思。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:41:31.860

这种宏用于更改编译器使用的调用约定：

```
#define ESUTIL_API  // nothing, use the standard calling convention 
```

或者

```
#define ESUTIL_API __fastcall // use the fastcall calling convention 
```

调用类型调用约定通常必须放在返回类型和函数标识符名称之间的函数定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:41:59.673

在这种情况下，它只是一个占位符，以防需要在函数声明中添加任何修饰，更具体地说，是`__declspec(dllexport)`调用约定或内联要求之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:42:45.807

在这种情况下，ESUTIL_API 宏可以被调用约定规范替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:43:44.880

可能在其他一些地方（或条件），该宏的定义不同 - 例如编译器的 -D 选项，或由其他一些`#define`s 触发的另一个代码块。在这种情况下，您*必须*至少定义一个空宏，以便您可以在这样的声明中安全地使用它，并且如果该宏恰好被重新定义为非空值 - 它将按原样使用。

# zend-framework - 异常信息：消息：未找到 Model_Bug 的适配器

> ID：11646869
> 
> 赞同：0
> 
> 时间：2012-07-25T09:38:21.563
> 
> 标签：zend-framework, zend-db

老实说，Zend 目前让我很头疼，但我想我们都必须从某个地方开始，而且我学得很快。

我正在使用 Apress 的“Pro Zend Framework Techniques”一书来学习如何使用 Zend，但昨晚遇到了我无法解决的问题。在谷歌上搜索并在上面睡了一晚，我仍然无处可去。这是错误：

```
An error occurred
Application error
Exception information:
Message: No adapter found for Model_Bug
Stack trace:
#0 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Db/Table/Abstract.php(739): Zend_Db_Table_Abstract->_setupDatabaseAdapter()
#1 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Db/Table/Abstract.php(268): Zend_Db_Table_Abstract->_setup()
#2 /home/www-data/zend.danielgroves.net/htdocs/application/controllers/BugController.php(29): Zend_Db_Table_Abstract->__construct()
#3 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Action.php(516): BugController->submitAction()
#4 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('submitAction')
#5 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#6 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#7 /home/www-data/zend.danielgroves.net/htdocs/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#8 /home/www-data/zend.danielgroves.net/htdocs/public/index.php(26): Zend_Application->run()
#9 {main}  
Request Parameters:
array (
  'controller' => 'bug',
  'action' => 'submit',
  'module' => 'default',
  'author' => 'Daniel',
  'email' => 'someemail@googlemail.com',
  'date' => '12-12-2012',
  'url' => 'sadflj.asd.sd',
  'description' => 'sdfoi',
  'priority' => 'low',
  'status' => 'new',
  'submit' => 'Submit',
) 
```

一般来说，这个错误的原因是什么？我需要如何解决它？

相关文件在下面，如果需要更多信息，请大声疾呼，我会发布。

我的 application.ini 文件：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts"

recources.db.adapter = "Pdo_Mysql"
resources.db.params.host = "localhost"
resources.db.params.username = ""
resources.db.params.password = ""
resources.db.params.dbname = "zf_cms"
resoucres.db.isDefaultTableAdapter = true

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

引导程序：

```
<?php

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initView()
    {
        // Initialise view
        $view = new Zend_View();
        $view->doctype('XHTML1_STRICT');
        $view->headTitle('Zend CMS');
        $view->skin = 'blues';

        // Add it to the ViewRenderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
            'ViewRenderer'
        );
        $viewRenderer->setView($view);

        // Return it, so that it can be stored by the bootstrap
        return $view;
    }

    protected function _initAutoload()
    {
        // Add autoloader empty namespace
        $autoLoader = Zend_Loader_Autoloader::getInstance();
        $autoLoader->registerNamespace('CMS_');
        $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath'      => APPLICATION_PATH,
            'namespace'     => '',
            'resourceTypes' => array(
                'form'      => array(
                    'path'      => 'forms/',
                    'namespace' => 'Form_',
                ),
                'model'     => array(
                    'path'      => 'models/',
                    'namespace' => 'Model_'
                ),
            ),
        ));

        //Return it so that it can be stored by the bootstrap
        return $autoLoader;
    }
} 
```

错误模型：

```
<?php

class Model_Bug extends Zend_Db_Table_Abstract
{
    protected $_name = 'bugs';

    public function createBug($name, $email, $date, $url, $description, $priority, $status)
    {
        $row = $this->createRow();

        // Set the row data
        $row->author        = $name;
        $row->email         = $email;
        $dateObject         = new Zend_Date($date);
        $row->date          = $dateObject->get(Zend_Date::TIMESTAMP);
        $row->url           = $url;
        $row->description   = $description;
        $row->priority      = $priority;
        $row->status        = $status;

        // save the new row
        $row->save();

        // now fetch the id of the row you just created and return it
        $id = $this->_db->lastInsertId();
        return $id;
    }
}
?> 
```

错误控制器：

```
class BugController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
    }

    public function createAction()
    {
        // action body
    }

    public function submitAction()
    {
        $bugReportForm = new Form_BugReportForm();
        $bugReportForm->setAction('/bug/submit');
        $bugReportForm->setMethod('post');

        if ($this->getRequest()->isPost()) {
            if ($bugReportForm->isValid($_POST)) {
                $bugModel = new Model_Bug();

                // if the form is valid then create the new bug
                $result = $bugModel->createBug(
                    $bugReportForm->getValue('author'),
                    $bugReportForm->getValue('email'),
                    $bugReportForm->getValue('date'),
                    $bugReportForm->getValue('url'),
                    $bugReportForm->getValue('description'),
                    $bugReportForm->getValue('priority'),
                    $bugReportForm->getValue('status')
                );

                // if the createBug method returns a result
                // then the bug was successfully created

                if ($result)
                    $this->_foreward('confirm');
            }
        }

        $this->view->form = $bugReportForm;
    }

    public function confirmAction()
    {
        // action body
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:05:55.383

您的适配器未初始化，因为您的 application.ini 文件中有错字

```
recources.db.adapter = "Pdo_Mysql" 
```

应该

```
resources.db.adapter = "Pdo_Mysql" 
```

# android - android 服务中的数据连接启用/禁用代码崩溃

> ID：11646871
> 
> 赞同：2
> 
> 时间：2012-07-25T09:38:29.863
> 
> 标签：android, service, crash, connection

```
void turnData(boolean ON)
 {
   final ConnectivityManager conman = (ConnectivityManager) getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
   final Class conmanClass = Class.forName(conman.getClass().getName());
   final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
   iConnectivityManagerField.setAccessible(true);
   final Object iConnectivityManager = iConnectivityManagerField.get(conman);
   final Class iConnectivityManagerClass =  Class.forName(iConnectivityManager.getClass().getName());
   final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
   setMobileDataEnabledMethod.setAccessible(true);
   setMobileDataEnabledMethod.invoke(iConnectivityManager, ON);
} 
```

上面的代码是在 android 2\. 3+ 中启用/禁用数据连接。当我在 Activity 中运行它时，它可以正常工作。但是当我试图在服务中运行它时，应用程序崩溃了。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:22:36.580

通过向 Manifest 文件添加以下附加权限解决了问题：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission> 
```

# java - 强制浏览器缓存来自 Spring MVC 的 JS 响应

> ID：11646876
> 
> 赞同：0
> 
> 时间：2012-07-25T09:38:44.027
> 
> 标签：java, json, spring, spring-mvc

每当我需要处理 Spring MVC 上的自定义响应数据类型时，这似乎有些尴尬。

就我而言，我需要返回一个 JavaScript 内容。但是，我希望它是缓存。

所以澄清一下，这不是一个静态文件案例（`<mvc:resources...`），而是一个在服务器上生成的动态文件，我确实想要缓存（即 HttpResponse 200 和 HttpResponse 302）。

就代码而言，在客户端我只有：

```
<script src="<spring:url value='/some-file.js'/>"></script> 
```

比 SpringMVC 控制器：

```
@RequestMapping(value = "/some-file.js")
public ResponseEntity<String> resourceBundles(HttpServletRequest request, HttpServletResponse response, Locale locale) throws IOException {

    responseHeaders.add("Cache-Control", "public, max-age");
    responseHeaders.add("Content-Type", "text/javascript; charset=UTF-8");
    responseHeaders.add("Expires", "max-age");

    // Turn this into JSON response:
    String someJson = "{ a:a, b;b};";
    return new ResponseEntity<String>("var data = " + someJson, responseHeaders,  HttpStatus.OK);
} 
```

但是，浏览器似乎总是试图访问这个动态 JS 文件。

由于此文件依赖于会话，因此我无法生成它并将其视为静态文件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:54:25.907

这是正确的行为。大多数浏览器会向您`GET`发送带有`If-Modified-Since`+ 时间戳的请求，以检查文件是否已更改。

在通常情况下，您将使用时间戳来确定文件是否已更改。但是由于它在您的情况下永远不会改变，您可以使用[`304`/`HttpStatus.NOT_MODIFIED`响应而不使用响应正文](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5)（而不是`200`/ OK）来回复。

这告诉浏览器文件没有改变。

这应该有效：

```
@RequestMapping(value = "/some-file.js")
public ResponseEntity<String> resourceBundles(
    HttpServletRequest request, 
    HttpServletResponse response, Locale locale) throws IOException {

    Date lmod = session.getAttribute("lmod");
    if( null == lmod ) {
        lmod = new Date();
        session.setAttribute("lmod", lmod);
    }

    responseHeaders.add("Last-Modified", lmod);

    String ifModifiedSince = request.getHeader("If-Modified-Since");
    if( null != ifModifiedSince ) { // You may want to compare lmod and ifModifiedSince here, too
        return new ResponseEntity( responseHeaders, HttpStatus.NOT_MODIFIED );
    }

    ... create first time response ...
} 
```

告诉浏览器`Last-Modified`将使它能够向您发送`If-Modified-Since`

# emacs - Org-Mode 中的 FlySpell 识别乳胶语法，如 auctex

> ID：11646880
> 
> 赞同：6
> 
> 时间：2012-07-25T09:38:53.187
> 
> 标签：emacs, elisp, org-mode, auctex, flyspell

原始回复：我试图弄清楚在 auctex 模式下，在开启 flyspell 的情况下，乳胶似乎没有突出任何乳胶功能。这是一个自定义字典文件还是如何实现的？这可以很容易地合并到一个组织模式文件中，这样它就不会突出显示将被导出的插入的乳胶代码。

编辑：从文件顶部和文本中获取的简单示例。基本上像 ref 或 {} 内的标签这样的乳胶语法不会被拼写检查（这已通过使用 (setq ispell-parser tex) 修复。然后还设置一个函数，使用 #+ 作为特定标签的第一个文本不会检查行。我希望检查标题但不检查 #+LABEL: 或 #+TYP_TODO: （未显示。还有一种添加 TODO 关键字以不被检查的方法。我能想到的方法是在启动时将这些添加到 LOCALWORDS: ispell 位于文件底部（如果还没有的话），但有没有更简单或更好的方法来做到这一点。

```
#+TAGS: NOTE REPORT export noexport MEETING
#+TYP_TODO: TODO Weekly WAITING NEXT | Meeting DONE
#+STARTUP: hidestars content hideblocks

The exponential running mean is shown for various alpha values in Figure \ref{fig:saturation_varying_alphaval_00f6set2}.  
     #+CAPTION:    Plot of varying alpha values for the exponential running mean ($EM$) with $S_{min} = 0.0008 \text{ and } P_m = 0.20$
     #+LABEL:      fig:saturation_varying_alphaval_00f6set2
     #+ATTR_LaTeX: width=0.4\textwidth placement=[h!tb] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:15:31.693

`flyspell`内部使用`ispell-mode`. 要更改`ispell`解析文件的方式，请将变量设置`ispell-parser`为`'tex`.

```
(add-hook 'org-mode-hook (lambda () (setq ispell-parser 'tex))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T12:18:46.700

最有可能 auctex`flyspell-mode-predicate`用于定义缓冲区的哪些部分不应进行拼写检查。（[这个答案](https://superuser.com/a/345461/4542)显示了如何为 MoinMoinWiki 做类似的事情。） org-mode 已经有这样一个函数，`org-mode-flyspell-verify`，这显然不适合你......快速查看源代码表明`org-remove-flyspell-overlays-in`应该调用包含缓冲区的部分代码示例等

对不起，手摇的答案；将此标记为社区 wiki 以邀请改进。

# php - Yii 基本读写文件助手

> ID：11646882
> 
> 赞同：5
> 
> 时间：2012-07-25T09:38:55.683
> 
> 标签：php, file-io, yii

我正在寻找一个 Yii 文件助手来简化读写操作。但我找不到任何东西，这对我来说看起来很奇怪。Yii 中是否有这方面的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:06:58.117

Yii 中只有 CFileHelper。但这不支持读写。[http://www.yiiframework.com/doc/api/1.1/CFileHelper](http://www.yiiframework.com/doc/api/1.1/CFileHelper)

有一个名为[http://www.yiiframework.com/extension/cfile/](http://www.yiiframework.com/extension/cfile/)的扩展，它有一些您可能需要的相关方法。

# entity-framework-4.1 - 如何在 DontDropDbJustCreateTablesIfModelChanged 之后播种数据库

> ID：11646884
> 
> 赞同：0
> 
> 时间：2012-07-25T09:38:59.420
> 
> 标签：entity-framework-4.1, ef-code-first

最近我减少了我的数据库权限，所以我不能删除和重新创建数据库。这导致我使用来自 nuget 的 DontDropDbJustCreateTablesIfModelChanged 数据库初始化。

但是，我现在不知道应该如何播种数据，因为 Seed 函数不在初始化中，所以我无法覆盖它。这是我希望能够做到的。

```
public class MyDBInitialiser : DontDropDbJustCreateTablesIfModelChanged<MyContext>
{
    protected override void Seed(MyContext context)
    {
        base.Seed(context);

        context.Item.Add(new Item() { ItemId = 1, Name = "Item 1"});
        context.Item.Add(new Item() { ItemId = 2, Name = "Item 2"});
        context.Item.Add(new Item() { ItemId = 3, Name = "Item 3"});
    }
} 
```

在这种情况下是否有另一种播种数据的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T23:26:56.890

简单地，

```
public class DontDropDbJustCreateTablesIfModelChanged<T>
                    : IDatabaseInitializer<T> where T : DbContext
{
    private EdmMetadata _edmMetaData;

    public void InitializeDatabase(T context)
    {
        ObjectContext objectContext =
                ((IObjectContextAdapter)context).ObjectContext;

        string modelHash = GetModelHash(objectContext);

        if (CompatibleWithModel(modelHash, context, objectContext))
            return;

        DeleteExistingTables(objectContext);
        CreateTables(objectContext);

        SaveModelHashToDatabase(context, modelHash, objectContext);
        Seed(context);
    }

    protected virtual void Seed(T context) { }

    private void SaveModelHashToDatabase(T context, string modelHash,
                                            ObjectContext objectContext)
    {
        if (_edmMetaData != null) objectContext.Detach(_edmMetaData);

        _edmMetaData = new EdmMetadata();
        context.Set<EdmMetadata>().Add(_edmMetaData);

        _edmMetaData.ModelHash = modelHash;
        context.SaveChanges();
    }

    private void CreateTables(ObjectContext objectContext)
    {
        string dataBaseCreateScript =
            objectContext.CreateDatabaseScript();
        objectContext.ExecuteStoreCommand(dataBaseCreateScript);
    }

    private void DeleteExistingTables(ObjectContext objectContext)
    {
        objectContext.ExecuteStoreCommand(Dropallconstraintsscript);
        objectContext.ExecuteStoreCommand(Deletealltablesscript);
    }

    private string GetModelHash(ObjectContext context)
    {
        var csdlXmlString = GetCsdlXmlString(context).ToString();
        return ComputeSha256Hash(csdlXmlString);
    }

    private bool CompatibleWithModel(string modelHash, DbContext context,
                                        ObjectContext objectContext)
    {
        var isEdmMetaDataInStore =
            objectContext.ExecuteStoreQuery<int>(LookupEdmMetaDataTable)
            .FirstOrDefault();

        if (isEdmMetaDataInStore == 1)
        {
            _edmMetaData = context.Set<EdmMetadata>().FirstOrDefault();
            if (_edmMetaData != null)
            {
                return modelHash == _edmMetaData.ModelHash;
            }
        }
        return false;
    }

    private string GetCsdlXmlString(ObjectContext context)
    {
        if (context != null)
        {
            var entityContainerList = context.MetadataWorkspace
                .GetItems<EntityContainer>(DataSpace.SSpace);

            if (entityContainerList != null)
            {
                var entityContainer = entityContainerList.FirstOrDefault();
                var generator =
                    new EntityModelSchemaGenerator(entityContainer);
                var stringBuilder = new StringBuilder();
                var xmlWRiter = XmlWriter.Create(stringBuilder);
                generator.GenerateMetadata();
                generator.WriteModelSchema(xmlWRiter);
                xmlWRiter.Flush();
                return stringBuilder.ToString();
            }
        }
        return string.Empty;
    }

    private static string ComputeSha256Hash(string input)
    {
        byte[] buffer = new SHA256Managed()
            .ComputeHash(Encoding.ASCII.GetBytes(input));

        var builder = new StringBuilder(buffer.Length * 2);
        foreach (byte num in buffer)
        {
            builder.Append(num.ToString("X2",
                CultureInfo.InvariantCulture));
        }
        return builder.ToString();
    }

    private const string Dropallconstraintsscript =
        @"select  
        'ALTER TABLE ' + so.table_name + ' DROP CONSTRAINT ' 
        + so.constraint_name  
        from INFORMATION_SCHEMA.TABLE_CONSTRAINTS so";

    private const string Deletealltablesscript =
        @"declare @cmd varchar(4000)
        declare cmds cursor for 
        Select
            'drop table [' + Table_Name + ']'
        From
            INFORMATION_SCHEMA.TABLES

        open cmds
        while 1=1
        begin
            fetch cmds into @cmd
            if @@fetch_status != 0 break
            print @cmd
            exec(@cmd)
        end
        close cmds
        deallocate cmds";

    private const string LookupEdmMetaDataTable =
        @"Select COUNT(*) 
        FROM INFORMATION_SCHEMA.TABLES T 
        Where T.TABLE_NAME = 'EdmMetaData'";
} 
```

&

```
public class Population : DontDropDbJustCreateTablesIfModelChanged</* DbContext */>
{
    protected override void Seed(Syndication Context)
    {
        /* Seeding :) */
    }
} 
```

&

```
Database.SetInitializer</* DbContext */>(new Population()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:57:49.500

在我的项目中，我将数据库初始化与数据库播种分开。如果您使用控制反转，您应该能够在您的组合根目录中执行类似的操作（Application_Start，如果您正在使用来自 Web 应用程序的 DbContext）：

```
var seeder = ServiceLocatorPattern
    .ServiceProviderLocator.Current.GetService<ISeedDb>();
if (seeder != null) seeder.Seed(); 
```

界面：

```
public interface ISeedDb, IDisposable
{
    void Seed();
} 
```

一个可能的实现：

```
public class MyDbSeeder : ISeedDb
{
    private readonly MyContext _context;

    public MyDbSeeder(MyContext context)
    {
        _context = context;
    }

    public void Seed()
    {
        _context.Item.Add(new Item { ItemId = 1, Name = "Item 1" });
        // ... etc
    }

    public void Dispose()
    {
        _context.Dispose();
    }
} 
```

# sql - 如何在已经存在的 SQL Server 数据库中设置唯一字段？

> ID：11646894
> 
> 赞同：0
> 
> 时间：2012-07-25T09:39:18.420
> 
> 标签：sql, sql-server

我对 SQL Server 数据库中的唯一字段有疑问。

我有一个已经存在的数据库，其中包含索引和一些外键等。现在我需要设置一列，例如`name`，设置为唯一。

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T09:43:14.070

```
ALTER TABLE yourtable
ADD CONSTRAINT
    ix_uniquename UNIQUE NONCLUSTERED 
    (
       name
    ) 
WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 
```

或者查看表的设计，右键选择Indexes/Keys

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T11:25:18.407

如果您正在谈论添加索引而不是约束，那么脚本类似于：

```
CREATE UNIQUE INDEX ix_uniquename ON dbo.yourtable([name]) 
```

# logging - 使用 CDHDR 更改文档记录 SAP 数据库更新

> ID：11646896
> 
> 赞同：1
> 
> 时间：2012-07-25T09:39:21.483
> 
> 标签：logging, datatable, updates, abap, sap-basis

有一个 Z 表必须经常更新。应该跟踪这些更新，现在跟踪是通过 SAP 更改文档功能实现的。

一切正常，`CDHDR`正在创建记录，但现在`*********_WRITE_DOCUMENT`使用复杂逻辑调用 FM，因为 DB 更新是使用语句进行的：

```
MODIFY dbtab FROM itab. 
```

每次 MODIFY更改时应该在哪里`*********_WRITE_DOCUMENT`调用以跟踪？`itab`我们怎样才能简化这个程序？如何涵盖所有数据库更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:49:45.280

简短的回答：那行不通。

长答案：如果您不想实现这一点，您必须自己获取有关更改内容和插入内容的信息。我会做一个

为 ITAB 中的所有条目选择 ... 从 ZTABLE 到 OLD_DATA_TAB 中...

然后遍历 ITAB 并检查您的 OLD_DATA_TAB 中是否有相应的数据集以及是否需要更改。

使用该信息，您可以为 *_WRITE_DOCUMENT 构建输入参数，您可以在成功修改之后但在提交之前调用该参数。

# spring-integration - 弹簧集成 jms

> ID：11646897
> 
> 赞同：0
> 
> 时间：2012-07-25T09:39:24.200
> 
> 标签：spring-integration

我是 spring-integration 的新手，我在使用 jms 创建项目时遇到问题，任何人都可以向我发送有关此项目的示例项目以及配置和运行程序的步骤。还有我需要安装的 jms 提供程序。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T11:42:44.933

请参阅此处“基本”下的 JMS 示例[https://github.com/SpringSource/spring-integration-samples](https://github.com/SpringSource/spring-integration-samples)。

该示例使用 ActiveMQ，因此无需安装，maven 将为您下载。

我还建议你看看参考[http://static.springsource.org/spring-integration/docs/2.1.3.RELEASE/reference/html/](http://static.springsource.org/spring-integration/docs/2.1.3.RELEASE/reference/html/)

# java - Java删除对象的2个ArrayList之间的公共元素

> ID：11646913
> 
> 赞同：0
> 
> 时间：2012-07-25T09:40:01.607
> 
> 标签：java, arraylist

我有一个Java类

```
class Students{
    private String fName;   
    private String lName;
    private String uName;

    public Students(String fName, String lName, String uName) {
            this.fName = fName;
            this.lName = lName;
            this.uName = uName;
     }      

    public String getuName() {
        return uName;
    }
    public void setuName(String uName) {
        this.uName = uName;
    }
    public String getfName() {
        return fName;
    }
    public void setfName(String fName) {
        this.fName = fName;
    }
    public String getlName() {
        return lName;
    }
    public void setlName(String lName) {
        this.lName = lName;
    }

} 
```

我也称之为使用

```
public class TestClass {
public static void main(String[] args) {

    Students students1 = new Students("xyz","abc","xyzAbc");
    Students students2 = new Students("poi","son","poison");
    Students students3 = new Students("yog","jos","yogjos");

    Students students4 = new Students("xyz","abc","xyzAbc");
    Students students5 = new Students("pon","son","xyzAbc");
    Students students6 = new Students("yog","jos","someotherUName");
    Students students7 = new Students("yog","jos","someotherUName2");

    List studentList1 = new ArrayList();
    List studentList2 = new ArrayList();

    studentList1.add(students1);
    studentList1.add(students2);
    studentList1.add(students3);

    studentList2.add(students4);
    studentList2.add(students5);
    studentList2.add(students6);
}
} 
```

现在我想要一个过滤列表，它只包含唯一的“uName”值。因此，我想要比较每个列表的“uName”字段并删除常见的字段。

最后，我想要 2 个用于 studentList1 和 studentList2 的过滤列表。

我阅读了 removeAll 方法，但它似乎适用于整数/字符串数据列表，而不适用于对象列表（如我的情况）。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:43:51.997

您可以设置列表，然后（如果需要）将其取回：

`new ArrayList(new HashSet<String>(list))`创建仅包含源列表中唯一元素的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T09:44:47.937

**1.**如果您希望每个列表具有**唯一** `uName`值，那么您可以使用`TreeSet`from`java.util.Collection`和**Interface** `Comparator` from `java.util.Comparator`。

**2.**如果您**想合并两个列表并具有唯一的 uName**，则合并两个列表，然后使用`TreeSet`and `Comparator`。

**3.** `Comparator`提供了**以多种方式进行比较的灵活性**......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T09:42:13.480

如果实现`removeAll`中的对象正确，您仍然可以使用。`List``equals()`

[`AbstractCollection`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/AbstractCollection.html)，这是大多数`List`实现（包括`ArrayList`）[`contains()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java#AbstractCollection.contains%28java.lang.Object%29)在[其实现中`removeAll`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java#AbstractCollection.removeAll%28java.util.Collection%29)使用的基础。`ArrayList`的[实现`contains`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.contains%28java.lang.Object%29)依赖`indexOf()`，最后使用`equals()`.

您可以`equals()`在您的`Student`类中实现以指定当且仅它们的字段相等时 an`Student`等于另一个。`uName`

请注意，它`equals`具有相关的语义（参见它的[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals(java.lang.Object))），在选择如何实现它时应该小心。考虑当两个学生实例的`uName`s 相等时，他们是否真的代表同一个学生。在我看来，这听起来像是一个非常具体的要求，即如何整理这些东西，并且不应该影响类的语义。

[使用@AlexR](https://stackoverflow.com/a/11646966/851811)或[@KumarVivekMitra](https://stackoverflow.com/a/11646983/851811)的方法会更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T09:46:27.110

首先，您应该输入您的列表：

```
List<Students> studentList1 = new ArrayList<Students>(); 
```

其次，在你的类上实现`hashCode()`和委托：`equals()``Students``uName`

```
public boolean equals(Object o) {
    return o instanceof Students && ((Students)o).uName.equals(uName);
}

public int hashCode() {
    return uName.hashCode();
} 
```

现在[`removeAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)可以正常工作了。

* * *

另一种选择是使用`Set`，它只允许由`equals()`方法确定的唯一值。如果您将上述方法添加到您的类中，您可以这样做：

```
Set<Students> students = new HashSet<Students>(); 
```

然后添加您喜欢的内容，其中只会有独特的`uName`学生。

* * *

顺便说一句，你应该用单数命名你的班级 - 即`Student`不是`Students`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:47:55.783

您也可以尝试使用 apache commons `CollectionUtils.disjunction`。（链接：[http](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#disjunction(java.util.Collection) ://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#disjunction (java.util.Collection, java.util.Collection)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T09:50:10.963

您的 Student 类应该覆盖方法`hashcode`and `equals`，因此您的对象可以是唯一的名称。[在这里](http://www.technofundo.com/tech/java/equalhash.html)你可以阅读如何做到这一点。

另请注意，在某个集合中维护的所有对象都应覆盖这些方法，因此您始终知道它们是如何比较的。

在下一步中，您可以使用`removeAll`Set 的方法或解决方案，这取决于您:-)

树立榜样

`List<String> list = new ArrayList(new HashSet<String>(studentList));`// 这是你的唯一列表

或者您可以使用自定义比较器而不是覆盖哈希码和等于，但如果您希望您的学生始终是唯一的，您应该覆盖它们

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T09:51:06.500

一个完整的工作解决方案可能如下。

```
Class Student{

.....
......
.....

   public boolean equals(Object o) {
       return o instanceof Students && ((Students)o).uName.equals(uName);
   }

   public int hashCode() {
       return uName.hashCode();
   }

}

Set studentList1 = new hashSet();
Set studentList2 = new hashSet(); 
```

将您的元素放入这些集合中。

此外，如果您想要两个集中的唯一不匹配元素。然后写如下。

```
studentList1.removeAll(studentList2 ); 
```

# asp.net - Turn by Turn 游戏：使用 SignalR 还是同时使用 SignalR 和 REST API？

> ID：11646918
> 
> 赞同：4
> 
> 时间：2012-07-25T09:40:25.837
> 
> 标签：asp.net, rest, signalr, multiplayer

我正在写一个回合制手机游戏。每场比赛有2分钟。所以每两分钟服务器就会计算排名并为客户端生成下一场比赛。我使用 Asp.net 编写服务器。
我选择 SignalR 在客户端和服务器之间进行通信。我有两种实现游戏的选择：
1）仅使用 SignalR 与客户端通信
2）使用 SignalR 通知客户端，并使用 REST API 获取或更新游戏信息。

你能告诉我什么选择更好，请详细解释。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T10:35:27.680

虽然我不是 SignalR 专家，但我可以肯定地告诉你：

由于您选择了 SignalR，请将其用于它可以执行的所有任务。

向客户端发送有关游戏的更新信息绝对是 SignalR 的一项任务。不需要单独的 REST api。

通过 SignalR 发送状态已更新的消息，并且客户端应进行 REST 调用以获取更新的信息，这是不必要的额外请求。我会避免它并使用 SignalR 发送更新的信息。

# gallery - 图片库看起来像 Windows Phone 7 - 滑动

> ID：11646920
> 
> 赞同：1
> 
> 时间：2012-07-25T09:40:30.937
> 
> 标签：gallery, image, swipe-gesture

我需要一个类似于 Windows Phone 中的图像库，当我们从左侧滑动时，可以看到图像的另一半，如果图像被拖动超过图像的 220 宽度，它应该回滚到其原始位置。我目前正在使用列表框来动态获取图像，并且在使用手势拖动进行滑动时。我想做一些动画，以便它的行为与在 Windows Phone 7 图片库中看到的完全相同 这是相同私有 void gestur_DragCompleted(object sender, DragCompletedGestureEventArgs e) { double len = 0.0; 双 sc = 0.0; if (e.Direction == System.Windows.Controls.Orientation.Horizo​​ntal) { sw = (ScrollViewer)((VisualTreeHelper.GetChild(OfferImage, 0) as FrameworkElement).FindName("ScrollViewer"));

```
 len = sw.HorizontalOffset;
            var abs = PANEL_DRAG_HORIZONTAL;
            if (abs < 0)
            {

                if (abs < 0 && CurrentItem < IamgeList.Count)
                {
                    //flick right

                    sc = 455.0 * CurrentItem;
                    CurrentItem++;
                    sw.ScrollToHorizontalOffset(sc);

                } 
```

# javascript - 匹配有序数组

> ID：11646923
> 
> 赞同：0
> 
> 时间：2012-07-25T09:40:42.733
> 
> 标签：javascript, arrays, node.js

我正在尝试创建一个 Javascript 纸牌游戏，但我需要匹配列表中的 4 个后续数字。但是我总是创建一些疯狂的分层循环，例如：

```
cards = [{card:'h7'},{card:'c8'},{card:'h9'},{card:'st'}]
var sorted = ['7','8','9','t','j','q','k','a']      

var found4 = false
for(var i =0;i < 5;i++){
    var found = 0;        
    for(var j = 0;j < 4;j++){             
        for(var c in cards){
            if(cards[c].card.charAt(1) == sorted[i+j]){
                found++
            }
        }
    }
    if(found == 4){
        found4 = true
    }
} 
```

有更好的方法来匹配数组吗？

一些输入示例：

```
'7','8','9','t'  => true
'j','q','k','a'  => true
'7','8','k','a'  => false
'j','k','7','a'  => false 
```

（输入未排序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T10:10:45.557

您可以为 Array 编写一个原型方法（您可以参考以下[帖子](https://stackoverflow.com/questions/1181575/javascript-determine-whether-an-array-contains-a-value)）为

```
Array.prototype.contains = function(obj) {
    var i = this.length;
    while (i--) {
        if (this[i] == obj) {
            return i;
        }
    }
    return false;
}

var sorted = ['7', '8', '9', 't', 'j', 'q', 'k', 'a']

function check(arr) {
    index = sorted.contains(arr[0])
    if (index === false) {
        return false;
    }
    count = 1
    for (var i = 1; i < 4; i++) {
            sortedIndex = index + i > sorted.length ? index + i - sorted.length : index + i
        if (sorted[sortedIndex] == arr[i]) count++;
        }
        if (count == 4) {
            return true;
        }
        return false;
    }

console.log(check(['j','q','k','a']))​ 
```

你可以看到它[在这里工作](http://jsfiddle.net/kidmenot/7m4jr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:11:16.180

First, your algorithm should work on all arrays (no fixed lengths etc), so lets get chars to find:

```
var tofind = cards.map(function(c){return c.card.charAt(1);}); 
```

When all your pieces have length one, there is a very simple function to help you:

```
return sorted.join("").indexOf(tofind.join(""))!=-1; 
```

* * *

However, I don't understand your approach completely. This loop:

```
for (var c in cards)
    if (cards[c].card.charAt(1) == sorted[i+j])
        found++ 
```

seems odd to me. First, `cards` is an array, so don't use a for-in-loop. But if you search all cards for the current letter you want to match, how does this have anything to do with order?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:55:32.360

我将有单独的西装和价值字段。这使得测试这些值是否有序变得更加容易。请注意，下面的代码不包括范围检查或其他验证，但我假设已经处理好了。

```
// Suit is [c]lubs, [d]iamonds, [h]earts, or [s]pades
// Value is from Ace (1) to King (13). Jack is 11, and Queen is 12\. 
cards = [
    {suit:'h', value: 7 } // 7 of hearts
    {suit:'c', value: 8 } // 8 of clubs
    {suit:'h', value: 9 } // 9 of hearts
    {suit:'s', value: 10 } // Ten of spades
    {suit:'s', value: 11 } // Jack of spades
]

if (cards.length <= 1) 
{
    // Having 0 or 1 cards means they are, by definition, in order.
    return true;
}

// Test each card (starting with the second) to ensure that it is 
// 1 greater than it's predecessor.
var previousValue = cards[0].value;
for(var i = 1; i < cards.length; i++){
    if (previousValue + 1 != cards[i].value)
    {
         // This card is not the next card in sequence, so 
         // the hand is not in order.
         return false;
    }
}

return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:14:23.153

使用[下划线](http://underscorejs.org/)并保持数据结构的可能解决方案

```
function test(seq,expected) {
    var res=isSequence(seq);
    if (res===expected)
        console.log( seq.join(',')+" : success");
    else
        console.log( seq.join(',')+" : fail");
}

function isSequence(seq) {
    var sorted = ['7','8','9','t','j','q','k','a'], l=seq.length, i, ix;
    if (l===0) return true;

    ix=_.indexOf(sorted, seq[0]);
    if (ix===-1) return false;
    if (ix>sorted.length-l) return false;

    for (i=1;i<l;i++) {
        if ( sorted[ix+i]!==seq[i] )
            return false;
    }

    return true;
}

var cards = [{card:'h7'},{card:'c8'},{card:'h9'},{card:'st'}]

test( _.map(cards, function(obj) {
    return obj.card.charAt(1);
}), true );

test(['7','8','9','t'] , true);
test(['j','q','k','a'] , true);
test(['7','8','k','a'] , false);
test(['j','k','7','a'] , false); 
```

还有一个小提琴[http://jsfiddle.net/KDrDy/2/](http://jsfiddle.net/KDrDy/2/)

# .net - 外部 C# 函数的复合 C1 部署错误？

> ID：11646924
> 
> 赞同：1
> 
> 时间：2012-07-25T09:40:53.000
> 
> 标签：.net, iis, c1-cms

我尝试通过发布 Visual Studio 项目将复合 C1 网站部署到 IIS，但部署后，找不到外部 C# 函数。这是错误的图片：

" **XSLT Function call markup for failed to parse ('The Function named 'Composite.Functions2.GetPage' is known. 确保它以您提供的确切拼写和大小写存在。')。有关更多详细信息，请参阅服务器日志。** "

请给我答案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:10:39.223

此处讨论了此问题 - [http://compositec1.codeplex.com/discussions/388950](http://compositec1.codeplex.com/discussions/388950)

**解决方案：**当您在 VS 中发布时，它会复制解决方案中在项目文件中具有适当“构建操作”的所有文件。在您的情况下，这些新的 .cs 文件要么不是解决方案的一部分，要么没有必要的构建操作。您可以将文件添加到解决方案中，也可以使用其他一些方式来部署 C1 网站（例如 - 只需复制文件。）

# module - 如何使用 RequireJS 构建复杂的 Web 应用程序

> ID：11646928
> 
> 赞同：0
> 
> 时间：2012-07-25T09:41:17.053
> 
> 标签：module, requirejs

我看到有一些与我相关的问题（比如[这个有趣的问题](https://stackoverflow.com/questions/6184734/how-to-structure-multiple-pages-with-requirejs)），但我想知道如何正确地做到这一点，我无法通过其他问题或 RequireJS 文档找到它。

我正在开发一个非常繁重的 Web 应用程序，它只能在一个 html 页面中运行。

在 RequireJS 之前，我曾经用公共方法做很多 JS 模块，并通过`on`Dom READY 方法上的事件连接它们，如下所示：

```
var DataList = function () {
    this.base = arguments[0];
    this.onUpdate = function (event) { ... }
}

$(function () {
    var dataList = {}; DataList.apply(dataList, [$('#content')]);
    $('table.main', dataList.base).on ('update', dataList.onUpdate);
}); 
```

使用 RequireJS，我可以很容易地看到我可以在单个文件上拆分 DataList 和所有其他类似的类，但是那`$(function () {});`部分呢？

我仍然可以保持这种方式，但是当我的主库被加载时，我将事件放在 RequireJS 的 main function() 上，而不是 jQuery 的 DOM 就绪函数？

或者我是否必须更改创建 JS“类”的方式，以包含一个 init 函数，当我执行时会调用它，例如：

```
require(['Datalist'], function(dataList) {
    dataList.init($('#content'));
}); 
```

最让我恼火的是，由于我只有一个 html 文件，我担心`require()`将不得不加载大量文件，我希望它只加载库，它们会加载工作所需的子库.

我不知道，RequireJS 的思维方式让我有点不知所措：/

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:06:27.873

“*我还能保持这种方式，但是当我的主库被加载时，我将事件放在 RequireJS 的主函数（）上，而不是 jQuery 的 DOM 就绪函数？* ”

如果将函数或“类”分成模块，则可以使用 RequireJS`domReady`函数：

```
require(['module1'], function(module1) {
    domReady(function(){
        // Some code here ftw
    })
}); 
```

这里的好处是该`domReady`功能将允许立即下载模块，但在您的 DOM 准备好之前不会执行它们。

*“或者我是否必须更改创建 JS“类”的方式，以包括一个 init 函数，例如，当我执行时会调用该函数”*

您不需要以这种方式更改与代码交互的方式，但您可以改进它。在您的示例中，我将使 DataList 成为一个模块：

```
define(function(require) {
    var $ = require('jquery');

    var DataList = function () {
        this.base = arguments[0];
    };

    DataList.prototype.onUpdate = function() {

    };

    return DataList;
});

require(['data-list'], function(DataList) {

    var data = {};

    // Call DataList with new and you won't need to set the context with apply
    // otherwise it can be used exactly as your example
    new DataList(data);

}); 
```

*“最让我烦恼的是，由于我只有一个 html 文件，我担心 require() 将不得不加载大量文件，我希望它只加载它们会加载子的库工作所需的库。”*

使您的代码尽可能模块化，[然后使用优化器](http://requirejs.org/docs/optimization.html)将其打包到一个 JS 文件中。

# extjs - 编辑窗口在 extjs 中返回

> ID：11646929
> 
> 赞同：0
> 
> 时间：2012-07-25T09:41:25.773
> 
> 标签：extjs

我正在使用 extjs 并在其中制作了一个记录网格。最重要的是，有按钮编辑

记录。单击此按钮后，编辑窗口将返回并且无法查看详细信息。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:03:00.027

您可以将该编辑窗口作为父容器（包含网格）的子级。

```
var win = Ext.create('Ext.Window', {
    //Configuration
});
mainWindow.add(win);
win.show(); 
```

然后它将作为主窗口的孩子出现（不会返回）。这还有一个好处——每当你关闭你的主窗口时，这个窗口也会被破坏。

编辑（详细解释）：

你有一个网格

```
var grid = Ext.create('Ext.grid.Panel', {
    //Your configuration
}); 
```

您必须将它放在其他窗口中（例如 mainWindow）

```
var mainWindow = Ext.create('Ext.Window', {
    items: [grid]
}); 
```

这是您要打开的新窗口（编辑窗口）

```
var win = Ext.create('Ext.Window', {
    //Configuration
}); 
```

层次结构是：

```
mainWindow
    grid
win 
```

现在这`win`是独立于`mainWindow`. 它可以在它的后面和前面。当您单击`edit`网格（在 中`mainWindow`）时，它会突出显示这一点并将`win`（编辑窗口）发送到后面。

我要求您将其`win`作为孩子添加到`mainWindow`：

```
mainWindow.add(win) 
```

那么层次结构就会变成

```
mainWindow
    grid
    win 
```

现在，`win`来了`mainWindow`，因此不能落后。此外，每当您销毁它时，`mainWindow`它都会销毁所有子项目（包括`win`）。

# c# - 在 c# 中添加到一系列通用列表

> ID：11646935
> 
> 赞同：0
> 
> 时间：2012-07-25T09:41:47.290
> 
> 标签：c#, asp.net-mvc-3

任何人都知道在 c# 中向一系列通用列表添加值的方法吗？

我目前正在建立一个大型`List<List<int>>`的，整个过程花费的时间太长，我试图避免使用 foreach 循环和嵌套的 foreach 循环以节省一些时间。

假设我在一个通用列表中有 600 行。对于前 200 行中的每一行，我想添加一个“1”。对于接下来的 200 个，我想添加一个“2”。对于接下来的 200 个，我想添加一个“3”。

我现在这样做的方式是，我必须循环 600 次并单独添加每个，而我想做的是循环 3 次并批量添加条目。

我希望的代码是这样的：

```
List<List<int>> idList = GetFullList(); //list contains 600 rows

int[] newItems = {1, 3, 5};
int count = 0;
int amountToAmend = 200;
foreach (int i in newItems)
{
    //List<int> newID = new List<int>();
    //newID.Add(i);
    (idList.GetRange(count, amountToAmend)).Add(i);    
    count += amountToAmend;
} 
```

显然这不起作用，但希望你能看到我想要的那种东西。在我的应用程序中，我目前需要执行数万个不必要的循环，而如果代码存在，通常少于 10 个循环可以完成这项工作！

**更新：我不确定我是否已经很好地解释了这一点，所以只是为了澄清，这里是我在这里寻找的结果**

如果我有一个包含 6 行的列表，如下所示：

```
[6,7,8]
[5,6,7]
[6,4,8]
[2,4,7]
[5,1,7]
[9,3,5] 
```

我知道我想在前 3 行中添加 1，在接下来的 3 行中添加 2，因此它们将变为：

```
[6,7,8,1]
[5,6,7,1]
[6,4,8,1]
[2,4,7,2]
[5,1,7,2]
[9,3,5,2] 
```

使用 foreach 循环很容易做到这一点，我目前就是这样做的，但由于涉及的数据量很大，我正在寻找减少特定函数所花费时间的方法。我不确定是否存在一种方法，但如果有人知道，那么它将是 Stack Overflow 的好人 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T10:21:56.747

```
List<List<int>> idList = GetFullList(); //list contains 600 rows  

var iterator = idList.Begin();

int[] newItems = {1, 3, 5};  
int count = 0;  
int amountToAmend = 200;  
foreach (var item in newItems)
{
   iterator = iterator.AddItem(item);
   iterator = iterator.MoveForward(amountToAmend);
}

public struct NestedListIterator<T>
{
  public NestedListIterator(List<List<T>> lists, int listIndex, int itemIndex)
  {
    this.lists = lists;
    this.ListIndex = listIndex;
    this.ItemIndex = itemIndex;
  }
  public readonly int ListIndex;
  public readonly int ItemIndex;
  public readonly List<List<T>> lists;

  public NestedListIterator<T> AddItem(T item)
  {
    var list = lists.ElementAtOrDefault(ListIndex);
    if (list == null || list.Count < ItemIndex)
      return this;//or throw new Exception(...)
    list.Insert(ItemIndex, item);
    return new NestedListIterator<T>(this.lists, this.ListIndex, this.ItemIndex + 1);
  }
  public NestedListIterator<T> MoveForward(List<List<T>> lists, int index)
  {
    //if (index < 0) throw new Exception(..)
    var listIndex = this.ListIndex;
    var itemIndex = this.ItemIndex + index;
    for (; ; )
    {
      var list = lists.ElementAtOrDefault(ListIndex);
      if (list == null)
        return new NestedListIterator<T>(lists, listIndex, itemIndex);//or throw new Exception(...)
      if (itemIndex <= list.Count)
        return new NestedListIterator<T>(lists, listIndex, itemIndex);

      itemIndex -= list.Count;
      listIndex++;
    }
  }
  public static int Compare(NestedListIterator<T> left, NestedListIterator<T> right)
  {
    var cmp = left.ListIndex.CompareTo(right.ListIndex);
    if (cmp != 0)
      return cmp;
    return left.ItemIndex.CompareTo(right.ItemIndex);
  }
  public static bool operator <(NestedListIterator<T> left, NestedListIterator<T> right)
  {
    return Compare(left, right) < 0;
  }
  public static bool operator >(NestedListIterator<T> left, NestedListIterator<T> right)
  {
    return Compare(left, right) > 0;
  }
}
public static class NestedListIteratorExtension
{
  public static NestedListIterator<T> Begin<T>(this List<List<T>> lists)
  {
    return new NestedListIterator<T>(lists, 0, 0);
  }
  public static NestedListIterator<T> End<T>(this List<List<T>> lists)
  {
    return new NestedListIterator<T>(lists, lists.Count, 0);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:02:18.170

你想有`amountToAmend`时间每个项目`newItems`？
喜欢：
200 次 1
200 次 3
200 次 5

如果是这样，您可以尝试：

```
int amountToAmend = 200;
List<int> newItems = new List<int>(){ 1, 3, 5 };
<List<int>> idList = new List<List<int>>();
newItems.ForEach(i => idList.Add(new List<int>(Enumerable.Repeat(i, amountToAmend)))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:45:14.170

您可以使用LINQ 中的`Skip`和`Take`方法。

喜欢`idList.Skip(0).Take(200)`它会给你列表中的前 200 个项目，然后你可以更新这些项目。

对于更新，您可能会说：

```
int increment=2;
list.Select(intVal=> intVal+increment).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:47:50.800

这个怎么样：

```
foreach (int i in newItems)
{
    foreach (var row in idList.Skip(count).Take(amountToAmend)) 
    {
        row.Add(i);
    }
    count += amountToAmend;
} 
```

或使用 for 循环：

```
foreach (int i in newItems)
{
    for (int j = 0; j < amountToAmend; j++)
    {
        idList[count + j].Add(i);
    }
    count += amountToAmend;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T09:50:28.447

没有内置函数，尽管您根本无法避免循环（显式或隐式），因为您想向**每个**列表添加一个新元素。

你可以[`List.GetRange`](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)结合`List.ForEach`：

```
var newItems = new[] { 1, 2 };
int numPerGroup = (int)(idList.Count / newItems.Length);
for (int i = 0; i < newItems.Length; i++)
    idList.GetRange(i * numPerGroup, numPerGroup)
          .ForEach(l => l.Add(newItems[i])); 
```

请注意，上面**不是**Linq，即使在 .NET 2.0 中也可以使用

* * *

这是我的旧方法，不是您需要的：

您可以使用`Linq`and[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)将平面列表重新分配到嵌套列表中：

```
int amountToAmend = 200;
// create sample data with 600 integers
List<int> flattened = Enumerable.Range(1, 600).ToList();  
// group these 600 numbers into 3 nested lists with each 200 integers
List<List<int>> unflattened = flattened
    .Select((i, index) => new { i, index })
    .GroupBy(x => x.index / amountToAmend)
    .Select(g => g.Select(x => x.i).ToList())
    .ToList(); 
```

这是演示：http: [//ideone.com/LlEe2](http://ideone.com/LlEe2)

# php - 多语言网站：包括语言文件

> ID：11646937
> 
> 赞同：1
> 
> 时间：2012-07-25T09:41:59.003
> 
> 标签：php, multilingual

我得到了一些与多语言相关的工作。在去生活之前，我在当地尝试了一个演示。我正在为不同的语言使用不同的语言文件。

这些语言中有不同的变量。当我在我的主文件中包含该语言文件时，它会显示**？**字符而不是西班牙语/purtogish 文本。我的 HTML 页面字符集是 UTF-8，没关系。

当我不包含文件并直接在我的主文件中包含变量时，它可以工作吗？

任何机构都可以帮助解决问题吗？

示例文本：$lang['zip_code'] = "código postal";

# mysql - HTML5页面用node.js连接mysql数据库

> ID：11646942
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:09.767
> 
> 标签：mysql, html, node.js

我曾尝试使用 Joel 解决方案，但遇到了一些错误。谁能告诉我问题出在哪里。

应用程序.js

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, fs = require('fs')
, mysql = require('mysql')

var client = mysql.createConnection({
    host: 'localhost',
    user: 'root',
    password: '',
});

client.connect();

app.listen(3232);

function handler (req, res) {
    fs.readFile(__dirname + '/index.html',
    function (err, data) {
        if (err) {
            res.writeHead(500);
            return res.end('Error loading index.html');
        }

        res.writeHead(200);
        res.end(data);
    });
}

io.sockets.on('connection', function (socket) {
    socket.on('login', function(usr, pass){
        var TEST_DATABASE = 'mysqltest';
        var TEST_TABLE = 'users';

        client.query('USE '+TEST_DATABASE);

        client.query('SELECT name FROM '+TEST_TABLE+' WHERE user = "'+usr+'" AND password = "'+pass+'"', function(err, results) {
            if (err) throw err;
            console.log(results[0]); // [{1: 1}]
            socket.emit('retuLogIn',results[0]['name']);
        });

    });
    socket.on('disconnect', function(){
        console.log('Server has disconnected');
    });
}); 
```

# 索引.html

```
<html>
    <title>WebSocket Client Demo [socket.io]</title>
    <script src="http://localhost:3232/socket.io/socket.io.js"></script>
    <script>
    function connect() {

        try
        {
            var socket = io.connect('http://localhost:3232/');
            socket.on("connect",function(){
                document.getElementById('status').innerHTML ="Browser has connected to the app server";
                socket.emit('login', document.getElementById('txtUser').value,
                document.getElementById('txtPass').value);

            });
            socket.on('retuLogIn', function (data) {
                document.getElementById('status').innerHTML = 'Welcome '+data;
            });
        }
        catch(err)
        {
            document.getElementById('status').innerHTML = err.message;
        }
    }
    </script>
    <body>
        <h1>WebSocket Client Demo</h1>
        <div><p id="status">Enter user and password to Log-In</p></div>
        <label>User :</label>
        <input id="txtUser" type="text" maxlength="10" />
        <label>Password :</label>
        <input id="txtPass" type="text" maxlength="10" />
        <button id="connect" onClick='connect()'/>Log-In</button>
    </body>
</html> 
```

当我尝试在 node.js 中运行 app.js 文件时，它会给我以下错误：

```
C:\Program Files (x86)\nodejs>node "C:\Program Files (x86)\nodejs\app.js" info - socket.io started

C:\Program Files (x86)\nodejs\app.js:6 var client = mysql.createConnection({ ^ TypeError: Object # has no method 'createConnection' at Object. (C:\Program Files (x86)\nodejs\app.js:6:24) at Module._compile (module.js:449:26) at Object..js (module.js:467:10) at Module.load (module.js:356:32) at Function._load (module.js:312:12) at module.js:487:10 at EventEmitter._tickCallback (node.js:238:9)

C:\Program Files (x86)\nodejs> 
```

我不明白问题出在哪里。我已经检查了安装的 mysql 模块。

请帮助解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T10:30:42.577

@Chandan，我有同样的错误（简要）

```
TypeError: Object #<Object> has no method 'createConnection' 
```

检查了[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)但没有其他人将其报告为问题。安装 node mysql 模块的最新（alpha）版本解决了这个问题：

```
npm install mysql@2.0.0-alpha3 
```

YMMV。如果您在不更新 mysql 模块的情况下解决了问题，请通知我们。

# php - Codeigniter 嵌入 swf

> ID：11646944
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:17.197
> 
> 标签：php, codeigniter, flash

我已经搜索了互联网，但我看不到在 codeigniter 中嵌入 swf 的好教程。我的问题是：

1.  是否可以在codeigniter中嵌入swfs？还是只使用 html 嵌入？
2.  Uploadify 是否适合嵌入？
3.  有没有在codeigniter中嵌入swf的教程？

抱歉，我刚接触 codeigniter 和 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:54:27.577

您可能找不到教程，因为没有这样的东西；） CodeIgniter 使用 MVC（模型视图控制器）结构。视图是（或可以是）HTML。

因此，您不必将其嵌入 CI 中，而只需使用 HTML。您可以使用 CI 动态更改嵌入式 SWF。

我不明白您问题的 Uploadify 部分。是用来上传文件的……？希望这能回答你的问题。

附言。看看[netTuts](http://net.tutsplus.com/?s=codeigniter)的 CI 教程。

# javascript - 一次取消选中所有 JQuery 单选按钮集

> ID：11646947
> 
> 赞同：22
> 
> 时间：2012-07-25T09:42:26.640
> 
> 标签：javascript, jquery, jquery-ui

使用 jQ-ui 的按钮设置功能

```
<script>
    $(function() {
        $( "#radio" ).buttonset();
    });
    </script>

    <div id="radio">
        <input type="radio" id="radio1" name="radio" /><label for="radio1">Choice 1</label>
        <input type="radio" id="radio2" name="radio" checked="checked" /><label for="radio2">Choice 2</label>
        <input type="radio" id="radio3" name="radio" /><label for="radio3">Choice 3</label>
    </div> 
```

有没有办法一次取消选中按钮集的所有单选按钮？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-25T09:46:07.580

您可以使用以下命令取消选中它们（针对 jQuery UI 1.9 更新：

```
$('#radio input').removeAttr('checked');
// Refresh the jQuery UI buttonset.                  
$( "#radio" ).buttonset('refresh');
​ 
```

工作[JSFiddle](http://jsfiddle.net/faceleg/Lmnnp/19/)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-25T09:48:59.183

您可以匹配所有单选按钮并使用[prop()](http://api.jquery.com/prop/)取消选中它们。

但是，您还必须在这样做之后刷新按钮集小部件：

```
$("#radio").find("input:radio").prop("checked", false).end()
           .buttonset("refresh"); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-25T12:04:01.540

**jQuery 1.6 之前的版本**

```
$(':radio').attr('checked', false); 
```

或者

```
$(':radio').removeAttr('checked'); 
```

**jQuery 1.6+ 之后**

```
$(':radio').prop('checked', false); 
```

或者

```
$(':radio').removeProp('checked'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-02T13:53:08.130

偶然发现了这一点......使用 jQuery 1.9.1 使用按钮集的类名，所有按钮最初都未设置。尚不确定这是否有影响，但很容易知道。

```
$( "div.myclass" ).buttonset();

<div id="myDiv" class="myclass">
    <input type="radio" name="myname" id="id1" value="1"><label for="id1">Label1</label>
    <input type="radio" name="myname" id="id2" value="2"><label for="id2">Label2</label>
    <input type="radio" name="myname" id="id3" value="3"><label for="id3">Label2</label>
</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-29T08:08:07.410

这对我行得通

```
$('input:radio[name="RadioName"]').each(function () { $(this).attr('checked', false); }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-09T10:22:28.803

对于 jQuery 1.12+

将单选按钮包裹在 a 中`<div>`并给它一个 id（例如“radio”）

`$("#radio").find("input:radio").prop("checked", false)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-09T12:58:47.030

> Javascirpt 本机方式来实现这一点

```
function reset(){
//var list = document.querySelectorAll('input[type=radio]');
var list =document.querySelectorAll('input[type="radio"]:checked')
debugger
list.forEach(element => { 
if(element.checked){element.checked=false}}

);
}
```

```
<div id="myDiv" class="myclass">
    <input type="radio" name="myname" id="id1"  value="1"><label for="id1">Label1</label>
    <input type="radio" name="myname" id="id2" value="2"><label for="id2">Label2</label>
    <input type="radio" name="myname" id="id3" checked value="3"><label for="id3">Label3</label>
</div>

<button onclick="reset()">reset me</button>
```

# python - Python中的简单HTML模板

> ID：11646948
> 
> 赞同：11
> 
> 时间：2012-07-25T09:42:35.853
> 
> 标签：python, html, template-engine

我想用 Python 中的数据填充 HTML 模板。虽然我不知道任何 HTML，但我的一位同事会在我提供数据时准备 HTML 模板。然而，他对 Python 知之甚少。

您能否建议一个非常基本的模板框架，它可以很好地处理 HTML 和 Python 的这种分离（即 HTML 中没有太多特殊的语法；在 Python 数据代码中我知道的 HTML 也不多）？理想情况下，HTML 模板应该非常接近纯 HTML。

我还将表格作为数据，所以如果我不必准备 HTML 表格代码会很好，但他可以用一些最小的标记逻辑来完成。理想情况下，即使我的同事应用了 CSS 等更高级的概念，系统也应该可以正常工作。

我找到了[广泛的列表](http://wiki.python.org/moin/Templating)，但是由于我不了解技术语言，因此很难判断哪个系统最接近我的要求。

编辑：关键是我们是新手，我们只需要一个基本的解决方案:) - 但理想情况下对我来说没有 HTML，对他来说除了纯 HTML 也没有太多。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T09:49:54.627

好吧， [django](https://www.djangoproject.com/)有非常好的强大的模板引擎，其目的是将 HTML 与 python 逻辑分开（但这需要你完全使用 django，所以如果你只是想要模板，这可能是一种矫枉过正）。

如果您的模板*真的很*简单（没有循环），您可能会使用本机 python [string.format](http://docs.python.org/library/stdtypes.html#str.format)函数（我在一个为某些 Fortran 代码生成配置文件的辅助项目中使用它，而且还不错）。

其他选择可能是[jinja2](http://jinja.pocoo.org/docs/)，它非常接近 django 模板，但独立且更强大。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T10:37:44.403

我可以建议看看 web2py 吗？在最基本的层面上，您可以简单地让您的同事创建 html 文件，然后在需要数据的地方将其替换为 {{=var}} var 可以由用 python 函数编写的 web2py 控制器检索。从该函数中，您可以将数据放在一起并使用“return dict(var=var)”返回 html 视图。

如果您的视图如下所示：

```
<html>
    <head>
        <title>some title</title>
    </head>
    <body>
        <h1>{{=message}}</h1>
    </body>
</html> 
```

控制器可能如下所示：

```
def index():
    message = "Hello World"
    return dict(message=message) 
```

正如其他人所提到的，您也可以使用 django，但请查看一些[web2py 文档的链接](http://web2py.com/books/default/chapter/29/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-07T19:08:39.533

python中的简单模板是：[https ://docs.python.org/3.6/library/string.html#template-strings](https://docs.python.org/3.6/library/string.html#template-strings)

它带有语言，不需要外部库。

以下是如何使用模板的示例：

```
>>> from string import Template
>>> s = Template('$who likes $what')
>>> s.substitute(who='tim', what='kung pao')
'tim likes kung pao'
>>> d = dict(who='tim')
>>> Template('Give $who $100').substitute(d)
Traceback (most recent call last):
...
ValueError: Invalid placeholder in string: line 1, col 11
>>> Template('$who likes $what').substitute(d)
Traceback (most recent call last):
...
KeyError: 'what'
>>> Template('$who likes $what').safe_substitute(d)
'tim likes $what' 
```

# couchdb - 限制在 couchdb 中匿名删除文档

> ID：11646950
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:42.797
> 
> 标签：couchdb, couchapp

我有一个 CouchDB，任何匿名用户甚至没有登录都可以删​​除该文档。我该如何解决这个问题，只有特定用户创建的文档才能删除它。我正在使用 CouchApp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:05:34.290

你可以配置它。

请按照以下步骤操作。

1）以管理员身份登录沙发数据库
2）单击“配置”
3）查找“require_valid_user”并使其为真

完毕...

# c# - 如何使用存储过程在实体框架中获取数据集合

> ID：11646951
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:42.590
> 
> 标签：c#, sql-server, entity-framework

我创建了一个存储过程，它将返回一组数据。就我而言，它是一组角色

```
CREATE PROCEDURE [dbo].[GetRoles]
@ID Int
AS
SELECT Roles.Role FROM Roles WHERE Roles.CustomerCustomerID=@customerID
RETURN 0 
```

我正在使用实体框架将此值获取到如下变量：

```
var query = context.GetRoles(ID); 
```

我打算操纵这个`dataset`并创建一个`list`“角色”并返回`list`

但是由于我正在调用存储过程并且我没有在这里编写查询语句，例如：

```
using (AdventureWorksEntities context = new AdventureWorksEntities())
{
    string LastName = "Zhou";
    var query = from contact in context.Contacts 
                where contact.LastName == LastName 
                select contact;

    // Iterate through the collection of Contact items.
    foreach( var result in query)
    {
        Console.WriteLine("Contact First Name: {0}; Last Name: {1}", 
                result.FirstName, result.LastName);
    }
} 
```

如何获得每个结果中的值？

我显然无法在智能感知中访问表的字段

在这个问题上我应该采取什么方法？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:45:31.903

您需要在 EDMX 模型中创建 FunctionImport，并将列映射到实体或复杂类型。为此，请右键单击 EDMX，选择添加/函数导入，然后从列表中选择存储过程（如果没有，请从数据库中刷新模型）。给 FunctionImport 一个名称（例如：“GetRoles”）并选择它返回的内容（在您的示例中，是 Roles.Role 类型的标量集合。

然后

```
var query = context.GetRoles(ID); 
```

将返回一个`ObjectSet<T>,`其中 T 是您已将其映射到的类型，您可以对其进行迭代。

# sql - 如何选择多行作为单行

> ID：11646953
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:47.213
> 
> 标签：sql, sql-server, select

在`sql server`，如果我有这样的表：

```
id   |    name
-------------
1    |     x
2    |     y
3    |     z 
```

我想创建一个存储过程以在一行中返回结果，如下所示：

```
x | y | z 
```

我的代码是：

```
alter PROCEDURE getSupervisorEvaluationPercentages
(
    @FirstSupervisorNumber nvarchar(6),
    @Year int
)
as
DECLARE @Count INT
DECLARE @OptionID INT
DECLARE @getOptionID CURSOR

declare @OptionCountTb table(c int)

SET @getOptionID = CURSOR FOR
    SELECT Id FROM ObjectiveOption
OPEN @getOptionID
FETCH NEXT
    FROM @getOptionID INTO @OptionID
    WHILE @@FETCH_STATUS = 0
    BEGIN
        select @Count = (select COUNT(Id) from EvaluationProcess 
            where FirstSupervisorNumber = @FirstSupervisorNumber and Year = @Year and FirstSupervisorEvaluation = @OptionID)
        insert into @OptionCountTb values(@Count)
        FETCH NEXT
        FROM @getOptionID INTO @OptionID
    END
CLOSE @getOptionID
DEALLOCATE @getOptionID 
```

我想将表格的值显示`@OptionCountTb`为单行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:52:44.487

PIVOT 是其中一种方式 [http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:04:58.600

试试这个解决方案：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + [name] 
                    from t01
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')
 set @query = 'SELECT ' + @cols + ' from 
             (
                select [name]
                from t01
            ) x
            pivot 
            (
                count([name])
                for name in (' + @cols + ')
            ) p where 1=2 '
print(@query)
execute(@query) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T11:05:54.500

```
CREATE TABLE t1(id int,name varchar(10))
INSERT INTO t1
VALUES(1,'x'),
(2,'y'),
(3,'z')

SELECT STUFF((select '|'+name from t1 for XML path('')),1,1,'') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:46:42.463

```
select 
    name + ' '
from TableName
for xml path('') 
```

# jquery - jquery colorbox在页面启动时自动显示

> ID：11646954
> 
> 赞同：0
> 
> 时间：2012-07-25T09:42:50.903
> 
> 标签：jquery, colorbox

如果存在查询字符串，如何让我的颜色框自动显示。到目前为止，我有以下内容：

```
$(document).ready(function ()
{
    //if this is coming from continental
    if (document.location.href.indexOf("redirect=cfs") != -1)
    {
        //create box
        var $notice = $("<div>hello World</div>").appendTo($("body"));
        console.log($notice.text());
        $notice.colorbox({ inline: true, width: "965px" });
    }
}); 
```

但这无济于事，因为您似乎需要以某种方式触发颜色框来显示某些内容？

**编辑：** 我刚刚意识到您可以使用`$.colorbox`，但是如何将我的内容放入其中？

问候， 雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:51:32.217

只需使用 colorbox 的 html 属性：

```
$(document).ready(function (){
    if (document.location.href.indexOf("redirect=cfs") != -1)
    {
        var $notice = $("<div>hello World</div>");
        $notice.colorbox({ html: $notice, width: "965px" });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:33:44.130

以下代码为我完成了它：

```
$(document).ready(function ()
{
    //if this is coming from continental
    if (document.location.href.indexOf("redirect=cfs") != -1)
    {
        //create box
        var $notice = $("<div id='partnerMove'>test</div>").appendTo($("body"));
        console.log($notice.text());
        **$.colorbox({ href: '#partnerMove', inline: true, width: "600px" });**
    }
}); 
```

因此，您可以即时创建 HTML 元素，然后使用`$.colorbox`colorbox 的**href**设置引用新元素。

# jquery - jQuery自动完成选择事件不起作用

> ID：11646959
> 
> 赞同：1
> 
> 时间：2012-07-25T09:43:18.563
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我在我的网站中使用 jQuery 自动完成功能。当用户单击下拉选项时，我想转到搜索结果页面。为此，我使用了“选择”事件，但在选择事件期间它不会触发。

有任何想法吗 ？这是代码

```
 $(function(){
var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];

         $('#autocomplete').autocomplete({
            source: availableTags,
                select: function(event,ui){
                    alert("Selected ");
                }
         }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:49:14.763

您缺少右括号`$(function() {`- 您需要`});`在末尾添加 ..

```
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
        ];
    $('#autocomplete').autocomplete({
        source: availableTags,
        select: function(event, ui) {
            alert("Selected ");
        }
    });
});​  // added this 
```

[然后它工作正常](http://jsfiddle.net/pRPM4/)

还要确保您添加了正确的 JS 库和 CSS

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.22/jquery-ui.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css"> 
```

# android - 如何正确设置同步适配器？

> ID：11646967
> 
> 赞同：8
> 
> 时间：2012-07-25T09:43:51.903
> 
> 标签：android, synchronization, android-contentprovider, android-syncadapter

我是 syncAdapter 的新手。我已经观看了[**google IO 视频（**](https://www.youtube.com/watch?v=xHXn3Kg2IQE)[**此处**](https://dl.google.com/googleio/2010/android-developing-RESTful-android-apps.pdf)的讲座演示），并且我已阅读了 2 个关于它的教程（[**此处**](http://naked-code.blogspot.co.il/2011/05/revenge-of-syncadapter-synchronizing.html)和[**此处**](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)）。

我还尝试了教程的代码，令人沮丧的是我无法弄清楚如何正确实现同步适配器。

我相信一些偏好（无论是在清单中还是在 xml 文件中）都是错误的，但我不知道为什么。

我已成功允许添加同步帐户并使用其图标显示它。

但是，我面临一些奇怪的问题，我无法弄清楚它们为什么会发生：

1.  允许帐户同步。最终用户无法按下同步按钮。即使我在添加帐户时尝试添加这样的东西，它似乎也不会自动同步。

2.  添加帐户后，最终用户会看到一个奇怪的帐户描述：“res/xml/authenticator.xml”。不确定它的设置位置。

3.  单击帐户时（添加后），我看到一个空列表（很可能。我如何在那里添加更多项目？将来，我还需要与 facebook 和 gmail 同步，但我无法成功将我自己的 contentProvider 添加到此列表中。

我不需要进行真正的授权，所以我只在从 AccountAuthenticatorActivity 扩展的活动中使用下一个代码：

```
accountManager.addAccountExplicitly(account, PASSWORD, null);
final Intent intent = new Intent();
intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, USERNAME);
intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, accountType);
setAccountAuthenticatorResult(intent.getExtras());
setResult(RESULT_OK, intent);
finish(); 
```

我还尝试使用[此处](https://stackoverflow.com/a/8938955/878126)描述的内容设置自动同步并启用同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:19:44.417

关于 1) 是的，如果没有互联网连接，您将无法同步。原因是（尽管没有正确定义同步适配器）同步适配器是一个组件，它应该用于将主干与本地数据同步。如果没有连接，则启动同步是没有意义的。实际上，这仅在理论上是正确的，因为即使没有骨干数据库，我也必须开发一个 sybc 适配器。

我所做的是编写一个组件，该组件在触发时由同步适配器调用，并且在需要同步时由我自己的应用程序调用，即使没有连接也是如此

# mysql - 使用 Google Dart 进行数据库查询？

> ID：11646977
> 
> 赞同：12
> 
> 时间：2012-07-25T09:44:29.500
> 
> 标签：mysql, mongodb, dart, database

我浏览了文档，没有找到与数据库相关的任何内容。

我想这在本机上还不可能——如果没有，那么是否有任何库利用例如 Socket 类来连接数据库？

更具体地说，我想连接到 MySQL 和 MongoDB 数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T10:06:47.360

sqljocky 是[Dart 的 MySQL 驱动程序](https://github.com/jamesots/sqljocky)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-25T09:48:50.777

我发现[MongoDart](https://github.com/vadimtsushko/mongo-dart/)是第一个允许 MongoDB 访问 Dart 的库。

这是一个例子：

```
#import("../lib/mongo.dart");
#import("dart:builtin");

main() {
    Db db = new Db('mongo-dart-test');

    simpleUpdate() {
        DbCollection coll = db.collection('collection-for-save');
        coll.remove();  
        List toInsert = [
                         {"name":"a", "value": 10},
                         {"name":"b", "value": 20},
                         {"name":"c", "value": 30},
                         {"name":"d", "value": 40}
                       ];
        coll.insertAll(toInsert);
        coll.findOne({"name":"c"}).chain((v1) {
            print("Record c: $v1");
            v1["value"] = 31;    
            coll.save(v1);
            return coll.findOne({"name":"c"});
        }).then((v2) {
            print("Record c after update: $v2");
            db.close();
        });   
    };

    db.open().then((c)=>simpleUpdate()); 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T21:08:59.520

pub 上还有一个[postgresql 包](http://pub.dartlang.org/packages/postgresql)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T12:40:39.837

对于 sql server，我使用了一个使用 asp.net webservices 的 restfull 客户端来调用 sql 查询并以 json 格式返回结果。

我在 Web 服务中使用身份验证并在客户端和服务器中加密查询。我不知道这是否是最佳选择，但适用于所有数据库。

# oracle - 使用另一个表的列数据查找一个表中的行

> ID：11646978
> 
> 赞同：0
> 
> 时间：2012-07-25T09:44:29.413
> 
> 标签：oracle, oracle11g

我有两张桌子`tab1`和`tab2`. `tab1`有 39000 条记录和`tab2`15000 条记录。`tab1`并且`tab2`都有两个共同的列说`item_number`，`color_code`。但是 in `tab1`, `color_code`可能是 null 但不是 in `tab2`。`item_number`在两个表中都不为空。在`tab2`我必须插入一行（基于两列的唯一行）数据`tab1`。为此，我编写了这样的程序。它将比较每一行，但时间太长。有什么方法可以提高性能。先取两个游标：

```
CURSOR CUR_tab1 IS SELECT item_number,color_code FROM 
    (SELECT item_number,color_code, SNO RID ,
         MIN(SNO) OVER(partition BY item_number,color_code)
         MIN_RID FROM   tab1  ) WHERE RID= MIN_RID;

CURSOR CUR_tab2 IS SELECT sno_2,item_number,color_code,PRIORITY FROM tab2; 
```

`son`,是和`sno_2`中的主键。`tab1``tab2`

要在一个表中查找记录，我使用的是`for loop`.

```
SELECT NVL(MAX(SNO_2),0) INTO SNO_COUNT FROM tab2;
FOR CUR_tab1  IN CUR_NIIN_CAGE
LOOP
    -- GET THE NIIN_CAGE_PART RECORDS DATA.
    OLD_NNCGP_NIIN := CUR_tab1 .item_number;
    OLD_NNCGP_HCC  := CUR_tab1 .color_codeC;

    IF (SNO_COUNT>0 AND OLD_NNCGP_HCC IS NOT NULL) THEN  -- IF RECORDS EXISTS IN DB  
        FOR CUR_tab2 IN CUR_NIIN_HCC
        LOOP
            OLD_NIIN        := CUR_tab2.item_number;
            OLD_HCC         := CUR_tab2.color_codeC;
            NIIN_PRIORITY   := CUR_tab2.PRIORITY;

            IF (trim(OLD_NNCGP_NIIN) = trim(OLD_NIIN)
                AND trim(OLD_NNCGP_HCC)=trim(OLD_HCC)) THEN
                -- DO NOTHING
                ROW_COUNT:=0;
                PROCESSED   :=FALSE;
                EXIT;
            ELSE
                ROW_COUNT:=ROW_COUNT+1;
                PROCESSED   :=TRUE;
            END IF;
        END LOOP;
    ELSIF (SNO_COUNT=0 AND OLD_NNCGP_HCC IS NOT NULL) THEN
         PROCESSED   :=TRUE;
         ROW_COUNT:=ROW_COUNT+1;                  
    END IF;  

    IF (  PROCESSED ) THEN
        SNO_COUNT :=SNO_COUNT+1;   
        INSERT INTO tab2("SNO2","color_code","item_number","PRIORITY") 
        values (SNO_COUNT,OLD_NNCGP_HCC,OLD_NNCGP_NIIN,NULL);
        COMMIT;
    END IF;

    PROCESSED:=FALSE;
    ROW_COUNT:=0;
END LOOP; 
```

但这需要将近 7 分钟。有没有更好的方法来比较列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:15:15.637

您的代码按 Agonizing Row 逐行插入记录。这就是为什么它很慢。SQL 是一种基于集合的语言。所以拥抱套装的喜悦，看看你的表现会提高。

不幸的是，您还没有发布整个代码示例，因此以下内容可能在细节上是错误的，但它应该显示您的正确想法：

```
 SELECT NVL(MAX(SNO_2),0) INTO SNO_COUNT FROM tab2;        

    INSERT INTO tab2("SNO2","color_code","item_number","PRIORITY")  
        select SNO_COUNT+rownum,tab1.color_codeC,tab1.item_number,NULL)
        from 
        ( select distinct tab1.color_codeC,tab1.item_number
          from tab1
          where not exists
             ( select null from tab2
               where trim(tab1."color_codeC") = trim(tab2."color_codeC")
               and trim(tab1."item_number") = trim(tab2."item_number") ) 
```

* * *

有几件事对您的数据模型不利。

1.  使用 MAX(SNO_COUNT)。此技术无法扩展，并且在多用户环境中不起作用。您应该改用 Oracle 序列。
2.  使用双引号混合大小写标识符。这只是一系列等待发生的 ORA-00904 错误。只需使用大写标识符并忘记双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:42:01.783

目前尚不完全清楚您要达到的目标。基于一个或多个列值确保行唯一性的常规方法是创建唯一索引。

```
alter table <table>
  add constraint <constraint_name> unique (<column1>,..,<column_n>); 
```

每当您尝试插入包含表中已存在的列值组合的记录时，将引发异常 (DUP_VAL_ON_INDEX)。

# java - Java 严重性级别实现

> ID：11646990
> 
> 赞同：0
> 
> 时间：2012-07-25T09:45:27.097
> 
> 标签：java, oop

我的列表中有一个可以具有严重性级别的项目（这些级别是：信息，警告，错误，延迟，...）

我想以 OOP 方式对此进行编程，以便在需要时可以轻松添加更多严重级别。自从我使用 Java 以来已经有一段时间了，所以我不确定如何以正确的方式进行操作。

我所拥有的是：

```
 Public class ListItem
    {
       int sev; 
       String name;
       public ListItem(String name, int s)
       {
          this.name = name; this.sev = s;
       }
       ...
    } 
```

严重性应该有一个整数（如“1”）和一个名称（如“信息”）

我想“预定义”严重性，例如：

```
public static final int WARNING = 1;
public static final int ERROR = 2; 
```

但是，当“1”被指定为列表项的严重性时，如何显示名称“警告”？我有最好的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:46:30.623

您应该使用枚举而不是常量：

```
enum Level {
   INFO, WARNING, ERROR;
} 
```

您可以打印`Level`使用`toString()`

```
Level level = Level.INFO;
System.out.println(level.toString()); 
```

印刷

```
INFO 
```

更改为`ListItem(String name, Level level)`的优点是可以防止您使用未定义为有效级别`ListItem`的值创建 a。`int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:47:43.583

如果你使用`int`s 作为你的常量，你实际上会丢失任何类型信息，因此类型安全。这就是为什么最好使用“类型安全枚举”，特别是 Java `enum`。每个`enum`成员都是一个成熟的对象，因此您可以向其添加任何方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T09:51:23.787

**1.** `enum`将非常适合您的需要。

**2.**这里`value of the variable`将**只是****枚举列表**中指定值之一。因此，您将**确认仅传递了有效值。**

**例如：**

```
public enum Level{

    WARNING, ERROR;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T10:00:30.703

这实际上取决于您希望如何将系统扩展到未来。如果您介意修改代码，`enum`'s 非常适合该任务。

但是，如果您想通过引入它们来添加新的关卡（无需修改原始代码），您最好创建一个接口或类来提供您需要的基本功能。

显然，您需要实施`Comparable`以使您的生活更轻松

# android - Android Resources$NotFoundException：openRawResource 中的资源 ID #0x0

> ID：11646991
> 
> 赞同：-1
> 
> 时间：2012-07-25T09:45:30.293
> 
> 标签：android, exception, resources

我从 google play 用户那里得到了这个错误：

```
android.content.res.Resources$NotFoundException: Resource ID #0x0
at android.content.res.Resources.getValue(Resources.java:1010)
at android.content.res.Resources.openRawResource(Resources.java:935) 
```

该应用程序可以在模拟器、我的手机和许多其他手机上运行。我不知道为什么这个用户会收到错误。产生错误的代码是：

```
//The getTag will get the R.drawable.imagename
String varia= imageView1.getTag().toString(); 
TypedValue returnedValue = new TypedValue();

try {
myNum = Integer.parseInt(varia);
} 
catch(NumberFormatException nfe) {}

getResources().openRawResource(myNum, returnedValue); 
```

openrawResource 看起来不起作用。

标签包含资源名称：R.drawable.imagename

我再说一遍：这段代码正常工作，我不知道这个用户为什么会出错。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:52:59.960

如何为 imageView1 设置标签？`myNum = Integer.parseInt(varia);`抛出异常时可能会发生错误。在这种情况下`getResources().openRawResource(myNum, returnedValue);`，将尝试获取 ID 为 0 的资源。

# xcode - 在 Xcode 中为 iOS 模拟器构建时如何激活死代码剥离？

> ID：11646994
> 
> 赞同：5
> 
> 时间：2012-07-25T09:45:31.137
> 
> 标签：xcode, linker, ios-simulator

我正在使用 Xcode 构建一个链接预编译目标文件的项目。这些目标文件包含一些未解析的死代码符号。当 Xcode 为 iOS 设备构建时，它会在链接时将它们剥离，一切都可以顺利进行。然而，在为模拟器构建时，即使在项目配置中激活了选项（死代码剥离），它也不会剥离它们（-dead_strip 不会传递给链接器）。如果我手动将 -dead_strip 添加到终端上的链接命令，它将在模拟器中正确构建和运行。

在为 iOS 模拟器构建时，如何让 Xcode 将 -dead_strip 作为参数传递给链接器？我更喜欢干净的解决方案，热的黑客。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T00:15:23.247

试试这个步骤：

1) 打开 XCode 并按 cmd + 1

2）单击左侧面板中的项目->中间面板中的目标

3）点击“构建设置”

4）找到“其他链接器标志”并在此处添加您自己的链接器参数

希望会有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T12:31:00.517

从[Apple Developer Docs](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW8)中可以看出

> GCC_DEBUGGING_SYMBOLS = full 是 DEAD_CODE_STRIPPING 的先决条件。

也许设置*不正确*？

# c++ - c++ 3D游戏引擎

> ID：11646996
> 
> 赞同：2
> 
> 时间：2012-07-25T09:45:43.227
> 
> 标签：c++, 3d, directx

我想了解/构思一个 3D 游戏引擎。您会推荐哪些书籍/参考资料/教程？我希望它们是关于 C++/DirectX 而不是 Java。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T09:48:13.007

看看[Ogre3D](http://www.ogre3d.org/)。它是一个免费的开源 3d 引擎，可在许多平台上运行。您可以阅读它的文档并检查它的代码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T11:03:29.753

作为开发人员之一，我建议查看开源[Linderdaum Engine](http://www.linderdaum.com)。它适用于 Windows、Android 和 MacOS，并使用 OpenGL 3 和 OpenGL ES 2。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T09:57:48.650

看看：[游戏引擎架构](https://rads.stackoverflow.com/amzn/click/com/1568814135)ISBN-13：978-1568814131

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T15:54:19.527

[现在阅读这篇文章](http://www.dreamincode.net/forums/topic/95842-how-to-make-a-3d-game-engine/page__gopid__1923995&#entry1923995)，因为它很好地解释了它，但您可能需要获得更好的 3d 物理和图形库，但除此之外它很棒。

# java - 在运行时在调试透视图中更改变量值 eclipse

> ID：11646999
> 
> 赞同：12
> 
> 时间：2012-07-25T09:46:06.720
> 
> 标签：java, eclipse, debugging

自从我使用 Eclipse Helios 以来已经很长时间了，我发现在调试期间在运行时更改变量有些困难。

我放了一个断点，当调试器停在那里时，它会在“变量”面板中显示我正在寻找的对象，该面板在调试透视图中出现。

我要更改的值是对象内部的布尔值，但是这些是我所做的不成功的尝试：

1.  展开对象，查找变量展开它直到它显示值，将值更改为 false：这会导致对象中的所有布尔值发生变化
2.  将监视表达式添加到布尔变量，但后来我无法从那里找到改变其值的方法

不知道是否相关，我正在调试的应用程序是在旧的 jboss 5.1 上运行的，而调试本身是通过在调试模式下运行 jboss 来完成的，并通过 eclipse 连接调试配置。全部安装在我的本地主机上。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-09-29T08:49:58.140

以下步骤对我有用：

1.  单击**窗口**->**打开透视图**->**调试**

2.  单击选项卡**变量**。

3.  **右键单击**要更改其值的变量，然后单击**更改值**...

4.  设置**`Boolean.TRUE`**对话框中的值，然后单击确定。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T09:54:21.707

您可以更改该值。

右键单击变量将其添加到'watch'，然后在调试时转到'Expressions View'，在那里你可以更改值

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-25T09:51:14.817

尝试这个...

当断点停止时，编写以下代码：

```
// yourObject.setBoolean(Boolean.TRUE); 
```

现在选择代码并按 Ctrl+Shift+I。瞧，你完成了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-01T15:13:39.790

转到变量窗口，您可以在其中查看该行的当前对象的值。现在说例如 Item I 是一个具有`itemSold`布尔类型属性的对象。

物品

`->itemSold`

`Boolean`您可以按如下方式更改此变量的值：

右键单击属性 itemSold，您将获得更改值的选项。在该窗口中，编写如下内容，然后按确定。

`Boolean b=true;`

`return b;`

现在，一旦您按确定，值`itemSold`将更新为 true。你可以做类似的事情来弄错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T14:09:54.787

附加选项是右键单击评估，然后设置您的值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T10:42:12.913

选择该变量并按 Ctrl + Shift + I 打开检查视图，然后按相同的组合键打开表达式视图。您可以在那里更改其值。